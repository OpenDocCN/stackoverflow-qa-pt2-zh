# StackOverflow 问答 15415000-15415999

# jquery - 用jquery替换页面加载时DIV的内容

> ID：15415003
> 
> 赞同：3
> 
> 时间：2013-03-14T16:33:58.217
> 
> 标签：jquery

使用 jquery 有没有一种方法可以在页面加载时获取 DIV 的内容并用其他内容替换它？

```
<div class="content">Before</div> 
```

至

```
<div class="content">After</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:35:11.613

使用[`text()`：](http://api.jquery.com/text/)

```
$(".content").text("After"); 
```

***现场演示：http:** [//jsfiddle.net/heY3j/](http://jsfiddle.net/heY3j/)*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:39:03.640

为了背负Curt的回答，对此的完整暗示将是这样的：

```
$(document).ready( function() {
    $(".content").text("After");
}); 
```

这将在加载窗口并更新所需 div 元素的内部文本时执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T07:28:44.240

**用 worpdress 中的 jquery 替换页面加载时 DIV 的内容第一个替换 DIV 和第二个替换只是文本还加载 jQuery 字符串替换 **

```
 <script type="text/javascript"> 

    jQuery(function($){ 
    $( ".yourclass " ).replaceWith( "<h6>New heading</h6>" );
     });

    </script>
 **OR For text replace**

    <script type="text/javascript"> 
    jQuery(function($){ 
    $( ".single_add_to_cart_button " ).text( "Sepete ekle" );
     });
    </script>

/* For String Replace */

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript"> 
$(document).ready(function() {
    var strNewString = $('body').html().replace(/\On hold/g,'Processing');
    $('body').html(strNewString);
});

EXAMPLE : 2

jQuery("[lang='fr-FR']  .label-search option").each(function() {
var text = jQuery(this).text();
text = text.replace("All Category", "Catégories ");
jQuery(this).text(text);
});
</script> 
```

# cmake - 我可以在 cmake 时获取 CMake 为特定 vcproj 生成的 GUID 吗？

> ID：15415007
> 
> 赞同：4
> 
> 时间：2013-03-14T16:34:14.647
> 
> 标签：cmake, guid, vcproj

序言：我正在尝试将我的 C# csproj 与我们的 C++ 和 C++/CLI 代码库 cmake 构建的其余部分集成。我收到了不要尝试这样做的建议，因为 CMake 与 Visual Studio 中的 .NET 不能很好地合作，但是在实现了一些自定义之后，我觉得我已经很接近了。

我的部分定制是使用 configure_file 命令在 CMake 时编辑 csproj 文件，根据正在发生的构建类型（例如 x86、x64）对其进行定制。

问题是我使用一些 ProjectReference 标记来引用 C++/CLI 项目：

```
<ProjectReference Include="..\..\WrapperProject\WrapperProject.vcproj">
  <Project>{7BD6E175-CDD1-4F8D-A3B2-0AC862E62C03}</Project>
  <Name>WrapperProject</Name>
</ProjectReference> 
```

...并且 GUID 不能保持静态，因为只要重建 CMake 缓存，它们就会为项目更改（如果我弄错了，请纠正我）。

所以我想做的是在 CMake 时找到我们为这些项目计划的 GUID，并相应地编辑 vcproj 文件。

Google 告诉我人们可以使用“set_property”来设置 GUID，如下所示：

```
set_property(CACHE ${target_name}_GUID_CMAKE PROPERTY VALUE ${MY_GUID} ) 
```

...但我似乎找不到吸气剂等价物。我试过这样的事情：

get_property（WRAPPER_GUID 缓存内部属性 WrapperTargetName_GUID_CMAKE）

......没有运气。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:39:04.370

在玩了更多之后，我意识到弗雷泽指出的 - 这种方法并不总是有效，因为我不能指望 GUID 在新的 CMake 运行中可用。因此，我采用了我在 CMake 邮件列表中看到的建议的路线，即自己明确设置 GUID 值。

因此，在每个 C++/CLI 包装器项目的 CMakeLists.txt 中，我有这样的内容：

```
# Set a global cache variable for this project GUID
# The TestAppNet csproj needs this GUID to properly reference this project
set_property(GLOBAL PROPERTY Wrapper_GUID "1897F4D1-E929-444E-9343-00F094113772") 
get_property(projectGUID GLOBAL PROPERTY Wrapper_GUID)
MESSAGE( STATUS "Setting project GUID to: ${projectGUID}")
set(Wrapper_GUID_CMAKE "${projectGUID}" CACHE INTERNAL "Project GUID") 
```

在 C# 项目 CMakeLists.txt 中，我有这个：

```
get_property(CMAKE_WRAPPER_GUID GLOBAL PROPERTY Wrapper_GUID)
MESSAGE( STATUS "Setting Wrapper GUID to: ${CMAKE_WRAPPER_GUID}" ) 
```

...然后将 CMAKE_WRAPPER_GUID 用作在 configure_file 命令期间填充的 .csproj 文件中的变量。

我不确定这是否有效，但它似乎有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:47:38.883

您的语法略有偏差。你可能的意思是：

```
get_property(WRAPPER_GUID CACHE WrapperTargetName_GUID_CMAKE PROPERTY VALUE) 
```

然而，这是一种获取价值的相对复杂的方式。你可以这样做：

```
set(WRAPPER_GUID ${WrapperTargetName_GUID_CMAKE}) 
```

最后，这并不理想，因为 GUID 在第一次运行 CMake 之后才可用。因此，对于一个新的构建树，您必须运行 CMake 两次才能使用它。

# javascript - Socket.io + Express：Express 声明错误

> ID：15415010
> 
> 赞同：0
> 
> 时间：2013-03-14T16:34:19.437
> 
> 标签：javascript, node.js, sockets, express, socket.io

我的要求：

```
//app.js Socket IO Test
var app = require('express').createServer(),
redis = require('socket.io/node_modules/redis'),
io = require('socket.io').listen(app); 
```

我的错误：

```
Warning: express.createServer() is deprecated, express
applications no longer inherit from http.Server,
please use:
  var express = require("express");
  var app = express(); 
```

如何修改我的声明以避免此错误？我知道这种方法现在已被 Express 弃用，只是不确定需要将其更改为...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:38:44.633

只需将 var app = require('express').createServer() 替换为：

```
var express = require("express");
var app = express(); 
```

# actionscript-3 - FlexUnit 跑步者很慢

> ID：15415015
> 
> 赞同：0
> 
> 时间：2013-03-14T16:34:27.503
> 
> 标签：actionscript-3, apache-flex, flexunit4

我有一个包含 FlexUnit 运行器的 Air 应用程序，它对库项目执行一系列测试。

问题是完成约 1400 次测试需要几分钟（5-10 分钟！），其中几乎没有任何异步任务，而且其中大多数不是 CPU 太重。

我尝试在重复循环中运行相同的测试，发现有时它大约是 20 毫秒，有时它会飙升到超过 5-6 秒，在相同的测试条件下。

我的猜测是跑步者的某种内部问题。我很好奇是否有可能以某种方式加速它？

我已经尝试升级到最新的 FlexUnit 库。

# jquery - 如何使用jquery将图片显示到div中

> ID：15415016
> 
> 赞同：0
> 
> 时间：2013-03-14T16:34:34.163
> 
> 标签：jquery, html, image

有谁可以告诉我如何修改下面的代码以在用户单击链接时将图片显示到 div 中？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
    $("a").click(function() {
        $("#imageBox").html("<img src=' + this.href + '>");
    });
</script>
</head>
<body>
    <a href="background.jpg" class="sideLoad">Link to image 1</a>
    <a href="background.jpg" class="sideLoad">Link to image 2</a>
    <div id="imageBox"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:36:45.667

你的代码应该在[.ready](http://api.jquery.com/ready/)

```
$(function(){
    $("a.my-class").click(function(e) {
        e.preventDefault();
        $("#imageBox").html('<img src="' + this.href + '" />');
    });
}) 
```

这将为`a`具有类的元素启用该功能`myclass`，其他元素将正常运行

演示：[小提琴](http://jsfiddle.net/arunpjohny/ksBGu/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:36:20.160

你在正确的轨道上。基本上有两种方法：1）将`<img>`标签添加到 div，或 2）使用 JS/css 更改背景图像。

改变：

```
$("#imageBox").html("<img src=' + this.href + '>"); 
```

到：

```
$("#imageBox").html("<img src=\"" + this.href + "\">"); 
```

你的报价是错误的。

# drupal - 奇怪的重写难度 - 我做错了什么

> ID：15415018
> 
> 赞同：0
> 
> 时间：2013-03-14T16:34:38.140
> 
> 标签：drupal, mod-rewrite, url-rewriting, drupal-6

我试图通过在路径的开头附加语言代码来重写所有内容。当我使用这个：`RewriteRule ^(.*)3$ es/$1`

浏览`mysite.com/admin3`正确加载`mysite.com/es/admin`。

但我不知道为什么，但是当我使用它时：`RewriteRule ^(.*)$ es/$1`

浏览`mysite.com/admin`确实加载`mysite.com/es/admin`但加载速度很慢，而且是纯 html（没有 css，没有图像等）。

有人能指出我做错了什么吗？这让我发疯了——我是一个正则表达式菜鸟。

谢谢。

* * *

更新：我们已经有一个多语言网站正在运行。但我们希望通过本地域提供对其他语言的替代访问。所以我们想`mysite.com/es`同时拥有`newdomain.es`。这通过 Drupal 的“域名”语言协商是不可能的。

现在我已经设置了`newdomain.es/es`，但我希望用户只能`newdomain.es`在地址栏上看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:37:09.080

我刚刚意识到可以使用 Drupal 国际化中的子域选项`/admin/config/regional/language/configure`。

如果您选择 URL 旁边的 [configure]，您可以启用域前缀，例如`es.mysite.com`.

然后您可以将您的 DNS`mysite.es`指向`es.mysite.com`. `mysite.es`只需将值添加到 DNS 中`www - CNAME - es.mysite.com`（请注意，有时您可能需要在目标中添加一个额外的点，例如`www - CNAME - es.mysite.com.`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:11:15.650

我遇到的问题是，文件也被转发（例如，css、javascript、图像等）。这就是我解决它的方法：

```
RewriteCond %{HTTP_HOST} ^mysite.es$ [NC]
# optional: add other language exceptions so they still work
# RewriteCond %{REQUEST_URI} !^/fr/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ es/$1 [NC,QSA]

# for homepage
RewriteCond %{HTTP_HOST} ^mysite.es$ [NC]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ es 
```

# javascript - 如何在Javascript循环中为每个字符串获取一行

> ID：15415019
> 
> 赞同：1
> 
> 时间：2013-03-14T16:34:41.413
> 
> 标签：javascript, loops

我目前正在使用 javascript 并试图掌握它。我想知道如何在一行中获得每个问候，而不是一个接一个接一个接一个。希望我的问题有意义。

```
window.onload = function() {
getGreeting();
};

for(var hours=0; hours < 24; hours++)
{

document.getElementById("loop").innerHTML = document.getElementById("loop").innerHTML + "\n" +  getGreeting(hours); 
}

function getGreeting(hours) {
    var greetingText;
    if (hours >=6 && hours < 12) {
        greetingText = "Good morning!";
    } else if (hours >= 12 && hours < 17) {
        greetingText = "Good afternoon!";
    } else if (hours >= 17 && hours < 23) {
        greetingText = "Good Evening!";
    } else if (hours >= 23 || hours < 6) {
        greetingText = "Go to sleep!";
    }
    return greetingText;
} 
```

[http://jsfiddle.net/priswiz/KcS5b/](http://jsfiddle.net/priswiz/KcS5b/) 您在 jsfiddle 文件中看到问候语一个接一个地排列，我想知道如何每行获得一个。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:36:49.463

替换`\n`为`<br />`

[http://jsfiddle.net/KcS5b/2/](http://jsfiddle.net/KcS5b/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:38:39.050

您的问题是您正在使用换行符`\n`来添加新行。在 HTML 中，空白不被视为相关标记。当您考虑时，这是有道理的。您希望编写带有制表符和换行符的 HTML，但结果文档中不会出现这些空格。

您正在寻找的语义标记是换行标记，`br`.

编辑：此外，您可以将每个问候语包装在块级元素中，例如`div`. 默认情况下，一系列`div`s 将垂直堆叠。这样做的好处是可以在自己的语义标记中划分每个问候语，允许您应用独特的样式、使用 JavaScript 单独定位等。显然，对于您的简单示例，这可能是矫枉过正，但这延伸到一般的 Web 开发原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:58:33.153

```
document.getElementById("loop").innerHTML+=getGreeting(hours); 
```

如上所示使用连接（+）！

# r - 我有时间序列数据，如何为变量做月度报告和平均值？（使用 R）

> ID：15415021
> 
> 赞同：3
> 
> 时间：2013-03-14T16:34:51.653
> 
> 标签：r, date, time-series, analysis

我的时间序列数据看起来像 2012 年 8 月 18 日晚上 11:18:00 的 6 个月，我如何每月对它们进行子集化并在一个月内为变量取平均值？（使用 R）

太感谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:51:20.777

你可以使用`xts`包。首先，我生成您的数据。在这里，我创建了一个 6 个月、半天的数据。长数据

```
dat <- data.frame(date = as.POSIXct('8/18/2012 11:18:00',
                                    format='%m/%d/%Y %H:%M:%S') + 
                         seq(0,by = 60*60*12,length.out=365),
                  value = rnorm(365)) 
```

然后我创建一个`xts`对象

```
library(xts)
dat.xts <- xts(x= dat$value,order.by = dat$date) 
```

最后，我使用方便的功能`apply.monthly`来`lapply`获得类似的东西：

```
apply.monthly(dat.xts,mean)
2012-08-31 23:18:00  0.03415933
2012-09-30 23:18:00  0.02884122
2012-10-31 22:18:00 -0.27767240
2012-11-30 22:18:00 -0.15614567
2012-12-31 22:18:00 -0.02595911
2013-01-31 22:18:00 -0.23284335
2013-02-16 10:18:00  0.14537790 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:57:20.407

您可以`format`使用日期和计算平均值`aggregate`（感谢@agstudy 提供示例数据）：

```
aggregate(value~format(date,"%Y-%m"),dat,FUN=mean)
  format(date, "%Y-%m")       value
1               2012-08 -0.31409786
2               2012-09 -0.37585310
3               2012-10 -0.04552703
4               2012-11 -0.05726177
5               2012-12  0.04822608
6               2013-01  0.03412790
7               2013-02 -0.10157931 
```

# python - 尝试在 Fedora 中执行 GNS3 并得到异常 AttributeError

> ID：15415022
> 
> 赞同：1
> 
> 时间：2013-03-14T16:34:52.307
> 
> 标签：python, fedora16

异常消息如下：

**Exception AttributeError: "'NoneType' object has no attribute 'GApp'" in bound method VBoxManager._ *del* _ of GNS3.VBoxManager.VBoxManager object at 0x2591fd0>>被忽略**

在这之前，我在 Fedora 上安装了 VirtualBox。为了解决这个问题，我决定卸载 VBox，但问题仍然存在。

# mongodb - MongoDB：选择子集合的匹配元素

> ID：15415023
> 
> 赞同：8
> 
> 时间：2013-03-14T16:34:55.350
> 
> 标签：mongodb, mongoose

我正在使用 mongoose.js 对 mongodb 进行查询，但我认为我的问题并非特定于 mongoose.js。

假设我在收藏中只有一条记录：

```
var album = new Album({
    tracks: [{
        title: 'track0',
        language: 'en',

    },{
        title: 'track1',
        language: 'en',
    },{
        title: 'track2',
        language: 'es',
    }]
}) 
```

我想选择语言字段等于“en”的所有曲目，所以我尝试了两种变体：

```
Album.find({'tracks.language':'en'}, {'tracks.$': 1}, function(err, albums){ 
```

并与 $elemMatch 投影绑定到同一件事：

```
Album.find({}, {tracks: {$elemMatch: {'language': 'en'}}}, function(err, albums){ 
```

在任何一种情况下，我都会得到相同的结果：

```
{tracks:[{title: 'track0', language: 'en'}]} 
```

选定的专辑曲目仅包含一个标题为“track0”的曲目元素（但应该同时存在“track0”和“track1”）：

```
 {tracks:[{title: 'track0', language: 'en'}, {title: 'track1', language: 'en'}]} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T19:24:33.790

就像@JohnnyHK 已经说过的那样，您必须使用聚合框架来实现这一点，因为两者`$`都只`$elemMatch`返回第一个匹配项。

就是这样：

```
db.Album.aggregate(
    // This is optional. It might make your query faster if you have
    // many albums that don't have any English tracks. Take a larger 
    // collection and measure the difference. YMMV.
    { $match: {tracks: {$elemMatch: {'language': 'en'}} } },

    // This will create an 'intermediate' document for each track
    { $unwind : "$tracks" },

    // Now filter out the documents that don't contain an English track
    // Note: at this point, documents' 'tracks' element is not an array
    { $match: { "tracks.language" : "en" } },

    // Re-group so the output documents have the same structure, ie.
    // make tracks a subdocument / array again
    { $group : { _id : "$_id", tracks : { $addToSet : "$tracks" } }} 
); 
```

您可能想尝试仅使用第一个表达式的聚合查询，然后逐行添加表达式以查看输出的更改方式。了解如何创建稍后使用和[`$unwind`](http://docs.mongodb.org/manual/reference/aggregation/unwind/)重新合并的中间文档尤为重要。`$group``$addToSet`

结果：

```
> db.Album.aggregate(
     { $match: {tracks: {$elemMatch: {'language': 'en'}} } }, 
     { $unwind : "$tracks" },
     { $match: { "tracks.language" : "en" } },
     { $group : { _id : "$_id", tracks : { $addToSet : "$tracks" } }}  );
{
    "result" : [
            {
                    "_id" : ObjectId("514217b1c99766f4d210c20b"),
                    "tracks" : [
                            {
                                    "title" : "track1",
                                    "language" : "en"
                            },
                            {
                                    "title" : "track0",
                                    "language" : "en"
                            }
                    ]
            }
    ],
    "ok" : 1
} 
```

# java - Java - 在数据接收时向另一个线程触发事件

> ID：15415026
> 
> 赞同：1
> 
> 时间：2013-03-14T16:35:01.550
> 
> 标签：java, multithreading, event-handling, nio

我必须编写一个管理多个数据报套接字的服务器。我知道 java.nio 的选择器功能，它允许对不同的套接字进行异步管理但是，在解析完消息后，我需要将事件触发到另一个线程（可选地使用一些参数）。有没有办法让其他线程“注册”到管理套接字的线程并让他们知道数据已经为他们准备好了？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:51:14.883

您可以使用支持异步网络调用的 ExecutorService。此时返回的 Future 可以在完成时充当消息传递者。

```
public class SocketWork<T>{

    private final ExecutorService service = Executors.newSingleThreadExecutor();
    private final Future<T> future;

    public SocketWork(){
        future = service.submit(new SocketWorkCallable<T>());    
    }

    public T register(){
        // all threads entering register will block until 
        // the SocketWorkCallable is completed and returns.
       return future.get();
    }
} 
```

另一种方法是使用 CountdownLatch。

```
public class SocketWork<T>{

    private final CountdownLatch latch = new CountdownLatch(1);
    private T message;

    public void executeSocketWork(){
        //execute work and get message
        this.message = returnedMessage;
        latch.countDown();
    }

    public T register(){
        latch.await();
        return message;
    }
} 
```

你也可以用 ReadWriteLock 做类似的事情。

您可以想象，这仅适用于单个任务。每个实例`SocketWork`

# javascript - Jquery拖放更改div内容

> ID：15415031
> 
> 赞同：1
> 
> 时间：2013-03-14T16:35:11.477
> 
> 标签：javascript, jquery, html, drag-and-drop

我在 html 文档中有 2 个可拖动的 div，并且在 2 个可拖动的 div 旁边有 1 个可放置的 div。

当您将其中一个可拖动的 div 拖到可放置的 div 上时，可放置的 div 会显示一些文本，并且可拖动的 div 会恢复到原来的位置。

我的问题是如何根据拖放到可放置 div 上的可拖动 div 更改可放置 div 中的文本？

我希望这是有道理的，下面是我的代码。

非常感谢

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Droppable - Revert draggable position</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<style>
#draggable, #draggable2 { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
#draggable, #draggable1 { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
#droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
</style>
<script>
$(function() {
$( "#draggable" ).draggable({ revert: "valid" });
$( "#draggable1" ).draggable({ revert: "valid" });
$( "#droppable" ).droppable({
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: function( event, ui ) {
$( this )
.addClass( "ui-state-highlight" )
.find( "p" )
.html( "Dropped!" );
}
});
});
</script>
</head>
<body>
<div id="draggable" class="ui-widget-content">
<p>I revert when I'm dropped</p>
</div>

<div id="draggable1" class="ui-widget-content">
<p>I revert when I'm dropped</p>
</div>

<div id="droppable" class="ui-widget-header">
<p>Drop me here</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:42:28.023

使用您提供的示例，试试这个：

```
$(function() {
    $( "#draggable" ).draggable({ revert: "valid" });
    $( "#draggable1" ).draggable({ revert: "valid" });
    $( "#droppable" ).droppable({
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            $( this )
            .addClass( "ui-state-highlight" )
            .find( "p" )
            .html( ui.draggable[0].id );
        }
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/23/](http://jsfiddle.net/dirtyd77/SLGdE/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:39:07.870

`draggable`您可以从对象中获取元素（拖动的元素）的 id，`ui`如下所示：

```
drop: function( event, ui ) {
    ui.draggable[0].id
} 
```

## [小提琴](http://jsfiddle.net/qF94C/)

在您的示例中，您的完整`drop`回调将如下所示：

```
drop: function (event, ui) {
    $(this)
        .addClass("ui-state-highlight")
        .find("p")
        .html("Dropped! " + ui.draggable[0].id);
} 
```

# jquery - 以编程方式触发SlideToggle Jquery

> ID：15415033
> 
> 赞同：1
> 
> 时间：2013-03-14T16:35:12.453
> 
> 标签：jquery, jquery-mobile

加载页面时，我最初无法隐藏我的工具栏。我希望导航栏最初以关闭状态开始。我在打开和关闭状态之间切换的代码在这里..

```
$("div[data-role=header]").on("click", function () {
    $("div[data-role=navbar]").slideToggle(200);
});

$("div[data-role=navbar]").on("click", function (e) {
    e.stopPropagation();
}); 
```

这段代码完全符合我的要求，但我无法弄清楚当页面最初加载时导航栏以关闭状态开始时我能做什么

[http://jsfiddle.net/DMUwp/11/](http://jsfiddle.net/DMUwp/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:36:47.483

关于 slideToggling 的“关闭”状态是 css 显示值设置为无的状态。

```
#nav { display: none; } 
```

# ruby - 当条件为真时，是否有用于从数组中弹出项目的 ruby 习惯用法

> ID：15415035
> 
> 赞同：7
> 
> 时间：2013-03-14T16:35:24.647
> 
> 标签：ruby

是否有一个 Ruby 习语用于在条件为真时从数组中弹出项目并返回集合？

IE，

```
# Would pop all negative numbers from the end of 'array' and place them into 'result'.
result = array.pop {|i| i < 0} 
```

据我所知，不存在上述情况。

我目前正在使用

```
result = []
while array.last < 0 do
  result << array.pop
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:51:40.760

也许你正在寻找[`take_while`](http://ruby-doc.org/core-2.0/Array.html#method-i-take_while)？

```
array = [-1, -2, 0, 34, 42, -8, -4]
result = array.reverse.take_while { |x| x < 0 } 
```

`result`将是`[-8, -4]`。

要取回原始结果，您可以`drop_while`改用。

```
result = array.reverse.drop_while { |x| x < 0 }.reverse 
```

`result`在`[-1, -2, 0, 34, 42]`这种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:56:43.457

你可以自己写：

```
class Array
  def pop_while(&block)
    result = []
    while not self.empty? and yield(self.last)
      result << self.pop
    end
    return result
  end
end

result = array.pop_while { |i| i < 0 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T03:36:15.173

如果您正在寻找一种解决方案来弹出所有满足条件的项目，请考虑 a`select`后跟 a `delete_if`，例如

```
x = [*-10..10].sample(10)
# [-9, -2, -8, 0, 7, 9, -1, 10, -10, 3]
neg = x.select {|i| i < 0}
# [-9, -2, -8, -1, -10]
pos = x.delete_if {|i| i < 0}
# [0, 7, 9, 10, 3]
# note that `delete_if` modifies x
# so at this point `pos == x` 
```

# breeze - 从 BeforeSaveEntity 返回 false 时客户端会发生什么

> ID：15415038
> 
> 赞同：1
> 
> 时间：2013-03-14T16:35:39.467
> 
> 标签：breeze

我正在寻找有关从 BeforeSaveEntity(EntityInfo entityInfo) 返回 false 时在客户端会发生什么的文档，但我什么也没找到，所以我决定自己进行试验。

我对 Doccode 项目进行了测试：

```
test("create customer returning false from contextprovider", 1, function () {

    var em = newEm();
    var category = em.createEntity('Category', { CategoryName: 'Julian Category' });

    stop();

    em.saveChanges().then(function (saveResult) {
        //ok(category.entityAspect.entityState.isAdded(), "Added state because contextprovider return false");
        ok(em.hasChanges() === false,"No changes pending");
    })
    .fail(function (error) {
        debugger;
    })
    .fin(function () {
        start();
    });
}); 
```

我发现这两个断言都是正确的，所以我认为这可能是一个错误。

为了进行测试，我创建了一个自定义提供程序：

```
public class CustomEFContextProvider : EFContextProvider<NorthwindContext>
{
    public CustomEFContextProvider() : base()
    {

    }

    protected override bool BeforeSaveEntity(EntityInfo entityInfo)
    {
        if(entityInfo.Entity.GetType() == typeof( Category)){
            return false;
        }

        return true;
    }
} 
```

并更改了 NorthwindController 以使用它：

```
readonly CustomEFContextProvider _contextProvider =
    new CustomEFContextProvider(); 
```

保存类别时我返回 false，因此该类别不会插入数据库中，也不会在 saveResult.entities 数组中返回。keyMappings 也是空的。这一切都是我所期望的。我没想到的是 entitymanager.hasChanges 函数返回 false 因为类别实体被标记为已添加，我认为这让经理不一致。

这是一个错误？我做错了什么？我的期望错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:48:52.923

好的，从 v 1.2.5（刚刚发布）开始，这应该是固定的。如果可能，请回帖确认，并感谢错误报告。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:57:10.230

嗯……这是一个有趣的问题。

EntityManager.hasChanges 返回 true 的原因是您没有保存“已添加”的 Category 对象，因此微风不会对其调用**EntityAspect.acceptChanges**，因为它实际上仍处于“已添加”**但不可保存状态**。

我认为这实际上是正确的行为，因为如果我们要在此实体上自动调用 acceptChanges，您将永远不会在客户端上知道它没有被保存。您当然可以直接在 promise 回调中调用 acceptChanges。

这有意义吗？

# tsql - 在 T-SQL 脚本中创建视图

> ID：15415044
> 
> 赞同：3
> 
> 时间：2013-03-14T16:35:51.517
> 
> 标签：tsql, sql-server-2008-r2

我们正在运行 SQL Server 2008 R2 并创建一个归档函数，该函数将创建一个新数据库（以后可以脱机并存储在其他地方），然后从我们的主数据库中取出数据并将其放入新数据库，最后创建主数据库中的视图以查看新表中的存档数据。

我有创建数据库的脚本，在新数据库中创建存档表，从主数据库复制记录并将它们放入存档数据库并从主数据库中删除记录。现在我正在尝试编写视图的创建脚本：

```
declare @sql varchar(8000)
set @sql = 'create view [' + @srcdb + '].[dbo].[vw_artrans] as 
            select * from [' + @srcdb + '].[dbo].artrans
            union
            select * from [' + @archdb + '].[dbo].artrans'
exec (@sql) 
```

但是您不能传递数据库的名称来创建视图。

所以我尝试了这个：

```
declare @sql varchar(8000)
set @sql = 'use ' + @srcdb + ' 
            go
            create view [vw_artrans] as 
            select * from [' + @srcdb + '].[dbo].artrans
            union
            select * from [' + @archdb + '].[dbo].artrans'
exec (@sql) 
```

但它现在抱怨 GO 语句（*语法不正确*）。

为存档数据创建的数据库的名称在脚本中动态确定（`@archdb`包含名称），因此我无法在数据库名称中编写脚本，也无法运行第二个脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:21:16.947

基于@Sebastien 的回答，这里是解决方案：

```
declare @sql varchar(8000)

set @sql = 'EXEC ' + @srcdb + '.sys.sp_executesql N''create view [vw_artrans] as 
            select * from [' + @srcdb + '].[dbo].artrans
            union
            select * from [' + @archdb + '].[dbo].artrans'';'

exec (@sql) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:05:01.683

要在与您所在的数据库不同的数据库中执行动态 SQL 语句，您可以像这样使用 sp_executesql：

```
USE db1;
EXEC db2.sys.sp_executesql N'SELECT DB_NAME();'; 
```

这将导致返回 db2。

`GO`不是 T-SQL 语句。它由 SSMS 解释以将查询文本分成批次。它永远不会被发送到 SQL Server 本身。

# c# - Asp 与 C# 素数

> ID：15415052
> 
> 赞同：0
> 
> 时间：2013-03-14T16:36:07.313
> 
> 标签：c#, asp.net, numbers

我是一名 17 岁的学生，目前正在学习软件工程和 Web 开发，我现在在编写一些代码时遇到了麻烦。我需要做一个项目，让用户输入一个从 0 到 999 的数字，并判断它是否是质数。我到目前为止的代码是....

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    public void primeNumber()

    {

        int primeNumber1 = int.Parse(Request.Form["Text4"]);

        if (primeNumber1 % 1 == 0 &  !           (primeNumber1 % 2 == 0 &
                                                  primeNumber1 % 3 == 0 &
                                                  primeNumber1 % 4 == 0 &
                                                  primeNumber1 % 5 == 0 &
                                                  primeNumber1 % 6 == 0 &
                                                  primeNumber1 % 7 == 0 &
                                                  primeNumber1 % 8 == 0 &
                                                  primeNumber1 % 9 == 0))
                {
            Response.Write(" This is a prime number! ");
        }

        else
        {
            Response.Write(" This is not a prime Number! ");
        }

    }
} 
```

...但我无法让这个程序显示正确的答案。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:49:59.083

你把素数的概念弄错了。例如，您的代码会报告 3 不是质数，因为即使输入的数字是 3，您也会检查该数字是否均分为三。

最简单的解决方案是从 2 到 2 循环`primeNumber1 - 1`并检查其中是否有任何一个与该数字相等。当您使用循环时，您还需要一个变量来保存结果，因为您没有返回结果的单个表达式。

就像是：

```
bool prime = true;
for (int i = 2; i <= primeNumber1 - 1; i++) {
  if (primeNumber1 % i == 0) {
    prime = false;
  }
} 
```

对于相当小的数字，这当然是解决问题的最简单的可能解决方案。例如，您可以通过在知道它不是质数后立即退出循环来改进解决方案。

您也不需要一直循环到`primeNumber1 - 1`，而只需循环到数字的平方根，但如果您阅读检查素数的方法，您可以了解这一点。

您还需要处理 1 和 2 的特殊情况。根据定义，1 不是素数，但 2 是。

[http://en.wikipedia.org/wiki/Prime_number](http://en.wikipedia.org/wiki/Prime_number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:07:24.173

一般而言，对素数稍加用 google-fu 或对素数稍加注意，将引导您进入朴素算法：

对于所有满足 0 < n 的 n：

*   有两个“特殊情况”素数，**1**和**2**。
*   根据定义，所有大于 2 的偶数都是非质数
*   如果您考虑因式分解的性质，您必须考虑的最大可能因素是 的平方根`n`，因为在该点之上，这些因素是自反的（即 100 的可能因式分解是 1*100 、 2*50 、 4 *25 , 5*20 , 10*10 , 20*5 , 25*4, 50*2 和 100*1 — 100 的平方根是...10)。

这应该会引导您实现一个看起来像这样的实现：

```
static bool IsPrime( int n )
{
  if ( n < 1 ) throw new ArgumentOutOfRangeException("n") ;

  bool isPrime = true ;
  if ( n > 2 )
  {

    isPrime = ( 0 != n & 0x00000001 ) ; // eliminate all even numbers

    if ( isPrime )
    {
      int limit = (int) Math.Sqrt(n) ;
      for ( int i = 3 ; i <= limit && isPrime ; i += 2 )
      {
        isPrime = ( 0 != n % i ) ;
      }
    }
  }
  return isPrime ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:55:49.170

```
bool IsPrime(int number) {

    if (number == 1) return false;
    if (number == 2) return true;

    for (int i = 2; i < number; ++i)  {
       if (number % i == 0)  return false;
    }

    return true;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:45:06.107

每当您发现自己在编程中重复对一系列数字进行测试时，您就做错了。一个更好的构造是循环。这将为您提供标识符中的数字范围，然后可用于编写重复代码一次。例如我可以重写这段代码

```
primeNumber1 % 2 == 0 &
primeNumber1 % 3 == 0 &
primeNumber1 % 4 == 0 &
primeNumber1 % 5 == 0 &
primeNumber1 % 6 == 0 &
primeNumber1 % 7 == 0 &
primeNumber1 % 8 == 0 &
primeNumber1 % 9 == 0)) 
```

如下

```
bool anyFactors = false;
for (int i = 2; i <= 9; i++) {
  if (primeNumber1 % i != 0) { 
    anyFactors = true;
    break; 
  }
} 
```

在这一点上，我现在可以将值替换`allTrue`为您编写的原始条件。

```
if (primeNumber1 % 1 == 0 && !anyFactors) 
```

我还可以通过用不同的数字代替循环的条件检查来扩展此处测试的值的数量。如果我想检查 999 个值，我会改为写

```
for (int i = 2; i <= 999; i++) { 
  ...
} 
```

此外，您不想`&`在这种情况下使用。那是用于位级`and`操作。您正在寻找逻辑和运算符`&&`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T18:48:54.807

试试下面的代码：

```
bool isPrimeNubmer(int n)
{
    if (n >=0 && n < 4) //1, 2, 3 are prime numbers
        return true;
    else if (n % 2 == 0) //even numbers are not prime numbers
        return false;
    else
    {
        int j = 3;
        int k = (n + 1) / 2 ;

        while (j <= k)
        {
            if (n % j == 0)
                return false;
            j = j + 2;
        }
        return true;
    }
} 
```

# oop - MVC 会破坏封装吗？

> ID：15415053
> 
> 赞同：1
> 
> 时间：2013-03-14T16:36:09.793
> 
> 标签：oop, model-view-controller, language-agnostic, encapsulation

假设我有一门课来模拟一个城市。其特点如下：

*   它只有两个属性“name”和“population”，都是在构造函数中设置的私有属性。
*   它具有这些属性的 getter，但没有 setter。

我不希望此类的任何用户设置属性，我希望他们使用公共 .edit() 方法。

这种方法需要打开一个表格来输入城市和人口的新名称，即：一个视图。然后，如果我有一个视图，我想实现 MVC 模式，所以我的想法是控制器接收 .edit() 调用，呈现视图，检索数据，并将其发送到视图，以便它改变了它的状态。

但是，如果这样做，我必须将城市模型的属性从私有更改为公共。因此，如果任何用户实例化我的类，她/他可以直接更改属性。

所以，哲学问题：这不是打破封装吗？

**编辑**只是为了使它更明确：

这种`city_instance.edit()`方法应该是改变对象的唯一方法。

此外，我看到我的部分问题来自对模型是对象的误解（您可以在 php mvc 框架上阅读），当它实际上是一个不同的抽象时，它是一个分组业务逻辑的层（域对象 +我猜更多的东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:49:38.557

免责声明：*我真的不明白你在哪里提出`.edit()`要实施的方法，所以如果你能在那里澄清一点会有所帮助。*

这里要考虑的第一件事是，在您问题的项目符号列表中，您似乎暗示一个`City`实例的行为就像一个不可变对象：它在构造函数中获取其实例变量，并且不允许外部的任何人更改它们。但是，您稍后声明您实际上想要创建一种可视化编辑`City`实例的方法。这两个要求显然会造成一些紧张，因为它们是对立的。

如果您采用 MVC 方法，通过将视图与模型分离，您有两个主要选择：

*   将您的`City`对象视为不可变对象，而不是在表单中的值发生更改时编辑实例，而是丢弃原始对象并创建一个新对象。
*   提供一种改变现有`City`实例的方法。

`City`如果您实际上将 a视为不可变对象，则第一种方法可以使您的模型保持完整。对于第二个，有许多不同的方法：

*   最标准的方法是在`City`类中提供一个 mutator。这可以具有每个属性的独立设置器的形状，也可以具有通用消息（我认为这是`.edit()`您提到的方法）的形式，以通过获取数组来一次更改许多属性。请注意，这里您没有将表单对象作为参数，因为模型不应该知道视图。如果您希望您的视图记录模型中的内部变化，您可以使用[观察者](http://www.oodesign.com/observer-pattern.html)模式。
*   对控制器使用“朋友”类。一些语言允许友元类访问对象的内部。在这种情况下，您可以创建一个控制器，它是您的模型的友元类，它可以在模型和视图之间建立连接，而无需向您的模型添加修改器。
*   使用反射来完成类似于朋友类的事情。

这三种方法中的第一种是唯一与语言无关的选择。这是否会破坏封装很难说，因为需求本身会发生冲突（这基本上意味着希望将模型与用户可以更改的视图分开，但不允许模型本身为外部改变）。但是，如果您想要可变实例，我同意将模型与视图分离可以促进具有显式突变机制。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:02:23.720

> 注意：我指的是 MVC，因为它适用于 Web 应用程序。MVC 可以应用于多种应用程序，并且它以多种方式实现，因此很难说 MVC 做了或不做任何特定的事情，除非你严格地谈论由模式定义的东西，而不是特定的实现.

我认为您对“封装”是什么有一个非常具体的看法，这种看法不符合教科书对封装的定义，也不符合它的常见用法。我找不到“封装”的定义，它要求没有设置器。事实上，由于 Setter 本身就是用于“编辑”对象的方法，所以这是一种愚蠢的论点。

从维基百科条目（注意它说“像 getter 和 setter”）：

> 一般来说，封装是OOP（面向对象编程）的四大基础之一。封装就是把变量或者东西隐藏在一个类里面，防止未经授权的人使用。因此 getter 和 setter 等公共方法访问它，其他类调用这些方法进行访问。

[http://en.wikipedia.org/wiki/Encapsulation_(面向对象编程)](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming))

现在，这并不是说 MVC 不会破坏封装，我只是说您对封装的概念非常具体，而不是特别规范。

当然，使用 Getter 和 Setter 可能会导致许多问题，例如返回列表，然后您可以直接在对象本身之外更改这些列表。您必须小心（如果您关心）隐藏您的数据。您还可以将一个集合替换为另一个集合，这可能不是您想要的。

得墨忒耳法则在这里比其他任何东西都更重要。

但无论如何，所有这一切实际上只是一个红鲱鱼。MVC 只讲 GUI，GUI 应该尽可能简单。它在视图或控制器中应该几乎没有逻辑。您应该使用简单的视图模型将您的表单数据反序列化为一个简单的结构，该结构可用于您喜欢的任何业务架构（如果您不想要设置器，则使用不需要的对象创建业务层使用 setter 并使用 mutattors。）。

UI 层几乎不需要复杂的架构。UI 层更像是一个边界和网关，它将 HTTP 的平面形式和命令性质转换为您选择的任何业务对象模型。因此，在 UI 级别不会是纯粹的 OO，因为 HTTP 不是。

这称为阻抗不匹配，通常与 ORM 相关联，因为对象模型不容易映射到关系模型。HTTP 到业务对象也是如此。在这方面，您可以将 MVC 视为 ORM 的必然结果。

# filter - 以及对多值属性过滤器值的条件

> ID：15415054
> 
> 赞同：1
> 
> 时间：2013-03-14T16:36:11.640
> 
> 标签：filter, sphinx, multivalue

这是我的数据库的结构，包括产品和类别

-- 产品表

```
CREATE TABLE `product_table` (
`product_id` int(11) NOT NULL,
`product_title` text,
`product_description` text
); 
```

-- Product2Category 表

```
CREATE TABLE `product2category_table` (
`product_id` int(11) NOT NULL,
`category_id` int(11) NOT NULL
); 
```

我正在创建类别的多值属性

```
sql_attr_multi = uint prod_cat from query; \
select p.product_id, c.category_id from product as p, product2category as c
            where c.product_id = p.product_id; 
```

产品和类别之间的关系是多对多的。例如，一个名为 lenovo 的产品可以属于以下类别：

```
category_id category_title
    12           sturdy
    20           laptop 
```

问题：我应该如何使用 php-sphinx api 进行查询，在其描述中找到属于类别 id 12 和 20 的所有带有电子产品的产品。通常 $cl->setfilter('prod_cat',array(12,20) 将返回甚至属于任何一个类别的产品。我知道如果我将产品的所有类别组合在一起并进行全文搜索，这很简单。但是有没有办法处理 MVA 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:58:47.930

```
$cl->setfilter('prod_cat',array(12));
$cl->setfilter('prod_cat',array(20)); 
```

多个电话是'AND'ed :)

* * *

顺便说一句，可以简化您的 MVA 查询...

```
sql_attr_multi = uint prod_cat from query; \
    select product_id, category_id from product2category 
```

# c# - 在视图中显示局部视图并传递参数

> ID：15415055
> 
> 赞同：0
> 
> 时间：2013-03-14T16:36:16.713
> 
> 标签：c#, asp.net-mvc

我试图在我的索引视图中显示两个部分视图。在这些部分视图中是数据网格，当在我设置的搜索框中搜索某些内容时，我想显示数据。这两个页面在我单独执行时都可以工作，但我不知道如何将它们用作局部视图。

我的视图如下所示：

```
@using (Html.BeginForm("Index", "Home", "POST"))
{
<div class="searchField">
    <div class="searchbox">
        Search: <input type="text" name="heatSearch" />
        <input type="submit" value="Submit">
    </div>
</div>
}

 <div>
 @Html.Partial("PartialChemAnalysis", (string)ViewBag.SearchKey)
 </div>
 @Html.Partial("PartialSlag", (string)ViewBag.SearchKey) 
```

我的控制器看起来像这样：

```
 public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
    [HttpPost]
    public ActionResult Index(string heatSearch)
    {
        ViewBag.SearchKey = heatSearch;

        return View();
    }

    public ActionResult PartialChemAnalysis(string heatSearch)
    {
        HomeModel C = new HomeModel();
        IEnumerable<HomeModel> model = C.ChemList;
        C.ChemistryDataPull(heatSearch);

        return PartialView(C.ChemList);
    }

    public ActionResult PartialSlagView(string heatSearch)
    {
        PartialSlagViewModel D = new PartialSlagViewModel();
        IEnumerable<PartialSlagViewModel> model = D.SlagList;
        D.SlagViewDataPull(heatSearch); 

        return PartialView(D.SlagList);
    } 
```

理想情况下，该搜索框中的内容将传递给两个视图，并且网格将基于此形成。我不确定我做错了什么，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:46:32.563

我将从这个开始：

```
@{
      //create your first model
      HomeModel CModel = new HomeModel();
      CModel.ChemistryDataPull(Model.SearchValue);

      //create your other model
      PartialSlagViewModel DModel = new PartialSlagViewModel();
      DModel.SlagViewDataPull(Model.SearchValue); 
}

@Html.Partial("PartialAnalysis", CModel)
@Html.Partial("PartialSlag", DModel) 
```

这是假设您已经搜索、处理了回发，并且您已将 SearchValue 返回到模型中的视图。您可以在 ViewBag.SearchValue 中返回它，而不是我想并替换`Model.SearchValue`为`ViewBag.SearchValue`，但您的模型将是存储它的更好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:36:47.480

我需要将视图中的部分视图调用更改为：

```
@if(ViewBag.SearchKey != null)
{
 <div>
 @Html.Action("PartialChemAnalysis", "Home", (string)ViewBag.SearchKey)
 </div>
 <div>
 @Html.Action("PartialSlagView", "Home", (string)ViewBag.SearchKey)
</div>
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:57:40.660

如果我是你，我会将其发布到另一种方法。

```
@using (Html.BeginForm("Index", "Home", "POST"))
{
<div class="searchField">
    <div class="searchbox">
        Search: <input type="text" name="Search" />
        <input type="submit" value="Submit">
    </div>
</div>
}

 @Html.Partial("PartialAnalysis", (string)ViewBag.SearchKey)
 @Html.Partial("PartialSlag", (string)ViewBag.SearchKey)

//In Home Controller

[HttpPost]
public ActionResult Index(string Search)
{
    ViewBag.SearchKey = Search;

    return View();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:58:48.260

部分视图不需要控制器操作。控制器动作的存在实际上会将其变为视图。

在您的 @Html.Partial 调用中，您希望传递一个视图模型以供视图使用。这是您要放置网格数据的地方，通过任何关键字搜索，排序，准备并准备呈现。

这可以是您创建的完全不同的视图模型，专门用于支持您的局部视图，作为父页面视图模型中的属性公开，或者只是父页面视图模型中具有数据的 IEnumerable 属性（我顺便说一句，更喜欢第一种方法；它在代码方面更重，但更好地保留了封装）。

总而言之，您的控制器如下所示：

```
public class HomeController : Controller
{
    public ActionResult Index(string search)
    {
        return View(new IndexViewModel(search));
    }
} 
```

您的视图模型如下所示：

```
public class IndexViewModel
{
private string _search;

public IndexViewModel(string search)
{
    _search = search;
}

public AnalysisViewModel AnalysisViewModel
{
    get
    {
        return new AnalysisViewModel(_search);
    }
}

public SlagViewModel SlagViewModel
{
    get
    {
        return new SlagViewModel(_search);
    }
} 
```

}

并且您显示部分的视图看起来像

```
@Html.Partial("PartialAnalysis", Model.AnalysisViewModel)
@Html.Partial("PartialSlag", Model.SlagViewModel) 
```

# perl - 无法在 Mojo::UserAgent 请求中发布 json

> ID：15415058
> 
> 赞同：4
> 
> 时间：2013-03-14T16:36:21.473
> 
> 标签：perl, mojolicious, mojo

我无法获得以下`Mojo::UserAgent`将 JSON 发布到服务器的调用：

```
use Mojo::UserAgent;
my $ua=Mojo::UserAgent->new;
my $json = $ua->post("localhost:6767" => {} => json =>{ val=>10 })->res->json; 
```

在另一端使用假调试服务器`nc -l 6767`会给出以下输出：

```
POST / HTTP/1.1
User-Agent: Mojolicious (Perl)
Connection: keep-alive
Content-Length: 0
Host: localhost:6767 
```

不仅仅是`json`方法，`form`整个 Transactor 似乎在我的两台机器上都坏了。从文档：

```
perl -MMojo::UserAgent::Transactor -E 'say Mojo::UserAgent::Transactor->new->tx(PUT => "http://kraih.com" => json => {a => "b"})->req->to_string;'
PUT / HTTP/1.1
Content-Length: 4
Host: kraih.com

json 
```

很难相信我的眼睛。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:43:42.897

您的所有盒子都使用 Mojolicious 3.85 或更高版本吗？UA `form`/`json`生成器非常新，仅从[3.85 或 2013-02-13](https://github.com/kraih/mojo/blob/master/Changes#L44)开始。

您也可以尝试删除空的 hashref（这将用于额外的标头），除非有某种理由将它放在那里。

# servicestack - ServiceStack 自定义错误响应 DTO

> ID：15415059
> 
> 赞同：1
> 
> 时间：2013-03-14T16:36:24.247
> 
> 标签：servicestack

我们目前使用 ServiceStack 作为服务供应的核心框架。有谁知道是否可以将自定义异常包装到自定义`ErrorResponse`对象中？

来自 SS 维基：

> “除了上述选项之外，您还可以通过实现 IResponseStatusConvertible.ToResponseStatus() 方法来覆盖临时异常的序列化，并让它返回您自己填充的 ResponseStatus 实例。”

这似乎符合我的需要，但我不知道在哪里可以覆盖这个序列化。

同样，我尝试`httphandler`通过在 AppHost 中注册它们来使用自定义，但在发生异常时不会调用它们。

我当然错过了一些东西，有没有人可以指导我完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:47:00.740

这是 ServiceStack 的[错误处理 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)。

它的意思是，如果您的自定义异常实现，您可以控制**ResponseStatus**的序列化方式`IResponseStatusConvertible`。这是实现它的[ValidationException](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/FluentValidation/ValidationException.cs)的源代码示例：

```
public class ValidationException : ArgumentException, IResponseStatusConvertible 
{
    public IEnumerable<ValidationFailure> Errors { get; private set; }

    public ValidationException(IEnumerable<ValidationFailure> errors) : base(BuildErrorMesage(errors)) {
        Errors = errors;
    }

    private static string BuildErrorMesage(IEnumerable<ValidationFailure> errors) {
        var arr = errors.Select(x => "\r\n -- " + x.ErrorMessage).ToArray();
        return "Validation failed: " + string.Join("", arr);
    }

    public ResponseStatus ToResponseStatus()
    {
        var errors = Errors.ConvertAll(x =>
            new ValidationErrorField(x.ErrorCode, x.PropertyName, x.ErrorMessage));

        var responseStatus = ResponseStatusUtils.CreateResponseStatus(typeof(ValidationException).Name, Message, errors);
        return responseStatus;
    }
} 
```

但这仅控制 ResponseStatus 如何序列化，而不是如何创建通用响应。`IAppHost.ServiceExceptionHandler`如果要更改返回的错误响应，请查看描述或使用自定义服务运行程序。

# c++ - 如何在 OpenGL/C++ 中围绕窗口拖动图形

> ID：15415062
> 
> 赞同：0
> 
> 时间：2013-03-14T16:36:31.113
> 
> 标签：c++, opengl, graph, draggable

下面是到目前为止的代码，我的问题在于在窗口周围拖动图形？我好像做不到？对我有什么建议吗？？我想要的是当您单击并按住鼠标左键时，您应该能够在窗口周围拖动图形？

```
#include <GL/glut.h>
#include <stdlib.h>
#include <math.h>
#if !defined(GLUT_WHEEL_UP)
# define GLUT_WHEEL_UP

# define GLUT_WHEEL_DOWN 4
#endif

/*  Set initial size of the display window.  */
GLsizei winWidth = 600, winHeight = 600;  

/*  Set size of world-coordinate clipping window.  */
GLfloat xwcMin = -50.0, xwcMax = 50.0;
GLfloat ywcMin = -50.0, ywcMax = 50.0;
bool leftButton;
int downX, downY;

class wcPt3D {
    public:
      GLfloat x, y, z;
};

void init (void) {    
    /*  Set color of display window to white.  */
    glClearColor (1.0, 1.0, 1.0, 0.0);
}

void plotPoint (wcPt3D bezCurvePt) {
    glBegin (GL_POINTS);
    glVertex2f (bezCurvePt.x, bezCurvePt.y);
    glEnd ( );
}

/*  Compute binomial coefficients C for given value of n.  */
void binomialCoeffs (GLint n, GLint * C) {    
    GLint k, j;

    for (k = 0;  k <= n;  k++) {
      /*  Compute n!/(k!(n - k)!).  */
      C [k] = 1;
      for (j = n;  j >= k + 1;  j--)
        C [k] *= j;
      for (j = n - k;  j >= 2;  j--)
        C [k] /= j;
    }
}

void computeBezPt (GLfloat t, wcPt3D * bezPt, GLint nCtrlPts,
                    wcPt3D * ctrlPts, GLint * C) {
    GLint k, n = nCtrlPts - 1;
    GLfloat bezBlendFcn;

    bezPt->x = bezPt->y = bezPt->z = 0.0;

    /*  Compute blending functions and blend control points. */
    for (k = 0; k < nCtrlPts; k++) {
        bezBlendFcn = C [k] * pow (t, k) * pow (1 - t, n - k);
        bezPt->x += ctrlPts [k].x * bezBlendFcn;
        bezPt->y += ctrlPts [k].y * bezBlendFcn;
        bezPt->z += ctrlPts [k].z * bezBlendFcn;
    }
}

void bezier (wcPt3D * ctrlPts, GLint nCtrlPts, GLint nBezCurvePts) {
    wcPt3D bezCurvePt;
    GLfloat t;
    GLint *C;

    /*  Allocate space for binomial coefficients  */
    C = new GLint [nCtrlPts];

    binomialCoeffs (nCtrlPts - 1, C);
    for (int i = 0;  i <= nBezCurvePts;  i++) {
        t = GLfloat (i) / GLfloat (nBezCurvePts);
        computeBezPt (t, &bezCurvePt, nCtrlPts, ctrlPts, C);
        plotPoint (bezCurvePt);
    }
    delete [ ] C;
}

void displayFcn (void) {
    glClear (GL_COLOR_BUFFER_BIT);   //  Clear display window.

    /*  Set example number of control points and number of
     *  curve positions to be plotted along the Bezier curve.
     */    GLint nCtrlPts = 4, nBezCurvePts = 1000;

    wcPt3D ctrlPts [4] = { {-40.0, -40.0, 0.0}, {-10.0, 200.0, 0.0},
                           {10.0, -200.0, 0.0}, {40.0, 40.0, 0.0} };

    glPointSize (4);
    glColor3f (1.0, 0.0, 0.0);      //  Set point color to red.

     bezier (ctrlPts, nCtrlPts, nBezCurvePts);
     glutSwapBuffers();
}

void winReshapeFcn (GLint newWidth, GLint newHeight) {
    /*  Maintain an aspect ratio of 1.0\.  */
    glViewport (0, 0, xwcMin, ywcMin);

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ( );

    gluOrtho2D (xwcMin, xwcMax, ywcMin, ywcMax);

    glutPostRedisplay();
}

void MouseCallback(int button, int state, int x, int y) {
    downX = x;
    downY = y;
    leftButton = ((button == GLUT_LEFT_BUTTON) && (state == GLUT_DOWN));
    glutPostRedisplay();
}

void MotionCallback(int x, int y) {
    if (leftButton){ 
        downX=downX+x;
        downY=downY+y;
        gluOrtho2D (xwcMin, xwcMax, ywcMin, ywcMax);
    }

    downX = x;
    downY = y;
    glutPostRedisplay();
}
/*
   void MouseCallback(int button, int state, int x, int y) {
       if (button == GLUT_WHEEL_UP && glutGetModifiers()==GLUT_ACTIVE_CTRL) {
       }else if (button == GLUT_WHEEL_DOWN)
           glutPostRedisplay();
       }
*/

int main (int argc, char** argv) {
    glutInit (&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowPosition (50, 50);
    glutInitWindowSize (winWidth, winHeight);
    glutCreateWindow ("Bezier Curve");

    init ( );
    glutDisplayFunc (displayFcn);
    glutReshapeFunc (winReshapeFcn);
    glutMouseFunc(MouseCallback);
    glutMotionFunc(MotionCallback);
    glutMainLoop ( );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:08:56.100

尝试这个：

```
#include <GL/glut.h>
#include <cmath>

// Compute binomial coefficients C for given value of n.  
void binomialCoeffs
    (
    GLint   n, 
    GLint*  C
    ) 
{    
    for (GLint k = 0;  k <= n;  k++)
    {
        // Compute n!/(k!(n - k)!).  
        C [k] = 1;
        for (GLint j = n;  j >= k + 1;  j--)
            C [k] *= j;
        for (GLint j = n - k;  j >= 2;  j--)
            C [k] /= j;
    }
}

struct wcPt3D 
{
    GLfloat x, y, z;
};

void computeBezPt
    (
    GLfloat t, 
    wcPt3D* bezPt, 
    GLint   nCtrlPts, 
    wcPt3D* ctrlPts, 
    GLint*  C
    ) 
{
    GLint n = nCtrlPts - 1;
    GLfloat bezBlendFcn;

    bezPt->x = bezPt->y = bezPt->z = 0.0;

    // Compute blending functions and blend control points. 
    for (GLint k = 0; k < nCtrlPts; k++) 
    {
        bezBlendFcn = C [k] * pow (t, k) * pow (1 - t, n - k);
        bezPt->x += ctrlPts [k].x * bezBlendFcn;
        bezPt->y += ctrlPts [k].y * bezBlendFcn;
        bezPt->z += ctrlPts [k].z * bezBlendFcn;
    }
}

void bezier
    (
    wcPt3D* ctrlPts, 
    GLint   nCtrlPts, 
    GLint   nBezCurvePts
    ) 
{
    // Allocate space for binomial coefficients  
    GLint* C = new GLint [nCtrlPts];

    binomialCoeffs (nCtrlPts - 1, C);
    glBegin (GL_POINTS);
    for (int i = 0;  i <= nBezCurvePts;  i++) 
    {
        GLfloat t = GLfloat (i) / GLfloat (nBezCurvePts);
        wcPt3D bezCurvePt;
        computeBezPt (t, &bezCurvePt, nCtrlPts, ctrlPts, C);
        glVertex2f (bezCurvePt.x, bezCurvePt.y);
    }
    glEnd();
    delete [ ] C;
}

int btn;
int startMouseX = 0;
int startMouseY = 0;
int startTransX = 0;
int startTransY = 0;
int curTransX = 0;
int curTransY = 0;
void MouseCallback(int button, int state, int x, int y) 
{
    btn = button;
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        startMouseX = x;
        startMouseY = glutGet( GLUT_WINDOW_HEIGHT ) - y;
        startTransX = curTransX;
        startTransY = curTransY;
    }
    glutPostRedisplay();
}

void MotionCallback(int x, int y) 
{
    int curMouseX = x;
    int curMouseY = glutGet( GLUT_WINDOW_HEIGHT ) - y;
    if ( btn == GLUT_LEFT_BUTTON )
    { 
        curTransX = startTransX + ( curMouseX - startMouseX );
        curTransY = startTransY + ( curMouseY - startMouseY );
    }

    glutPostRedisplay();
}

// Set size of world-coordinate clipping window.  
GLfloat xwcMin = -50.0, xwcMax = 50.0;
GLfloat ywcMin = -50.0, ywcMax = 50.0;
void displayFcn () 
{
    // Clear display window.
    glClearColor (1.0, 1.0, 1.0, 0.0);
    glClear (GL_COLOR_BUFFER_BIT);   

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ( );
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glTranslatef( curTransX / w * 2, curTransY / h * 2, 0 );
    gluOrtho2D (xwcMin, xwcMax, ywcMin, ywcMax);

    glMatrixMode (GL_MODELVIEW);
    glLoadIdentity();

    // Set example number of control points and number of
    // curve positions to be plotted along the Bezier curve.
    GLint nCtrlPts = 4, nBezCurvePts = 1000;
    wcPt3D ctrlPts [4] = 
    { 
        {-40.0, -40.0, 0.0}, 
        {-10.0, 200.0, 0.0},
        {10.0, -200.0, 0.0}, 
        {40.0, 40.0, 0.0} 
    };

    // Set point color to red.
    glPointSize (4);
    glColor3f (1.0, 0.0, 0.0);      

    bezier (ctrlPts, nCtrlPts, nBezCurvePts);
    glutSwapBuffers();
}

int main (int argc, char** argv) 
{
    glutInit (&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowPosition (50, 50);
    glutInitWindowSize (600, 600);
    glutCreateWindow ("Bezier Curve");

    glutDisplayFunc (displayFcn);
    glutMouseFunc(MouseCallback);
    glutMotionFunc(MotionCallback);
    glutMainLoop ( );
} 
```

改编自我[在这里](https://stackoverflow.com/a/14887071/44729)的回答。

**编辑：**最小（-ish）差异版本：

```
#include <GL/glut.h>
#include <stdlib.h>
#include <math.h>
#if !defined(GLUT_WHEEL_UP)
# define GLUT_WHEEL_UP

# define GLUT_WHEEL_DOWN 4
#endif

/*  Set initial size of the display window.  */
GLsizei winWidth = 600, winHeight = 600;  

/*  Set size of world-coordinate clipping window.  */
GLfloat xwcMin = -50.0, xwcMax = 50.0;
GLfloat ywcMin = -50.0, ywcMax = 50.0;

class wcPt3D {
    public:
      GLfloat x, y, z;
};

void init (void) {    
    /*  Set color of display window to white.  */
    glClearColor (1.0, 1.0, 1.0, 0.0);
}

void plotPoint (wcPt3D bezCurvePt) {
    glBegin (GL_POINTS);
    glVertex2f (bezCurvePt.x, bezCurvePt.y);
    glEnd ( );
}

/*  Compute binomial coefficients C for given value of n.  */
void binomialCoeffs (GLint n, GLint * C) {    
    GLint k, j;

    for (k = 0;  k <= n;  k++) {
      /*  Compute n!/(k!(n - k)!).  */
      C [k] = 1;
      for (j = n;  j >= k + 1;  j--)
        C [k] *= j;
      for (j = n - k;  j >= 2;  j--)
        C [k] /= j;
    }
}

void computeBezPt (GLfloat t, wcPt3D * bezPt, GLint nCtrlPts,
                    wcPt3D * ctrlPts, GLint * C) {
    GLint k, n = nCtrlPts - 1;
    GLfloat bezBlendFcn;

    bezPt->x = bezPt->y = bezPt->z = 0.0;

    /*  Compute blending functions and blend control points. */
    for (k = 0; k < nCtrlPts; k++) {
        bezBlendFcn = C [k] * pow (t, k) * pow (1 - t, n - k);
        bezPt->x += ctrlPts [k].x * bezBlendFcn;
        bezPt->y += ctrlPts [k].y * bezBlendFcn;
        bezPt->z += ctrlPts [k].z * bezBlendFcn;
    }
}

void bezier (wcPt3D * ctrlPts, GLint nCtrlPts, GLint nBezCurvePts) {
    wcPt3D bezCurvePt;
    GLfloat t;
    GLint *C;

    /*  Allocate space for binomial coefficients  */
    C = new GLint [nCtrlPts];

    binomialCoeffs (nCtrlPts - 1, C);
    for (int i = 0;  i <= nBezCurvePts;  i++) {
        t = GLfloat (i) / GLfloat (nBezCurvePts);
        computeBezPt (t, &bezCurvePt, nCtrlPts, ctrlPts, C);
        plotPoint (bezCurvePt);
    }
    delete [ ] C;
}

int curTransX = 0;
int curTransY = 0;
void displayFcn (void) {
    glClear (GL_COLOR_BUFFER_BIT);   //  Clear display window.

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ( );
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glTranslatef( curTransX / w * 2, curTransY / h * 2, 0 );
    gluOrtho2D (xwcMin, xwcMax, ywcMin, ywcMax);

    glMatrixMode (GL_MODELVIEW);
    glLoadIdentity();

    /*  Set example number of control points and number of
     *  curve positions to be plotted along the Bezier curve.
     */    GLint nCtrlPts = 4, nBezCurvePts = 1000;

    wcPt3D ctrlPts [4] = { {-40.0, -40.0, 0.0}, {-10.0, 200.0, 0.0},
                           {10.0, -200.0, 0.0}, {40.0, 40.0, 0.0} };

    glPointSize (4);
    glColor3f (1.0, 0.0, 0.0);      //  Set point color to red.

     bezier (ctrlPts, nCtrlPts, nBezCurvePts);
     glutSwapBuffers();
}

int btn;
int startMouseX = 0;
int startMouseY = 0;
int startTransX = 0;
int startTransY = 0;
void MouseCallback(int button, int state, int x, int y) {
    btn = button;
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        startMouseX = x;
        startMouseY = glutGet( GLUT_WINDOW_HEIGHT ) - y;
        startTransX = curTransX;
        startTransY = curTransY;
    }
    glutPostRedisplay();
}

void MotionCallback(int x, int y) {
    int curMouseX = x;
    int curMouseY = glutGet( GLUT_WINDOW_HEIGHT ) - y;
    if ( btn == GLUT_LEFT_BUTTON )
    { 
        curTransX = startTransX + ( curMouseX - startMouseX );
        curTransY = startTransY + ( curMouseY - startMouseY );
    }
    glutPostRedisplay();
}
/*
   void MouseCallback(int button, int state, int x, int y) {
       if (button == GLUT_WHEEL_UP && glutGetModifiers()==GLUT_ACTIVE_CTRL) {
       }else if (button == GLUT_WHEEL_DOWN)
           glutPostRedisplay();
       }
*/

int main (int argc, char** argv) {
    glutInit (&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowPosition (50, 50);
    glutInitWindowSize (winWidth, winHeight);
    glutCreateWindow ("Bezier Curve");

    init ( );
    glutDisplayFunc (displayFcn);
    glutMouseFunc(MouseCallback);
    glutMotionFunc(MotionCallback);
    glutMainLoop ( );
} 
```

# c++ - eclipse 跨 gcc 工具链包装器插件

> ID：15415068
> 
> 赞同：2
> 
> 时间：2013-03-14T16:36:48.080
> 
> 标签：c++, eclipse, gcc, eclipse-cdt, cross-compiling

我目前让 Eclipse CDT 可以很好地使用托管的 Cross GCC 工具链。唯一的缺点是每当我创建一个新项目时，我都需要为我的交叉 gcc 编译器手动添加所有特殊的 gcc 标志。我知道我可以为 eclipse 创建一个自定义构建插件，但是使用我的自定义标志调用 cross gcc 编译器是否容易，或者我是否必须通过下载 crossgcc 源并修改它来比喻性地重新发明轮子？我问这个是因为我注意到`org.eclipse.cdt.build.crossgcc`插件是私有的，我不能使用它。有谁知道如何围绕 Cross GCC 工具链创建一个简单的包装器？我希望能够单击“MyCustomToolchain”，而不必配置 Cross GCC。

# algorithm - 用于检测数据集中因太大而无法完全加载到内存中的重复项的算法

> ID：15415070
> 
> 赞同：8
> 
> 时间：2013-03-14T16:36:51.383
> 
> 标签：algorithm, duplicates

这个问题有最优解吗？

描述一种在包含一百万个电话号码的文件中查找重复项的算法。该算法在运行时只有 2 兆字节的可用内存，这意味着您不能一次将所有电话号码加载到内存中。

我的“天真”解决方案将是一个 O(n^2) 解决方案，它迭代值并仅以块的形式加载文件，而不是一次全部加载。

> 对于 i = 0 到 999,999
> 
> ```
> string currentVal = get the item at index i
> 
> for j = i+1 to 999,999
>   if (j - i mod fileChunkSize == 0)
>     load file chunk into array
>   if data[j] == currentVal
>     add currentVal to duplicateList and exit for 
> ```

必须有另一种情况，您可以以一种非常独特的方式加载整个数据集并验证一个数字是否重复。有人有吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T17:22:18.123

将文件分成 M 个块，每个块都足够大，可以在内存中排序。在内存中对它们进行排序。

对于每两个块的集合，我们将对两个块执行最后一步合并排序以生成一个更大的块 (c_1 + c_2) (c_3 + c_4) .. (c_m-1 + c_m)

指向磁盘上 c_1 和 c_2 上的第一个元素，并创建一个新文件（我们将其称为 c_1+2）。

如果 c_1 的指向元素小于 c_2 的指向元素，则将其复制到 c_1+2 并指向 c_1 的下一个元素。
否则，将 c_2 的指向元素复制到并指向 c_2 的下一个元素。

重复上一步，直到两个数组都为空。您只需要使用存储两个指向数字所需的内存空间。在此过程中，如果您遇到 c_1 和 c_2 的指向元素相等，则您找到了重复项 - 您可以将其复制两次并递增两个指针。

生成的 m/2 数组可以以相同的方式递归合并 - 这些合并步骤需要 log(m) 来生成正确的数组。每个数字都将与其他数字进行比较，以找到重复项。

或者，@Evgeny Kluev 提到的一个快速而肮脏的解决方案是制作一个尽可能大的布隆过滤器，它可以合理地容纳在内存中。然后，您可以列出未通过布隆过滤器的每个元素的索引列表，并再次遍历文件，以测试这些成员是否重复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-29T03:14:58.867

我认为 Airza 的解决方案正朝着一个好的方向发展，但由于排序不是您想要的，而且成本更高，您可以结合 angelatlarge 的方法执行以下操作：

取一个适合大小为 M/2 的内存的块 C 。

获取块 C [i]

1.  遍历[i]并将每个元素散列到散列表中。如果元素已经存在，那么您就知道它是重复的，您可以将其标记为重复。（将其索引添加到数组或其他东西中）。

2.  获取下一个块 C [i+1] 并检查哈希表中是否已存在任何键。如果元素存在，则将其标记为删除。

3.  对所有块重复，直到您知道它们不会包含来自块 C [i的任何重复项]

4.  对块 C [i+1重复步骤 1,2]

5.  删除了所有标记为要删除的元素（可以在更合适的情况下在此期间完成，如果您必须转移其他所有内容，那么一次删除一个可能会更昂贵）。

这在 O((N/M)*|C|) 中运行，其中 |C| 是块大小。请注意，如果 M > 2N，那么我们只有一个块，并且运行时间为 O(N)，这对于删除重复项是最佳的。我们只需对它们进行哈希处理并确保删除所有冲突。

编辑：根据要求，我提供详细信息：* N 是电话号码。

*   块的大小取决于内存，它的大小应该是 M/2。这是将加载文件块的内存大小，因为整个文件太大而无法加载到内存中。

*   这会留下另外 M/2 个字节来保存哈希表²和/或重复列表¹。

*   因此，应该有 N/(M/2) 个块，每个块的大小为 |C| = 米/2

*   运行时间将是块的数量(N/(M/2))，乘以每个块的大小|C| （或 M/2）。总的来说，这应该是线性的（加上或减去从一个块更改为另一个块的开销，这就是为什么描述它的最佳方式是 O( (N/M) * |C| ）

一个。加载一个块 C [i]。**O(|C|)**
b. 遍历每个元素，测试并设置如果不存在**O(1)**将在其中插入和查找应该进行散列。
C。如果元素已经存在，您可以将其删除。¹
天。获取下一个块，冲洗并重复（2N/M 个块，所以**O(N/M)**）

¹移除一个元素可能会花费 O(N)，除非我们保留一个列表并一次性移除它们，避免在移除一个元素时移动所有剩余的元素。

²如果电话号码都可以表示为小于 2 ^(32) - 1 的整数，我们可以避免使用完整的哈希表，而只需使用标志映射，从而节省大量内存（我们只需要 N 位内存）

这是一个有点详细的伪代码：

```
void DeleteDuplicate(File file, int numberOfPhones, int maxMemory)
{
    //Assume each 1'000'000 number of phones that fit in 32-bits.
    //Assume 2MB of memory
    //Assume that arrays of bool are coalesced into 8 bools per byte instead of 1 bool per byte
    int chunkSize = maxMemory / 2; // 2MB / 2 / 4-byes per int = 1MB or 256K integers

    //numberOfPhones-bits. C++ vector<bool> for example would be space efficient
    //  Coalesced-size ~= 122KB  | Non-Coalesced-size (worst-case) ~= 977KB 
    bool[] exists = new bool[numberOfPhones];

    byte[] numberData = new byte[chunkSize];
    int fileIndex = 0;
    int bytesLoaded;
    do //O(chunkNumber)
    {
        bytesLoaded = file.GetNextByes(chunkSize, /*out*/ numberData);
        List<int> toRemove = new List<int>(); //we still got some 30KB-odd to spare, enough for some 6 thousand-odd duplicates that could be found

        for (int ii = 0; ii < bytesLoaded; ii += 4)//O(chunkSize)
        {
            int phone = BytesToInt(numberData, ii);
            if (exists[phone])
                toRemove.push(ii);
            else
                exists[phone] = true;
        }

        for (int ii = toRemove.Length - 1; ii >= 0; --ii)
            numberData.removeAt(toRemove[ii], 4);

        File.Write(fileIndex, numberData);
        fileIndex += bytesLoaded;

    } while (bytesLoaded > 0); // while still stuff to load
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:01:42.850

如果您可以存储临时文件，则可以将文件加载到块中，对每个块进行排序，将其写入文件，然后遍历块并查找重复项。您可以通过将数字与文件中的下一个数字以及每个块中的下一个数字进行比较来轻松判断该数字是否重复。然后移动到所有块中的下一个最小数字并重复直到用完数字。

由于排序，您的运行时间为 O(n log n)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:45:47.827

我喜欢@airza 解决方案，但也许还有另一种算法需要考虑：也许一百万个电话号码不能一次加载到内存中，因为它们的表达效率低下，即每个电话号码使用的字节数超过了必要的字节数。在这种情况下，您可以通过对电话号码进行散列并将散列存储在（散列）表中来获得有效的解决方案。哈希表支持字典操作（例如`in`），让您轻松找到骗子。

更具体地说，如果每个电话号码都是 13 个字节（例如 format 中`(NNN)NNN-NNNN`的字符串），则该字符串表示十亿个数字中的一个。作为一个整数，这可以存储为 4 个字节（而不是字符串格式的 13 个字节）。然后我们可能能够将这个 4 字节的“哈希”存储在哈希表中，因为现在我们的 10 亿个哈希数字占用了 3.08 亿个数字的空间，而不是 10 亿个。排除不可能的数字（区号`000`,`555`等中的所有内容）可能会让我们进一步减小散列大小。

# jquery - 我期望来自 SharePoint jQuery 应用程序的连续结果，但得到随机结果

> ID：15415075
> 
> 赞同：1
> 
> 时间：2013-03-14T16:37:08.940
> 
> 标签：jquery, sharepoint-2007

我从 SharePoint 库中检索电子邮件文档列表（*.eml 文件）。当该列表完成后，我会遍历它，将一些文件访问数据放入一个数组数组中。在此过程结束时，我有一组电子邮件文件名和其他访问数据。我遍历这个列表，通过 Ajax (jQuery) 打开每个电子邮件文件。当电子邮件内容返回给我时（来自非 Ajax 解码例程），我将其发送出去进行处理。

该处理是顺序相关的。我从访问数组中获取 email1，将其发送以进行解码，然后进行处理（本质上，将其写入列表）。我遇到的问题是，虽然我发送了 email1，然后是 email2，然后是 email3，但我从解码器得到的却是返回的感觉。也许是 1,2,3，也许是 1,3,2，也许是 3,2,1。因为我小心翼翼地确保按顺序处理电子邮件，所以我希望按顺序取回其内容。没有。

```
 $.each(arIDs, function(index, value) {
        //the following statement orders perfectly
          $("#results").append("<br>dealing with " + arIDs[index][2]);
          var ajaxPromise = $.ajax({
            type:"GET",
            url:"GFSSEForm/" + arIDs[index][2],
            dataType:"text"
        }).done(function(data) {
            decodeEmail(data);  //sets global arValues
            $("#results").append("<br>" + arValues);  //not returned in order passed
        });
.
.
. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:46:22.333

我对我创建的一个测试站点（[http://www.michaelbroschat.com/Ajax/AjaxTest.html](http://www.michaelbroschat.com/Ajax/AjaxTest.html)）进行了广泛的测试，最终我得到了所有我试图失败的浏览器（即，排队而不是 FIFO 序列） . 现代浏览器是最好的（IE10、Firefox、Chrome），但最终都失败了。我的工作环境是IE7，我也在IE8上测试过。两者都比现代浏览器失败得更快。

我想底线是您不能绝对确定您的浏览器是否会按照事件发生的顺序对其进行排队。

# javascript - javascript 中的 SQL.js

> ID：15415076
> 
> 赞同：8
> 
> 时间：2013-03-14T16:37:11.803
> 
> 标签：javascript, sqlite

我想直接从 javascript 脚本将数据存储在 SQLite 数据库中。我发现这个[SQL.js](https://github.com/kripken/sql.js)库是 javascript 的一个端口。但是，显然它仅适用于咖啡脚本。有谁知道如何在javascript中使用它？关于如何在 SQLite DB 中存储数据的其他想法也受到欢迎。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-26T17:09:04.147

## 更新

sql.js 现在有自己的 github 组织，我和原作者都是其中的成员：[https](https://github.com/sql-js/sql.js/) ://github.com/sql-js/sql.js/ 。

API 本身现在是用 javascript 编写的。

## 原始答案

我是这个最新版sqlite to javascript移植的作者：[https ://github.com/lovasoa/sql.js](https://github.com/lovasoa/sql.js)

它基于您提到的那个（[https://github.com/kripken/sql.js](https://github.com/kripken/sql.js)），但包括许多改进，包括完整的文档： http: [//lovasoa.github.io/sql.js/documentation/](http://lovasoa.github.io/sql.js/documentation/)

以下是如何使用此版本的示例`sql.js`

```
<script src='js/sql.js'></script>
<script>
    //Create the database
    var db = new SQL.Database();
    // Run a query without reading the results
    db.run("CREATE TABLE test (col1, col2);");
    // Insert two rows: (1,111) and (2,222)
    db.run("INSERT INTO test VALUES (?,?), (?,?)", [1,111,2,222]);

    // Prepare a statement
    var stmt = db.prepare("SELECT * FROM test WHERE col1 BETWEEN $start AND $end");
    stmt.getAsObject({$start:1, $end:1}); // {col1:1, col2:111}

    // Bind new values
    stmt.bind({$start:1, $end:2});
    while(stmt.step()) { //
        var row = stmt.getAsObject();
        // [...] do something with the row of result
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T15:56:17.360

我使用纯 JavaScript 中的 SQL.js 没有任何问题。只需包含以下文件：

[https://cdnjs.com/libraries/sql.js](https://cdnjs.com/libraries/sql.js)

# windows - Windows 调试符号

> ID：15415080
> 
> 赞同：0
> 
> 时间：2013-03-14T16:37:21.913
> 
> 标签：windows, windbg, symbols

我有一个非常奇怪的问题。我正在使用 Windows 7 x64 SP1。我已将它安装在物理机以及虚拟机上 - VMWare Workstation 9。我已经从 Microsoft 网站下载了 Windows_Win7SP1.7601.17514.101119-1850.AMD64FRE.Symbols，它们正在虚拟机上运行，​​但不在物理机上运行！！！有人可以告诉我什么会导致这个问题，或者我该如何诊断我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:20:50.577

正如@snoone 所说`WinDbg`，正在执行延迟符号下载，具体取决于`*.dll`我使用的内容（调试）。例如，当我列出它时，它已为我的系统正确`x kernel32.dll`下载。`kernel32.pdb`还有一件事：重新分级残疾以下载正确的符号包-我认为@Raymond Chen 是正确的-这是因为某些`Windows Update - security updates`. 谢谢。

# javascript - 添加代码到点击事件

> ID：15415081
> 
> 赞同：-6
> 
> 时间：2013-03-14T16:37:29.003
> 
> 标签：javascript, jquery

如何通过单击图像执行以下代码？

```
$('#container').animate({'opacity': 0}, 1000, function () {
$(this).text('new text');
}).animate({'opacity': 1}, 1000); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:38:08.940

```
$('yourimageselector').click(function () {
  $('#container').animate({
      'opacity': 0
  }, 1000, function () {
      $(this).text('new text');
  }).animate({
      'opacity': 1
  }, 1000);
}); 
```

# c++ - 在 C++ 中创建数组

> ID：15415089
> 
> 赞同：2
> 
> 时间：2013-03-14T16:37:47.730
> 
> 标签：c++, arrays

嗨，我是学习 C++ 的新手，我有一个简单的问题。

如果我正在创建一个包含 5 个结构的数组，我应该在构造时清除数组，如下所示，还是在我声明它时保留它。

换句话说，正在做类似的事情

```
person a[5];

for(int i = 0; i < 5; i++)
{
    a[i].name= "";
    a[i].value= 0; 
} 
```

就像做这样的事情一样，请注意，我稍后将基本上循环并设置这些值。

```
person[5]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:41:01.573

不，你没有。您需要的是一个适当的默认构造函数`person`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:41:16.640

只需为 编写一个默认构造函数`person`，假设它是 a`struct`或`class`。它将被调用以自动初始化每个数组元素。

一般来说，您可能应该更喜欢使用`std::vector<person>`，但您没有给出足够的上下文来确定。

* * *

默认构造函数看起来像：this（注意它`std::string`有自己的默认构造函数，所以我们不需要为此做任何事情）

```
struct person {
    std::string name;
    int value;

    person() : value(0) {}
}; 
```

现在这个：

```
person a[5]; 
```

无需进一步努力即可正确初始化。

* * *

如果您打算稍后“正确”初始化元素，那么使用向量可以更轻松地跳过浪费的虚拟初始化：

```
struct person {
    std::string name;
    int value;

    person() : value(0) {}
    person(std::string const &n, int v) : name(n), value(v) {}
};

std::vector<person> people;
people.reserve(5);
// just create each person with the right values in the first place:
for (int i = 0; i < 5; ++i) {
    people.push_back(person(get_name(i), get_value(i)));
} 
```

* * *

最后，如果您不介意周围有未初始化的内存，那么您的第一个版本（没有构造函数和循环）就可以了。但是，请注意，忘记哪些元素/成员是有效的，哪些是垃圾，是错误的肥沃来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T16:41:11.397

有什么理由不能使用[矢量](http://www.cplusplus.com/reference/vector/vector/)吗？这是他们的 C++ 方式，这样会更容易并且不太可能出现错误。这是一个例子：

```
 #include <vector>

 std::vector<person> a ;

 a.push_back( person(...) ) ; 
```

此外，如前所述，如果您需要使用数组，则具有默认构造函数以`person`确保您以后不需要初始化。例如：

```
class person
{
   public:
     person() : value(0) {...} // default constructor
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T16:41:21.970

如上所述，人[5]是第6位

在 C++ 中不要使用数组，而是使用向量

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T16:44:47.673

只有具有静态存储持续时间的 POD 类型在创建时才进行零初始化。但是由于使用未初始化的变量会产生**未定义的行为**，因此显式初始化变量被认为是一种好习惯，即使它可能是多余的。

但与其在循环中初始化它，不如定义一个默认构造函数，它会在`person`构造实例时初始化实例的数据成员：

```
struct person
{
    person() : value(0) { }

    std::string name;
    int value;
} 
```

还要注意，使用 STL 容器比使用 C 样式数组`std::vector`要好得多：)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T16:41:40.897

在声明数组的第一行，默认`person`构造函数将被调用 5 次（数组的每个元素一次）。如果您的构造函数将and元素`person`初始化为合理的值，则不需要循环。`name``value`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T16:41:53.210

不，它们不一样。

在第一个示例中：

```
person a[5]; 
```

您正在声明一个长度为 5 的数组，类型为 person。

然而，这：

```
person[5] 
```

这是无效的 - 没有变量名，没有要分配的内容，也没有您以后可以循环的内容。

# networking - Cisco ip sla，使其更具弹性

> ID：15415090
> 
> 赞同：0
> 
> 时间：2013-03-14T16:37:48.910
> 
> 标签：networking, ip, cisco

我最近设置了这个配置： http: [//pastebin.com/9SWpqQnz](http://pastebin.com/9SWpqQnz)

它正在实现在主光纤以太网线路出现故障时将路由故障转移到备用 ADSL 线路的目标。

但是，它每隔几个小时左右就会在短时间内进行故障转移。

我假设它正在寻找一个错过的 ping？

谁能建议如何将其收紧并使其更可靠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:12:35.937

```
track 1 rtr 123 reachability
 delay up 60 down 20

ip sla 123
 icmp-echo 37.77.176.177 source-interface FastEthernet0/0
 timeout 2000
 frequency 10

ip sla schedule 123 life forever start-time now 
```

此外，可能值得在 Internet 上进一步 ping 一些东西，因为您的 ISP 可能会出现使您的本地环路正常运行但其网络的其余部分无法正确转发流量的问题。另一方面，如果您在互联网上连续 ping 一些您没有授权的随机内容，您可能会被阻止或速率限制，这将人为地故障转移您的默认路由。

# php - 用于提交表单并存储返回结果的简单 PHP 网络爬虫

> ID：15415093
> 
> 赞同：1
> 
> 时间：2013-03-14T16:37:58.083
> 
> 标签：php, web-crawler

对于我正在开发的系统，我需要以编程方式转到特定页面。在表单中填写一个字段（我知道输入元素的id和名称），提交并存储结果。

我见过一些不同的 Perl、python 和 java 类可以做到这一点。但是我想使用 PHP 来做到这一点，但到目前为止还没有找到任何东西。

我确实有权从我也从中获取信息的网站上执行此操作。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:42:58.420

看看大卫沃尔什的简单解释。

[http://davidwalsh.name/curl-post](http://davidwalsh.name/curl-post)

您可以轻松地将响应（在此示例中为 $result）存储在数据库或日志文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:43:32.177

通常 PHP 爬虫/爬虫使用 CURL - [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)。它允许您从运行 PHP 的服务器进行查询，并从您需要抓取的网站获取响应。它以纯格式返回响应数据并由您自行解析。您可以手动检查表单提交的内容，并通过 curl 执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:26:34.070

您也可以尝试 phpcrawl ( [http://phpcrawl.cuab.de](http://phpcrawl.cuab.de) )，似乎满足您的所有需求。（参见“addPostData()”方法）

# jquery-ui - 为什么我的 CSS3 媒体查询没有显示在移动设备上？

> ID：15415097
> 
> 赞同：0
> 
> 时间：2013-03-14T16:38:12.527
> 
> 标签：jquery-ui, css, mobile, media-queries, jquery-tabs

我有一部 iPhone 4。我知道分辨率在我的风格参数范围内。然而，我在智能手机上看到了全角布局。

我可以用一双新鲜的眼睛查看源代码并让我知道我是否遗漏了一些明显的东西吗？它显示在我的浏览器中，但不在设备上。

[http://georgiaderm.com/mobile/](http://georgiaderm.com/mobile/)

在我的 HTML 中：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

在我的 CSS 中：

```
/* ---------------------------------------------------------------------- */
/*  Media Queries
/* ---------------------------------------------------------------------- */

//* Smaller than standard 960 (devices and browsers) */
@media only screen and (max-width:1000px) {
}

/* Tablet Portrait size to standard 960 (devices and browsers) */
@media only screen and (min-width:768px) and (max-width:1000px) {
    body {padding:10px 4px; width:760px;}
}

/* All Mobile Sizes (devices and browser) */
@media only screen and (max-width:768px) {
    html {background:#fff; padding:10px;}
    body {box-shadow:none; margin:0; padding:0; width:auto;}
    body > nav {display:none;}
}

/* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
@media only screen and (min-width:480px) and (max-width:768px) {
}

/* Mobile Portrait Size to Mobile Landscape Size (devices and browsers) */
@media only screen and (max-width:480px) {
    .alpha, .omega {float:none;}
    .alpha > * {margin:10px auto;}
}

/* Mobile Portrait Size to Mobile Landscape Size (devices and browsers) */
@media only screen and (max-width:320px) {
    footer div {float:none; width:auto;}
} 
```

编辑：简化它。

当我在这里时，任何人都有在小型设备上停用 JS 选项卡的轻量级策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:15:17.073

我在我的媒体查询上专门定义了 0px，例如：

```
@media only screen and (min-width:0px) and (max-width:1000px)
{
    /* STYLES GO HERE */
} 
```

也许这会有所帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:16:19.193

好的，虽然我没有解开这个谜团，但我将移动样式移到了网站的其他部分，它们突然起作用了。我想我在 mobile.css 上的 CSS 特异性有一些奇怪的地方，但是一旦我将媒体查询移到我的 main.css 上，一切都很好。

谢谢大家的帮助。

# php - wget 未定义的偏移量

> ID：15415099
> 
> 赞同：0
> 
> 时间：2013-03-14T16:38:16.640
> 
> 标签：php

我承认我见过与我的问题类似的其他问题。但是，我仍然不知道错误意味着什么，更不用说如何修复它了。

当我通过浏览器执行 PHP 脚本时，它工作正常。不返回任何错误。但是，当它通过 wget（或 curl）作为 cron 作业运行时，我的事件处理程序报告：“未定义的偏移量：84”

```
function MLSEscapeValues($pieces){
   // escape all of the values in the array

   global $ExtraDebugInfo;  // additional argument for error handler

   $PieceCount = count($pieces);

    for($k=0;$k <= ($PieceCount-1);$k++){

        $ExtraDebugInfo .= "PieceCount = $PieceCount and k = $k and value = ".$pieces[$k]."<br>";
        $pieces[$k] = mysql_real_escape_string($pieces[$k]);

    }

    return $pieces;
} 
```

我已经验证了索引数组在每一行中都包含数据，但并非所有字段都有值（预期）。

感谢您的帮助。

编辑：

$piece 数组的样本数据

```
Pieces[0] = 2.57
Pieces[1] = 21-30 Years
Pieces[2] = Traditional
Pieces[3] = 208  
Pieces[4] = 
Pieces[5] = 0
Pieces[6] = Slab
Pieces[7] = 3
Pieces[8] = 0
Pieces[9] = 4
Pieces[10] = 
Pieces[11] = 1
Pieces[12] = City
Pieces[13] = Frame,Wood Siding
Pieces[14] = Central Electric,Heat Pump
Pieces[15] = County
Pieces[16] = Breakfast Room,Formal Dining
Pieces[17] = Directions
Pieces[18] = 2013-01-05T14:59:58.607
Pieces[19] = Ceiling Fan(s),Dishwasher,Rng/Oven- Electric,Smoke Detector
Pieces[20] = 
Pieces[21] = Sat Dish Allowed
Pieces[22] = 1
Pieces[23] = 1
Pieces[24] = Great Room
Pieces[25] = Earth Contact,Ranch
Pieces[26] = 1
Pieces[27] = 2
Pieces[28] = Attached,Front Entry
Pieces[29] = Central Electric,Heat Pump
Pieces[30] = 0
Pieces[31] = 
Pieces[32] = 
Pieces[33] = No
Pieces[34] = Walk-In Closet
Pieces[35] = agentid
Pieces[36] = Name
Pieces[37] = 800-555-1212
Pieces[38] = 
Pieces[39] = id
Pieces[40] = Name
Pieces[41] = 800-555-1211
Pieces[42] = 
Pieces[43] = Excl Right To Sell
Pieces[44] = 
Pieces[45] = Acreage,Level,Treed
Pieces[46] = 
Pieces[47] = 23828274
Pieces[48] = 1794131
Pieces[49] = 
Pieces[50] = Enclosed Porch,Main Floor BR,Main Floor Master
Pieces[51] = 11
Pieces[52] = 2012-08-20T14:51:09.967
Pieces[53] = 159900
Pieces[54] = 
Pieces[55] = 
Pieces[56] = Composition
Pieces[57] = 
Pieces[58] = 
Pieces[59] = School Dist
Pieces[60] = Elementary
Pieces[61] = Middle
Pieces[62] = High School
Pieces[63] = 
Pieces[64] = 2710
Pieces[65] = State
Pieces[66] = Temporarily Off Market
Pieces[67] = FirstName
Pieces[68] = E
Pieces[69] = 7000
Pieces[70] = Circle
Pieces[71] = Oak
Pieces[72] = Single Family
Pieces[73] = 2109
Pieces[74] = Private
Pieces[75] = Main Level,Laundry Room
Pieces[76] = 
Pieces[77] = 
Pieces[78] = 
Pieces[79] = 
Pieces[80] = City/Public
Pieces[81] = Cash,Conventional,FHA,VA
Pieces[82] = 1986
Pieces[83] = 99999
Pieces[84] = 
Pieces[85] = 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:44:04.767

没有足够的信息，但您`$pieces`来自（或者您正在构建）*SQL 查询，对吗？可能是语法错误，并且您从哪个数据库函数返回的值不是您期望的数组。

第一站是`echo`任何错误，看看是否是这种情况。

[mysqli](http://php.net/manual/en/mysqli.error.php)
[PDO](http://php.net/manual/en/pdo.errorinfo.php)
[mysql](http://php.net/manual/en/function.mysql-error.php) <--不应该使用这个批次

# c# - 我需要从列表中删除项目

> ID：15415102
> 
> 赞同：1
> 
> 时间：2013-03-14T16:38:27.093
> 
> 标签：c#, asp.net, list, viewstate

我正在制作一个接受用户输入并将其填充到列表中的程序。那部分工作得很好。然而，用户需要能够编辑或删除他/她的输入。我不知道如何从列表中删除一个项目。这是填充列表的代码：

```
[Serializable]
class Recipient
{
    public string Fname { get; set; }
    public string MInit { get; set; }
    public string Lname { get; set; }
    public string Suffix { get; set; }
    public string Amount { get; set; }
    public string Message { get; set; }
    public string Custom { get; set; }
    public string CardType { get; set; }
} protected void btnToCart_Click(object sender, EventArgs e)
{
    if (ValidateInput("Card Information"))
    { SetUI("Your Shopping Cart"); }
    else
    {
        return;
    }

    Recipient recipients = new Recipient();

    List<string> FName = (List<string>)ViewState["recipientList"];
    List<string> MInit = (List<string>)ViewState["recipientList"];
    List<string> LName = (List<string>)ViewState["recipientList"];
    List<string> Suffix = (List<string>)ViewState["recipientList"];
    List<string> Amount = (List<string>)ViewState["recipientList"];
    List<string> Message = (List<string>)ViewState["recipientList"];
    List<string> Custom = (List<string>)ViewState["recipientList"];
    List<string> CardType = (List<string>)ViewState["recipientList"];

    if (FName == null && MInit == null && LName == null && Suffix == null && Amount == null &&
            Message == null && Custom == null && CardType == null)
    {
        FName = new List<string>();
        MInit = new List<string>();
        LName = new List<string>();
        Suffix = new List<string>();
        Amount = new List<string>();
        Message = new List<string>();
        Custom = new List<string>();
        CardType = new List<string>();
    }

    recipients.Fname = txtFName.Text;
    recipients.MInit = txtMInit.Text;
    recipients.Lname = txtLName.Text;
    recipients.Suffix = ddlSuffix1.SelectedItem.ToString();
    recipients.Amount = txtAmount.Text;
    recipients.Message = ddlMessage.SelectedItem.ToString();
    recipients.Custom = txtCustom.Text;
    recipients.CardType = lblImage.Text;
    FName.Add(recipients.Fname);
    MInit.Add(recipients.MInit);
    LName.Add(recipients.Lname);
    Suffix.Add(recipients.Suffix);
    Amount.Add(recipients.Amount);
    Message.Add(recipients.Message);
    Custom.Add(recipients.Custom);
    CardType.Add(recipients.CardType);
    ViewState["recipientList"] = FName;
    ViewState["recipientList"] = MInit;
    ViewState["recipientList"] = LName;
    ViewState["recipientList"] = Suffix;
    ViewState["recipientList"] = Amount;
    ViewState["recipientList"] = Message;
    ViewState["recipientList"] = Custom;
    ViewState["recipientList"] = CardType;

    if (FName.Count == 1 && MInit.Count == 1 && LName.Count == 1 && Suffix.Count == 1)
    {
        lblCartName.Text = FName[0] + " " + MInit[0] + " " + LName[0] + " " + Suffix[0];
        lnkEdit1.Visible = true;
    }

    if (Amount.Count == 1 && Message.Count == 1 && Custom.Count == 1)
    {
        lblCartAmount.Text = "$" + Amount[0] + ".00";
        if (txtCustom.Text == string.Empty)
        {
            lblCartMessage.Text = Message[0];
        }
        else
        {
            lblCartMessage.Text = Custom[0];
        }
    } 
```

是的，还有更多内容，但无论如何，一旦用户单击下一个按钮，就会向用户显示包含所有输入信息的摘要。表单上还有两个链接按钮，用户可以选择编辑或删除。我尝试了以下变化：

FName.Remove(recipients.fname); 和 FName.RemoveAt(0);例如，这些都没有奏效。所以这是我的问题，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:14:06.797

就像@rich.okelly 写的那样，你会覆盖你的 ViewState：使用这样的东西：

```
List<string> FName = (List<string>)ViewState["recipientListFName"];
List<string> MInit = (List<string>)ViewState["recipientListMInit"];
List<string> LName = (List<string>)ViewState["recipientListLName"];
List<string> Suffix = (List<string>)ViewState["recipientListSuffix"];
List<string> Amount = (List<string>)ViewState["recipientListAmount"];
List<string> Message = (List<string>)ViewState["recipientListMessage"];
List<string> Custom = (List<string>)ViewState["recipientListCustom"];
List<string> CardType = (List<string>)ViewState["recipientListCardType"]; 
```

# asp.net - 会话状态的 Azure Co-Located-Cache 最大项目大小

> ID：15415112
> 
> 赞同：2
> 
> 时间：2013-03-14T16:38:44.993
> 
> 标签：asp.net, azure, azure-caching

我不明白 Co 位于 Azure 共享缓存（预览版）中项目的最大序列化大小为 8mb。我目前正在使用 Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider 将我的会话状态存储在缓存中。

我的问题是会话（所有会话键/值）是否被序列化为一个项目，或者每个键本身不能超过 8MB？

因此，如果我有 10 个密钥，每个密钥具有 1 mb 的数据，它是否超过了 8MB 的限制？

我知道您不应该在会话中存储那些大对象（而且我 99% 的时间都不会）它只是想知道一些边缘情况在我的应用程序中会如何表现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:31:51.530

根据我的经验，你说的是对的。我使用了 Microsoft 报告查看器控件，每次运行新报告时都会使用 guid 键将大量数据放入会话中，如果我不清除这些会话键，我会看到此错误。

# java - 在节点上添加标签会忽略属于 JavaFX 中节点的 MouseListener

> ID：15415120
> 
> 赞同：1
> 
> 时间：2013-03-14T16:39:09.843
> 
> 标签：java, label, javafx-2, mouselistener

您好，我正在使用组布局上的节点并尝试为每个节点覆盖标签。此外，我`setOnMouseEntered`为每个节点实现了一些方法来做一些事情。所以，如果我在一个节点上放置一个标签并进入它的区域，那么一切正常，除非光标不在标签区域而是在节点区域。有没有办法在不添加`MouseListener`每个标签的情况下解决这个问题？这里有几个样本，对你来说会更清楚。

1）首先，我的光标位于节点区域但不在标签中（矩形，文本为“阿拉斯加”），节点的不透明度发生了变化。

![在此处输入图像描述](../Images/c3dbb12f48a9e6ab5b378215c3c7ac7e.png)

2）其次，光标在标签和节点的区域，但不透明度没有改变。 ![在此处输入图像描述](../Images/9d0f6dc6eb57824cf233c500d828d8b5.png)

如您所见，节点的不透明度即使在节点区域内也不会改变。我希望我的问题很清楚，如果您能提供帮助，我将不胜感激。不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:54:53.057

将标签的鼠标透明设置为 true - 一个可行的解决方案。

# c#-4.0 - 从类中返回一组对象

> ID：15415122
> 
> 赞同：0
> 
> 时间：2013-03-14T16:39:14.953
> 
> 标签：c#-4.0, entity-framework-4

我有一种方法可以将新项目添加到 EF 表中，然后查询该表以返回该表的子集。它需要向调用者返回一组“行”，每行都是一组列。我不知道该怎么做。我有一些代码，但我认为这是错误的。我不想返回一行，我想返回零行或多行。我不确定要使用什么 DataType... [qryCurrentTSApproval 是一个 EF 对象，指的是 SS 中的一个小视图。tblTimesheetEventlog 也是一个 EF 对象，指的是底层表]

想法？

```
 private qryCurrentTSApproval LogApprovalEvents(int TSID, int EventType)
    {
        using (CPASEntities ctx = new CPASEntities())
        {
            tblTimesheetEventLog el = new tblTimesheetEventLog();
            el.TSID = TSID;
            el.TSEventType = EventType;
            el.TSEUserName = (string)Session["strShortUserName"];
            el.TSEventDateTime = DateTime.Now;
            ctx.tblTimesheetEventLogs.AddObject(el);
            ctx.AcceptAllChanges();

            var e = (from x in ctx.qryCurrentTSApprovals
                     where x.TSID == TSID
                     select x);
            return (qryCurrentTSApproval)e;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:41:28.323

将您的方法返回类型更改为`qryCurrentTSApproval`

```
private List<qryCurrentTSApproval> LogApprovalEvents(int TSID, int EventType)
{
   using (CPASEntities ctx = new CPASEntities())
   {
     //  some other existing code here 

     var itemList = (from x in ctx.qryCurrentTSApprovals
                                     where x.TSID == TSID
                                                  select x).ToList();
     return itemList;
   }
} 
```

# javascript - 用于旋转光盘的 JQuery/JavaScript

> ID：15415125
> 
> 赞同：0
> 
> 时间：2013-03-14T16:39:29.453
> 
> 标签：javascript, jquery

我觉得自己像个彻头彻尾的白痴。我花了大约四个小时制作这个脚本：

```
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>

<a href=""><img src="http://cdn1.iconfinder.com/data/icons/humano2/16x16/emblems/emblem-cd.png" id="image"><span id="spin">Spin</span></a>

   $("#spin").rotate({
    bind: {
        mouseover: function () {
            $("#image").rotate({
                animateTo: 180
            })
        },
        mouseout: function () {
            $("#image").rotate({
                animateTo: 0
            })
        }
    }

}); 
```

[http://jsfiddle.net/8LV3p/3673/](http://jsfiddle.net/8LV3p/3673/)

现在对于我的生活，我无法弄清楚如何在我的网站上使用它。我试图研究如何做到这一点，但由于我不了解 JavaScript 或 JQuery，所以我不知道要搜索什么。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:44:46.647

好吧，您将希望将其包含在您的 .html 文件中，很可能在`<body>`标签之间（您可能希望将 jQueryRotate.js 脚本放入您的`<head>`标签中，以便首先加载它）：

```
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>

<a href=""><img src="http://cdn1.iconfinder.com/data/icons/humano2/16x16/emblems/emblem-cd.png" id="image"><span id="spin">Spin</span></a>

<script type="text/javascript">
  $("#spin").rotate({
    bind: {
     mouseover: function () {
      $("#image").rotate({
            animateTo: 180
      })
    },
    mouseout: function () {
      $("#image").rotate({
              animateTo: 0
      })
    }
  }

});
</script> 
```

HTML 文档中的`<script type="text/javascript">`标记告诉浏览器将其中的任何内容作为 javascript 执行。

这是你问的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:45:18.877

您是否可能忘记链接到 Jquery ？

```
 <script src="http://code.jquery.com/jquery-latest.js"></script> 
```

完整页面：

```
<!DOCTYPE html>
<html>
<head>
<title>My page</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
<script>
$(document).ready(function(){
$("#image").rotate({
    bind: {
        mouseover: function () {
            $(this).rotate({
                animateTo: 360
            })
        },
        mouseout: function () {
            $(this).rotate({
                animateTo: 0
            })
        }
    }

});

$("#spin").rotate({
    bind: {
        mouseover: function () {
            $("#image").rotate({
                animateTo: 360
            })
        },
        mouseout: function () {
            $("#image").rotate({
                animateTo: 0
            })
        }
    }

});
});
</script>
</head>
<body>
<style>
#image {
    margin-bottom:-5px;
}
a {
    color:red;
}
#spin {
    margin-left:10px;
}
</style>

<a href=""><img src="http://cdn1.iconfinder.com/data/icons/humano2/16x16/emblems/emblem-cd.png" id="image"><span id="spin">asdfasdfasdgt</span></a>
</body>    
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:57:53.480

**组合代码的一个工作示例是：**

```
 <!DOCTYPE html ">
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>

<style>
#image {
    margin-bottom:-5px;
}
a {
    color:red;
}
#spin {
    margin-left:10px;
}
</style>
</head>

<body>
<a href=""><img src="http://cdn1.iconfinder.com/data/icons/humano2/16x16/emblems/emblem-cd.png" id="image"><span id="spin">asdfasdfasdgt</span></a>
</body>
<script>
$(document).ready(function() {
$("#image").rotate({
    bind: {
        mouseover: function () {
            $(this).rotate({
                animateTo: 360
            })
        },
        mouseout: function () {
            $(this).rotate({
                animateTo: 0
            })
        }
    }
});

$("#spin").rotate({
    bind: {
        mouseover: function () {
            $("#image").rotate({
                animateTo: 360
            })
        },
        mouseout: function () {
            $("#image").rotate({
                animateTo: 0
            })
        }
    }

});
});
</script>
</html> 
```

***将其保存在 .html 文件中。看它旋转。:)***

在这种情况下，最好将您的 javascript 包装在文档就绪函数中：

```
$(document).ready(function() {
    //Your javascript codes here.
}); 
```

对于 jquery 插件，您总是需要在脚本中包含 jQuery。

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:52:25.277

如果将它放在标题中，您可能不会等待 DOM 初始化。把它包在里面

```
$(function() { // Short for $(document).ready(function() {
    $("#image").rotate({
        bind: {
            mouseover: function () {
                $(this).rotate({
                animateTo: 360
                })
            },
            mouseout: function () {
                $(this).rotate({
                    animateTo: 0
                })
            }
        }

    });

    $("#spin").rotate({
        bind: {
            mouseover: function () {
                $("#image").rotate({
                    animateTo: 360
                })
            },
            mouseout: function () {
                $("#image").rotate({
                   animateTo: 0
                })
            }
        }

    });
}); 
```

# c# - 休眠读取/保存会话模式，确切的事务行为是什么？

> ID：15415130
> 
> 赞同：1
> 
> 时间：2013-03-14T16:39:41.620
> 
> 标签：c#, .net, nhibernate, ado.net, transactions

全部，

这是使用 n-hibernate 会话读取/写入数据的模式：

```
using(var session = factory.OpenSession())
using(var tx = session.BeginTransaction())
{
    // all the code that uses the session goes here
    // use session to load and/or save entity
} 
```

我的问题是：

当您启动事务时，它会在连接上启动数据库事务，但我没有看到相应的提交语句，而是 tx 上的 using 语句将调用 tx.Dispose()。查看 n-hibernate 源（来自使用 SqlTransaction 对象的 AdoTransaction 类），底层事务对象从未提交，而是被处置，如下所示。**那么，我们是否假设 SqlTransaction 提供者会在处理之前调用 commit 呢？**那是 ado.net 的 SqlClient 提供程序的某个文档吗？

```
if (isDisposing)
{
    if (trans != null)
    {
        trans.Dispose();
        trans = null;
        log.Debug("IDbTransaction disposed.");
    }

    if (IsActive && session != null)
    {
        // Assume we are rolled back
        AfterTransactionCompletion(false);
    }
} 
```

显然，我遗漏了一些东西，因为我找不到在调用 tx.Dispose() 时刷新会话的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:46:15.800

那里的想法是您应该将`CommitTransaction`自己称为`using`块的一部分，因为当垃圾收集器到达`Dispose`对象时，可能会出现事务本身引发错误的情况，在这种情况下，您不希望`Dispose`提交它，你只想处理它。

# .net - 有没有使用 Lucene.Net.Linq 和数据库（EF）？

> ID：15415131
> 
> 赞同：2
> 
> 时间：2013-03-14T16:39:41.427
> 
> 标签：.net, linq-to-lucene

[文档](https://github.com/themotleyfool/Lucene.Net.Linq/wiki/README)中没有数据库使用示例

我知道 lib [LinqToLucene](http://linqtolucene.codeplex.com/)，但我想尝试 Lucene.Net.Linq。

请帮我找到任何例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T19:22:00.653

作为 Lucene.Net.Linq 的创建者，我可以说没有内置支持将 Lucene.Net.Linq 与 EF 或其他数据库提供程序集成。该库旨在允许 LINQ 与 Lucene 索引一起使用，简单明了。它不对数据如何进入索引做任何假设。那是由客户来做的。

# knockout.js - 将新的项目数组拼接到现有的 Knockout 可观察数组上会导致绑定错误

> ID：15415133
> 
> 赞同：4
> 
> 时间：2013-03-14T16:39:48.303
> 
> 标签：knockout.js

我有一个淘汰的可观察数组，在网页加载时填充了一些初始值，并且我想在用户与页面交互时通过拼接方法添加到可观察数组中。我尝试添加到数组中的新项与数组中的原始项具有完全相同的属性，但是当我尝试将新项拼接到现有数组上时，我得到一个 Knockout 绑定错误，例如：“**错误：无法解析绑定。消息：ReferenceError：未定义联系人名称；绑定值：文本：联系人名称**“。即使有问题的属性确实存在于新数组中的所有项目上，也会发生此错误。我正在尝试在 Knockout 可观察数组上进行拼接，而不是在底层数组对象上进行拼接，因为我希望绑定自动更新。`vmContacts.Contacts.splice(vmContacts.Contacts().length,0,contactData2);`.

我在这里创建了一个小提琴示例，因此您可以看到它的实际效果：http: [//jsfiddle.net/ak47/pMFwe/](http://jsfiddle.net/ak47/pMFwe/)。单击“添加联系人”按钮时，您将在浏览器控制台中看到错误。

我想避免循环遍历新对象数组来为我需要添加的每个项目执行 push()，这就是拼接应该起作用的地方，但事实并非如此。这是 Knockout 中的一个已知问题还是我做错了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:50:34.247

您尝试将 的`contactData2`作为第三个参数传递，`Array.splice`但`Array.splice`不支持将数组作为第三个参数。另请参阅[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)。

所以你需要写一些类似的东西

```
vmContacts.Contacts.splice(vmContacts.Contacts().length, 0, 
   contactData2[0], contactData2[1], contactData2[2], contactData2[3]); 
```

或者您可以使用`push`with`apply`来“加入”您的两个数组：

```
vmContacts.Contacts.push.apply(vmContacts.Contacts,contactData2); 
```

演示[JSFiddle。](http://jsfiddle.net/DdVwr/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T16:45:15.303

您不是在创建一个包含可观察对象的视图模型，您只是将 JSON 解析为一个直接的 JS 对象。使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)来做到这一点：

```
var contactData2 = ko.mapping.fromJSON(contactJSON1); 
```

同样，我认为您不能不使用 foreach 循环将每个循环添加到数组中：

```
var contactData2 = ko.mapping.fromJSON(contactJSON2);
ko.utils.arrayForEach(contactData2(), function(item) {
vmContacts.Contacts.push(item); 
```

# java - JAXB @XmlAttribute @XmlValue 真实例子

> ID：15415136
> 
> 赞同：12
> 
> 时间：2013-03-14T16:39:57.497
> 
> 标签：java, jaxb, xml-binding

我是 JAXB 的新手，在从 XML 转换为 Java 类实例时遇到了麻烦。

我有以下 XML：

```
<?xml version="1.0"?>
<response>
    <category>client</category>
    <action>Greeting</action>
    <code>1000</code>
    <msg>Your Connection with API Server is Successful</msg>
    <resData>
        <data name="svDate">2009-02-16 06:22:21</data>
    </resData>
</response> 
```

我开发了以下 Java 代码：

```
/**
 * Copyright 2013\. ABN Software. All Rights reserved.<br>
 * Author ...... Andre<br>
 * Created ..... 14.03.2013<br>
 * <br>
 */
package net.regmaster.onlinenic.model;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlRootElement;

import net.regmaster.onlinenic.enumtype.OnicEnumAction;
import net.regmaster.onlinenic.enumtype.OnicEnumCategory;
import net.regmaster.onlinenic.model.resdata.GreetingResData;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * @author annik
 * 
 */
@XmlRootElement(name = "response")
// @XmlType( propOrder = { "category", "action", "code", "message"})
public class OnicGreeting
{
    private OnicEnumCategory category;
    private OnicEnumAction   action;
    private Integer          code;
    private String           message;
    private GreetingResData  resData;
    //
    private Logger           LOG = LoggerFactory.getLogger(getClass());

    /**
     * Getter.
     * 
     * @return the category
     */
    public OnicEnumCategory getCategory() {
        return category;
    }

    /**
     * Setter.
     * 
     * @param category
     *            the category to set
     */
    public void setCategoryEnum(OnicEnumCategory category) {
        this.category = category;
    }

    @XmlElement
    public void setCategory(String category) {
        try {
            this.category = OnicEnumCategory.getEnum(category);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            LOG.error(e.getMessage());
        }
    }

    /**
     * Getter.
     * 
     * @return the action
     */
    public OnicEnumAction getAction() {
        return action;
    }

    /**
     * Setter.
     * 
     * @param action
     *            the action to set
     */
    public void setActionEnum(OnicEnumAction action) {
        this.action = action;
    }
    @XmlElement
    public void setAction(String action) {
        try {
            this.action = OnicEnumAction.getEnum(action);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            LOG.error(e.getMessage());
        }
    }

    /**
     * Getter.
     * 
     * @return the code
     */
    @XmlElement
    public Integer getCode() {
        return code;
    }

    /**
     * Setter.
     * 
     * @param code
     *            the code to set
     */
    public void setCode(Integer code) {
        this.code = code;
    }

    /**
     * Getter.
     * 
     * @return the message
     */
    @XmlElement(name = "msg")
    public String getMessage() {
        return message;
    }

    /**
     * Setter.
     * 
     * @param message
     *            the message to set
     */
    public void setMessage(String message) {
        this.message = message;
    }

    /**
     * Getter.
     * 
     * @return the resData
     */
    @XmlElementRef
    public GreetingResData getResData() {
        return resData;
    }

    /**
     * Setter.
     * 
     * @param resData
     *            the resData to set
     */
    public void setResData(GreetingResData resData) {
        this.resData = resData;
    }

    @Override
    public String toString() {
        return "category=" + category + ", action=" + action + ", code=" + code + ", msg=" + message
                + ", resData:" + resData.toString();
    }
} 
```

和

```
/**
 * Copyright 2013\. ABN Software. All Rights reserved.<br>
 * Author ...... Andre<br>
 * Created ..... 14.03.2013<br>
 * <br>
 */
package net.regmaster.onlinenic.model.resdata;

import java.util.Calendar;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.XmlValue;

/**
 * @author annik
 * 
 */
@XmlRootElement(name="resData")
public class GreetingResData extends AbstractResData
{
    String svDate;

    /**
     * Constructor.
     * 
     */
    public GreetingResData() {
        // TODO Auto-generated constructor stub
    }

    /**
     * Getter.
     * 
     * @return the svDate
     */
    @XmlAttribute
    public String getSvDate() {
        return svDate;
    }

    /**
     * Setter.
     * 
     * @param svDate
     *            the svDate to set
     */
    public void setSvDate(String svDate) {
        this.svDate = svDate;
    }
} 
```

这些代码示例运行但数据错误：

[http://i.stack.imgur.com/qCCIM.png](https://i.stack.imgur.com/qCCIM.png)

请帮我。

我也不明白，如果我会有很多不同的

```
<data ...>..</data> 
```

我可以轻松简单地做些什么？
我的意思是这种情况：

```
<resData>
<data name="crDate">2004-12-17</data>
<data name="exDate">2009-01-02</data>
<data name="password">7fe11fd9d97ee40bdf57e561427c0a6</data>
<data name="dns">dns1.onlinenic.net</data>
<data name="dns">dns2.onlinenic.net</data>
<data name="r_name">123456</data>
<data name="r_org">123456</data>
<data name="r_country">BJ</data>
<data name="r_province">mokcup</data>
<data name="r_city">123456</data>
<data name="r_street">123456</data>
<data name="r_postalcode">123456</data>
<data name="r_voice">+86.5925391800</data>
<data name="r_fax">+86.5925391800</data>
<data name="r_email">asdfasdf@sadf.com</data>
.... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T10:00:15.437

谢谢布莱斯·道恩。但是在挖掘了 10 多个主题之后，我决定我必须从相反的方式开始。

我创建了新的测试来编组我的数据（对象）。实际上，我认为我使用了 TDD（测试驱动开发）方式。因此，我用测试数据填充我的对象并应用编组（从 DATA 创建 XML）并看到我得到了。数据不正确。我还查看了其他主题（thanx this one [Java/JAXB: Unmarshall Xml to specific subclass based on an attribute](https://stackoverflow.com/questions/2992234/java-jaxb-unmarshall-xml-to-specific-subclass-based-on-an-attribute)）并更正了我的数据结构

记得我想得到

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
    <code>1000</code>
    <message>Big message</message>
    <resData>
        <data name="svDate">2013.03.14</data>
    </resData>
</response> 
```

现在我的数据是：

```
package net.regmaster.onlinenic.model.response.resdata;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlValue;

import org.eclipse.persistence.oxm.annotations.XmlCustomizer;

/**
 * @author annik
 *
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="data")
//@XmlCustomizer(ResDataCustomiser.class)
public class XmlData
{
    @XmlAttribute(name="name")
    private String name;

    @XmlValue
    private String value;

    /** Getter.
     * @return the name
     */
    public String getName() {
        return name;
    }

    /** Setter.
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /** Getter.
     * @return the value
     */
    public String getValue() {
        return value;
    }

    /** Setter.
     * @param value the value to set
     */
    public void setValue(String value) {
        this.value = value;
    }
} 
```

和 ：

```
package net.regmaster.onlinenic.model.response.resdata;

import java.util.List;

import javax.xml.bind.annotation.XmlRootElement;

/**
 * @author annik
 * 
 */
@XmlRootElement
public class ResData
{
    private List<XmlData> data;

    /**
     * Getter.
     * 
     * @return the data
     */
    public List<XmlData> getData() {
        return data;
    }

    /**
     * Setter.
     * 
     * @param data
     *            the data to set
     */
    public void setData(List<XmlData> data) {
        this.data = data;
    }
} 
```

和 ：

```
package net.regmaster.onlinenic.model.response;

import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElements;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;
import javax.xml.bind.annotation.XmlType;

import net.regmaster.onlinenic.enumtype.OnicEnumAction;
import net.regmaster.onlinenic.enumtype.OnicEnumCategory;
import net.regmaster.onlinenic.model.response.resdata.ResData;
import net.regmaster.onlinenic.model.response.resdata.XmlData;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * @author annik
 * 
 */
@XmlRootElement(name = "response")
//@XmlType( propOrder = { "category", "action", "code", "message"})
public class OnicGreetingResponse
{
    private OnicEnumCategory category;
    private OnicEnumAction   action;
    private Integer          code;
    private String           message;

//    private GreetingResData  resData;
    private ResData resData;

    //
    @XmlTransient
    private Logger           LOG = LoggerFactory.getLogger(getClass());

    /**
     * Getter.
     * 
     * @return the category
     */
    public OnicEnumCategory getCategory() {
        return category;
    }

    /**
     * Setter.
     * 
     * @param category
     *            the category to set
     */
    public void setCategoryEnum(OnicEnumCategory category) {
        this.category = category;
    }

    @XmlElement
    public void setCategory(String category) {
        try {
            this.category = OnicEnumCategory.getEnum(category);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            LOG.error(e.getMessage());
        }
    }

    /**
     * Getter.
     * 
     * @return the action
     */
    public OnicEnumAction getAction() {
        return action;
    }

    /**
     * Setter.
     * 
     * @param action
     *            the action to set
     */
    public void setActionEnum(OnicEnumAction action) {
        this.action = action;
    }
    @XmlElement
    public void setAction(String action) {
        try {
            this.action = OnicEnumAction.getEnum(action);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            LOG.error(e.getMessage());
        }
    }

    /**
     * Getter.
     * 
     * @return the code
     */
    @XmlElement
    public Integer getCode() {
        return code;
    }

    /**
     * Setter.
     * 
     * @param code
     *            the code to set
     */
    public void setCode(Integer code) {
        this.code = code;
    }

    /**
     * Getter.
     * 
     * @return the message
     */
    @XmlElements(value={@XmlElement})
    public String getMessage() {
        return message;
    }

    /**
     * Setter.
     * 
     * @param message
     *            the message to set
     */
    public void setMessage(String message) {
        this.message = message;
    }

    /** Getter.
     * @return the resData
     */
    public ResData getResData() {
        return resData;
    }

    /** Setter.
     * @param resData the resData to set
     */
    @XmlElement
    public void setResData(ResData resData) {
        this.resData = resData;
    }

    @Override
    public String toString() {
        return "category=" + category + ", action=" + action + ", code=" + code + ", msg=" + message
                + ", resData:" + resData.toString();
    }
} 
```

和 vu-alja ：我明白了！

正如您在下面看到的那样，它以另一种方式工作：http: [//i.stack.imgur.com/35nzb.png](https://i.stack.imgur.com/35nzb.png)

# bash - 从 bash 脚本采购时如何保持冗长

> ID：15415139
> 
> 赞同：3
> 
> 时间：2013-03-14T16:40:11.563
> 
> 标签：bash

我需要通过源调用检查 bash 脚本的运行，例如：

```
#!/bin/bash
some code here
source script_b.sh
more code here 
```

我跑：

```
$bash -x script_a.sh 
```

我明白了，

```
+ some echo here
+ script_b.sh
+ some more echo here 
```

但所有回声都来自 script_a.sh。script_b.sh 中的所有代码都是隐藏的，所以我无法追踪到底发生了什么。

有什么方法可以检查 script_a.sh 中 script_b.sh 的执行情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:40:58.007

您可以在父脚本中尝试“bash -x script_b.sh”。

编辑：

这对我有用。如果您使用 bash -x 运行父脚本，您将看到两者的所有内容。“set -x”将在脚本中为环境设置调试标志？我不确定，fifo对我来说仍然很神奇。

```
echo "start of script"
set -x
mkfifo fifo
cat /dev/null < fifo | fifo > source .bash_profile
rm fifo
echo "end of script" 
```

# c - 在 C 中改变值的参数

> ID：15415143
> 
> 赞同：0
> 
> 时间：2013-03-14T16:40:31.037
> 
> 标签：c, parameters, arguments

我对提供给函数更改值的参数有疑问：

```
scene->shader->start( scene->shader->dataStart );
printf("%d\n",(int)scene->shader->dataStart); 
```

然后，在 scene->shader->start 里面，我打印出来：

```
printf("%d\n",(int) _data ); 
```

它从我调用场景->着色器->开始的位置输出内存地址，然后在所述函数内输出0。这与我通过结构内部的指针调用函数有关吗？这绝对没有意义，因为函数中的 printf() 是该函数的第一行，所以我绝对不会在任何地方将其设置为 0！非常感谢您的帮助，Erkling。

编辑：

```
void shader1_setdown(void *);

typedef struct {
    GLuint shaderProgram;
    void *dataStart;
    void *dataEnd;
    void (*start)(void *data);
    void (*end)(void *data);
} renderShader; 
```

“场景”结构中有一个 renderShader*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:46:07.010

您可能会通过使用以下划线开头的标识符来入侵实现命名空间。根据 C 语言标准，这可能导致**未定义的行为。**特别是`_begin`, `_end`, `_data`, `_bss`,`_text`被一些实现用来寻址某些内存段。

将您的标识符更改为不以下划线开头。

另一种可能性：您不能将 %d 作为 int 的地址打印出来。特别是如果您的指针类型比您的`int`. 这可以解释为什么您看到`int`. 假设指针是 64 位大端，整数是 32 位。您会看到指针的前 32 位，可能全为零，被解释为 int。

printf 地址的标准正确方法是（非 void-ptrs**需要强制转换）：**

```
printf ("%p\n", (void *)ptr); 
```

# xslt - xslt 多个分组格式化表格中的数据有些列是空白的

> ID：15415146
> 
> 赞同：0
> 
> 时间：2013-03-14T16:40:33.587
> 
> 标签：xslt, grouping, xslt-grouping, formatting

使用 XSLT 1.0，如何更改以下内容：

```
<root>
  <element id="1" Team="Rangers" Season="2011" Points="12" />
  <element id="2" Team="Rangers" Season="2012" Points="5" />
  <element id="3" Team="Rangers" Season="2012" Points="4" />
  <element id="4" Team="Rangers" Season="2013" Points="3" />
  <element id="5" Team="Astros" Season="2011" Points="12" />
  <element id="6" Team="Astros" Season="2013" Points="2" />
  <element id="7" Team="Astros" Season="2013" Points="1" />
  <element id="8" Team="Astros" Season="2013" Points="2" />
</root> 
```

进入：

```
<table>
    <tr><td>Team</td>
    <td>2011</td>
    <td>2012</td>
    <td>2013</td>
    <td>Total</td></tr>

    <tr><td>Rangers</td>
    <td>12</td>
    <td>9</td>
    <td>3</td>
    <td>20</td></tr>

    <tr><td>Astros</td>
    <td>12</td>
    <td>0</td>
    <td>5</td>
    <td>14</td></tr>
</table> 
```

我在这里问了一个类似的问题，但错过了一个重要的细节。 [xslt 表格中的格式数据有些列是空白](https://stackoverflow.com/questions/15395889/xslt-format-data-in-a-table-some-columns-are-blank) 的 注意子分组也有一个摘要。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:37:36.333

我不完全确定这个问题与您的上一个问题有何不同，但应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes" omit-xml-declaration="yes"/>

  <xsl:key name="kTeam" match="element/@Team" use="."/>
  <xsl:key name="kSeason" match="element/@Season" use="."/>

  <xsl:variable name="distinctSeasons"
                select="/root/element/@Season
                          [generate-id() = generate-id(key('kSeason', .)[1])]" />

  <xsl:template match="root">
    <table>
      <tbody>
        <tr>
          <td>Team</td>
          <xsl:apply-templates select="$distinctSeasons" mode="header">
            <xsl:sort select="." data-type="number" />
          </xsl:apply-templates>
          <td>Total</td>
        </tr>

        <xsl:apply-templates 
            select="element/@Team[generate-id() = 
                                  generate-id(key('kTeam', .)[1])]" />
      </tbody>
    </table>
  </xsl:template>

  <xsl:template match="@Team">
    <xsl:variable name="thisTeamRows" select="key('kTeam', .)/.." />

    <tr>
      <td>
        <xsl:value-of select="." />
      </td>
      <xsl:apply-templates select="$distinctSeasons" mode="total">
        <xsl:sort select="." data-type="number" />
        <xsl:with-param name="teamRows" select="$thisTeamRows" />
      </xsl:apply-templates>
      <td>
        <xsl:value-of select="sum($thisTeamRows/@Points)" />
      </td>
    </tr>
  </xsl:template>

  <xsl:template match="@Season" mode="header">
    <td>
      <xsl:value-of select="." />
    </td>
  </xsl:template>

  <xsl:template match="@Season" mode="total">
    <xsl:param name="teamRows" />
    <td>
      <xsl:value-of select="sum($teamRows[@Season = current()]/@Points)"/>
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<table>
  <tbody>
    <tr>
      <td>Team</td>
      <td>2011</td>
      <td>2012</td>
      <td>2013</td>
      <td>Total</td>
    </tr>
    <tr>
      <td>Rangers</td>
      <td>12</td>
      <td>9</td>
      <td>3</td>
      <td>24</td>
    </tr>
    <tr>
      <td>Astros</td>
      <td>12</td>
      <td>0</td>
      <td>5</td>
      <td>17</td>
    </tr>
  </tbody>
</table> 
```

# c++ - Boost 进程间 message_queue 具有非 const get_num_msg()。为什么？

> ID：15415148
> 
> 赞同：0
> 
> 时间：2013-03-14T16:40:34.903
> 
> 标签：c++, message-queue, boost-interprocess

在 boost 1.53 中，message_queue_t 有这个成员函数：

```
size_type get_num_msg(); 
```

这将返回当前存储的消息数。从不扔。我看不出这不能是 const 的任何理由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:49:33.863

原来这是一个错误，并且已在 boost 修订版 #83470 中修复。

# java - Git 存储库分支可以是其他 Git 存储库中的子文件夹吗？

> ID：15415149
> 
> 赞同：2
> 
> 时间：2013-03-14T16:40:38.743
> 
> 标签：java, spring, git, spring-mvc, github

Git 存储库分支可以是其他 Git 存储库中的子文件夹吗？

我的意思是，如果我在一个名为“webdesign”的 git 存储库中工作，并且它有一个名为“JSP”的分支，我能否以某种方式在我的“project-a”存储库中映射一个文件夹以添加分支。

我想这样做，以便我的网页设计师可以在他的 Git 存储库中工作，并且在我编写项目时使用他的 JSP 页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:17:06.293

对于你想要的`git submodules`- [http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

基本上，您的设计师可以在他们自己的存储库中工作，并且该存储库作为子模块（将在您想要的子文件夹中）添加到主存储库。

# actionscript-3 - 暂停时缓冲 netStream.pause() 动作脚本

> ID：15415150
> 
> 赞同：2
> 
> 时间：2013-03-14T16:40:42.090
> 
> 标签：actionscript-3, video, actionscript, flash-builder

我有一个视频播放器，我想实现一个暂停按钮。我希望视频暂停、缓冲，然后从用户按下暂停时重新开始。

[我在这里（ http://livedocs.adobe.com/flashmediaserver/3.0/hpdocs/help.html?content=00000184.html](http://livedocs.adobe.com/flashmediaserver/3.0/hpdocs/help.html?content=00000184.html) ）发红，我只需要调用 netStream.pause() 来暂停视频，然后调用 netStream。 pause() 再次恢复它而不刷新缓冲区。

我试过了：

```
private function stopPlaying():void {
    netStream.pause();
}

<mx:Image left="10" bottom="10" id="img_Live" source="@Embed(source='Assets/live.png')" visible="false" click="stopPlaying()" buttonMode="true"/>
<mx:Image left="400" bottom="20" id="plus" source="@Embed(source='Assets/plus.png')" click="stopPlaying()" buttonMode="true"/> 
```

当我单击第一个按钮时，视频会暂停。但是当我点击第二个按钮时，视频不会重新开始。

关于我如何做到这一点的任何想法？

谢谢你。

编辑：

我有一个现场录音机和一个现场播放器。一个人正在为几个人录制和广播。我希望这些人能够暂停直播，缓冲它，以便他们可以暂停直播，并在暂停直播的同时恢复直播。

所以我的问题是如何在流暂停时暂停直播并缓冲它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:25:48.693

您链接到的文档适用于 Actionscript 2。在 Actionscript 3 中，[pause()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#pause%28%29)方法仅暂停播放。您可以调用[resume()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#resume%28%29)方法来恢复播放。

或者，您可以使用[togglePause()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#togglePause%28%29)方法。第一次调用它会暂停，第二次会恢复。

# java - 字符串操作 Java 搜索子字符串序列

> ID：15415157
> 
> 赞同：0
> 
> 时间：2013-03-14T16:40:53.707
> 
> 标签：java, string, collections

我们有一个字符串声明如下： String strString="This is a test statement to find a sub sequence of string";

String 类中似乎没有搜索子序列的方法，例如： Given String strString2="test ststement to find";

这里strString2是strString的一个子序列，有没有不用字符比较的方法找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:42:16.350

相信你正在寻找[`String#indexOf(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)。如果找到它，这也会为您提供字符串中的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:42:39.117

[String.contains(CharSequence s)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

> 当且仅当此字符串包含指定的 char 值序列时才返回 true。

你可以做这样的事情。

```
String strString="This is a test statement to find a sub sequence of string";
strString2="test ststement to find";
if(strString.contains(strString2)){
    //Do something. 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T16:48:14.827

在 strString 中检查 strString2 是否存在的条件是：

```
strString.indexOf(strString2) >= 0 
```

或者

```
strString.contains(strString2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:42:31.137

你可以试试这个：

```
string1.contains(string2);` 
```

请注意，它会抛出一个`NullPointerException`if `string2`is `null`。在尝试比较之前，您必须确保`string2`不为空；其他情况应按您的预期处理。如果您想忽略大小写，也可以将`toLowerCase()`方法与方法一起使用。`contains()`

```
string1.toLowerCase().contains(string2.toLowerCase()) 
```

同样对于旧版本，您可以使用`indexOf()`方法。如果`string2`不在`string1`，`indexOf`就给你`-1`。在这里，您还必须事先确保两个字符串都不`null`是为了避免`NullPointerException`.

# c++ - 只读内存映射寄存器在 C 中用 `volatile const` 定义，但在 C++ 中只有 `volatile`

> ID：15415158
> 
> 赞同：6
> 
> 时间：2013-03-14T16:40:59.653
> 
> 标签：c++, c, embedded, cmsis

在使用 Atmel SAM3X8E 处理嵌入式系统项目时，我注意到一些 CMSIS 头文件中有以下代码。

```
#ifndef __cplusplus
typedef volatile const uint32_t RoReg; /**< Read only 32-bit register (volatile const unsigned int) */
#else
typedef volatile       uint32_t RoReg; /**< Read only 32-bit register (volatile const unsigned int) */
#endif 
```

为什么 C++ 的 typedef 不包括`const`？我在某处看到提到 C++ 不在运行时内存中存储整数 const 变量，如果为真则意味着`const`由于微控制器寄存器的内存映射方式需要删除，但我似乎找不到任何其他说明C++ 做到了（尽管我的搜索确实很简短）。对 C++ 没有太多经验，我还认为可能是 C++ 不允许`const`结构成员，因为这些类型定义主要用于结构类型定义中用于寄存器集合，但似乎也并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:57:58.467

如果您使用 const 声明，C++ 标准将强制您初始化变量的内容。在微控制器寄存器的情况下，您不想这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T00:00:53.773

因为没有`RoReg`对象被实例化，所以没有充分的理由`const`在 typedef 中省略限定符。

每次使用`RoReg`都在定义指向类型的指针的宏中...

```
#define REG_WDT_SR (*(RoReg*)0x400E1A58U) /**< \brief (WDT) Status Register */ 
```

...或`struct`使用类似宏访问的声明。

```
typedef struct {
  WoReg WDT_CR; /**< \brief (Wdt Offset: 0x00) Control Register */
  RwReg WDT_MR; /**< \brief (Wdt Offset: 0x04) Mode Register */
  RoReg WDT_SR; /**< \brief (Wdt Offset: 0x08) Status Register */
} Wdt;

#define WDT        ((Wdt    *)0x400E1A50U) /**< \brief (WDT) Base Address */ 
```

即使使用`const`限定符，代码在 C 和 C++ 中的行为也应该相同。

也许作者误解了标准。为了保证 C++ 结构具有与 C 中相同的布局，它要求类“对所有非静态数据成员具有相同的访问控制（第 11 条）”。作者可能弄错了`const`和`volatile`为访问控制说明符。如果是，那么您会希望所有结构成员都具有相同的 cv 限定符，以确保 C 和 C++（以及硬件）布局之间的兼容性。但它是`public`, `protected`, and`private`定义访问控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T19:44:29.790

正如@fanl 所提到的，`const`确实改变了 C++ 中全局变量的默认链接，并且确实阻止了在没有初始化的情况下定义变量。

但是有比删除更好的方法来获得外部链接`const`。Chris 链接的头文件中保留数组的使用也很脆弱。我会说这段代码有很大的改进空间——不要模仿它。

此外，这些变量没有被定义（这将导致编译器和链接器选择一个地址），它们总是通过指针访问，地址根据内存映射固定。

对于纯粹供 C++ 使用的头文件，我就是这样做的（内存映射匹配 TI Stellaris 芯片）。

看起来很复杂，但优化编译器将其减少到每次访问一条指令。并且地址偏移被编码，不依赖于结构内字段的顺序和填充，因此它不那么脆弱并且更容易根据数据表进行验证。

```
template<uintptr_t extent>
struct memory_mapped_peripheral
{
    char data[extent];
    volatile       uint32_t* offset( uintptr_t off )       { return reinterpret_cast<volatile       uint32_t*>(data+off); }
    volatile const uint32_t* offset( uintptr_t off ) const { return reinterpret_cast<volatile const uint32_t*>(data+off); }
};

struct LM3S_SYSTICK : private memory_mapped_peripheral<0x1000>
{
    volatile       uint32_t& CTRL   (void)             { return offset(0x010)[0]; }
    volatile       uint32_t& RELOAD (void)             { return offset(0x014)[0]; }
    volatile       uint32_t& CURRENT(void)             { return offset(0x018)[0]; }
}* const SYSTICK = reinterpret_cast<LM3S_SYSTICK*>(0xE000E000);

struct LM3S_NVIC : private memory_mapped_peripheral<0x1000>
{
    volatile       uint32_t& EN    (uintptr_t i)       { return offset(0x100)[i]; }
    volatile       uint32_t& DIS   (uintptr_t i)       { return offset(0x180)[i]; }
    volatile       uint32_t& PEND  (uintptr_t i)       { return offset(0x200)[i]; }
    volatile       uint32_t& UNPEND(uintptr_t i)       { return offset(0x280)[i]; }
    volatile const uint32_t& ACTIVE(uintptr_t i) const { return offset(0x300)[i]; }
    volatile       uint32_t& PRI   (uintptr_t i)       { return offset(0x400)[i]; }
    volatile       uint32_t& SWTRIG(void)              { return offset(0xF00)[0]; }
}* const NVIC = reinterpret_cast<LM3S_NVIC*>(0xE000E000); 
```

# c++ - 在 C 宏中捕获名称

> ID：15415166
> 
> 赞同：2
> 
> 时间：2013-03-14T16:41:20.873
> 
> 标签：c++, c, macros

下面的迭代器宏给了我（不能改变）

```
#define ITERATE(MACRO) \
    MACRO(v1) \
    MACRO(v2) \
    MACRO(v3) \
    MACRO(v4) 
```

这背后的想法是我现在可以定义自己的单参数宏并将其传递给迭代器以扩展 for `v1`, `v2`, `v3`, `v4`。例如：

```
#define MYSTUFF(X) doSth(X);
ITERATE(MYSTUFF) 
```

将扩大到

```
doSth(v1); doSth(v2); doSth(v3); doSth(v4); 
```

* * *

我当前的问题是我想`ITERATE`在另一个宏中调用，该宏想将一个额外的参数传递`MYSTUFF`给`ITERATE`.

为了实现这一点，我希望我可以使用以下构造捕获额外的参数名称：

```
#define PARTIAL(T) FULL(UUU,T)
#define FULL(U,V) doSth(U,V)
#define START(UUU) ITERATE(PARTIAL)
START(bla) 
```

我希望何时`ITERATE(PARTIAL)`扩展到：

```
FULL(UUU,v1) FULL(UUU,v2) FULL(UUU,v3) FULL(UUU,v4) 
```

我实际上将捕获 的`UUU`参数，`START`并将其替换为`bla`. 不幸的是，情况并非如此（至少在 gcc 中）。

*   你知道这样的名字捕获是否可以不同的方式实现？
*   或者您可能有不同的想法如何解决将额外参数传递到的问题`MACRO`？
*   我可能被允许更改`ITERATOR`定义本身，但前提是它不会破坏任何已经使用它的现有代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:57:06.517

你不能这样做。您的`START()`宏基本上采用一个参数，然后将其丢弃。

您可以做的是定义`UUU`您需要它的位置，例如。

```
#define PARTIAL(T) FULL(UUU,T)
#define FULL(U,V) doSth(U,V)
#define START() ITERATE(PARTIAL)

// ...

#define UUU blah

START()

#undef UUU 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:37:02.073

您的问题简化后如下所示：

```
#define FOO UUU
#define START(UUU) FOO
START(5) 
```

这是发生的事情：

*   宏`START`在行中遇到`START(5)`
    *   START 是一个类似函数的宏，因此使用参数`UUU`=5) 进行扩展：
        *   **第 1 阶段（参数扩展）：**宏参数被宏扩展
            什么都没有发生，`5`不是宏。
            身体：`FOO`
        *   **第 2 阶段（[参数预扫描](http://gcc.gnu.org/onlinedocs/cpp/Argument-Prescan.html#Argument-Prescan)）：**宏参数被替换到宏体中。
            什么都没有发生，`UUU`不在体内。
            身体：`FOO`
        *   **第 3 阶段（扩展）：**主体被宏扩展，再次
            `FOO`扩展为`UUU`，这不是宏。
            身体：`UUU`

在参数预扫描发生之前，我想不出任何巧妙的方法来`FOO`在体内扩展。我认为不可能直接做你想做的事。

使用@ **Hasturkun**的解决方法并制作`UUU`一个宏，而不是一个参数。

# java - 带有可选查询字符串的 Spring REST-ful uri

> ID：15415167
> 
> 赞同：4
> 
> 时间：2013-03-14T16:41:21.167
> 
> 标签：java, spring, rest

触发默认控制器获取所有汽车的正常 uri 只是“/cars”

我希望能够使用 uri 搜索汽车，例如：“/cars?model=xyz”，它将返回匹配汽车的列表。所有请求参数都应该是可选的。

问题是，即使使用查询字符串，默认控制器也会触发，我总是得到“所有汽车：......”

有没有办法在没有单独的搜索 uri（如“/cars/search?..”）的情况下使用 Spring 来做到这一点？

代码：

```
@Controller
@RequestMapping("/cars")
public class CarController {
@Autowired
private CarDao carDao;

@RequestMapping(method = RequestMethod.GET, value = "?")
public final @ResponseBody String find(
        @RequestParam(value = "reg", required = false) String reg,
        @RequestParam(value = "model", required = false) String model
        )
{
    Car searchForCar = new Car();
    searchForCar.setModel(model);
    searchForCar.setReg(reg);
    return "found: " + carDao.findCar(searchForCar).toString();
}

@RequestMapping(method = RequestMethod.GET)
public final @ResponseBody String getAll() {
    return "all cars: " + carDao.getAllCars().toString();
} 
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T16:46:54.360

您可以使用

```
@RequestMapping(method = RequestMethod.GET, params = {/* string array of params required */})
public final @ResponseBody String find(@RequestParam(value = "reg") String reg, @RequestParam(value = "model") String model)
    // logic
} 
```

即，`@RequestMapping`注解有一个名为`params`. 如果您指定的**所有**参数都包含在您的请求中（并且所有其他`RequestMapping`要求都匹配），那么将调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:56:26.307

试试这个的变体：

```
 @Controller
    @RequestMapping("/cars")
    public clas CarController
    {
        @RequestMapping(method = RequestMethod.get)
        public final @ResponseBody String carsHandler(
            final WebRequest webRequest)
        {
            String parameter = webRequest.getParameter("blammy");

            if (parameter == null)
            {
                return getAll();
            }
            else
            {
                return findCar(webRequest);
            }
        }
    } 
```

# macos - 将字符串存储在列表中时Applescript返回错误

> ID：15415171
> 
> 赞同：1
> 
> 时间：2013-03-14T16:41:28.523
> 
> 标签：macos, applescript

我编写了一个简单的脚本，它找出机器上正在运行的活动进程的数量，并将每个进程的路径作为字符串输出到数组中。

这是我的代码（它真的没有合法的功能，我只是想尝试不同的东西来看看applescript是如何工作的）：

```
tell application "System Events"
  set activeProcess to number of process
  set paths to {0}
  repeat with n from 1 to activeProcess
    set last item of list paths to (file of process n as string)
  end repeat
end tell 
```

这是我点击运行时AppleScript编辑器返回的错误：

```
System Events got an error: Can’t set list {0} to "Macintosh HD:System:Library:CoreServices:loginwindow.app:". 
```

我没有错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:50:16.930

尝试：

```
tell application "System Events" to set myprocess to files of processes 
```

或者

```
set AppleScript's text item delimiters to linefeed
tell application "System Events" to set myprocess to paragraphs of (files of processes as text)
set AppleScript's text item delimiters to {""} 
```

您可以从这样的重复循环中构建一个列表：

```
set paths to {}
tell application "System Events"
    set activeProcess to processes
    repeat with n from 1 to count activeProcess
        set end of paths to (file of item n of activeProcess as text)
    end repeat
end tell 
```

或像这样：

```
set paths to {}
tell application "System Events"
    set activeProcess to processes
    repeat with aProcess in activeProcess
        set end of paths to (file of aProcess as text)
    end repeat
end tell 
```

# javascript - 又一个“未捕获的类型错误：无法调用未定义的方法“应用”

> ID：15415172
> 
> 赞同：10
> 
> 时间：2013-03-14T16:41:30.700
> 
> 标签：javascript, debugging, function, typeerror

我的机会很小，但我已经通过谷歌尝试了几个解决方案，但似乎没有任何东西可以解决“未捕获的类型错误：无法调用未定义的方法“应用”，匿名函数：

![在此处输入图像描述](../Images/623f4629ae8a2a14736b2af58c558161.png)

如果在没有其他 JS 的情况下单独使用它，但是当与其他脚本在同一页面上组合时，我会收到错误消息。

它引用的代码行如下，第 32 行是罪魁祸首。第 32 行是这一行 - `if ( resizeTimeout ) { clearTimeout( resizeTimeout ); }`：

```
var $event = $.event, resizeTimeout;

    $event.special.smartresize  = {
        setup: function() {
            $(this).bind( "resize", $event.special.smartresize.handler );
        },
        teardown: function() {
            $(this).unbind( "resize", $event.special.smartresize.handler );
        },
        handler: function( event, execAsap ) {
            // Save the context
            var context = this,
                args    = arguments;

            // set correct event type
            event.type = "smartresize";

            if ( resizeTimeout ) { clearTimeout( resizeTimeout ); }
            resizeTimeout = setTimeout(function() {
                jQuery.event.handle.apply( context, args );
            }, execAsap === "execAsap"? 0 : 100 );
        }
    }; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T14:01:28.563

我通过查看代码设法弄清楚了这一点，有一种称为“模拟”的方法，您可以使用它来“搭载捐赠者事件以模拟不同的事件。”，“伪造 originalEvent 以避免捐赠者的 stopPropagation，但如果模拟事件防止违约，然后我们对捐赠者做同样的事情。” 这让我觉得“在 Brandon Aaron 的教程中设置事件类型”的目的

代替：

```
event.type = "myType";
jQuery.event.handle.apply(this, arguments); 
```

利用：

```
jQuery.event.simulate('myType', this, event); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T16:46:02.080

猜测您正在加载更新版本的 jQuery。看起来好像`jQuery 1.9`和后来没有这个`jQuery.event.handle`属性。

据我所知，这从来都不是受支持的属性。

[http://jsfiddle.net/xPJN4/](http://jsfiddle.net/xPJN4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T22:38:15.967

当我不小心加载了最新版本`jquery`的头部，然后加载了旧版本的`jquery`之后，我遇到了这个错误。旧版本没有我需要的新版本的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-20T01:19:05.430

当我链接到 jQuery Migrate 时，我的错误得到了修复。

*JQMIGRATE：已安装 Migrate，版本 1.4.1*

没有更多的错误。对我来说，isotope.js 导致了这个问题。希望它可以帮助随机的人。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T15:17:02.200

我在使用旧版本的 jQuery 和 masonry.min.js 时遇到了这个错误——我不再有未缩小的代码！

更换：

```
b.event.handle.apply(d,f) 
```

和

```
b.event.simulate('smartresize', d, f) 
```

对问题进行了排序，脚本现在运行良好，感谢@karl-forshaw 的修复......我会在重播中发表评论，但缺乏这样做的声誉！

# c# - 计划每小时运行一个宏

> ID：15415175
> 
> 赞同：5
> 
> 时间：2013-03-14T16:41:38.593
> 
> 标签：c#, macros, umbraco

无论如何安排一个宏在 Umbraco 或一个 .ascx 文件中每小时运行一次？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T17:17:00.790

在 Umbraco 中运行计划任务有两种方式：

1.  将任务添加到`umbracoSettings.config`. 请参阅Umbraco Wiki 中的[计划任务](http://our.umbraco.org/wiki/install-and-setup/scheduled-tasks)。
2.  使用[TaskScheduler](http://our.umbraco.org/projects/developer-tools/taskscheduler)包。

TaskScheduler 提供了一个很好的界面来在 Umbraco 后端设置任务。您可以安排任务在特定时间运行，并且可以设置重复周期。它还可以在执行任务时发送电子邮件。

添加任务`umbracoSettings.config`可能更简单。下面是一个例子：

```
<scheduledTasks>
    <!-- add tasks that should be called with an interval (seconds) -->
    <task log="true" alias="test60" interval="60" url="http://localhost/umbraco/test.aspx"/>
</scheduledTasks> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:55:37.510

如果您想从代码中运行宏、ascx（或 cshtml），您可以使用 macroservice 包。安装后，您可以直接从代码运行宏，使用 Web 服务、WCF、来自 javascript 的 setInterval/setTimeout 等。与 @DouglasLudlow 的 (+1) 设置计划任务的建议很好地配合。

> Umbraco 宏服务将标准的 Umbraco 宏直接公开到 Web 以在脚本中使用或使用已经熟悉的宏提供对数据的直接数据访问。
> 
> 与 Umbraco Base 类似（并且大量借用），Macro Service 可以更轻松地访问您的 umbraco 数据，以便在您的 javascript 和其他应用程序中使用。
> 
> 有关更多详细信息，请参阅[http://our.umbraco.org/projects/backoffice-extensions/macroservice](http://our.umbraco.org/projects/backoffice-extensions/macroservice)上的项目页面 。

# android - CKEditor 在 Android 上没有键盘

> ID：15415182
> 
> 赞同：2
> 
> 时间：2013-03-14T16:41:57.433
> 
> 标签：android, keyboard, ckeditor

当我在 Android 手机上测试我的网站时，我注意到我无法在 CKEditor 中编辑内容，键盘没有出现。

我在 iPad、Android 平板电脑上有睾丸，一切正常，但在手机上不行。顺便说一句，我也测试过标准浏览器和 Dolphin，两者都有问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:48:45.140

您可以通过按住菜单按钮一段时间来显示键盘。

# objective-c - 防止从框架实例化只读对象

> ID：15415184
> 
> 赞同：3
> 
> 时间：2013-03-14T16:41:59.710
> 
> 标签：objective-c, frameworks, constructor, instantiation, data-protection

我目前正在为 iOS 创建一个客观的 c 框架，以帮助促进 API 和开发人员之间的交互。作为其中的一部分，我返回了各种只读对象数组，开发人员可以使用这些数组向用户显示信息。但是，我想确保向用户显示的对象仅来自框架，并且不能由使用框架的开发人员实例化。

我当前的实现使用了一个自定义~~构造函数~~初始化程序，它从 api 获取 JSON 来实例化自己。我知道访问自定义~~构造函数~~初始化程序的唯一方法是将其定义放在头文件中，这样不仅我自己可以访问它，开发人员也可以访问它。我知道当用户尝试使用默认~~构造函数~~初始化程序时，我可能会引发不一致异常`-(id)init;`，但我无法阻止他们创建自己的 JSON 字符串并调用我的自定义~~构造函数~~初始化程序。

我是否采取了正确的方法来保护我的私有框架免受使用它的开发人员的干扰？我还能如何解决这个问题以确保这些对象中数据的有效性？

资料来源：[是否可以在 Objective-C 中将 -init 方法设为私有？](https://stackoverflow.com/questions/195078/is-it-possible-to-make-the-init-method-private-in-objective-c)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:53:35.410

您是正确的，由于其动态调度系统，Objective-C 本质上不允许真正的私有方法。但是，假设您的问题不是关于真正的安全性，而只是让您难以以不正确的方式使用该框架，那么您有几个选择。

一个简单、常见的解决方案是将您不想公开公开的方法的声明放在单独的头文件中的类别中。您仍然可以将这些方法的实现放在类的主实现文件中。所以，一个像这样的标题：

```
// MyClass+Private.h
@interface MyClass (Private)
- (void)aPrivateMethod;
@end 
```

然后，在您需要访问这些私有方法的您自己的源文件中，您只需导入 MyClass+Private.h。

对于框架，您可以将每个头文件设置为 Public 或 Private。私有标头不会被复制到框架包中，因此对框架的用户不可见。您可以通过在 Xcode 中打开 Utilities 窗格（右侧滑出窗格），选择有问题的标题，然后在“Target Membership”下相关行的第二列中选择 Private。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:02:19.620

基于 Andrew Madsen 的解决方案，我最终使用的是为每个对象设置两个不同的头文件；一种是公开的，一种是私人的。公共标头仅包含开发人员访问只读属性所需的信息。然后我的私有标头导入公共标头，还包含一个类别，其中包含我需要在 SDK 中使用的所有方法调用（包括初始化程序）。然后我将私有标头导入到我的实现中。结构如下所示：

公共头文件 MyObject.h

```
#import <Foundation/Foundation.h>

@interface MyObject : NSObject
    @property (nonatomic, retain, readonly) NSString *myValue;
@end 
```

私有头文件 MyObject+Private.h

```
#import "MyObject.h"
@interface MyObject (Private)
    +(MyObject*)MyObjectFromJSONString:(NSString*)JSONString;
    -(id)initWithJSON:JSONString:(NSString*)JSONString
@end 
```

私有实现 MyObject.m

```
#import "MyObject+Private.h"
@implementation MyObject

@synthesize myValue = _myValue; //_myValue allows local access to readonly variable

- (id)init {
    @throw [NSException exceptionWithName:NSInternalInconsistencyException reason:@"-init is not a valid initializer for the class MyObject" userInfo:nil];
    return nil;
}

+(MyObject*)MyObjectFromJSONString:(NSString*)JSONString;
{
    return [[MyObject alloc]initWithJSON:JSONString];
}

-(id)initWithJSON:JSONString:(NSString*)JSONString
{
    self = [super init];
    if(self){
        //parse JSON
        _myValue = JSONString;
    }
    return self;
} 
```

# c# - 本地 SQL 数据库未连接

> ID：15415187
> 
> 赞同：0
> 
> 时间：2013-03-14T16:42:06.710
> 
> 标签：c#, sql, sql-server, database, local

我正在尝试为我正在处理的（初学者）项目连接到本地 SQL 数据库。我不知道如何连接到我的本地 SQL 数据库。我将数据库添加到项目中，当我测试连接时，我没有收到任何错误。每当我运行我的代码（按下按钮 2）时，我都会在 con.Open() 旁边收到类似这样的错误：

*“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者： SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）”*

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Net.Sockets;
using System.IO;
using System.Data.SqlClient;
using System.Data.SqlServerCe;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

    }

    private void button5_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void button3_Click(object sender, EventArgs e)
    {
        // ofd wordt gedeclareerd voor de "Open file dialog"
        OpenFileDialog ofd = new OpenFileDialog();

  SqlConnection cn = new SqlConnection(Properties.Settings.Default.ImageDemoConnectionString); 
```

但是我在我的设置中指出数据库是正确的。我也试过

```
Data Source = "Path\DB.sdf" 
```

但它给了我同样的错误。

如果有人可以给我一个提示？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:21:51.990

您使用了错误的连接类型。SDF 文件是 SQL 精简版数据库，需要与[SqlCeConnection 类](http://msdn.microsoft.com/en-us/library/vstudio/aa983321.aspx)连接。另请参阅[使用 SQL Server Compact (Visual Studio)](http://msdn.microsoft.com/en-us/library/vstudio/aa983341.aspx)和[SQL Server Compact 的连接字符串](http://www.connectionstrings.com/sql-server-ce)。

# python - 检索对等列表而不使用 python-libtorrent 下载种子

> ID：15415189
> 
> 赞同：5
> 
> 时间：2013-03-14T16:42:10.927
> 
> 标签：python, libtorrent

我使用带有 Python 的 libtorrent 搜索以检索对等方的 torrent IP。我尝试使用代码：

```
import libtorrent as lt
import time

ses = lt.session()
ses.listen_on(6881, 6891)
info = lt.torrent_info('test.torrent')
h = ses.add_torrent({'ti': info, 'save_path': './'})
print 'starting', h.name()
while (not h.is_seed()):
    s = h.status()
    p = h.get_peer_info()
    for i in p:
        print i.ip

    print "\n\n"

    sys.stdout.flush()

    time.sleep(1)

print h.name(), 'complete' 
```

它或多或少有效，但我有两个问题：

1.  洪流已下载。
2.  在我收到一个对等列表之前，循环执行了数十次。

你能帮助我吗？

太感谢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T04:02:03.863

没有一个规范的“对等列表”。有您当前连接的对等方。然而，“群体中的每个同伴”都有。

libtorrent 可以告诉您您连接的对等方，这意味着他们完成了 uTP 或 TCP 3 次握手。

通常需要一些时间来增加对等连接。您需要了解对等点，您需要尝试连接到它们，并且它们需要启动并且没有完整的对等点列表。这就是为什么您没有立即连接到一堆对等点的原因。

听起来您对群体中的所有同伴都感兴趣。您不太可能找到每个同行。对等点可能不会向相同的跟踪器发布消息，并通过 PEX 或 DHT 找到彼此。许多同行无法连接，找到他们的唯一方法是让他们找到你，他们可能不感兴趣。

现在，如果您对下载 torrent 不感兴趣，还不清楚为什么需要对等 IP。鉴于您不是，为什么要连接到他们呢？

您可以简单地调用 get_full_peer_list()，但是，这在 python 绑定中不可用。您也可以一遍又一遍地向跟踪器宣布并收集生成的 IP。

# python - Solaris 的 Python NGROUPS_MAX 保持在 16

> ID：15415191
> 
> 赞同：0
> 
> 时间：2013-03-14T16:42:14.543
> 
> 标签：python, solaris, solaris-10

我正在尝试增加 Python 允许其进程的组数量。我已将 Solaris 的 144501 补丁应用到操作系统以允许更多用户使用，运行后`getconf NGROUPS_MAX`返回`1024`.

不幸的是，Python 仍在使用 Solaris 默认`os.NGROUPS_MAX`值`16`.

我试过自己编译 Python，值仍然是`16`. 我什至尝试`1024`在源代码中对 a 进行硬编码，但之后它仍然存在`16`。

有谁知道如何让 Python 识别新的组限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:08:33.847

虽然在操作系统中更改了设置，但头文件仍然包含`16`. 在`/usr/include/limits.h`：

```
#define NGROUPS_MAX 16  /* max number of groups for a user */ 
```

将其更改为`1024`（假设您执行了补丁并且`getconf NGROUPS_MAX`是 1024），之后一切都会正确编译。

# iphone - 检测“确认您的应用内购买”的取消按钮点击 UIAlert

> ID：15415193
> 
> 赞同：7
> 
> 时间：2013-03-14T16:42:15.693
> 
> 标签：iphone, objective-c, xcode, in-app-purchase, storekit

我根据[本](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)教程实现了应用内购买。我遇到的问题是我无法检测到何时按下*“确认您的应用内购买”*警报上的取消按钮，这是 StoreKit 框架的一部分。

一些消息来源建议`-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`在按下取消时调用，但在我的情况下它永远不会运行。我的设置是导入 IAPManager:NSObject 类的 ViewController，它符合 SKProductRequestDelegate 和 SKPaymentTransactionObserver。已成功请求产品，但事务观察者从未调用`paymentQueue`。

我怎样才能让它工作，所以我可以检测到取消按钮？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T17:03:42.300

在委托方法中，如果用户取消，我会查看教程 failedtransaction 什么都不做。但你可以像这样添加它。

```
- (void)failedTransaction:(SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        // error!
          NSLog(@"Something went Wrong!");
        [self finishTransaction:transaction wasSuccessful:NO];
          NSLog(@"transaction error :%@", transaction.error.localizedDescription);
    }
    else
    {
          NSLog(@"Cancelled");
        // this is fine, the user just cancelled
        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:26:37.980

必须添加此行才能使其工作：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

感谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:45:01.243

我没有使用 StoreKit，但我猜如果用户取消，你`SKRequestDelegate`会收到消息。[`request:didFailWithError:`](http://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKRequestDelegate/Reference/Reference.html#//apple_ref/occ/intfm/SKRequestDelegate/request%3adidFailWithError%3a)

# javascript - 如何更改访问链接的背景颜色

> ID：15415199
> 
> 赞同：0
> 
> 时间：2013-03-14T16:42:28.750
> 
> 标签：javascript, css

我有以下代码：

```
<td bgcolor="#FF0000"><center>
    <? echo $rows['msisdn']; ?>
</td>
<td align="center" bgcolor="#FFFFFF">
    <a href="control_clientinfo.php?member_id=<? echo $rows['member_id']; ?>"
    class="update">Look Up</a>
</td> 
```

这为我从 mysql 中提取数据并做它需要做的事情，问题

```
<td bgcolor="#FF0000">
    <center>
    <? echo $rows['msisdn']; ?>
</td> 
```

访问链接后如何更改该背景颜色。我知道如何更改访问的链接颜色，但我想更改查看的表格颜色。

这是可能的还是我咬石头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:49:26.300

**更新的答案**

浏览器控制访问的链接状态，为了用户的安全，无法使用Javascript或CSS来确定这一点。这在过去可能有效，但不再适用于所有现代网络浏览器。-- 这样做是为了防止浏览器本身跟踪历史记录。唯一的*解决方法*是跟踪使用 Javascript 事件处理程序单击了哪些链接，如果您希望此信息在多个页面加载/刷新中保持不变，则需要设置一个 cookie。

对于当前页面，您可以使用 Javascript（或者更好的是 jQuery）来更改背景颜色。

使用 jQuery：

```
$("td a").click(function() {
    $(this).parent("td").addClass('clicked');
}); 
```

在相关说明中，我强烈建议*不要*使用`<center>`and`bgcolor`和`align`属性。这些在最近的 HTML 版本中早已被弃用。考虑使用 CSS 来满足您所有的“中心”和样式/背景颜色需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:56:10.703

恐怕与 PHP 没什么关系，更多的是 Javascript 问题。

试试 Remy Sharp 的 jQuery 插件[http://remysharp.com/2008/02/25/visited-plugin/](http://remysharp.com/2008/02/25/visited-plugin/)

此答案中有相同的代码[https://stackoverflow.com/a/1791790/932508](https://stackoverflow.com/a/1791790/932508)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T17:02:52.100

在带有锚标记的表格列中添加 onclick 功能

```
<td align="center" bgcolor="#FFFFFF" onclick="document.getElementById("demo").style.backgroundColor="RED";"> <a href="control_clientinfo.php?member_id=<? echo  $rows['member_id']; ?>" class="update">Look Up</a></td> 
```

然后将 Id 标记添加到要更改其背景颜色的其他表格列。

```
<td id="demo" bgcolor="#FF0000">
  <center>
  <? echo $rows['msisdn']; ?>
  </center>
</td> 
```

# java - listview 1 活动用于打开 listview 2 活动

> ID：15415202
> 
> 赞同：0
> 
> 时间：2013-03-14T16:42:41.540
> 
> 标签：java, android, android-intent, android-widget, android-listview

我希望 listview1 打开我的包中定义的一些活动，并且在这些活动上我重新定义了一个新的 listview2 活动。

我试图编写相同的代码。请查看代码以了解问题。

```
public class ABC extends ListActivity{

String classNames[] = {"A","B","C"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,classNames));
}

protected void onListItemClick(ListView lv, View v, int position, long id){
    super.onListItemClick(lv, v, position, id);
    String openClass = classNames[position];
    try{
        Class selected = Class.forName("com.lab.example."+openClass);
        Intent selectedIntent = new Intent(this, selected);
        startActivity(selectedIntent);

    }
    catch(ClassNotFoundException e){
        e.printStackTrace();
    }

} 
```

上面的源代码a,b,c类可以在listview中看到。但是当我点击 A 时，什么也没有发生。

我想知道 `@Override protected void onCreate(Bundle savedInstanceState) { // TODO Auto-generated method stub super.onCreate(savedInstanceState); setListAdapter(new ArrayAdapter<String> (this,android.R.layout.simple_list_item_1,classNames)); }`

我如何在上面添加自定义布局

而对于 A 类：-

```
public class A extends ListActivity{

String classNames[] = {"x1","x2","x3"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, classNames));
}

protected void onListItemClick(ListView lv, View v, int position, long id){
    super.onListItemClick(lv, v, position, id);
    String openClass = classNames[position];
    try{
        Class selected = Class.forName("com.lab.example."+openClass);
        Intent selectedIntent = new Intent(this, selected);
        startActivity(selectedIntent);

    }
    catch(ClassNotFoundException e){
        e.printStackTrace();
    }

}

on the above source code x1,x2,x3 class activites are working for A only 
```

而X1：-

```
public class X1 extends Activity {
// List view
private ListView lv;
// Listview Adapter
ArrayAdapter<String> adapter;
// Search EditText
EditText inputSearch;
// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // Listview Data
    String products[] = getResources().getStringArray(R.array.X1);
    lv = (ListView) findViewById(R.id.list_view11);
    inputSearch = (EditText) findViewById(R.id.inputSearch11);
    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list, R.id.route, products);
    lv.setAdapter(adapter);      
    inputSearch.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            X1.this.adapter.getFilter().filter(cs);
        }
        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }
        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

} 
```

}

显现：-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.lab.example"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.lab.example.MainActivitypage"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Menu"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.lab.example.Menu" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

   <activity android:name="com.lab.example.ABC" />
   <activity android:name="com.lab.example.A" />
   <activity android:name="com.lab.example.B" />
   <activity android:name="com.lab.example.C" />
   <activity android:name="com.lab.example.X1" />
   <activity android:name="com.lab.example.X2" />
   <activity android:name="com.lab.example.X3" /> 
```

日志 cat 中显示的错误：-

日志中充满了这个错误，因为我是 android 新手，所以无法理解这一点：-

```
03-14 23:16:55.970: E/PGA(3459): PgaSocketWriteAllHdipc: hd_ipc_send() failed
03-14 22:32:23.810: E/InputDispatcher(1304): channel 'b466cb20      com.lab.example/com.lab.example.ABC (server)' ~ Channel is unrecoverably broken and will be disposed! 
03-14 22:34:45.480: E/ALSALib(1293): external/alsa-lib/src/confmisc.c:136:    (snd_config_get_bool) Invalid type for nonblock 
```

我想当我单击 A->X1 开始活动时。如果我不清楚，请在下面的评论中提及。任何形式的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:21:35.323

将`classNames`数组更改`A` `ListActivity`为：

```
String classNames[] = {"X1","X2","X3"}; 
```

因为您使用 X1、X2 和 X3 类名在 AndroidManifest.xml 中声明活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:29:05.983

尝试这个：

```
Intent intent = new Intent();
intent.setClassName("com.lab.example", "com.lab.example." + openClass);
startActivity(intent); 
```

# html - 如何在 link_to erb 中包含 span

> ID：15415206
> 
> 赞同：0
> 
> 时间：2013-03-14T16:43:00.403
> 
> 标签：html, ruby-on-rails, erb

我想用 ERB 写这个 HTML：

```
<a href="/" id="logo">One<span id="red>Two</span></a> 
```

如何包括跨度？

```
<%= link_to "ONETWO", root_path, id: "logo" %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:44:33.537

只需使用此助手的[块形式](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)：

```
<%= link_to root_path, id: :logo do %>
  One<span id="red>Two</span>
<% end %> 
```

其他助手支持这种形式，例如`content_for`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:49:16.470

排队：

```
<%= link_to(raw('One<span id="red">Two</span>'), root_path, id: "logo")  %> 
```

# c# - 在 Visual Studio 2008 上访问 PPTX 的页脚文本

> ID：15415207
> 
> 赞同：1
> 
> 时间：2013-03-14T16:43:01.503
> 
> 标签：c#, powerpoint, footer

团队！

我的 Visual Studio 2008 中有一个 MS Powerpoint 加载项项目，使用 C#。我使用以下代码从 Powerpoint 演示文稿中读取页脚的文本：

```
String currentFooterText = 
Application.ActivePresentation.SlideMaster.HeadersFooters.Footer.Text; 
```

（其中 Application 类来自命名空间`Microsoft.Office.Interop.PowerPoint.Application`）

当我加载一个 ppt 文件（97-2003 演示类型）时，代码能够访问插入到幻灯片页脚属性中的文本（菜单视图>页眉和页脚...>幻灯片>页脚）。

但是，当我加载一个 pptx 文件（在 Powerpoint 2007 或 2010 中创建的演示文稿）时，代码无法访问也插入到幻灯片页脚属性中的文本（菜单插入>页眉和页脚...>幻灯片> 页脚）。Text 返回一个空白文本。

请问，有人对此有任何想法吗？这些 Powerpoint 版本之间是否存在不兼容的页脚访问？

* * *

史蒂夫！

谢谢回复！

事实上，我的代码在 Visual Studio 2008 上，用于 Powerpoint 2003 插件项目。当我打开一个 pptx 文件时，就会出现问题。

我尝试了您的建议，但使用括号而不是括号，如下所示：

字符串 s = Application.ActivePresentation.Designs[1].SlideMaster.HeadersFooters.Footer.Text；

但是问题仍然存在，对于 pptx 文件，Text 仍然返回空。它适用于ppt，就像以前一样。您是否知道在 VS 2008 上使用任何编程方式，用于 Powerpoint 2003 插件项目，以访问 pptx 文件的页脚文本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:04:06.260

> > 这些 Powerpoint 版本之间是否存在不兼容的页脚访问？

是的。在 2007/2010/2013 年，您将使用：

```
ActivePresentation.Designs(1).SlideMaster.HeadersFooters.Footer.Text 
```

（假设您想要第一张幻灯片母版的页脚；可能不止一个，实际上在 PPT 2002 及以后版本中可能有）

# java - InetSocketAddress 超时

> ID：15415211
> 
> 赞同：4
> 
> 时间：2013-03-14T16:43:10.587
> 
> 标签：java

我有以下代码：

```
socket.connect(new InetSocketAddress(serverHost, serverPort), CONNECT_TIMEOUT); 
```

问题是当 DNS 不可访问时，InetSocketAddress 需要 45 秒超时并返回异常（“主机不可访问...”）。我需要整个命令（所以更早地创建 InetSocketAddress 和连接超时。我没有找到让超时时间更早的方法`new InetSocketAddress(serverHost, serverPort)`。

可能吗？

PS我在Android上，但问题在其他平台上是一样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T05:26:50.897

没有简单的方法。您需要运行此代码

```
socket.connect(new InetSocketAddress(serverHost, serverPort), CONNECT_TIMEOUT); 
```

在一个单独的线程（i/o 线程）中并从 UI 主线程与其通信。一旦超过时间限制 - 向它发送终止信号并立即在 UI 线程中继续，不要等到它终止。根据状态，i/o 线程要么立即终止，要么最终终止。

# c - HEX码扫描处理

> ID：15415214
> 
> 赞同：0
> 
> 时间：2013-03-14T16:43:13.640
> 
> 标签：c

如何从**文件中扫描****多个 HEX 值**并将其存储到整数变量中（每行 HEX 数字都不同）。考虑整数的 4 个字节和第一行的 6050BD 和第二行的 8060EF 等等。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:47:20.777

虽然有行： `fscanf(file, "%x\n", num);`**

# windows - 在批处理编程中，一个命令可以在前一个命令完成执行之前运行吗？

> ID：15415217
> 
> 赞同：2
> 
> 时间：2013-03-14T16:43:27.720
> 
> 标签：windows, batch-file

在批处理编程中，一个命令一直等到完成，直到下一个命令运行？我的意思是例如

```
net stop wuauserv
net start wuauserv 
```

由于`net stop wuauserv`需要一段时间才能完成，是给定时间来完成还是我需要另一个命令等到它完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:02:52.990

该`NET STOP`命令会等待（或在等待时超时）服务停止或启动。您可以检查`%ERRORCODE%`命令中的 以获取有关是否存在问题或是否按预期工作的更多信息。

通常，大多数系统命令行工具在执行完毕后会返回控制权。一些专门的程序将调用其他服务或系统，并可能在执行完成之前返回控制权。您需要检查文档以了解您尝试运行的任何内容，但通常一旦它们执行的“任务”完成，进程就会退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:18:46.600

In a batch file, all commands are run sequentially, and execution waits for the command to complete.

In your example, `net stop wuauserv` would complete before `net start wuauserv` gets run.

You could confirm that by running something you know will take a long time, such as

```
ping www.google.com
ping www.stackoverflow.com 
```

and you'll see that the second ping does not start until the first completes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:34:37.103

在您的情况下，是的，第二个命令在第一个命令完成之前不会执行。

但是，GUI 应用程序将启动并返回控制批处理文件。

例如，

```
PING localhost
NOTEPAD
DIR 
```

`DIR`即使`NOTEPAD`仍在运行，该命令也会执行。

# sql - 单个 SSRS 报告中列出的多个报告是什么意思？

> ID：15415220
> 
> 赞同：4
> 
> 时间：2013-03-14T16:43:30.670
> 
> 标签：sql, reporting-services, ssrs-2008, ssrs-2008-r2

我有`SSRS`一份如下报告（图片）

我是 SSRS 的新手；这份报告是什么意思？

> 如果我需要更改此类报告的任何参数值，是否需要转到每个报告并单独更改它们的参数？

![在此处输入图像描述](../Images/3823b7441a058b2425dc027e3089f5c3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T17:09:07.623

**问题：**
**这份 SSRS 报告是什么意思？**

**答：**
投资组合仪表板 = 主报表
Portfolio_XXX = 所有 8 个都是子报表。

子报告可能与主报告链接，也可能不链接。要查找报告链接，您可以右键单击子报告（灰色），然后单击报告链接。

**问题：**
**我是否需要查看每个报告并单独更改它们的参数？**

**答：**
如果您要更改参数名称/类型和子报表链接或使用参数过滤数据，那么是的，您必须在主报表和子报表中进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T22:43:13.193

如果您的所有报表都使用相同的参数，那么您只需要对主报表进行更改，但如果子报表有自己的参数，那么您应该更改主报表和子报表参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T12:54:16.413

如果所有报表都需要相同的参数，您可以使用子报表。如果不是最好是走另一条路。对于最近的项目，我只需要使用一个子报表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T05:25:18.813

您有两种方法可以更改 any 的参数`SSRS report`。

**设计时：**在设计报表时，您可以在报表中设置输入参数。您可以提供一个默认值，或者如果您不愿意提供默认参数，您可以离开这部分。

**在运行时：**当您在浏览器中预览报表或查看报表时，如果该报表是参数化的，您可以提供参数。您可以在此处更改参数。

请注意，如果您提供了默认参数并在浏览器/预览中查看报告，则它会显示默认参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T22:42:21.153

这是子报表的主要功能之一，能够对所有报表使用相同的参数，因此它们很可能是相同的，但最终调用应在完整审查后进行，包括所涉及的任何表达式。米

# sql-server - Excel 不会从 Microsoft Query 获取数据

> ID：15415228
> 
> 赞同：0
> 
> 时间：2013-03-14T16:43:49.863
> 
> 标签：sql-server, excel

我使用 Microsoft Query 并为我们的 MSSQL 数据库编写了一个查询。该查询在 MS Query 中运行良好。它大约有 59,000 行和 9 列数据。当我关闭 MS Query 并将数据导入 Excel 时，它会说：“获取数据”几秒钟，然后就消失了。没有数据实际显示，但它几乎就像 Excel 似乎认为那里有什么东西。

我在 Excel 2007 和 2010 上试过，但两者都做同样的事情。我读过 Excel 2007/10 最多可以处理 1,000,000 行查询，所以我不确定为什么它在这里不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:59:16.823

这是 VBA 中可能有效的 ADO 方法...

```
sub getData()
dim adoRS as object ' ADODB.Recordset
dim adoConn as object ' ADODB.Connection
dim sConnStr as string

set adors=createobject("adodb.recordset")
set adoConn=createobject("ADODB.connection")

with adocn
.provider="MSSQL"
.cursorlocation=3 ' aduseclient
.connectionstring=sConnstr ' get from UDL file in Windows Explorer
.open
end with

with adors
.source="SELECT * FROM table"
.activeconnection=adocn
.cursortype=1 ' adopenkeyset
.locktype=1 ' adlockreadonly
.cursorlocation=3 ' aduseclient
.open
end with

range("A1").copyfromrecordset adors

end sub 
```

我希望这会有所帮助

菲利普

# jquery - 使用 jQuery 更新“文本”节点

> ID：15415231
> 
> 赞同：0
> 
> 时间：2013-03-14T16:43:55.157
> 
> 标签：jquery

我有像这样的html：

```
<label><input type="radio" /> Lorem</label> 
```

将“Lorem”更改为“Ipsum”的最佳方法是什么？这些不起作用：

```
// nope:
$('input').next().text('Ipsum'); 

// also nope:
var text = $('input').parent()[0].childNodes[1];
$(text).text('Ipsum'); 
```

我可以轻松地将 html 更改为：

```
<label><input type="radio" /><span> Lorem</span></label> 
```

或者`replaceWholeText`直接使用 DOM 方法：

```
$('input').parent()[0].childNodes[1].replaceWholeText(' Ipsum'); 
```

或任何其他的东西，但我想知道是否有一个干净的 jQuery 方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:48:59.810

jQuery 没有任何一流的文本节点支持。你可以：

```
$("input")[0].nextSibling.nodeValue = "Ipsum"; 
```

或者将 a`<span>`与标识符或类一起使用并以此为目标。如果您需要动态更改文本，则可能需要这样的容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:45:55.910

丑陋的方式：

```
 $('input').parent().contents().each(function(){
   if(this.nodeType === 3)
     this.nodeValue= "Ipsum";
 }); 
```

或更好：

```
$('input')[0].nextSibling.nodeValue = "Ipsum"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:15:40.917

`$('label').contents().last().replaceWith("Ipsum");`

但是，我个人会使用`nodeValue`.

希望这可以帮助！

演示：http: [//jsfiddle.net/dirtyd77/SLGdE/25/](http://jsfiddle.net/dirtyd77/SLGdE/25/)

# c++ - C++ 中带有标准输出的函数对象

> ID：15415236
> 
> 赞同：1
> 
> 时间：2013-03-14T16:43:57.637
> 
> 标签：c++, function-object

如果没有 cout，程序将正确运行；为什么？输出缓存有问题？

```
#include<algorithm>
#include<iostream>
#include<vector>

using namespace std;

class fn
{
    public:
        int i;
    bool operator()(int,int)
    {
        ++i;
        cout<<"what the poodles?\n";
    }
};
int main()
{
    vector<int> temp(9,9);
    vector<int> tmp(2,3);
    fn f;
    vector<int>::iterator ite;
    ite=find_first_of(temp.begin(),temp.end(),tmp.begin(),tmp.end(),f);
    if(ite==temp.end())cout<<"Pomeranians!\n";
    //cout<<"compared "<<f.i<<" time(s)\n";//if note this ,you'll get defferent output.
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:50:32.003

三个想法：

1.  `fn::operator()(int, int)`返回一个`bool`但没有返回语句。该函数不是正确的 C++。

2.  当我修复那条线时，我得到了我期望的输出。如果答案的第一部分不能解决您的问题，您能否在您的问题中详细说明您看到的输出和您期望的输出，并说明它们之间的差异。

3.  您还增加了一个未初始化的变量`fn::i`。这对你没有任何帮助。您应该在构造函数中对其进行初始化。如果您尝试打印此变量（或以任何方式检查它），它可能有任何值，因为它的起始值可能是任何值（可能是 0，也可能是其他任何值）。

* * *

详细地说，我的编译器警告我以下问题：

> foo.cc:16:3：警告：控制到达非空函数的结尾 [-Wreturn-type]

为了解决这个问题，我`return false;`在函子的末尾添加了一个，我看到了以下输出，这对我来说很有意义。

```
[11:47am][wlynch@watermelon /tmp] ./foo
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
what the poodles?
Pomeranians! 
```

# python - 在 Python 中，有效地确定两个列表是否是彼此移动的副本

> ID：15415237
> 
> 赞同：6
> 
> 时间：2013-03-14T16:43:58.983
> 
> 标签：python, list, compare

检查两个相对较短（大约 3-8 个元素）列表是否相互复制的最有效（及时）方法是什么？如果是这样，确定并返回偏移量？

这是我想要的示例代码和输出：

```
>>> def is_shifted_copy(list_one, list_two):
>>>     # TODO
>>>
>>> is_shifted_copy([1, 2, 3], [1, 2, 3])
0
>>> is_shifted_copy([1, 2, 3], [3, 1, 2])
1
>>> is_shifted_copy([1, 2, 3], [2, 3, 1])
2
>>> is_shifted_copy([1, 2, 3], [3, 2, 1])
None
>>> is_shifted_copy([1, 2, 3], [1])
None
>>> is_shifted_copy([1, 1, 2], [2, 1, 1])
1 
```

列表可能有重复的条目。如果多个偏移量有效，则返回任何偏移量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:56:45.707

这是一个简单的迭代器版本，它在 2n 次迭代中完成工作（n 是列表的长度）

```
import itertools

def is_shifted_copy(list1, list2):

    if len(list1) != len(list2):
        return False

    iterator = iter(list2)

    for i, item in enumerate(itertools.chain(list1, list1)):
        try:
            if item == iterator.next():
                continue
            else:
                iterator = iter(list2)
        except StopIteration:
            return i - len(list2)

    else:
        return False

print is_shifted_copy([1, 2, 3], [1, 2, 3]) #0
print is_shifted_copy([1, 2, 3], [3, 1, 2]) #2
print is_shifted_copy([1, 2, 3], [3, 2, 1]) #False
print is_shifted_copy([1, 2, 3], [2, 3, 1]) #1
print is_shifted_copy([1, 1, 2], [2, 1, 1]) #2
print is_shifted_copy([1, 2, 3], [1]) #False
print is_shifted_copy([1, 2, 1], [2, 1, 1]) #1
print is_shifted_copy([1, 1, 1], [1, 1, 1]) #0 
```

并根据您的规范，

不应该`is_shifted_copy([1, 1, 2], [2, 1, 1])`回来`2`吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T17:12:20.077

搜索第一个列表的两个副本可以避免执行过多的连接：

```
def is_shifted_copy(l1, l2):
    l1l1 = l1 * 2
    n = len(l1)
    return next((i for i in range(n) if l1l1[i:i + n] == l2), None) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T17:00:30.793

这是一个基于索引和切片的解决方案：

```
>>> def is_shifted_copy(l1, l2):
    try:
        return [l1[-i:] + l1[:-i] for i in range(len(l1))].index(l2)
    except ValueError:
        return None 
```

结果如预期：

```
>>> is_shifted_copy([1, 2, 3], [1, 2, 3])
0
>>> is_shifted_copy([1, 2, 3], [3, 1, 2])
1
>>> is_shifted_copy([1, 2, 3], [2, 3, 1])
2
>>> is_shifted_copy([1, 2, 3], [2, 1, 3])
None 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T17:11:47.570

下面是 NPE 解决方案的修改版本，它检查所有可能的匹配位置。它与 thkang 的（和 ecatmur 的）聪明的迭代器解决方案相比毫不逊色：

```
import itertools as IT

def is_shifted_copy_thkang(list1, list2):
    N = len(list1)
    if N != len(list2):
        return None
    elif N == 0:
        return 0
    next_item = iter(list2).next
    for i, item in enumerate(IT.chain(list1, list1)):
        try:
            if item == next_item():
                continue
            else:
                next_item = iter(list2).next
        except StopIteration:
            return -i % N
    else:
        return None

def is_shifted_copy_NPE(list1, list2):
    N = len(list1)
    if N != len(list2):
        return None
    elif N == 0:
        return 0

    pos = -1
    first = list1[0]
    while pos < N:
        try:
            pos = list2.index(first, pos+1)
        except ValueError:
            break
        if (list2 + list2)[pos:pos+N] == list1:
            return pos
    return None

def is_shifted_copy_ecatmur(l1, l2):
    l1l1 = l1 * 2
    n = len(l1)
    return next((-i % n for i in range(n) if l1l1[i:i + n] == l2), None)

tests = [
    # ([], [], 0),    
    ([1, 2, 3], [1, 2, 3], 0),
    ([1, 2, 3], [3, 1, 2], 1),
    ([1, 2, 3], [2, 3, 1], 2),
    ([1, 2, 3], [3, 2, 1], None),
    ([1, 2, 3], [1], None),
    ([1, 1, 2], [2, 1, 1], 1),
    ([1,2,3,1,3,2], [1,3,2,1,2,3], 3)
    ]

for list1, list2, answer in tests:
    print(list1, list2, answer)
    assert is_shifted_copy_thkang(list1, list2) == answer
    assert is_shifted_copy_NPE(list1, list2) == answer    
    assert is_shifted_copy_ecatmur(list1, list2) == answer 
```

* * *

```
In [378]: %timeit is_shifted_copy_thkang([1, 2, 3], [3, 1, 2])
100000 loops, best of 3: 3.5 us per loop

In [377]: %timeit is_shifted_copy_ecatmur([1, 2, 3], [3, 1, 2])
100000 loops, best of 3: 2.37 us per loop

In [379]: %timeit is_shifted_copy_NPE([1, 2, 3], [3, 1, 2])
1000000 loops, best of 3: 1.13 us per loop 
```

* * *

注意：我更改了返回值，`is_shifted_copy_thkang`以便`is_shifted_copy_ecatmur`所有三个版本都能通过原始帖子中的测试。

我对有变化和没有变化的函数进行了基准测试，发现它不会显着影响函数的性能。

例如，使用`return i`：

```
In [384]: %timeit is_shifted_copy_thkang([1, 2, 3], [3, 1, 2])
100000 loops, best of 3: 3.38 us per loop 
```

与`return -i % N`：

```
In [378]: %timeit is_shifted_copy_thkang([1, 2, 3], [3, 1, 2])
100000 loops, best of 3: 3.5 us per loop 
```

# c# - 防止 Visual Studio 在 switch-case 语句中添加换行符

> ID：15415238
> 
> 赞同：8
> 
> 时间：2013-03-14T16:44:00.153
> 
> 标签：c#, visual-studio-2010

有没有办法*阻止*Visual Studio (2010)“格式化文档”菜单将`switch-case`语句格式化如下：

当我像这样编写代码时：

```
switch (value) {
    case "1": mode = Mode.One; break;
    case "2": mode = Mode.Two; break;
} 
```

然后点击“格式化文档”，Visual Studio 添加断线：

```
switch (value) {
    case "1":
        mode = Mode.One;
        break;
    case "2":
        mode = Mode.Two;
        break;
} 
```

我查看了 VS Options 的 Formatting 部分，但找不到任何相关内容。

![选项>格式化](../Images/4db3d9c43b55c2d8c578082b81773b63.png)

（我没有安装 ReSharper）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T09:19:14.560

找到导致此问题的设置：

选项 > 文本编辑器 > C# > 格式化 > 换行 >`Leave statements and member declarations on the same line`必须选中。

![选项对话框](../Images/5779fdcdea649093002d0c37ec49749b.png)

# javascript - 如何获取当前显示在屏幕上的第一个可见 DOM 元素？

> ID：15415242
> 
> 赞同：1
> 
> 时间：2013-03-14T16:44:10.097
> 
> 标签：javascript, jquery, html, multiple-columns

如何获取当前显示在屏幕上的第一个可见 DOM 元素？

我尝试了类似的东西

var el = document.elementFromPoint(x, y)

并在 while 循环中增加 y 坐标，但问题是当文档上有 css 多列时它不起作用，在这种情况下返回 < html > 标签，而不是实际元素。有什么方法可以让我真正获得适用于 css 列的屏幕（顶部，左侧）元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:55:29.073

这是一个**非常基本**的示例，它只获取最远的元素`top`。这只是一个开始，因为您可能还需要考虑`left`偏移量。

您需要排除`body`and`html`元素（如下所示），因为它们始终是第一个。

## [小提琴](http://jsfiddle.net/BjsUq/)

```
var first;
$(':visible').not('body, html').each(function() {
    if (typeof first == 'undefined') {
        first = $(this);
    } else if ($(this).offset().top < first.offset().top) {
        first = $(this);
    }
});
first.addClass('highlight'); 
```

# asp.net-mvc-3 - 使用 DateTime.Now 作为 ASP.NET MVC 中的默认路由值是否安全？

> ID：15415245
> 
> 赞同：1
> 
> 时间：2013-03-14T16:44:11.850
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我在 .NET Framework v4.0 上运行的 ASP.NET MVC 3 项目的区域注册中有以下内容：

```
context.MapRoute(null,
                 "YardJob/{location}/{from}",
                 new { controller = "YardJob", 
                       action = "List", 
                       from = DateTime.Now }); 
```

我的问题是：如果路由引擎使用“from”的默认路由值，控制器上的 List 方法是否总是以当前日期和时间调用？

路由引擎中是否有任何缓存可能导致请求之间重用默认路由值？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:44:30.633

正如公认的答案所解释的，这是不可能的。但是，为了完整起见，以下是解决此问题的方法：

**路线：**

```
context.MapRoute(null,
    "YardJob/{location}/{from}",
     new { controller = "YardJob", 
     action = "List", 
     from = UrlParameter.Optional }
); 
```

**控制器动作：**

```
public ActionResult List (string location, DateTime from)
{
    if (from == null)
        from = DateTime.Now;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:35:50.643

注册路由的过程是在应用启动时执行的，所以如果你把 DateTime.Now 字段的默认参数是应用启动的时间，只有在 AppPool 回收时才改变

应用程序何时启动？当请求 ASP.NET 应用程序中的第一个资源（例如页面）时。Global.asax 中的 Application_Start 方法在应用程序的生命周期中只调用一次。您可以使用此方法执行启动任务，例如将数据加载到缓存中和初始化静态值。

查看[生命周期](http://msdn.microsoft.com/en-us/library/ms178473.aspx)

# javascript - PrototypeJS 到 jQuery | 文档.viewport

> ID：15415247
> 
> 赞同：1
> 
> 时间：2013-03-14T16:44:20.137
> 
> 标签：javascript, jquery, prototypejs

我正在尝试将一些原型代码转换为 jQuery。

我有这些我不知道如何转换的电话：

```
document.viewport.getHeight();
document.viewport.getScrollOffsets().top 
```

### 问题

上述代码在 jQuery 中的相等性是什么？
如果没有，香草的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:48:25.520

在现代浏览器中：

```
document.documentElement.clientHeight
document.documentElement.scrollTop 
```

在 jQuery 中：

```
$(window).height();
$(window).scrollTop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:51:01.563

## jQuery方式

窗口[高度](http://api.jquery.com/height/)：

```
$(window).height(); 
```

[滚动顶部](http://api.jquery.com/scrollTop/)：

```
$(window).scrollTop(); 
```

## 香草javascript方式：

窗口高度

```
var winHeight = 0;
if (document.body && document.body.offsetWidth) {
    winHeight = document.body.offsetHeight;
}
if (document.compatMode=='CSS1Compat' && document.documentElement && document.documentElement.offsetHeight) {
    winHeight = document.documentElement.offsetHeight;
}
if (window.innerHeight) {
    winHeight = window.innerHeight;
} 
```

滚动偏移：

```
var scrollY = window.pageYOffset; 
```

# php - 通过连接获取 PHP MySQL PDO 列表名

> ID：15415249
> 
> 赞同：4
> 
> 时间：2013-03-14T16:44:28.560
> 
> 标签：php, mysql, pdo

我在要加入的不同表中具有相同名称的字段。如`ticket.status`，`user.status`和`transaction.status`。目前查询只返回`status`.

如何以阻止类似字段名称覆盖的方式获取表名，以便区分字段之间的区别。

简单的说：

```
$data = array($eventId);
$statement = $this->db->prepare("SELECT * FROM ticket, user, transaction 
                        WHERE ticket.eventId = ? 
                        AND ticket.userId = user.userId
                        AND ticket.transactionId = transaction.transactionId");

$statement->execute($data); 
$rows = $statement->fetchAll(PDO::FETCH_ASSOC); 
```

在我的研究中，我发现`PDO::ATTR_FETCH_TABLE_NAMES`看起来它可以提供帮助的常量，但我不知道如何实现（我假设通过`$statement->setAttribute();`某种方式）。

我也担心它不起作用，因为 PHP 文档提到它依赖于驱动程序。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:51:11.213

只需将新别名添加到您的选择语句

```
$statement = $this->db->prepare("
    SELECT *, ticket.status AS ticket_status, user.status AS user_status, transaction.status AS transaction_status 
    FROM ticket, user, transaction 
    WHERE ticket.eventId = ? 
    AND ticket.userId = user.userId
    AND ticket.transactionId = transaction.transactionId
"); 
```

然后你可以做

```
$rows[0]['user_status'];
$rows[0]['ticket_status'];
$rows[0]['transaction_status']; 
```

如果您真的关心性能，返回的数据量会更大，因此您可以选择每一列而不是添加新别名，然后在`status`列上放置别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:49:00.403

为什么不改变你的实际加入：

```
SELECT 
t.status as ticket_status, u.status as user_status, tr.status as trans_status
FROM 
ticket as t
inner join user as u on t.userId = u.userId
inner join transaction as tr on t.transactionId = tr.transactionId
where
t.eventId = ? 
```

你甚至不需要使用`as something`，但我发现它更整洁。

请注意，实际上将解决此问题的列的转换，而不是 join 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:47:22.987

最明显的评论是“不要这样做，这就是存在别名的原因”。但仍有一个很好的潜在问题：MySQL 是否发送有关结果集列来自何处（表、视图或计算）的信息？

显然，确实如此，因为该`PDOStatement`对象有一个名为[getColumnMeta()](http://www.php.net/manual/en/pdostatement.debugdumpparams.php)的实验方法。我一直在测试，它返回一个关联数组，其中`table`键

*   如果列来自表或视图，则包含源表
*   如果计算列，则为空字符串

当然，无论如何我都会坚持使用别名。能够使用关联数组对我来说是一个杀手级功能。

# u-boot - 使用 BDI2000 PowerPC4xx 进行 u-boot 调试

> ID：15415261
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:09.930
> 
> 标签：u-boot

我试图弄清楚在尝试调试 U-boot 端口时发生了什么。我已经在我的板上加载了 U-boot，并通过 BDI2000 设置进行调试。当我逐步执行 start.SI 时，不断遇到此错误：

```
(gdb) si
314     mtspr   SPRN_SRR0,r0
(gdb) si
315     mtspr   SPRN_SRR1,r0
(gdb) si
316     mtspr   SPRN_CSRR0,r0
(gdb) si
317     mtspr   SPRN_CSRR1,r0
(gdb) si
320     mtspr   SPRN_MCSRR0,r0
(gdb) si
321     mtspr   SPRN_MCSRR1,r0
(gdb) si
322     mfspr   r1,SPRN_MCSR
(gdb) si
323     mtspr   SPRN_MCSR,r1
(gdb) si
333     lis r1,0x0030   /* store gathering & broadcast disable */
(gdb) si
Cannot access memory at address 0x300000
(gdb) si
_start_440 () at start.S:334
334     ori r1,r1,0x6000    /* cache touch */
Cannot access memory at address 0xfffff03c
(gdb) bt
#0  _start_440 () at start.S:334
#1  0xfffff18c in rsttlb () at start.S:480
Backtrace stopped: frame did not save the PC 
```

这是我第一次提出董事会建议，因此您可能拥有的任何指示都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:03:33.847

由于某种原因，GDB 只读取正在运行的模块的 asm。通过使用 BDI 进入其他领域，我可以从 GDB 中逐步退出，而不会出现“无法访问内存”的问题。

如果您有任何问题，请随时给我发消息。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T23:45:52.873

这似乎是 PowerPC 代码。我的经验表明您的内存地址尚未映射。默认情况下，启动代码将访问非易失性存储器 (NVM) 代码（例如：ROM、EEPROM、闪存......），并且有责任设置或定义 RAM 的位置。通常，此信息从 NVM 中提取，并写入内存管理设备或 PowerPC 芯片中，以使处理器了解 RAM。如果没有看到整个代码，很难评估它是否设置正确。另一种可能性是 BDI 的配置文件没有描述地址 0x300000 的内容

# nginx - php -fpm 套接字和 TCP 同时

> ID：15415263
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:11.323
> 
> 标签：nginx, php

是否可以同时使用 php-fpm 来监听套接字和 TCP？因为我们计划使用本地 nginx 使用套接字和远程 nginx 使用 tcp

不是可以使用 php-fpm 套接字形式的远程主机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:44:09.363

我没试过这个。但是 wiki 说您可以使用`listen_address`.

[http://php-fpm.org/wiki/Configuration_File](http://php-fpm.org/wiki/Configuration_File)

# java - 图像缩小问题

> ID：15415264
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:11.940
> 
> 标签：java, image, image-preloader

我需要将源图像的大小调整为目标图像，这就是我已经使用以下代码所做的

```
public static BufferedImage getScaledSampledFilteredImage(
            BufferedImage img, int targetWidth, int targetHeight,
            boolean higherQuality) {

        ResampleOp resampleOp = new ResampleOp(targetWidth, targetHeight);
        resampleOp.setUnsharpenMask(AdvancedResizeOp.UnsharpenMask.VerySharp);
        resampleOp.setUnsharpenMask(AdvancedResizeOp.UnsharpenMask.Soft);
        BufferedImage rescaledImage = resampleOp.filter(img, null);

        return rescaledImage;
    } 
```

我正在使用

[图像缩放库](http://code.google.com/p/java-image-scaling/)

但正如你在这里看到的，我得到的是虚线，而不是我想要的连续线。

谁能指导我如何实现我的目标？

谢谢你米希尔帕雷克

![原始图像](../Images/7e7533ce5ae2f4ebdd99b12b80efce05.png)

![目标图像](../Images/b0f748fbdd3eb528b14aa783115eb94e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:20:48.500

尝试其中之一。根据需要进行调整以满足您的需求。

```
public static Image getScaled(final Image img, final int w, final int h) {
    return img.getScaledInstance(w, h, java.awt.Image.SCALE_SMOOTH);
}

public static BufferedImage getScaled(final BufferedImage img, final int w, final int h) {
    final Image image = img.getScaledInstance(w, h, java.awt.Image.SCALE_SMOOTH);
    final BufferedImage bufferedImage = new BufferedImage(w, h, img.getType());
    bufferedImage.getGraphics().drawImage(image, 0, 0, null);
    return bufferedImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:00:46.550

我不知道这对您是否有用，但是当我想重新缩放图像时，我正在使用此功能：

```
public BufferedImage scaleImage(int WIDTH, int HEIGHT, String filename) {
        BufferedImage bi = null;
        try {
            ImageIcon ii = new ImageIcon(filename);//path to image
            bi = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = (Graphics2D) bi.createGraphics();
            g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
            g2d.drawImage(ii.getImage(), 0, 0, WIDTH, HEIGHT, null);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
        return bi;
    } 
```

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:50:27.570

您需要设置抗锯齿：

```
clearBuffer = new BufferedImage(img.getWidth(null),
                            img.getHeight(null), BufferedImage.TYPE_INT_RGB);
            Graphics2D graphics = clearBuffer.createGraphics();
            graphics.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BICUBIC);
            graphics.setRenderingHint(RenderingHints.KEY_RENDERING,
                RenderingHints.VALUE_RENDER_QUALITY);
            graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
            graphics.drawImage(img, 0, 0, null); 
```

# mysql - 解释 COUNT 和 GROUP BY

> ID：15415266
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:15.580
> 
> 标签：mysql, sql

目标是“**显示球队名称和总进球数。** ”

答案是：

```
SELECT eteam.teamname, COUNT(goal.teamid)
FROM eteam JOIN goal ON id=teamid
GROUP BY eteam.teamname 
```

我不明白为什么我们按 eteam.teamname 而不是 goal.teamid 分组。我们不应该按goal.teaid 分组，而是将下面的两个“RUS”条目合并为一个吗？

这两个数据库，或者你[可以去这里问题 9](http://sqlzoo.net/wiki/The_JOIN_operation)：

```
 eteam
id  teamname         coach
POL Poland           Franciszek Smuda
RUS Russia           Dick Advocaat
CZE Czech Republic   Michal Bilek
GRE Greece           Fernando Santos

         goal
matchid teamid  player                gtime
1001    POL     Robert Lewandowski      17
1001    GRE     Dimitris Salpingidis    51
1002    RUS     Alan Dzagoev            15
1001    RUS     Roman Pavlyuchenko      82 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:56:40.493

在此示例中，您可以在子句`id`中使用`teamid`或并获得相同的结果。`teamname``GROUP BY`

> 我们不应该按goal.teamid 分组，而是将下面的两个“RUS”条目合并为一个吗？

让我们看一下以下查询：

```
SELECT eteam.teamname 'Team Name', COUNT(goal.teamid) 'Total Goals'
  FROM eteam JOIN goal ON eteam.id=goal.teamid
  GROUP BY goal.teamid
  ORDER BY eteam.teamname 
```

由于 join 子句，eteam.id 与 goal.teamid 相同。由于 eteam.teamname 是不同的（没有两个团队具有相同的名称）并且对应于 eteam.id，因此按这些字段中的任何一个进行分组都会给出相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:52:21.383

您需要按 eteam.teamname 分组以列出每个团队。然后计数在每个组内工作。

一个经常看到

```
SELECT eteam.teamname, COUNT(eteam.teamname)
FROM eteam JOIN goal ON id=teamid
GROUP BY eteam.teamname 
```

计算组中的记录数。有时它是 COUNT(*) 或 COUNT(id)，其中 id 是主键。

COUNT(eteam.teamname) 和 COUNT(goal.teamid) 之间的区别在于，第一个会计算记录的数量，因为每条记录都会有一个团队名称，而 count(goal.teamid) 不会包含 NULL，所以它只会添加提高目标。

# c# - 如何计算信号的过零率？

> ID：15415271
> 
> 赞同：3
> 
> 时间：2013-03-14T16:45:29.413
> 
> 标签：c#, audio, naudio, audio-processing

我想获得音频信号的过零率。我试图编写这个公式的代码：

![在此处输入图像描述](../Images/4776e44e4ceb3def05f5ab6068802a09.png)

但我并不完全理解整个公式。

为了处理我的代码，我按块分割信号，我的意思是“帧阻塞”。例如，每个块的长度为 512（有 512 个信号样本）。假设我有 100 个街区。那么过零率是否会为每个区块返回一个值？我的意思是，根据公式，我的整个信号会有 100 个值吗？

而且我也不明白 w() 的意思。是我用来开窗的汉明吗？它如何计算nm？它很可能是一个负数？

我很困惑请帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:51:03.823

忘记公式——当你试图用这种方式表达它时，它会变得更复杂。

过零率是信号在给定时间段（通常为一秒）内改变符号的次数。这就是你需要知道的。通常，您只对它从负变为正或反之亦然的速率感兴趣，而不是每次符号变化时。查看它从负到正的次数可以用作信号频率的代理。

至于 w(nm) 是什么，那是一个[窗口函数](http://en.wikipedia.org/wiki/Window_function)。这就是改变您的公式回答的问题的原因，即“信号有多少次过零？” 到“信号在最后 n 个样本中过零多少次？”。老实说，这有点让我眼花缭乱，所以不要因为不理解而感到难过——它也让我感到困惑。对于过零率，我们将选择一个窗口函数，使得 w 在一定范围内返回 1，否则返回零。（这称为矩形窗口）。为这种窗口表达这个公式的更好方法是忘记“窗口”作为一般概念，并限制 sigma 的界限（对不起，我不知道如何在 SO 上表达公式）：

Z_n(m) = sum_{m=xn}^0|符号[x(m)] - 符号[x(m-1)]|

如果 n = 您的采样率，这将为您提供以 Hz 为单位的过零率。这更有意义：没有更多的 w 也没有更多的无穷大！您使用的源可能包含窗口以试图概括，但是，在这种情况下，没有任何收获（据我所知 - 但我不知道一切！）

# qt - 在 ubuntu 中在 QT c++ 中运行 shell 命令

> ID：15415272
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:32.247
> 
> 标签：qt, shell

我在 ubuntu 中使用 Qt 5.0.1（64 位）。我在按钮按下功能下运行以下命令。

QString command = "sh /home/rahul/qtapp/ques_new/ques_new/inter4ql/test1.sh"; const char* 命令2；

command2 = command.toLocal8Bit().data();

## 系统（命令2）；

test1.sh 文件内容为

# !/bin/bash

回声“你好” 回声“你好” >> out.txt

* * *

通过按下按钮调用此系统命令时，它会在输出窗口中显示 hello，但不会创建新文件 out.txt。

为了调试，我在调用此函数之前手动创建 out.txt。但是，再次调用此函数后，它会在输出窗口中显示 hello，但不会将 hello 放入 out.txt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:13:10.787

你的代码是错误的。

尝试：

```
#!/bin/bash
echo "hello" >> out.txt 
```

在这里工作没有任何问题。

此外，该文件可能不是在您正在查看的目录中创建的。你检查过你的脚本目录和你的应用程序工作目录吗？将 替换`out.txt`为完整路径（`/home/derp/out.txt`例如 ）。

# arduino - 使用 Arduino Uno 记录 GSM Air 接口消息

> ID：15415274
> 
> 赞同：0
> 
> 时间：2013-03-14T16:45:36.097
> 
> 标签：arduino, gsm, cdma

[是否可以使用Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)记录在 GSM 模块和 GSM/WCMDA 网络之间发送的 GSM Air 接口消息？

基本上，我想记录/记录在 GSM 模块和网络之间发送的空中接口的所有 GSM 消息（例如，寻呼命令、CM 服务请求、位置更新等），以便执行定位使用 Arduino Uno 和数据记录器进行更新、发起呼叫等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T21:10:45.590

听起来更像是 jtag 或 gdb 领域来记录低级别的消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T09:15:44.077

我订购了设备并进行了测试，但不幸的是，这是不可能的。芯片组处理包括第 7 层在内的所有消息，然后将结果传递给 arduino。

# debugging - 托管 IronPython：可以获得当前执行的源代码行吗？

> ID：15415275
> 
> 赞同：1
> 
> 时间：2013-03-14T16:45:38.463
> 
> 标签：debugging, ironpython

是否可以从托管 IronPython 环境中执行的 Python 脚本中检索行号？我想在脚本执行时以某种方式在托管环境之外（在托管应用程序中）的 AvalonEdit 控件中突出显示该行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:34:46.180

我已经想通了，可以通过简单地给脚本引擎一个跟踪回调方法并（可能是异步地）触发一个适当的事件来相应地刷新 IBackgroundRenderer ......嗯......它工作。

```
strategyScriptEngine.SetTrace(IronPythonTraceBack);
strategyScriptEngine.Execute(script, strategyScope); 
```

在同一班的其他地方：

```
private static TracebackDelegate IronPythonTraceBack(TraceBackFrame frame, string result, object payload)
{
    if (IronPythonExecutingLine != null) IronPythonExecutingLine((int)frame.f_lineno);
    return IronPythonTraceBack;
} 
```

# c# - 使用 C# 在 WinRT 中获取可用磁盘空间

> ID：15415278
> 
> 赞同：3
> 
> 时间：2013-03-14T16:45:43.473
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps

```
 [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool GetDiskFreeSpaceEx(
            string lpDirectoryName,
            out ulong lpFreeBytesAvaliable,
            out ulong lpTotalNumberOfBytes,
            out ulong lpTotalNumberOfFreeBytes);

        // Returns free disk space from directory.
        public static ulong GetFreeDiskSpace(string directory)
        {
            ulong a, b, c;

            if (GetDiskFreeSpaceEx(directory, out a, out b, out c))
            {
                Debug.WriteLine(a);
            }

            return a;
        } 
```

我正在开发一个 Windows 应用商店应用程序。为什么我调用时变量包含 0：

```
GetFreeDiskSpace("C:\\"); 
```

?

带有 Debug.WriteLine(a) 的行没有被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:27:50.733

研究其他东西后，我最终找到了答案：“在 Windows 8 Metro Apps 中，您不能访问 KnownFolders 之外的文件夹或驱动器。”

[MSDN](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/ced6ed38-2037-4052-92ee-1ec0d15efba8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:51:20.167

你写错了驱动器。它需要是这样的：

```
GetFreeDiskSpace("C:");

[DllImport("kernel32.dll", SetLastError = true)]
static extern bool GetDiskFreeSpaceEx(
    string lpDirectoryName,
    out ulong lpFreeBytesAvailable,
    out ulong lpTotalNumberOfBytes,
    out ulong lpTotalNumberOfFreeBytes); 
```

在另一个页面上也找到了这个。在 WinRT 上是不同的

[无法从 Metro 风格的应用程序获取可用磁盘空间](https://stackoverflow.com/questions/11133084/unable-to-get-free-disk-space-from-metro-style-app)

```
static void TestDiskSpace()
{
    IStorageFolder appFolder = ApplicationData.Current.LocalFolder;
    ulong a, b, c;
    if(GetDiskFreeSpaceEx(appFolder.Path, out a, out b, out c))
        Debug.WriteLine(string.Format("{0} bytes free", a));
} 
```

# ios - 使用转义将 NSString 转换为 unicode

> ID：15415279
> 
> 赞同：1
> 
> 时间：2013-03-14T16:45:45.177
> 
> 标签：ios, objective-c, unicode, nsstring

```
NSString *string1 = @"\u03C0";
NSLog(@"string1: %@", string1);  // result of a Pi symbol

NSString *string2 = @"03C0";
NSString *string3 = [@"\\u" stringByAppendingString:string2];
NSLog(@"string3: %@", string3);  // result of \u03C0 but need it to be a Pi symbol as well 
```

我认为 string3 会给出与 string1 相同的结果。但它没有。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:58:10.913

当您使用 键入字符串文字时`\u9999`，编译器会将其视为特殊字符文字。编译器会将该语法直接转换为结果字符。

您`string3`正在运行时处理。该`\u9999`语法在运行时没有特殊含义。

你可以这样做：

```
NSString *string2 = @"03C0";
NSScanner *scanner = [NSScanner scannerWithString:string2];
unsigned int code;
[scanner scanHexInt:&code];
NSString *string3 = [NSString stringWithFormat:@"%C", (unsigned short)code];
NSLog(@"string3: %@", string3); 
```

如果您知道代码，`\u03C0`那么您可以直接使用它：

```
NSString *string3 = [NSString stringWithFormat:@"%C", (unsigned short)0x03C0];
NSLog(@"string3: %@", string3); 
```

更好的是，直接输入：

```
NSString *string3 = @"π";
NSLog(@"string3: %@", string3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:48:33.803

答案就在你的问题中。

你说这是 UNICODE 字符 \u03C0，而不是 UNICODE 字符串。

因此，当您使用`stringByAppendingString:`它时，它会返回`string`to `string3`，而不是字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T16:52:45.133

`\u03C0`是*一个*单一的 Unicode 字符，即 pi 字符的另一种表示形式。字符串 '\'、'u' 等是另一回事。

# jquery - 关闭并重新打开框后，无法进入 colorBox 中的 wysihtml5 文本区域

> ID：15415282
> 
> 赞同：3
> 
> 时间：2013-03-14T16:45:53.483
> 
> 标签：jquery, asp.net, colorbox, wysihtml5

我在通过颜色框显示的弹出窗口上有一个 wysiHtml5 文本区域：

```
$j.colorbox({
                inline: true,
                href: "#popup",
                scrolling: false,
                onLoad: function() {
                    $('#cboxClose').remove();
                },
                onCleanup: function () {
                    $j("div#popup").hide();

                },
                onClosed: function () {
                    editor = null;
                },
                onComplete: function () {

                    var editor = new wysihtml5.Editor("wysiwygText", { // id of textarea element
                        toolbar: "wysihtml5-toolbar", // id of toolbar element
                        parserRules: wysihtml5ParserRules, // defined in parser rules set 
                        stylesheets: ["Styles/wysihtml5.css", "Styles/wysihtml5.css"]
                    });

                }
            }); 
```

编辑器在第一次弹出颜色框时工作正常。但是如果它被关闭并重新打开，用户就不能点击进入编辑器。

我想知道这是否与我试图重新创建编辑器对象有关？问题是，如果我在颜色盒启动之前创建它，当颜色盒启动时编辑器会“损坏”。（即如果我将#popup 设置为可见，我可以在页面加载时对其进行编辑，但是当我启动颜色框时，我再次无法编辑内容。

行为是我可以看到文本区域，但我不能“点击”它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:17:43.497

这可能对您没有帮助，但我遇到了这样的问题。我必须在元素设置为对话框后创建编辑器。

```
 $(".addtext").click(function(){

                    $("#editorcontainer").dialog({
                        width: 737
                    });

                    (function($){
                        $("#wysihtml5-textarea").wysihtml5(); 
                    })($1_7_2);

                }); 
```

唯一的问题是 wysihtml5 编辑器的重复与对话框的并发打开。当我修复它时，我会再次发布。

编辑：我可能应该花时间阅读 wysihtml5 代码以真正了解发生了什么，但我现在不能花太多时间在上面。我注意到每次调用 wysihtml5() 时编辑器都会创建 dom 元素。这是制作重复的元素，因此想法是使用容器元素并在对话框打开时创建其内部内容，并在对话框关闭时销毁其内部内容。顺便说一句，当程序员不记录他们的设计时，我真的很讨厌。

```
//button click event
$(".addtext").click(function(){
        $("#editorcontainer").dialog({
             width: 737,

             open: function(event, ui){
                  //create inner html
                  $(this).html("<form><textarea id=\"wysihtml5-textarea\" \
                  placeholder=\"Enter your text ...\" \
                  autofocus></textarea></form>");
             },

             close: function(event, ui){
                  //remove inner html
                  $(this).html("");
              }

          });

          //older version of jQuery aliased to $1_7_2
          (function($){
               //invoke the editor
               $("#wysihtml5-textarea").wysihtml5(); 
           })($1_7_2);

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:02:31.323

如果您删除此功能，并且在弹出窗口关闭时不破坏编辑器实例怎么办。

```
onClosed: function () {
  editor = null;
} 
```

您在 javascript 控制台中是否有任何错误？

# ios6 - 未调用 viewDidLoad

> ID：15415291
> 
> 赞同：1
> 
> 时间：2013-03-14T16:46:16.527
> 
> 标签：ios6, uiviewcontroller, viewdidload

一切都在故事板中，使用非常标准的布局。 ![故事板图片](../Images/3271981d598a5cf23f3b7cc96245f15d.png)

`UISplitViewController`带有一个详细视图控制器，`UINavigationController`其中加载了我的自定义`UITableViewController`. 只有`viewDidLoad`in the custom`UITableViewController`永远不会触发。

`viewWillAppear`按预期触发，其他一切正常。视图显然已加载（唯一不起作用的是我在其中设置的通知`viewDidLoad`），我的回调在哪里？

我的`viewDidLoad`方法... ![viewDidLoad 代码](../Images/8fad9c4fc519105a4d526c8b2de0e62f.png) 断点，`NSLog`...如果执行此方法，这些东西不可能不给我反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:03:45.373

我尝试通过使用拆分视图模板创建一个新项目来重新创建我的故事板。然后复制所有适当的视图控制器。它按预期工作。（`viewDidLoad`正常调用）。

我并排比较了项目之间的所有 IB 连接......没有区别。然后我拿走了我原来的项目，并一一删除了所有连接，然后重新连接它们（与它们连接的完全相同的东西）。完成后，我运行代码，一切正常。`viewDidLoad`叫。

我尝试在非工作故事板版本和工作版本之间进行差异，因为没有什么不同，但显然有些不同。我无法确定它的正面或反面 尽管 XML 的大部分内容是相同的，但许多位是 XML 文件的不同部分，这使得标准差异变得不切实际。这更像是一个拼图游戏，试图找到这些位相互匹配的位置，一个小时后我什么也没找到，我放弃了。

所以一个可怕的不令人满意的答案。它与 IB 相关，最有可能是出口（但我确实也重新输入了类名和东西......再次相同）。很可能是我的错误，而不是 Xcode 的错误，但看起来我无法确定确切的原因。

*感谢您的建议，他们帮助我寻找导致解决方案的各个方向。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:37:04.690

我怀疑您希望`viewDidLoad`在它已经加载并且刚刚从主视图控制器更新时被调用。在这种情况下，它不必从 nib/storyboard 重新加载，因此`viewDidLoad`不会被调用。

将日志语句放入`viewDidLoad`，您将看到它至少被调用一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:18:42.330

检查您的视图控制器子类的名称是否与另一个类冲突。

在我的例子中，我心不在焉地保留了自动生成的项目类前缀“MP”，因此项目的根视图控制器子类是 MPViewController。

MPViewController 没有在任何地方记录，但是因为问题仅在链接到 MediaPlayer 框架时才发生，所以可以肯定的是，它是在某处定义的，并且在加载 Storyboard 时，应用程序创建了它的实例而不是我的自定义类的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-07T12:12:11.790

您可能在创建项目后创建了 Storyboard 文件。如果是这样，您应该从 AppDelegate.m 文件中删除字符串：

~~self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];~~

~~self.window.backgroundColor = [UIColor whiteColor];~~

~~[self.window makeKeyAndVisible];~~

# python - 在python脚本之间传递变量的简单方法？

> ID：15415298
> 
> 赞同：0
> 
> 时间：2013-03-14T16:46:41.337
> 
> 标签：python, variables, scripting

我是 python/编程的新手，所以也许我一直在为这个问题搜索错误的语法。

我正在研究一些python脚本。例如，在其中一个 python 脚本中，我正在获取时间、高度和压力等传感器数据，我们称之为 getsensor.py

然后，我有另一个脚本需要“getsensor.py”中的数据，我们称之为“buildstring.py”

所以，我想要一个简单的整体 python 脚本，它会调用“getsensor.py”，然后调用“buildstring.py”

我认为这样做的方法是在“buildstring.py”的开头发出“从getsensor导入时间、高度、压力”，但这似乎不是我所期望的......任何建议或提示我在正确的方向？尽量保持简单。

编辑：似乎通过发出“import X”它正在运行该脚本。因此，当我这样做时，我的 X 脚本包含一些代码，这些代码会导致我的脚本在无限循环中运行。我真正做过的唯一编程是汇编，所以我不确定如何保存可以在多个 python 脚本之间共享的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:50:00.067

有很多方法可以做到这一点，一个简单的方法是创建一个集中的脚本并执行它来运行你的函数

您可以导入必要的功能，就像您在问题g中列出的那样

```
#main.py    

from getsensor import time, altitude
from buildstring import your_function    

if __name__ == '__main__':
   result = altitude()
   your_function(result) 
```

正如您所看到的，有很多方法可以完成您正在尝试做的事情，最重要的是要充分考虑程序的结构和模块之间的关系，以便您的程序具有可扩展性和可维护性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:49:06.130

通常它的习惯是在每个模块中都有一个入口点，然后你可以做类似的事情

```
from buildstring import app
from getsensor import main

result = app(1)
main(result) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:55:21.580

取决于您存储变量的方式/位置。

如果您将它们作为全局变量，请参阅[此解决方案](https://stackoverflow.com/questions/142545/python-how-to-make-a-cross-module-variable)。

*但是，我会尝试通过方法调用*将变量从 getsensor.py 传递到 buildstring.py 。

例如，在 buildstring.py 中编写一个将变量作为参数的方法：

```
def getVars(time, altitude, pressure):
    # Do stuff with variables here, or pass them to other local methods 
```

在 getsensor.py 中：

```
x = 100
y = 2
z = 8

def passVars():
    import buildstring.py
    buildstring.getVars(x, y, z) 
```

# .net - ADODB .NET 互操作游标

> ID：15415300
> 
> 赞同：0
> 
> 时间：2013-03-14T16:46:49.147
> 
> 标签：.net, interop, adodb, recordset

我不明白为什么会这样……

我有以下代码：

```
 var connection = new Connection();
        connection.CursorLocation = CursorLocationEnum.adUseClient;
        connection.ConnectionString = GetOdbcConnectionString(connectionString);
        connection.Open();

        var rs = new Recordset();
        rs.CursorType = CursorTypeEnum.adOpenStatic;
        rs.CursorLocation = CursorLocationEnum.adUseClient;
        rs.LockType = LockTypeEnum.adLockBatchOptimistic;
        // this issues the SQL SELECT * FROM Test
        rs.Open("SELECT * FROM Test", connection); 
        rs.ActiveConnection = null;
        rs.Close();
        rs = null;

        var rs2 = new Recordset();
        rs2.CursorType = CursorTypeEnum.adOpenStatic;
        rs2.CursorLocation = CursorLocationEnum.adUseClient;
        rs2.LockType = LockTypeEnum.adLockBatchOptimistic;

        /* this doesn't output the expected SQL...it outputs:
declare @p1 int
set @p1=180150003
declare @p3 int
set @p3=4
declare @p4 int
set @p4=1
declare @p5 int
set @p5=-1
exec sp_cursoropen @p1 output,N'SELECT * FROM Test',@p3 output,@p4 output,@p5 output
select @p1, @p3, @p4, @p5

*/

        rs2.Open("SELECT * FROM Test", connection); 
```

如果我`Marshal.ReleaseComObject(rs)`在打开 rs2 之前手动操作，第二个记录集会发出与第一个相同的简单 SQL，而不使用游标。从第一个 rs 开始，一定有什么东西挂在上面……但我不知道当连接和记录集都设置了 OpenStatic 和 UseClient 时，它是什么、为什么或为什么会导致使用游标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:48:30.317

在这个问题上敲了半天，终于找到了问题所在：

```
DRIVER={SQL Server}; 
```

需要更改为

```
Provider=SQLOLEDB; 
```

# linux - neo4j 控制台失败

> ID：15415303
> 
> 赞同：0
> 
> 时间：2013-03-14T16:46:54.977
> 
> 标签：linux, console, neo4j

嗨，我使用 scp 将 neo4j 的安装移到了我的 linux 服务器上。它目前位于 /tmp/neo4j-community-1.9.M04/

尝试启动它

```
[afrieden@had03 neo4j-community-1.9.M04]$ ./bin/neo4j start
WARNING: Max 1024 open files allowed, minimum of 40 000 recommended. See the Neo4j manual.
Starting Neo4j Server...WARNING: not changing user
process [3441]... waiting for server to be ready... Failed to start within 120 seconds.
Neo4j Server may have failed to start, please check the logs. 
```

但它失败了。所以我运行了控制台。

```
[afrieden@had03 neo4j-community-1.9.M04]$ ./bin/neo4j console
WARNING: Max 1024 open files allowed, minimum of 40 000 recommended. See the Neo4j manual.
Starting Neo4j Server console-mode...
3/14/13 9:17:00 AM org.neo4j.server.AbstractNeoServer INFO: Setting startup timeout to: 120000ms based on -1
Detected incorrectly shut down database, performing recovery..
2013-03-14 13:17:02.186+0000 ERROR [o.n.k.EmbeddedGraphDatabase]: Startup failed
org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.impl.transaction.XaDataSourceManager@40bc5596' was successfully initialized, but failed to start. Please see attached cause exception.
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:494) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:244) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:88) [neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:82) [neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:205) [neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.recovery.StoreRecoverer.recover(StoreRecoverer.java:110) [neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.server.preflight.PerformRecoveryIfNecessary.run(PerformRecoveryIfNecessary.java:59) [neo4j-server-1.9.M04.jar:1.9.M04]
at org.neo4j.server.preflight.PreFlightTasks.run(PreFlightTasks.java:70) [neo4j-server-1.9.M04.jar:1.9.M04]
at org.neo4j.server.AbstractNeoServer.runPreflightTasks(AbstractNeoServer.java:277) [neo4j-server-1.9.M04.jar:1.9.M04]
at org.neo4j.server.AbstractNeoServer.start(AbstractNeoServer.java:157) [neo4j-server-1.9.M04.jar:1.9.M04]
at org.neo4j.server.Bootstrapper.start(Bootstrapper.java:86) [neo4j-server-1.9.M04.jar:1.9.M04]
at org.neo4j.server.Bootstrapper.main(Bootstrapper.java:49) [neo4j-server-1.9.M04.jar:1.9.M04]
Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.impl.nioneo.xa.NeoStoreXaDataSource@19de0b5e' was successfully initialized, but failed to start. Please see attached cause exception.
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:494) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.transaction.XaDataSourceManager.start(XaDataSourceManager.java:128) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:488) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
... 12 common frames omitted
Caused by: java.lang.IllegalStateException: Unable to lock store [/tmp/neo4j-community-1.9.M04/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.checkStorage(CommonAbstractStore.java:173) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.<init>(CommonAbstractStore.java:115) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.AbstractDynamicStore.<init>(AbstractDynamicStore.java:72) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.DynamicStringStore.<init>(DynamicStringStore.java:49) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newDynamicStringStore(StoreFactory.java:120) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newRelationshipTypeStore(StoreFactory.java:126) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.attemptNewNeoStore(StoreFactory.java:103) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newNeoStore(StoreFactory.java:92) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.impl.nioneo.xa.NeoStoreXaDataSource.start(NeoStoreXaDataSource.java:240) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:488) ~[neo4j-kernel-1.9.M04.jar:1.9.M04]
... 15 common frames omitted
3/14/13 9:17:02 AM org.neo4j.server.CommunityBootstrapper SEVERE: 
java.lang.RuntimeException: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.impl.transaction.XaDataSourceManager@40bc5596' was successfully initialized, but failed to start. Please see attached cause exception.
at org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:257)
at org.neo4j.kernel.EmbeddedGraphDatabase.<init>(EmbeddedGraphDatabase.java:88)
at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:82)
at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:205)
at org.neo4j.kernel.impl.recovery.StoreRecoverer.recover(StoreRecoverer.java:110)
at org.neo4j.server.preflight.PerformRecoveryIfNecessary.run(PerformRecoveryIfNecessary.java:59)
at org.neo4j.server.preflight.PreFlightTasks.run(PreFlightTasks.java:70)
at org.neo4j.server.AbstractNeoServer.runPreflightTasks(AbstractNeoServer.java:277)
at org.neo4j.server.AbstractNeoServer.start(AbstractNeoServer.java:157)
at org.neo4j.server.Bootstrapper.start(Bootstrapper.java:86)
at org.neo4j.server.Bootstrapper.main(Bootstrapper.java:49)
Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.impl.transaction.XaDataSourceManager@40bc5596' was successfully initialized, but failed to start. Please see attached cause exception.
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:494)
at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104)
at org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:244)
... 10 more
Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.impl.nioneo.xa.NeoStoreXaDataSource@19de0b5e' was successfully initialized, but failed to start. Please see attached cause exception.
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:494)
at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104)
at org.neo4j.kernel.impl.transaction.XaDataSourceManager.start(XaDataSourceManager.java:128)
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:488)
... 12 more
Caused by: java.lang.IllegalStateException: Unable to lock store [/tmp/neo4j-community-1.9.M04/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.checkStorage(CommonAbstractStore.java:173)
at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.<init>(CommonAbstractStore.java:115)
at org.neo4j.kernel.impl.nioneo.store.AbstractDynamicStore.<init>(AbstractDynamicStore.java:72)
at org.neo4j.kernel.impl.nioneo.store.DynamicStringStore.<init>(DynamicStringStore.java:49)
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newDynamicStringStore(StoreFactory.java:120)
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newRelationshipTypeStore(StoreFactory.java:126)
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.attemptNewNeoStore(StoreFactory.java:103)
at org.neo4j.kernel.impl.nioneo.store.StoreFactory.newNeoStore(StoreFactory.java:92)
at org.neo4j.kernel.impl.nioneo.xa.NeoStoreXaDataSource.start(NeoStoreXaDataSource.java:240)
at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:488)
... 15 more
3/14/13 9:17:02 AM org.neo4j.server.CommunityBootstrapper SEVERE: Failed to start Neo Server on port [7474] 
```

并得到所有这些错误。不知道该怎么做。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:38:02.980

是否有其他进程连接到同一个 neo4j 数据库？

*引起：java.lang.IllegalStateException: Unable to lock store [/tmp/neo4j-community-1.9.M04/data/graph.db/neostore.relationshiptypestore.db.names]，这通常是其他一些Neo4j内核的结果使用同一家商店运行。*

# c++ - C ++继承从子类调用父类变量的函数

> ID：15415304
> 
> 赞同：4
> 
> 时间：2013-03-14T16:46:56.140
> 
> 标签：c++, inheritance, parent, base, virtual-functions

在 C++ 中，我有一个基类 Packet，然后是很多子类 APIPacket、DataIOPacket 等。现在我想存储一个传入的数据包，因为我不知道类型，所以我将它存储在一个变量中：

```
Packet packet;
packet = DataIOPacket(); 
```

但是现在 DataIOPacket 有一个函数 getAnalogData(); 我不能这样做：

```
packet.getAnalogData(); 
```

由于包没有这个功能。在java中我认为这是可能的，因为存储在数据包中的对象的实际类型没有丢失（这是正确的吗？）。但是在 C++ 中，我的 DataIOPacket 被缩小为 Packed 并丢失了尚未在 Packet 中声明的功能。

您可以在 Packet 中为每个孩子的每个功能创建一个虚拟功能。但对我来说，这意味着 Packet 中有很多函数在大多数情况下不应该被调用。在 APIPacket 上调用 getAnalogData() 没有用。

这个问题是如何解决的？我找不到答案，但我觉得很多人必须遇到它。

您可以通过类型转换回 DataIOPacket 和 APIPacket 来做一些事情，但这似乎也不是一个干净的解决方案。

是否有图书馆可以解决我的问题？

Rgds,

罗尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:51:33.027

这在 java 和 c++ 中也是可能的。你需要做一个 dynamic_cast 来检查类型。

```
 Packet* packet;
packet = new DataIOPacket();

      DataIOPacket dio* = dynamic_cast<DataIOPacket*>(packet); 
            if (dio != 0)
            {
             dio->DoSomeChildMethodStuff();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:08:52.483

> *在 C++ 中，我`DataIOPacket`被缩小为 a`Packet`并丢失了尚未在其中声明的函数`Packet`*

发生这种情况是因为您将 type 的对象分配给 type`DataIOPacket`的对象`Packet`，这导致该对象被*切片*（请参阅[什么是对象切片？](https://stackoverflow.com/q/274626/1168156)）。

您实际上正在寻找的是一种如何在*运行时*找出您正在使用的对象是否已创建为`DataIOPacket`. 换句话说，您正在寻找[***Run-Time Type Identification (RTTI)***](http://en.wikipedia.org/wiki/Run-time_type_information)。

为避免*切片*，您需要有一个对象的引用或指针。然后将在*运行时*识别此对象的类型：

```
Packet* packet;
packet = new DataIOPacket(); 
```

now`packet`是指向对象类型`DataIOPacket`（*运行时*）的指针，但指针的类型是`Packet*`（*编译时*）。为了`DataIOPacket`在这个对象上调用特定于类的方法，编译器需要知道这个指针指向提供该方法的类型的对象。向下转换指向多态类型的指针的正确方法是使用，如果该对象无法转换为该类型`dynamic_cast`，则返回：`NULL`

```
Packet* packet;
packet = new DataIOPacket();
DataIOPacket* dataIOPacket = dynamic_cast<DataIOPacket*>(packet);
if (dataIOPacket)
    dataIOPacket->getAnalogData(); 
```

请注意，这也适用于具有自动存储持续时间的对象：

```
DataIOPacket packet;
Packet* pPacket = &packet;

DataIOPacket* dataIOPacket = dynamic_cast<DataIOPacket*>(pPacket);
if (dataIOPacket)
    dataIOPacket->getAnalogData(); 
```

在这种情况下，类型是决定是否成功`packet`的关键因素。`dynamic_cast`必须将对象创建为的实例`DataIOPacket`才能调用其`getAnalogData`上的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:05:08.527

好的，我像某些人建议的那样发现，必须进行动态转换表明我的结构是错误的。所以我要改变每种类型的数据包都有自己的存储空间。我将数据包存储在读取它们的位置，然后将它们传递到执行所有处理的主线程。实际上，保留类型更有意义。我的主线程不想弄清楚数据包的类型，因为它有不同的方式来处理不同的数据包。如果您需要我在问题中描述的行为，我认为动态演员是要走的路。但在这样做之前，你应该真正问问自己是否不应该改变结构。并且使用动态转换对对象不起作用，因为它们正在进行切片。它仅适用于指针。

# c++ - If 语句逻辑 - 对象数组

> ID：15415305
> 
> 赞同：0
> 
> 时间：2013-03-14T16:46:57.507
> 
> 标签：c++, if-statement

这发生在具有循环索引`i`和的两个循环内`j`。

`i`表示正在检查的对象`j`，是包含前五个 numshares 和另一个数组中的关联买家名称的数组。这是作业的一部分，所以我完全受制于这个结构。

*   `tArray`: 一个对象数组，包含每个对象的属性`numShares`并`buyerName`作为其属性。
*   `calcstring`: 包含买家姓名
*   `calctotal`：包含买方姓名的股份数量（`numshares`）

我正在查找具有最高 numshares 的五个买家的姓名并将它们存储为 1\. [0] 到 5\. [4]

但是，当逐步执行程序时，我意识到 say`numshares`比`calctotal[1]`迭代要高，而不是将每个元素向下推到数组中并插入`numshares`

该行`calctotal[j+1] = tVar`只是替换`calctotal[2]`而不是`calctotal[2]`向下移动到`calctotal[3]`等等

有谁知道我该如何解决这个问题？

我应该再说一遍，我不能使用向量等

```
if(tArray[i].numShares > calcTotal[j])
{
    int tVar = calcTotal[j];
    string tStr = calcString[j];

    calcTotal[j+1] = tVar;                  
    calcString[j+1] = tStr;

    calcTotal[j] = tArray[i].numShares;
    calcString[j] = tArray[i].buyerName;
    break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:54:23.667

要将数组中的所有内容向下移动，您需要从下向上循环并将数组中元素 j 之后的每个元素分配给它之前元素的值。如果 j 到达此循环时为 4，则不会有任何向下移动，因此它不会做任何事情，并且 calcTotal[4] 将被简单地覆盖。

```
if(tArray[i].numShares > calcTotal[j])
{
    for (int k = 4; k > j; k--) {
        calcTotal[k] = calcTotal[k - 1];
        calcString[k] = calcString[k - 1];
    }

    calcTotal[j] = tArray[i].numShares;
    calcString[j] = tArray[i].buyerName;
    break;
} 
```

# java - Java 泛型传入参数错误

> ID：15415310
> 
> 赞同：1
> 
> 时间：2013-03-14T16:47:06.410
> 
> 标签：java, generics, parameters

我收到类似于以下内容的编译错误：`visitParents(Class<C>)`某些类型的方法不适用于参数`(Class<MyClass>)`

MyClass 类似于： `public class SortableTable<T>{...}`

我不喜欢将 SortableTable 的类型参数更改为，`<C>`因为许多其他类会受到负面影响，也不能更改 visitParents 以将任何东西`Class<C>`作为参数。

任何潜在的解决方案将不胜感激。

* * *

谢谢你的建议。我会尽量做到具体而不用代码填充页面。

“visitParents(SortableTable.class, visitor);”行的错误描述：

Component 类型中的方法 visitParents(Class"<"C">", IVisitor"<"C,R">") 不适用于参数 (Class"<"SortableTable">", IVisitor"<"Component,无效">")

```
public class SelectAllFilterPanel extends Panel{private static final Logger log = Logger.getLogger(CorporateActionsPanel.class);

private static final long serialVersionUID = 1L;

public SelectAllFilterPanel(String id, final IModel<Boolean> model){
    super(id);

    add(new AjaxCheckBox("selectAll", model){

        private static final long serialVersionUID = 1L;

        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            // TODO - do this properly
            final AjaxRequestTarget requestTarget = target;

            IVisitor<Component, Void> visitor = new IVisitor<Component, Void>(){

                @Override
                public void component(Component component, IVisit visit) {
                    SortableTable<?> table = (SortableTable<?>)component;
                    table.visitChildren(CheckBox.class, new IVisitor<Component, Void>(){

                        @Override
                        public void component(Component component, IVisit visit) {
                            if (!component.getId().equals("selectAll")){
                                CheckBox checkbox = (CheckBox)component;
                                if (model.getObject())
                                    checkbox.setModelObject(true);
                                else 
                                    checkbox.setModelObject(false);
                                requestTarget.add(checkbox);
                            }
                        }
                    });
                    visit.stop();
                }
            };
            visitParents(SortableTable.class, visitor);
            target.add(this);
        }
    });
}} 
```

排序表类：

```
public class SortableTable<T> extends DataTable<T, String> {    private HeadersToolbar headerToolbar;   

@SuppressWarnings("unchecked")
public SortableTable(String tableId, SortableTableDataProvider<T> dataProvider, int maxRows) {
    this(tableId, dataProvider.getColumns(), dataProvider, maxRows);
}

@SuppressWarnings("unchecked")
public SortableTable(String tableId, List<IColumnConfig<T, String>> columns, ISortableDataProvider<T, String> dataProvider, int maxRows) {
    super(tableId, new java.util.LinkedList<IColumn<T, String>>(columns), dataProvider, maxRows);               

    addTopToolbar(new NavigationToolbar(this));                     
    addTopToolbar(headerToolbar = new HeadersToolbar(this, dataProvider));

    addBottomToolbar(new NoRecordsToolbar(this));

    setItemReuseStrategy(ReuseIfModelsEqualStrategy.getInstance());
}

public void setHeaderVisible(boolean visible) {
    headerToolbar.setVisibilityAllowed(visible);
}

public boolean isHeaderVisible() {
    return headerToolbar.isVisibilityAllowed();
}

@Override
protected Item<T> newRowItem(String id, int index, IModel<T> model)
{
    return new OddEvenItem<T>(id, index, model);
}} 
```

visitParent 签名为：

```
 public final <R, C extends MarkupContainer> R visitParents(final Class<C> parentClass,
    final IVisitor<C, R> visitor)
        {
            return visitParents(parentClass, visitor, new AllVisitFilter());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:08:46.337

你有`visitParents(Class<C>, Z.IVisitor<C,R>)`, `C=Component`和`R=Void`（因为`visitor`is `IVisitor<Component, Void>`）。但是`SortableTable.class`is的类型`Class<SortableTable>`是不可分配的，`Class<Component>`因为**[泛型不是协变的](https://stackoverflow.com/questions/2660827/java-generics-covariance)**。

如果您可以更改 的签名`visitParents`，请执行以下操作：

```
 <R, C extends MarkupContainer>
  R visitParents(Class<? extends C> parentClass, IVisitor<C, R> visitor) 
```

如果您无法更改 的签名`visitParents`，那么您需要让编译器相信您实际上拥有`Class<Component>`：

```
 @SuppressWarnings("unchecked")
 Class<Component> klass = (Class<Component>)(Class<?>)SortableTable.class;
 visitParents1(klass, visitor); 
```

虽然后一种方法在技术上并不安全，但它之所以有效，是因为在运行时[**泛型类型会被擦除**](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:26:08.280

我找到了一个解决方案：

在实例化访问者时，我将第一个类型（组件）更改为 SortableTable（它是组件的子级），因此方法 visitParent 现在可以正常编译。问题是 visitParents() 中的第二个参数而不是第一个参数。

```
 IVisitor<SortableTable, Void> visitor = new IVisitor<SortableTable, Void>(){

                @Override
                public void component(SortableTable component, IVisit visit) {
                    //SortableTable<?> table = (SortableTable<?>)component;
                    component.visitChildren(CheckBox.class, new IVisitor<Component, Void>(){

                        @Override
                        public void component(Component component, IVisit visit) {
                            if (component.getId().equals("selectAll")){
                                CheckBox checkbox = (CheckBox)component;
                                // TODO fix reference to client selection model
                                if (checkbox.getModelObject() && !clientSelectionModel.getObject())
                                    checkbox.setModelObject(false);
                                requestTarget.add(checkbox);
                                visit.stop();
                            }
                        }
                    });
                    visit.stop();
                }
            };
            visitParents(SortableTable.class, visitor); 
```

谢谢你们的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:14:30.163

我不确定我是否理解正确。但是你总是可以使用`Class<? extends Object>`which 可以接受任何类型的参数

# c - 我们如何从共享内存中分配动态内存？

> ID：15415315
> 
> 赞同：0
> 
> 时间：2013-03-14T16:47:34.950
> 
> 标签：c, shared-memory, matrix-multiplication

如果我最终得到一个指向 shmget 中提到的大小的共享内存的指针。如果该大小是在运行时确定的。例如对于包含将在运行时确定的矩阵的结构。我得到一个指向该结构的指针。那么如何为单个矩阵分配内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:54:00.570

您必须自己管理共享内存。你得到了一大块，然后*你*必须把它打包并分发出去并自己跟踪它 - 或者使用某种方便的图书馆。

# tfs - TFS 2010 - 无基础合并和如何禁用自动解决冲突？

> ID：15415319
> 
> 赞同：0
> 
> 时间：2013-03-14T16:47:51.083
> 
> 标签：tfs, merge, conflict, resolve

我们需要在两个发布版本之间进行毫无根据的合并。我们需要一个拥有 2.0.1 版本的系统和另一个拥有 5.0.6 版本的客户 2.0.1 中修复了一个错误，我们需要在 5.0.6 版本中合并，但这两个版本不是分支。

所以我会执行 tf merge /bassless release1 release2 /recursive。

但是这两个版本之间有很多差异，我只需要在这两个版本之间创建一个链接（分支关系），忽略所有冲突。

恐怕这个毫无根据的合并操作一直在对某些文件进行静默解决冲突……我不想要这个。我想保留目标文件。

是否有另一种安全的方法来执行此过程？有没有办法禁用静默自动解决冲突？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:47:45.320

命令如下：

```
tf merge /recursive /version:Cchangesetnumber~ Ctowhichchangesetnumber /baseless sourcebranch targetbranch 
```

Cchangesetnumber~ Ctowhichchangesetnumber – 例如，如果我们被要求获取

一个。将变更集# 11367 放到候选发布分支中，那么我们的命令将如下所示：

```
tf  merge /recursive /version:C11367~C11367 /baseless C:\TFS\Development C:\TFS\Release_Candidate. 
```

湾。将变更集# 11367 和 11368 转移到发布候选分支中，那么我们的命令将如下所示：

```
tf  merge /recursive /version:C11367~C11368 /baseless C:\TFS\Development C:\TFS\Release_Candidate 
```

C。将变更集# 11367 和 11378 转移到发布候选分支中，那么我们的命令将如下所示：

```
 tf  merge /recursive /version:C11367~C11367 /baseless C:\TFS\Development C:\TFS\Release_Candidate 
```

和

```
 tf  merge /recursive /version:C11378~C11378 /baseless C:\TFS\Development C:\TFS\Release_Candidate 
```

所有这些都从“Visual Studio X64 win 64 命令提示符”运行

# java - Switch 在第二次尝试之前不接受输入

> ID：15415323
> 
> 赞同：1
> 
> 时间：2013-03-14T16:48:04.677
> 
> 标签：java, while-loop, switch-statement, do-while

我正在为一个班级做一个项目，并且可以使用一些帮助来弄清楚我的代码为什么会这样。该任务是提示用户输入两个整数并选择一个算术运算来对它们执行，同时避免“除以零”的情况。这是我的代码的一部分：

```
import java.util.Scanner;

public class Program3 
{

public static void main(String[] args) 
{

    double operandOne;
    double operandTwo;
    char newLine = '\n';
    Scanner input = new Scanner (System.in);

    //"input" is an object which calls for input from the keyboard.

        System.out.print("This program will request values for two operands ");
        System.out.println("and perform an arithmetic operation of your choice on them.");
        System.out.println(newLine + "Please enter a value for the first operand.");
        operandOne = input.nextDouble();

        System.out.println("Thank you.  Please enter a value for the second operand.");
        operandTwo = input.nextDouble();

        // This section explains what's going on to the user and requests input for the operands.

        if ( operandTwo == 0 )
        {

            System.out.print("You will not be able to perform division if the ");
            System.out.println("second operand is zero!");
            System.out.println(newLine + "Please choose an option:");
            System.out.println("Type 1 to select a new value for the second operand.");
            System.out.println("Type 2 to continue with a value of zero.");

            // You can't divide by zero!  Are you SURE you want to use that number?

            int reallyWantZero = input.nextInt();
            do
            {   
                System.out.println(newLine + "You must type either 1 or 2 and press enter.");
                reallyWantZero = input.nextInt();
            }

            while ((reallyWantZero < 1) || (reallyWantZero > 2));
            {
                switch (reallyWantZero)
            {
                case 1:
                    System.out.println(newLine + "Please enter a new value for the second operand.");
                    operandTwo = input.nextDouble();
                break;
                case 2:
                    System.out.println(newLine + "Okay, we will proceed.");
                    break;
            }
            }
        } 
```

当我执行代码时，我得到以下信息：

“请为第一个操作数输入一个值。

1

谢谢你。请输入第二个操作数的值。

0

如果第二个操作数为零，您将无法执行除法！

请选择一个选项：

键入 1 为第二个操作数选择一个新值。键入 2 以使用零值继续。

2

您必须输入 1 或 2 并按 Enter。

2

好，我们继续。”

我不明白为什么第一次输入 2 to continue 不接受，但第二次接受。谁能帮助解释发生了什么以及如何纠正它？

提前致谢！

编辑：

我将代码修改为：

好的，我明白你的意思，但它似乎不起作用。我将代码修改为：

```
while ((reallyWantZero < 1) || (reallyWantZero > 2));
                {
                    System.out.println(newLine + "You must type either     1 or 2 and press enter.");
                    reallyWantZero = input.nextInt();
                }               
                switch (reallyWantZero)
                {
                    case 1: 
```

但它的行为仍然完全相同。另外，如果我输入了一个无效的数字，程序就会挂起并且根本不返回任何内容。

但它的行为仍然完全相同。另外，如果我输入了一个无效的数字，程序就会挂起并且根本不返回任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:50:50.917

因为一个`do...while`循环总是至少执行一次

```
do
{   
    System.out.println(newLine + "You must type either 1 or 2 and press enter.");
    reallyWantZero = input.nextInt();
} 
while ((reallyWantZero < 1) || (reallyWantZero > 2)); 
```

它在执行一次循环体后检查条件。所以它总是输入这部分代码，这意味着用户将被要求至少输入两次。您需要使用 while 循环，它会在进入之前检查循环的条件。

例如

```
while ((reallyWantZero < 1) || (reallyWantZero > 2)) {
    System.out.println(newLine + "You must type either 1 or 2 and press enter.");
    reallyWantZero = input.nextInt();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:55:20.743

为什么不只是

```
while (reallyWantZero != 1 && reallyWantZero != 2) {
    System.out.println("enter 1 or 2");
    reallyWantZero = input.nextInt();
}

//do stuff here with that info 
```

# deployment - Symfony 2 + 部署：bootstrap.php.cache(861) 错误 = Kernel->buildContainer()

> ID：15415324
> 
> 赞同：0
> 
> 时间：2013-03-14T16:48:05.060
> 
> 标签：deployment, symfony-2.1

我刚刚将我的 symfony 2.1.8 应用程序部署到服务器中，我有这个错误

```
0 app/bootstrap.php.cache(861): Symfony\Component\HttpKernel\Kernel->buildContainer() 
1 app/bootstrap.php.cache(573): Symfony\Component\HttpKernel\Kernel->initializeContainer() 
2 app/bootstrap.php.cache(616): Symfony\Component\HttpKernel\Kernel->boot() 
3 web/app.php(22): Symfony\Component\HttpKernel\Kernel->handle(Object(Symfony\Component\HttpFoundation\Request)) 
4 {main} 
```

当我使用 Capifony 部署我的应用程序时，没有问题。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:29:49.597

我找到了解决方案。

这是因为应用程序/日志不在 777 权限中。

希望它可以帮助一些人

# phpmyadmin - phpmyadmin - 完全没有风格

> ID：15415333
> 
> 赞同：1
> 
> 时间：2013-03-14T16:48:21.683
> 
> 标签：phpmyadmin

我已经安装了 phpmyadmin，当我打开时我看不到样式的一部分，我不知道为什么。我什至检查了一些css文件是否没有加载或其他东西。不是每件事都好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-09T15:43:41.457

这只是发生在我身上。原来当我最初将文件复制到 apache/htdocs (windows) 时，我正在剪切和粘贴。我停止了进程，然后决定复制。这导致文件无法完全传输。您应该重新下载文件，然后重新复制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:51:04.740

**注意：在获得更多信息之前，我将其发布为答案。**

我需要更多信息才能告诉你任何事情。我不确定以下任何一项是否适用于您，但这是我开始尝试调试此问题的地方。

首先，你用的是什么浏览器？

如果您使用的是**Firefox**，

1.  去安装[Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)插件。
2.  右键单击 phpMyAdmin 中的任意位置，然后单击“Inspect Element with Firebug”
3.  查看“**网络**”选项卡，然后单击“ **CSS** ” 。您可能需要先单击启用，然后刷新页面。

如果您使用的是**Chrome**，

1.  只需右键单击 phpMyAdmin 中的任意位置，然后单击“检查元素”。
2.  查看**网络**选项卡单击**样式表**。您可能需要刷新页面才能在此处查看任何内容。

如果您使用其他浏览器，请下载 Firefox 或 Chrome，因为我无法（不会尝试）帮助您。

从这里，您应该注意是否出现了除`200 OK`or以外的任何内容`304 Not Modified`。如果您看到任何带有 的条目`404 Not Found`，那么您至少还有一些事情要做。请用您发现的任何内容更新您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T14:45:46.950

这是一个与系统主义有关的问题。我在 Centos 网络面板上遇到了这个问题。我的sistemist朋友说这是关于映射的。

ps：一开始我会发现，如果你重命名 config.inc.php 并运行 /setup 路径，后端的 css 是可见的。但我不明白为什么会发生这个问题。

# jquery - 如何阻止动态元素在 Jquery/Jquery Mobile 中重新绑定？

> ID：15415338
> 
> 赞同：2
> 
> 时间：2013-03-14T16:48:33.593
> 
> 标签：jquery, events, jquery-mobile, binding

我通常会阻止多次绑定到这样的元素：

```
$(document)
    .find('.ui-input-search input')
    .filter(function() { return $(this).jqmData('bound') !== true; })
    .jqmData('bound', true)
    .on('change keyup', function (e) {
        //do sth
    }); 
```

当元素在页面上并且“准备好使用”时，效果很好。

问题是，我想对动态添加到页面的元素做同样的事情。在这些元素上，JQM 在某些情况下不会增强元素，因此绑定到正在创建的元素有时不起作用。

**问题：**
如果我不想在 pagehide 上取消绑定，我将如何更改上述代码以在设置绑定后也锁定元素？

所以我想做这样的事情：

```
$(document).on('change keyup','.ui-input-search input', function (e) {
  // bind to the selector only once
}); 
```

但由于 IE，我不能使用`:not`选择`.ui-input-search input:not(.bound)`器，所以我很好奇：

感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:18:19.117

There are several methods, you can find them in my other **[ARTICLE](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**, or find them **[HERE](https://stackoverflow.com/a/14469041/1848600)**. Just search for the chapter: **`Prevent multiple event triggering`**.

# Prevent multiple event triggering

Because of interesting jQM loading architecture, multiple event triggering is a constant problem. For example, take a look at this code snipet:

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#test-button').live('click', function(e) {
        alert('Button click');
    });    
}); 
```

Or you can test it here: [http://jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)

Each time you visit page **#index** click event will is going to be bound to button **#test-button**. There are few ways to prevent this problem:

## Solution 1:

Remove event before you bind it:

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#test-button').die().live('click', function(e) {
        alert('Button click');
    });    
}); 
```

In case you have different events bound to an object:

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#test-button').die('click').live('click', function(e) {
        alert('Button click');
    });    
}); 
```

## Solution 2:

Use a jQuery Filter selector, like this:

```
$('#carousel div:Event(!click)').each(function(){
    //If click is not bind to #carousel div do something
}); 
```

Because event filter is not a part of official jQuery framework it can be found here: [http://www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

In a nutshell, if speed is your main concern then **Solution 2** is much better then Solution 1\.

## Solution 3:

A new one, probably an easiest of them all.

```
$(document).on('pagebeforeshow', '#page', function(event){  
    if(event.handled !== true) // This will prevent event triggering more then once
    {
        // Some code
        event.handled = true;
    }
    return false;                
}); 
```

Tnx to [sholsinger](https://stackoverflow.com/a/14469041/1848600) for this solution: [http://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/](http://sholsinger.com/archive/2011/08/prevent-jquery-live-handlers-from-firing-multiple-times/)

**pageChange event quirks - triggering twice**

Sometimes pagechange event can trigger twice and it does not have anything to do with the problem mentioned before.

The reason the pagebeforechange event occurs twice is due to the recursive call in changePage when toPage is not a jQuery enhanced DOM object. This recursion is dangerous, as the developer is allowed to change the toPage within the event. If the developer consistently sets toPage to a string, within the pagebeforechange event handler, regardless of whether or not it was an object an infinite recursive loop will result. The pageload event passes the new page as the page property of the data object (This should be added to the documentation, it's not listed currently). The pageload event could therefore be used to access the loaded page.

In few words this is happening because you are sending additional parameters through pageChange.

Example:

```
<a data-role="button" data-icon="arrow-r" data-iconpos="right" href="#care-plan-view?id=9e273f31-2672-47fd-9baa-6c35f093a800&amp;name=Sat"><h3>Sat</h3></a> 
```

# Conclusion

Solution under number 3 is your best bet. Binding and unbinding can be process demanding.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:52:39.827

> 但我不能使用 :not 选择器 .ui-input-search input:not(.bound) 因为 IE，所以我很好奇：

引用[浏览器支持页面](http://jquery.com/browser-support/)：

> 无论浏览器是否支持 CSS 选择器，所有列在[api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)的选择器在作为 jQuery 函数的参数传递时都将返回正确的元素集。

`:not`无论浏览器的 CSS 引擎是否支持选择器，您都可以在使用 jQuery 形成集合时使用选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:52:37.080

我通常使用命名空间。

```
$('.selector').unbind('change.namespace').bind('change.namespace', function () { 
```

因为我使用命名空间来绑定它，所以我可以从具有该命名空间的所有元素中删除它，而不必担心删除其他处理程序。

# php - 我无法更改 PHP 上的字符串编码

> ID：15415341
> 
> 赞同：1
> 
> 时间：2013-03-14T16:48:42.253
> 
> 标签：php

```
<?php
   $str = "Text";
   $str = mb_convert_encoding($str, "UTF-8", mb_detect_encoding($str));
   echo mb_detect_encoding($str);
?> 
```

这段代码给了我“ASCII”作为输出。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:50:49.687

您的字符串没有 UTF-8 特定字符，只有 ASCII。

添加一个：

```
$str = "Text È";
$str = mb_convert_encoding($str, "UTF-8", mb_detect_encoding($str));
echo mb_detect_encoding($str); 
```

您`UTF-8`现在将获得输出，如[本演示](http://viper-7.com/SaXgRT)中所示。

但是，您不需要运行转换来获取`UTF-8`输出，`mb_detect_encoding()`可以发现字符串`UTF-8`没有这一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:51:30.510

我的假设是，因为 ASCII 是 UTF-8 的子集，所以纯 ASCII “转换”为 UTF-8 将与 ASCII 无法区分。

# mysql - sql中的通用限定符

> ID：15415343
> 
> 赞同：1
> 
> 时间：2013-03-14T16:48:44.520
> 
> 标签：mysql, sql

我的数据库类有一个项目，可以为一组库创建一个数据库。我正在使用 MySQL 5.2。我必须编写一个查询来查找保存每本书副本的两个图书馆。这些是创建表语句

```
Create table books(  
    booknum VARCHAR (10),  
    btitle VARCHAR (),  
    bpages SMALLINT,  
    bcdate DATE,  
    primary key (booknum))  

Create table copies(  
    cnum VARCHAR(12),  
    cprice DECIMAL (7,2),  
   cpurdate DATE,  
    booknum VARCHAR(10),  
    primary key (cnum),  
    foreign key (booknum)  
    references book(booknum)) 

Create table library(  
    libnum  VARCHAR(7),  
    libname VARCHAR (40),  
    streetNumber    VARCHAR (8),  
    streetName VARCHAR (20),  
    city VARCHAR (20),  
    state VARCHAR (2),  
    zipcode VARCHAR (5),  
    primary key (libnum)) 
```

我相信我需要一个类似的东西

```
SELECT libname FROM libraries WHERE  NOT EXISTS
(SELECT * FROM copies C, books B WHERE C.booknum=B.booknum) 
```

但这不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:59:50.247

您的数据库设计不完整。您需要添加另一个表来定义副本和库之间的多对多关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:15:54.060

**通过将库中的外键添加到副本表来更新表后...**

```
SELECT b.btitle, l.libname from copies c left join books b on b.booknum = c.booknum
    left join l.libnum = c.libnum 
```

# ruby-on-rails - Ruby on Rails：不再创建迁移脚本

> ID：15415348
> 
> 赞同：0
> 
> 时间：2013-03-14T16:49:01.807
> 
> 标签：ruby-on-rails, ruby, model, migration, nameerror

我已经使用 Rails 3 个月了，但直到现在还没有遇到这个问题。我目前正在学习 Micharl Hartls 教程，到目前为止一切正常，但突然（第 11 章）我无法再创建迁移文件。

当输入“rails g model Name field1:type”时，我没有在控制台中看到通常的“create db/migrate....”状态行，而是大量的位置链接（C:/Programs/Railsinstaller/Ruby1\. 9.3/lib/ruby/gems/...activesupport”。

在顶部它说“阻止 cunstantize：未初始化的常量缓存器 8NameError）

并且没有在 db 文件夹中创建迁移文件。我测试了运行良好的“rails g 控制器”命令。在其他项目中创建新模型/迁移也确实有效。但是在这个特定的“sample_app”中创建迁移不再可能，我只是不知道为什么。我在网上也找不到有关此问题的任何信息。我希望你们熟悉这个问题并能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T20:58:49.183

跑

```
rake secret 
```

并将生成的密钥放在 config/initializers/secret_token.rb 文件中，如下所示：

```
RAILS_APP_NAME::Application.config.secret_token = 'YOUR_RAKE_GENERATED_KEY' 
```

通过您的应用名称更改 RAILS_APP_NAME。

并在文件中

```
config/initializers/session_store.rb 
```

确保你有这样的一行：

```
RAILS_APP_NAME::Application.config.session_store :cookie_store, key: '_RAILS_APP_NAME_session' 
```

# c++ - C++ 运行时错误中的字符串

> ID：15415349
> 
> 赞同：1
> 
> 时间：2013-03-14T16:49:05.270
> 
> 标签：c++, string, file

我正在开发一个`string`从文件中读取 a 的 c++ 程序。在末尾`string`有一些数字。我的任务是显示`nth`字符串末尾的数字。

这是我的代码。该程序接受文件的路径：

```
#include<iostream>
#include<fstream>
#include<string>
#include<stdlib.h>

using namespace std;

int main(int argc,char** argv)
{
    ifstream file;
    int num,i=0,pos;    
    std::string lineBuffer;
    file.open(argv[1],ios::in) ;  
    while (!file.eof()) 
      {
         getline(file, lineBuffer);        
         if (lineBuffer.length() == 0)
              continue; //ignore all empty lines
         else 
           {
             pos=0;            
            std::string str1("");
            std::string str2("");
            std::string final("");
            std::string number("");
            std::string output("");
                while(pos!=(-1))
                {
                  pos=lineBuffer.find(" ");                               
                  str2=lineBuffer.substr(0,1);
                  lineBuffer=lineBuffer.substr(pos+1);
                  final+=str2;
                  i++;
                }
                number=final.substr((i-1));
                num=atoi(number.c_str());
                output=final.substr(i-(num+1),1);
                cout<<output;                            
           }    
      }
      file.close();
       return 0;
} 
```

我的程序为文件中的第一行提供了正确的输出。但在那之后它给了我一个运行时错误。我不知道为什么会这样。

我发送到终端的文件包含：

```
a b c d 4
b e f g 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:56:03.823

请在调试器中运行您的程序以了解它正在执行的特定行为。看看它与您的预期有何不同。

`gdb`可能是最简单的，您可以通过谷歌搜索“gdb cheatsheet”左右开始。记得用`-g`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:01:47.377

您应该声明`pos`as`size_t`而不是`int`since `std::string::find()`returns `size_t`。

此外，当`std::string::find()`不匹配时，它会返回`string::npos`而不是`-1`. 因此，您应该比较`pos`而`string::npos`不是整数文字`-1`。

# c - 为空结构启用警告

> ID：15415351
> 
> 赞同：5
> 
> 时间：2013-03-14T16:49:06.533
> 
> 标签：c, gcc, struct, standards

我有一个关于 C 中的空结构的问题。据我阅读标准可以看出，它们似乎是不允许的：

6.2.5-20

> —*结构类型*描述了一组顺序分配的**非空**成员对象（在某些情况下，还描述了一个不完整的数组），每个对象都有一个可选的指定名称和可能的不同类型。

因此，在尝试编译以下内容时并不奇怪：

```
struct foo
{
}; 
```

在 MS VS 中，抛出了一些错误：

> 错误 C2016：C 要求结构或联合至少有一个成员

但是，在编译相同的代码时`gcc -Wall -Werror`没有看到任何错误。所以...

1.  我是否正确阅读了 C 中不允许这样做的**规范**？（更令人惊讶的是，微软做对了吗？！）
2.  是否有可以传递的选项`gcc`以使其捕获此问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:58:55.320

1.  是的，没有成员的结构类型在 C 中无效。

2.  `-Werror -pedantic`with`gcc`将停止翻译。

# ruby-on-rails - Paloma gem 防止仅标头响应

> ID：15415352
> 
> 赞同：2
> 
> 时间：2013-03-14T16:49:06.323
> 
> 标签：ruby-on-rails, http-headers, gem, partial-views

我们的应用程序使用[Paloma gem](https://github.com/kbparagua/paloma)来监督每个请求的 JavaScript 执行。这通常效果很好，直到您尝试进行仅标头响应。例如，这是我们控制器中更新操作的代码：

```
class EmployeesController < InternalController

  def update
    respond_to do |format|
      format.any do
        head :ok
      end
    end
  end

end 
```

很简单。它不需要使用任何视图或模板来生成此响应。对？然后帕洛玛参与其中......而不是一个漂亮、简单的 HTTP 200 OK 我们得到一个`ActionView::MissingTemplate`异常，并带有以下错误消息和跟踪：

```
Missing partial paloma/callback_hook with {:locale=>[:en], :formats=>[:all], :handlers=>[:erb, :builder, :slim, :coffee, :haml, :rabl]}.
Searched in: * "/Users/<username>/Development/<app name>/app/views" * "/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/jasminerice-0.0.10/app/views" * "/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/paloma-2.0.1/app/views" * "/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.14.1/app/views" * "/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/app/views" * "/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/paloma-2.0.1/app/views"
Backtrace:
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/path_set.rb:58:in `find'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/lookup_context.rb:109:in `find'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:339:in `find_template'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:333:in `find_partial'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:222:in `render'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/renderer/renderer.rb:41:in `render_partial'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/renderer/renderer.rb:15:in `render'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.12/lib/action_view/helpers/rendering_helper.rb:24:in `render'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/haml-4.0.0/lib/haml/helpers/action_view_mods.rb:12:in `render_with_haml'
  /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/paloma-2.0.1/lib/paloma/action_controller_filters.rb:23:in `update_callback'
  ...
  (further lines snipped) 
```

令人困惑的是，当我去查看已安装的 gem 时，它正在寻找的部分就在它的所有荣耀中，所以似乎没有任何理由说明 Rails 不应该能够找到它：

```
Maple:~ <username>$ ls -l /Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/paloma-2.0.1/app/views/paloma
total 8
-rw-rw-r--  1 <username>  staff  1323 Mar 11 09:10 _callback_hook.html.erb 
```

对于返回 HTTP 状态为 200 以及响应正文的其他请求不会发生这种情况，它仅发生在通过 Rails`head`方法的仅标头响应中。

我是否在 Paloma gem 中发现了错误？还是 Rails 中的错误？或者有什么我应该调整以允许找到视图？为什么 Rails 首先要搜索视图以生成仅标题响应？任何人都可以提供的任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-04T06:36:11.597

> 如果您希望 Paloma 不在特定的 Rails 控制器操作中执行，您需要将 false 作为 Paloma 参数传递。
> 
> ```
> def edit
>   @user = User.find params[:id]
>   js false
> end 
> ```

[https://github.com/kbparagua/paloma#preventing-paloma-execution](https://github.com/kbparagua/paloma#preventing-paloma-execution)

# android - 为什么Android软键盘出现时会出现？

> ID：15415353
> 
> 赞同：6
> 
> 时间：2013-03-14T16:49:13.440
> 
> 标签：android, android-softkeyboard

谁能解释一下为什么软键盘出现和消失的原因？

我有一个带有一堆不同控件的布局，主要是 EditTexts 和 Buttons。当我第一次显示该页面时，布局顶部的 EditText 具有焦点，软键盘覆盖了屏幕底部的 45%

我认为键盘在那里是因为 EditText 具有焦点，所以我决定在页面底部的按钮上通过 . . .

```
 butDone.setFocusableInTouchMode(true);
  bResult = butDone.requestFocus(); 
```

...就在*setContentView()*之后。这可以使按钮获得焦点。按钮获得了焦点，EditText 不再有焦点，但键盘仍然存在。最终我摆脱了键盘通过

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

但显然我关于 EditText 有焦点的理论是错误的。那么有人可以解释一下关于是什么让键盘出现的“规则”，或者这些规则的链接吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:30:12.277

默认情况下`EditText`，如果您没有在布局的 XML 中定义有关焦点的任何内容，则第一个将获得焦点。

检查[此](https://stackoverflow.com/a/2611031/764822)答案以获取更多信息。如果您不希望键盘显示而不是关闭键盘，则应使用此解决方案。

# javascript - 多边形或/和信息窗口中的标记簇编号

> ID：15415357
> 
> 赞同：1
> 
> 时间：2013-03-14T16:49:32.970
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, markerclusterer, polygons

当您单击某个多边形时，您会得到带有这些多边形名称的信息窗口，可以在此信息窗口中放入此多边形内的标记数量（与标记簇编号相同）或将此编号（标记簇编号）放在多边形上？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="css2.css" media="screen" />
    <title>StanOnline</title>

<style type="text/css">
html, body, #map_canvas {
width:   100%;
height:  100%;
margin:  0;
padding: 0;
} 
.infowindow * {font-size: 90%; margin: 0}
</style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js">
    </script>
    <script type="text/javascript" src="http://geoxml3.googlecode.com/svn/trunk/ProjectedOverlay.js">
    </script>
    <script language="JavaScript">
<!--Show / Hide div dmenu-->
 function toggle(id) {
    var state = document.getElementById(id).style.display;
        if (state == 'block') {
            document.getElementById(id).style.display = 'block';
        } else {
            document.getElementById(id).style.display = 'none';
        }
    } 
</script>

    <script type="text/javascript">
var gmarkers = [];
function makeLink() {} ;
var bounds = new google.maps.LatLngBounds();
var geoXml = null;
var geoXmlDoc = null;
var map = null;
var myLatLng = null;
var myGeoXml3Zoom = true;
var sidebarHtml = "";
var infowindow = null;
var kmlLayer = null;
var preserveViewport = true;
var filename = "http://mini.hr/stanonline/mo_bck.kml";
var icon = new    google.maps.MarkerImage("http://localhost/projekt/7stanonline/img/punkt.gif",
new google.maps.Size(32, 32), new google.maps.Point(0, 0),
new google.maps.Point(16, 32));
var currentPopup;

function addMarker(lat, lng, info) {
var pt = new google.maps.LatLng(lat, lng);
bounds.extend(pt);

var marker = new google.maps.Marker({
    position: pt,
    icon: icon,
    //map: map
});

var popup = new google.maps.InfoWindow({
    content: info,
    maxWidth: 200
});

google.maps.event.addListener(marker, "click", function() {
    if (currentPopup != null) {
        currentPopup.close();
        currentPopup = null;
    }
    popup.open(map, marker);
    currentPopup = popup;
});

google.maps.event.addListener(popup, "closeclick", function() {
    currentPopup = null;
});

gmarkers.push(marker);

 }

 function MapTypeId2UrlValue(maptype) {
   var urlValue = 'm';
   switch(maptype){
   case google.maps.MapTypeId.HYBRID:    urlValue='h';
                    break;
  case google.maps.MapTypeId.SATELLITE: urlValue='k';
                    break;
  case google.maps.MapTypeId.TERRAIN:   urlValue='t';
                    break;
  default:
  case google.maps.MapTypeId.ROADMAP:   urlValue='m';
                    break;
}
return urlValue;
 }

function initialize() {
    myLatLng = new google.maps.LatLng(45.345537,14.439621);
  // these set the initial center, zoom and maptype for the map 
  // if it is not specified in the query string
  var lat = 45.345537;
  var lng = 14.439621;
  var zoom = 13;
  var maptype = google.maps.MapTypeId.ROADMAP;

  // If there are any parameters at eh end of the URL, they will be in  location.search
  // looking something like  "?marker=3"

  // skip the first character, we are not interested in the "?"
  var query = location.search.substring(1);

  // split the rest at each "&" character to give a list of  "argname=value"  pairs
  var pairs = query.split("&");
  for (var i=0; i<pairs.length; i++) {
    // break each pair at the first "=" to obtain the argname and value
var pos = pairs[i].indexOf("=");
var argname = pairs[i].substring(0,pos).toLowerCase();
var value = pairs[i].substring(pos+1).toLowerCase();

    // process each possible argname  -  use unescape() if theres any chance of spaces
    if (argname == "id") {id = unescape(value);}
    if (argname == "filename") {filename = unescape(value);}

    if (argname == "lat") {lat = parseFloat(value);}
    if (argname == "lng") {lng = parseFloat(value);}
    if (argname == "zoom") {
  zoom = parseInt(value);
  myGeoXml3Zoom = false;
}
    if (argname == "type") {
// from the v3 documentation 8/24/2010
// HYBRID This map type displays a transparent layer of major streets on satellite images. 
// ROADMAP This map type displays a normal street map. 
// SATELLITE This map type displays satellite images. 
// TERRAIN This map type displays maps with physical features such as terrain and vegetation. 
      if (value == "m") {maptype = google.maps.MapTypeId.ROADMAP;}
      if (value == "k") {maptype = google.maps.MapTypeId.SATELLITE;}
      if (value == "h") {maptype = google.maps.MapTypeId.HYBRID;}
      if (value == "t") {maptype = google.maps.MapTypeId.TERRAIN;}

    }
  }
  if (!isNaN(lat) && !isNaN(lng)) {
    myLatLng = new google.maps.LatLng(lat, lng);
  }
            var myOptions = {
                zoom: zoom,
                center: myLatLng,
                // zoom: 5,
                // center: myLatlng,
                mapTypeId: maptype
            };
            map = new google.maps.Map(document.getElementById("map_canvas"),
                  myOptions);
            infowindow = new google.maps.InfoWindow({});

 geoXml = new geoXML3.parser({
                map: map,
                infoWindow: infowindow,
                singleInfoWindow: true,
        zoom: myGeoXml3Zoom,

                afterParse: useTheData
            });

            geoXml.parse(filename);
    google.maps.event.addListener(map, "bounds_changed", makeSidebar);
    google.maps.event.addListener(map, "center_changed", makeSidebar);
    google.maps.event.addListener(map, "zoom_changed", makeSidebar);
  // Make the link the first time when the page opens
  makeLink();

  // Make the link again whenever the map changes
  google.maps.event.addListener(map, 'maptypeid_changed', makeLink);
  google.maps.event.addListener(map, 'center_changed', makeLink);
  google.maps.event.addListener(map, 'bounds_changed', makeLink);
  google.maps.event.addListener(map, 'zoom_changed', makeLink);
  //php addmarkers
    addMarker(45.374632, 14.425697,'<b>93 Feet East</b><br/>150 Brick Lane,  London  E1 6RU&lt;br/&gt;7 Dec 2010 : Jenny &amp; Johnny&lt;br/&gt;');
addMarker(45.374632, 14.425697,'<b>93 Feet East</b><br/>150 Brick Lane, London  E1 6RU&lt;br/&gt;7 Dec 2010 : Jenny &amp; Johnny&lt;br/&gt;');
addMarker(45.348674, 14.386749,'<b>Adelphi Theatre</b><br/>The Strand, London  WC2E 7NA&lt;br/&gt;11 Oct 2010 : Love Never Dies');
addMarker(45.35051, 14.351883,'<b>Adelphi Theatre</b><br/>The Strand, London  WC2E 7NA&lt;br/&gt;11 Oct 2010 : Love Never Dies');
addMarker(45.319618, 14.501915,'<b>Albany, The</b><br/>240 Gt. Portland Street, London  W1W 5QU');
addMarker(45.339893, 14.475479,'<b>Aldwych Theatre</b><br/>Aldwych, London  WC2B 4DF&lt;br/&gt;11 Oct 2010 : Dirty Dancing');
addMarker(45.343513, 14.436684,'<b>Alexandra Palace</b><br/>Wood Green, London  N22&lt;br/&gt;30 Oct 2010 : Lynx All-Nighter');
addMarker(45.330736, 14.434211,'<b>Stan F.La Guardia 10</b><br/>Najbolji stan na svijetu');
addMarker(45.385431, 14.357071,'<b>sdas</b><br/>dfsada');

  };

function kmlPgClick(pm) {
if (geoXml.docs[0].placemarks[pm].polygon.getMap()) {
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");
} else {
  geoXmlDoc.placemarks[pm].polygon.setMap(map);
  google.maps.event.trigger(geoXmlDoc.placemarks[pm].polygon,"click");
}
}
function kmlPlClick(pm) {
if (geoXml.docs[0].placemarks[pm].polyline.getMap()) {
   google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");
} else {
   geoXmlDoc.placemarks[pm].polyline.setMap(map);
   google.maps.event.trigger(geoXmlDoc.placemarks[pm].polyline,"click");
}
}

function kmlShowPlacemark(pm) {
if (geoXmlDoc.placemarks[pm].polygon) {
  map.fitBounds(geoXmlDoc.placemarks[pm].polygon.bounds);
//show only markers in polygon I zoomed to
for (var i=0;i<gmarkers.length;i++) {
  if   (google.maps.geometry.poly.containsLocation(gmarkers[i].getPosition(),geoXmlDoc.placemarks[pm].polygon)) {
     gmarkers[i].setMap(map);
  } else {
     gmarkers[i].setMap(null);
  }
 }

 } 

 for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (i == pm) {
   if (placemark.polygon) placemark.polygon.setMap(null);
   if (placemark.polyline) placemark.polyline.setMap(map);

 } else {
   if (placemark.polygon) placemark.polygon.setMap(map);
   if (placemark.polyline) placemark.polyline.setMap(null);
   }
}
}

function kmlColor (kmlIn) {
var kmlColor = {};
if (kmlIn) {
aa = kmlIn.substr(0,2);
bb = kmlIn.substr(2,2);
gg = kmlIn.substr(4,2);
rr = kmlIn.substr(6,2);
kmlColor.color = "#" + rr + gg + bb;
kmlColor.opacity = parseInt(aa,16)/256;
 } else {
// defaults
kmlColor.color = randomColor();
kmlColor.opacity = 0.45;
}
return kmlColor;
}

function randomColor(){ 
var color="#";
var colorNum = Math.random()*8388607.0;  // 8388607 = Math.pow(2,23)-1
var colorStr = colorNum.toString(16);
color += colorStr.substring(0,colorStr.indexOf('.'));
return color;
};

 var highlightOptions = {fillColor: "#b9b8a2", strokeColor: "#000000", fillOpacity: 0.4, strokeWidth: 10};
var highlightLineOptions = {strokeColor: "#000000", strokeWidth: 80};
function kmlHighlightPoly(pm) {
 for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (i == pm) {
   if (placemark.polygon) placemark.polygon.setOptions(highlightOptions);
   if (placemark.polyline) placemark.polyline.setOptions(highlightLineOptions);
 } else {
   if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
   if (placemark.polyline)   placemark.polyline.setOptions(placemark.polyline.normalStyle);
 }
 }
 }
function kmlUnHighlightPoly(pm) {
 for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 if (i == pm) {
   var placemark = geoXmlDoc.placemarks[i];
   if (placemark.polygon) placemark.polygon.setOptions(placemark.polygon.normalStyle);
   if (placemark.polyline) placemark.polyline.setOptions(placemark.polyline.normalStyle);
 }
 }
 }

function showAll() {

top.location="test2.php";
map.fitBounds(geoXmlDoc.bounds); //show all bounds
map.setZoom(13);

//marker.setMap(null); 
for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (placemark.polygon) placemark.polygon.setMap(map);
 if (placemark.polyline) placemark.polyline.setMap(map);
 }
}

function highlightPoly(poly, polynum) {
//    poly.setOptions({fillColor: "#0000FF", strokeColor: "#0000FF", fillOpacity: 0.3}) ;
  google.maps.event.addListener(poly,"mouseover",function() {
   var rowElem = document.getElementById('row'+polynum);
if (rowElem) rowElem.style.backgroundColor = "#b9b8a2"; //ovo je boja u sidebar-u
if (poly instanceof google.maps.Polygon) {
  poly.setOptions(highlightOptions);
} else if (poly instanceof google.maps.Polyline) {
  poly.setOptions(highlightLineOptions);
}
 });
google.maps.event.addListener(poly,"mouseout",function() {
var rowElem = document.getElementById('row'+polynum);
if (rowElem) rowElem.style.backgroundColor = ""; //pozadina nakon mouserover-a u sidebar-u
poly.setOptions(poly.normalStyle);
});
}  

// == rebuilds the sidebar to match the markers currently displayed ==
function makeSidebarPolygonEntry(i) {
var name = geoXmlDoc.placemarks[i].name;
 if (!name  || (name.length == 0)) name = "polygon #"+i;
// alert(name);
sidebarHtml += '<tr id="row'+i+'"><td onmouseover="kmlHighlightPoly('+i+');"  onmouseout="kmlUnHighlightPoly('+i+');"><a    href="javascript:kmlPgClick('+i+');">'+name+'</a> - <a  href="javascript:kmlShowPlacemark('+i+');">odaberi</a></td></tr>';

}
function makeSidebarPolylineEntry(i) {
var name = geoXmlDoc.placemarks[i].name;
if (!name  || (name.length == 0)) name = "polyline #"+i;
// alert(name);
sidebarHtml += '<tr id="row'+i+'"><td onmouseover="kmlHighlightPoly('+i+');"   onmouseout="kmlUnHighlightPoly('+i+');"><a  href="javascript:kmlPlClick('+i+');">'+name+'</a> - <a href="javascript:kmlShowPlacemark('+i+');">show</a></td></tr>';

}

function makeSidebar() {
 sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Prika&#382i sve     kvartove</a></td></tr>';
  var currentBounds = map.getBounds();
 // if bounds not yet available, just use the empty bounds object;
if (!currentBounds) currentBounds=new google.maps.LatLngBounds();
if (geoXmlDoc) {
 for (var i=0; i<geoXmlDoc.placemarks.length; i++) {
  if (geoXmlDoc.placemarks[i].polygon) {
    if (currentBounds.intersects(geoXmlDoc.placemarks[i].polygon.bounds)) {
      makeSidebarPolygonEntry(i);
    }
  }
 if (geoXmlDoc.placemarks[i].polyline) {
  if (currentBounds.intersects(geoXmlDoc.placemarks[i].polyline.bounds)) {
     makeSidebarPolylineEntry(i);
  }
}

}
}
sidebarHtml += "</table>";
 document.getElementById("sidebar").innerHTML = sidebarHtml;
}

function useTheData(doc){
var currentBounds = map.getBounds();
if (!currentBounds) currentBounds=new google.maps.LatLngBounds();
// Geodata handling goes here, using JSON properties of the doc object
sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';
//  var sidebarHtml = '<table>';
 geoXmlDoc = doc[0];
for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
// console.log(doc[0].markers[i].title);
var placemark = geoXmlDoc.placemarks[i];
if (placemark.polygon) {
  if (currentBounds.intersects(placemark.polygon.bounds)) {
    makeSidebarPolygonEntry(i);
  }
  var kmlStrokeColor = kmlColor(placemark.style.color);
  var kmlFillColor = kmlColor(placemark.style.fillcolor);
  var normalStyle = {
      strokeColor: kmlStrokeColor.color,
      strokeWeight: placemark.style.width,
      strokeOpacity: kmlStrokeColor.opacity,
      fillColor: kmlFillColor.color,
      fillOpacity: kmlFillColor.opacity
      };
  placemark.polygon.normalStyle = normalStyle;

  highlightPoly(placemark.polygon, i);
}
if (placemark.polyline) {
  if (currentBounds.intersects(placemark.polyline.bounds)) {
     makeSidebarPolylineEntry(i);
  }
  var kmlStrokeColor = kmlColor(placemark.style.color);
  var normalStyle = {
      strokeColor: kmlStrokeColor.color,
      strokeWeight: placemark.style.width,
      strokeOpacity: kmlStrokeColor.opacity
      };
  placemark.polyline.normalStyle = normalStyle;

  highlightPoly(placemark.polyline, i);
}

/*    doc[0].markers[i].setVisible(false); */
}
sidebarHtml += "</table>";
document.getElementById("sidebar").innerHTML = sidebarHtml;
};

function hide_kml(){

        geoXml.hideDocument();  

}

function unhide_kml(){

        geoXml.showDocument();  

}
function reload_kml(){
geoXml.hideDocument();
delete geoXml;
geoXml = new geoXML3.parser({
                map: map,
                singleInfoWindow: true,
                afterParse: useTheData,
                preserveViewport: true
});
geoXml.parse(filename); 

}

 function hide_polys_kml(){
 for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {
   geoXmlDoc.gpolylines[i].setMap(null);
 }
}

function unhide_polys_kml(){
 for (var i=0;i<geoXmlDoc.gpolylines.length;i++) {
   geoXmlDoc.gpolylines[i].setMap(map);
 }
}
 function load_kmlLayer() {
 kmlLayer = new google.maps.KmlLayer(filename);
 google.maps.event.addListener(kmlLayer, "status_changed", function() {
   document.getElementById('kmlstatus').innerHTML = "Kml Status:"+kmlLayer.getStatus();
 });
 kmlLayer.setMap(map);
}
function hide_kmlLayer() {
 kmlLayer.setMap(null);
}
function show_kmlLayer() {
 kmlLayer.setMap(map);
}

    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>

    <div id="dmenu">
        <div id="hidden"><a href="javascript:;" onclick="toggle('dmenu');">  <img src="img/x.png"></a></div>
        <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ODABERI KVART:
            <div id="sidebar">
    </div>
        </div>
            </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T00:29:11.487

最简单的方法是在“useTheData”函数中处理多边形，该函数在geoxml3处理后数据可用后运行，并将标记的数量放在单击多边形的信息窗口中。

在处理 Placemarks 数组以呈现侧边栏时，还要处理每个多边形以查看它包含多少个标记：

```
function useTheData(doc){
  var currentBounds = map.getBounds();
  if (!currentBounds) currentBounds=new google.maps.LatLngBounds();
  // Geodata handling goes here, using JSON properties of the doc object
  sidebarHtml = '<table><tr><td><a href="javascript:showAll();">Show All</a></td></tr>';
  geoXmlDoc = doc[0];
  for (var i = 0; i < geoXmlDoc.placemarks.length; i++) {
    var placemark = geoXmlDoc.placemarks[i];
    if (placemark.polygon) { // processing a polygon
      // polygon highlighting
      var kmlStrokeColor = kmlColor(placemark.style.color);
      var kmlFillColor = kmlColor(placemark.style.fillcolor);
      var normalStyle = {
          strokeColor: kmlStrokeColor.color,
          strokeWeight: placemark.style.width,
          strokeOpacity: kmlStrokeColor.opacity,
          fillColor: kmlFillColor.color,
          fillOpacity: kmlFillColor.opacity
          };
      placemark.polygon.normalStyle = normalStyle;

      highlightPoly(placemark.polygon, i);

      // new code  
      var markersInPoly = 0;
      for (var mrkr=0; mrkr<gmarkers.length; mrkr++) {
        if (google.maps.geometry.poly.containsLocation(gmarkers[mrkr].getPosition(),placemark.polygon)) {
            markersInPoly++;
        }
      }
      placemark.numMarkers = markersInPoly;
      if (currentBounds.intersects(placemark.polygon.bounds)) {
        makeSidebarPolygonEntry(i);
      }
      clickablePolygon(placemark, "contains "+markersInPoly+" markers"); 
    }
// rest of processing (note if you will never have polylines, you can remove that code). 
```

将标记数量添加到多边形信息窗口的函数：

```
function clickablePolygon(placemark, info) {
  google.maps.event.addListener(placemark.polygon, "click", function(e) {
    if (e && e.latLng) {
      infowindow.setPosition(e.latLng);
    } else {
      infowindow.setPosition(placemark.polygon.bounds.getCenter());
    }
    infowindow.setContent('<div class="geoxml3_infowindow"><h3>' + placemark.name +
               '</h3><div>' + info + '</div></div>');
    infowindow.open(map);
  });
} 
```

[概念的工作证明](http://www.geocodezip.com/geoxml3_test/mini_hr_stanonline_test_mouseover_20130314.html)

# image - 使用 EBImage 慢速图像加载 R

> ID：15415358
> 
> 赞同：3
> 
> 时间：2013-03-14T16:49:37.197
> 
> 标签：image, r, matlab, image-processing, imagemagick

与 matlab 相比，为什么使用 EBImage 包在 R 中加载大图像（~4MB）要慢得多？有没有办法解决？

**注意：**我很确定 EBImage 在某种程度上是 R 中 imagemagick 的包装器

在 R 中：

```
system.time(im <- readImage("~/Desktop/image.jpg"))
Elapsed time is 10.935 seconds. 
```

在 Matlab 中：

```
tic; 
im = imread('~/Desktop/image.jpg');
toc;
Elapsed time is 0.555381 seconds. 
```

* * *

使用光栅包

```
system.time(im <- brick('image.jpg')) 
```

耗时 0.264 秒

尝试获取值时

```
system.time(vals <- getValues(im)) 
```

需要 8.617 秒，所以我回到第一方，因为我需要提取一个频道

* * *

**编辑 2**

我最终使用了`jpeg`具有功能`readJPEG`并且性能比我在那里尝试过的任何东西都更好的包。

```
 system.time(x<-readJPEG('~/Desktop/image.jpg')) 
```

4mb 图像大约需要 1.431 秒并返回一个`n x m x 3`矩阵，矩阵的每一层都是一个颜色通道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:56:45.757

我不知道为什么它很慢，但请尝试使用`raster`。您可以绘制读取它的结果`image`

```
require( raster )
im <- brick("~/Desktop/image.jpg")
image( im , y = 1 )

# Or for a rgb coloured image...
plotRGB( im , r=1 , g = 2 , b = 3 )

# To extract values of each layer
vals <- getValues( im )

# A quicker way to get the values would be to use the as.matrix method for rasters
vals <- as.matrix( im ) 
```

Raster 可能会给您关于地理配准的警告，但它应该可以工作并且应该非常快。

# assembly - 如何使用 MASM 从数据结构中打印字段值

> ID：15415362
> 
> 赞同：0
> 
> 时间：2013-03-14T16:49:52.993
> 
> 标签：assembly, masm, cpu-registers

下面的 MASM 程序的目的是声明一个名为 Date 的简单结构。我将其字段（日、月、年）分别初始化为（09、01、1980）。我只想打印 Day 字段的值。

这是 MASM 代码：

```
.386
.model flat, stdcall
option casemap :none

include                         \masm32\include\windows.inc
include                         \masm32\include\kernel32.inc
include                         \masm32\include\masm32.inc
includelib                      \masm32\lib\kernel32.lib
includelib                      \masm32\lib\masm32.lib
include                         \masm32\include\msvcrt.inc
includelib                      \masm32\lib\msvcrt.lib

Date struct
    Day     DWORD               ?
    Month   DWORD               ?
    Year    DWORD               ?
Date ends

.data

PrintString                     BYTE                        "%s", 0

Monday                          Date                        <09, 1, 1980>

.data?

Pointer                         DWORD                       ?

.code

start:

    mov     ebx,                OFFSET Monday
    mov     ecx,                [ebx].Date.Day

    invoke  crt_printf,         PrintString,
                                [ebx].Date.Day

    ;invoke crt_printf,         PrintString,
    ;                           ecx

_quit:
    invoke  ExitProcess,        0

end start 
```

两个“crt_printf”调用失败。没有它们，程序成功完成。执行消息框，显示消息“myExe.exe 已停止工作”。我想我有一个“分段错误”的问题。所以我不明白为什么我的寄存器是空的，或者它可能不是存储这种数据的正确寄存器，或者我的方法可能不好。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:00:21.093

`Date.Day`是一个`DWORD`（即一个整数），所以你应该使用`%d`or`%u`而不是`%s`打印它。

此外，调用应该是：

```
invoke  crt_printf,         ADDR PrintString,
                            [ebx].Date.Day 
```

为了将地址`PrintString`作为第一个参数传递。

# bash - 将带有空格的命令作为函数参数传递

> ID：15415364
> 
> 赞同：3
> 
> 时间：2013-03-14T16:49:58.147
> 
> 标签：bash, function

我有一个函数可以检查上一个命令的退出状态，如果它不是 0（成功），则应该运行多个命令

```
revert()
{
if [ $? -ne 0 ]
then
  echo $#
  for c in $@
  do
    Execute command contained in passed string
  done
  echo "Operation failed. Reverting..."
  exit 1
fi
} 
```

我尝试调用此函数并得到以下输出：

```
revert "ls" "ls -la"
2
ls ls -la
auten.py  canReach.sh  chpass.sh  newUser.sh  popo  secdir.sh
auten.py  canReach.sh  chpass.sh  newUser.sh  popo  secdir.sh
No command '-la' found, did you mean:
 Command 'tla' from package 'tla' (universe)
-la: command not found 
```

显然空间是问题，我在这个页面上尝试了许多解决方案，但我得到的只是相同的输出和一个巨大的头痛。
所以在回复之前，请先试试我的功能，看看能不能得到想要的输出。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:54:54.150

使用`"$@"`引号，然后使用 . 执行命令`eval "$c"`。

```
revert()
{
    (( $? == 0 )) && return 0

    for c in "$@"
    do
        eval "$c"
    done

    echo "Operation failed. Reverting..." >&2
    exit 1
} 
```

您可以读`x && y`作“如果 x 则 y”。这是一种常见的脚本速记。第一行相当于：

```
if (( $? == 0 )); then return 0; fi 
```

# xml - => 语法在 XQuery 中是什么意思？

> ID：15415368
> 
> 赞同：1
> 
> 时间：2013-03-14T16:50:01.880
> 
> 标签：xml, xquery

在进行考试练习时难以理解 XML 中的“=>”语法。在网上搜索了它，但找不到它的含义。以下是考试中使用该语法的示例：

```
FOR $b IN //Brand
LET $cars :=
    (FOR $c IN //Car
    LET $cb := $c/@model => //Model/..
    WHERE $cb/@name = $b/@name
    RETURN $c)
LET $nr := COUNT($cars)
RETURN <Brand name={$b/@name}>{$nr}</Brand> 
```

目标是计算每个品牌的所有汽车。

这是我的尝试：

```
FOR $b IN //Brand
LET $cars := (
   FOR $c IN //Car
   WHERE $c/@Model = $b/Model/@name //Might not work to match against all models this way?
   RETURN ({c})
RETURN <Brand name={$b/@name}>COUNT($cars)</Brand> 
```

这是 XML 文档：

```
<!DOCTYPE CarsNStars [
<!ELEMENT CarsNStars (Brand*, Car*)>
<!ELEMENT Brand (Model*)>
<!ELEMENT Model (Year+)>
<!ELEMENT Year (#EMPTY)>
<!ELEMENT Car (#EMPTY)>
<!ATTLIST Brand
   name ID #REQUIRED
   country CDATA #IMPLIED>
<!ATTLIST Model
   name ID #REQUIRED>
<!ATTLIST Year
   year CDATA #REQUIRED
   horsePower CDATA #IMPLIED>
<!ATTLIST Car
   regNr ID #REQUIRED
   model IDREF #REQUIRED
   miles CDATA #REQUIRED>
]> 
```

编辑WHEN to WHERE，这显然是讲师的错字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:08:36.987

`=>`XQuery 规范（1.0 或 3.0）中都没有定义语法。也不是`WHEN`。

# sift - 如何使用 Feature2DExtractor 使用 EmguCV 2.4.0

> ID：15415369
> 
> 赞同：2
> 
> 时间：2013-03-14T16:50:05.223
> 
> 标签：sift, emgucv

我正在尝试使用 EmguCV 的 sift 库。我可以从图像中找到特征，即

```
SIFTDetector sift = new SIFTDetector();
var features = sift.DetectFeatures(); 
```

现在我想做一些像跟踪功能这样的事情，我认为它可能正在使用一些像“feature2Dtracker”这样的api......但我找不到如何使用或放置带有“Tdescriptor”的语法......

我已经从 EMGU 搜索了整个官方网站，只有一个旧的 SURF 示例……你知道吗？谢谢

# css - IE 9 div 高度 100% 不工作

> ID：15415370
> 
> 赞同：1
> 
> 时间：2013-03-14T16:50:06.250
> 
> 标签：css, html, internet-explorer-9, height

以下 html/css 在最新版本的 chrome 和 firefox 中看起来是正确的，但在 IE 9 中您会注意到不同之处。

`#links``#menu-bar`即使我已经仔细检查了包含链接 div 的所有元素都处于 100% 的位置，但它并没有扩展以占据整个高度。

`ul`背景颜色为紫色，当您检查元素时，您可以看到它`ul`占据了整个高度，`#links`但`#links`由于某种原因并没有填满菜单栏的高度。

任何想法为什么会发生这种情况或如何解决它？只要不涉及绝对定位，解决方法也可以。

注意：CSS 的第一个大块是重置。第二个（从 开始`#menu-bar`）是栏的样式。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
    <head>
        <title>Visitor Form</title>

        <meta http-equiv="content-type" content="text/html; charset=UTF-8">

            <style type="text/css">
            html, body, div, span, applet, object, iframe,
            h1, h2, h3, h4, h5, h6, p, blockquote, pre,
            a, abbr, acronym, address, big, cite, code,
            del, dfn, em, img, ins, kbd, q, s, samp,
            small, strike, strong, sub, sup, tt, var,
            b, u, i, center,
            dl, dt, dd, ol, ul, li,
            fieldset, form, label, legend,
            table, caption, tbody, tfoot, thead, tr, th, td,
            article, aside, canvas, details, embed, 
            figure, figcaption, footer, header, hgroup, 
            menu, nav, output, ruby, section, summary,
            time, mark, audio, video {
                margin: 0;
                padding: 0;
                border: 0;
                font-size: 12pt;
                /*font: inherit;*/
                vertical-align: baseline;
            }
            /* HTML5 display-role reset for older browsers */
            article, aside, details, figcaption, figure, 
            footer, header, hgroup, menu, nav, section {
                display: block;
            }
            html, body {
                line-height: 1;
                position: absolute;
                height: 100%;
                width: 100%;
            }
            ol, ul {
                list-style: none;
            }
            blockquote, q {
                quotes: none;
            }
            blockquote:before, blockquote:after,
            q:before, q:after {
                content: '';
                content: none;
            }
            table {
                border-collapse: collapse;
                border-spacing: 0;
            }

            #menu-bar {
                width: 100%;
                background-color: black;
                height: 4%;
                color: white;
                display: table;
                box-sizing:border-box;
                -moz-box-sizing:border-box; /* Firefox */
                -webkit-box-sizing:border-box; /* Safari */
            }

            #menu-title {
                display: table-cell;
                vertical-align: middle;
                height: 100%;
                padding: 0px 10px;
            }

            #links {
                width: 100%;
                height:100%;
                display: table;
                text-align:center;
            }

            #menu-bar ul {
                display: table-cell;
                vertical-align: middle;
                margin: 0 auto;
                height: 100%;
            }

            #menu-bar li {
                background-color: #522D80;
                display: inline-block;
                margin-right: 1em;
                height: 100%;
                padding: 0px 10px;
            }

            #menu-bar a {
                position: relative;
                top: 25%;
                color: white;
            }

            #menu-bar li.selected {
                background-color: #F66733;
            }

            #content {
                height: 96%;
                width: 100%;
                box-sizing:border-box;
                -moz-box-sizing:border-box; /* Firefox */
                -webkit-box-sizing:border-box; /* Safari */
            }
        </style>
    </head>
    <body>

        <div id="menu-bar">
            <span id="menu-title">Facilities</span>

            <div id="links">
                <ul>
                    <li><a href="pages/visitors/visitor_form.php">Visitors</a></li>
                    <li><a href="pages/licensing/license_form.php">Licensing</a></li>
                    <li><a href="pages/equipment/equipment_form.php">Equipment</a></li>
                    <li><a href="pages/rooms/room_form.php">Rooms</a></li>
                    <li><a href="pages/office_maps/office_maps.php">Office Maps</a></li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T05:53:40.167

我最终使用 javascript hack 将元素的大小调整为其父容器的宽度。在我附加的窗口调整大小事件中：

```
$('#links li').css('height', $('#menu-bar').height()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:44:39.027

将#link 的溢出设置为隐藏或滚动。

```
#link{
   overflow: hidden;
 } 
```

或者

```
#link{
   overflow:scroll;
  } 
```

# date - 尝试确定星期几的第一天取决于使用 Dart

> ID：15415372
> 
> 赞同：0
> 
> 时间：2013-03-14T16:50:10.053
> 
> 标签：date, calendar, format, dart

我正在使用 Dart 制作一个简单的事件日历，并且我想确定每个月的第一天是一周中的哪一天。所以我有这个功能......

```
int FirstDayOfMonthFallsOnThisDayOfWeek(int year, int month) {
  int DayOfWeek = 0;
  DateTime theDate = new DateTime(year, month, 1, 0, 0, 0, 0);
  DateFormat df = new DateFormat('E');
  switch(df.format(theDate).toUpperCase()) {
    case "SUNDAY":
      DayOfWeek = 1;
      break;
    case "MONDAY":
      DayOfWeek = 2;
      break;
    case "TUESDAY":
      DayOfWeek = 3;
      break;
    case "WEDNESDAY":
      DayOfWeek = 4;
      break;
    case "THURSDAY":
      DayOfWeek = 5;
      break;
    case "FRIDAY":
      DayOfWeek = 6;
      break;
    case "SATURDAY":
      DayOfWeek = 7;
      break;
  }
  return DayOfWeek;
} 
```

要使用 DateFormat，我有...

```
import 'package:intl/date_format.dart'; 
```

当然，我在我的 pubspec.yaml 中导入了 intl。但是，当我运行它时，我得到一个错误......

```
Internal error: '.../dart/cdkCalendar/web/out/packages/intl/date_format.dart':     
Error: line 5 pos 6: url expected
part of intl; 
```

这是这个包的错误吗？还是我做错了我没有看到的事情。此外，如果有人知道更好的方法来完成我正在尝试做的事情，那也将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:28:37.170

我不确定您为什么会收到错误消息，但这是一个更简单（未经测试）的版本：

```
int FirstDayOfMonthFallsOnThisDayOfWeek(int year, int month) {
  // Use hours != 0 to avoid daylight-saving issues. Shouldn't be a
  // problem with the 1st of a month, but still good practice.
  return new DateTime(year, month, 1, 12).weekday;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:32:43.783

你不需要 Intl ：

int FirstDayOfMonthFallsOnThisDayOfWeek(int year, int month) => new DateTime(year, month, 1).weekday;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:29:00.780

好吧，我弄清楚了为什么会出现错误-我无法导入“零件”。但是，当我尝试导入“intl/intl.dart”时，出现了几个错误，所以我假设这个库可能还没有完成？无论如何，我发现...

```
DateTime.weekday; 
```

...将返回该月开始的星期几。但是它从星期一开始为 1。我个人觉得这很尴尬，因为我见过的每个日历都从星期日开始，而历史上星期日是一周的第一天。所以，无论如何，我只是修改了我拥有的函数，以便它更正从星期日开始的星期几......

```
int _FirstDayOfMonthDayOfWeek() {
  DateTime theDate = new DateTime(_theDate.year, _theDate.month, 1, 0, 0, 0, 0);
  return (theDate.weekday == 7) ? 1 : theDate.weekday + 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-18T13:40:32.670

你可以试试这个

```
List<String> weekdays = [
  'Monday',
  'Tuesday',
  'Wednesday',
  'Thurday',
  'Friday',
  'Saturday',
  'Sunday'
];
var now = DateTime.parse(DateTime.now().toString()).weekday;
return weekdays[now]; 
```

# c# - 无法在 Uploadify 中传递 scriptData 中的值？

> ID：15415373
> 
> 赞同：0
> 
> 时间：2013-03-14T16:50:13.270
> 
> 标签：c#, asp.net-mvc, file-upload, uploadify

从用户获取文件描述后，我在多个文件上传中从 scriptData 传递文件描述。

```
<script type="text/javascript">
    var uploadQueue = new Array();
    $(window).load(
    function () {
        $("#fileuploader").fileUpload({
            'uploader': '/Scripts/uploader.swf',
            'cancelImg': '/Images/cancel.png',
            'buttonText': 'Upload Files',
            'script': 'Home/Upload',
            'folder': '/uploads',
            'scriptData': { 'description': $('#description_' + uploadQueue).val() },
            //'fileDesc': 'Image Files',
            //'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
            'onSelect': function (event, queueID, fileObj) {
                uploadQueue.push(queueID);
            },
            'multi': true,
            'auto': false
        });

        $('#start').click(function () {
            $.each(uploadQueue, function (k, v) {
                alert($('#description_' + uploadQueue).val());
                //$('#fileuploader').fileUploadSettings('scriptData','description=test');
                $('#fileuploader').fileUploadStart(v);
            });
        });

    });

    </script>

<div id="fileuploader"></div>
<input type="button" id="start" value="start"/> 
```

但不知何故，在**MVC 控制器**中，我没有得到它作为**null 或 undefined**传递的描述值？？？

```
 public ActionResult Upload(HttpPostedFileBase fileData, string description)
    {
        var fileName = this.Server.MapPath("~/uploads/" + System.IO.Path.GetFileName(fileData.FileName));
        fileData.SaveAs(fileName);

        return View();
    } 
```

请帮助..不知道错误在哪里！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T01:35:37.967

使用这个控制器

```
 public string Upload(HttpPostedFileBase fileData)
    {
        var fileName = this.Server.MapPath("~/uploads/" + System.IO.Path.GetFileName(fileData.FileName));
        fileData.SaveAs(fileName);
        return "ok";
    } 
```

# java - 整数范围可以切换到 2 - 40 亿

> ID：15415375
> 
> 赞同：-5
> 
> 时间：2013-03-14T16:50:17.010
> 
> 标签：java, oracle, jakarta-ee

通常Java int 的范围是-2147483648...2147483647，所以最大值是2147483647，我不想使用负数。一个 int 可以有超过 40 亿个不同的值，我可以使用 int 范围 2-40 亿吗？在 Eclipse 中，我使用 int a = 31474836471; 我得到编译错误。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:54:26.503

您已经将此问题作为另一个问题的一部分提出。

答案是否定的，你不能让 Java`int`类型拥有 40 亿个值 >= 零。

再次问同样的问题不会改变答案。

您需要更改程序以将“pk”类型从 替换`int`为`long`。您没有其他选择，因为您已声明密钥必须 >= 零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:51:54.807

不，在 Java 中，所有数字都是有符号的；没有无符号数。如果您需要更大范围的整数，请使用[`long`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:52:14.367

你不能。负值范围可用于`int`s，因为该值是有符号的。只有这么多的信息可以用比特来表示。

有关有符号数和无符号数之间的一些很好的区别，请参见另一个问题：有[符号与无符号整数](https://stackoverflow.com/questions/247873/signed-versus-unsigned-integers)

# gdb - OS X Lion 调试问题

> ID：15415377
> 
> 赞同：0
> 
> 时间：2013-03-14T16:50:23.630
> 
> 标签：gdb, go

使用 OS X Lion，我在 /usr/local/bin/gdb 中安装了 gdb 7.5.1。我像这样构建了我的 go 项目：

```
go build -ldflags "-s" 
```

尝试调试：

```
/usr/local/bin/gdb xxx 
```

结果是：

```
Reading symbols from /Users/xxxx...(no debugging symbols found)...done. 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:25:17.887

您要求没有调试符号。[使用 Gdb 调试 Go 代码](http://golang.org/doc/gdb)说：

> 将“-s”标志传递给链接器以**省略**调试信息（例如，go build -ldflags "-s" prog.go）。

（我的重点。）

不要那样做。:)

# php - Godaddy.com 托管和电子邮件

> ID：15415378
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:50:24.503
> 
> 标签：php

我有以下代码用于从我的网站发送电子邮件。迁移到 Godaddy.com 后，我的网站在需要时无法发送任何电子邮件。代码如下：

```
public function sendEmail($mailto, $from_mail, $from_name, $replyto, $subject, $message)
{
$uid = md5(uniqid(time()));
$header = "From: ".$from_name." <".$from_mail.">\r\n";
$header .= "Reply-To: ".$replyto."\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-type:text/html; charset=utf-8\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message."\r\n\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "--".$uid."--";
/* line 124 */ return (mail($mailto, $subject, "", $header)) ? true : false;  /* line 
124 */
    } 
```

请注意，在更改托管服务器之前，我们的电子邮件没有任何问题。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:54:29.940

按照本文中的建议使用端口 587：http: [//mostlygeek.com/tech/smtp-on-port-587/](http://mostlygeek.com/tech/smtp-on-port-587/)

# google-maps-api-3 - 谷歌地图上的 100k 或更多标记没有聚类

> ID：15415379
> 
> 赞同：5
> 
> 时间：2013-03-14T16:50:25.363
> 
> 标签：google-maps-api-3

我有一些数据是通过安装在汽车中的 GPS 设备收集的。因此，我拥有的数据基本上位于街道/道路上/周围。每个坐标都有一些价值。数据的格式是这样的。

```
lat         | long        | value
---------------------------------
12.979155   | 77.644925   | 6 
---------------------------------
12.97916833 | 77.64493667 | 2
---------------------------------
12.97917167 | 77.64492167 | 8 
```

我的任务是在谷歌地图上绘制这些经纬度。当我们谈论放置 10、100 或 1000 个标记时，这似乎很容易。但正如我上面提到的，我们正在通过驱动器收集数据，两个经纬度或两个点之间的距离将在几英尺（比如 2-3 英尺）内。

因此，在调查结束时，我将在一个城市的一小部分获得 90-100k lat-long，而整个城市可能会达到 100 万。

我尝试添加 9-10k 标记并且它工作正常，但是当我尝试加载 40k、50k、60k 时，它使我的浏览器非常慢，这是我要结束的错误消息。

```
Uncaught RangeError: Maximum call stack size exceeded      main.js:1 
```

我一直在谷歌上搜索它，但我找不到任何示例或教程，这些示例或教程将引导我使用我知道的技术（即 asp.net）放置 100 万个标记。通过 Jonathan Wagner找到了这个示例[http://www.scribblemaps.com/markerComplex/](http://www.scribblemaps.com/markerComplex/) ，但我无法理解它并在我现有的代码中实现它，就像这样。

//从 MSSQL 服务器获取 lat-long。

```
function PushValues(ParameterID) {
         a = ParameterID.slice(5);
    var CityID = $('#ddlCity').val().split('|');
    $.ajax({
        type: "POST",
        url: "index.aspx/PushLatLong",
        data: "{CityID:'" + CityID[0] + "',OperatorID:'" + $('#ddlOperator').val() + "',ParameterID:'" + ParameterID.slice(4) + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        cache: false,
        success: function (response) {
            GooglePlaces = response.d.split('#');
            if (GooglePlaces != "Blank") {
                HasValues = 1;
            } else {
                HasValues = 0;
            }

        },
        Error: function (r) {

        }
    });
} 
```

// 在谷歌地图中放置值。

```
function PlaceValues() {
    var options = { zoom: 3, center: new google.maps.LatLng(37.09, -95.71), mapTypeId: google.maps.MapTypeId.ROADMAP };
    var map = new google.maps.Map(document.getElementById('map'), options);
    var bounds = new google.maps.LatLngBounds();
    for (var i = 0; i < GooglePlaces.length; i = i + 2) {
        ltlg = new google.maps.LatLng(GooglePlaces[i], GooglePlaces[i + 1]);
        var marker = new google.maps.Marker({
            position: ltlg,
            map: map,
            title: 'Place number',
            icon: "img/GoogleIcons/" + legendfirstvalue[1]
        });
        bounds.extend(ltlg);
    }
    map.fitBounds(bounds)
    $('#DivLoadImage').hide();
} 
```

**我想在这里提到的另一件事是标记的颜色取决于 lat-long 的值。所以我会有多个颜色标记。我本来可以很容易地尝试对标记进行聚类，但是，在我放大到该区域之前，我将无法看到标记颜色。所以我无法使用clustring。**

我确信我的代码中会有数百万个错误。如果需要，我愿意改变我的方法。 [这](http://coeindia.in/test/harry/index.html)是应用程序的演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:10:27.043

您可以获得的最接近（没有集群）是使用融合表来存储数据并从那里检索数据 - 这可能与您的示例已经使用的类似 - 而且由于它的闪存它可以比普通 api 更快地呈现它们。

融合表本身将在服务器端将标记渲染到图块并检索这些标记。

> Google Maps API 允许您使用 FusionTablesLayer 对象将 Google Fusion Tables 中包含的数据呈现为地图上的图层。

**[此链接中](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-fusiontables-simple)**有关它的示例。

与 fusiontables 一起，我会做一些基于视口的渲染之类的事情，这基本上意味着只绘制对视口可见的标记 - 不是真正的“聚类技术”，但在我们考虑渲染速度时非常有用。阅读更多关于他们的[谷歌文档（fusiontables）](https://developers.google.com/maps/articles/toomanymarkers#fusiontables)和[视口标记管理。](https://developers.google.com/maps/articles/toomanymarkers#viewportmarkermanagement)同一页面还包含更详细的[Fusiontables api](https://developers.google.com/fusiontables/docs/v1/getting_started)和教程链接。

如果您最终决定在服务器端进行集群——请做好准备，这不是一件容易的事——但如果你这样做了，请实现类似于基于网格的集群的东西。（也在同一页面上进行了解释-该死的好链接？）

另外需要注意的是：

> 只有表中的前 100,000 行数据被映射或包含在查询结果中。

要了解更多信息，[请从此处查看。](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T10:53:49.800

融合表是处理大数据的方式。可以使用[GmapGIS](http://www.gmapgis.com)查看和分析这些表格。

# java-me - J2ME Nokia S40 中的 HTTPConnection POST 中的错误 403

> ID：15415385
> 
> 赞同：0
> 
> 时间：2013-03-14T16:50:38.230
> 
> 标签：java-me, http-status-code-403, httpconnection, nokia-s40

我正在使用可以通过 REST API 连接到服务器的诺基亚 SDK 2.0 (J2ME) 为 S40 开发应用程序。

但是有一些 API（使用 POST 方法）导致错误 403 - 禁止。我检查了 apigee 站点中的 API，其标头和正文完全相同，结果出人意料地成功（200 OK 响应）。不幸的是，由于我的客户的机密，我无法分享 URL。

但我正在使用这个功能：

```
public static String sendHTTPPOST(String url, String parameter, String cookie) {
    HttpConnection httpConnection = null;
    DataInputStream dis = null;
    DataOutputStream dos = null;
    StringBuffer responseMessage = new StringBuffer();
    try {
        httpConnection = (HttpConnection) Connector.open(url, Connector.READ_WRITE);
        httpConnection.setRequestMethod(HttpConnection.POST);
        httpConnection.setRequestProperty("User-Agent", "Profile/MIDP-1.0 Configuration/CLDC-1.0");
        httpConnection.setRequestProperty("Content-Type", "application/json");
    httpConnection.setRequestProperty("Cookie", "eid="+cookie);
        httpConnection.setRequestProperty("Content-length", "" + parameter.getBytes().length);

        dos = httpConnection.openDataOutputStream();
        byte[] request_body = parameter.getBytes();
        for (int i = 0; i < request_body.length; i++) {
            dos.writeByte(request_body[i]);
        }

        dos.flush();

    dis = new DataInputStream(httpConnection.openInputStream());
        int ch;
        while ((ch = dis.read()) != -1) {
            responseMessage.append((char) ch);
        }
    } catch (Exception e) {
        e.printStackTrace();
        responseMessage.append("ERROR");
    } finally {
        try {
            if (httpConnection != null) {
                httpConnection.close();
            }
            if (dis != null) {
                dis.close();
            }
            if (dos != null) {
                dos.close();
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
    return responseMessage.toString();
} 
```

参数是 POST 正文的一部分，cookie 是 POST 标头的一部分。它总是导致 403 错误。

是否有可能使代码在 apigee（网络）和我的应用程序（j2me 应用程序）上产生不同的响应？如果是这样，如何解决这个问题？

将不胜感激任何帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:17:22.133

我得到了答案，我应该在会议上检查更多。我忘记编码了。

# javascript - 使用 javascript/jquery 检查表单中的元素

> ID：15415394
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:08.110
> 
> 标签：javascript, jquery, vbscript

我正在尝试将现有应用程序中页面上的 VBScript 转换为 javascript。Javascript 没有`Contains()`VBScript 的功能。是否有`Contains()`与 VBScript 功能相同的函数示例？

```
<form method="post" runat="server" id="frmCrgEntry">

if(frmCrgEntry.Contains(frmCrgEntry.all("ddlHeaderAttdPhy"))) {
                if(document.frmCrgEntry.ddlHeaderAttdPhy.value === "0") {
                    AppendMsg(strFieldName + " is required.");
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:16:14.977

```
if ($('#ddlHeaderAttdPhy').val() === '0') { ... } 
```

如果具有该 ID 的元素不存在，则该语句将静默失败。

如果具有该 ID 的元素确实存在，但它是复选框或选择元素，请根据需要使用`:checked`或`:selected`。

有关更多信息，请参阅[http://api.jquery.com/val/](http://api.jquery.com/val/)`.val()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:17:45.970

1）你真的需要检查表单是否包含元素吗？有没有不包含它的情况？

2）你可以尝试这样的事情

```
// check if the element exists in the form
if(document.frmCrgEntry.ddlHeaderAttdPhy) {
    // check if a value has been selected
    if(document.frmCrgEntry.ddlHeaderAttdPhy.value === "0") {
        AppendMsg(strFieldName + " is required.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:40:57.600

如果我的问题正确，您可以使用`typeof`并执行以下操作：

```
<form id="frm">
    <div id="xyz">abc
        <input id="foo" type="text" />
    </div>
</form>

<script language="JavaScript">
    alert((typeof document.all.frm.all('xyz')) == 'object'); //true
    alert((typeof document.all.frm.all.xyz) == 'object');    //true
    alert((typeof document.all.frm.all('foo')) == 'object'); //true
    alert((typeof document.all.frm.all.foo) == 'object');    //true
</script> 
```

# php - 与 Magento DB 中的未知列相关的 SQL 状态错误

> ID：15415397
> 
> 赞同：1
> 
> 时间：2013-03-14T16:51:15.883
> 
> 标签：php, sql, database, magento

我们正在尝试创建显示我们网站上包含特定属性的所有产品的页面，并设置过滤器。在这种情况下，任何在售的。当前生成以下错误：

```
a:5:{i:0;s:90:"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'e.special_price' in 'where clause'";i:1;s:5558:"#0 /var/www/vhosts/domain/httpdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/vhosts/domain/httpdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /var/www/vhosts/domain/httpdocs/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /var/www/vhosts/domain/httpdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT FLOOR((R...', Array)
#4 /var/www/vhosts/domain/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT FLOOR((R...', Array)
#5 /var/www/vhosts/domain/httpdocs/lib/Zend/Db/Adapter/Abstract.php(808): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Resource/Layer/Filter/Price.php(274): Zend_Db_Adapter_Abstract->fetchPairs(Object(Varien_Db_Select))
#7 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(158): Mage_Catalog_Model_Resource_Layer_Filter_Price->getCount(Object(Mage_Catalog_Model_Layer_Filter_Price), 10000)
#8 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(115): Mage_Catalog_Model_Layer_Filter_Price->getRangeItemCounts(10000)
#9 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Price.php(314): Mage_Catalog_Model_Layer_Filter_Price->getPriceRange()
#10 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(151): Mage_Catalog_Model_Layer_Filter_Price->_getItemsData()
#11 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(120): Mage_Catalog_Model_Layer_Filter_Abstract->_initItems()
#12 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Model/Layer/Filter/Abstract.php(109): Mage_Catalog_Model_Layer_Filter_Abstract->getItems()
#13 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Catalog/Block/Layer/Filter/Abstract.php(132): Mage_Catalog_Model_Layer_Filter_Abstract->getItemsCount()
#14 /var/www/vhosts/domain/httpdocs/app/design/frontend/default/blanco/template/catalog/layer/view.phtml(13): Mage_Catalog_Block_Layer_Filter_Abstract->getItemsCount()
#15 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/vhosts...')
#16 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#17 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#18 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#19 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#20 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#21 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#22 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('left', true)
#23 /var/www/vhosts/domain/httpdocs/app/design/frontend/default/blanco/template/page/2columns-left.phtml(20): Mage_Core_Block_Abstract->getChildHtml('left')
#24 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/vhosts...')
#25 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#26 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#27 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#28 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#29 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#30 /var/www/vhosts/domain/httpdocs/app/code/community/Thirty4/CatalogSale/controllers/IndexController.php(9): Mage_Core_Controller_Varien_Action->renderLayout()
#31 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Thirty4_CatalogSale_IndexController->indexAction()
#32 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#33 /var/www/vhosts/domain/httpdocs/app/code/community/Mage/Core/Controller/Varien/Front.php(234): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#34 /var/www/vhosts/domain/httpdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#35 /var/www/vhosts/domain/httpdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#36 /var/www/vhosts/domain/httpdocs/index.php(96): Mage::run('default')
#37 {main}";s:3:"url";s:49:"/sale.html?dir=asc&limit=60&mode=list&order=price";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

该代码在 Magento 的全新安装中确实有效。所以指出我认为它可能是错误命名的数据库索引或字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T15:51:38.267

您将需要这样做：

管理员 > 配置 > 目录 > 前端 > 使用平面目录产品以“否”

由于此过滤与“平面目录产品”的使用不兼容

# r - 根据输入的数量自动构建 ggplot 调用

> ID：15415398
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:17.240
> 
> 标签：r, function, automation, ggplot2, function-calls

我有 tsv 文件，它们都有一列和相同的行数。我正在使用 ggplot (stat_smooth) 绘制它们，但我希望程序灵活`stat_smooth`，这意味着根据提供的文件数量作为输入添加更多函数调用。

输入的长度取自`length(commandArgs(TRUE))` ，我将数据存储在一个变量中

```
cov=data.frame(sapply(1:length(commandArgs(TRUE)),
    function(i)read.csv(proteins[i],sep='\t',colClasses=c(NA,"NULL")))) 
```

文件在哪里`proteins<-commandArgs(TRUE)`，我正在`colnames`使用另一个代码添加。

现在，问题出现在 ggplot 上，我如何`smooth_line`根据提供的参数数量调用 ggplot 以即时调用。

我正在尝试类似的东西，

```
m=ggplot(cov,aes(seq,cov[,2]))
p=function(i){return(stat_smooth(aes(color=colnames(cov)[i])))}
m+p(1)+..... 
```

使用 a添加`p`到核心 ggplot 绘图启动器，但这似乎没有意义。`m``for loop`

应该有一种更有效的方法。这个想法是根据`cov`data.frame 中的列构建调用，其中的数据如下

```
seq    fileA fileB
1 8429.262  8606.623
2 8766.138  9066.361
3 9081.893  9456.915
4 9342.380  9784.373
5 9480.860 10067.121
6 9581.437 10312.253 
```

有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:27:21.037

首先，将您的数据重塑为每行一个值的长格式。

```
library(reshape2)
covM <- melt(cov, id.var = "seq") 
```

这将返回以下数据框：

```
 seq variable     value
1    1    fileA  8429.262
2    2    fileA  8766.138
3    3    fileA  9081.893
4    4    fileA  9342.380
5    5    fileA  9480.860
6    6    fileA  9581.437
7    1    fileB  8606.623
8    2    fileB  9066.361
9    3    fileB  9456.915
10   4    fileB  9784.373
11   5    fileB 10067.121
12   6    fileB 10312.253 
```

一旦有了新对象，就很容易绘制：

```
library(ggplot2)
ggplot(covM, aes(seq, value)) +
  stat_smooth(aes(color = variable)) 
```

![在此处输入图像描述](../Images/dc480b827da1017037af1d48283fad5a.png)

# ruby-on-rails - 如何将数组中的一条记录与 Ruby 或 Rails 中的另一条记录进行比较？

> ID：15415405
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:29.093
> 
> 标签：ruby-on-rails, arrays, include, comparison, record

我有一种方法可以查找随机答案并将它们放入数组中：

```
def self.answer_list(user)
  answers = Array.new
  for i in 1..25
    answer = random(user)
    if !answer.nil? && !answers.include?(answer)
      answers << answer 
    end
  end
  return answers
end 
```

包括？如果记录已经存在，则方法应该不让记录进入数组，但无论如何都会将其放入

如何比较新记录以确保数组中没有类似的东西？从 random 方法返回的记录是这样的

```
 return answer = Answer.new(user_id: user.id, contact_id: contact.id, statement_id: statement.id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:56:48.023

这并不能真正回答问题，但如果你想从一个数组中随机 N 个元素，你可以使用[`sample`](http://ruby-doc.org/core-2.0/Array.html#method-i-sample)：

```
user.answers.sample(n) 
```

假设您的用户`has_many :answers`. 我没有看到您的代码有任何明显错误的地方，我相信`include?` *应该在这里按预期工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:58:11.400

如果两个 ActiveRecord 模型不相等`new_record`并且它们具有相同的 ID，则它们是相等的。 [http://apidock.com/rails/ActiveRecord/Base/%3D%3D](http://apidock.com/rails/ActiveRecord/Base/%3D%3D)

在这里，无法设置等价，因为您的两个对象是新记录。

您有 2 个解决方案：

*   在模型中定义一个`==(val)`函数`Answer`
*   做这样的事情：

    ```
    if !answer.nil? && answers.detect{|a| a.user_id == user.id}.nil?
       ...
    end 
    ```

# ruby - 规范测试中的关联大小/限制验证失败

> ID：15415410
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:38.570
> 
> 标签：ruby, ruby-on-rails-3, validation, rspec

我的学校模型与它的学生有很多关联，以及与具有用户容量字段的许可证的一对一关联。我想进行验证以将学生人数限制在许可证容量的范围内，因此我进行了以下设置：

```
class School < ActiveRecord::Base    

  has_one :license
  has_many :students

  delegate :user_capacity, :to => :license

  validate :within_user_capacity    

  def within_user_capacity
    return if students.blank?
    errors.add(:students, "too many") if students.size > user_capacity
  end    

end 
```

这是我用来测试此验证的规范，**假设用户容量为 100**：

```
it "should fail validation when student size exceeds school's user capacity" do
    school = FactoryGirl.create(:school_with_license)
    puts school.user_capacity # => 100
    puts school.students.size # => 0
    0...100.times {|i| school.students.build(...)}
    puts school.students.size # => 100
    #build the 101st student to trigger user capacity validation
    school.students.build(...).should_not be_valid
end 
```

但是，这总是会导致失败 - 我看到以下消息：

```
Failure/Error: school.students.build(...).should_not be_valid
       expected valid? to return false, got true 
```

**编辑**

似乎是 FactoryGirl 的问题，规范中的 puts 语句告诉我关联大小正在增加，但是随着验证被触发，模型内部的进一步调试表明它从未增加。即使我明确地将构建的记录保存在规范循环中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:08:16.943

`build`当您要断言学校无效时，您似乎在断言添加的最后一个学生无效（返回新学生）。你需要做这样的事情吗？：

```
school.students.build(...)
school.should_not be_valid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:03:21.117

尝试进行简单的验证，无需委托。

我在我的应用程序中检查了您的方法，它通常适用于史蒂夫在他的回答中建议的修复（`School`应该检查有效性）。

所以我建议以下代码：

```
class School < ActiveRecord::Base    
  has_many :students

  validate :within_user_capacity    

  def within_user_capacity
    errors.add(:students, "too many") if students.size > 1
  end    
end 
```

接下来，打开控制台：`RAILS_ENV=test rails c`

```
> school = FactoryGirl.create :school
> school.valid?
=> true
> school.students.build
> school.students.size
=> 1
> school.valid?
=> true
> school.students.build
> school.students.size
=> 2
> school.valid?
=> false
> school.errors
=> ... @messages={:students=>["too many"]} ... 
```

如果这可行，您可以修复您的 Rspec 代码。

# php - 在表之间移动 MySQL 行？

> ID：15415418
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:50.293
> 
> 标签：php, mysql, database

我正在尝试从 table_a (ptb_registrations) INTO table_b (ptb_users) 中插入一些列。

目前我有这个查询，它从表 a 更新表 b 中的列，但不是覆盖当前存储在 ptb_users 中的现有信息，而是希望它插入一个新行。

我的表 ptb_users 如下所示：

```
id (auto inc)    |   first_name   |         email   
     1                  john            john@email.com 
```

...我的表 ptb_registrations 看起来像这样：

```
id (auto inc)    |   firstname   |         email   
     2                  eric            john@email.com 
```

所以现在我想将 ptb_registrations 中的 firstname 和 email 列插入 ptb_users.first_name 和 ptb_users.email 作为新行？

有人可以指出我正确的方向吗？

这适用于更新

```
$query = "UPDATE ptb_users
SET first_name = (
  SELECT firstname
  FROM ptb_registrations
)";

mysql_query($query)or die('Could not update members: ' . mysql_error()); 
```

我努力了：

```
$query = "INSERT INTO ptb_users.first_name = (
  SELECT firstname
  FROM ptb_registrations
)";

mysql_query($query)or die('Could not update members: ' . mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:55:56.360

[这是在 MySQL http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)中记录 INSERT 的链接

```
 INSERT INTO ptb_users (first_name, email)
  SELECT firstname, email
  FROM ptb_registrations; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:56:25.790

您需要像这样执行插入语句：

```
INSERT INTO ptb_users (firstname)
  SELECT firstname
  FROM ptb_registrations 
```

# javascript - 包含脚本时出现的随机查询字符串

> ID：15415420
> 
> 赞同：0
> 
> 时间：2013-03-14T16:51:55.340
> 
> 标签：javascript, query-string

在我的网站上，当我在网页上包含脚本时出现随机查询字符串的问题。我知道这不是我，因为 Pingdom 和 Google Pagespeed 都确认我有随机查询字符串，但问题是为什么。例如，

```
<script type="text/javascript" src="js/randomfile.js"></script> 
```

在 Chrome、Firefox 和 IE 的开发者工具中显示为

```
<script type="text/javascript" src="js/randomfile.js?_=1247543709724"></script> 
```

任何关于为什么会发生这种情况的指示？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:06:58.667

如果您的源 HTML 不包含查询字符串，则似乎有一个服务器端优化工具会重写您`src`的 s.

这些查询字符串值之所以好的原因是为了缓存破坏。JavaScript 文件通常很少更改，因此它们非常适合缓存。但是，当您确实更改了 JS 文件时，您希望确保您的用户使用新文件而不是缓存中的文件。因此，您将您的`src`值更新为一个新的、唯一的 URL。浏览器将其视为全新资源并从服务器下载它，而忽略缓存中已经存在的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:06:48.017

该数字是附加到脚本 URL 的某个唯一值（可能在页面加载时生成）。这可以防止脚本被缓存，因为在每个页面加载时，URL 都是唯一的。

如果没有看到您的设置，我无法说出它在做什么，但它很可能是您正在使用的库之一。

# sqlite - SQLite Inner Join 无法从 Access 转换

> ID：15415423
> 
> 赞同：1
> 
> 时间：2013-03-14T16:52:11.110
> 
> 标签：sqlite

可以使用一些帮助将此 Access 查询转换为 SQLite....

```
SELECT [Objects].[Object_ID], [Equation_Types].[Equation_Type], [Objects].[Dynamic], [Objects].[Visible], [Object_Types].[Object_Type], [DisplayFormats].[DisplayFormat]
FROM (((((Objects INNER JOIN Object_Transactions ON [Objects].[Object_ID]=[Object_Transactions].[Object_ID]) INNER JOIN Strings ON [Objects].[String_ID]=[Strings].[String_ID]) INNER JOIN Object_Types ON [Objects].[Object_Type_ID]=[Object_Types].[Object_Type_ID]) INNER JOIN DisplayFormats ON [Objects].[DisplayFormat_ID]=[DisplayFormats].[DisplayFormat_ID]) INNER JOIN (Service_Types INNER JOIN ((Header INNER JOIN Services ON [Header].[Header_ID]=[Services].[Header_ID]) INNER JOIN Transactions ON [Services].[Service_ID]=[Transactions].[Service_ID]) ON [Service_Types].[Service_Type_ID]=[Services].[Service_Type_ID]) ON [Object_Transactions].[Transaction_ID]=[Transactions].[Transaction_ID]) INNER JOIN Equation_Types ON [Object_Transactions].[Equation_Type_ID]=[Equation_Types].[Equation_Type_ID]
WHERE ((([Objects].[Dynamic])=True) And (([Objects].[Visible])=True) And (([Object_Types].[Object_Type])="DATA"));True) And (([Object_Types].[Object_Type])="DATA")); 
```

抱歉格式化。

最里面的连接不识别列。

```
INNER JOIN Transactions ON [Services].[Service_ID]=[Transactions].[Service_ID]) ON [Service_Types].[Service_Type_ID]=[Services].[Service_Type_ID]) ON [Object_Transactions].[Transaction_ID]=[Transactions].[Transaction_ID]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:27:00.980

子句的右侧`INNER JOIN`必须是表，而不是表表达式。

内连接是可交换的，所以你可以去掉所有的括号。

# c# - 将结束字符与列表进行比较

> ID：15415427
> 
> 赞同：3
> 
> 时间：2013-03-14T16:52:18.047
> 
> 标签：c#, regex, string, compare

我正在尝试将字符串的最后一个字符与已知值列表进行比较，如果任何已知值与结束字符匹配，则设置一个标志。我已经弄清楚如何与一个角色相比，但我似乎无法弄清楚如何与一个列表相比。任何人都可以帮忙吗？到目前为止，这是我的代码：

```
StringBuilder myGrade = new StringBuilder();

// then I pull some data, calculate some stuff, give a grade, build the string, etc.  The resulting text can vary, but the grade letter will always be last.

var goodGrades = new List<string> { "A", "B", "C" };
string endStr = myGrade.ToString();
endStr = endStr.Substring(Math.Max(0, endStr.Length - 1));
if (endStr == "A")
     //do some stuff for passing grades
else
     //do some other stuff for failing grades 
```

同样，这对单个字符非常有效……但是我将如何检查 goodGrades 列表中的每个项目？有正则表达式的可能性吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:53:17.850

```
if(goodGrades.Contains(endStr))
{
   //Do something.
} 
```

此外，这也适用于字符。如果您只想比较单个字符，这是一种更好的方法。

```
//Create a list of chars instead of strings
List<char> goodGrades = new List<char>(){'A', 'B', 'C'};
//Get the last char of your string by index
char endChar = myGrade.ToString()[myGrade.Length - 1];

//See if char is contained in list of chars
if(goodGrades.Contains(endChar))
{
   //Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:53:29.893

只需使用`List.Contains`

```
if (goodGrades.Contains(endStr)) { 
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:53:24.917

[微软](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

```
if (goodGrades.Contains(endStr))
  do something
else 
```

# asp.net-mvc - Durandal KO 绑定视图问题

> ID：15415436
> 
> 赞同：2
> 
> 时间：2013-03-14T16:52:37.340
> 
> 标签：asp.net-mvc, durandal

我的 Durandal 视图模型是这样工作的：

```
define(function (require) {
var http = require('durandal/http');

return {
    subjectItem: function (data) {
        var self = this;
        self.Subject_ID = data.Subject_ID;
        self.Subject_Name = data.Subject_Name;
    },
    subjects: ko.observableArray([]),
    activate: function () {
        var self = this;
        http.ajaxRequest("get", "/api/values/getsubjects")
            .done(function (allData) {
                var mappedSubjects = $.map(allData, function (list) { return new self.subjectItem(list); });
                self.subjects(mappedSubjects);
            });
    }
};
}); 
```

然而，在第一次导航到这个视图时，它运行 ajax 调用但不更改 dom，再次导航到它并且它们都出现（仍然运行 ajax 调用）。这是我的html：

```
<table>
<thead>
    <tr>
        <th>Name</th>
    </tr>
</thead>
<tbody data-bind="foreach: subjects">
    <tr>
        <td data-bind="text: Subject_Name"></td>
    </tr>
</tbody>
</table> 
```

任何线索，我对使用 Durandal 非常陌生，但现在担心它不会有效地保持 dom 更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:57:41.113

我认为您的问题非常类似于：[HotTowel: Viewmodel lost mapping when navigating pages](https://stackoverflow.com/questions/15298402/hottowel-viewmodel-lose-mapping-when-navigating-between-pages)

AJAX 调用是一个异步任务，因此您需要在 activate 函数中返回一个 Promise 以告知 durandal 等到检索到数据后再继续应用绑定。

# c# - 为什么获取 Http 请求和响应为时已晚

> ID：15415437
> 
> 赞同：14
> 
> 时间：2013-03-14T16:52:38.487
> 
> 标签：c#, .net, performance, http, buffer

我正在使用 http post 方法向 Http Server URL 发送请求。

请求和响应之间的时间差约为 60 秒，但根据服务器团队的说法，一旦请求到达终点，他们将在 7 秒内发送响应。

我不认为网络需要剩余 53 秒的时间才能到达服务器端的数据包，所以可能是什么问题。

在这个应用程序中，我们在客户端和服务器之间使用同步通信。请向我提供以下详细信息。

1.  是不是因为服务器发送请求的速度超过了服务器能够处理的速度。在这种情况下，客户端多次以 3 秒的间隔获取请求，而服务器则需要 7 秒来处理此问题。
2.  什么是网络缓冲区。网络层是否有两个缓冲区，一个在客户端，另一个在服务器。
3.  如果服务器无法以相同的速度处理请求，则客户端发送的所有请求都被缓冲在客户端缓冲区中，如果等待处理的请求超过该缓冲区的最大大小会发生什么情况。
4.  如果我们在客户端并且无法控制服务器，有什么替代方法可以提高性能

编辑：当我在网络中使用wireshark 来捕获网络日志时，我发现它在我的应用程序实际发送到服务器后20 秒出现在wireshark 中。这种延迟背后的原因是什么。请求出现在网络中的可能原因是什么可能导致实际发送延迟 20 秒。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T18:02:12.797

关于您的编辑，以帮助您理解。网络遵循称为*开源互通 (OSI)*的模型。该模型分为七个不同的层，所有层都有一个功能。

这些层在这里：

![OSI 模型](../Images/77c90b66ecc919bb8bfe4c6e6c98fceb.png)

Wireshark 检测位于第 3 层的*数据包。由**路由器*处理。*网络接口卡 (NIC)*获取分配的数据并将其转换为*数据包*以通过网络发送。

*在您的NIC*将其转换为路由器*处理*的数据*包*之前，Wireshark 不会检测到该数据包。

 *您会看到，一旦将其转换为*数据包*，它就会包含以下信息：

*   4 位包含版本（IPV4 或 IPV6）
*   4 位包含 Internet 标头。
*   包含*服务类型*或*服务质量*和优先级的 8 位。
*   包含数据包长度的 16 位，以字节为单位。
*   包含识别标签的 16 位，以帮助**从 Fragments 重建数据包**。
*   3 位，第一个是零，后跟一个标志，表示是否允许分片。和数量。
*   包含片段偏移量的 13 位，用于标识原始位置的字段。
*   包含*生存时间 (TTL)*和*跨路由器的跳数*的 8 位。
*   8 位包含协议（TCP、UDP、ICMP 等）
*   包含*Header Checksum的 16 位*
*   包含源 IP 地址的 32 位
*   包含目标 IP 地址的 32 位

这些是创建此类数据包时创建的关键 160 位。

**这是什么意思？**

好吧，您知道*Wireshark*需要 20 秒才能检测到您的数据包。因此，我们一开始就知道您的应用程序需要 20 秒才能真正构建此数据包。

我们知道服务器还需要**重建**这个数据包，以便它可以处理数据并可能发送请求。

我们也知道*路由器*就像交通警察一样，通过互联网或本地网络发送您的数据。

**好吧，这增加了很多推断？但我该去哪里？**

您有一个名为：**tracert**

平均而言，通过 5 到 6 英尺的电缆需要一到两毫秒的路由请求，因此如果它生成一到两毫秒的初始跃点，但在 230 毫秒内触发第二个跃点，那么您可以使用一个简单的公式：

```
6 * 20 
```

根据我们跟踪器的当前速度，我们**可以估计**持续时间。这是一种非常通用的方法，但存在用于精确准确性的工具。但是跳越多，到达目的地所需的时间就越多。此外，您将乘以更多。

**从客户端到服务器之间的那个呢？**

*   局域网（LAN）：网络的内部效率是由于每个网络协议、设备和物理介质的优化。网络管理员必须以速度衡量可靠性；以及网络产生的所有流量。因此，设备吞吐量和物理中位数很重要。您不希望十辆汽车合并到一条单车道隧道中，这可能会产生同样适用于网络的瓶颈。

*   广域网（WAN）：这本质上是与互联网、云的连接。可以这样想：您的计算机在 LAN 上，路由器连接到 WAN。然后你的 ISP 很可能有一个 LAN，然后它的 WAN 向更大的分发设施开放。它一直在工作，直到它到达互联网。

**不过我能做什么？**

你知道现在之间是什么，但我能做什么？

好吧，当您生成*服务*时，您显然希望确保您的代码精简且高效。因为效率对速度至关重要。因此，改变缓冲区大小、传输速率等可以极大地改进您的应用程序。

显然，良好的代码实践会有所帮助。

**我的代码是坚如磐石吗？**

如果您认为您的代码此时不是问题，或者您*托管*和*创建服务*的方法不是问题，那么这些因素可能是原因：

*   本地机器可能会产生过多的抖动，因此需要更长的时间。
*   本地网络正在产生过多的抖动或低效/低吞吐量。
*   您的请求是长途旅行，所以时间有所延迟。
*   您的 Internet 服务提供商可能具有扫描这些数据包的硬件防火墙、代理等。
*   您的服务器可能有过多的请求或 Host 方法效率不高。

这些是更大的变量。您可以尝试的只是重构服务并确保您的服务器以最有效的方式托管它。否则，您需要让信息技术团队参与进来，这一点至关重要。

但请记住这一点，您的体验可能比与此服务交互的其他客户更好或更差。

我是在假设您部署在一个位置并且您可能远离您的服务器的几个州的情况下说的。

*工具：*

命令行：

*   平
*   示踪剂

网络和协议分析仪：

*   Fiddler (HTTP/HTTPS) ：查看 Fiddler 是否显示任何 HTTP 状态代码以进行故障排除。
*   Wireshark ：将分析您的网络流量，这有助于持续时间。

还有其他实用程序可用于实际缓解和测试网络速度，甚至到其他位置，仅谷歌“网络工具”。福禄克有几个。

希望这可以解释为什么 Wireshark 甚至可能需要 20 秒才能在网络上显示数据包。

希望有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T00:37:17.777

使用 Wireshark 在网络上每隔 60 秒捕获您的请求和响应，并将其发送给服务器团队。他们可能会通过捕获显示请求和响应在他们身边接近 7 秒来响应。那太棒了！将它们都发送给网络团队。

另一方面，跟踪可能显示延迟存在于您的代码中。您的终端可能存在某种限制或延迟，从而使请求无法在很长一段时间内离开您的流程。Wireshark 跟踪也可以告诉您这一点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-24T00:26:11.637

TCP/IP 流将控制您担心的大部分内容。

**“发送请求比服务器无法处理的速度更快”**

不，您永远不会比使用 TCP 会话时接收到的速度更快地向服务器发送任何内容。传输流是受引导的，不可能发送得比服务器可以处理的快。

**“什么是网络缓冲区”**

TCP/IP 通信涉及两个队列缓冲区，一个发送缓冲区和一个接收缓冲区。

当您`send()`拨打电话时，它并没有真正发送任何内容，它只是将数据排队在发送缓冲区中，并返回给您您尝试发送的字节中有多少实际上已放入队列中以进行发送。如果它返回的比您尝试发送的少，则意味着您必须等待才能发送其余的，因为缓冲区已满。

这就是您控制流量的方式，这是您知道您是否尝试发送内容过快的提示。只要您有数据要发送，请尽量保持缓冲区已满，但不要忽略并非所有内容都适合缓冲区并且您必须稍后重试的事实。

`recv()`也有自己的缓冲区。这个命令实际上并没有接收任何东西，数据已经接收到，`recv()`只会从接收缓冲区中读取。使用阻塞套接字时（默认），`recv()`如果缓冲区为空，将挂起，等待新数据到达。`recv()`仅当连接终止或您尝试将其与非阻塞套接字一起使用时才会返回 0。

如果您忘记了`recv()`并且接收缓冲区已满，也可以。对端将无法继续发送，`send()`将开始向它们返回 0，但只要注意`send()`返回值，任何时候都不会丢失数据。

据我所知，所有系统的缓冲区大小默认为 64KB，用于发送或接收。有一些命令可以调整这个缓冲区的大小，但它并不有趣。如果您需要更大的缓冲区，请在您的应用程序中使用。

**“如果我们在客户端并且无法控制服务器，有什么替代方法可以提高性能”**

它不完全是一个有效的问题，你不能这样做。我认为您可能在 HTTP 请求上犯了一些错误，特别是考虑到您正在执行 POST 请求。

在执行 POST 请求时，您的 HTTP 标头将包含两个通常仅在服务器 HTTP 响应标头中可见的标头：Content-Type 和 Content-Length。它们在进行 POST 时非常重要，如果其中一个丢失或错误，HTTP 会话可能会挂起几秒钟或根本不成功。

HTTP 的另一个重要方面，是 HTTP 1.0 和 HTTP 1.1 最本质的区别：HTTP 1.0 不支持*Keep-Alive*。对于初学者来说处理 HTTP 1.0 更容易，因为使用 HTTP 1.0，您连接、发送请求、服务器响应并终止连接，这意味着您完成了服务器响应的下载。对于 HTTP 1.1，默认情况下不会发生。连接保持打开状态，直到超时。您必须注意 HTTP 响应标头 Content-Length 和字节数，以便了解服务器是否结束发送您请求的内容。

同样重要的是要注意并非所有服务器都支持 HTTP 1.0。您可以发出 HTTP 1.0 请求，但无论如何它都会以 1.1 响应，包括 Keep-Alives 和所有您没有预料到的东西。在一个完美的世界里，它不应该发生，但它确实发生了。

你的错误可能就在这个区域。你说你的请求正好用了 60 秒，我怀疑这是因为它超时了。您可能已经收到了您必须收到的所有内容，但应用程序没有正确处理这些内容，然后挂起，直到服务器终止连接。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T19:47:23.793

在第 1 点：

在您的第 1 点中，我相信您的意思是说“1”。是否是由于客户端发送......'和'在这种情况下，客户端多次收到响应......'。

关于第 3 点：

*   服务器机器通常是比客户端机器更强大的计算机，因此这种“如果服务器无法以相同的速度处理客户端发送的请求”的情况很少见。如果我没记错的话，HTTP 服务器采用“先到先服务”的方式，而您所称的请求缓冲区将是服务器端的队列，而不是客户端。我从未听说过“所有请求都在客户端缓冲区缓冲”。

*   服务器响应所需的时间通常很快，但返回给您（客户端）的时间结果更多地与原始请求正在执行的操作有关，无论是仅检索静态 html 文件，还是检索大图像或文档，或者必须在数据库服务器上执行繁重的查询等。

*   您是唯一向服务器提交 HTTP 请求的客户端吗？可能不是。那台服务器机器是否仅容纳 HTTP 服务器？请记住，服务器正在或将要处理来自多个客户端的请求，这有时可能是延迟响应的另一个因素，即使服务器可以同时处理多个请求并且取决于其他请求在做什么。HTTP 服务器因多个请求而无法响应的极端示例是服务器受到 [分布式] 拒绝服务攻击。

*   您是否有任何防火墙保护 HTTP 服务器或保护 HTTP 服务器所在的网络？拥有防火墙规则或网络入侵检测系统可能会延迟请求/响应时间。

*   以下可能是“请求出现在网络中的可能原因可能是它实际发送延迟 20 秒”的另一个因素。它被称为“网络拥塞”，通常发生在路由器级别。

关于第 4 点：

*   一旦放弃或消除与第 3 点相关的因素，您可以通过以下方式提高性能：

*   首先，所有其他都不是延迟的[主要]因素，请弄清楚您的预期响应时间是多少。

*   其次，确保您对往返行程在什么条件/情况下所花费的时间有一个合理准确的衡量标准。我认为 HTTP 服务器不是罪魁祸首。

*   第三，如果仍然遇到延迟，您（或其他人）将需要查看路由器的配置、防火墙配置以及您的 html 页面代码（如果有）或您的 Web 应用程序（如果有）。

编辑：

尝试 ping 您的 HTTP 服务器以了解网络往返时间。

这是一个例子；我确实提交了这个命令：

> **`ping www.yahoo.com`**

从客户端 PC 上的 MS-DOS 窗口。

![在此处输入图像描述](../Images/7020dd437f2b9f0a7d5d7121b67a12d8.png)

1) 注意往返时间大约为 0.5 秒或更短（0.5 秒 = 500 毫秒）。我在美国东海岸，Yahoo.com 很可能是美国西部的费用（我不确定）。

2）请注意，每次往返的长度并不总是相同，但变化很小。

3）从我的本地PC到像Yahoo.com这样的世界级暴露服务器，中间有几个请求、路由器和防火墙，响应时间甚至不到1秒。这意味着如果网络和服务器配置正确，它们很少会导致延迟，这意味着在将其归咎于 HTTP 服务器之前，应彻底检查/审查您的页面或应用程序。

4）当我从浏览器提交请求[http://www.yahoo.com](http://www.yahoo.com)时，加载页面肯定花了 0.5 秒多一点，我认为是因为页面中的所有 html 元素和广告，但 HTTP 服务器响应是可能是 0.5 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:39:58.587

尝试检查您的 DNS 配置，我认为这可能是一个问题。在您的浏览器或脚本发出请求之前，必须将域名解析为 IP 地址。

您可以通过向位于 Windows 中的主机文件添加其他信息来轻松检查这一点：

C:\Windows\System32\drivers\etc\hosts

或者在linux系统中：

\等\主机

要检查有关域和 IP 地址的信息，请尝试使用 nslookup（Windows 和 Linux 操作系统上的相同命令）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T04:30:01.637

第 4 点：对于大量数据，在线路中花费的时间可能很重要。如果您的服务器支持它，您可能希望在发送之前压缩内容。*

# oauth - 在客户端登录后，在服务器端对 G+ 用户进行身份验证

> ID：15415442
> 
> 赞同：5
> 
> 时间：2013-03-14T16:52:49.637
> 
> 标签：oauth, google-plus, google-oauth

我正在尝试设置[“使用 Google 登录”](https://developers.google.com/+/features/sign-in)按钮，允许人们在我的网站上购买商品。

客户端身份验证看起来很简单，但我很难理解服务器端身份验证的工作原理。在[示例代码](https://github.com/googleplus/gplus-quickstart-java/blob/master/src/com/google/plus/samples/quickstart/Signin.java)中，他们将客户端“code”参数传递给服务器，在服务器上可以用它换取访问令牌，然后可以使用该令牌查看用户的朋友列表。

但我不想看到用户的朋友列表。我只是想确定客户实际上是他们声称的那个人。

检索令牌后，示例代码将令牌放入会话中，并且似乎使用令牌的存在来验证用户是否已通过身份验证。那是正确的/安全的吗？当需要购买时，我的服务器是否应该（不）以某种方式（如何？）重新验证令牌？我是否应该在每次请求时不断向 Google 重新验证令牌？（希望不是？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:05:08.660

在执行购买之前，您可能想要做的是通过将用户 ID 从客户端安全地传递到您的服务器并针对存储的凭据的用户 ID 进行验证，来验证用户是您期望的用户。这提供了针对重放攻击的额外保护，其中攻击者通过劫持他们的会话来假装是您网站的用户，并且是在接受用户付款之前进行的最相关检查。

我不会仅仅依靠用户验证作为防止欺诈的机制。您应该使用安全的支付系统，例如[Google Commerce 平台](https://developers.google.com/commerce)，并遵循商业[的最佳做法](https://developers.google.com/commerce/wallet/online/best-practices)。

提醒一下，每次初始化缓存的凭据时，都应使用 OAuth2 v2 端点检查您的令牌。检查每个请求似乎有点过分，因为您应该使用已经过验证并存储在服务器端的缓存凭据。最多，您可以在更新访问令牌时执行检查，但如果您信任您的刷新令牌，那么如果您在创建帐户并设置刷新令牌时执行检查，您应该足够安全。

除了在创建帐户时验证用户 ID 之外，还执行以下步骤：

*   验证客户是您期望的人。这可以保护您免受伪造的访问令牌被传递到您的应用程序，以便使用您的配额代表攻击者有效地发出请求。
*   验证该帐户是否由您的应用程序创建，这可以保护您和您的用户在代表用户创建其他帐户的情况下[免受跨站点请求伪造。](http://www.codinghorror.com/blog/2008/10/preventing-csrf-and-xsrf-attacks.html)

正如您在链接的帖子中提到的，[Google+ 快速入门](https://github.com/googleplus)中的示例代码应充分展示如何以各种编程语言执行这些检查以进行帐户授权。

在 HTML/JS 客户端中，以下代码显示了检索 userId（值，而不是特殊字符串“me”）以传递给 connect 方法以验证 Google+ userId 的位置：

```
 var request = gapi.client.plus.people.get( {'userId' : 'me'} );
  request.execute( function(profile) {
      $('#profile').empty();
      if (profile.error) {
        $('#profile').append(profile.error);
        return;
      }
      helper.connectServer(profile.id);
      $('#profile').append(
          $('<p><img src=\"' + profile.image.url + '\"></p>'));
      $('#profile').append(
          $('<p>Hello ' + profile.displayName + '!<br />Tagline: ' +
          profile.tagline + '<br />About: ' + profile.aboutMe + '</p>'));
      if (profile.cover && profile.coverPhoto) {
        $('#profile').append(
            $('<p><img src=\"' + profile.cover.coverPhoto.url + '\"></p>'));
      }
    }); 
```

...并且以下代码显示了正在传递的 Google+ id。

```
connectServer: function(gplusId) {
  console.log(this.authResult.code);
  $.ajax({
    type: 'POST',
    url: window.location.href + '/connect?state={{ STATE }}&gplus_id=' +
        gplusId,
    contentType: 'application/octet-stream; charset=utf-8',
    success: function(result) {
      console.log(result);
      helper.people();
    },
    processData: false,
    data: this.authResult.code
  });
} 
```

Java 示例中执行这些检查的相关代码如下：

```
 // Check that the token is valid.
      Oauth2 oauth2 = new Oauth2.Builder(
          TRANSPORT, JSON_FACTORY, credential).build();
      Tokeninfo tokenInfo = oauth2.tokeninfo()
          .setAccessToken(credential.getAccessToken()).execute();
      // If there was an error in the token info, abort.
      if (tokenInfo.containsKey("error")) {
        response.status(401);
        return GSON.toJson(tokenInfo.get("error").toString());
      }
      // Make sure the token we got is for the intended user.
      if (!tokenInfo.getUserId().equals(gPlusId)) {
        response.status(401);
        return GSON.toJson("Token's user ID doesn't match given user ID.");
      }
      // Make sure the token we got is for our app.
      if (!tokenInfo.getIssuedTo().equals(CLIENT_ID)) {
        response.status(401);
        return GSON.toJson("Token's client ID does not match app's.");
      }
      // Store the token in the session for later use.
      request.session().attribute("token", tokenResponse.toString());
      return GSON.toJson("Successfully connected user.");
    } catch (TokenResponseException e) {
      response.status(500);
      return GSON.toJson("Failed to upgrade the authorization code.");
    } catch (IOException e) {
      response.status(500);
      return GSON.toJson("Failed to read token data from Google. " +
          e.getMessage());
    } 
```

在示例中，ClientID 来自 Google API 控制台，并且对于您的应用程序来说是不同的。

# sql - 使用 Tablefunc 旋转多列

> ID：15415446
> 
> 赞同：19
> 
> 时间：2013-03-14T16:53:08.077
> 
> 标签：sql, postgresql, pivot, crosstab

有没有人习惯于使用`tablefunc`多个变量而不是只使用*行名*？[文档说明](http://www.postgresql.org/docs/current/interactive/tablefunc.html)：

> 对于具有相同 row_name 值的所有行，“额外”列应该是相同的。

如果不组合我想要旋转的列（我非常怀疑这会给我所需的速度），我不确定如何做到这一点。一种可能的方法是使实体为数字并将其以毫秒为单位添加到本地，但这似乎是一种不稳定的继续方式。

我已经编辑了在回答这个问题时使用的数据：[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499)。

```
 CREATE TEMP TABLE t4 (
  timeof   timestamp
 ,entity    character
 ,status    integer
 ,ct        integer);

 INSERT INTO t4 VALUES 
  ('2012-01-01', 'a', 1, 1)
 ,('2012-01-01', 'a', 0, 2)
 ,('2012-01-02', 'b', 1, 3)
 ,('2012-01-02', 'c', 0, 4);

 SELECT * FROM crosstab(
     'SELECT timeof, entity, status, ct
      FROM   t4
      ORDER  BY 1,2,3'
     ,$$VALUES (1::text), (0::text)$$)
 AS ct ("Section" timestamp, "Attribute" character, "1" int, "0" int); 
```

回报：

```
部分 | 属性 | 1 | 0
---------------+-----------+---+---
 2012-01-01 00:00:00 | 一个 | 1 | 2
 2012-01-02 00:00:00 |     乙     | 3 | 4

```

因此，正如文档所述，*额外的*列（即“属性”）对于每个*行名*（即“节”）都是相同的。因此，它报告第二行的**b**，即使 'entity' 也具有该 'timeof' 值的**'c'**值。

期望的输出：

```
Section                   | Attribute | 1 | 0
--------------------------+-----------+---+---
2012-01-01 00:00:00       |     a     | 1 | 2
2012-01-02 00:00:00       |     b     | 3 |  
2012-01-02 00:00:00       |     c     |   | 4 
```

有什么想法或参考吗？

更多背景知识：我可能需要对**数十亿**行执行此操作，并且我正在测试以长格式和宽格式存储这些数据，并查看是否可以`tablefunc`比使用常规聚合函数更有效地从长格式转换为宽格式。
我将每分钟对大约 300 个实体进行大约 100 次测量。通常，我们需要比较给定实体在给定秒内所做的不同测量，因此我们需要经常使用宽格式。此外，对特定实体进行的测量是高度可变的。

编辑：我找到了一个资源：[http](http://www.postgresonline.com/journal/categories/24-tablefunc) ://www.postgresonline.com/journal/categories/24-tablefunc 。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T22:43:39.493

您的查询的问题在于**`b`**并且**`c`**共享相同的时间戳`2012-01-02 00:00:00`，并且您在查询中首先拥有该`timestamp`列`timeof`，因此 - 即使您添加了粗体强调 -`b`并且`c`只是属于同一组的额外列`2012-01-02 00:00:00`。`b`自[（引用手册）](https://www.postgresql.org/docs/current/tablefunc.html#id-1.11.7.49.5.7)以来，仅返回第一个 ( ) ：

> 该`row_name`列必须是第一个。和列必须是最后两列，按此顺序`category`。和`value`之间的任何列都被视为“额外”。对于具有相同值的所有行，“额外”列**应该是相同**的。`row_name``category`**`row_name`**

 **大胆强调我的。
只需恢复前两列的顺序以`entity`生成行名，它就可以按需要工作：

```
SELECT * FROM crosstab(
      'SELECT entity, timeof, status, ct
       FROM   t4
       ORDER  BY 1'
      ,'VALUES (1), (0)')
 AS ct (
    "Attribute" character
   ,"Section" timestamp
   ,"status_1" int
   ,"status_0" int); 
```

`entity`当然，必须是唯一的。

### 重申

*   **`row_name`** *第一的*
*   （可选）*接下来***`extra`**的列
**   **`category`**（由第二个参数定义）和*last*。**`value`***

 **额外的列从每个分区的*第一*行开始填充。`row_name`其他行的值被忽略，每列只有一列`row_name`要填充。通常，对于 one 的每一行，这些都是相同的`row_name`，但这取决于您。

### [对于您的答案中](https://stackoverflow.com/a/15574405/939860)的不同设置：

```
SELECT localt, entity
     , msrmnt01, msrmnt02, msrmnt03, msrmnt04, msrmnt05  -- , more?
FROM   crosstab(
        'SELECT dense_rank() OVER (ORDER BY localt, entity)::int AS row_name
              , localt, entity -- additional columns
              , msrmnt, val
         FROM   test
         -- WHERE  ???   -- instead of LIMIT at the end
         ORDER  BY localt, entity, msrmnt
         -- LIMIT ???'   -- instead of LIMIT at the end
     , $$SELECT generate_series(1,5)$$)  -- more?
     AS ct (row_name int, localt timestamp, entity int
          , msrmnt01 float8, msrmnt02 float8, msrmnt03 float8, msrmnt04 float8, msrmnt05 float8 -- , more?
            )
LIMIT 1000  -- ??!! 
```

难怪您的测试中的查询执行得非常糟糕。您的测试设置有 1400 万行，您在处理*所有*这些行之前，将其中的大部分用`LIMIT 1000`. 对于减少的结果集添加`WHERE`条件或`LIMIT`源查询！

此外，您使用的阵列非常昂贵。我改为使用 dense_rank() 生成一个代理行名称。

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_11&fiddle=aec17a9bc608ae426007c0872eba8109)* - 使用更简单的测试设置和更少的行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-21T23:15:59.243

在我最初的问题中，我应该将它用于我的示例数据：

```
CREATE TEMP TABLE t4 (
 timeof    date
,entity    integer
,status    integer
,ct        integer);
INSERT INTO t4 VALUES 
 ('2012-01-01', 1, 1, 1)
,('2012-01-01', 1, 0, 2)
,('2012-01-01', 3, 0, 3)
,('2012-01-02', 2, 1, 4)
,('2012-01-02', 3, 1, 5)
,('2012-01-02', 3, 0, 6); 
```

有了这个，我必须同时关注时间和实体。由于`tablefunc`只使用一列进行透视，因此您需要找到一种方法将两个维度都填充到该列中。（[http://www.postgresonline.com/journal/categories/24-tablefunc](http://www.postgresonline.com/journal/categories/24-tablefunc)）。我选择了数组，就像那个链接中的例子一样。

```
SELECT (timestamp 'epoch' + row_name[1] * INTERVAL '1 second')::date 
           as localt, 
           row_name[2] As entity, status1, status0
FROM crosstab('SELECT ARRAY[extract(epoch from timeof), entity] as row_name,
                    status, ct
               FROM t4 
               ORDER BY timeof, entity, status'
     ,$$VALUES (1::text), (0::text)$$) 
          as ct (row_name integer[], status1 int, status0 int) 
```

FWIW，我尝试使用字符数组，到目前为止，我的设置看起来更快；9.2.3 PostgreSQL。

这是结果和期望的输出。

```
localt           | entity | status1 | status0
--------------------------+---------+--------
2012-01-01       |   1    |    1    |   2
2012-01-01       |   3    |         |   3
2012-01-02       |   2    |    4    |  
2012-01-02       |   3    |    5    |   6 
```

我很好奇这在更大的数据集上的表现如何，并将在以后报告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:43:36.517

好的，所以我在离我的用例更近的桌子上运行了这个。要么我做错了，要么交叉表不适合我使用。

首先我做了一些类似的数据：

```
CREATE TABLE public.test (
    id serial primary key,
    msrmnt integer,
    entity integer,
    localt timestamp,
    val    double precision
);
CREATE INDEX ix_test_msrmnt
   ON public.test (msrmnt);
 CREATE INDEX ix_public_test_201201_entity
   ON public.test (entity);
CREATE INDEX ix_public_test_201201_localt
  ON public.test (localt);
insert into public.test (msrmnt, entity, localt, val)
select *
from(
SELECT msrmnt, entity, localt, random() as val 
FROM generate_series('2012-01-01'::timestamp, '2012-01-01 23:59:00'::timestamp, interval '1 minutes') as localt
join 
(select *
FROM generate_series(1, 50, 1) as msrmnt) as msrmnt
on 1=1
join 
(select *
FROM generate_series(1, 200, 1) as entity) as entity
on 1=1) as data; 
```

然后我运行了几次交叉表代码：

```
explain analyze
SELECT (timestamp 'epoch' + row_name[1] * INTERVAL '1 second')::date As localt, row_name[2] as entity
    ,msrmnt01,msrmnt02,msrmnt03,msrmnt04,msrmnt05,msrmnt06,msrmnt07,msrmnt08,msrmnt09,msrmnt10
    ,msrmnt11,msrmnt12,msrmnt13,msrmnt14,msrmnt15,msrmnt16,msrmnt17,msrmnt18,msrmnt19,msrmnt20
    ,msrmnt21,msrmnt22,msrmnt23,msrmnt24,msrmnt25,msrmnt26,msrmnt27,msrmnt28,msrmnt29,msrmnt30
    ,msrmnt31,msrmnt32,msrmnt33,msrmnt34,msrmnt35,msrmnt36,msrmnt37,msrmnt38,msrmnt39,msrmnt40
    ,msrmnt41,msrmnt42,msrmnt43,msrmnt44,msrmnt45,msrmnt46,msrmnt47,msrmnt48,msrmnt49,msrmnt50
    FROM crosstab('SELECT ARRAY[extract(epoch from localt), entity] as row_name, msrmnt, val
               FROM public.test
               ORDER BY localt, entity, msrmnt',$$VALUES  ( 1::text),( 2::text),( 3::text),( 4::text),( 5::text),( 6::text),( 7::text),( 8::text),( 9::text),(10::text)
                                                         ,(11::text),(12::text),(13::text),(14::text),(15::text),(16::text),(17::text),(18::text),(19::text),(20::text)
                                                         ,(21::text),(22::text),(23::text),(24::text),(25::text),(26::text),(27::text),(28::text),(29::text),(30::text)
                                                         ,(31::text),(32::text),(33::text),(34::text),(35::text),(36::text),(37::text),(38::text),(39::text),(40::text)
                                                         ,(41::text),(42::text),(43::text),(44::text),(45::text),(46::text),(47::text),(48::text),(49::text),(50::text)$$)
        as ct (row_name integer[],msrmnt01 double precision, msrmnt02 double precision,msrmnt03 double precision, msrmnt04 double precision,msrmnt05 double precision, 
                    msrmnt06 double precision,msrmnt07 double precision, msrmnt08 double precision,msrmnt09 double precision, msrmnt10 double precision
                 ,msrmnt11 double precision, msrmnt12 double precision,msrmnt13 double precision, msrmnt14 double precision,msrmnt15 double precision, 
                    msrmnt16 double precision,msrmnt17 double precision, msrmnt18 double precision,msrmnt19 double precision, msrmnt20 double precision
                 ,msrmnt21 double precision, msrmnt22 double precision,msrmnt23 double precision, msrmnt24 double precision,msrmnt25 double precision, 
                    msrmnt26 double precision,msrmnt27 double precision, msrmnt28 double precision,msrmnt29 double precision, msrmnt30 double precision
                 ,msrmnt31 double precision, msrmnt32 double precision,msrmnt33 double precision, msrmnt34 double precision,msrmnt35 double precision, 
                    msrmnt36 double precision,msrmnt37 double precision, msrmnt38 double precision,msrmnt39 double precision, msrmnt40 double precision
                 ,msrmnt41 double precision, msrmnt42 double precision,msrmnt43 double precision, msrmnt44 double precision,msrmnt45 double precision, 
                    msrmnt46 double precision,msrmnt47 double precision, msrmnt48 double precision,msrmnt49 double precision, msrmnt50 double precision)
limit 1000 
```

在第三次尝试获得这个：

```
QUERY PLAN
Limit  (cost=0.00..20.00 rows=1000 width=432) (actual time=110236.673..110237.667 rows=1000 loops=1)
  ->  Function Scan on crosstab ct  (cost=0.00..20.00 rows=1000 width=432) (actual time=110236.672..110237.598 rows=1000 loops=1)
Total runtime: 110699.598 ms 
```

然后我运行了几次标准解决方案：

```
explain analyze
select localt, entity, 
 max(case when msrmnt =  1 then val else null end) as msrmnt01
,max(case when msrmnt =  2 then val else null end) as msrmnt02
,max(case when msrmnt =  3 then val else null end) as msrmnt03
,max(case when msrmnt =  4 then val else null end) as msrmnt04
,max(case when msrmnt =  5 then val else null end) as msrmnt05
,max(case when msrmnt =  6 then val else null end) as msrmnt06
,max(case when msrmnt =  7 then val else null end) as msrmnt07
,max(case when msrmnt =  8 then val else null end) as msrmnt08
,max(case when msrmnt =  9 then val else null end) as msrmnt09
,max(case when msrmnt = 10 then val else null end) as msrmnt10
,max(case when msrmnt = 11 then val else null end) as msrmnt11
,max(case when msrmnt = 12 then val else null end) as msrmnt12
,max(case when msrmnt = 13 then val else null end) as msrmnt13
,max(case when msrmnt = 14 then val else null end) as msrmnt14
,max(case when msrmnt = 15 then val else null end) as msrmnt15
,max(case when msrmnt = 16 then val else null end) as msrmnt16
,max(case when msrmnt = 17 then val else null end) as msrmnt17
,max(case when msrmnt = 18 then val else null end) as msrmnt18
,max(case when msrmnt = 19 then val else null end) as msrmnt19
,max(case when msrmnt = 20 then val else null end) as msrmnt20
,max(case when msrmnt = 21 then val else null end) as msrmnt21
,max(case when msrmnt = 22 then val else null end) as msrmnt22
,max(case when msrmnt = 23 then val else null end) as msrmnt23
,max(case when msrmnt = 24 then val else null end) as msrmnt24
,max(case when msrmnt = 25 then val else null end) as msrmnt25
,max(case when msrmnt = 26 then val else null end) as msrmnt26
,max(case when msrmnt = 27 then val else null end) as msrmnt27
,max(case when msrmnt = 28 then val else null end) as msrmnt28
,max(case when msrmnt = 29 then val else null end) as msrmnt29
,max(case when msrmnt = 30 then val else null end) as msrmnt30
,max(case when msrmnt = 31 then val else null end) as msrmnt31
,max(case when msrmnt = 32 then val else null end) as msrmnt32
,max(case when msrmnt = 33 then val else null end) as msrmnt33
,max(case when msrmnt = 34 then val else null end) as msrmnt34
,max(case when msrmnt = 35 then val else null end) as msrmnt35
,max(case when msrmnt = 36 then val else null end) as msrmnt36
,max(case when msrmnt = 37 then val else null end) as msrmnt37
,max(case when msrmnt = 38 then val else null end) as msrmnt38
,max(case when msrmnt = 39 then val else null end) as msrmnt39
,max(case when msrmnt = 40 then val else null end) as msrmnt40
,max(case when msrmnt = 41 then val else null end) as msrmnt41
,max(case when msrmnt = 42 then val else null end) as msrmnt42
,max(case when msrmnt = 43 then val else null end) as msrmnt43
,max(case when msrmnt = 44 then val else null end) as msrmnt44
,max(case when msrmnt = 45 then val else null end) as msrmnt45
,max(case when msrmnt = 46 then val else null end) as msrmnt46
,max(case when msrmnt = 47 then val else null end) as msrmnt47
,max(case when msrmnt = 48 then val else null end) as msrmnt48
,max(case when msrmnt = 49 then val else null end) as msrmnt49
,max(case when msrmnt = 50 then val else null end) as msrmnt50
from sample
group by localt, entity
limit 1000 
```

在第三次尝试获得这个：

```
QUERY PLAN
Limit  (cost=2257339.69..2270224.77 rows=1000 width=24) (actual time=19795.984..20090.626 rows=1000 loops=1)
  ->  GroupAggregate  (cost=2257339.69..5968242.35 rows=288000 width=24) (actual time=19795.983..20090.496 rows=1000 loops=1)
        ->  Sort  (cost=2257339.69..2293339.91 rows=14400088 width=24) (actual time=19795.626..19808.820 rows=50001 loops=1)
              Sort Key: localt
              Sort Method: external merge  Disk: 478568kB
              ->  Seq Scan on sample  (cost=0.00..249883.88 rows=14400088 width=24) (actual time=0.013..2245.247 rows=14400000 loops=1)
Total runtime: 20197.565 ms 
```

因此，就我而言，到目前为止，交叉表似乎不是一个解决方案。这只是我将拥有多年的一天。事实上，我可能不得不使用宽格式（非规范化）表，尽管对实体进行的测量是可变的并且引入了新的测量，但我不会在这里讨论。

这是我使用 Postgres 9.2.3 的一些设置：

```
name                    setting
max_connections             100
shared_buffers          2097152
effective_cache_size    6291456
maintenance_work_mem    1048576
work_mem                 262144 
```****

# javascript - 使用 javascript/jquery 比较两个跨度

> ID：15415452
> 
> 赞同：0
> 
> 时间：2013-03-14T16:53:24.310
> 
> 标签：javascript, jquery, html

我在尝试查看跨度是否包含另一个时遇到问题。所以，我有一个可拖动的项目，它需要在另一个跨度中才能显示消息。
如果我的 span #piece 在 span #answer 中，我如何使用 jquery 或 javascript 检查？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:54:28.203

使用 jQuery `contains`。[在这里](http://api.jquery.com/jQuery.contains/)阅读。

**编辑：**

不过，您需要将第一个参数转换为 DOM 元素。如果这不是微不足道的事情，`find`那就更好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:55:49.027

```
if ($('#answer').find('#piece').length == 1)
// your span is inside 
```

# python - 使用 matplotlib 按样本绘制概率密度函数

> ID：15415455
> 
> 赞同：26
> 
> 时间：2013-03-14T16:53:27.913
> 
> 标签：python, matplotlib, histogram, probability

我想根据我拥有的样本绘制概率密度函数的近似值；模仿直方图行为的曲线。我可以有我想要的任意大的样本。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-14T17:01:44.193

如果你想绘制一个分布，并且你知道它，将它定义为一个函数，然后绘制它：

```
import numpy as np
from matplotlib import pyplot as plt

def my_dist(x):
    return np.exp(-x ** 2)

x = np.arange(-100, 100)
p = my_dist(x)
plt.plot(x, p)
plt.show() 
```

* * *

如果您没有精确的分布作为分析函数，也许您可​​以生成一个大样本，获取直方图并以某种方式平滑数据：

```
import numpy as np
from scipy.interpolate import UnivariateSpline
from matplotlib import pyplot as plt

N = 1000
n = N//10
s = np.random.normal(size=N)   # generate your data sample with N elements
p, x = np.histogram(s, bins=n) # bin it into n = N//10 bins
x = x[:-1] + (x[1] - x[0])/2   # convert bin edges to centers
f = UnivariateSpline(x, p, s=n)
plt.plot(x, f(x))
plt.show() 
```

您可以在函数调用中增加或减少`s`（平滑因子）以增加或减少平滑。`UnivariateSpline`例如，使用你得到的两个： ![dist to func](../Images/89678c5e49ce0fdd77bfd0e350f4cf07.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-14T19:39:19.687

您需要做的是使用 scipy.stats.kde 包中的 gaussian_kde。

给定您的数据，您可以执行以下操作：

```
from scipy.stats.kde import gaussian_kde
from numpy import linspace
# create fake data
data = randn(1000)
# this create the kernel, given an array it will estimate the probability over that values
kde = gaussian_kde( data )
# these are the values over wich your kernel will be evaluated
dist_space = linspace( min(data), max(data), 100 )
# plot the results
plt.plot( dist_space, kde(dist_space) ) 
```

内核密度可以随意配置，可以轻松处理N维数据。它还将避免您可以在 askewchan 给出的图中看到的样条扭曲。

![在此处输入图像描述](../Images/8049028e2b357c8010e22422f0d2b1d5.png)

# ruby-on-rails - 按视图和时间轨排序

> ID：15415457
> 
> 赞同：0
> 
> 时间：2013-03-14T16:53:33.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为 images 的表，其中包含一个名为 impressions_count 的字段，我想按impresss_count 和一周前创建的图像进行排序。

我已经尝试过了，但它不能正常工作，它只能按impresss_count 排序。

```
@images = Image.unscoped.order("impressions_count DESC, created_at < ?", DateTime.now - 1.week).limit(10)

  Image Load (0.2ms)  SELECT "images".* FROM "images" ORDER BY impressions_count DESC, created_at < ?, '2013-03-07 16:49:50' LIMIT 10 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:58:43.913

你可以试试：

```
@images = Image.unscoped.where('created_at > ?', 1.week.ago).order('impressions_count DESC') 
```

# php - 一个用户名用于所有数据库或多个 MySQL 帐户？

> ID：15415461
> 
> 赞同：2
> 
> 时间：2013-03-14T16:53:36.033
> 
> 标签：php, mysql, web-applications, database-design

假设我有一个像 CMS 之类的 PHP Web 应用程序，并且每个新用户在服务器上都有自己的托管区域 - 他们应该都有自己的 mySQL 用户名和密码以及与他们的帐户绑定的站点数据的数据库，或者更确切地说一个 mySQL 用户/通行证，Web 应用程序使用该用户与该帐户上具有数据库的所有用户连接？

如果您获得大量用户（60-100+），这是否存在任何性能问题？

例如，例如这样的数据库结构：

```
(prefix) host_
              userDB1
              userDB2
              userDB3
              ...
etc. 
```

每个应用程序使用一个 mysql 帐户连接到各自的数据库并从表中提取数据？

或者每个用户数据库（其中可能有很多表）是否应该在他们自己的主机区域下，每个用户都有一个单独的 mysql 帐户？

我希望这是有道理的。我一直在环顾四周并阅读了很多资料，试图找到构建最终需要处理大量用户的数据库的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:58:14.527

根据您关于所有数据库访问都是通过应用程序的声明，我不明白为什么您希望为每个客户端拥有单独的用户，因为最终您的应用程序将需要构建以处理用户权限。

现在，您是否选择使用单独的数据库实际上是您需要做出的设计决策，并且可能取决于您在应用程序中需要多少数据分离、应用程序数据管理流程（即执行数据库备份）、是否需要每个用户的自定义模式，是否需要能够轻松地跨用户聚合数据等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T02:12:14.317

有趣的问题。你看，如果我们考虑一下linux，我们就会得到你“管理”问题的答案。

例如，对于每个服务，您可能在 linux 服务器上拥有不同的用户，因此如果一个用户受到威胁，那么只有一个服务也会受到影响。您可以只担心一个问题而不是多个问题。

我还建立了一个 CRM，几年前就有这个疑问。我对每个数据库使用一个用户名和密码，并且（只是为了确保它真的安全），每个数据库都有一个允许进行更改的用户，另一个只使用“select”语句。

我这样做也是因为我喜欢检查正在使用 mysql 的用户，有时知道请求来自哪里并密切关注它是有用的。

您的 CRM 有安装程序，对吗？您可以轻松地创建数据库、用户并添加到数据库中。所以这很容易，不会占用您的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:16:35.670

我希望每次吊装都有一个帐户。并将用户的写权限限制在他的数据库中。

# android - 使用ROM Android 4.0+隐藏导航栏

> ID：15415463
> 
> 赞同：0
> 
> 时间：2013-03-14T16:53:46.290
> 
> 标签：android, uinavigationbar

我一直在寻找一种在 Android 4.0 及更高版本上隐藏导航栏的方法。我了解到，通过编码是不可能的。我开始寻找一种使用 ROM 的方法，但我对此一无所知，也没有经验。如果有链接或方法，我想学习它。

顺便说一句，我也在寻找一种方法来锁定最近的应用程序和设置（Android 4.0 右下角的时钟）按钮。我问了一个关于 SOF 的第二件事的问题，但没有代码帮助我。如果您有示例代码或方法，请通知我。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:00:20.400

您必须设置全屏窗口并设置`setSystemUiVisibility()`属性。

`view.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);`

***删除导航栏的应用程序：（需要root访问权限）***

[http://ppareit.github.com/HideBar/](http://ppareit.github.com/HideBar/)

***根据评论，HideBar 的源代码：***

[https://github.com/ppareit/HideBar/](https://github.com/ppareit/HideBar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T15:28:24.783

从androidcentral.com 上的[这个](http://forums.androidcentral.com/nexus-4-rooting-roms-hacks/239975-remove-navigation-bar.html#post2486661)线程：

> 1.  在 /system 中 build.prop 的末尾添加“qemu.hw.mainkeys=1”（不带引号）
> 2.  重启

我自己没有尝试过，但人们声称它有效。

# django - Django Celery 最大递归深度超过

> ID：15415468
> 
> 赞同：0
> 
> 时间：2013-03-14T16:54:05.577
> 
> 标签：django, django-views, django-celery

第一次试用 Django Celery，这是 Django 和 Celery 的新手。

以下是我到目前为止尝试的内容，但出现以下错误...

**/contacts/upload 处的 RuntimeError 超出最大递归深度**

我正在使用 SQS 和消息代理。

**设置.py**

```
# Celery

import djcelery
djcelery.setup_loader()

INSTALLED_APPS += (
    'south',
    'userena',
    'social_auth',
    'djcelery',

)

BROKER_TRANSPORT = 'sqs'
BROKER_TRANSPORT_OPTIONS = {
    'region': 'eu-west-1',
    }
BROKER_USER = 'xyz'
BROKER_PASSWORD = 'zyx' 
```

**任务.py**

```
@task
def upload(request, **kwargs):
    file = request.FILES['file']
    ContactCSVModel.import_from_file(file)
    return True 
```

**视图.py**

```
@login_required
def upload(request):

            result = upload(request)
            if result:
                messages.add_message(request, messages.SUCCESS, 'Items have been added to the database.')
        else:

         etc 
```

有人可以帮我理解我在这里做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:58:25.357

你的任务和你的视图被称为*完全相同*的东西。

所以当你这样做时：

```
result = upload(request) 
```

你并没有像我想的那样调用你的任务，而是再次调用你的视图函数。然后再次。然后再次。然后再次。

尝试将您的视图 def 更改为：

```
def upload_file(request): 
```

应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:00:20.917

重命名您的任务：

```
@task
def upload_task():
    ...

def upload(request):
    result = upload_task(request) 
```

如果视图和任务具有相同的名称，则在上传视图内部，当调用上传时，上传是上传视图本身。

# javascript - Eclipse 中的 Javascript 语法高亮不工作？

> ID：15415469
> 
> 赞同：15
> 
> 时间：2013-03-14T16:54:11.007
> 
> 标签：javascript, eclipse, syntax-highlighting

我想为我正在使用的一些 Javascript 代码突出显示语法，所以我通过 Eclipse 安装了“Web Developer Tools”和“Javascript Developer Tools”。我检查了首选项以确保启用了语法突出显示，但它似乎不起作用。

我做了一些搜索，似乎对于不是作为 Javascript 项目创建的项目，语法高亮[不起作用](http://steve.blogs.loeppky.com/2010/10/javascript-validation-in-java-project.html)。

实际上，我不确定如何在该网页上实施解决方案，我不确定“vim”是什么。（我不认为这是文本编辑器）

是否有另一种方法可以使这种语法突出显示工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T17:01:18.047

检查“文件关联”设置以确保 *.js 文件默认与 JavaScript 编辑器关联。

*   窗口 > 首选项
*   常规 > 编辑器 > 文件关联
*   在“文件类型”下选择“*.js”
*   如果不存在，请在“关联编辑器”下单击“添加...”并选择内部 > JavaScript 编辑器
*   在“关联编辑器”下单击“JavaScript 编辑器”并选择“默认”按钮

如果您在 JavaScript 透视图中进行开发，则应该已经设置了此项。您可能正在以没有此关联预设的不同视角进行开发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-04-27T04:39:14.823

文件关联绝对是一个检查的地方。在 2021-03 版本中，通用文本编辑器实际上具有 js 突出显示。我以前的默认设置是文本编辑器。当我切换到通用文本编辑器时，它可以工作![在此处输入图像描述](../Images/64945deaa53b2142d8356f43ac2f60df.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-30T08:47:57.983

“Web 开发人员工具”实际上不起作用：它看起来像一个错误，因为无论我尝试在“首选项”中进行什么修改，javascript 文件中都没有语法高亮显示）。

（并且“Javascript 开发人员工具”不再存在）

您需要安装**“Wild Web Developer”**（“帮助”>“安装新软件”并搜索“Wild Web Developer”）。

安装后，重新启动，它会开箱即用（无需在“首选项”中摆弄）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T16:31:29.740

在新的[Eclipse Oxygen](http://www.eclipse.org/downloads/packages/eclipse-ide-javascript-and-web-developers/oxygenm4)构建中，“recurrences highlighter”一词本机工作，无需特殊插件。它适用于**XML/HTML/JS**编辑器 - 只需双击一个单词，就可以看到（*几乎）所有重复出现的突出显示：

[![在此处输入图像描述](../Images/4da53a5de2c6f2cd66b80529d2193fdc.png)](https://i.stack.imgur.com/LzpJK.png)

* 它忽略评论标签内的单词。

# jquery - 无法使用 jquery 找到特定的 a 的 href

> ID：15415471
> 
> 赞同：0
> 
> 时间：2013-03-14T16:54:16.377
> 
> 标签：jquery

我正在处理一些列表项和 readicon 类单击我无法捕获带有类书路径的 href 值。在这种情况下（google.com）
这里是代码

```
<li >
  <div class="overlay">
  <span id="Title">Yeah Dude</span>
  <img class="readIcon" src="images/read.png" />
  </div>
 <a class="bookPath" href="http://www.google.com"><img src="images/bookCovers/asp.net4.5.jpg"  alt="book" /></a></li> 
```

我试过这段代码，但它返回未定义。

```
$(document).ready(function () {
$(".overlay .readIcon").click(function () {
    //    $(this).('href', 'index.html');
    var bookPath = $(this).parents('li').closest('a').href;
    alert(bookPath);

});}); 
```

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:58:49.443

将您的查询更改为：

```
$(document).ready(function () {
    $(".overlay .readIcon").click(function () {
        var bookPath = $(this).parents('li').children('a').attr('href');
        alert(bookPath);
    });
}); 
```

小提琴：http: [//jsfiddle.net/Lbr4z/](http://jsfiddle.net/Lbr4z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:56:13.980

获取 href 属性值。用于`closest`获取外里并用于`find`获取锚点

```
var bookPath = $(this).closest('li').find('a').attr("href"); 
```

Jsfiddle 示例：http: [//jsfiddle.net/4QGHS/5/](http://jsfiddle.net/4QGHS/5/)

另外，在做 jQuery 选择器时，**尽量做到更具体**。`find('a')`将返回所有锚标签。所以你最好使用你正在寻找的元素的***类名。***试着给你的`li`元素一个类。

```
<li class='bookItem'>
  <div class="overlay">
  // your other html goes here 
   <img class="readIcon" src="someImage.jog" /> 
  </div>
  <a class="bookPath" href="http://www.google.com"></a>
</li> 
```

现在你的 javascript 将是

```
$(function(){

 $(".overlay .readIcon").click(function (e) {
    e.preventDefault();  //prevent as needed.
    var bookPath = $(this).closest('li.bookItem').
                                            find('a.bookPath').attr("href");
    alert(bookPath);
 });

}); 
```

Jsfiddle 示例[http://jsfiddle.net/4QGHS/9/](http://jsfiddle.net/4QGHS/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:56:53.893

使用`$(selector).attr("href");`:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:05:32.303

有很多方法可以做到这一点，这就是其中之一。

```
 $(document).ready(function () {

    $(".overlay .readIcon").click(function () {
        //    $(this).('href', 'index.html');
        var bookPath = $(this).parent().parent().find("a.bookPath").attr("href");
        alert(bookPath);

    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T17:09:58.530

尝试`.siblings()`

```
var bookPath = $(this).parent().siblings('a').attr('href'); 
```

尝试`.find()`

```
var bookPath = $(this).closest('li').find('a').attr('href'); 
```

如果您想更具体，那么：

```
var bookPath = $(this).closest('li').find('a.bookPath').attr('href'); 
```

# macos - 别名在 mac 中不起作用

> ID：15415472
> 
> 赞同：-3
> 
> 时间：2013-03-14T16:54:16.977
> 
> 标签：macos, alias

当我尝试在 mac 机器上设置别名时出现此错误。有没有人遇到过这个问题。

```
sh-3.2# alias lf 'ls -F'
sh: alias: lf: not found
sh: alias: ls -F: not found
sh-3.2# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:26:29.590

看起来你缺少一个等号。它应该是：

别名 lf='ls -F'

# ios - 如何停止 UISegmentedControl 的 VoiceOver 公告？

> ID：15415474
> 
> 赞同：6
> 
> 时间：2013-03-14T16:54:19.723
> 
> 标签：ios, accessibility

我的应用程序有一个`UISegmentedControl`包含两个按钮。我能够访问每个按钮的可访问性字段；我遇到的问题是，对于分段控件的子视图，VoiceOver 会读出子视图的可访问性属性，然后宣布视图在分段控件中的位置，因此第一个按钮的 VoiceOver 公告是“上一条消息。按钮。其中一个二。” 对于第二个按钮，它是“下一条消息。按钮。两个中的两个。”

如何防止这些公告的最后一部分（“二选一”和“二选一”部分）对 VoiceOver 用户没有实际意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:21:13.633

您可以将's subviews 的`accessibilityTraits`属性设置为禁用 VoiceOver 的“Tab X of Y”部分：`UISegmentedControl``UIAccessibilityTraitNone`

```
 for (UIView *thisView in self.segmentedControl.subviews) {
        [thisView setAccessibilityTraits:UIAccessibilityTraitNone];
    } 
```

# java - Java - 当基数 = 2 时，Integer.parseInt() 不返回负数

> ID：15415478
> 
> 赞同：2
> 
> 时间：2013-03-14T16:54:23.513
> 
> 标签：java, binary, parseint

据我所知，当使用 2 的补码时，第一个数字是 1，然后翻转数字并找到新字节的值并将其设为负数。javadoc 说 Integer.parseInt(String s, radix ) 和 Integer.valueOf(String s, radix) 都应该返回一个有符号整数对象，但是当我用这个测试它时：

```
System.out.println(Integer.parseInt("10000001", 2));

System.out.println(Integer.valueOf("10000001", 2)); 
```

我得到：

```
129

129 
```

即使我的计算得到-127。有趣的是

```
System.out.println(Integer.parseInt("-10000001", 2)); 
```

打印出来：

```
-129 
```

任何人都知道不同的java方法，如果你输入一个字节（和radix = 2），那么该方法将返回一个正确签名的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T17:02:05.643

如果它总是一个字节，那么这应该可以解决问题：

```
int i = Integer.parseInt("10000001", 2);
byte b = (byte) i; 
```

整数值为 129，但当您将其转换为字节时，它将变为 -127。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:57:56.877

所以你要

```
Integer.parseInt("1", 2) == -1? 
```

您始终可以将字符串解析为 32 位整数，然后如果值为 128-255，请手动将其转换为负补码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:56:55.883

[Integer.parseInt(String s,int radix)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)

> 将字符串参数解析为第二个参数指定的基数中的有符号整数。字符串中的字符必须都是指定基数的数字（由 Character.digit(char, int) 是否返回非负值决定），除了第一个字符可能是 ASCII 减号 '-' ('\u002D ') 表示负值。返回结果整数值。

所以 Integer.parseInt("anyvalue", 2) 永远不会返回 -some 值，除非第一个字符不是'-'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T11:01:40.233

这是因为对于 int 10000001 不是 -127，int 有 32 位，这是第 31 位，它决定了数字是否为负。如果我们认为 10000001 是 -127 那么它是一个字节，而不是 int。但是 Byte.parseByte("10000001", 2) 无法解析二进制补码表示，会抛出 NumberFormatException。在 Java SE 中解析二进制补码表示的唯一方法是

```
byte b = new BigInteger("10000001", 2).byteValue(); 
```

这将产生预期的 -127

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-27T17:28:05.817

```
public static void main(String[] args) {
    int i = -4;

    /* returns the string representation of the unsigned integer value 
    represented by the argument in binary (base 2) */

    String convertedString  = Integer.toBinaryString(i);

    System.out.println(convertedString);

    /* Converting the binary format string back to integer value */
    int foo = new BigInteger(convertedString, 2).intValue();

    System.out.println(foo);
} 
```

# javascript - 将 HTML 表格数据填充到表单中

> ID：15415482
> 
> 赞同：0
> 
> 时间：2013-03-14T16:54:27.240
> 
> 标签：javascript, html

我正在尝试将我的 HTML 表格数据显示到表单中。当函数 showDetails 执行时，即当我单击 id 时，我从表格中获取未定义的值。

# r - 连接R中的列表列表

> ID：15415485
> 
> 赞同：5
> 
> 时间：2013-03-14T16:54:40.137
> 
> 标签：r

我有一个列表 TF2Gene[1326] 看起来像

```
view(TF2Gene)

structure(list(Sp1=c("a","b","c"),p53=c("x","y","z"),Elk1=c("1","2","3"),...)) 
```

所以它基本上是一个 1326 个列表的列表。

现在我想将这些列表的值连接到 1 中，以便我可以找到唯一的成员。我正在做的是：

```
cols <- unique(unlist(TF2Gene)) 
```

它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:04:52.207

是的，这是正确的做法。在上面的示例中，结果将是一个向量，例如：

```
c("a", "b", "c", "x", "y", "z", "1", "2", "3") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-21T14:46:11.527

这只有在您的列表具有原子元素时才有效。我的一般不会。试试这个。

```
do.call(c, list (list( 3,4,5 ) , list( "a","b" )))
[[1]]
[1] 3

[[2]]
[1] 4

[[3]]
[1] 5

[[4]]
[1] "a"

[[5]]
[1] "b" 
```

# html - 为什么容器大小取决于绝对定位的孩子？

> ID：15415488
> 
> 赞同：2
> 
> 时间：2013-03-14T16:54:49.043
> 
> 标签：html, css, css-position

我正在尝试使用两个视频框构建类似 Skype 的界面：

[http://jsfiddle.net/q9ER2/20/](http://jsfiddle.net/q9ER2/20/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style type="text/css">
            html, body
            {
                background-color: #000000;
                height: 100%;
                font-family: Verdana, Arial, Helvetica, sans-serif;
            }

            body
            {
                margin: 0;
                padding: 0;
            }

            #videoContainer
            {
                position: relative;
                max-width: 800px;
            }

            #bigRemote
            {
                /* Shrink if necessary */
                max-width: 100%;
                max-height: 100%;
            }
            #smallLocal
            {
                position: absolute;
                height: 30%;
                width: 30%;
                bottom: 0;
                right: 0;
            }
        </style>
  </head>
  <body>
        <div id="videoContainer">
            <video id="bigRemote" controls preload="none" poster="http://media.w3.org/2010/05/sintel/poster.png">
                <source id="mp4" src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4" />
                <source id="webm" src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm" />
                <source id="ogv" src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg" />
                <p>Your user agent does not support the HTML5 Video element.</p>
            </video>
            <video id="smallLocal" controls preload="none" poster="http://media.w3.org/2010/05/sintel/poster.png">
                <source id="mp4" src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4" />
                <source id="webm" src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm" />
                <source id="ogv" src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg" />
                <p>Your user agent does not support the HTML5 Video element.</p>
            </video>
        </div>
    </body>
</html> 
```

大框 ( `bigRemote`) 代表远程视频流。小方框 ( `smallLocal`)，代表本地视频流。

我遇到了一个问题：当您垂直缩小结果窗口时，`smallLocal`框会从`bigRemote`. 原因是它`smallLocal`绑定到的右下角，`videoContainer`而后者并没有像原来那样收缩`bigRemote`。

我的印象`position: absolute`是在确定容器的布局/大小时会忽略孩子。**当后者缩小时，我该****如何`videoContainer`适应？`bigRemote`**（我相信这样做会间接导致`smallLocal`粘在.的右下角`bigRemote`。）

*   我希望视频随其容器增大/缩小，因此您无法删除 max-width/height 或在`videoContainer`.
*   我希望视频保持其纵横比，所以让它的大小匹配`videoContainer`也不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:33:20.080

[jsFiddle**演示**](http://jsfiddle.net/J2qYe/show) [（编辑）](http://jsfiddle.net/J2qYe)

假设**要求**是：

*   保持原始视频比例
*   尽可能保持视频原始大小
*   调整视频大小以适合窗口
*   右下角的小视频
*   小视频总是大视频宽度的 30%
*   没有滚动条

我发现适用于（至少）Chrome 26.0、Firefox 19、IE9、IE10的**解决方案：**

HTML：

```
<div class="wrap"><video class="big" controls preload="none" poster="http://media.w3.org/2010/05/sintel/poster.png">
    <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4" />
    <source src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm" />
    <source src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg" />
    <p>Your user agent does not support the HTML5 Video element.</p>
</video><video class="small" controls preload="none" poster="http://media.w3.org/2010/05/sintel/poster.png">
    <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4" />
    <source src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm" />
    <source src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg" />
</video></div> 
```

CSS：

```
html, body{
    height: 100%;
    line-height: 0;
    font-size: 0;
}

.wrap{
    display: inline;
    position: relative;
}

.big{
    max-width: 100%;
    max-height: 100%;
}

.small{
    max-width: 30%;
    position: absolute;
    right: 0;
    bottom: 0;
} 
```

令人惊讶`display: inline`的是，这是唯一可以在包装器上按需要工作的显示类型。`inline-block`在 Firefox 中不起作用，并且在 Chrome 中存在一些问题。

`font-size`并`line-height`设置为避免一些`inline`间距问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:22:05.860

我删除了最大和最小宽度/高度属性并将视频容器设置为阻止。不确定这是否正是您所需要的，但看起来很接近：

[http://jsfiddle.net/q9ER2/5/](http://jsfiddle.net/q9ER2/5/)

```
html, body
{
    background-color:lime;
    height: 100%;
    font-family: Verdana, Arial, Helvetica, sans-serif;
}

body
{
    margin: 0;
    padding: 0;
}

#container
{
    background-color: red;
    position: relative;
    height: 100%;
    width: 100%;
    margin: 0 auto;
}

#bigRemote
{
}

#videoContainer
{
    position: relative;
}

#bigRemoteVideo
{
    /* Shrink if necessary */
    display:block;
    width: 100%;
}
#smallLocalVideo
{
    display:block;
    position: absolute;
    height: 30%;
    width: 30%;
    bottom: 0;
    right: 0;
} 
```

# android - Cordova/Phonegap 无法在 Android 上关闭自动隐藏以显示启动画面

> ID：15415489
> 
> 赞同：3
> 
> 时间：2013-03-14T16:54:52.957
> 
> 标签：android, cordova, splash-screen, cordova-2.0.0

我们正在使用 PhoneGap/Cordova 2.4。我们在关闭 Android 端启动画面的自动隐藏时遇到了问题。我的期望是，在显式调用 navigator.splashscreen.hide() 之前，不会隐藏启动画面。然而，对于我们的应用程序，启动画面被隐藏得更快。这向用户展示了一个尚未准备好与之交互的 HTML 页面。

根据 Cordova 文档，我们已将 Java 代码更新为如下所示

```
import android.os.Bundle;
import org.apache.cordova.*;

public class MyApp extends DroidGap
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.loadUrl(Config.getStartUrl(), 5000);
    }
} 
```

在这段 Javascript 代码中，我们在 setup 方法的末尾有这个。但是，正如我所提到的，启动画面被隐藏得更早了。另外，当我们去掉这条线时，闪屏仍然是隐藏的。这是代码：

```
 // tons of setup code ...
    Backbone.history.start()
    Backbone.trigger('app:ready')

    navigator.splashscreen.hide() 
```

我们还将这两个选项添加到 www/config.xml。我应该注意到 AutoHideSplashScreen 适用于 iOs 应用程序，但似乎对 android 应用程序没有影响。我从一个例子中找到了另一个选项，因为过去几天我一直在互联网上疯狂地搜索这个问题的解决方案。

```
<preference name="AutoHideSplashScreen" value="false" />
<preference name="auto-hide-splash-screen" value="false" /> 
```

任何帮助都会很棒。

提前致谢，

凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-08T16:37:36.977

你可以添加

```
<preference name="SplashScreenDelay" value="100000" /> 
```

到您的 config.xml 然后稍后只需按照您需要的方式以编程方式将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:49:22.420

只需为启动画面显示时间设置一个非常大的数字。例如，而不是

```
super.loadUrl(Config.getStartUrl(), 5000); 
```

做：

```
super.loadUrl(Config.getStartUrl(), 60000); // 60 seconds 
```

你在这里放什么值并不重要，只要它足够大，当你的 Javascript/CSS/HTML 完全加载时，还没有发生超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T16:32:20.173

必须在设备就绪后进行调用

```
.run(function($ionicPlatform, $cordovaSplashscreen) {
    $ionicPlatform.ready(function() {
        $cordovaSplashscreen.hide();
    })
}); 
```

至少这对我有用。希望它也适用于你们。

# clojure - 这是惯用的 Clojure 吗？

> ID：15415493
> 
> 赞同：7
> 
> 时间：2013-03-14T16:55:05.707
> 
> 标签：clojure

我已经开始使用 Clojure 做 Project Euler，作为学习 Clojure 的第一次尝试。我已经解决了第一个任务：

> 求 1000 以下所有 3 或 5 的倍数之和。

我以前用 Python 解决过它：

```
sum(i for i in xrange(1000) if i%3==0 or i%5==0) 
```

这是我的第一次 Clojure 尝试：

```
(reduce +
  (filter 
    (fn [x]
      (or 
        (= 0 (mod x 3)) 
        (= 0 (mod x 5))))
    (range 1000))) 
```

我实际上对它的冗长感到惊讶，但我很确定这是因为我的风格和对 Clojure 习语的无知。

这个 Clojure 代码的惯用版本会是什么样子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T16:58:13.980

我是这样做的：

```
(apply +
  (filter #(or (zero? (mod % 3))
               (zero? (mod % 5)))
    (range 1000))) 
```

使我的解决方案*更加*惯用的原因是使用匿名函数阅读器宏，`#(...)`以及`zero?` `fn`

您的解决方案**不同**但同样**好**！

顺便说一句 - 解决欧拉问题是学习一门新语言的好方法 - 你不能从一本书中得到所有东西。

**编辑：**

我决定提供一个更符合您的 Python 版本的不同解决方案（不是很漂亮的 IMO）

```
(apply +
  (for [i (range 1000) :when (or (zero? (mod i 3))
                                 (zero? (mod i 5)))]
    i)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T17:05:43.197

只是另一个版本：

```
(defn sum-of [n]
  (reduce + (range n 1000 n)))

(+ (sum-of 3) (sum-of 5) (- (sum-of 15))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:46:14.193

我喜欢尝试解决 Project Euler 的通用解决方案，所以这是我的通用解决方案：

```
(defn sum-multiples [nums lim]
  (reduce
   +
   (filter
    (fn [x]
      (some identity
            (map #(zero? (mod x %)) nums)))
    (range lim)))) 
```

然后只需调用：

```
(sum-multiples [3 5] 1000) 
```

# jquery - jQuery AJAX 在 202 响应上调用错误回调 - 这不应该是成功回调吗？

> ID：15415498
> 
> 赞同：10
> 
> 时间：2013-03-14T16:55:24.283
> 
> 标签：jquery

好吧，这一切都在标题中。我正在尝试在执行破坏性操作之前检查用户的密码：

```
$.ajax({
  type: 'POST',
  url: '/path/to/post.json',
  data: { password: '**********' },
  success: function() { console.log("Success!"); },
  error: function() { console.log("Error!"); }
}); 
```

在控制台中：

```
202 Accepted 123ms
Error! 
```

我认为 403 Forbidden for wrong password 和 202 Accepted for correct password 将是适当的响应代码，但老实说，我对 HTTP 知之甚少。

jQuery 版本 1.8.3

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T17:12:13.353

由于状态为 202，但由于将响应解析为 JSON 时出错，因此不会触发错误回调。对于 jQuery，`2xx`并且`304`是成功的。

如果响应正文是`Invalid Password`无效的 json 并在尝试解析它时触发 jQuery 错误。正确的 JSON 字符串在其周围有引号，例如`"Invalid Password"`. 您应该使用 JSON 序列化程序对响应进行 JSON 编码，而不是手动构造 json，您可以看到这很容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:57:01.863

没关系，让它工作

```
statusCode: {
  202: function() { console.log("Success!"); },
  403: function() { console.log("Error!'); }
} 
```

而不是`success`和`error`回调。仍然有点令人费解的 202 会触发错误。

# c++ - 带有纪元时间和天数月年的算法....C++

> ID：15415503
> 
> 赞同：0
> 
> 时间：2013-03-14T16:55:43.920
> 
> 标签：c++, datetime, epoch

嘿伙计们，所以我试图用纪元时间创建一个时间戳。到目前为止，小时分秒和毫秒都没有问题。但是，我正处于一个十字路口，如何弄清楚月份和时间的日期。首先有2个问题。每个月的天数变化，没有一致的模式和处理闰年的问题。我一直在为如何实施适当的系统而苦苦挣扎。我想我可以走有条件的路线，但是也许我也可以实现某种表格（讲师给出的提示。

到目前为止，如果有人感兴趣，这是我最多可以使用几个小时的算法。

```
28 ExpandedTime* localTime(struct timeval* tv, ExpandedTime* etime)
 29 {
 30     tzset();                                    // Corrects timezone
 31
 32     int epochT = (tv->tv_sec) - timezone;       // Epoch seconds with
 33     int epochUT = tv->tv_usec;                  // Timezone correction
 34
 35     int seconds = epochT % 60;
 36     epochT /= 60;
 37     etime->et_sec = seconds;
 38     etime->et_usec = epochUT;
 39
 40     int minutes = epochT % 60;
 41     epochT /= 60;
 42     etime->et_min = minutes;
 43
 44     int hours = (epochT % 24) + daylight;       // Hours with DST correction
 45     epochT /= 24;
 46     etime->et_hour = hours;
 47
 48
 49     printf("%d,%d,%d\n", seconds, minutes, hours);
 50     printf("%d\n", epochUT);
 51     printf("%d\n", timezone);
 52     printf("%d\n", daylight);
 53     return etime;
 54
 55 }
 56
 57 char* formatTime(struct timeval* tv, char* buf, size_t len)
 58 {
 59
 60 struct ExpandedTime etime2;
 61 localTime(tv, &etime2);
 62 snprintf();
 63 } 
```

它的未完成我目前只是停留在如何实施年月日。如果有人能引导我朝着正确的方向前进，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:51:20.107

将 Unix 纪元日期 (1/1/1970 00:00) 转换为其等效的儒略日期，将时间从秒转换为天，并将结果添加到纪元的儒略日期。这将为您提供所需时间的儒略日期。最后，将儒略日期转换回日期和时间。

您可以在网上找到适当的公式来转换儒略日期和从儒略日期转换。

# emacs - 突出显示emacs中的多个缓冲区

> ID：15415504
> 
> 赞同：3
> 
> 时间：2013-03-14T16:55:46.247
> 
> 标签：emacs

我有几个突出显示文件，它们在突出显示和来回跳转`elisp`方面做得非常出色。`similar words`但有时我有一个`.h`并`.cpp`打开的，我希望能够在它们并排打开时突出显示它们中的变量或函数。

我试图搜索这样的包，但真的找不到任何东西。有没有人有这样一个系统或这样一个系统的信息，它在 emacs 的可见缓冲区中突出显示所有相同的单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-22T02:31:36.960

是的，您可以使用库[**Highlight**](https://www.emacswiki.org/emacs/HighlightLibrary)*以各种方式同时突出显示和取消突出显示多个缓冲区*。[](https://www.emacswiki.org/emacs/HighlightLibrary)

 **对于您选择的每个缓冲区，您可以突出显示或取消突出显示活动区域或整个缓冲区内的正则表达式匹配项。您可以使用文本属性或覆盖来突出显示，使用属性`face`或`mouse-face`.

您可以`highlight.el`从[EmacsWiki](https://www.emacswiki.org/emacs/download/highlight.el)或[MELPA](https://melpa.org/#/highlight)获取库。**

# javascript - Jquery Colorbox - 保留加载动画，直到单独的 ajax 内容准备好

> ID：15415515
> 
> 赞同：1
> 
> 时间：2013-03-14T16:56:13.693
> 
> 标签：javascript, jquery, ajax, colorbox

以下面的示例 javascript 函数为例：

```
function Admin_AccountDetails(UserID) {
    //$.colorbox({ title: "Loading, Please wait", opacity: "0.5", width: "500px", height: "200px" });
    $.ajax({
        url: "ajax.aspx?ajaxid=3&UserID=" + UserID,
        cache: false,
        success: function(response) {
            $.colorbox({ title: "Account Details (UserID: " + UserID + ")", opacity: "0.5", width: "700px", height: "250px", html: response });
        },
        error: function(xhr) {
            HandleBadAjaxResponse(xhr.status);
        }
    });
} 
```

这个函数的想法是使用我们预先存在的函数（注意使用`HandleBadAjaxResponse()`etc）加载 ajax 内容，并在 ColourBox div 中显示结果内容。

这可行，但在返回 ajax 内容之前不显示颜色框。

我们想做的是让 Colourbox 默认加载动画，而 ajax 请求正在流失。

**编辑：到目前为止的结果**

起初我尝试了大卫建议的 iframe 方法：

```
$.colorbox({ iframe: true, title: "Loading, Please wait", opacity: "0.5", width: "500px", height: "200px", html: "&nbsp;", fastIframe: false }); 
```

然而，这并没有按预期工作，是的，颜色框在 ajax 请求运行时立即出现，但是因为我们已经使用`iframe`并且`html: "&nbsp;"`第一个框没有加载 gif - 当加载 gif 出现时ajax 调用完成并调整了框的大小，我在我的 ajax 后端代码中注入了 2 秒的延迟来演示这个问题：

[http://www.heavencore.co.uk/filehub/Videos/StackOverflow/WithTwoSecondDelay.avi](http://www.heavencore.co.uk/filehub/Videos/StackOverflow/WithTwoSecondDelay.avi)

接下来我尝试从第一个框中删除 iframe 和 html 标签，这意味着加载 giff 在 ajax 请求的整个持续时间内都是可见的 - 但是它也忽略了宽度和高度参数并绘制了一个巨大的颜色框 -仅当 ajax 请求返回时才更正大小，另一个视频再次显示：

```
$.colorbox({ title: "Loading, Please wait", opacity: "0.5", width: "500px", height: "200px" }); 
```

[http://www.heavencore.co.uk/filehub/Videos/StackOverflow/AlmostCorrect.avi](http://www.heavencore.co.uk/filehub/Videos/StackOverflow/AlmostCorrect.avi)

如果我能让它像[这样](http://www.heavencore.co.uk/filehub/Videos/StackOverflow/AlmostCorrect.avi)工作，但尺寸正确，那就太完美了——有什么想法吗？

我唯一能想到的就是自己更改 ColorBox js 文件中的默认宽度和高度：

```
(function ($, document, window) {
    var
    // Default settings object.
    // See http://jacklmoore.com/colorbox for details.
    defaults = {
        transition: "elastic",
        speed: 300,
        width: false,
        initialWidth: "500",
        innerWidth: false,
        maxWidth: false,
        height: false,
        initialHeight: "200", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:22:11.163

如果我正确理解您的需求，以下 $.ajax 解决方案应该适合您。实际上，您需要做的就是在开始通话之前设置颜色框。响应将确定您此时显示的内容，错误回调会自动处理您的逻辑。

```
function Admin_AccountDetails(UserID) {
    $.colorbox({iframe:true, title: "Loading, Please wait", width: "500px", height: "200px", html: "&nbsp;", fastIframe:false });

    var url = "ajax.aspx?ajaxid=3&sid=" + Math.random();
    url = url + "&UserID=" + UserID;

    $.ajax({
        type: "GET",
        url: url,
        success: function(response) {
            $.colorbox({ title: "Account Details (UserID: " + UserID + ")", width: "500px", height: "200px", html: response });
        },
        error: function(xhr) {
            HandleBadAjaxResponse(xhr.status);
        }
    })
} 
```

# c++ - 通过值接受临时对象和通过引用接受非临时对象的模板函数？

> ID：15415530
> 
> 赞同：3
> 
> 时间：2013-03-14T16:56:48.093
> 
> 标签：c++, templates, pass-by-reference, c++03

我想拥有

```
template <class T>
void foo(T &t); 
```

也能够接受临时对象，而不会影响通过引用接受其他对象并在它们上调用非常量方法。在 C++03 中可能吗？

我意识到我可能会强制用户将其对象的所有方法声明为`const`，并将所有成员声明为`mutable`，然后使用`const T &t`引用，但这是一个丑陋的解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:21:12.227

在 C++03 中，无法推断传递给函数的参数是左值还是右值。

我想这就是为什么您的问题标题显示“*按值接受临时变量*”的原因：如果存在这样的机制，您可以创建一个函数（模板），根据该信息确定参数类型是否应该是`T&`or `T`。

这正是 C++11 支持的类型推断机制所做的：

```
template<typename T>
void foo(T&& t);
//       ^^^
//       lvalue of type A is passed: T = A&, signature = foo(A& t)
//       rvalue of type A is passed: T = A, signature = foo(A&& t) 
```

但是如上所述，这在 C++03 中是不可能的，正是因为它缺乏确定表达式的值类别的方法。

您提到的可能性（强制所有对象具有`const`成员函数）不是一种解决方法（甚至不是一个丑陋的解决方法）：如果成员函数是 all `const`，则意味着`foo()`不需要更改其输入的状态。这反过来意味着它可能需要一个`const&`, 并且问题解决了。

您可能打算让这些`const`成员函数执行 a`const_cast<>`以更改对象的状态，但是您也可以在`foo()`. 这是一个坏主意的原因是，在这两种情况下，您都不能向`foo()`类型为`const`-qualified 的对象提供输入，并且您可能不知道是否是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:19:17.210

您可以创建第二个函数，该函数采用 const 类型引用，并为非常量类型引用制作副本。

```
template <class T>
void foo (T &t);

template <class T>
void foo (const T &x) {
    T copy(x);
    foo(copy);
} 
```

可以在[此处](http://ideone.com/3I6hsv)找到演示。

这种技术的局限性在于它不能区分临时对象和真实`const`对象。这样做的结果是您的原件`foo()`将不允许自己被传递一个`const`对象。该提议将允许它们，因此您失去了最初提供的一些安全性。您可以通过将 const 类型版本重命名为`foo`类似`foo_for_temp`. 然后，调用者就会知道函数的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:07:46.453

一种但危险的解决方案是将 const T & 作为函数参数，然后将 const_cast<> 传递给 T&。您必须小心传递给函数的内容，因为它很容易导致未定义的行为：

```
template <class T>
void foo(const T &ct)
{
    T &t = const_cast<T>( ct );
    // ...
} 
```

# php - CodeIgniter form_dropdowns 数据库

> ID：15415532
> 
> 赞同：1
> 
> 时间：2013-03-14T16:56:52.380
> 
> 标签：php, arrays, codeigniter, undefined

我不知道我的逻辑是否不正确，但我无法让我的 form_dropdown（下拉列表）列表填充数据库中的数据。

我得到的错误是未定义的属性：stdClass::$name。

代码如下。

我的数组在 $appertisers 时 print_r($appertisers);

```
Array ( [0] => stdClass Object ( [product] => Marinated mixed olives ) [1] => stdClass Object ( [product] => Simons ) [2] => stdClass Object ( [product] => Test ) ) 
```

**看法**

```
 $array = array();
            foreach($appertisers as $row ){
                    $array = $row->name;
            }
            echo form_dropdown('appetisers',  $array);

    ?> 
```

**模型**

```
 class Get_data extends CI_Model{
    function getAppertisers(){
        $query = $this->db->query("SELECT product FROM products WHERE cat = 1");
        return $query->result();
    }
} 
```

**控制器**

```
public function index()
{
    $this->load->helper('url');
    $data = array();

    $this->load->model("get_data");
    $data['appertisers']  = $this->get_data->getAppertisers();

    $this->load->view('header');
    $this->load->view('content_contact', $data);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:59:19.047

您需要将该行添加到数组中，并引用该`product`属性，因为没有`name`属性。您目前只是重新分配它：

```
foreach($appertisers as $row ){
    $array[] = $row->product;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T15:06:52.697

你的模型应该是：

```
class Get_data extends CI_Model
{
    function getAppertisers()
    {
        $this->db->where('cat', 1);
        $query = $this->db->get('products');
        if($query->num_rows() > 0)
        {
            foreach($query->result() as $row)
            {
                $data[] = $row->product;
            }
            return $data;
        }
    }
} 
```

你的看法：

```
<?php echo form_dropdown('appertisers', '$appertisers', 'set_value('appetisers')'); ?> 
```

# shell - Shell 脚本：循环执行 gunzip 和 grep 语句

> ID：15415536
> 
> 赞同：0
> 
> 时间：2013-03-14T16:57:01.747
> 
> 标签：shell, for-loop, gunzip

我正在尝试创建一个 shell 脚本：

*   将文件从我的日志目录复制到单独的目录以进行分析。

*   Gunzip 压缩该文件并查找文本模式

*   将该模式输出到文件以供进一步分析

*   删除所述文件

我正在尝试分阶段进行。到目前为止，我还无法离开地面。叹...

我从这里提取了这个例子并开始修改它：

```
#!/bin/bash

FILES= `ls /opt/dir1/scripts/access_*.gz`

for i in $FILES
  do
    cp $i /tmp/apache
    gunzip $i | grep -i 'Mozilla' >> output.txt
  done 
```

每次我这样做时，我都会收到这样的权限被拒绝消息：

`./test1.sh: line 7: /opt/dir1/scripts/access_log.1.gz: Permission denied`

即使我以 root 身份运行此脚本，并且如果我手动执行这些命令，我​​也没有问题。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:10:11.020

Root 似乎没有写入权限`/opt/dir1/scripts/`。你所做的不是你打算做的；）

首先，您应该创建文件夹以确保它存在：`mkdir -p /tmp/apache`

随着`cp $i /tmp/apache`您将文件复制到该目录中。

`gunzip $i`不会提取您刚刚复制的文件，而是提取上面行中的原始文件。我建议使用更简单的方法来做到这一点[zgrep](http://linux.about.com/library/cmd/blcmdl1_zgrep.htm)。zgrep 类似于 grep，但也适用于 gzip 压缩文件。试试这个：

```
#!/bin/bash
# create the folder (-p supreses warnings if the folder exists)
mkdir -p /tmp/apache
# create the output file (empty it, if it exists)
echo "" > /tmp/apache/output.txt
zgrep -i 'Mozilla' /opt/dir1/scripts/access_*.gz >> /tmp/apache/output.txt 
```

# android - 从本地文件夹获取字体/Myfont.ttf 链接文件

> ID：15415538
> 
> 赞同：2
> 
> 时间：2013-03-14T16:57:05.953
> 
> 标签：android, classloader, truetype, typeface

我的项目中有名为 mydata 的文件夹，因为我有链接但未复制的 fonts/Myfont.ttf 文件，现在如何获取此 ttf 文件的源并将其传递给 Typeface？

我试过这个：

```
Typeface font = Typeface.createFromFile("data/fonts/myfont.ttf"); 
```

但我收到此错误“无法制作原生字体 android 错误”

但是不工作有人可以帮助我吗？

# java - 文本解析：区分“字典单词”和名称

> ID：15415540
> 
> 赞同：1
> 
> 时间：2013-03-14T16:57:13.560
> 
> 标签：java, parsing, text, dictionary

我有包含“字典单词”和名称的英语和德语文本。

> 例如“......画家莱昂纳多在佛罗伦萨建造......”

我有一个 Java 程序，需要确定每个单词是相应语言的名称还是单词。

> 例如名称={...，Florence，Leonardo，...}，语言单词={...，In，the，painter，built，...}

我看到两种方法：

1.  使用相应的字典列表，将其加载到哈希结构中，查看单词是否在其中（语言单词）（名称/拼写错误）。

    问题/问题：

    我找不到排除姓名的德语单词列表

    单词屈曲（德语复杂）可能不在列表中

2.  使用服务/api将单个单词翻译成另一种语言，查看单词是否更改（语言单词）或不更改（名称/拼写错误）。

    问题/问题：

    名称也可以翻译，例如 Florence > Florenz

    我找不到离线字典列表/api。所以我想使用在线服务是可行的方法，但像谷歌翻译这样的大服务不是免费的。

当然，有些名称类似于字典单词，并且在这两种方法中，它们都被识别为字典单词，这很好。

**主要问题是：是否有没有英文和德文名称的综合字典列表，充其量只是单词屈曲？**

或者：是否有免费的（在线）API 来完成这项任务？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:06:21.167

通过检查第一个字母是否大写，您可以找到很多名称。之后，您将排除所有以句尾字符 {"."、"!"、"?"} 结尾的字符。

假设它更像是一个故事，那么假设一个名字会出现不止一次是很安全的。使用您已经找到的所有名称，并将它们与出现在句尾字符后的所有大写单词的列表进行核对。添加平等的人。

仅当您想要每一次出现时才应该完成第二部分，而不仅仅是发生的那些。

至少，我会这样处理它。

编辑：我对德语不太熟悉，但我的方法确实会对德语有一些问题。请参阅 Joop Eggen 针对该语言的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:07:26.840

是的，德语有点问题，因为非名字名词也大写。

但是有一个语言属性。虽然人们可以说“美丽的弗洛伦茨”（“das schöne Florenz”），但对于*个人*名字，在前面使用冠词/形容词是非常罕见的。除了复数，“the Müllers”（“die Müllers”）也可以考虑。

所以你只需要一个地名列表等。

并检测前面的文章/形容词（der/die/das/... 和 -e/-en/-...）。

# intellij-idea - PhpStorm 实时模板：接触的变量

> ID：15415541
> 
> 赞同：1
> 
> 时间：2013-03-14T16:57:18.797
> 
> 标签：intellij-idea, phpstorm, webstorm, live-templates

我正在尝试定义这个实时模板：

```
/*jslint browser:true*/
/*global $module$, jQuery, angular*/
(function () {

    'use strict';

    angular.module('$module$').directive('$module$$name$', function () {
        return {
            restrict: 'A',
            templateUrl: '/$module$/views/$name$/$name$.html',
            controller: ['$scope',
                function ($scope) {
                    $END$
                }]
        };
    });

}()); 
```

但是`$module$$name`表达会导致无声的错误。

如何在 PhpStorm 的实时模板中连接两个变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T10:51:33.533

请观看/投票给[http://youtrack.jetbrains.com/issue/IDEA-89020](http://youtrack.jetbrains.com/issue/IDEA-89020)。

您也可以尝试更改变量序列，以便在它们分开的地方输入 $module$ 和 $name$，并自动填充连接的地方。为此，您可以为连接定义单独的变量（总是在=false 处停止）并使它们的表达式分别等于 $module$ 和 $name$ 的值。

# php - RNCryptor iOS/PHP 和特殊字符

> ID：15415543
> 
> 赞同：0
> 
> 时间：2013-03-14T16:57:23.550
> 
> 标签：php, ios, rncryptor

我正在使用 RNCryptor 在 iOS 中加密消息，然后在 PHP 中对其进行解密。但是，特殊字符会从解密的字符串中消失。

我如何在 iOS 中加密

```
-(NSData *)encryptThis:(NSString *)str 
```

{

```
NSString *key = @"mysuper32bitkey";
NSError *error = nil;
NSData *data = [str dataUsingEncoding:NSUTF8StringEncoding];
NSData *encryptedData = [RNEncryptor encryptData:data
                                    withSettings:kRNCryptorAES256Settings
                                        password:key
                                           error:&error];

return encryptedData; 
```

}

我如何在 PHP 中解密

```
$b64_data = $message;
$password = "mysuper32bitkey"
// back to binary
$bin_data = $message;// message already in binary. No need for -> mb_convert_encoding($b64_data, "UTF-8", "BASE64");
// extract salt
$salt = substr($bin_data, 2, 8);
// extract HMAC salt
$hmac_salt = substr($bin_data, 10, 8);
// extract IV
$iv = substr($bin_data, 18, 16);
// extract data
$data = substr($bin_data, 34, strlen($bin_data) - 34 - 32);
// extract HMAC
$hmac = substr($bin_data, strlen($bin_data) - 32);

// make HMAC key
$hmac_key = pbkdf2('SHA1', $password, $hmac_salt, 10000, 32, true);
// make HMAC hash
$hmac_hash = hash_hmac('sha256', $data , $hmac_key, true);
// check if HMAC hash matches HMAC
if($hmac_hash != $hmac)
    echo "false";

// make data key
$key = pbkdf2('SHA1', $password, $salt, 10000, 32, true);
// decrypt
$ret = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC, $iv);

echo trim(preg_replace('/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\xFF]/u', '', $ret)); 
```

问题是，如果我在 iOS 中加密“Agresión”，PHP 只返回“Agresin”。为什么它不解密 "ó" ？我认为*dataUsingEncoding:NSUTF8StringEncoding*会保留特殊字符...我应该使用另一种类型的编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:53:25.253

您正在删除此行中的 ó (U+00F3) ：

```
echo trim(preg_replace('/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\xFF]/u', '', $ret)); 
```

请注意，您将删除所有 \x80-\xFF。不要那样做。

# javascript - 谷歌地图 v3 折线上的信息窗口不起作用

> ID：15415544
> 
> 赞同：1
> 
> 时间：2013-03-14T16:57:24.817
> 
> 标签：javascript, google-maps

我正在尝试在地图上用谷歌地图 v3 中的相关信息窗口画一条线。我的鼠标悬停似乎可以正常工作，但似乎无法打开信息窗口。

```
function drawScheduledCommand(radius, map, latlng, angle, infoText){
  var spherical  = google.maps.geometry.spherical;
  twoThirdRadius = radius / 3 * 2 ;
  oneThirdRadius = radius / 3 ;
  twoThirdPoint  = new spherical.computeOffset(center, twoThirdRadius, angle);
  endPoint       = new spherical.computeOffset(twoThirdPoint, oneThirdRadius, angle);

  var positionLineOptions = {
    strokeColor: "#FFFFF0",
    strokeOpacity: 0.99,
    strokeWeight: 2,
    fillColor: "#FFFFF0",
    fillOpacity: 0.99,
    map: map,
    zIndex: 5,
    path: [twoThirdPoint, endPoint]
  }
  line = new google.maps.Polyline(positionLineOptions);

  var lineInfoWindow = new google.maps.InfoWindow();
  lineInfoWindow.setContent(infoText);
  lineInfoWindow.open(map);

  google.maps.event.addListener(line, 'mouseover', function() {
     console.log(infoText);
     lineInfoWindow.open(map);
  });

  google.maps.event.addListener(line, 'mouseout', function() {
     lineInfoWindow.close();

  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:05:45.337

对于遇到此问题的其他人：使用`setPosition()`（就像您所做的那样），或者您可以通过将 MVCObject 传递给`open()`调用来设置位置，如下所示：

```
infowindow.open(map,marker); 
```

有关详细信息，请参阅[示例](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)或[参考文档](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-15T09:34:52.117

例如，假设您已经绘制了一条收集纬度数据的车辆路线折线，并希望在悬停时显示带有内容的信息窗口（假设它存在于那里的时间戳）-

```
var rawData = [{ll: [18.9750, 72.8258], t: 1476416370},  .......];
// data is lets say array of lat longs and t
var data, polylineCoordinates; 
var infoWindow = new google.maps.InfoWindow();

angular.forEach(rawData, function(item) {
  var latlng = new google.maps.LatLng(item.ll[0], item.ll[1]);
  data.push([latlng, item.t]);
});
// polylineCoordinates is array of LatLng objects
angular.forEach(data, function(item) {
  polylineCoordinates.push(item[0]);
});

var polyline = new google.maps.Polyline({
          path: polylineCoordinates,
          strokeColor: "#0000ff",
          strokeOpacity: 2,
          strokeWeight: 4,
          geodesic: true
        });
polyline.setMap(map);
google.maps.event.addListener(polyline, 'mouseover', function(e) {
  // closes previous info window when mouse moves over polyline
  if(infoWindow.getMap()) { infoWindow.close(); }
  var t;
  angular.forEach(data, function(ping) {
  // accurate to 110 m when coordinates have 3 decimal places precision
  // extracting timestamp for a lat lon coordinate

  if(ping[0].lat().toFixed(3) == e.latLng.lat().toFixed(3) && ping[0].lng().toFixed(3) == e.latLng.lng().toFixed(3)) {
    t = moment(new Date(ping[1] * 1000)).format('Do MMM LT');
    infoWindow.setPosition(e.latLng);
    infoWindow.setContent('<b>' + t + '</b>');
    infoWindow.open(map);
   };
  });
 }); 
```

# exception-handling - 如何捕捉骡流中的任何异常

> ID：15415545
> 
> 赞同：2
> 
> 时间：2013-03-14T16:57:30.163
> 
> 标签：exception-handling, mule, flow

我有一个可能引发异常的 mule 流（无法连接到连接器、组件引发异常等）。发生这种情况时，mule 流会在发生异常的地方停止。我需要捕获流程抛出的任何异常，并发送一封电子邮件通知，指示发生了异常。（特别是对于像从 JMS 中读取一样异步运行的流）。我应该使用流程中的哪个元素来捕获任何异常并发送电子邮件？

我努力了：

```
<default-exception-strategy>
        <smtp:outbound-endpoint host="${email.relay.host}"
                    mimeType="text/html" from="${email.support.from" to="${email.support.to}"
                    cc="${email.support.cc}" bcc="${email.support.bcc}" subject="${email.support.subject}">
            </smtp:outbound-endpoint>
    </default-exception-strategy> 
```

但这根本没有开始。我也试过：

```
<exception-type-filter expectedType="java.lang.Exception"></exception-type-filter> 
```

但这似乎仅在流程引发异常时才有效（正常流程功能已更改）。

@David Dossot - 我添加了以下代码段：

我添加了以下代码段：

```
<catch-exception-strategy>
            <smtp:outbound-endpoint host="${email.relay.host}"
                            mimeType="text/html" from="${email.support.from" to="${email.support.to}"
                            cc="${email.support.cc}" bcc="${email.support.bcc}" subject="${email.support.subject}">
            </smtp:outbound-endpoint>
    </catch-exception-strategy> 
```

但是在启动 mule 应用程序时出现错误：

根异常堆栈跟踪：org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“catch-exception-strategy”开头的无效内容。'{"之一[http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-message-processor, " [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ":abstract-outbound-端点，“ [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ”：响应，“ [http://www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core) ”：abstract-exception-strategy，“ [http:// /www.mulesoft.org/schema/mule/core](http://www.mulesoft.org/schema/mule/core)":abstract-message-info-mapping}' 是预期的。在 com.sun.org.apache.xerces 的 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)。 internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131) at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384) + 3 个以上（设置调试级别日志记录或'- Dmule.verbose.exceptions=true' 为一切）

* * *

我正在使用骡子 3.2.2。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:59:06.187

在 Mule 3.3 上，我通常使用`catch-exception-strategy`它。

在 Mule 3.2 及之前的版本中，`default-exception-strategy`这是正确的选择，但可能无法正确捕获某些异常。这已在 Mule 3.3 中进行了大修。是时候升级了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T14:19:29.160

尝试使用这个。} 中缺少。

```
<catch-exception-strategy>
<smtp:outbound-endpoint host="${email.relay.host}"
    mimeType="text/html" from="${email.support.from}" to="${email.support.to}" cc="${email.support.cc}" bcc="${email.support.bcc}" subject="${email.support.subject}">
</smtp:outbound-endpoint></catch-exception-strategy> 
```

# salesforce - Salesforce 站点中的富文本区域图像

> ID：15415552
> 
> 赞同：0
> 
> 时间：2013-03-14T16:57:48.483
> 
> 标签：salesforce, apex-code, richtextarea

我无法使用 salesforce 在我的站点中显示来自富文本区域的图像。

我想这样做来自定义显示。该站点可通过包含分销商 ID（帐户记录类型）的特定 URL 访问。然后我从分销商那里获取信息。这是我抓取富文本区域的地方，并将其显示为页面上的合并字段，并带有 outputText `escape='false'`（以显示 html）。但是在这里我有一个带有以下文本的图像：图像不可用此图像不可用，因为：

*   您没有权限查看它，或者
*   它已从系统中删除

我将采用一个非常复杂的解决方法，我想确定我不能轻易做到这一点。

访客用户配置文件也设置得很好，可以看到富文本区域。

有没有人知道怎么做或者有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-21T10:52:33.937

您是否检查了图像是否存储在哪个对象中以及访客用户配置文件是否可以访问它？

图像可能存储在 File、ContentDocument 或相关对象中。此外，如果文件链接到任何其他父对象，您还需要检查 ContentDocumentLink。

在提供对所述对象和记录的访问之后，它应该是可见的。

访问[https://nonitechsolutions.blogspot.com/2021/06/salesforce-enable-guest-user-on-your.html](https://nonitechsolutions.blogspot.com/2021/06/salesforce-enable-guest-user-on-your.html)

# bash - Bash 登录脚本：[1] 错误从何而来？

> ID：15415564
> 
> 赞同：2
> 
> 时间：2013-03-14T16:58:13.197
> 
> 标签：bash

我有一个相当复杂的脚本用于登录：

```
`/Users/tinosino/.profile` 
```

Shell 脚本语言：Bash

如果我发现任何问题，除了请求错误修复之外，我无法更改登录脚本。

这些天每当我登录时，如果我运行这个：

```
echo $? 
```

立即，我得到：

```
1 
```

脚本中的某些内容失败了。

**如何查明错误的原因？**返回该错误代码的确切行？是否可以“捕获”某些退出代码，打开捕获并`.profile`在此时中止脚本？

我知道使用 -x 运行 Bash，但输出完全是压倒性的：复杂的脚本，数千行。

*   我可以以某种方式让它“停止”并让我控制何时`1`返回吗？
*   我是否可以像`$?`看到退出代码一样执行类似的操作并查看罪魁祸首命令行？

看着`history`并`$HISTFILE`没有太大帮助。太复杂了。

我认为捕获这种错误在未来甚至可能对我“普遍有用”。甚至可能对其他用户也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:17:29.700

是的，陷阱是可能的，但说真的，如果你认为输出过于复杂和压倒性的，那么你可能不是去追逐它的合适人选。

好吧，假设你别无选择。首先，不要把你的手臂举到空中，说一些太复杂的事情。有人写了它，我敢打赌他们并不比你聪明——事实上，编写看起来不太复杂的代码需要很高的*技巧*。复杂的代码很容易编写。

第二，你怎么知道有错误？ `$?`为 1 不一定是错误，它可以通过条件为假来设置，这可能是预期的。

因此，有一种方法可以在出现错误时停止执行。运行脚本时，使用`bash -e script-name`. 这通常被认为是不好的做法，但你听起来很绝望！它不会因为条件语句中的失败而停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:32:44.247

您也可以尝试使用 strace 运行该命令进行调试。它将向您显示有关系统调用和接收信号的信息。

[http://en.wikipedia.org/wiki/Strace](http://en.wikipedia.org/wiki/Strace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:34:28.723

Shell 配置文件只是常规的 shell 脚本，它们是`source`'d 而不是执行的。页面中解释了差异`man`：

```
source filename [arguments]
  Read  and  execute commands from filename in the current shell environment and return the exit status of the last command executed from filename. 
```

因此，就像从命令行运行 shell 脚本一样，源配置文件的退出代码是配置文件中执行的*最后一个*命令的退出代码。因此，如果您确定这`/Users/tinosino/.profile`是在获得命令提示符之前获取的最后一个配置文件，那么退出代码 1 来自该文件中执行的最后一个命令。因此，您需要查找的只是该`exit`文件中调用的点以及该文件中的最后一个命令。

# mysql - 加快查询的方法

> ID：15415567
> 
> 赞同：1
> 
> 时间：2013-03-14T16:58:24.017
> 
> 标签：mysql, sql

我最近在我的数据库上遇到了一些查询问题，这是因为我的一个数据库表已经从 50,000 行扩展到 1,000,000 行到 2,000,000 行。

该表`books`有2,000,000条书籍记录，并包含从书籍排名到书籍大小的各种信息。

我尝试运行一个简单的查询...

```
SELECT isbn FROM books WHERE rank < 100000 
```

等待 10 分钟后，我不得不终止查询，因为它一直停滞不前，在查询其他表时我没有这个问题，所以我认为问题出在表的大小上。

我已经开始阅读索引，所以我想知道这是否是补救我的情况的最佳方法，如果不是，那会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:59:15.227

索引`rank`列并观看它飞

[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

[如何向 MySQL 表添加索引？](https://stackoverflow.com/questions/3002605/how-to-add-indexes-to-mysql-tables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:14:26.097

在排名列上添加索引将是我尝试的第一件事。

但是我会说一个有 200 万行的表实际上并没有那么大，而且我觉得很奇怪数据库不能在 10 分钟内完成 200 万行的表扫描，因为事实上你不是甚至加入查询中的任何其他表。

您希望返回多少行？您确定延迟是由于数据库服务器，而不是链中的其他地方吗？就像在 Web 客户端上渲染一个 200,000 行的 html 表？

# groovy - 将 HttpInputStream 插入到 groovy 中的 OutputStream 中

> ID：15415568
> 
> 赞同：1
> 
> 时间：2013-03-14T16:58:24.410
> 
> 标签：groovy, inputstream, outputstream

如果 Groovy 之间存在差异

```
IOUtils.copyLarge(content, output) 
```

和

```
output << content 
```

其中 output 是一个 OutputStream 对象，而 content 是一个 HttpInputStream。

另外，希望我做对了从连接中取回信息

```
def connection = (HttpURLConnection)(new URL(myURL).openConnection())
def content = connection.getContent() 
```

提前感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:06:45.187

假设您从 Apache 的 commons-io 库中引用，查看各自的来源会发现 Apache和 Groovy （又名）`IOUtils`之间的关键区别，即 Groovy 的调用：`IOUtils.copyLarge``OutputStream.leftShift``<<``Thread.yield();`

[https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/IOGroovyMethods.java#L207](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/IOGroovyMethods.java#L207)

`InputStream`在这种情况下，当没有从`InputStream`. 这意味着 Groovy`<<`运算符的行为可能会有所不同，`IOUtils.copyLarge`具体取决于您当时正在操作的其他线程及其相对优先级。

`HttpURLConnection.getContent()`实际上返回`Object`. 这可能是`HttpInputStream`，但可能不是，因此您应该使用以下方法验证该对象的类型：

```
if (content instanceof HttpInputStream) {
    output << content
} else {
    // Handle error condition
} 
```

# php - 网站上的水平滚动条未显示

> ID：15415570
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:58:26.423
> 
> 标签：php, html, css

有一些类似的帖子，但我似乎无法根据它们弄清楚。我刚刚为我们的网站建立了一个新主页，但由于某种原因水平滚动条没有出现。适用于所有其他页面。有人知道为什么吗？ [http://ghcnow.com/index2.php](http://ghcnow.com/index2.php)

谢谢！

这是代码布局的概述

```
<html style="overflow:hidden;">
<head></head>
<body>
   <div id="content">
      <div class="container2">
         <div class="fullwidthbanner-container" style="width: 100% !important; overflow: hidden; position: relative; padding: 0; max-height: 500px !important;">/*stuff in here*/
         </div>
         <div class="container" style="width: 1030px; margin: 0 auto;">/*stuff in here*/
         </div>
      </div>
  </div>
</body>
</html> 
```

我希望仅当某人的窗口小于容器 div 的 1030px 时才显示滚动条。如果我接受溢出：隐藏；在 html 中，滚动条就像每个人所说的那样出现。但是，由于与 fullwidthbanner-container div 有关，min-width 并没有像建议的那样在 body 上工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:02:01.103

删除`overflow: hidden`你的`html`标签。

但是您绝对应该考虑使用更灵活的布局。水平滚动条从来都不是一件好事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:03:24.823

在你的**CSS**上改变这个

```
html {
    overflow-x:hidden;
    padding: 0 !important;
    /*background-image:url(images/tiles/bgtile.png);*/
    margin:0px !important;
} 
```

到

```
html {
    padding: 0 !important;
    /*background-image:url(images/tiles/bgtile.png);*/
    margin:0px !important;
} 
```

只需删除`overflow-x: hidden`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:23:51.307

嗯，只是删除`overflow-x:hidden`。就这样。享受您的 HTML。但是，嘿！我宁愿在我的网站上没有水平滚动条。这看起来很荒谬。此致， Thakur Saksham Chauhan

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-09T03:46:37.657

当您`overflow: hidden;`在 body 或 html 中使用 CSS 文件时，您必须参考轴意味着：`overflow-x: hidden;`在这种情况下，y 轴与滚动条保持一致:)

# php - ajax php 下拉列表

> ID：15415571
> 
> 赞同：0
> 
> 时间：2013-03-14T16:58:27.317
> 
> 标签：php, mysql, ajax, drop-down-menu

有人能告诉我这个网站上的示例代码有什么问题吗[http://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-没有刷新页面的数据库](http://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-database-without-refreshing-the-page)

基本上我做的和教程中的完全一样，问题是第二个下拉列表没有显示任何东西。我读到有人忘记在页面上添加一些 javascript 的评论之一。我该怎么做呢？

我曾尝试在该网站上发布一个问题，但一个星期没有人回答，所以我来到了这里。

任何帮助将非常感激。

这是我的 index.php 页面

```
<?php
include('cn.php');

$sql_country = "SELECT * FROM COUNTRY";
$result_country = mysql_query($sql_country);

echo "<select name='country' onChange='get_cities(this.value)'>"; //get_cities is defined below

while($row_country = mysql_fetch_array($result_country))
{
echo "<option value='".$row_country['id']."'>".$row_country['country']."</option>";
}

echo "</select>";

echo "<select name='city' id='city'></select>"; //We have given id to this dropdown

?> 
```

这是我的 get_cities.js 页面

```
function get_cities(country_id)
{
$.ajax({
   type: "POST",
   url: "cities.php", /* The country id will be sent to this file */
   beforeSend: function () {
  $("#city").html("<option>Loading ...</option>");
    },
   data: "country_id="+country_id,
   success: function(msg){
     $("#city").html(msg);
   }
   });
 } 
```

这是我的 city.php 页面

```
<?php

include('cn.php');

// Code for cities.php
$country_id = $_REQUEST['country_id'];

$sql_city = "SELECT * FROM CITY WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);
echo "<select name='city'>";

while($row_city = mysql_fetch_array($result_city))
{
echo "<option value='".$row_city['id']."'>".$row_city['city']."</option>";
}

echo "</select>";

?> 
```

包含的“cn.php”只是我与数据库的连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:12:50.883

```
//Index.php
<?php
$conn = mysql_connect("localhost", "root", "root");
$db = mysql_select_db("country_example", $conn);

$sql_country = "SELECT * FROM country";
$result_country = mysql_query($sql_country);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Country List</title>
</head>
<body>
<?php 

echo "<select name='country' onChange='get_cities(this.value)'>";

while($row_country = mysql_fetch_array($result_country))
{
    echo "<option value='".$row_country['id']."'>".$row_country['country']."</option>";
}
echo "</select>";
echo "<div id='cityLayer'><select name='city' id='city'></select></div>";
?>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript"> 
    function get_cities($country_id){
     $.ajax({
         url : "city.php?country_id="+$country_id,
         cache : false,
         beforeSend : function (){
              //Show a message
         },
         complete : function($response, $status){
             if ($status != "error" && $status != "timeout") {
                 $('#cityLayer').html($response.responseText);
             }
         },
         error : function ($responseObj){
             alert("Something went wrong while processing your request.\n\nError => "
                 + $responseObj.responseText);
         }
     }); 
    }
 </script>
</body>
</html>

//City.php
<?php

$conn = mysql_connect("localhost", "root", "root");
$db = mysql_select_db("country_example", $conn);

$country_id = $_REQUEST['country_id'];
$sql_city = "SELECT * FROM cities WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);

echo "<select name='city'>";
while($row_city = mysql_fetch_array($result_city))
{
    echo "<option value='".$row_city['id']."'>".$row_city['city']."</option>";
}
echo "</select>";
?> 
```

# database - 为发布创建新数据库？

> ID：15415573
> 
> 赞同：0
> 
> 时间：2013-03-14T16:58:28.487
> 
> 标签：database, sqlite, database-design, architecture

我们有一个数据库，其中包含我们所有软件产品的各种记录。有些记录是针对特定软件的，有些记录是由不同的软件共享的。
不同的团队将锁定、编辑和更新数据库。
当我们发布不同的软件时，我们只是抓取这个单一的大数据库并与软件一起发布。

这是问题所在：

*   数据库可能会变得更大，并且它包含一个软件的不必要信息，因为它包含所有软件产品的所有记录。
*   人们似乎很容易搞砸：您正在编辑的数据库可能不是最新的；更改可能会破坏其他软件等...

我想知道这种问题的通常解决方案是什么，以下是我能想到的解决方案：

1.  保留母数据库并为不同的软件生成子数据库。
    不同的团队可以使用 Web 界面将记录添加到母数据库，并在发布时运行一个任务，该任务基本上从母数据库复制必要的表并为发布创建一个新数据库。
2.  不要使用母数据库。不同的软件使用不同的数据库。但是如何处理共享记录呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:40:30.033

我会采用你的第一种方法。这就是我在阅读您的答案之前的想法。拥有“母”数据库的好处是您可以使所有软件产品符合相同的模式。如果您愿意，它们都共享相同的模板。

然后，当您准备好发布时，就像您说的那样，您运行一个流程并生成数据库的紧凑版本并准备发布。

由于架构更新，选项 2 是个坏主意。它在概念上与分叉代码库非常相似。如果你 fork 你的代码库 10 次，那么当一个 bug 修复出现时，你必须去 10 个地方修复它并发布它。

还要考虑拥有一个母数据库可以让您轻松地对所有数据库进行查询。“我们有多少版本？我们有多少产品？我们发布的最后一个产品是什么？”

如果你拆分数据库，这种查询就更难编写了。

# clojure - Clojure Midje 在使用“pcalls”时“提供”

> ID：15415576
> 
> 赞同：0
> 
> 时间：2013-03-14T16:58:36.343
> 
> 标签：clojure, midje

我对 Clojure 相当陌生，并且正在尝试并行化对函数的一些调用。

假设我有一张如下地图：

```
{:a 1 :b 2 :c 3} 
```

并且我想将键和值用作名为 my-function 的函数的参数，并为每个键/值对调用该函数。我可以使用`doseq`如下：

```
(doseq [entry my-map] (my-function (key entry) (val entry))) 
```

然后我决定我希望对 my-function 的调用是并行的（在我的实际情况下，my-function 将进行彼此独立的休息调用，因此我想并行执行它们）。我想出了以下内容：

```
(apply pcalls (map #(partial my-function (key %) (val %)) my-map)) 
```

这似乎按我的预期工作（如果我错了或者有更好的方法，请纠正我）。我现在遇到的麻烦是让我的 Midje 测试通过。如果我使用`doseq`上面的版本，它们会正确通过。在我的测试中，我使用 (provided .... ) 来确保进行正确的调用，并且我希望使用它来检查对 my-function 的调用。是否有可能做到这一点？我发现很难找到有关 pcall 的大量信息。

谢谢

- - - - - 编辑 - - - - -

我设计了一个演示失败的示例。

实现可以在[这里](https://gist.github.com/anonymous/2c9214af3bb49d44495d)找到，测试[在这里](https://gist.github.com/anonymous/8dcf82068f5691b71309)。我发现单个测试运行良好，但多个测试会导致以下情况：

> FAIL at (pcalls_unit.clj:29) 这些调用的次数不正确：(my-func 2 2) [预计至少一次，实际上从未调用过]
> 
> FAIL "Test some pcalls 3" at (pcalls_unit.clj:26) 预期：nil 实际：java.util.concurrent.ExecutionException：java.lang.Error：您似乎已经为 pcalls-test.pcalls/my- 创建了先决条件func 会干扰该函数在 Midje 自己的代码中的使用。要解决此问题，请定义一个您自己的使用 my-func 的函数，然后在提供的子句中描述该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:28:24.200

只回答问题的第一部分`pmap`也可以这样写：

```
(doall (pmap my-function (keys my-map) (vals my-map))) 
```

# sql - 将表与多个表进行比较

> ID：15415585
> 
> 赞同：0
> 
> 时间：2013-03-14T16:58:59.813
> 
> 标签：sql, sql-server-2008

我有一个表 ( `claim 24`)，其中有一列 ( `status`)，每个无效索赔的编号为 2，而 ( `filled`) 列是无效索赔的 4 月至 8 月的日期范围。

我还有其他九个表 ( `claim 25`- `claim 33`)，其中 ( `status`) 列等于零，( `filled`) 列是 4 月至 8 月。

所有十个表都有相同的列 ( `fname`, `lname`, `DOB`, `status`, `filled`)。

我正在尝试在先前 ( `claim 24`) 表中找到不再无效的无效声明

# java - 构建openjdk的java部分

> ID：15415589
> 
> 赞同：0
> 
> 时间：2013-03-14T16:59:09.983
> 
> 标签：java, openjdk

我需要更改一些 JFC 类，因此想用 openjdk 来做。我不需要重建 VM 本身，只需要 JFC 类之一。

是否可以只构建 JFC 类而不构建整个虚拟机？如果是这样，我可以在现有的 openjdk 发行版中替换它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:41:27.523

OpenJDK 既可以随时使用（如准备使用），也可以作为源代码使用。

对于你想做的事，你必须走后一条路——这真的不是那么难做。根据您的机器，它需要 10 分钟到一个小时，而且主要是数字。

查看[The OpenJDK Build Instructions](http://hg.openjdk.java.net/jdk8/jdk8/raw-file/tip/README-builds.html)以了解如何执行此操作。

请注意，这适用于 JDK8，但它也适用于 JDK7（可能还有 JDK6，尽管我没有尝试过）

一旦你构建了所有东西，你就可以修改你真正感兴趣的部分——我已经完成了，它工作得很好。

# asp.net - 将我的应用程序从 IIS 6 迁移到 IIS 7 不起作用

> ID：15415594
> 
> 赞同：0
> 
> 时间：2013-03-14T16:59:16.690
> 
> 标签：asp.net, .net, iis-7, iis-6

我正在将我的网站从在windwos server 2003 上运行的IIS 迁移到Win server 2008（64 位）。在这两种情况下，应用程序都在 .NET 4.0 上运行，但是，由于未知原因，我收到错误消息“对象引用未设置为对象的实例”，原因不明。

如您所见，一切在[http://www.matchmypet.com](http://www.matchmypet.com)上运行良好，但是当您尝试执行[http://beta.matchmypet.com/home.aspx](http://beta.matchmypet.com/home.aspx)（指向新服务器）时，一切都崩溃了. 有谁知道我怎么能弄清楚问题是什么？请记住，这些是完全相同的二进制文件（针对 .net 4.0 32 位编译，但我认为这不会产生影响）。

如果您有任何想法，请告诉我。非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:04:53.303

尝试将您的应用程序池配置为使用经典管道模式（而不是集成管道）。

错误页面还显示异常源自您的自定义代码 - 部署 Debug 构建以查看导致它的源代码行或至少发布引发异常的整个方法。

# matlab - 在matlab中使用神经网络进行模式识别

> ID：15415595
> 
> 赞同：0
> 
> 时间：2013-03-14T16:59:17.860
> 
> 标签：matlab, neural-network

我正在做一个本地语言字符识别的项目。我创建了数据集。但我不确定如何使用神经网络喂它？

![训练步骤](../Images/da2005cd39e28790ccc824e34ba03d99.png)

在这个阶段，我只能选择一个图像作为输入，而不是一整套相同的字符。如何进行？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:04:24.790

据我所知，这些神经元不理解 2d 输入，因此您需要从图像制作一个 1d 数组：

```
image1flat = image1(:);
image2flat = image2(:); 
```

然后将它们放入 2d 训练集数组中（注意图片上的“样本是：”选项）

```
%samples are columns now
trainningSet = [image1flat image2flat]; 
```

自动化代码：

```
%change this to folder where the files are
cd('/path/to/files');
%change this to your file format
files = dir('*.png');
result = [];
for i = 1:length(files)
    A{i} = imread(files(i).name);
    Aflat{i} = A{i}(:);
    result = [result Aflat{i}];
end
%put the result into nprtool 
```

# delphi - 选中在组中的 TMenuItems 之间切换

> ID：15415598
> 
> 赞同：1
> 
> 时间：2013-03-14T16:59:33.353
> 
> 标签：delphi, delphi-2010

我有三个菜单项，我想通过检查在彼此之间切换。

第一个是默认checked = true，另外两个是false

我想在点击的旁边显示复选标记

我尝试将这三个菜单项的组索引设置为与其他所有菜单项不同，但这似乎不起作用。所有三个菜单项都有 autocheck = true

我必须通过代码手动处理所有这些吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:08:07.043

您需要对三个菜单项中的每一个执行以下操作：

1.  设置`AutoCheck`为`True`。
2.  设置`RadioItem`为`True`。
3.  将`GroupIndex`所有三个项目的 设置为相同的值。

这将导致在您的菜单项旁边放置一个项目符号而不是一个勾号。这是设计使然。这些菜单项的操作类似于单选按钮（因此是项目符号），而不是复选框（会有刻度）。

# c# - C# 从 Visual Studio 中自动生成的 Reference.cs 获取 XML SOAP 响应

> ID：15415607
> 
> 赞同：4
> 
> 时间：2013-03-14T17:00:05.820
> 
> 标签：c#, wsdl, web-reference

在使用 .net 3.5 的 Visual Studio 2008 中，我使用了一个自动生成 Reference.cs 的 WSDL。这是通过右键单击我的项目中的引用并选择“添加 Web 引用”来完成的

使用它我可以发布到 Web 服务并通过我的 ref 和 out 对象获得有效的响应。postValues() 是一个 void 方法。

```
webService.postValues(ref value1, ref value2, out value3); 
```

使用 WireShark，我可以在我的网络上看到请求和完整的肥皂响应。

我想弄清楚的是如何在我的代码中捕获这个原始 SOAP 响应。我想将其捕获以用于记录目的，并且不希望单独序列化每个 ref 对象。

在不修改自动生成的 Reference.cs 的情况下，我无论如何都无法做到这一点，而这 id 而不是这样做。任何帮助，将不胜感激。

编辑：似乎没有办法做到这一点，我可以看到。其他人可以确认或否认这一点吗？

编辑。我再碰一次，看看有没有人知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:01:48.993

您有以下选择：

1.  [在配置中为您的 Web 服务启用跟踪](http://msdn.microsoft.com/en-us/library/vstudio/bb885203%28v=vs.100%29.aspx)，并将所有信息转储到文件中。如果您使用的是 WCF 而不是旧版 Web 服务，请参阅有关[如何为 WCF 启用跟踪的](https://stackoverflow.com/questions/2336810/server-side-tracing-of-soap-messages-for-wcf-service)问题。
2.  [实现您自己的 SoapExtension](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension.aspx)并插入消息处理管道以拦截和转储传入/传出的肥皂消息。我认为链接文章中的示例包含 TraceExtension，它正是这样做的。
3.  按照您的指定修改生成的 Reference.cs 并转储传递的对象。

# java - Java AffinetransformOp filter() 搞砸了我的形象

> ID：15415613
> 
> 赞同：2
> 
> 时间：2013-03-14T17:00:22.367
> 
> 标签：java, image, filter, rotation, affinetransform

我正在尝试使用`Affinetransform.rotate(`) 和. 以 90 度增量旋转 32 x 64 png 图像`AffinetransformOp.filter`。它适用于 0、90 和 180 度，但在 270 度时只显示了我的图像的一半。经过一些研究，我发现这是由于`filter()`处理图像坐标的方式，但我不知道如何解决这个问题。我已经尝试过使用其他方法来旋转图像，但我宁愿使用这个。

旋转图像的方法：

```
public BufferedImage rotateImage(BufferedImage img, double angle) {
    AffineTransform tx = new AffineTransform();
    tx.rotate(angle, img.getWidth() - 16, img.getHeight() - 16);
    AffineTransformOp op = new AffineTransformOp(tx,
            AffineTransformOp.TYPE_BILINEAR);
    return op.filter(img, null);
} 
```

我也有一个截图来澄清我的问题： ![在此处输入图像描述](../Images/3e0a07b3cf71b17c13b0cbcc0160f085.png)

**编辑：**我尝试`filter()`通过添加以下代码手动创建目标图像，但无济于事。

```
int w, h;
if (angle == Math.PI / 2 || angle == 3 * Math.PI / 2) {
        w = img.getHeight();
        h = img.getWidth();
} else {
        w = img.getWidth();
        h = img.getHeight();
}
BufferedImage dest = new BufferedImage(w, h, img.getType());
return op.filter(img, dest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:03:23.397

我认为这与您正在通过的事实有关

```
tx.rotate(angle, img.getHeight() / 2 - 16, img.getHeight() - 16); 
```

什么时候应该

```
tx.rotate(angle, img.getWidth() - 16, img.getHeight() / 2 - 16); 
```

（您通过 getHeight() 两次，我很确定它们的顺序错误）

让我知道这是否会改变您的情况。

# windows - 如何在 Windows Server 2012 操作系统上安装 Microsoft 的 AppFabric 1.1？

> ID：15415616
> 
> 赞同：2
> 
> 时间：2013-03-14T17:00:37.157
> 
> 标签：windows, appfabric, windows-server-2012

我一直在尝试使用从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=27115)下载的 WindowsServerAppFabricSetup_x64.exe 在装有 Windows Server 2012 操作系统的机器上安装 AppFabric 1.1 ：

在尝试此操作时，我遇到了各种问题。这些是我到目前为止所采取的步骤，每一步似乎都让我更接近，但我还没有到达那里。

1.  在尝试安装之前，请确保**Windows 更新服务已启动并正在运行。**

2.  确保**PSModule 环境变量没有问题。**我看过一些与这个问题相关的帖子，我发现的最简单的解决方案（但可能不是最好的）是完全删除环境变量。如需参考，请查看 Lucas Massena 于 2012 年 7 月 13 日在此处找到的帖子 -> social.msdn.microsoft.com/Forums/en-US/velocity/thread/561f3ad4-14ef-4d26-b79a-bef8e1376d64/

3.  **在 "C:\Windows\SysWOW64\inetsrv\"**中创建一个配置文件夹。这似乎是一个奇怪的解决方法，但似乎解决了我遇到的一个问题。- 似乎解决了这个问题 --> 错误：c:\Windows\SysWOW64\inetsrv\config: 系统找不到指定的文件。

参考[帖子](http://social.msdn.microsoft.com/Forums/en-US/dublin/thread/2ba5d2e2-a966-47a6-8c59-c6cfd3a433c7)。

现在我遇到了这个错误：

```
EXEPATH=c:\Program Files\AppFabric 1.1 for Windows Server\ase40gc.exe PARAMS=/i administration 

 [RunInstaller]
Output: Attempt 1 of 3: SuppressErrors=False
Output: [Initialize]
Output: Info: Initializing for update to administration.config...
Output: Installer **ERROR: 0x80040154 Class not registered**
Output: (Waiting 5 seconds)
Output: Attempt 2 of 3: SuppressErrors=False
Output: [Initialize]
Output: Info: Initializing for update to administration.config...
Output: Installer **ERROR: 0x80040154 Class not registered**
Output: (Waiting 10 seconds)
Output: Attempt 3 of 3: SuppressErrors=False
Output: [Initialize]
Output: Info: Initializing for update to administration.config...
Output: Installer ERROR: 0x80040154 Class not registered
Output: **ERROR: _com_error: 0x80040154**
Output: Exit code: 0x80040154 Class not registered 
```

有谁知道这个可执行文件“c:\Program Files\AppFabric 1.1 for Windows Server\ **ase40gc.exe** ”正在做什么导致这个“**类未注册**”错误？如果是这样，我可以采取哪些步骤来修复它？

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T19:54:17.583

我发现我需要启用一些 .NET Framework 功能。完成此操作后，AppFabric 安装成功完成。

要启用所需的 .NET Framework 功能，您可以从 PowerShell 运行以下命令：

```
Import-Module ServerManager
Add-WindowsFeature -Name AS-NET-Framework
Add-WindowsFeature -Name WAS-NET-Environment 
```

由于我正在安装 AppFabric 作为另一个安装的先决条件，因此我编写了这个 C# 脚本来在服务器 2012 上运行 powershell 命令（因此用户不必这样做）：

```
using System;
using System.Diagnostics;

namespace ServerManagerFeatures
{
    class Program
    {
        private static ProcessStartInfo startInfo = new ProcessStartInfo();
        private static Process process = new Process();

        public static void Main(string[] args)
        {

            try
            {
                startInfo.FileName = "powershell.exe";
                startInfo.Arguments = "Import-Module ServerManager;"
                startInfo.Arguments += "echo 'Enabling .NET Framework 4.5';  Add-WindowsFeature AS-NET-Framework;";
                startInfo.Arguments += "echo 'Installing .NET Framework 3.5 Environment. This may take several minutes. Please be patient.'; Add-WindowsFeature WAS-NET-Environment; ";
                startInfo.UseShellExecute = true;

                process.StartInfo = startInfo;
                process.Start();
                process.PriorityBoostEnabled = true;
                process.WaitForExit();
            }
            catch (Exception e)
            {
                MessageBox.Show("Error:" + e.Message + " Make sure you have powershell installed and the executable path is stored in the PATH environment variable.");
            }
     }
} 
```

# c# - 旋转时调整图像大小

> ID：15415617
> 
> 赞同：6
> 
> 时间：2013-03-14T17:00:38.003
> 
> 标签：c#, winforms, visual-studio

我正在尝试旋转图像。我有一个 369x276 的图片框。但是当我旋转时，这个尺寸会减小。

图片框sizeMode 为***PictureBoxSizeMode.StretchImage***

这是我的代码：

```
 Bitmap oldBitmap = (Bitmap)pictureBox1.Image;
        float angle = 90;
        var newBitmap = new Bitmap(oldBitmap.Width, oldBitmap.Height);

        var graphics = Graphics.FromImage(newBitmap);
        graphics.TranslateTransform((float)oldBitmap.Width  / 2, (float)oldBitmap.Height / 2);
        graphics.RotateTransform(angle);
        graphics.TranslateTransform(-(float)oldBitmap.Width / 2, -(float)oldBitmap.Height / 2);
        graphics.DrawImage(oldBitmap, new Point(0, 0));
        pictureBox1.Image = newBitmap; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:01:38.687

只需使用 RotateFlip：

```
Bitmap oldBitmap = (Bitmap)pictureBox1.Image;
oldBitmap.RotateFlip(RotateFlipType.Rotate90FlipNone);
pictureBox1.Image = oldBitmap; 
```

正如@Dan-o 所指出的，这允许旋转[System.Drawing.RotateFlipType](http://msdn.microsoft.com/en-us/library/system.drawing.rotatefliptype.aspx)枚举中的任何度数。

要在不丢失大小的情况下将位图旋转任意角度，您可以执行以下操作，但这有点令人费解！

**一**- 将[WriteableBitmapEx](https://github.com/teichgraf/WriteableBitmapEx/)库添加到您的项目中

**二**- 将 XAML、WindowsBase 和 PresentationCore 库添加到您的项目中

**三**- 使用以下方法将您的位图旋转任意度数：

```
class Program
{
    static void Main(string[] args)
    {
        Bitmap oldBitmap = (Bitmap)pictureBox1.Image;;

        var bitmapAsWriteableBitmap = new WriteableBitmap(BitmapToBitmapImage(oldBitmap));
        bitmapAsWriteableBitmap.RotateFree(23);

        var rotatedImageAsMemoryStream = WriteableBitmapToMemoryStream(bitmapAsWriteableBitmap);
        oldBitmap = new Bitmap(rotatedImageAsMemoryStream);
    }

    public static BitmapImage BitmapToBitmapImage(Bitmap bitmap)
    {
        var memStream = BitmapToMemoryStream(bitmap);
        return MemoryStreamToBitmapImage(memStream);
    }

    public static MemoryStream BitmapToMemoryStream(Bitmap image)
    {
        var memoryStream = new MemoryStream();
        image.Save(memoryStream, ImageFormat.Bmp);

        return memoryStream;
    }

    public static BitmapImage MemoryStreamToBitmapImage(MemoryStream ms)
    {
        ms.Position = 0;
        var bitmap = new BitmapImage();

        bitmap.BeginInit();

        bitmap.StreamSource = ms;
        bitmap.CacheOption = BitmapCacheOption.OnLoad;

        bitmap.EndInit();
        bitmap.Freeze();

        return bitmap;
    }

    private static MemoryStream WriteableBitmapToMemoryStream(WriteableBitmap writeableBitmap)
    {
        var ms = new MemoryStream();

        var encoder = new JpegBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(writeableBitmap));

        encoder.Save(ms);

        return ms;
    }
} 
```

屁股疼，但有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:06:05.173

较小的图像尺寸是意料之中的。我从来没有弄清楚为什么，但`Graphics.DrawImage`只有当你不仅提供一个开始位置，而且提供一个大小时，它才真正起作用。其中一个重载允许您包含大小。

# c - 二维矩形阵列转换成函数

> ID：15415618
> 
> 赞同：0
> 
> 时间：2013-03-14T17:00:43.100
> 
> 标签：c

我有一个 2D 矩形数组`char rect_array [4][20]`，其中的内容由用户定义，要传递到固定函数原型中，如下所示：

```
int findTarget (char *string, char *nameptr[], int num) 
```

以下不起作用，因为在 rect_array 中下划线为错误：

```
findTarget (user_input, rect_array, no_of_names); 
```

试过等：

```
rect_array[4][20]
&rect_array
rect_array[4] 
```

我可以知道出了什么问题吗？如果原型必须如上所述？我要更改数组声明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:12:32.350

**编辑**根据添加到问题中的信息，OP 不能更改函数原型，它必须是：

```
int findTarget (char *string, char *nameptr[], int num) 
```

在这种情况下，将 2D 表“传递”给该函数的唯一方法是通过临时指针数组。一些花哨`malloc()`的东西会起作用，但最终它会归结为：

```
char data[4][20];
char *dataptrs[] = { data[0], data[1], data[2], data[3] };
char name[] = "name";

findTarget(name, dataptrs, sizeof(dataptrs)/sizeof(dataptrs[0])); 
```

* * *

**原帖**

对于具有固定 20 字符长度表的 C 解决方案：

```
int findTarget (const char *string, const char names[][20], size_t rows)
{
   // each row ("rows" count of them) is fixed at 20 chars wide.
   // ....
} 
```

或者...

```
int findTarget (const char *string, const char (*names)[20], size_t rows)
{
   // each row ("rows" count of them) is fixed at 20 chars wide.
   // ....
} 
```

像这样调用：

```
char data[4][20];

findTarget("targetName", data, sizeof(data)/sizeof(data[0])); 
```

* * *

注意：如果您的平台支持它们（并且几乎所有它们*都*支持），您可以在 C 中使用 VLA（可变长度数组）来使宽度成为函数的任意参数：

```
int findTarget (const char *string, 
    size_t rows, size_t cols, 
    const char (*names)[cols])
{
   // each row ("rows" count of them) is variable to "cols" columns wide.
   // ....
} 
```

调用为：

```
char data[4][[20];

findTarget("target", sizeof(data)/sizeof(data[0]), sizeof(data[0]), data); 
```

# grails - Grails 编译错误 java.lang.StringIndexOutOfBoundsException 从 2.0.1 升级到 2.0.2

> ID：15415619
> 
> 赞同：2
> 
> 时间：2013-03-14T17:00:44.897
> 
> 标签：grails, compilation

我有一个使用 1.3.7 版的生产 grails 应用程序。我想更新它并使用 grails 2.2.0。我直接对 2.2.0 进行了“grails 升级”并收到一个奇怪的编译错误。然后我尝试从 1.3.7 到 2.0.1 的增量升级，并且能够编译我的应用程序。当我升级到 2.0.2 时，我看到了与直接升级到 2.2.0 相同的奇怪编译错误。编译错误的问题是它没有引用我的任何软件，只是 grails 和 java 的组件。这是编译错误：

]# grails 编译

| 编译 159 个源文件。| 错误编译错误：启动失败：规范化期间的一般错误：字符串索引超出范围：1

java.lang.StringIndexOutOfBoundsException：字符串索引超出范围： grails.util.GrailsNameUtils.getPropertyNameRepresentation(GrailsNameUtils.java:224)的 grails.util.GrailsNameUtils
的 java.lang.String.substring(String.java:1907) 的 1。 org.codehaus.groovy.grails.web.binding.DefaultASTDatabindingHelper.getPropertyNamesToIncludeInWhiteList(DefaultASTDatabindingHelper.java:201) 中的getPropertyName(GrailsNameUtils.java:183) java:102) 在 org.codehaus.groovy.grails.web.binding.DefaultASTDatabindingHelper.injectDatabindingCode(DefaultASTDatabindingHelper.java:68)

在 org.codehaus.groovy.grails.compiler.web.ControllerDomainTransformer.performInjection(ControllerDomainTransformer.java:58)
在 org.codehaus.groovy.grails.compiler.injection.GrailsAwareInjectionOperation.call(GrailsAwareInjectionOperation.java:140)
在 org.codehaus .groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:967)
at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:546)
at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java :524)
在 org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:501)
在 org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:480)
在 org.codehaus.groovy.tools.FileSystemCompiler.compile(FileSystemCompiler.java:60)
在 org.codehaus.groovy.tools.FileSystemCompiler.doCompilation(FileSystemCompiler.java:216)
在 org.codehaus.groovy.ant.Groovyc.compile (Groovyc.java:909)
在 org.codehaus.groovy.grails.compiler.Grailsc.compile(Grailsc.java:79)
在 org.codehaus.groovy.ant.Groovyc.execute(Groovyc.java:607)
在 org. apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java :106)在 groovy.util.BuilderSupport.doInvokeMethod (BuilderSupport.java:147) 在
groovy.util.AntBuilder.nodeCompleted(AntBuilder.java:220)
在 groovy.util.AntBuilder.performTask(AntBuilder.java:260) .util.AntBuilder.doInvokeMethod(AntBuilder.java:170) 在 groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64) 在 org.codehaus.gant.GantBuilder.invokeMethod(GantBuilder.java:99)

在 org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:45)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
在 org.codehaus.groovy.runtime .callsite.AbstractCallSite.call(AbstractCallSite.java:108)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)
在 org.codehaus.groovy.grails.compiler.GrailsProjectCompiler.compile(GrailsProjectCompiler .groovy:266)
在 org.codehaus.groovy.grails.compiler.GrailsProjectCompiler$compile$0.callCurrent(Unknown Source)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
在 org.codehaus.groovy.grails .compiler.GrailsProjectCompiler.compile(GrailsProjectCompiler.groovy:237)
at org.codehaus.groovy.grails.compiler.GrailsProjectCompiler$compile.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray. java:42)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
在 _GrailsCompile_groovy$_run_closure2_closure6_closure7.doCall(_GrailsCompile_groovy:48)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java :43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
在 org.codehaus.groovy。 runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
在 _GrailsCompile_groovy$_run_closure2_closure6_closure7.doCall(_GrailsCompile_groovy )
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect。 org.codehaus.groovy.reflection.CachedMethod.invoke( CachedMethod.java:90) 上的 Method.invoke(
Method.java:601)
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang。 MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
at groovy.lang.Closure.call(Closure.java:412)
at groovy.lang.Closure.call(Closure.java:406)
at java_util_concurrent_Callable$call.call(Unknown Source)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
在 java_util_concurrent_Callable$call.call(Unknown Source)
在 _GrailsCompile_groovy.withCompilationErrorHandling(_GrailsCompile_groovy:69)
在 _GrailsCompile_groovy.this$4$withCompilationErrorHandling(_GrailsCompile_groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java :233)在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
的 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047 )

在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:992)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang。 MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
at groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
at org.codehaus.gant.GantMetaClass .invokeMethod(GantMetaClass.java:168)
在 groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
在 groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1112)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1006)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 org.codehaus。 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent
(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite 的 groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)。 callCurrent(AbstractCallSite.java:133)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
at _GrailsCompile_groovy$_run_closure2_closure6.doCall(_GrailsCompile_groovy:47)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method .invoke(Method.java:601)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java :52)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
在 _GrailsCompile_groovy$_run_closure2_closure6.doCall(_GrailsCompile_groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod。 在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
的 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)调用(CachedMethod.java:90 )

在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang。 org.codehaus.groovy.grails.cli.api.BaseSettingsApi.profile(BaseSettingsApi.java:279)
的 Closure.call(Closure.java:406) sun.reflect.NativeMethodAccessorImpl.invoke0
(Native Method)
的 sun.reflect。 NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:914)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl .invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.MetaClassImpl.invokePropertyOrMissing(MetaClassImpl.java:1093)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1049)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:697)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
。 GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)
在 groovy.lang.Script.invokeMethod(Script.java:78)
在 groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1112)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl .java:1006)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
在 org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
在 org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java :66)在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)在 org.codehaus
的 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46) 。 groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145) at _GrailsCompile_groovy$_run_closure2.doCall(_GrailsCompile_groovy:46) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org. codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang .ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
在 org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang.Closure.call(Closure.java:425)
在 sun。在 org.codehaus.groovy.reflection 的 java.lang.reflect.Method.invoke(Method.java:601)的 sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:43)的reflect.GeneratedMethodAccessor68.invoke(Unknown Source) 。 CachedMethod.invoke(CachedMethod.java:90) 在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233) 在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047) 在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass .java:1110)

在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:149)
在 org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
在 org. codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
在 org.codehaus.groovy.runtime.callsite。 PogoMetaClassSite.call(PogoMetaClassSite.java:54)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:185)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method .invoke(Method.java:601)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java :52)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
在 org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl .invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang。 MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang。 Closure.call(Closure.java:406)
at java_util_concurrent_Callable$call.call(Unknown Source)
at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
at org.codehaus.gant.GantBinding.this$4$withTargetEvent (GantBinding.groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90 )
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang .MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:992)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:697)
在 groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44) 在 groovy.lang。 MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:1112) 在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1006) 在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110) 在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl .java:877）在 org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66) 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:149)
在 org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226 )
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(
AbstractCallSite.java:141) 的 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
在 org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl .invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang。 MetaMethod.doMethodInvoke(MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang.Closure.call(Closure.java:406)
在 java_util_concurrent_Callable$call。 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)调用（未知来源） 。 codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112) 在 gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)

在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method .invoke(Method.java:601)
at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
at groovy.lang.MetaClassImpl。 invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang.Closure.call(Closure.java:425)
在 groovy.lang.Closure$call.call(Unknown Source)
在 org.codehaus.groovy .runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call (AbstractCallSite.java:116)
在 gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite .java:226)在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52) 在 org. codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133) 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)

在 gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl .java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang.MetaMethod.doMethodInvoke( MetaMethod.java:233)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
在 groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
在 groovy.lang.Closure.call(Closure.java:412)
在 groovy.lang.Closure.call(Closure.java:406)
在 java_util_concurrent_Callable$call。 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)调用（未知来源） 。 codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112) at gant.Gant.withBuildListeners(Gant.groovy:427) at gant.Gant.this$2$withBuildListeners(Gant.groovy)

在 gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent (AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
在 gant.Gant.dispatch(Gant.groovy:415)
在 gant.Gant.this$2$dispatch (Gant.groovy)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
在 groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233 )
在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047) 在 groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877) 在 groovy.lang.ExpandoMetaClass.invokeMethod
(ExpandoMetaClass.java:1110) .MetaClassImpl.invokeMethod(MetaClassImpl.java:699) at gant.Gant.invokeMethod(Gant.groovy) at groovy.lang.GroovyObject$invokeMethod.callCurrent(Unknown Source)

在 org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime .callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java ) 的 gant.Gant.executeTargets(Gant.groovy:591) :57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
在 org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
在 org.codehaus.groovy .runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent (AbstractCallSite.java:145)
在 gant.Gant.executeTargets(Gant.groovy:590)
在 org.codehaus.groovy.grails.cli.GrailsS​​criptRunner.executeWithGantInstance(GrailsS​​criptRunner.java:693)
在 org.codehaus.groovy.grails.cli.GrailsS​​criptRunner.executeScriptFile(GrailsS​​criptRunner.java:497)
在 org.codehaus.groovy.grails.cli.GrailsS​​criptRunner.executeScriptWithCaching(GrailsS​​criptRunner.java:432)
在 org.codehaus.groovy.grails .cli.GrailsS​​criptRunner.callPluginOrGrailsS​​cript(GrailsS​​criptRunner.java:383)
at org.codehaus.groovy.grails.cli.GrailsS​​criptRunner.executeCommand(GrailsS​​criptRunner.java:362)
at org.codehaus.groovy.grails.cli.GrailsS​​criptRunner.main(GrailsS​​criptRunner .java:228)
在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
在 java.lang.reflect.Method.invoke(Method.java:601)
在 org.codehaus.groovy.grails.cli.support.GrailsS​​tarter.rootLoader(GrailsS​​tarter .java:234)
在 org.codehaus.groovy.grails.cli.support.GrailsS​​tarter.main(GrailsS​​tarter.java:262)

1 个错误

我已经阅读了 2.0.2 发行说明：[http://beta.grails.org/2.0.2+Release+Notes](http://beta.grails.org/2.0.2+Release+Notes)，但似乎没有什么能帮助我找到一个开始发现我的问题的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:14:58.100

你有没有机会在你的一个域类中有一个方法，简单地命名为: `set()`，有一个参数？该错误似乎源于通过检查设置器的存在来构建符合绑定条件的属性列表的[代码。](https://github.com/grails/grails-core/blob/master/grails-web/src/main/groovy/org/codehaus/groovy/grails/web/binding/DefaultASTDatabindingHelper.java#L201)

# java - Android 数据库到数组

> ID：15415623
> 
> 赞同：1
> 
> 时间：2013-03-14T17:00:54.147
> 
> 标签：java, android, arrays, sqlite

我对 Android Java 完全陌生，尤其是数据库链接。到目前为止，我已经得到了这个，这一切似乎都有效，我现在需要将数据库值从数据库中获取到数组中。

```
package com.example.sleepertrain5;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper{
private static String DB_PATH = "/sleepertrain5/assets";
private static String DB_NAME="info2.sqlite";
private SQLiteDatabase myDatabase;
private final Context myContext;

public DataBaseHelper(Context context){
super(context, DB_NAME, null, 1);
this.myContext=context;

}

public void createDataBase() throws IOException{
boolean dbExist = checkDataBase();

if(dbExist){
    //nothing needs done
}else{
    this.getReadableDatabase();

    try {
        copyDataBase();
    } catch (IOException e){
        throw new Error("Error copying database");
    }

    }
}
private boolean checkDataBase(){
SQLiteDatabase checkDB = null;

try{
    String myPath = DB_PATH + DB_NAME;
    checkDB = SQLiteDatabase.openDatabase(myPath, null,         SQLiteDatabase.OPEN_READONLY);
}catch(SQLiteException e){
    //no databases they don't exist
}
    if (checkDB != null){
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException{
InputStream myInput = myContext.getAssets().open(DB_NAME);
String outFileName = DB_PATH +DB_NAME;
OutputStream myOutput = new FileOutputStream(outFileName);

byte[] buffer = new byte[1024];
        int length;
while ((length=myInput.read(buffer))>0){
    myOutput.write(buffer,0,length);
}

myOutput.flush();
myOutput.close();
myInput.close();
}
public void openDataBase() throws SQLException{
//Open database
String myPath = DB_PATH + DB_NAME;
myDatabase = SQLiteDatabase.openDatabase(myPath,  null, SQLiteDatabase.OPEN_READONLY);

}

public synchronized void close(){
if(myDatabase != null)
    myDatabase.close();
super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// TODO Auto-generated method stub

}
} 
```

我将如何从这个读入一个数组？我目前正在努力理解这一点，所以任何帮助都会很棒。

编辑：计划是将数据（即坐标和名称）读取到数组中，然后我可以使用它在 GoogleMap 上绘制标记。谷歌地图已经全部设置好，我想我知道我在做什么，但这是我失败的部分。数组必须是多维的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:13:52.493

好的，所以在我看来，使用 SQLite 最简单的方法是使用这种三类方法。我已经阅读了一些教程，但对我来说都没有真正的诀窍......

所以，我们开始吧。

**表定义**

```
 package com.test.sqlite;

import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class ContactTable
{
//key identifiers / column names
public static final String      KEY_ROWID       = "_id";
public static final String      KEY_NAME        = "name";
public static final String      KEY_URI         = "uri";
public static final String      TABLE_NAME      = "contacts";

//useful stuff
public static final String[]    TABLE_COLUMNS   = { KEY_ROWID, KEY_NAME, KEY_URI };     //public makes it more useful
private static final String[]   TABLE_COLTYPES  = { "integer primary key autoincrement", "text not null", "text not null" };

// Database creation SQL statement in lazy-pretty version
private static final String     TABLE_CREATE    = "create table " + TABLE_NAME + "("
                                                        + TABLE_COLUMNS[0] + " " + TABLE_COLTYPES[0] + ","
                                                        + TABLE_COLUMNS[1] + " " + TABLE_COLTYPES[1] + "," 
                                                        + TABLE_COLUMNS[2] + " " + TABLE_COLTYPES[2] + ");";

private static final String     LOGTAG          = "ContactTable";

public static void onCreate(SQLiteDatabase database)
{
    database.execSQL(TABLE_CREATE);
}

public static void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion)
{
    Log.w(LOGTAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(database);
}

public static void scratch(SQLiteDatabase database)
{
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    database.execSQL(TABLE_CREATE);
}
} 
```

现在我们已经设置好了，我们需要 Database Helper 类来简化它的使用。

**助手类**

```
package com.test.sqlite;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class ContactDBHelper extends SQLiteOpenHelper
{
// 'main' package name
private static final String PACKAGE_NAME        = "com.test.demo";      

private static final String DATABASE_PATH       = "/data/data/" + PACKAGE_NAME + "/databases/";
private static final String DATABASE_NAME       = "contactdata";
private static final int    DATABASE_VERSION    = 1;

private Context             myContext;

public ContactDBHelper(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    myContext = context;
}

// Method is called during creation of the database
@Override
public void onCreate(SQLiteDatabase database)
{
    ContactTable.onCreate(database);
}

// Method is called during an upgrade of the database,
// e.g. if you increase the database version
@Override
public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion)
{
    ContactTable.onUpgrade(database, oldVersion, newVersion);
}

public void scratch(SQLiteDatabase database)
{
    ContactTable.scratch(database);
}
/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */
public void createDataBase() throws IOException
{
    boolean dbExist = checkDataBase();
    if (dbExist)
    {
        // do nothing - database already exist
    } else
    {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        File dirFile = new File(DATABASE_PATH);
        if (!dirFile.exists())
        {
            dirFile.mkdir();
        }

        this.getReadableDatabase();

        try
        {
            copyDataBase();
        } catch (IOException e)
        {
            throw new Error("Error copying database");
        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;
    try
    {
        String myPath = DATABASE_PATH + DATABASE_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e)
    {
        // database does't exist yet.
    }
    if (checkDB != null) checkDB.close();

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException
{

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DATABASE_NAME);

    // Path to the just created empty db
    String outFileName = DATABASE_PATH + DATABASE_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0)
    {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

/*
public void openDataBase() throws SQLException
{

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}
*/
} 
```

最后是适配器，它完全可以满足您的需求。

**数据库适配器**

```
package com.test.sqlite;

import java.util.ArrayList;

import com.test.demo.Contact;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import static com.test.sqlite.ContactTable.*;   //contains database fields

public class ContactDBAdapter
{

private Context         context;
private SQLiteDatabase  db;
private ContactDBHelper dbHelper;

public ContactDBAdapter(Context context)
{
    this.context = context;
}

public synchronized ContactDBAdapter open() throws SQLException
{
    dbHelper = new ContactDBHelper(context);
    db = dbHelper.getWritableDatabase();
    return this;
}

public synchronized void close()
{
    dbHelper.close();
}

/**
 * Create a new Contact entry. If the entry is successfully created return the new
 * rowId for that note, otherwise return a -1 to indicate failure.
 */
public long createRow(Contact contact)
{
    ContentValues values = createContentValue(contact);
    return db.insert(TABLE_NAME, null, values);
}

/**
 * Update a row / entry
 */
public boolean updateRow(long rowIndex, Contact contact)
{
    ContentValues values = createContentValue(contact);

    return db.update(TABLE_NAME, values, KEY_ROWID + "=" + rowIndex, null) > 0;
}

/**
 * Deletes a row
 */
public boolean deleteRow(long rowIndex)
{
    return db.delete(TABLE_NAME, KEY_ROWID + "=" + rowIndex, null) > 0;
}

public void deleteAllRows()
{
    for(int i = 0; i < fetchAllEntries().getCount(); i++)
        deleteRow(i);
}

/**
 * Return a Cursor over the list of all Contacts in the database
 * 
 * @return Cursor over all contacts
 */
public Cursor fetchAllEntries()
{
    return db.query(TABLE_NAME, TABLE_COLUMNS, null, null, null, null, null);
}

/**
 * Return a Cursor positioned at the defined Contact
 */
public Cursor fetchEntry(long rowIndex) throws SQLException
{
    Cursor mCursor = db.query(true, TABLE_NAME, TABLE_COLUMNS, KEY_ROWID + "=" + rowIndex, null, null, null, null, null);
    if (mCursor != null)
    {
        mCursor.moveToFirst();
    }
    return mCursor;
}

/**
 * Fetch all entries and rebuild them as Contact objects in an ArrayList. 
 * If no results are found, an empty list is returned.
 * 
 * @return ArrayList of Contacts 
 */
public ArrayList<Contact> fetchAllContacts()
{
    ArrayList<Contact> res = new ArrayList<Contact>();

    Cursor resultSet = fetchAllEntries();

    if (resultSet.moveToFirst() != false)
        for(int i = 0; i < resultSet.getCount(); i++)
        {
            String name = resultSet.getString(resultSet.getColumnIndex(KEY_NAME));
            String URI = resultSet.getString(resultSet.getColumnIndex(KEY_URI));

            Contact c = new Contact(name, URI);

            res.add(c);
            if(resultSet.moveToNext() == false)
                break;
        }
    resultSet.close();
    return res;
}

public synchronized void reflectWith(ArrayList<Contact> contacts)
{
    //      deleteAllRows();
    dbHelper.scratch(db);
    contacts.trimToSize();
    //empty contact
    Contact empty = new Contact();
    empty.empty();

    for(Contact c : contacts)
    {
        if(!c.getName().equals(empty.getName()))
            createRow(c);   //if not empty, add it
    }
}

private ContentValues createContentValue(Contact contact)
{
    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_URI, contact.getURI());
    return values;
}

} 
```

这是它的使用方式：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    dbAdapter = new ContactDBAdapter(getApplicationContext());
    dbAdapter.open();

    setContentView(R.layout.main);

    // list stuff
    contacts = new ArrayList<Contact>();
    contacts = dbAdapter.fetchAllContacts();

    //empty placeholders
    if (contacts.size() < 5) for (int i = 0; i < 5 - contacts.size(); i++)
    {
        Contact c = new Contact();
        c.empty();
        contacts.add(c);
    }
    //      contacts.addAll(dbAdapter.fetchAllContacts());
...
} 
```

如果您有任何问题，请务必提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:31:43.140

Android 使用 SQLite 数据库和 SQLite 查询语法进行数据库访问。

要通过 SQLiteDatabase db 变量直接查询数据库，您可以执行以下操作：

```
String table = CONTACT_TABLE;
String columns = {CONTACT_COLUMN_NAME};
String selection = CONTACT_COLUMN_NAME + "=" + MY_NAME;
String[] selectionArgs = {"wangyif2"};
Cursor c = db.query(table, columns, selection, selectionArgs, null, null, null, null); 
```

这将返回一个 Cursor 对象，您可以将其理解为包含与查询匹配的所有结果的迭代器。然后，您可以像处理任何转换为​​迭代器的数组一样单步执行光标。

```
c.moveToFirst();
while (!c.isAfterLast()) 
{
    arr[i]  = cur.getString(0);
    i++;
    c.moveToNext();
} 
```

# sql - ORA-00907: 添加新列时缺少右括号

> ID：15415628
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:01:12.257
> 
> 标签：sql, oracle

```
create table student (
       name varchar2(20),
       s1 number(3),
       s2 number(3),
       s3 number(3)
);

insert into student values('ashok',50, 90, 70);

select name,s1,s2,s3, s1+s2+s3 "Total" 
from student;

select name,s1,s2,s3,if((s1+s2+s3)>(105)){'pass'}   "Total" 
from student 
group by name; 
```

任何人都可以帮助如何打印新列学生看到每个科目是通过还是失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:08:49.343

试试这个：

```
select distinct
    name,
    s1,
    s2,
    s3,
    case when (s1+s2+s3) > 105 then 'pass'
        else 'fail'
        end as "Total" 
from student; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:09:27.280

那样的话就不能用了。您要查找的句法词是 CASE。

```
SELECT 
  name, s1,s2,s3,
  CASE
    WHEN (s1+s2+s3)>105 THEN 'Pass'
    ELSE 'Fail'
  END as 'Total'
FROM 
  student 
```

# python - 大型 python 龙卷风项目的最佳结构是什么？

> ID：15415634
> 
> 赞同：4
> 
> 时间：2013-03-14T17:01:57.207
> 
> 标签：python, structure, tornado, large-scale

我正在使用以龙卷风为核心的 mongodb 数据库后端。我目前只有我的主文件，里面有一堆处理程序。这是一个多用户网络应用程序，用户之间有链接，也就是“朋友”系统。

```
My current structure is:
    templates/
    static/
    main.py (contains all handlers)
    user_actions.py
    auth_actions.py
    .
    .
    .
    bar_actions.py 
```

大多数处理程序对应于动作文件。例如，好友请求处理程序对应于 user_actions.py 中的函数，该函数接受数据库和用户 ID 作为参数。我觉得这不是这样一个大型项目的最佳布局。我是否应该拥有某种包含当前用户模型的模型文件，或者这只是多余的。我目前将当前用户作为字典存储在 cookie 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T17:18:47.860

If you have lots of handlers with code for each handler you can break them out into their own files and put them in a `handlers` directory located inside your app.

Tornado doesn't enforce a structure, so I would look at the sample tornado projects and any open source tornado projects on github to get an idea of other people's structures.

I have only made 1 tornado project but the examples I found online used the convention I outlined above:

```
├── app.py
├── common
│   ├── __init__.py
│   └── utils.py
├── custom_settings.py
├── handlers
│   ├── user_handler.py
│   ├── auth_handler.py
│   └── __init__.py
├── __init__.py
├── requirements.txt
├── scripts
├── supervisord.conf
└── tests
    ├── __init__.py
    ├── test_common.py
    └── test_handlers.py 
```

# java - GlassFish 连接到 SLL Web 服务

> ID：15415638
> 
> 赞同：0
> 
> 时间：2013-03-14T17:02:05.410
> 
> 标签：java, rest, ssl, glassfish

我有一个在本地 GlassFish v3 上运行的网络应用程序。该应用程序连接到另一个服务器（非本地）上的 REST Web 服务。连接是通过 HTTPS 完成的。在尝试连接时，我得到：

```
javax.net.ssl.SSLHandshakeException: 
sun.security.validator.ValidatorException: 
PKIX path building failed: 
sun.security.provider.certpath.SunCertPathBuilderException:
unable to find valid certification path to requested target 
```

我将外部 ws 目录中的证书添加到本地 java 密钥库，但这并没有解决问题。

我是否必须指示 GlassF 使用本地密钥库或其他东西？或者只是将它添加到 java 密钥库中，它也应该适用于本地 GlassF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:09:33.650

你有两个选择：

1.) 将**$JAVA_HOME/jre/lib/security**目录中的 cacerts 替换为您的密钥库。

2.) 在运行时更改密钥库，如下所示：

```
System.setProperty("javax.net.ssl.keyStore", <path to the new keystore>);
System.setProperty("javax.net.ssl.keyStorePassword",<password of the keystore>);
System.setProperty("javax.net.ssl.trustStore",<path to the new keystore>); 
```

希望有帮助！

编辑：您可能会发现[这个](https://serverfault.com/questions/251805/issues-with-setting-up-ssl-on-glassfish-v3)问题也很有帮助。选定的答案建议：

1.) 将您的密钥库文件复制到 C:\glassfish3\glassfish\domains\domain1\config\

2.) 将 GlassFish 配置为使用 SSL

# c# - 永久更改静态值

> ID：15415642
> 
> 赞同：0
> 
> 时间：2013-03-14T17:02:12.510
> 
> 标签：c#, wcf

我有一个 Windows Communication Foundation (WCF) 服务正在运行。调用服务时，有时服务必须重新启动并填充所有静态值，因为我猜网络服务器会在一段时间不活动后关闭服务。如果不断调用它，它会保持活动状态并填充所有值。我在该类中有一个静态整数，它被服务调用使用，例如，我有 30，但我有时使用服务调用设置该静态值，以便新值是 20，但由于服务被解构Web 服务器在一段时间不活动后，该值再次初始化为 30。当 WCF 服务被构造（静态构造函数）被调用时，有没有办法将 30 值永久设置为 20？有没有更好的方法来做到这一点？我想通过 Web 服务调用随时更改其中的 2-3 个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:40:22.610

即使没有重新启动，如果您只是将此值存储在内存中，它也不会“永久”存储。数据库或类似的东西会很棒，但是如果您还没有使用数据库来存储任何东西，那么使用一个数据库来存储单个值似乎有点矫枉过正。写入文件呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:48:04.127

我建议使用内置的 Settings 静态类

```
Settings.Default["StaticValue"] = "30";
Settings.Default.Save(); 
```

[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

# matrix - 取2个向量的差并将它们求和并平方

> ID：15415644
> 
> 赞同：1
> 
> 时间：2013-03-14T17:02:19.310
> 
> 标签：matrix, matlab

我有 2 个大小为 1x90 的向量。

我必须做运营商

```
diff=sum((V_new-V).^2); 
```

但每次我这样做我都会得到错误：

```
Subscript indices must either be real positive integers or logical. 
```

我怎样才能解决这个问题并防止它再次发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:03:01.447

确保您没有跨过该`sum`功能：

1.  类型

    ```
    >> dbstop if error 
    ```

2.  运行代码，发生错误时它应该在调试器中停止。

3.  检查什么`sum`是：

    ```
    >> which sum 
    ```

    应该返回这`sum`是一个内置函数，但如果您不小心创建了一个具有该名称的变量，它会告诉您这`sum`是一个变量。

**不要使用内置函数的名称作为变量**

# php - 在 PHP 中调用非对象的成员函数 find()？

> ID：15415645
> 
> 赞同：0
> 
> 时间：2013-03-14T17:02:29.903
> 
> 标签：php, dom, find, fatal-error

我`dom()`用来解析 HTML 中的内容。基本上在 tag 里面`<img class="logo">`。

我`$this->dom->find('img[class=logo]')`用来获取价值。

但是在执行此操作时，有时我会遇到没有上述指定标记的 HTML。

在这种情况下，它会引发错误 -`Fatal error: call to member function find() on non-object`

我不希望发生这种错误。相反，如果找不到指定的标签，我想跳过。

我也尝试过 try-catch 来跳过错误，但它不能正常工作。

这是我的代码，

```
try {
    foreach ($this->dom->find('img[class=logo]') as $result) {
        //echo $result->src."\n";
        $li_img = $result->src;
    }
    if(!isset($li_img))
        return;
    else
        return $li_img;
} catch(Exception $e) {
    return;
} 
```

`dom`如果找不到标签，我想跳过。它现在正在抛出错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:06:51.970

该错误意味着它`$this->dom`不是一个对象，所以你不能使用`$this->dom->find()`.

# java - 使用我们自己的 Android 应用程序在 MifareClassic 卡上书写

> ID：15415647
> 
> 赞同：1
> 
> 时间：2013-03-14T17:02:47.180
> 
> 标签：java, android, nfc, rfid, mifare

我目前正在尝试开发一个 android 应用程序，它将在 Mifare 卡上写一个小文本。我试图编写一个应用程序，但代码不起作用。有人知道我必须在 Android Manifest 上写什么吗？这是我的代码，如果有人可以帮助我，那就太好了。非常感谢

公共静态最终标签创建者=空；

```
public void ecrirenfc(Tag tag) {

    MifareClassic mfc = MifareClassic.get(tag);

    try {
        mfc.connect();
        boolean auth = false;

        auth = mfc.authenticateSectorWithKeyA(1, MifareClassic.KEY_DEFAULT);

        if (auth) {
            String text = "Hello, World!";
            byte[] value = text.getBytes();
            byte[] toWrite = new byte[MifareClassic.BLOCK_SIZE];

            for (int i = 0; i < MifareClassic.BLOCK_SIZE; i++) {
                if (i < value.length)
                    toWrite[i] = value[i];
                else
                    toWrite[i] = 0;
            }

            mfc.writeBlock(1, toWrite);
        }

    } catch (IOException e) {
    }
}

public void onClick(View view) {
    if (view.getId() == R.id.button1) {
        ecrirenfc(CREATOR);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:04:22.847

您需要使用

```
sectorToBlock(int sectorIndex) 
```

方法来确定扇区的第一个块。然后使用

```
getBlockCountInSector(int sectorIndex) 
```

确定您可以在该扇区中写入多少块 (-1)。

对于上面的代码，当您验证扇区 1 时，您正尝试写入扇区 0。

# maven - maven 版本发布候选和快照

> ID：15415666
> 
> 赞同：6
> 
> 时间：2013-03-14T17:03:57.173
> 
> 标签：maven, snapshot, rc, versions-maven-plugin

我的目标是发布一个具有单一依赖项的项目。我有一个 nexus 存储库，我在其中部署快照和发布版本。

我有一个依赖

```
group:artifact:1.1.0-SNAPSHOT 
```

并且下面的候选发布版本在我的 nexus repo 中发布

```
group:artifact:1.1.0-RC1 
```

当要求版本插件解决依赖关系时，它声称没有新的依赖关系可用。所以他认为

```
1.1.0-SNAPSHOT > 1.1.0-RC1 
```

但是，如果在我的项目中，我有 1.0.0-SNAPSHOT 版本，则 1.1.0-RC1 版本被解析为最新版本。

我错过了什么？（我查看了插件源代码，我们有以下代码段：

```
String otherQualifier = otherVersion.getQualifier();

if ( otherQualifier != null )
{
  if ( ( qualifier.length() > otherQualifier.length() )
      && qualifier.startsWith( otherQualifier ) )
  {
    // here, the longer one that otherwise match is considered older
    result = -1;
  }
  else if ( ( qualifier.length() < otherQualifier.length() )
      && otherQualifier.startsWith( qualifier ) )
  {
    // here, the longer one that otherwise match is considered older
    result = 1;
  }
  else
  {
    result = qualifier.compareTo( otherQualifier );
  }
} 
```

这对我来说似乎是错误的。任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T21:16:41.620

Maven 版本号组成如下：

```
<major version>.<minor version>.<incremental version>-<qualifier> 
```

如果所有版本号都相等，则按字母顺序比较限定符。“RC1”和“SNAPSHOT”的排序与“a”和“b”没有区别。因此，“SNAPSHOT”被认为较新，因为它按字母顺序更大。请参阅[此页面](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)作为参考。

*请注意，这`a.b.c-RC1-SNAPSHOT`将被视为早于`a.b.c-RC1`.*

我不确定该建议什么作为解决方案——这就是 Maven 版本控制的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T14:39:53.650

规范仅适用于major.minor.increment-qualifier，通过字典顺序比较合格，独立于beeing快照或其他。

我最终派生了 maven-versions-plugin 并实现了我自己的版本方案，该方案认为发布候选者的快照版本总是比发布候选者本身更旧。

这并不难实现，我从

```
org/codehaus/mojo/versions/ordering/MavenVersionComparator 
```

并由自己的班级声明

```
org/codehaus/mojo/versions/ordering/VersionComparators.java 
```

并实现了我自己的业务逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T12:53:26.993

截至[https://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm](https://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm)

> 所有带有限定符的版本都比没有限定符的相同版本（发行版）旧。
> 
> 例如：
> 
> 1.2-beta-2 早于 1.2。
> 
> 通过使用基本字符串比较来比较具有不同限定符字段的相同版本。
> 
> 例如：
> 
> 1.2-beta-2 比 1.2-alpha-6 更新。

和

> Maven 对待 SNAPSHOT 限定符的方式与所有其他限定符不同。如果版本号后跟 -SNAPSHOT，则 Maven 将其视为关联的 MajorVersion、MinorVersion 或 IncrementalVersion 的“尚未发布”版本。

# inno-setup - 如何在注册表部分条目中对 Root 参数使用代码函数？

> ID：15415671
> 
> 赞同：4
> 
> 时间：2013-03-14T17:04:15.927
> 
> 标签：inno-setup

我想`HKLM`在用户是管理员或`HKCU`用户是普通用户时设置一个注册表项。

我试过这个：

```
[Registry]
Root: "{code:DefRegRoot}"; Subkey: "Software\MyCompany\MySW\Settings"; ValueType: string; ValueName: "InstallPath"; ValueData: "{app}"

[Code]
function IsRegularUser(): Boolean;
begin
  Result := not (IsAdminLoggedOn or IsPowerUserLoggedOn);
end;

function DefRegRoot(Param: String): String;
begin
  if IsRegularUser then
    Result := HKCU
  else
    Result := HKLM;
end; 
```

但是编译器在第一个注册表行返回一个错误：

```
Parameter "Root" is not a valid value. 
```

对此有何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:18:59.940

我认为不可能将函数用作[`Root`](http://jrsoftware.org/ishelp/topic_registrysection.htm#Root)参数值获取器。我会通过使用[`Check`](http://jrsoftware.org/ishelp/topic_scriptcheck.htm#Check)这样的条件来解决这种情况：

```
[Registry]
Root: HKCU; Subkey: "Software\MyCompany\MySW\Settings"; ValueType: string; ValueName: "InstallPath"; ValueData: "{app}"; Check: IsRegularUser 
Root: HKLM; Subkey: "Software\MyCompany\MySW\Settings"; ValueType: string; ValueName: "InstallPath"; ValueData: "{app}"; Check: not IsRegularUser

[Code]
function IsRegularUser: Boolean;
begin
  Result := not (IsAdminLoggedOn or IsPowerUserLoggedOn);
end; 
```

# iis - 通过 appcmd.exe 为加载用户配置文件设置 IIS 配置

> ID：15415675
> 
> 赞同：16
> 
> 时间：2013-03-14T17:04:33.367
> 
> 标签：iis, powershell, appcmd

我正在尝试使用 appcmd.exe 通过 powershell 脚本将“加载用户配置文件”的配置设置设置为 true。在阅读了许多文档后，我无法弄清楚正确的语法。

应用程序池的名称类似于“accountsmanagement.example.com”我已经尝试了以下变体，但都出错了：

```
c:\Windows\system32\inetsrv\appcmd.exe set config -section:applicationPools /accountsmanagement.example.com.processModel.loadUserProfile:true 
```

如何通过 appcmd.exe 将加载用户配置文件正确设置为 true？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-02-18T10:02:01.103

如果您想纯粹使用`PowerShell`，可以使用以下`PowerShell`命令更改应用程序池的“加载用户配置文件”属性。

```
Import-Module WebAdministration

Set-ItemProperty "IIS:\AppPools\YourAppPoolName" -Name "processModel.loadUserProfile" -Value "False" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-18T20:56:49.697

用引号试试这个。

```
c:\windows\system32\inetsrv\appcmd.exe set config -section:applicationPools "/[name='accountsmanagement.example.com'].processModel.loadUserProfile:false" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-16T08:22:07.457

除了使用`appcmd.exe set config`，您还可以使用以下

```
appcmd.exe set apppool "App Pool name here" -processmodel.loaduserprofile:"true" 
```

要显示可以设置的所有值，请使用

```
appcmd.exe set apppool "App Pool name here" /? 
```

# python - 替代抓取 netstat 以获取远程 IP 地址列表？

> ID：15415678
> 
> 赞同：0
> 
> 时间：2013-03-14T17:04:46.760
> 
> 标签：python, monitoring, ipv6, pexpect, netstat

我目前正在抓取`netstat -n -A inet`Linux 和`netstat -n -f inet`Mac OSX 上的输出，以使用以下（Python 默认）正则表达式获取机器连接到的远程 IP 地址和端口的集合：

```
'(?:[0-9]+\.){3}[0-9]+[.:][0-9]+\s+((?:[0-9]+\.){3}[0-9]+)[.:]([0-9]+)' 
```

这给了我组 1 中的远程 IP 和组 2 中的远程端口。

但是，这似乎不可移植或可维护（并且仅限于 IPv4 地址）。

获取活动远程 IP 列表是否有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:58:50.867

嗯，总有 SNMP... 完整的 TCP 连接表位于`.1.3.6.1.2.1.6.19`（也称为 .iso.org.dod.internet.mgmt.mib-2.tcp.tcpConnectionTable），完整的 UDP 表位于 `.1.3.6.1.2.1.7.7`（也称为.iso.org.dod.internet.mgmt.mib-2.udp.udpEndpointTable）。

这是我本地 Linux 机器的示例：

```
$ snmpbulkwalk -v2c -c xxxx -m ALL 83.137.17.100 .iso.org.dod.internet.mgmt.mib-2.tcp.tcpConnectionTable
TCP-MIB::tcpConnectionState.ipv4."83.137.17.100".44463.ipv4."91.189.89.90".80 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv4."83.137.17.100".44470.ipv4."91.189.89.90".80 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51612 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51622 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51623 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51624 = INTEGER: finWait2(7)
TCP-MIB::tcpConnectionState.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:f7:0a:da".59728 = INTEGER: timeWait(11)
TCP-MIB::tcpConnectionState.ipv6."20:01:40:38:00:00:00:16:00:00:00:00:00:00:00:16".22.ipv6."2a:00:86:40:00:01:00:00:54:f4:06:96:6c:48:aa:a9".49644 = INTEGER: established(5)
TCP-MIB::tcpConnectionProcess.ipv4."83.137.17.100".44463.ipv4."91.189.89.90".80 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv4."83.137.17.100".44470.ipv4."91.189.89.90".80 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51612 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51622 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51623 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:55:f2:7b".51624 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:89:11:64".80.ipv6."00:00:00:00:00:00:00:00:00:00:ff:ff:53:f7:0a:da".59728 = Gauge32: 0
TCP-MIB::tcpConnectionProcess.ipv6."20:01:40:38:00:00:00:16:00:00:00:00:00:00:00:16".22.ipv6."2a:00:86:40:00:01:00:00:54:f4:06:96:6c:48:aa:a9".49644 = Gauge32: 0 
```

Net-SNMP 工具使输出更具可读性。以数字形式，第一行输出为：

```
1.3.6.1.2.1.6.19.1.7.1.4.83.137.17.100.44463.1.4.91.189.89.90.80 = INTEGER: 11 
```

或者在完全展开的文本中：

```
.iso.org.dod.internet.mgmt.mib-2.tcp.tcpConnectionTable.tcpConnectionEntry.tcpConnectionState.ipv4."83.137.17.100".44463.ipv4."91.189.89.90".80 
```

我不确定这是否比你现在做的更容易，但这*是*一种标准化的方式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:10:10.207

如果您不害怕 C 和 U*X 内部结构，您可以对 netstat 进行逆向工程。

看看这里[https://unix.stackexchange.com/questions/21503/source-code-of-netstat](https://unix.stackexchange.com/questions/21503/source-code-of-netstat)

# ruby-on-rails - Ruby on Rails 覆盖更改哈希中的值

> ID：15415685
> 
> 赞同：0
> 
> 时间：2013-03-14T17:05:09.387
> 
> 标签：ruby-on-rails, ruby

我正在尝试添加一个 before_validation 钩子来清理多余的空白。作为其中的一部分，我还想将任何空白字符串值设置回零。这样做的原因是为了防止用户在必填字段中输入空格以试图绕过它。

以下是我尝试执行此操作的方法。更改[x][1].strip！行按我的预期工作，并给我一个空白行。但令我惊讶的是，当我尝试设置 changes[x][1] = nil 时，changes[x][1] 的值保持不变。通过一些调试测试，我发现不仅失败了，而且任何将 changes[x][1] 设置为 ANY 值的尝试都无法真正更新数组！

我很想听听我在这里做错了什么，以及如何解决它。非常感谢！

```
def strip_whitespace
  changes.keys.each do |x|
    if changes[x][1].respond_to?(:strip!)
      changes[x][1] = nil if changes[x][1].blank?
      changes[x][1].strip!
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:14:39.013

您不需要进行所有这些检查，`.blank?`当对象时该方法返回 true：

*   是`nil`
*   是一个空字符串
*   是一个只有空格字符的字符串。

`:presence`验证使用该方法`blank?`，因此您可以使用该方法来防止在模型的属性中引入空字符串。

**编辑：**

我尝试复制创建`changes`哈希的上下文，它工作得很好：

```
changes = {one: ['q', 'w', 'e'], two: ['a', '', 'd']}

changes.keys.each do |x|
  changes[x][1] = nil if changes[x][1].blank?
end
# => [:one, :two]

changes
# => {:one => ["q", "w", "e"], :two => ["a", nil, "d"]} 
```

# java - Spring Bean 自定义范围 JMS

> ID：15415688
> 
> 赞同：5
> 
> 时间：2013-03-14T17:05:10.853
> 
> 标签：java, spring, scope, spring-jms

我正在使用 Spring Framework使用**DefaultMessageListenerContainer****同时**使用 JMS 队列中的消息。我希望能够为传入的每条消息创建自动装配的 bean 的新实例。我认为设置 scope="prototype" 会起作用，但它似乎不起作用。有人知道**会为每个 JMS 消息创建新实例的自定义 bean 范围**吗？很像 HTTP 请求的“请求”范围？

 ****我意识到我可以制作 com.sample.TestListener "BeanFactoryAware" 然后在我的 onMessage 中执行 getBean("foo") 但我想避免将 Spring 依赖项放入我的代码中。

提前感谢您的帮助！

下面的示例，我想要一个“com.sample.Foo”的新实例，并且每次收到消息时都将所有 bean 注入其中。

```
<bean id="consumer"
    class="com.sample.TestListener">
    <constructor-arg ref="foo" />
</bean> 

<!--Configures the Spring Message Listen Container. Points to the Connection 
    Factory, Destination, and Consumer -->
<bean id="MessageListenerContainer"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="CachedConnectionFactory" />
    <property name="destination" ref="Topic" />
    <property name="messageListener" ref="consumer" />
    <property name="concurrency" value="10"/> 
</bean> 

<bean id="foo" class="com.sample.Foo">
    <property name="x" ref="xx" />
    <property name="y" ref="yy" /> 
    <property name="z" ref="zz" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:08:21.730

编写自定义范围来执行此操作非常容易......

```
public class CustomScope implements Scope, BeanFactoryPostProcessor {

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
        String name = "myScope";

        beanFactory.registerScope(name, this);

        Assert.state(beanFactory instanceof BeanDefinitionRegistry,
                "BeanFactory was not a BeanDefinitionRegistry, so CustomScope cannot be used.");
        BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;

        for (String beanName : beanFactory.getBeanDefinitionNames()) {
            BeanDefinition definition = beanFactory.getBeanDefinition(beanName);
            if (name.equals(definition.getScope())) {
                BeanDefinitionHolder proxyHolder = ScopedProxyUtils.createScopedProxy(new BeanDefinitionHolder(definition, beanName), registry, false);
                registry.registerBeanDefinition(beanName, proxyHolder.getBeanDefinition());
            }
        }
    }

    @Override
    public Object get(String name, ObjectFactory<?> objectFactory) {
        return objectFactory.getObject(); // a new one every time
    }

    @Override
    public String getConversationId() {
        return null;
    }

    @Override
    public void registerDestructionCallback(String name, Runnable callback) {

    }

    @Override
    public Object remove(String name) {
        return null;
    }

    @Override
    public Object resolveContextualObject(String arg0) {
        return null;
    }

}

public class Foo implements MessageListener {

    private Bar bar;

    public void setBar(Bar bar) {
        this.bar = bar;
    }

    @Override
    public void onMessage(Message message) {
        System.out.println(bar.getId());
    }

}
@ContextConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
public class FooTests {

    @Autowired
    private Foo foo;

    @Test
    public void test() {
        Message message = mock(Message.class);
        foo.onMessage(message);
        foo.onMessage(message);
    }

} 
```

和一个示例上下文...

```
<bean class="foo.CustomScope" />

<bean id="baz" class="foo.BazImpl" scope="myScope" />

<bean id="bar" class="foo.BarImpl" scope="myScope">
    <property name="baz" ref="baz" />
</bean>

<bean id="foo" class="foo.Foo">
    <property name="bar" ref="bar" />
</bean> 
```

**注意：**使用这个简单的范围，您还必须将所有引用的 bean 放在范围内（上面的 bar**和**baz）。您可以使所有引用的 bean 都继承范围，但这需要一些工作。也就是说 - 在 spring-batch 的 StepScope 中有一个如何做到这一点的例子。

**注意#2**这将为每个方法调用获取一个新实例。如果调用多个方法，每次调用都会获得一个新 bean。如果您想将其范围限定为允许 onMessage 中的所有调用使用相同的实例，则需要添加更多技巧。

**编辑：** 这里有一些更新支持对 onMessage() 中的一个实例的多次调用...

```
private final ThreadLocal<Map<String, Object>> holder = new ThreadLocal<Map<String, Object>>();

...

@Override
public Object get(String name, ObjectFactory<?> objectFactory) {
    Map<String, Object> cache = this.holder.get();
    if (cache == null) {
        cache = new HashMap<String, Object>();
        this.holder.set(cache);
    }
    Object object = cache.get(name);
    if (object == null) {
        object = objectFactory.getObject();
        cache.put(name, object);
    }
    return object;
}

public void clearCache() {
    this.holder.remove();
} 
```

现在，您**确实**必须清除缓存...

```
@Override
public void onMessage(Message message) {
    try {
        System.out.println(bar.getId());
        System.out.println(bar.getId());
    }
    finally {
        this.scope.clearCache();
    }
} 
```

但即使这样也可以在 AOP @After 建议中完成，以保持听众完全干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T02:54:36.323

使用 Spring 附带的 SimpleThreadScope 实现

[http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/context/support/SimpleThreadScope.html](http://docs.spring.io/spring/docs/3.0.x/api/org/springframework/context/support/SimpleThreadScope.html)****

# php - PDO 代码和 PHP 未定义错误

> ID：15415694
> 
> 赞同：4
> 
> 时间：2013-03-14T17:05:36.457
> 
> 标签：php, mysql, pdo

我有这段代码可以连接到数据库

```
class dbConn{
public $dbname='database';
private $dbhost='localhost';
private $dbusername='username';
private $dbpassword='password';

protected static $db;
private function __construct() {

try {

self::$db = new PDO('mysql:host='.$dbhost.';dbname='.$dbname, $dbusername, $dbpassword );
self::$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch (PDOException $e) {

echo "Connection Error: " . $e->getMessage();
}

}

public static function getConnection() {

if (!self::$db) {

new dbConn();
}

return self::$db;
}

}

class Mysql{

    function showTables(){
                $db = dbConn::getConnection();

                $query=$db->query("show tables");

                $fetchArray = $query->fetchAll(PDO::FETCH_ASSOC);
                foreach($fetchArray as $index=>$val) {
                            echo $val;
                          }
    }
}

$obj=new Mysql;
$obj->showTables(); 
```

我面临的问题是，如果我直接在 pdo 语句中使用数据库登录详细信息，如下所示：

```
self::$db = new PDO( 'mysql:host=localhost;dbname=databasename', 'root', 'pass'); 
```

我没有任何问题。但是如果我像上面所说的那样使用变量并将值存储到其中。

```
Notice: Undefined variable: dbhost 

Notice: Undefined variable: dbname 

Notice: Undefined variable: dbusername 

Notice: Undefined variable: dbpassword 
```

出现以下错误，并且在其他类中也无法连接到数据库。

谁能告诉我这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:08:09.523

`$this`访问类属性时需要使用-`$this`是当前对象。

例子：

```
try {
  self::$db = new PDO('mysql:host='.$this->dbhost.';dbname='.$this->dbname, $this->dbusername, $this->dbpassword );
  self::$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch (PDOException $e) {
  echo "Connection Error: " . $e->getMessage();
} 
```

当您调用时，`$dbhost`您正在寻找当前范围内的变量，在这种情况下是构造函数。`$dbhost`在这种情况下`$this->dbhost`是两个不同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:08:43.077

尝试更改为

```
self::$db = new PDO('mysql:host='.$this->dbhost.';dbname='.$this->dbname, $dbusername, $this->dbpassword ); 
```

# rest - 将 ID 发布到 REST API

> ID：15415700
> 
> 赞同：2
> 
> 时间：2013-03-14T17:05:43.983
> 
> 标签：rest

我正在设计一个用于将记录插入“解决方案”表的 REST API。一个“解决方案”有一个solverID，problemID。我有两种不同的设计：

```
POST /solutions 
```

并在 JSON 中将solverID 和problemID 与解决方案的内容一起传递。或者将solverID和problemID放在URI中：

```
POST /users/:solver_id/problems/:problem_id/solutions 
```

哪个设计更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:42:08.507

和第一个一起去。我会尽可能保持您的网址简洁明了。这里有一些其他的例子。不确定你的整个结构。

```
POST /solutions

GET /solutions?solverid=123  //query solutions by user

GET /users/555/problems      // problems for a given user
GET /users/555/solutions     // solutions for a given user

GET /problems/987/solutions  // solutions for a given problem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:17:43.363

在一致的层次结构中定义资源是一种很好的做法，以便它们易于理解和预测。

假设这是检索问题的 URL -

```
GET     /users/{solverId}/problems/{problemId} 
```

它清楚地表明问题属于 {solverId}。

以下 URL 将清楚地表明我们正在检索 {solverId} 解决的问题的所有解决方案

```
GET     /users/{solverId}/problems/{problemId}/solutions 
```

要为 {problemId} 创建一个新的解决方案，您可以在

```
POST     /users/{solverId}/problems/{problemId}/solutions 
```

要检索特定的解决方案，您将继续

```
GET     /users/{solverId}/problems/{problemId}/solutions/{solutionId} 
```

何时在路径与查询中使用 ID？

如果肯定需要 ID 来标识资源，请在路径中使用它。在上述场景中，由于需要所有三个 Id 来唯一标识一个解决方案，所以它们都应该在路径中。

假设您要检索在特定日期范围内给出的解决方案，您将使用以下内容

```
GET     /users/{solverId}/problems/{problemId}/solutions?startDate={}&endDate={} 
```

这里 startDate 和 endDate 不能唯一标识资源，它们只是用于过滤结果的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:51:03.193

我想出了一个方案：只有在路由不需要认证的情况下才在路由中包含用户ID，否则可以从认证信息中找出用户ID，上面的路由就变成了：

```
POST /problems/:problem_id/solutions 
```

# facebook - Facebook 应用程序：fb.api 方法会发布在朋友的墙上吗？

> ID：15415701
> 
> 赞同：1
> 
> 时间：2013-03-14T17:05:52.257
> 
> 标签：facebook, facebook-graph-api

我已经尝试过 FB.API 方法在朋友墙上发帖。它不适合我。我冲浪了很多。他们中的一些人告诉它已被弃用。Facebook 是否有关于此问题的任何官方信息？请帮我知道。谢谢。

供你参考，

```
function postOnMyFriendWall() {
            var body = 'Reading Connect JS documentation';
            FB.api('/friendid/feed', 'post', { message: body }, function(response) {
              if (!response || response.error) {
                alert('Error occured');
              } else {
                alert('Post ID: ' + response.id);
              }
            });
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T06:37:18.177

自 2013 年 2 月 6 日起，您无法通过`FB.API`方法发布到好友时间线。
在这里阅读：[https ://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

寻找**feed Dialog**或**Open Graph Actions**作为替代方案。
提要对话框示例：

```
function postToFriend() {

    // calling the API ...
    var obj = {
      method: 'feed',
      to: 'friend_id',
      link: 'http://www.facebook.com/thepcwizardblog',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Feed Dialog',
      caption: 'Tagging Friends',
      description: 'Using Dialogs for posting to friends timeline.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  } 
```

Facebook 对话框的完整文档：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T07:18:28.140

如果您使用的是 iOS，您可以使用本机 FBWebDialogs 执行类似的操作，例如：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                              @"Some stand out message", @"name",
                              @"Some very short description of ?", @"description",
                              @"http://example.com/", @"link",
                              @"http://example.com/img/pic.png/", @"picture",
                              @"12345_friendID", @"to",
                              nil];;
[FBWebDialogs presentFeedDialogModallyWithSession:nil 
                                       parameters:params
                                       handler:^
    (FBWebDialogResult result, NSURL *resultURL, NSError *error) {

        if (error) { 
            NSLog(@"Error publishing story :%@", error);
        } else {
            if (result == FBWebDialogResultDialogNotCompleted) {
                NSLog(@"User cancelled publishing");
            } else {
                NSDictionary *urlParams = [self parseURLParams: [resultURL query]];             
                if (![urlParams valueForKey@"post_id"]) {
                    NSLog(@"User cancelled publishing");
                } else {
                   NSLog(@"You published a story with id:%@", [urlParams valueForKey@"post_id"]);
                }
            }
        }
}];  

- (NSDictionary*)parseURLParams:(NSString *)query {
    NSArray *pairs = [query componentsSeparatedByString:@"&"];
    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    for (NSString *pair in pairs) {
        NSArray *kv = [pair componentsSeparatedByString:@"="];
        NSString *val =
        [[kv objectAtIndex:1]
        stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        [params setObject:val forKey:[kv objectAtIndex:0]];
    }
    return params;
} 
```

# android - 如何强制菜单位于 Android Actionbar 4.x 上的 3 个虚线按钮内？

> ID：15415702
> 
> 赞同：1
> 
> 时间：2013-03-14T17:05:52.957
> 
> 标签：android, android-actionbar

我知道我可以通过这种方式将菜单放在 Android Actionbar 上的 3 个虚线按钮内：

```
android:showAsAction="never" 
```

但是，当我在 Android 4.x 中运行它时，没有显示 3 点按钮。[然后我在这篇文章](https://stackoverflow.com/questions/8758263/how-to-force-overflow-menu-on-android-actionbar-compat)中阅读了答案：

> 操作溢出菜单仅在设备上没有可用的硬菜单按钮时可用。

他建议使用`ActionBarSherlock`和使用它的`ForceOverFlow`主题，但后来有一个问题需要删除这个主题。

是否有任何其他可能的解决方案可以强制菜单位于带有物理菜单按钮的 Android 4.x 上的 3 个虚线按钮内？

# angularjs - AngularJs - 访问 ng-repeat 中的 DOM 元素

> ID：15415705
> 
> 赞同：11
> 
> 时间：2013-03-14T17:06:07.840
> 
> 标签：angularjs, element, angularjs-ng-repeat

我有下一个模板：

```
<div ng-repeat="friend in friends | filter:filterFriendsHandler">
   {{friend.name}}
</div> 
```

在我的控制器中，我有：

```
$scope.filterFriendsHandler = function(friend){
    //HERE I WANT TO ACCESS TO FRIEND DOM ELEMENT; to do something like this: 
    //$(friendElement).text('foo');
} 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-07-13T18:37:27.557

我将在这里回答具体问题，是的，我知道这不是“角度”的做事方式。如果您想以“正确”的方式做事，请不要这样做，请使用指令。除了免责声明，这里是如何做到的：

基本上，您要做的是根据 $index 或 ng-repeat 对象中的唯一值为 DOM 元素提供一个 ID。在这里，我将只使用 $index。

```
<div ng-repeat="friend in friends" id="friend_{{$index}}" ng-bind-html="doSomethingBadToTheDom('friend_' + $index)">
   {{friend.title}}
</div> 
```

然后，在您的控制器中，只需在 DOM 中查询具有该 ID 的元素：

```
$scope.doSomethingBadToTheDom = function(ele_id) {
    var element = document.getElementById(ele_id);
    element.innerHTML = "I'm abusing angular";
} 
```

我们在这里使用 ng-bind-html 是因为当你的控制器函数执行时 DOM 元素将存在，在类似 ng-init 的情况下，它不会存在。

同样，这与 angular 所代表的一切背道而驰，因此，如果您尝试遵循 angular 最佳实践，请不要这样做。

我遇到过这种技术很有用的情况，尤其是在处理非角度库时，或者那些“角度方式”比它的价值更麻烦的时候。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-14T17:12:48.963

您需要为此使用[指令](http://docs.angularjs.org/guide/directive)

```
<div ng-app="test-app" ng-controller="MyController">
    <div ng-repeat="friend in friends" nop>
       {{friend.title}}
    </div>
</div> 
```

JS

```
app.directive('nop', function(){
    return {
        link: function(scope, elm){
            console.log('eee', elm, arguments);
            elm.css('color', 'red');
        }
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/NL6hE/1/)

# function - Verilog 中不寻常的函数声明

> ID：15415707
> 
> 赞同：0
> 
> 时间：2013-03-14T17:06:11.037
> 
> 标签：function, verilog

为了试图理解，我在互联网上查找了一些代码，并找到了以下我认为是函数的声明，而我根本不明白。

```
sext #(.inwidth(1), .outwidth(32))  scc_sext_i0(
                  .i0(paw_0_i0_outport0[32]),
                  .o0(scc_sext_i0_o0));

combine2_wn #(.inwidth0(32), .inwidth1(32))  scc_combine2_wn_i0(
                  .i0(paw_0_i0_outport0[31 : 0]),
                  .i1(scc_sext_i0_o0),
                  .o0(scc_combine2_wn_i0_o0));

combine2_wn #(.inwidth0(32), .inwidth1(32))  scc_combine2_wn_i1(
                  .i0(scc_combine2_wn_i2_o0[31 : 0]),
                  .i1(scc_combine2_wn_i2_o0[63 : 32]),
                  .o0(scc_combine2_wn_i1_o0)); 
```

我的问题如下：

1.  这些真的是功能映射吗？
2.  如果是，则它们未在任何其他较低级别的 .v 文件中定义（并且顶级文件中也不包含任何库）。那么它们有什么用呢？
3.  `#`符号是什么意思？
4.  是什么`.inwidth(32)`意思？32位输入？（在网上找不到……）
5.  如果是，这些`combine2_wn`块应该只有 2 个输入，为什么每次都映射一个输出？

更一般地说，这些是任何类型的连接函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:12:31.207

这些很可能是模块实例化，而不是函数调用。

您应该在 Verilog 搜索路径的某个位置的文件中声明一个名为的模块`sext`和另一个名为的模块。`combine2_wn`

`#()``parameter`表示您正在为命名模块内的 s赋值。

`inwidth`模块中有一个参数命名`sext`。您正在为其分配值 1。

网上有很多参考资料。查看verilog wiki 站点。

# python - 更新 json 文件

> ID：15415709
> 
> 赞同：5
> 
> 时间：2013-03-14T17:06:13.553
> 
> 标签：python, json

我有一些数据的 json 文件，并且想偶尔更新这个文件。

我读了文件：

```
with open('index.json', 'rb') as f:
    idx = json.load(f) 
```

然后从潜在的新数据中检查是否存在密钥，如果密钥不存在，则更新文件：

```
with open('index.json', mode='a+') as f:
    json.dump(new_data, f, indent=4) 
```

但是，此过程仅创建新的 json 对象（python dict）并将其作为新对象附加到输出 json 文件中，从而使该文件不是有效的 json 文件。

是否有任何简单的方法可以通过更新初始字典将新数据附加到 json 文件而不覆盖整个文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T17:44:21.877

一种方法是在文件中每行写入一个 JSON 对象。我正在使用这种方法，并且效果很好。

一个很好的好处是您可以更有效地读取文件（内存方面），因为您一次可以读取一行。如果你需要所有这些，在 Python 中组装一个列表没有问题，但如果你不需要，你的操作速度会更快，你也可以追加。

因此，要最初编写所有对象，您需要执行以下操作：

```
with open(json_file_path, "w") as json_file:
    for data in data_iterable:
        json_file.write("{}\n".format(json.dumps(data))) 
```

然后高效读取（无论文件大小如何，都会消耗很少的内存）：

```
with open(json_file_path, "r") as json_file:
    for line in json_file:
        data = json.loads(line)
        process_data(data) 
```

要更新/附加：

```
with open(json_file_path, "a") as json_file:
    json_file.write("{}\n".format(json.dumps(new_data))) 
```

希望这可以帮助 ：）

# vb.net - 当文档完全加载时，如何让 webbrowser 只执行一项操作？

> ID：15415710
> 
> 赞同：0
> 
> 时间：2013-03-14T17:06:17.563
> 
> 标签：vb.net, vba, browser

就像标题说的：D 当文档完全加载时，我如何让 webbrowser 只执行一个操作？

我想用我做了多少刷新/访问过的网站制作一个标签..如果我把 label1.text = label1.text + 1 放在 webbroser 文档中完成它会给我很多...

（ 对不起，我的英语不好 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:16:56.513

在 VBA 中，我会这样做：

```
Dim ieApp As Object

Dim myURL As String
myURL = "http://www.stackoverflow.com"

Set ieApp = CreateObject("InternetExplorer.Application")

ieApp.Navigate myURL
ieApp.Visible = True

Do
    DoEvents
Loop Until ieApp.ReadyState = 4   'which equals to READYSTATE_COMPLETE

MsgBox "Loading completed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:01:33.590

WebBrowser 甚至为它加载的每个资源（图像、css、js、html 等）都提供了一个 DocumentCompleted。因此，您需要**检查事件参数**并查看已完成的 url 是否是您要计算的那个。

# z3 - 包含 Z3 中的两套

> ID：15415714
> 
> 赞同：0
> 
> 时间：2013-03-14T17:06:31.693
> 
> 标签：z3

如果我想检查一个集合是否有另一个集合的元素也是可能的？

例如（包含 Set1 Set2）：

```
contains [1,2] [3,5] -> is false
contains [1] [2,3, 1] -> is true 
```

集合是有限的。集合的最大值为 5，最小值为 0，集合的值不得大于 5，也不得小于 0。

例如：

```
[1,5,3] -> valid set
[1,8,2] -> invalid set 
```

如果它只是一个集合，检查集合中是否存在一个值很容易。它是通过以下方式：

```
( declare-sort Set 0 )

( declare-fun contains (Set Int) bool )

( declare-const set Set )

( declare-const A Int )

( assert ( contains set A ))
( assert ( not (contains set 0 )))
( check-sat ) 
```

但是对于两组，我看不到它是如何完成的。

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:39:12.213

您在消息中描述的操作`(contains S1 S2)`是子集关系。如果我们将整数集编码为从 Int 到 Boolean 的函数（例如 in: [max value in set z3](https://stackoverflow.com/questions/15398403/max-value-in-set-z3)），那么`S1`和`S2`被声明为：

```
(declare-fun S1 (Int) Bool)
(declare-fun S2 (Int) Bool) 
```

然后，我们可以说这`S1`是`S2`通过断言

```
(assert (forall ((x Int)) (=> (S1 x) (S2 x)))) 
```

我们只是说 in 中的任何元素`S1`也是 的元素`S2`。

**编辑**

我们可以使用表达式`(exists ((x Int)) (and (S1 x) (S2 x)))`来检查集合是否`S1`有`S2`共同的元素

**结束编辑**

集合的最小元素可以像我们[在集合 z3 中的最大值中](https://stackoverflow.com/questions/15398403/max-value-in-set-z3)那样进行编码。例如，假设 的最小元素`S1`是`min_S1`。

```
; Now, let min_S1 be the min value in S1
(declare-const min_S1 Int)
; Then, we now that min_S1 is an element of S1, that is
(assert (S1 min_S1))
; All elements in S1 are bigger than or equal to min_S1
(assert (forall ((x Int)) (=> (S1 x) (not (<= x (- min_S1 1)))))) 
```

如果您正在编码的集合的最小值在“编码时”是已知的（并且很小）。我们可以使用另一种基于位向量的编码。在这种编码中，一个集合是一个位向量。如果集合只包含 0 到 5 之间的值，那么我们可以使用大小为 6 的位向量。想法是：如果位`i`为真，当且仅当`i`是集合的一个元素。

以下是主要操作的示例：

```
(declare-const S1 (_ BitVec 6))
(declare-const S2 (_ BitVec 6))
(declare-const S3 (_ BitVec 6))

; set equality is just bit-vector equality
(assert (= S1 S2))

; set intersection, union, and complement are encoded using bit-wise operations

; S3 is  S1 union S2
(assert (= S3 (bvor S1 S2))) 

; S3 is S1 intersection of S2  
(assert (= S3 (bvand S1 S2)))

; S3 is the complement of S1   
(assert (= S3 (bvnot S1))) 

; S1 is a subset of S2 if  S1 = (S1 intersection S2), that is
(assert (= S1 (bvand S1 S2)))

; S1 is the empty set if it is the 0 bit-vector
(assert (= S1 #b000000))

; To build a set that contains only i we can use the left shift
; Here, we assume that i is also a bit-vector
(declare-const i (_ BitVec 6))
; S1 is the set that contains only i
; We are also assuming that i is a value in [0, 5]
(assert (= S1 (bvshl #b000001 i))) 
```

# asp.net - 远程服务器返回错误：(405) Method Not Allowed。C＃

> ID：15415715
> 
> 赞同：1
> 
> 时间：2013-03-14T17:06:34.910
> 
> 标签：asp.net

所以我在一个项目中工作，将数据从 C# 应用程序发送到 ASP Web 应用程序；问题是当我想发送数据时出现此错误：**远程服务器返回错误：（405）方法不允许。** 这是我的 C# 代码：

```
 static void Main(string[] args)
    {
        using (var wb = new WebClient())
        {
            var data = new NameValueCollection();
            string url = "http://localhost:4241/HtmlPage2.html";
            data["Text1"] = "Anas";
            data["Text2"] = "Anas";
            var response = wb.UploadValues(url, "POST", data);
        }
    } 
```

这里是我的 ASP 代码（*它只是一个用于测试的 HTML 页面，代码是在其中实现的`HtmlPage2.html`，当我提交按钮时它会将数据传递给`HtmlPage2.html`*）

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
</head>
<body>
    <form method="Post" action="HtmlPage2.html">
        <input id="Text1" type="text" name="Text1" />
        <input id="Text2" type="text" name="Text2" />
        <input id="Button1" type="submit" value="button" />
    </form>
</body>
</html> 
```

注意：我的 IIS 已经启用 :) 所以如果有人可以帮助我，我将非常感激 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:59:58.660

HTML 文件是基于文件系统的网络服务器上的静态文件，它无法处理 POST 请求，只能处理 GET（除非您使用的是 WebDAV，但这是另一回事）。

基本上`<form action="HtmlPage2.html">`片段是不正确的。如果它在您的网络浏览器中确实有效，则检查页面的 DOM 以查看`action`属性是否正在更改。

# javascript - 如何使用单选按钮计算高图的输出

> ID：15415716
> 
> 赞同：1
> 
> 时间：2013-03-14T17:06:37.747
> 
> 标签：javascript, highcharts

我想要做的是找到一种方法，以便在选中单选按钮时，分配给它的值可以用于图表的计算，并立即更新它（就像滑块一样）。我认为我在正确的道路上......这是一个 jsfiddle：http: [//jsfiddle.net/nlem33/ZhER3/](http://jsfiddle.net/nlem33/ZhER3/)

```
var selected = 1;
$(document).ready(function(event) {
    $("input[name=chooseProduct]").change(function(){
        selected = $(this).val();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:10:51.550

您的 change 函数可以直接调用 sliderHandler 函数，尽管以这种方式调用它需要稍作修改才能工作：

```
 $("input[name=chooseProduct]").change(function(){
        selected = $(this).val();
        sliderHandler();
    }); 
```

而sliderHandler需要这个：

```
 if (this.id === 'slider1') {
        $('#slider1_value').html(ui.value);
        units = ui.value;
    } else if (this.id === 'slider2') {
        $('#slider2_value').html('$' + ui.value);
        price = ui.value;
    } 
```

[http://jsfiddle.net/L5cY6/](http://jsfiddle.net/L5cY6/)

# jenkins - 将 Jenkins 升级到 1.505 后，Maven 插件失败

> ID：15415717
> 
> 赞同：1
> 
> 时间：2013-03-14T17:06:40.090
> 
> 标签：jenkins, maven-3, maven-plugin

我已将我的 Jenkins 服务器升级到 1.505，但意外地使用 Maven 插件构建无法正常工作，并且它在 Jenkins 日志中引发异常

```
Error injecting constructor, java.lang.NoClassDefFoundError: hudson/ivy/AntIvyBuildWrapper 
```

在谷歌搜索这个问题一个小时后，我发现 Maven 插件人员升级了他们的代码库，但它在“可选”依赖项上失败了，所以我添加了“可选插件”，但它仍然默默地失败，在 Jenkins 日志中没有任何异常。

控制台日志上出现的错误是`ERROR: Couldn't find Maven executable.`

任何提示？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:12:04.277

新的 maven 插件为我的 Jobs 添加了一个新选项（在 build 部分 -> Invoke Maven 3 下有一个名为 Maven version 的新字段）。

所以我们需要做的是打开每个作业配置页面并点击保存按钮以保存默认值，它会解决问题。

# android - Android：视频在预览期间被拉伸，但在录制期间不被拉伸（在某些设备上）

> ID：15415718
> 
> 赞同：3
> 
> 时间：2013-03-14T17:06:40.153
> 
> 标签：android, video, android-videoview

我创建了一个 Android 视频活动，但我终其一生都无法弄清楚为什么我的预览视频会水平拉伸。我已经对这些值进行了硬编码（仅出于调试目的），但仍然不正确。当我按下记录时它看起来不错，但在预览期间它又回到了拉伸状态。

如果我手动将纵横比设置为更小（取决于设备，但我没有看到任何逻辑相关性），它会起作用。例如，在 SIII 上，如果我将其设置为 1.5，它就像一个魅力。这对我来说没有意义。

另外，我注意到surfaceCreated 从未被调用过。我不知道这是否相关，但我认为值得注意。

我找到了很多类似的答案，但对我没有任何帮助。

更新：它在所有设备上都被拉伸，但仅在您在某些设备（摩托罗拉 Razr HD 和 Galaxy Tab 2）上按记录而不在其他设备（三星 Note 和三星 SIII）上按记录时才更正。

这是我的代码：

（仅供参考，当您点击记录时，它会在相机上出现 NPE 崩溃。它在我的应用程序中工作正常，但我必须删除一些代码才能将其发布到此处。）

```
public class Video extends Activity implements SurfaceHolder.Callback
{
    VideoView videoView;

    MediaRecorder recorder;
    Camera camera;
    SurfaceHolder holder;
    MediaPlayer player;
    private Handler handler;

    Size maxPreviewSize;

    private boolean finishing;

    private boolean firstRun;

    private boolean isRecording;

    private Object file;

    public static final int MEDIA_TYPE_VIDEO = 2;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        super.onCreate(savedInstanceState);

        getWindow().setFlags(
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.video_layout);

        releaseCameraAndPreview();

        videoView = (VideoView) findViewById(R.id.videoView);
    }

    //******************************** onPause() *************************************
    /**
     * Task: Releases the camera and nulls it out when the Activity is paused
     */
    @Override
    public void onPause() 
    {
        super.onPause();

        finishing = true;
        // Releases the Media Recorder object so that it can be used the next time the app
        // is launched.
        releaseMediaRecorder();

        // Releases the camera so that it can be used after the app is paused. Otherwise 
        // the camera will not be available to other apps or this app when resumed.
        releaseCamera();
    }

    // ***************************** onDestroy() ****************************************
    /**
     * task: called by the system when destroying this activity. stop all
     * threads, stop recording comair, explicity recycle all bitmap images from
     * each row, and remove all callbacks from each view, to free up the memory.
     * Request the garbage collector to run.
     */
    @Override
    protected void onDestroy()
    {
        finishing = true;
        super.onDestroy();

    }// end onDestroy()

    //************************** onWindowFocusChanged() ********************************
    /** Task: layout data cannot be accessed from onCreate, so use this method to load anything
     *        that has layout data. 
     */
    @Override
    public void onWindowFocusChanged(boolean hasFocus)
    {
        super.onWindowFocusChanged(hasFocus);

        LayoutParams params = (LayoutParams) videoView.getLayoutParams();
        params.width = 960;
        params.height = 540;
        videoView.setLayoutParams(params);

        if(finishing)
        {
            Log.d("Video", "oWFC, finishing is true");
            return;
        }
        firstRun = false;

        // Use mCurrentCamera to select the camera desired to safely restore
        // the fragment after the camera has been changed
        boolean opened = safeCameraOpen();       

        // Install a SurfaceHolder that will give information about the VideoView
        installHolder();

        createPreview();
    }//end onWindowFocusChanged()

    //******************************** installHolder() *************************************
    /**
     * Task: Install a SurfaceHolder. Callback so we get notified when the
     *       underlying surface is created and destroyed.
     */
    private void installHolder()
    {
        holder = videoView.getHolder();
        holder.setFixedSize(960, 540);
        holder.addCallback(this);
    }

    //*************************** surfaceCreated() ********************************
    /**
     * Task: Connects the camera to the Preview and starts the Preview in the VideoView
     * 
     * @param   SurfaceHolder   the holder that holds the callback for the camera so that we 
     *                          know when it is stopped and started
     */
    @Override
    public void surfaceCreated(SurfaceHolder holder)
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ surfaceCreated() ////////////////////////");
    }

    //*************************** createPreview() ********************************
    /**
     * Task: Creates the preview by setting the VideoView to display the images from the 
     *       camera.
     * 
     * @param   SurfaceHolder   the holder that holds the callback for the camera so that we 
     *                          know when it is stopped and started
     */
    private void createPreview()
    {
        try 
        {
            // STEP 2: Connect Preview - Prepare a live camera image preview by connecting a 
            // SurfaceView to the camera using Camera.setPreviewDisplay().
            camera.setPreviewDisplay(holder);
            Rect r = holder.getSurfaceFrame();
            Log.e("Video", "rectangle (holder): " + r.width() + "," + r.height());
            // STEP 3: Start Preview - Call Camera.startPreview() to begin displaying the  
            // live camera images.
            camera.startPreview();
        } 
        catch (IOException e) 
        {
            Log.d("Video", "Could not start the preview");
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ surfaceChanged() ////////////////////////");
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ surfaceDestroyed() ////////////////////////");
    //        camera.setPreviewCallback(null);
    //        camera.stopPreview();
    //        handler = null;
    }

    //*************************** safeCameraOpen() **********************************
    /**
     * Task: opens the first back-facing camera. Checks to see if the camera is open before 
     * attempting to open it
     * 
     * @return      Whether or not the camera was opened
     */    
    // TODO: choose the camera to open
    private boolean safeCameraOpen() 
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ safeCameraOpen() ////////////////////////");

        boolean opened = false;

        try 
        {
            releaseCameraAndPreview();
            camera = Camera.open();
            opened = (camera != null);

            Camera.Parameters param = camera.getParameters();
            Log.e("Video", "Camera.Parameters: " + param.flatten());

            List<Size> previewSize = param.getSupportedPreviewSizes();

            String str = "";

            maxPreviewSize = previewSize.get(0);

            for(Size s:previewSize)
            {
                if(s.width > maxPreviewSize.width && s.width > s.height)
                {
                    maxPreviewSize = s;
                }
                str += s.width + "x" + s.height+ "\t";

            }

            Log.e("Video", "previewSizes:\t" + str);
        } 
        catch (Exception e) 
        {
            Log.e(getString(R.string.app_name), "failed to open Camera");
            e.printStackTrace();
        }

        if(opened)
            Log.d("Video", "I haz camera!!!!!!!");
        else
            Log.d("Video", "I can haz camera??????? Noooooo!!!!");

        return opened;    
    }

    //********************* releaseCameraAndPreview() **************************
    /**
     * Task: releases the camera and the preview so that other apps can use the resources and to
     * avoid a memory leak
     * 
     */    
    private void releaseCameraAndPreview()
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ releaseCameraAndPreview() ////////////////////////");

        if (camera != null) 
        {
            // Call stopPreview() to stop updating the preview surface.
            camera.stopPreview();

            // Important: Call release() to release the camera for use by other applications. 
            // Applications should release the camera immediately in onPause() (and re-open() it in
            // onResume()).
            camera.release();
            camera = null;
        }
    }

    //*************************** getCameraInstance() ************************************
    /**
     * Task: A safe way to get the instance of a Camera object
     * 
     * @return  Returns the camera or null if a camera is unavailable
     */        
    public Camera getCameraInstance()
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ getCameraInstance() ////////////////////////");

        Camera c = null;

        try
        {
            c = Camera.open(); // attempt to get a Camera instance
        }
        catch (Exception e)
        {
            // Camera is not available (in use or does not exist)
        }

        return c; // returns null if camera is unavailable
    }

    private void releaseMediaRecorder()
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ releaseMediaRecorder() ////////////////////////");

        if (recorder != null)
        {
            recorder.reset(); // clear recorder configuration
            recorder.release(); // release the recorder object
            recorder = null;
            camera.lock(); // lock camera for later use
        }
    }

    private void releaseCamera()
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ releaseCamera() ////////////////////////");

        if (camera != null)
        {
            camera.release(); // release the camera for other applications
            camera = null;
        }
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////                    Set up MediaRecorder                       ////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////

    private void stopRecording()
    {
        // stop recording and release camera
        // recorder.stop(); // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object
        camera.lock(); // take camera access back from MediaRecorder
        camera.stopPreview();
        releaseCamera();

        boolean opened = safeCameraOpen();
        createPreview();

        // inform the user that recording has stopped
        isRecording = false;
    }

    private boolean prepareVideoRecorder()
    {
        Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ prepareVideoRecorder() ////////////////////////");

        recorder = new MediaRecorder();

        recorder.setOnInfoListener(new MediaRecorder.OnInfoListener() 
        {
            @Override
            public void onInfo(MediaRecorder recorder, int what, int extra) 
            {
                if (what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) 
                {
                    Log.e("VIDEOCAPTURE","Maximum Duration Reached"); 
                    stopRecording();
                }
            }
        });

        recorder.setOnErrorListener(new MediaRecorder.OnErrorListener() 
        {
            @Override
            public void onError(MediaRecorder recorder, int what, int extra) 
            {
                Log.e("Video", "onErrorListener\nwhat:" + what + "extra: " + extra);  
            }
        });

        // Step 1: Unlock and set camera to recorder
        camera.unlock();
        recorder.setCamera(camera);

        // Step 2: Set sources
        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set output format and encoding (for versions prior to API Level 8)

    //        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    //        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    //        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H263);
    //        recorder.setVideoSize(maxPreviewSize.width, maxPreviewSize.height);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)

        CamcorderProfile cp;
        Log.d("Video", "setProfile QUALITY_HIGH");
        cp = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
        Log.e("Video", "CamcorderProfile.QUALITY_HIGH: " + "cp.quality:" + cp.quality  
                + ", cp.videoFrameWidth:" + cp.videoFrameHeight
                + ", cp.videoFrameWidth:" + cp.videoFrameWidth);            
        recorder.setProfile(cp);

        recorder.setVideoSize(960, 540);

    //      recorder.setVideoSize(maxPreviewSize.width, maxPreviewSize.height);
    //        recorder.setVideoSize(cp.videoFrameWidth, cp.videoFrameHeight);
        recorder.setMaxDuration(60000);

        // Step 4: Set output file
//        file = getOutputMediaFile(MEDIA_TYPE_VIDEO);
//
//        if(file != null)
//        {
//            recorder.setOutputFile(file.toString());
//        }

        // Step 5: Set the preview output
        recorder.setPreviewDisplay(videoView.getHolder().getSurface());

        // Step 6: Prepare configured recorder
        try 
        {
            recorder.prepare();
        } 
        catch (IllegalStateException e) 
        {
            Log.d("Video", "IllegalStateException preparing recorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        } 
        catch (IOException e) 
        {
            Log.d("Video", "IOException preparing recorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        }

        return true;
    }

    private void releaseMediaPlayer()
    {
        player.stop();
        player.release();

        player = null;
    }

    public void onRecordClicked(View v)
    {      
        if (isRecording)
        {
            Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ onRecordClicked() - stop ////////////////////////");

            stopRecording();
        }
        else
        {
            Log.d("Video", "\\\\\\\\\\\\\\\\\\\\\\\\ onRecordClicked() - start ////////////////////////");

            // initialize video camera
            if (prepareVideoRecorder())
            {
                Log.d("Video", "prepareVideoRecorder - true");
                // Camera is available and unlocked, MediaRecorder is prepared,
                // now you can start recording
                recorder.start();

                // inform the user that recording has started
                isRecording = true;
            }
            else
            {
                // prepare didn't work, release the camera
                releaseMediaRecorder();
                releaseCamera();
            }
        }
    }
} 
```

这是我的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/wholeDarnThing"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    tools:context=".Video" >

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</RelativeLayout> 
```

# java - Java HashMap 文件输入版本的代码

> ID：15415722
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:06:48.993
> 
> 标签：java, hashmap, dijkstra

我这里有一段代码。这是我的 Dijkstra 实现的一个片段。在这里，我们实例化了 4 个顶点，每个顶点都有指定的边及其与顶点（节点）的距离。如果将数据直接输入到主类中，则此代码简单且有益。

```
Vertex v0 = new Vertex("Redvile");
Vertex v1 = new Vertex("Blueville");
Vertex v2 = new Vertex("Greenville");
Vertex v3 = new Vertex("Orangeville");
Vertex v4 = new Vertex("Purpleville");

v0.adjacencies = new Edge[]{ new Edge(v1, 5),
                             new Edge(v2, 10),
                                 new Edge(v3, 8) };
v1.adjacencies = new Edge[]{ new Edge(v0, 5),
                             new Edge(v2, 3),
                             new Edge(v4, 7) };
v2.adjacencies = new Edge[]{ new Edge(v0, 10),
                                 new Edge(v1, 3) };
v3.adjacencies = new Edge[]{ new Edge(v0, 8),
                             new Edge(v4, 2) };
v4.adjacencies = new Edge[]{ new Edge(v1, 7),
                                 new Edge(v3, 2) }; 
```

但是，我的数据来自文件。我必须读取文件并创建顶点的实例以及每个顶点上的边（邻接）。我在实现此功能时遇到问题。也就是说，我需要一个代码，将上面的这段代码转换为数据来自文件的东西。

这是我的示例数据：

```
a0 -    a1,1.6
a1 -    a0,1.6      * a2,0.85   * a3,0.5
a2 -    a1,0.85     * a34,1.2   * a39,0.65
a3 -    a1,0.5      * a4,0.2    * a5,0.1
a4 -    a3,0.2      * a5,0.2
a5 -    a4,0.1      * a6,1      * a36,0.65
a6 -    a5,1        * a7,1.5    * a14,0.45
a7 -    a6,1.5      * a8,0.18   * a11,1.2
a8 -    a7,0.18     * a9,1
a9 -    a8,1
a10 -   a13,1.9 
```

a0-a10 是顶点，*a1,1.6*是其他的表示以 (vertex,distance) 格式连接到顶点的邻接或边。

到目前为止，我能够读取这个文件并将每一行放在一个 ArrayList 上。我现在的问题基本上是如何实例化每个顶点并添加邻接关系。

这就是我读取文件的方式：

```
private void readFile(String fileName) {

    try{
        FileReader file = new FileReader(fileName);
        Scanner sc = new Scanner(file);

        int i = 0;
        while (sc.hasNextLine()) {
          input.add(sc.nextLine());
          i++;
        }

        setNodes();
        System.out.println();
        file.close();
    } catch(Exception e){
        System.out.println(e);
    }
} 
```

**输入**是每行包含文件所有内容的arrayList。另一方面，**节点**将拥有所有顶点的列表。

```
public void setNodes() {

    System.out.println();

    for(int i=0; i<input.size(); i++) {
        line = this.input.get(i);
        nodes.add(line.substring(0,line.indexOf("-")).trim());
    }
} 
```

还，

PS我也是数据类型的问题。我的 arrayList 是字符串，顶点是 Vertex 类型，这是我的代码中定义的类。

如果此描述不充分，请随时发表评论。谢谢你和欢呼！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:39:17.433

这应该是直截了当的

```
a0 -    a1,1.6
a1 -    a0,1.6      * a2,0.85   * a3,0.5 
```

我将向您展示过程而不是代码

```
Create vertex_list list 
For each line read
  split on '-' left side is your current_vertex, right side is your 'adjacency list'
   check if your vertex is present in vertex_list if not create it and add it
   adj list =  a0,1.6      * a2,0.85   * a3,0.5
   split your adj list   on '*' 
   for each entry ex 'a0,1.6'
      split on ','  now you know the edge_vertex=split[0] = a0 and weight = split[1] = 1.6
      check if you already have edge_vertex in your vertex list if not add it
      create and add edge(edge_vertex, weight)  to current vertex
    end
 end 
```

在您的过程结束时，您应该能够显示 vertex_list 中的所有顶点

至于为顶点命名，您可以通过几种不同的方式来执行此操作，简单的方法是在配置文件中为顶点命名。这将需要您对列表进行两次遍历，第一次生成每个具有名称的顶点，第二次就像上面的伪代码一样，除了不需要创建新顶点，因为它们是在第一次遍历中创建的，您只需添加边顶点到 adj。列表。

```
a0,Name A -    a1,1.6
a1,Name B -    a0,1.6      * a2,0.85   * a3,0.5
a2,Name C -    a1,0.85     * a34,1.2   * a39,0.65
a3,Name D -    a1,0.5      * a4,0.2    * a5,0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:11:22.853

我现在根据我的实现和@greg 提供的信息发布这个问题的答案。非常感谢他！

```
private void setVertices() {

    String[] listEdges;

    for(int i=0; i<nodes.size(); i++) {

        //if vertex does not exist, create it
        if(vertexList.containsKey(nodes.get(i))) {
            vertexList.put(nodes.get(i), new Vertex(nodes.get(i)));
        }

        line = adjLine.get(i);

        //separate adj edges to *
        if(line.contains("*")) {
            listEdges = line.split("[*]");
        } else {
            listEdges = new String[1];
            listEdges[0] = line;
        }

        //add edges to specified vertex
        for(int j=0; j < listEdges.length; j++ ) {
            String[] word = listEdges[j].split(",");
            edges.add(new Edge(vertexList.get(word[0]),Double.parseDouble(word[1])));
        }

        map.put(nodes.get(i), edges);
        edges.clear();
    }
} 
```

基本上，我使用 ArrayList、Map 和 HashMap 来做到这一点。是的！

# c# - 正则表达式用正斜杠隔开两年

> ID：15415732
> 
> 赞同：0
> 
> 时间：2013-03-14T17:07:15.400
> 
> 标签：c#, regex

我是学习正则表达式的新手，我正在努力解决这个基本问题。我想确保字符串的格式如下：2000/2001 或 2010/2011。

我尝试了类似：^[2000-2900]./.[2000-2900]$ 但我知道这是错误的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:11:42.120

这将是非常基本的：

```
^\d{4}\/\d{4}$ 
```

从字符串的开头，检查它是否有 4 位数字后跟一个“/”（用“\”转义）和另外 4 位数字到字符串的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:20:17.817

如果您搜索整个字符串必须匹配的位置，则：

```
^\d{4}/\d{4}$ 
```

如果您正在搜索较大字符串的子字符串，则：

```
\d{4}/\d{4} 
```

如果您在 C# 中使用，请记住将其包装在一个逐字字符串中，如下所示：

```
@"^\d{4}/\d{4}$"
@"\d{4}/\d{4}" 
```

我注意到其他人正在逃避正斜杠，但我认为没有必要，但如果你这样做也不会造成任何伤害。

# php - 如何使用循环使用复选框更新多条记录

> ID：15415733
> 
> 赞同：0
> 
> 时间：2013-03-14T17:07:18.027
> 
> 标签：php, mysql

我有一个更新表单，它使用循环来回显要更新的记录列表。它包括一个文本字段“句子”和一个复选框“可接受”。我的 foreach 努力没有奏效，并且正在吞噬数据列，所以是时候寻求帮助了。先生们，女士们，我该怎么写呢？

谢谢你的帮助。

```
<?php 
if( isset($_POST["Sentences_ID"]) ) {
    foreach($_POST['Sentences_ID'] as $key=>$value) {
        $updateSQL = sprintf("UPDATE Sentences SET Sentences=%s, Acceptable=%s WHERE   Sentences_ID=$value",
            GetSQLValueString($_POST['Sentences'], "text"),
            GetSQLValueString($_POST['Acceptable'], "text"),
            ($_POST['Sentences_ID']));

        mysql_select_db($database_name, $name);
        $Result1 = mysql_query($updateSQL, $name) or die(mysql_error());
    }
}
?>

<?php
do {
?>
Sentence:<input type="hidden" name="Sentences_ID[]" id="Sentences_ID[< ?php echo     $row_rsCounting['Sentences_Id'];?>]" value="<?php echo $row_rsCounting['Sentences_Id'];?>"   />

Acceptable:<input type="checkbox" name="Acceptable" id="Acceptable"     value="Acceptable"/></label> | 
<input type="text" name="Sentences" id="Sentences" value="< ?php echo     $row_rsCounting['Sentences'];?>" size="50" />
<?php
} while ($row_rsCounting = mysql_fetch_assoc($rsCounting));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:39:22.677

Acceptable 和 Sentences 输入也需要是数组，例如 name="Acceptable[]"。然后你可以像 $_POST['Acceptable'][$key] 在你的 PHP 循环中访问它们。但是，我认为不能保证多个输入数组的排序相同，因此我建议在输入名称中使用 Sentence ID。对所有输入执行此操作。

像这样的东西...

```
<?php 
if( isset($_POST["Sentences_ID"]) ) {
    foreach($_POST['Sentences_ID'] as $key=>$value) {
        $updateSQL = sprintf("UPDATE Sentences SET Sentences=%s, Acceptable=%s WHERE   Sentences_ID=$value",
            GetSQLValueString($_POST['Sentences'][$key], "text"),
            GetSQLValueString($_POST['Acceptable'][$key], "text"),
            ($value));

        mysql_select_db($database_name, $name);
        $Result1 = mysql_query($updateSQL, $name) or die(mysql_error());
    }
}
?>

<?php
do {
?>
Sentence:<input type="hidden" name="Sentences_ID[< ?php echo  $row_rsCounting['Sentences_Id'];?>]" id="Sentences_ID[< ?php echo     $row_rsCounting['Sentences_Id'];?>]" value="<?php echo $row_rsCounting['Sentences_Id'];?>"   />

Acceptable:<input type="checkbox" name="Acceptable[< ?php echo     $row_rsCounting['Sentences_Id'];?>]" id="Acceptable" value="Acceptable"/></label> | 
<input type="text" name="Sentences[< ?php echo $row_rsCounting['Sentences_Id'];?>]" id="Sentences" value="< ?php echo $row_rsCounting['Sentences'];?>" size="50" />
<?php
} while ($row_rsCounting = mysql_fetch_assoc($rsCounting));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:15:48.613

我的第一个建议是做一些调试。

前

```
foreach($_POST['Sentences_ID'] as $key=>$value) { 
```

放

```
print_r($_POST['Sentences_ID']);die; 
```

这应该让您对尝试迭代的变量的结构有所了解

# .net - 投射 ObservableCollection 的（未知）

> ID：15415734
> 
> 赞同：0
> 
> 时间：2013-03-14T17:07:19.373
> 
> 标签：.net, collections, casting, ienumerable

有一个集合对象。我需要捕获**此集合的每个对象**以使用该单个对象。

我已经确定了带有接口的传入对象：

```
TypeOf Src Is System.Collections.IList = TRUE 
TypeOf Src Is System.Collections.Generic.IEnumerable(Of Object) = TRUE 
```

实物是

```
System.Collections.ObjectModel.ObservableCollection(Of OwnSpecialClass) 
```

投射此传入对象时

```
NewCollection = CType(MySourceCollection, System.Collections.ObjectModel.Collection(Of Object)) 
```

它抛出异常（德语）：

> Das Objekt des Typs "System.Collections.ObjectModel.ObservableCollection `1[OwnSpecialClass]" kann nicht in Typ "System.Collections.ObjectModel.Collection`1[System.Object]" umgewandelt werden。

**如果 OwnSpecialClass 不可用且仅称为对象，如何将此集合转换为任何 ObservableCollection。**

我的测试：

![异常截图](../Images/bca0154bed6ecaab29fb7ddff19dc679.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:08:08.007

我不完全确定这是否是您所要求的，如果不是，我很抱歉，但这里是您如何从更具体的可观察集合更改为常规集合，反之亦然。这是一个有点昂贵的操作。

```
Dim observableCollection As New System.Collections.ObjectModel.ObservableCollection(Of String)()
Dim collection As New System.Collections.ObjectModel.Collection(Of Object)(observableCollection.Cast(Of Object)().ToList())

'or in reverse...'

Dim collection As New System.Collections.ObjectModel.Collection(Of Object)()
Dim observableCollection As New System.Collections.ObjectModel.ObservableCollection(Of String)(collection.Cast(Of String)()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:28:56.477

使用以下代码可以完成工作

```
 If TypeOf Src Is System.Collections.IList Then

     Dim IListTmp As System.Collections.IList = CType(Src, System.Collections.IList)
     Dim IListTmpItems(IListTmp.Count - 1) As Object
     IListTmp.CopyTo(IListTmpItems, 0)

     For Each O As Object In IListTmpItems
          'Whatever you want to do with that object now.... ex: result = result & O.ToString() & "|"
     Next
 End If 
```

但是转换器的性能并不高，因为每个项目都需要铸造。

# perl - 迭代一个简单的程序

> ID：15415735
> 
> 赞同：1
> 
> 时间：2013-03-14T17:07:25.447
> 
> 标签：perl, iteration

我有以下文件：

```
a b 5
c d 6
e f 7
g h 4
i j 3
k l 10 
```

我想在第三列中找到哪一行显示最小值并将其从初始文件中删除。在此之后，我想再次迭代程序并再次找到哪一行呈现最小值并将相同的东西再做 2 次。

输出文件应该是

```
c d 6
e f 7
k l 10 
```

我尝试编写以下代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use feature 'say';

my $file1 = "try.dat";
open my $fg,  "<", $file1 or die "Error during $file1 opening: $!";

my @vector;

while (<$fg>) {
    push @vector, [ split ];
}

my $minimum = $vector[0][2];
my @blacklist;
for my $i (0 .. $#vector) {
    if ($minimum > $vector[$i][2]){
    $minimum = $vector[$i][2];
    push @blacklist, @vector[$i+1]; 
    }
}
#say "my minimum is $minimum";
#say "the blacklist is composed by @blacklist"; 
```

我不知道如何擦除包含的元素`@blacklist`（在第一种情况下应该是`i j 3`）以及如何迭代所有内容。

对迭代有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:25:30.343

这种事情就是[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)为此而生的。它允许您通过修改绑定数组来就地修改文件。

这个程序做你想做的。辅助函数`minidx`返回传递数组中包含最小值的元素的第一个索引。

该程序通过将文件记录的第三个字段复制到数组`@field3`中，并在其中找到最小值的索引来工作。然后从文件中删除该索引处的元素并`@field3`使用`splice`.

```
use strict;
use warnings;

use Tie::File;

tie my @file, 'Tie::File', 'file.txt' or die $!;

my @field3 = map { (split)[2] } @file;
for (1 .. 3) {
  my $i = minidx(\@field3);
  splice @file, $i, 1;
  splice @field3, $i, 1;
}

sub minidx {
  my ($arr) = @_;
  my ($i, $v);
  for (0 .. $#$arr) {
    ($i, $v) = ($_, $arr->[$_]) unless defined $v and $arr->[$_] >= $v;
  }
  return $i;
} 
```

**输出**

```
c d 6
e f 7
k l 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:18:53.147

当您说要将`@blacklist = @vector`整个`@vector`数组添加到黑名单时。你可能想做一个`push @blacklist, $vector[$i]`. 这会将数组引用推入黑名单。

现在，黑名单中有一个数组 ref，因此您必须尊重它才能打印它。

```
say "the blacklist is composed by @{$blacklist[0]}"; 
```

编辑：用于迭代和编写：

我会跳过`@blacklist`数组（除非你需要它来做其他事情）并从`@vector`. 然后你可以写`@vector`一些文件。

```
my $num_elts_to_remove = 3;
for (my $j = 0; $j < $num_elts_to_remove; $j++) {
  my $minimum = $vector[0][2];
  my $min_idx = 0;
  for my $i (0 .. $#vector) {
      if ($minimum > $vector[$i][2]){
        $minimum = $vector[$i][2];
        $min_idx = $i;
      }
  }
  push @blacklist, $vector[$min_index];
  splice @vector, $min_idx, 1; #remove array with smallest value
} 
```

现在将数组写入文件

```
open OUT, ">", $outfile or die "Error: $!";
foreach(@vector) {
    print OUT join " ", @$_;
    print OUT "\n";
}
close(OUT); 
```

印刷：

```
c d 6
e f 7
k l 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:51:14.633

进一步采纳 Borodin's Tie::File 建议。我编写了一个名为[Tie::Array::CSV](http://metacpan.org/module/Tie%3a%3aArray%3a%3aCSV)的可爱模块，它允许您将分隔文件视为一个数组（并且因为它在下面使用 Tie::File，所以它既可以读取又可以写入）。因此，我可以使用诸如 map 和 sort（以及 Schwartzian 变换！）之类的 Perlish 操作来执行此任务：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Tie::Array::CSV;

tie my @data, 'Tie::Array::CSV', 'data', sep_char => ' ';

# get a list of row ids sorted by last value (inc)
my $i = 0;
my @sorted = 
  map  { $_->[0] } 
  sort { $a->[1] <=> $b->[1] }
  map  { [$i++, $_->[-1]] } 
  @data;

#splice the rows by index of the lowest three (from bottom to top)
splice @data, $_, 1 for reverse sort @sorted[0..2]; 
```

请注意，最后您希望从底部删除行，这样您就不必每次都重新索引。

# php - 使用 jQuery 和 Javascript 更改动态创建的 PHP 表中的输入

> ID：15415737
> 
> 赞同：0
> 
> 时间：2013-03-14T17:07:33.593
> 
> 标签：php, jquery, dynamic, html-table

我正在尝试使用 PHP 和 SQL 值构建一个表。其中一个表格列将有一个数字输入，用于控制该行中的其他值。此参数的范围从 0 到 1，我正在尝试使用 Javascript 根据参数值动态更新其右侧的三列。

这是 html 表的 PHP 命令：

```
$i = 1;
while($row = mysql_fetch_array($result)){
    Print "<tr>"; 
    Print "<td><input id='toChange[$i]' name='toChange[$i]' type='number' step='0.01'   
    min='0.01' max='0.99' value='.85' </td>";
    Print "<td>".$row['dependentOnParameter1'] . "</td>";
    Print "<td>".$row['dependentOnParameter2'] . "</td></tr>";
$i++; 
```

}

我已经为输入单元格尝试了许多不同的标签，例如`toChange[]`和`toChange$i`（这个好像数字随着行号增长）。该表打印正确，这是我尝试实现的 jQuery 函数：

```
$('#prEff[1]').change(function() {

    var test = this;
    return;
}); 
```

一旦我让这个函数正确调用，我就知道如何更改表，但是在数组中使用输入似乎会造成麻烦。是否有特定的 jQuery 对象或标签必须用于`.change`数组？或者如果我可以使用 table 标记，this 指针是否会指向已更改的表格部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:10:12.040

如果括号是选择器的一部分，您可能需要转义括号：

```
$('#prEff\\[1\\]') 
```

# javascript - 从 Web 服务器问题下载 Microsoft Word

> ID：15415738
> 
> 赞同：0
> 
> 时间：2013-03-14T17:07:37.110
> 
> 标签：javascript, debugging, download, ms-office

我正在尝试解决以下问题。客户端尝试下载 Word 文档并收到以下错误。

> 贵组织的政策阻止我们为您完成此操作。如需更多信息，请联系您的帮助台。

我相信这个问题是因为跨域javascript。但是，该文件是从一个弹出窗口下载的，该弹出窗口在屏幕上停留的时间不足以让我做任何事情。这是 IE8 / 9 的问题。

我找不到哪个 javascript 正在打开弹出窗口，更不用说哪个 javascript 正在从弹出窗口中运行。我正在使用提琴手来尝试查看 http 请求，但这没有帮助。

有没有办法让我调试该弹出窗口中发生的事情？有没有办法调试 javascript 在满足某种条件时中断？

编辑：我已经尝试在我的本地环境中解决这个问题，并且出现了同样的问题。弹出窗口似乎首先来自同一个域[https://company.aj.com](https://company.aj.com)，然后转到另一个域[https://apps.aj.com](https://apps.aj.com)并且正在从应用程序域下载文件。

# entity-framework-4 - NoSQL 与实体框架 5.0

> ID：15415739
> 
> 赞同：1
> 
> 时间：2013-03-14T17:07:40.583
> 
> 标签：entity-framework-4, nosql

我们可以使用像 MS Entity Framework 这样的 ORM 框架并连接到 NoSQL 数据库以利用 NoSQL 数据库提供的好处吗？如果是，是否有任何现有的 NoSQL 实现可以与实体框架一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T12:25:15.613

到目前为止，我遇到的唯一一个首先支持实体框架代码的 NoSQL 数据库是[BrightstarDB](http://brightstardb.com/)，它本质上是一个 RDF 三元组。它是相当新的，但看起来很有前途，并且具有[开源的额外好处。](https://github.com/BrightstarDB/BrightstarDB)

# email - Coldfusion 9 - respool 邮件

> ID：15415743
> 
> 赞同：2
> 
> 时间：2013-03-14T17:08:02.387
> 
> 标签：email, coldfusion, coldfusion-9, spool

我有一堆邮件要发送，但没有。我意识到我在 Coldfusion Administrator 中的邮件设置不正确，并且已经更正了它们。我用新邮件测试了新设置，它们可以工作。我现在正在尝试重新发送假脱机中的邮件，但它们会立即返回未送达的邮件假脱机中。我假设他们仍在使用旧的邮件设置。有没有办法强制他们使用新的当前设置发送出去？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:17:49.743

您需要编辑各个假脱机文件，因为它们很可能在文件本身中包含邮件服务器信息。如果您打开死信目录中的一些文件，您应该能够找到服务器信息并进行相应调整。

如果您可以对文件进行批量查找/替换，它应该可以轻松完成。

# ruby-on-rails - Rails - 生产中的 Mongoid，rake 命令错误：

> ID：15415745
> 
> 赞同：1
> 
> 时间：2013-03-14T17:08:17.220
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, rake

我的 mongoid.yml：

```
 production:
  sessions:
    default:
      database: kvallspressen_production
      hosts:
        - localhost:27017
      options:
    options:

development:
  # Configure available database sessions. (required)
  sessions:
    # Defines the default session. (required)
    default:
      # Defines the name of the default database that Mongoid can connect to.
      # (required).
      database: kvallspressen_development
      # Provides the hosts the default session can connect to. Must be an array
      # of host:port pairs. (required)
      hosts:
        - localhost:27017
      options:
        # Change whether the session persists in safe mode by default.
        # (default: false)
        # safe: false

        # Change the default consistency model to :eventual or :strong.
        # :eventual will send reads to secondaries, :strong sends everything
        # to master. (default: :eventual)
        # consistency: :eventual

        # How many times Moped should attempt to retry an operation after
        # failure. (default: 30)
        # max_retries: 30

        # The time in seconds that Moped should wait before retrying an
        # operation on failure. (default: 1)
        # retry_interval: 1
  # Configure Mongoid specific options. (optional)
  options:
    # Configuration for whether or not to allow access to fields that do
    # not have a field definition on the model. (default: true)
    # allow_dynamic_fields: true

    # Enable the identity map, needed for eager loading. (default: false)
    # identity_map_enabled: false

    # Includes the root model name in json serialization. (default: false)
    # include_root_in_json: false

    # Include the _type field in serializaion. (default: false)
    # include_type_for_serialization: false

    # Preload all models in development, needed when models use
    # inheritance. (default: false)
    # preload_models: false

    # Protect id and type from mass assignment. (default: true)
    # protect_sensitive_fields: true

    # Raise an error when performing a #find and the document is not found.
    # (default: true)
    # raise_not_found_error: true

    # Raise an error when defining a scope with the same name as an
    # existing method. (default: false)
    # scope_overwrite_exception: false

    # Skip the database version check, used when connecting to a db without
    # admin access. (default: false)
    # skip_version_check: false

    # User Active Support's time zone in conversions. (default: true)
    # use_activesupport_time_zone: true

    # Ensure all times are UTC in the app side. (default: false)
    # use_utc: false
test:
  sessions:
    default:
      database: kvallspressen_test
      hosts:
        - localhost:27017
      options:
        consistency: :strong
        # In the test environment we lower the retries and retry interval to
        # low amounts for fast failures.
        max_retries: 1
        retry_interval: 0 
```

当我跑`RAILS_ENV=production rake db:create`

我收到此错误：

```
** Invoke db:create (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
undefined method `has_key?' for nil:NilClass
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config/validators/session.rb:99:in `no_database_or_uri?'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config/validators/session.rb:45:in `validate_session_database'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config/validators/session.rb:25:in `block in validate'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config/validators/session.rb:24:in `each_pair'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config/validators/session.rb:24:in `validate'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config.rb:183:in `sessions='
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config.rb:213:in `load_configuration'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/config.rb:85:in `load!'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid.rb:146:in `load!'
/usr/local/lib/ruby/gems/2.0.0/gems/mongoid-3.0.23/lib/mongoid/railtie.rb:67:in `block in <class:Railtie>'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/kvallspressen/config/environment.rb:5:in `<top (required)>'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/application.rb:103:in `require'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/application.rb:103:in `require_environment!'
/usr/local/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:187:in `block in invoke_prerequisites'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:165:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/usr/local/lib/ruby/gems/2.0.0/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>'
Tasks: TOP => db:create => environment 
```

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem "less-rails", "~> 2.2.6"
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby
  gem "sass-rails", "~> 3.2.6"
  gem "twitter-bootstrap-rails", '2.1.4'
  gem 'bootstrap-sass', '~> 2.3.0.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem "mongoid", "~> 3.0.0" 
```

我在 Ubuntu 10.04.4 LTS 上，使用 rails 3.2.12，ruby 2.0.0p0（2013-02-24 修订版 39474）[i686-linux]

刚刚在我的本地环境中进行了测试。OSX 10.8.x 并出现相同的错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:39:55.323

我刚刚在[Mongoid 主页上](http://mongoid.org/en/mongoid/docs/rails.html)找到了这个：

> db:create: 仅出于依赖目的而存在，实际上并没有做任何事情。

因此，当 rake 尝试访问您的数据库时（为什么这样做，我不知道），它会抛出一个错误，因为它不存在。

相反，mongoid 提供了这个：

> db:seed：从 db/seeds.rb 为数据库播种
> 
> db:setup：创建索引并为数据库播种。

因此，您的基本数据库设置应在 db/seeds.rb 中定义，您可以使用

```
rake db:setup 
```

# java - 我自己在java中的异常-找不到符号

> ID：15415747
> 
> 赞同：3
> 
> 时间：2013-03-14T17:08:34.893
> 
> 标签：java, exception

我正在尝试创建自己的异常，但遇到了问题...

```
class MyException extends Exception {
    MyException (String w) { super ( w ); }
};

public class RozkladLiczby{

    private int[] Array;

    RozkladLiczby(int n) throws MyException { 

        try{
            Array = new int[n+2];
        }
        catch(OutOfMemoryException ex){
            throw new MyException ("Not enough memory" );
        }
    }
} 
```

编译器说它在 catch 中找不到符号。

```
RozkladLiczby.java:16: error: cannot find symbol
    catch(OutOfMemoryException ex){
          ^

 symbol:   class OutOfMemoryException
  location: class RozkladLiczby
1 error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:10:05.417

那是因为`OutOfMemoryException`在 Java 中没有；有[`OutOfMemoryError`](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html)。如果没有记忆，那你能做什么？没有内存可以创建新的异常。这就是为什么它是一个`Error`而不是一个`Exception`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:10:42.980

没有**OutOfMemoryException**但有[**OutOfMemoryError**](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:22:26.530

`OutOfMemoryException` :- 如果 OutOfMemoryException 是扩展 MyException 的异常，您的自定义异常将被抛出，因为您的自定义异常正在扩展 Exception 类，您的自定义异常不可能在您的 try { } catch() { } 块中被捕获

# linux - 记录器命令在 CentOS 中不起作用？

> ID：15415748
> 
> 赞同：1
> 
> 时间：2013-03-14T17:08:36.713
> 
> 标签：linux, bash, shell, logging

我正在尝试`logger`在我的脚本中使用，因为`initlog`它将被弃用，但它似乎在 CentOS 5.8 中不起作用，或者我在这里做错了什么。我用参数运行这个脚本`stop`并签入`/var/log/messages`，它在那里没有出现任何日志。我在 CentOS 6.4 中尝试过，它运行良好。

这是我的代码的一部分：

```
stop() {
  #----------------------------------------------------------------------
  # logging the stop
  #----------------------------------------------------------------------
  logger -i "Stopping $service" -t "$service" # it seems not be working

  #----------------------------------------------------------------------
  # getting the process PID
  #----------------------------------------------------------------------
  pid_process=`ps -ef | grep "program.jar" | grep -v grep |awk -F' ' '{ print $2 }'`;

  if [ $pid_process ]; then
    action $"Stopping $service: " su - program_deployer -c $shutdown
    RETVAL=$?
  else
    echo "#######################"
    echo "$service is not running"
    echo "#######################"
  fi

  #----------------------------------------------------------------------
  # now, delete the lock file
  #----------------------------------------------------------------------
  rm -f /var/lock/subsys/$service
  echo
} 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:42:12.747

对我来说，在 CentOS 5.8 上它的工作方式如上所述。我将所有`*.info`消息发送到`/var/log/messages`.

您应该检查系统日志是否已正确配置以将这些消息发送到正确的目的地，系统日志是否正在运行以及该`stop()`函数是否实际被调用。

我还假设它`stop()`被称为 root，因为我可以看到您执行 a`su - program_deployer`来关闭该进程。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-14T18:02:26.613

试试这个，

```
 echo "Stopping $service" | tee -a /var/log/messages 
```

回显输出附加到 /var/log/messages。

# php - 如果存在相同的名称，PHP将按时间顺序重命名上传

> ID：15415752
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:08:43.947
> 
> 标签：php

我目前正在运行此脚本以从我的智能手机应用程序上传录音，并且效果很好。但是有些用户没有完全填写他们的信息，并且上传的名称为“null”我希望他们“如果上传名称 = null，那么”按时间顺序重命名它们：null1、null2、null3 等

但是，如果它们当前在文件夹中没有具有匹配名称的文件，则保留上传的名称。例如，可能有 john smith 和 john smith1，但没有 Jane Smith，因此请保留名称。这是我的代码

```
<?php
print_r($_FILES);
move_uploaded_file($_FILES["file"]["tmp_name"], "mp3/".$_FILES["file"]["name"]);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:16:09.993

这应该做你想要的：

```
// Get the file name as an array
$file_name = explode('.', 'mp3/' . $_FILES['file']['name']);

// Get the extension
$extension = array_pop($file_name);

// Get the file name as a string
$file_name = implode('.', $file_name);

// Set the initial suffix
$i = 0;

// Get the valid path
while (is_file($path = $file_name . ($i ?: '') . '.' . $extension))
{
  ++$i;
}

// Throw an exception if the file could not be moved
if (!move_uploaded_file($_FILES['file']['tmp_name'], $path))
{
  throw new Exception('There was an error uploading the file.');
} 
```

# sql - 用于显示集群及其大小的 SQL 查询

> ID：15415753
> 
> 赞同：0
> 
> 时间：2013-03-14T17:08:47.733
> 
> 标签：sql, count, aggregate-functions

我有一个具有不同集群 ID 的表

```
ID  
1  
1  
2  
2      
2    
3  
3  
3  
3  
4  
4 
```

我想显示集群的大小以及该集群中的集群数量。

例如对于上表预期输出：

```
Cluster Size | No of Clusters (with that size)
2            | 2  
3            | 1  
4            | 1 
```

我写了一个查询，它将给我指定的集群大小。

```
Select COUNT(*) from  
(SELECT  ID, COUNT(ID) as cnt  
  FROM [Table] group by ID having COUNT(*) =3) as TC; 
```

在上面的示例中，我将得到“1”作为上表的结果。

但是，我想要一个查询，它会给我所有的集群及其各自的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:20:29.907

```
SELECT c AS ClusterSize, COUNT(*) AS NumOfClusters
FROM
(
    SELECT COUNT(*) AS c, ID
    FROM @table
    GROUP BY ID

)A
GROUP BY c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:22:23.857

```
select [Cluster Size], Count(*) as [No of Clusters]
from (
    select count(*) as [Cluster Size]
    from Table1
    group by ID
) a
group by [Cluster Size] 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/56de3/9)

**输出：**

```
| CLUSTER SIZE | NO OF CLUSTERS |
---------------------------------
|            2 |              2 |
|            3 |              1 |
|            4 |              1 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:17:40.693

如果我了解您的要求，则此查询应该可以完成：

```
SELECT cl.size, COUNT(cl.size)
FROM
(SELECT id, COUNT(id) [Size] FROM Table1 GROUP BY id) cl
GROUP BY cl.size 
```

这是 SQL Fiddle 的链接：[http ://sqlfiddle.com/#!3/56de3/7](http://sqlfiddle.com/#!3/56de3/7)

# javascript - 我无法在以下代码中设置全局变量。我究竟做错了什么？

> ID：15415757
> 
> 赞同：1
> 
> 时间：2013-03-14T17:09:09.200
> 
> 标签：javascript, variables

这是问题所在：我正在尝试按组检查和取消选中复选框。

因此，如果您选择 G1 和 G2，它会抛出一条消息，您不能混合组。**如果您取消选中所有这些，我正在尝试清除现有的分组，这就是代码似乎失败的地方。**

有什么想法吗？（另外，我一开始可能对那个全局变量有一个错误的想法。所以请建议）

```
<HTML>
<script language="javascript">
var prodSel="";
function VerifyGroup(a,b)
    {
    ClearAllSelectionsA(); // check if this is the last unselect and clear the prodSel variable
        if (prodSel == "") 
            {
                prodSel = a;
            }else 
            {
            if (prodSel != a)
                {
                alert ( "Please ensure that the groups are same for the items you select");
                //alert(b);
                document.getElementById(b).checked  = false;
                }
            }

}

function ClearAllSelections()
{
    var inputs = document.getElementsByTagName("input"); 
    var cbs = []; 
        for (var i = 0; i < inputs.length; i++) 
            {  
                if (inputs[i].type == "checkbox") 
                    {  
                        inputs[i].checked = false;
                    }  
            }  
prodSel=""; // Clear the  variable; allow new selections
}

/*loop through and if all of them are unchecke,d clear the variable*/
function ClearAllSelectionsA()
{
var clre = true;
    var inputs = document.getElementsByTagName("input"); 
    var cbs = []; 
        for (var i = 0; i < inputs.length; i++) 
            {  
                if (inputs[i].type == "checkbox") 
                    {  
                        if (inputs[i].checked){clre= false;}
                    }  
            }  
            if (clre){
prodSel=""; // Clear the  variable; allow new selections
alert(window.prodSel);
}
}
</script>
<body>

G1<input type="checkbox" value="zxc" id="12" onclick="javascript:VerifyGroup('g1',12);"><BR>
G1<input type="checkbox" value="zxcw" id="123" onclick="javascript:VerifyGroup('g1',123);"><BR>
G1<input type="checkbox" value="zxcdw" id="124" onclick="javascript:VerifyGroup('g1',124);"><BR>
G2<input type="checkbox" value="zxcf" id="125" onclick="javascript:VerifyGroup('g2',125);"><BR>
G2<input type="checkbox" value="zxcfg" id="126" onclick="javascript:VerifyGroup('g2',126);"><BR>
<a href="#" onclick="ClearAllSelections();">clear group</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:28:03.997

当您调用 时`ClearAllSelectionsA`，如果未选中所有复选框，则将`prodSel`被清除。然后再回来`VerifyGroup`，`prodSel`马上就被调职了`a`。我的建议是从该值返回 true 或 false`ClearAllSelectionsA`并根据该值采取行动。

```
<script language="javascript">
var prodSel="";
function VerifyGroup(a,b)
{
    var cleared = ClearAllSelectionsA(); // check if this is the last unselect and clear the prodSel variable
    if (prodSel == "" && !cleared) //only reset prodSel if there is a checkbox checked
    {
        prodSel = a;
    }else 
    {
        if (prodSel != a)
        {
            alert ( "Please ensure that the groups are same for the items you select");
            //alert(b);
            document.getElementById(b).checked  = false;
        }
    }
}

function ClearAllSelections()
{
    var inputs = document.getElementsByTagName("input"); 
    var cbs = []; 
    for (var i = 0; i < inputs.length; i++) 
    {
        if (inputs[i].type == "checkbox") 
        {
            inputs[i].checked = false;
        }
    }
    prodSel=""; // Clear the  variable; allow new selections
}

/*loop through and if all of them are unchecke,d clear the variable*/
function ClearAllSelectionsA()
{
    var clre = true;
    var inputs = document.getElementsByTagName("input"); 
    var cbs = []; 
        for (var i = 0; i < inputs.length; i++) 
        {  
            if (inputs[i].type == "checkbox") 
            {  
                if (inputs[i].checked){clre= false;}
            }  
        }  
        if (clre){
             prodSel=""; // Clear the  variable; allow new selections
             alert(window.prodSel);
        }
        return clre;
    }
</script> 
```

# java - Java Swing - 难以实现所需的布局

> ID：15415758
> 
> 赞同：3
> 
> 时间：2013-03-14T17:09:12.417
> 
> 标签：java, swing, layout, jpanel

我正在使用 Swing 在 Java 中编写 GUI。目前，我正在尝试创建一个“模块”（一个黄色块），它的左右边缘都有一个小部件支架（黑条）。每个持有人将持有几个我想在垂直线上显示的小块。这是一张图片：

示例模块： ![在此处输入图像描述](../Images/abf22f19e6a65754e175cad0ed3b4e6b.png)

我希望能够沿着小部件支架均匀地间隔洋红色/青色块。

我查看了一些 Swing 教程，并尝试将小部件持有者的布局实现为 GridLayout 和 BoxLayout，但都没有运气。单列 GridLayout 似乎是这里的自然选择，但我似乎无法使其工作，即使我编写了正确使用网格的小型测试程序。

布局管理器在简单的示例中工作，但在这个稍微复杂的程序中却没有，这一事实让我感到困惑。

在我的程序中，

*   该模块是一个JPanel
*   小部件持有者/黑条也是 JPanels
*   小部件本身（青色/洋红色块）目前是 JPanel，但我也尝试将它们作为 JLabels 和 JButtons。我只是希望他们能够监听鼠标事件并拥有一个区域和颜色。

附带说明一下，我在模块本身的布局上也遇到了麻烦，无法将小部件支架放置在左侧和右侧。我尝试使用水平 BoxLayout（支架、水平胶水、支架），还有一次我尝试使用 BorderLayout（对任一支架使用 EAST/WEST），但无论我做什么，支架都不会让步 - 就像我一样不想，我用 setBounds() 来定位它们。

模块类（小部件持有者是 inputLine 和 outputLine）：

```
public class Module extends JPanel
{
private static final int MOD_WIDTH  = 86;
private static final int MOD_HEIGHT = 60;

private int screenX, screenY, myX, myY;

private boolean moving = false;

// figure out the layout !
private JPanel inputLine, outputLine;

public Module()
{
    //super(new BorderLayout());

    initPanel();
    initWidgets();
    initMouse();

    setLayout(null);

    list();
}

private final void initPanel()
{
    this.setSize(new Dimension(MOD_WIDTH, MOD_HEIGHT));
    this.setBackground(Color.ORANGE);
}

private void initWidgets()
{
    inputLine   = new JPanel(new GridLayout(0, 1, 5, 5));
    outputLine  = new JPanel(new GridLayout(0, 1, 5, 5));

    inputLine.setBounds (0, 0, 18, 60);
    outputLine.setBounds(68, 0, 18, 60);

    this.add(inputLine);
    this.add(outputLine);

    /* adding IOWidgets to test */
    inputLine.add(new InputWidget());
    inputLine.add(new InputWidget());
    inputLine.add(new InputWidget());

    outputLine.add(new OutputWidget());
    outputLine.add(new OutputWidget());
    outputLine.add(new OutputWidget());
    outputLine.add(new OutputWidget());

    inputLine.setBackground(Color.BLACK);
    outputLine.setBackground(Color.BLACK);
} 
```

这是两种类型的小部件（输入[洋红]，输出[青色]）派生的抽象 IOWidget 类。稍后它将增加功能。

```
public abstract class IOWidget extends JLabel
{   

    private static final int EDGE_SIZE = 8;

    public IOWidget()
    {
        this.setSize(new Dimension(EDGE_SIZE, EDGE_SIZE));
    }
} 
```

这是 InputWidget 类。目前，它与 OutputWidget 相同，直到我添加了额外的功能，所以我只发布这个：

```
public class InputWidget extends IOWidget
{
    public InputWidget()
    {
        this.setBackground(Color.MAGENTA);
    }
} 
```

在我的应用程序中，模块被添加到更大的 JPanel。我希望模块的布局独立于它如何添加到另一个 JComponent，因此我将省略其余代码。

这是程序运行时的样子：

![在此处输入图像描述](../Images/8b8a86bcb4937c1e679534c5062d810c.png)

为了完整起见，这里是单个模块上调用列表的输出：

```
rhopkins.honors.Dataflow.Module[,0,0,86x60,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=]
 javax.swing.JPanel[,0,0,18x60,invalid,layout=java.awt.GridLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=]
  rhopkins.honors.Dataflow.InputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
  rhopkins.honors.Dataflow.InputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
  rhopkins.honors.Dataflow.InputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
 javax.swing.JPanel[,68,0,18x60,invalid,layout=java.awt.GridLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=]
  rhopkins.honors.Dataflow.OutputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
  rhopkins.honors.Dataflow.OutputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
  rhopkins.honors.Dataflow.OutputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]]
  rhopkins.honors.Dataflow.OutputWidget[,0,0,8x8,invalid,layout=java.awt.FlowLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=8,height=8]] 
```

我非常想知道我做错了什么。另外，我知道我是 Swing 和 GUI 开发的新手，因此欢迎对样式/约定/任何内容提出任何批评。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:08:29.383

不要使用空布局。

您的主面板可能应该是 BorderLayout。您可以将小部件持有者添加到主面板的 WEST 和 EAST。

小部件面板应该能够使用垂直 BoxLayout。您需要在添加到面板的每个小部件之前/之后添加胶水。由于 BoxLayout 尊重组件的大小，因此您需要覆盖 getPreferredSize()、getMinimumSize() 和 getMaximumSize() 方法以返回相同的值。这样，面板中的任何额外空间都应在您添加的胶水之间平均分配。

# asp-classic - 按日期对多维数组进行排序

> ID：15415759
> 
> 赞同：0
> 
> 时间：2013-03-14T17:09:14.877
> 
> 标签：asp-classic

我知道这个话题以前被打开过很多次。

我看了所有的例子，但我就是不能让它工作！

我有 3 个维度，日期在第一个维度。

一切正常，期待一个数组，我只是不明白为什么..

这是测试链接：[点击这里](http://www.kampuster.com/content/home/index.cs.asp?Process=ViewCheckins)

```
Sub DataSorter(arrArray)
    Dim row, j, StartingKeyValue, StartingOtherValue, _
        NewStartingKey, NewStartingOther, _
        swap_pos

    For row = 0 To UBound(arrArray)-1
        StartingKeyValue = arrArray(row, 0)
        StartingOtherValue = arrArray(row, 0)
        StartingVenue = arrArray(row, 1)
        StartingVenueOther = arrArray(row, 1)
        swap_pos = row
        For j = row + 1 to UBound(arrArray)
            If DateDiff("s", arrArray(j, 0), NewStartingKey) < 0 Then
                swap_pos = j
                NewStartingKey = arrArray(j, 0)
                NewStartingOther = arrArray(j, 0)
                NewStartingVenue = arrArray(j, 1)
                NewStartingVenueOther = arrArray(j, 1)
                NewStartingCountry = arrArray(j, 2)
                NewStartingCountryOther = arrArray(j, 2)
            End If
        Next    
        If swap_pos <> row Then
            arrArray (swap_pos, 0) = StartingKeyValue
            arrArray (swap_pos, 0) = StartingOtherValue            
            arrArray (row, 0) = NewStartingKey
            arrArray (row, 0) = NewStartingOther     
            arrArray (swap_pos, 1) = StartingVenue
            arrArray (swap_pos, 1) = StartingVenueOther  
            arrArray (row, 1) = NewStartingVenue
            arrArray (row, 1) = NewStartingVenueOther   
            arrArray (swap_pos, 2) = StartingCountry
            arrArray (swap_pos, 2) = StartingCountryOther  
            arrArray (row, 2) = NewStartingCountry
            arrArray (row, 2) = NewStartingCountryOther   
        End If  
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:57:39.907

很奇怪的代码。试试这个：

```
Sub DataSorter(arrArray)
Dim row, i, tmp
For row = 0 To UBound(arrArray) - 1
    For j = row + 1 to UBound(arrArray)
        If DateDiff("s", arrArray(j, 0), arrArray(row, 0)) < 0 Then
            For i = 0 To 2
                tmp = arrArray(j, i)
                arrArray(j, i) = arrArray(row, i)
                arrArray(row, i) = tmp
            Next
        End If
    Next
Next 
```

结束子

# sql - 从 SQL Server 2005 返回嵌套的 XMLSCHEMA

> ID：15415769
> 
> 赞同：1
> 
> 时间：2013-03-14T17:09:45.013
> 
> 标签：sql, sql-server-2005, xsd, nested

是否可以从 SQL Server 2005 返回嵌套的 XMLSCHEMA？

现在我有一个存储过程来生成一个可以执行以返回 XML 文档的 NESTED 选择查询。我通过将其附加到每个嵌套查询的末尾来做到这一点：

```
FOR XML AUTO   ,TYPE  ,ELEMENTS 
```

我只是将其更改为：

```
FOR XML AUTO   ,TYPE  ,ELEMENTS, XMLSCHEMA 
```

我可能能够返回一个嵌套的 XSD 文档。

返回的内容看起来像一个 XSD，其中粘贴了另一个完整的 XSD，这意味着每个 XSD 都有自己的命名空间和 schemaLocation。我只需要它们在根 XSD 中显示为 xsd:elements。

```
SELECT 
   Stuff,
   (SELECT OtherStuff 
    FROM test2  
    FOR XML AUTO, TYPE, ELEMENTS, XMLSCHEMA) 
FROM test 
FOR XML AUTO, TYPE, ELEMENTS, XMLSCHEMA 
```

这是返回的内容：

```
<xsd:schema xmlns:schema="urn:schemas-microsoft-com:sql:SqlRowSet26" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes" targetNamespace="urn:schemas-microsoft-com:sql:SqlRowSet26" elementFormDefault="qualified">
  <xsd:import namespace="http://schemas.microsoft.com/sqlserver/2004/sqltypes" schemaLocation="http://schemas.microsoft.com/sqlserver/2004/sqltypes/sqltypes.xsd" />
  <xsd:element name="test" type="sqltypes:xml" />
</xsd:schema>
<test xmlns="urn:schemas-microsoft-com:sql:SqlRowSet26">
  <Stuff>Stuff</Stuff>
  <xsd:schema xmlns:schema="urn:schemas-microsoft-com:sql:SqlRowSet25" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes" xmlns="" targetNamespace="urn:schemas-microsoft-com:sql:SqlRowSet25" elementFormDefault="qualified">
    <xsd:import namespace="http://schemas.microsoft.com/sqlserver/2004/sqltypes" schemaLocation="http://schemas.microsoft.com/sqlserver/2004/sqltypes/sqltypes.xsd" />
    <xsd:element name="test2">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="OtherStuff" minOccurs="0">
            <xsd:simpleType>
              <xsd:restriction base="sqltypes:varchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">
                <xsd:maxLength value="50" />
              </xsd:restriction>
            </xsd:simpleType>
          </xsd:element>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element>
  </xsd:schema>
  <test2 xmlns="urn:schemas-microsoft-com:sql:SqlRowSet25">
    <OtherStuff>OtherStuff</OtherStuff>
  </test2>
</test> 
```

这是我需要返回的：

```
<xsd:schema xmlns:schema="urn:schemas-microsoft-com:sql:SqlRowSet26" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sqltypes="http://schemas.microsoft.com/sqlserver/2004/sqltypes" targetNamespace="urn:schemas-microsoft-com:sql:SqlRowSet26" elementFormDefault="qualified">
    <xsd:import namespace="http://schemas.microsoft.com/sqlserver/2004/sqltypes" schemaLocation="http://schemas.microsoft.com/sqlserver/2004/sqltypes/sqltypes.xsd" />
    <xsd:element name="test" type="sqltypes:xml" />
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="Stuff" minOccurs="0">
                <xsd:simpleType>
                    <xsd:restriction base="sqltypes:varchar">
                        <xsd:maxLength value="50"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="test2">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="OtherStuff" minOccurs="0">
                            <xsd:simpleType>
                                <xsd:restriction base="sqltypes:varchar" sqltypes:localeId="1033" sqltypes:sqlCompareOptions="IgnoreCase IgnoreKanaType IgnoreWidth" sqltypes:sqlSortId="52">
                                    <xsd:maxLength value="50" />
                                </xsd:restriction>
                            </xsd:simpleType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

SQL 返回的实际上是语法错误的 XML。不应该有两个 ROOT 元素

任何帮助将不胜感激。

# php - 会话变量在页面刷新时重置（注销用户）

> ID：15415773
> 
> 赞同：2
> 
> 时间：2013-03-14T17:10:01.047
> 
> 标签：php, authentication, session-variables

我正在使用 PHP 身份验证系统来登录用户。登录用户可以正常工作，但是，在刷新页面（在任何页面上）时，会话变量会重置并且用户被“注销”。我在每个页面上都使用 session_start() 。我有文件 auth.php 和 authenticate.php 来记录和验证用户。这是一个令人沮丧的问题，我们将不胜感激。我在这里给你代码：

auth.php：

```
<?php
function credentials_valid($email, $password) {
    $email = mysql_real_escape_string($email);
    $query = "SELECT `id`, `salt`, `password` 
              FROM `#######` 
              WHERE `email` = '$email' ";

    $result = mysql_query($query);
    if(mysql_num_rows($result)) {
        $user = mysql_fetch_assoc($result);

        $password_requested = sha1($user['salt'] . $password);
        if($password_requested === $user['password'])   {
            return $user['id'];
            }   
        }
    return false;
}

//logs into the user $user
function log_in($user_id){
    $_SESSION['user_id'] = $user_id;

}

//Returns the currently logged in user (if any)
function current_user(){
    static $current_user;
    if(!$current_user) {
        if($_SESSION['user_id']){
            $user_id = intval($_SESSION['user_id']);
            $query = "SELECT * 
                         FROM `#######` 
                         WHERE `id` = $user_id";

            $result = mysql_query($query);
            if(mysql_num_rows($result)){
                $current_user = mysql_fetch_assoc($result);
                return $current_user;
                }
            }
        }
        return $current_user;
    }

//Requires a current user
function require_login() {
    if(!current_user()){
        $_SESSION['redirect_to'] = $_SERVER["REQUEST_URI"];
        header("Location: index.php");
        exit("You must log in.");

}
}

?> 
```

验证.php：

```
<?php
session_start();
require_once "database.php";
db_connect();
require_once "auth.php";

$user_id = credentials_valid($_POST['username'], $_POST['password']);
if($user_id){
    log_in($user_id);

    if($_SESSION['redirect_to']){
        header("Location: " . $_SESSION['redirect_to']);
        unset($_SESSION['redirect_to']);

    }else{
        header("Location: index.php");          
    }

}else{
        header("Location: login.php?error=1");
        exit("You are being redirected");       
}

?> 
```

在我的一个用户登录的页面上，我在 php 标头中有这个：

```
<?php

    session_start();
    require_once "database.php";
    db_connect();
    require_once "auth.php";

    $current_user = current_user();

if(isset($_GET["logout"]) && $_GET["logout"]==1)
    {
        //User clicked logout button, distroy all session variables.
        session_destroy();
        header('Location: '.$return_url);
    }
?> 
```

系统不稳定。有时，如果我在登录后立即刷新页面，会话变量将立即被销毁。其他时候，用户将在连续几次刷新后保持登录状态。请让我知道您看到了什么问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:22:52.943

请注意在 PHP 代码的每一页上使用 session_start() 的要点，从您的代码看来，有些页面不包含 session_start();

您的代码的另一件事：

```
 header("Location: " . $_SESSION['redirect_to']);
    unset($_SESSION['redirect_to']); 
```

必须将您的代码更改为：

```
 a=$_SESSION['redirect_to'];
    unset($_SESSION['redirect_to']);
    header("Location: " . $a);
    exit(); 
```

不建议在重定向后取消设置，而且您必须关闭较早的进程，它有时会继续在后台运行该进程。不建议您在标头命令之后尝试的所有操作..

# testing - Pax 考试测试偶尔会失败

> ID：15415780
> 
> 赞同：0
> 
> 时间：2013-03-14T17:10:15.053
> 
> 标签：testing, osgi, cxf, apache-karaf, pax-exam

我正在使用 Pax Exam 在 Karaf 中测试 CXF REST 服务。测试几乎总是在我的机器上顺利运行。在 Jenkins（在 Maven 构建下）运行时，它们通常会失败。失败似乎是随机的和不可预测的。我在失败期间收到的错误涉及尝试运行 Karaf 命令。这些命令由以下代码段执行：

```
 def byteArrayOutputStream = new ByteArrayOutputStream();
    def printStream = new PrintStream(byteArrayOutputStream);
    CommandProcessor commandProcessor = getOsgiService(CommandProcessor.class);
    CommandSession commandSession = commandProcessor.createSession(System.in, printStream, System.err);
    commandSession.put("APPLICATION", System.getProperty("karaf.name", "root"));
    commandSession.put("USER", "karaf");
    commandSession.execute(command) 
```

这些是我试图在测试设置方法中执行的命令：

```
'features:addurl mvn:org.apache.cxf.karaf/apache-cxf/2.7.2/xml/features', 'features:install http', 'features:install cxf' 
```

这是一个例外：

`org.apache.felix.gogo.runtime.CommandNotFoundException: Command not found: features:addurl`

显然有时 Karaf 无法正确启动并且无法处理这些命令。像这样的错误在不同 Karaf 命令的不同测试中随机发生。在我的机器上，如果机器处于负载状态，它们更有可能发生。

什么可能导致卡拉夫以这种方式行事？如何防止这些错误的发生？

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:19:58.883

还有 pax-exam-karaf，它还有一个可从配置中使用的功能安装程序。如果您想坚持“手动”安装，您应该确保预先安装了功能服务。例如让服务被注入。

# javascript - 使用 Javascript CSOM 在 SharePoint 2013 中设置搜索中心 URL

> ID：15415781
> 
> 赞同：4
> 
> 时间：2013-03-14T17:10:19.693
> 
> 标签：javascript, sharepoint, sharepoint-2013, csom

在 SharePoint 2013 中，我试图通过 JavaScript CSOM 访问搜索对象。

我想知道可以让我访问站点设置下的搜索设置的对象。我尝试在 SP 对象下查找，但在那里没有找到任何与搜索相关的对象。

**我的目标是通过 JavaScript CSOM 更改搜索中心 URL。**

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T13:17:11.497

## 如何通过 CSOM 在 SharePoint 2013 中设置搜索设置

```
 function updateSearchSettings(searchSenterUrl,resultsPageUrl,Success,Error) {
   var context = SP.ClientContext.get_current();
   var web = context.get_site().get_rootWeb();
   var props =  web.get_allProperties();

   props.set_item("SRCH_ENH_FTR_URL_SITE",searchSenterUrl);
   props.set_item("SRCH_SB_SET_SITE",JSON.stringify({"Inherit":false,"ResultsPageAddress":resultsPageUrl,"ShowNavigation":false}));
   web.update();

   context.load(props);
   context.executeQueryAsync(
     function () {
        var searchCenterUrl = props.get_item("SRCH_ENH_FTR_URL_SITE");
        var searchPageProps = JSON.parse(props.get_item("SRCH_SB_SET_SITE"));
        Success(searchCenterUrl,searchPageProps);
     },
     Error
   );
}

//Usage
updateSearchSettings("/sites/search/pages2","/sites/search/pages/default.aspx",function(searchCenterUrl,searchPageProps){
         console.log('Search Center Url:' + searchCenterUrl);
         console.log('Results Page Url:' + searchPageProps.ResultsPageAddress);
   },
   function (sender, args) {
        console.log("Error: " + args.get_message());
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T21:19:35.590

给定网站的搜索中心 URL 存储在该网站的属性包中，在 RootWeb 上，您还可以设置站点的搜索中心 URL。

2013 年的密钥与 2010 年相比有所变化，现在分别为 SRCH_ENH_FTR_URL_WEB 和 SRCH_ENH_FTR_URL_SITE。设置它们的代码是这样的：

```
var ctx = new SP.ClientContext.get_current();
var web = ctx.get_site().get_rootWeb();
var props =  web.get_allProperties();
props.set_item("SRCH_ENH_FTR_URL_SITE","/sites/search/pages");
web.update();     
ctx.load(web);     
ctx.executeQueryAsync(function () {
    alert("Search Settings Modified");
 },
 function() {
  alert("failed");
}); 
```

# .htaccess - 短网址使用 htaccess

> ID：15415783
> 
> 赞同：0
> 
> 时间：2013-03-14T17:10:22.667
> 
> 标签：.htaccess, url

我想在我的网络中制作简短的网址，例如：

更改此网址：

> www.site.com/somepage.php
> 
> www.site.com/text.php?id=123

对此：

> www.site.com/somepage
> 
> www.site.com/text/123

我从这里的答案中尝试了很多例子，但没有任何效果，我不知道我在做什么。

我的默认 htaccess 文件是：

```
<IfModule mod_suphp.c>
    suPHP_ConfigPath /home/user/php.ini
    <Files php.ini>
        order allow,deny
        deny from all
    </Files>
</IfModule>
# Use PHP5 as default
AddHandler application/x-httpd-php5 .php 
```

我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:15:49.267

您必须定义一个规则并激活 URL 重写：

```
#URL Rewriting  
RewriteEngine on
RewriteRule ^somepage$ /somepage.php [L]

#Your code
<IfModule mod_suphp.c>
    suPHP_ConfigPath /home/user/php.ini
    <Files php.ini>
        order allow,deny
        deny from all
    </Files>
</IfModule>
# Use PHP5 as default
AddHandler application/x-httpd-php5 .php 
```

# php - 如果缓存文件过多，Codeigniter 文件缓存会受到限制

> ID：15415789
> 
> 赞同：0
> 
> 时间：2013-03-14T17:10:42.897
> 
> 标签：php, codeigniter, caching, codeigniter-2

Codeigniter 基于文件的缓存将获取完全渲染的输出并将其保存到磁盘。因此，无需与数据库对话或处理任何事情，它极大地减少了服务器负载。

但是，如果我们在缓存目录中有超过 10k 的文件（取决于服务器配置）是有限的。

所以我在谷歌搜索，我在下面的代码中找到了这个，它很棒。

[http://ellislab.com/forums/viewthread/110644/](http://ellislab.com/forums/viewthread/110644/)

但现在它对我来说也是有限的，因为上面的代码基于 md5 first chars，创建了 16 个目录。每个目录最多可缓存 10k 个文件。所以总数是 1,60,000（大约）。但我需要存储超过 5,00,000 个缓存文件。

所以问题很简单，如何配置/更改基于文件的 codeigniter 缓存，以便它处理无限的缓存文件？

请就此提出任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:47:38.610

为什么不将海报的第一个 md5 char 的解决方案更改为 x 个字符的随机字符串，使用他的子字符串或 random_string 函数 - 他使用第一个 md5 char 并没有什么神奇之处，它只是提供一个额外的目录等级

# c# - 您应该使用属性来初始化构造函数中的字段吗？

> ID：15415792
> 
> 赞同：4
> 
> 时间：2013-03-14T17:10:47.657
> 
> 标签：c#, properties, encapsulation

真的很简单的问题，我应该使用我的属性来初始化构造函数中的字段还是直接引用它们？

例子：

```
public class Foo()
{
   private string example;

   public String Example
   {
      get/set etc..
   }

   public Foo(string exampleIn)
   {
      Example = exampleIn;
   }
} 
```

或者这样做是更好的做法：

```
public class Foo()
{
   private string example;

   public String Example
   {
      get/set etc..
   }

   public Foo(string exampleIn)
   {
      example = exampleIn;
   }
} 
```

无论哪种方式，我认为两者都不会违反封装，所以我想知道是否有首选方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:06:35.717

这里真的没有正确或错误的答案（因此我几乎想投票结束）。但是，我倾向于同意[雅各布](https://stackoverflow.com/a/15416197/158779)的观点。我更喜欢属性 getter 和 setter 路由，尤其是现在我们有自动属性。请记住，您可以对 getter 和 setter 进行不同的访问修改，以防因任何原因影响您的决定。我的意思是，如果您要在构造函数中使用该属性，那么请尝试保持一致并在类中的其他任何地方都使用它。这可能意味着您不想将 setter 暴露在外部。

```
public class Foo()
{
   private string example;

   public String Example
   {
     get { return example; }
     private set { example = value; }
   }

   public Foo(string exampleIn)
   {
      Example = exampleIn;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:30:32.860

在 C# 3.0 中引入的自动属性之前，我认为您的第二个示例更“合适”。现在有了自动属性，我认为这是最好的：

```
public class Foo()
{
   private string example;

   public String Example
   {
      { get; set; }
   }

   public Foo(string exampleIn)
   {
      Example = exampleIn;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T10:17:28.063

这取决于数据值是否会在 Setter 内部进一步处理。如果该值需要处理，那么最好使用@Jacob 所说的内容，但如果该值不会被进一步处理（在大多数情况下都是这种情况），最好使用私有成员来避免对 setter 方法的额外方法调用. 当 CLR 编译代码时，它为 Get 和 Set 属性创建两个方法，并且使用该属性访问/修改定义该属性的值将导致不必要的额外方法调用（如果未进一步处理该值）。

# android - 具有自己进程的 Android 服务无法执行我需要它执行的操作。（每五秒循环并执行一次）

> ID：15415793
> 
> 赞同：1
> 
> 时间：2013-03-14T17:10:49.063
> 
> 标签：android, multithreading, android-asynctask, android-service

我试图让我的服务每 5 秒将手机的坐标发送到我的服务器，但我不知道为什么它不起作用。

（尽管它确实适用于非服务活动。（当调用 OnClick 方法时 - 单击按钮。

这就是为什么它在服务中不起作用这一事实很奇怪。）这是我的代码：

```
public class LocationService extends Service {

        @Override
        public IBinder onBind(Intent arg0) {
                // I Dont Know what this method does.
                Execute();
                return null;
        }
        String lat="", lon="";
        public void Execute()
        {
                new PostAsyncTask().execute();
        }

        public void ReNewCoordinates(){
                LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
            // Define a listener that responds to location updates
            LocationListener locationListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                    // Called when a new location is found by the network location provider.
                    lat = Double.toString(location.getLatitude());
                    lon = Double.toString(location.getLongitude());
                }
                        public void onProviderDisabled(String provider) {}
                        public void onProviderEnabled(String provider) {}
                        public void onStatusChanged(String provider, int status,Bundle extras) {}};
                        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
                }
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate();
            ReNewCoordinates();

            //new PostAsyncTask().execute();
        }

        public void postData(String la, String lo) {
                try
            {
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost("http://www.myserver.com/insert.php");
                List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(3);
                nameValuePair.add(new BasicNameValuePair("user","100nir100"));
        nameValuePair.add(new BasicNameValuePair("lat", lat));
        nameValuePair.add(new BasicNameValuePair("lon", lon));
        nameValuePair.add(new BasicNameValuePair("address", GetAddress(lat, lon)));
        UrlEncodedFormEntity form;
        form = new UrlEncodedFormEntity(nameValuePair);
        form.setContentEncoding(HTTP.UTF_8);
        try {
            httpPost.setEntity((HttpEntity) new UrlEncodedFormEntity(nameValuePair,"UTF-8"));
        } catch (UnsupportedEncodingException e) {
            // writing error to Log
            e.printStackTrace();
        }
        try
        {                        

            HttpResponse response = httpClient.execute(httpPost);
            int status=response.getStatusLine().getStatusCode();//200=success 300=redirection 400=client error 500 = server error
            if(status==200)
            {
                HttpEntity e=response.getEntity();
                String data=EntityUtils.toString(e);

                   Integer x= Integer.valueOf(data.trim());//very important to use trim
                    if(x==1)
                    {
                        Toast.makeText(this, "Sucssess", Toast.LENGTH_SHORT).show();
                    }
                    else if(x!=1)
                    {
                        Toast.makeText(this, "Unsucssessful", Toast.LENGTH_SHORT).show();
                    }                    

                        Toast.makeText(this, "Unsucssessful", Toast.LENGTH_SHORT).show();
            }
        }
        catch (ClientProtocolException e) {
            // writing exception to log
            e.printStackTrace();
        } catch (IOException e) {
            // writing exception to log
            e.printStackTrace();

        }              

            }
    catch (Exception e) {
                // TODO: handle exception

        }
}

        public String GetAddress(String lat, String lon)
        {
            Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);
            String ret = "";
            try {
                List<Address> addresses = geocoder.getFromLocation(Double.parseDouble(lat), Double.parseDouble(lon), 1);
                if(addresses != null) {
                    Address returnedAddress = addresses.get(0);
                    StringBuilder strReturnedAddress = new StringBuilder("");
                    for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                        strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                    }
                    ret = strReturnedAddress.toString();
                }
                else{
                    ret = "No Address returned!";
                }
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                ret = "Can't get Address!";
            }
            return ret;
        }

    class PostAsyncTask extends AsyncTask<String, Integer, Boolean> {
         protected Boolean doInBackground(String... params) {
             postData(lat, lon);
                        return true;
         }

         protected void onPreExecute() {
             // show progress dialog
         }

             protected void onPostExecute(Long result) {
                 // hide  progress dialog
             }
         }

        public int onStartCommand(Intent intent, int flags, int startId) {
                //new PostAsyncTask().execute();
                new Thread(new Runnable(){

            public void run() {

            while(true){
                new PostAsyncTask().execute();
                        try{
                            Thread.sleep(5000);
                            }
                        catch (InterruptedException e) {
                            e.printStackTrace();
                            }
                        }
                 }
        }).start();
                return Service.START_STICKY;
          }
        public void OnStart()
        {
                Execute();
        }

        public void OnDestroy()
        {
                super.onDestroy();
                //Thread.stop();

        }

} 
```

那么如何让服务每 5 秒执行一次呢？谢谢你的帮助！

# wordpress - 如何在 Wordpress 中将值从一个 Contact Form 7 表单传递到另一个表单？

> ID：15415794
> 
> 赞同：8
> 
> 时间：2013-03-14T17:10:53.910
> 
> 标签：wordpress, contact-form-7

我有一个有 2 种形式的网站 - 一种短形式和一种长形式。如果您查看[http://dforbesinsuranceagency.com](http://dforbesinsuranceagency.com)，您会看到标头照片旁边的简短表格。长表格位于[http://dforbesinsuranceagency.com/request-free-insurance-quotes/](http://dforbesinsuranceagency.com/request-free-insurance-quotes/)

当用户在短表单上点击提交时，它会将他们踢到长表单页面，因此该部分可以正常工作。适合我的部分是我需要将输入到短表单字段中的值“名字”、“姓氏”、“电子邮件地址”和“电话”传递给长表单上的等效字段。

我该怎么做呢？

这就是我将短格式重定向到长格式的方式（我将其添加到短格式的附加设置部分）：

```
on_sent_ok: "location = 'http://dforbesinsuranceagency.com//request-free-insurance-quotes';" 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T11:47:43.107

Hack，hack，hackety，hack hack hack ......如果不建议*“不使用表单构建器”*，我认为没有一个优雅的解决方案 - 如果不修改插件本身，您就不能使用建议的其他 PHP 方法（和那是一罐蠕虫）。我将提出一个 Javascript 解决方案，但有一些注意事项（如下）：

```
jQuery(document).ready(function($){
  $('#quick-quote form:first').submit(function(){
    var foo = {};
    $(this).find('input[type=text], select').each(function(){
      foo[$(this).attr('name')] = $(this).val();
    });
    document.cookie = 'formData='+JSON.stringify(foo);
  });
  var ff = $('#container form:first');
  if(ff.length){
    var data = $.parseJSON(
      document.cookie.match('(^|;) ?formData=([^;]*)(;|$)')[2]
    );
    if(data){
      for(var name in data){
        ff.find('input[name='+name+'], select[name='+name+']').val(data[name]);
      }
    }
  }
}); 
```

这基本上会做的是：提交时，将您的迷你表单选项存储在`cookie`. 在页面加载时，它将在页面主体中查找表单并应用任何存储的 cookie 数据。

**笔记**

*   jQuery 选择器故意模棱两可，以避免将来在您的管理面板/插件中发生任何可能与表单 ID 混淆（从而破坏脚本）的更改。
*   我并不热衷于配对字段/选项名称 - 例如，您的迷你表单中的选择框被命名`insurance-type`，但主表单中的匹配框被命名`ins-type`-**您必须确保它们具有相同的名称**。
*   这也适用于选择框值 - 如果没有匹配的值，它将被忽略（例如，主表单中的某些值`&raquo;`前面有 » 字符（因此不匹配）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:18:57.093

试试这个。

将我们第一个表单的操作设置为一个名为 xyz.php 的 php 文件

```
<form method="post" action="xyz.php">
    <input type="text" name="name">
    <input type="text" name="email_address">
    <input type="submit" value="Go To Step 2">
</form> 
```

文件 xyz.php 将为您创建一个新表单，在这种情况下是您的第二个表单（大表单）。根据需要设置表单的操作。你的 xyz.php 的代码看起来像这样。

```
<form method="post" action="form3.php">
   <input type="text" name="name" value="<?php echo $_POST['name']; ?>">
   <input type="text" name="email_address" value="<?php echo $_POST['email_address']; ?>">
   <input type="radio" group="membership_type" value="Free">

   <input type="radio" group="membership_type" value="Normal">

   <input type="radio" group="membership_type" value="Deluxe">

   <input type="checkbox" name="terms_and_conditions">  
   <input type="submit" value="Go To Step 3">
</form> 
```

其中第一个表单的输入字段已经填充了用户在第一个表单中提供的详细信息。

您可以自己创建第一个表单，并让联系表单为您创建第二个表单，并使用上述方法提供默认值。

希望这可以帮助！

# jquery - jquery可滚动克隆的div

> ID：15415797
> 
> 赞同：1
> 
> 时间：2013-03-14T17:11:03.543
> 
> 标签：jquery, jquery-tools, scrollable, autoscroll

我只想在我的首页上制作一个简单的可滚动画廊。我按照[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)上的说明进行操作。我打电话

```
$(".scrollable").scrollable({circular:true}).autoscroll({interval:5000}); 
```

在我准备好的文档上的可滚动 div 上。我知道循环创建了两个克隆的 div，一个位于 div 项目列表的每个部分。当我的页面加载第一个克隆的 div 在前面时，当第一个滚动发生时，它会滚动两个 div……所以跳过第一个 div，它实际上与克隆的 div 相同，但用户仍然可以看到一个图像是跳过。我检查了[http://jquerytools.org/demos/scrollable/plugins-chain.htm](http://jquerytools.org/demos/scrollable/plugins-chain.htm)等工作示例以及使用相同功能的其他一些站点。我发现在这些页面上，行中的第一个 div 是实际的第一个 div，而不是克隆。为什么克隆的 div 在我的页面上排在第一位，而不是在其他页面上？

我用谷歌搜索了这个问题，但找不到任何有用的东西，但我知道这可能是一个愚蠢的问题，但我花了几个小时找出问题所在，但没有任何结果，所以请帮助我！

# ios - 如何保存导航控制器的状态？（iOS 6 之前）

> ID：15415798
> 
> 赞同：2
> 
> 时间：2013-03-14T17:11:07.813
> 
> 标签：ios, uinavigationcontroller, segue, restore, preserve

我的根视图控制器 (R) 中有一个按钮，它触发到导航控制器 (N) 的 segue。在导航控制器内部，我可以在其导航堆栈上的所有视图控制器（N.0、N.1、N.2...）之间切换，并且所有这些视图控制器都有一个按钮可以立即跳回根视图控制器 (R)。

我想实现这一点 - 每当点击根视图控制器 (R) 中的按钮时 - 导航控制器 (N) 会再次显示其先前的配置。示例：如果关闭导航控制器之前的最后一个可见视图控制器是（N.1），我希望导航控制器再次显示（N.1）。

目前，每当我触发从根视图控制器 (R) 到导航控制器 (N) 的转场时，总是会显示导航根视图控制器 (N.0)。（iOS 是否会在每次触发 segue 时实例化一个新的导航控制器？还是它仍然是同一个对象？）

如何保存导航控制器的状态并在导航控制器再次出现时恢复它？

*（我知道在 iOS 6 中有一个 restoreIdentifier 属性可用于此目的。但是我希望我的应用程序能够很好地支持运行 iOS 5 的设备，并且在 iOS 6 之前必须有某种方法来实现此行为。）*

![故事板截图](../Images/157f1ae3175c85e896c854a4f6ecceda.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:17:27.007

segue**总是**创建目标视图控制器的新实例。**大概您使用popToRootViewControllerAnimated:** “跳转”到根控制器，这大概会破坏所有弹出的视图控制器，因此没有什么可返回的。如果你想浏览视图控制器的网络，你将无法使用 UINaviationViewController 或 segues。

# java - 将复选框样式更改为 Cross - Android

> ID：15415804
> 
> 赞同：2
> 
> 时间：2013-03-14T17:11:55.190
> 
> 标签：java, android

我一直在编写一个 Android 应用程序，并`CheckBox`用于 GUI。

一般的风格`CheckBox`是a `green colored tick`，但我想做`red colored cross`。

怎么做。？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:13:56.257

采用一个自定义可绘制选择器，其中一个图像用于未选中状态，另一个图像用于选中状态，并将其设置为复选框的可绘制资源

例子：

**在res/drawable**文件夹中创建一个 xml 文件

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_checked="true" android:drawable="@drawable/crossimagecheckbox" />
    <item android:state_checked="false" android:drawable="@drawable/uncheckecheckbox" />

</selector> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:15:04.180

您可以设置复选框的任何颜色的刻度线。但您需要为此制作自定义复选框。

看看[这里](http://vimaltuts.com/android-tutorial-for-beginners/android-custom-checkbox)和[这里](https://stackoverflow.com/questions/11464143/android-set-color-of-checkbox/11464319#11464319)。

来源：[Android：设置 CheckBox 的颜色](https://stackoverflow.com/questions/11464143/android-set-color-of-checkbox/11464319#11464319)

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_checked="true" 
    android:drawable="@drawable/cbchk_blue"
    android:state_focused="false">
    <shape android:shape="rectangle">
        <stroke android:width="2dp" android:color="@color/blue_dark" />
        <gradient  android:endColor="@color/white" android:startColor="@color/blue_dark" android:type="sweep"  />
        <size android:height="30dp" android:width="30dp" />
    </shape>
</item>
<item android:state_checked="true" 
    android:drawable="@drawable/cbchk_blue"
    android:state_focused="true">
    <shape android:shape="rectangle">
        <stroke android:width="2dp" android:color="@color/white" />
        <gradient  android:endColor="@color/white" android:startColor="@color/blue_dark" android:type="sweep"  />
        <size android:height="30dp" android:width="30dp" />
    </shape>
</item>
<item android:state_checked="false" 
    android:drawable="@drawable/cbunchk_blue"
    android:state_focused="false">
    <shape android:shape="rectangle">
        <stroke android:width="2dp" android:color="@color/blue_dark" />
        <size android:height="30dp" android:width="30dp" />
    </shape>
</item>
<item android:state_checked="false" 
    android:drawable="@drawable/cbunchk_blue"
    android:state_focused="true">
    <shape android:shape="rectangle">
        <stroke android:width="2dp" android:color="@color/white" />
        <size android:height="30dp" android:width="30dp" />
    </shape>
</item> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:15:16.997

您需要为复选框创建一个选择器。

在布局复选框中添加以下内容：

```
android:background="@drawable/checkbox_selector" 
```

在 checkbox_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="false"
        android:drawable="@drawable/normal_picture" />
    <item android:state_checked="true"
        android:drawable="@drawable/checked_picture" />
</selector> 
```

现在根据您的要求创建 normal_picture 和 checked_picture 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:15:11.863

我相信[这个](https://stackoverflow.com/questions/3965484/custom-checkbox-image-android)链接是高度相关的。阅读让的回答：

> 复选框是 Button 的子项，您可以在“按钮样式”下为复选框提供具有多种状态的背景图像：http: [//developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)
> 
> ...并在这里举例说明：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# javascript - 在 tumblr 中设置粘性帖子标签？

> ID：15415806
> 
> 赞同：3
> 
> 时间：2013-03-14T17:12:05.760
> 
> 标签：javascript, api, tumblr

有没有人知道如何使用 tumblr 中的特殊标签设置粘性帖子功能？我知道 Single A 主题具有此功能，但没有文档，我试图避免全部解码。有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:04:17.147

您可以选择为帖子使用特定标签，例如“粘性”，然后仅对带有粘性标签的帖子运行 API 调用，限制为 1（可选）。

```
http://api.tumblr.com/v2/blog/[YOURBLOG].tumblr.com/posts/?api_key=[YOURAPIKEY]&limit=1&tag=sticky 
```

有关 API 的更多信息可以在这里找到：[http ://www.tumblr.com/docs/en/api/v2#posts](http://www.tumblr.com/docs/en/api/v2#posts)

API 调用在 JS 中看起来像这样：

```
$.ajax({
    url: '[URL_FROM_ABOVE]&jsonp=?',
    dataType: 'jsonp',
    type: 'get',
    success: function(data){

        // do something with your data

    }

}); 
```

# c# - 防止插件在用户之间共享的最佳方法

> ID：15415807
> 
> 赞同：1
> 
> 时间：2013-03-14T17:12:05.943
> 
> 标签：c#, plugins, mef, plugin-architecture

我们正在使用 MEF 开发基于插件架构的 C# 应用程序。

主应用程序只是一个基本框架，它的模块化功能将由用户必须购买的插件提供。

我真的不希望每个插件都有单独的许可证密钥，但确实需要采取合理的预防措施，以便用户不只是购买一个插件的副本，然后将其安装在应用程序的十几个实例中。

# sql - 如何将 csv 文件导入谷歌云 sql 服务（与导入 sql 转储相反）

> ID：15415809
> 
> 赞同：2
> 
> 时间：2013-03-14T17:12:09.867
> 
> 标签：sql, cloud

如何将 csv 文件导入谷歌云 sql 服务（与导入 sql 转储相反）？

我可以以某种方式使用松鼠客户端吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-01T00:45:06.703

我刚开始使用 Google Cloud SQL。我使用 MySQL Workbench 连接到我的实例。我创建了我的第一个表，但后来我想将一个 CSV 文件导入该表，但不清楚如何从 MySQL Workbench 执行此操作。因此，以下是执行此操作的步骤（感谢 Aimon Bustardo）：

1.  使用此站点将您的 CSV 文件转换为 SQL 文件（还有其他选项可以转换为 SQL，但这是一项简单的服务）：[http ://csv2sql.com/](http://csv2sql.com/)
2.  在 MySQL 实例的 MySQL Workbench Navigator 中，单击“Data Import/Restore”
3.  单击“从独立文件导入”，然后选择在步骤 1 中创建的 SQL 文件。
4.  点击“开始导入”，您的数据就会上传到云端！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:18:27.603

在他们拥有 csv 导入器之前，最好将其转换为 SQL。有命令行实用程序或在线服务。其中之一是免费的：[http ://csv2sql.com/](http://csv2sql.com/)

# javascript - 在 Node JS 中进行身份验证的 Passport

> ID：15415811
> 
> 赞同：4
> 
> 时间：2013-03-14T17:12:14.873
> 
> 标签：javascript, node.js, passport.js

我正在考虑在 Node 项目中使用 Passport 库 ( [http://passportjs.org/ ) 进行身份验证。](http://passportjs.org/)

我对以下护照会话功能感到困惑：

```
passport.serializeUser(function( user, done ) {
    done( null, user.id );
});

passport.deserializeUser(function( id, done ) {
    user.get( id, function ( err, user ) {
        done( err, user );
    });
}); 
```

我想知道：

1）是否会为每个需要进行身份验证的请求调用这些？或者它们只是在首次创建会话时调用一次？

2) 如何从脚本的其他部分访问“用户”中的信息？

3）对于需要认证的请求，我在哪里放置任何额外的逻辑。例如，检查是否未达到允许的用户空闲时间值。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:01:05.307

1)`serializeUser`在为用户创建会话时调用（当身份验证成功时）。这用于在 Express 会话中存储有关用户的某种识别信息（如唯一的用户 ID）。

`deserializeUser`*每次请求都会被调用，并从*会话中获取那条标识信息，以某种方式通过数据库查询将其转换回完整的用户记录，但这完全取决于你：而不是仅仅存储你的用户 ID也可以将整个用户记录存储在会话中，但这取决于用户记录的类型和您正在使用的会话存储（如果可能）（例如，使用`express.cookieSession`会限制您可以在会话中存储的数据量）。

这就是存储整个用户记录的样子：

```
passport.serializeUser(function(user, done) {
  // Here, 'user' is the result of the function called by 'new LocalStrategy()'; when 
  // you call done() below, that result will be stored in the session.
  done(null, user);
});

passport.deserializeUser(function(user, done) {
  // Here, 'user' is what's stored in the session by serializeUser()
  done(null, user);
}); 
```

`req.user`2）您可以在路由或中间件中使用的Passport 填充。

3）您可以制作一个中间件来实施此类检查。[这](https://github.com/jaredhanson/passport/issues/111)可能是一个很好的起点。

# c# - Spss .NET 库

> ID：15415812
> 
> 赞同：3
> 
> 时间：2013-03-14T17:12:14.763
> 
> 标签：c#, .net, spss

我正在使用 Spss .net 库[http://spss.codeplex.com](http://spss.codeplex.com)创建一个 .sav 文件，但我似乎找不到如何创建案例。我正在使用 C#。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-19T09:57:09.440

为了避免使用本机 spssio32/64 并不得不处理 SPSS 的 32 位和 64 位问题，我们创建了 DLL 的本机实现。它基于 SPSS/PSPP 规范工作，是您之前提到的 SpssLib 的延续。

写入记录的示例如下：

```
// Create Variable list
var variables = new List<Variable>
{
    new Variable
    {
        Label = "The variable Label",
        ValueLabels = new Dictionary<double, string>
                {
                    {1, "Label for 1"},
                    {2, "Label for 2"},
                },
        Name = "avariablename_01",
        PrintFormat = new OutputFormat(FormatType.F, 8, 2),
        WriteFormat = new OutputFormat(FormatType.F, 8, 2),
        Type = DataType.Numeric,
        Width = 10,
        MissingValueType = MissingValueType.NoMissingValues
    },
    new Variable
    {
        Label = "Another variable",
        ValueLabels = new Dictionary<double, string>
                    {
                        {1, "this is 1"},
                        {2, "this is 2"},
                    },
        Name = "avariablename_02",
        PrintFormat = new OutputFormat(FormatType.F, 8, 2),
        WriteFormat = new OutputFormat(FormatType.F, 8, 2),
        Type = DataType.Numeric,
        Width = 10,
        MissingValueType = MissingValueType.OneDiscreteMissingValue
    }
};
// Set the one special missing value
variables[1].MissingValues[0] = 999;  

// Default options
var options = new SpssOptions();

using (FileStream fileStream = new FileStream("data.sav", FileMode.Create, FileAccess.Write))
{
    using (var writer = new SpssWriter(fileStream, variables, options))
    {
        // Create and write records
        var newRecord = writer.CreateRecord();
        newRecord[0] = 15d;
        newRecord[1] = 15.5d;
        writer.WriteRecord(newRecord);

        newRecord = writer.CreateRecord();
        newRecord[0] = null;
        newRecord[1] = 200d;
        writer.WriteRecord(newRecord);
        writer.EndFile();
    }
} 
```

[在GitHub 上](https://github.com/TNSGlobal/SPSS-.NET-Reader)查找源代码，在[NuGet](https://www.nuget.org/packages/SpssLib)上查找二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T15:42:12.620

merthsoft 对以下 stackoverflow 帖子的回答为启动和运行 spss 提供了一个很好的起点。 [在 C# 中使用 64 位 SPSS 库](https://stackoverflow.com/questions/5598968/using-64-bit-spss-libraries-in-c-sharp)

我个人遇到的挂断包括所有适当的 dll，例如... spssio64.dll icudt32.dll icuin32.dll icuuc32.dll

导出数据时，所有列都必须是唯一的。

如果您遵循与 merthsoft 类似的模式，则创建案例的可能解决方案可能是包装和公开此方法...

[DllImport("spssio64.dll", EntryPoint = "spssCommitCaseRecord"...

我希望现在你已经让它工作了，但对于那些在未来遇到这个问题的人来说，这可能会有所帮助。

# jquery - jquery validate - 在验证发生之前替换字段中的逗号

> ID：15415814
> 
> 赞同：4
> 
> 时间：2013-03-14T17:12:20.287
> 
> 标签：jquery, jquery-validate

看来，即使使用当前的验证插件，如果您想使用 min 进行验证，您也不能在值中使用逗号。我在 github 上找到了几个月前（11 个月）提交的补丁来修改源 .js 文件，但它仍然没有发布。

因此，我没有修改我的源 .js 文件，而是试图弄清楚如何在验证之前替换逗号。

我试过这样的事情：

```
$("#amount").blur(function(){
    var val = $(this).val().replace(/\,/g,'');
    $(this).val( val ); 
});
$("#transferForm").validate({
    .......
}); 
```

但它首先运行 validate，因为 min 失败，然后替换该值。我不一定希望它验证失败并告诉用户删除逗号 - 我只是希望它在运行 min 规则之前删除逗号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:18:16.613

甚至不要让他们输入逗号

```
$("#amount").keyup(function(){
    var val = $(this).val().replace(/\,/g,'');
    $(this).val( val ); 
}); 
```

演示：http: [//jsfiddle.net/calder12/tdxKv/](http://jsfiddle.net/calder12/tdxKv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:23:22.903

试试这个[http://jsfiddle.net/MWjZr/](http://jsfiddle.net/MWjZr/)

```
$(function(){
  $("input[id=sometexboxid]").each(function(){
      this.value=this.value.replace(/,/g, "");
  }).on('keyup', function(){
      this.value=this.value.replace(/,/g, "");
  })
}); 
```

更多解释请参考[http://davidwalsh.name/javascript-replace](http://davidwalsh.name/javascript-replace)文章。

# android - 在更新我的新版本 apk 时解析包时出错

> ID：15415820
> 
> 赞同：3
> 
> 时间：2013-03-14T17:12:42.943
> 
> 标签：android, android-package-managers, android-parser

Android 专家，我已经安装了签名的 apk（1.6 版）并在我的服务器上上传了 apk（1.7 版）。现在我在从服务器更新我的 apk 时遇到了问题。我也有更新对话框，但最后我收到错误为 **“解析器错误，解析包时出现问题”。**. 我从一些链接中找到了一些解决方案，但它不起作用。

我正在等待您的建议、任何想法和您的解决方案。

感谢你。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:45:03.483

Yeppee ...终于我得到了我的解决方案..实际上我在“onPostExecute”上更新代码期间输入了错误的文件路径..所以这就是为什么我无法更新我的apk并且得到“解析器错误，解析包有问题”还有一件事如果您从服务器 U 更新您的 apk，则必须具有以下内容： - 安装的 Apk 名称和更新的 apk 名称应该相同。- 两个 Android 清单都包含相同的 android:minSdkVersion 值。（这里是我的 Android 平板电脑 4.0.3，我放了 minSdkVersion:14） - 最后，如果你使用 asp.net，你必须将 .APK MIME 类型添加到 IIS - Microsoft 服务器支持。在 IIS 中，需要添加一个 MIME 类型以允许 IIS 支持 .APK 文件类型。 [检查此链接](http://blog.skybyte.com/blog/network-helpdesk/adding-apk-mime-type-to-iis-microsoft-server-support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:54:50.277

您可以在代码中检查以下内容 1\. 已安装的 Apk 名称和更新的 Apk 名称应该相同。2\. 两个 Android Manifest 包含相同的 android:minSdkVersion 值。

# php - 为日期时间操作定义工作时间和周末

> ID：15415821
> 
> 赞同：1
> 
> 时间：2013-03-14T17:12:48.423
> 
> 标签：php, mysql

是否可以以某种方式定义工作日和周末的工作时间以输入 DATETIME 值（存储过程或其他内容）？示例：2 个日期时间列，timestart 和 timestop。它们之间的差始终是 1 小时，但如果是，例如 timestart = 20:30:00 Friday，则 timestop 应该等于 07:30:00 Monday，因为工作时间在星期五 21:00:00 结束，并且工作从星期一开始 - 07:00:00。

很抱歉解释太长，也很抱歉没有任何代码，我用谷歌搜索了所有内容，找不到有效的解决方案......

# java - java中的ssh（在另一台机器上运行命令）

> ID：15415822
> 
> 赞同：4
> 
> 时间：2013-03-14T17:12:48.900
> 
> 标签：java, ssh

我想知道是否有一种简单的方法可以作为 java 程序的一部分来执行此操作。

我希望能够 ssh 进入另一台机器并在该机器上执行命令。

一个简单的例子是：runtime.exec("say hello world"); （在 Mac 上）会有一个文本到语音引擎说你好世界。

有没有办法让java在另一台机器上运行这个方法？

另外，假设上述情况是可能的，有没有办法同时 ssh 进入多台机器？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:18:06.767

There are a lot of libraries to do this. I suggest [Ganymed SSH-2](http://www.ganymed.ethz.ch/ssh2/), that is also mentioned in the [official OpenSSH website](http://www.openssh.org/java.html). In the same site, you can also find other libraries that you can use for Java.

This is an example of `ls -r` command executed via SSH, using Ganymed SSH-2:

```
import ch.ethz.ssh2.Connection;
import ch.ethz.ssh2.Session;
import ch.ethz.ssh2.StreamGobbler;

[...]

public static ArrayList<String> lsViaSSH(String hostname, String username, String password, String dir) {
    ArrayList<String> ls = new ArrayList<String>();

    try
    {
        Connection conn = new Connection(hostname);

        conn.connect();

        boolean isAuthenticated = conn.authenticateWithPassword(username, password);

        if (isAuthenticated == false) {
            return null;
        }

        Session sess = conn.openSession();

        sess.execCommand("ls -r " + dir);

        InputStream stdout = new StreamGobbler(sess.getStdout());

        BufferedReader br = new BufferedReader(new InputStreamReader(stdout));

        while (true)
        {
            String line = br.readLine();
            if (line == null)
                break;
            ls.add(line);
        }

        sess.close();
        conn.close();
    }
    catch (IOException e)
    {
        return null;
    }

    if(StringUtils.isEmpty(ls.get(0)))
        return null;

    return ls;
} 
```

This is not the only function needed in order to execute a command via SSH, but I hope it could be a good starting point for you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:17:04.017

看看[JSC](http://www.jcraft.com/jsch/)

至于在同一时间执行？除非您打算生成多个线程来处理您的远程计算机列表，否则不是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:22:28.017

假设您所在的系统可以使用 ssh 命令并且[设置了 ssh 密钥](http://paulkeck.com/ssh/)以避免输入密码，那么最简单的方法就是

```
runtime.exec("ssh remote_comp 'say hello world'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:16:42.607

我建议你看看[Apache MINA SSHD](http://mina.apache.org/sshd-project/index.html)，它可以用来用 java 编写客户端和服务器

# c# - 有没有办法缩短我的代码？

> ID：15415825
> 
> 赞同：4
> 
> 时间：2013-03-14T17:12:54.033
> 
> 标签：c#, console

新的 C#er 在这里。我正在通过控制台应用程序进行基于文本的冒险。我做了一个地图命令，当你输入“地图”时，它会显示一个带有 X 表示你当前位置的地图。Int 变量 xCoordinate 和 yCoordinate 用于表示地图上的角色位置，并在您键入“向北”或“向南”等时更改 1。地图为 13x10，因此您的角色有 130 个可能的位置。我做了 130 种不同的 if 语句，效果很好。我的问题是是否有更有效/更简单的方法来做到这一点。这是我的代码的样子：

```
 public static void Map()

    {
        Console.ForegroundColor = ConsoleColor.Cyan;
        Console.WriteLine("\n" + xCoordinate + ", " + yCoordinate);
        Console.WriteLine("\nTowns are represented by a \"T\". Current location is shown as an \"X\".\n");
        Console.ForegroundColor = ConsoleColor.DarkGray;
        if ((xCoordinate == -7) && (yCoordinate == -4))
        {
            Console.Write("[ ][ ][ ][ ][ ][ ][ ][T][ ][ ][ ][ ][ ] 5\n");
            Console.Write("[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ] 4\n");
            Console.Write("[ ][ ][ ][ ][T][ ][ ][ ][ ][T][ ][ ][ ] 3\n");
            Console.Write("[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ] 2\n");
            Console.Write("[ ][ ][T][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ] 1\n");
            Console.Write("[T][ ][ ][ ][ ][ ][ ][T][ ][ ][ ][T][ ] 0\n");
            Console.Write("[ ][ ][ ][ ][T][ ][ ][ ][ ][ ][ ][ ][ ]-1\n");
            Console.Write("[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]-2\n");
            Console.Write("[ ][ ][T][ ][ ][ ][T][ ][ ][ ][T][ ][ ]-3\n");
            Console.Write("[X][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]-4\n");
            Console.Write("-7 -6 -5 -4 -3 -2 -1  0  1  2  3  4  5\n\n");
        }
        Console.ForegroundColor = ConsoleColor.White;
  } 
```

同样，我在 130 个不同的 if 语句中输入了 130 次地图，每次 X 都在其他地方。我认为会有更好的方法来做到这一点，但我不知道。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T17:15:19.733

您应该阅读并了解 for 之类[的](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)循环。

沿线的东西

```
for(var xCoordinate  = -10; xCoordinate  <=10; xCoordinate ++)
{
   for(var yCoordinate = 5; yCoordinate >= 5; yCoordinate --)
   {
      if (xCoordinate  == ... && yCoordinate == ..)
      { 
         Console.Write("[X]");
      }
      else
      { 
         Console.Write("[ ]");
      }
    }
    Console.WriteLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:22:11.943

```
 public static void Map()
    {
        Console.ForegroundColor = ConsoleColor.Cyan;
        Console.WriteLine("\n" + xCoordinate + ", " + yCoordinate);
        Console.WriteLine("\nTowns are represented by a \"T\". Current location is shown as an \"X\".\n");
        Console.ForegroundColor = ConsoleColor.DarkGray;

        for (int y = 5; y >= -4; y--)
        {
            for (int x = -7; x <= 5; x++)
            {
                Console.Write(yCoordinate == y && xCoordinate == x ? "[X]" : "[ ]");
            }
            Console.WriteLine(" {0}", y);
        }
        Console.Write("-7 -6 -5 -4 -3 -2 -1  0  1  2  3  4  5\n\n");
        Console.ForegroundColor = ConsoleColor.White;
    } 
```

# java - 弹簧，具有分隔符时的属性值

> ID：15415826
> 
> 赞同：1
> 
> 时间：2013-03-14T17:12:54.353
> 
> 标签：java, spring, properties, inject

我正在加载一个属性文件

```
@PropertySource("classpath:propFile.properties")
```

在此属性文件中，我有以下条目：

```
list.of.stg=a,b,c
```

此外，我这样做：

```
@Value("${list.of.stg}")public void setSomeList(...)
{in the method, the parameter has only the value a!!!}
```

你能告诉我一种达到完整价值观的方法吗

```
list.of.stg
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:43:53.213

尝试

```
@Value("#{T(org.springframework.util.StringUtils).commaDelimitedListToStringArray(environment['list.of.stg'])}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:19:51.043

由于属性值是作为 a 传入的，因此`String`您必须使用，但您可以与[Spring EL](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)`String#split`结合使用：

```
@Value("#{'${list.of.stg}'.split(',')}") 
public void setSomeList(List<String> list) {
   this.myList = list;
} 
```

或者只是在类成员变量上

```
@Value("#{'${list.of.stg}'.split(',')}") 
private List<String> myList; 
```

* * *

与使用`@PropertySource`注解时一样，不要忘记创建一个`PropertyPlaceholderConfigurer` `@Bean`来加载必要的属性文件。

相关：[@Value 和 ArrayList](http://forum.springsource.org/showthread.php?129563-Value-and-ArrayList)

# c - 有没有办法使用 C 宏在 .S 文件中生成 asm 代码？

> ID：15415827
> 
> 赞同：2
> 
> 时间：2013-03-14T17:12:54.620
> 
> 标签：c, assembly

我必须生成不断调用不同 C 函数的冗余 asm 代码

我正在尝试做类似的事情

```
#define CODE_GEN(func) push a \
         call func
         pop a 
```

调用类似的东西

```
CODE_GEN(foo) 
```

会产生

```
bash-4.1$ gcc -E mk.S 
# 1 "mk.S"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "mk.S"
# 1 "asm_gen.h" 1
# 2 "mk.S" 2
# 13 "mk.S"
pusha call foo popa iret 
```

但这在编译中失败

```
bash-4.1$ gcc -m32 mk.S 
mk.S: Assembler messages:
mk.S:13: Error: junk `foo popa iret' after expression
mk.S:13: Error: suffix or operands invalid for `pusha' 
```

有没有办法分隔在 .S 文件中单行编写的 asm 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:26:50.413

是的，通过使用分号，请参阅[其他答案](https://stackoverflow.com/a/22138675/1717300)。C 宏扩展为没有换行符的单个字符串，但分号可以解决这个问题。

您还可以使用[GNU 汇编器宏](http://www.sourceware.org/binutils/docs-2.12/as.info/Macro.html)。这是完全未经测试的，可能是错误的：

```
.macro CODEGEN func
push a
call \func
pop a
.endm 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-03T04:29:03.200

分号';' 可以用来代替换行符。

所以像

```
#define CODE_GEN(func) push a; \
call func; \
pop a; 
```

将编译并工作

# android - 将数据发送到网站 -Android

> ID：15415831
> 
> 赞同：3
> 
> 时间：2013-03-14T17:13:04.340
> 
> 标签：android

有一个网站，其中有几个下拉框。我制作了一个从网站中提取值的 android 应用程序。现在网站中有一个搜索框，在网站中我们可以从框中选择选项并按提交，然后它会根据选择的选项给出结果。我需要在我的应用程序中做同样的事情。需要帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:17:22.750

要将数据发布到网站，您必须向其发送 HTTP POST 请求。您可以将要发送的数据放入数组中并将其发送到 php 脚本。

您必须弄清楚您的 String 使用哪个 ID 发送到服务器。在我的示例中，它是 your_1 和 your_2。这对每个网站都是不同的。所有新的浏览器都可以在开发者控制台或其他东西中读出这一点。

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("your_1", "data 1"));
    nameValuePairs.add(new BasicNameValuePair("your_2", "data 2"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

发送此信息后，您必须获得可以使用 StringBuilder 读出的响应。

```
private StringBuilder inputStreamToString(InputStream is) {
String line = "";
StringBuilder total = new StringBuilder();

// Wrap a BufferedReader around the InputStream
BufferedReader rd = new BufferedReader(new InputStreamReader(is));

// Read response until the end
while ((line = rd.readLine()) != null) { 
    total.append(line); 
}

// Return full string
return total;
} 
```

现在您有了响应，您可以使用 RegEx 强调您的特殊文本。这有点棘手，但这[会对](http://gskinner.com/RegExr/)您有所帮助。

# html - FireFox 中的 HTML5 视频限制？

> ID：15415832
> 
> 赞同：1
> 
> 时间：2013-03-14T17:13:08.653
> 
> 标签：html, html5-video

似乎 FF 一次只能让我在一个页面上拥有 24 个活动视频，这比我想要的少一个！有什么想法吗？ [http://graysonearle.com/bluemen/](http://graysonearle.com/bluemen/)

```
<div id="container">
<script type="text/javascript">
    for (var i=0;i< vid_count;i++) {
        document.write('<div class="vidBox" id="box'+i+'">');
        document.write('    <video class="vid" loop="loop" preload="auto" id="vid'+i+'">');
        document.write('        <source src="videos/0.mp4?a='+i+'" type="video/mp4">');
        document.write('        <source src="videos/0.webm" type="video/webm">');
        document.write('    </video>');
        document.write('</div>');
    }

var videos = document.getElementsByTagName('video');

for(var i = 0, ii = videos.length; i < ii; i++) {
    videos[i].addEventListener('canplaythrough',enablePlayback,false);
}

var videosLoaded = 0;

function enablePlayback(e) {
    videosLoaded++;
    if(videosLoaded == vid_count) {
        // enable a play button or do whatever you want
        // in this case: start playing all the videos at once
        for(var i = 0; i < videos.length; i++) {
            //alert(i);
            videos[i].play();
        }
    }
}
</script>
</div> 
```

如果我之后手动 videos[24].play() ，则 vid 23 将无法播放，依此类推。这让我相信我遇到了允许的视频数量的硬性限制。

编辑：我只是让我的浏览器打开了一会儿，并意识到可能在页面坐在那里 3-5 分钟后，第 25 个视频开始播放，尽管有一些严重的不同步。

# rest - 使用超媒体链接时如何处理对 REST 资源的更新

> ID：15415834
> 
> 赞同：4
> 
> 时间：2013-03-14T17:13:15.443
> 
> 标签：rest, hateoas

我正在使用一个 REST-ful API，其中的资源是相互关联的。资源相互引用，这些引用可能被创建或删除。当它们使用超链接相互引用时，我有点不确定如何支持将资源关联在一起。

下面是一个简单的示例，其中包含两个资源 A 和 B。

> ```
> Resource A:
>   name: integer
>   list_b: [list of resource B]
> 
> Resource B:
>   id: integer
>   description: String 
> ```

现在，A 的文档中不包含 B，而是指向它的链接。使用超媒体时，它可能看起来像这样：

> ```
> Resource A:
> {
>     id: 1,
>     list_b: [
>         { id: 1, href: "https://server/api/b/1" },
>         { id: 2, href: "https://server/api/b/2" }
>     ]
> } 
> ```

如果用户想在 A 的列表中添加或删除 B 引用之一，考虑到超链接的存在，他们如何做到这一点？我希望用户能够在一次 PUT 操作中更新整个 A 资源，但输出中没有任何内容表明 B 需要哪个值。用户使用以下内容执行 PUT 对我来说很有意义：

> ```
> Resource A:
> {
>     id: 1,
>     list_b: [
>         { id: 1, href: "https://server/api/b/1" },
>         { id: 2, href: "https://server/api/b/2" },
>         { id: 3 },
>     ]
> } 
> ```

并像这样接收更新的资源（在响应中）：

> ```
> Resource A:
> {
>     id: 1,
>     list_b: [
>         { id: 1, href: "https://server/api/b/1" },
>         { id: 2, href: "https://server/api/b/2" },
>         { id: 3, href: "https://server/api/b/3" }
>     ]
> } 
> ```

我担心的是，用户在更新资源 A's 时不一定知道要在资源​​中包含什么`list_b`。

在处理从一个资源到另一个资源的超链接时，创建和更新应该如何工作？是否应该允许客户端更新链接的一部分 (the `id`)，还是应该要求他们更新链接的两个部分？

**注意：**我知道另一种方法可能是公开资源 A 的子 URL。它可以公开`list_b`为可通过 HTTP 操作的资源（允许客户端在列表资源本身上使用 POST、PUT 和 DELETE）。但是当 A 包含对其他资源类型的多个引用时，这似乎不太合理。引用另一个字段的每个字段都可能需要一个子 url，如果有 10 个以上的字段，则该子 url 很笨拙，并且需要多个 HTTP 请求来更新资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:02:43.310

HATEOAS 在 RESTful 接口中将资源连接在一起，这里不清楚您所描述的附属对象作为独立资源是否真的有意义。HATEOAS 的“AS”部分提醒我们网页在 Web 应用程序中作为“资源”所扮演的角色。每个 Web 页面实际上是应用程序状态的交互式表示（在这种情况下，“应用程序”是一个经典的多页面 Web 应用程序），并且到其他资源的超链接为用户提供了到其他应用程序状态的转换。

RESTful Web API 以 JavaScript 代码而不是人类作为其客户端，自然是面向数据访问的，因此很少有资源采用“应用程序状态”形式*本身*。在传统的 Web 应用程序中，您可以绘制状态转换图，并清楚地看到状态之间的联系，从而清楚地看到资源之间的联系。在 RESTful API 中，被动数据资源之间的边界更多地受到客户端/服务器交互的效率和其他微妙力量的推动。

那么你这里的附属对象（“B”）真的需要被表示为一等资源吗？是否存在前端将独立于它们参与的聚合（“A”）枚举或以其他方式访问它们的实例？

如果答案是“否”，那么它们显然不应该在“A”结构中以超文本形式表示。但是，我认为答案是“是”，并且您也有充分的理由提供您所指的所有其他附属对象作为独立资源。在这种情况下，无论如何都需要以路由和控制器的形式进行一些接口工作，以支持所有这些资源，因为您的应用程序可能提供了一种单独操作它们的方法，或者至少是查询它们（通过您的示例中的超链接）。

在这种情况下，表示您的“B”对象集合（例如，“server/api/b”）的路径的 POST 可以在响应的“位置”标头值中返回一个 URL，因为应该创建新资源的 POST做。当您的用户以交互方式将新的“B”添加到您网页上属于“A”的列表时，您的前端可以首先发布新的“B”，成功时通过位置标头获取其 URL。然后，它可以将该链接合并到其“A”对象内的列表表示中，然后再放置更新的“A”。

ID 值有点麻烦，因为您很想通过从 URL 的文本中提取 ID 值来破坏后端的封装。真正的 HATEOAS 狂热者让他们的 RESTful API 产生混淆、散列或其他难以理解的 URL，专门用来阻止客户端的这种封装破坏。更好的是新“B”对象的 POST 在其响应正文中返回新“B”对象的完整表示，包括其 ID，以便客户端可以重构完整对象并从中提取 ID，从而缩小与资源本身的耦合，而不是获取资源的 RESTful 接口的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T13:05:30.600

You should also look at the [`LINK` method](https://datatracker.ietf.org/doc/html/draft-snell-link-method-02):

```
LINK /ResourceA/1 HTTP/1.1
Link: <http://example.com/ResourceB/3>; rel="list_b"
...

204 Yeah Fine, Whatever 
```

This tells /ResourceA/1 to link to /ResourceB/3 using the relationship "list_b".

# python - 如何在 python 中以原始 SQL 提交更新

> ID：15415835
> 
> 赞同：0
> 
> 时间：2013-03-14T17:13:17.293
> 
> 标签：python, sql, django, postgresql

```
cursor = connection.cursor()
cursor.execute("UPDATE public.rsvp SET status=TRUE WHERE rsvp_id=%s", [rsvp_id])
cursor.execute("SELECT status, rsvp_id FROM public.rsvp WHERE rsvp_id=%s", [rsvp_id])
row = cursor.fetchall() 
```

当我在我的 Django 项目中执行此操作时，我得到了我期望看到的返回的行，但后来当我为同一行选择查询时，它看起来好像该语句从未真正运行过。在我的代码中，“状态”列默认为 NULL。运行后，我仍然在我的表中看到 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:16:43.867

您没有指定要处理的数据库，这可能会在某种程度上改变答案。但是，对于大多数数据库连接，您需要完成`connection.commit()`才能真正保存数据库上的更改。这包括更新和插入操作。失败`commit()`通常会导致操作回滚。

# assembly - 使用 NASM 的回文

> ID：15415838
> 
> 赞同：2
> 
> 时间：2013-03-14T17:13:26.623
> 
> 标签：assembly, x86, nasm

我写了一个查找回文的代码。但是我的代码在所有情况下都显示输出“不是 pallindrome”。我的程序如下：

```
section .data
    a db "mommom",0
    b equ $-a

    msg1 db "is pallindrome",10,0
    msg2 db "is not pallindrome",10,0
    msg3 db "",10,0
section .text
    global main
    extern printf
main:
    nop
    xor eax,eax
    xor ebx,ebx
    mov eax,a       ;starting add
    mov ebx,b
    add eax,ebx
    dec eax         ;will use to indicate the last letter of a

    xor ebx,ebx
    xor edx,edx
    xor ecx,ecx

start:
    inc ecx
    cmp ecx,(b/2)       ;check will run for half of the word
    jle check
    jmp pal
check:  
    mov dl,byte[eax]    ;last letter
    cmp byte[a+ebx],dl  ;frst letter compares with last letter
debug:
    pusha           ;debugging purpose.Used to catch the first letter of a
    push byte[a+ebx]
    push msg3
    call printf
    add esp,8
    popa
checkContinue:
    inc ebx         ;use for check segment
    dec eax
    je start
    jne nonPal
pal:
    pusha
    push msg1
    call printf
    add esp,4
    popa
    jmp done
nonPal:
    pusha
    push msg2
    call printf
    add esp,4
    popa
    jmp done
done:
     nop 
```

Antoine Mathys 已经为我们提供了上述代码的适当版本，指出了此代码中出现的错误。他的评论部分对我们这样的新手来说非常重要。在这里，在上面的这个程序中，我试图打印驻留在 ebx 寄存器中的每个字符，但我没有得到它。如果任何导师可以解决这部分问题，我将不胜感激。它将帮助我学习如何从字符串中获取每个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:53:27.113

这里是：

```
 BITS 32
        section .data
        string db "mommom"
        length equ $ - string

        msg1 db "is pallindrome",0
        msg2 db "is not pallindrome",0

        section .text
        global main
        extern puts

main:
        mov ebx, string                   ; start of word                                 
        mov eax, (string + length - 1)    ; end of word                                   

        mov ecx, (length / 2)             ; check will run for half of the word           
check:
        mov dl, [ebx]                     ; compare first and last letters                
        cmp [eax], dl
        jne failure
        inc ebx
        dec eax
        loop check

        ;; success                                                                  
        push msg1
        call puts
        add esp,4
        jmp done

failure:
        push msg2
        call puts
        add esp,4

done:
        ret 
```

一些备注：

*   不要在要测试的单词中添加零。这将使它成为一个非回文。
*   您的代码充满了不必要的指令（pusha/popa、nop、清除 edx，但仅使用 dl，...）。尽量保持代码尽可能简单。
*   不要使用异或技巧，写清楚
*   使用有意义的符号名称
*   利用汇编算术表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T11:06:47.690

我不断地看到这些回文问题以及来自初学者的笨重代码，这让我对编写一个真正有效的版本产生了兴趣。我的 byte-at-a-time 循环应该在 Intel Haswell 上以每个时钟一次迭代运行，但在早期的 Intel 上较慢（因为循环将超过 4 个融合域 uop，因为背靠背的宏融合有限cmp/jcc）。

另请参阅下面的方法使其不区分大小写。

* * *

**一次检查一个以上的字节是有效的，即使在中间的交叉处有重叠**：

```
 abcdcba
 abcd
    dcba    ; overlap by one
  bcdc
   cdcb     ; overlap by two 
```

加载一些字节，用 、 Silvermont / `bswap`Haswell `movbe`、 SSSE3`pshufb`甚至`rol ax,8`//反转顺序。然后与应该匹配的相同字节数进行比较。`rol eax,16``rol ax,8`

* * *

添加您喜欢的结果打印。我只是返回一个退出状态。

所有这些在 32 位中都一样，但我使用了 64 位，因为寄存器调用约定避免了堆栈操作导致代码混乱。

请注意使用本地标签 ( `.label`) 以避免使用相同标签名称的相似代码块之间的冲突。

```
DEFAULT rel
section .text

ALIGN 16
global check_palindrome
                   ; AMD64 SysV calling convention
check_palindrome:  ; (size_t len /*rdi*/, const char *str /*rsi*/)
;;returns bool
    cmp    rdi, 8
    jb   check_palindrome_byte_at_a_time      ; tailcall the version that handles small inputs
    add    rdi, rsi      ; rdi = end pointer
;ALIGN 16  ; probably not worth it, depending on the CPU
.palin_loop:
    lodsq                ; rax = [rsi], rsi+=8\.  lodsd/q is only 2 uops on Haswell
    bswap  rax
    sub    rdi, 8
    cmp    rax, [rdi]
    jne  .not_palin
    cmp    rsi, rdi
    jb   .palin_loop          ; stop looping when the pointers cross
    ;; Loop has 7 uops on Haswell, so it can sustain one iteration (8 bytes in each direction) per 2 cycles.
    ;; 9 uops on SnB, where lodsq is 3 uops, and only one of cmp/jcc pairs can macro-fuse.  For SnB, use mov / add instead of lodsq
    ;; with unrolling, we might get this down closer to 2x8B per clock, instead of per 2 clocks.
    ;; or with SSE/AVX, 2x16B per clock.  Probably not 2x32B per clock with AVX, due to needing two shuffles.  (no cross-lane byte shuffle until AVX512)

; input was a palindrome
    mov    eax, 1             ; return true
    ret

.not_palin:
    xor    eax,eax            ; return false
    ret

ALIGN 16
;; helper function with the same signature as the main version
; only needed for small strings, not for unaligned, or not-multiple-of-8
    ; assume that rdi < 2^32 so we can use edi interchangeably, for smaller code-size.
    ; If our prototype was (unsigned int, const char*), we'd have to mov ecx, edi  or something.
    ;  (moving to a different reg is preferable to mov edi,edi  because mov-elimination never works on mov same,same)
check_palindrome_byte_at_a_time:
    test   edi,edi          ; or cmp edi, 1  since every 1-char string is also a palindrome
    jz  .is_palin           ; the empty string is a palindrome

;ALIGN 16
.palin_loop:
    mov    al, [rsi + rdi - 1] ; 2-register addresses can't micro-fuse on SnB-family, but this is a pure load that doesn't need to micro-fuse with anything.
    cmp    al, [rsi]
    jne  check_palindrome.not_palin
    inc    rsi                 ; pointer moves forward
    sub    edi, 2              ; index counts down towards zero twice as fast
    ja   .palin_loop           ; treat counter as unsigned.  Not jae, because a byte is always equal to itself.
;;; Haswell and later can fuse both branches even when they hit the decoders in the same cycle
;;; so this loop should hopefully be 4 fused-domain uops and run at one iteration per clock

.is_palin:
    mov    eax, 1             ; return true
    ret
; .not_palin:  ; shared code with other check_palindrome version

    global main
    extern strlen
ALIGN 16
main:
    ;; return !check_palindrome(strlen(argv[1]), argv[1])

    ;mov    edi, inputstr_len
    ;mov    esi, inputstr
    mov    rdi, [rsi+8]       ; argv[1]
    push   rdi                ; save it, and align the stack
    call   strlen
    mov    rdi, rax
    mov    rsi, [rsp]         ; could pop here and take advantage of the fact that we know check_palindrome doesn't care about the stack
    call   check_palindrome
    pop    rdi                ; shorter than  add rsp,8  and faster on Intel CPUs with a stack engine, given the surrounding instructions
    xor    eax, 1             ; we know check_palin returns a _Bool, so flip it
    ret

;;; Unused, but improved in case you do want to use it
section .rodata
    inputstr    db "mommom"
    inputstr_len equ $-inputstr

    msg_palin   db "is palindrome",10,0
    msg_nopalin db "is not palindrome"   ; newline an terminating zero are on the next line, with their own label
    msg_newline db 10,0 
```

（关于如何[在 Godbolt 上](https://gcc.godbolt.org/#compilers:!((compiler:g530,options:'-xc+-std%3Dgnu11+-O3+-Wall+-march%3Dhaswell',source:'int+f(int+x)+%7B+return+!!x%3B+%7D%0A_Bool+fbool(_Bool+x)+%7B+return+!!x%3B+%7D%0A%0A/*int+main(int+argc,+char**argv)+%7B%0A++return+puts(argv%5B1%5D)%3B%0A%7D%0A*/%0A%23include+%3Cstring.h%3E%0A%23include+%3Cstdint.h%3E%0A%23include+%3Cstdbool.h%3E%0A%0Abool+check_palindrome(unsigned+long+len,+const+char*str)%3B%0Aint+main(int+argc,char**argv)%7B%0A++return+!!check_palindrome(strlen(argv%5B1%5D),+argv%5B1%5D)%3B%0A%7D')),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3)`main()`编写一些来自gcc 输出的灵感。编译器输出通常是一个很好的起点。）

* * *

### 测试和工作：

```
$ yasm -Worphan-labels -gdwarf2 -felf64 palindrome.asm && gcc palindrome.o -o palindrome

$ ./palindrome '' && echo "true" || echo "false"
true
$ ./palindrome 1 && echo "true" || echo false
true
$ ./palindrome abccba && echo "true" || echo "false"
true          # even size: pair of middle chars
$ ./palindrome abcdcba && echo "true" || echo "false"
true          # odd size: single middle char
$ ./palindrome abcdeba && echo "true" || echo "false"
false

$ ./palindrome 'ab bcdcb 1234 bcdcb baab bcdcb 4321 bcdcb ba' && echo "true" || echo "false"
true
$ ./palindrome 'ab bcdcb 1234 bcdcb bab bcdcb 4321 bcdcb ba' && echo "true" || echo "false"
true
$ ./palindrome 'ab bcdcb 1234 bcdcb baab bcdcb 4321 bcdcb baa' && echo "true" || echo "false"
false

$ ./palindrome && echo "true" || echo "false"
Segmentation fault (core dumped)   # main doesn't check argc 
```

* * *

### 不区分大小写：

除了字节反转一个块，在比较之前强制两个块的字母字符为小写。使用 ASCII，[这很容易](https://stackoverflow.com/a/35936844/224132)。我链接的那个答案甚至有一个大小写翻转的 SSE 向量实现，可以对其进行修改以仅将所有字母字符强制为相同的大小写（或者将最后一个替换为`pxor`，`por`或者使用与比较结果的混合作为控件，而不是`pandn`/ `por`.)

* * *

### 展开：

除了使用位移（`[rsi+8]`、、`[rdi-8]`等）来保存加/减指令外，您还可以通过 ORing 或 ANDing 一些比较结果一起减少分支的数量。这可能会或可能不会保存任何东西。在完全不受[部分寄存器合并减速](https://stackoverflow.com/questions/41573502/why-doesnt-gcc-use-partial-registers)的 CPU （例如 AMD）上，这可能是一个胜利：

```
.palin_loop:
    xor   eax,eax   ; inside the loop to break the false dependency
    xor   edx,edx

    movbe  ... / cmp   ...       ; movbe is a load and endian swap in one insn.  On Haswell it just saves code-size, not uops.  On Silvermont it's a win
    setne  dl
    movbe  rcx, [rsi+rdi-16] / cmp  [rsi+8], rcx
    setne  dh
    shl    edx, 16    ; DH merging takes a cycle on Haswell
    ... repeat setting dl/dh so edx holds 4 results from four 8B checks

    movbe ... / cmp   ...
    setne  al
    movbe ... / cmp   ...
    setne  ah
    shl    eax, 16
    ... repeat setting al/ah

    or    eax, edx             ; or unroll twice as much, and use rax,rdx
    jnz  .not_palin 
```

使用 SSE，您已经在整数 reg 中比较结果，`pmovmskb`而不需要 a `setcc`，将结果与运算结果放在一起是更大的胜利。

* * *

### AVX：

看起来像一次字节版本的循环结构是一个想法，我们使用 pshufb 来反转整个向量的顺序。`pmovmskb`和测试位掩码是处理矢量比较结果的一个非常标准的习惯用法。它比 快`PTEST`，因为`PTEST`是 2 微指令并且不能进行宏熔断。

```
DEFAULT rel

section .rodata
ALIGN 16
bytereverse_shuffle db 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0

section .text

ALIGN 16
global check_palindrome_AVX1
check_palindrome_AVX1:
    cmp         rdi, 32
    jb        check_palindrome_byte_at_a_time   ; tailcall the version that handles small inputs

    vmovdqa    xmm5, [bytereverse_shuffle]

;;ALIGN 16 ; NASM syntax doesn't have an equivalent for the GNU assembler's align-if-padding-will-be-less-than-N-bytes .p2align 4,,8   (4 meaning 2^4 for power-of-2 align)
;; loop alignment is less important for tiny loops that should fit in the loop buffer

.palin_loop:
    vmovdqu     xmm0, [rsi + rdi - 16]
    vpshufb     xmm0, xmm0, xmm5  ; bswap
;;; for AVX2 ymm:   vperm2i128 ymm0, ymm0, ymm0, 1  ; swap hi and lo lanes
    vpcmpeqb    xmm0, xmm0, [rsi] ; all we're gaining from AVX is folding this potentially-unaligned memory operand.  Everything else works with SSE
    vpmovmskb   eax, xmm0
    cmp         eax, 0xffff     ; check that all 16bits are set -> all 16bytes matched
    jne       .not_palin
    add         rsi, 16         ; pointer moves forward
    sub         rdi, 32         ; index counts down towards zero twice as fast
    jae       .palin_loop       ; not ja: we still need to check 16 reversed bytes against the same 16 bytes if we exactly meet in the middle
;;; fused-domain uops: 7 for Haswell, 8 for SnB, so it should run one iteration per 2c
;;; An SSSE3 version that needs an unaligned load separate from pcmpeq will be 8 uops (or 9 on pre-Haswell)

.is_palin:
    mov         eax, 1
    ret
.not_palin:
    xor         eax,eax
    ret 
```

# c - 如何在 Arduino 或 C 中调用函数并检索两个返回值？

> ID：15415839
> 
> 赞同：2
> 
> 时间：2013-03-14T17:13:29.993
> 
> 标签：c, arduino

我做了一个函数，我想检索两个返回，而不是一个返回，例如这个例子：

```
long Conv(double num){      
    long a,b;
    a = floor(num);
    b = num * pow(10,6) - a * pow(10,6);

    return a;
    return b;
} 
```

当我调用函数时

```
long a = Conv(30.233456); 
```

问题是：我如何检索`b`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:15:14.613

你不能一次返回两次。

您可以通过引用将 b 传递给您的函数。

```
yourfunction( long a , long* b )
{    
    *b = a + 10;
    //more code

return a;
}

a = yourfunction(a , &b ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:16:14.590

**您不能从 C 中的函数返回多个值。**要么返回 a `struct`，要么通过引用传递并在函数中修改。

示例 1：`struct`

```
struct ab {
  long a;
  long b;
}

struct ab Conv(double num) {
  struct ab ab_instance;

  ab_instance.a = floor(num);
  ab_instance.b = num * pow(10,6) - a * pow(10,6);

  return ab_instance;
} 
```

示例 2：`pass b by reference`

```
long Conv(double num, long& b) {
  long a;
  a = floor(num);
  b = num * pow(10,6) - a * pow(10,6);

  return a;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:17:16.863

Armin 有点回答它，但这里有一些示例代码：

```
int get_both(int* b) {
    a = 0;
    *b = 1;
    return a;
} 
```

# simplepie - Simplepie RSS - 我只需要在描述中获取图像 URL 以显示为缩略图

> ID：15415840
> 
> 赞同：0
> 
> 时间：2013-03-14T17:13:50.737
> 
> 标签：simplepie

如何从 rss 提要的描述节点获取图像。我需要获取图像的 URL，以便可以将其显示为文章标题旁边的缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:39:12.417

我发誓我已经多次回答过这个问题。更精通 StackOverflow 的人链接到我以前的答案之一。

**从字面上看，这是五个 SimplePie 问题。**你甚至搜索过吗？如果你搜索你会找到[答案](https://stackoverflow.com/questions/15306738/get-youtube-thumbnail-simplepie)，展示了如何查看内容并找到第一张图像或任何图像......

[我已经回答](https://stackoverflow.com/questions/9628590/can-simplepie-grab-images-from-feeds/9637141#9637141)了这个问题六次，有人做了一些事情来合并它们，有人用 StackOverlow-fu。

简短的回答是您必须解析 HTML。我不确定您是否意味着图像在内容中而不是描述中，无论如何，您使用 html_simple_dom 之类的东西来逐步浏览 HTML 并找到您想要的图像。

如果提要支持附件或缩略图，或者是 MediaRSS 标准的一部分，则可能不需要额外的工作，但并非所有提要都是平等的。我知道我已经在某个地方给出了更好的答案，只需搜索这个网站或谷歌更多。

# c# - 如何在GridView中实现行排序？

> ID：15415845
> 
> 赞同：1
> 
> 时间：2013-03-14T17:14:08.080
> 
> 标签：c#, asp.net, sorting, gridview

我在 asp.net 中开发应用程序，如何在 GridView 控件上执行以下操作？

GridView 控件有一个带有 DropDownList（选择 1、2、3、4...）的“序列”列以允许行排序，用户可以从 DropDownList 中选择数字作为行序列。

序列不应重复，意味着所选数字不应出现两次。

可以做到吗？请指教。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-20T19:37:14.627

如果我理解，您希望能够使用 DropDownList 对行进行排序，该 DropDownList 是每行中的一个单元格。您希望每一行上的此 SortOrder 值都具有唯一值（因此没有行具有相同的 SortOrder）。您可以通过一些编程来完成此操作……您可以实现一些东西来验证每个选择都是唯一的。或者，当您在一行上选择“3”时，然后从其他框的 DropDownList 中删除“3”作为选择。

对于排序，DataView 有帮助，您可以将其转回表格。

```
DataView dv = yourGridView.DefaultView;
dv.Sort = "SortOrder desc";
DataTable newSortedDt = dv.ToTable(); 
```

# c# - MongoDB：在 C# 驱动程序中构建查询

> ID：15415850
> 
> 赞同：5
> 
> 时间：2013-03-14T17:14:22.273
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver

我堆叠在 C# 驱动程序中构建这个 Mongodb 查询：

```
{ 
    Location: { "$within": { "$center": [ [1, 1], 5 ] } },
    Properties: {
        $all: [
            { $elemMatch: { Type: 1, Value: "a" } },
            { $elemMatch: { Type: 2, Value: "b" } }
        ]
    }
} 
```

接下来的事情：

```
var geoQuery = Query.WithinCircle("Location", x, y, radius);
var propertiesQuery = **?**;
var query = Query.And(geoQuery, propertiesQuery); 
```

* * *

添加：

以上查询取自我的另一个问题： [MongoDB：匹配多个数组元素](https://stackoverflow.com/questions/15364920/mongodb-match-multiple-array-elements) 欢迎您参与其解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:53:05.617

如果您想获得确切的查询，请按照以下方法：

```
// create the $elemMatch with Type and Value
// as we're just trying to make an expression here, 
// we'll use $elemMatch as the property name 
var qType1 = Query.EQ("$elemMatch", 
    BsonValue.Create(Query.And(Query.EQ("Type", 1),
                     Query.EQ("Value", "a"))));
// again
var qType2 = Query.EQ("$elemMatch", 
    BsonValue.Create(Query.And(Query.EQ("Type", 2), 
                     Query.EQ("Value", "b"))));
// then, put it all together, with $all connection the two queries 
// for the Properties field
var query = Query.All("Properties", 
    new List<BsonValue> { 
        BsonValue.Create(qType1), 
        BsonValue.Create(qType2)
    }); 
```

鬼鬼祟祟的部分是，虽然各种`Query`方法的许多参数都需要 s 而不是查询，但您可以通过执行以下操作从实例`BsonValue`创建实例：`BsonValue``Query`

```
// very cool/handy that this works
var bv = BsonValue.Create(Query.EQ("Type", 1)); 
```

发送的实际查询与您的原始请求完全匹配：

```
query = {
  "Properties": {
    "$all": [ 
        { "$elemMatch": { "Type": 1, "Value": "a" }}, 
        { "$elemMatch": { "Type": 2, "Value": "b" }}
    ]
  }
} 
```

（我也从未见过这种`$all`使用方式，但显然，这听起来好像[还没有记录](https://stackoverflow.com/questions/9824341/multiple-elemmatch-expressions-for-matching-array-values-using-all-in-mongodb)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:22:24.840

虽然我可以确认您发布的查询在我的机器上有效，但[文档`$all`](http://docs.mongodb.org/manual/reference/operator/all/)似乎表明它*不应该接受表达式或查询*，而只接受值：

```
Syntax: { field: { $all: [ <value> , <value1> ... ] } 
```

`<expression>`（如果允许查询，则文档使用，[比较`$and`](http://docs.mongodb.org/manual/reference/operator/and/)）。因此，C# 驱动程序只接受一个数组`BsonValue`而不是`IMongoQuery`.

但是，以下查询应该是等效的：

```
{
    $and: [
        { "Location": { "$within": { "$center": [ [1, 1], 5 ] } } },
        { "Properties" : { $elemMatch: { "Type": 1, "Value": "a" } } },
        { "Properties" : { $elemMatch: { "Type": 2, "Value": "b" } } }   
    ]
} 
```

转换为 C# 驱动程序为

```
var query = 
Query.And(Query.WithinCircle("Location", centerX, centerY, radius),
Query.ElemMatch("Properties", Query.And(Query.EQ("Type", 1), Query.EQ("Value", "a"))),
Query.ElemMatch("Properties", Query.And(Query.EQ("Type", 2), Query.EQ("Value", "b")))); 
```

# ruby-on-rails - 自定义表单后的自定义重定向 - ROR

> ID：15415853
> 
> 赞同：1
> 
> 时间：2013-03-14T17:14:29.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个点模型。我出于某种目的使用了两种不同的形式（经典的编辑/现场新建和较小的一种形式的 Chrome 扩展）。

问题：如何使自定义表单重定向到“感谢页面”而不是重定向到新点？

# python - 强制 numpy 将列表保留为列表

> ID：15415858
> 
> 赞同：6
> 
> 时间：2013-03-14T17:14:38.420
> 
> 标签：python, numpy

`x2_Kaxs`是一个 Nx3 numpy 列表数组，这些列表中的元素索引到另一个数组。我想最终得到一个 Nx3 numpy 数组，其中包含这些索引元素的列表。

```
x2_Kcids = array([ ax2_cid[axs] for axs in x2_Kaxs.flat ], dtype=object) 
```

这会输出一个 (N*3)x1 的 numpy 数组。伟大的。这几乎适用于我想要的。我需要做的就是重塑它。

```
x2_Kcids.shape = x2_Kaxs.shape 
```

这有效。`x2_Kcids`变成 Nx3 数组的 numpy 数组。完美的。

除了所有列表中`x2_Kaxs`只有一个元素。然后它将它展平为一个 Nx3 整数数组，我的代码期望稍后在管道中出现一个列表。

我想出的一个解决方案是附加一个虚拟元素，然后将其弹出，但这非常难看。有更好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:14:49.887

您的问题实际上与大小为 1 的列表无关，而与所有相同大小的列表有关。我创建了这个虚拟样本：

```
ax2_cid = np.random.rand(10)
shape = (10, 3)

x2_Kaxs = np.empty((10, 3), dtype=object).reshape(-1)
for j in xrange(x2_Kaxs.size):
    x2_Kaxs[j] = [random.randint(0, 9) for k in xrange(random.randint(1, 5))]
x2_Kaxs.shape = shape

x2_Kaxs_1 = np.empty((10, 3), dtype=object).reshape(-1)
for j in xrange(x2_Kaxs.size):
    x2_Kaxs_1[j] = [random.randint(0, 9)]
x2_Kaxs_1.shape = shape

x2_Kaxs_2 = np.empty((10, 3), dtype=object).reshape(-1)
for j in xrange(x2_Kaxs_2.size):
    x2_Kaxs_2[j] = [random.randint(0, 9) for k in xrange(2)]
x2_Kaxs_2.shape = shape 
```

如果我们在这三个上运行您的代码，则返回具有以下形状：

```
>>> np.array([ax2_cid[axs] for axs in x2_Kaxs.flat], dtype=object).shape
(30,)
>>> np.array([ax2_cid[axs] for axs in x2_Kaxs_1.flat], dtype=object).shape
(30, 1)
>>> np.array([ax2_cid[axs] for axs in x2_Kaxs_2.flat], dtype=object).shape
(30, 2) 
```

所有长度为 2 的列表的情况甚至不会让你重塑为`(n, 3)`. 问题是，即使使用`dtype=object`，numpy 也会尝试尽可能多地对您的输入进行 numpy*化*，如果所有列表的长度相同，这将一直到单个元素。我认为你最好的选择是预先分配你的`x2_Kcids`数组：

```
x2_Kcids = np.empty_like(x2_Kaxs).reshape(-1)
shape = x2_Kaxs.shape
x2_Kcids[:] = [ax2_cid[axs] for axs in x2_Kaxs.flat]
x2_Kcids.shape = shape 
```

* * *

**编辑**由于 unubtu 的答案不再可见，我要从他那里偷东西。上面的代码可以写得更好更紧凑：

```
x2_Kcids = np.empty_like(x2_Kaxs)
x2_Kcids.ravel()[:] = [ax2_cid[axs] for axs in x2_Kaxs.flat] 
```

* * *

对于上面的单项列表示例：

```
>>> x2_Kcids_1 = np.empty_like(x2_Kaxs_1).reshape(-1)
>>> x2_Kcids_1[:] = [ax2_cid[axs] for axs in x2_Kaxs_1.flat]
>>> x2_Kcids_1.shape = shape
>>> x2_Kcids_1
array([[[ 0.37685372], [ 0.95328117], [ 0.63840868]],
       [[ 0.43009678], [ 0.02069558], [ 0.32455781]],
       [[ 0.32455781], [ 0.37685372], [ 0.09777559]],
       [[ 0.09777559], [ 0.37685372], [ 0.32455781]],
       [[ 0.02069558], [ 0.02069558], [ 0.43009678]],
       [[ 0.32455781], [ 0.63840868], [ 0.37685372]],
       [[ 0.63840868], [ 0.43009678], [ 0.25532799]],
       [[ 0.02069558], [ 0.32455781], [ 0.09777559]],
       [[ 0.43009678], [ 0.37685372], [ 0.63840868]],
       [[ 0.02069558], [ 0.17876822], [ 0.17876822]]], dtype=object)
>>> x2_Kcids_1[0, 0]
array([ 0.37685372]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:41:16.890

类似于@Denis：

```
if x.ndim == 2:
    x.shape += (1,) 
```

# unix - 从音轨开头修剪空白空间的命令行工具？

> ID：15415860
> 
> 赞同：2
> 
> 时间：2013-03-14T17:14:41.873
> 
> 标签：unix, audio, command-line, ffmpeg

我想知道是否可以使用命令行工具（ffmpeg 或其他）来修剪音轨开头或结尾的空白空间。如果有人对此有所了解，那将是一些建议/信息将是惊人的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T23:13:52.187

您是否希望找到一种从曲目开始*自动识别和修剪静音的工具？*那会稍微复杂一些。但是，如果您知道要删除 PCM WAV 文件的第一个，例如 7.5 秒，请像这样使用 FFmpeg：

```
ffmpeg -i input.wav -ss 7.5 output.wav 
```

相同的命令通常适用于 .MP3 文件。**但是**，您必须小心避免因无意中解压缩然后重新编码 MP3 音频数据而造成的世代质量损失。为此，您要求 FFmpeg 复制编解码器数据而不是对其进行转码：

```
 ffmpeg -i input.mp3 -acodec copy -ss 7.5 output.mp3 
```

# asp.net - .net 中的 URL 重写

> ID：15415861
> 
> 赞同：1
> 
> 时间：2013-03-14T17:14:41.663
> 
> 标签：asp.net, url-rewriting

我们有这样的当前.net页面结构，URL形成这样..

[http://www.example.com/pages/login.aspx?q=1234](http://www.example.com/pages/login.aspx?q=1234)

并希望将其转换为

[http://www.example.com/login?q=1234](http://www.example.com/login?q=1234)

如何通过 url 重写或过滤绕过 Pages 目录。

此外，对于 ashx/css/js/png/jpegs/axd 等文件，我们也想忽略此规则...

任何帮助，将不胜感激 ..

# ios - 如何让 iOS 在 UIBarButtonItem 图像上设置渐变？

> ID：15415862
> 
> 赞同：5
> 
> 时间：2013-03-14T17:14:47.770
> 
> 标签：ios, customization, uibarbuttonitem, look-and-feel

只是想知道，我通过以下方式自定义了 UIBarButtonItems

```
+ (UIBarButtonItem *)createBarButtonItemWithTitle:(NSString *)t target:(id)tgt action:(SEL)a
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *buttonImage = [[UIImage imageNamed:@"blabla.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];

    CGRect buttonFrame = [button frame];
    buttonFrame.size.width = 35;
    buttonFrame.size.height = buttonImage.size.height;
    [button setFrame:buttonFrame];

    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];

    [button addTarget:tgt action:a forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button];

    return buttonItem ;
} 
```

但是现在，我对按钮背景图像没有阴影/光泽效果......

有没有办法让它自动完成，或者我必须以编程方式完成？

编辑： ![这是一张截图，我用了一个简单的绿色方块让它更明显。 不再有阴影/光泽效果](../Images/12bc868ebd6f59aba4fa5ae58b1960d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:45:19.290

要以这种方式完全自定义栏按钮，您需要提供除“blabla.png”中的扁平绿色图像之外的其他内容。

处理此问题的另一种方法是使用您的图像创建一个带边框的样式按钮。就像是：

```
UIBarButtonItem* barButton = [UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"blabla.png"] style:UIBarButtonItemStyleBordered target:tgt selector:a]; 
```

这种`UIBarButtonItemStyleBordered`风格赋予它 3D 凸起的按钮式外观。如果需要，您可以对其外观进行着色以匹配您的酒吧。

# r - 在 R 中，对给定行上方的所有行求和并以新 ID 重新开始？

> ID：15415863
> 
> 赞同：3
> 
> 时间：2013-03-14T17:14:50.463
> 
> 标签：r, sum, conditional, plyr

以下是我所拥有的：

> ID 年份 分数
> 1 1999 10
> 1 2000 11
> 1 2001 14
> 1 2002 22
> 2 2000 19
> 2 2001 17
> 2 2002 22
> 3 1998 10
> 3 1999 12

以下是我想做的事情：

> ID 年份 总分
> 1 1999 10 10
> 1 2000 11 21
> 1 2001 14 35
> 1 2002 22 57
> 2 2000 19 19
> 2 2001 17 36
> 2 2002 22 48
> 3 1998 10 10
> 3 1999 12 22

每个 ID 的年数和具体年数各不相同。

我觉得这是 ddply 中的一些高级选项，但我一直无法找到答案。我也尝试过使用 for/while 循环，但由于这些循环在 R 中非常慢，而且我的数据集很大，所以它运行得不是很好。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:19:15.180

您可以使用该`sumsum`功能并将其应用于`ave`所有子组。

```
transform(dat, Total = ave(Score, ID, FUN = cumsum))

  ID Year Score Total
1  1 1999    10    10
2  1 2000    11    21
3  1 2001    14    35
4  1 2002    22    57
5  2 2000    19    19
6  2 2001    17    36
7  2 2002    22    58
8  3 1998    10    10
9  3 1999    12    22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T00:22:41.200

如果你的数据很大，那么`ddply`会很慢。

`data.table`是要走的路。

```
 library(data.table)
 DT <- data.table(dat)
 # create your desired column in `DT`
 DT[, agg.Score := cumsum(Score), by = ID] 
```

# php - 如何在下拉值更改时获取另一列的值？

> ID：15415864
> 
> 赞同：0
> 
> 时间：2013-03-14T17:14:50.323
> 
> 标签：php, javascript, jquery, ajax

我目前正在使用 PHP 来填充 HTML 表，每行一个下拉列表：

```
echo "  <tr>";
echo "      <td>" . $row["order_id"] . "</td>";
echo "      <td>" . $row["status_name"] . "</td>";
echo "      <td>";
echo "          <select name=\"status_dropdown\" onchange=\"handleStatusChange(this);\">";

while ($row = $result->fetch_array(MYSQL_ASSOC))
{
    // Output the dropdown options
    echo "<option value=\"" . $row["status_id"] . "\">" . $row["name"] . "</option>";
} 
```

我有一个 javascript 函数，它会在值更改时触发：

```
<script type="text/javascript">
    function handleStatusChange(dropdown)
    {
    // I would like to use the Order ID value here ...
    }
</script> 
```

如何从下拉列表的当前行获取“order_id”值（存储在另一列中）？我想访问 javascript 函数中的“order_id”值。

我需要 AJAX 或 JQuery 吗？

如您所见，我是 Web 开发的新手：\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:19:56.113

我认为您可以使用 jquery 事件绑定代替`onchange`

```
$('select[name="status_dropdown"]').change(function(event){
    var $this = $(event.target);
    var orderId = $this.closest('tr').children('td:eq(0)').text()
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/PXfkn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:22:01.780

您不需要 AJAX 或 JQuery （尽管更熟悉 Javascript 会是一个好主意）您可以使用的一个功能是

```
getElementById(id) 
```

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

基本上，您将在您的 javascript 文件中将一个变量分配给相关对象，然后可以通过该变量访问与该元素关联的内容。

从上面的教程：

```
<!DOCTYPE html>
<html>
<head>
  <title>getElementById example</title>
  <script>
  function changeColor(newColor) {
    var elem = document.getElementById("para1");
    elem.style.color = newColor;
  }
  </script>
</head>
<body>
  <p id="para1">Some text here</p>
  <button onclick="changeColor('blue');">blue</button>
  <button onclick="changeColor('red');">red</button>
</body>
</html> 
```

# sqlite - 无法在 sqlite 查询中获得正确的顺序

> ID：15415866
> 
> 赞同：1
> 
> 时间：2013-03-14T17:14:53.103
> 
> 标签：sqlite

```
SELECT DISTINCT
     rev1.name,
     rev2.name

FROM reviewer rev1,
     reviewer rev2,

    (SELECT r1.rid AS r1id,
            r2.rid AS r2id
       FROM rating r1,
            rating r2
      WHERE r1.mID = r2.mID
        AND r1.rid < r2.rID
   ) AS raters

WHERE rev1.rid = raters.r1id
  AND rev2.rid = raters.r2id

ORDER BY rev1.name DESC; 
```

此 sqlite 代码返回以下对：

```
Brittany Harris   Chris Jackson
Chris Jackson     Ashley White
Daniel Lewis      Elizabeth Thomas
Elizabeth Thomas  James Cameron
Sarah Martinez    Mike Anderson 
```

对中的名称是正确的，但其中一些应该显示相反，也就是说，结果应该是：

```
Ashley White      Chris Jackson
Brittany Harris   Chris Jackson
Daniel Lewis      Elizabeth Thomas
Elizabeth Thomas  James Cameron
Mike Anderson     Sarah Martinez 
```

如果有人能指出我做错了什么，我将不胜感激。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:44:30.767

您可以在内部选择中将 < 更改为 <>，然后您将获得每对两次，然后在外部选择中为名称添加约束，例如（查找 ### HERE）。我也认为你想要 ASC 而不是 DESC

```
SELECT DISTINCT
     rev1.name,
     rev2.name

FROM reviewer rev1,
     reviewer rev2,

    (SELECT r1.rid AS r1id,
            r2.rid AS r2id
       FROM rating r1,
            rating r2
      WHERE r1.mID = r2.mID
        AND r1.rid <> r2.rID  -- HERE - give you each pair twice
   ) AS raters

WHERE rev1.rid = raters.r1id
  AND rev2.rid = raters.r2id
  AND rev1.name < rev2.name  -- HERE - will remove duplicate pairs
  ORDER BY ASC 
```

# android - 自定义 ListView 内的可点击 TextView

> ID：15415867
> 
> 赞同：3
> 
> 时间：2013-03-14T17:14:55.433
> 
> 标签：android, android-listview, textview

我做了自己的定制`ListView`，每行有**2 个** `TextView`。

我打算在可点击`textview`的每一行中制作这些 s 。`listview`因此，每当用户点击其中任何一个时，它都会将他重定向到其他地方。

实际上，当用户单击一个`ListView`项目时，它会单击所有项目，并且`textviews`会被忽略。

总之，当我单击一个`ListView`项目时，我不希望 Listview 项目响应，我希望`Textview`内部`Listview`响应。

编辑：

这是我自定义视图的方式：

```
String[] from = {"value1", "value2"};
int[] to = {R.id.label, R.id.label2};
SimpleAdapter adapter = new SimpleAdapter(MainActivity.this, data, R.layout.rowlayout, from, to); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:26:32.470

在您的 Adapter 类中，在 getview() 方法中，您可以像这样执行 onclick 操作

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    Holder holder = null;
    if (row  == null) {
        LayoutInflater vi = 
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = vi.inflate(R.layout.listitem, null);
        holder.txtTitle1 = (TextView) row.findViewById(R.id.heading1);
        holder.txtTitle2 = (TextView) row.findViewById(R.id.heading2);

        holder.txtTitle1 .setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
            }
        });

        holder.txtTitle2 .setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
            }
        });
    }
    return row;
}
/////
///////////

static class Holder {
    TextView txtTitle1;
    TextView txtTitle2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-25T10:59:04.060

```
set your TextView in your layot.xml

 <TextView
     android:id="@+id/YourID"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
           android:clickable="true"

/> 
```

**然后在您的自定义适配器上**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    Holder holder = null;
    if (row  == null) {
        LayoutInflater vi = 
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = vi.inflate(R.layout.youLayout, null);
        holder.txt1 = (TextView) row.findViewById(R.id.tx1);
        holder.txt2 = (TextView) row.findViewById(R.id.tx2);

       holder.txt1 .setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
//your statements            
}
        });

        holder.txt2 .setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
//your statements
            }
        });
    }
    return row;
} 
```

# magento - Magento - 通过商店视图禁用可配置的产品选项

> ID：15415868
> 
> 赞同：3
> 
> 时间：2013-03-14T17:14:55.477
> 
> 标签：magento

我试图找出一种方法，可以通过 magento 中的商店视图禁用一些简单的产品或可配置的产品选项。

例如，一个可配置的产品有 5 个与之关联的颜色选项（5 个简单产品）。我需要能够在多个商店中使用该可配置产品，但只提供基于商店的特定颜色选项。因此，商店 1 只能提供 3 种颜色，而商店 2 可以提供其他 2 种颜色。

我尝试取消分配我不想在每个商店中显示的简单关联产品，但所有可配置选项在所有商店中仍然可用。

有人对此有任何想法或经验吗？

# android - Android OpenCV 教程 5 摄像头控制崩溃

> ID：15415875
> 
> 赞同：1
> 
> 时间：2013-03-14T17:15:13.333
> 
> 标签：android, opencv, camera, android-camera

我正在使用 Android OpenCV v.2.4.3.2 和 Galaxy Nexus 手机。当我运行示例“Tutorial 5 - Camera Control”时，我可以看到很好的预览，并且可以使用选项菜单来更改颜色等。

但是，当我触摸屏幕拍照时，应用程序崩溃了。

然后，当我尝试再次将相机与任何应用程序一起使用时，我得到“相机错误：无法连接到相机”。我只能通过关闭并再次打开手机来再次使用相机。

我没有更改提供的示例中的任何代码。有任何想法吗？

谢谢！

## 当我尝试拍照时从崩溃中记录：

```
I/JavaCameraView(1278): Preview Frame received. Need to create MAT and deliver it to clients
I/JavaCameraView(1278): Frame size  is 1036800
I/OCVSample::Activity(1278): onTouch event
I/Sample::SampleJavaCameraView(1278): Tacking picture
I/InputDispatcher(220): Application is not responding: Window{41bfb328 org.opencv.samples.tutorial5/org.opencv.samples.tutorial5.Sample5CameraControl paused=false}.  5006.3ms since event,5005.7ms since wait started
I/WindowManager(220): Input event dispatching timed out sending to org.opencv.samples.tutorial5/org.opencv.samples.tutorial5.Sample5CameraControl
I/Process(220): Sending signal. PID: 1278 SIG: 3
I/dalvikvm(1278): threadid=3: reacting to signal 3
I/dalvikvm(1278): Wrote stack traces to '/data/anr/traces.txt'
I/Process(220): Sending signal. PID: 220 SIG: 3
I/dalvikvm(220): threadid=3: reacting to signal 3
I/dalvikvm(220): Wrote stack traces to '/data/anr/traces.txt'
I/Process(220): Sending signal. PID: 426 SIG: 3
I/dalvikvm(426): threadid=3: reacting to signal 3
I/dalvikvm(426): Wrote stack traces to '/data/anr/traces.txt'
I/Process(220): Sending signal. PID: 301 SIG: 3
I/dalvikvm(301): threadid=3: reacting to signal 3
I/dalvikvm(301): Wrote stack traces to '/data/anr/traces.txt'
I/Process(220): Sending signal. PID: 440 SIG: 3
I/dalvikvm(440): threadid=3: reacting to signal 3
I/dalvikvm(440): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm(220): GC_CONCURRENT freed 597K, 9% free 17508K/19143K, paused 3ms+4ms
D/dalvikvm(220): GC_EXPLICIT freed 153K, 9% free 17529K/19143K, paused 2ms+3ms
E/ActivityManager(220): ANR in org.opencv.samples.tutorial5 (org.opencv.samples.tutorial5/.Sample5CameraControl)
E/ActivityManager(220): Reason: keyDispatchingTimedOut
E/ActivityManager(220): Load: 0.51 / 0.29 / 0.11
E/ActivityManager(220): CPU usage from 12987ms to 0ms ago with 99% awake:
E/ActivityManager(220):   58% 1278/org.opencv.samples.tutorial5: 51% user + 6.9% kernel / faults: 57446 minor
E/ActivityManager(220):   26% 120/mediaserver: 24% user + 1.3% kernel
E/ActivityManager(220):   1.8% 220/system_server: 1% user + 0.7% kernel / faults: 69 minor
E/ActivityManager(220):   1.6% 117/surfaceflinger: 0.7% user + 0.8% kernel / faults: 10 minor
E/ActivityManager(220):   1.5% 126/adbd: 0.3% user + 1.1% kernel / faults: 39 minor
E/ActivityManager(220):   0.9% 4/kworker/0:0: 0% user + 0.9% kernel
E/ActivityManager(220):   0.8% 1121/logcat: 0.4% user + 0.3% kernel
E/ActivityManager(220):   0.6% 23/kinteractiveup: 0.6% user + 0% kernel
E/ActivityManager(220):   0.6% 76/kworker/u:2: 0% user + 0.6% kernel
E/ActivityManager(220):   0.5% 68/kworker/1:1: 0% user + 0.5% kernel
E/ActivityManager(220):   0.1% 53/kworker/u:1: 0% user + 0.1% kernel
E/ActivityManager(220):   0.3% 5/kworker/u:0: 0% user + 0.3% kernel
E/ActivityManager(220):   0.1% 77/kworker/u:3: 0% user + 0.1% kernel
E/ActivityManager(220):   0% 426/com.android.phone: 0% user + 0% kernel / faults: 16 minor
E/ActivityManager(220): 46% TOTAL: 39% user + 6.3% kernel + 0% iowait + 0% softirq
E/ActivityManager(220): CPU usage from 371ms to 883ms later with 99% awake:
E/ActivityManager(220):   5.7% 220/system_server: 0% user + 5.7% kernel
E/ActivityManager(220):     3.8% 257/InputDispatcher: 0% user + 3.8% kernel
E/ActivityManager(220):   1.3% 68/kworker/1:1: 0% user + 1.3% kernel
E/ActivityManager(220):   1.3% 76/kworker/u:2: 0% user + 1.3% kernel
E/ActivityManager(220): 2.9% TOTAL: 0% user + 2.9% kernel
I/WindowManager(220): createSurface Window{41c0d8f0  paused=false}: DRAW NOW PENDING 
```

## 崩溃后我再次尝试使用相机时的日志：

```
D/OpenGLRenderer(303): Flushing caches (mode 0)
V/CameraHolder(1463): open camera 0
W/CameraService(119): CameraService::connect X (pid 1463) rejected (existing client).
E/CameraHolder(1463): fail to connect Camera
E/CameraHolder(1463): java.lang.RuntimeException: Fail to connect to camera service
E/CameraHolder(1463):   at android.hardware.Camera.native_setup(Native Method)
E/CameraHolder(1463):   at android.hardware.Camera.<init>(Camera.java:302)
E/CameraHolder(1463):   at android.hardware.Camera.open(Camera.java:264)
E/CameraHolder(1463):   at com.android.camera.CameraHolder.open(CameraHolder.java:131)
E/CameraHolder(1463):   at com.android.camera.Util.openCamera(Util.java:267)
E/CameraHolder(1463):   at com.android.camera.Camera$4.run(Camera.java:1008)
E/CameraHolder(1463):   at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:42:11.413

看起来应用程序正在尝试将照片保存在 UI 线程中并阻止它（`Application is not responding...`第一个日志输出的一部分）
粉碎的应用程序不会释放相机，因此当您尝试再次访问它时会出现错误。

尝试将照片保存部分移动到另一个线程 - 应该可以。

# facebook - IE8 facebook 应用程序“导航到网页已取消”

> ID：15415879
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:15:21.750
> 
> 标签：facebook, internet-explorer, internet-explorer-8

在 IE8 上，当我转到我的 Facebook 页面时，我收到以下警告。如果我点击“否”，一切正常，但如果我点击“是”，我会得到“网页导航被取消”（见 2nd SS）。据我了解，警告在 IE8 中是不可避免的，但我看到其他应用程序在点击“是”后仍然可以正常加载。例如糖果粉碎：（[https://apps.facebook.com/candycrush/?fb_source=search&ref=ts&fref=ts](https://apps.facebook.com/candycrush/?fb_source=search&ref=ts&fref=ts)）

任何人都知道如何解决“...网页被取消”的问题？

![在此处输入图像描述](../Images/d681c6ae7337ea4ec8618f046b3dda41.png)

![在此处输入图像描述](../Images/5044dd15a1b6be356eda4cdb3fbf7cb9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:06:54.253

您的页面位于 https 上（根据 Facebook 的要求），但您使用 iframe 从不安全的位置 (http) 加载内容。通过单击“是”，您有效地阻止了在该页面上加载任何非安全资产，包括该 iframe 的目标（导致消息被取消）。

所以你所要做的就是

```
<iframe src="https://domain.com/yourpage.php"></iframe> 
```

你应该很高兴。

# c# - 在 C# 中而不是 xaml 中定义资源

> ID：15415881
> 
> 赞同：0
> 
> 时间：2013-03-14T17:15:31.307
> 
> 标签：c#, wpf, xaml, resources, wpfdatagrid

我想使用 c# 中的用户控件访问我的 staticData。但为了做到这一点，我认为我需要在 C# 而不是 xaml 中定义资源。

谁能帮我？

项目中的一切都在工作，但是当我尝试访问我的表时它不会返回任何内容，因为它只是在 xaml 中定义的。

用户控件：GroupingZoomedInView.xaml

```
<UserControl
x:Class="CaiMU_Professor.Grouping.GroupingZoomedInView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:CaiMU_Professor.Grouping.Data"
xmlns:telerikGrid="using:Telerik.UI.Xaml.Controls.Grid"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid>
    <Grid.Resources>
        <local:PeopleViewModel x:Key="Model"/>
    </Grid.Resources>
    <telerikGrid:RadDataGrid x:Name="dataGrid" ItemsSource="{Binding Data,Source={StaticResource Model}}" AutoGenerateColumns="False" FontSize="{StaticResource ControlContentThemeFontSize}" SelectionUnit="Row">
        <telerikGrid:RadDataGrid.GroupDescriptors>
            <telerikGrid:DelegateGroupDescriptor>
                <telerikGrid:DelegateGroupDescriptor.KeyLookup>
                    <local:AlpabeticGroupKeyLookup/>
                </telerikGrid:DelegateGroupDescriptor.KeyLookup>
            </telerikGrid:DelegateGroupDescriptor>
        </telerikGrid:RadDataGrid.GroupDescriptors>
        <telerikGrid:RadDataGrid.Columns>
            <telerikGrid:DataGridTextColumn PropertyName="Template"/>
            <telerikGrid:DataGridTextColumn PropertyName="data"/>
            <telerikGrid:DataGridTextColumn PropertyName="info"/>
            <telerikGrid:DataGridTextColumn PropertyName="score"/>
            <telerikGrid:DataGridTextColumn PropertyName="result"/>
            <telerikGrid:DataGridTextColumn PropertyName="repeats"/>
        </telerikGrid:RadDataGrid.Columns>
    </telerikGrid:RadDataGrid>
</Grid>
</UserControl> 
```

GroupingZoomedInView.xaml.cs

```
 public sealed partial class GroupingZoomedInView : UserControl, ISemanticZoomInformation
{
    public String row;

    public GroupingZoomedInView()
    {
        this.InitializeComponent();
        this.dataGrid.SelectionChanged += this.SelectionChanged;
    }

    public void CompleteViewChangeFrom(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        var list = this.SemanticZoomOwner.ZoomedOutView as GridView;

        if (list != null)
        {
            list.ItemsSource = source.Item;
        }
    }

    public bool IsActiveView {get; set;}
    public bool IsZoomedInView {get; set;}
    public SemanticZoom SemanticZoomOwner{get; set;}

    public void StartViewChangeFrom(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        source.Item = this.dataGrid.GetDataView().Items.OfType<IDataGroup>().Select(c => c.Key);
    }

    public void StartViewChangeTo(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        var dataview = this.dataGrid.GetDataView();
        var group = dataview.Items.OfType<IDataGroup>().Where(c => c.Key.Equals(source.Item)).FirstOrDefault();

        var lastGroup = dataview.Items.Last() as IDataGroup;
        if (group != null && lastGroup != null)
        {
            this.dataGrid.ScrollItemIntoView(lastGroup.ChildItems[lastGroup.ChildItems.Count - 1], () =>
            {
                this.dataGrid.ScrollItemIntoView(group.ChildItems[0]);
            });
        }
    }

    private void SelectionChanged(object sender, DataGridSelectionChangedEventArgs e)
    {
        Templates temp = this.dataGrid.SelectedItem as Templates;
        aux = this.dataGrid.SelectedItem;
    }
 } 
```

我的静态数据

```
public class PeopleViewModel
{
    private static List<Templates> staticData;

    static PeopleViewModel()
    {
        Load();
    }

    public IList<Templates> Data
    {
        get
        {
            return staticData;
        }
    }

    private static void Load()
    {
        XMLStuff xml = new XMLStuff();
        List<Templates> tempList = xml.getControlOutput();
        staticData = new List<Templates>();

        foreach (Templates temp in tempList)
            staticData.Add(temp);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:19:05.543

尝试

`var model = this.Resources["Model] as PeopleViewModel;`

# php - php检测浏览器

> ID：15415883
> 
> 赞同：2
> 
> 时间：2013-03-14T17:15:33.817
> 
> 标签：php, cross-browser, browser-detection, php-5.2

我有一个奇怪的 css 错误，我似乎无法修复，它只发生在 safari 中，而不是 chrome，所以 webkit 目标不会有帮助.. 我试图做的是设置一个 php 块来检查浏览器是否是 safari，如果是，则回显一点CSS。

到目前为止，我得到了这个（如下） - 哪个有效，但它也在 chrome 中输出 echo 语句，我有什么想法出错了吗？

```
<?php 

    if(isset($_SERVER['HTTP_USER_AGENT'])){
         $agent = $_SERVER['HTTP_USER_AGENT'];
    }

    if(strlen(strstr($agent,"Safari")) > 0 ){
        $browser = 'safari';
    }
    if($browser=='safari'){
        echo '<style>p {font-weight: 300;}</style>';
    }

?> 
```

我一直在玩`echo $_SERVER["HTTP_USER_AGENT"];`，这就是我从 safari 得到的

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) 版本/6.0.2 Safari/536.26.17

并来自铬

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22

所以它可以告诉它不同的浏览器，但它显然将它们都读取为 Apple Web Kit，而不是 safari 或 chrome。我的 php 有点生疏了，我该如何让它专门针对 safari 用户代理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-12T16:13:25.947

这是基于 po228 答案的更通用的解决方案。我认为直接搜索浏览器的版本号而不是内部版本号更容易。

```
$ua = $_SERVER["HTTP_USER_AGENT"];      // Get user-agent of browser

$safariorchrome = strpos($ua, 'Safari') ? true : false;     // Browser is either Safari or Chrome (since Chrome User-Agent includes the word 'Safari')
$chrome = strpos($ua, 'Chrome') ? true : false;             // Browser is Chrome

if($safariorchrome == true AND $chrome == false){ $safari = true; }     // Browser should be Safari, because there is no 'Chrome' in the User-Agent

// Check for version numbers 
$v1 = strpos($ua, 'Version/1.') ? true : false;
$v2 = strpos($ua, 'Version/2.') ? true : false;
$v3 = strpos($ua, 'Version/3.') ? true : false;
$v4 = strpos($ua, 'Version/4.') ? true : false;
$v5 = strpos($ua, 'Version/5.') ? true : false;
$v6 = strpos($ua, 'Version/6.') ? true : false;

// Test versions of Safari
if($safari AND $v1){ echo 'Safari Version 1'; }
else if($safari AND $v2){ echo 'Safari Version 2'; }
else if($safari AND $v3){ echo 'Safari Version 3'; }
else if($safari AND $v4){ echo 'Safari Version 4'; }
else if($safari AND $v5){ echo 'Safari Version 5'; }
else if($safari AND $v6){ echo 'Safari Version 6'; }
else if($safari){ echo 'Safari newer than Version 6'; }
else{ echo "Not Safari"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T09:25:55.183

我用这个。这并不完美，但它有效

```
$browser = $_SERVER['HTTP_USER_AGENT'];
$chrome = '/Chrome/';
$firefox = '/Firefox/';
$ie = '/MSIE/';
if (preg_match($chrome, $browser))
    echo "Chrome/Opera";
if (preg_match($firefox, $browser))
    echo "Firefox";
if (preg_match($ie, $browser))
    echo "Ie"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T14:13:46.383

这个请求有很多开源项目我建议将该类添加到您的 PHP 项目中并在需要时运行它： [https ://github.com/cbschuld/Browser.php](https://github.com/cbschuld/Browser.php)

但如果你只是想根据你的代码解决你的问题，我认为这会做到：

```
$agent = '';
$browser = '';
if(isset($_SERVER['HTTP_USER_AGENT'])){
     $agent = $_SERVER['HTTP_USER_AGENT'];
}

if(strlen(strstr($agent,'Safari')) > 0 ){
    $browser = 'safari';
   if(strstr($agent,'Chrome')){
     $browser= 'chrome';
   }
}

if($browser=='safari'){
    echo '<style>p {font-weight: 300;}</style>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T04:35:00.160

我使用以下代码解决了

```
$u_agent = $_SERVER['HTTP_USER_AGENT'];
$issafari=false;
if (preg_match('/Safari/i',$u_agent)){
    $issafari=(!preg_match('/Chrome/i',$u_agent));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T06:35:18.453

它工作正常。

```
function getBrowser($agent = null){
        $u_agent = ($agent!=null)? $agent : $_SERVER['HTTP_USER_AGENT']; 
        $bname = 'Unknown';
        $platform = 'Unknown';
        $version= "";

        //First get the platform?
        if (preg_match('/linux/i', $u_agent)) {
            $platform = 'linux';
        }
        elseif (preg_match('/macintosh|mac os x/i', $u_agent)) {
            $platform = 'mac';
        }
        elseif (preg_match('/windows|win32/i', $u_agent)) {
            $platform = 'windows';
        }

        // Next get the name of the useragent yes seperately and for good reason
        if(preg_match('/MSIE/i',$u_agent) && !preg_match('/Opera/i',$u_agent)) 
        { 
            $bname = 'Internet Explorer'; 
            $ub = "MSIE"; 
        } 
        elseif(preg_match('/Firefox/i',$u_agent)) 
        { 
            $bname = 'Mozilla Firefox'; 
            $ub = "Firefox"; 
        } 
        elseif(preg_match('/Chrome/i',$u_agent)) 
        { 
            $bname = 'Google Chrome'; 
            $ub = "Chrome"; 
        } 
        elseif(preg_match('/Safari/i',$u_agent)) 
        { 
            $bname = 'Apple Safari'; 
            $ub = "Safari"; 
        } 
        elseif(preg_match('/Opera/i',$u_agent)) 
        { 
            $bname = 'Opera'; 
            $ub = "Opera"; 
        } 
        elseif(preg_match('/Netscape/i',$u_agent)) 
        { 
            $bname = 'Netscape'; 
            $ub = "Netscape"; 
        } 

        // finally get the correct version number
        $known = array('Version', $ub, 'other');
        $pattern = '#(?<browser>' . join('|', $known) .
        ')[/ ]+(?<version>[0-9.|a-zA-Z.]*)#';
        if (!preg_match_all($pattern, $u_agent, $matches)) {
            // we have no matching number just continue
        }

        // see how many we have
        $i = count($matches['browser']);
        if ($i != 1) {
            //we will have two since we are not using 'other' argument yet
            //see if version is before or after the name
            if (strripos($u_agent,"Version") < strripos($u_agent,$ub)){
                $version= $matches['version'][0];
            }
            else {
                $version= $matches['version'][1];
            }
        }
        else {
            $version= $matches['version'][0];
        }

        // check if we have a number
        if ($version==null || $version=="") {$version="?";}

        return array(
            'userAgent' => $u_agent,
            'name'      => $bname,
            'version'   => $version,
            'platform'  => $platform,
            'pattern'    => $pattern
        );
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-29T03:36:34.677

我在 Safari 上遇到了类似的问题（`float: right;`拒绝坐在另一列旁边）最终使用 JavaScript 来检测问题而不是问题浏览器。

JavaScript 代码：

```
function check() { //called by HTML's <body onLoad="check();">  
  topPos = document.getElementById("rightCol").offsetTop;
  //has rightCol been placed below leftCol ??   
  if (topPos > 200) {
    //if you want a message - something like this works  
    text = "Apologies to Safari (and other?) users: the important links   are at the bottom of the page." + topPos.toString();
    document.getElementById("warning").appendChild(document.createTextNode(text));
    //or, if you want to override your preferred styles something like this  
    document.getElementById("leftCol").style.width = "100%";
    document.getElementById("rightCol").style.width = "100%";
    document.getElementById("rightCol").style.borderTop = "thin dotted black";
  } else //removes the warning paragraph (if required)  
    document.getElementById("warning").normalise();
} 
```

在 Html 中： 1\. 添加 `onLoad="check();"`到 body 标签

2.  `<p id="warning"></p>`特别留言的地方

3.  Give `id`'s 给您需要测试或重新设计的元素

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-20T09:49:46.027

使用这个绝对有效，我已经测试过了---------

```
<?php
$msie = strpos($_SERVER["HTTP_USER_AGENT"], 'MSIE') ? true : false;
$firefox = strpos($_SERVER["HTTP_USER_AGENT"], 'Firefox') ? true : false;
$safari = strpos($_SERVER["HTTP_USER_AGENT"], 'Safari') ? true : false;
$chrome = strpos($_SERVER["HTTP_USER_AGENT"], 'Chrome') ? true : false;
?>

<?php
//Firefox
if ($firefox) {
echo 'you are using Firefox!';
echo '<br />';
}

// Safari or Chrome. Both use the same engine - webkit
if ($safari || $chrome) {
echo 'you are using a webkit powered browser';
echo '<br />';
}

// IE
if ($msie) {
echo '<br>you are using Internet Explorer<br>';
echo '<br />';
}

// Not IE and for all other browsers
if (!$msie) {
echo '<br>you are not using Internet Explorer<br>';
echo '<br />';
}

// Add inline css
if ($firefox) {
echo '<style type="text/css">';
echo '.mydiv {position:relative; width:100px; height:50px;}';
echo '</style>';
}
?> 
```

原文：- [http://echopx.com/faq/browser-detection-ie-firefox-safari-chrome](http://echopx.com/faq/browser-detection-ie-firefox-safari-chrome)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-14T17:19:12.070

Try specific versions of Safari as well? I'm not on a Mac at the moment, so can't test this for you, but let me know if it helps:

```
$ua = $_SERVER["HTTP_USER_AGENT"];

$safari = strpos($ua, 'Safari') ? true : false; // All Safari
$safari_2 = strpos($ua, 'Safari/419') ? true : false; // Safari 2
$safari_3 = strpos($ua, 'Safari/525') ? true : false; // Safari 3
$safari_3_1 = strpos($ua, 'Safari/528') ? true : false; // Safari 3.1
$safari_4 = strpos($ua, 'Safari/531') ? true : false; // Safari 4

// Test Versions
if ($safari_2) { // Safari 2
    echo 'Safari Version 2';
}
elseif ($safari_3) { // Safari 3
    echo 'Safari Version 3';
}
elseif ($safari_4) { // Safari 4
    echo 'Safari Version 4';
} 
```

# qt - 库函数未触发 QTimer 插槽

> ID：15415885
> 
> 赞同：1
> 
> 时间：2013-03-14T17:15:44.330
> 
> 标签：qt, shared-libraries, signals-slots, qtimer

我有一个主 Qt 应用程序，我正在开发一个从该主应用程序链接到的 Qt 库。从主应用程序中，我希望调用库中的一个函数来执行某些操作，然后在例程结束时调用一个 QTimer，它会在一段时间后触发库代码中的一个 Slot。我无法让计时器触发，我不知道为什么。如果我在我的主应用程序中放置一个计时器，那么它会按预期触发，只是不在库中。

目前，我的图书馆只是一个班级。在我的库头文件中，我将希望调用的插槽定义为：

```
private slots:

        void stop(); 
```

在实现文件中我有这个：

```
 void MyLib::start() {

        // Create a timer to user during audio operation
        m_GeneralTimer = new QTimer(this);

        // Fire off a oneshot to clear the buffer for fluke-media
        m_GeneralTimer->setInterval(3000);
        m_GeneralTimer->setSingleShot(true);
        connect(m_GeneralTimer, SIGNAL(timeout()), SLOT(stop()));
        m_GeneralTimer->start();
    }
    void MyLib::stop() {

        qDebug() << "Called stop()...";
        m_GeneralTimer->stop();
        delete m_GeneralTimer;
    } 
```

我在这里错过了什么让计时器触发？

注意：这是我的很多头文件 - 真实文件中的所有内容都只是函数调用：

```
/// Use shared memory
#include <QSharedMemory>

/// Normal Qt Includes
#include <QBuffer>
#include <QDebug>

/// QTimer is required for calling a method
/// to stop audio playback at a later time
#include <QTimer>

/// Put into a background thread
#include <QtConcurrentRun>

/// Check integrity of received data
#include <QCryptographicHash>

class MYAUDIOLIBSHARED_EXPORT MyLib: public QObject
{

    Q_OBJECT

    public:

            /// /// ///

    private slots:

            void stop();

            /// /// ///
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:49:35.217

那么下面的代码工作。我在 start() 函数中放置了 3 秒，现在它从库调用中触发。

```
 // Create a timer to fire a slot when the playback is done
    m_EndPlayBackTimer = new QTimer(this);
    m_EndPlayBackTimer->setInterval(3000);
    m_EndPlayBackTimer->setSingleShot(true);
    connect(m_EndPlayBackTimer, SIGNAL(timeout()), SLOT(playBackDone()));
    m_EndPlayBackTimer->start(3000);

    // Done
    return;

}

/**
 * @brief
 * Slot to be started by a timer after some time delay
 * to signify that the playback is complete.
 *
 */
void MyLib::playBackDone() {

    #if DEBUG
    qDebug() << "Playback is complete...";
    #endif

} 
```

# php - PHP crypt 函数在加密变量时能否生成两个相同的哈希值

> ID：15415889
> 
> 赞同：1
> 
> 时间：2013-03-14T17:15:56.240
> 
> 标签：php, encryption

这样的代码可以生成两个相同的哈希吗？（假设时钟运行正常）

```
 <?php
 $t = time();
 $u = $_POST['username'];
 $st = $t.$u
 $salt = 'c5ac71cd162840eb7a4c2035ee132507';
 $e = crypt($st, $salt);
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:29:20.440

根据哈希的定义和[鸽巢原理](http://en.wikipedia.org/wiki/Pigeon_hole_principle)，是的，任何哈希都会产生*冲突*。一个好的散列的定义品质之一是两个输入产生相同输出的机会是如此之低以至于在实践中可以忽略不计。

话虽如此，相同的输入将始终产生相同的输出（哈希的另一种定义质量），并且如果您要使用静态盐作为输入并且相对很少更改“随机”值，例如`time()`（它仅每秒更改一次，是计算中的永恒），产生碰撞的机会更高。

我无法评论这里哈希的正确用法是什么，因为我不知道你想用它做什么。

# css - 样式化 CSS 标签中的内容

> ID：15415890
> 
> 赞同：0
> 
> 时间：2013-03-14T17:15:59.783
> 
> 标签：css, labels

谁能告诉我为什么我的标签样式通过标签标签的类仅在我第一次通过 id 定义样式时才有效？

这是我的例子：

为什么这可以使边框变绿：http: [//jsfiddle.net/HxrSU/13/](http://jsfiddle.net/HxrSU/13/)

然而，当我通过 ID 删除样式时，这不会？ [http://jsfiddle.net/HxrSU/14/](http://jsfiddle.net/HxrSU/14/)

这是完整的代码，代码来自[http://jsfiddle.net/HxrSU/13/](http://jsfiddle.net/HxrSU/13/)

```
<style type="text/css">
#red {
border: thick dotted red;    
} 

.label-for-check {
border: thick solid green;
}
</style>   

<input type="checkbox" id="check" class="check-with-label" />

<label for="check" id="red" class="label-for-check">
 MyField
<input type='text' id='myfield' name='myfield' size='10'  />
</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:22:24.103

ID 上的 CSS 语句的优先级（特异性）高于类的 CSS 语句。

阅读更多：[http ://www.w3.org/TR/CSS2/cascade.html](http://www.w3.org/TR/CSS2/cascade.html)

用您的类语句覆盖 ID 语句的一种方法是包含来自共同祖先的 ID：

[http://jsfiddle.net/HxrSU/25/](http://jsfiddle.net/HxrSU/25/)

```
#page .label-for-check {
    border: thick solid green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:24:04.950

如果您希望所有标签都相同，请执行以下操作

```
label {
border:5px solid red;  
 } 
```

如果您想进一步专门化特定的，请使用类或 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:25:32.360

改变：

```
.label-for-check {
border: thick solid green;
} 
```

至：

```
label.label-for-check {
border: thick solid green;
} 
```

它会正常工作。

见这里：http: [//jsfiddle.net/2SFbY/](http://jsfiddle.net/2SFbY/)

# php - 如何解析 Google Drive File 列表对象

> ID：15415891
> 
> 赞同：0
> 
> 时间：2013-03-14T17:16:07.240
> 
> 标签：php, google-drive-api

我正在使用 PHP 和 Google Drive API，需要获取返回对象中所有文件的 fileId。

这是我的代码：

```
 $result = array();
        $files = array();
        $pageToken = NULL;
        try {
            $parameters = array();
            $parameters['pageToken'] = $pageToken;
            $parameters['q'] = "trashed=false and title contains '".$folderName."'";
            $files = $this->service->files->listFiles($parameters);            
            $result = array_merge($result, $files->getItems());            
            $pageToken = $files->getNextPageToken();
        } catch (Exception $e) {
            print "An error occurred: " . $e->getMessage();
            $pageToken = NULL;
        }

        print_r($result); 
```

如何获取 $result 变量中所有文件的 fileId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:56:47.720

做就是了 ：

```
foreach($files->items as $item)
{
   echo $item['id'];
} 
```

# xml - 在 Marklogic 数据库中存储名称/值对的最有效方法是什么

> ID：15415895
> 
> 赞同：10
> 
> 时间：2013-03-14T17:16:14.313
> 
> 标签：xml, xquery, marklogic

我的应用程序经常需要在它所服务的文档中装饰值，使用查找获取各种代码的人类可读形式。

例如`<product_code>PC001</product_code>`希望返回为`<product_code code='PC001'>Widgets</product_code>`. 并不总是product_code；有几种不同类型的代码需要类似的行为（其中一些只有几十个示例，其中一些有几千个。）

我想知道将这些数据存储在数据库中的最有效方法是什么？我能想到两种可能：

1) 每种代码类型一个文档，包含许多元素：

```
<product-codes>
  <product-code code = "PC001">Widgets</product-code>
  <product-code code = "PC002">Wodgets</product-code>
  <product-code code = "PC003">Wudgets</product-code>
</product-codes> 
```

2) 每个代码一个文档，每个包含一个`<product-code>`元素，如上。

（显然，这两个选项都将包括合理的索引）

其中任何一个明显比另一个快吗？还有其他更好的选择吗？

我的感觉是，通常最好为每个文档保留一个“东西”，因为它在概念上稍微干净一些并且（我理解）更适合 ML 的索引，但在这种情况下，这似乎会导致大量非常小的文件. 这是我应该担心的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T17:27:26.837

任何需要独立搜索的东西都应该是它自己的文档或片段。但是，如果您只是进行查找，那么元素属性范围索引在返回值时应该非常快：

```
element-attribute-range-query(xs:QName('product-code'), xs:QName('code'), '=', 'PC001') 
=> 
Widgets 
```

使用范围索引，无论您如何分块文档，查找都将从同一个索引发生。因此，除非您需要使用 cts:search on`product-code`来检索实际元素，否则您如何分块文档并不重要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T20:23:09.350

另一种方法是存储一个表示名称-值对的映射。

```
let $m := map:map()
let $_ := map:put($m, 'a', 'fubar')
return document { $m } 
```

这将返回哈希图的 XML 表示形式，可以使用`xdmp:document-insert`. `map:map`您可以使用构造函数将 XML 映射转换回本机映射。原生地图也可以使用`xdmp:set-server-field`.

# hadoop - 将 null 写入 Hadoop 中的 DataOutput

> ID：15415900
> 
> 赞同：4
> 
> 时间：2013-03-14T17:16:17.093
> 
> 标签：hadoop, mapreduce

我正在使用 Hadoop 0.20.2。我正在编写一个`X`实现`Writable`.

`X`有几个字段是`Integer`. 对于这些字段，`null`值具有特殊的意义。

序列化对象时，通过在接口`DataOutput out`的`write`方法中写入`Writable`，有没有办法可以写`null`？或者我应该使用单独的布尔值来指示值为空？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:33:36.537

布尔值是将对象属性标记为`NULL`.

考虑这种情况：

```
public class LongMessage implements Writable {

  private long tag;
  private String data;
  // interface methods omitted first
} 
```

`data`可能是这样，`null`无论出于何种原因。所以我会按如下方式实现读/写：

```
 @Override
  public void readFields(DataInput in) throws IOException {
    tag = in.readLong();
    if (in.readBoolean()) {
      data = in.readUTF();
    } else {
      data = null;
    }
  }

  @Override
  public void write(DataOutput out) throws IOException {
    out.writeLong(tag);
    if (data != null) {
      out.writeBoolean(true);
      out.writeUTF(data);
    } else {
      out.writeBoolean(false);
    }
  } 
```

它甚至非常易读。但请注意，如 JavaDocs 中所述，每条记录有一个字节的恒定开销`#writeBoolean`：

> 将布尔值写入此输出流。如果参数 v 为真，则写入值（字节）1；如果 v 为假，则写入值（字节）0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:07:01.530

NullWritable 是 Writable 的一种特殊类型，因为它具有零长度序列化。没有字节被写入流或从流中读取。如需进一步参考，请查看 hadoop 权威指南 pg:104

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:26:14.103

序列化时，**空对象的大小在**[Java 对象序列化协议](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/protocol.html)中正好是 1 个字节。`write`因此，我认为您的 custom 方法不会有任何问题`Writable`。

作为一般规则，这实际上取决于您要建模的内容。如果您尝试表示 a`Boolean`并且**null**表示它不在这里，您可能应该默认为 false。如果它是一个整数，您应该默认为您的数据集的默认值。因此，除非有一些与您提到的“特殊意义”相关的特定处理，否则我认为您可以编写**null**，否则您应该使用默认值。

# java - 使用 Hiveserver2 Thrift Java 客户端时请求挂起

> ID：15415904
> 
> 赞同：9
> 
> 时间：2013-03-14T17:16:25.727
> 
> 标签：java, hadoop, hive, thrift, hortonworks-data-platform

[这是这个问题](https://stackoverflow.com/questions/15372388/hiveserver2-java-api)的后续问题，我在其中询问 Hiveserver 2 thrift java 客户端 API 是什么。如果您不需要更多上下文，这个问题应该能够在没有该背景的情况下站得住脚。

找不到任何关于如何使用 hiverserver2 thrift api 的文档，我把它放在一起。我能找到的最佳参考是[Apache JDBC implementation](https://github.com/apache/hive/tree/trunk/jdbc/src/java/org/apache/hive/jdbc)。

```
TSocket transport = new TSocket("hive.example.com", 10002);

transport.setTimeout(999999999);
TBinaryProtocol protocol = new TBinaryProtocol(transport);
TCLIService.Client client = new TCLIService.Client(protocol);  

transport.open();
TOpenSessionReq openReq = new TOpenSessionReq();
TOpenSessionResp openResp = client.OpenSession(openReq);
TSessionHandle sessHandle = openResp.getSessionHandle();

TExecuteStatementReq execReq = new TExecuteStatementReq(sessHandle, "SHOW TABLES");
TExecuteStatementResp execResp = client.ExecuteStatement(execReq);
TOperationHandle stmtHandle = execResp.getOperationHandle();

TFetchResultsReq fetchReq = new TFetchResultsReq(stmtHandle, TFetchOrientation.FETCH_FIRST, 1);
TFetchResultsResp resultsResp = client.FetchResults(fetchReq);

TRowSet resultsSet = resultsResp.getResults();
List<TRow> resultRows = resultsSet.getRows();
for(TRow resultRow : resultRows){
    resultRow.toString();
}

TCloseOperationReq closeReq = new TCloseOperationReq();
closeReq.setOperationHandle(stmtHandle);
client.CloseOperation(closeReq);
TCloseSessionReq closeConnectionReq = new TCloseSessionReq(sessHandle);
client.CloseSession(closeConnectionReq);

transport.close(); 
```

我针对使用创建的 Hiverserver2 实例运行此代码

```
export HIVE_SERVER2_THRIFT_PORT=10002;hive --service hiveserver2 
```

调试时，我从来没有越过这条线

```
TOpenSessionResp openResp = client.OpenSession(openReq); 
```

客户端只是挂起，直到达到超时并且服务器不向标准输出或日志写入任何内容。使用 Wireshark，我可以看到 OpenSession() 的 TCP 段已发送并确认。一旦我杀死客户端或达到超时，服务器会给我以下信息：

```
13/03/14 11:15:33 ERROR server.TThreadPoolServer: Error occurred during processing of message.
java.lang.RuntimeException: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
    at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:219)
    at org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:189)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.thrift.transport.TTransportException: java.net.SocketException: Connection reset
    at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:129)
    at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
    at org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:182)
    at org.apache.thrift.transport.TSaslServerTransport.handleSaslStartMessage(TSaslServerTransport.java:125)
    at org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:253)
    at org.apache.thrift.transport.TSaslServerTransport.open(TSaslServerTransport.java:41)
    at org.apache.thrift.transport.TSaslServerTransport$Factory.getTransport(TSaslServerTransport.java:216)
    ... 4 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)
    ... 10 more 
```

我发现有趣的是，当我错误地尝试对 hiveserver2 使用 hiveserver (1) 客户端时，我收到的错误完全相同，这表明就 hiverserver2 而言，我的客户端正在向它发送垃圾。

我看到了我可能出错的三种可能性。

1) 我对客户端 API 的使用是错误的。我看到在 JDBC 实现中有一些关于身份验证和连接参数的东西，我在我的示例代码中没有使用这些东西。我玩弄了它，但我在黑暗中拍摄并且没有进一步。

2）我有一些设置步骤错误。我无法在 hive-servive-0.10.0 jar 中找到 TCLIService，但我能够在 Hortonworks 在 HDP 1.2 中发布的 hive-servive-0.10.0.21 jar 中找到它，所以也许可以挖掘一下揭示问题。或者也许我需要配置服务器端的东西来解释为什么我可以使用 ODBC 但不能使用我的节俭客户端连接到配置单元。

3) 可能此时无法针对 hiveserver2 客户端 api 进行写入。由于缺乏文档和互联网上明显缺乏成功的例子，这是合理的，但 JDBC 似乎做到了。我发现这是最不可能的选择。

即使您不知道修复，知道修复是否属于 1、2 或 3 也将有助于缩小我的搜索范围。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T23:00:32.140

不确定您是否仍然遇到此问题，但由于我遇到了同样的问题并解决了它（也许绕过是更准确的描述），我会在这里发布一个解决方案，以防其他人需要它。

这是因为当您打开传输连接时，thrift 服务器期望通过 SASL 进行身份验证。Hive Server 2 默认使用 SASL - 不幸的是，PHP 缺少一个 TSaslClientTransport 版本（用作另一个 TTransport 对象的包装器），它在您打开传输连接时处理 SASL 协商。

目前最简单的解决方案是在 hive-site.xml 中设置以下属性

```
<property><name>hive.server2.authentication</name><value>NOSASL</value></property> 
```

# php - 使用两个标记的正则表达式

> ID：15415909
> 
> 赞同：0
> 
> 时间：2013-03-14T17:16:42.937
> 
> 标签：php, regex, html-parsing

如果我使用将整个网页 html 加载到 php 变量中

```
$html = file_get_contents('URL'); 
```

我使用以下方法将其内容写入文件：

```
$myFile = "localdownload.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $html);
fclose($fh); 
```

而且我总是知道我想要的内容介于

```
<div id="listing"> and <div class="cleared"></div> 
```

可以编写正则表达式来截断不在这两个标记之间的所有内容吗？所以它只会在这些标记之间写入内容。

任何帮助都会很棒。感谢过去帮助过我的每一个人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:48:44.400

你可以使用

```
$html = preg_replace(
    '/.*?<div id="listing">|<div class="cleared"><\/div>.*$/s', '', $html ); 
```

这将用空字符串替换从字符串开头到包含 的`'<div id="listing">'`所有内容，以及从包含到字符串结尾的所有内容。`'<div class="cleared"></div>'`

使用`s`修饰符以便`.`匹配换行符以及所有其他字符。

以上假设`<div id="listing">`并且`<div class="cleared"></div>`仅在字符串中出现一次。

# java - 突出显示 JXTreeTable 行

> ID：15415911
> 
> 赞同：1
> 
> 时间：2013-03-14T17:16:53.900
> 
> 标签：java, swing, swingx, jxtreetable, swingx-highlighter

我编写了以下代码来突出显示 JXTreeTable 中的一行，

```
 public void treeExpanded(TreeExpansionEvent te) {
        final HighlightPredicate myPredicate = new HighlightPredicate() {

            @Override
            public boolean isHighlighted(Component renderer,
                    ComponentAdapter adapter) {
                double val = Double.valueOf(String.valueOf(adapter.getValueAt(1, 17)));
                return testCondition(val);
            }

            public boolean testCondition(double val) {
                if (val > 10) {
                    System.out.println("Met");

                    return true;
                } else {
                    System.out.println("NMet");

                    return false;
                }

            }
        };
        ColorHighlighter highlighter = new ColorHighlighter(myPredicate,
                Color.RED, // background color
                null);       // no change in foreground color

        table.addHighlighter(highlighter);
    } 
```

它不工作。请帮助

# java - ORA-01461 / BLOB / 休眠

> ID：15415913
> 
> 赞同：7
> 
> 时间：2013-03-14T17:17:00.437
> 
> 标签：java, oracle, jdbc

我有一个 Oracle Database 10.2.0.4 实例。我有基于 spring 框架 3.0.5、hibernate 3.5.6 的 java 应用程序。我有一个带有 BLOB 列 ( `blobContent BLOB`) 的表和一个带有`java.sql.Blob`字段的实体（在休眠 XML 映射中映射为`<property name="blobContent" type="blob"/>`）。我使用Oracle10gDialect。

我得到 ORA-01461 定期尝试在此表中插入行。我尝试了几个 Oracle JDBC 驱动程序（10.2.0.4、10.2.0.5 和 11.2.0.3），但都没有成功。我在谷歌上搜索和搜索这个问题的金属链接数据库失败了。我反编译了 Oracle JDBC 驱动程序并检查了从方法`oracle.jdbc.driver.OraclePreparedStatement.setBinaryStream(int, InputStream, long)`thru `oracle.jdbc.driver.DBConversion`until开始的代码`oracle.jdbc.driver.OracleConversionInputStream`。

就这段代码可以认为是好的而言，一切看起来都很好:)

请告知如何跟踪此问题...可能在 Oracle 方面（？）...可能正在寻找一些隐式转换...可能我错过了一些关于此问题的已知 Oracle metalink 文章？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:57:09.513

我认为跟随 oracle 错误是我的错误的主要原因。升级数据库后，我将再次检查问题并接受我自己的答案。我希望它对其他人有用。

顺便说一下，我们的平台也是 AIX/64x。

> Oracle 错误 9018715“更新和插入时出现间歇性 ORA-1461，没有长列类型”

B 型 - 缺陷

已在产品版本 11.1.0.7.0 中修复

严重性 2 - 严重失去服务

产品版本 10.2.0.4.0

状态 93 - 已关闭，未由 Filer 验证

平台 212 - POWER 系统上的 IBM AIX（64 位）

创建于 2009 年 10 月 14 日

平台版本 5.3

201 年 12 月 27 日更新

基本错误 不适用

数据库版本 10.2.0.4.0

影响平台通用

产品来源甲骨文

# 问题：

ORA-1461: 只能绑定 LONG 值，以便在客户端应用程序中频繁接收插入到 LONG 列中。

该错误出现在插入和更新语句以及不同的表中。语句属于这种类型： 插入列 (, , ,..) 值 (:1, :2, :3, ...:n)；或更新集 = :1, = :2, = :3,.. = :n 其中 =:m; 并且没有一列是 lONG 类型的。

## 诊断分析：

将 rdbms 从 10.2.0.3 升级到 10.2.0.4 后，错误开始出现。它经常发生，并且在不同的表上。一旦发生错误，重新执行相同的 sql 通常会成功。

数据库字符集：WE8ISO8859P15。Windows 客户端。NLS 设置：NLS_LANG=American_America.WE8ISO8859P15。

应用程序通过 Jdbc 瘦驱动程序版本 10.2.0.1 连接。使用 jdbc 驱动程序版本 10.1.0.5 进行的测试也失败了。

# accelerometer - 多个寄存器/设备的 i2c

> ID：15415920
> 
> 赞同：2
> 
> 时间：2013-03-14T17:17:11.080
> 
> 标签：accelerometer, microcontroller, pic, i2c, mplab

我刚刚使用 i2c 从 PIC 微控制器 (dsPIC33) 成功读取 ADXL345 加速度计。到目前为止，我所做的只是正确读取设备 ID，它是一个字节。

以前使用过 ADXL345 的任何人都知道，要从 X、Y 或 Z 轴中的任何一个轴读取数据，会分为两个字节，例如“DATAX0”和“DATAX1”。数据表还特别指出“为确保数据一致性，建议使用多字节读取来从 ADXL345 检索数据”，因此需要将每个轴的两个字节收集在一起。

我的问题是，对于 i2c，当每个轴的两个字节由两个不同的寄存器表示时，我该怎么做？

![i2c 进程](../Images/a55bfd70d98aab50b46b0353ef420f18.png)

上图显示了 i2c 传输所需的过程。要从加速度计中读取数据，我们正在查看底部的两个图表，我上面粘贴的数据表引用表明我使用了底部图表（多字节），但正如我所说，这两个字节有两个不同的寄存器值（DATAX0 和 DATAX1 分别为 0x32 和 0x33）。

如何一次抓取一个轴的数据？我看到这样做的唯一方法是用一个寄存器地址读取单字节，然后用第二个寄存器地址再次读取，然后将两者连接在一起以获得一个轴数据。

这个问题也适用于从同一 i2c 总线上的各种不同设备收集数据，这些设备也会有不同的寄存器。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:51:34.863

您只需在 0x32 处读取 2 字节，设备会将 0x32 和 0x33 的值放入其响应中。

# regex - 每个正则表达式最后一场比赛

> ID：15415921
> 
> 赞同：0
> 
> 时间：2013-03-14T17:17:13.463
> 
> 标签：regex, perl

我有一个程序可以将它运行的周期数打印到日志文件中。我想检索日志文件中的最后一个值以找出运行的总循环数。我正在使用以下代码：

```
my @cycles = $log =~ /\s+(\d+)\s+Cycles/gsm;
$run{cycles} = $cycles[-1] if @cycles; 
```

是否有一个存储最后匹配值的 perl 特殊变量，以便我可以使用它而不是在数组中收集循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:51:22.397

您可以使用否定的前瞻断言：

```
($run{cycles}) = $log =~ /\s+(\d+)\s+Cycles(?!.*\s+\d+\s+Cycles)/gsm; 
```

意思是“找到一个数字序列，前面是空格，后面是空格和文字`Cycles`，后面没有另一个空格、数字、空格和文字的序列`Cycles`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:26:52.267

我认为这就是你想要的：

```
my @cycles = $log =~ /\s+(\d+)\s+Cycles/gsm;
$run{cycles} = $+ if @cycles; 
```

请注意，正如 squiguy 所说，`$1`应该也可以解决问题（至少它对我有用）。

最后，如果您真的不需要将所有循环保存在数组中，而只需要最后一个值，您可以这样做：

```
($run{cycles}) = $log =~ /.+\s(\d+)\s+Cycles/s; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:32:37.367

我不建议将整个日志文件读入内存，但是如果没有更多关于你在做什么的信息，我就无法编写适当的逐行解决方案。

带有修饰符的正则表达式模式*在下一次*匹配时`/g`停止，因此您只需要一个循环。*`while`*

 *请注意，使用`/m`or`/s`修饰符没有任何意义，因为它们所做的只是修改元字符`^`和`$`的功能`.`。由于您没有使用这些，它们没有任何效果。

```
while ( $log =~ /\s+(\d+)\s+Cycles/g ) {
    $run{cycles} = $1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:27:37.997

你的问题不完整。您没有显示将日志文件放入 $log 的代码部分。假设您的日志文件的名称在 $logFile 您的问题是如何改进：

```
my $log = do { local( @ARGV, $/ ) = $logFile ; <> } ;
my @cycles = $log =~ /\s+(\d+)\s+Cycles/gsm;
$run{cycles} = $cycles[-1] if @cycles; 
```

答案是一次读取一行日志文件：

```
open my $logFH,'<',$logFile
  or die "Could not open $logFile: $!";

my $cycles;
while (my $logLine = <$logFH>) {
    ($cycles) = $logLine =~ /\s+(\d+)\s+Cycles/;
}
close $logFH;

$run{cycles} = $cycles
  if $cycles; 
```

这样，您的程序仅使用 $logFile 中最长行的空间而不是整个文件的空间，以及存储单个循环而不是所有循环的空间。

也就是说，I/O 量相同，但内存使用量要低得多。

你原来的程序是：

1.  打开日志文件，抓取整个日志文件的内容，关闭 lofile
2.  查找所有记录的周期
3.  使用记录的最后一个周期（如果有）

这个程序是：

1.  打开日志文件
2.  一次读取一行日志文件
    *   记住上次看到的循环
3.  关闭日志文件
4.  使用上次看到的循环，如果有的话

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T21:16:57.840

为什么不直接使用[**`File::ReadBackwards`**](http://search.cpan.org/perldoc?File%3a%3aReadBackwards)并采用“第一条”匹配线。

```
$bw = File::ReadBackwards->new( 'log_file' ) 
    or die "can't read 'log_file' $!" 
    ;
while( defined( $log_line = $bw->readline ) ) {
    next unless m/\s+(\d+)\s+Cycles/;
    print;
    last;
} 
```

它*应该*快很多。*

# c# - 从 Windows 窗体将 int 和 string 添加到 mySQL

> ID：15415926
> 
> 赞同：0
> 
> 时间：2013-03-14T17:17:21.857
> 
> 标签：c#, mysql, windows, winforms

好的，所以我正在尝试连接到我的大学数据库服务器并允许我的程序的用户提交一个高分，然后将其存储在数据库中。我遇到的问题是数据没有被添加到数据库中，但没有收到任何错误或消息说它没有。

这是按钮的代码

```
private void btnSubmitScore_Click(object sender, EventArgs e)
{
    string connStr = "server=server; " +
                     "database=databse; " +
                     "uid=username; " +
                     "pwd=password;";

    string query = "INSERT INTO highscore('Name','Score')    VALUES (@Name, @Score);";
    using(MySqlConnection connection = new MySqlConnection(connStr))
    {
        Console.WriteLine(query);
        MySqlCommand insertCommand = new MySqlCommand(query,connection);
        insertCommand.Parameters.AddWithValue("@Name",sName);
        insertCommand.Parameters.AddWithValue("@Score",iTotalScore);

        try
        {
            connection.Open();
            insertCommand.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            Console.WriteLine("exception: " + ex);
        }
        connection.Close();
    }
} 
```

我的变量是 sName 和 iTotalScore，它们将被添加到数据库中名为“Name”和“Score”的两个字段中。我在网上查看过，但似乎无法找到解决方案。

如果有人可以提供帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:34:17.767

您的 INSERT 语句有问题。您不能将列名放在任何引号中。你的陈述应该是：

string query = "INSERT INTO highscore (Name, Score) VALUES (@Name, @Score);";

# module - JOOMLA 3.X，如何在后端编辑模块并在前端显示

> ID：15415927
> 
> 赞同：0
> 
> 时间：2013-03-14T17:17:23.660
> 
> 标签：module, joomla3.0

我对 Joomla 有点陌生。我需要设计一个在后端进行一些编辑并在前端显示输出的模块。以用户输入为例。我只需要在后端接受用户输入，并且必须在前端显示它。

我已经为此开发了一个模块，但它要求用户在前端输入。我只需要从后端的管理员那里获取输入，并将输出显示给前端的用户。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:13:22.933

因此，请检查基本系统模块的工作方式。查看 /modules 下的代码。你可以从那里学到很多东西。

基本上你可以在你的xml中定义一些参数/输入字段和东西。来自 mod_banners 的示例

```
 <field
                name="header_text"
                type="textarea"
                filter="safehtml"
                rows="3"
                cols="40"
                label="MOD_BANNERS_FIELD_HEADER_LABEL"
                description="MOD_BANNERS_FIELD_HEADER_DESC" /> 
```

然后在您的模块 php 文件中，您可以获得保存的值：

`$params->get('header_text')`

还要确保您没有[将模块与组件混淆。](http://docs.joomla.org/Extension_types_%28general_definitions%29)

欲了解更多信息检查：

[Joomla！开发者](http://docs.joomla.org/Developers)

[为 Joomla 2.5 创建一个模块](http://docs.joomla.org/Creating_a_Module_for_Joomla_2.5)

# iphone - UIView 加载不正确？

> ID：15415931
> 
> 赞同：0
> 
> 时间：2013-03-14T17:17:30.973
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我的 UIView 的代码文件在情节提要中设置了视图的自定义类。但是，当我运行应用程序并加载视图时，什么都没有发生？我没有得到任何 NSLog，屏幕上没有任何内容？有谁知道我做错了什么？我没有正确地处理某些事情吗？

我的 UIView 代码：

```
- (id)initWithFrame:(CGRect)frame
{
    NSLog(@"Drawling area loaded");
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{

    CGPoint dotOne = CGPointMake(1, 1);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotOne]];

    CGPoint dotTwo = CGPointMake(10, 10);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotTwo]];

    CGPoint dotThree = CGPointMake(100, 100);
    [squareLocations addObject:[NSValue valueWithCGPoint:dotThree]];

    int numby = [squareLocations count];

    for (int i = 0; i < numby; i++)
    {
        NSValue *pointLocation = [squareLocations objectAtIndex:i];
        CGPoint tmpPoint = [pointLocation CGPointValue];

        CGRect tmpRect = CGRectMake(tmpPoint.x, tmpPoint.y, 10, 10);

        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(context, 5.0);
        CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
        CGFloat components[] = {0.0, 0.0, 1.0, 1.0};
        CGColorRef color = CGColorCreate(colorspace, components);
        CGContextSetStrokeColorWithColor(context, color);
        CGContextMoveToPoint(context, tmpPoint.x, tmpPoint.y);
        CGContextAddLineToPoint(context, 300, 400);
        CGContextStrokePath(context);

    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:36:50.527

我认为你应该使用调试器来确保你的ivar在方法`squareLocations`中不是*nil*`drawRect:`。您可以向*nil*发送任何消息而不会出现任何错误，并且在 Objective-c 中实际上什么也不做。在方法中初始化`squareLocations`ivar`drawRect:`也可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:27:11.947

尝试添加此代码：

```
- (void)setup{
    self.contentMode=UIViewContentModeRedraw;
}
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setup];
    }
    return self;
}
- (void)awakeFromNib{
    [self setup];
} 
```

# asp.net-mvc-4 - 授权属性中断@Script.Render

> ID：15415933
> 
> 赞同：1
> 
> 时间：2013-03-14T17:17:44.663
> 
> 标签：asp.net-mvc-4, forms-authentication, asp.net-4.5, bundling-and-minification

我有一个捆绑的 ASP.Net MVC 4、.net 4.5 项目。当我将 [Authorize] 添加到我的控制器时，@Scripts.Render 和 @Styles.Render 调用因“对象引用未设置为对象的实例”而中断。

我不能为我的生活找出为什么！

有没有人遇到过这个？谁能帮忙？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Project.Models;
using Project.Repositories;

namespace Project.Controllers
{
    [Authorize]
    public class HomeController : Controller 
```

这打破了我的 _Layout 视图：

```
@model PageModel
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Project</title>
    <meta name="description" content="">    
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'/><meta name="apple-mobile-web-app-capable" content="yes" /> 
    <meta name="format-detection" content="telephone=no">

    @Styles.Render("~/Content/bootstrap")
    @Scripts.Render("~/bundles/jquery")        
    @Scripts.Render("~/bundles/initializr") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-06T04:15:50.447

我只想为此添加我的修复程序。我与它搏斗了最后一个小时，终于意识到它是什么。就我而言，它`@Scripts.Render("~/my/script/bundle")`包含一个 JavaScript 文件，其中包含一个简单的语法错误。就是这样。当我意识到它可能是什么时，我去看了 JavaScript 文件，果然，一条红色的小波浪线给了我手指。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:08:39.357

是的，在为此挠了几个小时并查看了各种不相关的地方之后，我已经解决了这个问题......

我的 _Layout 视图有一些其他 razor 调用正在查看向下的 pagemodel 属性，但是当我被重定向到登录以进行身份​​验证时，pagemodel 为空，这就是问题所在。

记住伙计们，Visual Studio 打破的界限并不总是与实际问题一致，尤其是在剃须刀中，应该早点记住这一点！往下看，在下一个语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T11:50:52.063

我以前经历过，我发现了我的错误。问题出在这一行`@Styles.Render("~/andia-agency/css")`（_Layout）

在 BundleConfig 文件中

```
 bundles.Add(
            new ScriptBundle("~/andia-agency/css")
            .Include("~/Content/andia-agency/assets/bootstrap/css/bootstrap.min.css")
            .Include("~/Content/andia-agency/assets/prettyPhoto/css/prettyPhoto.css")
            .Include("~/Content/andia-agency/assets/css/flexslider.css")
            .Include("~/Content/andia-agency/assets/css/font-awesome.css")
            .Include("~/Content/andia-agency/assets/css/style.css")); 
```

我将**新的 ScriptBundle**更改为**新的** **StyleBundle**。这可能会解决您或其他人的问题。

# php - PHP类方法将参数视为对象而不是字符串/动态解释参数数据类型

> ID：15415935
> 
> 赞同：-2
> 
> 时间：2013-03-14T17:17:48.153
> 
> 标签：php, object, php-5.2, interpreted-language, loose-typing

我今天发现了一些新东西。

我有一个带有典型成员、私有、公共和受保护方法的 PHP 类。

其中一种方法是：

```
protected function processThis($dataString)
{
   $dataStringJson = json_decode($dataString);

} 
```

这会发出警告：

**json_decode() 期望参数 1 是字符串，对象在 .../File.php 的第 xxx 行**

等一下，PHP 不是松散类型和动态解释的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:22:09.367

当然可以，但有些功能最好提醒人们他们正在做一些奇怪的事情。您还将收到警告`$f = "1"; array_shift($f);`。

如果您`json_decode`只想工作，那么转换为字符串很容易：

```
protected function processThis($dataString)
{
   $dataStringJson = json_decode(''.$dataString);
} 
```

# asp.net-mvc-4 - 部署到服务器时 CSLA 权限失败

> ID：15415936
> 
> 赞同：0
> 
> 时间：2013-03-14T17:17:52.953
> 
> 标签：asp.net-mvc-4, csla

我有一个 ASP.NET MVC 4 应用程序，它使用 CSLA.NET 作为我们业务逻辑的一部分。读/写权限由域帐户通过 AD 处理，该帐户与应用程序池标识和 .NET 模拟用户相同。在我的本地机器上测试时，验证运行良好。将应用程序部署到我们的一个测试环境（dev 或 qa）后，我会收到似乎指向权限的异常。我已验证程序集使用的用户名确实是正确的用户，但由于没有适当的权限，无法设置任何字段的值。

以前有人经历过这样的事情吗？

编辑：

[链接到 lhotka.net 论坛上的讨论](http://forums.lhotka.net/forums/p/11881/55091.aspx#55091)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T04:56:11.263

Web 服务器是无状态的，因此它们通常不会记住页面或服务请求之间的任何内容。这包括用户的身份和角色。

如果您使用的是 ASP.NET 表单安全性（或类似的），则将使用 .NET authn cookie 令牌在服务器上自动重新创建*用户名*，但这只是用户名。

您负责在服务器上为每个回发/请求重新创建完整的主体/身份对象。

最简单的方法是在 global.asax 文件中，通常在身份验证请求事件中。CSLA 下载中的示例显示了如何执行此操作，我在“使用 CSLA 4”电子书系列中进行了讨论。

此外，任何好的 ASP.NET 书籍都将讨论恢复主体，因为这不是一个真正的 CSLA 问题，而是一个 Web 开发问题。

# javascript - Cross Domain http get requests

> ID：15415940
> 
> 赞同：0
> 
> 时间：2013-03-14T17:18:14.477
> 
> 标签：javascript, jquery, get

I need to make a cross domain ajax call to a server I own but the problem is that the request must come from the client not the server so proxies wont work for me. Our server will be behind a vpn so it won't be able to reach the internet but the client will be able to so we wanted to do a call home from the client to our metrics server to validate a product key.

My remote domain has a php script that simply writes either a 0, 1, or 2\. I need my javascript to read this value in and react to it.

I want to do something simple like this but clearly it won't work. Any suggestions?

```
 $.ajax({
                url: callHomeUrl,
                type: 'GET',
                success: function(res) {
                    document.write($(res.responseText).text());
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:32:25.683

您可以使用 JSONP 样式实现来访问您的服务器，该服务器可以在所有浏览器上运行，无需 CORS！

例子 -

```
var script=document.createElement('script'):
   script.type='text/javascript'; script.src='path/to/the/file';
document.getElementsByTagName('head')[0].appendChild(script); 
```

请注意，服务器中的文件应输出 javascript 函数以及任何相关数据。

# drupal-7 - Drupal 7 - Latest News block or view with thumbnails for the sidebar

> ID：15415941
> 
> 赞同：1
> 
> 时间：2013-03-14T17:18:15.800
> 
> 标签：drupal-7, views, feed

I'm developing a website with Drupal 7, and I need to manage a module for the latest news. The "Latest contents" core module it's not enough for my needs.

So I have 2 questions:

1) Does exist a module that provides a block similar to the image I am attaching to this post? (thumbnail+article date+article title)

2) If it doesn't exist: How can I create a block to obtain my own latest news block? (may be I can modify some existing module?)

![The image is a mockup for what i need](../Images/68b23b617bb5de3eb2b2f8e571ab6864.png)

Help me with some hint, please...

# jquery - jQuery 在 HTML 输入使用自动对焦时执行操作

> ID：15415945
> 
> 赞同：1
> 
> 时间：2013-03-14T17:18:33.517
> 
> 标签：jquery, html

我有几页有很长的表格。其中一些表单是预先填充的，如果表单顶部有一个预先填充的字段，我使用自动对焦来自动允许用户开始在该字段中输入。

除了这些字段之外，我偶尔还会在字段旁边弹出“注释”，以提供更多关于他们输入内容的指导。这些注释仅在用户专注于输入字段时出现。

这是在焦点输入旁边显示字段的代码：

```
$('input[type="text"]').focus(function(){
    var hasCont = $(this).parent().siblings('.cont-note').length;
    if(hasCont == 1){
        $(this).parent().siblings('.cont-note').fadeIn(400);    
    }
}); 
```

不幸的是，这不适用于 html 输入的自动对焦。我想避免使用jQuery专注于一个字段，我宁愿使用html（为了便于修改）

我的目标是：如果在具有自动对焦的输入字段旁边有注释，则显示注释。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:22:12.850

您可以根据元素是否具有 autofocus 属性来过滤元素，然后触发焦点事件以使焦点事件处理程序触发等。但是只有一个元素可以具有焦点，因此使用 first() 可能会很好主意 ？

```
$('input[type="text"]').focus(function(){
    var hasCont = $(this).parent().siblings('.cont-note').length;
    if(hasCont == 1){
        $(this).parent().siblings('.cont-note').fadeIn(400);    
    }
});

$('input[type="text"]').filter(function() {
    return $(this).prop('autofocus');
}).first().trigger('focus'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:28:20.900

为什么不使用 .attr() 函数？您为输入字段提供一个名为 noteID 的额外属性，并在获得焦点时使用 .attr() 函数来获取 ID。现在您可以选择而不必在 DOM 中四处寻找。

```
$('.hasNote').focus(function() {
    var noteID = $(this).attr("noteID");
    $('#' + noteID).fadeIn(400);
};

<input type="text" class="hasNote" id="whatever" noteID="same as the note id" />
<note id="noteID"> 
```

显然我只是在这里使用 ID，更改`<note`为您需要的任何元素。

# algorithm - Sort object pairs into separate bins

> ID：15415950
> 
> 赞同：0
> 
> 时间：2013-03-14T17:18:41.363
> 
> 标签：algorithm

I have N object pairs (master copy/slave copy) all with the same size. I wish to distribute the copies among M bins each with a **different** capacity so that no bin will include both the master and slave copy.

What's the most efficient algorithm? And **more importantly** what's the most efficient algorithm to find out if there is a possible solution for a given input (without actually generating the solution)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:25:32.160

很难想象有比蛮力更好的方法：通过递减剩余容量来跟踪优先队列中的 M 个 bin，并将每个对象对添加到队列中的前两个 bin；重新平衡队列并重复。如果 M 个 bin 的总容量 >= 2*N，则存在解决方案。

这似乎是复杂度 O(N * log M)

注意：对于恰好三个箱，不存在 N > M1 + M2 的解决方案，其中 Mn 是箱 n 的容量，按 n 在 0..M 范围内的容量降序排序，与 M0 的容量无关。

同样对于恰好 2 个 bin，解决方案仅存在于 N <= M1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:28:22.463

一个简单的解决方案是：

将 M 个桶按照容量降序排列：x1, x2,..,xm

选择最上面的两个桶，为该对分配一个对象，减少两个桶的可用容量并重新排列桶。您可以使用堆来跟踪存储桶，复杂度接近 O(n)

不断重复，直到所有对象都分配完毕。

# jquery - 如何让 ASP.Net (C#) AJAX 与这部分 jQuery AJAX 很好地配合使用？

> ID：15415951
> 
> 赞同：0
> 
> 时间：2013-03-14T17:18:45.503
> 
> 标签：jquery, asp.net, ajax

我有一个 ASP.Net 下拉列表。When a certain value is selected, I want some line breaks to show up. 我正在使用 jQuery 执行此操作，因为我不知道如何使用 ASP.Net 选择换行符。问题是，我还有一个使用相同下拉列表触发的 UpdatePanel。他们可以一起工作吗？

ASP.NET：

```
 <asp:DropDownList ID="ddlHowMany" runat="server"  
                        onselectedindexchanged="ddlHowMany_SelectedIndexChanged" 
                        style="margin-left: 8px" Width="50px" AutoPostBack="True" Height="22px">
                    </asp:DropDownList>
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate>
                        <br class="space" />
                        <br class="space" />
                        <asp:TextBox ID="txtGraphic1Desc" class="descriptions" runat="server" Height="92px" 
                            TextMode="MultiLine"
                            Width="260px" Font-Names="Trebuchet MS" Visible="False">Description of graphic #1</asp:TextBox>
                        <br class="space" />
                        <br class="space" />
                        <asp:TextBox ID="txtGraphic2Desc" class="descriptions" runat="server" Height="92px" 
                            TextMode="MultiLine"
                            Width="260px" Font-Names="Trebuchet MS" Visible="False">Description of graphic #2</asp:TextBox>
                        <br class="space" />
                        <br class="space" />
                        <asp:TextBox ID="txtGraphic3Desc" class="descriptions" runat="server" Height="92px" 
                            TextMode="MultiLine"
                            Width="260px" Font-Names="Trebuchet MS" Visible="False">Description of graphic #3</asp:TextBox>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="ddlHowMany" />
                    </Triggers>
                </asp:UpdatePanel> 
```

jQuery：

```
 $.ajax({
            url: "Default.aspx",
            type: 'POST',
            complete: function () {
                if ($('#<%=ddlHowMany.ClientID %> option:selected').val() != "0") {
                    $('br.space').css({ display: 'block' });
                }
                else {
                    $('br.space').css({ display: 'none' });
                }
            }
        }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:24:11.023

您需要添加您的代码，`ScriptManager.RegisterStartupScript()`而不是使用 jQuery 进行 POST。让我们`UpdatePanel`做 AJAX 的事情，然后调用 jQuery。

另请注意，您不能像这样使用 jQuery 在 ASP.NET WebForms 中执行 AJAX POST。您必须调用`__doPostBack()`方法或调用`$(document.forms[0]).submit()`，以便 ASP.NET 内部的东西可以发挥它的魔力。

# box-api - How to get all users that can acces or view a file?

> ID：15415953
> 
> 赞同：1
> 
> 时间：2013-03-14T17:18:46.340
> 
> 标签：box-api

I need to get all users that have view permissions over a file. I´m watching this [http://developers.box.com/docs/](http://developers.box.com/docs/), but only can see the creator, the owner and the last user who modified the file. Is there any way to get this? Thanks, Cristian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:01:10.253

Box 中的权限在文件夹级别处理。为了弄清楚哪些用户可以访问给定文件，您需要[在其父文件夹上获取“协作”，](http://developers.box.com/docs/#folders-view-a-folders-collaborations)例如对于文件夹 ABC 中包含的文件 123，我会这样做

```
GET https://api.box.com/2.0/folders/ABC/collaborations 
```

# c# - Passing a sqlcommand as a parameter. Throws invalid object error even if the object exist in the database

> ID：15415955
> 
> 赞同：0
> 
> 时间：2013-03-14T17:18:51.217
> 
> 标签：c#, sqlcommand

I have a problem with the following code. Please help.

What I am trying to do is pass a sqlcommand to a function which then returns a dataset.

**The function 'Get data' takes sqlcommand as a parameter. This function is in class 'DatabaseUtilities'**

```
 //Initializing sql connection
    static SqlConnection _Connection = new SqlConnection("Data Source=(local);Initial Catalog=db_Test;Integrated Security=True");

    //Connection property
    public static SqlConnection Connection
    {
        get {return _Connection;}
    }

    //The class that takes sqlcommand as parameter
    public static DataSet GetData(SqlCommand Command)
    {
        _Connection.Open();

        SqlDataAdapter Adapter = new SqlDataAdapter();
        Adapter.SelectCommand = Command;

        DataSet Table = new DataSet();

        Adapter.Fill(Table);

        _Connection.Close();

        return Table;
    } 
```

**This is how sqlcommand is passed into the above function. This function is from a different class.**

```
public DataSet GetLogByDate(string SearchValue)
    {
        Command.CommandType = CommandType.StoredProcedure;
        Command.Connection = DatabaseUtilities.Connection;

        Command.CommandText = "sp_GetLogByDate";
        Command.Parameters.AddWithValue("@LogDate", SearchValue);

        return GetData(Command);
    } 
```

**This code throws the fllowing error.**

Invalid object name 'sp_GetLogByDate'.

I do have the above stored procedure in my database. I have no idea why this happened. Could anyone help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:21:19.473

您必须`Command`连接`Connection`：

```
//The class that takes sqlcommand as parameter
public static DataSet GetData(SqlCommand Command)
{
    Command.Connection = _Connection; 
```

# c# - 按引用而不是按值传递，为什么？

> ID：15415961
> 
> 赞同：2
> 
> 时间：2013-03-14T17:19:10.430
> 
> 标签：c#, reference

我想要做的是将我的播放器列表的名称和分数转储到一个临时数组中进行排序，以便它们可以显示在记分牌上。

出于某种原因，它似乎保留了对值的引用，而不是值本身。对记分牌进行排序后，每个条目都会显示“玩家 4 - 得分 4”。我知道排序方法有效，我以前在另一个游戏中使用过它。

初始值为 player1 - 1 player2 - 2 player3 - 3 player4 - 4

缺少的一件事是每次更新都将分数转储到分数列表中。在尝试重新安排事情以使其正常工作后，我将其取出。

请帮助我理解为什么会这样。我在这里阅读了这篇文章，但并没有太大帮助。 [http://msdn.microsoft.com/en-us/library/0f66670z(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/0f66670z(v=vs.71).aspx)

初始化

```
 ScoresList = DumpListToArray(PlayerManager.PlayerList); 
```

更新

```
SortKillScores(ScoresList); 
```

画

```
private static void DrawKillScores(SpriteBatch spriteBatch)
    {
        for (int i = 0; i < 4; i++)
        {
            spriteBatch.DrawString(font, "" + ScoresList[i].Name + " - " + ScoresList[i].KillScore, new Vector2(900, 0 + 20 * i), Color.White, 0f, Vector2.Zero, 0.5f, SpriteEffects.None, 1f);  
        }

    } 
```

方法

```
private static ScoreHolder[] DumpListToArray(List<Player> tempList)
    {
        ScoreHolder[] tempArray = new ScoreHolder[4];

        for (int i = 0; i < 4; i++)
        {
            tempArray[i] = new ScoreHolder();
            tempArray[i].Name = tempList[i].PlayerName;
            tempArray[i].KillScore = tempList[i].KillScore;
            tempArray[i].TimeScore = tempList[i].TimeScore;
            tempArray[i].PointScore = tempList[i].PointScore;
        }

        return tempArray;
    }

    private static void SortKillScores(ScoreHolder[] array)
    {
        for (int i = 0; i < array.Length; i++)
        {
            for (int k = i; k > 0 && array[k].KillScore > array[k - 1].KillScore; k--)
            {
                int score = array[k].KillScore;
                string name = array[k].Name;
                array[k] = array[k - 1];
                array[k - 1].KillScore = score;
                array[k - 1].Name = name;
            }
        }       
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:24:18.943

而不是试图将属性从一个单元格复制到另一个单元格，只需交换单元格：

```
private static void SortKillScores(ScoreHolder[] array)
{
    for (int i = 0; i < array.Length; i++)
    {
        for (int k = i; k > 0 && array[k].KillScore > array[k - 1].KillScore; k--)
        {
            var temp = array[k];
            array[k] = array[k - 1];
            array[k - 1] = temp;
        }
    }       
} 
```

您所拥有的是复制对同一项目的引用，`array[k]`然后编辑`k-1`其中*是同一项目的项目*！

```
int score = array[k].KillScore;
string name = array[k].Name;
array[k] = array[k - 1];          // cells k and k-1 are the same item!
array[k - 1].KillScore = score;   // this changes both k and k-1
array[k - 1].Name = name;         // and so does this! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:32:27.363

@MattBurland 似乎在这里涵盖了你，但是为了扩展，如果你只是想排序，你应该尝试使用该[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)方法。

```
private static ScoreHolder[] SortKillScores(ScoreHolder[] array)
{
    return array.OrderBy(e => e.KillScore);
} 
```

# java - Object dependency in Java (with listeners, in libgdx)

> ID：15415968
> 
> 赞同：0
> 
> 时间：2013-03-14T17:19:22.663
> 
> 标签：java, android, libgdx

I've got a main class containing

```
registerscreen = new registerScreen(this);
emailRegisterscreen = new emailRegisterScreen(this); 
```

The `registerScreen` contains a emailButton, with a listener, made in the constructor:

```
emailButton.addListener(new ClickListener() {
        @Override
        public void touchUp(InputEvent event, float x, float y, int pointer, int button) {
            super.touchUp(event, x, y, pointer, button);
            Gdx.app.log("registerscreen", "email clicked");
            gameHolder.setScreen(gameHolder.emailRegisterscreen);
        }
    }); 
```

`gameHolder` is the main class.

Now, this above example only works if I initialize `emailRegisterscreen` before `emailScreen` (the snippet above does not work). I was wondering if it's possible to get it working and still defining the registerscreen first?

I'm guessing Java uses the current value of `gameHolder.emailRegisterscreen` instead of a reference to it or something.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:33:00.453

Aaaand 我已经想通了。

我有一条线

```
Gdx.input.setInputProcessor(stage); 
```

在我的屏幕的两个构造函数中。这导致第二个屏幕覆盖输入处理器，同时向用户显示第一个屏幕。（因此我没有错误！）

使固定：

```
@Override
public void show() {
    Gdx.input.setInputProcessor(stage);
} 
```

将此添加到我的两个屏幕中。

# java - Spring 3 MVC + 安全性

> ID：15415969
> 
> 赞同：1
> 
> 时间：2013-03-14T17:19:26.820
> 
> 标签：java, spring, spring-mvc, spring-security

我有两个示例项目 - 第一个是 Spring 3 MVC 项目，第二个是 Spring 3 安全项目......两者都运行良好......但是当我尝试创建应用程序时，我同时实现了安全性和 MVC，我可以' t意识到如何使它工作。我的应用程序结构如下所示： ![在此处输入图像描述](../Images/c51e4b1c1e43b792f4892c53150cefbd.png)

当我有jsp页面时，`/`安全工作......但是当我想让它们`/WEB-INF/views`能够`@Controller`为他们映射时，它就不起作用了......有人可以请教我，在哪里改变什么，使它与 JSP 一起工作`/WEB-INF/views/`？

我的配置文件：

`/WEB-INF/spring/appServlet/servlet-context.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="cz.cvut.fit" />

    <context:component-scan base-package="com.chickstarter.web" />
<resources location="/resources/**" mapping="/src/webapp/resources"/>

     </beans:beans> 
```

`/WEB-INF/spring/appServlet/web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    
 xmlns="http://java.sun.com/xml/ns/javaee"   
 xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
 <context-param>
 <param-name>contextConfigLocation</param-name>
 <param-value>/WEB-INF/spring/root-context.xml</param-value>
 </context-param>
 <listener>
 <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>
 <servlet>
<servlet-name>appServlet</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>appServlet</servlet-name>
 <url-pattern>/</url-pattern>
 </servlet-mapping>
<!-- START: Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- END: Spring Security -->
 <servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext-web.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
 <servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/data/*</url-pattern>
</servlet-mapping>
</web-app> 
```

`/src/main/resources/applicationContext-sexurity.xml`

```
<beans xmlns:security="http://www.springframework.org/schema/security"
   xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://www.springframework.org/schema/security
             http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http pattern="/login.jsp*" security="none"/>
<security:http pattern="/denied.jsp" security="none"/>

<security:http auto-config="true" access-denied-page="/denied.jsp" servlet-api-provision="false">
    <security:intercept-url pattern="/login.jsp*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <security:intercept-url pattern="/edit/**" access="ROLE_EDIT"/>
    <security:intercept-url pattern="/admin/**" access="ROLE_ADMIN"/>
    <security:intercept-url pattern="/**" access="ROLE_USER"/>
    <security:form-login login-page="/login.jsp" authentication-failure-url="/denied.jsp"
                         default-target-url="/home.jsp"/>
    <security:logout/>
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="adam" password="adampassword" authorities="ROLE_USER"/>
            <security:user name="jane" password="janepassword" authorities="ROLE_USER, ROLE_ADMIN"/>
            <security:user name="sue" password="suepassword" authorities="ROLE_USER, ROLE_EDIT"/>
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager>

 </beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:30:32.560

首先，您在 web.xml 中定义了 2 个调度程序 servlet，一个加载 applicationContext，另一个加载 servlet-context。这真的有必要吗？如果您真的想拆分文件，可以在 servlet-context 中使用 import 标记。

其次，您还有 2 个`<resources>`标签。第一个就足够了，因为路径扫描从 webapp 文件夹开始。

第三，让您的所有 jsp 只能从它们的控制器访问。排除您想在没有身份验证的情况下访问的 url：

`<security:intercept-url pattern="login/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>`

以上将排除`RequestMapping`以下控制器可访问的所有资源：

登录控制器：

```
@Controller
@RequestMapping("login")
public class LoginController 
{

    @RequestMapping(method = RequestMethod.GET)
    public String login(Authentication authentication)
    {
        if ((authentication != null) && authentication.isAuthenticated())
        {
            return "redirect:dashboard";
        }
        return "login";
    }

    @RequestMapping(value="doSomething", method = RequestMethod.POST)
    public String postLogin(Authentication authentication)
    {
        // Something else
    }

} 
```

返回的“登录”将打开您定义的页面，`InternalResourceViewResolver`并在 WEB-INF/views 下查找该页面。

在您的安全文件中，将所有路径从 jsp 路径更改为`RequestMapping`路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:44:02.293

您在不使用处理程序的情况下直接访问一些 jsp。例如

```
<security:intercept-url pattern="/login.jsp*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
<security:form-login login-page="/login.jsp" authentication-failure-url="/denied.jsp"
                     default-target-url="/home.jsp"/> 
```

因此，安全性将一直有效，直到它在根目录下找到您的登录名、被拒绝和 home jsp。

您可以做的最简单的事情是将它们更改为 /WEB-INF/views url。但是我认为直接访问jsp并不是一种做法。您应该使用处理程序方法。下面我举个例子。

```
@RequestMapping(value="login", method= RequestMethod.GET)
public String showLogin(){
    return "login";
} 
```

然后为请求映射 url 应用安全性。

```
<security:intercept-url pattern="login" access="IS_AUTHENTICATED_ANONYMOUSLY"/> 
```

现在您的安全逻辑不与您的文件物理位置绑定。保持松散耦合总是好的。

使用 spring[安全文档](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html)了解更多详细信息。

# php - How to pass php directory files into javascript array?

> ID：15415970
> 
> 赞同：0
> 
> 时间：2013-03-14T17:19:28.977
> 
> 标签：php, javascript, arrays, directory

I am trying to create an image slideshow from a directory on my local server. I'm using php to access the files using `readDir()`. I them want to pass the variables into a javascript array to then access whatever feature I want with them. Right now I'm just trying to print them out to the screen, to make sure it works, but I'm not getting anything on the screen at all.

```
<html>
  <head>
  </head>
  <body>
    <script type = "text/javascript">
      var images = new Array();
<?php
$dp = opendir("img/slideshow");
while($currentFile !== false){
  if($currentFile != "." && $currentFile != ".."){
    $currentFile = readDir($dp);
    echo("images.push('{$currentFile}');");
  }
}
?>
      for(var i = 0; i < images.length; i++){
        document.write("<a href = '" + images[i] + "'>" + images[i] + "</a>");
      }
    </script>
  </body>
</html> 
```

It seemed pretty logical to me. I start out with creating the javascript array, then in the php part, I open, and read the directory then echo out a line of code that pushes the current file into the javascript array. Then it should print out each array item, but I'm getting a blank screen. ****Note: if I place the files into a php array and print it out, it works just fine but I can't access the array through javascript and put animations to it****

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:24:42.853

您可以使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php). 例如：

```
<html>
  <head>
  </head>
  <body>
    <script type = "text/javascript">

<?php
$dp = opendir("img/slideshow");
$arrayjs = array();
while($currentFile !== false){
  if($currentFile != "." && $currentFile != ".."){
    $currentFile = readDir($dp);
    $arrayjs[] = $currentFile;
  }
}
echo "var images = " . json_encode($arrayjs) . ";";
?>

      for(var i = 0; i < images.length; i++){
        document.write("<a href = '" + images[i] + "'>" + images[i] + "</a>");
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T14:39:28.177

```
<?php
$dir="img/slideshow";//set the working directory
$pics= scandir($dir) ;//Makes a array with all the items of the array
unset($pics[0],$pics[1]);//first and second ellement are the "."".." is nesecery to unset!
$string = '<script type ="text/javascript">var images =[ ';
foreach($pics as $key => $item) {
$string.='"'.$item.'",';
}
echo substr($string, 0, -1)."];</script>"; ?> 
```

# c++ - Using the same variable as input/output in a function

> ID：15415971
> 
> 赞同：0
> 
> 时间：2013-03-14T17:19:29.297
> 
> 标签：c++, qt, opencv

I'm writing a Qt GUI program in conjuction with OpenCV to create a people tracking application. OpenCV has a lot of functions that take a matrix as input and output, for example a color conversion one:

> cvtColor(inputArray src, outputArray dst, int code, int dstCn=0);

Mat is the default matrix class of OpenCV, and assuming I have a Mat object called frame, I would implement the function like this to change its properties:

> cvtColor(frame, frame, CV_RGB2HSV,0);

Is there any downside on using the same variable as input and output on any function? or should I create a copy first?

or should I look in every function documentation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:26:26.110

这是个人选择。如果您以后不需要输入图像，那么一定要这样做。实际上我已经尝试过了，它大部分时间都有效，但其他时候效果不佳。这取决于您使用的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:50:23.850

*我认为这是个人选择。以下是一些个人样本：*

获取只读输入、对输出的引用，并在处理输入后将其推送到输出。可选的错误结果友好。

```
bool function(const type& input, type& output){
    output = input;
    return true;
} 
```

获取只读输入，将其分配给输出，更改输出并返回它（C++11 移动优化）。

```
type function(const type& input){
    type output = input;
    return output;
}
type output = function(input); 
```

在这里，您强制对象的新副本作为参数，您可以使用它并返回它（当您不想更改副本时最好使用 C++11）。[另请参阅：**想要速度，按价值传递**。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/).

```
type function(type input){
    // modify input
    return input;
}
type output = function(input); 
```

1.  在同一个参数中输入和输出。谨慎使用。可以返回错误。

    bool function(type& put){ return true; }

**这取决于您的设计。**不需要错误？...使用可移动的。需要错误吗？...使用一个让您可以访问返回值的错误。或者，只需遵循现有做法，但要知道每种做法如何帮助或**惩罚您的表现，例如**：

```
// this makes a pointless copy for the input (use const ref here)
bool function(type input, type& output){
    output = input;
    return true;
} 
```

*（正确的方法是）*

```
bool function(const type& input, type& output){
    output = input;
    return true;
} 
```

**PS** : 自学 C++ 开发人员的个人意见 :)

# contiki - Is contiki scheduler preemptive?

> ID：15415973
> 
> 赞同：2
> 
> 时间：2013-03-14T17:19:37.677
> 
> 标签：contiki

Is contiki scheduler preemptive? Tinyos is not; there's nanork which i'm not sure of what state its development is in.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:41:28.553

Contiki 支持抢占式线程。参考：

[https://github.com/contiki-os/contiki/wiki/Multithreading](https://github.com/contiki-os/contiki/wiki/Multithreading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T19:14:19.810

Contiki-OS for IoT 支持抢占式多线程。在 contiki 中，多线程被实现为事件驱动内核之上的库，用于动态加载和替换单个服务。该库可以与需要多线程的应用程序链接。Contiki 多线程库分为两部分：(i) 独立于平台的部分 (2) 特定于平台。平台无关部分与事件内核接口，库的平台特定部分实现堆栈切换和抢占原语。Contiki 使用原型线程来实现所谓的多线程。Protothreads 是为严重的内存限制设备设计的，因为它们是无堆栈且轻量级的。protothreads的主要特点是：非常小的内存开销（每个protothread只有两个字节），线程没有额外的堆栈，高度可移植（即，它们完全用 C 语言编写，因此没有特定于体系结构的汇编代码）。Contiki 不允许中断处理程序发布新事件，Contiki 中不提供进程同步。中断处理程序（需要时）和读取器函数必须同步以避免竞争条件。另请查看以下链接 [The Ring Buffer Library]：[https://github.com/contiki-os/contiki/wiki/Libraries](https://github.com/contiki-os/contiki/wiki/Libraries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T20:24:43.320

值得注意的是，最广泛使用的传感器节点[TelosB](http://www.snm.ethz.ch/snmwiki/Projects/TmoteSky)**的端口不**支持抢占。

# scala - Scala 2.10 compiler takes 10x longer after first time in SBT

> ID：15415974
> 
> 赞同：8
> 
> 时间：2013-03-14T17:19:39.950
> 
> 标签：scala, scala-2.10

I'm updating some code from 2.9.1 to 2.10.0 (and I tried 2.10.1 with the same results), using SBT 0.12.1 in both cases.

When I run `sbt clean compile` on the command line, they both complete after about 250 seconds.

However, when I run `sbt` interactively, and repeatedly enter `clean` then `compile`, my 2.9 compiles get faster, but my 2.10 compiles get **10x slower**.

If I use a heap size of 768m, 2.10 runs out of memory on the 3rd compile. With a heap size of 4g, it's able to compile each time, but always 10x slower after the first iteration.

```
[success] Total time: 258 s, completed Mar 14, 2013 10:44:34 AM
[success] Total time: 2048 s, completed Mar 14, 2013 11:23:03 AM
[success] Total time: 2049 s, completed Mar 14, 2013 11:58:42 AM
[success] Total time: 2047 s, completed Mar 14, 2013 12:43:19 PM 
```

What is the best way for me to debug to find out what's going on?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T00:25:51.300

谢谢你的[CodeCache 链接](http://blogs.atlassian.com/2012/05/codecache-is-full-compiler-has-been-disabled/)。我最初驳回了它，因为使用其建议的`-XX:+UseCodeCacheFlushing`选项没有任何改进，但我只是尝试使用`-XX:ReservedCodeCacheSize=2g`并解决了问题。

有谁知道为什么`-XX:+UseCodeCacheFlushing`没有帮助，或者所有代码缓存 java 选项的一些推荐值？

为了好玩，这是我使用的编译时间`-XX:+HeapDumpOnOutOfMemoryError -server -XX:ReservedCodeCacheSize=2g -Xmx4g -Xss4M -XX:MaxPermSize=512M -XX:+DoEscapeAnalysis -XX:+UseCompressedOops -XX:+CMSClassUnloadingEnabled -XX:+UseCodeCacheFlushing`

```
2.10.1 (interactive, repeating clean/compile)
    194 s
    149 s
    95 s
    87 s
    84 s
2.9.1 (interactive, repeating clean/compile)
    187 s
    129 s
    83 s
    77 s
    74 s
2.10.1 (batch sbt clean compile)
    195 s
2.9.1 (batch sbt clean compile)
    177 s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:52:35.503

您可以从附加分析器或监视器开始，以查看 GC 发生了什么。要初步了解像 JVisualVM 这样的库存工具，应该就足够了。当然，如果你有 YourKit，那也可以。

**附录**

作为一个有点有趣但现在基本上无关紧要的事情，我最近发现 Scala 2.9.0-1 在编译 Specs2 测试时非常慢（至少是不可变的）。切换到 2.9.1 带来了巨大的变化。当我不得不向以前没有任何单元测试的项目添加一些单元测试并且编译时间变得痛苦时，我才注意到它。预感我切换到 2.9.1，一切恢复正常。

# fortran - Fortran operator precedence error for exponent with ifort

> ID：15415977
> 
> 赞同：6
> 
> 时间：2013-03-14T17:19:43.943
> 
> 标签：fortran, operator-precedence, intel-fortran

I am getting different behavior between Portland and Intel fortran compilers when evaluating a simple expression with an exponent followed by a multiply. I am pretty sure that pgf90 (and gfortran) are working correctly based on my understanding of operator precedence, but I would like a second opinion since these things can get a bit tricky.

Here is my code simplified down to a very basic form. When run with ifort the expression of the form `d1=a**-2*b` gets interpretted as `d1=a**(-2*b)` by ifort by as `d1=(a**-2)*b` by pgf90 and gfortran. If I remove the negative sign from the exponent, all three compilers interpret this as `d1=(a**2)*b`. If I change *b to +b I also get good behavior from all three.

```
program badvals
  implicit none
  real :: a, b, c1, c2, d1, d2

  a = 2.
  b = 4.

  ! Works with addition following the exponent.
  c1 = a**-2+b
  c2 = a**(-2)+b

  ! Ifort differs with multiplication following negative exponent.
  d1 = a**-2*b
  d2 = a**(-2)*b

  print*, "c1, d1       = ",c1, d1
  print*, "c2, d2       = ",c1, d2
  print*, "c2-c1, d2-d1 = ",c2-c1, d2-d1
end program badvals

!Program output for ifort v13.0.1.117: (either -O0 or -fast):
! c1, d1       =    4.250000      3.9062500E-03
! c2, d2       =    4.250000       1.000000
! c2-c1, d2-d1 =   0.0000000E+00  0.9960938

!Program output for pgf90 v12.10-0: (either -O0 or -fast):
! c1, d1       =     4.250000        1.000000
! c2, d2       =     4.250000        1.000000
! c2-c1, d2-d1 =     0.000000        0.000000

!Program output for gfortran v4.1.2: (either -O0 or -O3):
! c1, d1       =    4.250000       1.000000
! c2, d2       =    4.250000       1.000000
! c2-c1, d2-d1 =    0.000000       0.000000 
```

Is there a history behind these differences so that they should be considered a "feature"? Or, is this an outright bug on Intel's part?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:20:08.630

在网上搜索，我发现不允许两个连续运算符的说法。因此，解释而不是拒绝这个表达是对语言的扩展。该扩展已由不同的编译器供应商以不同的方式实现。

实际上，当我将 gfortran 与限制性编译器选项一起使用时，它会拒绝此代码示例：

```
badvals.f90:9.11:
  c1 = a**-2+b
           1
Error: Extension: Unary operator following arithmetic operator (use parentheses) at (1)
badvals.f90:13.11:

  d1 = a**-2*b
           1
Error: Extension: Unary operator following arithmetic operator (use parentheses) at (1) 
```

同样，具有限制性编译器选项的 ifort 提供以下内容：

```
badvals.f90(9): warning #7026: Non-standard extension
  c1 = a**-2+b
----------^
badvals.f90(13): warning #7026: Non-standard extension
  d1 = a**-2*b
----------^ 
```

所以：1）使用编译器的警告和错误选项会很有帮助，2）它更多的是一个扩展而不是一个错误，3）即使这个表达式是语言允许的，gfortran 的建议是好的——使用括号即使不需要也清晰。

# android-tabhost - what is the relation between TabHost and TabSpec..Is Tabhost a superclass for TabSpec..Also I want to understand the code given below

> ID：15415978
> 
> 赞同：1
> 
> 时间：2013-03-14T17:19:50.993
> 
> 标签：android-tabhost

TabHost th=(TabHost) findViewById(R.id.tabhost);

th.setup();

TabSpec ts= th.newTabSpec("tag1");

can anyone please tell me what is the significance of new in newTabSpec and and how th is being used in this code for newTabSpec

# c# - Board game pawn movement algorithm

> ID：15415980
> 
> 赞同：6
> 
> 时间：2013-03-14T17:19:54.260
> 
> 标签：c#, wpf, algorithm

I've been working on a board game with a friend of mine. We have managed to get most of it working. The game is called 'jeu de barricade'. Maybe you know it.

The whole board gets created using a Linked List so every field has a 'LinkNorth', 'LinkEast', 'LinkSouth' and 'LinkWest' variable.

Here is the board to give you an idea of how it looks like.

![Board Screen](../Images/532a913978c616e64a0f0818b6692dc3.png)
Now, there is one thing we just can't seem to figure out how to do. Currently, a pawn can be selected, and it can be moved to any field on the board. This of course is not good. What we need to do now, is write a method with some sort of algorithm that returns an array or list of the fields the pawn is able to move to. This way, we can check if the selected pawn is actually able to move to the field you clicked on, with the thrown dice number. (a random number from 1 till 6 is generated)
One more thing though. Every 'Field' class has a barricadePawn variable. When this variable contains a barricadePawn object. (barricadePawn != null) the pawn should not be able to move over it. The pawn should be allowed to move onto that field, but not any further. (when the player lands exactly on a barricade, he can move it. But we already implemented that, so don't worry about that)

So, in short.
- I want to create a method in our 'Pawn' class, which returns an array or list of all the fields that the pawn should be able to move to.
- The pawn should be able to move on barricades but NOT over them.
- The pawn has to move exactly the amount thrown by the dice. So, to get on the finish or on a barricade, you have to throw exactly the right amount.

We have these in our 'Pawn' class:
'currentLocation' contains the field that the selected pawn is currently standing on.

```
private Model.Field startLocation;
private Model.Field currentLocation; 

public List<Model.Field> getPossibleMoves(Model.Field curSpot, int remainingMoves, List<Model.Field> moveHistory)
    {
        List<Model.Field> retMoves = new List<Model.Field>();
        if( remainingMoves == 0 )
        {
            retMoves.Add(curSpot);
            return retMoves;
        }
        else
        {
            moveHistory.Add(curSpot);
            if( curSpot.LinkNorth != null && !moveHistory.Contains(curSpot.LinkNorth) )
            {
                retMoves.AddRange( getPossibleMoves( curSpot.LinkNorth, remainingMoves - 1, moveHistory ));
            }

            if (curSpot.LinkEast != null && !moveHistory.Contains(curSpot.LinkEast))
            {
                retMoves.AddRange( getPossibleMoves( curSpot.LinkEast, remainingMoves - 1, moveHistory ));
            }

            if (curSpot.LinkSouth != null && !moveHistory.Contains(curSpot.LinkSouth))
            {
                retMoves.AddRange( getPossibleMoves( curSpot.LinkSouth, remainingMoves - 1, moveHistory ));
            }

            if (curSpot.LinkWest != null && !moveHistory.Contains(curSpot.LinkWest))
            {
                retMoves.AddRange( getPossibleMoves( curSpot.LinkWest, remainingMoves - 1, moveHistory ));
            }
        }
    } 
```

And this is our 'Field' class:

```
public class Field
    {
        protected Field linkNorth, linkEast, linkSouth, linkWest;
        protected Controller.Pawn pawn;
        protected Model.BarricadePawn barricadePawn;
        protected int x, y;

        //Properties:
        public Field LinkNorth
        {
            get { return linkNorth; }
            set { linkNorth = value; }
        }
        public Field LinkEast
        {
            get { return linkEast; }
            set { linkEast = value; }
        }
        public Field LinkSouth
        {
            get { return linkSouth; }
            set { linkSouth = value; }
        }
        public Field LinkWest
        {
            get { return linkWest; }
            set { linkWest = value; }
        }
        public Controller.Pawn Pawn
        {
            get { return pawn; }
            set { pawn = value; }
        }
        public BarricadePawn Barricade
        {
            get { return barricadePawn; }
            set { barricadePawn = value; }
        }
        public int X
        {
            get { return x; }
            set { x = value; }
        }
        public int Y
        {
            get { return y; }
            set { y = value; }
        }
    } 
```

If anyone could help us with this, it would be much appreciated. We haven't been able to come up with anything.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:33:54.467

尝试创建递归方法。

```
List<Spot> CheckMoves(Spot curSpot, int remainingMoves, List<Spot> moveHistory)
{
    List<Spot> retMoves = new List<Spot>();
    if( remainingMoves == 0 )
    {
        retMoves.Add(curSpot);
        return retMoves;
    }
    else
    {
        moveHistory.Add(curSpot);
        if( !moveHistory.Contains(Spot.North) )
        {

            retMoves.AddRange( CheckMoves( Spot.North, remainingMoves - 1, moveHistory );
        }
        /* Repeat for E, W, S */
    }
} 
```

这将返回一个列表（其中 spot 是代表棋盘上位置的类），其中包含所有潜在的最终位置。当然，您需要更加彻底地确保 Spot.North 是一个有效的地点，但这对您来说是一个基本的想法。

上述方法不允许用户一次移动两次进入同一地点，但不会寻找路障或其他障碍物。它也不处理任何停止运动或在特定方向上不可能运动的点。

但是，它应该让您了解它应该如何进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:46:03.780

这样的事情应该这样做，

它递归地枚举每个链接并将`Field`s 添加到 a`HashSet`以防止重复。当`worp`倒计时到`0`，链接 is`null`或 a时递归停止`barrier pawn`。

```
public IList<Field> GetPossibleMoves(int worp)
{
    var valid = new HashSet<Field>();

    foreach (var f in GetPossibleMoves(current.LinkNorth, worp))
    {
        valid.Add(f);
    }

    foreach (var f in GetPossibleMoves(current.LinkEast, worp))
    {
        valid.Add(f);
    }

    foreach (var f in GetPossibleMoves(current.LinkSouth, worp))
    {
        valid.Add(f);
    }

    foreach (var f in GetPossibleMoves(current.LinkWest, worp))
    {
        valid.Add(f);
    }

    return valid.ToList();
}

private static IEnumerable<Field> GetPossibleMoves(Field current, int worp)
{
    if (current == null)
    {
        yield break;
    }

    yield return current;

    if (worp == 0 || current.BarricadePawn) // is that a bool?
    {
        yield break;
    } 

    foreach (var f in GetPossibleMoves(current.LinkNorth, nextWorp))
    {
        yield return f;
    }

    foreach (var f in GetPossibleMoves(current.LinkEast, nextWorp))
    {
        yield return f;
    }

    foreach (var f in GetPossibleMoves(current.LinkSouth, nextWorp))
    {
        yield return f;
    }

    foreach (var f in GetPossibleMoves(current.LinkWest, nextWorp))
    {
        yield return f;
    }
} 
```

可以通过省略向后移动的计算来优化它，这将防止大量`Add`s 从`HashSet`.

# ios - 在情节提要中实例化ViewControllerWithIdentifier

> ID：15415982
> 
> 赞同：0
> 
> 时间：2013-03-14T17:20:06.490
> 
> 标签：ios, storyboard, instantiation, tabbar

我制作了一个带有两个视图的标签栏控制器（来自模板的标准设置）。第一个视图是访问 dataController 对象中的数组。当我点击选项卡栏上的第二个视图时，我希望在第二个 viewController 的 dataController 属性上设置 dataController 引用。

我用电话

```
SecondViewController *vc = [[self storyboard] instantiateViewControllerWithIdentifier:@"SecondViewController"];
vc.dataController = self.dataController; 
```

但是，当我在 secondViewController 的 dataController 属性上调用 countArrayObjects 时，我总是返回 0 - 即使数组中应该有对象并且我不知道为什么？

我已经在 MainStoryBoard 的 secondViewController 上设置了标识符，并且没有崩溃，只是没有设置该属性（我认为）。

出于测试目的，我从一个简单的按钮调用 instantiateViewControllerWithIdentifier，然后点击 secondView。我从 secondViewController 上的 viewDidLoad 调用 countArrayObjects。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:12:51.873

嗯...我遇到了同样的问题。目前，我解决这个问题的唯一方法是测试视图超级视图是否为零 - 当它访问类的视图选择器时会触发视图确实加载事件......

不过，我们俩都在这里做错了……

这是我写的测试代码...

```
SummaryViewController *sc = [self.childViewControllers objectAtIndex:0];
if(sc.view.superview == nil) sc.checkInTime.alpha = 0;
//-- by inspecting the value, it will call the viewDidLoad method of the controller. 
```

它有效，但它是错误的。

# java - 如何从 jar (eclipse) 运行球衣服务器

> ID：15415985
> 
> 赞同：0
> 
> 时间：2013-03-14T17:20:16.617
> 
> 标签：java, jersey

我用 jersey 开发了一个小型服务器做

```
HttpServer server = HttpServerFactory.create("http://localhost:9998/");
server.start(); 
```

和一个像这样的小api：

```
@GET
@Path("serverconnectiontest")
@Produces(MediaType.APPLICATION_JSON)
public CommunicationResponseM isDatabaseOnline()
{
    CommunicationResponseM result = new CommunicationResponseM();

    return result;
} 
```

在 Eclipse 中，如果我使用 right_click->run as->java 应用程序启动服务器一切顺利，所以如果我在 Web 浏览器中键入路径，我可以看到服务器响应。

现在我想为我的服务器制作一个 jar，所以我这样做：right_click->export->runanble_jar 并且我得到了 jar 文件.. 但是如果我使用“java -jar file.jat”运行这个 jar，服务器不会回复并给我这个错误：

```
com.sun.jersey.spi.container.ContainerResponse write
SEVERE: A message body writer for Java class
it.unitn.se.gym.backend.models.CommunicationResponseM, and Java type class 
it.unitn.se.gym.backend.models.CommunicationResponseM, and MIME media type
application/json was not found

Mar 14, 2013 6:59:10 PM com.sun.jersey.spi.container.ContainerResponse write

SEVERE: The registered message body writers compatible with the MIME media type are:
application/json -> 
com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App

com.sun.jersey.core.impl.provider.entity.FormProvider
com.sun.jersey.core.impl.provider.entity.StringProvider
com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
com.sun.jersey.core.impl.provider.entity.ReaderProvider
com.sun.jersey.core.impl.provider.entity.DocumentProvider
com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
com.sun.jersey.json.impl.provider.entity.JSONWithPaddingProvider
com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy

Mar 14, 2013 6:59:10 PM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body     
writer for Java class it.unitn.se.gym.backend.models.CommunicationResponseM, and Java type   
class it.unitn.se.gym.backend.models.CommunicationResponseM, and MIME media type   
application/json was not found
at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
at    

   com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1479)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
at com.sun.jersey.server.impl.container.httpserver.HttpHandlerContainer.handle(HttpHandlerContainer.java:191)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:65)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:68)
at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:557)
at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:65)
at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:529)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:680)
 Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class    
it.unitn.se.gym.backend.models.CommunicationResponseM, and Java type class     
it.unitn.se.gym.backend.models.CommunicationResponseM, and MIME media type   
application/json was not found 
```

你能帮助我吗？

非常感谢！

如果我尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:35:26.090

您是否配置了指向要运行的 Main 类的 MANIFEST.MF 文件？更多信息[在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

# sql - 取同一张表中不同列的重复值

> ID：15415986
> 
> 赞同：0
> 
> 时间：2013-03-14T17:20:17.033
> 
> 标签：sql, sql-server-2008, group-by, duplicates, multiple-columns

如何在同一个表中获取不同列的重复值？

我认为这很简单。我有一张桌子：

```
Id    Column1     Column2
-------------------------
 1    John        red
 2    Patrick     white
 3    Alessia     yellow
 4    Aline       red
 5    Eva         orange
 6    John        blue
 7    Oscar       yellow
 8    Peter       red 
```

所以，我想要的结果是这样的：

```
Column1     Column2    Total1  Total2
-------------------------------------
John        red           2      3
Patrick     yellow        1      2
Alessia     white         1      1
Aline       orange        1      1
Eva         blue          1      1
Oscar                     1
Peter                     1 
```

所以：取重复项，对它们进行汇总和分组，然后对它们进行排序。

我只能用这样的一列来做到这一点：

```
SELECT TOP 5
  column1, COUNT(*) AS total1
FROM table
GROUP BY column1
ORDER BY total1 DESC 
```

但不可能用多于一列。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:46:19.690

您要求一种通用机制将两个关系 (Name, CountOfColorForName) 和 (Color, CountOfNameForColor) 组合成一个关系。没有通用的方法可以做到这一点；首先需要一个特定于应用程序的映射。给定这种映射，可以轻松编写适当的 SQL。

# c# - 仅从参数数组中调用某些值的总和

> ID：15415987
> 
> 赞同：1
> 
> 时间：2013-03-14T17:20:17.563
> 
> 标签：c#, loops

我试图弄清楚如何从参数数组中调用 10 以下的所有值的总和。

到目前为止，我已经弄清楚如何调用值的值。关于我如何/应该得到这个数字的任何想法？

```
static int SumVals(params int[] vals)//parameter array
    {
        int sum = 0;
        foreach (int val in vals) //for each integer value 
        {
            sum += val; //sum equals sum plus val. returns all values added together
        }
        return sum;
    }

    static void Main(string[] args)
    {
        int sum = SumVals(100, 5, 2, 9, 800);
        Console.WriteLine("Summed Values = {0}", sum);
        Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:24:32.217

在循环中添加 if 语句以仅添加 < 10 的值

```
foreach (int val in vals)
{
    if(val < 10)
    {
        sum += val;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:24:52.470

这是你想要做的吗？

```
static int SumVals(params int[] vals)
{
    return vals.Where(i => i < 10).Sum();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:24:54.940

```
static int SumVals(params int[] vals)//parameter array
    {
        int sum = 0;
        foreach (int val in vals) //for each integer value 
        {
            if(val < 10) //only add to the sum if value is less than 10
                 sum += val; //sum equals sum plus val. returns all values added together
        }
        return sum;
    }

    static void Main(string[] args)
    {
        int sum = SumVals(100, 5, 2, 9, 800);
        Console.WriteLine("Summed Values = {0}", sum);
        Console.ReadKey();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:24:30.117

```
 foreach (int val in vals) //for each integer value 
    {
        if(val <10)
         sum += val; //sum equals sum plus val. returns all values added together
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T17:25:07.817

您可以使用 LINQ 来做到这一点：

```
static int SumVals(params int[] vals)//parameter array
{
    return vals.Where(v => v < 10).Sum();
} 
```

您必须将其放在`using System.Linq;`文件的顶部才能使其正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T17:24:47.540

怎么样：

```
static int SumVals(params int[] vals)//parameter array
    {
        int sum = 0;
        foreach (int val in vals) //for each integer value 
        {
            if (val >=10) continue;
            sum += val; //sum equals sum plus val. returns all values added together
        }
        return sum;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T17:26:55.853

```
static int SumVals(params int[] vals)//parameter array
{
     return vals.Where(x => x < 10).Sum();
} 
```

# silverlight - Silverlight 登录的“记住我”选项

> ID：15415990
> 
> 赞同：1
> 
> 时间：2013-03-14T17:20:21.357
> 
> 标签：silverlight

我为 silverlight 导航应用程序创建了一个自定义登录页面，所以现在我需要为在 cookie 中保存用户名设置“记住”我选项。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-13T10:30:35.013

用于`IsolatedStorage`此。

帮助链接：

*   [链接一](https://www.c-sharpcorner.com/uploadfile/37db1d/working-with-isolated-storage-in-silverlight/)
*   [链接二](https://www.c-sharpcorner.com/uploadfile/b19d5a/state-management-in-silverlight-4-0-using-isolation-storage/)

# javascript - IF语句麻烦jQuery

> ID：15415993
> 
> 赞同：0
> 
> 时间：2013-03-14T17:20:34.067
> 
> 标签：javascript, jquery, if-statement

```
if(jQuery('.hero .contenido .activo').next().length > 0){
    jQuery('.hero .mas').click(function(){
        jQuery('.hero .contenido').find('.activo').fadeOut('fast');
        jQuery('.hero .contenido').find('.activo').removeClass('activo').next().fadeIn('fast').addClass('activo');
    });
} 
```

* * *

```
<div class="hero">
    <div class="nav">
        <div class="mas"></div>
        <div class="boton b1"></div>
        <div class="boton b2"></div>
        <div class="boton b3"></div>
        <div class="menos"></div>
    </div>
    <div class="contenido">
        <div class="uno activo"></div>
        <div class="dos"></div>
        <div class="tres"></div>
    </div>
</div> 
```

If语句不起作用，当div class =“tres”获得类“activo”时，就像这样`<div class="tres activo"></div>`没有“下一个” div，但IF语句仍然是TRUE，它永远不会停止......我希望有人能帮忙

我正在使用 jQuery.noConflict()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:27:01.250

if 语句位于 click 函数内部，而不是外部

```
jQuery('.hero .mas').bind('click', function(){
            if(jQuery('.hero .contenido .activo').next().length > 0){ 
```

[http://jsfiddle.net/9RCQL/](http://jsfiddle.net/9RCQL/)

# c# - 从视频设备类型中删除屏幕捕获

> ID：15415999
> 
> 赞同：1
> 
> 时间：2013-03-14T17:21:01.357
> 
> 标签：c#, wpf, expression-encoder

在 Microsoft.Expression.Encoder 中，是否可以从视频设备类型中删除屏幕截图。

如果我做

```
VideoDevices = EncoderDevices.FindDevices(EncoderDeviceType.Video); 
```

它返回给我 2 个设备（插入的网络摄像头和屏幕截图）

我不希望能够使用屏幕捕获作为录制设备。

我应该在检查它的名称时手动删除它，还是他们添加了某种功能以仅在视频设备中获取网络摄像头设备。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T12:06:34.950

是的，根据字符串匹配进行过滤似乎是您的最佳选择。

过滤名称“屏幕捕获源”或它`DevicePath`不包含子字符串“usb”的事实。