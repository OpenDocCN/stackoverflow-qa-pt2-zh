# StackOverflow 问答 15084000-15084999

# c - strncat 上的分段错误

> ID：15084006
> 
> 赞同：0
> 
> 时间：2013-02-26T07:51:58.940
> 
> 标签：c, string, char

我有以下代码：

```
struct prefix rnp;
char prefix[IPV6_PREFIX_STR_MAX_LEN];

...

strncat(prefix, "/", 1);  <----- WORKS OK
strncat(prefix, rnp.prefixlen, MAX_PREFIX_LEN); <------ SEG FAULT

... 
```

`rnp.prefixlen` 类型在哪里`u_int8_t`。

```
IPV6_PREFIX_STR_MAX_LEN = 45

MAX_PREFIX_LEN = 2 
```

的内容`prefix`是 192.13.6.0 和的`rnp.prefixlen`是 16

我真的不知道如何克服它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:10:24.793

如果`rnp.prefixlen`是*整数*（如 type 所示`u_int8_t`），那么您不能`strncat`使用它（整数将被强制转换为指针，然后被取消引用，这将导致未定义的行为）。

如果您的目标是将一些格式化文本写入字符串，请使用`sprintf`or`snprintf`代替：

```
sprintf(prefix, "/%d", rnp.prefixlen); 
```

`sprintf`并`snprintf`返回写入的字符数，因此您可以轻松跟踪字符串的结尾，而不会屈服于[Schlemiel the Painter 的算法](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:05:29.917

```
strncat(prefix, rnp.prefixlen, MAX_PREFIX_LEN); 
```

应该

```
strncat(prefix, rnp.prefixlen, IPV6_PREFIX_STR_MAX_LEN-1); 
```

由于 IPV6_PREFIX_STR_MAX_LEN 是“前缀”的大小，而不是 MAX_PREFIX_LEN。-1 是因为您已经在上一行中消耗了 1 个字节。

此外，如果**rnp.prefixlen**是**u_int8_t**类型，这意味着它不是字符串，不应使用 strncat 操作。尝试改用 memcpy/memmove。

# c++ - 为什么 ofstream("log.txt", ios::app|ios::trunc); 总是失败？

> ID：15084007
> 
> 赞同：9
> 
> 时间：2013-02-26T07:51:59.513
> 
> 标签：c++, iostream

以下代码是在 Windows 7 x64 上使用 VC++ Nov 2012 CTP 编译的。

```
#include <fstream>

using namespace std;

int main()
{
    ofstream fout("log.txt", ios::app|ios::trunc);
    if (!fout)
    {
        cout << "An error occurred!" << endl; // Always go here! Why?
    }
} 
```

[cppreference.com 网站](http://en.cppreference.com/w/cpp/io/ios_base/openmode)并没有说`ios::app`不能与`ios::trunc`.

和的**确切**语义是什么？`ios::app``ios::trunc`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-26T08:49:03.543

`filebuf`这些标志传递给的构造函数†^(具有)基于 C++11 中表 132 中定义的标志的行为：

```
+-----------------------------------+-------------------+
|     ios_base flag combination     |  stdio equivalent |
| binary  in    out    trunc    app |                   |
+-----------------------------------+-------------------+
|               +                   |  "w"              |
|               +               +   |  "a"              |
|                               +   |  "a"              |
|               +       +           |  "w"              |
|        +                          |  "r"              |
|        +      +                   |  "r+"             |
|        +      +       +           |  "w+"             |
|        +      +               +   |  "a+"             |
|        +                      +   |  "a+"             |
+-----------------------------------+-------------------+
|   +           +                   |  "wb"             |
|   +           +               +   |  "ab"             |
|   +                           +   |  "ab"             |
|   +           +       +           |  "wb"             |
|   +    +                          |  "rb"             |
|   +    +      +                   |  "r+b"            |
|   +    +      +       +           |  "w+b"            |
|   +    +      +               +   |  "a+b"            |
|   +    +                      +   |  "a+b"            |
+-----------------------------------+-------------------+ 
```

如您所见，在该表中找不到*您的标志组合。*

> `[C++11: 27.9.1.4/2]:` *[..]*如果`mode`不是表中显示的某些标志组合，则打开失败。

这些是语义。

^(^† `[C++11: 27.9.1.7/2]` &`[C++11: 27.9.1.11/2]`向我们展示模式是从流对象传递到缓冲区对象的。)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T08:03:46.943

*   **app** (=append)：在每次输出操作之前将流的位置指示器设置为流的末尾
*   **trunc** (=truncate) 任何当前内容都被丢弃，假设打开时长度为零。

如您所见，将两者放在一起是没有意义的。

# php - codeigniter 复选框值

> ID：15084008
> 
> 赞同：1
> 
> 时间：2013-02-26T07:52:00.567
> 
> 标签：php, codeigniter, checkbox

大家好，我刚开始使用 codeigniter 和 php。我正在制作一个简单的调查类型网站，带有复选框，问题将是多项选择，如果选中复选框，结果将存储在数据库中。我的问题是我将如何去做。这是我的表格，并提前感谢大家的帮助。

**看法**

```
<?php foreach($survay_data as $survay):?> 
    <ul>
        <li><h1><?php echo $survay->Question;?></h1></li> 
        <li><?php echo $survay->qA; ?><input type="checkbox" name="q1[]" value="qA"></li>
        <li><?php echo $survay->qB; ?><input type="checkbox" name="q2[]" value="qB"></li>
        <li><?php echo $survay->qC; ?><input type="checkbox" name="q3[]" value="qC"></li>
        <?php endforeach; ?>
        <input type="textarea" value='a' name="comment">
        <br>
        <input type="submit" value="Submit">
    </ul> 
```

**控制器**

```
<?php
    class Survay extends CI_Model{

        function dosurvay($arrData){

            $this->db->select('QID, Question, qA, qB, qC');
            $this->db->from('tblquestions');
            $this->db->where('Question', $arrData['Question']);
            $this->db->where('qA', $arrData['qA']);
            $this->db->where('qB', $arrData['qB']);
            $this->db->where('qC', $arrData['qC']);
            $this -> db -> limit(1);

            $query = $this -> db -> get();

            if($query -> num_rows() == 1)
            {
                return $query->result();
            }
            else
            {
                return false;
            }
        }
    }
?> 
```

**模型**

```
<?php
class Survaycontroller extends CI_Controller{
   // 'QID, Question, qA, qB, qC'

    function index()
    {

            $arrData = array();
            $arrData["qA"] = $this->input->post("qA");
            $arrData["qB"] = $this->input->post("qB");
            $arrData["qC"] = $this->input->post("qC");
            $arrData["Question"] = $this->input->post("Question");

            $this->load->model('survay');

            $survay_data = $this->survay->dosurvay($arrData);

            $viewData['survay_data'] = $survay_data;

            $this->load->view('survay_view', $viewData);
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:02:51.763

**这应该做你想要的。根据我们在 Stackover 上的聊天，我们已经为您提供了答案。您的问题不像您在聊天中提出的要求那么清楚。在下面找到可以解决您的问题的代码**

# CODEIGNITER的基本使用：

我提供这些代码只是为了减少我们的评论数量。可以肯定的是，您对 Codeigniter 还是很陌生。我只能尽我所能提供帮助。

**第 1 步：数据库**

> 创建数据库表“tblquestions”。字段应为 QID、qA、qB 和 qC。如果你有那么多，用最多 43 条记录填充字段。尽可能少的 5 条记录。

**第 2 步：模型**

```
<?php

class Survay extends CI_Model {

    function dosurvay($question_id = null) {

        $this->db->select('QID, Question, qA, qB, qC');
        $this->db->from('tblquestions');
        if ($question_id) {
            $this->db->where('QID', $question_id);
        }
        $this->db->limit(1);
        $query = $this->db->get();

        if ($query->num_rows() == 1) {
            return $query->result();
        } else {
            return false;
        }
    }

 function addsurvay($arrData) {

    $this->db->insert('tblanswers', $arrData);

    if ($this->db->affected_rows() > 0) {
        return $this->db->insert_id();
    } else {
        return false;
    }
}

}
?> 
```

**第 3 步：控制器**

```
<?php

class Survaycontroller extends CI_Controller {

    // 'QID, Question, qA, qB, qC'
    function __construct() {
        parent::__construct();
        $this->load->model('survay');
    }

    function index() {
        //This should select the survey question
        $data = array();
        $question_id = $this->uri->segment(3);
        $data[survay_data] = $this->survay->dosurvay($question_id);
        $this->load->view('survay_view', $data);
    }

    function addanswer() {
        //The answer is submitted to this...
        $arrData = array();
        $userid = null;
        if ($this->session->userdata("userid")) {
            $userid = $this->session->userdata("userid");
        }
        if ($this->input->post()) {
            $arrData["answerid"] = $this->input->post("QID");
            $arrData["questionid"] = $this->input->post("qA");
            if ($this->input->post("qA")) {
                $arrData["answerA"] = $this->input->post("qA");
            }
            if ($this->input->post("qB")) {
                $arrData["answerB"] = $this->input->post("qB");
            }
            if ($this->input->post("qC")) {
                $arrData["answerC"] = $this->input->post("qC");
            }
            $arrData["userid"] = $userid;
        }
        $viewData[survay_data_id] = $this->survay->addsurvay($arrData); //Get the ID of the answer stored
        $this->load->view('survay_view', $viewData);
    }

}
?> 
```

**第 4 步：视图**

```
<?php if(isset($survay_data)) : ?>
<form action="http://localhost/Surva/index.php/survaycontroller/addanswer/" name="myform" id="myform" method="post">
   <?php foreach ($survay_data as $survay): ?> 
        <ul>
            <li><h1><?php echo $survay->Question; ?></h1></li> 
            <li><?php echo $survay->qA; ?><input type="checkbox" name="qA" value="<?php echo $survay->qA; ?>"></li>
            <li><?php echo $survay->qB; ?><input type="checkbox" name="qB" value="<?php echo $survay->qA; ?>"></li>
            <li><?php echo $survay->qC; ?><input type="checkbox" name="qC" value="<?php echo $survay->qA; ?>"></li>
            <li><input type="hidden" name="QID" value="<?php echo $survay->QID; ?>"></li>
            <li><input type="submit" name="btn" value="Answer"></li>
        </ul>
    <?php endforeach; ?>
</form>
<?php endif; ?> 
```

测试它：

```
http://localhost/Surva/index.php/survaycontroller/index/2 
```

检索问题编号 2

现在这肯定会奏效。替换你已经拥有的一切。让我知道这些新代码集是否更有效地替换了我上面的代码集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:00:46.253

```
 <?php foreach($survay_data as $survay):?> 
<ul>
<li><h1><?php echo $survay->Question;?></h1></li> 
<li><?php echo $survay->qA; ?><input type="checkbox" name="q1[]" value="<?php echo $survay->qA; ?>"></li>
<li><?php echo $survay->qB; ?><input type="checkbox" name="q2[]" value="<?php echo $survay->qB; ?>"></li>
<li><?php echo $survay->qC; ?><input type="checkbox" name="q3[]" value="<?php echo $survay->qC; ?>"></li>
<?php endforeach; ?>
<input type="textarea" value='a' name="comment">
<br>
<input type="submit" value="Submit">
</ul> 
```

您需要将在数据库中检索到的数据作为复选框的值。在您的控制器上，您可以`var_dump($this->input->post())`查看已提交的数据，然后您可以随意操作它。

**扩展了一点：**

简而言之，您正在尝试将数据库中的值分配给值 attr，当用户选中复选框时，该值将作为值发送。

无论您在将接收您的数据的控制器中使用的`form_open()`是标准标签类型还是标准`<form>`标签类型。

```
function dosurvay($arrData){

    // you're get survay things here

    if($this->input->post())// will execute only if a post happens
    {
       echo '<pre>';
       print_r($this->input->post()); // just print out everything
       echo '</pre>';
    }
} 
```

# c# - 需要在 C# 控制台应用程序中实现线程和信号量

> ID：15084009
> 
> 赞同：0
> 
> 时间：2013-02-26T07:52:00.790
> 
> 标签：c#, multithreading, console, semaphore

目标是触发一个 url（来自报告服务器的报告）。

我有一个返回行的 sql 请求。假设它返回 1000 行，我需要一次触发所有这些 URL，批量或 100 个块，这样服务器性能就不会受到影响。

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Net;
namespace ConsoleApplication1
{
    class Program
    {

        static void Main(string[] args)
        {

           Console.WriteLine("hello");
            string connectionString = "Server=Mayank-Pc;Database=reportserver;User=sa;Password=mayank;Trusted_Connection=False;";
            SqlConnection conn = new SqlConnection(connectionString);
            conn.Open();
            Console.WriteLine("done");

            string strSQLQuery = string.Empty;
            strSQLQuery = @"SELECT top 3 'mayank-pc' AS ServerName,C.Path AS ReportPath,'salesorderid=43659'  Parameter,0 MaxTimeDataRetrievalSeconds,0 MinTimeDataRetrievalSeconds,99 TotalCount FROM Catalog C where  path like '/Reports/Sales%'";
            SqlCommand cmd = new SqlCommand(strSQLQuery, conn);
            SqlDataAdapter adapt = new SqlDataAdapter(cmd);
            System.Data.DataTable table = new System.Data.DataTable("allPrograms");
            adapt.Fill(table);

            int dtCount;
            dtCount = table.Rows.Count;
            Console.WriteLine(dtCount);
            foreach (DataRow dr in table.Rows)
            { //http:// mayank-pc/ReportServer/Pages/ReportViewer.aspx?/Reports/Sales&rs:Command=Render&salesorderid=43659
                string strPath = "http://" + dr["ServerName"].ToString() + "/ReportServer/Pages/ReportViewer.aspx?" + dr["ReportPath"].ToString() + "&rs:Command=Render&" + dr["Parameter"].ToString();
                Console.Write(strPath + "\n");
                //System.Diagnostics.Process.Start("iexplore", strPath);
                WebRequest myRequest = WebRequest.Create(strPath);
                myRequest.Credentials = new NetworkCredential("mayank", "India@");
                myRequest.Method = "GET";
                myRequest.PreAuthenticate = true;
                // Return the response. 

                try
                {
                    WebResponse myResponse = myRequest.GetResponse();
                    Console.Write("Success" + "\n");
                }
                catch (WebException e)
                {
                    Console.Write("Error:" + e.ToString() + "\n");
                }                
            }
            Console.Read();        
        }

        public SqlConnection objConn { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:59:50.043

会给你100个任务，然后等待全部完成。如果您希望它重新运行，请将其放入某种时间。

```
 int threads = 100;
        Task[] tasks = new Task[threads];

        for (int i = 0; i < threads; i++)
        {
            tasks[i] = Task.Factory.StartNew(() =>
                {
                    //Dostuffs
                });
        }
        Task.WaitAll(tasks); 
```

# java - 反转有向图

> ID：15084010
> 
> 赞同：1
> 
> 时间：2013-02-26T07:52:04.417
> 
> 标签：java, graph, arraylist

我必须反转给定的有向图，以便顶点保持不变，但边的方向相反。我的图用一个 Graph 类表示，它包含一个顶点的 ArrayList，每个 Vertex 对象都有它的编号和它的相邻顶点的 ArrayList。我的代码给出了错误的答案，因为在循环的每次迭代中，顶点的相邻列表的大小都会发生变化。如何修复我的代码？

```
public void reverse() {
    ArrayList < Vertex > adjacentOfi = new ArrayList < Vertex > ();
    int k;
    for (int i = 1; i < verticesSize; i++) {
        adjacentOfi = vertices.get(i).getAdjacent();
        for (int j = 0; j < adjacentOfi.size(); j++) {
            k = adjacentOfi.get(j).getNumber();
            adjacentOfi.remove(j);
            vertices.get(k).getAdjacent().add(vertices.get(i));
        }
    }
} 
```

这是顶点类

```
public class Vertex {
    private int number;
    private boolean marked;
    private int finishingTime;
    private ArrayList<Vertex> adjacent;

    public Vertex(int num) {
        this.number = num;
        this.marked = false;
        this.finishingTime = 0;
        this.adjacent = new ArrayList<Vertex>();
    }
} 
```

加上当然它是吸气剂和二传手。问题是当循环从顶点 1 开始，并且它的邻接列表包含顶点 5 时，它将 1 添加到 5 的邻接列表中并从 1 的邻接列表中删除 5。下一次，当循环到达 5 时，它将 5 添加到 1'a 邻接表中，并从 5 的邻接表中删除 1。在循环修改它之前，我需要保持每个列表的初始大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T08:18:39.367

**目标：**对图中的每条边执行一次原子操作。

**伪代码：**

```
function reverse(graph G)
    v = any vertex in G
    reverseVertex(v)
end function

function reverseVertex(vertex v)
    mark v as visited
    E = set of all outward edges from v
    N = { } // empty set, will contain all neighbors
    for each edge e in E,
         q = vertex reached by e from v
         if q is not visited,
             add q to N
             reverse direction of e
         end if
    end for

    for each vertex q in N,
         reverseVertex(q)
end function 
```

**你应该做什么：**因为我假设你是一个有作业的学生（通常是问题以“我必须......”开头的情况），我将快速解释我的伪代码，以便你了解总体想法并掌握自己实施的能力。

您不能只循环遍历顶点并反转每条边，因为反转边会使它成为其他顶点的出边，如果您还没有在循环中查看其他顶点，您最终会反转再次，这将导致边缘与开始的方向相同。或者，您已经查看了另一个顶点，在这种情况下它会很好。但是，如果您在顶点中随机循环，则两种可能性都存在，因此*在所有顶点中随机循环是行不通的*。

更直观的解决方案是从图中的任何顶点开始，并标记它访问过的。然后，对于顶点的每个**未访问**的邻居，将邻居添加到列表中并将边缘反转到邻居（即通过删除它并像您在代码中所做的那样添加它）。然后，对未访问邻居列表中的所有邻居递归调用此函数。最终，一旦到达所有邻居都访问过的顶点或叶子，递归调用将终止。我确信这个算法的归纳证明不会太难想出。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:06:14.243

不要改变你的图表表示，而是建立一个新的。

如果需要您实际更改 Graph 对象，您仍应创建一组新的邻接列表，并在最后一步用新列表替换原始列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:06:45.723

基本上，您必须为反转的顶点制作一个临时的新列表，并且只有在所有顶点都被反转后才能将它们交换为原始列表。只要 for 循环正在运行，用作 for 循环的迭代器的列表就永远不会改变。

另外，您从哪里获得 verticesSize 和 vertices 对象？它应该作为参数给出，即使它是一个类参数，在这种情况下至少应该由 this.vertices 和 this.verticesSize 调用。最后一个也应该避免，并且总是在使用当前列表对象之前计算...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T20:11:32.360

这是基于[https://stackoverflow.com/a/15084366/574776中提到的算法的一种实现](https://stackoverflow.com/a/15084366/574776)

```
static class Vertex {
    final int data;
    final List<Edge> edges;
}

static class Edge {
    Vertex source, destination;

    public void reverse() {
        source.edges.remove(this);
        destination.edges.add(this);

        Vertex temp = source;
        source = destination;
        destination = temp;
    }
}

static class Graph {
    final Map<Integer, Vertex> vertices;

    public Vertex getVertex(Integer data) {
        if (!vertices.containsKey(data)) {
            vertices.put(data, new Vertex(data));
        } 

        return vertices.get(data);
    }

    public void addEdge(Vertex source, Vertex destination) {
        Edge e = new Edge(source, destination);
        source.edges.add(e);
    }

    public void reverse() {
        System.out.println("reversing graph ... ");
        BitSet visited = new BitSet(vertices.size() + 1);
        for (Vertex v : vertices.values()) {
            if (!visited.get(v.data)) {
                reverse(v, visited);
            }
        }
    }

    private void reverse(Vertex v, BitSet visited) {
        if (DEBUG)  System.out.println("reversing " + v);
        visited.set(v.data);
        List<Vertex> neigbors = new ArrayList<Vertex>();
        List<Edge> toReverse = new ArrayList<Edge>();
        for (Edge e : v.edges) {
            Vertex destination = e.destination;
            if (!visited.get(destination.data)) {
                neigbors.add(destination);
            }
            toReverse.add(e);
        }

        for (Vertex n : neigbors) {
            reverse(n, visited);
        }

        for (Edge e : toReverse) {
            e.reverse();
        }

        if (DEBUG)  System.out.println("reversed " + v);
    }
} 
```

# c# - 从 WebMethod 函数返回 DataTable

> ID：15084013
> 
> 赞同：0
> 
> 时间：2013-02-26T07:52:16.737
> 
> 标签：c#, jquery, ajax

这是我的代码：

服务器 ：

```
 [WebMethod]
    public static string GetAll()
    {
       NotificationForSupport NFS = new NotificationForSupport();
        string s = NFS.GetData();
        return s;
    } 
```

客户端 ：

```
 function getData() {

        var $msg = $('#msg');

        $.ajax({
            type: 'POST',
            url: 'Default.aspx/GetAll',
            data: '{ }',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (data) {
                $msg.html(data.d);

            },
            error: function () {
                alert("error");

            }
        });
    } 
```

如您所见，我的函数返回一个字符串，但现在我希望它返回一个 dataTable 而不是该字符串阿贾克斯

# threadpool - 使用 future.get() 的超时异常 - Java ThreadPools

> ID：15084016
> 
> 赞同：0
> 
> 时间：2013-02-26T07:52:29.707
> 
> 标签：threadpool

我知道这`future.get()`是一种阻塞方法。我有一个简单的类，它在 for 循环中提交任务，每个任务打印线程的名称。当我在循环中使用`Executors.newCachedThreadPool()`and`future.get()`时，据我了解，每个循环都是一个同步流，应该没有 TimeOut 异常的范围。但我注意到这个异常来了。有人可以建议为什么会这样。

代码如下：

```
public class AsynchronusExecutorTest {

private static ExecutorService executor = null;

static {
    executor = Executors.newCachedThreadPool();
    System.out.println("New executor");
}

public static void main(String[] args) {
    for (int i = 0;; i++) {
        final Future<?> future = executor.submit(new MyRunnable3("Thread" + i));
        try {
            future.get(1, TimeUnit.SECONDS);
            System.out.println("Thread returns");
        } catch (Exception e) {
            System.out.println("Time out occured Exception: " + e);
            e.printStackTrace();
            future.cancel(true);
        }
    }
}
}

class MyRunnable3 implements Runnable {
String name;

public MyRunnable3(String name) {
    this.name = name;
}
@Override
public void run() {
    System.out.println("This is test " + name);
    if (name.equals("Thread0")) {
        for (;;) {

        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:15:34.663

以下代码永远不会返回`if (name.equals("Thread0"))`：

```
if (name.equals("Thread0")) {
    for (;;) {

    }
} 
```

当 i == 0 时，您正在传递“Thread0”：

```
for (int i = 0;; i++) {
    final Future<?> future = executor.submit(new MyRunnable3("Thread" + i));
    //...
} 
```

您可能希望更改`for (int i = 0;; i++)`为`for (int i = 1;; i++)`.

# ios - 如何在ios中取消隐藏另一个类中的按钮

> ID：15084017
> 
> 赞同：-1
> 
> 时间：2013-02-26T07:52:32.000
> 
> 标签：ios, uibutton, hide, show-hide

我是 ios 开发新手。`UIButton`我在本节课上有三个，当我跳到下一堂课时，这三个按钮被隐藏了，当我回到本节课时，我希望这三个按钮显示出来。任何人都可以给我发代码.

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:56:38.937

例子

```
if ([self isKindOfClass:[PresentClass class]]){
   self.button1.hidden = NO;
   self.button2.hidden = NO;
   self.button3.hidden = NO;
} 
```

使用自省来做到这一点。希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:06:53.730

`IBOutlets`为这 3 个按钮获取/ 全局对象。和

```
 - (void)viewWillAppear:(BOOL)animated
{
[button1 setHidden:NO];
[button2 setHidden:NO];
[button3 setHidden:NO];

} 
```

# c# - 在 Windows 应用程序 C# 中使用条码扫描器

> ID：15084021
> 
> 赞同：0
> 
> 时间：2013-02-26T07:52:47.517
> 
> 标签：c#, visual-studio-2010, barcode-scanner

我为服装店开发了一个应用程序以在该应用程序中打印发票我想使用条形码扫描仪自动从包含条形码的项目标签中收集信息，并自动在我的表格中填写所有信息，然后我打印发票。请给出一些建议如何解决这个问题。我也使用 Microsoft.PointOfService 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:02:25.340

假设您在表单中有一个文本框，当条码扫描时，它会在文本框中键入条码字符。通常，某些扫描仪可以配置为在扫描结束时添加另一个字符，最常见的是换行符。有了这个，你可以监听文本框的 KeyPress 事件，并处理换行符。当触发时，您可以检索表单中的其他详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:01:35.887

通常，条码扫描器只是将所有可识别的符号作为标准键盘输入发送。因此，当用户将焦点设置在应用程序中的文本字段并扫描条形码时，就像用户只是手动输入条形码符号并按“Enter”（或任何其他键，取决于扫描仪设置）一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:45:25.460

我的个人图书馆中有一个类来检测扫描仪的工作：

```
 public sealed class ScanReader
{
    #region Delegates

    public delegate void _DataLoaded(string ScannedData);

    #endregion

    private readonly double MyMaxMillisecondsBetweenPress;
    private readonly List<Regex> MyRegex;
    private readonly Timer TimeToNextKeyPress = new Timer();
    private string CardBuff = string.Empty;
    private bool FirstKeyPress = true;
    private DateTime Stamp;

    /// <summary>
    /// ScanReader constructor
    /// </summary>
    /// <param name="Press"> Form where KeyPreview = true </param>
    /// <param name="Regs"> Regular expressions for filtering scanned data</param>
    /// <param name="MaxMillisecondsBetweenPress"> The maximum time between pressing the keys in milliseconds, default = 60 </param>
    public ScanReader(Form form, List<Regex> Regs = null, double MaxMillisecondsBetweenPress = 0)
    {
        MyRegex = Regs ?? null;
        MyMaxMillisecondsBetweenPress = MaxMillisecondsBetweenPress == 0 ? 60 : MaxMillisecondsBetweenPress;
        form.KeyPress += KeyPressed;
        TimeToNextKeyPress.Interval =
            Convert.ToInt32(MyMaxMillisecondsBetweenPress + MyMaxMillisecondsBetweenPress*0.2);
        TimeToNextKeyPress.Tick += TimeToNextKeyPress_Tick;
    }

    public event _DataLoaded OnDataLoaded;

    private void TimeToNextKeyPress_Tick(object sender, EventArgs e)
    {
        TimeToNextKeyPress.Stop();
        if (MyRegex.Count > 0)
        {
            foreach (Regex reg in MyRegex)
            {
                if (reg.IsMatch(CardBuff))
                {
                    OnDataLoaded(CardBuff);
                    return;
                }
            }
        }
        else
            OnDataLoaded(CardBuff);
    }

    private void KeyPressed(object sender, KeyPressEventArgs e)
    {
        if (FirstKeyPress)
        {
            Stamp = DateTime.Now;
            FirstKeyPress = false;
            CardBuff = e.KeyChar.ToString();
        }
        else
        {
            if ((DateTime.Now - Stamp).TotalMilliseconds < MyMaxMillisecondsBetweenPress)
            {
                Stamp = DateTime.Now;
                CardBuff += e.KeyChar;
            }
            else
            {
                Stamp = DateTime.Now;
                CardBuff = e.KeyChar.ToString();
            }
        }
        TimeToNextKeyPress.Stop();
        TimeToNextKeyPress.Start();
    }
} 
```

如何使用：

```
var myReader = new ScanReader(this, new List<Regex>
                                                {
                                                    new Regex(@"296\d{13,13}"),
                                                    new Regex(@"K%.{5,34}"),
                                                    new Regex(@"C%.{5,34}"),
                                                    new Regex(@"E%.{5,34}"),
                                                });
        myReader.OnDataLoaded += FillControls; 
```

# matlab - 具有用户功能的数据库上的 Matlab parfor

> ID：15084023
> 
> 赞同：4
> 
> 时间：2013-02-26T07:52:56.153
> 
> 标签：matlab, parallel-processing, parfor

我有一组图像（~10^7），它们包含在一个巨大的二进制文件中。我想使用我已经拥有的功能有效地阅读和分析它们。代码中该用户函数`foo`的每次迭代大约需要 0.1 秒，因此代码需要数天时间才能使用读取数据库的简单 for 循环来处理整个数据库：

```
... 
for image_number=1:N
     offset_in_bytes = npoints_per_image*element_size*(image_number-1);
     fseek(fid, offset_in_bytes, 'bof'); 
     s=fread(fid, npoints_to_load,'ushort');
     image=reshape(s,nrows,[]);
     [outputs]=foo(image)
end 
```

我已经尽可能地优化了函数`foo`（尽可能对代码进行矢量化，使用正确的数据类等）。我唯一还没有做的是创建一个 mex 版本。我想用`parfor`这个，但我无法让它工作。艰难的每个图像都是独立的，上面的代码串行读取数据，所以我不能真正并行化它。如何使该`parfor`选项可以访问此代码和数据库？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:19:03.423

我在这里假设您的图像大小都相同，或者您事先知道的大小。也就是说：您不必扫描所有以前的图像来知道当前图像的大小。如果不是这种情况，以下将无济于事。

提供的代码不适用于 parfor，因为您有多个工作人员试图共享一个文件句柄。Matlab 的并行工具设计用于多个计算机集群，因此文件句柄之类的东西不能很好地复制。

要使您的代码与 parfor 一起工作，您需要在循环中打开和关闭文件，如下所示：

```
parfor image_number=1:N
  fid = fopen(filename, 'r');
  offset_in_bytes = npoints_per_image*element_size*(image_number-1);
  fseek(fid, offset_in_bytes, 'bof'); 
  s=fread(fid, npoints_to_load,'ushort');
  image=reshape(s,nrows,[]);
  [outputs]=foo(image);
  fclose(fid);
end 
```

如果您发现这会增加流程的开销，您可能需要使用嵌套循环并可能需要一些缓冲：

```
chunk_size = ceil(N/10);
parfor i = 0:9
  fid = fopen(filename, 'r');

  %some buffering code here

  %start this iteration of the parfor loop at this image_number
  start_num = 1+(i * chunk_size); 
  end_num = min(N, (i+1) * chunk_size); %and end it at this one

  for image_number=start_num:end_num
    %your code here
  end

  fclose(fid);
end 
```

正如 Edric 所提到的，如果您在 foo 函数中充分利用矢量处理，那么这可能不会加快速度，因为 parfor 确实使 matlab 在单线程模式下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:46:35.950

要有效地并行运行此循环，您需要能够并行运行`FREAD`部分和`foo`部分。您可以通过将 替换为对 MATLAB 之类的虚拟调用来检查该`foo`部分是否并行运行。`FREAD``RAND`

请注意，`matlabpool`worker 以单线程模式运行。如果您在一台机器上运行所有工作人员，这一点尤其重要。如果`foo`能够很好地利用 MATLAB 的内在多线程，那么使用`PARFOR`循环可能会使事情变慢。

我怀疑如果您只有一个大图像文件，那么您的文件系统可能会或可能不会让您完全并行访问它。我不确定如何最好地解决这个问题 - 它几乎可以肯定取决于您的特定文件系统。

# search - Google 自定义搜索标签

> ID：15084024
> 
> 赞同：3
> 
> 时间：2013-02-26T07:52:57.577
> 
> 标签：search, google-custom-search

如何创建标签以优化 Google 自定义搜索中的搜索结果？一个例子是：http: [//goo.gl/gftKp](http://goo.gl/gftKp)

在这里，可以将结果过滤为所有结果、博客、论坛、帮助等。我想做类似的事情。我的网站有不同的部分，如文章、游戏、论坛、图库等。我如何在 google 自定义搜索（免费服务）中创建类似的标签，以便用户可以过滤结果并选择他们想要搜索的网站部分?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-18T05:56:10.363

几个月前，我一直在寻找相同背景的解决方案，最后找到了解决方案。

在 google cse 控制面板中添加[优化](https://support.google.com/customsearch/answer/2631064?hl=en)后，您会看到优化作为搜索的“过滤器标签”。但是这个特性，即匹配标签太宽泛了。

如果您的网站对每个部分都有特定的路径，例如，

*   mysite/articles/下的文章
*   mysite/games/下的游戏

然后，您可以将这些路径映射到您之前创建的每个过滤器或优化。

见下图，我在这里添加了一些改进，如新闻、博客、媒体

[![在这里，我添加了一些改进](../Images/86b9f196de44eb5c65dad46872f0375d.png)](https://i.stack.imgur.com/JBKPz.png)

有关每个标签/改进，请参见下面的映射

[![每个标签的映射](../Images/f18fbdf52d9e99c7f9f4d927000af855.png)](https://i.stack.imgur.com/l2ZmV.png)

如果你真的希望细化看起来像标签..

[![改进的样式](../Images/3bab09190305ffd1e8f040284fe05f23.png)](https://i.stack.imgur.com/9kSBg.png)

快乐的“自定义搜索引擎”:)

# php - 存储第三方密码以供跨页面重复使用

> ID：15084025
> 
> 赞同：1
> 
> 时间：2013-02-26T07:53:03.180
> 
> 标签：php, passwords, security

我正在编写的一个特定的 Web 服务与 API 接口。每个 API 调用都需要发送用户的用户名和密码，不维护任何状态。

理想情况下，当使用我的网络服务时，用户将输入他的 API 用户名和密码一次，我的网络服务将存储该信息直到会话结束。我了解出于安全考虑，我不应该使用 PHP 会话存储 API 密码，也不应该将其存储在数据库中。因此，如何在会话期间安全地存储和访问密码？

**编辑：** 加密密码、将加密密码存储在 cookie 中并将加密密钥存储在会话中的安全性如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:27:09.407

使用像[mcrypt](http://php.net/manual/en/mcrypt.examples.php)这样的 PHP 扩展将加密的 API 用户名和密码存储在当前会话中。即时生成加密密钥并将其存储在 cookie 中（安全/HTTPS，[仅限 HTTP](http://en.wikipedia.org/wiki/HTTP_cookie#HttpOnly_cookie)）。即使在服务器数据泄露的情况下，攻击者仍然需要访问驻留在每个用户计算机上的 cookie。

或者，尝试加密整个会话。[PHP Secure Session 类](https://github.com/ezimuel/PHP-Secure-Session)使用类似的技术（存储在 cookie 中的加密密钥）结合`session_set_save_handler`透明地加密/解密会话。

# php - 使用 PHP sdk 的 Facebook 应用程序

> ID：15084031
> 
> 赞同：0
> 
> 时间：2013-02-26T07:53:17.717
> 
> 标签：php, facebook, codeigniter

我正在开发 Facebook 应用程序。任何人都可以帮助我如何获取使用相同 Facebook 应用程序的朋友列表。以及如何将通知发送给使用 Facebook 应用程序之类的朋友。A 正在使用“Facebook 应用程序名称”并开始使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:01:31.407

您是否正在寻找正在使用您开发的应用程序的用户列表？如果您想获取不是您开发的应用程序的用户数据，那么它不可能吗？只有 App 的管理员才能看到相应 App 的用户列表。

请详细说明您要查找的内容？

# wpf - WPF DataGrid 自定义排序，其中一些记录被锁定

> ID：15084034
> 
> 赞同：5
> 
> 时间：2013-02-26T07:53:33.193
> 
> 标签：wpf, c#-4.0, wpfdatagrid, listcollectionview

我有一个实现了自定义排序的 WPF Datagrid，它工作正常。我需要将集合中的一些记录锁定到顶部和底部（顶部锁定和底部锁定）。因此，当特定记录被顶部锁定时，它应该是集合中的第一条记录，而不管所选列的任何值（即我不想对那些顶部锁定和底部锁定的行进行排序）。这是我的自定义排序方法。

```
private void PerformLineCustomSort(DataGridColumn column)
        {
            ListSortDirection direction = (column.SortDirection != ListSortDirection.Ascending) ? ListSortDirection.Ascending : ListSortDirection.Descending;
            column.SortDirection = direction;
            ListCollectionView listCollectionView = (ListCollectionView)CollectionViewSource.GetDefaultView(Lines);

            LineSorter lineSort = new LineSorter(direction, column);
            listCollectionView.CustomSort = lineSort;

        } 
```

其中**LineSorter**是我的带有**IComparer**实现的自定义排序器类。这工作正常。现在我想对 ListCollectionView 应用 Top lock 和 Bottom lock。我已经用上面的代码尝试了下面的代码，但它没有任何变化（即列表仅基于自定义排序列进行排序）。

```
listCollectionView.SortDescriptions.Add(new SortDescription("TopLock", ListSortDirection.Descending));
listCollectionView.SortDescriptions.Add(new SortDescription("BotLock", ListSortDirection.Ascending)); 
```

有什么办法可以做到这一点，还是我需要手动删除然后添加锁定的记录。请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:07:45.953

出色地。您可以通过您的代码实现这一点。

假设

> ```
> The page size         = 10 
> 
> Current page          = 2
> 
> Collection name       = myItems
> 
> First Item to display = initialItem
> 
> Last Item to display  = lastItem 
> ```

脚步：

*   对集合进行排序
*   从收藏中取出9到16件（8件）（因为你在第二页）

> 初始项目编号 = 8 x（当前页码 -1）+ 1 最后一项
> 
> number = 8 x 当前页码

所以：

> 初始项目编号 = 8 x (2 - 1) + 1 = 9
> 
> 最后一项编号 = 8 x 2 = 16

（现在您有一个已排序的 8 个项目的子集合）

*   将 intialItem 添加到子集合的顶部

myItems.Insert(0, initialItem);

*   将 lastItem 添加到子集合的末尾

    myItems.Insert(9, lastItem);

# c# - GroupPrincipal 不起作用（始终为空）

> ID：15084036
> 
> 赞同：1
> 
> 时间：2013-02-26T07:53:52.077
> 
> 标签：c#, .net, active-directory

试图从 AD 获取用户列表。这是代码

```
PrincipalContext ctx = new PrincipalContext(ContextType.Domain,
                                       "c.magmfc.ru",
                                        DomainLogin,
                                        DomainPassword);

        GroupPrincipal grp = GroupPrincipal.FindByIdentity(ctx,
                                               // IdentityType.Name,
                                                "Domain Users");

        if (grp!=null)
        {

           //lalalala
        } 
```

而且 grp 始终为 null ！为什么 ？

# jquery - 检查是否使用 jQuery 选择了 ID

> ID：15084038
> 
> 赞同：0
> 
> 时间：2013-02-26T07:54:06.037
> 
> 标签：jquery

再会。

我在 jQuery 中使用以下点击功能

```
 $(function () {

            $("#areas ul a").click(function (event) {
                event.preventDefault();
                $("#areas ul li a").removeClass('activeAreas');
                $(this).addClass('activeAreas');
                $(".hidden").hide(200);
                $($(this).attr("href")).show(500)

            });

        }); 
```

我想做的是在那个循环中，检查特定元素是否处于活动状态，然后对其采取行动：

例如。

```
 $("#areas ul a").click(function (event) {
                event.preventDefault();
                $("#areas ul li a").removeClass('activeAreas');
                $(this).addClass('activeAreas');
                $(".hidden").hide(200);
                $($(this).attr("href")).show(500)

                //I'm adding this... but it is not working

                if($(this).attr(href) = 'pretoriaDetail'){
                  alert('it works');
                }

            }); 
```

我如何让 if 语句起作用......？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:57:51.927

如果您想检查是否`class`应用于 DOM，那么`.hasClass`将有所帮助。

**官方文档**：[http ://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

还有一件事是您的代码中有错误。

```
if($(this).attr(href) = 'pretoriaDetail'){
          alert('it works');
} 
```

一定是

```
if($(this).attr("href") == 'pretoriaDetail'){
          alert('it works');
} 
```

因为在比较它和 href 必须用引号括起来`=`的同时为其赋值。`==`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:46:36.330

```
 $(function () {
        $("#areas ul a").click(function (event) {
            event.preventDefault();
            if(!$(this).hasClass('activeAreas')){
                $("#areas ul li a").removeClass('activeAreas');
                $(this).addClass('activeAreas');
                $(".hidden").hide(200);
                $($(this).attr("href")).show(500);
            }
        });

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:08:49.593

我认为你应该试试这个：

```
var ID = $(this).attr("href");

$('#'+ID).show(500); 
```

`Declare a variable and use it as an id.`

那么这应该是这样的：

```
 $(function () {
        $("#areas ul a").click(function (event) {
            var ID = $(this).attr("href");
            event.preventDefault();
            $("#areas ul li a").removeClass('activeAreas');
            $(this).addClass('activeAreas');
            $(".hidden").hide(200);
            $('#'+ID).show(500); // or this way $('[id="'+ID+'"]').show(500);
        });
     }); 
```

# android - 带有多行换行的 EditText（无换行符）

> ID：15084043
> 
> 赞同：3
> 
> 时间：2013-02-26T07:54:14.950
> 
> 标签：android, android-edittext

是否可以有一个 EditText ，其中文本区域的高度是多行，但文本实际上只是换行的文本，但禁止输入新行。我能想到的唯一解决方案是允许用户输入新行，但在按键或输入文本后仅用空格替换新行字符。这是我所拥有的：

```
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="false"
    android:minLines="3"
    android:textSize="24sp" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T19:26:25.147

这就是我在 The Rideshare 应用程序中使用的，效果很好。我的目标 SDK 是 17（Android 4.0.3）。

```
<EditText
            android:inputType="text|textMultiLine|textCapSentences"
            android:layout_margin="1dp"
            android:gravity="top"
            android:background="#FFEBCD"
            android:textSize="26sp"
            android:id="@+id/offer_notes"
            android:padding="10dp"
            android:textColor="#000"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:paddingLeft="5sp"
            android:hint="Notes, e.g. $10 per passenger, leaving early morning 7AM from Bay and Yonge intersection, no smoking or pets, please. Chevy Venture, very comfortable.">
        </EditText> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-10T09:32:03.987

在这种情况下，唯一对我有用的是添加一个`InputFilter`防止`\n`输入换行符的内容。

代码：

```
 editText.setFilters(new InputFilter[]{new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            if (source != null) {
                String s = source.toString();
                if (s.contains("\n")) {
                    return s.replaceAll("\n", "");
                }
            }
            return null;
        }
    }}); 
```

我的配置中有趣的行：

```
 <EditText

                ...

                android:singleLine="true"
                android:inputType="text|textMultiLine"
                android:imeOptions="actionDone"
                /> 
```

如果您想`EditText`在按下回车键时隐藏和取消焦点，请将上面的代码替换为：

```
 editText.setFilters(new InputFilter[]{new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            if (source != null) {
                String s = source.toString();
                if (s.contains("\n")) {
                    // Hide soft keyboard
                    InputMethodManager imm = (InputMethodManager)MainActivity.this.getBaseContext().getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(editText.getWindowToken(), 0);
                    // Lose focus
                    editText.clearFocus();
                    // Remove all newlines
                    return s.replaceAll("\n", "");
                }
            }
            return null;
        }
    }}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T08:06:15.517

```
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:lines="1"
    android:paddingBottom="250dp"
    android:text="You mean like this?"
    android:textSize="24sp" /> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T15:35:57.350

默认情况下，如果行不适合视图宽度，它会换行新单词，但不要在文本值中添加回车。虽然用户可以手动输入“\n”符号。

我认为允许用户输入任何他想要的内容，然后在需要使用 EditText 值时替换所有出现的 '\n' 会很方便。

# facebook - iPhone 中的 Facebook 聊天集成

> ID：15084045
> 
> 赞同：1
> 
> 时间：2013-02-26T07:54:30.120
> 
> 标签：facebook, chat

我想在我的 iphone App 上整合 Facebook 聊天。使用 XMPP，我找不到任何好的教程。有没有人为此的示例代码..

# wix - 从以前的 Visual Studio 安装程序升级到 Wix

> ID：15084046
> 
> 赞同：2
> 
> 时间：2013-02-26T07:54:31.963
> 
> 标签：wix, windows-installer, wix-extension

我有一个旧的安装程序，它是一个基本的 Visual Studio 设置项目，但一段时间后我们意识到它远没有我们需要的那么复杂。所以我花了几天时间用 WiX 进行替换。

现在我当前的问题是从以前的安装升级。如果有人安装了随 VS 项目一起安装的版本之一，他们是否可以使用新的 WiX 项目？我尝试将升级代码设置为相同，但没有任何不同，它似乎认为它是一个全新的产品并尝试再次安装。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:41:48.490

请参阅帮助主题：[如何：在安装程序中实施重大升级](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm)

主要升级只能在相同的安装上下文中执行升级。（每用户 -> 每用户或每台机器 -> 每台机器）。如果您的 VDPROJ 是按用户意外安装的，则用户必须卸载/重新安装才能成为按机器。

您的新安装程序不必具有与旧安装程序相同的 UpgradeCode，但它必须使用旧安装程序中的 UpgradeCode 编写 MajorUpgrade。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:21:43.747

这应该是可能的，但有几件事需要正确设置。也许你在.vdproj 项目中看到的和.msi 安装中写的不一样。使用 Orca 作为 .msi 阅读器，并提取所有需要的信息。升级代码必须相同，产品代码必须不同，安装版本必须更大，第一个、第二个或第三个数字。第四个数字不算。

WiX 对我来说也像是一个不起眼的黑匣子，所以我可能会遗漏一些东西，但据我所知，如果一切都按照上述设置，那么当您开始新安装时，旧安装应该会自动卸载。有一篇[博客文章](http://blogs.msdn.com/b/pusu/archive/2009/06/10/understanding-msi.aspx)解释了其中的一些内容。

编辑：升级代码不必相同，但你必须做额外的工作，希望如[本文所述](http://blogs.technet.com/b/alexshev/archive/2008/02/15/from-msi-to-wix-part-8-major-upgrade.aspx)。

# django - 主管 Django Gunicorn Gevent 内存使用情况

> ID：15084052
> 
> 赞同：2
> 
> 时间：2013-02-26T07:54:45.173
> 
> 标签：django, ubuntu, gevent, gunicorn, supervisord

我在带有主管 3.0a8-1.1 的 Ubuntu 12.04 上运行 Django 1.4 站点，并且遇到了 gunicorn 0.17.2 和 gevent 0.13.8 的奇怪问题。

Supervisor 的内存使用量不断增长，直到服务器没有响应。

有 5 个站点具有以下主管配置：

```
command=/app/virtualenv/bin/newrelic-admin run-program /app/virtualenv/bin/python /app/manage.py run_gunicorn -c gunicorn_conf.py -k gevent
directory=/app
autostart=true
autorestart=true
stopsignal=KILL
killasgroup=true
environment=NEW_RELIC_CONFIG_FILE='/app/newrelic.ini' 
```

和以下 gunicorn 配置：

```
workers = 4
bind = '0.0.0.0:(Site Port Number)' 
```

这些都是通过 NGINX 反向代理的。

我在一个有 2 个内核和 7.3GB 内存的大型 EC2 实例上运行这些，这应该比我需要的要多。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T09:18:31.843

如果在没有 supervisord 的情况下运行项目时内存正确清除，那就令人费解了。

Supervisord 只是一个守护进程管理器。它除了启动和管理一个进程之外什么都不做，在这种情况下，它只是 manage.py。

我唯一能想到的是自动重启已打开，这会导致内存泄漏，如果主管不断重启进程，因为它检测到更改并且错误没有被清除。这[实际上已在主管 3.0b1 中修复](https://pypi.python.org/pypi/supervisor)。也许更新你的主管？

# security - Symfony 2.1.7 - 用户通过身份验证后更新安全令牌设置特定角色

> ID：15084054
> 
> 赞同：2
> 
> 时间：2013-02-26T07:54:54.683
> 
> 标签：security, symfony-2.1, user-roles

我想在 loginSuccess 发生后根据取决于用户行为的参数为用户设置一些角色。

我看了看，看起来角色存储在可通过容器访问的 security.content.token 中：

`$this->container->get('security.context')->getToken()`

我可以看到角色存储在这个令牌中（在我的例子中是`FacebookUserToken`from `FOSFacebookBundle`）

我的另一个要求是我不能设置`Roles`和注销用户，它必须在同一个会话中。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:41:44.877

我发现了这个问题：[Get security token for non-logged user with Symfony](https://stackoverflow.com/questions/11887359/get-security-token-for-non-logged-user-with-symfony)

这帮助我认为我可以设置一个新的安全令牌（而不是尝试更新现有角色中的角色）。我的用户的角色没有存储在 User 表中，所以它是有意义的。

```
public function strangeAction()
{
    // Get your User, however you normally get it
    $user = $userRepository->find($id);

    // Save the original token in the session (just in case I need to reverse it)
    $originalToken = $this->get("security.context")->getToken();
    $this->getRequest()->getSession()->set('original.security.token', $originalToken);

    // Create my new custom token (loading the roles of the user)
    $token = new UsernamePasswordToken($user, null, "main", $user->getRolesMagically());

    // Update the security context with the new token
    $this->get("security.context")->setToken($token);

    // Now you have access to isGranted()
    if ($this->get("security.context")->isGranted("ROLE_SOMETHING"))
} 
```

我对这个解决方案充满信心，但如果可能的话，我想要更多的输入。

IE。为什么我不应该这样做？

# c# - 'ScrollBar' 是 'System.Windows.Forms.ScrollBar' 和 'Arction.LightningChartUltimate.ScrollBar' 之间的模糊引用

> ID：15084060
> 
> 赞同：1
> 
> 时间：2013-02-26T07:55:23.777
> 
> 标签：c#

正如标题中提到的，我遇到了两个 using 指令之间引用不明确的问题。

一个是`System.Windows.Forms`：

```
using System.Windows.Forms; 
```

另一个来自自定义库，Arction API：

```
using Arction.LightningChartUltimate; 
```

我想使用 Arction 中可用的滚动条类而不是标准窗口类。

那么，如何禁用在 Windows.Form 中使用滚动条类来解决不明确的引用问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:56:47.080

添加以下`using`指令：

```
using ScrollBar = Arction.LightningChartUltimate.Scrollbar; 
```

然后，当您在代码中引用时`ScrollBar`，它将是`Arction.LightningChartUltimate.ScrollBar`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:58:40.750

最简单的方法是使用完全限定名称`Arction.LightningChartUltimate.ScrollBar`。

或者，您可以创建命名空间别名：`using arc = Arction.LightningChartUltimate`然后`arc.ScrollBar`在您的代码中使用或类型别名`using arcScrollBar = Arction.LightningChartUltimate.ScrollBar` ，然后`acrScrollBar`在您的代码中使用。

**更新**：您实际上可以使用类型别名“覆盖”特定类型名：`using ScrollBar = Arction.LightningChartUltimate.Scrollbar;`实际上使所有进一步的引用都`ScrollBar`指向 Action 命名空间中的 on 。

# c# - 无法从字符转换为字符串

> ID：15084064
> 
> 赞同：4
> 
> 时间：2013-02-26T07:56:03.780
> 
> 标签：c#, .net, string, winforms, messagebox

我希望弹出一个消息框，显示用户通过文本框接受的字符串的第一个字符，当用户单击消息框的确定按钮时，下一个字符会在消息框中弹出，直到达到 null。

我创建了这个程序，但由于明显的原因，它给出了以下错误：“无法从'char'转换为'string'”请提出一些更改。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace loop_Message
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void submit_Click(object sender, EventArgs e)
        {
            string str;
            str = stringTxt.Text;
            for (int i = 0; str[i] != null; i++)
            {
                MessageBox.Show(str[i]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:58:08.160

用这个：

```
foreach (char c in stringTxt.Text)
{
    MessageBox.Show(c.ToString());
} 
```

[MessageBox.Show()](http://msdn.microsoft.com/en-us/library/519bytz3.aspx)需要一个`string`参数，因此需要将字符转换为字符串。

你的循环：

```
for (int i = 0; str[i] != null; i++) 
```

引发`IndexOutOfRangeException`. in 的字符串`.NET`不是像 in 那样的字符数组`C`。它们实际上是以空字符结尾的，但您不能使用空字符的索引（等于`Length`）来访问空字符。CLR 检查索引，因为它超出了字符串 ( `0`to `Length-1`) 的有效索引范围，所以抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:58:10.807

`MessageBox.Show()`接收一个字符串，并且您正在传递一个`char`对象。请执行下列操作：

```
MessageBox.Show(str[i].ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:59:30.143

用这个替换你的行：

```
for (int i = 0; str[i] != null; i++)
{
   MessageBox.Show(str[i].ToString());
} 
```

需要一个字符串值，`MessageBox.Show()`但您正在传递一个字符。

# tfs - 是否有用于将团队项目流程模板从 4.2 升级到 CMMI 5.0 的迁移工具

> ID：15084069
> 
> 赞同：1
> 
> 时间：2013-02-26T07:56:19.907
> 
> 标签：tfs, cmmi

我们公司有很多使用 CMMI 4.2 流程模板的团队项目。我将升级到 CMMI 5.0 或 CMMI 6.0。

我发现[http://msdn.microsoft.com/en-US/library/ms194914%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-US/library/ms194914%28v=VS.80%29.aspx)描述了一些解决方案，但它们似乎很棘手，而不是官方的！

值得一提的是，我不会更改流程模板（例如，Agile 到 CMMI），我只是想升级到较新的版本，那么有没有易于使用的迁移工具来将团队项目流程模板升级到 CMMI 5.0（从 4.2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:41:59.420

这样做没有固定的解决方案，它还取决于如何为不同的团队项目定制流程模板（定制越少，越容易！）。到目前为止，升级或更改流程模板的唯一方法是手动。Martin Hinshelwood 有一个关于升级/迁移您的流程模板的博客：http: [//nakedalm.com/do-you-know-how-to-upgrade-a-process-template-but-still-keep-your-data-完好无损/](http://nakedalm.com/do-you-know-how-to-upgrade-a-process-template-but-still-keep-your-data-intact/)。我建议您按照博客中的 #7 来了解您想要实现的目标。

# javascript - 这是 Array.sort() 中的错误吗？

> ID：15084070
> 
> 赞同：5
> 
> 时间：2013-02-26T07:56:23.610
> 
> 标签：javascript, sorting

很难相信，但这看起来像是 Google Chrome 的 Javascript 引擎中的一个错误。我错过了什么吗？

Chrome Javascript 控制台会话：

```
> x = [10, 1]
> x.sort()
[1, 10]
> // OK.  But now try this.
> x = [10, 2]
> x.sort()
[10, 2] 
```

它没有整理它！

我目前正在运行版本 24.0.1312.57 m

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T08:12:13.003

`array.sort()`按字典顺序对数组进行排序。这意味着，数组的值被解释为字符串并像字符串（按字母顺序）排序，而不是整数。

这里也描述了这种行为：[http ://www.javascriptkit.com/javatutors/arraysort.shtml](http://www.javascriptkit.com/javatutors/arraysort.shtml)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-11T06:23:57.500

对于那些来这里弄清楚在 Chrome 中排序到底有什么问题的人，这里有一个例子`unstable sort`：[https ://jsfiddle.net/wujpw8bo/](https://jsfiddle.net/wujpw8bo/)

如何修复它：

> 不稳定的排序算法可以专门实现稳定。这样做的一种方法是人为地扩展键比较，以便使用原始输入列表中条目的顺序作为决胜局来决定具有其他相同键的两个对象之间的比较。然而，记住这个顺序可能需要额外的时间和空间。 [https://en.wikipedia.org/wiki/Sorting_algorithm#Stability](https://en.wikipedia.org/wiki/Sorting_algorithm#Stability)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-20T21:59:19.677

我认为 MDN 已经很好地解释了[Source MDN Array.sort()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)

> sort() 方法对数组的元素进行就地排序并返回该数组。排序不一定是稳定的。默认排序顺序是根据字符串**Unicode 代码点**。

```
arr.sort([compareFunction]) 
```

> **比较函数** *可选*
> 
> 1.  指定定义排序顺序的函数。如果省略，则根据每个字符的 Unicode 码位值，根据每个元素的字符串转换对数组进行排序。
> 2.  如果未提供 compareFunction，则通过将元素转换为字符串并按 Unicode 代码点顺序比较字符串来对元素进行排序。例如，“*樱桃*”出现在“*香蕉*”之前。在数字排序中，9 在 80 之前，但由于数字被转换为字符串，因此在 Unicode 顺序中，“80”在“9”之前。

```
var scores = [1, 10, 2, 21]; 
scores.sort(); // [1, 10, 2, 21]
// Watch out that 10 comes before 2,
// because '10' comes before '2' in Unicode code point order. 
```

> 要比较数字而不是字符串，比较函数可以简单地从 a 中减去 b。以下函数将对数组进行升序排序：

```
function compareNumbers(a, b) {
  return a - b;
} 
```

例子：

```
function compareNumbers(a, b) {
  return a - b;
}
var scores = ['1', '010', '200', '110']; 
scores.sort(compareNumbers); 
```

> **O/P：**数组[“1”、“010”、“110”、“200”]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T08:07:05.880

您应该使用以下方法：

```
abc =[10,2,4,1]; abc.sort(function( a , b ){
  return a-b;
}); 
```

[http://www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T07:57:30.803

您的第二次**[sort()缺少括号](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)**

```
x.sort() 
```

**编辑：** 我自己试过了，即使有括号也不起作用。

检查这些问题。也许他们会解决你的问题。

[在 Chrome 中对对象数组进行排序](https://stackoverflow.com/questions/3195941/sorting-an-array-of-objects-in-chrome)

[用 Chrome 对 Javascript 数组进行排序？](https://stackoverflow.com/questions/1969145/sorting-javascript-array-with-chrome)

**Edit2：** 这按预期工作：

```
var x;
x = [10, 2]; 
alert(x); // returns 10, 2
x.sort ( function( a , b ){
  return a-b;
});
alert(x); // returns 2,10 
```

# sql - 我们可以在更新语句中使用（nolock）与其他表连接吗

> ID：15084079
> 
> 赞同：2
> 
> 时间：2013-02-26T07:56:51.987
> 
> 标签：sql, tsql

我有两个表，比如说 Main,transactions 表

主要的 ：

```
mainID Name  Active
1  sharath  1
2  kiran    0
3  ashish   1 
```

交易 ：

```
TransID TransType status MainID IsActive
101      D         22    1       0
102      R         27    2       1
103      R         32    2       1
104      D         11    1       0
105      R         43    3       0 
```

在这些更新语句中更可取：

1)

```
Update TR
set  status  = 0,
     Isactive = 0
from Transaction TR
inner join main MN with(nolock) on MN.MainID = TR.MainID 
where MN.Isactive = 0 
```

2)

```
Update TR
set  status  = 0,
     Isactive = 0
from Transaction TR
inner join main MN on MN.MainID = TR.MainID 
where MN.Isactive = 0 
```

在第一个查询中，我使用 Main 进行了内部连接，并使用`with(nolock)`它来更新 Isactive = 0 的那些 MainID 的记录

在第二个查询中，没有使用`with(nolock)`我写的更新语句。

哪一个更可取，n将来也会进行更新而不会出现任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:12:56.993

将 NOLOCK 与 SELECT 一起使用将返回可能是脏的数据。当我们确定脏数据没问题时，我们可以使用这个表提示来快速得到结果。但是我看不出为什么应该在 DML 上使用 NOLOCK，因为脏数据可能会被写入 db 并提交。主表中未提交的事务可能会将脏数据引入事务表。

# c# - 具有属性的自定义异常 - 如何在符合 CA 规则的同时确保属性不为空？

> ID：15084081
> 
> 赞同：2
> 
> 时间：2013-02-26T07:57:11.997
> 
> 标签：c#, .net

创建自定义异常类的原因是——至少对我而言——我需要传输额外的信息，例如一些域对象。
为了实现这一点，我向我的异常类添加了一个只读属性，并提供了一个初始化这个属性并只允许非空值的构造函数。

现在，根据[MSDN](http://msdn.microsoft.com/en-us/library/ms229064.aspx)和[代码分析](http://msdn.microsoft.com/en-us/library/ms182151.aspx)，每个 Exception 类型都应该至少有四个特定的构造函数。

最终结果是可以创建没有我的自定义属性集的自定义异常类的实例。

这有两个问题：

1.  每个异常处理程序都必须检查该属性是否`null`
2.  如果没有该附加属性，某些异常处理程序将无法做任何有用的事情。

如何解决这个困境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:03:02.623

你能为你的域对象提供一个默认值吗，也许是一个空对象？( [http://en.wikipedia.org/wiki/Null_Object_pattern](http://en.wikipedia.org/wiki/Null_Object_pattern) ) 这样，您的任何异常处理程序都不需要更聪明。当使用域对象的任何方法或属性时，让域对象的 Null Object 实例不执行任何操作。

另一种选择是使用 [SuppressMessage] 来避免代码分析消息，然后没有零参数的构造函数。那么问题就变成了你的类不再是可序列化的。这对您来说可能是也可能不是问题。

最后，考虑创建一个中间类，将其命名为 DomainObjectExceptionHandler。它负责在发生异常时处理：

```
 public abstract class DomainObjectExceptionHandlerBase {
     public abstract void HandleException();
 } 
```

然后有一个实现知道当一个真正的域对象发生异常时该怎么做：

```
 public class DomainObjectExceptionHandler : DomainObjectExceptionHandlerBase {
     private DomainObject domainObject;
     public DomainObjectExceptionHandler(DomainObject domainObject) {
         this.domainObject = domainObject;
     public override void HandleException() { 
         // do real recovery work with the domain object
     }
 } 
```

然后是一个什么都不做的空对象：

```
public class NullDomainObjectExceptionHandler : DomainObjectExceptionHandlerBase {
    public override void HandleException() { 
        // do nothing
    }
} 
```

现在您的异常类可以具有四个推荐的签名，包括：

```
public class DomainObjectException {
    public DomainObjectException() {
        this.Handler = new NullDomainObjectExceptionHandler();
    }

    public DomainObjectException(DomainObject domainObject) {
        this.Handler = new DomainObjectExceptionHandler(domainObject);
    }

    public DomainObjectExceptionHandlerBase Handler { get; private set; }
} 
```

您的抛出代码如下所示：

```
if (domainObject.IsUnhappy())
    throw new DomainObjectException(domainObject); 
```

您的异常处理程序如下所示：

```
try {
    FrobulateDomainObjects();
} catch (DomainObjectException ex) {
    ex.Handler.HandleException();
} 
```

注意异常处理程序不需要知道 DomainObject 的存在，它将它委托给 DomainObjectExceptionHandler。

# sharepoint - 根据各自的办公室用户显示文件

> ID：15084084
> 
> 赞同：0
> 
> 时间：2013-02-26T07:57:15.843
> 
> 标签：sharepoint

我的要求是这样的。

我有一个文档库，现在我有 600 多个办公室，在各自的办公室中有不同的用户，现在我需要显示文档，以便登录的用户应该只能看到他办公室的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:39:15.483

两种可能：

1.  您在所有用户的用户配置文件中创建一个属性，描述哪些办公室分配给了哪些用户。然后，您可以在文档库旁边添加一个过滤器 WebPart，根据当前用户的此属性过滤库。

2.  您为每个 Office 创建 Active Directory 组并将用户分配到该组。然后，您可以过滤当前用户及其组的文档库视图。

# apache - Varnish 和 Apache SUB DOMAIN V.Host 设置？

> ID：15084085
> 
> 赞同：1
> 
> 时间：2013-02-26T07:57:18.747
> 
> 标签：apache, caching, subdomain, varnish

对于一些针对 Varnish 的特定 Apache V.Host 设置，我仍然没有清楚和困惑。而且很难找到这样基本的东西。

我作为默认环境设置运行，其中：

*   上清漆`:80`
*   和 Apache`:8080`

所以我把我的 Apache Virtual`localhost`放在`:8080`这样的位置：

```
<VirtualHost *:8080>
    ..
    ServerName localhost
    ..
</VirtualHost> 
```

好的，现在请让我确切地知道 SUB DOMAINS`<VirtualHost>`设置如何？
假设我有 2 个虚拟子域：

```
<VirtualHost *:xx>
    ..
    ServerName sub1.example.com
    ..
</VirtualHost>
<VirtualHost *:xx>
    ..
    ServerName sub2.example.com
    ..
</VirtualHost> 
```

也可以通过 Varnish 为他们服务：

*   `Ports`他们也必须是`:8080`吗？
*   那么，我需要做更多的 VCL 设置吗？

# java - 在android广播接收器中创建数据库的代码

> ID：15084086
> 
> 赞同：1
> 
> 时间：2013-02-26T07:57:19.347
> 
> 标签：java, android

我的目标是，我需要使用不在活动中的服务类创建一个数据库，因为我创建了一个服务类，如下所示。

```
 public class Receiver extends BroadcastReceiver
   {       
       @Override    
        public void onReceive(Context context, Intent intent)
        {
             select();//
        } 

        public void select()
        {
            SQLiteDatabase myDb;
            myDb = openOrCreateDatabase(path + "/" + db, Context.MODE_PRIVATE, null);
            cur4readdb = myDb.query("users",null, null, null, null, null, null);
            cur4readdb.moveToFirst();
            while (cur4readdb.isAfterLast() == false)
            {
               Log.i(TAG, " From SMSReceive : " + cur4readdb.getString(1));
               cur4readdb.moveToNext();
             }
            cur4readdb.close();
        }
    } 
```

但是，我在这一行遇到了错误：

```
 myDb = openOrCreateDatabase(path + "/" + db, Context.MODE_PRIVATE, null); //openOrCreateDatabase is underlined in red colour. 
```

在我的主要活动中，我使用了相同的代码，它在这里工作。但不在服役。有人请告诉我。有没有可能。如果是，则意味着详细说明该解决方案。

```
 myDb = openOrCreateDatabase(path + "/" + db, Context.MODE_PRIVATE, null);       
    cur4readdb = myDb.query("users", null, null, null, null, null, null);
    cur4readdb.moveToFirst();
    while (cur4readdb.isAfterLast() == false)
    {
        Log.i(TAG, "User : " + cur4readdb.getString(1));
        cur4readdb.moveToNext();            
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:02:29.857

绝对是编译错误。

`openOrCreateDatabase`[`Context`在课堂](http://developer.android.com/reference/android/content/Context.html#openOrCreateDatabase%28java.lang.String,%20int,%20android.database.sqlite.SQLiteDatabase.CursorFactory%29)上可以看到。并且两者都[`Activity`](http://developer.android.com/reference/android/app/Activity.html)扩展[`Service`](http://developer.android.com/reference/android/app/Service.html)了`Context`类。

您不是在编写服务，而是在编写接收器。BroadcastReceiver 不扩展 Context 类。您可以通过在接收器中使用上下文对象`context.openOrCreateDatabase(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:03:30.003

`openOrCreateDatabase()`方法属于 Context 类，因此您需要从上下文对象中调用它。IE

```
myDb = context.openOrCreateDatabase(path + "/" + db, Context.MODE_PRIVATE, null); 
```

# grammar - 这个语法有歧义吗？

> ID：15084087
> 
> 赞同：0
> 
> 时间：2013-02-26T07:57:23.297
> 
> 标签：grammar, bison, bnf, jison

我正在尝试使用[Jison](http://jison.org)定义一种语言，使用很少的标点符号进行分隔 - 就像[CoffeeScript](http://coffeescript.org)但没有缩进。这就是我想要实现的目标：

```
# Definition
object1, object2
    property1 = value1,
    property2 = value2

# Definition
object3 property = value

# Statement
object1 + object2 + object3 
```

这定义了三个具有一些属性的对象并添加了它们。请注意，第一个定义使用名称列表指定了两个对象，第二个定义表明空格不应该很重要。

尽管名称列表和属性列表之间缺少开始和结束符号，但我觉得语法并不模棱两可。语法规定每个名称列表后跟一个属性列表。如果我编写一个仅指定定义的语法，这一切似乎都可以正常工作，包括以下产品：

```
definition
    : name_list property_list
    ;

name_list
    : name
    | name_list ',' name
    ;

property_list
    : property
    | property_list ',' property
    ;

property
    : name '=' name
    ; 
```

现在，我以一种相当正常的方式为语法的表达式部分添加规则，据我所知：

```
expr
    : expr '+' expr
    | expr '/' expr
    | name
    ; 
```

Jison 抱怨说，对于处于某种编号状态的一堆不同的前瞻标记，“可能有多种操作”。减少选项通常如下所示：

```
- reduce by rule: name_list -> name
- reduce by rule: expr -> name 
```

我相信语法是明确的，但我怎样才能说服吉森呢？似乎它可能需要向前看两个标记而不是一个，但这是一个盲目的猜测，Jison 文档指出它不（还？）支持 LL( *k* ) 语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:01:34.620

您没有显示整个语法，但看起来您的问题是它无法区分`expr`简单名称和名称列表中具有单个名称的声明的开头之间的区别。考虑输入

```
A B = C 
```

和

```
A B C = D 
```

第一种情况是`A`具有一个属性的单个定义，而第二种情况是一个表达式`A`，后跟一个 for 的定义`B`。

问题是解析器需要在看到`A`并查看前瞻之后在这些情况之间做出决定`B`，但它不能 - 它需要更多前瞻（查看 之后的内容`B`）

您可以通过更改语言或（有效地）获得额外的前瞻性来避免这种情况。

1.  改变语言。可能只有一个名称的语句没有任何意义。因此，您可以更改语言以具有`statement`不允许简单名称的单独规则：

    ```
    statement: expr '+' expr | expr '/' expr ;
    expr: statement | name ; 
    ```

    现在它可以区分 a`statement`和 a`declaration`而无需额外的前瞻，因为 a`statement`必须包含一个运算符。

2.  更换工具。您可以使用 bison 的`%glr-parser`选项或[btyacc](http://www.siber.com/btyacc/)之类的工具来处理非 LALR(1) 语法。但是，我完全不确定 Jison 支持什么。

3.  在词法分析器中模拟额外的前瞻。你可以让你的词法分析器为你做额外的预测。您可以有一个匹配的词法分析器模式`[a-zA-Z]+[ \t\n]*=`（即，一个名称后跟一个 = 符号）并让它返回一个特殊`propname`标记而不是`name`. 然后你的`property`规则变成：

    ```
    property: propname name ; 
    ```

# python - 在 Django 中的 SAP 和 DataModel 之间同步数据

> ID：15084088
> 
> 赞同：0
> 
> 时间：2013-02-26T07:57:28.543
> 
> 标签：python, django, database, database-design, sapb1

现在我正在 Django 下开发一个应用程序，它是用于仓库管理的 ERP。主要应用程序是使用 SAP Business One 制作的。我可以访问 SAP（MSSQL Server）中的表，但我需要在 DJANGO 数据模型表中使用 SAP 中的表项来构建仓库管理，例如：我需要将 Django 中的 DataModel 表项与表项 SAP 同步，而不是反向（DJANGO - > SAP 中的项目 [否！]）。

将 Django 中的 DataModel 与其他数据库系统或表同步的最佳方法是什么？

我想在 Django 数据库中保持一致性，因为如果在 SAP 中的 Item 表中更改某些内容，例如 Item Active（true 或 false），此更改将反映在 Django 模型中。

所以，如果 SAP Table 中有一个新的 Item，它必须在 Django DataModel Table 中。

我正在尝试简单的 Django 模型来维护它：

```
class Items(models.Model):
    SapCode         =models.CharField(max_length=100)
    Name            =models.CharField(max_length=250)
    Group           =models.IntegerField()
    Active          =models.BooleanField() 
```

我只跟踪以下方面的变化：

*   新项目（新代码）

*   名称的变化。

*   组的变化。

*   更改活动状态

提前致谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:11:22.120

Django 中确实没有“数据同步的最佳方法”。

真的，这都是关于如何*设计*数据模型的。

一些提示：

1.  找出每个对象的源系统唯一标识符。通常这只是“id”之类的东西。
2.  总是，总是，在你的模型上存储一个创建和修改的日期。这将使同步更容易。我通常这样做：

    ```
    created_on = models.DateTimeField('Created On', auto_now_add=True)
    last_modified = models.DateTimeField('Last Modified', auto_now=True) 
    ```

3.  有了这两个位（以及您需要存储的所有其他字段），只需编写代码即可从源系统中检索所有记录并根据您拥有的记录检查它们。这将是一个乏味的过程，并且完全是手动的。这种类型的项目没有“django-magic-model-sync”的东西。只是从源中获取记录、对照数据存储检查它们并更新需要更新的内容的艰苦工作。

4.  你可能会想要使用 Celery，因为我想你会想要每隔 X 分钟、几小时、几天或其他任何时间进行一次同步。因此，您需要编写一个执行 #3 的 Celery 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T02:09:21.580

您可以将 Django 与多个数据库一起使用。

```
DATABASES = {
    'default': {
        'NAME': 'app_data',
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'USER': 'postgres_user',
        'PASSWORD': 's3krit'
    },
    'items': {
        'NAME': 'items_data',
        'ENGINE': 'django.db.backends.mysql',# or what ever Engine 
        'USER': 'mysql_user',
        'PASSWORD': 'priv4te'
    } 
```

}

并且您只能同步专用数据库。

```
./manage.py syncdb --database=items 
```

在您的模型中，您可以像这样使用：

```
Items.objects.using('items').all() 
```

# php - 如果语句如何在树枝中使用全局变量？

> ID：15084096
> 
> 赞同：0
> 
> 时间：2013-02-26T07:57:57.583
> 
> 标签：php, twig

我在 twig 中分配了一个新的全局变量：

```
 $twig->addGlobal("lang", Config::$lang); 
```

我想在 if 语句中检查这个变量，但它不起作用

```
 {% if lang == 'en' %} 
```

如何检查if语句中的全局变量？

# windows - 是否可以通过 powershell for windows 或绿色软件构建“自动点击器”？

> ID：15084106
> 
> 赞同：0
> 
> 时间：2013-02-26T07:58:11.400
> 
> 标签：windows, powershell, open-source, automation, greensoftware

我想自动化一些过程，基本上运行一些工具，单击菜单，从下拉列表中选择，然后复制并粘贴到 notepad.exe 应用程序以另存为 txt 文件 - 全部在 Windows 中。

但是我的公司环境可能不允许安装。

所以我想知道，是否可以为此编写一个powershell脚本？

或者，有没有不需要安装的绿色软件？最好是开源的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T10:22:46.240

根据您真正想做的事情的复杂性，PowerShell 有一个 Windows 自动化管理单元 ( [WASP](http://wasp.codeplex.com/) )。[这里](http://wasp.codeplex.com/wikipage?title=Some%20Usage%20Examples&referringTitle=Home)有一些使用示例。我自己用它来完成简单的任务，效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:16:37.420

看看[autoit](http://www.autoitscript.com/site/autoit/)。

> AutoIt v3 是一种类似 BASIC 的免费软件脚本语言，旨在自动化 Windows GUI 和一般脚本。它结合了模拟击键、鼠标移动和窗口/控件操作，以便以其他语言（例如 VBScript 和 SendKeys）不可能或不可靠的方式自动执行任务。AutoIt 也非常小，独立，可以在所有版本的 Windows 上开箱即用地运行，不需要烦人的“运行时”！

您还可以生成脚本的可执行文件：

> 脚本可以编译成独立的可执行文件

# c# - 在winform应用程序中用c#修改excel外观

> ID：15084114
> 
> 赞同：0
> 
> 时间：2013-02-26T07:59:08.587
> 
> 标签：c#, winforms, excel-2007

我有一个 winform 应用程序，其中一种形式包含一个 excel 查看器。它允许用户打开和修改 excel 文件。但我想避免用户创建任何新工作表，

所以我需要知道：

**如何摆脱允许用户添加新工作表的工作簿选项卡的最后一个选项卡？**

![在此处输入图像描述](../Images/b2621a7548b03266c53e85f8ab1d0339.png)

**编辑 ：**

我发现以下代码使上图中的按钮不可见：

```
ExcelViewer1.Application.CommandBars["Workbook tabs"].Controls["Sheet List"].Visible = false; 
```

但它抛出了一个 COMException：“**错误 HRESULT E_FAIL 已从对 com 组件的调用中返回**”。

相同的命令适用于其他命令栏，如*Ply*，*Cell*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:50:51.387

我们可以通过执行以下操作禁用工作表插入选项卡的功能

```
workbook.Protect(Type.Missing, true, true); 
```

你也可以看看下面的链接[检查这个链接](http://www.mrexcel.com/forum/excel-questions/377839-disable-insert-worksheet-feature.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-26T08:33:54.717

好吧，您可以尝试使用此[链接](http://msdn.microsoft.com/en-gb/library/vstudio/cc442817.aspx)将控件添加到您的工作簿然后

使用这段代码添加工作表

```
Excel.Worksheet newWorksheet;
newWorksheet = (Excel.Worksheet)Globals.ThisWorkbook.Worksheets.Add(
missing, missing, missing, missing); 
```

希望有帮助。

# ruby - Ruby gems - 如何使用版本安装所需的包。需要 Ruby 版本 >= 1.9.1

> ID：15084115
> 
> 赞同：0
> 
> 时间：2013-02-26T07:59:18.310
> 
> 标签：ruby, rubygems

我正在运行 ubuntu 12.04，尝试安装时出现以下错误。我该如何解决？我如何获得 ruby​​ 1.9.1？这就是我在ubuntu上安装的方式

```
sudo apt-get install ruby ruby-dev libopenssl-ruby rdoc ri irb build-essential wget ssl-cert
sudo apt-get -y install rubygems

sudo gem install knife-windows --include-dependencies
INFO:  `gem install -y` is now default and will be removed
INFO:  use --ignore-dependencies to install only the gems you list
ERROR:  Error installing knife-windows:
    gssapi requires Ruby version >= 1.9.1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:48:43.290

我现在没有 Ubuntu 来测试它，但我认为`ruby`可能是`ruby1.8-full`.

尝试安装`ruby1.9.3`，或类似的。您可以查看[完整的软件包列表](http://packages.ubuntu.com/precise/ruby/)。

# wpf - WPF 拥有具有 ItemsSource 属性的 UserControl

> ID：15084120
> 
> 赞同：1
> 
> 时间：2013-02-26T07:59:35.400
> 
> 标签：wpf, xaml, user-controls, itemssource

我想用 ItemsSource 属性创建一个自己的用户控件。我创建了一个用户控件“myContainer”，并创建了一个用户控件“myItem”。现在我想在 myContainer 控件中显示 myItem 控件。所以我在 myContainer 控件中声明了一个依赖属性 ItemsSource。但是，如果我启动一个 testproject 并将一个集合绑定到 itemssource 属性，则什么也没有发生。这是实现 itemssource 属性的正确方法吗？

**Xaml：我的容器**

```
<UserControl x:Class="Control.myContainer"
         ...
         x:Name="myUserControl">
<Grid>
    <DockPanel x:Name="myDockPanel">

    </DockPanel>
</Grid> 
```

**myContainer 背后的代码**

```
public partial class myContainer : UserControl, INotifyPropertyChanged
{
    public static readonly DependencyProperty ItemsSourceProperty =
            DependencyProperty.Register("ItemsSource", typeof(myItem), typeof(myContainer));

    public myContainer()
    {
        InitializeComponent();
        DataContext = this;
    }

    public ObservableCollection<myItem> ItemsSource
    {
        get
        {
            return (ObservableCollection<myItem>)GetValue(ItemsSourceProperty);
        }
        set
        {
            SetValue(ItemsSourceProperty, value);
            OnPropertyChanged("ItemsSource");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**Xaml 我的项目**

```
<UserControl x:Class="Control.myItem"
         ... 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <Border BorderThickness="1" BorderBrush="Black" CornerRadius="2">
        <DockPanel>
            <StackPanel DockPanel.Dock="Top" Background="LightGray">
                <DockPanel Margin="2,2,2,2">
                    <Button x:Name="Button_Close" DockPanel.Dock="Right" Width="14" Height="14" Margin="5,0,0,0" VerticalAlignment="Center"></Button>
                    <Button x:Name="Button_Undock" DockPanel.Dock="Right" Width="14" Height="14" Margin="5,0,0,0" VerticalAlignment="Center"></Button>
                    <TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Header,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                </DockPanel>
            </StackPanel>
            <ContentPresenter DockPanel.Dock="Top" ContentSource="Content"></ContentPresenter>
        </DockPanel>
    </Border>
</Grid> 
```

**我的项目背后的代码**

```
 public partial class myItem : UserControl, INotifyPropertyChanged
{
    public static DependencyProperty _Header =
            DependencyProperty.Register("Header", typeof(String), typeof(myItem), new UIPropertyMetadata("Item"));

    public myItem()
    {
        InitializeComponent();
        DataContext = this;
    }

    public String Header
    {
        get
        {
            return (String)GetValue(_Header);
        }
        set
        {
            SetValue(_Header, value);
            OnPropertyChanged("Header");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:46:17.933

It seems like you have an item type that basically looks like this:

```
public class DataItem
{
    public string Header { get; set; }
    public object Content { get; set; }
} 
```

You may display items of this type by means of a ListBox with a `DataTemplate` for the items, set by the [`ItemTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx) property:

```
<ListBox ItemsSource="{Binding DataItems}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border BorderThickness="3" BorderBrush="Aqua">
                <StackPanel Margin="10">
                    <TextBlock Text="{Binding Header}"/>
                    <ContentPresenter Content="{Binding Content}"/>
                </StackPanel>
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

You may of course use your specialized UserControl inside the DataTemplate:

```
<DataTemplate>
    <Border BorderThickness="3" BorderBrush="Aqua">
        <StackPanel Margin="10">
            <TextBlock Text="{Binding Header}"/>
            <local:MyItemControl Content="{Binding Content}"/>
        </StackPanel>
    </Border>
</DataTemplate> 
```

* * *

The default panel used by a ListBox is a VirtualizingStackPanel. If you want to use a DockPanel instead, you can achive that by setting the [`ItemsPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx) property:

```
<ListBox ItemsSource="{Binding DataItems}">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <DockPanel />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    ...
</ListBox> 
```

* * *

EDIT: Instead of using a DataTemplate you may also completely replace the visual appearance of a ListBoxItem by replacing its ControlTemplate in a Style in `ItemsContainerStyle`:

```
<ListBox ItemsSource="{Binding DataItems}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border BorderThickness="3" BorderBrush="Aqua">
                            <StackPanel Margin="10">
                                <TextBlock Text="{Binding Header}"/>
                                <ContentPresenter Content="{Binding Content}"/>
                            </StackPanel>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
    ...
</ListBox> 
```

# ruby-on-rails - 每个用户的 rails_digest 缓存

> ID：15084121
> 
> 赞同：2
> 
> 时间：2013-02-26T07:59:37.377
> 
> 标签：ruby-on-rails, digest

在我的应用程序中，我的视图是根据用户的操作和权限生成的。

我想实现 rails_digest 来缓存我的页面，但我需要为每个用户执行此操作。

我知道在片段缓存中是可能的：

```
<% cache "mypage", project, user %> 
```

但这似乎在 rails_digest 中不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:38.993

我找到了这样做的方法：

只写：<% cache [user, project] do %> ... <% end %>

当项目发生变化时，您需要做的就是 project.touch。将为所有人重置缓存。

# php - RewriteRule - html 损坏 - 就像缺少 css

> ID：15084122
> 
> 赞同：1
> 
> 时间：2013-02-26T07:59:42.603
> 
> 标签：php, .htaccess, mod-rewrite

我对这条规则有疑问：

```
RewriteRule ^([^/]+)/(\d+)$ more.php?books=$1&tags=$2 [L] 
```

在此规则之后，一切正常，但页面显示不正确。就像缺少 css。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:22:22.663

当您有 CSS 文件的相对 URL 时，可能会发生这种情况。例如，如果您访问 URL`/book-name/2`并具有指向 的链接`css/style.css`，浏览器会将其解析为`/book-name/css/style.css`。

将您的 CSS 链接更改为绝对 URL，例如`/css/style.css`，您应该没问题。

# java - 如何在受保护的工作表上默认创建不受保护的单元格？

> ID：15084123
> 
> 赞同：0
> 
> 时间：2013-02-26T07:59:47.830
> 
> 标签：java, apache-poi

当我使用 Apache POI 创建受保护的工作表时，默认情况下所有单元格都受到保护。我必须单独解锁每个单元格。是否可以在所有单元格默认不受保护的情况下保护工作表（这样我只保护我想要的单元格）。

（使用的代码）

```
/*for sheet protection*/
sheet.protected("password");
/*creating style to unlock cell */
CellStyle unlockedCellStyle = workbook.createCellStyle();
unlockedCellStyle.setLocked(false);

/*applying unlock style to cell */  
cell.setCellStyle(unlockedCellStyle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:45:08.810

It is not possible to have created cells default to unlocked; locked is the default. But you are on the right track by creating a `CellStyle` with locked set to false. Make sure that you set locked to false on any and all of your new `CellStyle` objects that you want to be unlocked. Additionally, Excel has a limit on the number of cell styles that can be created in a `Workbook`, so re-use your `CellStyle` object(s) with each `Cell` you create.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T03:17:31.247

可以更改 apache POI 中的默认单元格样式。
如果您在单元格上完成了操作，而不是为您的单元格创建新的单元格样式`getCellStyle()`，这将返回默认的单元格样式，并且您将能够
根据[this](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html#getCellStyle())对其进行编辑。

`getCellStyle`从不返回 null，如果是新单元格，则返回默认单元格样式。

所以基本上要编辑单元格的默认单元格样式，要么`getCellStyle`在新创建的单元格上执行，要么试试这个`workbook.getCellStyleAt(0)`。有关详细信息，
请参阅[此内容。](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html#getCellStyleAt(int))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T07:57:08.973

您可以`XSSFCellStyle defaultCellStyle = wb.getCellStyleAt(0);`获取默认单元格样式，然后`defaultCellStyle.setLocked(false);`这会将您的工作簿的默认单元格样式更改为解锁。

# android - 如何使位图透明？

> ID：15084128
> 
> 赞同：3
> 
> 时间：2013-02-26T08:00:24.117
> 
> 标签：android, bitmap, imageview, opacity, transparent

```
/**
 * @param bitmap
 *            The source bitmap.
 * @param opacity
 *            a value between 0 (completely transparent) and 255 (completely
 *            opaque).
 * @return The opacity-adjusted bitmap. If the source bitmap is mutable it
 *         will be adjusted and returned, otherwise a new bitmap is created.
 *         Source : http://stackoverflow.com/questions/7392062/android-
 *         semitransparent-bitmap-background-is-black/14858913#14858913
 */
private Bitmap adjustOpacity(Bitmap bitmap, int opacity) {
    Bitmap mutableBitmap = bitmap.isMutable() ? bitmap : bitmap.copy(Bitmap.Config.ARGB_8888, true);
    Canvas canvas = new Canvas(mutableBitmap);
    int colour = (opacity & 0xFF) << 24;
    canvas.drawColor(colour, PorterDuff.Mode.DST_IN);
    return mutableBitmap;
} 
```

使用`adjustOpacity`，我使`ImageView`'`Bitmap`是半透明的。

```
Bitmap newBitmap = adjustOpacity(orignalBitmap, 10);
view.setImageBitmap(newBitmap);
view.setBackgroundColor(Color.WHITE); 
```

但是，`Imageview`显示更暗之前不是白色。如何使用 制作半透明（白色背景）Imageview `Bitmap`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-19T18:19:23.197

```
// Convert transparentColor to be transparent in a Bitmap.
public static Bitmap makeTransparent(Bitmap bit, Color transparentColor) {
    int width =  bit.getWidth();
    int height = bit.getHeight();
    Bitmap myBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    int [] allpixels = new int [ myBitmap.getHeight()*myBitmap.getWidth()];
    bit.getPixels(allpixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(),myBitmap.getHeight());
    myBitmap.setPixels(allpixels, 0, width, 0, 0, width, height);

    for(int i =0; i<myBitmap.getHeight()*myBitmap.getWidth();i++){
     if( allpixels[i] == transparentColor)

                 allpixels[i] = Color.alpha(Color.TRANSPARENT);
     }

      myBitmap.setPixels(allpixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight());
      return myBitmap;
} 
```

The above code will take a Bitmap, and return a Bitmap where every pixel which the color is transparentColor is transparent. This works in API as low as level 8, and I have not tested it in any lower.

I typically use something like Color.RED to make my transparent pixels, because I don't use a lot of RED in my assets, but if I do it's a custom red color.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:18:51.313

尝试这个。还要注意 setAlpha 在 0-255 范围内

```
//bmp is your Bitmap object

BitmapDrawable bd = new BitmapDrawable(bmp);
bd.setAlpha(50);

ImageView v = (ImageView) findViewById(R.id.image);
v.setImageDrawable(bd); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-18T10:01:59.823

使现有位图透明太简单了。

如果您想在进一步绘制之前使您的位图透明，请按照此操作。

如果您的位图是 mBitmap，那么只需使用：-

```
mBitmap.eraseColor(Color.TRANSPARENT) 
```

而已。祝你好运 ！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-28T21:23:48.310

添加方法

```
Bitmap bmp; DrawView DrawView;

private static Bitmap makeTransparentBitmap(Bitmap bmp, int alpha) {
        Bitmap transBmp = Bitmap.createBitmap(bmp.getWidth(),
                bmp.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(transBmp);
        final Paint paint = new Paint();
        paint.setAlpha(alpha);
        canvas.drawBitmap(bmp, 0, 0, paint);
        return transBmp;
    }

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.rgb(43,44,45));

    bmp = BitmapFactory.decodeResource(getResources(), R.drawable.mouse);
    canvas.drawBitmap(bmp, pos_x, pos_y, null); 

} 
```

你事件：

```
bmp = makeTransparentBitmap( bmp, 122 );
DrawView.invalidate(); 
```

`DrawView`是

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    DrawView = new DrawView(this);
    setContentView( DrawView );
} 
```

[我在这里](https://dominoc925.blogspot.com/2015/12/android-code-snippet-to-create.html)找到了这个答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-22T13:51:53.667

@akaya 的答案是正确的方法，只是构造函数已被弃用。自 API 4 以来的新方法是使用：

```
BitmapDrawable drawable = new BitmapDrawable(getResources(), bitmap);
drawable.setAlpha(100); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T08:06:10.067

尝试这个，

```
newBitmap.setImageResource(android.R.color.transparent); 
```

# java - 我们如何拦截单击搜索视图时打开的左上箭头图像

> ID：15084130
> 
> 赞同：3
> 
> 时间：2013-02-26T08:00:30.293
> 
> 标签：java, android

在我的应用程序中单击 searchview 图标，搜索视图与启动器图标一起打开，启动图标旁边有 < 箭头，搜索功能工作正常，但是我们如何拦截 < 箭头图标，或者我们如何像我一样调用这个图标在图像的 clik 上执行功能？有什么想法吗？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:10:49.323

我认为你想要做的是：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {

        case android.R.id.home:

            //your code here

        return true;

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T13:45:14.280

也许为时已晚。但我在这个回复中找到了解决你问题的方法（我遇到了同样的问题）：

[https://stackoverflow.com/a/12975254/2789106](https://stackoverflow.com/a/12975254/2789106)

PS：注意这里不会拦截<箭头中的点击，而是拦截searchView折叠时调用的回调。但是，当您使用 searchView 时，这将起作用（对我有用 =D）。

# jquery - jquery模型形式

> ID：15084131
> 
> 赞同：0
> 
> 时间：2013-02-26T08:00:32.883
> 
> 标签：jquery

```
function checkname(o) {
    var o = $('#log').val();                
    $.ajax({
        url: 'check_name',
        type: 'POST',
        data: 'username=' + o,
        success: function(o){
            if(o == 1) {
                 return o;
            }
            else {
                 o.addClass( "ui-state-error" );
         updateTips( "not available" );
         return false; 
            }
        }
  });
} 
```

与模型中的表格相关的此功能是否可用

```
$( "#dialog-form" ).dialog({
     autoOpen: false,
     height: 600,
     width: 550,
     modal: true,
     buttons: {
    "save": function() {
        var bValid = true;
        allFields.removeClass( "ui-state-error" );

        bValid = bValid && checkname ( name, "name");

        if ( bValid ) {
                $.ajax({
            type: 'POST',
            url: 'add_user',
            data: $('#myform :input').serialize(),

            success: function(i) {
                alert('sucess');
                            window.setTimeout(function(){location.reload()},500)

            }
        });
        $( this ).dialog( "close" );
    }
    },
    Cancel: function() {
    $( this ).dialog( "close" );
    }
   },
   close: function() {
     allFields.val( "" ).removeClass( "ui-state-error" );
   }
}); 
```

当我单击保存表单时不会保存或仅在萤火虫中不会关闭返回 1

我想如果名称可用表格保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:08:37.923

`checkname`由于 AJAX 调用是异步的，因此您不能通过从成功回调中返回来从函数中返回某些内容。

使用回调方法处理结果：

```
function checkname(o, whenValid) {
  var o = $('#log').val();
  $.ajax({
    url: 'check_name',
    type: 'POST',
    data: 'username=' + o,
    success: function (o) {
      if (o == 1) {
        whenValid();
      } else {
        o.addClass("ui-state-error");
        updateTips("not available");
      }
    }
  });
}

$("#dialog-form").dialog({
  autoOpen: false,
  height: 600,
  width: 550,
  modal: true,
  buttons: {
    "save": function () {
      allFields.removeClass("ui-state-error");

      checkname(name, function(){

            $.ajax({
                type: 'POST',
                url: 'add_user',
                data: $('#myform :input').serialize(),

                success: function (i) {
                    alert('sucess');
                    window.setTimeout(function () {
                        location.reload()
                    }, 500)

                }
            });
            $(this).dialog("close");

      });

    },
    Cancel: function () {
        $(this).dialog("close");
    }
  },
  close: function () {
    allFields.val("").removeClass("ui-state-error");
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:11:21.323

在第一个 ajax 函数中，您从成功函数的范围内返回，但 checkname 函数不返回任何内容。即使这样做了，ajax 也是异步的，所以返回返回数据的值是行不通的。

在开始使用数据之前，您必须等待 ajax 调用完成，您可以通过使用 ajax 函数的延迟返回来做到这一点，如下所示：

```
function checkname(name) {
    return $.ajax({
        url: 'check_name',
        type: 'POST',
        data: {username : name}
    });
} 
```

你会像这样使用：

```
$("#dialog-form").dialog({
    autoOpen: false,
    height: 600,
    width: 550,
    modal: true,
    buttons: {
        save: function () {
            allFields.removeClass("ui-state-error");
             //whatever "name" is ?
            checkname($('#log').val()).done(function(data) {
                if (data==1) {
                    $.ajax({
                        type: 'POST',
                        url: 'add_user',
                        data: $('#myform :input').serialize()
                    }).done(function(data2) {
                        //why use ajax only to reload the page ?
                        alert('sucess');
                        window.setTimeout(function () {
                            location.reload();
                        }, 500);
                    });
                    $(this).dialog("close");
                }
            });
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    },
    close: function () {
        allFields.val("").removeClass("ui-state-error");
    }
}); 
```

此外，您似乎到处都在使用相同的变量。checkname 函数的参数是`o`，在函数内部你有一个新的变量叫做`o`，然后你`o`在ajax函数中使用，你应该尝试更有创意吗？

# java - 使用 Google 电子表格进行 OAuth2 身份验证的问题

> ID：15084133
> 
> 赞同：4
> 
> 时间：2013-02-26T08:00:40.147
> 
> 标签：java, google-spreadsheet-api, google-oauth

我正在使用 java 库进行 oauth2 身份验证来访问谷歌电子表格。

我正在使用以下代码进行 OAuth2 身份验证：

```
credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
    .setJsonFactory(JSON_FACTORY)
    .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
    .setTokenServerEncodedUrl("https://accounts.google.com/o/oauth2/token")
    .setServiceAccountScopes("https://www.googleapis.com/auth/drive", "https://spreadsheets.google.com/feeds", "https://docs.google.com/feeds")
    .setServiceAccountPrivateKeyFromP12File(new File("xxxxx-privatekey.p12")).build(); 
```

获得“凭证”后，使用以下代码读取电子表格：

```
SpreadsheetService service = new SpreadsheetService(
                        "MySpreadsheetIntegration");
service.setOAuth2Credentials(credential);
URL SPREADSHEET_FEED_URL = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");          
SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
System.out.println(feed.getTotalResults()); 
```

执行上面的代码给我返回总结果 0。

如果我使用：

```
service.setUserCredentials("email", "password"); 
```

代替 oauth2 身份验证，它给了我正确的结果。不确定 OAuth2 身份验证有什么问题。此外，当我从“凭据”对象打印“访问令牌”时，它会打印一个有效的访问令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:27:38.067

我用：

```
spreadsheetService = new SpreadsheetService("cellmaster.com.au-v0.2");  
spreadsheetService.setHeader("Authorization", "Bearer " + accessToken); 
```

而不是：

```
spreadsheetService = new SpreadsheetService("cellmaster.com.au-v0.2");  
spreadsheetService.setOAuth2Credentials(credential); 
```

我还必须为刷新令牌添加代码。由于访问令牌很快就会过期。但是刷新令牌可以按您的预期工作。

# javascript - /斜线在javascript中的正则表达式中是什么意思

> ID：15084134
> 
> 赞同：0
> 
> 时间：2013-02-26T08:00:42.213
> 
> 标签：javascript, regex

/（斜杠）在下划线之前和之后是什么意思（_ 或任何有效的正则表达式）。它是否与 ^ 和 $ 相同，因为我习惯以这种方式写作，但也看到有些人也以这种方式写作。而且它是javascript中替换方法的特殊要求还是我可以没有它？

```
var hello = "Hello_there."
    .replace(/_/g, ' '); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:01:25.993

`/_/g`构建正则表达式**literal**，就像`"_"`构建字符串文字一样。

`/_/g`相同，`new RegExp("_", "g")`但在解析和评估后立即编译，因此如果您经常执行这行代码，效率会更高。

当第一次评估代码时，作为代码的大字符串被替换为逻辑结构，其中包含运算符、字符串、数字等。您在此结构中也有正则表达式，这意味着每次执行代码时都不会发生正则表达式的编译，而只会发生一次。

它也更具可读性，因此当正则表达式为常量时应该首选。

MDN 有[关于构建和使用正则表达式的良好文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:14:22.487

斜线表示开始，/g 表示正则表达式模式的结束。这只是语法。

# apache - 在查询字符串中用斜杠 ( %2F ) 重写 url

> ID：15084135
> 
> 赞同：1
> 
> 时间：2013-02-26T08:00:45.053
> 
> 标签：apache, iis, mod-rewrite, url-rewriting

我想知道是否有一种方法可以处理包含斜杠（ %2F ）的重写规则（ iis 和 apache ）url查询字符串作为它的一部分。

举个例子：

```
www.domain.com/project/word1 
```

被重写为

www.domain.com/project/index.php?word=word1

通过此规则（在 iis 中）：

```
<rule name="Friendly">
    <match url="^(.+)$" ignoreCase="true" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="index.php?word={R:1}" appendQueryString="false" />
</rule> 
```

或在阿帕奇：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+)$ index.php?word=$1 
```

这工作正常。

但是也有这样的情况：

```
www.domain.com/project/word1%2Fword2 
```

应该重定向到

```
www.domain.com/project/index.php?word=word1/word2 
```

但显然由于斜杠（ %2F ），我得到了一个错误 404。有没有办法解决这个问题？即使这意味着我必须切断 /word2 部分并将 www.domain.com/project/word1%2Fword2 重定向到 www.domain.com/project/index.php?word=word1

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:01:57.013

我发现您的情况很特殊，因为在 Apache 的*mod_rewrite*模块（我不确定 IIS）中，它声明[RewriteRule](https://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule) *模式*与我引用的**“（％-decoded）URL路径（或文件路径，取决于请求的上下文）”**。

我在测试后遇到的是编码的斜杠**没有**被服务器解码或解释（我也得到一个 404 错误）。

但是，当内容将用作*查询字符串*参数（例如`http://www.example.com/?path=word1%2Fword2`）时，我意识到一个主要是 url 编码 URL 部分，这是合乎逻辑的，因为您不希望服务器将编码的斜杠解释为 URL 路径的一部分。请注意，此观察结果与上述陈述相矛盾，因此请持保留态度。

## 解决方案

然而，我可以确认的是重写没有问题`www.domain.com/project/word1/word2`。因此，我建议您不要对将在*路径*部分使用的 URL 的 pat 进行编码，而是可能将允许的字符列入白名单，以便避免使用特殊字符，例如`?`.

* * *

## 试验结果

**.ht 访问：**

```
RewriteRule ^(.+) index.php?word=$1 [L] 
```

**索引.php：**

```
<pre>
    <?php var_dump( $_GET, true ); ?>
</pre> 
```

**网址：`http://test/word1%2Fword2`**

产量 404。

**网址：`http://test/word1/word2`**

产量：

```
<?php
array (size=1)
  'word' => string 'word1/word2' (length=11)
?> 
```

# php - php mvc 更改默认 url 模式

> ID：15084139
> 
> 赞同：1
> 
> 时间：2013-02-26T08:01:01.480
> 
> 标签：php, url-routing, yaf

我正在使用 yaf php 框架

我想得到参数数组。前任：

我的网址：... mvcSample/svc/saveUser/user1/pass/a@bc/joe/foo

我的输出参数转储：

```
 array (size=3)
  'user1' => string 'pass' (length=4)
  'a@b.c' => string 'joe' (length=3)
  'foo' => null 
```

我想：

```
array (size=5)
1 =>string 'user1'
2 => string 'pass' 
3 => string 'a@b.c'
4 => string 'joe' 
5 =>string 'foo' 
```

如何更改默认网址格式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T00:44:59.953

由于 Yaf 没有很好的记录，我能想到的唯一选择是自己解析 URI：

```
$parts = explode('/', $this->getRequest()->getRequestUri()); 
```

但是你会在 $parts 数组的开头得到垃圾。

可能，迟早您将开始尝试自定义 URL 路由（您可以在此处找到一些示例：http: [//docs.php.net/manual/da/yaf-route-regex.construct.php](http://docs.php.net/manual/da/yaf-route-regex.construct.php)），这将允许您使用正则表达式解析 URL 并将匹配的组传递给控制器​​：

```
/* in Bootstrap.php */

$dispatcher->getRouter()->addRoute('saveUser', 
    new Yaf_Route_Regex(
        ',^/mvcSample/svc/saveUser/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$,',
        array(
            'controller' => 'svc',
            'action' => 'saveUser',
        ),
        array(
            1 => 'username',
            2 => 'password',
            3 => 'email',
            4 => 'firstname',
            5 => 'somefooshmoo',
        ),
    )
); 
```

# cuda - 了解 CUDA 依赖检查

> ID：15084141
> 
> 赞同：1
> 
> 时间：2013-02-26T08:01:04.060
> 
> 标签：cuda

CUDA C 编程指南提供以下语句：

> 对于支持并发内核执行且计算能力为 3.0 或更低的设备，任何需要依赖项检查以查看流内核启动是否完成的操作：
> 
> ‣ 只有当所有先前内核的所有线程块从 CUDA 上下文中的任何流启动时，才能开始执行；
> 
> ‣ 阻止所有以后从 CUDA 上下文中的任何流启动内核，直到检查内核启动完成。

我在这里很迷茫。什么是依赖检查？我可以说在某些设备内存上执行内核需要对所有先前的内核或涉及相同设备内存的内存传输进行依赖性检查吗？如果这是真的（也许不是真的），这个依赖检查会根据上面的语句从任何其他流中阻塞所有以后的内核，因此之后不会发生异步或并发执行，这似乎不正确。

任何解释或阐述将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T17:33:53.773

首先，我建议您访问 nvidia 的[网络研讨会站点](https://developer.nvidia.com/gpu-computing-webinars)并观看有关并发和流的网络研讨会。

进一步考虑以下几点：

*   发布到同一流的命令被视为**依赖**

    > 例如，您可以在该内核将访问的一些数据的内存副本**之后**将内核插入流中。内核**“取决于”**可用的数据。

*   因此，可以保证同一流中的命令**按顺序**执行（或同步执行，通常用作同义词）
*   然而，不同流中的命令是独立的，可以同时运行
*   所以依赖关系只有程序员知道，并使用流表示（以避免错误）！

以下仅对应于计算能力为 3.0 或更低的设备（如 quide 中所述）。如果您想了解更多关于计算能力 3.5 对流调度行为的更改，请查看[HyperQ](http://docs.nvidia.com/cuda/samples/6_Advanced/simpleHyperQ/doc/HyperQ.pdf)和相应的[示例](http://docs.nvidia.com/cuda/cuda-samples/index.html#simplehyperq)。在这一点上，我还想参考[这个](https://stackoverflow.com/questions/14837622/stream-scheduling-order)我找到 HyperQ 示例的线程 :)

关于您的第二个问题：我不太明白您所说的“在某些设备内存上执行内核”或“涉及设备内存的内核执行”是什么意思，所以我将您的陈述简化为：

> 内核执行需要对所有先前的内核和内存传输进行依赖性检查。

更好的是：

> CUDA 操作需要进行依赖性检查，以查看**同一流中的**先前 CUDA 操作是否已完成。

我认为您的问题在于“开始执行”的表达。这意味着仍然可以有独立的（即在不同的流上）内核启动，这**将**与以前的内核并发，前提是它们都已开始执行**并且**有足够的设备资源可用。

# javascript - Kendo UI 在当前选项卡中打开视图

> ID：15084142
> 
> 赞同：0
> 
> 时间：2013-02-26T08:01:22.933
> 
> 标签：javascript, kendo-ui

我目前有一个带有两个选项卡项的 Kendoui 模板。如何在这些选项卡中打开新视图？

我希望能够做类似的事情：

选项卡 1 -> 视图 1 -> 视图 2

如果 view2 处于打开状态，则它在选项卡 1 中保持打开状态。

基本上，视图 1 包含一个列表视图。我希望能够在列表视图中选择一个项目并打开一个新视图以显示有关该项目的更多详细信息。这个视图应该有一个返回按钮，可以带你回到列表视图。

很难弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:59:50.677

使用 ListView 的**[change](http://docs.kendoui.com/api/web/listview#change)**事件和 tabStrip 对象的**[activateTab](http://docs.kendoui.com/api/web/tabstrip#activatetab)**方法。

# javascript - JS正则表达式匹配，条件不捕获

> ID：15084146
> 
> 赞同：1
> 
> 时间：2013-02-26T08:01:36.103
> 
> 标签：javascript, regex

我需要在 'id-odes=' 之后捕获数字，但只有没有这个短语的数字。我写了这样的东西

```
"id-odes=50388635:id-odes=503813535:id-odes=50334635"
    .match(/(?:id-odes=)([0-9]*)/g); 
```

但它返回

```
["id-odes=50388635", "id-odes=503813535", "id-odes=50334635"] 
```

代替

```
[50388635, 503813535, 50334635] 
```

请帮助并解释为什么我的方法不能正常工作。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:12:05.947

您可以迭代结果，而不仅仅是输出数组：

```
var re =/id-odes=([0-9]*)/g,
s = "id-odes=50388635:id-odes=503813535:id-odes=50334635";

while ((match = re.exec(s)) !== null) {
    console.log(match[1]);
} 
```

[**演示**](http://jsbin.com/oqerul/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:12:57.273

如果你想迭代匹配，那么你可以使用类似的东西：

```
s = "id-odes=50388635:id-odes=503813535:id-odes=50334635"  
re = /(?:id-odes=)([0-9]*)/
while (match = re.exec(s))
{
    console.log(match[1]); // This is the number part
} 
```

假设整个字符串完全采用这种格式，您当然可以使用 `"id-odes=50388635:id-odes=503813535:id-odes=50334635".match(/[0-9]+/g)`，但如果字符串中有任何其他数字，那当然会中断。

解释为什么`.match(/(?:id-odes=)([0-9]*)/g);`给你错误的结果很简单：你得到正则表达式匹配的所有东西，不管捕获组。

# c++ - std::condition_variable::notify_one() 调用了两次

> ID：15084149
> 
> 赞同：4
> 
> 时间：2013-02-26T08:01:43.450
> 
> 标签：c++, c++11, condition-variable

如果我在没有任何时间间隔的情况下两次调用 std::condition_variable::notify_one() 会唤醒多少个等待线程，如下所示：

```
{
    std::unique_lock<std::mutex> lock(condvar_mutex);

    condvar.notify_one();
    condvar.notify_one();
} 
```

是否可以保证这些通知将被传递到不同的线程，而不是多次传递给同一个线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:07:10.403

> §30.5.1.7：如果任何线程被阻塞等待 *this，则取消阻塞其中一个线程。

不能保证它是不同的线程，只是它是**一个**线程。在两次`notify_one`调用之间的时间里，第一次唤醒的同一个线程可能会`notify_one`被重新阻塞。

例如，在下面的示例中，不能保证线程 3 是否会唤醒（在此示例中忽略虚假唤醒）。

```
- thread 1:

1    condvar.notify_one();
- 3 and 4 could run here.
2    condvar.notify_one();

- thread 2:

3    condvar.wait(/*...*/);
4    condvar.wait(/*...*/);

- thread 3:

5    condvar.wait(/*...*/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:32:49.983

我认为这`condvar_mutex`是 condvar 的正确互斥锁。

不可能将两个通知传递到同一个线程。原因是您*在持有 mutex 时*`notify_one`调用了两次。因此，无论哪个线程先解锁，它都无法获取互斥锁，因此无法从. 如果不首先获取互斥锁，它甚至不能抛出异常。*`wait``wait_for`*

 *由于它无法退出等待，因此它无法在第二个`notify_one`被调用之前回到服务员列表中。

因此，如果有那么多线程，您的代码最多可以解除 condvar 上阻塞的两个线程。如果数量较少，则附加通知无效。*

# java - 我的 JTree 代码有什么问题？

> ID：15084151
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:01:51.090
> 
> 标签：java, swing, import, packaging, jtree

[我从http://kodejava.org/examples/566.html](http://kodejava.org/examples/566.html)站点下载了一个 JTree 程序。它正在编译，但是在运行程序时，它给出了这个异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: JTreeDifferentNodeIcon (wrong name: org/kodejava/example/swing/JTreeDifferentNodeIcon)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

谁能告诉我会是什么问题？？感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:17:03.817

你的包裹是`org.kodejava.example.swing`. 您可以尝试通过指定 -d 选项来构建 javac。为了更好地理解让我们假设你的桌面上有源文件说`"C:\Users\sarath_sivan\Desktop\JTreeDifferentNodeIcon.java"`

*   首先，您可以打开命令提示符并将目录更改为 `C:\Users\sarath_sivan\Desktop`( `cd C:\Users\sarath_sivan\Desktop`)。
*   然后在那里创建一个名为 classes 的新文件夹 ( `mkdir classes`)。
*   现在，您可以使用 javac 构建，指定“-d”选项来告诉它基本目录，它将创建适当的包结构。( `javac -d classes JTreeDifferentNodeIcon.java`)
*   然后你可以运行`java -cp classes org.kodejava.example.swing.JTreeDifferentNodeIcon`它将产生如下输出：

![在此处输入图像描述](../Images/d46eb523e5af79412331faa6d243e903.png)

希望这可以帮助！谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:14:02.150

它说“NoClassDefFoundError”（没有找到类定义错误）所以我认为您使用的是以前未定义的类（可能是因为输入错误或忘记导入某些内容或删除文件或将最终文件从一个文件夹移动到另一个）
PS我还没看代码（时间不够）

# perl - perl，使用 XML::Simple 解析 XML

> ID：15084154
> 
> 赞同：2
> 
> 时间：2013-02-26T08:02:02.813
> 
> 标签：perl, xml-simple

解析 XML 时我做错了什么。不知何故，我必须迭代两个循环，其中只需要一个。我在这里做错了什么？

首先是xml数据：

```
<fishy>
  <fish displayName          = "Scalar"
        description          = "the first fish I bought."
   />
  <fish displayName          = "crystal red"
        description          = "not really a fish."
   />
</fishy> 
```

然后我的perl代码：

```
#!/usr/bin/perl -w
use strict;
use XML::Simple;
use Data::Dumper;

#Read configuration
my $simple = XML::Simple->new();
my $data   = $simple->XMLin('test.xml');
print Dumper($data) . "\n";

my @fishes = $data->{fish};

#This is weird.. Why do we have nested arrays?
foreach my $fish (@fishes)
{
  foreach my $innerFish (@{$fish})
  {
    print ("\n" . $innerFish->{displayName} . " is " . $innerFish->{description});
  }
    print ("\n");
} 
```

最后是响应（很好）

```
$VAR1 = {
          'fish' => [
                    {
                      'description' => 'the first fish I bought.',
                      'displayName' => 'Scalar'
                    },
                    {
                      'description' => 'not really a fish.',
                      'displayName' => 'crystal red'
                    }
                  ]
        };

Scalar is the first fish I bought.
crystal red is not really a fish. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:13:16.250

您使用一个元素（对数组的引用）创建一个数组

```
my @fishes = $data->{fish}; 
```

然后你遍历该数组的元素

```
foreach my $fish (@fishes) 
```

这只是一种非常奇怪的做法

```
my $fish = $data->{fish}; 
```

让我们使用它，但重命名`$fish`为`$fishes`和。`$innerFish``$fish`

```
my $fishes = $data->{fish};
for my $fish (@$fishes) {
   print($fish->{displayName}, " is ", $fish->{description}, "\n");
} 
```

当您只有一条鱼时，不要忘记使用该`ForceArray => [qw( fish )]`选项来确保代码有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:16:11.793

`my @fishes = @{$data->{fish}};`

# haskell - Haskell 优化器是否利用 memoization 在范围内重复调用函数？

> ID：15084162
> 
> 赞同：12
> 
> 时间：2013-02-26T08:02:39.223
> 
> 标签：haskell, optimization, compiler-construction, memoization

考虑这个函数：

```
f as = if length as > 100 then length as else 100 
```

由于该函数是纯函数，因此很明显两个调用的长度相同。我的问题是 Haskell 优化器是否将上面的代码转换为以下代码？

```
f as = 
  let l = length as
  in if l > 100 then l else 100 
```

如果是这样，那么哪个级别设置启用它？如果没有，那为什么？在这种情况下，内存浪费不是[这个答案](https://stackoverflow.com/a/5898410/485115)中解释的原因，因为一旦函数执行完成，引入的变量就会被释放。

* * *

请注意，由于本地范围，这不是[此问题](https://stackoverflow.com/questions/6086836/optimization-of-function-calls-in-haskell)的重复，因此它可能会得到完全不同的答案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T09:16:53.023

GHC 现在[默认做一些 CSE](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/options-optimise.html)，因为`-fcse`标志是打开的。

> 默认情况下打开.. 启用公共子表达式消除优化。如果您有一些不希望通用的 unsafePerformIO 表达式，则将其关闭会很有用。

然而，由于引入共享的问题（因此空间泄漏） ，它是[保守的。](http://hackage.haskell.org/trac/ghc/ticket/2940)不过，CSE 通行证变得[更好](http://hackage.haskell.org/trac/ghc/ticket/7596)了（还有[这个](http://hackage.haskell.org/trac/ghc/ticket/5996)）。

最后，请注意有一个完整的 CSE 插件。

*   [http://hackage.haskell.org/package/cse-ghc-plugin](http://hackage.haskell.org/package/cse-ghc-plugin)

如果您有可以从中受益的代码。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-26T08:13:35.640

即使在这样的本地环境下，引入共享始终是一种优化的情况仍然不明显。考虑这个示例定义

```
f = if length [1 .. 1000000] > 0 then head [1 .. 1000000] else 0 
```

对比这个

```
f = let xs = [1 .. 1000000] in if length xs > 0 then head xs else 0 
```

你会发现在这种情况下，第一个表现得更好，因为对列表执行的每个计算都很便宜，而第二个版本将导致列表在内存中完全展开`length`，并且只能被丢弃`head`减少后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T08:57:36.843

您所描述的情况更多地与[常见的子表达式消除](http://en.wikipedia.org/wiki/Common_subexpression_elimination)有关，而不是记忆，但是[GHC 目前似乎也没有这样做，](http://www.haskell.org/haskellwiki/GHC%3aFAQ#Does_GHC_do_common_subexpression_elimination.3F)因为无意的共享可能会导致空间泄漏。

# javascript - 将 onclick-event 从 underscore.js 模板绑定到在 viewmodel 上运行

> ID：15084163
> 
> 赞同：2
> 
> 时间：2013-02-26T08:02:39.923
> 
> 标签：javascript, knockout.js, underscore.js

html:

```
<script type="text/html" id="underscoreTemplate">
    <% _.each(arr(), function(x) { %> 
        <button onclick="x.doSomething()"><%= x.label %></button>
    <% }) %>
</script> 
```

Knockout.js 视图模型：

```
setupUnderscoreTemplateEngine();

var vm = {
    arr: ko.observableArray([
        {
            label: "lbl1",
            doSomething: function() {
                 alert("foo");   
            }
        },
        {
            label: "lbl2",
            doSomething: function() {
                 alert("bar");   
            }
        }
    ])
};

ko.applyBindings(vm);

function setupUnderscoreTemplateEngine() {
    /* ---- Begin integration of Underscore template engine with Knockout. Could go in a separate file of course. ---- */
    ko.underscoreTemplateEngine = function () {}
    ko.underscoreTemplateEngine.prototype = ko.utils.extend(new ko.templateEngine(), {
        renderTemplateSource: function (templateSource, bindingContext, options) {
            // Precompile and cache the templates for efficiency
            var precompiled = templateSource['data']('precompiled');
            if (!precompiled) {
                precompiled = _.template("<% with($data) { %> " + templateSource.text() + " <% } %>");
                templateSource['data']('precompiled', precompiled);
            }
            // Run the template and parse its output into an array of DOM elements
            var renderedMarkup = precompiled(bindingContext).replace(/\s+/g, " ");
            return ko.utils.parseHtmlFragment(renderedMarkup);
        },
        createJavaScriptEvaluatorBlock: function (script) {
            return "<%= " + script + " %>";
        }
    });
    ko.setTemplateEngine(new ko.underscoreTemplateEngine());
    /* ---- End integration of Underscore template engine with Knockout ---- */
} 
```

见小提琴：http: [//jsfiddle.net/ballmenace/RrrMe/](http://jsfiddle.net/ballmenace/RrrMe/)

我有一个由 underscore.js 模板引擎渲染的按钮。我正在尝试将按钮的 onclick 事件绑定到当前视图模型上的函数。

是的，我知道我可以使用`<button data-bind="click: myfunc">`，但是在大型数据集上使用它时性能很差。

是否有可能在循环中“捕获”当前视图模型并稍后在 onclick 事件处理程序中引用它？

# javascript - three.js 仅线框形状，隐藏边缘为虚线

> ID：15084165
> 
> 赞同：9
> 
> 时间：2013-02-26T08:02:44.587
> 
> 标签：javascript, three.js, webgl

我正在尝试在 three.js 中创建特定类型的 3D 对象。例如，我想要一个处于线框模式的立方体（所以只显示边缘）。但我希望后面的边缘是虚线的。插图：![插图](../Images/ad0a63ab75a44810f0db1e080eb61b68.png)

我不知道这对于three.js 是否可行，或者我是否应该直接尝试使用webgl。我应该`THREE.Mesh`在线框中`THREE.Line`使用还是同时使用，`LineDashedMaterial`或者两者都在彼此之上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:54:11.887

我设法做到了。您需要创建三个对象。

第一个对象：实体 3d 对象（我的意思是面而不是边缘）

第二个对象：所有边缘，但虚线

第三个对象：所有边缘，但正常（不是虚线）

对于第一个对象，使用 设置材质`color: false, side: THREE.DoubleSide, depthTest: true`。

第二对象材料：`color: (whatever you like), depthTest: false`.

第三对象材料：`color: (whatever you like), depthTest: true`。

我还设置了所有材料`polygonOffset: true, polygonOffsetFactor: 1, polygonOffsetUnits: 1`以摆脱 z-fighting。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T21:41:39.293

这是一个非常酷的想法。如上所述，我已在以下位置实现了您的答案：

[http://stemkoski.github.com/Three.js/Dashed-3D.html](http://stemkoski.github.com/Three.js/Dashed-3D.html)

以防有人想看到它在行动。

# mysql - SQL INSERT 是否涉及任何读/写锁？

> ID：15084171
> 
> 赞同：0
> 
> 时间：2013-02-26T08:03:03.670
> 
> 标签：mysql, insert, locking

这是一个非常简单的问题，但我真的在谷歌上找不到任何有用的答案。

我一直在读到 SELECT 上有一个 READ LOCK，而 UPDATE 语句上有一个 WRITE LOCK。但是，我试图找出当我们插入表时是否有任何类型的 LOCK？

假设该表使用 InnoDB 作为引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:18:11.087

插入时，InnoDB 会创建一个所谓的“间隙锁”。

[该手册很好地描述了这一点](http://dev.mysql.com/doc/refman/5.5/en/innodb-record-level-locks.html)：

> *一种称为插入意图间隙锁的间隙锁由插入操作在行插入之前设置。该锁表示插入的意图，即如果插入到同一索引间隙中的多个事务没有在间隙内的同一位置插入，则它们不需要相互等待。假设有值为 4 和 7 的索引记录。尝试插入值 5 和 6 的单独事务在获得插入行的排他锁之前，每个使用插入意图锁锁定 4 和 7 之间的间隙，但不互相阻塞，因为行不冲突*

除此之外，将为提供的值锁定任何*唯一*索引，以确保两个不同的事务不会插入相同的值（如果我没记错的话，这与间隙锁定略有不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:09:20.413

对于 innoDB mysql 使用行级锁定。插入时没有要锁定的行，因为您正在创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:24:53.377

添加到间隙锁描述中，Mysql INNODB 对正在插入的行执行 ROW-LOCK。

# android - phonegap 从 html 创建位图

> ID：15084175
> 
> 赞同：0
> 
> 时间：2013-02-26T08:03:32.133
> 
> 标签：android, cordova, bitmap, android-webview

如何从设备屏幕中的 html 创建位图？

我试过了，但它给了我一个黑色的图像输出

```
Webview mAppView = this.webView;
float appScale = mAppView.getScale();

int scaledViewHeight = (int)(webViewHeight * appScale);
int scaledViewWidth = (int)(webViewWidth * appScale);

bmp = Bitmap.createBitmap(scaledViewWidth, scaledViewHeight, Bitmap.Config.RGB_565);

try {
    os = new FileOutputStream(Environment.getExternalStorageDirectory()+"/DCIM/Camera/" + "canvas.png");
    bmp.compress(CompressFormat.PNG, 90, os);

    } catch(IOException e) {
        Log.v("save image", "fail"); 
    } 
```

# c# - 上下文菜单项选择事件

> ID：15084176
> 
> 赞同：2
> 
> 时间：2013-02-26T08:03:39.860
> 
> 标签：c#

c#.net 3.5 中，如何在该工具条的 itemselect 事件中使用该控件的属性？

```
picArray[n].ContextMenuStrip = new ContextMenuStrip();
ToolStripItem Schedule = picArray[n].ContextMenuStrip.Items.Add("Schedule");
picArray[n].ContextMenuStrip.Items.Add("Schedule");
picArray[n].ContextMenuStrip.ItemClicked += (sender, e) =>
            {                                
            panel1.Show();                        
            if (e.ClickedItem == Schedule)
                {
                //Here I want to use property of that picturebox on which right
                //click is done
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:17:16.060

您可以尝试以下方法：

```
var contextMenuStrip = (ContextMenuStrip) e.ClickedItem.GetCurrentParent();
var pictureBox = (PictureBox) contextMenuStrip.SourceControl;
pictureBox. //here you can access it. 
```

此代码不检查强制转换是否有效。

# iphone - 无论如何要创建一个带有一个通用页脚的 UITableView 吗？

> ID：15084177
> 
> 赞同：2
> 
> 时间：2013-02-26T08:03:41.670
> 
> 标签：iphone, ios, objective-c, uiview, uibutton

我正在尝试创建一个`UITableView`包含多个部分的内容。每个部分都有自己的页眉，但我正在尝试为整个表格视图制作一个通用页脚，该页脚保持在一个位置......

使用这些`UITableViewDelegate`方法可以实现这种逻辑吗？或者我应该创建一个自定义视图并尝试将其作为子视图添加到我的表格视图中？我目前拥有的页脚包含一个`UIButton`.

如果有人有一些示例代码，那就太好了。

编辑：这个问题与引用的问题不同。我正在尝试制作一个浮动在`UITableView`. 另一个问题没有指定页脚的位置，只是需要一个页脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T14:14:12.657

阅读 UITableView 的 tableFooterView 属性。

现在一些代码：（使用ARC）

```
UILabel *footer = [UILabel alloc] init];
footer.text = @"Some text" ;
footer.backgroundColor = [UIColor greenColor];
self.tableView.tableFooterView = footer; 
```

现在在整个 tableview 的底部有一个带有一些文本的绿色 UILabel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:46:13.223

我最终创建了一个子视图并将我的按钮添加到该视图中。然后我将该视图作为我的“页脚”。

这是给我预期结果的代码。

```
- (void)viewDidLoad
{

[super viewDidLoad];

//self.tableView.delegate = self;
//self.tableView.dataSource = self;

//save current tableview, then replace view with a regular uiview
self.tableView = (UITableView*)self.view;
UIView *replacementView = [[UIView alloc] initWithFrame:self.tableView.frame];
self.view = replacementView;
[self.view addSubview:self.tableView];

UIView *footerView  = [[UIView alloc] initWithFrame:CGRectMake(0, 370, 320, 45)];

//create the button
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
//button.userInteractionEnabled = YES;

//the button should be as big as a table view cell
//width of the button can be set but the width of the view it is added to will always match the width of the tableView
[button setFrame:CGRectMake(60, 0, 200, 45)]; 

//set title, font size and font color
[button setTitle:@"Build" forState:UIControlStateNormal];
[button.titleLabel setFont:[UIFont boldSystemFontOfSize:20]];   
[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

//set action of the button
[button addTarget:self action:@selector(buildThenSegue)
 forControlEvents:UIControlEventTouchUpInside];

//add the button to the view
[footerView addSubview:button];
footerView.userInteractionEnabled = YES;

[self.view addSubview:footerView];
self.tableView.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height); 
```

}

请注意，这是在`UITableViewController`.

我引用了另一个问题的答案：[https ://stackoverflow.com/a/9084267/1091868](https://stackoverflow.com/a/9084267/1091868)

# jquery - 当我打开 pdf 对话框时出现 iframe 问题落后于 pdf

> ID：15084179
> 
> 赞同：2
> 
> 时间：2013-02-26T08:03:44.707
> 
> 标签：jquery, html, css, pdf, iframe

我在我的网站上面临着很大的问题，即使在谷歌搜索了很多之后我也没有找到任何完美的解决方案。

在我的网站中，我在一个页面中包含了 iframe，用于查看 pdf 文件，但是当我打开对话框时，它位于该 pdf 的后面。我知道 pdf 插件不作为页面的一部分呈现的原因，这就是它总是显示在顶部的原因。

无论如何，我需要在 pdf 的顶部显示对话框。我尝试了以下解决方案**，但没有任何效果，调整 z-index、pdfobject、嵌入标签，我无法根据 pdf 调整我的对话框。**

除了这些任何完美的解决方案，如果你有那么请帮助考虑这一点。

这是我的示例页面 ![在此处输入图像描述](../Images/b890c800b246a955e94ff9bdcae08a32.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:11:43.370

我在 jquery ui 对话中使用的文件上传表单也遇到了类似的问题。我使用这个片段：

```
 function getMaxZ() {
        var opt = { inc: 5 };
        var def = { inc: 10, group: "*" };
        $.extend(def, opt);
        var zmax = 0;
        $(def.group).each(function () {
            var cur = parseInt($(this).css('z-index'));
            zmax = cur > zmax ? cur : zmax;
        });
        zmax += def.inc;
        return zmax;
    }
     var zIndexMax=getMaxZ();

$("#"+gridName).css({"z-index": Math.round(zIndexMax)}); 
```

在我的弹出对话框出现在 jquery ui 后面之前，对我来说就像一个魅力，现在他们没有。希望它会帮助你。

# ios - iOS，打开一个推送通知，其他的也不见了

> ID：15084180
> 
> 赞同：0
> 
> 时间：2013-02-26T08:03:46.503
> 
> 标签：ios, push-notification

问题是，当应用程序关闭并接收到多个远程/推送通知时，如果用户只打开其中一个，那么其他的也会被清除。

有没有办法只清除打开的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:10:58.690

无法仅删除推送通知。您甚至看不到您的应用程序有多少推送通知。您只会收到用户用来启动您的应用程序的一个通知。

# php - datePicker jquery UI - 在正常加载时不显示，但在表单发布时加载

> ID：15084183
> 
> 赞同：0
> 
> 时间：2013-02-26T08:03:47.367
> 
> 标签：php, jquery, jquery-ui

我正在尝试放置 2 个 datePickers jquery UI。错误：当我加载页面时，datePickers 没有显示。但是，如果我发布表格，它将显示它们。

这是我的代码：

```
<?php
//...
if ($_POST){
    $dateFrom=getInput('dateFrom').' 00:00:00';
    $dateTo=getInput('dateTo').' 23:59:59';
    $defDate=explode('-',getInput('dateFrom'));
    $defDate=$defDate[1].'/'.$defDate[2].'/'.$defDate[0];
    $employeeID=getInput('employeeID');
}else{
    $dateFrom=date('Y-m-d',strtotime('-1 day'));
    $dateTo=date('Y-m-d').' 23:59:59';
    $defDate=date('m/d/Y',strtotime('-1 day'));
    $employeeID=0;
}

//================================== calendar widget ==================================
echo '<script type="text/javascript">$(function() {';
echo '  $( "#datepicker1" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
        $( "#datepicker1" ).datepicker({
                showWeek: true,
                firstDay: 0,
                changeMonth: true,
                defaultDate: "'.$defDate.'",
                changeYear: true,';
echo "  altField: '#datepickera',altFormat: 'yy-mm-dd'});";
echo '  $( "#datepicker2" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
        $( "#datepicker2" ).datepicker({
                showWeek: true,
                firstDay: 0,
                changeMonth: true,
                changeYear: true,';
echo "  altField: '#datepickerb',altFormat: 'yy-mm-dd'});";
echo '});';
echo '</script>';

echo '<form action="" method="post">';
echo '<table>';
echo '<tr><td width="250">From Date<input type="text" id="datepickera" name="dateFrom" value="" /><br /><div id="datepicker1"></div></td>';
echo '<td width="250">To Date<input type="text" id="datepickerb" name="dateTo" value="" /><br /><div id="datepicker2"></div></td>';
echo '<td>'. __('Choose Employee','j-v3').':<br /><select name="employeeID" /><option value="0">--- All Employees ---</option>';
echo '</select> <input type="submit" value="Get Data" /></td>';
echo '</tr>';
echo '</table>';
echo '</form>';
//...
?> 
```

我正在使用 jquery 1.6.2 & jquery-ui 1.8.15

请帮忙。如何始终显示 datePickers？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:58:06.603

我找到了。

将脚本更改为此不起作用：

```
echo '<script type="text/javascript">$(document).ready(function() {'; 
```

但是使用此代码，它可以工作

```
echo '<script type="text/javascript">window.onload = function() {'; 
```

在google上搜索后它们的不同之处在于第一个是在DOM准备好之后运行的，文档并不需要准备好。第二个是在文档的所有部分都准备好之后运行，因此需要更长的时间。

就我而言，只有第二种方法有效，它较慢但有效。

# int - 如何将 int 答案转换为浮点数

> ID：15084184
> 
> 赞同：1
> 
> 时间：2013-02-26T08:03:48.163
> 
> 标签：int

当和都是整数时，我必须将方程的输出`a = x * 9 / y`变成浮点数。例如，但是当将其输入等式时，我得到的不是十进制答案。`'x'``'y'``x=64 y= 227``2`

我是如何编码的：

```
int y = 227;
int x = 64;
Float a;
a = x * 9 / y; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:06:18.923

其中一个数字应该是 float 类型，以便有效转换：`a = x * 9.0f / y;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:09:58.710

在大多数语言中，在“float”类型的表达式中至少有一个元素将使整个浮点类型的表达式：

```
 a = x * 9.0 / y; 
```

您还可以显式转换一些成员（取决于语言语法）：

```
 a = (Float)x * 9 / y; 
```

请注意，如果操作的优先级不同（即同一表达式中的 + 和 *），您可能会密切注意要转换的内容。以下表达式可能会产生不同的结果（因为第一个表达式将`x/9`作为整数执行，然后才将其转换为“float”）：

```
 a = x / 9 + (Float)y;
 a = (Float)x / 9 + y; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:06:04.087

您需要类型转换才能浮动：

```
a = (float)x * (float)9 / (float)y; 
```

不知道您使用的是什么语言，但*我正在写**C Language**。*

我所做的称为**Explicit Casting**。

**数据类型的显式转换**（给定转换）比自动转换具有更高的优先级。

```
Syntax:  

    (data_type) operand 
```

其中*操作数*可以是变量或短语。

@yBee 回答了什么。
他正在使用**隐式转换**的概念，通过将 您的表达式 更改`9`为 float 和 float 再次被 int 潜水给 float。 `9.0f``(x * 9.0f)`

要理解这一点，您需要了解自动类型转换：

> **隐式转换**（自动转换）的工作方式是，长度较小的数据类型的变量（操作数）（比第二个变量的数据类型）（操作数），在内部转换为具有较长数字长度的数据类型的变量。听起来可能有些混淆，但这里有一个例子：
> 
> `short int`-> `int`-> `unsigned int`-> `long int`-> `unsigned long int`-> `float`-> `double`->`long double`

@Alexei Levenkov 在做什么？
使用这两种技术。首先`x`通过显式转换转换为浮点数，然后由于隐式转换在浮点数中进行计算。

实际上，这两个答案都比我的答案好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T19:33:07.977

一个简单的方法是将最终结果乘以 1.0。这将为您转换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:40:57.930

好的，当您使用整数设备任何数字时，要获得十进制答案，右侧必须是浮点数或双精度数。就像这样

10/3 = 3

10/3.0 = 3.34

知道了 ？

在你的情况下，你可以做的是，

```
int y = 227; 
int x = 64;
Float a = x * 9 / (float)y; 
```

# c# - Kendo 模板：在 C# 代码块内评估变量值时出错

> ID：15084189
> 
> 赞同：0
> 
> 时间：2013-02-26T08:04:24.467
> 
> 标签：c#, templates, variables, razor, kendo-ui

我在评估剑道模板中的变量值时遇到问题。

在此代码中，变量***controlID***按预期计算。它返回**"test"**。

```
<script id="treeview-template" type="text/kendo-ui-template">
    # var controlID= "test"; # 
    @Html.CheckBox("#=controlID#")
</script> 
```

但是当我在 C# 代码块中使用它时，该变量被评估为***“#=controlID#”***。

```
<script id="treeview-template" type="text/kendo-ui-template">
    # var controlID= "test"; # 
    @{
       Html.CheckBox("#=controlID#");
     }
</script> 
```

如何在 Kendo 模板的 C# 代码块中获取变量的正确值？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:55:29.743

[剑道模板](http://docs.kendoui.com/getting-started/framework/templates/overview)基本上被翻译成 JavaScript 并在客户端（在浏览器中）执行。

您的第一个配置有效，因为以下

```
@Html.CheckBox('#=controlID#') 
```

呈现为

```
<input type="checkbox" name="#= controlID #" id="#= controlID #" /> 
```

后者是一个有效的剑道模板。

但是，另一个代码块不会输出任何内容，因为您使用`@{ }`的是`@`. 这只是表示不输出任何 HTML 的可执行服务器端代码 (C#) 块。

Phil Haack 有一篇很棒的博客文章解释了 Razor 语法：[http ://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:06:52.797

我自己从未使用过剑道，但根据您展示的语法，我*希望这可以工作：*

```
<script id="treeview-template" type="text/kendo-ui-template">
    # var controlID= "test"; # 
    @{
       Html.CheckBox(controlID);
     }
</script> 
```

# django - UnicodeEncodeError：“ascii”编解码器无法在位置 1 编码字符 u'\xe9'：序数不在范围内（128）

> ID：15084194
> 
> 赞同：8
> 
> 时间：2013-02-26T08:05:18.460
> 
> 标签：django

我知道有关于这个的现有标题，但问题与我的不同。所以这是我的问题。我使用上下文处理器来显示用户名。它正在工作，但我的哨兵昨天检测到一个错误。

UnicodeEncodeError：“ascii”编解码器无法在位置 1 编码字符 u'\xe9'：序数不在范围内（128）

这是我的代码：

```
def display_name(request):
    try:
        name = "{0} {1}".format(request.user.first_name, request.user.last_name)
        name = name.strip()
        if not name:
            name = request.user.username
    except AttributeError:
        name = None

    return {'display_name': name,} 
```

这是什么原因？或者用户输入他们名字的字符？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T08:30:58.037

这基本上是用户输入问题。

文本编码是一个完整的“东西”，很难进入，但简而言之，用户输入的 Unicode 字符不容易映射到 ASCII 字符。

你可以通过改变这个来解决这个问题：

```
name = "{0} {1}".format(request.user.first_name, request.user.last_name) 
```

对此：

```
name = u"{0} {1}".format(request.user.first_name, request.user.last_name) 
```

这告诉 Python 将字符串视为 unicode 字符串（将所有正常函数都视为 ascii 字符串）。

# php - 如何在不刷新表单和丢失表单字段值的情况下将表单值插入 MySQL 数据库？

> ID：15084195
> 
> 赞同：-3
> 
> 时间：2013-02-26T08:05:27.690
> 
> 标签：php, html, mysql, ajax

你好，

我有一个表单，我想将其值插入 MySQL 数据库，而不刷新表单并丢失其值。通过单击“打印”按钮，用户应该能够从他们在表单中输入的数据生成报告，但表单在提交时会不断刷新。所以我想知道如何在不刷新表单的情况下将数据存储在数据库中（即使用 Ajax）？

以下是我的表单代码：

```
 <div class="commentpost"></div>
    <form name="entry" id="entry" method="POST" action="">
    <table border="1" bgcolor="Silver">
        <tr>
            <td>

            </td>
            <td>
                <h2><b>Candidate Entry</b><h2>
            </td>
        </tr>
        <tr>
            <td>
               Code 
            </td>
            <td>
             <input type="text"  name="vouchno" value="New" onkeypress="return isNumberKey(event)" readonly="readonly" size="8" maxlength="8">
            Date
          <input type="text" id="vouchdt" name="vouchdt" id="popupDatepicker" tabindex="1" value="<?php echo (isset($_POST['vouchdt']) ? $_POST['vouchdt'] : ''); ?>"></td>
        <td>
          <input type="text" id='councode' name="councode" size="1" maxlength="2" value="<?php echo (isset($_POST['councode']) ? $_POST['councode'] : ''); ?>"><input type="text" id="counvouch" name="counvouch" size="8" value="<?php echo (isset($_POST['counvouch']) ? $_POST['counvouch'] : ''); ?>" maxlength="8">
          <div id="cam">

          </div>
                <input type=button value="Configure..." onClick="webcam.configure()">
        &nbsp;&nbsp;
        <input type=button value="Take Snapshot" onClick="take_snapshot()">

        <div id="upload_results" style="background-color:#eee;"></div>
        </td>
      </tr>
        <tr>
            <td>
                Name
            </td>
            <td>
                <input type="text" id="name" name="name" value="<?php echo (isset($_POST['name']) ? $_POST['name'] : ''); ?>" maxlength="40" size="45" tabindex="2">
            </td>
        </tr>
        <tr>
            <td>
                Address
            </td>
            <td>
                <textarea name="add" id="add" row="3" cols="40" tabindex="3">
                   <?php echo (isset($_POST['vouchdt']) ? $_POST['vouchdt'] : ''); ?>
                </textarea>
            </td>
        </tr>

        <tr>
            <td>
                City
            </td>
            <td>
               <input type="text" id="city" name="city" size="20" maxlength="20"  value="<?php echo (isset($_POST['city']) ? $_POST['city'] : ''); ?>" tabindex="4">
             Pin
                <input type="text" id="pin" name="pin" size="6" maxlength="6" value="<?php echo (isset($_POST['pin']) ? $_POST['pin'] : ''); ?>" tabindex="5">
            </td>
        </tr>
        <tr>
            <td>
                Nationality
            </td>
            <td>
                <input type="text" id="ntn" name="ntn" value="<?php echo (isset($_POST['ntn']) ? $_POST['ntn'] : ''); ?>" size="10" maxlength="10" tabindex="6">
            </td>
        </tr>
        <tr>
            <td>
                Mobile No 
            </td>
            <td>
                <input type="text" id="mob" name="mob" value="<?php echo (isset($_POST['mob']) ? $_POST['mob'] : ''); ?>" tabindex="7">
            </td>
         </tr>
            <tr>
                <td>
                    Date of Birth
                </td>
                <td>
                    <input type="text" id="dob" name="dob" value="<?php echo (isset($_POST['dob']) ? $_POST['dob'] : ''); ?>" id="popupDatepicker2" tabindex="8">
                </td>
                <td>
                    Age
                </td>
                <td width="9px">
                    <input type="text" id="age" name="age" size="3" maxlength="3" value="<?php echo (isset($_POST['age']) ? $_POST['age'] : ''); ?>" tabindex="9">
                </td>
                <td width="10px">
                    Sex
                </td>
                <td>
                             <select id="sex" name="sex" tabindex="12">
                                 <?php 
                                 if(isset($_POST[sex])==m){
                                 ?>
                                     <option   value="<?php echo (isset($_POST['sex']) ? $_POST['sex'] : ''); ?>">Male</option>":
                                <?php }else{?>
                                         <option   value="<?php echo (isset($_POST['sex']) ? $_POST['sex'] : ''); ?>">Female</option>":
                                <?php }?>         
                            <option value="m">Male</option>
                            <option value="f">Female</option>                           
                            </select>                

                </td>
            </tr>
                <tr>
                    <td>
                        Religion
                    </td>
                    <td>
                        <input type="text" id="rel" name="rel" value="<?php echo (isset($_POST['rel']) ? $_POST['rel'] : ''); ?>" size="20" maxlength="20" tabindex="11">

                    </td>
                    <td>
                        Martial Status
                    </td>
                    <td>
                        <select id ="status" name="status" tabindex="12">
                            <option value="">--select--</option>
                            <option value="1">Married</option>
                            <option value="2">Unmarried</option>                           
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Passport No.
                    </td>
                    <td>
                        <input type="text" id="pass" name="pass" value="" size="15" maxlength="15" tabindex="13">
                    </td>
                    <td>
                        Place of Issue
                    </td>
                    <td>
                       <input type="text" id="poi" name="poi" size="20" maxlenght-20 tabindex="14">
                    </td>
                    <td>
                        Date of Issue
                    </td>
                    <td>
                       <input type="text" id="doi" name="doi" id="popupDatepicker4" tabindex="15">

                    </td>
                </tr>
                  <tr>
                      <td>
                          Profession
                      </td>
                      <td>
                        <input type="text" id="prof" name="prof" size="20" maxlenght="20" value="" tabindex="16">
                      </td>
                      <td>
                          Amount
                      </td>
                      <td>
                          <input type="text" id="amt" name="amt" value="" size ="8" onblur="calculateText()" style="background-color:transparent; color:blue; text-align:right" tabindex="17">
                      </td>                                            
                  </tr>
                  <tr>
                      <td>
                          Payment
                      </td>
                      <td>
                          <select id="pay" name="pay" tabindex="12">
                            <option value="">--select--</option>
                            <option value="f">Full</option>                           
                            <option value="p">Part</option>
                            <option value="n">None</option>

                            </select>
                      </td>
                      <td>
                          Received
                      </td>
                      <td>
                          <input type="text" id="resc" name="resc" value="" size ="8" onblur="calculateText()" style="background-color:transparent; color:green; text-align:right" tabindex="18">
                      </td>
                  </tr>
                  <tr>
                  <td>
                      Agent
                  </td>
                  <td>
                      <input type="tetx" id="agnt" name="agnt" value="" size="40" maxlength="40" tabindex="21">
                  </td>
                  <td>
                      Balance
                  </td>
                  <td>
                      <input type="text" id="bal" name="bal"  readonly="readonly" value="" size ="8" style="background-color:transparent; color:red; text-align:right" onblur="calculateText()" tabindex="19">
                  </td>
                  </tr>
                  <tr>
                      <td>
                          Mofa No.
                      </td>
                      <td>
                          <input type="text" id="mofa" name="mofa" value="" size="20" maxlength="20" tabindex="22">
                      </td>
                  </tr>
                  <tr>
                      <td>
                          Remarks
                      </td>
                      <td>
                          <input type="text" id="rem" name="rem" size="60" maxlength="60" value="" tabindex="23">
                      </td>
                  </tr>
                  <table border="0" align="center">
                      <tr>

                          <td>
                              <input type="submit" name="save" value="Save"><input type="hidden" name="task" value="addComments" />

                          <td>
                              <input type="submit" name="print" value="Print">
                          </td>
                          <td>
                              <input type="submit" name="close" value="Cancel">
                          </td>
                          <td>
                              <input type="reset" name="Add" value="Add">
                          </td>
                      </tr>
                  </table>
    </table>    
    </form>
</body>
</html> 
```

这是我的 JavaScript 代码：

```
<script type="text/javascript">
jQuery(document).ready(function($){
   $("#entry").submit(function(){

        ctask        = this.task.value;    
        cvouchdt     = this.vouchdt.value;
        ccouncde     = this.councode.value;
        ccounvouch   = this.counvouch.value;
        cname        = this.name.value;
        ccity        = this.city.value;
        cpin         = this.pin.value;
        cntn         = this.ntn.value;
        cmob         = this.mob.value;
        cdob         = this.dob.value;
        cage         = this.age.value;
        csex         = this.sex.value;
        crel         = this.rel.value;
        cstatus      = this.status.value;
        cpass        = this.pass.value;
        crel         = this.rel.value;
        cpoi         = this.poi.value;
        cdoi         = this.doi.value;
        cprof        = this.prof.value;
        camt         = this.amt.value;
        cpay         = this.pay.value;
        cpass        = this.pass.value;
        crecd        = this.recd.value;
        cagnt        = this.agnt.value;
        cbal         = this.bal.value;
        cmofa        = this.mofa.value;
        crem        = this.rem.value;        

        save    = this.save;

        if(cname=="" || ccounvouch=="" || ccouncde=="") { $("#errAll").html('<p>Invalid Captcha. Please try again.</p>');  }

        $.post("submit.php", {task: ctask, name: cname, email: cemail, url: curl, message: cmessage}, function(data){
            if(data=='0') { $("#errAll").html('<p>Please don\'t leave the requierd fields.</p>'); }
            else if(data=='1') { $("#errAll").html('<p>Invalid Email Address, Please try again.</p>'); }
            else { submitter.value="Value Saved"; save.disabled=false;} //$(data).appendTo($(".commentpost")); }
        });

        return false;

    });
});
</script> 
```

这是我的PHP代码：

```
<?php
//include_once( 'config.php' );
require("includes/dbconnect.php");

$getmaxvou = mysql_query("SELECT MAX(`vouchno`) as `maxid` FROM `candidate` ") or die(mysql_error());
$max  = mysql_fetch_array($getmaxvou);
$maxv =$max["maxid"]+1; 

if(isset($_POST['task']) && $_POST['task'] == 'addComments') 
{
     $a = 1;
    $date      = mysql_real_escape_string($_POST["vouchdt"]);
    $date      = strtotime($date);
    $date      = date('Y-m-d',$date);
    $cname     = trim($_POST["name"]);
    $add       = trim($_POST["add"]);
    $city      = trim($_POST["city"]);
    $pin       = trim($_POST["pin"]);
    $nations   = trim($_POST["ntn"]);
    $mob       = trim($_POST["mob"]);
    $dob       = mysql_real_escape_string($_POST["dob"]);
    $dob       = strtotime($dob);
    $dob       = date('Y-m-d',$dob);
    $age       = trim($_POST["age"]);
    $sex       = trim($_POST["sex"]);
    $rel       = trim($_POST["rel"]);
    $pass      = trim($_POST["pass"]);
    $status    = trim($_POST["status"]);
    $poi       = trim($_POST["poi"]);
    $doi       = mysql_real_escape_string($_POST["doi"]);
    $doi       = strtotime($doi);
    $doi       = date('Y-m-d',$doi);
    $prof      = trim($_POST["prof"]);
    $amt       = trim($_POST["amt"]);
    $pay       = trim($_POST["pay"]);
    $bal       = trim($_POST["bal"]);
    $recd      = trim($_POST["resc"]);
    $agnt      = trim($_POST["agnt"]);
    $mofa      = trim($_POST["mofa"]);
    $rem       = trim($_POST["rem"]);
    $councode  = trim($_POST["councode"]);
    $counvouch = trim($_POST["counvouch"]);

 {     

     if (isset($_POST["code"])) {
            $sql_check = mysql_query("SELECT * FROM candiidate WHERE code ='$councode' AND  counvouch='$counvouch'");

            if (mysql_num_rows($sql_check) > 0) {
                $a = 0;
                print '<script type="text/javascript">';
                print 'alert("Code Already Exist For the Country")';
                PRINT '</script>';
            }
        }
        if($a ==1){
        mysql_query("INSERT INTO `candidate`(vouchno, vouchdt, `name`, `add`, `city`, `pin`, `nationality`, mobile, dob, `religion`, `passport`, `profession`, amt, recd, bal, payment, `agent`, `mofa`, `age`, `gender`, `martial`, `poi`, doi, councode, counvouch, `rem` )
            Values
                   ('$maxv',  '$date', '$cname', '$add', '$city', '$pin', '$nations', '$mob', '$dob', '$rel', '$pass', '$prof', '$amt', '$recd', '$bal', '$pay', '$agnt', '$mofa', '$age', '$sex', '$status', '$poi', '$doi', '$councode', '$counvouch', '$rem' )") or die(mysql_error());  

        echo ' <div class="commentbox">
                <div class="commentboxt">Value Inserted </div>
                                </div>';
    }
 }
}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:54:53.010

将表单标签更改为

```
<form name="entry" id="entry" method="GET" action="javascript:"> 
```

这将阻止页面刷新。

然后以 jquery ajax [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) 为例。

```
 var string ="FORMVALUE1=" + $('#FORMVALUE1ID').val() + "FORMVALUE2=" + $('#FORMVALUE2ID').val() + "REAPEAT FOR ALL YOUR VALUES";

    $.ajax({  
    type: "GET",  
    url: "YOURPHPFILE.php",
    data: string,  
    }); 
```

然后只需使用获取 php 文件中的表单值`$_GET['FORMVALUE1'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T04:31:07.040

您首先将插入或执行某些操作的 PHP 文件分开。

PHP 动作文件：YourPHPPostFile.php HTML 文件：index.html 或任何你有的名字。

然后在 PHP 文件中编写所有代码，但在开始时添加检查是

```
if(isset($_POST['task']) && $_POST['task'] == 'addComments') 
{//Your all PHP Code here} 
```

另一方面，在您的 html 文件中向该文件发出 AJAX 请求，并在 AJAX 请求中使用 POST 方法，并将您的数据包含在请求参数中。

如果您不想丢失已填写的表单数据，您可以使用另一件事：

```
<form name="entry" id="entry" method="GET" onsubmit="calltoAjax();return false;"> 
```

现在，无论何时用户提交表单，它都不会重置表单，并且数据也存储在您的数据库中。

谢谢，

# git - git daemon 在哪里存储文件

> ID：15084206
> 
> 赞同：0
> 
> 时间：2013-02-26T08:06:12.573
> 
> 标签：git

我正在使用 Centos5 机器创建空的裸存储库

```
$ mkdir test_repo.git
$ cd test_repo.git
$ git --bare init 
```

它仅包含 git 元数据。然后我使用命令在同一系统上启动了 git 守护进程

```
$  git daemon --reuseaddr --base-path=/data/test_work/ --export-all --verbose --enable=receive-pack 
```

从局域网中的另一台机器我克隆了那个空存储库添加一些文件提交它并使用命令推送到主

```
$ git clone git://<system_ip where git dameon run>/test_repo.git 
```

在其中添加并提交一些文件并推送到 git

```
$ git push origin master 
```

然后我从另一台机器克隆它运行良好，我得到了我推送的所有更改。

但是当我在运行 git-daemon 的机器上看到实际的 test_repo.git 时。它仅包含保存我提交的文件的 git-meta 数据？

请告诉我我的实际数据为 git-daemon 和裸仓库保存的位置？它是在我的机器上还是在任何其他位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:10:04.863

*文件存储在 Git 对象存储中，如果它是*一个裸存储库，则不可见。它们没有被签出，没有工作副本，只有数据和元数据，以二进制格式保存以节省空间并提高速度。

真实数据在`objects/pack`目录中。

有关详细信息，请参阅[git 如何存储您的数据](http://gitready.com/beginner/2009/02/17/how-git-stores-your-data.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:10:38.690

Git 通常使用`.git`目录来存储元数据。如果您在工作目录中删除此目录以外的所有内容，您仍然可以使用`git checkout`.

您创建了所谓的裸存储库（选项`--bare`）。它只包含`.git`元数据。它并不意味着直接用于工作，因此文件只会浪费存储空间，并且当有人更新存储库时，更新这些文件无论如何都是无用的。除此之外，如果我们收到对多个不同分支的提交，我们应该检查哪个分支！？！提交和其他 git 对象专门存储在`objects/`以提交 SHA1 的第一个字母开头的子目录下（例如，您可以`ffee0ccd6cce082784d515a6321a7afbfdc0dde0`在 directory中找到带有 SHA1 的 git 对象`objects/ff/ee0ccd6cce082784d515a6321a7afbfdc0dde0`）或`objects/pack/`打包格式的目录中（几个对象放在同一个高度压缩文件以节省存储空间）。

一切都存储在您提交的裸目录中。除非您告知，否则不会通过网络将任何内容推送到某个秘密的神秘位置（然后该位置也不是秘密的，而是基于您在命令行中所说的，使用直接 URL 或配置的远程名称，并`origin`自动定义为您的存储库最初克隆）。

# http - 使用 Scala 确定网页响应的大小

> ID：15084212
> 
> 赞同：0
> 
> 时间：2013-02-26T08:06:25.867
> 
> 标签：http, scala

我有一个任务，我需要确定存储网页内容需要多少缓存空间，我必须在 Scala 中完成这一切，我正在学习。我知道我可以通过 HTTP HEAD 请求获得所需的信息，但从我读过的内容来看，我似乎需要一个外部库。

是否可以在不使用 HTTP 请求的情况下下载 HTTP 标头并仅使用 Scala 提取所需信息（不调用 Java 代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:27:59.747

如果您不需要使用 3rd 方库，那么解决方案可能是用于`Source.fromURL`获取页面然后计算其大小。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:30:21.207

如果没有您只能使用 Scala 的限制，我会说：使用[Async-Http-Client](http://sonatype.github.com/async-http-client/request.html#contentBox)并在调用`AsyncHandler`后立即停止。`onHeadersReceived`

如果没有外部库，您可以尝试模仿 HTTP 客户端正在做的事情。这是一个示例`telnet`会话：

```
$ telnet www.google.com 80
HEAD / Trying 173.194.40.20...
Connected to www.google.com.
Escape character is '^]'.
HEAD / HTTP/1.1
Host: www.google.com

HTTP/1.1 302 Found
Location: http://www.google.ch/
Cache-Control: private
Content-Type: text/html; charset=UTF-8
Set-Cookie: PREF=ID=c2b92507b9088226:FF=0:TM=1361870408:LM=1361870408:S=mbY_Qws86Z75gPAk; expires=Thu, 26-Feb-2015 09:20:08 GMT; path=/; domain=.google.com
Set-Cookie: NID=67=dAFEWKT5vk9HWP1sTF6Oo49jv0sRV7_49ewSgD3fYRiTjHqlUasKl7Jz86SnJhtS-o9zU9raxwCLhdfvEwdwl9imRwONMBTDBKDXtJhFufLCnAoOKgDQetv0A5FTN3Da; expires=Wed, 28-Aug-    2013 09:20:08 GMT; path=/; domain=.google.com; HttpOnly
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Date: Tue, 26 Feb 2013 09:20:08 GMT
Server: gws
Content-Length: 218
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN 
```

（我输入的是`HEAD / HTTP/1.1`,`Host: www.google.com`和一个额外的返回值。）

您可以尝试使用 JVM 的[Socket](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)类打开到您的服务器的 TCP 连接，并像上面的示例一样发送自己的 HEAD 请求。

# c# - 带有 ASP.NET MVC 4 和 EF 的下拉菜单

> ID：15084213
> 
> 赞同：0
> 
> 时间：2013-02-26T08:06:28.947
> 
> 标签：c#, .net, entity-framework, drop-down-menu, asp.net-mvc-4

我正在尝试在 MVC4（实体框架，代码优先）中创建下拉菜单。我的目标是在课堂上准备价值，所以我不需要在控制页面上进行额外的编程。

```
public class Prefix
{
    [Key]
    public int PrefixID { get; set; }

    [StringLength(20)]
    public string PrefixName { get; set; }
}
public class People
{
    [Key]
    public int PersonID { get; set; }

    [StringLength(20)]
    public string FirstName { get; set; }

    [StringLength(20)]
    public string LastName { get; set; }

    [ForeignKey("PrefixID")]
    public Prefix Prefix { get; set; }

    [Required]
    public int PrefixID { get; set; }       

    public string FullName // this isn't working
    {
        get
        {
            return Prefix.PrefixName +" " + FirstName + " " + LastName;
        }    
    }
}

public class PersonSalary
{
    [Key]
    public int SalaryId { get; set; }
    //...

    [ForeignKey("EmployeeID")]
    public Person HEmployee {get;set;}

    public int EmployeeID { get; set; }
} 
```

SalaryController 中的代码：

```
ViewBag.EmployeeID = new SelectList(db.People, "PersonID", "FullName", personsalary.EmployeeID); 
```

**在 SalaryController 我可以得到带有值 "Name Surname" 但我想要"Prefix.Name Name Surname"**的下拉菜单。例如“Mr John Doe”等。当前代码返回错误：

> 对象引用未设置为对象实例。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:20:10.330

确保您已经急切地初始化了`Prefix`模型的属性：

```
ViewBag.EmployeeID = new SelectList(
    db.People.Include(p => p.Prefix), 
    "PersonID", 
    "FullName", 
    personsalary.EmployeeID
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:39:05.947

在 People 类中，将属性 Prefix 标记为虚拟。如果这样做，则在您尝试访问此值时将加载相应前缀的值。

达林建议的答案也可以。这是一种替代方法。

# c# - 跨关联表选择

> ID：15084223
> 
> 赞同：0
> 
> 时间：2013-02-26T08:06:59.633
> 
> 标签：c#, .net, linq, model-associations

鉴于下面的数据模型，我想选择每个具有 IsActive = true 的 Schedule 的 ConfigurableItem。

![在此处输入图像描述](../Images/509d25cf26932c1f53b466eccf09ab71.png)

我已经查看了许多示例：关联表，并且由于示例以某种方式神奇地忽略了多对多关联，因此并没有真正得到它们中的任何一个。似乎有很多建议我应该能够：

```
var f = from citem in context.ConfigurableItems
        where citem.ConfigurableItemSchedules.Schedule.IsActive == true
        select citem; 
```

但这不会智能感知/编译。我在这里想念什么？

**更新：**

我使用从服务器资源管理器（sql server）拖放自动生成的.dbml，所以下面是一些自动生成的代码，可能有助于回答一些评论。它们只是生成字段的截断片段。

```
public partial class ConfigurableItem : INotifyPropertyChanging, INotifyPropertyChanged
    {

        private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

        private long _ConfigurableItemIndexCode;

        private string _ItemRootPath;

        private string _ItemName;

        private string _HandlerAssembly;

        private string _HandlerType;

        private EntitySet<ConfigurableItemProperty> _ConfigurableItemProperties;

        private EntitySet<ConfigurableItemSchedule> _ConfigurableItemSchedules; 
```

……

```
public partial class ConfigurableItemSchedule : INotifyPropertyChanging, INotifyPropertyChanged
{

    private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(String.Empty);

    private long _ConfigurableItemIndexCode;

    private long _ScheduleIndexCode;

    private EntityRef<ConfigurableItem> _ConfigurableItem;

    private EntityRef<Schedule> _Schedule; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:30:45.677

我认为你需要：

```
var f = from citem in context.ConfigurableItems
        where citem.ConfigurableItemSchedules.Any(s=>s.Schedule.IsActive)
        select citem; 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:31:42.183

您正在尝试访问 Schedule 但由于 ConfigurableItemSchedules 本身有很多行（我认为可能），编译器无法理解您需要哪一行的计划。当您在连接中使用导航属性时，您应该确保导航属性结束目标表中只有一行，或者您应该使用`.SelectMany(t=>...)`或`.any()`向编译器显示您将选择一组行，可能最好从最底部的表开始，例如

```
var c = (from u in  context.Schedule
                     where u.IsActive == true
                     select u.ConfigurableItemSchedules.ConfigurableItems); 
```

# jquery - Jquery错误方法未显示所需结果

> ID：15084226
> 
> 赞同：0
> 
> 时间：2013-02-26T08:07:17.443
> 
> 标签：jquery

```
<img src="one.jpg" height="200" width="200">            
<img src="three.jpg" height="200" width="200"><br>      

<a href="mylink.html"><u> Click Here  </u></a><br>      

<script src="displayAlert.js"></script>             

<style type="text/css" src="externCSS.css"> </style> 

$(document).ready(function(){
   $("[src]").error(function(){
        alert ("error");
      });
}); 
```

预期输出 - 当指定路径中不存在文件时，代码应显示警报。

仅当指定路径中不存在图像文件时，jquery 才会显示警报。如果 css 或脚本文件不存在，它不会显示任何内容。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:15:12.130

尝试

```
$("img")
.error(function(){
$(this).hide();
})
.attr("src", "missing.png"); 
```

检查是否定义了 attr 以供`DOM`使用。

```
var attr = $(this).attr('src');
// `attr` is false.  Check for both.
if (typeof attr !== 'undefined' && attr !== false) {
    //code goes here
} 
```

**通过多重选择器**

```
$(window).load(function()
{
    $('script,img,link').each(function()
    {
        var attr = $(this).attr('src');
        // `attr` is false.  Check for both.
        if (typeof attr !== 'undefined' && attr !== false)
        {
            //code goes here
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:17:03.207

这是用 jQuery 写的[jQuery 错误](http://api.jquery.com/error/)

> 必须在浏览器触发错误事件之前附加事件处理程序**，这就是示例在附加处理程序后设置 src 属性的原因。**此外，当页面在本地提供时，错误事件可能不会正确触发；error 依赖于 HTTP 状态码，如果 URL 使用 file: 协议，一般不会触发。

这意味着您必须在页面加载完成之前附加处理程序。我认为这是你的问题。

这是 jQuery 示例代码：

```
$('#book')
    .error(function() {
    alert('Handler for .error() called.')
}).attr("src", "missing.png"); 
```

如果您正在寻找即用型解决方案，我建议您这样做：

```
<img url="one.jpg" height="200" width="200"> 
<img url="three.jpg" height="200" width="200"><br>

<a href="mylink.html"><u> Click Here  </u></a><br>

<script url="displayAlert.js"></script>
<script src="jquery.min.js"></script>

<style type="text/css" url="externCSS.css"> </style>

<script>
   $("[url]").each ( function () {
        $(this).error (function () {
            alert ( "Error" );
        }).attr ( 'src',  $(this).attr ("url"));
    });
</script> 
```

# php - 使用 PHP 从 MySQL 获取表并使用按钮进行更新？

> ID：15084232
> 
> 赞同：0
> 
> 时间：2013-02-26T08:08:18.547
> 
> 标签：php, html, mysql

我正在尝试创建一个管理系统，其中将显示帐户列表并在名为“帐户状态”的列下，如果获取的帐户状态为非活动状态（我已经完成），我想放置一个显示“激活”的按钮使用布尔值，其中 1 是活动的，0 是非活动的）。

但是，我无法让显示的按钮更新它所在的特定行，我尝试使用不起作用的更新查询。我的想法是否可行，或者我必须使用输入文本字段来进行手动更新？希望你能帮助我，因为我是 PHP 新手。

这是我的代码：

```
 <?php
//FETCH DATA
$query=mysql_query("SELECT * FROM accounts");
    while($fetch=mysql_fetch_array($query)){

                $accountupdate = $fetch["accountid"];

                echo" <tr>
                <td><font face='verdana,arial' size=-1>".$fetch["accountid"]."</td>
                <td><font face='verdana,arial' size=-1>".$fetch["username"]."</td>
                <td><font face='verdana,arial' size=-5>".$fetch["password"]."</td>
                <td><font face='verdana,arial' size=-1>".$fetch["firstname"]."</td>
                <td><font face='verdana,arial' size=-1>".$fetch["lastname"]."</td>                  
                <td><font face='verdana,arial' size=-1>".$fetch["email"]."</td>
                <td><font face='verdana,arial' size=-5>".$fetch["salt"]."</td>";

                    if($fetch["account_status"] == 0){
                        echo "<form action='' method='post'>
                             <td><input type='submit' name='activate' value='Activate'></td>
                             </form>";
                    }
                    else{
                        echo "<td><font face='verdana,arial' size=-1>".$fetch["account_status"]."</td>";
                    }
    }

if (isset($_POST['activate'])){
    mysql_query("UPDATE accounts SET account_status=1 WHERE accountid='$accountupdate'") or die(mysql_error());
    header("Location:admin_accounts.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:20:16.677

添加一个带有要更新到表单的 id 的隐藏字段：

```
if($fetch["account_status"] == 0){
    echo "<form action='' method='post'>
        <td><input type='submit' name='activate' value='Activate'>
        input type='hidden' name='upd_id' value='{$fetch['accountid']}'</td>
        </form>";
} 
```

然后提交后，从隐藏字段中读取 id：

```
if (isset($_POST['activate'])){
    mysql_query("UPDATE accounts SET account_status=1 WHERE accountid='{$_POST['ups_id']}' LIMIT 1") or die(mysql_error());
    header("Location:admin_accounts.php");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:22:06.143

您可以使用超链接而不是使用多种形式。它需要一点代码更改

```
<td><input type='submit' name='activate' value='Activate'></td>
 TO 
 <td><a href='yourfilename.php?acctid='.$accountupdate >Activate</a></td>

      if (isset($_POST['activate'])){
      TO
      if (isset($_GET['acctid'])){
     $acctid = $_GET[acctid];
     mysql_query("UPDATE accounts SET account_status=1 WHERE accountid='$acctid '")         or 
```

死（mysql_error（））；}

最后按照建议将代码更改为 mysqli* :-)

# jquery - jquery if else 语句 hasClass addClass 点击

> ID：15084233
> 
> 赞同：1
> 
> 时间：2013-02-26T08:08:18.610
> 
> 标签：jquery, if-statement

我是 jQuery 新手，但我已经对它的强大功能印象深刻。这是我的问题：

我想要

*   添加`class='dec'`到`#jf1`当我点击它时，如果它有`class='undec'`
*   添加`class='undec'`到`#jf1`当我点击它时，如果它有`class='dec'`

这就是我所拥有的 - 它不起作用！

```
<script>
$(document).ready(function(){
$(function() {

    $('#jf1').click(function() {

        if ('#jf1'.hasClass("undec")) {
            $('#jf1').toggleClass("undec dec");
    }
        else if ('#jf1'.hasClass("dec")) {
            $('#jf1').toggleClass("dec undec";
    }

    });

});
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:10:58.743

您的代码中有几个语法错误，您的 if 语句应该是：

```
if ( $('#jf1').hasClass("undec") ) { 
```

也是`$(function(){})`的简写版本`$(document).ready(function(){})`，你不应该嵌套它们。`toggleClass`删除和添加类，所以这里不需要使用`if`语句。

```
$(function() {
    $('#jf1').click(function() {
        // `this` refers to the clicked element
        $(this).toggleClass("undec dec");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:17:07.463

试试这个：http: [//jsfiddle.net/YS5F5/](http://jsfiddle.net/YS5F5/)

```
 $(document).ready(function () {
    $('#jf1').click(function () {
        alert("hello");
        $('#jf1').toggleClass("undec");
        $('#jf1').toggleClass("dec");

    });
}); 
```

在 jQuery(document).ready 部分之后不再需要该函数

# c# - iCalendar 不会为组织者创建活动

> ID：15084236
> 
> 赞同：18
> 
> 时间：2013-02-26T08:08:37.130
> 
> 标签：c#, .net, outlook, icalendar

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-16T06:24:50.807

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-28T22:44:01.203

这是一个老问题，但我认为它是由使用 METHOD:REQUEST 引起的，这标志着 ical 应该更新，而不是它是一个新项目。相反，使用 METHOD:PUBLISH

我可以确认这适用于 DDay.iCal 和 Outlook 日历。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-16T15:29:23.057

这让我发疯了一个星期，所以很高兴看到其他人证实了我的怀疑。其实有一个比较简单的方案，解决了这个问题，虽然不是很优雅。我可以理解为什么不允许从外部来源担任组织者的角色，但令人讨厌的是你不能。

发出 2 个邀请。一个给自己（或任何组织者），然后另一个给其他人。

你自己应该有其他东西，而不是你作为组织者，例如组织者：donotreply@outlook.com

作为组织者，其他所有人都应该将您的电子邮件记录下来。

要使这种方法起作用，您应该设置 METHOD:REQUEST。如果您将其设置为 PUBLISH，您将获得更新的重复项。

这种方法意味着您可以在日记中获得会议并获得回复（要获得回复，您需要为每个与会者添加以下行：ATTENDEE;CN="The Name";RSVP=TRUE:mailto:the_email@address.com .)

请注意，两个版本的文件的 UID 相同。如果组织者首先获得邀请，这样他们就可以在开始收到回复之前接受它，这会有所帮助，否则人们将回复实际上尚不存在的内容。这不会阻止他们接受邀请，但对于组织者来说可能有点混乱。为了解决这个问题，我在电子邮件 1 和 2 之间稍作延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:11:17.717

我认为您的问题是因为 Exchange 假定活动的组织者也是活动的发起者。这似乎很公平，否则将会议发送给使他们成为组织者的人将是轻而易举的事情，并且它们将自动添加到该人的日历中。

说了这么多，不知道如何解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T16:33:04.667

通过电子邮件发送事件邀请的行为在 rfc6047 中进行了描述，进一步扩展了 icalendar RFC (RFC5545)。

[关于安全的第 2 节](https://www.rfc-editor.org/rfc/rfc6047#section-2.2)和[第 3 节](https://www.rfc-editor.org/rfc/rfc6047#section-3)总结了两种欺骗威胁：

> 欺骗“组织者”，欺骗“与会者”

那是

> 不允许spoof@xyz.example.net 修改或取消由a@example.com 组织的会议。

你的情况：

1.  您是否从与您的交换相同的电子邮件地址发送邀请（谈论`From:`邮件中的而不是`Organizer:mailto`？如果不是，则可能值得尝试通过交换地址发送。
2.  上面应该不起作用，为了满足组织者在其日历中包含邀请的需要，您可能需要以编程方式将其添加到组织者的议程中，因为 CUA（日历用户代理）或 Exchange 可能不允许第三派对邮件程序在议程中添加事件而无需最终用户 UI 使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-17T14:33:11.567

最近几个月，我们的服务也遇到了和你一样的问题：我们的服务为组织者和参加者创建会议日历，如果参加者包含组织者，组织者（作为参加者）可以收到日历邮件，但都不允许接收/拒绝会议（按钮被禁用）也不能在日历中看到它（没有日历事件）。

最后，我注意到只有在以下条件下才会发生这种情况： 1\. mail.From = Organizer 2\. Ateendees.contains(organizer) //不区分大小写。

所以，我只是将我的代码更改为 follwing ，它适用于所有与会者（包括组织者）：

```
if (!attendeeEmail.ToLower().Contains(organizer.Address.ToLower()))
{
    message.From = organizer;
}
else
{
    //such as your actual email sender, in our case, our mail sender use another email,
    //say ActualSender,and if leave empty, then our mail sender will fill as:
    message.From = ActualSenderEmail;
} 
```

# javascript - 如何创建智能局域网或公司 npm 注册表（node.js 包存储库）？

> ID：15084238
> 
> 赞同：4
> 
> 时间：2013-02-26T08:08:42.993
> 
> 标签：javascript, node.js, repository, package, npm

如何创建**智能**本地网络或公司 npm 注册表（node.js 包存储库）？

它不应该是镜像，而是根据需要仅获取所需包的代理。
就像在 Java 世界中的 Maven 存储库管理器（如 Nexus）所做的那样。因为主注册表会增长，但通常只需要最新版本。

与
[我可以在不复制公共存储库的情况下运行私有 npm 存储库相关吗？](https://stackoverflow.com/questions/14609131/can-i-run-a-private-npm-repository-without-replicating-the-public-repository)
[如何为公司 Intranet 安装私有 Node.js 包存储库？](https://stackoverflow.com/questions/13361938/how-to-install-a-private-node-js-package-repository-for-a-company-intranet)

文档参考：

[npm-registry(1) -- JavaScript 包注册表](https://npmjs.org/doc/registry.html) [（github 源）](https://github.com/isaacs/npm/blob/master/doc/cli/registry.md)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:34:02.953

如果您的公司有一个 git 存储库，您可以简单地指定对存储库的依赖项：

```
git://yourrepo/module.git#tagged_version 
```

另请参阅[https://npmjs.org/doc/install.html#examples](https://npmjs.org/doc/install.html#examples)

# javascript - 在需要时或总是通过外部加载 jQuery / CSS？

> ID：15084239
> 
> 赞同：0
> 
> 时间：2013-02-26T08:08:46.533
> 
> 标签：javascript, css, external, inline

我喜欢让自己忙于构建模块化 Web 应用程序，但不想花时间在我可以节省的地方。

例如，我正在构建一个应该在多个站点上轻松实现的新闻模块，因为使用了相同的 Web 应用程序。

然而，并非所有网站都需要新闻模块。创建内置于模块本身的内联样式表/javascript 文件是否比使用所有库创建大型外部样式表/javascript 更好/更容易/更快？即使所有其他网页都不需要新闻模块的文件？

在模块本身中创建内联库似乎要容易得多。这样只有在需要时才加载，并节省其他页面的加载时间和带宽。

另一件事是我喜欢编写“即插即用”模块。假设我将一个文件通过文件服务器移动到模块文件夹中，其余的将由应用程序处理。使用内联表，我不必在页眉/页脚等中添加新行。

什么是最好的解决方案？当还考虑到我宁愿花 10 分钟移动文件并且它可以工作，而不是仅仅因为它更像是一种“好习惯”而花 1 小时附加外部库时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:23:28.150

如果您正在构建 Web 应用程序，您是否使用 MVC 模式？你把你的顾虑分开了吗？（您的模板/视图、模型和逻辑（控制器））

如果您遵循 MVC，它可以更轻松地维护和自定义您的应用程序。

要回答您的确切问题，您需要的是[RequireJS](http://requirejs.org/)。这样你只有一个地方来声明你的需求，而 RequireJS 将处理其余的..加载顺序等等..

从requirejs网站引用：

> 随着时间的推移，如果您开始创建更多需要在几个地方重用的模块化代码，RequireJS 的模块格式使得编写可以动态加载的封装代码变得容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:34:00.290

内联从来都不是维护 CSS 的可靠方法。注意将布局的描述与视图分开。您可以轻松地将文件包含在与模块相同的目录中，因此它不应该成为问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:11:17.597

或者，如果您只想“即时”加载一些脚本，您可以使用 jQuery.getScript 、[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)。否则你应该按照乔治的方式。

# bash - 复杂的 grep 命令不在 shell 脚本中执行

> ID：15084244
> 
> 赞同：0
> 
> 时间：2013-02-26T08:09:26.393
> 
> 标签：bash, unix, grep, sh

我正在尝试通过 shell 脚本执行几个复杂的 grep 命令，这些脚本在终端中手动执行。我一生都无法弄清楚为什么这不起作用。第一个 grep 的目标是获取附加到父 myPattern 的任何进程 ID。第二个获取进程myPattern的进程id

目前，我的 shell 脚本第一次没有返回任何内容。忽略第二个中的“grep -v 'grep'”部分。

```
#!/bin/sh

ps -ef | grep "$(ps -ef | grep 'myPattern' | grep -v grep | awk '{print $2}')" | grep -v grep | grep -v myPattern | awk '{print $2}'
ps -ef | grep 'myPattern' | grep -v 'grep' | awk '{print $2}' 
```

当手动在终端中运行时，这可以正常工作。我有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:02:58.960

你的第一个命令是模糊的。我认为它不会可靠地按照您的描述进行。它也不能防止获取第一个 grep 调用的 id。第二个对我有用。对于拳头查询，它在很大程度上取决于您使用的系统。使用 pstree 在 pid 下显示整个进程树更容易。喜欢：

```
pstree -p 1782 | sed 's/-/\n/g' | sed -n -e 's/.*(\([0-9]\+\)).*/\1/p' 
```

您需要将 pid 限制为单个值。如果你有更多的值，那么你必须遍历它们。如果您没有 pstree，那么您可以围绕 ps 制作一些循环。请注意，即使您当前的命令有效，thwy 也只会捕获一级父/子关系。pstree 执行任何级别。

我还必须告诉你，一个进程可以通过分叉将原始父进程作为父进程逃脱。

在任何情况下，如果没有确切的细节，您想要实现什么以及*为什么*，以及在什么平台上很难给您一个很好的答案。此外，这些实用程序虽然几乎无处不在，但并不像人们希望的那样便携。

还有一点需要注意 - /bin/sh 通常不是您当前的 shell。在许多 linux 系统上，用户有一个默认的 bash shell，而 /bin/sh 是 dash 或其他一些 shell 变体。因此，如果您在控制台和脚本中看到差异，那么您使用的实际 shell 可能会有所不同。

根据用户反馈，在 java 进程启动脚本中有这样的内容会容易得多：

```
java <your params here> &
echo $! > /var/run/myprog.pid 
```

然后 kill 脚本看起来像`echo /var/run/myprog.pid | xargs kill`. 有更短的命令，但我认为这更便携。如果您想要更具体，请提供实际代码。

# javascript - 使用 requirejs 和 grunt 构建多客户端项目

> ID：15084247
> 
> 赞同：4
> 
> 时间：2013-02-26T08:09:28.843
> 
> 标签：javascript, requirejs, gruntjs

我正在开发一个项目，其中基于主要代码的代码应该由一堆不同的客户使用。所以我们有一个 requirejs 项目，我最初的想法是有一个简单`bootstrap.js`的文件，它需要一个`app.js`对每个客户都不同的文件。

**引导程序.js**

```
requirejs(['app'],function(app){
  //some initial code here
  app.start();
} 
```

所以项目结构将如下所示：

```
|_bootstrap.js
|_commonModules
  |_someModule.js
|_client1
  |_app.js
  |_modules
    |_module.js
|_client2
  |_app.js
  |_modules
    |_module.js 
```

所以我的想法是使用 requirejs' r 编译器为每个客户端编译应用程序，并通过为每个步骤创建一个新的 build.js 将每次编译中的应用程序路径设置为 clientX/app.js，如下所示：

```
({    
  paths: {
    "app": "client1/app"
  }
}) 
```

所以目前我有一个 grunt 构建任务，它正在使用一堆其他任务，比如 uglify、usemin、md5 等等。我可以创建一个使用此任务但更改每个客户端的 requireJs 设置的新任务吗？还是有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:52:26.943

所以毕竟这并不难。很酷的是，您可以更改实际运行任务的配置，并且可以在运行任务中调用之前定义的任务。

```
//this was the old task to build one distribution
grunt.registerTask('build', ['clean:build', 'copy:build', 'useminPrepare', 'usemin', 'requirejs', 'concat', 'uglify', 'mincss', 'md5', 'manifest', 'copy:toClientFolder']); 

grunt.registerTask('buildAll', function() {
  ['client1', 'client2'].forEach(function(client) {
    //before every build task run a task to change the config
    grunt.task.run('updateConfig:' + client, 'build');
  });
});

  //we need to change the config in a separate task,
  //otherwise, change the config just in the forEach, would result in the same 
  //config for both task, using the client2 settings
  grunt.registerTask('updateConfig', function(client) {
    var requireJsName = 'requirejs.compile.options.name';
    var clientFolder = 'copy.toClientFolder.files';
    grunt.config(requireJsName, 'clients/' + client + '/Bootstrap');
    grunt.config(clientFolder, [
      {expand: true, cwd: 'dist', src: '**', dest: 'dist_' + client}
    ]);
  }); 
```

客户端的 app.js 文件如下所示：

```
requirejs.config({
  paths: {
    'commonModules/someModule': 'clients1/modules/module'
  }
});

requirejs(['boootstrap',
  'commonModules/someModule1'],

  function(boootstrap, someModule1) {
    $(function() {
      boootstrap();
      someModule1();
    });
  }); 
```

# sql - 如何在 ssis sql 执行任务中执行 oracle 程序？

> ID：15084250
> 
> 赞同：0
> 
> 时间：2013-02-26T08:09:38.077
> 
> 标签：sql, oracle, ssis

我在 oracle 中有一个带有输入和输出参数的 sp。在 ssis 包下，每个循环都有一个传递输入参数以执行 sql 任务。在这个执行 sql 任务下，这个 sp 驻留。请帮助我了解如何在 ssis 中执行 sql 任务下执行 oracle sp。sp参数的输出需要更新一个sql表。

[9个输入参数和10个输出参数]

使用 oledb 连接的 sp 命令： Exec ?= nps_am_etl_pipinfo ?,?,?,?,?,?,?,?,?,?OUTPUT, ?OUTPUT,?OUTPUT, ?OUTPUT,?OUTPUT, ?OUTPUT,?OUTPUT, ?输出，？输出，？输出

错误：[执行 SQL 任务] 错误：执行查询“Select p.st_cd ,p.lob_cd ,pcv.pol_id ,pcv.pol_tra...”失败，出现以下错误：“分配给变量的值的类型” User::Variable" 与当前变量类型不同。变量在执行过程中可能不会改变类型。变量类型是严格的，除了 Object 类型的变量。"。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

# windows - 在 Wamp 中创建虚拟主机

> ID：15084253
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:10:17.423
> 
> 标签：windows, apache2

我想为我的本地网站创建一个虚拟主机。我正在使用 Wamp Server 实用程序来运行基于 php 的站点并使用 Windows XP SP3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:23:44.853

**1）**在您的文件中放置`c:\windows\system32\drivers\etc\hosts`有关本地主机站点名称的信息（可选）：

```
127.0.0.1        mysite.local 
```

**2）**在你的`c:\wamp\Apache2\conf\httpd.conf`下面`DocumentRoot "c:/wamp/www"`添加这个

```
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    ServerName localhost
    DocumentRoot "C:\wamp\www"
</VirtualHost>
<VirtualHost 127.0.0.1>
    ServerName mysite.local
    DocumentRoot "C:\wamp\www\sites\mysite"
</VirtualHost> 
```

您必须使用主机文件更正您的服务器名称

# android - 安卓。访问对话框的父变量

> ID：15084263
> 
> 赞同：1
> 
> 时间：2013-02-26T08:11:12.167
> 
> 标签：android

从我的活动中调用`showDialog(0)`，然后在方法的切换中`onCreateDialog`我想从父活动中访问一个变量。但它似乎不起作用。我试过了

```
this.neededVariable 
```

或者

```
((MyActivity)dialog.getOwnerActivity()).neededVariable 
```

但它们似乎不起作用。有任何想法吗？这可能是一些简单的事情，我没有得到，因为我很累:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:14:19.417

您可以将该变量的值传递给您的对话框`setArgumenet`，或者您可以使用`Fragment Callback`它进行通信`Activity`，[这里是回调的示例](http://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:15:09.270

当您在对话框中时，您应该使用对话框上下文与您的对话框进行交互，并且当您想要您的活动上下文时，您可以使用您的活动名称，例如：

```
YourActivityName.this 
```

这是我在对话框代码中用于访问父活动内的 TextView 的示例：

```
((TextView)DayReportActivity.this.findViewById(R.id.edtDailyCPCode)).setText(CPCodeText); 
```

# javascript - 在 jQuery 内容切换器/滑块/交换器内部时，jQuery Countdown 不会更新

> ID：15084264
> 
> 赞同：0
> 
> 时间：2013-02-26T08:11:18.467
> 
> 标签：javascript, jquery, countdown, jquery-countdown

我使用[这个切换器插件](https://code.google.com/p/jquery-content-panel-switcher/)在 2 个内容 div 中使用[这个 jQuery 倒计时](http://keith-wood.name/countdown.html)插件。除了倒计时不会在 div 内不断更新之外，这一切都运行得很好。您必须在它们之间来回切换才能获得更新的倒计时。

我认为这可能[与此有关](https://code.google.com/p/jquery-content-panel-switcher/wiki/Using_Other_Plugins_With_JCPS)，但我不确定并且无法弄清楚如何使用倒计时插件来做到这一点。

这是JS：

```
$(function () {
$('#count-na').countdown( 
    {until: $.countdown.UTCDate(-4, 2013, 06-1, 9)});
});
$(function () {
$('#count-eu').countdown( 
    {until: $.countdown.UTCDate(-0, 2013, 06-1, 14)});
});
$(document).ready(function() {
jcps.fader(200, '#switcher-panel');
}); 
```

这是HTML：

```
<div id="content">
    <div id="switcher-panel"></div>
    <div id="na-content" class="switcher-content show">
        <div id="count-na"></div>
        <div class="subtext">until something happens</div>
    </div>
    <div id="eu-content" class="switcher-content">
        <div id="count-eu"></div>
        <div class="subtext">until something happens</div>
    </div>
    <a id="na" class="switcher">North America</a> - <a id="eu" class="switcher">Europe</a>
</div> 
```

最后是 JSFiddle，如果不是很清楚：http: [//jsfiddle.net/tCyBm/](http://jsfiddle.net/tCyBm/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:26:45.410

你试过添加 onTick : watchCountdown 吗？是的。我刚刚为你查看了文档。首先我想指出，如果您使用的是 IE 并且没有运行最新版本的 API，那么这就是您的问题。其次，尝试将您的函数调用从匿名函数中取出，因为它可能会影响它与 countdown.js 的通信方式

onTick : watchCountdown 不应该是必要的，但是

```
 $('#count-eu').countdown(
       {until: $.countdown.UTCDate(-0, 2013, 06-1, 14), onTick: watchCountdown});

    function watchCountdown(periods) {  $('#monitor').text('Just ' + periods[5] +
       ' minutes and ' + periods[6] + ' seconds to go');} 
```

每次倒计时更新自身时调用的回调函数。在函数中，this 指的是保存小部件的分区。当前倒计时周期的数组（int[7] - 基于格式设置）作为参数传递：[0] 是年，[1] 是月，[2] 是周，[3] 是天，[4 ] 是小时，[5] 是分钟，[6] 是秒。///我直接从文档中复制了该部分。

让我知道它是如何工作的，我正试图围绕这些部分建立我的街头信誉，所以我会弄清楚的。

# java-me - 如何在 J2me 中使用默认图像查看器或视频播放器来查看图像并在文件系统中播放视频？

> ID：15084267
> 
> 赞同：2
> 
> 时间：2013-02-26T08:11:25.940
> 
> 标签：java-me, nokia-s40

我是 J2me 的新手，可以告诉我如何打开存储卡中的图像，在设备默认播放器中打开，视频也一样。

我尝试使用 CHAPI，但它不起作用。它仅适用于 http url。

我在 S40 设备诺基亚 Asha 303 中看到了 WhatsApp，它正在做我想做的事情，它从存储卡中打开读取图像并将其显示在设备的默认图像查看器中。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:13:40.090

您可以使用 platformRequest() 来调用原生内容，例如拨打电话号码或打开网页。我从未尝试过打开本地文件，但它应该以相同的方式工作。

[http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html#platformRequest%28java.lang.String%29](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html#platformRequest%28java.lang.String%29)

因此，如果您执行 platformRequest("file://path/to/video.mp4"); 然后设备应该确定它是一个视频，然后打开默认的视频查看器。

# assembly - MIPS 执行的指令总数

> ID：15084269
> 
> 赞同：0
> 
> 时间：2013-02-26T08:11:27.357
> 
> 标签：assembly, mips, mips32

我有这个代码：

```
 addi $t1, $zero, $zero
LOOP: lw $s1,0($s0)
      add $s2, $s2, $s1
      addi $s0, $s0, 4
      addi $t1, $t1, 1
      slti $t2, $t1, 100
      bne $t2, $s0, LOOP 
```

问题是执行的指令总数是多少。

假设 s0=0

我认为是当 t2 == s0 t2 对于任何 t1<100 和 s0 在每个循环中递增 4 为 1 时循环终止。那么这会使循环无限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:54:14.673

> 我认为是当 t2 == s0 时循环终止。

正确的。

> 对于任何 t1<100，t2 为 1。

正确的。

> s0 在每个周期中递增 4。

正确的。

> 那么这会使循环无限吗？

不必要。

如果`lw $s1,0($s0)`试图访问受保护的内存，您的程序将被操作系统终止。

此外，如果任何添加指令导致溢出，您的程序也可能会被操作系统终止。只有无符号添加指令（`addu`等）不会产生异常/陷阱。

# ios - 触发drawRect重绘视图的按钮

> ID：15084270
> 
> 赞同：1
> 
> 时间：2013-02-26T08:11:34.830
> 
> 标签：ios, xcode, drawrect, ibaction, setneedsdisplay

我有一个带有子视图的 VC。在`subview level`我有一个按钮。我希望按钮导致视图被更新。

`IBAction`代码在VC中。它目前所做的只是切换一个`BOOL`值。

回到子视图 drawRect: 方法是测试`BOOL`并相应更改视图的代码。

我的观察是，当按下按钮时，IBAction 代码运行，切换`BOOL`，但该`drawRect:`方法没有被调用。

我尝试手动调用 drawRect （不好的做法，没有工作）。我尝试调用 setNeedsDisplay 但这也不起作用（无法弄清楚如何引用以编程方式创建的子视图）。

欢迎提出建议。

IBAction 代码很简单，但包含在下面：

```
- (IBAction)rotateWindowButtonWasPressed:(id)sender
{
    // just flip the boolean here. Need to make the code change in drawRect: in top2View.m
    if ([myGlobals gWinVertical])
        [myGlobals setGWinVertical:NO];
    else
        [myGlobals setGWinVertical:YES];
    // Hoping this would force a redraw, but bounds have to change...:(
    //_top2ViewOutlet.contentMode = UIViewContentModeRedraw;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T08:17:09.807

要发出 drawRect 调用，请调用`setNeedsDisplay`您更改的视图。操作系统将在其上调用 drawRect 并自动影响重叠视图。

在你的情况下，我认为

`[self.view setNeedsDisplay]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:22:22.207

不知道发生了什么 - 上面有一个答案解决了我的问题，但现在它消失了？无论如何 - 答案是以编程方式创建按钮，然后我可以在 drawRect: 所在的子视图级别包含该方法，并使用 setNeedsDisplay 重新绘制屏幕。这与使用 IB 并在 VC 级别拥有 IBAction 代码。

# asp.net - 无法确定网格视图中复选框的状态

> ID：15084274
> 
> 赞同：0
> 
> 时间：2013-02-26T08:12:05.260
> 
> 标签：asp.net, mysql, vb.net, gridview, checkbox

我有一个带有复选框的 GridView。但是我在确定是否选中了给定行的复选框时遇到了真正的问题。

我需要从一行中检索某个值并将其放入代码中。但是当我遍历 GridView Rows 时，程序不会输入检查 checkBox'x 状态的 if 语句。

这是后端的代码：

```
 Dim Primaryid As String = "Initial stage"
    For Each gvr As GridViewRow In GridView1.Rows

        If (CType(gvr.FindControl("CheckBox1"), CheckBox)).Checked = True Then
            Primaryid = gvr.Cells(1).Text
        End If
    Next gvr

    Dim exmess As String = "alert('" & Primaryid & "')"
    Page.ClientScript.RegisterStartupScript(Me.GetType(), "ErrorAlert", exmess, True) 
```

这是 GridView 的代码。我在加载页面时自动填充它：

```
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" Width="1500px">
        <Columns>

                    <asp:TemplateField >
                        <ItemTemplate>
                            <asp:CheckBox ID="CheckBox1" runat="server" />
                        </ItemTemplate>
                    </asp:TemplateField>

          </Columns>
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView> 
```

如果您能指出我的错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:27:16.667

您必须遍历所有行并找到您的复选框控件，然后检查其选中状态。查看工作示例（我使用在线转换器将其转换为 VB）

```
Protected Sub btnGetSelectedRows_Click(sender As Object, e As EventArgs)
Dim items = New StringBuilder()
For Each grow As GridViewRow In GridView1.Rows
    Dim chkTemp As CheckBox = DirectCast(grow.FindControl("chkSelectRow"), CheckBox)
    If chkTemp IsNot Nothing Then
        If chkTemp.Checked Then
            items.Append(String.Format("{0},", GridView1.DataKeys(grow.RowIndex)("ProductID").ToString()))
        End If
    End If
Next

If items.Length > 0 Then
        Response.Write("You selected Ids:" & Convert.ToString(items))
    End If

End Sub 
```

和aspx

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" 
        AllowPaging="True" AutoGenerateColumns="False" DataKeyNames="ProductID">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:CheckBox ID="chkSelectRow" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="ProductID" HeaderText="ProductID" 
                InsertVisible="False" ReadOnly="True" SortExpression="ProductID" />
            <asp:BoundField DataField="ProductName" HeaderText="ProductName" 
                SortExpression="ProductName" />
            <asp:BoundField DataField="SupplierID" HeaderText="SupplierID" 
                SortExpression="SupplierID" />
            <asp:BoundField DataField="CategoryID" HeaderText="CategoryID" 
                SortExpression="CategoryID" />
            <asp:BoundField DataField="QuantityPerUnit" HeaderText="QuantityPerUnit" 
                SortExpression="QuantityPerUnit" />
            <asp:BoundField DataField="UnitPrice" HeaderText="UnitPrice" 
                SortExpression="UnitPrice" />
            <asp:BoundField DataField="UnitsInStock" HeaderText="UnitsInStock" 
                SortExpression="UnitsInStock" />
            <asp:BoundField DataField="UnitsOnOrder" HeaderText="UnitsOnOrder" 
                SortExpression="UnitsOnOrder" />
            <asp:BoundField DataField="ReorderLevel" HeaderText="ReorderLevel" 
                SortExpression="ReorderLevel" />
            <asp:CheckBoxField DataField="Discontinued" HeaderText="Discontinued" 
                SortExpression="Discontinued" />
            <asp:BoundField DataField="CategoryName" HeaderText="CategoryName" 
                SortExpression="CategoryName" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
        SelectCommand="SELECT * FROM [Alphabetical list of products]"></asp:SqlDataSource>
    <br /> 
```

注意，我使用了

> 数据键

属性来访问行的主键。从长远来看，当您将来更改 gridview 上的列时，我建议您执行与使用 cellIndex 访问单元格值相同的操作。

达米安。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:30:17.237

试试这个，它适用于winforms。不能保证它会为你工作。我对单元格值进行了硬编码，应该可以按照您的方式获取单元格。

无论如何，主要思想是检查单元格的值，而不是尝试获取“检查”值（因为它们是相同的）。所以我基本上将单元格值解析为一个布尔对象。

```
For Each r As DataGridViewRow In DataGridView1.Rows
    Dim b As Boolean = False
    Boolean.TryParse(r.Cells("CheckBox1").Value, b)
    If b Then
        'Do stuff
    End If
Next 
```

编辑：wops 在 C# 中做到了：F 给我一秒钟，我会发布 VB：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:35:19.227

试试这个可能对你有帮助。

```
 Dim Primaryid As String = "Initial stage"
    For Each row As GridViewRow In GridView1.Rows
        Dim chk As CheckBox = TryCast(row.Cells(0).Controls(0), CheckBox)

        If chk.Checked Then
        End If
    Next 
```

让我知道它是否有效

# wordpress - 检索产品标签以在 Woocommerce 中的查询中使用

> ID：15084278
> 
> 赞同：1
> 
> 时间：2013-02-26T08:12:25.050
> 
> 标签：wordpress, tags, woocommerce

我正在尝试查询与我的产品标签具有相同标签的帖子。我可以在查询之前打印我的标签（参见第一行代码），它可以工作，但是在查询中它全部出错了。

```
<?php echo $product->get_tags(); ?>
<?php
 $producttags = get_tags();
 if ($producttags) {
foreach($producttags as $tag) {
    $tag = $tag->slug;  break;
}
query_posts('tag='.$tag.'&posts_per_page=-1');
while (have_posts()) : the_post(); ?>
<div class="actucontent">
  <h3>
    <?php the_title(); ?>
  </h3>
  <?php the_content(); ?>
</div>
<?php endwhile;
wp_reset_query();
}
?> 
```

任何的想法？问题是，我不知道如何`$product->get_tags()`在我的查询中调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T04:35:08.197

get_tags() 是 WP_Post 的成员，而 $product 是 WC_Product_Simple 类型

# jquery - jQuery 正在向 HTML 元素添加动态属性

> ID：15084281
> 
> 赞同：0
> 
> 时间：2013-02-26T08:12:38.903
> 
> 标签：jquery

我观察到 jQuery 正在向 HTML 元素添加像 jQuery17105484855763578391="21" 这样的属性。我只能在 IE 中看到，而在其他浏览器中看不到。为什么 jQuery 添加这个属性，为什么在其他浏览器中没有发生这种情况？它是否使用它来识别页面上的元素？提前致谢。

# c# - 除了 reCaptcha 之外，是否有任何用于 ASP.NET 的验证码库？

> ID：15084284
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:12:59.830
> 
> 标签：c#, asp.net, nuget, captcha

你能推荐任何可以在 asp.net 网络表单下使用的简单验证码（可能是 nuget 包）吗？不是 ReCaptcha，因为它根本不可读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:16:55.523

在 codeproject 上有一个解决方案 - [ASP.NET Captcha](http://www.codeproject.com/Articles/8751/A-CAPTCHA-Server-Control-for-ASP-NET)（虽然不是 nuget 包）

如果您正在寻找一个 nuget 包，请尝试这个包含验证码解决方案的[ASP.NET Helpers 包](http://nuget.org/packages/microsoft-web-helpers/)

# apache - rsync文件夹在php中的apache服务器之外

> ID：15084286
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:13:06.883
> 
> 标签：apache, ssh, exec, rsync

这个命令我可以在命令行中正确运行。

```
>sshpass -p 'xxxx' rsync -rve ssh /var/www/html/my_profect/image server2@192.168.xxx.xxx:/var/www/html/project2 
```

但我想从 php 页面使用`exec()`. 但是当我从 php 页面调用时，rsync 没有移动任何文件，也没有给出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:20:10.090

1.  使用`passthru()`而不是`exec()`获取原始 shell 输出。
2.  用于`var_dump(passthru($command));`查看输出。

# php - 如何在 smarty 中使用 {section} 打印关联数组？

> ID：15084288
> 
> 赞同：2
> 
> 时间：2013-02-26T08:13:09.700
> 
> 标签：php, smarty

我想使用部分打印一个关联数组，但我不能这样做。以下是 PHP 和 Smarty 代码：

PHP代码：

```
 $smarty->assign('$all_latest_news',       $grid_data); 
```

在上面的代码`$grid_data`中是一个关联数组，它被分配给 smarty 模板。供您参考，使用以下命令打印后数组如下所示`print_r($grid_data)`：

```
Array ( [0] => Array ( [news_id] => 1 [news_title] => News Channel URL [news_link] => http://indiatoday.intoday.in/ [news_added_date] => 2013-02-26 ) [1] => Array ( [news_id] => 2 [news_title] => News Paper Web Address [news_link] => http://www.bhaskar.com/ [news_added_date] => 2013-02-25 ) ) 
```

现在我想在 smarty 模板中打印这个数组，代码片段如下：

```
<table width="100%" align="center" cellpadding="6" cellspacing="1" bgcolor="#FFFFFF">
                <tr align="center" id="tableHeader">
                    <td width="20%" align="left"><b>News Title</b></td>
                    <td width="55%" align="left"><b>News Link</b></td>
                    <td width="15%" align="center"><b>Option</b></td>
                </tr>
                {section name=news loop=$all_latest_news}
                <tr align="center" id="tabledata" bgcolor="{cycle values="#d0e8f4,#96c0d5"}">
                    <td align="left" valign="top">{$all_latest_news[news].news_title}</td>
                    <td align="left" valign="top">{$all_latest_news[news].news_link|truncate:350:" ...":true}</td>

                    <td align="center" valign="top"><a href="manage_latest_news.php?op=edit&news_id={$all_latest_news[news].news_id}">Edit</a>
                    &nbsp;&nbsp;<a href="manage_latest_news.php?op=delete&news_id={$all_latest_news[news].news_id}" onClick="return ConfirmDelete()">Delete</a></td>
                </tr>
                {sectionelse}
                <tr>
                    <td colspan="5" align="center"><b>No News Available</b></td>
                </tr>
                {/section}
</table> 
```

使用此代码，我无法将数组值打印到相应的列。列标题正确打印。之后`{sectionelse}`执行该部分并打印“无可用新闻”消息。

其实我想打印数组中的值。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:19:43.240

When you assign the values to variables in Smarty, you don't want to put `'$'` symbol. Change your code to,

```
$smarty->assign('all_latest_news', $grid_data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:31:34.073

Change `$smarty->assign('$all_latest_news', $grid_data);`

to :

`$smarty->assign('all_latest_news', $grid_data);`

Use this :

```
{foreach from=$all_latest_news item=news name=news}
   {$news.news_title}
{/foreach} 
```

Ref: [http://www.smarty.net/docsv2/en/language.function.foreach](http://www.smarty.net/docsv2/en/language.function.foreach)

# css - 通过css从多个输入中隐藏最后3个输入类型文本

> ID：15084290
> 
> 赞同：2
> 
> 时间：2013-02-26T08:13:16.760
> 
> 标签：css, html

如果我有多个输入类型的文本并且我只想显示 3 top 。我使用了这个 html 和 css。但隐藏失败。

[http://jsfiddle.net/naresh_kumar/qecCC/](http://jsfiddle.net/naresh_kumar/qecCC/)

**HTML**

```
<div id="urlLinksInput"> 
    <p> 
        <input id="inputurl0" name="inputurl[]" type="text" class="txtinput"> 
    </p>
    <p>
        <input id="inputurl1" name="inputurl[]" type="text" class="txtinput"> 
    </p>
    <p>
        <input id="inputurl2" name="inputurl[]" type="text" class="txtinput"> 
    </p>
    <p>
        <input id="inputurl3" name="inputurl[]" type="text" class="txtinput"> 
    </p>
    <p>
        <input id="inputurl4" name="inputurl[]" type="text" class="txtinput"> 
    </p>
</div> 
```

**CSS**

```
 #urlLinksInput p input:nth-child(n+3) { display: none; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:20:29.847

```
#urlLinksInput p:nth-child(n+3) input { 
   display: none; /* ^----this must be here,as <p> has only ONE child,
                                            and that is <input>*/
} 
```

[演示](http://jsfiddle.net/qecCC/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:21:16.187

使用[HTML5`hidden`属性](http://davidwalsh.name/html5-hidden)：

```
<input type="text" hidden> 
```

...对于不支持的浏览器使用这个后备 CSS：

```
[hidden] {
    display: none;
} 
```

### [演示](http://jsfiddle.net/qecCC/2/)

## 编辑

更好用[`input[type=hidden]`](http://www.w3.org/TR/html-markup/input.hidden.html)。它就像文本输入一样工作，您可以通过 JavaScript 与之交互，但它是隐藏的：

```
<input type="hidden"> 
```

# java - 从二进制文件中读取要筛选的类对象数组时遇到问题

> ID：15084295
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:13:24.707
> 
> 标签：java, arrays, class, object, binaryfiles

无法将二进制文件中的类对象数组读取到屏幕上。到目前为止，我只能读取第一个对象，尽管文件上有 46 个单独的对象。这是代码：

```
private void readBinaryFile()
{
    ObjectInputStream ois = null;
    Person[] personData = null;
     try 
     {
         ois = new ObjectInputStream(new FileInputStream(FILE));
         personData = (Person[]) ois.readObject();

         for(Person p : personData)
         {  
             System.out.println(p.getName() +
                       "\t" + p.getRanking() +
                       "\t  " + p.getIDNumber());
         }
         ois.close();
     }
     catch (FileNotFoundException e) {}
     catch (IOException e) {}
     catch (ClassNotFoundException e) {}
} 
```

即使代码编译，当我调用该方法时，我也会收到此错误：

```
java.lang.ClassCastException: Person cannot be cast to [LPerson; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:15:08.510

看起来您的对象流包含一系列单独的`Person`对象 - 而不是`Person[]`.

如果您想`Person[]`在流中使用 a，则应该更改编写代码 - 否则，您应该大概知道要阅读多少人，然后使用：

```
for (int i = 0; i < count; i++) {
    Person person = (Person) ois.readObject();
    // Display the person
} 
```

# ios - Cocos2d-x 应用程序仅在 Ad-hoc 构建中崩溃

> ID：15084299
> 
> 赞同：0
> 
> 时间：2013-02-26T08:13:59.583
> 
> 标签：ios, cocos2d-x, crash-reports, adhoc

我的 cocos2d-x 应用程序在我升级到 xcode 4.6 后内置发布的 Ad-hoc 中崩溃。

这是我为测试所做的：

1.  使用4.5.2内置的同一个app的ipa，没问题
2.  通过设备中的xcode运行发布中的应用程序，没问题
3.  为临时构建调试应用程序，没问题。

崩溃报告是：

```
Incident Identifier: 8271D2BD-FB0B-4A1F-87BC-C02AF3F61A27
CrashReporter Key:   561c3d85fda95f88dc109d6c0f098b5e4ec968fc
Hardware Model:      iPad3,1
Process:         SceneBook [4164]
Path:            /var/mobile/Applications/39E159BE-78B5-45A7-B21B-C1FEEF1A8DFD/SceneBook.app/SceneBook
Identifier:      SceneBook
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-26 16:13:41.224 +0800
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: EXC_ARM_DA_ALIGN at 0x0d270e49
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   SceneBook                       0x00085e10 cocos2d::extension::CCBReader::readFloat() (CCBReader.cpp:520)
1   SceneBook                       0x0008ac38 cocos2d::extension::CCNodeLoader::parsePropTypePosition(cocos2d::CCNode*, cocos2d::CCNode*, cocos2d::extension::CCBReader*, char const*) (CCNodeLoader.cpp:347)
2   SceneBook                       0x0008a0d4 cocos2d::extension::CCNodeLoader::parseProperties(cocos2d::CCNode*, cocos2d::CCNode*, cocos2d::extension::CCBReader*) (CCNodeLoader.cpp:108)
3   SceneBook                       0x000853a4 cocos2d::extension::CCBReader::readNodeGraph(cocos2d::CCNode*) (CCBReader.cpp:610)
4   SceneBook                       0x00085718 cocos2d::extension::CCBReader::readNodeGraph(cocos2d::CCNode*) (CCBReader.cpp:719)
5   SceneBook                       0x00084b40 cocos2d::extension::CCBReader::readFileWithCleanUp(bool, cocos2d::CCDictionary*) (CCBReader.cpp:198)
6   SceneBook                       0x000849c8 cocos2d::extension::CCBReader::readNodeGraphFromData(cocos2d::extension::CCData*, cocos2d::CCObject*, cocos2d::CCSize const&) (CCBReader.cpp:279)
7   SceneBook                       0x00084506 cocos2d::extension::CCBReader::readNodeGraphFromFile(char const*, cocos2d::CCObject*, cocos2d::CCSize const&) (CCBReader.cpp:256)
8   SceneBook                       0x000843de cocos2d::extension::CCBReader::readNodeGraphFromFile(char const*) (CCBReader.cpp:231)
9   SceneBook                       0x00080ff0 CCBLoader::load(std::string const&, std::string const&, std::string const&) (CCBLoader.cpp:29)
10  SceneBook                       0x000803da MainScene::scene() (MainScene.cpp:25)
11  SceneBook                       0x00080c4c IntroScene::makeTransition(cocos2d::CCTime) (IntroScene.cpp:61)
12  SceneBook                       0x000a1adc cocos2d::CCTimer::update(float) + 204
13  SceneBook                       0x000a35ee cocos2d::CCScheduler::update(float) + 326
14  SceneBook                       0x000a0da0 cocos2d::CCDirector::drawScene() + 24
15  SceneBook                       0x000a17a2 cocos2d::CCDisplayLinkDirector::mainLoop() + 34
16  QuartzCore                      0x33302868 CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 160
17  QuartzCore                      0x333027be CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 54
18  IOMobileFramebuffer             0x35b4affa IOMobileFramebufferVsyncNotifyFunc + 150
19  IOKit                           0x350fb606 IODispatchCalloutFromCFMessage + 182
20  CoreFoundation                  0x37e88f0c __CFMachPortPerform + 356
21  CoreFoundation                  0x37e9351c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
22  CoreFoundation                  0x37e934be __CFRunLoopDoSource1 + 134
23  CoreFoundation                  0x37e9230c __CFRunLoopRun + 1364
24  CoreFoundation                  0x37e1549e CFRunLoopRunSpecific + 294
25  CoreFoundation                  0x37e15366 CFRunLoopRunInMode + 98
26  GraphicsServices                0x362f8432 GSEventRunModal + 130
27  UIKit                           0x30cc6cce UIApplicationMain + 1074
28  SceneBook                       0x0007f688 main (main.m:14)
29  SceneBook                       0x0007f250 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x30b103a8 kevent + 24
1   libdispatch.dylib               0x347eaf04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x347eac22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x30b20cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3306cf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3306ccc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x30b20cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3306cf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x3306ccc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x30b10004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x30b101fa mach_msg + 50
2   CoreFoundation                  0x37e933ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x37e92124 __CFRunLoopRun + 876
4   CoreFoundation                  0x37e1549e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x37e15366 CFRunLoopRunInMode + 98
6   WebCore                         0x3129dc9c RunWebThread(void*) + 396
7   libsystem_c.dylib               0x3307272e _pthread_start + 314
8   libsystem_c.dylib               0x330725e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x0c6962b0    r1: 0x0d270e49      r2: 0x0000024d      r3: 0x00000248
    r4: 0x2fe7b4e0    r5: 0xffffffff      r6: 0x0c6962b0      r7: 0x2fe7b448
    r8: 0x0c697310    r9: 0x00000249     r10: 0x0c696d70     r11: 0x42480000
    ip: 0x00000247    sp: 0x2fe7b448      lr: 0x0008ac3f      pc: 0x00085e10
  cpsr: 0x00000030

Binary Images:
   0x7e000 -    0xd4fff +SceneBook armv7  <33aa47646eca3618aac7d05e4d1395df> /var/mobile/Applications/39E159BE-78B5-45A7-B21B-C1FEEF1A8DFD/SceneBook.app/SceneBook
0x2fe7d000 - 0x2fe9efff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x3039e000 - 0x3039efff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x30470000 - 0x30548fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30579000 - 0x30583fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x30659000 - 0x3091afff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x3092c000 - 0x30934fff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x30937000 - 0x3095cfff  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x309a9000 - 0x309a9fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x30b0f000 - 0x30b25fff  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x30b6b000 - 0x30b7cfff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30b7d000 - 0x30c2afff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x30c2b000 - 0x30c41fff  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30c95000 - 0x31137fff  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x311b5000 - 0x311f0fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x311f4000 - 0x319b3fff  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x31a18000 - 0x31b61fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x31c14000 - 0x31ce3fff  libGLProgrammability.dylib armv7  <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x31d1d000 - 0x31d6efff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x31db2000 - 0x31eb8fff  IMGSGX543GLDriver armv7  <7454a840600038949d67edad05097242> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x31eb9000 - 0x31ebefff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x32106000 - 0x32109fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x3210a000 - 0x3214ffff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x32157000 - 0x32163fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32166000 - 0x3219bfff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x32226000 - 0x32226fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x32227000 - 0x32246fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x3249f000 - 0x324a4fff  libGPUSupportMercury.dylib armv7  <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x324a5000 - 0x324a6fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x324a7000 - 0x324aafff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x3262b000 - 0x32663fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x32b28000 - 0x32b6bfff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x32d19000 - 0x32d2afff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x32dc6000 - 0x32dcafff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x32f29000 - 0x32f35fff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x32f43000 - 0x32f46fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x32fea000 - 0x33063fff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x33064000 - 0x330f0fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x330f1000 - 0x330f2fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x33158000 - 0x3315cfff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x331e7000 - 0x332adfff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x332ae000 - 0x3339ffff  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x333a0000 - 0x333a6fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x335c5000 - 0x335c9fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x33672000 - 0x3367bfff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x3369b000 - 0x336e5fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x3375d000 - 0x33763fff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x33768000 - 0x33925fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x33a27000 - 0x33a40fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x33ef1000 - 0x33f49fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x34017000 - 0x34026fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x3404a000 - 0x3404cfff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x341fd000 - 0x342c3fff  GLEngine armv7  <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x344b4000 - 0x34698fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x346a2000 - 0x34790fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x34794000 - 0x347a8fff  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x347e7000 - 0x347fdfff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x34914000 - 0x34915fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x34c4c000 - 0x34c6cfff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x34d83000 - 0x34e02fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x34e31000 - 0x34e35fff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x34ee5000 - 0x34f02fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x35066000 - 0x35069fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x350d8000 - 0x350d8fff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x350f7000 - 0x35135fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x35136000 - 0x35136fff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x359b9000 - 0x359bffff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x359c0000 - 0x359f7fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x35a68000 - 0x35a8bfff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x35a8c000 - 0x35ab0fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x35ab1000 - 0x35af9fff  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x35afa000 - 0x35b46fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x35b47000 - 0x35b4bfff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x35b4f000 - 0x35b53fff  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35b8a000 - 0x35b8cfff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x35b8d000 - 0x35b90fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x35d6e000 - 0x35db7fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x35dbb000 - 0x35dc6fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x35eb0000 - 0x35ef0fff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x360a3000 - 0x3617afff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x362e2000 - 0x362ecfff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x362ed000 - 0x362f3fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x362f4000 - 0x362fefff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x362ff000 - 0x36307fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x36308000 - 0x36317fff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x36318000 - 0x3643dfff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x36472000 - 0x369b6fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x369b7000 - 0x369b9fff  libCoreFSCache.dylib armv7  <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x369bc000 - 0x369bcfff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x369bd000 - 0x369d3fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x36d96000 - 0x36d97fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x36d98000 - 0x36e08fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x36e75000 - 0x36e76fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x36e77000 - 0x36e78fff  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x36f4e000 - 0x36f54fff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x36f65000 - 0x36faefff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x36fdd000 - 0x3702efff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x37040000 - 0x371befff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x371bf000 - 0x371d4fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x3741e000 - 0x374c8fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x374d5000 - 0x374d6fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x3751d000 - 0x37533fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x37534000 - 0x3753bfff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x3761a000 - 0x37664fff  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x37665000 - 0x37668fff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x3768d000 - 0x3768dfff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x3768e000 - 0x3769bfff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x3769e000 - 0x3776efff  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x37772000 - 0x377aefff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x377af000 - 0x377b6fff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x377d4000 - 0x377d9fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x37c31000 - 0x37d76fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x37d77000 - 0x37d83fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x37e06000 - 0x37f1dfff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x37f3d000 - 0x37f8bfff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x37fb1000 - 0x37fc0fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x37fc1000 - 0x38005fff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices 
```

如何调试这个问题？有人可以建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:03:51.400

您可以通过异常代码找出：EXC_ARM_DA_ALIGN。CCBReader::readFloat() 方法可能由于内存未对齐原因而崩溃，并且仅在您构建和运行应用程序的发布版本时才会崩溃。

有关此崩溃的解决方案：http: [//www.cocos2d-x.org/boards/6/topics/18183? r=22190](http://www.cocos2d-x.org/boards/6/topics/18183?r=22190)

# java - 无限期运行 UI 线程

> ID：15084301
> 
> 赞同：2
> 
> 时间：2013-02-26T08:14:09.480
> 
> 标签：java, swing, jdialog, swingworker

我正在使用 Java Swing 编写一段代码。基本上它的作用是处理一些冗长的任务。在任务运行时，我希望有一个等待弹出窗口，其中包含 GIF 图像。

我的问题是

```
 final InfoDialog infoDialog = new InfoDialog("Parsing file: " + fileToBeUploaded.getName());

        final File finalFileToBeUploaded = fileToBeUploaded;

        class FileParsingWorker extends SwingWorker<Void, String> {            
            @Override
            protected Void doInBackground() throws Exception {
                String text = fileParsers.parseFile(finalFileToBeUploaded);
                publish(text);
                return null;
            }

            @Override
            protected void process(List<String> chunks) {
                infoDialog.setVisible(false);
            }
        }

        infoDialog.setVisible(true);
        FileParsingWorker fileParsingWorker = new FileParsingWorker();
        fileParsingWorker.execute(); 
```

InfoDialog 是一个小的 UI 弹出窗口，其中包含 GIF 动画。基本上，我将冗长的任务放在工作人员中，但将 UI 的 setVisibles 放在两个地方。我在想是否有任何方法可以在线程中运行 InfoDialog UI，以便我可以重用那段代码？

我遇到的问题是我想无限期地运行 InfoDialog，直到我故意停止它。如果我将 setVisible(true) 放入线程中，该线程将立即终止，并且我的 UI 将不会更新。

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:22:14.797

请阅读[Swing 中的 Concurrency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)特别是[The Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。这是应该在其上创建和操作所有 Swing 组件的线程。IE：

```
SwingUtilities.invokeLater(new Runnable () {
    @Override
    public void run() { 
        final InfoDialog infoDialog = new InfoDialog("Parsing file: " + fileToBeUploaded.getName());

        final File finalFileToBeUploaded = fileToBeUploaded;

        ...

        infoDialog.setVisible(true);
        FileParsingWorker fileParsingWorker = new FileParsingWorker();
        fileParsingWorker.execute();
    }
}); 
```

另外我认为另一个问题是您在 Swing 工作`dialog`程序的覆盖中将 back 设置为不可见`process(List<String> chunks)`，因此在读取第一个块`dialog`时将关闭。我认为 Swing Workers[`done()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#done%28%29)方法可能更符合您的要求，并且在 EDT 上执行：

```
class FileParsingWorker extends SwingWorker<Void, String> {            
    @Override
    protected Void doInBackground() throws Exception {
        String text = fileParsers.parseFile(finalFileToBeUploaded);
        publish(text);
        return null;
    }

    @Override
    protected void process(List<String> chunks) {
      //each chunk will get processed here
    }

    @Override
    protected void done() {//when Swing worker is finished this method is called
        infoDialog.setVisible(false);
    }
} 
```

# java - 递归并发

> ID：15084302
> 
> 赞同：2
> 
> 时间：2013-02-26T08:14:13.063
> 
> 标签：java, recursion, concurrency

我在伪代码中具有以下功能：

```
Result calc(Data data) {
  if (data.isFinal()) {
    return new Result(data); // This is the actual lengthy calculation
  } else {
    List<Result> results = new ArrayList<Result>();
    for (int i=0; i<data.numOfSubTasks(); ++i) {
      results.add(calc(data.subTask(i));
    }
    return new Result(results); // merge all results in to a single result
  }
} 
```

我想使用固定数量的线程并行化它。

我的第一次尝试是：

```
ExecutorService executorService = Executors.newFixedThreadPool(numOfThreads);

Result calc(Data data) {
  if (data.isFinal()) {
    return new Result(data); // This is the actual lengthy calculation
  } else {
    List<Result> results = new ArrayList<Result>();
    List<Callable<Void>> callables = new ArrayList<Callable<Void>>();
    for (int i=0; i<data.numOfSubTasks(); ++i) {
      callables.add(new Callable<Void>() {
        public Void call() {
         results.add(calc(data.subTask(i));
        }
      });
    }
    executorService.invokeAll(callables);  // wait for all sub-tasks to complete
    return new Result(results); // merge all results in to a single result
  }
} 
```

然而，这很快就陷入了死锁，因为在顶级递归级别等待所有线程完成的同时，内部级别也在等待线程变得可用......

如何有效地并行化我的程序而不会出现死锁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:51:35.957

您的问题是使用 ThreadPoolExecutor 处理具有依赖关系的任务时的一般设计问题。

我看到两个选项：

1）确保以自下而上的顺序提交任务，这样您就永远不会有一个正在运行的任务依赖于尚未开始的任务。

2）使用“直接切换”策略（参见[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)文档）：

```
ThreadPoolExecutor executor = new ThreadPoolExecutor(poolSize, poolSize, 0, TimeUnit.SECONDS, new SynchronousQueue<Runnable>());
executor.setRejectedExecutionHandler(new CallerRunsPolicy()); 
```

这个想法是使用同步队列，这样任务就不会在真正的队列中等待。拒绝处理程序负责处理没有可用线程运行的任务。使用这个特定的处理程序，提交者线程运行被拒绝的任务。

此执行器配置保证任务永远不会被拒绝，并且您永远不会因为任务间的依赖关系而出现死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:42:03.073

你应该把你的方法分成两个阶段：

1.  创建所有树直到 data.isFinal() == true
2.  递归收集结果（只有在合并不产生其他操作/调用时才有可能）

为此，您可以使用`[Futures][1]`使结果异步。表示 calc 的所有结果都是 Future[Result] 类型。

立即返回 Future 将释放当前线程并为其他线程的处理提供空间。收集结果（new Result(results)）后，您应该等待所有结果准备好（ScatterGather-Pattern，您可以使用信号量等待所有结果）。集合本身将遍历一棵树并在单个线程中进行检查（或等待结果到达）。

总体而言，您构建了一个 Futures 树，用于收集结果并仅在线程池中执行“昂贵”的操作。

# linux - 如何通过 bash 脚本添加快捷键

> ID：15084303
> 
> 赞同：2
> 
> 时间：2013-02-26T08:14:16.470
> 
> 标签：linux, ubuntu, keyboard-shortcuts, compiz

我们正在研究 Linux Ubuntu 中的信息亭模式。我们想通过命令行（bash 脚本）定义一个快捷方式。这可能吗？我们想通过 bash 脚本自动设置我们的信息亭模式。因此无法通过 Compiz 创建新的快捷方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:04:45.420

快捷方式通常取决于您使用的窗口管理器。如果你使用的是 Ubuntu，你应该将 Gnome 作为默认的windomanager，这样你就可以使用`Gnome Control Center`来设置你想要的快捷方式。

另一种方法是使用`Xbindkeys`与窗口管理器无关的工具，通常从简单的文本文件中读取关键配置`~/.xbindkeysrc`。

所以你可以`Xbindkeys`在你的系统中安装：

```
sudo apt-get install xbindkeys 
```

然后在`bash`脚本中，您可以在`~/xbindkeysrc`配置文件中添加一个新条目以添加您的快捷方式。

# c# - 以特定顺序迭代文件夹中的文件？

> ID：15084316
> 
> 赞同：4
> 
> 时间：2013-02-26T08:15:13.573
> 
> 标签：c#, loops

我对 c# 编程很陌生，所以如果我的问题是微不足道的，我深表歉意。我正在运行一些 c# 代码，我需要迭代文件夹中的一些文件并使用：

```
foreach (string f in Directory.GetFiles(@"C:\temp\GeneralStats"))
{ 
```

但是，我希望根据文件名以特定顺序读取这些文件。我的文件名采用以下格式。

```
generalstats_2012_11_1.csv
generalstats_2012_11_2.csv
generalstats_2012_11_3.csv
......

```

当我的代码读取文件时，它以 generalstats_2012_11_1.csv 开头，但随后直接跳转到 generalstats_2012_11_10.csv，而不是 generalstats_2012_11_2.csv。

我曾尝试在网上搜索答案，但找不到任何答案。我当然根据特定文件夹中的日期（在名称中）对文件进行了排序，但代码根本不承认这一点。任何人都可以帮助我 - 我错过了 C# 中的一些订单功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:30:36.220

你可以使用这个：

```
 var paths = Directory.GetFiles(@"C:\temp\GeneralStats")
            .OrderBy(path => 
                Convert.ToInt32(path.Split('_', '.')[1]) * 10000 + 
                Convert.ToInt32(path.Split('_', '.')[2]) * 100 + 
                Convert.ToInt32(path.Split('_', '.')[3]));

        foreach (string path in paths)
        {
        } 
```

这从文件名中获取日期部分并从中创建一个整数，例如`2012_11_10`文件名是 2012110 作为整数，`2012_11_1`是 20121101 等。这些数字用于排序。

上述方法的另一种变体是：

```
 var paths = Directory.GetFiles(@"C:\temp\GeneralStats")
            .OrderBy(path =>
                Convert.ToInt32(
                    String.Concat(
                        path.Split('_', '.')
                            .Skip(1)
                            .Take(3)
                            .Select(num => num.PadLeft(2, '0'))
                            .ToArray())
                )
            ); 
```

它还从文件名中解析数字并创建用于排序的整数。

而不是`Directory.GetFiles`您可以使用的方法`Directory.EnumerateFiles`（但这仅在 .NET 4 和更高版本中可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:30:42.193

如果要按文件名后面的日期排序，则必须将其转换为 1，否则按字母顺序排列（因此“10”在“2”之前）。

您可以`Enumerable.OrderBy`在此 linq 查询中使用：

```
var files = Directory.EnumerateFiles(@"C:\temp\GeneralStats", "*.csv")
    .Select(fn => new
    {
        Path = fn,
        Split = Path.GetFileNameWithoutExtension(fn).Split('_')
    })
    .Where(x => x.Split.Length == 4)
    .Select(x => new
    {
        x.Path,
        Date = new DateTime(int.Parse(x.Split[1]), int.Parse(x.Split[2]), int.Parse(x.Split[3]))
    })
    .OrderBy(x => x.Date)
    .Select(x => x.Path); 
```

首先，我从`Path`类中选择一个具有一些有用属性的匿名类型，例如`GetFileNameWithoutExtension`. 这将使查询的其余部分更加高效和可读。这`Where`是为了防止在文件名中没有日期部分的文件时出现错误。下一个选择解析`DateTime`来自 的标记`string.Split`。最后三个部分包含年、月和日。`OrderBy`将按日期订购。最后我再次选择完整路径，因为您最初想要订​​购文件。

`foreach`您可以使用 a或使用枚举结果，例如`ToList`，如果您想保留它：

```
foreach (string f in files)
{
    // ...
} 
```

# php - 与 MYSQL 中的条件不同

> ID：15084318
> 
> 赞同：0
> 
> 时间：2013-02-26T08:15:18.700
> 
> 标签：php, mysql, database, distinct, conditional-statements

有这样的表（只是一个例子）：

```
Program category status 
A         cat1    active
B         cat2    inactive
C         cat3    active
D         cat2    active 
```

我想获得不同的类别，但前提是如果我使用状态是活动的

```
SELECT DISTINCT category FROM table WHERE status='active' 
```

它不会将 cat2 作为 distict 值包括在内，即使它曾经显示为活动状态。我希望所有不同的类别都返回，即使它只出现一次。

我可以使用 php 循环来执行此操作，但我宁愿不返回每个类别，因为这是一个大表。

预先感谢您的任何帮助。第一次发帖，但 StackOverFlow 帮助了我很多很多次。

* * *

实际的表结构是

```
CREATE TABLE cats (
    id int(11) NOT NULL AUTO_INCREMENT,
    programname varchar(100) NOT NULL DEFAULT '',
    sub0 varchar(300) DEFAULT NULL,
    sub1 varchar(300) DEFAULT NULL,
    sub2 varchar(300) DEFAULT NULL,
    sub3 varchar(300) DEFAULT NULL,
    sub4 varchar(300) DEFAULT NULL,
    category varchar(300) DEFAULT NULL,
    status varchar(1) DEFAULT NULL,
    PRIMARYKEY (id)
) ENGINE= InnoDBDEFAULT CHARSET= latin1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:23:16.203

它似乎是这样工作的：

[SQL 演示](http://sqlfiddle.com/#!2/b7ad8/1)

```
select distinct category
from demo
where status = 'active';

| CATEGORY |
------------
|     cat1 |
|     cat3 |
|     cat2 | 
```

除非您真的有其他条件可以在这里申请，否则您可能需要让我们知道:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:29:30.283

我仍然无法重现该问题。
以下示例的输出是

```
Books>Art>Modern
Books>Art>Concrete
Books>Art>Classicism
Books>Art>Naive 
```

有两条记录有`category=Books>Art>Classicism`. 第一个有`status=0`并且被 WHERE 子句排除，而第二个有`status=1`。您可以通过将第一条记录的 设置为to
来检查我的示例数据中是否没有拼写错误，您会看到它仍然只显示一次，但紧随其后作为第二条记录。`status``0``1``Books>Art>Classicism``Books>Art>Modern`

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

$stmt = $pdo->query("SELECT DISTINCT category FROM soFoo WHERE status='1'", PDO::FETCH_ASSOC);
foreach( $stmt as $row ) {
    echo join(', ', $row), "\n";
}

function setup($pdo) {
    $pdo->exec("
        CREATE TEMPORARY TABLE soFoo (
            id int(11) NOT NULL AUTO_INCREMENT,
            programname varchar(100) NOT NULL DEFAULT '',
            sub0 varchar(300) DEFAULT NULL,
            sub1 varchar(300) DEFAULT NULL,
            sub2 varchar(300) DEFAULT NULL,
            sub3 varchar(300) DEFAULT NULL,
            sub4 varchar(300) DEFAULT NULL,
            category varchar(300) DEFAULT NULL,
            status varchar(8) DEFAULT NULL,
            PRIMARY KEY (id)
        ) ENGINE= InnoDB DEFAULT CHARSET= latin1;
    ");
    $stmt = $pdo->prepare('
        INSERT INTO
            soFoo
            (
                programname, sub0, sub1, sub2,
                sub3, sub4,
                category, status
            )
        VALUES
            (
                :programname, :sub0, :sub1, :sub2,
                :sub3, :sub4,
                :category, :status
            )
    ');
    $data = array();
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Modern', 'status'=>'1'
    );
    // this one has category='Books>Art>Classicism' and status=0
    // the second but last element is a copy of this one with status=1
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Classicism', 'status'=>'0'
    );
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Modern', 'status'=>'1'
    );
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Concrete', 'status'=>'1'
    );
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Classicism', 'status'=>'1'
    );
    $data[] = array(
        'programname'=>'BOOK Store',
        'sub0'=>'Books', 'sub1'=>'Art Books','sub2'=>'Modern Art',
        'sub3'=>null, 'sub4'=>null,
        'category'=>'Books>Art>Naive', 'status'=>'1'
    );

    foreach( $data as $rec ) {
        $stmt->execute($rec);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:20:08.333

尝试这个：

```
SELECT DISTINCT category 
FROM 
(SELECT category FROM table WHERE status='active') as temp 
```

# cocoa - 什么响应者捕获撤消操作？

> ID：15084321
> 
> 赞同：1
> 
> 时间：2013-02-26T08:15:31.497
> 
> 标签：cocoa, nswindowcontroller, nsundomanager

我有一个处理撤消和重做的视图。对于特定状态，我将第一响应者从视图更改为视图的窗口。现在在这种状态下，我希望窗口委托中的 validateMenuItem: 方法检查撤消菜单项。

这在我关闭窗口时有效。但是当窗口可见时，其他一些响应者会处理撤消操作。

我的猜测是它是窗口控制器？但由于这是一个非基于文档的应用程序，我还没有手动实现一个。我必须创建一个自定义窗口控制器吗？如果是这样，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:48:21.670

Found the answer here: [http://www.cocoabuilder.com/archive/cocoa/307917-validatemenuitem-not-called-for-undo-menu-item.html](http://www.cocoabuilder.com/archive/cocoa/307917-validatemenuitem-not-called-for-undo-menu-item.html)

> Configuring the Undo menu item with action 'undo:' tells the frameworks that this is *the* undo menu item, so it becomes one element of a standard undo UI mechanism implemented in NSWindow. Under these circumstances, the menu item (and especially its validation) isn't yours to mess with.
> 
> If you want to take implement the entire mechanism yourself, then you should use a custom action such as 'myUndo:' for the Undo menu item. That means, as far as the frameworks know, you app doesn't have (standard) undo, and the action/validation should work in the normal way.

# c# - DevExpress XtraScheduler 导出到 Outlook

> ID：15084322
> 
> 赞同：0
> 
> 时间：2013-02-26T08:15:54.410
> 
> 标签：c#, winforms, devexpress, scheduler

我想将我的约会导出到 Outlook。要完成此任务，我使用 SchedulerStorage 上的“导出到 Outlook”方法。

```
myStorage.ExportToOutlook(); 
```

问题是，我的调度程序看不到，如果这个约会已经包含在 Outlook 中。因此，如果用户单击导出并在他再次执行此操作后，他将成为所有约会两次或更多。我需要更新可用的约会并将新约会从我的 XtraScheduler 插入 Outlook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:51:02.507

我相信您应该使用与 MS Outlook 的**同步**而不是**导出**. 您可以在此处阅读有关此技术的更多信息：[与 MS Outlook 同步](http://documentation.devexpress.com/#WindowsForms/CustomDocument3937)

通过处理同步事件（[AppointmentSynchronizing](http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraSchedulerExchangeAppointmentSynchronizer_AppointmentSynchronizingtopic)、[AppointmentSynchronized](http://documentation.devexpress.com/#CoreLibraries/DevExpressXtraSchedulerExchangeAppointmentSynchronizer_AppointmentSynchronizedtopic)）并分析它们的参数（操作值和 Appointment 参数），您可以实现任何约会冲突解决方案，同时将调度程序存储与 MS Outlook 同步。

# delphi - Delphi 'AND' 评估有 2 个条件

> ID：15084323
> 
> 赞同：17
> 
> 时间：2013-02-26T08:15:54.947
> 
> 标签：delphi

我不得不为我最近正在做的一项合同工作选择 Delphi，我希望有人澄清的一件事是在条件语句中执行逻辑，例如`if`.

我来自 C/C++ 和这些语言的背景，一旦`if`知道一条语句失败，其余的逻辑就不会执行。例如：

```
if (somefunc() == FALSE && anotherfunc() == TRUE) 
```

在上述情况下，永远不会调用if`somefunc()`返回`TRUE`then 。`anotherfunc()`

从我目前所见，在德尔福中，这并不成立。而是，对于

```
if (somefunc() = False and anotherfunc() = True) then 
```

然后，无论`somefunc()`返回什么，`anotherfunc()`都将被调用。

我已经阅读了各种 Delphi 书籍，并重读了一些条件章节，但在任何地方都找不到这种行为的提及。谁能指出我在 Delphi 或 Pascal 的某个地方声明了这种行为？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T10:11:15.563

文档链接在[这里](http://docwiki.embarcadero.com/RADStudio/en/Boolean_short-circuit_evaluation_%28Delphi_compiler_directive%29)：

> ### 布尔短路评估
> 
> ```
>  
> 类型开关
> 语法 {$B+} 或 {$B-} {$BOOLEVAL ON} 或 {$BOOLEVAL OFF}
> 默认 {$B-} {$BOOLEVAL OFF}
> 范围本地
> 
> ```
> 
> **$B 指令在用于and**和**or**布尔运算符的两种不同的 Delphi 代码生成模型之间切换。
> 
> 在 {$B+} 状态下，编译器为完整的布尔表达式求值生成代码。这意味着从 and 和 or 运算符构建的布尔表达式的每个操作数都保证被计算，即使整个表达式的结果已经知道。
> 
> 在 {$B-} 状态下，编译器生成用于短路布尔表达式求值的代码，这意味着只要整个表达式的结果以从左到右的求值顺序变得明显，求值就会停止。

如您所见，默认选项用于短路评估。

* * *

不幸的是，你在测试中有点搞混了。您的 Delphi 代码实际上与 C 代码完全不同。

```
if (somefunc() == FALSE && anotherfunc() == TRUE)      // C code
if (somefunc() = False and anotherfunc() = True) then   // Delphi code 
```

在 Delphi 中，`and`运算符的[优先级](http://docwiki.embarcadero.com/RADStudio/en/Expressions_%28Delphi%29#Operator_Precedence)高于相等运算符`=`。这意味着您的 Delphi 代码相当于：

```
if (somefunc() = (True and anotherfunc()) = True) then 
```

但是在 C 和 C++ 中，优先级是相反的。所以[优先](http://en.cppreference.com/w/cpp/language/operator_precedence)级低于`&&`. 因此，无论短路评估如何，您问题中的 Delphi 和 C++ if 语句在逻辑上是不同的。`==`

我很确定你真的打算像这样编写你的 Delphi 代码：

```
if ((somefunc() = False) and (anotherfunc() = True)) then 
```

这将提供与您的 C++ 代码相同的逻辑，并且由于短路评估，您会看到相同的行为。

最后，你永远不应该在 Delphi 中`False`进行测试。`True`总是这样写代码：

```
if not somefunc() and anotherfunc() then 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T16:03:11.097

如果您的函数`anotherfunc()`在此代码上被调用

```
if (somefunc() = False and anotherfunc() = True) then 
```

那么你已经设置了`BOOLEVAL ON`

正如大卫指出的编译器首先评估`False and anotherfunc()`

在`BOOLEVAL OFF`编译器知道的模式下，这`False and AnyBoolState`将导致`False`因此`anotherfunc()`不会被调用（实际上它永远不会被调用）。

作为一个简单的测试，我扩展了jachaguate程序来显示你的表情

```
program AndEvaluation;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils;

function FalseFunc( const AName : string ) : Boolean;
begin
  Write( AName, '(False)', '-' );
  Result := False;
end;

function TrueFunc( const AName : string ) : Boolean;
begin
  Write( AName, '(True)', '-' );
  Result := True;
end;

begin
  try

    // (somefunc() = False and anotherfunc() = True)
    //
    // in this testcase translated to:
    //
    // somefunc()    => FalseFunc( 'First' )
    // False         => FalseFunc( 'Second' )
    // anotherfunc() => TrueFunc( 'Third' )
    // True          => TrueFunc( 'Fourth' )

{$B+}
    Writeln( 'BOOLEVAL ON' );
    if ( FalseFunc( 'First' ) = FalseFunc( 'Second' ) and TrueFunc( 'Third' ) = TrueFunc( 'Fourth' ) )
    then
      Writeln( 'True' )
    else
      Writeln( 'False' );
{$B-}
    Writeln( 'BOOLEVAL OFF' );
    if ( FalseFunc( 'First' ) = FalseFunc( 'Second' ) and TrueFunc( 'Third' ) = TrueFunc( 'Fourth' ) )
    then
      Writeln( 'True' )
    else
      Writeln( 'False' );

  except
    on E : Exception do
      Writeln( E.ClassName, ': ', E.Message );
  end;

  ReadLn;

end. 
```

现在让我们看看结果

```
BOOLEVAL ON
Second(False)-Third(True)-First(False)-Fourth(True)-True

BOOLEVAL OFF
First(False)-Second(False)-Fourth(True)-True 
```

正如输出所解释的那样，在调用**之前**`BOOLEVAL ON`调用你的`anotherfunc()`意志。 **`somefunc()`**

 **与`BOOLEVAL OFF`你`anotherfunc()`的**永远不会**被调用。

如果你想拥有相同的

```
if (somefunc() == FALSE && anotherfunc() == FALSE) 
```

你必须这样翻译

```
if ( somefunc() = False ) and ( anotherfunc() = False ) then 
```

或者*更好更短*的方法

```
if not somefunc() and not anotherfunc() then 
```

或者甚至更短

```
if not( somefunc() or anotherfunc() ) then 
```

但是为了避免`anotherfunc()`每次你必须设置时都被调用`BOOLEVAL OFF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-09T00:29:50.097

为避免不调用函数，您可以这样做：

```
 bool_somefunc := (somefunc() = 42);
  bool_anotherfunc := (anotherfunc() = 17);
  if ( (bool_somefunc = False) and (bool_anotherfunc = True) ) then 
```

这确保了调用每个函数，无论是打开还是关闭短 eval。**

# visual-c++ - CUDA：Nsight VS2010 profile __device__ 函数

> ID：15084325
> 
> 赞同：2
> 
> 时间：2013-02-26T08:15:57.950
> 
> 标签：visual-c++, cuda, profiling, nsight

我想知道如何在 Visual Studio 2010 上使用 Nsight 2.2 分析函数`__device__`内部的`__global__`函数。我需要知道哪个函数消耗大量资源和时间。我在 CC 2.0 上有 CUDA 5.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T20:36:43.857

Nsight Visual Studio Edition 3.0 CUDA Profiler 引入了源相关实验。Profile CUDA Activity 支持以下源级实验：

*   **指令计数**- 收集内核中每个用户指令的已执行指令、已执行线程指令、活动线程直方图、预测线程直方图。不收集有关系统调用 (printf) 的信息。

*   **Divergent Branch** - 收集流控制指令的已采用分支、未采用分支和发散计数。

*   **内存事务**- 为全局、本地和共享内存指令收集事务计数、理想事务计数器和请求字节。

此信息是根据 SASS 指令收集的。如果内核使用 -lineinfo (--generate-line-info) 编译，则信息可以汇总到 PTX 和高级源代码。由于此数据是从 SASS 汇总的，因此某些统计数据对于高级来源可能并不直观。例如，一个分支统计数据可能显示 100% 未采用，而您预计 100% 已采用。如果您查看 SASS 代码，您可能会看到编译器反转了条件。

另请注意，在优化构建时，编译器有时无法维护行表信息。

![在此处输入图像描述](../Images/523ef09a4e053a5177bcd8b2cb0bf158.png)

目前，硬件性能计数器和计时仅在内核级别可用。

如注释中所述，可以使用clock() 和clock64() 来完成设备代码时序。这是一种非常先进的技术，它需要理解 SASS 和解释与 SM warp 调度器相关的结果的能力。

# android - android中处理程序的代码

> ID：15084326
> 
> 赞同：1
> 
> 时间：2013-02-26T08:15:58.667
> 
> 标签：android

在 for 循环中，有一个调用 handler.post() 的方法。for 循环内部有一条日志语句，它打印了 16 次日志消息（表示 for 循环执行了 16 次）。同样，run() 中还有一条日志消息，但不幸的是，应用程序打印了这条日志消息 300 次（大约），理想情况下应该只打印 16 次。有人可以指导我理解错误吗？

代码片段是：

```
 do
    {
      final Handler handler = new Handler(); 
      System.out.println("KKKKKKKKKKKKKKKKKKKKKKKKKKKK");
      handler.post(new Runnable() {
        @Override public void run() { 
            System.out.println("IIIIIIIIIIIIIIIIIIIIIIIIII");

              // Post again 16ms later.
               boolean booleanHandler= handler.postDelayed(this, 32); 
               System.out.println("******************************"+booleanHandler);
            } });
   }
while(16 times) 
```

编辑：如果条件已删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:50:37.963

这样做：

```
//declare like this
private Handler handler = new Handler();

// call in oncreate()
handler.postDelayed(runnable, 30000); //30sec

//inside this function which u have to run
private Runnable runnable = new Runnable() {
    public void run() {

        handler.postDelayed(this, 30000);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:18:19.383

这是对处理程序的无限调用，因为 t 的值似乎不会在处理程序内部更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:32:07.087

问题在于变量 t。如果 (t >= 0 && t <= 1.0) 为真，那么您的代码会一次又一次地将自己发布到处理程序中，直到 t 被更改。因此，如果您想要执行 16 次，则不应在 Runnable 中调用 handler.post() 或在执行此操作之前更改 t 。

# makefile - 从 Makefile 中的 .c 文件构建单个 .o 文件

> ID：15084327
> 
> 赞同：1
> 
> 时间：2013-02-26T08:16:03.470
> 
> 标签：makefile

我正在尝试编写一个 Makefile，它将从源构建一个 .o 文件列表，然后在一个单独的 make 目标中，设置链接等。我的 Makefile 目前看起来像这样：

```
CC=arm-none-eabi-gcc

vpath %.c src src/peripherals
vpath %.o out

OUT_DIR = out

CFLAGS  = -DUSE_STDPERIPH_DRIVER
CFLAGS += -c -fmessage-length=0 -g3 -gdwarf-2 -O0 -Wall -Wa,-adhlns="$@.lst"
CFLAGS += -mthumb -mcpu=cortex-m4
CFLAGS += -MMD -MP -MF"$@.d" -MT"$@.d"
CFLAGS += -Iinc -Iinc/cmsis -Iinc/peripherals -Iinc/stm32f4xx

SRC = misc.c stm32f4xx_adc.c stm32f4xx_can.c stm32f4xx_crc.c stm32f4xx_cryp.c stm32f4xx_cryp_aes.c \
    stm32f4xx_cryp_des.c stm32f4xx_cryp_tdes.c stm32f4xx_dac.c stm32f4xx_dbgmcu.c stm32f4xx_dcmi.c stm32f4xx_dma.c \
    stm32f4xx_exti.c stm32f4xx_flash.c stm32f4xx_fsmc.c stm32f4xx_gpio.c stm32f4xx_hash.c stm32f4xx_hash_md5.c \
    stm32f4xx_hash_sha1.c stm32f4xx_i2c.c stm32f4xx_iwdg.c stm32f4xx_pwr.c stm32f4xx_rcc.c stm32f4xx_rng.c \
    stm32f4xx_rtc.c stm32f4xx_sdio.c stm32f4xx_spi.c stm32f4xx_syscfg.c stm32f4xx_tim.c stm32f4xx_usart.c \
    stm32f4xx_wwdg.c

OBJ = $(SRC:.c=.o)

%.o : %.c 
    $(CC) -c -o $@ $< $(CFLAGS)

all: $(OBJ)
    $(CC) -o $@ $^ $(CFLAGS) 
```

我知道这是非常错误的，我不是在 Makefile 中工作的专家，但我想把它做好，因为它有助于更​​好地理解这个过程。

基本上需要的是获取 $(SRC) 中的 .c 文件列表并将它们构建到 .o 文件列表中，这些文件在 lib/out 中输出

我知道我的目标和 %.o... 规则非常混乱。我如何获得 all: 目标来构建单个 .o 文件。

这里的项目结构仅供参考，我正在处理的 Makefile 在 ./lib 文件夹中。

```
.
├── Makefile
├── inc
│   └── main.h
├── lib
│   ├── Makefile
│   ├── inc
│   │   ├── cmsis
│   │   │   ├── arm_common_tables.h
│   │   │   ├── ...
│   │   ├── peripherals
│   │   │   ├── misc.h
│   │   │   ├── stm32f4xx_adc.h
│   │   │   ├── ...
│   │   └── stm32f4xx
│   │       ├── stm32f4xx.h
│   │       ├── stm32f4xx_conf.h
│   │       └── system_stm32f4xx.h
│   ├── src
│   │   └── peripherals
│   │       ├── misc.c
│   │       ├── stm32f4xx_adc.c
│   │       ├── ...
│   ├── startup_stm32f4xx.s
│   └── ~Makefile
├── readme.md
├── src
│   └── main.c
├── stm32f4.ld
├── stm32f4discovery.cfg
├── system_stm32f4xx.c
└── ~Makefile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:40:15.913

错字`OBJ = $(SRCS:.c=.o)`更改为`OBJ = $(SRC:.c=.o)`，看起来您的依赖文件生成也有些混乱。

# facebook - 跟踪“分享”漏斗……

> ID：15084328
> 
> 赞同：1
> 
> 时间：2013-02-26T08:16:05.637
> 
> 标签：facebook, api, facebook-graph-api, share

在检查了 SO 线程并没有通过那里找到答案后：我想知道是否可以按用户跟踪共享漏斗？

示例 - 假设我正在分享帖子A（我）>>我的朋友（约翰）分享我的帖子>>他的女朋友（希拉）也分享了>>>然后她的朋友（朗达）分享......</p>

我可以看到：postA 分享：me>jhon>shila>ronda？感谢您的所有帮助和回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:47:32.107

您可以将应用程序中的共享跟踪到第一个用户的时间线，但除此之外，您将无法跟踪它。API 不允许您查看帖子的转发（目前），因此无法跟踪分享到最终用户/分享。

# php - 如何使用 HTML2PDF 设置横向

> ID：15084329
> 
> 赞同：9
> 
> 时间：2013-02-26T08:16:07.497
> 
> 标签：php, html, pdf, html2pdf

如何将通过 HTML2PDF 生成的 pdf 文件的页面方向更改为横向...？默认情况下，它以纵向格式打开。我已经在 html2pdf.class 中更改了它，但没有任何改变。请帮助我..

这是php代码：

```
 require('../../includes/html2pdf/html2fpdf.php');
    $pdf=new HTML2FPDF('L','mm','A3');
    $pdf->AddPage();
    $pdf->setFont("arial",'',8);
    $pdf->WriteHTML($data);
    $pdf->Output("outstanding.pdf","I"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T18:30:39.387

用作`L`构造函数参数应该可以正常工作。不要乱搞类内部。

这是我唯一的代码，它工作正常。尝试使用最新版本：[HTML2PDF](http://sourceforge.net/projects/phphtml2pdf/files/release/)。

```
// convert to PDF
require_once('../../vendor/html2pdf_v4.03/html2pdf.class.php');
try
{
    $html2pdf = new HTML2PDF('L', 'A4', 'en');
    $html2pdf->setDefaultFont('Arial');
    $html2pdf->writeHTML($html, false);
    $html2pdf->Output('output.pdf', 'D');
}
catch(HTML2PDF_exception $e) {
    echo $e;
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T03:10:32.227

Or you can add orientation on tag.

```
<page orientation="landscape" format="A5" > Landscape </page> 
```

Check out [http://demo.html2pdf.fr/examples/pdf/exemple04.pdf](http://web.archive.org/web/20170516180956/http://demo.html2pdf.fr/examples/pdf/exemple04.pdf) for more example.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-22T18:00:09.213

这个解决方案也很好，它在文档中：

```
var element = document.getElementById('element-to-print');
var opt = {
  margin:       1,
  filename:     'myfile.pdf',
  image:        { type: 'jpeg', quality: 0.98 },
  html2canvas:  { scale: 2 },
  jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
};

// New Promise-based usage:
html2pdf().set(opt).from(element).save();

// Old monolithic-style usage:
html2pdf(element, opt); 
```

# c - C 编译器警告

> ID：15084330
> 
> 赞同：2
> 
> 时间：2013-02-26T08:16:09.330
> 
> 标签：c

我有一个非常普遍的问题，当我尝试将字符数组写入文件时，我将代码编写为

```
fwrite(array[10],1,10,file_ptr) 
```

编译器发出警告`argument 1 makes from integer to pointer without a cast.`

然后我将这一行修改为

```
fwrite(&array[10],1,10,file_ptr) 
```

并且警告现在不再出现。

问题：编译器如何区分地址和值？如果 at 的值`array[10]`类似于正确的地址怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:18:42.177

如果你有一个十个字符的数组，即

```
char array[10]; 
```

然后做`array[10]`访问该数组的*第十一个*元素。

只需传递数组变量，它就像一个指针：

```
fwrite(array, 1, 10, file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:18:35.800

C 是一种*静态类型*语言。每当你写

```
char array[100]; 
```

你告诉 C 编译器这`array`是一个 100 个字符的数组。然后，它知道那`array[10]`是一个字符，那`&array[10]`是一个指向字符 (a `char *`) 的指针。

`fwrite`但是，它被定义为将 a`const void *`作为其第一个参数，即一个无类型指针。如果你传递了一些不是指针的东西，编译器就会知道这一点并会抱怨。

您的 C 编译器不会尝试根据某事物的值“猜测”某事物的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:21:25.717

的签名`fwrite()`是：`fwrite(const void *ptr, size_t size, size_t count, FILE *fptr)`。

`fwrite()`期待一个地址（或一个保存地址的指针变量，也就是指针）而不是一个字符，但是， `a[10]`是一个字符，而不是一个指针。这是警告的原因！

`&a[10]` **是**一个地址，有效地适合作为 的第一个参数`fwrite()`。因此不会引发任何警告！

* * *

它如何保存信息是在它的词法分析器+解析器组合和语义分析器中的一个名为“符号表”的表中。

-- 修改问题后 --

`fwrite(&array[10],1,10,file_ptr)`<- argument-1 被解释为从第 11 个位置开始的字符串`array`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T08:42:30.473

似乎您的印象是`array[10]`指定整个数组 - 它没有。它指定 的第十一个元素`array`，该元素不存在（假设您将其声明为`some_type array[10]`）。

既然你说你想写整个数组，你需要传递 fwrite() 的第一个元素的地址`array`，这恰好是`array`（或`&array[0]`），因为在 C 中，当在表达式中使用时数组的名称，是其第一个元素的地址（`sizeof`运算符除外）。

编译器具有有关数组类型和元素类型的完整信息，因此它可以检测您何时`int`在需要指针的地方编写类型表达式。

有一种方法可以 fwrite() 一个完整的数组，与大小和元素类型无关，只需使用数组标识符：

```
fwrite (array, sizeof *array, sizeof array/sizeof *array, file); 
```

其中`sizeof *array`计算元素大小并`sizeof array/sizeof *array`计算数组中元素的数量。请注意，这**仅**适用于数组，不适用于指针。同样可以实现

```
fwrite (array, sizeof array, 1, file); 
```

或者

```
fwrite (array, 1, sizeof array, file); 
```

这主要是您喜欢的风格问题；它们都是等效的，并且将以相同的速度执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:01:56.423

> 如果 array[10] 的值类似于正确的地址怎么办？

那么您的数组类型将是`int (*)[n]`，而不是`int [n]`。这就是我们有类型系统的原因。

# java - Java- CSV / 删除 csv 文件中的列

> ID：15084337
> 
> 赞同：1
> 
> 时间：2013-02-26T08:16:30.353
> 
> 标签：java, csv, fileutils

我尝试在 Java 中删除 csv 文件中的列。

例如，我有这个 csv 文件

```
ID   name1   name2   name3
1    hello   hell    hel
2    try     tr      t
3    browser bro     br 
```

我想要在下一个操作之后：（删除 csvFile，2）它将是：

```
ID   name1   name3
1    hello   hel
2    try     t
3    browser br 
```

我发现只有涉及行而不是列的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:19:12.853

删除 CSV 文件中的列的唯一方法是删除整个文件中的标题和该列的信息，即文件的每一行。即使您使用第三方库，它也会在内部执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-15T20:14:05.303

读入每一行的每一列值，并只写出所需的列，同时跳过不需要的列值。

# *使用Apache Commons CSV*库的示例应用程序

这是一个示例应用程序，演示了使用[*Apache Commons CSV*](https://commons.apache.org/proper/commons-csv/)读取输入文件，然后写入输出文件，跳过不需要的列值。

请注意使用 try-with-resources 语法来自动关闭我们的文件读取器和写入器对象。请参阅[Oracle 教程](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)是指定义[逗号分隔值 (CSV)](https://en.wikipedia.org/wiki/Comma-separated_values)格式的书面标准。

制作一个名为`input.csv`.

```
ID,name1,name2,name3
1,hello,hell,hel
2,try,tr,t
3,browser,ro,br 
```

Java 应用程序。

```
package work.basil.example;

import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.apache.commons.csv.CSVRecord;

import java.io.BufferedReader;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.InvalidPathException;
import java.nio.file.Path;
import java.nio.file.Paths;

public class App
{
    public static void main ( String[] args )
    {
        System.out.println ( "Hello World!" );
        App app = new App ();
        app.demo ();
    }

    private void demo ( )
    {
        try
        {
            // Read CSV file.
            Path pathInput = Paths.get ( "/Users/basilbourque/input.csv" );
            Path pathOutput = Paths.get ( "/Users/basilbourque/output.csv" );
            try (
                    final BufferedReader reader = Files.newBufferedReader ( pathInput , StandardCharsets.UTF_8 ) ;
                    final CSVPrinter printer = CSVFormat.RFC4180.withHeader ( "ID" , "name1" , "name3" ).print ( pathOutput , StandardCharsets.UTF_8 ) ;
            )
            {
                Iterable < CSVRecord > records = CSVFormat.RFC4180.withFirstRecordAsHeader ().parse ( reader );
                // We expect these headers: ID,name1,name2,name3
                for ( CSVRecord record : records )
                {
                    // Read.
                    Integer id = Integer.valueOf ( record.get ( "ID" ) );
                    String name1 = record.get ( "name1" );
                    String name2 = record.get ( "name2" );
                    String name3 = record.get ( "name3" );
                    System.out.println ( "id: " + id + " | name1: " + name1 + " | name2: " + name2 + " | name3: " + name3 );

                    // Write.
                    printer.printRecord ( id , name1 , name3 );
                }
            }
        } catch ( InvalidPathException e )
        {
            e.printStackTrace ();
        } catch ( IOException e )
        {
            e.printStackTrace ();
        }
    }
} 
```

控制台输出。

> 编号：1 | 姓名1：你好| name2：地狱 | 名称3：赫尔
> 
> 编号：2 | 名称1：尝试| 名称2：tr | 名称3：t
> 
> 编号：3 | name1: 浏览器 | name2: 罗 | 名称3：br

生成的文件名为`output.csv`.

```
ID,name1,name3
1,hello,hel
2,try,t
3,browser,br 
```

# actionscript-3 - 共享对象位置

> ID：15084338
> 
> 赞同：4
> 
> 时间：2013-02-26T08:16:32.207
> 
> 标签：actionscript-3, shared-objects

我正在使用此方法将共享对象保存在特定位置，但我无法提供路径

```
SharedObject.getLocal("save","how to give path here for window"); 
```

这给出了以下错误

```
Error: Error #2130: Unable to flush SharedObject.
at Error$/throwError()
at flash.net::SharedObject/flush()
at OnlineDiagramEditor/SaveData_mouseDownHandler()[C:\Users\ruchidod\Adobe Flash Builder 4.6\OnlineDiagramEditor\src\OnlineDiagramEditor.mxml:3240]
at OnlineDiagramEditor/__SaveData_mouseDown()[C:\Users\ruchidod\Adobe Flash Builder 4.6\OnlineDiagramEditor\src\OnlineDiagramEditor.mxml:3522]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
at mx.managers::SystemManager/mouseEventHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2918] 
```

有时它会给

```
Error: Error #2134: Cannot create SharedObject.
at flash.net::SharedObject$/getLocal()
at OnlineDiagramEditor/SaveData_mouseDownHandler()[C:\Users\ruchidod\Adobe Flash Builder 4.6\OnlineDiagramEditor\src\OnlineDiagramEditor.mxml:3236]
at OnlineDiagramEditor/__SaveData_mouseDown()[C:\Users\ruchidod\Adobe Flash Builder 4.6\OnlineDiagramEditor\src\OnlineDiagramEditor.mxml:3522]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
at mx.managers::SystemManager/mouseEventHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2918] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:37:14.623

SharedObjects 会自动保存在预定义的位置，它们不是跨域的，这意味着每个域只能读取自己的 SO。

这`localPath`只是一个参数，它定义了 Flash 播放器应将 SO 保存在预定义位置的哪个子文件夹中。默认情况下，这指的是保存 SO 本身的 SWF。

> `localPath: String [optional]`- 一个字符串，它指定创建共享对象的 SWF 文件的完整或部分路径，并确定共享对象在本地存储的位置。默认值为完整路径。

还：

> 尽管该`localPath`参数是可选的，但您应该考虑一下它的使用，尤其是在其他 SWF 文件需要访问共享对象时。如果共享对象中的数据特定于一个不会移动到另一个位置的 SWF 文件，则使用默认值是有意义的。如果其他 SWF 文件需要访问共享对象，或者创建共享对象的 SWF 文件稍后将被移动，则此参数的值会影响任何 SWF 文件是否能够访问共享对象。例如，如果您创建一个共享对象，并将 localPath 设置为 SWF 文件的完整路径的默认值，则没有其他 SWF 文件可以访问该共享对象。如果您稍后将原始 SWF 文件移动到另一个位置，则即使该 SWF 文件也无法访问已存储在共享对象中的数据。

因此，如果您*在同一个域上*有多个 SWF需要访问同一个 SO，则需要`getLocal()`为每个 SWF 提供相同的路径。

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001508.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001508.html)

* * *

**例如：**

在 Windows 中，SO 存储在`%APPDATA%\Macromedia\Flash Player\#SharedObjects\`.

这是您的用户的子文件夹，例如`5D3RT21F`.

然后我们有一个生成 SO 文件的域的子文件夹，例如`www.flickr.com`.

然后是几个子文件夹来反映域上 SWF 的相对路径，比如`\apps\slideshow\show.swf\`，你可以在这里找到 SO 文件。

但是，如果您指定`/`( *root* )，`localPath`那么您将直接在其中找到 SO 文件，`www.flickr.com`并且同一域上的其他 SWF 将自由访问它。

# c# - 为什么 Guid 不是 c# 中的对象？

> ID：15084340
> 
> 赞同：5
> 
> 时间：2013-02-26T08:16:40.620
> 
> 标签：c#, reflection, casting, expression-trees

我刚刚得到以下异常，这似乎表明它`Guid`不是一个对象。

> “System.Guid”类型的表达式不能用于返回类型“System.Object”

怎么`Guid`不是对象？

编译器是如何解决这个问题的？当类型不是对象时，必须有一些东西可以让我在运行时检测到，如果是这样，那会是什么？

====================编辑附加信息====================

```
Expression.Lambda<Func<object>>(SomeExpression) 
```

SomeExpression 可以是一个 Guid 的常量值，这很重要。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T08:24:09.350

```
Expression.Lambda<Func<object>>(SomeExpression) 
```

这里的问题是您错误地使用了表达式树。尽管盒子操作在 C# 中是隐式的，但它仍然存在。它**并不**隐含在表达式树中。以下应该解决它：

```
Expression.Lambda<Func<object>>(
    Expression.Convert(SomeExpression, typeof(object)) 
```

您还可以检查`SomeExpression.Type.IsValueType`以决定是否添加此额外的显式转换。

# android - Apk 扩展文件 - 找不到资源

> ID：15084341
> 
> 赞同：1
> 
> 时间：2013-02-26T08:16:46.693
> 
> 标签：android, expansion

我已经在 sdk 中导入了 google 给出的示例应用程序。

我的项目中有大约 60 张图片，出于测试目的，我制作了一个 zip 文件夹并将其重命名，`main.2.com.abc.ss.obb.`以便我可以使用这个 .obb 文件进行测试？这是正确的方法吗？

现在我还没有在我的控制台中上传 sdk 中给出的示例应用程序进行测试，在此之前我想在设备上测试它，有什么方法可以测试它吗？

当我刚刚运行该应用程序时，它显示“未找到下载失败的资源”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:21:46.997

您可以手动将扩展文件移动到设备，例如使用`adb push`.

它必须转到目录中的 SD 卡：`Android/obb/your.package.name/`. 假设你的包名是`com.abc.ss`一个类似于

```
adb push main.2.com.abc.ss.obb /sdcard/Android/obb/com.abc.ss/main.2.com.abc.ss.obb 
```

会成功的。sdcard 的路径可能因设备和安卓版本而异。

# javascript - jQuery自动完成不发送任何请求

> ID：15084343
> 
> 赞同：2
> 
> 时间：2013-02-26T08:16:58.043
> 
> 标签：javascript, jquery, autocomplete

我已经创建了许多自动完成功能，从来没有出现过问题。这一次，我尝试在现有页面中插入一个自动完成功能（非常复杂并且有很多 javascript 调用）

我的代码很简单：

```
$('#named_invitees_0_user_id').autocomplete({
  source: 'www.bidon.com'
}); 
```

我尝试过了 ：

*   在 $(document).ready() 函数中为这个 javascript 充电
*   在页面加载时不收取此 javascript，然后在 Firebug 控制台中执行之前的代码
*   为自动完成添加一些参数（minLength、disabled、delay、beforeSend、...）
*   在源上设置数组

在这两种情况下，我的输入“理解”我的自动完成功能，因为它需要一些自动完成特定的属性

```
<input id="named_invitees_0_user_id" name="named_invitees[0][user_id]" type="text" value="aaaa" autocomplete="off" class="ac_input"> 
```

但是当我在我的输入上写一些东西（关于 Firebug 网络活动）时，永远不会发送任何请求。我认为页面上已经存在的一些 javascript 正在跟踪此查询的控制，但我不知道它可能是什么。

你呢 ？

编辑：

感谢您的回复。我听从你的建议：

*   尝试将数组设置为“源”：不会改变任何东西
*   删除此页面的所有 JS：仅加载了 jQuery-1.4.3 和 jQuery-ui-1.8.20：没有任何改变
*   将 minLength 的值更改为 1 ：不会改变任何东西
*   检查源 url 是否返回 JSON：已确认
*   检查源网址是否在我的网站名称空间中：已确认

编辑2：

发现问题！

某处有一个隐藏的 JS 代码......一个旧的“自动完成”jquery 包含。结果：定义了 2 个自动完成。我删除了这个隐藏的代码，一切正常！

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:24:49.330

确保您的源输出正确的 json。

检查[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)以获取文档和示例代码

这是一个例子：

```
 $( "#named_invitees_0_user_id" ).autocomplete({
      source: "search.php",
      minLength: 2
    }); 
```

在源之后使用“：”！

# plugins - 插件和对话框在一起

> ID：15084352
> 
> 赞同：1
> 
> 时间：2013-02-26T08:17:47.137
> 
> 标签：plugins, dynamics-crm-2011

如果我使用对话框来创建实体的实例，它会触发注册到该消息的插件（即*Create* on *EntityA*）吗？

如果没有，我如何将该插件链接到该消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:36:58.983

是的，无论消息来源如何，插件都会触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:59:22.927

您可以安全地使用该插件。只要您正确注册它，它就会捕获发送的消息。

实际上，该插件将对以下事件做出反应。

*   用户从 GUI 创建一个实例（一条记录）。
*   通过工作流创建实例。
*   通过对话框创建实例。
*   通过外部程序的代码创建实例。
*   *通过...任何东西*创建实例。

# java - java.lang.SecurityException：uid 10034 没有为策略 #3 拥有的活动管理员

> ID：15084356
> 
> 赞同：2
> 
> 时间：2013-02-26T08:18:15.563
> 
> 标签：java, android

我最近创建了一个锁屏小部件应用程序。它总是有例外：

```
（ java.lang.SecurityException: No active admin owned by uid 10034 for policy #3） 
```

我尝试了很多方法，都无法消除异常。当条件成立时，我打开活动来实现锁屏的目的。

```
public class tempActivity extends Activity {
    private static final String TAG = "tempActivity"; 
    private DevicePolicyManager policyManager;
    private ComponentName componentName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.temp);
        Log.e(TAG, "Activity created~");
        policyManager = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
        componentName = new ComponentName(this, AdminReceiver.class);
        mylock();
    }

    private void mylock() {
        boolean active = policyManager.isAdminActive(componentName);
        if (!active) { // Without permission
            Log.e(TAG, "No authority~");
            activeManage(); // To get access
            policyManager.lockNow(); // And lock screen
        } else {
            Log.e(TAG, "Has authority");
            policyManager.lockNow(); // lock screen directly
        }
        this.finish();
    }

    private void activeManage() {
        Log.e(TAG, "activeManage");
        Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, componentName);
        intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "developers：liushuaikobe");
        startActivityForResult(intent, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T06:26:43.450

关键是当设备管理员未激活时，您的提示调用 (ACTION_ADD_DEVICE_ADMIN) 仅确保向用户显示激活意图。如果他或她选择不激活（这很有可能），下一行中的 lock 命令将失败并给出您现在遇到的错误。所以，基本上你只能提示用户激活设备管理员，而不是强制他们。删除 if not active 块中的 lockNow 调用以避免错误。希望这可以帮助。-SB

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T09:22:15.440

尝试：

```
if(Build.VERSION.SDK_INT > 8){
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
        } 
```

# php - 将受保护页面仅应用于页面类别中的 1 个页面

> ID：15084360
> 
> 赞同：0
> 
> 时间：2013-02-26T08:18:20.030
> 
> 标签：php, wordpress

我正在尝试使子页面（缺少更好的术语）受密码保护。这个子页面是一组页面的一部分，这些页面在我们的 wordpress 网站上有一个子导航。

在页面下，我们有：

*   参展商
    *   谁应该参展
    *   支付
    *   成本核算
    *   参展商区（这是我试图设置密码保护的页面）

当我添加密码时，它会使整个参展商页面块密码保护，如果我删除密码，它会删除块中的所有密码并将它们全部公开。

有没有办法让我只向那个 1 子页面添加密码？我正在使用 Wordpress 3.5.1 并且还安装了一个插件（[受保护页面的多个密码](http://wordpress.org/extend/plugins/baw-multiple-pass-for-protected-pages/installation/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:53:01.417

插件下方有一个复选框，需要勾选以排除父页面或链接页面将密码应用于这些单独的页面。

# jquery - Jquery - 如何区分具有相同类的多个按钮

> ID：15084362
> 
> 赞同：0
> 
> 时间：2013-02-26T08:18:34.243
> 
> 标签：jquery, html, css

我正在构建一个带有框的网站，该框有一个设置按钮，可以触发框上的向下滑动效果。

按钮和向下滑动框必须由一个类生成，而不是一个 id（就像现在一样），以使我的代码不那么复杂和简短。

最终它将是几个按钮（btn1、btn 2、btn3 等）和框（box1、box2、box3 等），所以为了缩短我的 jQuery 代码，我想要一个单独触发每个按钮而不是全部触发的整体代码同时。它需要由一个类触发，因为我正在计划一些 php，用户将能够在其中添加一个小部件。

这是我的例子：[http ://www.danieldoktor.dk/test/test.html](http://www.danieldoktor.dk/test/test.html)

我的代码是这样的：

HTML

```
<div class="lists">
        <header class="box_header" id="box1">
            <h1>HEADER 1</h1>
            <div class="setting" id="btn1"></div>
            </header>
 </div>

 <div class="lists">
        <header class="box_header" id="box2">
            <h1>HEADER 2</h1>
            <div class="setting" id="btn2"></div>
            </header>
 </div> 
```

jQuery

```
// widget 1

  $("#btn1").click(function () { 
    if(!$("#box1").hasClass('header-down')){
        $("#box1").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }

}); 

$(document).click(function() {
    if($("#box1").hasClass('header-down')){
        $("#box1").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
}
});

$("#box1").click(function(e) {
    e.stopPropagation(); // This is the preferred method.
           // This should not be used unless you do not want
                         // any click events registering inside the div
});

 // widget 2

  $("#btn2").click(function () { 
    if(!$("#box2").hasClass('header-down')){
        $("#box2").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $("#box2").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }

}); 

$(document).click(function() {
    if($("#box2").hasClass('header-down')){
        $("#box2").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
}
});

$("#box2").click(function(e) {
    e.stopPropagation(); // This is the preferred method.
           // This should not be used unless you do not want
                         // any click events registering inside the div
}); 
```

您将如何使用类而不是 id 构建整体脚本，并且仍然将每个类控制为唯一的 id？请参阅这个解释我想要什么的 psydo 类：

```
// widget overall

      $(".someBtnClass").click(function () { 
        if(!$(".someBoxClass").hasClass('header-down')){
            $(".someBoxClass").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
        }
        else{
            $(".someBoxClass").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
        }

    }); 

    $(document).click(function() {
        if($(".someBoxClass").hasClass('header-down')){
            $(".someBoxClass").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }
    });

    $(".someBoxClass").click(function(e) {
        e.stopPropagation(); // This is the preferred method.
               // This should not be used unless you do not want
                             // any click events registering inside the div
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:30:56.487

检查 jQuery.each [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

您可以使用类作为选择器绑定每个按钮上的点击事件

```
$(".some-class").each(function(){
    $(this).on("click", function(){});
}); 
```

诀窍是 jQuery`.each()`将确保`this`函数内部是 DOM 节点。

# python - Django，sleep() 暂停所有进程，但前提是没有 GET 参数？

> ID：15084367
> 
> 赞同：6
> 
> 时间：2013-02-26T08:18:40.333
> 
> 标签：python, django, sleep

使用 Django（由 Webfaction 托管），我有以下代码

```
import time
def my_function(request):
    time.sleep(10)
    return HttpResponse("Done") 
```

当我访问我的网址 www.mysite.com 时，这是通过 Django 执行的

我输入了两次网址，紧随其后。在我看来，这两个都应该在 10 秒后完成。但是，第二个调用等待第一个调用并在 20 秒后完成。

但是，如果我输入一些虚拟 GET 参数，www.mysite.com?dummy=1 和 www.mysite.com?dummy=2，那么它们都会在 10 秒后完成。因此，它们可以同时运行。

就好像 sleep() 的范围在某种程度上是全球性的？也许输入参数会使它们作为不同的进程而不是相同的进程运行？？？

它由 Webfaction 托管。httpd.conf 有：

```
KeepAlive Off
Listen 30961
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5 
```

我确实需要能够使用 sleep() 并相信它不会停止一切。那么，发生了什么以及如何解决它？

编辑：Webfaction 使用 Apache 运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T09:12:58.617

正如 Gjordis 指出的那样， sleep 将暂停当前线程。我看过 Webfaction ，看起来他们正在使用 WSGI 来运行 Django 的服务实例。这意味着，每次收到请求时，Apache 都会查看当前正在运行的工作进程（即每个运行 Django 实例的进程）的数量。如果没有/要查看，它将产生额外的工作人员并将请求交给他们。

这是我认为在您的情况下发生的事情：

*   对资源 A 的第一个 GET 请求进来。Apache 使用正在运行的工作人员（或启动一个新工作人员）
*   工人睡了 10 秒
*   在此期间，出现了对资源 A 的新请求。Apache 看到它正在请求相同的资源并将其发送给与请求 A 相同的工作人员。我想这里的假设是最近处理对特定资源的请求的工作人员工作人员更有可能缓存/预处理/任何信息，以便它可以更快地处理此请求
*   这会导致 20 秒的阻塞，因为只有等待 2 次 10 秒的工作人员

这种行为在 99% 的情况下都是完全有意义的，因此默认情况下这样做是合乎逻辑的。

但是，如果您更改第二个请求的请求资源（通过添加 GET 参数），Apache 将假定这是一个不同的资源并将启动另一个工作程序（因为第一个工作程序已经“忙碌”（Apache 无法知道您在没有做任何艰苦的工作）。由于现在有两个工人，两个工人都在等待 10 秒，因此总时间下降到 10 秒。

* * *

此外，我认为您的设计有**问题**。几乎没有我能想到的不尽可能快地响应 HTTP 请求的情况。毕竟，你想在最短的时间内处理尽可能多的请求，所以睡 10 秒是你能做的最适得其反的事情。我建议您创建一个新问题并说明您要实现的实际目标。我很确定有一个更明智的解决方案！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T08:24:18.450

假设您只使用 运行您的 Django-server `run()`，默认情况下这会创建一个单线程服务器。如果您在单线程进程上使用睡眠，则整个应用程序会冻结该睡眠时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T20:34:43.397

可能只是您的浏览器正在排队等待仅在第一个请求完成后才执行的第二个请求。如果您在同一个浏览器中打开您的 URL，请尝试使用两个不同的浏览器（例如 Firefox 和 Chrome），或者尝试使用`wget`or`curl`代替命令行执行请求。

# php - PHP后台作业不显示结果

> ID：15084370
> 
> 赞同：2
> 
> 时间：2013-02-26T08:18:47.500
> 
> 标签：php, background, jobs

我对如何使用 PHP 创建在后台运行的作业进行了大量研究。

```
 <?php
   ignore_user_abort(true); // run script in background 
   set_time_limit(0); // run script forever 

   // get the size of the output
   ob_start();
   include_once '';//many includes
   //$contentLength = ob_get_length();
   // these headers tell the browser to close the connection
   // once all content has been transmitted
   //header("Content-Length: $contentLength");
   header('Connection: close');
  // flush all output
  ob_end_flush();
  ob_flush();
  flush();

  // close current session
  if (session_id()) session_write_close();

 //lot of code, fetch query from DB with millions records and do calculations

  ?> 
```

当我使用 header("Content-Length: $contentLength"); 该脚本不返回任何内容。当我评论它时，我得到了数千个使用限制的结果。如果我想检索所有数百万服务器在 3-4 分钟后停止响应

我只需要获得一个庞大的统计报告，并且不想让用户收到消息达到最大执行时间。我不想提高时间执行限制，因为限制是未知的。最多可能需要一个小时。我需要它在后台运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:28:25.653

我的方法是在片段中处理报告，即当时 10000 行。将每个计算的部分保存为一个文件，然后在输出之前合并所有文件。您需要通过 Ajax 调用处理/创建片段功能。这样，您可以创建一种用户体验，但在服务器上创建多个任务。然后，您还可以显示进度，以便用户知道发生了什么，您还可以检查它是否已经翻倒。

# java - 如何创造…… 像java函数中的输出流？

> ID：15084372
> 
> 赞同：0
> 
> 时间：2013-02-26T08:18:48.070
> 
> 标签：java

我想解决以下问题：我有一个带有一些`JTextArea`. 而且我也在写我自己的课，让我们称之为`Foo`。

实际上，我所有的计算都在 GUI 类中。他们只是使用s.th。喜欢`myText.append(...)`将一些输出写入GUI。

现在我想把所有的计算都放到我的新类`Foo`中。**问题**：如何创建一个方法，该方法`JTextArea`从 GUI 获取作为输入，然后像以前一样使用它向其中写入一些输出文本。我不想把它作为方法的返回值！

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:27:45.283

您需要的是一个映射器或适配器，即接受来自一个接口的方法并将它们转换为另一个接口的方法调用的东西。在您的情况下，我建议使用`Writer`over`OutputStream`来避免所有编码问题。试试这个代码：

```
public Foo extends Writer {
    private JTextArea textArea;

    public Foo( JTextArea textArea ) {
        this.textArea = textArea;
    }

    public void write(char cbuf[], int off, int len) throws IOException {
        String text = new String( cbuff, off, len );
        textArea.append( text );
    }

    public void close() { }
    public void flush() { }
} 
```

如果您真的需要`OutputStream`，请查看在`OutputStreamWriter`字节和 Unicode 字符之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:25:19.453

像这样的东西...

```
public class Foo {
    public void writeInfoToTextArea(JTextArea textArea /*, other parms here */) {
        textArea.setText(...);
    }
} 
```

# sql-server - 如何迭代与 SQL Server 的 Select 语句连接的字符串

> ID：15084377
> 
> 赞同：1
> 
> 时间：2013-02-26T08:19:06.023
> 
> 标签：sql-server, select, loops, string-concatenation

这是我的代码：

```
SELECT 'Fields 1: ' + COLUMN_NAME FROM information_schema.columns WHERE table_Name = 'SystemDefined' and table_schema = 'schemaAsset' 
```

输出是：

```
Fields 1: Asset_No
Fields 1: AssetCategory
Fields 1: AssetClassification
Fields 1: PurchaseType
Fields 1: Department
Fields 1: RespPerson
Fields 1: Status
Fields 1: Location 
```

我希望字符串迭代，以便输出为：

```
Fields 1: Asset_No
Fields 2: AssetCategory
Fields 3: AssetClassification
Fields 4: PurchaseType
Fields 5: Department
Fields 6: RespPerson
Fields 7: Status
Fields 8: Location 
```

我可以使用什么算法使这个输出成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:29:48.607

在 SQL-Server 2005+ 中，您可以使用函数[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

```
SELECT 'Fields '+CAST(ROW_NUMBER() OVER (ORDER BY column_name) AS varchar(5))+': ' + COLUMN_NAME
FROM information_schema.columns 
WHERE table_Name = 'SystemDefined' and table_schema = 'schemaAsset'
ORDER BY COLUMN_NAME 
```

# c++ - 在 Windows 7 中读取注册表行为异常

> ID：15084380
> 
> 赞同：7
> 
> 时间：2013-02-26T08:19:18.863
> 
> 标签：c++, winapi, windows-7

我正在尝试在 C++ 中读取 Windows 7 中注册表的“（默认）”值，以下是我正在使用的代码：

```
string GetSZValueUnique( HKEY openKey, const char* regkey, const char* keyName )
{
   HKEY hKey = 0;
   BYTE data[512] ;
   DWORD szsize = 512 ;
   string value ;

   LONG retValue = RegOpenKeyEx( openKey, regkey, 0, KEY_READ, &hKey ) ;

   if ( retValue == ERROR_SUCCESS )
   {
        LONG retV = RegQueryValueEx( hKey, keyName, 0, 0, data, &szsize ) ;
        if ( retV == ERROR_SUCCESS )
        {
           char* _value = reinterpret_cast<char*>(data) ;
           value = _value ;

           RegCloseKey (hKey) ;
           return value ;
        }
        else
        {
            char msg[512] ;
            FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM,0,(DWORD)retV,0,&msg[0],512,0) ;
            error_string = &msg[0];
            MessageBox( 0, error_string.c_str(), "Query : GetSZValueUnique", 0 );
        }
    }
    else
    {
        char msg[512] ;
        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM,0,(DWORD)retV,0,&msg[0],512,0) ;
        error_string = &msg[0];
        MessageBox( 0, error_string.c_str(), "Open : GetSZValueUnique", 0 );
    }

    RegCloseKey (hKey) ;
    return "" ;
} 
```

**这就是我调用上述函数的方式：**

```
string ts3 = GetSZValueUnique( HKEY_LOCAL_MACHINE, "SOFTWARE\\TeamSpeak 3 Client\\", "" );
if ( !ts3.empty() )
    MessageBox( 0, ts3.c_str(), "GetSZValueUnique", 0 ); 
```

对于某些键，它对某些键不起作用：例如，它适用于“Adobe”、“TrendMicro”、“CheckPoint”、“RegisteredApplications”，但不适用于“7-Zip”、“RTLSetup”、“Sonic”、 “TeamSpeak 3 客户端”

我现在没有想法，有人可以指出什么问题吗？

**编辑：**我已经用“（默认）”值和其他值检查了代码，对于它不工作的键它永远不会超过 *“if (retValue == ERROR_SUCCESS)”* 检查，我总是得到“*指定的文件不是发现*“错误。对于其工作的键，它会通过“*if (retValue == ERROR_SUCCESS)*”检查并返回如果存在的值，如果不存在它只会显示错误消息“*找不到指定的文件*”。

**编辑2：**我再次检查：似乎它适用的键在“软件”下的“Wow6432Node”子键中有相应的克隆......嗯......那么我该如何让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:35:38.183

您可以指定标志::

1.  如果您想访问 Wow6432Node 密钥（即应用程序中的**32 位密钥），则****RegOpenKeyEx**的“ **samDesired** ”参数中的“ **KEY_WOW64_32KEY** ” 。
*******   “ **KEY_WOW64_64KEY** ” 在**RegOpenKeyEx的“** **samDesired** ”参数中，如果您想从您的应用程序访问普通密钥，即**64 位密钥**。******

 ******注意：：@WhozCraig 在带有适当链接的评论中已经清除了您的疑问。如果他回答，请接受他的回答而不是我的回答。******

# database - 用 Matlab 中的另一个子字符串替换数据库记录的子字符串

> ID：15084385
> 
> 赞同：0
> 
> 时间：2013-02-26T08:19:39.393
> 
> 标签：database, matlab, replace, substring

我知道如何更新记录并替换另一个字符串中的子字符串：

```
update(conn,'tableName',{'columnName'},{'value'},'where columName=xx') %update record in database

modifiedStr = strrep(origStr, oldSubstr, newSubstr) %replaces substring with new string in another string. 
```

现在我想混合这两者并更改数据库中记录的子字符串。我们怎么能做到这一点？我想要一个查询来做到这一点。我们可以将两者混合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:38:56.630

如果只处理一列，则不需要 {} 括号。

如果您有一个列名并将其保存在变量 columnName 中，您可以尝试类似的方法：

```
columnName = 'product_id';
whereClause = ['where ',columName,'=',origStr];
modifiedStr = strrep(origStr, oldSubstr, newSubstr);
update(conn,'tableName',columnName,modifiedStr,whereClause); 
```

当然，您不需要使用变量，您可以在更新函数中替换所需的字符串，但我这样做是为了澄清。

# java - 当 JTabbedPane 不再可见时，如何确保 JTabbedPane 的内容收到 ComponentEvent (componentHidden)

> ID：15084387
> 
> 赞同：0
> 
> 时间：2013-02-26T08:19:46.793
> 
> 标签：java, jtabbedpane, jung

我有一个使用 JTabbedPane 来显示几个不同选项卡的应用程序。这些选项卡之一有一个线程正在运行以显示其内容。我已经实现了一个 ComponentListener 以在选项卡不可见时停止线程。I can see the thread becoming active when the tab is selected and stopping when becoming invisible, quite as expected.

如果我在未选择带有线程的选项卡时关闭我的应用程序，那么一切顺利并且应用程序关闭。如果在带有线程的选项卡可见时关闭应用程序，则选项卡不会收到 ComponentEvent，因此线程保持活动状态，我需要手动终止应用程序（使用 Eclipse 控制台上的终止按钮）。

我不喜欢使用 System.exit() 方法来关闭我的应用程序，而是停止所有线程并释放所有窗口。这就像一个魅力，除了这个带有它的线程的标签。

在处理我的窗口或 removeAll() 之前，我已经尝试将 JTabbedPane 设置为不可见。也没有预期的结果。removeAll() 甚至有相反的结果。如果选项卡未处于活动状态，它将收到一个 ComponentEvent 来指示它已变为可见 (componentShown)（实际上，所有选项卡都会依次接收该事件，但没有一个会收到 componentHidden）。

显然，当我通过文件菜单关闭窗口时（我对此有一些控制，并且我已经测试了 removeAll 和 setVisible(false) 方法）以及由于用户单击而释放窗口时，线程都应该停止在窗角的十字架上。

**更新**

我找到了一种方法，使似乎导致问题的线程按照建议作为守护线程运行。然而，这导致了一个意想不到的问题。启动有问题的线程的类是我正在使用的 JUNG 软件包中的 VisRunner 类。它包含一个启动线程的方法“relax”。

```
 @Override
  public void relax() {
      // in case its running
      stop();
      stop = false;
      thread = new Thread(this);
      thread.setPriority(Thread.MIN_PRIORITY);
      thread.start();
 } 
```

我创建了 MyVisRunner 类：

```
import edu.uci.ics.jung.algorithms.layout.util.VisRunner;
import edu.uci.ics.jung.algorithms.util.IterativeContext;

public class MyVisRunner extends VisRunner {

   public MyVisRunner(final IterativeContext process) {
      super(process);
   }

   @Override
   public void relax() {
      // in case it's running
      Log.d("Relaxing");
      stop();
      stop = false;
      thread = new Thread(this);
      thread.setPriority(Thread.MIN_PRIORITY);
      thread.setDaemon(true);
      thread.start();
   }
} 
```

我这样加载松弛器：

```
 visModel = new DefaultVisualizationModel<>(layout);
  visModel.setRelaxer(new MyVisRunner(layout)); 
```

我原以为这可以解决问题，但它只会增加问题。当我现在启动我的软件时，它不会停止，即使有问题的选项卡甚至不可见（选项卡已构建，但不可见）。在这种情况下，甚至没有调用 MyVisRunner 的松弛方法；该线程未在 VisRunner 类的其他任何地方初始化。注释掉 setRelaxer 行将解决这个额外的问题（显然保留原来的问题）。

**更新 2**

我终于解决了这个问题。我没有意识到，当我设置自己的松弛器时，已经有一个松弛器在运行。我已将代码调整为：

```
 visModel = new DefaultVisualizationModel<>(layout);
  visModel.getRelaxer().stop();
  visModel.setRelaxer(new MyVisRunner(layout)); 
```

这解决了额外的问题以及我原来的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:26:52.457

您应该将线程设置为守护线程：

```
myThread.setDaemon(true); 
```

如果没有更多运行的**非守护**线程，虚拟机将终止。

* * *

顺便说一句，您可以`WindowListener`在您`JFrame`的`windowClosing`事件中添加一个。

# email - 在 DTS 作业结束后发送电子邮件

> ID：15084388
> 
> 赞同：0
> 
> 时间：2013-02-26T08:19:50.923
> 
> 标签：email, sql-server-2000, dts

我需要在我的 DTS 结束前发送一封电子邮件，而不会影响正在运行的作业。

我的意思是我不想将发送电子邮件功能放在 DTS 的末尾，但我的想法是在我的 DTS 中的最后一个表更新后发送和发送电子邮件（不使用会影响 DTS 的触发器）交换问题的情况）

我正在考虑在我的 DTS 中最后一个表中的最后一次修改以发送电子邮件，但我真的不知道如何验证最后一次修改......

另外，我有一个日志文件，它报告步骤成功，我想从中读取？

有什么建议么 ？帮助 ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:28:19.773

好吧，我终于自己做到了。

在执行 DTS 的一些步骤后，我创建了一个表并在其中插入了一个表。现在好像没什么影响。

最近通过阅读此表发送了一封电子邮件。

“Bon debut de semaine :)”

# applescript - 仅在 Applescript 完成后继续 Automator 脚本

> ID：15084389
> 
> 赞同：0
> 
> 时间：2013-02-26T08:19:56.183
> 
> 标签：applescript, automator

我正在编写一个带有 Applescript 的小型 Automator 脚本。Applescript 运行一个将一些图像下载到指定文件夹的 shell 脚本。Automator 脚本的下一步是从这些图像生成 PDF。小问题，在图像下载完成之前 PDF 的创建已经开始，所以我得到一个空的 PDF 文件。我怎样才能让 Automator 等到 Applescript 完成下载才能进入下一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:34:54.553

您使用什么 shell 命令进行下载？卷曲？一种方法是在每次下载后向 shell 脚本添加一些内容，例如：

```
curl http://whatever/Your/Url/is/file1.xxx;echo ''>file1.deleteme 
```

然后确保您的 applescript 仅在找到 file1.deleteme 文件并将其删除后才启动 pdf 部分。当我使用 curl 执行此操作时，在完成下载之前它不会生成该空文件。

AS 部分可以从以下内容开始（危险，未经测试）：

```
--within outer loop for each file...
tell application "Finder"
 repeat until exists (pathToDeleteMeFile)--this is built using basename + "deleteme"
  delay 1--one second delay
 end repeat
end tell
--do pdf stuff here for that (each) file 
```

或者，如果您愿意（或者根据您的代码的外观，这是否更有意义：

*为所有*文件执行 shell 脚本，完成后创建一个更通用的 deleteme 文件*，*然后*执行*pdf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:40:25.547

Automator*会*等到运行脚本操作完成。问题是，在没有看到您的代码的情况下，您的 AppleScript 正在使用某种异步下载方法——也许是告诉 Safari？-- 所以脚本在下载实际完成之前完成。使用同步方法，例如上述`curl`（1）的建议，应该可以解决问题。

顺便说一句，使用 Run Script 动作调用`do shell script`有点傻；您可以改用 Run Shell Script。

# ios - 使用theos开发iOS越狱应用

> ID：15084395
> 
> 赞同：1
> 
> 时间：2013-02-26T08:20:12.000
> 
> 标签：ios, makefile, jailbreak, theos

> 刘易斯：helloworld 刘易斯$ make
> 
> 为捆绑 HelloWorld 做好一切...
> 
> 将资源目录复制到包包装器中...
> 
> 正在编译 HelloWorldController.m...
> 
> 正在链接捆绑包 HelloWorld...
> 
> 剥离 HelloWorld...
> 
> 签署 HelloWorld...
> 
> /bin/sh: ldid: 找不到命令

我已经将 ldid 下载到 $THEOS/opt/theos/bin。

为什么make命令输出“ldid: command not found”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T02:33:01.370

将 ldid 下载到 /usr/bin/ 并确保您`chmod +x /usr/bin/ldid`

# iphone - Social.framework 在设备上不起作用

> ID：15084402
> 
> 赞同：2
> 
> 时间：2013-02-26T08:21:07.733
> 
> 标签：iphone, facebook, sharing

我想用 social.framework 在 Facebook 上分享按钮。我做这个：

```
 #import <UIKit/UIKit.h>

    #import <Social/Social.h>

    @interface SocialSharingViewController : UIViewController

    - (IBAction)postToFacebook:(id)sender;

    @end 
```

然后我添加 m。文件：

```
- (IBAction)postToFacebook:(id)sender {
    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
            SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        [controller setInitialText:@"First post from my iPhone app"];
        [self presentViewController:controller animated:YES completion:Nil];        
    }
} 
```

它在模拟器中完美运行，但是当我在我的 iPhone 5 设备上测试它时它不起作用。当我单击按钮 postToFacebook 时，没有任何反应。

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:37:38.227

可能的错误是您的 iphone 5 没有配置任何 fb 帐户。`[SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]`在这种情况下将返回 NO

根据 SLComposeViewController 的[文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html)，isAvailableForServiceType “返回一个布尔值，指示该服务是否可访问并且至少设置了一个帐户...要使该帐户可用，用户必须登录到设备中的社交服务设置。”

*注意：每当您添加 if 条件时，也要使用 else 条件。#编码标准*

# machine-learning - 不平衡数据的特征选择

> ID：15084404
> 
> 赞同：1
> 
> 时间：2013-02-26T08:21:12.827
> 
> 标签：machine-learning, selection

在我的数据集中，目标变量是标称的（只有两种状态），其他都是数字的。数据集高度不平衡。在寻找处理不平衡数据集的解决方案后，我发现了 SMOTE（Synthetic Minority Over-sampling Technique）。应用 SMOTE 算法后数据集的大小会增加（我使用了该算法的 Weka 实现）。

现在我的问题是，在这种不平衡的数据集中，如何确定对目标变量影响最大的重要特征/属性？这种算法有没有可用的实现？

# asp.net - 与 asp.net 通信 Active Directory 用户

> ID：15084405
> 
> 赞同：2
> 
> 时间：2013-02-26T08:21:14.420
> 
> 标签：asp.net, active-directory, forms-authentication

我在我的机器上安装了 VM 播放器，并在里面安装了 windows 2008 标准核心。同样通过命令提示符为特定用户添加用户和组，如下所示，创建用户

```
dsadd user "cn=username,cn=users,dc=myname,dc=ca" -pwd password -disabled no
creating group
dsadd group "cn=groupname,cn=users,dc=myname,dc=ca"
Also added user to the existing group as below,
dsmod group "cn=groupname,cn=users,dc=myname,dc=ca" -addmbr "cn=username,cn=users,dc=myname,dc=ca" 
```

现在我通过我的本地机器中的 asp.net 应用程序连接这些用户，如下所示，Web.config 设置

```
<authentication mode="Forms">
      <forms loginUrl="logon.aspx" name="adAuthCookie" timeout="10" path="/"/>
    </authentication>
    <authorization>
      <deny users="?"/>
      <allow users="*"/>
    </authorization> 
```

身份验证脚本

```
void Login_Click(object sender, EventArgs e)
    {
        string adPath = "LDAP://domainaddress:389/DC=somename,DC=m"; //Path to your LDAP directory server
      LdapAuthentication adAuth = new LdapAuthentication(adPath);
      try
      {

        if(true == adAuth.IsAuthenticated(txtDomain.Text, txtUsername.Text, txtPassword.Text))
        {
            FormsAuthentication.SetAuthCookie(txtUsername.Text.Trim(), false);

            string groups = adAuth.GetGroups();

         //Create the ticket, and add the groups.
         bool isCookiePersistent = chkPersist.Checked;
         FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1,
           txtUsername.Text, DateTime.Now, DateTime.Now.AddMinutes(60), isCookiePersistent, groups);
---------
-------
} 
```

我在字符串组中遇到异常 = adAuth.GetGroups(); 如下“身份验证错误。获取组时出错。用户名不正确或密码错误。”

如果我犯了一些错误，请告诉我，或者请告诉我如何找到相关用户组。

问候桑吉塔

# jquery - 如何在 jQuery Easy UI Datagrid 行对象上触发“onUnselect”事件？

> ID：15084414
> 
> 赞同：0
> 
> 时间：2013-02-26T08:21:53.520
> 
> 标签：jquery, datagrid, jquery-easyui

更改日志说该错误已得到修复，但我仍然无法在 jQuery Easy UI Datagrid 行对象上触发“onUnselect”事件，也无法在“onSelect”上触发。

我正在使用版本 1.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:39:14.197

你可以试试，（它应该工作），如果没有，发布你的编码。

```
$('#dg').datagrid({
    onSelect: function(rowIndex, rowData)
    {

        //your stuff
    },
    onUnselect: function(rowIndex, rowData){

        //your stuff
    },
    onUnselectAll: function(rows){

        //your stuff
    }
}); 
```

确保 datagrid 属性 singleSelect="true"。

# javascript - 如何在另一个标签的鼠标悬停时切换div的可见性

> ID：15084416
> 
> 赞同：0
> 
> 时间：2013-02-26T08:21:59.137
> 
> 标签：javascript, jquery, html, css, jquery-ui

我将尝试尽可能简单，当有人将鼠标悬停在 a 标签上时，我试图在 div 上实现简单的可见性切换，类似于此链接上的四个按钮：

[http://www.bt.com/help/home/](http://www.bt.com/help/home/)

现在的问题是我希望它出现或希望它在标签的鼠标悬停时可见，但是当我隐藏 div 它永远不会回来时，我尝试了多种方法，有些是

```
$("#function").on("mouseover",this, function () {
            $(this).addClass("show");
        })
        $("#function").on("mouseout",this, function () {
            $(this).removeClass("show");
            $(this).addClass("hide");
        }) 
```

另一个是：

```
$("#function").hover(
                  function () {
                    $(this).addClass("hide");
                  },
                  function () {
                    $(this).removeClass("hide");
                  }

        ); 
```

并且

```
$("#butt").on("mouseover", this, function(){
                $(this).find("div#function").show();
                //$("#function").toggleClass("visible");
            });
            $("#butt").on("mouseout", this, function(){
                $(this).find("div#function").hide();
                //$("#function").toggleClass("visible");
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:36:34.080

您应该使用 mouseenter 而不是 mouseover。这是因为当您在元素内移动时会触发 mouseover 事件。转到此处并滚动到底部以检查 mouseover 和 mouseenter 之间的区别。[http://api.jquery.com/mouseenter](http://api.jquery.com/mouseenter)

mouseenter 事件仅在您输入元素但不在元素内移动时触发。

这是您想要的解决方案。它与您提供的网站几乎相似。
JavaScript

```
<script>
$(document).ready(function()
{
    $("#function").mouseenter(function(event)
    {
        event.stopPropagation()
        $(this).addClass("show");
    }).mouseleave(function(event)
    {
        event.stopPropagation()
        $(this).removeClass("show");
    })
});
</script> 
```

风格

```
<style>    
.functionBlock { width:200px; height:200px; border:1px solid #CCC; padding:15px;}
.functionBlock ul { visibility: hidden}
.functionBlock.show ul { visibility: visible;}
</style> 
```

HTML

```
<div id="function" class="functionBlock">
    <h5>Demo </h5>
    <ul>
        <li>APPLE</li>
        <li>SAMSUNG</li>
    </ul>
</div> 
```

jsFiddle 示例[http://jsfiddle.net/TAZmt/1/](http://jsfiddle.net/TAZmt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:50:27.257

你在这里不需要Javascript。仅使用 CSS 就可以做到这一点

HTML：

```
<div class="panel">
    <div class="teaser"><img src="http://lorempixel.com/300/400"/></div>
    <div class="info">
        <ul>
            <li>Go here ...</li>
            <li>Or there ...</li>
        </ul>
    </div>
</div> 
```

CSS：

```
.panel {
    width: 300px;
    height: 400px;
}

.info {
    display: none;
}

.panel:hover .teaser {
    display: none;
}

.panel:hover .info {
    display: block;
} 
```

和[JSFiddle](http://jsfiddle.net/Jn6k7/)玩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:35:43.787

这应该这样做。检查jsfiddle。这里的基本思想是在事件的根div中添加一个类（.shown），`mouseenter`然后这个类使div中的隐藏`<ul>`显示出来。

```
.shown ul{
    display: block !important;
} 
```

[http://jsfiddle.net/28bb8/2/](http://jsfiddle.net/28bb8/2/)

编辑：

做了一些小的 css 更改，以更好地反映您正在寻找的行为，但您必须更改 css 以适应您自己的代码。我希望这有帮助。

```
$("document").ready(function(){
    $(".wrap").hover(
        function () {
            $(this).addClass("shown");
       },
       function () {
           $(this).removeClass("shown");
       }
    );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:27:15.207

我明白了，选择器的细微变化

```
$("#butt")
  .mouseover(function () {
    $("#function").show();
  })
  .mouseout(function () {
    $("#function").hide();
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:38:56.537

```
$("#link").hover(function(){
    $("#DIV").slideToggle();
}); 
```

和 html 是

```
<a href="#" id="link">LINK</a>
<div id="DIV" style="display:none">Your content in it</div> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-26T08:32:20.637

我希望这是您正在寻找的解决方案。

只需将以下代码放在您的`<body>`标签下方：

```
<script type="text/javascript">
function toggle(id) {
   var e = document.getElementById(id);
   if(e.style.display == 'block')
      e.style.display = 'none';
   else
      e.style.display = 'block';
}
</script> 
```

这是一个链接和切换的 div：

```
<a href="javascript: return false();" onmouseover="toggle('toggleme');">
    Mouseover this link to toggle the visibility of #toggleme
</a>
<div id="toggleme">This div is "toggled"</div> 
```

# protocol-buffers - 使用 Google 协议缓冲区时共享合同的最佳做法？

> ID：15084425
> 
> 赞同：4
> 
> 时间：2013-02-26T08:22:44.973
> 
> 标签：protocol-buffers

当使用 Google Protobuffers 作为传输时，在对等应用程序之间共享合同的有效方法是什么？是否出现了任何最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:56:46.673

如果您在不同平台之间进行交流，最好的办法是简单地将 .proto 模式定义放在可访问的地方——可以是文档，也可以是下载。每个平台都可以从那里生成他们的代码。

# android - 不知道为什么在android中执行for语句中的条件

> ID：15084426
> 
> 赞同：1
> 
> 时间：2013-02-26T08:22:47.657
> 
> 标签：android

单击按钮时，“x”值存储在数组 [0] [0] 中。但是在检查方法中，for 循环中的 if 语句都在执行，我不知道为什么条件正在执行。所以我在if语句中放了一个对话框，而我给数组[0][0]给setMessage它打印“x”，但是如果我给数组[i][j]它甚至打印空值i 和 j 值都为零。我不知道是什么问题。

```
package com.example.tictactoe3;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.app.AlertDialog;

public class MainActivity extends Activity {

String array[][]=new String[3][3];

void check(String array[][])
{
    int i=0,j=0;
    for(i=0;i<3;i++)
    {
        for(j=0;j<1;j++)
        {
            if(array[i][j]==array[i][j+1])
            {
                if(array[i][j]==array[i][j+2])
                {
                    AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);

                    dlgAlert.setMessage(array[0][0]);
                    dlgAlert.setTitle("Tic Tac Toe");
                    dlgAlert.setPositiveButton("OK", null);
                    dlgAlert.setCancelable(true);
                    dlgAlert.create().show();
                }
            }
        }
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Button bt1= (Button) findViewById(R.id.button1);
    bt1.setOnClickListener(new View.OnClickListener() {
        boolean value=true;
        public void onClick(View v) {
            // TODO Auto-generated method stub
            bt1.setText("x");
            array[0][0]="x";
            check(array);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:34:11.630

对于字符串，您应该使用比较

```
if (strOne.equals(strTwo)) 
```

或者

```
if (strOne.equalsIgnoreCase(strTwo)) 
```

不使用“==”运算符

所以更换

```
if(array[i][j]==array[i][j+1]) 
```

和

```
if(array[i][j].equalsIgnoreCae(array[i][j+1])) 
```

和

```
if(array[i][j]==array[i][j+2]) 
```

和

```
if(array[i][j].equalsIgnoreCase(array[i][j+2])) 
```

# ios - 添加/编辑/移动自定义 TableViewCell？

> ID：15084427
> 
> 赞同：1
> 
> 时间：2013-02-26T08:22:52.903
> 
> 标签：ios, uitableview, cocoa-touch, uikit, nsmutablearray

**。H

```
IBOutlet UITableView *Table;
NSMutableArray *Currency;
NSArray *Datacell; 
```

** 创建自定义数组

```
Custom *usd = [Custom new];
usd.name = @"USD";
usd.detail = @"United States Dollar";
usd.imageFile = @"usd.jpg";

Custom *eur = [Custom new];
eur.name = @"EUR";
eur.detail = @"Euro Member Countries";
eur.imageFile = @"eur.jpg";

Custom *aud = [Custom new];
aud.name = @"AUD";
aud.detail = @"Australia Dollar";
aud.imageFile = @"AUD.jpg";
Currency = [NSArray arrayWithObjects:usd,eur,aud, nil]; 
```

****覆盖以支持编辑表格视图。******

 **```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
 if (editingStyle == UITableViewCellEditingStyleDelete) {
// Delete the row from the data source

     [Currency removeObjectAtIndex:indexPath.row];
     [Table reloadData];
 [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
 }
 else if (editingStyle == UITableViewCellEditingStyleInsert) {
 // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
 }
 } 
```

**碰撞：**

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent to instance 0x682a0c0' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:13:54.233

您正在将`Currency`对象初始化为`NSArray`

代替

`Currency = [NSArray arrayWithObjects:usd,eur,aud, nil];`

和

```
Currency = [NSMutableArray arrayWithCapacity:3];
[Currency addObject:usd];
[Currency addObject:eur];
[Currency addObject:aud]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:10:41.120

显然，数组货币没有 [Currency removeObjectAtIndex:indexPath.row] 指向的元素；

您已将货币定义为 NSMutableArray 并使用 Currency = [NSArray arrayWithObjects:usd,eur,aud, nil];

使其成为 [NSMutableArray arrayWithObjects:usd,eur,aud, nil];**

# android - android 4.0.3 ScrollingTabContainerView NullPointerException

> ID：15084430
> 
> 赞同：5
> 
> 时间：2013-02-26T08:23:15.010
> 
> 标签：android, nullpointerexception

我们的 Android 应用程序随机崩溃（很难重现该问题）并出现以下堆栈跟踪。当设备的方向从 logcat 日志中从纵向更改为横向时，就会出现这种情况。在 Android 4.0.3 版本的设备上也发现了此问题。所以想检查它是否是 4.0.3 的已知问题？从代码中不确定如何调试此问题，因为堆栈跟踪完全是 Android 平台，不涉及应用程序代码。

```
02-21 17:44:01.761 E/UncaughtException( 3344): java.lang.NullPointerException
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.widget.ScrollingTabContainerView.onItemSelected(ScrollingTabContainerView.java:352)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:882)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.AdapterView.selectionChanged(AdapterView.java:865)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.AdapterView.checkSelectionChanged(AdapterView.java:1017)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.AdapterView.handleDataChanged(AdapterView.java:999)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:179)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.Spinner.onMeasure(Spinner.java:285)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.HorizontalScrollView.measureChildWithMargins(HorizontalScrollView.java:1159)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.HorizontalScrollView.onMeasure(HorizontalScrollView.java:303)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.widget.ScrollingTabContainerView.onMeasure(ScrollingTabContainerView.java:117)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.widget.ActionBarView.onMeasure(ActionBarView.java:878)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.widget.ActionBarContainer.onMeasure(ActionBarContainer.java:173)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.View.measure(View.java:12723)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.os.Looper.loop(Looper.java:137)
02-21 17:44:01.761 E/UncaughtException( 3344):  at android.app.ActivityThread.main(ActivityThread.java:4424)
02-21 17:44:01.761 E/UncaughtException( 3344):  at java.lang.reflect.Method.invokeNative(Native Method)
02-21 17:44:01.761 E/UncaughtException( 3344):  at java.lang.reflect.Method.invoke(Method.java:511)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-21 17:44:01.761 E/UncaughtException( 3344):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-21 17:44:01.761 E/UncaughtException( 3344):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-04T10:42:57.147

我真的不知道这个错误来自哪里。我通过改变来修复它

```
 <item name="android:windowActionBarOverlay">false</item> 
```

进入

```
 <item name="android:windowActionBarOverlay">true</item> 
```

在我的 Android v15 的主要风格中。对于这个 Android 版本，它让我的应用程序变得不那么漂亮了，但这没关系。我希望这只是 4.0.3 的错误，我有 6 台其他 Android 版本的平板电脑运行良好。

# jquery - 如何在 jQuery Datepicker 中计算天数和日期范围？

> ID：15084431
> 
> 赞同：0
> 
> 时间：2013-02-26T08:23:16.377
> 
> 标签：jquery, jquery-ui-datepicker

我正在使用 jQuery 日期选择器。我能够计算两个选定日期之间的天数，但我需要能够选择一个日期范围（选择'fromdate'成为'todate'的'minim'，选择'todate'成为'maxim'从日期'）。我正在使用这段代码：

```
<script type="text/javascript">
$(document).ready(function () { 
var selector = function (dateStr) {
        var d1 = $('.fromdate').datepicker('getDate');
        var d2 = $('.todate').datepicker('getDate');
        var diff = 1;
        if (d1 && d2) {
            diff = diff + Math.floor((d2.getTime() - d1.getTime()) / 86400000); // ms per day
        }
        $('.calculated').val(diff);
        $('.minim').val(d1)
    }
$('.fromdate').datepicker({
                dateFormat : 'yy-mm-dd',
                changeMonth: true,
                changeYear: true,
                minDate: 'minim'
});
$('.todate').datepicker({ 
                dateFormat : 'yy-mm-dd',
                changeMonth: true,
                changeYear: true,
                minDate: 'fromdate'
});
$('.fromdate,.todate').change(selector)
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:51:48.613

看看这个[演示](http://jsfiddle.net/BXMv6/3/)链接，这将帮助您计算两个所选日期之间的天数，并能够选择一个日期范围。

```
$('.fromdate').datepicker().bind("change", function () {
    var minValue = $(this).val();
    minValue = $.datepicker.parseDate("yy-mm-dd", minValue);
    $('.todate').datepicker("option", "minDate", minValue);
    calculate();
});
$('.todate').datepicker().bind("change", function () {
    var maxValue = $(this).val();
    maxValue = $.datepicker.parseDate("yy-mm-dd", maxValue);
    $('.fromdate').datepicker("option", "maxDate", maxValue);
    calculate();
}); 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:17:19.637

感谢 Bojan Kovacevic，我设法解决了我的问题。它是这样的：

```
<script type="text/javascript">
$(document).ready(function () { 
var selector = function (dateStr) {
        var d1 = $('.fromdate').datepicker('getDate');
        var d2 = $('.todate').datepicker('getDate');
        $('.fromdate').datepicker("option", "maxDate",d2); //new line           
        $('.todate').datepicker("option", "minDate",d1); // new line
        var diff = 1;
        if (d1 && d2) {
            diff = diff + Math.floor((d2.getTime() - d1.getTime()) / 86400000);
        }
        $('.calculated').val(diff);
        $('.minim').val(d1)
    }    
$(".fromdate").datepicker({
                dateFormat : 'yy-mm-dd',
                changeMonth: true,
                changeYear: true,
});
$('.todate').datepicker({
                dateFormat : 'yy-mm-dd',
                changeMonth: true,
                changeYear: true,
                minDate: ($(".fromdate").is(":visible") && $(".todate").html() != ""? $('.todate').datepicker('getDate'): 'null'), // new line
});
$('.fromdate,.todate').change(selector)
}); 
```

# visual-studio-2010 - Perforce 插件和 Visual Studio 2010

> ID：15084439
> 
> 赞同：1
> 
> 时间：2013-02-26T08:23:53.427
> 
> 标签：visual-studio-2010, perforce

我使用 Perforce 作为源代码控制。我已经从 perforce 站点安装了最新的 VS 2010 插件。但是，Visual Studio 在关闭之前总是将选定的 scc 插件设置为 None。当我重新打开 VS 2010 时，我需要再次从 None 到 Perforce 选择正确的插件以继续工作。

有什么解决办法吗？

# c# - 获取 Word 中菜单项的宏命令名称

> ID：15084446
> 
> 赞同：2
> 
> 时间：2013-02-26T08:24:15.383
> 
> 标签：c#, vba, ms-word, vsto

我正在使用 VSTO 为 MS Word 2010 开发一个插件。Word 有一个“自定义键盘”对话框：

![MS Word 2010 自定义键盘对话框](../Images/b6a8119f3f0dccc14ab7e406446594f2.png)

“命令”列表包含内置宏命令，每个命令都分配给某个菜单或操作。它们可以通过`Application.Run()`方法从 VSTO 执行。

我需要以“菜单项名称”-“宏命令名称”-“键盘快捷键”的形式获取当前安装的 Word 实例的记录。

到目前为止我尝试了什么：

```
Application.CustomizationContext = Application.NormalTemplate;
foreach (CommandBar bar in Application.CommandBars)
{
    // Name of menu group
    Application.Selection.InsertAfter(bar.NameLocal + "\n");
    foreach (CommandBarControl control in bar.Controls)
    {
        // Human-readable name
        Application.Selection.InsertAfter("\nName:" + control.accName
                   // Broad description
                   + "\nDescription:" + control.DescriptionText
                   // Keyboard shortcut
                   + "\nShortcut:" + control.accKeyboardShortcut);
    }
} 
```

不幸`CommandBarControl`的是不包含宏命令名称字段。我想知道如何收集这些并将它们粘合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:50:14.910

好的，现在是时候回答另一个我的问题了，这个问题已经引起了太多关注。

每个版本的 Microsoft Office 都有一堆 Excel 表格，其中包含 ID、命令名称、默认快捷方式和一些其他信息。这是[2010 版](http://www.microsoft.com/en-us/download/details.aspx?id=6627)的。使用提供的表格，现在很容易获得我们需要的一切：

```
var id = // Obtain from downloaded bundle
var name = // Obtain from downloaded bundle
var control = Application.CommandBars.FindControl(Id:id);
var description = control.DescriptionText;
var caption = control.Caption;
var shortcut = control.accKeyboardShortcut;
var parentControl = control.Parent; 
```

# mysql - 计算损失的月收入

> ID：15084447
> 
> 赞同：2
> 
> 时间：2013-02-26T08:24:17.167
> 
> 标签：mysql, sql

我有 3 张桌子：

```
Hotel {hotelID, hotelName, city}
Room {hotelID, roomNo, price, type}
Booking {hotelID, roomNo, startDate, endDate} 
```

我想找到当月的收入损失（即计算当月每天的收入损失，然后计算总数）

我该怎么做呢？

快速编辑：只需要查找 hotelName = 'Radisson' 的收入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:49:37.227

应该管用：

```
SELECT COALESCE(SUM(r.price), 0) 
    FROM Room AS r INNER JOIN Booking AS b ON r.hotelID = b.hotelID AND r.roomNo = b.roomNo 
    INNER JOIN Hotel AS h ON r.hotelID = h.hotelID 
    WHERE (month(b.startDate) > month(current_date()) OR month(b.endDate) < month(current_date()))
    AND h.hotelName = 'Radisson'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:54:16.650

这是您查询的开始。你懒得放数据，所以我懒得去查找mysql形式的查询......

查看每个房间的数据后 - 如果您愿意，您可以合并为一个总和。这就是您编写查询以确保您正确执行每个步骤的方式

```
select
  ht.hotelid
  ,ht.hotelname
  ,ht.city
  ,rm.roomno
  ,rm.price
  ,rm.type
  ,30 as days -- use your datediff function for month instead of literal 30
  ,30 * rm.price as potential -- use your datediff function instead of literal 30
  ,sum(datediff(day, startdate, enddate)) * rm.price as earned
  --, potential - earned as lost (use the 2 prior columns to calc)      
from hotel ht
join room rm on ht.hotelid = rm.hotelid
left join booking bk on bk.hotelid = rm.hotelid 
   and bk.roomno =bk.roomno 
```

# android - 我想根据我给定的媒体永久更改铃声

> ID：15084449
> 
> 赞同：0
> 
> 时间：2013-02-26T08:24:20.973
> 
> 标签：android

这是代码

```
 File dir = new File(Environment.getExternalStorageDirectory(), "/Audio/MI2.MID");
        Uri Note=Uri.fromFile(dir);

        RingtoneManager.getDefaultType(Note);
        RingtoneManager.isDefault(Note);
        RingtoneManager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_RINGTONE, Note); 
```

但它正在设置我手机的默认铃声..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:23:37.313

你查过其他帖子吗？关于这个话题有几个。在快速搜索中，这个人提出了一些代码和权限的快速提示！[如何以编程方式更改android中的铃声？](https://stackoverflow.com/questions/6182891/how-can-i-change-the-ringtone-in-android-programmatically):)

# android - 为什么 App 旋转后 InputMethodManager.isFullscreen() 不可靠？

> ID：15084451
> 
> 赞同：2
> 
> 时间：2013-02-26T08:24:21.927
> 
> 标签：android, android-softkeyboard

我目前正在开发一个具有 3 步身份验证向导的应用程序。

我需要知道用户是否正在全屏编辑文本，以便我可以关闭键盘而不是继续执行向导中的下一步。

我目前面临一个恼人的问题，即以下代码在活动轮换后返回错误结果。

```
 private boolean isFullscreenInputMode(EditText edit) {
        InputMethodManager imm = (InputMethodManager)edit.getContext().getSystemService( Context.INPUT_METHOD_SERVICE  );
        return imm.isFullscreenMode();
    } 
```

该代码旨在检测键盘是否处于全屏模式以及是否使用 ExtractEditText 进行输入。

如果我的应用程序以横向模式启动并且我继续整个 3 步向导，则此方法将返回 true。如果我沿途旋转我的手机一次，它就会停止工作。

注意：调用不在 onPause 或 onResume 回调方法中执行。正如我从其他帖子中了解到的那样，这些情况可能会导致方法返回错误的值。

或者，是否有另一种方法来检测键盘是否处于全屏模式？

提前致谢！

**编辑为 EditText 视图上的“完成”按钮添加 editorActionListener 代码：**

```
 edit.setOnEditorActionListener( new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction( TextView v, int actionId, KeyEvent event ) {
            if( actionId == EditorInfo.IME_ACTION_DONE && edit.getText().length() >= minKeys ) {

                if( !isFullscreenInputMode(edit) ) {
                    performOkPress( edit, okButton, result );
                }
                else {
                    return false;
                }

                return true;
            }
            return false;
        }

        private void performOkPress( final EditText edit, final Button okButton, final ViewResult result ) {
            if( okButton.isEnabled() ) {
                okPressed( edit, okButton, result );
            }
        }
    } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:29:18.257

当您旋转屏幕时，这意味着您正在将方向从纵向更改为横向，反之亦然.......每次，您的 onCreate 都会被一次又一次地调用。这就是您看到这些错误结果的原因。请尝试在旋转时保存活动状态...希望它有所帮助

# google-app-engine - 将 clientsecret 转换为私钥

> ID：15084452
> 
> 赞同：2
> 
> 时间：2013-02-26T08:24:24.987
> 
> 标签：google-app-engine, sha256, google-cloud-storage

我正在使用 AppEngine 中的 Google Cloud Storage，并尝试使用 POST 表单将文件上传到 GCS。我遇到的问题是签署政策文件所需的步骤。我可以轻松地获取 client_secret，它是`client_secrets.json`API 控制台给我的字符串。但是，为了创建签名，我需要将该字符串转换为`PrivateKey`对象。这是我的代码的样子：

```
//create the policy document and encode it
String policyDocument = ...  //omitted for brevity
String encodedPolicy = Base64.encodeString(policyDocument);

//sign using SHA256 with RSA
String secretKey = ... //I fetch this from client_secrets.json
Signature sig = Signature.getInstance("SHA256withRSA");
sig.initSign(secretKey); //THIS IS THE PROBLEM!  
sig.update(encodedPolicy.getBytes("UTF-8"));        
String signature = new String(Base64.encode(sig.sign()));

//put the values in the request attributes so we can fetch them from a JSP
req.setAttribute("policy", encodedPolicy);
req.setAttribute("signature", signature); 
```

如上所述，我的问题在于

```
sig.initSign(secretKey); //THIS IS THE PROBLEM! 
```

`secretKey`是一个字符串。 `Signature.initSign()`期望 a`PrivateKey`或其后代对象之一。如何将字符串中的字符串转换为`client_secrets.json`可以传递的 PrivateKey（或派生）对象`Signature.initSign`？

任何帮助将不胜感激。谢谢

好的，这就是我现在的位置。我尝试了以下建议，所有文档都敦促我使用从 Google API 控制台下载的 client_secrets.json 文件中的 client_secret，*而不是*服务帐户。此外，我正在尝试构建用户上传的示例，而不是服务帐户。

我在另一个页面上找到了以下代码：

```
public static String signPolicyDocument(String policyDocument, String secret) {     
try {
        Mac mac = Mac.getInstance("HmacSHA256");
        byte[] secretBytes = secret.getBytes();
        SecretKeySpec signingKey = new SecretKeySpec(secretBytes, "HmacSHA256");
        mac.init(signingKey);
        byte[] signedSecretBytes = mac.doFinal(policyDocument.getBytes());          
        return new String(Base64.encode(signedSecretBytes));
    } catch (InvalidKeyException e) {
        throw new RuntimeException(e);
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    } 
```

它让我完成了整个过程……直到我提交结果表格。然后我得到以下响应：

```
The request signature we calculated does not match the signature you provided. Check your Google secret key and signing method. 
```

它在寻找什么签名方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:39:25.943

这是我认为你需要做的：

```
KeyFactory keyFactory = KeyFactory.getInstance("RSA");
PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(keyBytes);
PrivateKey privateKey = keyFactory.generatePrivate(keySpec);
sig.initSign(privateKey); 
```

该`keyBytes`变量应包含一个`byte[]`数组，其中包含您的[服务帐户密钥文件](https://developers.google.com/storage/docs/authentication#service_accounts)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:19:33.500

这个问题的最终答案就像战争游戏的结论一样。正如 WOPR 所说，“一场奇怪的比赛……获胜的唯一方法就是不玩。” 避免签署和策略文档以及所有这些废话，并使用 blobstore。

（见： [https](https://developers.google.com/appengine/docs/java/blobstore/overview#using-blobstore-with-gcs) ://developers.google.com/appengine/docs/java/blobstore/overview#using-blobstore-with-gcs ）

这很容易实现；当您像这样创建临时 blobstore 上传 URL 时：

```
 //open the blobstore service and create the upload url
    BlobstoreService bs = BlobstoreServiceFactory.getBlobstoreService();        
    String uploadUrl = bs.createUploadUrl("/display",
            UploadOptions.Builder.withGoogleStorageBucketName(bucket)); 
```

这种方法的缺点是对象名称将是您无法识别的字符串。您可以打开 blobstore 查看器并在 blobstore 中按文件名查看您的对象，但在 GCS 中，其对象名称将是 gobbledygook。（可能是哈希？随机分配的 ID）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:42:14.683

要将文件从 Appengine 上传到 GCS，您可以使用 blobstore Api。按照将[Blobstore 与 GCS 结合使用](https://developers.google.com/appengine/docs/java/blobstore/overview#using-blobstore-with-gcs)中所述的步骤进行操作。优点是不用担心按键，代码也简单多了。

# excel - 转换来自多个工作表的数据

> ID：15084457
> 
> 赞同：0
> 
> 时间：2013-02-26T08:24:51.643
> 
> 标签：excel, vba

有没有办法将多个工作表中的单元格范围复制到另一个工作表中？例如：

**Sheet1**
苹果
葡萄
桃
樱桃

**Sheet2**
橙
梨
香蕉
蓝莓

**Sheet3**
Shekar
Mahesh
Rao
Gautham

我需要结果

**Sheet4**
樱桃
蓝莓
Gautham

假设我在工作表 1,2 和 3 的 A、B、C 列中有数据，并且我需要在 Sheet4 的 A、B、C 列中显示组合结果。基本上，我需要在 Sheet4 中以三列显示 Sheet 1,2 & 3 中的最后一行项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:18:12.873

试试这个代码：

```
Sub Consolidate()
    Dim rngTarget As Range

    Set rngTarget = Sheets("YourTargetSheet").Range("A1:C1")

    For i = 1 To 36
        rngTarget.Value = Sheets("Sheet" & i).Range("A146:C146").Value
        Set rngTarget = rngTarget.Offset(1)
    Next

End Sub 
```

或者，如果您在 A1 中使用此公式并将其复制 3 列和 36 行，您还将得到结果：

```
=间接（地址（行（），列（），，，“表”&行（）））

```

# sencha-touch - 如何在新视图中将图像显示为 Highslide 弹出窗口？

> ID：15084461
> 
> 赞同：1
> 
> 时间：2013-02-26T08:25:00.167
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

我在 xtype:dataview 中将图像显示为缩略图。我很好奇如何在下一个视图中将点击的图像显示为 Highslide 弹出窗口。有人可以指导我吗？一个示例代码将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:32:16.433

你的意思是一个highslide画廊，下面有缩略图？有许多不同类型的高滑梯。

最好的方法是创建一个带有 vbox 的容器......顶部是一个旋转木马，弹性设置为 0.8，下面的数据视图弹性设置为 0.2。

然后，您可以为两者使用相同的存储，加载数据视图。您的数据视图的点击侦听器将执行轮播的 animateactiveitem [index] ....索引将自动从数据视图中获取。

我最终参考了 Ed SPencer 的 APOD 轮播示例，它首先将商品从商店推入轮播。我将商店同时加载到 dataview 和 carousel 中，并且 animateactiveitem 在点击 dataview 时显示 carousel 的正确幻灯片。

我没有我的笔记本电脑来发布一些示例代码，但也许可以从查看 ed spencer APOD 轮播开始。

希望这可以帮助....

:-)

# vba - Excel VBA中的ExportAsFixedFormat错误的PDF输出大小

> ID：15084462
> 
> 赞同：5
> 
> 时间：2013-02-26T08:25:14.057
> 
> 标签：vba, pdf, excel, pdf-generation, excel-2010

我将 Excel 2010 与 VBA 一起使用。

我有以下代码：

```
mySh.PageSetup.PaperSize = xlPaperLetter
mySh.ExportAsFixedFormat Type:=xlTypePDF, _
    Filename:=filePathTmp, _
    Quality:=xlQualityStandard, IncludeDocProperties:=False, _
    IgnorePrintAreas:=False, OpenAfterPublish:=False 
```

它生成的 PDF 没有错误，但大小不正确。我得到的是 22.26 x 28.80 厘米，而不是我想要的 21.59 x 27.94 厘米。

有任何想法吗 ？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T17:27:29.767

我使用 Excel 2010 并遇到了这个问题。我通过在“文件”选项卡的“打印”部分的 Excel 下拉列表中更改打印机来修复它。我的默认打印机是柯尼卡美能达复印机。我将其更改为本地打印机（实际上并不存在）并且它有效！我现在有返回 8.5x11 PDF 的 VBA 代码！现在我不必使用我们笨重的旧笔记本电脑和旧办公室来获得合适的尺寸。

请注意，选择 Adob​​e PDF 打印机并不能解决问题。只需尝试弄乱不同的打印机选择，或者在计算机的设备和打印机中制作假打印机并使用它。我希望它适用于其他有同样问题的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-13T22:40:44.007

我将打印区域设置在我想要的位置：View-Page Break Preview。然后 File-Print-Scaling = 使工作表适合一页或 File-Print-Page Setup-Fit to：1 页宽 x 1 高。

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T06:03:04.813

我也使用 Excel 2010 并遇到了同样的问题。使用 ExportAsFixedFormat 时，页面不会缩放。据我了解，这与使用文件类型为 pdf 的另存为相同。这意味着您需要缩放您的工作簿以适应您需要的页面。

如果你：

- 打开打印机设置并选择“无缩放”

-页面布局>打印区域>清除打印区域

- 选择视图 > 分页视图

它将显示页面区域。如果您将工作表缩放到此，它将正确使用 ExportAsFixedFormat 保存为 pdf。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T16:24:47.663

我们遇到了同样的问题，并在设备和打印机上更改了默认打印选项：

-控制面板->设备和打印机->单击一次选择打印机。

-鼠标第二键->打印机属性->高级->打印默认值->高级。

- 选择纸张尺寸并单击确定。

为什么不在excel中更改它？因为与 Excel 和运行假脱机的服务之间的权限相关的事情或...

该默认设置使宏正确导出为纸张大小。

如果它对您有用，这要归功于我们的 IT 部门，而不是我 :P

# c# - IT-Hit WebDAV 服务器结账模式和与 MS Office 的交互

> ID：15084463
> 
> 赞同：3
> 
> 时间：2013-02-26T08:25:17.647
> 
> 标签：c#, ms-office, webdav, ithit-webdav-server

我们正在开发一个 Web 应用程序，它将提供一些 WebDAV 功能，为了实现这些功能，我们正在评估用于 .NET 的 IT-Hit 服务器引擎组件。

目的是根据一些内部逻辑，以读写或只读模式给用户某个MS Office文档；我们曾尝试通过 Visual Studio 中的 WebDAV 模板应用程序和在线文档进行调查，但我们还没有找到具体的方法来完成此操作。我们在哪里可以找到更具体的参考资料？

此外，是否可以知道用户何时关闭了 MS Office 应用程序（即 MS Word）并完成了他/她与文档的交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:08:23.323

To make a file read-only you can implement [IMsItem](http://doc3.webdavsystem.com/default.aspx?main=http://doc3.webdavsystem.com/ITHit.WebDAV.Server.MicrosoftExtensions.IMsItem.html) interface on file items. Your IMsItem.GetFileAttributes method implementation must return read-only attribute for a file:

```
public FileAttributes GetFileAttributes()
{
    ...
    if(/*this file is read-only*/)
    {
         return fileSystemInfo.Attributes | FileAttributes.ReadOnly;
    }
    ...
} 
```

Note that this code does not actually protects file from modification, it only marks the file as read-only. If application ignores read-only flag it may be able to overwrite the file. To make sure this does not happen, in your IFile.Write method implementation you must verify if user has rights to modify the file and the file is not read-only. If the file is read-only - throw the exception.

Microsoft Office locks file when opening and unlocks when closing. So when the file is closed the [ILock.Unlock()](http://doc3.webdavsystem.com/default.aspx?main=http://doc3.webdavsystem.com/ITHit.WebDAV.Server.IContent.Write.html) method is called on the server side. Note that in case the connection is lost and the file is not unlocked by MS Office your server implementation usually you will unlock the file automatically after lock expires.

Please also read about [how WebDAV locking works here](http://www.webdavsystem.com/server/documentation/creating_class_2_webdav_server).

# asp.net - 在 wcf 服务中传递 bmp 文件/图像作为参数

> ID：15084465
> 
> 赞同：1
> 
> 时间：2013-02-26T08:25:24.530
> 
> 标签：asp.net, wcf

我正在尝试将 BMP 文件作为 WCF 服务中的参数传递。当 BMP 文件的大小为 350kb 时出现错误。当我传递一个 10-20 kb 的小文件时，它运行良好。

```
The remote server returned an unexpected response: (413) Request Entity Too Large. 

[OperationContract]
byte[] ConvertData(Bitmap bmp); 
```

我试图通过以下链接更改 IIS 设置来解决问题：http: [//blogs.msdn.com/b/jiruss/archive/2007/04/13/http-413-request-entity-too-large-can -t-upload-large-files-using-iis6.aspx](http://blogs.msdn.com/b/jiruss/archive/2007/04/13/http-413-request-entity-too-large-can-t-upload-large-files-using-iis6.aspx)但没有运气

我的服务器 web.config 是

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="240000"/>    
</system.web>

<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="BasicHttpBinding_IService1" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"  hostNameComparisonMode="StrongWildcard" maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"/>
            </binding>
        </wsHttpBinding>
    </bindings>
    <services>
        <service name="ReDrawImgService.Service1">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="" contract="ReDrawImgService.IService1"/>
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>

            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>

<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

我的客户端 Web.Config 是

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="240000"/>

</system.web>

<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="BasicHttpBinding_IService1" closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"  hostNameComparisonMode="StrongWildcard" maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"/>
            </binding>
        </wsHttpBinding>
    </bindings>
    <services>
        <service name="ReDrawImgService.Service1">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="" contract="ReDrawImgService.IService1"/>
        </service>
    </services>

    <client>
        <endpoint address="http://localhost:8012/Service1.svc" binding="wsHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceClient.IService1"
            name="BasicHttpBinding_IService1" />
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:28:18.943

在您的 readerQuotas 上，尝试将 maxStringContentLength 也设置为 2147483647，并确保在**两端**都设置了此配置。

所以服务器和客户端都需要有这些值。如果允许客户端发送一个大文件，如果服务器无论如何都会拒绝它，那也无济于事。

`maxArrayLength`wcf 服务器应用程序的价值是什么

# android - 在 android 应用程序中更新和同步多个 GPS 地理点

> ID：15084468
> 
> 赞同：2
> 
> 时间：2013-02-26T08:26:00.500
> 
> 标签：android, geolocation, gps, synchronization, location

我有一个`Android`项目，可以帮助出租车司机获取请求出租车的乘客的位置并将其放置在地图上，该项目有两个部分（通过 Web 服务连接的单独项目），乘客部分读取`GPS`坐标乘客并每 30 秒或每 200 米更新一次，并将更新发送到 Web 服务。第二部分是读取驱动程序的驱动程序部分，将其`GPS`发送到 Web 服务，然后仅显示仅在地图范围内的用户我有一个问题，我不知道如何从中获取`GPS`坐标将两个部分的 webservice 完全同时设置为地图上的一个准确点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:42:42.030

您在系统中看到示例吗？总是循环光标 GPS 坐标，Util fill require ，再次下一个循环...我来自中国，我的英语太糟糕了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:57:59.233

您可以使用两个数据库表在您的 Web 服务器上存储乘客和出租车司机发送的位置，并存储乘客和出租车司机发送的位置（经度和纬度）。当出租车司机将他们的位置发送到网络服务器时，您可以查询乘客表并找到距离出租车司机发送的位置较近的乘客。然后您可以更新出租车司机的地图以显示乘客位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T18:38:21.963

如果你想同步两个位置，有一个“技巧”：

只需将时间戳添加到您的位置：

```
location = (timeUTC, latitude, longitude) 
```

使用时差相同或较小的位置进行显示/同步。

传输时间为 8 字节长的值，表示 UTC 时间。

# gwt - 调用 setVisible 后未显示 GWT-Bootstrap 模态

> ID：15084469
> 
> 赞同：0
> 
> 时间：2013-02-26T08:26:07.743
> 
> 标签：gwt, modal-dialog, gwt-bootstrap

我有一个简单的模式，我想在单击按钮时显示它。

这是我用来显示模态的代码

```
@UiHandler("submit")
void handleClick(ClickEvent e){
    ModalDialogDemo modalDialog = (ModalDialogDemo) RootPanel.get().getWidget(2);
    modalDialog.setHeight("200px");
    modalDialog.setWidth("100px");
    modalDialog.setVisible(true);
    if(modalDialog.isVisible()){
        System.out.println("Successfully Displayed the Modal!");
    }
    else{
        System.out.println("Something went wrong.");
    }
} 
```

即使模态没有显示在屏幕上，登录到控制台的消息是前者，即成功显示模态！

我用萤火虫做了一些挖掘，在单击按钮之前，呈现的 HTML 是

```
<div>
<div class="modal" style="display: none;" aria-hidden="true">
<div class="modal-header"><a class="close" data-dismiss="modal">×</a><h3>Name</h3></div>
<div class="modal-body"><div class="gwt-Label">Modal Content Comes Here</div></div>
<div class="modal-footer"><div class="gwt-Label">And this is the footer</div></div></div>
</div> 
```

单击按钮后，它变为

```
<div style="height: 200px; width: 100px;" aria-hidden="false">
<div class="modal" style="display: none;" aria-hidden="true">
<div class="modal-header"><a class="close" data-dismiss="modal">×</a><h3>Name</h3></div>
<div class="modal-body"><div class="gwt-Label">Modal Content Comes Here</div></div>
<div class="modal-footer"><div class="gwt-Label">And this is the footer</div></div></div>
</div> 
```

第一个 div 具有我设置的高度和宽度，并且 aria-hidden 也被清除，但实际包含模态的子 div 不受影响。

我不知道如何告诉 GWT 也将更改应用到子 div，有人可以帮我解决这个问题吗？

编辑：这是我的 ModalDialogDemo.ui.xml

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui"
    xmlns:b = "urn:import:com.github.gwtbootstrap.client.ui">
    <g:HTMLPanel>
        <b:Modal title="VipName" backdrop="STATIC">
            <g:Label>Modal Content Comes Here</g:Label>
            <b:ModalFooter>
                <g:Label>And this is the footer</g:Label>
            </b:ModalFooter>
        </b:Modal>
    </g:HTMLPanel>
</ui:UiBinder> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:47:19.170

您需要`show()`在 GWT-Bootstrap 模式对象上调用该方法来显示它。

**更新：**

在 ui.xml 文件中，为 modal 分配一个 id。

```
<b:Modal title="VipName" ui:field="vipNameModel" backdrop="STATIC"> 
```

在 ModalDialogDemo.JAVA 文件中，获取该对象。

```
@UiField
    Modal vipNameModel; 
```

创建getter方法：

```
Modal getVipNameModel()
{
return vipNameModel'
} 
```

然后`modalDialog.getVipNameModel().show();`从 ModalDialogDemo 类调用

# forms - 呈现具有一些唯一和一些相同类型的多个字段的表单

> ID：15084470
> 
> 赞同：0
> 
> 时间：2013-02-26T08:26:13.657
> 
> 标签：forms, symfony, doctrine

我有一个表格，它有几个独特的字段，比如**School**、**class**、 **Location**等，还有几个需要重复的字段，比如**Student id**、**Student name**、**Student roll no**。
我想重复最后三个字段 10 次。
其次，我如何将它存储在数据库中（MySQL 使用学说）。我的意思是应该根据最后三个字段的数量创建行，并且前三个字段应该保持不变。我如何在 Symfony2 中实现这一点？任何帮助将不胜感激。表格结构是这样的：
School Class Location

Sno Student id Student Name Student Roll No
1\.
2\.
3\.
4\.
5.
等等......

**编辑：固定在 10 行**
**更新** 实体类：
`class StudentForm {`

 ````
private $id;

private $school;

private $class;

private $location;

private $id;

private $name;

private $rollNo; 
```` 

`getter/setter 方法如下`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:51:42.950

好。到目前为止，我一直使用示例中提供的 JavaScript。您可以尝试调用此函数 10 次，或查看标记是如何创建的。但是话又说回来，这可能不适用于示例中控制器中的代码。

您始终可以自己创建整个标记，然后查看控制器中接收到的数据。但是话又说回来，您最初的描述中没有太多信息。您目前似乎没有实体的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:43:51.560

经过漫长的反复试验，我终于设法做到了。教义文档帮助为重复行创建了一个集合（尽管它没有提供足够的信息来保存对象），@Dirk Olbertz 的输入也是如此。谢谢你。`

# c - 在递归函数中使用结构（引用结构）

> ID：15084471
> 
> 赞同：0
> 
> 时间：2013-02-26T08:26:27.493
> 
> 标签：c, recursion, structure

我在理解如何编写解决以下问题的代码时遇到问题：我有一个包含二维数组的结构。然后我有一个递归函数，它将指向结构的指针作为参数，我希望递归函数能够操作发送的结构，而不是本地副本。

该结构在函数 initStruct 中初始化，其中为 2D 数组分配内存。递归函数构建一个数组，并在特定点调用一个函数将其插入到结构的数组中。

编码：

```
#include <stdio.h> 
#include <stdlib.h>
#include <string.h>

int** spBasis(int);
void mpBasis(int**, int, int, int, int, int, int, int*, struct mpBasis *, int, int);
void initMpBasis(struct mpBasis *, int, int);
void insertMpState(struct mpBasis *, int *);

struct mpBasis {
    int** basis;
    int size;
    int capacity;
};

int main() {
    int a, b, c, d;
    char maxE[256];
    char noParticles[256];
    char P[256];
    char M[256];
    FILE *fp;
    int **spStates;
    struct mpBasis *mp;
    int mpState[6] = {0, 0, 0, 0, 0, 0};

    printf("Input max e for sp states, no of particles, parity (1 for odd and 0 for even) and magnetic projection: ");

    gets(maxE);
    gets(noParticles);
    gets(P);
    gets(M);
    spStates = spBasis(atoi(maxE));
    fp = fopen("spStates.txt", "a+");
    fprintf(fp, "E\tj\tl\tm\n");
    for (a = 0; a < 330; a++) {
        fprintf(fp, "State %d: ", a+1);
        for (b = 0; b < 4; b++) {
            fprintf(fp, "%d\t", spStates[a][b]);
        }
        fprintf(fp, "\n");
    }

    mp = malloc(sizeof(struct mpBasis));
    initMpBasis(mp, 5449, 6);

    for (c = 0; c < 5449; c++) {
        for (d = 0; d < 6; d++) {
            fprintf(fp, "%d: %d\t", c, mp->basis[c][d]);
        }
        fprintf(fp, "\n");
    }

    printf("%p\n", (void*) mp);

    printf("hello 3");
    mpBasis(spStates, 0, atoi(maxE), 0, atoi(M), 0, atoi(P), mpState, mp, 0, 0); 

    fclose(fp);
    return 0;
}

int** spBasis(int maxE) {
    int c;
    int i, j, k, l;
    int q = 0;
    int** spStates;

    spStates = (int**)malloc(330 * sizeof(int *));
    for (c = 0; c < 330; c++) {
        spStates[c] = malloc(4 * sizeof(int));
    }

    for (i = 0; i <= maxE; i++) {
        for (j = i % 2; j <= i; j += 2) {
            for (k = -(2 * j  + 1); k <= (2 * j + 1); k += 2) {
                spStates[q][0] = i;
                spStates[q][1] = j;
                spStates[q][2] = 2 * j + 1;
                spStates[q][3] = k;
                q += 1;
            }
            for (l = -(2 * j - 1); l <= (2 * j - 1); l += 2) {
                spStates[q][0] = i;
                spStates[q][1] = j;
                spStates[q][2] = 2 * j - 1;
                spStates[q][3] = l;
                q += 1;
            }
        }
    }
    return spStates;
}

void mpBasis(int** spStates, int e, int maxE, int m, int M, int l, 
    int P, int * mpState, struct mpBasis *mpB, int position, int lastSpState) {
    int i;

    for (i = lastSpState; i < 330; i++) {
        if (e > maxE) {
            break;
        } else if (position == 5) {
            if (m == M && l % 2 == P) {
                 insertMpState(mpB, mpState);
                 break;
             }
        } else {
             // add spState to mpState and make the recursive call for the next position
            mpState[position] = i;
            mpBasis(spStates, e + spStates[i][0], maxE, m + spStates[i][3], M, 
                l + spStates[i][1], P, mpState, mpB, position+1, i);
        }
    }
}

void initMpBasis(struct mpBasis *a, int initialSize, int sizeY) {
    int c;
    a->basis = (int **)malloc(initialSize * sizeof(int*));
    for (c = 0; c < initialSize; c++) {
        a->basis[c] = (int *) malloc(sizeY * sizeof(int));
    }
    a->size = 0;
    a->capacity = initialSize;
}

void insertMpState(struct mpBasis *a, int* mpState) {
    /*if (a->size == a->capacity) {
        a->size *= 2;
        a->basis = (int **)realloc(a->basis, a->size * sizeof(int));
    }*/
    a->basis[a->size++] = mpState;
} 
```

添加了所有代码。

问题是在递归函数被调用后，结构 mpBasis 中的“基础”数组仍然只包含随机值，即 mpBasis 函数没有对它做任何事情。我在这里按值传递 mp 参数吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:37:42.587

第一步是在启用警告的情况下进行编译。例如，如果您使用 GCC，您可以使用选项**-Wall** -Wextra。

**编辑**：

（先前列出的 >20 个错误已删除）

好的，既然您使用的是 Visual Studio，请启用如下警告：

*   打开项目的属性页对话框。
*   选择 C/C++。
*   在常规属性页上，将警告级别修改为 /W4

# .net - .Net 是否存在通用磁盘日志库？

> ID：15084474
> 
> 赞同：2
> 
> 时间：2013-02-26T08:26:42.393
> 
> 标签：.net, journal

我需要维护一个持久的本地日志。.Net 库是否已经存在，还是我必须自己编写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:10:16.300

不存在这样的图书馆......但是！

# php - 使用 PHP 检测 FastCGI SAPI

> ID：15084478
> 
> 赞同：0
> 
> 时间：2013-02-26T08:26:54.847
> 
> 标签：php, fastcgi

存在以下问题：我必须检测 FastCGI SAPI 才能发送自定义响应。对于 FastCGI，它看起来像“未找到状态 404”与标准“未找到 HTTP/1.1 404”。据我所知，PHP 仅将 FastCGI 实现为 FPM 的一部分。

那么检测FastCGI的正确方法是：

```
 if (preg_match('|fpm|', PHP_SAPI))
         print('FastCGI'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-25T18:42:27.900

我会用

```
if (PHP_SAPI === 'fpm-fcgi') {
  print 'FastCGI';
} 
```

如果你想检测我会使用的任何 cgi/fast-cgi 环境

```
if (preg_match('|cgi|', PHP_SAPI)) {
  print('FastCGI');
} 
```

我避免使用正则表达式只是因为它往往会让三年后追随我的人更轻松地阅读代码来追踪一些不相关的错误。

# asp.net-mvc-2 - 如何提高 Windows azure 中的云服务性能？

> ID：15084482
> 
> 赞同：0
> 
> 时间：2013-02-26T08:27:11.910
> 
> 标签：asp.net-mvc-2, azure

目前我的应用程序正在登台环境中运行。我需要将我的应用程序推向市场，但在此之前我想摆脱这个性能问题，我的应用程序详细信息是，

云服务 =============> 美国西部

存储帐户 =============> 美国西部

数据库服务器 ============> 美国中北部

VM（虚拟机）大小 =====> 小

我的云服务和存储在一个位置，而数据库服务器在另一个位置。这对应用程序性能有影响吗？

还有一件事是在我的应用程序中使用一个 Web 角色和一个实例。

你能建议我做些什么来提高我的应用程序性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:09:20.517

你绝对应该把你的数据库和服务放在同一个区域。数据库性能很可能是您的性能致命弱点，您应该将数据库尽可能“靠近”您的服务。将您的数据库和服务放在同一个区域意味着它们位于同一个数据中心，因此位于高速主干上。单独的区域（数据中​​心）意味着您的数据必须穿越速度较低的跨国基础设施——吞吐量和延迟都会受到严重影响。此外，由于数据出口费用是按地区划分的，因此您将为从数据库到应用程序的所有流量付费——如果它们位于同一地区，这将不会花费一分钱。

可以进行其他性能改进——例如，查看云服务上的 CPU 负载，以确定单个实例是否足够。但从数据开始。获取尽可能接近服务的数据，从区域亲和性开始，同时查看缓存（数据在同一台机器上的内存中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:09:40.763

根据上面的描述，您首先需要做一些事情：

1.  确保您的数据库服务器和云服务位于同一区域（美国西部）。将云服务和数据库服务器放在不同的区域会产生一些延迟问题。
2.  在生产环境中，您需要确保至少运行 2 个 Web 角色实例。Windows Azure SLA 不涵盖单个实例 Web 角色，如果此单个实例因任何原因出现故障，则您的应用程序在此期间不可用。

之后，请遵循@Alexei Levenkov 关于设置性能目标的建议。

# php - 如何使选择框在更改时填充 div

> ID：15084483
> 
> 赞同：0
> 
> 时间：2013-02-26T08:27:14.390
> 
> 标签：php, jquery

所以，我已经阅读了关于这个主题的几乎所有问题，但是解决方案不适用于我的项目，似乎当我更改下拉列表时，它会执行第一个事件，但是当我更改为不同的元素时它不会不做任何其他事情，但是当我使用警报消息执行此操作时，它每次都会改变。

这是我必须证明的意思

我试过 .post 在我添加 php 和所有动态函数之前效果很好，是因为我使用了 $('#updateDiv').html(url);

我还根据下拉列表的变化隐藏和显示 div，但所做的只是隐藏和显示 div，我希望 div 根据类别列表显示内容。

PHP 端将是动态的，但如果我这样做 .html() ，则所有 php 都无法正确呈现。

[http://fiddle.jshell.net/LrxUS/](http://fiddle.jshell.net/LrxUS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:33:57.370

```
$.post(url, function(data) {
    $("#updateDiv").html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:45:13.043

好的，让它变得最简单，这样客户端脚本就没有出错的余地。[使用此处](http://api.jquery.com/load/)定义的 $.load 方法。

作为：

```
$("#updateDiv").load(url); 
```

如果您没有得到所需的结果，请不要忘记检查您的萤火虫、铬检查员或提琴手对您的请求的看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:33:29.757

根据小提琴，您已指定

```
var mydropdown = $('#mydropdown'); 
```

但是在更改函数中，您已经指定了 $(mydropdown)，要么只在变量或对象中定义 id。喜欢，

```
var mydropdown = '#mydropdown';
$(mydropdown).change(function() {} 
```

之后使用 $.ajax 获取动态内容。

# c++ - 'typedef' 类型的数组上的 STL 复制失败

> ID：15084487
> 
> 赞同：0
> 
> 时间：2013-02-26T08:27:26.900
> 
> 标签：c++, stl-algorithm

平台：MinGW64（rubenvb 4.7.2），Windows 7（64），Qt 4.8.2

给定代码段如下：

```
/* type definition */
typedef long T_PSIZE;
struct A { T_PSIZE myArray[10]; };
struct B { T_PSIZE myArray[10]; };
/* declare variable */
A a;
B b;
std::copy(a.myArray[0], a.myArray[10], &b.myArray); 
```

我不知道为什么编译器会抛出以下错误消息（从 'typedef long T_PSIZE;' 更改为 'typedef int T_PSIZE;' 时也会显示类似消息）：

```
> c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:
> In instantiation of '_OI std::__copy_move_a(_II, _II, _OI) [with bool
> _IsMove = false; _II = long int; _OI = long int (*)[9]]': c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:422:39:
> required from '_OI std::__copy_move_a2(_II, _II, _OI) [with bool
> _IsMove = false; _II = long int; _OI = long int (*)[9]]' c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:454:18:
> required from '_OI std::copy(_II, _II, _OI) [with _II = long int; _OI
> = long int (*)[9]]' ..\InfluSimHKPrototype\SimApplication.cpp:114:36:   required from here
> c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:375:57:
> error: no type named 'value_type' in 'struct std::iterator_traits<long
> int>'
> c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:377:64:
> error: no type named 'iterator_category' in 'struct
> std::iterator_traits<long int>'
> c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:381:57:
> error: no type named 'value_type' in 'struct std::iterator_traits<long
> int>'
> c:\mingw\rubenvb-4.7.2-64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:384:70:
> error: no type named 'iterator_category' in 'struct
> std::iterator_traits<long int>' 
```

编译器的模板引擎似乎无法识别类型“long int”。我将类似的语句与“普通整数”数组一起使用，效果很好。我没有使用任何 STL 容器，因为我确切地知道目标数组的大小，所以我认为我不需要重新实现类似 back_inserter 的东西。我错过了什么吗？

**注意**：我不确定这样的问题是否有[帮助](https://stackoverflow.com/questions/1643035/propagating-typedef-from-based-to-derived-class-for-template/1643190#1643190)。（或者我怎样才能获得语句的“完整”限定名称以处理 typedef ed 变量？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:31:00.380

你可能的意思是：

```
std::copy(&a.myArray[0], &a.myArray[10], &b.myArray[0]); 
```

或者

```
std::copy(a.myArray, a.myArray + 10, b.myArray); 
```

`a.myArray[0]`只是一个`long`，而不是指向需要*的*数组的`long`指针`std::copy`。此外，输出参数的类型需要与被复制对象的类型兼容。`&b.myArray`具有类型`long (*)[10]`，而您需要提供类型的参数`long*`。

# javascript - 这个body fadeIn动画是怎么做的？

> ID：15084495
> 
> 赞同：0
> 
> 时间：2013-02-26T08:28:26.540
> 
> 标签：javascript, jquery, css, animation, css-animations

我发现了“ [http://thegoodman.cc/](http://thegoodman.cc/) ”。这是一个绝对了不起的网站。

我只是真的很好奇，至于这个文档的正文是如何略微淡入的，并在这个页面中向上滑动：

> [http://thegoodman.cc/about/](http://thegoodman.cc/about/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:32:26.893

它是使用 CSS 动画完成的。查看[源代码](http://thegoodman.cc/files/main.css)时，您会发现这行代码：

```
.sup {
    animation:sup 1.8s backwards;
}
@keyframes sup {
    0% {
        opacity:0;
        transform:translateY(50px);
    }
    30% {
        opacity:0;
    }
    100% {
        opacity:1;
        transform:translateY(0);
    }
} 
```

它会淡入文本（使用`opacity`）并使用 向上移动它`translateY`。

[JSFiddle 示例](http://jsfiddle.net/UNkjF/)。

请注意，它使用[Prefix Free](http://leaverou.github.com/prefixfree/) JS 库来防止必须添加诸如`-webkit-`等前缀`-moz-`。

# mysql - 从同一个表的其他列更新mysql列字段值

> ID：15084498
> 
> 赞同：0
> 
> 时间：2013-02-26T08:28:38.513
> 
> 标签：mysql, sql

我有一个 mysql 表，其名称`categories` 为

```
Category_id, Category_name, Category_sorted
1             food             0
2             drinks           0
3             milk             0
4             snacks           0
....
2421          other            0 
```

在这里，我想将所有`category_id`值更新`category_sorted`为

```
Category_id, Category_name, Category_sorted
1             food             1
2             drinks           2
3             milk             3
4             snacks           4
....
2421          other            2421 
```

我可以用 PHP 做到这一点，但我想知道是否可以用单个 mysql 查询来更新它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:29:31.213

这应该很简单，

```
UPDATE tableName
SET    category_sorted = category_ID 
```

# c++ - 运算符重载语法说明

> ID：15084501
> 
> 赞同：1
> 
> 时间：2013-02-26T08:29:04.317
> 
> 标签：c++, operator-overloading

有人可以解释以下语法差异如何改变运算符的工作方式吗？

```
T & operator()(type one, type two)
const T * operator()(type one, type two)
T & operator()(type one) const
const T & operator()(type one) const 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:34:55.790

假设它们都是成员，它们都`type`按值获取对象。这意味着，至少在语义上，body 操作符拥有自己的`type`对象副本。`operator()`语法意味着实例是可调用的。后面的`operator()`，例如`(type a, type b)`，是参数列表。

这个需要两个`type`s `type`，并返回对 的引用`T`。不能在`const`实例上使用。

```
T & operator()(type one, type two) 
```

可以这样称呼它：

```
MyFunctor x;
type a, b;
T& r = x(a,b); // take reference
T c = x(a,b);  // make copy from reference. Assumes T has copy constructor 
```

这个版本需要两个`type`s，并返回一个指向 的指针`const T`。不能在`const`实例上使用。`T`不能调用非常量方法。

```
const T * operator()(type one, type two) 
```

例子：

```
MyFunctor x;
type a, b;
const T* p1 = x(a,b); // pointer to const
T* p2 = x(a,b);       // Error! Must have const T* on LHS 
```

这个接受一个`type`，并返回一个对`T`. 可用于所有实例，常量或非常量。根据返回的引用所指的内容，它可能会破坏`const`允许您通过 const 方法修改内部数据的一致性：

```
T & operator()(type one) const 
```

最后一个与上面的一样工作，除了不能`const`调用返回所指的任何非方法。

```
const T & operator()(type one) const

MyFunctor x;
type a;
const T& r = x(a); // take reference to const
T c = x(a);        // make copy from reference. Assumes T has copy constructor
T& r = x(a);       // Error! Cannot take reference to non-const! 
```

# eclipse - 如何从命令行以详细模式运行 STS

> ID：15084505
> 
> 赞同：1
> 
> 时间：2013-02-26T08:29:41.720
> 
> 标签：eclipse, spring-mvc, eclipse-plugin, spring-webflow, sts-springsourcetoolsuite

如何从 Windows 的命令行以详细模式运行 SpringSource Toolsite？我尝试了以下命令：

STS.exe -verbose - 控制台日志

但在命令提示符下没有得到任何日志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T00:25:44.760

`-verbose`不是日食选项。 `-consoleLog`应该将进入错误日志视图的所有内容打印到 sysout。如果你没有看到这个，那么你可以编辑你的 STS.ini 文件并将选项放在那里。

以下是有关命令行参数的更多信息：

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)

您希望获得什么信息？您可能对该`-debug [options file]`选项感兴趣。

# php - adLDAP 用户必须更改密码

> ID：15084506
> 
> 赞同：0
> 
> 时间：2013-02-26T08:29:42.843
> 
> 标签：php, active-directory

我必须让用户在 Active Directory 系统上设置标志“用户必须更改密码”时更改他的密码。

当我通过我的 AD 管理员授予 adLDAP 访问权限时，这才有效。

因此，当用户尝试登录时，我会检查属性“pwdlastset”是否具有指示用户必须更改密码的值。如果是，我将他重定向到更新密码对话框。

这个解决方案的问题是，当用户输入无效的初始密码时，我也会重定向他。因为我无法验证他。当我尝试绑定用户时，设置了“pwdlastet”属性，它总是返回一个错误“无法绑定”。

```
$adldap = new \adLDAP(array("base_dn" => $basedn, "account_suffix" => $accsuffix,"domain_controllers" => $dc,"admin_username" => $adminuser, "admin_password" => $adminpw));        

//Get Requesting Users "pwdLastSet" Field over the Admin Account
$userToAuthInfo =  $adldap->user()->info($name,"pwdlastset");
if($userToAuthInfo[0]["pwdlastset"][0] == 0)
{
//redirect user to pwd renew
}
else
{
//bind user and redirect to home
} 
```

有谁知道我怎么能解决这个问题？我想如果存在带有 pw 的单独属性，我可以请求它并检查它是否相同。但是当我没有错的时候，我认为这样的属性是不存在的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:46:17.020

```
function userchange($username,$pwdLastSetVal,$domadlogin,$domadpw,$domctrl)
{
    $ldapServer = $domctrl;
    $ldapBase = 'OU= ,DC= ,DC= '; //be sure to set this according to your ldap settings
    $ds = ldap_connect($ldapServer);

    if (!$ds)
       die('Cannot Connect to LDAP server');

    $ldapBind = ldap_bind($ds,$domadlogin,$domadpw);
    if (!$ldapBind)
       die('Cannot Bind to LDAP server');

    ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3) or die("Error setting LDAP version");

    ldap_set_option($ds, LDAP_OPT_REFERRALS, 0) or die("Error setting referrals option");

    $attrs = array("samaccountname", "pwdlastset");
    $filter = "(samaccountname=".$username.")";
    $sr = ldap_search($ds, $ldapBase, $filter, $attrs);
    $ent= ldap_get_entries($ds,$sr);
    $dn=$ent[0]["dn"];
    $userdata=array();

    $userdata["pwdlastset"][0]=$pwdLastSetVal;

    ldap_modify($ds, $dn, $userdata); //change state

    ldap_close($ds);
}

// -1 or 0 after the username parameter
userchange($username, -1, $domadlogin, $domadpw, $domctrl); 
```

我会在您尝试绑定用户并将其密码更改为新密码之前调用此函数并传递-1，如果绑定成功（用户提供了不正确的当前密码），然后再次调用 userchange 函数并传递 0，所以它将它设置回以前的状态，用户可以再试一次。当用户成功绑定并设置新密码后，可以调用userchange函数，在$username参数后传入-1。

# android - Twitter异常4 04：请求的URI无效

> ID：15084509
> 
> 赞同：1
> 
> 时间：2013-02-26T08:29:45.330
> 
> 标签：android, twitter4j

我想使用我的 android 应用程序向用户的关注者发送直接消息。我尝试了以下代码

```
 String access_token = mSharedPreferences.getString(
                        Constants.PREF_KEY_OAUTH_TOKEN, "");
                // Access Token Secret
                String access_token_secret = mSharedPreferences.getString(
                        Constants.PREF_KEY_OAUTH_SECRET, "");

                ConfigurationBuilder builder = new ConfigurationBuilder();
                builder.setDebugEnabled(true);
                builder.setOAuthConsumerKey(Constants.TWITTER_CONSUMER_KEY);
                builder.setOAuthConsumerSecret(Constants.TWITTER_CONSUMER_SECRET);
                builder.setOAuthAccessToken(access_token);
                builder.setOAuthAccessTokenSecret(access_token_secret);

                TwitterFactory tf = new TwitterFactory(builder.build());
                Twitter twitter = tf.getInstance();

                DirectMessage message = null;
                try {
                    message = twitter.sendDirectMessage(
                            frndsDetails.get(position).getId(), "Hi");
                    System.out.println("Sent: " + message.getText()
                            + " to @" + message.getRecipientScreenName());

                } catch (TwitterException e) {
                    // TODO Auto-generated catch block
                    Log.e("Twitter exception", "" + e.getMessage());
                    e.printStackTrace();
                } 
```

但得到以下异常

> 02-26 13:48:16.287：E/Twitter 异常（707）：404：请求的 URI 无效或请求的资源（例如用户）不存在。当请求的方法不支持请求的格式时也返回。02-26 13:48:16.287：E/Twitter 异常（707）：消息 - 抱歉，该页面不存在 02-26 13:48:16.287：E/Twitter 异常（707）：代码 - 34 02-26 13 :48:16.397: W/System.err(707): 在 android.view.View.performClick(View.java:3511)

有没有其他发送直接消息的方法。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:07:27.387

我在我的应用程序中使用以下代码向关注者发送直接消息。可能这对你有帮助。

```
StringBuilder builder = new StringBuilder();
builder.append("@").append(twitterFriendObj.screenName).append(" ");
Status status = twitter.updateStatus(builder+"Hi this is test message"); 
```

在这里，我们需要发送关注者屏幕名称以发送直接消息。

# node.js - 如何检测 Azure 网站上的 HTTPS 重定向？

> ID：15084511
> 
> 赞同：1
> 
> 时间：2013-02-26T08:29:50.423
> 
> 标签：node.js, azure

根据标题，我有一个 Node.js 应用程序，我希望能够检测请求是通过 HTTPS 还是通过 HTTP 发出的。到目前为止，我的重定向如下所示：

```
// Ensure the page is secure, or that we are running a development build
if (req.headers['x-forwarded-proto'] === 'https' || process.env.NODE_ENV === 'development') {
    res.render('index');
} else {
    winston.info('Request for login page made over HTTP, redirecting to HTTPS');
    res.redirect('https://' + req.host);
} 
```

这在 Nodejitsu 上运行良好，但重定向的 HTTPS 请求没有在 Azure 上设置“x-forwarded-proto”标头。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:27:43.570

我认为我的评论是正确的：

`X-ARR-SSL`似乎是要检查的标题。

```
// Ensure the page is secure, or that we are running a development build
if (req.headers['x-forwarded-proto'] === 'https' || req.headers['x-arr-ssl'] || process.env.NODE_ENV === 'development') {
    res.render('index');
} else {
    winston.info('Request for login page made over HTTP, redirecting to HTTPS');
    res.redirect('https://' + req.host);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-27T00:52:22.800

遇到完全相同的问题，但以不同的方式解决了它。如果您使用 Express 并启用信任代理，则 req.protocol 将获取 x-forwarded-proto 标头。Azure 不设置 x-forwarded-proto 标头，但您可以使用 x-arr-ssl 标头手动破解它，以便 req.protocol 将在您的应用程序的其余部分返回正确的值。

这是一个要点：[https ://gist.github.com/freshlogic/6348417](https://gist.github.com/freshlogic/6348417)

```
var express = require('express');

var app = express();
app.enable('trust proxy');

// HACK: Azure doesn't support X-Forwarded-Proto so we add it manually
app.use(function(req, res, next) {
    if(req.headers['x-arr-ssl'] && !req.headers['x-forwarded-proto']) {
        req.headers['x-forwarded-proto'] = 'https';
    }

    return next();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-24T14:23:19.057

UPDATE-2021：这是一个非常古老的答案。长期以来，所有支持自定义域的应用服务计划都有一个选项。转到应用服务的 Azure 门户中的自定义域边栏选项卡，然后设置仅 HTTPS 复选框。这甚至会在流量到达应用服务之前重定向。

# r - 在R中嵌套输出设备？

> ID：15084513
> 
> 赞同：5
> 
> 时间：2013-02-26T08:30:03.397
> 
> 标签：r, plot, tee

是否可以一次将图形绘制到多个输出设备中？我试过了：

```
getwd()

pdf("level1.pdf")
  pdf("level2.pdf")
    png("level3.png")

    x=1:10
    y=1:10
    plot(x, y)

    dev.off() # close level3
  dev.off() # close level2

  a=10:20
  b=-10:0
  plot(a,b)

dev.off() # close level1 
```

XY 图只进入`level3.png`. （我应该进入所有 3 个文件）

奇怪的是，AB 图进入了 level2.pdf，而我希望它被写入 level1.pdf，因为 level2.pdf 应该已经关闭了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:50:17.763

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T08:47:00.323

您可以将`ggplot2`绘图对象分配给变量并`print`多次分配：

```
library(ggplot2)
p <- ggplot(data.frame(x=1:10, y=1:10), aes(x=x, y=y)) + geom_point()

pdf('a.pdf')
print(p)
dev.off()

png('b.png')
print(p)
dev.off() 
```

或者，使用`ggsave`（感谢 Roland；但是，这会在我的系统上打开一个虚拟窗口 - Ubuntu）：

```
ggsave('a.pdf', p)
ggsave('b.png', p) 
```

不确定“常规”情节，我`ggplot2`会尽可能使用。

# windows - 暂停 Windows 服务线程？

> ID：15084514
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:30:08.783
> 
> 标签：windows, service, thread-sleep

这是我的目标的概述：

我有一个 Windows 服务，它将在启动时检查该服务器上的特定数据库是否有任何可用队列。如果找到一个队列，它必须开始处理（非常简单直接）。如果没有找到队列，我需要服务“休眠”15 分钟，然后“重新启动”。如果找到队列，则开始处理，否则再休眠 15 分钟并“重新启动”。

我该怎么做呢？我查看了 System.Threading.Sleep 方法，但显然这是非常糟糕的编码。我确实明白，让线程休眠会阻止任何连续的方法被执行，这很好——因为在休眠之后，服务将调用相同的方法来“重新启动”处理。

我还查看了 System.Threading.Timer，但有时系统会完全停止服务。事件查看器中有一些与某种异常有关的错误，但是当我手动启动服务时，它会自动开始处理队列——表明我的编码没有问题。

什么是暂停Service线程15分钟，然后再次调用处理方法的最佳方法。它应该保持在不断检查可用队列的循环中。一旦找到，就进行处理，如果没有找到就休眠 15 分钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:06:16.180

如果你真的想睡觉，你只需调用[`Thread.Sleep`](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep.aspx). 用最基本的术语来说，您的线程的主执行循环如下所示：

```
while (true)
{
    if (!queue.processItem())
        Thread.Sleep(...);
} 
```

您不应该调用`Thread.Sleep`主服务线程。在后台线程上调用它。所以这个想法是主服务线程保持活动状态并准备好处理任何服务消息。后台线程执行实际工作。

是的，睡觉通常是要避免的。理想情况下，您需要一个可以等待的阻塞队列，以防它为空。然后，当项目被添加到队列中时，您的线程将被唤醒。

# spring - 如何使用 JdbcTemplate 执行 Join 查询

> ID：15084516
> 
> 赞同：6
> 
> 时间：2013-02-26T08:30:15.493
> 
> 标签：spring, jdbctemplate

我有以下数据库模型

```
 create table Diary (id bigint NOT NULL AUTO_INCREMENT,
                creationDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                name varchar(255) not null, 
                description text,
                viewtype varchar(255) not null,
                member bigint,
                primary key (id),
                foreign key (member) references Member(id));

       create table Page (id bigint NOT NULL AUTO_INCREMENT,
                creationDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                viewtype varchar(255) not null,
                diary bigint,
                member bigint,
                primary key (id),
                foreign key (diary) references Diary(id),
                foreign key (member) references Member(id));

       create table Comment (id bigint NOT NULL AUTO_INCREMENT,
                postingDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                comment text not null,
                page bigint,
                member bigint,
                primary key (id),
                foreign key (page) references Page(id)
                foreign key (member) references Member(id)); 
```

我正在使用 spring JDBC 模板。

```
 My interface looks like follows: accountid is the memeberid in the database.

     Collection<Diary> getDiaries(Long accountId); 
```

我的日记如下：

```
 public class Diary {
           private Collection<Page> pages;
           private Long id;
           private LocalTime creationDate;
           private String name;
           private String description;
           private ViewType type;
           } 
```

如果我想使用 jdbc 模板准备一个日记对象，我想知道查询现在的样子。也可以只触发一个查询并准备这个 Diary 对象，因为我将避免针对同一请求多次触发查询。对于上面的接口，我很可能会使用 s 连接查询，或者是否有更简单的方法可以使用 spring JDBC 模板框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:26:11.183

您将能够使用外部联接创建单个查询（我在这里假设可以有一个没有任何页面的日记并且有没有评论的页面）。

现在，不是执行多个查询（每个页面一个），而是使用外连接到 connection`Diary`和`Page`进行单个查询`Comment`。正如您在下面看到的，这将意味着日志和页面信息被多次返回，但我认为在多个数据库调用和一些冗余信息之间存在权衡。

```
 class FullDiaryRowCallbackHandler implements RowCallbackHandler {
    private Collection<Diary> diaries = new ArrayList<Diary>();
    private Diary currentDiary = null;
    private Page currentPage = null;

    public void processRow(ResultSet rs) {
       long diaryId = rs.getLong("d.id");
       if (currentDiary == null || diaryId != currentDiary.getId()) {
          currentDiary = new Diary();
          currentPage = null;
          diaries.add(currentDiary);
          currentDiary.setId(diaryId);
          currentDiary.setCreationDate(toLocalTime(rs.getTimestamp("d.creationDate")));
          currentDiary.setDescription(rs.getString("d.description"));
          ...
       }
       long pageId = rs.getLong("p.id");
       if (!rs.wasNull() && currentPage != null && currentPage.getId() != pageId) {
          currentPage = new Page();
          if (currentDiary.getPages() == null) {
              currentDiary.setPages(new ArrayList<Page>());
          }
          currentDiary.getPages().add(currentPage);
          currentPage.setId(pageId);
          currentPage.setCreationDate(toLocalTime(rs.getTimestamp("p.creationDate")));
          ...
       }
       long commentId = rs.getLong("c.id");
       if (!rs.wasNull() && currentPage != null) {
          Comment comment = new Comment();
          if (currentPage.getComments() == null) {
              currentPage.setComments(new ArrayList<Comment>());
          }
          currentPage.getComments().add(comment);
          comment.setId(commentId);
          comment.setPostingDate(toLocalTime(rs.getTimestamp("c.postingDate")));
          comment.setComment(rs.getString("c.comment"));
       }
    }

    public Collection<Diary> getDiaries() {
       return diaries;
    }
 }

 FullDiaryRowCallbackHandler rowCallbackHandler = new FullDiaryRowCallbackHandler();
 Collection<Diary> result = jdbcTemplate.query(
    "select d.id, " +
           "d.creationDate, " +
           "d.description, " +
           "p.id, " +
           "p.creationDate, " +
           "c.id, " +
           "c.postingDate, " +
           "c.comment " +
      "from Diary d " +
      "left outer join Page p on d.id = p.diary " +
      "left outer join Comment c on p.id = c.page " +
     "where d.member = ? " +
     "order by d.id, p.id, c.id",
    rowCallbackHandler,
    myMemberId);
Collection<Diary> diariesForMember = rowCallbackHandler.getDiaries(); 
```

请注意，代码不是特别漂亮，因为您必须处理结果集并注意何时返回新页面（这就是该`order by`子句很重要的原因），但这是 Hibernate 之类的事情当他们急切地获取数据时，为您在幕后工作（我并不是说 Hibernate 是否更好，因为我喜欢使用 JdbcTemplate 来控制它为我发出的查询提供的控制，但是 Hibernate（或 JPA）做了很多填充对象图时的繁重工作）。

另请参阅[JdbcTemplate#query](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#query%28java.lang.String,%20org.springframework.jdbc.core.RowCallbackHandler,%20java.lang.Object...%29)

编辑：

修改为返回成员的所有日记、页面、评论。

# php - 如何使用 PHPExcel 合并 Excel 中的列

> ID：15084517
> 
> 赞同：6
> 
> 时间：2013-02-26T08:30:15.347
> 
> 标签：php, loops, phpexcel

我已经[使用 PHPExcel 按行和列一起检查了这个 Merging cells in Excel by rows and columns](https://stackoverflow.com/questions/10909598/merging-cells-in-excel-by-rows-and-columns-together-using-phpexcel)但它只显示行添加但是我也对列应用了一些测试但没有一个工作。

此代码虽然成功创建了 excel 表，但 excel 中的输出抛出错误。

**编辑**

但是，如果删除 llop 并简单地说，这是可行的 -

```
$objPHPExcel->setActiveSheetIndex(0)->mergeCells('A1:B1');
$objPHPExcel->getActiveSheet()->setCellValue('A1', 'Swapnesh'); 
```

添加数据的主要代码 -

```
// Add some data
echo date('H:i:s') , " Add some data" , EOL;
$i = "A";
$j ="B";
for($num =1; $num <= 5; $num++ )
{
    $concat =  "{$i}1:{$j}1";
    $objPHPExcel->setActiveSheetIndex(0)->mergeCells($concat);
    $i++;$j++;
} 
$objPHPExcel->getActiveSheet()->setCellValue('A1', 'Swapnesh'); 
```

我的整个代码 -

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');

date_default_timezone_set('Asia/Calcutta');

/** Include PHPExcel */
require_once 'Classes/PHPExcel.php';

// Create new PHPExcel object
echo date('H:i:s') , " Create new PHPExcel object" , EOL;
$objPHPExcel = new PHPExcel();

// Set document properties
echo date('H:i:s') , " Set document properties" , EOL;
$objPHPExcel->
getProperties()->setCreator("Swapnesh Sinha")
                             ->setLastModifiedBy("Swapnesh")
                             ->setTitle("Office 2007 XLSX Test Document")
                             ->setSubject("Office 2007 XLSX Test Document")
                             ->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.")
                             ->setKeywords("office 2007 openxml php")
                             ->setCategory("Test result file");

// Add some data
echo date('H:i:s') , " Add some data" , EOL;
$i = "A";
$j ="B";
for($num =1; $num <= 5; $num++ )
{
    $concat =  "{$i}1:{$j}1";
    $objPHPExcel->setActiveSheetIndex(0)->mergeCells($concat);
    $i++;$j++;
} 
$objPHPExcel->getActiveSheet()->setCellValue('A1', 'Swapnesh');

// Rename worksheet
echo date('H:i:s') , " Rename worksheet" , EOL;
$objPHPExcel->getActiveSheet()->setTitle('Student Data');

// Set document security
echo date('H:i:s') , " Set document security" , EOL;
$objPHPExcel->getSecurity()->setLockWindows(true);
$objPHPExcel->getSecurity()->setLockStructure(true);
$objPHPExcel->getSecurity()->setWorkbookPassword("PHPExcel");

// Set sheet security
echo date('H:i:s') , " Set sheet security" , EOL;
$objPHPExcel->getActiveSheet()->getProtection()->setPassword('PHPExcel');
$objPHPExcel->getActiveSheet()->getProtection()->setSheet(true); // This should be enabled in order to enable any of the following!
$objPHPExcel->getActiveSheet()->getProtection()->setSort(true);
$objPHPExcel->getActiveSheet()->getProtection()->setInsertRows(true);
$objPHPExcel->getActiveSheet()->getProtection()->setFormatCells(true);

// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0);

// Save Excel 2007 file
echo date('H:i:s') , " Write to Excel2007 format" , EOL;
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
//$objWriter->save(str_replace('.php', '.xlsx', __FILE__));
$filename = "Student-data-sheet".".xlsx";
$objWriter->save($filename);
echo date('H:i:s') , " File written to " , str_replace('.php', '.xlsx', pathinfo(__FILE__, PATHINFO_BASENAME)) , EOL;

// Echo memory peak usage
echo date('H:i:s') , " Peak memory usage: " , (memory_get_peak_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo done
echo date('H:i:s') , " Done writing file" , EOL;
echo 'File has been created in ' , getcwd() , EOL; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T08:41:39.953

我自己想出了解决方案-

实际上，在列合并的情况下，我们实际上不需要迭代。假设我想从 column 合并`A1`到`E1`.

因此，可以很容易地通过以下方式完成，而不是逐个循环地完成 -

```
$objPHPExcel->setActiveSheetIndex(0)->mergeCells('A1:E1'); 
```

所以在我的情况下，我首先需要找到最后一个元素和第一个元素，然后简单地放入 mergeCells() 方法以使其工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-17T07:01:43.980

当您尝试在循环中合并两个单元格时会发生此问题。原因不是您正在迭代的循环，而是您正在传递的列名。如果您传递了错误的列名，那么您的 excel 将不会产生正确的输出。

以下是获取下一个 excel 列的简单程序，这样我们就不会遇到此类问题。

```
/* manage excel index */
function getColumn($prevColumn){
    if(strlen($prevColumn)==1&&$prevColumn!="Z")
    { $prevColumn++;return $prevColumn; }

    $colum = '';
    $list = str_split($prevColumn);

    if(count($list)==1&&$list[0]=='Z')
    {
        $list[0] = "A";
        $list[1] = "A";
    }
    else if(count($list)==2&&$list[1]!='Z')
    {
        $list[1]++;
}
    else if(count($list)==2&&$list[1]=='Z')
    {
        $list[0] = "B";
        $list[1] = "A";
}
return implode('',$list);
}

## us this like below

$column = "A";
$row = 1;
foreach($array_to_print as $details)
{

$column = getColumn($column); // product next column B
$Excelobj->getActiveSheet()->setCellValue($column.$row, $details);
$column = getColumn($column);// product next column C
$Excelobj->setActiveSheetIndex(0)->mergeCells($from_cell.':'.$to_cell);// now this will  work till A-ZZ column in excel
} 
```

# ios - 绘制椭圆渐变

> ID：15084522
> 
> 赞同：1
> 
> 时间：2013-02-26T08:30:42.300
> 
> 标签：ios, ellipse, radial-gradients

如何绘制如下图？我在照片编辑工具中创建了这个。但不能用 iOS 真正做到这一点。

*   椭圆
*   “软角”，在某种程度上它就像一个辐射渐变，只是它不是圆形的。

![在此处输入图像描述](../Images/c334159aad45624307061a408bdd5609.png)

[https://stackoverflow.com/a/12665177/129202](https://stackoverflow.com/a/12665177/129202)引导我朝着一个好的方向前进，但仿射变换的效果确实不是 100%。

![](../Images/6140f477c8924eab14366722ff6e9241.png)

使用的代码：

```
+(UIImage*)createGradientOval2:(const CGSize)SIZECONTEXT {
    const CGFloat SCALE = 2.0f;
    UIGraphicsBeginImageContextWithOptions(SIZECONTEXT, NO, SCALE);
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    // Create gradient
    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();

    const CGFloat colors [] = {
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 1.00, // green
        0.0, 1.0, 0.0, 0.00, // transparent
    };
    //CGGradientRef gradient = CGGradientCreateWithColors(baseSpace, (CFArrayRef)colors, locations);
    CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 10);
    CGColorSpaceRelease(baseSpace), baseSpace = NULL;

    // Scaling transformation and keeping track of the inverse
    CGAffineTransform scaleT = CGAffineTransformMakeScale(1, 2.0);
    CGAffineTransform invScaleT = CGAffineTransformInvert(scaleT);

    // Extract the Sx and Sy elements from the inverse matrix
    // (See the Quartz documentation for the math behind the matrices)
    CGPoint invS = CGPointMake(invScaleT.a, invScaleT.d);

    const CGRect RECT = CGRectMake(0, 0, SIZECONTEXT.width / 2, SIZECONTEXT.height / 2);

    // Transform center and radius of gradient with the inverse
    CGPoint center = CGPointMake((RECT.size.width / 2) * invS.x, (RECT.size.height / 2) * invS.y);
    CGFloat radius = (RECT.size.width / 2) * invS.x;

    // Draw the gradient with the scale transform on the context
    CGContextScaleCTM(ctx, scaleT.a, scaleT.d);
    CGContextDrawRadialGradient(ctx, gradient, center, 0, center, radius, kCGGradientDrawsBeforeStartLocation);

    // Reset the context
    CGContextScaleCTM(ctx, invS.x, invS.y);

    // Continue to draw whatever else ...

    // Clean up the memory used by Quartz
    CGGradientRelease(gradient);

    return UIGraphicsGetImageFromCurrentImageContext();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:31:41.217

好的，我有一个新的......我认为它好多了。平滑度等被硬编码在`STROKECOUNT`等中`MAXSTROKEWIDTH`。这实际上使椭圆形向外增长了一点。需要进行一些调整才能强制停留在椭圆形矩形内。

```
+(UIImage*)ellipseWithSmoothEdges:(const CGSize)SIZECONTEXT oval:(const CGRect)RECTFOROVAL {
    const CGFloat SCALE = 2.0f;

    UIColor* colorPaint = [UIColor greenColor];

    UIGraphicsBeginImageContextWithOptions(SIZECONTEXT, NO, SCALE);
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIBezierPath* pathEllipseForClippingto = [UIBezierPath bezierPathWithOvalInRect:RECTFOROVAL];
    const int STROKECOUNT = 70;
    const CGFloat BASEALPHA = 1.0f / (CGFloat)STROKECOUNT;
    const CGFloat MAXSTROKEWIDTH = 50;
    UIBezierPath* path = [UIBezierPath bezierPathWithOvalInRect:RECTFOROVAL];

    CGContextSaveGState(context); {
        [pathEllipseForClippingto addClip];
        [colorPaint setFill];
        [path fill];
        CGContextRestoreGState(context);
    }
    for (int i = 0; i < STROKECOUNT; i++) {
        [[UIColor colorWithRed:0 green:1 blue:0 alpha:BASEALPHA * i] setStroke];
        path.lineWidth = MAXSTROKEWIDTH - i;
        [path stroke];
    }

    UIImage* imageGenerated = UIGraphicsGetImageFromCurrentImageContext();

    return imageGenerated;
} 
```

# core-data - Coredata - 使用配置来管理瞬态实体

> ID：15084525
> 
> 赞同：0
> 
> 时间：2013-02-26T08:30:51.553
> 
> 标签：core-data, memory, sqlite, entities, transient

我正在尝试使用配置来管理核心数据中的瞬态实体。

*   首先，我创建了 2 个名为“Persistent”和“Transient”的 coredata 配置。
*   然后，我创建了实体，并将它们与正确的配置相关联，具体取决于实体是否可持久。
*   最后，使用persistentStoreCoordinator，我创建了一个Sqlite 类型的持久存储并将其链接到“Persistent”配置。我还创建了一个内存类型的持久存储并将其链接到“瞬态”配置。

**测试**：我启动iphone模拟器，我的应用程序启动成功。我关闭模拟器并在数据库文件上启动 sqlite3。我列出了表（ .tables 命令），我可以看到已经为我的临时实体创建了一些表 => 所以，它不起作用。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    NSLog(@"++++++++ persistentStoreCoordinator");

    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *persistStoreURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"ProjectToDelete.sqlite"];

    NSMutableDictionary *sqliteOptions = [NSMutableDictionary dictionary];
    [sqliteOptions setObject:@"WAL" forKey:@"journal_mode"];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                             sqliteOptions, NSSQLitePragmasOption,
                             nil];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:@"Persistent" URL:persistStoreURL options:options error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSInMemoryStoreType configuration:@"Transient" URL:[NSURL URLWithString:@"memory://store"] options:nil error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _persistentStoreCoordinator;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:57:33.303

我认为您正在混合 CoreData 的不同概念。

CoreData 不是 ORM，而是管理对象及其关系的对象图。

您可以在实体上具有瞬态*属性*，这些属性不会成为表示该实体的表中的列，仅在运行时生成，而对象在内存中。

*抽象*实体永远不会被实例化，如果您有很多从一个超级对象继承的对象，通常会使用它们，即员工管理系统可能有一个抽象的个人实体，而员工、经理、董事和经理都是继承自 Person

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:18:12.173

正如评论中提到的，尝试通过模型编辑器配置数据存储是行不通的。这些配置可以让您添加预定的提取，但它们不允许您配置数据的存储位置。这是使用任何这些方法的关键。如博客文章中所述，您将需要添加一些代码，以正确使用任何这些技术。

# java - 如何在 Asana 中创建新的工作空间？

> ID：15084532
> 
> 赞同：1
> 
> 时间：2013-02-26T08:31:06.820
> 
> 标签：java, asana

我可以使用 Asana API (JAVA) 在 Asana 中创建任务。

```
 import org.apache.commons.httpclient.HttpClient;
    import org.apache.commons.httpclient.UsernamePasswordCredentials;
    import org.apache.commons.httpclient.auth.AuthScope;
    import org.apache.commons.httpclient.methods.PostMethod;
    import org.apache.commons.httpclient.methods.PutMethod;

    import java.io.BufferedReader;
    import java.io.InputStreamReader;

    class Main {
        public static void main(String[] args) {
            String data = "{" +
                    "    \"data\": {" +
                    "        \"workspace\": 4210637464884," +
                    "        \"name\": \"Task 2 this is it\"," +
                    "        \"notes\": \"NOTES_ABOUT_TASK_GO_HERE\"," +
                    "        \"assignee\": \"ykhonskiy@gmail.com\"" +
                    "   }," +
                    "    \"options\": {" +
                    "        \"fields\": \"name\"" +
                    "    }" +
                    "}";

            HttpClient client = new HttpClient();
            client.getParams().setAuthenticationPreemptive(true);
            client.getParams().setParameter("http.useragent", "Test Client");
            client.getState().setCredentials(
                    new AuthScope("app.asana.com", 443, "realm"),
                    new UsernamePasswordCredentials("<APIKEY>", "")
            );

            BufferedReader br = null;
            PostMethod method = new PostMethod("https://app.asana.com/api/1.0/tasks");
            method.setDoAuthentication(true);

            try {
                method.setRequestBody(data);
                int returnCode = client.executeMethod(method);
                System.out.println("Return code: " + returnCode);
                br = new BufferedReader(new InputStreamReader(method.getResponseBodyAsStream()));
                String readLine;
                while (((readLine = br.readLine()) != null)) {
                    System.out.println(readLine);
                }
            } catch (Exception e) {
                System.out.println(e.getMessage());
            } finally {
                method.releaseConnection();
                if (br != null) try {
                    br.close();
                } catch (Exception fe) {
                    System.err.println(fe);
                }
            }
            createNewWorkSpace();

        }
    } 
```

它工作正常。现在我想创建一个工作区。如何？我试着用

```
PutMethod method = new PutMethod("https://app.asana.com/api/1.0/workspaces");
String data = "{" +
            "  \"data\": {" +
            "    \"id\": 1234," +
            "    \"name\": \"Everyone's Favorite Workspace\"" +
            "  }}"; 
```

我得到 Return code: 404 {"errors":[{"message":"No matching route for request"}]}

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:07:59.860

Asana API 不支持创建新工作区。目前它只支持更新“特定的、现有的工作空间”，甚至这仅限于更新工作空间的名称。

根据 Asana API 文档：[https ://asana.com/developers/api-reference/workspaces](https://asana.com/developers/api-reference/workspaces)

PS 我从帖子中编辑了您的 API 密钥，以防万一它实际上是您真正的 API 密钥！

# node.js - 如何获取 Mongoose 实例的所有模型的对象

> ID：15084534
> 
> 赞同：8
> 
> 时间：2013-02-26T08:31:13.380
> 
> 标签：node.js, mongoose

我知道[`mongoose.model("myModel")`](http://mongoosejs.com/docs/api.html#index_Mongoose-model)返回`myModel`模型。但是我怎样才能让 Mongoose 给我一个当前已注册的所有模型的数组/对象/列表？

我认为这在某种程度上是一个设计缺陷。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T08:35:18.960

截至目前，有一种官方方式：[`Mongoose#modelNames()`](http://mongoosejs.com/docs/api.html#index_Mongoose-modelNames).

* * *

您可以通过 访问所有模型的对象`mongoose.models`。这看起来像这样：

```
models:
  { myModel:
    { [Function: model]
      modelName: 'myModel',
      auth: [Function],
      model: [Function: model],
      options: undefined,
      db: [Object],
      schema: [Object],
      collection: [Object],
      base: [Circular] } }, 
```

在我看来，摆弄 API 私有的东西是不好的，所以这是 Mongoose 的一点设计缺陷（参见[LearnBoost/mongoose#1362](https://github.com/LearnBoost/mongoose/issues/1362)）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-03T12:45:09.773

您可以使用以下方法获取所有现有模型的数组：

```
var mongoose = require('mongoose');
var models = mongoose.modelNames() 
```

# mysql - Mysql查询空白数据

> ID：15084535
> 
> 赞同：1
> 
> 时间：2013-02-26T08:31:14.563
> 
> 标签：mysql, sql

我可以运行执行以下操作的查询吗？

表：用户
列：用户名、电子邮件

如果用户名是空白/空，则使用该行中的电子邮件更新用户名

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:32:25.343

假设通过`BLANK/EMPTY`手段`NULL`或没有，

如果您的意思是您只想投影 or `SELECT`，请使用`COALESCE`

```
SELECT COALESCE(username, email) username,
       email
FROM   users 
```

但如果您想永久更新该字段，

```
UPDATE users
SET    username =  email
WHERE  userName IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:34:58.323

```
Update users set username = email where username is null  or username = '' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:34:59.663

这应该这样做：

```
UPDATE users
SET username = email
WHERE username = ""
OR username is NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:33:58.840

```
UPDATE
    users
SET
    users.username = users.email
WHERE users.username IS NULL OR LENGTH(users.username)=0; 
```

# modelica - 变量的增量出错

> ID：15084544
> 
> 赞同：0
> 
> 时间：2013-02-26T08:32:04.453
> 
> 标签：modelica, dymola

变量现在从 j = 1 开始，但增量是错误的。对于 t = 0.5，它的值应该是 2，对于 t = 1，j = 3 等等...您会在下图中看到错误

![变量 j](../Images/411c20064c5e1bdb311caf44707e3c3b.png)

```
class abc

import Modelica.SIunits;

parameter SIunits.Time delta_t = 0.5;

constant Real a[:] = {4,2,6,-1,3,5,7,4,-3,-6};

Real x;
Integer j(start=1);
Integer k = size(a,1);

algorithm
when {(sample(delta_t, delta_t) and j < k),j == 1} then

     x := a[pre(j)];
     j := pre(j) + 1;

end when;
end abc; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:47:23.540

当我将您的代码放入 Dymola 2013 时，我得到了您所期望的，`j==2`@ `time==0.5`。

这个情节从何而来？Dymola 不会生成这样的图，因为`j`它是离散变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:24:44.303

好的，我发现了问题。Dymola 可以生成这样的图，这取决于输出设置。上面的图是在没有设置“在事件中存储变量”的情况下生成的，当我设置它时，我得到了正确的结果。

# c# - MVC4 中的 AttributeUsage 有什么作用

> ID：15084546
> 
> 赞同：9
> 
> 时间：2013-02-26T08:32:08.060
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

在我的示例代码中，我有以下内容：

```
namespace WebUx.Filters
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext) 
```

有人可以向我解释这是如何工作的吗？这会自动附加到每个类方法还是仅附加到控制器类？我同时使用 MVC 和 web api。它还会附加到 web api 方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T08:33:33.480

`AttributeUsage`不特定于 MVC。它描述了可以在何处以及如何使用属性。

在大多数（所有？）情况下，编译器将强制执行这些约束。

然而，没有什么“神奇”的事情发生。你仍然需要用属性来装饰类/成员，因为它可以做任何事情。换句话说，它不会自动应用于所有类型或成员。*

另请参阅：http: [//msdn.microsoft.com/en-us/library/tw5zxet9 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/tw5zxet9(v=vs.110).aspx)

*^(该`Inherited`属性确实提供了非常有限的自动化。请参阅[继承如何为属性工作？](https://stackoverflow.com/questions/1240960/attributes-and-inheritance).)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:34:37.273

确定如何使用自定义属性类。AttributeUsage 是一种属性，可应用于自定义属性定义以控制如何应用新属性。

所以它基本上为编译器提供了一些关于你将要实现的属性类的额外信息。

你有几个很好的例子：http: [//msdn.microsoft.com/en-us/library/tw5zxet9 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tw5zxet9(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:34:34.040

它与所有其他类型的应用程序完全相同（没有特殊的 MVC 行为） - 指定*可以*使用特定属性的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:38:00.073

AttributeUsage 规定了可以在何处以及如何使用该属性。因此，您的示例可以应用于类或方法，但每个实体只能应用一次。

它不会自动附加到任何类。您必须自己明确地这样做。

请参阅有关 AttributeUsage 的 C# 编程指南：http: [//msdn.microsoft.com/en-us/library/tw5zxet9 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/tw5zxet9(v=vs.80).aspx)

# java - 使用 JPA 从表中删除所有行

> ID：15084550
> 
> 赞同：18
> 
> 时间：2013-02-26T08:32:22.083
> 
> 标签：java, database, jpa

我想使用 JPA 从特定表中删除所有行。

我做了什么：

```
public class EmptyBomTables extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @PersistenceContext(unitName = "xxx")
    public EntityManager em;

    @Resource
    UserTransaction utx;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        Query q1 = em.createQuery("DELETE FROM BomModule");
        Query q2 = em.createQuery("DELETE FROM BomItem");
        Query q3 = em.createQuery("DELETE FROM ItemModuleConnection");
        Query q4 = em.createQuery("DELETE FROM ModuleConnection");

        try {
            utx.begin();
        } catch (NotSupportedException | SystemException e) {
            e.printStackTrace();
        }

        q1.executeUpdate();
        q2.executeUpdate();
        q3.executeUpdate();
        q4.executeUpdate();

        try {
            utx.commit();
        } catch (SecurityException | IllegalStateException | RollbackException | HeuristicMixedException | HeuristicRollbackException | SystemException e) {
            e.printStackTrace();
        }
    }
} 
```

错误：

```
 09:30:30,197 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/SSIS2].[EmptyBomTables]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet EmptyBomTables threw exception: javax.persistence.TransactionRequiredException: Executing an update/delete query
    at org.hibernate.ejb.AbstractQueryImpl.executeUpdate(AbstractQueryImpl.java:96) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.container.QueryNonTxInvocationDetacher.executeUpdate(QueryNonTxInvocationDetacher.java:80) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at com.sicap.ssis2.bom.EmptyBomTables.doGet(EmptyBomTables.java:50) [classes:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

09:30:30,218 ERROR [org.jboss.as.txn] (http-localhost-127.0.0.1-8080-1) JBAS010152: APPLICATION ERROR: transaction still active in request with status 1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T09:13:54.263

这就是问题所在，一切都必须在同一个 try/catch 中：

```
try {

    utx.begin();

    Query q3 = em.createQuery("DELETE FROM ItemModuleConnection");
    Query q4 = em.createQuery("DELETE FROM ModuleConnection");
    Query q1 = em.createQuery("DELETE FROM BomModule");
    Query q2 = em.createQuery("DELETE FROM BomItem");

    q1.executeUpdate();
    q2.executeUpdate();
    q3.executeUpdate();
    q4.executeUpdate();

    utx.commit();
} catch (NotSupportedException | SystemException | SecurityException | IllegalStateException | RollbackException | HeuristicMixedException | HeuristicRollbackException e) {
    e.printStackTrace();
} 
```

# c++ - Windows GDI+ 应用程序中出现奇怪的显示错误

> ID：15084555
> 
> 赞同：1
> 
> 时间：2013-02-26T08:32:35.967
> 
> 标签：c++, winapi, user-interface, gdi+

我在使用 GDI+ 绘制应用程序的用户界面时遇到了一个奇怪的问题。有时会出现显示错误，显示其他应用程序的工件。有时我的文本控件的边框完全用黑色绘制。

在某些情况下，问题还不仅仅是一个简单的显示错误。发生这种情况时，我的应用程序中嵌入了另一个应用程序的菜单或上下文菜单。此菜单不仅可见，您还可以通过将鼠标悬停在菜单条目上方并展开子菜单来突出显示菜单条目。但是，当您单击条目时，它们背后没有任何功能。这些菜单似乎始终是 Windows 资源管理器的一部分。

我不知道应该从哪里开始寻找这些问题的原因。也许这里的某人可以指出问题的可能根源，甚至是解决方案？

**澄清：**相同的代码在具有不同硬件、不同显卡驱动程序和不同操作系统（XP、Win7、Server 2008）的多台 PC 上显示此错误。我很想发布一些代码，但它非常复杂并且在整个应用程序中广泛传播。而且由于我不知道问题的根本原因是什么，因此我无法隔离代码的正确部分。

**以下是一些截图：**

我的文本控件和面板控件周围有黑色边框：

![](../Images/4c94d6829f190df2af3fded4cc9cceb2.png)

另一个应用程序的内容绘制在我的应用程序窗口中。您可以从左侧的 Windows 资源管理器中看到上下文菜单，在右侧看到 Excel 工作表的一部分。表格下部的网格表通常直接位于窗口标题栏下方： 在显示资源管理器上下文菜单的表格中显示错误：

![](../Images/3569b6fde90fd0fa7df17bd5d8cbfc4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:31:31.957

正如你所说，你嵌入了另一个应用程序，我猜你正在使用经典的 GDI 调用和 GDI+？那是一件乏味的事情。我做了同样的事情，它导致了一些问题，我的程序的某些部分没有被绘制并且变得不可见。

我的解决方案是（并且是）在使用 GDI-Functions 之前始终销毁所有 Gdiplus::Graphics - 或者您可以尝试调用 Graphics::Flush。

毕竟我必须继续说开始使用 GDI+ 是一个坏主意，将它混合到现有的 GDI 应用程序中是一个可怕的主意。您应该只使用一个 API（也许是 direct3D）。GDI+ 不是基于 GDI - 显然两者是并行工作的。

我刚刚发现这篇文章描述了混合 GDI 和 GDI+ 的一些限制：https: [//support.microsoft.com/en-gb/help/311221/info-interoperability-between-gdi-and-gdi](https://support.microsoft.com/en-gb/help/311221/info-interoperability-between-gdi-and-gdi)

# spring - Junit 使用 Spring 和 Hibernate 测试 DAO 层

> ID：15084557
> 
> 赞同：0
> 
> 时间：2013-02-26T08:32:39.867
> 
> 标签：spring, hibernate, junit

我尝试测试简单的类：

```
public class GenericDAO {

    @Autowired
    protected SessionFactory sessionFactory;

    public <T> Serializable create(final T o) {
        return sessionFactory.getCurrentSession().save(o);
    }

    @SuppressWarnings("unchecked")
    public <T> T find(final Class<T> cl, final long id) {
        return (T) sessionFactory.getCurrentSession().get(cl, id);
    }

    @SuppressWarnings("unchecked")
    public <T> T update(final T o) {
        return (T) sessionFactory.getCurrentSession().merge(o);
    }

    public <T> void delete(final T o) {
        sessionFactory.getCurrentSession().delete(o);
    }

    @SuppressWarnings("unchecked")
    public <T> List<T> getAll(final Class<T> cl) {
        return (List<T>) sessionFactory.getCurrentSession()
                .createCriteria(cl).setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY).list();
    }
} 
```

在我的测试类中，我使用 @Before 创建会话并填充数据库进行测试，如下所示：

```
 @Autowired
    protected SessionFactory sessionFactory;    

    @Before
    public void setUp() {
        Session session = sessionFactory.getCurrentSession();
        session.save(user);
        session.save(user1);
        session.save(user2);
        session.flush();
        // Otherwise the query returns the existing order 
        session.clear();
    } 
```

至于我最好使用@BeforeClass 来填充数据库，因为我只需要在上课开始时创建一次测试日期。但是这个方法必须是静态的，所以我不能自动装配 sessionFactory。那么什么是最好的解决方案呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:40:27.393

我对这个问题的解决方案是以`DataSource`这样一种方式实现，它将所有方法调用转发到真实数据源。

当从 my 请求连接时`DataSource`，我检查这是否是第一个连接（只是一个布尔标志）。如果是，我会在返回连接之前设置数据库。

伪代码：

```
getConnection() {
    conn = delegate.getConnection()
    if( firstConnection ) {
        firstConnection = false;
        setupDatabase( conn );
    }
    return conn;
} 
```

这也使数据库设置变得懒惰。

注意：你的代码测试了很多你不应该测试的东西：Hibernate、JDBC、DB 驱动程序、数据库。通常，您应该假设这些部件可以工作或由其他人测试。

对于大多数测试，[模拟`GenericDAO`](http://en.wikipedia.org/wiki/Mock_object).

# php - 将 $_POST 变量从一页传递到另一页

> ID：15084561
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:33:16.357
> 
> 标签：php

假设我有三个 PHP 文件：`1.php`, `2.php`,`3.php`

`1.php`使用 POST 方法将数据发送到`2.php`. 现在我想用 POST 方法`2.php`发送相同的数据。`3.php`我想用一个按钮链接`2.php`到。`3.php`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:34:37.937

使用锚标签

```
<a href="3.php?var=<?php $_POST['var']?>"></a> 
```

或者

使用带有隐藏字段的表单：

```
<input type="hidden" name="var" value="<?php $_POST['var']?>" /> 
```

并提交表格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:39:30.650

以下是关于如何执行此操作的 4 个选项（前 3 个不需要用户操作，第 3 个可以自动提交，但可以让用户看到并手动提交）：

*   在 2.php 中，您只需使用**`include '3.php';`**- 因此可以`$_POST`在 3.php中访问
*   使用**[stream_context_create](http://php.net/manual/en/function.stream-context-create.php)**
*   使用**[卷曲](http://php.net/manual/en/book.curl.php)**
*   使用提交按钮重新生成表单。

* * *

```
 <form action="3.php" method="POST">
 <?php
 foreach ($_POST as $key => $value) {
     echo "<input type='text' name='{$key}' value='{$value}' />"; // if it's an array, you can serialize it
 }
 ?><input type="submit"></form> 
```

您现在可以将其展示给用户，或使用 javascript 提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:40:17.197

您将读取 2.php 中的数据并创建一个包含该数据的隐藏输入标签的表单，该表单将 3.php 作为定义的操作源。

例如

```
<form action="3.php">

   <input type=hidden" name="foo" value="bar">
</form> 
```

将发布 { :foo => bar }

到 3.php

也许您也只是考虑使用用户会话并将值保存在其中

# javascript - 在主干视图中渲染子视图

> ID：15084564
> 
> 赞同：0
> 
> 时间：2013-02-26T08:33:21.713
> 
> 标签：javascript, jquery, backbone.js, requirejs

嗨，我正在努力理解我将如何执行以下操作。

我有一个要渲染的主干视图，然后我想向该视图中的 dom 元素添加另一个视图。

这是我的代码：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/common/parent',
  'text!templates/currentAccounts.html',
  'text!templates/guidesTools.html'
], function($, _, Backbone, ParentView, mainTemplate, subTemplate){

var accountsView = ParentView.extend({
    render : function() {
        this.$el.html(mainTemplate);
    }
});

return new accountsView; 
```

});

我现在需要将子模板 (guidesTolls.html) 附加到主模板中的 dom 元素。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:48:13.017

请尝试从[http://backbonejs.org/#examples-todos学习示例](http://backbonejs.org/#examples-todos)

这部分有两个模型和三个视图

*   型号/系列
    *   待办事项模型
    *   TodoList 集合
*   意见
    *   待办事项视图
    *   待办事项列表视图
    *   应用视图

App View 渲染一个基于 TodoList View 的视图，它渲染每个 Todo 对象的 Todo View。

你的情况比这更简单。具体来说，您可以做这样的事情来获得带有子视图的视图

```
<div id="main">
</div>
<script type="text/template" id="main-template">
    <h3>main view</h3>
    <ul>
      <li><%= account.id %></li>
      <li><%= account.name %></li>
    <ul>
    <div id="guide-tools"></div>
</script> 
```

Javascript：

```
var accountsView = ParentView.extend({
    el: $("#main")
    render : function() {
        var template = _.template($("#main-template").html());
        var guideTemplate = "Guide Tool Text";
        this.$el.html(template(this.model.toJSON()));
        this.$("#guide-tools").html(guideTemplate);  // will insert the guide page to the #main div
    }
}) 
```

注意：我不知道如何从 html 文件中获取文本，尤其是在您使用服务器端脚本的情况下。

# android - FragmentPagerAdapter 实现 LoaderManager.LoaderCallbacks

> ID：15084566
> 
> 赞同：0
> 
> 时间：2013-02-26T08:33:24.220
> 
> 标签：android, android-loadermanager, fragmentpageradapter

我试图`FragmentPagerAdapter`用游标加载器实现一个。但是，似乎我无法访问其中的游标，`getItem()`因为在尝试访问游标时出现空引用错误，因为它尚未在`onLoadFinished()`.

`onLoadFinished()`完成之前不会完成`getItem()`？

有没有更好的方法来加载游标数据？我可以`ContentProvider`直接查询并将结果存储在我的光标中，但认为加载器是首选。

```
public class MyAdapter extends FragmentPagerAdapter implements LoaderManager.LoaderCallbacks<Cursor>{

private Cursor cursor;

public MyAdapter(FragmentManager fm) {
    super(fm);
    getLoaderManager().initLoader(0, null, this);

}

@Override
public int getCount() {
    return 13;
}

@Override
public Fragment getItem(int position) {

    Bundle args = new Bundle();

    cursor.moveToPosition(position);
    args.putString(TextViewFragment.TITLE, cursor.getString(1));
    args.putInt(TextViewFragment.POSITION_KEY, position);
    return TextViewFragment.newInstance(args);

}

@Override
public CharSequence getPageTitle(int position) {
    return "Fragment # " + position;
}

@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    // TODO Auto-generated method stub

    CursorLoader cursorLoader = new CursorLoader(getActivity(), TestContentProvider.CONTENT_URI, null, null, null, null);
    return cursorLoader;
}

@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
    // TODO Auto-generated method stub
    cursor = arg1;
    //throw new IllegalArgumentException("We are HEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHEREHERE");
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    // TODO Auto-generated method stub
}

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:36:01.977

您是否尝试过将加载程序放在片段中而不是适配器中，并且可能是一种激活它的方法。尝试在活动中运行加载程序并使用 FragmentStatePageAdapter（类似于列表适配器）而不是 FragmentPagerAdapter 更新 ViewPager 适配器。

# objective-c - 停止执行直到前面的方法完成？

> ID：15084568
> 
> 赞同：1
> 
> 时间：2013-02-26T08:33:32.283
> 
> 标签：objective-c, ios5.1

我有一个 IBAction，它看起来像这样。

```
- (IBAction) onPressed: (id) sender {

   [self openMyDelegateToSeeIfIAmReady];

   if (AmIReady == YES)
   {
      [self doMyWork];
   }
} 
```

现在，这行不通。`AmIReady`是一个布尔值，它变为`YES`in `openMyDelegateToSeeIfIAmReady`。问题是，在`AmIReady`变得之前`YES`，这段代码

```
if (AmIReady == YES)
{
   [self doMyWork];
} 
```

被调用并且`doMyWork`永远不会被调用。我怎样才能让这个方法等到它完成`[self openMyDelegateToSeeIfIAmReady]`？

编辑：

这是我所拥有的`openMyDelegateToSeeIfIAmReady`

```
- (void) openMyDelegateToSeeIfIAmReady
{
    MyViewController *mvc = [[MyViewController alloc]initWithNibName:@"MyViewController" bundle:nil];
    mvc.delegate  = self;

    [self presentModalViewController:mvc animated:YES];
    [mvc release];
    amIReady = YES;
} 
```

同样在这个委托（MyViewCrontroller）中，它需要用户的输入。如果输入了用户输入，我需要运行`doMyWork`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:55:28.137

如果您想在呈现模态视图控制器后运行一些代码，请使用`-[ UIViewController presentViewController:animated:completion:]`并将一个块传递给“完成”参数。

（此方法替代`presentModalViewController:animated:`）

将您的代码更改为：

```
-(IBAction)onPressed:(id)sender 
{
    MyViewController * controller = [ [ MyViewController alloc ] initWithNibName:@"MyViewController" bundle:nil ];
    controller.delegate = self;
    [ self presentViewController:controller animated:YES completion:^{
        [ self doMyWork ] ;
    }]
} 
```

# android - 从数据库中查询标题列并将其设置为 TextView

> ID：15084582
> 
> 赞同：0
> 
> 时间：2013-02-26T08:34:27.417
> 
> 标签：android, sqlite, gridview, arraylist, textview

我有来自数据库的查询标题列，并想在 GridView 的 TextView 中设置它。

如何？

CafeDatasource

```
public List<Model_Insert> findTblCafe(){
    List<Model_Insert> model_Inserts = new ArrayList<Model_Insert>();
    Cursor cursor = database.query(CafeDbOpenHelper.TABLE_CAFE, rtv_tbl_Cafe,
            null, null, null, null, null);
    Log.i("number", "return" + cursor.getCount()+ " rows");

    if(cursor.getCount() > 0){
        while (cursor.moveToNext()) {
            Model_Insert model_Insert = new Model_Insert();
            model_Insert.setCafe_Id(cursor.getInt(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_ID)));
            model_Insert.setCafe_Title(cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_TITLE)));
            model_Insert.setCafe_Been(cursor.getInt(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_BEEN)));
            model_Insert.setCafe_Want(cursor.getInt(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_WANT)));
            model_Insert.setCafe_Address(cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_ADDRESS)));
            model_Insert.setCafe_Thumb(cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_THUMB)));
            model_Insert.setCafe_Description(cursor.getString(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_DESCRIPTION)));
            model_Insert.setCafe_WifiRate(cursor.getInt(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_WIFI_RATE)));
            model_Insert.setCafe_CoffeeRate(cursor.getInt(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_COFFEE_RATE)));
            model_Insert.setCafe_Latitude(cursor.getDouble(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_LATITUDE)));
            model_Insert.setCafe_Longitude(cursor.getDouble(cursor.getColumnIndex(CafeDbOpenHelper.CAFE_LONGITUDE)));
            model_Inserts.add(model_Insert);
        }
    }

    return model_Inserts;
} 
```

主要活动

```
public ArrayList<HashMap<String, String>> placeList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_card);

===============================================================
dataSource = new CafeDataSource(this);
dataSource.open();
List<Model_Insert> model_Inserts = dataSource.findTblCafe();// query database (findTblCafe)

if(model_Inserts.size() == 0){
    new DownloadImageTask().execute();
    model_Inserts = dataSource.findTblCafe();
} 
===============================================================

} // End onCreate

public void ShowAllContent() {
    GridView gridView1 = (GridView) findViewById(R.id.grid_all);
    gridView1.setAdapter(new ImageAdapter(TopActivity.this, placeList));
}

public class DownloadImageTask extends AsyncTask<String, Void, Void>{

    @Override
    protected Void doInBackground(String... params) {

        placeList = new ArrayList<HashMap<String,String>>();
        JSONParser jParser = new JSONParser();
        JSONObject jsonO = jParser.getJSONUrl(url);

        try {
            places = jsonO.getJSONArray("place");

            for (int i = 0; i < places.length(); i++) {
                JSONObject jobj = places.getJSONObject(i);

                int cafe_id = jobj.getInt(TAG_CAFE_ID);
                String cafe_title = jobj.getString(TAG_CAFE_TITLE);
                int cafe_been = jobj.getInt(TAG_CAFE_BEEN);
                int cafe_want = jobj.getInt(TAG_CAFE_WANT);
                String cafe_address = jobj.getString(TAG_CAFE_ADDRESS);
                String cafe_thumb = jobj.getString(TAG_CAFE_THUMB);
                String cafe_description = jobj.getString(TAG_CAFE_DESCRIPTION);
                int cafe_wifi_rate = jobj.getInt(TAG_CAFE_WIFI_RATE);
                int cafe_coffee_rate = jobj.getInt(TAG_CAFE_COFFEE_RATE);
                double cafe_latitude = jobj.getDouble(TAG_CAFE_LATITUDE);
                double cafe_longitude = jobj.getDouble(TAG_CAFE_LONGITUDE);

                // Table Save
                Model_Insert model_Insert = new Model_Insert();
                model_Insert.setCafe_Id(cafe_id);
                model_Insert.setCafe_Been(cafe_been);
                model_Insert.setCafe_Want(cafe_want);
                model_Insert = dataSource.createTableCafeSave(model_Insert);
                Log.i("data", " ID " + model_Insert.getCafe_Id());

                // Table Cafe
                model_Insert = new Model_Insert();
                model_Insert.setCafe_Id(cafe_id);
                model_Insert.setCafe_Title(cafe_title);
                model_Insert.setCafe_Been(cafe_been);
                model_Insert.setCafe_Want(cafe_want);
                model_Insert.setCafe_Address(cafe_address);
                model_Insert.setCafe_Thumb(cafe_thumb);
                model_Insert.setCafe_Description(cafe_description);
                model_Insert.setCafe_WifiRate(cafe_wifi_rate);
                model_Insert.setCafe_CoffeeRate(cafe_coffee_rate);
                model_Insert.setCafe_Latitude(cafe_latitude);
                model_Insert.setCafe_Longitude(cafe_longitude);
                model_Insert = dataSource.createTableCafe(model_Insert);
                Log.i("data", " Picture " + model_Insert.getCafe_Id());

                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_CAFE_TITLE, cafe_title);

                placeList.add(map);

            }

            // for " piture " Object in json
            pictures = jsonO.getJSONArray("pictures");
            for (int i = 0; i < pictures.length(); i++) {
                JSONObject jObj = pictures.getJSONObject(i);
                int cafe_id = jObj.getInt(TAG_CAFE_ID);
                String picture_url = jObj.getString(TAG_PICTURE_URL);

                // Table Picture
                Model_Insert model_Insert = new Model_Insert();
                model_Insert.setCafe_Id(cafe_id);
                model_Insert.setPitureUrl(picture_url);
                model_Insert = dataSource.createTablePicture(model_Insert);
                Log.i("pic", " Picture " + model_Insert.getPitureurl());

                HashMap<String, String> map = new HashMap<String, String>();
                placeList.add(map);

            }
        } catch (JSONException e) {
            // TODO: handle exception
        }
        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(); // When Finish Show Content

    }

}

private static class ViewHolder {
    public ImageView imageview;
    public TextView txtTitle;
}

public class ImageAdapter extends BaseAdapter {
    private ArrayList<HashMap<String, String>> MyArr = new ArrayList<HashMap<String,String>>();
    public ImageAdapter(Context c, ArrayList<HashMap<String, String>> myArrayList){
        context = c;
        MyArr = myArrayList;
    }
    @Override
    public int getCount() {
        return MyArr.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View converView, ViewGroup parent) {
        ViewHolder viewHolder = new ViewHolder();
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if(converView == null){
            converView = inflater.inflate(R.layout.grid_item, null);
        }
        viewHolder.imageview = (ImageView) converView.findViewById(R.id.imv_card_cafe);
        viewHolder.txtTitle = (TextView) converView.findViewById(R.id.txt_title);

        /* String str = "frute : juse text";
        Integer len;
        len = str.length();
        if(len > 20){
            String result = str.substring(0, 15);
            viewHolder.txtTitle.setText(result); 

        }  
        else {
            viewHolder.txtTitle.setText(str);
        } */

=============================================================================
        viewHolder.txtTitle.setText(...............................?);
=============================================================================
        viewHolder.imageview.setImageResource(mThumb[position]);

        return converView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:59:34.193

因为您要在 List 中获取所有标题，所以`model_Inserts`您需要将此 List 传递给 Custom`BaseAdapter`以便在 TextView 中显示为：

改变`ShowAllContent()`方法为：

```
public void ShowAllContent() {
 GridView gridView1 = (GridView) findViewById(R.id.grid_all);
 gridView1.setAdapter(new ImageAdapter(TopActivity.this, placeList,model_Inserts));
} 
```

和`ImageAdapter`构造函数：

```
public class ImageAdapter extends BaseAdapter {
    private ArrayList<HashMap<String, String>> MyArr = 
                                       new ArrayList<HashMap<String,String>>();
    List<Model_Insert> model_Inserts=null;
    public ImageAdapter(Context c, 
               ArrayList<HashMap<String, String>> myArrayList,
               List<Model_Insert> model_Inserts){
        context = c;
        MyArr = myArrayList;
        this.model_Inserts=model_Inserts;
    }

 ///your code here... 
```

现在`model_Inserts`用于获取标题以显示在 getView 中

# php - 从论坛中提取数据

> ID：15084586
> 
> 赞同：0
> 
> 时间：2013-02-26T08:34:44.560
> 
> 标签：php, forum, vbulletin

我想根据我输入的关键字从 php 论坛中提取数据。有没有准备好可以做到这一点的东西？举个例子 [Kadinlarkulubu.com/forum.php](http://Kadinlarkulubu.com/forum.php) 关键词 ios, android

多亏了这些信息，我想获取日期、时间、消息、消息的 URL、消息中的关键字、写此消息的成员的昵称。

我需要在不同的论坛工作，所以我需要一个或多个可以在 vBulletin 等主要大型平台上运行的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:00:28.277

您需要创建自己的[网络爬虫](http://en.wikipedia.org/wiki/Web_crawler)。如果您希望它在各种不同的平台上工作，则必须在该爬虫上创建变体。

首先，选择你最喜欢的论坛，并给它一个种子页面（开始抓取的页面）。小心行事，因为您可能需要登录才能查看帖子，如果是这种情况，这可能并不容易（例如，制作一个让您登录并破坏验证码的爬虫）。您还可以使用搜索功能（因为许多论坛都有类似于 的搜索 URL `?q=your_tag&p=1`，这可以使事情变得更容易。

只需检查您是否在同一个域上，并且您没有进入无限循环，除此之外，您应该没问题。

预计这是一个长期项目:)

如果论坛提供 API，另一种选择是使用 API，但我怀疑你会这么幸运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:44:23.340

2 种方法 只有当论坛的所有者为您提供访问论坛 API（如果有）或数据库的访问权限时，简单的方法才有可能

最难的方法是制作一个抓取器，逐页读取论坛并将您喜欢的信息解析为您可以使用的东西。

# java - hbase 没有启动

> ID：15084587
> 
> 赞同：0
> 
> 时间：2013-02-26T08:34:49.483
> 
> 标签：java, ubuntu, hadoop, hbase

我正在尝试从 java 客户端 api 在 hbase 中获得连接。

这是我的代码。在这里，我编写了一些代码来获取 hbase 中的连接。

运行此代码时，我没有收到任何错误。但我不能用这个创建任何表。

```
Configuration hbaseConfiguration = HBaseConfiguration.create();
    try {

        hbaseConfiguration.set("hbase.rootdir",
                "file:///home/sample/hbase");
        hbaseConfiguration.set("hbase.zookeeper.property.dataDir",
                "/home/sample/zookeeper");
        hbaseConfiguration.set("hbase.zookeeper.quorum",
                "sample");
        Configuration newConfig = new Configuration(hbaseConfiguration);
        HConnection connection = HConnectionManager
                .getConnection(newConfig);
        hBaseAdmin = new HBaseAdmin(connection);
        hBaseAdmin.createTable(new HTableDescriptor("sample"));
        if (!hBaseAdmin.isMasterRunning())
            throw new Exception("Hbase is not running");
        tableFactory = new HTableFactory();
    } catch (Exception e) {
        throw new Exception("Hbase is not running");
    } 
```

谁能帮我解决这个问题？？谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T20:52:55.637

该`hbase.rootdir`设置将被完全忽略。只能在*hbase-site.xml*文件中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:07:58.893

更改以下代码

```
 hbaseConfiguration.set("hbase.rootdir",
            "file:///home/sample/hbase");
    hbaseConfiguration.set("hbase.zookeeper.property.dataDir",
            "/home/sample/zookeeper");
    hbaseConfiguration.set("hbase.zookeeper.quorum",
            "sample"); 
```

至

```
hbaseConfiguration.set("hbase.zookeeper.quorum",
            "rs1.example.com"); 
```

注意：`rs1.example.com`应替换为指向您的 zookeeper 集群的地址。您可以在`conf/hbase-site.xml`.

# javascript - Javascript快捷方式...有可能吗？

> ID：15084590
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:34:56.503
> 
> 标签：javascript

我有一个只有一个属性的类：

```
var A = function(b){this.Value=b};
var a = new A('hello world'); 
```

我想检索属性的值如下：

```
var what = a;   //instead of  using var what =a.Value; 
```

是否可以？在 python 中，我知道我可以使用**call**来实现它。

```
class A:
    def __init__(self,b):
        self.Value=b
    def __call__(self):
        return self.Value
 a=A('hello world')
 what=a() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:37:55.533

不。

最好的办法是在类原型中定义`toString`方法，这样就可以直接在字符串中使用对象：

```
A.prototype.toString = function() {return this.Value;};
var a = new A('hello world');

var str = 'The string is: ' + a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:39:37.790

是的你可以。但它是一个对象。如果你想获得它的价值，你必须打电话`what.Value`

# php - 我应该如何使用 php 为这种情况设置 cookie

> ID：15084591
> 
> 赞同：2
> 
> 时间：2013-02-26T08:34:58.027
> 
> 标签：php, forms, cookies, save

如果我有下面的功能，在你输入（必须）你的名字和姓氏之后，就会选择一个单选按钮，但我想设置一个 cookie，让我们说一分钟或者如果那个人再次回来然后自动让'说那里'将是一条欢迎回复消息，而不是说输入您的姓名并选择一个单选按钮....我该怎么做？

我将此作为我的 1.php 用于询问姓名

```
echo "<form action='lab17a.php' method='get'>";
echo "First Name: ";
echo "<input type='text' name='fname' /><br/>";
echo "Last Name: ";
echo "<input type='text' name='lname' /><br/>";
echo "Red<input type='radio' name='bgcolor' value='red'><br/>";
echo "Blue<input type='radio' name='bgcolor' value='blue'><br/>";
echo "Yellow<input type='radio' name='bgcolor' value='yellow'><br/>";
echo "Green<input type='radio' name='bgcolor' value='green'><br/>";
echo "<input type='submit'/>";
echo "</form>"; 
```

这是提交后的2.php，将测试是否输入了字段...

```
if(empty($_GET["fname"]) || (empty($_GET["lname"])))
{
    echo "Press the browser's BACK button and enter both names.<br/>You must enter a first name last name";
}
elseif(!(empty($_GET["fname"])) && (!(empty($_GET["lname"]))) && (empty($_GET["bgcolor"])))
{
    echo "Hello " . $_GET["fname"] . " ". $_GET["lname"] . "!<br/>" . "Leaving the background color of the Web page default color (white)";
}
elseif(!(empty($_GET["fname"])) && (!(empty($_GET["lname"]))) && (!empty($_GET["bgcolor"])))
{
echo "<body bgcolor='" . $_GET["bgcolor"] . "'>" . "Hello " . $_GET["fname"] . " ". $_GET["lname"] . "!<br/>" . "Background color changed to the selected color";
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:37:35.163

使用 setcookie 方法。它有一个属性，您可以在其中设置过期时间。

更多信息在这里：

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

所以说你的formcheck在2.php中完成并且你没有错误（我在这里使用带有formErrors的字符串，如果它是空的，我设置我的cookie）。

```
if ($formErrors == "") {
    setcookie("name", $nameValue, time() + 60); // Say you want the cookie to contain the filled in name and you want it to expire in 60 secs.
} 
```

然后在您的 1.php 中检查是否设置了 cookie，如果是，则执行您想要的操作（在您的情况下，显示一条消息）。

```
if (isset($_COOKIE['name'])) {
    // show your message
} 
```

在您的 if 语句中，您可以使用它`$_COOKIE['name']`来获取值。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:38:38.797

我确定您在此页面上有提交按钮。在点击提交按钮时使用 javascript 设置 cookie，下次当用户访问此页面时检查是否使用 php 设置了该 cookie，如果是，则闪烁一条欢迎回来的消息。

# django - 姜戈。登录表单的错误消息

> ID：15084597
> 
> 赞同：19
> 
> 时间：2013-02-26T08:35:22.170
> 
> 标签：django, forms, login, message

我制作登录名/密码表：

模型：

```
class LoginForm(forms.Form):
username = forms.CharField(max_length=100)
password = forms.CharField(widget=forms.PasswordInput(render_value=False),max_length=100) 
```

看法：

```
def login_view(request):
    if request.method == 'POST':
        username = request.POST['email']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None and user.is_active:
            login(request, user)
            return HttpResponseRedirect("/n1.html")# Redirect to a success page.
        return HttpResponseRedirect("/login")
    form=LoginForm()
    return render(request, 'enter.html', {'login_form': LoginForm}) 
```

网址：

```
(r'^login/$', login_view), 
```

模板：

```
{% if form.errors %}
<p>Something is wrong</p>
{% endif %}

<form class="form-signin" action="" method="post">
    <h2 class="form-signin-heading">Login</h2>
    {% csrf_token %}

    <input class="input-block-level" type="text" name="email" value="" id="email" placeholder="Email">

    <input class="input-block-level" type="password" name="password" value="" id="username" placeholder="Password">

    <button class="btn btn-large btn-primary" type="submit">Login</button>
    <input type="hidden" name="next" value="{{next|escape}}" />

</form> 
```

我使用重定向到登录页面然后登录名或密码错误，但我想在这种情况下发出错误消息。为什么构造 {% if form.errors %} 不起作用？谢谢！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-26T08:48:55.343

因为表单不知道发生了错误。

当您在此处构建表单时：

```
form=LoginForm() 
```

您正在构建它而不传递任何信息。它对用户刚刚执行的 POST、登录失败、密码丢失或任何错误一无所知。

这是我的登录表单的样子：

```
class LoginForm(forms.Form):
    username = forms.CharField(max_length=255, required=True)
    password = forms.CharField(widget=forms.PasswordInput, required=True)

    def clean(self):
        username = self.cleaned_data.get('username')
        password = self.cleaned_data.get('password')
        user = authenticate(username=username, password=password)
        if not user or not user.is_active:
            raise forms.ValidationError("Sorry, that login was invalid. Please try again.")
        return self.cleaned_data

    def login(self, request):
        username = self.cleaned_data.get('username')
        password = self.cleaned_data.get('password')
        user = authenticate(username=username, password=password)
        return user 
```

我们覆盖表单的`clean`方法，这样如果表单通过验证，我们就可以检查用户的凭据。我们还在表单对象本身上放置了一个登录方法，以使我们的视图更清晰。

接下来，在我们看来，我们想要这样做：

```
def login_view(request):
    form = LoginForm(request.POST or None)
    if request.POST and form.is_valid():
        user = form.login(request)
        if user:
            login(request, user)
            return HttpResponseRedirect("/n1.html")# Redirect to a success page.
    return render(request, 'enter.html', {'login_form': form }) 
```

我们实例化表单并将 request.POST 交给它以进行检查。

如果我们有一个 POST，我们会检查表单是否有效。表单的“clean”方法将被调用，并为我们检查用户凭据。

如果凭证失败，我们会引发一个错误，我们需要在模板中显示该错误。

表单引发的错误（但未附加到字段）存储在 non_field_errors 中，可以像这样显示：

```
{% if form.non_field_errors %}
    <ul class='form-errors'>
        {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
        {% endfor %}
    </ul>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:43:55.820

当您重定向时，我不确定您是否发送了页面的上下文。因此，当您重定向到 /login/ 页面时，django 认为这是一个已加载的新表单。

# android - 如何在 Android 上保存单选按钮状态？

> ID：15084600
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:35:48.450
> 
> 标签：android

我想保存`RadioButton`使用共享首选项的状态，所以在提交按钮上我可以获得所有更改值..

我想保存所有状态`RadioButton`并单击上一个和下一个按钮，它必须保存状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:49:29.760

像这样将您的信息存储在 SharedPreferences 中。

```
SharedPreferences settings = getSharedPreferences("Answers", 0); 
  SharedPreferences.Editor editor = settings.edit();
  editor.putBoolean("questionA", radBotA.isChecked()); 
  editor.putBoolean("questionB", radBotB.isChecked());
  editor.putBoolean("questionC", radBotC.isChecked());
  editor.putBoolean("questionD", radBotD.isChecked());
  editor.commit(); 
```

回到活动时调用这个`onStart()`

```
SharedPreferences settings = getSharedPreferences("Answers", 0);
  radBotA.setChecked(settings.getBoolean("questionA", false)); 
  radBotB.setChecked(settings.getBoolean("questionB", false));
  radBotC.setChecked(settings.getBoolean("questionC", false));
  radBotD.setChecked(settings.getBoolean("questionD", false)); 
```

# performance - 无法在 apache 上运行 php-fpm？

> ID：15084603
> 
> 赞同：0
> 
> 时间：2013-02-26T08:36:12.407
> 
> 标签：performance, apache, fastcgi, php

我想为我的服务器安装 php-fpm 我的服务器在 Apache、PHP 5.3.20、Fastcgi 上运行

我还安装了 php-fpm，使用 yum install php-fpm

但是现在我查看 phpinfo 页面，服务器 API 仍然显示 CGI/FastCGI 而不是 FPM/FastCGI 但是当我使用 ps -ef | grep php-fpm 我可以得到

```
 apache   30304 30303  0 08:08 ?        00:00:00 php-fpm: pool www
    apache   30305 30303  0 08:08 ?        00:00:00 php-fpm: pool www
    apache   30306 30303  0 08:08 ?        00:00:00 php-fpm: pool www
    apache   30307 30303  0 08:08 ?        00:00:00 php-fpm: pool www
    apache   30308 30303  0 08:08 ?        00:00:00 php-fpm: pool www
    root     30494 29917  0 08:32 pts/0    00:00:00 grep php-fpm 
```

我的 php-fpm 工作与否？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:13:25.093

既然您决定将 PHP 作为一个包安装，您是否确定只安装 FPM 包而不安装 PHP 包？通过同时安装这将导致这种情况发生。大多数包管理器通过 ISAPI 拆分他们的 PHP 安装。如果两个都安装了，请删除其中一个，然后重试。您的帖子显示 FPM 正在运行，但您之前的安装可能导致它尚未被拾取。

我还有一个用于配置 PHP-FPM 和 Apache 2.4 的 GitHub Gist（也可以与 2.2 一起使用，只需进行少量 apache 配置更改）-> [https://gist.github.com/diemuzi/3849349](https://gist.github.com/diemuzi/3849349)

# javascript - Javascript变量不会在循环外更新，在OK内

> ID：15084605
> 
> 赞同：1
> 
> 时间：2013-02-26T08:36:21.613
> 
> 标签：javascript, jquery, string, variables, for-loop

我希望我不会在这里遗漏一些明显的东西。

```
function renderViews(containerId) {

    var root = '../Views/';
    var viewsDomStr = '';

    for (var i = 0; i < bundles.views.length; i++) {
            $.get(root + bundles.views[i], function (data) {
            viewsDomStr = viewsDomStr.concat(data);
        });
    }

    console.log(viewsDomStr);
    $('#' + containerId).append(viewsDomStr);

} 
```

问题是仅在循环内`viewsDomStr`根据来自服务器的更新。我得到的只是重置为.`data``for``console.log(viewsDomStr);``''`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:39:42.307

您正在调用的函数是异步的。

尝试

```
function renderViews(containerId) {

    var root = '../Views/';
    var viewsDomStr = '';

    function cb(){
        console.log(viewsDomStr);
        $('#' + containerId).append(viewsDomStr);
    }

    for (var i = 0; i < bundles.views.length; i++) {
            $.get(root + bundles.views[i], function (data) {
            viewsDomStr = viewsDomStr.concat(data);
            cb();
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:38:46.543

问题是`$.get`请求是异步的，因此程序继续运行并且不等待它。您想`viewsDomStr`在函数内部使用`$.get`。

```
function renderViews(containerId) {

    var root = '../Views/';

    for (var i = 0; i < bundles.views.length; i++) {
        $.get(root + bundles.views[i], function (data) {
            console.log(data);
            $('#' + containerId).append(data);
        });
    }

    // This section runs before $.get is finished
} 
```

编辑：我发现这`viewsDomStr`实际上是多余的。您只是将文本添加到元素，因此您可以将其添加到`$.get`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:47:19.137

由于 get 方法发送异步请求，您可以使用**setInterval**每 1 秒检查一次响应：

```
function renderViews(containerId) {

    var root = '../Views/';
    var viewsDomStr = '';

    var success = false;

    for (var i = 0; i < bundles.views.length; i++) {
            $.get(root + bundles.views[i], function (data) {
            viewsDomStr = viewsDomStr.concat(data);
            success = true;
        });
    }

    var t = setInterval(function(){
        if(success) {
            console.log(viewsDomStr);
            $('#' + containerId).append(viewsDomStr);
            clearInterval(t);
        }
    },1000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:39:40.400

该`get`方法的匿名函数将是异步的（根据`get`自身的执行）。

简而言之，这一切都发生得太快了。

# ios - UITableView 更新后的 ReloadData

> ID：15084609
> 
> 赞同：1
> 
> 时间：2013-02-26T08:36:37.193
> 
> 标签：ios, objective-c, uitableview

我正在尝试向我的 tableView 添加行，如下所示：

```
[myArray addObject:@"Apple"];

[myTableView beginUpdates];
[myTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]] withRowAnimation:UITableViewRowAnimationTop];
[myTableView endUpdates]; 
```

问题是单元格没有被刷新。textLabels 不对应于数据源数组。

我通过添加解决问题：

```
[myTableView reloadData]; 
```

但这会使漂亮的插入动画消失。

想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:48:08.840

`addObject:`将对象添加到可变数组的*末尾*。然后，在您的下一行，您告诉表格视图有一个新行要显示在表格的最*顶部*。除非您将数组“向后”，否则看起来好像您是在告诉表格在错误的位置“插入”一个单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:46:46.647

您将项目添加到数组的末尾，但在表的开头添加一行......试试这样：

```
NSString* obj = @"Apple";
[myArray addObject:obj];

[myTableView beginUpdates];
[myTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[myArray indexOfObject:obj] inSection:0]] withRowAnimation:UITableViewRowAnimationTop];
[myTableView endUpdates]; 
```

# php - 如何使用 Ajax 调用检索数据

> ID：15084610
> 
> 赞同：2
> 
> 时间：2013-02-26T08:36:49.680
> 
> 标签：php, jquery, ajax, json, call

我喜欢使用 Ajax 调用检索字符串，但我在响应中不断获取整个 html 页面。

检索字符串的方法是什么？

```
$.ajax({
                    url: '{$domainpath}{$language}/reservations/updatestartdates',
                    data: {property:property,stayduration:stayduration},
                    type: 'POST',
                    dataType: 'json'
                }).done(function(response){
                    alert(response);
                });

private function updateAvailableStartDates(){
    if(isset($_POST['property']) && !empty($_POST['property']) && isset($_POST['stayduration']) && !empty($_POST['stayduration'])){
        $property = $_POST['property'];
        $stayduration = $_POST['stayduration'];
    }
    //handle code

    echo json_encode('only this string');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:38:46.980

它将检索所有输出`url: '{$domainpath}{$language}/reservations/updatestartdates'`，

所以如果你想要字符串，那么`echo`你的服务器页面中只有字符串（删除所有 html 输出）

也`echo json_encode('only this string');`改为`echo json_encode(array('only this string'));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:48:32.093

通常在打印 JSON 后立即退出以防止内容（可能是 \n）破坏响应是一个好主意。

```
echo json_encode('only this string');
exit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:41:57.847

我认为您的函数以启用布局模式发送响应，因此该字符串带有包装布局。可能您需要在控制器中为调用函数禁用布局 `(url: '{$domainpath{$language}/reservations/updatestartdates')`。

# jquery - 将选定的 jQuery 选项卡索引发送到 rails 控制器

> ID：15084614
> 
> 赞同：0
> 
> 时间：2013-02-26T08:37:05.690
> 
> 标签：jquery, ajax, ruby-on-rails-3

我在 Rails 视图中使用 jQuery 选项卡。当相应地选择一个选项卡时，rails 服务器端应该会发生一些事情。

可以从以下代码中找到选定的选项卡：

```
$('#tabs').tabs( {
   select : function(event,ui){
             tabnumber = ui.index; }}) 
```

现在，我怎样才能将它传递给我的 Rails 控制器？我猜可以使用 jQuery ajax。但是由于我是 Web 开发的新手，所以我无法弄清楚很多。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:45:57.487

我之前[在这个 SO 讨论中](https://stackoverflow.com/questions/11830352/how-to-pass-data-from-jquery-to-controller)已经介绍过这个。

基本上，像往常一样构造 ajax 对象。

```
$.ajax({
    url: 'path/to/my/controller',
    type: 'POST',
    data: {tabnumber : tabnumber},
    success: function(data){
        //whatever you respond back with is the data here
    }
}); 
```

然后在你的 RoR 控制器中..

```
def process
    var tab_number = params[:tab_number]
end; 
```

# python - 跨不同文件脚本的 Python 全局字典

> ID：15084615
> 
> 赞同：0
> 
> 时间：2013-02-26T08:37:11.280
> 
> 标签：python, file, dictionary, global

你好。我正在尝试使用在`dict`中创建的全局`main.py`，称为 in `functions.py`。在我的**main.py 中**，我有：

```
import sys,os,...
import functions.py #import my second file

matrix = {}
matrix_do_something
search_the_matrix(value) #which is defined in functions.py

#FILE: functions.py
def search_the_matrix(value):
    global matrix
    if value in matrix:
        return True
    else:
        return False 
```

**我得到这个错误：**

```
NameError: global name 'matrix' is not defined 
```

我已经阅读了关于[stackoverflow](https://stackoverflow.com/questions/13034496/using-global-variables-between-files-in-python)的解决方案，它说将所有内容放在一个全局文件中，然后从每个文件 global.matrix[value] 中调用，但我不想要这个。我只想称它为矩阵并将其视为我的全局矩阵。这可能吗？先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:38:43.640

在functions.py中你必须导入它

```
from main import matrix 
```

虽然我想为我的模块取一个比 main 更好的名称。

如果您希望一个对象在模块/文件中可用，您需要在那里创建它或从其他地方导入它。

# cocoa - 处理 WebView 中的“高级”错误

> ID：15084617
> 
> 赞同：1
> 
> 时间：2013-02-26T08:37:25.147
> 
> 标签：cocoa, error-handling, webview

有没有办法处理 WebView 中的不同 HTML 错误？如：未找到链接的 CSS 文件，出现一些 JS 或 DOM 错误。

`webView:didFailLoadWithError:forFrame:`不处理它们（我相信我正确设置了委托，因为我收到了`webView:didFinishLoadForFrame:`其他消息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T22:56:14.603

要在找不到诸如 css 文件之类的资源时收到通知，请设置 webview 的[WebResourceLoadDelegate](https://developer.apple.com/library/mac/documentation/cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003836)：

```
self.webView.resourceLoadDelegate = self; 
```

并实现这个委托方法：

```
- (void)webView:(WebView *)webView resource:(id)identifier didFailLoadingWithError:(NSError *)error fromDataSource:(WebDataSource *)dataSource {
    NSLog(@"Error loading resource : %@", error);
} 
```

该错误将包括 webview 未能加载的资源的名称和路径。

为了查看 javascript 引发的错误，请设置[WebUIDelegate](https://developer.apple.com/library/mac/documentation/cocoa/Reference/WebKit/Protocols/WebUIDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003838)：

```
self.webView.UIDelegate = self; 
```

并实现此私有 API 委托方法（注意：您的应用可能不应该依赖此方法，因为它来自私有 API）

```
- (void)webView:(WebView *)webView addMessageToConsole:(NSDictionary *)message {
    NSLog(@"Javascript error : %@",message);
} 
```

# c# - 简化 OleDbDataReader 代码

> ID：15084623
> 
> 赞同：1
> 
> 时间：2013-02-26T08:37:46.887
> 
> 标签：c#, oledb, oledbdatareader

我做了一个程序，它读取我使用的数据库中的数据，`OleDbDataReader`但问题是我有不同的表，这些代码运行良好，但我发现它有点“硬编码”或者`recursive`这是我的示例代码

```
 private void loadMilk()
        {
            cn.Open();
            OleDbDataReader reader = null;
            OleDbCommand cmd = new OleDbCommand("select* from Milk", cn);
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                Milk.Add(reader["Product"].ToString());
            }
            cn.Close();
        } 
```

我需要一次又一次地重复这个只是为了阅读另一张桌子上的内容（例如，`"select* from Fruit`然后`"select* from Classics`....）有什么办法可以让我不会一次又一次地重复这个代码？谢谢。：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:41:56.820

您可以将该方法重构为如下内容：

```
private IList<string> Load(string tableName, string columnName)
{
    var result = new List<string>();
    cn.Open();
    OleDbDataReader reader = null;
    OleDbCommand cmd = new OleDbCommand(string.Format("select* from {0}", tableName), cn);
    reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        result.Add(reader[columnName].ToString());
    }
    cn.Close();

    return result;
} 
```

您的代码示例将是：

```
var milkItems = Load("Milk", "Product");
var classicItems = Load("Classics", "..."); //Enter the column here. 
```

**编辑**：

您可能想要一些更具体的东西（例如，存储 a`List<SomeObject>`而不是只是`List<string>`）。假设您有时想要返回 的列表`Person`，并且还想读取 的列表`Building`。然后你可以写这样的东西（**未编译和测试**）：

```
private IList<T> Load<T>(string tableName, Func<OleDbDataReader, T> selector)
{
    IList<T> result = new List<T>();
    cn.Open();
    OleDbDataReader reader = null;
    OleDbCommand cmd = new OleDbCommand(string.Format("select* from {0}", tableName), cn);
    reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        result.Add(selector(reader));
    }
    cn.Close();

    return result;
} 
```

你可以这样称呼它：

```
Func<OleDbDataReader, Person> selector = x => new Person { Name = x["Person"].ToString() };
Load("People", selector); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T08:42:04.760

```
private void loadMilk(string TableName, string itemValue)
        {
            string SQLString = String.Format("select * from {0}",TableName);

            cn.Open();
            OleDbDataReader reader = null;
            OleDbCommand cmd = new OleDbCommand(SQLString, cn);
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                Milk.Add(reader[ItemValue].ToString());
            }
            cn.Close();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:43:48.347

不确定“牛奶”是什么类型。尝试：

```
private void loadObjectsFrom(string tableName, object obj, string column)
        {
            cn.Open();
            OleDbDataReader reader = null;
            OleDbCommand cmd = new OleDbCommand("select* from " + tableName, cn);
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                obj.Add(reader[column].ToString());
            }
            cn.Close();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:43:17.640

只需将表名作为参数传递：

```
 private void loadMilk(string tableName)
    {
        cn.Open();
        OleDbDataReader reader = null;
        OleDbCommand cmd = new OleDbCommand(string.Format("select* from {0}",tableName), cn);
        reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            Milk.Add(reader["Product"].ToString());
        }
        cn.Close();
    } 
```

# ruby - 不要将自定义字体嵌入到 Prawn 生成的 PDF 中

> ID：15084631
> 
> 赞同：1
> 
> 时间：2013-02-26T08:38:20.817
> 
> 标签：ruby, pdf, fonts, prawn

我使用 Prawn 生成 PDF。当我使用自定义字体（带有中欧/东欧字符的 Arial CE）时，字体会嵌入到目标 PDF 中。

```
pdf.font_families.update(
        "Arial" => {
                :bold        => "font/arialbd.ttf",
                :italic      => "font/ariali.ttf",
                :bold_italic => "font/arialbi.ttf",
                :normal      => "font/arial.ttf"
        }
)
pdf.font "Arial"
pdf.text "Účet", :size => 18 
```

问题是PDF的大小。嵌入式字体将文档大小从 4kB 增加到 80kB，我不需要将字体放入每个 PDF，因为 Arial CE 在客户端计算机上可用。

有什么建议如何在不嵌入的情况下使用自定义字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:10:56.873

不幸的是，大虾无法关闭自定义字体的嵌入。

您可以使用 Arial 和 Times New Roman 等字体的构建，它们不会被嵌入，但是您不会得到您想要的外观。

# ruby-on-rails - Janky 响应：未知存储库：'myrepo'

> ID：15084632
> 
> 赞同：1
> 
> 时间：2013-02-26T08:38:31.937
> 
> 标签：ruby-on-rails, github, hubot, janky

当我在 campfire 上构建我的 Github 存储库时出现未知存储库错误，如下所示：

```
hubot ci build scholar
Unknown repository: "scholar" 
```

这是我的 Janky heroku 日志：

```
2013-02-26T07:53:58+00:00 heroku[router]: at=info method=POST
path=/_hubot/uygulama/master?room_id=552860&user=jankycamp
host=jankycamp.herokuapp.com fwd="204.236.210.215" dyno=web.1 queue=0
wait=0ms connect=1ms service=6ms status=404 bytes=30' 
```

我在此日志中得到状态 404。我真的陷入困境，无法解决这个问题。等待你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T16:38:36.380

如果这是您唯一的工作，您可能需要验证您的设置。

我会： - 确保我的项目设置看起来正确，并再次检查 janky 文档，看看我是否错过了一步 - 检查逻辑访问链并验证各种服务是否正在运行并且可用/可访问（janky , jenkins, github repo)
- 通过 jenkins 的控制台验证我有我期望的工作

通常，查看所提及应用程序的日志/控制台可以为您提供更好的线索。

如果您碰巧有其他工作，而这一个是唯一不可用的，我会主要查看权限。

# iphone - Xcode 4.5：与预处理器指令一起使用时缩进损坏

> ID：15084634
> 
> 赞同：1
> 
> 时间：2013-02-26T08:38:38.740
> 
> 标签：iphone, ios, xcode, preprocessor

我目前正在使用 Xcode 4.5.2。使用预处理器指令（条件包含）时，缩进有些奇怪。这是我的代码的样子：

```
-(void)someMethod{
#if defined (TEST_A) || defined (TEST_B)
    if (![self TESTmethod]) {
        //do sth   
#else
    if (![self method]) {  
#endif
        //do sth
    }
} 
```

当我点击 'return/enter' 时，光标向右移动一些额外的空间，如下图所示： ![在此处输入图像描述](../Images/cd33b783843ef5363b4f3b67d6989efe.png)

如果我删除预处理器指令，它将正确缩进，但我想使用预处理器指令。有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:33:30.987

我已经通过更改代码来解决它：

```
-(void)someMethod{
#if defined (TEST_A) || defined (TEST_B)
    if (![self TESTmethod]) {
        //do sth 
    }  
#else
    if (![self method]) {  
        //do sth
    }
#endif
} 
```

这解决了缩进问题。奇怪的

# node.js - 在 Node.JS 中使用 GraphicsMagick 从图像中删除遮罩

> ID：15084635
> 
> 赞同：0
> 
> 时间：2013-02-26T08:38:42.330
> 
> 标签：node.js, graphicsmagick

通过提供原始图像和背景黑色 alpha 0 的掩蔽图像和带有 alpha 1 的菱形方形白色，我已经成功地创建了具有方形菱形形式的图像。

我使用以下 gm 命令

```
gm composite -compose in orgiginal.jpg diamond-mask.png result.png 
```

现在我想使用 node.js gm 模块重现结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:33:52.963

我认为 node-gm 不提供对复合/组合的支持。

然而，github上有一个GM的分支可能值得探索： [https ://github.com/fanzter/gm/commit/822c917bbaaf984920e6625b65acd6d21c3ac360](https://github.com/fanzter/gm/commit/822c917bbaaf984920e6625b65acd6d21c3ac360)

# oracle - PL/SQL：将数据类型分配给变量

> ID：15084645
> 
> 赞同：0
> 
> 时间：2013-02-26T08:39:14.653
> 
> 标签：oracle, plsql

有没有办法做到这一点？我希望这样做：

```
create or replace
package SOME_PACKAGE as
  filetype type is clob%type; --assign clob's filetype to a variable
end SOME_PACKAGE;
/

declare
  clb SOME_PACKAGE.filetype;
begin
  dbms_lob.writeappend(clb, 1, 's');
end; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:52:33.457

你可以这样做：

```
create or replace
package SOME_PACKAGE as
  subtype filetype is clob; --assign clob's filetype to a variable
end SOME_PACKAGE;
/ 
```

但为什么 ？？

# ckeditor - Find Touched elments CKEDITOR

> ID：15084648
> 
> 赞同：0
> 
> 时间：2013-02-26T08:39:15.237
> 
> 标签：ckeditor, range, nodes

我现在在网上看了几天，但我似乎无法找到，我如何才能找到插入符号是否正在触摸元素。让我用这个例子更好地解释一下自己。

```
This is a[ ] <span>example</span> 
```

作为示例，我们说插入符号是标签 [ ]。现在我们想知道插入符号是否靠近 span 元素？我们怎样才能找到这个？我还需要知道 span 元素是在插入符号之前还是之后。

我正在使用 CKEDITOR 4.0 api 执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:08:04.190

试试这个：

```
var range = CKEDITOR.instances.yourEditorInstance.getSelection().getRanges()[ 0 ];
range.optimize();
console.log( range.getBoundaryNodes() ); 
```

还：

```
console.log( range.getTouchedEndNode() );
console.log( range.getTouchedStartNode() ); 
```

请注意，您的范围可能位于元素内部（如**e4**，下图），因此边界节点将始终是文本节点。检查[DOM 范围规范](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html)以获取更多信息。

![在此处输入图像描述](../Images/a0ce6bb9359f465654660f5162e74057.png)

* * *

编辑：这些也值得一试：

```
range.getNextNode();
range.getPreviousNode(); 
```

* * *

毕竟，一旦有了节点，就可以检查它：

```
var node = range.getNextNode();
console.log( node.type == CKEDITOR.NODE_ELEMENT && node.is( 'span' ) ); 
```

# javascript - 用这两种方式创建对象有什么区别？

> ID：15084653
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:39:40.397
> 
> 标签：javascript, object, prototypal-inheritance

我想创建一个有很多实例的对象。这两种方式有什么区别？

```
function anObject(foo,bar){
   this.foo = bar;
   yada yada
}; 
```

和这个

```
var anObject = function(foo, bar){
   var foo;
   var bar;
   this.something = function...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:06:06.750

对于您期望大量的对象，我强烈推荐对象构造器模式（第一个示例）而不是闭包模式（第二个示例）。构造函数模式只会创建一个对象，一个具有 foo 属性的对象。如果你想要一个方法，你可以将该方法添加到构造函数原型中：

```
anObject.prototype.something = function () {
    // do something
} 
```

其中使用构造函数模式将分配至少三个对象。举个例子，

```
function anObject(foo, bar) {
    this.something = function () {
        // do something
    };
} 
```

这将创建三个紧密耦合的对象。它将创建包含一个名为的属性的对象`something`，然后存储一个在`anObject`调用时创建的新函数对象，第三，它将创建包含`foo`and的函数环境`bar`。这种形式的优点是保持`foo`和`bar`无法访问除`something`但是它需要两个额外的分配，这比构造函数模式贵大约三倍，尽管使用现代引擎优化，你的里程可能会有所不同。添加的功能越多，分配越差，每个功能添加一个额外的分配。使用构造函数模式，方法分配由每个对象通过原型链共享，并且内存效率更高。

# eclipse - 无法使用 springSTS 调试 SpringMVC 应用程序

> ID：15084663
> 
> 赞同：1
> 
> 时间：2013-02-26T08:40:14.157
> 
> 标签：eclipse, spring, tomcat

我在 eclipse Juno、Spring 3.1.1、hibernate 4.1、tomcat 7 和 mySQL 中使用 STS。

我尝试通过以下方式调试我的应用程序：

1.  右键单击服务器（在服务器视图中）->“在调试时重新启动”。

2.  在我的代码中添加断点。

3.  选择“在服务器上调试”。

但它只是启动应用程序而不在断点处停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:45:31.390

当您单击“以调试模式重新启动服务器”时，服务器是否重新启动？检查你的日志。

如果没有，请杀死它并通过单击“以调试模式启动服务器”（服务器视图中的小错误）而不是使用绿色/白色箭头（“运行”）开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:10:54.253

另一种选择是永远无法到达断点。代码走的是不同的路线。

# ruby-on-rails - 部署到 Heroku 的 Ruby on Rails 应用程序显示“我们很抱歉，但出了点问题”

> ID：15084668
> 
> 赞同：2
> 
> 时间：2013-02-26T08:40:26.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

### 我对此仍然很陌生，但提供一些背景知识：

我构建了一个不错的应用程序并按照正确的步骤将其部署到 Heroku，当我运行*“Heroku open”*命令时，我得到：

## *“我们很抱歉，但有些不对劲。”

（在打开的窗口中。）

### 希望我们能解决这个问题！我附上了 Heroku 日志：

```
To git@heroku.com:startupblog.git
   390c9dc..37f5a3d  master -> master
[StartupBlog]$heroku open
Opening startupblog... done
[StartupBlog]$heroku log
 !    `log` is not a heroku command.
 !    Perhaps you meant `logs`.
 !    See `heroku help` for a list of available commands.
[StartupBlog]$heroku logs
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__3231968123246769760__call__1023772550130159371__callbacks'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-26T08:25:42+00:00 app[web.1]: 
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-02-26T08:25:42+00:00 app[web.1]: 
2013-02-26T08:25:42+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-02-26T08:25:42+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-02-26T08:25:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-02-26T08:30:59+00:00 heroku[slugc]: Slug compilation started
2013-02-26T08:31:30+00:00 heroku[api]: Release v7 created by anthony.panepinto101@gmail.com
2013-02-26T08:31:30+00:00 heroku[api]: Deploy 37f5a3d by anthony.panepinto101@gmail.com
2013-02-26T08:31:30+00:00 heroku[web.1]: State changed from up to starting
2013-02-26T08:31:31+00:00 heroku[slugc]: Slug compilation finished
2013-02-26T08:31:32+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 41761`
2013-02-26T08:31:34+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2013-02-26T08:31:35+00:00 app[web.1]: [2013-02-26 08:31:35] ERROR SignalException: SIGTERM
2013-02-26T08:31:35+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2013-02-26T08:31:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-26T08:31:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2013-02-26T08:31:40+00:00 app[web.1]: [2013-02-26 08:31:40] INFO  WEBrick 1.3.1
2013-02-26T08:31:40+00:00 app[web.1]: [2013-02-26 08:31:40] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-02-26T08:31:40+00:00 app[web.1]: [2013-02-26 08:31:40] INFO  WEBrick::HTTPServer#start: pid=2 port=41761
2013-02-26T08:31:41+00:00 heroku[web.1]: State changed from starting to up
2013-02-26T08:31:45+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-02-26T08:31:45+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-02-26T08:31:46+00:00 app[web.1]: => Call with -d to detach
2013-02-26T08:31:46+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-02-26T08:31:46+00:00 app[web.1]: => Booting WEBrick
2013-02-26T08:31:46+00:00 app[web.1]: => Rails 3.2.11 application starting in production on http://0.0.0.0:41761
2013-02-26T08:31:46+00:00 app[web.1]: Started GET "/" for 174.95.207.136 at 2013-02-26 08:31:46 +0000
2013-02-26T08:31:47+00:00 heroku[web.1]: Process exited with status 137
2013-02-26T08:31:47+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:67:in `rescue in call'
2013-02-26T08:31:47+00:00 heroku[router]: at=info method=GET path=/ host=startupblog.herokuapp.com fwd="174.95.207.136" dyno=web.1 queue=0 wait=0ms connect=2ms service=1011ms status=500 bytes=643
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-02-26T08:31:47+00:00 app[web.1]: 
2013-02-26T08:31:47+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundl
e/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__646234206873509914__call__2059469811213840144__callbacks'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:61:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2013-02-26T08:31:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-02-26T08:31:47+00:00 app[web.1]: 
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-02-26T08:31:47+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2013-02-26T08:31:47+00:00 app[web.1]: 
```

宝石文件内容：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'bootstrap-sass', '~> 2.3.0.1'
  gem 'coffee-rails', '3.2.2'

  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:49:48.053

您应该创建一个生产数据库（可能是 pg），然后启动该数据库。你可能应该跑`heroku run rake db:migrate`

# java - 如何在 Java 泛型中获取类型变量的类

> ID：15084670
> 
> 赞同：26
> 
> 时间：2013-02-26T08:40:30.490
> 
> 标签：java, generics, types, type-erasure

我见过类似的问题，但它们并没有太大帮助。

例如我有这个通用类：

```
public class ContainerTest<T>
{

    public void doSomething()
    {
        //I want here to determinate the Class of the type argument (In this case String)
    }
} 
```

和另一个使用这个容器类的类

```
public class TestCase
{

    private ContainerTest<String> containerTest;

    public void someMethod()
    {
        containerTest.doSomething();
    }
} 
```

是否可以在方法 doSomething() 中确定类型参数的类**而无需**在 ContainerTest 类中具有显式类型**变量/字段**或任何**构造函数？**

更新：更改了 ContainerTest 类的格式

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T08:49:41.227

唯一的方法是将类存储在实例变量中，并将其作为构造函数的参数：

```
public class ContainerTest<T>
{
    private Class<T> tClass;
    public ContainerTest(Class<T> tClass) {
        this.tCLass = tClass;
    }

    public void doSomething()
    {
        //access tClass here
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-10T12:41:16.260

如果您对**反射方式**感兴趣，我在这篇很棒的文章中找到了部分解决方案： [http ://www.artima.com/weblogs/viewpost.jsp?thread=208860](http://www.artima.com/weblogs/viewpost.jsp?thread=208860)

简而言之，你可以使用`java.lang.Class.getGenericSuperclass()`和`java.lang.reflect.ParameterizedType.getActualTypeArguments()`方法，但是你必须继承一些父超类。

以下代码段适用于**直接**扩展超类的类`AbstractUserType`。有关更通用的解决方案，请参阅参考文章。

```
import java.lang.reflect.ParameterizedType;

public class AbstractUserType<T> {

    public Class<T> returnedClass() {
        ParameterizedType parameterizedType = (ParameterizedType) getClass()
                .getGenericSuperclass();

        @SuppressWarnings("unchecked")
        Class<T> ret = (Class<T>) parameterizedType.getActualTypeArguments()[0];

        return ret;
    }

    public static void main(String[] args) {
        AbstractUserType<String> myVar = new AbstractUserType<String>() {};

        System.err.println(myVar.returnedClass());
    }

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T08:50:08.193

没有“干净”的方法可以从类中获取通用类型参数。相反，一种常见的模式是将通用类型的类传递给构造函数，并将其作为内部属性保存，就像在 java.util.EnumMap 实现中所做的那样。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumMap.html) [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk /6-b14/java/util/EnumMap.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/EnumMap.java)

```
public class ContainerTest<T> {

    Class<T> type;
    T t;

    public ContainerTest(Class<T> type) {
        this.type = type;
    }

    public void setT(T t) {
        this.t = t;
    }

    public T getT() {
        return t;
    }

    public void doSomething() {
        //There you can use "type" property.
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T08:50:38.277

不，这是不可能的，因为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)（类型参数编译为 Object + 类型转换）。如果您*确实*需要在运行时了解/强制执行类型，您可以存储对`Class`对象的引用。

```
public class ContainerTest<T> {
   private final Class<T> klass;
   private final List<T> list = new ArrayList<T>();

   ContainerTest(Class<T> klass) {
     this.klass = klass;
   }

   Class<T> getElementClass() {
     return klass;
   }

   void add(T t) {
      //klass.cast forces a runtime cast operation
      list.add(klass.cast(t));
   }
} 
```

利用：

```
ContainerTest<String> c = new ContainerTest<>(String.class); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T10:26:43.840

有*一种*`TypeToken`方法可以通过使用 Guava来捕获类型参数的运行时类型。该解决方案的缺点是每次需要`Container`.

```
class Container<T> {

    TypeToken<T> tokenOfContainedType = new TypeToken<T>(getClass()) {};

    public Type getContainedType() {
        return tokenOfContainedType.getType();
    }
}

class TestCase {

    // note that containerTest is not a simple instance of Container,
    // an anonymous subclass is created
    private Container<String> containerTest = new Container<String>() {};

    @Test
    public void test() {
        Assert.assertEquals(String.class, containerTest.getContainedType());
    }
} 
```

`TypeToken`此解决方案的关键在上面代码中使用的构造函数的JavaDoc 中进行了描述：

> 客户端创建一个空的匿名子类。这样做会将类型参数嵌入到匿名类的类型层次结构中，因此我们可以在运行时重构它，尽管会被擦除。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-26T02:40:52.290

要了解 ContainerTest 的价值，`T`您需要通过子类化 ContainerTest 在类型定义中捕获它：

```
class MyStringClass extends ContainerTest<String> {} 
```

如果需要，您也可以使用匿名类来执行此操作：

```
ContainerTest<String> myStringClass = new ContainerTest<String>{}(); 
```

然后要解析 T 的值，可以使用[TypeTools](https://github.com/jhalterman/typetools)：

```
Class<?> stringType = TypeResolver.resolveRawArgument(ContainerTest.class, myStringClass.getClass());
assert stringType == String.class; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-26T08:51:26.793

如果你可以这样定义

```
public class ContainerTest<T>
{

    public void doSomething(T clazz)
    {

    }
} 
```

那么有可能

# java - Java 中的 Collections.sort()

> ID：15084671
> 
> 赞同：1
> 
> 时间：2013-02-26T08:40:37.170
> 
> 标签：java, list, sorting, object, collections

我正在写一个`sortedAdd(T node)`方法`LinkedList`。我怎么能与之`node.key_`相比`current.key_`？我不能使用`<`（升序），因为它是通用的。

```
public void sortedAdd(T node){
  ...
  Node<T> current = header;
  while (current != null) {
    if (node.key_ < current.key_) {
      ...
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:42:26.463

[**java.lang.Object**](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)没有**实现 Comparable**。[**Collections.sort(List)**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)期望`T`实现 Comparable。

**[来自 Collection.sort(List)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)**

> 根据其元素的自然顺序，将指定列表按升序排序。列表中的所有元素都必须实现 Comparable 接口。

我相信你的代码应该是：

```
 List<String> list = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T08:42:15.947

试试这个伙伴：

```
List<String> list = new ArrayList<String>();

list.add("D");
list.add("B");
list.add("A");

Collections.sort(list); 
```

解释一下，参数化类型（尖括号中的那个）必须实现 interface `Comparable`。

`String`实现`Comparable`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:48:31.057

尝试

```
List<String> unsortList = new ArrayList<String>();

unsortList.add("CCC");
unsortList.add("111");
unsortList.add("AAA");
unsortList.add("BBB");
unsortList.add("ccc");
unsortList.add("bbb");
unsortList.add("aaa");
unsortList.add("333");
unsortList.add("222");

//sort the list
Collections.sort(unsortList);
System.out.println("ArrayList is sorted");
  for(String temp: unsortList){
System.out.println(temp);
  } 
```

**输出**

```
ArrayList is sorted

111
222
333
AAA
BBB
CCC
aaa
bbb
ccc 
```

# xml - Perl DOM 和 XML 源代码参考

> ID：15084672
> 
> 赞同：-2
> 
> 时间：2013-02-26T08:40:39.457
> 
> 标签：xml, perl, dom, sax

在处理 DOM 树时，有没有办法获取有关我已解析文件的源代码的信息？我需要获取源文件名和元素开始的行。必须升级应用程序的代码，使其打印如下错误：*错误的配置记录 - 等等，等等......在 config1.xml，第 24 行。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:01:49.580

`XML::DOM`模块子类，而`XML::Parser`后者又是子类`XML::Parser::Expat`。最后提供了一个`current_line`方法，返回解析过程中已经到达的文件行号。

尽管信息是可用的，但由调用包来使用它并将其构建到最终的文档树中。如果不这样做，则无法在解析后检索信息。

`XML::Parser::Expat`根据在关卡中暴露了多少接口`XML::DOM`，您可能会从子类化中获得一些好处`XML::DOM`；但我希望更改必须在级别 `XML::DOM::Parser`或更低级别进行，然后您会遇到说服调用类使用您的子类而不是原始类的问题。

很可能您最好使用不同的`XML`模块来保留解析后所需的信息。如果这是可能的，并且`XML::LibXML`满足您的要求，那就去吧。

# javascript - 如何为移动设备实现滑动手势？

> ID：15084675
> 
> 赞同：49
> 
> 时间：2013-02-26T08:41:07.663
> 
> 标签：javascript, mobile, touch, swipe, gestures

我有一个用 AngularJS 制作的应用程序，它有箭头键导航来切换视图。

我想使用滑动触摸设备来实现此导航。我尝试[了 jGestures](http://jgestures.codeplex.com/)库，但滑动效果不佳。我被建议不要使用[jquery mobile](http://jquerymobile.com/)。

还有其他方法可以实现滑动吗？

编辑：它不会干净地检测到滑动。我在包括 iPad 在内的多种设备上对其进行了测试，并且需要多次滑动才能执行操作（在我的情况下是路由）。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2014-11-24T22:06:42.877

我为我的需要制作了这个功能。

随意使用它。在移动设备上运行良好。

```
function detectswipe(el,func) {
  swipe_det = new Object();
  swipe_det.sX = 0; swipe_det.sY = 0; swipe_det.eX = 0; swipe_det.eY = 0;
  var min_x = 30;  //min x swipe for horizontal swipe
  var max_x = 30;  //max x difference for vertical swipe
  var min_y = 50;  //min y swipe for vertical swipe
  var max_y = 60;  //max y difference for horizontal swipe
  var direc = "";
  ele = document.getElementById(el);
  ele.addEventListener('touchstart',function(e){
    var t = e.touches[0];
    swipe_det.sX = t.screenX; 
    swipe_det.sY = t.screenY;
  },false);
  ele.addEventListener('touchmove',function(e){
    e.preventDefault();
    var t = e.touches[0];
    swipe_det.eX = t.screenX; 
    swipe_det.eY = t.screenY;    
  },false);
  ele.addEventListener('touchend',function(e){
    //horizontal detection
    if ((((swipe_det.eX - min_x > swipe_det.sX) || (swipe_det.eX + min_x < swipe_det.sX)) && ((swipe_det.eY < swipe_det.sY + max_y) && (swipe_det.sY > swipe_det.eY - max_y) && (swipe_det.eX > 0)))) {
      if(swipe_det.eX > swipe_det.sX) direc = "r";
      else direc = "l";
    }
    //vertical detection
    else if ((((swipe_det.eY - min_y > swipe_det.sY) || (swipe_det.eY + min_y < swipe_det.sY)) && ((swipe_det.eX < swipe_det.sX + max_x) && (swipe_det.sX > swipe_det.eX - max_x) && (swipe_det.eY > 0)))) {
      if(swipe_det.eY > swipe_det.sY) direc = "d";
      else direc = "u";
    }

    if (direc != "") {
      if(typeof func == 'function') func(el,direc);
    }
    direc = "";
    swipe_det.sX = 0; swipe_det.sY = 0; swipe_det.eX = 0; swipe_det.eY = 0;
  },false);  
}

function myfunction(el,d) {
  alert("you swiped on element with id '"+el+"' to "+d+" direction");
} 
```

要使用该功能，只需像这样使用它

```
detectswipe('an_element_id',myfunction);

detectswipe('an_other_element_id',my_other_function); 
```

如果检测到滑动，则使用参数 element-id 和“l,r,u,d”（左、右、上、下）调用函数“myfunction”。

示例：http: [//jsfiddle.net/rvuayqeo/1/](http://jsfiddle.net/rvuayqeo/1/)

* * *

[我（UlysseBN）基于[这个脚本制作了一个新版本的脚本](https://stackoverflow.com/a/58719294/6320039)，它使用了更现代的 JavaScript，看起来它在某些情况下表现得更好。如果您认为应该编辑此答案，请告诉我，如果您是原作者并且最终进行了编辑，我将删除我的答案。]

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-28T11:53:06.667

你试过 Hammerjs 吗？它通过使用触摸的速度支持滑动手势。 [http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-14T12:19:47.763

还有一个名为 angular-gestures 的 AngularJS 模块，它基于hammer.js： [https ://github.com/wzr1337/angular-gestures](https://github.com/wzr1337/angular-gestures)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-26T08:45:38.930

我知道无耻的插件，但你可能想考虑我写的一个 jQuery 插件：

[https://github.com/benmajor/jQuery-Mobile-Events](https://github.com/benmajor/jQuery-Mobile-Events)

它不需要 jQuery Mobile，只需要 jQuery。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-11-05T20:50:55.970

[**注意：受到**[EscapeNetscape 回答的](https://stackoverflow.com/a/27115070/6320039)极大启发，我在评论中使用现代 javascript 对他的脚本进行了编辑。由于用户的兴趣和 4 小时的 jsfiddle.net 停机时间，我对此做出了回答。我选择不编辑原始答案，因为它会改变一切......]

* * *

这是一个`detectSwipe`运行良好的函数（在我的一个网站上使用）。我建议你在使用它之前阅读它。随意查看它/编辑答案。

```
// usage example
detectSwipe('swipeme', (el, dir) => alert(`you swiped on element with id ${el.id} to ${dir} direction`))

// source code

// Tune deltaMin according to your needs. Near 0 it will almost
// always trigger, with a big value it can never trigger.
function detectSwipe(id, func, deltaMin = 90) {
  const swipe_det = {
    sX: 0,
    sY: 0,
    eX: 0,
    eY: 0
  }
  // Directions enumeration
  const directions = Object.freeze({
    UP: 'up',
    DOWN: 'down',
    RIGHT: 'right',
    LEFT: 'left'
  })
  let direction = null
  const el = document.getElementById(id)
  el.addEventListener('touchstart', function(e) {
    const t = e.touches[0]
    swipe_det.sX = t.screenX
    swipe_det.sY = t.screenY
  }, false)
  el.addEventListener('touchmove', function(e) {
    // Prevent default will stop user from scrolling, use with care
    // e.preventDefault();
    const t = e.touches[0]
    swipe_det.eX = t.screenX
    swipe_det.eY = t.screenY
  }, false)
  el.addEventListener('touchend', function(e) {
    const deltaX = swipe_det.eX - swipe_det.sX
    const deltaY = swipe_det.eY - swipe_det.sY
    // Min swipe distance, you could use absolute value rather
    // than square. It just felt better for personnal use
    if (deltaX ** 2 + deltaY ** 2 < deltaMin ** 2) return
    // horizontal
    if (deltaY === 0 || Math.abs(deltaX / deltaY) > 1)
      direction = deltaX > 0 ? directions.RIGHT : directions.LEFT
    else // vertical
      direction = deltaY > 0 ? directions.UP : directions.DOWN

    if (direction && typeof func === 'function') func(el, direction)

    direction = null
  }, false)
}
```

```
#swipeme {
  width: 100%;
  height: 100%;
  background-color: orange;
  color: black;
  text-align: center;
  padding-top: 20%;
  padding-bottom: 20%;
}
```

```
<div id='swipeme'>
  swipe me
</div>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-04T13:26:31.553

我喜欢您的解决方案并在我的网站上实施了它 - 但是，有一些小的改进。只是想分享我的代码：

```
function detectSwipe(id, f) {
    var detect = {
        startX: 0,
        startY: 0,
        endX: 0,
        endY: 0,
        minX: 30,   // min X swipe for horizontal swipe
        maxX: 30,   // max X difference for vertical swipe
        minY: 50,   // min Y swipe for vertial swipe
        maxY: 60    // max Y difference for horizontal swipe
    },
        direction = null,
        element = document.getElementById(id);

    element.addEventListener('touchstart', function (event) {
        var touch = event.touches[0];
        detect.startX = touch.screenX;
        detect.startY = touch.screenY;
    });

    element.addEventListener('touchmove', function (event) {
        event.preventDefault();
        var touch = event.touches[0];
        detect.endX = touch.screenX;
        detect.endY = touch.screenY;
    });

    element.addEventListener('touchend', function (event) {
        if (
            // Horizontal move.
            (Math.abs(detect.endX - detect.startX) > detect.minX)
                && (Math.abs(detect.endY - detect.startY) < detect.maxY)
        ) {
            direction = (detect.endX > detect.startX) ? 'right' : 'left';
        } else if (
            // Vertical move.
            (Math.abs(detect.endY - detect.startY) > detect.minY)
                && (Math.abs(detect.endX - detect.startX) < detect.maxX)
        ) {
            direction = (detect.endY > detect.startY) ? 'down' : 'up';
        }

        if ((direction !== null) && (typeof f === 'function')) {
            f(element, direction);
        }
    });
} 
```

像这样使用它：

```
detectSwipe('an_element_id', myfunction); 
```

或者

```
detectSwipe('another_element_id', my_other_function); 
```

如果检测到滑动，则`myfunction`使用参数 element-id 和`'left'`, `'right'`, `'up'`oder调用函数`'down'`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-18T07:40:44.877

锤子时间！

我使用过 Hammer JS，它与手势配合使用。从这里阅读详细信息：[https ://hammerjs.github.io/](https://hammerjs.github.io/)

好在它比 jQuery mobile 更轻、更快速。您也可以在他们的网站上进行测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-04T21:57:44.387

我查看了几种解决方案，但都失败了，滚动和选择文本是最大的困惑。我没有向右滚动，而是关闭了盒子等。

我刚刚完成了为我完成所有工作的实现。

[https://github.com/webdevelopers-eu/jquery-dna-gestures](https://github.com/webdevelopers-eu/jquery-dna-gestures)

它是麻省理工学院，所以做你想做的事——是的，它真的很简单——缩小了 800 字节。您可以在我的（开发中的）网站[https://cyrex.tech](https://cyrex.tech)上查看它- 在触摸设备上向右滑动应该会关闭弹出窗口。

# c# - 动态写入的 DataGridView 列 ReadOnly 属性不起作用

> ID：15084678
> 
> 赞同：0
> 
> 时间：2013-02-26T08:41:14.767
> 
> 标签：c#, datagridview, readonly

我在表单加载中将 ReadOnly 属性写为 true

```
dgvDcNon.Columns["itemDiscrip"].ReadOnly = true; 
```

但该属性不工作。我应该采取更多步骤来实现这一点吗？

我在editingcontrolshowing事件中将自动完成模式设置为datagridview。有什么原因吗？我的代码是

```
 if (e.Control is TextBox)
            {
                TextBox tbValid = e.Control as TextBox;
                tbValid.KeyPress += new KeyPressEventHandler(tbValid_KeyPress);
            }
            String[] strAutoCmp = prodctsDCCls.AutoCmpltPrdct();
            TextBox txtAuto = e.Control as TextBox;
            txtAuto.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
            txtAuto.AutoCompleteSource = AutoCompleteSource.CustomSource;

            if (this.dgvDcNon.Columns[this.dgvDcNon.CurrentCell.ColumnIndex].Name == "itemDiscrip")
            {
                var name = new AutoCompleteStringCollection();
                name.AddRange(strAutoCmp);
                if (txtAuto != null)
                {
                    txtAuto.AutoCompleteCustomSource = name;
                }
            }
            else
            {
                txtAuto.AutoCompleteCustomSource = null;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:51:03.987

会不会和数据源有关？如果数据源是只读的，那么您不能更改它。

**已编辑**

如果为此使用数据库模型，EX：

```
Class Item
{
    public string itemId {get; set;}
    public string itemName {get; set;}
    public string itemDiscrip {get; set;}
    public int itemSize {get; set;}
    //whatever
} 
```

尝试从您的代码中删除设置器：

```
public int itemSize {get; set;} 
```

应该成为

```
public int itemSize {get;} 
```

如果您有其他类型的数据源，请尝试使用 readonly 修饰符。

# arrays - Video.js - 如何在一页中引用多个视频？

> ID：15084690
> 
> 赞同：2
> 
> 时间：2013-02-26T08:42:12.683
> 
> 标签：arrays, html5-video, video.js

天哪，我找不到答案，我已经花了几个小时了。 **如何在 video.js 中同时引用多个视频？**

API 文档说：

> 引用播放器：您只需要确保您的视频标签有一个 ID。示例嵌入代码的 ID 为“example_video_1”。如果您在一页上有多个视频，请确保每个视频标签都有唯一的 ID。
> 
> var myPlayer = *V* ("example_video_1");

此示例显示了一个 ID，但没有显示如何同时引用多个 ID。

如果我有 3 个不同的标签：“video_1”、“video_2”、“video_3”，我该如何引用它们？

我尝试了一个数组，但它没有用。我还尝试列出这样的视频：

```
var myPlayer = _V_("video_1", "video_2"); 
```

也没有工作。

有人可以在这里帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:25:47.640

您不能将多个 id 传递给`_V_()`. 一次做一个：

```
var myPlayer1 = _V_("video_1");
var myPlayer2 = _V_("video_2");
var myPlayer3 = _V_("video_3"); 
```

或者，如果您希望它们作为数组：

```
var myPlayers = Array(_V_("video_1"), _V_("video_2"), _V_("video_3"));
myPlayers[1].play(); 
```

**注意：**这是为旧版本的 video.js 编写的。`_V_()`仍然有效，但已弃用：`videojs()`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:57:06.143

这也可以：

```
var video = [];
video[1] = _V_("Video1");
video[2] = _V_("Video2");
video[3] = _V_("Video3");
video[4] = _V_("Video4");
video[5] = _V_("Video5");
video[6] = _V_("Video6");
video[7] = _V_("Video7");
video[8] = _V_("Video8");
video[9] = _V_("Video9");
video[10] = _V_("Video10"); 
```

# c# - 将列表框的选定项目显示到消息框中

> ID：15084693
> 
> 赞同：2
> 
> 时间：2013-02-26T08:42:16.690
> 
> 标签：c#, .net, listbox, messagebox

我可以在单击按钮时将列表框中的多个选定项目显示到文本框中，但是如何在消息框上显示相同的项目？我的意思是在消息框上显示第一个项目不是问题，但同时显示多个项目是。建议请...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace cities
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            textBox1.Clear();
            foreach (object selectedItem in listBox1.SelectedItems)
            {
               textBox1.AppendText(selectedItem.ToString() + Environment.NewLine);
            }

        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T08:45:16.840

您可以创建临时变量以在其中保存文本，然后创建一个消息框。

```
StringBuilder message = new StringBuilder();
foreach (object selectedItem in listBox1.SelectedItems)
{
    message.AppendLine(selectedItem.ToString());
}
MessageBox.Show(message.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:47:20.930

您可以基于所有创建单个字符串`SelectedItems`，然后将其显示在 MessageBox 中。像

```
string str = string.Join(",",
                        listBox1.SelectedItems.Cast<object>().Select(r => r.ToString()));
MessageBox.Show(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:45:40.407

在您的按钮中单击 -

```
 textBox1.Clear();
        string str = string.Empty;
        foreach (object selectedItem in listBox1.SelectedItems)
        {
            str += selectedItem.ToString() + Environment.NewLine;
        }

        textBox1.Text = str;
        MessageBox.Show(str); 
```

# javascript - 从 HTML 中读取 Checkbox 选中的属性

> ID：15084699
> 
> 赞同：0
> 
> 时间：2013-02-26T08:42:37.050
> 
> 标签：javascript, jquery, asp.net

我有一个呈现如下的 aspx 页面。

```
<div id="div1">
<tr>
<td>SomeTxt</td>
<td><input checked="checked" class="check-box" disabled="disabled" type="checkbox" /></td>
<td>text2</td>
</tr>
</div> 
```

我正在尝试从 javascript 读取复选框选中的属性：

```
var status = $('#div1 tbody tr:eq(' + tr.rowIndex + ') td:eq(1)').checked; 
```

但我越来越不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:45:21.030

采用`is(':checked')`

```
var status = $('#div1 input[type="checkbox"]').is(':checked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:46:16.567

像这样的东西

```
var status = $("input[type='checkbox']:checked").val();
alert(status); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:46:27.210

TD 将没有选中的属性，您必须选择输入元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:46:53.327

您可以使用：

```
$("#yourID").is(":checked") 
```

确保为您的复选框提供一个 ID，而不是拿走它`<tr>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:48:49.933

td:eq(1) 将返回 td 而不是输入元素

```
var status = $('#div1 tbody tr:eq(' + tr.rowIndex + ') td:eq(1)').find("input").get(0).checked; 
```

问候，

# algorithm - 对数的复杂度分析

> ID：15084704
> 
> 赞同：1
> 
> 时间：2013-02-26T08:42:57.610
> 
> 标签：algorithm, complexity-theory, logarithm

我有两个函数，f(n)=log [2] n 和 g(n)=log [10] n。我试图确定 f(n) 是 O(g(n))，还是 Ω(g(n)) 或 Θ(g(n))。我认为我应该取极限 f(n)/g(n)，因为 n 趋于无穷大，我认为极限是常数，所以 f(n) 必须是 Θ(n)。

我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:47:52.103

log [2] n = log [10] n / log [10] 2（从[这里](http://www.purplemath.com/modules/logrules5.htm)）

所以 f(n) = g(n) / log [10] 2

因此 f(n) 和 g(n) 仅相差一个常数因子（因为 log [10] 2 是常数）。

因此，根据[O(x)、Ω(x) 和 Θ(x) 的定义](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)，我想说：

f(n) ∈ O(g(n)),
f(n) ∈ Ω(g(n)),
f(n) ∈ Θ(g(n))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:48:12.687

是的你是对的。从复杂性的角度来看（至少从大 O 的角度来看）它是 log [2]还是 log [10]并不重要。

f(n) 是 O(g(n)) 并且 f(n) 是 Ω(g(n))，f(n) 是 Θ(g(n))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:48:11.437

由于限制是恒定的，因此 f(n) ∈ Θ(g(n)) 是正确的（假设您在问题中有错字）。当然还有 g(n) ∈ Θ(f(n))。

顺便说一句：不仅比率的限制是常数，而且 log [2] n/log [10] n 始终是常数（log [2] 10）。

# c# - 映射具有不同名称的外键

> ID：15084706
> 
> 赞同：0
> 
> 时间：2013-02-26T08:43:11.993
> 
> 标签：c#, entity-framework, foreign-keys

我有以下模型：

```
public class Task
{
    public int Id { get; set; }
    public int UseraccountId { get; set; }
    public virtual Useraccount Useraccount { get; set; }
} 
```

useraccountId 是显示给我的 useraccount 实体/模型的外键。实体框架可以将此外键映射到虚拟属性，因为它删除了“Id”，因此“useraccountId”变为“useraccount” -> 映射到“Useraccount”。如果我想将外键“useraccountId”重命名为“creatorId”怎么办？我现在如何告诉实体框架将此外键映射到虚拟用户帐户属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:47:53.850

使用`ForeignKey`属性。

```
public class Task
{
    public int Id { get; set; }
    public int CreatorId { get; set; }

    [ForeignKey("CreatorId")]
    public virtual Useraccount Useraccount { get; set; }
} 
```

# php - 如何将 Apache Solr 与 mysql 连接

> ID：15084713
> 
> 赞同：4
> 
> 时间：2013-02-26T08:43:34.810
> 
> 标签：php, mysql, apache, solr

我想将 Apache Solr 搜索服务器与 mysql 服务器连接起来，以便我可以从我的数据库中获取过滤后的数据并将其转换为 JSON 或 XML。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T07:37:23.993

第一步：新建一个xml文件db-data-config.xml，放入如下内容：

```
 <dataConfig>
    <dataSource type="JdbcDataSource" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://`localhost`/database_name" user="" password=""/>
    <document>
    <entity name="table_name" query="select * from table_name" >
    <field name="solr_field_map" column="table_column_name" />
    <field name="name" column="name" />
    </entity>
    <entity name="emp" query="select id from emp">
<field name="id" column="id" />
    </entity>
    </document>
    </dataConfig> 
```

第 2 步：在 solrconfig.xml 中，添加：

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">db-data-config.xml</str>
    </lst>
  </requestHandler> 
```

第 3 步：使用命令将数据从 mysql 源导入到 solr：

http:// `localhost`:8983/solr/db/dataimport?command=full-import

如果您想在索引到 solr 之前修改字段，那么您可以在 db-data-config.xml 中的实体上制作转换器。[变压器在这里解释](http://wiki.apache.org/solr/DataImportHandler#Transformer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-25T04:57:14.240

我也有同样的问题，很难找到简单的教程。无论如何，我找到了以下教程，它对我很有用。[http://lasithtechavenue.blogspot.com/2013/11/crawling-mysql-database-with-apache-solr.html](http://lasithtechavenue.blogspot.com/2013/11/crawling-mysql-database-with-apache-solr.html)

如果我简要说明步骤。

1.  在 solr/collection1/conf 上创建一个配置文件，并在其上添加数据库信息和表列信息。

2.  从 solr/collection1/conf/solrconfgig.xml 指向该配置文件

3.  将未知字段添加到架构

4.  添加dataimport和mysql相关依赖

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T08:49:28.823

你可以参考[http://wiki.apache.org/solr/DataImportHandler#Oracle_Example](http://wiki.apache.org/solr/DataImportHandler#Oracle_Example)，配置你的数据源，配置你的data-config.xml

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T08:46:39.800

我过去所做的只是创建一个索引脚本。该脚本作为夜间进程运行，提取您要添加到搜索索引的 mySQL 数据，并指定 solr 显示相关搜索结果所需的所有信息。

此外，您可以在数据库更新时添加索引项，例如，如果创建了新用户，则将一些代码添加到插入新索引项的注册脚本中。

它非常快速和容易，solr 文档非常好。

[http://lucene.apache.org/solr/4_1_0/tutorial.html](http://lucene.apache.org/solr/4_1_0/tutorial.html)

希望这可以帮助。

# ruby-on-rails - Rails 检查是否在不知道键的情况下设置了参数值

> ID：15084715
> 
> 赞同：1
> 
> 时间：2013-02-26T08:43:50.750
> 
> 标签：ruby-on-rails

全部，

我收到了这个请求：

```
{"utf8"=>"✓", "search"=>{"name_equals"=>"", "age_equals"=>""}} 
```

我想检查的是，是否`name_equals`或`age_equals`已经设置了一个值，只需知道 params[:search]。可以有`search`比示例中更多的值。

我希望有人可以帮助我解决这个问题，谢谢。

-e- 你说得对，知道我同意：

```
blank = params[:search].values.all?(&:blank?) if params[:search] != nil
@search = BillingDestination.search(blank ? nil : params[:search]) 
```

Tass 和 Łukasz Niemier 答案的组合；) Tass 忘记了 .values 而 Lukasz 忘记了 & 符号。

我怎么能在一条线上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:03:34.943

一起去

```
params['search'].values.any?(&:blank?) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:13:04.873

只需检查所有值是否都存在。

```
params[:search].all? { |k, v| v.present? } 
```

为此，您也可以检查这些值

```
params[:search].values.all?(&:present?) 
```

确实错过了 & 标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:00:07.467

你可以使用：

```
if params['search'] && (params['search']['name_equals'] && params['search']['name_equals'])
# do something
end 
```

和：

```
 # get all keys
 all_the_keys = params['search'].keys 

 # or if you only want ones that contain something
 all_the_non_blank_keys = params['search'].select {|k,v| !v.blank?} 
```

# c# - 实体框架编译错误。类不能用作标量属性，因为它没有 getter 和 setter

> ID：15084718
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:43:58.617
> 
> 标签：c#, .net, entity-framework, fluent-interface, database-relations

使用 Code First 方法并为现有系统实现数据库。因此，我无法对现有代码进行大量更改。这就是我使用 Fluent API 和实体框架的原因。

当我尝试实现一个`Vector`由其他几个类使用的新类 ( ) 时，出现编译错误：

```
The relationship 'Price_Data' was not loaded because the type 'Vector' is not available.
The following information may be useful in resolving the previous error:
The property 'Item' of type 'Vector' in the assembly 'Core, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' cannot be used as a scalar property because it does not have both a getter and setter. 
```

由于我对.NET（来自Java）相当陌生，我不知道从哪里开始寻找错误。

这里有谁知道为什么，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:46:43.030

如果你仔细阅读错误信息，问题就很清楚了：

> 程序集“Core，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”中类型“Vector”的属性“Item”不能用作标量属性，因为它没有 getter 和 setter。

您的类`Vector`有一个属性`Item`，它确实有一个 getter 或一个 setter，但不是两者兼有，并且 Entity Framework 需要读写属性才能正常工作。

## 无关注释：建议

如果您的域对象没有将它们的属性标记为虚拟（即`public virtual string PropertyName`），那么您将不会利用延迟加载，这意味着您的查询将加载整个结果集，最终以非常低效的数据 I/ O（*更多的网络流量，更长的加载时间，并且在一天结束时，应用程序/服务更慢*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:46:38.310

如果我可能如此大胆，错误类型清楚地表明：Vector 类型（在程序集核心中）中的属性 Item 没有 a`get`和`set`子句。如果您想将其与 EF 一起使用，则需要一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:48:20.983

我发现了为什么会这样。

`Vector`有一个`Indexer`财产，又名`public var this[]`. 感谢[另一个 StackOverflow 帖子](https://stackoverflow.com/questions/14232615/ignore-this-property-with-code-first-fluent-api-column-item-is-added)。

目前，Fluent API 无法处理此类问题，解决此问题的最简单方法是使用 Data Annotation 和`[NotMapped]`.

生成的代码将类似于：

```
class Vector
{
    [NotMapped]
    public var this[]
    {
    }
} 
```

感谢大家花时间帮助我解决这个问题。

# php - php数组迭代失败

> ID：15084719
> 
> 赞同：1
> 
> 时间：2013-02-26T08:44:08.557
> 
> 标签：php, arrays

我有一个应用程序，我可以在 MySql 上保存工作日和营业时间，如下所示：

```
0 10 22,1 10 22,2 10 22,4 10 22,5 10 22,6 10 22 
```

php 数组从 Mysql 获取它，格式如下

```
Array ( [open_hours] => 0 10 22,1 10 22,2 10 22,4 10 22,5 10 22,6 10 22 ) 
```

`0 10 22`只是意味着`Monday 10am 22pm`

我当前的代码似乎效果不佳，下面是我用来格式化日期和时间的代码

```
$openHrs = $businessMapper->getBusinessHours($business_id);
// return Array ( [open_hours] => 0 10 22,1 10 22,2 10 22,4 10 22,5 10 22,6 10 22 )
$openHrs = explode(",", $openHrs['open_hours']);
$weekdays = array('Sun','Mon','Tue','Wed','Thu','Fri','Sat');
        foreach($openHrs as &$temp) {
             //$temp = $weekdays[$temp[0]]
            $temp = explode(" ", $temp);
             //$temp = explode(" ", $temp);
            $temp[1] = $temp[1] > 12 ? $temp[1] - 12 . 'pm' : $temp[1] . 'am';
            $temp[2] = $temp[2] > 12 ? $temp[2] - 12 . 'pm' : $temp[2] . 'am';
            $temp = $weekdays[$temp[0]] . ' ' . $temp[1] . ' ' . $temp[2];
        } 
```

但问题是，我只得到一个结果，即`Sat 10am 10pm`. 我怎样才能修复我的代码？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:46:11.917

问题：每次 foreach 迭代时都会覆盖前一个值，即`$temp`只包含最后一个值。

解决方案：添加一个变量 $res 作为数组并将每个值分配给它。

尝试这个 ：

```
$openHrs = $businessMapper->getBusinessHours($business_id);
// return Array ( [open_hours] => 0 10 22,1 10 22,2 10 22,4 10 22,5 10 22,6 10 22 )
$openHrs = explode(",", $openHrs['open_hours']);
$weekdays = array('Sun','Mon','Tue','Wed','Thu','Fri','Sat');
$res      = array();
        foreach($openHrs as &$temp) {
             //$temp = $weekdays[$temp[0]]
            $temp = explode(" ", $temp);
             //$temp = explode(" ", $temp);
            $temp[1] = $temp[1] > 12 ? $temp[1] - 12 . 'pm' : $temp[1] . 'am';
            $temp[2] = $temp[2] > 12 ? $temp[2] - 12 . 'pm' : $temp[2] . 'am';
            $res[]   = $weekdays[$temp[0]] . ' ' . $temp[1] . ' ' . $temp[2];
        }

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:49:49.650

```
$openHrs = $businessMapper->getBusinessHours($business_id);
$openHrs = explode(",", $openHrs['open_hours']);
$weekdays = array('Sun','Mon','Tue','Wed','Thu','Fri','Sat');

$resultArray = array();

foreach($openHrs as $temp) {
   $tempRecord = explode(" ", $temp);

   if (count($tempRecord) == 3) {
       $timeBegin = $tempRecord[1] > 12 ? $tempRecord[1] - 12\. 'pm' : $tempRecord[1]. 'am';
       $timeEnd = $tempRecord [2] > 12 ? $tempRecord[2] - 12\. 'pm' : $tempRecord[2]. 'am';
       $resultArray[] = "{$weekdays[$temp[0]]} {$timeBegin} {$timeEnd}";
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:48:17.063

foreach($openHrs as &$temp)

您不能在循环中使用 $temp 变量！

# node.js - Mongoose.js 架构描述问题（数组与对象）

> ID：15084726
> 
> 赞同：1
> 
> 时间：2013-02-26T08:44:51.147
> 
> 标签：node.js

我需要存储一些用户词典（单词集，我需要将其存储为用户属性），每个词典实际上只有一个属性：语言。

所以我可以这样描述这个属性：

```
dictionaries:[{language: 'string', words: [.. word entry schema desc..]
    }] 
```

并像这样存储字典：

```
dictionaries: [
   {language: en, words: [.. words of English dictionary..]},
   {language: es, words: [.. words of Spanish dictionary..]}
] 
```

但实际上我可以以“较少嵌套”的方式存储字典：不是数组邻接对象：

```
dictionaries: {
   en: [.. words of English dictionary..],
   es: [.. words of Spanish dictionary..]
} 
```

但我看不到用猫鼬模式描述此类对象的方法。所以问题是考虑到我使用猫鼬，什么是最好的（在存储和查询方面更合理）选项。

# svn - svn 命令行可以有两个版本的差异——一个用于视觉，一个用于文本？

> ID：15084727
> 
> 赞同：2
> 
> 时间：2013-02-26T08:44:54.693
> 
> 标签：svn

我可以使用 Meld 设置 svn 命令行来区分，并使用 Macbook Pro，我会`ssh -X`到 Linux 机器，以便 Linux 机器可以执行 Meld 可以将窗口发送到 Mac。

但有时，文件可能有 2000 行，我知道只有一两行差异，我只想要一个快速差异，否则 Meld 会很慢，通过窗口发送并且滚动到很慢差异线。有没有办法调用不同的差异工具？如

```
svn diff        <-- the usual visual diff
svn textdiff    <-- doing just text diff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:56:21.593

我不确定您是否可以自定义`svn`命令，所以刻薄的答案是“使用`git`”：P

非刻薄的答案是，您可以设置一个 shell 别名或一个 shell 脚本，它将`svn diff`以您想要的方式调用。

例如，如果你使用`bash`，你可以把它放到你的启动文件中：

```
alias svntdiff="svn diff --diff-cmd /usr/bin/diff" 
```

然后使用`svntdiff`vs. `svn diff`（可能会使用 Meld，就像你配置的那样）

* * *

我可以推荐的另一件事是不要通过网络传递 Meld 显示，而是传递文件。为此，我经常使用以下脚本 ( `~/bin/sshm`)：

```
#!/bin/bash

HOST=$1
if [ -z "$HOST" ]; then
  echo Error: hostname not specified >&2
  exit 1
fi
mkdir -p /Volumes/$HOST
sshfs $HOST:/ -ofollow_symlinks /Volumes/$HOST
ssh $HOST
umount /Volumes/$HOST 
```

您将需要安装`sshfs`( `brew install sshfs`)。鉴于此，现在您可以`sshm`进入您的 linuxbox，但通过`/Volumes/linuxbox`. 然后在本地运行 Meld，指向挂载的远程文件。（或者更确切地说`mvimdiff`，在我的情况下）。同样的事情还允许我使用 MacVim 在远程服务器上编辑东西，而我的所有配置和插件都完好无损。

（您也可以替换`sshfs $HOST:/ ...`为`sshfs $HOST: ...`仅挂载您的目录，而不是整个文件系统。）

# mysql - Unix：不能在 MySQL 命令中使用反引号

> ID：15084741
> 
> 赞同：3
> 
> 时间：2013-02-26T08:45:26.160
> 
> 标签：mysql, unix, ubuntu

我在 bash (Ubuntu) 中写了一个 MySQL 命令：

```
[XXXX:~]$ mysql -h localhost -u XXXX -pXXXX -e "DROP DATABASE IF EXISTS `f-XXXX`;" 
```

我在这个命令中需要反引号，因为数据库名称是可变的。

该命令不起作用，它发送`f-XXXX command not found` 我认为我的问题与反引号有关。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:56:04.150

您无需在此处使用反引号进行变量替换。

```
[XXXX:~]$ mysql -h localhost -u XXXX -pXXXX -e "DROP DATABASE IF EXISTS ${DB};"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:49:36.453

Bash 获取反引号的内容并使用它作为命令运行另一个 bash 进程。

这是一个反引号。**反**引号不是引号，它具有非常特殊的含义。您在反引号之间键入的所有内容都由 shell 在主命令之前评估（执行）（如示例中的 chown），并且该命令使用该执行的输出，就像您在该位置键入该输出一样命令行。

改用 $(commands)。

```
mysql -h localhost -u XXXX -pXXXX -e "DROP DATABASE IF EXISTS $('f-XXXX');" 
```

# html - 编写一个没有行但只有一列的表

> ID：15084745
> 
> 赞同：0
> 
> 时间：2013-02-26T08:45:41.687
> 
> 标签：html, html-helper

我有一个 HTML 表格。它有 3 列。第一列是`name`。第二个是`School`第三个是`HomeAddress`。

该表从数据库加载记录，因此行数可能会不时变化。第 3 列 ( `HomeAddress`) 应该没有行，而其他 2 列 (`name`和`school`) 可以有更多行。我应该如何对 HTML 表进行建模以使第三列没有行？

```
<table border="1">
    <tr>
        <th>
            Name
        </th>
        <th>
            School
        </th>
        <th>
            Home Address
        </th>
    </tr>

@foreach (var i in Model.allPpl)
{
    <tr>
        <td>
     @Html.DisplayFor(modelItem => i.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => i.school)

        </td>
        <td>
            // THERE SHOULDN'T BE ANY ROWS FOR THIS COLUMN, JUST ONE COLUMN FOR THE WHOLE TABLE
        </td>
</tr>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:55:27.880

我认为这些条目将对您有所帮助：

[http://www.w3schools.com/tags/att_td_rowspan.asp](http://www.w3schools.com/tags/att_td_rowspan.asp)

[http://www.w3schools.com/tags/att_td_colspan.asp](http://www.w3schools.com/tags/att_td_colspan.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:57:18.087

[Rowspan](http://www.w3schools.com/tags/att_td_rowspan.asp)属性是你唯一的朋友。

尝试`<td rowspan="rowcount"></td>`行数为否的第三列。返回的行数。

并按如下方式修改您的 foreach 循环：

```
 @bool flag=false;
 @foreach (var i in Model.allPpl)
 {
  <tr>
     <td>
   @Html.DisplayFor(modelItem => i.name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => i.school)

    </td>
    if(!flag){
    <td rowspan="@Model.allPpl.count">
        // THERE SHOULDN'T BE ANY ROWS FOR THIS COLUMN, JUST ONE COLUMN FOR THE WHOLE TABLE
    </td>
     }flag=true;
</tr>
} 
```

注意：我还没有测试过这个剃刀视图代码，所以如果显示任何编译器错误，请注意。

# jsrender - jsRender - 是否可以将模板标记传递给另一个模板？

> ID：15084750
> 
> 赞同：0
> 
> 时间：2013-02-26T08:46:02.377
> 
> 标签：jsrender

例如，我想使用`{{for}}`如下标签并将其传递给内联模板：

```
{{for persons tmpl="{{>firstName}} {{>lastName}}" /}} 
```

在哪里

```
var person = [{firstName:"John", lastName:"Resig"}, ...] 
```

这是一个简单的案例。我想用它来将模板标记传递给自定义标签，而不用命名传递的模板。我希望内联定义模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:09:07.840

您要做的是使用嵌套模板。

```
{{for persons tmpl="#nameTemplate" /}} 
```

哪里`#nameTemplate`会在别处定义。该`persons`模型将被传递给该模板，这意味着您可以像这样定义它：

```
<script id="nameTemplate" type="text/x-jsrender">
    <p>{{:firstName}}</p>
    <p>{{:lastName}}</p>
</script> 
```

# dbcontext - 当实体设置为内部访问时，DbContext EntitySet null

> ID：15084753
> 
> 赞同：0
> 
> 时间：2013-02-26T08:46:17.040
> 
> 标签：dbcontext, internal, dbset

我希望数据库设置为内部的，以确保外部包只能访问和编程接口而不是具体类

例如

```
namespace Domain
{
    public interface IProduct
    {
        string Description { get; }
        int Id { get; }
        decimal Price { get;  }
    }
}

//Separate Person.cs file for custom logic
namespace Domain
{
    internal partial class Product :IProduct
    {
    }
}

internal partial class POS : DbContext
{
    public POS()
        : base("name=POS")
    {
    }   

    internal DbSet<Product> Products { get; set; }
}

//The other Person.cs file is generated by the .tt file 

//_context.People is null which caused the dreaded null pointer exception :(
var people = _context.People.ToList(); 
```

一旦我通过模型浏览器将对 Person 类和 People 实体的访问设置为公共，它就会再次工作，但我想限制对内部的访问以进行包封装。

它适用于 VS2010 EF 中的 Context，但不适用于 VS2012 中的 DbContext。

任何帮助深表感谢 ：}

附言

现在我刚刚编辑了 .tt 文件，如下所示

```
public <#=code.Escape(container)#>()
    : base("name=<#=container.Name#>")
{
    Products = Set<Product>(); 
```

这会生成如下实例化集合的上下文类，最好不必为模型中的每个实体集将其添加到 .tt 文件中。

```
internal partial class POS : DbContext
{
    public POS()
        : base("name=POS")
    {
         Products = Set<Product>(); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T16:25:56.690

我知道这个问题很老，但我也遇到了这个问题。根据许多其他 StackOverflow 帖子，这仍然是 EntityFramework 的行为，解决方案仍然是明确`Set<>`的实体集。

也就是说，我不必手动将每个实体名称添加到 .tt 文件中，而是创建了一些代码，使 TT 文件为每个实体自动生成此代码。

在`*.Context.tt`文件中，您应该发现构造函数的代码如下所示：

```
 public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
}
#>
    } 
```

修改它，使它现在看起来像：

```
 public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
}
#>

<#
    foreach (var entitySet in container.BaseEntitySets.OfType<EntitySet>())
    {
#>
        <#=codeStringGenerator.SetStatement(entitySet)#>

<#
}
#>
    } 
```

在文件的下方，您应该会看到该类的类定义`CodeStringGenerator`，添加一个新方法（我直接在第`DbSet`307 行附近的方法定义下添加了我的方法）：

```
public string SetStatement(EntitySet entitySet)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} = Set<{1}>();",
        _code.Escape(entitySet),
        _typeMapper.GetTypeName(entitySet.ElementType));
} 
```

当您保存模板时，它应该使用模型中每个实体`DbContext`的语句重新生成类。`Set<>`添加的新实体将重新触发模板生成，并且这些新实体也将包含在构造函数中。

# c# - 输入字符串的格式不正确

> ID：15084760
> 
> 赞同：0
> 
> 时间：2013-02-26T08:46:39.877
> 
> 标签：c#, asp.net, datagridview

我正在尝试在 gridview 中添加 int 值。这是我的 C# 代码：

```
foreach (GridViewRow r in GridView1.Rows) 
{
      int I = (Convert.ToInt32(r.Cells[5].Text) 
              + Convert.ToInt32(r.Cells[6].Text) 
              + Convert.ToInt32(r.Cells[7].Text) 
              + Convert.ToInt32(r.Cells[8].Text) 
              + Convert.ToInt32(r.Cells[9].Text));
      r.Cells[10].Text = Convert.ToString(I);
} 
```

> 例外：“输入字符串的格式不正确”

它之前工作正常。我切换到另一个系统，附加数据库，在此处和那里进行了一些更改，但现在无法正常工作。加载页面时，gridview 单元格已经具有值。我只是添加（求和）这些值，并通过单击按钮在同一网格视图的另一个单元格中显示添加内容。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:48:45.753

检查传入每个`Convert.ToInt32`调用的值，其中一个或多个不能转换为`int`.

您可以通过直接查看数据库管理器中的源代码来执行此操作，或者单步执行代码并查看行列和值等。但是，修复保持不变，并采用以下两种形式中的一种或两种：修复数据，或将代码修复为不在乎（如果可以接受的话）。

您可能对[`int.TryParse`](http://msdn.microsoft.com/en-gb/library/system.int32.tryparse.aspx)后一个目的感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:57:53.250

尝试这个：

```
 foreach (GridViewRow r in GridView1.Rows)
        {
            int val1 = 0;
            int val2 = 0;
            int val3 = 0;
            int val4 = 0;
            int val5 = 0;

            int.TryParse(r.Cells[5].Text, out val1);
            int.TryParse(r.Cells[6].Text, out val1);
            int.TryParse(r.Cells[7].Text, out val1);
            int.TryParse(r.Cells[8].Text, out val1);
            int.TryParse(r.Cells[9].Text, out val1);

            int I = (val1 + val2 + val3 + val4 + val5);

            r.Cells[10].Text = I.ToString();
        } 
```

在可能的情况下尝试转换为另一种数据类型之前，您应该始终测试值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:55:05.890

您无法通过 Convert 将空值转换为有意义的值。您最好的选择是首先检查 null ，然后将值 0 （或其他值）分配给结果（无论 Convert 也发送其结果）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:52:16.270

迭代时检查 GridViewRow 的 RowType。可能是您试图解析 HeaderRow 中的值。我认为您只对 DataRows 感兴趣。

此外，您可能需要考虑不使用单元格上的索引从网格视图中获取值。如果您更改 gridview 的布局，您的计算将失败。

# java - JTree 显示与子节点相同的节点

> ID：15084761
> 
> 赞同：2
> 
> 时间：2013-02-26T08:46:41.697
> 
> 标签：java, swing, jdbc, jtree, treenode

我正在为我的 JTree 使用自定义 TreeModel。我有一个根节点，只有 1 个子节点是通过数据库查询检索到的。我能够用所需的输出填充树。

但是，当我单击子节点时，它会不断递归地显示相同的子节点，并不断添加具有相同输出的子节点。我尝试使用静态节点，即我创建了一个根节点，然后向它添加了 2 个子节点，我观察到相同的行为。

**我的主程序**

```
import javax.swing.JFrame;
import javax.swing.JSplitPane;
import javax.swing.SwingUtilities;

public class RunApp {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ShowFrame f = new ShowFrame();

                f.setSize(600, 600);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setVisible(true);
            }
        });
    }
} 
```

**我的 show_frame 课程**

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.HeadlessException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.tree.DefaultMutableTreeNode;

public class ShowFrame extends JFrame {

    private JSplitPane splitPane;
    private FormPanel formPanel;
    private TreePanel treePanel;
    private JTabbedPane tabPane;
    private List<Objects> instanceDetails= new ArrayList<Objects>();

    public ShowFrame() {
        super("new frame");
        formPanel = new FormPanel();
        instanceDetails.add(new Objects(" "," "," "," "));
        treePanel = new TreePanel(instanceDetails);
        tabPane = new JTabbedPane();
        tabPane.add(treePanel);

        splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, formPanel,
                tabPane);
        splitPane.setOneTouchExpandable(true);

        setMinimumSize(new Dimension(500, 500));
        add(splitPane, BorderLayout.CENTER);
    }
} 
```

**这是我创建 TreePanel 的地方**

```
import java.util.List;

import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

public class TreePanel extends JPanel {

    private int count = 0;

    private JTree tree;
    private List<Objects> instanceDetails;
    private MyTreeModel gm;
    private DefaultMutableTreeNode root = new DefaultMutableTreeNode();

    private Controller c = new Controller();

    public TreePanel(List<Objects> instanceDetails) {
        this.instanceDetails = instanceDetails;
        tree = new JTree();

        if (instanceDetails.get(0).getObjectId() == " ") {
            tree.setModel(new MyTreeModel(root));

        } else {
            tree.setModel(new MyTreeModel(treeNodes(instanceDetails)));
        }

        gm = new MyTreeModel(root);
        gm.fireTreeStructureChanged(root);

        tree.getSelectionModel().setSelectionMode(
                TreeSelectionModel.SINGLE_TREE_SELECTION);
        add(tree);

    }

    private DefaultMutableTreeNode treeNodes(List<Objects> instanceDetails) {
        for (Objects id : instanceDetails) {
            count++;

            DefaultMutableTreeNode objs = new DefaultMutableTreeNode(count + " : " + id.getType()
                    + " : " + id.getObjectId() + " : " + id.getStatus() + " : "
                    + id.getCondition());

            root.add(objs);
        }

        return root;
    }

} 
```

**我的树模型**

```
import java.util.Vector;

import javax.swing.event.TreeModelEvent;
import javax.swing.event.TreeModelListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

public class MyTreeModel implements TreeModel {

    public static Vector<TreeModelListener> treeModelListeners =
        new Vector<TreeModelListener>();

    private static DefaultMutableTreeNode rootPerson;

     public MyTreeModel(DefaultMutableTreeNode nodes) {
        rootPerson = nodes;
    }

     //////////////// Fire events //////////////////////////////////////////////

    /**
     * The only event raised by this model is TreeStructureChanged with the
     * root as path, i.e. the whole tree has changed.
     */
    protected void fireTreeStructureChanged(DefaultMutableTreeNode rootPerson) {
        TreeModelEvent e = new TreeModelEvent(this, new Object[] {rootPerson});
        for (TreeModelListener tml : treeModelListeners) {
            tml.treeStructureChanged(e);
        }
    }

     //////////////// TreeModel interface implementation ///////////////////////

    /**
     * Adds a listener for the TreeModelEvent posted after the tree changes.
     */
    public void addTreeModelListener(TreeModelListener l) {
        treeModelListeners.addElement(l);    
       }

    /**
     * Returns the child of parent at index index in the parent's child array.
     */
    public Object getChild(Object parent, int index) {
        return rootPerson.getChildAt(index);
    }

    /**
     * Returns the number of children of parent.
     */
    public int getChildCount(Object parent) {
        return 1;
        //rootPerson.getLeafCount()

    }

    /**
     * Returns the index of child in parent.
     */
    public int getIndexOfChild(Object parent, Object child) {
        return rootPerson.getIndex((DefaultMutableTreeNode) child);
    }

    /**
     * Returns the root of the tree.
     */
    public Object getRoot() {
        return rootPerson;
    }

    /**
     * Returns true if node is a leaf.
     */
    public boolean isLeaf(Object node) {
        return rootPerson.isLeaf();
    }

    /**
     * Removes a listener previously added with addTreeModelListener().
     */
    public void removeTreeModelListener(TreeModelListener l) {
       //removeTreeModelListener(l);
    }

    /**
     * Messaged when the user has altered the value for the item
     * identified by path to newValue.  Not used by this model.
     */
    public void valueForPathChanged(TreePath path, Object newValue) {
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:25:21.527

您对 TreeModel 的实现很笨拙，是您出现问题的原因：

```
public static Vector<TreeModelListener> treeModelListeners =
    new Vector<TreeModelListener>();

private static DefaultMutableTreeNode rootPerson; 
```

--> 糟糕，糟糕，糟糕，...... 真的很糟糕。绝对没有必要做出这些陈述`static`，如果您碰巧创建了 2 个不同的实例，这将导致严重的问题

```
/**
 * Returns the child of parent at index index in the parent's child array.
 */
public Object getChild(Object parent, int index) {
    return rootPerson.getChildAt(index);
} 
```

在这里，无论`parent`提供哪个，您总是返回同一个孩子（因此这就是为什么您一遍又一遍地看到同一个孩子）。代码应该是`return (parent==rootPerson?rootPerson.getChildAt(index):null);`

```
/**
 * Returns the number of children of parent.
 */
public int getChildCount(Object parent) {
    return 1;
    //rootPerson.getLeafCount()

} 
```

与之前的评论相同，您不看什么是`parent`. 代码应该是`return (parent==rootPerson?1:0);`

```
/**
 * Returns the index of child in parent.
 */
public int getIndexOfChild(Object parent, Object child) {
    return rootPerson.getIndex((DefaultMutableTreeNode) child);
} 
```

与之前的评论相同，您不看什么是`parent`. 代码应该是`return (parent==rootPerson?rootPerson.getIndex((DefaultMutableTreeNode) child):-1);`

```
/**
 * Returns true if node is a leaf.
 */
public boolean isLeaf(Object node) {
    return rootPerson.isLeaf();
} 
```

再次，同样的错误，你不在乎`node`

```
/**
 * Removes a listener previously added with addTreeModelListener().
 */
public void removeTreeModelListener(TreeModelListener l) {
   //removeTreeModelListener(l);
} 
```

为什么不正确实施 removeTreeModelListener？（正如@trashgod 所建议的，您始终可以使用`EventListenerList`为您完成大部分工作的默认值）

结论：您的实现`TreeModel`充满了错误，这就是您遇到所描述问题的原因。现在，由于您正在使用`DefaultMutableTreeNode`，我只能鼓励您也使用`DefaultTreeModel`它将为您处理所有事情并避免您不得不重新实现它，这意味着它所暗示的所有“风险”。

# jquery - 输入（文本字段）--- Focus() 不工作

> ID：15084765
> 
> 赞同：1
> 
> 时间：2013-02-26T08:46:58.017
> 
> 标签：jquery, focus, textfield, slickgrid

有很多问题，`focus()`但是我找不到任何可行的解决方案来解决我的问题。

我正在使用带有一些列的 Slick Grid：

`{id: "Something", name: "Something", field: "Something", width: 200, editor: Slick.Editors.Text }`

```
var ResourcesGridOptions = {
        editable: true,
        enableCellNavigation: true,        
        enableColumnReorder: false,
        autoEdit: false
    }; 
```

我实现了一个按钮来创建新行。现在我想自动聚焦输入文本。此时我可以设置“编辑”模式，但`focus()`不起作用。

也许有人可以帮助我。

在 Chrome Javascript 控制台中，我正在使用：

```
$($('.slick-cell:eq(2)').dblclick().find('input')[0]).select().val("").focus() 
```

控制台返回：

```
[<input type="text" class="editor-text" value="">] 
```

**更新 1**

我试图在这个输入字段中添加一个“Id”，然后直接关注它......没有用。

```
$($('.slick-cell:eq(2)').dblclick().find('input')[0]).attr('id', 'Something')
$('#Something').focus() 
```

回报：`[<input type="text" class="editor-text" value="" id="Something">]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T07:15:41.260

尝试在添加按钮的 Click 事件上调用以下函数，

```
function AddNewRow() {
var dataLength = dataView.getLength();
//dataView.addItem({ "Id": -1 });
//dataView.refresh();
grid.gotoCell(dataLength, 0, true);
} 
```

# python - 使用“tornado.httpclient”获取“POST https”站点得到“HTTPError：HTTP 599”

> ID：15084768
> 
> 赞同：4
> 
> 时间：2013-02-26T08:47:14.417
> 
> 标签：python, httpclient, httprequest, tornado, urllib

我想使用“tornado.httpclient.AsyncHTTPClient”向“https”网站发送“POST”请求，但得到：

```
HTTPError: HTTP 599: [Errno 1] _ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

当我使用“urllib”代替（具有相同的 url 和参数，我不知道的标头）
代码时，它可以工作，如下所示：

```
url = r'https://**********.com/****/'
request = tornado.httpclient.HTTPRequest(url = url, method = 'POST', body = body, headers = headers)
client = tornado.httpclient.AsyncHTTPClient()
client.fetch(request, callback = on_reqeust)
tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:18:10.427

```
request = tornado.httpclient.HTTPRequest(url=url, method='POST', body=body,
                                         validate_cert=False) 
```

在生成 http 请求时添加“validate_cert=False”
，似乎不需要使用 curl_httpclient：

```
#tornado.httpclient.AsyncHTTPClient.configure("tornado.curl_httpclient.CurlAsyncHTTPClient") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T16:36:06.017

您还可以更新 SimpleAsyncHTTPClient 使用的 CA 证书文件。它应该位于

`site-packages/tornado/ca-certificates.crt`

在我的情况下，将文件复制`/etc/ssl/certs/ca-certificates.crt`到龙卷风位置解决了这个问题。

注意：如果您有有效的证书但您的证书颁发机构不被龙卷风识别，这将有所帮助。

# visual-studio - 构建 DotNetNuke 模块时未创建包

> ID：15084778
> 
> 赞同：0
> 
> 时间：2013-02-26T08:47:38.127
> 
> 标签：visual-studio, dotnetnuke

我正在使用 Chris Hammond 的示例 CS dotnetnuke 模块模板，可在以下链接中找到： [http ://christoctemplate.codeplex.com/releases/view/101034](http://christoctemplate.codeplex.com/releases/view/101034)

当我尝试在 VS2012 Express 中构建模块时，不会在包目录中创建调试和发布包。构建期间不返回任何错误。

编辑----再次运行构建它返回了以下警告。不知道有没有关系

```
1>CSC : warning CS1607: Assembly generation -- The version '00.00.01.*' specified for the 'file version' is not in the normal 'major.minor.build.revision' format
1>  DNNExplained -> C:\dnn\dotnetnuke\bin\DNNExplained.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:25:38.803

显然，这些包不再放在包文件夹中，而是现在在安装文件夹中，尽管所有教程都说了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:22:38.880

您所指的模板现在已经快 2 年了。宣布 VS2012 模板的博客文章讨论了如何使用它们以及它们是如何打包/定位的

[http://www.chrishammond.com/blog/itemid/2616/using-the-new-module-development-templates-for-dot.aspx](http://www.chrishammond.com/blog/itemid/2616/using-the-new-module-development-templates-for-dot.aspx)

您是正确的，现在将包放在 INSTALL 文件夹中，主要原因是 NUGET 包现在都在 PACKAGES 文件夹中排序。

# git - .gitignore：忽略一个特定目录，并且只忽略那个

> ID：15084780
> 
> 赞同：42
> 
> 时间：2013-02-26T08:47:46.290
> 
> 标签：git, gitignore

我有这个目录结构

```
./bin/<java class files>
./sometool/bin/<files for the tool> 
```

...以及其他一些文件和目录。

它看到，如果我想避免跟踪 java 类文件，我应该将其添加到 .gitignore 文件中：

```
bin/ 
```

但是，这似乎也忽略了路径 ./sometool/bin

这是正确的，如果是这样，我如何获得我想要的行为。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-26T08:50:57.523

我认为路径`.gitignore`的根是项目的根，所以你可以试试`/bin`

**编辑**

顺便说一句，这是 git 的正常行为。

# vb.net - 使用哪个 SQLite.Ado.Net 包？

> ID：15084783
> 
> 赞同：0
> 
> 时间：2013-02-26T08:47:56.157
> 
> 标签：vb.net, system.data.sqlite

现在 SQLite.Ado.Net 项目已经从[Phoenix Software Solutions](http://sqlite.phxsoftware.com)转移到[SQLite 团队](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)，对于每个版本的 .Net 框架都有几个不同的[包可用：](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

*   设置：包括 VS 2005 的设计时组件和 Visual C++ 2005 SP1 运行时
*   预编译的二进制文件：不包括 Visual C++ 2012 RTM 运行时
*   预编译静态链接：x86 的 Visual C++ 2005 SP1 运行时是静态链接的

每个包都有两个版本：

*   bundle = "混合模式程序集 + 所有二进制文件"; 只有当二进制程序集必须安装在 GAC 中时才需要混合模式程序集
*   no-bundle = "所有二进制文件"

我应该下载哪个包...

*   使用 VB.Net Express 的开发人员主机
*   运行 VB.Net 应用程序的用户主机？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T06:33:13.050

您可以使用此链接解决您的问题：[ADO.NET 2.0 Provider](http://sourceforge.net/projects/sqlite-dotnet2/files/SQLite%20for%20ADO.NET%202.0/1.0.66.0/)

# ravendb - 将 RavenDB 数据库从本地主机同步到在线服务器错误

> ID：15084788
> 
> 赞同：0
> 
> 时间：2013-02-26T08:48:10.797
> 
> 标签：ravendb, ravendb-studio

我正在尝试将本地 RavenDB 数据库与在线 RavenDB 数据库同步，但我没有进行管理。我正在执行以下操作：

1.  登录到本地服务器 RavenDB 用户界面
2.  转到任务部分
3.  导出数据库
4.  将文件存储在文件系统的某处
5.  登录在线服务器 RavenDB 用户界面
6.  转到任务部分
7.  点击导入数据库
8.  选择从本地数据库中保存的文件导出

我收到以下错误： ![错误：服务器错误：截图](../Images/696523ca64c3fa0b9d5dba3b15c4e274.png)

当我打开显示最近的错误时，我看到以下附加屏幕截图：

![最近的错误列表](../Images/c7732820db3ed954217dd864696b84f8.png)

知道我做错了什么吗？有没有其他方法可以将本地 RavenDB 服务器与在线 RavenDB 服务器同步？

上述错误分别包含以下完整详细信息：

**无效的跨线程访问**

```
 at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Func`2 func)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Action`1 action)
   at Raven.Studio.Commands.ImportDatabaseCommand.ExecuteInternal()
   at Raven.Studio.Commands.ImportDatabaseCommand.Execute(Object parameter)
   at System.Windows.Controls.Primitives.ButtonBase.ExecuteCommand()
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags)

Client side exception:
System.UnauthorizedAccessException: Invalid cross-thread access.
   at MS.Internal.XcpImports.CheckThread()
   at System.Windows.Controls.ItemCollection.GetValueInternal(DependencyProperty dp)
   at System.Windows.PresentationFrameworkCollection`1.get_CountImpl()
   at System.Windows.PresentationFrameworkCollection`1.get_Count()
   at System.Windows.Controls.ItemContainerGenerator.TranslateExternalIndexToInternalIndex(Int32 index)
   at System.Windows.Controls.ItemContainerGenerator.OnItemAdded(Object item, Int32 index, Boolean suppressEvent)
   at System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs args)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.NotifyCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.InsertItem(Int32 index, T item)
   at System.Collections.ObjectModel.Collection`1.Add(T item)
   at Raven.Studio.Models.TaskModel.ReportError(String errorMsg)
   at Raven.Studio.Commands.ImportDatabaseCommand.<>c__DisplayClass8.<ExecuteInternal>b__1()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

* * *

**值不能为空**

```
 at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Func`2 func)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Action`1 action)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent)
   at Raven.Studio.Infrastructure.Execute.OnTheUI(Action action)
   at Raven.Studio.Infrastructure.InvocationExtensions.<>c__DisplayClass30.<Catch>b__2e(Task task)
   at System.Threading.Tasks.ContinuationTaskFromTask.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.Tasks.Task.ExecutionContextCallback(Object obj)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

Client side exception:
System.ArgumentNullException: Value cannot be null.
   at System.Windows.PresentationFrameworkCollection`1.AddDependencyObject(DependencyObject value)
   at System.Windows.Controls.UIElementCollection.AddInternal(UIElement value)
   at System.Windows.Controls.ItemsControl.AddVisualChild(Int32 containerIndex, DependencyObject container, Boolean needPrepareContainer)
   at System.Windows.Controls.ItemsControl.AddContainerForPosition(GeneratorPosition position)
   at System.Windows.Controls.ItemsControl.OnItemsChangedHandler(Object sender, ItemsChangedEventArgs args)
   at System.Windows.Controls.ItemContainerGenerator.OnItemAdded(Object item, Int32 index, Boolean suppressEvent)
   at System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs args)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.NotifyCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.InsertItem(Int32 index, T item)
   at System.Collections.ObjectModel.Collection`1.Add(T item)
   at Raven.Studio.Models.TaskModel.ReportError(Exception exception)
   at Raven.Studio.Commands.ImportDatabaseCommand.<WriteIndexes>b__b(AggregateException exception)
   at Raven.Studio.Infrastructure.InvocationExtensions.<>c__DisplayClass2c.<Catch>b__2b(AggregateException e)
   at Raven.Studio.Infrastructure.InvocationExtensions.<>c__DisplayClass30.<>c__DisplayClass32.<Catch>b__2f()
   at AsyncCtpThreadingExtensions.<>c__DisplayClass4.<InvokeAsync>b__3() 
```

* * *

**值不能为空**

```
at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Func`2 func)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Action`1 action)
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent)
   at Raven.Studio.Infrastructure.Execute.OnTheUI(Action action)
   at Raven.Studio.Features.Tasks.ImportTask.<get_Action>b__0(String line)
   at Raven.Studio.Commands.ImportDatabaseCommand.<>c__DisplayClass8.<ExecuteInternal>b__1()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
   at System.Threading.Tasks.Task.ExecutionContextCallback(Object obj)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot)
   at System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution)
   at System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

**Client side exception:**

System.ArgumentNullException: Value cannot be null.
   at System.Windows.PresentationFrameworkCollection`1.AddDependencyObject(DependencyObject value)
   at System.Windows.Controls.UIElementCollection.AddInternal(UIElement value)
   at System.Windows.Controls.ItemsControl.AddVisualChild(Int32 containerIndex, DependencyObject container, Boolean needPrepareContainer)
   at System.Windows.Controls.ItemsControl.AddContainerForPosition(GeneratorPosition position)
   at System.Windows.Controls.ItemsControl.OnItemsChangedHandler(Object sender, ItemsChangedEventArgs args)
   at System.Windows.Controls.ItemContainerGenerator.OnItemAdded(Object item, Int32 index, Boolean suppressEvent)
   at System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs args)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.NotifyCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
   at System.Collections.ObjectModel.ObservableCollection`1.InsertItem(Int32 index, T item)
   at System.Collections.ObjectModel.Collection`1.Add(T item)
   at Raven.Studio.Features.Tasks.ImportTask.<>c__DisplayClass2.<get_Action>b__1()
   at AsyncCtpThreadingExtensions.<>c__DisplayClass4.<InvokeAsync>b__3() 
```

* * *

# asp.net - 如何使用telerik radAlert显示带尖括号的消息

> ID：15084795
> 
> 赞同：1
> 
> 时间：2013-02-26T08:48:27.640
> 
> 标签：asp.net, telerik-grid

在网格视图中单击一行时，我需要显示一条消息 Using RadAlert (telerik)controls，弹出消息中包含尖括号，例如`"this is <swathi> "`. 但是消息显示为`"this is "`缺少包括尖括号内的字符串。

谁能提供线索如何显示包括尖括号在内的弹出消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:04:24.260

您可以使用 html 编码和解码。

```
 Server.HtmlEncode("");
 Server.HtmlDecode(""); 
```

[MSDN 说 Server.HTMLEncode](http://msdn.microsoft.com/en-us/library/ms525347.aspx)仅执行以下操作：

*   小于号 (<) 转换为 < ;。
*   大于号 (>) 转换为 > ;。
*   & 符号 (&) 转换为 & ;。
*   双引号字符 (") 转换为 " ;。
*   代码大于或等于 0x80 的任何 ASCII 代码字符都将转换为 <number>，其中 number 是 ASCII 字符值。

## 编辑 1

但我会建议你使用`AntiXSS Library`
更详细 的
[http://msdn.microsoft.com/en-us/security/aa973814.aspx](http://msdn.microsoft.com/en-us/security/aa973814.aspx)
下载`.dll`链接
[http://www.microsoft.com/en-us/download/details.aspx?编号=28589](http://www.microsoft.com/en-us/download/details.aspx?id=28589)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:05:03.577

我认为 RadAlert 试图将您的字符串解析为 HTML 字符串...

如果是这种情况，请将 < 字符替换为字符串 < 并将 > 字符替换为 >

此外，您也可能面临其他问题，因此您也应该转义其他角色：[这个问题有很好的答案](https://stackoverflow.com/questions/3162535/how-do-i-escape-html-characters-in-net-ampquot)

引用接受的答案：

> 您可以使用`System.Web.HttpUtility.HtmlEncode()`和`HtmlDecode()`用于这些目的

# r - 两个非常相似的集合之一上的“'dimnames' [2] 的长度不等于数组范围”

> ID：15084803
> 
> 赞同：4
> 
> 时间：2013-02-26T08:48:45.190
> 
> 标签：r

我在两个数据框中收集了数据，`vols`并且`flow`. 后者可以转换为矩阵，但第一个不能：

```
as.matrix(vols)
Error in `colnames<-`(`*tmp*`, value = c("CanovesSamalus", "Llinars",  : 
  length of 'dimnames' [2] not equal to array extent 
```

有什么不妥？

```
> vols[1:3,]
    data CanovesSamalus Llinars LlinarsCanoves Mirador Santacana StAntoniVilamajor   N1    N3   N4   N7   N9
1 2011-01-01             NA  172.66       3779.832 453.096  4996.344           1830.09 9898 9898 9898 9898 9898
2 2011-01-02             NA  172.66       3809.036 494.977  4699.088           1712.43 9898 9898 9898 9898 9898
3 2011-01-03             NA  172.66       3134.215 517.979  4319.374           1716.67 9898 9898 9898 9898 9898

> str(vols)
List of 12
 $ data             : Date[1:365], format: "2011-01-01" "2011-01-02" "2011-01-03" "2011-01-04" ...
 $ CanovesSamalus   : num [1:365] NA NA NA NA NA NA NA NA NA NA ...
 $ Llinars          : num [1:365] 173 173 173 172 172 ...
 $ LlinarsCanoves   : num [1:365] 3780 3809 3134 3221 3113 ...
 $ Mirador          : num [1:365] 453 495 518 516 495 ...
 $ Santacana        : num [1:365] 4996 4699 4319 4276 4179 ...
 $ StAntoniVilamajor: num [1:365] 1830 1712 1717 1671 1733 ...
 $ N1               : num [1:365] 9898 9898 9898 9898 9898 ...
 $ N3               : num [1:365] 9898 9898 9898 9898 9898 ...
 $ N4               : num [1:365] 9898 9898 9898 9898 9898 ...
 $ N7               : num [1:365] 9898 9898 9898 9898 9898 ...
 $ N9               : num [1:365] 9898 9898 9898 9898 9898 ...
 - attr(*, "row.names")= int [1:365] 1 2 3 4 5 6 7 8 9 10 ...
 - attr(*, "idvars")= chr "data"
 - attr(*, "rdimnames")=List of 2
  ..$ :'data.frame':    365 obs. of  1 variable:
  .. ..$ data: Date[1:365], format: "2011-01-01" "2011-01-02" "2011-01-03" "2011-01-04" ...
  ..$ :'data.frame':    6 obs. of  1 variable:
  .. ..$ node: Factor w/ 6 levels "CanovesSamalus",..: 1 2 3 4 5 6 
```

和：

```
> flow[1:3,]
    data N8FT01001 N9FT00201 N9FT00401 N9FT00402 N9FT00403 N9FT00801 N9FT01001 N9FT01002 N9FT01101 N9FT01201 N9FT01202
1 2011-01-01      7123         0      2113      3105       172       791      3909      2489      1188      1182      1135
2 2011-01-02      4197         0      1984      1887       152       801      2255      2449      1227      1221      1090
3 2011-01-03      3685         0      2221      1664        27       769      1969      2516      1512      1509      1400
N9FT01301 N9FT01401
1       118       119
2       114       115
3        77        78

> str(flow)
List of 14
 $ data     : Date[1:365], format: "2011-01-01" "2011-01-02" "2011-01-03" "2011-01-04" ...
 $ N8FT01001: int [1:365] 7123 4197 3685 4616 4534 6024 3118 5977 5455 2845 ...
 $ N9FT00201: int [1:365] 0 0 0 0 0 0 0 0 0 0 ...
 $ N9FT00401: int [1:365] 2113 1984 2221 2010 1994 1776 2049 1953 2068 2028 ...
 $ N9FT00402: int [1:365] 3105 1887 1664 2066 2004 2741 1395 2645 2563 1064 ...
 $ N9FT00403: int [1:365] 172 152 27 4 14 180 14 166 155 5 ...
 $ N9FT00801: int [1:365] 791 801 769 789 688 663 730 732 767 694 ...
 $ N9FT01001: int [1:365] 3909 2255 1969 2487 2467 3198 1681 3249 2812 1740 ...
 $ N9FT01002: int [1:365] 2489 2449 2516 2551 2582 2476 2513 2582 2584 2602 ...
 $ N9FT01101: int [1:365] 1188 1227 1512 1236 1317 1006 1449 1171 1327 1345 ...
 $ N9FT01201: int [1:365] 1182 1221 1509 1232 1313 1002 1445 1167 1321 1341 ...
 $ N9FT01202: int [1:365] 1135 1090 1400 1112 1236 922 1283 1048 1218 1137 ...
 $ N9FT01301: int [1:365] 118 114 77 92 102 102 137 115 133 174 ...
 $ N9FT01401: int [1:365] 119 115 78 93 103 103 138 116 134 175 ...
 - attr(*, "row.names")= int [1:365] 1 2 3 4 5 6 7 8 9 10 ...
 - attr(*, "idvars")= chr "data"
 - attr(*, "rdimnames")=List of 2
  ..$ :'data.frame':    365 obs. of  1 variable:
  .. ..$ data: Date[1:365], format: "2011-01-01" "2011-01-02" "2011-01-03" "2011-01-04" ...
  ..$ :'data.frame':    13 obs. of  1 variable:
  .. ..$ TAG: Factor w/ 13 levels "N8FT01001","N9FT00201",..: 1 2 3 4 5 6 7 8 9 10 ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T10:39:17.767

目前尚不清楚您是如何创建这些 data.frames 的。从`str`输出来看，它们似乎不是普通的 data.frames 而是某种其他类型的列表，因此可能需要先将您的对象转换为 data.frames。使用`as.matrix(as.data.frame(vols))`.

# c++ - 如何让 Qt 中的默认 UI 元素更漂亮？

> ID：15084812
> 
> 赞同：9
> 
> 时间：2013-02-26T08:49:02.023
> 
> 标签：c++, qt

我正在学习使用 Qt 并且目前能够使用标准格式的大多数小部件开发应用程序。现在我想让我的小部件更漂亮。标准的对于 Windows 来说非常乏味。我想知道小部件的哪些属性通常用于改变它们的外观。例如，该标准`QPushButton`没有如[本](https://www.youtube.com/watch?v=EBXd8xS0IRk)视频中所观察到的*玻璃状外观。*请在 0:10（开始视频 10 秒后）观察按钮的手感。 [这](http://www.pdfarchitect.org/images/screenshots/combine.png)是另一个例子。向上和向下按钮和按钮在下方。如何在 Qt 中进行此类编辑？请注意，我不想复制 UI，只是想知道如何创建如此漂亮的小部件？关于这个主题的任何帮助都会对我很有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:53:22.030

QStyle是一种选择，另一种是编辑单个组件的样式表，在Qt Designer中，您可以打开项目的CSS表。

[http://qt-project.org/doc/qt-4.8/stylesheet-examples.html](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T08:50:24.533

你应该看看`QStyle`类[http://doc.qt.io/qt-4.8/qstyle.html](http://doc.qt.io/qt-4.8/qstyle.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:43:33.837

如果您刚刚开始学习 Qt，并且您并没有被一些大老板限制为 QWidget 样式的 Qt，我建议您学习[Qt QML](https://doc.qt.io/qt-5/qtqml-index.html)，因为它是 Qt 的未来，而 QWidgets+样式表正在变得过时。此外，针对声明式 QML 进行编程比处理有缺陷的样式表要简单得多。

# android - 如何将第一个画廊项目向左对齐？

> ID：15084814
> 
> 赞同：2
> 
> 时间：2013-02-26T08:49:19.447
> 
> 标签：android, android-gallery

默认情况下，图库是居中对齐的。我想要的行为是左对齐父布局中的第一项而不是居中。怎么做？我也浏览了链接：[https ://stackoverflow.com/questions/4341158/android-align-first-item-in-gallery-to-the-left](https://stackoverflow.com/questions/4341158/android-align-first-item-in-gallery-to-the-left)

但这不适用于 2.3.x 设备。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T08:26:41.283

私人无效alignGalleryToLeft（画廊画廊）{

```
 WindowManager manager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);

    int galleryWidth = manager.getDefaultDisplay().getWidth();

    // We are taking the item widths and spacing from a dimension resource
    // because:
    // 1\. No way to get spacing at runtime (no accessor in the Gallery
    // class)
    // 2\. There might not yet be any item view created when we are calling
    // this
    // function
    int itemWidth = getsize(105);
    int spacing = getsize(10);

    // The offset is how much we will pull the gallery to the left in order
    // to simulate left alignment of the first item
    final int offset;
    if (galleryWidth <= itemWidth) {
        offset = galleryWidth / 2 - itemWidth / 2 - spacing;
    } else {
        offset = galleryWidth - itemWidth - 2 * spacing;
    }

    // Now update the layout parameters of the gallery in order to set the
    // left margin
    MarginLayoutParams mlp = (MarginLayoutParams) gallery.getLayoutParams();
    mlp.setMargins(-offset, mlp.topMargin, mlp.rightMargin,
            mlp.bottomMargin);
} 
```

getsize() 是一个方法：

```
public int getsize(int sizeInDip) {
    DisplayMetrics metrics = new DisplayMetrics();
    metrics = getResources().getDisplayMetrics();
    return (int) ((sizeInDip * metrics.density) + 0.5);
} 
```

将您在 DPI 中的值传递给此方法。

希望，它会为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:50:20.247

提供的链接中的答案：[https](https://stackoverflow.com/questions/4341158/android-align-first-item-in-gallery-to-the-left) ://stackoverflow.com/questions/4341158/android-align-first-item-in-gallery-to-the-left工作得很好。问题是我**将 Gallery 包装在 FrameLayout 中**，因此当我将其更改为 RelativeLayout 时它无法正常工作，它工作正常。

# css - 如何将css附加到zend项目？

> ID：15084815
> 
> 赞同：1
> 
> 时间：2013-02-26T08:49:20.743
> 
> 标签：css, image, zend-framework

我无法在我的 zend 项目中附加图像或 css 文件。我将 css 文件放入

```
project/public/css/style.css . 
```

我的页面不能包含这个 css 文件。当我将 css 文件 url 复制到我的主页时。但是，如果我在我的 url 地址末尾键入任何内容，则会重定向到我的主页。

例如，当我去时， `/project.com/asdsadasda`我没有收到任何错误，它呈现主页但地址错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:54:37.900

在您的 bootstrap.php 文件中添加以下内容：

```
protected function _initViewHelpers()
   {
      $this->bootstrap('layout');
      $layout = $this->getResource('layout');
      $view = $layout->getView();
      $view->headLink()->setStylesheet('/css/style.css');  // your CSS file
   } 
```

并在您的 layout.phtml 中在顶部添加以下行：

```
<head>
<?php echo $this->headMeta() ?>
<?php echo $this->headTitle() ?>
<?php echo $this->headLink()?> </head> 
```

编辑。

如果您不知道如何在 Zend Framework 中打开布局支持，请阅读本教程： [http ://akrabat.com/zend-framework/simple-zend_layout-example/](http://akrabat.com/zend-framework/simple-zend_layout-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:58:02.543

要有效地使用您的 css 文件，您需要创建一个`Layout`. 假设`Layout.phtml`是您的布局，然后`head`可以通过这种方式引用您的 css 文件：

```
<html>

<head>
<?php echo $this->headLink()->prependStylesheet($this->baseUrl().'/css/style.css'); ?>
....
</head>

.... 
```

好机会

# ruby-on-rails-3 - 我的 redis 客户端在哪里使用？

> ID：15084819
> 
> 赞同：0
> 
> 时间：2013-02-26T08:49:28.973
> 
> 标签：ruby-on-rails-3, heroku, redis, redistogo

我在 heroku 上托管了一个 Rails 3 应用程序，目前只有一个网络和一个工作人员测功机。我最近也开始使用 Redis 作为缓存数据库，所以我正在执行这样的操作（使用 redis-rb gem）：

```
redis = Redis.new(:host => host, :port => port, :password => password)
redis.set("my_key", some_value) 
```

现在我的 heroku 应用程序出现以下错误：

`enter code here`已达到最大客户数

我知道 Redis.new 将创建一个新客户端，但我认为一旦方法完成，连接就会被释放？我需要手动断开客户端吗？我试过 redis.destroy & redis.delete 但无济于事。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:39:58.937

事实证明，这个问题的答案是，是的，redis 客户端必须像这样手动关闭

```
redis.quit 
```

# rspec - 测试运行期间的 Poltergeist 切换代理

> ID：15084828
> 
> 赞同：1
> 
> 时间：2013-02-26T08:49:52.343
> 
> 标签：rspec, phantomjs, headless, poltergeist

我们只是从 capybara-webkit 迁移到 Poltergeist。以前我们确实使用 capybara-webkit 和[puffing billy](https://github.com/oesmith/puffing-billy "膨胀的比利代理")，你可以在这里看到：

```
def use_proxy_with_vcr cassettes_name = nil, cassettes_options = {}
  page.driver.browser.set_proxy(:host => Billy.proxy.host, :port => Billy.proxy.port)
  page.driver.browser.ignore_ssl_errors
  Billy.proxy.strategy.use_cassette cassettes_name, cassettes_options
  yield
  Billy.proxy.strategy.reset
  page.driver.browser.clear_proxy
end 
```

这发生在运行时，**我想对 Poltergeist 做同样的事情**。[我意识到可以通过使用 phantomjs_options ( https://github.com/jonleighton/poltergeist#customization](https://github.com/jonleighton/poltergeist#customization) )通过水豚驱动程序设置传递 CLI 选项来设置代理并忽略 ssl 错误。

是否可以在运行时启用/禁用代理和 ssl 错误？如果是怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T23:38:39.430

在运行时通过 poltergeist 禁用/启用 phantomjs 选项是不可能的（尽管 IIRC 通常是可能的，因此可以将该功能添加到 poltergeist）。

我认为实现这一目标的最简单方法是注册一个新的 Capybara 驱动程序。例如

```
Capybara.register_driver :proxied_poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, phantomjs_options: [...])
end 
```

然后，您可以通过设置在适用的情况下使用驱动程序`Capybara.current_driver = :proxied_poltergeist`。这将使用您指定的 CLI 选项启动一个单独的 phantomjs 实例。

# duplicates - 如何查找重复值并仅保留这些行？

> ID：15084837
> 
> 赞同：3
> 
> 时间：2013-02-26T08:50:23.537
> 
> 标签：duplicates, openoffice-calc

我正在检查 C 列中多个值的巨大 Open Office Calc 列表。

我有这样的文件

```
美国广播公司
1 月 1 日乔普 35,90
1 月 1 日 基斯 80,10
1 月 2 日乔普 79,99
1 月 4 日基普 14,88
1 月 4 日 罗尔 15,66
1 月 8 日 Riep 35,90
1 月 9 日 Jaap 15,66

```

我想找到所有在 C 列中具有值的行，该值与 C 中的另一个单元格重复（因此忽略 A 列和 B 列）。我想得到这样的输出：

```
美国广播公司
1 月 1 日乔普 35,90
1 月 4 日 罗尔 15,66
1 月 8 日 Riep 35,90
1 月 9 日 Jaap 15,66

```

你们能帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T23:16:19.853

将此公式放在 D 列中并向下复制。每第二次重复输入将标记为 2（或更多），其余标记为 1。

复制 D 列，然后将特殊文本粘贴到 D 列中的相同数据上（删除所有其他复选标记）。

现在所有的公式都变成了 D 列中的固定数据。

如果您只需要清理一次，您可以将 1 放入 E1 并将其向下拖动到单元格 E1 的右下角拖动点以创建序列号列表 (1,2,3,4..) .

然后对 D 列的整个范围进行排序。

删除 D 列中所有为 2 的行。

然后在 E 列上使用整个范围（原始序列号）

```
=COUNTIF(C$1:C1;C1) 
```

# 另一种选择是使用标准过滤器

选择该`No duplication`选项，但这只是一个过滤器，数据仍保留在您的工作表中。

![在此处输入图像描述](../Images/ebc2bdd1f5e48242a6454eed02924365.png)

# android - 绑定到服务类时如何处理丢失的服务类？

> ID：15084843
> 
> 赞同：2
> 
> 时间：2013-02-26T08:50:40.960
> 
> 标签：android, service

我想创建一个支持插件的应用程序。插件将是实现特定 AIDL 接口的服务。我会使用包管理器找到插件（它们有一个特定的意图过滤器）。

但是我发现了一个我无法处理的用例：如果在 AndroidManifest 中声明了服务，但缺少服务类（即没有与名称匹配的 java 类），我无法检测到这一点。对 Context.bindService 的调用将成功（将返回 true），但不会调用 ServiceConnection 中的任何回调。

如果我之前调用 startService 或使用 BIND_AUTO_CREATE 标志，我可以在日志中看到它启动了进程，但随后它崩溃了。但是，在我的过程中，我仍然不会收到任何回调。这个问题有什么好的解决方案吗？我真的很想避免定时等待。

# scala - 迭代不可变的 Seq、Vector 和 List：有什么区别吗？

> ID：15084846
> 
> 赞同：1
> 
> 时间：2013-02-26T08:51:06.493
> 
> 标签：scala

Scala 提供了如此多的集合......我不确定该使用哪一个。

我的函数生成一组预定义数量的元素，这些元素将按其原始顺序逐个迭代。

所有 immutable `Vector`，`Seq`并`List`支持迭代，但我应该使用哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:17:24.303

您正在寻找一个维持秩序的收藏品。任何扩展的集合都`seq`保持添加元素的顺序。

[scaladocs] `Sequences have two principal subtraits, IndexedSeq and LinearSeq, which give different guarantees for performance. An IndexedSeq provides fast random-access of elements and a fast length operation. A LinearSeq provides fast access only to the first element via head, but also has a fast tail operation`

`List`延伸`LinearSeq`，而`Vector`延伸`IndexedSeq`

在这些之间进行选择将取决于您希望如何访问数据以及您希望对数据执行的操作。

# java - 如何使用扫描仪读取文件并将值存储在二维数组中

> ID：15084847
> 
> 赞同：0
> 
> 时间：2013-02-26T08:51:18.303
> 
> 标签：java

假设我有一个这种格式的文件，

> 8 15
> 
> 5
> 
> 8
> 
> 16
> 
> 89

我正在使用 Scanner 类来读取文件。例如，我想将这些值存储在二维数组中

> y[0][0]=8,y[0][1]=15,y[1][0]=5,y[2][0]=8。

我无法存储这样的值。我得到一个输出

> y[0][0]=8,y[0][1]=15,y[0][3]=5,y[0][4]=8。

我想知道如何在文件中找到（EOL）行尾，以便它自动存储在二维数组中。

```
public class gjd {

public static void main(String[] args) {

           java.io.File test2 = new java.io.File("c.txt");

           try
           {
               Scanner input = new Scanner(test2);

               while (input.hasNextLine()){
                   int y[][]=new int[10][10];
                  for(int i=0;i<test2.length();i++)
                  {
                      for(int o=0;o<test2.length();o++)
                   {
                      y[i][o]=input.nextInt();

                      System.out.println(y[i][o]);

                   }

                  }

               }
           }  catch (Exception e){
            System.out.println("could not find file");
           }

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:17:58.283

试试这个代码......

```
 java.io.File test2 = new java.io.File("C:/c.txt");
           Scanner input = new Scanner(test2);
           String arr[][]=new String[5][5];
           int i=0,j=0;
           while(input.hasNext())
           {
               String val=input.nextLine();
               j=0;
               if(val.contains(" "))
               {
                   String str[]=val.split(" ");
                   int cn=str.length;
                   while(cn>0)
                   {
                       arr[i][j]=str[j];
                       cn--;
                       j++;
                   }
               }
               else
                   arr[i][j]=val;
               i++;
           }

            for(int i1=0;i1<5;i1++)
            {
                 for(int j1=0;j1<5;j1++)
                     if(arr[i1][j1] != null)
                     System.out.print(arr[i1][j1]); 
                 System.out.println();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:54:45.200

每次找到一行时都不应该实例化一个数组：

`int y[][] = new int[10][10];`不应该在 while 循环中。

你想用文件的长度做什么：`test2.length()`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:21:36.853

您可以使用第二个扫描仪处理从第一个扫描仪解析的行

然后您可以检查该行中是否还有另一个 int，如果需要，请设置一个默认值。

# objective-c - XCode TableView TextFields 输入数据奇怪的行为

> ID：15084856
> 
> 赞同：0
> 
> 时间：2013-02-26T08:52:04.173
> 
> 标签：objective-c, xcode, uitableview

昨天我在这里问了这个问题

[带有 TextFields 的 iPhone TableView - 下一个，上一个按钮问题](https://stackoverflow.com/questions/15063798/iphone-tableview-with-textfields-next-previous-button-issue)

这是关于我使用下一个上一个按钮时遇到的问题。谢天谢地，我把它整理好了。现在我遇到的问题是如何将数据保存到文本字段中。您可以很快自己重新创建这个问题，创建一个新项目，并拥有一个包含 tableview 的视图控制器。然后创建一个包含标签和文本字段的自定义表格视图单元格，然后使该表格有 10 个单元格。

因此，如果您在第一个文本字段中输入一些随机文本，然后向下滚动到表格底部，将会发生的情况是，将加载到内存中的一个文本字段将显示与第一个文本字段相同的文本，并且如果您上下滚动的速度非常快，则文本会在文本字段之间不断跳转，有时您输入的第一个文本字段中的文本会消失并出现在第二个或第三个单元格中。

示例我在第一个文本字段中输入了 test1，它看起来像这样

![在此处输入图像描述](../Images/cc41e2e3b0a8992b247a2d39960ea1f0.png)

然后当我向下滚动时，单元格 8 中的文本字段由于某种原因也具有完全相同的文本

![在此处输入图像描述](../Images/3b3cc68c99270349c579951d607dcdc1.png)

作为一种解决方法，我尝试将此代码添加到我昨天展示的自定义 tableview 单元格类中，我添加了一个名为 sData 的字符串对象，当用户完成编辑该文本字段时，文本将存储到该对象。

```
 #pragma mark - UITextFieldDelegate

    - (void)textFieldDidEndEditing:(UITextField *)textField {
        self.sData = inputOne.text;

        if (self.didEndEditingAction) {
            self.didEndEditingAction();
        } 
```

我还将此方法添加到自定义表格视图单元格类中

```
 - (void)reloadData {

        if(self.sData != nil)
        {
                self.inputOne.text = self.sData;
        } 
```

然后在 cellForRowAtIndexPath 方法中调用它，但会出现同样的问题。

这给我带来了几个问题，主要是试图保存数据，就好像包含文本字段的单元格在屏幕上不可见然后它没有加载到内存中，因此我无法保存文本字段的数据。当然，另一个问题是字段中的文本由于某种原因不断消失并重新出现在不同的单元格中。

有谁知道为什么会发生这种情况，以及是否有任何好的解决方法？

提前致谢！

编辑：

我尝试过的一件我认为即使不是很好的解决方案也可以工作的事情是我创建了一个数组，并且在 textFieldDidEndEditing 委托方法下，我做到了

```
BOOL bAdd = YES;
    for(int i = 0; i < [tableArray count]; i++)
    {
        UITextField *field = [tableArray objectAtIndex:i];

        if(field.tag == textField.tag)
        {
            bAdd = NO;
            break;
        }
    }

    if(bAdd)
    {
        NSLog(@"Adding %i", textField.tag);
        [tableArray addObject:textField];
    } 
```

然后在 cellForRowAtIndexPath 方法下，我添加了这个

```
for(int i = 0; i < [tableArray count]; i++)
            {
                UITextField *field = [tableArray objectAtIndex:i];
                if(field.tag == cell.textField.tag)
                {
                    cell.textField.text = field.text;
                    break;
                }
            } 
```

我认为这可以保证工作，但同样奇怪的问题正在发生，我不知道为什么：@

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:03:44.043

您正面临这个问题，因为 tableview “重用”了它的单元格。正如您可能知道的那样，您使用此方法并重用单元格`– dequeueReusableCellWithIdentifier:` 。`– cellForRowAtIndexPath:`

您要做的是在重用之前将这些文本字段的文本重置为零。为此，您可以使用以下方法，

```
- (void)prepareForReuse
{
    [super prepareForReuse];
     //Set whatever you want to be reset to nil E.g., myTextfield.text = nil;
} 
```

在您的自定义表格视图单元格类中编写该方法，这应该可以解决问题..！

祝你好运。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:28:26.247

终于找到了解决方案，我创建了一个 NSMutableDictionary 变量，并在文本字段 textFieldDidEndEditing 委托方法下我存储了文本字段的值，键是文本字段标签，如下所示

```
[textFieldDictionary setValue:textField.text forKey:[NSString stringWithFormat:@"%i", textField.tag]]; 
```

然后在 cellForRowAtIndexPath 方法下，我把这个

```
if([textFieldDictionary valueForKey:[NSString stringWithFormat:@"%i", cell.textField.tag]])
            {
                cell.textField.text = [textFieldDictionary valueForKey:[NSString stringWithFormat:@"%i", cell.textField.tag]];
            } 
```

现在它完美运行！

# git - 具有多个存储库而没有子模块/子树的简单 gitflow 模型？

> ID：15084860
> 
> 赞同：1
> 
> 时间：2013-02-26T08:52:22.870
> 
> 标签：git, git-flow

我们的结构类似于[Git 存储库的最佳实践，在传统的 n 层设计中具有多个项目](https://stackoverflow.com/questions/5514739/best-practice-for-git-repositories-with-multiple-projects-in-traditional-n-tier)，具有以下存储库：

```
 Shared
  ProjA
  ProjB 
```

由2-3人的独立团队开发，使用`ProjA`并`ProjB`有时为`Shared`.

我们想到了一个不需要子树或子模块的简单模型，因为我们读到了很多关于这 2 的恐惧。你能回顾一下并告诉我们这样的事情是否可行吗？

*   遵循 gitflow 模型，每个`Proj`和每个都存在于单独的存储库中`Shared`
*   Jenkins 将使用`develop`所有 3 个 repos 的分支中的最新版本进行构建
*   `release.sh`of a`Proj`将合并到`master`of both `Proj`and `Shared`，在两者上创建一个标签，Jenkins 将从`master`.

这能行吗？请记住，我们只有 8 个人，而且我们只是迁移到 git，所以我们希望让事情尽可能简单，所以如果我们可以避免子模块和子树的学习曲线，我们会更开心。或者我们会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:04:35.730

它可以工作`ProjA`，只要`ProjB`将[`git notes`](https://stackoverflow.com/a/9856913/6309).`Shared`

构建调度器背后的想法是可**重现性**：这样的工具需要能够重现用于给定构建的确切配置（即 SHA1 引用列表）。
这允许稍后重新访问构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:58:06.123

我觉得你的问题不是 git 结构，而是项目的依赖关系，例如 SVN 不会让你的生活更轻松。

如果您有两个项目依赖于一个共享项目，我相信您不应该逃避指定。

如果团队 B 中的某个人在项目 A 发布之前更改*了共享怎么办？*您可能会对项目 A 进行不必要的更改。

为了克服你应该使用项目版本控制，这里 git submodules 来救援，子模块是项目 X 和*shared*的特定时间点之间的依赖关系。

git 子模块的替代方案是工件版本感知依赖项，在大多数（所有？）现代语言中，您都可以做到这一点。例如，在 Java 中，您将使用 maven/ivy/gradle 来定义项目依赖项。（您需要将*共享*上传到一些工件存储库）

我不会说替代方案比 git 子模块更简单，但是当项目结构变得越来越复杂且许多工件相互依赖时，这是（必须？）的方式。

# jsf - Primefaces 向导部分提交

> ID：15084865
> 
> 赞同：0
> 
> 时间：2013-02-26T08:52:37.073
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 primefaces 3.4.1 和 JSF2。假设我有以下模板：

```
<p:wizard>
  <p:tab>
    <p:inputText value="#{myBean.value1}" />
    <p:inputText value="#{myBean.value2}" />
  </p:tab>
  <p:tab><ui:include src="some_content"/></p:tab>
</p:wizard> 
```

当用户点击下一步时，我想要：

*   value1 自动提交
*   不应提交 value2

如何做到这一点？我试图在某些输入组件上设置 immediate="true"，但它们总是被提交。

问题是我有更复杂的模板，其中某些组件默认情况下不可见，并且它为这些输入提交了错误的值。我可以手动修复它，但我确实需要防止 primefaces-wizard 在我单击下一步时自动更新这些值。

# android - 推送通知未显示在设备中

> ID：15084866
> 
> 赞同：2
> 
> 时间：2013-02-26T08:52:41.607
> 
> 标签：android, push-notification, google-cloud-messaging

我正在做一个`Android`项目。在我的项目中，我必须实施`push notification`. 我遵循了来自[androidhive的教程](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

项目正在运行，没有任何错误。但是当我尝试从本地服务器向设备发送消息时，我没有收到任何通知。

`registerid`在数据库中并且`GCMregister`是相同的......发送消息时没有发生任何事情......这是服务器端的问题吗？

我用几个模拟器测试过。

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:56:54.453

```
 Need to check:
--Check your registration id is stored in your database or not?And you are using same id or not?
--on client side ,check whether it is register in GCMRegistrar **isRegisteredOnServer()**?
--During sending message chck 
 --'Authorization: key=' . GOOGLE_API_KEY, //specify server or browser key obtained from google console.
 --Proper registration Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:41:36.517

还请检查您的设备是否有谷歌帐户，您必须执行以下步骤：

1.  转到设置菜单--> 帐户和同步--> 添加帐户--> google--> 下一步--> 创建帐户或登录--> 完成。

那么您可以正确执行您的应用程序。

在查看您的所有评论后，现在只剩下一件事了，请检查您的 php 代码，因为当时我第一次在 google api 密钥和数据库名称和密码中学习时遇到了一些问题，所以请检查一下。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T09:29:57.617

创建一个新的 AVD 并像这样选择任何 GoogleAPI 作为目标

![在此处输入图像描述](../Images/f1f2fc3475b5746401e011c4edeb2ccd.png)

# hadoop - 从猪身上连续获取最大值

> ID：15084868
> 
> 赞同：1
> 
> 时间：2013-02-26T08:52:49.880
> 
> 标签：hadoop, apache-pig

从猪身上获得最大值：

学生（卷号，分数）

```
rollno. marks

1   24

2   26

3   50

4   30

5   35 
```

输出要求：最大标记卷号。

输出：3 50

假设 A 包含学生表的值

如何获得rollno。得分最高分

我试过这个：

```
B = GROUP A BY rollno

C = foreach B generate group , max( A.marks); 
```

但这导致所有记录都可以在猪中帮助我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:10:36.967

最易读的方法是`ORDER`您的数据，然后选择最上面的记录`LIMIT 1`：

```
A = LOAD 'input' AS (rollno, marks);
B = ORDER A BY marks DESC;
C = LIMIT B 1;
DUMP C;

(3,50) 
```

但就 Pig 为完成它而生成的 MapReduce 作业的数量而言，这并不是很有效。您有一项仅用于地图的作业来加载数据，另一项用于对其进行采样（由 要求`ORDER BY`），另一项用于实际进行排序，最后一项用于执行`LIMIT`和输出。4 个工作来完成这个简单的任务。我花了 1:54 来运行它，而且几乎所有时间都在 MapReduce 开销上。

但是如果你的输入不是太大，你可以只使用一个嵌套的 foreach，然后所有的工作都将在一个 reducer 中进行，虽然它的可扩展性不高，但比在每一步都使用 MapReduce 快得多。首先将所有内容分组到一个记录中，然后使用嵌套的 foreach：

```
A = LOAD 'tmp/data.txt' AS (rollno, marks);
B = GROUP A ALL;
C = FOREACH B {
        ord = ORDER A BY marks DESC;
        top = LIMIT ord 1;
        GENERATE FLATTEN(top);  
};
DUMP C;

(3, 50) 
```

This only used one MapReduce job, and took 0:35.

Of course, if your data is small enough that MapReduce overhead matters, Pig may not be the right tool for what you're doing. But if you're generating a lot of jobs for a small amount of data, and you do need to use Pig, it's worth trying to use the nested foreach.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T09:20:42.830

根据我的理解，您需要具有最大标记和卷号的单行。

然后，您必须按降序对 rollno 进行排序，并使用如下所示的限制关键字取顶行

```
c=order b by marks desc;

d=limit c 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-13T06:31:54.750

```
 a = Load 'data.txt' using PigStorage (',');
  b = group a all;
  c = foreach b GENERATE  MAX(a.$1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-01T16:07:31.700

**这对我有用-**

```
userRollNoWithMarks = Load 'data.txt' using PigStorage (',');
maxNo = FOREACH(GROUP userRollNoWithMarks ALL) GENERATE  MAX(userRollNoWithMarks .$1);
DUMP maxNo ; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-30T13:40:34.783

```
B = GROUP A BY rollno;
C = foreach B generate group , MAX($1.$2); 
```

# php - 测试调用静态方法的 PHP 代码

> ID：15084870
> 
> 赞同：6
> 
> 时间：2013-02-26T08:53:07.433
> 
> 标签：php, unit-testing, static, refactoring, phpunit

我想测试这个必须调用静态类的代码块。

```
class SomeModule {
    public function processFoo() 
    {
        $foo = FooFactory::getFoo();

        // ... Do something to $foo

        return $foo;
    }
} 
```

我无法修改静态类。但是，我可以更改模块内的代码。如何将此代码重构为可单元测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:53:07.433

## 将静态调用移至单独的方法，然后对其进行模拟

重构代码：

```
class SomeModule {
    public function processFoo() 
    {
        $foo = $this->getFoo();

        $foo['hoopla'] = 'doo';

        return $foo;
    }

    protected function getFoo() 
    {
        return FooFactory::getFoo();
    }
} 
```

测试代码：

```
function testSomeModule() {
    // Whatever we want to simulate FooFactory::getFoo returning
    $foo = array('woo' => 'yay')

    // Create a copy of the class which mocks the method getFoo
    $module = $this->getMockBuilder('SomeModule')
                   ->setMethods(array('getFoo'))
                   ->getMock();

    // Rig the mock method to return our prepared sample
    $module->expects($this->once())
           ->method('getFoo')
           ->will($this->returnValue($foo));

    $result = $module->processFoo();

    $this->assertEquals('yay', $result['woo']);
    $this->assertEquals('doo', $result['hoopla']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:09:23.757

## 将静态类名作为构造函数参数传递

重构代码：

```
class SomeModule {
    protected $factoryName;

    public function __construct($factoryName = 'FooFactory') {
        $this->factoryName = $factoryName;
    }

    public function processFoo() 
    {
        // PHP Parser limitation requires this
        $factoryName = $this->factoryName;
        $foo = $factoryName::getFoo();

        $foo['hoopla'] = 'doo';

        return $foo;
    }
} 
```

测试代码：

```
public class MockFactory {
    static public function getFoo() {
        return array('woo' => 'yay');
    }
}

function testSomeModule() {
    $module = new SomeModule('MockFactory');
    $result = $module->processFoo();

    $this->assertEquals('yay', $result['woo']);
    $this->assertEquals('doo', $result['hoopla']);
} 
```

# json - Drupal 7 views_datasource 仅输出 json 而不是完整的 html 页面

> ID：15084876
> 
> 赞同：0
> 
> 时间：2013-02-26T08:53:49.180
> 
> 标签：json, drupal-7

我使用 Drupal 7 和 views_datasource。

我创建了一个新视图并将格式设置为 JSON 数据文档。我还设置了这个视图的路径，比如说 /json-output。

当我访问此 /json-output 时，它将显示完整的 html 页面以及正文中的 json。

我的问题是如何只检索没有完整 html 的 json？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:40:05.757

1.  转到生成 JSON 输出的视图显示的配置。
2.  单击 JSON 数据文档格式的设置链接。确保未启用 Views API 模式。

说明

> 不使用 View API 模式意味着 JSON 直接获取输出并且服务器停止正常的页面处理。使用它意味着服务器在输出 JSON 后不会停止处理。这允许 Views API 与视图一起使用，而不必过早终止页面处理。

# java - nextFireTime 和开始时间未对齐

> ID：15084882
> 
> 赞同：0
> 
> 时间：2013-02-26T08:54:24.467
> 
> 标签：java, quartz-scheduler, cronexpression, crontrigger

我正在尝试创建一个每天上午 10:00 运行的石英作业，但首先从上午 9:30 开始。我正在使用开始时间和 cron 表达式来执行此操作，如下所示：

```
CronTrigger newTrigger = newTrigger().withIdentity(jobName + i, jobName)
   .startAt(startTime).endAt(endTime).withSchedule(cronSchedule(cronExpression)
   .withMisfireHandlingInstructionFireAndProceed().inTimeZone(timeZone)).build(); 
```

cron 表达式为：

```
0 0 10 * * ? 
```

但是作业在上午 10:00 开始运行（并忽略开始时间）。如果我正在查看`qrtz_triggers`数据库中的表格，我会看到`start_time`确实是 9:30，但是`next_fire_time`是 10:00。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:08:43.517

开始时间和结束时间是 cron 计划处于活动状态的窗口。它们没有指定触发触发器的第一次和最后一次。

例如，开始时间为上午 9:30，结束时间为下午 6:30 的每小时触发的计划将在此期间按小时触发。

在您的情况下，这无关紧要，因为您的 cron 计划是每天上午 10 点一次，这属于开始和结束时间窗口。

如果您想在每天上午 9 点 30 分和上午 10 点触发作业，那么最简单的方法是创建两个都调用相同作业的 cron 触发器。

# javascript - 在 switch 语句中使用 ViewBag

> ID：15084889
> 
> 赞同：0
> 
> 时间：2013-02-26T08:54:45.780
> 
> 标签：javascript, asp.net-mvc, switch-statement, viewdata, viewbag

这是我的控制器中的代码：

```
public ActionResult MyMethod(string widgetId)
    {
        ViewBag.Widget = widgetId;
        ViewData["widget"] = widgetId;
        return View();
    } 
```

这是我在 switch 语句中尝试的：

```
var sort = <%=(string)ViewBag.Widget.ToString() %>;
    //switch (<%=(string)ViewData["widget"] %>) {   
    switch (sort) {            
        case 'a1':

            break;
        case 'a2':

            break;
        case 'a3':

    } 
```

就我而言，widgetId 是'a3'

它会抛出 a3 未定义的错误。如何解决这个问题？一世

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:57:54.467

我假设这是 JavaScript，其中一个服务器值被写入输出：

```
// you were missing quotes around the value of "sort"
// (single or double quotes are fine since this is JS)

var sort = "<%= ViewBag.Widget.ToString() %>"; 
alert(sort);

switch (sort) {            
    case 'a1':
        break;

    case 'a2':
        break;

    case 'a3':
        break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:22:07.593

在使用 javascript 时，您应该以下列方式使用它。

```
var sort = "<%=ViewBag.Widget.ToString() %>"; 
```

将您的 viewbag 值视为上述语句的“a3”将产生

```
var sort = "a3"; // so JS could evaluate it as string. 
```

在您之前的声明中，它的生成方式如下

```
 var sort = a3; // Where JS was not having any idea about what a3 is 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:01:10.713

您缺少 js 字符串周围的引号。所以服务器传递的值`a3`在客户端是未定义的。

```
var sort = '<%=(string)ViewBag.Widget.ToString() %>'; 
```

# android - android：facebook在第一次尝试时没有登录

> ID：15084894
> 
> 赞同：1
> 
> 时间：2013-02-26T08:55:10.317
> 
> 标签：android, facebook, login

我有以下代码可以使用 FB sdk 发布到 FB。当我第一次单击按钮发布时，它会打开此活动并尝试进行身份验证，然后我的 FB 页面显示“您尚未登录”。如果我按回并尝试再次发布，我将进入登录页面以输入凭据并且发布成功。该问题仅在安装应用程序后第一次出现。请帮助解决这个问题

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("FAceBook","create instance");
    facebook = new Facebook(APP_ID);

    facebook.authorize(FaceBookShareActivity.this, PERMISSIONS,Facebook.FORCE_DIALOG_AUTH,

    new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            try {
                Log.i("FAceBook","DialogListener");
                Bundle parameters = new Bundle();
                parameters.putString("message", "msg");
                String response = facebook.request("me/feed", parameters,
                        "POST");
                Log.d("fbproblem", "got response: " + response);
                if (response == null || response.equals("")
                        || response.contains("error")) {
                    Log.d("Login failed", "RETRY");
                } else {
                    Log.d("fbproblem",
                            "Message posted to your facebook wall!");
                    Toast.makeText(getApplicationContext(),
                            "Message posted to your facebook wall!",
                            Toast.LENGTH_LONG).show();
                    // facebook.logout(MainActivity.this);
                }
            } catch (Exception e) {
                // finish();
                Log.d("fbproblem", e.getMessage());
            }
            Log.d("fbproblem", "SUCCESS");
             finish();
        }

        @Override
        public void onFacebookError(FacebookError error) {
            Log.d("fbproblem", error.getMessage());
            // finish();
        }

        @Override
        public void onError(DialogError e) {
            Log.d("fbproblem", e.getMessage());
            // finish();
        }

        @Override
        public void onCancel() {
            Log.d("fbproblem", "");
            // finish();
        }

    });
    Log.i("FAceBook","Call authorise");
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    try {
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
        Log.i("FAceBook","authorizeCallback called");
    } catch (Exception e) {
        Log.d("fbproblem", e.getMessage());
        Toast.makeText(getApplicationContext(),
                "Something goes wrong Try again Later!!", Toast.LENGTH_LONG)
                .show();
    }
} 
```

# tinymce - 如何将个人单词列表添加到 Aspell？

> ID：15084895
> 
> 赞同：2
> 
> 时间：2013-02-26T08:55:14.890
> 
> 标签：tinymce, aspell

我有一个个人单词列表，我需要在调用 aspell 字典时将这些单词包含在其中。我需要先从命令行检查它，然后将它实现到 PHP 拼写检查器插件（TinyMCE）中，我需要相应地更改 PHP 代码。谁能帮我 ？

```
function TinyPspellShell(&$config, $lang, $mode, $spelling, $jargon, $encoding) {
    $this->lang = $lang;
    $this->mode = $mode;
    $this->error = false;
    $this->errorMsg = array();

    $this->tmpfile = tempnam($config['tinypspellshell.tmp'], "tinyspell");

    if(preg_match("#win#i",php_uname()))
        $this->cmd = '"' . $config['tinypspellshell.aspell']  . '"' . " -a --lang=". $this->lang." --encoding=utf-8 -H < $this->tmpfile 2>&1";
    else
        $this->cmd = "cat ". $this->tmpfile ." | " . $config['tinypspellshell.aspell'] . " -a --encoding=utf-8 -H --lang=". $this->lang;
} 
```

我尝试 $aspell check new.txt -p dict.txt 保存了一个简单的单词，但说 Dict not in correct form 。

# gimp - 用于将 EPS 转换为其他格式的 GIMP 脚本

> ID：15084899
> 
> 赞同：2
> 
> 时间：2013-02-26T08:55:47.843
> 
> 标签：gimp, eps

我在我的 linux 机器上经常使用 GIMP 来转换、修改和转换我的图片，尤其是 EPS。我想知道是否有可能在不手动导入/导出的情况下将 EPS 自动转换为另一种格式或将通用图片格式转换为 EPS？有没有可能？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:57:20.193

既然你在 Linux 上，为什么不[试试 Imagemagick](http://www.imagemagick.org/Usage/formats/#ps)呢？另一种选择（取决于 EPS 的复杂性）是[GhostScript](http://www.ghostscript.com/doc/9.07/Use.htm#Options)。

要将 EPS 转换为 JPG，您可以使用以下内容：

```
convert -density 300 image.eps -resize 1024x1024 image.jpg 
```

另请参阅此[问题](https://stackoverflow.com/questions/7583821/how-to-convert-a-eps-file-to-a-high-quality-1024x1024-jpg)以获取更多信息。

编辑：

在 shell 中转换多个文件（未经测试，文件名不能包含空格！）：

```
for i in *.eps; do convert -density 300 ${i} ${i%eps}jpg; done 
```

如果您有带空格的文件名，则必须使用`find`.

# java - Java从内部类单例访问外部类变量

> ID：15084905
> 
> 赞同：0
> 
> 时间：2013-02-26T08:56:15.730
> 
> 标签：java, singleton, nested

我有一个`Node`由两个类实现的接口 ()：`White`，我想成为一个单例，而`Black`不是单例。问题是我希望这些类被一个外部类 ( `Outer`) 包围，它有一个自己的字段 ( `outerObject`)。`White`应该是单例，这意味着它应该是静态的。但`Black`需要能够访问外部类字段，这意味着它不能是静态的。

在这里，如果`White`不是静态的，那么它就不是真正的单例：

```
class Outer {
    interface Node {
        Node foo();
    }

    // I would like the White class to be a singleton class
    class White implements Node {
        Node foo() {
            return new Black();
        }
    }

    class Black implements Node {
        Node foo() {
            outerObject.doSomething();
            return this;
        }
    }

    Object outerObject;
} 
```

但是如果我制作`White`一个静态单例，那么它不能在`Black`没有封闭的情况下实例化一个新的`Outer`：

```
 enum White implements Node {
        INSTANCE;

        Node foo() {
            return new Black(); // This doesn't work because Black
                                // needs an enclosing outer class.
        }
    } 
```

如果我要创建`Black`一个静态类，那么它就无法访问`outerObject`外部类中的字段 ()：

```
 static class Black implements Node {
        Node foo() {
            outerObject.doSomething(); // can't access non-static field
            return this;
        }
    } 
```

捕获相同问题的更简单表示是简单地尝试`outerObject`从单例访问`White`：

```
class Outer {
    enum White {
        INSTANCE;

        Node foo() {
            outerObject.doSomething();
            return this;
        }
    }

    Object outerObject;
} 
```

我必须使`White`非静态才能访问`outerObject`，但它应该是静态的才能成为单例。

有谁知道这是否有解决方案？如果归根结底，我可以尝试制作一个伪单例内部类（从某种意义上说，外部类的每个实例只能具有该内部类的一个实例）。或者只是放弃单例模式并手动声明一个`White`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:04:02.613

您可以指定要创建新 Black 的 Outer 实例。但可能这不是你想要的。

```
 enum White implements Node {
        INSTANCE;

        public Node foo() {
            return new Outer().new Black(); // This will work
        }
    } 
```

# c# - 通过字符串数组动态创建 GroupBy 语句 - Linq to Entity

> ID：15084906
> 
> 赞同：0
> 
> 时间：2013-02-26T08:56:15.667
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, group-by

我有一个动作可以加载一个字符串数组，这些字符串由页面上的相应复选框选中：

```
 public ActionResult Test1(string[] checked_strings) 
```

我想使用与我想动态创建 groupby 语句的实体名称相同的字符串。

这将是这样的：

```
 bool bChecked = Request.Form["checked_strings"].Contains("true");
            cmpqry =   from x in checked_strings
                       from y in typeof(Company).GetProperties()
                       where y.Name == x.ToString()
     // Create the groupby statement for the properties matched with the strings // 
```

知道如何解决这个问题吗？

cmpqry 保存模型类的 IEnumarable 列表（稍后返回查看）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:21:09.473

这是有效的代码示例 - 您应该能够按照您希望它们分组的顺序提供要分组的字段：

```
public class Company
{
    public int CompanyID { get; set; }
    public string CompanyName { get; set; }
    public string SubBranchName { get; set; }
    public string ProductName { get; set; }
}

public static class MyEnumerableExtensions
{
    /// <summary>
    /// Applies grouping to the collection of elements using the selectors specified
    /// </summary>
    /// <typeparam name="TElement">Type of the element</typeparam>
    /// <param name="elements">Elements to be grouped</param>
    /// <param name="groupSelectors">Selectors, or properties to be grouped on</param>
    /// <returns></returns>
    public static IEnumerable<GroupResult> GroupByMany<TElement>(
        this IEnumerable<TElement> elements,
        params Func<TElement, object>[] groupSelectors)
    {
        if (groupSelectors.Length > 0)
        {
            var selector = groupSelectors.First();

            //reduce the list recursively until zero
            var nextSelectors = groupSelectors.Skip(1).ToArray();
            return
                elements.GroupBy(selector).Select(
                    g => new GroupResult
                    {
                        Key = g.Key,
                        Items = g,
                        SubGroups = g.GroupByMany(nextSelectors)
                    });
        }
        return null;
    }

    public class GroupResult
    {
        public object Key { get; set; }
        public IEnumerable Items { get; set; }
        public IEnumerable<GroupResult> SubGroups { get; set; }
    }
}

//Your usage of the GroupByMany
IEnumerable<Company> list = new List<Company>
 {new Company{CompanyID = 1, CompanyName = "Company1", ProductName = "Product1", SubBranchName = "SB1"},
 new Company{CompanyID = 2, CompanyName = "Company1", ProductName = "Product2", SubBranchName = "SB2"},
 new Company{CompanyID = 3, CompanyName = "Company1", ProductName = "Product3", SubBranchName = "SB1"},
 new Company{CompanyID = 4, CompanyName = "Company2", ProductName = "Product4", SubBranchName = "SB2"},
 new Company{CompanyID = 5, CompanyName = "Company2", ProductName = "Product1", SubBranchName = "SB2"},
 new Company{CompanyID = 6, CompanyName = "Company2", ProductName = "Product2", SubBranchName = "SB1"},
 new Company{CompanyID = 7, CompanyName = "Company2", ProductName = "Product3", SubBranchName = "SB2"},
 new Company{CompanyID = 8, CompanyName = "Company3", ProductName = "Product4", SubBranchName = "SB2"},
 new Company{CompanyID = 9, CompanyName = "Company3", ProductName = "Product3", SubBranchName = "SB1"},
 new Company{CompanyID = 10, CompanyName = "Company3", ProductName = "Product2", SubBranchName = "SB2"},
 };

    var groupedByProductNameThenSubBranchName = list.GroupByMany(p => p.ProductName, p => p.SubBranchName);

    foreach (var groupResult in groupedByProductNameThenSubBranchName)
    {
        foreach (var result in groupResult.SubGroups)
        {
            foreach (var groupResult1 in result.Items)
            {
                Company company = groupResult1 as Company;
                Debug.Print(String.Format("ProductName: {0}, SubBranchName: {1}", company.ProductName, company.SubBranchName));
            }
        }
    }

    var groupedBySubBranchNameThenCompany = list.GroupByMany(p => p.SubBranchName, p => p.CompanyName);

    foreach (var groupResult in groupedBySubBranchNameThenCompany)
    {
        foreach (var result in groupResult.SubGroups)
        {
            foreach (var groupResult1 in result.Items)
            {
                Company company = groupResult1 as Company;
                Debug.Print(String.Format("SubBranchName: {0}, CompanyName: {1}", company.SubBranchName, company.CompanyName));
            }
        }
    } 
```

第一个“foreach”打印出来

```
ProductName: Product1, SubBranchName: SB1
ProductName: Product1, SubBranchName: SB2
ProductName: Product2, SubBranchName: SB2
ProductName: Product2, SubBranchName: SB2
ProductName: Product2, SubBranchName: SB1
ProductName: Product3, SubBranchName: SB1
ProductName: Product3, SubBranchName: SB1
ProductName: Product3, SubBranchName: SB2
ProductName: Product4, SubBranchName: SB2
ProductName: Product4, SubBranchName: SB2 
```

第二个“foreach”打印出来

```
SubBranchName: SB1, CompanyName: Company1
SubBranchName: SB1, CompanyName: Company1
SubBranchName: SB1, CompanyName: Company2
SubBranchName: SB1, CompanyName: Company3
SubBranchName: SB2, CompanyName: Company1
SubBranchName: SB2, CompanyName: Company2
SubBranchName: SB2, CompanyName: Company2
SubBranchName: SB2, CompanyName: Company2
SubBranchName: SB2, CompanyName: Company3
SubBranchName: SB2, CompanyName: Company3 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T10:28:50.947

我不能确切地说这与您的特定问题有多大的相关性，但如果您有一个字段要对您的数据进行分组，您可以编写类似于以下内容的查询，它将博客文章按创建年份分组

```
var results = from allPosts in db.Posts.OrderBy(p => p.DateCreated)
              group allPosts by allPosts.DateCreated.Year into postsByYear; 
```

这里的“结果”是组的枚举——在这种情况下，是某一年发布的帖子。

这可以进一步扩展以在“第一级”内创建子组 - 按月份组发布的帖子类似于

```
var results = from allPosts in db.Posts.OrderBy(p => p.DateCreated)
              group allPosts by allPosts.DateCreated.Year into postsByYear

              select new
              {
                  postsByYear.Key,
                  SubGroups = from yearLevelPosts in postsByYear
                              group yearLevelPosts by yearLevelPosts.DateCreated.Month into postsByMonth;
              }; 
```

现在 SubGroups 是一个月内帖子的枚举。这里有更多信息（可能很有帮助）

[http://blogs.msdn.com/b/mitsu/archive/2007/12/22/playing-with-linq-grouping-groupbymany.aspx](http://blogs.msdn.com/b/mitsu/archive/2007/12/22/playing-with-linq-grouping-groupbymany.aspx)

在这里（我将上一个链接应用到我遇到的特定问题）

[http://www.ynegve.info/Post/156/implementing-a-tree-view-small-case-study](http://www.ynegve.info/Post/156/implementing-a-tree-view-small-case-study)

如果这看起来像您需要的，但您仍然无法使其工作，请发布有关您的模型的更多信息。

# button - 如何跳过选择屏幕上的必填字段？

> ID：15084916
> 
> 赞同：2
> 
> 时间：2013-02-26T08:56:45.567
> 
> 标签：button, abap, dynpro

当我点击“İptal”按钮时，我希望它跳过必填字段。

但我不想控制没有“必填”的必填字段。我想在屏幕截图等文本框中看到复选标记。

通常，当没有必填字段时，“İptal”按钮会调用不同的屏幕。

![当我点击 İptal 按钮时，我希望它跳过这个必填字段](../Images/cf099044f990fd82aea6aee0f5ca91bc.png)

注意：屏幕是标准选择屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-04T13:37:22.830

我解决这个问题的方式不是在布局中使字段成为强制性字段，而是在您的代码中创建一些条件示例我的输入输出字段名为 ekpo-ebeln：

```
 IF ekpo-ebeln IS INITIAL.
    CASE ok_code.
      WHEN 'EXIT'.
        LEAVE PROGRAM.
      WHEN 'BACK'.
        CALL SCREEN 100.
    ENDCASE.
    MESSAGE 'Fill both of the fields' TYPE 'I'. 
```

这解决了我的问题，并且有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:32:21.327

您需要做的是为屏幕上具有“退出”功能类型的按钮分配一个功能代码。

然后您可以`AT SELECTION-SCREEN ON EXIT-COMMAND`在报告中使用该事件（我假设您在谈论报告，因为您谈论选择屏幕）。在验证屏幕上的字段之前，系统会调用此事件。在这里，您可以实现所有必要的逻辑。

但是，我能想到的唯一方法是将标准 GUI 状态`%_00`从程序复制`RSSYSTDB`到您的程序并添加您的功能代码并使其成为“退出”类型。然后，`AT SELECTION-SCREEN OUTPUT`您可以使用该`SET PF-STATUS`命令覆盖标准 GUI 状态。（否则如果你给你的按钮分配了一个功能码，但它不会受到特殊处理来触发`ON EXIT-COMMAND`事件）。

***编辑：*** 我刚刚尝试过它并且它有效，但在将功能代码分配给按钮时（使用`SELECTION-SCREEN PUSHBUTTON`）无效。相反，我必须将功能代码添加为工具栏上的按钮。然后它触发`AT SELECTION-SCREEN OUTPUT`事件）。

***编辑 2：（*** *刚刚将我的评论从下面复制到这里，因为需要注意）*顺便说一下，当我复制它时，我必须将 %_00 GUI 状态重命名为其他名称。否则，即使在 SET PF-STATUS 中指定了 FROM PROGRAM，它仍然会使用 RSSYSTDB 中的旧 GUI 状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-25T16:16:31.667

您可以执行以下技巧来实现您的要求。

先决条件：

1.  首先也是最重要的！不要使用**子句**声明您的参数`OBLIGATORY`。此约束在选择屏幕处理期间覆盖所有内部检查和验证。

2.  在这里，我假设您使用标准 GUI 状态并在应用程序工具栏上激活按钮。标准*执行*按钮具有标准`ONLI`fcode，而 İptal 具有`IPT`.

3.  要操作目标字段，我们需要分配给它们的 ID：

    ```
    PARAMETERS: p_matnr TYPE mara-matnr MODIF ID OBL,
                p_mtart TYPE mara-mtart MODIF ID OBL. 
    ```

解决方案详情：

1.  声明 AT SELECTION-SCREEN OUTPUT 事件，其中字段的属性将被编辑。

    ```
    AT SELECTION-SCREEN OUTPUT.

    SET PF-STATUS 'SSCR'.       "<<- our GUI-status
    LOOP AT SCREEN.
     IF screen-group1 = 'OBL'.
       screen-required = '2'.   "<<- default obligatory-like field appearance
       MODIFY SCREEN.
     ENDIF.
    ENDLOOP.
    IF sy-ucomm = 'ONLI'.       "<<- making fields really obligatory
     LOOP AT SCREEN.
      IF screen-group1 = 'OBL'.
       screen-required = '1'.
       MODIFY SCREEN.
      ENDIF.
     ENDLOOP.
    ENDIF. 
    ```

2.  处理 AT SELECTION-SCREEN 事件中的功能代码。

    ```
    AT SELECTION-SCREEN.

     IF sy-ucomm = 'ONLI'.
      LEAVE TO SCREEN 1000.
     ENDIF.
     IF sy-ucomm = 'IPT'.
      "<do whatever you want>
     ENDIF. 
    ```

说明：在程序启动时，您的字段的`required`属性设置为 2，这意味着它们具有强制性刻度，但**实际上并不像 obligatory 那样**，即这正是您所需要的。您可以完美地按下您的 İptal 按钮并运行任何其他程序。
但是，如果您想启用强制约束，您只需按标准执行，它会再次调用我们的选择屏幕 ( `LEAVE TO SCREEN 1000`)，但使用另一个 ONLI fcode，其`required`属性被覆盖，瞧！在填写这些字段之前，不可能更进一步。

# php - PHP：从串行（char）图像数据中显示动态图像

> ID：15084917
> 
> 赞同：1
> 
> 时间：2013-02-26T08:56:49.283
> 
> 标签：php, image, serial-port

我正在寻找一种简单的方法来显示通过串行接收的动态图像内容，最好使用 php。

我是一名使用 OpenCV 的 C++ 程序员，现在我发现有一些方法可以将 OpenCV 集成到 PHP 中，但这看起来不是很简单，而且它可能对我的应用程序来说过于强大。

为了进一步描绘我想要完成的事情，这是我的应用程序：

我正在建造一个咖啡桌网球屏幕。使用 32x16 LED、多路复用器、Arduino 和玻璃咖啡桌。我的服务器将运行显示在咖啡桌上的 Pong 服务器程序。要玩游戏，您可以使用咖啡桌上的电位计或登录网站并“在线”与咖啡桌上的某人或在线对战其他人。

所以这个网站唯一要做的就是以大约 10 fps 的帧速率在图像中显示串行信息，并通过串行将一些数据（每帧 2 个位置字节）发送回服务器应用程序。

我应该研究（如我所见）WebGL 之类的较重的东西吗？或者有没有更简单的 PHP 函数来做这样的事情？

PS：串行通信本身我以前做过，所以这应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:18:35.023

查看 PHP 手册中的 GD 函数，尤其是[imagecreatefromstring 函数](http://php.net/manual/en/function.imagecreatefromstring.php)。

# nginx - url 特定重定向的 ngnix 配置设置

> ID：15084918
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:56:50.553
> 
> 标签：nginx

我想将特定的 URL 重定向到在不同端口上运行的本地服务器，不确定我需要在 nginx.config 中添加什么。谢谢！

```
e.g:  for url /v1/jobs
I want to direct it to a local server running on port 9090 
```

以下是我当前的 nginx 配置设置：

```
http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;    

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:50:09.210

使用[代理通行证](http://wiki.nginx.org/HttpProxyModule#proxy_pass)

```
 location ^~ /v1/jobs {
    proxy_pass http://www.domain.com:9090
  } 
```

*URI 保持不变 - 如果需要，您可以在代理传递*之前使用*重写*来更改 URI。

 *重启*nginx*

*   要么做`nginx -s reload`
*   或将 HUP 发送到进程`killall -HUP nginx`
*   或重启服务`service nginx restart`
*   或者`/etc/init.d/nginx restart`*

# objective-c - 自定义子视图中的 UILabel 不显示数据

> ID：15084924
> 
> 赞同：0
> 
> 时间：2013-02-26T08:57:18.563
> 
> 标签：objective-c, ipad, uiview, uiviewcontroller

在我的 RootViewController 中，我实例化了一个 UIViewController (CheckOutCartVC) 以添加为 RootViewController 的子视图。我通过了带有“totalQuantity”属性的发票模型。这是代码：

```
CheckOutCartVC * checkOutVC = [[CheckOutCartVC alloc] init];
checkOutVC = [self.storyboard instantiateViewControllerWithIdentifier:@"checkOutVC"];
checkOutVC.invoice = self.invoice;

[self.checkOutView addSubview:checkOutVC.view];
[self.view addSubview:self.checkOutView]; 
```

上面的代码会将 CheckOutCartVC 作为子视图添加到我的 RootViewController。当我按下我的结帐按钮时，它将显示来自右侧的这个 uiview（不覆盖整个控制器）

在我传递“发票”的 CheckOutCartVC 中，我尝试记录 _invoice.totalQuantity。我通过日志获得了正确的数据（例如，20 美元），但是当我将其分配给 LABEL 时，我只得到 NULL。

```
- (void)setInvoice:(Invoice *)invoice{
    _invoice = invoice;
    NSLog(@"CheckoutCartVC Invoice   %@", _invoice.totalQuantity);
    self.lblTotalQuantity.text =  [NSString stringWithFormat:@"%@", _invoice.totalQuantity];
    return _invoice;
     } 
```

我尝试寻找解决问题的方法并尝试添加

```
[self.lblTotalQuantity.text setNeedsDisplay]; 
```

我真的不明白为什么会这样。我得到了正确的日志，但是当我将值分配给标签时，它给了我一个 NULL 显示。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:33:31.543

您还没有提到如何添加标签！交叉检查它是否被添加到视图中，通过设置背景颜色检查它是否可见。如果它是从xib加载的，请检查它的出口是否连接。

# phpmailer - 将表单数据添加到使用 phpmailer 通过电子邮件发送的 html 文件中

> ID：15084925
> 
> 赞同：0
> 
> 时间：2013-02-26T08:57:19.977
> 
> 标签：phpmailer

大家好，我有一个非常基本的 php 问题，关于将表单数据添加到使用 phpmailer 发送的 html/php 文件中

我使用 gmail 帐户 SMTP 在成功提交表单后发送 HTML 电子邮件。

提交表单时，HTML 电子邮件已成功发送。

问题/问题：

我无法附加输入到我作为电子邮件发送的 HTML 文件中的各种标题中的表单数据。

这是调用的 PHP 代码：用于表单提交。email-content.php 是使用 Gmail SMTP 作为 HTML 电子邮件成功发送的文件。

```
<?php

$salutation = $_POST['salutation'] ;
$name = $_POST['name'] ;
//
$dateDOB = $_POST['DOB_Day'] ;
$monthDOB = $_POST['DOB_Month'] ;
$yearDOB = $_POST['DOB_Year'] ;
//
$mobileLandline1 = $_POST['mobileLandline1'] ;
$mobileLandline2 = $_POST['mobileLandline2'] ;
$mobileLandline3 = $_POST['mobileLandline3'] ;
$mobileLandline4 = $_POST['mobileLandline4'] ;
$mobileLandline5 = $_POST['mobileLandline5'] ;
$mobileLandline6 = $_POST['mobileLandline6'] ;
$mobileLandline7 = $_POST['mobileLandline7'] ;
$mobileLandline8 = $_POST['mobileLandline8'] ;
//
$language = $_POST['language'] ;
//
$address = $_POST['address'] ;
$city = $_POST['city'] ;
$state = $_POST['state'] ;
$pin = $_POST['pin'] ;
//
$fax = $_POST['fax'] ;
$email = $_POST['email'] ;
//
$passwordOption = $_POST['passwordOption'] ;
$passwordOptionProvided = $_POST['passwordOptionProvided'] ;

//Using PHPMailer with GMAIL

include("class.phpmailer.php");
include("class.smtp.php"); // note, this is optional - gets called from main class  if     not already loaded

$mail             = new PHPMailer();

$body             = $mail->getFile('email-content.php');
$body             = eregi_replace("[\]",'',$body);

$mail->IsSMTP();
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port

$mail->Username   = "####@gmail.com";  // GMAIL username
$mail->Password   = "#######";            // GMAIL password

$mail->From       = "subscriptionForm@abc.com";
$mail->FromName   = "Subscrition Form";
$mail->Subject    = "SUBSCRIPTION FORM DETAILS FROM WEBSITE";
$mail->AltBody    = "This is the body when user views in plain text format";   //Text     Body
$mail->WordWrap   = 50; // set word wrap

$mail->MsgHTML($body);

$mail->AddReplyTo("replyto@yourdomain.com","Webmaster, ####.com");

$mail->AddEmbeddedImage('logo.png', 'logo');
//$mail->AddAttachment("/path/to/file.zip");             // attachment
//$mail->AddAttachment("/path/to/image.jpg", "new.jpg"); // attachment

$mail->AddAddress("contact@abcd.com","Subscription Form");

$mail->IsHTML(true); // send as HTML

if(!$mail->Send()) {
 header('Location: http://www.#####.com/subscription-form-fail.html');
} else {
//echo "Message has been sent";
// header('Location: $submissionsuccess');
 header('Location: http://www.####.com/subscription-form-success.html');
}

?> 
```

email-content.php 的代码：（部分 ho 我将 php 数据值调用到 HTML 模板中）

```
 <table width="590" border="0" cellspacing="0" cellpadding="0" >
 <tr>
 <td align="left" valign="top" width="50" style="font-size:10pt; font-family:Tahoma, Geneva, sans-serif; padding:2px;">Name :</td>

 <td align="left"  valign="top"  width="30" style="font-size:10pt; font-family:Tahoma, Geneva, sans-serif; padding:2px;"><?php $salutation ?></td>
 <td align="left" valign="top" width="460" style="font-size:10pt; font-family:Tahoma, Geneva, sans-serif;">
 <table width="460" border="1" cellspacing="0" cellpadding="0" style=" border-collapse:collapse;font-size:10pt; font-family:Tahoma, Geneva, sans-serif;border:1px solid #e0e3e5;" >
 <tr>
 <td style="padding:2px;"><?php $_POST['name'] ?></td>
 </tr>
 </table> 
```

我是 php 编程的新手，我确定我在这里缺少一些非常基本的东西。提交的名称值在发送的 HTML 电子邮件中不可见。

对此问题的任何指导将不胜感激

谢谢

穆迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:55:58.373

找到了解决方案。

1\. 在电子邮件模板代码中，表单值被称为 %name% 以表示名称值

2\. 在调用 FORM SUBMISSION 的 PHP 代码中，将 % 替换为实际信息，如下所示：

$body = str_replace('%name%', $name, $body);

这工作得很好。

# javascript - 嵌入在 wordpress 页面中的 CRUD 应用程序

> ID：15084926
> 
> 赞同：0
> 
> 时间：2013-02-26T08:57:22.333
> 
> 标签：javascript, wordpress, constructor

我找到了一个优秀的 CRUD 构建教程： http: [//www.jeasyui.com/tutorial/app/crud3.php](http://www.jeasyui.com/tutorial/app/crud3.php)

我已按照说明进行操作，并根据我的需要创建了一个。（数据库与 wordpress 使用的相同。）可以在此处看到正确工作的示例： [http ://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html#](http://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html#)

现在我想将它嵌入到 wordpress 页面。我使用自定义页面模板，将工作示例中使用的代码硬拷贝到页面的容器部分。可以在这里看到： [http ://www.szerelmifajdalomklinika.hu/kapcsolati-vazlat/#](http://www.szerelmifajdalomklinika.hu/kapcsolati-vazlat/#)

如您所见，这是错误的，并且不起作用（不显示数据，无法保存等）。这两个页面使用相同的文件（例如，save_user.php 在两个实例中都是相同的。）我使用带有 Constructor 主题的 Wordpress。

请帮我解决这个问题。**如何正确地将这个工作示例插入我的 wordpress 页面？**

感谢您的帮助，西罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:27:15.957

您可能对 DaDaBIK (dadabik.org) 感兴趣，它会自动创建一个 CRUD 应用程序并允许嵌入到 Wordpress 页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:08:12.690

它实际上适用于对上述 html 进行 iframe 处理。

```
<iframe name="FRAME2" src="http://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html" frameborder="1" width="450" height="400"></iframe> 
```

到页面模板文件。

# linux - 在终端中获取“gnome-system-monitor”数据

> ID：15084929
> 
> 赞同：-1
> 
> 时间：2013-02-26T08:57:37.540
> 
> 标签：linux, debian, system-monitoring

有什么方法可以检索终端中的“gnome-system-monitor”数据，包括 cpu+memory 等使用情况。获取应用程序“进程”下的列表是主要要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:02:20.950

如果您想要实时结果，可以使用 top。否则你可以使用 ps -eF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:59:19.073

您可以使用`top`或具有更多功能的彩色版本：`htop`

# c# - 单击按钮更改在 datagrid 的数据模板内定义的 textBox 中的文本

> ID：15084930
> 
> 赞同：0
> 
> 时间：2013-02-26T08:57:41.473
> 
> 标签：c#, silverlight

我在银光工作。我在数据网格中有一个文本框，我的页面上有一个按钮，其功能是用括号括住所选文本。例如。让我的文本框中的文本为“Hello World”，现在当我的数据网格进入编辑模式时，我想从这个文本框中选择一些文本。让它成为“世界”。现在我选择了“world”，当我点击按钮时，文本框中的输出应该是“Hello (World)”。但问题是当我选择文本并单击按钮时，文本框失去焦点并且文本保持不变。如果我关注文本框，那么按钮不会被点击。

请任何人都可以提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:15:30.183

你可以使用客户端事件吗？你可以看看 JQuery 的 Caret 插件： [http ://www.examplet.buss.hk/jquery/caret.php](http://www.examplet.buss.hk/jquery/caret.php)

```
// Get start position in textbox box with id="textbox1"
$("#textbox1").caret().start

// Get end position in textbox
$("#textbox1").caret().end

// Get selected text in textbox
$("#textbox1").caret().text 
```

还有简单的 Javascript 解决方案：

```
<script language=javascript>
function getSelText()
{
var txt = '';
    if (window.getSelection)
    {
        txt = window.getSelection();
    }
    else if (document.getSelection)
    {
        txt = document.getSelection();
    }
    else if (document.selection)
    {
        txt = document.selection.createRange().text;
    }
    else return;
document.aform.selectedtext.value =  txt;
}
</script>
<form>
    <input type="button" value="Get selection" onmousedown="getSelText()"> 
    <form name=aform >
    <textarea name="selectedtext" rows="5" cols="20"></textarea>
</form> 
```

来源： http: [//www.codetoad.com/javascript_get_selected_text.asp](http://www.codetoad.com/javascript_get_selected_text.asp)

# c# - 将表单粘贴到在不同线程中运行的另一个表单上

> ID：15084932
> 
> 赞同：0
> 
> 时间：2013-02-26T08:57:45.797
> 
> 标签：c#, multithreading, winforms

我有一个信息表单，它显示有关某些进程状态的信息。此表单显示在用户给出流程执行指令的主表单上。现在，我在另一个线程上运行此信息表单，无法将其粘贴在主表单之上。每当我单击任务栏右下角的显示桌面按钮，然后尝试从任务栏恢复我的应用程序时，信息表单都不可见。我怎样才能让这个信息表单保持在主表单上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:01:18.390

我不确定这是否是一种干净的方式，但它确实有效！

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.Resize += OnResize;
    }

    private void OnResize(object sender, EventArgs eventArgs)
    {
        if (form2running && form != null && (WindowState == FormWindowState.Maximized || WindowState == FormWindowState.Normal))
        {
            form.Invoke((MethodInvoker)(() => form.WindowState = FormWindowState.Normal));
        }
    }

    private bool form2running = false;
    private Form form;

    private void button2_Click(object sender, EventArgs e)
    {
        ThreadPool.QueueUserWorkItem(ShowNewForm);
    }

    private void ShowNewForm(object o)
    {
        form2running = true;
        form = new Form2();
        Application.Run(form);
        form2running = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:02:45.910

所有形式的应用程序都应该在单个 UI 线程上运行。如果您想在后台执行某些操作，请使用后台线程（例如通过[BackgroundWorker ）。](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)当新数据从后台线程到达时，只需刷新信息表单的 UI。

查看[Windows 窗体中的多线程](http://msdn.microsoft.com/en-us/library/ms951089.aspx)

请记住，winforms 控件[不是线程安全的](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)：

> 对 Windows 窗体控件的访问本质上不是线程安全的。如果您有两个或更多线程操作控件的状态，则可能会强制控件进入不一致的状态。其他与线程相关的错误也是可能的，包括竞争条件和死锁。确保以线程安全的方式访问控件很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:12:23.837

您可以创建信息表单并在单独的线程中对其进行初始化，但是您必须在主线程中显示它。您通常不能在不同线程中运行的两个表单之间进行操作。

考虑使用[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)来执行您的任务。

# ios6.1 - 收到通知时重新加载表格视图

> ID：15084940
> 
> 赞同：0
> 
> 时间：2013-02-26T08:58:24.193
> 
> 标签：ios6.1

我有一个基于视图控制器`UITableViewController`，我想在收到更新通知时重新加载表视图：

```
 if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateApStatus:) name:@"UpdateApStatus" object:nil];
    }

- (void)updateApStatus{
    NSLog(@"......updateApStatus......");
    [self.tableView reloadData];
} 
```

我在其他班级发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"UpdateApStatus" object:self]; 
```

错误是：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MenuViewController updateApStatus:]: unrecognized selector sent to instance 0xb25bf80' 
```

好像无法访问`self`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:14:00.063

从 中删除“：” `updateApStatus`。如果函数具有参数，您将只使用冒号，而您的情况并非如此。因此，添加冒号是完全不同的选择器，这就是它无法识别的原因。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateApStatus) name:@"UpdateApStatus" object:nil]; 
```

# c++ - 没有匹配的函数调用未解析的函数类型

> ID：15084943
> 
> 赞同：0
> 
> 时间：2013-02-26T08:58:45.420
> 
> 标签：c++, templates, stl, c++11

我的这段代码有问题，它说没有匹配的函数调用次数，虽然我使用相同的数据类型并且参数的数量相同，有人可以帮我吗？

```
#include <iostream>
#include <iterator>
#include <random>
#include <vector>
#include<list>
#include<deque>
#include <algorithm>
#include <chrono>
#include <functional>
#include <sstream>

using namespace std;
using namespace std::chrono;

template<typename F, typename Arg, typename T>
void times(F func, Arg A, int n, T typeval)    // call func(arg,n, typeval)
{
    auto t1 = system_clock::now();
    func(A, n, typval);
    auto t2 = system_clock::now();
    auto dms = duration_cast<milliseconds>(t2-t1);
    cout << "f(x) took " << dms.count() << " milliseconds\n";
}

int random_gen(int& i){
    default_random_engine re { std::random_device()() };
    uniform_int_distribution<int> dist;
    auto r= bind(dist,re);
    int x =r();
    return x;
    //return rand();
}

string random_gen(string& s)
{
    string Result;          // string which will contain the result
    ostringstream convert;   // stream used for the conversion
    convert << rand();
    return convert.str();
}

template<typename SequenceContainer, typename T>
void build_cont(SequenceContainer& seq, int n, T valtype)
{
    for(int i=0; i!=n; ++i) {
        T gen = random_gen(valtype);
        typename SequenceContainer::iterator it = find_if(seq.begin(), seq.end(), [gen] (const typename SequenceContainer::reference & val) { return gen < val; } );
        seq.insert(it, gen);
    }
    for(auto i:seq)
        cout<<i<<endl;
}
int main() {
    int n=10;
    vector<int> v;
    list<int>ls;
    deque<int> deq;
   cout<<"vector of int"<<endl;
    times(build_cont, v, n, 0);

//  string stemp = "";
//    cout<<"vector of strings"<<endl;
//    build_cont(sv, n, stemp);
//    cout<<"list of strings"<<endl;
//    build_cont(sls, n, stemp);
//    cout<<"deque of strings"<<endl;
//    build_cont(sdeq, n, stemp);
//    
    return 0;
} 
```

当我运行 build_cont 时它运行得很好，但是当我把它放在 times 函数中时代码停止工作？有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:05:23.407

您需要指定模板参数`build_cont`

```
times(build_cont<std::vector<int>, int>, v, n, 0); 
```

# java - Knopflerfish，在捆绑包中使用外部库

> ID：15084946
> 
> 赞同：1
> 
> 时间：2013-02-26T08:59:00.697
> 
> 标签：java, osgi, knopflerfish

我知道在 OSGI 包中使用外部库有两种方法。因为只有我的包需要 lib（例如 google-gson），所以我试图将它放在`Bundle-ClassPath`（manifest.mf）中。但是，每当我在 Knopflerfish 中运行捆绑包时，我都会得到`Exception in thread "Thread-74" [stderr] java.lang.NoClassDefFoundError: com/google/gson/Gson`.

由于我是 OSGI 的新手，所以我尝试按照说明从[这里](http://www.knopflerfish.org/releases/current/docs/tutorials/kf_osgi_tutorial/kf_osgi_tutorial.pdf)创建一个捆绑包，使用一个`build.xml`用于编译的地方，我还包含了 lib（不知道这是否正确）。所以这个库出现在三个不同的地方，*项目类路径*、*包类路径*（manifest.mf）和*build.xml*。

如果有人能给我提示如何使图书馆工作，我会很高兴。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:12:48.457

流程如下

1.将所有`.jar`文件及其依赖项复制到一个文件夹

2.mention it `BUNDLE-CLASSPATH`in `MANIFEST.MF`.Refer [this](https://stackoverflow.com/questions/1340483/osgi-handling-3rd-party-jars-required-by-a-bundle/1340565#1340565)

3.Importantly将此库中的*包*添加到`Export-package`元素中，`MANIFEST.MF`以使其对其他捆绑包可见。

希望这可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T10:11:26.453

一些可能对我有帮助和工作的提示：

*   捆绑包的 MANIFEST.MF 可能有一行，如`Import-Package: org.osgi.framework`. 在该行中，您应该从库中添加所需包的导入，因此它仍然存在`Import-Package: org.osgi.framework, com.google.gson`
*   正如 TheWhiteRabbit 在其回答中所说，库应该有一个类似的导出行`Export-Package: its.sec.api.service`，所以其他包可能会看到它。已经编译和打包的库通常已经设置好了，但我发现一些没有设置的库是检查它的好习惯。

还要记住，外部库可以像捆绑一样安装到框架中，即在 init.xargs `- install jars/myLib/myLibrary.jar` **Installed but not started**中。

希望这可以帮助

# android - 优化视频解码器的建议

> ID：15084950
> 
> 赞同：0
> 
> 时间：2013-02-26T08:59:22.913
> 
> 标签：android, optimization, android-ndk, render, porting

我最近将一个视频解码器（用 C 编写）移植到了 android 平台。它的输出是 YUV 格式。所以我不得不将它转换为 RGB8888 以使用本机代码中的 ANativeWindow API 显示它。尽管移植成功，但对于 416x240 的输入，我能够渲染的输出约为 8.5fps，在使用优化级别 -O2(LOCAL_C_FLAG) 之后也是如此。

*   有没有一种方法可以更快地渲染视频而无需进行 c 和汇编级别的优化？
*   即使解码速度较慢，有没有办法让它看起来好像视频运行得更快？

任何有用的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:25:43.447

您可以使用 GLSurfaceView/Renderer 对来进行渲染。

1.  在您自己的 GLSurfaceView.Renderer 实现中，使用本机方法覆盖 OnDrawFrame。

2.  在您的本机实现中，使用 OpenGL ES.20 片段着色器进行色彩空间转换（以及缩放）。

通过这种方式，您不必担心视图/位图/UI 同步的细节。而且 OpenGL ES 真的很快。

# attributes - ldap 成员属性

> ID：15084951
> 
> 赞同：0
> 
> 时间：2013-02-26T08:59:26.350
> 
> 标签：attributes, ldap, members

简单的问题：我们如何使用 shell 命令“ldapsearch”从 Active Directory 的所有成员中检索“移动”属性？

我已经可以使用以下命令检索成员：

```
ldapsearch -LLL -x -H $LDAP_HOST -D $LDAP_USER -w $LDAP_PASS -b "OU=Security and Distribution Groups,dc=XXXXXX,dc=XX" $FILTER member 
```

这将为所有成员提供 DN。但由于某些 DN 包含特殊字符（如 ë、ö、è、é...），当我使用这些 DN 查询每个成员时，我会遇到一些编码问题。

有没有办法直接获取成员属性而不查询每个成员 DN 的 AD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:31:51.513

对搜索请求的响应始终包括与搜索参数匹配的条目的可分辨名称。添加`mobile`或`0.9.2342.19200300.100.1.41`到请求的属性列表。假设您的搜索请求使用正确的基础对象、范围和文件管理器，如果访问控制允许`mobile`被处理搜索的连接的授权状态读取，则将为匹配搜索参数的所有成员返回它。

### 也可以看看

*   [LDAP：搜索最佳实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# linux - 默认情况下，如何在 MPI 环境中管理内存？

> ID：15084956
> 
> 赞同：0
> 
> 时间：2013-02-26T08:59:49.353
> 
> 标签：linux, memory, cluster-computing, mpi

例如，如果每个集群有 4 个 CPU 与 64G RAM 共享，每个 CPU 旁边都有 16 GB 的“本地”内存（这更快），如果我将任务分配给这些本地节点，请一个 CPU 执行一项任务，默认情况下，MPI 任务管理器是否会让每个 CPU 首先使用其“本地”RAM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:04:32.633

这个问题没有一般的答案，它在很大程度上取决于具体的系统、操作系统和 MPI 实现。AFAIK MPI 规范没有解决这个问题。

例如，OpenMPI 允许您将进程固定到核心/套接字，但默认情况下不这样做。有关详细信息，请参阅[OpenMPI 常见问题解答](http://www.open-mpi.org/faq/?category=tuning#using-paffinity-v1.4)

很多内存位置取决于操作系统。对于 Linux，有几篇文章可能会为您提供一个起点：

[http://lwn.net/Articles/524977](http://lwn.net/Articles/524977/) , [http://lwn.net/Articles/254445](http://lwn.net/Articles/254445/)

# vb.net - 在这种情况下 goto 的最佳替代品 (vb.net)

> ID：15084960
> 
> 赞同：2
> 
> 时间：2013-02-26T09:00:10.163
> 
> 标签：vb.net, visual-studio-2010, datagridview

我在 VB 中工作，试图设置 Datagridview 的单元格背景颜色，但找不到让我实现该功能的内置函数，所以我最终将 Alpha、Red、Green 和 Blue 的值存储在变量中，然后设置背景使用 `Color.FromArgb' 着色

这是我使用的代码，它可以工作：

```
 currentval = ""
                        A = ""
                        R = ""
                        G = ""
                        B = ""

                        For Each s As Char In reader.ReadElementString("cell")
                            If s = " " Then
                                currentval = ""
                                GoTo nextSS
                            End If

                            If Not s = "," Then
                                currentval = currentval & s
                            End If
                            If s = "," Then
                                If A = "" Then
                                    A = currentval
                                    currentval = ""
                                    GoTo nextSS
                                End If
                                If Not A = "" And R = "" Then
                                    R = currentval
                                    currentval = ""
                                    GoTo nextSS
                                End If
                                If Not A = "" And Not R = "" And G = "" Then
                                    G = currentval
                                    currentval = ""
                                    GoTo nextSS
                                End If
                            End If
                 nextSS:
                        Next s
                        If Not A = "" And Not R = "" And Not G = "" And B = "" Then
                            B = currentval
                            currentval = ""
                        End If

                        Grid.Rows(i).Cells(y).Style.BackColor = Color.FromArgb(CInt(A), CInt(R), CInt(G), CInt(B)) 
```

后来我意识到这可能不是最好的方法，所以我想知道你们将如何处理和解决这个问题？正如我的个人资料上所说，我来这里是为了学习，并且当我将来需要解决类似问题时，我会考虑更有经验的开发人员的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:24:33.957

`GoTo`您可以通过仅使用子句来摆脱`Else`，但是如果您想通过分隔符拆分字符串，您应该真正使用[String.Split 方法](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.71%29.aspx)。

说你的字符串，`"166, 244, 100, 0"`那么你可以使用类似的东西：

```
Dim colors = value.Split(","c).Select(Function(v) CInt(v)).ToArray()
Dim new_color = Color.FromArgb(colors(0), colors(1), colors(2), colors(3)) 
```

*   该`Split`方法将字符串拆分`,`为 4 个部分
*   获取`Select`每个部分并使用将其转换为整数`CInt`
*   获取`ToArray`序列并转换为`Int`-Array 以便我们可以访问具有索引的元素
*   然后我们使用该数组来创建`Color`对象`Color.FromArgb`

# vb.net - 如何检查它是否是字符串的最后一行 vb.net

> ID：15084961
> 
> 赞同：1
> 
> 时间：2013-02-26T09:00:11.557
> 
> 标签：vb.net, string

我有一个循环，它逐行从文本框中提取字符串我想要一个条件，如果它的最后一行我将它存储在另一个文本框中。这是我的代码

```
Dim builder As New StringBuilder()
Dim reader As New StringReader(txtOCR.Text)

While True
        Dim line As String = reader.ReadLine()
        If line Is Nothing Then Exit While

        Dim WordCount = New Regex("\w+").Matches(line).Count

        If WordCount = 1 And Not line.ToLower().Contains("by") Then
            builder.AppendLine(line)

        ElseIf line.ToLower().Contains("the") And Not line.ToLower().Contains("by") Then
            builder.AppendLine(line)

        ElseIf line.ToLower().Contains("an") And Not line.ToLower().Contains("by") Then
            builder.AppendLine(line)
        End If
End While
txtTitle.Text = builder.ToString() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:07:51.913

在循环内使用计数器，然后：

```
If iCounter = txtOCR.Lines.Length Then
    '...
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:28:12.510

只需将每个中的`string`变量分配给特定的. 它将替换每个文本中的文本，最后它将产生符合您期望的结果。`'Line'``iteration``while loop``text box``iterations`

```
While True

        Dim line As String = reader.ReadLine()
        If line Is Nothing Then Exit While

        ....................
        ....................

        txtNew.text = line 'Assigning the variable to the separate text box

End While 
```

# iphone - UiTableView 加载许多单元格和 MemoryWarning

> ID：15084962
> 
> 赞同：0
> 
> 时间：2013-02-26T09:00:13.433
> 
> 标签：iphone, ios

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    PostCount *post=[listArr objectAtIndex:indexPath.row];

    //NSString *CellIdentifier = [NSString stringWithFormat: @"Cell%d_%d_%@_%d",indexPath.section,indexPath.row,post.foreignId,[listArr count]];
    NSString *CellIdentifier = [NSString stringWithFormat: @"Cell_%d_%@",indexPath.row,post.foreignId];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        NSLog(@"indexPath.row++++++++=%d",indexPath.row);

        TimeLineGraphicView *gview=[[TimeLineGraphicView alloc]init];
        gview.tag=indexPath.row+1000;
        gview.delegate=self;

        [cell addSubview:gview];

        int Allheight =[ModelClass returnGraphicViewHeight_timeLine:post];
        gview.frame=CGRectMake(0, 0, 320, Allheight);
        [gview setViewStyle:post];
    }

    TimeLineGraphicView *gview=(TimeLineGraphicView *)[cell viewWithTag:indexPath.row+1000];
    gview.lab_time.text=[ModelClass intervalSinceNow:post.when btime:0];

    //NSLog(@"intervalSinceNow=%@  ",[ModelClass intervalSinceNow:post.when btime:0]);
    //NSLog(@"post.when=%@  gview=%@  gview.lab_time.text=%@",post.when,gview, gview.lab_time.text);   

    return cell;

} 
```

你好，如果我有很多单元格，如果我使用上面的代码，TimeLineGraphicView *gview=[[TimeLineGraphicView alloc]init] 可以增加内存，因为当我加载很多单元格时，例如我首先加载15个单元格，然后添加15个单元格然后添加15个单元格等，它给我做了ReceiveMemoryWarning，你能很好地处理这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:03:40.747

你不释放细胞

```
 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

* * *

你不释放视图

```
[cell addSubview:gview];
[gview release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:15:04.017

您实施这些事情的方式不正确。

*   你为什么不继承 UITableViewCell ？比方说，在您的情况下，为什么不是 "TimelineGraphicTableviewCell" ？
*   可以在那里完成将“TimeLineGraphicView”作为子视图添加到单元格的 contentView 中。
*   在自定义类的 layoutSubviews 中设置子视图的框架等。
*   在`– cellForRowAtIndexPath:`您可以创建它并设置数据。！

我认为如果你以正确的方式实现，无论有多少行，tableview 都不应该显示任何内存警告......！

如果您仍然不清楚自定义 tableViewCells，只需 google 一下，您会发现大量教程。

祝你好运..！

# android - Android Waiting progress bar Can't create handler inside the thread that has not called Looper.prepare() 错误

> ID：15084966
> 
> 赞同：0
> 
> 时间：2013-02-26T09:00:47.713
> 
> 标签：android, multithreading, progress-bar, progressdialog

在我的 android 应用程序中，我将一些数据从服务器数据库复制到本地数据库。这可能需要 15 分钟以上。对于较慢的连接，它可能会被超过。所以我想显示一个等待进度条。

代码贴在下面。

```
refresh.setOnClickListener(new OnClickListener(){
public void onClick(View v) {
final ProgressDialog progressDialog = ProgressDialog.show(login.this, "", "Please wait...");
new Thread() {
public void run() {
try{
mySQLiteAdapter.openToWrite();
mySQLiteAdapter.deleteAll();
radapter.openToWrite();
radapter.deleteAll();
uadapter.openToWrite();
uadapter.deleteAll();
        try
            {
                 HttpClient httpclient = new DefaultHttpClient();
                 HttpPost httppost = new HttpPost("http://xxxxxxxxxxxxxxxxxxxxx");
                 HttpResponse response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();
                  is = entity.getContent();
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(
                        is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                json = sb.toString();
            } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
            }

            try {
                jObj = new JSONObject(json);
                contacts = jObj.getJSONArray("get");
                for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);
                    if(!c.isNull("rname"))// || c.getString("rcode").equals(null))
                    {
                        rname = c.getString("rname");
                        rcode = c.getString("rcode");
                        radapter.insert(rcode, rname);
                    }
                    else
                    {
                        rname = "";
                        rcode = c.getString("rcode");
                        radapter.insert(rcode, rname);
                    }
                }
                Toast.makeText(getBaseContext(), " Ryot BackUp completed", Toast.LENGTH_SHORT).show();

            } catch (JSONException e) {
                Toast.makeText(getBaseContext(), "Error"+e.toString(), Toast.LENGTH_LONG).show();
            }
                   progressDialog.dismiss();
               }
            }.start();
            adapter.deleteAll();
            oadapter.deleteAll();
            e2.setText("Back Up completed");
        }
            catch (Exception e) {
               Log.e("tag", e.getMessage());
               }
                   progressDialog.dismiss();
               }
            }.start();
       }

   }); 
```

当我运行我的应用程序时，进度条仅显示几秒钟并执行 Catch 块，将 logcat 错误显示为

日志猫：

```
02-26 14:26:07.151: E/tag(301): Can't create handler inside thread that has not called Looper.prepare() 
```

有人可以解释我的代码中的错误是什么以及如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:07:14.183

```
Toast.makeText(getBaseContext(), " Ryot BackUp completed", Toast.LENGTH_SHORT).show(); 
```

问题是由上面的代码引起的，这个方法会改变UI，你不能在非ui线程中更新UI。所以你需要从主 ui 线程调用它。

由于这是一项耗时的工作，我强烈建议您在 Android中使用[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)

但是，如果您只想对现有代码进行一些更改，请尝试使用

```
context.runOnUiThread(new Runnable() {
  public void run() {
    Toast.makeText(...).show();
  }
}); 
```

或处理程序，您可以查看[Android 中处理程序的工作原理](https://stackoverflow.com/questions/14601730/how-handler-classes-work-in-android/14601968#14601968)。一个基本的例子：

```
public Handler mHandler = new Handler() {

    public void handleMessage(Message msg) {
           //show toast here
    }
}

protected void startLongRunningOperation() {

    Thread t = new Thread() {
        public void run() {
            //do something here
            //update the result
            mHandler.postDelayed(mUpdateResults, 200);}
            mHandler.post(mUpdateResults);
        }
    };
    t.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:10:58.020

而不是创建一个新线程，而是创建一个 HandlerThread - [http://developer.android.com/reference/android/os/HandlerThread.html](http://developer.android.com/reference/android/os/HandlerThread.html)

只需将“new Thread()”替换为“new HandlerThread(“any string”)”就可以了。

# clojure - clojure.lang.RT 线程安全？

> ID：15084969
> 
> 赞同：1
> 
> 时间：2013-02-26T09:00:54.263
> 
> 标签：clojure

我正在使用**clojure.lang.RT**（使用 clojure-1.4.0.jar）在运行时评估应用程序最终用户提供的一些脚本，执行以下操作：

```
return (Boolean) RT.var("clojure.core", "eval").invoke(RT.var("clojure.core", "read-string").invoke(script)) 
```

... 和：

```
IFn fn = (IFn) RT.var("clojure.core", "eval").invoke(RT.var("clojure.core", "read-string").invoke(script)) 
```

鉴于**var**方法是静态的，我可以假设**clojure.lang.RT** API 的上述使用是线程安全的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:49:16.140

对 RT.var 的调用与您正在调用的脚本一样是线程安全的。如果您运行两个脚本，每个脚本都通过调用更改了一些 var，`def`或者`defn`这两个脚本可能会获得相互不一致的 var 内容视图。总的来说，这很可能是安全的。

# excel - 需要从一张纸搜索到另一张纸的特定值

> ID：15084971
> 
> 赞同：0
> 
> 时间：2013-02-26T09:01:04.397
> 
> 标签：excel, search, conditional

我正在使用 Excel 2010。我需要以下建议或提示：

我有 2 个电子表格。SheetA 每天都会更换为有关磁盘使用情况的不断变化的数据。SheetB 是我需要每天发送的一份报告，其中包含磁盘使用情况等。

我需要来自 SheetB 中的 SheetA 的特定服务器的磁盘使用量及其磁盘。

有很多方法可以做到这一点，它们都非常好用。但！它们都使用基于行号和列号的公式。有问题！SheetA 中的行号不固定。磁盘定期添加和删除，使我的报告变得困难。所以定义一个范围是没有选择的。

工作表 A 中的格式如下所示：

```
  A B C D
1台服务器1 C：5000 1250  
2 服务器 1 D：10000 500
3 服务器 2 C：1000 900
4 服务器2 E：2000 1900

```

值 C 和 D 代表容量和已用空间在我的 SheetB 中它应该看起来相同。

我想在 SheetA 中搜索“Server1”和“C:”，并在 SheetB 中显示在 A、B、C 和 D 中找到的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:06:18.067

我想您无论如何都需要在 sheet2 的 A&B 列中输入“Server1”和“C:”，所以这里不需要公式。要获得 C 的值，请使用以下公式：

```
=INDEX(Sheet1!C:C,MATCH(A1&B1,Sheet1!$A:$A&Sheet1!$B:$B,0))

```

您需要将公式输入为数组公式，即按`Ctrl`- `Shift`- `enter`。

相应地调整到 D 列。

# extjs - 将系列动态添加到煎茶触摸图表

> ID：15084977
> 
> 赞同：1
> 
> 时间：2013-02-26T09:01:23.387
> 
> 标签：extjs, sencha-touch-2, sencha-charts

我想在一个参数的基础上添加系列，系列的数量将取决于参数，所以我将制作如下系列的数组：

```
for(i=0; i<4;i++)
                            {
                                RA.app.serieschart[i] = {
                                    type: 'line',
                                axis: 'left',
                                //gutter: 80,
                                highlight: true,
                                xField: RA.app.xs[RA.app.currentActivePanelIndex],
                                yField: RA.app.groupByValueBar[i],
                                title:  RA.app.groupByBarLabels[i]
                            };
                                } 
```

我想将此系列数组添加到我的图表中。我正在使用下面的代码，但它没有呈现图形。它仅显示图例标签。

```
createLineChartGroupBy: function(store,chartIndex) {

    RA.app.newChart[RA.app.currentActivePanelIndex] = new Ext.chart.Chart({
        id: 'chart'+RA.app.currentActivePanelIndex,
        store: store,
        renderTo: Ext.getBody(),
        flex: 1,
        shadow: true,
        autoShow: true,
        animate: { duration: RA.app.animateSpeed, delay: 0, easing: 'ease' },
        maxGutter: [10, 10],
        legend: {
            position: 'right',
        },
        axes: [
            {
                type: 'Numeric',
                position: 'left',
                fields:[RA.app.groupByValueBar[0],RA.app.groupByValueBar[1],RA.app.groupByValueBar[2],RA.app.groupByValueBar[3],"others"],
                label: {
                    renderer: Ext.util.Format.numberRenderer('0,0'),
                },
                title: RA.app.ys[RA.app.currentActivePanelIndex],
                minimum: 0,
                maximum: RA.app.Ymax[RA.app.currentActivePanelIndex]
            },
            {
                type: 'Category',
                position: 'bottom',
                fields: RA.app.xs[RA.app.currentActivePanelIndex],
                title: RA.app.xs[RA.app.currentActivePanelIndex]
            }
        ],

        //series: [RA.app.serieschart],
    }); 
         //var oldSeries = RA.app.newChart[RA.app.currentActivePanelIndex].series.pop();
           RA.app.newChart[RA.app.currentActivePanelIndex].setSeries(RA.app.serieschart);
           RA.app.newChart[RA.app.currentActivePanelIndex].setStore(store);
           RA.app.newChart[RA.app.currentActivePanelIndex].getStore().sync();
}, 
```

任何人都知道我在这里犯了什么错误。

# c# - XNA 4.0 中的碰撞检测不准确

> ID：15084978
> 
> 赞同：1
> 
> 时间：2013-02-26T09:01:28.383
> 
> 标签：c#, xna, 2d, collision-detection

我在旋转精灵时尝试使用 XNA 制作的小行星游戏中的 2D 碰撞检测遇到了一些问题。在子弹击中小行星之前（似乎从各个方面），碰撞一直在发生，并且当船撞上小行星时也是不准确的。我使用矩阵旋转飞船发射的子弹，然后使用矩阵旋转小行星，并在 Xbox 独立游戏论坛之一上使用每像素碰撞检测示例。

```
public static bool IntersectPixels(Matrix transformA, int widthA, int heightA, Color[] dataA, Matrix transformB, 
        int widthB, int heightB, Color[] dataB, float rotationA)
    {
        Matrix transformAToB = transformA * Matrix.Invert(transformB);

        Vector2 stepX = Vector2.TransformNormal(Vector2.UnitX, transformAToB);
        Vector2 stepY = Vector2.TransformNormal(Vector2.UnitY, transformAToB);

        Vector2 yPosInB = Vector2.Transform(Vector2.Zero, transformAToB);

        // For each row of pixels in A
        for (int yA = 0; yA < heightA; yA++)
        {
            // Start at the beginning of the row
            Vector2 posInB = yPosInB;

            // For each pixel in this row
            for (int xA = 0; xA < widthA; xA++)
            {
                // Round to the nearest pixel
                int xB = (int)Math.Round(posInB.X);
                int yB = (int)Math.Round(posInB.Y);

                // If the pixel lies within the bounds of B
                if (0 <= xB && xB < widthB &&
                    0 <= yB && yB < heightB)
                {
                    // Get the colors of the overlapping pixels
                    Color colorA = dataA[xA + yA * widthA];
                    Color colorB = dataB[xB + yB * widthB]

                    if (colorA.A != 0 && colorB.A != 0)
                    {
                        return true;
                    }
                }
                // Move to the next pixel in the row
                posInB += stepX;
            }
            // Move to the next row
            yPosInB += stepY;
        }
        // No intersection found
        return false;
    } 
```

这是我的子弹矩阵...原点和位置是子弹的 Vector2 属性

```
 private void UpdateTransform()
    {
        Transform =
                Matrix.CreateTranslation(new Vector3(-Origin, 0.0f)) *
                Matrix.CreateRotationZ((float)(Rotation)) *
                Matrix.CreateTranslation(new Vector3(Position, 0.0f));
    } 
```

还有小行星...

```
 private void UpdateTransform()
    {
        Transform =
                Matrix.CreateTranslation(new Vector3(-Origin, 0.0f)) *
                Matrix.CreateTranslation(new Vector3(Position, 0.0f));
    } 
```

我是编程新手，过去几天我一直在试图弄清楚为什么碰撞检测不准确。我认为矩阵和可能的每像素碰撞检测方法可能会导致问题，但不确定是什么问题。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:45:46.637

像素检测似乎没有考虑碰撞中任一对象的旋转。您应该多研究 Axis Aligned Bounding Boxes (AABB)。定向边界框会以与对象旋转相同的旋转角度旋转其碰撞相交，并且在您的情况下效果更好。

看看 GameDev 上的这篇文章，它有示例代码，可以带你走得更远：

[https://gamedev.stackexchange.com/questions/15191/is-there-a-good-way-to-get-pixel-perfect-collision-detection-in-xna](https://gamedev.stackexchange.com/questions/15191/is-there-a-good-way-to-get-pixel-perfect-collision-detection-in-xna)

# android - 如何仅缩放视图的一半（android动画）

> ID：15084981
> 
> 赞同：1
> 
> 时间：2013-02-26T09:01:34.763
> 
> 标签：android

无论如何只在一半的视图上应用缩放动画吗？我想在视图的左侧应用动画，而右侧保持正常大小。

感谢收看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:34:33.400

如果它是 ImageView，您可以将图像一分为二，只为您感兴趣的一半设置动画。

# java - 将字符串转换为数学表达式？

> ID：15084984
> 
> 赞同：9
> 
> 时间：2013-02-26T09:01:41.863
> 
> 标签：java, parsing, math

假设我有一个这样声明的方法：

```
public double Calc(String expression) {

// Code

} 
```

我想采用类似的字符串表达式

```
"2 + 4 - (3 * 4)" 
```

然后将其提供给它`Calc()`，它应该返回它获得的值。

你能从一个字符串中解析出一个数学表达式，使它成为一个Java可以理解的表达式吗？因为通常你可以写

```
return 2 + 4 - (3 * 4); 
```

但这仅适用于那个单一的表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T10:08:47.007

我建议使用 Dijkstra 的 twostack 算法。

这应该是您所需要的：

```
public class DijkstraTwoStack {
    public static void main(String[] args) {
                Scanner scanner = new Scanner(System.in);
                String exp[] = scanner.nextLine().split(" ");
        Stack<String> ops = new Stack<String>();
        Stack<Double> vals = new Stack<Double>();

        for(int i = 0; i < exp.length; i++) {
                        String s = exp[i];
            if (s.equals("(")) {
            }
            else if (s.equals("+") || s.equals("*")) {
                ops.push(s);
            } else if (s.equals(")")) {
                getComp(ops, vals);
            } else {
                vals.push(Double.parseDouble(s));
            }
        }
        getComp(ops, vals);
        System.out.println(vals.pop());
    }

    private static void getComp(Stack<String> ops, Stack<Double> vals) {
        String op = ops.pop();
        if (op.equals("+")) {
            vals.push(vals.pop() + vals.pop());
        } else if (op.equals("*")) {
            vals.push(vals.pop() * vals.pop());
        }
    }
} 
```

没测试过，但应该是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:28:59.913

让我声明这是一个可以采用的过程，因为我认为虽然浏览了一些关于 SO 的问题，但您应该对如何在不加载 JS 编译器的情况下做到这一点有一个公平的想法。

对于初学者，您需要通过将数学字符串转换为中缀字符串的函数来解析字符串。然后，您基本上通过在循环中分解字符串以返回您的答案来将此表达式评估为另一个函数。可以[在这里找到](http://www.lawrence.edu/fast/greggj/CMSC270/Infix.html)一个精美详细的过程。

# matlab - 如何找到给定矩阵的子矩阵的所有位置？但是不能在图像上相同？

> ID：15084991
> 
> 赞同：0
> 
> 时间：2013-02-26T09:02:05.863
> 
> 标签：matlab

我想存储给定矩阵中子矩阵的所有位置...

例如：给定矩阵：zzz =

```
17    24     1     8    15
23     5     7    14    16
 4     6    13    20    22
10    12    19    21     3
11    18    25     2     9 
```

让我想找到子矩阵的位置：

kkk =

```
 5     7    14    16
 6    13    20    22
12    19    21     3
18    25     2     9 
```

我试过 [i,j] = ind2sub(size(zzz),find(ismember(zzz,kkk)))

我在 i 和 j 矩阵中得到了正确的值。

但是如果这个 'zzz' 被一些 dicom 图像替换并且如果 'kkk' 是那个图像的一小部分，在这种情况下我不会得到理想的 i 和 j 值？？？有人帮我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:06:23.883

您应该根据矩阵尺寸修改您编写的行。例如，如果 DICOM 图像是 3D 矩阵，则：

```
 [i,j,k] = ind2sub(size(zzz),find(ismember(zzz,kkk))) 
```

或者

```
 [i,j] = ind2sub(size(zzz),find(ismember(zzz(:,:,k),kkk))) 
```

可以回答你的问题。

如果它们是 4D 数组，您需要采取相应的行动......

# c - C fread fwrite 在文件的开头

> ID：15084994
> 
> 赞同：-1
> 
> 时间：2013-02-26T09:02:15.700
> 
> 标签：c, fwrite, fread

我想知道是否可以使用`frwite`. 让我更准确地说，我打开一个文件，`fopen`然后我用 write 向它写入一些数据。就在关闭文件之前，我想写一些关于文件内容的摘要。我认为放置此摘要的最佳位置是在文件的开头。因此，当我稍后打开文件时，我可以先阅读摘要，然后再阅读数据。

实际上，我把摘要放在哪里并不重要，只要我在打开文件时可以先阅读它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:10:36.973

如果您询问是否可以使用`fwrite()`,`putc()`等`fprintf()`在非空文件的开头插入信息，答案是否定的，您不能这样做。

您可以覆盖数据或附加数据。

如果要插入，则需要检查您的操作系统 API 以查看是否有特殊功能，如果没有，则需要创建另一个文件，将摘要写入其中，然后写入原始内容文件。另一种选择是手动移动数据以在文件开头释放足够的空间，以便在此处写入摘要。

如果您真的需要，您可以[向后阅读文本文件。](https://stackoverflow.com/questions/14834267/reading-a-text-file-backwards-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:15:22.747

无法在文件之前插入数据（不重写整个文件）。

可以在文件中的任何位置覆盖某些字节*。*为了实现您的需求，原始文件必须保留一些字节（可能在开始时）以供以后覆盖。

```
FILE *f = fopen ("thefile", "r+");  // opens for read and write, positioned at beginning
if (!f)  error_message();
size_t n = fwrite ("newdata", 1, 7, f);  // overwrite first 7 bytes
if (n != 7)  error_message();
fclose (f); 
```

# grails - groovy中Utility类的访问方法

> ID：15084997
> 
> 赞同：0
> 
> 时间：2013-02-26T09:02:30.810
> 
> 标签：grails, groovy

`utility class`是否可以从服务中访问 a 的方法`static method`？我有一个包含方法的实用程序类。我已经测试过这些方法可以在`Service`和中访问`Controller`。

现在，我创建了一个包含静态方法的服务。在该方法中，我试图调用特定实用程序类的方法，但它似乎不起作用。

是否可以在服务的静态方法中调用实用程序类的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:43:30.590

可以从服务层调用另一个类的静态方法。也许您正面临一些与从 Utils 调用该静态方法的主要操作无关的其他问题。

您只需要导入该类。

这里有一些关于 Grails 服务层的信息。

> [http://grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html)

我建议您制作此清单：

*   检查 Utils 类是否构造良好。
*   检查服务层是否正确写入了导入。
*   检查调用 Util 类的这个静态方法的方式。
*   检查您的服务层是否具有以下结构：

    ```
    import org.springframework.transaction.annotation.Transactional
    import com.route.utils.MyUtilClass

    class BookService {

        //Example
        @Transactional(readOnly = true)
        def listBooks() {
            MyUtilClass.myStaticMethod()
            Book.list()
        }

    } 
    ```

拥有您正在使用的 Grails 版本以及调用该方法的服务层的代码示例可能会有所帮助。

# java - google-api-translate-java 检索翻译时出错

> ID：15084999
> 
> 赞同：5
> 
> 时间：2013-02-26T09:02:37.567
> 
> 标签：java, android, google-translate

我在用

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView tv = new TextView(this);

     GoogleAPI.setHttpReferrer("http://code.google.com/p/google-api-translate-java/");
     GoogleAPI.setKey("AIzaSyBi7y4EgC0B-Q9UZg-tOzsOI0sLQ8F1Oow");

        try {
            String translatedText = Translate.DEFAULT.execute("Bonjour le monde", Language.FRENCH, Language.ENGLISH);
        } catch (GoogleAPIException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

} 
```

**我收到以下错误，我不明白我做错了什么**

`02-26 10:53:53.409: W/System.err(2612): com.google.api.GoogleAPIException: java.lang.Exception: [google-api-translate-java] Error retrieving translation. 02-26 10:53:53.409: W/System.err(2612): at com.google.api.translate.TranslateV2.execute(TranslateV2.java:68) 02-26 10:53:53.409: W/System.err(2612): at com.example.testtranslate.Translator.onCreate(Translator.java:32) 02-26 10:53:53.409: W/System.err(2612): at android.app.Activity.performCreate(Activity.java:5158) 02-26 10:53:53.409: W/System.err(2612): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 02-26 10:53:53.409: W/System.err(2612): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2148) 02-26 10:53:53.409: W/System.err(2612): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2211) 02-26 10:53:53.410: W/System.err(2612): at android.app.ActivityThread.access$600(ActivityThread.java:149) 02-26 10:53:53.410: W/System.err(2612): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1300) 02-26 10:53:53.411: W/System.err(2612): at android.os.Handler.dispatchMessage(Handler.java:99) 02-26 10:53:53.411: W/System.err(2612): at android.os.Looper.loop(Looper.java:153) 02-26 10:53:53.411: W/System.err(2612): at android.app.ActivityThread.main(ActivityThread.java:5086) 02-26 10:53:53.412: W/System.err(2612): at java.lang.reflect.Method.invokeNative(Native Method) 02-26 10:53:53.412: W/System.err(2612): at java.lang.reflect.Method.invoke(Method.java:511) 02-26 10:53:53.412: W/System.err(2612): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:821) 02-26 10:53:53.413: W/System.err(2612): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584) 02-26 10:53:53.413: W/System.err(2612): at dalvik.system.NativeStart.main(Native Method) 02-26 10:53:53.413: W/System.err(2612): Caused by: java.lang.Exception: [google-api-translate-java] Error retrieving translation. 02-26 10:53:53.414: W/System.err(2612): at com.google.api.GoogleAPI.retrieveJSON(GoogleAPI.java:99) 02-26 10:53:53.414: W/System.err(2612): at com.google.api.translate.TranslateV2.execute(TranslateV2.java:62) 02-26 10:53:53.416: W/System.err(2612): ... 15 more 02-26 10:53:53.416: W/System.err(2612): Caused by: java.lang.NullPointerException 02-26 10:53:53.418: W/System.err(2612): at libcore.net.http.HttpEngine.writeRequestHeaders(HttpEngine.java:647) 02-26 10:53:53.418: W/System.err(2612): at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:801) 02-26 10:53:53.419: W/System.err(2612): at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:293) 02-26 10:53:53.419: W/System.err(2612): at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:185) 02-26 10:53:53.420: W/System.err(2612): at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271) 02-26 10:53:53.420: W/System.err(2612): at com.google.api.GoogleAPI.retrieveJSON(GoogleAPI.java:93) 02-26 10:53:53.420: W/System.err(2612): ... 16 more`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T12:05:36.483

需要将引荐来源网址设置为您从中发送请求的应用程序 URL。

[https://developers.google.com/console/help/new/](https://developers.google.com/console/help/new/)

这几乎总是一个访问配置问题。尝试查看请求的 URL 的响应。响应将类似于：

> { "error": { "errors": [ { "domain": "usageLimits", "reason": "accessNotConfigured", "message": "访问未配置。请使用 Google Developers Console 为您的项目激活 API。 " } ], "code": 403, "message": "Access Not Configured. 请使用 Google Developers Console 为您的项目激活 API。" } }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T09:16:11.513

您可能忘记授予权限：

只需要将它添加到我的清单中：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T18:56:21.030

您必须从 API 控制台中项目的服务选项卡启用翻译 API。

此页面包含所有定价详细信息：[https ://developers.google.com/translate/v2/pricing](https://developers.google.com/translate/v2/pricing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T11:35:16.693

这种方法对我完全不起作用，所以我决定改用 Web API。这是我的代码：

```
package your.package.name;

import android.util.Log;

import com.google.api.translate.Language;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONObject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URLEncoder;

/**
 * Created by nick hargreaves on 4/23/15.
 */

public class GTranslate {

    public static String GOOGLE_API_KEY = "your api key";

    public static String translatedText(String text, Language lTranslated, Language lOriginal){

        if(lTranslated.equals(lOriginal))
            return text;

        text = URLEncoder.encode(text);

        String translatedText = "";

        String sOriginal = findLanguageCode(lOriginal.name());

        String sTranslated = findLanguageCode(lTranslated.name());

        String requestURL = "https://www.googleapis.com/language/translate/v2?key="+ GOOGLE_API_KEY+"&q="+text+"&source="+sOriginal+"&target=" + sTranslated;

        String readJSON = getJSON(requestURL);

        try{
            JSONObject jsonObject = new JSONObject(readJSON).getJSONObject("data");

            jsonObject = jsonObject.getJSONArray("translations").getJSONObject(0);

            translatedText = jsonObject.getString("translatedText");

        } catch(Exception e){e.printStackTrace();}
        finally{System.out.println("Success");}

        return translatedText;
    }

    public static String getJSON(String address){
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(address);
        try{
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if(statusCode == 200){
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while((line = reader.readLine()) != null){
                    builder.append(line);
                }
            } else {
                Log.e("JSON error", "Failed to get JSON object");
            }
        }catch(ClientProtocolException e){
            e.printStackTrace();
        } catch (IOException e){
            e.printStackTrace();
        }
        return builder.toString();
    }

    public static String findLanguageCode(String language){
        String languageShort = "en";

        if(language=="AFRIKAANS"){
            languageShort="af";
        }
        if(language=="ALBANIAN"){
            languageShort="sq";
        }
        if(language=="ARABIC"){
            languageShort="ar";
        }
        if(language=="AZERBAIJANI"){
            languageShort="az";
        }
        if(language=="BASQUE"){
            languageShort="eu";
        }
        if(language=="BENGALI"){
            languageShort="bn";
        }
        if(language=="BELARUSIAN"){
            languageShort="be";
        }
        if(language=="BULGARIAN"){
            languageShort="bg";
        }
        if(language=="CATALAN"){
            languageShort="ca";
        }
        if(language=="CHINESE SIMPLIFIED"){
            languageShort="zh-CN";
        }
        if(language=="CHINESE TRADITIONAL"){
            languageShort="zh-TW";
        }
        if(language=="CROATIAN"){
            languageShort="hr";
        }
        if(language=="CZECH"){
            languageShort="cs";
        }
        if(language=="DANISH"){
            languageShort="da";
        }
        if(language=="DUTCH"){
            languageShort="nl";
        }
        if(language=="ENGLISH"){
            languageShort="en";
        }
        if(language=="ESPERANTO"){
            languageShort="eo";
        }
        if(language=="ESTONIAN"){
            languageShort="et";
        }
        if(language=="FILIPINO"){
            languageShort="tl";
        }
        if(language=="FINNISH"){
            languageShort="fi";
        }
        if(language=="FRENCH"){
            languageShort="fr";
        }
        if(language=="GALICIAN"){
            languageShort="gl";
        }
        if(language=="GEORGIAN"){
            languageShort="ka";
        }
        if(language=="GERMAN"){
            languageShort="de";
        }
        if(language=="GREEK"){
            languageShort="el";
        }
        if(language=="GUJARATI"){
            languageShort="gu";
        }
        if(language=="HAITIAN CREOLE"){
            languageShort="ht";
        }
        if(language=="HEBREW"){
            languageShort="iw";
        }
        if(language=="HINDI"){
            languageShort="hi";
        }
        if(language=="HUNGARIAN"){
            languageShort="hu";
        }
        if(language=="ICELANDIC"){
            languageShort="is";
        }
        if(language=="INDONESIAN"){
            languageShort="id";
        }
        if(language=="IRISH"){
            languageShort="ga";
        }
        if(language=="ITALIAN"){
            languageShort="it";
        }
        if(language=="JAPANESE"){
            languageShort="ja";
        }
        if(language=="KANNADA"){
            languageShort="kn";
        }
        if(language=="KOREAN"){
            languageShort="ko";
        }
        if(language=="LATIN"){
            languageShort="la";
        }
        if(language=="LATVIAN"){
            languageShort="lv";
        }
        if(language=="LITHUANIAN"){
            languageShort="lt";
        }
        if(language=="MACEDONIAN"){
            languageShort="mk";
        }
        if(language=="MALAY"){
            languageShort="ms";
        }
        if(language=="MALTESE"){
            languageShort="mt";
        }
        if(language=="NORWEGIAN"){
            languageShort="no";
        }
        if(language=="PERSIAN"){
            languageShort="fa";
        }
        if(language=="POLISH"){
            languageShort="pl";
        }
        if(language=="PORTUGUESE"){
            languageShort="pt";
        }
        if(language=="ROMANIAN"){
            languageShort="ro";
        }
        if(language=="RUSSIAN"){
            languageShort="ru";
        }
        if(language=="SERBIAN"){
            languageShort="sr";
        }
        if(language=="SLOVAK"){
            languageShort="sk";
        }
        if(language=="SLOVENIAN"){
            languageShort="sl";
        }
        if(language=="SPANISH"){
            languageShort="es";
        }
        if(language=="SWAHILI"){
            languageShort="sw";
        }
        if(language=="SWEDISH"){
            languageShort="sv";
        }
        if(language=="TAMIL"){
            languageShort="ta";
        }
        if(language=="TELUGU"){
            languageShort="te";
        }
        if(language=="THAI"){
            languageShort="th";
        }
        if(language=="TURKISH"){
            languageShort="tr";
        }
        if(language=="UKRAINIAN"){
            languageShort="uk";
        }
        if(language=="URDU"){
            languageShort="ur";
        }
        if(language=="VIETNAMESE"){
            languageShort="vi";
        }
        if(language=="WELSH"){
            languageShort="cy";
        }
        if(language=="YIDDISH"){
            languageShort="yi";
        }

        return languageShort;
    }

} 
```

然后这样称呼它：

```
import com.google.api.translate.Language;
import com.your.package.name.GTranslate; 
```

...

```
String translatedText = GTranslate.translatedText("Some text I want to translate Russian", Language.RUSSIAN, Language.ENGLISH); 
```