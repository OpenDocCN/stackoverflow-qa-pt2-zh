# StackOverflow 问答 13005000-13005999

# java - 以编程方式添加 Java 代码模板

> ID：13005003
> 
> 赞同：7
> 
> 时间：2012-10-22T04:32:25.723
> 
> 标签：java, eclipse, eclipse-plugin

我喜欢 Eclipse 让我使用 Tab 键在方法调用中的参数之间跳转。我希望我的插件提供类似的功能。准确地说，我正在向编辑器中注入一些文本，我想突出显示特定的语法并让程序员使用 Tab 键跳转到下一个匹配项。

这是一个例子。假设我动态创建了以下代码段：

```
String a = "bogus string";
int i = a.[?] 
```

我将把它注入到编辑器中，我希望它`[?]`被突出显示并准备好进行修改（用户可以键入`length()`）。此外，如果有更多`[?]`片段，我希望用户使用 Tab 移动到下一个。

经过一番研究，我发现可以使用[模板](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/editors/text/templates/package-summary.html)来完成。但是，我在网上找不到任何相关示例。有人有这方面的经验吗？

**更新：**

我发现了两个可能有用的链接，尽管我仍然无法提出解决方案。

[链接一](https://stackoverflow.com/questions/442138/eclipse-accessing-a-editor-template-from-plugin-code?rq=1)

[链接二](https://stackoverflow.com/questions/505389/how-do-i-update-an-eclipse-template-variable-on-the-fly?rq=1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T04:12:36.137

示例处理程序代码：

```
AbstractTextEditor activeEditor = 
        (AbstractTextEditor) HandlerUtil.getActiveEditor(event);

ISourceViewer sourceViewer = 
        (ISourceViewer) activeEditor.getAdapter(ITextOperationTarget.class);

Point range = sourceViewer.getSelectedRange();

// You can generate template dynamically here!
Template template = new Template("sample", 
        "sample description", 
        "no-context", 
        "private void ${name}(){\r\n" + 
        "\tSystem.out.println(\"${name}\")\r\n"
        + "}\r\n", true);

IRegion region = new Region(range.x, range.y);
TemplateContextType contextType = new TemplateContextType("test");
TemplateContext ctx =
    new DocumentTemplateContext(contextType, 
        sourceViewer.getDocument(), 
        range.x, 
        range.y);

TemplateProposal proposal 
    = new TemplateProposal(template, ctx, region, null);

proposal.apply(sourceViewer, (char) 0, 0, 0); 
```

结果：

![在此处输入图像描述](../Images/1ffa31faf22b561bcd247e81b7b90c75.png)

我建议你使用`org.eclipse.jdt.ui.javaCompletionProposalComputer`扩展。它允许您以更合法的方式贡献模板。

`ISourceViewer`在我的代码中，由于无法合法获得，因此存在黑客攻击。我知道`ISourceViewer`它`ITextTargetOperation`本身，但它不是 API（非法铸造）。并且模板旨在供`TemplateCompletionProcessor`or使用`TemplateCompletionProposalComputer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T02:55:48.173

我不完全确定你想要什么，但你可以用模板做你想做的事。

例如，打开一个 java 编辑器，将光标放在一个方法中，`arraya`然后键入 ctlr-space，然后从弹出菜单中选择 arrayadd。您将获得一个突出显示字符串的模板，按制表符跳转到下一个变量。模板源码可见，

首选项 -> java -> 编辑器 -> 模板

```
${array_type}[] ${result:newName(array)} = new ${array_type}[${array}.length + 1];
System.arraycopy(${array}, 0, ${result}, 0, ${array}.length);
${result}[${array}.length]= ${var}; 
```

以 $ 开头的所有内容都是您可以填写的变量，您可以在填写模板时在变量之间切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T11:31:59.987

我的回答是基于 jeeeyul 的回答。不同之处在于，我不仅想要模板本身，还想要导入以使其自动解析和添加。这可以通过以下方式完成，使用 JDT 的东西：

```
AbstractTextEditor activeEditor = 
            (AbstractTextEditor) HandlerUtil.getActiveEditor(event);
    if (activeEditor == null) {
        return null;
    }
    ITypeRoot element = EditorUtility.getEditorInputJavaElement(activeEditor, true);
    if (element == null) {
        return null;
    }
    ICompilationUnit unit = element.getAdapter(ICompilationUnit.class);
    if (unit == null) {
        return null;
    }
    ISourceViewer sourceViewer = (ISourceViewer) activeEditor.getAdapter(ITextOperationTarget.class);
    Point range = sourceViewer.getSelectedRange();
    // You can generate template dynamically here!
    Template template = new Template("new List", "Add new list creation", JavaContextType.ID_STATEMENTS,
            "List<${type}> ${name:newName(java.util.List)} = new ArrayList<${type}>();${:import(java.util.List, java.util.ArrayList)}",
            true);
    IRegion region = new Region(range.x, range.y);
    JavaContextType contextType = new JavaContextType();
    contextType.setId(JavaContextType.ID_STATEMENTS); //Set context type, for which we apply this template
    contextType.addResolver(new ImportsResolver("import","import")); //Add imports resolver if we want imports to be added automatically for some template
    CompilationUnitContext ctx = new JavaContext(contextType, sourceViewer.getDocument(), range.x,
            range.y, unit);
    TemplateProposal proposal = new TemplateProposal(template, ctx, region, null);
    proposal.apply(sourceViewer, (char) 0, 0, 0); 
```

# iphone - iphone的动态图标更改

> ID：13005007
> 
> 赞同：5
> 
> 时间：2012-10-22T04:33:10.183
> 
> 标签：iphone, ios, ipad, icons

**我的问题也和其他人之前问的一样。**

我发现一旦为应用程序设置了图标，我们就无法动态更改**应用程序图标**。是的，我同意了。如果是这样，我们使用动态图标 Apple 不接受。但我接受苹果有一些规则和规定。

**所以这是我的问题：**如何动态更改应用程序图标。我不会将我的应用程序放在 AppStore 中。

每个人都说这是不可能的。我不担心苹果规则。但是，是的，担心答案。

任何人，只要指导我这样做，不要告诉我“你不能”。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T05:04:20.590

## iOS 10.3+

在 iOS 10.3 中引入了一个名为[setAlternateIconName:](https://developer.apple.com/documentation/uikit/uiapplication/2806818-setalternateiconname)的方法，您可以通过该方法更改应用程序的图标，但是这些图标应该是预定义的。这意味着应该将图标添加到应用程序的包中并在`info.plist`.

### 例子：

典型的 info.plist 如下所示：

```
<key>CFBundleIcons</key>
<dict>
    <key>CFBundleAlternateIcons</key>
    <dict>
        <key>alternate_icon_name</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>alternate_icon_file</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>default_icon_file</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <false/>
        </dict>
    </dict>
</dict> 
```

实现如下代码：

**目标 C：**

```
[[UIApplication sharedApplication] setAlternateIconName:@"alternate_icon_name" completionHandler:^(NSError * _Nullable error) {
    NSLog(@"Error...");
}]; 
```

**斯威夫特 3：**

```
if UIApplication.shared.supportsAlternateIcons
{
    UIApplication.shared.setAlternateIconName("alternate_icon_name", completionHandler: { (error) in
        print(error ?? "")
    })
} 
```

* * *

## iOS 10.3 之前

您不能动态更改图标文件，因为图标文件名存储在**应用程序 plist**中。

![应用清单](../Images/2b6f23da49c7bb056c582ff10bef06d2.png).

您不能动态更改应用程序 plist，因为它存储在**readonly**的应用程序包中。

所以你的要求是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:12:50.850

一种方法是以`icon.png`编程方式重写文件。您需要搜索允许访问您的应用资源文件系统的私有 API

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T05:51:03.227

在 iOS 8 之前，我尝试了一种至少给我一次正面结果的方法：

将 icon.png 设置为 ../Documents/icon.png 的链接

但是您需要强制要求 Springboard 重新下载已安装应用程序的图标（导致 Springboard 缓存它们）

由于 iOS 8 这种方式不起作用导致 Documents 文件夹被移动到动态路径。

所以你应该想办法从 bundle 中更新 readonly icon.png。

对于安装到 /Applications/（通过 Cydia）的应用程序 - 可以这样做。

对于通过 adhoc 安装的应用程序 - 无法更新 readonly icon.png （据我所知）

# sql - 在 Rails 中编写查询时查找空值

> ID：13005008
> 
> 赞同：1
> 
> 时间：2012-10-22T04:33:33.240
> 
> 标签：sql, ruby-on-rails, sqlite, postgresql

我刚刚编写了以下查询并得到了一个（对我来说）惊喜的结果；

```
Customer.where("satisfaction != ?","Very satisfied") 
```

这返回的值比我预期的要少得多，原因是我的满意度列的数据库中的空值。要获得我想要的记录，我必须编写以下查询

```
Customer.where("satisfaction != ? or satisfaction is null","Very satisfied") 
```

这可行，但它很丑，我希望有更好的方法（特别是因为我计划动态生成这些查询，所以我希望它们尽可能简单）。是否存在将空值与不相等值结合在一起的运算符？

我的数据库是开发中的 SQLite3 和生产中的 Postgresql。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:48:02.117

在 PostgreSQL 中，您可以使用[IS DISTINCT FROM](http://www.postgresql.org/docs/current/static/functions-comparison.html)来解决常见的 NULL 问题：

```
Customer.where('satisfaction is distinct from ?', 'Very satisfied') 
```

在 SQLite 中，我认为您坚持使用显式 IS NULL 检查或同样丑陋的 COALESCE：

```
Customer.where("coalesce(satisfaction, '') != ?", 'Very satisfied') 
```

COALESCE 计算为它的第一个非 NULL 参数，并且可以在 SQLite 和 PostgreSQL 中工作；您可以使用与您不匹配的任何内容来`'Very satisfied'`代替空字符串。

当您在 PostgreSQL 上进行部署时，我强烈建议您停止在 SQLite 上进行开发。当 SQLite 对 SQL 的松懈解释与 PostgreSQL 更严格的解释发生冲突时，您只是在生产服务器上要求一个糟糕的时间。不要对自己这样做，使用相同的数据库进行开发和部署（其中*相同*的包括版本号）。

您可能还想重新访问您的架构以查看是否可以将 NOT NULL 约束添加到您的`satisfaction`列。一个显式的`'Unknown'`字符串也可以起到同样的作用，并且可以避免通常的 NULL 废话。我倾向于手动将所有内容默认为 NOT NULL，并且仅在可以证明其合理性的情况下才允许使用 NULL。

# android - android应用程序屏幕在启动时闪烁

> ID：13005010
> 
> 赞同：15
> 
> 时间：2012-10-22T04:33:37.313
> 
> 标签：android, screen, android-4.0-ice-cream-sandwich, launching-application

嗨，我在这里和谷歌上到处搜索，没有得到正确的答案。所以我发布了一个新问题：

我有几个与 1.6 到 2.3 完美配合的 Android 应用程序......

但是现在，使用 Android 4.0 (ICS)，我有用户报告说，当应用程序启动时，主页上的屏幕正在闪烁，除了“主页”和强制停止应用程序之外什么都做不了......（然后。你可以开始再次应用该应用程序，它最终可以工作...：O）

我已经在模拟器和包括带有 Android 4.0.4 的 Galaxy S 3 在内的多个设备上测试了该应用程序，但我永远无法重现该问题！:(( 看来问题主要出在 HTC One 上...

这是活动的简单代码

```
public class WelcomePage extends Activity {

/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Eula.show(this);
    //on lui associe le layout 
    setContentView(R.layout.main);

    //on récupère tous les éléments
    Button buttonGuide = (Button)findViewById(R.id.buttonOui);
    Button buttonHotel = (Button)findViewById(R.id.buttonNon);
    Button buttonMap = (Button)findViewById(R.id.buttonMapg);
    Button buttonMaps = (Button)findViewById(R.id.buttonMaps);
    Button buttonMapb = (Button)findViewById(R.id.buttonMapb);
    Button buttonTwitt = (Button)findViewById(R.id.buttonTwitt);
    Button buttonFaceb = (Button)findViewById(R.id.buttonFaceb);
    Button buttonGoogle = (Button)findViewById(R.id.buttonGoogle);
    Button buttonGeoloc = (Button)findViewById(R.id.buttonGeoloc);

    OnClickListener onClickLister = new OnClickListener() {

        public void onClick(View v){
            Intent intent;
            switch(v.getId()){
            //si on a cliqué sur le button Oui
            case R.id.buttonOui:
                Bundle objetbunble = new Bundle();
                objetbunble.putString("titre", "Phuket");
                String lurl;
                if (getString(R.string.lnguserlook).equals("en")) { lurl = "phuketen"; } else { lurl = "phuket"; }
                objetbunble.putString("url", lurl);
                intent = new Intent(WelcomePage.this, AfficheGuide.class);
                Toast.makeText(WelcomePage.this, getString(R.string.titguid)+" Phuket "+getString(R.string.titguid2), Toast.LENGTH_SHORT).show();
                ((MyApplication)getApplicationContext()).setIsPagehelp(false);  // pas Help en globale
                //On affecte à l'Intent le Bundle que l'on a créé
                intent.putExtras(objetbunble);
                startActivity(intent);
                break;
            case R.id.buttonNon:
              Toast.makeText(WelcomePage.this, getString(R.string.hotellist), Toast.LENGTH_SHORT).show();
                //On créé l'Intent qui va nous permettre d'afficher l'autre Activity
                intent = new Intent(WelcomePage.this, ListeDestinationAll.class);
                startActivity(intent);
                break;
            case R.id.buttonGeoloc:
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else {  Toast.makeText(WelcomePage.this, "Geolocalisation", Toast.LENGTH_SHORT).show();
                        intent = new Intent(WelcomePage.this, AfficheGeoloc.class);
                        startActivity(intent); 
                }
                break;
            case R.id.buttonMapg:
                Toast.makeText(getApplicationContext(), getString(R.string.map1), Toast.LENGTH_SHORT).show();
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else { 
                        Toast.makeText(WelcomePage.this, "Phuket", Toast.LENGTH_SHORT).show();
                        objetbunble = new Bundle();
                        //Cela fonctionne plus ou moins comme une HashMap, on entre une clef et sa valeur en face
                        objetbunble.putString("titre", "Phuket");
                        objetbunble.putString("url", "phuket&titre=Phuket");
                        intent = new Intent(WelcomePage.this, AfficheMaps.class);
                        //On affecte à l'Intent le Bundle que l'on a créé
                        intent.putExtras(objetbunble);
                        startActivity(intent); 
                }
                break;
            case R.id.buttonMaps:
                Toast.makeText(getApplicationContext(), getString(R.string.map2), Toast.LENGTH_SHORT).show();
                Bundle objetbunblemap = new Bundle();
                objetbunblemap.putString("titre", getString(R.string.map2));
                objetbunblemap.putString("url", "pic");
                final Intent intentm;
                intentm = new Intent(WelcomePage.this, ImageViewerJP.class); 
                intentm.putExtras(objetbunblemap);
                startActivity(intentm);
                break;
            case R.id.buttonMapb:
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else {  //On créé un objet Bundle, c'est ce qui va nous permetre d'envoyer des données à l'autre Activity
                    objetbunble = new Bundle();
                    objetbunble.putString("titre", getString(R.string.titevent3)+" Phuket");
                    objetbunble.putString("url", getString(R.string.urlevent2)+"phuket");
                    intent = new Intent(WelcomePage.this, AfficheEvents.class);
                    Toast.makeText(WelcomePage.this, getString(R.string.titevent3)+" Phuket", Toast.LENGTH_SHORT).show();
                    //On affecte à l'Intent le Bundle que l'on a créé
                    intent.putExtras(objetbunble);
                    startActivity(intent);
                }
                break;
            case R.id.buttonTwitt:
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else { Toast.makeText(WelcomePage.this, "Twitter", Toast.LENGTH_SHORT).show();
                    //On créé l'Intent qui va nous permettre d'afficher l'autre Activity
                    intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse("http://mobile.twitter.com/#!/ResaHotelThai"));
                    startActivity(intent);
                }
                break;
            case R.id.buttonGoogle:
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else { Toast.makeText(WelcomePage.this, "Google+", Toast.LENGTH_SHORT).show();
                    //On créé l'Intent qui va nous permettre d'afficher l'autre Activity
                    intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse("https://plus.google.com/114371498756127408275/posts"));
                    startActivity(intent);
                }
                break;
            case R.id.buttonFaceb:
                if (!(Extras.Internet.isOnline())){ 
                    AlertDialog.Builder builder = new AlertDialog.Builder(WelcomePage.this);
                    builder.setMessage(getString(R.string.txtoffline))
                           .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {
                                    dialog.cancel();
                               }
                           }).create().show(); }        
                else { Toast.makeText(WelcomePage.this, "Facebook", Toast.LENGTH_SHORT).show();
                    //On créé l'Intent qui va nous permettre d'afficher l'autre Activity
                    intent = new Intent(Intent.ACTION_VIEW);
                    intent.setData(Uri.parse("http://m.facebook.com/ResaHotelThai"));
                    startActivity(intent);
                }
                break;
            }
        }

    };

    //on affecte aux Button l'écouteur d'évènement
    buttonGuide.setOnClickListener(onClickLister);
    buttonHotel.setOnClickListener(onClickLister); 
    buttonMap.setOnClickListener(onClickLister); 
    buttonMaps.setOnClickListener(onClickLister); 
    buttonMapb.setOnClickListener(onClickLister); 
    buttonTwitt.setOnClickListener(onClickLister); 
    buttonFaceb.setOnClickListener(onClickLister); 
    buttonGoogle.setOnClickListener(onClickLister);
    buttonGeoloc.setOnClickListener(onClickLister);
}

//Méthode qui se déclenchera lorsque vous appuierez sur le bouton menu du téléphone
public boolean onCreateOptionsMenu(Menu menu) {

    //Création d'un MenuInflater qui va permettre d'instancier un Menu XML en un objet Menu
    MenuInflater inflater = getMenuInflater();
    //Instanciation du menu XML spécifier en un objet Menu
    inflater.inflate(R.layout.menu, menu);

    //Il n'est pas possible de modifier l'icône d'entête du sous-menu via le fichier XML on le fait donc en JAVA
    menu.getItem(0).getSubMenu().setHeaderIcon(R.drawable.language);

    return true;
 }

//Méthode qui se déclenchera au clic sur un item
public boolean onOptionsItemSelected(MenuItem item) {
      Intent intent;
     //On regarde quel item a été cliqué grâce à son id et on déclenche une action
     switch (item.getItemId()) {
        case R.id.option:
           Toast.makeText(WelcomePage.this, getString(R.string.language), Toast.LENGTH_SHORT).show();
           return true;
        case R.id.french:
            Locale locale = new Locale("fr"); 
            Locale.setDefault(locale);
            Configuration config = new Configuration();
            config.locale = locale;
            getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
            ((MyApplication)getApplicationContext()).setState("fr");    // passe langue en globale
            Toast.makeText(WelcomePage.this, "Français", Toast.LENGTH_SHORT).show();
            intent = new Intent(WelcomePage.this, WelcomePage.class);
            //On redémarre l'Activity
            startActivity(intent);
            finish();
            return true;
        case R.id.english:
            Locale locale2 = new Locale("en"); 
            Locale.setDefault(locale2);
            Configuration config2 = new Configuration();
            config2.locale = locale2;
            getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics());
            ((MyApplication)getApplicationContext()).setState("en");    // passe langue en globale
            Toast.makeText(WelcomePage.this, "English", Toast.LENGTH_SHORT).show();
            intent = new Intent(WelcomePage.this, WelcomePage.class);
            //On redémarre l'Activity
            startActivity(intent);
            finish();
            return true;
       case R.id.about:
            // Assigne un Layout particulier a la dialogue Box
            LayoutInflater inflater = (LayoutInflater) WelcomePage.this.getSystemService(LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.afficheabout,
                                           (ViewGroup) findViewById(R.id.layout_root));
            // Traitement du texte a afficher + linkify pour que le lien soit cliquable
            TextView text = (TextView) layout.findViewById(R.id.text);
            final SpannableString s = new SpannableString("Version 1.1.0\n\n\nwww.bloodico.com\n\nCopyright ©2011/2012\nBloodico Co Ltd");
            text.setText(s);
            Linkify.addLinks(text, Linkify.ALL);
            // Traitement de l'image a afficher a gauche
            ImageView image = (ImageView) layout.findViewById(R.id.image);
            image.setImageResource(R.drawable.sawadi);
            // Construction de la dialogbox
            AlertDialog.Builder adb = new AlertDialog.Builder(WelcomePage.this);
            adb.setView(layout);
            adb.setTitle("GuidePhuket");
            adb.setIcon(R.drawable.ic_launcher);
            //on indique que l'on veut le bouton ok à notre boite de dialogue
            adb.setPositiveButton("Ok", null);
            adb.show();
           return true;
        case R.id.help:
           Toast.makeText(WelcomePage.this, getString(R.string.helptitle), Toast.LENGTH_SHORT).show();
            //On créé un objet Bundle, c'est ce qui va nous permetre d'envoyer des données à l'autre Activity
            Bundle objetbunble = new Bundle();

            //Cela fonctionne plus ou moins comme une HashMap, on entre une clef et sa valeur en face
            objetbunble.putString("titre", getString(R.string.helptitle));
            objetbunble.putString("url", getString(R.string.helpurl));
            intent = new Intent(WelcomePage.this, AfficheGuide.class);
            //On affecte à l'Intent le Bundle que l'on a créé
            intent.putExtras(objetbunble);
                startActivity(intent);
           return true;
        case R.id.morapp:
            Toast.makeText(WelcomePage.this, getString(R.string.morapp), Toast.LENGTH_SHORT).show();
           Intent marketIntent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse("market://search?q=pub:Bloodico+Co+Ltd"));
           startActivity(marketIntent);
           return true;
      }
      return super.onOptionsItemSelected(item);
  } 
```

}

这是使用的布局

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:background="@drawable/fond"
>
  <ImageView  android:id="@+id/imageintro"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/logocompanyfr"
    android:gravity="center_horizontal"
    android:contentDescription="@string/app_name"
    />

        <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:layout_marginTop="20dp"
      >
      <Button android:id="@+id/buttonOui"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titreguidebutton" />

     <Button android:id="@+id/buttonNon"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titrehotelbutton" />

      <Button android:id="@+id/buttonGeoloc"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/titregeolocbutton" />

    </LinearLayout>

    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:paddingTop="5dp"
      >
     <Button android:id="@+id/buttonMapg"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titreinfobutton" />

      <Button android:id="@+id/buttonMaps"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titremapsbutton" />

      <Button android:id="@+id/buttonMapb"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/titremapbbutton" />

    </LinearLayout>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="100dp"
        android:orientation="horizontal" >

      <Button android:id="@+id/buttonFaceb"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titrefacebbutton" />

      <Button android:id="@+id/buttonTwitt"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="20dp"
        android:background="@drawable/titretwittbutton" />

      <Button android:id="@+id/buttonGoogle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/titregooglebutton" />
    </LinearLayout>

</LinearLayout> 
```

这是清单文件的摘录

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<supports-screens android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true" />
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:name=".MyApplication" android:allowBackup="true" android:screenOrientation="portrait">
    <activity android:name=".WelcomePage" 
              android:screenOrientation="portrait"                
              android:label="@string/app_name" android:icon="@drawable/ic_launcher" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

任何帮助将不胜感激，因为我有越来越多的用户关注并且无法找到搜索的方式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T05:35:01.303

**终于找到了错误和正确的解决方案！**

实际上，只有当人们第一次从陆地模式的屏幕启动应用程序时才会出现问题......应用程序在清单中被强制为纵向，但是，尽管如此，我意识到Android仍然在启动时执行 onConfigurationChanged （当从土地到肖像，例如）

问题是应用程序有 2 种语言，为了在屏幕方向上保持正确的语言，我增加了我自己的 Myapplication（以扩展应用程序）来管理 onConfigurationChanged 并在整个应用程序中设置正确的区域设置！

即使在强制应用程序在 Manifest 中显示肖像后（由于某些原因，前段时间），来自 MyApplication.java 的 onConfigurationChanged 仍然在某些情况下执行......

**问题**：

MyApplication.java 中的代码是

```
public void onConfigurationChanged(Configuration newConfig)
  {
      super.onConfigurationChanged(newConfig);
      // Set correct language (default or chosen)
      Locale locale = new Locale(getState()); 
      Locale.setDefault(locale);
      newConfig.locale = locale;
      getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics());
  } 
```

**解决方案**：

不要直接使用 newConfig，而是按照 Android Developper 的建议制作一个 Modifiable Configuration 对象，然后使用它

```
public void onConfigurationChanged(Configuration newConfig)
  {
      super.onConfigurationChanged(newConfig);
      // Set correct language (default or chosen)
      Locale locale = new Locale(getState()); 
      Locale.setDefault(locale);
      Configuration config = new Configuration(newConfig); // get Modifiable Config from actual config changed
      config.locale = locale;
      getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
  } 
```

直接加载 newConfog 对象的前一个解决方案在 Android v2.3 之前一直有效，但在 Android 版本 >= 4.0 中不再被接受

现在一切正常！

（特别感谢 Frédéric Espiau 别名[Apollidore](http://www.siteduzero.com/membres-294-15848.html)，因为解决方案来自阅读他的优秀著作“Créez des applications pour Android”）

# jar - 将任意代码注入java jar

> ID：13005011
> 
> 赞同：0
> 
> 时间：2012-10-22T04:34:02.053
> 
> 标签：jar, wrapper, code-injection

有没有办法将任意代码注入到 jar 文件中？例如，给定一个 jar 文件，程序将在类 X 的方法 m 中注入一个 init 函数，该函数将检查某些条件并在不满足条件时退出。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:37:59.700

如果 jar 已签名 - 否**。如果罐子没有签名 - 那么是的，这当然是可能的。从更改类的方法到添加或替换整个类。

JAR 文件实际上是一个包含类文件的 ZIP 文件——源程序的二进制表示，由编译后的字节码、字符串和其他文字以及其他必要信息组成。这些类文件具有 Java VM 规范定义的格式。由于可以以某种方式读取和处理任何文件，因此类文件也可以被读取更改然后写回。

至于确定必须更改/添加/删除什么 - 这当然是想要改变程序行为并有足够技能阅读 JavaVM 汇编语言和/或逆向工程源代码的人的任务。有一些可用的 java 反编译器可以生成通常难以理解但仍然可能的 java 源代码。

* * *

** 如果 jar 被篡改这一事实并不重要，那么可以删除签名并仍然进行修改

# iphone - 不会在 iPhone 项目中编译的文件

> ID：13005013
> 
> 赞同：0
> 
> 时间：2012-10-22T04:34:25.677
> 
> 标签：iphone, xcode

我正在接手别人开发的 iPhone 项目，无法与以前的程序员交谈。我在 XCode 中运行该项目，但它没有编译。我已将问题缩小到三个文件：render.c、sweep.c 和 tess.c。如果我从编译源中删除这些文件，项目将成功编译并运行。

问题：

1.  会不会是之前使用了一些外部编译脚本而不是 XCode 中配置的那个？
2.  难道这些文件不会为 iPhone 模拟器编译，而是为真实设备编译吗？
3.  你知道这些文件（render.c、sweep.c 和 tess.c）是干什么用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:10:09.077

2) 的答案是文件确实为真实设备编译。由于某种原因，它们不为模拟器编译。为什么尚不清楚，但至少它有效。

# c - Minix - 在 C 中创建堆栈跟踪

> ID：13005022
> 
> 赞同：0
> 
> 时间：2012-10-22T04:35:58.657
> 
> 标签：c, stack, stack-trace, minix

这是使用 Minix (http://www.minix3.org)。

对于 Uni 的一个项目，我正在使用 fkey 创建一个堆栈跟踪。我可以访问进程表，并且正在打印进程计数器、堆栈指针和基指针。现在，我被卡住了——我需要能够打印出正在调用的子例程的名称，因为我在堆栈调用中退一步。

例如：我有 proc “getty”，SP：0x1669 PC：0x41B0 BP：41B4

我的解释：

SP 指向堆栈指针当前所在的位置 - 执行中的某个位置。

PC 指向下一条要执行的指令，每步加一

BP 指向当前子程序的顶部

我将如何从这些内存地址获取子例程名称和/或我将如何退后一步通过堆栈？

# android - 如何在 Android 上使用 XML 指定 RGB 格式的颜色

> ID：13005023
> 
> 赞同：8
> 
> 时间：2012-10-22T04:36:04.797
> 
> 标签：android, android-layout

请举例说明在 Android 上使用 XML 指定 RGB 格式的颜色。语法是 `#rrggbb`.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T04:40:31.317

您可以像这样在 XML 中指定 RGB 格式的颜色：

```
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Test text"
            android:textColor="#332116"
            android:textSize="16sp"
            android:textStyle="bold" /> 
```

一般形式：

```
android:textColor="#332116" is "#rrggbb" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T04:39:10.180

提供任何背景颜色

```
android:background="#rrggbb" 
```

为文本提供颜色

```
android:textcolor="#rrggbb" 
```

您可以使用此页面以十六进制格式找出正确的 RGB 值

[选色器](http://www.colorpicker.com/)

在 xml 中指定注释

```
 <!--android:textColor="#332116"-->
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Test text"
            android:textColor="#332116"
            android:textSize="16sp"
            android:textStyle="bold" /> 
```

# android - 如何从 C++ 项目为 Android 创建库（.so 或 .a 文件）？

> ID：13005026
> 
> 赞同：1
> 
> 时间：2012-10-22T04:36:45.847
> 
> 标签：android, visual-studio, java-native-interface

我是在 Android 上使用本机代码编程的初学者。

我已经阅读了互联网上的一些指南，并且知道如何在 Android 项目中使用现有的库（.so 或 .a）文件。我通过在 .so (.a) 库中创建 JNI 接口和回调函数来做到这一点。

我的问题是我在 Visual Studio C++ 下有一个项目，现在我想将该 C++ 项目构建为 Android 可以重用的库文件（.so 或 .a）。

有人可以告诉我我该怎么做？

太感谢了！

丰乐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:41:47.807

Android 版本的 .so 和其他人创建的相同，没有显着差异。您可以简单地使用 gcc（这就是 NDK 内部调用的内容）创建一个 .so 并在 Android 中重用它。

# java - 在java中实现信号量

> ID：13005029
> 
> 赞同：1
> 
> 时间：2012-10-22T04:37:27.307
> 
> 标签：java, multithreading

我有一些生成线程（蜥蜴）的代码，它也生成了一个猫线程。

猫会检查蜥蜴（一旦它醒来），如果有很多人同时穿过一条小路，它就会吃掉它们。这个想法是让蜥蜴在世界没有“结束”的时候穿过并吃东西，而不会受到猫线的干扰。

我需要使用信号量来控制它。

我有这个想法，只需要额外的推动，这样我就可以开始尝试了。

我已经编辑了代码以显示我的问题所在。

```
import java.util.ArrayList;
import java.util.concurrent.Semaphore;
import java.util.logging.Level;
import java.util.logging.Logger;

public class LizardsSync 
{
    /*
     * Set this to the number of seconds you want the lizard world to
     * be simulated.  
     * Try 30 for development and 120 for more thorough testing.
     */
    private static int WORLDEND = 30;

    /*
     * Number of lizard threads to create
     */
    private static int NUM_LIZARDS =20;

    /*  
     * Maximum lizards crossing at once before alerting cats
     */
    private static int MAX_LIZARD_CROSSING = 4;

    /*
     * Maximum seconds for a lizard to sleep
     */
    private static int MAX_LIZARD_SLEEP_TIME = 3;

    /*
     * Maximum seconds for a lizard to eat
     */
    private static int MAX_LIZARD_EAT_TIME = 5;

    /*
     * Number of seconds it takes to cross the driveway
     */
    private static int CROSS_TIME = 2;

    /*
     * Number of seconds for the cat to sleep.
     */
    private static int MAX_CAT_SLEEP;

    /*
     * A counter that counts the number of lizzards crossing sago to monkey grass
     */
    int numCrossingSago2MonkeyGrass = 0;

    /*
     * A counter that counts the number of lizzards crossing monkey grass to sago
     */
    int numCrossingMonkeyGrass2Sago = 0;

    /**
     * A semaphore to protect the crossway. 
     * only the max amount of lizards can cross so the cat wont 'play'
    */
    Semaphore semaphoreCrossway = new Semaphore(MAX_LIZARD_CROSSING,true);

    /**
     * A semaphore for mutual exclusion.
     */
    Semaphore mutex = new Semaphore(4);

    // on both semaphores, you can call acquire() or release()
    /*
     * Indicates if the world is still running.
     */
    private static boolean running = true;

    /*
     * Indicates if you want to see debug information or not.
     */
    private static boolean debug = true;

    public void go()
    {
        ArrayList<Thread> allThreads = new ArrayList<Thread>();

        // create all the lizzard threads
        for (int i=0; i < NUM_LIZARDS; i++) 
        {       allThreads.add(new LizardThread(i) );
            allThreads.get(i).start();
}
        // create the cat thread
        Thread CatThread = new CatThread();
         CatThread.start();

        // let the world run for a while
        sleep (WORLDEND);

        // terminate all threads
        running = false;
        // wait until all threads terminate by joining all of them
        for (int i=0; i < NUM_LIZARDS; i++) {
            try {
               allThreads.get(i).join();
            } catch (InterruptedException ex) {
                System.err.println ("unable to join thread, " + ex.getMessage());
            }
        }
    }
       /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // starts the program
        new LizardsSync().go();
    }

     /**
     * Models a cat thread.
     */
    public class CatThread extends Thread {

        /**
         * @see java.lang.Runnable.
         */
        @Override
        public void run() 
        {   
            // you must finish this method

            while (running) {
               // sleep for a while
               catSleep();

               // check on lizzards
               checkCrossway();
            }
        }

        /**
         * Puts cat thread to sleep for a random time.
         */
        public void catSleep()
        {
            int sleepSeconds  = 1 + (int)(Math.random()*MAX_CAT_SLEEP);

            if (debug) {
                System.out.println ("Cat is sleeping for " + sleepSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(sleepSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }
            if (debug) {
                System.out.println ("Cat awakes.");
                System.out.flush();
            }
        }

        /**
         * Simulates cat checking the crossway.
         */
        public void checkCrossway()
        {
            if (numCrossingMonkeyGrass2Sago + numCrossingSago2MonkeyGrass > MAX_LIZARD_CROSSING) {
                System.out.println ("The cat says yum!");
                System.out.flush();
                     System.exit(-1);
            }
       }
    }

    /**
     * Models a lizard thread.
     */
    public class LizardThread extends Thread {

        private int _id;

        /**
         * Creates a new lizard thread.
         * 
         * @param id the id assigned to the lizard thread
         */
        public LizardThread(int id)
        {
            _id = id;
        }

        /**
         * @see java.lang.Runnable.
         */
        @Override
        public void run() 
        {    
            while (running) {
               // sleep for a while in sago
               lizardSleep();
               // wait until safe to cross from sago to monkey grass
               sagoToMonkeyIsSafe();
               // cross path to monkey grass
               crossedOverToMonkey();
               // eat in the monkey grass
               lizardEat();
               // wait untill its safe to cross back to sago
               monkeyToSagoIsSafe();
               // cross from cross monkey grass to sage
               crossMonkeyToSago();
            }
        }

        /**
         * This tests if it is safe to travel from sago to monkey.
         * Finish this.
         */
        public void sagoToMonkeyIsSafe()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] checks sago -> monkey grass.");
                System.out.flush();
            }

            // you must add code here
            // use a semaphore 

            if (debug) {
                System.out.println ("Lizard [" + _id + "] thinks sago -> monkey grass is safe.");
                System.out.flush();
            }
        }

        /**
         * Indicates that lizard crossed over to monkey grass.
         * Finish this.
         */
        public void crossedOverToMonkey()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] made it to monkey grass.");
                System.out.flush();
            }

            // add code here
        }

        /**
         * This tests if it is safe to travel from monkey to sago.
         * Finish this.
         */
        public void monkeyToSagoIsSafe()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] checks monkey grass -> sago.");
                System.out.flush();
            }

            // you must add code here
            // use a semaphore 

            if (debug) {
                System.out.println ("Lizard [" + _id + "] thinks monkey grass -> sago is safe.");
                System.out.flush();
            }
        }

        /**
         * Indicates that lizard crossed over to sago.
         * Finish this.
         */
        public void crossedOverToSago()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] made it to sago.");
                System.out.flush();
            }

            // add code here
        }

        /**
         * Indicates that lizard is crossing over from monkey to sago.
         * Finish this
         */
        void crossMonkeyToSago()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] is crossing monkey grass to sago.");
                System.out.flush();
            }

            numCrossingMonkeyGrass2Sago++;

            // simulate walk
            try {
                sleep(CROSS_TIME*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }

            numCrossingMonkeyGrass2Sago--;
        }

        /**
         * Indicates that lizard is crossing over from sago to monkey. 
         */
        void crossSagoToMonkey()
        {

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is crossing sago to monkey grass.");
                System.out.flush();
            }

            numCrossingSago2MonkeyGrass++;

            // simulate walk
            try {
                sleep(CROSS_TIME*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }

            numCrossingSago2MonkeyGrass--;
        }

        /**
         * Puts lizard thread to sleep for a random amount of time.
         */
        public void lizardSleep()
        {
            int sleepSeconds  = 1 + (int)(Math.random()*MAX_LIZARD_SLEEP_TIME);

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is sleeping for " + sleepSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(sleepSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }
            if (debug) {
                System.out.println ("Lizard [" + _id + "] awakes.");
                System.out.flush();
            }
        }

        /**
         * Simulates lizard eating for a random amount of time.
         */
        public void lizardEat()
        {
            int eatSeconds  = 1 + (int)(Math.random()*MAX_LIZARD_EAT_TIME);

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is eating for " + eatSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(eatSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }
            if (debug) {
                System.out.println ("Lizard [" + _id + "] finished eating.");
                System.out.flush();
            }
        }
    }

    /**
     * Puts current thread to sleep for a specified amount of time.
     * 
     * @param seconds the number of seconds to put the thread to sleep
     */
    private static void sleep(int seconds)
    {
        try {
            Thread.sleep(seconds*1000);
        } catch (InterruptedException ex) {
            Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

这段代码现在写的是这样的

```
Cat awakes.
The cat says yum!
Lizard [8] finished eating.
Lizard [0] is sleeping for 1 seconds.
Lizard [8] checks monkey grass -> sago.
Lizard [1] finished eating.
Lizard [8] thinks monkey grass -> sago is safe.
Lizard [1] checks monkey grass -> sago.
Lizard [8] is crossing monkey grass to sago.
Lizard [1] thinks monkey grass -> sago is safe.Java Result: -1
BUILD SUCCESSFUL (total time: 5 seconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:51:03.787

这正是[`java.util.concurrent.Semaphore`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)它的用途。

# ios - iOS 6 中的本地化地理编码选项

> ID：13005030
> 
> 赞同：1
> 
> 时间：2012-10-22T04:37:31.423
> 
> 标签：ios, ios6, mapkit, core-location, clgeocoder

在 iOS 6 中，我们还能使用 Google 的 API 对地址进行地理编码吗？我隐约记得，谷歌的授权要求结果要显示在谷歌地图上，这在 iOS 6 中显然是不可能的。

我发现内置的 CLGeocoder 很容易出错，通常不会为最简单的搜索返回结果。

我正在寻找的另一件事是地理编码/反向地理编码，结果以本地语言显示。CLGeocoder 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:39:02.540

您可以尝试将 Goolge 地图显示为叠加层。这里有一个来自 github 的例子

[https://github.com/mladjan/GoogleMapsOverlayiOS](https://github.com/mladjan/GoogleMapsOverlayiOS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:40:52.950

您是正确的，用于地理编码的 Google API 需要在 Google 地图上显示结果。

由于用户正在向 Apple 提供地图反馈，因此 CLGeocoder 结果质量有望迅速提高。

# javascript - MVC4 部分视图中的敲除绑定

> ID：13005031
> 
> 赞同：5
> 
> 时间：2012-10-22T04:37:51.450
> 
> 标签：javascript, knockout.js, asp.net-mvc-4

简而言之，我相信我追求的是一种在 MVC4 部分视图中为敲除绑定/javascript 对象提供范围/上下文的方法，这样我就可以重用相同的部分而不会让它们相互干扰，但仍然能够在客户端引用父子视图模型。

作为一个淘汰的菜鸟（更广泛地说是真正的网络开发人员），我很可能在这里错过了一个常见的 javascript 概念模式，但我遇到的场景很像下面这样。我在服务器上有一个视图模型，让我们说一下：

```
public class MainModel 
{
    // Other fields 

    SubviewModel Subview { get; set}
}

public class SubviewModel 
{
    // Relevant subview fields
} 
```

然后在强类型（主）部分视图中渲染我需要的任何内容，并通过@Html.Action 将子视图模型传递到强类型部分（在服务器上）。在这两种情况下，我都通过执行以下操作来设置淘汰赛：

```
var mvcModel = ko.mapping.fromJS(@Html.Raw(JsonConvert.SerializeObject(this.Model)));

ko.applyBindings(mvcModel , document.getElementById("@("divSubview"+Model.Guid)")); 
```

在这种情况下， divSubview 将是部分的主要包装 div 并且所有内容通常都绑定得很好 - 几乎。

Model.Guid 连接用于解决第一个问题，即这些部分通常在页面上针对不同的视图模型呈现多个。（把它想象成一个项目列表，一个待办事项列表或诸如此类的东西，其中每个项目都有可能改变的子内容 - 你可能会明白，可能在我试图进一步解释之前......）所以当多个部分呈现在同一页面上时，如果 div 不是唯一命名的，如果我通过 document.getElementById 调用 applyBindings，我最终会将第二个 viewModel 应用到具有该名称的第一个渲染 div。

第二个问题是相关的，因为当我渲染主要部分（给定页面有多个），然后是子视图时，我经常想引用子视图中的主视图模型或类似的。我一直在使用的解决方法只是设置一个命名的全局参数，然后使用它来来回引用，因为我知道脚本将按顺序执行 - 但这很hacky。

那么我缺少什么正确的解决方案？

我知道我可以只使用 Knockout 的模板和一个更大的视图模型，最终这可能是正确的解决方案，但目前在 MVC 部分（与服务器紧密耦合）中有很多事情我不愿意给出向上。（其次，我现在试图使部分尽可能松散耦合 - 至少在客户端上 - 即使我在绑定/等方面受到了一些性能影响。）

什么（我认为）我真正追求的是一种将某种形式的范围传递给局部的方法，这样子视图局部将具有对主要局部视图模型的引用（同样），而不必污染全局命名空间或使用唯一的名字。有没有办法让我说表示客户端 JS 变量将引用子/父部分中的对象？（或者我是否完全错过了这一点并且有更好的方法？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:00:52.277

从长远来看，最好咬紧牙关，使用映射插件的经典组合，渲染到页面中的顶级视图模型的 JSON 表示以进行初始化，以及子视图模型的模板。但我理解你对现有 MVC 部分逻辑的痛苦，所以......

您当前是否将单独的脚本块渲染为每个子部分视图的一部分以创建其 Knockout 视图模型并应用其绑定？

您能否摆脱单个绑定上下文并在页面中定义某种模块，该模块拥有顶级视图模型，并在子部分渲染时逐渐添加其子视图模型，然后在页面底部，在 DOM 准备好时，应用绑定？

因此，每个子部分的脚本块都会调用模块上的某个函数，传入子模型的原始 JSON，其中包括其 Guid 键。然后，您的模块创建子视图模型的新实例并将父视图模型设置为其中的引用，并将其推送到父视图模型上的子视图模型的可观察数组中。然后你有每一种方式的参考。

我不确定您是否可以为这种结构使用某种页面级管理器（如果这就是您不污染全局命名空间的意思）。无论如何，让这些局部视图模型全部由单个对象拥有而不是漂浮在全局命名空间中不是很好吗？（如果它们是）

希望我正确理解您的上下文。

更新：从某种意义上说，您的部分仍然是松散耦合的。标记中的绑定表达式显然必须与子视图模型的实例相关，但这可能是通过待办事项列表项上的 foreach 链接下来的数据上下文或其他内容，或者使用“with”表达式显式设置，例如使用 someOtherModule.randomStandaloneSubViewModel

# java - Java int 不会考虑第一个 0

> ID：13005035
> 
> 赞同：1
> 
> 时间：2012-10-22T04:38:42.960
> 
> 标签：java, int, zero

我正在尝试在 java 中编写一个二进制数类 .. 但是如果我发送一个以 0 开头的整数，则该数字不会正确保存。我知道问题是什么，但我无法找到解决方案。在 c++ 中，我使用了 float 而不是 int，但在 java 中似乎不起作用。

```
import java.util.*;

class BinaryNumber {

private boolean b[];

public void setBit(int index,boolean value){
 b[index]=value;
}

public boolean getBit(int index){
 return b[index];
}

public void clear(){    
    for(int i=0;i<8;i++)
    b[i]=false;
}

public BinaryNumber() {
    b=new boolean[8];
    for(int i=0;i<8;i++){
    b[i]=false;
    }   
} 

public void inputNumber(int a){

 if(a>11111111) {    
    System.out.println(" Exception Number to Large Nothing Entered ");
 }   
 else {

     int number=a;
     int c=7;
     int digit=0;

     for(int i=0;i<8;i++) {
         digit=number%10;
             if(digit==1){ 
             b[c]=true;
             }
             else if (digit==0) { 
             b[c]=false; 
             }
             else { 
             System.out.println(" Only Binary Number Accepted "); 
             clear();
             i=8; //break
             }      
         number=number/10;
         c--;       
     }   
 }  
}

public void outputNumber(){     
    for(int i=0;i<8;i++){
        if(b[i]==true){
            System.out.print("1");
        }
        else{
            System.out.print("0");
        }
    }       
    System.out.println(""); 
}

 }

class Q5{
public static void main(String args[]){

BinaryNumber a=new BinaryNumber();  
a.inputNumber(00100110);    
a.outputNumber();

BinaryNumber b=new BinaryNumber();  
b.inputNumber(00100111);
    b.outputNumber();   

}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T04:40:00.483

以 开头的数字`0`被 Java 解释为八进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:44:07.720

数字本身和它在语言中的表示是有区别的。例如，“0xD”（基数 16）、“13”（基数 10）、“015”（基数 8）和“b1101”（基数 2）是指同一个数字的四种不同表示。

[二进制字面量](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000929.html)

# django - 扩展的 django 用户配置文件在提交时会覆盖用户表数据

> ID：13005036
> 
> 赞同：2
> 
> 时间：2012-10-22T04:38:51.547
> 
> 标签：django, authentication, user-profile

我遇到一个问题，当用户提交对其个人资料的更改时，关联的用户表的所有字段都被空白值覆盖（即：用户名、电子邮件、名字......等）

我的站点有两种类型的用户，它们的用户配置文件类型完全不同，因此我不能使用 settings.py 中的用户配置文件设置，除非有人知道如何使它工作？

在我的 models.py （简化，但显示用户模型被继承）：

```
class UserProfile(User):
    somevar = models.CharField(max_length=30)
    objects = UserManager()

class ProfileForm(ModelForm):
    class Meta:
        model = UserProfile

class UserForm(ModelForm):

    password2 = forms.CharField(widget=forms.PasswordInput())
    remail = forms.CharField(max_length=75)

    class Meta:
        model = UserProfile
        widgets = {'password': forms.PasswordInput()}
        fields = ('email', 'password') 
```

在我的views.py中：

```
@login_required
def profile_data(request):
    """
        enter user profile data
    """

    if request.method == 'POST':  # submission / data change
        user = UserProfile.objects.get(pk=request.user.id)
        form = ProfileForm(request.POST, instance=user)

        if form.is_valid():
            form.save()

        return render(request, 'users/profile_edit.html', {'form': form})

    else:  # no data entered = fill all users data in
        form = ProfileForm(initial=model_to_dict(UserProfile.objects.get(id=request.user.id)))

    return render(request, 'users/profile_edit.html', {'form': form}) 
```

问题是，如果表单有效并且表单保存，它会通过将所有值设为空白来影响该用户的用户表，因为这些属性在表单模型中不包含任何数据。我尝试从 ProfileForm 中排除所有用户表字段，但似乎应该有更简单的方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:47:35.150

这是按设计工作的。在[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)中，父级的属性在子级中可用。子对象可以在保存时覆盖它们。

如果您想拥有不同类型的用户，这里是关于[如何设置具有两种具有非常不同属性的用户类型的 Django 模型的最新问题](https://stackoverflow.com/questions/12926922/how-to-set-up-django-models-with-two-types-of-users-with-very-different-attribut)

# asp.net-mvc - 如何仅从 mvc 中的控制器操作中呈现 div。

> ID：13005037
> 
> 赞同：0
> 
> 时间：2012-10-22T04:38:55.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3

```
I have used PartialView but it renders the whole view after success full ajax post
This is my view
 my ul which i want to update
<ul id="ULdinnerlist">
    @* my foreach loop*@
    @foreach (var item in Model)
    {

        <li>  Title : @Html.DisplayFor(modelItem => item.Title)<br />
              EventDate : @Html.Encode(item.EventDate.ToShortDateString()+ " @ " + item.EventDate.ToShortTimeString()) 
              <p>Description : @Html.DisplayFor(modelItem => item.Description)</p><br />
               HostedBy : <b>@Html.DisplayFor(modelItem => item.HostedBy)</b> (@item.ContactPhone)<br />
        </li>
    }

</ul> 
```

我的 ajax 路由链接 @Ajax.RouteLink(">>>",new { page = Model.PageIndex + 1 },new AjaxOptions { UpdateTargetId = "ULdinnerlist" })

```
ON controller: my action for reindering 

public ActionResult Index(int? Page)
        {
            int PageSize = 5;
            IQueryable<Dinner> dines = from dine in db.Dinners orderby dine.EventDate select dine;
            var paginatedDinners = new PagingList<Dinner>(dines, Page ?? 0, PageSize);

            checking ajax post and rendering accordingly    
            if (Request.IsAjaxRequest())
            {
                return PartialView(paginatedDinners);
            }
            return View(paginatedDinners);
        } 
```

问题是当我进行分页时它会呈现整个视图。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:23:12.420

要返回不同的信息以响应您的 AJAX 请求，您需要呈现不同的视图，仅返回 PartialView(same_view_name) 实际上不会做任何事情。

或者，在您当前的视图中检查请求是否是 AJAX 请求，然后有选择地呈现相关部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T05:31:58.383

而不是重新调整视图，您应该返回 ParttailView 或字符串，因为部分视图的返回类型是 MvcHtmlString。

在控制器中

```
public string SomeAction(int? Page)
        {
            int PageSize = 5;
            IQueryable<Dinner> dines = from dine in db.Dinners orderby dine.EventDate select dine;
            var paginatedDinners = new PagingList<Dinner>(dines, Page ?? 0, PageSize);

           return RenderPartialViewToString("PartialViewName",paginatedDinners )
        }

protected string RenderPartialViewToString(string viewName, object model)
        {
            if (string.IsNullOrEmpty(viewName))
                viewName = ControllerContext.RouteData.GetRequiredString("action");

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                viewResult.View.Render(viewContext, sw);
                return sw.GetStringBuilder().ToString();
            }
        } 
```

您应该使用不同的操作来处理 Ajax 请求，因为它的返回类型不同，所以不能在“索引”中使用它。

通过将部分视图名称及其模型传递给**RenderPartialViewToString**方法，它将返回您的部分 RenderHtml。

```
//actionLink
    @Ajax.RouteLink(">>>","SomeAction",new { page = Model.PageIndex + 1 },new AjaxOptions { UpdateTargetId = "ULdinnerlist",InsertionMode =InsertionMode.Replace }) 
```

# c++ - DOMContentLoaded 从未在 BHO (IE9) 中引发

> ID：13005039
> 
> 赞同：1
> 
> 时间：2012-10-22T04:39:15.083
> 
> 标签：c++, internet-explorer-9, bho

我想在 Internet Explorer 9 的 BHO 中收听该`DOMContentLoaded`事件。我已将事件附加到`IHTMLDocument3`NavigateComplete2 事件中，但未成功（附件正常，但事件未触发）。

我为 onload 做了类似的事情：我将事件“onload”附加到`IHTMLWindow3`. 在这种情况下它工作正常。

我知道当 NavigateComplete2 触发时 DOM 没有完全加载，因为当时我无法访问页面的 BODY。

如何`DOMContentLoaded`在 BHO 中捕捉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:52:56.997

我不确定为什么`DOMContentLoaded`不开火。最合乎逻辑的解释是它在你处理的时候已经被触发了`NavigateComplete2`，尽管在这种情况下你不能访问整个 DOM 有点奇怪。`readyState`处理程序中的文档是什么？

无论如何，更好的解决方案可能是为 注册一个接收器`OnReadyStateChange`，如下所示：

```
class CDocumentSink :
  public IDispEventImpl<1, CDocumentSink, &DIID_HTMLDocumentEvents2, &LIBID_MSHTML, 4, 0>
{
public:
  BEGIN_SINK_MAP(CDocumentSink)
    SINK_ENTRY_EX(1, DIID_HTMLDocumentEvents2, DISPID_READYSTATECHANGE, OnReadyStateChange)
  END_SINK_MAP()

  STDMETHOD_(void, OnReadyStateChange)(IHTMLEventObj* ev);
}; 
```

您可以将其实现为现有类的一部分或创建一个单独的类（如上例所示）。当`readyState`为 4（完成）时，DOM 应该在那里并且可用。

# wordpress - 如何在wordpress中设置管理员网址？

> ID：13005043
> 
> 赞同：0
> 
> 时间：2012-10-22T04:39:38.883
> 
> 标签：wordpress

我想更改我的 wordpress 登录网址。我已更改 wp-login.php 文件并将 wp-login 替换为“siteadmin”，它正在为管理员工作，但它正在停止成员的站点登录功能。网站成员无法登录。我也使用了“锁定管理员网址”，但同样的问题。请让我知道如何在不影响成员登录的情况下做到这一点

管理员网址：http: [//yourdomain.com/wp-admin](http://yourdomain.com/wp-admin)

```
 I want: 
```

[http://yourdomian.com/siteadmin](http://yourdomian.com/siteadmin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:35:13.530

.htaccess 文件中的更改

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
     RewriteRule ^siteadmin$ http://www.yourdomain.com/wp-login.php [NC,L]
    RewriteBase /internal/users/manu/style/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]

   </IfModule> 
```

或者你可以安装[http://wordpress.org/extend/plugins/redirection/](http://wordpress.org/extend/plugins/redirection/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:41:33.180

在`Settings->General`单站安装 WordPress 的屏幕上，有两个字段名为“ `WordPress address (URL)`”和“ `Site address (URL)`”。这些也称为“主页”和“站点 URL”设置。它们是重要的设置，因为它们控制 WordPress 认为您的网站所在的位置。它们控制页面管理部分和前端中 URL 的显示，并在整个 WordPress 代码中使用。

来自[http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T06:58:42.740

您可以通过安装类似“HC Custom WP-Admin URL”的插件来做到这一点。它将在永久链接中提供一个选项来更改管理 url 参数。

# php - 从任何电子邮件服务提供商处获取电子邮件消息

> ID：13005048
> 
> 赞同：0
> 
> 时间：2012-10-22T04:40:39.343
> 
> 标签：php

我有一个 html 消息表单框，用户可以在其中使用 php 发送消息。

现在我正在尝试从任何电子邮件服务提供商处获取电子邮件信息，例如：yahoo、gmail、hotmail 等。有没有办法从任何电子邮件服务提供商处获取电子邮件信息。

欢迎您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:43:48.497

仅当提供商允许通过 POP3/IMAP 访问时，否则不允许。Gmail 允许免费访问 IMAP/POP3，但默认情况下禁用。

Hotmail 和 Yahoo 仅在您为其付费套餐付费时才提供 POP3/IMAP 访问。

要阅读 POP3/IMAP 消息，首先确保为您的 PHP 安装启用了[IMAP 扩展。](http://php.net/imap)即使扩展名为 IMAP，您也可以为 POP3 使用相同的函数集。

[介绍页面](http://www.php.net/manual/en/intro.imap.php)有一个注释，其中包含帮助您入门的代码。

# javascript - JavaScript 中的“Worker”是什么类型的对象

> ID：13005051
> 
> 赞同：5
> 
> 时间：2012-10-22T04:41:14.353
> 
> 标签：javascript, web-worker

我对这一切有点困惑......

Chrome 和 Firefox 都告诉我不同​​的事情，我在规范中找不到提到它的任何部分，但是：

在铬：

```
Object instanceof Function // true
Function instanceof Object // true
Worker instanceof Object // true
Worker instanceof Function // false <- WTF??? 
```

在火狐中：

```
Object instanceof Function // true
Function instanceof Object // true
Worker instanceof Object // false
Worker instanceof Function // false 
```

当然，初始化的 new Worker() 既是 Worker 又是 Object，但为什么 Worker 构造函数不是函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T04:57:21.727

Worker **IS**类型的函数。您可以使用[`typeof`operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)进行检查。但是，它不继承 Function 构造函数的原型，因此它不是[`instanceof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)Function。

这是一个更实际的例子：

```
function fun(){};
Function.prototype.foo = 'my custom Function prototype property value';
console.log(fun.foo); //my custom Function prototype property value
console.log(fun instanceof Function); //true

console.log(typeof Worker); //function, the constructor
console.log(Worker.foo); //undefined, this host constructor does not inherit the Function prototype
console.log(Worker instanceof Function); //false

var worker = new Worker('test.js');
console.log(typeof worker); //object, the instance
console.log(worker.foo); //undefined, instance object does not inherit the Function prototype
console.log(worker instanceof Function); //false​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)：

> 运算符测试对象的`instanceof`原型链中是否具有构造函数的原型属性。

Worker 不继承 Function 构造函数的原型，因此它不是 Function 的实例。

* * *

下面是一个使用[`typeof`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)检查用户浏览器是否支持 Web Workers API 的示例：

```
if (typeof window.Worker !== 'undefined') {
    alert('Your browser supports Web Workers!');
} else {
    alert('Sorry, but no.'); //too lazy to write a proper message for IE users
}​ 
```

[小提琴](http://jsfiddle.net/ult_combo/tbXvC/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:57:17.687

`Worker`是一个宿主对象，不是语言规范的一部分。它不需要满足语言的所有要求。没有什么可以说它必须将自己表示为是从 the`Function`或任何其他构造函数创建的。

其他人喜欢`Object`并`Function`这样做是因为语言规范要求他们这样做。

# c++ - fd_set 在 Eclipse 中无法识别

> ID：13005054
> 
> 赞同：2
> 
> 时间：2012-10-22T04:41:45.410
> 
> 标签：c++, linux, sockets

我正在 Eclipse 中处理涉及服务器和客户端通过套接字通信的任务。我正在尝试使用使用结构的`accept`系统调用`fd_set`。问题是 Eclipse 指示类型`fd_set`未解析。

这是我的进口清单：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/time.h>
#include <arpa/inet.h>
#include <vector>
#include <iostream>
#include <errno.h>
#include <stdio.h>
#include <unistd.h> 
```

为什么 Eclipse 指示*fd_set 无法识别*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:49:47.967

根据[http://linux.die.net/man/3/fd_set](http://linux.die.net/man/3/fd_set)，`#include <sys/select.h>`. 希望这能解决问题。

# c# - NHibernate：无法删除集合：无法插入值 NULL

> ID：13005058
> 
> 赞同：1
> 
> 时间：2012-10-22T04:42:20.560
> 
> 标签：c#, nhibernate, runtime-error

有一个`ResourcePackage`类和一个`PackageItem`类：

```
public ResourcePackageMap()
{
    DiscriminatorValue((int)ResourceObjectType.Package);

    HasMany(x => x.Children).KeyColumn("AggregationObjectId").Cascade.AllDeleteOrphan();
}

public PackageItemMap()
{
    Id(x => x.Id, "AggregationLinkId");
    References(x => x.ResourceItem, "ChildObjectId");
    References(x => x.Package, "AggregationObjectId");
    Map(x => x.Order, "OrderWithinAggregation");
    Map(x => x.Usage, "Usage");

    Table("tbl_Object_Aggregation_Link");
} 
```

我收到一条错误消息：

```
无法删除集合：[Domain.ResourcePackage.Children#102c589b-fc1c-451d-8300-a0ef00baa21f][SQL：
更新 tbl_Object_Aggregation_Link SET AggregationObjectId = null WHERE AggregationObjectId = @p0]

NHibernate.Exceptions.GenericADOException：无法删除集合：
[域.ResourcePackage.Children#102c589b-fc1c-451d-8300-a0ef00baa21f]
[SQL：更新 tbl_Object_Aggregation_Link SET AggregationObjectId = null WHERE
AggregationObjectId = @p0] ---> System.Data.SqlClient.SqlException:
无法将值 NULL 插入“AggregationObjectId”列，
表'KDatabase.dbo.tbl_Object_Aggregation_Link'；
列不允许空值。
更新失败。该语句已终止。

```

关系表运行如下：

有一个 tbl_Object 表和一个 tbl_Object_Aggregation_Link 表，其中包含 tbl_Object 表的两个外键。

而 tbl_Object_Aggregation_Link 表的映射类为：

```
public class PackageItemMap : ClassMap<PackageItem>
{
    public PackageItemMap()
    {
        Id(x => x.Id, "AggregationLinkId");
        References(x => x.ResourceItem, "ChildObjectId");
        References(x => x.Package, "AggregationObjectId");
        Map(x => x.Order, "OrderWithinAggregation");
        Map(x => x.Usage, "Usage");

        Table("tbl_Object_Aggregation_Link");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:08:15.237

要么改变

```
 HasMany(x => x.Children).KeyColumn("AggregationObjectId").Cascade.AllDeleteOrphan() 
```

至

```
 HasMany(x => x.Children).KeyColumn("AggregationObjectId").Cascade.All() 
```

或者使`'tbl_Object_Aggregation_Link'`表中的两个外键都接受空值。

编辑（另一种解决方案）：

判断地图：

```
References(x => x.Package, "AggregationObjectId"); 
```

我猜你要么将属性（包）作为 null 传递，并且数据库不允许此外键为 null，要么数据库中不存在此包的 ID。所以要么让列`"AggregationObjectId"`接受 null，要么传递一个有效的包对象（你可以使用 Nhibernate 获取它并传递它），或者像这样制作地图：

```
 References(x => x.Package, "AggregationObjectId").Cascade.All(); 
```

但是如果在数据库中找不到它，这将自动保存包。

# data-annotations - 将 ToolTip 描述符设置为 DataForm 中的复杂 DataField

> ID：13005064
> 
> 赞同：1
> 
> 时间：2012-10-22T04:43:43.977
> 
> 标签：data-annotations, wcf-ria-services, silverlight-5.0, dataform

我可以通过将 [Display(Name="My Description")] 设置为域服务元数据中的属性来将工具提示描述符设置为字段。

一个例子是：

```
[Display(Description="Type can be I (Individual), S (Store)")]
public string CustomerType { get; set; } 
```

[![例子](../Images/3e50d755a09bfba6343dce6f9f221b52.png)](https://i.stack.imgur.com/X84Bb.jpg)

**但在更复杂的字段的情况下，工具提示描述符不会显示：**

情况是这样的：

```
[Display(Description="The territory the customer is in")]
public SalesTerritory SalesTerritory { get; set; } 
```

作为相应的字段定义（**SalesTerritory 绑定到 SelectedItem**）：

```
<toolkit:DataField Label="Territory:">
    <ComboBox DisplayMemberPath="Name"
                SelectedValuePath="TerritoryID"
                ItemsSource="{Binding Path=DataContext.SalesTerritories,
                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                SelectedItem="{Binding Path=SalesTerritory, 
                                        Mode=TwoWay}">
    </ComboBox>
</toolkit:DataField> 
```

但 DataForm 不显示工具提示：

[![其他示例](../Images/7f6d8c55b86c2cd790c258c0611960d8.png)](https://i.stack.imgur.com/dRKYp.jpg)

我认为它没有显示的原因很清楚，但我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:26:41.697

据我所知，您应该使用[描述查看器](http://msdn.microsoft.com/en-us/library/system.windows.controls.descriptionviewer%28v=vs.95%29.aspx)。DisplayAttribute 是专门为数据网格设计的，并不是所有的控件都使用它。就像是

```
<sdk:DescriptionViewer Target="{Binding ElementName=myCmbBoxName}"/> 
```

应该管用

# android - 适用于 Linphone Android 的 G729 编解码器

> ID：13005067
> 
> 赞同：1
> 
> 时间：2012-10-22T04:44:47.057
> 
> 标签：android

我已经为 linphone android 实现编译并构建了 bcg729 编解码器。我如何启用和使用它？我已经处理了 g729 的版税。当我运行我的最终应用程序时，我没有看到此功能已启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-05T15:49:12.983

```
 PayloadType[] defauldCodecs = linphoneCore.getAudioCodecs();PayloadType payloadType = inphoneCore.findPayloadType("G729");if (payloadType != null) {linphoneCore.enablePayloadType(payloadType, true);PayloadType[] codecs = new PayloadType[]{payloadType};    linphoneCore.setAudioCodecs(codecs); }
```

# magento - 如何在 Magento 中为相关产品列表打孔？

> ID：13005069
> 
> 赞同：1
> 
> 时间：2012-10-22T04:45:19.037
> 
> 标签：magento

我设法创建了一个自定义块，该块显示随机数据，如雾凇和字母/数字

然而，这是了解在 Magento 中创建块的过程的测试。

然后我尝试从该块切换，创建另一个块，而不是从`Mage_Core_Block_Template`我更改为使用的扩展，`Enterprise_TargetRule_Block_Catalog_Product_List_Related`因为我的目标是让相关产品成为动态的，我将我的指向`cache.xml`这个新块。

我`Mage::log`在相关列表块类中放置了一个知道何时调用它，我可以看到它被调用一次然后被缓存。

对于我的生活，我无法让它工作，这是我的代码，请告知。

注意：重写有另一个单独的目的，实际上我的日志代码行设置在方法下的这部分：`public function getProductIds($object)`

`Lg/Hole/etc/config.xml`

```
<config>
    <modules>
        <Lg_Hole>
            <version>0.0.1</version>
        </Lg_Hole>
    </modules>

    <global>
        <blocks>
            <lg_hole>
                <class>Lg_Hole_Block</class>
            </lg_hole>
        </blocks>
        <models>
            <lg_hole>
                <class>Lg_Hole_Model</class>
            </lg_hole>
            <enterprise_targetrule_resource>
                <rewrite>
                    <index>Lg_Hole_Model_Mymodel</index>
                </rewrite>
            </enterprise_targetrule_resource>
        </models>
    </global>
</config> 
```

`Lg/Hole/etc/cache.xml`

```
<config>
    <placeholders>
        <lg_hole>
            <block>lg_hole/related</block>
            <name>hole_view_example</name>
            <placeholder>CACHE_TEST</placeholder>
            <container>Lg_Hole_Model_Cachetest</container>
            <cache_lifetime>86400</cache_lifetime>
        </lg_hole>
    </placeholders>
</config> 
```

`Lg/Hole/Model/Cachetest.php`

```
class Lg_Hole_Model_Cachetest extends
Enterprise_PageCache_Model_Container_Abstract {
protected function _getCacheId()
{
    return 'HOMEPAGE_PRODUCTS' . md5($this->_placeholder->getAttribute('cache_id'));
}
protected function _renderBlock()
{
    $blockClass = $this->_placeholder->getAttribute('block');
    $template = $this->_placeholder->getAttribute('template');

    $block = new $blockClass;
    $block->setTemplate($template);
    return $block->toHtml();
}

protected function _saveCache($data, $id, $tags = array(), $lifetime = null) { 
   return false; 
}

public function applyWithoutApp(&$content)
{
    return false;
}
} 
```

`Lg/Hole/Block/Related.php`

```
class Lg_Hole_Block_Related extends Enterprise_TargetRule_Block_Catalog_Product_List_Related
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:19:09.007

您是否需要从 扩展`Enterprise_TargetRule_Block_Catalog_Product_List_Related`？

如果是：你明白这个块包含它自己的逻辑吗？您必须在注册表中有一个已加载的产品（`@see Enterprise_TargetRule_Block_Catalog_Product_List_Abstract::getProduct()`例如在产品页面上），并且在该产品上有产品链接（与类型相关）。

如果你想制作一个完全独立的产品列表：一个简单的类`Mage_Catalog_BLock_Product_List`就足够了，因为它是产品列表中最原始的块（没有添加特定逻辑）

或者更好..用户一个小部件

# c - 在 C 中，数组的名称是指向它的第一个元素的指针，不是吗？

> ID：13005070
> 
> 赞同：2
> 
> 时间：2012-10-22T04:45:29.747
> 
> 标签：c, pointers

在下面的示例代码中，我使用字符串作为数组，如果 str 的名称是指向 str 的第一个元素的指针，这种情况下 string 的第一个字符，即 s，str 的大小应为 8，但它给出了 6。

```
#include <stdio.h>

char str[] = "string";
char *ptr = "string";

int main(void){
    int first = sizeof(str);
    int second = sizeof(str[0]);
    int third = sizeof(ptr);
    int size_of_array = sizeof(str)/sizeof(str[0]);
    printf("the size is %d, %d, %d, %d", size_of_array, first, second, third);
    return 0;
} 
```

好像str不是指针，str的大小不是ptr的大小？我对t感到困惑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:50:02.227

长话短说; 数组**不是**指针，指针**也不**是数组。

由于隐式转换，您似乎可以在需要指针的上下文中使用数组¹ 很多新手（而且经验丰富的）开发人员混淆了两者。

您自己的代码片段是一个完美的例子，说明数组不是指针，指针也不是数组。

^(^(1.) “重要的是要注意，数组在许多情况下会衰减为指针，因为这是一个持续的混乱来源。” ——埃德·S。)

* * *

您`sizeof`的 's 将对变量的“真实”类型进行操作，这就是为什么在假设*数组名称*等同于指针的情况下，您获得的数字与您的想法不匹配的原因。

* * *

只是为了让这个问题的读者清楚；数组不是指针，指针也不是数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T05:49:54.543

首先，您的问题**的实质：编译器严格按照*声明*大小处理 sizeof 。**在下面的代码中，假设一个指针*变量*拥有一个 32 位（4 字节）的地址：

```
char str1[] = "abcd";
char *pstr = str1;

// str1 is declared to be a fixed array of 5 chars (4+nul)
size_t str1size = sizeof(str1); // str1size = 5;

// pstr is declared to be a 32 bit pointer to a memory address.
size_t pstrSize = sizeof(pstr) // size of a 32 bit pointer; 4. 
```

要掌握您所看到的结果，请查看数组和指针变量的差异（其中比大多数人想象的要少）。

*数组和指针变量*在 C 中的核心区别是

*   一个指针变量*保存*一个地址；声明的数组*是*一个地址。
*   因此，声明的数组不能*修改*它们的“地址” （因为它们*是*地址，它们不像指针变量那样*保存地址）。*

如果你真的想用 C 语言围绕数组和指针，我根本无法强调其中的第一个。除此之外，它们的关系充其量是乱伦的。指针变量*位于*数组（或任何其他变量）之类的地址。但与数组不同的是，它们还*保存*一个地址作为它们的*值*。数组*就是*它们的地址。

第一个最好用以下方式证明：

```
char str1[] = "abcd";
char *pstr = NULL;

pstr = str1;          // ok. pstr holds the address *at* str1.
str1[0] = *pstr;      // ok. copies 'a' on to 'a'.
pstr++;               // ok. increment the address held in pstr by one item (char) size.
str1[0] = *pstr;      // ok. copies 'b' over 'a'.
pstr = str1+1;        // ok. pstr holds the address *at* str1 + one item (char) size.
str1 = pstr;          // does not compile. str1's address cannot be changed. 
```

请注意，指针*变量*本身*包含*一个地址，而固定数组*是*一个地址。因此，最后一个语句颠倒是完全没问题的。

```
pstr = str1;          // ok. put the str1 address in pstr, a pointer variable. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T04:53:28.377

是与否，str 是一个数组，但当它出现在表达式中时，它会转换为指向数组第一个成员的指针。

奇怪的是，当你执行 sizeof(str) 实际上它应该给你一个 7 而不是 6，因为它包含 NUL 终止符。

字符串\0

如果你使用 strlen()，它会返回 6。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:40:48.903

奇怪的是，以前的答案都没有直接解决标题中提出的问题。

不，数组的名称不是指向其第一个元素的指针。

在**大多数**表达式中，作为数组的表达式被转换为指向第一个元素的指针。因为这发生在大多数表达式中，人们倾向于将数组视为指针。但是，有四个例外。如果数组是 , , 的操作数，或者是用于初始化数组的字符串文字，则数组不会转换`sizeof`为`_Alignof`指针`&`。因为您的一个示例使用数组作为 的操作数`sizeof`，所以它使用数组，而不是指向第一个元素的指针。

因此，`sizeof(str[0])`首先`str[0]`解析 in 。在这个子表达式中，`str`不是 的操作数`sizeof`，所以它被转换为一个指针。然后将该指针与下标运算符一起使用，结果是数组的第一个元素。然后`sizeof`计算该元素的大小，即 1。

在`sizeof(str)`中，`str`是 的操作数`sizeof`。所以它**不会**转换为指针；它是数组。然后`sizeof`计算该数组的大小，即七。

请注意，这种转换不仅仅发生在标识符（名称）上；它适用于任何表达式。因此，if`p`是一个指向数组的指针，如用 声明的那样`float (*p)[4];`，then`*p`是一个包含四个浮点数的数组，因此它被转换为指向浮点数的指针（当它不是 、 或 的操作数`sizeof`时`_Alignof`）`&`。

# android - 在 Android 中使用 iText 读取 PDF 文档

> ID：13005071
> 
> 赞同：1
> 
> 时间：2012-10-22T04:45:40.027
> 
> 标签：android, pdf, itext

我目前正在测试在 android 中使用 itext 阅读 PDF 的示例，但我遇到了问题。下面的代码在 android 模拟器中不显示任何内容：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);        
    AssetManager assetManager = getAssets();
    InputStream istr = null;
    PdfReader reader=null;
    String str= null;
    try {
         istr =(InputStream) assetManager.open("resume.pdf");
         reader=new PdfReader(istr);
         str = PdfTextExtractor.getTextFromPage(reader, 1).toString();
         //str=reader.getPageContent(1).toString();
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    TextView tv = (TextView) findViewById(R.id.txtview);
    tv.setText(str);
} 
```

该代码正在运行，但它不显示 PDF 的内容。

我认为这里的问题是没有正确打开 PDF 文档？

**我的目标是从 PDF 文档中提取文本并将其传输到代码中的变量，然后显示它。**

我正在使用 iText 版本 5.3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:29:15.930

如果您的 PDF 是使用 PDF 制作器制作的，那么它是文本而不是扫描的文档或其他图片，应该这样做：

```
 String content;
                PdfReader reader = null;
                try {
                    //String fileName is the string with the path to your .pdf file, for example resources/pdfs/preface.pdf
                    reader = new PdfReader(fileName);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                int numberOfPages = readerTest.getNumberOfPages();
                numberOfPages = numberOfPages + 1;
                for (int page = 1; page < numberOfPages; page++){
                    try {
                        String content1Page = PdfTextExtractor.getTextFromPage(reader, page);
                        content = content + content1Page;
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } 
```

现在`String content`包含 PDF 的文本。

编辑：您也可以先尝试省略`toString()`此行中的方法：`str = PdfTextExtractor.getTextFromPage(reader, 1).toString();`

# actionscript-3 - ActionScript 3 Flash CS6 - 淡出音频

> ID：13005075
> 
> 赞同：0
> 
> 时间：2012-10-22T04:46:51.760
> 
> 标签：actionscript-3, flash, audio, fadeout

我有这个在菜单上播放的背景音乐。`startBtn`每当玩家选择“开始”按钮 ( )时，我想让它平滑地淡出。你是怎样做的？这是我的代码：

```
import flash.events.Event;
import flash.events.MouseEvent;
import flash.system.fscommand;
import flash.media.Sound;
import flash.media.SoundChannel;
import flash.net.URLRequest;
import flash.events.Event;
import flash.media.SoundTransform;
import flash.events.MouseEvent;

//Declare MUSIC Variables
var musicSelection:Sound;
var musicChannel:SoundChannel;
var musicTrack:String = "music/dearly_beloved.mp3";
var musicVolume:Number=0.2;
/*var isMuted = false;*/

loadMusic();
function loadMusic():void 
{
    //first stop old sound playing
    SoundMixer.stopAll();
    musicSelection = new Sound();
    musicChannel = new SoundChannel();
    //create and load the required soun
    musicSelection.load(new URLRequest(musicTrack));
    //when loaded - play it
    musicSelection.addEventListener(Event.COMPLETE, musicLoaded);
}

function musicLoaded(evt:Event):void
{
    //finished with this listener
    musicSelection.removeEventListener(Event.COMPLETE, musicLoaded);
    //play music
    playMusic();
}

function playMusic():void
{
    //play the random or selected music
    musicChannel = musicSelection.play();
    //setting the volume control property to the music channel
    musicChannel.soundTransform = new SoundTransform(musicVolume, 0);
    //but add this one to make repeats
    musicChannel.addEventListener(Event.SOUND_COMPLETE, playAgain);
}

function playAgain(evt:Event):void
{
    // remove this listener and repeat
    musicChannel.removeEventListener(Event.SOUND_COMPLETE, playAgain);
    playMusic();
} 
```

这是第二帧的代码：

```
import flash.events.Event;
import flash.media.SoundTransform;

stop();

optionBtn.addEventListener(MouseEvent.CLICK, goToOption)
function goToOption(event:MouseEvent):void
{
    nextFrame();
}

startBtn.addEventListener(MouseEvent.MOUSE_DOWN, stopMusic);
function stopMusic(event:MouseEvent):void
{
    musicChannel.soundTransform = new SoundTransform(musicVolume, 0);
    while (musicVolume > 0)
    {
        musicVolume--;
    }
}

quitBtn.addEventListener(MouseEvent.MOUSE_DOWN, closeGame);
function closeGame(event:MouseEvent):void 
{
    fscommand("quit");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:09:23.540

使用 while... 只会立即减少音乐 - 在一帧中。您需要做的是添加 ENTER_FRAME 事件，并在其中减少音乐。像这样的东西：

```
addEventListener(Event.ENTER_FRAME, onLoop);

var _oldTime:Number = 0;
private function onLoop(e:Event):void
{
   var resultTime:Number = getTimer() - oldTime;
   if(resultTime > 200 )
   {
      musicVolume -= 0.1;
      oldTime += resultTime;
      if(musicVolume <= 0) 
      {
        removeEventListener(Event.ENTER_FRAME,onLoop);
      } 
   }
} 
```

根据您想要的速度，尝试不同的值来降低音量或何时降低（结果时间 > 200 -> 200ms）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:59:53.983

您可以使用 TweenMax 补间音量：

[http://www.greensock.com](http://www.greensock.com)

[http://forums.greensock.com/topic/4753-volume-fade-outs/page_hl_volume *_* _](http://forums.greensock.com/topic/4753-volume-fade-outs/page__hl__volume)

# sql-server - SQL Server 存储过程比直接查询慢很多

> ID：13005076
> 
> 赞同：9
> 
> 时间：2012-10-22T04:47:23.783
> 
> 标签：sql-server, performance, stored-procedures

我有一张表，里面有超过 100MM 的记录。该表有一个聚集索引和一个非聚集索引。

我可以在表上使用 T-SQL 运行基本计数，运行需要 1 秒。当我在存储过程中放入相同的精确计数查询时，它需要 12 秒才能运行。

我查看了标准查询和存储过程的执行计划，它们都使用非聚集索引。

我不确定为什么存储过程与标准查询相比如此缓慢。

我已经阅读了一些关于在这种情况下重新索引的内容，但我不确定我为什么需要这样做。此外，重新索引需要几个小时，所以我想确保它会起作用。

对此的任何帮助都会很棒。

谢谢

更新

这是存储过程：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE quickCount 

@sYID INT,
@eYID INT

AS
BEGIN

SET NOCOUNT ON;

    SELECT COUNT(leadID)
    FROM dbo.leads
    WHERE yearID >= @sYID
    AND yearID <= @eYID

END
GO 
```

这是标准查询：

```
SELECT COUNT(leadID)
FROM leads
WHERE yearID >= 0
AND yearID <= 99 
```

我确实尝试在没有参数的情况下运行它，并且 SP 运行得更快（1 秒）。所以我假设它与参数有关。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T05:02:54.270

尝试将您的 SP 更改为使用传入变量的本地副本。

就像是

```
ALTER PROCEDURE quickCount  

@sYID INT, 
@eYID INT 

AS 
BEGIN 

SET NOCOUNT ON; 
    DECLARE @Local_sYID INT, 
            @Local_eYID INT 
    SELECT  @Local_sYID = @sYID INT, 
            @Local_eYID = @eYID INT

    SELECT COUNT(leadID) 
    FROM dbo.leads 
    WHERE yearID >= @Local_sYID 
    AND yearID <= @Local_eYID 

END 
```

我之前发现由于参数嗅探，SP 运行速度会慢很多，但是一旦使用变量的副本，性能就会恢复。

[什么是参数嗅探？](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

[SQL Server：参数嗅探](http://www.practicalsqldba.com/2012/06/sql-server-parameter-sniffing.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-22T16:44:50.353

如前所述，这可能是**参数嗅探**问题。尝试包括以下行：

```
OPTION (RECOMPILE) 
```

在您的 SQL 查询结束时。

这里有一篇文章解释什么是参数嗅探：http: [//blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:57:30.797

您总是可以尝试将其作为动态 sql 执行：

```
ALTER PROCEDURE quickCount  

@sYID INT, 
@eYID INT 

AS 
BEGIN 
    SET NOCOUNT ON;

    DECLARE @SQL VARCHAR(max)

    SELECT @SQL = '
    SELECT COUNT(leadID) 
    FROM dbo.leads 
    WHERE yearID >= '+CONVERT(VARCHAR(20),@sYID)+'
    AND yearID <=   '+CONVERT(VARCHAR(20),@eYID)

    EXEC (@SQL)
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:25:52.377

第一次运行存储过程时，SQL Server 必须编译存储过程，这可能需要一些时间。@Astander 提到了参数嗅探——这是一个有效的观点，并且可能会扭曲您的结果。

其他一些需要考虑的因素是（虽然它们不应该真正解释你的症状）：

*   您可以强制锁定级别，例如`WITH (NOLOCK)`在表名之后，这可以解决问题（但请注意，这样做可能会得到不准确的结果）。
*   您可能需要更新表上的统计信息或对索引进行碎片整理

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-04T01:13:50.800

```
EXEC sp_recompile N'dbo.MyStoredProc'; 
```

为我做了诀窍。存储过程需要 13 秒才能运行，查询需要 0.00 秒。运行上述命令后，它们都需要 0.00 秒 :)

# java - java.util.MissingResourceException：找不到基本名称视图的包，语言环境

> ID：13005078
> 
> 赞同：2
> 
> 时间：2012-10-22T04:47:37.590
> 
> 标签：java, spring, model-view-controller, spring-mvc

`views.properties`我的文件夹中有一个名为的`src/main/webapp`文件。我的`court-servlet.xml`文件中有以下行。位于文件夹`court-servlet.xml`中。`src/main/webapp/WEB-INF`

```
<bean id="resourceBundleResolver"
    class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
    <property name="basename" value="views" />
    <property name="order" value="#{contentNegotiatingResolver.order+1}" />
</bean> 
```

但是，每当我启动应用程序时，我都会遇到异常。它不断抛出异常

```
java.util.MissingResourceException: Can't find bundle for base name views, locale en
java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)
java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)
java.util.ResourceBundle.getBundle(ResourceBundle.java:952)
org.springframework.web.servlet.view.ResourceBundleViewResolver.getBundle(ResourceBundleViewResolver.java:271)
org.springframework.web.servlet.view.ResourceBundleViewResolver.initFactory(ResourceBundleViewResolver.java:225)
org.springframework.web.servlet.view.ResourceBundleViewResolver.loadView(ResourceBundleViewResolver.java:194)
org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:158)
org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:77)
org.springframework.web.servlet.view.ContentNegotiatingViewResolver.resolveViewName(ContentNegotiatingViewResolver.java:357)
org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1091)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1040)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:798)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

有人可以帮我解决这个问题吗？我之前尝试过这里发布的一些解决方案，但它们都不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:05:20.407

我找到了解决这个问题的方法。文件`views.properties`需要放在里面`src/main/webapp/WEB-INF/classes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:02:33.110

**更新 ：**

根据您的回答，您缺少将`views.properties`文件放入`class path`. 确保将其放在`class path`. 您不需要`WEB-INF/classes`直接放在目录下。

重命名`views.properties`为`views_en.properties`. 您必须使用 配置`properties`配置`name + _ + locale`。但是，它并不适用于所有情况。

# codeigniter - CodeIgniter 头像上传

> ID：13005081
> 
> 赞同：0
> 
> 时间：2012-10-22T04:48:35.697
> 
> 标签：codeigniter, codeigniter-2

这是新的 HTML：

```
<input type="file" name="file_1" />
<input type="text" name="image_description_1" class="text-input"/> 
```

这是新的 _submit 函数：

```
if($this->CI->input->post('file_1')){
$config['overwrite'] = TRUE;
$config['allowed_types'] = 'jpg|jpeg|gif|png';
$config['max_size'] = 2000;
$config['upload_path'] = realpath(APPPATH . '../assets/uploads/avatars');

$this->CI->load->library('upload', $config);
$this->CI->upload->do_upload();

$image_data = $this->CI->upload->data();

$image['description'] = $this->CI->input->post('image_description_1');
$image['user_id'] = $id;
$image['image'] = $image_data['file_name'];

$this->CI->db->insert('report_images',$image);

} 
```

描述和 user_id 正确提交，但文件丢失。

我应该做一些不同的事情吗？不太确定出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:59:21.170

此表单验证扩展将帮助您在上传之前验证文件，您可以检查它们的最小和最大允许大小，允许的有效文件类型，如果图像最小和最大图像宽度和高度，只需将此库放在您的库文件夹中，然后根据扩展文档设置规则。

[MY_Form_validation](http://devbro.com/testing/ci_form_validation/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:06:09.310

我已经扩展了 Codeigniter 的上传类以完全适合您的需要。在这个类中，我定义了两个方法 validate_upload 和 do_upload。我没有在此文件中编写任何新代码，而是将 do_upload 代码分成两部分。validate_upload 验证上传并在文件未验证时返回 false，并且 do_upload 仅应在 validate_upload 返回 true 时使用。这是代码。

```
Class My_Upload extends CI_Upload
{   

    public function __construct(){
         parent::__construct();
    }   

    public function validate_upload($field = 'userfile')
    {

        // Is $_FILES[$field] set? If not, no reason to continue.
        if ( ! isset($_FILES[$field]))
        {
            $this->set_error('upload_no_file_selected');
            return FALSE;
        }

        // Is the upload path valid?
        if ( ! $this->validate_upload_path())
        {
            // errors will already be set by validate_upload_path() so just return FALSE
            return FALSE;
        }

        // Was the file able to be uploaded? If not, determine the reason why.
        if ( ! is_uploaded_file($_FILES[$field]['tmp_name']))
        {
            $error = ( ! isset($_FILES[$field]['error'])) ? 4 : $_FILES[$field]['error'];

            switch($error)
            {
                case 1: // UPLOAD_ERR_INI_SIZE
                    $this->set_error('upload_file_exceeds_limit');
                    break;
                case 2: // UPLOAD_ERR_FORM_SIZE
                    $this->set_error('upload_file_exceeds_form_limit');
                    break;
                case 3: // UPLOAD_ERR_PARTIAL
                    $this->set_error('upload_file_partial');
                    break;
                case 4: // UPLOAD_ERR_NO_FILE
                    $this->set_error('upload_no_file_selected');
                    break;
                case 6: // UPLOAD_ERR_NO_TMP_DIR
                    $this->set_error('upload_no_temp_directory');
                    break;
                case 7: // UPLOAD_ERR_CANT_WRITE
                    $this->set_error('upload_unable_to_write_file');
                    break;
                case 8: // UPLOAD_ERR_EXTENSION
                    $this->set_error('upload_stopped_by_extension');
                    break;
                default :   $this->set_error('upload_no_file_selected');
                    break;
            }

            return FALSE;
        }

        // Set the uploaded data as class variables
        $this->file_temp        =   $_FILES[$field]['tmp_name'];
        $this->file_size        =   $_FILES[$field]['size'];
        $this->_file_mime_type($_FILES[$field]);
        $this->file_type        =   preg_replace("/^(.+?);.*$/", "\\1", $this->file_type);
        $this->file_type        =   strtolower(trim(stripslashes($this->file_type), '"'));
        $this->file_name        =   $this->_prep_filename($_FILES[$field]['name']);
        $this->file_ext     =   $this->get_extension($this->file_name);
        $this->client_name  =   $this->file_name;

        // Is the file type allowed to be uploaded?
        if ( ! $this->is_allowed_filetype())
        {
            $this->set_error('upload_invalid_filetype');
            return FALSE;
        }

        // if we're overriding, let's now make sure the new name and type is allowed
        if ($this->_file_name_override != '')
        {
            $this->file_name = $this->_prep_filename($this->_file_name_override);

            // If no extension was provided in the file_name config item, use the uploaded one
            if (strpos($this->_file_name_override, '.') === FALSE)
            {
                $this->file_name .= $this->file_ext;
            }

            // An extension was provided, lets have it!
            else
            {
                $this->file_ext  = $this->get_extension($this->_file_name_override);
            }

            if ( ! $this->is_allowed_filetype(TRUE))
            {
                $this->set_error('upload_invalid_filetype');
                return FALSE;
            }
        }

        // Convert the file size to kilobytes
        if ($this->file_size > 0)
        {
            $this->file_size = round($this->file_size/1024, 2);
        }

        // Is the file size within the allowed maximum?
        if ( ! $this->is_allowed_filesize())
        {
            $this->set_error('upload_invalid_filesize');
            return FALSE;
        }

        // Are the image dimensions within the allowed size?
        // Note: This can fail if the server has an open_basdir restriction.
        if ( ! $this->is_allowed_dimensions())
        {
            $this->set_error('upload_invalid_dimensions');
            return FALSE;
        }

        // Sanitize the file name for security
        $this->file_name = $this->clean_file_name($this->file_name);

        // Truncate the file name if it's too long
        if ($this->max_filename > 0)
        {
            $this->file_name = $this->limit_filename_length($this->file_name, $this->max_filename);
        }

        // Remove white spaces in the name
        if ($this->remove_spaces == TRUE)
        {
            $this->file_name = preg_replace("/\s+/", "_", $this->file_name);
        }

        /*
         * Validate the file name
         * This function appends an number onto the end of
         * the file if one with the same name already exists.
         * If it returns false there was a problem.
         */
        $this->orig_name = $this->file_name;

        if ($this->overwrite == FALSE)
        {
            $this->file_name = $this->set_filename($this->upload_path, $this->file_name);

            if ($this->file_name === FALSE)
            {
                return FALSE;
            }
        }

        /*
         * Run the file through the XSS hacking filter
         * This helps prevent malicious code from being
         * embedded within a file.  Scripts can easily
         * be disguised as images or other file types.
         */
        if ($this->xss_clean)
        {
            if ($this->do_xss_clean() === FALSE)
            {
                $this->set_error('upload_unable_to_write_file');
                return FALSE;
            }
        }
        $this->set_image_properties($this->upload_path.$this->file_name);
        return TRUE;
    }

    public function do_upload($field = 'userfile')
    {
        /*
         * Move the file to the final destination
         * To deal with different server configurations
         * we'll attempt to use copy() first.  If that fails
         * we'll use move_uploaded_file().  One of the two should
         * reliably work in most environments
         */
        if ( ! @copy($this->file_temp, $this->upload_path.$this->file_name))
        {
            if ( ! @move_uploaded_file($this->file_temp, $this->upload_path.$this->file_name))
            {
                $this->set_error('upload_destination_error');
                return FALSE;
            }
        }

        /*
         * Set the finalized image dimensions
         * This sets the image width/height (assuming the
         * file was an image).  We use this information
         * in the "data" function.
         */
        return TRUE;    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T04:54:45.657

为什么不只是`do_upload`到您选择的临时目录，或者`/tmp`，做您需要的处理。如果通过，则创建行并将文件存储到您的目录中。

# php - 从 Android 应用程序登录网站。无法发送 POST 请求。使用 GET 请求发送密码可以吗？我应该加密它吗？

> ID：13005082
> 
> 赞同：0
> 
> 时间：2012-10-22T04:48:36.573
> 
> 标签：php, android, post, android-intent, get

我正在尝试从我的 Android 应用程序登录我的网站。发送 POST 请求显然是不可能的，所以唯一的方法是发送 GET 请求。以这种方式发送密码可以吗？我应该以某种方式加密它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:24:31.440

要做到这一点，您应该使用 base64_encode 函数对您的详细信息进行编码并通过“GET”参数传递它。

此外，您可以添加一些东西来混淆密码。因此，这将取决于您希望如何显示和传递您的登录凭据。

*注意：对于移动设备，我认为它不能使用 PHP 中的 bcrypt 之类的加密功能。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:33:57.140

我认为您不可能通过 HTTP GET 发送设备用户的凭据。如果你可以通过一些奇怪的编码方法通过 GET，除非它被加密并且推荐使用 SSL，否则它不会是安全的。然而，通过 HTTP POST 是非常有可能的，并且它也可以被加密。您应该为 POST 使用 SSL。如果您需要参考，这里是一些示例代码。

```
 case R.id.login_login_but:
        Toast.makeText(this, "Logging in...", Toast.LENGTH_SHORT).show();

        ArrayList<NameValuePair> postLogin = new ArrayList<NameValuePair>();
        postLogin.add(new BasicNameValuePair("post_user", "User"));
        postLogin.add(new BasicNameValuePair("post_pass", "Pass));

        try {
            String response = null;
            response = CustomHttpClient.executeHttpPost(
                    "http://giveaway.synamegames.com/appfiles/login.php", postLogin);
            String res = response.toString();
            res = res.replaceAll("\\s+", "");

            if (res.equals(1)) {
            // logged in
            } else {
            // incorrect user or password
            }

        } catch (Exception e) {
            Toast.makeText(this, "Server timeout please try again later. You must have internet.", Toast.LENGTH_SHORT).show();
        }
    break; 
```

而我使用的 PHP 脚本是...

```
<?php
$username=$_POST['post_user'];
$password=$_POST['post_pass'];
$user = 'db_user';
$pswd = 'db_password';
$db = 'db_name';
$server = 'www.domain.com';
$conn = mysql_connect($server, $user, $pswd);
mysql_select_db($db, $conn);
$query=mysql_query("SELECT * FROM users  WHERE  pass =('$password') AND user = $username")or die(mysql_error());

if(mysql_num_rows($query)==1) {
echo 1;
} else {
echo 0;
}
mysql_close($conn);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:25:51.797

您可能必须同时进行加密和发送 POST 请求。如果您的登录过程可用作 API，您可以使用 WebRESTClient 来执行相同的操作。

此外，您可以进行简单的散列，例如

```
MessageDigest md5Hash = MessageDigest.getInstance("MD5");
mDigest = md5Hash.digest(password.getBytes());
String hashedMessage = new String(Hex.encodeHex(mDigest)); 
```

# c++ - 特定地址块中的 I²C EEPROM 读取错误

> ID：13005088
> 
> 赞同：0
> 
> 时间：2012-10-22T04:49:38.983
> 
> 标签：c++, arduino, i2c, eeprom

我有一个 Arduino 的[I²C](http://en.wikipedia.org/wiki/I%C2%B2C)总线连接到 Microchip [PICDEM 2](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1406&dDocName=en010072)板的 I²C 总线，以对其 32K 字节 EEPROM 进行编程。下面的代码存在读取问题。具体来说，我已经用 16 位计数模式写入了整个 EEPROM，并验证了所有数据都是正确的。

以下代码由 PC 上的 Java 程序驱动。我正在读写 16 字节的页面。我已经监控了来自 PC 的地址，它们都是正确的。返回的数据都是正确的，除了 256 字节的地址块`0x0AXX`。读取的数据看起来像来自 的行`0x9F0`。我无法弄清楚为什么会发生错误。

```
#include "Wire.h"

const int bufsize = 68;
char ibuf[bufsize];
int bytecnt;
int result;

void setup() {
    Wire.begin();
    Serial.begin(9600);
}

void i2c_init() {
    Wire.begin();
}

void i2c_write( int addr, int count ){
    Wire.beginTransmission( addr );
    for(int i=0;i<count;i++) {
       Wire.write(ibuf[3+i]);
    }
    result = Wire.endTransmission();
    delay(20);
    Serial.write(result);
}

void i2c_read( int addr, int count ){
    result = Wire.requestFrom( addr, count );
    Serial.write( result );
}

void i2c_xfer( int count ){
    for(int i=0; i<count; i++ ){
        Serial.write( Wire.read() );
    }
}

void loop() {
    // Accept a line of input
    bytecnt = Serial.readBytesUntil('\n', ibuf, bufsize);
    if ( bytecnt > 0 ) {
        switch( ibuf[0] ) {
            case 0: i2c_init(); break;
            case 1: i2c_write(ibuf[1],ibuf[2]); break;
            case 2: i2c_read(ibuf[1],ibuf[2]); break;
            case 3: i2c_xfer(ibuf[1]); break;
            default: break;
        }
    }
} 
```

PC接收到的数据都是正确的，除了以下块：

```
09c0  e0 04 e1 04 e2 04 e3 04 e4 04 e5 04 e6 04 e7 04
09d0  e8 04 e9 04 ea 04 eb 04 ec 04 ed 04 ee 04 ef 04
09e0  f0 04 f1 04 f2 04 f3 04 f4 04 f5 04 f6 04 f7 04
09f0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a00  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a10  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a20  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a30  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a40  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a50  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a60  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a70  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a80  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0a90  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0aa0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0ab0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0ac0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0ad0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0ae0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0af0  f8 04 f9 04 fa 04 fb 04 fc 04 fd 04 fe 04 ff 04
0b00  80 05 81 05 82 05 83 05 84 05 85 05 86 05 87 05
0b10  88 05 89 05 8a 05 8b 05 8c 05 8d 05 8e 05 8f 05
0b20  90 05 91 05 92 05 93 05 94 05 95 05 96 05 97 05 
```

这个块之前和之后的一切都很好，但是 0x0A00 - 0x0AFF 重复了第 0x09F0 行的数据。以下代码用于编写和验证所有计数模式：

```
#include "Wire.h"

int EEPROM = 0x50;
int pageSize = 0x10;
unsigned int length = 0x8000;
unsigned int addr = 0;
unsigned int data = 0;
unsigned int datah = 0;
unsigned int datal = 0;
int result;
unsigned int i;
unsigned int r;
long j;
int k;
int errors;

void setup() {
    Wire.begin();
    Serial.begin(9600);
}

void eeprom_check() {
    for(i=0; i<length; i+=pageSize) {
        // Write to set address pointer
        Wire.beginTransmission( EEPROM );
        Wire.write( (i>>8) & 0xFF );
        Wire.write(  i & 0xFF   );
        Wire.endTransmission();

        if(( i & 0xfF ) == 0 ) {
            Serial.write('\n');
            Serial.print( i,HEX);
            Serial.write(": ");
        }

        errors = 0;
        result = Wire.requestFrom( EEPROM, pageSize );
        for(j=0; j<8; j++) {
            datal = Wire.read();
            datah = Wire.read();
            data = (i>>1)+j;
            if( datal != (data & 0xFF) )
                errors += 1;
            if( datah != ( (data>>8) & 0xFF) )
                errors += 1;
        }
        if( errors > 0 )
            Serial.write('X');
        else
            Serial.write('_');
    }
}

void eeprom_dump() {
    for(i=0; i<length; i+=pageSize) {
        // Write to set address pointer
        Wire.beginTransmission( EEPROM );
        Wire.write( (i>>8) & 0xFF );
        Wire.write(  i & 0xFF   );
        Wire.endTransmission();

        if(( i & 0xF ) == 0 ) {
            Serial.write('\n');
            Serial.print( i,HEX);
            Serial.write(": ");
        }

        result = Wire.requestFrom( EEPROM, pageSize );
        for(j=0; j<result; j++) {
            data = Wire.read();
            if( data < 16 ){
                Serial.print('0');
                Serial.print(data,HEX);
            }
            else {
                Serial.print(data,HEX);
            }
            Serial.print(' ');
        }
    }
}

void eeprom_write() {
    for(i=0; i<length; i+=pageSize) {
        for(k=0; k<10; k++){
            Wire.beginTransmission( EEPROM );
            Wire.write( (i>>8) & 0xFF );
            Wire.write(  i & 0xFF   );

            for(j=0; j<8; j++ ){
                data = (i>>1)+j;
                Wire.write(  data     & 0xFF );
                Wire.write( (data>>8) & 0xff );
            }

            result = Wire.endTransmission();
            delay(10);
            if( result==0 )
                break;
            else
                Serial.write(result);
        }
        k = i / pageSize;
        if(( k & 0xF ) == 0 ) {
            Serial.write('\n');
            Serial.print( i,HEX);
            Serial.write(": ");
        }
        Serial.write('W');
    }
}

void eeprom_break() {
    i = 0xa00;
    Wire.beginTransmission( EEPROM );
    Wire.write( (i>>8) & 0xFF );
    Wire.write(  i & 0xFF   );
    Wire.write( 0x55 );
    Wire.write( 0xAA );
    Wire.endTransmission();
    Serial.write("Break Compelted\n");
}

void loop() {
    char ch;
    Serial.write("Interactive EEPROM Test Tool\n");
    while( true ) {
        Serial.write('>');
        while(  Serial.available() == 0 );
        ch = Serial.read();
        Serial.write( ch );
        Serial.write('\n');
        while( Serial.available() != 0)
            Serial.read();
        switch( ch ) {
            case 'c': eeprom_check(); break;
            case 'd': eeprom_dump(); break;
            case 'w': eeprom_write(); break;
            case 'z': eeprom_break(); break;
            default: break;
        }
    }
} 
```

这几天我一直在为此苦苦挣扎。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:39:09.620

问题解决了（经过很多时间）！

Java 程序以一行的形式向 Arduino 发送命令，该命令以单个数字开头，然后是一系列字节和一​​个 CR。就是这样！当地址是0x0A？？0A 是 CR，它会截断我的命令！我觉得很愚蠢。

# iphone - 如何判断特定字体是否具有> 64k的特定字形

> ID：13005091
> 
> 赞同：2
> 
> 时间：2012-10-22T04:50:05.720
> 
> 标签：iphone, ios

当代码点适合 64 位值时，确定特定 Unicode 字体是否包含代码点的字形相对容易。

```
if (CTFontGetGlyphsForCharacters(ctFont, chars, glyphs, 1)) {
    // It exists
} 
```

但是 CTFontGetGlyphsForCharacters 需要一个 UniChar 数组，它是 16 位类型。是否有一种方法可以确定字形是否可用于超出此范围的字符？例如，U+1F4A9？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T22:18:56.497

这就是我最终使用的（其中 codePoint 是您要测试的 32 位代码点）：

```
 UniChar characters[2];
    CFIndex length = (CFStringGetSurrogatePairForLongCharacter(codePoint, characters) ? 2 : 1);

    CGGlyph glyphs[2];
    if (CTFontGetGlyphsForCharacters(ctFont, characters, glyphs, length)) {
        // It Exists
    } 
```

# apache-flex - Flex表单：如何根据内容自动改变表单的宽度

> ID：13005093
> 
> 赞同：0
> 
> 时间：2012-10-22T04:50:15.597
> 
> 标签：apache-flex

我正在创建一个弹性表单，其代码如下：-
`<s:layout>`
`<s:VerticalLayout/>`
`</s:layout>`
`<s:Form>`
`<s:layout>`
`<s:FormLayout gap="5"/>`
`</s:layout>`
`<s:FormItem label="First Name : ">`
`<s:TextInput id="fn" />`
`</s:FormItem>`
`<s:FormItem label="Last Name : ">`
`<s:TextInput id="ln" />`
`</s:FormItem>`
`<s:FormItem label="Email Address :">`
`<s:TextInput id="ea"/>`
`</s:FormItem>`
`<s:FormItem label="Re-enter Email Address :">`
`<s:TextInput id="rea"/>`
`</s:FormItem>`
`<s:FormItem label="Password :">`
`<s:TextInput id="pw" displayAsPassword="true" />`
`</s:FormItem>`
`<s:FormItem label="Re Enter Password :">`
`<s:TextInput id="rpw" displayAsPassword="true" />`
`</s:FormItem>`
`<s:FormItem label="Security Question">`
`<s:DropDownList>`
`<s:ArrayList>`
`<fx:String>Mother's maiden name?</fx:String>`
`<fx:String>Birthplace?</fx:String>`
`<fx:String>Pet's name?</fx:String>`
`<fx:String>Favourite destination</fx:String>`
`</s:ArrayList>`
`</s:DropDownList>`
`</s:FormItem>`
`<s:FormItem>`
`<s:Button label="Submit" click="abc()" />`
`</s:FormItem>`
`</s:form>`

现在我有一个问题，就是如何增加下拉菜单的宽度，使它看起来很棒。如何根据内容改变宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:56:39.147

你可以试试

```
<Component width="100%" /> 
```

或者

```
<Component left="0" right="0" /> 
```

这取决于你的目的，

# c# - 在 C# 中解析 HTML 表

> ID：13005098
> 
> 赞同：9
> 
> 时间：2012-10-22T04:51:14.123
> 
> 标签：c#, parsing, html-agility-pack, html-table

我有一个包含表格的 html 页面，我想以 C# windows 形式解析该表格

> [http://www.mufap.com.pk/payout-report.php?tab=01](http://www.mufap.com.pk/payout-report.php?tab=01)

这是我想解析的网页我试过

```
> Foreach(Htmlnode a in document.getelementbyname("tr"))
{
    richtextbox1.text=a.innertext;
} 
```

我已经尝试过这样的事情，但它不会以表格形式给我，因为我只是打印所有 trs 所以请帮助我解决这个thanx对不起我的英语。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-22T06:13:52.147

使用[HTML 敏捷包](http://html-agility-pack.net/?z=codeplex)

```
WebClient webClient = new WebClient();
string page = webClient.DownloadString("http://www.mufap.com.pk/payout-report.php?tab=01");

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(page);

List<List<string>> table = doc.DocumentNode.SelectSingleNode("//table[@class='mydata']")
            .Descendants("tr")
            .Skip(1)
            .Where(tr=>tr.Elements("td").Count()>1)
            .Select(tr => tr.Elements("td").Select(td => td.InnerText.Trim()).ToList())
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-22T04:59:15.783

你的意思是这样的吗？

```
foreach (HtmlNode table in doc.DocumentNode.SelectNodes("//table")) {
    ///This is the table.    
    foreach (HtmlNode row in table.SelectNodes("tr")) {
    ///This is the row.
        foreach (HtmlNode cell in row.SelectNodes("th|td")) {
            ///This the cell.
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T10:23:55.810

迟到了，但是使用普通 C# 代码执行您要求的方法可能如下

```
/// <summary>
/// parses a table and returns a list containing all the data with columns separated by tabs
/// e.g.: records = getTable(doc, 0);
/// </summary>
/// <param name="doc">HtmlDocument to work with</param>
/// <param name="number">table index (base 0)</param>
/// <returns>list containing the table data</returns>
public List<string> getTableData(HtmlDocument doc, int number)
{
  HtmlElementCollection tables = doc.GetElementsByTagName("table");
  int idx=0;
  List<string> data = new List<string>();

  foreach (HtmlElement tbl in tables)
  {
    if (idx++ == number)
    {
      data = getTableData(tbl);
      break;
    }
  }
  return data;
}

/// <summary>
/// parses a table and returns a list containing all the data with columns separated by tabs
/// e.g.: records = getTable(getElement(doc, "table", "id", "table1"));
/// </summary>
/// <param name="tbl">HtmlElement table to work with</param>
/// <returns>list containing the table data</returns>
public List<string> getTableData(HtmlElement tbl)
{
  int nrec = 0;
  List<string> data = new List<string>();
  string rowBuff;

  HtmlElementCollection rows = tbl.GetElementsByTagName("tr");
  HtmlElementCollection cols;
  foreach (HtmlElement tr in rows)
  {
    cols = tr.GetElementsByTagName("td");
    nrec++;
    rowBuff = nrec.ToString();
    foreach (HtmlElement td in cols)
    {
      rowBuff += "\t" + WebUtility.HtmlDecode(td.InnerText);
    }
    data.Add(rowBuff);
  }

  return data;
} 
```

以上将允许您通过使用页面内的表“索引”（对未命名的表有用）或通过将“表”HtmlElement 传递给函数（更快但仅对命名表有用）从表中提取数据；请注意，我选择返回“列表”作为结果，并使用制表符分隔各个列数据；您可以轻松更改代码以您喜欢的任何其他格式返回数据

# javascript - 如何获取位于页面中给定位置的 DOM 元素列表

> ID：13005100
> 
> 赞同：6
> 
> 时间：2012-10-22T04:51:18.460
> 
> 标签：javascript, jquery, html, dom, mouseevent

> **可能重复：**
> [通过绝对坐标定位 DOM 元素](https://stackoverflow.com/questions/4786066/locating-dom-element-by-absolute-coordinates)

我想找出位于单击鼠标位置的所有 DOM 元素的列表。我需要使用 javascript 或 jquery 来执行此操作。有人可以建议我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:59:32.973

我会使用 jQuery 来执行此操作，从单击的元素开始并获取所有单击的元素的列表。在鼠标单击时向文档添加处理程序：

```
$( document ).click( function( event ) {
    // event.currentTarget is the clicked element
    // this is a list of all the parents of the clicked element
    $( event.currentTarget ).parents();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:52:32.733

这可以完成工作（[小提琴](http://jsfiddle.net/U2RCE/12/)）：

```
$(document).click(function(e) {
    var hitElements = getHitElements(e);
});

var getHitElements = function(e) {
    var x = e.pageX;
    var y = e.pageY;
    var hitElements = [];

    $(':visible').each(function() {
        var offset = $(this).offset();
        if (offset.left < x && (offset.left + $(this).outerWidth() > x) && (offset.top < y && (offset.top + $(this).outerHeight() > y))) {
            hitElements.push($(this));
        }
    });

    return hitElements;
}​ 
```

使用时`:visible`，您应该注意这一点：

> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。在隐藏元素的动画期间，该元素被认为是可见的，直到动画结束。在显示元素的动画期间，该元素被认为在动画开始时可见。

因此，根据您的需要，您可能希望排除`visibility:hidden`and`opacity:0`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:32:04.130

您无法使用 javascript 通过坐标位置模拟鼠标点击（想想这将是一个多么安全的问题！），所以我认为您无法完成您想要做的事情。另外，没有编程方式可以查看页面上任意 x/y 位置可能存在哪些图层。如果您只是尝试调试某些内容并希望查看页面上某个 x,y 位置的所有内容，只需在查看完 Firebug 或 Chrome 检查器中的每个元素并使用检查器查看下面的内容即可它。

如果你真的需要一个工具来做你想做的事，你可以结合使用 jquery 和浏览器插件。您可以编写一个 Chrome 或 Firefox 扩展程序，使用 event.x 和 event.y 坐标模拟真实的鼠标点击。然后，您可以使用前面提到的捕获单击元素的所有父项的建议。对这些元素进行编目后，找到单击项目的最顶层父级，克隆它，删除除最顶层父级本身之外的所有克隆元素，并将该最顶层父级的背景设置为透明。现在用这个透明的克隆元素替换 DOM 中的原始元素。这样，您保留了页面的布局，当您模拟另一次点击时，您实际上是在点击“通过” 最顶部的元素（透明的）并单击它后面的下一个 DOM 元素（如果有的话）。重复上述过程，直到到达 body 标签。最后，您将在特定 x,y 位置获得所有 DOM 元素的完整列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:24:17.153

检查这个 - [http://jsfiddle.net/blackpla9ue/U2RCE/5/](http://jsfiddle.net/blackpla9ue/U2RCE/5/)
点击**“世界”**这个词来查看它的实际效果。

这也适用于`absolute`定位元素。

```
$('*').click(function(event){
    console.log($(this)[0].tagName + ' ' + $(this)[0].className);
});​ 
```

# java - 如何将 json 数据发送到 POST RESTful 服务

> ID：13005101
> 
> 赞同：5
> 
> 时间：2012-10-22T04:51:32.823
> 
> 标签：java, android, web-services

我想用POST方法调用一个rest webservice。下面是我需要传递的服务url及其参数

```
 Rest Service: https://url/SSOServer/SSO.svc/RestService/Login

Json Object {"ProductCode":"AB","DeviceType":"android Simulator","UserName":"","ModuleCode":"AB_MOBILE","DeviceId":"device-id","Version":"1.0.0.19","CustomerCode":"w","Password":""} 
```

这是我的帖子请求代码：

```
public void sendHttpPost() throws ClientProtocolException, IOException{
        HttpPost httpPostRequest = new HttpPost(url + buildParams());

        // add headers
        Iterator it = headers.entrySet().iterator();
        Iterator itP = params.entrySet().iterator();
        while (it.hasNext()) {
            Entry header = (Entry) it.next();
            httpPostRequest.addHeader((String)header.getKey(), (String)header.getValue());
        }

        HttpClient client = new DefaultHttpClient();
        HttpResponse resp;

        resp = client.execute(httpPostRequest);

        this.respCode = resp.getStatusLine().getStatusCode();
        Log.i(TAG, "response code: " + getResponseCode());
        this.responsePhrase = resp.getStatusLine().getReasonPhrase();
        Log.i(TAG, "error msg: " + getErrorMsg());
        HttpEntity entity = resp.getEntity();

        if (entity != null){
            InputStream is = entity.getContent();
            //Header contentEncoding = resp.getFirstHeader("Content-encoding");
            //Log.i(TAG, "endoding" + contentEncoding.getValue());
            response = convertStreamToString(is);
            //response = response.substring(1,response.length()-1);
            //response = "{" + response + "}";
            Log.i(TAG, "response: " + response);
            is.close();
        }
    } 
```

我的问题是如何向这个请求添加 json 数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:58:56.233

使用下面的类

```
public class RestClient
{
    private ArrayList<NameValuePair> params;
    private ArrayList<NameValuePair> headers;

    private String url;

    private int responseCode;
    private String message;

    private String response;

    public String getResponse()
    {
        return response;
    }

    public String getErrorMessage()
    {
        return message;
    }

    public int getResponseCode()
    {
        return responseCode;
    }

    public RestClient(String url) {
        this.url = url;
        params = new ArrayList<NameValuePair>();
        headers = new ArrayList<NameValuePair>();
    }

    public void AddParam(String name, String value)
    {
        params.add(new BasicNameValuePair(name, value));
    }

    public void AddHeader(String name, String value)
    {
        headers.add(new BasicNameValuePair(name, value));
    }

    public void Execute(RequestMethod method) throws Exception
    {
        switch (method)
        {
        case GET:
        {
            // add parameters
            String combinedParams = "";
            if (!params.isEmpty())
            {
                combinedParams += "";
                for (NameValuePair p : params)
                {
                    String paramString = p.getName() + "" + URLEncoder.encode(p.getValue(),"UTF-8");
                    if (combinedParams.length() > 1)
                    {
                        combinedParams += "&" + paramString;
                    }
                    else
                    {
                        combinedParams += paramString;
                    }
                }
            }

            HttpGet request = new HttpGet(url + combinedParams);

            // add headers
            for (NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            executeRequest(request, url);
            break;
        }
        case POST:
        {
            HttpPost request = new HttpPost(url);

            // add headers
            for (NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            if (!params.isEmpty())
            {
                request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
            }

            executeRequest(request, url);
            break;
        }
        }
    }

    private void executeRequest(HttpUriRequest request, String url) throws Exception
    {

        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters,15000);
        HttpConnectionParams.setSoTimeout(httpParameters, 15000);
        HttpClient client = new DefaultHttpClient(httpParameters);

        HttpResponse httpResponse;

            httpResponse = client.execute(request);
            responseCode = httpResponse.getStatusLine().getStatusCode();
            message = httpResponse.getStatusLine().getReasonPhrase();

            HttpEntity entity = httpResponse.getEntity();

            if (entity != null)
            {

                InputStream instream = entity.getContent();
                response = convertStreamToString(instream);

                // Closing the input stream will trigger connection release
                instream.close();
            }

    }

    private static String convertStreamToString(InputStream is)
    {

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try
        {
            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
        }
        catch (IOException e)
        {

            e.printStackTrace();
        }
        finally
        {
            try
            {
                is.close();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
    public InputStream getInputStream(){
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters,15000);
        HttpConnectionParams.setSoTimeout(httpParameters, 15000);
        HttpClient client = new DefaultHttpClient(httpParameters);

        HttpResponse httpResponse;

        try
        {

               HttpPost request = new HttpPost(url);

            httpResponse = client.execute(request);
            responseCode = httpResponse.getStatusLine().getStatusCode();
            message = httpResponse.getStatusLine().getReasonPhrase();

            HttpEntity entity = httpResponse.getEntity();

            if (entity != null)
            {

                InputStream instream = entity.getContent();
                return instream;
             /*   response = convertStreamToString(instream);

                // Closing the input stream will trigger connection release
                instream.close();*/
            }

        }
        catch (ClientProtocolException e)
        {
            client.getConnectionManager().shutdown();
            e.printStackTrace();
        }
        catch (IOException e)
        {
            client.getConnectionManager().shutdown();
            e.printStackTrace();
        }
        return null;
    }
    public enum RequestMethod
    {
        GET,
        POST
    }
} 
```

这是如何使用上述类的代码

```
RestClient client=new RestClient(Webservices.student_details);
JSONObject obj=new JSONObject();
obj.put("StudentId",preferences.getStudentId());
client.AddParam("",obj.toString());
client.Execute(RequestMethod.GET);
String response=client.getResponse(); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:53:36.953

Q：如何在这个请求中添加json数据？

答：设置您的内容类型、长度并写入有效负载。

这是一个例子：

*   [http://localtone.blogspot.com/2009/07/post-json-using-android-and-httpclient.html](http://localtone.blogspot.com/2009/07/post-json-using-android-and-httpclient.html)

```
    JSONObject 持有者 = new JSONObject();
    ...
    JSONObject 数据 = 新 JSONObject();
    ...
    // 一些示例名称=值对
    而（iter.hasNext（））{
      Map.Entry 对 = (Map.Entry)iter.next();
      字符串键 = (String)pairs.getKey();
      映射 m = (Map)pairs.getValue();

      JSONObject 数据 = 新 JSONObject();
      迭代器 iter2 = m.entrySet().iterator();
      而（iter2.hasNext（））{
        Map.Entry pair2 = (Map.Entry)iter2.next();
        data.put((String)pairs2.getKey(), (String)pairs2.getValue());
      }
      持有人.put（密钥，数据）；
    }
    ...
    StringEntity se = new StringEntity(holder.toString());
    ...
    httpost.setHeader("接受", "application/json");
    httpost.setHeader("内容类型", "应用程序/json");
    ...

```

# coq - Coq：根据唯一性和存在性定理定义函数

> ID：13005103
> 
> 赞同：1
> 
> 时间：2012-10-22T04:51:54.520
> 
> 标签：coq, theorem-proving

为了尽可能地隔离这个问题，假设我开始一个 Coq 会话，如下所示。

```
Parameter A : Type.
Parameter B : Type.
Parameter P : A -> B -> Prop.

Axiom existence : forall a : A, exists b : B, P a b.
Axiom uniqueness : forall a : A, forall b b' : B, P a b -> P a b' -> b = b'. 
```

从这里开始，我想将一个函数定义为始终为真的`f : A -> B`唯一函数。`P a (f a)`

我怎样才能做到这一点？*我可以*这样做吗？显然我应该从类似的东西开始

```
Definition f : A -> B.
  intro a.
  assert (E := existence a).
  assert (U := uniqueness a). 
```

...但是我如何根据这些假设实际编写函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:32:18.893

我相信在您当前的设置中这是不可能的。

问题是您可以从`existence`定理中提取 b，但这只能存在于`Prop`.

所以，我相信你要么必须搬进`A`去`B`，`Prop`要么搬进`existence`去`uniqueness`。`Set`

这将导致以下任一情况：

* * *

```
Parameter A : Prop.
Parameter B : Prop.
Parameter P : A -> B -> Prop.

Axiom existence : forall a : A, exists b : B, P a b.
Axiom uniqueness : forall a : A, forall b b' : B, P a b -> P a b' -> b = b'.

Definition f : A -> B.
  intro a. destruct (existence a) as [b _]. exact b.
Defined. 
```

* * *

```
Parameter A : Set.
Parameter B : Set.
Parameter P : A -> B -> Prop.

Axiom existence : forall a : A, { b : B | P a b }.
Axiom uniqueness : forall a : A, forall b b' : B, P a b -> P a b' -> b = b'.

Definition f : A -> B.
  intro a. destruct (existence a) as [b _]. exact b.
Defined. 
```

* * *

很可能这些都不是您真正想要的。在这种情况下，我需要更多详细信息才能提供帮助。可能是你愿意做一些在直觉主义环境中不可能的事情。

PS：我不是专家。

# ruby - 在特定结构的一行 ruby 代码中合并两个数组

> ID：13005106
> 
> 赞同：0
> 
> 时间：2012-10-22T04:53:08.753
> 
> 标签：ruby

我有两个数组

```
default = ['0', '0', '0', '0'] # this is fixed
new = ['2', '3', ''] # it can be of many variants like ['', '1'] or 
                   # ['1', '', '', ''], but will never have 
                   # more than 4 elements 
```

我想从上面的两个数组中得到一个结果数组

```
['2', '3', '0', '0'] 
```

如何通过*一行**简单*的ruby​​ 代码实现它？我可以在多行或在注入/减少的帮助下完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:26:35.537

```
default.zip(new).map { |d,n| (n.nil? or n.empty?) ? d : n } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:59:14.820

如果您使用的是导轨-

```
n = 4 # number of elements you need
n.times.map{|x| new[x].presence || default[x] } 
```

如果不

```
n = 4 # number of elements you need
n.times.map{|x| (new[x].nil? || new[x] == "") ? default[x] : new[x] } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:20:00.060

如果我理解正确，您想要做的是将“新”数组中的空白/空值替换为“默认”数组中的相应值

试试这个

```
 default.each_index.collect {|i| (new[i].nil? || new[i] == '') ? default[i] : new[i]} 
```

这应该适用于任何长度的“默认”数组。返回的数组将与“默认”具有相同的长度

# perl - 如何让未知的根标签解析起作用

> ID：13005107
> 
> 赞同：1
> 
> 时间：2012-10-22T04:53:08.870
> 
> 标签：perl, xml-twig

我在做 xml 转换，在这里我将根标签定义为书，但是如何在这里定义未知的根标签，我需要通用语法，

```
use twig;

my $story_file = XML::Twig->new(
                                   twig_handlers =>{
                                            'book' => \&book,
                                            keep_atts_order => 1,
                                            },
                                            pretty_print => 'indented',
                                  );

$story_file->parsefile('unknown.xml');
$story_file->print($out); 
```

我试过了，

```
use twig;

my $story_file = XML::Twig->new(
                                   twig_handlers =>{
                                            root => \&book,
                                            keep_atts_order => 1,
                                            },
                                            pretty_print => 'indented',
                                  );

$story_file->parsefile('unknown.xml');
$story_file->print($out); 
```

它没有用，如果有任何用于根标签的 comman syntex，请举个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:08:49.057

twig_handlers 的键是 XPath，所以你可以使用`/*`.

```
use XML::Twig;

sub root { print "root\n"; }

my $story_file = XML::Twig->new(
   twig_handlers =>{
      '/*' => \&root,
   },
   keep_atts_order => 1,
   pretty_print    => 'indented',
);

$story_file->parsefile('unknown.xml');
$story_file->print($out); 
```

我安装了 3.41。

# php - 如何在验证回调函数中访问数组字段名称值？

> ID：13005108
> 
> 赞同：0
> 
> 时间：2012-10-22T04:53:16.860
> 
> 标签：php, validation, codeigniter, frameworks

在我看来，我得到了一些文本输入：

```
<label for="car-n">Car Name:</label><input type="text" name="cars[]" id="car-n"/>
<label for="car-t">Car Type:</label><input type="text" name="cars[]" id="car-t"/> 
```

现在，我想使用 CodeIgniter 的验证回调函数来验证它们，但似乎我无法获取它们的值：

`$this->form_validation->set_rules('cars[]', 'Cars', 'required|xss_clean|callback__validate_cars');`

...和功能：

```
function _validate_cars($input)
{
     echo $input; //returns no field value;
     echo $this->form_validation->set_value('cars[]'); //not works
} 
```

那么，我应该如何在我的回调函数中访问这两个字段值呢？我还没有在 CodeIgniters 用户指南中看到有关此案例的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:12:22.610

好的，看看下面的控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Temp extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->library(array('form_validation'));
    }

    public function index()
    {
        $this->show_form();
    }

    public function validate(){
        $this->form_validation->set_rules('cars[]', 'Cars', 'required|callback_validate_cars');
        if ($this->form_validation->run() == FALSE)
        {
            $this->show_form();

        }
        else "All is ok";
    }

    public function validate_cars($string)
    {
        print_r($this->input->post('cars'));
        return false;
    }

    public function show_form()
    {
        echo '<form action="'. base_url('temp/validate').'" method="post">';
        echo 'Car 1: <input name="cars[]" type="text">';
        echo ' Car 2: <input name="cars[]" type="text">';
        echo '<input type="submit" value="Go!">';
        echo '</form';
    }
} 
```

您可以使用 post 值作为`$this->input->post('cars');`

# c# - 如何在第一次单击时激活组合框（Datagridview）

> ID：13005112
> 
> 赞同：40
> 
> 时间：2012-10-22T04:53:52.467
> 
> 标签：c#, .net, winforms, datagridview, combobox

在winforms中，你需要点击组合框两次才能正确激活它——第一次聚焦它，第二次真正得到下拉列表。

如何更改此行为以使其在第一次单击时激活？

这适用于 DATAGRIDVIEW 组合框。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-10-23T14:38:11.530

我意识到这是一个老问题，但我想我会将我的解决方案提供给可能需要能够做到这一点的任何人。

虽然我找不到任何答案来做到这一点......我确实找到了一个对我有帮助的不同问题的[答案。](https://stackoverflow.com/a/242760/4000801)

这是我的解决方案：

```
private void datagridview_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        bool validClick = (e.RowIndex != -1 && e.ColumnIndex != -1); //Make sure the clicked row/column is valid.
        var datagridview = sender as DataGridView;

        // Check to make sure the cell clicked is the cell containing the combobox 
        if(datagridview.Columns[e.ColumnIndex] is DataGridViewComboBoxColumn && validClick)
        {
            datagridview.BeginEdit(true);
            ((ComboBox)datagridview.EditingControl).DroppedDown = true;
        }
    }

private void datagridview_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        datagridview.CommitEdit(DataGridViewDataErrorContexts.Commit);
    } 
```

**上面的代码必须绑定到 datagridview 的 CellEnter 事件中。**

我希望这有帮助！

**编辑：**添加了列索引检查以防止在选择整行时崩溃。

谢谢，为上述编辑彻[夜未眠](https://stackoverflow.com/users/1906911/up-all-night)

**edit2：**代码现在与 CellEnter 而不是 CellClick 事件相关联。

谢谢，[HaraldDutch](https://stackoverflow.com/users/2281790/haralddutch)进行上述编辑

**edit3：**任何更改都将立即提交，这将使您无需单击另一个单元格以更新当前的组合框单元格。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-22T05:45:23.953

在 DataGridView 上设置以下内容：

```
EditMode = EditOnEnter 
```

这可能是最简单的解决方案，并且当被问到这个问题时，这也是 SO 上许多用户的解决方法。

* * *

**编辑 ：**

[在此处](https://stackoverflow.com/questions/6342334/open-dropdownin-a-datagrid-view-items-on-a-single-click)执行以下操作：

**设置编辑模式：**

```
EditMode = EditOnKeystrokeOrF2 
```

**修改datagridview上的EditingControlShowing事件：**

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    ComboBox ctl = e.Control as ComboBox;
    ctl.Enter -= new EventHandler(ctl_Enter);
    ctl.Enter += new EventHandler(ctl_Enter);

}

void ctl_Enter(object sender, EventArgs e)
{
    (sender as ComboBox).DroppedDown = true;
} 
```

这会给你你想要的结果。让我知道如果那不这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-06T07:05:03.260

我只改变了to的`EditMode`属性，它工作得很好。`datagridview``EditOnEnter`

```
EditMode  = EditOnEnter 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T18:59:29.077

如果将整个网格设置为 EditOnEnter，当您在文本列上时，您可以获得一些非常时髦的活动。这是我的解决方案，应该是不言自明的。如果您不知道列名，您可以在 mousemove 上检查单元格类型。

```
Private Sub GridView_CellMouseMove(sender As Object, e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles GridView.CellMouseMove
    Select Case GridView.Columns(e.ColumnIndex).Name
        Case "Ad_Edit", "Size_Caption", "Demo_Code"
            GridView.EditMode = DataGridViewEditMode.EditOnEnter
        Case Else
            GridView.EditMode = DataGridViewEditMode.EditOnKeystrokeOrF2
    End Select
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T05:20:17.620

将组合框的 DropDownStyle 属性设置为 DropDownList...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-24T10:16:04.417

也许旧.. 但请确保将`ReadOnly`属性设置为`false`，否则单元格将不会进入编辑模式，因此`EditingControl`返回 null 并且强制转换`DroppedDown = true`将转换为`NullReferencException`.

# android - Android 将 Unix 时间转换为 GMT 时间

> ID：13005116
> 
> 赞同：2
> 
> 时间：2012-10-22T04:54:28.653
> 
> 标签：android

我在将 unix 时间转换为 GMT 时遇到了麻烦。

我有以下代码，但我想知道如何反之亦然。

```
 public static String GetUnixTime() 
    { 
                 Calendar calendar = Calendar.getInstance(); 
                 long now = calendar.getTimeInMillis(); 

               return Long.toString(now);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:58:13.023

尝试这个

```
Date d = new Date(1308670980000L);
SimpleDateFormat f = new SimpleDateFormat("dd.MM.yyyy,HH:mm");
f.setTimeZone(TimeZone.getTimeZone("GMT"));
String s = f.format(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:12:21.147

长 unixTime = unixTime;

java.util.Date GMTTime=新 java.util.Date(unixTime);

System.out.println("GMTTime::"+ GMTTime);

# c++ - 如何在 C++ 中设置带参数的功能宏？

> ID：13005119
> 
> 赞同：1
> 
> 时间：2012-10-22T04:55:00.883
> 
> 标签：c++

有没有办法让我完成这项工作？还是我需要使用单独的文件？

```
#include <iostream>                                                     // Necessary 
using namespace std;
#define long double mMaxOf2(long double min, long double max)
#define long double mMaxOf3(long double Min, long double Max, long double Mid)\
{\
     mMaxOf2(mMaxOf2((Min), (Mid), (Max)));\
}

int main()
{
    double primary;
    double secondary;
    double tertiary;
    cout << "Please enter three numbers: ";
    cin >> primary >> secondary >> tertiary;
    cout << "The maximum of " << primary << " " << secondary << " " << tertiary;
    cout << " using mMaxOf3 is " << (mMaxOf3(primary, secondary, tertiary));

    return 0;
} 
```

问题在于 mMaxOf3，它没有被声明……嗯，也许我需要原型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:57:46.703

多行宏需要在每行末尾有一个 \ 字符（最后一行除外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:15:24.533

不鼓励使用宏。改用函数。除非这是一项特别希望您编写宏的家庭作业。在这种情况下，您应该知道宏基于相当简单的文本替换。他们不知道类型，也没有范围（这就是为什么不应该使用它们）。例如，确定两个整数的最大值的函数：

```
int max(int a, int b)
{
    return a > b ? a : b;
} 
```

但是，执行相同操作的宏对 s 没有任何了解`int`，也没有范围`return`，对宏也没有任何意义：

```
#define max(a, b) (a > b ? a : b) 
```

使用该宏意味着预处理器将简单地将您的文本替换为宏的定义。例如，如果你这样写：

```
max(3, 5); 
```

预处理器将该文本转换为：

```
(3 > 5 ? 3 : 5) 
```

就是这样。没有类型，没有范围，只是文本的简单复制和粘贴。你也可以这样写：

```
max(if, else); 
```

并且预处理器仍然很乐意将其转换为：

```
(if > else ? if : else) 
```

这是零意义。它不检查它，它不在乎。它只处理文本。我希望这现在可以清楚地说明为什么这样的事情：

```
#define long double mMaxOf2(long double min, long double max) 
```

不能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:02:12.797

至少有两件事是错误的：

1.  宏必须在一行中声明，因此您必须使用反斜杠 (\) 分隔行
2.  宏也不能返回值，所以那里的“返回”不会做你想做的事。

您应该考虑复制/粘贴之类的宏。

# uitableview - 删除后防止访问CoreData对象访问

> ID：13005121
> 
> 赞同：1
> 
> 时间：2012-10-22T04:55:24.037
> 
> 标签：uitableview, core-data, asynchronous, ios

所以这就是我面临的问题。我有一个由 NSFetchedResultsController 支持的 UITableView。现在在应用程序启动时，我更新了数据源，这涉及进行多个网络调用和处理传入的数据。如果用户在更新数据源时删除了其中一行，则在异步网络回调中访问已删除的数据会使应用程序崩溃。我该如何优雅地处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:42:29.410

`isDeleted`在访问对象之前尝试调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:55:27.633

如果您使用 NSFetchedResultsController 的内存跟踪，您将能够在记录从持久存储中删除之前从界面中删除记录。确保读取 NSFetchedResultsController 的委托的 NSFetchedResultsChangeType，并确保将后台线程（正在删除对象的位置）的 NSManagedObjectContext 与读取记录的 NSManagedObjectContext 合并。

确定对象是否已被删除的一个好方法是使用 existingObjectWithID:error: 检查具有当前对象 ID 的现有对象。这在使用没有 NSFetchedResultsController 的 NSManagedObjects 时非常有用。

# javascript - 尝试设置随机文本。我的代码有什么问题？

> ID：13005122
> 
> 赞同：2
> 
> 时间：2012-10-22T04:55:44.710
> 
> 标签：javascript, random

我正在尝试设置一些基本上从一组预定义短语中选择的内容，并将其显示为我页面上的子标题。我在这里做错了什么？

```
 <html>
    <head>
    <script type="text/javascript">
        function RandomQuote()
        {
        var quotes= new Array();
        quotes[0] = 'Home of Fall!'
        quotes[1] = 'At Least This is Something!'
        quotes[2] = 'Javascript!'
        quotes[3] = 'Railroads at Last!'
        quotes[4] = 'Better than Wikipedia'
        quotes[5] = 'Now with Scorpions!'
        quotes[6] = 'Irrelevant Stuff!'
        quotes[7] = 'Fall is here!'
        quotes[8] = 'That moment when Image-908329490283094.jpg'
        quotes[9] = 'With Added Roundness!'
        quotes[10] = 'Bacon!'
        quotes[11] = 'Try Out WinterNstuff!'
        quotes[12] = 'Try Out SpringNstuff!'
        quotes[13] = 'Try Out SummerNstuff!'
        quotes[14] = 'all html is lowercase!'
        quotes[15] = '<div id=''youWishYouCouldReadThis''>InsertCodeHere</div>'
        quotes[16] = 'In Remembrance of the soldiers who died in the Iranian War'
        quotes[17] = 'Leaf Me Alone!'
        quotes[18] = 'Pumpkins Were So 2011.'
        quotes[19] = 'This Does not Count as a Random String'
        quotes[20] = 'With Added Content Generation!'

    return quotes[Math.floor((Math.random() * 19.9999))];
}
    </script>
    <title></title>
    </head>
    <body>
    <div id="container">
    <div id="header">
    <table style="background-color:blue">
    String:
    <script type="text/javascript">document.write(RandomQuote());</script>
    </table>
    </body>
</div>
</div> 
```

作为后续，有没有办法配置标题以使用随机字符串生成做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:01:10.130

您需要在引号 [15] 中转义引号。这是一个工作小提琴[http://jsfiddle.net/ranjith19/HCCSW/](http://jsfiddle.net/ranjith19/HCCSW/)

```
function RandomQuote()
    {
    var quotes= new Array();
    quotes[0] = 'Home of Fall!'
    quotes[1] = 'At Least This is Something!'
    quotes[2] = 'Javascript!'
    quotes[3] = 'Railroads at Last!'
    quotes[4] = 'Better than Wikipedia'
    quotes[5] = 'Now with Scorpions!'
    quotes[6] = 'Irrelevant Stuff!'
    quotes[7] = 'Fall is here!'
    quotes[8] = 'That moment when Image-908329490283094.jpg'
    quotes[9] = 'With Added Roundness!'
    quotes[10] = 'Bacon!'
    quotes[11] = 'Try Out WinterNstuff!'
    quotes[12] = 'Try Out SpringNstuff!'
    quotes[13] = 'Try Out SummerNstuff!'
    quotes[14] = 'all html is lowercase!'
    quotes[15] = '<div id=\'youWishYouCouldReadThis\'>InsertCodeHere</div>'
    quotes[16] = 'In Remembrance of the soldiers who died in the Iranian War'
    quotes[17] = 'Leaf Me Alone!'
    quotes[18] = 'Pumpkins Were So 2011.'
    quotes[19] = 'This Does not Count as a Random String'
    quotes[20] = 'With Added Content Generation!'

return quotes[Math.floor((Math.random() * 19.9999))];
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:59:32.710

引用 #15 应该有正确的引用：

```
quotes[15] = '<div id="youWishYouCouldReadThis">InsertCodeHere</div>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:13:25.530

首先，您从 0..19.999 生成索引，因此`quotes[20]`永远不会使用。

最好的解决方案是

```
return quotes[Math.random()*quotes.length]; 
```

其次，正如其他人所提到的，引用 #15 没有正确转义：

```
quotes[15] = '<div id=''youWishYouCouldReadThis''>InsertCodeHere</div>' 
```

应该

```
quotes[15] = '<div id=\'youWishYouCouldReadThis\'>InsertCodeHere</div>' 
```

或者

```
quotes[15] = '<div id="youWishYouCouldReadThis">InsertCodeHere</div>' 
```

第三，有更简单的方法来创建固定数组：

```
quotes = [
  'Home of Fall!',
  'At least This is Something!',
  ...
  'With Added Content Generation'
] 
```

第四，您不应该在`<table>`. 在`<p>`您的情况下，标签会更好。

第五，您的结束标签的顺序不正确。感谢@rlay3 注意到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:06:55.580

引号[15] 应该有双引号，或者你需要转义单引号

```
quotes[15] = '<div id=\'youWishYouCouldReadThis\'>InsertCodeHere</div>' 
```

或者

```
quotes[15] = '<div id="youWishYouCouldReadThis">InsertCodeHere</div>' 
```

PS你的body/div结束标签的顺序不正确

[这](http://jsfiddle.net/8kTAH/)是您的代码工作。

# php - 使用 jquery 或 php 在数组上显示一次重复元素

> ID：13005130
> 
> 赞同：0
> 
> 时间：2012-10-22T04:56:21.897
> 
> 标签：php, jquery

如何显示一次数组元素？例如

```
var array = ["b","c","c","a","d","e","a","d"]

show => ["a","b","c","d","e"] ? 
```

有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:58:47.407

使用该`array_unique()`功能删除重复项和排序 - [http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

跟进该`array_values()`函数将消除数组索引中的空白 - [http://php.net/manual/en/function.array-values.php](http://php.net/manual/en/function.array-values.php)

```
// initialize array
var $array = array("b","c","c","a","d","e","a","d");
// remove duplicates and sort by string value
$array = array_unique($array, SORT_STRING);
// reindex array (numeric index will have gaps where the duplicates where removed)
$array = array_values($array);
// show results
print_r($array); 
```

在 Javascript/jQuery 中，您可以使用`unique()`and`sort()`方法

```
// initialize array
var array = ["b","c","c","a","d","e","a","d"];
// remove duplicate values
array.unique();
// sort remaining items
array.sort(); 
```

如果您在 Javascript 中对数字进行排序，则需要传递一个函数，因为数组默认按字典顺序排序

```
array.sort(function(a,b){return a - b;}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:00:11.383

PHP

```
array_unique($array, SORT_STRING) 
```

jQuery

```
array.unique() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:00:23.877

在 php 中你应该使用`array_unique`and`sort`来对数组进行排序

```
$arr = array("b","c","c","a","d","e","a","d");
sort($arr);
print_r(array_unique($arr)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:02:40.917

```
var names = ["Mike","Matt","Nancy","Adam","Jenny","Nancy","Carl"];
var uniqueNames = [];
$.each(names, function(i, el){
    if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
}); 
```

来源：[堆栈溢出](https://stackoverflow.com/questions/9229645/remove-duplicates-from-javascript-array)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T07:14:59.213

* * *

问题问：- 如何显示一次数组元素？例如

var 数组 = ["b","c","c","a","d","e","a","d"]

显示 => ["a","b","c","d","e"] ？

有什么例子吗？

* * *

答案：- $arr = array("b","c","a","d","e","a","d");

$unique = array_unique($arr);//删除所有重复值

sort($unique);//排序在这里完成

回声“”；print_r($unique);//显示 show => ["a","b","c","d","e"]

# android-mapview - 尝试在项目中添加 mapviewballoons 库

> ID：13005134
> 
> 赞同：0
> 
> 时间：2012-10-22T04:56:39.687
> 
> 标签：android-mapview

我正在尝试通过右键单击项目>属性> Android> isLibrary在我的项目中添加mapviewballoons库，但是每当我单击添加按钮时，在项目选择框中我没有任何添加库的选项，我已经在我的下载了mapviewballoons库下载文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:12:08.213

我没有 GIT，不知道它是什么，也没有时间学习它是什么。

没有更简单的方法可以将这些东西导入到库项目中吗？为什么Java总是那么……难！？

我不想花几天时间学习 GIT，只是为了得到那些气球！我的项目已经加班了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:54:55.693

嗯...我通过几个简单的步骤完成了，如果您配置了 Git，只需克隆 Git 存储库，右键单击-> 导入项目即可。如果未将 mapviewballoons 项目作为库检查（属性->android 中的复选框是库），则检查它并简单地在要使用气球属性->android->添加库的项目中进行检查，它将出现在列表中

# arrays - Big-Theta（n）线性排序算法？

> ID：13005139
> 
> 赞同：2
> 
> 时间：2012-10-22T04:57:27.923
> 
> 标签：arrays, algorithm

设计一个线性算法来重新排列给定的 n 个元素数组的元素，使其所有负数在任何零之前，并且任何零在任何正数之前。它还应该节省空间，以便它不需要超过恒定数量的额外空间。

我想到的一切都比 大得多`O(n)`，并且会喜欢一些提示/提示/帮助/java代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:59:51.473

帮助？提示：快速排序的分区部分，枢轴为`0`. [请参阅此 Wikipedia 文章](http://en.wikipedia.org/wiki/Quicksort)，查找就地版本。

* * *

我刚刚意识到，如果您实施上面链接中给出的确切版本，如果您的欺骗为零，则可能无济于事。我的说法仍然正确，您需要使用 Quicksort 的分区部分，但分区将通过[荷兰国旗问题](http://en.wikipedia.org/wiki/Dutch_national_flag_problem)或三路分区来完成。这是给你的伪代码

```
//假设索引为1
A[1..n]
p = 0
q = n+1
我 = 1

当 i < q
  如果 A[i] < 0
   交换（我，++p）
  否则如果 A[i] > 0
   交换（我，--q）
  别的
   我++

```

时间复杂度：    `O(n)`
空间复杂度：`O(1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:59:54.457

研究使用基数排序的修改版本，唯一可以在线性时间内工作的排序是基于非比较的排序（因此列表/数组中的条目不会相互比较），所以这是其他需要查看的内容（证明涉及关于为什么比较项目的排序总是至少为 nlogn 的最小高度的比较树）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:02:37.307

如果您只需要根据 3 个范围重新排列项目，负零和正。

一个简单的解决方案是使用单个数组迭代 (O(n)) 计算负数、零数和正数项的数量（实际上，如果您已经知道数组的大小，则不需要计算正数）。

通过第二次迭代，您将根据它们的范围交换项目（从第一个开始）到适当的索引，然后增加索引。

就是这样，没有额外的内存和 teta(n) 时间复杂度。

# javascript - d3.js 强制布局增加链接距离

> ID：13005147
> 
> 赞同：2
> 
> 时间：2012-10-22T04:58:31.040
> 
> 标签：javascript, svg, d3.js, force-layout

如何在不影响节点对齐的情况下增加linkDistance，

示例： http: [//mbostock.github.com/d3/talk/20110921/force.html](http://mbostock.github.com/d3/talk/20110921/force.html)

当我尝试增加圆半径和链接距离时，它崩溃了

```
<script type="text/javascript">

var w = 1280,
    h = 800,
    z = d3.scale.category20c();

var force = d3.layout.force()
    .size([w, h]);

var svg = d3.select("#chart").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

svg.append("svg:rect")
    .attr("width", w)
    .attr("height", h);

d3.json("flare.json", function(root) {
  var nodes = flatten(root),
      links = d3.layout.tree().links(nodes);

  force
      .nodes(nodes)
      .links(links)
      .start();

  var link = svg.selectAll("line")
      .data(links)
    .enter().insert("svg:line")
      .style("stroke", "#999")
      .style("stroke-width", "1px");

  var node = svg.selectAll("circle.node")
      .data(nodes)
    .enter().append("svg:circle")
      .attr("r", 4.5)
      .style("fill", function(d) { return z(d.parent && d.parent.name); })
      .style("stroke", "#000")
      .call(force.drag);

  force.on("tick", function(e) {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});

function flatten(root) {
  var nodes = [];
  function recurse(node, depth) {
    if (node.children) {
      node.children.forEach(function(child) {
        child.parent = node;
        recurse(child, depth + 1);
      });
    }
    node.depth = depth;
    nodes.push(node);
  }
  recurse(root, 1);
  return nodes;
}

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:09:39.020

玩弄[`.charge`参数](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-charge)。它定义了节点相互排斥的程度。

# html - 如何为网页的顶部栏和主体制作两种不同的背景？

> ID：13005148
> 
> 赞同：0
> 
> 时间：2012-10-22T04:58:31.303
> 
> 标签：html, css

我有一个顶栏，例如 Facebook 或 StackExchange 或 Twitter 的屏幕顶部，我希望它与页面的其余部分（下面的内容/主体）具有不同的背景。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:05:44.190

试试这个

css

```
body { background:#252525; margin:0;padding:0;}
.headerStrip{ height:40px; width:100%; z-index:1001; background:#F00; position:absolute; position:fixed;} 
```

Html : 放在body标签之后

```
<div class="headerStrip"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:10:49.347

您可以使用此代码：

```
<div id="topbar">

</div> 
```

你可以`Position:fixed;`像 twitter 的 topbar 一样使用

```
body{
    background: green;
}

#topbar{
    width:100%;
    background-color:blue;
    height:80px;
    position:fixed;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:22:53.370

您必须将 header_block 放在包装器之外

> ```
>  <div id="header_block">
>       ...... Header_block Contents
>     </div>
>    <div id="wrapper">
>       ...... Entire Page
>     </div> 
> ```

css

> ```
>  #header_block
>      {
>            position:fixed;
>            width:100%;
>            float:left;
>       } 
> ```

这应该做的工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:30:07.310

最好的方法是使用[CSS Background 属性](http://www.w3schools.com/css/css_background.asp)。

例如，stackoverflow 使用具有如下 id 的 div 来设置顶部灰色条的背景颜色：

```
<div id="custom-header"></div> 
```

然后在他们的css文件中，他们使用这样的背景颜色；还要注意高度：

```
#custom-header {
background-color: #EEE; <------------
height: 31px;
margin-bottom: -31px;
} 
```

这给了我们顶部的灰色条，它通过 StackExchange 徽标。

您可以看到 body 通过 CSS 和 Background（速记）属性设置为白色：

```
body {
background: white; <-------------
color: black;
font-family: Arial,Liberation Sans,DejaVu Sans,sans-serif;
font-size: 80%;
text-align: center;
} 
```

您可以看到，通过对 7 像素实心黑线使用背景（速记）和边框顶部，页脚 div 更进一步：

```
#footer {
color: #444;
background: #777; <------------
border-top: 7px solid black; <------------
clear: both;
padding: 15px;
margin-top: 30px;
} 
```

不过，这已经有几年历史了，您可能会发现从 Net Tuts上运行的一些[教程（比如这个教程）很有价值。](http://net.tutsplus.com/tutorials/site-builds/convert-a-warm-cheerful-web-design-to-html-and-css/)

# javascript - CQRS、命令、Javascript

> ID：13005149
> 
> 赞同：0
> 
> 时间：2012-10-22T04:58:37.163
> 
> 标签：javascript, kendo-ui, cqrs

我有一个架构，其中基于任务的 UI 将命令传递给服务层。现在，我的意图是在 .NET 中使用 KendoUI 和服务层、域层等在 javascript 中实现 UI。我还在研究可能使用 Java 而不是 Javascript 的客户端的未来移动实现。

如果我在 .NET 中定义命令，我想知道如何从我的 Javascript 客户端使用它们，以便客户端可以将命令适当地传达给服务层。我是否必须为此使用 Apache Thrift 之类的东西来定义客户端和服务层的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:33:57.360

通常，使用 .NET 实现的服务层会公开为 JavaScript 与之通信的 HTTP API。HTTP API 实现可以被视为[六边形架构](http://alistair.cockburn.us/Hexagonal+architecture)中的适配器，它将所有请求中继到应用程序服务，进而调用域模型上的命令。

您可以使用 Thift 作为接口定义语言来声明在客户端和服务器之间流动的消息。鉴于客户端是基于 JavaScript 的，您需要 Thrift 支持的 JSON 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T10:10:02.660

由于您使用 .NET，请查看我写的这篇博文，它使用 t4 模板来呈现 C# 命令/查询类的 javascript 对象。这样做的好处是合约安全和代码完成

[http://andersmalmgren.com/2014/02/05/typed-javascript-contracts-using-t4-templates/](http://andersmalmgren.com/2014/02/05/typed-javascript-contracts-using-t4-templates/)

# android - Kindle Fire：PopupMenu$OrientationChangeListener 泄漏

> ID：13005150
> 
> 赞同：0
> 
> 时间：2012-10-22T04:58:39.387
> 
> 标签：android, memory-leaks, kindle-fire

我有一个小弹出菜单，它锚定在操作栏中的按钮上。这适用于 3.0/3.1 Xoom 和 Galaxy 标签，以及 4.1 Nexus 7。

但是，在 7" Fire HD（[这个](https://rads.stackoverflow.com/amzn/click/com/B0083PWAPW)）上，我在退出应用程序时收到有关泄露意图接收器的错误。只有在运行期间未打开菜单时才会出现该错误。

`OrientationChangeListener`在[我找到的一份源文件中](http://www.java2s.com/Open-Source/Android/android-platform-apps/Gallery3D/com/cooliris/media/PopupMenu.java.htm)没有提及；我怀疑亚马逊有不同的实现。

**问题**：

*   有没有人遇到过这个？
*   有谁知道解决方法或修复方法？
*   （在哪里）我可以找到亚马逊的源代码吗？
*   最后，（*不寒而栗*）我在应用程序退出时不泄漏接收器有多重要？

这是菜单xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_profile"
        android:title="@string/menu_item_profile" 
        ></item>
    <item android:id="@+id/menu_logout"
        android:title="@string/menu_item_logout"
        ></item>

</menu> 
```

这是我注册它的地方：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);

    MenuItem login = menu.findItem(R.id.menu_login);
    Button button = (Button) login.getActionView().findViewById(R.id.login);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            profileMenu.show();
        }
    });

    // profileMenu is an instance field
    profileMenu = new PopupMenu(this, button);
    inflater.inflate(R.menu.profile_menu, profileMenu.getMenu());
    profileMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        public boolean onMenuItemClick(MenuItem item) {
            // there was code here, but I removed it all and the problem persists
            return false;
        }
    });

    return true;
} 
```

这是完整的堆栈跟踪：

```
10-21 20:55:28.461: E/ActivityThread(4526): Activity **.app.ListActivity has leaked IntentReceiver android.widget.PopupMenu$OrientationChangeListener@422d77e0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
10-21 20:55:28.461: E/ActivityThread(4526): android.app.IntentReceiverLeaked: Activity **.app.ListActivity has leaked IntentReceiver android.widget.PopupMenu$OrientationChangeListener@422d77e0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:826) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:621) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1072) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1059) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1053) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:357) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.widget.PopupMenu.<init>(PopupMenu.java:81) 
10-21 20:55:28.461: E/ActivityThread(4526):     at **.app.ListActivity.onCreateOptionsMenu(ListActivity.java:350) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.Activity.onCreatePanelMenu(Activity.java:2558) 
10-21 20:55:28.461: E/ActivityThread(4526):     at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:398) 
10-21 20:55:28.461: E/ActivityThread(4526):     at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:883) 
10-21 20:55:28.461: E/ActivityThread(4526):     at com.android.internal.policy.impl.PhoneWindow$2.run(PhoneWindow.java:3008) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.os.Handler.handleCallback(Handler.java:605) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.os.Handler.dispatchMessage(Handler.java:92) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.os.Looper.loop(Looper.java:137) 
10-21 20:55:28.461: E/ActivityThread(4526):     at android.app.ActivityThread.main(ActivityThread.java:4491) 
10-21 20:55:28.461: E/ActivityThread(4526):     at java.lang.reflect.Method.invokeNative(Native Method) 
10-21 20:55:28.461: E/ActivityThread(4526):     at java.lang.reflect.Method.invoke(Method.java:511) 
10-21 20:55:28.461: E/ActivityThread(4526):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
10-21 20:55:28.461: E/ActivityThread(4526):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
10-21 20:55:28.461: E/ActivityThread(4526):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:48:15.627

我通过在第一次按下锚按钮时创建 PopupMenu 解决了这个特殊问题。由于泄漏仅发生在显示菜单之前退出活动时，我认为消除该状态是一个不错的选择。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);

    MenuItem login = menu.findItem(R.id.menu_login);
    final Button button = (Button) login.getActionView().findViewById(R.id.login);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View item) {
            if (profileMenu == null) {
                profileMenu = new PopupMenu(ListActivity.this, button);
                inflater.inflate(R.menu.profile_menu, profileMenu.getMenu());
                profileMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                    public boolean onMenuItemClick(MenuItem item) {
                        // do something with item
                        return false;
                    }
                });
            }
            profileMenu.show();
        }
    });
    return true;
} 
```

剩下的一种极端情况会导致 PopupMenu 的窗口泄漏。我将在一个新问题中发布它并很快将其链接到此处。不过，如果不从头开始重新实现 PopupMenu，我认为我不会解决这个问题。

# scala - 这个手术的好名字是什么？

> ID：13005153
> 
> 赞同：2
> 
> 时间：2012-10-22T04:58:48.983
> 
> 标签：scala

我看到 Scala 标准库错过了获取集合中满足谓词的对象范围的方法：

```
def <???>(p: A => Boolean): List[List[A]] = {
  val buf = collection.mutable.ListBuffer[List[A]]()
  var elems = this.dropWhile(e => !p(e))
  while (elems.nonEmpty) {
    buf += elems.takeWhile(p)
    elems = elems.dropWhile(e => !p(e))
  }
  buf.toList
} 
```

这种方法的好名字是什么？我的实施是否足够好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T05:35:23.487

我会选择**chunkWith**或**chunkBy**

至于你的实现，我认为这需要递归！看看能不能填这个

```
@tailrec def chunkBy[A](l: List[A], acc: List[List[A]] = Nil)(p: A => Boolean): List[List[A]] = l match {
  case Nil => acc
  case l    =>
    val next = l dropWhile !p
    val (chunk, rest) = next span p
    chunkBy(rest, chunk :: acc)(p)
} 
```

**为什么递归**？它更容易理解算法并且更有可能没有错误（鉴于没有 vars）。

否定谓词的语法 !p 是通过隐式转换实现的

```
implicit def PredicateW[A](p: A => Boolean) = new {
  def unary_! : A => Boolean = a => !p(a)
} 
```

我通常保留它，因为它非常有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:30:22.270

怎么样：

```
def chunkBy[K](f: A => K): Map[K, List[List[A]]] = ... 
```

类似于`groupBy`但将连续的块保持为块。使用它，你可以`xs.chunkBy(p)(true)`得到你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:05:11.043

您可能想要调用它，`splitWith`因为`split`它或多或少是执行此操作的字符串操作，它类似于`splitAt`.

顺便说一句，这是一个非常紧凑的实现（虽然它做了很多不必要的工作，所以它不是一个很好的速度实现；你的很好）：

```
def splitWith[A](xs: List[A])(p: A => Boolean) = {
  (xs zip xs.scanLeft(1){ (i,x) => if (p(x) == ((i&1)==1)) i+1 else i }.tail).
  filter(_._2 % 2 == 0).groupBy(_._2).toList.sortBy(_._1).map(_._2.map(_._1))
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T10:50:14.097

只是稍微细化了**oxbow**的代码，这样签名更轻

```
def chunkBy[A](xs: List[A])(p: A => Boolean): List[List[A]] = {
  @tailrec
  def recurse(todo: List[A], acc: List[List[A]]): List[List[A]] = todo match {
    case Nil => acc
    case _ =>
      val next = todo dropWhile (!p(_))
      val (chunk, rest) = next span p
      recurse(rest, acc ::: List(chunk))
  }
  recurse(xs, Nil)
} 
```

# ios - 我可以在多个 tableViews 中使用单个原型单元格吗？

> ID：13005154
> 
> 赞同：21
> 
> 时间：2012-10-22T04:58:53.240
> 
> 标签：ios, ios5, uitableview, custom-cell

我在两个不同的控制器中有两个不同的表视图。但是我需要在其中显示的单元格看起来相同。我在一个 tableView 中创建了一个原型单元格，并将 UiTableViewCell 子类化。现在，如果我想在不同的控制器中使用相同的单元格，我该如何使用它？

如果我只是在新控制器中导入该 customCell 文件并使用故事板中给定的相同标识符将其从队列中取出，它将无法工作。它说

> -[UITableView _configureCellForDisplay:forIndexPath:] 中的断言失败
> 
> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

因此，显然这意味着，单元格为零。那么如何从情节提要中实例化同一个单元格呢？是否有可能或者我也必须为新表创建一个不同的 customCell ？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-22T10:17:58.200

K..我明白了。首先，

> 我不能在两个不同的 tableview 中使用一个原型单元格。但是，我可以在两个不同的表视图中使用相同的 tableViewCell 子类。

要实现它，只需从一个控制器复制原型单元格并将其粘贴为另一个 tableview 的原型单元格。粘贴的 tableview 的类保持不变。只需更改重用标识符。并使用它。

编辑：如果您的单元格具有相当复杂的 UI，那么单独为单元格创建单独的 xib 更有意义。然后以编程[方式将 xib 注册](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/#//apple_ref/occ/instm/UITableView/registerNib:forCellReuseIdentifier:)到表视图中。这样，您将只有一个单元格副本，并且在 ui 发生更改时更好地维护它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-04T22:56:42.640

您可以在不同的视图控制器中使用相同的原型单元，您只需将其从您设计它的控制器的 tableview 中取出。

```
override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
  let viewControllerInWhichCellWasDefined = tabBarController?.viewControllers?[0]   
  let cell = viewControllerInWhichCellWasDefined.tableView.dequeueReusableCell(withIdentifier: "identifier", for: indexPath)
  return cell
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:34:28.410

如果您在 XIB 中创建自定义单元格，它应该可以正常工作。但是，我怀疑是细胞`identifier`引起的问题。尝试更改每个表格视图控制器的单元格标识符。

如果不是，您可能需要发布源代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-24T13:05:25.623

是的。我们可以将 ViewControllerA 的 tableview 的原型单元用于 ViewControllerB 的 tableview。只需要在 ViewControllerB 中实现如下代码

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

    let vc_array = self.navigationController?.viewControllers 
    let view_controller = vc_array![vc_array!.count - 2] as! ViewControllerA
    let cell = view_controller.tableView.dequeueReusableCell(withIdentifier: "ViewControllerA_ID", for: indexPath) as! ViewControllerA

    return cell
} 
```

这里 ViewControllerA 是包含带有原型单元格的 tableview 的 ViewController，我们在 ViewControllerB 的 tableview 上使用相同的单元格

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-02-24T22:16:21.003

我在不同的应用程序中使用了相同的 UITableViewCell。只需将一个 TableViewCell 复制到另一个应用程序。那就是两个应用程序具有相同的布局等。这些应用程序不属于同一个工作区。设置很好，没有问题或错误..只是不知道这是否是好的做法。

# iphone - 这会在 ARC 下泄漏吗？

> ID：13005156
> 
> 赞同：0
> 
> 时间：2012-10-22T04:59:03.223
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ivar

我有一个关于 ARC 是如何工作的问题。我最近开始在 IOS 上工作，我用 ARC 创建了我的项目，根据文档，ARC 会通过跟踪引用计数来释放内存。考虑我有选择器视图 ivar，当弹出相应的视图时，它将被释放，如果我明确设置为 nil 并像这样再次创建的情况...

```
audio_cap_picker = nil;
// Creat picker view.
if (audio_cap_picker == nil) {
    audio_cap_picker = [[UIPickerView alloc] init];
    audio_cap_picker.delegate = self;
    audio_cap_picker.showsSelectionIndicator = YES;
    [self.view addSubview:audio_cap_picker];
} 
```

如果我每次都这样做，内存会被释放，还是会泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:00:36.080

该代码在ARC下很好。它不会泄漏。

# android - x264 [错误]：主配置文件不支持 4:4:4

> ID：13005164
> 
> 赞同：1
> 
> 时间：2012-10-22T04:59:54.033
> 
> 标签：android, ios, mobile, ffmpeg

> **可能重复：**
> [使用 HTML5 标签播放视频](https://stackoverflow.com/questions/12856643/playing-videos-using-html5-tag)

我在这里有一个悬而未决的问题，[使用 HTML5 标签播放视频](https://stackoverflow.com/questions/12856643/playing-videos-using-html5-tag)。

当我尝试以下操作时出现上述错误：

```
ffmpeg -y -i file.mov -s 320x240 -c:v libx264 -profile:v baseline -preset slow -acodec aac -strict experimental -ac 2 -r 15 -ab 44100 -aspect 16:9 OUTPUT_VIDEO.mp4 
```

希望可以有人帮帮我。我正在尝试为 android 和 iOS 输出。

# java - 如何在阿拉伯语（回历）日历中执行“之间”并将其保存为 MySQL 中的“日期”？

> ID：13005165
> 
> 赞同：4
> 
> 时间：2012-10-22T05:00:01.607
> 
> 标签：java, mysql, date, internationalization, hijri

我的问题实际上是我的最终目标。到目前为止，我有2个问题。

1.  如何在mysql中将阿拉伯日期保存为“日期”？因为，我一直在将 Gregorian 转换为 Hijri，然后使用 preg_replace（php，目前，final 在 Java 中）将数字更改为阿拉伯 ascii hex ...然后，将其保存在 MySQL 中作为 varchar。

我知道排序规则 cp1256_general_ci 允许我们以阿拉伯语存储，但目前，为了简单起见，我把它放在一边。utf-8_general 也做得很好。所以存储为 varchar 不是问题，存储为“日期”是问题。

1.  对其执行查询。我认为要求到此为止，但是，现在的任务是执行诸如日期“在”xyz 和 pqr 之间的查询……此外，约束是“仅将其存储为阿拉伯语”。

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:24:17.810

# SQL 日期

我会这样想：服务器实际上将日期存储为对给定日期的引用。它是如何做到的与您无关。在将数据存储到此类日期列或从此类日期列读取数据时，服务器使用特定日历表示该日期，按照惯例，该日历是公历。我想说的是，我不会认为*存储*的值是公历的，尽管它很可能是。我宁愿认为*转移*日期是公历。

因此，在我看来，最好的解决方案是接受这一事实并在应用程序端在 Gregorian 和 Hijri 之间进行转换。这样，您可以`between`对其使用常规检查。

# 由数字组成的字符串

如果这是不可能的，因为依赖于语言环境的转换太复杂，或者因为回历和 Grogorian 之间的映射不是唯一的或事先不知道，那么您将不得不以其他形式存储日期。我想到的可能形式是`varchar`包含形式的字符串`YYYY-MM-DD`，其中字母表示数字。此方案确保字符串会像它们所代表的日期一样进行比较，因此您仍然可以`between`在它们上使用。不过，将这些字符串转回拼写日期仍然很棘手。

# 一个或多个数字列

因此，我实际上建议您使用三列。每列包含一个表示日期的数字，然后您可以使用它`10000*year + 100*month + day_of_month`来获取每天的单个数字，您可以将其用于比较和`between`. 另一方面，您可以[`ELT`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_elt)在查询中使用该函数将月份的数字转换回名称。如果性能是一个问题，您最好只存储一个数字，并在选择时将其分成几部分。在公历中，这看起来像这样：

```
CREATE TABLE tableName (myDate DECIMAL(8));

SELECT myDate DIV 10000 AS year,
       ELT((myDate DIV 100) MOD 100, "Jan", "Feb", …) AS month,
       myDate MOD 100 AS day_of_month
FROM tableName
WHERE myDate BETWEN 20121021 AND 20121023; 
```

# 兼容性和便利性

如果您必须保持与需要单个文本日期列的代码的只读兼容性，您可以使用 a[`VIEW`](http://dev.mysql.com/doc/refman/5.6/en/create-view.html)来提供它。例如，对于德语 Gregorian`DD. MMMM YYYY`格式，您可以使用如下代码：

```
CREATE VIEW compatibleName AS
SELECT CONCAT(myDate MOD 100, ". ",
              ELT((myDate DIV 100) MOD 100, "Januar", "Februar", …), ". ",
              myDate DIV 10000) as dateString,
       * -- or explicitely name other columns needed for compatibility
FROM tableName 
```

# 解码字符串

如果您需要另一个应用程序使用字符串格式进行读写访问，您必须自己解析这些字符串。您可以在 SQL 级别执行此操作。有用的工具是[`SUBSTRING_INDEX`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substring-index)将字符串拆分为字段并将[`FIELD`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_field)月份名称转换为数字。您可能希望向数据库添加一个触发器，以确保您的字符串始终采用您可以通过这种方式分解的有效格式。[这个问题](https://stackoverflow.com/q/6217855/1468366)详细介绍了如何使用触发器来强制执行此类检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T06:18:12.360

您可以直接存储为日期。我使用的是正常日期。我的mysql函数是

```
DELIMITER $$

DROP FUNCTION IF EXISTS `kdmtest`.`IntPart` $$
CREATE FUNCTION `kdmtest`.`IntPart` (FloatNum float) RETURNS INT
BEGIN
if (floatNum< -0.0000001) then
     return ceil(floatNum-0.0000001);
else
  return floor(floatNum+0.0000001);
end if;
END $$

DELIMITER ;

DELIMITER $$

DROP FUNCTION IF EXISTS `kdmtest`.`Hicri` $$
CREATE DEFINER=`root`@`localhost` FUNCTION `Hicri`(MiladiTarih date) RETURNS date
BEGIN
  declare d,m,y,jd,l,n,j int;
  set d=day(MiladiTarih);
  set m=month(MiladiTarih);
  set y=year(MiladiTarih);
  if ((y>1582) or((y=1582) and (m>10)) or ((y=1582) and (m=10) and (d>14))) then
    set jd=intpart((1461*(y+4800+intpart((m-14)/12)))/4)+intpart((367*(m-2-12*(intpart((m-14)/12))))/12)- intpart( (3* (intpart(  (y+4900+    intpart( (m-14)/12)     )/100)    )   ) /4)+d-32075;
  else
    set jd = 367*y-intpart((7*(y+5001+intpart((m-9)/7)))/4)+intpart((275*m)/9)+d+1729777;
  end if;
                    set l=jd-1948440+10632;
                    set n=intpart((l-1)/10631);
                    set l=l-10631*n+354;
                    set j=(intpart((10985-l)/5316))*(intpart((50*l)/17719))+(intpart(l/5670))*(intpart((43*l)/15238));
                    set l=l-(intpart((30-j)/15))*(intpart((17719*j)/50))-(intpart(j/16))*(intpart((15238*j)/43))+29;
                    set m=intpart((24*l)/709);
                    set d=l-intpart((709*m)/24);
                    set y=30*n+j-30;
return concat(y,'-',m,'-',d);
END $$

DELIMITER ;

DELIMITER $$

DROP FUNCTION IF EXISTS `kdmtest`.`Miladi` $$
CREATE FUNCTION `kdmtest`.`Miladi` (HicriTarih date) RETURNS date
BEGIN
  declare d,m,y,jd,l,n,j,i,k int;
  set d=day(HicriTarih);
    set m=month(HicriTarih);
    set y=year(HicriTarih);
    set jd=intPart((11*y+3)/30)+354*y+30*m-intPart((m-1)/2)+d+1948440-385;
  if (jd> 2299160 ) then
        set l=jd+68569;
        set n=intPart((4*l)/146097);
    set l=l-intPart((146097*n+3)/4);
        set i=intPart((4000*(l+1))/1461001);
    set l=l-intPart((1461*i)/4)+31;
    set j=intPart((80*l)/2447);
    set d=l-intPart((2447*j)/80);
        set l=intPart(j/11);
        set m=j+2-12*l;
        set y=100*(n-49)+i+l;
  else
    set j=jd+1402;
    set k=intPart((j-1)/1461);
    set l=j-1461*k;
    set n=intPart((l-1)/365)-intPart(l/1461);
    set i=l-365*n+30;
        set j=intPart((80*i)/2447);
        set d=i-intPart((2447*j)/80);
        set i=intPart(j/11);
        set m=j+2-12*i;
        set y=4*k+n+i-4716;
  end if;
  return concat(y,'-',m,'-',d);
END $$

DELIMITER ; 
```

# jsp - 会话未在 vps 服务器上的 tomcat7 中维护

> ID：13005171
> 
> 赞同：0
> 
> 时间：2012-10-22T05:00:45.233
> 
> 标签：jsp, tomcat7

在安装在我的 VPS（具有 Ubuntu 操作系统）上的 tomcat7 服务器上运行我的 jsp-servlet 应用程序时，我真的被卡住了。
问题是 - 当应用程序在 VPS tomcat 上运行时，会话不会被维护，因此当用户单击任何链接时会被重定向到登录页面。

如果用户已经登录并且我将他的 ID 存储为会话，则不应将用户重定向到登录页面。**当我尝试在我的本地主机 tomcat7 上运行应用程序时，这可以正常工作，但在将应用程序部署到 VPS 上的 tomcat7 时不起作用。**

我是否缺少 VPS tomcat7 中的任何配置？或者我应该在我的应用程序中添加/更改任何内容吗？
我已经使用命令 > apt -get install tomcat7 安装了 tomcat7

请帮助！
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:25:43.757

我想通了。存储 cookie 的路径不正确，我必须在 VPS 中安装的 apache2 中的 httpd.conf 文件中包含以下几行 -

```
<VirtualHost *:80>
  ServerName www.testdomain.com
  ServerAlias www.testdomain.com
  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyPreserveHost Off
  ProxyPass               /       http://localhost:8080/testdomain/
  ProxyPassReverse        /       http://localhost:8080/testdomain/
  ProxyPassReverseCookiePath /testdomain/
</VirtualHost> 
```

谢谢

# python - 如何更改heroku中的数据库url变量？

> ID：13005172
> 
> 赞同：0
> 
> 时间：2012-10-22T05:00:47.797
> 
> 标签：python, heroku, psycopg2

我正在尝试使用 postgresql 数据库设置一个简单的 Flask 应用程序。我正在使用 psycopg2 连接到数据库。Psycopg2 期望连接的 dsn 字符串，如下所示：

```
dbname=mydb user=myuser password=1234 host=myhost.com 
```

但是heroku在我的应用程序配置中给了我一个这样的数据库url：

```
postgres://myuser:mypassword@myhost.com/mydb 
```

我无法直接更改这些配置变量，也没有找到任何方法在 heroku postgres 仪表板中指定它们的格式。

也许有一种方法可以在 python 中处理它？

# python - 为什么这个函数返回错误的结果？

> ID：13005173
> 
> 赞同：2
> 
> 时间：2012-10-22T05:00:49.260
> 
> 标签：python

有人能告诉我为什么当我用这个特定的例子尝试这个函数时：**is_valid_sequence('ABCDEFG')**，它出现的是“True”而不是“False”？一般来说，我对编程完全陌生。这是我正在参加的在线课程。谢谢。

```
def is_valid_sequence(dna_sequence):
    ''' (str) -> bool

    Return True if and only if DNA sequence is made up of 'A', 'T', 'C', and 'G' nucleotides.

    >>> is_valid_sequence('ATCGGC')
    True
    >>> is_valid_sequence('aTcGGc')
    False
    >>> is_valid_sequence('ABCDEFG')
    False

    '''    

    for char in dna_sequence:
        if char not in 'ACTG':
            return False
        else:
            return True 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T05:03:42.490

你回来得太早了。尝试这个

```
for char in dna_sequence:
    if char not in 'ACTG':
        return False
return True 
```

或更简单地说

```
return all(char in 'ACTG' for char in dna_sequence) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T05:04:43.240

*您的方法将在匹配的第一个*字符处退出。由于 的第一个字符`ABCDEFG`是有效字符，因此您的方法返回`True`.

您需要遍历整个字符串并查看*所有*字符是否匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T05:03:27.797

因为你`return`只使用第一个`char`得到测试。

简单修正：

```
res = True
for ch in dna_sequence:
    if ch not in 'ACTG':
        res &= False # or return as you know it's false
    else:
        res &= True
return res 
```

但是还有更多的“pythonic”方法可以做到这一点，[`all()`](http://docs.python.org/library/functions.html#all)例如看一下函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:04:24.333

发生的情况是，一旦它击中`A`，它就会返回 True。在遇到无效字符或字符串结尾之前，您的逻辑不需要返回：

```
 for char in dna_sequence:
        if char not in 'ACTG':
            return False
    # we hit the end of the string, so it must be valid
    return True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T05:04:20.353

return 导致函数退出，无论如何这只会检查一个字符

```
for char in dna_sequence:
    if char not in 'ACTG':
        return False
return true # after whole string checked 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T05:08:19.727

在您的循环中，如果第一个值匹配，您将返回 True，而不是检查所有值。更正的代码：

```
for char in dna_sequence:
    if char not in 'ACTG':
        return False
return True 
```

# wordpress - 使用不同的名称覆盖 WordPress [图库] 短代码插入

> ID：13005177
> 
> 赞同：0
> 
> 时间：2012-10-22T05:01:14.520
> 
> 标签：wordpress

假设您创建了自己的画廊插件，使用它自己的短代码（例如： **[my_gallery]**）

您将如何将 [gallery] 的编辑器中的默认 WordPress 画廊短代码插入修改为 [my_gallery] 以便客户不会因为必须记住自定义短代码和不小心插入不正确的画廊而感到困惑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:44:04.317

首先[删除](http://codex.wordpress.org/Function_Reference/remove_shortcode%29)图库短代码，然后添加您自己的...

```
 remove_shortcode('gallery', 'gallery_shortcode'); // removes the original shortcode
    add_shortcode('gallery', 'my_awesome_gallery_shortcode'); // add your own shortcode

    function my_awesome_gallery_shortcode($attr) {
    $output = 'Codex is your friend' ;
    return $output;
} 
```

或者作为替代方案，只需将您的短代码重命名为不那么令人困惑的东西:-)

# windows - 像素级操作窗口

> ID：13005180
> 
> 赞同：1
> 
> 时间：2012-10-22T05:01:27.733
> 
> 标签：windows, graphics, sdl, pixel

我一直在使用 SDL 在 C 中渲染图形。我知道在 Windows 上创建像素级别的图形有多种选择，包括 SDL 和 OpenGL。但是这些程序是如何做到的呢？好吧，我可以使用 SDL。但我想知道 SDL 在做什么，所以我不觉得自己是个无知的傻瓜。我是唯一一个对现代计算机上不透明的结霜层感到沮丧的人吗？

关于如何在其他操作系统上完成此操作的简短解释也很有趣，但我最关心的是 Windows。

编辑：由于这个问题似乎有点不清楚，这正是我想要的：我想知道像素级图形操作（在屏幕上逐个像素地绘制）如何在 Windows 上工作。像 SDL 这样的库对操作系统做了什么来允许这种情况发生。我可以使用 SDL 逐个像素地操作屏幕，那么 SDL 中发生了什么神奇的事情让我这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:43:13.517

Windows 有许多图形 API。有些是建立在其他层之上的层（例如，GDI+ 位于 GDI 之上），而另一些则是完全独立的堆栈（如 Direct3D 系列）。

在像 GDI 这样的 API 中，有像[SetPixel](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145078%28v=vs.85%29.aspx)这样的函数，可以让您更改屏幕上（或您可以访问的屏幕区域内）单个像素的值。但是使用 SetPixel 设置大量像素通常很慢。

如果您要构建一个逼真的渲染器，如光线追踪器，那么您可能会在内存中构建一个位图（逐个像素），并使用像[BitBlt](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx)这样的 API 将整个位图一次发送到屏幕。这要快得多。

但它仍然可能不够快，无法渲染视频之类的东西。将所有数据从系统内存移动到视频卡内存需要时间。对于视频，通常使用更接近低级图形驱动程序和硬件的图形堆栈。如果显卡可以直接进行视频解压，那么将压缩后的视频流发送到显卡将比将解压后的数据从系统内存发送到显卡效率更高——这通常是限制因素。

但从概念上讲，这是一回事：您正在操作一个位图（或纹理、表面或光栅或......），但该位图存在于图形内存中，并且您正在向 GPU 发出命令以设置像素的方式你想要，然后在屏幕的某个部分显示该位图（通常带有某种转换）。

现代图形处理器实际上运行小程序——称为着色器——可以（除其他外）进行计算以确定像素值。GPU 已针对执行这些类型的计算进行了优化，并且可以并行执行其中的许多计算。但归根结底，它归结为将像素值放入视频内存中的某种位图中。

# r - 如何设置 raster::plot 的显示范围？

> ID：13005181
> 
> 赞同：4
> 
> 时间：2012-10-22T05:01:34.317
> 
> 标签：r, plot, spatial, raster

# 概括

如何将 R`raster::plot`的显示限制在 Raster* 对象的范围内？为什么我问：

我是 R 初学者，必须

1.  将非投影（经纬度）全球空间数据从 ASCII 转换为[netCDF](http://en.wikipedia.org/wiki/Netcdf)（已解决）
2.  “重新网格化”它：即，将数据限制在一个区域，对其进行投影，然后缩小（减小网格单元的大小）它（大部分已解决）

不幸的是，在科学工作中，主要是通过视觉检查来进行诸如此类的 QAs 数据转换。上面的第 1 步看起来不错。但是尽管第 2 步现在看起来好多了，但我真的只想绘制**regridded**的边界（或`extents`）`RasterLayer`。我在公共 git 存储库（[此处](https://github.com/TomRoche/GEIA_to_netCDF)）中有由 bash 脚本驱动的 R 代码，它执行转换步骤，并绘制转换后的输出，[显然是正确](https://i.stack.imgur.com/SOmvZ.png)的。但是，我尝试绘制 regridding 的输出`raster::plot`并不完全正确（请参阅[此处](https://github.com/downloads/TomRoche/GEIA_to_netCDF/GEIA_N2O_oceanic_regrid.pdf)的前 3 页输出）。

怎么修？

# 细节

## 背景

我需要获取一些数据（全球海洋排放清单 (EI)），将其与其他数据（主要是其他 EI）结合起来，并将其输入到模型中。该模型想要使用 netCDF，并且它希望该 netCDF 在比连续美国 (CONUS) 稍大的空间域上。该图像![AQMEII-NA结构域](../Images/d2c691a5b4f326f75c68ae5d9b1036de.png)的边界是域的边界。（请注意，域的一部分，但只有一部分是海洋的。）该模型还希望 netCDF 以某种方式投影（[LCC](http://en.wikipedia.org/wiki/Lambert_conformal_conic)分辨率为 12 公里）。我将此视为两个独立的问题：

1.  将全局 EI 从其本机 ASCII 格式转换为 netCDF
2.  将 netCDF 从全局/未投影到缩小（更精细）的投影子域“重新网格化”。

我正在尝试使用我在[这个公共 git 存储库](https://github.com/TomRoche/GEIA_to_NetCDF)中存档的代码来解决这些问题。如果您克隆该 git 存储库，然后[按照 README](https://github.com/TomRoche/GEIA_to_netCDF/blob/master/README.md)`GEIA_to_netCDF.sh`中“第一个示例”的描述配置/运行 bash 驱动程序（并假设您的 R 已正确配置，特别是使用 packages= , ），它将输出 netCDF 并绘图（使用）输出到[PDF](https://github.com/downloads/TomRoche/GEIA_to_netCDF/GEIA_N2O_oceanic.pdf)，应该如下所示：输出数据的分布似乎是正确的，因此问题 1 似乎已解决。`raster``ncdf4``fields::image.plot`![GEIA 全球海洋排放量](../Images/71b8bc24c6fee76ef77a0cb641a66649.png)

## 问题

[解决问题 2（又名README 中](https://github.com/TomRoche/GEIA_to_netCDF/blob/master/README.md)的“第二个示例” ）似乎需要 R package= `raster`。我的 bash 驱动程序[`regrid_GEIA_netCDF.sh`](https://github.com/TomRoche/GEIA_to_netCDF/blob/master/regrid_GEIA_netCDF.sh)调用[`regrid.global.to.AQMEII.r`](https://github.com/TomRoche/GEIA_to_netCDF/blob/master/regrid.global.to.AQMEII.r)（都[在存储库中](https://github.com/TomRoche/GEIA_to_NetCDF)），它运行没有错误，并显示其输出的 PDF。[`GEIA_N2O_oceanic_regrid.pdf`](https://github.com/downloads/TomRoche/GEIA_to_netCDF/GEIA_N2O_oceanic_regrid.pdf)包含 4 页，对应 . 末尾的 4 个代码块`regrid.global.to.AQMEII.r`。这里只有前3页相关（第4页尝试使用`fields::image.plot`并且有更大的问题）。

Page=1/4 来自简单`raster::plot`的重新网格化输出，加上来自 CONUS 地图的投影版本`wrld_simpl`：

```
plot(out.raster)
plot(map.us.proj, add=TRUE) 
```

不幸的是，输出看起来是全局的，或者几乎是全局的：![raster::plot 边界问题](../Images/6e82f9996a1752ae12dd2f8955abbbbf.png)但是输出重新网格化到的所需域要小得多：![AQMEII-NA结构域](../Images/d2c691a5b4f326f75c68ae5d9b1036de.png). 所以我有 3 个问题（1 个主要问题，2 个后续问题）：

1.  `raster::plot`默认情况下显示的图像是否*仅*显示其参数中给定的范围`RasterLayer`？
2.  如果是这样，我的 regrid 有什么问题？（更多下文）
3.  如果不是（即，如果`raster::plot`默认显示*超过*其范围`RasterLayer`），如何使`raster::plot`仅显示范围`RasterLayer`？

`regrid.global.to.AQMEII.r`（[此处](https://github.com/TomRoche/GEIA_to_netCDF/blob/master/regrid.global.to.AQMEII.r)）中进行重新网格化的代码似乎得到了正确的输出：

```
out.crs <- '+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +x_0=-2556000 +y_0=-1728000' 
```

请注意，CRS 似乎与[此处](https://github.com/TomRoche/cornbeltN2O/wiki/AQMEII-North-American-domain#wiki-EPA)给出的输出域的定义相匹配。（一旦在链接页面，滚动过去的地图。）

```
out.raster <-
  projectRaster(
from=in.raster, to=template.raster, method='bilinear', crs=out.crs,
overwrite=TRUE, progress='window', format='CDF',
# args from writeRaster
NAflag=-999.0,  # match emi_n2o:missing_value,_FillValue (TODO: copy)
varname=data.var.name, 
varunit='ton N2O-N/yr',
longname='N2O emissions',
xname='COL',
yname='ROW',
filename=out.fp)
out.raster
# made with CRS
#> class       : RasterLayer 
#> dimensions  : 299, 459, 137241  (nrow, ncol, ncell)
#> resolution  : 53369.55, 56883.69  (x, y)
#> extent      : -14802449, 9694173, -6258782, 10749443  (xmin, xmax, ymin, ymax)
# ??? why still proj=longlat ???
#> coord. ref. : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
#> data source : /home/rtd/code/R/GEIA_to_netCDF/GEIA_N2O_oceanic_regrid.nc
#> names       : N2O.emissions 
#> zvar        : emi_n2o 
```

但是，如前所述，regrid`out.raster`输出`out.raster`（

我还尝试通过两种方式限制情节本身：

首先，我尝试`extents`在情节中添加一个，即

```
plot(out.raster, ext=template.raster)
plot(map.us.proj, add=TRUE) 
```

生成[PDF](https://github.com/downloads/TomRoche/GEIA_to_netCDF/GEIA_N2O_oceanic_regrid.pdf)的 page=2/4 。不幸的是，这根本不会改变输出：AFAICS，它与 page=1/4（上图）完全相同。

其次，在绘制之前，我尝试使用`raster::crop`绑定重新网格化的 netCDF 本身，使用与绑定重新网格相同的`RasterLayer`对象 ( `template.raster`)：

```
template.raster.extent <- extent(template.raster)
out.raster.crop <-
  # overwrite the uncropped file
  crop(out.raster, template.raster.extent, filename=out.fp, overwrite=TRUE)
...
plot(out.raster.crop)
plot(map.us.proj, add=TRUE) 
```

生成[PDF](https://github.com/downloads/TomRoche/GEIA_to_netCDF/GEIA_N2O_oceanic_regrid.pdf)的 page=3/4 。不幸的是，它显然也与 page=1/4（上图）完全相同。

（如果您想知道，PDF 的第 4 页是使用 生成的`fields::image.plot`，它有一个不同的问题，[在此处](https://stackoverflow.com/questions/13022919/r-problems-visualizing-a-raster-with-fieldsimage-plot)描述，除非 StackOverflow 破坏了该链接。）

感谢您对这个 R 新手的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:40:44.267

# 概括

我的问题

```
How to limit display of an R `raster::plot` to the bounds of a `Raster*` object? 
```

是基于我对问题的错误诊断。`extent`解决方案是正确设置底层`Raster*` *数据*对象（即绘图数据源）的边界（或），尤其是

1.  通过查询其基础文件来获取模板对象（用于创建数据对象）的边界（不做任何假设！）
2.  通过查询其基础文件来获取模板对象的 CRS（不做任何假设！）
3.  直接为模板对象设置边界和 CRS

但

*   不要试图只在`Extent`;上设置分辨率 至少对我来说，那挂起
*   地图还有一个小的边界问题`raster::plot`；至少，相对于我正在使用的地图`fields::image.plot`

# 细节

这个问题的答案实际上是另一个问题的答案：如何正确设置对象`extent`的`Raster*`？因为`raster::plot`一旦我正确设置了我想要绘制的对象的范围，问题就基本消失了。（除了一个小例外——见下文。）这可能是主要开发人员 Robert J. Hijmans在[这篇文章](https://stat.ethz.ch/pipermail/r-sig-geo/2012-October/016501.html)`raster`中试图传达的内容，但如果是这样，我当时并没有意识到这一点。

在得到两个建议后，我解决了这个问题，这些建议本身并不是我需要的，但它们让我走上了正确的道路。在这种情况下，该路径通向[R 包`M3`](http://cran.r-project.org/web/packages/M3/M3.pdf)，这对于处理 CMAQ 和 WRF 的数据输入和输出非常有用。这些建议是

1.  用于`project.lonlat.to.M3`重新网格化任务。
2.  绘图问题可能与球面投影的生成模型 (CMAQ) 的假设有关。

第二个建议似乎是合理的，因为我知道我正在使用`+ellps=WGS84`. [（请参阅此存储库](http://github.com/TomRoche/GEIA_to_netCDF)中大量评论的 R ，特别是[`regrid.global.to.AQMEII.r`](http://github.com/TomRoche/GEIA_to_netCDF/blob/master/regrid.global.to.AQMEII.r)。）所以我决定研究一下。

我知道第一个建议只会有困难（因为它只投射点数），但为了确定，我查看了[M3 文档。](http://github.com/TomRoche/GEIA_to_netCDF)它的 ToC 中的以下功能立即引起了我的注意：

1.  `get.proj.info.M3`，它不仅从模板文件中返回了一个球形 PROJ.4 字符串，而且没有我认为我需要提供的虚假东向和北向：

    ```
    # use package=M3 to get CRS from template file
    out.crs <- get.proj.info.M3(template.in.fp)
    cat(sprintf('out.crs=%s\n', out.crs)) # debugging
    # out.crs=+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000 +b=6370000 
    ```

2.  `get.grid.info.M3`，它可以通过一些努力返回模板文件的边界/范围：

    ```
    extents.info <- get.grid.info.M3(template.in.fp)
    extents.xmin <- extents.info$x.orig
    extents.xmax <- max(
      get.coord.for.dimension(
        file=template.in.fp, dimension="col", position="upper", units="m")$coords)
    extents.ymin <- extents.info$y.orig
    extents.ymax <- max(
      get.coord.for.dimension(
        file=template.in.fp, dimension="row", position="upper", units="m")$coords)
    template.extents <-
      extent(extents.xmin, extents.xmax, extents.ymin, extents.ymax) 
    ```

然后可以在模板上设置这些界限`Raster*`

```
template.in.raster <- raster(template.in.fp, ...)
template.raster <- projectExtent(template.in.raster, crs=out.crs)
template.raster@extent <- template.extents 
```

并使用模板重新网格输入`Raster*`

```
out.raster <-
  projectRaster(
    # give a template with extents--fast, but gotta calculate extents
    from=in.raster, to=template.raster, crs=out.crs,
    # give a resolution instead of a template? no, that hangs
#    from=in.raster, res=grid.res, crs=out.crs,
    method='bilinear', overwrite=TRUE, format='CDF',
    # args from writeRaster
    NAflag=-999.0,  # match emi_n2o:missing_value,_FillValue (TODO: copy)
    varname=data.var.name, 
    varunit='ton N2O-N/yr',
    longname='N2O emissions',
    xname='COL',
    yname='ROW',
    filename=out.fp)
# above fails to set CRS, so
out.raster@crs <- CRS(out.crs) 
```

（如上所述，通过设置模板重新网格化只需要 7 秒，但通过设置网格分辨率重新网格化在 2 小时后未能完成，当我终止工作时。）在那之后，`raster::plot`

```
map.us.unproj <- wrld_simpl[wrld_simpl$ISO3 %in% c('CAN', 'MEX', 'USA'),]
map.us.proj <-
  spTransform(map.us.unproj, CRS(out.crs)) # projected
...
pdf(file=pdf.fp, width=5.5, height=4.25)
...
plot(out.raster, # remaining args from image.plot
  main=title, sub=subtitle,
  xlab='', ylab='', axes=F, col=colors(100),
  axis.args=list(at=quantiles, labels=quantiles.formatted))
# add a projected CONUS map
plot(map.us.proj, add=TRUE) 
```

几乎与预期的一样，但有一个例外：![raster::plot 的南北绘图范围过多](../Images/5b9a5c7bab7fb3966f761cdfd546beac.png)地图向北和向南（尽管不是向东和向西）延伸到数据的边界之外，导致图像与该域的已发布图像不够相似，例如[this](http://github.com/TomRoche/cornbeltN2O/wiki/images/Cmaq_aqmeii_domain.png)。有趣的是，当我用`fields::image.plot`like

```
# see code in
# https://github.com/TomRoche/GEIA_to_netCDF/blob/master/plotLayersForTimestep.r
plot.raster(
  raster=out.raster,
  title=title,
  subtitle=subtitle,
  q.vec=probabilities.vec,
  colors,
  map.cmaq
) 
```

我不明白这个问题：![问题修复后的fields::image.plot](../Images/def05bb59b70297c3be8a5af1d32019a.png)。所以我可能会用它`fields::image.plot`来展示，至少目前是这样。

# ios - 突然间：iOS 中的核心绘图：Apple LLVM 编译器 4,1 错误

> ID：13005188
> 
> 赞同：1
> 
> 时间：2012-10-22T05:02:17.290
> 
> 标签：ios, xcode4, compiler-errors, core-plot, linker-errors

我不知道发生了什么；突然之间，我开始收到此错误。我尝试重新移动和重新添加 Core Plot，但它似乎没有改变任何东西。核心情节最初没有给我任何错误，但现在我得到以下信息：

```
clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我在stackoverflow上看到过类似的问题，但是a）他们没有帮助我，b）这是XCode（4.5.1）的较新版本，所以也许这是问题的一部分？

谢谢你的帮助。

编辑：与此同时，我切换到静态库安装，这似乎有效。我真的不知道其中一个的区别/优势，除了更新依赖项目安装可能更容易？（对不起我的菜鸟）更多细节：

```
CompileC /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.o Source/CPTPlot.m normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/username/Developer/appname/CorePlot_1.0/Source/framework
    setenv LANG en_US.US-ASCII
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -O0 -Werror -Wmissing-field-initializers -Wmissing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wmissing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wsign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wnewline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -mios-simulator-version-min=3.1.3 -iquote /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-generated-files.hmap -I/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-own-target-headers.hmap -I/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-all-target-headers.hmap -iquote /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/CorePlot-CocoaTouch-project-headers.hmap -I/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources/i386 -I/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/DerivedSources -F/Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Products/Debug-iphonesimulator -lstdc++ -falign-loops=16 -MMD -MT dependencies -MF /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.d --serialize-diagnostics /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.dia -c /Users/username/Developer/appname/CorePlot_1.0/Source/framework/Source/CPTPlot.m -o /Users/username/Library/Developer/Xcode/DerivedData/appname-cbzeyejhjnktceepdvakngcfqjhy/Build/Intermediates/CorePlot-CocoaTouch.build/Debug-iphonesimulator/CorePlot-CocoaTouch.build/Objects-normal/i386/CPTPlot.o 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:21:22.900

我在升级我的 xcode 版本后遇到了这个问题。我发现虽然安装了 xcode，但当我收到此错误时，它仍在后台安装一些库，一旦这些进程完成，错误就消失了。

# .htaccess - 共享 ssl 404 与现有 htaccess - /questions/12737308/ 的后续行动

> ID：13005198
> 
> 赞同：0
> 
> 时间：2012-10-22T05:03:22.647
> 
> 标签：.htaccess, ssl, shared-hosting

我希望提出一个新问题是跟进现有问题的正确方法（？） - 如果不是，请耐心等待，我对 stackoverflow 非常陌生。也就是说，我指的是[隐藏html扩展+重定向.html版本+特殊情况异常](https://stackoverflow.com/questions/12737308/hide-html-extension-redirect-html-version-special-case-exception)

到目前为止，用户 Jon Lin 提供的 htaccess 工作得很好，但现在我正在努力解决一个相关的问题（我认为它与 htaccess 有关），那就是对我们网站上的一个特定页面使用共享 ssl 证书，我们称之为 baz.html

由于现有/引用的 htaccess，hxxp://mydomain.com/baz.html 解析为 hxxp://mydomain.com/baz，这很好。但是，尝试在 hxxps://shared.host.com/~user/baz(.html) 使用共享 ssl 会导致 404 not found 错误。我很确定（我假设是这样）这是由于使用了 htaccess，因为我们的主机提供的共享 ssl 教程几乎是无误的。

此外，当使用共享 ssl 访问文档根目录 (foo.html) 时，它会显示（作为唯一的非 404），但 CSS(+images) 虽然在 html 代码中相对链接，但未处理。我假设（？）这是相关的。

基本上，我想要实现的是在我们的主站点导航中链接 hxxps://shared.host.com/~user/baz 而不是 hxxp://mydomain.com/baz 以实现安全页面（与我相同）现在为 foo(.html)、bar(.html) 执行，仅用于不安全的内容）

我希望我的实际问题是完全可以理解的（？）。我不想将我们的实际项目页面链接到不做某种自我广告。如果需要访问实际页面来回答问题，我肯定会提供一个链接（如果明确要求）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:26:17.943

您不能在共享 SSL 主机中使用相同的 htaccess 文件，因为基础不同（`/~user/`而不仅仅是`/`），这将改变所有规则的固有工作方式。因此，对于这些相同的规则，您需要考虑不同的基础。如果将这些规则放在`/~user/`目录中的 htaccess 文件中，它们需要如下所示：

*编辑：由于它们是相同的文档根目录，因此您需要复制所有规则，一个用于 SSL，一个不用于*：

```
RewriteEngine On

# 1\. hiding the .html extensions
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/~user/%1.html -f
RewriteRule ^ /~user/%1.html [L]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
RewriteRule ^ /%1.html [L]

# 2\. 301 redirecting .html version
RewriteCond %{HTTPS} on
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /~user/([^\ ]+)\.html
RewriteCond %1 !foo$
RewriteRule ^ /~user/%1 [L,R=301]

RewriteCond %{HTTPS} off
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\ ]+)\.html
RewriteCond %1 !foo$
RewriteRule ^ /%1 [L,R=301]

# 3\. typing /foo.html to resolve to / as well as typing /foo to resolve to / 
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} ^/~user/(.*?/?)foo(\.html)?$
RewriteRule ^ /~user/%1 [L,R=301]

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/(.*?/?)foo(\.html)?$
RewriteRule ^ /%1 [L,R=301] 
```

现在为了将`/baz`and`/baz.html`重定向到 SSL，您需要在**domain.com**文档根目录（非 SSL规则）中的任何规则（在 下方`RewriteEngine On`）之前添加它：

 ***编辑：由于文档根目录相同，您需要添加条件以检查它是否为 SSL*

```
RewriteCond %{HTTPS} off
RewriteRule ^/?baz(\.html)?/?$ http://shared.host.com/~user/baz [L,R=301] 
```**

# c# - VB.NET 通过整数变量增加 sql 值

> ID：13005202
> 
> 赞同：0
> 
> 时间：2012-10-22T05:03:44.393
> 
> 标签：c#, sql, vb.net, connection-string

什么是通过 vb.net 整数变量增加 slected sql 值的最佳方法

我应该首先获取我想要增加的单元格的值，还是有一种方法可以使用单个命令进行增量？

我不确定的一件事是如何将值保存到 vb.net 整数变量

这是我到目前为止所拥有的

```
sqlcmd.CommandText = "SELECT Suppbackorder FROM products WHERE catalogid=@catalogid"
sqlcmd.Parameters.Add(New SqlParameter("@catalogid", someid)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:10:17.250

您希望将哪个值增加指定数量并不明显，这里有一些可以帮助指导您的内容（请原谅我生锈的 VB）：

```
Dim myMagicValue as Int = 10

sqlcmd.CommandText = "UPDATE products SET mySpecialColumn = mySpecialColumn + @magicValue WHERE catalogid=@catalogid"
sqlcmd.Parameters.Add(New SqlParameter("@catalogid", someid))
sqlcmd.Parameters.Add(New SqlParameter("@magicValue", myMagicValue)) 
```

如您所见，您的`WHERE`子句保持不变，我们所做的只是将 更改`SELECT`为`UPDATE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:05:53.647

通过使用查询

```
SELECT ISNULL(Suppbackorder,0)+1 FROM products WHERE catalogid=@catalogid 
```

# android - 从头开始活动

> ID：13005206
> 
> 赞同：2
> 
> 时间：2012-10-22T05:04:20.977
> 
> 标签：android, android-intent

我有完成身份验证的活动 A。在此用户重定向到其他活动后说 B、C、D。假设现在用户在 Activity C 并突然关闭应用程序，下次他启动应用程序时，它显示 Activity C（用户在退出应用程序之前运行的最后一个活动）但是，但我想启动 Activity A（身份验证目的）当用户重新启动应用程序时，无论他在哪里关闭应用程序。

需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:08:37.650

在清单文件中使用标签的`android:noHistory="true"`属性。`activity`它确保您`Activity`在进入后台时不会留在堆栈中。[这是](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)一个完整的描述。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:09:23.270

`android:noHistory="true"`您可以通过在 AndroidManifest.xml 中添加属性来从堆栈中删除 Activity

```
 <activity android:name="CurrentActivity" 
              android:launchMode="singleInstance" 
              android:noHistory="true" /> 
```

或通过代码：

```
Intent intent = new Intent(CurrentActivity_A.this,CurrentActivity_C.class); 
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
intent.startActivity(intent); 
```

# c - 测试 getchar() == EOF 没有按预期工作

> ID：13005207
> 
> 赞同：2
> 
> 时间：2012-10-22T05:04:22.380
> 
> 标签：c, arrays, eof, getchar

我有一个任务是“编写一个允许用户输入最多 20 个整数的 C 程序（它将停止接受基于标记值或达到的 20 个整数限制的数字）。然后程序应该显示数字以相反的进入顺序。”

我决定将我的标记值设为“EOF”（或 CTRL+D / CRTL+Z）。我的代码有一些非常不稳定的行为：

1.  您必须按 EOF 键两次（这也会创建一个空白条目，该条目被计算在数组中。
2.  第一个条目的第一个数字被截断。

其他一切似乎都可以正常工作，但这显然不是预期的结果。下面是我的代码。你能解释什么是错的吗？

```
main() {
int i,iMax;
double dblMean;
int x[MAX];

printf("Please Enter Up to 20 Integers\n");

for (i=0; i<MAX; i++)
{
    printf("%d.> ",i+1);
    if (getchar() == EOF)           /* Check for CTRL+D OR CTRL+Z */
    break;                          /* Exit loop if EOF entered :: Must be pressed twice and eats first character of first entry */
    scanf("%d",&x[i]);
    iMax=i;
}

printf("\nYou entered  %d numbers\n",iMax+1);               /* Should be i+1 but EOF had to be entered twice */
printf("\nIndex       Item        Reverse Item\n");
for (i=0; i<=iMax; i++)
    printf("%3d%4c%8d%9c%11d\n",i,'  ',x[i],'  ',x[iMax-i]);
return 0; 
```

}

编辑：这是我的最终代码，谢谢大家的帮助：

```
#include <stdio.h>
#include <stdlib.h>
#define MAX 20
int main()
{
    int i,iMax;
    int x[MAX];

    printf("Please Enter Up to 20 Integers\n");

    for (i=0; i<MAX; i++)
    {
        printf("%d.> ",i+1);
        if (scanf("%d",&x[i]) != 1)                         /* Checks for CTRL+D OR CTRL+Z */
        break;                                              /* EOF returns -1 and loop will be exited */
        iMax=i;                                             /* iMax must be set for second loop to exit properly */
                                                            /* Can sizeof x be used instead for second loop? */
    }

    printf("\nYou entered  %d numbers\n",iMax+1);           /* Displays number of items entered... Will be <= MAX*/
    printf("\nIndex       Item        Reverse Item\n");
    for (i=0; i<=iMax; i++)                                 /* Why wont 'for (i=0; i<=sizeof x; i++)' work? */
        printf("%3d%4c%8d%9c%11d\n",i,'  ',x[i],'  ',x[iMax-i]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:08:41.697

该`getchar()`调用读取（并有效地丢弃）第一个数字，因为它不是 EOF。

你没有测试它是否`scanf()`有效；你应该。

```
for (i = 0; i < MAX; i++)
{
    if (scanf("%d", &x[i]) != 1)
        break;
} 
```

此时，`i`数组中有整数；你真的不需要`iMax`在循环中设置。您可以在循环退出时简单地设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:42:08.007

此外，除了检查 scanf 之外，您还需要了解以下内容：-

EOF 不是字符。EOF 是 getchar() 在到达输入末尾或遇到某种错误时返回的宏。^D 不是“EOF 字符”。当您在一行上单独点击 ^D 时，在 linux 下发生的事情是它关闭了流，并且 getchar() 调用到达输入的末尾并返回 EOF 宏。如果您在一行中间的某处键入 ^D，则流不会关闭，因此 getchar() 返回它读取的值并且您的循环不会退出。

有关详细说明，请参见[http://www.c-faq.com/stdio/getcharc.html](http://www.c-faq.com/stdio/getcharc.html)。

# c++ - Xcode 4.5 (iOS 6) 出现类型冲突错误？

> ID：13005213
> 
> 赞同：0
> 
> 时间：2012-10-22T05:04:49.870
> 
> 标签：c++, xcode4.5

我在文件中使用此代码`inet_ntop.h`。在这里我宣布.`const **char *inet_ntop**`

```
#ifndef HAVE_INET_NTOP
#if defined(__cplusplus)
extern "C" {
#endif
    const char *inet_ntop(int af, const void *src, char *dst, size_t size);
#if defined(__cplusplus)
}
#endif
#endif /* HAVE_INET_NTOP */ 
```

在编译时，我收到“冲突类型`**inet_ntop**`”错误。

这在 Xcode 3.2.3 中有效，但在 Xcode 4.5 中使用同一应用程序中的代码会给我这个冲突错误。我该如何解决？

# javascript - 使用javascript更改html中奇数/偶数DIV的颜色

> ID：13005214
> 
> 赞同：6
> 
> 时间：2012-10-22T05:05:00.947
> 
> 标签：javascript, css, html

例如我们 5 个 DIV：

```
<div id="container" >
  <div class="child">1</div>
  <div class="child">2</div>
  <div class="child">3</div>
  <div class="child">4</div>
  <div class="child">5</div>
</div> 
```

如何更改偶数 DIV 的背景颜色？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T05:09:01.087

***CSS3*** - 不能在 IE8 等旧版浏览器中运行

```
#container2 > div:nth-child(even){
  background: yellow;
} 
```

*也适用于 IE8 的***jQuery****

 *```
$("#container > div:nth-child(even)").addClass("even"); 
```

我还发现了这个讨论：[IE8 and jQuery selectors](https://stackoverflow.com/questions/3282066/ie8-and-jquery-selectors)

这是[CSS3 和 jQuery 的 DEMO](http://jsfiddle.net/mplungjan/EFVE7/)

```
$("#container1 > div:nth-child(even)").addClass("even");
```

```
.even {
  background-color: yellow
}

#container2>div:nth-child(even) {
  background: yellow;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
jQuery:
<div id="container1">
  <div class="child">1</div>
  <div class="child">2</div>
  <div class="child">3</div>
  <div class="child">4</div>
  <div class="child">5</div>
</div>
<hr/> CSS3:
<div id="container2">
  <div class="child">1</div>
  <div class="child">2</div>
  <div class="child">3</div>
  <div class="child">4</div>
  <div class="child">5</div>
</div>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T05:19:53.393

如果您出于某种原因想要一个 javascript 选项（也许您希望做的不仅仅是一个类？）您可以在 jquery 中使用 each() 函数。[这](http://jsfiddle.net/pkDkP/2/)是一个启动的有效示例！

**CSS**

```
.redBox{
    background-color: #ff0000;
}​ 
```

**Javascript**

```
var i = 0;
$(".child").each(function(i){
    if(i%2===0){
        $(this).addClass("redBox");
    }
    i++;
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T05:08:56.127

尝试`nth-child` **[演示](http://jsfiddle.net/pintu31/SxnsG/)**

```
div:nth-child(even){
background: yellow;
}

div{
 background: red;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T05:08:51.490

只用 CSS 做？

```
#container child:nth-child(even) {background: #CCC} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T05:11:53.463

您还可以使用 CSS3 nth-child 选择器。[你可以在这里](http://www.w3schools.com/cssref/sel_nth-child.asp)找到样品*

# jquery - Jquery Mobile 按钮数据-mini

> ID：13005215
> 
> 赞同：3
> 
> 时间：2012-10-22T05:05:03.877
> 
> 标签：jquery, css, cordova, mobile

我是新的 Web 技术用户。

Jquery Mobile在“ *button ”（带有***data-role** =" *button* " 的元素）中提供了**data-mini**属性。

 ****这使*按钮*更小，但对我来说并不小。

按钮的宽度对我的应用程序来说太大了。我真的需要在小屏幕手机中并排放置十个按钮。（这是系统的必需品！）。

那么，我该怎么做呢？按钮更小？

在这里查看我想要的代码示例：http: [//paste.ideaslabs.com/show/jroVUxgjS0](http://paste.ideaslabs.com/show/jroVUxgjS0)

在此处查看上面 HTML 的屏幕截图：http: [//s16.postimage.org/m9u8gn26t/Screenshot_from_2012_10_22_03_42_08.png](http://s16.postimage.org/m9u8gn26t/Screenshot_from_2012_10_22_03_42_08.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:33:30.933

jquery mobile 的设计方式是每行最多可以显示五个项目，当尝试添加第六个项目时，它会溢出到下一行。这是由于移动设备的体积小，因为它是为移动设备设计的。

**编辑：**

是的，可以显示五个以上的项目，但这取决于设备屏幕尺寸，因为我只是在 iPhone（纵向模式）上运行您的示例，它显示 7 个按钮，但在纵向模式下，它显示所有 10 个按钮。

![iPhone 上的输出](../Images/30d97c4d5d7ace8c5ff89b19dfe19250.png)****

# linux - 将一行回显保存到 BASH 中的变量？

> ID：13005226
> 
> 赞同：0
> 
> 时间：2012-10-22T05:07:04.517
> 
> 标签：linux, bash, echo

好的，这个问题的答案可能非常简单，但我已经搜索了一段时间，但我无法弄清楚。我有一个名为“tmessagef”的变量。该变量的格式如下：

```
value1*value2*vlaue3*value4*value5 
```

我想要的变量的唯一部分是值 5。我目前正在使用以下代码，但它只打印每个值并且不会将它们保存到变量中：

```
OIFS=$IFS
IFS='*'
arr2=$tmessagef
for x in $arr2
do
    echo "$x"
done
IFS=$OIFS 
```

我想要做的是获取 echo 命令生成的第 5 行并将其保存到名为“tmessage”的变量中。我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:44:00.490

对于这个非常具体的场景（您只想在最后提取值），您可以使用参数扩展

```
echo "${word##*\*}" 
```

或将其分配给变量而不是使用“回声”。

**说明**：

*   `##`删除锚定在开头与模式匹配的最长子字符串
*   `*`匹配任意数量的任意字符
*   `\*`匹配文字星号

所以基本上，删除以星号结尾的最长子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:16:01.023

数组操作：

```
OIFS="$IFS" IFS='*' Y=($X)
x=${Y[${#Y[@]}-1]}
IFS="$OIFS" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:14:36.233

可以用cut吗？

```
VAL=`echo 'value1*value2*vlaue3*value4*value5' | cut -f5 -d'*'` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:20:53.690

我相信 mcalex 的评论应该回答它：

> 更改`echo "$x"`为`tmessage="$x"`。在循环结束时 $val 将包含最后一个值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T05:15:00.917

```
IFS=* read -r _{,,,} tmessage _ <<<"$tmessagef" 
```

或者

```
[[ $tmessagef =~ ^(.*\*){4}(.*)\* ]]; tmessage=${BASH_REMATCH[2]} 
```

阅读[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)以及这个问题的其他数万亿个答案。

不要为此使用回声。如果您有需要保存的输出，请参阅： http: [//mywiki.wooledge.org/BashFAQ/002](http://mywiki.wooledge.org/BashFAQ/002)

# c# - FormMethod.Post 在 MVC4 中返回查询字符串

> ID：13005229
> 
> 赞同：2
> 
> 时间：2012-10-22T05:07:58.697
> 
> 标签：c#, asp.net, asp.net-mvc

我在 _Layout.cshtml 页面中传递了我的查询字符串

```
 <li>@Html.ActionLink("Shopping", "Index1", new { controller = "Shopping", UserID = "Admin1" })</li> 
```

我有一个更新视图来更新文本框中的值

```
 @using (Html.BeginForm("Update", "Shopping", new { id = Request.QueryString["UserID"] }, FormMethod.Post, new { id = "myForm" }))
         {
               @Html.Hidden("id", @Request.QueryString["UserID"] as string)
               @Html.Hidden("productid", item.ProductID as string)
               @Html.TextBox("qty", item.Quantity)
               @Html.Hidden("unitrate", item.Rate)
               <input type="submit" value="Update" />
         } 
```

在第一次发帖时，我得到这样的网址

```
http://localhost:61110/Shopping/Index1?UserID=Admin1 
```

但是第二次，在发布后我得到这样的网址

```
http://localhost:61110/Shopping/Index1 
```

如何在发布表单时始终获取查询字符串值。
我也试过这个[mvc3： html.beginform 搜索返回空查询字符串](https://stackoverflow.com/questions/9279741/mvc3-html-beginform-search-returning-empty-querystring)

但无法在第二次发布
任何建议时获得查询字符串。

编辑：更新操作代码

```
[HttpPost]
        public ActionResult Update(string id, string productid, int qty, decimal unitrate)
        {
            if (ModelState.IsValid)
            {
                int _records = UpdatePrice(id,productid,qty,unitrate);
                if (_records > 0)
                {
                    return RedirectToAction("Index1", "Shopping",new { id = Request.QueryString["UserID"] });
                }
                else
                {
                    ModelState.AddModelError("","Can Not Update");
                }
            }
            return View("Index1");
        }

public int UpdatePrice(string id,string productid,int qty,decimal unitrate)
    {
        con.Open(); 
        var total = qty * unitrate;
        SqlCommand cmd = new SqlCommand("Update [Table_name] Set Quantity='" + qty + "',Price='" + total + "' where [User ID]='" + id + "' and [Product ID]='" + productid + "'", con);
        cmd.Parameters.AddWithValue("@total", total);
        return cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:25:55.313

您还需要`new { id = Request.QueryString["UserID"] }`在 Update 中添加到 RedirectToAction。

# php - PHP 标头已发送错误

> ID：13005242
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:08:56.317
> 
> 标签：php, mysql, login, header

我的代码有问题。如果登录正常，它应该重定向到一个页面。我成功登录，但我收到标题转发错误。这是发生问题的行：

```
header("Location: members.php"); 
```

这是错误消息：警告：无法修改标头信息 - 标头已发送

如果有帮助，这是我的完整页面代码：

```
<?php 
    // Connects to your Database 
    include("dbconnect.php");
    mysql_select_db("maxgee_close2");
    //Checks if there is a login cookie

    if(isset($_COOKIE['ID_my_site']))
     //if there is, it logs you in and directes you to the members page
    { 
        $username = $_COOKIE['ID_my_site']; 
        $password = $_COOKIE['Key_my_site'];
        $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());
        while($info = mysql_fetch_array( $check )) 
        {
            if ($pass != $info['password'])
            {
            }
            else
            {
                header("Location: members.php");
            }
        }
    }
    //if the login form is submitted 
    if (isset($_POST['submit'])) { // if form has been submitted
     // makes sure they filled it in
        if(!$_POST['username'] | !$_POST['password']) {
            die('You did not fill in a required field.');
        }
        // checks it against the database

        if (!get_magic_quotes_gpc()) {
            $_POST['email'] = addslashes($_POST['email']);
        }
        $check = mysql_query("SELECT * FROM users WHERE username = '".$_POST['username']."'")or die(mysql_error());

        //Gives error if user dosen't exist
        $check2 = mysql_num_rows($check);
        if ($check2 == 0) {
            die('That user does not exist in our database. <a href=add.php>Click Here to Register</a>');
        }
        while($info = mysql_fetch_array( $check ))  
        {
            $_POST['password'] = stripslashes($_POST['password']);

            $info['password'] = stripslashes($info['password']);

            $_POST['password'] = md5($_POST['password']);

            //gives error if the password is wrong

            if ($_POST['password'] != $info['password']) {
                die('Incorrect password, please try again.');
            }
            else 
            { 
                // if login is ok then we add a cookie 
                $_POST['username'] = stripslashes($_POST['username']); 
                $hour = time() + 3600; 

              //then redirect them to the members area and the line with the error
              header("Location: members.php");
            }
        } 
      }
      else
      { 
        // if they are not logged in
         ?>
         <form action="<?php echo $_SERVER['PHP_SELF']?>" method="post">
         <h1>Login</h1>
         Username:
        <input type="text" name="username" maxlength="40"> 
        Password:
        <input type="password" name="password" maxlength="50"> 
        <input type="submit" name="submit" value="Login">
        </form> 
    <?php 
     } 
     include("topsite.php");
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:11:32.107

您的代码开头有一个空格..

`<?php`

删除后尝试。

有关更多信息，请查看[此](http://php.net/manual/en/function.header.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:12:09.230

您的`<?php`标签前可能有一个空格。看起来它在您的示例中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:12:52.707

php 标签前有一个空格。PHP 标记之外的任何空格都将被视为用于输出的空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:19:37.673

你写

```
$password = $_COOKIE['Key_my_site']; 
```

但是您正在将 $pass 与 $info['password'] 进行比较，它应该是

```
 if ($password != $info['password']){

    } else {

        header("Location: members.php");
    } 
```

您可以通过编写以更好的方式修改您的查询

```
$check = mysql_query("SELECT * FROM users WHERE username = '$username' AND password = '$password'")or die(mysql_error());

if(mysql_num_rows($check) == 0) header("Location: members.php"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T05:13:56.747

制作没有结束标签的 php 文件是一个好习惯：

```
?> 
```

只需写如下内容：

```
//end of file 
```

例如，您可以在 codeIgniter php 文件中看到它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T05:14:52.127

[相同的问题/问题](https://stackoverflow.com/questions/12703560/cannot-modify-header-information-on-static-function/12703581#12703581)

尝试`ob_start()`在开始和`ob_flush()`或`ob_end_flush()`结束时添加

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T05:17:20.177

尝试使用

```
<?php ob_start();?> // top of the page

<?php ob_flush();?> // at the end of the page 
```

这两个用于启动**输出缓冲区**。如果我们使用它，用户的输出只会在该文档中的每一行执行后抛出

并尝试删除**session_start()**之前的空间。

```
eg: <?php session_start();?>
    <!DOCTYPE html>
    <html> 
```

# cordova - 如何查看phonegap中的gps状态？

> ID：13005249
> 
> 赞同：1
> 
> 时间：2012-10-22T05:09:44.723
> 
> 标签：cordova, gps

我想检查是否在 phonegap 中启用或禁用了 GPS。

并在 GPS 状态改变时显示警报

我已经在android中做到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:22:32.177

来自 phonegap[文档](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html)

```
var watchId = navigator.geolocation.watchPosition(geolocationSuccess,
                                              [geolocationError],
                                              [geolocationOptions]); 
```

你可能想做这样的事情（未经测试）

```
navigator.geolocation.watchPosition(function(position) {
    alert(position.coords.latitude) //or logitude and etc
}); 
```

如果你想停止观看

```
geolocation.clearWatch 
```

看看[这个](https://stackoverflow.com/questions/10444279/i-am-getting-lat-long-coordinates-in-phonegap-geolocation-without-using-intern)或[这个](https://stackoverflow.com/questions/7518468/phonegap-gps-without-internet)，可能会有所帮助。

# spring - 无法使用 Spring 3.x 访问文件资源

> ID：13005257
> 
> 赞同：0
> 
> 时间：2012-10-22T05:10:38.370
> 
> 标签：spring

我一直试图打开这个 .json 文件一段时间，它给了我一个空指针异常。如果我做错了什么，请告诉我。

```
/**
 * Handles requests for the application UI.
 */
@Controller
@RequestMapping("/UIController")
public class UIController {

private static final Logger logger = LoggerFactory.getLogger(UIController.class);
private @Autowired ServletContext servletContext;

@RequestMapping(value = "/ClientTree", method = RequestMethod.GET)
public @ResponseBody String clientTree() throws IOException {
    InputStream inputStream = null;
    try {
        inputStream = servletContext.getResourceAsStream("C:\\ClientJson.json");
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        return bufferedReader.readLine();
    } finally {
        if (inputStream != null) {
           inputStream.close();
        }
    }
}
} 
```

我正在尝试打开并读取文件内容，将这些内容发送到 UI 以填充树 jQuery 小部件。

# android - “com.google.zxing.client.android.SCAN”如何在android中工作？

> ID：13005259
> 
> 赞同：3
> 
> 时间：2012-10-22T05:10:45.753
> 
> 标签：android, android-intent, barcode, zxing, barcode-scanner

我用 ZXING 库开发了一个 BarcodeScanner 应用程序。为此，我下载了完整的库并将其添加到我的项目中，并使用 URI：“com.myproject.vinscan.client.android.SCAN”调用了一个 Intent。但后来我发现，我们可以使用 Inetnt 的 URI 为“com.google.zxing.client.android.SCAN”，而不是将 ZXING 的所有包下载并包含到我们的项目中。我的疑问是，没有图书馆它是如何工作的。它甚至可以在离线模式下工作（没有 WIFI/GPRS）。android SDK本身包含的库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T05:14:07.797

如果您通过 Intent 访问它，因为它需要在客户端**上安装**`com.google.zxing.client.android.SCAN`Barcode Scanner 应用程序。（**[参考](http://code.google.com/p/zxing/wiki/ScanningViaIntent)**）

 **如果没有安装，它会重定向到网站并提示用户下载。所以严格来说，用户必须至少连接到互联网一次，才能下载条形码扫描仪应用程序（如果他还没有）

* * *

**交替**

如果您要将 ZXing 核心库的引用添加到您的项目中，您将能够访问它，而无需引导用户下载 Barcode Scanner。**

# sql - 从单个 SQL Server 变量中检索多条数据

> ID：13005263
> 
> 赞同：0
> 
> 时间：2012-10-22T05:11:05.437
> 
> 标签：sql, sql-server, stored-procedures

我有两个变量，例如：

```
@FieldName 
@values 
```

这两个变量的值如下：

*   `@FieldName`- 包含`[a],[b],[c],[d]`
*   `@values`- 包含`5,6,7,8`

现在我只需要检索`'b'`&列的数据`'d'`。

我们怎样才能得到`b=6 & d=8`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:24:36.453

好吧，我讨厌在 SQL Server 上做这样的事情，但是

```
declare @FieldName nvarchar(max) = '[a],[b],[c],[d]'
declare @values nvarchar(max) = '5,6,7,8'
declare @i int, @j int, @break int
declare @a nvarchar(max), @b nvarchar(max), @result nvarchar(max)

select @break = 0

while @break = 0
begin
    select @i = charindex(',', @FieldName), @j = charindex(',', @values)

    if @i > 0 and @j > 0
    begin
        select @a = left(@FieldName, @i - 1), @b = left(@values, @j - 1)

        select @FieldName = right(@FieldName, len(@FieldName) - @i), @values = right(@values, len(@values) - @j)
    end
    else
    begin
        select @a = @FieldName, @b = @values, @break = 1
    end

    if @a in ('[b]', '[d]')
        select @result = isnull(@result + ' & ', '') + @a + '=' + @b 
```

结尾

```
select @result 
```

您还可以将所有这些列表放入临时/变量表中并加入。

```
select *
from
(
    select T.<yourcolumn>, row_number() over (order by T.<yourcolumn>) as rownum
    from <temptable1> as T
) as F
    inner join
    (
        select T.<yourcolumn>, row_number() over (order by T.<yourcolumn>) as rownum
        from <temptable2> as T
    ) as V on V.rownum = F.rownum 
```

或者，更好的是，您可以将参数以 xml 形式传递给 sp，而不是在不同的列表中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:06:13.950

试试这个：
使用 XML 我试图溢出值并将结果存储在表变量中

```
 DECLARE @FieldName VARCHAR(MAX),
    @values varchar(max)

    SET @FieldName = 'a,b,c,d';
    SET @values = '5,6,7,8'

    SET @FieldName = @FieldName + ',';
    SET @values = @values + ',';

    DECLARE @X XML
    SET @X = CAST('<Item>' + REPLACE(@FieldName, ',', '</Item><Item>') + '</Item>' AS XML)

    Declare @X1 XML
    Set @X1=CAST('<Position>' + REPLACE(@values, ',', '</Position><Position>') + '</Position>' AS XML)

    Declare @FieldSample table
    (
     FieldName char(1),
     rowNum int
    )

    Declare @valueSample table
    (position int,
     rowNum int)

    Insert into @FieldSample(rowNum,FieldName)
    Select * from  (
    SELECT row_number() over (order by (select 0)) as rowNum, t.value('.', 'char(1)')   as field
    FROM @x.nodes('/Item') as x(t)
    ) as a
   where a.field !=''

   Insert into @valueSample(rowNum,position)
   Select * from (
   Select row_number() over (order by (select 0)) as rowNum, k.value('.', 'int') as position
   from @X1.nodes('/Position') as x1(k) 
   ) as b
   where b.position !=0 
```

基本上，您可以根据您打算如何获取数据来更改它的最后一个逻辑

```
 Select a.FieldName,b.position from @FieldSample as a
  inner join @valueSample as b
  on a.rowNum=b.rowNum
  where b.position = 6 or b.position =8 
```

# javascript - 在 Windows 8 应用程序中使用服务器端代码

> ID：13005264
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:11:06.297
> 
> 标签：javascript, windows-8

对于用 JS/HTML5 编写 Windows 8 应用程序，有没有办法合并服务器端代码？例如，我有一个后端带有 C# 的 asp.net Web 应用程序。将它移植到 Windows 应用商店应用程序的最简单方法是什么？

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:32:33.220

如果您有一个要移植到 Win8 JavaScript / HTML5 的 C# ASP.NET 应用程序，则移植代码没有真正的范围。你最好的选择是移植设计（图形和功能）而不是实现。

# ruby-on-rails - 缺少rails主要布局

> ID：13005266
> 
> 赞同：2
> 
> 时间：2012-10-22T05:11:47.123
> 
> 标签：ruby-on-rails, ruby, layout, view

我正在使用最新版本的 ruby​​ 和 ROR。我在`app/views/layouts/application.html.erb file`. 让我们这样说：

```
<html>
<head><title>ABC</title></head>
<body>
  <%= yield %>
</body>
</html> 
```

我无法让布局显示在我的主页（我拥有 atm 的唯一页面）中。主页也是一个 .html.erb 文件，它包含基本的 html 和 rails 命令。我已经为它创建了控制器，如下所示：

```
class HomeController < ActionController::Base
  protect_from_forgery
  def index
    #nothing yet
  end
end 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:14:43.693

HomeController 继承自 ActionController::Base。使其继承自 ApplicationController。这可能会有所帮助

改变

```
 class HomeController < ActionController::Base 
```

至

```
 class HomeController < ApplicationController 
```

# ios - 面向经验丰富的开发人员的 Interface Builder 概述/介绍？

> ID：13005267
> 
> 赞同：2
> 
> 时间：2012-10-22T05:11:49.667
> 
> 标签：ios, xcode, interface-builder

有经验的开发人员学习 IB（iOS 版）的好资源吗？我现在已经尝试过多次阅读 Apple 文档，但所有 Apple 特定的术语总是让我感到厌烦。官方的东西还坚持认为 IB 不生成代码，因此在那里没有任何联系，这令人沮丧。

我已经设法将一些 iOS 应用程序放在一起，最近几次纯粹是在代码中，但现在我真的需要和 IB 和平相处。

我想我真正想要的是从苹果的加拉帕戈斯语到世界其他地方的术语的翻译。绘制从 IB 到运行时生成的 UI 对象的连接也很棒。

谢谢！

PS - 我知道存在跨平台和其他第三方开发框架（我已经全部尝试过）和官方文档。IB 是 Apple 领域唯一的一等公民，一旦你习惯了它可能会相当不错，所以这就是我想要使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:30:01.310

观看 Paul Hegarty 在 iTunesU 上的讲座。2011 年秋季，斯坦福大学 iPhone 开发。在早期的讲座中非常清楚地介绍了故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:15:33.513

任何体面的书都会帮助你理解 Interface Builder。我认为，您正在寻找完美的书籍/资源，而这并不存在。我真的很喜欢[iOS5 Pushing the Limits](http://iosptl.com/)，尽管我相信很多其他人也发现了其他有趣的书。在 google 上快速搜索：“Tutorial iOS Interface Builder”将揭示您可以使用的无数资源。最重要的事情：只是潜水并在做的时候玩得开心。

# regex - MongoDB - 去除字段中的非数字字符

> ID：13005269
> 
> 赞同：8
> 
> 时间：2012-10-22T05:11:58.277
> 
> 标签：regex, mongodb, mlab

我有一个电话号码字段，其中使用了随机的各种分隔符，例如：

```
932-555-1515
951.555.1255
(952) 555-1414 
```

我想浏览每个已经存在的字段并删除非数字字符。

那可能吗？

无论它是存储为整数还是一串数字，我都不在乎。它只会用于显示目的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T05:33:36.633

您必须在代码中遍历所有文档并使用正则表达式替换来清理字符串。

这是在 mongo shell 中为包含需要清理`test`的字段的集合执行此操作的方法。`phone`

```
db.test.find().forEach(function(doc) {
  doc.phone = doc.phone.replace(/[^0-9]/g, ''); 
  db.test.save(doc);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-24T21:45:32.877

基于@JohnnyHK 前面的示例，我还在查找查询中添加了正则表达式：

```
/*
MongoDB: Find by regular expression and run regex replace on results
*/
db.test.find({"url": { $regex: 'http:\/\/' }}).forEach(function(doc) {
  doc.url = doc.url.replace(/http:\/\/www\.url\.com/g, 'http://another.url.com'); 
  db.test.save(doc);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-01T20:38:14.430

从 开始`Mongo 4.4`，[`$function`](https://docs.mongodb.com/master/reference/operator/aggregation/function/index.html)聚合运算符允许应用自定义 javascript 函数来实现 MongoDB 查询语言不支持的行为。

再加上对[`db.collection.update()`](https://docs.mongodb.com/master/reference/method/db.collection.update/index.html#db.collection.update)in的改进`Mongo 4.2`，可以接受一个聚合管道，允许根据自己的值更新字段，

我们可以以语言不容易允许的方式操作和更新字段，并避免低效的 find/foreach 模式：

```
// { "x" : "932-555-1515",   "y" : 3 }
// { "x" : "951.555.1255",   "y" : 7 }
// { "x" : "(952) 555-1414", "y" : 6 }
db.collection.updateMany(
  { "x": { $regex: /[^0-9]/g } },
  [{ $set:
    { "x":
      { $function: {
          body: function(x) { return x.replace(/[^0-9]/g, ''); },
          args: ["$x"],
          lang: "js"
      }}
    }
  }
])
// { "x" : "9325551515", "y" : 3 }
// { "x" : "9515551255", "y" : 7 }
// { "x" : "9525551414", "y" : 6 } 
```

* * *

更新包括：

*   匹配查询`{ "x": { $regex: /[^0-9]/g } }`，过滤要更新的文档（在我们的例子中，任何文档在我们感兴趣的更新字段中包含非数字字符）。

*   更新聚合管道`[ { $set: { active: { $eq: [ "$a", "Hello" ] } } } ]`（注意方括号表示使用聚合管道）。[`$set`](https://docs.mongodb.com/master/reference/operator/aggregation/set/#pipe._S_set)是一个新的聚合运算符和`$addFields`.

`$function`接受3个参数：

*   `body`，这是要应用的函数，其参数是要修改的字符串。这里的功能只是用空字符替换匹配正则表达式的字符。
*   `args`，其中包含`body`函数作为参数的记录中的字段。在我们的例子中，`"$x"`。
*   `lang`，这`body`是编写函数的语言。仅`js`当前可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T09:31:06.980

在 mongodb 4.2 版中，您有[regexFind 项目运算符](https://docs.mongodb.com/manual/reference/operator/aggregation/regexFind/)，它可以在聚合中与[substr](https://docs.mongodb.com/manual/reference/operator/aggregation/substr/)一起使用，而无需遍历客户端中的所有文档

# arrays - 在 result_array() 中获取数据；

> ID：13005272
> 
> 赞同：0
> 
> 时间：2012-10-22T05:12:29.540
> 
> 标签：arrays, codeigniter

当我使用 print_r 函数时，我正在获取数组中的数据及其获取数据，但是当我显示数组时，它所说的未定义数据字段。有什么方法可以显示结果`array();`？我不想使用`foreach`循环。

代码是：

```
$menu2=$this->load->common_model->getRecord('*','inner_menu','menu_page',2);
if ( $menu2->num_rows() > 0) { 
  $page1    =   $menu2->result_array();
  print_r($page1);
  <?=$page1['url']?>// here it said undeifned variable url
                    // url is in my db tabel inner_menu
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:16:57.823

你的语法真的不对，或者你正在以一种非常奇怪或不可接受的方式使用 CodeIgniter。

首先，您应该像这样加载模型：

```
$this->load->model('common_model');
$this->common_model->getRecord(); 
```

你的`getRecord()`方法应该是一个抛出`result_array()`给控制器而不是调用它的控制器。

其次，为了更好地理解，我们需要查看一些示例代码，`getRecord()`以便我们为您提供帮助。

# java - 在struts1.2中检索动作映射时出错

> ID：13005273
> 
> 赞同：0
> 
> 时间：2012-10-22T05:12:36.240
> 
> 标签：java, struts

我被这个错误困住了 n 无法找到我出错的地方

这是代码..请使用 myelipse，struts1.2 浏览它

struts-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts      Configuration 1.2//EN" "http://struts.apache.org/dtds/struts-config_1_2.dtd">

<struts-config>
<data-sources />
<form-beans />
<global-exceptions />
<global-forwards />
<action-mappings>
        <action path="/SwitchAction"  type="org.apache.struts.actions.SwitchAction"/>
 </action-mappings>
<message-resources parameter="com.yourcompany.struts.ApplicationResources" />
</struts-config> 
```

struts-config-Admin.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://struts.apache.org/dtds/struts-config_1_2.dtd">

   <struts-config>
    <data-sources />
    <form-beans>
        <form-bean name="adminLoginForm" type="Admin.Form.AdminLoginForm" />
        <form-bean name="adminUserCreationForm" type="Admin.Form.AdminUserCreationForm" />

    </form-beans>

    <global-exceptions />
    <global-forwards />
    <action-mappings>
        <action attribute="AdminLoginForm" input="/AdminModule/AdminLogin.jsp"
            name="adminLoginForm" path="/AdminLogin" scope="request"
            type="Admin.Action.AdminLoginAction">
            <set-property property="cancellable" value="true" />
            <forward name="failure" path="/AdminErrorPage.jsp" />
            <forward name="success" path="/AdminHomePage.jsp" />
        </action>
        <action attribute="adminUserCreationForm" input="/AdminModule/AdminUserCreation.jsp"
            name="adminUserCreationForm" path="/AdminUserCreation" scope="request"
            type="Admin.Action.AdminUserCreationAction">
            <set-property property="cancellable" value="true" />
            <forward name="failure" path="/AdminModule/AdminErrorPage.jsp" />
            <forward name="success" path="/AdminModule/AdminSuccessPage.jsp" />
        </action>
    </action-mappings>
</struts-config> 
```

AdminUserCreationAction.java

```
 <%@ page language="java" import="java.util.*" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean"%>
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html"%>

<html>
    <head>
        <base href="<%=basePath%>"    
    </head>

    <body>
        User Creation Page
        <html:form action="/AdminUserCreation">
            AdminName : <html:text property="username"/><html:errors property="username"/><br/>
            Password : <html:password property="password"/><html:errors property="password"/><br/>
            <html:submit/>
        </html:form>
    </body>
</html> 
```

AdminUserCreationForm.java

```
package Admin.Form;

import org.apache.struts.action.ActionForm;

public class AdminUserCreationForm extends ActionForm {

    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
} 
```

AdminUserCreation.jsp

```
 <%@ page language="java" import="java.util.*" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean"%>
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html"%> 
    </head>
    <body>
        User Creation Page
        <html:form action="/AdminUserCreation">
            AdminName : <html:text property="username"/><html:errors property="username"/><br/>
            Password : <html:password property="password"/><html:errors property="password"/><br/>
            <html:submit/>
        </html:form>
    </body>
</html> 
```

我进入浏览器时出错

```
 type Exception report

     message 

     description The server encountered an internal error () that prevented it from fulfilling this request.

     exception 

     org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: Cannot retrieve mapping for action /AdminUserCreation
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:541)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 

     javax.servlet.ServletException: javax.servlet.jsp.JspException: Cannot retrieve mapping for action /AdminUserCreation
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:850)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:779)
    org.apache.jsp.AdminModule.AdminUserCreation_jsp._jspService(AdminUserCreation_jsp.java:114)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 

     javax.servlet.jsp.JspException: Cannot retrieve mapping for action /AdminUserCreation
    org.apache.struts.taglib.html.FormTag.lookup(FormTag.java:759)
    org.apache.struts.taglib.html.FormTag.doStartTag(FormTag.java:443)
    org.apache.jsp.AdminModule.AdminUserCreation_jsp._jspx_meth_html_005fform_005f0(AdminUserCreation_jsp.java:131)
    org.apache.jsp.AdminModule.AdminUserCreation_jsp._jspService(AdminUserCreation_jsp.java:104)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
         org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
         javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

     note The full stack trace of the root cause is available in the Apache Tomcat/6.0.13 logs. 
```

msg im gettng 在控制台中

```
 Servlet.service() for servlet jsp threw exception
 javax.servlet.jsp.JspException: Cannot retrieve mapping for action /AdminUserCreation
 at org.apache.struts.taglib.html.FormTag.lookup(FormTag.java:759)
    at org.apache.struts.taglib.html.FormTag.doStartTag(FormTag.java:443)
    at org.apache.jsp.AdminModule.AdminUserCreation_jsp._jspx_meth_html_005fform_005f0(AdminUserCreation_jsp.java:131)
    at org.apache.jsp.AdminModule.AdminUserCreation_jsp._jspService(AdminUserCreation_jsp.java:104)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T17:35:21.800

这里有些奇怪（尽管它可能不是问题的唯一原因）：

在你的 struts 配置文件中，你已经定义了

```
<action attribute="adminUserCreationForm" .....
            type="Admin.Action.AdminUserCreationAction"> 
```

这意味着应该在 Admin.Action 包下找到类 AdminUserCreationAction。

但是，您的 AdminUserCreationAction 类在 Admin.Form 包下声明：

```
package Admin.Form;
public class AdminUserCreationForm ... 
```

请尝试在这两种情况下使用相同的包名。

# php - 在 PHP 中定义具有相同名称和不同参数类型的多功能函数

> ID：13005276
> 
> 赞同：0
> 
> 时间：2012-10-22T05:13:11.333
> 
> 标签：php, function, arguments

> **可能重复：**
> [PHP OOP：每个参数类型的唯一方法？](https://stackoverflow.com/questions/2789373/php-oop-unique-method-per-argument-type)
> [PHP 5.3 方法重载（如在 Java 中）](https://stackoverflow.com/questions/6582566/php-5-3-method-overloading-like-in-java)

我有一些不同的类，比如用户和组。我想创建一个通用类来添加类的属性。我的班级有一些功能，如添加、删除、编辑等，例如：

```
<?php
class Persistence{
    function add(Users $userObj){
        ....
    }
    function add(Groups $groupObj){
        ....
    }
}
?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:24:51.960

虽然 PHP 中允许类型提示，但不允许基于参数类型的方法重载。因此，您需要为每个案例创建不同的方法并使用这些方法。但是，您可以做的是从 add-method 中删除类型提示，并改用 if-else 语句或参数上的 switch：

```
public function add ($collection) }
   if($collection instanceof Users) {
     return $this->addUsers($collection);
   }
   if($collection instanceof Groups) {
     return $this->addGroups($collection);
   }
   ...
   throw new InvalidArgumentException("Unknown collection type");
}

public function addUsers(Users $users) {
}

public function addGroups(Groups $groups) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:24:41.380

另一种解决方案是为您的`Persistence`类创建一个接口：

```
interface PersistenceInterface { /* ... */ }

class Users implements PersistenceInterface { /* ... */ }
class Groups implements PersistenceInterface { /* ... */ }

class Persistence
{
    public function add(PersistenceInterface $userObj)
    {
        // ...
    }
} 
```

这样，您的`Persistence`类只允许使用该接口标记的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T05:17:04.737

像这样的方法重载是不可能的；你必须削弱声明中的谓词：

```
function add($obj)
{
    if ($obj instanceof Users) {
    } elseif ($obj instanceof Groups) {
    } else {
        throw new Exception("Invalid type for object");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:19:46.390

在 PHP 中，重载仅适用于属性，而不是您可能习惯于其他语言的重载。您可以重载[`__call`and`__callStatic`](http://www.php.net/manual/en/language.oop5.overloading.php)，但使用继承更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T05:20:05.830

PHP 没有类型化参数，因此您无法像示例中那样进行操作。但是，您可以传入带有类型的第二个参数并在函数中使用它：

```
function add($type, $object){
    if ($type=="user"){
       // process $object as a user
    } elseif ($type=="group"){
       // process $object as a group
    }
} 
```

# graph - 调整 MST 以考虑边缘权重的 O(1) 变化

> ID：13005278
> 
> 赞同：1
> 
> 时间：2012-10-22T05:13:13.830
> 
> 标签：graph, tree, minimum-spanning-tree

设`G = (V,E)`为无向图。让`w(e)`是一个具有正权重的加权函数。让是关于`T`的最小生成树。`G``w`

给定一组边`S`，其中`S`是 的子集`E(G)`，定义一个新的加权函数`Q`，`Q(e) = w(e)`如果`e`不在`S`，`Q(e) = w(e)+100`如果`e`在`S`。设计一个算法，接受作为输入 , ,`G`和一个集合，并输出一个最小生成树 wrt 。使其及时运行。`T``w``S``|S| = 10``Q``O(V+E)`

好的：自从我最初提出这个问题以来，我了解到的是，对 MST 进行分区是为了“分解”一条边，这会产生两个独立的组件，每个 MST 的顶点都是它们自己组件中的顶点。因此，在这个问题中，S 中的边可能会将 MST 分解为更小的 MST（11，对吗？）。我必须找到将一个组件连接到另一个组件的最轻的边缘。

我的计划是从一个顶点开始并使用 BFS 进行扩展，直到我涵盖所有这些组件。对于组件中的每个 u，`u.color = black`. 然后，我返回并再次用 BFS 覆盖组件，这次找到所有连接到非黑色顶点的边，因此不包含在组件中，并穿过现有的切口。与这些边相对的顶点被放置在队列 R 中。一旦我完成，我`u = RemoveMin(R)`就是运行`O(lgE)`。因为它只会在我每次覆盖一个组件时被调用，所以它总体上运行的最大值是`10*O(lgE)`，仍然是`O(lgE)`. 因此，一旦删除 u，我就会对新组件执行 BFS，以便该组件中的所有 u.color = black。我再次遍历所有黑色顶点，以便我可以将所有带有更新键的白色顶点排队到 R 中。我做`u = RemoveMin(R)`.

所以我真的认为这是可行的并且是可以证明的。任何人都可以提出类似的建议吗？

任何帮助，无论多么小，都将不胜感激。

# entity-framework - 使用实体框架，如何映射一个函数？

> ID：13005284
> 
> 赞同：0
> 
> 时间：2012-10-22T05:13:59.540
> 
> 标签：entity-framework, entity-framework-4.1

我正在使用实体框架，并想象我有一个函数，它返回一个包含以下列的表：

*   StudentId : smallint
*   TestTemplateId : smallint
*   日期：日期

如您所见，我正在返回一个只有 id 的表。在应用程序中，我有一个类似`Student`and的类`TestTemplate`，我不知道该函数是否有可能映射到复杂对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:30:16.023

您正在寻找的是实体框架导航属性。这些允许您将数据库中的外键关系表示为模型中的直接对象链接。

我写了一个介绍教程来编写第一个导航属性，可以在这里找到：http: [//blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)

# c++ - 如何表示大于 64 位的二进制数大小

> ID：13005286
> 
> 赞同：3
> 
> 时间：2012-10-22T05:14:14.320
> 
> 标签：c++, binary

我有一个二进制数，我想用十进制表示。编号如下：

```
Binary = 1000 11100000 00000000 00000000 00000000 00000000 01101110 10110000 10100101 
```

其等效的十六进制表示如下：

```
Hexadecimal = 08 E0 00 00 00 00 6E B0 A5 
```

我在 Windows 7 上工作，并尝试在程序员模式下使用 Bin（二进制）和 Qword 中的计算器。但是，它有 64 位的限制。

问题：

*   我如何用十进制表示这个数字？
*   有没有免费的工具可以代表这个数字？
*   C++11/C++ 中有什么方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:24:30.553

首先确定您的平台将支持多大的二进制数。假设它是 64。将你的二进制数分成 64 的块，并像往常一样做低位块。现在，下一个块的低位表示 2 ^(64)。将该块转换为常规数字，但将其乘以 2 ^(64)。您可以根据需要多次使用此技术。您将乘以 2 ^(128)的下一个块，然后乘以 2 ^(192)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:22:04.703

我认为你应该参考[这个](http://www.quora.com/Computer-Programming/What-is-the-trick-to-solve-programming-puzzles-involving-numbers-greater-than-2-64)。

如果您要使用 JAVA，可以使用 BigInteger 类，请[点击此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)。

或下载此用户定义的库，用于在 C++ 中对大数执行计算，请[点击此处](https://mattmccutchen.net/bigint/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:30:38.563

更简单的解决方案可能是从另一边工作。生成所有 10 的幂的二进制表示：`0x1, 0xA, 0x64, 0x3E8, 0x2710, ...`直到 10 的幂大于您的数字。然后，计算每个 10 的幂出现了多少次（当然最多 9 次）。

`0x2F`也是如此`4 * 0xA + 7 * 0xA`，即十进制的 47 位。

# android - Android：关键 aspectX 预期为 Integer，但值为 java.lang.Double。返回默认值 0

> ID：13005287
> 
> 赞同：1
> 
> 时间：2012-10-22T05:14:26.343
> 
> 标签：android, image, crop

在android中使用图像时，我得到了以下异常排序，对此有任何解决方案。

关键 aspectX 预期为 Integer，但值为 java.lang.Double。返回默认值 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:49:37.267

我认为这个例外是不言自明的：你给出的是 Double 类型的数字，它需要的是一个 Integer。

如果这没有响起任何铃声：

```
Double: 1.2, 2.9, 3.4 .... etc!
Integer: 1, 2, 100, 320 .... etc! 
```

这意味着您的代码必须如下所示：

```
i.putExtra("aspectX", 1); 
```

不喜欢：

```
i.putExtra("aspectX", 1.1); 
```

只需在使用它之前打印您传递的变量或参数：

```
Log.e ("My AspectX var is:", ""+my_aspectX_var); 
```

看看它是什么类型的值。

# javascript - 垂直输出二维数组

> ID：13005288
> 
> 赞同：2
> 
> 时间：2012-10-22T05:14:33.303
> 
> 标签：javascript

嘿伙计们，我这里有一个情况。我有一个代码，这里是二维的。

```
<script>
    Brady = new Array(3);

    for (i = 0; i < Brady.length; ++i) {
        Brady[i] = new Array(5);
    }

    Brady[0][0] = "Team 1";
    Brady[0][1] = "Carol";
    Brady[0][2] = "Greg";
    Brady[0][3] = "Greg";
    Brady[0][4] = "Greg";

    Brady[1][0] = "Team 2";
    Brady[1][1] = "Alice";
    Brady[1][2] = "Peter";
    Brady[1][3] = "Peter";
    Brady[1][4] = "Peter";

    Brady[2][0] = "Team 3";
    Brady[2][1] = "Mike";
    Brady[2][2] = "Bobby";
    Brady[2][3] = "Bobby";
    Brady[2][4] = "Bobby";

    function print_2d_string_array(array) {
        document.writeln("<table border>");

        var row;

        for (row = 0; row < array.length; ++row) {
            document.writeln(" <tr>");

            var col;

            for (col = 0; col < array[row].length; ++col) {
                document.writeln("  <td>" + array[row][col] + "</td>");
            }

            document.writeln(" </tr>");
        }
        document.writeln("</table>");
    }

    print_2d_string_array(Brady);
</script> 
```

输出：

```
Team 1  Carol   Greg    Greg    Greg
Team 2  Alice   Peter   Peter   Peter
Team 3  Mike    Bobby   Bobby   Bobby 
```

但我想做的是

```
Team 1  Team 2  Team 3
Carol   Alice   Mike
Greg    Peter   Bobby
Greg    Peter   Bobby
Greg    Peter   Bobby 
```

我花了一个小时来做​​那件事，但我运气不好..请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:24:32.450

尝试：

```
<script>
Brady = new Array(3);

for (i = 0; i < Brady.length; ++i) {
    Brady[i] = new Array(5);
}

Brady[0][0] = "Team 1";
Brady[0][1] = "Carol";
Brady[0][2] = "Greg";
Brady[0][3] = "Greg";
Brady[0][4] = "Greg";

Brady[1][0] = "Team 2";
Brady[1][1] = "Alice";
Brady[1][2] = "Peter";
Brady[1][3] = "Peter";
Brady[1][4] = "Peter";

Brady[2][0] = "Team 3";
Brady[2][1] = "Mike";
Brady[2][2] = "Bobby";
Brady[2][3] = "Bobby";
Brady[2][4] = "Bobby";

function print_2d_string_array(array) {
    document.writeln("<table border>");

    var col_len = array.length;
    var row_len = array[0].length;

    for (var i = 0; i < row_len; i++) {
        document.writeln("<tr>");
        for (var j = 0; j < col_len; j++) {
           document.writeln("<td>" + array[j][i] + "</td>");
        }
        document.writeln("<tr>");
    }
    document.writeln("</table>");
}

print_2d_string_array(Brady);​
</script> 
```

这将输出：

```
Team 1  Team 2  Team 3
Carol   Alice   Mike
Greg    Peter   Bobby
Greg    Peter   Bobby
Greg    Peter   Bobby 
```

这是一个**JSFiddle**示例：http: [//jsfiddle.net/uNPXa/](http://jsfiddle.net/uNPXa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:23:31.857

你应该像这样改变你的 for 循环：

```
for (row = 0; row < array[0] . length; ++ row)
{
    document . writeln (" <tr>");
    var col;
    for (col = 0; col < array . length; ++ col)
    {
            document . writeln ("  <td>" + array [col][row] + "</td>");
    }
    document . writeln (" </tr>");
} 
```

请注意我所做的更改`row < array[0] . length`和`array . length`

# iphone - IOS 5 中的唯一标识符

> ID：13005292
> 
> 赞同：0
> 
> 时间：2012-10-22T05:14:45.577
> 
> 标签：iphone, ios, ios5

> **可能重复：**
> [iPhone 应用程序的唯一标识符](https://stackoverflow.com/questions/227590/unique-identifier-for-an-iphone-app)

我们的服务器数据库根据设备 UDID 识别用户，但现在 UDID 在 IOS 5 中已贬值。我无法使用它...谁能帮我找出“我们如何识别设备？”。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:22:22.050

你可以使用**[OpenUDID](https://github.com/ylechelle/OpenUDID)**

> OpenUDID 是 iOS 上 UIDevice 类（又名 UDID）已弃用的 uniqueIdentifier 属性的直接替代品，并且是 iOS 和 Android 以及最近的 Windows C# 和 Silverlight 的行业友好等价物（参见上面的链接）。
> 
> 这个社区驱动项目的议程是：
> 
> 为通用唯一设备标识符提供可靠的代理和替换。也就是说，在每个设备的基础上，持久且足够独特。不要使用明显的其他敏感唯一标识符（如 MAC 地址）以避免进一步弃用并保护设备级隐私问题 允许同一设备上的任何应用程序访问相同的 OpenUDID 提供开源代码来生成和访问OpenUDID，适用于 iOS 和 Android 从一开始就整合了一个系统，可以让用户选择退出以匹配 Apple 的初始意图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:23:34.863

我个人使用“[唯一设备标识符](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5)”

运行良好，应用程序也获得了 Apple 的批准。=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:43:28.760

使用这个....获取唯一标识符的最简单和最合适的方法是使用 Apple 明确提供的机制来获取一个`[[UIDevice currentDevice] uniqueIdentifier]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:20:36.047

你可以使用[BPXLUUIDHandler](https://github.com/blackpixel/BPXLUUIDHandler)作为 UDID 的一个选项，它在 IOS 5 中已被贬值

# statistics - 测量二维正方形中点分布的均匀性

> ID：13005294
> 
> 赞同：1
> 
> 时间：2012-10-22T05:14:54.250
> 
> 标签：statistics, distribution, uniform

我目前遇到了这个问题：我有一个 2D 正方形，里面有一组点，比如 1000 个点。我需要一种方法来查看正方形内的点分布是否分散（或或多或少均匀分布），或者它们倾向于聚集在正方形内的某个点区域。

需要一种数学/统计（非编程）方法来确定这一点。我用谷歌搜索，找到了适合度数，Kolmogorov 之类的东西……只是想知道是否还有其他方法可以实现这一目标。课堂论文需要这个。

所以：输入：一个 2D 正方形和 1000 个点。输出：是/否（是=均匀分布，否=在某些地方聚集）。

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-01T22:42:49.793

如果您的点是独立的，您可以单独检查每个维度的分布。[Kolmogorov-Smirnov](https://en.wikipedia.org/wiki/Kolmogorov%E2%80%93Smirnov_test)检验（衡量 2 个分布之间的距离）是一个很好的检验。首先让我们生成并绘制一些高斯分布的点，以便您了解如何使用 KS 检验（统计量）来检测非均匀分布。

```
>>> import numpy as np
>>> from matplotlib.pyplot import plt
>>> X = np.random.gauss(1000, 2)  # 1000 2-D points, normally distributed
>>> from sklearn.preprocessing import MinMaxScaler
>>> scaler = MinMaxScaler()
>>> X = scaler.fit_transform(X)  # fit to default uniform dist range 0-1
>>> X
array([[ 0.46169481,  0.7444449 ],
       [ 0.49408692,  0.5809512 ],
       ..., 
       [ 0.60877526,  0.59758908]])
>>> plt.scatter(*list(X)) 
```

[![二维高斯散点图](../Images/314a0d54ba8eac0504a903af1cbcd426.png)](https://i.stack.imgur.com/Thr2p.png)

```
>>> from scipy import stats
>>> from sklearn.preprocessing import StandardScaler, MinMaxScaler
>>> stats.kstest(MinMaxScaler().fit_transform(X[:,0]), 'uniform')
KstestResult(statistic=0.24738043186386116, pvalue=0.0) 
```

低 p 值和高 KS 统计量（与均匀分布的距离）表明几乎可以肯定不是来自 0 和 1 之间的均匀分布

```
>>> stats.kstest(StandardScaler().fit_transform(X[:,0]), 'norm')
KstestResult(statistic=0.028970945967462303, pvalue=0.36613946547024456) 
```

但它们可能确实来自均值为 0 和标准差为 1 的正态分布，因为 p 值高且 KS 距离低。

然后你只需重复第二维 (Y) 的 KS 测试

# android - How to set background image for Gallery

> ID：13005300
> 
> 赞同：0
> 
> 时间：2012-10-22T05:15:36.153
> 
> 标签：android, android-gallery

I want to set the background of my Gallery by an image (say background.jpg ) in Drawable folder.

As the prototype of the setBackground() method is

```
 void   setBackground(Drawable background)
Set the background to a given Drawable, or remove the background. 
```

But I don't know how to refer to my image in this method. I have tried to refer like this

```
Gallery galleryModified;
galleryModified.setBackground(background); 
```

But getting error in second line, saying unable to find resource.

Please reply if you know.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:20:15.900

It seems, you are setting background from a resource from drawable folder, which have id, R.drawable.background, if it is the case, try following:

```
galleryModified.setBackgroundResource(R.drawable.background); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:50:58.273

All resources in your project is parsed under R class automatically. You should always retrive them as an object, such as: `R.drawable.drawable_name` This is a basic way to retrieve many resource types. Just replace `drawable` keyword such as: `R.string.name_of_string_resource` `R.id.id_control`

# python - python请求库中的https代理支持

> ID：13005301
> 
> 赞同：5
> 
> 时间：2012-10-22T05:15:49.980
> 
> 标签：python, https, proxy, urllib2, python-requests

我正在使用 python Requests 库来做与 HTTP 相关的事情。我在我的计算机上使用免费的 ntlmaps 设置了一个代理服务器，作为代理来回答来自公司 ISA 服务器的 NTLM 挑战。但是，响应似乎总是为空，如下所示：

```
>>> import requests
>>> r = requests.get('https://www.google.com')
>>> r.text
u'<HTML></HTML>\r\n' 
```

但是http请求中没有这样的问题。而且，当我使用 urllib2 库时，它可以获得正确的响应。我比较了使用'Requests'和'urllib2'库之间的消息差异，发现'Requests'使用'GET'而'urllib2'使用'CONNECT'，如下图所示原始消息捕获（第一个是'Requests'库）。有谁知道是否有任何解决方案？它是“请求”库的错误吗？提前致谢。

```
22.10.2012 11:01:41 Version 0.9.9.0.1
*** Got client request header.
*** Client header:
=====
GET https://www.google.com/ HTTP/1.1
Host: www.google.com
Proxy-Connection: Keep-Alive
Accept-Encoding: gzip, deflate, compress
Accept: */*
User-Agent: python-requests/0.14.1 CPython/2.7.2 Darwin/12.1.0

*** Client request header does not have 'Content-Length' or 'Transfer-Encoding' parameter and it must not have any body.
*** Replacing values in client header...Done.
*** New client header:
=====
GET https://www.google.com/ HTTP/1.1
Host: www.google.com
Proxy-Connection: Keep-Alive
Accept-Encoding: gzip, deflate, compress
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)

*** Connecting to remote server...(10.220.15.36:9000)...Done.
*** Sending client request header to remote server...Done.
*** Got remote server response header.
*** Remote server header:
=====
HTTP/1.0 200 OK
Content-Type: text/html
Refresh: 0; URL=https://www.google.com/

*** Could not find server 'Content-Length' parameter.
*** Authentication routine started.
*** Authentication not required.
*** Authentication routine finished.
*** Sending remote server response header to client...Done.
*** Sent 15 bytes to client. (all - 0, len - 0)
*** Remote server closed connection. (Server buffer - 0 bytes)
*** No server's data to send to the client. (server's buffer - 0 bytes)
*** Termination conditions detected (remote server closed connection). Stop Request issued.
*** Finishing procedure started.
*** Closing thread...Done. 
```

从“urllib2”库发送的消息：

```
22.10.2012 11:03:49 Version 0.9.9.0.1
*** Got client request header.
*** Client header:
=====
CONNECT www.google.com:443 HTTP/1.0

*** Client request header does not have 'Content-Length' or 'Transfer-Encoding' parameter and it must not have any body.
*** Replacing values in client header...Done.
*** New client header:
=====
CONNECT www.google.com:443 HTTP/1.0
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)

*** Connecting to remote server...(10.220.15.36:9000)...Done.
*** Sending client request header to remote server...Done.
*** Got remote server response header.
*** Remote server header:
=====
HTTP/1.1 407 Proxy Authentication Required ( The ISA Server requires authorization to fulfill the request. Access to the Web Proxy service is denied. )
Via: 1.1 LASISA2
Proxy-Authenticate: Negotiate
Proxy-Authenticate: Kerberos
Proxy-Authenticate: NTLM
Connection: close
Proxy-Connection: close
Pragma: no-cache
Cache-Control: no-cache
Content-Type: text/html
Content-Length: 718

*** Server 'Content-Length' found to be 718.
*** Authentication routine started.
*** Got Error 407 - "Proxy authentication required".
*** Authentication methods allowed: Negotiate, Kerberos, NTLM
*** Using NTLM authentication method.
*** Authorization in progress...
*** Closing connection to the remote server...Done.
*** Building environment for NTLM.
*** Using custom NTLM flags: 06820000
*** NTLM version with LM response only.
*** NTLM Domain/Host/User: IGTMASTER/BEATLES.LOCAL/TFSBVTVA
*** NTLM hashed passwords found.
*** Environment has been built successfully.
*** Connecting to remote server...(10.220.15.36:9000)...Done.
*** Resetting remote server status...Done. (Server buffer - 651 bytes)
*** Remote server buffer flushed.
*** Fake NTLM header with Msg1:
=====
CONNECT www.google.com:443 HTTP/1.0
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)
Proxy-Connection: Keep-Alive
Proxy-Authorization: NTLM TlRMTVNTUAABAAAABoIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAA

*** Sending Fake NTLM header with Msg1...Done.
*** There must be no body to send.
*** Waiting for message 2 from remote server...
*** Got remote server response header.
*** Remote server header:
=====
HTTP/1.1 407 Proxy Authentication Required ( Access is denied. )
Via: 1.1 LASISA2
Proxy-Authenticate: NTLM TlRMTVNTUAACAAAACQAJADgAAAAGgoECnmQdttSFW6oAAAAAAAAAAJAAkABBAAAABQLODgAAAA9JR1RNQVNURVICABIASQBHAFQATQBBAFMAVABFAFIAAQAOAEwAQQBTAEkAUwBBADIABAAaAGkAcwAuAGEAZAAuAGkAZwB0AC4AYwBvAG0AAwAqAGwAYQBzAGkAcwBhADIALgBpAHMALgBhAGQALgBpAGcAdAAuAGMAbwBtAAUAFABhAGQALgBpAGcAdAAuAGMAbwBtAAAAAAA=
Connection: Keep-Alive
Proxy-Connection: Keep-Alive
Pragma: no-cache
Cache-Control: no-cache
Content-Type: text/html
Content-Length: 0

*** Server 'Content-Length' found to be 0.
*** Got NTLM message 2 from remote server.
*** Resetting remote server status...Done. (Server buffer - 0 bytes)
*** Remote server buffer flushed.
*** Sending Fake NTLM header (not body) with Msg3...Done.
*** Fake NTLM header with Msg3:
=====
CONNECT www.google.com:443 HTTP/1.0
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, */*
User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows 98)
Proxy-Authorization: NTLM TlRMTVNTUAADAAAAGAAYAF4AAAAAAAAAdgAAAAkACQBAAAAACAAIAEkAAAANAA0AUQAAAAAAAAB2AAAABoIAAElHVE1BU1RFUlRGU0JWVFZBQkVBVExFUy5MT0NBTMwaDvCTdLkOsE7vD6Tog1RoolpOLnh4WQ==

*** End of NTLM authorization process.
*** Authentication routine finished.
*** Got remote server response header.
*** Remote server header:
=====
HTTP/1.1 200 Connection established
Proxy-Connection: close
Connection: close
Via: 1.1 LASISA2

*** Remote server response to the 'CONNECT' request. It must not have any body.
*** Authentication routine started.
*** Authentication not required.
*** Authentication routine finished.
*** Sending remote server response header to client...Done.
*** Lowered authentication flags down. As the code is neither 401 nor 407.
*** Successful 'CONNECT' request detected. Going to tunnel mode.
*** Resetting client status...Done. (Client buffer - 114 bytes)
*** Resetting remote server status...Done. (Server buffer - 0 bytes)
*** Request completed.
*** Tunnelled 114 bytes to remote server.
*** Tunnelled 1725 bytes to client.
*** Tunnelled 186 bytes to remote server.
*** Tunnelled 47 bytes to client.
*** Tunnelled 142 bytes to remote server.
*** Tunnelled 4096 bytes to client.
*** Tunnelled 248 bytes to client.
*** Tunnelled 2076 bytes to client.
*** Tunnelled 4096 bytes to client.
*** Tunnelled 1198 bytes to client.
*** Remote server closed connection. (Server buffer - 0 bytes)
*** Termination conditions detected (remote server closed connection). Stop Request issued.
*** Finishing procedure started.
*** Closing thread...Done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:42:01.960

**https**代理应该使用“CONNECT” urllib2 这样做是有意的。CONNECT 为 HTTPS 所需的安全传输建立隧道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:03:14.533

据我了解，这是 urllib3 中的一个错误，请求在后台使用。请参阅此错误报告：[https ://github.com/shazow/urllib3/issues/50](https://github.com/shazow/urllib3/issues/50)

# android - 尝试膨胀 xml 时，ImageView 和 textView 重叠

> ID：13005302
> 
> 赞同：0
> 
> 时间：2012-10-22T05:15:51.597
> 
> 标签：android, android-imageview, textview, android-inflate

![重叠图像](../Images/c23473fee29813f92ea15f3e37e06b2b.png)我有一个包含 imageview 和 textview 的 xml。Textview 被放置到 RightOf ImageView ，但是当我尝试膨胀 xml imageView 和 textview 得到重叠。任何帮助表示赞赏

数据.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:paddingBottom="5dp"
        android:src="@drawable/payback" />

    <TextView
        android:id="@+id/txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@+id/img"
        android:paddingTop="5dp"
        android:text="33%" />

    <TextView
        android:id="@+id/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/img"
        android:paddingBottom="10dp"
        android:text="Important and Urgent" />

</RelativeLayout> 
```

活动代码

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.check);

        content=(LinearLayout)findViewById(R.id.content);
        today=(TextView)findViewById(R.id.today);
        tomorrow=(TextView)findViewById(R.id.tomorrow);

        today.setOnClickListener(new TextView.OnClickListener() {                  

            @Override                 
            public void onClick(View v) {                     
                // TODO Auto-generated method stub  
                //Toast.makeText(ToDo.this, "Before"+content.getChildCount(), Toast.LENGTH_LONG).show();      
                content.removeAllViews();                      
                inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
                int id=0;                                              
                for (int idx = 0; idx < 4; idx++) {                             
                    id = idx + 1;                             
                    rel = (RelativeLayout) inflater.inflate(R.layout.data, null); 
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);                             
                    params.setMargins(0, 50, 0, 0);                             
                    txt = (TextView) rel.findViewById(R.id.txt);                             
                    txt.setText("AAA"+idx);                 

                    img = (ImageView) rel.findViewById(R.id.img);                             
                    img.setImageResource(R.drawable.payback);                             
                    img.setId(id);                              

                    content.addView(rel, params);                          
                    }                                           
                content.setVisibility(View.VISIBLE);                     
                }             
            });     
} 
```

检查.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/whiteboard"
        android:layout_width="250dp"
        android:layout_height="300dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="60dp"
        android:background="#FFFFFF" >

        <Button
            android:id="@+id/add"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="17dp"
            android:layout_marginLeft="20dp"
            android:text="Add" />

        <View
            android:id="@+id/bottomseperator"
            android:layout_width="200dp"
            android:layout_height="1dp"
            android:layout_above="@+id/add"
            android:layout_alignLeft="@+id/add"
            android:layout_marginBottom="10dp"
            android:background="#000000" />

        <View
            android:id="@+id/topseperator"
            android:layout_width="220dp"
            android:layout_height="1dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="35dp"
            android:background="#000000" />

        <TextView
            android:id="@+id/day"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="8dp"
            android:text="Day :"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/today"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/day"
            android:layout_alignBottom="@+id/day"
            android:layout_toRightOf="@+id/day"
            android:text="Today /"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/tomorrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/today"
            android:layout_alignBottom="@+id/today"
            android:layout_toRightOf="@+id/today"
            android:text="Tomorrow /"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/custom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/tomorrow"
            android:layout_alignBottom="@+id/tomorrow"
            android:layout_toRightOf="@+id/tomorrow"
            android:text="Custom"
            android:textSize="15sp" />

        <ScrollView
            android:id="@+id/contenntscroll"
            android:layout_width="200dip"
            android:layout_height="200dip"
            android:layout_alignBottom="@+id/whiteboard"
            android:layout_alignTop="@+id/whiteboard"
            android:layout_below="@+id/topseperator"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="10dp"
            android:isScrollContainer="false"
            android:scrollbars="none" >

            <LinearLayout
                android:id="@+id/content"
                android:layout_width="200dp"
                android:layout_height="300dp"
                android:layout_marginTop="30dp"
                android:orientation="vertical" >

            </LinearLayout>
        </ScrollView>
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:24:01.487

该声明：

```
img.setId(id); 
```

导致问题删除此语句代码将起作用。

# android - 为 ARM 编写的原生 android 代码如何在 x86 上运行？

> ID：13005303
> 
> 赞同：30
> 
> 时间：2012-10-22T05:15:52.843
> 
> 标签：android, android-ndk, arm, native, android-x86

摩托罗拉刚刚发布了一款基于 x86 的 Android 手机。对于为 ARM（例如 netflix）编写的本机应用程序/库如何在这款手机上运行，​​我有点困惑。

如果有人可以解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-22T05:44:53.343

是的，ARM 本机代码使用名为**Houdini的仿真功能在 Intel x86 上运行**

这个库所做的是动态读取 ARM 指令并将它们转换为等效的 x86 指令。这就是为什么许多应用程序可以在 x86 上按原样运行而无需实际构建等效库的原因。

![在此处输入图像描述](../Images/d4f2bc1923cf117c410ee095a0a82d58.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T05:25:02.753

您实际上可以为不同的体系结构包含不同的本机代码，不确定 Netflix 是如何运行的，但如果您打开 apk，您可以看到`/lib/armeabi-v7a/`，所以我假设可能有一个类似的文件夹`/lib/x86/`

编辑：我刚刚检查了亚马逊购物应用程序，它具有 arm 和 x86 的本机代码。所以也许这就是 netflix 的做法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-12T17:10:46.180

**Android Studio 3 模拟器使用 QEMU 作为后端**

[https://en.wikipedia.org/wiki/QEMU](https://en.wikipedia.org/wiki/QEMU)

QEMU 可以说是领先的开源跨拱仿真器。它是 GPL 软件，除了 x86 和 ARM 之外，还支持很多很多的拱门。

Android 然后只是在 QEMU 之上添加了一些 UI 魔法，可能还有一些补丁，但核心肯定在 QEMU 上游。

QEMU 使用一种称为二进制翻译的技术来实现相当快速的仿真：[https ://en.wikipedia.org/wiki/Binary_translation](https://en.wikipedia.org/wiki/Binary_translation)

二进制翻译基本上将 ARM 指令翻译成等效的 x86 指令。

因此，要了解细节，最好的方法是：

*   阅读QEMU源码：[https ://github.com/qemu/qemu](https://github.com/qemu/qemu)
*   一般研究二进制翻译，可能编写自己的玩具实现

**理论**

*   CPU 是“[图灵完备](https://en.wikipedia.org/wiki/Turing_completeness)的”（达到内存限制）
*   CPU 具有简单的确定性行为，可以使用有限内存的图灵机进行模拟

因此，很明显，只要有足够的内存，任何 CPU 都可以模拟任何 CPU。

难题是如何*快速*做到这一点。

**实践：QEMU用户态模拟**

QEMU 有一个用户态模式，只要你的客户和主机是同一个操作系统，它就可以很容易地在你的 x86 机器上使用用户态 ARM 代码来查看正在发生的事情。

在这种模式下，二进制翻译负责基本指令，系统调用只是转发给主机系统调用。

例如，对于具有 Linux 独立式（无 glibc）hello world 的 Linux 上的 Linux：

电源

```
.text
.global _start
_start:
asm_main_after_prologue:
    /* write */
    mov x0, 1
    adr x1, msg
    ldr x2, =len
    mov x8, 64
    svc 0

    /* exit */
    mov x0, 0
    mov x8, 93
    svc 0
msg:
    .ascii "hello syscall v8\n"
len = . - msg 
```

[GitHub 上游](https://github.com/cirosantilli/arm-assembly-cheat/blob/1989bbdda7a57c077f4c63a1a271d5a43a384185/v8/linux/hello.S).

然后组装并运行为：

```
sudo apt-get install qemu-user gcc-aarch64-linux-gnu
aarch64-linux-gnu-as -o main.o main.S
aarch64-linux-gnu-ld -o main.out main.o
qemu-aarch64 main.out 
```

它输出预期的：

```
hello syscall v8 
```

您甚至可以运行针对 C 标准库编译的 ARM 程序，并通过 GDB 单步调试程序！看这个具体的例子：[How to single step ARM assembly in GDB on QEMU?](https://stackoverflow.com/questions/20590155/how-to-single-step-arm-assembly-in-gdb-on-qemu/51310791#51310791)

由于我们正在讨论二进制翻译，我们还可以启用一些日志记录来查看 QEMU 正在执行的确切翻译：

```
qemu-aarch64 -d in_asm,out_asm main.out 
```

这里：

*   `in_asm`指 ARM 来宾输入程序集
*   `out_asm`指的是运行的 X86 主机生成的程序集

输出包含：

```
----------------
IN: 
0x0000000000400078:  d2800020      mov x0, #0x1
0x000000000040007c:  100000e1      adr x1, #+0x1c (addr 0x400098)
0x0000000000400080:  58000182      ldr x2, pc+48 (addr 0x4000b0)
0x0000000000400084:  d2800808      mov x8, #0x40
0x0000000000400088:  d4000001      svc #0x0

OUT: [size=105]
0x5578d016b428:  mov    -0x8(%r14),%ebp
0x5578d016b42c:  test   %ebp,%ebp
0x5578d016b42e:  jne    0x5578d016b482
0x5578d016b434:  mov    $0x1,%ebp
0x5578d016b439:  mov    %rbp,0x40(%r14)
0x5578d016b43d:  mov    $0x400098,%ebp
0x5578d016b442:  mov    %rbp,0x48(%r14)
0x5578d016b446:  mov    $0x4000b0,%ebp
0x5578d016b44b:  mov    0x0(%rbp),%rbp
0x5578d016b44f:  mov    %rbp,0x50(%r14)
0x5578d016b453:  mov    $0x40,%ebp
0x5578d016b458:  mov    %rbp,0x80(%r14)
0x5578d016b45f:  mov    $0x40008c,%ebp
0x5578d016b464:  mov    %rbp,0x140(%r14)
0x5578d016b46b:  mov    %r14,%rdi
0x5578d016b46e:  mov    $0x2,%esi
0x5578d016b473:  mov    $0x56000000,%edx
0x5578d016b478:  mov    $0x1,%ecx
0x5578d016b47d:  callq  0x5578cfdfe130
0x5578d016b482:  mov    $0x7f8af0565013,%rax
0x5578d016b48c:  jmpq   0x5578d016b416 
```

因此，在该`IN`部分中，我们看到了我们手写的 ARM 汇编代码，在该`OUT`部分中，我们看到了生成的 x86 程序集。

在 Ubuntu 16.04 amd64、QEMU 2.5.0、binutils 2.26.1 中测试。

**QEMU 全系统仿真**

然而，当您在 QEMU 中启动 Android 时，它当然不会运行用户级二进制文件，而是进行完整的系统模拟，在该模拟中运行实际的 Linux 内核和所有设备。

全系统模拟更准确，但速度稍慢，并且您需要将内核和磁盘映像提供给 QEMU。

要尝试这一点，请查看以下设置：

*   从源代码构建 AOSP 并在 QEMU 上运行：[How to compile the Android AOSP kernel and test it with the Android Emulator?](https://stackoverflow.com/questions/1809774/how-to-compile-the-android-aosp-kernel-and-test-it-with-the-android-emulator/48310014#48310014)
*   使用 Buildroot 构建一个最小的漂亮 Linux 系统并使用 QEMU 运行它：[如何下载 Torvalds Linux Kernel master，（重新）编译它，并使用 QEMU 启动它？](https://stackoverflow.com/questions/47557262/how-to-download-the-torvalds-linux-kernel-master-recompile-it-and-boot-it-wi/49349237#49349237)
*   在 QEMU 上构建和运行裸机代码：[https ://github.com/cirosantilli/linux-kernel-module-cheat/tree/79b35fb395f9f7f7621609186931408fe2f79881#baremetal-setup-getting-started](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/79b35fb395f9f7f7621609186931408fe2f79881#baremetal-setup-getting-started)

**虚拟机**

如果你在 QEMU 上运行 Android X86，你会发现它要快得多。

原因是QEMU使用了[KVM](https://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine)，这是一个Linux内核特性，可以直接在主机上运行guest指令！

如果您碰巧拥有一台功能强大的 ARM 机器（截至 2019 年还很少见），您还可以更快地在带有 KVM 的 ARM 上运行 ARM。

出于这个原因，如果您在 X86 主机上，我建议您坚持使用 X86 模拟 AOSP，如：[如何编译 Android AOSP 内核并使用 Android 模拟器对其进行测试？](https://stackoverflow.com/questions/1809774/how-to-compile-the-android-aosp-kernel-and-test-it-with-the-android-emulator/48310014#48310014)，除非你真的需要接触一些低层次的东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-02T03:09:05.777

在[Trend Micro Safe Mobile Workforce](http://www.trendmicro.com/us/enterprise/product-security/safe-mobile-workforce/)中，我们有一个 ARM 运行时（不是英特尔的 houdini），用于 Android 应用程序中的本机库。这样我们就可以支持在强大的 x86 服务器上仅使用 ARM lib 运行 APK。

# netbeans - Windows 中带有 mingw 的 Opencv2.4.0 崩溃

> ID：13005304
> 
> 赞同：1
> 
> 时间：2012-10-22T05:15:54.630
> 
> 标签：netbeans, opencv, mingw, dev-c++

我按照[此 SO 链接](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7/10860353#comment17523493_10860353)中的步骤在 Windows 中使用 OpenCV2.4.0 编译示例程序。我使用 Mingw 在 DEVC++ 和 NetBeans 中进行了设置。我的示例程序正在正确编译，但是当我运行 exe 时，应用程序崩溃了。

但是在同一台机器上，我使用了 opencv2.1.0 并且编译了相同的示例程序，并且在运行它时没有崩溃。

以下是我尝试执行的示例代码：

```
#include "highgui.h"
using namespace std;
int main( int argc, char** argv ) {
IplImage* img = cvLoadImage( "C:\\Documents and Settings\\All Users\\Documents\\My Pictures\\Sample Pictures\\Water lilies.jpg" );
cvNamedWindow( "Sample", CV_WINDOW_AUTOSIZE );
cvShowImage( "Sample", img );
cvWaitKey(0);
cvReleaseImage( &img );
cvDestroyWindow( "Sample" );
} 
```

更新 ：

我按照moskito-x链接的步骤构建opencv，当我按“配置”时，出现以下错误。我的 make 文件大小也是 35kb。有什么建议可以解决这个问题吗？ ![在此处输入图像描述](../Images/35adb73624c5e5347670f14c2b565f8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:07:05.213

**使用“...\opencv\build\x86\mingw\bin”和“...\opencv\build\x86\mingw\lib”中的库**

您不能使用 OpenCV-2.4.x.exe 附带的库。

正如论坛中的一些开发人员和我发现的那样。在某些系统上，无法使用“opencv 2.4.x”的预编译库。
编译你自己的程序是可行的，但**如果你尝试运行**它们，它就会崩溃。在没有“opencv 2.4.x”的预编译库无法运行之前，您必须自己[编译](https://stackoverflow.com/a/12505581/1322642)opencv。

完全忽略文件夹“...\opencv\build\x86\mingw\bin”和“...\opencv\build\x86\mingw\lib”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T11:31:33.433

正如已经指出的那样，您不能依赖预编译的二进制文件。我也遇到了很多问题，最后还是编译了自己的二进制文件。我的设置适用于 Windows7、Eclipse CDT (Juno) 和 MinGW。[你可以在这里](https://stackoverflow.com/questions/17393311/openvc-2-4-5-eclipse-cdt-juno-mingw-error-0xc0000005/17402441#17402441)查看我在 Stackoverflow 上的帖子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:35:54.267

我猜这是与内存管理有关的错误。也许是因为你在图像之前释放了窗口。但无论如何，您应该使用 OpenCV C++ 接口，因为它会自动完成很多工作。使用 C++ 接口，您的代码将如下所示：

```
 #include <opencv.hpp>

    int main( int argc, char** argv ) {

            cv::Mat img = cv::imread("C:\\Documents and Settings\\All Users\\Documents\\My Pictures\\Sample Pictures\\Water lilies.jpg");

            cv::imshow("Sample", img);
            cv::waitKey(0);

            return 0
    } 
```

# ruby-on-rails-3 - CanCan如何实现动态授权？

> ID：13005307
> 
> 赞同：-2
> 
> 时间：2012-10-22T05:16:18.807
> 
> 标签：ruby-on-rails-3, devise, cancan

我正在关注本教程[http://eveloverails.wordpress.com/2011/04/02/183/](http://eveloverails.wordpress.com/2011/04/02/183/)。我已经通过设计创建了用户，我希望当用户以管理员身份登录时，他应该拥有可以编辑用户权限的用户列表，例如编辑销毁等。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T05:35:09.693

您可以在设计模型调用角色中添加一个字段。然后在您的模型中创建 cancan 能力类，然后定义您的授权，例如

```
class Ability
  include CanCan::Ability

  def initialize(user)
  # Define abilities for the passed in user here. For example:
     user ||= Login.new # guest user (not logged in)
     if user.role == 'admin'
       can :manage, :all
     else
       can :read, :all
     end
  end
end 
```

有关详细信息，请参阅 wiki：[https ://github.com/ryanb/cancan/wiki/Defining-Abilities](https://github.com/ryanb/cancan/wiki/Defining-Abilities)

# c# - C# 替代虚拟静态方法和静态子类

> ID：13005309
> 
> 赞同：8
> 
> 时间：2012-10-22T05:16:26.213
> 
> 标签：c#, inheritance, static, virtual

每当我阅读 RE 这个问题或类似的静态继承主题时，回复通常是不支持这（我们知道），原因是因为这是一个糟糕的设计，可能有更好的方法来做。我很想找到一种更好的方法，所以我愿意接受所有建议——这就是我想要做的。

我有一个没有实例数据的类。所有方法都是静态的。让我们称之为`class BaseStatic`. 我现在想要一个新的静态类（当然有几个，但让我们坚持一个），它继承自这个静态类并添加一些新的静态方法，我们称之为`SubStatic`.

我希望消费者能够写的是：

```
SubStatic.MethodFromSub(); 
```

并且

```
SubStatic.MethodFromBase(); 
```

我知道我也可以写：

```
BaseStatic.MethodFromBase() 
```

显式地但随后消费者必须知道哪个类实现了哪些方法。我不能通过继承来做到这一点，因为我不能从另一个静态类继承一个静态类。那么有什么更好的方法呢？

现在，我知道我可以将这些类作为实例类，并且我可以将所有方法定义为静态 - 这会给我上面描述的行为，但会导致其他问题，即：

1.  当我这样做时：不调用静态构造函数`SubStatic.MethodFromBase()`，`SubStatic`因为该方法在父静态类中运行（调用父静态构造函数）

2.  如果其中一个静态父方法需要调用另一个子类可以覆盖的方法，我需要子类中的虚拟静态方法。我知道我不能拥有。

显然设计如此糟糕 - 任何人都可以帮我重做它吗？我知道我可以使用实例继承并正确使用虚拟方法（我已经以这种方式工作）但是客户端代码总是必须创建一个实例（或者我想是一些单例）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:43:49.850

这可以满足您的目的，尽管我当然会包括一些异常处理，并在其实现中附带大量关于其工作原理和方式的文档。

当`Base`运行（一次）的静态构造函数时，当前加载到应用程序域中的所有程序集都会被编目，选择从`Base`. 遍历这些，我们运行静态构造函数。值得注意的是，这不再保证每个实现的 cctor 将只运行一次，必须将逻辑添加到每个实现中以重新做出该断言。此外，在 cctor for`Base`运行后加载的类型不会通过调用`Base`

要模拟虚方法，请使用`new`关键字隐藏基方法。您可以通过使用声明类的名称对其进行限定来调用基方法（如`B`示例中的类）

```
using System;
using System.Linq;
using System.Runtime.CompilerServices;

namespace ConsoleApplication6
{
    public class Base
    {
        static Base()
        {
            Console.WriteLine("Base cctor");

            var thisType = typeof (Base);
            var loadedTypes = AppDomain.CurrentDomain.GetAssemblies().SelectMany(x => x.GetTypes());
            var derivations = loadedTypes.Where(thisType.IsAssignableFrom);

            foreach(var derivation in derivations)
            {
                RuntimeHelpers.RunClassConstructor(derivation.TypeHandle);
            }
        }

        public static void Foo()
        {
            Console.WriteLine("Bar");
        }
    }

    public class A : Base
    {
        static A()
        {
            Console.WriteLine("A cctor");
        }
    }

    public class B : Base
    {
        static B()
        {
            Console.WriteLine("B cctor");
        }

        public new static void Foo()
        {
            Console.WriteLine("Bar!!");
            Base.Foo();
        }
    }

    class Program
    {
        static void Main()
        {
            Console.WriteLine("A:");
            A.Foo();
            Console.WriteLine();
            Console.WriteLine("B:");
            B.Foo();
            Console.WriteLine();
            Console.WriteLine("Base:");
            Base.Foo();
            Console.ReadLine();
        }
    }
} 
```

**编辑**

另一种选择在于 CRTP（或 C# 范例中的 CRGP）或奇怪的重复模板（通用）参数模式

```
using System;
using System.Runtime.CompilerServices;

namespace ConsoleApplication6
{
    public class Base<T>
        where T : Base<T>
    {
        static Base()
        {
            RuntimeHelpers.RunClassConstructor(typeof (T).TypeHandle);
        }

        public static void Foo()
        {
            Console.WriteLine("Bar");
        }
    }

    public class Base : Base<Base>
    {
    }

    public class A : Base<A>
    {
        static A()
        {
            Console.WriteLine("A cctor");
        }
    }

    public class B : Base<B>
    {
        static B()
        {
            Console.WriteLine("B cctor");
        }

        public new static void Foo()
        {
            Console.WriteLine("Bar!!");
            Base<B>.Foo();
        }
    }

    class Program
    {
        static void Main()
        {
            Console.WriteLine("A:");
            A.Foo();
            Console.WriteLine();
            Console.WriteLine("B:");
            B.Foo();
            Console.WriteLine();
            Console.WriteLine("Base:");
            Base.Foo();
            Console.ReadLine();
        }
    }
} 
```

在这种情况下，当我们调用一个静态方法时，`A`我们实际上调用的`Base<A>`是不同的方法`Base<B>`，`Base`因此我们实际上*可以确定*该方法是如何被调用的并运行适当的 cctor。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:22:26.110

您可以通过使用泛型来实现这一点。例如，您可以使用类似的东西：

```
public class MainStatic<T> where T : MainStatic<T>
{
    public static void Foo()
    {
    }

    static MainStatic()
    {
        RuntimeHelpers.RunClassConstructor(typeof(T).TypeHandle);
    }
}

public class SubStatic : MainStatic<SubStatic>
{
    public static void Bar()
    {
    }
}

public class Instance
{
    public void FooBar()
    {
        SubStatic.Foo();
        SubStatic.Bar();
    }
} 
```

# ios - UI界面定位ios6

> ID：13005313
> 
> 赞同：0
> 
> 时间：2012-10-22T05:17:18.287
> 
> 标签：ios, ios6

我的代码在**iOS 5.1**中运行良好，但在**iOS 6**中却不行。我遇到了方向问题。

我正在使用此代码来控制方向

```
-(BOOL)shouldAutorotate
{
    return YES;

}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

我想在横向模式下显示一个视图控制器，在纵向模式下显示另一个视图控制器

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:03:30.740

试试看这个

[iOS 6 提示和技巧升级您的应用程序](http://grembe.wordpress.com/2012/09/19/here-is-what-i/)

**或者**

尝试在主视图控制器中添加此代码：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {

return UIInterfaceOrientationLandscapeRight;

}

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)w {

return (NSUInteger)[application supportedInterfaceOrientationsForWindow:w] | (1<<UIInterfaceOrientationPortrait);

} 
```

并且必须添加主视图控制器：

```
[window setRootViewController: mainController]; 
```

反而

```
[window addSubview: mainController.view]; 
```

# java - 使用 java 源代码管理证书信任列表

> ID：13005319
> 
> 赞同：1
> 
> 时间：2012-10-22T05:18:48.707
> 
> 标签：java, security

我是 Java 的新学习者，我正在使用 Java 测试公钥基础设施。

我已经搜索了好几个星期，用java源代码操作证书信任列表。但我无法在任何地方找到解决方案。

证书信任列表 (CTL) 是带有 (.stl) 的文件扩展名，其中包含受信任的根证书颁发机构的列表。

如果有人知道如何在 java 中管理证书信任列表，请分享我。带着敬意，

# python - 遍历XML获取所有子节点文本值

> ID：13005320
> 
> 赞同：0
> 
> 时间：2012-10-22T05:18:57.303
> 
> 标签：python, xml-parsing

我有一个包含以下数据的 xml。我需要获取和所有其他属性的值。我返回一个 python 代码，我只得到第一个驱动程序值。

我的 xml：

```
<volume name="sp" type="span" operation="create">
    <driver>HDD1</driver>
    <driver>HDD2</driver>
    <driver>HDD3</driver>
    <driver>HDD4</driver>
</volume> 
```

我的脚本：

```
import xml.etree.ElementTree as ET
doc = ET.parse("vol.xml")
root = doc.getroot() #Returns the root element for this tree.
root.keys()          #Returns the elements attribute names as a list. The names are returned in an arbitrary order
root.attrib["name"]
root.attrib["type"]
root.attrib["operation"]

print root.get("name")
print root.get("type")
print root.get("operation")

for child in root:
    #print child.tag, child.attrib
    print root[0].text 
```

我的输出：

```
 sr-query:~# python volume_check.py aaa
    sp
    span
    create
    HDD1
   sr-queryC:~# 
```

我没搞定`HDD2`，`HDD3`和`HDD4`。如何通过此 xml 进行迭代以获取所有值？有什么优化的方法吗？我认为任何 for 循环都可以做到这一点，但不熟悉 Python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:27:29.857

在你的`for`循环中，它应该是

```
child.text 
```

不是

```
root[0].text 
```

# php - 本地连接很好，但是当我将它部署到远程服务器时没有任何反应

> ID：13005323
> 
> 赞同：2
> 
> 时间：2012-10-22T05:19:30.897
> 
> 标签：php, xampp, require-once, dbase

我通过以下方式拥有一个虚拟共享服务器：

*   去吧爸爸
*   Plesk 11.0
*   Dreamweaver CS5
*   通过 Plesk 的 phpMyAdmin。

我`XAMPP`用于我的本地服务器，一切都很棒！我可以在本地连接，也可以通过`Dreamweaver`. 就在我将文件上传到远程服务器时，我得到：

```
Warning: require_once(Connections/TestConn.php) [function.require-once]: failed to open stream: Operation not permitted in C:\Inetpub\vhosts\directory420.com\httpdocs\test.php on line 1
Fatal error: require_once() [function.require]: Failed opening required 'Connections/TestConn.php' (include_path='.;./includes;./pear') in C:\Inetpub\vhosts\directory420.com\httpdocs\test.php on line 1 
```

我希望导航到该页面的人可以访问我的 PHP 注册表单。我使用`XAMPP`所以我不知道为什么会出现 Inetpub 和 vhost 信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:36:22.807

使用绝对路径。您可以为此使用配置文件。制作一个名为`configuration.php,`put 的文件，将其放在某个常见的位置，例如`DOCUMENT_ROOT/configutation.php`. 像这样添加绝对路径

```
define('LIBRARY_ROOT','c:\xx\yy\');
define('CONNECTION_ROOT','c:\xx\yy\ZZZ');
.
.
define('GG..... 
```

在您的代码中使用此常量。导入流根中的配置文件。当您从服务器移动到服务器时，它很容易。

谢谢

# c# - Java 多线程 / Mono 基准测试

> ID：13005326
> 
> 赞同：0
> 
> 时间：2012-10-22T05:19:38.480
> 
> 标签：c#, java, multithreading, mono

我正在做一个简单的基准测试，在几个 Linux 机器上测试 Mono 的 ParallelFX 和 Java。.NET 的测试在 Windows 和 Linux 上运行良好，但我在 Java 版本上遇到了一些问题......

我可以看到指定数量的线程正在启​​动，但它们以一种奇怪的方式运行。就像他们开始了，但他们完成得很慢。他们继续开始，但需要永远完成。看起来它应该超过线程池的限制，而且我的 CPU 使用率在我看来就像它只使用一个或两个内核（我有一个 i7 处理器，所以应该尝试使用 8 之类的东西）。

是的，我知道我的整数和其他可能的东西也不是“线程安全的”。我现在真的不在乎。这里有更大的问题。

# C#版本

```
public class Program
{
    static void Main(string[] args)
    {
        const int numberOfCycles = 1000;
        const int numbersPerCycle = 1000000;

        Stopwatch swG = Stopwatch.StartNew();

        int threadCount = 0;
        int completeCount = 0;
        Parallel.For(0, numberOfCycles, x =>
            {
                Console.WriteLine(string.Format("Starting cycle {0}. Thread count at {1}", x, threadCount++));

                Random r = new Random();
                Stopwatch sw = Stopwatch.StartNew();
                List<double> numbers = new List<double>();
                for (int i = 0; i < numbersPerCycle; i++)
                {
                    numbers.Add(r.NextDouble() * 1000);
                }
                numbers.Sort();
                double min = numbers.Min();
                double max = numbers.Max();

                completeCount++;
                Console.WriteLine(string.Format("{0} cycles complete: {1:#,##0.0} ms. Min: {2:0.###}  Max: {3:0.###}", completeCount, sw.ElapsedMilliseconds, min, max));
                threadCount--;
            });

        Console.WriteLine(string.Format("All {0} cycles complete. Took {1:#,##0.0} ms.", numberOfCycles, swG.ElapsedMilliseconds));
        Console.WriteLine("Press any key to continue.");
        Console.ReadKey();
    }
} 
```

# Java版

PS我很懒，从这里偷了秒表类：[Java中有秒表吗？](https://stackoverflow.com/questions/8255738/is-there-a-stopwatch-in-java)

```
public class JavaMonoTest {

    static int threadCount = 0;
    static int completeCount = 0;
    static String CLRF = "\r\n";

    public static void main(String[] args) throws IOException, InterruptedException {
        final int numberOfCycles = 1000;
        final int numbersPerCycle = 1000000;
        final int NUM_CORES = Runtime.getRuntime().availableProcessors();

        //Setup the running array
        List<Integer> cyclesList = new LinkedList<Integer>();
        for(int i = 0; i < numberOfCycles; i++){
            cyclesList.add(i);
        }

        Stopwatch swG = new Stopwatch();
        swG.start();

       ExecutorService exec = Executors.newFixedThreadPool(NUM_CORES);
       try {
           for (final Integer x : cyclesList) {
               exec.submit(new Runnable() {
                   @Override
                   public void run() {
                       System.out.printf("Starting cycle %s. Thread count at %s %s", x, threadCount++, CLRF);

                       Random r = new Random();
                       Stopwatch sw = new Stopwatch();
                       sw.start();
                       List<Double> numbers = new LinkedList<Double>();
                       for (int i = 0; i < numbersPerCycle; i++)
                       {
                           numbers.add(r.nextDouble() * 1000);
                       }
                       Collections.sort(numbers);
                       double min = Collections.min(numbers);
                       double max = Collections.max(numbers);

                       completeCount++;
                       System.out.printf("%s cycles complete: %.2f ms. Min: %.2f  Max: %.2f %s", completeCount, sw.getElapsedTime(), min, max, CLRF);
                       threadCount--;
                   }
               });
           }
       } finally {
           exec.shutdown();
       }
       exec.awaitTermination(1, TimeUnit.DAYS);

        System.out.printf("All %s cycles complete. Took %.2f ms. %s", numberOfCycles, swG.getElapsedTime(), CLRF);
        System.out.println("Press any key to continue.");
        System.in.read();
    }
} 
```

# 更新了 C# 版本以匹配答案中的 Java 版本

```
public class Program
{
    static void Main(string[] args)
    {
        const int numberOfCycles = 1000;
        const int numbersPerCycle = 1000000;

        Stopwatch swG = Stopwatch.StartNew();

        int threadCount = 0;
        int completeCount = 0;
        Parallel.For(0, numberOfCycles, x =>
            {
                Console.WriteLine(string.Format("Starting cycle {0}. Thread count at {1}", x, Interlocked.Increment(ref threadCount)));

                Random r = new Random();
                Stopwatch sw = Stopwatch.StartNew();
                double[] numbers = new double[numbersPerCycle];
                for (int i = 0; i < numbersPerCycle; i++)
                {
                    numbers[i] = r.NextDouble() * 1000;
                }
                Array.Sort(numbers);
                double min = numbers[0];
                double max = numbers[numbers.Length - 1];

                Interlocked.Increment(ref completeCount);
                Console.WriteLine(string.Format("{0} cycles complete: {1:#,##0.0} ms. Min: {2:0.###}  Max: {3:0.###}", completeCount, sw.ElapsedMilliseconds, min, max));
                Interlocked.Decrement(ref threadCount);
            });

        Console.WriteLine(string.Format("All {0} cycles complete. Took {1:#,##0.0} ms.", numberOfCycles, swG.ElapsedMilliseconds));
        Console.WriteLine("Press any key to continue.");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:41:25.893

运行该程序，我看到它使用了 8 个 CPU 的 97%-98%，但同时也产生了大量的垃圾。如果我让程序更有效率，它会更快地运行到完成。

```
import java.util.*;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;

public class JavaMonoTest {

    static final AtomicInteger threadCount = new AtomicInteger();
    static final AtomicInteger completeCount = new AtomicInteger();

    public static void main(String[] args) throws InterruptedException {
        final int numberOfCycles = 1000;
        final int numbersPerCycle = 1000000;
        final int NUM_CORES = Runtime.getRuntime().availableProcessors();

        long swG = System.nanoTime();

        ExecutorService exec = Executors.newFixedThreadPool(NUM_CORES);
        try {
            for (int i = 0; i < numberOfCycles; i++) {
                final int x = i;
                exec.submit(new Runnable() {
                    @Override
                    public void run() {
                        try {
                        System.out.printf("Starting cycle %s. Thread count at %s %n", x, threadCount.getAndIncrement());

                        Random r = new Random();
                        long sw = System.nanoTime();
                        double[] numbers = new double[numbersPerCycle];
                        for (int i = 0; i < numbersPerCycle; i++) {
                            numbers[i] = r.nextDouble() * 1000;
                        }
                        Arrays.sort(numbers);
                        double min = numbers[0];
                        double max = numbers[numbers.length - 1];

                        completeCount.getAndIncrement();
                        System.out.printf("%s cycles complete: %.2f ms. Min: %.2f  Max: %.2f %n",
                                completeCount, (System.nanoTime() - sw) / 1e6, min, max);
                        threadCount.getAndDecrement();
                        } catch (Throwable t) {
                            t.printStackTrace();
                        }
                    }
                });
            }
        } finally {
            exec.shutdown();
        }
        exec.awaitTermination(1, TimeUnit.DAYS);

        System.out.printf("All %s cycles complete. Took %.2f ms. %n",
                numberOfCycles, (System.nanoTime() - swG) / 1e6);
    }
} 
```

印刷

```
Starting cycle 0\. Thread count at 0 
Starting cycle 7\. Thread count at 7 
Starting cycle 6\. Thread count at 6 
   ... deleted ...
999 cycles complete: 139.28 ms. Min: 0.00  Max: 1000.00 
1000 cycles complete: 139.05 ms. Min: 0.00  Max: 1000.00 
All 1000 cycles complete. Took 19431.14 ms. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:11:02.737

代替：

```
 ExecutorService exec = Executors.newFixedThreadPool(NUM_CORES);
   try {
       for (final Integer x : cyclesList) {
           exec.submit(new Runnable() { 
```

尝试：

```
 ExecutorService exec = Executors.newFixedThreadPool(NUM_CORES);
   try {
       for (final Integer x : cyclesList) {
           exec.execute( new Runnable() {    // No Future< T > needed 
```

# python - 窗口关闭后代码重新执行

> ID：13005331
> 
> 赞同：0
> 
> 时间：2012-10-22T05:20:08.057
> 
> 标签：python, python-2.7, tkinter

这是我的代码：

```
from Tkinter import*
from random import radint
Characters=[Percy,Annabeth,Leo,Chuck,Sarah]
Used = []
def callback():
    selected = None
    end = len(Characters)-1
    rando = randint(0,end)
    selected = Characters[rando]
    for i in Characters:
        if i in Used:
            print 'This has already been used'
        else:
            Characters[rando]()
            Used.append(Characters[rando])

game = Tk()
game.geometry('50x50+700+100')
Button1 = Button(game,text = '1',command =lambda:callback() )
Button1.pack(side=LEFT)

game.mainloop() 
```

应该发生的是，程序运行，窗口中有1个按钮，您单击该按钮，它从“字符”列表中随机选择一个值（所有这些都是程序），执行程序然后添加将选定的值添加到“已使用”列表中，然后当您再次单击该按钮时，它会检查该值是否已被使用，如果已使用，则打印“已使用”，如果没有，则执行。但是发生了什么，它会多次运行相同的程序，然后当我关闭根窗口（游戏）时，它会重新执行我点击按钮时执行的所有程序。我一直在做这个一个小时，无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:26:22.423

`for i in Characters:``Characters`每次运行时都会遍历列表中的所有项目。

假设您启动应用程序，然后单击按钮。这就是发生的事情：

```
for i in Characters:

    i = Percy
    if i in Used: 
        ... #i is not in Used
    else:
        ... #execute Percy() and add it to Used

    i = Annabeth
    if i in Used:
        ... #i is not in Used

    else:
        ... #execute Annabeth() and add it to Used 
```

......你明白了。所以第一次运行时，所有字符都被执行，并添加到`Used`.

您可能应该将该代码更改为以下内容：

```
def callback():
    # code ...

    rando = randint(0, end)
    if Characters[rando] in Used:
        print "This has already been used"
    else:
        Characters[rando]()
        Used.append(Characters[rando]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:26:11.463

您的问题是，第一次单击按钮时，它会将所有字符添加到列表中。它可能会在您的程序结束时发生，但实际上它是同时发生的。

假设您希望在每次单击时处理一个 Character 实例，您需要添加一个`break`语句来在将某些内容附加到列表后终止循环。

```
for i in Characters:
    if i in Used:
        print 'This has already been used'
    else:
        Characters[rando]()
        Used.append(Characters[rando])
        break 
```

# python - 如何将文件夹压缩为 zip？

> ID：13005337
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:20:32.970
> 
> 标签：python, linux, email, compression, zip

我的目录中有一个文件夹，其中包含 CSV 文件。我正在使用 Python 并通过代码动态生成一些带有数据的 CSV 文件。因此，每次代码运行时，都会在名为`csv`（例如）的文件夹中创建 CSV 文件。

我已安排此代码通过 cron 作业每 10 天运行一次。因此，Python 代码每 10 天运行一次，并且 CSV 文件将在`csv`文件夹中创建。

现在我想压缩`csv`文件夹，`zip`并想用这个 ZIP 文件作为附件发送一封电子邮件。

1.  是否可以将包含 CSV 文件的文件夹压缩为 ZIP 格式？
2.  压缩后，是否可以将此压缩后的 ZIP 作为电子邮件附件发送？

如果是这样，任何人都可以让我知道如何做到这一点是否可以通过 Python 完成上述工作？或者我们可以通过linux命令来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:25:59.070

简单的方法是运行一个单独的 cron 作业来进行压缩和发送电子邮件：

`zip -r - csv | uuencode | mail -s "csv zips for $(date)" foo@bar.com`

如果您将上述内容作为 cron 作业运行，请确保首先`cd`进入父目录。所以如果`csv`是`/home/foo/csv`：

`cd /home/foo && zip -r csv | uuencode | mail -s "csv zips for $(date)" foo@bar.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:46:29.810

```
import zipfile
import smtplib

def archive_log(src, dst):
  """
  Archiving log file to zip
  """
  zip = zipfile.ZipFile(dst, 'w')
  zip.write(src, os.path.basename(src), zipfile.ZIP_DEFLATED)
  zip.close()

 def send_email_report2(self):
    SEND_TO = ['xxx@yyy.com']
    SMTP_IP = '0.0.0.0'

    msg = MIMEMultipart()
    msg['From'] = 'xxx@yyy'
    msg['To'] = COMMASPACE.join(SEND_TO)
    msg['Date'] = formatdate(localtime=True)
    msg['Subject'] = 'Subject'

    msg.attach(MIMEText('bodu text'))

    for file_link in link_attachments:
        part = MIMEBase('application', "octet-stream")
        part.set_payload(open(file_link, "rb").read())
        Encoders.encode_base64(part)
        part.add_header('Content-Disposition', 'attachment; filename="%s"' % os.path.basename(file_link))
        msg.attach(part)

    smtp = smtplib.SMTP(SMTP_IP)
    smtp.sendmail('xxx1@yyy.com', SEND_TO, msg.as_string())
    smtp.close() 
```

# ruby-on-rails - 如何将所有项目分配给用户？

> ID：13005342
> 
> 赞同：0
> 
> 时间：2012-10-22T05:20:57.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我使用设计进行身份验证，并且我有另一个名为 project 的模型，我如何分配用户拥有所有项目以及如何分配，如下所示？

```
user_id     project_id  role1_id  
----------  ----------  ----------
1           5           2                     
1           6           1
2           5           3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:02:13.120

Ryan Bates 在[这个](https://github.com/ryanb/cancan/issues/147)线程上提供了一个解决方案。您可以阅读它以获取完整的详细信息，但它涉及覆盖该`current_ability`方法。

```
 # in controller
def current_ability
  @current_ability ||= Ability.new(current_user, current_project)
end

# in Ability class
def initialize(user, project)
  if user.admin_for_project?(project)
    can :manage, :all
  else
    can :read, :all
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:54:52.190

```
has_many :project_ids, Class: 'Your Class name' ('USER' or 'WHATEVER') 
```

如果你的数据库中有外键，你可以添加

```
has_many :project_ids, foreign_key: 'project_id', Class: 'Your Class name' ('USER' or 'WHATEVER') 
```

以上只是一个例子，您需要提供更多详细信息才能获得准确的答案。您的问题和描述不足以提供正确的答案。我希望它有帮助....

# java - 错误：ORA-01858：在需要数字的地方发现了一个非数字字符

> ID：13005343
> 
> 赞同：1
> 
> 时间：2012-10-22T05:21:34.953
> 
> 标签：java, oracle10g, sqlexception

当我执行我准备好的语句时，我得到了`ORA-01858: a non-numeric character was found where a numeric was expected`. 当我搜索一些论坛时，他们说这是因为日期数据类型。我准备好的陈述是

```
insert  into OPRS_ZONES(
  ZONE_ID,
  ZONE_CODE,
  ZONE_NAME,
  PLACE_ID,
  CORP_ID,
  CREATED_BY,
  CREATED_DATE,
  MODIFIED_BY,
  MODIFIED_DATE) 
values(?,?,?,?,?,?,?,?,?) 
```

我要插入的值是

```
03.0, 
'FLORIDA', 
'FLORIDA', 
05231.0, 
01.0, 
01.0, 
TO_DATE('19102012130639','DDMMYYYYHH24MISS'), 
NULL, 
NULL 
```

表定义

```
CREATE TABLE OPRS_ZONES ( 
  ZONE_ID NUMERIC(20,0) , 
  ZONE_CODE VARCHAR2(16) , 
  ZONE_NAME VARCHAR2(255) , 
  PLACE_ID NUMERIC(20,0) , 
  CORP_ID NUMERIC(20,0) , 
  CREATED_BY NUMERIC(20,0) , 
  CREATED_DATE DATE , 
  MODIFIED_BY NUMERIC(20,0) , 
  MODIFIED_DATE DATE ); 
```

我为准备好的语句填充值的代码，

```
public int executePreparedStatement(String query, List myCollection, int colLength, String tableName) throws DBException,SQLException {

        int rowsAffected    = 0; 
        int [] noOfRowsExecuted = null;
        try{
            conn.setAutoCommit(false);
            if(query != null){  
                ps = conn.prepareStatement(query);
                for (int i = 0; i < myCollection.size(); i++) {
                    logger.info("@@mycollcetion -- "+myCollection.get(i));
                    List list = (List) myCollection.get(i);
                    int count = 1;
                    for (int j = 0; j < list.size(); j++) {
                        ps.setObject(count, list.get(j));
                        count++;
                    }
                    ps.execute();
                    logger.info("@@ noOfRowsExecuted == "+noOfRowsExecuted);
                }
            }
        }catch(Exception e){
            logger.error("Error in the execution of Prepared Statement: \n" + query + "\nData : " + listData, e);
            rowsAffected    = Utility.getErrorCode(e);
            throw new DBException(e);
        }finally{ 
            try {
                if (ps != null) {
                    ps.close();
                    ps = null;
                }
            } catch (Exception e) {
            }
            rowsAffected    = 0; 
            noOfRowsExecuted = null;
        }
        return rowsAffected;        
    } 
```

`list myCollection`包含`values`. _ variabele`query`是`prepared statement` 这个准备好的语句，当用值替换时在 SQLDEVELOPER 中工作正常，但是当我运行我的 java 程序时，我得到了错误。这真的是日期格式的问题吗？如果是这样，为什么它在 SQLDEVELOPER 中运行良好？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:59:31.910

将您准备好的声明更改为：

```
insert  into OPRS_ZONES(
  ZONE_ID,
  ZONE_CODE,
  ZONE_NAME,
  PLACE_ID,
  CORP_ID,
  CREATED_BY,
  CREATED_DATE,
  MODIFIED_BY,
  MODIFIED_DATE) 
values(?,?,?,?,?,?,
       TO_DATE(?,'DDMMYYYYHH24MISS'),
       ?,?) 
```

并且只将实际的 CREATED_DATE 设置为字符串，也就是说让集合对象中的 getter 返回“19102012130639”而不是整个 TO_DATE 语法。

编辑：假设您有一个包含所有值的字符串数组，并且您使用我编辑的语句版本，这应该可以工作。

```
 String[] values = { "03.0", "FLORIDA", "FLORIDA", "05231.0", "01.0", "01.0",   "19102012130639", null, null };
   ps = conn.prepareStatement(query);
   int i = 1;
   foreach(String par : values) {
      ps.setObject(i, par);
      i++;
   }
   ps.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T06:48:40.040

我遇到了同样的问题，但是，在我的情况下，我提供了作为目标表字段的`sysdate`参数。`DATE`

解决方案是将值更改为 a `java.sql.Timestamp`。

# iphone - 如何在 IB 中使用 UIScrollView？

> ID：13005345
> 
> 赞同：2
> 
> 时间：2012-10-22T05:21:35.717
> 
> 标签：iphone, ios, cocoa-touch, uiview, uiscrollview

> **可能重复：**
> [使用 Interface Builder 创建 UIScrollView 的步骤](https://stackoverflow.com/questions/9118796/steps-for-creating-uiscrollview-with-interface-builder)

我正在使用`UIScrollView`我的观点之一。我先添加了视图，然后是滚动视图，然后是滚动视图的一些控件，都是通过 IB 添加的。一切正常，直到页面适合，需要添加一些超出`UIView`长度的控件，我不确定在这种情况下如何在 IB 中添加控件，所以我以编程方式添加，但我的滚动视图没有滚动向下，它正在滚动到我的视图高度，我尝试设置新的视图高度，滚动视图的框架和内容大小没有任何效果，有人可以建议我现在该怎么做......

i) 如何在 IB 中添加超过其视图长度的控件。（视图高度被禁用）。

ii) 如何使我的滚动视图覆盖全视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:45:16.987

分别创建视图`UIScrollView`。

从技术上讲，`UIScrollView`可以直接在其中进行控制。但这不是重点。您应该始终（如果使用`IB`）单独设计视图，然后将其放置在内部`UIScrollView`并将`contentSize`属性设置为该视图的大小。

因此，不要将内容直接放在`UIScrollView`主视图中，而是从`IB`笔尖上的对象库中拖动一个单独的视图（而不是在主视图上）。

将此视图的宽度设置为`UIScrollView`. 开始在其上放置控件并扩展视图高度。对于要放置的每个新控件，必须增加高度以保持该控件。您不应将控制置于 IB 的视图之外。（虽然你可以）。

设计完视图后，将视图拖入其中并将该视图`UIScrollView`的 Y 值设置为 0。（当您将视图拖入其中时，`UIScrollView`它似乎会扰乱它的 Y 值）。

现在以编程方式将 UIScrollView 的 contentSize 设置为此视图的大小。为此，您需要为`IBOutlet`刚刚创建的 UIView 创建一个。

```
myscrollview.contentSize = myview.frame.size; 
```

你完成了。

**-编辑-**

![揭示 XIB 控件](../Images/5eec3409df929eef22c2fd18467605f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:32:37.813

就是这么简单。按照我在下面给你的步骤，你会得到你想要的。

> 确定您希望滚动视图显示的实际大小。说它是100 * 5o。

*   > 将您的 UIView 大小也设置为 100 * 50。

*   > 现在增加 nib 中的滚动视图高度。

*   > > 添加你想要的

*   > > 现在检查您已达到的大小。

*   > > 假设它达到了 300

*   > > 因此，以编程方式设置您的 contentsize 100 * 300 或 100 * 310

*   > > 在笔尖设置滚动视图大小 100 * 50

享受编程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:36:12.047

这很简单，首先记住你的`UIScrollView`框架，然后`UIScrollView`通过减去 100（例如 0 到 -100）来改变框架的 Y 位置，然后将其添加到高度（460 到 560）。然后只需通过继续此步骤将控件添加到所需位置...

```
For eg:

ScrollView Frame (0,0,320,460)

after CHANGE:
(0,-100,320,560) 
```

完成添加控件后，只需设置上一帧，如：(0,0,320,460)

# htmlunit - HtmlUnit 会话管理

> ID：13005349
> 
> 赞同：5
> 
> 时间：2012-10-22T05:21:59.073
> 
> 标签：htmlunit, sessionid

我正在尝试使用 HtmlUnit 登录 Facebook 页面并查看其 HTML 内容。我正在尝试通过 HtmlUnit 填写登录凭据，但单击提交按钮时看不到会话正在执行。

在 htmlunit 会话管理类上找不到太多内容。我还附上了我目前用来尝试这个问题的代码。任何帮助表示赞赏！

```
WebClient webClient = new WebClient();
HtmlPage page1 = webClient.getPage("https://www.facebook.com");
List<HtmlForm> listF = page1.getForms();
HtmlForm form = null;
for(int i=0; i<listF.size(); i++)
{
    if(listF.get(i).getId().equals("login_form"))
    {
        form = listF.get(i);
        }
}
HtmlTextInput uName = form.getInputByName("email");
HtmlPasswordInput passWord = form.getInputByName("pass");
HtmlSubmitInput button = form.getInputByValue("Log In");
uName.setValueAttribute(FACEBOOK_UNAME);
passWord.setValueAttribute(FACEBOOK_PASS);
HtmlPage page2 = button.click(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T11:05:37.470

找到了答案。在开始获取网页之前启用 cookie。有用。添加了以下代码

```
WebClient webClient = new WebClient();
CookieManager cookieMan = new CookieManager();
cookieMan = webClient.getCookieManager();
cookieMan.setCookiesEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-22T18:27:20.473

另一个建议是，如果您尝试在 HtmlUnit 中恢复 HTTP 会话，而不是使用`webClient.getCookieManager().addCookie(cookie);`，请改用：

```
webClient.addCookie("cookieName=cookieValue", URL, null); 
```

# matlab - 使用小波区分重叠信号（超声波检测中的 A 扫描时间与振幅，NDT）

> ID：13005353
> 
> 赞同：1
> 
> 时间：2012-10-22T05:22:15.960
> 
> 标签：matlab, wavelet

我正在做一个项目，其中两个或多个缺陷被放置在一起并且我正在接收回波，这样获得的信号（A 扫描超声波测试、NDT、时间与振幅）相互重叠。

如何在 Matlab 软件中使用小波单独区分或显示它们？

请至少告诉我代码的概要，以便每个信号显示其各自的属性。逐行简要概述会有所帮助。

# javascript - Meteor 修改认证智能包

> ID：13005357
> 
> 赞同：4
> 
> 时间：2012-10-22T05:22:35.920
> 
> 标签：javascript, meteor

如何修改 auth 智能包？

例如注册后的下拉框显示按钮更改密码和退出。我想添加一个编辑帐户按钮。如何？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:58:01.980

要添加编辑按钮，请看这里： [https ://github.com/meteor/meteor/tree/master/packages/accounts-ui-unstyled](https://github.com/meteor/meteor/tree/master/packages/accounts-ui-unstyled)

具体来说，[login_buttons.html](https://github.com/meteor/meteor/blob/master/packages/accounts-ui-unstyled/login_buttons.html)文件。

**更新：**链接文件顶部有一条注释：

> 注意：您不应该直接使用这些模板。相反，使用全局 {{loginButtons}} 模板。

因此，您应该在您的流星安装中找到这些文件（我的在 中`C:\Program Files (x86)\Meteor\packages\accounts-ui\login_buttons.html`）并编辑该文件。

*请注意，这将修改所有流星应用程序的帐户 UI。*如果您不希望您的更改影响您的其他流星应用程序，您可能必须“分叉”您自己的 accounts-ui 包。

有关于使帐户 UI 更可定制的讨论（如可覆盖的模板），但在当前版本的 Meteor 中是不可能的。我建议向流星开发人员描述您的用例。流星开发者[公开欢迎反馈](https://groups.google.com/d/topic/meteor-core/-KHgLzb6xHo/discussion)：

> 请反馈！我们很好奇的一些特定领域：
> 
> *   您想对 loginButtons 模板进行何种自定义？
>     
>     
> *   您可能会使用哪种帐户限制？每个人都必须有一个用户名？每个人都必须有一个电子邮件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:06:24.663

您可以覆盖`loginButtons`, 因为目前默认的帮助器对象由于某种原因是公共的：

```
Handlebars._default_helpers["loginButtons"] = function(options) {
    return "hello this is test";
}; 
```

原始辅助函数如下所示：

```
Handlebars.registerHelper(
  "loginButtons",
  function (options) {
    if (options.hash.align === "right")
      return new Handlebars.SafeString(Template._loginButtons({align: "right"}));
    else
      return new Handlebars.SafeString(Template._loginButtons({align: "left"}));
  }); 
```

`_loginButtons`在这里，您可以用自己的模板替换默认模板。

然而，这很容易被未来版本的流星打破，因为`Handlebars._default_helpers`并不是真的打算以这种方式使用。但至少你不必使用流星叉。

此外，您必须确保在完成后添加您的助手`accounts-ui-unstyled`。因此，如果您在另一个包中使用此技巧，请务必声明`accounts-ui-unstyled`为依赖项。

# wordpress - Wordpress 网站加载问题

> ID：13005360
> 
> 赞同：0
> 
> 时间：2012-10-22T05:23:02.817
> 
> 标签：wordpress

我正在为我的客户端站点使用 WordPress WooCommerce，当我上传到服务器（使用 Plesk 面板）时，站点已配置但无法正确加载`menu and slider part.`

任何想法，可能是什么问题？

[问题在这里](http://elegantkids.in.th/)

[相同的源代码在此演示服务器上](http://kids.pspsolutions.info/)完美运行

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:25:13.200

这两个问题（滑块和菜单）听起来都像是 jQuery /Javascript 问题。果然 - 看看你的代码 - 你网站上的 Javascript 和 Jquery 脚本的数量是压倒性的（我在 45 之后停止计数......）更糟糕的是，其中一些是重叠的（Easing .. Ui），而一些实际上是重复（计算了 4 种不同类型的滑块）这是一个肯定的冲突配方。再次检查所有加载的脚本，清理，看看问题是否仍然存在..

# android - android--如何使用测量getPressure

> ID：13005362
> 
> 赞同：1
> 
> 时间：2012-10-22T05:23:26.153
> 
> 标签：android, view

我对如何使用测量有问题——MotionEvent 的 getPressure。我想测量用户触摸屏幕时施加在屏幕上的压力。任何人都可以给我一些样品左右。

还有一个问题：回归`getPressure:1.0`是由最强的媒体或设备定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:40:58.530

```
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mPressure = mSensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE);// Get an instance of the sensor service, and use that to get an instance of a particular sensor.

public final void onSensorChanged(SensorEvent event) {
float millibars_of_pressure = event.values[0];//use the pressure value
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:30:04.707

```
public class MySensorActivity extends Activity implements SensorEventListener{
    private     SensorManager   mSensorManager;
    private     Sensor          mPressure;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mSensorManager      = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mPressure           = mSensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE);

}

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
    float millibars_of_pressure = event.values[0];
    Log.e("sensorValues",String.valueOf(millibars_of_pressure));
    }

     @Override
    protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, mPressure, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
    }
} 
```

# filepicker - 如何定义 FPFile 对象

> ID：13005368
> 
> 赞同：1
> 
> 时间：2012-10-22T05:23:50.187
> 
> 标签：filepicker

我想使用文件选择器的读取 API：[https://developers.filepicker.io/docs/web/#read](https://developers.filepicker.io/docs/web/#read)。

我希望输入参数值是一个 FPFile 对象，但他们没有提供如何定义它的示例。

我尝试了他们的示例代码，但出现错误：

```
Uncaught FilepickerException: Cannot read given input: [object Object],[object Object]. Not a url, file input, DOM File, or FPFile object. 
```

我已经使用了 filepicker.pick 但上面的错误仍然存​​在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:16:07.577

filepicker.io 读取 API 采用几个不同的选项作为参数。例如，您可以通过 filepicker.pick 调用传入一个 FPFile，即

```
filepicker.pick(function(fpfile){
    filepicker.read(fpfile, function(contents){});
}); 
```

或者一个必须允许跨域资源共享的 URL，即

```
filepicker.read("http://www.allow-crossdomain.com", function(contents){}); 
```

或一个 DOM 文件对象或`<input type="file">`，即

```
$('input[type="file"]').change(function(){
    filepicker.read(this, function(contents){});
}); 
```

# python - 如何在 django python 中用 json 替换 simplejson？

> ID：13005383
> 
> 赞同：6
> 
> 时间：2012-10-22T05:24:55.437
> 
> 标签：python, django

我的观点中有以下代码：

```
def __init__(self, obj='', json_opts={}, mimetype="application/json", *args, **kwargs):
        content = simplejson.dumps(obj, **json_opts)
        super(JSONResponse, self).__init__(content, mimetype, *args, **kwargs) 
```

由于`simplejson`将被弃用，我可以使用这个吗

```
content = json.dumps(obj, **json_opts) 
```

还是我需要做更多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-17T09:04:49.943

改用python的json：

[Django 1.5 发行说明](https://docs.djangoproject.com/en/dev/releases/1.5/#system-version-of-simplejson-no-longer-used)

```
import json 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T05:37:22.397

根据[这个答案](https://stackoverflow.com/a/712799/250168)，`json`是`simplejson`。但是，根据此[发行说明](https://docs.djangoproject.com/en/dev/releases/1.5/#system-version-of-simplejson-no-longer-used)，可能存在一些[不兼容性](https://code.djangoproject.com/ticket/18023#comment:10)，具体取决于`simplejson`您当前使用的版本。无论哪种方式，您都希望在某个时候`simplejson`替换为。`json`只需确保在将代码投入生产之前对其进行测试。

# opengl-es - GLSL 片段着色器中的精度损失

> ID：13005391
> 
> 赞同：2
> 
> 时间：2012-10-22T05:25:57.083
> 
> 标签：opengl-es, opengl-es-2.0, glsl

我现在使用 opengl-es 并且使用 gl 着色语言。我希望渲染到纹理，但我发现精度下降。例如，当我将浮点值 0.5 写入纹理时，我发现存储在纹理中的实际值约为 0.498。我应该怎么做才能达到更高的精度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:30:21.537

尝试在变量前面添加 highp 精度限定符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:30:23.607

渲染到每个组件使用超过 8 位的纹理。如果您没有[相应](http://www.khronos.org/registry/gles/extensions/OES/OES_texture_float.txt)的OpenGL ES[扩展](http://www.khronos.org/registry/gles/extensions/EXT/EXT_color_buffer_half_float.txt)，那么您通常无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:40:29.443

即使是下一个更高的精度也可能不够，因为渲染管道的最后阶段会将像素值缩放到 0..1 的范围，包括端点。因此 1 将表示为 255，这表明因子是 1/255 而不是 1/256。

这同样适用于所有精度：0.5 不能准确表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T22:06:45.113

您可能应该考虑通过打包-解包您的值来存储您的值（如果每个像素/纹素只有一个值）：

```
vec4 packFloat(const float value) {
    const vec4 bitSh = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);
    const vec4 bitMsk = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);
    vec4 res = fract(value * bitSh);
    res -= res.xxyz * bitMsk;
    return res;
}

float unpackFloat(const vec4 value) {
    const vec4 bitSh = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);
    return (dot(value, bitSh));
} 
```

这对于存储深度图之类的值可能没问题，这对于每个像素/纹素来说是一种 32 位范围

# ruby - Ruby - 找到哈希最大值的键

> ID：13005393
> 
> 赞同：6
> 
> 时间：2012-10-22T05:26:10.990
> 
> 标签：ruby, hash, max

我有一个散列，我想返回散列最大值的键（或键/值对）。因此，如果只有一个真正的最大值，它将返回那个键；但是，如果有多个具有相同值的键/值对，它将返回所有这些键。我怎样才能在 Ruby 中做到这一点？

```
my_hash.max_by {|k,v| v} #only returns one key/value pair 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T05:36:15.033

如果你想要所有对，我会做类似的事情

```
max = my_hash.values.max
Hash[my_hash.select { |k, v| v == max}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:48:54.163

单班轮：

```
my_hash.reduce({}){|h,(k,v)| (h[v] ||= []) << k;h}.max

irb
> z = {:tree => 3, :two => 2, 'three' => 3}

>  z.reduce({}){|h,(k,v)| (h[v] ||= []) << k;h}.max
[3, [:tree, "three"]] 
```

# backbone.js - 无法使用 Handlebars 模板和 BackboneJS 显示数据

> ID：13005397
> 
> 赞同：1
> 
> 时间：2012-10-22T05:26:40.467
> 
> 标签：backbone.js, handlebars.js

我一直在尝试通过从服务器获取一些数据（一个只有三个属性的 json 对象）（2 行 php 代码）。为了在 html 页面中获取和显示该数据，我分别使用了 BackboneJS 和 Handlebars 模板。这是javascript代码

```
var User = Backbone.Model.extend({
    urlRoot:"getUser/"
});

var UserView = Backbone.View.extend({
    el:$("#user"),
    initialize: function(){
        this.model.bind("change", this.render());
    },
    render: function(){
        var templateSource = $("#user-temp").html();
        var template = Handlebars.compile(templateSource);
        $(this.el).html(template(this.model));
        var newDate = new Date();
        console.log("in UserView render :: " + newDate.getTime());
        console.log(this.model.toJSON());
        //var pp = "nothing";
    }
});

var UserRouter = Backbone.Router.extend({
    routes:{
        "":"userDetails"
    },
    userDetails:function(){
        //var newUser = new User({id:1});
        var newUser = new User();
        var userView = new UserView({model:newUser});
        var newDate = new Date();
        newUser.fetch({
            success:function(){
                console.log("in router :: " + newDate.getTime());
                console.log(userView.model.toJSON());
            }
        });
    }
}); 
```

index.html 页面中的车把模板

```
<div id="user"></div>
    <script id="user-temp" type="text/x-handlebars-template">
        <div>
            ID  {{attributes.id}}
            Name  {{attributes.name}}
            Age  {{attributes.age}}
        </div>
    </script> 
```

PHP 代码

```
 $user = array("name"=>"Arif","id"=>"1","age"=>"100");
 echo json_encode($user); 
```

现在的问题是我在控制台（谷歌浏览器）中看不到我从 index.html 页面中的服务器发送的数据（$user）我宁愿找到这个

```
in UserView render() :: 1350880026092 
Object
    __proto__: Object
in router :: 1350880026097
Object
    age: "100"
    id: "1"
    name: "Arif"
    __proto__: Object 
```

（控制台中的大数字是以毫秒为单位的时间。）但是如果我更改控制台输出的代码（仅显示模型）
（在 UserView 渲染（）函数中）

```
console.log(this.model); 
```

（在 UserRouter userDetails() 函数中）

```
console.log(userView.model); 
```

然后控制台看起来像这样

```
in UserView render :: 1350881027988
child
    _changing: false
    _escapedAttributes: Object
    _pending: Object
    _previousAttributes: Object
    _silent: Object
    attributes: Object <<======
        age: "100"
        id: "1"
        name: "Arif"
        __proto__: Object
    changed: Object
    cid: "c0"
    id: "1"
    __proto__: ctor
in router :: 1350881027995
child
    _changing: false
    _escapedAttributes: Object
    _pending: Object
    _previousAttributes: Object
    _silent: Object
    attributes: Object  <<======
        age: "100"
        id: "1"
        name: "Arif"
        __proto__: Object
    changed: Object
    cid: "c0"
    id: "1"
    __proto__: ctor 
```

在这里我可以看到属性（箭头标记 <<====== ）
那么我做错了什么？我在这里缺少一些基本概念吗？顺便说一句，我是 Handlebars 和 BackboneJS 的新手。此外，这是我在 stackoverflow 中的第一个问题，所以如果您认为我提供的信息还不够，请随时询问您需要哪些进一步的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:17:11.420

您将模型绑定到`this.render()`这意味着您执行渲染函数，然后将模型绑定到任何渲染返回（在您的情况下什么都没有）。

尝试

```
initialize: function(){
    _.bindAll(this, 'render'); // guarantees the context for render
    this.model.bind("change", this.render);
} 
```

或者，使用更新的语法（请参阅 0.9.0 [http://backbonejs.org/#changelog](http://backbonejs.org/#changelog)的更改日志，为清楚起见，bind 和 unbind 已重命名为 on 和 off）

```
initialize: function(){
    _.bindAll(this, 'render');
    this.model.on("change", this.render);
} 
```

# ruby-on-rails - 用户会话在 Rails 2 中的 ajax 调用中过期

> ID：13005406
> 
> 赞同：0
> 
> 时间：2012-10-22T05:27:32.870
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我正在使用 rails 2 中的 redmine，在我的 erb 文件中，我有一个 javascript 函数

```
function getLeaveTypeQuota()
    {
       var selected_leave_type_id = jQuery("#leave_type").val()
       jQuery.post(
                "getUserLeaveQuota",
                { leave_type_id: selected_leave_type_id },
                function(data) {
                    alert(data);
                }

        );
    } 
```

在控制器中，我正在查询以获取登录用户的配额，使用

```
@user_leave_record = UserLeaveRecord.find(:first,:conditions => {:group_detail_id => params[:leave_type_id], :user_id => session[:user_id]}) 
```

但是我在 session[:user_id] 中得到了 nill，但是我已经登录了。ajax调用后我自动注销。我不知道为什么会这样。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:43:49.633

如果您在 中启用`protect_from_forgery`，`app/controllers/application_controller.rb`您将需要包含`authenticity_token`在发布的数据中。请尝试禁用`protect_from_forgery`或添加`authenticity_token`到正在发布的数据。

# ruby - 编写一个包装器，在 MRI 上使用 FFI，在 JRuby 上使用 Java

> ID：13005409
> 
> 赞同：0
> 
> 时间：2012-10-22T05:27:52.867
> 
> 标签：ruby, interop, jruby, ffi

我需要包装一个新的库供 Ruby 使用。计划是检测正在使用的 Ruby 实现，如果在 MRI 上通过 FFI 加载 C 库，如果使用 JRuby，则包装 Java 库。

我很难找到文档，所以任何指针都会有所帮助。我知道还有其他库可以做到这一点，但我目前找不到，所以如果你知道任何这样做的宝石也会有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:13:46.743

首先，您可以`RUBY_ENGINE`在运行时检查常量的值。

在 MRI (1.9.x) 下运行，它将是“红宝石”。在 JRuby 下，“jruby”。

# postgresql - 为什么我们需要像 RabbitMQ 这样的消息代理而不是像 PostgreSQL 这样的数据库？

> ID：13005410
> 
> 赞同：245
> 
> 时间：2012-10-22T05:28:09.053
> 
> 标签：postgresql, redis, rabbitmq, message-queue, celery

我是[RabbitMQ等消息代理的新手，我们可以使用它为](https://www.rabbitmq.com/)[Celery](http://www.celeryproject.org/)等调度系统创建任务/消息队列。

现在，这是一个问题：

*   [我可以在PostgreSQL](https://www.postgresql.org/)中创建一个表，该表可以附加新任务并由 Celery 等消费者程序使用。

*   为什么我要为此设置一个全新的技术，比如 RabbitMQ？

现在，我认为扩展无法解决问题，因为我们的数据库（如 PostgreSQL）可以在分布式环境中工作。

我用谷歌搜索数据库对特定问题有什么问题，我发现：

*   轮询使数据库保持忙碌且性能低下
*   锁定表 -> 再次表现不佳
*   数百万行任务->再次，轮询性能低下

现在，RabbitMQ 或任何其他类似的消息代理如何解决这些问题？

另外，我发现`AMQP`协议是它遵循的。这有什么了不起的？

[Redis](https://redis.io/)也可以用作消息代理吗？我发现它更类似于 Memcached 而不是 RabbitMQ。

请对此有所了解！

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-10-22T06:33:53.230

Rabbit 的队列驻留在内存中，因此比在数据库中实现要快得多。（好的）专用消息队列还应该提供与队列相关的基本功能，例如节流/流量控制，以及选择不同路由算法的能力，仅举几例（rabbit 提供这些以及更多）。根据项目的大小，您可能还希望消息传递组件与数据库分开，这样如果一个组件承受重负载，它就不会妨碍另一个组件的操作。

至于你提到的问题：

*   **轮询保持数据库繁忙和低性能**：使用 Rabbitmq，生产者可以*将*更新推送给消费者，这比轮询性能要好得多。只需在需要时将数据发送给消费者，无需进行无用的检查。

*   **锁定表->再次低性能：**没有要锁定的表：P

*   **数百万行任务 -> 再次轮询性能低下：**如上所述，Rabbitmq 将运行得更快，因为它驻留在 RAM 中，并提供流控制。如果需要，它还可以在 RAM 用完时使用磁盘临时存储消息。在 2.0 之后，Rabbit 的 RAM 使用率有了显着改善。集群选项也可用。

关于 AMQP，我想说一个非常酷的功能是“交换”，以及它路由到其他交换的能力。这为您提供了更大的灵活性，并使您能够创建各种复杂的路由类型，在扩展时非常方便。一个很好的例子，请参见：

[![](../Images/9d978618d8f46e6b5a7ca60480e4a4ea.png)](https://i.stack.imgur.com/LIt6H.png)
[（来源：[springsource.com](http://blog.springsource.com/wp-content/uploads/2011/04/routing-topology.png)）]

和：http: [//blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/](http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)

最后，关于 Redis，是的，它可以用作消息代理，并且可以做得很好。但是，Rabbitmq 比 Redis 具有更多的消息队列功能，因为 rabbitmq 是从头开始构建的，它是一个功能齐全的企业级专用消息队列。另一方面，Redis 主要被创建为内存中的键值存储（尽管它现在做的远不止这些；它甚至被称为瑞士军刀）。尽管如此，我还是读到/听说过很多人使用 Redis 在小型项目中取得了不错的成绩，但在大型应用程序中却没有听到太多关于它的消息。

以下是在长轮询聊天实现中使用 Redis 的示例：http: [//eflorenzano.com/blog/2011/02/16/technology-behind-convore/](http://eflorenzano.com/blog/2011/02/16/technology-behind-convore/)

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-10-22T05:42:35.060

## PostgreSQL 9.5

PostgreSQL 9.5 包含`SELECT ... FOR UPDATE ... SKIP LOCKED`. 这使得实现工作排队系统变得*更加*简单和容易。您可能不再需要外部排队系统，因为现在可以轻松获取没有其他会话锁定的“n”行，并保持它们锁定，直到您确认工作已完成。当需要外部协调时，它甚至可以与两阶段事务一起使用。

外部排队系统仍然有用，提供固定功能、经过验证的性能、与其他系统的集成、水平扩展和联合选项等。尽管如此，对于简单的情况，您不再需要它们。

## 旧版本

你*不需要*这样的工具，但使用一个可能会让生活更轻松。在数据库中进行排队看起来很容易，但在实践中您会发现高性能、可靠的并发排队在关系数据库中*确实很难*做到。

这就是存在像[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)这样的工具的原因。

`LISTEN`您可以通过使用and摆脱 PostgreSQL 中的轮询`NOTIFY`，但这并不能解决可靠地将队列顶部的条目分发给一个消费者同时保持高度并发操作而不阻塞插入的问题。您认为可以解决该问题的所有简单而明显的解决方案实际上在现实世界中并没有，并且往往会退化为效率较低的单工作者队列获取版本。

如果您不需要高度并发的多工作者队列获取，那么在 PostgreSQL 中使用单个队列表是完全合理的。

# android - 在Android的数据库中离线保存Listview（记录）......？

> ID：13005412
> 
> 赞同：0
> 
> 时间：2012-10-22T05:28:15.770
> 
> 标签：android

我是 Android 开发的新手。我正在使用 API 获取记录并将其显示在列表视图中，但这仅在我连接到互联网时才有效。我想离线保存这些记录，以便用户也可以离线查看它们。

请帮帮我。
请提供一些代码示例。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:47:57.053

```
public class DictionaryOpenHelper extends SQLiteOpenHelper{

private static final int DATABASE_VERSION = 2;
private static final String DICTIONARY_TABLE_NAME = "dictionary";
private static final String DICTIONARY_TABLE_CREATE =
            "CREATE TABLE " + DICTIONARY_TABLE_NAME + " (" +
            KEY_WORD + " TEXT, " +
            KEY_DEFINITION + " TEXT);";

DictionaryOpenHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase db) {
    db.execSQL(DICTIONARY_TABLE_CREATE);
}
} 
```

# jquery-ui - 如何使用jquery限制自动完成

> ID：13005414
> 
> 赞同：-6
> 
> 时间：2012-10-22T05:28:17.930
> 
> 标签：jquery-ui, autocomplete

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1 -transitional.dtd">
<!doctype html> 
<html lang="en"> 
<head>
<title>Time</title> 
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" /> 
<script src="http://code.jquery.com/jquery-1.8.2.js"></script> 
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script> 
  $(function() { var availableTags = [ "Egmore", "Poonamallee High Road", "Purasawalkam", "Spur Tank Road", "MMDA", "NSC Bose Road", "Thambu Chetty Streett", "Pattinapakkam", "Kamarajar Salai", "P.S.Sivasamy Salai", "Central Road", "Jafferkhanpet", "K.K.Nagar", "Post Colony (West Mambalam)", "Saidapet West", "VSM Garden", "Perumal Koil Street", "Kodungaiyur", "Esplanade", "East GT area", "Royapuram", "Sembium", "Madhavaram", "Thiru-Vi-Ka Nagar", "Vyasarpadi", "Perambur", "Toll Gate", "Cherry Road", "Arcot Road", "Valasaravakkam ", "E.D.L", "Injambakkamm ", "Selaiyur", "Choolaimedu", "Kodambakkam", "North Usman Road", "Vadapalani", "Ashok Nagar, Trust Puram", "Madipakkam", "Nolambur", "Padi Industrial Estate", "Perungalathur", "Bharathi Salai", "Valluvar Salai", "Mugalivakkam", "Manapakkam", "Poonamallee High Road", "Ramavaram", "Siruseri Industrial Estate", "Ambattur Industrial Estate", "Mogappair", "Thirumangalam", "Purasawalkam(One Part)", "Doveton(One Part)", "Teynampet(One Part)", "Anna Salai(One Part)", "Khajital Road(One Part)", "Pookadai", "Paris Corner", "Broadway", "Esplanade(One Part)", "Mylapore(Some Area)", "Luz(Some Area)", "T. Nagar(One Part)", "Pandy Bazar", "South Usman Road", "Anna Salai(One Part)", "M.R.C Nagar", "Karpagam Avenue", "Greenways Lane", "Ranimeyammai Tower", "K.V.P Garden", "Srinivasa Avenue", "Anna Salai(One Part)", "Whites Road", "Rukmani Lakshmipathy Salai", "Ethiraj Salai", "Raheja Complex", "Moorthingar Lane", "Kamaraj Salai", "Anna Poonga", "Moolakadai", "Muthamizh Nagar", "Kaattur Lakshmi Nagar", "Sembium(One part)", "Manali", "G.K.M Colony", "S.R.P Colony", "Vyasarpadi Industrial Estate", "G.S.T Road(One part)", "Nehru Nagar", "Kadaperi", "", "", "", "", "", "" ]; $("#tags").autocomplete({ source: function() { var results = $.ui.autocomplete.filter(availableTags, request.term); response(results.slice(0, 10)); } }); 
</script> 
</head>
<body> 
    <center> 
    <form method="post" action="newjsp.jsp" name="index">
      <div class="ui-widget">
         <label for="tags">Enter The Cities/Places: </label> 
         <input id="tags" name="area" /> <input type="submit" value="SEARCH"/> 
      </div> 
    </form> 
    <form action="newjsp.jsp" method="post" name="timeform"> 
       <label name="time"> Search By Time</label> 
       <select id=time name="time" > 
         <option value="8AM10AM">8AM-10AM</option> 
         <option value="10AM12PM">10AM-12PM</option> 
         <option value="12PM2PM">12PM-2PM</option> 
         <option value="2PM4PM">2PM-4PM</option> 
         <option value="4PM6PM">4PM-6PM</option> 
        </select>
        <input type="submit" value="SEARCH"/> 
    </form>
    </center>
 </body> 
</html> 
```

==================================================== =======================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:06:16.433

这是一个与小提琴相关的问题：http: [//jsfiddle.net/andrewwhitaker/vqwBP/](http://jsfiddle.net/andrewwhitaker/vqwBP/)

[在 jQuery UI 自动完成中限制结果](https://stackoverflow.com/questions/7617373/limit-results-in-jquery-ui-autocomplete)

```
$("#auto").autocomplete({
    source: function(request, response) {
        var results = $.ui.autocomplete.filter(myarray, request.term);

        response(results.slice(0, 10));
    }
}); 
```

PS：请，下次描述你的问题，格式化JS脚本可读

# javascript - jQuery自动刷新div搞砸了

> ID：13005420
> 
> 赞同：1
> 
> 时间：2012-10-22T05:29:18.420
> 
> 标签：javascript, jquery, html, refresh

我有一个脚本可以自动刷新页面上的某个 div（我从这里的另一篇文章中得到）

```
<script type="text/javascript">
    var auto_refresh = setInterval(
    function(){
        $('#refresh').load('index.php?_=' +Math.random()).fadeIn("slow");
    }, 10000); // refresh every 10000 milliseconds
</script>
...............
<div id="refresh">
  <!-- Some PHP Code -->
</div> 
```

这会刷新，但是当它刷新时，我会获取整个 html 文档并将其放入 div 中。像这样：

![div 中的正文](../Images/9f01db92c5d00a268af782c4ad31a7eb.png)

如您所见，刷新后的 div（用红色标记的那个）正在将身体推入其中。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:31:56.643

首先，您将整个页面加载到分隔符中，从而导致文件完全重新加载。相反，您应该从单个文件加载最近的帖子分隔符，即使在第一页加载时也是如此。然后随着时间的推移不断刷新。

其次，您应该尽可能少地将数据从服务器传输到客户端。最多，您应该使用各种类型的简约校验和（例如消息数）来确认客户端和服务器已同步。

最后，如果您选择使用这种格式，请以[JSON](https://developer.mozilla.org/en-US/docs/JSON)或[XML](https://developer.mozilla.org/en-US/docs/XML)等格式传输数据，并让客户端将其显示在页面上。传输样式化的 HTML 会增加网络开销，这不是最佳做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T06:41:24.977

您正在将整个页面加载到 div。修改代码以仅使用获取的文档的一部分：

```
 <script type="text/javascript">
        var auto_refresh = setInterval(
        function(){
            $('#refresh').empty();
            $('#refresh').load('index.php?_=' +Math.random()+' #refresh').fadeIn("slow");
        }, 10000); // refresh every 10000 milliseconds
    </script> 
```

# spring - Spring中的JSF视图范围

> ID：13005421
> 
> 赞同：9
> 
> 时间：2012-10-22T05:29:26.467
> 
> 标签：spring, jsf, jsf-2, view-scope

`@ViewScoped`Spring 3.0 中是否有类似 JSF 的范围？我有一个使用 JSF+Spring 的应用程序，其中支持 bean 由 Spring 管理。我在 Spring 中没有找到像 JSF wiew 范围这样的范围。我看到博客[Porting JSF 2.0's ViewScope to Spring 3.0](http://cagataycivici.wordpress.com/2010/02/17/port-jsf-2-0s-viewscope-to-spring-3-0)，但它对我不起作用。

这是我对自定义 Spring 范围的尝试：

```
import java.util.Map;

import javax.faces.context.FacesContext;

import org.springframework.beans.factory.ObjectFactory;
import org.springframework.beans.factory.config.Scope;

/**
 * Implements the JSF View Scope for use by Spring. This class is registered as a Spring bean with the CustomScopeConfigurer.
*/
public class ViewScope implements Scope {

    public Object get(String name, ObjectFactory<?> objectFactory) {

        System.out.println("**************************************************");
        System.out.println("-------------------- Getting objects For View Scope ----------");
        System.out.println("**************************************************");
        if (FacesContext.getCurrentInstance().getViewRoot() != null) {
            Map<String, Object> viewMap = FacesContext.getCurrentInstance().getViewRoot().getViewMap();
            if (viewMap.containsKey(name)) {
                return viewMap.get(name);
            } else {
                Object object = objectFactory.getObject();
                viewMap.put(name, object);
                return object;
            }
        } else {
            return null;
        }
    }

    public Object remove(String name) {
        System.out.println("**************************************************");
        System.out.println("-------------------- View Scope object Removed ----------");
        System.out.println("**************************************************");

        if (FacesContext.getCurrentInstance().getViewRoot() != null) {
            return FacesContext.getCurrentInstance().getViewRoot().getViewMap().remove(name);
        } else {
            return null;
        }
    }

    public void registerDestructionCallback(String name, Runnable callback) {
        // Do nothing
    }

    public Object resolveContextualObject(String key) {         return null;
    }

    public String getConversationId() {
        return null;
    }

} 
```

`application-context.xml`：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
            <map>
                <entry key="view">
                    <bean class="com.delta.beans.ViewScope"/>
                </entry>
            </map>
        </property>
 </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-20T11:11:13.560

最近我创建了 maven artifact 来解决这个问题。

请参阅我的 github [javaplugs/spring-jsf](https://github.com/javaplugs/spring-jsf)存储库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T03:48:19.777

我在没有将 bean 移植到 Spring 的情况下做了类似的事情。它对我有用。

```
@ManagedBean(name="bean")
@ViewScoped  // actual jsf viewscoped only with javax.faces.viewscoped import
public class Bean implements
Serializable {

@ManagedProperty(value="#{appService}")   // Spring Manged Bean and singleton
private transient AppService appService;

  // Getting AppService Object which is singleton in the application during deserialization 
 private void readObject(ObjectInputStream stream) throws IOException, ClassNotFoundException {
          stream.defaultReadObject();
          FacesContext context = FacesContext.getCurrentInstance();
          appService = (AppService)context.getApplication()
                .evaluateExpressionGet(context, "#{appService}", AppService.class);
       }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T13:08:28.973

```
public class ViewScopeCallbackRegistrer implements ViewMapListener {

  @SuppressWarnings("unchecked")
  @Override
  public void processEvent(SystemEvent event) throws AbortProcessingException {
    if (event instanceof PostConstructViewMapEvent) {
      PostConstructViewMapEvent viewMapEvent = (PostConstructViewMapEvent) event;

      UIViewRoot viewRoot = (UIViewRoot) viewMapEvent.getComponent();

      viewRoot.getViewMap().put(
          ViewScope.VIEW_SCOPE_CALLBACKS,
          new HashMap<String, Runnable>()
      );

    } else if (event instanceof PreDestroyViewMapEvent) {
      PreDestroyViewMapEvent viewMapEvent = (PreDestroyViewMapEvent) event;

      UIViewRoot viewRoot = (UIViewRoot) viewMapEvent.getComponent();

      Map<String, Runnable> callbacks = (Map<String, Runnable>) viewRoot
          .getViewMap().get(ViewScope.VIEW_SCOPE_CALLBACKS);

      if (callbacks != null) {
        for (Runnable c : callbacks.values()) {
          c.run();
        }
        callbacks.clear();
      }
    }
  }

  @Override
  public boolean isListenerForSource(Object source) {
    return source instanceof UIViewRoot;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T12:58:45.297

```
public class ViewScope implements Scope {

public static final String VIEW_SCOPE_CALLBACKS = "viewScope.callbacks";

@Override
public synchronized Object get(String name, ObjectFactory<?> objectFactory) {
Object instance = this.getViewMap().get(name);
if(instance == null){
instance = objectFactory.getObject();
this.getViewMap().put(name, instance);
}
return instance;
}

@SuppressWarnings("unchecked")
@Override
public Object remove(String name) {
Object instance = this.getViewMap().remove(name);
if(instance == null){
Map<String, Runnable> callbacks = (Map<String, Runnable>) this.getViewMap().get(VIEW_SCOPE_CALLBACKS);
if(callbacks != null)
callbacks.remove(name);
}
return instance;
}

/**
* Responsável por registrar uma chamada de destruição ao bean
* que será armazenadano [b]viewMap[/b] da [b]ViewRoot[/b](nossa página que será mostrada)
* @see #getViewMap()
* @param name - nome do bean
* @param runnable
*/  
@SuppressWarnings("unchecked")
@Override
public void registerDestructionCallback(String name, Runnable runnable) {
Map<String, Runnable> callbacks = (Map<String, Runnable>) this.getViewMap().get(VIEW_SCOPE_CALLBACKS);
if(callbacks != null)
callbacks.put(name, runnable);
}

@Override
public Object resolveContextualObject(String key) {
FacesContext facesContext = FacesContext.getCurrentInstance();
FacesRequestAttributes facesResquestAttributes = new FacesRequestAttributes(facesContext);
return facesResquestAttributes.resolveReference(key);
}

@Override
public String getConversationId() {
FacesContext facesContext = FacesContext.getCurrentInstance();
FacesRequestAttributes facesResquestAttributes = new FacesRequestAttributes(facesContext);  
return facesResquestAttributes.getSessionId() + "-" + facesContext.getViewRoot().getViewId();
}

private Map<String, Object> getViewMap(){
return FacesContext.getCurrentInstance().getViewRoot().getViewMap();
}

} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-02-04T11:31:00.273

我已经尝试解决 Jsf 2.1 和 Jsf 2.2 的 Jsf 视图 bean 内存泄漏问题。尝试以下链接[Memory leak with ViewScoped bean 中的代码？](https://stackoverflow.com/questions/12182844/memory-leak-with-viewscoped-bean). 导航到下一页时，它将清除会话中的视图 bean。

# c# - 是否可以通过反射来做到这一点？

> ID：13005430
> 
> 赞同：4
> 
> 时间：2012-10-22T05:30:29.947
> 
> 标签：c#, asp.net, .net, asp.net-mvc, reflection

> **可能重复：**
> [动态 LINQ OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

我有一个自定义排序选项列表，这些选项从客户端网格控件（如果您想知道的话是 KendoUI 网格）传递给服务器。这些排序选项具有作为字符串排序的属性。我编写了一个 switch 方法，它将检查排序对象的值并应用适当的 LINQ。

```
 private IQueryable<Report> SortReports(IQueryable<Report> reports, KendoSort sort)
    {
        switch (sort.Field)
        {
            case "name":
                return sort.Dir == "asc" ? reports.OrderBy(x => x.Name) : reports.OrderByDescending(x => x.Name);
            case "description":
                return sort.Dir == "asc" ? reports.OrderBy(x => x.Description) : reports.OrderByDescending(x => x.Description);
            default:
                return sort.Dir == "asc" ? reports.OrderBy(x => x.Id) : reports.OrderByDescending(x => x.Id);
        }
    } 
```

这工作正常，但看起来很丑。我如何通过反射来做到这一点，这样我就不必为我想要使用的每种类型的实体编写自定义函数？如果无论实体是什么，我都可以只使用一个函数来执行此操作，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:47:36.823

您可以使用动态 LINQ。这是[`blog post`](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)Scott Gu 的相关内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:49:34.157

Marc Gravell 有一个很棒的小库，叫做[FastMember](http://code.google.com/p/fast-member/)。你可以像这样使用它：

```
private IQueryable<Report> SortReports(IQueryable<Report> reports,KendoSort sort)
{
    var accessor = TypeAccessor.Create(typeof(Report));
    return sort.Dir == "asc" ? 
        reports.OrderBy(x => accessor[x,sort.Field]) : 
        reports.OrderByDescending(x => accessor[x,sort.Field]));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:11:43.033

使用反射，其中 KendoSort.Property 是 Report 属性的 PropertyInfo，它返回排序所需的值。

```
private IQueryable<Report> SortReports(IQueryable<Report> reports, KendoSort sort)
{
    return sort.Dir == "asc" ? reports.OrderBy(x => sort.Property.GetValue(x)) : reports.OrderByDescending(x => sort.Property.GetValue(x));
} 
```

但是，反射相对较慢。其他解决方案可能更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T06:13:41.507

以下应该动态创建您想要的排序功能。

```
ParameterExpression pe = Expression.Parameter(typeof(Report), "x");
LambdaExpression le = Expression.Lambda(
    Expression.PropertyOrField(pe, sort.Field),
    new List<ParameterExpression>() {pe});

var leCompiled = (Func<Report, string>)le.Compile();                

return sort.Dir == "asc" ? reports.OrderBy(leCompiled) : reports.OrderByDescending(leCompiled); 
```

它以 x => x.ReportProperty 的形式创建一个 Func 委托，其中 ReportProperty 是 sort.Field 的值。

# matlab - 在 MATLAB 的茎图中删除零值的圆圈

> ID：13005433
> 
> 赞同：1
> 
> 时间：2012-10-22T05:31:02.743
> 
> 标签：matlab

我正在用[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中的茎图绘制一些离散值。我发现如果该值为零，则茎图将在 x 轴上放置一个圆圈以显示零。如果值为零，有没有办法让茎不显示圆圈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:42:40.567

将它们视为 NaN，即：

```
Y = [1;2;3;0;3;2;4;0;1];
Y(Y == 0) = NaN;
stem(Y); 
```

第 4 和第 8 个索引仍将存在于 x 轴上，但如果观察值设置为`NaN`，则不会绘制线或圆。

# ruby-on-rails-3 - Rails 服务器在生产模式下经常停机

> ID：13005439
> 
> 赞同：2
> 
> 时间：2012-10-22T05:31:33.477
> 
> 标签：ruby-on-rails-3, apache, passenger

我在我的应用程序中使用 Rails 3.0.5 版本和 Ruby 1.9.2。

它在开发模式下工作正常，但在生产模式下，服务器每 3-4 天就会关闭一次。

它给出了以下错误`/var/log/https/error.log file`。

```
[Sun Oct 21 09:39:03 2012] [error] [IP_ADDRESS] **Premature end of script headers:** 
[ pid=24971 thr=1 file=ext/apache2/Hooks.cpp:817 time=2012-10-21 09:39:03.371 ]: 
```

支持的应用程序（进程 29805）未发送有效的 HTTP 响应；相反，它什么也没发送。它可能已经崩溃了；请检查此应用程序中是否存在崩溃错误。

我不知道服务器停机的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:38:38.617

您使用哪个服务器？webrick 还是别的？过去我遇到过这样的问题，即服务器出现故障。我将服务器从 webrick 更改为 Mongrel，它比 webrick 更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:50:02.567

对不起，我不能评论这么回答，个人没有遇到过这个问题，但似乎有很多关于它的讨论。以下是我遇到的一些资源：

1.  [Dalibor Nasevic 对为什么会发生这种情况的解释](http://dalibornasevic.com/posts/7-premature-end-of-script-headers-ruby-on-rails-with-phusion-passenger-on-apache-error)
2.  [脚本头过早结束——Rails](https://stackoverflow.com/questions/10732765/premature-end-of-script-headers-rails)
3.  [Rails 3.1 的间歇性“脚本头过早结束”](https://stackoverflow.com/questions/8358280/intermittent-premature-end-of-script-headers-with-rails-3-1)

希望能帮助到你。

# jboss7.x - 如何在调试模式下启动 JBOSS 7？

> ID：13005441
> 
> 赞同：22
> 
> 时间：2012-10-22T05:31:50.263
> 
> 标签：jboss7.x

当我在 JBOSS 7 中部署应用程序时出现错误（JBAS014750）。所以我需要在调试模式下运行它才能找到确切的问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-27T16:14:26.720

If you have a look at `bin/standalone.sh`you will discover

```
# Use --debug to activate debug mode with an optional argument to specify the port.
# Usage : standalone.bat --debug
#         standalone.bat --debug 9797 
```

So, following this, just run the script with the `--debug <port>` parameter.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-22T13:48:53.610

像这样编辑文件 <jboss-root>/bin/standalone.conf：

取消注释该行

```
JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_socket,address=4242,server=y,suspend=n" 
```

然后使用standalone.sh 启动服务器。

现在，您可以使用您最喜欢的 IDE 分离调试器。如果您使用的是 Eclipse，您可以切换到“调试配置”并添加一个新的远程 Java 应用程序。

如果服务器以上述`JAVA_OPTS`设置启动，则可以使用 IDE 进行调试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T08:00:46.040

如果您使用的是命令行，请按照此处的指南进行操作。

[如何在调试中启动 As7](https://community.jboss.org/wiki/JBossAS7UsingJPDAToDebugTheASSourceCode)

如果使用 eclipse ，右键单击服务器并选择调试以在调试配置文件中启动服务器。

![在此处输入图像描述](../Images/854270b0863e8b049ec2340076e33ecf.png)

# ruby-on-rails - 使用 Devise 和 RSpec 测试视图

> ID：13005444
> 
> 赞同：23
> 
> 时间：2012-10-22T05:32:00.990
> 
> 标签：ruby-on-rails, rspec, devise

`user_signed_in?`在将 Devise 的方法添加到有问题的视图模板后，我试图让之前通过的 rspec“视图规范”通过。模板看起来像这样：

```
<% if user_signed_in? %>
  Welcome back.
<% else %>
  Please sign in.
<% endif %> 
```

*正在*传递的视图规范看起来像这样：

```
require "spec_helper"

describe "home/index.html.erb" do

  it "asks you to sign in if you are not signed in" do
    render
    rendered.should have_content('Please sign in.')
  end

end 
```

添加调用后产生的错误`user_signed_in?`是：

```
 1) home/index.html.erb asks you to sign in if you are not signed in
     Failure/Error: render
     ActionView::Template::Error:
       undefined method `authenticate' for nil:NilClass
     # ./app/views/home/index.html.erb:1:in `_app_views_home_index_html_erb__1932916999377371771_70268384974540'
     # ./spec/views/home/index.html.erb_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

网络上有很多关于这个错误的引用，但我还没有找到一个足够描述性的答案，我可以让我的测试再次通过。我相信这个问题与没有一些关键的设计基础设施可用的视图（正在与任何模型/控制器隔离测试）有关。感谢您的建议。

另外，一旦测试通过，我将如何测试其他路径（用户已经登录）？我想它会非常相似。谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-22T15:12:19.790

您收到的错误是因为您需要包含设计测试助手

通常你会添加这个（你可能已经有）到 spec/support/devise.rb

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

但是由于您正在创建视图规范，因此您需要这样的东西：

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
  config.include Devise::TestHelpers, :type => :view
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:40:58.100

看看 Rails [Composer](http://railsapps.github.com/rails-composer/)，它将指导您创建一个新的 Rails 项目，其中包含测试、UI 等选项。

创建一个示例项目，很酷的是它会为您创建所有测试，包括使用设计查看测试。然后你可以从那些测试规范中得到一个想法。

为我工作：D

高温高压

# number-formatting - NPOI 编号错误格式读取

> ID：13005446
> 
> 赞同：1
> 
> 时间：2012-10-22T05:32:22.260
> 
> 标签：number-formatting, xlsx, npoi

我有一个 xlsx 文件并尝试从中读取数字并将它们放入另一个文件中。问题是，有些数字被错误地读取，我不知道为什么。例如：

```
Number in excel | Number read
-----------------------------
139,8           | 1,398E+16
2,2             | 2,2E+16 
```

有趣的是，这个问题只发生在一些数字上。所有数字的格式都是相同的。NPOI 从 excel 中读取确切的数字，而不是格式化的，所以我检查了值，但是它们都与格式化的相同。

好的，我想我发现了一个问题。现在我只需要找到解决方案。我提取了 xlsx 文件并检查了存储在单元格中的实际值。问题是当我有值时`139.80000000000001`它被读取为`1,398E+16`，所以我猜 NPOI 解释格式错误。它认为。（点）分隔数千，而它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T16:03:13.963

只是为了记录，我刚刚从 Alpha 更新到了 Beta，它确实有效。现在我得到了单元格上的确切值。

可以在[此处](http://npoi.codeplex.com/releases/view/97124)找到测试版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:29:41.160

看起来这是一个已知问题，并且在即将发布的[NPOI 2.0 beta 1 版本](http://npoi.codeplex.com/releases/view/97124)中有计划修复：

> 发行说明
> 
> *   ...
>     
>     
> *   修复用逗号而不是点分隔的小数点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T00:31:31.357

它看起来是 NPOI 2.0 alpha 中的一个错误。如果它仍然存在，请尝试 NPOI 2.0 beta 1，我们将计划在 2.0 最终版本中修复它

# mysql - 获取带有数字的 UNIX TIME

> ID：13005447
> 
> 赞同：0
> 
> 时间：2012-10-22T05:32:24.657
> 
> 标签：mysql, sql, unix-timestamp

MySQL 查询：

```
SELECT  c.day,
        COUNT(site_id)
FROM    calendar c
        LEFT JOIN
        (
            SELECT *
            FROM   visitors
            WHERE  site_id = 16
        ) d ON  DAYOFMONTH(d.created) = c.day
WHERE c.day BETWEEN DAYOFMONTH('2012-10-01') AND DAYOFMONTH('2012-10-31')
GROUP BY c.day
ORDER BY c.day 
```

我的桌子

```
Calendar

id  | day
---------
1   | 1
2   | 2
3   | 3
...
31  | 31

Visitors

id  | site_id | created
-----------------------------------
1   | 16      | 2012-10-18 11:14:39
2   | 16      | 2012-10-18 11:15:17
3   | 11      | 2012-10-18 11:49:14
4   | 11      | 2012-10-18 11:49:43
5   | 16      | 2012-10-19 11:54:37
6   | 1       | 2012-10-19 05:56:31
7   | 2       | 2012-10-19 05:57:56 
```

我使用上面的查询来检索访问网站的每日结果。该查询在这里解决了我的[问题](https://stackoverflow.com/questions/13003572/getting-data-for-every-single-day-in-sql)。

结果：

```
day | COUNT(*)
-------------
1   |       0
2   |       0
3   |       0
....
18  |       2
19  |       1
...
31  |       0 
```

虽然，现在，我在检索 UNIX_TIMESTAMP 时遇到了问题`day`，我需要用于绘图目的。

如何从`c.day`查询中检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:05:09.660

*编辑：*

```
SELECT
  UNIX_TIMESTAMP('2012-10-01' + INTERVAL c.day - 1 DAY) unix_ts_day,
  COUNT(v.site_id)
FROM
  calendar c
LEFT JOIN (
  SELECT * FROM visitors
    WHERE site_id = 16 AND DATE(created) BETWEEN '2012-10-01' AND '2012-10-31'
  ) v
  ON DAYOFMONTH(v.created) = c.day
GROUP BY
  unix_ts_day 
```

# android - 移动品牌中的Android外部存储

> ID：13005448
> 
> 赞同：4
> 
> 时间：2012-10-22T05:32:27.573
> 
> 标签：android, android-sdcard

我面临着有趣的问题。我发现，三星在其自己的 Android 手机中具有两种存储实现方式。

**第一个：** /sdcard - 是内部存储器，/sdcard/external_sd 实际上是插入的存储卡

**第二：** /storage/sdcard0 - 是内部存储器，/storage/ExtSdCard 实际上是插入的存储卡。

我的应用程序需要将数据存储在 sd 卡中，所以我遇到了问题，如何确定哪个文件夹可能是 sd 卡链接。您知道任何其他 Android 制造商（LG、HTC、Sony）的情况，如何应对外部 SD 卡以及它们在 android 系统中的可见性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:36:20.400

真的很简单。当您考虑您的三星手机时，它是充当您的 SD 卡的内部存储。

如果您要在 SD 卡中保存文件，则必须停止对路径进行硬编码，例如，

```
/mnt/sdcard.. and so. 
```

而是使用， `Environment.getExternalStorageDirectory();`

这将立即返回到您的 SD 卡的路径。

然后从那里添加 `Environment.getExternalStorageDirectory()+File.separator+"your directoryname";`

这适用于并非三星独有的所有品牌。

# ruby - 机械化和台风

> ID：13005454
> 
> 赞同：0
> 
> 时间：2012-10-22T05:32:37.493
> 
> 标签：ruby, mechanize, typhoeus

我将 Typhoeus 与 Hydra 一起使用以发出并行请求。我的最终目标是将台风响应解析为机械化对象。

```
url = "http://example.com/"
hydra = Typhoeus::Hydra.new
agent = Mechanize.new
request = Typhoeus::Request.new(url, :method => :get, :proxy => "#{proxy_host}:#{proxy_port}")
request.on_complete do |response|  #Typhoeus::response object
  body = response.body
  uri = request.parsed_uri
  page = agent.parse(uri, response, body)
end
hydra.queue(request)
hydra.run 
```

agent.parse 方法给了我错误，因为它无法解析 typhoeus 响应对象

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/mechanize-2.5.1/lib/mechanize.rb:1165:in `parse': undefined method `[]' for #<Typhoeus::Response:0x00000012cd9da0> (NoMethodError) 
```

无论如何我可以将 Typhoeus 响应转换为 Net::HTTPResponse 对象吗？或者有没有其他方法可以将 Mechanize 和 Typhoeus 组合在一起？这样，我可以使用 typhoeus 发出并行请求，并使用 Mechanize 库抓取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:06:50.913

1.  我试图从 Typhoeus::Response 创建一个 Net::HTTPResponse(https://github.com/ruby/ruby/blob/trunk/lib/net/http/response.rb)，但没有成功. 调用初始化程序很容易，但设置响应正文或标头却不是。

2.  我研究了机械化，看看是否可以将其更改为使用 Typhoeus 提出请求，但我认为现在不可能。Net/http 真的是硬连线到机械化。我想到了一个机械化-台风适配器，这会很好。

# java - 循环中的 NullPointerException

> ID：13005455
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:32:40.520
> 
> 标签：java, android

我想从通话记录中计算给定时间段内每个联系人的总通话时长，但我在 while 循环中遇到了这个 NullPointerException：

```
Cursor c = cr.query(CallLog.Calls.CONTENT_URI, projection, selection, null, null);
            if(c.moveToFirst()){
                int[] duration = new int[c.getCount()];
                String[] name = new String[c.getCount()];

                do{
                    boolean w = false;
                    int y=0;
                    do{
                        if(name[y].equals("")){
                            name[y]=c.getString(c.getColumnIndex(CallLog.Calls.CACHED_NAME));
                            duration[y]+=Integer.parseInt(c.getString(c.getColumnIndex(CallLog.Calls.DURATION)));
                            w = true;
                        }else if(name[y].equals(c.getString(c.getColumnIndex(CallLog.Calls.CACHED_NAME)))){
                            duration[y]+=Integer.parseInt(c.getString(c.getColumnIndex(CallLog.Calls.DURATION)));
                            w = true;
                        }
                        y++;
                    }while(w);
            } 
```

if 语句中出现错误，其中`if(name[y].equals(""))` 游标投影蚂蚁选择似乎工作正常。

这是我的堆栈跟踪：

```
10-22 07:36:18.429: E/AndroidRuntime(27320): FATAL EXCEPTION: main
10-22 07:36:18.429: E/AndroidRuntime(27320): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dailyreports.ainius/com.dailyreports.ainius.ReportView}: java.lang.NullPointerException
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.os.Looper.loop(Looper.java:123)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread.main(ActivityThread.java:3729)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at java.lang.reflect.Method.invokeNative(Native Method)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at java.lang.reflect.Method.invoke(Method.java:507)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at dalvik.system.NativeStart.main(Native Method)
10-22 07:36:18.429: E/AndroidRuntime(27320): Caused by: java.lang.NullPointerException
10-22 07:36:18.429: E/AndroidRuntime(27320):    at com.dailyreports.ainius.DataProvider.getTotalCallDuration(DataProvider.java:1359)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at com.dailyreports.ainius.DataProvider.getReportData(DataProvider.java:109)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at com.dailyreports.ainius.ReportView.onCreate(ReportView.java:139)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-22 07:36:18.429: E/AndroidRuntime(27320):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-22 07:36:18.429: E/AndroidRuntime(27320):    ... 11 more 
```

我确定它很容易，但我就是想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:37:01.053

```
String[] name = new String[c.getCount()]; 
```

此行将创建一个大小数组，`c.getCount()`但所有索引都将填充`null`.

并且您正在使用索引 0，而没有对其进行初始化。因此，NPE。

您可以将`if`条件更改为以下以避免 NPE，从而在第一次迭代中初始化数组：

```
if(name[y] == null) 
```

如果你能解释你想要达到的目标会更好。我看到你的逻辑有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:36:44.797

如果 name[y] 为 null，则在其上调用诸如“equals()”之类的方法将引发 NPE。通过查看您的代码，我认为您需要将 if 语句更改为

```
if(name[y] == null || name[y].equals("")) 
```

正如 Azodious 所提到的，在初始化数组后，所有条目都将为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:35:32.503

在实际访问 name[y] 之前，检查 index`y`是否在`name`数组范围内。如果存在，那么您可以检查`if`that `index`is中的内容`null`。

```
if(y<name.length() && name[y]!=null)
 { 
   **access name at y index** and do stuffs
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T05:45:37.713

```
Cursor c = cr.query(CallLog.Calls.CONTENT_URI, projection, selection, null, null);
if(c.moveToFirst()){
    if(c.getCount() > 0){ // i add this additional condition
        int[] duration = new int[c.getCount()];
        String[] name = new String[c.getCount()];
        boolean w = false;
        int y=0;
        do{
            if(name[y] != null && name[y].equals("")){
                name[y]=c.getString(c.getColumnIndex(CallLog.Calls.CACHED_NAME));
                duration[y]+=Integer.parseInt(c.getString(c.getColumnIndex(CallLog.Calls.DURATION)));
                w = true;
            }else if(name[y].equals(c.getString(c.getColumnIndex(CallLog.Calls.CACHED_NAME)))){
                duration[y]+=Integer.parseInt(c.getString(c.getColumnIndex(CallLog.Calls.DURATION)));
                w = true;
            }
            y++;
        }while(w);
    }
} 
```

# visual-c++ - 如何跟踪 mfc 应用程序何时关闭？

> ID：13005456
> 
> 赞同：0
> 
> 时间：2012-10-22T05:32:40.757
> 
> 标签：visual-c++, mfc

是否可以跟踪 mfc 应用程序何时终止？我想跟踪我的 mfc 应用程序何时终止，以便在终止时显示任务栏。

```
CWnd* pWnd = CWnd::FindWindow("Shell_TrayWnd", "");
pWnd->ShowWindow(SW_HIDE); 
```

以上代码行用于显示和隐藏任务栏窗口。我想知道是否有可能跟踪任务管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:48:19.743

If it's an MFC application use the `CWinApp::ExitInstance` override to finish application termination cleanup.

If you're looking to write an app to monitor application termination (e.g. proper shutdown or crash) you can use a Mutex. A good example described here:

[Best way to detect an application crash and restart it?](https://stackoverflow.com/questions/78048/best-way-to-detect-an-application-crash-and-restart-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:06:53.680

为什么要隐藏任务栏？隐藏任务栏是完全错误和粗鲁的。为什么？因为**你不拥有它**。任务栏由系统管理，归用户所有；如果用户想要隐藏它，他会自己隐藏它。

就像你不去“隐藏”你不拥有的汽车一样，你也不应该去隐藏你不拥有的窗户。

如果不出意外，如果您的应用程序崩溃，用户就会被搞砸，很可能会被迫注销，然后重新打开以恢复他们的任务栏。

如果您*需要*全屏应用，请使用可用的功能和 API 编写全屏应用。如果您在 VS2010 上并稍后考虑使用在[http://msdn.microsoft.com/en-us/library/cc308980.aspx](http://msdn.microsoft.com/en-us/library/cc308980.aspx)中记录的 CFullScreenImpl 。

或者在 StackOverflow 上查看这个：[如何使用 MFC 创建全屏窗口？](https://stackoverflow.com/questions/1832835/how-to-create-full-screen-window-with-mfc).

快速的 Google 搜索还显示了这个 CodeProject 链接： http: [//www.codeproject.com/Articles/9632/Views-in-Full-Screen-Mode](http://www.codeproject.com/Articles/9632/Views-in-Full-Screen-Mode)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T06:27:45.493

使用 NOTIFYICONDATA 结构和关联的 api 来跟踪

# java - 如何更改默认自定义对话框的边框颜色？

> ID：13005457
> 
> 赞同：2
> 
> 时间：2012-10-22T05:32:46.193
> 
> 标签：java, android, android-intent, android-emulator

如何更改默认自定义对话框的边框颜色？请​​帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:07:07.483

使用`TelephonyManager.getPhoneType()`：

```
TelephonyManager tm = (TelephonyManager)Context.getSystemService(Context.TELEPHONY_SERVICE);
int phoneType = tm.getPhoneType();

// test if phoneType is PHONE_TYPE_GSM or PHONE_TYPE_CDMA 
```

# java - 方法 executeQuery() 不能接受 PreparedStatement 或 CallableStatement 的参数。错误

> ID：13005460
> 
> 赞同：13
> 
> 时间：2012-10-22T05:33:25.097
> 
> 标签：java, sql-server, jakarta-ee, tomcat7

尝试从我的数据库连接和检索数据时出现这种错误。

方法 executeQuery() 不能接受 PreparedStatement 或 CallableStatement 的参数。

我的代码是这样的。

```
String search = request.getParameter("searchstudent");
out.println(search);

String connectionURL = "jdbc:sqlserver://localhost:1433;databaseName=Chingdb;   integratedSecurity=true;";
 Connection connection = null;
 PreparedStatement pstatement = null;
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
 ResultSet rs = null;
int updateQuery = 0;

if(request.getParameter("editstudent")!= null){ 
    try {           
     connection = DriverManager.getConnection(connectionURL, "root", "root");
     String queryString = "SELECT P_ID, lname, fname, mname FROM stu_info Where lname = ?";
     pstatement = connection.prepareStatement(queryString);
     pstatement.setString(1, search);
     rs = pstatement.executeQuery(queryString);
        updateQuery = pstatement.executeUpdate();
        %>
        <TABLE cellpadding="15" border="1" style="background-color: #ffffcc;">
        <%
        while (rs.next()) {
        %>
        <TR>
        <TD><%=rs.getInt(1)%></TD>
        <TD><%=rs.getString(2)%></TD>
        <TD><%=rs.getString(3)%></TD>
        <TD><%=rs.getString(4)%></TD>
        </TR></TABLE>
        <% 

        rs.close();
        pstatement.close();
        connection.close();

        }
        }

    catch(Exception e){
    out.println(e);
    }

   } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T05:39:07.790

你第二次不需要 queryString ，因为你用这个“告诉”preparedStatement 字符串：

```
pstatement = connection.prepareStatement(queryString); 
```

这将是正确的方法：

```
 pstatement = connection.prepareStatement(queryString);
 pstatement.setString(1, search);
 rs = pstatement.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:37:01.437

尝试

```
 rs = pstatement.executeQuery(); 
```

您在创建preparedstatement时已经指定了查询

```
 pstatement = connection.prepareStatement(queryString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T06:55:54.167

只需`{ }`为您的 querystring.ie添加

```
String queryString = "{SELECT P_ID, lname, fname, mname FROM stu_info Where lname = ?}"; 
```

`execute()`并且`executeUpdate()`都可以工作。`executeQuery()`仅当您的过程返回结果集时才有效。

# javascript - 使用 JCrop 裁剪多张图片

> ID：13005463
> 
> 赞同：0
> 
> 时间：2012-10-22T05:33:36.690
> 
> 标签：javascript, jquery, arrays, jcrop

我正在使用[JCrop](http://deepliquid.com/content/Jcrop.html)来裁剪图像。JCrop 是一个图像裁剪插件。一个页面包含 3 个要裁剪的图像。

这就是我为 jcrop 初始化数组的方式：

```
var jcrop = []; 
```

然后我有：

```
$('img.picture').each(function(){
    imgcrop = $(this);
    imgcrop.Jcrop({
        bgColor: 'white',
        aspectRatio: 1
    }, function(){
        jcrop.push(this);
        });
}); 
```

问题是，当我拥有`jcrop[1].setImage( '/image/no-picture.jpg' );`它时，有时会更改第一张或第三张图像。

```
$('div.deletePhoto a').bind('click', function(e){
    e.preventDefault();
    var index =$('div.deletePhoto').index($(this).parent());

    $.post('/deletePicture', function(data){
        alert(index);
        jcrop[index].setImage( '/image/no-picture.jpg' );
        jcrop[index].disable();
    });
}); 
```

变量`index`可以，但`jcrop[index]`不是。

HTML：

```
 <!-- pictures -->
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div>
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div>
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:39:45.133

```
$('img.picture').each(function(){
    imgcrop = $(this);
    imgcrop.Jcrop({
        bgColor: 'white',
        aspectRatio: 1
    }, function(){

        jcrop.push($(this)); //the $(this) is important

        });
}); 
```

和

```
$('div.deletePhoto a').bind('click', function(e){
    e.preventDefault();

    var index = $('div.deletePhoto').index($(this).parent()); //return it to this

    $.post('/deletePicture', function(data){
        alert(jcrop[index].attr('id'));
        jcrop[index].setImage( '/image/no-picture.jpg' );
        jcrop[index].disable();
    });
}); 
```

html:

```
 <!-- pictures -->
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" id="img_1" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div>
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" id="img_2" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div>
    <div class="blu_3">
        <div class="imgWrapper">
            <img class="blu_10 picture" id="img_3" />
            <div class="delete deletePhoto"><a href="#" title="delete">[ x ]</a></div>
        </div>
        <input class="crop" type="button" value="crop" />
    </div> 
```

所以我为每个img标签设置了一个id =“img_1”，id =“img_2”，img =“img_3”，上面的代码检查了它并且它工作正常，每个选择的图像都是正确的id ..

# javascript - 使用变量重新加载网页

> ID：13005465
> 
> 赞同：0
> 
> 时间：2012-10-22T05:33:47.837
> 
> 标签：javascript, jquery

我正在尝试使用 location.reload() 重新加载网页。我也想将变量传递给它。我尝试了以下选项，但没有成功。请帮忙？

```
 location.reload(window.location.replace=("success.jsp?abc="+<%=processId%>)); 
```

我也尝试直接使用下面的代码并发送变量值。但是重新加载页面后，它并没有将网格值放在页面上。如果我直接使用 location.reload() 重新加载，它可以工作。但是，它没有传递变量。

window.location.replace=("grid.jsp?procid="+<%=processId%>)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:35:05.547

您可以通过类似的方式在页面重新加载之间保持数据`window.localStorage`，`window.sessionStorage`或将值存储在 cookie 中。

[`Reference`](https://developer.mozilla.org/en-US/docs/DOM/Storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:00:28.103

如果您希望以简单的跨浏览器兼容方式执行此操作，我可以想到两个选项：

1.  使用 cookie（客户端/Javascript）

    使用 cookie 在浏览器中存储您需要的任何信息。如今，大多数现代浏览器和大多数用户都允许使用 cookie，但仍有一些不允许。[这里](http://www.thesitewizard.com/javascripts/cookies.shtml)有例子。

2.  使用服务器端会话（服务器端/Java）

    我可以看到你正在使用 JSP。我不太了解Java，但是[这个资源](http://www.jsptut.com/sessions.jsp)似乎包含在会话中存储服务器端变量的所有信息。存储它们后，您可以在下一页加载时检查它们是否存在并执行您需要的任何操作。

# java - GregorianCalendar.set(field, value + 1) 是否与 GregorianCalendar.add(field, 1) 相同

> ID：13005467
> 
> 赞同：1
> 
> 时间：2012-10-22T05:34:16.217
> 
> 标签：java, gregorian-calendar

对于以下代码段

```
GregorianCalendar a = new GregorianCalendar(2009, 11, 10);
System.out.println(a.getTime()); // Thu Dec 10 00:00:00 ICT 2009
a.add(Calendar.MONTH, 1);
System.out.println(a.getTime()); // Sun Jan 10 00:00:00 ICT 2010 
```

当我改变这条线

```
a.add(Calendar.MONTH, 1); 
```

进入这一行

```
a.set(Calendar.MONTH, a.get(Calendar.MONTH) + 1); 
```

它返回相同的结果

```
// Sun Jan 10 00:00:00 ICT 2010 
```

如果是 2009 年 12 月，我想将其设置为月份 + 1（即一月），现在月份应该是 2009 年 1 月。但它是 2010 年 1 月。

那么，在这种情况下，set 和 add 有什么区别呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:46:11.377

[`Calendar#add(int field, int amount)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#add%28int,%20int%29)将日历增加指定的数量。在你的情况下，它增加了一个月。

[`Calentar#set(int field, int value)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#set%28int,%20int%29)将字段设置为指定值，而其他字段保持不变。在您的情况下，它将月份设置为一月。

另见：

[`Calendar#roll(int field, int value)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html#roll%28int,%20int%29)按指定值递增指定字段，但保持较高字段（在您的情况下为年份）不变（2010 年 10 月 + 4 个月 => 2010 年 2 月）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:36:48.673

如果您已设置默认值，它将为当前日历添加值。（在您的情况下）

如果要设置月份值，可以在设置日期之前将其设置如下。

`Calendar cal = GregorianCalendar.getInstance(); cal.set(Calendar.MONTH, 0);`

将返回月份为一月

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:41:53.713

`set`当月份比十二月多一时，似乎实际上是在增加年份：

在下面的

```
a.set(Calendar.MONTH, a.get(Calendar.MONTH) + 1); 
```

`a.get(Calendar.MONTH)`是 12 月，当您在其上添加 1 并将结果设置为日历对象时，它在逻辑上实际上是明年的 1 月，因此在这种情况下也可以更改 year 的值。

否则，日历实例将处于非法状态，月份的值无效。

您可以查看以下代码：

```
Calendar cal = new GregorianCalendar(2009, Calendar.DECEMBER, 10);
System.out.println(cal.getTime());
cal.set(Calendar.MONTH, Calendar.DECEMBER + 1);
System.out.println(cal.getTime());
cal.set(Calendar.MONTH, Calendar.JANUARY + 5);
System.out.println(cal.getTime());
cal.set(Calendar.MONTH, Calendar.DECEMBER + 13);
System.out.println(cal.getTime());
cal.set(Calendar.MONTH, -3);
System.out.println(cal.getTime()); 
```

输出是：

```
2009 年 12 月 10 日星期四 00:00:00 CST
2010 年 1 月 10 日星期日 00:00:00 CST
2010 年 6 月 10 日星期四 00:00:00 CDT
2012 年 1 月 10 日星期二 00:00:00 CST
2011 年 10 月 10 日星期一 00:00:00 CDT

```

因此，如果设置的月份值超出范围，则更改年份的值。

# bash - echo -e 反斜杠转义在 sh 中不受尊重

> ID：13005474
> 
> 赞同：5
> 
> 时间：2012-10-22T05:35:17.680
> 
> 标签：bash, ubuntu, centos, echo, sh

我有一个希望在不同 Linux 服务器上运行的 shell 脚本。当我使用 -e 选项运行 echo 命令并在字符串中转义字符时，它不会在 Ubuntu 12.04 或 Ubuntu 11.04 的 sh shell 上按预期执行。我希望脚本在我们使用的两台服务器上运行 CentOS 5.3 和 Ubuntu 12.04。当我在两台服务器上的 bash 中运行以下命令时，会产生预期的输出：

```
$ echo -e "line1\nline2"
line1
line2 
```

当我在 CentOS 机器上的 sh 中运行相同的命令时，也会产生正确的输出。但是当我在 Ubuntu 12.04 或 11.04 的 sh 中运行命令时，会产生以下输出：

```
$ echo -e "line1\nline2"
-e line1
line2 
```

有趣的是，如果我在 Ubuntu 上的 sh 中运行以下命令，它会自动解释转义字符。

```
$ echo "line1\nline2"
line1
line2 
```

该脚本需要在 sh shell 中运行，并且应该可以跨不同的机器移植。任何解决方案。我也非常感谢一些文档的链接，这些文档解释了这些事情发生的原因或方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T05:44:20.890

Ubuntu 中的`sh`外壳是`dash`. 它的内置回显没有`-e`选项（因此它只是回显它，如您所见），或者更确切地说，它没有办法关闭转义行为。

改为使用`/bin/echo`。

要检查您正在使用的外壳，请尝试`echo $SHELL`

```
$ echo $SHELL
/bin/bash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:51:59.317

`echo`实现之间完全不一致；如果您需要非平凡应用程序的一致行为（例如转义序列），`printf`请改用（并记住明确添加最终的 \n ）：

```
$ printf "line1\nline2\n"
line1
line2 
```

# android - Android MapActivity“无法获取连接工厂客户端”

> ID：13005475
> 
> 赞同：0
> 
> 时间：2012-10-22T05:35:17.810
> 
> 标签：android, map

> **可能重复：**
> [无法获取连接工厂客户端](https://stackoverflow.com/questions/2199403/couldnt-get-connection-factory-client)

我尝试使用 Android MapActivity，所以我通过此链接从我的 Debug.keystore MD5 创建了我的 API 密钥 [https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

然后我在我的清单中设置了这行代码：

应用之子

```
<uses-library android:name="com.google.android.maps" /> 
```

像这样设置我的权限

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" /> 
```

并使用我的 api 密钥像这样设置 MapView

```
<com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:apiKey="MY API KEY"
        android:clickable="true" /> 
```

在 Java 文件 MapActivity 中，我从示例中编写了如下代码：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);
if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        onLocationChanged(location);} 
```

我的代码过去可以正常工作。我可以通过overlayItem 设置我的定位点，但是在我回来查看我的代码并且对我的MapActivity 什么都不做之后，它不再起作用了。我的 LogCat 显示我喜欢`MapActivity "Couldn't get connection factory client"`

我进入 /.android 文件夹并删除了我的 debug.keystore 并从中再次生成我的新 API 密钥，但它仍然无法正常工作。

有谁知道如何解决这个问题？

编辑：更多信息，位置始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:30:33.687

不确定这是否是一个解决方案，但它现在对我有用。我刚刚更改了 AndroidManifest 文件中的用户权限顺序

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

至

```
 <uses-permission android:name="android.permission.INTERNET" />
     <uses-permission android:name="android.permission.ACCESS_LOCATION" />
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
     <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" /> 
```

动起来

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

到顶部。

编辑：天哪，问题又回来了！！这不是解决方案。

# python - 蓝图中的 Flask render_template 上下文为 None

> ID：13005476
> 
> 赞同：2
> 
> 时间：2012-10-22T05:35:17.960
> 
> 标签：python, flask

我对 Flask 比较陌生，但我已经发现需要使用蓝图。但是，在我的蓝图中，我试图渲染一个模板，但出现错误。

当连接为 WSGI 应用程序（在 Dreamhost 上）时，render_template 函数返回此错误：

```
File ".../app/ui/__init__.py", line 95, in index
response = make_response(render_template('index.html', **data))

File ".../flask/templating.py", line 123, in render_template
ctx.app.update_template_context(context)

AttributeError: 'NoneType' object has no attribute 'app' 
```

但是，当我在调试模式下直接调用 app.py 时，它可以完美运行！（以下）

```
python app/app.py 
```

在 app.py 中：

```
if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0') 
```

**编辑：**渲染模板：

```
@ui_blueprint.route('/', methods=['GET'])
@ui_blueprint.route('/home', methods=['GET'])
def index():
    data = {
        'title': 'Index'
    }
    response = make_response(render_template('index.html', **data))
    return response 
```

**编辑2：** `ctx`是：

*   `None`在 WSGI 应用案例中
*   `<RequestContext 'http://aaa.bbb.com:5000/' [GET] of __init__>`在直接调用的情况下

有什么想法可以解决这个错误吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:28:02.107

确保您正在导入所有正确的模块：

`from flask import Flask, render_template, make_response, request, Response`

您可能想为您的视图创建一个包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:57:57.620

设置 Flask 时，请确保**所有依赖项都已正确安装**。这就是这种情况下的问题。

如果在 mod_wsgi 上运行，还要确保任何读取或写入都指向正确的位置；否则，应用程序在使用运行时可以工作，`app.run()`但在使用 Apache 时路径会发生变化。

# ruby-on-rails - autosuggest_text_field 将对象标题作为值

> ID：13005480
> 
> 赞同：1
> 
> 时间：2012-10-22T05:35:38.233
> 
> 标签：ruby-on-rails

我`sunspot_autocomplete`用来创建一个自动建议字段。当前代码如下所示。

```
= autosuggest_text_field('dvd', 'title', search_index_path, 'dvd_title') 
```

问题是，由于此搜索输入放置在应用程序文件的标题上，因此在访问 dvd 页面时，我看到它的标题作为输入值放置。

有什么办法可以防止这种情况发生吗？

# algorithm - 如何使用 Stack 的 push 和 pop 操作组合两个字符串？

> ID：13005483
> 
> 赞同：4
> 
> 时间：2012-10-22T05:35:55.470
> 
> 标签：algorithm, data-structures

如果我有两个字符串说`str1 & str2`

```
str1 = I to cricket chess 

str2 = like play and 
```

我希望输出为：

“我喜欢打板球和下棋”

这可以使用`push`和`pop`的操作来完成吗`stack`？算法应该独立于编程语言。上面提到的字符串可以是任意长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:48:06.093

这很简单。您只需要将`push`第一个字符串中的第`push`一个单词放入堆栈，然后将第二个字符串中的第一个单词放入，然后对第二个单词执行相同操作，然后对第三个单词执行相同操作，等等。

之后，您需要`pop`将堆栈中的每个元素并将`push`其移至第二个堆栈，以反转序列。然后，您只需`pop`将第二个堆栈中的每个元素添加到结果字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:46:19.153

根据您给出的信息，您必须做出一些假设。

假设：

1.  句子中的单词在两个字符串之间交错
2.  一个字符串最多比另一个字符串长一个单词
3.  空格是单词的分隔符。

该算法将是这样的：

1.  对于每个字符串：
2.  在空格字符上将字符串拆分为一个数组
3.  找到长度最长的数组
4.  从最长长度的数组开始（调用这个arrayB，另一个arrayO）
5.  从数组的末尾，
6.  将 arrayB 的元素压入堆栈，
7.  将 arrayO 的元素压入堆栈，
8.  重复直到每个数组中的所有元素都被推送，在两个数组之间交替。
9.  完成后，将堆栈弹出到数组中，
10.  将数组连接成一个字符串，使用空格作为分隔符。

# sql - 在 SQL Server 2005 中查找表中缺失的数字

> ID：13005484
> 
> 赞同：-5
> 
> 时间：2012-10-22T05:35:56.220
> 
> 标签：sql, sql-server, database, tsql, sql-server-2005

我将 int 数据类型列为否，并希望找到表中缺少的那些编号。

例如：1,2,3,7,8,9

答案 = 4,5,6

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:06:48.890

就在普通的sql中：

```
SELECT a.id+1 AS start, MIN(b.id) - 1 AS end
FROM sequence AS a, sequence AS b
WHERE a.id < b.id
GROUP BY a.id
HAVING start < MIN(b.id) 
```

你可以在[Sqlfiddle上试试](http://sqlfiddle.com/#!2/93f18/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:48:30.367

尝试关注 -

```
DECLARE @TABLE TABLE (NUM INT)

INSERT INTO @TABLE
VALUES
 (1)
,(2)
,(3)
,(7)
,(8)
,(9)

DECLARE @MIN INT
DECLARE @MAX INT

SELECT @MIN = MIN(NUM) + 1, @MAX = MAX(NUM) - 1 FROM @TABLE

CREATE TABLE #TMP (FIELD_NO INT)
WHILE @MIN <= @MAX
BEGIN
   IF NOT EXISTS (SELECT * FROM @TABLE WHERE NUM = @MIN)
      INSERT INTO #TMP (FIELD_NO) VALUES (@MIN)
   SET @MIN = @MIN + 1
END

SELECT * FROM #TMP

DROP TABLE #TMP 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:06:26.603

您可以使用[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers)

在这里，我使用`master..spt_values`具有范围的`0-2047`. 您可以将其替换为您自己的具有足够值的数字表。

```
declare @T table
(
  Number int
);

insert into @T values (1),(2),(3),(7),(8),(9);

with MinMax as
(
  select min(Number) as MinNumber,
         max(Number) as MaxNumber
  from @T
),
Number as
(
  select N.Number
  from master..spt_values as N
    inner join MinMax as MM
      on N.number between MM.MinNumber and MM.MaxNumber
  where N.type = 'P' 
)
select Number
from Number as N
where not exists
  (
    select *
    from @T as T
    where T.Number = N.number
  )
order by N.number 
```

# ruby-on-rails - 如何在 Ruby on Rails 3 项目中将 YAML 数据导入数据库？

> ID：13005488
> 
> 赞同：1
> 
> 时间：2012-10-22T05:36:19.227
> 
> 标签：ruby-on-rails, database, import, yaml

我现在正在处理一个遗留的 Ruby on Rails 项目。我发现这个项目的前任所有者将 Sqlite3 数据表中的数据导出到单独的 .yml 文件中。现在我想将这些数据从 .yml 文件导入到它们对应的数据表中，但不知道怎么做。问题可以描述为：

1.  在 Ruby on Rails 3 项目根文件夹的“db”文件夹下，有一个“备份”文件夹，用于存储所有 .yml 文件。

    （Rails 3 根文件夹）=>db=>备份=>（所有 *.yml 文件）

2.  每个 .yml 文件对应数据库中的一个数据表。例如，假设我有一个“users”表，那么我有一个“users.yml”文件，其中存储了几个用户数据作为种子。

3.  .yml 文件内容如下：

    名称：用户1

    标题：SE1

    地点：loc1

    名称：用户2

    标题：SE2

    地点：loc2

如果有人可以帮助解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:57:52.813

他很可能使用了 yaml_db gem。您可以使用

```
gem install yaml_db

rake db:data:load_dir dir='backup' 
```

如果是这种情况，请加载您的数据。

# .net - 如何提取使用强名称工具（sn.exe）创建的私钥？

> ID：13005491
> 
> 赞同：5
> 
> 时间：2012-10-22T05:36:36.333
> 
> 标签：.net, key, strongname

Sn.exe 提供用于密钥管理、签名生成和签名验证的选项。

要创建公钥和私钥对，请使用以下命令 -

```
sn -k keyPair.snk 
```

可以使用以下方法提取公钥 -

```
sn -p keyPair.snk publicKey.snk 
```

我想查看生成的对的对应**私钥**，

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T03:47:09.907

SN.exe 实用程序不提供任何显示私钥的方法。该名称本身表示它是私钥。每个公钥对其对应的私钥对都是唯一的。如果有可能知道私钥，任何人都可以侵犯您的 .Net 程序集的内容，那么签署 .Net 程序集以保护您的程序集内容免遭恶意篡改的整个动机就会丢失。

# iphone - 如何在 iOS 中将 Google Places 自动完成请求设置为 UITextField

> ID：13005494
> 
> 赞同：1
> 
> 时间：2012-10-22T05:36:45.407
> 
> 标签：iphone, ios, google-maps-api-3

我是 iOS 编程的新手。我的要求是将 google 地方自动完成请求设置为`UITextField`. 我写的代码如下

```
NSString *urlPath = [NSString stringWithFormat:@"/maps/api/place/autocomplete/json?input=%@&types=geocode&language=en-EN&sensor=false",string];
NSURL *url = [[NSURL alloc]initWithScheme:@"http" host:@"maps.googleapis.com" path:urlPath];
NSLog(@"url is:::%@",url);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
[request setURL:url];
[request setHTTPMethod:@"POST"];

NSURLResponse *response ;
NSError *error;
NSData *data;
data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSLog(@"data is:::%@",data);

NSMutableDictionary *jsonDict= (NSMutableDictionary*)[NSJSONSerialization  JSONObjectWithData:data options:kNilOptions error:&error];
 NSLog(@"jsonDict is:%@",jsonDict); 
```

但它给了空。你能告诉我我哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-23T04:12:03.943

试试下面的 Swift 代码：-

```
import UIKit
import GooglePlaces

class TableViewController: UIViewController, UITableViewDataSource, UITableViewDelegate {

@IBOutlet weak var txtField: UITextField!
@IBOutlet weak var tableView: UITableView!

var tableData = [GMSAutocompletePrediction]()

var fetcher: GMSAutocompleteFetcher?

override func viewDidLoad() {
    super.viewDidLoad()

    self.view.backgroundColor = UIColor.white
    self.edgesForExtendedLayout = []

    let nsBoundsCorner = CLLocationCoordinate2D(latitude: 20.5937, longitude: 78.9629)

    let bounds = GMSCoordinateBounds(coordinate: nsBoundsCorner, coordinate: nsBoundsCorner)

    let filter = GMSAutocompleteFilter()
    filter.type = .establishment

    fetcher  = GMSAutocompleteFetcher(bounds: bounds, filter: filter)
    fetcher?.delegate = self

    txtField?.addTarget(self, action: #selector(textFieldDidChange(textField:)),for: .editingChanged)

    tableView.delegate = self
    tableView.dataSource = self

    self.tableView.reloadData()

    // Do any additional setup after loading the view.
}

@objc func textFieldDidChange(textField: UITextField) {
        fetcher?.sourceTextHasChanged(txtField.text!)
    }
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {

    return tableData.count
}

func numberOfSections(in tableView: UITableView) -> Int {
    return 1
}
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

    var section = indexPath.section
    var row = indexPath.row

    let cell1 : UITableViewCell = UITableViewCell(style: UITableViewCellStyle.default, reuseIdentifier: "cell1")

    cell1.selectionStyle = UITableViewCellSelectionStyle.none
    cell1.backgroundColor = UIColor.clear
    cell1.contentView.backgroundColor = UIColor.clear
    cell1.textLabel?.textAlignment = NSTextAlignment.left
    cell1.textLabel?.textColor = UIColor.black
    cell1.textLabel?.font = UIFont.systemFont(ofSize: 14.0)

    cell1.textLabel?.text = tableData[indexPath.row].attributedFullText.string
    return cell1
}

 func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    txtField.text = tableData[indexPath.row].attributedFullText.string
    getLatLongFromAutocompletePrediction(prediction:tableData[indexPath.row])
}

 func getLatLongFromAutocompletePrediction(prediction:GMSAutocompletePrediction){

    let placeClient = GMSPlacesClient()

    placeClient.lookUpPlaceID(prediction.placeID!) { (place, error) -> Void in
        if let error = error {
            //show error
            return
        }

        if let place = place {
            place.coordinate.longitude //longitude 
            place.coordinate.latitude //latitude
        } else {
        //show error
        }
    }
}
}

extension TableViewController: GMSAutocompleteFetcherDelegate {

func didAutocomplete(with predictions: [GMSAutocompletePrediction]) {

    tableData.removeAll()

    for prediction in predictions{

        tableData.append(prediction)

    }
    tableView.reloadData()
}

func didFailAutocompleteWithError(_ error: Error) {
    print(error.localizedDescription)
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:16:20.833

您将需要密钥来请求 Google Places API。请参阅根据您的要求的[SPGooglePlacesAutocomplete链接。](https://github.com/spoletto/SPGooglePlacesAutocomplete)

**编辑**：请参阅[文档](https://developers.google.com/places/documentation/autocomplete#Authentication)。另请参阅[如何注册 Google Places](https://developers.google.com/places/documentation/#Authentication)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T11:35:11.757

希望[MVAutocompletePlaceSearchTextField](https://github.com/mrugrajsinh/MVAutocompletePlaceSearchTextField)会有所帮助

在 iOS 中实现自动完成位置搜索的一个非常简单的插入式控件

# azure - 可以在没有模拟器的情况下运行 Azure 缓存预览吗？

> ID：13005495
> 
> 赞同：4
> 
> 时间：2012-10-22T05:36:50.167
> 
> 标签：azure, azure-caching

我们在应用程序中使用了一些 Azure 特定功能（主要是 blob 存储）。通过 Blob 存储，我们想出了如何在不需要缓慢的 Azure 模拟器的情况下运行它。

我们现在正在试验 Azure 缓存预览版。它做了一些非常酷的事情，并且可以帮助解决我对我们的一些功能的一些性能问题，但是如果没有它在模拟器或 Azure 生产环境中运行，我还没有让它工作。

那么，有什么已知的方法可以让它自己工作吗？必须在模拟器中运行我们的应用程序才能完成任何事情是一种破坏交易，特别是对于我们的一些开发人员在没有固态驱动器的机器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:11:29.553

As of now, Azure Cache cannot be run locally without the devfabric emulator. Although the devfabric emulator adds to load time it helps evaluate the caching service in a manner that is uniform to the cloud and helps avoid surprises. The caching service uses a number of Azure environment features for parity on cloud and on-prem for testing.

If you are hitting issues with respect to Azure cache on devfabric times, could you tell me the extra load time added ? Use the dev config store for a faster load time, once your app loads up it shouldnt take up much extra time.Also considering removing logging etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:36:08.997

Azure AppFabric 缓存是[Windows AppFabric 缓存](http://msdn.microsoft.com/en-us/library/ff383731%28v=azure.10%29.aspx)的一种实现，因此如果你想在没有模拟器的情况下运行缓存，你可以尝试在本地服务器上安装它。有[一些区别](http://msdn.microsoft.com/en-us/library/windowsazure/gg185678.aspx)，但是当您使用缓存预览而不是共享缓存时，这应该是一个太大的问题。

# c# - 使用表单身份验证获取 Windows 用户名的更好方法？

> ID：13005501
> 
> 赞同：2
> 
> 时间：2012-10-22T05:37:40.163
> 
> 标签：c#, asp.net, forms-authentication, windows-authentication

我继承了一个使用表单身份验证的项目，但最近的一个功能请求要求我获取某些用户的 Windows 用户名。

这是一个使用表单身份验证的网站（我不想更改这一点，此时工作量太大）但我有一个功能请求，允许我们的内部用户更轻松地登录（通常无需输入他们的密码或用户名）。

我当前的方法是可怕的，它涉及检查 IP 地址以查看它们是否从我们的一个 IP 连接，如果是，则将它们重定向到使用 Windows 身份验证的单独项目，然后将它们重定向回原始页面包含他们用户名的查询字符串（如果我被迫继续使用这种方法，我可能需要对其进行加密，尽管它仍然没有我想要的那么安全）。

我可以在我的应用程序中相对轻松地执行 windows 身份验证，但困难的部分是获取 windows 用户名。我不知道该怎么做，因此我的方法很丑。

任何帮助将不胜感激。

编辑：我的辅助应用程序只是这样做：

```
string username = HttpContext.Current.User.Identity.Name;
string retpath = Request.QueryString["retpath"];
Response.Redirect("http://" + retpath + "?id=" + username); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:09:46.733

这篇文章包含了答案，（感谢 vinodpthmn）： http: [//msdn.microsoft.com/en-us/library/ms972958.aspx](http://msdn.microsoft.com/en-us/library/ms972958.aspx) 我在研究中找到了这篇文章的链接，但没有一个有效！很高兴我终于能够阅读并解决我的问题。

正如我所提到的，我只需要获取客户端的 windows 用户名，但结果证明这很麻烦，幸好实际的解决方案相对简单。

首先，您需要创建一个额外的登录页面（我称为 winlogin.aspx）并将其设置为 Web.Config 文件中的默认登录页面，如下所示：

```
<authentication mode="Forms">
      <forms name="something" defaultUrl="default.aspx" loginUrl="winlogin.aspx" protection="All" slidingExpiration="true" timeout="90"/>
    </authentication> 
```

在 winlogin.aspx.cs 文件中，您可以在其中验证 Windows 用户并使用

```
FormsAuthentication.RedirectFromLoginPage(username, false/true); 
```

将他们重定向到他们要去的任何地方。实际的 winlogin.aspx 页面应该是空白的，用户永远不会看到它。

您需要为下一部分发布到您的测试 Web 服务器：您在 IIS 管理器中访问 winlogin.aspx 的文件属性并将 WindowsAuthentication 设置为 true 并将 Anonymous Authentication 设置为 false。您还需要创建一个自定义的 401 错误页面指针（我的指向我的旧 Login.aspx 页面）。

可以使用 Windows 身份验证登录的用户将这样做，其他人将被重定向到旧的登录页面。

瞧！

但是有几个问题，您丢失了返回 URL（您不能在指向自定义 401 错误页面的链接中使用“=”，因此无法解析任何内容）因此您可能希望在有人时设置 cookie被重定向到 winlogin 页面并访问表单登录页面中的 cookie 以适当地重定向用户。

如果有人有任何问题，我建议阅读上面链接的文章，或者随时在这里提问。

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T05:52:32.110

您可以使用目录服务

```
PrincipalContext pc = null;
UserPrincipal principal = null;
var username = User.Identity.Name;
pc = new PrincipalContext(ContextType.Domain, "give your domain name here");
principal = UserPrincipal.FindByIdentity(pc, userName);
var firstName = principal.GivenName ?? string.Empty;
var lastName = principal.Surname ?? string.Empty; 
```

请为 System.DirectoryServices.AccountManagement 添加参考

# c# - 使用 Jquery 填充的 Drowdownlist 在按钮单击时为空

> ID：13005502
> 
> 赞同：0
> 
> 时间：2012-10-22T05:37:41.320
> 
> 标签：c#, jquery, rest, postback

我有一个 html 选择下拉列表，我使用 jquery 填充数据。我将 runat="server" 添加到选择中，以便我可以通过编程方式访问它。但是，在提交页面时，下拉列表中没有列表项。是否有一个原因。

这是 Jquery 调用

```
$(window).load(function () {                
         getListDepartments();  // method call to rest service, and it populates correctly

     }
 ); 
```

aspx

```
// getDepartmentManagers() populates ddlDeparmentManagers with names using jquery
    <select style="display: block;" id="ddlDepartments" class="eight" runat="server" onchange="getDepartmentManagers()">
    </select>

        <select style="display: block;" id="ddlDeparmentManagers" class="eight" runat="server">
        </select> 
```

C＃

```
protected void lbSearch_Click(object sender, EventArgs e)
{

    grdDepartmentEmployees.DataSource = service.FindListBySearch(ddlDepartments.Value, ddlDeparmentManagers.Value);
    grdDepartmentEmployees.DataBind();
} 
```

我遇到的问题是，当我运行上面的 c# 方法时，两个下拉列表似乎都是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:34:01.970

您可以尝试访问下拉列表的值，如下所示：

```
string department = Page.Request.Form["ddlDepartments"].ToString();
string manager = Page.Request.Form["ddlDeparmentManagers"].ToString();

grdDepartmentEmployees.DataSource = service.FindListBySearch(department, manager);                    
grdDepartmentEmployees.DataBind(); 
```

请注意，以这种方式检索值将为您提供`value`所选项目的 - 取决于列表的填充方式，这*可能*与下拉列表中显示的文本不同。

如果值和文本不同，并且您确实需要所选项目的文本，那么您将需要做一些更复杂的事情：

将两个隐藏字段添加到您的页面（我们将使用它们来存储选择）：

```
<asp:HiddenField ID="SelectedDepartmentHiddenField" runat="server" />
<asp:HiddenField ID="DepartmentManagerHiddenField" runat="server" /> 
```

在你的`getDepartmentManagers`方法中：

```
$('#SelectedDepartmentHiddenField').val($('#SelectedDepartmentHiddenField').val()); 
```

处理列表的`onchange`事件`ddlDeparmentManagers`：

```
<select style="display: block;" id="ddlDeparmentManagers"
    class="eight" runat="server" onchange="departmentManagerChange()">

function departmentManagerChange() {
    $('#DepartmentManagerHiddenField').val($('#ddlDeparmentManagers').val());
} 
```

然后在你的`lbSearch_Click`方法中：

```
grdDepartmentEmployees.DataSource =
    service.FindListBySearch(SelectedDepartmentHiddenField.Value,
        DepartmentManagerHiddenField.Value);                    
grdDepartmentEmployees.DataBind(); 
```

请注意，无论使用哪种方法，您都不需要`runat="server"`下拉列表中的标签。

# ajax - Apache myfaces 在处理 ajax 事件之前呈现数据表

> ID：13005503
> 
> 赞同：0
> 
> 时间：2012-10-22T05:37:52.360
> 
> 标签：ajax, jsf, datatable, myfaces, selectonemenu

我有一个 selectOneMenu，它控制数据表中应该显示的内容。代码如下（我已经删除了所有不必要的人员）：

```
<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
  <ui:define name="content">
    <br />
    <h:form id="menuform">

      <p:selectOneMenu value="#{envMenuBean.currentEnvName}">
        <f:selectItems value="#{envMenuBean.envs}" var="env" itemLabel="#{env.name}" itemValue="#{env.name}" />
        <p:ajax event="change" update="currentEnvoutput,contentpanel" listener="#{envMenuBean.envChange}" />
      </p:selectOneMenu>

      <h:outputLabel value="Current Selection: " />
      <h:outputText id="currentEnvoutput" style="font-weight:bold" value="#{envMenuBean.currentEnvName}"></h:outputText>

      <br />
      <p:panel id="contentpanel">
        <div id="contentdiv">
          <p:dataTable id="gcfiletable" var="row" value="#{gCSelectionBean.dataTableDTO.serverListRows}">
            <p:column>
              <f:facet name="header">
                <h:outputText value="Server Names" />
              </f:facet>
              <h:outputText value="#{row.serverName}" />
            </p:column>
            <p:columns value="#{gCSelectionBean.dataTableDTO.machineNamesList}" var="columnName" columnIndexVar="colIndex">
              <f:facet name="header">  
                #{columnName}  
              </f:facet>
            </p:columns>
          </p:dataTable>
        </div>
      </p:panel>

    </h:form>
  </ui:define>
</ui:composition> 
```

envMenuBean.envChange 代码非常简单：

```
@ManagedBean
@SessionScoped
public class EnvMenuBean {
  private String currentEnvName;    

  public void envChange(AjaxBehaviorEvent event) {
    String newValue = (String)((UIOutput)event.getSource()).getValue();
    currentEnvName = newValue;
  }
} 
```

数据表内容在 gCSelectionBean 类中生成：

```
@ManagedBean
@SessionScoped
public class GCSelectionBean {
  private GCInstanceDataTableDTO dataTableDTO;  
  String currentEnvName;

  public GCInstanceDataTableDTO getDataTableDTO() {
    FacesContext fc = FacesContext.getCurrentInstance();
    Application app = fc.getApplication();
    ExpressionFactory exp = app.getExpressionFactory();

    ValueExpression currEnvNameMenuBeanEL = exp.createValueExpression(fc.getELContext(), "#{envMenuBean.currentEnvName}", String.class);
    String currEnvNameMenuBean = (String) currEnvNameMenuBeanEL.getValue(fc.getELContext());    

    ApplicationConfigs gcReportConfigs = GetAppConfigs.getInstance().getAppConfigs();
    for (Environment env : gcReportConfigs.getEnvs()) {
      if (env.getName().equalsIgnoreCase(currEnvNameMenuBean)) {         
        dataTableDTO = new GCInstanceDataTableDTO(env);
        currentEnvName = currEnvNameMenuBean;
        break;
      }
    }

    return dataTableDTO;
  }  
} 
```

然而代码

```
 ValueExpression currEnvNameMenuBeanEL = exp.createValueExpression(fc.getELContext(), "#{envMenuBean.currentEnvName}", String.class);
    String currEnvNameMenuBean = (String) currEnvNameMenuBeanEL.getValue(fc.getELContext()); 
```

给了我更改前的旧 selectOneMenu 值，这使我的数据表仍然显示旧表值。但是

```
<h:outputText id="currentEnvoutput" style="font-weight:bold" value="#{envMenuBean.currentEnvName}"></h:outputText> 
```

可以显示正确的新值。

这让我相信 myfaces 在处理 ajax 更改事件之前首先呈现表格。当我将 JSF2.0 实现从 myfaces 更改为 Glassfish 时，相同的代码运行良好。

有没有人遇到过同样的问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:58:46.253

实际上更新`currentEnvName`的值应该出现在

```
public void envChange(AjaxBehaviorEvent event) {
    System.out.println(currentEnvName );
} 
```

你不必像你一样设置它......

而不是所有这些`ValueExpression`东西，您最好使用托管属性在您的内部`GCSelectionBean`添加以下内容：

```
@ManagedProperty(value = "#{envMenuBean }")
private EnvMenuBean envMenuBean ; //add getter and setter 
```

比`currentEnvName`从 envMenuBean 对象访问...

就这样 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:46:23.887

这似乎是 primefaces 的问题，将 primefaces 从 primefaces-3.4-SNAPSHOT 升级到 primefaces-3.4.1 后，问题得到解决。

# ios - 返回表单 safari (iOS) 时执行代码

> ID：13005506
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:38:17.660
> 
> 标签：ios, facebook, sdk

我在我的应用程序中使用 facebook sdk。facebook sdk 将用户带到 safari facebook 登录。完成 facebook 登录后，用户将返回应用程序，我想编写一组代码来获取访问令牌并继续操作。但是这段代码应该写在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:45:32.167

如果您正确设置了应用程序的回调 URL（例如`fb19374518456`，其中长数字是 Facebook 应用程序 ID），那么 Facebook 会将您从 Safari 重定向回应用程序。在这种情况下，您可以实施

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sApp annotation:(id)ann 
```

方法并将您获得的 URL 传递给 facebook SDK - 然后它将解析 URL 并从中获取访问令牌和到期日期。

# vb.net - 在构造函数或类变量定义区域中创建“新”对象更好吗？

> ID：13005509
> 
> 赞同：0
> 
> 时间：2012-10-22T05:38:33.780
> 
> 标签：vb.net

在构造函数或类变量定义区域中创建列表对象更好吗？他们最终会做同样的事情吗？什么时候一种方法优于另一种方法？

这是一个示例类定义：

```
Public Class CProject

    'Variable to hold a list of Load Objects, Instantiate here vs in New().
    Private m_LoadList As New List(Of CLoad)

    Public Property LoadList() As List(Of CLoad)
        Get
            Return m_LoadList
        End Get
        Set(ByVal value As List(Of CLoad))
            m_LoadList = value
        End Set
    End Property

    Public Sub New()

    End Sub

End Class 
```

诗句：

```
Public Class CProject

    'Variable to hold a list of Load Objects
    Private m_LoadList As List(Of CLoad)

    Public Property LoadList() As List(Of CLoad)
        Get
            Return m_LoadList
        End Get
        Set(ByVal value As List(Of CLoad))
            m_LoadList = value
        End Set
    End Property

    Public Sub New()
        m_LoadList = New List(Of CLoad)
    End Sub

 End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:42:54.020

它更接近选项＃2，但有一些变化：

```
Private m_LoadList As List(Of ADR) = Nothing

Public Property LoadList() As List(Of CLoad)
    Get
        If m_LoadList Is Nothing Then
            m_LoadList = New List(Of CLoad)
        End If
        Return m_LoadList
    End Get
    Set(ByVal value As List(Of CLoad))
        m_LoadList = value
    End Set

End Property 
```

这样您就可以引用该属性，并且仅在不存在时才创建新实例。更简单的编码，产生开销的错误机会更少..

# parameters - 方法 'GETValues' 没有重载需要 0 个参数

> ID：13005510
> 
> 赞同：1
> 
> 时间：2012-10-22T05:38:37.933
> 
> 标签：parameters, overloading

我需要返回两个变量类型的三个值，所以我决定使用*ref*和*out*参数，但是我在实现它们时遇到了麻烦。我不断收到这些“方法'GETValues'没有重载需要0个参数”错误。我究竟做错了什么？

```
public static double GETValues(out string empName, out double dblSal, out double dblMonthSales)
    {
        string salaryStr,
               monthlySales;

        Console.Write("Enter employee's name (enter nothing to quit) : ");
        empName = Console.ReadLine();
        Console.Write("Enter Annual Salary (0 for pure commission): ");
        salaryStr = Console.ReadLine();
        dblMonthSales = Double.Parse(salaryStr);
        Console.Write("Enter monthly sales: ");
        monthlySales = Console.ReadLine();
        dblSal = Double.Parse(monthlySales);

        return dblMonthSales;
        return dblSal; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:28:39.447

你不做多次退货。您设置 out 变量的值（您已经这样做了）。您可以返回一个双精度 - 但在您的代码段中，您试图返回您已经在“out”参数中设置的两个值。

您的调用代码应类似于：

```
string empname = "default";
double salary = 0.0;
double monthSales = 0.0;
double whatIsThis = GETValues(empname, salary, monthsales);
// empname, salary and monthSales should now be set correctly.
// not sure what you intend for the return val. 
```

# algorithm - 检查树是否具有交替属性

> ID：13005513
> 
> 赞同：0
> 
> 时间：2012-10-22T05:38:56.063
> 
> 标签：algorithm, tree

假设存在一棵树，其中树的每个节点都是白色或黑色，并且对于每个内部节点，它的子节点是该内部节点的相反颜色。因此，如果绘制了树，它将具有“顶层”由（例如）一个黑色节点组成，然后是下一层所有白色节点，然后是下一层所有黑色节点，依此类推。

是否存在任何算法，给定具有根 x 的树，可以检查该树是否符合这些标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:46:39.717

是的。递归深度优先遍历应该很容易做到这一点。在每个节点上放置一个方法，该方法检查其所有子节点是否具有不同的颜色，并且当对它们调用此检查器函数时，它的所有子节点是否返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:52:02.983

使用 dept first search 很容易知道当前正在访问的节点的 dept。然后根据根节点的值，你可以很容易地检查当前节点是需要黑色还是白色：

如果根为黑色（并且根的深度设置为 0），则所有偶数深度节点都需要为黑色，奇数深度节点需要为白色，反之亦然。

请注意，您需要访问所有节点以验证树是否符合标准，因此最佳可能复杂度为 O(n)

# php - 窗口关闭时如何销毁会话？

> ID：13005519
> 
> 赞同：0
> 
> 时间：2012-10-22T05:39:16.870
> 
> 标签：php, javascript

我想在关闭窗口时销毁会话，所以我正在使用代码

java脚本代码：

```
<script>
function killSession() {
    location = 'index.php?destroySession=true';
}
 </script> 
```

php代码：

```
<?php 
     if (isset($_GET['destroySession']) && $_GET['destroySession'] == "true") {
    session_destroy();
    $closeWin = "window.close()";
} else {
    $closeWin = "";
}
?> 
```

身体：

```
<body onload="<?php echo $closeWin; ?>"  onunload="killSession();"> 
```

但它没有给我足够的回应。我想在窗口关闭时销毁会话。它怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:50:38.603

当浏览器关闭时，PHP 会话会过期。[http://www.php.net/manual/en/function.setcookie.php](http://www.php.net/manual/en/function.setcookie.php)如果没有发生这种情况，请立即查看手册，修改配置文件应该有一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:43:15.903

```
 $closeWin = "window.close()";
 echo "<script>".$closeWin."</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:50:07.400

首先从您的代码中删除`onload="<?php echo $closeWin; ?>"` 并更改您的 php 代码，如下所示：

```
<?php 
     if (isset($_GET['destroySession']) && $_GET['destroySession'] == "true") {
        session_destroy();
        $closeWin = "window.close()";       
        echo "<script>".$closeWin."</script>";
}
?> 
```

希望这能解决你的问题

# php - 在点燃的数据表中添加操作

> ID：13005520
> 
> 赞同：0
> 
> 时间：2012-10-22T05:39:18.227
> 
> 标签：php, codeigniter

我正在使用 Ignated Datatables 来查看活跃用户。我现在想要的是有一个可以禁用用户的操作列。这是我的代码。

看法：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#users_table').dataTable({
        "sScrollX": "100%",
        "sScrollXInner": "100%",
        "sPaginationType": "full_numbers",
        "bProcessing": true,
        "bServerSide": true,
        "bJQueryUI": true,
        "bDeferRender": true,
        "sAjaxSource": "<?php echo base_url(); ?>/users/get_active_users",
        "sServerMethod": "POST",
        "aoColumnDefs": [{
            'bSortable': false,
            'aTargets': [7]
        }
        ]
    });
});
</script>
<thead>
  <tr>
     <th class="width70 text-center">Username</th>
     <th class="text-center">Full Name</th>
     <th class="text-center">Office</th>
     <th class="text-center">Position</th>
     <th class="text-center">Email</th>
     <th class="width60 text-center">Privilege</th>
     <th class="width160 text-center">Date Registered</th>
     <th class="width60 text-center">Actions</th>
  </tr>
</thead>
<tbody>
  <tr>
     <td colspan="7" class="dataTables_empty">Loading data from server</td>
  </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:47:21.403

使用点燃的数据表，您需要在数据表中添加操作列，例如

```
$this->datatables->add_column('action', '<a href="user/disable/$1">Disable User</a>', id); 
```

# javascript - 在文本框中设置的图像就像 js 中的占位符一样？

> ID：13005521
> 
> 赞同：3
> 
> 时间：2012-10-22T05:39:26.557
> 
> 标签：javascript, html

我希望能够在填充文本框的同时隐藏某个图像，并且在清除文本框时我想显示某个图像。我知道它应该像这样工作，但使用图像而不是占位符：

```
$('input:text').focus(function () {
    if ($(this).val() === $(this).attr('placeholder')) {
        $(this).val('');
    }
}).blur(function() {
    if ($(this).val() == "") {
        $(this).val($(this).attr('placeholder'))
    }
}); 
```

提前感谢您的友好回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:14:31.240

尝试 -

```
$('input:text').focus(function () {
    $(this).css('background', 'none');

}).blur(function() {
    if ($(this).val() == "") {
        $(this).css('background', 'url(http://profile.ak.fbcdn.net/hprofile-ak-prn1/71158_111108655596607_6920099_n.jpg) no-repeat left top');
    }
}); 
```

[**检查演示**](http://jsfiddle.net/eSGML/)

使用退格键 -

[**更新的演示**](http://jsfiddle.net/eSGML/2/)

# android - 适用于安卓的 WebRTC

> ID：13005523
> 
> 赞同：3
> 
> 时间：2012-10-22T05:40:01.180
> 
> 标签：android, webrtc

我正在寻找在 android 设备上实现 webrtc。我希望在 android 设备之间进行视频聊天。

我找到了这个链接[http://www.webrtc.org/reference/getting-started](http://www.webrtc.org/reference/getting-started)

源代码在这里： [http ://code.google.com/p/webrtc/](http://code.google.com/p/webrtc/)

但我无法正确构建它。

让我知道是否有人为 Android 设备构建了它。

建议我所涉及的问题。

1.  获取源代码
2.  使用带有 android sdk 的 Linux
3.  构建源代码。
4.  生成apk。

对此的任何支持将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-21T10:30:46.423

我最近为 android 构建了 webrtc。

开始之前非常重要：

1.  linux 64位（我有tr
2.  java 6 ( [http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u45-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u45-oth-JPR) )
3.  蚂蚁
4.  仓库工具
5.  git svn

如果您已经安装了所有这些，您可以按照[http://www.webrtc.org/reference/getting-started](http://www.webrtc.org/reference/getting-started)中的步骤进行操作（为 android 构建）

您不必下载和安装 ndk 和 sdk。它将被检出并使用源代码进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T04:43:34.690

让 WebRTC 为 Android 编译并不容易。最简单的方法是使用 PristineIO 脚本。

我已经概述了我在[https://crushingday.wordpress.com/2015/01/24/getting-started-with-webrtc-building/上采取的步骤](https://crushingday.wordpress.com/2015/01/24/getting-started-with-webrtc-building/)

# php - 从单个 MySQL 表字段中选择 JSON 数据

> ID：13005529
> 
> 赞同：0
> 
> 时间：2012-10-22T05:40:45.737
> 
> 标签：php, javascript, mysql, ajax, json

我有一个从 JavaScript 访问的 PHP REST Web 服务。如果正在运行一个 MySQL SELECT 语句，该语句选择几个文本字段，然后 json_encode 返回的数组一切正常 - 我得到一个 JSON 对象数组。我创建了一个新字段，我在其中存储了整个 JSON 字符串，我只想选择该字段，然后返回 SELECT 查询返回的那些 JSON 对象的数组。是否有捷径可寻？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:00:20.643

选择列，然后对结果使用 json_decode。

# android - Android：片段+始终在屏幕底部的顶部布局

> ID：13005537
> 
> 赞同：1
> 
> 时间：2012-10-22T05:41:31.283
> 
> 标签：android, android-fragments, android-support-library

我想`pagination and menu`在我的 Android 中执行与他们在 iPhone 应用程序中相同的操作（请查看图片）。`pagination`屏幕底部有一个和应用程序菜单，它们是`always on top`。如果某个屏幕有更多内容和滚动，则无论用户向下还是向上滚动，`pagination`菜单位置都在底部。`fixed`

在回答时，请考虑以下我的 android 应用程序设计规范：

1.  此应用程序正在 Android 2.1（API 级别 7）中开发
2.  这是基于片段的应用程序。我只有一个活动和很多片段（实际上，我为下面的每个页面制作了片段，`pagination`我在滑动时显示和隐藏片段）

![iPhone 截图](../Images/6c782c6a552a41f739450c951951d7aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:04:14.327

请参阅[此项目](https://github.com/JakeWharton/Android-ViewPagerIndicator/)以了解您的分页要求。

```
And for bottom layout you can fix the bottom layout inside main layout. 
```

**注意：** 首先参考项目，然后尝试底部方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T05:44:46.913

这可以很容易地实现。像这样定义活动的内容布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
     <FrameLayout
            android:id="@+id/simple_fragment"
            android:layout_width="match_parent"
            android:layout_height="0px"
            android:layout_weight="1">
    </FrameLayout>

    <TextView
        android:id="@+id/all_common_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|right"
        android:text="Some common layout" />

</LinearLayout 
```

>

并将 framelayout 替换为片段，以便 Textview (all_common_view) 对您使用的所有片段保持通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:00:09.750

要`fragment`在android 3.x下使用，必须使用[支持库](http://developer.android.com/training/basics/fragments/support-lib.html)

并且要在屏幕的特定位置保留一些布局，只需使用 android 上的基本布局控件，例如`Linearlayout, RelativeLayout`，...

# java - Java TextBox KeyReleased 事件检查 isNumeric()

> ID：13005543
> 
> 赞同：1
> 
> 时间：2012-10-22T05:41:46.890
> 
> 标签：java, swing, events, textbox, numeric

我试图检查用户在文本框中输入字符时是否为数字。如果不是，则应立即将其从文本框中删除。

发生的情况是我输入数字 1（或任何数字或字符），当它显然是一个数字时，它会从文本框中删除该值。

这是我正在使用的事件：

```
private void txtLengthAKeyReleased(java.awt.event.KeyEvent evt) {
    removeLastChar(txtLengthA); //pass the textbox 
} 
```

这是 removeLastChar() 方法：

```
public static void removeLastChar(JTextField txt)
{
    //Get string from text field
    String str = txt.getText();
    //Make sure length > 0
    if( (str.length()) != 0)
    {
        //Get the last char of the string
        String s = str.substring(str.length()-1, str.length()-1);
        System.out.println(s);   //test debug
        //If not numeric (try/catch Double.parseDouble)
        if(!isNumeric(s));
        {
            //Remove last char from the text box
            str = str.substring(0, str.length()-1);
            txt.setText(str);
        }
    }
} 
```

检查字符串是否为数字：

```
isNumeric() function:
    public static boolean isNumeric(String str)  
    {  
      try  
      {  
        double d = Double.parseDouble(str);  
      }  
      catch(NumberFormatException nfe)  
      {  
        return false;  
      }  
      return true;  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:08:59.770

使用`KeyListeners`过滤或修改`JTextComponets`只会以眼泪收场。

你应该使用一个`DocumentFilter`

检查[使用文档列表器限制文本字段中的字符，](https://stackoverflow.com/questions/12812844/limit-the-characters-in-the-text-field-using-document-listner/12812935#12812935)如果无效，[则删除 JTextField 中的最后一次击键，](https://stackoverflow.com/questions/11836699/deleting-last-keystroke-in-jtextfield-if-invalid/11837028#11837028)以及[JTextField 限制字符量输入并仅接受数字](https://stackoverflow.com/questions/12793030/jtextfield-limiting-character-amount-input-and-accepting-numeric-only/12793126#12793126)示例（尤其是最后一个问题中答案的链接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:12:25.377

如果用户在文本字段中间键入非数字字符会发生什么？还是一开始？

您可以使用 DocumentFilter 实现更好的解决方案：http: [//docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)

当您确定要插入或替换的字符串有效时，您只需要调用 super.insert...。（在您的情况下为数字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:48:40.463

它应该是

```
 String s = str.substring(str.length()-1, str.length(); 
```

使用您的代码，值`s`始终是一个空字符串。

要测试单个字符是否为数字，请使用

```
Character.isDigit(str.substring(0,1)) 
```

# jenkins - 如何从 Servlet 触发 jenkins 构建

> ID：13005544
> 
> 赞同：0
> 
> 时间：2012-10-22T05:41:50.710
> 
> 标签：jenkins, jenkins-plugins

我已经设置了 jenkin 并创建了一个 jenkins 作业来构建我的 maven 项目，一切正常，现在我想在用户点击我的 web 应用程序上的按钮时触发这个构建，是否可以这样做，如果可以，请告诉我任何样本或链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:36:43.920

您可以使用 HTTP 触发构建，这对您来说可以吗？

在作业配置中，在 Build Triggers 部分下，有复选框“Trigger builds remotes”，您可以在其中指定构建的令牌，并找到要加载的 URL 以使用该令牌触发构建。

你也可以使用这个：[https ://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)

# android - 如何使用 addHeaderView 将简单的 ImageView 添加到 ListView

> ID：13005549
> 
> 赞同：15
> 
> 时间：2012-10-22T05:42:13.453
> 
> 标签：android, listview, imageview

我的目标很简单。我想将“红色矩形”作为*标题视图添加*到`ListView`. 所以我创建了一个简单的活动

```
public class MainActivity extends Activity {
    private String[] adapterData = new String[] { "Afghanistan", "Albania", "Algeria", 
            "American Samoa", "Andorra", "Angola"}; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView lv;
        lv = (ListView)findViewById(R.id.list);

        LayoutInflater lf;
        View headerView;
        lf = this.getLayoutInflater();
        headerView = (View)lf.inflate(R.layout.header, null, false);

        lv.addHeaderView(headerView, null, false);

        lv.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, adapterData)); 
    }
} 
```

activity_main.xml

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FF0" 
        android:cacheColorHint="#0000"
        android:paddingLeft="20dip"
        android:paddingRight="20dip"
        android:divider="#0000"
        android:scrollbarStyle="outsideOverlay" /> 
```

list_item.xml

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:minHeight="40dip"
    android:singleLine="true"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
/> 
```

最重要的，header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="100dip"
    android:background="#F00"/> 
```

但这似乎不起作用。什么都没有显示。

任何人都可以对此提出一些建议吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-16T11:04:13.403

老问题，但我只是复制它并运行它，实际上红色没有出现。

您错过了一件简单的事情：**无论您如何称呼您，`inflate`您始终¹`LayoutParams`必须传递父视图（第二个参数），以便它可以确定要实例化哪个子类。**
*¹：总是有^(1个)例外*

> .inflate（R.layout.header，***lv***，假）

有关该主题的更多信息，我强烈建议： http: [//www.doubleencore.com/2013/05/layout-inflation-as-intended/](http://www.doubleencore.com/2013/05/layout-inflation-as-intended/)（值得阅读几次）

您的完整代码已修改（xml 文件可以保持原样）：

```
public class MainActivity extends Activity {
    private static final String[] ADAPTER_DATA = {
            "Afghanistan", "Albania", "Algeria", "American Samoa", "Andorra", "Angola"
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView list = (ListView) findViewById(R.id.list);
        View header = getLayoutInflater().inflate(R.layout.header, list, false);

        list.addHeaderView(header, null, false);
        list.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, ADAPTER_DATA));
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T05:48:34.157

这就是我添加标题的方式：

```
 View view = View.inflate(context, R.layout.header, null);
    lv = (ListView) findViewById(R.id.list);

    lv.addHeaderView(view); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T22:42:00.187

检查一下，我现在可以正常工作了：

```
 ListView lv = (ListView)findViewById(R.id.list);

    LayoutInflater layoutInflater = this.getLayoutInflater();
    View headerView = (View) layoutInflater.inflate(R.layout.header, lv, false); 
```

只需将 listview 发送到 inflate 方法的第二个参数 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:54:40.847

您应该在单独的 xml 文件中声明标题视图。然后，将其膨胀为 View 实例并将其设置为 ListView。

```
View view = ... (inflate the view from xml file)
listview.addHeaderView(view) 
```

您必须在 setAdapter 之前调用 addHeaderView 到列表视图。

# python - DFS的两个递归函数的区别

> ID：13005550
> 
> 赞同：-1
> 
> 时间：2012-10-22T05:42:20.313
> 
> 标签：python, recursion, depth-first-search

我正在研究来自人工智能项目的 python 程序。这是关于深度优先搜索的。我有一个运行良好的python代码：

```
def depthFirst(problem,start,path,result,vis):
    next=problem.getSuccessors(start)
    if problem.isGoalState(start):
        result.append(path)
        print path
    for I in next:
        if I[0] not in vis:
            vis.append(I[0])
            depthFirst(problem,I[0],path+[I[1]],result,vis)
            vis.pop()

    def depthFirstSearch(problem):
        start=problem.getStartState()
        result=[]
        depthFirst(problem,start,[],result,[])
        return result[-1] 
```

我知道对于数字，python 不能返回它的引用，但对于列表，它传递它的引用而不是它的值。

我写了一个类似的程序；在这里我使用变量`path`而不是`result`：

```
def depthFirst(problem,start,path,vis):
    if problem.isGoalState(start[0]):
        print 'Start1',start[1]

        print 'Path',path
        l=start[1]
        path.append(l)
        path=path[0]
        print 'FindPath',path

        return

    #vis.add(start[0])
    fringe=problem.getSuccessors(start[0])
    for child in fringe:
        '''if problem.isGoalState(child):
            path.apend(child[1])

            break
            return'''
        print child
        if child[0] not in vis:
            tmppath=start[1][:]
            tmppath.append(child[1])

            vis.add(child[0])
            print 'vis=',vis
            print path
            depthFirst(problem,(child[0],tmppath),path,vis)
        print 'path=',path

def depthFirstSearch(problem):
    start=problem.getStartState()
    path=[]
    vis=set([])

    depthFirst(problem,[start,[]],path,vis)
    print path[0]
    return path[0] 
```

但它的路径与第一个路径截然不同。我认为这两个程序是相同的，但我只是想更改`result`为`path`. 怎么来的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:27:38.357

我已尽力为您代码中的一些问题添加注释，希望它能解决您的问题：

```
def depthFirst(problem,start,path,vis):
    if problem.isGoalState(start[0]):
        l=start[1]      # just use path.append(start[1]) here
        path.append(l)  # AND why do you even need path here at all???
        path=path[0]    # if you assign path=path[0], then don't call path[0]
                        # in depthFirstSearch
        return

    # vis.add(start[0]) # Why comment this out? Move this to the top!
    fringe=problem.getSuccessors(start[0])
    for child in fringe:
        if child[0] not in vis:
            tmppath=start[1][:]
            tmppath.append(child[1])
            vis.add(child[0])  # you AREN'T discovering it yet, don't add it here!
            depthFirst(problem,(child[0],tmppath),path,vis)

def depthFirstSearch(problem):
    start=problem.getStartState()
    path=[]
    vis=set([])
    depthFirst(problem,[start,[]],path,vis)
    return path[0]  # should be path instead here since you assigned path=path[0] 
```

* * *

这是我认为应该可以工作的固定版本：

```
def depthFirst(problem,start,path,vis):
    vis.add(start[0])

    if problem.isGoalState(start[0]):
        path.append(start[1])  # still convoluted..
        path = path[0]
        return True

    fringe=problem.getSuccessors(start[0])
    for child in fringe:
        if child[0] not in vis:
            tmppath = start[1][:]
            tmppath.append(child[1])
            depthFirst(problem, (child[0], tmppath), path, vis)

def depthFirstSearch(problem):
    start=problem.getStartState()
    path=[]
    vis=set([])
    if depthFirst(problem, [start, []], path, vis):
        return path 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-22T05:47:36.220

我对 python 不是很熟悉，但是如果您需要通过引用传递 var，也许这会对您有所帮助：[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

# c++ - 程序编译并执行，但输出一个不合理的大数字作为最大值。长双如何显示？

> ID：13005557
> 
> 赞同：0
> 
> 时间：2012-10-22T05:43:26.497
> 
> 标签：c++

所以我让这个程序运行，但现在我输入的任何数字都变成了非常大的数字。我需要为数学计算添加标题吗？还是有类似 C 的东西，C++ 的 printf 函数？

```
#include <iostream>                                                     // Necessary 
using namespace std;
#define mMaxOf2(max, min) ((max) > (min) ? (max) : (min))
#define mMaxOf3(Min, Mid, Max)\
{\
     mMaxOf2(mMaxOf2((Min), (Mid)),(Max))\
}

int main()
{
    double primary;
    double secondary;
    double tertiary;
    long double maximum = mMaxOf3(primary, secondary, tertiary);

    cout << "Please enter three numbers: ";
    cin >> primary >> secondary >> tertiary;
    cout << "The maximum of " << primary << " " << secondary << " " << tertiary;
    cout << " using mMaxOf3 is " << maximum;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:46:44.560

问题是您`maximum`在获得用户输入之前进行计算。像这样重新排列您的代码：

```
 double primary;
    double secondary;
    double tertiary;
    long double maximum;

    cout << "Please enter three numbers: ";
    cin >> primary >> secondary >> tertiary;

    maximum = mMaxOf3(primary, secondary, tertiary);

    cout << "The maximum of " << primary << " " << secondary << " " << tertiary;
    cout << " using mMaxOf3 is " << maximum; 
```

永远记住代码是**按顺序**执行的，或者你可以说**是逐行**执行。对于 C++，对变量的任何更改都会影响使用这些修改变量的后续指令的行为。在您的情况下，您在正确设置 的值*之前*`maximum`先进行计算，而.*`primary``secondary``tertiary``mMaxOf3`*

 *请注意，对于您的程序，具有、`primary`和具有未初始化的值是完全可以的。`secondary``tertiary``maximum`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:45:21.357

这：`long double maximum = mMaxOf3(primary, secondary, tertiary);`需要紧随其后`cin >> primary >> secondary >> tertiary;`

您遇到的问题是您正在访问未初始化的变量。您需要在读入它们后访问它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:45:49.427

在cin 语句设置primary、secondary 和tertiary 的值之前计算最大值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:47:38.070

您尚未初始化“主要”，`secondary`或者`tertiary`在您调用之前，`mMaxOf3`因此数字包含垃圾值，因此您得到垃圾答案。您需要在输入数字后计算最大值。另外，看看[`std::max`](http://en.cppreference.com/w/cpp/algorithm/max)作为你的宏的替代品*

# java - 使用在其他类中声明的变量

> ID：13005558
> 
> 赞同：0
> 
> 时间：2012-10-22T05:43:30.290
> 
> 标签：java

好吧，我有点卡在我必须问的地方

我有 2 个名为 main 和 dbconnect 的类

在我的 dbconnect 中，我拥有连接到数据库的所有必要方法，在我的主类中我创建了 GUI，但问题是我在主类中声明了变量（因为它们由文本框表示），现在想在我的 dbconnect 中使用它们班级

我的 dbconnect 课程如下所示

```
import javax.swing.*;
import java.sql.*;

public class DBCONNECT
{
Connection conn;
public void connect()
{

    try
    {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        conn = DriverManager.getConnection("jdbc:odbc:DriverConn");
    }
    catch(Exception se)
    {
        JOptionPane.showMessageDialog(null, "Error: Could not load driver " + se.getMessage());
    }
}
public void dissconect()
{
    try
    {
        conn.close();
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, "Error : Could not close Database " + e.getMessage());
    }
}
public void writeToDB()
{
    try
    {
        MAIN main = new MAIN();
        Statement st = conn.createStatement();
        String command1 = ("INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES" + drivID + FName + LName);
        String command2 = "INSERT INTO Offences(IDNumber, SpeedLimit, DriverSpeed, SeatBelt, DrunkenDriving, DriversLicense) VALUES" + drivID + intspeed + intDSpeed + strSeat + strDrunk + strLicense;
        String command3 = "INSERT INTO DriverPoints(IDNumber, Points) VALUES" + drivID + intpoints;
    }
}
public ResultSet select(String sql)
{
    try
    {
        Statement st = conn.createStatement();
        return st.executeQuery(sql);
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, "Error: Could not read from database");
    }
    return null;
}
public int change (String sql)
{
    try
    {
        Statement st = conn.createStatement();
        return st.executeUpdate(sql);
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null, "Error: Could not Update Database");
    }
    return -1;
}
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:47:44.270

要么声明变量，要么为主类中的变量`public`创建访问器[方法](http://java.about.com/od/workingwithobjects/a/accessormutator.htm)。您需要将主类实例传递给`DBCONNECT`该类，以便引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:49:31.720

使它们成为静态的，这将完成您的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:50:33.253

是否可以将这些变量设为公共和静态？然后，您可以通过使用 Main 类引用它们来使用它们。
例如：
Main.drivelD

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:51:49.040

将所需的变量作为方法调用的参数传递是非常容易的。即您的 writeToDB() 方法将类似于 writeToDB(String drivId, ...)。

但是，如果你有额外的逻辑，比如你想验证 drivId 的格式是否正确等。那么你应该创建一个单独的类来保存你想要保存在数据库中的属性。因此，从您的文本小部件中，您将更新此对象，然后调用 validate 方法等，然后将其传递给数据库处理程序。这将从视图中隔离模型相关数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T05:52:53.873

将两个类放在同一个文件夹中，并使用代码将它们放在同一个包中。

```
package <package_name>; 
```

然后您可以在主类中使用公共和受保护的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T06:04:11.427

执行此操作的常用方法是将每条信息从 Main 传递给 dbconnect 方法，或者创建一个保存数据的对象并将其传递给 dbconnect 方法。然后，您可以通过 getter 访问所需的内容。您不应该直接从 dbconnect 直接引用 Main，因为它引入了循环依赖。

# installation - 将 InstallShield MSI/项目转换为 NSIS

> ID：13005559
> 
> 赞同：0
> 
> 时间：2012-10-22T05:43:35.293
> 
> 标签：installation, windows-installer, nsis, installshield

我有一个用 Installshield 构建的 MSI。我想减小 MSI 的大小，所以我在寻找其他选项。似乎 NSIS 具有 LZMA 压缩，这比 InstallShield 使用的压缩要好。有没有一种简单的方法可以将我的 MSI 或 InstallShield 项目转换为 NSIS（或任何其他具有更好压缩的安装程序）项目并构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:09:23.687

您在寻找一些工具或实用程序吗？

没有这样的。

唯一的方法是手动将 MSI 的高级功能重写为 NSIS（但安装程序的基本框架 - 页面、文件、快捷方式、注册表项、ini 值……可以通过随附的向导生成）。

# vectorwise - 如何检查 VectorWise 数据库中的表大小

> ID：13005562
> 
> 赞同：0
> 
> 时间：2012-10-22T05:43:49.863
> 
> 标签：vectorwise

我想在 VectorWise 中检查表格的大小。谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:18:03.110

通过终端监视器：

```
sql mydb
help table mytable 
```

VectorWise 只是修改后的 Ingres RDBMS。所有终端监视器命令都应该工作......

# spring - JSF + Spring 中的 Bean 范围管理

> ID：13005570
> 
> 赞同：0
> 
> 时间：2012-10-22T05:44:54.453
> 
> 标签：spring, jakarta-ee, spring-mvc, jsf-2

我正在使用 JSF2.0 + Spring 3.0 构建一个应用程序。我的 bean 在这个应用程序中由 Spring 管理。
在这个应用程序中，我有一个包含 3 个 SelectOneMenuItems(JSF) 的表单

1.  当用户选择第一个下拉框值时，它将填充第二个下拉框（因为我在 EventChangeListener 中放置了逻辑）
2.  当用户从第二个下拉列表中选择值时，它将根据第二个下拉列表的选择填充第三个下拉列表

现在，当我提交表单时，它会很好地提交，但不会从框中删除值。我在春季尝试了**请求范围**，但它产生了另一个问题，即当通过第一个下拉列表选择一个值时，比如说国家，我将值发送到省的下一个下拉列表（根据国家下拉选择填充省），春季认为它是新请求并刷新 bean，因此国家的下拉值被删除，我`NullPointerException`在填充省份时得到。我现在该怎么办我真的被卡住了。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T05:49:31.833

您可以自己创建一个新 bean，并使用`FacesContext`.

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("myBean", new MyBean()); 
```

通过在代码中使用它，您可以覆盖 bean 的当前实例并摆脱旧 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:19:22.903

我想说会话范围在这里很好。我认为您需要对下拉列表的选定值进行适当的管理。更改 DropDown1 后，您需要重置 DropDown2 和 DropDown3。一旦你改变 DropDown2 重置 DropDown3。重置是指仅将有效数据加载或过滤到这些组件的模型中。

您正在使用 JSF2。你在使用`f:ajax`标签吗？你有可用的代码片段吗？那里可能有一个问题，这里和那里有点棘手。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T05:58:29.333

您可以使用最适合您的用例的[View Scope 。](http://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/#scopes-view)但由于 Spring 3.0 不支持视图范围，您需要创建自定义视图范围实现以供 Spring 识别。您可以参考[此链接](http://www.harezmi.com.tr/spring-view-scope-for-jsf-2-users/)以供参考。

# python - Python 矩阵（列表列表）到字典

> ID：13005571
> 
> 赞同：3
> 
> 时间：2012-10-22T05:45:11.707
> 
> 标签：python, list, dictionary, matrix

假设我有一个矩阵，例如

```
[['ID', 'fName', 'lName'],
['A101', 'Mark', 'Smith'],
['A102', 'Jane', 'Smith'],
['A103', 'Mark', 'Twain'],
['A104', 'Ann', 'Lee']] 
```

请注意，某些单元格是 ''

我需要做的是从这个矩阵创建 2 个字典：

1.  使用 ID 作为键，使用 fname 和 lname 作为其值
2.  使用 lName 作为键，ID 和 fName 作为值

我认为这就像获取每个列表一样简单（因为矩阵是列表的列表）并使用它将它作为附加传递给字典，但我很难写出那部分。

例如，迭代矩阵`for i in xrange (0, len(matrix))`并`i`用作标识符，`matrix[i]`但我不确定这是否正确以及制作这些字典的正确方法是什么。

我有 Python 2.7.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T05:49:18.553

```
>>> dict((x[0], (x[1], x[2])) for x in names[1:])
{'A104': ('Ann', 'Lee'), 'A102': ('Jane', 'Smith'), 'A103': ('Mark', 'Twain'), 'A101': ('Mark', 'Smith')}
>>> dict((x[2], (x[0], x[1])) for x in names[1:])
{'Twain': ('A103', 'Mark'), 'Smith': ('A102', 'Jane'), 'Lee': ('A104', 'Ann')} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-27T08:08:14.937

从您对其他答案的评论来看，我认为这需要一个两步过程，首先获取一个字典列表，而不是您在问题中拥有的“矩阵”，然后对其进行修改。

为了完整起见，让我们设置

```
list_of_lists = [['ID', 'fName', 'lName'],
                 ['A101', 'Mark', 'Smith'],
                 ['A102', 'Jane', 'Smith'],
                 ['A103', 'Mark', 'Twain'],
                 ['A104', 'Ann', 'Lee']] 
```

因此，要将您拥有的列表列表放入 dicts 列表中，您可以执行以下操作：

```
keys = list_of_lists[0]
data = [dict(zip(keys, values)) for values in list_of_lists[1:]] 
```

`data`现在包含一个字典列表。

```
[{'ID': 'A101', 'fName': 'Mark', 'lName': 'Smith'},
 {'ID': 'A102', 'fName': 'Jane', 'lName': 'Smith'},
 {'ID': 'A103', 'fName': 'Mark', 'lName': 'Twain'},
 {'ID': 'A104', 'fName': 'Ann', 'lName': 'Lee'}] 
```

现在，很容易通过理解得到你想要的另一个列表：

```
[{d['ID']: (d['fName'], d['lName'])} for d in data] 
```

我怀疑您可能正在从文件中读取此列表列表，可能正在使用该`csv`模块。如果是这种情况，您可以使用[`DictReader`](https://docs.python.org/2/library/csv.html#csv.DictReader). 因此，假设您的文件如下所示：

```
ID,fName,lName
A101,Mark,Smith
A102,Jane,Smith
A103,Mark,Twain
A104,Ann,Lee 
```

你可以`data`通过做得到

```
import csv
data = csv.DictReader(open('test.csv')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:03:41.723

在 python 2.7+ 中，您可以使用*字典*推导（类似于列表推导）来做同样的事情：

```
>>> {ID: (fname, lname) for (ID, fname, lname) in names[1:]}
{'A104': ('Ann', 'Lee'), 'A102': ('Jane', 'Smith'), 'A103': ('Mark', 'Twain'), 'A101': ('Mark', 'Smith')}
>>> {lname: (ID, fname) for (ID, fname, lname) in names[1:]}
{'Twain': ('A103', 'Mark'), 'Smith': ('A102', 'Jane'), 'Lee': ('A104', 'Ann')} 
```

请注意，对于重复键的情况，表达式中的最后一个键将覆盖所有其他键（这里，缺少“Smith”的条目之一）。解决此问题的一种方法是使用 a`defaultdict`并允许 dict 值是条目列表，而不是单个条目：

```
>>> from collections import defaultdict
>>> by_lastname = defaultdict(list)
>>> for (ID, fname, lname) in names[1:]:
...     by_lastname[lname].append((ID, fname))
... 
>>> by_lastname
defaultdict(<type 'list'>, {'Twain': [('A103', 'Mark')], 'Smith': [('A101', 'Mark'), ('A102', 'Jane')], 'Lee': [('A104', 'Ann')]})
>>> 
```

# c# - 当鼠标悬停在我的列表视图中时如何获取选定的项目？

> ID：13005581
> 
> 赞同：1
> 
> 时间：2012-10-22T05:45:44.780
> 
> 标签：c#, visual-studio, listview, mousehover

当我拖过 Listview 项目时如何获取选定的项目和子项目。我试过这个，但没有得到准确的解决方案。我只在第一次鼠标悬停 Selected 项目时得到了解决方案。当我一直悬停不同的项目时，它不会显示最新的悬停项目

```
 private void lvThumbnail_MouseHover(object sender, EventArgs e)
    {
        try
        {
            if (lvThumbnail.SelectedItems.Count > 0)
            {
                txtCity.Text = lvThumbnail.SelectedItems[0].SubItems[1].Text;
                txtCurrency.Text = lvThumbnail.SelectedItems[0].SubItems[2].Text;
                txtPopulation.Text = lvThumbnail.SelectedItems[0].SubItems[3].Text;
                txtLanguage.Text = lvThumbnail.SelectedItems[0].SubItems[4].Text;
                lvThumbnail.Refresh();
            }
            }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

# regex - HTAccess 和正则表达式...排除字符串？

> ID：13005582
> 
> 赞同：1
> 
> 时间：2012-10-22T05:45:48.367
> 
> 标签：regex, .htaccess, codeigniter

具体来说，我正在使用 htaccess 用 codeigniter 重写我的 URL。我有两个应用程序，一个叫做“前端”，另一个叫做“admincp”。前端应用程序使用 index.php 并将 $application_folder 更改为“前端”。admincp 应用程序使用复制的 index.php，但重命名为 admin.php。此文件中的 $application_folder 更改为“admincp”。

基本上，我希望所有包含“admincp”作为第一个 uri 段的 URI 都被重写到 admin.php 文件而不是 index.php。然后，像往常一样将所有其他 URL 重写为 index.php。

mysite.com/admin/members 将转到 admin.php/members mysite.com/articles/Some-Awesome-Articles 将转到 index.php/articles

我希望我已经解释得足够好......无论如何，这是我当前的 htaccess 文件，但它似乎不起作用。我收到内部服务器错误。

 `````
 # Deny OR Allow Folder Indexes.
# Since we disable access to PHP files you 
# can leave this on without worries. 
# OR better yet, create a .htaccess file in
# the dir you want to allow browsing and
# set it to +Indexes
Options -Indexes

Options +FollowSymLinks

# Set the default file for indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>
    # mod_rewrite rules
    RewriteEngine on

    # The RewriteBase of the system (if you are using this sytem in a sub-folder).
    # RewriteBase /CodeIgniter_1.6.3/

    # This will make the site only accessible without the "www." 
    # (which will keep the subdomain-sensive config file happy)
    # If you want the site to be accessed WITH the "www." 
    # comment-out the following two lines.
    # RewriteCond %{HTTP_HOST} ^www\.site\.com$ [NC]
    # RewriteRule ^(.*)$ http://site.com/$1 [L,R=301]

    # If a controler can't be found - then issue a 404 error from PHP
    # Error messages (via the "error" plugin)
    # ErrorDocument 403 /index.php/403/
    # ErrorDocument 404 /index.php/404/
    # ErrorDocument 500 /index.php/500/

    # Deny any people (or bots) from the following sites: (to stop spam comments)
    # RewriteCond %{HTTP_REFERER} nienschanz\.ru [NC,OR]
    # RewriteCond %{HTTP_REFERER} porn\.com
    # RewriteRule .* - [F]
    # Note: if you are having trouble from a certain URL just 
    # add it above to forbide all visitors from that site.

    # You can also uncomment this if you know the IP:
    # Deny from 192.168.1.1

    # If the file is NOT the index.php file
    RewriteCond %{REQUEST_FILENAME} !index.php
    # Hide all PHP files so none can be accessed by HTTP
    RewriteRule (.*)\.php$ index.php/$1

    # If the file/dir is NOT real go to index
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^admin/(.*)$ admin.php/$1
    RewriteRule ^(.*)$ index.php/$1

</IfModule>

# If Mod_ewrite is NOT installed go to index.php
<IfModule !mod_rewrite.c>
    ErrorDocument 404 index.php
</IfModule> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:58:44.107

您拥有的第一条规则将`admin.php`自行重写，看起来您最终会得到类似`/index.php/admin.php`. 此外，检查`!-f`并`!-d` *仅应用于`RewriteRule ^admin/(.*)$ admin.php/$1`rule*的 2 个条件。重写条件仅适用于紧随其后的单个重写规则。所以你的`RewriteRule ^(.*)$ index.php/$1`规则没有任何条件，会盲目地重写每一个URI。您也没有标志，因此重写一直持续到最后（因此破坏了您之前所做的任何重写）。

您需要重新排列规则：

```
# rewrite if the request starts with `/admin/`
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin/(.*)$ admin.php/$1 [L]

# not even sure why you need this...
RewriteCond %{REQUEST_FILENAME} !index.php
RewriteCond %{REQUEST_FILENAME} !admin.php
RewriteRule (.*)\.php$ index.php/$1 [L]

# everything else
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:00:33.437

按照描述写一个`RewriteRule`，将它放在你的全部规则之前，最后以`[L]`, 结尾。它将跳过处理其余的规则，将该规则视为最后一条。

```
RewriteRule ^admincp/(.*)$ admin.php/$1 [L] 
```

[文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)``

# javascript - Page.ClientScript.RegisterStartupScript 不起作用

> ID：13005583
> 
> 赞同：0
> 
> 时间：2012-10-22T05:45:48.203
> 
> 标签：javascript, asp.net, popup, client-side-scripting, registerclientscriptblock

我目前正在将旧系统迁移到另一台服务器，当我测试应用程序时，我的弹出窗口显示一个空白页面。请参阅下面用于显示我的弹出消息的代码：

```
Private Sub ShowPopUp(ByVal myID As String, ByVal request As String, ByVal windowType As String, ByVal code As String)
    Dim popupScript As String = "<script language='javascript'>" & _
                                    "window.open('NewWindow.aspx?windowType=" & windowType & "&id=" & myID & _
                                    "&code=" & code & "&popup=" & request & "&kind=3', 'CustomPopUp', " & _
                                    "'width=700, height=400, menubar=no, resizable=yes')" & _
                                "</script>"

    Page.RegisterStartupScript("PopupScript", popupScript)
End Sub 
```

现在，这曾经在旧站点和本地站点上完美运行。但是，一旦转移到新服务器，我就会不断收到警告，`Page.RegisterStartupScript is obsolete`并且应该将其更改为`Page.ClientScript.RegisterStartupScript`. 所以我做了更改，请参见下文：

```
Page.ClientScript.RegisterStartupScript(Me.GetType(), "PopupScript", popupScript, True) 
```

但是，这些都不起作用。它在我的弹出窗口上显示一个空白页面，这与使用“旧”方式在我的本地运行应用程序的结果相反，它显示了我想要的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:34:54.230

您的代码应该是理想的

```
Private Sub ShowPopUp(ByVal myID As String, ByVal request As String, ByVal windowType As String, ByVal code As String)
    Dim popupScript As String = String.Format("window.open('\NewWindow.aspx?windowType={0}&id={1}&code={2}&popup={3}&kind=3', '{4}', '{5}')",
            windowType, 
            myID, 
            code, 
            request,
            "CustomPopUp",
            "width=700, height=400, menubar=no, resizable=yes" )

    ClientScript.RegisterStartupScript("PopupScript", popupScript, True)
End Sub 
```

# java - 在 GAE 上运行自定义 XMPP 服务器的可能性

> ID：13005587
> 
> 赞同：0
> 
> 时间：2012-10-22T05:46:34.047
> 
> 标签：java, google-app-engine, xmpp

然而，我一直在使用 GAE XMPP，并尝试使用像 OpenFire 这样的外部 XMPP 服务器。

但是，在 GAE 中运行 XMPP 服务器模块的可能性是什么，这可以解决打开套接字和线程的限制。

我正在尝试搜索网络，但如果以前在 App Engine 平台上做过，则找不到任何信息。我知道 GAE XMPP API 很酷，但是有一个要求是我不需要使用那个 API，但仍然必须使用 GAE 平台。就像我们不使用 GAE 的 UserService API 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:51:43.137

您可以在[Google Compute Engine](https://cloud.google.com/products/compute-engine)上运行一个。但是，目前不支持在 App Engine 本身上运行 XMPP 服务。

# php - PHP Cookie 登录系统

> ID：13005589
> 
> 赞同：0
> 
> 时间：2012-10-22T05:46:39.840
> 
> 标签：php, mysql, cookies, login, session-cookies

我在查找从我的登录页面存储的 cookie 时遇到问题。这是我的登录页面代码：

```
<?php 
// Connects to your Database 
include("dbconnect.php");
mysql_select_db("maxgee_close2");
//Checks if there is a login cookie

if(isset($_COOKIE['ID_my_site']))
 //if there is, it logs you in and directes you to the members page
{ 
    $username = $_COOKIE['ID_my_site']; 
    $password = $_COOKIE['Key_my_site'];
    $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error());
    while($info = mysql_fetch_array( $check )) 
    {
        if ($password != $info['password'])
        {
        }
        else
        {
            header("Location: members.php");
        }
    }
}
//if the login form is submitted 
if (isset($_POST['submit'])) { // if form has been submitted
 // makes sure they filled it in
    if(!$_POST['username'] | !$_POST['password']) {
        die('You did not fill in a required field.');
    }
    // checks it against the database

    if (!get_magic_quotes_gpc()) {
        $_POST['email'] = addslashes($_POST['email']);
    }
    $check = mysql_query("SELECT * FROM users WHERE username = '".$_POST['username']."'")or die(mysql_error());

    //Gives error if user dosen't exist
    $check2 = mysql_num_rows($check);
    if ($check2 == 0) {
        die('That user does not exist in our database. <a href=add.php>Click Here to Register</a>');
    }
    while($info = mysql_fetch_array( $check ))  
    {
        $_POST['password'] = stripslashes($_POST['password']);

        $info['password'] = stripslashes($info['password']);

        $_POST['password'] = md5($_POST['password']);

        //gives error if the password is wrong

        if ($_POST['password'] != $info['password']) {
            die('Incorrect password, please try again.');
        }
        else 
        { 
            // if login is ok then we add a cookie 
           setcookie("TestCookie", $value, time()+3600);  /* expire in 1 hour */

          //then redirect them to the members area and the line with the error
          header("Location: members.php");
        }
    } 
  }
  else
  { 
    // if they are not logged in
     ?>
     <form action="<?php echo $_SERVER['PHP_SELF']?>" method="post">
     <h1>Login</h1>
     Username:
    <input type="text" name="username" maxlength="40"> 
    Password:
    <input type="password" name="password" maxlength="50"> 
    <input type="submit" name="submit" value="Login">
    </form> 
<?php 
 } 
 include("topsite.php");
?> 
```

会员页面：这是找不到cookies的页面我找到了保存在浏览器中的cookies这个页面只是找不到它们：

```
<?php 
include("dbconnect.php");
mysql_select_db("maxgee_close2");

//checks cookies to make sure they are logged in 

if(isset($_COOKIE['maxgee.me'])) 

 { 

$username = $_COOKIE['maxgee.me']; 

$password = $_COOKIE['maxgee.me']; 

    $check = mysql_query("SELECT * FROM users WHERE username = '$username'")or die(mysql_error()); 

while($info = mysql_fetch_array( $check ))   

    { 

  //if the cookie has the wrong password, they are taken to the login page 

    if ($password != $info['password']) 

        {           header("Location: login_test.php"); 

        } 

    //otherwise they are shown the admin area    

else 

        { 

         echo "Admin Area<p>"; 

   echo "Your Content<p>"; 

   echo "<a href=logout.php>Logout</a>"; 

        } 

    } 

    } 

    else 

   //if the cookie does not exist, they are taken to the login screen 

  {          

   header("Location: login_test.php"); 

   } 

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:54:32.623

您在登录脚本中有错误。

```
if(!$_POST['username'] | !$_POST['password']) {
    die('You did not fill in a required field.');
} 
```

它应该是

```
if(!$_POST['username'] || !$_POST['password']) {
    die('You did not fill in a required field.');
} 
```

此外，您没有将 cookie 存储在您的登录页面中。留意评论

```
// if login is ok then we add a cookie 
```

您还没有在此处添加 cookie。下面是添加cookie的方法。

```
setcookie("TestCookie", $value); 
```

以下是随时间设置cookie的方法。

```
setcookie("TestCookie", $value, time()+3600);  /* expire in 1 hour */ 
```

下面是检索cookie的方法。

```
echo $_COOKIE["TestCookie"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:59:37.540

我意识到这可能不是你想听到的，但我认为你需要重新开始这段代码。对于初学者，您直接写入 $_POST，这对于调试来说是个坏主意。此外，您似乎将密码以明文形式存储在数据库中，并将其存储在 cookie 中！您的网站将成为黑客的梦想。请查看此帖子：

[用户身份验证和密码安全的 PHP 最佳实践](https://stackoverflow.com/questions/1624846/php-best-practices-for-user-authentication-and-password-security)

# c++ - 为什么我的 C++ 队列没有正确出列？

> ID：13005591
> 
> 赞同：0
> 
> 时间：2012-10-22T05:46:48.787
> 
> 标签：c++, debugging, linked-list, queue

我需要基于此标头创建一个 C++ 队列（使用链表）：

```
class queue
{
  public:
    queue(); // constructor - constructs a new empty queue.
    void enqueue( int item ); // enqueues item.
    int dequeue();  // dequeues the front item.
    int front();   // returns the front item without dequeuing it.
    bool empty();  // true iff the queue contains no items.
    int size();  // the current number of items in the queue.
    int remove(int item); // removes all occurrances of item 
      // from the queue, returning the number removed.

  private:
    class node  // node type for the linked list 
    {
       public:
           node(int new_data, node * prev_node, node * next_node){
              data = new_data ;
              next = next_node ;
              prev = prev_node ;
           }
           int data ;
           node * next ;
           node * prev ;
    };

    node * front_p ;
    node * back_p ;
    int current_size ; // current number of elements in the queue.
}; 
```

这是我到目前为止所拥有的：

```
#include <iostream>
#include "queue.h"
using namespace std;

queue::queue(){

    current_size = 0;
    front_p = new node(NULL, NULL, NULL);
    back_p = new node(NULL, NULL, NULL);
}

void queue::enqueue(int item){

    if (current_size == 0){
        node * new_node;
        new_node = new node(item, back_p, front_p);
        front_p->prev = new_node;
        back_p->next = new_node;
        current_size = current_size + 1;
    }

    else if (current_size > 0){
        node * new_node;
        new_node = new node(item, back_p, back_p->next);
        back_p->next = new_node;
        new_node->next->prev = new_node;
        current_size = current_size + 1;
    }
}

int queue::dequeue(){

    if (current_size > 0) {

    node *remove = front_p->prev;

    return remove->data;

    remove-> prev->next = front_p;
    front_p->prev = remove->prev;

    delete remove;

    current_size = current_size - 1;
    }

    else if (current_size == 0) {
        return NULL;
    }

    else {
        return NULL;
    }
}

int queue::front(){

    return front_p -> prev -> data;
}

bool queue::empty(){

    return current_size == 0;
}

int queue::size(){

    return current_size;
}

int queue::remove(int item){

    for (int i = 0; i < current_size; i++){

    }
    return NULL;
}

int main(){

    int int1, int2;
    cout << "Welcome to the double linked list test program" << endl << "Please enter a #" << endl;
    cin >> int1;
    cout << "Another number" << endl;
    cin >> int2;

    queue * main_queue;
    main_queue = new queue();

    main_queue->enqueue(int1);
    main_queue->enqueue(int2);

    cout << "The front element is: " << main_queue->front() << endl;

    cout << "I have dequeued: " << main_queue->dequeue() << endl;

    cout << "The front element now: " << main_queue->front() << endl;

} 
```

但是当我运行程序时，我得到相同的数字三次，表明它没有正确出列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:50:53.170

这是你的问题：

```
if (current_size > 0) {
return front_p->data;
node * temp = front_p;
front_p = front_p->prev;
delete temp;
} 
```

你在 if 语句中做的第一件事就是从函数中返回。之后`return`，不再执行函数中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:53:44.550

我认为您需要将出队代码更改为如下所示。

```
 if(current_size > 0)
 {
   node *remove = front_p->prev;  
   remove-> prev->next = front_p;
   front_p->prev = remove->prev;      
   current_size = current_size - 1;
   return remove->data;  
 } 
```

如上所述，您的 return 语句不允许任何其他代码在其下方执行。

# html - 使用 gmail smtp 服务器发送电子邮件

> ID：13005592
> 
> 赞同：0
> 
> 时间：2012-10-22T05:46:58.587
> 
> 标签：html

我想直接从我的网页发送电子邮件，但我无法访问 smtp 服务器。我知道你可以`smtp.gmail.com`用来做传出的东西，而且我有一个 gmail 帐户。

我的问题是，我可以使用 javascript、html5 或类似的东西来发送电子邮件吗？我不想使用 javascript 的`mailto`工具打开默认邮件客户端，我想在浏览器中做所有事情。是否必须下载 AJAX 才能使用 AJAX 来做（我听说有人用 ajax 做）。我真的不想下载和使用 PHP，因为我没有服务器，也没有时间学习它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:49:49.290

**不**，不是纯 Javascript，html。发送电子邮件需要服务器端处理。并且您不需要下载 ajax（**异步 JavaScript 和 XML**），就像您不需要下载 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:22:06.167

你不能单独使用 javascript 或 ajax 来做到这一点。尝试使用像 php 这样的服务器端语言。php中有很多免费的库。[PHP Mailer](http://phpmailer.worxware.com/)和[Swift Mailer](http://swiftmailer.org)就是一些很好的例子。如果你有一些 PHP 基础，你可以简单地处理这些库。

# javascript - 选择性表单文本颜色更改

> ID：13005594
> 
> 赞同：0
> 
> 时间：2012-10-22T05:47:17.947
> 
> 标签：javascript, html, css, forms, razor

我想在下面的表单代码中将“*”的颜色更改为红色，以便它们更加突出。到目前为止，我还没有找到一种简单的方法来做到这一点。，并且自定义标签在表单中不起作用。

```
<form name="requestForm" action="requestSent.cshtml" onsubmit="return validateRequest()" method="post">

<label>Email Address: *</label><br>
    <input type="text" name="customerEmail" /><br><br>

<label>First Name: *</label><br>
    <input type="text" name="firstName" /><br>
<label>Last Name: </label><br>
    <input type="text" name="lastName" /><br><br>

<label>Phone Number: </label><br>
    <input type="text" name="phoneNumber" /><br><br>

<label>Request: *</label><br>
    <textarea name="customerRequest" cols="40" rows="4"></textarea>

<p><input type="submit" value="Submit" /></p>

<br>
* Required Fields 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:50:44.330

`*`给你所有的s设置一个跨度。

```
<label>Email Address: <span class="red">*</span></label><br> 
```

然后在你的 CSS 中：

```
<style type="text/css">
 .red{
  color: red;
 }
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T05:52:00.520

只需将 * 放入 span 标签并将 css 应用于它，就像

html

```
<label>Email Address: <span class="redSpan">*</span></label> 
```

css

```
.redSpan { color:#F00;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:50:41.127

尝试将 * 包装在 a 中`span`，然后为其应用 css 规则

例如

```
.someclass {
    color: red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T05:52:27.023

试试这个代码

```
<style type="text/css">
.required{color:red;}
</style>
<form name="requestForm" action="requestSent.cshtml" onsubmit="return validateRequest()" method="post">

<label>Email Address: <span class="required">*</span></label><br>
    <input type="text" name="customerEmail" /><br><br>

<label>First Name: <span class="required">*</span></label><br>
    <input type="text" name="firstName" /><br>
<label>Last Name: </label><br>
    <input type="text" name="lastName" /><br><br>

<label>Phone Number: </label><br>
    <input type="text" name="phoneNumber" /><br><br>

<label>Request: <span class="required">*</span></label><br>
    <textarea name="customerRequest" cols="40" rows="4"></textarea>

<p><input type="submit" value="Submit" /></p>

<br>
<span class="required">*</span> Required Fields 
```

# android - AsyncTask 返回变量无法解析

> ID：13005595
> 
> 赞同：0
> 
> 时间：2012-10-22T05:47:25.293
> 
> 标签：android, arraylist, android-asynctask

这个 AsyncTask 代码有什么问题，它阻止它返回数组进度......我在注释行上得到“进度无法解析为变量”。

```
public class FetchProgress extends AsyncTask<OpportunityActivity, Void, ArrayList<Progress>> {
private OpportunityActivity opportunityActivity;

@Override
protected ArrayList<Progress> doInBackground(OpportunityActivity... activity) {
    opportunityActivity = activity[0];             
    String readFeed = readFeed();
    // this JSON feed is delivered correctly

    try {       
       JSONObject json = new JSONObject(readFeed);                 
       JSONObject jsonObject = new JSONObject(json.optString("ShowProgress"));

          Progress progress = new Progress();
          progress.setShowProgress(jsonObject.getBoolean("ShowProgress"));
          progress.setTarget(jsonObject.getInt("Target"));

     // the above values are set correctly and appear if I use Log            

    } catch (Exception e) {    
        e.printStackTrace();
    }
   // HERE'S THE ISSUE: 
   // Eclipse reports "progress cannot be resolved to a variable"
   return progress;
} 
```

这是 OnPostExecute：

```
public void onPostExecute(ArrayList<Progress> progress) {
     opportunityActivity.updateProgress(progress);
} 
```

这是课程：

```
public class Progress {
private boolean showprogress;
private int target;

public boolean getShowProgress() {
    return showprogress;
}
public void setShowProgress(boolean showprogress) {
    this.showprogress = showprogress;
}

public int getTarget() {
    return target;
}

public void setTarget(int target) {
    this.target = target;
}
} 
```

这是 onPostExecute：

```
public void onPostExecute(ArrayList<Progress> progress) {
     opportunityActivity.updateProgress(progress);
} 
```

它在我无法访问传递的 ArrayList 时触发的方法：

```
public void updateProgress(ArrayList<Progress> progress) {      
    progress_text  = (TextView)findViewById(R.id.progress_text);          
    progress_text.setText("Target: " + progress.getTarget());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:50:21.380

剪掉这条线，

```
 Progress progress = new Progress(); 
```

并将其粘贴到 try 语句中。

```
ArrayList<Progress> progressArray=new ArrayList();

  Progress progress = new Progress();

try {       
       JSONObject json = new JSONObject(readFeed);                 
       JSONObject jsonObject = new JSONObject(json.optString("ShowProgress"));

          progress.setShowProgress(jsonObject.getBoolean("ShowProgress"));
          progress.setTarget(jsonObject.getInt("Target"));
       progressArray.add(progress);
     // the above values are set correctly and appear if I use Log            

    } catch (Exception e) {    
        e.printStackTrace();
    }
   return progressArray; 
```

由于您已在 try Catch 中声明并初始化它，因此您的方法看不到它。

**编辑**

但它仍然是错误的，因为它只是您尝试返回的类的对象，而您的方法期望返回类型为 ArrayList 的对象。所以我已经编辑了关于如何返回 ArrayList 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:45:18.987

感谢 Andro（他将获得更多的声誉）。

我终于使用这个循环访问了数组中的值（这似乎没有必要），但它最终从这个一维数组中取出了元素：

```
 for (Progress i : progress) 
   progress_text.setText(i.getOrange() + " / " + i.getTarget() + " hours");        
    progressHours.setMax(i.getTarget());
    progressHours.setProgress(i.getOrange());           
    } 
```

我欢迎就添加第二个维度是否有必要发表评论。

# notepad++ - 如何在记事本++中的两个单词之后在字符串中插入逗号

> ID：13005608
> 
> 赞同：1
> 
> 时间：2012-10-22T05:48:41.580
> 
> 标签：notepad++

我有一个包含姓名和地址电话号码的文本文件。示例 Abdul Rashid a025684t@usa.nit 245 ST.CLOUD VILLAGi CT。# 101 MILPTTAS CA 73634 9600280136 美国男性 1957 年 3 月 10 日星期日 175 195 B+ Abdul Rashid DELVAAJAQUE CAMPBELL CA 3924 美国 8795672807 NO MO NO NO NO RnM-094_1898 1957 年 3 月 10 日星期日 2030.00 美元 2030.00 美元 欧盟1957 年 10 月 男性美国运通 XANAX 37.5 MG 60 美元 430 美元 258.00 美元 20.00 美元 278.00 美元 无货。

我想做这样的事情，Abdul Rashid，z025684t@usa.nit，245 st。云维拉吉 ct. # 101，米尔普塔斯，加利福尼亚州，73634 等等。

使用记事本，我确实尝试了代码对齐，但没有达到我的预期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:26:01.557

小心隐私和安全问题：您正在网络上传播 Rashid 先生的个人数据。关于你的问题没有简单的答案，你应该有一个固定的数据结构，但似乎你没有。也许您应该尝试标准化您的数据。

# c - Malloc ~ Segfault C

> ID：13005623
> 
> 赞同：0
> 
> 时间：2012-10-22T05:50:44.717
> 
> 标签：c, segmentation-fault, malloc

我一直试图找出这个段错误已经有一段时间了，通过 GDB 运行它，当我输入“where”时，就会出现这样的情况：

```
 #0  0x00007ffff7a9bd4a in ?? () from /lib/x86_64-linux-gnu/libc.so.6
 #1  0x00007ffff7a9dfb5 in malloc () from /lib/x86_64-linux-gnu/libc.so.6
 #2  0x00000000004013d1 in CreateGenetic (cityStart=8, cityNum=9, cityWeights=0x7fffffffd270, 
Genetic=0x604160) at main.c:175
 #3  0x0000000000400cb9 in main (argc=2, argv=0x7fffffffdfd8) at main.c:87 
```

还尝试使用 -Wall -Wextra -O 的参数进行编译，但没有出现任何值得注意的问题。无论如何，这里是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <time.h>
typedef struct BruteForce *BF;
typedef struct GeneticAlgorithm *GA;
int Fact(int);
int CreateBrute(int, int, double[20][20], BF);
int Permutations(int, int, int*, int, double**, double[20][20], BF);
int CalcWeight(int, int, int*, double**, double [20][20], BF);
int CreateGenetic(int, int, double [20][20], GA);
int GeneticWeight(int, int, int *, double **, double [20][20], GA);
int IterativePerm(int, int, int *, int, double **, double [20][20], GA);

struct BruteForce {
double eliteOne[20];
double eliteTwo[20];
int size;
};

struct GeneticAlgorithm {
double elite[20][20];
int size;
int generations;
int runs;
double mutation;
int permutation;
};

int main(int argc, char *argv[]) {
int i = 0, j = 0;
if (argc != 2) {
    printf("Missing arguments!\n");
    exit(1);
}
FILE *data = fopen(argv[1], "r");
if (data == 0) {
    printf("Could not open file\n");
    exit(1);
}
double cityWeights[20][20];
double temp;
/********************************************
 *Inputs city weights into 2D array
 *******************************************/
while (!feof(data)) {
    fscanf(data, "%lf", &temp);
    if (i == j && j != 19) {
        cityWeights[i][j] = 0;
        j++;
    } else if (i == j && j >= 19) break;
    cityWeights[i][j] = temp;
    cityWeights[j][i] = temp;
    if (j == 19 && i != 19) {
        i++;
        j = i;
    } else j++;
}
fclose(data);
BF Brute = malloc(sizeof (struct BruteForce));
GA Genetic = malloc(sizeof (struct GeneticAlgorithm));
int cityNum, cityStart;
printf("Number of cities in current run : \n");
scanf("%i", &cityNum);
printf("Starting city : \n");
scanf("%i", &cityStart);
while (cityStart > cityNum || cityStart <= 0) {
    printf("Starting city must be greater than zero and less than number of cities\n");
    printf("Starting city : \n");
    scanf("%i", &cityStart);
}
printf("Number of generations to run : \n");
scanf("%i", &Genetic->generations);
printf("Number of individuals in each generation : \n");
scanf("%i", &Genetic->runs);
printf("Percentage of each generation to be made with mutations : \n");
scanf("%lf", &Genetic->mutation);
Genetic->mutation = (int) ((Genetic->runs * (Genetic->mutation / 100)) + 0.5);
Genetic->permutation = Genetic->runs - Genetic->mutation;
CreateBrute(cityStart, cityNum, cityWeights, Brute);
CreateGenetic(cityStart, cityNum, cityWeights, Genetic);
}

int Fact(int x) {
int i, z = 1;
for (i = 2; i <= x; i++) z *= i;
return z;
}

int CreateBrute(int cityStart, int cityNum, double cityWeights[20][20], BF Brute) {
int i = cityNum - 1;
i = Fact(i);
double** tour;
int x,y;
tour = (double **)malloc(i * sizeof (double*));
for (x = 0; x < i; x++)
    tour[x] = (double *) malloc(cityNum * sizeof (double));
for (i = 0; i < cityNum; i++)
    tour[0][i] = i;
tour[0][0] = cityStart - 1;
tour[0][cityStart - 1] = 0;
i = cityNum - 1;
i = Fact(i);
int count = 1, *countP;
countP = &count;
Brute->size = cityNum;
Brute->eliteOne[cityNum] = 9999;
Brute->eliteTwo[cityNum] = 9999;
Permutations(i, cityNum, countP, cityNum, tour, cityWeights, Brute);
printf("eliteOne is : \n");
for (i = 0; i <= cityNum; i++) printf("%lf ", Brute->eliteOne[i]);
printf("\n");
printf("eliteTwo is : \n");
for (i = 0; i <= cityNum; i++) printf("%lf ", Brute->eliteTwo[i]);
printf("\n");
i = cityNum - 1;
i = Fact(i);

}

int Permutations(int row, int col, int* count, int n, double** tour, double cityWeights[20][20], BF Brute) {
int temp, i, x;
if (n == 1) CalcWeight(row, col, count, tour, cityWeights, Brute);
else {
    for (i = 1; i < n; i++) {
        temp = tour[0][i];
        tour[0][i] = tour[0][n - 1];
        tour[0][n - 1] = temp;
        Permutations(row, col, count, (n - 1), tour, cityWeights, Brute);
        temp = tour[0][i];
        tour[0][i] = tour[0][n - 1];
        tour[0][n - 1] = temp;
    }
}
}

int CalcWeight(int row, int col, int* count, double** tour, double cityWeights[20][20], BF Brute) {
double weight;
int i, xOne, xTwo;
weight = 0;
//Calculates weight of tour
for (i = 0; i < (col - 1); i++) {
    xOne = tour[0][i];
    xTwo = tour[0][i + 1];
    weight += cityWeights[xOne][xTwo];
}
xOne = tour[0][col - 1];
xTwo = tour[0][0];
weight += cityWeights[xOne][xTwo];
tour[0][col] = weight;
if (*count == row) return;
//Stores tours in 2D array
for (i = 0; i <= col; i++) {
    tour[*count][i] = tour[0][i];
}
//Finds best routes
if (tour[*count][col] < Brute->eliteOne[col])
    for (i = 0; i <= col; i++) Brute->eliteOne[i] = tour[*count][i];
else if (tour[*count][col] < Brute->eliteTwo[col])
    for (i = 0; i <= col; i++) Brute->eliteTwo[i] = tour[*count][i];
*count += 1;
}

int CreateGenetic(int cityStart, int cityNum, double cityWeights[20][20], GA Genetic) {
double **tour, **tourMut;
int i, w, x, y, z, a;
tour = (double **) malloc((Genetic->runs + 1) * sizeof (double*));
for (x = 0; x <= Genetic->runs; x++)
    tour[x] = (double *) malloc(cityNum * sizeof (double));
for (i = 0; i < cityNum; i++) {
    tour[0][i] = i;
}
tourMut = malloc(Genetic->runs * sizeof (double*));
for (x = 0; x < Genetic->runs; x++)
    tourMut[x] = malloc(cityNum * sizeof (double));
for (i = 0; i < cityNum; i++) {
    tourMut[0][i] = i;
}
tour[0][0] = (cityStart - 1) * 100;
tour[0][cityStart - 1] = 0;
Genetic->size = cityNum;
Genetic->elite[0][cityNum] = 9999;
Genetic->elite[1][cityNum] = 9999;
int countPerm = 1, countMut = 1, *countPP, *countPG;
countPP = &countPerm;
countPG = &countMut;
for (i = 0; i < Genetic->generations; i++) {
        for (y = 0; y < Genetic->permutation; y++)
            IterativePerm(Genetic->runs, cityNum, countPP, cityNum, tour, cityWeights, Genetic);

        for (a=0; a <= cityNum; a++) tourMut[0][a] = Genetic->elite[0][a];
            tourMut[0][0] *= 100;
        for (z = 0; z < Genetic->mutation; z++){
            IterativePerm(Genetic->runs, cityNum, countPG, cityNum, tourMut, cityWeights, Genetic);
    }
        while(countMut > 1){
        for(w=0; w<=cityNum; w++) {
            tour[countPerm][w] = tourMut[countMut-1][w];}
            countPerm += 1;
            countMut -= 1;
        }
        countPerm = 1;
        countMut = 1;
}
    fprintf(stderr, "Genetic Results\n");
fprintf(stderr, "eliteOne is : \n");
for (i = 0; i <= cityNum; i++) fprintf(stderr, "%lf ", Genetic->elite[0][i]);
fprintf(stderr, "\n");
fprintf(stderr, "eliteTwo is : \n");
for (i = 0; i <= cityNum; i++) fprintf(stderr, "%lf ", Genetic->elite[1][i]);
fprintf(stderr, "\n");

}

int GeneticWeight(int row, int col, int *count, double **tour, double cityWeights[20][20], GA Genetic) {
tour[0][0] /= 100;
double weight;
int i, xOne, xTwo;
weight = 0;
//Calculates weight of tour
for (i = 0; i < (col - 1); i++) {
    xOne = tour[0][i];
    xTwo = tour[0][i + 1];
    weight += cityWeights[xOne][xTwo];
}
xOne = tour[0][col - 1];
xTwo = tour[0][0];
weight += cityWeights[xOne][xTwo];
tour[0][col] = weight;
if (*count == row) return;
//Stores tours in 2D array
for (i = 0; i <= col; i++) {
    tour[*count][i] = tour[0][i];
}
//Finds best routes
if (tour[*count][col] < Genetic->elite[0][col])
    for (i = 0; i <= col; i++) Genetic->elite[0][i] = tour[*count][i];
else if (tour[*count][col] < Genetic->elite[1][col])
    for (i = 0; i <= col; i++) Genetic->elite[1][i] = tour[*count][i];
*count += 1;
tour[0][0] *= 100;
}

int IterativePerm(int row, int col, int *count, int n, double **s, double cityWeights[20][20], GA Genetic) {
int nf = n, i, m, k, p, q;
nf = Fact(nf);
double temp;
for (i = 1; i < nf; i++) {
    m = n - 2;
    while (s[0][m] > s[0][m + 1]) m--;
    k = n - 1;
    while (m < 0)m++;
    while (s[0][m] > s[0][k]) k--;
    temp = s[0][m];
    s[0][m] = s[0][k];
    s[0][k] = temp;
    p = m + 1;
    q = n - 1;

    while (p < q) {
        temp = s[0][p];
        s[0][p] = s[0][q];
        s[0][q] = temp;
        p++;
        q--;
    }
}
GeneticWeight(row, col, count, s, cityWeights, Genetic);
} 
```

我运行的输入如下：

9

8

12

280

37

在打印了一组 EliteTwo 的数字后，程序崩溃了。

编辑：忘了提，程序必须使用包含数字的 .dat 文件运行，我在这里上传了它[http://www.mediafire.com/download.php?scc4pi71trik48e](http://www.mediafire.com/download.php?scc4pi71trik48e)。(gcc name.c cityweights.dat) 我不知道关于发布文件链接的规则，所以希望我这样做不会违反任何规则。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T06:17:14.170

对于这种错误，[valgrind](http://valgrind.org)是你的朋友。使用您的程序，它会立即告诉我们：

```
==23699== Memcheck, a memory error detector
==23699== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==23699== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==23699== Command: ./tso5 cityweights.dat
==23699== Parent PID: 14008
==23699== 
==23699== Invalid write of size 8
==23699==    at 0x400978: CalcWeight (tso5.c:150)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x400C96: Permutations (tso5.c:129)
==23699==    by 0x4010C5: CreateBrute (tso5.c:109)
==23699==    by 0x402188: main (tso5.c:80)
==23699==  Address 0x5213db8 is 0 bytes after a block of size 72 alloc'd
==23699==    at 0x4C28FAC: malloc (vg_replace_malloc.c:236)
==23699==    by 0x400E4A: CreateBrute (tso5.c:97)
==23699==    by 0x402188: main (tso5.c:80) 
```

...加上更多错误。

这个特定的告诉我们，您在第 97 行（在 CreateBrute 中）分配了一个 72 字节的块，但是在第 150 行（在 CalcWeight 中），您写入了 8 个字节，就在这 72 行的末尾。

当您像这样注销 malloc 数组的末尾时，它会破坏 malloc 用来跟踪堆中已分配和释放的内存的信息，结果是随后对 malloc 的调用崩溃......

# javascript - Django html模板：根据类别的选择如何在下拉列表中获取属于所选类别的子类别列表

> ID：13005628
> 
> 赞同：1
> 
> 时间：2012-10-22T05:51:06.447
> 
> 标签：javascript, html, django, django-templates, django-views

我正在做一个 django 应用程序。我需要选择从views.py 传递的两个列表的类别和子类别。子类别列表具有类别列表的外键。要在下拉列表中显示列表，我使用以下代码：

```
<label class="black">Product Category</label>
<select name="prodcatlist" >
{% for id in prodcatlist %}
    <option value="{{id.id}}" selected="selected">{{id.Name}}</option>
{% endfor %}
</select>

<label class="black">Product Sub Category</label>
<select name="ProdSubcatList",id="ProdSubcatList" >
{% for id in ProdSubcatList %}
    <option value="{{id.id}}" selected="selected">{{id.Name}}</option>
{% endfor %}
</select> 
```

有了这个，我在下拉列表中获得了所有子类别列表。这是一个大列表，所以我很困惑选择属于选定类别的子类别。为此，我只想显示包含所选类别 ID 的子类别列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:10:54.560

您将需要在类别下拉列表中使用 XHR（或预建数组，当然）`onchange`来获取所选类别的所有子类别，然后用这些填充子类别下拉列表。

# regex - htaccess 不存在的子域到主域重定向

> ID：13005629
> 
> 赞同：3
> 
> 时间：2012-10-22T05:51:32.517
> 
> 标签：regex, apache, .htaccess, redirect, url-rewriting

需要知道这是否可能？如果是，那怎么办？

主域是：`abc.com`; 子域是：`sub.abc.com`

我想重定向`[alphanumeric].abc.com`除`abc.com`子域（`sub.abc.com`）之外的所有内容。

例如`ajf43vsfvsuvfsg.abc.com`到`abc.com`；“ajfvsfvsuvfsg”不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:01:26.977

尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(sub\.)?abc.com$ [NC]
RewriteRule ^(.*)$ http://abc.com/$1 [L,R] 
```

如果有人`http://blah.abc.com/some/path`在浏览器的 URL 地址栏中键入内容，他们将被重定向到`http://abc.com/some/path`并且地址栏中的地址会更改。

# jquery - 通过canvasOverlay动态在JQPlot中的horizo ntalLine和verticalLine

> ID：13005631
> 
> 赞同：0
> 
> 时间：2012-10-22T05:51:45.417
> 
> 标签：jquery, jquery-plugins, jqplot

我正在使用 JQplot for Bus Time Table 动态开发斜率和平面图。根据我的要求，除了绘制的图表之外，我还想在图表上绘制一些虚线。为此，我静态地使用了**水平线、垂直**线和**canvasOverlay**线。我想动态地绘制这些线。行数和所有需要的点将分别来自 xml 文件本身。据我了解，**canvasOverlay**将 Horizo​​ntalLine 、verticalLine 和 line 作为具有某些属性的数组对象。我想从动态创建的数组中传递这些对象，但我无法实现这些行。非常感谢我的查询的任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T06:22:46.917

这是一个小提琴来解释如何画一条线`canvasOverlay`：

```
$.jqplot.tickNumberFormatter = function(format, val) {
  if (typeof val == 'number') {
    if (val == "3.0") {
      return String("High");
    } else if (val == "2.0") {
      return String("Medium");
    } else if (val == "1.0") {
      return String("Low");
    } else return String(" ");
  } else {
    return String(val);
  }
};

BuildReadinessGraph();

function BuildReadinessGraph() {

  var grid = {
    gridLineWidth: 1.5,
    gridLineColor: 'rgb(235,235,235)',
    drawGridlines: true
  };
  var data = [
    ['2012-09-13', 1],
    ['2012-10-22', 2],
    ['2012-01-12', 3]
  ];

  $.jqplot.postDrawHooks.push(function() {
    $(".jqplot-overlayCanvas-canvas").css('z-index', '0'); //send overlay canvas to back  
    $(".jqplot-series-canvas").css('z-index', '1'); //send series canvas to front         
    $(".jqplot-highlighter-tooltip").css('z-index', '2');
    $(".jqplot-event-canvas").css('z-index', '5'); //must be on the very top since it is responsible for event catching and propagation
  });

  $.jqplot('ChartDIV', [data], {
    series: [{
      showMarker: true
    }],
    seriesDefaults: {
      showMarker: true,
      pointLabels: {
        show: true
      }
    },
    grid: grid,
    highlighter: {
      sizeAdjust: 10,
      show: true,
      tooltipLocation: 'n',
      useAxesFormatters: true
    },

    tickOptions: {
      formatString: '%d'
    },
    canvasOverlay: {
      show: true,
      objects: [{
          line: {
            start: [new Date('2012-05-01').getTime(), 0],
            stop: [new Date('2012-05-10').getTime(), 0],
            lineWidth: 1000,
            color: 'rgba(255, 0, 0,0.45)',
            shadow: false,
            lineCap: 'butt'
          }
        }

      ]
    },
    axes: {
      xaxis: {
        label: 'Dates',
        renderer: $.jqplot.DateAxisRenderer,
        rendererOptions: {
          tickRenderer: $.jqplot.CanvasAxisTickRenderer
        },
        tickOptions: {
          formatString: '%d/%m/%Y',
          angle: -30,
          fontFamily: 'Arial',
          fontSize: '13px',
          fontWeight: 'bold'
        },
        min: "01-01-2012",
        tickInterval: '2 month',
        labelOptions: {
          fontFamily: 'Arial',
          fontSize: '14pt',
          fontWeight: 'bold',
          textColor: '#0070A3'
        }
      },
      yaxis: {
        label: 'Levels',
        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        tickOptions: {
          formatter: $.jqplot.tickNumberFormatter // my formatter
        },
        rendererOptions: {
          tickRenderer: $.jqplot.CanvasAxisTickRenderer
        },
        labelOptions: {
          fontFamily: 'Arial',
          fontSize: '14pt',
          fontWeight: 'bold',
          textColor: '#0070A3',
          angle: -90
        }

      }
    }
  });

};
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/jquery.jqplot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.canvasTextRenderer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.categoryAxisRenderer.js"></script>  
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.canvasAxisLabelRenderer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.canvasAxisTickRenderer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.canvasOverlay.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.dateAxisRenderer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/plugins/jqplot.highlighter.js"></script>

<div id="ChartDIV"> </div>
```

使用有趣的“线”创建代码：

```
 grid:                 
            {
                drawGridLines: true,        // whether to draw lines across the grid or not.
                gridLineColor: '#cccccc',   // Color of the grid lines.
                backgroundColor: "#eee",
                borderColor: '#999999',     // CSS color spec for border around grid.
                borderWidth: 2.0,           // pixel width of border around grid.
                shadow: true,               // draw a shadow for grid.
                shadowAngle: 45,            // angle of the shadow.  Clockwise from x axis.
                shadowOffset: 1.5,          // offset from the line of the shadow.
                shadowWidth: 3,             // width of the stroke for the shadow.
                shadowDepth: 3,             // Number of strokes to make when drawing shadow.
                                            // Each stroke offset by shadowOffset from the last.
                shadowAlpha: 0.07,          // Opacity of the shadow
            },
            canvasOverlay: {
                show: true,
                objects:

                        [
                            {
                                line:
                                {
                                    start : [new Date('2012-01-12').getTime(),20],                                                
                                    stop : [new Date('2012-01-13').getTime(),20],                                                
                                    lineWidth: 1000,
                                    color: 'rgba(255, 0, 0,0.45)',
                                    shadow: false,
                                    lineCap : 'butt'
                                }
                            },                                    
                            {
                                line:
                                {
                                    start : [new Date('2012-01-13').getTime(),20],                                                
                                    stop : [new Date('2012-01-14').getTime(),20],                                                
                                    lineWidth: 1000,
                                    color: 'rgba(255, 0, 0,0.45)',
                                    shadow: false,
                                    lineCap : 'butt'
                                }
                            }
                        ]
            } 
```

这个想法是添加一个“线”部分并调用该`plot.replot();`方法来重绘图形。你可以像这样用你的线点填充一个数组：

```
var myArrayPoints = Array();

var myArrayPoints.push({     line:
                                {
                                    start : [new Date('2012-01-12').getTime(),20],                                                
                                    stop : [new Date('2012-01-13').getTime(),20],                                                
                                    lineWidth: 1000,
                                    color: 'rgba(255, 0, 0,0.45)',
                                    shadow: false,
                                    lineCap : 'butt'
                                }
                            });

//Used in JQPlot like that
canvasOverlay: {
                show: true,
                    objects: [ myArrayPoints ]
               } 
```

# wcf - SOAP 响应 WCF Web 服务

> ID：13005635
> 
> 赞同：2
> 
> 时间：2012-10-22T05:52:07.877
> 
> 标签：wcf, soap

我正在开发基于 SOAP 的 Web 服务。我的问题是是否可以按以下格式创建 SOAP 响应

```
<tagname1>
<tag1> value1 </tag1>
<tag1> value2 </tag1>
</tagname1> 
```

具体来说，我的疑问是我是否可以在两个具有相同标签名（即 tag1）的不同标签内返回 2 个不同的值（即 value1 和 value2 ）

顺便说一句，我创建了一个类，并且我将该类对象作为响应返回，因此该类对象的所有字段都在 SOAP 响应中显示为单独的标签。

**更新**

我找到了部分解决方案。我在响应类中创建了一个数组元素。我使用数组元素来存储列表。当我返回类对象时，这就是我得到的 -

```
<tagname .... >
<a:String> value1 </a:String>
<a:String> value2 </a:String>
<a:String> value3 </a:String>
</tagname> 
```

我可以用实际的标记名替换“a：long”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:28:04.953

SOAP 只是以某种有组织和结构化的方式发送某些数据的特定方式。您可以发送任何遵循 SOAP 规范的格式请求。请求应该是有效的 xml。响应再次由服务器以相同的方式形成。我不是 WCF 方面的专家。但是 SOAP 我可以告诉你，响应应该是一个有效的 xml，仅此而已。但是请注意这件事，谁将使用响应？，如果您仅将其用于内部目的，那么您对任何表示都没有任何问题。但是，如果您打算将其公开为某种公共服务，请让您的回复有意义。

谢谢

# objective-c - 显示韩文字符 - iOS App

> ID：13005636
> 
> 赞同：4
> 
> 时间：2012-10-22T05:52:15.060
> 
> 标签：objective-c, ios, unicode, internationalization, cjk

我正在尝试在我的 iPhone 应用程序中显示韩文文本。该应用程序将字母的 Unicode 一个一个地附加到 NSMutableString 中，并在附加每个字母后在屏幕上显示该字符串。

我知道连接字母有一些规则（Jamo）。

是否有自动将所有这些规则应用于一串字母的功能，或者我是否需要编写代码来进行更改（例如，如果前面有元音，则将辅音更改为尾辅音）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:20:56.173

FCA。是你给我发邮件的吧？因为这里有更详细的问题，所以我会尽量（尽我所能）在这里回答，而不是回复您的电子邮件。

通过阅读你和人们在这里写的全文，我发现你正在制作一个韩文手写识别软件。因此，您不会享受 Apple 提供的韩语输入法的奢华。

我有两件事要说。让我们一一来。（我相信你已经知道我要解释的两件事之一。）

1.  如何撰写韩文文本。

    因此，通过阅读您的询问，它不应该是关于 Unicode 组合/分解的韩语字符串（或只是一系列 Ja（辅音）和 Mo（元音））。您的问题看起来是关于“如何确定用户写的辅音（您的术语是尾辅音，对吗？）是最后一个辅音还是下一个音节的开始辅音。最好的事情是学习韩语，但让我简要解释一下它。

假设你写소방차（消防部门的汽车。）你要写：ㅅㅗㅂㅏㅇㅊㅏ（我又不是在谈论 Unicode 的分解形式。这是关于人们如何写韩文文本。）

当您临时键入ㅗ（即第二个字符）时，显示系统会通过将ㅗ附加到其前面的ㅅ来显示소。它会查找韩国表。（虽然韩文的组装方法是 JoHap 样式（조합형），称为复合样式，但在任何韩国标准中都定义了允许的韩文文本表，称为万星样式（완성형）。因此，您要测试“组装”音节以表看有没有这样的音节）。然后你会在表格中找到“소”。因此，您将显示“소”。

现在写下一个字符“ㅂ”。那么这里就变得有点复杂了。因为表中有一个音节“솝”，所以先将ㅂ附在前面的音节上。因此，它将显示“솝”。不过，事情还没有完全确定。用户写入下一个字符“ㅏ”。可以肯定的是，没有首/首辅音（Ja）就没有音节。它会查表，但找不到音节“ㅏ”。

所以，它会猜测附加到前一个音节的ㅂ（由ㅅ编辑。它是错字）实际上属于第二个音节。它应该显示“소바”。现在输入ㅇ。然后它尝试将ㅇ附加到第二个音节。所以它显示소방。（此时它也可以在表中查找방。并且找到了。）

现在，输入“ㅊ”。可能在内部它可以测试 소방ㅊ，其中 o 和 ㅊ 在 바 下存在（我不会写，因为没有这样的音节与 o 和 ㅊ 在 바 下一起存在，如 밝。）。但是，没有这样的音节。因此，它立即确定ㅊ属于下一个音节。

然后输入“ㅏ”。它将ㅊ和ㅏ组装成차。当您按空格键或返回键或任何其他空格键时，它将完成编写韩文。

这是一个简单的案例。在韩语中，有更复杂的音节，如빨、꼭、헗等。对于第一个辅音，복자음（BokJaUm，双辅音），如빨和꼭中的ㅃ、ㄲ，人们按shift键输入ㅂ和ㅅ。然后会显示ㅃ和ㄲ。因此，如果用户使用键盘键入，则可以很容易地找出辅音并确定它所属的位置（前一个音节或下一个音节）。（不过，有一些适用于 Windows 和 Xterm 的不错的韩语输入法，它允许输入 ㅂ 两次以生成 ㅃ。这是一种智能功能。但是测试像 빱빠라빱、흙을 这样的文本可能会很复杂，因为您最终会测试3 或 4 个辅音，如 {1,3}、{2,2}、{3, 1}。

坏消息是……因为您正在编写手写识别，如果您将识别的韩文字符一个一个地输入韩文输入法引擎，您可能需要处理这种复杂的情况。但是，如果您在应用程序中编写自己的输入法，您可以维护自己的状态机，这样会更容易。但正如你所看到的，这是一种权衡。取决于现有的输入法引擎并将每个字符摄取到其中。（嗯......等等......也许输入法引擎也可以处理那些复杂的情况。）

仅供参考，我想介绍两个开源项目。一个是[Mac 的韩语输入法查找器模块](http://code.google.com/p/hanulim/)，另一个是[输入法引擎](http://code.google.com/p/libhangul/)，您可以使用它制作韩语输入法。[此外，这里](http://code.google.com/p/nabi/)还有一个用于 X-Windows 的韩语输入法。如果您更喜欢查找 Windows 项目，[这里有一个](http://kldp.net/projects/saenaru/).

后两者托管在韩国开源项目托管网站 KLDP.net，但它们被转移到了 Google 代码。据我记得，“SaeNaRu”和“Nabi”（蝴蝶）可以支持两次输入相同的辅音以形成双辅音。

有关更多详细信息，您可以查找 libhangul 和 nabi。（我记得之前libhangul和nabi的输入法部分代码几乎是一样的。但是当时他们是分开的，期望独立进化。所以，我猜他们是不同的。

好的。第一件事就完成了。

现在让我们继续讨论第二个问题。（这是我说你可能已经知道的部分。但为了完成我的解释，让我也解释一下。）

这是关于选择什么字符作为可能的韩语输入法状态机或像 libhangul 这样的引擎的输入。组合（显示）韩文字符基本上有两种表示形式：组合和分解。组合的一个包含完全组合的字符。例如，사랑합니다，每个音节、사、랑、합、니、다都是这样保存的。它们不存储为ㅅ，ㅏ，ㄹ，ㅏ，ㅇ，ㅎ，ㅏ，ㅂ，ㄴ，ㅣ，ㄷ，ㅏ。那是 Unicode 中的组合表示。这种表示通常由文本编辑器等使用。另一种表示在 Unicode 中分解。就像ㅅ，ㅏ，ㄹ，ㅏ，ㅇ，ㅎ，ㅏ，ㅂ，ㄴ，ㅣ，ㄷ，ㅏ。

这种表示通常由文件系统使用。例如，如果您在 Windows 上将文件名放在韩文中，并从 Mac 访问包含它的文件夹，它会显示为ㅅㅏㄹㅏㅇㅎㅏㅂㄴㅣㄷㅏ，尽管它在 Windows 上显示为사랑합니다。

但是，如果没记错的话，还有另一组字符，它只是韩文辅音和元音的列表。尽管它们可能看起来与分解的音节相同或相似，但它们实际上是不同的，因为它们的绘制位置位于字符绘制的中间空间。它的目的是为了教育目的（或任何其他目的）在韩语字母表或类似的东西中显示韩文字符。

因此，我不确定要将哪些字符（即韩语辅音和元音列表的分解字符或字符）摄取到您选择或实现的输入法状态机或输入法引擎中。如果你实现它，它是你的选择，但如果你为引擎使用一些外部库，你需要弄清楚。

此外，正如我在博客文章中提到的，每个组合和分解表示中都有两个变体，它们都是在 Unicode 标准中定义的。所以，嗯..是的..我同意。这是相当多的工作。

至于我，我尝试为 Mac 制作输入法，（当苹果宣布他们将摆脱 Finder 插件架构以解决安全问题时），但当时 libhangul（是的.. 我尝试使用它）正在改变很多。所以，直到它稳定下来，我决定推迟。但是因为工作很忙，回到家很累，所以在自己的输入法上没有进步。所以，我相信 libhangul 项目的状态现在比以往任何时候都好。所以，最好至少看看它。

此外，如果您没有 Windows，最好尝试 hanterm 或任何本身支持韩文输入的 xterm 衍生产品。源代码将在他们的托管网站上提供。

祝你的项目好运，如果有更多问题要问我，请这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:40:20.280

查看这些系统级文本输入工具。我从未使用过这些，但看起来很有希望。

*   [http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html#//apple_ref/doc/uid/TP40009542-CH4-SW8](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html#//apple_ref/doc/uid/TP40009542-CH4-SW8)

*   [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITextInput](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInput_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITextInput)

* * *

因为 iOS 不支持系统范围的键盘自定义，所以每个人都只使用系统默认输入工具。每个操作系统或平台对韩文组合的处理都是不同的。（MS/Apple/Samsung/LG 或其他）所以最好的方法是使用系统提供的工具，如 UITextField 为用户提供一致性。或者你应该准确地模拟你的平台操作系统是如何做到的。当然你可以自己制作，但用户不会喜欢它。

虽然我不是这个主题的专家 - 韩国韩文合成器 - 但我认为没有没有表查找的简单算法。无论如何，如果你真的想自己实现它，这些都是你必须处理的核心问题。

*   将您的视觉符号合成为 Unicode 中定义的辅音和元音。
*   通过元音的位置确定初始辅音/最终辅音。

它不会那么难，但无论如何修改前面的字符序列的能力是*必需*的。*除非您有看起来相同*的初始/最终辅音的单独键，否则您不能仅使用单向流实现韩语输入。

Unicode 定义了所有有效的 Jamo 组件集。通常这些组件太多而无法在设备上呈现。而且效率低下。大多数韩国输入系统会再次分解这些 Jamo，并在合成最后的垃圾之前将它们合成一次。您还可以像韩国人一样在视觉上识别和分解它们。

在您获得 Unicode 标准中定义的声母/韵母和元音后，Unicode 规范化功能（例如`-[NSString precomposedStringWithCompatibilityMapping]`）将完成其余工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T03:01:18.677

libhangul（code.google.com/p/libhangul）进行转换！它有几个功能来处理不同类型的键盘（即具有不同布局的键盘）并将键转换为韩文的 Unicode。它还有几个功能可以将韩文组合成音节（它们基本上实现了 Eonil 在他的回复中提到的表查找）。

Libhangul 在接收到 Hangul 时将它们存储在其缓冲区中（它不输出它们）。在接收到足够的韩文并成功将它们转换为音节后，它会输出音节。不幸的是，这对用户来说是相当混乱的。解决此问题的方法是在屏幕上显示缓冲区内容。收到新的韩文后，必须删除已显示的内容。如果音节已成功形成，则显示该音节。否则，将再次显示缓冲区内容。请注意，您不能只在屏幕上显示新的韩文。您必须擦除之前显示的内容，并从缓冲区中读取以前的 Hanguls 和新的 Hanguls，然后再次将它们显示在屏幕上。原因是 Libhangul 可能会更改存储在缓冲区中的以前 Hangul 的代码，以便将它们与新 Hangul 结合起来。这样，您将获得更新的韩文。

另请注意，如果用户更改光标的位置，则必须清空缓冲区。此外，如果用户按下退格键，则屏幕上显示的最后一个韩文必须被擦除，并且必须从缓冲区中删除。Libhangul 还有一些纠正错别字的功能。例如，如果您键入ᅡ 和 ᄉ，它会将它们转换为사。

感谢 JongAm Park 和 Eonil 的帮助和深思熟虑的评论！由于此时我的声誉低于 15，因此我无法投票赞成您的答案，但我会尽可能地投票。

# python - 在 Windows 7 中触发下一张壁纸？

> ID：13005638
> 
> 赞同：0
> 
> 时间：2012-10-22T05:52:22.157
> 
> 标签：python, windows, windows-7, wallpaper

如何触发 Windows 7 壁纸图像的“下一个背景图像”选项？[您可以使用此解决方案](https://stackoverflow.com/q/4404771/541208)动态设置图像，但我想让 Windows 为我完成这项工作。

[触发墙纸随机播放的 Windows API](https://stackoverflow.com/q/9853393/541208)似乎使用某种 ActiveDesktop 解决方案，但它是在 C# 中。

目前，我刚刚为以下（python）代码创建了一个快捷方式来单击，从而节省了我的右键单击。

```
import win32api, win32con
import SendKeys

def click(x=-1,y=-1):
    oldX, oldY = win32api.GetCursorPos()
    win32api.SetCursorPos((x,y))
    win32api.mouse_event(win32con.MOUSEEVENTF_RIGHTDOWN,x,y,0,0)
    win32api.mouse_event(win32con.MOUSEEVENTF_RIGHTUP,x,y,0,0)
    win32api.SetCursorPos((oldX, oldY))        

click(x=1920)
SendKeys.SendKeys('N') 
```

# delphi - 从 Delphi 2009 升级到 XE3 的编译器内部错误

> ID：13005646
> 
> 赞同：0
> 
> 时间：2012-10-22T05:52:55.160
> 
> 标签：delphi, delphi-xe3

用delphi XE3编译一个相当大的项目（> 750K行）（从2009升级）

收到以下错误

> [dcc32 致命错误] MainForm.pas(3170): F2084 内部错误: URW1147

与这个问题类似，但是代码中没有使用泛型。

[泛型数组的内部错误](https://stackoverflow.com/questions/9429484/what-should-i-do-about-an-internal-error-when-i-declare-a-generic-array-of-t)

该错误不对应于代码行，而只是文件的末尾。

即在“结束”之后。

在谷歌搜索之后，我还尝试了“代码内联控件”的所有设置，但没有任何乐趣。

不知道从哪里（其他）开始寻找，并会感谢任何有根据的反馈（甚至可能是一个疯狂的猜测）。

尚未提交质量控制报告，希望从这里得到有用的反馈。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:20:13.480

根据上面大卫的建议，通过一次剥离一段代码来解决这个问题。

如果这对任何人都有帮助，请遵循解决方案......

结果发现有一个“泛型”代码的“剩余”片段，该片段被认为已在几年前被删除并使用更传统的技术替换。

有一个未重构的局部变量，定义如下。

```
var
  TestProc: TProc; 
```

当按照以下分配时，会触发内部编译器错误（但离违规的代码行很远）。

```
TestProc := TestSuite.TestProcs[i].TestProc; 
```

上面的数组元素 TestProc 是**object 类型的过程**。

这在 2009 年下编译（并且工作完美），这就是为什么它没有更早被拾取，但在 XE3 下会出现内部编译器错误。

更正局部变量声明（对象过程）解决了这个问题。

# ruby-on-rails - Capybara 测试：Errno::ETIMEDOUT 操作超时 - connect(2)

> ID：13005649
> 
> 赞同：1
> 
> 时间：2012-10-22T05:53:50.517
> 
> 标签：ruby-on-rails, capybara

在执行过程中出现以下错误，其他人遇到过以下问题吗？

```
由于异常而停止：

Errno::ETIMEDOUT 操作超时 - 连接 (2)

/Users/dan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
/Users/dan/Documents/Working Directory/One-Big-Switch-Website/spec/requests/admin/role_editing_spec.rb:10:in `block (2 levels) in '

```

我的测试：

```
它“作为超级管理员，我可以为用户添加角色”
    访问 admin_dashboard_index_path ----- 第 10 行
    login_admin_user(super_admin)
    访问 admin_users_path

    page.should have_css("h2", :text => "Users")
    page.within("tr", :text => user.email) 做
      click_link "更新"
    结尾
    page.should have_field("user_password")
  结尾

```

# android - 防止由于方向变化而导致android中的状态变化

> ID：13005651
> 
> 赞同：1
> 
> 时间：2012-10-22T05:53:56.980
> 
> 标签：android, orientation

我在手动创建的应用程序中使用 SQLiteDatabase，然后在 android 应用程序中使用它。要浏览它，我正在使用光标。我正在显示编辑文本中的行的结果。

当方向改变时，无论显示哪一行，第一行都会显示在编辑文本中。我知道 android 会在方向更改时重新创建活动并再次调用 onCreate() 方法。

但是根据[文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)，我不应该在 onRetainNonConfigurationInstance() 中存储游标对象，因为它使用了上下文。

这是创建光标的代码。

```
DataBaseHelper myDbHelper = new DataBaseHelper(this);
Cursor c=myDbHelper.getDatabase().rawQuery("SELECT * FROM mytable",null); 
```

另一种推荐的方法是手动处理更改，但我不想这样做，因为我想利用 UI 的默认调整。

当方向改变时，如何继续使用同一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:09:18.240

最简单的方法之一是将其添加到您的清单文件中（用于相关活动） -

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

# java - 在java中，为什么未初始化的char可以但不是String

> ID：13005652
> 
> 赞同：2
> 
> 时间：2012-10-22T05:54:18.287
> 
> 标签：java, initialization

在下面的代码中，如果未初始化字符串名称，则会出现编译错误，但未初始化字符初始没有问题。为什么会有这种行为差异？

```
class Demo {
    public static void main(String[] args) {
        char initial;
        String name;
        for (String input: args) {
            name += input;
            initial = input.charAt(0);
            System.out.print(initial + " ");
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T05:57:17.963

您在读取它之前分配了字符（在该`System.out.println()`行中），但您没有在读取它之前分配字符串，这发生在该`name += input`行中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T05:57:49.710

```
name += input; 
```

相当于

```
name = name + input; 
```

您正在使用`name`（局部变量）而不对其进行初始化。这是错误的原因。具体来说，您正在尝试将未初始化`name`的`input`.

```
initial = input.charAt(0); 
```

在这里，您在 print 语句中使用它之前对其进行初始化。因此没有错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T05:59:08.510

第一次使用 initial 时，它被设置为一个值：

```
initial = input.charAt(0); 
```

第一次使用名称时，它在计算中使用空值：

```
name += input; // is equivalent to
name = null + input; 
```

由于 name 尚未初始化（参见 += 的含义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T06:00:54.247

char 是一个原语，它们会自动初始化（如果 char 为 \u0000）。既然您没有初始化名称，那么 name+= 输入就没有意义了。您可能打算以“”值开始名称。

# python - Json 解码错误 - 出现在 json.loads() 而不是文本上的奇怪字符

> ID：13005653
> 
> 赞同：0
> 
> 时间：2012-10-22T05:54:25.907
> 
> 标签：python, json

我正在尝试对[http://api.stackoverflow.com/1.1/badges/name进行 API 调用](http://api.stackoverflow.com/1.1/badges/name)

我的代码片段 -

```
url = 'http://api.stackoverflow.com/1.1/badges/name'
f = urllib2.urlopen(url)
content = f.read()
jsonobj = json.loads(content)
print jsonobj 
```

这给了我错误 - ValueError: No JSON object could be decoded

当我尝试[http://jsonviewer.stack.hu](http://jsonviewer.stack.hu) 从上面的 URL 加载 json 对象时，它显示了乱码。你可以在这里看到输出 - [http://jsonviewer.stack.hu/#http://api.stackoverflow.com/1.1/badges/name](http://jsonviewer.stack.hu/#http://api.stackoverflow.com/1.1/badges/name)

如果您转到[http://api.stackoverflow.com/1.1/badges/name ，则文本会正常显示在浏览器窗口中](http://api.stackoverflow.com/1.1/badges/name)

我尝试添加 UTF-8 编码 -

```
jsonobj = json.loads(content, encoding = 'UTF-8') 
```

但它仍然给出同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:00:58.050

根据[http://api.stackoverflow.com/1.0/usage](http://api.stackoverflow.com/1.0/usage)返回的信息被压缩。您必须解压缩二进制数据才能获得实际的 JSON。您可以使用`gzip`和`StringIO`模块执行此操作：

```
url = urllib2.urlopen('http://api.stackoverflow.com/1.1/badges/name')
zippedContents = url.read()
sio = StringIO.StringIO(zippedContents)
gz = gzip.GzipFile(fileobj=sio)
print gz.read() 
```

# facebook - 检测用户是否正在使用他们的主帐户

> ID：13005655
> 
> 赞同：0
> 
> 时间：2012-10-22T05:54:32.710
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

有没有办法检测访问您的页面标签应用程序的用户正在使用他们的页面或他们的主 fb 帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:53:24.400

如果尚未尝试过，您能否打印并检查当用户作为页面访问以及用户作为 Facebook 用户访问时签名请求的外观。理想情况下，Signed Request 的 Liked 部分不应出现在作为 Page 访问的用户中。我假设这是因为当您将页面选项卡作为页面访问时，右上角的“喜欢”按钮被删除。

# javascript - PhoneGap + Childbrowser + 错误

> ID：13005659
> 
> 赞同：3
> 
> 时间：2012-10-22T05:55:01.687
> 
> 标签：javascript, android, cordova, phonegap-plugins, childbrowser

我正在尝试在我的应用程序中使用 Childbrowser 插件。我的代码如下：

```
ChildBrowser.prototype.showWebPage = function(url, options) {
    options = options || {
        showLocationBar: true,
        locationBarAlign: "top"
    };
    //Code Runs up to this point
    cordova.exec(this._onEvent, this._onError, "ChildBrowser", "showWebPage", [url, options]);
}; 
```

代码的最后一行什么都不做。它没有给出任何错误，但没有显示网页。我使用的是安卓 2.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:40:33.210

您似乎错误地定义了这一点，我认为它应该如下所示：

```
var url = "http://www.google.com";

window.plugins.childBrowser.showWebPage( url, {showLocationBar: true});// This opens the webpage. 
```

我不太明白你为什么使用`ChildBrowser.prototype.showWebPage`

# ios - 初始应用程序启动时启动图像不会消失，但此后会消失

> ID：13005661
> 
> 赞同：1
> 
> 时间：2012-10-22T05:55:10.650
> 
> 标签：ios, trigger.io

我正在使用 Trigger.IO 的工具包来添加启动图像。这样做之后，应用程序在最初启动应用程序后无法将它们从视图中删除。回到家然后回到应用程序后，启动图像在启动后消失。

该应用程序在启动后实际上并没有冻结，而只是将启动图像保持在最前面。我最初使用了一个部分透明的图像，它看起来只是有一个高 z-index。我可以使用该应用程序，但启动图像仍保留在屏幕上所有内容的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:01:57.543

从平台版本 v1.4.20 开始，您可以控制启动图像的可见性 (http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-20)。

我们已经看到了一些非常早期使用 Forge API 导致启动图像不显示的实例。在大多数情况下，让启动图像手动隐藏是可以的；如果您遇到问题或想要更多地控制启动图像，您可以使用 forge.launchimage.hide。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:37:09.743

很奇怪，即使我没有尝试直接解决它，考虑到它只是一个配置文件更改，问题似乎已经消失了。

如果问题再次出现，我会报告，但目前一切正常！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T06:05:27.663

尝试添加以使用此代码行

```
[window setRootViewController:mainController]; 
```

如需全面帮助，我们需要一些您的代码

# r - 在 R 中的 XTS 中提取每月的第 n 天

> ID：13005663
> 
> 赞同：5
> 
> 时间：2012-10-22T05:55:33.823
> 
> 标签：r, subset, xts

我的问题与这里提出的问题密切相关：[Pull Return from the first business day from XTS object using R](https://stackoverflow.com/questions/10994496/pull-return-from-first-business-day-of-the-month-from-xts-object-using-r)。

我不想提取每个月的第一天，而是提取每个月的第 10 个数据点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T06:19:01.953

使用您链接到的问题中的相同示例数据，您可以进行一些基本的子集设置。

这是示例数据：

```
library(xts)
data(sample_matrix)
x <- as.xts(sample_matrix) 
```

这是子集：

```
x[format(index(x), "%d") == "10"]
#                Open     High      Low    Close
# 2007-01-10 49.91228 50.13053 49.91228 49.97246
# 2007-02-10 50.68923 50.72696 50.60707 50.69562
# 2007-03-10 49.79370 49.88984 49.70385 49.88698
# 2007-04-10 49.55704 49.78776 49.55704 49.76984
# 2007-05-10 48.83479 48.84549 48.38001 48.38001
# 2007-06-10 47.74899 47.74899 47.28685 47.28685 
```

这是你要找的吗？

* * *

使用`%in%`会给你更多的灵活性。例如，如果您想要每个月的第十天、第十一天和第十二天，您可以使用`x[format(index(x), "%d") %in% c("10", "11", "12")]`。

* * *

### 更新

如果您在更新中想要提取第十个*数据点*，只需使用匿名函数，如下所示：

```
do.call(rbind, lapply(split(x, "months"), function(x) x[10]))
#                Open     High      Low    Close
# 2007-01-11 49.88529 50.23910 49.88529 50.23910
# 2007-02-10 50.68923 50.72696 50.60707 50.69562
# 2007-03-10 49.79370 49.88984 49.70385 49.88698
# 2007-04-10 49.55704 49.78776 49.55704 49.76984
# 2007-05-10 48.83479 48.84549 48.38001 48.38001
# 2007-06-10 47.74899 47.74899 47.28685 47.28685 
```

请注意，第一行是该月的*第十*一天，因为数据实际上是从 2007 年 1 月 2 日开始的。

```
x[1, ]
#                Open     High      Low    Close
# 2007-01-02 50.03978 50.11778 49.95041 50.11778 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:27:52.113

**xts**为这些类型的子集提供了一些内置函数。

```
> data(sample_matrix)
> x <- as.xts(sample_matrix)
> x[.indexmday(x) == 10]
               Open     High      Low    Close
2007-01-10 49.91228 50.13053 49.91228 49.97246
2007-02-10 50.68923 50.72696 50.60707 50.69562
2007-03-10 49.79370 49.88984 49.70385 49.88698
2007-04-10 49.55704 49.78776 49.55704 49.76984
2007-05-10 48.83479 48.84549 48.38001 48.38001
2007-06-10 47.74899 47.74899 47.28685 47.28685 
```

有关所有这些的列表，请参见帮助页面`?indexClass`。

# iphone - 结束时的转换触发事件

> ID：13005664
> 
> 赞同：0
> 
> 时间：2012-10-22T05:55:40.270
> 
> 标签：iphone

我使用下面的代码添加动画

```
animation.startProgress=fromPosition;
animation.endProgress=toPosition ; 
```

动画到达toPosition时是否可以获取事件？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:01:40.473

你有没有想过考虑[这个](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)？

```
animateWithDuration:animations:completion: 
```

并添加完成处理程序块。

# ruby-on-rails - 如何在 URL 中使用 Rails 资源的另一个属性？

> ID：13005665
> 
> 赞同：2
> 
> 时间：2012-10-22T05:55:44.000
> 
> 标签：ruby-on-rails, ruby, url, activerecord

我正在尝试按照[http://railscasts.com/episodes/63-model-name-in-url](http://railscasts.com/episodes/63-model-name-in-url)来实现如下所示的 URL：

`/dog/<custom field of dog>`

代替

`/dog/1`

其中“1”是 Dogs 表的内部主键。我想要的自定义字段恰好是 Dogs 字段中的另一个整数。

我的代码：

狗控制器.rb：

```
load_and_authorize_resource :except => [:index]    
def show
       Rails.logger.info("Hello")
       @dog = Dog.find_by_custom_field(params[:id])
    end 
```

狗.rb：

```
def to_param
    custom_field
end 
```

特别是，当我尝试加载时`/dogs/<custom_field>`，它仍然坚持使用该整数作为主键查找，而不是在自定义字段上查找。所以我得到一个`Couldn't find Dog with id=<custom_field>`. 错误

有趣的是，当我尝试这样做时，记录器行也永远不会被打印出来。但是，当我删除`load_and_authorize_resource`(CanCan) 行时，它就可以工作了。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:18:39.383

用于使用 id pass :find_by 选项以外的其他属性

```
 load_and_authorize_resource :except => [:index]  , :find_by => :custom # will use find_by_custom!(params[:id]) 
```

有关更多信息，请阅读控制器方法的 cancan 手册 [http://rdoc.info/github/ryanb/cancan/master/CanCan/ControllerAdditions/ClassMethods](http://rdoc.info/github/ryanb/cancan/master/CanCan/ControllerAdditions/ClassMethods)

# silverlight - 如何从 KeyDown 事件 windows phone 中获取按下的字符

> ID：13005666
> 
> 赞同：1
> 
> 时间：2012-10-22T05:55:50.377
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone

我正在开发一个 Windows 手机应用程序。我想获取用户按下的键的值。我想检查它是否是数字或任何其他字母或特殊字符。因为我的文本框用于输入货币。所以我需要防止用户输入字母或任何特殊字符。只允许输入数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T06:14:43.347

这就是我通常拒绝击键的方式

```
private void TextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.D1)
    {
        // reject this key and do not show in textbox
        e.Handled = true;
    }
} 
```

**编辑：**请参阅[如何在 Silverlight 中创建数字文本框？](https://stackoverflow.com/questions/268207/how-to-create-a-numeric-textbox-in-silverlight/1469073#1469073)更通过实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:39:10.877

要限制用户只能输入数字，请将 设置`inputscope`为数字。有关更多详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/gg521152 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/gg521152(v=vs.92).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:07:45.080

keydown 事件处理程序：

KeyEventArgs e

e.Key是枚举类型Key，可以通过这个参数获取字符枚举

# cordova - 已部署的移动应用程序 | 同源政策？

> ID：13005667
> 
> 赞同：0
> 
> 时间：2012-10-22T05:55:51.597
> 
> 标签：cordova, jquery-mobile, same-origin-policy

我有一个 html5-JQM 移动应用程序，其后端使用 DEPLOYD 构建。由于我将 JQuery Mobile 用于我的移动应用程序（截至目前从文件结构运行）并且同时[在这里](http://xyz.deploydapp.com/)连接到我的云实例，这相当于违反了同源策略，因此 CHROME 停止了它。

出于测试目的，我以不安全的方式运行 chrome。 *Chrome\Application\chrome.exe --allow-file-access-from-files --disable-web-security*

现在，一旦我完成了我的移动应用程序，我将使用 PhoneGap 来生成构建。我的目标平台是安卓。AFAIK，PhoneGap 在本机 webUI 控件中调用我的 web 应用程序。

问题 - 同源策略是否也适用于移动场景？- 我问这个是因为，Deployd 目前不支持 JSONP，如果上述问题的答案是真的，那么我将不得不认真重新考虑我的后端。

你能在这里指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T00:32:39.500

如果我对 PhoneGap 的理解正确，你应该可以毫无问题地提出跨域请求。无论如何，较新版本的 Deployd 原生支持 CORS，因此 JSONP（这不是神奇的跨域项目符号，因为它只支持 GET）不是必需的。

# code-readability - OpenCMIS/DotCMIS：我有 CmisFolder 和文件名，如何获取 CmisDocument？

> ID：13005672
> 
> 赞同：0
> 
> 时间：2012-10-22T05:56:59.117
> 
> 标签：code-readability, cmis, dotcmis, opencmis

我想得到这个 CMIS 远程文件的 CmisDocument `server1/dir1/file1`：.

我已经有 CmisFolder 用于`server1/dir1`.
我也有文件名`"file1"`作为字符串。

获取 CmisDocument 的任何优雅方式？

以下是**我非常不雅的尝试**：

```
IDocument document = null;
foreach(ICmisObject obj in remoteFolder.GetChildren())
{
    if (obj is IDocument)
    {
        document = (IDocument)obj;
        if (document.Name.Equals(fileName))
        {
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:24:43.677

您可以尝试使用查询：

```
string statement = "select * from cmis:document where cmis:contentStreamFileName = 'filename' and in_folder('myfolderid')"; 

IItemEnumerable<IQueryResult> qr = session.Query(statement, true); 
```

您还可以将 cmis:document 更改为包含您的文档的特定表/类，以使您的查询更快一些。

# sql - Oracle 11g Select Distinct Not Unique

> ID：13005682
> 
> 赞同：2
> 
> 时间：2012-10-22T05:58:18.007
> 
> 标签：sql, oracle, oracle11g

我有点迷失了这个简单的查询

以下是日期查询（**SERVICE_DATE**）：

```
SELECT DISTINCT JOB_ID,
       SERVICE_DATE,
       GRAND_TOTAL,
       TYPE_INSERT,
       PAYMENT_ID
FROM   TBL_XXX
WHERE  USER_ID = 100
       AND PAYMENT_ID <> 0
ORDER  BY JOB_ID DESC; 
```

我得到了这个结果：

```
467 18/10/2012  16  Upload  527811
467 18/10/2012  16  Upload  527811
466 18/10/2012  4   Key-In  527806
465 18/10/2012  4   Key-In  527804
464 17/10/2012  24  Upload  527784
464 17/10/2012  24  Upload  527784
464 17/10/2012  24  Upload  527784 
```

而这个没有日期的查询（**SERVICE_DATE**）

```
SELECT DISTINCT JOB_ID,
       GRAND_TOTAL,
       TYPE_INSERT,
       PAYMENT_ID
FROM   TBL_XXX
WHERE  USER_ID = 100
       AND PAYMENT_ID <> 0
ORDER  BY JOB_ID DESC; 
```

结果：

```
467 16  Upload  527811
466 4   Key-In  527806
465 4   Key-In  527804
464 24  Upload  527784 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:09:44.990

您的 service_date 是包含时间部分的日期，但您的 IDE 仅显示日期部分。

要查看详细信息，您可以更改 IDE 的日期格式首选项或使用：

```
SELECT DISTINCT JOB_ID,
       to_char(SERVICE_DATE,'yyyy-mon-dd hh24:mi:ss'),
       GRAND_TOTAL,
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:04:53.360

如果它有效，请尝试运行它，我认为它与您有关`SERVICE_DATE`，所以我修改了您的查询以使用`ROW_NUMBER()`和 windows 功能。

```
SELECT  JOB_ID,
        SERVICE_DATE,
        GRAND_TOTAL,
        TYPE_INSERT,
        PAYMENT_ID
FROM
    (
        SELECT JOB_ID,
               SERVICE_DATE,
               GRAND_TOTAL,
               TYPE_INSERT,
               PAYMENT_ID,
               ROW_NUMBER() OVER (PARTITION BY JOB_ID 
                                  ORDER BY SERVICE_DATE DESC) rn
        FROM   TBL_XXX
        WHERE  USER_ID = 100
               AND PAYMENT_ID <> 0
    ) x
WHERE rn = 1
ORDER BY JOB_ID DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:12:09.340

Oracle[数据类型](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i1847)还包含小时、分钟和秒，您的 sql 客户端仅显示年-月-日部分。这种差异导致了奇怪的结果。您可以使用[trunc](http://www.techonthenet.com/oracle/functions/trunc_date.php) (service_date) 仅使用日期部分并保留 service_date 列的数据类型。

# c# - 如何在给定状态下停止 foreach 循环

> ID：13005684
> 
> 赞同：1
> 
> 时间：2012-10-22T05:58:40.873
> 
> 标签：c#

```
foreach (String host   in hostArray)
{
    string s1 = hostArray[t];
    string s2 = branchArray[t];
    string con_msg;
    t=t+1;
    TcpClient socketForServer;
    try
    {
        socketForServer = new TcpClient(s1, 10);
        con_msg="Connected";
    }
    catch
    {
        ListViewItem item = new ListViewItem();
        item.BackColor = Color.LightGreen;
        item.Text = (s2);
        item.SubItems.Add(s1);
        item.SubItems.Add("Not found");
        listView1.Items.Add(item);
        con_msg = "Not connected";
        // I want to exit this round in here and and start next round  how to do it 
    }

    NetworkStream networkStream = socketForServer.GetStream();
    System.IO.StreamReader streamReader =  new System.IO.StreamReader(networkStream);
    System.IO.StreamWriter streamWriter =new System.IO.StreamWriter(networkStream);
    //code
} 
```

我想退出当前回合并开始下一轮。怎么做。我不想退出 foreach 循环，我只想退出当前回合并开始下一轮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:00:59.343

用来`continue`做那件事。查看[文档](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:06:53.693

**continue**语句将控制权传递给它出现的封闭迭代语句的下一次迭代。

以下是代码中**continue**语句的样子：

```
foreach (String host   in hostArray)
{
    string s1 = hostArray[t];
    string s2 = branchArray[t];
    string con_msg;
    t=t+1;
    TcpClient socketForServer;
    try
    {
        socketForServer = new TcpClient(s1, 10);
        con_msg="Connected";
    }
    catch
    {
        ListViewItem item = new ListViewItem();
        item.BackColor = Color.LightGreen;
        item.Text = (s2);
        item.SubItems.Add(s1);
        item.SubItems.Add("Not found");
        listView1.Items.Add(item);
        con_msg = "Not connected";

        continue;
    }

    NetworkStream networkStream = socketForServer.GetStream();
    System.IO.StreamReader streamReader =  new System.IO.StreamReader(networkStream);
    System.IO.StreamWriter streamWriter =new System.IO.StreamWriter(networkStream);
    //code
} 
```

**goto**语句将程序控制直接传递给带标签的语句。

以下是代码中**goto**语句的样子：

```
foreach (String host   in hostArray)
{
    string s1 = hostArray[t];
    string s2 = branchArray[t];
    string con_msg;
    t=t+1;
    TcpClient socketForServer;
    try
    {
        socketForServer = new TcpClient(s1, 10);
        con_msg="Connected";
    }
    catch
    {
        ListViewItem item = new ListViewItem();
        item.BackColor = Color.LightGreen;
        item.Text = (s2);
        item.SubItems.Add(s1);
        item.SubItems.Add("Not found");
        listView1.Items.Add(item);
        con_msg = "Not connected";

        goto ErrorOccured;
    }

    NetworkStream networkStream = socketForServer.GetStream();
    System.IO.StreamReader streamReader =  new System.IO.StreamReader(networkStream);
    System.IO.StreamWriter streamWriter =new System.IO.StreamWriter(networkStream);
    //code

    ErrorOccured:
    Console.WriteLine("Do something else...");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:14:14.560

```
foreach (var item in Items)
{           
  try
  {
    //Exception
  }
  catch (Exception)
  {
    continue;//Will move to next item of "Items" of FOREACH LOOP
  }

  int a = 1 + 1;//If exception gets this line will not execute
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T06:25:35.713

用于`continue`在完成 catch 之前退出当前回合... 通过使用`continue`catch 中的语句，应跳过 continue 和 foreach 主体结尾之间的语句。举个例子……就像HABJAN给的……

```
 foreach (String host   in hostArray){

        string s1 = hostArray[t];
        string s2 = branchArray[t];
        string con_msg;
        t=t+1;
        TcpClient socketForServer;

       try{
           socketForServer = new TcpClient(s1, 10);
           con_msg="Connected";
       }
       catch{
           ListViewItem item = new ListViewItem();
           item.BackColor = Color.LightGreen;
           item.Text = (s2);
           item.SubItems.Add(s1);
           item.SubItems.Add("Not found");
           listView1.Items.Add(item);
           con_msg = "Not connected";

           continue;
       }

       NetworkStream networkStream = socketForServer.GetStream();
       System.IO.StreamReader streamReader =  new System.IO.StreamReader(networkStream);
       System.IO.StreamWriter streamWriter =new System.IO.StreamWriter(networkStream);
       // code
   } 
```

# gwt - SimpleComboBox 加载器 - GXT

> ID：13005686
> 
> 赞同：1
> 
> 时间：2012-10-22T05:58:45.840
> 
> 标签：gwt, gxt

我想创建一个动态组合框，即它从数据库中获取数据

在按下某些按钮（在其他面板上）时，我想重新加载 ComboBox。

ComboBox Store Datatype : List 我创建了一个获取 List 的 RPC 调用（RPCProxy）

但是，我无法创建一个 Loader 将其映射到我的 ComboBox Store，因为 Loader 仅映射到扩展 BeanModel 实例的 Store。所以我在加载时只能获取一次数据，但我不能重新获取数据，因为我不能使用加载器。

这是代码的一部分：

SimpleComboBox myCombo = new SimpleComboBox(); List myStore = new ArrayList();

```
XX.getService().getMyDD(userData.getId(), weekOffset, new AsyncCallback<List<String>>() {
                    public void onFailure(
                            Throwable caught) {
                        MessageBox.alert(UIConstants.ERROR,caught.getMessage(),
                                        null);
                    }
                    public void onSuccess(List<String> result) {
                        for(String str: result)
                        {
                            myStore.add(str);                               
                        }
                        myCombo.removeAll();
                        myCombo.add(myStore);
                        myCombo.setSimpleValue(UIConstants.ALL);
                    }
                });

        RpcProxy<List<String>> userTypeProxy = new RpcProxy<List<String>>() {
            @Override
            protected void load(Object loadConfig,
                    AsyncCallback<List<String>> callback) {
                try {
                    System.out.println("In Loader: my: "+my);
                    XX.getService().getMyDD(userData.getId(), weekOffset, 
                             callback);     
                    } catch (Exception e) {
                    MessageBox.alert(UIConstants.ERROR,
                            UIConstants.ERROR_USER_RETRIEVED, null);
                }
            }
        }; 
```

请让我知道我是否可以为我的 ComboBox 实现任何类型的加载器，例如 ListLoader 等。我非常感谢您提前提供的帮助。

# delphi - 如何声明两个相互关联的类？

> ID：13005694
> 
> 赞同：7
> 
> 时间：2012-10-22T05:59:49.620
> 
> 标签：delphi, delphi-xe2

我有一个与此类似的问题[，](https://stackoverflow.com/questions/5245774/how-to-use-class-wich-defined-below)但在 delphi 中。

```
type
  TThreadPopulator = class(TThread)
  private
    _owner:TASyncPopulator; //Undeclared identifier
  end;

type
  TAsyncPopulator = class
  private
    _updater: TThreadPopulator;
  end; 
```

上述问题的解决方案不适用于delphi

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T06:09:50.847

请参阅[`Forward Declarations and Mutually Dependent Classes`](http://docwiki.embarcadero.com/RADStudio/XE2/en/Classes_and_Objects#Forward_Declarations_and_Mutually_Dependent_Classes)文档。

```
type (* start type section - one unified section "to rule them all" *)

  TAsyncPopulator = class; (* forward declaration, it basically serves just to
  fix SizeOf(TAsyncPopulator) so compiler would be able to draft dependent types'
  in-memory layout. Down the CPU level `class` and `pointer` is the same, so now 
  Delphi knows SizeOf(TAsyncPopulator) = SizeOf(pointer) to compose further types *)

  TThreadPopulator = class(TThread)
  private
    _owner:TASyncPopulator;
  end;

  TAsyncPopulator = class (* the final declaration now, it should go WITHIN 
  that very TYPE-section where the forward declaration was made! *)
  private
    _updater: TThreadPopulator;
  end;

  ....

type 
(* now, that you had BOTH forward and final declarations for TAsyncPopulator 
   spelled out above, you finally may start another TYPE-section, if you choose so. 
   But only after them both, and never should a new `type` section be inserted 
   in between those declarations. *)
  .... 
```

使用来源，卢克！您的 Delphi 安装有完整的 VCL 和 RTL 源代码供您阅读、观看和学习。它经常使用这个模板。每次当你问自己“我是怎么做到的”时，只要想一想“Borland 是怎么做到的”，很有可能你已经在 Delphi 提供的资源中获得了现成的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T06:07:08.743

在任何类定义之前使用它。Forward 类在 Delphi 2010 中有效。我不知道你拥有的 delphi 女巫版本，但这是我能想到的唯一解决方案。

```
type   
 TAsyncPopulator = Class; 
```

希望我有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T23:47:41.410

除了使用前向声明，您还可以创建一个子类来解决这个问题：

```
TThreadPopulator = class(TThread)
  type 
    TAsyncPopulator = class 
      _updater: TThreadPopulator;  
    end;

  var 
    owner: TAsyncPopulator;
end; 
```

# json - 查找json数据的长度

> ID：13005696
> 
> 赞同：0
> 
> 时间：2012-10-22T06:00:05.823
> 
> 标签：json, jqxgrid

我有这个数据

```
 var initialData = [
        { name: "Sweets", details: 352 },
        { name: "Spicy", details: "89 juwu jdbjd jd bdjh djh sdjh sjh sdhj sjh sjh shjdsjhsdhjsdhjshjdyrrrrrrrrrrrrrrrrrrr" },
        { name: "Salty", details: 23 } 
```

];

必须找到“详细信息”字段的最大长度并将输出设为 70（假设名称的详细信息长度：“辣”），即最大值。需要解决方案/建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:34:55.073

最后我找到了出路，回答，因为它可能会帮助将来的人......首先计算你的数组

```
var count = 0; for (var p in initialData) { if (initialData.hasOwnProperty(p)) { count++; } } 
```

获取初始数据特定元素并使用循环获取最大值

```
 var wid = 0; for (i = 0; i <= count-1; i++) { var temp1 = initialData[i].details.length; wid = wid > temp1 ? wid : temp1; } 
```

# eclipse - Eclipse .properties 文件禁用 UTF-8 字符的转义

> ID：13005697
> 
> 赞同：4
> 
> 时间：2012-10-22T06:00:06.557
> 
> 标签：eclipse, properties, utf-8, escaping

我在我的 java/android 应用程序中为我的翻译文件使用 *.properties 文件。我的问题是 Eclipse 中的 .properties 文件转义了 ISO-8859-1 字符集之外的 utf-8 字符，所以我看到了转义字符。所以我决定制作自己的库来读取 utf-8 格式的文件。但日食仍然逃避字符。有没有办法让 eclipse 将 *.properties 文件作为普通文本文件处理？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T08:39:37.460

右键文件，属性。在“资源”选项卡下，检查右下角的“文本文件编码”并将其更改为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:49:35.830

不要称它们为 .properties 文件，给它们另一个文件扩展名，它们将仅由文本编辑器处理，而不是由属性文件编辑器处理。

即使没有编辑问题，您也不应该将它们称为 .properties，因为它们不符合 Java 属性文件标准，这可能会使该项目的其他开发人员、其他工具等感到困惑。

然而最好的解决方案是另一个：扔掉你自制的实现，让自己成为一个[更好的属性文件编辑器](https://stackoverflow.com/questions/863838/problem-with-java-properties-utf8-encoding-in-eclipse?rq=1)，它可以显示你想要读取的字符，而与它们在文件中的编码方式无关。

# google-apps-script - 如何使用谷歌应用脚 本修改谷歌日历活动？

> ID：13005699
> 
> 赞同：3
> 
> 时间：2012-10-22T06:00:14.947
> 
> 标签：google-apps-script, google-calendar-api

我想出了如何将事件添加到日历中，但随后花了 8 个小时试图弄清楚如何编辑现有事件（或删除它，无论哪种方式都可以完成工作）。这是我所拥有的：

```
function UpdateEventTime() {
  var cal = CalendarApp.getCalendarById("semehjawioe@group.calendar.google.com");
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 1;  // First row of data to process
  var numRows = 1;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 5, numRows, 5);
  var data = dataRange.getValues();

//  var oldtstart = SpreadsheetApp.getActiveSheet().getRange('G2');
//  var oldtstop = SpreadsheetApp.getActiveSheet().getRange('H2');
// ??????????????????????????????????????????????????
// ??  How do I call up and delete the old event?  ??  
// ??????????????????????????????????????????????????  

  for (i in data) {
    var row = data[i];
    var title = row[0];  // First column
    var desc = row[1];       // Second column
    var tstart = row[2];
    var tstop = row[3];
    var loc = row[4];
    cal.createEvent(title, tstart, tstop, {description:desc,location:loc});
    SpreadsheetApp.getActiveSheet().getRange('G2').setValue(tstart);
    SpreadsheetApp.getActiveSheet().getRange('H2').setValue(tstop);
 }
} 
```

从我在在线文档中可以看出，你不能拉起一个事件，你只能拉起一个日期范围内的所有事件。因此，在代码的最后，我尝试将开始时间和停止时间存储在电子表格中，然后在下次执行脚本时参考它。中间被注释掉的部分是我迷路的地方。这就是我试图调用上次运行脚本时添加的事件的地方。我需要编辑它，或者删除它。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T07:20:22.473

如果您设法将事件 ID 与这些详细信息一起保存在电子表格中，那就更好了。如果您需要修改或删除这些事件，只需通过 id 获取事件并执行操作。

修改后的代码用于保存

```
var event = cal.createEvent(title, tstart, tstop, {description:desc,location:loc});
var eventid = event.getId();
SpreadsheetApp.getActiveSheet().getRange('I2').setValue(eventid); 
```

稍后取回事件

```
var id = SpreadsheetApp.getActiveSheet().getRange('I2');
var cal = CalendarApp.getCalendarById("semehjawioe@group.calendar.google.com");
var event = cal.getEventSeriesById(id);
//Now modify or delete the event
event.addEmailReminder(minutesBefore);
event.addGuest(email);
event.deleteEvent();
.
.
. 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:33:32.127

这是我整理的一项正在进行的工作。它仍然需要微调，但我想我会发布它，以防有人对优化代码有洞察力，并且任何人都会发现它有用。基本上，代码从日历创建一个数组，而电子表格将它们组合在一起。按上次修改（事件的最后更新日期和电子表格的标准脚本的最后修改列）对其进行排序，删除重复项，并提交到日历（当前在删除所有事件之后）和电子表格。我计划添加一个密钥，并有一个列表，您可以在其中键入密钥以从两个位置删除项目，好处是您可以从日历中添加电子表格行，反之亦然。提前感谢您提供任何有用的意见。

```
function onOpen() {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var menuEntries = [ {name: "Sync Spreadsheet to Calendar", functionName: "calsync"}];
//{name: “Sync”, functionName: “myimport”}];
ss.addMenu(“Calendar Sync”, menuEntries);
}

function calsync()
{
// This function should be executed from the
// spreadsheet you want to export to the calendar
var mySpreadsheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(“Test123″);

var myCalendar = CalendarApp.openByName(“Test”);

//calendar event array
var events = myCalendar.getEvents(new Date(“January 1, 2011 EST”),
new Date(“January 1, 2014 EST”));
if (events[0]) {
var eventarray = new Array();
var line = new Array();
line.push(‘Title’);
line.push(‘Start Date’);
line.push(‘End Date’);
line.push(‘Description’);
line.push(‘Last Modified’);
eventarray.push(line);

var i = 0;
for (i = 0; i < events.length; i++) {
line = new Array();
line.push(events[i].getTitle());
line.push(events[i].getStartTime());
line.push(events[i].getEndTime());
line.push(events[i].getDescription());
line.push(events[i].getLastUpdated());
//line.push(events[i].getLocation());
eventarray.push(line);
}
} else {
Browser.msgBox('nothing between ' + startDate + ' till ' + endDate);
}

var dataRange = mySpreadsheet.getRange("A2:E53");
var data = dataRange.getValues();

if (data[0]) {
var dataarray = new Array();
var line2 = new Array();

var j = 0;
for (j = 0; j < data.length; j++) {
var row = data[j];
line2 = new Array();
line2.push(row[0]);
line2.push(row[1]);
line2.push(row[2]);
line2.push(row[3]);
line2.push(row[4]);
//line.push(events[i].getLocation());
//line.push((events[i].getEndTime() – events[i].getStartTime()) / 3600000);
dataarray.push(line2);
}
} else {
Browser.msgBox('nothing between ' + startDate + ' till ' + endDate);
}

var newarray = eventarray.concat(dataarray);
uniquedata(newarray);

}

//found at https://developers.google.com/apps-script/articles/removing_duplicates
function uniquedata(data) {
var newData = new Array();
var data2 = sort(data, 4, false);
for(i in data2){
var row = data2[i];
var duplicate = false;
for(j in newData){
if(row[0] == newData[j][0]){
duplicate = true;
}
}
if(!duplicate){
newData.push(row);
}
}
var filtered = sort(newData, 4 , false);
UpdateSpreadsheet(filtered);
UpdateCalendar(filtered);
// var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Test123");
// sheet.clearContents();
// sheet.getRange(1, 1, filtered.length, filtered[0].length).setValues(filtered);
}

function UpdateSpreadsheet(data) {
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Test123");
sheet.clearContents();
sheet.getRange(1, 1, data.length, data[0].length).setValues(data);
}

function UpdateCalendar(data)
{
var myCalendar = CalendarApp.openByName("Test");

// optional – delete existing events
var events = myCalendar.getEvents(new Date("January 1, 2011 EST"),
new Date("January 1, 2013 EST"));
for (var i = 0; i 0) {
if (typeof columnIndex != “number” || columnIndex > data[0].length) {
throw ‘Choose a valide column index’;
}
var r = new Array();
var areDates = true;
for (var i = 0; i < data.length; i++) {
var date = new Date(data[i][columnIndex]);
if (isNaN(date.getYear()) && data[i][columnIndex] != '') areDates = false;
else if (data[i][columnIndex] != '') data[i][columnIndex] = date;
r.push(data[i]);
}
return r.sort(function (a, b) {
if (ascOrDesc) return ((a[columnIndex] b[columnIndex]) ? 1 : 0));
return ((a[columnIndex] > b[columnIndex]) ? -1 : ((a[columnIndex] < b[columnIndex]) ? 1 : 0));
});
}
else {
return data;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:20:37.260

万一人们在未来寻找这个，这是我在整合 Waqar 的建议后的最终代码。有用。当它创建一个新事件时，它会获取 eventID 并将其存储在单元格 I2 的电子表格中。它通过基于该 eventID 查找事件、删除它并用新事件替换它来“更新”现有事件。

```
 function CreateOrReplaceEvent() {
  var cal = CalendarApp.getCalendarById("xxxxxxxxxxxxx@group.calendar.google.com");
  var id = SpreadsheetApp.getActiveSheet().getRange('I2').getValue();

  if(id != 0){
  var event = cal.getEventSeriesById(id);
  event.deleteEventSeries();
  }

  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 1;  // First row of data to process
  var numRows = 1;   // Number of rows to process
  var dataRange = sheet.getRange(startRow, 5, numRows, 5);
  var data = dataRange.getValues();

  for (i in data) {
    var row = data[i];
    var title = row[0];  // First column
    var desc = row[1];       // Second column
    var tstart = row[2];
    var tstop = row[3];
    var loc = row[4];
    var event = cal.createEvent(title, tstart, tstop, {description:desc,location:loc});
    var eventid = event.getId();
    SpreadsheetApp.getActiveSheet().getRange('I2').setValue(eventid);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:29:57.243

编辑：当 Waqar 发布他的答案时，我正在写我的答案......所以这是一种重复，但我会发布它，以便你得到一个例子......

您可以使用他们的 ID 访问事件，这是一个将客人添加到日历事件的示例。它还会更新显示结果的日志表。

```
function sendinvites(e) {
  var ss = SpreadsheetApp.openById('0AnZ5_Sh________UJnVlFtNDM2NUE')
  var sh = ss.getSheets()[0]
  var logsheet = ss.getSheets()[1]
  var last = ss.getLastRow();
  var FUS1=new Date().toString().substr(25,8);
  var calendar_name = 'test'
  var group = GroupsManager.getGroup('groupemail');
  var members = group.getAllMembers();
  var startDate = new Date(e.parameter.start);
  var endDate = new Date(e.parameter.end);
  var Calendar = CalendarApp.getCalendarsByName(calendar_name);
  var sheetName = calendar_name + "-du-" + Utilities.formatDate(e.parameter.start, FUS1, "dd-MMM-yyyy")
      + "-au-" + Utilities.formatDate(e.parameter.end, FUS1, "dd-MMM-yyyy")  
// 
  var events = Calendar[0].getEvents(startDate , endDate);
  if (events[0]) {
    var eventarray = new Array();
    var line = new Array();
    line.push('Titre : '+calendar_name,'Début ','Fin','Localisation','Durée','invités');
    eventarray.push(line);

    for (i = 0; i < events.length; i++) {
        var ID = events[i].getId()
    var lr = logsheet.getLastRow();
      logsheet.getRange(lr+1,1).setValue(events[i].getTitle()+' / '+Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy"));
      for(nn=0;nn<members.length;++nn){
        logsheet.getRange(lr+1,nn+2).setValue(members[nn]);  
        Calendar[0].getEventSeriesById(ID).addGuest(members[nn])
      }
      line = new Array();
      line.push(events[i].getTitle());
      line.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm"));
      line.push(Utilities.formatDate(events[i].getEndTime(), FUS1, "dd-MMM-yyyy")+' à ' +Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));
      line.push(events[i].getLocation());
      line.push((events[i].getEndTime() - events[i].getStartTime()) / 3600000);
      var invitelist='';
      var list = Calendar[0].getEventSeriesById(ID).getGuestList()
          for(nn=0;nn<list.length;++nn){invitelist+=list[nn].getName()+', '}
      line.push(invitelist)
      eventarray.push(line);
    }
    Logger.log(eventarray)
    var sheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet(sheetName);
    sheet.getRange(1,1,eventarray.length,eventarray[0].length).setValues(eventarray);
    sheet.getRange(1,1,1,eventarray[0].length).setBackgroundColor('#ffffcc');
    sheet.setColumnWidth(1, 450);sheet.setColumnWidth(2, 150);sheet.setColumnWidth(3, 150);sheet.setColumnWidth(4, 250);sheet.setColumnWidth(5, 75);sheet.setColumnWidth(6, 450);;
    sheet.setFrozenRows(1)
  } else {
    var startstring = Utilities.formatDate(e.parameter.start, FUS1, "dd-MMM-yyyy");
    var endstring = Utilities.formatDate(e.parameter.end, FUS1, "dd-MMM-yyyy");
    Browser.msgBox('Aucun événement entre le ' + startstring + ' et le ' + endstring +' dans votre agenda :'+calendar_name);
  }
} 
```

# ruby-on-rails - 使用 AngularJS 计算嵌套表单的 Rails

> ID：13005702
> 
> 赞同：1
> 
> 时间：2012-10-22T06:00:25.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, angularjs, nested-forms

我有一个 Rails 3.2.8 应用程序，我在其中应用了一些 AngularJS 以在表单中动态计算。

我有一个基本的测试应用程序，它将投资者映射到多栋房屋，每栋房屋都有一个成本和一个价值，我想在最后总计。

这是我的表格

```
<div ng-controller="InvestorCtrl">
  <%= form_for(@investor) do |f| %>
  <% if @investor.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@investor.errors.count, "error") %> prohibited this investor from being saved:</h2>

    <ul>
      <% @investor.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <% i = 0 %>
  <%= f.fields_for :houses do |builder| %>
  <%= builder.label :address %>
  <%= builder.text_field :address %>

  <%= builder.label :suburb %>
  <%= builder.text_field :suburb %>

  <%= builder.label :cost %>
  <%= builder.text_field :cost, "ng-model" => "timesheets[#{i}].cost", "ng-change" => "calc_cost()" %>

  <%= builder.label :value %>
  <%= builder.text_field :value, "ng-model" => "timesheets[#{i}].value" %>

  <% i = i + 1 %>

  <% end %>

  <div class="field">
    <%= f.label :total_cost %>
    <%= f.number_field :total_cost, "ng-model" => "total_cost" %>
  </div>
  <div class="field">
    <%= f.label :total_value %>
    <%= f.number_field :total_value, "ng-model" => "total_value" %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
  <% end %>
</div> 
```

这是我正在使用的 angularjs 咖啡脚本

```
$ (event) ->
  app = angular.module "investor", []

  app.controller("InvestorCtrl", ["$scope", ($scope) ->
    $scope.timesheets = [
      { cost: 295000, value: 450000 },
      { cost: 600000, value: 620000  },
      { cost: 1000000, value: 900000 },    
    ]
    $scope.calc_cost = ->
      total = 0
      for ts in $scope.timesheets
        total = total + ts.cost
      $scope.total_cost = total

    $scope.calc_cost()
  ])

  angular.bootstrap document, ['investor'] 
```

当我加载一个新表单时，我正在控制器中建造三个房子，如下所示：

```
 def new
    @investor = Investor.new
    3.times { @investor.houses.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @investor }
    end
  end 
```

转到新表格时，总成本计算正确，但是当我更改任何房屋的“成本”值时，“总成本”字段设置为空白。

我是否正确绑定？有没有更简单的方法来使用 AngularJS 和 Rails 模板绑定嵌套表单？

目前，我只是想使用 AngularJS 将房屋“成本”值的总和放入“total_cost”字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:09:44.667

我设法使用名为“batarang”的出色调试工具找到了我的问题 [https://github.com/angular/angularjs-batarang](https://github.com/angular/angularjs-batarang)

我只需要解析字符串：

```
 total = parseInt(total) + parseInt(ts.cost) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:00:57.117

以下（简化代码）是我要做的：

在 html 中：

```
<input ng-model="cost1"/><br>
<input ng-model="cost2"/><br>
total: {{ total_cost() }} 
```

在控制器中：

```
$scope.total_cost = function() {
  return $scope.cost1 + $scope.cost2;
} 
```

PS：我不知道应该如何平衡 RAILS 和 angularjs，但我会使用`ng-repeat`3 种形式。我认为这样代码会更干净。

# c - 访问结构指针的正确方法

> ID：13005706
> 
> 赞同：0
> 
> 时间：2012-10-22T06:00:41.490
> 
> 标签：c, arrays, pointers, struct

我有以下代码：

```
typedef struct AdjMatrix
{
  int nodes;
  int **adjMat;
} graph;

typedef struct Edge
{
  int from,to,weight;
}Edge;

int main(){
  ...

  graph *g=(graph *)malloc(sizeof(graph));
  g-> adjMat = (int **)malloc(sizeof(int *) * vertices);
  for( i = 0; i < vertices; i++){
    g->adjMat[i] = (int *)malloc(sizeof(int) * vertices);
  }
 ...

 Edge *E = (Edge *)malloc(sizeof(Edge) * maxEdges);

 int nEdges = 0;
 for(i = 0; i < g->nodes ; i++){
    for(j= 0; j< g->nodes; j++){
            if(i <= j){
                    printf("%d\t%d\t%d\t\n",i,j,g->adjMat[i][j]);
                    E[nEdges].from = i;
                    E[nEdges].to = j;
                    E[nEdges].weight = g->adjMat[i][j];
                    nEdges++;
            }
            else
                    break;
    }
 }

} 
```

如您所见，我通过“->”访问图 g 的元素，通过“.”访问 Edge E 的元素。如果我通过“。”访问图 g 的元素，我不明白为什么编译器会抛出错误。或边缘 E 的元素由“->”？请解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:06:44.613

您`E`用作数组，并且该数组中的单独成员不是指针，因此您必须使用点运算符来访问元素。

另一方面，您拥有`g`指向单个`graph`结构的指针，并且您使用运算符作为指针`->`。

但是，您可以将数组`E`作为指针访问，将变量`g`作为数组访问。例如，以下两个语句完全相同：

```
E[0].from = i;

(E + 0)->from = i; 
```

您可以`g`像这样访问数组：

```
g[0].nodes = x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:07:00.007

`g`被声明为 type `graph*`，使其成为指向图的指针。这意味着您必须访问`g`使用指针取消引用运算符的元素：`->`。

`E`也是一个指针，在这种情况下是`Edge*`指向 Edge 的指针，但您使用的是数组语义。`E[nEdges]`不是指针，*这*意味着您必须使用`.`运算符。

基本上，当您使用数组语义时，您会失去变量的指针性。

`E`是类型`Edge*`，`E[x]`是类型`Edge`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:08:10.720

在您的代码中， g 和 e 都是指向结构的指针。数组的行为方式与指针相同，因此 e[nEdges] 实际上等于位于位置 (e + 12 * nEdges) 的 Edge。e[0].from 与 e->from 相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T06:10:19.423

`->`运算符用于指针以取消引用指针，然后应用运算`.`符。因此，例如，`a->b`是等价于`(*a).b`。

如您所说，`.`运算符访问成员变量。您已经注意到`g`and`E`都是指针，但是`->`运算符不起作用的原因`E`是因为当您已经在使用`[]`运算符 on 时`E`，它也充当解引用器。例如，该行`E[nEdges].to`等效于`(*(E + nEdges)).to`while 如果您尝试`->`在这种情况下使用运算符，它将等效于`(*(*(E + nEdges))).to`which would be an dereference too many。

# javascript - Javascript，在禁用按钮后，需要使其再次可用。JS 不工作

> ID：13005707
> 
> 赞同：0
> 
> 时间：2012-10-22T06:00:41.737
> 
> 标签：javascript, forms, file-upload, upload

语言：**Javascript** （PHP页面）

我在一个页面上有**2 个按钮**
： -- 一个是上传图片按钮 ( **#upload** )，
-- & 另一个是“保存/提交表单”按钮 ( **.multi-accordion-submit** )。

下面的 .js 所做的是在用户使用另一个按钮 ( **#upload** ) 和**#upload**内的文本显示“上传...” 时，在上传文件时禁用提交按钮 ( **.multi-accordion-submit )。**

 ****在上传和文本返回到#upload的“上传更多”后，现在应该删除**.multi** **-accordion-submit按钮的 disabled 属性。**

但问题是，它仍然**被禁用**且不可点击，使得提交按钮（**.multi-accordion-submit**）无用。

我不知道如何修复它，下面的代码看起来很好并且应该可以工作。

任何指导和帮助将不胜感激！谢谢你的时间。

```
$(function () {
    var btnUpload = $('#upload');
    var status = $('#status');
    var url = $('#upload_path').val();
    new AjaxUpload(btnUpload, {
        action: url,
        //Name of the file input box
        name: 'image',
        onSubmit: function (file, ext) {
            $('#upload-error').hide();
            if (!(ext && /^(pdf|ai|psd|bmp|cdr|clk|gif|jpg|jpeg|ppt|pub|doc|docx|pcx|pic|pict|pct|png|ps|tif|tiff|emf|wmf|indd)$/.test(ext))) {
                // check for valid file extension 
                $('#upload-error').show();
                return false;
            }
            btnUpload.text('Uploading...');
            $('.multi-accordion-submit').attr('disabled', true);
        },
        onComplete: function (file, response) {
            if ($('.file-elements').length > 0) {
                if ($('.file-elements:visible').length == 0) {
                    window.location.href = document.location.href;
                } else {
                    btnUpload.text('Upload More');
                    $('.multi-accordion-submit').attr('disabled', false);
                }
            } else {
                btnUpload.text('Upload More');
                $('.multi-accordion-submit').attr('disabled', false);
            }

            //Add uploaded file to list
            if (response === "success") {
                $('<li></li>').appendTo('#files').html(file).addClass('upload-files');
            } else {
                $('<li></li>').appendTo('#files').text(file).addClass('upload-files');
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:07:59.497

```
//try to use
$('.multi-accordion-submit').attr('disabled','disabled'); 
//and
$('.multi-accordion-submit').removeAttr('disabled'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T06:14:44.813

属性`disabled`是否存在（不考虑它的值）

要从元素中删除禁用状态，您需要删除`disabled`属性而不仅仅是更改它的值。

```
$('.multi-accordion-submit').removeAttr('disabled'); 
```

**注意：**
实际上它可能与 jQuery 混淆，因为在 1.6+`prop`中`removeProp`引入了方法来处理本机属性，但是要删除禁用状态，您需要使用[`prop`](http://api.jquery.com/prop/)而不是[`removeProp`](http://api.jquery.com/removeProp/)（一旦删除本机属性就不能再次添加）

```
$('.multi-accordion-submit').prop('disabled', false); 
```****

# c# - 在客户端访问服务器对象

> ID：13005708
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:00:43.890
> 
> 标签：c#, javascript, asp.net

我有一个在服务器端填充的对象。我想在 aspx 页面上的客户端访问这个对象（使用 Javascript）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:04:06.877

我相信您能够在客户端访问“对象”的最接近的事情是将对象作为 JSON 数据提供，然后在客户端从那里获取它。但是，一般来说，您不能只从服务器发送一个对象，然后让客户端使用该对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:06:00.057

服务器端控件在最终生成的 ASPX 页面上显示时通常会稍微**更改其 ID参数。**因此，您可以检查生成的 ASPX 页面上特定元素的 ID 是什么，并使用它来访问 JavaScript 中的元素。

一种方法是编写 JavaScript 代码，例如

```
 document.getElementbyId('<%=control.ClientID%>'). ... 
```

或者，您可以在服务器端使用[**CssClass**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)**属性并在 Javascript 中执行getElementsByClassname**，但这比上面的更麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:06:44.463

不，一旦信息（html）被发送到客户端（响应），您就无法访问服务器上的任何对象，除非您向服务器发送请求并获得响应（通过 ajax、iframe 或回发）。

另一个关键是，浏览器只能理解文本、html、css、js、json、xml 和图像二进制文件，除非有可以读取其他格式的插件，所以如果您的服务器对象不能转换为任何这些格式，您就不能甚至在客户端上阅读。

# android - 如何在 Android 中的线性布局周围显示阴影？

> ID：13005714
> 
> 赞同：79
> 
> 时间：2012-10-22T06:01:16.683
> 
> 标签：android, android-linearlayout, roundedcorners-dropshadow

如何为我的线性布局显示阴影。我想要在线性布局周围有阴影的白色圆形背景。到目前为止，我已经这样做了。

```
<LinearLayout
 android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_margin="10dp"
android:background="@xml/rounded_rect_shape"
android:orientation="vertical"
android:padding="10dp">
<-- My buttons, textviews, Imageviews go here -->
</LinearLayout> 
```

以及xml目录下的rounded_rect_shape.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
   android:shape="rectangle" >

   <solid android:color="#ffffff" />

   <corners
      android:bottomLeftRadius="3dp"
      android:bottomRightRadius="3dp"
      android:topLeftRadius="3dp"
      android:topRightRadius="3dp" />
</shape> 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-02-14T09:06:40.913

该问题还有另一种解决方案，方法是实现一个层列表，该层列表将作为线性布局的背景。

将 background_with_shadow.xml 文件添加到`res/drawable`. 包含：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item >
        <shape 
            android:shape="rectangle">
        <solid android:color="@android:color/darker_gray" />
        <corners android:radius="5dp"/>
        </shape>
    </item>
    <item android:right="1dp" android:left="1dp" android:bottom="2dp">
        <shape 
            android:shape="rectangle">
        <solid android:color="@android:color/white"/>
        <corners android:radius="5dp"/>
        </shape>
    </item>
</layer-list> 
```

然后在您的 LinearLayout 中添加图层列表作为背景。

```
<LinearLayout
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:background="@drawable/background_with_shadow"/> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-22T23:41:06.777

嗯，这很容易实现。

只需构建一个`GradientDrawable`来自黑色并变为透明颜色的，而不是使用父关系将您的形状放置在您想要有阴影的视图附近，然后您只需为 height 或 width 提供任何值。

这是一个例子，这个文件必须在里面创建`res/drawable`，我将它命名为`shadow.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <gradient
        android:startColor="#9444"
        android:endColor="#0000"
        android:type="linear"
        android:angle="90"> <!-- Change this value to have the correct shadow angle, must be multiple from 45 -->
    </gradient>

</shape> 
```

将下面的代码从 a 放在上面`LinearLayout`，例如，将`android:layout_width`and设置`android:layout_height`为`fill_parent`and `2.3dp`，你的`LinearLayout`.

```
<View
    android:id="@+id/shadow"
    android:layout_width="fill_parent"
    android:layout_height="2.3dp"  
    android:layout_above="@+id/id_from_your_LinearLayout" 
    android:background="@drawable/shadow">
</View> 
```

**注意1：**如果增加`android:layout_height`更多的阴影会显示。

**注意 2：**`android:layout_above="@+id/id_from_your_LinearLayout"`如果将此代码放置在 RelativeLayout 中，请使用属性，否则忽略它。

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-10-22T06:07:51.343

Android中没有这样的属性，用来显示阴影。但可能的方法是：

1.  添加一个灰色的普通 LinearLayout，在其上添加您的实际布局，底部和右侧的边距等于 1 或 2 dp

2.  有一个带有阴影的 9-patch 图像并将其设置为线性布局的背景

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-05-30T12:58:54.923

对于棒棒糖及以上，您可以使用[海拔](https://developer.android.com/training/material/shadows-clipping.html)。

对于旧版本：

这是一个懒惰的黑客攻击：http: [//odedhb.blogspot.com/2013/05/android-layout-shadow-without-9-patch.html](http://odedhb.blogspot.com/2013/05/android-layout-shadow-without-9-patch.html)

（toast_frame 在 KitKat 上不起作用，从 toast 中删除了阴影）

只需使用：

```
android:background="@android:drawable/toast_frame" 
```

或者：

```
android:background="@android:drawable/dialog_frame" 
```

作为背景

例子：

```
<TextView
        android:layout_width="fill_parent"
        android:text="I am a simple textview with a shadow"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:padding="16dp"
        android:textColor="#fff"
        android:background="@android:drawable/toast_frame"
        /> 
```

并具有不同的背景颜色：

```
<LinearLayout
        android:layout_height="64dp"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:background="@android:drawable/toast_frame"
        android:padding="4dp"
        >
    <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Button shadow"
            android:background="#33b5e5"
            android:textSize="24sp"
            android:textStyle="bold"
            android:textColor="#fff"
            android:layout_gravity="center|bottom"
            />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-03-10T10:39:35.620

试试这个.. layout_shadow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#CABBBBBB"/>
            <corners android:radius="2dp" />
        </shape>
    </item>

    <item
        android:left="0dp"
        android:right="0dp"
        android:top="0dp"
        android:bottom="2dp">
        <shape android:shape="rectangle">
            <solid android:color="@android:color/white"/>
            <corners android:radius="2dp" />
        </shape>
    </item>
</layer-list> 
```

像这样应用到您的布局

```
 android:background="@drawable/layout_shadow" 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-07-02T19:36:41.867

我知道这很旧，但是这些答案中的大多数都需要大量额外的代码。

如果你有浅色背景，你可以简单地使用这个：

```
android:elevation="25dp" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-09T13:38:17.847

实际上我同意@odedbreiner，但我将 dialog_frame 放在第一层内，并将黑色背景隐藏在白色层下。

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:drawable="@android:drawable/dialog_frame"
        android:right="2dp" android:left="2dp" android:bottom="2dp" android:top="5dp" >
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
        </shape>
    </item>
    <item>
        <shape
            android:shape="rectangle">
            <solid android:color="@android:color/white"/>
            <corners android:radius="5dp"/>
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-28T17:50:36.640

使用以下代码在 DRAWABLE 中创建一个名为“shadow.xml”的新 XML（您可以修改它或找到另一个更好的代码）：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/middle_grey"/>
        </shape>
    </item>

    <item android:left="2dp"
          android:right="2dp"
          android:bottom="2dp">
        <shape android:shape="rectangle">
            <solid android:color="@color/white"/>
        </shape>
    </item>

</layer-list> 
```

在 LinearLayout 或您要创建阴影的其他 Widget 中创建 XML 后，您使用背景属性查看效果。它会是这样的：

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:paddingRight="@dimen/margin_med"
    android:background="@drawable/shadow"
    android:minHeight="?attr/actionBarSize"
    android:gravity="center_vertical"> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-27T20:27:46.657

1.  保存这个 9.png。（将其更改为`9.png`）

![在此处输入图像描述](../Images/2f1320d2b9a28667794427caa61c7448.png)

2.将其保存在您的`drawable`.

3.将其设置为您的布局。

4.设置填充。

例如 ：

```
<LinearLayout  
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/shadow"
  android:paddingBottom="6dp"
  android:paddingLeft="5dp"
  android:paddingRight="5dp"
  android:paddingTop="6dp"
>

.
.
.
</LinearLayout> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-03T13:13:25.253

您可以将以下类用于 xml 标签：

```
import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Bitmap;
import android.graphics.BlurMaskFilter;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.Rect;
import android.os.Build;
import android.support.annotation.FloatRange;
import android.util.AttributeSet;
import android.view.ViewGroup;
import android.view.ViewTreeObserver;
import android.widget.FrameLayout;

import com.webappmate.weeassure.R;

/**
 * Created by GIGAMOLE on 13.04.2016.
 */
public class ShadowLayout extends FrameLayout {

    // Default shadow values
    private final static float DEFAULT_SHADOW_RADIUS = 30.0F;
    private final static float DEFAULT_SHADOW_DISTANCE = 15.0F;
    private final static float DEFAULT_SHADOW_ANGLE = 45.0F;
    private final static int DEFAULT_SHADOW_COLOR = Color.DKGRAY;

    // Shadow bounds values
    private final static int MAX_ALPHA = 255;
    private final static float MAX_ANGLE = 360.0F;
    private final static float MIN_RADIUS = 0.1F;
    private final static float MIN_ANGLE = 0.0F;
    // Shadow paint
    private final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG) {
        {
            setDither(true);
            setFilterBitmap(true);
        }
    };
    // Shadow bitmap and canvas
    private Bitmap mBitmap;
    private final Canvas mCanvas = new Canvas();
    // View bounds
    private final Rect mBounds = new Rect();
    // Check whether need to redraw shadow
    private boolean mInvalidateShadow = true;

    // Detect if shadow is visible
    private boolean mIsShadowed;

    // Shadow variables
    private int mShadowColor;
    private int mShadowAlpha;
    private float mShadowRadius;
    private float mShadowDistance;
    private float mShadowAngle;
    private float mShadowDx;
    private float mShadowDy;

    public ShadowLayout(final Context context) {
        this(context, null);
    }

    public ShadowLayout(final Context context, final AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public ShadowLayout(final Context context, final AttributeSet attrs, final int defStyleAttr) {
        super(context, attrs, defStyleAttr);

        setWillNotDraw(false);
        setLayerType(LAYER_TYPE_HARDWARE, mPaint);

        // Retrieve attributes from xml
        final TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.ShadowLayout);

        try {
            setIsShadowed(typedArray.getBoolean(R.styleable.ShadowLayout_sl_shadowed, true));
            setShadowRadius(
                    typedArray.getDimension(
                            R.styleable.ShadowLayout_sl_shadow_radius, DEFAULT_SHADOW_RADIUS
                    )
            );
            setShadowDistance(
                    typedArray.getDimension(
                            R.styleable.ShadowLayout_sl_shadow_distance, DEFAULT_SHADOW_DISTANCE
                    )
            );
            setShadowAngle(
                    typedArray.getInteger(
                            R.styleable.ShadowLayout_sl_shadow_angle, (int) DEFAULT_SHADOW_ANGLE
                    )
            );
            setShadowColor(
                    typedArray.getColor(
                            R.styleable.ShadowLayout_sl_shadow_color, DEFAULT_SHADOW_COLOR
                    )
            );
        } finally {
            typedArray.recycle();
        }
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        // Clear shadow bitmap
        if (mBitmap != null) {
            mBitmap.recycle();
            mBitmap = null;
        }
    }

    public boolean isShadowed() {
        return mIsShadowed;
    }

    public void setIsShadowed(final boolean isShadowed) {
        mIsShadowed = isShadowed;
        postInvalidate();
    }

    public float getShadowDistance() {
        return mShadowDistance;
    }

    public void setShadowDistance(final float shadowDistance) {
        mShadowDistance = shadowDistance;
        resetShadow();
    }

    public float getShadowAngle() {
        return mShadowAngle;
    }

    @SuppressLint("SupportAnnotationUsage")
    @FloatRange
    public void setShadowAngle(@FloatRange(from = MIN_ANGLE, to = MAX_ANGLE) final float shadowAngle) {
        mShadowAngle = Math.max(MIN_ANGLE, Math.min(shadowAngle, MAX_ANGLE));
        resetShadow();
    }

    public float getShadowRadius() {
        return mShadowRadius;
    }

    public void setShadowRadius(final float shadowRadius) {
        mShadowRadius = Math.max(MIN_RADIUS, shadowRadius);

        if (isInEditMode()) return;
        // Set blur filter to paint
        mPaint.setMaskFilter(new BlurMaskFilter(mShadowRadius, BlurMaskFilter.Blur.NORMAL));
        resetShadow();
    }

    public int getShadowColor() {
        return mShadowColor;
    }

    public void setShadowColor(final int shadowColor) {
        mShadowColor = shadowColor;
        mShadowAlpha = Color.alpha(shadowColor);

        resetShadow();
    }

    public float getShadowDx() {
        return mShadowDx;
    }

    public float getShadowDy() {
        return mShadowDy;
    }

    // Reset shadow layer
    private void resetShadow() {
        // Detect shadow axis offset
        mShadowDx = (float) ((mShadowDistance) * Math.cos(mShadowAngle / 180.0F * Math.PI));
        mShadowDy = (float) ((mShadowDistance) * Math.sin(mShadowAngle / 180.0F * Math.PI));

        // Set padding for shadow bitmap
        final int padding = (int) (mShadowDistance + mShadowRadius);
        setPadding(padding, padding, padding, padding);
        requestLayout();
    }

    private int adjustShadowAlpha(final boolean adjust) {
        return Color.argb(
                adjust ? MAX_ALPHA : mShadowAlpha,
                Color.red(mShadowColor),
                Color.green(mShadowColor),
                Color.blue(mShadowColor)
        );
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        // Set ShadowLayout bounds
        mBounds.set(
                0, 0, MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.getSize(heightMeasureSpec)
        );
    }

    @Override
    public void requestLayout() {
        // Redraw shadow
        mInvalidateShadow = true;
        super.requestLayout();
    }

    @Override
    protected void dispatchDraw(final Canvas canvas) {
        // If is not shadowed, skip
        if (mIsShadowed) {
            // If need to redraw shadow
            if (mInvalidateShadow) {
                // If bounds is zero
                if (mBounds.width() != 0 && mBounds.height() != 0) {
                    // Reset bitmap to bounds
                    mBitmap = Bitmap.createBitmap(
                            mBounds.width(), mBounds.height(), Bitmap.Config.ARGB_8888
                    );
                    // Canvas reset
                    mCanvas.setBitmap(mBitmap);

                    // We just redraw
                    mInvalidateShadow = false;
                    // Main feature of this lib. We create the local copy of all content, so now
                    // we can draw bitmap as a bottom layer of natural canvas.
                    // We draw shadow like blur effect on bitmap, cause of setShadowLayer() method of
                    // paint does`t draw shadow, it draw another copy of bitmap
                    super.dispatchDraw(mCanvas);

                    // Get the alpha bounds of bitmap
                    final Bitmap extractedAlpha = mBitmap.extractAlpha();
                    // Clear past content content to draw shadow
                    mCanvas.drawColor(0, PorterDuff.Mode.CLEAR);

                    // Draw extracted alpha bounds of our local canvas
                    mPaint.setColor(adjustShadowAlpha(false));
                    mCanvas.drawBitmap(extractedAlpha, mShadowDx, mShadowDy, mPaint);

                    // Recycle and clear extracted alpha
                    extractedAlpha.recycle();
                } else {
                    // Create placeholder bitmap when size is zero and wait until new size coming up
                    mBitmap = Bitmap.createBitmap(1, 1, Bitmap.Config.RGB_565);
                }
            }

            // Reset alpha to draw child with full alpha
            mPaint.setColor(adjustShadowAlpha(true));
            // Draw shadow bitmap
            if (mCanvas != null && mBitmap != null && !mBitmap.isRecycled())
                canvas.drawBitmap(mBitmap, 0.0F, 0.0F, mPaint);
        }

        // Draw child`s
        super.dispatchDraw(canvas);
    }

} 
```

像这样在 xml 中使用标签：

```
<yourpackagename.ShadowLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center_horizontal"
        app:sl_shadow_color="#9e000000"
        app:sl_shadow_radius="4dp">
<child views>
</yourpackagename.ShadowLayout> 
```

**更新**

**将以下代码放在资源>>值的 attrs.xml 中**

```
 <declare-styleable name="ShadowLayout">
    <attr name="sl_shadowed" format="boolean"/>
    <attr name="sl_shadow_distance" format="dimension"/>
    <attr name="sl_shadow_angle" format="integer"/>
    <attr name="sl_shadow_radius" format="dimension"/>
    <attr name="sl_shadow_color" format="color"/>
</declare-styleable> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-10T10:52:43.347

一种可能的解决方案是使用九个补丁图像，如 [http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

或者

我通过以下方式做到了这一点。这是我的主要布局，其中 round_corner.xml 和 drop_shadow.xml 用作背景资源。round_corner_two 与round_corner.xml 相同，只是颜色属性不同。将round_corner.xml、drop_shadow.xml 和round_conere_two.xml 复制到drawable 文件夹中。

```
<RelativeLayout
    android:id="@+id/facebook_id"
    android:layout_width="250dp"
    android:layout_height="52dp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="28dp"
    android:background="@drawable/round_corner" >

    <LinearLayout
        android:id="@+id/shadow_id"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_margin="1dp"
        android:background="@drawable/drop_shadow" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:layout_marginBottom="2dp"
            android:background="@drawable/round_corner_two"
            android:gravity="center"
            android:text="@string/fb_butn_text"
            android:textColor="@color/white" >
        </TextView>
    </LinearLayout>
</RelativeLayout> 
```

round_corner.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">

<!-- view background color -->
<solid
    android:color="#ffffff" >
</solid>

<!-- view border color and width -->
<stroke
    android:width="0dp"
    android:color="#3b5998" >
</stroke>

<!-- If you want to add some padding -->
<padding
    android:left="1dp"
    android:top="1dp"
    android:right="1dp"
    android:bottom="1dp"    >
</padding>

<!-- Here is the corner radius -->
<corners
    android:radius="10dp"   >
</corners>

</shape> 
```

drop_shadow.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item >
    <shape 
        android:shape="rectangle">
    <solid android:color="@android:color/darker_gray" />
    <corners android:radius="12dp"/>
    </shape>
</item>
<item android:right="1dp" android:left="1dp" android:bottom="5dp">
    <shape 
        android:shape="rectangle">
    <solid android:color="@android:color/white"/>
    <corners android:radius="5dp"/>
    </shape>
</item>
</layer-list> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-08T05:37:19.123

我知道这已经太晚了。但我有同样的要求。我这样解决了

```
<android.support.v7.widget.CardView
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
app:cardUseCompatPadding="true"
app:cardElevation="4dp"
app:cardCornerRadius="3dp" >

<!-- put whatever you want -->

</android.support.v7.widget.CardView> 
```

您需要添加依赖项：

```
compile 'com.android.support:cardview-v7:25.0.1' 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-10-22T06:07:00.370

将此 xml drwable 设置为您的背景；---

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- Bottom 2dp Shadow -->
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#d8d8d8" />-->Your shadow color<--

        <corners android:radius="15dp" />
    </shape>
</item>

<!-- White Top color -->
<item android:bottom="3px" android:left="3px" android:right="3px" android:top="3px">-->here you can customize the shadow size<---
    <shape android:shape="rectangle" >
        <solid android:color="#FFFFFF" />

        <corners android:radius="15dp" />
    </shape>
</item>

</layer-list> 
```

# android - TableLayout 的 removeViews() 不起作用

> ID：13005715
> 
> 赞同：1
> 
> 时间：2012-10-22T06:01:19.810
> 
> 标签：android, android-layout

我有一个简单的表，它动态地添加`TableRow`和删除`TableRow`。我的要求是保持表格的第一行不变，所以我需要使用该`removeView(star,end);`方法，但它似乎无法正常工作并抛出`NullPointerException`. 我还使用了 removeAllViews() 方法，它工作正常，所以我不明白为什么它会抛出 NullPointerException！我该如何解决我的问题？这是我的代码：--

```
 TableLayout table = (TableLayout) findViewById(R.id.myTable);
        table.removeViews(1, table.getChildCount());
        //table.removeAllViews();
        table.postInvalidate();
        bindData(); 
```

这是 logcat 错误：-

```
10-22 06:16:05.204: E/AndroidRuntime(828): Uncaught handler: thread main exiting due to uncaught exception
10-22 06:16:05.214: E/AndroidRuntime(828): java.lang.NullPointerException
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.view.ViewGroup.removeViewsInternal(ViewGroup.java:2116)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.view.ViewGroup.removeViews(ViewGroup.java:2064)
10-22 06:16:05.214: E/AndroidRuntime(828):  at com.techdeedapps.diamond.ViewStockActivity$BackgroungLoadingDiamondList.onPostExecute(ViewStockActivity.java:348)
10-22 06:16:05.214: E/AndroidRuntime(828):  at com.techdeedapps.diamond.ViewStockActivity$BackgroungLoadingDiamondList.onPostExecute(ViewStockActivity.java:1)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.os.AsyncTask.finish(AsyncTask.java:417)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.os.Looper.loop(Looper.java:123)
10-22 06:16:05.214: E/AndroidRuntime(828):  at android.app.ActivityThread.main(ActivityThread.java:4363)
10-22 06:16:05.214: E/AndroidRuntime(828):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 06:16:05.214: E/AndroidRuntime(828):  at java.lang.reflect.Method.invoke(Method.java:521)
10-22 06:16:05.214: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-22 06:16:05.214: E/AndroidRuntime(828):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-22 06:16:05.214: E/AndroidRuntime(828):  at dalvik.system.NativeStart.main(Native Method) 
```

它可以完美地使用这种方法删除所有视图。`table.removeAllView()`那么为什么它不能使用这种方法`table.removeViews(1,table.getChildCount()`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:14:45.417

由于您要删除除第一个以外的所有项目，因此您需要确保仅删除“子元素数减去最后一个”。IE

```
table.removeViews(1, table.getChildCount() - 1); 
```

使用您问题中的代码行，您将尝试删除比您在 TableLayout 中实际拥有的更多的子视图。

# c++ - C++ 11x 检查：如何实现 const-variants？

> ID：13005717
> 
> 赞同：2
> 
> 时间：2012-10-22T06:01:27.400
> 
> 标签：c++, c++11

在 C++ 11 之前，我经常需要实现一个方法的两个非常相似的变体来处理类/结构的 const 和非 const 使用场景：

```
struct my_struct_t{
     ....
     float_t& at( uint32_t row, uint32_t col)
     {
         return *(((float_t*)((uint8_t*)numbers+row*row_stride)) + col);
     }

     float_t const& at( uint32_t row, uint32_t col) const
     {
         return *(((float_t*)((uint8_t*)numbers+row*row_stride)) + col);
     }

}; 
```

这在 C++ 11 中是否发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:05:13.483

**没有**。
这在标准库中很明显（它仍然使用显式`const`方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T04:09:41.593

这在 C++11 中没有改变，但在 C++17 中发生了改变：

```
T const & f() const {
    return something_complicated();
}
T & f() {
    return const_cast<T &>(std::add_const(*this).f());
} 
```

请参阅[如何删除类似的 const 和非 const 成员函数之间的代码重复？](https://stackoverflow.com/questions/123758/how-do-i-remove-code-duplication-between-similar-const-and-non-const-member-func)

**编辑**

自从发表这篇文章以来，我已经改变了几次立场。上面的文字反映了我目前的想法。我之前的位置是两个演员都偏爱，而`const_cast`我原来的位置是。更安全，因为它唯一能做的就是添加/删除和限定符。可能会以其他方式意外施放。我最初的想法是更喜欢添加，因为它将最可能的“安全”添加操作与可能危险的删除操作区分开来。上面代码中的版本具有由 说明的安全操作，它只能执行我想要的操作，而将潜在的不安全作为确保您正确完成操作的唯一需要。`static_cast``const_cast``const_cast``const``volatile``static_cast``static_cast``const``const``const``std::as_const``const_cast`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T06:17:45.437

我不认为有必要摆脱“不实现 2 个变体”。

1.  如果两个变体都在做不同的事情，那么您必须保留它们
2.  如果两个变体都在做同样的事情，那么删除非常量版本并只维护`const`版本

顺便说一句，如果需要的话，还有第 3 和第 4 种变体：

```
float_t& at( uint32_t row, uint32_t col) volatile;
float_t& at( uint32_t row, uint32_t col) const volatile; 
```

[注意：不相关，但在 C++11 中，所有变体都可以添加`noexcept`关键字以获取异常相关信息：

```
float_t& at( uint32_t row, uint32_t col) noexcept; 
```

]

# java - java检查特定位置的管理员权限

> ID：13005724
> 
> 赞同：3
> 
> 时间：2012-10-22T06:02:18.947
> 
> 标签：java, file-io, installation

我正在开发一个应用程序，它使用 java 在本地或远程的特定目录上安装 exe 文件。无论如何要检查该远程位置是否具有管理员权限，还是使用 java 的可安装位置？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T06:19:05.087

在 Java 7 中有更好的方法来实现这一点，请查看[File I/O (Featuring NIO.2)](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)了解更多详细信息（特别是[Checking a File or Directory](http://docs.oracle.com/javase/tutorial/essential/io/check.html)，但我（还）没有使用此 API 的经验。

在 Java 6 及更低版本下，我们不得不做一些跳跃（尤其是在 Windows 7 和 UAC 下）...

您可以使用`File#canWrite`来检查目标路径是否可写，但是，这将`true`在 Windows 7 下返回，即使 UAC 不会让您......令我们感到恐惧......

我们编写了一个简单的实用程序方法，它基本上检查`File#canWrite`，如果它是真的，它写了一个临时文件，带有一个简单的字符串并检查它是否存在 ( `File#exists`) 并且内容与我们编写的内容相同。如果那行得通，那么确定我们可以写信到该位置...

（注意偏执狂，我们花了 2 周的时间进行测试以找到问题并提出我们可以信任的解决方案）

# linux - 通过直接读取内核内存来挖出隐藏的内核模块？

> ID：13005725
> 
> 赞同：4
> 
> 时间：2012-10-22T06:02:36.067
> 
> 标签：linux, kernel

是否可以通过直接读取内核内存来找到隐藏的内核模块？

隐藏是指从内核模块列表中删除自身的 LKM。

如果是这样，我应该期待什么结构，或者我应该阅读什么文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T11:50:58.413

在@Eugene 之后，我找到了一种直接读取内核内存以找到所谓的不太聪明的隐藏模块的方法：只需从 procfs 角度和 sysfs 角度比较模块即可：

```
static int detect_hidden_mod_init(void)
{
    char *procfs_modules[MAX_MODULE_SIZE];
    char *sysfs_modules[MAX_MODULE_SIZE];
    int proc_module_index = 0, sys_module_index = 0;

    struct module *mod;
    struct list_head *p;

    // get modules from procfs perspective
    list_for_each(p, &__this_module.list){
        mod = list_entry(p, struct module, list);
        procfs_modules[proc_module_index++] = mod->name;
    }

    // get modules from sysfs perspective
    struct kobject *kobj;
    struct kset *kset = __this_module.mkobj.kobj.kset;
    list_for_each(p, &kset->list) {
        kobj = container_of(p, struct kobject, entry);
        sysfs_modules[sys_module_index++] = kobj->k_name;
    }

    //compare the procfs_modules and sysfs_modules
    ...
} 
```

实际上，它可以检测到大多数当前模块隐藏的 rootkit，但是正如 Eugene 所说，“一个聪明的 rootkit 也可以尝试隐藏这些数据”。所以这不是一个完美的方法。

# tableview - JavaFX 2：需要从 TableView 中的 TableCell 内部访问底层对象

> ID：13005729
> 
> 赞同：0
> 
> 时间：2012-10-22T06:03:11.580
> 
> 标签：tableview, javafx-2, tablecell

我有一个 TableView，其基本项是一个自定义类，即 TableAdapter。我正在为 TableCells 的自定义单元工厂中创建一个 ContextMenu。在菜单项的 EventHandler 中，我需要访问由菜单显示的特定单元格表示的底层 TableAdapter。如果我调用 getItem() 或 getString() 它们似乎都返回对象的字符串表示，但是，我需要对象本身来访问其他字段。谢谢，

私有最终类 cCustomTableCell 扩展 TableCell {

```
 private ContextMenu menu = new ContextMenu();

    public cCustomTableCell(){
        MenuItem menuItem = new MenuItem("Show in tree");
        menu.getItems().add(menuItem);

        menuItem.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent actionEvent) { 
```

// **这是我需要访问底层对象的地方**

```
 }
        });
        setContextMenu(menu);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:46:58.417

尝试定义泛型类型。例如：

```
public class CheckBoxTableCell<S> extends TableCell<S, Boolean> {} 
```

在这种`getItem()`情况下应该返回布尔值

# c# - 可取消的收藏

> ID：13005741
> 
> 赞同：0
> 
> 时间：2012-10-22T06:04:33.687
> 
> 标签：c#, observablecollection, bindinglist

我正在尝试实现一个集合类（从`ObservableCollection`或派生`BindingList`），它将允许我在添加任何新项目时取消它。

现在我知道`ObservableCollection`不允许在`CollectionChanged`活动期间编辑集合中的项目是有原因的，但我正在寻找一种方法来“绕过”这个，无论是从`ObservableCollection`或派生`BindingList`。

任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:07:30.753

好吧，您需要一些`BeforeCollectionChanged`事件，传递一个`EventArgs`带有`Cancelled`您查看的属性以确定是否添加它的属性。

有点像这样，我猜：

```
public override void Add(T item) {
  var e = new BeforeCollectionChangedEventArgs();
  RaiseBeforeCollectionChanged(e);
  if (!e.Canceled)
    base.Add(item);
} 
```

`CollectionChanged`显然为时已晚，因为到那时集合已经*更改*。

# c# - 如何将自定义派生控件包含到工具箱中

> ID：13005742
> 
> 赞同：0
> 
> 时间：2012-10-22T06:04:40.160
> 
> 标签：c#, .net, visual-studio-2008

我已经定义了一个继承自 Datagridview 的类。是否可以将其放在 Visual Studio 的工具箱中，以便我可以单击并拖放到 Windows 窗体设计器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:06:14.937

是的，它可能，右键单击工具箱并自定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:13:39.537

在 VS2012（也可能是更早的版本）中，如果您使用派生自 Control 或 UserControl 的任何类编译您的解决方案，VS 应该自动将您的控件添加到工具箱的顶部。但无论如何，您的解决方案必须编译一次才能在工具箱中选择控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:06:52.547

[您可以在这个 stackoverflow question](https://stackoverflow.com/questions/3446429/how-to-put-a-usercontrol-into-visual-studio-toolbox)中看到如何执行此操作的示例。[您可以在此处](http://msdn.microsoft.com/en-us/library/dyca0t6t.aspx)的 msdn 中找到此主题。

# c - 在C中解密文件的功能？

> ID：13005745
> 
> 赞同：1
> 
> 时间：2012-10-22T06:05:00.637
> 
> 标签：c, arrays, function, pointers, structure

我有一个包含大量“前景”的文件，所以每一行都有一个加密的姓氏、一个加密的名字、一个 12 位的 id 代码，然后是 4 个评级（3 个整数，1 个浮点数）。加密是通过文件中最后一个数字的值（发现是 310）来移动名称的每个字符。

尝试创建一个函数来解密 1 个字符，然后创建另一个函数来使用此函数解密字符串（名称），但出现错误和分段错误，请帮助！

```
#include <stdio.h>
#include <stdlib.h>

#define MSTRLEN 20
#define MAX_SIZE 1000

/* structure prototype */
typedef struct {
    char lastname[MSTRLEN];
    char firstname[MSTRLEN];
    char secretcode[13];
    int rank1;
    int rank2;
    float rank3;
    int rank4;
} prospect_t;

int main (void)
{

    FILE *ifile;
    prospect_t *prospects;
    char last[MSTRLEN],first[MSTRLEN],code[13],last_name,first_name;
    int r1,r2,r4,num_prospects,shift,i,j;
    float r3;

    char unencrypt_letter(char *letter, int shift);
    char unencrypt_name(char name[MSTRLEN], int shift);

    /*finding how many prospects and last integer*/
    ifile = fopen("prospects.txt","r");
    num_prospects = 0;

    if (ifile == NULL){ 
        printf("File not found!\n");
        return (-1);
    }
    while (fscanf(ifile,"%s %s %s %d %d %f %d",last,first,code,&r1,&r2,&r3,&r4)!=EOF){
        num_prospects++;
    }
    shift = r4%26;
    fclose(ifile);
    /*--------------------------------------*/

    /* dynamic memory allocation */
    prospects = (prospect_t*)malloc(num_prospects*sizeof(prospect_t));

    ifile = fopen("prospects.txt","r");

    if (ifile == NULL){ 
        printf("File not found!\n");
        return (-1);
    }

    for(i=0;i<num_prospects;i++){
        fscanf(ifile,"%s %s %s %d %d %f %d", prospects[i].lastname,prospects[i].firstname,prospects[i].secretcode,&prospects[i].rank1,&prospects[i].rank2,&prospects[i].rank3,&prospects[i].rank4); 
    }
    /* to be used once get working
    for(j=0;j<num_prospects;j++){
        prospects[j].lastname = unencrypt_name(prospects[j].lastname,shift);
        prospects[j].firstname = unencrypt_name(prospects[j].firstname,shift);
    }
    */
    /* to be taken out once working */
    last_name = unencrypt_name(prospects[0].lastname,shift);
    first_name = unencrypt_name(prospects[0].firstname,shift);

    printf("%s %s\n",last_name,first_name);

    fclose(ifile);      

    free(prospects);
    return(0);
}

/* function to unencrypt one letter */
char unencrypt_letter(char *letter, int shift)
{
char *new_letter;

if ((*letter - shift) < 'a')
    *new_letter = (char)((*letter - shift) + 26);
else
    *new_letter = (char)(*letter - shift);

return(*new_letter);
}
/* function to unencrypt a name */
char unencrypt_name(char name[MSTRLEN],int shift)
{
char new_name[MSTRLEN];
int k;

k = 0;

while (name[k] != '\0'){
    new_name[k] = unencrypt_letter(name[k],shift);
    k++;
}
return(*new_name);
} 
```

从终端，我得到以下信息：

```
la2.c：在函数'main'中：
la2.c:68:2：警告：格式“%s”需要“char *”类型的参数，但参数 2 的类型为“int”[-Wformat]
la2.c:68:2：警告：格式“%s”需要“char *”类型的参数，但参数 3 的类型为“int”[-Wformat]
la2.c：在函数“unencrypt_name”中：
la2.c:99:3：警告：传递 'unencrypt_letter' 的参数 1 使指针从整数而不进行强制转换 [默认启用]
la2.c:79:6：注意：预期为 'char *' 但参数的类型为 'char'

```

** 链接阶段 gcc -o la2 la2.o

编译和链接成功完成 您的二进制文件可以通过键入以下命令运行：la2 engs20-1:~/engs20/workspace$ la2 Segmentation fault

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:16:11.270

再次阅读警告，它们非常清楚：

```
la2.c:68:2：警告：格式“%s”需要“char *”类型的参数，但参数 2 的类型为“int”

```

它告诉您，第`printf`68 行调用的第二个参数应该是一个字符串 ( `char *`)，但是您传递了一个整数（实际上是一个`char`，但编译器将其转换为`int`）作为该参数。

稍后，当您运行程序时`printf`，将该整数用作指向字符串的指针，并且由于该整数不是正确的整数，因此程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:16:46.807

假设第二个`fscanf`是第 68 行

```
fscanf(ifile,"%s %s %s %d %d %f %d", prospects[i].lastname,prospects[i].firstname,prospects[i].secretcode,&prospects[i].rank1,&prospects[i].rank2,&prospects[i].rank3,&prospects[i].rank4); 
```

我会坚持一些`()`以确保您得到您所想的地址。

```
&(prospects[i].lastname), ... 
```

您在调用它之前没有预先声明`char unencrypt_letter(char *letter, int shift)`，因此编译器假定它返回一个 int。

在它之前添加一个预先声明`main()`。

# visual-studio-2012 - 如何在 Visual Studio 命令提示符下为 Visual Studio Express 2012 运行 exe 文件

> ID：13005750
> 
> 赞同：0
> 
> 时间：2012-10-22T06:05:15.183
> 
> 标签：visual-studio-2012

1.  如何在 Visual Studio 2012 命令提示符下执行 .exe 文件。我正在使用 Visual Studio 速成版

怎么可能？

问候，

普拉萨德

# .net - TPL WPF MVVM 如何使其工作？

> ID：13005755
> 
> 赞同：1
> 
> 时间：2012-10-22T06:05:28.663
> 
> 标签：.net, wpf, mvvm, task-parallel-library, mvvm-light

我们得到了一个长时间运行的作业，它需要一个作业详细信息列表并且不共享任何状态，试图在 WPF MVVM .Net 4 项目中运行。看来任务并行库将是最佳选择，因为它在后台线程上运行并允许并行处理。我创建了一个原型应用程序，它也将 MVVM-Light 用于 RelayCommands。示例“aTplTest.7z”位于[https://skydrive.live.com/redir?resid=DA3E430C1A5F3B81!186&authkey=!AOOWYGbB_PToC5A](https://skydrive.live.com/redir?resid=DA3E430C1A5F3B81!186&authkey=!AOOWYGbB_PToC5A)

原型主要工作（只是运行斐波那契计算进行测试），除了以下内容。

1.  如何将视图显示为对话框并让它自动启动长时间运行的进程？（目前的工作是让用户按下开始按钮。）
2.  在取消当前作业实例时，如何允许用户关闭视图并且不让任务创建异常？

（例如，如果用户按下视图关闭窗口按钮，catch 的 Invoke 方法会创建另一个异常。）

```
 private bool CreateVouchers(int[] workList)
    {
        var loopOptions = new ParallelOptions();
        loopOptions.CancellationToken = TokenSource.Token;
        var success = false;
        try
        {
            Parallel.ForEach(workList, loopOptions, t => BuildVoucher(t));
            success = true;
        }
        catch (OperationCanceledException)
        {
            var scm = new Action(ShowCancellationMessage);
            Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, scm);
        }
        return success;
    } 
```

我将使用任何解决方案更新这篇文章和源示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:08:40.277

要自动启动长时间运行的进程，只需将以下 Window_Loaded 处理程序添加到您定义 Window_Closing 处理程序的代码隐藏：

```
private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    var viewModel = (VoucherBuilderViewModel)this.DataContext;
    viewModel.CancelCommand.Execute(null);
}

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    var viewModel = (VoucherBuilderViewModel)this.DataContext;
    viewModel.RunJob();
} 
```

当然，不要忘记在 XAML 中注册事件处理程序：

```
<Window Closing="Window_Closing" Loaded="Window_Loaded"> 
```

并且要在关闭窗口时摆脱异常，只需添加以下空检查：

```
catch (OperationCanceledException)
{
    if (Application.Current != null)
    {
        var scm = new Action(ShowCancellationMessage);
        Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, scm);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:55:16.383

不完全确定您要问的所有细节，但我可以尝试解决这两个问题。

1.  **将视图显示为对话框：您的意思是这是一个模态对话框吗？如果视图是从 Window 派生的（我假设这不会太容易），只需调用 view.ShowDialog();
    至于启动长时间运行的进程，要么附加到 OnLoaded，要么在构造函数中运行。**

2.  **注册一种关闭视图的方法，包括在循环选项上使用取消令牌。在 Build Voucher 中，只需检查取消令牌是否已请求取消，然后优雅地停止生成消息并进行清理。**

我希望这有帮助。如果您添加评论，我可能会更清楚。

# android - 如何在android上构建openssl

> ID：13005758
> 
> 赞同：5
> 
> 时间：2012-10-22T06:05:55.920
> 
> 标签：android, android-ndk, openssl

我正在尝试在 android 上构建 openssl（来自[https://github.com/guardianproject/openssl-android](https://github.com/guardianproject/openssl-android)）。实际上需要制作**`.so`**这个文件并在另一个android项目中使用。当我尝试通过 ndk-build 命令添加下载的 openssl 的所有文件夹并在提示符下构建时，出现如下错误：

```
Android NDK: Trying to define local module 'openssl' in workspace/project/apps/Android.mk.

Android NDK: But this module is was already defined by workspace/project/apps/Android.mk.

android-ndk-r8b/build/core/build-module.mk:34:
*** Android NDK: Aborting.. Stop. 
```

请让我知道如何构建 .so 文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:30:54.360

请检查**Android.mk**，这是 android 的 make 文件。我认为那个文件有一个愚蠢的错误。

# python - Python：嵌套 lambdas --`s_push：解析器堆栈溢出内存错误`

> ID：13005760
> 
> 赞同：6
> 
> 时间：2012-10-22T06:05:59.613
> 
> 标签：python, stack-overflow, lambda-calculus

我最近偶然发现了[这篇文章](http://experthuman.com/programming-with-nothing#ruining-ruby)，它描述了如何在 Ruby 中只使用 Procs 来编写 FizzBu​​zz，由于我很无聊，我认为尝试在 Python 中使用 lambdas 实现同样的东西会很好。

我到了使用嵌套函数创建数字的部分，并编写了以下 Python 脚本：

```
#!/usr/bin/env python

zero  = lambda p : (lambda x: x)
one   = lambda p : (lambda x: p(x))
two   = lambda p : (lambda x: p(p(x)))
three = lambda p : (lambda x: p(p(p(x))))
five  = lambda p: (lambda x: p(p(p(p(p(x))))))

fifteen = lambda p : (lambda x: p(p(p(p(p( \
                                p(p(p(p(p( \
                                p(p(p(p(p(x))))))))))))))))

hundred = lambda p: (lambda x: p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p( \
                               p(p(p(p(p(p(p(p(p(p(x)))))))))))))))))))))))))))) \
                                                     ))))))))))))))))))))))))))) \
                                                     ))))))))))))))))))))))))))) \
                                                     )))))))))))))))))))

def to_int(func):
    return func(lambda n: n + 1)(0)

print to_int(zero)
print to_int(one)
print to_int(two)
print to_int(three)
print to_int(five)
print to_int(fifteen)
print to_int(hundred) 
```

数字 0 到 15 可以正常工作，但如果我尝试创建数字 100，由于以下错误，文件将无法运行：

> s_push：解析器堆栈溢出
> MemoryError

我必须将其注释掉才能使文件完全运行。

这种很糟糕——有什么办法可以绕过这个限制，这样我就可以任意嵌套 lambdas 和函数调用，而不会导致 Python 崩溃和内存不足？

或者，是否有某种 lambda 演算技巧可以用来表达数字 100，而无需太多嵌套函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T08:20:30.310

> 在没有这么多嵌套函数的情况下表达数字 100？

干得好：

```
>>> test = lambda f: f(lambda x: x + 1)(0)
>>> z = lambda f: lambda x: x
>>> test(z)
0
>>> succ = lambda n: lambda f: lambda x: f(n(f)(x))
>>> _1 = succ(z)
>>> test(_1)
1
>>> _2 = succ(_1)
>>> test(_2)
2
>>> plus = lambda m: lambda n: lambda f: lambda x: m(f)(n(f)(x))
>>> _3 = plus(_1)(_2)
>>> test(_3)
3
>>> mult = lambda m: lambda n: lambda f: lambda x: m(n(f))(x)
>>> _6 = mult(_2)(_3)
>>> test(_6)
6
>>> _5 = plus(_2)(_3)
>>> _25 = mult(_5)(_5)
>>> _4 = plus(_2)(_2)
>>> _100 = mult(_25)(_4)
>>> test(_100)
100
>>> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T06:11:28.857

看起来如果不重新编译 Python 是不可能的。解析器堆栈大小使用常量 MAXSTACK in 设置`parser.h`。您可以增加此值并重新编译以增加限制。请参阅[http://bugs.python.org/issue3971](http://bugs.python.org/issue3971)和[http://mail.python.org/pipermail/python-list/2012-March/621555.html](http://mail.python.org/pipermail/python-list/2012-March/621555.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T07:01:28.753

从 lambda 演算的角度来看，可以使用以下函数来增加数字：

```
succ = lambda n: lambda p: lambda x: p(n(p)(x)) 
```

然后，`one = succ(zero)`，`two = succ(one)`，等等。

# c - 为什么我得到；用“const char *”类型的表达式初始化“char *”会丢弃限定符吗？

> ID：13005762
> 
> 赞同：7
> 
> 时间：2012-10-22T06:06:03.123
> 
> 标签：c

我无法弄清楚为什么我自己会收到此警告`clang`：

```
function_prototype_const_modifier.c:13:8: warning: initializing 'char *' with an
      expression of type 'const char *' discards qualifiers
      [-Wincompatible-pointer-types]
        char *ptr1 = source;
              ^      ~~~~~~
1 warning generated. 
```

代码很简单

```
#include<stdio.h>

char *my_strcpy(char *destination, const char *source);

int main(void) {
    char str1[] = "this is something";  
    char str2[] = "123456789123456789";
    my_strcpy(str2, str1);
    puts(str2);
    return 0;
}
char *my_strcpy(char *destination, const char *source) {
    char *ptr1 = source;
    char *ptr2 = destination;
    while(*ptr1 != '\0') {
        *ptr2++ = *ptr1++;
    }
    *ptr2 = '\0';
    return destination;
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T06:10:56.083

`source`是 a `const char *`，指向 const 字符的指针，因此不能通过取消引用指针来更改字符（即`source[0] = 'A';`违反约束）。

但是，将其分配给 a`char *` *会丢弃*此约束；一个简单的`char *`建议`ptr1`指针指向的字符不是常量，您现在可以自由编写`ptr1[0] = 'A';`而不会出现编译器错误（“诊断消息”）。

当你传入一个字符串文字时，考虑一下这意味着什么。由于字符串文字是“只读的”（它是 a `const char []`），因此尝试修改其内容是未定义的行为。所以如果你打电话

```
my_strcpy(destination, "Constant String"); 
```

但是由于某种原因在代码中你写

```
ptr1[0] = 'A'; 
```

您不会收到编译器诊断消息，因为`ptr1`它是指向非常量字符的指针，但您的程序仍会调用未定义的行为（实际上，很可能会崩溃，因为字符串文字放置在只读内存区域中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T06:11:26.570

你只需要改变：

```
char *ptr1 = source; 
```

到：

```
const char *ptr1 = source; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T06:08:50.680

您指向内存中的同一区域，但也没有限定它`const`，这是论点。

然后，您允许函数体修改标记为 的那部分内存`const`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T06:08:46.967

因为 LHS 的`char *`类型是 ，而 RHS 的类型是`const char *`。

原因与错误所说的完全一样：

> function_prototype_const_modifier.c:13:8: 警告：使用“const char *”类型的表达式初始化“char *”会丢弃限定符

该语句允许您丢弃`const`限定符，它允许修改指向的字符串`ptr1`，`ptr2`因此编译器会抱怨。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T06:08:50.713

您正在将指向字符常量的指针分配给指向 char 的指针。通过这样做，您可能会**修改字符**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-29T03:07:54.600

在这种情况下，我们能做些什么。

感谢@user529758 的明确信息。

只是加上一个答案。

修改的：

```
#include<stdio.h>

char *my_strcpy(char *destination, const char *source);

int main(void) {
    char str1[] = "this is something";  
    char str2[] = "123456789123456789";
    my_strcpy(str2, str1);
    puts(str2);
    return 0;
}
char *my_strcpy(char *destination, const char *source) {
    char *ptr1 = (char*)source;
    char *ptr2 = destination;
    while(*ptr1 != '\0') {
        *ptr2++ = *ptr1++;
    }
    *ptr2 = '\0';
    return destination;
} 
```

# c++ - 如何正确使用内联函数？C++ - 它必须是什么类型？

> ID：13005772
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:06:46.900
> 
> 标签：c++

双打似乎不起作用。我只能使用int吗？
听说可以用C++函数模板把这个改成double。我不知道该怎么做。

```
 #include <iostream>                                                     // Necessary 
using namespace std;
#define mMaxOf2(max, min) ((max) > (min) ? (max) : (min))
#define mMaxOf3(Min, Mid, Max)\
{\
     mMaxOf2(mMaxOf2((Min), (Mid)),(Max))\
}
inline long double fMaxOf2(long double min, long double max)
{
    return max > min ? max : min;
}

inline long double fMaxOf3(long double Min, long double Mid, long double Max)
{
      return fMaxOf2(Min, fMaxOf2( Mid, Max));
    //fMaxOf2(Min, fMaxOf2( Mid, Max));     caused nan   problem      
}

int main()
{
    double primary;
    double secondary;
    double tertiary;

    cout << "Please enter three numbers: ";
    cin >> primary >> secondary >> tertiary;
    cout << "The maximum of " << primary << " " << secondary << " " << tertiary;

    long double maximum = mMaxOf3(primary, secondary, tertiary);
    cout << " using mMaxOf3 is " << maximum;

    cout << "\nThe maximum of " << primary << " " << secondary << " " << tertiary;
    long double maxim = fMaxOf3(primary, secondary, tertiary);
    cout << " using fMaxOf3 is " << maxim;

    return 0;
} 
```

所以问题是

```
 inline long double fMaxOf2(long double min, long double max)
    {
        return max > min ? max : min;
    }

    inline long double fMaxOf3(long double Min, long double Mid, long double Max)
    {
        fMaxOf2(Min, fMaxOf2( Mid, Max));    // This was wrong
        // It was fMaxOf2 (fMaxOf2(Min, Mid, Max);
    } 
```

无论如何，现在我遇到了一个新错误...说 maxim is nan... 解决了。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:08:43.467

使用模板：

```
template<class T>
inline T fMaxOf2(T min, T max)
{
    return max > min ? max : min;
}

template<class T>
inline T fMaxOf3(T Min, T Mid, T Max)
{
    fMaxOf2(Min, fMaxOf2(Mid, Max));
} 
```

要使用这些功能：

```
double max = fMaxOf3<double>(0.231, 123.21312, 904.4); 
```

现在你可能会问，这是为什么呢？模板接受模板参数。`T`in`template<class T>`是两个函数的参数。`T`现在可以在您的函数中用作“普通”类型或类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:13:06.977

这不是内联问题，您缺少函数的类型声明。它应该是 ：

```
inline double fMaxOf2(double min, double max)
{
    return max > min ? max : min;
}

inline double fMaxOf3(double Min, double Mid,double Max)
{
    fMaxOf2(Min, fMaxOf2(Mid, Max));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:10:33.320

fMaxOf3 中的 Ur 代码是错误的，因为 fMaxOf2 只接受 2 个参数。

```
template <class T>
    inline T fMaxOf2(T min, T max)
    {
        return max > min ? max : min;
    }

    template <class T>
    inline T fMaxOf3(T Min, T Mid,T Max)
    {
        fMaxOf2(Min,fMaxOf2(Mid, Max));
    } 
```

# xml - 从 xml 将数据导入表达式引擎 v1

> ID：13005778
> 
> 赞同：4
> 
> 时间：2012-10-22T06:07:07.477
> 
> 标签：xml, expressionengine

我想将 xml 数据作为条目导入到运行表达式引擎 v1.7 的网站中是否有任何扩展、模块、程序等可以促进这一点？请注意，我无法控制提供的 xml 数据。

预先感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T09:54:02.417

我是之前回答中提到的 DataGrab 的作者。

我有一个名为 XMLGrab 的 EE1 插件，它可能会有所帮助：

[http://brandnewbox.co.uk/products/details/xmlgrab](http://brandnewbox.co.uk/products/details/xmlgrab)

XMLGrab 将允许您将 XML 文件导入 EE1 网络日志。它可以从以下位置下载：

[https://bitbucket.org/ajweaver/xmlgrab/overview](https://bitbucket.org/ajweaver/xmlgrab/overview)

有一些简短的说明。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T09:09:53.433

我建议看看 Andrew Weaver 的 DataGrab。它允许多种不同的导入方法，包括 XML。

[http://brandnewbox.co.uk/products/details/datagrab](http://brandnewbox.co.uk/products/details/datagrab)

他的支持有时会受到影响，但他通常在 EE 社区中相当活跃。

还有 Solspace Importer，我相信它做同样的事情，虽然我没有个人经验。

[http://www.solspace.com/software/detail/importer/](http://www.solspace.com/software/detail/importer/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T02:46:17.550

不幸的是，目前没有销售的 EE v1.7 插件可以为您导入 XML 数据。

Solspace Importer 和 DataGrab 都需要 EE2.x。

注意：Solspace Importer 以前确实可以与 EE1.x 一起使用，但他们不再出售它了。您可以尝试向他们发送电子邮件，看看他们是否会直接将其出售给您。

# iphone - 将 NSMutableArarray 写入文件然后读取它

> ID：13005780
> 
> 赞同：0
> 
> 时间：2012-10-22T06:07:12.100
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我有一个 NSMutableArray feed.leagues 有两个对象，`<MLBLeagueStandings: 0xeb2e4b0>` 我想将它写入文件，然后从文件中读取它。这就是我所做的：

```
- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:feed.leagues forKey:@"feed.leagues"];
}

- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.feed.leagues = [decoder decodeObjectForKey:@"feed.leagues"];
    }
    return self;
}

-(void)saveJSONToCache:(NSMutableArray*)leaguesArray {
    NSString *cachePath = [self cacheJSONPath];

    [NSKeyedArchiver archiveRootObject:feed.leagues toFile:cachePath];
    NSMutableArray *aArray = [NSKeyedUnarchiver unarchiveObjectWithFile:cachePath];
    NSLog(@"aArray is %@", aArray);
}

-(NSString*)cacheJSONPath
{

   NSString *documentsDirStandings = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
   NSString *cacheJSONPath = [NSString stringWithFormat:@"%@/%@_Standings.plist",documentsDirStandings, sport.acronym];
return cacheJSONPath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:34:38.863

您的对象： MLBLeagueStandings 应该是可序列化的并响应 NSCoding 协议：

```
@interface MLBLeagueStandings : NSObject <NSCoding>{

} 
```

现在在您的 MLBLeagueStandings 类文件 (.m) 中添加以下方法：

```
- (id)initWithCoder:(NSCoder *)decoder;
{
  self = [super initWithCoder:decoder];
  if(self)
  {
    yourAttribute = [decoder decodeObjectForKey:@"MY_KEY"]
    //do this for all your attributes
  }
}

- (void)encodeWithCoder:(NSCoder *)encoder;
{
  [encoder encodeObject:yourAttribute forKey:@"MY_KEY"];
  //do this for all your attributes
} 
```

事实上，如果你想将一个对象写入一个文件（在你的情况下它是一个数组），这个数组中包含的所有对象都必须符合 NSCoding 协议。

此外，如果您想要示例：[这是一个很好的教程](http://benreimers.net.au/blog/saving-and-loading-data-nscoding-and-nskeyedarchiver)

希望它会帮助你。

注意：如果您想对原始类型（int、float 等）进行编码/解码，请使用：

```
[encode encodeInt:intValue forKey:@"KEY"]; 
```

（[有关苹果文档的更多信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html)）

# javascript - Javascript 表达式求解器

> ID：13005790
> 
> 赞同：1
> 
> 时间：2012-10-22T06:08:12.053
> 
> 标签：javascript, ieee-754

> **可能重复：**
> [JavaScript 浮点数问题的优雅解决方法](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

我需要一个解决方法，因为 Javascript 由于它使用 1985 年的 IEEE 754 标准而无法可靠地进行浮动数学运算。基本上，我需要的是一种评估像 5+3*(2+8/6) 这样的表达式的方法。我正在考虑用字符串来做这件事，并为基本操作滚动我自己的函数（+-*/%），但我首先想知道你是否知道任何已经这样做的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:16:52.977

这取决于数字有多大。对于小数字（例如少于 14 位有效数字），四舍五入到可接受的精度可能会起作用。例如给出你的例子：

```
var n = 0.5 / 5 + 1 / 5;  // 0.30000000000000004

var p = Math.pow(10, 14); // where 14 is calculated based on the first
                          // significant digit and its relationship to
                          // the decimal place

n = Math.round(n * p) / p;  // 0.3 
```

计算要使用的 10 的幂应该不难。如果您有大量数字，那么生活会更加困难（请参阅现有库）。

# javascript - 如何使用 i18next？翻译问题

> ID：13005791
> 
> 赞同：21
> 
> 时间：2012-10-22T06:08:13.483
> 
> 标签：javascript, html, jquery-mobile, internationalization, i18next

我想在我的 jQuery Mobile 和 jQuery 网站上使用国际化选项。我试图用[http://i18next.com](http://i18next.com)上的文档生成一个示例，但似乎我失败了。有人有使用 i18next 的经验吗？

这是我的例子：

索引.html：

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <script src="jquery-mobile/jquery-1.6.4.min.js"       type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.0.min.js"  type="text/javascript"></script>
    <script src="js/i18next-1.5.6.min.js"                 type="text/javascript"></script>
    <script src="js/translation.js"                       type="text/javascript"></script>
  </head>
  <body>
    <div data-role="page" id="page">
    <div data-role="content">
      <div id="headline1" data-i18n="headline"></div>
        <table width="100%" border="0" id="menu1" class="menu">
          <tr id="surname">
            <td width="50%" data-i18n="menu.surname"></td>
            <td width="50%">&nbsp;</td>
          </tr>
          <tr id="firstName">
            <td width="50%" data-i18n="menu.firstName"></td>
            <td width="50%">&nbsp;</td>
          </tr>
        </table>
      </div>
    </div>
  </body>
</html> 
```

翻译文件：/locales/de/translation.json

```
{
  "menu": {
    "surname": "Name:",
    "firstName": "Vorname:"
  },

  "headline": "Daten:",
  "headline_1": "Daten Allgemein:",
  "headline_2": "Daten Speziell:"
} 
```

/locales/en/translation.json

/locales/dev/translation.json

```
{
  "menu": {
    "surname": "Name:",
    "firstName": "First Name:"
  },

  "headline": "Data:",
  "headline_1": "Daten Common:",
  "headline_2": "Daten Specific:"
} 
```

/js/translation.js

```
$(document).ready(function(){
  language_complete = navigator.language.split("-");
  language = (language_complete[0]);
  console.log("Sprache (root): %s", language);

  i18n.init({ lng: language });
  i18n.init({ debug: true });
  $(".menu").i18n();
  $("headline").i18n();
}); 
```

我得到的菜单的翻译是“menu.name”而不是预期的“名称：”。对于标题，我没有得到翻译，但我希望是“数据：”或“日期：”。

如果我尝试以下直接调用，我不会得到任何翻译： i18n.t("menu.surname", { defaultValue: "Name:"});

有谁知道问题是什么？还是有人有适合我尝试做的工作示例？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T07:43:09.620

主要问题是你不能`i18n.t("menu.surname", { defaultValue: "Name:"});`在初始化后直接调用，因为从服务器加载资源是异步的，所以基本上你尝试在 i18next 获取资源之前进行翻译。

而是使用回调加载它：

```
$(document).ready(function(){
  language_complete = navigator.language.split("-");
  language = (language_complete[0]);
  console.log("Sprache (root): %s", language);

  i18n.init({ lng: language, debug: true }, function() {
      // save to use translation function as resources are fetched
      $(".menu").i18n();
      $("headline").i18n();
  });
}); 
```

或使用标志来加载资源同步。

顺便说一句：你的 html 代码有一个关闭`</div>`太多。

调用`$("headline").i18n();`应该是`$("#headline").i18n();`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T06:59:45.167

```
 <!DOCTYPE html>
    <html>

    <head>
        <title>Basic Sample Usage</title>

        <script src="js/jquery.js" type="text/javascript"></script>   
        <script src="js/i18next.js" type="text/javascript"></script>  
    </head>

    <body>

        <h3> you can switch lng via ?setLng='lngTag' </h3>
        <a id="en" href="?setLng=en"> en </a>
            | &nbsp;
        <a id="de" href="?setLng=de"> de </a>  

        <h3>loaded via attribute 'data-i18n' and $('.nav').i18n();</h3>

        <h5>basic text</h5>
        <ul class="nav">
            <li class="active"><a href="#" id = "navy" data-i18n="nav.home"></a></li>
            <li><a href="#" data-i18n="nav.1"></a></li>
            <li><a href="#" data-i18n="nav.2"></a></li>
        </ul>

        <button id="btn" data-i18n="ns.common:add"></button>

        <h5>extended usage of 'data-i18n' - apply to other attributes</h5>
        <div id="extendedAttr">
            <input data-i18n="[placeholder]ns.common:attr.placeholder;" type="text"></input>
            <button data-i18n="[title]ns.common:attr.title;btn.hoverMe;"></button>
        </div>

        <script>

        $.i18n.init({
            //lng: 'en',
            ns: { namespaces: ['ns.common', 'ns.special'], defaultNs: 'ns.special'},
            useLocalStorage: false,
            debug: true
        }, function(t) {

            //$('#navy').i18n(); for single 
            $('.nav').i18n();  // for group
            $('#btn').i18n();
            $('#extendedAttr').i18n();
        });

        </script>

    </body>

    </html>

locales/en/ns.special.json <=> make same for de/ns.speacial.json
{
    "nav": {
        "home": "en home",
        "1": "en  link 1",
        "2": " en link 2"
    }, 
    "btn": {
        "hoverMe": "en hover me!"
    }
}

and locales/de/ns.common.json <=> make same for en/ns.speacial.json
{
    "app": {
        "company": {
          "name": "my company"
        }
    },
    "attr": {
        "placeholder": "de translated placeholder",
        "title": "translated title" 
    },
    "add": "de add"
} 
```

# excel - 对 Excel 单元格中的单元格序列执行某些操作？

> ID：13005800
> 
> 赞同：0
> 
> 时间：2012-10-22T06:09:02.160
> 
> 标签：总结, excel, 一系列单元格求和？, excel, sum, range, sequence

我想[总结](/questions/tagged/sum "显示标记为“总和”的问题")“A9 和 A54 之间的每 5 行”，即

> A(5x + 9)-A(54),

在[excel](/questions/tagged/excel "显示标记为“excel”的问题")里面。

这里还有一个子问题。是否可以使用函数或 VBA对[一系列单元格求和？](/questions/tagged/range "显示标记为“范围”的问题")

以下是一些基于答案的测试问题：

*   `=SUMPRODUCT(--(MOD(ROW(Range)-MIN(ROW(Range))+1,1)=0),A1:A50)`-- 对 A1 到 A50 行求和？
*   `=SUMPRODUCT(--(MOD(ROW(A50)-MIN(ROW(A50))+1,2)=0),A1:A50)`-- 每隔一行求和，A1 到 A50
*   `=SUMPRODUCT(--(MOD(ROW(A5:A50)-MIN(ROW(A1:A50))+1,5)=0),A1:A50)`-- 对 A5 和 A50 之间的每 5 行求和？

基于：

> 用 A9:A54 代替 Range，用 5 代替您的特定查询。只有那些部分改变答案将保持不变，即使您删除范围以下的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:18:11.017

我会使用更强大的 RocketDonkey 答案版本。他评论中的 -8 是因为范围的第一行是 9 但通常对于任何单列范围，您可以使用此公式对每 n 行求和（从范围的第一行开始）

`=SUMPRODUCT(--(MOD(ROW(Range)-MIN(ROW(Range)),n)=0),Range)`

用 A9:A54 代替 Range，用 5 代替您的特定查询。只有那些部分改变

即使您删除 Range 以下的行，答案也将保持不变

**解释**

ROW(Range)-MIN(ROW(Range)) 部分将返回一个整数数组，从 0 开始到整数个数对应范围内的单元格数，所以

`=ROW(A9:A54)-MIN(ROW(A9:A54))`

产生这个数组

`{0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23;24;25;26;27;28;29;30;31;32;33;34;35;36;37;38;39;40;41;42;43;44;45}`

当您将其输入到除数 5 的 MOD 函数时，显然 MOD(0,5) = 0，因此在这种情况下，第一个单元格 (A9) 始终满足条件......因此每隔 5 个（或第 n 个） ) 范围内的单元格，所以

`=SUMPRODUCT(--(MOD(ROW(A9:A54)-MIN(ROW(A9:A54)),5)=0),A9:A54)`

从范围内的第一个单元格开始，每隔 5 个单元格求和，即对 A9、A14、A19、A24....等进行求和。

显然你可以用 9 替换 MIN(ROW(A9:A54)) 但是如果你删除第 9 行下面的一些行，公式结果会改变，所以使用这个结构会更健壮一些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:11:32.177

我猜`ROW(A9:A54)-MIN(ROW(A9:A54)`in`MOD(ROW(A9:A54)-MIN(ROW(A9:A54)),5`产生数字-9。在这个等式 MOD 中，x in -x 的值是数轴上远离 的位置`cell 0`。因此， , 的结果`ROW(A9:A54)-MIN(ROW(A9:A54)`使`-9`A9 成为我们`MOD`遍历的数组中的第 0 个条目。有可能这就是它的`=0`用途......

`=SUMPRODUCT(--(MOD(-9,5)),A9:A54)`显然具有相同的效果。出于某种原因，首选长版本，即：`=SUMPRODUCT(--(MOD(ROW(Range)-MIN(ROW(Range)),n)=0),Range)`. 我没有看到优势，但它与移动或删除单元格有关。我想它正在发生变化，因为有一个空的单元格应该不重要。

对于我们为什么使用`=SUMPRODUCT`and not`SUM`和`--`而不是`SUM`. `--`做加法，我猜它也将布尔值转换为数字。我不明白为什么这些东西都是必要的，在这里。也许这是一个以防万一的事情。例如，也许每 15 行是一个不需要的字符串常量，而不是所需的数字。不过，我认为将一个系列包含在另一个系列中会更普遍有用。

# objective-c - 为什么 ARC 中的 __weak 指针未设置为零？

> ID：13005801
> 
> 赞同：0
> 
> 时间：2012-10-22T06:09:03.450
> 
> 标签：objective-c, ios, automatic-ref-counting

> **可能重复：**
> [在 xcode 4.5.1 中，关于 ios ARC](https://stackoverflow.com/questions/13005388/in-xcode-4-5-1-about-ios-arc)

这是我的代码（弧）

```
self.string1=@"aaa";
__weak NSString *temp= self.string1;

NSLog(@"string1  %@",self.string1);
NSLog(@"temp     %@",temp);

self.string1=nil;
NSLog(@"---after self.string1 = nil----");
NSLog(@"string1   %@",self.string1);
NSLog(@"temp      %@",temp); 
```

我认为输出应该如下：

```
string1  aaa
temp     aaa
---after self.string1 = nil----
string1   (null)
temp      (null) 
```

但是，当我在 xcode4.5.1 中运行它时，它让我感到困惑

```
string1  aaa
temp     aaa
---after self.string1 = nil----
string1   (null)
temp      aaa 
```

谁能帮助我，告诉我为什么 temp=@"aaa"（它是 __weak，在 string1=nil 之后应该是 nil）

编辑：大家好。我们会在错误的方向上讨论吗？也许 NSLog 是在核心基础功能参考中定义的。ARC 对核心基础函数的参数有一些规则，就像 NSLog 一样？我们将 _weak 对象作为参数传递给 NSLog，它会将 _weak 更改为 _autorelease？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T06:40:26.130

`@"aaa"`是编译时常量，永远不会被释放。所以，即使你的弱指针是你唯一的东西，它仍然是一个有效的对象。

使用运行时创建的字符串、使用`alloc / initWithFormat:`或类似的方法再次尝试实验，您应该会看到预期的结果。

**更新**

现在我自己对此进行了测试，它似乎*仍然*没有按预期工作。[这里](https://stackoverflow.com/questions/9202810/lifetime-of-weak-local-variables-with-arc)有关于这个问题的进一步讨论

# php - 计算两个时间域之间的差异

> ID：13005804
> 
> 赞同：0
> 
> 时间：2012-10-22T06:09:25.743
> 
> 标签：php, mysql, datetime, timestamp

嗨，我正在使用第三方 API 来显示我们网站中的提要，因为我在 db 表中`opentime`有调用字段。`closetime`该`feed`表每 20 秒更新一次。一切正常，现在问题出在`opentime`and`closetime`上。从我服务器的当前时间开始，它会在未来提供 3 小时的时间（可能是他们的服务器时间）。举例来说，如果我的服务器当前时间是上午 8:00，那么在时间馈送表正在更新`opentime`为上午 11:00（从现在起 3 小时，有时会发生变化）。我们不能对表进行任何更改，`feed`因为表是通过 API 调用自动更新的。

所以我想找出这两者之间的时间差（`opentime - currenttime`），我怎样才能将它转换`opentime`成我的服务器时间。

`my-sql`我在查询中尝试了以下代码，

```
TIMESTAMPADD(MINUTE,-180,FROM_UNIXTIME(opendate) // subtracting 3 hours(180 min) from the opendate. 
```

有没有其他方法可以做到这一点？

提前感谢您的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:13:17.790

您可以更改 MySQL 的默认时区。这可以设置为 MySQL 服务器的默认值，或者在每个连接中动态设置。像这样的东西：

```
set timezone='your timezone'; 
```

[http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:18:48.070

为 mysql 配置设置时区

```
set timezone='your timezone'; 
```

尝试一下

```
SELECT TIMESTAMPDIFF(MINUTE,'2012-10-21', NOW()) as diff;
diff=1997 
```

# http - 寻找一种通过互联网传输关键实时数据的好方法

> ID：13005805
> 
> 赞同：6
> 
> 时间：2012-10-22T06:09:31.600
> 
> 标签：http, sockets, network-programming, msmq, rtp

我正在寻找一种通过 Internet 传输数据的好方法，并且我在 C++/windows 环境中工作。数据是二进制的，是提取图像的压缩 blob。输入和要求如下：

1.  6kB/包@10 包/秒（60kBytes/秒）
2.  可靠的数据传输

我是网络编程的新手，到目前为止，我可以发现以下方法之一是合适的。

1.  插座
2.  MSMQ（MS 消息队列）

客户端在浏览器上运行（在浏览器上显示实时图像）。当服务器运行本机 C++ 代码时。请让我知道是否有任何其他方法可以实现相同的目标？我应该去哪一个，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:54:11.870

如果服务器确定发送图像的速度，这就是它的样子，那么**服务器推送**式解决方案将是有意义的。如今，大多数浏览器（甚至非浏览器）正在适应的是**[WebSockets](https://en.wikipedia.org/wiki/WebSockets)**。

WebSockets 相对于大多数专有协议的主要优势，除了成为广泛采用的标准外，还在于它们运行在 HTTP 之上，因此可以渗透（大多数）代理和防火墙等。

在服务器端，您可能会集成**[node.js](http://nodejs.org)**，它允许您轻松实现 WebSockets，并附带许多其他库。它是用 C++ 编写的，并且可以通过 C++ 和 JavaScript 进行扩展，node.js 为其托管一个 VM。node.js 的主要特点是在每个级别都是异步的，这使得这种编程风格成为默认。

但是当然还有其他方法可以在服务器端实现 WebSockets，也许 node.js 比你需要的更多。我已经在 Windows 上为 node.js 实现了一个 C++ 扩展，并使用[socket.io](http://socket.io)为旧版浏览器执行 WebSocket 和非 WebSocket 传输，这对我来说效果很好。

但那是文本数据。在您的**二进制数据**案例中，socket.io 不会这样做，因此您可以查看[其他](http://binaryjs.com/)通过 WebSockets 执行二进制的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:20:25.743

是否有任何特定原因导致您无法在 Windows 机器上运行服务器？60kb/秒，看起来像某种嵌入式设备？

根据我们的描述，您需要在浏览器上实时显示图像信息。您可以使用 HTTP。但它是无状态的，这意味着一旦信息被传输，你就会失去连接。您的客户端需要轮询 C++/Windows 机器。如果您非常确信生成的信息是周期性的，您可以使用这种方法。这需要一个服务器，所以只有在我的第一个问题是肯定的情况下

聊天协议。类似于在您的客户端上运行的 Jabber 客户端，以及在您的 C++/Windows 机器上运行的 Jabber 服务器。聊天协议允许几乎实时

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T21:13:58.253

虽然这似乎有道理，但在这种情况下我不会使用 MSMQ。您现在可能不会遇到问题，但是 MSMQ 消息的大小是有限的，您最终可能会因此而碰壁。

我会在这个应用程序中使用 TCP，TCP 的构建考虑了可靠性，您可以简单地通过套接字提供数据。您可能必须自己找出一个非常简单的协议，但它应该是最佳选择。

除非您使用的是开箱即​​用的理解 MSMQ 的嵌入式设备，否则使用 MSMQ 的最佳选择是使用代理，然后您仍然被迫使用 TCP 和可能的 HTTP。

我在个人时间进行家庭自动化，包括安全摄像头，我使用 .net 微框架，即使它确实具有 MSMQ 功能，我仍然不会使用它。

我建议您查看 MJPEG（Motion JPEG），这听起来与您想做的完全一样。

[http://www.codeproject.com/Articles/371955/Motion-JPEG-Streaming-Server](http://www.codeproject.com/Articles/371955/Motion-JPEG-Streaming-Server)

# sql - Linq - SQL 查询转换

> ID：13005807
> 
> 赞同：-3
> 
> 时间：2012-10-22T06:09:43.943
> 
> 标签：sql, linq

有人可以帮我将此查询转换为 linq 吗？我不知道如何使用联合然后在 linq 中求和。

```
SELECT Patientname, SUM(A)AS Trec
  FROM (SELECT Pm.Patientname, COUNT(*)AS A
          FROM Facilitycheckinholdorder Fcho
              INNER JOIN Medordertype Mot ON Fcho.Orderseq = Mot.Orderseq
              JOIN Patientmaster Pm ON Mot.Patientseq = Pm.Patientseq
                   AND Fcho.Filleddate BETWEEN '2011-09-01 00:00:00:000' AND '2012-10-16 00:00:00:000'
                   AND Mot.Facilityid = 139
         GROUP BY Pm.Patientname
       UNION ALL
       SELECT Pm.Patientname, COUNT(*)AS A
         FROM Rxqdeliveryholdorder Rdho
              INNER JOIN Medordertype Mot ON Rdho.Orderseq = Mot.Orderseq
              JOIN Patientmaster Pm ON Mot.Patientseq = Pm.Patientseq
                   AND Rdho.Filleddate BETWEEN '2011-09-01 00:00:00:000' AND '2012-10-16 00:00:00:000'
                   AND Mot.Facilityid = 139
         GROUP BY Pm.Patientname
      ) AS Trec
  GROUP BY Patientname; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:35:21.203

关键点：

*   您最外层的查询似乎是多余的。
*   你的名字不是常见的 C# 风格，这使得它们难以阅读。
*   `UNION ALL`对应`Concat`，不是`Union`。
*   尽早让路可以让`Concat`您简化查询。您可以在 SQL 中执行此操作。

.

```
var result =
    from order in Queryable.Concat(
        FacilityCheckInHoldOrder.Select(o => new { o.OrderSeq, o.FilledDate }),
        RxqDeliveryHoldOrder    .Select(o => new { o.OrderSeq, o.FilledDate }))
    where order.FilledDate >= new DateTime(2011,  9,  1) &&
          order.FilledDate <  new DateTime(2012, 10, 16)
    join type in MedOrderType.Where(t => t.FacilityID == 139)
        on order.OrderSeq equals type.OrderSeq
    join patient in PatientMaster
        on type.PatientSeq equals patient.PatientSeq
    group by patient.PatientName into grp
    select new
    {
        PatientName = grp.Key,
        Trec = grp.Count()
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:39:34.060

事实上，这不是一个真正的问题，但我已经尽力了......

```
var lst1 =
    from fhco in facilitycheckinholdorder
    join mot in meordertype on mot.orderseq equals fhco.orderseq
    join pm in patientmaster on mot.patientseq equals pm.patientseq
    where 
        fcho.FilledDate >= new DateTime(2011, 9, 1)
        fcho.FilledDate <= new DateTime(2012, 10, 16)
    select pm;
var lst2 =
    from rdho in rxqdeliveryholdorder
    join mot in meordertype on rdho.orderseq equals mot.orderseq
    join pm in patientmaster on moit.patientseq equals pm.patientseq
    where 
        fcho.FilledDate >= new DateTime(2011, 9, 1)
        fcho.FilledDate <= new DateTime(2012, 10, 16)
    select pm;
var res = 
    from item in lst1.Union(lst2)
    select new { Name = item.patientname, Count = lst1.Count() + lst2.Count() }; 
```

# javascript - 无论如何在 HTML5 画布元素中扭曲/网格化文本？

> ID：13005809
> 
> 赞同：3
> 
> 时间：2012-10-22T06:09:47.820
> 
> 标签：javascript, canvas

我需要能够动态扭曲 HTML5 画布元素中生成的文本。

我希望达到的效果类似于这张图片......

![在此处输入图像描述](../Images/355057c56a54bc77caf686fb62dfaad6.png)

蓝线是转换的表示。

我知道我可以对文本使用矩阵变换，但似乎无法理解它们。

我将如何以这种方式扭曲文本？

# ios - JSONKit.h 中的 objectFromJSONString 在 iOS 中返回 null

> ID：13005811
> 
> 赞同：0
> 
> 时间：2012-10-22T06:09:54.620
> 
> 标签：ios, jsonkit

请执行以下操作以重现问题

```
NSString *url = @"http://qdreams.com/laura/index.php?request=EventWeekListings&year=2012&month=10&day=22";

NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
NSString *json = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"%@" , json);
NSDictionary *deserializedData = [json objectFromJSONString]; 
```

*deserializedData* 将包含*nil*。预期的行为是返回正确的字典。

那是因为 JSON 字典元素的总数超过了某个阈值吗？

我将不胜感激在这件事上的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:26:02.030

looking at your json you start with the array value (using square brackets) without a name. try reformatting you response with something like this:

```
 {"results":[...the rest of your response..]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:31:12.950

为什么不直接使用 NSJSONSerialization 方法 JSONObjectWithData:options:error: 它对我来说很好用。

```
 NSString *url = @"http://qdreams.com/laura/index.php?request=EventWeekListings&year=2012&month=10&day=22";
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
    NSArray *arr = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
    NSLog(@"%@",arr); 
```

编辑后：我今天早上再次运行代码，和你一样我得到了空值。dataWithContentsOfURL 的问题。是您无法控制，也无法知道如果出现问题会发生什么。所以，我用下面的代码重新测试：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [self loadData];
}

-(void) loadData {

    NSLog(@"loadData...");
    self.receivedData = [[NSMutableData alloc] init];
    NSURL *url = [NSURL URLWithString:@"http://qdreams.com/laura/index.php?request=EventWeekListings&year=2012&month=10&day=22"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url cachePolicy: NSURLRequestUseProtocolCachePolicy timeoutInterval: 10.0];
    [NSURLConnection connectionWithRequest:request delegate:self];

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"didReceiveResponse...");
    [self.receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"didReceiveData...");
    NSLog(@"Succeeded! Received %ld bytes of data",[data length]);
    [self.receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"didFailWithError...");
    NSLog(@"Connection failed! Error - %@ %@",[error localizedDescription],[[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
    //lblError.text = [NSString stringWithFormat:@"Connection failed! Error - %@",[error localizedDescription]];
    self.receivedData = nil;
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading...");
    NSError *error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:self.receivedData options:kNilOptions error:&error];
    if (error) {
        NSLog(@"%@",error.localizedDescription);
        NSLog(@"%@",[[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding]);
    }else{
        NSLog(@"Finished...Download/Parsing successful");
        if ([result isKindOfClass:[NSArray class]]) 
            NSLog(@"%@",result);
    }
} 
```

出现错误，error.localizesDescription 的日志为：“数据已损坏，无法读取”。因此，从服务器返回的内容似乎有问题，导致 JSON 解析器无法正常工作。我还打印了字符串以及错误消息。也许您可以仔细查看并尝试找出数据出了什么问题。

# javascript - 当我保存模型时，为什么主干会在 {model: {model_property:value ,...} } 内发送模型信息

> ID：13005812
> 
> 赞同：0
> 
> 时间：2012-10-22T06:09:59.830
> 
> 标签：javascript, json, node.js, backbone.js, mongoose

我正在用node.js 和backbone.js 编写一个应用程序。但是，当我尝试保存模型时，它会将模型的 JSON 嵌套在模型字典中。

```
node = new NodeModel({prop1:"value1", prop2:"value2"});
node.save(); 
```

console.log(req.body) 的结果；在我的节点控制器显示里面......

```
{model: {"prop1":"value1", "prop2":"value2"} } 
```

如果我使用标准 html 表单将 console.log(req.body) 的结果发布到同一个节点控制器；显示...

```
{prop1:"value1", prop2:"value2"} 
```

我怎样才能得到 node.save(); 发布与常规 HTML 相同的 JSON 的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:44:21.550

看起来您已将 Backbone 配置为[模拟 JSON](http://backbonejs.org/#Sync-emulateJSON)：

> **模拟JSON** `Backbone.emulateJSON = true`
> 
> 如果您正在使用无法处理编码为 的请求的旧版 Web 服务器，则`application/json`设置`Backbone.emulateJSON = true;`将导致 JSON 在`model`参数下被序列化，并使用 mime 类型发出请求`application/x-www-form-urlencoded`，就像来自 HTML 表单一样。

和相应的块`Backbone.sync`看起来像这样：

```
if (!options.data && model && (method == 'create' || method == 'update')) {
  params.contentType = 'application/json';
  params.data = JSON.stringify(model.toJSON());
}
//...
if (Backbone.emulateJSON) {
  params.contentType = 'application/x-www-form-urlencoded';
  params.data = params.data ? {model: params.data} : {};
} 
```

您可以`model.toJSON()`在第一个中看到调用，第二个`if`中出现`model:`前缀`if`。你应该可以说

```
Backbone.emulateJSON = false; 
```

在你的应用程序设置中的某个地方（在加载 Backbone 之后，在你尝试同步任何东西之前），`model:`业务就会消失。

# android - Android 无法识别我的 android 7inch tablet 3.2 honeyComb

> ID：13005813
> 
> 赞同：1
> 
> 时间：2012-10-22T06:10:11.040
> 
> 标签：android, eclipse

我的 Android Eclipse 无法识别我的 7 英寸 Android 平板电脑。它在窗口上安装和显示 USB 图标，但是当我尝试运行我的应用程序时，设备没有在 Eclipse 上显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:22:34.413

如果您在 Windows 上，您可能必须更新您的 adb_usb.ini 以包含设备的 USB ID 和/或安装驱动程序。

当我开始为 Kindle Fire 开发时，我不得不这样做。

以下是爱可视的说明页面：[http](http://www.archos.com/support/support_tech/updates_adb.html?country=us&lang=en) ://www.archos.com/support/support_tech/updates_adb.html?country=us&lang=en 您可能会为您的制造商找到类似的页面。

之后，您需要停止 adb 并重新启动它，然后您应该能够看到您的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:16:29.667

看看这个[链接](http://developer.android.com/tools/device.html)。

我认为您在设置开发系统时遇到了问题，因此请查看上述链接中的第 3 步。

> 一种。以 root 身份登录并创建此文件：/etc/udev/rules.d/51-android.rules。使用此格式将每个供应商添加到文件中：

```
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="plugdev" 
```

> b.现在执行：chmod a+r /etc/udev/rules.d/51-android.rules

如果你在 ubuntu 上，[这个链接](http://dimitar.me/how-to-connect-your-android-phone-to-ubuntu-to-do-developmenttestinginstallations-or-tethering/)会帮助你。

祝你好运！

# android - 将 JPCT-ae 与 QCAR(vuforia) 集成

> ID：13005814
> 
> 赞同：2
> 
> 时间：2012-10-22T06:10:13.327
> 
> 标签：android, opengl-es, augmented-reality, qcar-sdk, jpct

我知道我要问的问题有时已经讨论过了，但是在经历了所有这些之后，我找不到完整的答案，所以我问了一个新问题

当我尝试将JPCT [-ae](http://www.jpct.net/jpct-ae/)与[QCAR](https://ar.qualcomm.at/forum/2000012)集成时，一切都按预期进行，我从 jni 的渲染框架中获得了我的模型视图矩阵，并成功地将其在 java 中转移到 jpct 模型中，如预期的那样完美显示。但是当我试图将此矩阵传递给 JPCT 世界相机时，我的模型消失了。

我的代码：在 onsurfacechanged：

```
world = new World();
            world.setAmbientLight(20, 20, 20);
            sun = new Light(world);
            sun.setIntensity(250, 250, 250);
            cube = Primitives.getCube(1);
            cube.calcTextureWrapSpherical();
            cube.strip();
            cube.build();
            world.addObject(cube);
            cam = world.getCamera();
            cam.moveCamera(Camera.CAMERA_MOVEOUT, 10);
            cam.lookAt(cube.getTransformedCenter());
            SimpleVector sv = new SimpleVector();
            sv.set(cube.getTransformedCenter());
            sv.y -= 100;
            sv.z -= 100;
            sun.setPosition(sv);
            MemoryHelper.compact(); 
```

在ondraw中：

```
com.threed.jpct.Matrix mResult = new com.threed.jpct.Matrix();
            mResult.setDump(modelviewMatrix );  //modelviewMatrix i get from Qcar
            cube.setRotationMatrix(mResult);
            cam.setBack(mResult);
                     fb.clear(back);
        world.renderScene(fb);
        world.draw(fb);
        fb.display(); 
```

经过一些研究，我发现 QCAR 使用右手坐标系，这意味着 X 正极向右，Y 正极向上，Z 正极从屏幕上出来，但在 JPCT 坐标系中，X 正极向右，Y 正极向右向下，Z 正极进入屏幕。

Qcar坐标系：

![QCAR坐标系](../Images/f9edba222bed6dda31b8eecb5f695b72.png)

我知道 QCar 给出的矩阵是一个 4*4 矩阵，具有 3*3 旋转值和平移向量。

我发布矩阵更清楚：

模型视图矩阵：

```
1.512537      -159.66255   -10.275316   0.0
-89.86529      -1.1592013   4.7839375            0.0
-8.619186     10.179538     -159.44305   0.0
59.182976        93.205956     437.2832            1.0 
```

使用 cam.setBack(modelviewmatrix.invert(modelviewmatrix)) 反向后的模型视图矩阵：

```
5.9083453E-5   -0.01109448   -3.3668696E-4   0.0
0.0040540528   -3.8752193E-4   0.0047518034   0.0
-0.004756433   -4.6811014E-4   0.0040459237   0.0
0.7533285     0.4116795            2.7063704   0.9999999 
```

如果我删除 13,14 和 15 矩阵元素，假设 3*3 旋转矩阵...模型正确旋转但平移（图像的进出移动）不存在最后我不知道需要什么更改平移向量。所以请告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T09:14:27.083

`QCAR::Matrix44F inverseMatrix = SampleMath::Matrix44FInverse(modelViewMatrix); QCAR::Matrix44F invTransposeMatrix = SampleMath::Matrix44FTranspose(inverseMatrix);`

然后将`invTransposeMatrix`值传递给java

`env->SetFloatArrayRegion(modelviewArray, 0, 16, invTransposeMatrix.data); env->CallVoidMethod(obj, method, modelviewArray);`

# python - 多次匹配任何字符，但在给定字符处停止

> ID：13005815
> 
> 赞同：2
> 
> 时间：2012-10-22T06:10:18.770
> 
> 标签：python, regex

我正在编写一个正则表达式，用于识别字符串中的命令。我有三个可能的命令可以以命令开头的单词，它们总是以分号结尾。

我相信正则表达式模式应该是这样的：

```
(command1|command2|command3).+; 
```

我发现的问题是，由于`.`匹配任何字符并`+`告诉它匹配一个或多个，它会跳过分号的第一个实例并继续前进。

有没有办法让它在遇到分号的第一个实例时停止？`.`除了我应该使用的东西之外，还有其他东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T06:12:43.980

您面临的问题是： `(command1|command2|command3).+;`是`+`贪婪的，这意味着它将匹配所有内容，直到最后一个值。

要解决此问题，您需要使其成为非贪婪的，为此您需要添加`?`运算符，如下所示：`(command1|command2|command3).+?;`

就像仅供参考一样，这同样适用于`*`运营商。添加 a`?`将使其不贪婪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T06:12:16.540

告诉它只查找非分号。

```
[^;]+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:12:18.247

您正在寻找的**是非贪婪**匹配。

```
.+? 
```

after 你的`"?"`贪婪`+`量词将使它**尽可能少地**匹配，而不是尽可能多地匹配，默认情况下。

你的正则表达式是

```
'(command1|command2|command3).+?;' 
```

请参阅**[Python RE 文档](http://docs.python.org/library/re.html)**

# sql - 在单个查询中混合 HQL 和 SQL

> ID：13005819
> 
> 赞同：1
> 
> 时间：2012-10-22T06:10:33.827
> 
> 标签：sql, hql, collate

我有一个 HQL 查询，它使用跨多个表的数据来提取对象列表。部分查询需要区分大小写的比较，但数据库上的默认排序规则是不区分大小写的。

我知道我可以将查询转换为 SQL 我可以通过指定`collate utf8_bin`（我的目标是 MySql 数据库）来解决问题，但这需要更复杂的查询（从代码理解和维护的角度来看）所以我想避免如果可能，请使用 SQL 选项。

不幸的是，HQL 不包含`collate`令牌。

有没有办法在 HQL 查询中插入 SQL 片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:31:40.067

您可以尝试以下方法

@Column(name = "uuid", columnDefinition = "varchar(23) COLLATE utf8_bin")

参考：[https ://forum.hibernate.org/viewtopic.php?f=9&t=998806&view=next](https://forum.hibernate.org/viewtopic.php?f=9&t=998806&view=next)

# intellij-idea - intellij 9 + griffon 0.9.5 dsl 脚本执行错误？

> ID：13005826
> 
> 赞同：1
> 
> 时间：2012-10-22T06:11:10.143
> 
> 标签：intellij-idea, griffon

dsl脚本执行错误没有方法签名：griffon.annotateScope（）适用于参数类型：（java.util.linkedHashMap）值：[ctype.griffon.transform.EventPublisher]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:36:31.720

DSL 旨在与 Intellij IDEA 11 或更新版本一起使用。不支持旧版本的 Intellij。

# sql - 触发器在 SQL 导入导出向导上不起作用

> ID：13005829
> 
> 赞同：0
> 
> 时间：2012-10-22T06:11:39.963
> 
> 标签：sql

我在插入表时写了一个触发器。当我直接在 sql 查询窗口中执行插入语句时，触发器正在工作。但是当我尝试将数据从 Excel 导入 Sql 时，记录被插入但触发器不起作用。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:17:24.183

默认情况下，批量插入或导入禁用触发器，

我们可以通过指定 `FIRE_TRIGGERS` 批量导入操作来启用它。

更多[参考](http://msdn.microsoft.com/en-us/library/ms187640%28v=sql.105%29.aspx)

# android - 如何在android的后台打开GPS？

> ID：13005831
> 
> 赞同：0
> 
> 时间：2012-10-22T06:11:46.610
> 
> 标签：android

我在后台获取 GPS 值。为此我使用`Service`后台进程。如果 GPS 被禁用意味着，我使用了下面的代码。

```
Intent myIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS); 
```

当应用程序在前台运行时它正在工作，但它不在后台运行。我也使用`AlarmManager`and a `BroadcastReceiver`。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:17:28.147

服务不会运行很长时间。你必须使用[AlaramManager](http://developer.android.com/reference/android/app/AlarmManager.html)

对于长期运行过程。

请参阅下面的帖子

[android：使用 AlarmManager 运行后台任务](https://stackoverflow.com/questions/3859489/android-running-a-background-task-using-alarmmanager)

# php - 在csv php中下载文件

> ID：13005834
> 
> 赞同：0
> 
> 时间：2012-10-22T06:12:05.463
> 
> 标签：php, csv, download, moodle

我编写了一个函数来下载 php 中 csv 格式的文件，如下所示：-

```
function report_download_csv($fields, $data, $filename) {
        global $CFG;
require_once($CFG->dirroot.'/user/profile/lib.php');

    $filename = clean_filename($filename.'-'.date('Y-m-d').'.csv');
    header("Content-Type: application/download\n");
    header("Content-Disposition: attachment; filename=$filename");
    header("Expires: 0");
    header("Cache-Control: must-revalidate,post-check=0,pre-check=0");
    header("Pragma: public");

    $row = array(); 
        $date_field = array('registrationdate', 'expirydate', 'startdate', 'enddate');
        $totalrow = count($fields);
        $row[] = implode(',',$fields)."\n";

        foreach($data as $d){
            for($i=0;$i<$totalrow;$i++){
                    $row_d[] = $d->$fields[$i];
            }
            $row[] = implode(',',$row_d);
            $row_d = array();
        }
        echo implode($row, "\n");
    die;
} 
```

但是，当我调用该函数时，它只是在浏览器中打印结果。有什么我应该改变的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:18:12.890

试试这样。。

```
header('Content-Type: application/csv');
header('Pragma: no-cache'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:16:57.260

以下标题应强制下载

```
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false); // required for certain browsers 
header("Content-Type: application/force-download");
header("Content-Disposition: attachment; filename=\"".$filename."\";" );
header("Content-Transfer-Encoding: binary"); 
```

# c# - Windows 服务无法访问网络

> ID：13005839
> 
> 赞同：5
> 
> 时间：2012-10-22T06:12:18.233
> 
> 标签：c#, .net, windows-services, administration, windows-server

我安装了windows服务。它在我的特殊预定义帐户下运行。而且它无论如何都无法访问网络。如果我在此帐户下使用相同的代码运行我的控制台应用程序，它可以成功访问网络。现在我正在尝试运行此代码：

```
WebClient client = new WebClient();
string downloadString = client.DownloadString("http://www.google.com"); 
```

它在控制台应用程序中工作正常，但在 Windows 服务中不起作用。我认为我应该授予我的帐户一些特殊权限，以允许它从 Windows 服务访问 Internet。你能告诉我应该设置哪些权利吗？

# c# - 如何确定或判断一组类是否是“意大利面条代码”？

> ID：13005840
> 
> 赞同：3
> 
> 时间：2012-10-22T06:12:18.167
> 
> 标签：c#, oop, design-patterns, architecture

如何确定或判断一组类是否是“意大利面条代码”？

当我在 Visual Studio 中的 Architecture 菜单下生成依赖关系图时，我是否应该将我的代码视为意大利面条，并看到有很多弯曲的箭头指向整个地方？

我总是通过尝试减少类之间的依赖关系来避免意大利面条代码的问题。这样做时，是的，依赖关系图确实变得更整洁了。而且当我对某些部分进行更改时，因为类之间几乎没有依赖关系，所以我不必担心会弄乱其他类。

但是，通过这种方法，有时我似乎不得不重复一些代码。例如，我可以将以下对象存储在列表中：

```
class DataBlock {
   public int id;
   public string name;
   public SomeObject dataObj;

   public Object[] Data1 { get { return dataObj.RetrieveInfo(); } }

   public Object[] Data2 { get { return dataObj.SomeProperty; } }

   public bool DoCompare(obj) { ... }
} 
```

因此，有一个称为上述对象`DataList`类型的列表。`List<DataBlock>`

然后现在，假设我要发送一个事件，其中包含来自`DataBlock`. 我可以将整个`DataBlock`对象包含在`EventArgs`. 然后处理函数可以这样做：

```
void Handler(MyEventArgs evtArgs) {
   DataBlock data = evtArgs.Data;
   var firstData = data.Data1;
   data.Data2;
   firstData.DoCompare(data.Data2)
   data.name;  //etc, etc
} 
```

这很方便。但是，这也意味着具有此处理程序的类现在将依赖于该`DataBlock`对象。所以，我摆脱这种情况的方法之一是在我的内部`EventArgs`，我*重复*所有这些信息`DataBlock`，如下所示：

```
class MyEventArgs : EventArgs {

   public MyEventArgs(id, name, data1, data2) {
      ID = id;
      Name = name;
      Data1 = data1;
      Data2 = data2;
   }
   public int ID { get; private set; }
   public string name { get; private set; }
   public Object[] Data1 { get; private set; }
   public Object[] Data2  { get; private set; }
} 
```

`EventArgs`通过以这种方式安排 my ，无论是 my`EventArgs`还是任何有该事件的班级`Handler`都不会依赖`DataBlock`. 只有事件的触发者知道它，它会从它的构造函数`DataBlock`中提取数据`DataBlock`并放入它们。`MyEventArgs`但是，现在的问题是，`MyEventArgs`重复*内部*的每个 getter/setter `Datablock`。**而且，我也无法访问`DataBlock`!**

这只是我经常遇到的问题的一个小例子。在更严重的情况下，我发现自己重复了几个类的 getter/设置，只是因为我想减少依赖。

我面临的其他问题会在依赖关系图中显示很多箭头，例如，当我有一个名为`ISomeObject`. 因为`ISomeObject`是类中的一个流行对象，所以该接口被类的许多其他部分使用。最后，有大量的箭头指向`ISomeObject`. 这是否也意味着意大利面条代码？

当我想让我的代码井井有条时，我很难解释我面临的问题。但我希望上面的例子足以说明我想说的。

那么，对于这样的场景，最佳实践是什么？当 Visual Studio 中的依赖关系图显示很多杂乱的弯曲箭头指向各处时，我是否应该确定我的代码是意大利面条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:22:41.137

我建议阅读 NDepend WhiteBooks 和文档。

在此处查看*代码结构、设计、依赖项*部分： [http ://www.ndepend.com/Tips.aspx#Design](http://www.ndepend.com/Tips.aspx#Design)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:51:45.467

老实说，我相信 spaguetti 代码与依赖关系或更高级别的东西无关。

Spaguetti 代码是一种反模式，它包括创建没有顺序且完全不合理的高度耦合代码，这意味着作者 - 程序员 - 几乎不会为您解释代码流。

spaguetti 代码最重要的症状之一是它是不可维护的：*如果你修复了一个错误，它会产生一个或多个错误。当你修复这些错误时，你会得到更多的错误。*最后通过硬编码垃圾来修复代码。

同样，我怀疑*具有很多依赖关系的大型对象图*会是“意大利面条代码”。

# c# - 在 WebBrowser 控件中拦截 IE 上下文菜单单击

> ID：13005844
> 
> 赞同：0
> 
> 时间：2012-10-22T06:12:41.447
> 
> 标签：c#, winforms, internet-explorer, webbrowser-control

我正在使用 WinForms，我添加了一个 WebBrowser 控件，并且希望能够拦截 IE 浏览器的上下文菜单触发事件，因为浏览器控件是 IE 的一个实例。

我的意思是，我想拦截它自己的浏览器的右键单击菜单项单击，我对自己说，因为它是一个 IE 实例并且它在我的应用程序中，所以必须有办法做到这一点。

我试图查看浏览器控件的事件，但没有什么可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:28:22.030

这是取消 WebBrowser 上下文菜单的示例。这将帮助您继续前进：

```
// wb = WebBrowser control instance name
// attach to the DocumentCompleted event
wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);

void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // when the document loading is completed, attach to the document context showing event
    wb.Document.ContextMenuShowing += new HtmlElementEventHandler(Document_ContextMenuShowing);
}

void Document_ContextMenuShowing(object sender, HtmlElementEventArgs e)
{
    // cancel showing context menu
    e.ReturnValue = false;
    // take a look at the 'e' parameter for everything else, you can get various information out of it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:40:26.710

设置 webbrowser 控件的以下简单属性

```
wbBrowser.IsWebBrowserContextMenuEnabled = false; 
```

# spring - ACTIVEMQ - 订阅者在发布者之后启动时如何接收主题消息？

> ID：13005847
> 
> 赞同：4
> 
> 时间：2012-10-22T06:12:54.480
> 
> 标签：spring, jms, activemq, jmstemplate

在我的程序中，我有两个模块：- 通过主题进行通信的发布者和订阅者。

我知道为了通过订阅者接收消息，它应该在发布者之前启动。但是可能存在订阅者由于某种原因宕机需要重新启动的情况。有什么办法，如果我在发布者之后启动订阅者，那么它也应该能够接收消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:21:14.357

使用 spring DMLC 和持久订阅者添加代码示例。使用普通的 JMSTemplate 更难实现这一点（您标记了这个，所以我猜您正在使用 JMS 模板来接收？），因为您必须从模板中获取会话并自己创建持久消费者。如果您使用 DMLC 方法，这将自动为您处理。

```
<bean id="myDurableConsumer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
 <property name="connectionFactory" ref="myCf" />
 <property name="sessionTransacted" value="true" />
 <property name="subscriptionDurable" value="true"/>
 <property name="durableSubscriberName" value="myDurableNameThatIsUniqueForThisInstance" />
 <property name="destinationName" value="someTopic" />
 <property name="messageListener" ref="myListener" />
< /bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:27:48.910

如果您只对断开重新连接的场景感兴趣，我认为您正在寻找持久订阅者。

[http://activemq.apache.org/how-do-durable-queues-and-topics-work.html](http://activemq.apache.org/how-do-durable-queues-and-topics-work.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:13:20.363

通常，如果您想考虑订阅者离线并返回而不会丢失任何消息，您将使用 JMS 持久订阅。这允许您的订阅者在离线时接收它错过的任何消息。请注意，这里需要先订阅一次，然后才能开始收集离线消息。

除了标准的 JMS Durable 消费者模型之外，ActiveMQ 还提供了[追溯消费者](http://activemq.apache.org/retroactive-consumer.html)。另一种可能性是[虚拟目的地](http://activemq.apache.org/virtual-destinations.html)。

# plugins - 将外部库加载到 ExpressionEngine 插件中

> ID：13005852
> 
> 赞同：1
> 
> 时间：2012-10-22T06:13:25.050
> 
> 标签：plugins, expressionengine

我正在尝试将外部库加载到 ExpressionEngine 插件中，但得到：

*消息：未定义属性：Detector::$EE*

在插件本身中，我有：

```
public function __construct()
{
    $this->EE->load->library('detector');
    $this->EE =& get_instance();
} 
```

我的文件夹设置如下：

检测器
-libraries
--Detector.php
-pi.detector.php

我究竟做错了什么？

经过加载库错误后，我现在收到带有以下代码的“未定义变量”错误：

```
public function detector()
{
 return $ua->ua;
}

public function user_agent()
{
return $ua->ua;
} 
```

那就是如果我的模板中有 {exp:detector:user_agent} 。如果我 {exp:detector} 我没有输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T07:12:00.793

你应该像这样改变你的代码：

```
$this->EE =& get_instance();
$this->EE->load->add_package_path(PATH_THIRD.'/detector'); 
$this->EE->load->library('detector'); 
```

先初始化`$this->EE`变量，然后就可以加载库了。所以在这种情况下

```
$this->EE->detector->user_agent(); 
```

# php - 复选框和数据库更新

> ID：13005856
> 
> 赞同：0
> 
> 时间：2012-10-22T06:13:45.720
> 
> 标签：php, html, mysql, database

我有一个如下表格，允许用户选择不同的项圈类型。每个复选框都有一个领子 ID，将在提交表单时提交。

![领型](../Images/9378976c5b1000070dfbb469d6b261ac.png)

假设用户选择了第一个三个项圈。它看起来像这样。

![领型](../Images/9a4f7a12b71180f1da82d77d2a0b52c0.png)

然后我要做的是使用插入语句将这三个项圈添加到我的项圈表中。之后，如果用户需要，他可以取消选中项圈类型或添加新项。

假设用户未选中第二种类型，如下所示。

![领型](../Images/3c78dbc3744526eb9891414c7391d9e0.png)

现在必须从表中删除引用第二项领类型的特定行。下图显示了表结构。

![在此处输入图像描述](../Images/26cce75380910791dafe360bcb654162.png)

现在我的问题是如果用户进行了任何更改（选中新复选框或未选中任何）提交表单时如何插入或删除一行？我是否必须为每个复选框编写 SELECT 语句并查看该项圈 ID 是否存在？

帮我解决逻辑，因为我能够根据给定的逻辑自己构建代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:16:29.680

> 我是否必须为每个复选框编写 SELECT 语句并查看该项圈 ID 是否存在？

数据库可以告诉您该 ID 是否存在，数据库也是如此。

但是，您需要运行两个查询，一个用于删除，一个用于插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:21:58.363

我认为您是否可以保存特定用户的 id 或 product_id，而不是删除其先前的条目并使用该 ID 创建该用户的新行。或者使用 id 更新该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:25:11.983

我认为有两种解决方案：

1.  您必须从表中选择所有 id 并验证是否选中了复选框：

    ```
    $array = array();
    $sql = mysql_query("SELECT collor_id FROM my_table WHERE product_id='x'");
    while($row = mysql_fetch_array($sql)) {
        array_push($array, $row['collor_id']);
    }

    if(count($_POST['my_collors']) > 0) {
        foreach($_POST['my_collors'] as $value) {
            if(!in_array($value, $array)) {
                 // insert it into db
                 // unset the array value for this collor id
            } else {
             // unset the array value for this collor id
            }
        }
    }

    // foreach remained array value delete them from the db 
    ```

2.  您可以从表中删除*所选产品的条目，然后插入新值

# php - 无法渲染模板 zf2

> ID：13005860
> 
> 赞同：1
> 
> 时间：2012-10-22T06:13:50.597
> 
> 标签：php, zend-framework2, zend-route

我创建了名为“货币”的新模块，并在 module.config 中配置了路由。它工作正常。之后，我为货币汇率添加了名为 CrateController 的新控制器。还创建了表单、模型和视图文件。但它没有正确路由。

错误：

> 致命错误：未捕获的异常 'Zend\View\Exception\RuntimeException' 带有消息 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "currency/crate/index"; 解析器无法解析到文件....

任何检查这一点的线索都会有所帮助。

我的 module.config 文件如下。

```
return array(
'controllers' => array(
    'invokables' => array(
        'Currency\Controller\Currency' => 'Currency\Controller\CurrencyController',
        'Currency\Controller\Crate' => 'Currency\Controller\CrateController',
    ),
),

// The following section is new and should be added to your file
'router' => array(
    'routes' => array(
        'currency' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/currency[/:action][/:currency_id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'currency_id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Currency\Controller\Currency',
                    'action'     => 'index',
                ),
            ),
        ),
       'crate' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/crate[/:action][/:c_rate_id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'c_rate_id' => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Currency\Controller\Crate',
                    'action'     => 'index',
                ),
            ),
        ),           
    ),
), 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T07:06:10.933

检查两件事：

**第一**：模板文件是否存在？`./module/Currency/view/currency/crate/index.phtml`

**第二**：检查里面的以下条目`./Currency/config/module.config.php`

```
'view_manager' => array(
    'template_path_stack' => array(
        'currency' => __DIR__ . '/../view',
    )
), 
```

# ios6 - 在 iOS 6 的设备横向中将 UIViewController 旋转为纵向

> ID：13005862
> 
> 赞同：0
> 
> 时间：2012-10-22T06:13:54.127
> 
> 标签：ios6, modalviewcontroller, deprecated

我正在使用自定义摄像机。为了方便录制，我将相机设置为纵向，但看起来好像是横向。这对我有用，因为由于项目的性质，我希望视频的宽度很长。目前，我在使用 iOS 6 时遇到了挑战，让我的视图控制器旋转到纵向，当设备旋转到 LandscapeLeft 和 LandscapeRight 时，portraitUpsideDown。当设备旋转到横向时，iOS 6 中是否有告诉视图控制器旋转到纵向？以前我会用 shouldAutoRotateToOrientation 做到这一点

目前我正在玩弄这些方法

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientationsForWindow {
    return UIInterfaceOrientationMaskPortrait;
} 
```

我已经查看了很多关于 iOS6 中这些更改的堆栈溢出的其他文档，但还没有找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:52:21.270

We were able to get working. We did for Landscape but you can do it for Portrait by modifying the code bellow:

First in the interface (this is only partial b/c of company policies i can't show you everything):

```
@interface YourViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{
    UITableView *myTableView;
    CGAffineTransform _originalTransform;
    CGRect _originalBounds;
    CGPoint _originalCenter;
}

@property (nonatomic, retain) UITableView *myTableView;

@end 
```

Next here is the implementation:

```
@implementation YourViewController

@synthesize myTableView;

- (void)loadView {

    UIView *viewContainer = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];

    CGRect tableFrame;
    tableFrame.origin.x += 10;
    tableFrame.origin.y -= 15;
    tableFrame.size.height = 320;
    tableFrame.size.width = 460;

    // create and configure the table view
    myTableView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewStylePlain];

    myTableView.delegate = self;
    myTableView.dataSource = self;
    myTableView.autoresizesSubviews = YES;
    myTableView.scrollEnabled = YES;    
    myTableView.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;

    [viewContainer addSubview:myTableView];
    self.view = viewContainer;  
}

- (void)viewWillAppear:(BOOL)animated {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    _originalTransform = [[appDelegate navController].view transform];
    _originalBounds = [[appDelegate navController].view bounds];
    _originalCenter = [[appDelegate navController].view center];

    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(degreesToRadian(3.14/2));
    //landscapeTransform = CGAffineTransformTranslate (landscapeTransform, +80.0, +100.0);

    [[appDelegate navController].view setTransform:landscapeTransform];

    [appDelegate navController].view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [appDelegate navController].view.bounds  = CGRectMake(0.0, 0.0, 480.0, 320.0);
    //[appDelegate navController].view.center  = CGPointMake (240.0, 160.0);

    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeRight;
}

- (void) viewWillDisappear:(BOOL)animated {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [[appDelegate navController].view setTransform:_originalTransform];
    [[appDelegate navController].view setBounds:_originalBounds];
    [[appDelegate navController].view setCenter:_originalCenter];

    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationPortrait; 
} 
```

# spring - Spring Data JPA 选择具有使用 Pageable 能力的不同值

> ID：13005864
> 
> 赞同：4
> 
> 时间：2012-10-22T06:14:07.543
> 
> 标签：spring, hibernate, jakarta-ee, spring-data, spring-data-jpa

我在项目中使用 Spring Data JPA。我有下一个实体 Bean“TABLE”。我创建了自己的存储库

```
TableRepository extends JpaRepository<Table, Long>, JpaSpecificationExecutor<TABLE>. 
```

我还创建了规范来选择过滤的数据。我有 bean 与应选择的项目并将它们分组在一个*.in()*谓词列表中（类似于“ *SELECT * FROM WHERE ID in(...) AND VALUE in(...) AND VALUE2 in(.. .) ...* ")

```
public static Specification<Table> filteredListOfValues(final FilterRequestsParametersBean filterRequestsParametersBean) {
        return new Specification<Table>() {

            public Predicate toPredicate(Root<Table> root, CriteriaQuery<?> criteriaQuery, CriteriaBuilder criteriaBuilder) {
                List<Predicate> listOfPredicates = createListOfPredicates(root, filterRequestsParametersBean);
                return criteriaBuilder.and(listOfPredicates.toArray(new Predicate[listOfPredicates.size()]));
            }
        };
    } 
```

之后，我*findAll()*带有*TableRepository*和*Pageable*参数的项目。

```
this.getTableRepository().findAll(where(filteredListOfValues(filterRequestsParametersBean)), pageable); 
```

*表格*视图：

```
id, value, etc..
 1,   1,   ...
 2,   1,   ...
 3,   2,   ...
 4,   2,   ...
 5,   3,   ...
 6,   5,   ... 
```

和问题。如何使用 Pageable 选择与 TABLE 中的*字段**VALUE不同的所有值。*

 ** * *

当然我可以使用 HashMap，但我不会使用 Spring Data JPA 的 Pageable 功能。我需要排序和分页。

我还可以对一个字段值使用规范，例如：

```
 public static Specification<Long> filteredListOfValues(final FilterRequestsParametersBean filterRequestsParametersBean) {
            return new Specification<Long>() {

                public Predicate toPredicate(Root<Long> root, CriteriaQuery<?> criteriaQuery, CriteriaBuilder criteriaBuilder) {

....//somethind like that
criteriaQuery.select(root.<Long> get("value")).distinct(true);
....
List<Predicate> listOfPredicates = createListOfPredicates(root, filterRequestsParametersBean);
                    return criteriaBuilder.and(listOfPredicates.toArray(new Predicate[listOfPredicates.size()]));
                }
            };
        } 
```

但在这种情况下，来自存储库 TableRepository 的方法 findAll() 只能接受如下规范：`JpaSpecificationExecutor<Table>`，而不是`JpaSpecificationExecutor<Long>`

谢谢。*

# php - 在 .htaccess 文件 codeigniter 中添加库路径

> ID：13005866
> 
> 赞同：0
> 
> 时间：2012-10-22T06:14:28.293
> 
> 标签：php, codeigniter, mongodb

我正在使用 Codeigniter 和 MongoDB 开展项目。由于 MongoDB 没有便宜的托管服务，我正在使用[MongoLab](https://mongolab.com/)获得免费的 MongoDB 空间，并将项目托管在其他服务器上。MongoLab 通过端口提供到数据库的连接字符串，所以现在我正在从我的本地主机连接 MongoDB 和线程安全`.dll`文件，为此我进行了更改`php.ini`。

由于我托管在共享服务器上，当我联系客户支持时，他们说我们也可以通过`.htaccess`文件添加库。

我用谷歌搜索了很多，但我没有运气。

所以我的问题很简单，如何添加带有`.htaccess`文件的库，以便我将库中的库放在文件夹中并将其注册到`.htaccess`文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:18:46.280

您最好的选择是在您的 php.ini 文件中添加一行来引用您安装的扩展。

```
extension=mongo.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:13:39.347

您可以尝试在您的 htaccess 文件中添加如下内容：

```
<IfModule mod_php5.c>
    php_extension_dir <path_to_php_extensions>
    php_extension <extension_name>.so
</IfModule> 
```

# html - 从论坛中提取主题头和主题回复

> ID：13005872
> 
> 赞同：0
> 
> 时间：2012-10-22T06:14:50.327
> 
> 标签：html, extract, jsoup, forum

我只想从论坛中提取用户的意见和回复以及负责人的标题。在此代码中，当您提供 url 时，代码会返回所有内容。我只想要标题标签中定义的线程标题和 div 内容标签之间的用户回复。帮我怎么提取。解释如何在 txt 文件中打印它

```
package extract;

import java.io.*;

import org.jsoup.*;

import org.jsoup.nodes.*;

public class TestJsoup
{
   public void SimpleParse()  
   {        
        try  
        {

            Document doc = Jsoup.connect("url").get();

            doc.body().wrap("<div></div>");

            doc.body().wrap("<pre></pre>");
            String text = doc.text();
           // Converting nbsp entities

            text = text.replaceAll("\u00A0", " ");

            System.out.print(text);

         }   
         catch (IOException e) 
         {

            e.printStackTrace();

         }

    }

    public static void main(String args[])
    {

      TestJsoup tjs = new TestJsoup();

      tjs.SimpleParse();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:01:35.020

为什么将 body-Element 包装在 div 和 pre Tag 中？

**可以像这样选择标题元素：**

```
Document doc = Jsoup.connect("url").get();

Element titleElement = doc.select("title").first();
String titleText = titleElement.text();

// Or shorter ...

String titleText = doc.select("title").first().text(); 
```

**div 标签：**

```
// Document 'doc' as above

Elements divTags = doc.select("div");

for( Element element : divTags )
{
    // Do something there ... eg. print each element
    System.out.println(element);

    // Or get the Text of it
    String text = element.text();
} 
```

[这是关于整个Jsoup Selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)的概述，这将帮助您找到所需的任何类型的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:32:36.753

好吧，我使用了另一个代码，并从这个特定的标签中收集了数据。

元素内容 = doc.getElementsByTag("blockquote");

元素 k=doc.select("[postcontent restore]");

content.select("blockquote").remove();

content.select("br").remove();

content.select("div").remove();

content.select("a").remove();

content.select("b").remove();

# common-lisp - Slime-edit-definition 到顶级 let 表单中定义的函数？

> ID：13005873
> 
> 赞同：2
> 
> 时间：2012-10-22T06:15:00.800
> 
> 标签：common-lisp, slime

有什么方法可以跳转到顶级 let form 通过 slime-edit-definition 定义的函数？

例如下面，我想跳转到 (defin foo ...) 表单的头部，而不是顶级 (let ...) 表单的头部：

```
(let (var)
  (defun foo ()
    var))) 
```

# android - 从 Android 中动态创建的表行读取值时出错

> ID：13005876
> 
> 赞同：0
> 
> 时间：2012-10-22T06:15:24.423
> 
> 标签：android, tablerow

所以我有几个动态创建的tablerows。每个TableRow 都有几个Textviews。我有一个按钮，单击该按钮应该获取表中每个Tablerow 中第二个和第三个textviews 的所有值。我尝试使用下面的代码来做到这一点

```
 mSubmitOrders.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
            if(mTable.getChildCount()>1){
                for(int i = 0; i < mTable.getChildCount(); i++){

                    TableRow tr =  (TableRow)mTable.getChildAt(i);
                    TextView code = (TextView) tr.getChildAt(1);
                    TextView quantity = (TextView) tr.getChildAt(2);

                    String Scode = code.getText().toString();
                    Log.i("TAG", Scode);
                    String Squantity = quantity.getText().toString();
                    Log.i("TAG", Squantity);

            }   
            } 
```

但我得到以下错误（下面的Logcat）。需要协助

```
10-22 09:00:16.345: E/AndroidRuntime(4495): FATAL EXCEPTION: main
10-22 09:00:16.345: E/AndroidRuntime(4495): java.lang.ClassCastException:       android.widget.LinearLayout cannot be cast to android.widget.TextView
10-22 09:00:16.345: E/AndroidRuntime(4495):     at com.symetry.myitprovider.ui.actual$4.onClick(actual.java:173)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.view.View.performClick(View.java:3131)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.view.View$PerformClick.run(View.java:12035)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.os.Handler.handleCallback(Handler.java:587)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.os.Looper.loop(Looper.java:132)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at android.app.ActivityThread.main(ActivityThread.java:4123)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at java.lang.reflect.Method.invoke(Method.java:491)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-22 09:00:16.345: E/AndroidRuntime(4495):     at dalvik.system.NativeStart.main(Native Method) 
```

已解决：从@zackk 获得帮助后，我最终解决了这个问题：

```
 for(int i = 0; i < mTable.getChildCount(); i++){
                    TableRow tr = (TableRow) mTable.getChildAt(i);

                    LinearLayout l1 = (LinearLayout)tr.getChildAt(1);
                    LinearLayout l2 = (LinearLayout)tr.getChildAt(2);

                    TextView code = (TextView)l1.getChildAt(0);
                    sCode = code.getText().toString();
                    Log.v("Inserted---->", sCode);
                    codeA[i]=sCode;

                    TextView quantity = (TextView)l2.getChildAt(0);
                    sQuantity = quantity.getText().toString();
                    Log.v("Inserted--->", sQuantity);
                    quantityA[i]=sQuantity;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:22:10.767

在此之前，您必须标记行的各个视图，`setTag(position)`或者您可以使用任何唯一值作为参数。然后你可以通过引用获取视图内容 `getTag()`。

# javascript - 流星设置整体模板上下文

> ID：13005890
> 
> 赞同：8
> 
> 时间：2012-10-22T06:17:20.517
> 
> 标签：javascript, meteor

在流星中，我可以像这样设置各种模板助手：

```
Template.story.title = function () {
  return "title";
};
<template name="story">
  <h3>{{title}}</h3>
  <p>{{description}}</p>
</template> 
```

这很好，但是，如果我有很多变量，我不想单独设置它们，我想将上下文传递给主模板。

我怎么做？

```
Template.story.data = function () {
  return {title:"title", description:"desc"};
};
<template name="story">
  <h3>{{title}}</h3>
  <p>{{description}}</p>
</template> 
```

那是行不通的。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T07:20:11.933

您可以在调用模板时设置模板的上下文：

```
{{> story data}}

Template.outerTemplate.data = function() { 
  return {title:"title", description:"desc"};
} 
```

或者您可以使用`{{#with}}`动态设置模板上下文：

```
{{#with data}}
  {{title}}
{{/with}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T10:01:49.230

您绝对正确，但错过了以您定义的方式使用模板变量。正如`Template.story.data`定义为返回一个对象，您应该像使用对象一样使用它：

```
<template name="story">
  <h3>{{data.title}}</h3>
  <p>{{data.description}}</p>
</template> 
```

瞧。当然，每个模板变量可以容纳的不仅仅是一个字符串。

# java - XML 到 Bean 映射：XML 元素值到 Bean 设置器映射器

> ID：13005898
> 
> 赞同：3
> 
> 时间：2012-10-22T06:17:59.003
> 
> 标签：java, xml, javabeans, xmlmapper

Bean setter 映射器的 XML 元素值：

我有一个 XML 文件和一组 Bean。我想通过映射器在一组 Bean 中填充 XML 值。通常，当我们在 bean 中编写 XML 解析和填充值时，我们手动将 XML 元素值映射到 Bean setter。

我正在寻找一种工具，它提供 UI 以使用拖放将 XML 元素值映射到 Bean 设置器，并且该工具应提供用于 XML 到 Bean 映射的映射器。

请任何人指导我或分享您的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:05:00.247

[Eclipse Juno for Java EE Developers](http://eclipse.org/downloads/)包括[Dali 插件](http://www.eclipse.org/webtools/dali/)（Web Tools Project 的一部分），它为将 bean 映射到 XML 模式提供映射帮助。该映射不是拖放式的，但它会在您的映射与 XML 模式不匹配时显示验证消息，并为创建必要的 JAXB 映射提供代码帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:32:24.933

我之前做过一个关于读/写 XML 的基准测试。它是 StAX、JAXB + StAX、JAXB、Apache XML Beans。

我可以对您说，获胜者是 Apache XML Beans，并且与其他的不同。所以我不能告诉你一个 UI 来使用它，但是使用 Apache XML Beans 只需提供 XSD，你的类将在包（jar）或文件夹上创建。

我希望它会帮助你做出决定。

# android - iText 作为文本在 android 上从 PDF 中提取/读取

> ID：13005902
> 
> 赞同：2
> 
> 时间：2012-10-22T06:18:22.373
> 
> 标签：android, pdf, itext

我在使用 iText 时遇到问题。其他人说 iText 仅用于 PDF 创建？它无法读取或提取 PDF 中的文本。真的吗？

如果是真的，那么我可以选择从 PDF 文件中提取文本并将其保存在变量中或在 Android 设备中显示的其他选项是什么？

如果 iText 能够从 PDF 中提取文本，那么如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:50:37.260

iText 可以从 PDF 中提取文本。虽然它确实起源于创建新 PDF 和操作现有 PDF 的工具，但近年来它在提取文本方面也变得越来越好。这显然意味着您应该使用当前的 iText 版本 (5.3.x) 进行文本提取。

iText 的主要开发者 Bruno Lowagie 所著的“iText in Action, second edition”一书在第 15 章中解释了基本的 iText 文本提取，该章的示例可在 iText Sourceforge SVN 存储库中找到，参见。[第 15 章的示例](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15)。一个很好的起点是[ExtractPageContentSorted2](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentSorted2.java)，它提取整个页面的文本。

如果您有特殊要求，可以使用[ExtractPageContentSorted1](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentSorted1.java)作为起点，明确定义文本提取策略；根据您的要求，您将需要自己的策略。如果您只想要来自特定区域的文本，请查看[ExtractPageContentArea](http://svn.code.sf.net/p/itext/code/book/src/part4/chapter15/ExtractPageContentArea.java)。

要真正微调 iText 的文本提取功能，您应该查看 itext-question 邮件列表存档（例如[在 nabble.com 上](http://itext-general.2136553.n4.nabble.com/)），因为最近 iText 文本提取 API 已扩展为服务于其他用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-16T12:57:58.427

```
Use below code to extract text from pdf :

String pat = data.getData().getPath();
File f = new File(pat);
//f is file path of pdf file
read = new PdfReader(new FileInputStream(f));

parser = new PdfReaderContentParser(read);

strw = new StringWriter();

stretegy = parser.processContent(j, new SimpleTextExtractionStrategy());

strw.write(stretegy.getResultantText());

String da = strw.toString();

//set extracted text from pdf file 
//to Edit-text    
edt1.setText(da); 
```

# ftp-client - 每次使用新套接字的apache commons ftp？

> ID：13005903
> 
> 赞同：0
> 
> 时间：2012-10-22T06:18:37.240
> 
> 标签：ftp-client, apache-commons-net

Apache Commons FTPClient 每次都会创建调用*openDataConnection*，即对于每个命令它使用一个单独的套接字。

这意味着许多端口用于数据传输？因此，有时我会进入 SockeReadTimeOutException ，这是因为正在使用一些 Timed_Waiting 端口。

无法理解为什么不使用单个端口进行数据传输。这消耗的内存更少，对系统的压力也更小。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:30:40.313

如果这方面对您很重要，您可以搜索另一个库。如果您的系统允许安全文件传输 (SFTP)，请查看：[JSch](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/ChannelSftp.html)。

我没有检查代码，但与每个命令相比，它的工作方式可能不同，`FTPClient`并且可能不会为每个命令打开一个套接字。

# iphone - 相同的自动布局约束在纵向和横向中表现不同

> ID：13005906
> 
> 赞同：2
> 
> 时间：2012-10-22T06:18:48.413
> 
> 标签：iphone, autolayout

我正在研究 iOS 6.0 的新功能 Auto Layout，我创建了一个示例应用程序，它有一个视图控制器和两个 UIView 作为子视图。我提供了以下约束：

![第二视图的约束](../Images/68e1589c26896de0e527e44a85dd038c.png)

![第一视图的约束](../Images/c8c62f6ce483aa12524566a0ba7b8e58.png)

当我在横向模式下执行以下应用程序并将其旋转到纵向时，它可以正常工作，但是当我在纵向模式下执行它并旋转到横向时，它会引发异常：

```
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x748cae0 h=--- v=--- H:[UIWindow:0x716a060(768)]>",
    "<NSLayoutConstraint:0x716d980 V:[UIView:0x716d540]-(736)-|   (Names: '|':UIView:0x716d0c0 )>",
    "<NSLayoutConstraint:0x716d8c0 V:|-(20)-[UIView:0x716d540]   (Names: '|':UIView:0x716d0c0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x7176020 h=-&- v=-&- UIView:0x716d0c0.width == UIWindow:0x716a060.width - 20>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x716d980 V:[UIView:0x716d540]-(736)-|   (Names: '|':UIView:0x716d0c0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.
2012-10-22 11:37:37.297 AutoLayoutSample[679:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x748cae0 h=--- v=--- H:[UIWindow:0x716a060(768)]>",
    "<NSLayoutConstraint:0x716d880 V:[UIView:0x716d230]-(730)-|   (Names: '|':UIView:0x716d0c0 )>",
    "<NSLayoutConstraint:0x716d840 V:|-(20)-[UIView:0x716d230]   (Names: '|':UIView:0x716d0c0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x7176020 h=-&- v=-&- UIView:0x716d0c0.width == UIWindow:0x716a060.width - 20>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x716d880 V:[UIView:0x716d230]-(730)-|   (Names: '|':UIView:0x716d0c0 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

我的问题是为什么当我以纵向模式执行并旋转到横向时它会引发异常？为什么约束的行为不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:14:21.017

系统会自动将默认的调整大小蒙版转换为约束，然后与您的冲突。为您的两个子视图添加对 NSAutoresizingMaskLayoutConstraints 的调用`[view setTranslatesAutoresizingMaskIntoConstraints:NO]`将与异常一起消失。

# android - 在运行时将子菜单添加到操作栏上的菜单

> ID：13005910
> 
> 赞同：0
> 
> 时间：2012-10-22T06:19:10.423
> 
> 标签：android, android-actionbar, android-menu

在我的应用程序中，我有一个屏幕，它在操作栏上有一个菜单，点击它我会根据在后台运行的进程的状态显示我需要在运行时放置的子菜单。

例如，假设我在屏幕上，我的菜单是 MENU，它有三个子菜单

```
MENU---->  1\. SubMenu1
           2\. SubMenu2
           3\. SubMenu3 
```

如果在后台运行的进程 PROCESS 已完成，我想显示菜单 SubMenu1 和 Submenu2，否则我将只放置 SubMenu3，不包括 SubMenu1 和 SubMenu2。

我可以在`onCreateOptionsMenu(Menu menu)`方法中做出这个决定，但是如果用户在屏幕上并且过程完成，则应显示 SubMenu3 而不是先前显示的 SubMenus。

我相信这是可以做到的（因为 Play Store 应用程序在运行时添加了“我的应用程序”菜单）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:41:18.600

您可以`onCreateOptionsMenu(Menu)`根据当前状态在那里实现和创建选项菜单。

每当该状态发生变化时，您都可以调用`invalidateOptionsMenu()`以指示需要重新创建选项菜单。这将重新创建菜单并再次调用`onCreateOptionsMenu(Menu)`，如[http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29中所述](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)

# objective-c - 如何修改 UISwitchController 使其最终看起来像这样：

> ID：13005912
> 
> 赞同：1
> 
> 时间：2012-10-22T06:19:27.167
> 
> 标签：objective-c, uibutton, xcode4.5, uiswitch

基本上我想自定义背景和按钮。我希望按钮是方形的。像这样的东西。

我的设计师已经为我提供了这些图片：

![在此处输入图像描述](../Images/2a278b0a624e551b4ff71e838ed2b7fa.png) ![在此处输入图像描述](../Images/ba806382107632d886b84a990ae72c31.png)

我正在研究的一件事是只使用 UIButton。但是，如何使 UIButton 处于切换模式？我应该怎么做，如果单击按钮然后它变成“选中”

我想要的结果是这样的：

![在此处输入图像描述](../Images/640a62b657b51279c85f944f08a0429d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:06:45.150

此代码可能有助于您的查询，您必须修改它..

[https://github.com/domesticcatsoftware/DCRoundSwitch](https://github.com/domesticcatsoftware/DCRoundSwitch)

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:28:36.163

```
UIButton *switchButton = [[UIButton alloc] init];
[switchButton setBackgroundImage:offImage forState:UIControlStateNormal];
[switchButton setBackgroundImage:onImage forState:UIControlStateSelected]; 
```

当您希望按钮看起来“打开”时，只需执行以下操作：`switchButton.selected = YES;`在它被点击之后或您想要将其设置为该状态时。

# javascript - 使用 jquery 设置文本字段的值

> ID：13005913
> 
> 赞同：1
> 
> 时间：2012-10-22T06:19:28.867
> 
> 标签：javascript, jquery

我正在尝试创建一个包含员工月薪的简单 html 文件，并且必须计算每个薪水的应付税款！我使用“添加”按钮来添加更多员工文本字段，从而创建一个包含类似 div 的新 div 类！在工资文本字段的 onchange 事件中，我无法设置相应员工的税值！

不幸的是，我无法上传屏幕截图，所以我把所有代码都放在了让我的问题尽可能清楚的地方！

这是添加员工区域的jQuery代码：

```
$(document).ready(function(){

var counter = 2;

$("#add_emp").click(function () {

var newTextBoxDiv = $(document.createElement('div'))
     .attr("class", 'em_area' + counter);

newTextBoxDiv.after().html('<br><label>Employee '+counter+' </label> <input id=em_name name=em_name type=text required  /> <label>Position</label> <input id=em_post name=em_post type=text required  /> <label>Monthly Salary</label> <input id=em_sal name=em_sal size=10 type=text required  /> &nbsp &nbsp &nbsp <label>Salary Tax</label> <input id=em_taxds type=text size=10 required />  ' );

newTextBoxDiv.appendTo("#all_emps");

counter++;
 });

 $("#del_emp").click(function () {

counter--;

    $(".em_area" + counter).remove();

 });
 }); 
```

这是html代码：

```
<div id="all_emps">
    <div class="em_area">
        <label>Employee 1</label>
        <input type=text required  />
        <label>Position</label>
        <input type=text required  />
        <label>Monthly Salary</label>
        <input id=em_sal type=text required size=10 onchange="calculateTax(this.value);" />
        &nbsp &nbsp &nbsp 
        <label>Salary Tax</label>
        <input id=em_tax name=em_tax type=text required size=10 readonly />
        &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
        <a href="#" id="add_emp"><img src="add.jpg" width="30" height="30"></img></a>
        &nbsp &nbsp &nbsp &nbsp &nbsp
        <a href="#" id="del_emp"><img src="minus.jpg" width="30" height="30"></a>
    </div>  
</div> 
```

这是我遇到问题的税收计算代码：（？？？？？？）

```
function calculateTax(sal)
{
    int salary = parseInt(sal);
    if(salary < 5000)
    {
        document.getElementById("em_tax").value = '0' ;
    }
    else if(salary>5000 || salary=5000)
    {
        var due_tax ;
        due_tax= salary/100;
        due_tax=salary - due_tax;

        document.getElementById("????????").value = due_tax;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:31:46.927

我观察到的第一件事是您的 HTML 中有重复**的 Id**。确保 id 在页面上是**唯一**的。尝试给它们提供**类名**。

```
<input class=em_sal type=text required size=10 onchange="calculateTax(this.value);" />
 &nbsp &nbsp &nbsp 
<label>Salary Tax</label>
<input class=em_tax name=em_tax type=text required size=10 readonly /> 
```

**在 JQuery 中编写更改事件**

```
$('#all_emps').on('change' , '.em_sal', function() { // Fire the change event

    var salary = parseInt(this.value);
    var dueTax = 0;
    if(salary < 5000){  
        // Do Nothing
    }
    else if(salary >= 5000)
    {
        due_tax= salary/100;
        due_tax= salary - due_tax;
    }
    // This will get the corresponding tax input for the employee..
    $(this).closest('div').find('.em_tax').val(due_tax) ;
}); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/M22HG/3/)

# iphone - Iphone 6.0 模拟器视网膜显示 4.0 英寸顶部和底部的空白区域

> ID：13005914
> 
> 赞同：4
> 
> 时间：2012-10-22T06:19:32.927
> 
> 标签：iphone, cocoa-touch, layout, retina-display

我有一个带有苹果连接屏幕的应用程序。我在带有 4.0 英寸视网膜显示屏的 iPhone 模拟器 6.0 中运行它。问题是它在顶部和底部显示黑色布局。布局没有调整，顶部和底部都有可用的黑色空间。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:55:34.170

您需要设置 default-568h@2x.png 图像，因为 iphone5 屏幕是 4 英寸，我们可以将所有图像视为 3.5 英寸屏幕

请阅读此[coderwall](http://coderwall.com/p/7wgfqw) 以更清楚地了解图像分辨率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T14:55:28.447

在 Xcode 7 Beta 6 中，解决方案是，

在左侧选择您的项目>>在
“应用程序图标和启动图像”下的常规设置中在“启动屏幕文件”中选择 main.storyboard

[![在此处输入图像描述](../Images/421ff17d0cc6abe60b88aa20ddbdec1b.png)](https://i.stack.imgur.com/vvF2F.png)

这应该消除顶部和底部的黑屏。

# android - Android 裁剪视图组的一部分

> ID：13005915
> 
> 赞同：1
> 
> 时间：2012-10-22T06:19:35.717
> 
> 标签：android

我有一个视图组（布局），我想在其中隐藏（或）剪辑左侧的某些部分。剪辑大小可能在 100-150 dp 左右，如果我有一个视图，我可以通过 setVisibility 方法完全隐藏视图，我只需要隐藏我的视图组的特定部分。有人可以建议我如何实现这一目标。

# visual-c++ - SHGetSpecialFolderPath 错误

> ID：13005916
> 
> 赞同：0
> 
> 时间：2012-10-22T06:19:42.487
> 
> 标签：visual-c++

我想获取程序文件文件夹的位置，所以我正在使用

```
SHGetSpecialFolderPath(NULL,Path_variable,CSIDL_PROGRAM_FILES,FALSE) 
```

我在这里没有看到任何问题，但我收到了错误

> 错误 C2065：“CSIDL_PROGRAM_FILES”：未声明的标识符

我使用的是 VC++ 6.0，操作系统是 WIN 7。这里有什么问题？如果我使用 Visual Studio 2005 运行相同的代码，我不会收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:00:56.850

**这是您的问题的替代方案，您可以使用它**

尝试读取注册表项

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\ProgramFilesDir 
```

程序文件的路径位于此位置。

**编辑：**

```
CRegKey key;
CString value = "ProgramFilesDir";
ULONG len = 255;
CString buffer;
long nError = key.Open(HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion",KEY_READ);
if(nError == ERROR_SUCCESS)
{
}
key.QueryStringValue(value,buffer.GetBufferSetLength(len),&len); 
```

现在缓冲区将包含路径

有关更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/b2wz0ekh%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:59:02.310

您能否包括用于检索此文件夹的整个代码段？

我刚刚在 MFC 应用程序中使用 XP Sp3 上的 VS 6.0 SP3 对其进行了测试，它就像一个魅力。要在较早的系统上工作，您必须安装 IE 4 或更高版本。

**维基：**

您的代码将无法在 VS 6.0 中运行。CRegKey 的 QueryStringValue 成员不存在。

此外，我认为使用 SHGetSpecialFolderPath 应该可以。此外，注册表可以更改，但 SHGetSpecialFolderPath 调用的结果不会更改。

# jquery - 如何使用正则表达式将 css 类添加到特定的 li。它匹配文本并仅分配给包含匹配集的父 li

> ID：13005918
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:20:05.807
> 
> 标签：jquery

**我有两个 CSS 类**

```
文件
文件夹

```

在这里，我想要向
**li 添加一个文件类，该文件类包含指向文本文件的链接**
和指向其他所有 li 的文件夹类。

```
演示1
**最终项目.txt**
演示2
**半决赛项目.txt**

```

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:33:45.977

```
 $('a').each(function() {
     $(this).parent().addClass('folder')
 });
 $('a[href*=".txt"]').each(function() {
     $(this).parent().removeClass('folder').addClass('file');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:38:25.757

如果您在填充列表时知道什么是文件，那么我会在那时分配类。如果由于某种原因您不知道可以使用 ':contains' 或 *= 选择器。

```
 $('a[href*=".txt"]').parent().addClass('file');
  $('li').not('.file').addClass('folder'); // Add folder class to all list items without class file. 
```

# eclipse - Eclipse Juno 未在 Windows 7 64 位中启动

> ID：13005919
> 
> 赞同：1
> 
> 时间：2012-10-22T06:20:22.233
> 
> 标签：eclipse, eclipse-plugin

打开 Eclipse 时出现错误。我在窗口 7 64 位上使用 Eclipse Juno 64 位 Eclipse 的日志是

```
 !SESSION 2012-10-22 11:42:40.638 -----------------------------------------------
    eclipse.buildId=M20120914-1800
    java.version=1.7.0
    java.vendor=Oracle Corporation
    BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
    Command-line arguments:  -os win32 -ws win32 -arch x86_64

    !ENTRY org.eclipse.equinox.ds 4 0 2012-10-22 11:42:48.527
    !MESSAGE [SCR] Exception while activating instance org.eclipse.e4.ui.css.swt.internal.theme.ThemeEngineManager@7e3e5dbe of component org.eclipse.e4.ui.css.swt.theme  
    !STACK 0
    java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Display
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getDeclaredMethods(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:24:18.563

如果您使用 eclipse 64 位，您还需要 64 位 java 运行时（反之亦然）。我个人不会推荐它，因为 java 和 eclipse 在它们的 64 位版本中似乎都不稳定。也许它变得更好了，但我在使用 64 位一段时间后切换回 32 位。

# python - 如何从 TreelView 列表中获取数据

> ID：13005920
> 
> 赞同：1
> 
> 时间：2012-10-22T06:20:20.860
> 
> 标签：python, parsing, scrape, treelist

[http://www.vliz.be/vmdcdata/mangroves/aphia.php?p=browser&id=235056&expand=true#ct](http://www.vliz.be/vmdcdata/mangroves/aphia.php?p=browser&id=235056&expand=true#ct) （这就是我要抓取的信息）

**我想刮掉这些详细的分类树，以便我可以随意操纵它们。**

但是获取这个树数据有一些问题。

1.  我无法完全展开分类树。当一些扩展，一些折叠时，如指令所示。所以将整个页面保存为 html 文件不能解决我的问题。或者我可以多次重复该过程以获取单独的文件并将它们连接起来..但这似乎是一种丑陋的方式。

2.  我厌倦了点击，有这么多“加”号，我必须等待。

有没有办法使用**Python**解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:38:48.210

使用`Selenium`，这将通过单击“加号”展开树，并在完成后获取包含所有元素的整个 DOM：

```
from selenium import webdriver
import time

browser=webdriver.Chrome()
browser.get('http://www.vliz.be/vmdcdata/mangroves/aphia.php?p=browser&id=235301&expand=true#ct')

while True:
      try:
          elem=browser.find_elements_by_xpath('.//*[@src="http://www.marinespecies.org/images/aphia/pnode.gif" or @src="http://www.marinespecies.org/images/aphia/plastnode.gif"]')[1]
          elem.click()
          time.sleep(2)
      except:
          break

content=browser.page_source 
```

# cluster-analysis - 蛋白质-蛋白质相互作用网络数据集的基准数据集

> ID：13005922
> 
> 赞同：1
> 
> 时间：2012-10-22T06:20:28.223
> 
> 标签：cluster-analysis

我想将我的聚类算法专门应用于蛋白质-蛋白质相互作用（PPI）网络。为此，我需要一个带有参考的基准数据集，以便我可以验证我的结果。任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:28:01.940

我建议您阅读van Brohee 和 van Helden*对蛋白质-蛋白质相互作用网络的聚类算法的评估(* [http://www.ncbi.nlm.nih.gov/pubmed/17087821](http://www.ncbi.nlm.nih.gov/pubmed/17087821) )。我认为他们的基准数据是可用的，并且他们在避免比较聚类算法和/或黄金标准时存在的许多陷阱方面做得非常好。

# android - 相机方向不会改变 Android 2.3

> ID：13005923
> 
> 赞同：2
> 
> 时间：2012-10-22T06:20:29.163
> 
> 标签：android, android-camera

对于我的应用程序，我使用的是 android 原生相机并使用表面视图预览图像。就我而言，除了相机方向外，一切正常。当我通过在清单文件上设置 screenOrientation="landscape 打开相机时，我在横向模式下可以毫无问题地获得预览。但我需要以纵向模式拍摄图像，为此我更改了我的清单，如 android:screenOrientation="portrait"并更改我的代码，如 mCamera.setDisplayOrientation(90)、params.set("orientation"、"landscape")、params.set("rotation", 90)，但我仍然得到 90 度旋转图像。我的代码是

```
 public void setupCamera(int width, int height) {
    Log.i(TAG, "setupCamera");
    synchronized (this) {
        if (mCamera != null) {
            Camera.Parameters params = mCamera.getParameters();
            List<Camera.Size> sizes = params.getSupportedPreviewSizes();
            List<Camera.Size> imgsize=params.getSupportedPictureSizes();
            mFrameWidth = width;
            mFrameHeight = height;

           // mCamera.setDisplayOrientation(90);
            params.set("orientation", "landscape");
             params.set("rotation", 90);
            // selecting optimal camera preview size
            {
                int  minDiff = Integer.MAX_VALUE;
                for (Camera.Size size : sizes) {
                    if (Math.abs(size.height - height) < minDiff) {
                        mFrameWidth = size.width;
                        mFrameHeight = size.height;
                        minDiff = Math.abs(size.height - height);
                    }
                }
            }

            params.setPreviewSize(getFrameWidth(), getFrameHeight());

            List<String> FocusModes = params.getSupportedFocusModes();
            if (FocusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO))
            {
                params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_VIDEO);
            }            

            mCamera.setParameters(params);

            mCamera.startPreview();
        }
    }
} 
```

我正在使用 Micromax A 52 型号......请任何人帮忙......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:48:30.327

如果您的应用程序在 v2.2 或更高版本上运行，您可以使用`camera.setDisplayOrientation(90)`.

为他人：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO)
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

//After opening camera - call via reflection
Method rotateMethod = android.hardware.Camera.class.getMethod("setDisplayOrientation", int.class);
rotateMethod.invoke(mCamera, 90); 
```

有关更多详细信息，请参阅此[链接](https://stackoverflow.com/questions/5504605/camera-is-wrong-unless-keyboard-is-open/5504651#5504651)和[此](https://stackoverflow.com/questions/10259299/force-a-camera-to-always-open-in-portrait-mode-in-android)
希望这会有所帮助

# asp.net - 仅水平滚动的 RadGrid

> ID：13005924
> 
> 赞同：0
> 
> 时间：2012-10-22T06:20:32.860
> 
> 标签：asp.net, telerik-grid

我正在使用带有分页 10、AllowScroll="true"、宽度和没有高度的 RadGrid。这给出了我需要的，即只有水平滚动而没有垂直滚动的网格。但是现在的问题是，如果网格中只有一行，它会显示 9 行的空白。我的要求是，它的高度必须包装到可用的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T20:53:14.557

或者，如果您不想担心高度计算，请执行此操作！

```
// radgrid scroll horizontal only

<ClientSettings>                    
    <Scrolling AllowScroll="true" />
    <ClientEvents OnGridCreated="GridCreated" />
</ClientSettings> 
```

//在页面下面添加javascript函数

```
function GridCreated(sender, args) {
                 $('.rgDataDiv').removeAttr('style');
               $('.rgDataDiv').attr('style', 'overflow-x: scroll;');
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T01:14:31.457

```
<script type="text/javascript">
        function GridCreated(sender, args) {
        var scrollArea = sender.GridDataDiv;
        var dataHeight = sender.get_masterTableView().get_element().clientHeight; if (dataHeight < 350) {
            scrollArea.style.height = dataHeight + 17 + "px";
        }
    }
</script> 
```

然后在您的 radgrid 的客户端设置区域

```
<ClientSettings>
  <ClientEvents OnGridCreated="GridCreated" />
</ClientSettings> 
```

# javascript - 通过 Javascript SDK 将照片发布到群组

> ID：13005925
> 
> 赞同：0
> 
> 时间：2012-10-22T06:20:32.517
> 
> 标签：javascript, facebook, photo, facebook-group

```
params['access_token'] = accessToken;
params['message'] = messageWillSend;
params['link'] = 'http://www.webdoanhnghiep.biz';
params['url'] = "imageURL";
params['name'] = 'Post To Group';
params['upload file'] = true;

FB.api('/302826253125607/photos', 'post', params, function(response) {
    ...
}); 
```

错误：#URL# 是一个内部 URL，但这是一个外部请求。

我可以发布到用户照片，页面照片。但是我怎样才能发布到集体照片？

# java - 如何迭代多个 JSON 响应？

> ID：13005926
> 
> 赞同：0
> 
> 时间：2012-10-22T06:20:40.127
> 
> 标签：java, php, android, json

我想从 PHP 向我的 Android 设备返回多个响应。在 PHP 中，我有类似的东西：

```
while ($row = mysql_fetch_array($data)) {
    $response["post"] = strip_tags($row["post_text"]);
    $response["date"] = date('D M d, Y', $row["post_time"]);
    echo json_encode($response);
} 
```

在 Logcat 我得到：

> {"tag":"midnightAnnouncements","success":1,"error":0,"post":"这是一个测试公告！","date":"Sun Oct 21, 2012"}{"tag" :"midnightAnnouncements","success":1,"error":0,"post":"这是另一个 ","date":"Sun Oct 21, 2012"}n

这是两行的结果。我想遍历 JSON 对象并获取两个“post”的字符串。如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:22:33.840

尝试这个 -

```
HttpResponse response = httpclient.execute(httppost);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
String json = reader.readLine();
JSONArray array = new JSONArray(json);
String post;
for (int i = 0; i < array.length(); i++) {
    JSONObject row = array.getJSONObject(i);
    post = row.getString('post');
} 
```

正如 nneonneo 指出的那样，您来自服务器的响应格式不正确。您应该首先将所有内容包装在二维数组中，然后回显 json_encoded 版本。

```
$i=0;
while ($row = mysql_fetch_array($data)) {
    $response[$i]["post"] = strip_tags($row["post_text"]);
    $response[$i]["date"] = date('D M d, Y', $row["post_time"]);
    $i++;
}
echo json_encode($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:23:10.780

您可以将输出包装在 JSON 数组中：

```
$output = array();

while ($row = mysql_fetch_array($data)) {
    $response["post"] = strip_tags($row["post_text"]);
    $response["date"] = date('D M d, Y', $row["post_time"]);

    $output[] = $response;
}
echo json_encode($output); 
```

# .htaccess - 重写以始终在域中使用 www（即使在子页面上）

> ID：13005931
> 
> 赞同：0
> 
> 时间：2012-10-22T06:21:16.897
> 
> 标签：.htaccess, ubuntu, amazon-ec2

我已将以下内容添加到我的 .htaccess 以正确地将任何访问者从[http://domain.com](http://domain.com)重定向到[http://www.domain.com](http://www.domain.com) ...但我仍然无法让它与子页面一起使用.. .ie [http://domain.com/subpage](http://domain.com/subpage)尚未重定向到[http://www.domain.com/subpage](http://www.domain.com/subpage)。

这是我现在的 htaccess 中的内容：

```
<Files wp-config.php>
order allow,deny
deny from all
</Files>

<Files .htaccess>
order allow,deny
deny from all
</Files>

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{HTTP_HOST} !^www
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [L,R]

</IfModule> 
```

所以问题是我还需要在我的 htaccess 中添加或更新什么才能使其正常工作？

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:30:22.280

在您完成路由到*之后*发生重定向`index.php`，它需要在执行任何路由规则之前发生。尝试交换它们：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [L,R]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

（还添加了`[NC]`标志，因此在主机名匹配中不检查大小写）

# android - MonkeyRunner 和对话框

> ID：13005937
> 
> 赞同：0
> 
> 时间：2012-10-22T06:22:08.940
> 
> 标签：android, monkeyrunner

我正在学习 MonkeyRunner 工具。我有一个日期和时间选择器，想将值传递给它。

我尝试使用**device.Type()**。但这不起作用。

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T11:04:08.243

尝试直接发送 KeyEvents。[您可以在此处](http://developer.android.com/reference/android/view/KeyEvent.html)找到 KeyEvent 列表

例如`device.press('KEYCODE_1', MonkeyDevice.DOWN_AND_UP)`

# android - 如何在Android中制作三角形、矩形、多边形？

> ID：13005944
> 
> 赞同：1
> 
> 时间：2012-10-22T06:22:35.923
> 
> 标签：android, shapes

如果我选择**三角形**、**矩形**、**多边形**、**曲线**等形状，那么它必须能够绘制特定的选定形状。像 Paint（这是 Microsoft 提供的用于创建形状和草图的应用程序）。在 Android 中，我必须选择形状并且应该能够像自由手绘图一样进行绘制，但它完全应该以代码方式完成。

相同：我必须从给定的选项`draw`中直接选择**三角形**，或者可以从头开始任何基础`draw`的**三角形。**`height`

我怎么能在 Android 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:28:28.723

您可以使用 OpenGL ES

打开[这个](http://developer.android.com/training/graphics/opengl/index.html)链接

希望它会有用

# actionscript-3 - as3 filp 垂直和水平位图

> ID：13005947
> 
> 赞同：1
> 
> 时间：2012-10-22T06:22:44.683
> 
> 标签：actionscript-3

只是一个快速的我想垂直和水平翻转图像。

我下面的代码只是在垂直地做我有什么不对吗？

```
var matrix:Matrix = new Matrix();
matrix.scale(1,-1);
matrix.translate(0,bitmapData.height);

var flipHorizontalMatrix:Matrix = new Matrix();
flipHorizontalMatrix.scale(-1,1);
flipHorizontalMatrix.translate(bitmapData.width,0);

bitmapData.draw(loaderInfo.loader, matrix);

var image:Bitmap = new Bitmap(bitmapData);
image.width = 1024;
image.height = 702;
Bitmap(image).smoothing = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:28:10.580

为什么不尝试更简单的方法：

```
// Reverse the X and Y scale, flipping the image along both axis.
image.scaleX = image.scaleY = -1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T00:20:33.730

如果您想使用 Matrix，以下代码可以使用。刚刚测试:)

```
var matrix:Matrix = new Matrix();
matrix.scale(1,-1);
matrix.scale(-1,1);
matrix.translate(0,bitmapData.height);
matrix.translate(bitmapData.width,0);

bitmapData.draw(loaderInfo.loader, matrix);

var image:Bitmap = new Bitmap(bitmapData);
image.width = 1024;
image.height = 702;
Bitmap(image).smoothing = true; 
```

# django - 没有 Django/Tastypie 的 CRUD 操作

> ID：13005951
> 
> 赞同：0
> 
> 时间：2012-10-22T06:23:14.700
> 
> 标签：django, web-services, rest, tastypie

我是 Tastypie 的新手，您可以如此快速地实现 CRUD 操作，这真是太棒了。但我想实现其他类型的 Web 服务，其中返回值不是模型。例如，如果我有一个像这样的简单模型

```
class User(models.Model):
    name = models.CharField(max_length=20)
    age = models.PositiveSmallIntegerField() 
```

并想通过/api/v1/user/avg_age获取所有用户的平均年龄，我该怎么做？也许它与 Django URL 相关的东西比 Tastypie 更重要，但我现在迷路了。所以，问题是我应该在哪里/如何定义我的自定义 REST Web 服务？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:58:48.470

您可以将方法添加到模型本身或将其放在[服务层](https://stackoverflow.com/questions/12578908/separation-of-business-logic-and-data-access-in-django/12579490#12579490)中。[这样做之后，您可以通过脱水](http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-data-preparation)循环轻松地将价值添加到资源中。

另一个允许对值进行过滤的选项是实现一个保存该数据的模型，例如 UserStatistics 模型。然后，您可以添加外键关系或创建独立资源。

因为数据不太可能发生很大变化，而且这些计算成本更高，所以我鼓励您为这样的模型创建一个 cronjob 或任务，只定期执行数据库写入

# c++ - 如何优化 C++ 对象 I/O 操作的性能？

> ID：13005956
> 
> 赞同：3
> 
> 时间：2012-10-22T06:23:58.873
> 
> 标签：c++, map, vector, io

我有一个对象定义为：

`std::unordered_map<std::string, std::vector<int>> large_obj;`

它可以存储非常大量的数据（包含许多行）并且效果很好。但是，我想备份`large_obj`到一个文件中，过一段时间，我会再次将它从文件加载到另一个对象。

什么是读取/写入此对象的最优化方法，而不是在预定义结构中写入文件中的每一行？

请记住：

*   多次调用 read() 比一次调用更昂贵
*   二进制文件比文本文件快。

哪些可以节省对象 I/O 的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:30:55.073

您可以尝试[Boost::serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)。但请记住，这个库的向后兼容性很差。序列化后，您可以将所有存档数据写入文件。

序列化的本机方式是使用流运算符。这就是`boost::serilization`大多数内部的工作方式。您可以重载您的类成员`<<`和`>>`运算符以写入和读取文本格式。但最好使用优雅稳定的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:13:27.907

我并不真正关心`read()`and的开销`write()`- 只需使用缓冲流和可以读取和写入的数据格式，而无需在数据流中来回跳过。

您正在写出的序列化流应该与您的数据表示足够接近，这样您就可以通过简单的复制来接管大块数据，但仍然足够抽象以允许从旧版本的数据格式或具有不同内部表示的机器上重建.

我通常定义一个标头，其中包括一个幻数、一个数据格式版本和一组捕获机器特定部分的值。对于你的情况，那将是

```
struct header {
    char magic[4];
    uint32_t endianness;           // 0x01020304
    uint32_t version;              // incremented when format changes
    // paranoia
    uint8_t char_bit;              // std::numeric_limits<char>::digits
    // sizeofs for all types format is dependent on
    uint8_t sizeof_int;            // sizeof(int)
}; 
```

读回数据时，您将标头中的值与您期望的值进行比较——如果出现不匹配的情况，您可以添加处理此问题的反序列化代码。

对于行，我会使用类似的编码

```
uint16  string_length;
char    string_data[];        // string_length bytes, padding if odd
uint16  vector_length;
int     vector_data[];        // vector_length ints 
```

这可以有效地保存和恢复。当您的需求发生变化时，只需增加版本号、定义新格式并调整解析器代码以创建新的内存表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:10:30.203

也许，您可以尝试文档数据库。数据库引擎将部分处理性能。[以MongoDB](http://www.mongodb.org/)为例。

不可能有**最优化的**方法。您必须考虑权衡并衡量性能。Boost.Serialization 是一个不错的选择，但您必须有一套明确的要求，并且至少对最常见的用例进行一些性能测量。

# mysql - 尝试设计一个在线学生练习数据库

> ID：13005958
> 
> 赞同：0
> 
> 时间：2012-10-22T06:24:09.647
> 
> 标签：mysql, database, database-design

我对 MySQL 和数据库结构还很陌生，我想知道是否有人可以帮助设计这个数据库的最佳方法。该应用程序本质上是一个在线练习册。它将有练习供学生完成，并将结果存储在数据库中。

家长将能够查看他们孩子的答案，而教师可以查看他们整个班级的结果。

我有 3 种不同类型的用户`Teachers`，`Parents`和`Students`。每个学生都链接到一个家长，每个学生都链接到一个班级。一位教师与多个班级相关联。

我目前的用户结构可以在这里看到；

![在此处输入图像描述](../Images/db54f532f4308b4909e87cc69c73b45b.png)

我应该创建一个用户表并有一个`UserType`字段吗？如果是这样，我该如何将学生与班级和家长联系起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:46:23.213

我为此创建了一个模式：-

```
DROP TABLE IF EXISTS `class`;

CREATE TABLE `class` (
  `class_id` int(11) NOT NULL AUTO_INCREMENT,
  `class_name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`class_id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

/*Data for the table `class` */

insert  into `class`(`class_id`,`class_name`) values (1,'A'),(2,'B'),(3,'C');

/*Table structure for table `info` */

DROP TABLE IF EXISTS `info`;

CREATE TABLE `info` (
  `info_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `parent_id` int(11) DEFAULT NULL,
  `class_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`info_id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

/*Data for the table `info` */

insert  into `info`(`info_id`,`user_id`,`parent_id`,`class_id`) values (1,3,2,1);

/*Table structure for table `user` */

DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(255) DEFAULT NULL,
  `users_types_id` int(11) DEFAULT NULL,
  `class_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=latin1;

/*Data for the table `user` */

insert  into `user`(`user_id`,`user_name`,`users_types_id`,`class_id`) values (1,'TeacherA',1,1),(2,'Parent',2,0),(3,'StudentA',3,1),(4,'TeacherB',1,2),(5,'TeacherC',1,3);

DROP TABLE IF EXISTS `users_types`;

CREATE TABLE `users_types` (
  `users_types_id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`users_types_id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

/*Data for the table `users_types` */

insert  into `users_types`(`users_types_id`,`type`) values (1,'Teacher'),(2,'Parent'),(3,'Student'); 
```

[sqlfiddle在这里](http://sqlfiddle.com/#!2/f6e09/1)

同样在插入之前检查信息表中用户和父级的记录是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:32:43.010

如果您从另一个角度看待您的应用程序，事情会容易得多。首先是用户实体，它提供了所有的授权功能，如果用户必须有不同的功能——你最好创建不同类型的用户：

```
Users:
id (int)
user_type_id   int
username       varchar
password       varchar
email          varchar

User_types:
id             int
name           varchar 
```

如果你使用 InnoDB 引擎，你可以为引用完整性创建一个外键 Users-User_types。

# html - 后备缓存清单不起作用

> ID：13005959
> 
> 赞同：2
> 
> 时间：2012-10-22T06:24:17.720
> 
> 标签：html, caching, manifest, offline, fallback

我找不到像我这样的另一个问题，所以这里是：

我有这个缓存清单文件：

```
CACHE MANIFEST

CACHE: 
./index.html
./offlinetest.js
./offline.html
./cache.manifest
./cache.manifest.php
./online.html

# Hash: 800d285afdd44dae60eb95bf479a94bf

NETWORK:
./index.html
./online.html

FALLBACK:
./index.html ./offline.html
./online.html ./offline.html 
```

当我关闭 wifi 开关并且尝试访问 online.html 时，此文件将被提供而不是`offline.html`！为什么？我正在使用铬。

另一个问题是 Firefox，当我尝试这个时，我有： `0 items in offline cache`

有人可以解释一下吗，我在搜索的所有地方都没有看到这样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:51:02.677

你有`./online.html`下的`CACHE:`部分。删除它，您的 Web 应用程序应该会检索到 offline.html。断开连接时获得 online.html 的原因是因为您正在缓存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:40:04.720

我自己也在为此苦苦挣扎，解决方案：

1.  你必须先清除缓存
2.  重新加载您的页面
3.  再次重新加载（听起来很愚蠢，我知道），然后将使用文件中的新版本，并再次缓存。

然后保持这个语法：

```
FALLBACK:
//static.html will be served if main.py is inaccessible
/main.py /static.html
//offline.jpg will be served in place of all images in images/large/
images/large/ images/offline.jpg
// offline.html will be served in place of all other .html files
*.html /offline.html 
```

一些可以帮助你的更多信息：

FALLBACK：如果资源不可访问，则指定后备页面的可选部分。第一个 URI 是资源，第二个是回退。**两个 URI 必须是相对的，并且与清单文件来自同一来源。**可以使用通配符。

# android - FragmentTransaction 动画滑入顶部

> ID：13005961
> 
> 赞同：78
> 
> 时间：2012-10-22T06:24:21.173
> 
> 标签：android, android-fragments, android-animation

我正在尝试使用 FragmentTransaction.setCustomAnimations 实现以下效果。

1.  片段 A 正在显示
2.  用 Fragment B 替换 Fragment A。在更换过程中，Fragment A 应保持可见。片段 B 应该从右侧滑入。片段 B 应该滑入片段 A 的顶部。

在动画设置中获取幻灯片没有问题。我的问题是我无法弄清楚如何在动画幻灯片运行时使片段 A 停留在原处并位于片段 B 下。无论我做什么，似乎片段 A 都在顶部。

我怎样才能做到这一点？

这是 FragmentTransaction 代码：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.setCustomAnimations(R.anim.slide_in_right, R.anim.nothing, R.anim.nothing,
    R.anim.slide_out_right);
ft.replace(R.id.fragment_content, fragment, name);
ft.addToBackStack(name);
ft.commit(); 
```

如您所见，我为“out”动画定义了一个动画 R.anim.nothing，因为我实际上不希望 Fragment A 做任何事情，而只是在事务期间保持原位。

以下是动画资源：

slide_in_right.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime"
    android:fromXDelta="100%p"
    android:toXDelta="0"
    android:zAdjustment="top" /> 
```

什么都没有.xml

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime"
    android:fromAlpha="1.0"
    android:toAlpha="1.0"
    android:zAdjustment="bottom" /> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-11-19T23:25:13.847

# 更新（2020 年 6 月 16 日）

从片段库开始`1.2.0`，解决此问题的推荐方法是使用`FragmentContainerView`with `FragmentTransaction.setCustomAnimations()`。

根据[文档](https://developer.android.com/reference/androidx/fragment/app/FragmentContainerView)：

> 对于 FragmentContainerView，使用退出动画的片段在所有其他片段之前绘制。这可确保退出的 Fragment 不会出现在视图顶部。

解决此问题的步骤是：

1.  将片段库更新到 1.2.0 或更高版本`androidx.fragment:fragment:1.2.0`；
2.  用;替换您的 xml 片段容器（`<fragment>`、、`<FrameLayout>`或 else）`<androidx.fragment.app.FragmentContainerView>`
3.  用于`FragmentTransaction.setCustomAnimations()`为您的片段过渡设置动画。

# 上一个答案（2015 年 11 月 19 日）

从 Lollipop 开始，您可以增加输入片段的 de translationZ。它将出现在现有的上方。

例如：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    ViewCompat.setTranslationZ(getView(), 100.f);
} 
```

如果您只想在动画期间修改 translationZ 值，您应该执行以下操作：

```
@Override
public Animation onCreateAnimation(int transit, final boolean enter, int nextAnim) {
    Animation nextAnimation = AnimationUtils.loadAnimation(getContext(), nextAnim);
    nextAnimation.setAnimationListener(new Animation.AnimationListener() {

        private float mOldTranslationZ;

        @Override
        public void onAnimationStart(Animation animation) {
            if (getView() != null && enter) {
                mOldTranslationZ = ViewCompat.getTranslationZ(getView());
                ViewCompat.setTranslationZ(getView(), 100.f);
            }
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            if (getView() != null && enter) {
                ViewCompat.setTranslationZ(getView(), mOldTranslationZ);
            }
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }
    });
    return nextAnimation;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-13T11:53:03.843

我不知道你是否还需要答案，但我最近也需要这样做，我找到了一种方法来做你想做的事。

我做了这样的事情：

```
FragmentManager fm = getFragmentManager();
FragmentTransaction ft = fm.beginTransaction();

MyFragment next = getMyFragment();

ft.add(R.id.MyLayout,next);
ft.setCustomAnimations(R.anim.slide_in_right,0);
ft.show(next);
ft.commit(); 
```

我在 FrameLayout 中显示我的片段。

它工作得很好，但旧的 Fragment 仍然在我的视图中，我让 android 像他想要的那样管理它，因为如果我放：

```
ft.remove(myolderFrag); 
```

它在动画期间不显示。

slide_in_right.xml

```
 <?xml version="1.0" encoding="utf-8"?> 
<set xmlns:android="http://schemas.android.com/apk/res/android" >
<translate android:duration="150" android:fromXDelta="100%p" 
android:interpolator="@android:anim/linear_interpolator"
android:toXDelta="0" />
 </set> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-11T05:18:55.270

我找到了一个适合我的解决方案。我最终使用了带有 FragmentStatePagerAdapter 的 ViewPager。ViewPager 提供滑动行为，而 FragmentStatePagerAdapter 在片段中交换。实现让一个页面在传入页面“下方”可见的效果的最后一个技巧是使用 PageTransformer。PageTransformer 覆盖 ViewPager 在页面之间的默认转换。这是一个示例 PageTransformer，它通过在左侧页面上的平移和少量缩放来实现效果。

```
public class ScalePageTransformer implements PageTransformer {
    private static final float SCALE_FACTOR = 0.95f;

    private final ViewPager mViewPager;

    public ScalePageTransformer(ViewPager viewPager) {
            this.mViewPager = viewPager;
    }

    @SuppressLint("NewApi")
    @Override
    public void transformPage(View page, float position) {
        if (position <= 0) {
            // apply zoom effect and offset translation only for pages to
            // the left
            final float transformValue = Math.abs(Math.abs(position) - 1) * (1.0f - SCALE_FACTOR) + SCALE_FACTOR;
            int pageWidth = mViewPager.getWidth();
            final float translateValue = position * -pageWidth;
            page.setScaleX(transformValue);
            page.setScaleY(transformValue);
            if (translateValue > -pageWidth) {
                page.setTranslationX(translateValue);
            } else {
                page.setTranslationX(0);
            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-23T02:34:58.677

经过更多的实验（因此这是我的第二个答案），问题似乎是当我们想要另一个明确表示“原地不动”的动画时，R.anim.nothing 意味着“消失”。解决方案是定义一个真正的“什么都不做”动画，如下所示：

制作文件`no_animation.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/linear_interpolator"
        android:fromXScale="1.0"
        android:toXScale="1.0"
        android:fromYScale="1.0"
        android:toYScale="1.0"
        android:duration="200"
        />
    <alpha xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromAlpha="1.0"
        android:toAlpha="0.0"
        android:duration="200"
        android:startOffset="200"
        />
</set> 
```

现在只需照常做：

```
getActivity().getSupportFragmentManager().beginTransaction()
                .setCustomAnimations(R.anim.slide_in_right, R.anim.no_animation)
                .replace(R.id.container, inFrag, FRAGMENT_TAG)
                .addToBackStack("Some text")
                .commit(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-06T21:12:06.057

我找到了一个替代解决方案（未经大量测试），我发现它比迄今为止的建议更优雅：

```
final IncomingFragment newFrag = new IncomingFragment();
newFrag.setEnterAnimationListener(new Animation.AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    clearSelection();
                    inFrag.clearEnterAnimationListener();

                    getFragmentManager().beginTransaction().remove(OutgoingFragment.this).commit();
                }

                @Override
                public void onAnimationRepeat(Animation animation) {

                }
            });

 getActivity().getSupportFragmentManager().beginTransaction()
                    .setCustomAnimations(R.anim.slide_in_from_right, 0)
                    .add(R.id.container, inFrag)
                    .addToBackStack(null)
                    .commit(); 
```

这是从 OutgoingFragment 类的内部类中调用的。

正在插入一个新片段，动画完成，然后删除旧片段。

在某些应用程序中可能存在一些内存问题，但它比无限期地保留两个片段要好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-21T09:03:36.290

基于附加我的实现的[jfrite答案](https://stackoverflow.com/users/1983882/jfrite)

```
import android.content.res.Resources;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.v4.app.Fragment;
import android.support.v4.view.ViewCompat;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.util.Log;

public final class AnimationHelper {
    private AnimationHelper() {

    }

    private static String TAG = AnimationHelper.class.getSimpleName();
    private static final float ELEVATION_WHILE_ENTER_ANIMATION_IS_RUNNING = 100f;
    private static final int RESTORE_ANIMATION_DELAY = 16;

    /**
     * When replacing fragments with animations, by default the new fragment is placed below the replaced fragment. This
     * method returns an animation object that sets high elevation at the beginning of the animation and resets the
     * elevation when the animation completes. The {@link Animation} object that is returned is not the actual object
     * that is used for the animating the fragment but the callbacks are called at the appropriate time. The method
     * {@link Fragment#onCreateAnimation(int, boolean, int)} by default returns null, therefor, this method can be used
     * as the return value for {@link Fragment#onCreateAnimation(int, boolean, int)} method although it can return
     * null.
     * @param enter True if fragment is 'entering'.
     * @param nextAnim Animation resource id that is about to play.
     * @param fragment The animated fragment.
     * @return If nextAnim is a valid resource id and 'enter' is true, returns an {@link Animation} object with the
     * described above behavior, otherwise returns null.
     */
    @Nullable
    public static Animation increaseElevationWhileAnimating(boolean enter, int nextAnim,
                                                            @NonNull Fragment fragment) {
        if (!enter || nextAnim == 0) {
            return null;
        }
        Animation nextAnimation;
        try {
            nextAnimation = AnimationUtils.loadAnimation(fragment.getContext(), nextAnim);
        } catch (Resources.NotFoundException e) {
            Log.e(TAG, "Can't find animation resource", e);
            return null;
        }
        nextAnimation.setAnimationListener(new Animation.AnimationListener() {
            private float oldTranslationZ;

            @Override
            public void onAnimationStart(Animation animation) {
                if (fragment.getView() != null && !fragment.isDetached()) {
                    oldTranslationZ = ViewCompat.getTranslationZ(fragment.getView());
                    ViewCompat.setTranslationZ(fragment.getView(), ELEVATION_WHILE_ENTER_ANIMATION_IS_RUNNING);
                }
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                if (fragment.getView() != null && !fragment.isDetached()) {
                    fragment.getView().postDelayed(() -> {
                        // Decreasing the elevation at the ned can cause some flickering because of timing issues,
                        // Meaning that the replaced fragment did not complete yet the animation. Resting the animation
                        // with a minor delay solves the problem.
                        if (!fragment.isDetached()) {
                            ViewCompat.setTranslationZ(fragment.getView(), oldTranslationZ);
                        }
                    }, RESTORE_ANIMATION_DELAY);
                }
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
            }
        });
        return nextAnimation;
    }
} 
```

这是我如何使用片段中的助手。

```
@Override
    public Animation onCreateAnimation(int transit, final boolean enter, int nextAnim) {
        return AnimationHelper.increaseElevationWhileAnimating(enter, nextAnim, this);
    } 
```

这是我如何用动画开始片段

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.setCustomAnimations(R.anim.slide_in, R.anim.hold, R.anim.hold, R.anim.slide_out); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-05T15:38:05.487

相当多的步骤，但能够通过混合过渡和动画来做到这一点

```
 supportFragmentManager
         .beginTransaction()
         .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN
         .setCustomAnimations(R.anim.nothing, R.anim.scale_out)
         .replace(R.id.fragment_container, fragment)
         .commit() 
```

什么都没有.xml

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@integer/transition_animation_time" /> 
```

向外扩展 - 在退出时为旧片段设置动画

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="500"
    android:fromXScale="100%"
    android:fromYScale="100%"
    android:toXScale="90%"
    android:toYScale="90%"
    android:pivotY="50%"
    android:pivotX="50%"/> 
```

片段.kotlin

```
 override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        val inflater = TransitionInflater.from(requireContext())
        enterTransition = inflater.inflateTransition(R.transition.slide)
    } 
```

res/transition/slide.xml - 在途中为新片段制作动画

```
<?xml version="1.0" encoding="utf-8"?>
<slide xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="500"
    android:slideEdge="bottom" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-16T16:27:45.573

*我有同样的问题，所有的解决方案看起来都过分了。当您在动画完成后应该移除片段时，隐藏片段会导致错误，但您不知道它何时发生。*

* * *

我找到了最简单的解决方案：只需**在事务中****设置先前的片段否定`translationZ`**：

```
childFragmentManager.fragments.lastOrNull()?.let { it.view?.translationZ = -1f } 
```

整个交易看起来像：

```
childFragmentManager.commit {
    setCustomAnimations(...)
    childFragmentManager.fragments.lastOrNull()?.let { it.view?.elevation = -1f }
    replace(..., ...)
    addToBackStack(...)
} 
```

**就这样。**

它不应该影响您视图的任何行为。一切都应该照常进行。后面的动画也可以正常工作（使用正确的顺序）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-17T12:55:11.673

```
FragmentTransaction ft = ((AppCompatActivity) context).getSupportFragmentManager().beginTransaction();
                ft.setCustomAnimations(0, R.anim.slide_out_to_right);
            if (!fragment.isAdded())
            {
                ft.add(R.id.fragmentContainerFrameMyOrders, fragment);
                ft.show(fragment);
            }
            else
                ft.replace(R.id.fragmentContainerFrameMyOrders, fragment);
            ft.commit(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-12T23:28:53.947

# 向布局添加立面。

我为从 30sp 底部滑入的片段添加了一个高度，它起作用了。

我尝试了这里建议的许多解决方案。这是结合了所有想法+**添加海拔**的完整代码和输出。

## 输出：

**无海拔：**

[![在此处输入图像描述](../Images/0d60561226fefb17987f32fa594b51ce.png)](https://i.stack.imgur.com/WZHBM.gif)

**有海拔：**

[![在此处输入图像描述](../Images/ec082321f049fed318b79426e829f094.png)](https://i.stack.imgur.com/dFdxx.gif)

### 完整代码：

向根添加高程

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:elevation="30sp">
     ----

     ----
 </RelativeLayout> 
```

**如何从底部滑入片段？**

```
getSupportFragmentManager()
            .beginTransaction()
            .setCustomAnimations(R.anim.slide_in_bottom, R.anim.do_nothing, R.anim.do_nothing, R.anim.slide_out_bottom)
            .replace(R.id.fragmentContainer, currentFragment, "TAG")
            .addToBackStack("TAG")
            .commit(); 
```

**按下后退按钮时如何进行反向操作？**

```
getSupportFragmentManager()
            .popBackStack(); 
```

> 由于我们已经在 `setCustomAnimations()`方法上定义了进入和退出动画。调用`popBackStack();`负责反向动画。

**R.anim.slide_in_bottom**

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <translate
       android:duration="500"
       android:fromYDelta="100%"
       android:toYDelta="0%">
    </translate>
</set> 
```

**R.anim.slide_out_bottom**

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <translate
        android:duration="500"
        android:fromYDelta="0%"
        android:toYDelta="100%">
    </translate>
</set> 
```

**R.anim.do_nothing**

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
        android:interpolator="@android:anim/linear_interpolator"
        android:fromXScale="1.0"
        android:toXScale="1.0"
        android:fromYScale="1.0"
        android:toYScale="1.0"
        android:duration="500"/>
     <alpha xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromAlpha="1.0"
        android:toAlpha="1.0"
        android:duration="500"
        android:startOffset="500" />
</set> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-12T20:15:43.497

这是我目前对任何感兴趣的人的解决方法。

在添加新的函数中`Fragment`：

```
final Fragment toRemove = fragmentManager.findFragmentById(containerID);
if (toRemove != null) {
    new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                fragmentManager.beginTransaction().hide(toRemove).commit();
            }
        }, 
        getResources().getInteger(android.R.integer.config_mediumAnimTime) + 100);
        // Use whatever duration you chose for your animation for this handler
        // I added an extra 100 ms because the first transaction wasn't always 
        // fast enough
}
fragmentManager.beginTransaction()
    .setCustomAnimations(enter, 0, 0, popExit).add(containerID, fragmentToAdd)
    .addToBackStack(tag).commit(); 
```

并在`onCreate`：

```
final FragmentManager fragmentManager = getSupportFragmentManager();
fragmentManager.addOnBackStackChangedListener(
        new FragmentManager.OnBackStackChangedListener() {
            @Override
            public void onBackStackChanged() {
                Fragment current = fragmentManager.findFragmentById(containerID);
                if (current != null && current.isHidden()) {
                    fragmentManager.beginTransaction().show(current).commit();
                }
            }
        }); 
```

我更喜欢某种 AnimationListener 而不是上面的 Handler，但我没有看到任何方法可以使用它来检测与片段无关的事务动画的结束，例如`onCreateAnimation()`. 任何有适当听众的建议/编辑将不胜感激。

我会指出`Fragment`我以这种方式添加的 s 是轻量级的，因此将它们与它们顶部的片段一起放在片段容器中对我来说不是问题。

如果要删除可以放入`fragmentManager.beginTransaction().remove(toRemove).commitAllowingStateLoss();`' `Handler`s`Runnable`和的片段`OnBackStackChangedListener`：

```
// Use back stack entry tag to get the fragment
Fragment current = getCurrentFragment(); 
if (current != null && !current.isAdded()) {
    fragmentManager.beginTransaction()
        .add(containerId, current, current.getTag())
        .commitNowAllowingStateLoss();
} 
```

请注意，上述解决方案不适用于容器中的第一个片段（因为它不在后台堆栈中），因此您必须有另一种方法来恢复该片段，也许以某种方式保存对第一个片段的引用.. . 但是如果你不使用回栈并且总是手动替换碎片，这不是问题。或者，您可以将所有片段添加到后台堆栈（包括第一个）并覆盖`onBackPressed`以确保您的活动退出，而不是在后台堆栈中只剩下一个片段时显示空白屏幕。

**编辑：** 我发现了以下可能取代`FragmentTransaction.remove()`及`FragmentTransaction.add()`以上的功能：

`FragmentTransaction`. [分离（）](https://developer.android.com/reference/android/app/FragmentTransaction.html#detach(android.app.Fragment))：

> 从 UI 中分离给定的片段。这与它被放入回栈时的状态相同：片段从 UI 中移除，但其状态仍由片段管理器主动管理。当进入这种状态时，它的视图层次结构被破坏。

`FragmentTransaction`. [附加（）](https://developer.android.com/reference/android/app/FragmentTransaction.html#attach(android.app.Fragment))：

> 在之前使用 detach(Fragment) 将片段与 UI 分离后重新附加片段。这会导致其视图层次结构被重新创建、附加到 UI 并显示。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-05T08:45:54.800

使用片段管理器时的回答

```
 getSupportFragmentManager()
            .beginTransaction()
            .setCustomAnimations(
                R.anim.slide_in_from_left,
                R.anim.slide_free_animation,
                R.anim.slide_free_animation,
                R.anim.slide_out_to_left
            )
            .replace(R.id.fragmentContainer, currentFragment, "TAG")
            .addToBackStack("TAG")
            .commit() 
```

使用导航时回答：

```
 <action
            android:id="@+id/action_firstFragment_to_secondFragment"
            app:destination="@id/secondFragment"
            app:enterAnim="@anim/slide_in_from_left"
            app:exitAnim="@anim/slide_free_animation"
            app:popEnterAnim="@anim/slide_free_animation"
            app:popExitAnim="@anim/slide_out_to_left" /> 
```

slide_in_from_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">

    <translate
        android:duration="500"
        android:fromXDelta="-100%p"
        android:fromYDelta="0%"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:toXDelta="0%"
        android:toYDelta="0%" />

</set> 
```

slide_out_to_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">

    <translate
        android:duration="500"
        android:fromXDelta="0%"
        android:fromYDelta="0%"
        android:interpolator="@android:anim/decelerate_interpolator"
        android:toXDelta="-100%p"
        android:toYDelta="0%" />

</set> 
```

slide_free_animation.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">

    <alpha
        android:duration="300"
        android:fromAlpha="1.0"
        android:startOffset="200"
        android:toAlpha="0.0" />

</set> 
```

# java - 工人既是生产者又是消费者的线程池

> ID：13005964
> 
> 赞同：2
> 
> 时间：2012-10-22T06:24:39.490
> 
> 标签：java, multithreading, concurrency, producer-consumer, java.util.concurrent

我有一个无限的作业队列，可以异步处理。每个作业的处理可能会或可能不会触发为此队列创建新作业。

我想要一个由多个工作线程组成的池来从这个队列中获取项目并并行处理它们，直到队列都为空***并且***所有工作线程都空闲等待队列上的新作业（因为忙碌的工作人员最终可能会添加新的作业到队列中）。

是否有使用`java.util.concurrent`实现的方法可以用来解决这个特定问题，其中工人也是生产者？尚不清楚 API 是否以直接的方式支持这种情况。

特别是，我希望能够检测到终止条件，即当没有更多作业可用（空作业队列）并且不会再产生作业（所有空闲工作线程）时。

**编辑**

Nam San 下面的回答似乎是最优雅的方法，它基本上归结为跟踪提交的作业数量与已完成作业的数量，并使用这些数字相等的情况作为终止条件。

我已经实现了一个完整的例子，使用`java.util.concurrent`扩展`ThreadPoolExecutor`来实现这一点，加上专门的作业队列来接受`Comparable`以特定方式排序的实例。

*   [TestExecutor.java](http://pastebin.com/gWR46BHS)：一个自定义执行器，它扩展`ThreadPoolExecutor`但具有执行可能创建新作业的作业的附加方法，以及一个等待所有提交作业完成的新 await 方法。
*   [WorkUnit.java](http://pastebin.com/RkVmS31n)：一个可比较的可运行作业的示例，它可以创建新的作业以提交给`TestExecutor`.
*   [Test.java](http://pastebin.com/Q0RJQJTV)：包含一个 main 方法来运行一个使用`WorkUnit`带有`TestExecutor`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:40:58.860

我认为消费者也是生产者并不重要，因为在生产者-消费者模式中，它们是完全独立的关注点。

您的消费者已经拥有对队列的引用 - 只需让他们像生产者一样添加到队列中。

您可以使用 a`AtomicInteger`或类似的方法来记录当前有多少工作人员处于活动状态，或者`CountDownLatch`如果您想等到他们全部静止，请使用 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:27:26.550

对于这类问题，我已经看到了一些不同的解决方案。

一种是仍然`poll`在主线程中用作阻塞调用，就像在您的代码中一样，但是在可能永远等待的情况下将来自工作人员的“虚拟”对象排入队列以唤醒主线程。例如，任何在没有向队列添加更多项目的情况下完成的工作人员应该提交一个虚拟作业，主线程识别并忽略它（它仅用于唤醒主线程）。通过跟踪活动作业的数量，您可以创建更少的虚拟对象，从而减少“虚假唤醒”，从而减少“虚假唤醒”——只有最后一个作业需要添加虚拟对象。

另一种方法是等待不同的对象。例如，任何老人`Object`都可以。`wait()`在这个对象上有主线程。`Object.notify()`然后作业使用它们完成的任何时间唤醒这个线程。同样，通过计数，您可以减少所需通知的数量。

最优雅的解决方案可能是使用`Semaphore`. 基本上，信号量的值将是“飞行作业+队列项目”数量的负数。当一个作业从队列中取出一个项目时，这个值不会改变（因为飞行中的作业增加一个，而队列项目减少一个），但是每个作业都应该为他们添加的每个作业调用 reducePermits()，并且在他们完成之前进行一次 release() 调用。

然后主线程可以`acquire()`在工作期间阻塞。当它醒来时，一切都完成了（因为在飞行中+排队的工作为零）。您将启动另一个线程来实际执行调用并添加作业（目前由主线程完成），并且当主线程返回`poll`时可以关闭该工作人员。但是，让现有的工人自己而不是完成`acquire`可能更简单。`poll()`那么你根本不需要这个传递函数。

事实上，有了`Semaphore`解决方案，为什么不完全放弃队列，而使用内置在执行器中的队列呢？也就是说，工人是否通过 ? 提交了新工作`executor.submit(newJob(nextJob))`？无论如何，执行器线程在内部都在从阻塞队列中提取工作，因此在具有显式外部队列方面存在一些重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T09:08:58.030

下面的代码演示了如何使用包装类`Executor`来计算提交的作业数并将其与已完成的作业数进行比较以实现您想要的结果。请注意，您的任务必须调用`execute`包装类的方法，并且永远不要`Executor`直接调用底层。如果需要，扩展下面的包装器以包装 an 的“提交”方法应该是微不足道的`ExecutorService`。

```
public class ExampleExecutor {

    private final Executor executor;
    private long submitCount = 0;
    private long doneCount = 0;

    public ExampleExecutor(Executor executor) {
        this.executor = executor;
    }

    public synchronized void execute(Collection<Runnable> commands) {
        for (Runnable command : commands) {
            execute(command);
        }
    }

    public synchronized void execute(final Runnable command) {
        submitCount ++;

        executor.execute(new Runnable() {
            public void run() {
                try {
                    command.run();
                } finally {
                    synchronized (ExampleExecutor.this) {
                        doneCount++;
                        if (doneCount == submitCount) {
                            ExampleExecutor.this.notifyAll();
                        }
                    }
                }
            }
        });
    }

    public synchronized void awaitCompletion() throws InterruptedException {
        while (doneCount != submitCount) {
            this.wait();
        }
    }
} 
```

**编辑**：在下面添加了测试用例来演示如何使用上述代码

```
public class Test {

    static class Task implements Runnable {
        private final String id;
        private final long repetitions;
        private final long respawnSize;
        private final ExampleExecutor executor;

        public Task(String id, long repetitions, long respawnSize, ExampleExecutor executor) {
            this.id = id;
            this.repetitions = repetitions;
            this.respawnSize = respawnSize;
            this.executor = executor;
        }

        public void run() {
            for (int i = 0; i < respawnSize; i ++) {
                // Spawning new sub tasks
                executor.execute(new Task(id + "-" + i, repetitions/2, 0, null));
            }

            double sum = 0;
            for (int i = 0; i < repetitions; i++) {
                sum += Math.sin(i);
            }

            System.err.println(id + " completed at " + System.currentTimeMillis() + " with sum=" + sum);
        }
    }

    public static void main(String argv[]) throws InterruptedException {
        ExampleExecutor executor = new ExampleExecutor(Executors.newFixedThreadPool(2));
        executor.execute(new Task("0", 2000000, 100, executor));

        System.err.println("main thread awaits completion");
        executor.awaitCompletion();
        System.err.println("main thread recieved completion event");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T04:18:11.427

请参阅我在[Directory Scanner](https://stackoverflow.com/questions/12870606/directory-scanner-in-java/12879583#12879583)上的帖子它可以满足大多数要求。但它没有用 Futures 和 Callable 实现。得想一想。每个任务都没有被赋予重要性。没有结果并且产生异常。它只是一种扫描文件的并行和递归方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T22:25:14.237

几年前，我不得不做一些类似的事情，但有界的堆栈。我将分享一个可能的解决方案：

```
idle_thread = MAX_THREAD;
do
{
    if(queue != empty) // If thread have work to do
    {
       idle_threads--;  // Count this threads was a worker   
       flag = true;
       while(queue != empty)  // Until queue have work
       {
          synchronized(this)
          {
            // task =  take_out_of_queue;
          }
        }
   }
   if(flag) // This flag must to be local to each thread, it is use to insure 
   {        // that threads will count this only one time for each time 
          // the queue got empty
         synchronized(this)
         {
            if(flag == false)
            idle_threads++;  // Count thread as a idle one
            flag = false;
         }
     }
     if(idle_threads == MAX_THREADS) out = true; // When all threads are idle stop the work loop
} while(!out) 
```

# java - 下面的随机数生成是否没有偏差？

> ID：13005966
> 
> 赞同：-1
> 
> 时间：2012-10-22T06:24:49.163
> 
> 标签：java, security, random

下面的代码会产生一个有或没有偏差的随机数吗？

```
 int numberToGenerate = 20;
    int rangeUpperLimit = 30;
    SecureRandom random = SecureRandom.getInstance("SHA1PRNG");

    for (int i = 0; i < numberToGenerate; i++) {
        int randomInt = random.nextInt(rangeUpperLimit); 
        // Do something with it.
    } 
```

这些值用于`chars`从`String`长度为 30 的 a 中选择，因此范围为 0-29。选择`char`值的代码被省略，因为它与问题无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T06:30:21.283

它当然*意味着*均匀分布（因此没有偏差）。从[文档中](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)：

> 返回一个伪随机、均匀分布的 int 值，介于 0（包括）和指定值（不包括）之间，取自该随机数生成器的序列。

这假设生成器序列是好的，但我认为这是一个合理的假设，特别是考虑到以下文档[`SecureRandom`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)：

> 加密强随机数至少符合 FIPS 140-2，加密模块的安全要求，第 4.9.1 节中指定的统计随机数生成器测试。

如果您担心偏差，检查任何特定运行将相当容易 - 生成（例如）三千万个值，跟踪您获得每个数字的次数，并查看每个存储桶与一百万的接近程度.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T06:29:43.557

[根据文档](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)中的定义，结果*应该*足够统一，但是在您的示例中，您**没有使用种子**来初始化 PNRG，因此它可能存在偏差。

# jquery - jquery从上到下滚动

> ID：13005967
> 
> 赞同：0
> 
> 时间：2012-10-22T06:25:01.453
> 
> 标签：jquery, html, css

我需要从上到下滚动包含内容的页面，并且导航具有“显示顶部”锚点。当我单击“显示顶部”锚点时，页面（之前未显示）将从顶部滚动到包含内容的主屏幕区域。

```
.topPage{
    width:1280px; 
    color:#000; 
    float:left; 
    position:relative;
    background:#E6E6E8;
}

$('a.scrollToBottom').click(function(){
  $('html, body').stop().animate({
scrollTop: $("#topPage").offset().top
  }, 2000);
// event.preventDefault();
}); 
```

但是页面（topPage）从下到上滚动。我需要从上到下滚动才能显示在主屏幕区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:34:30.920

您的问题是`div`放置在负`top`偏移量处。您不能垂直滚动超过 0，因此一旦您到达顶部，滚动就会停止，您将无法看到所有`div`.

如果您想要*`div`*动画，请考虑使用

```
$('.topcontent').stop().animate({
    top: 0
}, 2000); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:58:27.137

为了自动滚动动画到页面底部（或者，足以让整个页面在视口内），我使用这个：

```
 $(window.opera ? 'html' : 'body,html,document').animate({ 
    scrollTop: $('body').height() - $(window).height()) 
  }, 1000); 
```

# iphone - 可以在不使用 UITextField 和 UITextView iphone 应用程序的情况下显示键盘吗？

> ID：13005969
> 
> 赞同：38
> 
> 时间：2012-10-22T06:25:10.410
> 
> 标签：iphone, ios, uitextfield, uitextview, uikeyboard

我正在使用基于 iPhone 消息传递的应用程序。

`inputAccessoryView`我想在不使用`UITextView`and的情况下在键盘中显示带键盘的键盘`UITextField`。有可能做到这一点吗？请任何人帮助我。

提前致谢。期待您的帮助。谢谢。

**编辑：**

因为我不希望`UITextField`/`UITextView`和控件位于`UITextView`/中`UITextField`。我要`inputAccessoryView`在键盘上添加的是`UITextView`. 当用户触摸`UITextview`键盘`inputView`时，实际过程将继续。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-06T20:16:58.320

对于任何想要在没有`UITextField`/`UITextView`的情况下显示键盘的人来说，可以轻松地扩展一些视图，这需要通过实现`UIKeyInput`协议和`canBecomeFirstResponder`方法来输入文本。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-21T21:08:11.487

请参阅此处的文档：

[简单文本输入](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html#//apple_ref/doc/uid/TP40009542-CH4-SW8)

您需要做的就是让您的视图实现`UIKeyInput`并`[inputView becomeFirstResponder]`在视图被触摸时调用。您的视图还需要实现`canBecomeFirstResponder`并返回 YES。

[执行此操作的 iOS 文档中的示例代码。](https://developer.apple.com/library/ios/samplecode/SimpleTextInput/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010633)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-15T12:49:28.927

制作一个视图、标签或任何符合 UIKeyInput 的东西。在这种情况下，一个 UIView

***子类一个 UIView：***

```
import UIKit

class KeyInputView: UIView {
   var _inputView: UIView?

   override var canBecomeFirstResponder: Bool { return true }
   override var canResignFirstResponder: Bool { return true }

   override var inputView: UIView? {
       set { _inputView = newValue }
       get { return _inputView }
   }
}

// MARK: - UIKeyInput
//Modify if need more functionality
extension KeyInputView: UIKeyInput {
    var hasText: Bool { return false }
    func insertText(_ text: String) {}
    func deleteBackward() {}
} 
```

***设置您的视图，在这种情况下使用选择器（在 viewDidLoad 或任何地方）***

```
let languangePicker = UIPickerView()
languangePicker.dataSource = self
languangePicker.delegate = self
keyInputView.inputView = languangePicker 
```

***以显示：***

```
keyInputView.becomeFirstResponder() 
```

***隐藏：***

```
keyInputView.resignFirstResponder() 
```

设置选择器数据，来自数据源（编译器强制你这样做）

从委托中获取数据选择器事件

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T06:34:47.693

您可以尝试这些其他 SO 帖子的答案：

*   [使用没有 UITextView 或 UITextField 的系统键盘](https://stackoverflow.com/questions/4933389/use-the-system-keyboard-without-a-uitextview-or-uitextfield)

*   [没有textview的iphone键盘](https://stackoverflow.com/questions/1472258/iphone-keyboard-without-textview)

你也可以试试这个：

```
UIKeyboard *keyboard = [[[UIKeyboard alloc] initWithFrame: CGRectMake(0.0f,          contentRect.size.height - 216.0f, contentRect.size.width, 216.0f)] autorelease];
[keyboard setReturnKeyEnabled:NO];
[keyboard setTapDelegate:editingTextView];
[inputView addSubview:keyboard]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-22T10:22:53.963

### 在 xcode 模拟器中：

有时键盘不会显示，因为软件键盘已关闭。转到硬件-> 键盘-> 切换键盘

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-20T14:36:20.113

我制作了一个小实用程序文件，可以在按钮触摸上调用带有文本字段的键盘！

[https://github.com/havocked/TZKeyboardPop](https://github.com/havocked/TZKeyboardPop)

# .net - 使用带有响应式扩展的 Observable.Publish

> ID：13005972
> 
> 赞同：2
> 
> 时间：2012-10-22T06:25:20.393
> 
> 标签：.net, system.reactive

我对使用 Observable.Publish 进行多播处理的生命周期有点困惑。应该如何正确使用连接？与直觉相反，我发现我不需要为多播观察者调用 connect 来开始他们的订阅。

```
var multicast = source.Publish();
var field0 = multicast.Select(record => record.field0);
var field1 = multicast.Select(record => record.field1);

// Do I need t*emphasized text*o call here?
var disposable = multicast.connect()

// Does calling 
disposable.Dispose();
// unsubscribe field0 and field1? 
```

**编辑**

我的困惑是为什么我没有在 IConnectableObservable 上显式调用 Connect 时成功订阅。但是我在 IConnectableObservable 上调用 Await 隐式调用 Connect

```
Public Async Function MonitorMeasurements() As Task

    Dim cts = New CancellationTokenSource

    Try
        Using dialog = New TaskDialog(Of Unit)(cts)

            Dim measurementPoints = 
                MeasurementPointObserver(timeout:=TimeSpan.FromSeconds(2)).
                TakeUntil(dialog.CancelObserved).Publish()

            Dim viewModel = New MeasurementViewModel(measurementPoints)
            dialog.Content = New MeasurementControl(viewModel)
            dialog.Show()

            Await measurementPoints
        End Using
    Catch ex As TimeoutException
        MessageBox.Show(ex.Message)
    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

End Function 
```

请注意，当按下取消按钮时，我的 TaskDialog 公开了一个名为 CancelObserved 的可观察对象。

**解决方案**

解决方案由@asti 在链接中发布。这是该链接中 RX 团队的引述

> 请注意，使用 await 会导致订阅发生，从而使可观察序列变热。此版本中包含对 IConnectableObservable 的 await 支持，这会导致将序列连接到其源并订阅它。如果没有 Connect 调用，等待操作将永远无法完成

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T08:48:25.277

`Publish`在源上返回一个`IConnectableObservable<T>`本质上是`IObservable<T>`带有`Connect`方法的。您可以使用`Connect`它`IDisposable`返回来控制对源的订阅。

Rx 被设计成一个“一劳永逸”的系统。在您明确处置它们或它们完成/错误之前，订阅不会被终止。

即`disp0 = field0.Subscribe(...); disp1 = field1.Subscribe(...)` - 订阅在明确处理之前不会终止`disp0, disp1`- 这与与多播源的连接无关。

您可以在不干扰下方管道的情况下连接和断开连接。不用担心手动管理连接的一种更简单的方法是使用`.Publish().RefCount()`which 将保持连接，只要至少有一个观察者仍然订阅它。这被称为预热 observable。

* * *

**已更新问题中的编辑**

OP 正在调用`await`.`IConnectableObservable<T>`

来自[Rx 的发行说明：](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/23062737-e154-41af-99f6-45d819992254/)

> ..await 的使用通过导致订阅发生而使可观察序列变热。此版本中包含对 IConnectableObservable 的 await 支持，这会导致将序列连接到其源并订阅它。如果没有 Connect 调用，等待操作将永远无法完成。

示例（取自同一页）

```
static async  void Foo()
{
    var xs = Observable.Defer(() =>
    {
        Console.WriteLine("Operation started!");
        return Observable.Interval(TimeSpan.FromSeconds(1)).Take(10);
    });

    var ys = xs.Publish();

    // This doesn't trigger a connection with the source yet.
    ys.Subscribe(x => Console.WriteLine("Value = " + x));

    // During the asynchronous sleep, nothing will be printed.
    await Task.Delay(5000);

    // Awaiting causes the connection to be made. Values will be printed now,
    // and the code below will return 9 after 10 seconds.
    var y =  await ys;
    Console.WriteLine("Await result = " + y);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T08:36:10.487

发布允许您共享订阅。这显然对于使 Cold 可观察序列 Hot 最有用。即采用导致某些订阅副作用（可能是到网络的连接）发生的序列，并确保副作用执行一次并且在消费者之间共享序列的结果。

在实践中，您在冷序列上调用发布，订阅您的消费者，然后在订阅之后连接已发布的序列以减轻任何竞争条件。

所以基本上，你在上面做了什么。

对于已经很热门的序列，例如 Subjects、FromEventPattern 或已经发布和连接的东西，这在很大程度上是没有意义的。

处理 Connect() 方法中的值将“断开”序列，从而阻止消费者获得更多值。如果消费者订阅中的任何一个想要提前分离，您也可以处理这些订阅。

说了这么多，你似乎在做正确的事情。你看到的问题是什么？我假设您正在连接到一个已经很热的序列。

# java - 我想将图像序列转换为 sdcard 中的视频

> ID：13005975
> 
> 赞同：1
> 
> 时间：2012-10-22T06:25:40.800
> 
> 标签：java, android, video, ffmpeg, java-native-interface

我想通过使用ffmpeg将图像序列转换为android sdcard中的视频...如何在android中使用该波纹管... ffmpeg -f image2 -i img%4d.png video.mp4。

我试试这一行 File dir = new File("/mnt/sdcard");

```
 // create a process and execute notepad.exe and currect environment

          try {

            Process p = Runtime.getRuntime().exec("ffmpeg -f image2 -i img%4d.png video_test.mp4",null,dir);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

但我得到 java.io.ioexception environment null,directory null error....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:56:42.260

它工作了一个 android javacv/opencv.so 试试这个代码，

```
 String path =SCREENSHOT_FOLDER2; 

            File folder = new File(path);

                listOfFiles = folder.listFiles();  
                if(listOfFiles.length>0)
                {

              iplimage = new opencv_core.IplImage[listOfFiles.length];

               for (int j = 0; j < listOfFiles.length; j++) {

                 String files="";       

               if (listOfFiles[j].isFile()) 
               {
               files = listOfFiles[j].getName();

                 }   

                String[] tokens = files.split("\\.(?=[^\\.]+$)");
               String name=tokens[0]; 

                System.out.println(" j " + name);

              iplimage[j]=cvLoadImage("/mnt/sdcard/images/"+name+".png");

               }

            } 

                File videopath = new File(SCREENSHOT_FOLDER3);
                videopath.mkdirs();
                 newFFmpegFrameRecord recorder = new newFFmpegFrameRecord(SCREENSHOT_FOLDER3+"video"+System.currentTimeMillis()+".mp4",320,480);

                 try {
                     recorder.setCodecID(CODEC_ID_MPEG4); //CODEC_ID_MPEG4       
                     //CODEC_ID_MPEG1VIDEO
                     recorder.setBitrate(sampleVideoBitRate);
                     recorder.setFrameRate(10);                     
                     recorder.setPixelFormat(PIX_FMT_YUV420P); //PIX_FMT_YUV420P

                     recorder.start();

                     int x = 0;
                     int y = 0;
                    for (int i=0;i< 300 && x<iplimage.length;i++)

                       {

                         recorder.record(image[x]);

                        if (i>(y+10)) {
                            y=y+1;
                            x++;
                        }

                        }
                     recorder.stop();
                    }
                 catch (Exception e){
                     e.printStackTrace();
                   } 
```

# python - opencv python视频旋转

> ID：13005976
> 
> 赞同：1
> 
> 时间：2012-10-22T06:25:45.190
> 
> 标签：python, opencv, image-rotation

我正在尝试从实时网络摄像头旋转帧图​​像，但出现一些错误，当我用于系统中任何保存的图像时，相同的代码可以正常工作，但如果有人可以，它不能与网络摄像头一起正常工作提前帮我thanx

```
import cv2.cv as cv

import cv2

import numpy as np

def trackcall(angle):

        image0 = rotateImage(image, angle)
        cv.ShowImage("imageRotation",image0);

def rotateImage(image, angle):

    image0 = image
    if hasattr(image, 'shape'):
        image_center = tuple(np.array(image.shape)/2)
        shape = tuple(image.shape)
    elif hasattr(image, 'width') and hasattr(image, 'height'):
        image_center = tuple(np.array((image.width/2, image.height/2)))
        shape = (image.width, image.height)
    else: 
        raise Exception, 'Unable to acquire dimensions of image for type %s.' % (type(image),)
    rot_mat = cv2.getRotationMatrix2D(image_center, angle,1.0)
    image = np.asarray( image[:,:] )

    rotated_image = cv2.warpAffine(image, rot_mat, shape, flags=cv2.INTER_LINEAR)

    # Copy the rotated data back into the original image object.
    cv.SetData(image0, rotated_image.tostring())

    return image0

angle = 720

vc = cv2.VideoCapture(0)

cv.NamedWindow('imageRotation',cv.CV_WINDOW_NORMAL)
cv.NamedWindow('imageMeter',cv.CV_WINDOW_AUTOSIZE)
cv.CreateTrackbar("rotate","imageMeter",360,angle,trackcall)
#image = cv.LoadImage('C:/Users/Public/Pictures/Sample Pictures/Desert.jpg', cv.CV_LOAD_IMAGE_COLOR)
#image0 = rotateImage(image, angle)
if vc.isOpened():

        rval = True, image = vc.read()
else:
        rval = False

while rval:

        image = vc.read()
        trackcall(0)

key = cv.WaitKey(0)
if key == 27:

    cv.DestroyWindow('imageRotation')
    cv.DestroyWindow("imageMeter") 
```

程序中的错误是

回溯（最近一次通话最后）：

trackcall(0) 中的文件“D:\VideoRotation\imageRotationWithTrackbar.py”，第 44 行

文件“D:\VideoRotation\imageRotationWithTrackbar.py”，第 6 行，trackcall image0 = rotateImage(image, angle)

文件“D:\VideoRotation\imageRotationWithTrackbar.py”，第 19 行，在 rotateImage 中引发异常，“无法获取类型 %s 的图像尺寸。” ％（类型（图像），）

例外：无法获取类型的图像尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-03-28T08:52:04.213

要在相机旋转时忽略图像中的旋转，您可以使用此代码

```
import cv2
import numpy as np
cap = cv2.VideoCapture (0)

width = 400
height = 350

while True:
    ret, frame = cap.read()
    frame = cv2.resize(frame, (width, height))
    flipped = cv2.flip(frame, 1)
    framerot = cv2.rotate(frame, cv2.ROTATE_90_COUNTERCLOCKWISE)
    framerot = cv2.resize(framerot, (width, height))
    StackImg = np.hstack([frame, flipped, framerot])
    cv2.imshow("ImageStacked", StackImg)
    if cv2.waitKey(1) & 0xff == ord('q'):
        break
cv2.destroyAllWindows() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:33:11.787

您没有正确阅读网络摄像头的提要。 `vc.read()`返回两个值，`retval`和`image`。请参阅[文档](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#cv2.VideoCapture.read)。

您的问题是您将两者都读入单个值，即 ，`image`这就是为什么您的图像似乎被表示为元组的原因。

所以`image = vc.read()`应该变成`retval, image = vc.read()`

但是，我认为在您使用的代码中可能还有其他问题`cv2.getRotationMatrix2D(image_center, angle,1.0)`......如果我能看到有什么问题，我会稍后再看。

# android - Android中的自定义滚动视图

> ID：13005978
> 
> 赞同：2
> 
> 时间：2012-10-22T06:26:00.417
> 
> 标签：android, android-layout

我将尝试解释我想要实现什么样的 UI 控件。

一个单元格具有全屏尺寸，因此，最初我们只能看到一个单元格（蓝色的）。从那时起，用户可以在四个方向之一（上、下、左或右）滚动虚拟视口。例如，我们向右滚动视口（绿色）。现在我们可以看到蓝色单元格右侧的单元格。此时我们只能在两个方向上滚动——向左或向右。等等...

![图表](../Images/a340090645c00de091240d9b75d8d599.png)

我已经使用一个父 UIView 和 5 个子 UIImageViews 对 iOS 进行了这样的控制。最初，第一个子视图填满整个屏幕（0,0,scrW,scrH），其他 4 个子视图位于屏幕外区域。滚动是通过修改父 UIView 的 frame 属性来实现的。我想我可以在 Android 中使用 ViewGroup 和 5 ImageViews 来做同样的事情，然后使用布局方法滚动它，但它不起作用。

知道如何使它正确吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:29:55.120

看看这篇文章，pulse 应用程序的布局几乎相同：

[如何为 Android 应用程序创建类似 UI 的“Pulse”](https://stackoverflow.com/questions/5398449/how-can-i-create-a-pulse-like-ui-for-an-android-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T06:24:38.010

尝试在每个方向上使用它，我认为这可以解决问题

```
 hor = (HorizontalScrollView) findViewById(R.id.horizontalScrollView1);
    hor.postDelayed(new Runnable() {
        public void run() {
            hor.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
        }
    }, 1L); 
```

# php - 在视图中管理太多列数据

> ID：13005979
> 
> 赞同：0
> 
> 时间：2012-10-22T06:26:13.013
> 
> 标签：php, mysql, codeigniter

我有一个 mysql 表，其中有 35 个字段。
我必须显示所有记录的列表。
我只想知道如何管理视图文件中的所有这些列，以便用户不必向右滚动即可查看用户登陆该页面时未显示的所有列值。
这个问题有什么替代方案吗？
我不想使用分页来显示单个记录；相反，我使用分页来显示每页 10 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:30:43.217

我可以建议您为此使用“jquery collapse expand”。最初，您可以在折叠时显示重要字段。您可以在展开时显示所有字段。

# node.js - 从命令行指定 r.js 输出目录

> ID：13005982
> 
> 赞同：0
> 
> 时间：2012-10-22T06:26:39.643
> 
> 标签：node.js, requirejs, r.js

我在项目的构建步骤中运行 r.js 以连接和缩小 javascript。我想从命令行而不是在 bulid 脚本中指定构建脚本的输出。

对于好奇的人；我的构建脚本如下所示

```
({
   mainConfigFile: 'main.js',
   modules: [

        //Main
        {
           name: 'main',
           exclude: ['loadKoTemplate']
        },
        {
           name: 'AnotherScreen',
           exclude: ["knockout"]
        }            
   ],
   dir: 'Built' //I would like to exclude this line
}) 
```

在 MSBuild 期间，我像这样呼唤它

```
<Exec Command="$(ProjectDir)Dependencies\node\node $(ProjectDir)Dependencies\node\node_modules\requirejs\bin\r.js -o $(ProjectDir)scripts\app.build.js" /> 
```

我想将构建的脚本放在中间构建文件夹（一个 obj 文件夹）中，然后再将它们复制到它们的最终位置。这使我可以根据项目配置进行不同的构建。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:51:16.840

尝试：

```
<Exec Command="$(ProjectDir)Dependencies\node\node $(ProjectDir)Dependencies\node\node_modules\requirejs\bin\r.js -o $(ProjectDir)scripts\app.build.js dir=Built" /> 
```

我在 Linux 上做这样的工作：

```
node lib/requirejs/r.js -o build.js dir=./vendor 
```

# asp.net - ASP.NET 4 站点的重启时间比平时长得多

> ID：13005983
> 
> 赞同：2
> 
> 时间：2012-10-22T06:26:44.400
> 
> 标签：asp.net, .net, iis-7

注意：我完全清楚，当您编辑代码隐藏文件、App_Code、web.config 等中的任何内容时，ASP.NET 网站项目将重新编译。这个问题与此无关。这是关于同一服务器上 .NET 3.5 和 .NET 4 站点之间所用时间的惊人差异。

我们有一个问题，新的 .NET 4 网站（但不是 .NET 3.5）需要比平时更长的时间 - 多两分钟 - 重新启动或重新编译。更具体地说，在站点开始重新编译之前有很长的延迟。在此延迟期间，CPU 使用率为 0%（零）。

似乎对于通常会触发重新编译的任何更改，在编译器甚至在服务器上启动之前都会有很长的两分钟延迟。这与超时限制的持续时间可疑相同。我怀疑 .NET 4 或 IIS7 中出现了问题，并且该站点无法正常重新编译，直到达到超时，然后它会像往常一样回收应用程序池并重新编译。一旦它真正开始重新编译，CPU 就会按预期出现峰值，并且它的完成时间与我们的 .NET 3.5 站点差不多。

这不是由于站点的复杂性，因为 .NET 3.5 中几乎相同的站点不会导致延迟。它也不是特定于一个站点，因为我们部署的所有 .NET 4 网站都遇到了同样的问题。

有没有人有过使用 .NET 4 的网站在重新编译网站之前延迟几分钟的经验？

# android - 如何将用户定义的对象从一个活动传递到另一个活动

> ID：13005985
> 
> 赞同：0
> 
> 时间：2012-10-22T06:27:01.860
> 
> 标签：android

> **可能重复：**
> [如何在 Android 中将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

我想将用户定义的类对象从一个`Activity`传递到另一个。我知道我们将 a 传递`String`给 other的方式`Activity`：

```
Intent in=new Intent(LoginActivity.this,WebserviceClient.class);
in.putExtra("res", "abc");
startActivityForResult(in, 0); 
```

以及如何在另一边提取它：

```
Intent i = getIntent();
res = i.getStringExtra("res"); 
```

但我想知道如何为用户定义的对象为双方执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:31:02.033

您需要将您的类实现为`Parcelable`接口。本指南可能有助于[将复杂的对象数据结构传递给 Intent](https://xjaphx.wordpress.com/2011/06/24/pass-complex-object-structure-to-intent/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:31:10.080

让您的类实现`Parcelable`并将其作为额外的意图传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T06:31:22.140

实现您要发送的对象类的可**序列化**该类

```
 Intent in=new Intent(LoginActivity.this,WebserviceClient.class);
                    in.putExtra("res",objectOfClass);
                    startActivityForResult(in, 0); 
```

提取另一面

```
 Bundle extraData = getIntent().getExtras();
        if (extraData != null) {
            objectOfClass = (Classname) extraData
                    .getSerializable("res");
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T07:40:32.117

您可以使用我的类，将对象传递给您需要创建可打包对象的另一个活动，但请确保您的 bean 类在此处实现 parcel CategoryBean 是我的 bean 类

```
/**
         * A method to create pacelable{@link Parcelable} object
         * @param album
         * @return
         */
        public  ParcelHashMap parseObject(CategoryBean mCategoryBean){
            ParcelHashMap p = new ParcelHashMap();
            p.put("CategoryBean", mCategoryBean);
            return p;
        } 
```

并从 Activity1 有意地传递它

```
Intent in=new Intent(Activity1.this,Activity2.class);
in.putExtra("myCatObject", parseObject(selectedCategoryObject));
startActivity(in); 
```

在 secondActivity 中，只需传递该 parcelabel 对象即可获得如下所示的真实对象

```
 /**
     * To get parsed object from Parcelable object, you can use int,string or any object
     * @param parsedObje Parcelable
     * @return PhotosBean Object
     */
    public  CategoryBean parseObject(Parcelable parsedObje){
        return (CategoryBean)((ParcelHashMap)parsedObje).get("CategoryBean");
    } 
```

包裹类

包 com.ixorian; 导入 java.util.HashMap；

```
import android.os.Parcel;
import android.os.Parcelable;

public class ParcelHashMap implements Parcelable {
    private HashMap<String,Object> map;

    public ParcelHashMap() {
        map = new HashMap<String,Object> ();
    }

    public ParcelHashMap(Parcel in) {
        map = new HashMap<String,Object> ();
        readFromParcel(in);
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public ParcelHashMap createFromParcel(Parcel in) {
            return new ParcelHashMap(in);
        }

        public ParcelHashMap[] newArray(int size) {
            return new ParcelHashMap[size];
        }
    };

//  @Override
    public int describeContents() {
        return 0;
    }

//  @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(map.size());
//      for (String s: map.keySet().toArray(new String[0])) {
//          dest.writeString(s);
//          dest.writeString((String) map.get(s));
//      }

         for (HashMap.Entry<String, Object> entry : map.entrySet()) {  
             dest.writeString(entry.getKey());  
             dest.writeValue(entry.getValue());  
             }  
    }

    public void readFromParcel(Parcel in) {
        int count = in.readInt();
        for (int i = 0; i < count; i++) {
            map.put(in.readString(), in.readValue(ParcelHashMap.class.getClassLoader()));
        }
    }

    public Object get(String key) {
        return (Object) map.get(key);
    }

    public void put(String key, Object value) {
        map.put(key, value);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T09:55:32.517

我遵循在 Andriod 活动之间传递自定义对象的一种简单方法是在我的项目中定义一个 Singleton 类，其中包含我需要在活动之间传递的所有对象和变量，假设你想从活动传递一个自定义对象A-->B ，您定义一个包含要传递的对象模板的 Singleton 类，您只需在 Activity A 中调用 setter 方法，在 Activity B 中调用 getter。

# network-programming - 增加 SKB 的引用计数

> ID：13005989
> 
> 赞同：3
> 
> 时间：2012-10-22T06:27:36.710
> 
> 标签：network-programming, linux-kernel, linux-device-driver

有什么简单的方法可以增加 linux 内核中 SKB 缓冲区的引用计数，这样硬件就不会释放它。

我知道使用 skb_clone 引用计数会自动增加，但我想知道在不创建克隆的情况下如何增加 SKB 引用计数。

我的目的是多次发送同一个数据包，我不想每次都为这个操作做一个 skb_clone，因为我想重用相同的内存。

我用于相同 SKB 的示例代码如下所示

```
 for (i=0;i<=100;i++)
  {
    tmp_skb = skb_get(skb);
    if (tmp_skb == NULL)
    {
      printk ("Clone Failed");
      continue;
    }

    if ( (err = dev_queue_xmit(tmp_skb)) != NETDEV_TX_OK) {
      if(unlikely(enable_error))
        printk("ERROR - DEV QUEUE FAILED %d\n", err);

      err = -ENETDOWN; /* Probably we need a better error here */
      continue;
    }

    if (i==100)
    {
     printk("Loop is done\n");
     kfree_skb(skb);
     return(len);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:45:02.763

尝试`get`通过[skb_get](http://lxr.free-electrons.com/source/include/linux/skbuff.h#L765)方法访问 skb：

```
758 /**
759  *      skb_get - reference buffer
760  *      @skb: buffer to reference
761  *
762  *      Makes another reference to a socket buffer and returns a pointer
763  *      to the buffer.
764  */
765 static inline struct sk_buff *skb_get(struct sk_buff *skb)
766 {
767         atomic_inc(&skb->users);
768         return skb;
769 } 
```

# c# - Outlook 加载项的弹出通知（从后台线程问题调用 Form.Show()）

> ID：13005994
> 
> 赞同：5
> 
> 时间：2012-10-22T06:28:05.417
> 
> 标签：c#, winforms, vsto, outlook-addin

我的 Outlook 2010 加载项（使用 VSTO）在发送邮件时在不同的线程中执行一些 Web 服务调用。我想显示一个小的非模态弹出通知（如 Skype/yahoo/Windows live messenger 的通知），显示 Web 服务调用的结果。

我试图根据我的要求自定义[通知窗口项目](http://www.codeproject.com/Articles/277584/Notification-Window)。当使用以下代码从我的加载项形式的单击事件处理程序调用时，它似乎工作正常：

```
private void btnOk_Click(object sender, EventArgs e)
{
    PopupNotifier notifier = new PopupNotifier();
    notifier.DisplayNotification("Test");
} 
```

但是，当从执行 Web 服务调用的后台线程调用相同的方法*notifier.DisplayNotification("Test")时，通知程序挂起；*它的形式显示在屏幕上，但似乎没有文字、颜色或动画起作用。它只是坐在那里，直到 Outlook 关闭。

我进行了一些搜索，发现这可能会发生，因为通知程序使用 Show() 方法而不是 ShowDialog() 来显示其表单。而且由于我不想要弹出通知的模式对话框，因此我也无法将方法更改为 ShowDialog()。

根据其他文章，我也尝试过使用 backgroundWorkers、delegate、MethodInvoker 等调用该方法，但无法获得所需的结果。

但是，在尝试上述方法时，我注意到不仅弹出通知程序，任何简单的表单都会发生同样的情况。如果我在后台线程中创建它并调用 Show() 方法，它就会卡住，而在相同的情况下 ShowDialog() 似乎工作正常。

任何关于如何解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:24:31.480

我最终设法使用[TaskbarNotifier](http://www.codeproject.com/Articles/3285/TaskbarNotifier-a-skinnable-MSN-Messenger-like-pop)项目解决了这个问题。

# web-services - 服务器返回 HTTP 响应代码：401 用于 URL：http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST

> ID：13005996
> 
> 赞同：0
> 
> 时间：2012-10-22T06:28:10.173
> 
> 标签：web-services, drools, guvnor

Enlisted 是我用来从 Guvnor 读取规则的方式，用于验证用户给出的输入 1\. 为用户形成 GUI 的 Web 应用程序（Tomcat v7.0 服务器） 2\. Web 服务（JBoss EAP 6.0) 使用 drools API 从 Guvnor 读取规则并将它们公开为 Web 服务 3\. Guvnor(Jboss AS 7) 作为规则的存储库。

当我尝试提交表单（网络应用程序）时，我在控制台上收到以下错误：-

```
INFO  [stdout] (Thread-77) [2012:10:296 10:10:504:info] KnowledegAgent has started listening for ChangeSet notifications
10:52:17,800 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) (null: 5, 174): cvc-elt.1: Cannot find the declaration of element 'change-set'.
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:info] KnowledgAgent applying ChangeSet
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] KnowledgeAgent subscribing to resource=[UrlResource path='http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST']
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] ResourceChangeNotification subscribing listener=org.drools.agent.impl.KnowledgeAgentImpl@295b9a to resource=[UrlResource path='http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST']
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] ResourceChangeScanner subcribing notifier=org.drools.io.impl.ResourceChangeNotifierImpl@13d0493 to resource=[UrlResource path='http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST']
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] KnowledgeAgent ChangeSet requires KnowledgeBuilder
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] KnowledgeAgent rebuilding KnowledgeBase using ChangeSet
10:52:17,831 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:831:debug] KnowledgeAgent building resource=[UrlResource path='http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST']
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) [2012:10:296 10:10:955:exception]
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) java.lang.RuntimeException: KnowledgeAgent exception while trying to deserialize KnowledgeDefinitionsPackage  
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.drools.agent.impl.KnowledgeAgentImpl.rebuildResources(KnowledgeAgentImpl.java:418)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.drools.agent.impl.KnowledgeAgentImpl.applyChangeSet(KnowledgeAgentImpl.java:120)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.drools.agent.impl.KnowledgeAgentImpl.applyChangeSet(KnowledgeAgentImpl.java:109)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at com.test.drools.ExposeDroolsWebService.checkedColor(ExposeDroolsWebService.java:50)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at java.lang.reflect.Method.invoke(Method.java:597)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:194)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:102)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:100)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:176)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:133)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
10:52:17,955 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at java.lang.Thread.run(Thread.java:662)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1) Caused by: java.io.IOException: Server returned HTTP response code: 401 for URL: http://localhost:8080/jboss-brms/org.drools.guvnor.Guvnor/package/DroolsPackage/LATEST 
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.drools.io.impl.UrlResource.getInputStream(UrlResource.java:76)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   at org.drools.agent.impl.KnowledgeAgentImpl.rebuildResources(KnowledgeAgentImpl.java:407)
10:52:17,971 INFO  [stdout] (http-localhost/127.0.0.1:8180-1)   ... 29 more 
```

这是我用于访问规则的代码：-

```
Resource resource = ResourceFactory
            .newClassPathResource("com/test/rules/Color.xml");
    KnowledgeAgent kagent = KnowledgeAgentFactory
            .newKnowledgeAgent("kagent");
    kagent.monitorResourceChangeEvents(true);
    kagent.applyChangeSet(resource);
    KnowledgeBase kbase = kagent.getKnowledgeBase();
    kbase.getKnowledgePackages();
    StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
    ksession.insert(colorBean);
    ksession.fireAllRules();
    System.out.println(colorBean.getColor());
    ksession.dispose();
    return colorBean; 
```

有人可以帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:15:19.323

HTTP 错误 401 表示您无权访问该 URL。您需要向 guvnor 提供用户名/密码。

以下代码将 DRL 读取到来自 guvnor 的字符串变量中。

```
private static final String AUTH = "guvnor:guvnor";
private static String readRulesFromGuvnor(URL url, String authString) {
    String returnStr = "";
    try {
        URLConnection urlConnection = url.openConnection();
        if (authString != null) {
            byte[] authEncBytes = Base64.encodeBase64(authString.getBytes());
            String authStringEnc = new String(authEncBytes);
            urlConnection.setRequestProperty("Authorization", "Basic " + authStringEnc);
        }
        returnStr = IOUtils.toString(urlConnection.getInputStream(), "UTF-8");
        LOGGER.info("Rules read from: {}", url.toString());
    } catch (IOException e) {
        LOGGER.error(e.getMessage());
    }
        return returnStr;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:58:18.780

如果您与 Guvnor 一起使用，那么它需要对包快照进行基本身份验证，默认情况下将用户名和密码添加到您的变更集 xml 中的包 url 为空

`<resource source="http://127.0.0.1:8888/org.drools.guvnor.Guvnor/package/mortgages/LATEST" type="PKG" basicAuthentication="enabled" username="admin" password="admin" />`