# StackOverflow 问答 15895000-15895999

# linux - 使用 SSH 的调用命令失败？

> ID：15895001
> 
> 赞同：0
> 
> 时间：2013-04-09T06:41:16.903
> 
> 标签：linux, bash, shell, ssh, unzip

根据项目要求，我需要检查在远程机器上生成的 zip 文件的内容。整个活动是使用自动化框架套件完成的。这是用 shell 脚本编写的。我正在使用 ssh 命令 abd 使用 -l 和 -q 开关执行解压缩命令执行上述活动。但是这个命令正在失败。并显示以下错误消息。

```
[SOMEUSER@MACHINE IP Function]$ ./TESTS.sh
    ssh SOMEUSER@MACHINE IP unzip -l -q SOME_PATH/20130409060734*.zip | grep -i XML  |wc -l
    unzip:  cannot find or open SOME_PATH/20130409060734*.zip, SOME_PATH/20130409060734*.zip.zip or SOME_PATH/20130409060734*.zip.ZIP.

    No zipfiles found.
    0 
```

我手动编写的相同命令但可以正常工作。我真的不知道。为什么每当我通过 shell 脚本执行时都会失败。

```
[SOMEUSER@MACHINE IP Function]$ ssh SOMEUSER@MACHINE IP unzip -l -q SOME_PATH/20130409060734*.zip | grep -i XML  |wc -l
        2 
```

请帮我解决这个问题。

在此先感谢，普里扬克·沙阿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:07:06.110

当您从本地计算机运行命令时，星号字符会在本地计算机上展开，然后再传递给远程 ssh 命令。因此，您的命令期望在您的机器上找到 SOME_PATH/20130409060734*.zip 文件并将它们插入到您的 ssh 命令中以传递给另一台机器，而您（我假设）的意思是 SOME_PATH/20130409060734*.zip 文件远程机器。

为此，在 * 字符前加上反斜杠（ \ ），看看它是否对您有帮助。在某些 shell 中，转义字符的定义可能不同，如果您是其中之一，您需要找到转义字符并使用该转义字符。此外，在传递给其他服务器的命令周围使用引号。在我看来，你的命令行应该是这样的：

```
ssh SOMEUSER@MACHINE_IP "/usr/bin/unzip -l -q SOME_PATH/20130409060734\*.zip | grep -i XML  |wc -l" 
```

希望这可以帮助

# android - Android DeviceDefault 切换按钮

> ID：15895005
> 
> 赞同：0
> 
> 时间：2013-04-09T06:41:41.750
> 
> 标签：android, switch-statement, android-theme

我需要获取设备默认开关（Api lvl 14）按钮。我的应用程序中已经有 Switch 按钮，但我希​​望它们看起来像 DEVICE 默认的 Switch 按钮，而不是 Android 中的那些。我怎样才能做到这一点？

我尝试更改应用程序的主题，但我已经有一个用于自定义标题栏的自定义主题，如果我尝试更改主题（例如 Theme.DeviceDefault），我会因为自定义标题而强制关闭。

这是开关的样子（对于我的设备）：

![在此处输入图像描述](https://i.stack.imgur.com/e3Y9v.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:49:39.737

查看此页面：[http](http://androiddrawableexplorer.appspot.com/) ://androiddrawableexplorer.appspot.com/以获取所有可用图标的列表。顶部有一个使用示例，但如果您在 menu.xml 文件中执行此操作，请使用一些看起来像这样的代码

```
<item android:id="@+id/end"
    android:title="@string/end_label"
    android:alphabeticShortcut="@string/end_shortcut"
    android:icon = "@android:drawable/ic_menu_close_clear_cancel" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:54:25.033

您是否正在寻找[ToggleButton](http://developer.android.com/intl/ru/reference/android/widget/ToggleButton.html) (Api lvl 1) 或[Swith](http://developer.android.com/intl/ru/reference/android/widget/Switch.html) (Api lvl 14)？

更新：好的，那么您可以使用`ImageView`，它也可以处理点击。在xml中：

```
 <ImageView
          android:layout_width="100dp"
          android:layout_height="100dp"
          android:background="@drawable/my_swich"
 /> 
```

在可绘制文件夹中的 my_swith.xml 中：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_selected="true" android:drawable="@drawable/selectedImage" />
<item  android:drawable="@drawable/normalImage" />
</selector> 
```

最后，在代码中您需要设置`OnClickListener`为图像。当`onClick`在 Image 上发生事件时，您需要这样做：

```
iv.setSelected(!iv.isSelected()); 
```

你得到自定义（你自己的工具）我希望我正确理解你的问题。

# powershell - How to find files whose paths do not exist in the text file using powershell

> ID：15895008
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:41:46.267
> 
> 标签：powershell, directory, text-files, file-exists

I need to check and return files that exist in the filesystem, but are not listed in a given text file. For instance, my text file (sample.txt) will contain paths like:

```
\\SharedDrive\Data\DevS\Common\app_name\subfolder1\Archive\Archive1.vbproj
\\SharedDrive\Data\DevS\NotCommon\app_name\subfolder1\user\WebApp.vbproj
\\SharedDrive\Data\DevS\UnCommon\app_name\subfolder1\Manager\Managerial.vbproj 
```

It happens that there are VB project files that exists on the drive but are not among the list, which i want to return along with their full path. For instance:

```
\\SharedDrive\Data\DevS\Common\app_name\subfolder2\Windows\SharedArchive.vbproj
\\SharedDrive\Data\DevS\NotCommon\app_name2\subfolder1\user2\WebApp2.vbproj 
```

I tried this:

```
$log = "e:\pshell\notExists.log"

Get-Content "e:\pshell\Sample.txt" | Where-Object {
#Keep only paths that does not exists
!(Test-Path $_)
} | Set-Content $log 
```

but this does the other way around.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:38:39.183

尝试这个：

```
$baseDir = "\\SharedDrive\Data\DevS"
$log = "..."

$paths = Get-Content sample.txt

Get-ChildItem $baseDir -Recurse -Filter *.vbproj | ? {
  -not $_.PSIsContainer -and $paths -notcontains $_.FullName
} | % { $_.FullName } | Set-Content $log 
```

# php - 获取数组中的 nr 个项目

> ID：15895009
> 
> 赞同：0
> 
> 时间：2013-04-09T06:41:51.140
> 
> 标签：php

我有一个具有这种格式的数组：

```
array(
  info(
    Date-today => '09/04/2013'
  )
  clients(
    id => 1001,
    name => Fred
  )
  more_info(
    weather-today => "cloudy"
  )
) 
```

但有时，我会收到更多客户的数据：

```
array(
  info(
    Date-today => '08/04/2013'
  )
  clients(
    0(
      id => 1001,
      name => Fred
    ),
    1(
      id => 1045,
      name => Fritz
    )
  )
  more_info(
    weather-today => "Sunny"
  )
) 
```

我想计算我返回了多少个cients，因为如果只有一个或多个，我需要以不同的方式访问客户端数据。我尝试了几个“count()”选项，例如：

```
count(array['client']) 
```

但是当然，如​​果只有 1 个客户端，它不会返回 1，而是返回 2（因为数组中有 2 项客户端数据）。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:50:58.377

您必须找出是否`$array['clients']`只有数字索引：

```
$size = count($array['clients'];
if (count(array_filter(array_keys($array['clients']), 'is_int')) == $size) {
    return $size;
} else {
    return 1;
} 
```

或者，使用*一个*数字索引的存在作为条件：

```
if (isset($array['clients'][0])) {
    return count($array['clients']);
} else {
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:50:05.870

如果您有一个类似数组的结构（作为示例中的客户端集合），您应该始终索引条目，即使只有一个条目。

这样你就不会遇到你描述的问题。

*编辑：*
没有看到你的评论。您可以先检查 $array['clients'] 是否有任何内容（通过 count()）。
-> 如果没有，cnt = 0。
然后检查是否定义了 $array['clients']['0']。
-> 如果没有定义，cnt = 1。
-> 如果有，cnt = count()。

# sql - 两个日期之间的天数差

> ID：15895013
> 
> 赞同：1
> 
> 时间：2013-04-09T06:42:10.340
> 
> 标签：sql, sql-server, date

我对此很陌生。我需要在此查询的单独列中了解 t.1start 和 t1.finish 之间的天数差异。

谢谢，路易

```
SELECT ROW_NUMBER() OVER(ORDER BY TOWN) AS 'row', 
T1.Surname,
T1.Forename,
T1.Town,
T1.Description,
T1.Sex,
T1.DOB,
T1.start,
T1.finish,
FROM dbo.viewServiceContractFull T1 
WHERE
T1.finish>='2013/01/01'
and 
T1.finish<='2013/01/31' 
```

我现在如何让某些城镇出现在查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:46:32.177

在 SQL Server 中，您可以使用

```
SELECT DATEDIFF (MyUnits, '2010-01-22 15:29:55.090', '2010-01-22 15:30:09.153') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:44:35.777

您可以使用[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)函数来确定两个日期之间的间隔，如果需要，您可以使用[CAST/CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)将字符串日期转换为实际日期，例如：

```
CAST('2010-01-22 15:29:55.090' AS DATETIME) 
```

CONVERT 功能使您可以选择日期的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:47:48.610

```
SELECT ROW_NUMBER() OVER(ORDER BY TOWN) AS 'row', 
T1.Surname,
T1.Forename,
T1.Town,
T1.Description,
T1.Sex,
T1.DOB,
T1.start,
T1.finish, cast(DATEDIFF(DAY,T1.start,T1.finish) as varchar) as difference
FROM dbo.viewServiceContractFull T1 
WHERE
T1.finish>='2013/01/01'
and 
T1.finish<='2013/01/31' 
```

另外看看[这个](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

# datastage - 如何在 DataStage 7.5 服务器中将字符串转换为浮点数

> ID：15895026
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:01.140
> 
> 标签：datastage

如何在服务器 DS 7.5 中将字符串/字符转换为浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T08:48:03.430

在 DS 7.5 中，没有 DS 8.X 之类的转换选项，在 7.5 中，您只需要映射字段，例如，如果在输入中是字符串，在 o/p 中是浮点数，那么您只需要将输入映射到输出字段。Sever 会将字符串转换为浮点数。

# javascript - How to get data from MySql using javascript in leaflet

> ID：15895029
> 
> 赞同：2
> 
> 时间：2013-04-09T06:43:07.943
> 
> 标签：javascript, mysql, leaflet

I have Some tables in MqSql database. I have to Fetch data from mysql table using javascript & show it in map of leaflet. Can any any one tell me that how can I fetch data from mqsql using javascript ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:49:36.153

直接从客户端调用 MySQL 数据库不是一种选择，您需要某种服务器端 API。

如果您坚持使用 JavaScript（在服务器上），Node.js 是一个有价值的选择。

# c# - Store an entity in a hidden field of a parent page and access the hidden field entity value in child page?

> ID：15895030
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:08.383
> 
> 标签：c#, asp.net, session, web, master-pages

In our project, there is an requirement to avoid session and view state. In parent page, there is a filter option which is done by an search criteria entity. I have to keep the search criteria entity value of the parent page and pass it to the popup(Child page).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:59:44.897

您可以将值作为查询字符串传递。

# jakarta-ee - DropDown 选择要在 spring 中传输的值

> ID：15895034
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:18.407
> 
> 标签：jakarta-ee, spring-mvc

当用户单击提交表单的搜索按钮时，我需要从 jsp 传输下拉列表中选择的值。

```
 <form:form modelAttribute="firstVO" method="post"> 

    <form:select path="secondVO.status" 
    id="status" > 
    <form : option value="all" label="All" /> 
    <form : option value="new" label="New" /> 
    </form:select> 

    <input type="button" name="search" value="Search" onclick="filterData();" /> 

    </form:form> 

    function filterData(){ 

    document.forms[0].action    =   Path+"/filter.do"; 
    document.forms[0].submit(); 
    } 
    ------------------------------------------------- 

    public class FirstVO { 

    private SecondVO secondVO; 
    } 

    public class SecondVO { 

    private String status; 
    } 

    public class DPSController { 

    @RequestMapping(value = "/filter.do") 
    public ModelAndView filterDashboard(HttpServletRequest request, @ModelAttribute SecondVO secondVO) { 
    System.out.println("secondVO.getStatus:"+secondVO.getStatus()); 
    } 
    } 
```

注意：DPSController 是打印状态选择值的动作类。

```
Any idea please? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:57:16.410

您的模型属性是 firstVO 而不是 secondVO。如下所示更改 filterDashboard 签名应该可以工作。

改变

```
 @RequestMapping(value = "/filter.do") 
        public ModelAndView filterDashboard(HttpServletRequest request, @ModelAttribute SecondVO secondVO) { 
        System.out.println("secondVO.getStatus:"+secondVO.getStatus()); 
    } 
```

到

```
@RequestMapping(value = "/filter.do") 
    public ModelAndView filterDashboard(HttpServletRequest request, @ModelAttribute FirstVO firstVO) { 
   System.out.println("firstVO.getSecondVO().getStatus:"+firstVO.getSecondVO().getStatus()); 
    } 
```

# php - PHP 正则表达式 - 模式错误

> ID：15895037
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:23.163
> 
> 标签：php, regex, preg-match

我试图在 preg_match 的帮助下在 PHP 中搜索一些模式。搜索模式是这样的（但这是错误的）：

```
 /[\d\s*-\s*\d\s*(usd|eur)]{1}/i

\d  starts with integer,
\s*  there can be any number of whitespaces,
- there must be exactly one minus sign
\s* there can be any number of whitespaces,
\d then must be integer
\s* there can be any number of whitespaces,
(usd|eur) any of the following words must be present but one
[\d\s*-\s*\d\s*(usd|eur)]{1} - in string there should be exactly one occurence 
```

上面的模式不起作用，我做错了什么？供测试用：

```
<?php
    $pattern = '/[\d\s*-\s*\d\s*(usd|eur)]{1}/i';
    $query = '100-120 100-120';

    echo $pattern.'<br/>';
    echo $query.'<br/>';

    if(preg_match($pattern, $query))
        echo 'OK';
    else
        echo 'not OK!';
?> 
```

**注意：** 我试图提取这样的数据：

```
The price of item is 100 - 120 usd in our market 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:54:25.900

`[...]`是一个字符类。它的意思是“匹配这些字符中的任何一个”。`[abc]`将匹配 a、b*或*c。它与字符串“abc”不匹配。

此外：

`{1}`意思是“匹配前面的表达式一次”。但是，匹配一次是默认设置。无需明确告诉它匹配一次。

`\d`匹配单个数字。根据您的示例，您想要`\d+`- 匹配一个至少由一位数字组成的数字。

这是您的模式应该是这样的：

```
/\d+\s*-\s*\d+\s*(usd|eur)/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:22:05.607

正则表达式是检查和修改文本的强大工具。正则表达式本身，具有几乎类似于迷你编程语言的通用模式符号，允许您描述和解析文本。它们使您能够在字符串中搜索模式，灵活准确地提取匹配项。但是，您应该注意，由于正则表达式更强大，它们也比更基本的字符串函数慢。如果您有特殊需要，您应该只使用正则表达式。

本教程简要概述了基本的正则表达式语法，然后考虑 PHP 提供的用于处理正则表达式的函数。

```
The Basics
Matching Patterns
Replacing Patterns
Array Processing 
```

PHP 支持两种不同类型的正则表达式：POSIX 扩展和 Perl 兼容正则表达式 (PCRE)。PCRE 函数比 POSIX 函数更强大，也更快，所以我们将专注于它们。

**基础**

在正则表达式中，大多数字符只匹配它们自己。例如，如果您在字符串“约翰踢足球”中搜索正则表达式“foo”，您会得到匹配项，因为“foo”出现在该字符串中。有些字符在正则表达式中有特殊含义。例如，美元符号 ($) 用于匹配以给定模式结尾的字符串。同样，正则表达式开头的插入符号 (^) 字符表示它必须匹配字符串的开头。匹配自己的字符称为文字。具有特殊含义的字符称为元字符。

点 (.) 元字符匹配除换行符 () 之外的任何单个字符。因此，模式 ht 匹配 hat、hothit、hut、h7t 等。竖线 (|) 元字符用于正则表达式中的替代项。它的行为很像逻辑 OR 运算符，如果你想构造一个匹配多个字符集的模式，你应该使用它。例如，模式 Utah|Idaho|Nevada 匹配包含“Utah”或“Idaho”或“Nevada”的字符串。括号为我们提供了一种对序列进行分组的方法。例如，(Nant|b)ucket 匹配“Nantucket”或“bucket”。使用括号将字符组合在一起以进行交替称为分组。

如果要匹配模式中的文字元字符，则必须使用反斜杠对其进行转义。

要在模式中指定一组可接受的字符，您可以自己构建字符类或使用预定义的字符类。字符类允许您将一堆字符表示为正则表达式中的单个项目。您可以通过将可接受的字符括在方括号中来构建自己的字符类。一个字符类匹配该类中的任何一个字符。例如，字符类 [abc] 匹配 a、b 或 c。要定义字符范围，只需输入第一个和最后一个字符，用连字符分隔。例如，要匹配所有字母数字字符：[a-zA-Z0-9]。您还可以创建一个否定字符类，它匹配任何不在该类中的字符。要创建否定字符类，请以 ^: [^0-9] 开始字符类。

元字符 +、*、? 和 {} 影响模式应匹配的次数。+ 表示“匹配一个或多个前面的表达式”，* 表示“匹配零个或多个前面的表达式”，以及？表示“匹配零个或前面的表达式之一”。花括号 {} 可以不同地使用。对于单个整数，{n} 表示“匹配前一个表达式的 n 次出现”，一个整数和一个逗号，{n,} 表示“匹配前一个表达式的 n 次或多次出现”，并且两个逗号分隔integers {n,m} 表示“如果前一个字符出现至少 n 次，但不超过 m 次，则匹配前一个字符”。

现在，看看这些例子：

```
Regular Expression  Will match...
foo     The string "foo"
^foo    "foo" at the start of a string
foo$    "foo" at the end of a string
^foo$   "foo" when it is alone on a string
[abc]   a, b, or c
[a-z]   Any lowercase letter
[^A-Z]  Any character that is not a uppercase letter
(gif|jpg)   Matches either "gif" or "jpeg"
[a-z]+  One or more lowercase letters
[0-9\.\-]   Аny number, dot, or minus sign
^[a-zA-Z0-9_]{1,}$  Any word of at least one letter, number or _
([wx])([yz])    wy, wz, xy, or xz
[^A-Za-z0-9]    Any symbol (not a number or a letter)
([A-Z]{3}|[0-9]{4})     Matches three letters or four numbers 
```

Perl 兼容的正则表达式模拟模式的 Perl 语法，这意味着每个模式必须包含在一对分隔符中。通常使用斜杠 (/) 字符。例如，/模式/。

PCRE 函数可以分为几类：匹配、替换、拆分和过滤。

**匹配模式**

preg_match() 函数对字符串执行 Perl 样式的模式匹配。preg_match() 接受两个基本参数和三个可选参数。这些参数依次是正则表达式字符串、源字符串、存储匹配的数组变量、标志参数和可用于指定开始搜索的备用位置的偏移参数： preg_match ( pattern,主题 [, 匹配 [, 标志 [, 偏移量]]])

如果找到匹配项，preg_match() 函数返回 1，否则返回 0。让我们搜索字符串“Hello World！” 对于字母“ll”：

```
<?php
if (preg_match("/ell/", "Hello World!", $matches)) {
  echo "Match was found <br />";
  echo $matches[0];
}
?> 
```

字母“ll”存在于“Hello”中，因此 preg_match() 返回 1 并且 $matches 变量的第一个元素填充了与模式匹配的字符串。下一个示例中的正则表达式正在查找字母“ell”，但会使用以下字符查找它们：

```
<?php
if (preg_match("/ll.*/", "The History of Halloween", $matches)) {
  echo "Match was found <br />";
  echo $matches[0];
}
?> 
```

现在让我们考虑更复杂的例子。正则表达式最流行的用途是验证。下面的示例检查密码是否为“强”，即密码必须至少为 8 个字符，并且必须至少包含一个小写字母、一个大写字母和一个数字：

```
<?php
$password = "Fyfjk34sdfjfsjq7";

if (preg_match("/^.*(?=.{8,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/", $password)) {
    echo "Your passwords is strong.";
} else {
    echo "Your password is weak.";
}
?> 
```

^ 和 $ 在字符串的开头和结尾寻找一些东西。“.*”组合用于开头和结尾。如上所述，.（点）元字符表示任何字母数字字符，而 * 元字符表示“零或多个”。之间是括号中的分组。“？=”组合意味着“下一个文本必须是这样的”。此构造不捕获文本。在这个例子中，不是指定事物应该出现的顺序，而是说它必须出现，但我们并不担心顺序。

第一个分组是 (?=. *{8,})。这将检查字符串中是否至少有 8 个字符。下一个分组 (?=.* [0-9]) 表示“任何字母数字字符可以出现零次或多次，然后任何数字都可以出现”。所以这会检查字符串中是否至少有一个数字。但由于未捕获字符串，因此该数字可以出现在字符串中的任何位置。接下来的分组 (?=. *[az]) 和 (?=.* [AZ]) 在字符串中的任何位置相应地查找小写和大写字母。

最后，我们将考虑验证电子邮件地址的正则表达式：

```
<?php
$email = firstname.lastname@aaa.bbb.com;
$regexp = "/^[^0-9][A-z0-9_]+([.][A-z0-9_]+)*[@][A-z0-9_]+([.][A-z0-9_]+)*[.][A-z]{2,4}$/";

if (preg_match($regexp, $email)) {
    echo "Email address is valid.";
} else {
    echo "Email address is <u>not</u> valid.";
}
?> 
```

此正则表达式检查开头的数字，并检查电子邮件地址中的用户名和域名中的多个句点。让我们尝试自己研究这个正则表达式。

出于速度原因，preg_match() 函数仅匹配它在字符串中找到的第一个模式。这意味着可以非常快速地检查字符串中是否存在模式。另一个函数 preg_match_all() 在模式允许的范围内将模式与字符串匹配多次，并返回匹配的次数。

**替换模式**

在上面的示例中，我们在字符串中搜索了模式，而搜索字符串保持不变。preg_replace() 函数查找与模式匹配的子字符串，然后用新文本替换它们。preg_replace() 接受三个基本参数和一个附加参数。这些参数依次是正则表达式、用于替换找到的模式的文本、要修改的字符串以及最后一个可选参数，它指定将替换多少匹配项。preg_replace（模式，替换，主题[，限制]）

如果找到匹配项，则该函数返回更改后的字符串，否则返回原始字符串的未更改副本。在以下示例中，我们搜索版权短语并将年份替换为当前。

```
<?php
echo preg_replace("/([Cc]opyright) 200(3|4|5|6)/", "$1 2007", "Copyright 2005");
?> 
```

在上面的示例中，我们在替换字符串中使用了反向引用。反向引用使您可以在替换字符串中使用匹配模式的一部分。要使用此功能，您应该使用括号来包装您可能想要使用的正则表达式的任何元素。您可以使用美元符号 ($) 和子模式的编号来引用子模式匹配的文本。例如，如果您使用子模式，则 $0 设置为整个匹配，然后将 $1、$2 等设置为每个子模式的单个匹配。

在以下示例中，我们将日期格式从“yyyy-mm-dd”更改为“mm/dd/yyy”：

```
<?php
echo preg_replace("/(\d+)-(\d+)-(\d+)/", "$2/$3/$1", "2007-01-25");
?> 
```

我们还可以传递一个字符串数组作为主题来对所有字符串进行替换。要通过一次调用 preg_replace() 对同一字符串或字符串数​​组执行多次替换，我们应该传递模式和替换数组。看看这个例子：

```
<?php
$search = array ( "/(\w{6}\s\(w{2})\s(\w+)/e",
                  "/(\d{4})-(\d{2})-(\d{2})\s(\d{2}:\d{2}:\d{2})/");

$replace = array ('"$1 ".strtoupper("$2")',
                  "$3/$2/$1 $4");

$string = "Posted by John | 2007-02-15 02:43:41";     

echo preg_replace($search, $replace, $string);?> 
```

在上面的示例中，我们使用了另一个有趣的功能 - 您可以对 PHP 说，一旦发生替换，匹配文本应该作为 PHP 代码执行。由于我们在正则表达式的末尾附加了一个“e”，PHP 将执行它所做的替换。也就是说，它将使用 strtoupper(name) 并将其替换为 strtoupper() 函数的结果，即 NAME。

**数组处理**

PHP 的 preg_split() 函数使您能够根据比字符的文字序列更复杂的内容来拆分字符串。当需要用动态表达式而不是固定表达式分割字符串时，这个函数就派上用场了。基本思想与 preg_match_all() 相同，只是它不是返回主题字符串的匹配片段，而是返回一个与指定模式不匹配的片段数组。以下示例使用正则表达式将字符串拆分为任意数量的逗号或空格字符：

```
<?php
$keywords = preg_split("/[\s,]+/", "php, regular expressions");
print_r( $keywords );
?> 
```

另一个有用的 PHP 函数是 preg_grep() 函数，它返回与给定模式匹配的数组元素。此函数遍历输入数组，根据提供的模式测试所有元素。如果找到匹配项，则匹配元素作为包含所有匹配项的数组的一部分返回。以下示例搜索一个数组和所有以字母 AJ 开头的名称：

```
<?php
$names = array('Andrew','John','Peter','Nastin','Bill');
$output = preg_grep('/^[a-m]/i', $names);
print_r( $output );
?> 
```

# javascript - Angular JS - Using {{}} in script

> ID：15895039
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:38.797
> 
> 标签：javascript, angularjs

I'm very new with Angular so don't even know if what I'm trying to do is the right thing here. If not, please point me in the right direction.

**What I want to do:**

I'm using JSON to get external map data as well as [angular-google-maps](http://nlaplante.github.io/angular-google-maps/#!/api) to load in data. My JSON has about 100 places, with names, latitudes and longitudes. I want to use Angular to loop through that data and place markers on my map for each place.

**HTML**

```
<body ng-controller="ExampleController">
  <input type="text" ng-model="data.message">
  <li class="places" ng-repeat="place in places">
      <p class="link">{{place.name}}</p>
      <p>{{place.lat}}</p>
      <p>{{place.lng}}</p>

  <div class="google-map" 
    center="centerProperty"
    zoom="zoomProperty" 
    markers="markersProperty"
    latitude="clickedLatitudeProperty"
    longitude="clickedLongitudeProperty"
    mark-click="true"
    draggable="true"
    style="height: 500px; width: 80%; ">
  </div>
</li>

</body> 
```

**Javascript**

```
(function () {
    var module = angular.module("angular-google-maps-example", ["google-maps"]);
}());

function ExampleController ($scope, $http) {
  $http.get('json/map-data.json').success(function(data) {
    $scope.places = data;
  });

    angular.extend($scope, {

        /** the initial center of the map */
        centerProperty: {
            lat: 45,
            lng: -73
        },

        /** the initial zoom level of the map */
        zoomProperty: 8,

        /** list of markers to put in the map */
        markersProperty: [ {
                latitude: 45,
                longitude: -74
            }],

        // These 2 properties will be set when clicking on the map
        clickedLatitudeProperty: null,  
        clickedLongitudeProperty: null,
    });
} 
```

**Why it's not working**

Obviously I'm a little over my head, I'm TRYING to find a way to get `{{place.lat}}` and `{{place.lng}}`into the `markersProperty:` in the Javascript. Can I somehow push these values into the markersProperty array? What's the best way to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:35:02.347

在您的 JavaScript 中，通过 $scope 引用它们：

```
$scope.place.name
$scope.place.lat
$scope.place.lng 
```

# ruby - 找出运行平台 ruby 的最佳实践方法是什么？

> ID：15895047
> 
> 赞同：0
> 
> 时间：2013-04-09T06:43:59.883
> 
> 标签：ruby, cross-platform, multiplatform

我`colored`在终端和红宝石记录器中使用 gem 进行彩色打印。我需要在 linux 和 windows 上运行这段代码。

在 Windows 上，我必须首先`require 'win32console'`，否则彩色打印不起作用（我只看到 ANSI 转义字符）。但是，如果我在 linux 上需要 win32console，它显然会中断。

在红宝石中处理这种情况的通常方法是什么？我注意到了这个`RUBY_PLATFORM`变量，但是在我尝试过的 Windows VM 上它是`"i386-mingw32"`或者一些奇怪的东西。使用那个加上一个条件似乎是一种非常古怪的方式来解决我的需要，所以我希望这个问题有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:53:23.340

使用 RUBY_PLATFORM 没有错，这是它的目的。您也可以询问操作系统本身，对于那些将是

```
ENV['OS'] 
```

这在 Vista 上给出了“Windows_NT”。

不知道其他操作系统的对应对象。

也可以看看：

*   [在 Ruby 中检测操作系统](https://stackoverflow.com/questions/11784109/detecting-operating-systems-in-ruby)

*   [如何找到我的 Ruby 程序在哪个操作系统上运行？](https://stackoverflow.com/questions/170956/how-can-i-find-which-operating-system-my-ruby-program-is-running-on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:07:56.350

总有：

```
begin
  require 'win32console'
rescue LoadError
end 
```

我发现这更容易编写和推理，试图自己决定我在哪个操作系统上以及是否加载它。

**更新：**我在想 win32console 是内置的，而不是 gem。我相信 Win32API 在所有 Windows 安装中都可用，因此它是测试“这是 Windows 吗？”的一个很好的代理。（而不是“这是什么操作系统，那是 Windows 吗？”）。

```
begin
  require 'Win32API'
  windowsOS = true
rescue LoadError
  windowsOS = false
end

if windowsOS
  begin
    require 'win32console'
  rescue LoadError
    # Prompt user to install win32console gem
  end
end 
```

# r - Using gsub to extract character string before white space in R

> ID：15895050
> 
> 赞同：59
> 
> 时间：2013-04-09T06:44:11.143
> 
> 标签：r

I have a list of birthdays that look something like this:

```
dob <- c("9/9/43 12:00 AM/PM", "9/17/88 12:00 AM/PM", "11/21/48 12:00 AM/PM") 
```

I want to just grab the calendar date from this variable (ie drop everything after the first occurrence of white-space).

Here's what I have tried so far:

```
dob.abridged <- substring(dob,1,8)
dob
[1] "9/9/43 1" "9/17/88 " "11/21/48"
dob.abridged <- gsub(" $","", dob.abridged, perl=T)
> dob.abridged
[1] "9/9/43 1" "9/17/88"  "11/21/48" 
```

So my code works for calendar dates of length 6 or 7, but not length 8\. Any pointers on a more effective regex to use with gsub that can handle calendar dates of length 6, 7 or 8?

Thank you.

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-09T06:51:52.757

不需要[substring](http://help.r-enthusiasts.com/library/base/html/substr.html)，只需使用[gsub](http://help.r-enthusiasts.com/library/base/html/grep.html)：

```
gsub( " .*$", "", dob )
# [1] "9/9/43"   "9/17/88"  "11/21/48" 
```

一个空格 ( `)，然后是任意字符 ( `.`) 任意次数 ( `*`)，直到字符串结尾 ( `$`)。请参阅[?regex](http://help.r-enthusiasts.com/library/base/html/regex.html)来学习正则表达式。`

 `* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-09T12:10:13.173

我经常使用`strsplit`这些类型的问题，但喜欢 Romain 的答案是多么简单。我认为将 Romain 的解决方案与`strsplit`答案进行比较会很有趣：

这是一个`strsplit`解决方案：

```
sapply(strsplit(dob, "\\s+"), "[", 1) 
```

使用 microbenchmark 包和`dob <- rep(dob, 1000)`原始数据：

```
Unit: milliseconds
                                    expr       min        lq    median
                   gsub(" .*$", "", dob)  4.228843  4.247969  4.258232
 sapply(strsplit(dob, "\\\\s+"), "[", 1) 14.438241 14.558832 14.634638
        uq       max neval
  4.268029  5.081608  1000
 14.756628 53.344984  1000 
```

Win 7 机器上的明显赢家是`gsub`来自 Romain 的正则表达式。感谢罗曼的回答和解释。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-26T00:41:02.960

该库`stringr`包含针对此问题量身定制的功能。

```
library(stringr)
word(dob,1)
# [1] "9/9/43"   "9/17/88"  "11/21/48" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-03T16:13:54.073

在空格之前从字母中提取字符的另一种方法是：

您必须安装软件包：“stringr”

```
stringr::str_extract(c("juan carlos", "miguel angel"), stringr::regex(pattern = "[a-z]+(?=\\s)", ignore_case = F)) 
```

`[a-z]`: 匹配 a 和 z 之间的每个字符（按 Unicode 代码点顺序）。

`+`: 1 个或更多。

`(?=\\s)`: Lookahead，后跟 \s（即空格）（不匹配 \s）。

更多信息：[https ://stringr.tidyverse.org/articles/regular-expressions.html](https://stringr.tidyverse.org/articles/regular-expressions.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-11T02:44:41.467

另一种仅提取日期的正则表达式模式

```
library(stringr)
str_extract(dob, regex("\\d{1,}\\/\\d{1,}\\/\\d{1,}"))
#[1] "9/9/43"   "9/17/88"  "11/21/48" 
```

*   `\\d{1,}`: 匹配数字至少 1 次
*   `\\/`: 转义正斜杠`

# javascript - How can I call Servlet from d3.json()

> ID：15895052
> 
> 赞同：0
> 
> 时间：2013-04-09T06:44:18.213
> 
> 标签：javascript, json, d3.js

I am using d3 for charting some nodes and links between them. For bringing the data, I used a json name link.json and called it like-

```
d3.json("linked.json", function(error, graph) {} 
```

It works properly.But the data of that json is not dynamic. To make it dynamic I must call a servlet in the place of calling the json.I can't do this.. please anyone help me....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:45:49.510

URL 是一个 URL。只需替换`linked.json`为您要调用的 servlet 的 URL（确保 servlet 返回格式适当的 JSON 响应）。

# php - Finding Win CMD columns (gives result+error)

> ID：15895053
> 
> 赞同：1
> 
> 时间：2013-04-09T06:44:21.743
> 
> 标签：php, windows, cmd, exec, command-line-interface

I have problem with following script:

`$ exec('mode con /status', $tmp); print_r($tmp);`

It runs the command and gives me result, but also I get every time error message too:

`The system cannot find the path specified.`

I just want get terminal window size `$COLS` x `$ROWS`

Used system: PHP 5.4 + Win7

Test results here:

```
`C:\@home\Devel>C:\php\php.exe -v
PHP 5.4.13 (cli) (built: Mar 15 2013 02:05:59)
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies
    with Xdebug v2.2.2, Copyright (c) 2002-2013, by Derick Rethans

C:\@home\Devel>C:\php\php.exe -r "exec('mode con /status', $tmp); print_r($tmp);"
**The system cannot find the path specified.**
Array
(
    [0] =>
    [1] => Status for device CON:
    [2] => ----------------------
    [3] =>     Lines:          1200
    [4] =>     Columns:        160
    [5] =>     Keyboard rate:  31
    [6] =>     Keyboard delay: 0
    [7] =>     Code page:      775
    [8] =>
)` 
```

`How can I get rid of this error message!?!`

 `Thanks.`

# django - Partial text search with postgreql & django

> ID：15895054
> 
> 赞同：2
> 
> 时间：2013-04-09T06:44:24.273
> 
> 标签：django, postgresql, full-text-search

Tried to implement partial text search with postgresql and django,used the following query

```
Entry.objects.filter(headline__contains="search text") 
```

This returns records having exact match,ie suppose checking for a match against the record "welcome to the new world" with query __contains="welcome world" , returns zero records

How can i implement this partial text search with postgresql-8.4 and django?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:01:48.043

如果您想要这种精确的部分搜索，您可以使用**startswitch**字段查找方法：Entry.objects.filter(headline__startswith="search text")。[在https://docs.djangoproject.com/en/dev/ref/models/querysets/#startswith](https://docs.djangoproject.com/en/dev/ref/models/querysets/#startswith)查看更多信息。

此方法创建一个 LIKE 查询（“ *SELECT ... WHERE header LIKE 'search text%'* ”），因此如果您正在寻找全文替代方案，您可以查看 PostgreSQL 内置的[Tsearch2](http://www.postgresql.org/docs/9.1/static/tsearch2.html)扩展或其他选项，例如[Xapian](http://xapian.org/)、[Solr](http://lucene.apache.org/solr/)、[狮身人面像](http://sphinxsearch.com/)等

前面提到的每个引擎都有 Django 应用程序，使它们更易于集成：用于 Xapian 集成的[Djapian或用于在一个应用程序中进行多个集成的](https://code.google.com/p/djapian/)[Haystack](http://haystacksearch.org/)。

# linq - Updating an item using LINQ, not working

> ID：15895056
> 
> 赞同：0
> 
> 时间：2013-04-09T06:44:24.593
> 
> 标签：linq

Good day!

I have this query as shown below:

```
jt.SummarySpecs.Where(
x => true
)
.FirstOrDefault()
.DocSpecs
.Where(
    x => x.DocID == x.DocID
)
.FirstOrDefault()
.FinishingOptionsDesc[0] = option; 
```

But when the code get executed, value for finishingOptionsDesc[0] is not updating...

what's wrong with the query above?

* * *

The classes attributes:

```
"SummarySpecs.cs"
    public DocSpec[] DocSpecs { get; set; }

"DocSpecs.cs"
    public string[] FinishingOptionsDesc { get; set; } 
```

* * *

My only concern is to update the FinishingOptionDesc 1st string.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:03:25.793

该错误意味着某些内容为空。您在一个语句中有 4 个未经检查的地方可能有一个空返回值。如果这些集合为空，则对 FirstOrDefault 的任何调用都可能返回 null。或者 DocSpecs 在返回的对象上可能为 null，或者 FinishingOptionsDesc 可能为 null。

理想情况下，您应该稍微分解一下这个语句并插入空检查。你可以说你知道这些点都不应该*为*空。如果是这种情况，允许发生异常可能是有效的，但可以说，仍然值得拆分语句以更好地报告异常发生的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:50:55.723

尝试这样的事情.. **更新**

```
if(jt.SummarySpecs.Select(a=>a.DocSpecs).Any())
{
    var docSpecs = jt.SummarySpecs.Select(a => a.DocSpecs)
    docSpecs.FinishingOptionsDesc[0] = option;
} 
```

# bitbucket - Get list of pull requests in Repository

> ID：15895060
> 
> 赞同：2
> 
> 时间：2013-04-09T06:44:36.480
> 
> 标签：bitbucket, bitbucket-api

I want to get all pull requests in repository but this seems impossible. I was able to find only pull requests comments ([https://confluence.atlassian.com/display/BITBUCKET/pullrequests+Resource](https://confluence.atlassian.com/display/BITBUCKET/pullrequests+Resource))

How could one use this resource if he cannot get request ids? Is there any way to get pull requests?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T21:00:15.660

新的 API 现已推出，拉取请求列表工作正常

```
https://bitbucket.org/!api/2.0/repositories/YOUR_NAME/REPO_NAME/pullrequests 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:38:31.127

官方是不可能的。但[承诺](https://bitbucket.org/site/master/issue/3442/pullrequest-listing-api-is-necessary-bb#comment-3636265)很快就会修复。

# scala - Scala 延续插件是否支持嵌套移位？

> ID：15895062
> 
> 赞同：6
> 
> 时间：2013-04-09T06:44:49.913
> 
> 标签：scala, haskell, continuations

我正在阅读以下 Shift/Reset 教程：[http](http://www.is.ocha.ac.jp/~asai/cw2011tutorial/main-e.pdf) ://www.is.ocha.ac.jp/~asai/cw2011tutorial/main-e.pdf 。

到目前为止，我在将*OchaCaml*示例转换为 Scala 时取得了不错的结果（一直到第 2.11 节）。但现在我好像碰壁了。Asai/Kiselyov 论文中的代码定义了以下递归函数（我认为这是 OchaCaml）：

```
(* a_normal : term_t => term_t *)
let rec a_normal term = match term with
    Var (x) -> Var (x)
  | Lam (x, t) -> Lam (x, reset (fun () -> a_normal t))
  | App (t1, t2) ->
      shift (fun k ->
        let t = gensym () in (* generate fresh variable *)
        App (Lam (t, (* let expression *)
                  k (Var (t))), (* continue with new variable *)
             App (a_normal t1, a_normal t2))) ;; 
```

该函数应该对 lambda 表达式进行 A 规范化。这是我的 Scala 翻译：

```
// section 2.11
object ShiftReset extends App {

  sealed trait Term
  case class Var(x: String) extends Term
  case class Lam(x: String, t: Term) extends Term
  case class App(t1: Term, t2: Term) extends Term

  val gensym = {
    var i = 0
    () => { i += 1; "t" + i }
  }

  def a_normal(t: Term): Term@cps[Term] = t match {
    case Var(x) => Var(x)
    case Lam(x, t) => Lam(x, reset(a_normal(t)))
    case App(t1, t2) => shift{ (k:Term=>Term) =>
      val t = gensym()
      val u = Lam(t, k(Var(t)))
      val v = App(a_normal(t1), a_normal(t2))
      App(u, v): Term
    }
  }

} 
```

我收到以下编译错误：

```
 found   : ShiftReset.Term @scala.util.continuations.cpsSynth 
             @scala.util.continuations.cpsParam[ShiftReset.Term,ShiftReset.Term]
 required: ShiftReset.Term
    case App(t1, t2) => shift{ (k:Term=>Term) =>
                                              ^
one error found 
```

我认为插件告诉我它无法处理嵌套`shift`......有没有办法让代码编译（我忽略的基本错误或一些解决方法）？我试图将模式匹配转换为 if/else if/else 并引入更多局部变量，但我得到了同样的错误。

[或者，使用 Haskell 和 Cont monad（+此处](http://okmij.org/ftp/continuations/ContExample.hs)的 shift/reset ）我会更幸运，还是嵌套 shift 会有相同类型的限制？我也添加了 Haskell 标签，因为我不介意切换到 Haskell 来完成本教程的其余部分。

**编辑：**感谢詹姆斯发现延续插件无法处理的行以及如何调整它，它现在可以工作了。使用他的答案中的版本和以下格式代码：

```
def format(t: Term): String = t match {
  case Var(x) => s"$x"
  case Lam(x, t) => s"\\$x.${format(t)}"
  case App(Lam(x, t1), t2) => s"let $x = ${format(t2)} in ${format(t1)}"
  case App(Var(x), Var(y)) => s"$x$y"
  case App(Var(x), t2) => s"$x (${format(t2)})"
  case App(t1, t2) => s"(${format(t1)}) (${format(t2)})"
} 
```

我得到了论文提到的输出（尽管我还不知道延续实际上是如何管理它的）：

```
sCombinator:
\x.\y.\z.(xz) (yz)
reset{a_normal(sCombinator)}:
\x.\y.\z.let t1 = xz in let t2 = yz in let t3 = t1t2 in t3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T20:13:49.937

问题是这条线：

```
val v = App(a_normal(t1), a_normal(t2)) 
```

我不确定，但我认为类型推断器对`a_normal`返回 a的事实感到困惑`Term@cps[Term]`，但我们在 a 内部，`shift`因此延续的注释方式不同。

如果将行从`shift`块中拉出，它将编译：

```
def a_normal(t: Term): Term@cps[Term] = t match {
  case Var(x) => Var(x)
  case Lam(x, t) => Lam(x, reset(a_normal(t)))
  case App(t1, t2) =>
    val v = App(a_normal(t1), a_normal(t2))
    shift{ (k:Term=>Term) =>
      val t = gensym()
      val u = Lam(t, k(Var(t)))
      App(u, v): Term
    }
} 
```

一般来说，对于嵌套`shift`的 s，如果每个嵌套延续都具有兼容的类型，您绝对可以这样做：

```
object NestedShifts extends App {

  import scala.util.continuations._

  def foo(x: Int): Int@cps[Unit] = shift { k: (Int => Unit) =>   
    k(x)
  }

  reset {
    val x = foo(1)
    println("x: " + x)

    val y = foo(2)
    println("y: " + y)

    val z = foo(foo(3))
    println("z: " + z)
  }
} 
```

该程序打印到标准输出：

```
x: 1
y: 2
z: 3 
```

# java - glassfish response not getting in gzip compressed

> ID：15895063
> 
> 赞同：1
> 
> 时间：2013-04-09T06:44:54.933
> 
> 标签：java, glassfish, compression, gzip

i am working on java with Netbeans IDE and glassfish 3.1.2 i have created in rest services using jaxrs. when request from client is made ,i need to send json data in compressed format.to do this i have enabled the compression in glassfish as shown the following picture

![enter image description here](https://i.stack.imgur.com/IE9u0.png)

but response got from the server is not compressed using gzip. it is receiving as normal json data. what should i do to overcome this issue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:02:10.860

This is a solution for GF 3.1.2.2.

Responses to HTTP requests in version 1.0 are not compressed. You must send your requests in **HTTP 1.1** to get gzipped responses from your glassfish server.

More over, you must add the header **"Accept-Encoding: gzip"** in your http requests.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:52:31.463

要获得压缩响应，您需要让双方同意使用它。您已将 GlassFish 配置为发送压缩响应。我可以从图片中看出这一点。

您需要确保您对服务的请求告诉 GlassFish 它可以接受压缩响应。您通常通过将以下标头添加到 HTTP 请求来执行此操作：Accept-Encoding。您可以阅读[定义 HTTP 1.1 请求标头的 RFC 文档中的标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。

[您还可以通过阅读有关 Accept-Encoding 的 SO 问题](https://stackoverflow.com/search?q=accept-encoding)获得很多信息。

# ruby-on-rails - 搜索开始日期和结束日期之间的记录以进行洗劫

> ID：15895065
> 
> 赞同：7
> 
> 时间：2013-04-09T06:44:58.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, ransack

嗨，我正在使用 ransack + kalendae_assets gem 来搜索开始日期和结束日期之间的记录，为此我通过引用 [https://github.com/ernie/ransack/blob/master/lib/ransack/constants.rb使用 ransack PREDICATES](https://github.com/ernie/ransack/blob/master/lib/ransack/constants.rb)

这是我的代码

```
<%= search_form_for @search, url: guest_search_rooms_path, html: {:method =>:post} do |f| %>
  <%= f.label :start_date_eq , "Start Date"%>   
  <%= f.text_field :start_date_eq, class: 'release_date' %>     

  <%=f.label :end_date_eq, "End Date" %>   
  <%= f.text_field :end_date_lteq, class: 'release_date' %>     
  <%= f.submit "search" %>
<% end %> 
```

房间控制器

```
def guest_search 

  @search = Room.search(params[:q])
  @roome = @search.result(:distinct => true)
  @room= @roome.where("status IS ?", true).order("room_type_id desc")

  #@room = @search.result(:distinct => true)
 end 
```

但是当我输入开始和结束日期时，它不会搜索我该怎么做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-27T21:22:01.150

使用[https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)，您可以使用以下方法进行日期范围搜索：

```
= search_form_for q, url: orders_path, builder: SimpleForm::FormBuilder do |f|
  = f.input :daterange , input_html: {value: "#{q.date_gteq.to_s} - #{q.date_lteq.to_s}"}
  = f.input :date_gteq, as: :hidden
  = f.input :date_lteq, as: :hidden

:coffee
  $ ->
    $('#q_daterange').daterangepicker
      format: "YYYY-MM-DD"
      startDate: $('#q_date_gteq').val()
      endDate: $('#q_date_lteq').val()
      ranges:
        'This Week': [moment().startOf('week'), moment().endOf('week')],
        'Next Week': [moment().add('week', 1).startOf('week'), moment().add('week', 1).endOf('week')]
    , (start, end, label) ->
      $('#q_date_gteq').val start.format("YYYY-MM-DD")
      $('#q_date_lteq').val end.format("YYYY-MM-DD")
    .on 'apply.daterangepicker', -> $('#order_search').submit() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-29T14:48:39.797

您可以制作自定义谓词。

在我看来，我有一个像

```
= f.text_field :request_date_between, class: 'daterange' 
```

这将向控制器发送一个日期，例如

> '2015-10-01 至 2015-10-31'

然后在我肮脏的 ransack.rb 初始化程序中；

```
Ransack.configure do |config|
  config.add_predicate 'between',
                       arel_predicate: 'between',
                       formatter: proc { |v| v.split(' to ') },
                       type: :string
end

module Arel
  module Predications
    def between other
      gteq(other[0]).and(lt(other[1]))
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-28T11:17:46.640

使`between`谓词识别本地时区，在`ransack.rb`初始化程序中......

```
Ransack.configure do |config|
  config.add_predicate 'between',
                       arel_predicate: 'between',
                       formatter: proc { |v| Range.new(*v.split(' to ').map { |s| Time.zone.parse(s) }) },
                       type: :string
end 
```

无需覆盖`Arel::Predications#between`。

（这仅适用于日期时间列类型。）

# 标题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-13T07:34:11.630

您可以将范围与开始日期和结束日期一起使用。然后你可以得到日期之间的搜索结果。这是您的搜索表单中的示例代码：

```
<div class="control-group">
    <%= f.label :scrap_date_cont, "Scrap Date", class: 'control-label' %>
    <div class="controls">
      <% if q.scrap_date_cont.blank? %>
    <%= f.text_field :scrap_date_cont, include_blank: true, default: nil, :class => 'datepicker3', :style=>"width:100px;" %> 
      <% elsif !q.scrap_date_cont.blank? %>
      <%= f.text_field :scrap_date_cont, :value => "#{change_date_format_for_edit_page(q.scrap_date_cont)}", :class => 'datepicker3', :style=>"width:100px;" %> 
      <% end %>&nbsp;<%= link_to "Select Range", "#", :id => 'dates' %> 

    </div>
  </div>

     <div class="control-group" id="range" style="display:none" >
        <%= f.label :scrap_date_gteq, "Range", class: 'control-label' %>

        <div class="controls">
          <% if q.scrap_date_gteq.blank? %>
          <%= f.text_field :scrap_date_gteq, include_blank: true, default: nil, :class => 'datepicker1', :style=>"width:100px;" %>
          <% elsif !q.scrap_date_gteq.blank? %>
          <%= f.text_field :scrap_date_gteq, :value => "#{change_date_format_for_edit_page(q.scrap_date_gteq)}", :class => 'datepicker1', :style=>"width:100px;" %> 
          <% end %>

           <% if q.scrap_date_lteq.blank? %>
          <%= f.text_field :scrap_date_lteq, include_blank: true, default: nil, :class => 'datepicker2', :style=>"width:100px;"  %>
           <% elsif !q.scrap_date_lteq.blank? %>
           <%= f.text_field :scrap_date_lteq, :value => "#{change_date_format_for_edit_page(q.scrap_date_lteq)}", :class => 'datepicker2', :style=>"width:100px;" %> 
           <% end %>
        </div>
      </div> 
```

这是控制器代码：

```
params[:q][:scrap_date_cont] = change_date_format(params[:q][:scrap_date_cont]) if !(params[:q][:scrap_date_cont]).blank?
    params[:q][:scrap_date_cont] =  params[:q][:scrap_date_cont].to_date.strftime("%d/%Y/%m") if !(params[:q][:scrap_date_cont]).blank?
    params[:q][:scrap_date_gteq] = change_date_format(params[:q][:scrap_date_gteq]) if !(params[:q][:scrap_date_gteq]).blank?
    params[:q][:scrap_date_gteq] =  params[:q][:scrap_date_gteq].to_date.strftime("%d/%Y/%m") if !(params[:q][:scrap_date_gteq]).blank?
       params[:q][:scrap_date_lteq] = change_date_format(params[:q][:scrap_date_lteq]) if !(params[:q][:scrap_date_lteq]).blank?
     params[:q][:scrap_date_lteq] =  params[:q][:scrap_date_lteq].to_date.strftime("%d/%Y/%m") if !(params[:q][:scrap_date_lteq]).blank? 
```

帮助代码：

```
#Change date format in edit time
 def change_date_format_for_edit_page(date)
    new_date = date.strftime("%m/%d/%Y")
    puts new_date.inspect
    return new_date
  end 
```

脚本 ：

```
$("#dates").click(function () {
  var $that = $(this);
  $("#range").toggle("slow", function() {
    $that.toggleClass("toggled-off");
  });
}); 
```

我想它可能会帮助你...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-08T06:49:29.130

就我而言，我确实是这样的：

只需传递一个日期，它将从开始搜索到该日期的结束。

# 初始化程序/ransack.rb

```
Ransack.configure do |config|
  config.add_predicate 'between_begin_and_end',
                   arel_predicate: 'between_begin_and_end',
                   formatter: proc { |v| v.to_date },
                   validator: proc { |v| v.present? },
                   type: :string
end

module Arel
  module Predications
    def between_begin_and_end date
      gteq(date.to_date.beginning_of_day).and(lt(date.end_of_day))
    end
  end
end 
```

# 看法

```
<%= f.text_field :date_field_here_between_begin_and_end, class: 'datepicker', placeholder: 'yyyy/mm/dd' %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-04T13:22:31.870

这是一个带有下拉菜单的解决方案，用于选择日期范围。我们将添加一个`between`谓词并传递一个格式化为字符串的日期时间范围，如下所示：

```
(5.days.ago..5.days.from_now).to_s

=> "2021-05-30 15:21:05 +0200..2021-06-09 15:21:05 +0200" 
```

首先添加一个 Ransack`between`谓词，依赖于原生的`between`Arel 谓词。获取该`formatter`字符串值并将其拆分为`'..'`，将开始/结束日期转换为 DateTime 并构建一个范围。

```
# config/initializers/ransack.rb
Ransack.configure do |config|
  config.add_predicate 'between',
    arel_predicate: 'between',
    formatter: proc { |v| Range.new(*v.split('..').map{ |s| DateTime.parse(s) }) },
    validator: proc { |v| v.present? },
    type: :string
end 
```

在模型或视图模型或助手中，定义选择的选项：

```
# app/helpers/rooms_helper.rb
module RoomsHelper
  def rooms_search_ranges
    now = Time.current
    next_month = 1.month.from_now
    {
      "This month" => now.beginning_of_month..now.end_of_month,
      "Next month" => next_month.beginning_of_month..next_month.end_of_month
    }
  end
end 
```

在你的表单中，假设你的模型有一个`booked_at`属性：

```
<%= search_form_for @search, url: guest_search_rooms_path, html: {:method =>:post} do |f| %>

  <%= f.select :booked_at_between, rooms_search_ranges %>

  <%= f.submit "search" %>
<% end %> 
```

# javascript - 使用 appcelerator 向本地服务器发送 http 请求

> ID：15895067
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:45:05.277
> 
> 标签：javascript, web-services

我正在使用 appcelerator 开发移动应用程序。我的问题是，我无法使用 Android 模拟器调用 REST Web 服务，即服务器在我的本地系统中

我收到“未找到”错误消息，我也在模拟器中使用我的本地 IPV4 地址，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:18:27.843

我认为您需要通过模拟器从本地服务器访问 REST 服务。

因此，如果您使用 localhost 使用 REST 服务，请尝试如下操作。

如果您的网络服务 URL 如下所示，

[http://www.example.com/YOUR_WEB_SERVICE_NAME](http://www.example.com/YOUR_WEB_SERVICE_NAME)

然后将[www.example.com](http://www.example.com)替换为 10.0.2.2，因为您正在从模拟器运行应用程序，因此您必须使用 10.0.2.2 来使用本地服务器。

# unit-testing - 如何使用 TeamCity 的 NUnit 运行程序运行忽略的测试？

> ID：15895073
> 
> 赞同：1
> 
> 时间：2013-04-09T06:45:16.940
> 
> 标签：unit-testing, nunit, teamcity

我想在 TeamCity 的不同构建配置中运行我的解决方案中所有被忽略的测试。我没有在构建步骤配置页面中看到任何明确的原因。

可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:21:50.113

Ignore 属性在这里使用是错误的。它应该用于您根本不想运行的测试。尝试改用[类别](http://www.nunit.org/index.php?p=category&r=2.2.10)。TeamCity 有两个可以在 NUnit 构建步骤中设置的属性。

[NUnit 类别包括和 NUnit 类别排除](http://confluence.jetbrains.com/display/TCD7/NUnit)控制将运行哪些测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:48:39.853

你是如何标记你的测试的 - 你的问题在这一点上不是很清楚？您是否使用了`Explicit`or`Ignored`属性？如果是后者，那么这些测试将根本不会运行。

# php - 如何使用 PHPExcel 上传从 PHP 中消除 excel 上传中的空行？

> ID：15895083
> 
> 赞同：2
> 
> 时间：2013-04-09T06:45:42.110
> 
> 标签：php, spreadsheet

我正在开发中。我想在使用 PHP excel 插件从 PHP 上传 excel 时消除空行。

```
while($x<=$excel->sheets[0]['numRows']){
    $y=1;
    while($y<=$excel->sheets[0]['numCols']){
        $cell = isset($excel->sheets[0]['cells'][$x][$y])
            ? $excel->sheets[0]['cells'][$x][$y] 
            : '';
        if($excel->sheets[0]['cells'][$x][$y] == $excel->sheets[0]['cells'][$x][1] ){
            echo $cell;
        } else { 
            echo $cell; 
        }
        $y++;
    } 
    $x++;
} 
```

我使用此代码将值从 excel 获取到 PHP，但如果 excel 有空记录，则结果将被修改为额外的单元格。我怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:04:36.087

```
if (!array_reduce(
    $excel->sheets[0]['cells'][$x],
    function ($state, $value) {
        return $state && !($value > '');
    },
    TRUE
)) {
// execute your while($y<=$excel->sheets[0]['numCols']) loop here
} 
```

# php - 我的网站上的赌博应用程序出现问题 (PHP)

> ID：15895085
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:45:44.670
> 
> 标签：php, mysql, arrays, post, get

我正在尝试在我的网站上创建一个部分来支持赌博（使用游戏币，而不是 irl）

目标：创建一个简单的Buy Ticket，等待门票全部用完，随机选择获胜者。因此，最终用户可以购买任意数量的门票，最多可购买 8 张可用门票，然后脚本将从购买门票的申请人数中选择获胜者。

当前问题：我的主要问题是 PHP 存储和检索数据时遇到问题。

```
<form action="games.php" method"post" name="add_tickets">
<ul>
<li>
<input type="radio" name="ticket" value="one"><br>
<input type="radio" name="ticket" value="two"><br>
<input type="radio" name="ticket" value="three"><br>
<input type="radio" name="ticket" value="four"><br>
<input type="submit" value="submit">
</li>
</ul>
</form> 
```

所以我为此使用单选按钮。当一个按钮被选中并提交时，它会将数据发布到games.php。

然后在games.php上，我将让我的脚本完成它的工作，当它完成时，它会将用户重定向回表单所在的index.php，并在他选择的单选按钮旁边显示用户名（$username）。

这是games.php代码：注意：这不是所有代码......只是我的主要问题所在的片段

```
if(isset($_POST['add_tickets'])){
$ticket = $_POST['one'];
$ticket = $_POST['two'];
$ticket = $_POST['three'];
$ticket = $_POST['four'];
}

$ticket_owners[] = "$ticket";
print_r($ticket_owners); 
```

我正在尝试将他们购买的票和他们的用户名输入到一个数组中，然后我将运行 rand(array) 来选择获胜者并返回答案。

嗯，我解释清楚了吗？可能不会……我希望我对 PHP 有更多的了解……叹息

任何人都可以对此有所了解......这是错误的方向吗？用不同的方法可以做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:51:30.603

由于您的输入看起来像这样`<input type="radio" name="ticket" value="x">`，您需要检查`$_POST['ticket']`它将具有以下值：无（变量不存在）/一/二/三/四。

你在哪里保存谁买了什么票？您在哪里存储/接收数据，如果您需要帮助，请发布代码并详细说明您想要实现的目标以及您已经尝试过的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:07:55.273

你的代码应该是

```
$ticket = $_POST['ticket']; // this will contain "one", "two", "three", or "four" 
```

消除

```
if(isset($_POST['add_tickets'])){
} 
```

并删除

```
$ticket_owners[] = "$ticket"; 
```

现在，将用户名存储在一个列表中，您稍后将使用该列表从中选择随机获胜者......您将需要一些数据库或缓存。例如，一旦页面呈现并提供给用户，您的数组将不复存在。

# wpf - 无法访问绑定到另一个元素（如 Foreground）中的 DataGridTextColumn 的属性

> ID：15895089
> 
> 赞同：1
> 
> 时间：2013-04-09T06:45:48.387
> 
> 标签：wpf, datagrid, datagridtextcolumn

我有一个简单的 DataGrid，它的 ItemSource 绑定到

```
ObservableCollection<Issue>
```

其中 Issue 只是一个包含各种属性的类对象。我有一些`DataGridTextColumn`项目绑定到 Issue 对象的属性，并且所有项目都按预期工作。

```
Binding="{Binding Path=DueDate, StringFormat=dd-MMM-yyyy}" Header="Due Date" 
```

现在，我想根据该日期是否已过来设置前景的颜色，因此您希望可以这样做：

```
Foreground="{Binding Path=DueDate, Converter={StaticResource DateHasPastColorConverter}}" 
```

在哪里

```
DateHasPastColorConverter 
```

根据过去的日期是否已经过去，返回两种颜色之一。

我的问题是我可以访问主列绑定中的 Issue.DueDate 属性，但它不适用于 Foreground 或任何其他属性。唯一可用的属性是来自实际视图模型本身的属性。

如何访问该行的属性，为什么它们不可用？就像只有绑定成员识别问题属性，而所有其他 bdinginds 仅识别视图模型属性。

# c# - 如何通过反射忽略父接口上的事件来获取类型的事件

> ID：15895091
> 
> 赞同：4
> 
> 时间：2013-04-09T06:45:48.993
> 
> 标签：c#, events, reflection, interface

我有以下代码

```
Type type = ...
var events=type.GetEvents(
    BindingFlags.DeclaredOnly 
    | BindingFlags.Instance 
    | BindingFlags.Public).ToList(); 
```

但是，这也会返回我在父接口上声明的事件。例如

两个都

```
UIElement
ContentElement 
```

实施

```
IInputElement 
```

它定义了事件

```
//
// Summary:
//     Occurs when the mouse pointer moves while the mouse pointer is over the element.
event MouseEventHandler PreviewMouseMove; 
```

但是上面对 GetEvents 的调用以及上面设置的所有绑定标志都会返回接口的事件以及两个具体类。

如何从 GetEvents 中过滤掉父接口上定义的事件？

请注意，我正在为每个事件生成扩展方法，就像这样

```
public static 
IObservable<EventPattern<MouseButtonEventArgs>> 
PreviewMouseLeftButtonDownObserver(this IInputElement This){
        return Observable
               .FromEventPattern
               <MouseButtonEventHandler, MouseButtonEventArgs>
               ( h => This.PreviewMouseLeftButtonDown += h
               , h => This.PreviewMouseLeftButtonDown -= h);
} 
```

所以我只做了事件的根定义，而不是派生的虚拟或接口实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:07:59.097

在示例中：

```
interface IFace
{
    event EventHandler A;
}

class Base
{
    public virtual event EventHandler B;

    public event EventHandler C;
}

class YourType : Base, IFace
{
    public event EventHandler A;          // implements interface

    public override event EventHandler B; // overrides base class implementation

    public event EventHandler D;          // new event
} 
```

如果您使用反射，您想查看哪个事件`typeof(YourType)`？

**回答：**

你可以使用类似的东西：

```
events.Where(x =>
  x.GetAddMethod().GetBaseDefinition().DeclaringType == type
  && !x.GetAddMethod().IsFinal)
  ); 
```

`type`你的问题在哪里。第一个标准确保它不是在父类型上定义的事件。第二个标准确保它不是接口实现。您可能不需要第二个标准，具体取决于您的确切设置。

**编辑回答**

```
events.Where(x =>{ 
   var addMethod = x.GetAddMethod();
   var basetype = addMethod.GetBaseDefinition().DeclaringType;
   return basetype == type && (!addMethod.IsFinal || basetype.IsInterface);
}) 
```

此添加确保我也获得接口。

**替代方法：**

要确定一个成员是否实现了某个接口，可以使用以下方法：

```
var interfaceImplementingMethods = new HashSet<MethodInfo>(type.GetInterfaces()
  .SelectMany(i => type.GetInterfaceMap(i).TargetMethods));
var result = events.Where(x => !interfaceImplementingMethods
  .Contains(x.GetAddMethod())); 
```

即使声明了执行成员`virtual`（或`abstract`），它也应该工作。`GetBaseDefinition()`当然，如果您还想排除继承的成员，则必须结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:29:13.767

您可以尝试使用 linq 过滤掉界面的事件，就像这样......

```
Type type = typeof (Bar);
Type interfaceType = typeof (IFoo);
var interfaceEvents = interfaceType.GetEvents(BindingFlags.DeclaredOnly 
                                              | BindingFlags.Instance 
                                              | BindingFlags.Public);

var events = type.GetEvents(BindingFlags.DeclaredOnly 
                            | BindingFlags.Instance 
                            | BindingFlags.Public);

events = events.Where(e => interfaceEvents.FirstOrDefault(
                ie => ie.Name == e.Name && 
                ie.EventHandlerType == e.EventHandlerType) == null).ToArray(); 
```

**编辑：**
来自基类的事件不应包含在 GetEvents 方法的结果中。这是一个删除该类型实现的所有接口的事件的方法。

**编辑 2：**
此方法还将删除覆盖的基类事件：

```
public IEnumerable<EventInfo> GetEventsEx(Type type)
{
    var baseEvents = new List<EventInfo>();

    // Adds Events of interfaces to baseEvents
    foreach (var interfaceType in type.GetInterfaces())
    {
        baseEvents.AddRange(interfaceType.GetEvents(
            BindingFlags.DeclaredOnly
            | BindingFlags.Instance
            | BindingFlags.Public));
    }

    // Adds Events of base classes to baseEvents
    var baseType = type.BaseType;
    while (baseType != typeof (object))
    {
        baseEvents.AddRange(baseType.GetEvents(
            BindingFlags.DeclaredOnly
            | BindingFlags.Instance
            | BindingFlags.Public));
        baseType = baseType.BaseType;
    }

    // Get events for type
    var events = type.GetEvents(
        BindingFlags.DeclaredOnly
        | BindingFlags.Instance
        | BindingFlags.Public);

    // Remove baseEvents and return
    return events.Where(e => baseEvents.FirstOrDefault(
            ie => ie.Name == e.Name &&
            ie.EventHandlerType == e.EventHandlerType) == null);
} 
```

**编辑3：**删除标志 的新方法`BindingFlags.DeclaredOnly`，这可能会更好一点：

```
public IEnumerable<EventInfo> GetEventsEx(Type type)
{
    var baseEvents = new List<EventInfo>();

    // Adds Events of interfaces to baseEvents
    foreach (var interfaceType in type.GetInterfaces())
    {
        baseEvents.AddRange(interfaceType.GetEvents(
            BindingFlags.Instance
            | BindingFlags.Public));
    }

    // Adds Events of base classes to baseEvents
    var baseType = type.BaseType;
    if (baseType != null && baseType != typeof (object))
    {
        baseEvents.AddRange(baseType.GetEvents(
            BindingFlags.Instance
            | BindingFlags.Public));
    }

    // Get events for type
    var events = type.GetEvents(
        BindingFlags.DeclaredOnly
        | BindingFlags.Instance
        | BindingFlags.Public);

    // Remove baseEvents and return
    return events.Where(e => baseEvents.FirstOrDefault(
            ie => ie.Name == e.Name &&
            ie.EventHandlerType == e.EventHandlerType) == null);
} 
```

# javascript - 按十进制排序数组，然后按字符串排序 - Javascript

> ID：15895093
> 
> 赞同：3
> 
> 时间：2013-04-09T06:46:01.933
> 
> 标签：javascript, arrays, string, sorting

我需要使用普通的旧 Javascript 对这种格式的数组进行排序。

```
var arr = ["0.01 BASIC", "0.01 SEF", "0.015 BASIC"]; 
```

我需要的是先按十进制然后按字符串对数组进行排序并产生如下所示的输出；

```
arr = ["0.01 BASIC", "0.015 BASIC", "0.01 SEF"]; 
```

我不能使用 jquery 来执行排序。只是普通的旧 Javascript。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T06:52:41.510

你可以这样做 ：

```
arr.sort(function(a,b){
   var at = a.split(' '), bt = b.split(' ');
   if (at[1]!=bt[1]) return at[1]>bt[1] ? 1 : -1;
   return parseFloat(at[0])-parseFloat(bt[0]);
}); 
```

如果要对一个非常大的数组进行排序，缓存键可能会更快。但这对于大多数数组来说可能并不重要。

[示例](http://jsbin.com/exikef/1/edit)：

```
["0.01 BASIC", "0.01 SEF", "0.015 BASIC", "0.2 BASIC", "0.001 SEF", "0.2 AAA"]
->
["0.2 AAA", "0.01 BASIC", "0.015 BASIC", "0.2 BASIC", "0.001 SEF", "0.01 SEF"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:55:40.130

两个连续的排序将起作用：

```
arr.sort(function(a,b){
  // sort by words first
  return a.match(/[a-z]+/i).join("")<b.match(/[a-z]+/i).join()?-1:1;
}).sort(function(a,b){
  // sort by numbers next, but only if the words are equal
  return a.match(/[a-z]+/i).join("")!==b.match(/[a-z]+/i).join("")?0:parseInt(a)<parseInt(b)?-1:1;
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:31:16.557

*使用普通的旧 Javascript*：[FIDDLE](http://jsfiddle.net/qjTRE/)

```
 var xOriginal = ["0.01 BASIC", "0.015 BASIC", "0.01 SEF"];
    var xTemp = "";

for(var i=0;i<=xOriginal.length-1;i++)
{
for(var j=1;j<=xOriginal.length-1;j++)
{

 var xArr = xOriginal[i].split(" ");
 var yArr = xOriginal[j].split(" ");

  if((xArr[0] > yArr[0]) && (xArr[1] > yArr[1])) 
            {
               xTemp = xOriginal[i];
               xOriginal[i] = xOriginal[j];
               xOriginal[j] = xTemp;
            }

}
}

alert(xOriginal); 
```

# iphone - DidSelectRowAtIndexPath 中的数组为空

> ID：15895103
> 
> 赞同：0
> 
> 时间：2013-04-09T06:46:33.123
> 
> 标签：iphone, ios, objective-c, uitableview, didselectrowatindexpath

我的 coreDatabase 中有一个实体“Day”。在一个方法中，我从该实体获取数据并将其放入 mutuableArray dayObjects。你可以在这里看到代码。

```
 NSManagedObjectContext *context = [RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext;
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Day"];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"p_date >= %@ and p_date <= %@",dateString,dateString2];
    [fetchRequest setPredicate:predicate];
    NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"p_id" ascending:YES];
    fetchRequest.sortDescriptors = @[descriptor];
    NSArray *matches = [context executeFetchRequest:fetchRequest error:nil];
    NSLog(@"matches = %@",[matches valueForKey:@"p_date"]);
    arrDateObjects = [matches mutableCopy]; 
```

在我的 cellForRow 我这样做

```
 Day *objDay = [arrDateObjects objectAtIndex:indexPath.row-1];
  Cell.titlelabel.text = day.p_from; 
```

在我的表格视图中，数据显示正确。当我在我的`DidSelectRowAtIndexPath`. 我总是得到一个空值`log day.p_from`。

有谁能够帮助我 ？

**编辑** 我的 numberOfSections

```
 (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    int sections = 0;
     sections = 1;

    return sections;
} 
```

我的 numberOfRowsInSection

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int rows = 0;
    rows = 8; //showing 7 days + 1 row for a little title
    return rows;
} 
```

我的 CellForRowAtIndexPath

```
static NSString *simpleTableIdentifier = @"OpeningCell";

OpeningCell *cell = (OpeningCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"OpeningCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

if(indexPath.row == 0){
    cell.lblDay.text = NSLocalizedString(@"lblDag", nil);
    cell.lblFrom.text = NSLocalizedString(@"lblVan", nil);
    cell.lblTill.text = NSLocalizedString(@"lblTot", nil);
}else{
    Day *objDay = [arrDateObjects objectAtIndex:indexPath.row-1];
    NSLog(@"Day object in cell from = %@",objDay.p_from);
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"YYYY-MM-dd"];
    NSDate *date = [dateFormat dateFromString:objDay.p_date];
    NSDateFormatter *dateFormat2 = [[NSDateFormatter alloc] init];
    [dateFormat2 setDateFormat:@"dd/MM"];
    NSString *dateString = [dateFormat2 stringFromDate:date];
    NSLog(@"date: %@", dateString);

    cell.lblShort.text = dateString;
    cell.lblDay.text = [arrDays objectAtIndex:indexPath.row-1];
    NSString *txtFrom = [objDay.p_from substringWithRange:NSMakeRange(0, 5)];
    cell.lblFrom.text = txtFrom;
    NSString *txtTill = [objDay.p_till substringWithRange:NSMakeRange(0, 5)];
    cell.lblTill.text = txtTill;
}
return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:36:58.803

```
//try
arrDateObjects = [NSMutableArray arrayWithArray:matches];
//instead of
arrDateObjects = [matches mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:08:02.677

```
 NSLog(@"matches = %@",[matches valueForKey:@"p_date"]);
    arrDateObjects=[[NSMutableArray alloc]init];
    [arrDateObjects addobject:[matches objectAtindex:indexpath.row-1]]; 
```

代替

```
 NSLog(@"matches = %@",[matches valueForKey:@"p_date"]);
    arrDateObjects = [matches mutableCopy]; 
```

# c# - 在 C# 代码中导入 DLL 函数

> ID：15895112
> 
> 赞同：4
> 
> 时间：2013-04-09T06:47:00.070
> 
> 标签：c#, c++, c, dllimport, extern

我有一个 DLL，我想在我的 c# 代码中使用它的函数这是该 DLL 的函数：

```
extern "C"
{
  __declspec(dllimport)
  const char* __stdcall ZAJsonRequestA(const char *szReq);

  __declspec(dllimport)
  const wchar_t* __stdcall ZAJsonRequestW(const wchar_t *szReq);

  __declspec(dllimport)
  const BSTR __stdcall ZAJsonRequestBSTR(BSTR sReq);
} 
```

谁能告诉我如何在 c# 项目中使用它，因为这个 dll 似乎是其他语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:01:37.583

请查看以下关于代码项目的[文章](http://www.codeproject.com/Articles/27298/Dynamic-Invoke-C-DLL-function-in-C)以获得深入的解释

链接文章中的一个小样本如下所示

要调用函数，请说**methodName**

```
int __declspec(dllexport) methodName(int b)
{
      return b;
} 
```

在c#中包含包含上述方法的类库（MethodNameLibrary.dll）如下图所示

```
class Program
{
   [DllImport(@"c:\MethodNameLibrary.dll")]
   private static extern int methodName(int b);
   static void Main(string[] args)
   {
       Console.WriteLine(methodName(3));
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:51:36.707

使用[DllImport](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.aspx)和[MarshalAs](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute%28v=vs.71%29.aspx)属性。

# iphone - 如何从 iPhone cam 实时获取 FNumber 和 ISOSpeedRatings

> ID：15895113
> 
> 赞同：1
> 
> 时间：2013-04-09T06:47:00.860
> 
> 标签：iphone, objective-c, exif

我需要实时获取相机参数（exif 数据），例如 FNumber、ISOSpeedRatings，而无需拍摄真实照片。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:53:27.670

这是完整的解决方案。不要忘记导入适当的框架和标题。

```
#import <AVFoundation/AVFoundation.h>
#import <ImageIO/CGImageProperties.h>

AVCaptureStillImageOutput *stillImageOutput;
AVCaptureSession *session;    

- (void)viewDidLoad
    {
        [super viewDidLoad];
        [self setupCaptureSession];
        // Do any additional setup after loading the view, typically from a nib.    
    }

    -(void)captureNow{

        AVCaptureConnection *videoConnection = nil;
        for (AVCaptureConnection *connection in stillImageOutput.connections)
        {
            for (AVCaptureInputPort *port in [connection inputPorts])
            {
                if ([[port mediaType] isEqual:AVMediaTypeVideo] )
                {
                    videoConnection = connection;
                    break;
                }
            }
            if (videoConnection) { break; }
        }

        [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection
         completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *__strong error) {
            CFDictionaryRef exifAttachments = CMGetAttachment( imageDataSampleBuffer, kCGImagePropertyExifDictionary, NULL);
            if (exifAttachments)
            {
                // Do something with the attachments.
                NSLog(@"attachements: %@", exifAttachments);
            }
            else
              NSLog(@"no attachments");

            NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
            UIImage *image = [[UIImage alloc] initWithData:imageData];
            }];

    }

    // Create and configure a capture session and start it running
    - (void)setupCaptureSession
    {
        NSError *error = nil;

        // Create the session
        session = [[AVCaptureSession alloc] init];

        // Configure the session to produce lower resolution video frames, if your
        // processing algorithm can cope. We'll specify medium quality for the
        // chosen device.
        session.sessionPreset = AVCaptureSessionPreset352x288;

        // Find a suitable AVCaptureDevice
        AVCaptureDevice *device = [AVCaptureDevice
                                   defaultDeviceWithMediaType:AVMediaTypeVideo];
        [device lockForConfiguration:nil];

        device.whiteBalanceMode = AVCaptureWhiteBalanceModeLocked;
        device.focusMode = AVCaptureFocusModeLocked;
        [device unlockForConfiguration];

        // Create a device input with the device and add it to the session.
        AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device
                                                                            error:&error];
        if (!input) {
            // Handling the error appropriately.
        }
        [session addInput:input];

        stillImageOutput = [AVCaptureStillImageOutput new];
        NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
        [stillImageOutput setOutputSettings:outputSettings];
        if ([session canAddOutput:stillImageOutput])
            [session addOutput:stillImageOutput];

        // Start the session running to start the flow of data
        [session startRunning];
        [self captureNow];

    } 
```

# php - 输入类型单选按钮未定义索引

> ID：15895115
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:47:37.757
> 
> 标签：php, button, indexing, undefined, radio

```
$sel="";
$suc="";
$gend="";
$male="";
$female="";
$selected_radio="";
if(isset($_POST['save']))
{
    $e=0;
    $selected_radio = $_POST['gender'];
    if($selected_radio!="")
    {
      if ($selected_radio == 'male')
      {
        $male = 'checked';
      }
      else if ($selected_radio == 'female')
      {
        $female = 'checked';
      }
    }
    else
    {
      $sel="Select Your Gender";
      $e=1;
    }
    if($e==0)
    {
      $suc="Success";
      $male ="";
      $female ="";
    }
} 
```

在不选择选项/单选按钮的情况下，当我单击“保存”（提交按钮）时，它显示**“未定义索引：性别”**。但是错误消息也出现了*"Select Your Gender"*。当我选择任何一个选项（男/女）时，它会成功出现消息。（*“成功”*）。

所以请帮我找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:51:05.457

```
 $sel="";
    $suc="";
    $gend="";
    $male="";
    $female="";
    $selected_radio="";
    if(isset($_POST['save']) && isset($_POST['gender']))
    {
     $e=0;
     $selected_radio = $_POST['gender'];

      if ($selected_radio == 'male')
      {
       $male = 'checked';
      }
      else if ($selected_radio == 'female')
      {
       $female = 'checked';
      }

   }
    else
    {
    $sel="Select Your Gender";
    $e=1;
    }
    if($e==0)
    {
    $suc="Success";
    $male ="";
    $female ="";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:52:29.090

如果您未选择/选中单选按钮/复选框，则特定值不会在`$_POST`全局数组中传递。

您可以使用[isset](http://php.net/manual/en/function.isset.php)检查是否设置了特定值。`isset($_POST['gender'])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:52:52.730

更改`if(isset($_POST['save']))`
为
`if(isset($_POST['save']) && isset($_POST['gender']))`

# java - 使用 Comparable 接口对 JAVA 进行排序

> ID：15895116
> 
> 赞同：-7
> 
> 时间：2013-04-09T06:47:41.150
> 
> 标签：java, comparable

嗨，例如，我有：

```
string1[0] ="Banana";
string1[1] ="Apple";
string1[2] ="Pineapple";
string1[3] ="Mandarin"; 
```

我想使用可比较的和`compareTo()`方法按字母顺序对它进行排序。所以结果是：

```
String1[0]="Apple";
String1[1]="Banana";
String1[2]="Mandarin";
String1[3]="Pineapple"; 
```

你能告诉我代码的骨架吗？

有没有更好的排序方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:49:42.700

只需使用[`Arrays.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)：

```
Arrays.sort(string1); 
```

[这将按字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)重新排序字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:49:38.600

您可以使用`Arrays.sort(string1);`

[看这里](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)

# c# - 在 ServiceStack 中路由 JSON 字符串

> ID：15895117
> 
> 赞同：2
> 
> 时间：2013-04-09T06:47:44.683
> 
> 标签：c#, asp.net, servicestack

我有一个接受加密 JSON 数据的服务，但我想使用外部服务解密该 JSON 数据，以便我可以传递未加密的数据以由适当的服务处理程序进行序列化和处理。

加密数据的 dto 如下所示：

```
[Route("/encrypted", "POST")]
public Encrypted
{
    public string data { get; set; } // the value stored here is encrypted
} 
```

这是解密数据的示例 dto：

```
[Route("/book", "POST")]
public Book
{
    public string author { get; set; }
} 
```

解密和图书服务如下所示：

```
public class DecryptionService : Service
{
    public string Post(Encrypted request)
    {
         // decrypt request.data and return the decrypted json string
    }
}

public class BookService : Service
{
    public object Post(Book request)
    {
        // return a list of books based on the author
    }
} 
```

在**ServiceStack AppHost 中**，我从请求输入流中读取原始 JSON 数据，然后将其反序列化为 Encrypted 对象，然后调用 EncryptedService 类来解密数据并返回未加密的 JSON 字符串：

```
// this bit is done in a request filter method
Encrypted encDto = JsonSerializer.DeserializeFromString<Encrypted>(reqInputStreamContent);
string jsonResult = new EncryptedService().Post(encDto); 
```

我希望请求进入他们的常规资源路线，例如。*/book*或*/person*等，JSON 请求如下所示：

```
{
    "data":"some encrypted data"
} 
```

然后这些数据被解密并传递给适当的动词处理程序，无论是**Book.Post**还是**Person.Post**等。棘手的部分是在解密之前我不知道普通的 json 请求是什么样的。解密后，我必须确定哪个服务处理程序应该处理请求。

如何将未加密的 json 字符串传递给适当的服务处理程序？我尝试将解密的 json 字符串反序列化为一个对象，然后发布该对象，希望正确的注册消息处理程序能够将其拾取并处理它，但这不起作用。

# c# - Windows Phone 生成 Tile - 似乎无法使其透明

> ID：15895118
> 
> 赞同：1
> 
> 时间：2013-04-09T06:47:48.117
> 
> 标签：c#, windows-phone-8

我正在从我的应用程序中生成一个磁贴，当它显示用作磁贴基础的背景图像时，它失去了透明度（因此它没有拾取主题颜色。

背景图像上有一个图标并且是透明的 - 当我将它用作标准平铺时（即不使用它生成图像）然后它很好并且透明度都很好..

但是当我将它用作背景图像并在其上添加我自己的容器时，它不透明，背景显示为黑色。

相关代码如下：

```
 // [...]
    var container = new Grid(); 

    if (isWide)
    {     
        container = CreateContainerWide(tileInfo);
    }
    else
    {
        container = CreateContainerMedium(tileInfo);
    }

    // Add the background
    container.Background = new ImageBrush
    {
        ImageSource = background,
        Opacity = opacity
    };

    // Force the container to render itself
    container.Arrange(new Rect(0, 0, width, height));

    // Write the image to disk and return the filename
    return WriteShellTileUIElementToDisk(container, baseFileName);
}

static string WriteShellTileUIElementToDisk(UIElement element, string baseFileName)
{
    var wb = new WriteableBitmap(element, null);

    // All content must be in this sub-folder of IsoStore
    string fileName = SharedImagePath + baseFileName + ImageExtension;
    var stream = new IsolatedStorageFileStream(fileName, System.IO.FileMode.Create, Isf);

    // Write the JPEG using the standard tile size
    // Sometimes the bitmap has (0,0) size and this fails for unknown reasons with an argument exception
    if (wb.PixelHeight > 0)
        wb.SaveJpeg(stream, wb.PixelWidth, wb.PixelHeight, 0, JpegQuality);
    else
    {
        Debug.WriteLine("Can't write out file because bitmap had 0,0 size; not sure why");
        // indicate that there is an issue
        fileName = null;
    }

    stream.Close();

    // Return the filename
    return fileName;
} 
```

我将 ImageBrush 的不透明度设置为什么似乎没有任何区别。

如果我使用纯色而不是透明层，那么一切都很好。不知何故，png的创建正在失去透明度。

有任何想法吗？

*   谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:04:28.037

[这个答案](https://stackoverflow.com/a/14026559/2332193)可能会有所帮助。您可以将图像保存为支持透明度的 PNG，而不是保存 JPG。[答案中提到的库](http://toolstack.com/libraries/pngwriter)非常有用。

# java - 如何使用 Java 将 JPEG 图像读入 BufferedImage 对象

> ID：15895121
> 
> 赞同：4
> 
> 时间：2013-04-09T06:47:55.807
> 
> 标签：java, image, jpeg

这不是一个重复的问题，因为我在谷歌和 StackOverflow 中搜索了很长时间的解决方案，但仍然找不到解决方案。

我有这两张图片：

![大图](https://i.stack.imgur.com/6jfMK.jpg)

![较小的图像](https://i.stack.imgur.com/uFjUr.jpg)

这是来自同一网站的两张图片，具有相同的前缀和相同的格式。唯一的区别是大小：第一个较大，而第二个较小。

我将这两个图像下载到本地文件夹并使用 Java 将它们读入 BufferedImage 对象。但是，当我将 BufferedImages 输出到本地文件时，我发现第一个图像几乎是红色的，而第二个是正常的（与原始图像相同）。我的代码有什么问题？

```
byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file
ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));
BufferedImage img = ImageIO.read(iis);
FileOutputStream fos = new FileOutputStream(outputImagePath, false);
ImageIO.write(img, "JPEG", fos);
fos.flush();
fos.close(); 
```

PS：我用 GIMP 打开第一张图片，发现颜色模式是 'sRGB'，没有 alpha 或其他东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T07:31:19.673

这显然是一个已知的错误，我看到了几个建议（[这](https://stackoverflow.com/questions/12963685/java-buffered-image-created-with-red-mask)是一个）建议`Toolkit#createImage`改用，这显然忽略了颜色模型。

我对此进行了测试，它似乎工作正常。

```
public class TestImageIO01 {

    public static void main(String[] args) {
        try {
            Image in = Toolkit.getDefaultToolkit().createImage("C:\\hold\\test\\13652375852388.jpg");

            JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(in)), "Yeah", JOptionPane.INFORMATION_MESSAGE);

            BufferedImage out = new BufferedImage(in.getWidth(null), in.getHeight(null), BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = out.createGraphics();
            g2d.drawImage(in, 0, 0, null);
            g2d.dispose();

            ImageIO.write(out, "jpg", new File("C:\\hold\\test\\Test01.jpg"));
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

nb- 我用`JOptionPane`来验证传入的图像。使用`ImageIO`时带有红色调，`Toolkit`看起来不错。

**更新**

和[解释](http://blog.idrsolutions.com/2009/04/odd-coloured-jpegs-in-java-with-imageio/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:16:07.897

我在netbeans中检查了您的代码并遇到了您的问题，然后我将代码更改如下，没有问题：

```
 public class Test {

    public static void main(String args[]) throws IOException {

        byte[] rawData = getRawBytesFromFile(imageFilePath); // some code to read raw bytes from image file
//        ImageInputStream iis = ImageIO.createImageInputStream(new ByteArrayInputStream(rawData));
//        BufferedImage img = ImageIO.read(iis);
        FileOutputStream fos = new FileOutputStream(outputImagePath, false);
        fos.write(rawData);
//        ImageIO.write(img, "JPEG", fos);
        fos.flush();
        fos.close();
    }

    private static byte[] getRawBytesFromFile(String path) throws FileNotFoundException, IOException {

        byte[] image;
        File file = new File(path);
        image = new byte[(int)file.length()];

        FileInputStream fileInputStream = new FileInputStream(file);
        fileInputStream.read(image);

        return image;
    }
} 
```

请检查并通知我结果；）

祝你好运

# java - 通过本机通信 c++ 和 java

> ID：15895122
> 
> 赞同：-3
> 
> 时间：2013-04-09T06:48:05.533
> 
> 标签：java, java-native-interface, native-code

我想要一个通过 JNI 与 Java 进行 CPP 代码通信的简单示例。因为我找不到任何好的例子来运行和测试它并学习 JNI。虽然我是 JNI 的新手，但我对 Java 有一定的了解。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:08:11.857

这是我作为初学者学到的 JNI 的好教程

[http://www.javamex.com/tutorials/jni/getting_started.shtml](http://www.javamex.com/tutorials/jni/getting_started.shtml)

**或者**

作为初学者，您也可以从 SWIG 开始

SWIG 是一种软件开发工具，它将用 C 和 C++ 编写的程序与各种高级编程语言连接起来。

简而言之，SWIG 是一个编译器，它接受 C 声明并创建从其他语言（包括 Perl、Python、Tcl、Ruby、Guile 和 Java）访问这些声明所需的包装器

[http://www.swig.org/](http://www.swig.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:50:10.793

[这](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/jniTOC.html)是关于 JNI 接口的最流行和最可靠的资源之一，示例从第 2 章开始。

# javascript - 单击文本框后立即将下拉选择的值更新为连字符 (-)

> ID：15895123
> 
> 赞同：0
> 
> 时间：2013-04-09T06:48:11.033
> 
> 标签：javascript, twitter-bootstrap, jquery-mobile, jquery-events

我有一个金额下拉列表，其初始选择值为 10 美元，还有一个金额文本框，项目要求是用户开始在文本框中输入内容，下拉列表值应更改为“-”，并且用户再次单击下拉列表文本框中的值应该是空白的，连字符应该被删除，请建议如何实现这一点。下面是代码（目前没有编写脚本）：

```
<div class="selectContainer ui-grid-a" id="DD2">
    <select class="left" name="card1SelectAmount" data-mini="true" id="giftCardAmount1" 
    style="width: 30%;padding-left: 20px" onclick="dropDownClicked()">
        <option value="10" selected="selected">$10</option>
        <option value="15">$15</option>
        <option value="20">$20</option>
        <option value="25">$25</option>
        <option value="30">$30</option>
        <option value="35">$35</option>
        <option value="40">$40</option>
        <option value="45">$45</option>                  
        <option value="50">$50</option>
        <option value="75">$75</option>
        <option value="100">$100</option>
        <option value="150">$150</option>
        <option value="200">$200</option>
        <option value="250">$250</option>
        <option value="300">$300</option>
        <option value="350">$350</option>
        <option value="400">$400</option>
        <option value="450">$450</option>
        <option value="500">$500</option>
    </select>
</div>
<div class="ui-grid-b">
    <input type="number"  name="card1EnterAmount" id="giftCardAmountInput1"     
    class="right" placeholder="OR - Enter Amount" style="width: 30%;
    padding-right:20px; height: 20%" onmousedown="enterAmt()"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:05:01.877

如果这是您想要的，请看一下小提琴：

[http://jsfiddle.net/ysS2z/5/](http://jsfiddle.net/ysS2z/5/)

**JS**

```
$('#giftCardAmountInput1').on('change keyup', function(){
    if ($('#giftCardAmount1').val() != '-') {
        $('#giftCardAmount1').append('<option selected="selected" value="-">-</option>');
    }
});

$('#giftCardAmount1').on('change', function(){
    $('#giftCardAmountInput1').val('');
    $('#giftCardAmount1').find('option[value="-"]').remove();
}); 
```

# java - 什么是解析的“推送方法”和“拉取方法”？

> ID：15895124
> 
> 赞同：36
> 
> 时间：2013-04-09T06:48:14.593
> 
> 标签：java, xml, saxparser, stax

> 在推送解析方法下，推送解析器在解析文档时生成同步事件，这些事件可以由应用程序使用回调处理程序模型进行处理

*这是在使用 Java 的 Pro XML Development*一书中给出的关于 SAX 2.0 的文本。

至于 StAX，这本书说：

> 在拉取方法下，事件是从使用解析器的应用程序控制下的 XML 文档中拉取的。

我想问一下，突出显示的文字是什么意思？适合初学者的答案表示赞赏:)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-09T06:57:15.353

基本上，推送是解析器对某个处理程序说“我有一个 foo，用它做点什么”。拉动是处理程序对解析器说“给我下一个 foo”。

推：

```
if (myChar == '(')
    handler.handleOpenParen(); // push the open paren to the handler 
```

拉：

```
Token token = parser.next(); // pull the next token from the parser 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-09T06:55:38.530

**Push Parsers** - 事件由 API 以回调函数的形式生成，如 startDocument()、endDocument()，并且不受程序员的控制。我们作为程序员可以处理事件，但事件的产生是无法控制的。

**拉解析器**- 当我们调用某些 API 时会生成事件。示例如下所示。所以我们作为程序员可以决定何时生成事件。

```
 int eventType = xmlr.getEventType();
while(xmlr.hasNext()){
     eventType = xmlr.next();
     //Get all "Book" elements as XMLEvent object
     if(eventType == XMLStreamConstants.START_ELEMENT && 
         xmlr.getLocalName().equals("Book")){
        //get immutable XMLEvent
        StartElement event = getXMLEvent(xmlr).asStartElement();
        System.out.println("EVENT: " + event.toString());
     }
} 
```

, 客户端仅在明确请求时获取（拉取）XML 数据。

通过拉解析，客户端控制应用程序线程，并且可以在需要时调用解析器上的方法。相比之下，通过推送处理，解析器控制应用程序线程，客户端只能接受来自解析器的调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T06:56:02.213

**推送解析：**这是解析器将解析事件推送到应用程序的地方，最有可能使用回调方法。应用程序可以在调用任何解析器方法后进行异步处理，这样如果解析器需要时间，应用程序就不会卡在那个点上。一旦解析完成，解析器会通过其回调事件触发应用程序，以便应用程序可以进一步继续解析结果。

**拉解析：**当应用程序拉数据而不是等待解析事件时。App可以根据自己的需求，一张一张的拉取数据。就像在 StAX 中一样，应用程序反复调用 next() 方法以获取 XML 中的下一个构造。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-17T19:26:41.270

您可以说，在**推送解析**中，解析器启动数据流，而在**拉解析**中，应用程序启动数据流。

因此，**拉解析器**模型非常经济：您的应用程序仅在需要时获取数据。

# .net - 具有自定义要求的 Windows 应用程序的最佳部署工具？

> ID：15895125
> 
> 赞同：1
> 
> 时间：2013-04-09T06:48:15.357
> 
> 标签：.net, winforms, deployment, wix

我正在寻找一种工具来部署 Windows 应用程序。我的要求是我应该能够控制程序文件中文件和文件夹的创建。我需要在安装开始之前添加我的自定义操作并执行它们。

在 Visual Studio 的设置部署工具中，首先安装应用程序，然后运行自定义操作。但我需要能够控制这些步骤。

我目前正在研究[WiX 工具集](http://wixtoolset.org/)。您能否让我知道 WiX 是否可以成为解决方案。如果是，那么我需要做什么来添加我自己的安装步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:50:34.703

是的。Wix 是最适合您的解决方案。它具有安装程序序列，例如**Install UI Sequence**和**Install Execute sequence**。编写您的自定义操作并根据您的要求按此顺序安排它。如果您在安装初始化操作之前安排它，它将在开始安装之前运行。

例如，我安排一个自定义操作在安装开始之前运行。

```
<CustomAction Id="InstallASPNET" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="no" />

 <InstallExecuteSequence>
<Custom Action="InstallASPNET" Before="InstallInitialize">ASPNETREGIIS AND (NOT Installed)</Custom>
  </InstallExecuteSequence> 
```

你需要清楚地了解这个序列。在开始之前，请先阅读一些材料。有很多资源可以学习 Wix。我使用了以下材料。

在线：[http](http://wix.tramontana.co.hu/)
://wix.tramontana.co.hu/ 书籍：[Windows Installer XML 开发人员指南](https://rads.stackoverflow.com/amzn/click/com/1849513724)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:46:36.553

是的，Wix 非常适合您的需求。如果需要，可以在安装文件之前安排自定义操作，Wix 提供了大量内置功能，可以减少您创建自己的自定义操作的需要。

最好的起点是[官方文档](http://wix.sourceforge.net/manual-wix3/main.htm)，如果我是你，我会通读“如何指导”，因为它们是一个非常好的开始。

# spring - 将 HTML 标记处理为 Spring MVC 视图

> ID：15895128
> 
> 赞同：0
> 
> 时间：2013-04-09T06:48:32.703
> 
> 标签：spring, spring-mvc, view

我目前正在努力解决以下问题。在我的 Spring Web 应用程序中，我有不同的内容类型（例如文本、图像或代码）。根据内容类型，我需要以不同的方式显示它：

**文字**：`<p>some text</p>`

**图片**：`<img src="path/to/my.img" />`

**代码** `<pre>some code</pre>`

HTML 标记应连接到实际内容。问题是，如果我只是在我的 Java 类中构建输出文本，我认为 HTML 标记将不会被解析，因此 <p>some text</p> 将被显示。

在我看来，HTML标签是否有可能被解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:08:06.760

如果您有 jquery，请在模型中设置内容类型。将其设置为 HTML。

```
<input type = hidden id = contentType value = "${yourmodel.contentType}" 
```

为您的元素添加跨度

```
<span id = "textspan" style = "display:none"><p>some text</p></span>
<span id = "imgspan><img src="path/to/my.img" /></span>
<span id = "codespan><pre>some code</pre></span> 
```

写一个jQuery

```
 if($("contentType").val() == text){
      $("#textspan").show();
    }else if($("contentType").val() == img){
   $("#imgspan").show();
    }else{
     $("#codespan").show();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:39:11.520

如果问题只是转义部分，请使用：

```
<c:out value="${model.snippets.html12}" escapeXml="false" /> 
```

（我假设您的 HTML 字符串在 model.snippets.html12 中）。

当然，整个想法很糟糕。我不隶属于 MVC Police，但是如果您认为在**控制器**中生成 HTML并将其作为字符串传递到视图中是个好主意，那么使用 MVC 框架有什么意义呢？从我的角度来看，这有点像精神分裂症。

您可以通过在模板内的开关中渲染整个内容来节省很多理智。我的意思是：

```
 <c:choose>

  <c:when test="${thing.type == 'CODE'}">
     <div> some code: ${thing.content} </div>
  </c:when>

  <c:when test="${thing.type == 'IMAGE'}">
     <img src="${thing.src}" alt="${thing.whatever}" />
  </c:when>

  <!-- some other choices -->

  </c:choose> 
```

更好的是，创建一个简单的标记文件，让您可以在任何需要的地方重用逻辑。

或者放弃 MVC - 老实说。

# iphone - 从 iPod 库中获取播放列表 - Objective C

> ID：15895130
> 
> 赞同：0
> 
> 时间：2013-04-09T06:48:38.343
> 
> 标签：iphone, ios, objective-c

我正在构建一个应该导入所有 iPod 库项目的应用程序。我已经完成了所有歌曲的导入，现在我想知道如何从库中导入播放列表和专辑。给我一些建议或示例代码。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:55:24.757

我希望它足以为您提供所有信息，请阅读[此](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html)内容。

如果您正在寻找示例代码，请访问[此](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-music-library-access/)。

它将返回所有专辑，

```
MPMediaQuery *allAlbums = [MPMediaQuery albumsQuery];
NSArray *albumArray = [allAlbums collections]; 
```

# c# - 当 SELECT 查询具有 WHERE 条件时插入到 datagridview

> ID：15895135
> 
> 赞同：0
> 
> 时间：2013-04-09T06:49:11.470
> 
> 标签：c#, datagridview, insert

嗨，我使用此代码在 C# windows 应用程序中使用 datagridview 加载和插入数据到表中。

```
 SqlCommand sCommand;
        SqlDataAdapter sAdapter;
        SqlCommandBuilder sBuilder;
        DataSet sDs;
        DataTable sTable;          
private void form1_Load(object sender, EventArgs e)
            {    
                string connectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Database1.mdf;Integrated Security=True;User Instance=True";
                string sql = "SELECT * FROM mytable";
                SqlConnection connection = new SqlConnection(connectionString);
                connection.Open();
                sCommand = new SqlCommand(sql, connection);
                sAdapter = new SqlDataAdapter(sCommand);
                sBuilder = new SqlCommandBuilder(sAdapter);
                sDs = new DataSet();
                sAdapter.Fill(sDs, "mytable");
                sTable = sDs.Tables["mytable"];
                connection.Close();
                dataGridView1.DataSource = sDs.Tables["mytable"];
                dataGridView1.ReadOnly = true;
                save_btn.Enabled = false;
                dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
            }

            private void new_btn_Click(object sender, EventArgs e)
            {
                dataGridView1.ReadOnly = false;
                save_btn.Enabled = true;
                new_btn.Enabled = false;
                delete_btn.Enabled = false;
            }

            private void delete_btn_Click(object sender, EventArgs e)
            {
                if (MessageBox.Show("Are you sure?", "Delete", MessageBoxButtons.YesNo) == DialogResult.Yes)
                {
                    dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[0].Index);
                    sAdapter.Update(sTable);
                }
            }

            private void save_btn_Click(object sender, EventArgs e)
            {
                sAdapter.Update(sTable);
                dataGridView1.ReadOnly = true;
                save_btn.Enabled = false;
                new_btn.Enabled = true;
                delete_btn.Enabled = true;
            }
        } 
```

没关系并且可以工作，但是当我尝试使用有条件的查询时，不再将行添加到 datagrid 和 mytable

```
sql = "SELECT * FROM mytable where col2 = 1"; 
```

# azure-storage - 可以从 IIS 上托管的 Web 应用程序访问 Azure 表存储吗

> ID：15895141
> 
> 赞同：2
> 
> 时间：2013-04-09T06:49:32.540
> 
> 标签：azure-storage

我有一个托管在 IIS 上的 Web 应用程序。我不想将其创建为 Web 角色。我仍然可以从 IIS 上托管的 Web 应用程序访问 Azure 表存储吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:14:19.240

是的你可以。[只需在NuGet](http://nuget.org/packages/WindowsAzure.Storage/)上获取 Windows Azure 存储包，然后执行以下操作：

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse("UseDevelopmentStorage=true");

// Create the table client
CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

// Create the table if it doesn't exist
string tableName = "people";
tableClient.CreateTableIfNotExist(tableName); 
```

然后做任何你需要做的事情。您可以将*“UseDevelopmentStorage=true”*替换为正确的连接字符串，例如“DefaultEndpointsProtocol=http;AccountName=...;AccountKey=...”。您需要使用上传证书来使用 https 连接。

**只需知道您将为从 Azure 数据中心传出的所有数据付费**。如果您有大量流量，我不建议您使用 Azure 存储作为您网站的主要数据存储解决方案。将应用程序托管在 Web 角色或 Azure 网站中肯定会更好。

# ruby-on-rails - .rvmrc 语法错误

> ID：15895149
> 
> 赞同：0
> 
> 时间：2013-04-09T06:49:57.757
> 
> 标签：ruby-on-rails, shell, rvm, rvmrc

我正在尝试使用其他人制作的网络应用程序。我克隆了那个 repo，当我进入它时， .rvmrc 被执行了。但我收到以下错误：

```
: command not found
: command not found
: command not found
: command not found
-bash: /home/sleepingdragon/Desktop/sharedcab/main-apps/ytaxi-apps/yTaxi/.rvmrc: line 22: syntax error in conditional expression
-bash: /home/sleepingdragon/Desktop/sharedcab/main-apps/ytaxi-apps/yTaxi/.rvmrc:'line 23: syntax error near `]]
-bash: /home/sleepingdragon/Desktop/sharedcab/main-apps/ytaxi-apps/yTaxi/.rvmrc:'line 23: `  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]] 
```

.rvmrc 文件是这样的：

```
#!/usr/bin/env bash

# This is an RVM Project .rvmrc file, used to automatically load the ruby
# development environment upon cd'ing into the directory

# First we specify our desired <ruby>[@<gemset>], the @gemset name is optional,
# Only full ruby name is supported here, for short names use:
#     echo "rvm use 1.9.3" > .rvmrc
environment_id="ruby-1.9.3-p194@ytaxi"

# Uncomment the following lines if you want to verify rvm version per project
# rvmrc_rvm_version="1.14.2 (stable)" # 1.10.1 seams as a safe start
# eval "$(echo ${rvm_version}.${rvmrc_rvm_version} | awk -F. '{print "[[ "$1*65536+$2*256+$3" -ge "$4*65536+$5*256+$6" ]]"}' )" || {
#   echo "This .rvmrc file requires at least RVM ${rvmrc_rvm_version}, aborting loading."
#   return 1
# }

# First we attempt to load the desired environment directly from the environment
# file. This is very fast and efficient compared to running through the entire
# CLI and selector. If you want feedback on which environment was used then
# insert the word 'use' after --create as this triggers verbose mode.
if [[ -d "${rvm_path:-$HOME/.rvm}/environments"
  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]]
then
  \. "${rvm_path:-$HOME/.rvm}/environments/$environment_id"
  [[ -s "${rvm_path:-$HOME/.rvm}/hooks/after_use" ]] &&
    \. "${rvm_path:-$HOME/.rvm}/hooks/after_use" || true
  if [[ $- == *i* ]] # check for interactive shells
  then echo "Using: $(tput setaf 2)$GEM_HOME$(tput sgr0)" # show the user the ruby and gemset they are using in green
  else echo "Using: $GEM_HOME" # don't use colors in non-interactive shells
  fi
else
  # If the environment file has not yet been created, use the RVM CLI to select.
  rvm --create use  "$environment_id" || {
    echo "Failed to create RVM environment '${environment_id}'."
    return 1
  }
fi

# If you use bundler, this might be useful to you:
# if [[ -s Gemfile ]] && {
#   ! builtin command -v bundle >/dev/null ||
#   builtin command -v bundle | GREP_OPTIONS= \grep $rvm_path/bin/bundle >/dev/null
# }
# then
#   printf "%b" "The rubygem 'bundler' is not installed. Installing it now.\n"
#   gem install bundler
# fi
# if [[ -s Gemfile ]] && builtin command -v bundle >/dev/null
# then
#   bundle install | GREP_OPTIONS= \grep -vE '^Using|Your bundle is complete'
# fi 
```

我以前没有使用过 .rvmrc 并且是 Rails 菜鸟。你能帮我找出错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:39:27.120

只需创建`.ruby-version`包含的文件

```
ruby-1.9.3-p194@ytaxi 
```

并删除`.rvmrc`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:08:44.923

您正在使用的最小版本`.rvmrc`也是错误的，您可以修复它：

```
 if [[ -d "${rvm_path:-$HOME/.rvm}/environments" &&
       -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]]
 then 
```

你可以切换到新`.ruby-version`文件：

```
rvm get stable
rvm rvmrc to ruby-version 
```

# php - 如何将输入登录字段中输入的密码与存储在数据库中的 md5 密码进行比较？

> ID：15895152
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:50:04.313
> 
> 标签：php, md5

**更新（已解决）：以前我将密码长度设置为 15 个字符，因为密码被加密为 md5，所以它应该是 32 个字符。现在它工作正常。感谢所有的答案和建议。**

下面是注册php代码。该代码工作正常，能够将密码存储在 md5 的数据库中。

```
 <html>
<?php
error_reporting(0);
if($_POST['submit'])
{
    $name = mysql_real_escape_string($_POST['name']);
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);
    $password1 = mysql_real_escape_string($_POST['password1']);

    $enc_password = md5($password);

    if($name && $username && $password && $password1)
    {
        if(strlen($name)<30)
        {
            if(strlen($username)<10)
            {
                if(strlen($password)<15 || strlen($password)>6)
                {
                    if($password == $password1)
                    {
                        require "dbc.php";
                        $query = mysql_query("INSERT INTO users VALUES ('$name','$username','$enc_password')");     
                        echo "Registration Complete! <a href='index.php'>Click here to login</a>";
                    }
                    else
                    {
                        echo "Passwords must match";
                    }
                }
                else
                {
                    echo "Your password must be between 6 and 15 characters";   
                }
            }
            else
            {
                echo "Your username is too long";   
            }
        }
        else
        {
            echo "Your name is too long";
        }
    }
    else
    { 
        echo "All fields are required"; 
    }
}

?>

    <form action="register.php" method="POST">
        Name: <input type="text" name="name" value="<?php echo "$name"; ?>"> Max Length:30<p>
        Username: <input type="text" name="username" value="<?php echo "$username"; ?>"> Max Length:10<p>
        Password: <input type="password" name="password"> Max length:15<p>
        Re-Enter Password: <input type="password" name="password1"><p>
        <input type="submit" name="submit" value="Register">
    </form>
    <input type="button" value="<< Back to Login Area" onclick="window.location='../login%20and%20registration/members.php'">

</html> 
```

下面是登录php代码。

```
 <?php

session_start();

require "dbc.php";

$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['password']);
$enc_password = md5($password);

if($username&&$password)
{
    $query = mysql_query("SELECT * FROM users WHERE username='$username'");
    $numrow = mysql_num_rows($query);

if($numrow!=0)
{
    while($row = mysql_fetch_assoc($query))
    {
        $db_username = $row['username'];
        $db_password = $row['password'];
    }

    if($username==$db_username&&$password==$db_password)
    {
        //echo "Logged in <a href='members.php'>Click here to enter the members area</a>";
        $_SESSION['username']=$db_username;
        header("location: members.php");
    }
    else 
    {
        header("location: index.php?error=Incorrect Password");
    }
}
else 
{
    header("location: index.php?error=That user doesn't exist");
}
}

else 
{
    header("location: index.php?error=All fields are required");
}

?> 
```

问题是我在尝试登录时不断收到“不正确的密码”。我认为从数据库中检索密码是有问题的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:53:03.247

您需要使用`$enc_password`而不是内联`$password`：

```
if($username==$db_username&&$password==$db_password) 
```

PS 此外，如果您使用 md5 则不要这样做`mysql_real_escape_string()`，`md5`将更改您的字符串并且所有注入都将被删除。

PPS 使用[PDO](http://php.net/manual/en/book.pdo.php)代替`mysql_*`

**更新**

用户名也必须**不区分大小写**，所以最好这样做：

```
if(strcasecmp($username, $db_username)===0 && $password==$db_password) 
```

[strcasecmp](http://php.net/strcasecmp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:53:30.453

改变

```
if($username==$db_username&&$password==$db_password) 
```

至

```
if($username == $db_username && $enc_password == $db_password) 
```

您正在使用`$password`，但应该是`$enc_password`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:53:54.220

您将 $password 与 $db_password 进行比较，而您应该将 $enc_password 与 $db_password 进行比较。

```
if($username==$db_username&&$enc_password==$db_password) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:54:11.517

在你的情况下，你应该像这样比较

```
 $password = md5($password);//change value entered of password to md5

 if($username==$db_username&&$password==$db_password) 
```

# php - 我应该如何链接这些模型以通过 CakePHP 关联查询多表？

> ID：15895156
> 
> 赞同：0
> 
> 时间：2013-04-09T06:50:16.327
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用 cakephp 2.3.2，我需要对多个表进行查询。

我有这个数据库：

```
--------------------------------------------------------------
|    Users     |    Agents     |    Companies    |    Ads    |
--------------------------------------------------------------
|      id      |      id       |       id        |    id     |
|    username  |      name     |     company     |   title   |
|    password  |    lastname   |      sector     |  message  |
|              |     user_id   |     user_id     |  user_id  |
-------------------------------------------------------------- 
```

这些是关联（模型）：

**用户**

*   hasOne 代理
*   有一个公司
*   有很多广告

**代理人**

*   属于用户

**公司**

*   属于用户

**广告**

*   属于用户

（***注意：*** *请记住，当我添加新用户时，该用户可能是代理**或**公司*。）

**问题：**

在我的**AdsController**中，我有一个名为**view**的操作，在那里我读取了从 Route 收到的两个参数：

```
$this->params['id']
$this->params['sector'] 
```

我需要进行查询以检查***id***是否真的与**Ad.id**相关联，以及该***部门***是否与**Company.sector相关联**

我想用**ONE find('first')来检查它，** ***而不是***检查

1.  如果 ID 存在
2.  如果扇区存在并且关联到 user_id

我该怎么做？

*（如果查询找到 Ad.id 和 Company.sector 我需要检索 Ad 和 Company 的所有字段）*

* * *

目前我在 AdsController/view 中的**find('first' ) 是：**

```
$options = array(
    'fields' => array(
        'Ad.*'
    ),
    'contain' => array(
        'User' => array(
            'Company' => array(
                'fields' => array(
                    'Company.*'
                ),
                'conditions' => array(
                    'Company.sector' => $this->params['sector'],
                ),
            )       
        )
    ),
    'conditions' => array(
        'Ad.id' => $this->params['id'],
    )
)

$data = $this->Ad->find('first', $options);
debug($data); 
```

问题是**公司**现在显示在结果（数组）中。

请记住，我只需要检索数组 IF：

*   AD的ID存在
*   公司所属部门存在

如果上述之一不是“真实的”，我想得到一个空数组。

*显然，我在 Ad 模型中添加了 Containable 行为。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:27:34.440

我见过这个，有同样的问题，由于某种原因包含，数组（）结构有点故障，也许它的工作原理是这样的，但我不明白，无论如何要检索链依赖关系我使用这种结构：

```
$options = array(
        'contain' => array(
            'User',
            'User.Company' => array(
                'conditions' => array(
                    'Company.sector' => $this->params['sector'],
                ),
            )                   
        ),
        'conditions' => array(
            'Ad.id' => $this->params['id'],
        )
    ) 
```

但是，您需要记住，包含的条件与主模型的条件不同，因此即使公司部门不存在但具有给定 id 的广告退出，您也不会收到空集。据我所知，如果模型之间没有直接关联，则不能使用条件来排除结果。所以你仍然需要检查是否`$result['User']['Company']`是一个空集。

您的查询数组与您为问题提供的结构不匹配的另一件事是`sector`，您的`Company`表中没有字段

# android - SQLite Android 删除数据库行

> ID：15895157
> 
> 赞同：0
> 
> 时间：2013-04-09T06:50:17.440
> 
> 标签：android, database, sqlite

我想删除 sqlite 数据库中的一行。请参考 sql 数据结构和我当前不起作用的删除方法。

```
 private static final String[] TABLE_MESSAGE_FIELDS = {
        FIELD_USERNAME,     "CHAR(32) NOT NULL",
        FIELD_READED,       "INTEGER(1) NOT NULL",
        FIELD_SEND,         "INTEGER(1) NOT NULL",
        FIELD_TIMESTAMP,    "INTEGER(64) NOT NULL",
        FIELD_CONTENT,      "TEXT NOT NULL",
    };

    //more tables
    private static final String[] TABLE_MESSAGE_INDEXS = {
        FIELD_USERNAME, FIELD_READED,
    }; 
```

就是这样的结构，基本上它是一个即时通讯（IM）安卓应用，所以用户可以发送和接收消息。虽然接收消息等操作正在运行，但删除选项却没有。

我希望删除用户之间的整个对话，换句话说，不是对话中的单个消息，而是整个对话本身。我想正确的方法是找出用户名，然后删除整行。表 TABLE_MESSAGE_FIELDS 包含指示消息的 5 列，我想删除整个对话。

我就是这样做的

```
public boolean deleteMessage(String userName)
{

    SQLiteDatabase database = mLocalDatabase.getWritableDatabase();
    final String[] COLUMNS = { FIELD_TIMESTAMP, FIELD_CONTENT };
    final String SELECTION = FIELD_USERNAME + "=?" ;
    //database.beginTransaction();//do i need this?
    boolean result= database.delete(TABLE_MESSAGE,SELECTION,new String[]{userName})>=0;
    //database.endTransaction();//??
    database.close();
    return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:24:38.030

假设您已正确声明创建查询并且一切正常，您的代码看起来正确，因此未从数据库中删除行的原因可能是您提供了错误的用户名，即数据库中的每一行不等于给定的**userName**。在执行删除操作之前尝试打印您的变量。

然后，你提到了交易。如果你使用它，你需要打电话

```
setTransactionSuccessful() 
```

否则您的更改将被回滚，并且数据库将恢复到事务之前的状态。

```
boolean result = false;
db.beginTransaction();
result = db.delete(TABLE_MESSAGE, SELECTION, new String[] {userName}) > 0;
db.setTransactionSuccessful();
db.endTransaction(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T10:19:45.143

```
public boolean deleteMessage(String userName) {
    boolean result = false;
    if (userName != null && !userName.equals("")) {
        userName = userName.trim();

        SQLiteDatabase database = mLocalDatabase.getWritableDatabase();
        // final String[] COLUMNS = { FIELD_TIMESTAMP, FIELD_CONTENT };
        // final String SELECTION = FIELD_USERNAME + "=?" ;
        // database.beginTransaction();//do i need this?
        String whereCondition = FIELD_USERNAME + "=" + userName;
        result = database.delete(TABLE_MESSAGE, whereCondition, null);
        // database.endTransaction();//??
        database.close();

    }
    return result;

} 
```

# php - 将内容动态添加到 jQuery 手风琴部分

> ID：15895163
> 
> 赞同：0
> 
> 时间：2013-04-09T06:50:35.767
> 
> 标签：php, javascript, jquery, html, accordion

标题可能暗示重复，但问题肯定不是。

如果它是重复的，请通过发布问题的相关链接来关闭它。

现在这里是我的问题的描述->

我创建了一些看起来像这样的 html（这只是非常大代码的一小部分）..

![在此处输入图像描述](https://i.stack.imgur.com/kLx53.png)

Html 内容如下： -

```
<div class="s">
    <div class="bmargin">
        <label for="sip" > Source IPv6 Address </label>
        <input type="text" name="sip" id="sip" required  placeholder="hello" autofocus/>
    </div>

    <div class="bmargin marginl">
        [Default : Link-layer]
    </div>

    <div class="bmargin">
        <label for="dip"> Destination IPv6 Address </label>
        <input type="text" name="dip" id="dip" placeholder="FF02::1"/>
    </div>

    <div class="bmargin marginl">
        [Default : All Node Multicat Address]
    </div>
  </div> 
```

现在我还创建了一个手风琴，当单击高级单选按钮时会显示它：-

![在此处输入图像描述](https://i.stack.imgur.com/7Vb61.png)

Accordion Jquery 代码如下所示：

```
 $(document).ready(function() {
    $("#stack").accordion({ heightStyle:"content", fillspace: true,
                                    icons: {'header': 'ui-icon-plus', 'headerSelected':    
     'ui-icon-minus'},collapsible: true, active:false}); 
```

手风琴内容的 HTML：

```
<div class="advanced" id="stack">

<h3> <a href="#"> Network Interface Layer </a> </h3>
<div class="nlayer">
    This section is reserved for future
</div>

<h3> <a href="#" id="ilayer"> Internet Layer </a></h3>
<div class="ilayer">
<!--    <?php // require 'common_ilayer.html' ?> 
-->
</div>

<h3> <a href="#"> Transport Layer </a></h3>
<div>reserved for future</div>

<h3> <a href="#"> Application Layer </a></h3>
<div>reserved for future</div>

</div> 
```

我需要的是我想显示相同的 html **div class="s"**，它最初显示在点击 Internet 层时**需要出现 'common_ilayer.html' 的 php位置。**

我需要实现的是这样的（如下图所示）..但不创建任何重复节点。首先 php require/include 似乎可以工作，但这确实会创建重复的代码，并且服务器可能会在发布时变得混乱，因为会有两个具有相同 ID 的元素。

![在此处输入图像描述](https://i.stack.imgur.com/i5h4X.png)

我也试过这个 jQuery 代码，但没有帮助

```
 $('#ilayer').live("click",function(){
            $(".s").show();
    }); 
```

注意：请不要建议我为元素添加不同的 ID 并通过 php.ini 包含它们。我希望在工具的基本部分中出现的手风琴 Internet 层部分中的所有字段都显示相同的内容。

任何帮助表示赞赏...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:17:31.370

`#ilayer`在页面加载时留空。

`div.s`单击复选框时移动节点：

```
$('#basic').click(function(){
    var $div = $('div.s');
    $('#basicDialog').append( $div );
});

$('#advanced').click(function(){
    var $div = $('div.s');
    $('#ilayer').append( $div );
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:11:43.867

```
 $('#ilayer').live("click",function(){
       $('.ilayer').html($(".s").html());
 }); 
```

也许我不理解您的问题，但是您想要 .ilayer 内容中的 .s 内容对吗？

# jquery - jQuery hide() 不能正常工作

> ID：15895167
> 
> 赞同：2
> 
> 时间：2013-04-09T06:51:00.857
> 
> 标签：jquery, html, css

亲爱的大家，

我已经面临以下问题一段时间了。请帮帮我！

这是我的代码：

**HTML**

```
<html>

<head>
  <meta charset="utf-8" />

  <!--css stylesheet-->
  <link href="style.css" rel="stylesheet" />

  <!--jQuery external javascript - CDN-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="stylesheet" />

</head>

<body>

  <div class="header"></div>

  <div class="content"><input type="button" id="sendData" value="send your data" align="center"></div>

  <div class="barChart"><input type="button" id="reenterButton" value="Re-enter">     </div>

</body>

</html> 
```

**CSS**

```
.content {
  text-align: center;
  background-color: white;
  width: 650px;
  height: 650px;
  display: inline-block;
  position: relative;
}

.barChart {
  text-align: center;
  background-color: white;
  width: 650px;
  height: 650px;
  display: inline-block;
  position: relative;
  display: none;            // Make .barchart hide initially
} 
```

**Javascript**

```
<script type="text/javascript">
$(document).ready(function() {

  $("#sendData").button()                   
                .click(function() {        
                  $("div.content").hide("slide", {direction: "left"}, "slow", function() {
                    $("div.barChart").show("slide", {direction: "right"}, "slow");
                  });
                 }); 

  $("#reenterButton").button()
                 .click(function() {
                  $("div.barchart").hide("slide", {direction: "right"}, "slow", function() {   
                    $("div.content").show("slide", {direction: "right"}, "slow");
                  });
                 });
});
</script> 
```

#sendData按钮**工作**正常，但在第二个语句（带有选择器（*“div.barchart”*）的*那个*）上单击*#reenterButton***不起作用。**

*******.barchart*在重新输入按钮上应用单击操作后不会隐藏。******

******这种情况和我在css文件中设置的div状态有关吗？或者是其他东西？******

******感谢帮助！******

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:00:04.057

您在第二次点击绑定上有错字，而不是 `$("div.barchart")`应该是`$("div.barChart")`

[小提琴](http://jsfiddle.net/EXyV7/)******

# perl - bash中多列的总和

> ID：15895173
> 
> 赞同：0
> 
> 时间：2013-04-09T06:51:24.083
> 
> 标签：perl, bash, calculated-columns

我在下面有一个 O/p 文件，我正在寻找一个 bash 和 Perl 解决方案：

```
Aggregate               total   used      avail   capacity
aggr0                   100     59       41      41%
aggr1                   200     100      100     50%
aggr2                   300     150     150      50%
aggr3                   400     200      200     50% 
```

我想计算除 Col-1 之外的所有单个列的总和。最终状态应如下所示：

```
Aggregate               total   used      avail   capacity
aggr0                   100     59       41      41%
aggr1                   200     100      100     50%
aggr2                   300     150     150      50%
aggr3                   400     200      200     50%
=========================================================
                        1000   509       460   50.9%  (Used % of all aggr's) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:31:12.747

infile 是其中包含数据的文件

```
perl -ape 'next if $.==1; for my $i (1..4) { $s[$i] += $F[$i]; } END { $s[4]=sprintf("%.2f%%",$s[2]/$s[1]*100); $"="\t";print "total\t\t @s\n";}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:46:09.223

Perl 可能更适合这项任务，但也可以从 bash 完成 :)

```
 tail -n +2 my_op_file.txt | while read n c1 c2 c3 c4;do
        total=$(($total + $c1 ))
        used=$(($used + $c2 ))
        avail=$(($avail + $c3 ))
        capacity=$(($capacity + ${c4%%%}))
        echo $total $used $avail $capacity
    done 
```

# javascript - 是否有用于处理 pdf 文件的良好 Web 应用程序？

> ID：15895174
> 
> 赞同：2
> 
> 时间：2013-04-09T06:51:27.440
> 
> 标签：javascript, jquery, pdf, web-applications

是否有用于处理 PDF 文件的良好 Web 应用程序？例如，将图像拖放到它并保存以供将来参考，然后随时删除丢弃的图像等。我也想将它与我现有的 Web 应用程序集成。

编辑：

这些链接是我在搜索时遇到的。可能对搜索相同内容的人有用。:)

*   [PDF转义](http://www.pdfescape.com/)
*   [鳄鱼](https://crocodoc.com/)
*   A.nnotate.com(a.nnotate.com)
*   GroupDocs 注释（groupdocs.com/apps/annotation）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:53:35.713

Mozilla 有[pdf.js](https://github.com/mozilla/pdf.js/)，它使用 HTML5 呈现 PDF 文件。最近的 Firefox 浏览器的内置 PDF 阅读器中使用了相同的脚本。

这是实验性的，但你可以破解代码并用它做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:01:10.177

如果您只是在寻找一个可以吐出 pdf 文件的在线工具 - [Sejda](http://www.sejda.com/) 也有很多其他在线工具可用

PDF Sharp 将允许您进行所需的各种操作。它是开源的，免费使用。你可以从[这里下载它..](http://www.pdfsharp.com/PDFsharp/index.php?option=com_frontpage&Itemid=1)

功能包括

```
 Creates PDF documents on the fly from any .Net language
 Easy to understand object model to compose documents
 One source code for drawing on a PDF page as well as in a window or on the printer
 Modify, merge, and split existing PDF files
 Images with transparency (color mask, monochrome mask, alpha mask)
 Newly designed from scratch and written entirely in C#
 The graphical classes go well with .Net 
```

# java - java中c++的pwd.h库的等价物

> ID：15895179
> 
> 赞同：0
> 
> 时间：2013-04-09T06:51:44.797
> 
> 标签：java, c++, unix, pwd

我找到了一个[链接](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pwd.h.html)，该链接说明了根据用户的 uid 获取 pwd 的用法。

我在java中有类似的要求，需要以不同的用户身份运行脚本，这需要这个实现。

c++中的代码片段如下：

```
static void su(const char* user)
{
    struct passwd* pwentry=getpwnam(user);
    if(!pwentry)
        COUT<<"su:getpwnam:couldnot get pwd entry for user %s",user;
    uid_t new_uid=pwentry->pw_uid;
    struct passwd* pwentry_nmsadm=getpwnam("nmsadm");
    if(!pwentry_nmsadm)
        cout<<"su:getpwnam:could not get pwd for nmsadm");
    gid_t new_gid=pwentry->pw_gid;
    if(chdir(pwentry->pw_dir)<0)
        cout<<"su:chdir";
    uid_t current_uid=geteuid();
    gid_t current_gid=getegid();
    if(current_gid!=new_gid)
    {
        if(setgid(new_gid)<0)
        cout<<"su:setgid";
    }
    if(current_uid!=new_uid)
    {
        if(setuid(new_uid)<0)
        cout<<"su: setuid";
    } 
```

请提出一些有用的链接（可以使用的库）或解决java中的上述要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:12:22.427

Java 不提供这种开箱即用的功能，因为它既依赖于系统，又会破坏 Java 的安全概念。

一些可能的解决方案可能是：

*   使用 JNI 包装器来调用您的 C++ 方法，这样您就可以在 C++ 中做所有您需要的事情
*   用于`ssh`以其他用户身份启动脚本
*   用于`sudo`以其他用户身份启动脚本

也可以看看

*   [从 Java 以不同用户身份运行 UNIX 命令](https://stackoverflow.com/questions/1012792/running-unix-commands-as-different-user-from-java)
*   [如何在 Windows 上使用另一个用户帐户创建新进程？](https://stackoverflow.com/questions/362198/how-can-i-create-a-new-process-with-another-user-account-on-windows)（特定于 Windows，但一个答案提到了 JNI 方法）

# backbone.js - 使用 backgrid.js 填充 JSON 的主干.js

> ID：15895180
> 
> 赞同：1
> 
> 时间：2013-04-09T06:51:45.663
> 
> 标签：backbone.js, backgrid

我正在使用带有backgrid.js 的backgrid.js。我正在尝试在 backgrid 中填充 JSON（用户列表）。下面是我的JSON，

```
    [{“名称”：“kumnar”，“emailId”：“kumar@xxx.com”，
    “位置”：{“名称”：“ABC Inc.”，“省”：“CA”}
    }]

```

我可以如下访问姓名和电子邮件ID，

```
    var User = Backbone.Model.extend({});
    var User = Backbone.Collection.extend({
        型号：用户，
        url: 'https://localhost:8181/server/rest/user',
    });

    var users = new User();
    变量列 = [{
            名称：“登录ID”，
            标签：“名称”，
            单元格：“字符串”
        }, {
            名称：“电子邮件ID”，
            标签：“电子邮件ID”，
            单元格：“字符串”
        }
    ];

    var grid = new Backgrid.Grid({
        列：列，
        收藏：用户
    });

    $("#grid-result").append(grid.render().$el);
    userEntities.fetch();

```

我的问题是，如何添加用于显示位置名称的列？

我在列的 name 属性中指定了 locations.name 但它不起作用。{ 名称：“locations.name”，标签：“电子邮件 ID”，单元格：“字符串”}

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T17:22:43.567

扩展 Cell（或任何现有的扩展，如 StringCell）真的很容易。这是你的一个开始：

```
var DeepstringCell = Backgrid.DeepstringCell = StringCell.extend({

    render: function () {
        this.$el.empty();
        var modelDepth = this.column.get("name").split(".");
        var lastValue = this.model;
        for (var i = 0;i<modelDepth.length;i++) {
            lastValue = lastValue.get(modelDepth[i]);
        }
        this.$el.text(this.formatter.fromRaw(lastValue));
        this.delegateEvents();
        return this;
    },

}); 
```

在此示例中，您将使用“deepstring”而不是“string”作为列的“cell”属性。如果您想重用内置格式化程序以及深度模型支持，请进一步扩展它以使用不同的格式化程序（如 EmailFormatter）。这就是我所做的，而且效果很好。更好的是覆盖单元定义以查找“。” 在名称值中并将其视为深度模型。

请注意，这仅适用于我使用骨干关系，它从“get”调用返回模型实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T04:31:55.010

目前，backgrid 和 backgrid 都不提供对嵌套模型属性的任何支持，尽管有许多票正在进行中。要正确显示位置信息，您可以将位置对象转换为服务器上的字符串并在 backgrid 中使用字符串单元格，或者您可以尝试为位置列提供自己的[单元格实现](http://backgridjs.com/#api-cell)。

此外，您可以尝试[使用骨干深度模型](https://github.com/powmedia/backbone-deep-model)，因为它似乎支持您正在寻找的路径语法。我以前没有尝试过，但如果它有效，您可以分别创建 2 个字符串列，分别称为`location.name`和`location.province`。

# highstock - Highstock - 在图表前面的 y 轴上画线

> ID：15895182
> 
> 赞同：1
> 
> 时间：2013-04-09T06:51:48.987
> 
> 标签：highstock

在这个例子中[JS Fiddle](http://jsfiddle.net/mr2ha/)。

线出现在图表后面。

是否可以在图表前面画线？

谢谢您的帮助？

**编码：**

```
(function() {
$('#container').highcharts('StockChart', {

    chart: {
    },

    yAxis: {
        plotLines: [{
            value: 0.696,
            width: 5,
            color: 'green',
            dashStyle: 'dash',
            label: {
                text: 'Latest value',
                align: 'right',
                y: 12,
                x: 0
            }
        }]
    },

    rangeSelector: {
        selected: 1
    },

    series: [{
       type: 'area',
        name: 'USD to EUR',
        data: usdeur
    }]
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:00:04.930

尝试使用`plotLine` `zIndex`属性。

[http://api.highcharts.com/highstock#xAxis.plotLines.zIndex](http://api.highcharts.com/highstock#xAxis.plotLines.zIndex)

# ios - iOS 通过 manifest.plist 分发 - 在 url 字符串中使用查询字符串参数？

> ID：15895191
> 
> 赞同：4
> 
> 时间：2013-04-09T06:52:12.130
> 
> 标签：ios, objective-c, plist, manifest, distribution

我的公司推出了我们自己的 iOS 应用分发平台。目前我们的系统使用以下方法运行良好：

```
<dict>
    <key>kind</key>
    <string>software-package</string>
    <key>url</key>
    <string>http://mydomain.com/app.ipa</string>
</dict> 
```

我们在没有安全层的 Amazon S3 上托管我们的 IPA。问题是我想添加一个安全层，这将涉及将查询字符串与 IPA 字符串一起传递以启用下载，如下所示：

```
<dict>
    <key>kind</key>
    <string>software-package</string>
    <key>url</key>
    <string>http://mydomain.com/app.ipa?AWSAccessKeyId=xxxxxx</string>
</dict> 
```

但是，一旦我们将参数添加到 url 字符串，安装将不再起作用（错误是“无法连接到 mydomain.com”）。

直接尝试链接（使用查询字符串）可以正常工作，因此 URL 不是问题。

有人对如何解决此问题/解决方法有任何想法吗？

干杯，杰森

**编辑：**在下面的评论中修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:38:43.750

德普。我似乎已经自己解决了这个问题。对 url 字符串进行编码（在 php 中使用 htmlspecialchars）解决了这个问题（& 等字符需要编码为 &）。

谢谢。

# objective-c - 如何处理多个 SLRequest 以获取 Twitter 中的好友列表？

> ID：15895194
> 
> 赞同：1
> 
> 时间：2013-04-09T06:52:19.710
> 
> 标签：objective-c, multithreading, ios6, twitter

我正在使用以下 twitter api 来获取好友列表： [https](https://api.twitter.com/1.1/friends/list.json) ://api.twitter.com/1.1/friends/list.json ？

并使用 [SLRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) 获取响应数据，并在 performRequestWithHandler 块中执行 UI 更改和模型数据更改。

但是单个请求最多只能检索20个朋友。（如果您将api中的游标参数设置为-1）。

我可以使用api的cursor参数发送请求获取下20个好友，以此类推，直到cursor值为0。 cursor参数可以设置为上一个请求的响应数据中的'next_cursor'参数。

但我不知道如何在前一个请求的 performRequestWithHandler 中调用另一个 SLRequest，直到前一个请求的响应数据中的“next_cursor”值为 0。

谁能告诉我如何使用 SLRequest 或任何其他方式获得所有朋友。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:55:31.003

您可以在收到 twitter 朋友的响应后在请求处理程序中调用下一个请求。

抱歉没有详细说明。我以为你会明白的。这是代码。

```
 ACAccountStore *account = [[ACAccountStore alloc] init];
        ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

        // Request access from the user to access their Twitter account
        [account requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error)
         {
             // Did user allow us access?
             if (granted == YES)
             {
                 // Populate array with all available Twitter accounts
                 NSArray *arrayOfAccounts = [account accountsWithAccountType:accountType];

                 // Sanity check
                 if ([arrayOfAccounts count] > 0)
                 {

                     [self postRequest];

                 }
             }
         }];

- (void)PostRequest
{
       // Keep it simple, use the first account available
                     ACAccount *acct = [arrayOfAccounts objectAtIndex:0];

                     NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
                     [tempDict setValue:@"Posting video" forKey:@"status"];

                     // Build a twitter request

                     SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"https://api.twitter.com/1.1/statuses/update.json"] parameters:tempDict];

                     [postRequest setAccount:acct];

                     [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                         NSLog(@"Twitter response, HTTP response: %i", [urlResponse statusCode]);
                         NSString *output = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
                         NSLog(@"%@", output);
**// calling this again and again will help you with multiple post request.**
[self postRequest]
                     }];
} 
```

朋友列表也可以做类似的事情。

希望我有所帮助。

# kineticjs - kineticjs - 在 groupS 中变换形状

> ID：15895195
> 
> 赞同：0
> 
> 时间：2013-04-09T06:52:21.167
> 
> 标签：kineticjs

我有一个小问题。我的动力学阶段是这样的：

```
Stage -> layer0 -> group0 -> shapes
          layer1 -> group1 -> shapes
          layer2 -> group2 -> shapes 
```

当调用 group0 事件（dragstart、dragmove 等）时，我需要移动 group1 和 group2。我试图做这样的事情：

```
group0.draggable = true;
group0.on('dragstart', function(){
  var a = #save first mouse position point
})
group0.on('dragmove', function(){
  #ref to group1 and group2 is store in group0 and as i debugged in chrome, this object is properly recognize 
  group1.setPosition(my new positions x, y)
  group2.setPosition(...)
}) 
```

换句话说。我需要来自不同层的连接组，并将它们视为一组嵌套的其他 3 个组。我的代码不起作用，是错误还是我忘记了什么？如何做到这一点？控制台没有错误，它只是不起作用，我可以移动 group0 但 group1 和 group2 setPosition 函数没有改变任何东西，尽管它们似乎被正确调用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:30:44.993

我只能推测，因为我面前没有你的代码。

但首先要检查的是您正在重绘图层。

```
group0.on('dragmove', function(){
    #ref to group1 and group2 is store in group0 and as i debugged in chrome, this object is properly recognize 
    group1.setPosition(my new positions x, y)
    group2.setPosition(...)
    group1.getLayer().draw(); //redraw group1 layer
    group2.getLayer().draw(); //redraw group2 layer
    // stage.draw(); // also a possibility
})

//you can also do transitions, which do redrawing for you.
group1.transitionTo({
    duration: 1, //how long the animation takes in seconds
    x: new position x coord
    y: new position y coord
}); 
//repeat for other groups you want moved 
```

另外，重要的是要注意 set position 不会改变其中项目的位置，所以如果你有 shape1 在 100,100 那么它仍然会在组移动后报告在 100, 100，因为位置是相对于将其放入容器中。

# c# - #if DEBUG 在我的 VS 2010 中似乎不起作用

> ID：15895197
> 
> 赞同：3
> 
> 时间：2013-04-09T06:52:29.373
> 
> 标签：c#, .net, visual-studio-2010, debugging

我一直在我的 C# 代码中执行以下操作：

```
#if DEBUG
//Debugger only code
#endif 
```

但是由于某种原因，当我在我的 C# 控制台应用程序（在 VS 2010 中构建为 Windows 服务）中执行相同操作时，它似乎不起作用，并且对于 Release 和 Debug 配置，它看起来`DEBUG`都没有定义。

我是否需要为该预处理器常量设置一些东西才能工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T06:55:03.490

使用“调试”配置时，您必须转到项目的属性 -> 构建并勾选“定义调试常量”框。

要么，要么定义条件编译符号：DEBUG。正如您可以使用任何其他自定义编译符号一样:)

# c# - Rdlc tablix 显示在单页中

> ID：15895198
> 
> 赞同：0
> 
> 时间：2013-04-09T06:52:31.547
> 
> 标签：c#, rdlc, ssrs-tablix

我有一个里面有 tablix 的 rdlc 报告。加载报表时，即使它有数千条记录，它也会以单个方式显示整个 tablix。有什么方法可以将 tablix 分布在多个页面上。

我也尝试了链接[RDLC 分页问题](https://stackoverflow.com/questions/15005696/rdlc-paging-issue)中提到的解决方案，但仍然无法正常工作。

谢谢，

埃朗戈万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:44:15.203

通过取消选中所有父容器控件上的“尽可能在一页上保持在一起”复选框来解决此问题。

# xaml - 如何在 Windows Phone 8 中使用 x:Uid？

> ID：15895199
> 
> 赞同：0
> 
> 时间：2013-04-09T06:52:33.900
> 
> 标签：xaml, windows-8, windows-phone-8

我们可以在 windows-8 中使用 x:Uid 作为

我在哪里`.resw`定义 `mainTitle.Text = "Your Name"`

这样`TextBlock`的文字就变成了`Your Name`。

如何在 windows phone 8 中实现相同的功能？

当我放入`mainTitle.Text`它`.resx`时会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:15:16.077

您必须在 Windows Phone 8 中使用绑定。

实际查看此操作的最简单方法是创建一个新项目并查看 MainPage.xaml。绑定在以下注释中演示

例如：

```
Text="{Binding Path=LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}}" 
```

要本地化某些文本，请绑定包装静态资源文件的 LocalizedStrings 类（使用项目创建）。

```
<TextBlock Text="{Binding Path=LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}}" /> 
```

您的 App.xaml 中已存在 LocalizedStrings 资源

```
<local:LocalizedStrings x:Key="LocalizedStrings"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:16:56.293

您可以在此处使用绑定

```
<TextBlock Text="{Binding Path=LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}}"/> 
```

有关本地化的更多信息，请阅读[如何为 Windows Phone 构建本地化应用程序](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff637520%28v=vs.105%29.aspx)

并了解 x:Uid 阅读[x:Uid 指令](http://msdn.microsoft.com/en-us/library/bb613571.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T14:39:40.483

绑定是一种解决方案，但您只需执行以下操作。如果你有以下 AppBarButton

```
 <AppBarButton 
                Name="AppBarButtonMore" 
                x:Uid="appbar_more_title"
                Click="AppBarButtonMore_Click"/> 
```

将带有密钥的字符串文件添加`appbar_more_title.Label`到您的资源中，您的按钮将将该字符串作为标签属性。这对任何 UI 控件也有效。

# maven - 有没有办法使用 Maven 依赖项查看所有项目？

> ID：15895202
> 
> 赞同：0
> 
> 时间：2013-04-09T06:52:43.057
> 
> 标签：maven

我正在做一个研究项目，我需要找到一些案例研究来测试我的工具。找到此类案例研究的一个好方法是查找所有使用给定 Maven 依赖项的项目。

是否有任何网站可以查询例如“所有项目取决于番石榴”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:30:53.913

[mvnrepository.com](http://mvnrepository.com)还将列出直接依赖于某个工件的工件。

# apache - 如果设置了 AddDefaultCharset，是否需要元字符集？

> ID：15895204
> 
> 赞同：3
> 
> 时间：2013-04-09T06:52:49.223
> 
> 标签：apache, utf-8, character-encoding

当我的文件已经有时，我有什么理由应该保留`<meta charset='utf-8'>`在我的 html 头中？`.htaccess``AddDefaultCharset utf-8`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:06:57.280

仅仅为了在网络上提供文件，它是相当多余的。由于人们可能希望将页面保存到文件并稍后在没有 Web 服务器上下文的情况下打开它，因此使用元标记将信息嵌入到文档本身是一种很好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:06:31.110

这份 W3 文档很好地概述了每种方法的权衡：

[http://www.w3.org/International/questions/qa-html-encoding-declarations](http://www.w3.org/International/questions/qa-html-encoding-declarations)

> 如果文档可能会被转码（即字符编码将由中间服务器更改），则绝对应该使用 HTTP 标头声明，因为 HTTP 声明的优先级高于文档内声明。
> 
> 否则，如果它对任何类型的内容都有意义，则应使用 HTTP 标头，但应结合文档内声明（见下文）。您应该始终确保 HTTP 声明与文档内声明一致。

标签可能仍然适用的一个特定示例`<meta>`是，当特定的用户贡献的内容可能具有不同的字符集时，但用户无权修改您的 Apache 服务器设置以自​​行控制，因此提供控制权是有益的文档中的字符集。

有关更深入的详细信息，请参阅[文档。](http://www.w3.org/International/questions/qa-html-encoding-declarations)

# cucumber - Gherkin 场景应该总是有When步骤吗？

> ID：15895210
> 
> 赞同：11
> 
> 时间：2013-04-09T06:53:06.113
> 
> 标签：cucumber, bdd, gherkin

在 Gherkin 中定义场景时，有时 Given 和 When 步骤之间没有明确的区别，即用户没有与系统进行主动交互，验证的目的是验证系统在特定情况下的外观。

考虑以下：

```
Scenario: Show current balance
Given user is on account page
Then user should see his balance 
```

对比

```
Scenario: Show current balance
When user goes to account page
Then user should see his balance 
```

我不确定我是否会一直使用第二种变体。如果我有多个场景共享上下文“用户在帐户页面上”并且其中一些有额外的用户操作而其他人没有，那么在我看来，将“用户在帐户页面中”作为给定步骤保留应该是有效的即使在某些情况下它可能缺少“何时”。这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T09:18:23.480

从形式上和技术上，Cucumber/SpecFlow 不需要您编写When-step，或者更确切地说 Given/When/Then 只是按照它们在场景中的写入顺序执行。在这方面，您不需要When-step。

但是，正如 Andy Waite 所写，When 步骤显示了您的系统从“设置”采取的操作或事件，以达到您在 Then 步骤中验证的新状态。在这方面，每个测试中都应该出现一个When-step（正如您所写的那样：我们要测试什么）。

这留下了您的最终评论；仅验证设置怎么样（假设系统已启动，那么数据库是干净的，作为一个幼稚的例子）。在这种情况下，可以跳过何时步骤。

因此，与往常一样，它归结为可读性和理解性。编写场景是为了使我们对系统行为的想法具体而清晰。使用优化的形式来理解和学习相关行为。

如果不仔细考虑这一点，我可能会猜测一般建议是始终使用When-step，使事件或行为非常明显和清晰。如果可能，我会回避隐含和隐藏的行为。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T07:32:18.937

一般来说，一个场景由 3 个部分组成：

*   设置（给定）
*   行动（当）
*   验证（当时）

有时不需要设置（或者它是隐式的）。但我想不出任何不需要采取行动和验证的情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T00:21:36.730

同意 Andy + Marcus 的观点，但我有一些可能有用的评论。

1.  Gherkin 功能文件应该作为系统行为的活文档。出于这个原因，场景应该提供足够的细节来向开发人员和其他项目利益相关者（产品所有者、测试人员等）传达体现该功能的业务规则。

    我认为您的问题可能源于在阐述场景时未端到端考虑此业务规则。我不得不问别人这个问题，什么是平衡？因此我觉得你可能需要一个步骤来至少传达这个概念——在用户查看他们的余额之前，他们必须有一个。

    ```
    Scenario: Show current balance
      Given I have a balance
       When I go to my account page
       Then I should see my balance 
    ```

2.  设置系统状态（即任何“给定”步骤）以让您清楚地测试系统是否正常工作是很重要的 - 否则您将如何确定天平实际上是正确的？您可能希望通过指定一些参数来使其更加明确：

    ```
    Scenario: Show current balance
      Given my balance is £10
       When I go to my account page
       Then I should see my balance as £10 
    ```

3.  我不确定您使用的是哪个 BDD 框架，但我使用 Behat，它允许您将多个 Gherkin 步骤映射到一个步骤定义。IE

    ```
    user is on account page
    user goes to account page 
    ```

    都可以映射到将用户导航到页面的步骤定义。系统行为是相同的，区分两者的唯一原因，正如你所拥有的，是让你的场景更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T06:32:28.437

据我了解，当您编写场景时，需要 3 个步骤。

1.  您的应用程序在开始时应处于的状态。
2.  用户必须做什么才能达到某个状态。
3.  用户操作的结果/输入，即场景的终点。

所以场景将是这样的：

```
Given the user is on the profile page
When the user goes to the balance page
Then the user should see their balance 
```

个人资料页面将是用户可以单击按钮或链接以访问其余额的地方。

然后有一个背景：

```
Given the user is logged in
And the user has a balance 
```

# jquery - 添加可使用动态内容关闭的选项卡

> ID：15895219
> 
> 赞同：0
> 
> 时间：2013-04-09T06:53:31.647
> 
> 标签：jquery, tabs, dynamic-data

嗨，我已经问过这个问题了。但我没有得到完美的解决方案。实际上我想添加**动态**的**可关闭标签**。只看这个插件[演示插件](http://www.jeasyui.com/tutorial/layout/tabs2_demo.html)。pl z帮助我非常需要dis。这是我的代码

 **```
 $(document).ready(function(){
    $('ul.url_list > li > a').click(function(){
        var me = $(this);
        var url = me.attr('data');
        var ppr = me.html();
        $('.dynamic_content > iframe').remove();
        $('.dynamic_content').append('<iframe src="' + url + '" width="100%" height="300px"></iframe>');
        $('ul.maintabs') .append('<li><a href="#" data="'+url+'"> ' + ppr + ' </li></li>')
    });
     $('ul.maintabs > li > a').click(function(){
        var re = $(this);
        var vrl = me.attr('data');
             $('.dynamic_content > iframe').remove();
        $('.dynamic_content').append('<iframe src="' + url + '" width="100%" height="300px"></iframe>');
              });
}); 
```**

# php - 如何使用 PHP 和 Ajax 在 SQL 查询中执行多个条件

> ID：15895221
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:53:36.740
> 
> 标签：php, mysql

我在 MySQL 中有数据库，下面列出了 21 个字段

```
Field Name  Data Type       NULL
status      text        No           
roll_no     text        No           
branch_id       int(5)      No           
student_name    text        No           
father_name     text        No           
phone1      text        No           
phone2      text        No           
email       text        No           
dob         date        No           
city        text        No           
course_id       varchar(5)  No           
class_id        int(2)      No           
program     text        No           
duration        text        No           
comment     text        No           
admission_year  int(4)      No           
admission_date  text        No           
entryby     text        No           
address     text        No           
admission_no    int(4)      No
fees        int(6)      No 
```

现在我被搜索过程困住了，我有点困惑，我该如何搜索不同类型的条件/标准

条件组合的几个例子

1.  只有 city=3 的那些记录
2.  只有那些 branch_id=2
3.  只有那些 admission_year='2013'
4.  只有那些 course_id='15'
5.  只有那些 branch_id='2' AND course_id='15'
6.  只有那些 branch_id='2' AND course_id='15' AND city LIKE 'XYZ'
7.  只有admission_year='2012' AND course_id='10' AND duration BETWEEN(2 AND 3)
8.  只有那些 branch_id=2 AND course_id='15' AND student_name LIKE 'XYZ'
9.  只有那些 course_id=7 AND class_id=2 AND Father_name LIKE 'XYZ'

我的 search.php 表单页面已设计，我在这里上传了[表单设计的图像，](http://cbsecsnip.in/searchForm.JPG)但我很困惑如何针对不同情况实现此搜索选项。

请给我一些指导并告诉我解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:59:45.727

这很简单。您可以执行以下操作：

```
$search = "";
if(isset($records_of_city) && $records_of_city != "")
  $search .= "records_of_city = 3 AND";
if(isset($branch_id) && $branch_id != "")
  $search .= "branch_id = 3 AND";

if(isset($admission_year) && $admission_year != "")
  $search .= "admission_year = 3 AND";
// Continue till all search criteria are appended to $search
// And at the end

$query = "SELECT * from tableName where $serach active_status = 'active'" 
```

在查询中，只有那些具有某些值的条件才会被附加，否则将被忽略。另一件事是我们在每个 IF 条件之后添加 AND 运算符，因此您需要在查询末尾添加一个条件（您可以设置条件用户状态、删除状态等），这样查询就不会出现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:57:22.277

这只是简单的 SQL：

```
SELECT * FROM mytable WHERE city="3" AND branch_id=2 AND admission_year=2013 ... 
```

请注意，所有类型的字段都`int`不能有引号（“”）。

# sql-server - 使用或不使用计算列以提高性能和可维护性

> ID：15895222
> 
> 赞同：0
> 
> 时间：2013-04-09T06:53:37.603
> 
> 标签：sql-server, tsql, sql-server-2005, calculated-columns

我有一个表，在 DateTime 列中存储了一个startingDate。

一旦我有了**startingDate**值，我应该计算

*   number_of_days,
*   number_of_weeks
*   number_of_months 和
*   number_of_years

所有从startingDate到当前日期。

如果您打算在应用程序的两个或多个位置使用这些值，并且您非常关心应用程序的响应时间，您宁愿在视图中进行计算还是为每个位置创建计算列以便可以直接查询表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:18:53.710

计算列易于维护，并为您的问题提供了理想的解决方案——我最近使用过这样的解决方案。但是，请注意这些值是在请求时计算的（当它们被 SELECT 时），而不是在将行插入到表中时计算 - 所以性能可能仍然是一个问题。如果您可以将工作从应用程序服务器卸载到数据库服务器，这可能是可以接受的。视图在被请求之前也不存在（除非它们被具体化），因此在运行时也会有开销，但是，它再次位于数据库服务器上，而不是应用程序服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T17:05:06.043

像几乎所有东西一样：这取决于。

正如@RedX 所暗示的那样，无论哪种方式，性能差异都可能不大，因此成为如何使用它们的问题。对我来说，这更像是一种感觉。

多次使用它们并不需要立即将我带到视图或计算列。如果我只在几个地方或少量代码路径中使用它们，我可能会在这些地方内联计算它们或使用 CTE。但是，如果它们被广泛使用或大量使用，我会同意视图或计算列。

如果您希望它们通过 ORM 工具可用，您还希望它们在视图或 cc 中。

我是在地方使用那些“计算列”个体还是在集合中使用它们？如果在集合中使用它们，我可能想要一个显示包含它们的表格的视图。

当我需要它们时，我通常是否希望它们与来自特定其他表的数据相关联？如果是这样，那将提出一个观点。

我是否基于这些计算值的原始表进行更新？如果是这样，那么我希望计算列避免在这些情况下加入视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T15:26:54.763

计算列起初似乎是一个简单的解决方案，但我看到公司遇到了麻烦，因为当他们尝试使用 CDC 进行 ETL 以使用 Attunity 等工具进行实时变更数据捕获时，它不会识别计算列，因为值是不是永久存在的。所以有一些问题。此外，如果用户将多次检索列，从长远来看，您可以通过将该逻辑放入 ETL 工具或过程中并将其写入数据库一次而不是为每个请求计算多次，从而节省时间。

# java - Try-with-resources：我必须抛出或捕获 close() 方法的异常吗？

> ID：15895227
> 
> 赞同：48
> 
> 时间：2013-04-09T06:53:46.303
> 
> 标签：java, exception-handling

如果这是错误的，请纠正我：在 Java 7 的 try-with-resources 语句中，资源的`close()`方法抛出的任何异常都必须声明为由我的方法抛出，或者我必须将整个 try 包装在另一个`try`捕获由`close()`.

如果是这样，我不得不怀疑我是否会充分利用它。我当然不想`throw`抛出异常`close()`，调用者不知道该怎么做。至少对我来说，包装另一个只是为了处理不会看起来很`try`优雅`try`。`close()`

**编辑：** 我想我不小心问了两个问题，其中一个是重复的。

问题 1\. 我是否必须声明我的方法从方法中抛出异常`close()`或将 try-with-resources 包装在另一个 try 中？（建议的副本中没有回答。）

问题2.有没有办法静默关闭资源？（显然是重复的，所以我把这句话排除在外。希望这能让这个问题令人满意地独一无二。）

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-09T07:12:36.083

引用[Java 语言规范 ($14.20.3.2)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3.2)：

> **14.20.3.2 扩展的资源尝试**
> 
> *带有*至少一个 catch 子句和/或 finally 子句的 try-with-resources 语句称为扩展的 try-with-resources 语句。扩展的 try-with-resources 语句的含义：
> 
>     尝试*ResourceSpecification*
>         块
>     *捕获*[*选择*]
>     *最后*[*选择*]
> 
> 通过以下对 嵌套在 *try-catch*或 *try-finally*或 *try-catch-finally语句中的基本**try-with-resources*语句 ( [§14.20.3.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3.1) ) 的翻译给出 ：
> 
>  ***尝试{
>         尝试*资源*
> 规范             块
>     }
>     *捕获*[*选择*]
>     *最终*[*选择*]
> 
> 翻译的效果是将 ResourceSpecification 放在 try 语句的“内部”。这允许扩展的 try-with-resources 语句的 catch 子句捕获由于任何资源的自动初始化或关闭而导致的异常。***

 **所以，基本上，包装器已经实现了

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-09T07:07:34.393

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

> try-with-resources 语句可以像普通的 try 语句一样有 catch 和 finally 块。在 try-with-resources 语句中，**任何 catch 或 finally 块都会在声明的资源关闭后运行**。

（强调我的）

所以你可以简单地做

```
try (BufferedReader br =
               new BufferedReader(new FileReader(path))) {
    return br.readLine();
}
catch (IOException e) {
    // handle the exception that has been thrown by readLine() OR by close().
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-09T07:07:48.277

您不需要将 try-with-resources 包装在另一个 try-catch 块中，只需添加一个 catch 块：

```
class Foo implements AutoCloseable {
    public void close() throws Exception {
        throw new Exception();
    }
}

public class Try {
    public static void main(final String[] args) {
        try(Foo f = new Foo()) {
            System.out.println("No op!");
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T07:08:08.193

您应该能够简单地添加适当的`catch (Exception e) { }`子句。如果您需要对特定的进行特殊处理，或者您可以简单地 catch `Exception`，如果您需要它更广泛。

```
try (Statement stmt = con.createStatement()) {
    ResultSet rs = stmt.executeQuery(query);

    while (rs.next()) {
        String coffeeName = rs.getString("COF_NAME");
        int supplierID = rs.getInt("SUP_ID");
        float price = rs.getFloat("PRICE");

        System.out.println(coffeeName + ", " + supplierID + ", " + 
                           price + ", " + sales + ", " + total);
    }
} catch (Exception e) {
    System.out.println("Exception while trying to through the queries. ", e);
} 
```

由于它是 Java 7，因此您实际上可以在每个 catch 子句中放置多个异常，或者您可以简单地捕获所需的最外层异常。**

# c# - asp.net中的父子层次结构

> ID：15895229
> 
> 赞同：0
> 
> 时间：2013-04-09T06:53:54.027
> 
> 标签：c#, asp.net, self-join, table-per-hierarchy

![在此处输入图像描述](https://i.stack.imgur.com/h7vs6.png)

我想在 asp.net 中显示家庭层次结构。

我有作为 Family 的表，其属性为 ParentID、ChildID、Name。表在 ParentID 和 ChildID 上有 seft 连接。我如何显示数据库中的数据。层次结构级别不固定。

**#已编辑**

我希望aspx 部分显示此层次结构树，即我将如何使用repeater 或其他任何控件在aspx 中显示此树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:20:49.237

您在此处显示的结构就像一棵树。所以最简单的方法是在后端实现 SQL 树。完成后，asp.net 中有一个树形视图控件，您可以使用它在前端显示数据。我能找到的最好的是[这里](http://www.codeproject.com/Articles/140827/Dynamic-Binding-Of-Hierarchy-Data-Structure-To-Tre)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:13:56.703

只需在数据库“Person”、“ParentChild”中创建表。具有列 ID 和名称的“Person”表，具有列 ParentId 和 ChildId 的“ParentChild”。ParentId 和 ChildId 将引用“Person”表中的 Id 列，因此您可以轻松保存层次结构并进行查询。

# wso2 - Wso2 bps 进程无故挂起

> ID：15895231
> 
> 赞同：0
> 
> 时间：2013-04-09T06:53:56.757
> 
> 标签：wso2, bpel

我有一个简单的 bpl 流程，循环中有 3 个调用。其中一个实例在没有任何明显原因的情况下挂起。因此进程处于活动状态，但不再执行。最后记录的活动是调用调用。我搜索数据库并发现请求和响应都存在于表 ode_message 中并且它们看起来正确。但是表 ode_xml_data 中调用的输出变量未填充。从消息到达时开始，bps 中没有日志。有什么方法可以找出发生了什么错误吗？

我正在尝试使用 Wso2 BPS 2.1.2

# php - 如何获得延迟

> ID：15895236
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:54:13.000
> 
> 标签：php, android

我有一个问题，它让我发疯。在我的应用程序中，我需要获取本地标记的值、对服务器的请求的延迟、服务器标记和对应用程序的响应延迟。

我能得到的唯一值是本地标记、服务器标记和一个完整周期的时间（请求+响应）。那么如何获得请求延迟和响应延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:00:37.640

如果您使用 php 执行请求，则可以使用以下内容：

```
<?php
    // start a timer
    $start_time = microtime(true);
    // do some network stuff
    // example is read google.com
    $buffer = file_get_contents('http://www.google.com');
    // echo the current time minus the start time
    echo number_format(microtime(true) - $start_time, 5) . ' seconds'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:19:41.980

```
long sendtime,latncyTime;   
HttpPost httppost = new HttpPost("http://your-url.com");

            List<BasicNameValuePair> nameValuePairs = new ArrayList<BasicNameValuePair>(
                    2);
            nameValuePairs.add(new BasicNameValuePair("username",
                    "ARUN"));
            nameValuePairs.add(new BasicNameValuePair("password",
                    "****"));
            try {
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

sendtime=System.currentTimeMillis();
                HttpResponse response = httpclient.execute(httppost);
                if (response.getStatusLine().getStatusCode() == 200) {
latncyTime=System..currentTimeMillis()-sendtime;

                }

            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();

            } 
```

# php - 如何从一台服务器访问数据库

> ID：15895238
> 
> 赞同：0
> 
> 时间：2013-04-09T06:54:19.930
> 
> 标签：php, jquery, .net, json

我有网站 abc 在线运行在一台服务器上，并且我在 php 中的库库存系统“xyz”在另一台服务器上运行，该服务器具有像 203.215.166.77 这样的静态 IP，我的问题是如何在 php 中从 abc 访问数据库到 xyz

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:05:34.627

**MYSQLI**

```
$mysqli = new mysqli('10.0.0.1', 'user', 'password', 'db', 'port ( imporant for external connection '); 
```

**MYSQL**

```
$link = mysql_connect('10.0.0.1:PORT', 'user', 'password'); 
```

您需要从数据库中为其他服务器打开端口。您可以在防火墙中执行此操作（默认端口为 3306）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:56:26.670

好吧，在我看来，你有两个选择..

选项 1：从服务器 1 到服务器 2 的直接数据库连接。您需要在服务器 2 的 SQL 数据库上允许服务器 1 的 IP 地址。（参见 S. Visser 的代码答案）

选项 2：创建一个 REST API，您可以将其从服务器 1 卷曲到服务器 2。

# c - 在此代码中转换像素

> ID：15895243
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:54:36.267
> 
> 标签：c, bmp, cs50

我似乎在一项小型编程任务中遇到了困难。（请不要告诉我如何解决整个问题；我只想知道如何将每个字节设置为红色）。

我的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <cs50.h>

#include "bmp.h"

int main(int argc, char* argv[])
{
    // ensure proper usage
    //if (argc != 3)
    //{
    //   printf("Usage: copy infile outfile\n");
    //    return 1;
    //}

    // remember filenames
    //char* infile = argv[1];
    //char* outfile = argv[2];
    char* infile = GetString();
    char* outfile = GetString();

    // open input file 
    FILE* inptr = fopen(infile, "r");
    if (inptr == NULL)
    {
        printf("Could not open %s.\n", infile);
        return 2;
    }

    // open output file
    FILE* outptr = fopen(outfile, "w");
    if (outptr == NULL)
    {
        fclose(inptr);
        fprintf(stderr, "Could not create %s.\n", outfile);
        return 3;
    }

    // read infile's BITMAPFILEHEADER
    BITMAPFILEHEADER bf;
    fread(&bf, sizeof(BITMAPFILEHEADER), 1, inptr);

    // read infile's BITMAPINFOHEADER
    BITMAPINFOHEADER bi;
    fread(&bi, sizeof(BITMAPINFOHEADER), 1, inptr);

    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0
    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || 
        bi.biBitCount != 24 || bi.biCompression != 0)
    {
        fclose(outptr);
        fclose(inptr);
        fprintf(stderr, "Unsupported file format.\n");
        return 4;
    }

    // write outfile's BITMAPFILEHEADER
    fwrite(&bf, sizeof(BITMAPFILEHEADER), 1, outptr);

    // write outfile's BITMAPINFOHEADER
    fwrite(&bi, sizeof(BITMAPINFOHEADER), 1, outptr);

    // determine padding for scanlines
    int padding =  (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;

    // iterate over infile's scanlines
    for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)
    {
        // iterate over pixels in scanline
        for (int j = 0; j < bi.biWidth; j++)
        {
            // temporary storage
            RGBTRIPLE triple;

            // read RGB triple from infile
            fread(&triple, sizeof(RGBTRIPLE), 1, inptr);
            triple.rgbtRed = 'ff'
            // write RGB triple to outfile
            fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);
        }

        // skip over padding, if any
        fseek(inptr, padding, SEEK_CUR);

        // then add it back (to demonstrate how)
        for (int k = 0; k < padding; k++)
            fputc(0x00, outptr);
    }

    // close infile
    fclose(inptr);

    // close outfile
    fclose(outptr);

    // that's all folks
    return 0;
} 
```

bmp.h 是

```
#include <stdint.h>

/**
 * Common Data Types 
 *
 * The data types in this section are essentially aliases for C/C++ 
 * primitive data types.
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/cc230309(PROT.10).aspx.
 * See http://en.wikipedia.org/wiki/Stdint.h for more on stdint.h.
 */
typedef uint8_t  BYTE;
typedef uint32_t DWORD;
typedef int32_t  LONG;
typedef uint16_t WORD;

/**
 * BITMAPFILEHEADER
 *
 * The BITMAPFILEHEADER structure contains information about the type, size,
 * and layout of a file that contains a DIB [device-independent bitmap].
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/dd183374(VS.85).aspx.
 */
typedef struct 
{ 
    WORD   bfType; 
    DWORD  bfSize; 
    WORD   bfReserved1; 
    WORD   bfReserved2; 
    DWORD  bfOffBits; 
} __attribute__((__packed__)) 
BITMAPFILEHEADER; 

/**
 * BITMAPINFOHEADER
 *
 * The BITMAPINFOHEADER structure contains information about the 
 * dimensions and color format of a DIB [device-independent bitmap].
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/dd183376(VS.85).aspx.
 */
typedef struct
{
    DWORD  biSize; 
    LONG   biWidth; 
    LONG   biHeight; 
    WORD   biPlanes; 
    WORD   biBitCount; 
    DWORD  biCompression; 
    DWORD  biSizeImage; 
    LONG   biXPelsPerMeter; 
    LONG   biYPelsPerMeter; 
    DWORD  biClrUsed; 
    DWORD  biClrImportant; 
} __attribute__((__packed__))
BITMAPINFOHEADER; 

/**
 * RGBTRIPLE
 *
 * This structure describes a color consisting of relative intensities of
 * red, green, and blue.
 *
 * Adapted from http://msdn.microsoft.com/en-us/library/aa922590.aspx.
 */
typedef struct
{
    BYTE  rgbtBlue;
    BYTE  rgbtGreen;
    BYTE  rgbtRed;
} __attribute__((__packed__))
RGBTRIPLE; 
```

注意：我没有 GetString 的代码，但请假设它会以`char*`.

我遇到的问题是尝试将每个像素的 rgbtRed 值转换为极红色；我不知道该怎么做。请只提供我如何转换 rgbtRed？

更新：拼图

欢迎来到都铎大厦。你的主人，约翰·博迪先生，过早地结束了——他是犯规的受害者。要赢得这场比赛，您必须确定 whodunit。

对您来说很不幸（尽管对 Boddy 先生来说更不幸），您拥有的唯一证据是一个 24 位 BMP 文件，名为线索.bmp，如下图所示，Boddy 先生在他的最后时刻在他的计算机上快速启动了该文件。隐藏在这个文件的红色“噪音”中的是一张 whodunit 的图画。

![在此处输入图像描述](https://i.stack.imgur.com/8nIhS.png)

你很久以前就扔掉了那块儿时的红色塑料，它可以为你解开这个谜团，所以你必须以计算机科学家的身份来攻击它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:58:00.120

删除单引号。`'ff'`是实现定义的（或未定义的）整数，`0xff`是十六进制常量。

该行是问题应该阅读

```
 triple.rgbtRed = 0xff; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T21:54:36.157

要在白色图像上获得漂亮的天蓝色：

```
triple.rgbtBlue = 0xff;

triple.rgbtGreen = 0xff; 
```

如果你想要它的红色刻度：

```
triple.rgbtBlue =  0x00;

triple.rgbtGreen = 0x00; 
```

如果你想要紫色刻度：

```
triple.rgbtBlue = 0xff;

triple.rgbtGreen = 0x00; 
```

# javascript - 定义javascript变量的正确方法？

> ID：15895245
> 
> 赞同：1
> 
> 时间：2013-04-09T06:54:39.463
> 
> 标签：javascript

下面的 JavaScript 代码是否具有正确的变量声明，或任何其他方式来定义它？我可以知道这种变量声明的方法吗？

```
var JQFUNCS = {
  runFunc: {
    "jsonp": {
      run: function (id) {
        var demobox = $('#' + id);
        demobox.html('<img id="loading" src="images/loading.gif" />');
        $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?", {
          tags: "jquery",
          tagmode: "any",
          format: "json"
        }, function (data) {
          demobox.empty();
          $.each(data.items, function (i, item) {
            demobox.append('<a href="' + item.link + '" target="_blank"><img style="max-width:150px;" src="' + item.media.m + '" alt="' + item.title + '" title="' + item.title + '" />');
            if (i == 10) return false;
          });
          $('#' + id + ' #loading').hide();
        });
      },
      reset: function (id) {
        $('#' + id).empty().hide();
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:07:46.817

这种变量声明的方法称为 Object Literal。

```
var objectLiteral = {
   propertyOne: 1,

   functionTwo: function() {
      return 2;
   }
}; 
```

**用途：**非常适合以更传统的方式封装属于一起的数据和功能。防止因重复的变量名称而使全局命名空间混乱。除非您使用对象复制策略，否则仅提供对象的一个​​实例。

您还可以使用函数声明：

```
function funcDeclaration() {
   this.propertyOne = 1;

   this.functionTwo = function() {
      return 2;
   }
}
var obj = new funcDeclaration(); 
```

**用途：**允许实例化对象，非常类似于类。具有对象文字的所有灵活性以及一些灵活性。

这里没有正确或错误的答案。其中一些是情况、惯例或偏好。

哎呀，您甚至可以将两者结合起来，并通过使用自执行功能变得非常棘手（如果您试图模拟可见性修饰符）：

```
var objectLiteral = (function() {
    //currently within a self-executing function, syntax allows this

    var privatePropertyOne = 1;
    function privateFunctionTwo() { //yes, functions can contain other functions
        return 2;
    }

    //the self-executing function returns and object literal that contains references to the privately scoped items defined above.
    return {
        PropertyOne: function() { return privatePropertyOne; },
        FunctionTwo: privateFunctionTwo
    };  
})(); 
```

**用途：**专业且有趣。=P 不一定是可读的，而且肯定会让任何新手 javascript 开发人员大吃一惊。

# c# - 禁用按钮上的“IsEnabled=false”颜色更改？

> ID：15895251
> 
> 赞同：2
> 
> 时间：2013-04-09T06:55:11.637
> 
> 标签：c#, wpf, xaml, button, isenabled

当按钮被禁用时，我想避免按钮的颜色变化。无论是否禁用，按钮颜色应该相同。

使用一种样式，我可以在它被禁用时更改背景颜色：

```
<Style TargetType="{x:Type Button}">
...
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type Button}">
        ...
        <ControlTemplate.Triggers>
         ...
          <Trigger Property="IsEnabled" Value="false">
            <Setter TargetName="Border" Property="Background" Value="#EEEEEE" />
            <Setter TargetName="Border" Property="BorderBrush" Value="#AAAAAA" />
            <Setter Property="Foreground" Value="#888888"/>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

我可以在那里更改背景颜色，但我想让它保持动态，因为背景颜色是数据绑定的，不应该改变。

如果我删除背景设置器，则会执行默认背景颜色更改。

如何禁用颜色更改？或者至少使 Disabled-Background-Color 数据绑定？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:00:50.903

如果您想让它成为数据绑定最合适的地方，imo 将在控件的相关[DataTmplate](http://wpftutorial.net/DataTemplates.html)中声明它，您可以在其中指定`Style`（已由您定义）和应用于控件的*数据。*

在那里，您可以在您的状态和您希望出现在按钮上的相对颜色之间定义一个[转换器。](http://wpftutorial.net/ValueConverters.html)

**或者**

如果您想将自己限制在 中`Style`，您可以在其内部定义一个数据绑定`Style`。海事组织不是很合乎逻辑，但这**是**可能的。

看看这个答案：

[通过 WPF 中的 MVVM 模式更改按钮背景颜色](https://stackoverflow.com/questions/7329812/change-button-background-color-through-mvvm-pattern-in-wpf)

# c# - 使用c#在mysql表的单列中插入逗号分隔值

> ID：15895255
> 
> 赞同：0
> 
> 时间：2013-04-09T06:55:24.313
> 
> 标签：c#, mysql

我有很多字段，其中包含逗号分隔值。我必须将它们插入我的 MySql 表中

```
homeToSchool[0] = "Name";
homeToSchool[1] = "Mumbai, 400080, India";
homeToSchool[2] = "Malad, MG";

var cmdText ="INSERT INTO schoolschedule(Name, From, To) VALUES (@Name, @From, @To)";
cmd.Parameters.AddWithValue("@Name", homeToSchool[0]);
cmd.Parameters.AddWithValue("@From", homeToSchool[1]);
cmd.Parameters.AddWithValue("@To", homeToSchool[2]);
connection.Open();
cmd.ExecuteNonQuery(); 
```

由于逗号分隔值，我收到错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:56:40.877

我敢打赌，错误信息是这样的：

> *“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 'From, To) VALUES 附近使用的正确语法。”*

其实问题不在于价值。它在您使用的列名上，并且您没有逃脱导致语法错误。

`FROM`并且`TO`是保留关键字。如果您用反引号将它们包装起来，它们仍然可以使用。

```
INSERT INTO schoolschedule(Name, `From`, `To`) VALUES (@Name, @From, @To) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有机会更改表，请更改不是保留关键字的列名。这将避免您在将来遇到问题。

# spring - 是 注释 @Resource 、 @PostConstruct 和 @PreDestroy 有必要吗？

> ID：15895258
> 
> 赞同：0
> 
> 时间：2013-04-09T06:55:34.063
> 
> 标签：spring

我是春天的新手，我想知道如果我在任何类的任何方法上编写 @Resource 或 @PostConstruct 或 @PreDestroy 注释，那么有必要在 xml 文件中添加“context：annotation-config”标签来注册方法.

我的困惑是@Resource 或@PostConstruct 或@PreDestroy 是JSR-250 注释，它不是特定于spring-framework 的，那么为什么在配置文件（spring.xml）中添加了“context：annotation-config”标签。

我知道它适用于 @Required 和 @Autowired 注释。

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:05:01.277

事情是这样的，不管注释是什么，实际上它什么都不做，它只是一种标记，告诉对方它的含义。当你`context: annotation-config`在你的xml文件中添加时，当你启动tomcat或其他将加载Spring的环境时，当它找到时`context: annotation-config`，它将注册一些Spring已经实现的bean，这些bean将扫描你的类以查找注释@Resource或@PostConstruct 或者@PreDestroy，然后做它实际会做的事情，比如实例化Bean，绑定值等等。

# html - SVG 在 Firefox 中的呈现方式不同

> ID：15895263
> 
> 赞同：2
> 
> 时间：2013-04-09T06:55:44.703
> 
> 标签：html, google-chrome, firefox, svg

我正在努力`SVG`渲染图表。 [单击此处查看我的 SVG 图表](http://jsfiddle.net/7MrhC/1/)

当我们查看此图表时，`Google chrome`或者`Internet Explorer`我们按预期获得两组。但是当我们在 上渲染它时`Mozilla Firefox`，只有第一组被渲染。
我无法追查到这一点。请帮助我
谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:45:22.437

你的问题是没有设置有用的宽度和高度`<svg>`，也没有视图框。结果是它最终变成了 150px 高 x 300px 宽（CSS 中默认的替换元素大小），并剪掉了除此之外的所有内容。至少在实际上遵循 SVG 规范的浏览器中会发生这种情况，而 IE 和 Chrome 则不是。

# android - Corona 会生成原生代码吗？

> ID：15895264
> 
> 赞同：0
> 
> 时间：2013-04-09T06:55:46.233
> 
> 标签：android, iphone, coronasdk

corona 是否会为 iPhone 和 Android 生成本机代码，或者它会解释 Lua 代码。谁能详细告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T13:45:50.483

Corona Labs 的部分[常见问题解答](http://www.coronalabs.com/resources/frequently-asked-questions/)指出：

> “Lua 脚本被预编译成字节码”

这意味着它**不是**本机代码，而是 Lua 脚本的某种优化版本，可以由嵌入式 Lua 解释器执行。

也就是说，大部分魔法都发生在 Lua 脚本之下。Lua 是 C 核心之上的脚本层。我的猜测是，对于所有可用的平台，都开发了这个核心的特定版本。因此，您的应用程序的基础是由本机代码驱动的，但您自己编写的应用程序逻辑不是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T08:43:43.340

从它的[常见问题解答](http://www.coronalabs.com/resources/frequently-asked-questions/)：

> Corona 客户端需要 Internet 连接才能构建，因为部分构建过程发生在 Corona Labs 服务器上。Lua 脚本在发送到我们的服务器之前被预编译成字节码（去除注释、调试信息等）。服务器将此数据嵌入到 Corona 引擎中，但从不保存或归档它。在线构建过程结束时，您将拥有一个 .app 包或 .apk 文件，就像您自己使用 iOS 或 Android SDK 时一样。

# php - 使用 PHPExcel 导出到 xlsx

> ID：15895266
> 
> 赞同：12
> 
> 时间：2013-04-09T06:56:00.517
> 
> 标签：php, phpexcel

我正在使用 PHPEXxcel 导出使用 MYSQL 生成的 HTML 表，如下所示。

```
<?php $query = "SELECT `Firstname`,`Lastname`,`Branch`,`Gender`,`Mobileno`, `Email`  
      FROM `student_details` WHERE Branch IN ('$branch') and `Year`='$year' 
         and Tenthresult > '$tenth' and 
      Twelthresult > '$twelth' and (CGPA > '$cgpa' || CGPA = '$cgpa')";  

$result = mysql_query($query);
confirm_query($result);
$objPHPExcel = new PHPExcel(); 
$objPHPExcel->setActiveSheetIndex(0); 

$rowCount = 1; 
$objPHPExcel->getActiveSheet()->SetCellValue('A'.$rowCount,'Firstname');
$objPHPExcel->getActiveSheet()->SetCellValue('B'.$rowCount,'Lastname');
$objPHPExcel->getActiveSheet()->SetCellValue('C'.$rowCount,'Branch');
$objPHPExcel->getActiveSheet()->SetCellValue('D'.$rowCount,'Gender');
$objPHPExcel->getActiveSheet()->SetCellValue('E'.$rowCount,'Mobileno');
$objPHPExcel->getActiveSheet()->SetCellValue('F'.$rowCount,'Email');

while($row = mysql_fetch_array($result)){ 
    $rowCount++;
    $objPHPExcel->getActiveSheet()->SetCellValue('A'.$rowCount, $row['0']);
    $objPHPExcel->getActiveSheet()->SetCellValue('B'.$rowCount, $row['1']);
    $objPHPExcel->getActiveSheet()->SetCellValue('C'.$rowCount, $row['2']);
    $objPHPExcel->getActiveSheet()->SetCellValue('D'.$rowCount, $row['3']);
    $objPHPExcel->getActiveSheet()->SetCellValue('E'.$rowCount, $row['4']);
    $objPHPExcel->getActiveSheet()->SetCellValue('F'.$rowCount, $row['5']);
} 

$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel); 
$objWriter->save('some_excel_file.xlsx'); 
?> 
```

它可以工作，但是它将 xlsx 文件保存在根文件夹中，而不会向用户显示任何已下载的迹象。当我单击按钮时，此代码会运行。现在，我可以像下载邮件附件一样下载它并在前端向用户显示它与位置一起被下载。

我尝试使用

```
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="01simple.xls"');
header('Cache-Control: max-age=0'); 
```

有了这个，我得到了我想要的东西，但是打开时下载的 xls 文件显示消息'您尝试打开的文件'文件名'的格式与指定的扩展名不同......等等。你想要现在打开？

打开它包含整个 HTML 页面或它只是空白...有人可以帮助我..？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T08:11:29.030

**电子表格 101**

有许多不同的电子表格文件格式，每种都有自己不同的文件扩展名，并且可以使用不同的 mime 类型发送到 Web 浏览器。这些在 PHPExcel 文档中进行了描述，并且每个在 PHPExcel 中都有自己不同的 Writer。你不匹配两种不同的格式

> **BIFF 格式**
> 
> *   由 Microsoft Excel 在版本 95 和 2003 文件之间使用
>     
>     
> *   **扩展名：** xls
>     
>     
> *   **PHPEXcel 编写器：** PHPExcel_Writer_Excel5
>     
>     
> *   **Mime 类型：** application/vnd.ms-excel
>     
>     
> 
> **OfficeOpenXML 格式**
> 
> *   自 2007 版起由 Microsoft Excel 使用
>     
>     
> *   **文件扩展名：** xlsx
>     
>     
> *   **PHPEXcel 编写器：** PHPExcel_Writer_Excel2007
>     
>     
> *   **Mime 类型：** application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

不要混搭：如果你这样做了，那么 Excel 会（并且有理由地）抱怨。如果您想要一个 BIFF 文件，请使用 PHPExcel 的 BIFF Writer (Excel5)，文件扩展名为 .xls，以及上面列出的 BIFF 格式的 mime 类型。如果您想要 OfficeOpenXML 文件，请使用 PHPExcel 的 Excel2007 Writer，文件扩展名为 .xlsx，以及上面列出的 OfficeOpenXML 的 mime 类型。

**编辑**

请注意，PHPExcel 发行版提供的示例包括 01simple-download-xls.php 和 01simple-download-xlsx.php 以准确演示您想要的内容

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-09T08:29:19.073

仅添加这些标头只会发送这些标头。您的其余代码仍然相同，因此您像以前一样将 xls 保存到根文件夹中。

发送标头只会使您通常看到的页面与 xls 标头一起发送。这不是您想要的，您得到的是 HTML 页面，但标题错误。

您需要做的是发送这些标头**，然后流式传输 xlsx**。

[在这里](http://phpexcel.codeplex.com/discussions/27839)查看一个随机线程（我知道，这是个坏主意，但这会让您提前了解该做什么），您可以找到如下示例：

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=$filename.xls");
header("Content-Transfer-Encoding: binary ");
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel); 
$objWriter->setOffice2003Compatibility(true);
$objWriter->save('php://output'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-11T08:14:31.873

我使用下面的代码片段来做到这一点。

```
// Redirect output to a client’s web browser (Excel2007)
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="test_file.xlsx"');
header('Cache-Control: max-age=0');
// If you're serving to IE 9, then the following may be needed
header('Cache-Control: max-age=1');

// If you're serving to IE over SSL, then the following may be needed
header ('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // Date in the past
header ('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT'); // always modified
header ('Cache-Control: cache, must-revalidate'); // HTTP/1.1
header ('Pragma: public'); // HTTP/1.0
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('php://output'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-27T09:37:30.067

尝试这个 ..

```
header('Content-Type: application/vnd.ms-excel');
    $filename = "Reports".date("d-m-Y-His").".xls";
    header('Content-Disposition: attachment;filename='.$filename .' ');
    header('Cache-Control: max-age=0');
    $objWriter = \PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
    $objWriter->save('php://output'); 
```

# xml - java.lang.NoClassDefFoundError: javax/servlet/AsyncListener

> ID：15895268
> 
> 赞同：3
> 
> 时间：2013-04-09T06:56:04.760
> 
> 标签：xml, spring-mvc

我是 spring-mvc 的新手，正在开发一个简单的 spring 应用程序，在运行该应用程序时我得到以下异常**java.lang.NoClassDefFoundError: javax/servlet/AsyncListener**，谁能指导我摆脱这个问题

```
java.lang.NoClassDefFoundError: javax/servlet/AsyncListener
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1850)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:890)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1354)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:104)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:622)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:634)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:591)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:648)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:511)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:452)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4149)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4458)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:722)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:583)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.ClassNotFoundException: javax.servlet.AsyncListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    ... 42 more 
```

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

<display-name>LoginForm</display-name>

<servlet>

<servlet-name>dispatcher</servlet-name>

<servlet-class>org.springframework.web.servlet.DispatcherServlet
</servlet-class>

<load-on-startup>1</load-on-startup>

</servlet>

<servlet-mapping>

<servlet-name>dispatcher</servlet-name>

<url-pattern>/forms/*</url-pattern>

</servlet-mapping>

<welcome-file-list>

<welcome-file>index.jsp</welcome-file>

</welcome-file-list>

</web-app> 
```

这是调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:p="http://www.springframework.org/schema/p"

xmlns:context="http://www.springframework.org/schema/context"

xmlns:mvc="http://www.springframework.org/schema/mvc"

xsi:schemaLocation="

http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/context

http://www.springframework.org/schema/context/spring-context-3.0.xsd

http://www.springframework.org/schema/mvc

http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd

">

<!-- Enable annotation driven controllers, validation etc... -->

<mvc:annotation-driven />

<context:component-scan base-package="controller.*" />

<bean id="viewResolver"

class="org.springframework.web.servlet.view.InternalResourceViewResolver">

<property name="prefix">

<value>/WEB-INF/views/</value>

</property>

<property name="suffix">

<value>.jsp</value>

</property>

</bean>

<bean id="messageSource"

class="org.springframework.context.support.ReloadableResourceBundleMessageSource">

<property name="basename" value="/WEB-INF/messages" />

</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:17:37.073

不仅仅是 MVC 问题，这似乎是 Tomcat 中的 lib 文件的问题。请验证您的服务器 lib 文件以确保 JAR 用于解析类。

# html - webkit 动画不起作用

> ID：15895271
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:56:22.517
> 
> 标签：html, css, webkit, css-animations

```
<style>
.abc .abc-animation {
position: relative;
margin: 0 auto;
width: 632px;
height: 460px;
overflow: hidden;
background-position: 50% 50%;
background-repeat: no-repeat;
background-color: transparent;
background-image: url("http://zacharybrown.files.wordpress.com/2008/05/7-indians-chief.jpg");
}

.abc .ready .mouse {
-webkit-animation: mouseani 8s 0s 1 normal forwards, mousegone .1s 8s 1 normal forwards;
-moz-animation: mouseani 8s 0s 1 normal forwards, mousegone .1s 8s 1 normal forwards;
-ms-animation: mouseani 8s 0s 1 normal forwards, mousegone .1s 8s 1 normal forwards;
-o-animation: mouseani 8s 0s 1 normal forwards, mousegone .1s 8s 1 normal forwards;
animation: mouseani 8s 0s 1 normal forwards, mousegone .1s 8s 1 normal forwards;
-webkit-animation-timing-function: cubic-bezier(0.5, 0.05, 0 0.6, 1);
-moz-animation-timing-function: cubic-bezier(0.5, 0.05, 0 0.6, 1);
-o-animation-timing-function: cubic-bezier(0.5, 0.05, 0 0.6, 1);
-ms-animation-timing-function: cubic-bezier(0.5, 0.05, 0 0.6, 1);
animation-timing-function: cubic-bezier(0.5, 0.05, 0 0.6, 1);
}

.abc .mouse {
position: absolute;
left: -9px;
top: -9px;
z-index: 10;
display: inline-block;
opacity: 0;
width: 16px;
height: 16px;
background-color: #808080;
border-radius: 18px;
border: 2px solid #fff;
-webkit-transform: translate(150px, 105px);
-moz-transform: translate(150px, 105px);
-o-transform: translate(150px, 105px);
-ms-transform: translate(150px, 105px);
transform: translate(150px, 105px);
}

.abc .ready .mouse .click {
-webkit-animation: mouseclick 8s 0s 1 normal forwards;
-moz-animation: mouseclick 8s 0s 1 normal forwards;
-o-animation: mouseclick 8s 0s 1 normal forwards;
-ms-animation: mouseclick 8s 0s 1 normal forwards;
animation: mouseclick 8s 0s 1 normal forwards;
}

.abc .mouse .click {
display: inline-block;
opacity: 0;
width: 6px;
height: 6px;
background-color: #fff;
border-radius: 3px;
position: absolute;
left: 5px;
top: 5px;
}

.abc .ready .screen {
opacity: 0;
}

.abc .screen.one {
z-index: 5;
background-image: url("http://3.bp.blogspot.com/-2kEUWmGpQlw/T4m3TJnnxdI/AAAAAAAABWs/LrY8LwQwWMg/s1600/DA0087.jpg");
-webkit-transition-delay: 2s;
-moz-transition-delay: 2s;
-o-transition-delay: 2s;
-ms-transition-delay: 2s;
transition-delay: 2s;
}

.abc .screen {
width: 632px;
height: 460px;
background-position: 50% 50%;
background-repeat: no-repeat;
background-color: transparent;
position: absolute;
top: 0;
left: 0;
opacity: 1;
-webkit-transition: all 0.1s ease-in-out;
-moz-transition: all 0.1s ease-in-out;
-o-transition: all 0.1s ease-in-out;
-ms-transition: all 0.1s ease-in-out;
transition: all 0.1s ease-in-out;
}

.abc .screen.two {
z-index: 4;
background-image: url("http://cloud3.faout.com/uploads/201208/heditor/201208171536178403.jpg");
-webkit-transition-delay: 5s;
-moz-transition-delay: 5s;
-o-transition-delay: 5s;
-ms-transition-delay: 5s;
transition-delay: 5s;
}

.abc .screen.three {
z-index: 3;
background-image: url("http://blog.seattletimes.nwsource.com/seattlesketcher/linesmith-m.jpg");
-webkit-transition-delay: 8s;
-moz-transition-delay: 8s;
-o-transition-delay: 8s;
-ms-transition-delay: 8s;
transition-delay: 8s;
}
</style>

<article class="abc">
      <div class="container clear">
        <div class="abc-block browser">
          <div class="browser-bar">
            <div class="browser-button"></div>
            <div class="browser-button"></div>
            <div class="browser-button"></div>
          </div>
          <div class="browser-content">
            <div class="abc-animation ready">
              <div class="mouse"><span class="click"></span></div>
              <div class="screen one"></div>
              <div class="screen two"></div>
              <div class="screen three"></div>
              <div class="screen four"></div>
            </div>
          </div>
        </div>        
      </div>
</article> 
```

在上面的代码中，我想为一个在三个不同位置移动的圆点设置动画，但它不起作用。那么上面的代码有什么问题？我知道这么大的代码，但我希望能得到一些好的回应，并且能够解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:55:56.243

您缺少关键帧，这是一个定义动画帧的规则：

```
@keyframes mouseani {
  0% { /* initial state */ }
  /*
   * intermediate states
   */
  100% { /* final state */ }
} 
```

# javascript - 将 iframe 定位在 Images/JS 加载的图像之上，现在 iFrame 在图像之下

> ID：15895272
> 
> 赞同：0
> 
> 时间：2013-04-09T06:56:25.807
> 
> 标签：javascript, jquery, iframe, positioning

遇到问题，在我的网站上，我使用隐藏在 DIV 中的方式调用 iframe，但是当 iframe 显示时，网站的图像会覆盖 iframe。

我需要一种方法能够将 iframe 定位到页面顶部/当前阻塞部分 iframe 的图像的顶部。

你可以在这个域上看到我的编码：www.SEO.mobi

要访问查看 iframe，您需要在键盘上输入：

↑↑↓↓←→←→BA↵</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:03:07.717

幻灯片中的每个图像都有一个 z-index 集。

```
<image style="z-index:6"/>

<image style="z-index:5"/>

<image style="z-index:4"/>

<image style="z-index:3"/>

<image style="z-index:2"/>

<image style="z-index:1"/> 
```

您的弹出 div 具有`z-index:2`因此 z-index 高于 2 的图像将位于 iframe 上方。

```
<div id="popupContact">...</div>

#popupContact{
    z-index:2;
} 
```

一个快速的解决方法是让弹出的 div`z-index`比其他元素更高。

# asp.net - 无法在不刷新页面的情况下使用 ajax 调用更新 mvc 视图上的评论模块

> ID：15895275
> 
> 赞同：0
> 
> 时间：2013-04-09T06:56:38.607
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, jquery, entity-framework-4

这对我来说是一个检查和配对的情况......我正在使用 mvc 3。我正在尝试在单个视图上创建一个帖子和评论模块。下面是视图和控制器的代码。我能够在加载时获取帖子和所有评论，但是一旦我通过 AJAX 调用添加新评论，它就会保存到数据库中的正确表中，但我不明白如何在不刷新页面的情况下更新它。 .

```
//model
public class PostViewModel
{
   public bool? IsActive
    { get; set; }

   public string PostDescription
    { get; set; }

   ...

    public List<PostCommentModel> objPostCommentInfo { get; set; }
}

//Post Controller

 DBEntities1 db = new DBEntities1();

    public ActionResult Index(int ID)
    {

        int id = Convert.ToInt32(ID);
        PostViewModel objPostViewModel = new PostViewModel();
        List<PostViewModel> lstobjPostViewModel = new List<PostViewModel>();

        PostCommentModel objPostCommentModel;
        List<PostCommentModel> lstobjPostCommentModel = new List<PostCommentModel>();

        var objPost = (from x in db.PostInfoes 
                        where x.PostId  == id
                        select x).ToList();

        var objPostComment = (from y in db.PostCommentInfoes  
                               where y.PostId  == id
                               orderby y.CommentId  descending
                               select y).ToList();

        foreach  (var x in objPost)
        {

            objPostViewModel.PostID = x.PostId;
            objPostViewModel.IsActive = x.IsActive;
            objPostViewModel.PostTitle = x.PostTitle;
            objPostViewModel.PostDescription = x.PostDescription;
            lstobjPostViewModel.Add(objPostViewModel);
        }

        foreach (var y in objPostComment)
        {
            objPostCommentModel = new PostCommentModel();
            objPostCommentModel.PostId  = y.PostId;
            objPostCommentModel.IsActive  = y.IsActive;
            objPostCommentModel.CommentBody = y.CommentBody;
            lstobjPostCommentModel.Add(objPostCommentModel);
        }
        objPostViewModel.objPostCommentInfo = lstobjPostCommentModel;
        return View(lstobjPostViewModel);
    }

  //view
  @model IEnumerable<MVCProjectModels.PostViewModel>

<table border="1">
 @foreach (var item in Model)
 {    
    <tr>
        <td>
            <text>Created By:</text>
            @Html.DisplayFor(modelItem => item.PostDescription)
        </td>
        <td rowspan="2">
            @Html.DisplayFor(modelItem => item.PostDescription)
        </td>
    </tr>
    .....
  }
 </table>
 <table>
 <tr>
    <td>
        <textarea cols="10" rows="5" id="txtComment"></textarea>
    </td>
  </tr>
  <tr>
    <td>
        <input id="btnPostComment" type="button" value="Post Comment" />
    </td>
 </tr>
 </table>
 <table border="1">
 @foreach (var item1 in Model)
 {
    foreach (var item2 in item1.objPostCommentInfo)
    {    
    <tr>
        <td colspan="2">
            @Html.DisplayFor(modelItem => item2.CommentBody)
        </td>
    </tr>
    }
  }
 </table> 
```

//Ajax 调用来更新评论（评论被保存到数据库中，但我无论如何都找不到在 UI 或视图上更新它）

```
 <script type="text/javascript">

       $("#btnPostComment").click(function () {
       var commentBody = $("#txtComment").val();
       postComment(commentBody);
       });
       function postComment(commentBody) {
       $.ajax({
       url: "/Post/postComment", // this controller method calls a store procedure to insert the new comment in the database.
          type: 'POST',
          data: {
              Comment: commentBody,
              ID: 6
          },
          success: function (result) {

          },
          error: function () {
              alert("error");
          }
        });
        }
        </script> 
```

如果我在上述模块中犯了任何重大设计错误，请告诉我。我是 mvc 的新手，所以只是试图通过阅读一些书籍和文章来做到这一点，所以不确定这是否是实现这种结果的正确方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:09:37.153

您需要为表命名以便于参考：

```
<table border="1" id="postList"> 
```

在您看来，您正在编写用户名，`<text>Created By:</text>`但我在模型中没有看到。因此，假设它保存在会话中，或者您可以在控制器中检索它，您可以执行以下操作：

```
public ActionResult PostComment(YourModel input){
    // everything went well
    // you get this from a session or from the database
    var username = "the creator";
    return Json(new { success = true, username});
} 
```

在`success`您的 ajax 调用中：

```
success: function (result) {
    if (result.success) {
        $("#postList").append('<tr><td><text>Created By:</text>' +
            result.username + '</td><td rowspan="2">' +
            commentBody + '</td>');
    </tr>
    }
} 
```

`tr`如果不是连接从 a 读取的字符串`template`并插入必要的值，那将会很酷。或者您可以使用其他工具（如敲除）在客户端进行绑定。但那是我猜的另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:09:22.510

您可以[`.prepend()`](http://api.jquery.com/prepend/)在 AJAX 调用的成功回调中将新的评论文本添加到评论表中：

```
success: function (result) {
    // give your comments table a class="comments" so that the following
    // selector is able to match it:
    $('table.comments').prepend(
        $('<tr/>', {
            html: $('<td/>', {
                text: commentBody
            })
        })    
    );
} 
```

# cakephp - 使用 xlsHelper 导出 Excel 文件

> ID：15895278
> 
> 赞同：4
> 
> 时间：2013-04-09T06:56:46.227
> 
> 标签：cakephp

我正在使用 cakephp 的 xlsHelper 以 excel 格式导出。它在所有主要浏览器中都可以正常工作并在除“mac”操作系统之外的所有操作系统中打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:09:26.790

愿这能帮助你..

```
<?php 
    $this->layout="";
    $filename=strtotime("now");
    header ("Expires: 0");
    header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT");
    header ("Cache-Control: no-cache, must-revalidate");
    header ("Pragma: no-cache");
    header ("Content-type: application/vnd.ms-excel");
    header ("Content-Disposition: attachment; filename=".$filename.".xls");
    header ("Content-Description: Generated Report" );

   // echo 'Number of Rows::'."\t" . count($test)."\n";
   // echo "\n";
    echo    'Id' . "\t" . 
            'EnrollmentId' . "\t" . 
            'IDS' . "\t" . 
            'sysreq' . "\t" . 
            'sysproc' . "\t" . 
            'Request' . "\t" .
            'Response' . "\t" .
            'Created' . "\n";
    foreach($test as $val): 
           echo $val['abc']['id']. "\t" .
                $val['xyz']['enrollment_id']. "\t" .
                $val['bca']['IDS']. "\t" .
                $val['mca']['_sysreq']. "\t" .
                $val['car']['_sysproc']. "\t" .
                $val['azx']['SYSBATCHNO']. "\t" .
                $val['tyu']['MSGS']. "\t" .
                $val['wer']['created']. "\n";
    endforeach; 
```

?>

# .net - 创建自动 Skype 监听器

> ID：15895279
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:56:47.267
> 
> 标签：.net, skype, skype4com

我需要为我的一个项目建立一个 Skype Listener 服务器。它将： 1\. 托管 8 个不同的虚拟 Skype 帐户。2\. 所有帐户都已关联： (a) 已录制的音频文件 (b) 预先录制的视频文件 3\. 对任何这些 Skype 帐户的 Skype 呼叫将根据呼叫自动启动预先录制的音频或视频类型。

问题： 1\. 我无法在一台机器上安装多个 Skype 客户端。如果我安装了虚拟网络摄像头并且需要将视频源更改为虚拟网络摄像头并播放预先录制的视频，则需要这样做。如果我不安装多个客户端，它总是为任何联系人的呼叫播放相同的视频 2.如何在 Skype 上自动接听电话。有用于发起呼叫的 URI，但没有用于接收呼叫的 URI。3.**一个愿望**：能否整合Skype的接听电话事件来踢出我们的.NET代码？

任何即时帮助将不胜感激

问候拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:35:19.690

在 Skype for Desktop (Windows) 中，您可以在通话设置（高级）中设置来电的自动应答。

要启动多个实例，请使用`Skype.exe /secondary`，它将允许您根据需要设置任意数量的实例。

[如果不使用SkypeKit](https://dev.skype.com/skypekit)，您无法将其与 .NET 或任何其他第 3 方应用程序集成

![Skype 通话设置](https://i.stack.imgur.com/Qkhfj.png)

# visual-c++ - 从内联汇编代码中获取值

> ID：15895287
> 
> 赞同：1
> 
> 时间：2013-04-09T06:57:24.553
> 
> 标签：visual-c++, x86, inline-assembly

我有这样的内联汇编代码

```
__asm
{
    MOV dword ptr [esp+4], 12345678h
} 
```

我想在 12345678h 写入之前在一个单独的变量中获取 at [esp+4] 的值，我可以在我的 c++ 代码中进一步使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:12:40.903

根据我在不到五分钟的时间内找到的[这本手册](http://msdn.microsoft.com/en-us/library/ydwz5zc6%28v=vs.80%29.aspx)`__asm`，变量标识符在块内有效。然后，我通过单击该手册的“*您想了解更多信息？* ”部分下的“[访问 __asm 块中的 C 或 C++ 数据](http://msdn.microsoft.com/en-us/library/fabdxz08%28v=vs.80%29.aspx)”链接找到了一个相关示例：

 *> 内联汇编的一个极大便利是能够按名称引用 C 或 C++ 变量。__asm 块可以引用该块出现的范围内的任何符号，包括变量名。例如，如果 C 变量 var 在范围内，则指令
> 
> `__asm mov eax, var`
> 
> 将 var 的值存储在 EAX 中。*

# mongodb - 子文档中包含的 MongoDB 更新字段引发错误

> ID：15895291
> 
> 赞同：1
> 
> 时间：2013-04-09T06:57:39.377
> 
> 标签：mongodb, meteor

我的集合架构如下所示：

```
Products :{ _id: "S2oF6HitSKzwy5toz",
            user_id: "LKAHKhK5SvTr6r8sK",
            shop: "eBay.com",
            items: {
                    item: "HP Laptop"
                    item_total: 101.67
                    notes: "note for hp laptop"
                    price: 101.67
                    quantity: 1
                    shop: "eBay.com"
                    url: "ebay.com/hp"
                    },
            expenses: {
                       bank_fee: 0
                       cod_fee: 0
                       expense_total: 0
                       inbound_fee: 0
                       pcs_fee: 0
                       pjp_fee: 0
                      },
            service_fee: 15.25,
            total: 116.92
           } 
```

我想使用以下语法使用查询更新子文档`bank_fee`中的字段：`expenses``update`

```
insertFee : function(user_id, id, fee_amount){
    Products.update({user_id: user_id, _id: id}, {$set: {"expenses.$.bank_fee":fee_amount}});
} 
```

但是它会引发错误：

```
Exception while invoking method 'insertFee' MongoError: can't append to array us
ing string field name [$] 
```

我在这里做错了什么？

PS我正在关注[这个文档](http://docs.mongodb.org/manual/reference/operator/positional/)进行更新操作。

# c# - 如何将某些视图/操作限制为登录用户？

> ID：15895293
> 
> 赞同：0
> 
> 时间：2013-04-09T06:57:43.790
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我创建了一个名为 Dashboard 的新控制器和一个名为 Index 的视图，上面写着 Hello Username。

在 MVC 中，我怎样才能使它只对登录用户可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:59:15.130

您可以使用以下`Authorize`属性：

```
[Authorize]
public ActionResult Index()
{
} 
```

# android - 整个视图组到位图

> ID：15895297
> 
> 赞同：1
> 
> 时间：2013-04-09T06:58:05.467
> 
> 标签：android, android-layout, view, android-widget

是否可以从视图组对象中获取完整的位图？

此代码从当前位于屏幕上的视图组中截取一个“屏幕截图”，但我想要整个视图，以及当前不在屏幕上的视图。

```
public void export(ViewGroup view){
    view.setDrawingCacheEnabled(true);
    view.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
    Bitmap bitmap = view.getDrawingCache(true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:11:37.037

在这里，我使用 ScrollView 将整个视图变为位图，因此您可以在这里使用任何其他视图组（如 linerlayout 等）代替滚动视图。

```
 Bitmap map = loadBitmapFromView(getApplicationContext(),scrollView);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            map.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

            //you can create a new file name "test.jpg" in sdcard folder.
            File f = new File("/sdcard" +"/" + "mainemailpdf.jpg");
            f.createNewFile();
            //write the bytes in file
            FileOutputStream fo = new FileOutputStream(f);
            fo.write(bytes.toByteArray());
            bArray = bytes.toByteArray();
            // remember close de FileOutput
            fo.close(); 
```

对于 loadBitmapFromView 方法是：

```
public static Bitmap loadBitmapFromView(Context context, View v) {

        Toast.makeText(context,
                v.getMeasuredHeight() + "::::::::::::" + v.getMeasuredWidth(),
                Toast.LENGTH_LONG).show();
        if (v.getMeasuredHeight() > 0) {

            v.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

            Bitmap b = Bitmap.createBitmap(v.getWidth(), v.getHeight(),
                    Bitmap.Config.ARGB_8888);

            Canvas c = new Canvas(b);

            v.layout(0, 0, v.getWidth(), v.getWidth());

            v.draw(c);

            return b;

        }

        return null;

    } 
```

我希望它有帮助:)

任何查询让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T11:25:05.503

这是不可能的，因为 Android 系统会缩小位图。例如 - 如果您的位图大小为 480*800，则其大小为 480*800*4 = 1536000。乘以 4 是因为每个像素是 4 个字节 - RGBA。

对于每个未缩放的图像来说，这意味着超过一兆半。如果 Android 不会缩小图像，您可能会在几次图像加载后得到 OutOfMemoryException。因为您有 3 个选项：

1) view.draw(canvas) 你会得到图像的可见部分（只有实际被绘制到屏幕上的部分）

2) getDrawingCache() - 会给你按比例缩小的图像。

3）创建自定义视图，将位图保存到磁盘并在请求时从那里加载

# asp.net - 设置asp下拉列表选择框的宽度

> ID：15895301
> 
> 赞同：1
> 
> 时间：2013-04-09T06:58:20.103
> 
> 标签：asp.net, drop-down-menu

我曾经问过类似的问题（答案）。他们没有我需要的东西。我需要下拉菜单的宽度始终保持不变。即使它掉下来并且物品比它的宽度更宽。较宽的项目应显示为工具提示。你怎么做到这一点？和 select 元素有什么关系？为什么每个帖子都有“选择”方面的答案。我正在使用 asp 下拉菜单。如何使用 select 呢？无论如何，这是我的 ddl 的 CSS：

```
.ddl2
{
margin-top: 10px;
margin-bottom: 10px;
border-style: solid;
border-width: thin;
border-color: Gray;
height: 20px;
max-width: 150px;
} 
```

当没有选择任何内容时，这有效（仅在 Firefox 中）。一旦 ddl 下降，选择框就会采用最宽元素的宽度。

编辑：

```
 try
        {

            DataSet dsCountry = objBindDDL.BindDropDownListToACountry();
            ddlCountry.DataSource = dsCountry.Tables["ACountry"];
            ddlCountry.DataTextField = "CountryName";
            ddlCountry.DataValueField = "ID";
            ddlCountry.DataBind();
            ddlCountry.Items.Insert(0, new ListItem("Please select Country", ""));
        } 
```

# asp.net - 如何为每颗星自定义 RadRating 工具提示

> ID：15895310
> 
> 赞同：0
> 
> 时间：2013-04-09T06:58:33.957
> 
> 标签：asp.net, telerik

我的问题与每个项目的 RadRating 工具提示的自定义有关。我在一种方法中为 RadRating 赋值。实际上我必须为 2 个值显示 1 个星。例如，如果我的值是 6，则应该选择 3 颗星，而我只需要使用 5 颗星。我在服务器端为 RadRating 赋值的代码是：

```
RadRatingCustomerUp.Value = (customer.Rating != null) ? Convert.ToDecimal(customer.Rating / 2) : 0; 
```

在标记时，我为：

```
<telerik:RadRating ID="RadRatingCustomerUp" runat="server" Precision="Half" Orientation="Horizontal" 
                                        ReadOnly="false">
                                    </telerik:RadRating> 
```

现在我怎么能显示悬停的评级星等于我的价值的提示。如果我的值是 7，则选择了 3.5 颗星并且它显示的工具提示是 3.5，但我想根据我的确切值 (7) 显示工具提示，如果选择了 2 颗星，那么悬停时工具提示必须显示 4

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:15:31.600

以下客户端脚本将覆盖显示在 RadRating 工具提示中的值。您只需将其放置在具有自定义评级控件的页面上。

```
 <script type="text/javascript">
        var old_getItemValue = Telerik.Web.UI.RadRating.prototype._getItemValue;

        $telerik.$.extend(Telerik.Web.UI.RadRating.prototype, {
            _getItemValue: function (item, checkOverParts) {
                var oldValue = old_getItemValue.apply(this, arguments);
                return oldValue * 2;
            }
        });
    </script> 
```

# c# - 删除 excel 文档操作窗格

> ID：15895311
> 
> 赞同：1
> 
> 时间：2013-04-09T06:58:34.037
> 
> 标签：c#, excel, vsto, excel-interop, vba

我们可以使用 Developer-> 扩展包-> Microsoft 操作窗格-> 附加将文档操作窗格附加到任何 Excel 文件。

一旦保存了excel并再次打开它，就会有以前存储的excel文档。

![在此处输入图像描述](https://i.stack.imgur.com/jYcwl.png)

我有一个 Excel 文件（参考图片），我希望使用 c# 中的互操作编程来删除（分离）文档操作窗格。有可能这样做吗？

代码片段：

```
Application xlApp = null;
try
     {
        xlApp = new Microsoft.Office.Interop.Excel.ApplicationClass();
        string versionNo = xlApp.Version;
        xlApp.Visible = true;
        Microsoft.Office.Core.MsoAutomationSecurity mso = xlApp.AutomationSecurity;
        xlApp.AutomationSecurity = Microsoft.Office.Core.MsoAutomationSecurity.msoAutomationSecurityForceDisable;
        Workbook newWb = xlApp.Workbooks.Open(fileName, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

         // Here want code to detach document action pane.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:16:20.363

尝试这个：

```
Microsoft.Office.Interop.Excel.Application.DisplayDocumentActionTaskPane = false; 
```

# emacs - 让 Emacs 将光标移出屏幕

> ID：15895313
> 
> 赞同：19
> 
> 时间：2013-04-09T06:58:51.450
> 
> 标签：emacs, scroll, elisp

是否可以让 Emacs 将光标移出屏幕，就像大多数 GUI 文本编辑器一样？当我在任何 GUI 编辑器上使用 Emacs 时，这是最困扰我的事情之一。当我向下滚动时，光标被缓冲区顶部“向前推”。

我以前认为这是完全不可能的，因为这是硬连线到 Emacs 的体系结构中的，但是后来我看到了[multiple-cursors](https://github.com/magnars/multiple-cursors.el)，它对辅助游标执行此操作（假设您阻止滚动功能对辅助游标起作用游标）。是否可以使用多个光标将主光标放在某个隐藏缓冲区中，而有效光标是我实际编辑的光标？或者也许是其他一些聪明的把戏？或者也许我的谷歌搜索让我失望了，这真的已经可能没有任何魔法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-17T00:34:34.810

[GNU ELPA](http://elpa.gnu.org/)上有一个可用的新软件包[`scroll-restore`](http://elpa.gnu.org/packages/scroll-restore.html)，它试图解决这个问题。到目前为止，我遇到了一些错误，但该软件包似乎大部分都像宣传的那样工作。

您可以通过安装它来测试它

```
M-x package-install RET scroll-restore RET 
```

安装软件包后，您可以使用以下命令启用次要模式

```
M-x scroll-restore-mode 
```

就个人而言，我将它绑定到`Scroll Lock`键上，因为它看起来非常合适！这就是我要添加到我的初始化文件中的内容：

```
(require 'scroll-restore)
(scroll-restore-mode 1)
;; Allow scroll-restore to modify the cursor face
(setq scroll-restore-handle-cursor t)
;; Make the cursor invisible while POINT is off-screen
(setq scroll-restore-cursor-type nil)
;; Jump back to the original cursor position after scrolling
(setq scroll-restore-jump-back t)
;; Toggle scroll-restore-mode with the Scroll Lock key
(global-set-key (kbd "<Scroll_Lock>") 'scroll-restore-mode) 
```

这是此处发布的答案的直接副本：[https ://emacs.stackexchange.com/a/2273/93](https://emacs.stackexchange.com/a/2273/93)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:19:00.960

严格来说，您不能将光标移出屏幕，因为底层 C 代码不允许您这样做。

这就是说，我怀疑你的问题可以解决。基本上有2个方面：

*   您不喜欢“向前推动光标”时的样子。您可以通过（暂时）使光标不可见来解决此问题。
*   您想在发出非滚动命令后立即“跳回”到预滚动位置。可能有一些包可以为你做这件事，但你可以自己做一些`pre-command-hook`黑客攻击。

顺便说一句，我欢迎 Emacs 中提供某些功能的补丁。我讨厌其他编辑器的“自动跳回”行为，但记录“预滚动”位置然后提供一种跳回它的方法会很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T17:01:57.580

从问题的上下文和描述来看，您似乎想在保留编辑位置的同时浏览缓冲区。为此目的至少有两个技巧：标记/寄存器和在两个窗口中拆分。

[https://stackoverflow.com/a/3777598/308668](https://stackoverflow.com/a/3777598/308668)描述了 Emacs 的寄存器，其作用类似于 Vim 的标记。`C-x r SPC a`您可以使用键控（`a`作为您选择的字母）在文件中检查您的位置，并且您可以随时返回`C-x r j a`.

某种自动化是通过外部脚本 ( `goto-last-change.el`) 实现的，如下所述：[https](https://superuser.com/a/184402/49046) ://superuser.com/a/184402/49046 。

或者，使用 将窗口一分为二`C-x 2`。新拆分的窗口都显示相同的位置，您可以使用另一个进行探索。`C-x 0`完成后关闭一个窗口。

# python - 我可以在 wx.lib.plot.PlotCanvas 中获得类似 imshow() 的行为吗？

> ID：15895314
> 
> 赞同：1
> 
> 时间：2013-04-09T06:58:52.813
> 
> 标签：python, matplotlib, wxpython

我是 wxpython 的新手，但作为 matplotlib 用户已有一段时间了。我正在开发一个 wxpython 应用程序，我希望在其中有一个带有单个面板的简单框架（实际上是一个 wx.lib.plot.PlotCanvas 实例）。在面板中，我想显示一些数据，这些数据采用二进制数组（称为 imarr）的形式，如下所示：

![我要显示的数据示例](https://i.stack.imgur.com/19xjL.png) 数组的形状总是 (64,N)，N 可以在大约 400 到 1200 之间变化（我可以自己整理面板尺寸）。

要在 matplotlib 中做到这一点，我会使用类似的东西：

```
fig=figure(figsize=(12,2))
ax=fig.add_subplot(111)
ax.set_ylim(0,63)
ax.set_xlim(0,imarr.shape[0])
ax.set_aspect('equal')
matplotlib.imshow(imarr) 
```

但我完全迷失在 wxpython 中。我一直在研究 wx.lib.plot，但除了漂亮的线条和标记绘图功能之外，似乎没有与 imshow（或 pcolor）等效的功能。

我拥有的一个（丑陋的）解决方案是使用上面的 matplotlib 创建一个 png 图像，然后使用一些 wx 魔法在面板上显示图像（如果这不容易，请让我直截了当）。

我更喜欢从 wxpython 中进行操作，以实现可移植性和整体整洁。关于如何在 wx.lib.plot.PlotCanvas（或更通用的 wx.Panel）上显示二进制数组的任何建议都会非常有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T15:54:09.193

为什么不将 wxPython 和 matplotlib 结合在一起呢？wx.lib.plot.PlotCanvas 与 matplotlib 相比功能有限。查看此[答案](https://stackoverflow.com/questions/10737459/embedding-a-matplotlib-figure-inside-a-wxpython-panel%20answer)中的[示例](http://matplotlib.org/examples/user_interfaces/mathtext_wx.html?highlight=wxpython)和 matplotlib 文档中的示例。抱歉，我没有准确回答您的要求，但我认为这是正确的方法。

# c# - 属性网格中的列表扩展器，带有通用 ICustomTypeDescriptor

> ID：15895317
> 
> 赞同：2
> 
> 时间：2013-04-09T06:59:00.290
> 
> 标签：c#, list, propertygrid, icustomtypedescriptor

我有一个`Parameters.cs`实现接口的通用类（）`ICustomTypeDescriptor`：.

我将泛型类用于几个不同的类，其中之一是：

```
 private Parameters<Class1> _class1Parameters;

    public Parameters<Class1> Class1Parameters
    {
        get { return _class1Parameters; }
        set { _class1Parameters= value; }
    } 
```

Class1.cs：

```
public class Class1
{
    private List<Position> _pos = new List<Position>();

    public List<Position> Pos
    {
        get { return _pos ; }
        set { _pos = value; }
    }  

    //Other variables
} 
```

职位类别：

```
public class Position
{
    public string Name { get; set; }
    public double Position { get; set; }
} 
```

现在列表在 Propertygrid 中显示为三个点（“...”）。

我希望它与 Expander ("+") 一起显示，我们如何通过 `ICustomTypeDescriptor`?

**编辑：**

我试着把列表放在`[TypeConverter(typeof(ExpandableObjectConverter))]`上面`Pos`，它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:30:51.180

最后我设法通过这个网站：

**[在 PropertyGrid 中自定义显示集合数据](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)**

# jquery - 如何使用 jquery 更改 datepicker 的日期格式？

> ID：15895318
> 
> 赞同：1
> 
> 时间：2013-04-09T06:59:00.720
> 
> 标签：jquery

我在 jqgrid 中使用 datepicker。在这里，我想以 dd-mm-yy 的格式获取日期，并且我想以 yyyy-MM-dd HH:mm:ss 的格式将日期保存在数据库中。每当我从数据库中检索日期时，我都会采用 dd-mm-yy 的格式。

我们应该如何使用jquery？

**更新**

```
<script>
            datePick=function(element)
                {
                    $(element).datepicker(
                        {
                            buttonImage: "calendar.gif",
                            buttonImageOnly: true,
                            minDate: 0,
                            showButtonPanel: true ,
                            closeText: "Close",                                 
                            changeMonth: true,
                            changeYear: true
                        }
                    ).attr('readonly','true');
                };
            function callme()
            {

                $( "#datepicker" ).datepicker( "option", "dateFormat", 'dd-mm-yy' );

            }

            function call()
            {

                $( "#datepicker" ).datepicker( "option", "dateFormat", 'dd-mm-yy' );
            }

            function fun()
            {
                $( "#datepicker" ).datepicker( "option", "dateFormat", 'yy-mm-dd' );
            }
</script>
<body>
            <sjg:grid id="gridtable"
            ..............
            >
            .
            .
            .
            .
            .
                 <sjg:gridColumn
                name="custEstdDate"
                align="left"
                index="custEstdDate"
                title="Estd Date"
                sortable="false"
                editable="true"
                editoptions="{
                    size: 20,
                    maxlength: 10,
                    dataInit:datePick
                }"
               edittype="text"/>
               </sjg:grid> 
```

这些是我的示例编码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:02:54.367

尝试[`dateformat()`](http://api.jqueryui.com/datepicker/#option-dateFormat)datecpicker 选项

```
$( ".datepicker" ).datepicker({ dateFormat: "dd-mm-yy" }); 
```

[您可以在此处查看](http://api.jqueryui.com/datepicker/#utility-parseDate)可用日期格式的链接

或者您可以在服务器端进行..在插入数据库之前更改格式

**如果使用 PHP**

```
 $date=date('Y-m-d H:i:s',strtotime($posteddate)); 
```

**更新**

```
datePick=function(element)
            {
                $(element).datepicker(
                    {
                        buttonImage: "calendar.gif",
                        buttonImageOnly: true,
                        minDate: 0,
                        showButtonPanel: true ,
                        closeText: "Close",                                 
                        changeMonth: true,
                        changeYear: true,
                        dateFormat: "dd-mm-yy" 
                    }
                ).attr('readonly','true');
               // $( element ).datepicker({ dateFormat: "dd-mm-yy" });
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:02:44.080

要更改日期选择器中的日期格式，请使用

```
$( "#datepicker" ).datepicker( "option", "dateFormat", 'dd-mm-yy' ); 
```

您在服务器端使用插入数据库的脚本应该转换为所需的数据库格式，并在您想要显示它时重新转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:01:42.113

你可以使用这个：

假设你有一个像这样的 div：
`<div id="datepicker"></div>`

然后你可以这样做：

```
var date = $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy' }).val(); 
```

或者

```
var dateTypeVar = $('#datepicker').datepicker('getDate');
$.datepicker.formatDate('dd-mm-yy', dateTypeVar); 
```

# iphone - 当wifi接入点切换时，ios中的可达性不给回调

> ID：15895322
> 
> 赞同：1
> 
> 时间：2013-04-09T06:59:24.090
> 
> 标签：iphone, ios, objective-c, reachability

我是ios新手。我正在开发一个 voip 应用程序。在我的应用程序中，当设备 IP 地址更改时，我需要回调。我在我的应用程序中添加了[可达性代码](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。但是当进入 iphone 的 wifi 设置并连接到当前连接的路由器以外的 wifi 路由器时。它提供可达性回调。但有时它不会给出这个回调。为什么会这样？可达性的代码是错误的吗？如果我做错了什么，请告诉我。提前致谢。

# hibernate - 休眠缓存异常

> ID：15895323
> 
> 赞同：0
> 
> 时间：2013-04-09T06:59:25.917
> 
> 标签：hibernate

我尝试在休眠的帮助下创建和填充数据库。

我的休眠配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
   "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
    <property name="connection.url">
        jdbc:h2:C:\Users\data\datastore
    </property>
    <property name="connection.username">admin</property>
    <property name="connection.password">admin</property>
    <property name="connection.driver_class">org.h2.Driver</property>
    <property name="dialect">org.hibernate.dialect.H2Dialect</property>
    <property name="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</property>
    <property name="current_session_context_class">thread</property>
    <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <mapping class="de.model.Player" />
    <mapping class="de.model.Team" />
    <mapping class="de.model.Goal" />
    <mapping class="de.model.Match" />
</session-factory> 
```

我的数据访问对象：

```
public class DAO {

/**
 * 
 */
public void clean() {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.createQuery("Delete from Player").executeUpdate();
    session.createQuery("Delete from Team").executeUpdate();
    session.createQuery("Delete from Goal").executeUpdate();
    session.createQuery("Delete from Match").executeUpdate();
    session.flush();
    session.clear();
    transaction.commit();
}

/**
 * 
 * @param player
 */
public void insertPlayer(Player player) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.save(player);
    transaction.commit();
}

/**
 * 
 * @param team
 */
public void insertTeam(Team team) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.save(team);
    transaction.commit();
}

/**
 * 
 * @param goal
 */
public void insertGoal(Goal goal) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.save(goal);
    transaction.commit();
}

/**
 * 
 * @param match
 */
public void insertMatch(Match match) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.save(match);
    transaction.commit();
}

/**
 * 
 * @param player
 */
public void updatePlayer(Player player) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.update(player);
    transaction.commit();
}

/**
 * 
 * @param team
 */
public void updateTeam(Team team) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.update(team);
    transaction.commit();
}

/**
 * 
 * @param goal
 */
public void updateGoal(Goal goal) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.update(goal);
    transaction.commit();
}

/**
 * 
 * @param match
 */
public void updateMatch(Match match) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.update(match);
    transaction.commit();
}

/**
 * 
 * @param player
 */
public void deletePlayer(Player player) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.delete(player);
    transaction.commit();
}

/**
 * 
 * @param team
 */
public void deleteTeam(Team team) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.delete(team);
    transaction.commit();
}

/**
 * 
 * @param goal
 */
public void deleteGoal(Goal goal) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.delete(goal);
    transaction.commit();
}

/**
 * 
 * @param match
 */
public void deleteMatch(Match match) {
    Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();
    Transaction transaction = session.beginTransaction();

    session.delete(match);
    transaction.commit();
}
} 
```

我的主要：

```
public class Main {
/**
 * 
 */
private static Logger log = Logger.getLogger(Main.class);
/**
 * 
 */
private static DAO dao = new DAO();
/**
 * 
 */
private static XMLReader reader = new XMLReader();

/**
 * 
 * @param args
 */
public static void main(String[] args) {
    try {
        Document allTeams = reader.parseFile("src/main/resources/teams.xml");
        Document allMatches = reader.parseFile("src/main/resources/matches.xml");

        List<Element> teams = allTeams.getRootElement().getChildren("Team");

        for(Element team: teams) {
            Team newTeam = new Team();
            newTeam.setId(Integer.parseInt(team.getChild("teamID").getValue()));
            newTeam.setName(team.getChild("teamName").getValue());
            newTeam.setIconUrl(team.getChild("teamIconURL").getValue());
            newTeam.setStadion(team.getChild("stadion").getValue());
            newTeam.setPlayer(new HashSet<Player>());

            List<Element> players = team.getChildren("player");

            for(Element player: players) {
                Player newPlayer = new Player();
                newPlayer.setName(player.getValue());
                newPlayer.setTeam(newTeam);

                newTeam.getPlayer().add(newPlayer);
            }

            dao.insertTeam(newTeam);

            for(Player player: newTeam.getPlayer()) {
                dao.insertPlayer(player);
            }
        }

        // dao.clean();
    } catch(RuntimeException e) {
        try {
            Session session = DBSessionHandler.getSessionFactoryInstance().getCurrentSession();

            if(session.getTransaction().isActive()) {
                session.getTransaction().rollback();
            }
        } catch(HibernateException e1) {
            log.error("Error rolling back transaction");
        }

        throw e;
    } catch (JDOMException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

执行 Main 时出现以下错误：

```
Exception in thread "main" org.hibernate.cache.CacheException:     net.sf.ehcache.CacheException: Another unnamed CacheManager already exists in the same VM.  Please provide unique names for each CacheManager in the config or do one of following:
1\. Use one of the CacheManager.create() static factory methods to reuse same CacheManager with same name or create one if necessary
2\. Shutdown the earlier cacheManager before creating new one with same name. 
```

我该如何解决这个问题？我在教程的帮助下做了第一次休眠尝试。在那个教程中它起作用了^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:19:27.607

尝试改变这一点：

```
<property name="hibernate.cache.region.factory_class">
net.sf.ehcache.hibernate.EhCacheRegionFactory
</property> 
```

至

```
<property name="hibernate.cache.region.factory_class">
net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory
</property> 
```

# java - 使用现有数据集执行 Neo4j Cypher 查询（通过 Java）

> ID：15895331
> 
> 赞同：0
> 
> 时间：2013-04-09T06:59:59.950
> 
> 标签：java, neo4j, cypher, graph-databases

我使用 neo4j 控制台（“localhost:7474”）（如您所知“graph.db”）直接制作了一个 neo4j 数据集，我想使用这些数据执行 Cypher Query（通过 Java）。

我已经看到了这个例子

[https://github.com/neo4j/neo4j/blob/master/community/cypher/src/test/java/org/neo4j/cypher/javacompat/JavaQuery.java](https://github.com/neo4j/neo4j/blob/master/community/cypher/src/test/java/org/neo4j/cypher/javacompat/JavaQuery.java)

我只想使用这种方式，但直接使用现有数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:17:01.323

如果您在嵌入式模式下使用 Neo4j，即它与您的应用程序在同一个 jvm 中运行，您可以使用以下方式访问它：

> GraphDatabaseService graphDb = new GraphDatabaseFactory().newEmbeddedDatabase(DBPATH)

其中 DBPATH 是您使用 Webadmin 创建的数据库的路径。您可以在 neo4j 安装目录/conf/neo4j-server.properties 中找到该路径（属性名称为 org.neo4j.server.database.location）

实例化 graphDb 后，您可以按照[http://docs.neo4j.org/chunked/stable/tutorials-cypher-java.html中的说明执行 Cypher 查询](http://docs.neo4j.org/chunked/stable/tutorials-cypher-java.html)

如果你不是在嵌入式模式下使用 Neo4j 并且想要连接到在端口 7474 上运行的现有服务器，你可以使用 java rest 绑定：[https ://github.com/neo4j/java-rest-binding/](https://github.com/neo4j/java-rest-binding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:09:32.797

这是我几个月前写的。为了易于理解，它非常简约！ [https://github.com/bendaizer/neo4j_cypher_java_template](https://github.com/bendaizer/neo4j_cypher_java_template)

您只需要提供数据库目录的路径（以及您的数据）和密码查询。我没有时间写更好的东西，所以你需要为每个新查询重新编译！

# asp.net - 隐藏一个 td 并在行中折叠其他 td 以不显示 td 之间的空间（自动合并）

> ID：15895334
> 
> 赞同：0
> 
> 时间：2013-04-09T07:00:04.710
> 
> 标签：asp.net, html, css

代码片段：

```
<TD><center>
<asp:ImageButton id=imgManagOrd Runat="server" ImageUrl="images/ManageOrders.jpg"></asp:ImageButton></center></TD>
<TD><center>
<asp:ImageButton id=imgStockOrder Runat="server" ImageUrl="images/stockorder.jpg">    </asp:ImageButton></center></TD>
<TD><center>
<asp:ImageButton id=imgAdmin Runat="server" ImageUrl="images/admin.jpg">    </asp:ImageButton></center></TD>
<TD><center>
<asp:ImageButton id=imgContact Runat="server" ImageUrl="images/contact.jpg">    </asp:ImageButton></center></TD> 
```

我根据权限从代码隐藏中隐藏特定的 td，并且我没有分别指定这些 td 的宽度。

因此，最终 td 之间存在奇数空间。请查找图片： **所有 tds：** ![所有 td](https://i.stack.imgur.com/gmjlP.jpg)

**很少有 Td 隐藏：** ![隐藏的几个 td](https://i.stack.imgur.com/vYaeh.jpg)

请告诉我如何在不显示空格的情况下连续对齐结果 tds。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:04:06.080

你有这样的标记：

```
<tr>
<td><imagebutton id="img1">..</imagebutton></td>
<td><imagebutton id="img2">..</imagebutton></td>
<td><imagebutton id="img3">..</imagebutton></td>
<td><imagebutton id="img4">..</imagebutton></td>
<tr> 
```

并且您将其中一个`imagebuttons`隐藏在代码隐藏中。IE

```
 img2.Visible=false 
```

所以它会产生这样的标记：（假设你隐藏了第二个图像按钮）

```
<tr>
<td><imagebutton id="img1">..</imagebutton></td>
<td></td>
<td><imagebutton id="img3">..</imagebutton></td>
<td><imagebutton id="img4">..</imagebutton></td>
<tr> 
```

这只是意味着，持有 imagebutton 的 td 永远不会被移除，它已经存在，因此空间。

你应该隐藏 td 而不是隐藏`imagebuttons`

所以给你的 tds 和 runat="server" 属性提供 id 。并从代码隐藏中获取它们并设置它们的可见 =false；

或这样做：

```
 td1.Attributes.Add("class","hide"); //where td1 is the id of a td 
```

`.hide`样式表或设计器中的 CSS 类在哪里，如下所示：

```
.hide
{
   display:none;
} 
```

# c - Spidev 不使用 ioctl 同时写入/读取

> ID：15895338
> 
> 赞同：8
> 
> 时间：2013-04-09T07:00:20.563
> 
> 标签：c, linux-device-driver, embedded-linux, powerpc, spi

我希望能找到一些帮助，即使这个问题可能更多的是硬件而不是软件相关（我们会看到）。我正在开发基于飞思卡尔 P1021 处理器（ppc，e500v2 内核）的定制板。外部 PCB 将被连接并可通过 SPI 进行配置。该外部 PCB 的规格在全双工模式下读取 2 字节命令，并且只有最后一个字节用于将数据传回 MISO。

知道了这一点，我目前正在准备一些软件来测试这个设备。所以我从众所周知的[spi_test](https://www.kernel.org/doc/Documentation/spi/spidev_test.c)程序开始。

```
root@p1021rdb:~# ./spi_test -D /dev/spidev32766.3
spi mode: 0
bits per word: 8
max speed: 500000 Hz (500 KHz)

00 00 00 00 00 00
00 00 00 00 00 00
00 00 00 00 00 00
00 00 00 00 00 00
00 00 00 00 00 00
00 00 00 00 00 00
00 00
root@p1021rdb:~# 
```

![图1](https://i.stack.imgur.com/nHQnI.png)

信号显示 608 个时钟，似乎只有前半部分的数据。我决定使用环回来调查和测试它 - 缩短 MOSI-MISO 将数据循环回 rx 缓冲区。结果：

```
root@p1021rdb:~# ./spi_test -D /dev/spidev32766.3
spi mode: 0
bits per word: 8
max speed: 500000 Hz (500 KHz)

FF FF FF FF FF FF
40 00 00 00 00 95
FF FF FF FF FF FF
FF FF FF FF FF FF
FF FF FF FF FF FF
DE AD BE EF BA AD
F0 0D
root@p1021rdb:~# 
```

![图2](https://i.stack.imgur.com/yabMw.png)

这个信号表明，整个电报因任何原因被重复（我不知道为什么）。但是，程序在控制台中正确显示了接收到的数据，所以它可能正如 spi_test 所期望的那样。

此外，我将在该程序中发送的模式控制为 2 个字节（以模拟我所针对的请求的命令格式），如下所示：

```
#ifdef ORIG
   uint8_t tx[] = {
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0x40, 0x00, 0x00, 0x00, 0x00, 0x95,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xDE, 0xAD, 0xBE, 0xEF, 0xBA, 0xAD,
      0xF0, 0x0D,
   };
#else
   uint8_t tx[] = {
      0xAA, 0x81,
   };
#endif 
```

但正如我没想到的那样，32 位被移出到 SPI 总线 - 而不是 16 位。在前两个字节期间，MOSI 提供来自 tx[] 的两个字节，而对于其他 2 个字节，它是低/0。以下是控制台输出和信号的结果：

```
root@p1021rdb:~# ./spi_test_2bytes -D /dev/spidev32766.3
spi mode: 0
bits per word: 8
max speed: 500000 Hz (500 KHz)

00 00
root@p1021rdb:~# 
```

![图3](https://i.stack.imgur.com/LXbFh.png)

即使我将 MOSI 环回到 MISO 也没有收到数据（控制台输出仍然是相同的接收“00 00”）：

![图4](https://i.stack.imgur.com/Ge8eZ.png)

我对所有参数进行了一些调整，并决定将测试程序更改为使用半双工（仅传输）模式：

```
#ifdef ORIG
   uint8_t tx[] = {
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0x40, 0x00, 0x00, 0x00, 0x00, 0x95,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
      0xDE, 0xAD, 0xBE, 0xEF, 0xBA, 0xAD,
      0xF0, 0x0D,
   };
#else
   uint8_t tx[] = {
      0xAA, 0x81,
   };
#endif
    uint8_t rx[ARRAY_SIZE(tx)] = {0, };
    struct spi_ioc_transfer tr = {
        .tx_buf = (unsigned long)tx,
#ifdef ORIG      
        .rx_buf = (unsigned long)rx,
#else
      .rx_buf = 0,
#endif 
```

由于这是编译和执行的事情，就像预期的那样。16 位的 SPI_CLK 循环 16 次，MOSI 按预期提供数据。Cosole 输出显示没有接收到数据，并且信号与预期的一样：

```
root@p1021rdb:~# ./spi_test_2bytes -D /dev/spidev32766.3
spi mode: 0
bits per word: 8
max speed: 500000 Hz (500 KHz)

00 00
root@p1021rdb:~# 
```

![图5](https://i.stack.imgur.com/jYljT.png)

![图6](https://i.stack.imgur.com/gI6lK.png)

实际上，在我看来，我不是进行 2 字节全双工传输，而是进行 N 字节传输，然后进行 N 字节接收。

其实有两个问题：

1.  为什么要传输 0xAA、0x81 和 0x00、0x00？
2.  为什么（使用环回）原始代码能够在 rx 缓冲区中取回数据，但如果减少到 2 个字节，则没有接收到数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T21:20:02.030

好吧，这个帖子很安静。我刚刚阅读了一些部分，最近接触了 Linux 上的 SPI。但是，正如 [https://www.kernel.org/doc/Documentation/spi/spidev](https://www.kernel.org/doc/Documentation/spi/spidev)中所述， 异步读/写在用户空间中不可用。AFAIK 读/写只是 fcntl 的包装。因此，您需要编写自己的内核模块来实现异步 I/O。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T14:19:35.260

我知道这是一个非常古老的线程，但我一直在运行 OpenWRT 的 RT5350 上使用 spidev。我得到的结果和你完全一样；我只是无法进行全双工传输。阅读 RT5350 数据表，硬件似乎只能进行半双工 SPI 传输。每次传输要么是写入（在 MOSI 上输出字节，不读取任何内容），要么是读取（在 MOSI 上输出零，读取 MISO）。

我无法获得您的 P1021 芯片的数据表，但考虑到我们结果的相似性，我想说它的硬件 SPI 以类似的方式实现。

这意味着内核模块不是答案（ioctl SPI_IOC_MESSAGE 最终还是调用了 spi_async()）。实现全双工 SPI 的唯一方法是在软件中使用 GPIO。

RT5350参考： http: [//forum.vocore.io/viewtopic.php? f=3&t=72#p233](http://forum.vocore.io/viewtopic.php?f=3&t=72#p233)

# c# - C# 错误 - “并非所有代码路径都返回值”

> ID：15895339
> 
> 赞同：2
> 
> 时间：2013-04-09T07:00:22.823
> 
> 标签：c#

这是相当简单的方法。我`entity framework`用来获取一些数据，然后检查 a 中的一些值`if statement`。但是现在该方法标记为红色。

这是我的方法：

```
private bool IsSoleInProduction(long? shoeLastID)
{
    if (shoeLastID == null)
    {
        MessageBox.Show(Resources.ERROR_SAVE, 
                        "Error", 
                        MessageBoxButtons.OK, 
                        MessageBoxIcon.Error);
        return false;
    }

    ISoleService soleService = 
        UnityDependencyResolver.Instance.GetService<ISoleService>();

    List<Sole> entity = 
        soleService.All().Where(s => s.ShoeLastID == shoeLastID).ToList();

    if (entity.Count() != 0)
    {
        foreach (var items in entity)
        {
            if (items.Status == 20)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
    else
    {
        return false;
    }    
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T07:09:24.033

您需要利用 LINQ with [An](http://msdn.microsoft.com/en-us/library/bb337697.aspx) y，替换您的代码：

```
if (entity.Count() != 0)
{
    foreach (var items in entity)
    {
        if (items.Status == 20)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
}
else
{
    return false;
} 
```

使用更简单的代码：

```
 return entity.Any(item => item.Status == 20); 
```

甚至更好的性能：

```
 return soleService.All()
              .Any(s => s.ShoeLastID == shoeLastID
                     && s.Status == 20); 
```

**编辑：**随着您的评论，您需要以下代码：

```
 List<Sole> entity =  soleService.All()
                            .FirstOrDefault(s => s.ShoeLastID == shoeLastID);

  return entity == null ? false : entity.Status == 20; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:01:54.317

如果您的集合中没有项目`entity`，则不会执行包含 if/else 的任何分支。在这种情况下，不再有 return 语句，因为该`else`部分不会被执行，并且在你之外你`foreach`没有 return 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T07:15:44.557

编译器不会“看到”如果

```
entity.Count() != 0 
```

然后你的循环

```
foreach (var items in entity) 
```

将至少运行一次。因此，它看到了运行`forech`零次而不运行`else`块的可能性。

假设第一次*枚举*`entity`，它产生一些（有限数量的）项目。那么将是非零的。*然后*假设下次枚举相同的内容时，它不会产生任何项目！这将导致您的代码“失败”而不返回。*`Count``entity`*

 **您很可能可以保证每次重新枚举源时产生相同数量的项目。但是编译器不能。

解决方案：跳过`if (entity.Count() != 0)`并`foreach`立即执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T07:02:41.070

您没有从该代码块中重新运行任何内容

```
if (entity.Count() != 0)
            {
                foreach (var items in entity)
                {
                    if (items.Status == 20)
                    {
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                }
                // return someting
            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T07:10:41.953

你的`entity.Count()`is not`0`和你`entity`没有的是什么`items`？

这意味着您的`if`块将起作用，但`foreach`部分不起作用。由于您的`if`部分没有任何 return 语句，这就是您收到错误的原因。

您应该将 return 声明放在您的`if`部分。

```
if (entity.Count() != 0)
{
    foreach (var items in entity)
    {
        if (items.Status == 20)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    //return true or false
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-09T07:14:52.707

您可以考虑执行以下操作。这将遵循“**[单一退出点](https://stackoverflow.com/questions/4838828/why-should-a-function-have-only-one-exit-point)**”原则（有时有助于提高代码清晰度），并确保在任何情况下都有默认值：

```
private bool IsSoleInProduction(long? shoeLastID)
{
    // The main change: A default value, assuming "no":
    var isSoleInProduction = false; 

    if (shoeLastID == null)
    {
        MessageBox.Show(Resources.ERROR_SAVE, 
                        "Error", 
                        MessageBoxButtons.OK, 
                        MessageBoxIcon.Error);
        isSoleInProduction = false;
    }

    ISoleService soleService = 
        UnityDependencyResolver.Instance.GetService<ISoleService>();

    List<Sole> entity = 
        soleService.All().Where(s => s.ShoeLastID == shoeLastID).ToList();

    if (entity.Count() != 0)
    {
        foreach (var items in entity)
        {
            if (items.Status == 20)
            {
                isSoleInProduction = true;
            }
            else
            {
                isSoleInProduction = false;
            }
        }
    }
    else
    {
        isSoleInProduction = false;
    }    

    return isSoleInProduction;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T07:04:27.017

如果您的实体集合没有元素，您将无法到达 return 语句 - 您需要添加 return false 例如作为最后一条语句

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T07:05:51.610

由于错误状态，可能存在未评估任何 return 子句的情况（例如，如果您的列表中没有元素）。为了快速解决它，您可以放置​​一个默认的 return 语句，例如将最后一个`return`子句移到语句之外`else`。但这实际上取决于您期望的行为。

```
 private bool IsSoleInProduction(long? shoeLastID)
        {
            if (shoeLastID == null)
            {
                MessageBox.Show(Resources.ERROR_SAVE, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return false;
            }
            ISoleService soleService = UnityDependencyResolver.Instance.GetService<ISoleService>();
            List<Sole> entity = soleService.All().Where(s => s.ShoeLastID == shoeLastID).ToList();

            if (entity.Count() != 0)
            {
                foreach (var items in entity)
                {
                    if (items.Status == 20)
                    {
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                }
            }
            return false;
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-09T07:07:14.163

编译器不能保证第一次调用`Count`意味着`foreach`将至少循环一次（有充分的理由，因为如果您愿意，可以创建一个不正确的集合）。你可以这样做（不需要外部`if`）：

```
foreach (var items in entity)
{
    if (items.Status == 20)
    {
        return true;
    }
    else
    {
        return false;
    }
}

return false; 
```**

# jsp - 如何在 JSP 页面中访问 CDI bean

> ID：15895343
> 
> 赞同：0
> 
> 时间：2013-04-09T07:00:36.747
> 
> 标签：jsp, cdi

我想在我现有的 JSF 2-Websphere 应用程序中设置 CDI。我正在使用 CDI 转换范围来保存状态。

我已经在 WEB-INF 中包含了 bean.xml，并在我的类中包含了注释。但是我仍然无法访问 JSP 页面中的 CDI bean。任何人都可以提供有关如何完成此操作的任何示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:02:39.210

Weld[主页](http://seamframework.org/Weld)提到

> 对于 Servlet 容器 (Tomcat/Jetty) 或 Java EE 5 应用服务器：

```
<dependency>
    <groupId>org.jboss.weld.servlet</groupId>
    <artifactId>weld-servlet</artifactId>
    <version>1.1.10.Final</version>
</dependency> 
```

[18.3](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html/environments.html#d0e5223)。[Servlet 容器（例如 Tomcat 或 Jetty）](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html/environments.html#d0e5223)也告诉我们

> 虽然 JSR-299 不需要支持 servlet 环境，但 Weld 可以在 servlet 容器中使用，例如 Tomcat 6.0 或 Jetty 6.1。
> 
> Weld 可用作部署到 Servlet 容器的 Web 应用程序中的库。您应该放置`weld-servlet.jar`在`WEB-INF/lib`相对于 Web 根目录的目录中。`weld-servlet.jar`是一个**"uber-jar"**，这意味着它捆绑了在 Servlet 容器中运行所需的所有 Weld 和 CDI 位，以方便您使用。或者，您可以使用它的组件 jar。可以在工件`META-INF/DEPENDENCIES.txt`内的文件中找到传递依赖项的列表。`weld-servlet.jar`

`WEB-INF/web.xml`首先，我们还需要在 web 根目录中显式指定 servlet 侦听器（用于启动 Weld，并控制其与请求的交互） ：

```
<listener>
   <listener-class>org.jboss.weld.environment.servlet.Listener</listener-class>
</listener> 
```

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T18:52:02.883

它在 WebSphere 8.5.5 中运行良好。您需要使用`@Named("yourName")`并且通常使用一些与范围相关的注释来注释类。
然后你可以像这样使用 EL 在纯 jsp 中访问你的 bean：`${yourName.property}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-03T07:39:02.747

以下是在 JSP 中使用 CDI @Named 注释类的示例

班级 ：

```
@RequestScoped
@Named(value = "emp")
public class Employee {

    int empno;
    String ename;
    double salary;

    public Employee() {
        this.ename="Shankar";
    }

    public int getEmpno() {
        return empno;
    }

    public void setEmpno(int empno) {
        this.empno = empno;
    }

    public String getEname() {
        return ename;
    }

    public void setEname(String ename) {
        this.ename = ename;
    }

    public double getSalary() {
        return salary;
    }

    public void setSalary(double salary) {
        this.salary = salary;
    }

} 
```

现在 JSP Fragment 使用这个类

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>

 <!DOCTYPE html>
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <NoAutoGeneratedIdViewHandlertitle>JSP Page</title>
    </head>
    <body>

        <h1>Hello World!</h1>

        ${emp.ename}
    </body>
 </html> 
```

这个 @Named 注解的类可以在 JSP 中的 EL 中使用

希望这能让你满意。PL。要求任何澄清

# blackberry - Blackberry 8520 消息字段为空白

> ID：15895348
> 
> 赞同：2
> 
> 时间：2013-04-09T07:01:09.920
> 
> 标签：blackberry, sms

在我的一个应用程序中，我需要通过短信分享链接。我正在使用黑莓操作系统 5.0。这是通过 SMS 共享消息的代码。

```
MessageConnection mc = null;
try {
   mc = (MessageConnection) Connector.open("sms://");
} catch (IOException e) {
   e.printStackTrace();
}

TextMessage textMessage = (TextMessage) mc.newMessage(MessageConnection.TEXT_MESSAGE);
textMessage.setAddress("sms://");
System.out.println("======1====");
textMessage.setPayloadText("afasdfadsfsdaf");
Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES,
                         new MessageArguments(textMessage)); 
```

如果是 9810，它会显示带有文本的消息框。以下是图片。 ![如果是 9810 图像](https://i.stack.imgur.com/QDgtE.png)

我对 8520 使用相同的代码。但图像如下：- ![在 8520 的情况下，它不显示文本](https://i.stack.imgur.com/FJom4.png)

请帮我看看这是否可行，如果不可行，请分享我这个功能不可行的任何具体链接。

谢谢

# android - 在 Eclipse 中导入 Maps.jar

> ID：15895356
> 
> 赞同：2
> 
> 时间：2013-04-09T07:01:42.773
> 
> 标签：android, google-maps-api-3, android-maps

我无法找到并导入适用于 Android 的 Google 地图的 jar 文件。

如何在 Eclipse 中导入 Google Maps API maps.jar 文件。？

请帮忙，

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:16:33.097

首先更新您的 SDK->Google Play 服务，然后

在您的计算机中找到此路径：

```
...\android-sdk-windows\add-ons\addon-google_apis-google-17\libs\maps.jar 
```

`Add External Jar`使用...添加这个罐子

我已经从上面的解决方案中解决了我的问题..

谢谢...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:06:52.187

您应该在 Eclipse（Android SDK 管理器）中下载 Google APIs。使用任何 Google API 进行编译，您将拥有已包含的 google maps 等软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:10:01.347

尝试阅读本教程

[Android 与 Google Maps V2 配合使用](http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/)

# php - “白屏死机”的原因 - WordPress CMS

> ID：15895361
> 
> 赞同：-2
> 
> 时间：2013-04-09T07:01:55.750
> 
> 标签：php, wordpress, content-management-system

我最近在 WordPress 上安装了一个主题，当它被激活时，它只会导致一个空白的白屏。造成这种情况的可能原因是什么？以及开始发现问题的步骤。

当将站点从我们的测试服务器移动到托管公司的服务器时，问题就暴露出来了，我们曾经用它来托管各种其他 WordPress 站点。在我的实例中，白屏的可能原因是什么？以及开始发现问题的步骤。我在研究之后采取了一些措施，例如增加内存限制和禁用插件等，但它们在原始服务器上运行良好，所以我怀疑它可能是由插件等引起的。

谢谢

**更新**

对，到目前为止，我已将内存限制增加到 128M，并禁用了所有插件以及临时命名它们的文件夹。

由于@Sabari 的建议，我已启用调试，这导致了以下错误：**致命错误**：调用**/home/neatly/public_html/wp-content/themes/best_wedding_dress-babe23c7e828662f1a07c296a5608f52/functions中的未定义函数 mb_internal_encoding() .php**在第**12行**

我对 PHP 并没有什么用处，但是您可以就如何进行，例如在哪里以及如何定义 mb_internal_encoding 提出一些建议。这是第 12 行的代码：

```
mb_internal_encoding(get_bloginfo('charset')); 
```

我想重申，这在我们的测试服务器上运行良好，所有这些问题只有在移动到新服务器时才会出现。我已经多次将 WordPress 网站从一台服务器转移到另一台服务器，并在这个特定网站上重新下载并上传了 3 次内容和数据库。两个版本（测试服务器和新服务器）具有相同版本的 WordPress，因此新服务器可能具有不同的技术。这些方面是否有任何可能导致此错误的内容？

**Sabari建议的答案**

通过在我们的虚拟主机服务器上启用和配置 mbstring（多字节支持）解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:14:29.270

```
WSOD. OK... possible cause, theme exhausts the memory limit
a) clear you cache
b) Make a backup before changing anything
c) Disable the plugins,  
d) Replace Theme with a Default Theme
e) Re-install Wordpress 
```

使用调试进行故障排除

```
error_reporting(E_ALL); ini_set('display_errors', 1); 
```

在 WordPress 中：

```
define( 'WP_DEBUG', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:44:45.560

我认为您的问题与`mbstring`未启用扩展有关。

`mb_internal_encoding`功能需要`mbstring`扩展。它是一个`non-default`扩展，默认情况下未启用。

您可以查看这里以获取有关如何安装和配置`mb_string` [http://www.php.net/mbstring](http://www.php.net/mbstring)的更多信息。

如果您在 Windows 上，请取消注释`extension=php_mbstring.dll;`php.ini 中的行（在 extension=php_mbstring.dll 之前删除分号）。

如果你在linux上，你可以试试`yum install php-mbstring`centos。

对于ubuntu我不清楚。

在此之后重新启动 apache。

**更新**：

要检查扩展是否启用，您可以使用：

```
if (extension_loaded('mbstring')) {
    //functions using mb string extensions
} 
```

新更新：

```
if (extension_loaded('mbstring')) {
    mb_internal_encoding(get_bloginfo('charset'));
} 
```

我认为 WordPress 有一个内置函数`wp_set_internal_encoding()`可以处理这些问题。你只需要在你的文件中调用这个函数。wp_set_internal_encoding() 所做的与我上面解释的相同：

```
function wp_set_internal_encoding() {
    if ( function_exists( 'mb_internal_encoding' ) ) {
        if ( !@mb_internal_encoding( get_option( 'blog_charset' ) ) )
            mb_internal_encoding( 'UTF-8' );
    }
} 
```

它检查是否`mb_internal_encoding` `function`存在（该函数仅在加载扩展时才存在）。这是检查函数是否存在的另一种方法。

优点是您只需调用该函数而不必担心其他事情。WordPress 将处理这些 .

**新更新：**

`mb_strlen`对于您的第一个错误，请将您的函数包装在`function_exists ()` like 中：

```
if ( function_exists( 'mb_strlen' ) ) {
    mb_strlen();
 } 
```

可能是如果您启用了扩展程序并且它可能已损坏。所以最好在调用之前检查函数是否存在。

对于第二个错误，您不需要`wp_set_internal_encoding`在 functions.php 或任何其他文件中添加。它是 WordPress 的内置功能。你只需要调用函数`wp_set_internal_encoding`。您实际上是在声明存在的功能。所以 PHP 会返回致命错误。

**新更新**

在您的函数中，您有 mb_strlen 它将仅启用 mbstring 扩展。所以你应该改变

```
function theme_trim_long_str($str, $len = 50, $sep = ' '){
    $words = split($sep, $str);
    $wcount = count($words);
    while( $wcount > 0 && mb_strlen(join($sep, array_slice($words, 0, $wcount))) > $len)     $wcount--;
    if ($wcount != count($words)) {
        $str = join($sep, array_slice($words, 0, $wcount)) . '&hellip;';
    }
    return $str;
} 
```

到

```
function theme_trim_long_str($str, $len = 50, $sep = ' '){
    $words = split($sep, $str);
    $wcount = count($words);

    if ( function_exists( 'mb_strlen' ) ) {
        while( $wcount > 0 && mb_strlen(join($sep, array_slice($words, 0, $wcount))) > $len)     
            $wcount--;
    } else {
        while( $wcount > 0 && strlen(join($sep, array_slice($words, 0, $wcount))) > $len)
            $wcount--;
    }
    if ($wcount != count($words)) {
        $str = join($sep, array_slice($words, 0, $wcount)) . '&hellip;';
    }
    return $str;
} 
```

希望这可以帮助你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:05:16.047

很多事情都可能发生。如果文件未正确上传，则可能会发生。如果主题与函数文件有任何错误，也可能会发生。

# asp.net-mvc - 关系字段未在编辑操作中更新（ASP.NET、EF5）

> ID：15895362
> 
> 赞同：2
> 
> 时间：2013-04-09T07:02:02.773
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-5, html-select

我真的很感激对此的一些见解：以下代码

```
 [HttpPost]
    public ActionResult Edit(BeamCollection beamcollection)
    {
        if (ModelState.IsValid)
        {
            beamcollection.BeamMaterial = db.Types.Find(Convert.ToInt32(Request.Form.Get("BeamMaterial_ID")));
            db.Entry(beamcollection).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Details", "Bridge");
        }
        return View(beamcollection);
    } 
```

当我尝试修改 BeamCollection 记录时，所有更改都会反映并保存到数据库中，除了从 DropDownList 获取所选值的 beamcollection.BeamMaterial。当我调试时，我可以看到选定的值被分配给了 beamcollection.BeamMaterial！

顺便说一下，这个字段定义如下

```
public virtual AllTypes BeamMaterial { get; set; } 
```

所以它反映了与AllTypes的一对多关系，但它是一种单向关系。

有什么奇怪的（对我来说），是相同的技术被用于 Create 动作，它完美地工作：

```
 public ActionResult Create(BeamCollection beamcollection)
    {
        if (ModelState.IsValid)
        {
            beamcollection.BridgeInfo = db.Bridges.Find(bridgeID);
            beamcollection.BeamMaterial = db.Types.Find(Convert.ToInt32(Request.Form.Get("BeamMaterial_ID")));
            db.BeamCollections.Add(beamcollection);
            db.SaveChanges();
            return RedirectToAction("Details", "Bridge");
        }
        return View(beamcollection);
    } 
```

为什么会发生这种情况以及如何使其工作，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:54:09.270

尝试使用：

```
db.attach(beamcollection.GetType().Name,beamcollection);
db.ObjectStateManager.ChangeObjectState(beamcollection, EntityState.Modified);
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:37:16.430

感谢Fabrice的提示，我设法找到了正确的方法，这是代码：

```
 var currentBeamCollection = db.BeamCollections.Find(beamcollection.ID);
            db.Entry(currentBeamCollection).CurrentValues.SetValues(beamcollection);
            currentBeamCollection.BeamMaterial = beamcollection.BeamMaterial;
            db.SaveChanges(); 
```

逻辑如下：获取原始记录，更新所有字段（导航属性除外，看下文），更新导航属性，最后保存。

当我尝试执行以下操作时

```
db.Entry(currentBeamCollection).CurrentValues.SetValues(beamcollection.BeamMaterial); 
```

系统失败，出现一个抱怨设置 ID 属性的异常。我还读到 CurrentValues.SetValues() 没有更新导航属性，我注意到 BeamMaterial 属性没有更新，所以我需要手动更新它。

谢谢法布里斯。

# android - 安卓 FTP 服务器

> ID：15895363
> 
> 赞同：7
> 
> 时间：2013-04-09T07:02:05.650
> 
> 标签：android, ftp, sd-card

我正在使用以下[代码](http://code.google.com/p/simpleftp/source/browse/trunk/src/com/googlecode/simpleftp/FTPServer.java?r=4)使 android 设备成为 ftp 服务器（Android 内部存储）。我得到了例外`os.android.NetworkOnMainThread`。我试图将 onStart 代码放入`AsyncTask`但应用程序永远不会执行并在启动时崩溃。任何有关 Android 上的 ftp 服务器的帮助都会很棒，因为我不知道如何让它工作。

这是`MainActivity`代码

```
package com.googlecode.simpleftp;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.Toast;

public class FTPServer extends Activity {
    private static int COMMAND_PORT = 2121;
    static final int DIALOG_ALERT_ID = 0;
    private static ExecutorService executor  = Executors.newCachedThreadPool();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.my_menu, menu);
            return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {    
            // Handle item selection    
            switch (item.getItemId()) {
                    case R.id.new_game:    
                            System.out.println("New game button is pressed!");
                            //newGame();        
                            return true;    
                    case R.id.quit:        
                            System.out.println("Quit button is pressed!");
                            showDialog(DIALOG_ALERT_ID);        
                            return true;    
                    default:        
                            return super.onOptionsItemSelected(item);    }
    }

    @Override
    protected Dialog onCreateDialog(int id){
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Are you sure you want to exit?")
            .setCancelable(false).setPositiveButton("yes", new DialogInterface.OnClickListener(){
                    @Override
                    public void onClick(DialogInterface dialog, int id){
                            FTPServer.this.finish();
                    }
            })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();

                    }
            });
            AlertDialog alert = builder.create();
            return alert;
    } 
```

这是 ServerPI 代码

```
 import java.io.BufferedReader;
 import java.io.File;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.io.PrintWriter;
 import java.net.Socket;

 public class ServerPI implements Runnable{
    private Socket clientSocket;
    private BufferedReader in;
    private PrintWriter out;

    private String baseDir;
    private String relativeDir;
    private String absoluteDir;
    private String fileName;
    private String filePath;

    public ServerPI(Socket incoming) throws IOException{
            this.clientSocket = incoming;
            in = new BufferedReader(new InputStreamReader(this.clientSocket.getInputStream()));
            out = new PrintWriter(this.clientSocket.getOutputStream(), true);

            baseDir = new File("").getAbsolutePath();

            relativeDir = "/";
            absoluteDir = baseDir + relativeDir;
            fileName = "";
            filePath = absoluteDir + "/" + fileName;
    }

    private void readCommandLoop() throws IOException {
            String line = null;
            reply(220, "Welcome to the SimpleFTP server!");
            while((line = in.readLine()) != null){
                    int replyCode = executeCommand(line.trim());
                    if(replyCode == 221){
                            return;
                    }
            }
    }

    private int executeCommand(String trim) {
            // TODO Auto-generated method stub
            return 0;
    }

    public int reply(int statusCode, String statusMessage){
            out.println(statusCode + " " + statusMessage);
            return statusCode;
    }

    @Override
    public void run(){
            try{
                    this.readCommandLoop();
            } catch (IOException e){
                    e.printStackTrace();
            }
            finally {
                    try {
                            if(in != null){
                                    in.close();
                                    in = null;
                            }
                            if(out != null){
                                    out.close();
                                    out = null;
                            }
                            if (clientSocket != null){
                                    clientSocket.close();
                                    clientSocket = null;
                            }
                    }
                    catch (IOException e){
                            e.printStackTrace();
                    }
            }
    }
    } 
```

我已经把代码放在了AsyncTask中，这里是

```
 private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {
           ServerSocket s = null;
    Socket incoming = null;

    try{
            s = new ServerSocket(COMMAND_PORT);
            String ip = (s.getInetAddress()).getHostAddress();
            Context context = this.getApplicationContext();
            CharSequence text = ip;
            int duration = Toast.LENGTH_LONG;

            Toast toast = Toast.makeText(context, text, duration);
            Thread.sleep(1000);
            toast.show();
            while(true){
                    incoming = s.accept();
                    executor.execute(new ServerPI(incoming));
            }
    }
    catch(Exception e){
            System.out.println(e.toString());
            e.printStackTrace();
    }
    finally{
            try
                    {
                            if(incoming != null)incoming.close();
                    }
                    catch(IOException ignore)
                    {
                            //ignore
                    }

                    try
                    {
                            if (s!= null)
                            {
                                    s.close();
                            }
                    }
                    catch(IOException ignore)
                    {
                            //ignore
                    }
    }

            return "Executed";
      }      

      @Override
      protected void onPostExecute(String result) {               
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

我在 onCreate 方法中调用 longOperation。应用程序在启动时崩溃是什么问题。

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_fullscreen);
            new LongOperation().execute();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:08:39.790

也许是因为您没有在清单中设置权限？您必须设置互联网使用权限。

如果这不起作用，请告诉我们是哪一行引发了异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:13:05.910

`while(true){ incoming = s.accept(); ...}`你不能把它放在 OnStart() 中。这应该在一个线程中完成。所以`ServerSocket s = null;`应该是你活动的一个变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T07:56:42.890

所以我在我的应用程序中使用 Swiftp 应用程序（开源）作为服务，它帮助我完成了我的任务。感谢所有挺身而出提供帮助的人。如果有人想关注，这是[链接](http://code.google.com/p/swiftp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:15:29.377

请在此处发布您的代码。

**发生 NetworkOnMainthreadException 是因为您可能在 Main UI Thread 上运行与网络相关的操作**。您应该为此目的使用 asynctask

这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

```
class TheTask extends AsyncTask<Void,Void,Void>
{
protected void onPreExecute()
  {           super.onPreExecute();
             //display progressdialog.
  }  

protected void doInBackground(Void ...params)//return result here
{  
//http request. do not update ui here
//call webservice
//return result here
return null;
 } 

protected void onPostExecute(Void result)//result of doInBackground is passed a parameter
{     
    super.onPostExecute(result);
    //dismiss progressdialog.
    //update ui using the result returned form doInbackground()
} 
} 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。检查标题**The 4 Steps 下的主题。**

asynctask 的工作示例@[如果必须使用 AsynxTasc 但我仍然无法工作，则在 android 4.0.3 中使用教程？](https://stackoverflow.com/questions/15521740/to-use-the-tutorial-in-android-4-0-3-if-had-to-work-with-asynxtasc-but-i-still-d/15521935#15521935).

上面在 doInBakckground() 中进行了网络服务调用。返回结果并通过在 onPostExecute() 中的 textview 中设置结果来更新 ui。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:22:06.303

在 android 3.0 更高版本的主线程中不能进行网络操作。使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)进行此网络操作。[请参阅此](http://developer.android.com/training/basics/network-ops/connecting.html)以获取更多说明

# linux - Windows 上的 Cygwin + Linux NDK

> ID：15895364
> 
> 赞同：0
> 
> 时间：2013-04-09T07:02:05.987
> 
> 标签：linux, eclipse-plugin, android-ndk, cygwin

我觉得这听起来很奇怪，但这是我现在的情况。

我在 Eclipse (Windows) 上有一个 Android JNI 项目，但是在我朋友在 Ubuntu 上的 Eclipse 中配置之后，现在我的 Eclipse 上的自动构建插件无法工作（它引发错误：...ld.exe : 找不到-l):

```
**** Build of configuration Default for project TachoPro ****
ndk-build.cmd all 
SharedLibrary  : libtachometer_core.so
E:/Android/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe: cannot find -ltachometer_core_armv7_a_cortex_a9
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi-v7a/libtachometer_core.so] Error 1
**** Build Finished **** 
```

他说我必须下载 NDK for Linux 然后使用 Cygwin 构建。但是另一个错误（似乎比以前更复杂）到达： [http ://www.mediafire.com/view/?o0nthcn3hn0b0ix](http://www.mediafire.com/view/?o0nthcn3hn0b0ix)

如果你经历过，请给我一些建议...>“<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:06:24.800

了解如何使用 Android 和 NDK 进行开发，**您不需要 Cygwin**在 Windows 下使用 NDK 进行开发，**Cygwin 也不是开发人员的环境**（在项目主页上写得很清楚！）。

我不知道你们 2 在做什么，但肯定与 Android 无关，也不是很好地使用 Cygwin 或 Android 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:19:02.923

如果您在 Windows 上工作，则必须使用 Windows 版本的 Android NDK，而不是 Linux。如果您从朋友那里获取了指向 linux 可执行文件的配置文件，则需要修复它。只有这样。你能把他给你的配置文件贴出来吗？

# c++ - boost::bind 隐式转换为 boost::function 或函数指针

> ID：15895365
> 
> 赞同：0
> 
> 时间：2013-04-09T07:02:12.573
> 
> 标签：c++, boost, boost-bind, boost-function

我正在使用 boost::function 这样的：

```
template<class T1>
void run(boost::function<void (T1)> func, string arg)
{
    T1 p1 = parse<T1>(arg);
    func(p1);
} 
```

像这样使用时，一切正常：

```
void test1(int i)
{
    cout << "test1 i=" << i << endl;
}

...

boost::function<void (int)> f = &test1;
run(f, "42"); 
```

我希望能够直接传递原始函数指针，所以我重载了 run() 函数，如下所示：

```
template<class T1>
void run(void (*func)(T1), string arg)
{
    T1 p1 = parse<T1>(arg);
    (*func)(p1);
}

...

run(&test1, "42"); // this is OK now 
```

现在，我希望能够将 boost::bind 的结果传递给 run() 函数。像这样：

```
void test2(int i, string s)
{
    cout << "test2 i=" << i << " s=" << s << endl;
}

...

run(boost::bind(&test2, _1, "test"), "42"); // Edit: Added missing parameter 42 
```

但这不会编译：*已编辑*

```
bind.cpp: In function ‘int main()’:
bind.cpp:33:59: error: no matching function for call to ‘run(boost::_bi::bind_t<void, void (*)(int, std::basic_string<char>), boost::_bi::list2<boost::arg<1>, boost::_bi::value<std::basic_string<char> > > >, std::string)’
bind.cpp:33:59: note: candidates are:
bind.cpp:7:6: note: template<class T1> void run(boost::function<void(T1)>, std::string)
bind.cpp:14:6: note: template<class T1> void run(void (*)(T1), std::string) 
```

我应该如何重载 run() 以接受 boost::bind()？

**编辑 2**

我知道我可以这样做：

```
boost::function<void (int)> f = boost::bind(&test2, _1, string("test"));
run(f, "42"); 
```

但我希望用法不那么冗长。

**编辑 3**

将 run() 原型从`run(boost::function<void (T1)>, T1)`更改`run(boost::function<void (T1)>, string)`为详细说明实际用例。参考。伊戈尔 R. 的回答

整个源文件可以在[这里获取](https://gist.github.com/anorm/5394177)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:32:04.687

`function`的结果类型和结果类型都不能`bind`转换为函数指针，因此您不能将它们传递给`run`具有当前签名的函数。

但是，您可以更改`run`签名以允许它接受任何*可调用*的：

```
template<class F, class A1>
void run(F f, A1 arg)
{
  f(arg);
} 
```

现在您可以传递指针函数、活页夹`boost::function`或任何您希望的*可调用对象*——只要它需要 1 个参数。（但是请注意，使用这个简单的签名`run`不会无缝地将参数[转发到。）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1385.htm)`f`

# android - 创建可扩展列表时出现Android运行时异常

> ID：15895368
> 
> 赞同：0
> 
> 时间：2013-04-09T07:02:28.880
> 
> 标签：android, android-listview

我正在尝试创建一个显示菜单项列表的可扩展列表。但是，在执行时，单击新活动的按钮会导致致命异常。

我的源代码如下所示：

```
public class orders extends ExpandableListActivity{
    //public String NAME="DishName";

    //ExpandableListView explistview;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.orders);

        SimpleExpandableListAdapter expListAdapter=
                new SimpleExpandableListAdapter(
                        this,
                        createGroupList(),
                        R.layout.group_row,
                        new String[] { "Group Item" },
                        new int[] { R.id.row_name },
                        createChildList(),
                        R.layout.child_row,
                        new String[] {"Sub Item"},
                        new int[] { R.id.grp_child}
                        );
        setListAdapter(expListAdapter);

    }

    public List createGroupList()
    {
         ArrayList result = new ArrayList();

         HashMap m=new HashMap();
         m.put("Group Item","PIZZA's");
         result.add( m );
    /*   m.put("Group Item","PASTRIES");
         result.add( m );
         m.put("Group Item","CHATS");
         result.add( m );
         m.put("Group Item","MEALS");
         result.add( m );*/
         return (List)result;
    }

    public List createChildList()
    {
        ArrayList result = new ArrayList();
        ArrayList secList = new ArrayList();
        HashMap child = new HashMap();
        child.put( "Sub Item", "Brick oven pizza"); 
        secList.add( child );
        child.put( "Sub Item", "Chicago style"); 
        secList.add( child );
        child.put( "Sub Item", "French break pizza"); 
        secList.add( child );
        child.put( "Sub Item", "Italian pizza"); 
        secList.add( child );
        child.put( "Sub Item", "New York style pizza"); 
        secList.add( child );

        result.add( secList );

        child.put( "Sub Item", "Black Forest"); 
        secList.add( child );
        child.put( "Sub Item", "Chocolate Moose"); 
        secList.add( child );

        result.add( secList );

        child.put( "Sub Item", "Bhel Puri"); 
        secList.add( child );
        child.put( "Sub Item", "Paani Puri"); 
        secList.add( child );
        child.put( "Sub Item", "Masala Puri"); 
        secList.add( child );
        child.put( "Sub Item", "Samosa Masala"); 
        secList.add( child );

        result.add( secList );

        child.put( "Sub Item", "North Indian Meals"); 
        secList.add( child );
        child.put( "Sub Item", "South Indian Meals"); 
        secList.add( child );

        result.add( secList );

        return result;

    }

    public void  onContentChanged  () {
        //System.out.println("onContentChanged");
        Log.d("MYAPP", "onContentChanged....");
        super.onContentChanged();         
    }

     /* This function is called on each child click */
    public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
        //System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
        Log.d("MYAPP","Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
        return true;
    }

    /* This function is called on expansion of the group */
    public void  onGroupExpand  (int groupPosition) {
        try{
             //System.out.println("Group exapanding Listener => groupPosition = " + groupPosition);
            Log.d("MYAPP","Group exapanding Listener => groupPosition = " + groupPosition);
        }catch(Exception e){
            //System.out.println(" groupPosition Errrr +++ " + e.getMessage());
            Log.d("MYAPP"," groupPosition Errrr +++ " + e.getMessage());
        }
    }

} 
```

以下是异常的详细信息：

```
04-09 12:22:02.500: E/AndroidRuntime(22571): FATAL EXCEPTION: main
04-09 12:22:02.500: E/AndroidRuntime(22571): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.takemyorder/com.takemyorder.orders}: java.lang.RuntimeException: Your content must have a ExpandableListView whose id attribute is 'android.R.id.list'
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2077)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread.access$600(ActivityThread.java:134)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.os.Looper.loop(Looper.java:154)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread.main(ActivityThread.java:4624)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at dalvik.system.NativeStart.main(Native Method)
04-09 12:22:02.500: E/AndroidRuntime(22571): Caused by: java.lang.RuntimeException: Your content must have a ExpandableListView whose id attribute is 'android.R.id.list'
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ExpandableListActivity.onContentChanged(ExpandableListActivity.java:222)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at com.takemyorder.orders.onContentChanged(orders.java:110)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:257)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.Activity.setContentView(Activity.java:1837)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at com.takemyorder.orders.onCreate(orders.java:26)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.Activity.performCreate(Activity.java:4479)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-09 12:22:02.500: E/AndroidRuntime(22571):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2041)
04-09 12:22:02.500: E/AndroidRuntime(22571):    ... 11 more 
```

任何人都可以建议在上面的代码中进行更改。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:11:29.537

您的 Expandable List 必须具有在您的for ExpandableList`android:id="@+id/android:list"`中设置此属性的 ID。`orders.xml`检查这个[ExpandableListActivity](http://developer.android.com/reference/android/app/ExpandableListActivity.html)

例子：

```
 <ExpandableListView android:id="@id/android:list"
               android:layout_width="match_parent" 
               android:layout_height="match_parent"
               android:background="#00FF00"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/> 
```

# javascript - 如何在 asp.net 用户控件中调整子列表框的高度

> ID：15895378
> 
> 赞同：2
> 
> 时间：2013-04-09T07:03:03.950
> 
> 标签：javascript, jquery, asp.net, html, css

给定以下用户控件标记：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SearchItem.ascx.cs" Inherits="MyWeb.controls.SearchItem" %>

<div id="container" runat="server" style="height: 100%; width: 100%;">
    <div>
        <asp:Label ID="lblSearch" runat="server" Text="Search:"></asp:Label>
        <br />
        <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
        <input id="btnSearch" type="button" value="Search" onclick="SearchClick(this)" />
</div>
<div>
    <asp:Label ID="lblItems" runat="server" Text="Available Items:"></asp:Label>
</div>
<div id="itemContents" runat="server" style="min-height: 50%; width: 100%;border: 1px solid black;">
    <asp:ListBox ID="lbxResults" runat="server" SelectionMode="Single" Width="100%" AutoPostBack="True"></asp:ListBox>
</div> 
```

我希望用户控件高度等于占位符高度，列表框可​​以增长并填充任何高度差，因为所有其他控件的大小都是已知的。一些有用的信息：

*   高度可以有以下值：300、400、600 px，因此需要列表框高度来补偿任何高度差。

*   列表框可以包含 0 到 2000 个元素。

*   占位符可以是 div 或 asp.net 选项卡容器。

出于测试目的，我做了：

1.  创建一个新的用户控件，例如。搜索项.ascx

2.  创建一个默认的 aspx 页面，例如：

a) 添加用户控件 //<%@ 注册 TagPrefix="uc" TagName="SearchItem" Src="~/Controls/SearchItem.ascx" %>

b) 添加到正文

```
 <form id="form1" runat="server">
<div id="ChangeMyHeight" style="height: 300px; width: 30%; float: left;">
    <uc:SearchItem ID="AvailableItems" runat="server">
    </uc:SearchItem>
</div>
</form> 
```

现在，如果将容器 div 的高度更改为 500、600.(ChangeMyHeight)，您将拥有：

当前行为：

*   列表框未正确调整大小。（填补高差）

预期行为：

*   列表框正在正确调整大小并填充高度差。（就像在 Winforms 中对接）

我的首选是 css/jquery 解决方案，但后面的代码也可以（我正在考虑使用 height 属性来设置子控件）

笔记：

1.  为简洁起见，示例标记使用样式。
2.  示例标记为演示目的硬编码了一些值（因此演示适用于高度 300 像素，但不适用于其他值），请随时根据需要更改样式/html。
3.  环境：VS2010/.NET 4.0/jQuery 最新。
4.  浏览器：FF、IE7/8/9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:40:21.950

- - - - -默认

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="PlayGround.Default" %> 
```

```
<script type="text/javascript">

    function changeHeight() {

        document.getElementById('ChangeMyHeight').style.height = Math.ceil(Math.random() * 1000) + 'px';
    }
</script>

<form id="form1" runat="server">

    <input id="Button1" type="button" value="Change Height" onclick="changeHeight()" />

<div id="ChangeMyHeight" style="height: 300px; width: 30%; float: left;border:1px solid red;">

    <uc1:SearchItem runat="server" ID="SearchItem" />

</div>
</form> 
```

- - - 控制

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="SearchItem.ascx.cs" Inherits="PlayGround.SearchItem" %>
<asp:ListBox ID="ListBox1" ClientIDMode="Static" runat="server" style="height:100%"></asp:ListBox> 
```

------控制落后

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var cnt = 1999;

        for (int i = 0; i < cnt; i++)
        {
            this.ListBox1.Items.Add(Path.GetRandomFileName());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:37:51.943

使用 CSS`select[attribute] { height:400px;}`

在此属性 = 您的子列表框 ID 的唯一属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T07:01:52.817

答案需要一些 Jquery 代码根据当前父级的高度重新计算内部列表框的高度。将此代码添加到测试页面的 head 部分：

```
<script type='text/javascript'>
//Method to resize when first loaded or resized, added to admin page.
$(function () {
    ResizeHeightControlBasedOnParent('<%= ucSearchUser.ItemContentsId %>');
});

function ResizeHeightControlBasedOnParent(targetId) {
    var obj = $('#' + targetId);
    if (obj.length > 0 && obj.height() > 0) {
        var objParent = obj.parent();
        obj.height(function (index, height) {
            var objParent = $(this).parent();
            if (objParent.height() <= 0)
                return 0;
            return objParent.height() + objParent.offset().top - $(obj[0]).offset().top;
        });
    }
}
//Helper to test it works for diff div heights.Added to helper onclick button
function changeHeight() {
    var newH = 300 + Math.ceil(Math.random() * 300);
    document.getElementById('changeMyHeight').style.height = newH + 'px';
    ResizeHeightControlBasedOnParent('<%= ucSearchUser.ItemContentsId %>');
}

</script> 
```

其中ItemContentsId在后面的用户控件代码中定义如下：

```
public string ItemContentsId
{
    get { return this.itemContents.ClientID; }//Listbox id
} 
```

# compilation - 编译错误：架构 x86_64 的未定义符号

> ID：15895380
> 
> 赞同：0
> 
> 时间：2013-04-09T07:03:06.677
> 
> 标签：compilation, fortran, fft, fftw

我正在尝试使用一个 fortran 库来执行名为“2Decomp&FFT”（[http://www.2decomp.org/download.html](http://www.2decomp.org/download.html)）的 FFT。这个库有一个内置的 FFT 引擎，可以很好地与我的代码配合使用。为了在这个库中使用 FFTW3 引擎，而不是它的内置引擎，说明说：

> 在 2DECOMP 中编辑“src/Makefile.inc”文件，将 FFT 引擎更改为“FFT=fftw3”。您还需要在同一文件中设置 FFTW_PATH 变量以指向您的 FFTW 安装。然后重新编译一切。

我在本地 Mac 上安装了 FFTW3.3 并按照说明重新编译了库。但是，在那之后，当我尝试使用库编译代码时，链接时出现以下错误。

```
Undefined symbols for architecture x86_64:
"_dfftw_destroy_plan_", referenced from:
  ___decomp_2d_fft_MOD_decomp_2d_fft_finalize in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_execute_dft_", referenced from:
  ___decomp_2d_fft_MOD_c2c_1m_z in lib2decomp_fft.a(fft_fftw3.o)
  ___decomp_2d_fft_MOD_c2c_1m_x in lib2decomp_fft.a(fft_fftw3.o)
  ___decomp_2d_fft_MOD_c2c_1m_y in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_execute_dft_c2r_", referenced from:
  ___decomp_2d_fft_MOD_c2r_1m_x in lib2decomp_fft.a(fft_fftw3.o)
  ___decomp_2d_fft_MOD_fft_3d_c2r in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_execute_dft_r2c_", referenced from:
  ___decomp_2d_fft_MOD_fft_3d_r2c in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_plan_many_dft_", referenced from:
  ___decomp_2d_fft_MOD_c2c_1m_z_plan in lib2decomp_fft.a(fft_fftw3.o)
  ___decomp_2d_fft_MOD_c2c_1m_x_plan in lib2decomp_fft.a(fft_fftw3.o)
  ___decomp_2d_fft_MOD_c2c_1m_y_plan in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_plan_many_dft_c2r_", referenced from:
  ___decomp_2d_fft_MOD_init_fft_engine in lib2decomp_fft.a(fft_fftw3.o)
"_dfftw_plan_many_dft_r2c_", referenced from:
  ___decomp_2d_fft_MOD_init_fft_engine in lib2decomp_fft.a(fft_fftw3.o)
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status
make: *** [Sora_v71] Error 1 
```

这是我编写的调用此库的最小代码：程序测试

```
 use decomp_2d
  use decomp_2d_fft

  integer n, pr, pc

  call decomp_2d_init(n,n,n,pr,pc)
  call decomp_2d_fft_init

  stop
  end 
```

这是我正在使用的 Makefile（DECOMP2D 是设置为包含库的文件夹的环境变量）：

```
## ------------------------------------------------------------------------
# Lines included for using the 2decomp libraries

INC_2DECOMP = -I$(DECOMP2D)/include/
LIB_2DECOMP = -L$(DECOMP2D)/lib/ -l2decomp_fft

## ------------------------------------------------------------------------

RM           =  rm
SRCDIR       = .
LIBDIR       = .

BIN          = a.out
OBJS         = main.o 

## ------------------------------------------------------------------------

# default command for compiler, linker
FC       =  mpif90

FFLAGS   = $(F90FLAG) $(INC_2DECOMP)
LFLAGS   = $(F90FLAG) $(LIB_2DECOMP) -L$(LIBDIR)

## ------------------------------------------------------------------------

# default action
all: $(BIN)

$(BIN): $(OBJS)
@echo Linking $(BIN) .....
$(FC) $(OBJS)  $(LFLAGS) $(FFLAGS) -o $@ 

.f.o:
@echo Compiling $*.f
$(FC)  $(LFLAGS) $(FFLAGS) -c $(SRCDIR)/$*.f

clean:
@echo 'Cleaning .....'
$(RM) -f core *.o *~ *.L *.O $(BIN) $(SIZE_FILE) 
```

# perl - 将数组元素复制到哈希

> ID：15895382
> 
> 赞同：1
> 
> 时间：2013-04-09T07:03:10.027
> 
> 标签：perl

我有一个具有以下结构的哈希数组：

```
@fields 
(
 {
   "id" => "Name",
   "type" => "Text",
   "value" = undef,
 },
 {
   "id" => "DOB",
   "type" => "Date",
   "value" = undef,
 },
); 
```

我有一个包含以下元素的数组：

```
@data = ("John", "10/10/1970"); 
```

复制 to 的元素以获得以下内容的最佳方法是什么，`@data`而`@fields`无需迭代和使用数组索引。

```
@fields 
(
 {
   "id" => "Name",
   "type" => "Text",
   "value" = "John",
 },
 {
   "id" => "DOB",
   "type" => "Date",
   "value" = "10/10/1970",
 },
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:10:23.487

也许您应该`@fields`改为使用哈希，这样您就可以轻松地按名称检索字段。

```
use warnings;
use strict;

my %fields =  
(
    Name => {
        type  => "Text",
        value => undef,
    },
    DOB => {
        type  => "Date",
        value => undef,
    },
);

my @data = ("John", "10/10/1970");

$fields{Name}->{value} = $data[0];
$fields{DOB}->{value} = $data[1];

use Data::Dumper;
print Dumper %fields; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:13:15.357

如果这是在单个散列引用中，散列切片会起作用。但是，由于您必须跨多个哈希引用填充特定字段，因此需要一个循环。

```
use List::Util 'min';

$fields[$_]->{value} = $data[$_] for 0 .. min( $#fields, $#data ); 
```

# qt - qmake项目中链接log4cxx时如何解决未定义的引用错误

> ID：15895383
> 
> 赞同：2
> 
> 时间：2013-04-09T07:03:14.483
> 
> 标签：qt, mingw, qmake, log4cxx

这是我尝试与 Qt5、MinGW 和 log4cxx 结婚的第二天。

即使在我成功编译所有内容之后，链接的 apr、apr-util 和 log4cxx 库也会`ld`给我带来一堆“未定义的引用”问题。

看起来在 log4cxx 编译期间指定了不同的设置（我使用的是 ant）。有没有人能够成功编译并使用带有 MinGW 的 log4cxx？

环境：

*   log4cxx 主干
*   4 月 1.4.6
*   四月实用程序 1.5.2
*   最新的 MinGW
*   我正在使用带有最新 MinGW 的 Qt 5 作为编译器

我做了什么：

*   使用 ant 使用以下命令编译 log4cxx：“ant -Dcompiler=gcc -Dfind=false -DLOG4CXX_STATIC=1 -Dlib.type=static”
*   在 pro 文件中将结果库添加到我的项目中：“LIBS += -L../log4cxx/lib LIBS += -llibapr-1 -llibaprutil-1 -lliblog4cxx”

现在，当我尝试链接我的项目时，我得到了下一个：

```
*C:/mingw/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory 'C:/Work/SPP_Development/AutoHaul/Sub-systems/TCS/Source/build-SimulatorEngine-Standalone_MinGW-Debug'
g++ -Wl,-subsystem,windows -mthreads -o debug\SimulatorEngine.exe object_script.SimulatorEngine.Debug  -lmingw32 -lqtmaind -L../log4cxx/lib -llibapr-1 -llibaprutil-1 -lliblog4cxx -LC:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib -lQt5XmlPatternsd -lQt5Widgetsd -lQt5Networkd -lQt5Xmld -lQt5Guid -lQt5Cored -llibEGLd -llibGLESv2d -lgdi32 -luser32 
Makefile.Debug:200: recipe for target 'debug\SimulatorEngine.exe' failed
mingw32-make[1]: Leaving directory 'C:/Work/SPP_Development/AutoHaul/Sub-systems/TCS/Source/build-SimulatorEngine-Standalone_MinGW-Debug'
Makefile:34: recipe for target 'debug' failed
../log4cxx/lib/liblog4cxx.lib(mutex.o): In function `ZN7log4cxx7helpers5MutexC2ERNS0_4PoolE':
c:/Work/log4cxx/apache-log4cxx-trunc/src/main/cpp/mutex.cpp:35: undefined reference to `apr_thread_mutex_create@12'
../log4cxx/lib/liblog4cxx.lib(mutex.o): In function `ZN7log4cxx7helpers5MutexC2EP10apr_pool_t':
c:/Work/log4cxx/apache-log4cxx-trunc/src/main/cpp/mutex.cpp:45: undefined reference to `apr_thread_mutex_create@12'
../log4cxx/lib/liblog4cxx.lib(mutex.o): In function `ZN7log4cxx7helpers5MutexD2Ev':
c:/Work/log4cxx/apache-log4cxx-trunc/src/main/cpp/mutex.cpp:55: undefined reference to `apr_thread_mutex_destroy@4'* 
```

看起来 log4cxx 库无论出于何种原因都找不到在 apr 库中声明和定义的函数。

有没有办法进一步分析问题，看看为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:21:36.857

我将描述您遇到的第一个问题并给出解决方案。如果它不能解决您的问题，**请不要回复，因为这只是修复过程的第一步，**只要您对每个修复提供相关反馈，我将逐步扩展答案以解决更多传入问题，直到我们最终确定它下来。那么，让我们开始吧。

首先，您`LIBS`以错误的方式将库添加到变量中。您有 2 个选项可以做到这一点：

## #1

```
LIBS += $${PWD}/../log4cxx/lib/libapr-1.a
LIBS += $${PWD}/../log4cxx/lib/libaprutil-1.a
LIBS += $${PWD}/../log4cxx/lib/liblog4cxx-1.a 
```

## #2

```
LIBS += -L$${PWD}/../log4cxx/lib
LIBS += -lapr-1
LIBS += -laprutil-1
LIBS += -llog4cxx-1 
```

**注意：**当然也可以使用一种衬里：

```
LIBS += -L$${PWD}/../log4cxx/lib -lapr-1 -laprutil-1 -llog4cxx-1 
```

**注意：**也可以使用续行 ( `\`) 来提高可读性：

```
LIBS += -L$${PWD}/../log4cxx/lib \
        -lapr-1                  \
        -laprutil-1              \
        -llog4cxx-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T14:49:45.793

您需要注意正确的链接顺序：`liblog4cxx`取决于`libapr*`，因此`libapr`条目需要在*之后* `liblog4cxx`：

```
LIBS += -L../log4cxx/lib \
        -llog4cxx-1 \
        -lapr-1 \
        -laprutil-1 
```

原因是依赖关系是从左到右解析的，因此在您的情况下，当 log4cxx 出现时，apr 库已被读取并被遗忘，其中包含一些需要解析的外部符号。`ld`不会再次阅读 apr 库（与循环依赖问题和历史原因有关）。

要测试这是否有效，您可以尝试运行命令

```
g++ -Wl,-subsystem,windows -mthreads -o debug\SimulatorEngine.exe object_script.SimulatorEngine.Debug  -lmingw32 -lqtmaind -L../log4cxx/lib -lliblog4cxx -llibapr-1 -llibaprutil-1 -LC:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib -lQt5XmlPatternsd -lQt5Widgetsd -lQt5Networkd -lQt5Xmld -lQt5Guid -lQt5Cored -llibEGLd -llibGLESv2d -lgdi32 -luser32 
```

从目录

```
C:/Work/SPP_Development/AutoHaul/Sub-systems/TCS/Source/build-SimulatorEngine-Standalone_MinGW-Debug 
```

自己先。但也许只是修改`.pro`文件是最简单的。

# amazon-web-services - AWS 弹性负载均衡器的异常行为

> ID：15895384
> 
> 赞同：2
> 
> 时间：2013-04-09T07:03:17.167
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, ubuntu-10.04

我在 AWS 堆栈上运行基于电子商务的 ruby​​ on rails 应用程序。我正在使用弹性负载均衡器运行 ubuntu 10.04 ec2 实例，并且我在可用区 1a 和 1b 中保持了相同数量的实例。但根据我的观察，ELB 似乎将更多流量推向 1a，而不是平均分配。尽管在 1b 中运行的实例的运行状况良好，而且我还禁用了 ELB 上的粘性会话。我在两个可用区上运行了 2 个大型实例和 1 个中型实例。

负载平均分配的原因是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:45:00.453

根据我的经验，如果不成比例的流量来自单个网络或 IP 地址，就会发生这种情况。

ELB 使用不同的平衡层。DNS 负载均衡会将其发送到两个区域之一中的一组 IP 地址，并且软件负载均衡器将在区域中的实例之间分配流量。

如果您有大量来自同一个网络的流量，很可能很多用户在您的负载均衡器上获得相同的 DNS 解析并最终进入同一个区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T05:25:48.147

如果源流量来自单个网络/IP 范围或 IP 地址，ELB 可能会不成比例地将流量负载平衡到后端。我已经在我的博客“剖析 ELB”中讨论了这一点以及关于 ELB 的其他一些需要注意的细节。我在一些流行的 OSS LB 实现中也注意到了这种行为，您可以将平衡算法作为“源”并结合会话粘性。如果会话 ID 没有在 HTTP 上发送，那么它将基于“源”进行负载平衡。

# vba - VBA - 选项按钮集合

> ID：15895385
> 
> 赞同：2
> 
> 时间：2013-04-09T07:03:17.967
> 
> 标签：vba, button, collections

我正在尝试获取选项按钮的集合。我希望我收藏的对象具有“OptionButton”类型。有没有办法做到这一点 ？

```
Private Sub SetInputs()

Dim OptionButtons As Collection
Set OptionButtons = New Collection

OptionButtons.Add (br_FKG1)

' MsgBox (TypeName(br_FKG1)) : OptionButton
' MsgBox (TypeName(OptionButtons.Item(1))) : Boolean

(...)

End Sub 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:29:31.217

知道了。如果有一天有人遇到同样的问题，请写

```
OptionButtons.Add br_FKG1 
```

没有括号，以便添加对象而不是值。

没有括号，它实际上是添加的类的默认属性。对于 OptionButton，它是 .Value，但对于其他类可能是别的东西。

# python - 访问多个字典值

> ID：15895388
> 
> 赞同：0
> 
> 时间：2013-04-09T07:03:32.800
> 
> 标签：python, dictionary, ordereddictionary

我有以下格式的两个字典

```
 d=defaultdict(<class 'collections.OrderedDict'>, {u'1': OrderedDict([(1746L, 1), (2239L, 1)]), u'2': OrderedDict([(1965L, 2)]),u'3': OrderedDict([(2425L, 1),(2056L, 4)])})  

    e={2056L: 3, 1746L: 3, 2239L: 2, 1965L: 3, 2425L: 4} 
```

我怎样才能创建另一个这种格式的字典？

```
 {u'1':{1746L:(1,3),2239L:(1,2)},u'2':{1965L:(2,3)},u'3':{2425L:(1,4),2056L(4,3)}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:07:23.360

```
>>> {i: {j: (d[i][j], e[j]) for j in d[i]} for i in d}
{u'1': {1746L: (1, 3), 2239L: (1, 2)}, u'3': {2056L: (4, 3), 2425L: (1, 4)}, u'2': {1965L: (2, 3)}} 
```

# ajax - 通过 ajax 将带有列表的模型发送到控制器

> ID：15895389
> 
> 赞同：0
> 
> 时间：2013-04-09T07:03:33.633
> 
> 标签：ajax, asp.net-mvc-3, jquery

我有一个任务模型：

```
public class Task
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public DateTime? DueDate { get; set; }
    public int ProjectId { get; set; }
    public virtual ICollection<Useraccount> Useraccounts { get; set; }
    ...
} 
```

我想通过 ajax 向我的控制器发送一个任务模型：

```
function sendForm(projectId, useraccountIds, name, date, description, target) {
    $.ajax({
        url: target,
        type: "POST",
        contentType: 'application/json',
        data: JSON.stringify({
            projectId: projectId,
            useraccounts: useraccountIds,
            name : name,
            dueDate : date,
            description : description
        }),
        success: ajaxOnSuccess,
        error: function (jqXHR, exception) {
            alert('Es ist ein Fehler bei der Übertragung aufgetreten.');
        }
    });
} 
```

这工作正常，但用户帐户存在大问题。变量 useraccountIds 是一个整数数组，但不能映射到我的任务模型的 ICollection Useraccounts。

如何为每个 id 创建一个 useraccount 对象并将其映射到 useraccounts 集合？这些对象只需要它的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:16:02.710

> 如何为每个 id 创建一个 useraccount 对象并将其映射到 useraccounts 集合？这些对象只需要它的 id。

那么你只需要将其声明为：

```
public virtual IEnumerable<int> Useraccounts { get; set; } 
```

如果`Task`是一个实体而不是一个视图模型，那么最好为您的任务编写一个视图模型，因为您提到`Useraccount`除了`Id`.

**更新：**`Useraccounts`用javascript 构建你的：

```
var useraccounts = {
 { Id: value1 },
 { Id: value2 }
}; 
```

然后将其包含在您的帖子中：

```
data: JSON.stringify({
    projectId: projectId,
    useraccounts: useraccounts ,
    name : name,
    dueDate : date,
    description : description
}), 
```

如果您的用户帐户模型上有数据注释，那将不起作用。如果你这样做了，那就一团糟，因为你必须将 a 的所有必需字段复制`Useraccount`到视图中，将其放入隐藏字段（hacky）并将其发送回方法。

# android - 仅适用于平板电脑的 Android 应用

> ID：15895391
> 
> 赞同：8
> 
> 时间：2013-04-09T07:03:38.293
> 
> 标签：android

我为 Android 平板电脑设计了我的应用程序。但**它应该只安装在 Android 平板电脑上**。为此，我尝试了以下方法。

1.  [支持屏幕](https://stackoverflow.com/questions/10540646/designing-an-android-tablet-only-app)
2.  [android.hardware.telephony](https://stackoverflow.com/questions/14846609/restrict-app-installing-in-tablets)
3.  [兼容性屏幕](http://developer.android.com/guide/practices/screens-distribution.html#FilteringHansetApps)
4.  [android.permission.CALL_PHONE](https://stackoverflow.com/questions/10412005/avoid-app-installing-on-tablet-in-android?rq=1)

但是`all the above scenarios are failed. The android app installed both Google Nexus S 4.1.0 mobile and Acer Iconia A500 tablet`。有没有其他方法可以将 android 应用程序限制为仅适用于 android 平板电脑。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T07:30:16.547

根据[文档](http://developer.android.com/guide/practices/screens-distribution.html#FilteringTabletApps)，这些行对您有用！

```
<manifest ... >
    <supports-screens android:smallScreens="false"
                      android:normalScreens="false"
                      android:largeScreens="true"
                      android:xlargeScreens="true"
                      android:requiresSmallestWidthDp="600" />
    ...
    <application ... >
        ...
    </application>
</manifest> 
```

过滤应用于市场应用！这意味着您无法通过从 adb 安装应用程序或仅从 apk 运行它来真正测试它！可能被 Google Play 过滤的 APK 仍然可以兼容，并且可以安装在来自“未知来源”的设备上。

您可以在 Market 查看所有应用程序 > 选择您的应用程序 > APK > 支持的设备 | 上传 APK 时如何应用过滤。排除的设备

*   排除的设备：可让您手动排除特定设备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T07:08:16.447

你如何安装APK？通过 ADB/Sdcard 或 GooglePlayStore？

您应该注意到，所有过滤器都是针对市场的。它不能阻止用户手动安装 APK。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T07:32:37.093

过滤由 Google Play 完成，而不是设备。如果您想限制应用程序的使用，只需检查您的应用程序正在运行的设备的参数，例如屏幕分辨率或您需要的某些功能，然后继续或显示错误消息并退出。

# html - Rails 上传文件并将其呈现为 HTML 页面

> ID：15895397
> 
> 赞同：0
> 
> 时间：2013-04-09T07:03:56.923
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我正在使用 ROR 3 构建一个网站。我需要向我的客户提供一个页面，他可以在其中编辑有关该应用程序的定价信息。我对如何做到这一点感到很困惑。定价页面需要显示为具有不同列的 html 表格，其中包含定价信息。

我正在考虑不同的方法来做到这一点。

1）允许客户创建和上传一个html页面，然后将其作为文件保存在我的公共目录中，并在客户点击定价链接时呈现。

2) 客户可能没有纯技术知识，因此让客户上传一些其他格式，如 Word、Excel 等，然后对其进行解析并将其作为 HTML 文件存储在公共目录中。

3) 为客户提供一些实时编辑工具，在客户中可以以固定格式进行编辑，然后保存文件并稍后渲染。

另外，我不想将这些信息存储在我的数据库中。会有很多客户端，因此在我的数据库中管理所有这些数据会变得很麻烦。将所有这些存储为纯 html 文件并稍后呈现对我来说是最理想的事情。

这样做可能还有其他更好的步骤。您能否建议哪个可能更好，或者任何其他可以满足我需求的选择？基本上我希望我的客户有一种机制，他们可以在那里提供定价细节，稍后对其进行编辑并将其显示为 html 表，所有这些都**无需**使用数据库后端。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:47:00.543

Good way is Excel(csv format).

You can do PHP with Excel. I thing this is the best solutions for your requirement.

Try this. [http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:02:47.033

如果你真的不想使用数据库，那么你可以使用 YAML 作为结构化存储。

例如（你很可能会想出一个更好的结构）

```
SMS_Pack:
  Sl_No:
    1: 10000
    2: 25000
    3: 50000 
```

您可以读取这些 .yml 文件并将它们解析为哈希值。将该散列表示为 HTML 表应该相当容易。

对于创作，我相信你可以想出一些动态的表单输入。或者只是让客户端发送这种文件（这可能不是最好的解决方案）。

但是在数据库中管理所有这些信息可能会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:49:09.593

如果您授权用户更改编辑包含并且您必须使用“CSV 或 Excel”，请查看以下链接：

*   [导入 CSV 和 Excel](http://railscasts.com/episodes/396-importing-csv-and-excel)
*   [导出 CSV 和 Excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)

# java - 如何从数组中删除一个项目并将其他所有内容向下移动？

> ID：15895400
> 
> 赞同：-3
> 
> 时间：2013-04-09T07:04:00.870
> 
> 标签：java, arrays

我有一个联系人对象数组，其 MAX 为 50 个联系人，但数量会少得多，因此该数组的初始化大小为 50。但我需要我的方法来删除联系人并在它之后移动所有内容。我所拥有的似乎有时有效，但并非每次都有效。

```
 public Contact remove(String lstnm)
  {
       int contactIndex = findContactIndex(lstnm); // Gets the index of the Contact that needs to be removed
  Contact contactToBeRemoved;

  if(contactIndex == -1) // If the Contact is not in the Array
  {
      contactToBeRemoved = null;
  }
  else
  {
      contactToBeRemoved = Contact_List[contactIndex]; // Assigns the Contact that is going to be removed
      for(int i = contactIndex; i < numContacts; i++) // From where the Contact was removed to the last Contact in the list
      {
          Contact_List[i] = Contact_List[i + 1]; // Shift all of the Contacts after the one removed down
      }
      numContacts -= 1; // One Contact is removed from the total number of Contacts
  }
  return contactToBeRemoved; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:08:27.123

`Arrays`固定大小，您无法调整它们的大小。`ArrayList`另一方面，每次添加元素时都会自动调整大小。

所以如果我有`Array`5 个，我可以在里面放 5 个项目，不多不少。您可以做的一件事是在`Array`to`null`或 0 中设置对象。

**编辑：**关于您的评论，只需对`Array`. 在 Java 中查找一个简单的冒泡排序算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:19:30.917

尝试

```
 System.arraycopy(contactList, contactIndex + 1, contactList, contactIndex, contactList.length - contactIndex - 1); 
```

请注意 System.arraycopy 是复制/移动数组元素的最有效方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:08:12.957

您的代码会在第 numContacts 次迭代时出现异常，因为 i+1 将超出数组的大小。

```
 for(int i = contactIndex; i < numContacts-1; i++) 
          {
              Contact_List[i] = Contact_List[i + 1]; 
          }
    Contact_List[Contact_List.length-1] = null; 
```

**Ps：**在这种情况下使用 Array 是一种非常糟糕的做法，请考虑改用 ArrayList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:10:20.583

为什么不将数组转换为[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)并使用完全符合您描述的[remove(Object o)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove%28java.lang.Object%29)方法？

这将为您节省一些时间和一些测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:13:46.947

使用集合而不是数组，这样你就不必做所有的转移过程！集合会自动移动元素，您不必担心！

你可以这样做，

```
ArrayList<Contact> list=new ArrayList<Contact>();
Contact c=new Contact();

Contact.Add(Contact);
Contact.remove(Contact); 
```

并且在 ArrayList 中可以使用更多的行为！

你可以写你删除方法如下

```
public Contact remove(String lstnm)
  {
       Contact c=new Contact(1stnm);
       Contact contactToBeRemoved=list.get(1);
       List.remove(c);
        return contactToBeRemoved;
  } 
```

但是你必须在 Contact 类中重写对象类的 equal() 和 compareTo() 方法！否则什么都不会正常工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T07:14:20.433

为此目的使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

```
ArrayList<Contact> array = new ArrayList<Contact>(50); 
```

创建一个初始容量为 50 的动态数组（这会随着更多元素添加到 ArrayList 中而增加）

```
array.add(new Contact());
array.remove(contact); //assuming Contact class overrides equals() 
```

`ArrayList`在内部维护一个数组，并在**添加**或**删除**元素时*重新调整大小、重组*。

 ****您也可以使用`Vector<Contact>`类似的数据结构，但**线程安全。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T07:17:37.370

在我看来，当你知道如何使用 arrayList 时，Array 就变得毫无用处了。我建议使用arrayLists。 [数组列表教程](http://www.javabeginner.com/java-collections/java-arraylist)

在创建 ht econtact arrayList 时这样做：

```
import java.util.ArrayList;

public static void main(String args[]){
ArrayList<Contact> contacts = new ArrayList(); 
```

联系人。添加（新联系人（））；}

使用arrayLists，它是最好的方法。阅读教程，其中很多。我建议它因为 arralist 是动态的，这意味着您可以添加和删除项目，并且它会为您调整大小。

希望我能提供帮助，即使我的答案不是很完整****

# java - 从 Service 调用 DAO 方法的问题

> ID：15895410
> 
> 赞同：0
> 
> 时间：2013-04-09T07:04:43.363
> 
> 标签：java, jakarta-ee, model-view-controller, dao

我有一个具有如下方法的 DAO：

```
class AbcService 
{
  private AbcDAO isntance;
  public void getStuff()
  {
    instance.getQueryResult();
  }
} 
```

现在，如果从任何地方调用此方法，它将给出 NullPointerException，其中实例调用查询方法。这段代码仍然在项目中使用了很长时间，在称它不正确之前我会三思而后行。是否有某种方式可以访问此代码。这是标准做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:06:45.540

如果你有一个 setter `isntance`，你只需要在调用之前调用它`getStuff`。这是标准的（尽管有些人会说所有需要的字段都应该在构造函数中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:17:17.793

如果您使用的是 springbean 并且它比您的问题更广泛，则此答案仅适用。但我想这对您有用

是的，当您将其用作弹簧豆时，这通常是使用的做法。所以，在调用这个方法之前，需要确定这个springbean已经实例化了。基本上，这是通过从 ApplicationContext 获取 spring bean 或调用者类本身从其父 bean 接收此 bean 的实例来完成的......

一般的做法是通过在 web.xml 中定义 contextloaderlistener 来加载应用上下文。有关如何执行此操作的更多信息，请参阅[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:19:41.473

我认为该对象`instance`是通过[Spring Dependency Injection](http://static.springsource.org/spring/docs/2.5.3/reference/beans.html)**注入**的。请在您的项目中搜索任何“.xml”文件，该文件的 bean 定义中提到了 AbcService 的完全限定类名。`AbcService`

# javascript - 这是我需要的一连串承诺吗

> ID：15895412
> 
> 赞同：1
> 
> 时间：2013-04-09T07:04:46.283
> 
> 标签：javascript, jquery, ajax, promise, q

我有一个函数需要在完成几个 Ajax 调用后运行。每个 AJAX 调用当前被一个接一个地调用，并且当前在它们各自的回调中工作。这是一个承诺链的候选者，因为每个 ajax 调用仅在其各自的测试为真时运行？而且我不一定需要连续运行这些调用，只是在最后得到一个回调（当所有满足运行条件的 Ajax 调用都完成了它们各自的回调时）。

```
if(MyTest1){
  RunMyAjaxCall1(param1,param2,successAjaxCallback1,failureAjaxCallback1);
}
if(MyTest2){
  RunMyAjaxCall2(param1,param2,successAjaxCallback2,failureAjaxCallback2);
}
if(MyTest3){
  RunMyAjaxCall3(param1,param2,successAjaxCallback3,failureAjaxCallback3);
}
if(MyTest4){
  RunMyAjaxCall4(param1,param2,successAjaxCallback4,failureAjaxCallback4);
} 
```

示例 AJAX 调用

```
RunMyAjaxCall1 = function (param1,param2, successCallback, failureCallback) {
    $.ajax({
        type: "POST",
        datatype: 'json',
        url: "/WebServices/GlobalWebService.asmx/webservicemethod1",
        data: JSON.stringify({ param1: param1, param2: param2 }),
        contentType: 'application/json; charset=utf-8',
        success: function (data) { successCallback(data.d); },
        error: function (data) { failureCallback(data.d) }
    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T07:10:38.233

你可以使用这个：

```
var requests = [];
if (MyTest1) {
    requests.push(RunMyAjaxCall1(param1,param2,successAjaxCallback1,failureAjaxCallback1));
}
// ...continue with other if statements

$.when.apply(null, requests).always(function () {
    // All handlers used are done (either succeeded or failed)
}); 
```

既然您说您正在进行 AJAX 调用，我假设您正在使用`$.ajax`. 调用返回的值`$.ajax`是 a `Promise`。`RunMyAjaxCallX`函数需要返回 this 才能使该方案起作用。

使用`requests`允许以动态方式对请求进行分组。`if`语句确定执行和包含哪些语句。

使用（作为参数`$.when`传递）创建一个新的，包含您确定应包含的所有请求。然后使用该方法，它将在所有包含的请求完成后运行。`requests``Promise``.always()`

**这是一个工作示例：http:** [//jsfiddle.net/vmw8H/](http://jsfiddle.net/vmw8H/)

一些参考：

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

[http://api.jquery.com/deferred.always/](http://api.jquery.com/deferred.always/)

# jsf - JSF + JBOSS 6.0 + Linux + java.lang.IllegalArgumentException：空源

> ID：15895414
> 
> 赞同：0
> 
> 时间：2013-04-09T07:04:50.523
> 
> 标签：jsf, jboss, illegalargumentexception, xhtml-transitional

我们在本地 Windows 开发环境中使用 Jboss 6.1.0，使用 faces 版本 2.1.19。我们使用的应用程序运行良好。但是，当我们将代码提升到测试环境（Linux 和 JBoss 6.0 服务器并使用 faces 版本“2.0.2.Final-redhat-1”）时，我们会收到错误消息

“java.lang.IllegalArgumentException：空源”。

完整的堆栈跟踪粘贴在下面。服务器没有提供比这更多的信息，我们发现很难调试。对此的任何建议/帮助都会很棒。

当我单击页面上的一个按钮，该按钮又进行 AJAX 调用时，就会出现此问题。

```
16:37:44,298 INFO  [stdout] (http-/10.23.212.109:8080-2) AUTH FILTER -- procesiisng .. /vcp-web/jsf/calendar/calResult.xhtml
16:37:44,299 INFO  [stdout] (http-/10.23.212.109:8080-2) leaving phase >> RESTORE_VIEW 1
16:37:44,301 INFO  [stdout] (http-/10.23.212.109:8080-2) Entering phase >> RESTORE_VIEW 1
16:37:44,301 ERROR [APPL] (http-/10.23.212.109:8080-2) @@@ DefaultExceptionHandler.handle() >> Uncaught Exception
java.lang.IllegalArgumentException: null source 
16:37:44,302 ERROR [APPL] (http-/10.23.212.109:8080-2) @@@ DefaultExceptionHandler.handle() >> Uncaught Exception >> Root Cause
java.lang.IllegalArgumentException: null source: java.lang.IllegalArgumentException: null source at
util.EventObject.<init>(EventObject.java:38) [rt.jar:1.6.0_33]  
        at javax.faces.event.SystemEvent.<init>(SystemEvent.java:71)    
        [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
        at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:73) 
        [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
        at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:73) 
        [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
        at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:271) 
        [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:257) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 
        [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at au.com.woolworths.vcp.web.misc.AuthenticateFilter.doFilter(AuthenticateFilter.java:54) [classes:]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) 
        [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931) [jbossweb-7.0.16.Final-redhat-1.jar:]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_33]

        16:37:44,305 ERROR [APPL] (http-/10.23.212.109:8080-2) @@@ DefaultExceptionHandler.handle() >> Other Exception
        16:37:44,306 ERROR [APPL] (http-/10.23.212.109:8080-2) Exception in FacesHelper.setGlobalMessageByCode() >>     
        java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key 
        web.common.exception.unknown: java.util.MissingResourceException: Can't find resource for bundle 
        java.util.PropertyResourceBundle, key web.common.exception.unknown
        at java.util.ResourceBundle.getObject(ResourceBundle.java:374) [rt.jar:1.6.0_33]
        at java.util.ResourceBundle.getString(ResourceBundle.java:334) [rt.jar:1.6.0_33]
        at au.com.woolworths.vcp.util.helper.FacesHelper.setGlobalMessageByCode(FacesHelper.java:125) [classes:]
        at au.com.woolworths.vcp.util.exception.DefaultExceptionHandler.handle(DefaultExceptionHandler.java:55) [classes:]
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-redhat-1.jar:2.1.7-redhat-1]
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 
        [jboss-jsf-api_2.1_spec-2.0.2.Final-redhat-1.jar:2.0.2.Final-redhat-1]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) 
        [jbossweb-7.0.16.Final-redhat-1.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) 
        [jbossweb-7.0.16.Final-redhat-1.jar:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:37:01.580

最好的解决方案是确保 XHTML 字段中的每个字段都有一个与之关联的名称和 ID。就我而言，问题是某些输入隐藏字段没有与之关联的名称，并且请求参数是在没有密钥的情况下发送的。这导致页面无法成功呈现

# python - 一维信号的聚类

> ID：15895421
> 
> 赞同：1
> 
> 时间：2013-04-09T07:05:14.907
> 
> 标签：python, cluster-analysis, scikit-learn

我有几个一维信号，显示两个或更多波段。一个例子如下所示。 ![原始数据](https://i.stack.imgur.com/8S7KS.png)

我需要提取属于单个波段的数据点。

* * *

我的第一个简单方法是对数据进行移动平均，并获取数据大于平均值的索引。

```
def seperate(x):
    average = scipy.ndimage.gaussian_filter(x, 10)
    # this gives me a boolean array with the indices of the upper band.
    idx = x > average
    # return the indices of the upper and lower band
    return idx, ~idx 
```

绘制这些和平均曲线看起来像这样，其中红色表示上波段，蓝色表示下波段。![选定的乐队](https://i.stack.imgur.com/GGLYS.png)

这对于本示例非常有效，但是当存在两个以上的波段和/或波段没有很好地分离时会失败。

我正在寻找更强大和通用的解决方案。我正在研究 scikit-learn，想知道是否可以使用其中一种聚类算法来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:59:53.240

看看**时间序列相似性度量**。

事实上，我已经看到你在那里尝试过的这种二进制阈值，称为“阈值交叉”，还有更多。

一般来说，没有“一刀切”的时间序列相似性。不同类型的信号需要不同的措施。这可能最好从以下事实中看出：有些在 FFT 之后分析得更好，而对于另一些 FFT 则完全没有意义。

# webserver - 为什么 g-wan 在每天午夜加载处理程序脚本和 csp 脚本时循环？

> ID：15895424
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:05:16.423
> 
> 标签：webserver, g-wan

我的 g-wan 服务器上有一个奇怪的行为：每天午夜 g-wan 循环加载脚本。这是我在 gwan.log 中看到的：

```
[Tue Apr 09 00:00:00 2013 GMT] memory footprint: 1.47 MiB.
[Tue Apr 09 00:00:00 2013 GMT] Host /var/www/gwan/0.0.0.0_8082/#0.0.0.0
[Tue Apr 09 00:00:00 2013 GMT] log files enabled
[Tue Apr 09 00:00:00 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:00:00 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:00:00 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:f624bc05-f51507c3-61b20c9c-ecfe9e19
[Tue Apr 09 00:00:00 2013 GMT] Host /var/www/gwan/0.0.0.0_8083/#0.0.0.0
[Tue Apr 09 00:00:00 2013 GMT] log files enabled
[Tue Apr 09 00:00:00 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:00:00 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:00:00 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:525aa623-2728dd50-0e67a6ad-6763a30b
[Tue Apr 09 00:00:00 2013 GMT] memory footprint: 5.45 MiB.
[Tue Apr 09 00:00:01 2013 GMT] memory footprint: 1.47 MiB.
[Tue Apr 09 00:00:01 2013 GMT] Host /var/www/gwan/0.0.0.0_8082/#0.0.0.0
[Tue Apr 09 00:00:01 2013 GMT] log files enabled
[Tue Apr 09 00:00:01 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:00:01 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:00:01 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:f624bc05-f51507c3-61b20c9c-ecfe9e19
[Tue Apr 09 00:00:01 2013 GMT] Host /var/www/gwan/0.0.0.0_8083/#0.0.0.0
[Tue Apr 09 00:00:01 2013 GMT] log files enabled
[Tue Apr 09 00:00:01 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:00:01 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:00:01 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:525aa623-2728dd50-0e67a6ad-6763a30b
....
....
[Tue Apr 09 00:02:01 2013 GMT] memory footprint: 3.22 MiB.
[Tue Apr 09 00:02:01 2013 GMT] Host /var/www/gwan/0.0.0.0_8082/#0.0.0.0
[Tue Apr 09 00:02:01 2013 GMT] log files enabled
[Tue Apr 09 00:02:01 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:02:01 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:02:01 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:f624bc05-f51507c3-61b20c9c-ecfe9e19
[Tue Apr 09 00:02:01 2013 GMT] Host /var/www/gwan/0.0.0.0_8083/#0.0.0.0
[Tue Apr 09 00:02:01 2013 GMT] log files enabled
[Tue Apr 09 00:02:01 2013 GMT] loaded main.c                         39.13 KiB   MD5:15795d7c-42184ef2-c8075784-a3aa84aa
[Tue Apr 09 00:02:01 2013 GMT] loaded process_kv.c                   44.44 KiB   MD5:349b8978-bbebb4eb-120c6f1a-7d06f98e
[Tue Apr 09 00:02:01 2013 GMT] loaded Connection Handler main.c      18.71 KiB   MD5:525aa623-2728dd50-0e67a6ad-6763a30b
[Tue Apr 09 00:02:01 2013 GMT] memory footprint: 7.13 MiB.
[Tue Apr 09 00:02:11 2013 GMT] ------------------------------------------------
[Tue Apr 09 00:02:11 2013 GMT] G-WAN 4.3.14 64-bit (Mar 14 2013 07:33:12)
[Tue Apr 09 00:02:11 2013 GMT] ------------------------------------------------
[Tue Apr 09 00:02:11 2013 GMT] Local Time: Tue, 09 Apr 2013 02:02:11 GMT+2
.... 
```

因此，我相信在 2 分钟 g-wan 循环期间以及 g-wan 由 monit 正常启动之后。你有解释和解决方法吗？

* * *

我最近更改了我的网络托管服务提供商，从现在开始我使用 Microsoft Hyper-V 下的虚拟机。问题仍然存在：Monit 重新启动了 G-Wan，它记录了以下事件：

```
Wed, 16 Oct 2013 02:02:12: process PID changed from 2171 to 20631
Wed, 16 Oct 2013 02:02:13: process PPID changed from 1 to 2171
Wed, 16 Oct 2013 02:02:43: process PID changed from 20631 to 20975
Wed, 16 Oct 2013 02:03:13: process PID changed from 20975 to 21318
Wed, 16 Oct 2013 02:03:44: process PID changed from 21318 to 21573
Wed, 16 Oct 2013 02:04:14: process PID changed from 21573 to 2171
Wed, 16 Oct 2013 02:04:14: process PPID changed from 2171 to 1
Wed, 16 Oct 2013 02:33:06: process is not running
Wed, 16 Oct 2013 02:33:37: process is running with pid 776 
```

即使在我的新虚拟机和另一个虚拟机管理程序上，它每天都会发生。

我不是唯一一个有这种行为的人。你有解释和解决方法吗？

谢谢杰罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:21:18.807

循环意味着子进程没有响应，因此父进程杀死旧子进程并重新启动新子进程。

您能否将整个日志文件（trace 和 gwan.log）通过电子邮件发送给我们？您的部分帖子缺少信息部分。

* * *

更新

迄今为止运行良好的 4 年旧代码的新问题是平台问题，我们已经找到了解决方法，将在几周内与下一个版本一起发布。

# eclipse - Eclipse RCP - Linux 中的模态对话框不在顶部

> ID：15895425
> 
> 赞同：1
> 
> 时间：2013-04-09T07:05:17.617
> 
> 标签：eclipse, dialog, modal-dialog

我们开发了一个 Eclipse RCP。其中一个对话框（Jface 对话框）在 Linux 中似乎不是模态的。在同一个 RCP 中还有另一个类似的 Jface 对话框，它作为模态工作。

任何人都可以在这方面帮助我。我尝试调试并确认两个对话框的样式相同，并且两者的父 shell 设置为相同。

我不明白为什么这个对话框不是模态的，而另一个看起来很好。在 Windows 中，它们都可以作为模态对话框正常工作。

我正在使用 Ubuntu（32 位）进行测试。

提前致谢

# node.js - 尝试将项目添加到猫鼬数组时，“对象 {} 没有方法 'cast' 错误”

> ID：15895426
> 
> 赞同：9
> 
> 时间：2013-04-09T07:05:19.343
> 
> 标签：node.js, express, mongoose

我正在尝试使用 node.js、mongoose 和骨干创建一个 todo 应用程序以用于学习目的。到目前为止，我定义了这些模型：

```
var TaskSchema = new mongoose.Schema({
    title: { type:String },
    content: { type:String } ,
    created: {type:Date, 'default':Date.now},
    due: {type:Date},
    accountId: {type:mongoose.Schema.ObjectId}
});

var Task = mongoose.model('Task',TaskSchema);

var AccountSchema = new mongoose.Schema({
    email: { type:String, unique: true},
    password: { type:String } ,
    name: { first: {type:String}, 
        last: { type:String } },
    birthday: {
        day: {type:Number, min:1, max:31, required:false},
        month: {type:Number, min:1, max:12, required:false},
        year: {type:Number}

    },
    photoUrl: {type:String},
    biography:{type:String},
    tasks:[Task]
});

var Account = mongoose.model('Account',AccountSchema); 
```

此外，我还有以下**添加任务**的方法：

```
var enter_new_task = function(options,callback){
    var title = options.title;
    var content = options.content;
    var due = options.due;
    var account = options.account;
    var task = new Task({
        title: title,
        content: content,
        due: due,
        accountId: account._id
    });
    account.tasks.push(task);
    account.save(function(err) {
        if ( err ) {
            console.log("Error while saving task: " + err);
        }else{
            callback();
        }
    })
} 
```

但是，当我确实添加了一项任务时，我收到一条错误消息：

> “对象 {} 没有方法 'cast'”

使用以下堆栈跟踪：

```
 at Array.MongooseArray._cast (/home/lior/workspace/todo_express/node_modules/mongoose/lib/types/array.js:107:30)
    at Object.map (native)
    at Array.MongooseArray.push (/home/lior/workspace/todo_express/node_modules/mongoose/lib/types/array.js:261:23)
    at Object.enter_new_task (/home/lior/workspace/todo_express/models/Account.js:107:17)
    at /home/lior/workspace/todo_express/app.js:104:18
    at Promise.<anonymous> (/home/lior/workspace/todo_express/models/Account.js:41:4)
    at Promise.<anonymous> (/home/lior/workspace/todo_express/node_modules/mongoose/node_modules/mpromise/lib/promise.js:162:8)
    at Promise.EventEmitter.emit (events.js:95:17)
    at Promise.emit (/home/lior/workspace/todo_express/node_modules/mongoose/node_modules/mpromise/lib/promise.js:79:38)
    at Promise.fulfill (/home/lior/workspace/todo_express/node_modules/mongoose/node_modules/mpromise/lib/promise.js:92:20)
9 
```

似乎问题在于新任务到任务数组的行。

在谷歌或堆栈上找不到任何东西，所以我想知道，有没有人知道出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T09:47:15.203

错误在 AccountSchema 定义中。子文档类型应该是模式，而不是模型。

```
var AccountSchema = new mongoose.Schema({
    //...
    tasks:[TaskSchema]
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T20:42:50.773

或者，如果您不能直接访问您的架构，而只能访问模型，您可以使用点符号访问模型的架构，如下所示：

```
var AccountSchema = new mongoose.Schema({
    //...
    tasks:[Task.schema]
}); 
```

如果您在另一个文件中定义了架构并且正在使用如下内容，这将很有帮助：

```
module.exports = mongoose.model('Task', TaskSchema); 
```

# c# - BI（商业智能）与门户的集成

> ID：15895430
> 
> 赞同：0
> 
> 时间：2013-04-09T07:05:23.630
> 
> 标签：c#, javascript, asp.net, .net, asp.net-mvc

托管在服务器上的一个门户，在另一台服务器上托管商业智能（tibco spotfire web）。我想将 BI 与我的门户集成。如何集成？

注意-我的门户在 asp.net 中，商业智能 (BI) 是用 Java 开发的，两者都托管在 IIS 上。

两台服务器都有完整的写入来相互通信。

我主要担心的是我们可以在客户端打开我的商业智能（BI）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:33:30.443

我认为您在 BL 网站上制作了一些 API。（使用 SOAP 或 RESTAPI）

如果您在客户端使用带有 javascript 的 BL，请检查 JSONP。

# vim - 如何以“私人模式”启动vim

> ID：15895432
> 
> 赞同：16
> 
> 时间：2013-04-09T07:05:27.773
> 
> 标签：vim, privacy

现代浏览器具有称为“私人模式”或“隐身模式”的功能。我正在尝试用 vim 做同样的事情，即以不留下任何活动痕迹的方式运行它。这样我就可以使用 vim 打开包含存储在加密卷中的敏感信息的文件，而不必担心任何信息会泄露。

这是我到目前为止所做的：

```
alias vim_private="vim -i NONE --cmd 'set noswapfile' --cmd 'set nobackup'" 
```

我的 .bashrc 中有这个。上述理由：

*   `-i NONE`这样不会通过 .viminfo 泄露文件名或寄存器内容
*   `--cmd 'set noswapfile'`是为了防止创建交换文件
*   `--cmd 'set nobackup'`对于没有备份文件

还有什么我想念的吗？vim 是否有任何其他方式可以泄露信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:25:21.277

你的设置看起来不错。我不确定当你调用 Vim as 时是否会加载`vi`插件，但是几个插件（例如提供 MRU 功能）也会存储信息（通常在`~/.vim...`文件中）。它们的负载可以通过`--noplugin`.

此外，对于偏执狂来说`$VIMINIT`，`:set exrc`、 和`:set modeline`会导致 Vimscript 代码被执行；这可以（重新）启用与隐私相关的选项。

# oracle - Oracle Job 不适用于 Oracle Label Security 下的表

> ID：15895433
> 
> 赞同：1
> 
> 时间：2013-04-09T07:05:33.623
> 
> 标签：oracle, jobs

我在 Oracle Label Security (OLS) 下有一个数据库模式 MYUSER，还有一个作业 MYUSER.MYJOB 执行一个过程 MYUSER.MYPROC，该过程从 MYUSER 模式中选择或更新表。用户 MYUSER 是 DBA，他有完整的 OLS 权限，他是 MYJOB 和 MYPROC 的所有者和调用者，但 MYJOB 不起作用。它开始，调用 MYPROC，过程 MYPROC 开始，什么都不做，在 0.01 秒内结束，没有任何消息。

但是，当我从 PL/SQL 块中执行相同的 MYPROC 时，在任何工作中，它都运行良好。似乎 MYPROC 执行时没有对 MYUSER 表的访问权限。

谁能告诉我这可能是什么原因并解决这个问题？

# xml - 使用 XSL 将文本添加到 XML 子元素，同时保留所有子元素和子元素的属性

> ID：15895435
> 
> 赞同：0
> 
> 时间：2013-04-09T07:05:45.273
> 
> 标签：xml, xslt, docbook

我正在尝试根据其“步骤”父级的“性能”属性向段落添加一些文本。

如果一个步骤被标记为 'performance="optional"' 我希望生成的文本（对于下面的第二步）看起来像这样：

“2.（可选）这是第 2 步……”

```
<procedure>
    <step id="step_lkq_c1l_5j">
        <para>This is step 1, which is required.</para>
    </step>
    <step performance="optional">
        <para>This is step 2, which is optional, unlike <xref linkend="step_lkq_c1l_5j"/>.
            <note>
                <para>I don't want to lose this note in my transformation.</para>
            </note>
        </para>
    </step>
    <step>
        <para>This is step 3.</para>
    </step>
</procedure> 
```

我尝试使用 Xpath 匹配我的节点并对其进行修改：`<xsl:template match="step[@performance='optional']/child::para[position()=1]">`然后使用 concat() 尝试添加我的可选文本，但我会丢失外部参照链接（可能是因为 concat() 不尊重子节点和属性？）

使用以下 xsl 自定义，我已经接近了我想要的，但是（可选）文本位于段落之外，这会将步骤文本下降一行，有时会与页面内容中断。我真正想要的是在第一段中生成的文本。

有人有建议吗？

```
 <!-- Add "(Optional) " to steps that have the performance="optional" attribute set -->
<xsl:template match="procedure/step|substeps/step">
    <xsl:variable name="id">
        <xsl:call-template name="object.id"/>
    </xsl:variable>

    <xsl:variable name="keep.together">
        <xsl:call-template name="pi.dbfo_keep-together"/>
    </xsl:variable>

    <fo:list-item xsl:use-attribute-sets="list.item.spacing">
        <xsl:if test="$keep.together != ''">
            <xsl:attribute name="keep-together.within-column"><xsl:value-of
                select="$keep.together"/></xsl:attribute>
        </xsl:if>

        <fo:list-item-label end-indent="label-end()">
            <fo:block id="{$id}">
                <!-- dwc: fix for one step procedures. Use a bullet if there's no step 2 -->
                <xsl:choose>
                    <xsl:when test="count(../step) = 1">
                        <xsl:text>&#x2022;</xsl:text>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:apply-templates select="." mode="number">
                            <xsl:with-param name="recursive" select="0"/>
                        </xsl:apply-templates>.
                    </xsl:otherwise>
                </xsl:choose>
            </fo:block>
        </fo:list-item-label>
        <xsl:choose>
            <xsl:when test="@performance='optional'">
                <fo:list-item-body start-indent="body-start()">
                    <fo:block>
                        <xsl:text>(Optional) </xsl:text>
                        <xsl:apply-templates/>
                    </fo:block>
                </fo:list-item-body>
            </xsl:when>
            <xsl:otherwise>
                <fo:list-item-body start-indent="body-start()">
                    <fo:block>
                        <xsl:apply-templates/>
                    </fo:block>
                </fo:list-item-body>
            </xsl:otherwise>
        </xsl:choose>
    </fo:list-item>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:32:27.523

从您的问题中不清楚您是否只是想知道如何添加“（可选）”文本，或者您是否希望将其合并到您的 XSL-FO 中，或者您是否想要“2”。编号也是如此。这是第一种情况的简单答案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="step[@performance = 'optional']/para/text()[1]">
    <xsl:value-of select="concat('(Optional) ', normalize-space())"/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<procedure>
  <step id="step_lkq_c1l_5j">
    <para>This is step 1, which is required.</para>
  </step>
  <step performance="optional">
    <para>(Optional) This is step 2, which is optional, unlike<xref linkend="step_lkq_c1l_5j" />.
      <note><para>I don't want to lose this note in my transformation.</para></note></para>
  </step>
  <step>
    <para>This is step 3.</para>
  </step>
</procedure> 
```

要获取编号，您可以将第二个模板替换为：

```
 <xsl:template match="step[@performance = 'optional']/para/text()[1]">
    <xsl:variable name="sequence">
      <xsl:number level="multiple" count="step"/>
    </xsl:variable>
    <xsl:value-of select="concat($sequence, '. (Optional) ', normalize-space())"/>
  </xsl:template> 
```

产生：

```
<procedure>
  <step id="step_lkq_c1l_5j">
    <para>This is step 1, which is required.</para>
  </step>
  <step performance="optional">
    <para>2\. (Optional) This is step 2, which is optional, unlike<xref linkend="step_lkq_c1l_5j" />.
      <note><para>I don't want to lose this note in my transformation.</para></note></para>
  </step>
  <step>
    <para>This is step 3.</para>
  </step>
</procedure> 
```

并且要对所有步骤进行编号，您可以将相同的模板替换为：

```
 <xsl:template match="step/para/text()[1]">
    <xsl:variable name="sequence">
      <xsl:number level="multiple" count="step"/>
    </xsl:variable>
    <xsl:value-of select="concat($sequence, '. ')"/>

    <xsl:if test="../../@performance = 'optional'">
      <xsl:text>(Optional) </xsl:text>
    </xsl:if>

    <xsl:value-of select="normalize-space()"/>
  </xsl:template> 
```

产生：

```
<procedure>
  <step id="step_lkq_c1l_5j">
    <para>1\. This is step 1, which is required.</para>
  </step>
  <step performance="optional">
    <para>2\. (Optional) This is step 2, which is optional, unlike<xref linkend="step_lkq_c1l_5j" />.
      <note><para>I don't want to lose this note in my transformation.</para></note></para>
  </step>
  <step>
    <para>3\. This is step 3.</para>
  </step>
</procedure> 
```

# android - 如何在 webview 中使用 iframe 播放 vimeo 视频？

> ID：15895437
> 
> 赞同：11
> 
> 时间：2013-04-09T07:05:46.600
> 
> 标签：android, iframe, android-webview, vimeo

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView wv=(WebView)findViewById(R.id.webView1);

        wv.getSettings().setJavaScriptEnabled(true);
        wv.getSettings().setAppCacheEnabled(true);
        wv.getSettings().setDomStorageEnabled(true);

        // how plugin is enabled change in API 8
        if (Build.VERSION.SDK_INT < 8) {
          wv.getSettings().setPluginsEnabled(true);
        } else {
          wv.getSettings().setPluginState(PluginState.ON);
        }
        String venkat="<iframe src=\"http://player.vimeo.com/video/27244727?portrait=0&color=333\" width=\"WIDTH\" height=\"HEIGHT\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>";
        wv.loadData(venkat,"text/html","UTF-8");
    }
} 
```

从谷歌研究后，我写了上面的代码，但没有工作。在这种情况下没有发生错误，但是当我点击播放按钮时，进度条会显示一段时间然后消失并再次显示播放按钮......有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T11:25:25.870

做这个：

```
<iframe src="//player.vimeo.com/video/VIDEO_ID" 
        width="515" 
        height="340" 
        frameborder="0" 
        webkitallowfullscreen mozallowfullscreen allowfullscreen>
</iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T10:26:39.273

您必须在 andorid manifest 中启用硬件加速功能。要在所有设备上使用 vimeo 视频，bec vimeo 视频是 html5 类型的视频。

这里[是 vimeo 视频播放的链接，](https://github.com/bilthon/VimeoTest)它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-11T17:19:49.970

```
const TheVideo = (props) => {
 const getVimeoUrl = (uri: string): string => {
        const value = uri.split("/");
        return value[value.length - 1];
    };
    enter code here

return (<>
 <iframe
                        src={
                            props.specificVideo?.url
                                ?.split("/")[2]
                                .startsWith("vimeo")
                                ? `https://player.vimeo.com/video/${getVimeoUrl(
                                      props.specificVideo?.url
                                  )}`
                                : props.specificVideo?.url ?? ""
                        }
                        width="{video_width}"
                        height="{video_height}"
                        frameBorder="0"
                        title={props.specificVideo?.title ?? ""}
                        className="specvideoview-frame"
                    ></iframe>
</>)
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T09:42:34.777

```
webView = (WebView)findViewById(R.id.presentation_webview);

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setAllowFileAccess(true);
        webView.getSettings().setPluginsEnabled(true);
        webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY); 

        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        int height = displaymetrics.heightPixels;
        int wwidth = displaymetrics.widthPixels;

        Log.e("h & w",wwidth+"-"+height);

        String data_html = "<!DOCTYPE HTML> <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:og=\"http://opengraphprotocol.org/schema/\" xmlns:fb=\"http://www.facebook.com/2008/fbml\"> <head></head> <body style=\"margin:0 0 0 0; padding:0 0 0 0;\"> <iframe width='"+wwidth+"' height='"+height+"' src=\"http://player.vimeo.com/video/"+VIDEO_ID+"\" frameborder=\"0\"></iframe> </body> </html> ";

        webView.setWebViewClient(new MyWebViewClient());

        webView.loadDataWithBaseURL("http://vimeo.com", data_html, "text/html", "UTF-8", null); 
```

尝试上面的代码并使用设备宽度和高度来播放视频。

# django - 在modelform按钮django上执行不同的功能

> ID：15895449
> 
> 赞同：0
> 
> 时间：2013-04-09T07:06:43.627
> 
> 标签：django, django-forms, django-views

我有一个带有 2 个按钮的模型，我想对它们执行不同的功能。我的模型：

```
class jobpostForm(ModelForm):
    class Meta:

        model = jobpost
        fields = ('job_title','job_type','job_location','job_description','start_date','end_date','country','how_to_apply')

    widgets = {

        'job_type':RadioSelect(),    
        'job_location':TextInput(attrs={'size':'70'}),   
        'job_description':Textarea(attrs={'cols':200, 'rows':10}),
            'start_date':TextInput(attrs={
                'class': 'datepicker',
                'data-date-format': 'mm/dd/yyyy', 

            }),
            'end_date':TextInput(attrs={
                'class': 'datepicker',
                'data-date-format': 'mm/dd/yyyy', 
            }),

    }

    def __init__(self, *args, **kwargs):
        #super(jobpostForm, self).__init__(*args, **kwargs)
        #self.fields['start_date'].widget.attrs['class'] = 'datepicker'
        super(jobpostForm, self).__init__(*args, **kwargs)
        #self.fields['ref_id'].widget = forms.HiddenInput()
        self.helper = FormHelper()
        self.helper.form_class = 'horizontal-form'
        self.helper.form_id = 'id-jobpostform'
        self.helper.form_class = 'blueForms'
        self.helper.form_method = 'post'

        self.helper.form_action = '/portal/next/post/'

        self.helper.add_input(Submit('submit_addcontent', 'Preview'))
        self.helper.add_input(Submit('submit_addcontent', 'Submit'))

        super(jobpostForm, self).__init__(*args, **kwargs) 
```

我想在提交和预览时执行不同的功能。如何在我的视图中访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:27:59.627

django 表单确实处理了两件事：

*   在 GET 请求中显示初始表单
*   处理带有数据的 POST 请求

您可以通过多种方式处理您的情况。一种方法是让两个按钮都提交您的表单。预览按钮将填充一个名为 的隐藏字段`preview`。您的表单将处理提交的数据。如果数据在名为 POST 的字段中包含一个值，`preview`它将呈现预览。否则，它将正常处理表单。

# c++ - C++ 编程代码计数[s[i] - '0'] ++;

> ID：15895455
> 
> 赞同：1
> 
> 时间：2013-04-09T07:06:57.423
> 
> 标签：c++

```
for (int i = 0; i < s.length(); i++)
{
   if (isdigit(s[i]))
   counts[s[i] - '0'] ++;
} 
```

这段代码是什么意思，任何人都可以解释这段代码“counts[s[i] - '0'] ++;” 精确操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:08:54.053

`counts`是一个十元素数组，用于计算每个数字在 中出现的次数`s`。

具体来说：

*   `s[i] - '0'`变成,变成等`'0'`_`0``'1'``1`
*   `counts[...]++`递增数组的相应元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:08:57.507

该代码正在计算一个数字`(1-9)`在 string 中出现的次数`s`。

笔记。与if`'i' - '0'`相同。原因是字符具有连续的 ASCII 值。所以和之间的 ASCII 值的差异是; `i - 0``i``digit``'0' -'9'``'i'``'0'``i`

现在让我们说

```
string s = "1b21cc55"; 
```

和

```
int count[10] is all zeros 
```

在循环

我们检查`s[i]`，

```
s[0] = 1 ---> isdigit(1) = yes ----> count[1-0] += 1  ---> count[1] is 1;    
s[1] = b ---> isdigit(b) = no ;
s[2] = 2 ---> isdigit(2) = yes ----> count[2-0] += 1; ---> count[2] is 1;        
s[3] = 1 ---> isdigit(1) = yes ----> count[1-0] += 1; ---> count[1] is 2; 
```

等等 ...

最后会告诉你字符串中有`count[i]`多少个 s。`i`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:14:15.500

希望这可以帮助。

1) '0' 的 Ascii 值为 48

2) 只要​​ s[i] 是一个数字（0-9 之间）

3) s[i] - '0' 计算为一个索引（在 0..9 之间）；

示例：'1' 的 Ascii 值为 49 假设 s[i] 为 '1' 然后 s[i] - '0' 为 49-48 = 1

4) counts[s[i]-'0']++ 将计算在 s[i] 中找到特定数字的次数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:15:22.070

*   `counts`是一个数组。

*   `s[i]`是一个包含 ASCII 数字的字符。`'0'`, `'1'`, `'2'`, ...

*   `s[i] - '0'`将它们转换为整数。`1`, `2`, `3`, ...

*   上面的数字表示数组中第 n 项的索引 -->`X`

*   `counts[X] ++`将数组的第 X 项加一。

# php - 提交php表单后如何显示结果

> ID：15895462
> 
> 赞同：1
> 
> 时间：2013-04-09T07:07:26.203
> 
> 标签：php, mysql, forms

提交表单后如何显示结果

提交打印表单后我想要显示结果

示例第一个我填写表单提交提交后的结果我想要一个屏幕显示相同的结果 [http://www.tizag.com/phpT/examples/formexample.php](http://www.tizag.com/phpT/examples/formexample.php)

我该怎么做，请帮我解决这个问题。

php表单代码

```
<?php
     function renderForm($grn, $name, $rollno, $class, $fees, $date, $reference, $error)
     {
     ?>
     <?php 
     if ($error != '')
     {
     echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
     }
     ?> 
     <form action="" method="post">
     <div>
       <p><span class="style9"><strong>G.R.N No:</strong></span><strong>  *</strong>
         <input name="grn" type="text" id="grn" value="<?php echo $grn; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Name:</strong></span><strong>  *</strong>
         <input name="name" type="text" id="name" value="<?php echo $name; ?>" size="50" />
       </p>

       <p><span class="style9"><strong>Roll No :</strong></span><strong>  *</strong>
         <input name="rollno" type="text" id="rollno" value="<?php echo $rollno; ?>" size="50" />
       </p>
       <p><span class="style9"><strong>Class:</strong></span><strong>  *</strong>
         <input name="class" type="text" id="class" value="<?php echo $class; ?>" size="50" />
       </p>
        <p><span class="style9"><strong>Fees Date  :</strong></span><strong>  *</strong>
          <input id="fullDate"  name="date" type="text" value="<?php echo $date; ?>" size="50" />
       </p>
        <p><span class="style9"><strong>Fees :</strong></span><strong>  *</strong>
          <input name="fees" type="text" value="<?php echo $fees; ?>" size="50" />
       </p>
        <span class="style9"><strong>Reference</strong></span><strong> *</strong>
        <input name="reference" type="text" value="<?php echo $reference; ?>" size="50">
        <br/>
       <p class="style1">* required</p>
     <input type="submit" name="submit" value="Submit">
     </div>
     </form> 
     <?php 
     }
     include('connect-db.php');

     if (isset($_POST['submit']))
     { 
     // get form data, making sure it is valid
     $grn = mysql_real_escape_string(htmlspecialchars($_POST['grn']));
     $name = mysql_real_escape_string(htmlspecialchars($_POST['name']));
     $rollno = mysql_real_escape_string(htmlspecialchars($_POST['rollno']));
     $class = mysql_real_escape_string(htmlspecialchars($_POST['class']));
     $fees = mysql_real_escape_string(htmlspecialchars($_POST['fees']));
     $date = mysql_real_escape_string(htmlspecialchars($_POST['date']));
     $reference = mysql_real_escape_string(htmlspecialchars($_POST['reference']));

     // check to make sure both fields are entered
     if ($grn == '' || $name == '' || $rollno == '')
     {
     // generate error message
     $error = 'ERROR: Please fill in all required fields!';

     // if either field is blank, display the form again
     renderForm($grn, $name, $rollno, $class, $fees, $date, $reference, $error);
     }
     else
     {
     // save the data to the database
      mysql_query("INSERT fees SET grn='$grn', name='$name', rollno='$rollno', class='$class', fees='$fees', date='$date', reference='$reference'")
     or die(mysql_error()); 
     echo "<center>KeyWord Submitted!</center>";
     // once saved, redirect back to the view page

     }
     }
     else
     // if the form hasn't been submitted, display the form
     {
     renderForm('','','','','','','','');
     }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:20:26.010

不太清楚你在问什么。

您需要帮助显示提交的表单数据吗？或更具体的打印显示？

要显示它，您只需要制作一个`html`显示它的页面。像：

```
echo '<table><tr>';
  echo '<td>';
    echo '<Strong>Name:</strong><br/>';
    echo $name;
  echo '</td>';
echo '</tr></table>'; 
```

为了只显示结果而不是表单，当您发布到同一页面时，您需要使用 if 语句封装 for 代码。

```
if(isset($_POST['submit'])) {
  //code for the php form
}else {
  //code to display form
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:21:58.433

为表单中的“操作”部分使用新页面。在该新页面上，只需回显您要显示的值的 $_POST。如果您计划制作某种页面以便人们可以检查他们的条目，您可以将这些 $_POST 数据存储在会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:23:26.783

*只需调用底部的函数即可显示发布的值：*

```
 function showFormValues()
         {
         ?>

         <div>
           <p><span class="style9"><strong>G.R.N No:</strong></span><strong>  *</strong>
              <?php echo $_POST['grn']; ?>
           </p>
           <p><span class="style9"><strong>Name:</strong></span><strong>  *</strong>
              <?php echo $_POST['name'];
           </p>
and so on.
    .
    .
    .
    .
         </div>

         <?php 
         }
?> 
```

# android - 为gmail登录获取无效的Authtoken？

> ID：15895464
> 
> 赞同：2
> 
> 时间：2013-04-09T07:07:34.283
> 
> 标签：android, authentication, oauth, auth-token

在我的 android 应用程序中，我创建了一个 gmail 登录名。用户可以使用`gmail`手机中已有的凭据登录。问题是我在 android `Gingerbread`os 中没有获得有效的令牌。但是在 and 的情况下`ICS`，`Jelly Bean`我得到了正确的令牌。我已经在大约 5 台设备上对此进行了测试。

为了检查令牌的有效性，我使用了这个[链接](https://accounts.google.com/o/oauth2/tokeninfo?access_token=YOURTOKEN)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:35:22.423

最后我解决了。问题是令牌没有更新。因此，当使用 getAuthtoken 访问令牌时

```
 String authToken=accountManager.getAuthToken(account, SCOPE, false,
                new OnTokenAcquired(), null); 
```

应该使用验证 authToken

```
accountManager.invalidateAuthToken("com.google",
                    bundle.getString(AccountManager.KEY_AUTHTOKEN)); 
```

然后在这之后你应该再打电话

> String authTokenNew=accountManager.getAuthToken(account, SCOPE, false, new OnTokenAcquired(), null);

这将是一个有效的令牌。您可以从此[LINK检查令牌的有效性](https://accounts.google.com/o/oauth2/tokeninfo?access_token=)

# string - 如何在PowerShell下处理字符串中的转义字符（`）

> ID：15895467
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:07:44.963
> 
> 标签：string, powershell, escaping

我正在使用 PowerShell 从 XML 文件 CDATA 部分中读取字符串，它包含 PowerShell 转义字符 (`) 作为字符串内容的一部分。当 PowerShell 读取和写入此内容时，它会删除转义字符，这会导致相同内容的使用出现问题。

我不能在我的输入中添加像 `` 这样的双重转义序列，因为它是由用户提供的，我们不能限制用户。

如何让 PowerShell 正确处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:58:42.130

我无法重现你的问题。需要更多信息。

测试.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<exampleOfACDATA>
<![CDATA[
    This is Graimer`s [CDATA[]] test.
    Notice that I just used a backtick in my text,
    which is PowerShell's escape character.
    I'm gonna store this in `$s` in PS.
]]>
</exampleOfACDATA> 
```

电源外壳

```
PS > $xml = [xml](Get-Content .\Desktop\test.xml)
$s = $xml.exampleOfACDATA."#cdata-section"
$s

    This is Graimer`s [CDATA[]] test.
    Notice that I just used a backtick in my text,
    which is PowerShell's escape character.
    I'm gonna store this in `$s` in PS. 
```

一般来说，要确保特殊字符的行为与普通字符一样，变量不会扩展等，`'text'`请在字符串周围使用单引号。当您也从其他来源（函数、文件...）获取字符串时，这也是 powershell 的正常行为。

# c++ - C++：函数调用中的参数太少

> ID：15895471
> 
> 赞同：-3
> 
> 时间：2013-04-09T07:07:49.563
> 
> 标签：c++

我在这段代码中有问题。当我调用函数时。编译器显示此错误：

“函数调用中的参数太少”.......................... .....................

```
bool check_matrix(int x, int y){
    if (x<ROWS || y<COLUMNS)
        return true;
    return false;

    }

bool compute_duplicate(int x, int y, int array[], int array_length){
    for (int i=0; i< array_length; i++)
    {
        if(array[i]==compute_address(x,y))
            return false;
    }

    return true;
    }
////////////////////////////////////

for (int i=0; i<array_length; i++){
    if ((check_matrix(x,(y+1))==true) && compute_duplicate((x,(y+1), array, array_length)==false)) {
        array[i]= compute_address(x,(y+1));
        y++;
        d++;
        i++;
    }

    if ((check_matrix((x+1),y)==true) && compute_duplicate((x+1),y, array, array_length)==false)) {
        array[i]=compute_address((x+1),y);
        x++;
        d++;
        i++;
    }
    array_length=d;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:10:48.113

以下函数调用有一个放错位置的括号

```
compute_duplicate((x,(y+1), array, array_length)==false) 
```

它应该是

```
(compute_duplicate(x,(y+1), array, array_length)==false) 
```

循环中的两个地方存在相同的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:10:59.860

你的问题在这里：

```
compute_duplicate((x,(y+1), array, array_length)==false)) 
```

即你试图`compute_duplicate`用*一个*类型的参数调用`bool`，它是**有效表达式** `(x,(y+1), array, array_length)==false`的结果。请注意，逗号是 C/C++ 中的运算符，因此上述表达式的有效结果是`array_length==false`。

大概意思是：

```
compute_duplicate(x,(y+1), array, array_length)==false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:11:03.597

`compute_duplicate((x,(y+1), array, array_length)==false))`正在调用`compute_duplicate`表达式`(x,(y+1), array, array_length)==false)`，它是一个布尔值，`true`当且仅当`(x,(y+1), array, array_length)`is `false`。这不是你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:11:12.323

这里有一对额外的牙套：

```
compute_duplicate((x,(y+1), array, array_length)==false) 
```

使编译器认为您将单个布尔值作为参数传递。松开它们并修复错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T07:11:21.920

`compute_duplicate((x,(y+1), array, array_length)==false)`正在调用`compute_duplicate`一个参数，即`(x,(y+1), array, array_length)==false`.

你的意思是`(compute_duplicate(x,(y+1), array, array_length)==false)`？

（只是 s 的排列略有不同，`()`但 C++ 的一段非常不同。

# html - AngularJS ng-href 和 svg xlink

> ID：15895483
> 
> 赞同：40
> 
> 时间：2013-04-09T07:08:20.067
> 
> 标签：html, angularjs, svg, angularjs-directive, xml-namespaces

我想要一些关于使用带角度的 xml 命名空间属性的输入。

问题是当 Angular 解析表达式时，Angular 附带了几个指令来处理诸如 href 和 src 之类的写入属性（否则浏览器将尝试加载`{{mymodel.myimage}}`为 url）

[https://github.com/angular/angular.js/blob/master/src/ng/directive/booleanAttrs.js#L329](https://github.com/angular/angular.js/blob/master/src/ng/directive/booleanAttrs.js#L329)

我面临的问题是我正在使用 angular 与 D3 一起输出 svg，并且由于 angular 没有办法输出`xlink:href`我被卡住了。

我创建了一个输出 xlink:href 的自定义指令

```
app.directive('ngXlinkHref', function () {
  return {
    priority: 99,
    restrict: 'A',
    link: function (scope, element, attr) {
      var attrName = 'xlink:href';
      attr.$observe('ngXlinkHref', function (value) {
        if (!value)
          return;

        attr.$set(attrName, value);
      });
    }
  };
}); 
```

完整演示： http: [//plnkr.co/edit/cMhGRh](http://plnkr.co/edit/cMhGRh)

但似乎如果我不手动将 xlink:href 添加到元素，svg 图像将不会呈现。

任何关于如何最好地处理 xml 命名空间/svg 和 angular 的建议将不胜感激。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-09-01T15:51:36.807

您可以使用`ng-attr-<some attribute>`

`ng-attr-xlink:href="{{xxx}}"`为我工作。

* * *

请注意，您还需要一个空`xlink:href=""`作为初始值。– 德里克·许

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-16T09:09:59.533

如果像我一样，您正在寻找一种将图像添加到 svg 的方法，您可以添加：

```
xlink:href="" ng-href="{{ foo }}" 
```

例子：

[http://jsbin.com/sigoleya/1/edit?html,js,输出](http://jsbin.com/sigoleya/1/edit?html,js,output)

我在哪里找到了解决方案：

[https://github.com/angular/angular.js/issues/7697](https://github.com/angular/angular.js/issues/7697)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-10T21:16:16.987

在尝试输出与模型相关的值时，我遇到了类似的问题`xlink:href`。根据用户`<option>`在`<select>`控件中的选择，我试图通过元素的`xlink:href`属性显示动态 SVG 图标。`<use>`

我在 AngularJS 的 GitHub 问题中找到[了一个关于此的主题。](https://github.com/angular/angular.js/issues/7697)根据那里的讨论，似乎因为存在可行的解决方法，他们通过将其移至积压里程碑有效地提出了修复。

最终对我有用的是受这个 JSBin 的启发：

[http://jsbin.com/sigoleya/1/edit?html,js,输出](http://jsbin.com/sigoleya/1/edit?html,js,output)

这是我在模板中使用的代码：

```
<svg class="icon" data-ng-class="category.iconName">
  <use xlink:href="" data-ng-href="{{'#' + category.iconName}}">
</svg> 
```

例如，给定 a `category.iconName`， Angular 将动态设置为，它在同一页面上进一步引用该元素。`icon-music``xlink:href``#icon-music``<svg id="icon-music">`

正如其他人所指出的，关键是`xlink:href=""`在调用`ngHref`指令的元素上设置空白属性。属性顺序似乎无关紧要。使用`ng-attr-xlink:href="{{xxx}}"`（如 Derek Hsu 的回答中所述）对我不起作用。

所有这些都假设 Angular 1.3.36。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-07T15:49:50.480

我用以下模块解决了同样的问题：

SVG模块：

```
var app = angular.module('Svgs', []);

angular.forEach([
    { ngAttrName: 'ngXlinkHref', attrName: 'xlink:href' },
    { ngAttrName: 'ngWidth', attrName: 'width' },
    { ngAttrName: 'ngHeight', attrName: 'height' }
], function (pair) {

    var ngAttrName = pair.ngAttrName;
    var attrName = pair.attrName;

    app.directive(ngAttrName, function (IeHelperSrv) {

        return {

            priority: 99,

            link: function (scope, element, attrs) {

                attrs.$observe(ngAttrName, function (value) {

                    if (!value) return;

                    attrs.$set(attrName, value);
                    if (IeHelperSrv.isIE) element.prop(attrName, value);
                });
            }
        };
    });
}); 
```

IE检测模块：

```
angular.module('IeHelper', []).factory('IeHelperSrv', function () {

    return {
        isIE: checkForIE.isIE,
    }
});

var checkForIE = {
    init: function () {
        this.isIE = (navigator.userAgent.indexOf('MSIE') != -1);
    }
};

checkForIE.init(); 
```

HTML：

```
<!-- image has initial fake source, width and height to force it to render -->
<image xlink:href="~/Content/Empty.png" width="1" height="1"
    ng-xlink-href="{{item.imageSrc}}"
    ng-width="{{item.width}}" ng-height="{{item.height}}"
    ng-cloak
    /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-07T11:13:37.383

对于由于 HTML5 模式下的 Angular/Angular UI 路由器而遇到此问题的任何其他人，我想出了一个简单的修复方法，以使 svg sprite 图标能够与它们的 xlink:href 属性和标签一起使用。

要点在这里：[https ://gist.github.com/planetflash/4d9d66e924aae95f7618c03f2aabd4a3](https://gist.github.com/planetflash/4d9d66e924aae95f7618c03f2aabd4a3)

```
app.run(['$rootScope', '$window', function($rootScope, $window){
 $rootScope.$on('$locationChangeSuccess', function(event){
    $rootScope.absurl = $window.location.href;
});

<svg><use xlink:href="{{absurl+'#svgvID'}}"></use></svg> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-21T14:11:26.323

我在使用 Ajax 将 svg spritesheet 加载到页面上时遇到了这个问题。如果我在加载 spritesheet 之前在页面上有一个，它会失败并且一旦 spritesheet 可用就不会解析。加载 spritesheet 后添加到 dom 中的任何内容都可以。我不得不推迟将项目放入 dom 直到 spritesheet 完成加载之后。

这只会影响 IOS。所有其他浏览器都不关心订单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-15T16:40:27.050

这花费了我比我想要的更多的时间。大约20-30分钟。

如果我理解正确，图像元素上的任何失败加载都会**使该元素在未来变得无用**。我相信这与@GeekyMonkey 所说的类似。如果角度绑定系统最初将 xlink:href 设置为 null，则 Image 元素将不再起作用，即使我们将来有有效值也是如此。

这是解决方案，请注意我如何使用 ng-if 指令将图像元素包装在 g 元素中。这确保我们仅在正确的值可用时才绑定图像。

```
<g ng-if="vm.svgMap.background != null">
    <image
        ng-attr-xlink:href="{{vm.svgMap.background.image | trusted}}"
        ng-attr-width="{{vm.svgMap.background.width}}"
        ng-attr-height="{{vm.svgMap.background.width}}"

        xlink:href=""

        width="1"
        height="1"
        x="0"
        y="0"></image>
</g> 
```

正如其他人所说，属性的顺序也很重要。为了确保 angularJS 允许我们绑定图像元素，我们还必须信任该资源，我已经通过过滤器完成了它（它是 xlink:href 属性中的那个）：

```
(function() {
    'use strict';

    angular.module('myTool').filter('trusted', TrustedFilter);

    function TrustedFilter($sce) {
        return function(url) {
            return $sce.trustAsResourceUrl(url);
        };
    };
}()); 
```

# sql - 如何通过自定义插件 portlet 中的自定义查找器获取 liferay 实体？

> ID：15895484
> 
> 赞同：7
> 
> 时间：2013-04-09T07:08:23.237
> 
> 标签：sql, service, liferay, liferay-6, builder

我们如何使用自定义 SQL 通过自定义查找器获取 liferay 实体？

1.  以下是我编写的 sql 查询`default.xml`（[我已将查询缩减到最低限度，以便逻辑保持简单。由于它包含一些函数和连接，我们无法使用`DynamicQuery`API]）：

    ```
    SELECT
        grp.*
    FROM
        Group_
    WHERE
        site = 1
        AND active_ = 1
        AND type_ <> 3 
    ```

2.  相关代码`MyCustomGroupFinderImpl.java`：

    ```
    Session session = null;

    try {
        session = openSession();

        // fetches the query string from the default.xml
        String sql = CustomSQLUtil.get(FIND_ONLY_ACTIVE_SITES);

        SQLQuery sqlQuery = session.createSQLQuery(sql);

        sqlQuery.addEntity("Group_", GroupImpl.class);
        // sqlQuery.addEntity("Group_", PortalClassLoaderUtil.getClassLoader().loadClass("com.liferay.portal.model.impl.GroupImpl"));

        return (List<Group>) QueryUtil.list(sqlQuery, getDialect(), 0, QueryUtil.ALL_POS);
    }
    catch (Exception e) {
        throw new SystemException(e);
    }
    finally {
        closeSession(session);
    } 
    ```

上面的代码将不起作用，因为`GroupImpl`该类存在于其中，`portal-impl.jar`并且此 jar 不能在自定义 portlet 中使用。

我也尝试过使用`sqlQuery.addEntity("Group_", PortalClassLoaderUtil.getClassLoader().loadClass("com.liferay.portal.model.impl.GroupImpl"))`
但是上面的代码抛出异常：

```
com.liferay.portal.kernel.exception.SystemException:
    com.liferay.portal.kernel.dao.orm.ORMException:
        org.hibernate.MappingException:
            Unknown entity: com.liferay.portal.model.impl.GroupImpl 
```

但是同样的代码也适用于我们的自定义实体，如果我们编写`sqlQuery.addEntity("MyCustomGroup", MyCustomGroupImpl.class);`.

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T07:08:23.237

我从[liferay 论坛主题](http://www.liferay.com/community/forums/-/message_boards/view_message/7158040#_19_message_7166735 "Liferay 论坛：在自定义 portlet 中获取 liferay 门户实体")中发现，`session = openSession();` 我们需要从`liferaySessionFactory`以下方式获取会话以使其工作：

```
// fetch liferay's session factory
SessionFactory sessionFactory = (SessionFactory) PortalBeanLocatorUtil.locate("liferaySessionFactory");

Session session = null;

try {
    // open session using liferay's session factory
    session = sessionFactory.openSession();

    // fetches the query string from the default.xml
    String sql = CustomSQLUtil.get(FIND_ONLY_ACTIVE_SITES);

    SQLQuery sqlQuery = session.createSQLQuery(sql);

    // use portal class loader, since this is portal entity
    sqlQuery.addEntity("Group_", PortalClassLoaderUtil.getClassLoader().loadClass("com.liferay.portal.model.impl.GroupImpl"));

    return (List<Group>) QueryUtil.list(sqlQuery, getDialect(), 0, QueryUtil.ALL_POS);
}
catch (Exception e) {
    throw new SystemException(e);
}
finally {
    sessionFactory.closeSession(session); // edited as per the comment on this answer
    // closeSession(session);
} 
```

希望这对stackoverflow上的人有所帮助，我还找到了一个关于custom-sql的很好的[教程](http://www.liferaysavvy.com/2013/02/getting-data-from-multiple-tables-in.html "从多个表中获取数据")，它也使用了相同的方法。

# php - 无脂肪框架中的动态键

> ID：15895487
> 
> 赞同：0
> 
> 时间：2013-04-09T07:08:27.457
> 
> 标签：php, fat-free-framework

为了访问在 html 页面上的 php 脚本中创建的数组，我们这样做`{{@somearray['somevalue']}}`。

我们如何处理`'somevalue'`从其他数组`{{@someotherarray['someotherindex'}}`
（即`{{@someotherarray['someotherindex']}}`=处的值`somevalue`）获取键 () 的情况？

我正在使用 F3 版本 2.1.x。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:54:28.817

这已在 3.x 中修复，在 2.x 中不起作用。

3.x 中的语法是：`{{@arr1.@arr2.@field}}`

# event-handling - 在 extjs4 如何在控制器中捕获 textarea 的按键事件

> ID：15895488
> 
> 赞同：2
> 
> 时间：2013-04-09T07:08:35.093
> 
> 标签：event-handling, extjs4, textarea, enter

我在 extjs 工作。我有一个文本区域来输入单词和一个搜索按钮。我的视图为-

```
Ext.define('Balaee.view.kp.Word.Word', {
    extend : 'Ext.form.Panel',
    id : 'WordId',
    alias : 'widget.Word',
    title : 'Dictionary',
    height : 500,
    items : [{

        xtype : 'textfield',
        fieldLabel : 'Enter the word',
        name : 'wordtext',
        //anchor:'100%',
        allowBlank : false,
        emptyText : 'Enter the word',
        enableKeyEvents : true,
        id : 'wordtext',
        action : 'EnterAction'
        }, 
        {
        xtype : 'button',
        formBind : true,
        fieldLabel : 'Search',
        action : 'SearchAction',
        text : 'Search'
        }
    ]
    }); 
```

在控制器中，我的功能为-

```
 SearchWord:function(button)
    {

        var j = Ext.getCmp('wordtext').getValue();
        console.log("word is:"+j);

        var answers = '{"data":[';
        answers = answers + '{"word":"'+j+'"}'
        answers =answers+']}';
        console.log(answers);

        var storeObject=this.getStore('kp.WordStore');
        storeObject.load({

            params:{
                data: answers 
            },
            callback: function(records,operation,success){
                //console.log(records)
            },
            scope:this
        });
        var temp=Ext.getCmp('WordId');
        temp.remove('WordInfoId');
        var details=Ext.create('Balaee.view.kp.Word.WordInfo');
        //details.region='center';
        temp.add(details);
    }
}); 
```

现在，当用户在 textarea 中输入单词并单击提交按钮时，上述功能可以正常工作。但我也想在输入按钮单击时执行控制器的“SearchWord”功能。即如果用户将在textarea 中输入单词并按下回车键，则需要执行控制器的相同功能。那么如何在控制器中捕获textarea 的回车键按下事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:36:26.610

只需侦听[specialKey](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.form.field.Text-event-specialkey)事件并在键为 ENTER 时调用您的函数。

因此，在控制器的 init 函数中，执行以下操作：

```
this.control({
    '#wordtext':{
        specialkey: function(field, e){
            if (e.getKey() == e.ENTER) {
                 //Do whatever you want here (such as call your SearchWord function)
            }
        }  
    }
}); 
```

# c# - 如何从页面禁用 cookie？

> ID：15895497
> 
> 赞同：4
> 
> 时间：2013-04-09T07:09:09.447
> 
> 标签：c#, asp.net

我有一个使用 asp.net 和 c# 创建的网页，我希望禁用 cookie。我试试`<SettingsCookies Enabled="false" />`。但是当我打开页面和 Firebug 时，cookie 就在那里。

如何禁用 cookie？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:15:35.160

**使用以下代码：**

```
string MyCookieValue;

    if(Request.Cookies["ID"] != null)

        Response.Cookies["ID"].Expires = DateTime.Now.AddDays(-1); 
```

可以点击这个链接：

[http://www.beansoftware.com/ASP.NET-Tutorials/Cookies-ASP.NET.aspx](http://www.beansoftware.com/ASP.NET-Tutorials/Cookies-ASP.NET.aspx)

将获得有关 cookie 的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:18:19.467

有趣的是， 在 ASP.NET 2.0 中`<httpCookies httpOnlyCookies="false"/>`似乎并没有禁用httpOnlyCookies： [http ://nerd.steveferson.com/2007/09/14/act-sessionid-and-login-problems-with-asp-net-20/](http://nerd.steveferson.com/2007/09/14/act-sessionid-and-login-problems-with-asp-net-20/)

看起来微软决定不允许您从 web.config 禁用它：
[http ://forums.asp.net/p/976773/1240648.aspx](http://forums.asp.net/p/976773/1240648.aspx)

可能的选择

```
 <httpCookies domain="" httpOnlyCookies="true|false" requireSSL="true|false" /> 
```

# arrays - 如何在 senchatouch2 中动态添加现有数组中的值

> ID：15895498
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:09:11.383
> 
> 标签：arrays, sencha-touch-2, push, add, dynamically-generated

使用 push() 方法我在数组中添加了值，但是当我使用 push() 再次添加时，值被添加到单独的数组中。如何在现有数组中动态添加值？请提供示例代码帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:55:28.917

像这样全局声明数组

> var arr = [];

然后使用 push() 方法在数组中添加值，例如，

> arr.push(Ext.getCmp('id').getValue());

像这样我们可以动态地在现有数组中添加值..

# copy - 将文本框标签和内容复制到剪贴板

> ID：15895501
> 
> 赞同：0
> 
> 时间：2013-04-09T07:09:24.790
> 
> 标签：copy, clipboard

我想为帮助台创建一个 Web 模板表单。基本上，用户将有多个文本框要填写，底部将是一个“复制到剪贴板”按钮，它将以他们可以粘贴到票务系统的格式复制所有内容。

例如，一个文本框可能是“电话号码：***_* __ *_*** ”，当粘贴剪贴板内容时，它会粘贴为“电话号码：”。

自从我完成 Web 开发以来已经有很长时间了，据我了解，我需要将文本框保存为变量并使用对我来说陌生的 javascript，如果任何能让我指出正确方向的东西，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:17:38.823

编写代码将这些数据收集在一起并保存到文件中，显示在消息框中，等等。一旦你有了，然后担心复制到剪贴板。通过将此称为剪贴板问题，您只会混淆事物并限制您的范围。

# actionscript-3 - 在我的网站中创建（像 youtube 一样的网络摄像头捕获）

> ID：15895506
> 
> 赞同：1
> 
> 时间：2013-04-09T07:09:37.213
> 
> 标签：actionscript-3, flash-cs5, flash-media-server

我有一个和 youtube 一样的网站。此时我正在尝试创建由 WEBCAM 捕获的视频图像。视频图像应先保存在我的电脑上（以FLV格式），然后如果用户满意，他或她可以将其上传到服务器上

我正在尝试在 Adob​​e flash CS5 和 Flash media server4 中使用 Actionscript3

1-我该怎么做？2- 需要闪存媒体服务器吗？

请注意，我们希望允许用户将视频保存在他/她的计算机上，然后才能上传到服务器。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:00:50.437

您还可以使用 Red5 作为替代的开源视频流记录器来查看。

[http://distriqt.com/post/493](http://distriqt.com/post/493)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:51:54.010

假设计算机可以承担即时进行编码的开销（或者有足够的内存来缓冲数据，然后可以通过编码过程运行数据），那么这里的 SO 答案中提到的库应该可以工作： [Encode video from any format在 AS3 中转换为 .flv 格式](https://stackoverflow.com/questions/9760496/encode-video-from-any-format-to-flv-format-in-as3)

我相信 Flash 媒体服务器只有在这种情况下才真正需要用于广播。

**伪代码示例**

```
private var cam:Camera;

public function Whatever()
{
    //In constructor
    addEventListener(Event.ENTER_FRAME, grabFrame);

    cam = Camera.getCamera(); 
    if (cam != null) 
    { 
        var vid:Video = new Video(cam.width, cam.height); 
        vid.attachCamera(cam); 
        addChild(vid); 
    }
}
private function grabFrame(event:Event):void
{
     var bd:BitmapData = new BitmapData(cam.width, cam.height)
     bd.draw(vid);
     //now the BitmapData has a frame of the video, at this point you also
     //would want to capture the audio then use the FLV class in the library
 } 
```

# javascript - 谷歌地图API获取方向API而不是返回路线，它返回附近的地方，如公交车站等

> ID：15895508
> 
> 赞同：1
> 
> 时间：2013-04-09T07:09:41.290
> 
> 标签：javascript, cordova, google-maps-api-3

我们需要跟踪用户的路径。因此，我们使用 Google 的地图 API --> 输入参数是开始位置和结束位置来获取路线。 [http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false)

但在 Google api [https://developers.google.com/maps/documentation/javascript/directions#DirectionsResults的文档中](https://developers.google.com/maps/documentation/javascript/directions#DirectionsResults)

如文档 ---"end_location 包含此行程目的地的 LatLng。由于 DirectionsService 使用起点和终点处最近的交通选项（通常是道路）来计算位置之间的方向，因此 end_location 可能与提供的不同这条路的目的地，例如，一条道路不在目的地附近。”

在此 API 中，它不是返回路线，而是返回附近的地点，如公交车站等。

# javascript - 只为一个 JS 文件动态加载属性

> ID：15895510
> 
> 赞同：1
> 
> 时间：2013-04-09T07:09:47.003
> 
> 标签：javascript, html

我有一个 HTML 页面，我在其中在 Jquery 对话框中发起一个 JS 应用程序。如何加载元属性：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, user-scalable=0"> 
```

动态只应用于JS文件。

经过一些研究，这可能就是我正在寻找的东西：http: [//www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/](http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:12:03.973

元标记仅应用于文档（在`<head>`元素中），而不是单个文件。

如果您需要该元用于对话框，我想唯一可用的解决方案是加载一个在其元素`<iFrame>`中包含元标记的`<head>`元素。

# sql - 在不使用游标的情况下在 SQL 中循环插入语句

> ID：15895514
> 
> 赞同：0
> 
> 时间：2013-04-09T07:09:56.370
> 
> 标签：sql, loops, insert

我在 SQL 中循环时遇到问题。我想循环一个开始日期，直到他到达结束日期。

他们对我说不要使用游标，所以我找到了一个这样的例子：

```
with mycte as
(
select cast('2007-01-01' as datetime) DateValue
union all
select DateValue + 1
from mycte 
where DateValue + 1 < '2030-12-31'
)
select * from mcte 
```

这行得通，所以我将变量更改为我的情况：

```
with View_Solidnet_Training as
(
select StartingDate as DateValue
union all
insert into OBJ_Availability values(34, DateValue + 1, 'AM', 2, 'Test')
select DateValue + 1
from View_Solidnet_Training
where DateValue + 1 < EndingDate
)
select * from View_Solidnet_Training 
```

但我收到以下错误：

> 消息 156，级别 15，状态 1，第 5 行关键字“插入”附近的语法不正确。消息 128，级别 15，状态 1，第 5 行 在此上下文中不允许使用名称“DateValue”。有效表达式是常量、常量表达式和（在某些情况下）变量。不允许使用列名。消息 102，级别 15，状态 1，第 9 行 ') 附近的语法不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:16:50.150

试试这个（未经测试）：

```
with mycte as
(
  select 34, cast('2007-01-01' as datetime) DateValue, 'AM', 2, 'Test' 
  union all
  select 34, DateValue + 1, 'AM', 2, 'Test'
    from mycte 
   where DateValue + 1 < '2030-12-31'
)
insert into OBJ_Availability (select * from mcte) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:17:06.450

请试试：

```
with View_Solidnet_Training as
(
    select @StartingDate as DateValue

    union all

    select DateValue + 1
    from View_Solidnet_Training
    where DateValue + 1 < @EndingDate
)
insert into OBJ_Availability
select 34, DateValue + 1, 'AM', 2, 'Test' from View_Solidnet_Training 
```

提供`@StartingDate`了`@EndingDate`两个日期时间变量，并且表格`OBJ_Availability`应按 CTE 的选定顺序仅包含 5 列。

# python - tweepy/ twitter api 错误类型

> ID：15895515
> 
> 赞同：5
> 
> 时间：2013-04-09T07:09:56.700
> 
> 标签：python, twitter, tweepy

我正在使用 tweepy 制作一个 twitter 应用程序。当用户推文/更新个人资料等时，他们会收到一些错误。我想对错误进行分类并为用户提供更多信息。

```
try:
    tweet/update profile/ follow....

except tweepy.TweepError, e:

    if tweepy.TweepError is "Account update failed: Description is too long (maximum is 160 characters)"
        Do something
    if tweepy.TweepError is "Failed to send request: Invalid request URL: http://api.twitter.com/1/account/update_profile.json?location=%E5%85%B5%E5%BA%A"
        Do something
    if tweepy.TweepError is "[{u'message': u'Over capacity', u'code': 130}]" 
        Do something 
```

分类错误的唯一方法是`e`与字符串进行比较，例如，`Account update failed: Description is too long (maximum is 160 characters)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T20:53:44.057

是的，这是现在唯一的方法。只定义了一个[TweepError](https://github.com/tweepy/tweepy/blob/master/tweepy/error.py)异常。它在整个应用程序中以不同的文本出现。

这是github 上相关的未[解决问题。](https://github.com/tweepy/tweepy/issues/209)所以以后有机会改进。

# java - 路径测试和分支测试

> ID：15895517
> 
> 赞同：13
> 
> 时间：2013-04-09T07:10:00.970
> 
> 标签：java, unit-testing, testing, integration-testing

你能解释一下路径和分支测试之间的区别吗？

我读过很多文章，但我仍然对这两者感到困惑。

我在堆栈溢出中进行了搜索，但没有找到任何合适的答案如果我重复这个问题，请通过提供链接帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T09:32:21.857

## 快速总结

总结自[https://www.cs.drexel.edu/~jhk39/teaching/cs576su06/L4.pdf](https://www.cs.drexel.edu/~jhk39/teaching/cs576su06/L4.pdf)

路径测试：

*   100% 路径覆盖。
*   通过程序执行所有可能的控制流路径。

语句测试：

*   100% 的报表覆盖率。
*   在某个测试下至少执行一次程序中的所有语句。

分支测试：

*   100% 的分支机构覆盖率。
*   执行足够的测试以确保每个分支备选方案在某个测试下至少执行一次。

一般来说，路径测试 >= 分支测试 >= 语句测试，就它们可以提供多少信心来确定您的系统的正确性而言。

## 讨论

路径覆盖率计算通过程序执行的从输入到输出的完整路径数，而分支覆盖率计算在任何时间点测试的分支数。在这个定义中，完整的路径覆盖将导致完整的分支覆盖。

可能有多个路径会命中单个条件语句，并且完整的路径覆盖率可能会测试不同的变体（因为在 if 语句中可能会调用外部资源，而分支覆盖率无法识别）。分支覆盖更像是测试分支是否在某个时刻被命中，并且参数正确地传递给模拟外部资源（不一定是之后发生的事情）。

如此处所示：[https](https://www.cs.drexel.edu/~jhk39/teaching/cs576su06/L4.pdf) ://www.cs.drexel.edu/~jhk39/teaching/cs576su06/L4.pdf ，我们有时可以通过流程图表示所有路径的集合，目标是验证每条路径从开始to end 在路径测试中按预期工作。

## 分支测试附加说明

从这里开始：[分支测试](https://stackoverflow.com/questions/1015441/branch-testing)

```
Testing in which all branches in the program source code are tested at least once 
```

## 路径测试附加说明

从这里：[http](http://www.qualitytesting.info/forum/topics/what-is-difference-between-2) ://www.qualitytesting.info/forum/topics/what-is-difference-between-2和[http://www.cs.st-andrews.ac.uk/~ifs/Books/SE9/网页/测试/PathTest.html](http://www.cs.st-andrews.ac.uk/~ifs/Books/SE9/Web/Testing/PathTest.html)

```
A path is a sequence of executable statements. Testers are concerned with
"entry-exit paths", which begin at the entry point into a given process and
proceed to its exit point. 

The objective of path testing is to ensure that each independent path through
the program is executed at least once. An independent program path is one that
traverses at least one new edge in the flow graph. In program terms, this means
exercising one or more new conditions. Both the true and false branches of all
conditions must be executed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T10:17:20.017

基本路径测试，一种结构化测试或白盒测试技术，用于设计测试用例，旨在检查所有可能的执行路径至少一次。为所有可能的路径创建和执行测试会导致 100% 的语句覆盖率和 100% 的分支覆盖率。

分支覆盖是一种测试方法，旨在确保每个决策点的每个可能分支至少执行一次，从而确保执行所有可达代码。

也就是说，每个分支都采取不同的方式，真假。它有助于验证代码中的所有分支，确保没有分支导致应用程序的异常行为。

# java - java对象的动态相等

> ID：15895520
> 
> 赞同：0
> 
> 时间：2013-04-09T07:10:05.893
> 
> 标签：java, set, comparator

假设我有一个`Person`具有简单属性的类，如姓名、年龄、地址、电话和电子邮件。

我有一堆`Sets`每个包含的`Person`对象。

我想`Set`为每个集合动态定义特定的相等性，以便优雅地删除重复项。

例如：我想要一组删除基于电话的重复人员，另一组使用电子邮件删除重复的人员对象。

我知道的唯一方法是`Person`多次子类并根据我的要求覆盖 equals ，但这会导致类数量的爆炸式增长。

在 的情况下允许这样做`Comparators`。我可以根据需要/想要为同一个对象定义尽可能多的匿名比较器。

具体来说，我想了解为什么`Java`我们只能为一个对象定义一个相等性但可以定义多个比较器？

在这种情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:33:44.320

使用 Map 而不是 Set 怎么样？映射的键确定定义唯一性的属性，映射的值是键唯一对象的集合。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T07:15:38.260

我会写一个 DuplicateRemover 类。这些类将包含删除特定字段重复项的逻辑。例如：

```
public class DublicateRemover{
 public static Set<Person> removeDublicateByPhone(Set<Person> persons, Set<Person> persons2) {
  ...
 }
 public static Set<Person> removeDublicateByName(Set<Person> persons, Set<Person> persons2) {
  ...
 }

} 
```

# android - 是否存在消耗 Android 内存的方法，以便 VM 卸载其他应用程序？

> ID：15895521
> 
> 赞同：2
> 
> 时间：2013-04-09T07:10:06.623
> 
> 标签：android, memory

我们想在我们的 android 应用程序中测试当 VM 由于其他应用程序消耗过多内存而关闭应用程序时的行为。

是否有一个应用程序可以模拟这种在 android VM 中正确引发正确操作的内存消耗行为？

或者：有没有办法在使用 Eclipse 强制系统假装应用程序存在巨大的内存占用时产生等效信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:15:34.287

不，每个应用程序都有自己的堆大小限制，如果 OOM 认为它出现故障，它们都会被杀死。如果你想抢内存，试着在native code中做，它在DVM管理之外。

# ruby-on-rails - save_and_open_page 和 spork，spork 正在丢失测试套件/输出

> ID：15895522
> 
> 赞同：13
> 
> 时间：2013-04-09T07:10:10.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capybara, spork

当我用 spork 运行我的 rspec 测试时，每次我使用 capybara 的 save_and_open_page 时，spork 都会丢失测试套件.. 或者可能不再输出任何东西......

查看日志

```
# => without save_and_open_page
09:04:24 - INFO - Spork server for RSpec, Test::Unit successfully started

09:04:24 - INFO - Guard::RSpec is running
09:04:24 - INFO - Running all specs
Running tests with args ["--drb", "-f", "progress", "-r", "/Users/myuser/.rvm/gems/ruby-1.9.3-p392/gems/guard-rspec-2.5.2/lib/guard/rspec/formatter.rb", "-f", "Guard::RSpec::Formatter", "--failure-exit-code", "2", "spec"]...
................

Finished in 4.1 seconds
16 examples, 0 failures

Randomized with seed 50331

Done.

# => with save_and_open_page, no .... are shown anymore
09:04:29 - INFO - Guard is now watching at '/Users/myuser/coding/myproject'
09:04:39 - INFO - Running: spec/features/registration/registration_process_spec.rb
Running tests with args ["--drb", "-f", "progress", "-r", "/Users/myuser/.rvm/gems/ruby-1.9.3-p392/gems/guard-rspec-2.5.2/lib/guard/rspec/formatter.rb", "-f", "Guard::RSpec::Formatter", "--failure-exit-code", "2", "spec/features/registration/registration_process_spec.rb"]...
Done.

# => without save_and_open_page, also no .... anymore (after restart it works again)
[1] guard(main)> Running tests with args ["--drb", "-f", "progress", "-r", "/Users/myuser/.rvm/gems/ruby-1.9.3-p392/gems/guard-rspec-2.5.2/lib/guard/rspec/formatter.rb", "-f", "Guard::RSpec::Formatter", "--failure-exit-code", "2", "spec/features/registration/registration_process_spec.rb"]...
Done.

    # => here i added some errors into my code... still no error message shown...
[1] guard(main)> Running tests with args ["--drb", "-f", "progress", "-r", "/Users/myuser/.rvm/gems/ruby-1.9.3-p392/gems/guard-rspec-2.5.2/lib/guard/rspec/formatter.rb", "-f", "Guard::RSpec::Formatter", "--failure-exit-code", "2", "spec/features/registration/registration_process_spec.rb"]...
Done.

# only works again after restarting spork 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:06:33.920

不知何故，你`STDOUT`被其他一些缓冲区取代了。因此，Capybara 向 STDOUT 写入的任何内容都会在其他地方被忽略或消耗。

尝试以下操作：

```
# Add global before/after blocks
before :each do
  @old_stdout, @old_stderr = STDOUT, STDERR
end

after :each do
  STDOUT,  STDERR  = @old_stdout, @old_stderr

  # Some gems use $stdout and $stderr, instead of STDOUT and STDERR, replace those too
  $stdout, $stderr = @old_stdout, @old_stderr
end 
```

Capybara`save_and_open_page`使用 Launchy gem。因此，我相信`STDOUT`and`STDERR`正在其中一个宝石中被打断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T23:25:34.790

[我在http://blog.mikecordell.com/2013/08/14/guard-and-capybara's-save_and_open_page.html](http://blog.mikecordell.com/2013/08/14/guard-and-capybara's-save_and_open_page.html)找到了描述问题的真正解决方案。特别感谢此解决方案的实际作者。

只需添加：

```
RSpec.configure do |config|
  config.before(:each) do
    @old_stdout, @old_stderr = STDOUT, STDERR
  end

  config.after(:each) do
    $stdout, $stderr = @old_stdout, @old_stderr
  end
end 
```

到`spec_helper.rb`

# python - 用python获取fat32属性

> ID：15895525
> 
> 赞同：2
> 
> 时间：2013-04-09T07:10:19.937
> 
> 标签：python, linux, fat32

如何在不使用 fatattr 实用程序调用产生新进程的情况下在 linux 中获取 fat32 属性（如存档、隐藏...）？可能有 python 绑定它或 linux/fs 函数（fat_ioctl_get_attributes，[http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/fs/fat/file.c](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/fs/fat/file.c)） . 或者也许可以用 python-xattr 来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:42:42.863

正如您在函数名称中看到的，内核函数`fat_ioctl_get_attributes`是通过[ioctl](http://en.wikipedia.org/wiki/Ioctl)从用户空间调用的，我不知道有任何其他绑定。因此，您可以通过调用自己来简单地读取属性[`ioctl`](http://docs.python.org/3/library/fcntl.html#fcntl.ioctl)，如下所示：

```
import array
import fcntl
import os

FAT_IOCTL_GET_ATTRIBUTES = 0x80047210
FATATTR_BITS = 'rhsvda67'

def get_fat_attrs(fn):
    fd = os.open(fn, os.O_RDONLY)
    try:
        buf = array.array('L', [0])
        try:
            fcntl.ioctl(fd, FAT_IOCTL_GET_ATTRIBUTES, buf, True)
        except IOError as ioe:
            if ioe.errno == 25: # Not a FAT volume
                return None
            else:
                raise

        return buf[0]
    finally:
        os.close(fd)

if __name__ == '__main__':
    import sys
    for fn in sys.argv[1:]:
        attrv = get_fat_attrs(fn)
        if attrv is None:
            print(fn + ': Not on a FAT volume')
            continue
        s = ''.join((fb if (1 << idx) & attrv else ' ')
                    for idx,fb in enumerate(FATATTR_BITS))
        print(fn + ': ' + s) 
```

# producer - 线程“主”java.lang.NoSuchMethodError 中的异常：scala.Tuple2._1$mcI$sp()I

> ID：15895530
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:10:29.797
> 
> 标签：producer

属性 props = new Properties();

props.put("zk.connect", "localhost:2181");

props.put("serializer.class", "kafka.serializer.StringEncoder");

ProducerConfig config = new ProducerConfig(props);

生产者生产者=新生产者（配置）；

ProducerData data = new ProducerData("test-topic", "test-message");

生产者.发送（数据）；

我正在尝试执行此代码，然后在线程“main”java.lang.NoSuchMethodError 中出现异常：scala.Tuple2._1$mcI$sp()I 这个异常。我添加了所有与 scala 相关的 jar file.plese suggedt me ??????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T13:53:29.893

我遇到了同样的问题。检查您的类路径以查看 sbt-launch.jar 是否在 scala-library.jar 之前。他们都拥有相同的班级；scala-library 中的 scala.Tuple2 是正确的。

将 scala-library.jar 放在类路径中更高的位置后解决了这个问题。

谢谢，

侯赛因

# iphone - 使用 PopOver 时无法退出键盘

> ID：15895533
> 
> 赞同：1
> 
> 时间：2013-04-09T07:10:42.530
> 
> 标签：iphone, ios, ipad

在我的 iPad 应用程序中有 3 个文本框，我在第二个文本框上使用 popoverview 控制器。这是2个案例

在第一种情况下：

当我完成第一个文本框的编辑并单击键盘上的下一个按钮时，键盘完美退出，popoverview 控制器在第二个文本框上打开。当第一个文本框的下一个按钮单击时，我在这里编写了代码第二个文本框应该成为 FirstResponder。

在第二种情况下：

这里的实际问题是，当我完成第一个文本框的编辑并直接触摸第二个文本框而不单击键盘上的下一个按钮时，那个时候 popoverview 控制器菜单在第二个文本框上打开并且键盘无法退出，键盘正在敲击他们我退出键盘的代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:39:18.623

```
-(void)textFieldDidBeginEditing:(UITextField *)textfield
{

    if ([textfield tag]==yourtextfieldtag)//set tag for your textfield
    {
       [yourfirsttextfield  resignFirstResponder];
       [yoursecondtextfield  resignFirstResponder];
       .
       .
       .

     //Write all textField with resignFirstResponder
     }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:11:33.487

这是您处理软键盘的方法

> [**iPhone教程中的软键盘处理**](http://www.rdcworld-iphone.blogspot.in/2013/03/handling-soft-keypad-in-iphone-tutorial.html)

这里有三种简单的方法来处理键盘

1.  单击按钮时键盘返回。
2.  当用户单击键盘上的 Return 或 Done 按钮时，键盘返回。
3.  当用户触摸背景屏幕/视图时，键盘返回。

*在你的情况下，只需遵循第三种方式。* 您需要做的只是创建一个方法，在该方法中调用

所需文本字段的方法。

并将相关的 UIView 类更新为 Interface Builder 中的 UIControl。因为我已经逐步编写了所有信息，以使其更加简单明了。

*这是负责的代码片段*

```
- (IBAction)keypadGoBack:(id)sender {    
    [userNameTextField resignFirstResponder];
    [passwordTextField resignFirstResponder];
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:22:59.847

在下面的方法中编写您在键盘的 NEXT 按钮事件中使用的代码...

```
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {
    if (textField == yourFirstTextBox) {
       // write your code here   
    }
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T10:28:53.987

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textField==yourTextField)
    {
        [self.view endEditing:YES];
        // Write Your Popoverview Code / Extra Code
        return NO;
    }
    return YES;
} 
```

1.  在这里，当您点击文本字段时，将调用此方法。
2.  并使用 yourtextFieldName 检查文本字段是否匹配..它将退出所有键盘。如果还有多个..在的帮助下。

    [self.view endEditing:YES];

3.  而且你也可以为 popoverview 做额外的代码并且不返回意味着它不会给那个 perticuler textField 提供键盘。谢谢。

# .htaccess - 没有子域或子文件夹的多语言基本 php 网站

> ID：15895535
> 
> 赞同：0
> 
> 时间：2013-04-09T07:10:46.477
> 
> 标签：.htaccess, seo, multilingual

现在我有一个使用英语和德语两种语言的网站。没有使用子文件夹或子域。使用`$_Session[lang]`, 和 gettext 函数显示正确的语言。

```
example.com/about-us.php 
```

如果是`'$_Session[lang]' = en`则页面显示为英文 如果`'$_Session[lang]' = de`则页面显示为荷兰语

但它不是 SEO 友好的。我想保持文件夹的结构相同，并想在 url 中添加一个参数来指定语言。喜欢

```
example.com/en/about-us.php 
```

对于英语和

```
example.com/de/about-us.php 
```

为德语。

"example.com/en/about-us.php 和 example.com/de/about-us.php 这两个页面都应该指向文件 root/webspace/about-us.php，即文件夹 /en 和 /de 是VIRTUAL（实际上不应该存在以避免代码冗余）。在文件 about-us.php 中，我们应该能够知道调用了哪个虚拟文件夹（/en 或 /de），以便能够定义将定义 GETTEXT 的会话变量语。

我怎样才能做到这一点？谢谢回复

# mysql - 嘿，我是新来的，并且遇到了一个简单的 leveshtein 函数的错误

> ID：15895537
> 
> 赞同：0
> 
> 时间：2013-04-09T07:10:52.157
> 
> 标签：mysql

在 phpmyadmin 的块下方运行时，它显示

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法

```
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) )  RETURNS INT  DETERMINISTIC  BEGIN    DECLARE s1_len , s2_len, i, j, c, c_temp, cost INT;    DECLARE s1_char CHAR;    -- max strlen=255    DECLARE cv0, cv1 VARBINARY(256);    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = >0;    IF s1 = s2 THEN
     RETURN 0;    ELSEIF s1_len = 0 THEN
     RETURN s2_len;    ELSEIF s2_len = 0 THEN
     RETURN s1_len;    ELSE
     WHILE j <= s2_len DO
       SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
     END WHILE;
     WHILE i <= s1_len DO
       SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
       WHILE j <= s2_len DO
         SET c = c + 1;
         IF s1_char = SUBSTRING(s2, j, 1) THEN 
           SET cost = 0; ELSE SET cost = 1;
         END IF;
         SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
         IF c > c_temp THEN SET c = c_temp; END IF;
           SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
           IF c > c_temp THEN 
             SET c = c_temp; 
           END IF;
           SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
       END WHILE;
       SET cv1 = cv0, i = i + 1;
     END WHILE;    END IF;    RETURN c;  END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:12:32.637

只是改变`DELIMITER`

```
DELIMITER $$
CREATE FUNCTION levenshtein(s1 VARCHAR(255), s2 VARCHAR(255))  
RETURNS INT
DETERMINISTIC
BEGIN
    DECLARE s1_len , s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR;
    -- max strlen=255
    DECLARE cv0, cv1 VARBINARY(256);
    SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0;
    IF s1 = s2 THEN
        RETURN 0;
    ELSEIF s1_len = 0 THEN
        RETURN s2_len;
    ELSEIF s2_len = 0 THEN
        RETURN s1_len;
    ELSE
        WHILE j <= s2_len DO
            SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
        END WHILE;
        WHILE i <= s1_len DO
            SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
            WHILE j <= s2_len DO
                SET c = c + 1;
                IF s1_char = SUBSTRING(s2, j, 1) THEN 
                    SET cost = 0; 
                ELSE 
                    SET cost = 1;
                END IF;
                SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
                IF c > c_temp THEN 
                    SET c = c_temp; 
                END IF;
                SET c > c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
                IF c  c_temp THEN 
                  SET c = c_temp; 
                END IF;
                SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
            END WHILE;
            SET cv1 = cv0, i = i + 1;
        END WHILE;
    END IF;
RETURN c;
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:22:23.420

在您的第 5 行中，使用 BEGINE 而不是 DO，在第 7 行中，使用 END 而不是 END WHILE

# java - 如何限制检查Jtable中多列中的单个复选框

> ID：15895541
> 
> 赞同：0
> 
> 时间：2013-04-09T07:11:01.007
> 
> 标签：java, swing, jtable

我正在尝试实现一个 Jtable，其中包括三个复选框表，如下所示：

![图片](https://i.imgur.com/oUC3dw7.png)

你能告诉我如何设置一个复选框的选择组，它在任何时候只允许在一行中选择一个复选框吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T07:16:42.463

我不知道这样做是开箱即用的。每次进行更改时，我都会让 TableModelListener 检查这些列，并根据需要在复选框上调用 setValueAt。

# java - 如何在java中模拟局部变量？

> ID：15895546
> 
> 赞同：2
> 
> 时间：2013-04-09T07:11:09.050
> 
> 标签：java, mocking, easymock, powermock

在这个情况下？

```
class A {
  public void f() {
    B b = new B();
    C c = new C();
    // use b and c, and how to modify their behaviour?
  }
} 
```

我怎样才能用`PowerMock`and来完成我的想法`EasyMock`？

出于测试原因，我不想更改我的紧凑代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:08:09.590

事实上，您可以使用 PowerMock 模拟对象构造。他们在这里有很好的文档：[https ://code.google.com/p/powermock/wiki/MockConstructor](https://code.google.com/p/powermock/wiki/MockConstructor)

还请看一下[这个示例](http://www.captaindebug.com/2011/10/using-powermock-to-mock-constructors.html)，该示例介绍了模拟对象的构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:21:55.107

您可以这样做，请参阅 Matt Lachman 的答案。但是不推荐这种方法。这有点骇人听闻。

最好的方法是将依赖对象的创建委托给工厂模式并将工厂注入到您的`A`类中：

```
class BFactory {

    public B newInstance() {
        return new B();
    }
}

class CFactory {

    public C newInstance() {
        return new C();
    }
}

class A {

    private final BFactory bFactory;
    private final CFactory cFactory;

    public A(final BFactory bFactory, final CFactory cFactory) {
        this.bFactory = bFactory;
        this.cFactory = cFactory;
    }

    public void f() {
        B b = bFactory.newInstance();
        C c = cFactory.newInstance();
    }
} 
```

然后，您将模拟工厂以返回依赖类的模拟实例。

如果由于某种原因这不可行，那么您可以在`A`类中创建工厂方法

```
class A {

    public void f() {
        B b = newB();
        C c = newC();
    }

    protected B newB() {
        return new B();
    }

    protected C newC() {
        return newC();
    }
} 
```

然后您可以使用`spy`模拟这些工厂方法的 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:13:22.230

看起来你需要*[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。*

您正在创建**B 和 C 的具体实例**，然后您无法修改行为。

将实例作为参数传递给`f(InterfaceB b, InterfaceC c)`，您应该使用多态性，然后您可以将需要更改其行为的模拟实例作为参数传递给此方法。因此，该方法不需要关心它传递给它的具体实例类型，您可以实现您所需要的。

*我知道接口的名称是不合逻辑的，但这可以很容易地解释上下文。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:23:09.187

如果不更改代码，它将无法正常工作。（可测试性设计）。您可以将 B 替换为工厂方法，该方法在实际中创建 B1 或在测试中创建 BTest，两者都实现了 IB 接口。

# html - 带有锚链接的电子邮件在 gmail 上不起作用，并将我的“#”链接编入索引？

> ID：15895550
> 
> 赞同：3
> 
> 时间：2013-04-09T07:11:13.397
> 
> 标签：html, email, anchor

我正在按照客户的指示设计具有[类似效果的电子通讯。](http://truffc.bugs3.com/demo.html)

我知道没有办法在电子邮件中使用 javascript，所以我试图以一种愚蠢的方式使用`overflow:hidden`和锚定标签。当我单击相应的链接时，隐藏的图像将向上滚动到可见区域。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>demot</title>
<style type="text/css">
.OF {
    display:block;
    max-height: 100px;
    overflow: hidden;
    white-space:nowrap;
}
</style>
</head>

<body>
<!-- Save for Web Slices (News_Letter_artwork.jpg) -->
<table id="Table_01" width="595" height="434" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td colspan="5">
            <img src="images/News_Letter_artwork_01.jpg" width="595" height="155" alt=""></td>
    </tr>
    <tr style="display:block;">
        <td>
            <img src="images/News_Letter_artwork_02.jpg" width="50" height="37" alt=""></td>
        <td>
            <A href="#tab_01"><span><font><img src="images/News_Letter_artwork_03.jpg" width="118" height="37" alt=""></font></span></A></td>
        <td>
            <A href="#tab_02"><span><img src="images/News_Letter_artwork_04.jpg" width="118" height="37" alt=""></span></span></A></td>
        <td>
            <A href="#tab_03"><span><img src="images/News_Letter_artwork_05.jpg" width="121" height="37" alt=""></span></span></A></td>
        <td>
            <img src="images/News_Letter_artwork_06.jpg" width="188" height="37" alt=""></td>
    </tr>
    <tr style="display:block; max-width: 595px; max-height: 186px; overflow: hidden; white-space:nowrap;">
        <td colspan="5">
            <h2><a name="tab_01" id="tab_01"></a></h2><img src="images/News_Letter_artwork_07.jpg" width="595" height="186" alt=""><p>
            <h2><a name="tab_02" id="tab_02"></a></h2><img src="images/News_Letter_artwork_07b.jpg" width="595" height="186" alt=""><p>
            <h2><a name="tab_03" id="tab_03"></a></h2><img src="images/News_Letter_artwork_07c.jpg" width="595" height="186" alt=""><p>
        </td>
    </tr>
    <tr>
        <td colspan="5">
            <img src="images/News_Letter_artwork_08.jpg" width="595" height="56" alt=""></td>
    </tr>
</table>
</body>
</html> 
```

关于大多数客户端不支持 div 标签，所以我已经厌倦了使用 table 来制作它，实际上，一切都在浏览器中工作，但`<a>`标签`href`将在电子邮件客户端中替换为`#tab_01`to `http://mydomain/news.html#tab_01`。

当我在电子邮件客户端上单击它时，它会打开一个新的浏览器窗口，这根本不是我想要的。有可能修复吗？

这是我的发送电子邮件程序：

1.  将整个网站上传到服务器
2.  打开页面
3.  全选并复制
4.  粘贴以组成窗口，然后发送。

我做错什么了吗？我已经测试过 Gmail、Hotmail (outlook.com)、Yahoo、Apple 邮件、Outlook 2011 for Mac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:14:15.393

我之前在电子邮件中测试过锚链接，发现它们的支持参差不齐。根据记忆，它可能在 Mac 客户端中运行良好，但在 Gmail 或 Outlook 中却惨遭失败。

我记得有一个解决方案，我记得不久前看到的正是你想要做的，但只适用于 Mac 客户端。

一种替代解决方案是将锚链接与电子邮件的网络版本结合起来。这样他们将被带到同一个电子邮件（虽然现在在浏览器中），并指向所需的锚点。

否则，如果您不愿意使用浏览器，您将不得不避免隐藏这些部分并且只知道不支持锚链接的位置，读者只需向下滚动即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:06:10.713

  我认为你不可能实现这个目标。

  大多数电子邮件客户端不支持头部或正文中的样式标记（尤其是 gmail），正如前面提到的 - 您不能在内联 css 中使用事件或选择器。所以它不能通过 :focus 选择器来完成。

  作为参考，我可以为您提供大多数电子邮件客户端（基于 Web 和非基于 Web）[支持的 CSS链接](http://www.campaignmonitor.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T19:34:05.783

我自己的电子邮件有问题，并提出了这个最低限度的工作示例，如果你抓住这个例子并用 putsmail ( [https://putsmail.com/tests/](https://putsmail.com/tests/) ) 测试它，你会发现这与大多数人的共识相反互联网 gmail 确实支持内容锚的使用。

我在更复杂的电子邮件中使用了相同的原则，发现这有点挑剔，所以我选择保留我的锚名称不带下划线并检查电子邮件是否有有效的 html：它似乎工作正常。

我知道这不是 Ops 问题的明确答案，但由于这是一个 7 年的问题，导致了一个错误的结论，我觉得把它留在这里会更有成效。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br">
<head>
<title>ANCHOR TEST</title>
<meta charset="utf-8">
</head>
<body>
<a href="#01" >ANCHOR 1</a><br/>
<a href="#test01" >ANCHOR 2</a><br/>
<a href="#test_01" >ANCHOR 3</a><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>      
<a name="01" id="01" >destination 1</a><br/>
<a name="test01" >destination 2</a><br/>
<span name="test_01" >destination 3</span><br/>
</body>
</html> 
```

# ruby-on-rails-3 - 在 Rails 应用程序的 Haml 视图中使用 AngularJS

> ID：15895551
> 
> 赞同：21
> 
> 时间：2013-04-09T07:11:20.137
> 
> 标签：ruby-on-rails-3, angularjs, haml

我有一个带有 Haml 视图的 Rails 应用程序。现在我想将 AngularJS 添加到应用程序的某些部分，但问题是 Haml 视图是在服务器端呈现的，而 AngularJS 代码不起作用，因为它是在客户端呈现的。

假设我的 index.html.haml 中只有这个：

```
!!!
%html{"ng-app" => "Test"}
  %head
    %script{:src => "http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.js"}
    :javascript
      function Clock($scope) {
        $scope.currentTime = new Date();
      }
    %title Welcome to AngularJS
  %body
    %h1 Hello, World.
    %p{"ng-controller" => "Clock"}
      The current time is {{currentTime | date:'h:mm:ss a'}}. 
```

所以目前，它只是打印出大括号内的所有内容，而没有实际处理它。有一些解决方案，但它们适用于您的完整视图被 AngularJS 模板替换的情况。我想将 AngularJS 主要用于我的 Rails 应用程序中的少量功能。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-09T07:48:47.617

约翰，

我在这里编辑了你的代码：http: [//codepen.io/anon/pen/vKiwH](http://codepen.io/anon/pen/vKiwH)

```
%html{"ng-app"=>true}
 %p{"ng-controller" => "clock"}
  The current time is {{currentTime | date:'h:mm:ss a'}}. 
```

和javascript是：

```
function clock($scope) {
  $scope.currentTime = new Date().getTime();
} 
```

# r - R中多个数字列的子集

> ID：15895553
> 
> 赞同：0
> 
> 时间：2013-04-09T07:11:23.363
> 
> 标签：r

我有 3 列数据，每列都有一个数字距离值。

我成功地为每个单独的列创建了一个子集，以使用以下函数消除异常值：

```
newData <- subset(x, x < mean(x)+3*sd(x) & x > mean(x)-3*sd(x)) 
```

问题是，这会创建三个不同长度的新向量，我想对操作数据进行 t 检验。

如何最好地创建所有三列的子集，其中条件之外的数据被丢弃？

# android - 将视图渲染到 View Pager - 优化方式

> ID：15895554
> 
> 赞同：3
> 
> 时间：2013-04-09T07:11:24.973
> 
> 标签：android, android-layout, optimization, android-viewpager, android-inflate

在我的应用程序中，我使用以下方法将视图呈现/生成到视图寻呼机。是的，它工作正常并且符合预期。

***注意：- 但在这里我看到这种方法必须在 Android 资源（与设备相关联）方面付出很多努力。我想找出任何优化的方法来做同样的事情。有吗？建议我或以上是好的？***

```
class MyActivity extends Activity{
        @Override
        public void onCreate(Bundle savedInstanceState) {

             super.onCreate(savedInstanceState);
            setContentView(R.layout.layoutView);

            LinearLayout pageFirst = getPageFisrt(context);
            LinearLayout pageSecond = getPageSecond(context);
            LinearLayout pageThird = getPageThird(context);
            LinearLayout pageFourth = getPageFourth(context);
            .........
            .........

            pageArrayList = new ArrayList<LinearLayout>();
            pageArrayList.clear();

            pageArrayList.add(pageFirst);
            pageArrayList.add(pageSecond);
            pageArrayList.add(pageThird);
            pageArrayList.add(pageFourth);
            ...........
            ..........

            viewPager.setAdapter(new MatchDetailsPagerAdapter(
                    context, pageArrayList));

            indicator.setViewPager(viewPagerMatchDetailMain);

        }

    } 
```

对于每个页面，我都从资源中夸大了布局，例如

```
 private LinearLayout getPageFisrt(Context context) {
        // TODO Auto-generated method stub
        LayoutInflater inflater = LayoutInflater.from(context);
        LinearLayout linearLayoutFirstPage = (LinearLayout) inflater.inflate(
                R.layout.pager_first_large_views, null);

       // performing action on the page child layout.

        return linearLayoutFirstPage;
    } 
```

***期待更好的方法来做同样的事情***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:27:34.130

我认为，要使用`FragmentPagerAdapter`更优化的片段，然后在`onCreate`方法中生成所有布局。

```
public class FragmentAdapter extends FragmentPagerAdapter
    implements IconPagerAdapter
{    
    private int count = 2;

    public InstallFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {     
        switch (position) {
            case 0:
                return Fragment0.newInstance();
            case 1:
                return Fragment1.newInstance();
            case 2:
                return Fragment2.newInstance();
            default:
                break;
        }
        return null;
    }

    @Override
    public int getCount() {
        return count;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "";
    }

    @Override
    public int getIconResId(int position) {
        return 0;
    }
} 
```

# flash - AS2在for循环中以数字结尾访问实例名称

> ID：15895557
> 
> 赞同：0
> 
> 时间：2013-04-09T07:11:40.240
> 
> 标签：flash, actionscript, actionscript-2

所以现在这是我的代码

```
var binaryArray:Array = [
                     1,0,0,
                     0,1,0,
                     0,0,1]

for(i = 0; i < binaryArray.length; i++){
    if(binaryArray[i] == 1){
        light + i.gotoAndStop(2);
    }
} 
```

我在舞台上有 9 个影片剪辑，其中包含 light0、light1、light2 等实例...

但我似乎无法让它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:14:30.453

假设 light0、light1 等在你需要去的舞台上：

```
this["light" + i.toString()].gotoAndStop(2); 
```

# mobile - iPhone 未将我的网站大小调整为其视口大小（无响应）

> ID：15895562
> 
> 赞同：3
> 
> 时间：2013-04-09T07:11:58.583
> 
> 标签：mobile, web, resize, viewport

我正在尝试解决我的网站的问题，该问题在 iphone 4s 中打开时无法调整到视口的大小。

该网站没有响应，移动设备中的预期结果是将整个网站重新调整到视口大小。以下是我尝试过的事情

*   无视口元标记集：适用于 Android，不适用于 iphone。
*   添加了 width = device-width 的视口：适用于 Android，不适用于 iphone。
*   添加了宽度 = 980 的 vieport：适用于 Android，不适用于 iphone。
*   添加了 width=device-width,initial-scale=1.0 的视口：适用于 Android，不适用于 iphone。

我错过了什么吗！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:43:16.293

你试过这个吗？

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1., user-scalable=no, target-densityDpi=device-dpi" /> 
```

# unix - 检查文件是否为空

> ID：15895568
> 
> 赞同：0
> 
> 时间：2013-04-09T07:12:19.023
> 
> 标签：unix

如何检查 korn 脚本中的文件是否为空

我想在我的 korn 脚本中测试输出 CSV 文件是否为空，如果它不为空，那么它应该给出值的计数。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T07:14:04.873

该[`test(1)`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html)程序有一个`-s`开关：

```
-s FILE
      FILE exists and has a size greater than zero 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-02T10:49:13.513

这只是另一种方式，虽然是一个迂回的方式：

```
if [ `ls -l <file> | awk '{print $5}'` -eq 0 ]
then
//condition for being empty
else
//condition for not being empty
fi 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-10T18:06:27.707

```
if [ ! -f manogna.txt ]
then
    echo "  Error: manogna.txt  does not exist  "
else
    echo " manogna.txt   exist " 
    echo " no of records in manogna.txt are `cat manogna.txt   | wc -l`"
fi 
```

# ios - 屏幕解锁后ios打开应用

> ID：15895575
> 
> 赞同：2
> 
> 时间：2013-04-09T07:12:45.133
> 
> 标签：ios, ipad

我正在为 iOS 开发一个商业应用程序，食堂的客户将使用它来订购各种可用的产品。

每当客户解锁 iPad 时，即使之前的客户打开了不同的应用程序，自定义业务应用程序也应该打开。

所以基本上每次屏幕解锁后都会打开这个商业应用程序，是否有可能完成这项工作以及如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:30:59.617

绝对不是。这是不可能的，另一件事是，如果您这样做，用户会因为一次又一次地看到它而感到恼火。.据我所知，这样做是不可能的，也不是一个更好的主意..从用户的角度思考..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:13:59.280

不，不是。这是默认的 iOS 行为。只有在越狱的 iPad 中，您才能做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:14:38.923

我认为不可能做到，不可能做到那种情况

# android - 仅在特定活动页面之后显示警报对话框

> ID：15895576
> 
> 赞同：0
> 
> 时间：2013-04-09T07:12:46.753
> 
> 标签：android, dialog

我有一个登录页面。当用户正确登录时，我想显示一个警告对话框，说明您的登录详细信息已经过验证。单击继续继续。现在我希望在登录后的下一个活动页面上显示此警告对话框. 这是警报对话框代码-：

SharedPreferences 设置 = getSharedPreferences(PREFS_NAME, 0); boolean dialogShown = settings.getBoolean("dialogShown", false);

```
 if (!dialogShown) {
           AlertDialog.Builder builder = new Builder(Myperwallet.this);
           builder.setTitle("Fast Cashier!");
           builder.setMessage("Logging In");
           builder.setPositiveButton("Continue", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int which) {
                   dialog.cancel();
       //continue activity here....

               }
           });  

           builder.create().show();
             // AlertDialog code here

     }

       SharedPreferences.Editor editor = settings.edit();
       editor.putBoolean("dialogShown", true);
       editor.commit(); 
```

我试过这个，但现在我注销后不会显示警告对话框。我需要知道当我按下注销按钮时如何将标志设置为 true。这是我的注销按钮功能-：

```
 logout.setOnClickListener(new OnClickListener() {   
              public void onClick(View v) {

                AlertDialog alertDialog = new AlertDialog.Builder(Myperwallet.this).create(); 
                alertDialog.setTitle("FastCashier:");
                alertDialog.setMessage("Are you sure you want to exit?");
                alertDialog.setButton( Dialog.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {

                       Intent logout = new Intent(Myperwallet.this,Login.class);
                       startActivity(logout);

                   }
                   });

                alertDialog.setButton( Dialog.BUTTON_NEGATIVE, "NO", new DialogInterface.OnClickListener()    {
                  public void onClick(DialogInterface dialog, int which) {

                      dialog.cancel();

                  }
                  });

                alertDialog.show();  
              }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:28:29.443

实际上无法解决更多问题，但是您想`AlertDialog`在某些情况下显示您的信息，`Optionnale` `Requirement`例如何时`Login`显示，而在下一页中，`Required`但由于`SharedPreferences` 在应用程序启动时仅显示一次。当我注销然后登录时，我没有得到任何`alert dialog`

`SharedPreferences` 要做的是用密钥存储您的特定 Sting，您需要与之匹配。成功后，您需要`Update` `SharedPreferences`使用一些新字符串并需要与之匹配。

您也可以使用`File`检查`isExit()`与否并编写 require Sting 它并阅读它并匹配您需要显示的条件`alert dialog`。这可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:32:00.010

跟踪活动流程，即当您启动应用程序时，它正在执行 onCreate 方法中的操作，为您的问题在 on create 方法中设置标志，并且当您从任何其他活动切换到此活动时，请执行 onCreate 方法重新启动（）并清除您以前的数据....像这样...

```
protected void onRestart() {
    // TODO Auto-generated method stub
    super.onRestart();

    //ur code
} 
```

希望它会有所帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:17:08.183

您需要在当前代码中添加一些实现。
您可以在 sharedPrefs 中保留一个标志，最初它是正确的。在第一次展示它之后，让它成为假的。
这是您现在必须实施的。

因此，当用户注销时，要在注销后再次显示它，将标志重置为 true。因此，当您再次到达活动时，将显示对话框。

# javascript - 在 Chrome 控制台中访问上次记录的值

> ID：15895579
> 
> 赞同：79
> 
> 时间：2013-04-09T07:13:17.920
> 
> 标签：javascript, google-chrome, console.log

当我直接在 Chrome 控制台中评估表达式时

```
1 + 1 
```

然后我可以参考评估值使用

```
$_ 
```

![在此处输入图像描述](https://i.stack.imgur.com/M86fa.png)

但是，当值是来自我的应用程序内部的 console.log 的结果时，我无法使用 $_ 访问该值，而不是我直接在控制台中键入的表达式。

![在此处输入图像描述](https://i.stack.imgur.com/hPFjx.png)

有没有办法访问最后一个评估的表达式，不管它来自哪里？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-01-30T00:48:12.100

将其记录到控制台后，您可以右键单击它并获得一个选项以将其存储为全局对象。单击此按钮将定义一个新变量，如“temp1”，它将指向该变量。[这是它的实际操作视频（不是我的）](https://www.youtube.com/watch?v=qALFiTlVWdg)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-04-13T13:25:23.863

只需按照以下步骤操作：

1.  用右键单击结果
2.  另存为全局变量
3.  复制（temp1）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T07:44:45.487

You can only copy & paste.

See all available commands and shortcuts:

[https://developers.google.com/chrome-developer-tools/docs/commandline-api](https://developers.google.com/chrome-developer-tools/docs/commandline-api) [https://developers.google.com/chrome-developer-tools/docs/shortcuts](https://developers.google.com/chrome-developer-tools/docs/shortcuts)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-26T18:35:08.833

解决方法是在全局命名空间中定义一个变量。大概，你`console.log(local_variable)`在一个函数里面。

```
<script>
  var global_variable = null;

  function some_function() {
    var local_variable = 0;
    global_variable = local_variable;
    console.log(local_variable);
  }
</script> 
```

在这里，当`some_function()`被调用时，您`local_variable`将被记录，但您可以`global_variable`在控制台中键入以快速获取其值并使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-04T16:29:52.443

通过设置断点，您*可以*使用 Chrome 的 DevTools 在执行的任何时候访问任何评估的表达式。

您记录的表达式应该在控制台中有一个可点击的行号 - 点击链接，然后在代码行（应该是您的`console.log`）上设置一个断点。

断点完整指南：
[https ://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints](https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints)

# c# - Booksleeve，在连接关闭后尝试打开连接时抛出错误

> ID：15895584
> 
> 赞同：3
> 
> 时间：2013-04-09T07:13:23.200
> 
> 标签：c#, redis, booksleeve

我无法重新连接到我的 Redis DB 执行以下操作：

*   创建一个新的`RedisConnection`名为“连接”
*   打开连接`connection.Open().Wait();`
*   关闭连接`connection.Close(true);`
*   现在，当我尝试`connection.Open().Wait();`抛出错误时，“连接已关闭”。

我知道连接已关闭，但为什么我无法重新打开它？

如果我不关闭连接，而是关闭 Redis 服务器，让客户端引发`Closed`事件，重新启动服务器，然后尝试`connection.Open().Wait();`再次打开连接，也会发生同样的情况。抛出“连接已关闭”错误。

我的方法有什么问题？我似乎无法使用 Booksleeve 正确管理连接状态。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:43:37.730

打开和关闭 BookSleeve 连接不是预期的用途。

*   因为它是一个多路复用器，所以预计它会被打开一次，然后被多个调用者同时使用（它是线程安全的等）
*   打开涉及各种握手（在网络和协议级别）以确保正确操作 - 最好避免这种情况（这不是非常昂贵，请注意）
*   一旦关闭，任何持续状态都将不可行；如果你真的想关闭它，你也可以使用一个全新的连接

就我个人而言，只有在运行时重新配置系统或连接中断时，我才会关闭它。

# google-maps - 如何在缩小时关闭信息框

> ID：15895586
> 
> 赞同：1
> 
> 时间：2013-04-09T07:13:32.777
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一张带有一些标记和标记簇的地图，它工作正常。我向它们添加了信息框并且它们可以工作，但问题是，当我缩小并且信息框打开时，标记将消失（并被添加到标记簇中）并且框将保留在那里，打开，下面没有标记。

我可以使用在缩放更改时关闭所有信息框的简单解决方案，但我什至无法实现。我遇到的问题是，在我的听众内部，由于某种原因我无法访问我的标记。这是我的代码：

```
var infoList = [];

function initialize() {
    var mapOptions = {
      ...
    };
    var map = new google.maps.Map(document.getElementById("map"),
        mapOptions);
    var imageUrl = 'pin.png';
    var markers = []; 
    var markerImage = new google.maps.MarkerImage(imageUrl, new google.maps.Size(51, 71));

    for (var i = 0; i < data.photos.length; i++) { 
        var dataPhoto = data.photos[i];
        var latLng = new google.maps.LatLng(dataPhoto.latitude, dataPhoto.longitude);
        var marker = new google.maps.Marker({
            position: latLng,
            icon: markerImage,
            title: dataPhoto.photo_title
        });
        boxText = document.createElement("div"),

        infoboxOptions = {
            alignBottom:true,
            content: boxText,
            disableAutoPan: false,
            maxWidth: 0,
            pixelOffset: new google.maps.Size(-60, -70),
            zIndex: null,
            boxStyle: { 
              width: "280px"
             },
            closeBoxMargin: "12px 4px 2px 2px",
            closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
            infoBoxClearance: new google.maps.Size(1, 1),
            isHidden: false,
            pane: "floatPane",
            enableEventPropagation: false
        };

        markers.push(marker);

        markers[i].infobox = new InfoBox(infoboxOptions);

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                markers[i].infobox.open(map, this);
                map.panTo(latLng);
            }
        })(marker, i));

    }

    var markerCluster = new MarkerClusterer(map, markers);

    google.maps.event.addListener(map, 'zoom_changed', function(markers){
        /*Here markers is undefined*/
        if (! markers.length) { return; }
        for (i in markers) {
           markers[i].infoBox.close();
        }

    });
}
    google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:40:45.313

您正在 zoom_changed 侦听器中创建一个新的“标记”变量。从参数列表中删除“标记”：

```
google.maps.event.addListener(map, 'zoom_changed', function(){
    if (! markers.length) { return; }
    for (i in markers) {
       markers[i].infobox.close();
    }
}); 
```

您的代码不一致，您正在创建的标记的属性是：

```
markers[i].infobox = new InfoBox(infoboxOptions); 
```

我更改了上述内容（在调试器中对您来说应该很明显）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:39:15.440

正如您所提到的，如果您想在缩小或放大时关闭地图中的所有信息窗口，那么您可以使用此代码。它会帮助你。

```
google.maps.event.addListener(map, 'zoom_changed', function() {
infoWindow.close();
}); 
```

# mongodb - 在复杂的 mongoDB 数据模型中操作数据

> ID：15895589
> 
> 赞同：0
> 
> 时间：2013-04-09T07:13:53.947
> 
> 标签：mongodb

```
{
name: “Bimal”,
role: “developer”,
reports_to: “girish”,
technology:[{
  name: “PHP”,
  rating: 5
},{
  name: “JavaScript”,
  rating: 4    
}],
project: [{
    project_name: “TGT”,
    client_name: “Said”,
    estimated_time: 20,
    tasks: [{
        start_time: new Date(2013, 2, 13, 7, 47),
        end_time: new Date(2013, 2, 15, 7, 47),
        Description: “design the page”
    }, {
        start_time: new Date(2013, 3, 13, 7, 47),
        end_time: new Date(2013, 2, 13, 7, 47),
        Description: “coding the page”
    }]
}] 
```

}

我有这个复杂的数据库结构。现在我需要在 JavaScript 之后添加一项新技术并对其进行评级。我还需要编辑具有“设计页面”描述的任务描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:21:52.553

要添加新技术，请使用 $push 或 $addToSet。要更新项目部分中的描述，请使用位置运算符 $ 和 $set 。记住子文档中的顺序不是一直保持的。因此，如果您想要技术密钥中的顺序，请再添加一个名为 Order 的密钥，并在每个子文档中使用它。在客户端显示时，您可以订购它。我删除了我的第二个查询。如果您希望在有限制的情况下这样做，其中一种方法是您可以在客户端提取数据，然后更新文档并将其保存回来，但是没有直接命令可以这样做，您必须在客户端循环

```
db.Collection.update({"name" : "Bimal"} , { "technology" : { $addToSet : { name: “New Technology”,rating: 1}}}) 
```

如果可能的话，如果你没问题，你可以像这样重新构建你的文档

```
 {tasks : [{ "ProjectName: "" , startDate : "" , EndDate : "" , Description : "" } ] 
```

我知道它会多次复制数据，但这将是您可以更新任务子文档中的任何字段的一种方式。

# ruby-on-rails - 如何使用 ruby on rails 动态更改网站主题

> ID：15895593
> 
> 赞同：0
> 
> 时间：2013-04-09T07:14:04.487
> 
> 标签：ruby-on-rails, twitter-bootstrap, view, themes, bootswatch

在我的网站中，我想在我的 ruby​​ on rails 应用程序的选定更改上使用下拉菜单动态分配 application.erb.html 中的主题。

我的 application.html.erb 文件如下

```
<%= stylesheet_link_tag "#{current_theme}" %> 
<%= select_tag(:current_theme, options_for_select([['Cerulean'], ['superhero'], 'Amelia'], ['Cosmo']])) %> 
```

我想动态更改我当前的主题我的要求是想在下拉选择更改时分配主题

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:37:42.143

首先，您需要为每个主题创建单独的目录，以便以方便的方式管理它们。接下来，您选择一个默认主题并将其存储在浏览器会话中。当用户更改主题时，您需要在下拉菜单上触发更改事件，更新会话并选择主题。所以在你的`layouts/application.html.haml`你会做这样的事情。

```
<%= stylesheet_link_tag "#{session[:theme]}" %> 
<%= select_tag(:current_theme, options_for_select([['Cerulean'], ['superhero'], 'Amelia'], ['Cosmo']])) %> 
```

# delphi - 超字节 ICS NOFORMS 模式

> ID：15895598
> 
> 赞同：1
> 
> 时间：2013-04-09T07:14:17.957
> 
> 标签：delphi, sockets, console-application, delphi-7, internet-component-suite

我正在尝试在 Delphi 控制台应用程序（服务）中使用 Overbyte ICS TWsocket。我已经设置`NOFORMS`了条件。但是在 Connect 连接没有转到`wsConnected`它挂起的`wsConnecting`状态并且操作以*Async socket error 10053*结束。

我尝试在 a`OnMessagePump`中使用`ProcessMessages()`，`MessageLoop()`但它没有改变任何东西。

这是代码的一部分

```
inherited Create(nil);
Self.OnDataAvailable := MyOnReceive;
Self.OnChangeState := MyOnStateChange;
Self.OnMessagePump := MyMessagePump;
Addr := AIpAddress;
Port := IntToStr(AConnectionInfo.Port);
Proto := AConnectionInfo.Proto;
ComponentOptions := [wsoTcpNoDelay]; 
```

如何在带有 NOFORMS 的控制台应用程序中正确使用 TWsocket？

# matlab - Lapack SPPTRF 可用吗？

> ID：15895602
> 
> 赞同：1
> 
> 时间：2013-04-09T07:14:21.903
> 
> 标签：matlab, lapack, factorization

你知道 MATLAB 是否支持 LAPACK`spptrf`功能。

当你需要计算一个巨大的正定对称矩阵的 Cholesky 分解时，这个函数是相当划算的。

它通过仅给出存储为一维矩阵的上三角矩阵作为输入来允许分解。

或者，`chol`内置函数是否已经在`spptrf`内部使用？

**编辑**

我已经能够在文件交换[http://www.mathworks.com/matlabcentral/fileexchange/16777-lapack](http://www.mathworks.com/matlabcentral/fileexchange/16777-lapack)`lapack`上找到该库，并具有所需的功能实现。`spptrf`

**编辑 2**

每次我调用 MATLAB 在我的机器上运行都会致命地崩溃`spptrf`。

有没有其他方法可以直接处理这个函数？

# ios6 - iCarousel 与 iOS 6.1 中具有标签栏控制器的应用程序集成

> ID：15895605
> 
> 赞同：6
> 
> 时间：2013-04-09T07:14:35.723
> 
> 标签：ios6, uitabbarcontroller, icarousel

我将 iCarousel 应用程序与单视图应用程序集成在一起。但是当我添加标签栏控制器并将此 iCarousel 代码放在一个标签栏项目视图控制器中时。但它不起作用（显示项目但不滚动）。这里有什么问题。

我创建了 iCarousel，如下所示：

```
iCarousel *categorySubView = [[iCarousel alloc]initWithFrame:CGRectMake(0,200, 300, 125)];

    categorySubView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    categorySubView.delegate = self;
    categorySubView.dataSource = self;
    categorySubView.type=iCarouselTypeRotary;
    [self.view addSubview:categorySubView]; 
```

我正在使用以下委托和数据源方法：

```
-(NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{

    return 5;
}
- (UIView *) carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view{
    UIView *sampleView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 250, 300)];
    sampleView.backgroundColor=[UIColor whiteColor];
    UILabel *labelis=[[UILabel alloc]initWithFrame:CGRectMake(10, 10, 100, 20)];
    labelis.backgroundColor=[UIColor clearColor];
    labelis.text=@"8Apr-14Apr";
    [sampleView addsubView:labelis];
return sampleView;
} 
```

请给我建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T08:05:29.027

我注意到您的轮播视图比其中的项目大小要小得多（它只有 125 点高）。

iCarousel 可以在其边界之外绘制，但它无法检测到其边界之外的触摸事件，因此这可能是您无法滚动的原因。

调试它的一个好方法是设置 carousel.clipsToBounds = YES，这样它绘制的内容将匹配可触摸的内容。另一种选择是设置 carousel.backgroundColor 以便您可以在屏幕上看到它的哪一部分是可触摸的。

要检查的另一件事是，您放置轮播的视图已将 userInteractionEnabled 设置为 YES。

# php - 正确使用 mysql 中的索引

> ID：15895606
> 
> 赞同：0
> 
> 时间：2013-04-09T07:14:38.253
> 
> 标签：php, mysql

我想知道如何制作正确的索引表，为了理解这个概念，我将以电影为例：

我有这 5 个包含多个字段的表，但我将在此处仅列出这些表的主索引字段：

```
movies
  movie_id = primary index
actors
  actor_id = primary index
geners
  gener_id = primary index
reviews
  review_id = primary index 
```

然后我有这些表与2列的关系，我不确定什么类型的索引应该有这些关系表：

```
movie_actor
   movie_id,actor_id
movie_gener
   movie_id,gener_id
movie_review
   movie_id,review_id 
```

我已经加入这些字段如果我想获得一部电影的详细信息，我将使用这样的查询：

```
SELECT * 
FROM movies as m
LEFT JOIN movie_actor  AS ma  ON ma.movie_id = m.movie_id
LEFT JOIN actors       AS a   ON a.ator_id   = ma.actor_id
LEFT JOIN movie_gener  AS mg  ON mg.movie_id = m.movie_id
LEFT JOIN geners       AS g   ON g.gener_id  = mg.gener_id
LEFT JOIN movie_review AS mr  ON mr.movie_id = m.movie_id
LEFT JOIN reviews      AS r   ON r.review_id = mr.review_id 
WHERE m.movie_id = 1234 
```

那么我应该在关系表（movie_actor，movie_gener，movie_review）这两个字段上使用哪种索引，主要在哪个字段上或仅在两者上都使用索引？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:21:18.837

~~每个表只能有一个字段作为主键~~您的表只能有 1 个主键（由用户更正）。查看这篇文章以获取信息[MySQL 中 INDEX、PRIMARY、UNIQUE、FULLTEXT 之间的差异？](https://stackoverflow.com/questions/707874/differences-between-index-primary-unique-fulltext-in-mysql)

# javascript - Highcharts：无法获取显示图表的示例

> ID：15895610
> 
> 赞同：0
> 
> 时间：2013-04-09T07:14:45.973
> 
> 标签：javascript, jquery, highcharts

我无法显示以下图表。下面是jQuery。我通过替换 jQuery 尝试了其他示例，它可以工作。我的所有文件都在同一个文件夹中，包括 data.csv。

```
$(document).ready(function () {
    var options = {
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'column'
        },
        < ...more options here... >
    };

    $.get('./data.csv', function (data) {
        // Split the lines
        var lines = data.split('\n');
        $.each(lines, function (lineNo, line) {
            var items = line.split(',');

            // header line containes categories
            if (lineNo == 0) {
                $.each(items, function (itemNo, item) {
                    if (itemNo > 0) options.xAxis.categories.push(item);
                });
            }

            // the rest of the lines contain data with their name in the first position
            else {
                var series = {
                    data: []
                };
                $.each(items, function (itemNo, item) {
                    if (itemNo == 0) {
                        series.name = item;
                    } else {
                        series.data.push(parseFloat(item));
                    }
                });

                options.series.push(series);

            }

        });

        var chart = new Highcharts.Chart(options);
    });
}); 
```

CSV 文件如下所示：

```
Categories,Apples,Pears,Oranges,Bananas
John,8,4,6,5
Jane,3,4,2,3
Joe,86,76,79,77
Janet,3,16,13,15 
```

这是我试图开始工作的例子：

[http://www.highcharts.com/studies/data-from-csv.htm](http://www.highcharts.com/studies/data-from-csv.htm)

**编辑：我刚刚意识到图表显示在 Firefox 上。我一直在使用 Chrome。很奇怪。但是，上面的示例链接适用于两者。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:40:25.373

在 Chrome 中，您不能使用 AJAX 来获取本地文件。如果您想做这样的事情，请使用 XAMPP 或 WAMP 创建本地服务器。Firefox 没有这样的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:14:57.493

我能够将此 Chrome 开关用作临时修复程序以允许使用本地文件：--allow-file-access-from-files

# sqlite - 将数据库存储在隔离存储中时，wp7中的sqlite3方法访问异常

> ID：15895613
> 
> 赞同：0
> 
> 时间：2013-04-09T07:14:53.297
> 
> 标签：sqlite, windows-phone-7

我目前正在使用目标 Os 7.1 在 wp8 Sdk 中为 wp7 和 8 开发数据库应用程序。当我在 Wvga、wxga、720p 模拟器中运行应用程序时，一切正常，但是当我在 7.1 模拟器上运行它时，“系统”类型的未处理异常.MethodAccessException'发生在 Community.CsharpSqlite.WinPhone.dll 异常被抛出在 sqlite.cs 文件中返回代码**(Result)Sqlite3.sqlite3_open_v2(filename, out db, flags, null);** .帮我解决这个问题

供参考看看 ![在此处输入图像描述](https://i.stack.imgur.com/F2zhM.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:01:04.857

不确定这对您是否有用，但我最终通过切换到 csharp-sqlite 解决了这个问题 :)

您还可以查看 sqlite-net 源并删除有问题的调用，但 csharp-sqlite 项目有更多的活动和通常更少的问题。

# java - 使用 REST WebService 停止套接字 - JAVA

> ID：15895614
> 
> 赞同：0
> 
> 时间：2013-04-09T07:14:54.613
> 
> 标签：java, multithreading, sockets, client

我又带着另一个问题回来了，我尝试寻找一个问题/答案，但到目前为止它们都没有奏效，所以我决定再发布一个。我在 Java/Tomcat 中运行了一个小型 REST JAXRS WebService，我希望从 JSP 页面发送命令来启动和停止 Socket 客户端。到目前为止，我实现了启动套接字，但我无法停止它，我做错了什么？

**编辑 1：** 我使用带有两个按钮的 JFrame 接口测试了相同的套接字功能（使用相同的类 PLC），一个连接代表 REST 功能，另一个断开连接，它可以工作

我的休息功能

```
NewTen_PLC m_plc = new NewTen_PLC(0x01, "Central Park", "10.80.4.10", 5001);
Thread m_thread;

@PUT
@Path("/connect")
public void Connect(InputStream is)
{       
    System.out.println("CONNECT COMMAND RECEIVED");
    try
    {
        System.out.println( "Starting Executor" );

        //Using thread manager
        //ExecutorService threadExecutor = Executors.newCachedThreadPool();
        //Start Thread
        //threadExecutor.execute(m_plc);            
        //Shutdown working threads when task is complete
        //threadExecutor.shutdown();

        //Using Thread
        m_thread = new Thread(m_plc);
        m_thread.start();

        System.out.println( "Tasks started, main ends.\n" );
    }
    catch(Exception ex)
    {

    }       
}

@PUT
@Path("/disconnect")
public void Disconnect(InputStream is)
{
    System.out.println("DISCONNECT COMMAND RECEIVED");

    try
    {           
        //m_plc.closeConnection();          
                    m_plc.m_bConnected = false;
    }
    catch(Exception ex)
    {
        System.out.println("Error while trying to close socket");
        ex.printStackTrace();
    }       
} 
```

这是包含 Socket 函数和线程 Run 方法的 PLC 类。

```
//--------------------------------------------------------------------------------------------------------
// Run (Thread)
//--------------------------------------------------------------------------------------------------------
@Override
public void run()
{
    try
    {
        //DEBUG
        System.out.printf("\n Thread Started and Running in %s \n", getPLCName());
        //Connect to remote site
        connectToRemoteServer();
        //Set streams
        getStreams();
        //Process connection
        processConnection();
    }
    catch(EOFException eofException)
    {
        System.out.println( "\nClient terminated connection" );     
    }
    catch(IOException ioException)
    {
        ioException.printStackTrace();      
    }
    finally
    {
        closeConnection(); // close connection      
    }
}   
//--------------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------------
// Connect to Server/Remote Site
//--------------------------------------------------------------------------------------------------------
private void connectToRemoteServer() throws IOException
{
    //DEBUG
    System.out.println("Attempting connection to site");

    //Get IP Address
    InetAddress ipAddress = InetAddress.getByName(this.getIPAddress());
    //Create and Open Socket to server
    m_clientSocket = new Socket(ipAddress, this.getPort(), null, this.getLocalPort());
    //Set connected
    if(m_clientSocket != null)
        m_bConnected = true;
    //Set read timeout to infinite
    m_clientSocket.setSoTimeout(0);

    //DEBUG
    System.out.println("Connected to site");
}
//--------------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------------
// Get in and out Streams
//--------------------------------------------------------------------------------------------------------
private void getStreams() throws IOException
{
    //DEBUG
    System.out.println("Setting Streams");

    //Input data stream
    m_inStream = new DataInputStream(m_clientSocket.getInputStream());
    //Output data stream
    m_outStream = new DataOutputStream(m_clientSocket.getOutputStream());
}
//--------------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------------
// Process connection
//--------------------------------------------------------------------------------------------------------
private void processConnection() throws IOException
{
    NewTen_Buffer inBuffer = new NewTen_Buffer(8192);

    try // read message and display it
    {
        while(m_inStream.read() != -1 && m_bConnected == true)      
        {
            //Read 
            inBuffer.m_iSize = m_inStream.read(inBuffer.m_bBuffer);
            //DEBUG                  
            System.out.printf("Data read has %d bytes \n", inBuffer.m_iSize);

            //Decode
            newData(inBuffer);
        }   
            //DEBUG
        System.out.println("OUT OF READING LOOP");  
    } 
    finally
    {

    }
}
//--------------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------------
// Close Connection
//--------------------------------------------------------------------------------------------------------
public void closeConnection()
{
    System.out.println( "\nClosing connection" );
    try
    {   
        System.out.println( "\nIn Try closing" );
        m_bConnected = false;
        m_clientSocket.close(); // close socket         
        //System.out.println( "\nClosing Data input streams" );
        //m_inStream.close(); // close output stream
        //m_outStream.close(); // close input stream
        //System.out.println( "\nShutdown ip op" );
        //m_clientSocket.shutdownInput();
        //m_clientSocket.shutdownOutput();
        //System.out.println( "\nClosing socket" );
        //m_clientSocket.close(); // close socket
        System.out.println( "\nEnd of Try closing" );
    }
    catch ( IOException ioException )
    {
        ioException.printStackTrace();
    } // end catch      
}
//-------------------------------------------------------------------------------------------------------- 
```

任何建议如何阻止它？

干杯，狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:31:07.157

我还没有完全阅读所有服务器代码，但我猜你的服务器线程阻塞等待来自流的连接/输入，因此你无法停止它。

如果你必须使用 REST，你可以强制终止线程来停止它（我不能保证暗示）。或者其他方法是实现一个套接字协议来停止服务器——而不是使用 REST

# javascript - 如何在 alfresco lucene 搜索中查找标题为“* .pdf”的文档

> ID：15895616
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:00.690
> 
> 标签：javascript, lucene, alfresco

我需要在 JavaScript 中将搜索限制为标题后缀为“.pdf”的文档

现在我添加到 lucene 搜索中：

```
ls += ' +@cm\\:title:"*\\.pdf" ' 
```

它几乎完成了这项工作，但它也返回如下标题：

```
Cloud Strategy - Presentation (PDF) 
```

什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:04:25.160

您是否尝试过简单的：

```
ls += ' +@cm\\:title:".pdf" '; 
```

它在一个测试示例中对我有用。

# c++ - 类型转换问题

> ID：15895619
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:15.660
> 
> 标签：c++, type-conversion

我有一个代码片段如下：

```
class ClassA
{
public:
    virtual ~ ClassA() {};
    virtual void FunctionA() {cout << "ClassA" << endl;}
};
class ClassB
{
public:
    virtual void FunctionB() {};
};
class ClassC : public ClassA, public ClassB
{
public:
    void FunctionA(){cout << "why" << endl;}
    void FunctionB(){cout << "class C funb" << endl;}
};

ClassC aObject;
ClassA* pA = &aObject;
ClassB* pB = &aObject;
ClassC* pC = &aObject;

int main()
{
    void* pvoid = static_cast<void *> (pB);
    ClassA* pA2 = static_cast<ClassA*>(static_cast<ClassC*>(pB));

    return 0;
} 
```

类型转换是否`pvoid`正确`pA2`？还是两者都错了？（我尝试编译它，没有错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:26:23.470

这取决于您所说的“正确”是什么意思，但是这两个定义都是合法的并且具有明确定义的语义。`pvoid`将指向 的`ClassB`子对​​象`aObject`，而`pA2`将指向其`ClassA`子对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:26:37.317

`pvoid`是“正确的”，因为它将`ClassB`子对象的地址`aObject`作为无类型指针提供给您。您可以用它做的唯一有用的事情就是将其转换回`ClassB*`. 请注意，这里的强制转换是多余的，因为任何指针都可以隐式转换为`void*`.

`pA2`被正确初始化为指向 的`ClassA`子对​​象`aObject`。由于这是一个“交叉转换”（即两种类型都不是从另一个派生的，但它们都是某个派生类的基类），您要么需要像您所做的那样通过派生类型进行转换，或者使用`dynamic_cast`如果派生类型在编译时是未知的。

# scala - IntelliJ IDEA 中的中缀方法调用

> ID：15895620
> 
> 赞同：3
> 
> 时间：2013-04-09T07:15:19.610
> 
> 标签：scala, intellij-idea

每当我尝试使用中缀方法调用时，IntelliJ IDEA 都会在方法名称后添加括号。

例如：

```
val xs = List(1,2,3) 
```

如果我键入`xs contai`然后按 Enter，IntelliJ IDEA 将完成此表达式，如下所示：

```
xs contains() 
```

但我希望没有括号：

```
xs contains 
```

是否有禁用为中缀方法调用添加括号的选项？

我使用带有 Scala 插件 0.7.213 的 IntelliJ IDEA 12.1。

[更新]

我要调用的方法是

```
def contains(elem: Any): Boolean 
```

来自[scala.collection.immutable.List](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.List)

完整的表达式是`xs contains 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:04:37.353

没有这样的选项，也没有计划在未来添加它。原因是它不是中缀调用，你想要什么，它是后缀调用，并且在任何后缀调用之后你必须使用分号或额外的换行符。这两件事都很丑陋，这就是为什么在 Scala 2.10 中你会收到关于后缀调用用法的警告。

# java - 何时为 CardLayout 创建面板？

> ID：15895621
> 
> 赞同：1
> 
> 时间：2013-04-09T07:15:20.147
> 
> 标签：java, swing, model-view-controller, jpanel, cardlayout

我将 CardLayout 与 MVC 一起使用，并尝试了解何时应该创建 CardLayout 使用的面板。

例如：

当我在 ListPanel 上选择 DataItem 时，会显示一个用于查看和编辑 DataItem 详细信息的 DetailPanel。我应该在选择 DataItem 时创建并显示 DetailPanel，还是应该在我的应用程序开始时创建 DetailPanel 并在选择 DataItem 时调用加载方法，然后显示 DetailPanel？

目前我正在像堆栈一样使用 CardLayout。我在需要时添加面板，并在完成编辑时将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:23:52.933

尽量避免*更换*视图组件。最初，创建尽可能多的[a](http://www.oracle.com/technetwork/java/architecture-142923.html#separable)`DetailPanel`并*更新*. 用于每个. 创建视图不太可能对性能产生明显影响；[配置文件](https://stackoverflow.com/q/2064427/230513)来查看。如果您发现构建模型会引入显着的延迟，请考虑[此处](https://stackoverflow.com/a/4637725/230513)和[此处](https://codereview.stackexchange.com/q/4446/6692)的说明。`ListSelectionListener``CardLayout``DetailPanel``SwingWorker`

# cocos2d-iphone - cocos2d中单次滑动的多个刀片效果

> ID：15895626
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:34.207
> 
> 标签：cocos2d-iphone

cocos2d中如何实现单次滑动的多种刀片效果？

我已经通过使用**CCblade**类实现了刀片效果，但它适用于单刀片效果。我的要求是，三个刀片效果在单次滑动中它们之间有间隙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:55:00.040

您可以为刀片效果实现一个“容器”类，添加 3 个刀片效果作为其子节点，设置它们的位置以在它们之间形成间隙。滑动时生成此容器，这应该可以解决问题。

# sql-server - 如何使用一个更新语句将以下子查询转换为连接

> ID：15895629
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:35.427
> 
> 标签：sql-server, tsql

以下是我的完整查询，最终目的是更新索赔表。但它应该只有一个没有任何子查询的语句，只允许连接，因为我将在不支持子查询的设备中运行它：

```
DECLARE @DecWdrwn as TABLE(CtryId smallint, CmId int, DecWdrwnDt int);
WITH s AS 
(
    SELECT  
        Ctryid,CmId,Dt,
        ISNULL((
            SELECT  max(CmHistDtTmId) 
            FROM    ClaimHistory l 
            WHERE   St = 3 
                    AND l.Ctryid = c.Ctryid 
                    AND l.CmId = c.CmId)
            , 0) MaxDec, 
        ISNULL((
            SELECT  max(CmHistDtTmId) 
            FROM    ClaimHistory l 
            WHERE   St = 7 
                    AND l.Ctryid = c.Ctryid 
                    AND l.CmId = c.CmId)
            , 0) MaxSet
    FROM 
        ClaimHistory c
    WHERE 
        St =3
)

INSERT  INTO @DecWdrwn
SELECT  CtryId, CmId, Max(Dt) DecDt 
FROM    s
WHERE   MaxSet > MaxDec
GROUP   BY CtryId,CmId 
```

非常感谢您的回复...

```
UPDATE  Claims 
SET     CmDclnWdwnDt = (
            SELECT  DecWdrwnDt 
            FROM    @DecWdrwn d 
            WHERE   d.CmId = Claims.CmId 
                    AND d.CtryId = Claims.CtryId
            )
WHERE   EXISTS (
        SELECT  * 
        FROM    @DecWdrwn d 
        WHERE   d.CmId = Claims.CmId 
                AND d.CtryId = Claims.CtryId
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:21:00.110

请尝试[INNER JOIN 更新](http://www.databasejournal.com/features/mssql/article.php/3630381/MS-SQL-Joins-Part-3.htm)：

```
UPDATE a
SET a.CmDclnWdwnDt = b.DecWdrwnDt
FROM Claims a, @DecWdrwn b
WHERE a.CmId = b.CmId AND
        a.CtryId =b.CtryId 
```

# c# - 定时器间隔调用长方法

> ID：15895630
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:37.537
> 
> 标签：c#, timer

如果下面的代码`Execute()`需要 3000 毫秒才能完成，但由于计时器间隔而每 1000 毫秒被调用一次，会发生什么情况？

```
 Timer _timer = new Timer();        
        private void setupTimer()
        {
            _timer.Tick += new EventHandler(pollingTimeElapsed);
            _timer.Interval = 1000;
            _timer.Enabled = true;
            _timer.Start();
        }

        private void pollingTimeElapsed(object sender, EventArgs e)
        {
            Execute();
        } 
```

编辑：我正在使用 System.Windows.Forms.Timer，因为 System.Timers.Timer 没有 .Tick

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:22:18.343

我假设您正在使用 System.Timers.Timer 类。

由于 AutoReset 具有默认值（即 True），因此每经过 1000 毫秒就会触发 Elapsed 事件。

如果您只想触发一次事件，请将 AutoReset 设置为 False。

如果您不想在执行代码运行时触发事件，请执行以下操作：

```
Timer _timer = new Timer();        
private void setupTimer() {
    _timer.Tick += new EventHandler(pollingTimeElapsed);
    _timer.Interval = 1000;
    _timer.Enabled = true;
    _timer.Start();
}

private void pollingTimeElapsed(object sender, EventArgs e) {
    try {
        _timer.Stop()
        Execute();
    } finally {
        _timer.Start()
    }
} 
```

# c# - 如何使用 c# 从 EWS 获取定期会议的发生次数？

> ID：15895631
> 
> 赞同：1
> 
> 时间：2013-04-09T07:15:37.773
> 
> 标签：c#, exchange-server, exchangewebservices

以下是修改和删除重复会议发生的链接。

[http://msdn.microsoft.com/en-us/library/exchange/dd633618(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633618%28v=exchg.80%29.aspx)

我的问题是我们如何从 ews 获取出现次数，或者有什么方法可以找到它。

```
Appointment occurrence = Appointment.BindToOccurrence(service, new ItemId(sRecurringMasterId), 3); 
```

在上面的代码中，他们将出现次数硬编码为 3，但我如何动态获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:13:38.340

没有直接的方法，我要做的是：

1.  获得作为 RecurringMaster 的任命。
2.  定义重复的开始和结束时间，如果没有结束时间，就像它永远一样，那么我定义我将在其中搜索的天数
3.  根据以前的时间查找预约
4.  根据类型 AppointmentType.Occurrence 过滤结果，并计算你得到了什么

以下代码解释了我上面写的内容。

```
var occurrencesCounter = 0;  
if (appointment.AppointmentType == AppointmentType.RecurringMaster) 
{ 
    appointments = ppointment.Service.FindAppointments(WellKnownFolderName.Calendar, new CalendarView(appointment.Start, (appointment.Recurrence.EndDate == null ? DateTime.Today.AddDays(7) : (DateTime)appointment.Recurrence.EndDate)));
    foreach (var apt in appointments)
    {
        if (apt.AppointmentType == AppointmentType.Occurrence)
        {
            occurrencesCounter++;
        }
    } 
} 
```

# ember.js - Ember 默认模板不显示

> ID：15895637
> 
> 赞同：0
> 
> 时间：2013-04-09T07:15:50.537
> 
> 标签：ember.js

我是emberjs的新手，真的很酷，我在官网上按照这个[指南](http://www.youtube.com/watch?v=Ga99hMi7wfY)`application`，添加一些帖子模型夹具后，默认模板拒绝显示，我不知道问题出在哪里。

这是我的[代码](https://github.com/markson/ember-tutorial-learning)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:44:47.357

*   您指的是，`scripts/app.js`但您拥有的文件是`scripts/main.js`
*   您需要创建一个 Ember.Application，例如：`window.App = Ember.Application.create();`
*   您需要为and[定义路由](http://emberjs.com/guides/routing/defining-your-routes/)，否则 Ember 会为助手抛出错误。`posts``about``{{#linkTo}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:55:20.457

ember 在控制台输出中有错误信息真是太好了，就我而言，它显示

`Error: assertion failed: The route posts was not found`

我忘了添加`/post`路由器，然后我添加了 App.Router.map -> this.resource('about') this.resource('posts')

一切恢复正常！

# vb6 - 使用通信端口在文本框中收到的垃圾数据

> ID：15895639
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:00.287
> 
> 标签：vb6, serial-port, microcontroller, bitrate

连接到通讯端口时，我在文本框中收到垃圾值是因为我的比特率错误，那么我如何识别正确的比特率？我正在使用 VB6 从连接微控制器的通信端口获取数据

在这里，我编写了用于以 19200 的比特率接收数据的代码。我只是想知道如何避免垃圾值，但似乎我的微控制器的比特率是 19200

```
Private Sub Command1_Click()
  If (MSComm1.PortOpen = False) Then  opening port
    MSComm1.PortOpen = True
  End If
  Command1.Enabled = False
  Command2.Enabled = True
End Sub

Private Sub Command2_Click()
  If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
  End If
  Command1.Enabled = True
  Command2.Enabled = False
End Sub

Private Sub Form_Load()
  With MSComm1
    .CommPort = 1            
    .RThreshold = 1
    .RTSEnable = True
    .Settings = "19200,N,8,1"  
    .InputLen = 1000
    .SThreshold = 1  
    .PortOpen = True
  End With
End Sub

Private Sub Form_Unload(Cancel As Integer)
  If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
  End If
End Sub

Private Sub MSComm1_OnComm()
Dim Buffer As String

  Select Case MSComm1.CommEvent    
    Case comEvReceive
      Text1.Text = " "
      Buffer = MSComm1.Input
      Text1.Text = Text1.Text & Buffer
  End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:10:20.090

很简单，您需要知道控制器使用的比特率、停止位和奇偶校验设置。您可以通过循环遍历所有可能的排列来通过反复试验来做到这一点）但是联系控制器软件的供应商并询问他们会更快。

但是我会尝试 9600,8,N,1 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:13:47.577

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Sub Command1_Click()
If (MSComm1.PortOpen = False) Then
MSComm1.PortOpen = True
End If
Command1.Enabled = False
Command2.Enabled = True
End Sub

Private Sub Command2_Click()
If (MSComm1.PortOpen = True) Then
MSComm1.PortOpen = False
End If
Command1.Enabled = True
Command2.Enabled = False
End Sub

Private Sub Command3_Click()
Text1.Text = " "
End Sub

Private Sub Form_Load()

MSComm1.CommPort = 1
  MSComm1.Settings = "9600,N,8,1"
  MSComm1.DTREnable = True
  MSComm1.Handshaking = comRTS
  MSComm1.InBufferSize = 1
  MSComm1.RThreshold = MSComm1.InBufferSize
  MSComm1.RTSEnable = True
  MSComm1.InputLen = 1
  MSComm1.InputMode = comInputModeText
  MSComm1.NullDiscard = True
  MSComm1.OutBufferSize = 0
  MSComm1.SThreshold = MSComm1.OutBufferSize

  MSComm1.PortOpen = True

End Sub

Private Sub Form_Unload(Cancel As Integer)
If (MSComm1.PortOpen = True) Then
MSComm1.PortOpen = False
End If
End Sub

Private Sub MSComm1_OnComm()
Dim Buffer As String

Select Case MSComm1.CommEvent
Case comEvReceive

Text1.Text = " "
Buffer = MSComm1.Input
Text1.Text = Text1.Text & Buffer
End Select
End Sub 
```

# c# - 如何在运行时的画布中在 windows phone 7 中绘制弧线？

> ID：15895641
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:03.133
> 
> 标签：c#, windows-phone-7, silverlight-4.0

挑战是我必须在运行时为 windows phone 7 制作一个画布对象。然后在其上添加一个弧，一个起点和一个终点。我试过这段代码

```
 PathGeometry pathGeometry = new PathGeometry();
    PathFigure figure = new PathFigure();
    figure.StartPoint = new Point(150, 200);
    figure.Segments.Add(
    new ArcSegment(
    new Point(300, 200),
    new Size(700, 100),
    90,
    false,
    SweepDirection.Clockwise,
    true
    )
    );
    pathGeometry.Figures.Add(figure);
    Path path = new Path();
    path.Data = pathGeometry;
    path.Fill = Brushes.Pink;
    path.Stroke = Brushes.Green; 
```

现在我必须在画布上添加这个弧，但它不需要参数。有没有其他方法可以做到这一点。我被它困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T08:04:38.470

好吧，我猜 Arc 是指这种类型的图形，![在此处输入图像描述](https://i.stack.imgur.com/eK6lR.png)

为了绘制这条弧线，我使用了这段代码，它对我来说很好用，也和你的代码很相似，希望它对你有帮助..

```
 PathFigure pthFigure1 = new PathFigure();
    pthFigure1.StartPoint = new Point(50, 60);// starting cordinates of arcs
    ArcSegment arcSeg1 = new ArcSegment();
    arcSeg1.Point = new Point(100, 82);   // ending cordinates of arcs
    arcSeg1.Size = new Size(10, 10);

    arcSeg1.IsLargeArc = false;
    arcSeg1.SweepDirection = SweepDirection.Clockwise;
    arcSeg1.RotationAngle = 90;
    PathSegmentCollection myPathSegmentCollection1 = new PathSegmentCollection();
    myPathSegmentCollection1.Add(arcSeg1);
    pthFigure1.Segments = myPathSegmentCollection1;
    PathFigureCollection pthFigureCollection1 = new PathFigureCollection();
    pthFigureCollection1.Add(pthFigure1);
    PathGeometry pthGeometry1 = new PathGeometry();
    pthGeometry1.Figures = pthFigureCollection1;
    System.Windows.Shapes.Path arcPath1 = new System.Windows.Shapes.Path();
    arcPath1.Data = pthGeometry1;
    arcPath1.Fill = new SolidColorBrush(Color.FromArgb(255, 255, 23, 0));
    this.LayoutRoot.Children.Add(arcPath1); 
```

# c# - MSIL 中的符号 <> 是什么意思？

> ID：15895644
> 
> 赞同：11
> 
> 时间：2013-04-09T07:16:14.850
> 
> 标签：c#, .net, cil

反编译后有这段代码

```
 SampleClass sampleClass;
    SampleClass <>g__initLocal0;
    int y;
    sampleClass = null;
Label_0018:
    try
    {
        <>g__initLocal0 = new SampleClass();
        <>g__initLocal0.X = 5;
        <>g__initLocal0.Y = 10;
        sampleClass = <>g__initLocal0;
        goto Label_003A;
    }
    catch (Exception)
    {
    Label_0035:
        goto Label_003A;
    }
Label_003A:
    y = sampleClass.Y; 
```

在某些操作之前，我不知道运算符/符号 <> 是什么意思。有人知道吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T07:18:24.907

它是编译器生成的名称 - 这些`<>`字符对于 IL 中的标识符是合法的，但在 C# 中则不是。因此，编译器知道它可以生成包含此类字符的名称，而不会使该名称与您在代码中使用的名称发生冲突。

在这种特殊情况下，`<>g__initLocal0`是一个新变量，它被引入来保存正在使用[初始化语法](http://msdn.microsoft.com/en-gb/library/vstudio/bb384062.aspx)初始化的类的新构造实例。原始代码是：

```
sampleClass = new SampleClass() { X = 5, Y = 10}; 
```

引入它是为了避免`sampleClass`在部分构造的实例中被观察到 - 在`new SampleClass()`执行之后但在分配`X`和`Y`发生之前。即，如果`Y = 10`抛出异常，它确保`sampleClass`保留`null`而不是设置为 5 和一些未知值的新`SampleClass`的。`X``Y`

# java - 为什么我的 JButton 不会更新 imageicon？

> ID：15895647
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:18.147
> 
> 标签：java, swing, jbutton, imageicon

目前我正在尝试制作视频扑克。到目前为止，它由 2 个类组成：具有 int 值的卡片、字符套装和布尔检查。卡片是一个 JButton。然后用一堆卡片对象进行甲板。

**VideoPoker 类中的 JButton 在我绘制卡片时**不会更新 ImageIcon ，而且我一生都无法弄清楚为什么。当我想要背景图像时它会更新它，然后当我想要原始图像时它会再次更新，那为什么不换一张新卡呢？

下面是我的代码

```
import javax.swing.*;
import java.awt.event.*;

public class VideoPoker extends JPanel implements ActionListener {

    private Deck deck;
    private Card[] cards;
    private JButton draw;
    private final int MAXCARDS = 5;

    public VideoPoker() {
        deck = new Deck();
        cards = new Card[MAXCARDS];
        for(int i = 0; i < MAXCARDS; i++) {
            cards[i] = deck.Draw();
            cards[i].addActionListener(this);
            add(cards[i]);
            cards[i].setIcon(new ImageIcon
                            ("Cards/" + cards[i].getValue() +
                            cards[i].getSuit() + ".png"));
        }
        draw = new JButton("Draw");
        draw.addActionListener(this);
        add(draw);
    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == draw) {
            int checked = 0;
            for(int i = 0; i < MAXCARDS; i++) {
                if(cards[i].getChecked()) {
                    cards[i] = deck.Draw();
                    cards[i].setIcon(new ImageIcon
                            ("Cards/" + cards[i].getValue() + 
                            cards[i].getSuit() + ".png"));
                    checked++;
                }
            }
        }
        if(e.getSource() instanceof Card) {
            Card source = (Card)e.getSource();
            if(!source.getChecked()) {
                source.setChecked(true);
                source.setIcon(new ImageIcon("Cards/back.png"));
            }
            else {
                source.setChecked(false);
                source.setIcon(new ImageIcon
                        ("Cards/" + source.getValue() +
                        source.getSuit() + ".png"));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:45:37.053

看起来问题是由于未将新绘制的卡片添加到 VideoPoker 面板引起的。处理 draw 事件时，可以替换卡片数组中的项目，但这些卡片/按钮对象尚未添加到面板中：

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource() == draw) {
        int checked = 0;
        for(int i = 0; i < MAXCARDS; i++) {
            if(cards[i].getChecked()) {
                cards[i] = deck.Draw();
                cards[i].setIcon(new ImageIcon
                        ("Cards/" + cards[i].getValue() + 
                        cards[i].getSuit() + ".png"));
                checked++;
            }
        }
    }
    if(e.getSource() instanceof Card) {
        // ...
    }
} 
```

当您在获取新卡之前从面板中移除旧卡并在之后将新卡添加到面板时，卡也会在屏幕上发生变化。

```
 remove(cards[i]);
                cards[i] = deck.Draw();
                add(cards[i]); 
```

还有一些工作要做，因为卡需要添加到正确的位置。

您还可以更改您的设计并使用具有对卡片的引用的 CardButton，而不是使用作为按钮的卡片。这样，您可以拥有五个固定的 CardButton，并让它们引用正确的 Card 对象，从而减少按钮和卡片的紧密耦合。

# jquery - jstree中没有发生ajax请求

> ID：15895650
> 
> 赞同：2
> 
> 时间：2013-04-09T07:16:28.087
> 
> 标签：jquery, jstree

我试图在单击父节点（类别）时获取子节点（在我的情况下为子类别）。但我可以看到在我的情况下没有发生 ajax 请求。我已经使用了这个网站上的解决方案 - ( [http://www.miketyka.com/2012/10/lazy-loading-with-jstree-and-ajax/](http://www.miketyka.com/2012/10/lazy-loading-with-jstree-and-ajax/) )。这是我下面的jstree代码-

```
/**
  * menu tree generation
  */
 $("#menu_tree")
.bind("open_node.jstree", function (e, data) { // this binding will collapse all nodes whenever user expands any single node
    data.rslt.obj.siblings().filter(".jstree-open").each(function () {
    data.inst.close_node(this);
    });
 })
 .jstree({
    "json_data": {
        "ajax": {
            "url": base_url + "draw/get_child"
        }
     },
     "types": { // this will let user to expand or collapse node by clicking on the node title
       "types": {
         "default": {
            "select_node": function (e) {
                this.toggle_node(e);
                return false;
            }
         }
       }
     },
    "core": {
    "html_titles": true,
    "load_open": true
 },
   "plugins": ["themes", "json_data", "html_data", "types", "ui"],
   "themes": {
   "theme": "apple",
   "dots": true,
   "icons": true
  }
}); 
```

html部分如下 -

```
<div class="" id="menu_tree" style="width: 500px;z-index: 1; float: right;position: relative;">
    <ul class="" style="position: absolute;top: 0px;left: 0px;">
    <?php
      if (!empty($parent_categories)) {
          foreach ($parent_categories as $parent_categories) {
    ?>
        <li id="cat<?php echo $parent_categories->objcat_id; ?>">
            <a href="#" class=""><?php echo $parent_categories->category_name; ?></a>
        </li>
    <?php
          }
      }
    ?>
    </ul>
</div> 
```

我试图获取的数据如下 - （我正在使用codeigniter）

```
$this->load->model('object_category_model');
$result = array();
$sub_category = $this->object_category_model->get_subcategories_by_category_id($this->input->post('parent_id'));
echo json_encode($sub_category); 
```

我只是第一次加载父节点，所有子节点都应该通过用户单击父节点来加载。

如果我使用“html_data”而不是“json_data”，那么会发生一个请求，我可以看到一个加载 gif，但是我得到这个错误“Uncaught Error: NotFoundError: DOM Exception 8”，但是如果我使用“json_data”那么什么都不会发生，萤火虫中没有ajax请求。

我不明白我在做什么错...有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:55:04.907

经过4天的尝试，我发现了问题，我做错了。我只是从 php 部分返回格式错误的数据。现在我已经修复了格式并且运行良好，我也忘了使用“jstree-closed”类。正确的格式（我现在使用的格式）如下 -

```
 $sub_category = $this->object_category_model->get_subcategories_by_category_id($_GET['id']);

      if ($sub_category != FALSE) {
           foreach ($sub_category as $sub_category) {

                $result = '<li class="jstree-closed cat" id="' . $sub_category->objcat_id . '"><a href="#">' . $sub_category->category_name . '</a></li>';

                echo $result;
           }
      } 
```

而且我使用的是 html_data 而不是 json_data。

```
"html_data" : { //generating child nodes of selected parent node dynamically using ajax
                "ajax" : {
                     "url" : base_url + "draw/get_child",
                     "data" : function (n) {
                          return {
                               id : n.attr ? n.attr("id") : 0
                          };
                     }
                }
           } 
```

感谢大家试图帮助我。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:12:16.633

尝试改变

“json_data”：{“ajax”：{“url”：函数（节点）{

到

“json_data”：{“ajax”：{ **缓存：假，** “url”：函数（节点）{

# php - FusionCharts PHP 与 Ajax

> ID：15895651
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:30.120
> 
> 标签：php, ajax, fusioncharts

我目前正在使用 FusionCharts Free 来填充一些图表。

在 main.php 中：

```
<html>
<head>
    <script language="JavaScript" src="FusionCharts/FusionCharts.js" ></script>

    <script language="JavaScript">
        function ajax(divID)
        {
            if (window.XMLHttpRequest)
                xmlhttp=new XMLHttpRequest();
            else
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    document.getElementById(divID).innerHTML=xmlhttp.responseText;
            }

            return xmlhttp;
        }

        function detailedChart(couID)
        {
            xmlhttp = ajax("detailedDiv");
            xmlhttp.open("GET", "getDetailedResult.php?couID=" + couID, true);
            xmlhttp.send(null); 
        }       
    </script>
</head>

<body>
    <?php
        $strDataURL = "GetResult.php";
        echo renderChart("FusionCharts/FCF_Column3D.swf", $strDataURL, "", "Chart1", 600, 300);
    ?>

    <div id="detailedDiv" align="center"></div>

</body>
</html> 
```

在 GetResult.php 中：

```
if ($result)    
    $chart -> addDataFromDatabase($result, "TOTAL", "NAME", "", "JavaScript:detailedChart('##ID##')"); 
```

在 GetDetailedResult.php 中

```
<?php
    $chart -> newFusionCharts("Column3D", "900", "500");
    $chart -> setSWFPath("FusionCharts/");
    $chart -> setChartParams("caption=....");
    $chart -> addDataFromDatabase($result, "TOTAL", "NAME");
    $chart -> renderChart();
?> 
```

现在的问题是我想使用 ajax 创建从 GetResult 到 GetDetailedResult 的向下钻取，但它会显示“图表”。而不是图表。如果我改变

> $chart -> 渲染图表（）；到 $chart -> renderChart(true);

它会告诉我 bgcolor=""。

为什么会发生这种情况，我该如何解决？还有其他更简单的方法可以通过 ajax 填充详细图表吗？

百万谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:34:04.710

`HTML`如果您进行调查`DIV`，您将看到`SCRIPT`您`DIV`的`responseText`.

现在，当您将 设置`responseText`为`innerHTML`HTML 元素的 时，HTML DOM 解析器会添加并显示 HTML 部分（带有文本的 DIV `chart`）。但是，它不执行该`SCRIPT`部分（即用于在`DIV`替换`chart`文本中呈现图表。

实现渲染的理想方法是执行`SCRIPT`.

如果您使用`jQuery` [ajax](http://api.jquery.com/jQuery.ajax/)函数，这将得到很好的管理，类似于：

```
 function detailedChart(couID) {
        jQuery.ajax({
           url: "getDetailedResult.php?couID=" + couID,
           success: function(responseText) {
              jQuery("#detailedDiv").html(responseText);
           }
      });

    } 
```

注意：您需要在 HTML 的头部加载 jquery js 文件。

# java - 数组比较字符串

> ID：15895653
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:43.370
> 
> 标签：java, arrays, compare

嗨，我想弄清楚为什么我的代码没有做我想做的事情。当我运行代码时，它总是在 for 循环中执行 if 语句。我改变了逻辑，但它总是一直在执行 for 循环。我不知道为什么。谢谢您的帮助

```
 for (int col =0; col< s ; col++){
        System.out.print(col+ ": ");
        for (int row = 0; row<s; row++)
        {
            x=val[row][col];
            if (table[row][col]==row)
            {
                System.out.print(x+1);
            }
            //System.out.print(val[col][row]+" ");
            if (row+1==s)
                System.out.println();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:18:10.967

如果语句末尾有一个分号，请将其删除。

```
 if (x==2); 
```

# ruby-on-rails - 方法的 RoR 命名约定？

> ID：15895654
> 
> 赞同：1
> 
> 时间：2013-04-09T07:16:48.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, methods, naming-conventions

我注意到大多数动作都有相同的名称，这样更好吗？有这些名字的清单吗？

例如在控制器中你会看到：

```
def new
end

def create
end

def destroy
end

etc... 
```

这些特定的操作在 Ruby on Rails 中是否有意义？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:20:58.773

这些是支持 RESTful 的七个默认操作。这些是`one-to-one`CRUD 的映射。您可以添加自己的操作方法。

更多信息：[Rails 路由](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:36:16.097

这些是 CURD 操作的七个操作：索引、新建、创建、显示、编辑、更新和销毁。有时您需要所有这些，有时则不需要。如果您没有在任何控制器中使用所有这些，那么您应该删除额外的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T07:51:23.407

**Rails 约定优于配置的规则在这里适用：**

这些操作对于 restful 路由映射也很有用，因为许多网站都在其中包含基本的 crud 操作，因此 rails 使开发人员可以轻松地遵循约定并自行摆脱映射路由。

它还取决于您的需求、您是否想要它们的天气，或者您可能需要这些 CRUD 方法的不同名称，在这种情况下，您必须为每个操作手动指定路线。在这种情况下，您没有遵循约定，因为引入了自己的 crud 函数并增加了代码大小。希望现在对你来说听起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:29:26.803

动作名称与其视图名称相关联。Show action为show view提供，edit action为edit view提供。命名约定允许 Rails 连接您的视图、模型、控制器 (MVC)。您可以拥有自定义操作名称，但最好遵循 rails CRUD。你甚至不需要所有的动作，有时你可能只需要创建和销毁......或其他什么。例如，您不希望将“new”重命名为您认为更好的名称……rails 将使用该操作并寻找名为“new”的操作。

# 从导轨指南

```
Active Record supplies a great deal of functionality to your Rails models for free,
including basic database CRUD (Create, Read, Update, Destroy) operations .... 
```

# php - php：如何使用 jquery ajax 验证文本框

> ID：15895658
> 
> 赞同：0
> 
> 时间：2013-04-09T07:16:56.990
> 
> 标签：php, javascript, jquery, ajax

我有一个文本框，一旦用户从该文本框中聚焦，我想使用 jquery-ajax 对其进行验证。

验证包括：

*   服务器端，值转到 php 页面，我必须验证它

*   如果验证成功，则显示警报（“成功”）；否则如果错误警报（“失败”）；

我怀疑 jquery ajax 将如何显示 alert("failure"); 到现在为止，我所做的只是为了成功。

我只知道下面提到的代码，我应该怎么做才能解决我的问题？请帮忙

```
<script type="text/javascript">
    $(function()
    {
        $('input[id^="datepicker"]').on('focusout',function()
        { 
             $.ajax({
                url: "ajax_frmdate_validation.php?txtval="+$(this).val(),
                success: function(data){
                    alert('Successfully  ...');
                }
            });

        });
    });
</script>

--------------
--------------
<input class="plain" name="frmdate"   value="" size="25" id="datepicker" /> 
```

我的服务器端php代码是：

```
$txtval =$_REQUEST['txtval'];
$fromTimestamp = strtotime( $txtval); 
//---------My Logic Code Goes Here -----------------------------
$sid=$_SESSION['id'];
$result12=mysql_query("SELECT * FROM budget where creater_id = '$sid'");
$num_rows = mysql_num_rows($result12);

if($num_rows>0)//check if empty or not
{
    while($test12 = mysql_fetch_array($result12)) {
        $from_date = strtotime($test12['from_date']);//getting all the FROM-Dates_column
        $to_date = strtotime($test12['to_date']);//getting all the TO-Dates_column

        if(isset($to_date) && isset($from_date)) {
            if((($fromTimestamp >= $from_date) && ($fromTimestamp <= $to_date)) || (($toTimestamp >= $from_date) && ($toTimestamp <= $to_date))) {
                $val = 'Y'; //return Y in meet this condition
            }
            else {
                $val = 'N'; // return N if meet this condition
            }
        }
        //---------------------Result of my logic code---------------------------------
        if($val == 'Y') //Returns TRUE
        {
            //VALIDATION FAILS - Returns Validation Error
            break;
        }
        else  if($val == 'N') {
            //VALIDATION TRUE - Returns Validation Error
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:23:16.110

改变

```
if($val == 'Y') //Returns TRUE
{
    //VALIDATION FAILS - Returns Validation Error
    break;
}
else  if($val == 'N') {
    //VALIDATION TRUE - Returns Validation Error
} 
```

进入

```
echo $val; 
```

然后在您的 js 中简单地获取响应并发出警报消息：

```
success: function(data){
    if (data == 'Y') {
        alert('Successfully  ...');
    } else {
        alert('Oh no...');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:22:04.360

它易于使用

```
 if($val == 'Y') //Returns TRUE
            {
                echo 'success';
            }
            else  if($val == 'N') {
                echo 'fail';
            }exit; 
```

您将在回拨的`data`参数中获得此成功/失败。`success`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:22:32.907

您的 php 代码将是

```
if($val == 'Y') //Returns TRUE
            {
              echo "Success";   
             //VALIDATION FAILS - Returns Validation Error
                break;
            }
            else  if($val == 'N') {
              echo "Fail";   
                //VALIDATION TRUE - Returns Validation Error
            } 
```

在 JS 中

```
$.ajax({
                           url: "ajax_frmdate_validation.php?txtval="+$(this).val(),
                           success: function(data){
                                      if(data == "Success")
                                        alert("success");
                                      if(data == "Fail")
                                        alert("Fail");

                           }
                         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:23:14.177

除非您将 HTTP 响应设置为错误代码，否则 ajax 不会回调失败：函数。

一种简单的方法是，即使验证失败或验证成功，也从服务器端发回 JSON 字符串，如下面的格式所示。

如果验证成功

```
 {'status':'OK','message':'Validation success'} 
```

如果验证失败

```
{'status':'NOK','message':'Please enter your name'} 
```

现在您可以在成功回调中获取此 JSON 字符串并采取适当的措施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:23:18.033

您可以使用 ajax`type`和`data`选项来发送数据，而不是通过 url 传递数据。

```
 $.ajax({
           url: "ajax_frmdate_validation.php",
           type:'GET',
           data:{"txtval":$(this).val()},
           success: function(data){
                 if(data=="success"){
                   alert('successful');
                 }else{
                    alert('error');
                 }
            }
         }); 
```

你的服务器端代码包括这个

```
 if($val == 'Y') //Returns TRUE
        {
           echo "success"
            break;
        }
        else  if($val == 'N') {
             echo "error";
             break;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T07:23:22.830

你可以这样做：

```
$txtval = mysql_real_escape_string($_REQUEST['txtval']);
$fromTimestamp = strtotime( $txtval); 
 //---------My Logic Code Goes Here -----------------------------
 $sid=$_SESSION['id'];
 $result12=mysql_query("SELECT * FROM budget where creater_id = '$sid'");
 $num_rows = mysql_num_rows($result12);

 if($num_rows>0)//check if empty or not
 {
    while($test12 = mysql_fetch_array($result12)) {
    $from_date = strtotime($test12['from_date']);//getting all the FROM-Dates_column
    $to_date = strtotime($test12['to_date']);//getting all the TO-Dates_column

    if(isset($to_date) && isset($from_date)) {
         if((($fromTimestamp >= $from_date) && ($fromTimestamp <= $to_date)) || (($toTimestamp >= $from_date) && ($toTimestamp <= $to_date))) {
             $val = 'Y'; //return Y in meet this condition
         }
         else {
            $val = 'N'; // return N if meet this condition
         }
     }
     //---------------------Result of my logic code---------------------------------
     if($val == 'Y') //Returns TRUE
     {
        echo "failed";
        exit();
     }
     else  if($val == 'N') 
     {
        echo "success";
        exit();
     } 
```

现在在您的 ajax 调用中：

```
<script type="text/javascript">
    $(function()
    {
       $('input[id^="datepicker"]').on('focusout',function()
       { 
         $.ajax({
            url: "ajax_frmdate_validation.php?txtval="+$(this).val(),
            success: function(data){
               if (data == 'success') {
                    alert("Successfully validated"); 
               } else {
                    alert("Failed");
                    return false;
               }
            }
        });

      });
   });
</script> 
```

与警告相比，更好的方法是在文本框下方显示错误消息，如果失败则附加消息。

在进行检查之前也要进行适当的转义`mysql_real_escape_string`

**更新**：

每当输入文本字段中的日期更改时，您都需要调用 ajax，因此`focusout`您可以使用`onSelect`from来代替`datepicker`。So when a new date is selected an ajax call will be initiated.

`focusout`因此，您可以调用`onSelect`datepicker ，而不是调用较早的 ajax

```
$(function(){
    $('#datepicker').datepicker({
        onSelect:function(date,instance){
           $.ajax({
              url: "ajax_frmdate_validation.php?txtval="+date,
              success: function(data){
                 if (data == 'success') {
                    alert("Successfully validated"); 
                 } else {
                    alert("Failed");
                    return false;
                 }
              }
           });
        }
    });
}); 
```

**新更新**

试试这个：

```
 <script type="text/javascript">
     $(document).ready(function() { 
       $("#datepicker").datepicker({ 
          dateFormat: "yy-mm-dd" ,
          onSelect:function(date,instance){
                          $.ajax({
                            url: "ajax_frmdate_validation.php?txtval="+date,
                            success: function(data){
                            if (data == 'success') {
                                 alert("Successfully validated"); 
                            } else {
                                 alert("Failed");
                                  return false;
                            }
                     }
                 });
            }
     }); 
  }); 
 </script> 
```

# c# - 将 XML 文件转换为字符串类型

> ID：15895670
> 
> 赞同：22
> 
> 时间：2013-04-09T07:17:23.550
> 
> 标签：c#, xml

我们如何将 XML 文件写入字符串变量？这是我的代码，变量内容应该返回一个 XML 字符串：

```
 public string GetValues2()
    {
        string content = "";
        XmlTextWriter textWriter = new XmlTextWriter(content, null);
        textWriter.WriteStartElement("Student");
        textWriter.WriteStartElement("r", "RECORD", "urn:record");
        textWriter.WriteStartElement("Name", "");
        textWriter.WriteString("Student");
        textWriter.WriteEndElement();
        textWriter.Close();

        return contents;

    } 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-09T07:18:45.517

像这样的东西

```
string xmlString =  System.IO.File.ReadAllText(fileName); 
```

这是创建`XmlDocument` [XDocument 或 XMLDocument的好答案](https://stackoverflow.com/questions/1542073/xdocument-or-xmldocument)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:23:28.270

嗨Pedram你可以试试下面的代码

```
XmlDocument doc = new XmlDocument();

doc.LoadXml("yourXMLPath");
StringWriter sw = new StringWriter();
XmlTextWriter tx = new XmlTextWriter(sw);
doc.WriteTo(tx);
sw.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T07:34:05.533

试试这个-

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(your text string);

StringBuilder sb = new StringBuilder();
foreach (XmlNode node in doc.DocumentElement.ChildNodes)
{
    sb.Append(char.ToUpper(node.Name[0]));
    sb.Append(node.Name.Substring(1));
    sb.Append(' ');
    sb.AppendLine(node.InnerText);
}
return sb; 
```

也看看这个-

```
 StringWriter sw = new StringWriter();
    XmlTextWriter tx = new XmlTextWriter(sw);
    myxml.WriteTo(tx);

    string str = sw.ToString();// 
    return str; 
```

如果你真的想创建一个新的 XmlDocument 然后这样做

```
XmlDocument newxmlDoc= myxml 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-10T14:06:05.427

你可以试试：

```
static string GetXmlString(string strFile)
{
    // Load the xml file into XmlDocument object.
    XmlDocument xmlDoc = new XmlDocument();
    try
    {
        xmlDoc.Load(strFile);
    }
    catch (XmlException e)
    {
        Console.WriteLine(e.Message);
    }
    // Now create StringWriter object to get data from xml document.
    StringWriter sw = new StringWriter();
    XmlTextWriter xw = new XmlTextWriter(sw);
    xmlDoc.WriteTo(xw);
    return sw.ToString();
} 
```

或者只是使用 XmlDocument.InnerXml 属性来获取 XML 字符串。

```
XmlDocument doc = new XmlDocument();
doc.Load("path to your file");
string xmlcontents = doc.InnerXml; 
```

# sql - 减去两行的值并将其插入新列（不是后续行）

> ID：15895676
> 
> 赞同：1
> 
> 时间：2013-04-09T07:17:37.467
> 
> 标签：sql, sql-server-2008, tsql

与我之前的问题相关：[如何插入每两个后续行的减法并将其插入新列](https://stackoverflow.com/questions/15853354/how-to-insert-subtract-of-each-two-subsequent-rows-and-inserting-it-into-a-new-c/15854174?noredirect=1#comment22590607_15854174)

我有另一个问题。在下表中；我想计算每个用户最后一次赢得比赛所经过的时间。事实上，我应该从当前日期中减去最后一个中奖日期。(place=1) 表示获胜。

当前表：

[http://www.8pic.ir/images/75206897877200828586.jpg](http://www.8pic.ir/images/75206897877200828586.jpg)

我想要的结果：

[http://www.8pic.ir/images/78832309907063712878.jpg](http://www.8pic.ir/images/78832309907063712878.jpg)

我为这个问题写了以下查询（根据我在[这里](https://stackoverflow.com/questions/15853354/how-to-insert-subtract-of-each-two-subsequent-rows-and-inserting-it-into-a-new-c/15854174?noredirect=1#comment22590607_15854174)的上一个问题得到的答案）！但问题是我得到了很多重复的行！我只有 4000 行，但是当我运行这个查询时，我得到了 40,000 行！问题是什么！你能帮帮我吗？而且我对以前没有赢过的用户也有负值。我希望这些字段为 NULL。

```
;WITH [cte15853354] AS
 (
    SELECT 
        [user-name],
        [submissions],
        [date],
        [place],
        [recency],
        ROW_NUMBER() OVER (ORDER BY [user-name], [date] DESC) AS [ROWNUMBER]
    FROM dbo.[top-design1]
 )
SELECT 
    t.[user-name],
    t.[submissions],
    t.[date],
    t.[place],
    t.[recency],
    DATEDIFF(DAY, ISNULL(k.[date],t.[date]),t.[date]) AS [win-recency]
INTO dbo.[top-design2]
FROM [cte15853354] t
LEFT JOIN [cte15853354] k
    ON k.[user-name] = t.[user-name] 
     where k.[place]=1 
    ORDER BY t.[user-name], t.[date] DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:33:41.707

你去了（实际上不需要案例测试）：

```
SELECT [user-name], 
       submissions,
       [date],
       place,
       recency,
       DATEDIFF(DAY, 
       (SELECT TOP(1) [date]
        FROM [top-design1] td1
        WHERE td1.[user-name] = [top-design1].[user-name]
        AND place = 1
        AND [date] < [top-design1].[date]
        ORDER BY [date] DESC), [date]) as recencywin
FROM [top-design1] 
```

我想您可以自己管理以将其用于插入目的。

# java - 运行 ant 文件时构建失败

> ID：15895679
> 
> 赞同：1
> 
> 时间：2013-04-09T07:17:57.387
> 
> 标签：java, ant, build, myeclipse, apache-torque

我正在尝试运行 ant `build.xml`，但发生了一些错误

```
Buildfile: D:\Projects\OBSWorkspace\schoolforms\torque\build.xml
main:

BUILD FAILED
D:\Projects\OBSWorkspace\schoolforms\torque\build.xml:19: 
   The following error occurred while executing this line:
   D:\Projects\OBSWorkspace\schoolforms\torque\build-torque.xml:52:     
   D:\Projects\OBSWorkspace\schoolforms\torque\${torque.home}\lib not found. 
```

在这个项目中`${torque.home}`没有找到表明哪个目录

```
 Assume torque.home is specified through -D option
  in ant invocation 
```

-D 指定了什么，如何找到`${torque.home}`值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:26:43.293

以这种方式使用它`ant build -Dtorque.home="value for torque.home"`。使用`-D`参数，您可以直接从命令行传递属性来构建。如果您从命令行传递值来构建，即使您通过了`invokeAll=false`.

我认为这[是](http://ant.1045680.n5.nabble.com/passing-paramter-to-eclipse-arguments-td4539212.html)如何将参数从 eclipse 传递给 ant ( `Eclipse->myproject->right click on build.xml->Arguments->VM Arguments -DappRoot=ECM -DappName=ESW -Dapp.module=FNT -Dapp.env=LOC -DcloneNumber=1`)的答案

# c# - 在 Azure 缓存中存储大于 8MB 的对象的技术

> ID：15895685
> 
> 赞同：1
> 
> 时间：2013-04-09T07:18:18.047
> 
> 标签：c#, performance, azure, azure-blob-storage, azure-caching

是否有人对如何在 Azure 缓存中存储大于 8MB 的对象有任何建议。在我的情况下，我使用 byte[] 将文件存储在 blob 中。但是，如果我能以某种方式将 byte[] 拆分为更小的块并将其存储为部分文件，然后在从缓存中检索文件后执行合并。

伪代码：

存储

```
bs <- split file into byte[] that are smaller than 8MB
s <- string[bs.Length]
foreach bs with index i
    s[i] <- name of bs[i]
    Add bs[i] to Azure cache using s[i] as key

Add s to cache 
```

检索：

```
s <- Get list of byte[] names
bs <- byte[s.Length]
foreach s with index i
   bs[i] <- Get byte[] using s[i]

outBs <- Join bs to one byte[] 
```

*   这里有任何性能问题吗？

*   是否有任何其他方式胜过 Azure 缓存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T20:42:35.730

经过几个小时的工作，我发现可以将大文件拆分为较小的文件并将其存储到 Azure 缓存中。我想和你分享代码。

用于拆分和连接的类 byte[]

```
 public class CacheHelper
    {
        private const int kMaxFileSize = 8000000;
        private readonly int fFileSize;
        private readonly string fFileName;
        public CacheHelper(int sizeOfFile, string nameOfFile)
        {
            fFileSize = sizeOfFile;
            fFileName = nameOfFile;
        }

        public CachingObjectHolder Split(byte[] file)
        {
            var remainingSize = file.Length;
            var partialList = new List<byte[]>();
            var partial = new byte[file.Length > kMaxFileSize ? kMaxFileSize : file.Length];
            for (int i = 0; i < file.Length; i++)
            {
                if (i % kMaxFileSize == 0 && i > 0)
                {
                    partialList.Add(partial);
                    partial = new byte[remainingSize > kMaxFileSize ? kMaxFileSize : remainingSize];
                }

                partial[i % kMaxFileSize] = file[i];
                remainingSize--;
            }

            partialList.Add(partial);

            return new CachingObjectHolder(fFileName, partialList);
        }

        public static byte[] Join(CachingObjectHolder cachingObjectHolder)
        {
            var totalByteSize = cachingObjectHolder.Partials.Sum(x => x.Length);
            var output = new byte[totalByteSize];
            var globalCounter = 0;
            for (int i = 0; i < cachingObjectHolder.Partials.Count; i++)
            {
                for (int j = 0; j < cachingObjectHolder.Partials[i].Length; j++)
                {
                    output[globalCounter] = cachingObjectHolder.Partials[i][j];
                    globalCounter++;
                }
            }

            return output;
        }

        public static byte[] CreateFile(int size)
        {
            var tempFile = Path.GetTempFileName();
            using (var stream = new FileStream(tempFile, FileMode.OpenOrCreate))
            {
                using (var memStream = new MemoryStream())
                {
                    stream.SetLength(size);
                    stream.CopyTo(memStream);
                    return memStream.ToArray();
                }
            }
        }
    } 
```

这是与 Azure 缓存通信的代码

```
 public class Cache
    {
        private const string kFileListName = "FileList";

        public static DataCacheFactory DataCacheFactory
        {
            get
            {
                return new DataCacheFactory();
            }
        }

        private static DataCache fDataCache;
        public static DataCache DataCache
        {
            get
            {
                if(fDataCache == null)
                {
                    fDataCache = DataCacheFactory.GetDefaultCache();
                }

                return fDataCache;
            }
        }

        public static byte[] Get(string name)
        {
            var dic = GetFileList();
            if (dic == null)
            {
                return (byte[])DataCache.Get(name);
            }
            if (dic.ContainsKey(name))
            {
                var list = dic[name];
                var input = new List<byte[]>();
                var cache = DataCache;
                list = list.OrderBy(x => x.Item2).ToList();
                for (int i = 0; i < list.Count; i++)
                {
                    input.Add(cache.Get(list[i].Item1) as byte[]);
                }

                var holder = new CachingObjectHolder(name, input);
                return CacheHelper.Join(holder);
            }
            else
            {
                return (byte[])DataCache.Get(name);
            }
        }

        public static void Put(string name, byte[] file)
        {
            if (file.Length > CacheHelper.kMaxFileSize)
            {
                var helper = new CacheHelper(file.Length, name);
                var output = helper.Split(file);
                var dic = GetFileList();
                if (dic == null)
                {
                    dic = new Dictionary<string, List<Tuple<string, int>>>();
                }

                var partials = new List<Tuple<string, int>>();
                for (int i = 0; i < output.CachingObjects.Count; i++)
                {
                    DataCache.Add(output.CachingObjects[i].Name, output.Partials[output.CachingObjects[i].Index]);
                    partials.Add(new Tuple<string, int>(output.CachingObjects[i].Name, 
                                               output.CachingObjects[i].Index));   
                }

                dic.Add(name, partials.OrderBy(x => x.Item2).ToList());
                PutFileList(dic);
            }
            else
            {
                DataCache.Add(name, file);
            }
        }

        public static void Remove(string name)
        {
            var dic = GetFileList();
            if (dic == null)
            {
                DataCache.Remove(name);
                return;
            }

            if (dic.ContainsKey(name))
            {
                var list = dic[name];
                for (int i = 0; i < list.Count; i++)
                {
                    DataCache.Remove(list[i].Item1);
                }

                dic.Remove(name);
                PutFileList(dic);
            }
            else
            {
                DataCache.Remove(name);
            }
        }

        private static void PutFileList(Dictionary<string, List<Tuple<string, int>>> input)
        {
            DataCache.Put(kFileListName, input);
        }

        private static Dictionary<string, List<Tuple<string, int>>> GetFileList()
        {
            return DataCache.Get(kFileListName) as Dictionary<string, List<Tuple<string, int>>>;
        }
    } 
```

Aaa 和两个用于数据持有者的类

```
 public class CachingObjectHolder
    {
        public readonly List<byte[]> Partials;
        public readonly List<CachingObject> CachingObjects;
        public readonly string CacheName;

        public CachingObjectHolder(string name, List<byte[]> partialList)
        {
            Partials = partialList;
            CacheName = name;
            CachingObjects = new List<CachingObject>();
            CreateCachingObjects();
        }

        private void CreateCachingObjects()
        {
            for (int i = 0; i < Partials.Count; i++)
            {
                CachingObjects.Add(new CachingObject(string.Format("{0}_{1}", CacheName, i), i));
            }
        }
    }

    public class CachingObject
    {
        public int Index { get; set; }
        public string Name { get; set; }

        public CachingObject(string name, int index)
        {
            Index = index;
            Name = name;
        }
    } 
```

以下是在云上测试解决方案的结果。R/W 时间以 ms 为单位。 ![现场测试结果](https://i.stack.imgur.com/Spsq8.png)

# php - Zend Framework 2 - ZFCUser - 如何从身份验证中排除登录页面

> ID：15895686
> 
> 赞同：1
> 
> 时间：2013-04-09T07:18:18.863
> 
> 标签：php, authorization, zend-framework2, zfcuser, bjyauthorize

我正在与and`ZF2`结合使用。我有一个应该可以全局访问的登录页面。所有其他页面都需要登录。`ZFCUser``bjyauthorize`

起初，我[责怪](https://stackoverflow.com/q/15380963/1331671) `bjyauthorize`不让来宾用户访问我的登录页面。但经过一些讨论后，这似乎`ZFCUser`阻碍了前进的方向。

我的问题是：如何告诉 ZFCUser 不要阻止一个页面/操作？

**编辑：**

我在[这篇文章](https://stackoverflow.com/a/14138160/1331671)`Application/Module.php`中的样子。当我将我的应用程序添加到白名单时，我可以访问我的登录页面，但也可以访问所有其他操作。`myApp``myApp`

任何想法如何改变我可以匹配 URL 或只是将我的前端操作列入白名单的条件？

也许我可以在我的登陆页面添加第二条路线。但这不是一个干净的解决方案，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:56:41.043

如果您坚持在 onBoostrap 方法中检查身份验证，您可以执行以下操作：

```
class Module
{
    protected $whitelist = array(
        'zfcuser/login' => array('login'),
        'your-landing-route' => array('your-landing-action'),
    );

    public function onBootstrap($e)
    {
        $app = $e->getApplication();
        $em  = $app->getEventManager();
        $sm  = $app->getServiceManager();

        $list = $this->whitelist;
        $auth = $sm->get('zfcuser_auth_service');

        $em->attach(MvcEvent::EVENT_ROUTE, function($e) use ($list, $auth) {
            $match = $e->getRouteMatch();

            // No route match, this is a 404
            if (!$match instanceof RouteMatch) {
                return;
            }

            // Route and action is whitelisted
            $routeName = $match->getMatchedRouteName();
            $action = $match->getParam("action");

            if(array_key_exists($routeName,$list) && in_array($action,$list[$routeName])) {
                return;
            }

            // User is authenticated
            if ($auth->hasIdentity()) {
                return;
            }

            // Redirect to the user login page, as an example
            $router   = $e->getRouter();
            $url      = $router->assemble(array(), array(
                'name' => 'zfcuser/login'
            ));

            $response = $e->getResponse();
            $response->getHeaders()->addHeaderLine('Location', $url);
            $response->setStatusCode(302);

            return $response;
        }, -100);
    }
} 
```

我只是稍微更改了代码，但您的白名单还包含特定操作。然后我们可以检查操作参数，使其与您的白名单更加具体。

我不知道这是否是最好的方法，我只是向您展示如何做到这一点。

我认为您甚至不需要在使用时检查身份验证，`BjyAuthorize`因为您可以使用资源检查。如果用户具有来宾角色以外的任何内容，则他们是真实用户并经过身份验证。同样，我不是 100% 的，但我知道我没有`ZfcUser`在我的应用程序中使用身份验证检查，它使用`BjyAuthorize`. 我只是使用路由守卫来指定特定路由所需的角色级别。

也许其他人可以澄清这一点？

# asp.net - 如何访问与下拉列表项关联的值？

> ID：15895688
> 
> 赞同：0
> 
> 时间：2013-04-09T07:18:19.840
> 
> 标签：asp.net, drop-down-menu

这是我的下拉列表代码............

```
<td valign="top" align="center">
   <asp:DropDownList ID="StudentNameDropDownList" runat="server" Width="150px" 
       DataSourceID="SqlDataSource2" DataTextField="StudentName" 
       DataValueField="StudentName" AutoPostBack="True">
   </asp:DropDownList>
   <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
       ConnectionString="<%$ ConnectionStrings:dbbilling2.0ConnectionString3 %>" 

       SelectCommand="SELECT [StudentID], [StudentName] FROM [tblStudentInfo] WHERE ([Class] = @Class)">
       <SelectParameters>
           <asp:ControlParameter ControlID="ClassDropDownList" Name="Class" 
               PropertyName="SelectedValue" Type="String" />
       </SelectParameters>
   </asp:SqlDataSource>
   <br /> 
```

现在我想访问我的代码隐藏文件中的学生 ID 字段。我怎样才能做到这一点？我必须使用什么语法[如 dropdownlist.selecteditem] ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:28:30.277

首先在您的 DropDownList asp 组件中，您必须设置属性 DataValueField="StudentID"，然后在您后面的代码中，您可以通过以下方式获取所选学生的 Id：StudentNameDropDownList.SelectedValue

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:30:41.400

对于 Id 你可以试试这个代码

```
StudentNameDropDownList.SelectedValue 
```

# string - 支持追加、前置和搜索操作的字符串数据结构

> ID：15895689
> 
> 赞同：0
> 
> 时间：2013-04-09T07:18:21.567
> 
> 标签：string, algorithm, data-structures, pattern-matching, string-search

我需要构建一个文本编辑器作为我的迷你项目，并且我需要设计一个支持以下操作的数据结构或算法：

*   **Append**：在字符串末尾追加一个字符。
*   **Prepend**：在字符串的开头添加一个字符。
*   **Search**：给定一个搜索字符串 s，找到该字符串的所有出现。

每个操作在 O(log n) 时间或更短的时间内完成。搜索和替换操作将是可观的，但不是必需的。字符串的最大长度是恒定的。任何想法如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:37:13.717

这种应用程序的常见数据结构是[Rope](http://en.wikipedia.org/wiki/Rope_%28data_structure%29)，其中 Append 和 Prepend 是 O(1)，尽管这在一定程度上取决于树是否平衡。然而，正如Толя所指出的，搜索将是线性的。

当然有一些数据结构可以使搜索更快，例如[Suffix Tree](http://en.wikipedia.org/wiki/Suffix_tree)，但它们可能不适合文本编辑器应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:42:19.403

我建议你改编一个[Trie](http://en.wikipedia.org/wiki/Trie)。在追加操作中，添加以新字符结尾的字符串的所有后缀，长度不超过数据结构中字符串的最大长度。在前面添加字符串的所有前缀，从新字符开始，长度不超过字符串的固定长度。渐近地，这两个操作都是常数——它们取`O(k^2)`其中 k 是字符串的固定长度。对于结构中的每个节点，跟踪以该节点结尾的所有字符串（可能是列表）。

搜索操作将再次保持不变：遍历字符串并输出存储在结束节点中的所有索引（如果您没有“删除树”）。

我的方法的一个缺点是内存开销（大多数时候是单词的最大长度），但是如果允许的最大字符串长度是合理的并且您只插入真实的单词（例如来自英语词典），这应该不是很大问题。

# javascript - 使用 javascript 创建 csv 文件

> ID：15895691
> 
> 赞同：-4
> 
> 时间：2013-04-09T07:18:25.647
> 
> 标签：javascript, ios, html, ipad

有人能解释一下有没有办法将 html5 本地存储数据转换为 csv 文件并将其存储在 ipad 中。

我有一个带有一些文本字段的 html 页面。当用户单击提交按钮时，它存储在 html5 本地存储中。然后我需要使用该数据创建一个 csv 文件并将其本地存储在 ipad 应用程序中。

说说我的需求吧。1) 从 html 页面获取文本字段数据并将其保存到我的本地存储 2) 从本地存储获取数据并写入 csv 文件并将其保存在 ipad 中 3) 将该文件附加到我的应用程序的电子邮件中它自己，所以我需要文件路径和文件名才能将其作为附件发送。4）我写了一个发送数据的目标 c 函数 5）我从 javascript 调用目标函数

这些事情是在使用 html5 和 javascript 的 ipad 应用程序中完成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:19:46.653

要使用 JavaScript 将文件写入系统，您需要使用 HTML5 File Writer API（[我可以使用 HTML5/JS 编写文件吗？](https://stackoverflow.com/questions/4309958/can-i-write-files-with-html5-js)）。

# json - org.json lib 中的 JSONObject：utf-8 编码问题

> ID：15895709
> 
> 赞同：2
> 
> 时间：2013-04-09T07:19:31.880
> 
> 标签：json, encoding, utf-8, org.json

我正在关注[Unicode - 如何正确输入字符？](http://balusc.blogspot.it/2009/05/unicode-how-to-get-characters-right.html)邮政。

我唯一的问题是 JSONObject 编码（我正在使用`org.json`lib）。

例如，当我将类似的字符串放入`àòùèì€€`JSONObject 时，就会出现问题。

```
System.out.println(entry.getValue());
JSONObject temp = new JSONObject();
temp.put("values", entry.getValue();
System.out.println(temp.toString()); 
```

我得到`àòùèì€€`and`{"values":"àòùèì\u20ac\u20ac"}`而不是`{"values":"àòùèì€€"}`.

**编辑**

通过从哈希表传递到 jsonObject，使用了扩展的 utf-8 编码。例如，哈希表

```
 {€èòàùì€ù=èòàù€ì, €òàèùì€=èòàù€ìç§$} 
```

成为 JSONObject

```
 {"\u20acòàèùì\u20ac":"èòàù\u20acìç§$","\u20acèòàùì\u20acù":"èòàù\u20acì"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:48:55.047

它们完全相等，Unicode 转义占用了更多空间。就像`\u004a`用 Java 写东西和写东西完全一样`a`。如果正确性是您关心的问题，那没关系。

除非您的大部分文本在 0x2000 - 0x20FF 之间，否则它也不会占用大量额外空间：

[以下代码](https://github.com/douglascrockford/JSON-java/blob/master/JSONObject.java#L1250)转义了 C0 和 C1 控制字符，但也转义了 0x2000 - 0x20FF：

```
 if (c < ' ' || (c >= '\u0080' && c < '\u00a0')
                    || (c >= '\u2000' && c < '\u2100')) { 
```

因此 0x2000 - 0x20FF 和控制字符之间的任何字符都表示为 unicode 转义。这对于控制字符是有意义的，因为在 JSON 中不允许以未转义的形式出现这些字符。

至于0x2000 - 0x20FF，我不知道，因为代码没有注释。在该范围内未转义的每个字符都是有效的 JSON。[当然，`0x2028`并且`0x2029`在 Javascript 中无效](http://www.ecma-international.org/ecma-262/5.1/#sec-7.3)（因此这个小细节使 JSON 语法不是 Javascript 语法的子集），因此最好在 JSON 中转义这些语法，以防它被用作 JSONP，它确实是 Javascript。但我不清楚为什么代码会转义整个范围，因为该范围内只有 2 个字符是非法的。

# java - Java Generic Type Inference 奇怪的行为？

> ID：15895711
> 
> 赞同：2
> 
> 时间：2013-04-09T07:19:37.660
> 
> 标签：java, generics, types, type-inference, type-erasure

有人可以向我解释这种行为：

**注意：在 SomeThingGeneric 中从未使用过 T**

```
 public static class SomeThingGeneric<T> {
        public List<String> getSomeList() {
            return null;
        }
    }

final SomeThingGeneric<Object> someThingGenericObject = new SomeThingGeneric<Object>();
final SomeThingGeneric<?> someThingGenericWildcard    = new SomeThingGeneric<Object>();
final SomeThingGeneric someThingGenericRaw            = new SomeThingGeneric<Object>();

for (final String s : someThingGenericObject.getSomeList()) { }   // 1 - compiles
for (final String s : someThingGenericWildcard.getSomeList()) { } // 2 - compiles
for (final String s : someThingGenericRaw.getSomeList()) { }      // 3 - does not compile! 
```

(1) 和 (2) 编译但 (3) 失败并显示以下消息：

```
incompatible types
found   : java.lang.Object
required: java.lang.String 
```

如果有人想要完整的代码，[这里是](https://github.com/pathikrit/scalgos/blob/50e34ea94b5d2ab76e818536492d597629a02113/temp/SandBox/Something.java). 我已经在 J​​ava 5 和 6 中验证了这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:49:27.047

好吧，尽管投反对票，但这是一个有趣的问题。我相信问题的答案在于[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)的这一部分：

> 未从其超类或超接口继承的原始类型 C的构造函数（第 8.8 节）、**实例方法**（第 8.4 节、第 9.4 节）或非静态字段（第 8.3 节）的类型是对应的原始类型在对应于 C 的泛型声明中擦除其类型。

实际上，在您通过原始类型访问它的情况下，您的方法`public List<String> getSomeList`会获得有效的签名。`public List getSomeList`因此，结果列表的列表迭代器然后“返回”对象而不是字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:26:46.123

代码可以分解为以下 SSCCE：

```
public static class SomeThingGeneric<T> {
    public List<String> getSomeList() {
        return null;
    }
}

public static void main(final String[] args) {
    final SomeThingGeneric someThingGenericRaw = new SomeThingGeneric<Object>();
    for (final String s : someThingGenericRaw.getSomeList()) { }        //  SAD compiler.  WTF?
} 
```

这会导致编译器错误`Type mismatch: cannot convert from element type Object to String`。

问题是：为什么会出现这个错误？`T`没有在 中的任何地方使用`SomeThingGeneric`，尤其是在`getSomeList()`方法的签名中。所以，当我们调用 时`getSomeList()`，我们应该得到一个`List<String>`. 然而，我们显然得到了一个原始`List`类型。

* * *

原因是类型擦除。从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)：

> 类型擦除还将构造函数或**方法的签名（第 8.4.2 节）映射到****没有参数化类型或类型变量**的签名。

 **而且，[a 的定义`raw type`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)说：

> 为了方便与非通用遗留代码的接口，可以使用**参数化类型**（§4.5）的擦除（§4.6）或元素类型为参数化类型的数组类型（§10.1）的擦除作为类型. **这种类型称为原始类型**。

因此，当使用*原始类型*时，它是应用了类型擦除的*泛型类型。*应用类型擦除时，所有方法签名都映射到没有类型参数或类型变量的类型。因此，`List<String> getSomeList()`示例中的方法会`List getSomeList()`导致显示的编译器错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T00:50:24.683

答：当您将泛型类型实例化为原始类型时，它的所有类型实例都将被删除，原始类型无处不在（即使它们与类型参数无关，例如 Q 中的 T）。即原始类型是 100%“无泛型”。

原因：与前通用代码的向后兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T23:52:46.333

因为我的意见是一个错误。因为它必须起作用。该方法的签名不使用泛型 T 类型。所以它必须编译。

将整个类标记为擦除，不要编译定义非常好的泛型方法，不好。

请报告。**

# javascript - 上传成功没有响应内容时，如何避免fine uploader的error事件？

> ID：15895714
> 
> 赞同：4
> 
> 时间：2013-04-09T07:19:47.670
> 
> 标签：javascript, amazon-s3, fine-uploader

我已将 FineUploader 配置为使用 CORS 并使用我的 Amazon Web Services S3 存储桶。

我面临的问题是，成功上传不会返回任何响应内容（虽然状态码为 204，但响应内容为空）。因此，即使发生了上传（我已验证文件已上传），也会触发错误事件。大概是因为没有回应。

我该如何处理这种情况？有没有办法通过在“onError”回调中捕获此错误来手动触发“成功”？

**编辑：**

我在这里挖掘取得了一些进展。该错误似乎源于`handler.xhr.js`.

特别是在`parseResponse(xhr)`函数内部。

```
try{
   response = qq.parseJson(xhr.responseText);
}
catch(error) {
   log('Error when attempting to parse xhr response text (' + error + ')', 'error');
   response = {};
} 
```

由于响应为空，这似乎引发了错误。

有谁知道正确的反应应该是什么？我正在考虑在此处添加一行检查空响应，然后手动插入正确的响应应该是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:30:42.430

`parseResponse()`毕竟问题出在功能上。它期望成功的上传在成功上传后返回 JSON 字符串`{"success": true}`。

在我的例子中，亚马逊返回一个带有 204 状态码的空响应。204 状态码[意味着不需要响应](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

我已经通过修改我的编辑中提到的部分来解决这个问题，如下所示：

```
try {
            if(xhr.status == 204 && xhr.responseText.length == 0){
                response = qq.parseJson('{"success": true}');
            }
            else{
                response = qq.parseJson(xhr.responseText);
            }
} 
```

希望这将帮助其他将来遇到此问题的人。

# data-binding - 带绑定的 knockout.js

> ID：15895717
> 
> 赞同：0
> 
> 时间：2013-04-09T07:19:58.397
> 
> 标签：data-binding, knockout.js

这可能是一个非常基本的问题，但在下面的视图模型中，我从 ajax 调用中填充 self.userData。我想在 UI 中显示此信息，我认为“with”绑定是可行的方法。但是，由于 self.userData 是空的，直到调用 ajax 函数，我从 with 绑定中得到一个错误

HTML

```
<div data-bind="with: userData">
    <div data-bind="text: userId"></div>
     ...
</div> 
```

模型

```
var viewModel = function () {
        var self = this;
        self.userData = {};
        self.login =  function(data) {
            var postData = { ..trimmed out.. };
            $.ajax({
                type: "POST",
                url: "myService",
                data: postData
            }).done(function (data, status) {
                self.userData = ko.mapping.fromJS(data, userData);
                console.log(self.userData);

            }).fail(function (data, status) {
                alert('Could Not Login');
            });
        }

    };
    ko.applyBindings(new viewModel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:24:37.240

用一个空的 observable 初始化 userData，然后在调用返回时用映射插件创建的对象设置它。即改变

```
self.userData = {}; 
```

和

```
self.userDara = ko.observable(); 
```

和改变

```
self.userData = ko.mapping.fromJS(data, userData); 
```

和

```
self.userData(ko.mapping.fromJS(data,userData)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:37:08.803

您需要首先将 userData 初始化为空的 observable（来自 ajax 调用的单个对象）或 observable 数组（多个对象）：

```
self.userData = ko.observableArray([]); 
```

或者

```
self.userData = ko.observable(); 
```

# jquery - 在数据表插件问题中通过 fnServerData 搜索

> ID：15895718
> 
> 赞同：0
> 
> 时间：2013-04-09T07:20:00.180
> 
> 标签：jquery, datatable

我想将数据传递到服务器页面进行搜索，我在服务器文件上回显/打印查询，如果我提供多个参数，它不会连接 where。它只显示最后提供的参数 where。这是我的代码

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
                            /* Add some extra data to the sender */
                            aoData.push( 
                             { "name": "type", "value": $('#type_dummy').val() },
                             { "name": "category_id", "value": $('#category_id').val() },
                             { "name": "region_id", "value": $('#region_id').val() }

                            );

                            $.getJSON( sSource, aoData, function (json) { 
                                /* Do whatever additional processing you want on the callback, then tell DataTables */
                                fnCallback(json)

                } );
            } 
```

在服务器端处理文件我有这个

```
$sWhere = "";
if ( $_GET['sSearch'] != "" )
{
    $sWhere = "WHERE (";
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
    }
    $sWhere = substr_replace( $sWhere, "", -3 );
    $sWhere .= ')';
}

/* Individual column filtering */
for ( $i=0 ; $i<count($aColumns) ; $i++ )
{
    if ( $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
    {
        if ( $sWhere == "" )
        {
            $sWhere = "WHERE ";
        }
        else
        {
            $sWhere .= " AND ";
        }
        $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
    }
}

 if(isset($_GET['type'])  && $_GET['type'] != '' ){
$sWhere = "WHERE rent.type = '$_GET[type]' ";
 }
  if(isset($_GET['category_id'])  && $_GET['category_id'] != '' ){
$sWhere = "WHERE rent.category_id = '$_GET[category_id]' ";
 } 
```

我直接在 url 中运行这个服务器端文件，并在 url 和打印查询中传递两个参数，它只显示一个参数，就像我的链接一样

```
/view_match_lead_server.php?type=1&category_id=1 
```

查询的位置是这样的（其他查询没问题）

```
WHERE category_id=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T17:29:27.267

如果此问题仍然有效：

三个步骤/问题：

我刚刚解决了同样的问题。在您使用带有三个参数的“fnServerData()”的地方，我只使用带有一个参数的 fnServerParams() - aoData。我在 aoData.push 中的三个附加参数与您的类似。

其次，我使用 Firebug 来确保我在 URL 中发送我的附加参数，以便 $_GET 正确获取。必须清除浏览器中的历史记录，以确保这不会干扰您的更改。

最后，我有一个综合类函数，它执行服务器 PHP 位，因此很难（但并非不可能）将其用作服务器脚本的解决方案。如果此问题仍然存在且未解决，我将对您的 PHP 脚本进行更详细的分析。

# sql-server - 如何将数据库（Microsoft SQL server 2012）与 Mathematica 连接？

> ID：15895721
> 
> 赞同：0
> 
> 时间：2013-04-09T07:20:16.927
> 
> 标签：sql-server, wolfram-mathematica

我安装了 Microsoft SQL Server 2012 并创建了新数据库、一些新表并在该表中插入了一些值。

我想从 Mathematica 访问该数据。我阅读了有关`OpenSqlConnection[]`但`JDBC[]`没有得到它的文档。我没有在我的系统中创建任何驱动程序。

我在我的系统中安装了数据库，我想用 Mathematica 连接数据库。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:49:00.347

这是我的建议：

1.  引入 DatabaseLink 包：

需要["DatabaseLink`"];

1.  打开与数据库的连接：

conn = OpenSQLConnection[JDBC["Microsoft SQL Server(jTDS)", "/"], "用户名" -> "", "密码" -> ""];

1.  开始使用数据库。这是对表“名称”的示例查询

bundleOfNames = SQLSelect[conn, {"Names"}]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T06:37:27.017

```
Needs["DatabaseLink`"]

//SQL Security
conn = OpenSQLConnection[
  JDBC["Microsoft SQL Server(jTDS)", "serverName:1433/"], 
  "Username" -> "domain\username", "Password" -> "1234", 
  "Catalog" -> "MathematicaTestDB", "instance" -> "I2"]  

//Windows Integrated
conn = OpenSQLConnection[
  JDBC["Microsoft SQL Server(jTDS)", "serverName:1433/"],      
  "Catalog" -> "MathematicaTestDB", "instance" -> "Instance2"]    
  d1 =  SQLExecute[conn, "SELECT * FROM DUMMYDATA"] 
```

对于 Windows Integrated，您需要[下载 jTDS dist](http://sourceforge.net/projects/jtds/files/jtds/1.3.0/jtds-1.3.0-dist.zip/download)，提取 ntlmauth.dll 文件。jTDS 必须能够加载本机 SPPI 库 (ntlmauth.dll)。将此 DLL 放在系统路径中的任何位置（由 PATH 系统变量定义），一切就绪。

# c++ - 识别 USB 转 RS422 连接器所连接的 COM 端口名称的逻辑（适用于 Windows 应用程序）

> ID：15895723
> 
> 赞同：0
> 
> 时间：2013-04-09T07:20:23.623
> 
> 标签：c++, windows, serial-port, initialization, usbserial

我有一个应用程序，我通过 USB 到 RS422 转换器将数据写入串行端口。此转换器电缆通过 USB 集线器连接到我的 PC。我面临的问题是，每次更改运行应用程序的 PC 时，COM 端口的名称都会更改。所以我将不得不在我的代码中更改它并重新编译代码以运行应用程序。目前以下是我用来初始化串口的代码：

```
if ((comport = CreateFile("\\\\.\\COM7", GENERIC_WRITE, 0, 
        NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL)) == INVALID_HANDLE_VALUE)
    {
        return false;
    } 
```

这里我只提到 COM 端口的名称。我想知道是否有一个 API 可以知道 COM 端口的状态并即时识别我的转换器所连接的 COM 端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:27:11.143

[在 Windows 上检测所有可用串行端口的正确方法是什么？](https://stackoverflow.com/questions/2674048/what-is-proper-way-to-detect-all-available-serial-ports-on-windows) 这个问题至少可以帮到你一点。因此，正如第二个答案所暗示的那样，使用 API 可能是不可能的。串行端口不是即插即用的。

因此可以列出所有端口。我想到的唯一可能的方法是轮询列表中的每个设备。等到你得到你所期待的回应。这不是很好。

编辑：如果这是你想要的，也许可以获得友好的名称。 [如何在 Windows 中获取 COM 端口的友好名称？](https://stackoverflow.com/questions/304986/how-do-i-get-the-friendly-name-of-a-com-port-in-windows?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:45:40.800

而是更改应用程序中的 COM 端口，您可以从以下位置设置电缆的 COM 端口

**设备管理器 -> 端口 -> 右键单击​​您的电缆名称 -> 属性 -> 端口设置 -> 高级 -> Com 端口号（您可以根据应用选择端口号）**

无需更改应用程序中的任何内容。

# mysql - 联合两个 SQL 查询

> ID：15895725
> 
> 赞同：2
> 
> 时间：2013-04-09T07:20:25.497
> 
> 标签：mysql, sql, join, union

我有这样的查询

```
SELECT o.product_id,
       p.name,
       count(o.product_id) AS total_products_sold,
       (SELECT count(o.id)
        FROM ebay.`order` o) AS total_orders
FROM ebay.`order` o
INNER JOIN product p ON o.product_id = p.id
GROUP BY o.product_id 
```

对我不想要的每个执行时，都会重新运行 total_orders。一世

问题：

我希望 total_orders 与外部查询的每个结果集相结合。

我试过了，但它只返回 1 行

```
SELECT tps.product_id,
       tps.name,
       tps.total_products_sold,
       count(oo.id) AS total_orders
FROM ebay.`order` oo
INNER JOIN
  ( SELECT o.id,
           o.product_id,
           p.name,
           count(o.product_id) AS total_products_sold
   FROM ebay.`order` o
   INNER JOIN product p ON o.product_id = p.id
   GROUP BY o.product_id ) AS tps ON oo.product_id = tps.product_id 
```

有更好的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:54:09.713

您可以使用`with rollup`which 将在不更改实际查询的情况下为您提供总计它不会在每一行的列中为您提供结果，但您将在最后一行中获得总订单的结果。

```
SELECT 
  o.product_id,
  p.name,
  count(distinct o.id) AS totalorder
FROM 
  ebay.`order` o
INNER JOIN 
  product p 
ON 
  o.product_id = p.id
GROUP BY 
  o.product_id
WITH ROLLUP 
```

例如

```
+-----------+------+------------+
| product_id| name | totalorder |
+-----------+------+------------+
|      2000 |   A  |     10     |
|      2001 |   B  |     20     |
|      NULL | NULL |     30     |   <--- Last row is having the Total order 
+-----------+------+------------+ 
```

## **[带汇总](http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:48:07.210

```
SELECT  tps.product_id,
        tps.name,
        tps.total_products_sold,
        s.total_orders
FROM    ebay.`order` oo
        INNER JOIN
        ( 
            SELECT  o.id,
                    o.product_id,
                    p.name,
                    count(o.product_id) AS total_products_sold
            FROM    ebay.`order` o
                    INNER JOIN product p 
                        ON o.product_id = p.id
            GROUP   BY o.product_id 
        ) AS tps ON oo.product_id = tps.product_id
        CROSS JOIN
        (
            SELECT  count(id) total_orders
            FROM    ebay.`order`
        ) s 
```

# php - 如果字段为空 JQUERY

> ID：15895729
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:20:37.640
> 
> 标签：php, jquery, if-statement, show

我用 HTML 和 PHP 编写了一个简单的页面。所以，在 PHP 之前，我想用 Jquery 检查空字段，但我还没有学习 Jquery，所以如果有人帮助我，我将不胜感激。

```
<?php
if(isset($_POST[add]))
{
if(empty($_POST[name]) || empty($_POST[surname])) {echo 'All form fields are required';}
}
?>
<form action="" method=post>
<table border=0  cellspacing=10 cellpadding=5>
        <tr>
            <td>Name:</td>
            <td><input type="text" name="name" size="10" value=""></td>
        </tr>
        <tr>
            <td>Surname:</td>
            <td><input type="text" name="surname" size="10" value=""></td>
        </tr>
        <tr>
            <td colspan=2><input type="submit" name="add" value="Add"></td>
        </tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:23:47.267

在提交时添加一个 javascript 函数让我们说 validate() 并在其中添加这个 jquery 代码

```
function validate() {
    var name = $("#name").val();
    if (name == "") {
        alert('Name is required');
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:33:50.347

您可以通过添加 jquery 来添加验证。

```
 $('input[name="add"]').click(function() { 

          if($('input[name="name"]').val() == '' || $('input[name="surname"]').val() == '') {
             $('.error').html('');

              if($('input[name="name"]').val() == '') {           
               $('.error').append('<p>Please enter your name</p>');                
              }

              if ($('input[name="surname"]').val() == '') {
                  $('.error').append('<p>Please enter your surname</p>');
              }

              $('.error').show();

              return false;

          }

          return true;

      }) 
```

html代码

```
 <div class="error" style="display:none"></div>
<form action="" method=post>
<table border=0  cellspacing=10 cellpadding=5>
        <tr>
            <td>Name:</td>
            <td><input type="text" name="name" size="10" value=""></td>
        </tr>
        <tr>
            <td>Surname:</td>
            <td><input type="text" name="surname" size="10" value=""</td>
        </tr>
        <tr>
            <td colspan=2><input type="submit" name="add" value="Add"></td>
        </tr>
</table>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:26:13.967

```
<input class="field-name" type="text" name="name" size="10" value=""> 
```

我在这个输入字段中添加了一个类，所以我可以使用 jquery 选择器

```
var name = $('.field-name').val();
if(name="") {
    console.log('name is empty');
    //your code here to do something when the field is empty
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:28:53.083

下面的代码可以给你一些想法。我建议阅读关于 jquery 的教程

[http://www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)

```
 <html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<script>
$(document).ready(function(){
    $("#add").submit(function(){
        if ($('#name').length == ""){
            alert("ERROR in name!");
        }   
    }); 
}); 
</script>
<form action="" method=post>
<table border=0  cellspacing=10 cellpadding=5>
        <tr>
            <td>Name:</td>
            <td><input type="text" name="name" id="name" size="10" value=""></td>
        </tr>
        <tr>
            <td>Surname:</td>
            <td><input type="text" name="surname" id="surname" size="10" value=""</td>
        </tr>
        <tr>
            <td colspan=2><input type="submit" name="add"  id="add" value="Add"></td>
        </tr>
</table>
</form>
</html> 
```

# c# - 如何设置需要的动态文本框

> ID：15895733
> 
> 赞同：0
> 
> 时间：2013-04-09T07:20:56.370
> 
> 标签：c#, asp.net

我是动态创建的文本框。所以它必须由用户字段。所以我想添加类似“RequiredFieldValidator”的东西。但我不知道如何动态添加。如果不填充这些动态文本框，用户将无法进入下一步。那么我该如何控制呢？

这是我的代码

```
 for (int i = count; i < no; i++)
                {
                    Label lb = new Label();
                    lb.ID = "lbFname" + NumberOfControls;
                    lb.Text = "First Name :";
                    TextBox tbx = new TextBox();
                    tbx.ID = "Fname" + NumberOfControls;
                    AdultsListPlaceholder.Controls.Add(lb);
                    AdultsListPlaceholder.Controls.Add(tbx);

                    NumberOfControls++;
                    AdultsListPlaceholder.Controls.Add(new LiteralControl("<br />"));
                    AdultsListPlaceholder.Controls.Add(new LiteralControl("<br />"));
                } 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:42:59.127

试试这样的..

```
RequiredFieldValidator req = new RequiredFieldValidator();
req.ID = "Req" + NumberOfControls;;
req.ControlToValidate = "Fname" + NumberOfControls;;
req.ErrorMessage = "Name Required";
reqfldVal.SetFocusOnError = true;
AdultsListPlaceholder.Controls.Add(req); 
```

# objective-c - NSURL baseURL 返回 nil。获取实际基本 URL 的任何其他方式

> ID：15895734
> 
> 赞同：12
> 
> 时间：2013-04-09T07:20:58.347
> 
> 标签：objective-c, nsurl

我想我不明白“baseURL”的概念。这个：

```
NSLog(@"BASE URL: %@ %@", [NSURL URLWithString:@"http://www.google.es"], [[NSURL URLWithString:@"http://www.google.es"] baseURL]); 
```

打印这个：

```
BASE URL: http://www.google.es (null) 
```

当然，在[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)中，我读到了这个：

> 返回值 接收者的基本 URL。如果接收者是绝对 URL，则返回 nil。

我想从这个示例 URL 中获取：

[https://www.google.es/search?q=uiviewcontroller&aq=f&oq=uiviewcontroller&sourceid=chrome&ie=UTF-8](https://www.google.es/search?q=uiviewcontroller&aq=f&oq=uiviewcontroller&sourceid=chrome&ie=UTF-8)

此基础网址

[https://www.google.es](https://www.google.es)

我的问题很简单。有没有更简洁的方法可以在不连接方案和主机名的情况下获取实际的基本 URL？我的意思是，那么基本 URL 的目的是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T09:14:25.367

`-baseURL`是一个纯粹的概念，`NSURL/CFURL`而不是一般的 URL。如果你这样做：

```
[NSURL URLWithString:@"search?q=uiviewcontroller"
       relativeToURL:[NSURL URLWithString:@"https://www.google.es/"]]; 
```

那么`baseURL`将是`https://www.google.es/`。简而言之，仅当使用显式传入基本 URL 的方法创建`baseURL`时才会填充。`NSURL`此功能的主要目的是处理可能在典型网页源中找到的相对 URL 字符串。

相反，您所追求的是获取任意 URL 并将其剥离回主机部分。我知道的最简单的方法是有点狡猾：

```
NSURL *aURL =  [NSURL URLWithString:@"https://www.google.es/search?q=uiviewcontroller"];
NSURL *hostURL = [[NSURL URLWithString:@"/" relativeToURL:aURL] absoluteURL]; 
```

这将给出`hostURL`一个`https://www.google.es/`

我有一个作为[KSFileUtilities](https://github.com/karelia/KSFileUtilities)`-[NSURL ks_hostURL]`的一部分发布的方法（向下滚动自述文件以找到它的文档）

如果您只想要主机而不是方案/端口等，那么`-[NSURL host]`这就是您的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:40:25.087

BaseURL 的文档。

```
baseURL
Returns the base URL of the receiver.

- (NSURL *)baseURL
Return Value
The base URL of the receiver. If the receiver is an absolute URL, returns nil.

Availability
Available in iOS 2.0 and later.
Declared In
NSURL.h 
```

似乎它只适用于相对 URL。

你可以使用...

```
NSArray *pathComponents = [url pathComponents] 
```

然后拿走你想要的东西。

或者试试...

```
NSString *host = [url host]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T12:37:19.307

你可以使用`host`方法

```
NSURL *url = [[NSURL alloc] initWithString:@"http://www.hello.com"];

NSLog(@"Host:%@", url.host); 
```

结果：

```
Host:www.hello.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-21T19:46:27.360

可能只有我一个人，但是当我进一步考虑[双 URL 解决方案](https://stackoverflow.com/a/15897956/3379766)时，听起来像是在操作系统更新之间停止工作的东西。所以我决定分享另一个解决方案，当然也不是很漂亮，但我发现它更容易被公众阅读，因为它不依赖于框架的任何隐藏特性。

```
if let path = URL(string: resourceURI)?.path {
  let baseURL = URL(string: resourceURI.replacingOccurrences(of: path, with: ""))
  ...
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-16T18:13:31.423

这是获取基本 URL 的一种快速、简单且安全的方法：

```
NSError *regexError = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"http://.*/" options:NSRegularExpressionCaseInsensitive error:&regexError];

if (regexError) {
    NSLog(@"regexError: %@", regexError);
    return nil;
}

NSTextCheckingResult *match = [regex firstMatchInString:url.absoluteString options:0 range:NSMakeRange(0, url.absoluteString.length)];

NSString *baseURL = [url.absoluteString substringWithRange:match.range]; 
```

# c# - 从数组中删除元素：转换为列表，删除元素，转换回数组？

> ID：15895739
> 
> 赞同：1
> 
> 时间：2013-04-09T07:21:06.720
> 
> 标签：c#, arrays, winforms, list

在我的程序中，我有一个名为 Album 的课程。我有一个我的专辑对象在创建时进入的数组。如果他们愿意，我需要让用户稍后更改专辑的专辑名称。如果他们愿意，我还需要让用户从数组中删除专辑。据我了解，您不能只从数组中删除对象，因此将它们存储在列表而不是数组中会很好。

根据我对 Lists 的理解（在此之前我没有使用过它们），如果我想稍后更改 Album 对象中的变量，我不能在创建时将 Album 对象放入 List 而不是 Array 中。如果我想更改专辑名称，我也不能只删除并用列表中的新对象替换专辑对象，因为专辑对象将存储一个数组（myMusics），如果我这样做会丢失。

所以我的问题是，我如何允许用户对 Album 对象进行更改，同时让他们删除它们？我想我必须将它们存储的数组更改为列表。然后从列表中删除对象，然后将列表更改回相同的数组。它是否正确？如果这是正确的方法，我将如何做到这一点？

此外，如果有帮助/有所作为，包含专辑的数组将在 Form1 中创建，专辑对象将从表单 1 中删除，但专辑对象中专辑名称的更改将在 Form2 中发生。

任何帮助深表感谢。我对使用 c# 很陌生，所以一个帮助我理解的代码示例会很棒。谢谢你。

专辑类：

```
public class Album
{
    public string albumName;
    private int totalMusics;
    private const int MAX_MUSICS = 100;
    private Music[] myMusics;

    public Album(string albumName)
    {
        this.albumName = albumName;
        totalMusics = 0;
        myMusics = new Music[MAX_MUSICS];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:24:14.883

我建议你一直存储`Music`。`List<Music>`与其他语言不同的`C#` `List`是，它实际上是一个具有恒定索引操作的动态可扩展数组`[]`。

请记住，这意味着从列表中删除除最后一个以外的任何元素都意味着需要额外的操作来移动元素。如果您不关心音乐中的顺序，`List`我建议在删除专辑之前将其与中的最后一个交换，`List`然后删除中的最后一个元素`List`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:27:25.407

> 根据我对 Lists 的理解（在此之前我没有使用过它们），如果我想稍后更改 Album 对象中的变量，我不能在创建时将 Album 对象放入 List 而不是 Array 中。

这仅适用于*structs*。由于您使用的是（可变）*类*，因此您可以在对象存储在`List<Album>`.

所以你*绝对*应该使用`List`.

除非您希望能够按某个字段查找相册，例如按`AlbumName`. 如果是这样，您可以使用 a `Dictionary<string, Album>`and use`AlbumName`作为密钥。

# c# - 将上传的文件验证为图像，然后获取它的尺寸

> ID：15895741
> 
> 赞同：1
> 
> 时间：2013-04-09T07:21:17.620
> 
> 标签：c#, asp.net, file-upload, height, width

我想将图像文件上传到 FTP 服务器，所以我可以`AsyncFileUpload`控制 asp.net 页面。我正在使用以下代码来获取类型，`AsyncFileUpload1.PostedFile`然后尝试获取它的尺寸，但到目前为止还没有运气。

```
string cType =asyncFU.PostedFile.ContentType;
if (cType.Contains("image"))
{
   Stream ipStream = asyncFU.PostedFile.InputStream;
   Image img = System.Drawing.Image.FromStream(ipStream); //ERROR comes here, I can't think the work around this.
   int w = img.PhysicalDimension.Width;
   int h = img.PhysicalDimension.Height;
} 
```

如您所见，错误消息说它无法从 转换`System.Drawing.Image`为`System.Web.UI.WebControls.Image`。我理解这个错误，但我想不出解决这个问题的方法。

我可以`AsyncFileUpload`控制未知文件的上传位置，但如果它是图像文件，则仅保存到 FTP 服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T08:20:49.480

尝试这个 ：

```
Stream ipStream = fuAttachment.PostedFile.InputStream;
        using (var image = System.Drawing.Image.FromStream(ipStream))
        {                    
            float w = image.PhysicalDimension.Width;
            float h = image.PhysicalDimension.Height;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:26:03.353

您的`img`变量应该是类型`System.Drawing.Image`，而不是`System.Web.UI.WebControls.Image`.

# c# - 在运行时加载程序集的 2013 年方式是什么？

> ID：15895743
> 
> 赞同：0
> 
> 时间：2013-04-09T07:21:24.227
> 
> 标签：c#, plugins, .net-assembly

我想在运行时从我的插件目录加载几个程序集。核心应用程序事先没有对程序集的引用，程序集实现了核心应用程序给定的接口，因此对其具有引用。[我发现 2005 年的文章准确地解释了我需要做些什么来完成这项工作](http://blogs.msdn.com/b/abhinaba/archive/2005/11/14/492458.aspx)。

目前我有这段代码，它基本上是您在上面文章中找到的 LINQ 版本：

```
foreach (
    IModule module in
        Directory.EnumerateDirectories(string.Format(@"{0}/{1}", Application.StartupPath, ModulePath))
            .Select(dir => Directory.GetFiles(dir, "*.dll"))
            .SelectMany(files => files.Select(Assembly.LoadFrom)
                                        .SelectMany(assembly => (from type in assembly.GetTypes()
                                                                where type.IsClass && !type.IsNotPublic
                                                                let interfaces = type.GetInterfaces()
                                                                where
                                                                    ((IList) interfaces).Contains(
                                                                        typeof (IModule))
                                                                select
                                                                    (IModule) Activator.CreateInstance(type))))
    )
{
    module.Core = this;
    module.Initialize();
    AddModule(module);
} 
```

那么当前在运行时动态加载插件/模块/程序集的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:24:30.417

您可能还想查看[Microsoft Managed Extensibility Framework](http://msdn.microsoft.com/en-us/library/dd460648.aspx)以及本[教程](http://www.codeproject.com/Articles/104431/Introduction-to-MEF-Programming)，它是一个不错的介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:24:31.477

我建议[托管可扩展性框架](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

或者，如果您需要加载“插件”而无需保留引用，还有[PRISM](http://msdn.microsoft.com/en-us/library/ff648465.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:25:21.457

roslyn 项目没有提供一些有用的东西吗？

[http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

[http://www.developerfusion.com/article/143896/understanding-the-basics-of-roslyn/](http://www.developerfusion.com/article/143896/understanding-the-basics-of-roslyn/)

```
var scriptEngine = new ScriptEngine();
var session = Session.Create();
scriptEngine.Execute("foo.dll", session); 
```

# javascript - 重新创建涂鸦手风琴桌

> ID：15895744
> 
> 赞同：1
> 
> 时间：2013-04-09T07:21:28.897
> 
> 标签：javascript, css, ruby-on-rails-3.2

在我当前的 Web 项目中，我必须实现一个包含一个月中所有日期的表，从而产生 ~30-31 个表列。由于这么大的表格不是很漂亮，我想实现类似于 Doodle Polls 的表格。涂鸦折叠一张桌子，用图片替换隐藏的列，如果您单击该图片，它会展开列 -> 显示隐藏的列。

但是我如何实现这样的行为呢？我是 Javascript 新手，不太熟悉花哨的 CSS3 技术。

特别是，如何用图片替换隐藏的列？我发现的教程只允许隐藏特定列而不是替换它们。

PS：我还标记了 RoR，因为我正在处理的项目是使用 RoR 构建的，也许还有一个 Rails 解决方案可以解决这个问题？

PP:

![](https://i.stack.imgur.com/Uc6so.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:30:07.113

您可以先隐藏要隐藏的列，然后在表格中显示一个带有图像的列。单击图像（折叠）时，您可以隐藏包含图片的列并使其他列再次可见。这实际上并不是关于一些花哨的 css3 东西，但您需要有关如何通过 javascript（隐藏/显示）元素与 DOM 元素交互的基本知识。这应该够了吧。

请参阅w3schools 上的[本](http://www.w3schools.com/htmldom/)教程。您所需要的只是获取您需要的元素（图像列和隐藏列中的所有 TD），然后对它们应用 css 样式（隐藏/可见）。

# asp.net - 在gridview，asp.net的不同页面中保存值

> ID：15895747
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:21:43.123
> 
> 标签：asp.net

我有一个包含 30 多个值的网格。网格视图页面大小为 10。当我在第一页中选择两个数据并转到下一页并选择另外两个数据并输入确定按钮时，网格视图还包含复选框，仅保存最后一次选择值。我想保存我在不同页面中选择的所有数据

谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:26:56.793

你可以试试这段代码：*

```
protected void Page_Load(object sender, EventArgs e)
{
if(!IsPostBack)
{
BindGridData();
}
}
//This method is used to bind the gridview
protected void BindGridData()
{
SqlConnection con = new SqlConnection("Data Source=XXX;Integrated Security=true;Initial Catalog=MySampleDB");
SqlCommand cmd = new SqlCommand("select * from UserInformation", con);
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds);
gvdetails.DataSource = ds;
gvdetails.DataBind();
}
protected void gvdetails_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
SaveCheckedValues();
gvdetails.PageIndex = e.NewPageIndex;
BindGridData();
PopulateCheckedValues();
}
//This method is used to populate the saved checkbox values
private void PopulateCheckedValues()
{
ArrayList userdetails = (ArrayList)Session["CHECKED_ITEMS"];
if (userdetails != null && userdetails.Count > 0)
{
foreach (GridViewRow gvrow in gvdetails.Rows)
{
int index = (int)gvdetails.DataKeys[gvrow.RowIndex].Value;
if (userdetails.Contains(index))
{
CheckBox myCheckBox = (CheckBox)gvrow.FindControl("chkSelect");
myCheckBox.Checked = true;
}
}
}
}
//This method is used to save the checkedstate of values
private void SaveCheckedValues()
{
ArrayList userdetails = new ArrayList();
int index = -1;
foreach (GridViewRow gvrow in gvdetails.Rows)
{
index = (int)gvdetails.DataKeys[gvrow.RowIndex].Value;
bool result = ((CheckBox)gvrow.FindControl("chkSelect")).Checked;
// Check in the Session
if (Session["CHECKED_ITEMS"] != null)
userdetails = (ArrayList)Session["CHECKED_ITEMS"];
if (result)
{
if (!userdetails.Contains(index))
userdetails.Add(index);
}
else
userdetails.Remove(index);
}
if (userdetails != null && userdetails.Count > 0)
Session["CHECKED_ITEMS"] = userdetails;
} 
```

*

# php - 正则表达式无法正常工作 - php

> ID：15895760
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:22:29.903
> 
> 标签：php, regex

```
elseif(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $user_email)) 
```

即使我也尝试`preg_match`过，我也得到了

警告：

```
preg_match() [function.preg-match]: No ending delimiter '^' found in C:\wamp\www\Saravanan\jQuery\jQuery - Samples\sign_and_login_using_jquery_ajax_and_php\sign_and_login_using_jquery_ajax_and_php\vpb_save_details.php on line 29
Call Stack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:25:21.990

使用这个：

```
if(!filter_var($user_email,FILTER_VALIDATE_EMAIL)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:27:22.847

如果 var 来自 POST：

```
if (!filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL)) 
```

# c# - 从静态成员获取对象引用未设置为对象错误的实例

> ID：15895763
> 
> 赞同：0
> 
> 时间：2013-04-09T07:22:45.043
> 
> 标签：c#

我有一个像这样的静态类：

```
 public static class ApplicationList
    {
        public static List<ApplicationsModel> ApplicationsModels { get; set; }
    } 
```

我想在另一个类中使用 ApplicationsModels

```
 class Program
    {
        static void Main(string[] args)
        {
            GetApplicationNameFromAppConfigAndAddToApplicationList();
        }

        private static void GetApplicationNameFromAppConfigAndAddToApplicationList()
        {
            List<string> applicationName = ConfigurationManager.AppSettings["AppName"].Split(',').ToList();

            foreach (var variable in applicationName)
            {
                ApplicationList.ApplicationsModels.Add(new ApplicationsModel { DateTime = DateTime.MinValue, Name = variable });

            }
        }
    } 
```

但我的 ApplicationList 为空并收到此错误

```
Object reference not set to an instance of an object. 
```

这是静态 Prpoerty，我们无法从静态 Prpoerty 创建实例

![在此处输入图像描述](https://i.stack.imgur.com/zgRUG.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:23:42.333

那么你有一个

```
 public static List<ApplicationsModel> ApplicationsModels { get; set; } 
```

未初始化的属性。

可以做这样的事情，而不是：

```
public static class ApplicationList
{
    private static List<ApplicationsModel> appmodel = new List<ApplicationsModel>();
    public static List<ApplicationsModel> ApplicationsModels 
    { 
       get { return appmodel ;}
    }

    //DON'T THINK YOU NEED A SET IN THIS CASE.. 
    // BUT ADD IT, IF NEED
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:24:18.243

您得到空引用异常，因为`List<ApplicationsModel> ApplicationsModels`当您尝试使用它时仍然为空。仅将其声明为静态并不意味着编译器或框架会为您添加对

```
ApplicationsModels = new List<ApplicationsModel>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:24:04.193

简短的回答，在加载列表之前添加这一行：

```
ApplicationsModels = new List<ApplicationsModel>(); 
```

**更长的答案：**

您需要先初始化您的`List`，然后才能添加到它。

这是因为 (reference-type) 属性将是`null`默认的，并且它没有意义做`null.Add(item)`.

**解决方案1：加载前初始化**：

简单的解决方案是在方法中加载列表之前添加一个初始化行`Get...`：

```
ApplicationsModels = new List<ApplicationsModel>(); 
```

但是，这将在您每次调用该`Get`方法时重新初始化列表（这可能是您想要的，也可能不是您想要的）。您可以进行检查以仅在它是时重新创建列表`null`，但如果这是您之后的行为，我会倾向于以下其他解决方案之一。

**解决方案 2：使用初始化字段而不是属性**：

另一种方法是用初始化字段替换您的属性。任何一个：

```
public static List<ApplicationsModel> ApplicationsModels = new List<ApplicationsModel>(); 
```

或者：

```
public static List<ApplicationsModel> ApplicationsModels 
{ 
    get { return _applicationsModels; }
    set { _applicationModels = value; } // Do you really want a set?
}
private static List<ApplicationsModel> _applicationsModels = new List<ApplicationsModel>(); 
```

**解决方案 3：保留属性，但使用静态构造函数**：

另一种方法是使用[静态构造函数](http://msdn.microsoft.com/en-au/library/k9x6w0hc%28v=vs.80%29.aspx)`ApplicationList`：

```
static ApplicationList()
{
    ApplicationsModels = new List<ApplicationsModel>();
} 
```

# asp.net - asp.net中的绑定变量

> ID：15895766
> 
> 赞同：2
> 
> 时间：2013-04-09T07:22:49.487
> 
> 标签：asp.net, visual-studio, data-binding

**问题：**

异常详细信息：System.Data.EntitySqlException：查询语法无效。近期'<'，第 8 行，第 16 列。

**代码背后：**

```
 protected void Page_Load(object sender, EventArgs e)
    {

        int Id = 3;

        Page.DataBind();
    } 
```

**项目.aspx.cs**

```
<asp:EntityDataSource ID="ProjectEntityDataSource" runat="server" ConnectionString="name=DBEntities" DefaultContainerName="DBEntities" EnableFlattening="False" EntitySetName="projects" Select="it.[Id], it.[ClientId], it.[Name], it.[Description]"
    Where="it.ClientId = <%# Id %> " >
</asp:EntityDataSource> 
```

**我尝试过的：** [ASP.NET 数据绑定/从代码隐藏中获取变量](https://stackoverflow.com/questions/3271854/asp-net-databinding-getting-variables-from-codebehind)

我知道这太容易了，但我无法弄清楚问题出在哪里，为什么我无法绑定数据背后的代码。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:28:03.907

您可以借助以下示例在您的情况下

```
protected void Page_Load(object sender, EventArgs e)
{
     ProjectEntityDataSource.WhereParameters["Username"].DefaultValue ="3";
     Page.DataBind();
} 
```

aspx

```
<asp:EntityDataSource ID="ProjectEntityDataSource" runat="server"
     ConnectionString="name=DBEntities" DefaultContainerName="DBEntities" 
     EnableFlattening="False" EntitySetName="projects" Select="it.[Id], it.[ClientId], 
     it.[Name], it.[Description]" Where="it.ClientId = @Username">
      <WhereParameters>
        <asp:Parameter Name="Username" Type="String" />
    </WhereParameters>
</asp:EntityDataSource> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:47:40.770

```
<asp:EntityDataSource ID="ProjectEntityDataSource" runat="server" 
    ConnectionString="name=DBEntities" DefaultContainerName="DBEntities" 
    EnableFlattening="False" EnableInsert="True" EnableUpdate="True"      
     EntitySetName="projects" Where="it.ClientId= @Id"  >
    <WhereParameters>
        <asp:QueryStringParameter Name="Id" Type="Int32" QueryStringField="Id" />
    </WhereParameters>
</asp:EntityDataSource> 
```

试试这个代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:31:56.547

像这样改变......我认为它会起作用......

```
 Where='<%#"it.ClientId =" + Id.ToString %> ' 
```

# php - 使用 DOMDocument 从网站上抓取所有图像

> ID：15895773
> 
> 赞同：3
> 
> 时间：2013-04-09T07:23:11.673
> 
> 标签：php, kohana-3.2

我基本上想使用 DOMDocument 获取任何网站中的**所有**图像。但是由于某些我还不知道的原因，我什至无法加载我的 html。

```
$url="http://<any_url_here>/";
$dom = new DOMDocument();
@$dom->loadHTML($url); //i have also tried removing @
$dom->preserveWhiteSpace = false;
$dom->saveHTML();
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) 
{
echo $image->getAttribute('src');
} 
```

发生的事情是什么都没有打印出来。还是我对代码做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T07:29:36.727

> 您没有得到结果，因为 $dom->loadHTML() 需要 html。你给它一个url，你首先需要得到你要解析的页面的html。您可以为此使用 file_get_contents() 。

我在我的图像抓取类中使用了它。对我来说很好。

```
$html = file_get_contents('http://www.google.com/');
$dom = new domDocument;
$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
  echo $image->getAttribute('src');
} 
```

# html - 如何使表格列不对齐？

> ID：15895780
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:23:23.123
> 
> 标签：html, css, html-table

我正在尝试创建一个表，其中行中的列与其他行中的列不对齐。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:27:53.010

简短的回答是*否定*的。

但是有各种各样的可能性：

1.  使用`COLSPAN`使它们相互重叠并以复杂方式求和的列：仍然会有固有的对齐，但它可能很复杂。

2.  表格中的表格 - 您可以将表格放在单元格中，并在下一行中以不同的方式执行；这些现在是独立的子表并独立对齐。

3.  一个接一个地完全分开表格 - 只需有 2 个或多个独立`<table>`块独立对齐并使用 CSS 来确保它们的总宽度相同或任何您想要的约束。

对于最适合您的建议，我们需要查看您实际所需的布局是什么样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:30:33.870

您可以使用 colspan 或 table within table 进行调整会有所帮助。或者尝试使用 usi div 而不是它更灵活...

# python - 在python网站中存储postgres密码的“正确”方式

> ID：15895788
> 
> 赞同：3
> 
> 时间：2013-04-09T07:23:57.547
> 
> 标签：python, apache, postgresql, mod-wsgi

我正在用 Python（在 Linux 系统上的 Apache 服务器上）编写一个需要连接到 Postgres 数据库的 Web 应用程序。因此，它需要数据库服务器的有效密码。在我的 Python 文件中硬编码密码似乎不太令人满意。

我确实想知道使用 .pgpass 文件，但它需要属于 www-data 用户，对吗？默认情况下，没有 /home/www-data 目录，这是我希望存储 .pgpass 文件的地方。我可以创建这样一个目录并将 .pgpass 文件存储在那里吗？如果不是，那么让我的 Python 脚本连接到数据库的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:29:03.850

将应用程序及其配置文件安装在与静态文件目录不同的自己的目录中，并且只能由应用程序用户读取。

设置另一个用户来运行应用程序并使用[WSGIDaemonProcess](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)指令。

[mod_wsgi 站点](http://code.google.com/p/modwsgi/)、[快速配置指南](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)、[配置指南](http://code.google.com/p/modwsgi/wiki/ConfigurationGuidelines)和[配置指令](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives)中清楚地描述了所有这些以及更多内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:15:37.030

无论您使用哪种方法，运行 as 的其他应用程序`www-data`都将能够读取您的密码并以您的身份登录到数据库。使用`peer`auth 不会帮助你，它仍然会信任在`www-data`.

如果您希望您的应用程序能够将其数据与其他数据库隔离，您需要将其作为单独的用户 ID 运行。主要的方法是：

*   使用 apache suexec 模块以单独用户身份运行脚本；
*   使用 fast-cgi (fcgi) 或 scgi 以其他用户身份运行 cgi；或者
*   让应用程序运行自己的最小 HTTP 服务器并为其安装 Apache 反向代理

其中，迄今为止最好的选择通常是使用 scgi/fcgi。它使您可以轻松地以不同的 unix 用户身份运行您的应用程序，但避免了反向代理的复杂性和开销。

# c# - 在两个模型中使用相同的实体

> ID：15895789
> 
> 赞同：1
> 
> 时间：2013-04-09T07:24:02.087
> 
> 标签：c#, entity-framework-5

我正在制作一个库，该库将用于使用实体框架与数据库进行对话。对于不同的工作流程，我需要来自数据库的不同表。所以我决定为不同的工作流程使用不同的模型。但对于某些工作流程，一个实体用于多个模型。现在对于一个模型，我修改了我的实体类（更改了一些 getter/setter 并添加了自定义函数）。但是当我为不同的工作流创建新模型时，模型将生成具有默认名称的实体。我必须再次编辑它，代码将被复制。两者都在不同的命名空间中（一个是 Model1Namespace，第二个是 Model2Namespace）。

所以我真正需要的是，如果在不同的类中使用实体，则使用单个代码（无重复代码）。最佳实践是什么？EF 是否为我们提供了一些东西，或者我们需要自己实现它？

例子：

```
Database tables: TableA, TableB, TableC, TableD
Models: Model1 -> TableA, TableB
        Model2 -> TableA, TableC,
        Model3 -> TableC, TableD 
```

**编辑：** 我有一个包含 4 个表（TableA、TableB、TableC、TableD）的数据库。我创建了一个包含 TableA 和 TableB 的数据库的实体数据模型。在实体设计器视图中，我修改了 TableA 实体的属性名称，以便它们可读。现在我创建另一个包含 TableA 和 TableC 的模型。现在在这里我必须再次重命名 TableA 的所有属性。现在这是重复工作。现在，如果我为 Model1 的实体添加一些自定义操作，那么我也必须将它们写入（复制）到新的 Model2 实体。我需要避免这种情况。因为我真的不知道我会创建多少个模型。如果我必须一次又一次地做这些事情，那将需要很多时间。

# java - 无法将客户端值“null”转换回服务器端对象

> ID：15895798
> 
> 赞同：1
> 
> 时间：2013-04-09T07:24:29.913
> 
> 标签：java, tapestry

这个问题是关于`Tapestry`组件问题的。

我正在寻找**解决这个问题**的方法，而不是任何解决方法或替代方法，如何实现这个接口。

1.  考虑表单`ajaxformloop`上的元素`Tapestry`：

    `<tr t:type="ajaxformloop" t:id="items" source="getItems()" value="item">`

    `...`

    `</tr>`

2.  `getItems()``List`类中的方法返回持久对象和尚未持久的新添加项（其中包含`null`id ）的合成组合（接口）。

3.  提交表单时，我收到此错误：

    `Unable to convert client value 'null' back into a server-side object`

此错误发生**在** `onSuccessFromSave()`方法之前（`save`是提交链接的 ID）。

我想知道，我怎样才能管理这样的非持久对象`ajaxformloop`以防止这样的错误。实际上，我想在我的`onSucceccFrom...()`方法中保存（在数据库中）这些项目。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:38:43.760

实际上我错过`ValueEncoder`了我的`ajaxformloop`容器的定制。该组件默认产生的上述错误`encoder`。

自定义编码器应该这样设置：

`<tr t:type="ajaxformloop" t:id="items" source="getItems()" value="item" encoder="itemEncoder">`

`itemEncoder`java类中的`@Property`注释字段在哪里：

```
@Property
private ValueEncoder<MyItem> itemEncoder = new ValueEncoder<MyItem>() {
    @Override
    public String toClient(MyItem value) {
        return value.id != null ? value.id.toString() : "";
    }

    @Override
    public MyItem toValue(String clientValue) {
        if (clientValue != null && !clientValue.isEmpty()) {
            Long id = Long.parseLong(clientValue);
            return (MyItem) session.get(MyItem.class, id);
        }
        return new MyItem();
    }
}; 
```

# c# - 反射发射：如何将 Attribute 实例转换为 CustomAttributeBuilder 或 CustomAttributeData

> ID：15895802
> 
> 赞同：5
> 
> 时间：2013-04-09T07:24:36.743
> 
> 标签：c#, reflection, reflection.emit

我制作了一个生成器类，它基于实现接口的接口构建代理类。

请参阅我关于[基于接口构建代理类而不实现它的](http://ofirzeitoun.wordpress.com/2013/03/28/interfacedbasedproxy/)帖子。

我很熟悉`CustomAttributeData.GetCustomAttributes(MemberInfo target)`，我在阅读接口的成员并成功将它们导入代理时使用它。

我想在运行时向生成的类注入**额外的属性。**我要求属性实例将它们注入代理。

*例如：*

开发人员可以将其作为值传递：`new ObsoleteAttribute("Demo", true)`，（它有一个空的构造函数，但属性是只读的），我想将其转换为：

```
return new CustomAttributeBuilder(
               attribute.GetType().GetConstructor(Type[] {typeof (string), typeof (bool)}),
               new object[] {"Demo", true},
               new FieldInfo[0], 
               new object[0]); 
```

请记住，我不知道给出了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:37:26.013

这不是一个通用的解决方案，但如果您愿意将您支持的属性限制为具有无参数构造函数和读/写属性和字段的属性，这将起作用

```
CustomAttributeBuilder BuildCustomAttribute(System.Attribute attribute)
{
    Type type = attribute.GetType();
    var constructor = type.GetConstructor(Type.EmptyTypes);
    var properties = type.GetProperties(BindingFlags.Public | BindingFlags.Instance);
    var fields = type.GetFields(BindingFlags.Public | BindingFlags.Instance);

    var propertyValues = from p in properties
                         select p.GetValue(attribute, null);
    var fieldValues = from f in fields
                      select f.GetValue(attribute);

    return new CustomAttributeBuilder(constructor, 
                                     Type.EmptyTypes,
                                     properties,
                                     propertyValues.ToArray(),
                                     fields,
                                     fieldValues.ToArray());
} 
```

要进行通用解决方案，您可以使用表达式。这更复杂，但允许使用如下语法：

```
BuildCustomAttribute(() => new ObsoleteAttribute("Demo", true)); 
```

解析表达式以提取构造函数信息和参数将是复杂的部分，但可以完成。

```
CustomAttributeBuilder BuildCustomAttribute(Expression<Action> exp)
{
    //extract ConstructorInfo from exp
    //extract ParameterValues from exp
    //extract Attribute Type from exp

    return new CustomAttributeBuilder(ConstructorInfo, ParameterValues);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T06:11:08.480

谢谢乔，感谢您的输入，
我确实在[Attribute Builder](http://attributebuilder.codeplex.com/)`Expression`找到了解决方案。 我现在愿意更加努力地工作，让其他开发人员更容易使用我的[Proxy](http://ofirzeitoun.wordpress.com/2013/03/28/interfacedbasedproxy/)。

我希望它可以更容易，如果我有属性实例，为什么我不能按原样使用它并应用属性？

*如果您有没有 的解决方案`Expression`，我很想听听。*

这是我`Expression`基于[Attribute Builder](http://attributebuilder.codeplex.com/)的解决方案：

```
private CustomAttributeBuilder GetCustumeAttributeBuilder(Expression<Func<Attribute>> attributeExpression)
{
    ConstructorInfo constructor = null;
    List<object> constructorArgs = new List<object>();
    List<PropertyInfo> namedProperties = new List<PropertyInfo>();
    List<object> propertyValues = new List<object>();
    List<FieldInfo> namedFields = new List<FieldInfo>();
    List<object> fieldValues = new List<object>();

    switch (attributeExpression.Body.NodeType)
    {
        case ExpressionType.New:
            constructor = GetConstructor((NewExpression)attributeExpression.Body, constructorArgs);
            break;
        case ExpressionType.MemberInit:
            MemberInitExpression initExpression = (MemberInitExpression)attributeExpression.Body;
            constructor = GetConstructor(initExpression.NewExpression, constructorArgs);

            IEnumerable<MemberAssignment> bindings = from b in initExpression.Bindings
                                                        where b.BindingType == MemberBindingType.Assignment
                                                        select b as MemberAssignment;

            foreach (MemberAssignment assignment in bindings)
            {
                LambdaExpression lambda = Expression.Lambda(assignment.Expression);
                object value = lambda.Compile().DynamicInvoke();
                switch (assignment.Member.MemberType)
                {
                    case MemberTypes.Field:
                        namedFields.Add((FieldInfo)assignment.Member);
                        fieldValues.Add(value);
                        break;
                    case MemberTypes.Property:
                        namedProperties.Add((PropertyInfo)assignment.Member);
                        propertyValues.Add(value);
                        break;
                }
            }
            break;
        default:
            throw new ArgumentException("UnSupportedExpression", "attributeExpression");
    }

    return new CustomAttributeBuilder(
        constructor,
        constructorArgs.ToArray(),
        namedProperties.ToArray(),
        propertyValues.ToArray(),
        namedFields.ToArray(),
        fieldValues.ToArray());
}

private ConstructorInfo GetConstructor(NewExpression expression, List<object> constructorArgs)
{
    foreach (Expression arg in expression.Arguments)
    {
        LambdaExpression lambda = Expression.Lambda(arg);
        object value = lambda.Compile().DynamicInvoke();
        constructorArgs.Add(value);
    }
    return expression.Constructor;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T23:18:43.237

如果我正确理解了这个问题，这应该为生成的类型添加一个自定义属性

```
public class CustomAttribute: System.Attribute
{
    public CustomAttribute()
    {
    }
}

TypeBuilder typeBuilder = module.DefineType(...) 
```

……

```
typeBuilder.SetCustomAttribute(new CustomAttributeBuilder(
    typeof(CustomAttribute).GetConstructor(Type.EmptyTypes), 
    Type.EmptyTypes, 
    new FieldInfo[0], 
    new object[0])); 
```

# spring - 如何使用 RestTemplate 调用 REST 服务方法

> ID：15895804
> 
> 赞同：0
> 
> 时间：2013-04-09T07:24:39.243
> 
> 标签：spring, rest, resttemplate

任何人都可以告诉我如何使用 RestTemplate 调用以下服务方法。谢谢。

```
 @RequestMapping(value = "/file/upload", method = { RequestMethod.GET, RequestMethod.POST })
 public String fileUpload(@RequestParam("file") MultipartFile file) { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T01:18:50.517

```
 RestTemplate rest = new RestTemplate();
 ResponseEntity<youclass> response= rest.exhange(url(your url to post or get), data(data u r sending to server), yourclass.class);
response.getBody() //response back from the server 
```

# bash - 在子目录中找到pom并执行mvn clean

> ID：15895805
> 
> 赞同：21
> 
> 时间：2013-04-09T07:24:42.570
> 
> 标签：bash, maven

查找包含 pom.xml 文件的所有子目录然后执行的命令是什么：

```
mvn clean 
```

在那个子目录中操作？

我有包含多个 Maven 项目的工作区，我想清理所有项目。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-09T07:51:24.423

像这样的东西应该可以工作：

寻找 。-name "pom.xml" -exec mvn clean -f '{}' ;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:30:42.183

通常，您会希望`mvn clean`在父 pom 上发布，这也会清除所有定义为模块的子代。

如果您没有并且不想要这样的父母，您将需要为此使用蛮力，这意味着类似

```
for dir in yourdirectory;
do
  cd $dir
  if [ -f pom.xml ];
  then
    mvn clean
  fi
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-16T20:16:10.063

我正在使用这个脚本，它只调用`mvn clean`那些必须清理的项目（它们有一个`target`目录）：

```
find . -name "target" -type d \
| sed s/target/pom.xml/ \
| tee /dev/stderr \
| xargs -I {} mvn -q clean -f {} 
```

该`tee`部分是可选的，它只是打印出正在清理的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-01T12:12:36.847

```
find . -maxdepth 2 -name "pom.xml"  -exec mvn clean -f '{}' \; 
```

把它放在像'cleanRepo.sh'这样的地方

在 git-bash 中的 unix-terminal 或 windows 中执行：

```
sh cleanRepo.sh 
```

对我来说这是最好的，因为我只使用多模块项目。

# android - 如何在单个文本视图中证明描述的合理性

> ID：15895808
> 
> 赞同：1
> 
> 时间：2013-04-09T07:25:02.893
> 
> 标签：android

在我的应用程序中，我`TextView`在产品旁边有很多行，但我需要具有正确外观的数据。是否可以动态对齐对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:28:32.073

您可以根据需要动态对齐文本...

但是，我想 android 中没有这样的工具可以像文本编辑器那样完全证明文本的合理性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:30:44.703

在你的 textView 中使用 Html 格式

```
yourTextView.setText(Html.fromHtml("<h1>Product Name</h1><br><p>Content</p>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:31:10.133

是的，您可以在活动启动时获取 TextView 的实例

```
TextView t = (TextView)FindViewById(R.id.TextView1)
t.setTextAppearance(context,parameter) 
```

# javascript - 将值从循环传递到 javascript 函数

> ID：15895809
> 
> 赞同：0
> 
> 时间：2013-04-09T07:25:15.850
> 
> 标签：javascript, jquery, json

我有以下代码：

```
var storedNames = JSON.parse(localStorage.name); 
var mytable = "<table> cellpadding=\"0\" cellspacing=\"0\"><tbody><tr>"; 
for (var i = 0; i < storedNames.length; i++) {   
  if (i % 2 == 1 && i != 1) {
     mytable += "</tr><tr>";   
  }

    mytable += "<td>" + storedNames[i].name +" "+ storedNames[i].email+"</td><td><img id='arrow' src='arrow.png' height='20' width='20' onclick='redirectToDetail();' ></td></tr>"; 
} 

mytable += "</tbody></table>";

document.write(mytable); 
```

在这里，在 redirectToDetail 函数中，我想要我的价值。我怎么能通过这个？任何的想法？提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:30:08.737

试试这个

```
 mytable += "<td>" + storedNames[i].name +" "+ storedNames[i].email+"</td><td><img id='arrow' src='arrow.png' height='20' width='20' onclick='redirectToDetail(\'"+ i +"\');' ></td></tr>"; 
```

并接受它`redirectToDetail`

```
 function redirectToDetail(val){
     alert(val);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:29:58.337

试试这个

```
onclick='redirectToDetail(\'"+i+"\') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:30:35.460

我认为这会做到。核实。

```
mytable += "<td>" + storedNames[i].name +" "+ storedNames[i].email+"</td><td><img id='arrow' src='arrow.png' height='20' width='20' onclick='redirectToDetail(" + i + ");' ></td></tr>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:36:39.880

只需将该值添加为传递给 onclick 事件的文字常量，您就可以自由自在了。此外，我强烈建议您考虑使用数组并加入字符串，因为您将获得更好的性能，尤其是在 IE 中。

```
var storedNames = JSON.parse(localStorage.name); 
var mytable = ['<table cellpadding="0" cellspacing="0"><tbody><tr>'];
for (var i = 0; i < storedNames.length; i++) {   
  if (i % 2 == 1 && i != 1) {
     mytable.push("</tr><tr>");   
  }
  mytable.push('<td>' + storedNames[i].name + ' ' + storedNames[i].email + '</td><td><img id="arrow" src="arrow.png" height="20" width="20" onclick="redirectToDetail(' + i + '"></td></tr>"');
} 

mytable.push("</tbody></table>");

document.write(mytable.join()); 
```

现在你可以像这样声明你的 onclick 函数：

```
function redirectToDetail(value) {
   //do stuff with the value
} 
```

# matlab - 与白噪声产生相关的错误

> ID：15895810
> 
> 赞同：0
> 
> 时间：2013-04-09T07:25:18.180
> 
> 标签：matlab, signal-processing, time-series

我有一个问题，请帮我解决它。假设我们有以下数据

```
f1=100;
 f2=200;
 T=1./f1;
 N=3;
 m=500;
 t=(0:(N*T)/m:(N*t))';
 wn=rand(length(t),1).*2-1; 
```

但是当我试图查看 wn 的值时，它显示我关注一个

```
0.6294 
```

我需要它来执行以下代码

```
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn; 
```

A3 是白噪声的幅度。但主要问题如下

1.不应该是数组而不是标量？

2.为什么每次我输入wn时都会显示相同的wn值？

如您所见，这是两个确定性周期模型+白噪声的模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:28:22.503

```
t=(0:(N*T)/m:(N*t))'; 
```

`t`在它的定义中使用它自己。这不可能。我怀疑如果你打电话`clear`然后运行这个脚本，那行会出错。

# c++ - 如何将通过引用运算符获得的指针值转换为字符串？

> ID：15895816
> 
> 赞同：1
> 
> 时间：2013-04-09T07:25:27.307
> 
> 标签：c++, string, pointers, type-conversion

我是 C++ 的初学者。我正在做这个需要跟踪内存地址的项目。不幸的是，这个跟踪函数有以下原型声明：

```
void TRC(uint8_t, uint8_t, uint8_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, uint64_t, const char*) 
```

现在可供我使用的选项是：

1.  将此内存地址（指针值）转换为`uint64_t`类型。但是我在某处读到不推荐这样做，因为引用运算符返回的指针值取决于平台，并且将指针转换为整数可能会返回错误值。

2.  将此内存地址转换为字符串并通过最后一个参数传递。在 Python 中，这很容易，因为我们有`str()`函数。我们在 C++ 中也有类似的东西吗？

如果我在这里的方法/理解中有错误，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:36:25.753

如果不需要快速代码，您可以使用流进行转换。

```
 #include <sstream>
    #include <iomanip>

...
    std::ostringstream os;
    os << std::hex << static_cast<void*>(my_pointer);
    TRC(..., os.str().c_str()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:36:41.837

你是对的，指针不应该作为任何整数类型存储或传递。

如果要将指针转换为可打印的十六进制字符串，可以使用例如[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)：

```
std::ostringstream os;

os << std::hex << static_cast<void*>(some_pointer);

std::string str = os.str();
TRC(...,  str.c_str()); 
```

# python - 如何正确解析和简化像 '3cm/µs² + 4e-4 sqmiles/km/h**2' 这样的字符串处理物理单位？

> ID：15895819
> 
> 赞同：11
> 
> 时间：2013-04-09T07:25:54.857
> 
> 标签：python, parsing, sympy

我想将一个字符串拆分`3cm/µs² + 4e-4 sqmiles/km/h**2`为它的[SI 单位](https://en.wikipedia.org/wiki/International_System_of_Units)（在本例中为`m/s**2`）和它的大小（以该单位的倍数表示）。

由于 sympy 提供了[解析模块](http://docs.sympy.org/dev/modules/parsing.html)和[许多物理单位和 SI 前缀](http://docs.sympy.org/dev/modules/physics/units.html)，我想使用 sympy 是个好主意。但是，实现这一目标的好方法是什么？我会写一个类似下面的算法，但我想避免重新发明一个方轮：

*   将数字和字母之间的转换（除了`4e-4`类似的语法）和空格（除非它与显式运算符相邻）视为乘法，然后标记化
*   用它的 SI 表示替换每个非数字标记（也检查 SI 前缀）
*   将新表达式简化为`Magnitude * some SI units`（在不一致的单位上给出有意义的错误消息，例如`Cannot add m**2 to s`）

这可以通过现有手段轻松实现吗？或者这将如何最好地实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:01:04.437

## 单位

一个解决方案是从 SymPy`units`模块中收集所有单元，并使用它们来替换由`sympify`

```
>>> import sympy.physics.units as u 
... subs = {} 
... for k, v in u.__dict__.items(): 
...     if isinstance(v, Expr) and v.has(u.Unit): 
...         subs[Symbol(k)] = v # Map the `Symbol` for a unit to the unit

>>> # sympify returns `Symbol`s, `subs` maps them to `Unit`s
>>> print sympify('yard*millimeter/ly').subs(subs)
127*m/1313990343414000000000 
```

如果符号不在其中，`units`它将被打印为未知符号（例如`barn`）

```
>>> print sympify('barn/meter**2').subs(subs)
barn/m**2 
```

但是您总是可以向`subs`字典中添加内容。

```
>>> subs[Symbol('almost_meter')] = 0.9*u.meter
... sympify('almost_meter').subs(subs)
0.9*m 
```

SI 前缀的工作方式与您想要的不同。您将需要添加一个乘号（或希望它是一个`km`明确实现的通用单元）。此外，由于它们不是`Unit`实例，而是`Integer`实例，因此您必须将它们添加到`subs`：

```
>>> import sympy.physics.units as u
... subs = {} 
... for k, v in u.__dict__.items(): 
...     if (isinstance(v, Expr) and v.has(u.Unit)) or isinstance(v, Integer): 
...         subs[Symbol(k)] = v 

>>> print sympify('mega*m').subs(subs)
1000000*m 
```

对于 unicode，您可能需要一些预处理。我不认为 SymPy 对 unicode 支持做出任何承诺。

如果你实现 new `Unit`s，请考虑在 github 上向他们提出 pull request。要编辑的文件应该是`sympy/physics/units.py`.

## 空格和隐式乘法

在 SymPy 的开发版本中，您可以找到用于假设隐式乘法的代码，其中写入了适当的空格：

```
>>> from sympy.parsing.sympy_parser import (parse_expr,
... standard_transformations, implicit_multiplication_application)

>>> parse_expr("10sin**2 x**2 + 3xyz + tan theta",
...            transformations=(standard_transformations + 
...                             (implicit_multiplication_application,)))
3*x*y*z + 10*sin(x**2)**2 + tan(theta) 
```

## 安全

`sympify``eval`如果您要将其用于面向 Web 的应用程序，则可利用的用途！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-18T16:57:10.837

我发现[astropy](https://github.com/astropy/astropy/blob/master/astropy/units/tests/test_units.py)有一个很好的单位模块。经过一些准备，你可以做

```
import astropy.units as u
from functools import reduce
u.Unit('MeV/fm').si #160.218 N
eval('1*MeV/fm+3*N',u.__dict__).si #163.21765649999998 N

from astropy.units import imperial
u.__dict__.update(imperial.__dict__)
u.sqmiles = u.mile**2
eval('3*cm/Ys**2 + 4e-4*sqmiles/km/h**2',u.__dict__).si #7.993790464000001e-08 m / s2 
```

以下函数将`scipy`CODATA 常量作为数量添加到`astropy`单位

```
def units_and_constants():
    """
    >>> u = units_and_constants()
    >>> u.hartree_joule_relationship
    <Quantity 4.35974434e-18 J>

    >>> eval('1*MeV/fm+3*N',u.__dict__).si
    <Quantity 163.21765649999998 N>

    """
    import astropy.units as u
    from astropy.units import imperial
    u.__dict__.update(imperial.__dict__)
    from scipy.constants import physical_constants, value, unit
    import string
    def qntty(x): 
        un = unit(x)
        va = value(x)
        if un:
            return va*eval(un.strip().replace(' ','*').replace('^','**'),u.__dict__)
        else:
            return va
    u.sr = u.radian**2
    u.E_h = qntty('hartree-joule relationship')
    u.c = qntty('speed of light in vacuum')
    u.C_90 = (1+4.6e-8)*u.C 
    codata = {}
    for n, t in physical_constants.items():
        v = qntty(n)
        for x in string.punctuation+' ':
            n = n.replace(x,'_')
        codata[n] = v
    u.__dict__.update(codata)
    return u 
```

[yt](http://yt-project.org/)还[解决了与您的问题类似的问题](http://ytep.readthedocs.org/en/latest/YTEPs/YTEP-0011.html)。查看[测试文件](https://bitbucket.org/MatthewTurk/yt/src/f157266200b526c63adde4e67971c932a169c4bb/yt/utilities/tests/test_units.py?at=yt-3.0)以了解它是如何使用的。

# ios - 删除包含日期的单元格时删除 UILocalNotification

> ID：15895822
> 
> 赞同：0
> 
> 时间：2013-04-09T07:26:01.090
> 
> 标签：ios, uilocalnotification

我正在制作提醒应用程序，其中有表格视图，单元格中有日期，当该单元格日期变为今天 UILocalNotification 触发时。为此我正在使用以下代码

```
-(void)notification {

    // logic for local notification start

    NSDateFormatter *Form = [[NSDateFormatter alloc] init];
    [Form setDateFormat:@"dd/MM/yyyy"];

    UILocalNotification *notification = [[UILocalNotification alloc] init];
    for (int i=0;i<_convertedBdates.count;i++)
    {
        NSDate *date =[Form dateFromString:[_convertedBdates objectAtIndex:i ]];
        //     NSLog(@"date%@",date);

        if(notification)
        {
            notification.fireDate = date;
            notification.timeZone = [NSTimeZone defaultTimeZone];
            notification.alertBody = [NSString stringWithFormat:@"Today is %@\'s Birthday",[_combinedNameArray objectAtIndex:i]];
            notification.alertAction = @"View";

            notification.soundName = UILocalNotificationDefaultSoundName;
            notification.applicationIconBadgeNumber = 1;
            [[UIApplication sharedApplication] scheduleLocalNotification:notification];
        }
    }
    // local notification logic ends here   

} 
```

现在我还实现了从表格视图中删除单元格的功能现在我的问题是单元格被删除但它的通知不是没有单元格但是当那个日期到来时通知就会触发。

删除该单元格后，我应该如何删除该特定通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:34:30.643

编辑：我最初的答案是错误的，因为我没有意识到操作系统会`UILocalNotification`在您安排它们时复制 s，而不仅仅是保留它们。所以...

据我所知，有两种方法可以做到这一点。

*   删除行时取消所有通知，然后重新安排其余通知。

如果您没有安排很多通知，这将更有效率，而且编码肯定会容易得多。（注意：我对工作中的低级事物知之甚少，不能说哪个必然更有效，但我的猜测是差异并不重要。）

每当删除一行时，只需调用

```
[[UIApplcation sharedApplication] cancelAllLocalNotifications]; 
```

然后`_convertedBDates`适当地更新，最后再次调用你的`notification`方法来为那些仍然存在的事件重新安排新的本地通知。

*   为本地通知创建唯一标识符

如果您能想出一个制作这些唯一标识符的好方法并且您安排了很多通知，这可能是更有效的方法。（强调*可能*）。一种可能性是使用通知将触发的时间，如果您可以保证不会同时触发两个通知。其他可能性是通知的标签（同样，如果您可以确定唯一性）。无论您决定为您的唯一标识符使用什么，您都可以通过在 for 循环之外添加它来存储它：

```
self.uniqueIDArray = [[NSMutableArray alloc] init]; 
```

（其中 uniqueIDArray 是`NSMutableArray* @property`您的班级），然后在您安排通知之前：

```
[uniqueIDArray addObject:whateverObjectYouUseForTheUniqueID];
notification.userInfo = [[NSDictionary alloc] initWithObjects:whateverObjectYouUseForTheUniqueID
                                                      forKeys:@"uniqueID"]; 
```

然后，无论您使用什么方法删除单元格，您都可以执行以下操作：

```
uniqueIDToDelete = [self.uniqueIDArray objectAtIndex:indexOfCellBeingDeleted];
NSArray *scheduledNotifications = [[UIApplication sharedApplication] scheduledNotifications];
UILocalNotification *notifToDelete;
for (UILocalNotification *notif in scheduledNotifications) {
    if ([[notif.userInfo objectForKey:@"uniqueID"] isEqual:uniqueIDToDelete]) {
        [[UIApplication sharedApplication] cancelLocalNotification:notif];
    }
}
[self.uniqueIDArray removeObjectAtIndex:indexOfCellBeingDeleted]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:38:17.700

我认为您不应该使用单元格作为通知源。改用数据模型。您也可以轻松删除通知

**更新**

```
Model *model = [_array objectAtIndex:indexPath.row]; model.notificationID = // here you store created notification identifier

[[UIApplication sharedApplication] scheduledLocalNotifications] // contains all local notifications, you should search you need by ID and remove it using cancelLocalNotification method. 
```

PS通知ID，您可以存储在通知userInfo中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T16:31:01.317

试试这个

> ```
> NSArray *notificationArray = [[UIApplication sharedApplication] scheduledLocalNotifications];
> UILocalNotification *notif = [notificationArray objectAtIndex:indexPath];
> [[UIApplication sharedApplication] cancelLocalNotification:notif]; 
> ```

# asp.net - iTextSharp 打印 GridView - 输出标题宽度

> ID：15895824
> 
> 赞同：0
> 
> 时间：2013-04-09T07:26:12.650
> 
> 标签：asp.net, itextsharp

我正在使用 iTextSharp 打印 gridview，但在尝试确定列的适当宽度时遇到问题。在我的 gridview 中，我没有设置它，而是让 ASP.NET 引擎调整宽度（它会根据文本的样式动态调整）。

默认情况下，所有列的大小都相同，这在大多数情况下是不好的。

如何配置标题的 PdfPCell 对象，使其宽度适合其中的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:52:57.863

列宽是在`PdfPTable`级别计算的，因此您需要在那里解决它。根据您使用的解析器，有几种方法可以启动它，但最终结果是您需要将 HTML 解析为 iTextSharp 对象，然后在将它们提交到 PDF 之前手动应用您自己的逻辑。下面的代码基于使用（首选）XMLWorker 和 iTextSharp 5.4.0 以及以下示例 HTML：

```
<html>
   <head>
       <title>This is a test</title>
   </head>
   <body>
       <table>
           <thead>
               <tr>
                   <td>First Name</td>
                   <td>Last Name</td>
               </tr>
           </thead>
           <tbody>
               <tr>
                   <td>Bob</td>
                   <td>Dole</td>
               </tr>
           </tbody>
       </table>
   </body>
</html> 
```

首先，您需要实现自己的`IElementHandler`类。这将允许您在将元素写入 PDF 之前捕获它们。

```
Public Class CustomElementHandler
    Implements IElementHandler
    ''//List of all elements
    Public elements As New List(Of IElement)

    ''//Will get called for each top-level elements
    Public Sub Add(w As IWritable) Implements IElementHandler.Add
        ''//Sanity check
        If (TypeOf w Is WritableElement) Then
            ''//Add the element (which might have sub-elements)
            elements.AddRange(DirectCast(w, WritableElement).Elements)
        End If
    End Sub
End Class 
```

然后你只需要使用上面的处理程序而不是直接写入文档：

```
''//TODO: Populate this with your HTML
Dim Html = ""
''//Where we're write our PDF to
Dim File1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "File1.pdf")
''//Create our PDF, nothing special here
Using FS As New FileStream(File1, FileMode.Create, FileAccess.Write, FileShare.None)
    Using Doc As New Document()
        Using writer = PdfWriter.GetInstance(Doc, FS)
            Doc.Open()

            ''//Create an instance of our handler
            Dim Handler As New CustomElementHandler()
            ''//Bind a StringReader to our text
            Using SR As New StringReader(Html)
                ''//Have the XMLWorker read our HTML and push it to our handler
                XMLWorkerHelper.GetInstance().ParseXHtml(Handler, SR)
            End Using

            ''//Loop through each element that the parser found
            For Each El In Handler.elements
                ''//If the element is a table
                If TypeOf El Is PdfPTable Then
                    ''//Below is just for illustration, change as needed

                    ''//Set the absolute width of the table
                    DirectCast(El, PdfPTable).TotalWidth = 500

                    ''//Set the first column to be 25% and the second column to be 75%
                    DirectCast(El, PdfPTable).SetWidths({0.25, 0.75})

                    ''//Also, just for illustration, turn borders on for each cell so that we can see the actual widths
                    For Each R In DirectCast(El, PdfPTable).Rows
                        For Each C In R.GetCells()
                            C.BorderWidthLeft = 1
                            C.BorderWidthRight = 1
                            C.BorderWidthBottom = 1
                            C.BorderWidthTop = 1
                        Next
                    Next
                End If

                ''//Add the element to the document
                Doc.Add(El)
            Next
            Doc.Close()
        End Using
    End Using
End Using 
```

# .net - 通过 .net 使用 SAP Web 服务

> ID：15895831
> 
> 赞同：0
> 
> 时间：2013-04-09T07:26:29.577
> 
> 标签：.net, xml, web-services, wsdl, uri

我对网络服务很陌生，所以我正在与一些奇怪的行为作斗争。通过 VS2010 导入 WSDL xml 文件后，我得到了这些无法识别的策略断言。WSDL 文件是由 SAP 团队创建的，所以我不确定他们到底做了什么。

当我忽略这些评论并尝试使用 Web 服务时，我得到了这样的期望： **提供的 URI 方案“https”无效；预期的“http”。**

我知道这个错误消息意味着我有一个与 URI 定义不同的传输逻辑，但我不确定我是否应该对此做些什么或更新 WSDL 文件。

```
 <system.serviceModel>
<bindings>
    <customBinding>
        <binding name="binding">
            <!--    WsdlImporter encountered unrecognized policy assertions in ServiceDescription 'urn:sap-com:document:sap:soap:functions:mc-style':    -->
            <!--    <wsdl:binding name='binding'>    -->
            <!--        <saptrnbnd:OptimizedXMLTransfer xmlns:saptrnbnd="http://www.sap.com/webas/710/soap/features/transportbinding/">..</saptrnbnd:OptimizedXMLTransfer>    -->
            <!--        <sapattahnd:Enabled xmlns:sapattahnd="http://www.sap.com/710/features/attachment/">..</sapattahnd:Enabled>    -->
            <mtomMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                messageVersion="Soap11WSAddressing10" maxBufferSize="65536"
                writeEncoding="utf-8">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            </mtomMessageEncoding>
            <httpsTransport manualAddressing="false" maxBufferPoolSize="524288"
                maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
                bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
                keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
                realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
                useDefaultWebProxy="true" requireClientCertificate="false" />
        </binding>
        <binding name="binding_SOAP12">
            <!--    WsdlImporter encountered unrecognized policy assertions in ServiceDescription 'urn:sap-com:document:sap:soap:functions:mc-style':    -->
            <!--    <wsdl:binding name='binding_SOAP12'>    -->
            <!--        <saptrnbnd:OptimizedXMLTransfer xmlns:saptrnbnd="http://www.sap.com/webas/710/soap/features/transportbinding/">..</saptrnbnd:OptimizedXMLTransfer>    -->
            <!--        <sapattahnd:Enabled xmlns:sapattahnd="http://www.sap.com/710/features/attachment/">..</sapattahnd:Enabled>    -->
            <mtomMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                messageVersion="Default" maxBufferSize="65536" writeEncoding="utf-8">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            </mtomMessageEncoding>
            <httpsTransport manualAddressing="false" maxBufferPoolSize="524288"
                maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
                bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
                keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
                realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
                useDefaultWebProxy="true" requireClientCertificate="false" />
        </binding>
    </customBinding>
</bindings>
<client>
    <endpoint address="http://{HOSTNAME}/sap/bc/srt/rfc/sap/zicert_kunden_auslesen/010/005056a5007b1ee2a5da43a20303be2b/binding"
        binding="customBinding" bindingConfiguration="binding" contract="ServiceReference.ZICERT_KUNDEN_AUSLESEN"
        name="binding" />
    <endpoint address="http://{HOSTNAME}/sap/bc/srt/rfc/sap/zicert_kunden_auslesen/010/005056a5007b1ee2a5da43a20303be2b/binding"
        binding="customBinding" bindingConfiguration="binding_SOAP12"
        contract="ServiceReference.ZICERT_KUNDEN_AUSLESEN" name="binding_SOAP12" />
</client> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:34:16.463

您的端点具有`http`方案，但绑定仅定义`httpsTransport`. 您可以尝试将绑定更改为`httpTransport`，或者查看您的端点是否也可用于`https`协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T08:18:48.880

请尝试使用`TransportCredentialOnly`as 安全模式，不需要 HTTPS 协议（但需要提供用户名和密码）。

```
<bindings>
  <basicHttpBinding>
    <binding name="NewBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Basic" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

您可以在 .NET 代码中设置用户名和密码，如下所示：

```
sapService.ClientCredentials.UserName.UserName = "UserName";
sapService.ClientCredentials.UserName.Password = "Password"; 
```

# sql-server - 更新插入 (Updatecounter) 上的 MSSql 触发器

> ID：15895834
> 
> 赞同：6
> 
> 时间：2013-04-09T07:26:42.423
> 
> 标签：sql-server, triggers

我有一个名为 Table1 的表，其中包含两个字段 Systemname 和 Updatecount。系统名称为“SAP”的每个插入都应将 Updatecount 设置为 1（初始值）。如果 Field Systemname 获得具有定义值“SAP”的更新，则 Field Updatecount 应增加 1。

如何定义触发器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:38:14.963

```
create trigger tr on Table1 for insert,update
as
begin
    if update(Systemname)
        update Table1
            set UpdateCount = (case when not exists(select * from deleted) then 1 else UpdateCount + 1 end)
        from Table1
        inner join inserted on Table1.[<YourPKField>] = inserted.[<YourPKField>]
        where inserted.Systemname = 'SAP'
end
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:41:35.403

这里有一篇关于触发器的好文章：

[http://www.codeproject.com/Articles/38808/Overview-of-SQL-Server-database-Triggers](http://www.codeproject.com/Articles/38808/Overview-of-SQL-Server-database-Triggers)

您需要创建：

```
CREATE TRIGGER [TRIGGER_ALTER_COUNT] ON [dbo].[tblTriggerExample] 
FOR INSERT, UPDATE
AS
BEGIN
 DECLARE @Var INT 
 SELECT @Var = COUNT(*) FROM INSERTED
 UPDATE [dbo].[tblTriggerExample] SET AlterCount = AlterCount + Var  
          ,LastUpdate = GETDATE()
    WHERE TransactionID = @TransID
 SELECT @Var = COUNT(*) FROM UPDATED WHERE SystemNAme = 'Var'
 UPDATE [dbo].[tblTriggerExample] SET AlterCount = AlterCount + @Var
          ,LastUpdate = GETDATE()
    WHERE TransactionID = @TransID
END 
```

# python - HDFStore：table.select 和 RAM 使用情况

> ID：15895837
> 
> 赞同：6
> 
> 时间：2013-04-09T07:26:47.777
> 
> 标签：python, pandas, pytables, hdfstore

我正在尝试从大约 1 GB 的 HDFStore 表中选择随机行。当我要求大约 50 个随机行时，RAM 使用量会激增。

我正在使用熊猫`0-11-dev, python 2.7, linux64`。

在第一种情况下，RAM 使用量适合`chunk`

```
with pd.get_store("train.h5",'r') as train:
for chunk in train.select('train',chunksize=50):
    pass 
```

在第二种情况下，似乎整个表都加载到 RAM 中

```
r=random.choice(400000,size=40,replace=False)
train.select('train',pd.Term("index",r)) 
```

在最后一种情况下，RAM 使用量符合等效`chunk`大小

```
r=random.choice(400000,size=30,replace=False)    
train.select('train',pd.Term("index",r)) 
```

我很困惑，为什么从 30 个随机行移动到 40 个随机行会导致 RAM 使用量如此显着增加。

请注意，该表在创建时已被索引，因此 index=range(nrows(table)) 使用以下代码：

```
def txtfile2hdfstore(infile, storefile, table_name, sep="\t", header=0, chunksize=50000 ):
    max_len, dtypes0 = txtfile2dtypes(infile, sep, header, chunksize)

    with pd.get_store( storefile,'w') as store:
        for i, chunk in enumerate(pd.read_table(infile,header=header,sep=sep,chunksize=chunksize, dtype=dict(dtypes0))):
            chunk.index= range( chunksize*(i), chunksize*(i+1))[:chunk.shape[0]]
            store.append(table_name,chunk, min_itemsize={'values':max_len}) 
```

感谢洞察

**编辑回答 Zelazny7**

这是我用来将 Train.csv 写入 train.h5 的文件。[我使用来自How to Trouble-shoot HDFStore Exception: cannot find the correct atom type](https://stackoverflow.com/questions/15488809/how-to-trouble-shoot-hdfstore-exception-cannot-find-the-correct-atom-type)中 Zelazny7 的代码元素编写了这个

```
import pandas as pd
import numpy as np
from sklearn.feature_extraction import DictVectorizer

def object_max_len(x):
    if x.dtype != 'object':
        return
    else:
        return len(max(x.fillna(''), key=lambda x: len(str(x))))

def txtfile2dtypes(infile, sep="\t", header=0, chunksize=50000 ):
    max_len = pd.read_table(infile,header=header, sep=sep,nrows=5).apply( object_max_len).max()
    dtypes0 = pd.read_table(infile,header=header, sep=sep,nrows=5).dtypes

    for chunk in pd.read_table(infile,header=header, sep=sep, chunksize=chunksize):
        max_len = max((pd.DataFrame(chunk.apply( object_max_len)).max(),max_len))
        for i,k in enumerate(zip( dtypes0[:], chunk.dtypes)):
            if (k[0] != k[1]) and (k[1] == 'object'):
                dtypes0[i] = k[1]
    #as of pandas-0.11 nan requires a float64 dtype
    dtypes0.values[dtypes0 == np.int64] = np.dtype('float64')
    return max_len, dtypes0

def txtfile2hdfstore(infile, storefile, table_name, sep="\t", header=0, chunksize=50000 ):
    max_len, dtypes0 = txtfile2dtypes(infile, sep, header, chunksize)

    with pd.get_store( storefile,'w') as store:
        for i, chunk in enumerate(pd.read_table(infile,header=header,sep=sep,chunksize=chunksize, dtype=dict(dtypes0))):
            chunk.index= range( chunksize*(i), chunksize*(i+1))[:chunk.shape[0]]
            store.append(table_name,chunk, min_itemsize={'values':max_len}) 
```

应用为

```
txtfile2hdfstore('Train.csv','train.h5','train',sep=',') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:15:48.517

这是一个已知问题，请参阅此处的参考：[https ://github.com/pydata/pandas/pull/2755](https://github.com/pydata/pandas/pull/2755)

本质上，查询被转换`numexpr`为评估表达式。有一个问题是我不能将很多`or`条件传递给 numexpr（它取决于生成的表达式的总长度）。

所以我只是限制我们传递给 numexpr 的表达式。如果超过一定数量的`or`条件，则查询将作为过滤器完成，而不是内核选择。基本上这意味着表被读取然后重新索引。

这在我的增强列表中：[https](https://github.com/pydata/pandas/issues/2391) ://github.com/pydata/pandas/issues/2391 (17)。

作为一种解决方法，只需将您的查询分成多个查询并连接结果。应该更快，并使用恒定数量的内存

# python - Django在查询中排除追随者

> ID：15895840
> 
> 赞同：0
> 
> 时间：2013-04-09T07:26:57.990
> 
> 标签：python, django, subquery, django-queryset

我有 2 个模型，userProfile 和关系。用户可以互相关注，并通过关系模型建立关系。这是代码：

```
class UserProfile(models.Model):    
    slug = models.SlugField(max_length=200)
    user = models.ForeignKey(User, unique =True)
    relationships = models.ManyToManyField('self', through='Relationship',symmetrical=False,null=True, blank=True,related_name='related_to')

class Relationship(models.Model):
    from_person = models.ForeignKey(UserProfile, related_name='from_people')
    to_person = models.ForeignKey(UserProfile, related_name='to_people')
    status = models.IntegerField(choices=RELATIONSHIP_STATUSES) 
```

我正在尝试获取 userProfile 列表，不包括 userProfile 列表，然后是某个用户。这是我的查询：

```
topUsersRecommendation = UserProfile.objects.exclude(id=profile.id,relationships__to_people__from_person = profile).extra(
   select={
    'num_group': """
     SELECT COUNT(*) FROM axiom_alto_groupuser gu1
     JOIN axiom_alto_groupuser gu2 on gu1.group_id = gu2.group_id
     WHERE gu2.user_id=axiom_alto_userprofile.id 
     AND gu1.user_id = %d """ % profile.id,
},

).order_by('-num_group') 
```

但是排除似乎不起作用。谢谢你的帮助^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:41:04.880

您可以添加一个字段来`UserProfile`定义如下：

```
followers = models.ManyToManyField(
    'self',
    blank=True,
    symmetrical=False,
    through='Relationship',
    related_name='followees'
) 
```

IIRC然后你可以做这样的事情：

```
certain_user = UserProfile.objects.get(slug='Bob')
all_but_certain_user_followees = UserProfile.objects.all().exclude(
    follower = certain_user
) 
```

# zend-framework - Zend 框架 2 中的临时用户

> ID：15895841
> 
> 赞同：1
> 
> 时间：2013-04-09T07:27:00.813
> 
> 标签：zend-framework, doctrine, zend-framework2, zfcuser

我在 Zend Framework 2 中与临时用户作斗争。我想要一个带有临时用户的 CMS。我给他们一个开始日期和结束日期，但我想检查他们是否处于活动状态并且当前日期在开始日期和结束日期之间。

“过期”在数据库中没有价值，所以我无法检查数据库。如果用户处于活动状态且未过期，是否可以从 zfcUser 签入登录？

我对用户的概述在检查时效果很好，所以当用户过期时我会得到另一个象形图。例子：

```
public function customState()
{
    $state = $this->getState();
    $curDate = new \DateTime('midnight');

    //if (state = 1 and current date after startdate) AND (current date before enddate OR enddate is empty)
    if (($state == '1' && $this->startdate <= $curDate) && ($curDate <= $this->enddate || !isset($this->enddate))) {
        $this->setState('1');   
    }

    //if state = 1 and currentDate NOT between start- and enddate, set state on 2
    elseif ($state == '1' && ($this->startdate > $curDate || $curDate > $this->enddate)) {
        $this->setState('2');
    } 

    //if state = 2, set state on 3
    elseif ($state == '2') {
        $this->setState('3');
    }
} 
```

所以我创建了一个带有“活动”、“过期”和“非活动”的“customState”。但是在数据库中我只有一个状态（活动和非活动）以及开始和结束日期。有人知道如何解决这个问题吗？

# c# - NHibernate：对象实例的标识符从 x 更改为 y

> ID：15895842
> 
> 赞同：2
> 
> 时间：2013-04-09T07:27:09.560
> 
> 标签：c#, asp.net, nhibernate

我有一个关于休眠的情况。我有这段代码：

```
private void UnlinkProductsFromPriceAgreement(NameValueCollection collection, IUnitOfWork unitOfWork)
{
    // Get the price agreement id
    int priceAgreementId = collection.GetInt("Id");

    foreach (int productId in collection.GetIds("unlinkProductsList"))
    {
        // Get the product price
        IProductPrice productPrice =
            ProductPriceRepository.Find(p => p.PriceAgreement.Id == priceAgreementId && p.Product.ProductId == productId).FirstOrDefault();

        // Remove the product price
        ProductPriceRepository.Delete(productPrice);
    }
} 
```

运行此代码时出现此异常：

```
Qe.Common.Core.Exceptions.PersistencyException ---> NHibernate.HibernateException: identifier of an instance of Qe.Vending.Core.DomainObjects.Product was altered from 210036 to 0
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.CheckId(Object obj, IEntityPersister persister, Object id, EntityMode entityMode) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEntityEventListener.cs:line 111
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.GetValues(Object entity, EntityEntry entry, EntityMode entityMode, Boolean mightBeDirty, ISessionImplementor session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEntityEventListener.cs:line 84 
```

这怎么可能？

# symfony - 将变量传递给 Twig Translator

> ID：15895847
> 
> 赞同：0
> 
> 时间：2013-04-09T07:27:19.720
> 
> 标签：symfony, twig

在messages.en.yml 中：

```
variable_name: Welcome to %site_name% - %other_info% 
```

在树枝上

```
{{ 'variable_name'|trans( -here- ) }} 
```

这是我正在努力知道如何传递数据的部分。我必须这样做（上面只是一个例子）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:27:30.160

也许我误解了这个问题，但如果我理解正确，你只需要给出一个数组作为 trans 过滤器的第一个参数。

```
{{ 'variable_name'|trans({'%site_name%': 'My Website'}) }} 
```

当然，如果您不将它们放在引号之间，值可以是变量：

```
{{ 'variable_name'|trans({'%site_name%': 'My Website', '%other_info%': page_name}) }} 
```

# java - 在java中只提取完全编写的文件

> ID：15895867
> 
> 赞同：-1
> 
> 时间：2013-04-09T07:28:39.013
> 
> 标签：java, jakarta-ee, file-io, aix

我在 aix 中有一个目录，它将接收来自外部应用程序的文件。我的 java 程序应该只选择那些完全由应用程序编写的文件。它不应该选择仍然由外部应用程序编写的不完整文件。有人可以帮忙提供样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:10:28.633

解决此问题的一种常见方法是在文件完全写入后重命名文件。

例如，您的应用程序写入 myFile.txt.tmp，一旦完成，它就会将其重命名为 myFile.txt。这样做您只需忽略以 .tmp 结尾的文件...

或者，正如已经说过的，通过 alexcpn 看看[Apache Camel 文件组件](http://camel.apache.org/file2.html)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:35:00.943

尝试使用 Apache Camel File Poller 和策略操作系统或文件重命名以检测正在进行的文件访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:38:09.910

在 Windows 中，无法知道文件何时被锁定以供另一个应用程序写入，我之前遇到过同样的问题。您可以尝试使用 JNotify 来侦听事件并处理发生的异常，据我所知没有其他方法，但是在 Unix 中检查文件是否被锁定应该可以完成这项工作`new File(fileName).canWrite()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:34:25.273

我的方法是先将文件写入“临时”目录。写入文件完成后，应将其移至最终目的地。注意将“临时”和“最终”目录放在同一个文件系统上；否则，[`File.renameTo()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#renameTo%28java.io.File%29)可能会或可能不会工作。使用 Java 7 时，[`Files.move()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#move%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)可能会更好用。

显然，您的应用程序只需检查“最终”目录中的文件，因为您知道该目录中的所有文件都已完全写入。

# java - 在运行时集成外部 JSF 视图

> ID：15895872
> 
> 赞同：1
> 
> 时间：2013-04-09T07:28:53.920
> 
> 标签：java, jsf, jsf-2

**问题描述**

我使用带有自建 JSF UI 的工作流引擎。引擎中的某些进程使用所谓的*用户任务*。这些任务在我的 JSF 前端中呈现并包含必须由用户填写的中小型表单。工作流前端应该是完全通用的——它不应该知道处理了哪些任务或哪些类型的任务。因此，我想不在 JSF 应用程序中定义这些*任务表单。*表单应该沿着相关流程“存在”，因此在工作流引擎中。这很重要，因为否则每次将更改应用于任何次要表单时都必须重新部署前端应用程序。
所以我想获取表格（基本上是`.xhtml`文件）并将其作为简单的 JSF 视图添加到应用程序中。如果用户想要完成一项任务，则应拉取并呈现相应的 JSF 表单。

**我想在运行时将 JSF 组件（或整个视图）集成到我的应用程序中，因此在构建或启动时完全未知。**

我怎样才能做到这一点？这甚至可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:00:15.893

至于 JSF 组件，您绝对可以通过编程方式创建它们。这在这里得到了回答：[如何创建动态 JSF 表单字段](https://stackoverflow.com/questions/3510614/how-to-create-dynamic-jsf-1-2-form-fields/3522489#3522489)。请注意，对于 JSF 2.x，这个概念没有什么不同。只有时机；您需要在视图构建期间运行它。A `<f:event type="postAddToView">`on a parent 是理想的钩子。或者，在父属性的 getter 中懒惰地执行此操作`binding`，但这会破坏视图范围，并且 bean 肯定需要在请求范围内。

对于 JSF 视图，您需要创建一个自定义的[`ResourceResolver`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/ResourceResolver.html). [在这些答案](https://stackoverflow.com/search?q=user:157882%20%22extends%20resourceresolver%22)中可以找到具体示例，其中包括[从外部文件系统或数据库获取 Facelets 模板/文件](https://stackoverflow.com/questions/13292272/can-you-get-the-jsf2-uidecorate-template-xxx-outside-of-app/13296727#13296727)

# php - 如何隐藏基于先前搜索显示的先前表格行

> ID：15895873
> 
> 赞同：0
> 
> 时间：2013-04-09T07:28:54.503
> 
> 标签：php, javascript, html

下面代码的思路是用户将根据维护操作编号、操作类型、执行操作的成员或PC需要维护的员工进行搜索。例如，当用户选择操作类型时，将显示一个下拉菜单，然后他选择类型。之后，将显示维护信息表。例如，用户选择打印类型。该表将显示以下信息：

操作编号、成员姓名、员工姓名、维护类型

1001，阿德姆，约翰，印刷 1003，乔治，史密斯，印刷 1010，威廉，约翰，印刷

我面临的问题是，例如，当用户通过操作编号选择搜索时，他选择操作编号为 1001，其余行（基于先前搜索显示的 1003 和 1010）仍然显示（它们必须被隐藏，因为它们与搜索类型不匹配）。

代码是

```
<script>
function check() {
    var dropdown = document.getElementById("OpType");
    var current_value = dropdown.options[dropdown.selectedIndex].value;

    if (current_value == "OpNo") {
        document.getElementById("operationno").style.display = "block";
        document.getElementById("MainType").style.display = "none";
        document.getElementById("MemName").style.display = "none";
        document.getElementById("EmpName").style.display = "none";
    }
    else if (current_value == "OpTyp") {
        document.getElementById("MainType").style.display = "block";
        document.getElementById("MemName").style.display = "none";
        document.getElementById("EmpName").style.display = "none";
        document.getElementById("operationno").style.display = "none";
    }
    else if (current_value == "OpMem") {
        document.getElementById("MemName").style.display = "block";
        document.getElementById("operationno").style.display = "none";
        document.getElementById("MainType").style.display = "none";
        document.getElementById("EmpName").style.display = "none";

    }
    else if (current_value == "OpEmp"){
        document.getElementById("MemName").style.display = "none";
        document.getElementById("operationno").style.display = "none";
        document.getElementById("MainType").style.display = "none";
        document.getElementById("EmpName").style.display = "block";

    }
    else if (current_value == "blank") {
        document.getElementById("MainType").style.display = "none";
        document.getElementById("MemName").style.display = "none";
        document.getElementById("EmpName").style.display = "none";
        document.getElementById("operationno").style.display = "none";

    }
}
</script>

<form name="f1" action="FollowOperations.php" method="post">
<select id="OpType" onChange="check();">
<option value="blank">Choose</option>
<option value="OpNo">Operation No</option>
<option value="OpTyp">Operation Type</option>
<option value="OpMem">Maintenance Member</option>
<option value="OpEmp">Employee</option>
</select><br>

<input class="tb10" type="text" id="operationno" size="4" style="text-align: center" style="display: none">

<select id="MainType" style="display: none">
<option value="blank">Choose</option>
<option value="printing">Printing</option>
<option value="maintenance">PC Maintenance</option>
<option value="internet">Internet Problem</option>
<option value="software">Software</option>
<option value="email">Email Problem</option>
<option value="usbcd">USB/CD Problem</option>
</select>

<select id="MemName" style="display: none">
<option value="blank">Choose</option>
<option value="john">John</option>
<option value="hen">Hen</option>
</select>

<select id="EmpName" style="display: none">
<option value="blank">Choose</option>
<option value="smith">Smith</option>
<option value="will">William</option>
<option value="Gor">George</option>
</select>

<input type="submit" value="Submit" class="button" /> 
</form>

<?php
    if (isset($_POST['formsubmitted']))
    {

        $operationno = $_POST['ono'];
            echo "<table id='tfhover' class='tftable' border='1' align='center'>";
            echo "<tr align='center'><th></th><th align='center'>Type</th><th>Employee</th><th align='center'>Member</th><th align='center'>Operation No</th></tr>";
                $query_retrieve_maintenance = "Select * from Maintenance where ID = '$operationno'";
                $result_retrieve_maintenance = mysqli_query($dbh, $query_retrieve_maintenance);         
                    while($row1 = mysqli_fetch_array($result_retrieve_maintenance))
                        {
                            echo "<tr>";
                            echo "<td><a href='PastOperationsDet.php?operation_number=".$row1['ID']."' target='_blank'>Show</a></td> ";
                            echo "<td>".$row1['Type']."</td> ";
                            echo "<td>".$row1['MemName']."</td> ";
                            echo "<td>".$row1['EmpName']."</td> ";
                            echo "<td>".$row1['ID']."</td> ";
                        }

        $MainType = $_POST['mt'];
                $query_retrieve_by_type = "Select * from Maintenance where Type = '$MainType'";
                $result_retrieve_by_type = mysqli_query($dbh, $query_retrieve_by_type);
                    while($row1 = mysqli_fetch_array($result_retrieve_by_type))
                        {
                            echo "<tr>";
                            echo "<td><a href='PastOperationsDet.php?operation_number=".$row1['ID']."' target='_blank'>Show</a></td> ";
                            echo "<td>".$row1['Type']."</td> ";
                            echo "<td>".$row1['MemName']."</td> ";
                            echo "<td>".$row1['EmpName']."</td> ";
                            echo "<td>".$row1['ID']."</td> ";
                        }

        $MemName = $_POST['mn'];
                $query_retrieve_by_member = "Select ID from Member where Name = '$MemName'";
                $result_retrieve_by_member = mysqli_query($dbh, $query_retrieve_by_member);
        $membID = mysqli_fetch_row($result_retrieve_by_member);
                $memb_id = $membID[0];
        $query_retrieve_by_membername = "Select * from Maintenance where MemberID = '$memb_id'";
                $result_retrieve_by_membername = mysqli_query($dbh, $query_retrieve_by_membername);
                    while($row1 = mysqli_fetch_array($result_retrieve_by_membername))
                        {
                            echo "<tr>";
                            echo "<td><a href='PastOperationsDet.php?operation_number=".$row1['ID']."' target='_blank'>Show</a></td> ";
                            echo "<td>".$row1['Type']."</td> ";
                            echo "<td>".$memb_id."</td> ";
                            echo "<td>".$row1['EmpName']."</td> ";
                            echo "<td>".$row1['ID']."</td> ";
                        }       

        $EmpName = $_POST['me'];
                $query_retrieve_by_employee = "Select ID from Employee where Name = '$EmpName'";
                $result_retrieve_by_employee = mysqli_query($dbh, $query_retrieve_by_employee);
        $emplID = mysqli_fetch_row($result_retrieve_by_employee);
                $empl_id = $emplID[0];
        $query_retrieve_by_emplid = "Select * from Maintenance where EmployeeID = '$empl_id'";
                $result_retrieve_by_emplid = mysqli_query($dbh, $query_retrieve_by_emplid);
                    while($row1 = mysqli_fetch_array($result_retrieve_by_emplid))
                        {
                            echo "<tr>";
                            echo "<td><a href='PastOperationsDet.php?operation_number=".$row1['ID']."' target='_blank'>Show</a></td> ";
                            echo "<td>".$row1['Type']."</td> ";
                            echo "<td>".$row1['MemName']."</td> ";
                            echo "<td>".$empl_id."</td> ";
                            echo "<td>".$row1['ID']."</td> ";
                        }
            echo "</table>";               
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:53:39.633

首先尝试简化您的代码

```
function check() {
    var dropdown = document.getElementById("OpType");
    var current_value = dropdown.options[dropdown.selectedIndex].value;
    var aIds = ['operationno', 'MainType', 'MemName', 'EmpName'];
    for(var i = aIds.length; i>=0; i-- ) {
        var ob = document.getElementById(aIds[i]);
        if( current_value == aIds[i] ) {
            ob.style.display = "block"
        }
        else  {
            ob.style.display = "none"
        }
    }

    ....

    <select id="OpType" onChange="check();">
    <option value="blank">Choose</option>
    <option value="operationno">Operation No</option>
    <option value="MainType">Operation Type</option>
    <option value="MemName">Maintenance Member</option>
    <option value="EmpName">Employee</option>
    </select>

    .... 
```

然后将“名称”属性附加到您的输入和选择字段。

然后尝试 print_r 你的 $_POST 数组来查看它的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:18:55.310

纳斯，

我冒昧地为这个案子做了一个小提琴。看看它，问你是否不明白。

我希望它有帮助。

亲切的问候，亚历克斯

在此链接[http://jsfiddle.net/QthB6/10/](http://jsfiddle.net/QthB6/10/)中，它以干净的方式设置，例如；

```
function blockify () {      // for style.display = "block"

} 

function unblockify () {    // for style.display = "none"

} 
```

# shell - 从网页中提取文本并修剪

> ID：15895874
> 
> 赞同：0
> 
> 时间：2013-04-09T07:28:54.727
> 
> 标签：shell, trim

```
wget --output-document=- http://www.tip.it/runescape/grand-exchange-centre 2>/dev/null \
| grep "The Grand Exchange updated" \ 
```

将输出如下内容：

```
<h4 id="gec_update_time">The Grand Exchange updated <span><b>1</b> days, <b>12</b> hours, <b>45</b> minutes and <b>1</b> seconds ago</span></h4> 
```

我的目标是修剪它，使其只输出：

```
1 days, 12 hours, 45 minutes, 1 seconds 
```

不太好用，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:40:13.003

您可以编写一个简短的 Ruby 脚本：

`gem install sanitize`

制作一个名为“cleaner.rb”的文件：

```
#!/usr/bin/env ruby -w
require 'rubygems'
require 'sanitize'

puts Sanitize.clean(gets).trim 
```

进而...

`wget --output-document=- http://www.tip.it/runescape/grand-exchange-centre 2>/dev/null \ | grep "The Grand Exchange updated" | ./cleaner.rb`

给你：“大交易所在 1 天 13 小时 0 分 56 秒前更新”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:49:24.693

如果可以选择使用 lynx，您可以免费获得：

```
$ lynx -dump http://www.tip.it/runescape/grand-exchange-centre | grep "The Grand Exchange updated"
The Grand Exchange updated 1 days, 19 hours, 8 minutes and 48 seconds ago 
```

如果需要，您可以从那里删除前导文本：

```
$ foo="$(lynx -dump http://www.tip.it/runescape/grand-exchange-centre | grep "The Grand Exchange updated")"
$ echo "${foo#*updated }"
1 days, 19 hours, 9 minutes and 8 seconds ago 
```

如果你绝对想使用 wget 并去掉标签，你可以使用这样的东西：

```
$ wget --output-document=- http://www.tip.it/runescape/grand-exchange-centre 2>/dev/null | grep "The Grand Exchange updated" | sed -e 's/<[^>]\+>//g' -e 's/The Grand Exchange updated //'
1 days, 19 hours, 17 minutes and 2 seconds ago 
```

第一个选项可能是更好的选择。

# java - Java中的并发缓存

> ID：15895875
> 
> 赞同：0
> 
> 时间：2013-04-09T07:28:58.280
> 
> 标签：java, caching, concurrency

假设我有多个线程访问一个地图（操作是：插入、检索、删除），并且我正在使用`ConcurrentHashMap`，我是否需要做其他事情或者 ConcurrentHashMap 是否“覆盖”了我？
是否还有可能发生的“坏事”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:15:44.480

因为我们不知道您任务的*所有场景*，根据您的描述，恕我直言`ConcurrentHashMap`就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:18:54.670

您还可以查看番石榴缓存。听起来非常适合您的场景。

[关联](https://code.google.com/p/guava-libraries/wiki/CachesExplained)

# windows - 如何使用powershell切换当前用户？

> ID：15895877
> 
> 赞同：7
> 
> 时间：2013-04-09T07:29:20.127
> 
> 标签：windows, powershell, switch-user

我的任务是创建新的 Windows 本地用户，登录，使用它，然后执行一些操作。创建新用户不是问题，但我不知道如何将当前用户切换到新用户。

我所做的是一段脚本，它使用新用户启动新的 powershell 窗口：

```
$secpasswd = ConvertTo-SecureString $password -AsPlainText -Force
$mycreds = New-Object System.Management.Automation.PSCredential ($config_name, $secpasswd)
Start-Process powershell.exe -Credential $mycreds -NoNewWindow 
```

是否可以在这个新窗口中开始执行其余的脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:23:07.397

简单的方法如下：

1.  创建一个脚本（我们称之为init.ps1）
2.  放入您要为用户调用的所有操作
3.  将此脚本的执行权限添加到 $config_name
4.  将最后一行更改为（-noexit 仅用于调试，没有它powershell 将在执行完成后关闭窗口）：

    > 启动进程 powershell.exe -Credential $mycreds -NoNewWindow -ArgumentList "-noexit -command FULL_PATH_TO_SCRIPT\init.ps1"

更困难的方法是安装 WinRM 并使用带有 Enter-PSSession 的命令（此链接末尾的示例：[http](http://technet.microsoft.com/en-us/library/hh849707.aspx) ://technet.microsoft.com/en-us/library/hh849707.aspx ）

# php - 为什么我的脚本没有得到我想要的价值

> ID：15895881
> 
> 赞同：1
> 
> 时间：2013-04-09T07:29:28.433
> 
> 标签：php, jquery

在我的网络中有一些表格内容，我给出了这样的静态值

```
<?php
include 'config/koneksi.php';
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Lay Out Penempatan Produk UHT Area Gudang Rak A-F</title>
<link rel="icon" href="http://localhost/wifi/images/RSUP.png">
<link rel="stylesheet" type="text/css" href="css/popup-window.css" media="screen">

<script type="text/javascript" src="js/popup-window.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>

<script>
    function setvalue(values) {
    document.getElementById('posisi').value = values;
}
</script>

<script type="text/javascript">
var htmlobjek;
$(document).ready(function(){
  //apabila terjadi event onchange terhadap object <select id=pid>
  $("#pid").change(function(){
    var pid = $("#pid").val();
     $.ajax({
        url: "ambilnamaproduk.php",
        data: "pid="+pid,
        cache: false,
        success: function(data){
        $("#pname").val(data);
        }
        });
    });
  });
</script>

<script>
var i = $("#myTD").val();
    alert(i);
</script>

<script type="text/javascript">
var htmlobjek;
 $(document).ready(function () {
var i = $("#myTD").val();
      $.ajax({
             url: "cek.php",
             type:'POST'
             data: "i="+i,
             cache: false,
             success: function (data) {
                 $("#cek").val(data);
             }

        });            
});
 var k = $("#cek").val();
if(k = "0"){
 $(document).ready(function () {
                 $(".data").css("background-color", "#00CC00");//green
                 });
                 }
    else{
 $(document).ready(function () {
                 $(".data").css("background-color", "#FF0000");//red
                 });
}                 
 </script>

</head>
<body>
<div>
<input id="cek" name="cek" type="text" />

<table width="1023" border="1">
  <tr>
    <th colspan="2">A1</th>
    <th colspan="2">A2</th>
    <th colspan="2">A3</th>
    <th colspan="2">A4</th>
    <th colspan="2">A5</th>
    <th colspan="2">A6</th>
    <th colspan="2">A7</th>
    <th colspan="2">A8</th>
    <th colspan="2">A9</th>
  </tr>
  <tr>
    <td class="data"> <div align="center"> <input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down', parent : this, width : '270px' });setvalue(this.value);" id="myTD" name="myTD" value="A1.4" /></div></td>
    <td class="data"><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A1.8" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.4" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A2.8" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.4" /></div></td>
    <td><div align="center"><input type="button" onclick="popup_window_show('#sample', { pos : 'tag-right-down',   parent : this, width : '270px' });setvalue(this.value);" value="A3.8" /></div></td>

    <td><div align="center">A4.4</div></td>
    <td><div align="center">A4.8</div></td>
    <td><div align="center">A5.4</div></td>
    <td><div align="center">A5.8</div></td>
    <td><div align="center">A6.4</div></td>
    <td><div align="center">A6.8</div></td>
    <td><div align="center">A7.4</div></td>
    <td><div align="center">A7.8</div></td>
    <td><div align="center">A8.4</div></td>
    <td><div align="center">A8.8</div></td>
    <td><div align="center">A9.4</div></td>
    <td><div align="center">A9.8</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.3</div></td>
    <td><div align="center">A1.7</div></td>
    <td><div align="center">A2.3</div></td>
    <td><div align="center">A2.7</div></td>
    <td><div align="center">A3.3</div></td>
    <td><div align="center">A3.7</div></td>
    <td><div align="center">A4.3</div></td>
    <td><div align="center">A4.7</div></td>
    <td><div align="center">A5.3</div></td>
    <td><div align="center">A5.7</div></td>
    <td><div align="center">A6.3</div></td>
    <td><div align="center">A6.7</div></td>
    <td><div align="center">A7.3</div></td>
    <td><div align="center">A7.7</div></td>
    <td><div align="center">A8.3</div></td>
    <td><div align="center">A8.7</div></td>
    <td><div align="center">A9.3</div></td>
    <td><div align="center">A9.7</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.2</div></td>
    <td><div align="center">A1.6</div></td>
    <td><div align="center">A2.2</div></td>
    <td><div align="center">A2.6</div></td>
    <td><div align="center">A3.2</div></td>
    <td><div align="center">A3.6</div></td>
    <td><div align="center">A4.2</div></td>
    <td><div align="center">A4.6</div></td>
    <td><div align="center">A5.2</div></td>
    <td><div align="center">A5.6</div></td>
    <td><div align="center">A6.2</div></td>
    <td><div align="center">A6.6</div></td>
    <td><div align="center">A7.2</div></td>
    <td><div align="center">A7.6</div></td>
    <td><div align="center">A8.2</div></td>
    <td><div align="center">A8.6</div></td>
    <td><div align="center">A9.2</div></td>
    <td><div align="center">A9.6</div></td>
  </tr>
  <tr>
    <td><div align="center">A1.1</div></td>
    <td><div align="center">A1.5</div></td>
    <td><div align="center">A2.1</div></td>
    <td><div align="center">A2.5</div></td>
    <td><div align="center">A3.1</div></td>
    <td><div align="center">A3.5</div></td>
    <td><div align="center">A4.1</div></td>
    <td><div align="center">A4.5</div></td>
    <td><div align="center">A5.1</div></td>
    <td><div align="center">A5.5</div></td>
    <td><div align="center">A6.1</div></td>
    <td><div align="center">A6.5</div></td>
    <td><div align="center">A7.1</div></td>
    <td><div align="center">A7.5</div></td>
    <td><div align="center">A8.1</div></td>
    <td><div align="center">A8.5</div></td>
    <td><div align="center">A9.1</div></td>
    <td><div align="center">A9.5</div></td>
  </tr>
</table>
</div>

<div   class="popup_window_css" id="sample"/>
<table class="popup_window_css"/>
<tr    class="popup_window_css"/>
<td    class="popup_window_css"/>
<div   class="popup_window_css_head"><img src="images/close.gif" alt="" width="9" height="9" />Aksi</div>
<div   class="popup_window_css_body"/><div style="border: 1px solid #808080; padding: 6px; background: #FFFFFF;"/>
<form method="post" action="aksi.php"/>
<table>
    <tr>
     <td> Werehouse Product </td>
     <td><select name="wp">
        <option selected>- Jenis Werehouse -</option>
        <?php
        $q = mssql_query("select WHSName from tblSPDMstWarehouseProduct Order by WHSID"); 

        while ($r = mssql_fetch_array($q)){
        echo "<option value=$r[WHSName]>$r[WHSName]</option>";
        }
        ?>
</select>
</td>
    <tr>
     <td> Posisi</td>
     <td> <input type='text' name='posisi' id='posisi' readonly/></td>
    </tr>
    <tr>
     <td> Product ID</td>
     <td> <select name="pid" id="pid">
        <option selected = "selected" >- Produk ID -</option>
            <?php
            $q = mssql_query("select ProductID from tblMstProduct Order by ProductID"); 

            while ($r = mssql_fetch_array($q)){
            echo "<option value=$r[ProductID]>$r[ProductID]</option>";
        }?>
        </select>
     </td>
    </tr>
    <tr>
     <td> Product Name</td>
     <td ><input type="text" id="pname" name="pname" size="65" readonly/>
     </td>
    </tr>
    <tr>
     <td> Production Date</td>
     <td > <input type='text' name="tgl" /></td>
    </tr>
    <tr>
        <td colspan='2' align='center'>
         <input type='submit' value= 'Save'> 
         <input type='button' value='view' onclick="javascript:ajax_post();"/>
         </td>
    </tr>
</table>
</from>
<div class="popup_window_css_foot">
</div>
</body>
</html> 
```

然后我使用 jquery 选择器来获取该值并使用 ajax 像这样执行该值

```
 var htmlobjek;
     $(document).ready(function () {
         var i = $("td").find("td.data").val();
          $.ajax({
                 url: "cek.php",
                 data: "i",
                 cache: false,
                 success: function (data) {
                     $("#cek").val(data);
                 }
             });     
     }); 
```

在 cek.php 中当然是这样的

```
<?php
$posisi =  $_POST[i];

$val = mssql_num_rows(mssql_query("SELECT*FROM tblTrnProduct WHERE Posisi = '$posisi'"));

echo"$val";
?> 
```

根据之前的答案，是的，它有效。但在单表中。我检查了我的 html 结构（没关系）。在我修改成复杂表后，同样的情况再次发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:36:33.347

试试这个，希望有用

```
 var j = $("td").find("td.data").val(); //make sure this will returning value 
 $.ajax({
      url: "cek.php",
      type:"POST",
      data: { i: j },  //Or try { i: $("td").find("td.data").val()},  
      cache: false,
      success: function (data) {
          $("#cek").val(data);
      }
 }); 
```

在php中

```
$posisi =  $_POST['i']; 
```

示例表单[jQuery 网站](http://api.jquery.com/jQuery.post/)

```
 $.post("test.php", { name: "John", time: "2pm" })
    .done(function(data) {
      alert("Data Loaded: " + data);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:32:59.297

在`<td class="data">`你忘记`</tr>`.

```
$(document).ready(function(){

    function setvalue(values) {
        $('#posisi').val(values);
    }

    var htmlobjek;
    //apabila terjadi event onchange terhadap object <select id=pid>
    $("#pid").change(function(){
        var pid = $("#pid").val();
        $.ajax({
            url: "ambilnamaproduk.php",
            data: "pid="+pid,
            cache: false,
            success: function(data){
                $("#pname").val(data);
            }
        });
    });

    var i = $("tr").find("td.data").attr('value');
    $.ajax({
         url: "cek.php",
         type:'POST'
         data: {"data": i},
         cache: false,
         success: 
         function (data) {
             $("#cek").val(data);
         }
    });

    var k = $("#cek").val();
    if(k = "0"){
        $(".data").css("background-color", "#00CC00");//green
    }
    else {
        $(".data").css("background-color", "#FF0000");//red
    }

}); 
```

在 cek.php 你的 'i' 应该是可用的`$_POST['data']`。

仅供参考：如果您有多个带有值的行，或者在这些表的行中有多个带有值的表，您应该编写不同的代码。请看[这个 jsFiddle](http://jsfiddle.net/v2exM/)。

但是，如果有很多值，就会有很多 ajax 调用。更好的解决方案是将值添加到隐藏输入中。请看[这个 jsFiddle](http://jsfiddle.net/FZSbH/)。

希望对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:32:14.967

首先尝试解决这个问题：

```
var i = $("td").find("td.data").val();
...
data: "i", 
```

到

```
var i = $("td").find(".data").attr('value');
...
data: "i="+i, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:32:29.123

试试这个=

```
$.ajax({
                 url: "cek.php",
                 data: { "data": i},
                 cache: false,
                 success: function (data) {
                     $("#cek").val(data);
                 }
             }); 
```

在 php 中，您可以执行以下操作：

```
$data = $_POST['data']; //you will get your value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:37:17.750

您的 javascript 函数有两个主要问题 1) 您的变量

```
data: "i", 
```

应该

```
data: i, 
```

2）其次，您没有提到 ajax 方法的类型，无论是 GET 还是 POST，在 AJAX 中，如果您不提及，默认类型将是 GET。因此，在您的情况下，您传递的类型是 GET 并尝试以 POST 的形式访问变量。所以将此行添加到您的 AJAX 调用中

```
type:'POST', 
```

# windows-phone-8 - 我如何知道 Windows phone 8 上是否启用了蓝牙？

> ID：15895884
> 
> 赞同：2
> 
> 时间：2013-04-09T07:29:48.243
> 
> 标签：windows-phone-8

我可以使用 ConnectionSettingsTask 访问蓝牙设置，但是我如何知道任务完成后是否启用了蓝牙？

我检查了 windows phone 市场，发现某些应用程序可以做到这一点，例如：

[http://www.windowsphone.com/en-us/store/app/quick-settings/2a2cbaa7-6d75-420c-ae14-2339618da43e](http://www.windowsphone.com/en-us/store/app/quick-settings/2a2cbaa7-6d75-420c-ae14-2339618da43e)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:50:51.797

这只是一个建议，这就是我正在使用的，我相信有更好的方法

```
 private async void FindPaired()
    {
        Windows.Networking.Proximity.PeerFinder.Start();
        try
        {
            var peers = await Windows.Networking.Proximity.PeerFinder.FindAllPeersAsync();
            bth = true; //boolean variable
        }
        catch (Exception ex)
        {
            if ((uint)ex.HResult == 0x8007048F)
            {
                bth = false;
            }

        }          
    } 
```

`0x8007048F`如果蓝牙关闭，则会显示错误。这对我有用，没有任何问题。欲了解更多信息，[请访问此链接](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007%28v=vs.105%29.aspx)

祝你好运朋友（：

# qt - 使用 opengl 图形系统时崩溃

> ID：15895885
> 
> 赞同：0
> 
> 时间：2013-04-09T07:29:49.910
> 
> 标签：qt, opengl, qml

我制作了一个在光栅模式下工作正常的 Qt/Qml 应用程序。

```
QApplication::setGraphicsSystem("raster"); 
```

但是，一旦我将其更改为 opengl，它就会崩溃并显示以下消息：

```
hijackWindow() context created for QmlApplicationViewer(0xbfce6e5c) 1 
QGLContext::makeCurrent(): Failed.
QGLFramebufferObject: Unable to resolve framebuffer object extensions - make sure there is a current context when creating the framebuffer object.
QGLWindowSurface: Failed to create valid FBO, falling back 
QGLPixelBuffer: Unable to find a context/format match - giving up.
QGLWindowSurface: Failed to create valid pixelbuffer, falling back 
QGLContext::makeCurrent(): Failed.
QGLWindowSurface: Using plain widget as window surface QGLWindowSurface(0x932b428) 
QGLContext::makeCurrent(): Failed.
QGLShader: could not create shader 
Vertex shader for simpleShaderProg (MainVertexShader & PositionOnlyVertexShader) failed to compile
QGLShader: could not create shader 
Fragment shader for simpleShaderProg (MainFragmentShader & ShockingPinkSrcFragmentShader) failed to compile
QGLShaderProgram: could not create shader program 
Errors linking simple shader: "" 
QGLShader: could not create shader 
Vertex shader for blitShaderProg (MainWithTexCoordsVertexShader & UntransformedPositionVertexShader) failed to compile
QGLShader: could not create shader 
Fragment shader for blitShaderProg (MainFragmentShader & ImageSrcFragmentShader) failed to compile
QGLShaderProgram: could not create shader program 
Errors linking blit shader: "" 
QGLContext::makeCurrent(): Failed.
QGLShader: could not create shader 
Warning: "" failed to compile! 
QGLContext::makeCurrent(): Failed.
QGLContext::makeCurrent(): Failed.
QGLShader: could not create shader 
Warning: "" failed to compile! 
QGLContext::makeCurrent(): Failed.
QGLContext::makeCurrent(): Failed.
QGLContext::makeCurrent(): Failed.
QGLContext::makeCurrent(): Failed.
The program has unexpectedly finished. 
```

平台：Ubuntu 12.04 - 32 位 - Intel i5 - Qt 4.8

* * *

编辑 1：

我尝试了一种使用[SO 上提到的这种方法](https://stackoverflow.com/questions/6493099/qt-rendering-using-opengl?rq=1)的方法。它确实有效，但即使使用如此强大的平台，我的表现也最差！？

有什么我想念的吗？有人可以列出平台上应确保的所有内容，以确保应用程序实际上在 opengl 模式下工作，而不是退回到本机模式。

例如。显卡/驱动程序/opengl 支持等？

* * *

编辑 2：

当我尝试运行 glxinfo 命令时，其中一行显示：`direct rendering: No` 这是我应该担心的事情吗？

* * *

编辑 3：

我试图安装一些驱动程序并注意到在我完成后`direct rendering: No`更改为 a 。`Yes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:12:42.670

听起来你没有为你的 GPU 安装 OpenGL 驱动程序，所以你回到了软件光栅化模式，这是*sloooooow*。的相关行`glxinfo`是`OpenGL renderer string`和`OpenGL version string`。*GLX*字符串是无趣的，因为 GLX 只是网络上 OpenGL 命令的传输，用于创建 OpenGL 上下文的 X11 协议扩展，并且大部分独立于 GPU 及其驱动程序。

的输出是`/usr/sbin/lspci | egrep 'VGA|Graphics'`什么？

在安装了 GPU 的系统上执行时，这`Direct Rendering: No`是一个警告信号，表明 OpenGL 驱动程序安装不完整。但是，您也可以通过远程连接使用 OpenGL，并且通过编写良好的程序，这甚至可以非常高效（不是通过拨号，而是在 LAN 内）。

# matlab - 错误：在编译时，“varargout”被确定为变量

> ID：15895887
> 
> 赞同：0
> 
> 时间：2013-04-09T07:29:54.947
> 
> 标签：matlab

完整的错误消息如下：

> 在编译时，“varargout”被确定为一个变量并且这个变量是未初始化的。“varargout”也是一个函数名，以前版本的 MATLAB 会调用该函数。但是，MATLAB 7 禁止在相同的上下文中使用相同的名称作为函数和变量。
> 
> C:\Programs\COMSOL43a\mli\mphglobal.p>mphglobal 中的错误（第 177 行）

函数调用如下所示：

```
 [param_values{1:length(params)}] = mphglobal(m, params); 
```

请注意，这`mphglobal(..)`是封闭源代码。

这有时有效，但在其他时候会给出错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:29:54.947

问题是有时`params`是空的。然后出现错误消息。

# c# - 在 ASP DataGrid 中添加 30 万行时出现内存不足异常

> ID：15895889
> 
> 赞同：0
> 
> 时间：2013-04-09T07:29:56.317
> 
> 标签：c#, asp.net, oracle, entity-framework

在我的 Web 应用程序中，我想在数据网格中显示一个表数据，因为我在执行时正在使用 Entity Framework 4.0，但我遇到了内存不足的异常。

ASP.NET 数据网格中是否有任何限制。我正在使用 Oracle 数据库。

下面是我的代码

```
 Entities obj = new Entities();
        GridView1.DataSource = obj.EQUIPMENTs.ToList();
        //Here i am getting exception
        GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:33:38.013

你必须检查你的内存消耗。使用[ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)轻松检查。如果您受到限制，请检查您加载到集合中的数据量。

请记住，`CLR`除了分配`RAM`的限制之外，还有`LIst<T>`大小限制，我明白了`obj.EQUIPMENTs.ToList()`。对于`List<T>`，限制是`2GB`（即使在 x64 上）。

如果其中之一为真（或两者兼有），则解决方案是重新架构您的代码。

例子：

您的用户几乎不可能一次需要所有数据量，也许您可​​以在不同的页面/标签/任何东西之间分割它......

如果您需要一些统计信息、一些聚合或一些计算，请在服务器上进行并仅传输结果。

# multithreading - 当所有线程内核对象句柄都关闭时，线程是否仍在运行

> ID：15895891
> 
> 赞同：0
> 
> 时间：2013-04-09T07:29:58.383
> 
> 标签：multithreading, winapi, object

我很好奇，当所有线程内核对象句柄都关闭时，线程是否还在 Win32 中运行？

所以我写了一个简单的测试代码，比如

```
#include <cstdio>
#include <Windows.h>
#include <process.h>

unsigned int __stdcall thread1_main(void* p)
{
    while(1)
        printf("thread1 is running!\n");
    return 0;
}

int main()
{
    HANDLE h = (HANDLE)_beginthreadex(NULL, 0, thread1_main, NULL, 0, NULL);
    CloseHandle(h);
    while(1)
        printf("main thread is running!\n");
    return 0;
} 
```

输出是

![在此处输入图像描述](https://i.stack.imgur.com/pfTXv.png)

看起来当所有句柄都关闭时，线程仍在运行。但是，msdn 说“只要至少存在一个对象句柄，一个对象就会保留在内存中”。这很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:55:44.363

Yes, the thread will run until it exits (by returning from its initial thread procedure), it is forcibly terminated (via `TerminateThread` or `_endthread(ex)`), or its parent process exits. Whether handles to the thread exist or not is irrelevant.

If you think about it, it could never work any other way - since you can wait on a thread handle to determine if it has exited or not, by definition the thread lifetime is unrelated to the lifetime of the handle.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T07:59:14.357

你引用的文字：

> 只要至少存在一个对象句柄，一个对象就会保留在内存中。

不适用于线程执行。线程执行直到完成。然后他们停止执行。线程句柄只是为您提供了一种机制来查询退出代码、等待发出信号、强制终止等。

因此，关闭线程的最终句柄不会终止线程。

# r - 线搜索在训练 ksvm prob.model 时失败

> ID：15895897
> 
> 赞同：15
> 
> 时间：2013-04-09T07:30:08.983
> 
> 标签：r, svm, kernlab

从[R 中使用 ksvm 的大型支持向量机的无效概率模型开始](https://stackoverflow.com/questions/15830718)：

我正在使用 R 中的 kernlab 包中的 ksvm 训练 SVM。我想使用概率模型，但在 sigmoid 拟合期间，我收到以下错误消息：

```
line search fails -1.833726 0.5772808 5.844462e-05 5.839508e-05 -1.795008e-08 
-1.794263e-08 -2.096847e-12 
```

发生这种情况时，结果值`prob.model(m)`是所有概率的向量，而不是拟合在这些概率上的 sigmoid 函数的预期参数。是什么导致了这个错误，我该如何防止它？搜索错误消息没有产生任何结果。

可重现的例子：

```
load(url('http://roelandvanbeek.nl/files/df.rdata'))
ksvm(label~value,df[1:1000],C=10,prob.model=TRUE)->m 
prob.model(m) # works as it should, prints a list containing one named list

# the below, non-working problem, unfortunately takes an hour due to the large
# sample size
ksvm(label~value,df,C=10,prob.model=TRUE)->m # line search fails  
prob.model(m) # just a vector of values 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-16T21:04:40.957

查看源代码，[这是引发该错误的行](https://github.com/cran/kernlab/blob/master/R/ksvm.R#L3092)。

它是关于`.probPlatt`使用牛顿法优化函数的方法，在这种情况下是普拉特的缩放比例。如果您检查[第 3007 行](https://github.com/cran/kernlab/blob/master/R/ksvm.R#L3007)，您会看到一些与该方法有关的参数。

其中一个参数`minstep`基本上是该方法应该不断尝试优化函数的最小数值步骤。你看，这正是第 3090 行错误的情况：`if (stepsize < minstep)`。因此，基本上，即使达到最小步长，该函数也不会收敛。

您可以尝试更改`minstep`为较低的值来规避它。Alexandros 甚至评论说这些参数可能应该在界面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-06T05:36:12.177

我不了解优化器的行为。如果达到最大迭代，没问题。但如果 step 低于 min_step 它调用`.SigmoidPredict`which 不返回`A`and `B`。我认为解决方案不是减少`min_step`，而是调用`.SigmoidPredict`，所以我将其注释掉。顺便说一句，我不明白他们为什么不使用 glm 来估计 A 和 B。

这是一个基于 cran 的最新源代码的存储库，其中对 SigmoidPredict 的调用已注释掉。

`devtools::install_github('elad663/kernlab')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T22:27:23.617

在我看来，问题是随机发生的。因此，我通过多次拟合 ksvm 模型直到它起作用来规避这个问题。

```
stop.crit = 1
while (stop.crit <= 10) {
    stop.crit = stop.crit + 1
    MOD = ksvm(...)
    tryCatch(PRED = predict(...), error = function(e) e)
    if (exists("PRED") == TRUE) stop.crit = 11
} 
```

# perl - 无法在 Windows 7 - 64 位 - 使用 DWIM Perl 上安装“PAR::Packer”Perl 模块

> ID：15895898
> 
> 赞同：1
> 
> 时间：2013-04-09T07:30:13.540
> 
> 标签：perl, windows-7, windows-7-x64, perl-module, par

我正在使用 MS-Windows 7 PC - 64 位。我正在使用“DWIM Perl for Windows”（[http://dwimperl.com/windows.html）——](http://dwimperl.com/windows.html)它是 Strawberry Perl 的衍生产品。

我正在尝试从 cpan 运行“安装 PAR::Packer”——但失败了。全文见下文。

我确实在这里看到了从 cpan“命令行”运行“look PAR::Packer”的建议。但是 - 这也失败了，并显示以下错误消息：

```
C:\Dwimperl\perl\bin\perl.exe encode_append.pl Dynamic.in par.exe Dynamic.pm
C:\Dwimperl\perl\bin\perl.exe file2c.pl -c 30000 par.exe C:\Dwimperl\perl\bin\pe rl514.dll C:\Dwimperl\perl\bin\libgcc_s_sjlj-1.dll C:./Program > boot_embedded_files.c
open input file 'C:./Program': No such file or directory at file2c.pl line 43.
dmake:  Error code 130, while making 'boot_embedded_files.c'
dmake:  'boot_embedded_files.c' removed.
dmake:  Error code 255, while making 'subdirs' 
```

这是“安装 PAR::Packer”的失败：

```
cpan>  install  PAR::Packer
Running install for module 'PAR::Packer'
Running make for R/RS/RSCHUPP/PAR-Packer-1.014.tar.gz
Checksum for C:\Dwimperl\cpan\sources\authors\id\R\RS\RSCHUPP\PAR-Packer-1.014.t
ar.gz ok
Scanning cache C:\Dwimperl\cpan\build for sizes
............................................................................DONE

  CPAN.pm: Building R/RS/RSCHUPP/PAR-Packer-1.014.tar.gz

Checking if your kit is complete...
Looks good
Prototype mismatch: sub main::prompt: none vs ($;$) at C:/Dwimperl/perl/lib/ExtU
tils/MakeMaker.pm line 219
Writing Makefile for par.exe
Writing MYMETA.yml and MYMETA.json
Writing Makefile for PAR::Packer
Writing MYMETA.yml and MYMETA.json
cp lib/App/Packer/PAR.pm blib\lib\App\Packer\PAR.pm
cp lib/PAR/Packer.pm blib\lib\PAR\Packer.pm
cp lib/PAR/Filter/Obfuscate.pm blib\lib\PAR\Filter\Obfuscate.pm
cp lib/PAR/Filter/PodStrip.pm blib\lib\PAR\Filter\PodStrip.pm
cp lib/PAR/StrippedPARL/Base.pm blib\lib\PAR\StrippedPARL\Base.pm
cp lib/PAR/Filter.pm blib\lib\PAR\Filter.pm
cp lib/PAR/Filter/PatchContent.pm blib\lib\PAR\Filter\PatchContent.pm
cp lib/PAR/Filter/Bytecode.pm blib\lib\PAR\Filter\Bytecode.pm
cp lib/pp.pm blib\lib\pp.pm
cp lib/PAR/Filter/Bleach.pm blib\lib\PAR\Filter\Bleach.pm
C:\Dwimperl\perl\bin\perl.exe par_pl2c.pl my_par_pl < ..\script\par.pl > my_par_
pl.c
C:\Dwimperl\perl\bin\perl.exe sha1.c.PL
gcc -c -s -O2 -DWIN32  -DPERL_TEXTMODE_SCRIPTS -DUSE_SITECUSTOMIZE -DPERL_IMPLIC
IT_CONTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields  -I"C:\Dwimpe
rl\perl\lib\CORE"  -DPARL_EXE=\"parl.exe\" -s -O2 main.c
main.c: In function 'main':
main.c:121: warning: assignment discards qualifiers from pointer target type
rem
windres -i winres\pp.rc -o ppresource.coff --input-format=rc --output-format=cof
f --target=pe-i386
g++ main.o ppresource.coff -s   -s -L"C:\Dwimperl\perl\lib\CORE" -L"C:\Dwimperl\
c\lib"  C:\Dwimperl\perl\lib\CORE\libperl514.a C:\Dwimperl\c\i686-w64-mingw32\li
b\libmoldname.a C:\Dwimperl\c\i686-w64-mingw32\lib\libkernel32.a C:\Dwimperl\c\i
686-w64-mingw32\lib\libuser32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libgdi32.a C:
\Dwimperl\c\i686-w64-mingw32\lib\libwinspool.a C:\Dwimperl\c\i686-w64-mingw32\li
b\libcomdlg32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libadvapi32.a C:\Dwimperl\c\i
686-w64-mingw32\lib\libshell32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libole32.a C
:\Dwimperl\c\i686-w64-mingw32\lib\liboleaut32.a C:\Dwimperl\c\i686-w64-mingw32\l
ib\libnetapi32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libuuid.a C:\Dwimperl\c\i686
-w64-mingw32\lib\libws2_32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libmpr.a C:\Dwim
perl\c\i686-w64-mingw32\lib\libwinmm.a C:\Dwimperl\c\i686-w64-mingw32\lib\libver
sion.a C:\Dwimperl\c\i686-w64-mingw32\lib\libodbc32.a C:\Dwimperl\c\i686-w64-min
gw32\lib\libodbccp32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libcomctl32.a -o par.e
xe
rem
C:\Dwimperl\perl\bin\perl.exe encode_append.pl Dynamic.in par.exe Dynamic.pm
C:\Dwimperl\perl\bin\perl.exe file2c.pl -c 30000 par.exe C:\Dwimperl\perl\bin\pe
rl514.dll C:\Dwimperl\perl\bin\libgcc_s_sjlj-1.dll C:./Program > boot_embedded_f
iles.c
open input file 'C:./Program': No such file or directory at file2c.pl line 43.
dmake:  Error code 130, while making 'boot_embedded_files.c'
dmake:  'boot_embedded_files.c' removed.
dmake.EXE:  Error code 255, while making 'subdirs'
  RSCHUPP/PAR-Packer-1.014.tar.gz
  C:\Dwimperl\c\bin\dmake.EXE -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible
Failed during this command:
 RSCHUPP/PAR-Packer-1.014.tar.gz              : make NO 
```

这是从 cpan shell 运行“look PAR::Packer”后得到的结果：

```
cpan>  look PAR::Packer
Running look for module 'PAR::Packer'

Trying to open a subshell in the build directory...
Working directory is C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j>perl Makefile.PL
Prototype mismatch: sub main::prompt: none vs ($;$) at C:/Dwimperl/perl/lib/ExtU
tils/MakeMaker.pm line 219
Writing Makefile for par.exe
Writing MYMETA.yml and MYMETA.json
Writing Makefile for PAR::Packer
Writing MYMETA.yml and MYMETA.json 
```

在这里，我也尝试自己运行“DMAKE”：

```
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j>dmake -f Makefile install
Skip blib\lib\App\Packer\PAR.pm (unchanged)
Skip blib\lib\PAR\Packer.pm (unchanged)
Skip blib\lib\PAR\Filter\Obfuscate.pm (unchanged)
Skip blib\lib\PAR\Filter\PodStrip.pm (unchanged)
Skip blib\lib\PAR\StrippedPARL\Base.pm (unchanged)
Skip blib\lib\PAR\Filter.pm (unchanged)
Skip blib\lib\PAR\Filter\PatchContent.pm (unchanged)
Skip blib\lib\PAR\Filter\Bytecode.pm (unchanged)
Skip blib\lib\pp.pm (unchanged)
Skip blib\lib\PAR\Filter\Bleach.pm (unchanged)
gcc -c -s -O2 -DWIN32  -DPERL_TEXTMODE_SCRIPTS -DUSE_SITECUSTOMIZE -DPERL_IMPLIC
IT_CONTEXT -DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields  -I"C:\Dwimpe
rl\perl\lib\CORE"  -DPARL_EXE=\"parl.exe\" -s -O2 main.c
main.c: In function 'main':
main.c:121: warning: assignment discards qualifiers from pointer target type
g++ main.o ppresource.coff -s   -s -L"C:\Dwimperl\perl\lib\CORE" -L"C:\Dwimperl\
c\lib"  C:\Dwimperl\perl\lib\CORE\libperl514.a C:\Dwimperl\c\i686-w64-mingw32\li
b\libmoldname.a C:\Dwimperl\c\i686-w64-mingw32\lib\libkernel32.a C:\Dwimperl\c\i
686-w64-mingw32\lib\libuser32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libgdi32.a C:
\Dwimperl\c\i686-w64-mingw32\lib\libwinspool.a C:\Dwimperl\c\i686-w64-mingw32\li
b\libcomdlg32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libadvapi32.a C:\Dwimperl\c\i
686-w64-mingw32\lib\libshell32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libole32.a C
:\Dwimperl\c\i686-w64-mingw32\lib\liboleaut32.a C:\Dwimperl\c\i686-w64-mingw32\l
ib\libnetapi32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libuuid.a C:\Dwimperl\c\i686
-w64-mingw32\lib\libws2_32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libmpr.a C:\Dwim
perl\c\i686-w64-mingw32\lib\libwinmm.a C:\Dwimperl\c\i686-w64-mingw32\lib\libver
sion.a C:\Dwimperl\c\i686-w64-mingw32\lib\libodbc32.a C:\Dwimperl\c\i686-w64-min
gw32\lib\libodbccp32.a C:\Dwimperl\c\i686-w64-mingw32\lib\libcomctl32.a -o par.e
xe
rem
C:\Dwimperl\perl\bin\perl.exe encode_append.pl Dynamic.in par.exe Dynamic.pm
C:\Dwimperl\perl\bin\perl.exe file2c.pl -c 30000 par.exe C:\Dwimperl\perl\bin\pe
rl514.dll C:\Dwimperl\perl\bin\libgcc_s_sjlj-1.dll C:./Program > boot_embedded_f
iles.c
open input file 'C:./Program': No such file or directory at file2c.pl line 43.
dmake:  Error code 130, while making 'boot_embedded_files.c'
dmake:  'boot_embedded_files.c' removed.
dmake:  Error code 255, while making 'subdirs'

C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j>
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j>
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j>gvim Makefile.PL
'gvim' is not recognized as an internal or external command,
operable program or batch file.

C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j> Makefile.PL

C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:09:29.733

我刚刚在 Strawberry Perl 5.16.2、Windows 7 64 位上测试安装了这个模块，它对我有用。

您拥有的 Perl 版本相当旧。从那时起，Strawberry 对编译器工具链进行了更新，而您遇到的故障发生在编译过程中（丢失或损坏了它需要的文件之一的路径）。

另外，我不知道 DWIM Perl 是否在做任何非标准的事情，可能会搞砸。

我建议升级到最新的 Perl，也可能切换到标准的 Strawberry Perl。除了一大堆预安装的模块之外，DWIM 并没有真正为您提供任何东西，安装您需要的模块应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:10:16.467

我删除了我的 DWIM Perl。

我安装了 Strawberry Perl 5.16.3.1 - 现在我确实成功地在我的 Windows 7 64 位上安装了 PAR-Packer。

现在我在安装 Padre 时遇到问题……但那是另一回事了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T15:19:51.287

我有同样的问题。以下解决方法对我有用：转到外壳并输入：

```
C:\> cpan
cpan> look PAR::Packer
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j> perl Makefile.pl
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j> dmake -f Makefile install 
```

保持外壳打开并遵循路径（可能会有所不同，具体取决于您的系统）：

```
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j\myldr 
```

在那里你会找到一个名为“Makefile”的文件（没有 .pl 结尾的文件）。在文件中搜索字符串“C:./Program”（接近末尾）并删除此部分。终于跑了。

```
C:\Dwimperl\cpan\build\PAR-Packer-1.014-81Pw9j> dmake -f Makefile install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T05:46:12.070

当尝试在 64 位 Strawberry Perl 5.20 上使用 cpan 安装 PAR::Packer 时，我遇到了同样的问题，但发现修复 myldr 子目录中 Makefile 的第 1010 行以添加 $(NOOP) 如下允许 dmake 成功完成，然后我就可以测试和安装了。

```
...
# dummy targets to satisfy ExtUtils::MakeMaker
dynamic::
   $(NOOP)
... 
```

之后，我发现 Tk 已安装，因此您可以拥有 tkpp，这非常好。这取决于 tkpod，这是一个在窗口中 perldoc 的非常好的实用程序。但它需要 Tk::Pod，它不会安装干净，因为 podtree.t 测试 GPF 之一。在强制安装看似安全的 Tk::Pod 之后，tkpod 和 tkpp 都运行良好。

# c++ - /bin/sh: 1: gdk-pixbuf-config: 未找到

> ID：15895900
> 
> 赞同：1
> 
> 时间：2013-04-09T07:30:18.340
> 
> 标签：c++, linux, ubuntu, gdkpixbuf

我正在尝试编译基于 gdk-pixbuf 的 C/C++ 程序，在编译过程中出现错误“/bin/sh: 1: gdk-pixbuf-config: not found”

我目前收到以下包裹，请指导，我缺少什么？我正在使用 Ubuntu 12.04，32 位

```
dpkg -l | grep libgdk
ii  libgdk-pixbuf2-ruby                    1.0.3-1build1                                       Transitional package for ruby-gdk-pixbuf2
ii  libgdk-pixbuf2-ruby1.8                 1.0.3-1build1                                       Transitional package for ruby-gdk-pixbuf2
ii  libgdk-pixbuf2-ruby1.8-dbg             1.0.3-1build1                                       Transitional package for ruby-gdk-pixbuf2-dbg
ii  libgdk-pixbuf2.0-0                     2.26.1-1                                            GDK Pixbuf library
ii  libgdk-pixbuf2.0-common                2.26.1-1                                            GDK Pixbuf library - data files
ii  libgdk-pixbuf2.0-dev                   2.26.1-1                                            GDK Pixbuf library (development files)
ii  libgdk-pixbuf2.0-doc                   2.26.1-1                                            GDK Pixbuf library (documentation)
ii  libgdkcutter-pixbuf-dev                1.1.7-1.1                                           Cutter Gdk-pixbuf support (Development files)
ii  libgdkcutter-pixbuf0                   1.1.7-1.1                                           Cutter Gdk-pixbuf support (Shared library) 
```

# c# - 异步回发后如何保持对同一控件的关注？

> ID：15895903
> 
> 赞同：8
> 
> 时间：2013-04-09T07:30:31.777
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有 3 个文本框，一个在更新面板中，它每 4 秒刷新一次。在刷新期间，不在更新面板中的控件也会失去焦点。我想继续关注这些控件。

这是我的代码：

```
<asp:UpdatePanel ID="upnlChat" runat="server">
    <ContentTemplate >
        <asp:TextBox ID="txtChatBox" ReadOnly="true" TextMode="MultiLine" 
            CssClass="mymultitextboxclass" runat="server"></asp:TextBox>
     </ContentTemplate>
      <Triggers>
      <asp:AsyncPostBackTrigger ControlID="timerChat" />

      </Triggers>
    </asp:UpdatePanel>
    <asp:Timer ID="timerChat" Interval="4000" runat="server" ontick="timerChat_Tick" ></asp:Timer>
        <table>
        <tr><td>User: </td><td colspan="2"><asp:TextBox ID="txtUser" runat="server" ></asp:TextBox><br /></td>
        <td>
            <asp:RequiredFieldValidator ID="RequiredUserName" runat="server" ErrorMessage="Username Required" ControlToValidate="txtUser" ></asp:RequiredFieldValidator> </td></tr>
        <tr><td>Message: </td><td><asp:TextBox ID="txtMsg" CssClass="mymsg" TextMode="MultiLine" onkeydown="if (event.keyCode == 13) { btnSend.focus(); this.form.submit();  }"  runat="server"></asp:TextBox></td>
        <td colspan="2"><asp:Button ID="btnSend" runat="server" onclick="btnSend_Click" 
                OnClientClick="scroll()" Text="send" />
        </td></tr>        
        </table> 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-09T20:20:08.590

这是使用 jQuery 的 @Darshan 脚本的略微修改版本。我喜欢他的解决方案，因为这 1 个脚本将适用于所有 UpdatePanel，因此您不必专门为每个 UpdatePanel 编写代码。

我的修改是：

*   使用 jQuery
*   执行空检查
*   不污染全局命名空间
*   **编辑：** Tabbing 与带有自动回发的 TextBoxes 一样工作。

* * *

```
/* Retain element focus after UpdatePanel postback
***************************************************/
jQuery(function ($) {
    var focusedElementId = "";
    var prm = Sys.WebForms.PageRequestManager.getInstance();

    prm.add_beginRequest(function (source, args) {
        var fe = document.activeElement;
        if (fe != null) {
            focusedElementId = fe.id;
        } else {
            focusedElementId = "";
        }
    });

    prm.add_endRequest(function (source, args) {
        if (focusedElementId != "") {
            $("#" + focusedElementId).focus();
        }
    });
}); 
```

* * *

## 选择.jQuery

此版本将与 Chosen jQuery 插件一起使用。

```
/* Retain element focus after UpdatePanel postback
***************************************************/
jQuery(function ($) {
    var focusedElementSelector = "";
    var prm = Sys.WebForms.PageRequestManager.getInstance();

    prm.add_beginRequest(function (source, args) {
        var fe = document.activeElement;
        focusedElementSelector = "";

        if (fe != null) {
            if (fe.id) {
                focusedElementSelector = "#" + fe.id;
            } else {
                // Handle Chosen Js Plugin
                var $chzn = $(fe).closest('.chosen-container[id]');
                if ($chzn.size() > 0) {
                    focusedElementSelector = '#' + $chzn.attr('id') + ' input[type=text]';
                }
            }
        }
    });

    prm.add_endRequest(function (source, args) {
        if (focusedElementSelector) {
            $(focusedElementSelector).focus();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T19:23:50.137

[http://www.codeproject.com/Tips/674414/Set-Focus-on-the-Same-Control-after-Postback-using](http://www.codeproject.com/Tips/674414/Set-Focus-on-the-Same-Control-after-Postback-using)

检查这个，这可以帮助你理解这个概念

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:41:06.470

Ohh Ok 问题是 ASP.NET Javascript 方法“WebForm_AutoFocus(...)”在部分页面更新后没有执行，所以你不能在 codebhind 类中使用内置函数 SetFocus(clientID)。我的解决方案注册了两个事件处理程序，一个用于 beginRequest，一个用于 endRequest。在事件方法“beginRequest”中，我保存了客户端控件 ID。在 endRequest 方法中，我使用此值来设置焦点，例如：代码：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="shipper.aspx.cs" Inherits="shipper" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>Restore Focus after background postback</title>
    <script language="javascript">
      var postbackElement = null;
      function RestoreFocus(source, args)
      {
        document.getElementById(postbackElement.id).focus();
      }
      function SavePostbackElement(source, args)
      {
        postbackElement = args.get_postBackElement();
      }
      function AddRequestHandler()
      {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(RestoreFocus);
        prm.add_beginRequest(SavePostbackElement);
      }
    </script>
</head>
<body onload="AddRequestHandler()">
    <form id="form1" runat="server">
    <asp:ScriptManager ID="sm" runat="server"></asp:ScriptManager>
    <div>
        <asp:UpdatePanel runat="server" ID="updPanel1">
          <ContentTemplate>
            <asp:Panel ID="panel1" runat="server">
                <asp:RadioButtonList ID="rbList" runat="server" AutoPostBack="true">
                  <asp:ListItem Text="Rb 1" Value="1"></asp:ListItem>
                  <asp:ListItem Text="Rb 2" Value="2"></asp:ListItem>
                  <asp:ListItem Text="Rb 3" Value="3"></asp:ListItem>
                  <asp:ListItem Text="Rb 4" Value="4"></asp:ListItem>
                  <asp:ListItem Text="Rb 5" Value="5"></asp:ListItem>
                </asp:RadioButtonList><br />
                <asp:DropDownList ID="ddSample" runat="server" AutoPostBack="true">
                  <asp:ListItem Text="Item 1" Value="1"></asp:ListItem>
                  <asp:ListItem Text="Item 2" Value="2"></asp:ListItem>
                  <asp:ListItem Text="Item 3" Value="3"></asp:ListItem>
                </asp:DropDownList>
            </asp:Panel>
          </ContentTemplate>
        </asp:UpdatePanel>
      </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:19:35.543

在 timerChat_Tick 事件上。这样做....

```
txtChatBox.Focus(); 
```

# iphone - 将按钮转换为整数

> ID：15895913
> 
> 赞同：3
> 
> 时间：2013-04-09T07:30:53.787
> 
> 标签：iphone

我有两个按钮，我拿了一个按钮标签，想与另一个按钮进行比较，像这样，

```
if ([sender tag] != ((UIButton*)[self.view viewWithTag:[self number]])) 
```

那么警告是 NSInteger 和指针类型之间的比较是不可能的。

所以，请帮助我如何将指针转换为整数，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:39:38.127

使用波纹管代码而不是您的代码...

在这里你露营所以你`NSInteger`有`UIControl`错误..现在试试这个代码....

```
if ([sender tag] != ((UIButton*)[self.view viewWithTag:[self number]]).tag){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:36:23.620

做就是了

```
if ([sender tag] != [self number]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:39:11.897

> if ([sender tag] != ((UIButton*)[self.view viewWithTag:[self number]]))

你在做错事。尝试将**标记**（整数）与`UIButton`（视图）进行比较。**怎么可能？**

如果你想比较 UIButton 的标签，那么你只需要：

```
yourButton1.tag == yourButton2.tag 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T07:42:22.800

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UIButton *btnEdit=(UIButton*)[cell viewWithTag:10];
    [btnEdit addTarget:self action:@selector(NextTapped:) forControlEvents:UIControlEventTouchUpInside];
}

-(void)NextTapped:(UIButton*)sender{
    NSString *str=[sender titleForState:UIControlStateDisabled];
    NSArray *ar=[str componentsSeparatedByString:@" "];
    NSIndexPath *indexPath=[NSIndexPath indexPathForRow:[[ar objectAtIndex:1] intValue] inSection:[[ar objectAtIndex:0] intValue]];
} 
```

从此代码中，您可以访问比较使用以访问数据。

# ruby-on-rails - 保持子对象在 field_for 中排序

> ID：15895919
> 
> 赞同：0
> 
> 时间：2013-04-09T07:31:09.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, mongoid3

我有这样的代码：

```
user.posts.size #=> 5 already saved
user.posts.new(title:"foo")
user.posts.new(title:"bar")
user.posts.sort_by! { |e| e.title } #=> sort correclty
user.posts #=> sorted but with the saved on the top, the new one at the bottom 
```

我使用排序，`field_for`但显然它仍然未排序。

使用：Rails 3.2.11 和 Mongoid 3.0.23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:39:27.167

我不确定为什么会这样，但我认为这会奏效

```
# controller
user.posts.build(title:"foo")
user.posts.build(title:"bar")

@posts = user.posts.sort_by(&:title)

# view
= f.fields_for :posts, @posts do |post_form|
  ... 
```

# jquery - 关于 Drupal 和 Ajax 的问题

> ID：15895923
> 
> 赞同：0
> 
> 时间：2013-04-09T07:31:17.497
> 
> 标签：jquery, ajax, drupal

我有一个自定义模块，这个模块生成一个带有一些按钮的表格。单击按钮时，我使用 Ajax 加载一个表单并将其显示在 div 中。例如，调用该函数的挂钩菜单​​是 /myapp/get_form。

当我必须保存新生成的 div 的一些数据时，问题就来了。我创建了那个 div 来用 ajax 保存数据（$form['submit'] = array('#ajax' => array(...))），但是这个新表单不使用 ajax 保存数据，这个表单将数据发布到 /myapp/get_form，但这不是我需要的行为。

所以我有2个问题。

1.  如何以这种新形式发布使用 ajax 生成的数据？
2.  可以使用 JQuery 禁用提交并使用 Ajax+JSON 来保存数据（节点）吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:26:06.687

您可以使用 jQuery .submit 方法来防止默认提交行为并通过 $.post 处理它

请注意，某些字段/模块和#ajax 内容需要包含在整个页面加载中的其他 javascript。

要获取它们，您应该使用类似 $js_list = drupal_add_js() 的方式检索它们，然后使用 jquery 添加到当前页面（例如，将它们作为标签添加到当前页面的头部。）

加载脚本后，调用 Drupal.attachBeahviors() 将新加载的 javascript 功能附加到新表单。

# c# - 基本控制器的最佳实践

> ID：15895925
> 
> 赞同：3
> 
> 时间：2013-04-09T07:31:23.860
> 
> 标签：c#, asp.net-mvc-4

在过去，当我是一名 asp.net webforms 开发人员时，我曾经创建一个基本页面，并在其中放置将在应用程序中使用的常用方法和属性，然后每个页面都将从该页面继承。

我想知道如何为 mvc 4 做到这一点，是否有任何指导方针，或者只是创建一个基本控制器类并从该类继承所有控制器？

您通常在基本控制器类中放置什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:59:31.510

我避免使用基本控制器（继承）来解决这个问题，因为它有点味道。您确定您的控制器需要所有这些常用方法和属性吗？至少某些功能可以作为 Controller 类型的扩展方法来实现。

此外，其他功能可能更适合作为注入控制器的服务。对于需要一些（请求）状态的常用方法，我更喜欢服务方法。

也有可能至少某些功能属于操作过滤器（检查权限、设置一些用户配置文件、处理异常；）等）。

作为一个经验法则，我尽量避免在我的控制器中使用继承。控制器应该尽可能简单，并且我需要任何实用程序行为，我尝试以上述方式之一封装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:35:39.063

这样做的练习并不多。许多来自多年网络表单的人都这么认为。

在我们相当大的应用程序中，我们创建了一个`BaseController`但并没有真正看到将常见行为封装到其中的方法。

**但是**，最终我们确实通过覆盖*基本控制器中的*[OnException](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onexception%28v=vs.108%29.aspx)方法放置了一些通用代码来记录异常。

 *所以我认为你应该去：*如果你看到你可以封装的代码，那就去做吧*。您可以在基本控制器中创建私有方法，**但**不能在基本控制器中创建通用操作方法。您只需将代码封装在受保护的方法中，然后在具体控制器中需要一个单独的 Action 方法。*

# php - 添加标签并在新窗口/标签中打开

> ID：15895931
> 
> 赞同：1
> 
> 时间：2013-04-09T07:32:06.787
> 
> 标签：php, tabs, customization, mediawiki

我已经搜索了在页面和讨论旁边添加标签的可能性，并在下面找到。 [使用以下代码链接到帖子](https://stackoverflow.com/questions/12192641/how-to-add-custom-tab-button-with-external-link/15895055#15895055)

```
$wgHooks['SkinTemplateNavigation'][] = 'replaceTabs';
function replaceTabs( $skin, &$links) {  
    $links['namespaces']['name_of_tab'] = array(
            'class' => false or 'selected', // if the tab should be highlighted
            'text' => 'text_of_tab', // what the tab says
            'href' => 'url_to_point_to', // where it links to
            'context' => 'main',
    );
    return true;
} 
```

它工作得很好，但窗口是在同一个窗口中打开的。我已经添加了，`$wgExternalLinkTarget = '_blank';`但它似乎不适用于这些链接（适用于我目前在我的 wiki 上拥有的其他外部链接）。

有没有办法强制标签链接在新窗口或标签中打开？

*我正在使用：*
*MediaWiki 版本：1.19.1*
*PHP：5.3.6 (apache2handler)*
*MySQL：5.5.16*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T18:01:01.767

如果不修改您正在使用的皮肤的 PHP 代码（例如[`skins/Vector.php`](https://github.com/wikimedia/mediawiki-core/blob/master/skins/Vector.php)Vector 皮肤），我认为这是不可能的。如果您确实想这样做，那么令人惊讶的是，呈现导航选项卡的代码在该`renderNavigation()`方法中。或者，您可以在`key`将选项卡设置为.`title``accesskey``execute()`

如果你不喜欢破解你的皮肤的想法，一个更简单的解决方案可能是使用 JavaScript。[您的站点 JavaScript](http://www.mediawiki.org/wiki/Manual%3aInterface/JavaScript)中的以下代码（`name_of_tab`替换为您的自定义选项卡的名称）应该这样做：

```
jQuery( function ( $ ) {
    // run this code after page has loaded:
    $( '#ca-name_of_tab a' ).attr( 'target', '_blank' );
} ); 
```

当然，这对禁用 JavaScript 的用户无济于事。还有一个小窗口，有人可以在链接加载后但在 JavaScript 有机会运行之前单击链接。

原则上，可以通过使用 CSS 隐藏选项卡直到 JS 代码运行来避免最后一个问题。然而，确保选项卡在开始时*始终是隐藏的，但**只有*在启用 JS*且不*破坏皮肤的情况下，无论 MediaWiki 是否配置为执行异步脚本加载，都会变得......非常棘手。事实上，我放弃了试图弄清楚。也许编写一个自定义 ResourceLoader 模块可能会做到这一点，但我已经在这方面花费了太多时间。

# java - 打印斐波那契数

> ID：15895936
> 
> 赞同：0
> 
> 时间：2013-04-09T07:32:16.210
> 
> 标签：java, numbers, fibonacci

我的程序应该根据用户输入的内容输出一个斐波那契数（例如，如果他们输入 7，程序将输出 13）。这部分有效。我遇到问题的部分是程序检查以确保用户输入的数字是正数且小于或等于 70。它应该再次要求用户输入，但它输出“Fibonacci #-1为 0" 并停止。这是我的代码：

```
import java.util.Scanner;

public class scalvert_Fibonacci
{
public static void main ( String args[] ) 
{
    Scanner input = new Scanner ( System.in );

    int sum = 0;
    int num;
    int f1 = 0, f2 = 0, f3 = 1;

    System.out.print("Which Fibonacci number would you like? ");
    num = input.nextInt(); 

    if (num == 0)
    return 0;

    else if (num == 1)
    return 1;

    while (num < 0 || num > 70)
    {
        System.out.print("Which Fibonacci number would you like? ");
        num = input.nextInt(); 
    }

        for(int i = 1; i <= num; i++)
        {
                f1 = f2;
                f2 = f3;
                f3 = f1 + f2;
        }
        System.out.printf("Fibonacci #%d is %d\n",num, f2);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:19:49.647

我想到了。

```
while(num < 0 || num > 70)
    {
        System.out.print("Which Fibonacci number would you like? ");
        num = input.nextInt(); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:46:02.733

using this might solve your problem

```
if(num<0 || num>70)
{
    //ask a number again
}
else
{
    //calculate
}

or use this

if( 0 < num < 71 )
{
    //calculate
}
else
{
     //ask for a valid number
} 
```

# asp.net-mvc - asp.net MVC3 LINQ 表达式

> ID：15895938
> 
> 赞同：0
> 
> 时间：2013-04-09T07:32:21.443
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

我曾经创建一个自定义角色提供者。

我的项目 - asp.net MVC3，实体框架 4

GetRolesForUser 方法存在问题。

自定义 RoleProvider - GetRolesForUser 方法

```
 // The user to return a list of roles for.
    public override string[] GetRolesForUser(string userAccount)
    {
        var userId = userRepository.GetUser(userAccount).UserId;

        var roleIds = from ur in usersInRoleRepository.UsersInRoles
                    where ur.UserId == userId
                    select ur.RoleId;

        var roleNames = from r in roleRepository.Roles
                        where roleIds.Contains(r.RoleId)
                        select r.RoleName;

        if (roleNames != null)
        {
            **return roleNames.ToArray();  // here Error**
        }
        else
        {
            return new string[0];
        }
    } 
```

错误消息：指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。

我不知道这段代码是否有问题。

请帮忙。

用户实体

```
public class User
{
    public Guid UserId { get; set; }
    public string UserAccount { get; set; }
    public string Password { get; set; }
    public string UserEmail { get; set; }
    public DateTime JoinDate { get; set; }
    public DateTime LoginDate { get; set; }
} 
```

角色实体

```
public class Role
{
    public Guid RoleId { get; set; }
    public string RoleName { get; set; }
    public DateTime CreateDate { get; set; }
} 
```

UsersInRole 实体

```
public class UsersInRole
{
    public Guid UserId { get; set; }
    public Guid RoleId { get; set; }
    public DateTime SetDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:36:51.543

您不能在单个查询中进行与不同上下文相关联的查询。尝试通过将其转换为数组来更改您的 roleIds linq 代码以避免延迟加载：

```
var roleIds = (from ur in usersInRoleRepository.UsersInRoles
              where ur.UserId == userId
              select ur.RoleId).ToArray(); 
```

# java - 我正在编写合并排序程序，我收到以下错误：

> ID：15895945
> 
> 赞同：-3
> 
> 时间：2013-04-09T07:32:32.050
> 
> 标签：java, algorithm, sorting, merge

请考虑以下代码：

```
public class MergeSort {

public static void main(String[] args) {

            int[] A = new int[10];

                // Printing the Initial Arrays
                     System.out.println("Array Elements before Sorting are as follows:");

                       for(int i = 0;i < A.length;i++){

                        System.out.println(A[i] + " ");
                                                      }

                        // Call the MergeSort Method here

                        // Printing Sorted Array here

                    System.out.println("Sorted Array are as follows:");

                    //for(int j = 0;j < result.length;i++){

                    //System.out.println(result[i] + " ");
                    //}

    public static int[] merge_sort(int[] B){

        if(B.length <=1){

            return B;

        }

        int midpoint = B.length/2;

        int[] left = new int[midpoint];

        int[] right;

        if(B.length % 2 == 0){

            right = new int[midpoint];

        }else {
            right = new int[midpoint+1];

              }

        // An Extra Array to store the result

        int[] result = new int[B.length];

        // Populating the array in the left array

        for (int i = 0; i < midpoint; i++){

            left[i] = B[i];

        }

        // Populating in the right array
        int x = 0;
        for (int j=midpoint;j<B.length;j++){

            right[x] = B[j];
            x++;
        }

        // Using recursion to divide the array in left and right again and again

        left = merge_sort(left);
        right = merge_sort(right);

    }// END OF METHOD merge_sort

}// END MAIN METHOD

}// END OF CLASS MergeSort 
```

我在 Eclipse 中的以下行中收到以下错误： 十字符号表示 Eclipse 中的错误点：

X public static int[] merge_sort(int[] B){

错误说：参数merge_sort的非法修饰符；只允许final。

X 返回 B；

错误说：void 方法不能返回值。我已经将方法返回类型定义为整数数组，那么为什么会出现此错误？

X 左 = 合并排序（左）；X 右 = 合并排序（右）；

错误说：类型 MergeSort 的方法合并排序未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:36:21.093

我认为如果您修复代码中的缩进，问题将很明显。您的`merge_sort`方法在您的方法中声明`main`。

只需将`}// END MAIN METHOD`右大括号移到您声明的上方行，`merge_sort`它应该可以编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:38:16.573

你不能在另一个方法中拥有一个方法！

你的`merge_sort()`方法在方法里面`main`！

# java - 按代码排序

> ID：15895948
> 
> 赞同：0
> 
> 时间：2013-04-09T07:32:43.260
> 
> 标签：java, sql, postgresql, sorting

我在数据库中有食物类别，例如：

```
 category_id | parent_id |  code  |               name               
-------------+-----------+--------+----------------------------------
           1 |           |        | root
           2 |         1 | 1      | vegetables
          11 |         1 | 10     | seeds
          54 |        11 | 10.1   | sunflower seeds
          12 |         1 | 11     | sugar and candy
          22 |         2 | 1.1    | frozen vegetables 
```

我想通过`code`查询或以编程方式使用 parent_id（在映射后的 POJO 中）对其进行排序。效果应该是这样的：

```
1
---1.1
------1.1.1
------1.1.2
------1.1.3
---1.2
2
3
---3.1
... 
```

我已经尝试过`ORDER BY code`，但收到的记录如下：1、10.1.1、11、1.1.1 我应该尝试在查询中排序还是在映射时对其进行排序。为此目的，java中是否已经存在接口/其他实用程序？

`code`类型是不同的字符，我正在使用 PostgreSQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:54:16.547

像这样的东西。这按 parent_id 排序，因为由于字符排序和数字排序之间的不匹配，对像您的列这样的 varchar 列进行排序`code`并不容易。

```
with recursive cat_tree as (
   select category_id, parent_id, name, array[category_id] as sort, category_id::text as path
   from category
   where parent_id is null
   union all
   select c.category_id, c.parent_id, c.name, p.sort||c.category_id, p.path||'.'||c.category_id
   from category c
     join cat_tree p on p.category_id = c.parent_id
)
select category_id, parent_id, path, name
from cat_tree
order by sort; 
```

SQLFiddle：[http ://sqlfiddle.com/#!12/fab3c/1](http://sqlfiddle.com/#!12/fab3c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:45:19.973

Postgres 可以进行分层/递归查询，使您可以将数据实际视为树结构。[本教程](http://explainextended.com/2009/05/29/hierarchical-queries-in-postgresql/)对此有很好的解释。实际上，那里选择的示例与您想要做的非常接近。

# jquery - UI 在某些浏览器中冻结，同时在选择 jquery 的情况下删除密码字段的最后一个字符

> ID：15895951
> 
> 赞同：2
> 
> 时间：2013-04-09T07:32:53.697
> 
> 标签：jquery, google-chrome, jquery-chosen

我在我的项目中使用 jQuery**选择**的插件，这个问题发生在尝试编辑任何`input type="password"`（删除密码字段中的最后一个字符）时，只要`.chosen()`绑定到同一页面上的任何选择下拉列表。我可以在 chrome 浏览器（版本 26.0.1410.43 m）上重现该问题，尽管人们也在 Firefox 和其他浏览器上发现了该问题。这会发生在任何选择应用于下拉列表的页面。这个问题似乎`input type="password"`只影响字段。更改类型以`text`修复 UI 冻结问题。

那么，问题背后的主要原因可能是什么？我发现了一个类似的问题，正在使用 jQuery UI -

[JQuery UI 对话框：密码输入导致冻结](https://stackoverflow.com/questions/14914361/jquery-ui-dialog-password-inputs-causing-freezing)

那么，你们遵循什么方法。上述链接中的答案中有一个解决方法，但我一直在寻找更好的解决方案。

# ios - 流套接字连接中的 SSL

> ID：15895953
> 
> 赞同：0
> 
> 时间：2013-04-09T07:32:54.753
> 
> 标签：ios, ssl, https, nsstream

我正在`iOS`应用程序中工作。我正在尝试通过连接连接到`https`服务器`NSStream`。有了`NSURLConnection`，这项工作很好，我可以相信这样的挑战：

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

} 
```

但我的问题是 Stream 中唯一可用的委托是：

```
- (void) stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {

} 
```

如何管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:49:35.387

我终于找到了解决方案。谢谢`Wireshark`

```
 [inStream setProperty:(id)kCFBooleanFalse forKey:(NSString *)kCFStreamPropertyShouldCloseNativeSocket];
        [outStream setProperty:(id)kCFBooleanFalse forKey:(NSString *)kCFStreamPropertyShouldCloseNativeSocket];
        NSMutableDictionary *settings = [NSMutableDictionary dictionaryWithCapacity:1];
        [settings setObject:_certificates forKey:(id)kCFStreamSSLCertificates];
        [settings setObject:(NSString *)NSStreamSocketSecurityLevelNegotiatedSSL forKey:(NSString *)kCFStreamSSLLevel];
        [settings setObject:[NSNumber numberWithBool:YES] forKey:(NSString *)kCFStreamSSLAllowsAnyRoot];
        [settings setObject:@"MY HOST" forKey:(NSString *)kCFStreamSSLPeerName];

        CFReadStreamSetProperty((CFReadStreamRef)inStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings);
        CFWriteStreamSetProperty((CFWriteStreamRef)outStream, kCFStreamPropertySSLSettings, (CFTypeRef)settings); 
```

最重要的是设置没有当前证书的证书。您应该在链中设置当前身份和其他证书。这应该由 iOSX 使用 Identity 设置，并且通常私钥可用于流。

希望这有帮助

# log4net - servicestack 仅使用 log4net 进行调试

> ID：15895955
> 
> 赞同：1
> 
> 时间：2013-04-09T07:33:08.773
> 
> 标签：log4net, servicestack, log4net-configuration

我似乎无法让 servicestack.logging（或 log4net）记录除调试消息之外的任何内容。
我的 INFO 日志似乎不起作用。

我将 log4net 级别设置为 ALL。

在 global.asax.cs 我有

```
LogManager.LogFactory = new Log4NetFactory(true); 
new AppHost().Init(); 
```

在我的 REST 服务类中，我有

```
private static readonly ILog _logger = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

我会有一个像这样的日志条目

```
_logger.InfoFormat("Get incidents request"); 
```

我的 web.config 有

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" /> 
```

...

```
<log4net debug="true">
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="C:\logging\\REST Service.txt" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="10MB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
  </layout>
</appender>
<root>
  <level value="ALL" />
  <appender-ref ref="RollingLogFileAppender" />
</root> 
```

# php - 无法建立数据库连接；无效的数据源名称（仅限 PDO）

> ID：15895959
> 
> 赞同：1
> 
> 时间：2013-04-09T07:33:20.690
> 
> 标签：php, sql, postgresql, pdo

我正在尝试使用 PHP 访问我的新 PGSQL 数据库。问题是我收到标题中给出的错误。当我尝试直接连接时。它有效，当我尝试通过 PDO 连接时，它会出现此错误。

我检查了什么：

*   PHP.ini。所需的扩展名未注释（**php_pgsql.dll**和**php_pdo_pgsql.dll**）
*   确保这两个文件确实在 PHP 文件夹中。
*   使用简单的脚本确保数据库、主机、用户、密码和端口正确（如下所示）

    这是我用于设置数据库的配置文件（我正确使用了 6 个数据库。所以我知道错误不在该文件中）

    ```
    "Aeges":{
        "pdo_driver":"odbc",
        "user":"XXXX",
        "password":"XXXX",
        "database":"test",
        "host":"localhost",
        "port":1233
    },
    "Postgre":{
        "pdo_driver":"pgsql",
        "user":"XXXX",
        "password":"XXXX",
        "database":"ASN",
        "host":"localhost",
        "port":5432
    }
    etc.. 
    ```

这是我检索信息的功能。我清理了一下以使其清楚

```
public static function findAvailableASN()
{
    $Postgre = db\Factory::getInstance()->create('Postgre');
    $stmt = $Postgre->prepare("select * from asnregel.asnregel");
    if ($stmt->execute()) 
    {
        return $stmt->fetchAll(\PDO::FETCH_ASSOC);
    }

/*  $connect = pg_connect("host=localhost port=5432 dbname=ASN user=XXXX password=XXXX");
    if(!$connect) {
        die("Error in connection: ".pg_last_error());
    }
    $sql = "select * from asnregel.asnregel";
    $result = pg_query($connect,$sql);
    if(!$result) {
        die("Error in sql query: ".pg_last_error());
    }

    while($row = pg_fetch_array($result)) {
        echo $row[0].'<br/>';
        echo $row[1].'<br/>';
        echo $row[2].'<br/>';
        echo $row[3].'<br/>';
    }

    pg_free_result($result);
    pg_close($connect); */
} 
```

所以问题是第一部分不起作用（带有PDO的部分）。虽然评论（没有PDO的部分）确实如此。有点奇怪吧？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:16:07.340

> 数据源名称无效

错误信息非常清楚。数据源名称是您在 PDO 构造函数中使用的 DSN 字符串。它似乎是无效的。

因此，无需检查 php.ini、php_pgsql.dll 或密码 - 所有这些错误都有其不同的错误消息需要处理。
因此，您只需要更正您的 DSN 字符串。直接从手册页打印出您当前的 DSN 并将其与规范的 DSN 进行比较。例如，对于 pgsql，正确的 DSN 格式应该是

```
pgsql:host=localhost;port=5432;dbname=testdb;user=bruce;password=mypass 
```

而对于所有 pther 驱动程序，正确的格式可以在[手册中找到](http://php.net/manual/en/pdo.drivers.php)

# linux - 从主节点执行命令“hadoop namenode -format”时出错？

> ID：15895964
> 
> 赞同：1
> 
> 时间：2013-04-09T07:33:52.207
> 
> 标签：linux, ubuntu, hadoop, mapreduce, hdfs

我已经配置了 hadoop（多节点设置）。现在在开始hadoop之前我想为此格式化namenode我运行以下命令-->>

```
hadoop namenode -format 
```

它给出了一个错误-->

```
/home/sandip/project/hadoop-1.1.2/bin/hadoop: line 320: /usr/lib/jvm/java-6-openjdk-  
i386/jre/bin/java/bin/java: Not a directory
/home/sandip/project/hadoop-1.1.2/bin/hadoop: line 390: /usr/lib/jvm/java-6-openjdk-    
i386/jre/bin/java/bin/java: Not a directory
/home/sandip/project/hadoop-1.1.2/bin/hadoop: line 390: exec: /usr/lib/jvm/java-6-openjdk-   
i386/jre/bin/java/bin/java: cannot execute: Not a directory 
```

请告诉我我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:24:29.063

哦！我修复了它我在 hadoop-env.sh 中配置 JAVA_HOME 时出错了，现在我更正了它，它工作正常。

# deployment - 如何同时部署多个应用程序

> ID：15895968
> 
> 赞同：1
> 
> 时间：2013-04-09T07:34:13.773
> 
> 标签：deployment, windows-services, clickonce

我有以下内容：

1.  我编写的 Windows 服务，它仅由以下两个应用程序使用：
2.  客户端应用程序。
3.  代理应用程序。

没有服务，客户端和代理都无法运行。我们当前的安装正在使用`ClickOnce`（该服务尚未部署）。

我想要的是：

1.  2 个单独的安装 - 客户端+服务、代理+服务。这是因为我有很多机器只执行客户端发送的任务，它们不需要客户端。此外，并不是每个想要客户的人都想让他的机器成为代理。
2.  部署逻辑包 - 例如，仅部署客户端是没有意义的，因为它不能自行运行。单独部署服务也没有意义。
3.  保持版本兼容性 - 如何处理以下场景：有人安装了代理+服务版本 1，然后安装了客户端+服务版本 2。
4.  提升权限：是否可以使用**具有**提升权限但当前权限不一定提升的帐户在计算机上安装 Windows 服务？我可以进行静默安装吗？

`ClickOnce`非常好，但不是强制性的。如果有更好的解决方案可以满足我的要求，我会切换到它们，前提是仍然可以进行更新（强制更新以及延迟更新的选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:30:45.803

我将介绍 ClickOnce 方法。msi 安装可能更合适，但听起来好像您想要某种自动更新。强制 Windows 服务安装到 ClickOnce 方法可能比让 msi 安装自我更新更容易。

ClickOnce 的核心很简单。它使用户配置文件文件夹中的文件与服务器上的文件保持同步。这应该适用于客户端和代理应用程序。对于 Windows 服务来说并没有那么多。

对于服务，我会让 ClickOnce 部署服务位。然后编写将在客户端/代理中执行的代码以安装/更新服务。

在使用服务时，我发现[Topshelf](http://topshelf-project.com/)非常棒。它可以让你编写一个标准的控制台应用程序，使开发更容易。然后要安装它，您可以调用控制台 exe 并传递一个`--install`开关。我认为您可以在客户端/代理启动和复制文件、安装/更新/启动/停止服务以及使您的服务正常工作所需的任何其他操作时执行该代码。

现在为您的编号列表...

1.  可以处理。两个 ClickOnce 安装都包含该服务。
2.  只要您可以通过自己的代码安装服务，这应该可以工作。
3.  这更棘手。你必须定义你想要发生的事情。您将完全控制安装服务的代码，因此您可以决定要做什么并适当地处理它。
4.  我猜你需要提升权限才能安装 Windows 服务。这意味着来自 ClickOnce 的提示。解决这个问题的唯一方法是签署您的部署，然后在客户端机器上导入证书。恕我直言，避免一个提示并不值得。

# ios - 什么情况下instancesRespondToSelector: 返回true，但是performSelector: 抛出异常

> ID：15895970
> 
> 赞同：15
> 
> 时间：2013-04-09T07:34:16.213
> 
> 标签：ios, objective-c, exception, unrecognized-selector

我的代码分布在一个库中，如下所示：

```
if ([[NSString class] instancesRespondToSelector: @selector(JSONValue)]) {
  NSString *jsonString = [[[NSString alloc] initWithData: jsonData encoding: NSUTF8StringEncoding] autorelease];
  dict = [jsonString performSelector: @selector(JSONValue)];
} 
```

由于某种原因，调用该方法`-[__NSCFString JSONValue]: unrecognized selector sent to instance`时会引发异常。`performSelector:`这是分布在我编写的库中的代码，但我自己无法重现或调试它。相反，第三方正在报告此问题。在什么情况下`instancesRespondToSelector:`实际调用方法时会`performSelector:`抛出异常？

**编辑** 有一个案例可以解释为什么会发生这种情况，但这没有意义。如果开发人员要做这样的事情：

```
@implementation NSString (OurHappyCategory)

+ (BOOL)instancesRespondToSelector:(SEL)aSelector
{
  return YES;
}

@end 
```

它会解释*为什么*代码正在执行，但这当然是一件*非常糟糕*的事情。有没有办法让这个问题发生有意义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T22:20:50.983

NSString 基本上是一个[类 cluster](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)，并带来了各种复杂性......你实际上需要询问实例是否响应选择器。

```
NSString *jsonString = [[[NSString alloc] initWithData: jsonData encoding: NSUTF8StringEncoding] autorelease];
if ([jsonString respondsToSelector: @selector(JSONValue)]) {
  dict = [jsonString performSelector: @selector(JSONValue)];
} 
```

但是您的问题可能与编译或链接扩展有关……如果在库中添加了类别，那么您将需要添加`-ObjC`链接器标志。

**编辑：**
我一直在努力重现这个问题......我无法......你有更多信息吗......例如，故障仅发生在模拟器上，或者仅发生在设备上，iOS 4 .x，GNU 链接器与 LLDB 的链接器，ABI/运行时差异？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T03:36:13.847

该异常并非直接来自 Objective-C 运行时以响应发送实例无法识别的消息。它来自`-[NSObject doesNotRecognizeSelector:]`，在各种方法查找和转发机制结束时调用。

但是，任何东西都可以在需要时调用`-doesNotRecognizeSelector:`。一个类可以通过覆盖它并使覆盖只是调用来“拒绝”继承的方法`-doesNotRecognizeSelector:`。正如所[记录](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-doesNotRecognizeSelector_)的，这将导致您看到的异常，尽管`-respondsToSelector:`(and `+instancesRespondToSelector:`) 返回`YES`.

我无法告诉你为什么`__NSCFString`在你的最终用户的情况下这样做。使用您的库的应用程序是否使用类别或方法调配来修改该类的方法？

此外，您的日志记录是否显示异常中的实际堆栈跟踪捕获？这可能是有益的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-11T06:09:35.583

我猜你没有以正确的方式导入第三方库。通常这些方法作为类别添加到 NSString，我碰巧可以看到 .h 文件但 .m 没有编译。您可以在 xcode 目标->构建阶段->编译源中检查它。或者检查你是否在 Project-->Build Settings-->Other linker flag =`-all_load`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:37:30.020

确保没有人在调配函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T02:34:36.910

有一种奇怪的可能性：它`performSelector`本身可能以某种方式在与其余代码不同的链接加载环境中执行。不过，不完全（或什至大致）确定这是如何发生的。

# sql - 如何将复杂的 XML 解析为 SQL Server 中的多个插入和更新？

> ID：15895972
> 
> 赞同：1
> 
> 时间：2013-04-09T07:34:16.743
> 
> 标签：sql, sql-server, xml, tsql

我找到了将 xml 解析为插入的示例。然而，这些例子真的很简单。它们通常是这样的：

```
<person>
    <name>Martin</name>
</person>
<person>
    <name>John</name>
</person> 
```

但是我有与此类似的 XML - 我需要在其他表中插入子元素。

```
<root>
    <family>
        <name>Smith</name>
        <address>Some road 1</address>
        <persons>
            <person>
                <name>Tina</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
            <person>
                <name>Martin</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
        </persons>
    </family>
    <family>
        <name>Lane</name>
        <address>Some road 1</address>
        <persons>
            <person>
                <name>Kevin</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
            <person>
                <name>Julia</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
        </persons>
    </family>
</root> 
```

我需要遍历这个xml并首先在表“Families”中插入一行然后我返回家庭的ID并将其用作下一个INSERT中的外键，用于表“Persons”中的一个人，并且与爱好相同. 我想你应该已经明白了。在“家庭”之后，我需要在进入下一个家庭之前做一些更新声明。

有人能指出我正确的方向吗？将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:02:09.463

不幸的是，SQL Server 不支持多表插入，因此您需要像这样进行单次插入：

```
insert into family  
    select f.node.value('name[1]', 'varchar(32)') as name
    from @xml.nodes('/root/family') f(node)

insert into person
    select family.ID as familyID, p.node.value('name[1]', 'varchar(32)') as name
    from @xml.nodes('/root/family') f(node)
    cross apply f.node.nodes('persons/person') p(node)
    inner join family on f.node.value('name[1]', 'varchar(32)') = family.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:18:19.533

这里的主要问题是您可以有许多同名的家庭。我的解决方案考虑了这个“方面”（注意：我使用修改后的 XML 进行测试）。在此示例中，您可以看到两个具有相同名称 (Smith) 但不同的系列。人。这些家庭有差异。RowNum（和 FamilyID）。棘手的部分是在最后`CROSS APPLY`提取`/person`每个姓氏出现的所有元素：

`CROSS APPLY @x.nodes('/root/family[name=sql:column("f.Name")][sql:column("f.RowNum")]/persons/person') AS a(b)`

注意：您可以开发此解决方案来提取每个爱好。

```
DECLARE @x XML = N'
<root>
    <family>
        <name>Smith</name>
        <address>Some road 1</address>
        <persons>
            <person>
                <name>Tina</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
            <person>
                <name>Martin</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
        </persons>
    </family>
    <family>
        <name>Lane</name>
        <address>Some road 1</address>
        <persons>
            <person>
                <name>Kevin</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
            <person>
                <name>Julia</name>
                <hobbies>
                    <hobby>Some hobby 1</hobby>
                    <hobby>Some hobby 2</hobby>
                </hobbies>
            </person>
        </persons>
    </family>
    <family>
        <name>Smith</name>
        <address>Some another road 11</address>
        <persons>
            <person>
                <name>Coco</name>
            </person>
            <person>
                <name>Jambo</name>
            </person>
        </persons>
    </family>
</root>';

DECLARE @Family TABLE (
    FamilyID INT IDENTITY(1,1) UNIQUE,
    Name NVARCHAR(50) NOT NULL,
    RowNum INT NOT NULL,
    PRIMARY KEY (Name, RowNum)
);
INSERT  @Family (Name, RowNum)
SELECT  src.Name, 
        ROW_NUMBER() OVER(PARTITION BY src.Name ORDER BY @@SPID) AS RowNum
FROM (
    SELECT  a.b.value('(name)[1]', 'NVARCHAR(50)') AS Name
    FROM    @x.nodes('/root/family') AS a(b)
) src;

SELECT  f.*
FROM    @Family AS f

DECLARE @Person TABLE (
    PersonID INT IDENTITY(1,1) UNIQUE,
    FamilyID INT NOT NULL, -- Kind of FK
    Name NVARCHAR(50) NOT NULL,
    RowNum INT NOT NULL,
    PRIMARY KEY (Name, RowNum)  
)
INSERT  @Person (FamilyID, Name, RowNum)
SELECT  src.FamilyID, 
        src.Name,
        ROW_NUMBER() OVER(PARTITION BY src.FamilyID, src.Name ORDER BY @@SPID) AS RowNum
FROM (
    SELECT  f.FamilyID,
            a.b.value('(name)[1]', 'NVARCHAR(50)') AS Name
    FROM    @family f
    CROSS APPLY @x.nodes('/root/family[name=sql:column("f.Name")][sql:column("f.RowNum")]/persons/person') AS a(b)
) src;

SELECT  p.*
FROM    @Person AS p; 
```

结果：

```
FamilyID Name  RowNum
-------- ----- ------
1        Lane  1
2        Smith 1
3        Smith 2

PersonID FamilyID Name   RowNum
-------- -------- ------ ------
5        3        Coco   1
6        3        Jambo  1
1        1        Julia  1
2        1        Kevin  1
3        2        Martin 1
4        2        Tina   1 
```

# ruby-on-rails - 在heroku上回滚部署然后上传另一个版本而不前滚？

> ID：15895974
> 
> 赞同：0
> 
> 时间：2013-04-09T07:34:19.797
> 
> 标签：ruby-on-rails, git, heroku, github

我将 heroku 上的应用程序从 v7 回滚到 v4（例如），这是一周前的先前版本。由于 v7 引入了一些错误，我想上传一个全新的版本。我试图在 heroku 上部署这个新版本，但得到了这个错误

```
error: failed to push some refs to 'git@heroku.com:boiling-bastion-xxxx.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

由于我不想与 v7 有任何关系，而是想上传这个新版本，我还运行`git push`吗？我不想向前滚动，因为最新版本 (v7) 引入了一些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:46:26.570

You can always use,

```
git push heroku master -f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:37:59.923

你真的不想 git force push up to heroku 来更改版本。正确的做法是：`heroku releases:rollback [RELEASE]`

`heroku releases`将列出您已完成的部署，以防您不知道什么部署是什么发布。

# javascript - Javascript - 给出错误的动态行数

> ID：15895976
> 
> 赞同：0
> 
> 时间：2013-04-09T07:34:25.450
> 
> 标签：javascript, grid, kendo-ui, calculated-columns

我之前发布了一个关于[动态生成剑道网格的](https://stackoverflow.com/q/15779973/2236074)代码的问题。

我现在遇到的当前问题，即使我像这样硬编码列数：

```
var numberOfRows = 2;
var numberOfColumns = 12;
var columnsPerRow = numberOfColumns/numberOfRows; 
```

是我得到错误：

![在此处输入图像描述](https://i.stack.imgur.com/UStB2.png)

```
First of all, what does this mean? 
```

columnsPerRow 的使用方式如下：

```
var columnDefs = [];
counter = 0;

var arrayData = [];
for( var x = 0; x < result.length-1; x=x+Math.floor(columnsPerRow)+1 )
{
    var tempArr = new Array();

    for( var y = 0; y < columnsPerRow; y++ )
    {
        var num = x + y;
        tempArr.push(result[num]);
    }
    arrayData.push(tempArr);
}
var dataTitles = [];
for( var x = 0; x < titleArray.length; x++ )
{
    var head = "";
    head = titleArray[x];
    head = head.replace(/ /g,"");
    dataTitles.push(head);
}

var counter = 0;
var columnDefs = [];
for (var i = 0; i < columnsPerRow.length; i++) 
{
    if (counter == (columnsPerRow - 1)) 
    {
        counter = 0;
    }
    columnDefs.push({ field: dataTitles[counter], template: result[i].value });
    counter++;
} 
```

网格显示如下：

![在此处输入图像描述](https://i.stack.imgur.com/qVaPw.png)

当我像这样隐藏列变量时：

```
/*var numberOfRows = 2;
var numberOfColumns = 12;
var columnsPerRow = numberOfColumns/numberOfRows;*/ 
```

输出看起来应该是：

![在此处输入图像描述](https://i.stack.imgur.com/wuwnK.png)

但是空值用于列数，因此 for 循环不会循环。

除了网格不显示数据。

我已将我所有的 javascript 和 html 放在这个[jsfiddle](http://jsfiddle.net/5sWue/2/)中。虽然它没有在小提琴中工作。可能有一些未使用的代码。我正在忙着删除它。

我附上了这些文件：

```
<link href='assets/css/kendo.custom.css' rel='stylesheet' type='text/css' />
<link href='assets/css/kendo.common.min.css' rel='stylesheet'/>
<link href='assets/css/kendo.default.min.css' rel='stylesheet' type='text/css' />
<script src='assets/js/jquery.min.js'></script>
<script src='assets/js/kendo.all.min.js'></script> 
```

以及如何解决数据将显示在网格中的问题？

任何帮助将不胜感激，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:36:03.090

我发现我的问题出在这个 for 循环中：

```
for (var i = 0; i < columnsPerRow.length; i++) 
{
    if (counter == (columnsPerRow - 1)) 
    {
        counter = 0;
    }
    columnDefs.push({ field: dataTitles[counter], template: result[i].values });
    counter++;
} 
```

问题如下：

```
i < columnsPerRow.length 
```

应该

```
i < columnsPerRow 
```

和

```
columnDefs.push({ field: dataTitles[counter], template: result[i].values 
```

应该

```
columnDefs.push({ field: dataTitles[counter], template: result[i] 
```

正如 上面发布的[@Samuel Caillerie](https://stackoverflow.com/users/1127669/samuel-caillerie)，`tableTitle`需要添加，这是一个存储标题的数组。

# android - 使用 admob 在 android 中自定义广告视图

> ID：15895979
> 
> 赞同：0
> 
> 时间：2013-04-09T07:34:37.463
> 
> 标签：android, admob

我想在 android 应用程序中显示广告，但我只在页脚/页眉中找到了广告，但我想显示如图所示的广告（就像画廊视图一样）。

是否可以显示这样的广告？如果是，那么如何？

![在此处输入图像描述](https://i.stack.imgur.com/zCgSp.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:40:56.523

您想要的广告类型是插页式广告，而不是横幅广告。

您可以通过 Admob 中介投放这些广告，但您可能必须通过 Admob 以外的网络投放这些广告（通过 Admob 中介），因为 Admob 插页式广告仅供邀请。

# iphone - 当方向变化大于 webview 大小时会变化但不平滑

> ID：15895983
> 
> 赞同：0
> 
> 时间：2013-04-09T07:34:44.290
> 
> 标签：iphone, ios, screen-orientation

我以编程方式创建了一个 WebView。并在方向改变时改变它的大小。但是当我改变那个 webview 的大小时，它会改变但并不顺利。我怎样才能让它顺利改变大小。

这是我的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height-44)];  //Change self.view.bounds to a smaller CGRect if you don't want it to take up the whole screen

    NSURL * urlStr = [NSURL URLWithString:@"https://www.google.co.in/"];

    [webView loadRequest:[NSURLRequest requestWithURL:urlStr]];
    [self.view addSubview:webView];
}

-(void)orientationChanged {

    UIDeviceOrientation   orientation = [UIDevice currentDevice].orientation;

    CGRect screenBounds = [[UIScreen mainScreen] bounds];

    if(orientation == UIInterfaceOrientationLandscapeLeft)
    {
        if (screenBounds.size.height == 568)
        {
            webView.frame = CGRectMake(0, 44, 568, 230);
        }
        else
        {
            webView.frame = CGRectMake(0, 44, 480, 230);
        }
    }
    else if(orientation == UIInterfaceOrientationLandscapeRight)
    {
        if (screenBounds.size.height == 568)
        {
            webView.frame = CGRectMake(0, 44,568, 230);
        }
        else
        {
            webView.frame = CGRectMake(0, 44, 480, 230);
        }
    }
    else if(orientation == UIInterfaceOrientationPortrait)
    {
        //do change in design when ios change
        if (screenBounds.size.height == 568)
        {
                 webView.frame = CGRectMake(0, 44, 320, 524);
        }
        else
        {
                 webView.frame = CGRectMake(0, 44, 320, 400);
        }
    }
    else if(orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        //Do what you want in Portrait Upside Down
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:41:27.847

您可以使用动画。签出这些链接

[http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial) [http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes) [http://developer。 apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/)

您可以使用带有方法的块

```
animateWithDuration:delay:options:animations:completion: 
```

或者您可以使用带有静态方法（类方法）的旧 API

```
+ beginAnimations:context: 
```

铁

```
[UIView animateWithDuration:1.0f animations:^{

    if (screenBounds.size.height == 568)
    {
        webView.frame = CGRectMake(0, 44,568, 230);
    }
    else
    {
        webView.frame = CGRectMake(0, 44, 480, 230);
    }
}]; 
```

或者如果你的目标是 >= ios 6.0 你可以使用[NSLayoutConstraint](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html#//apple_ref/occ/clm/NSLayoutConstraint/constraintWithItem%3aattribute%3arelatedBy%3atoItem%3aattribute%3amultiplier%3aconstant)

# ant - Ant 可以加载 URL 吗？

> ID：15895987
> 
> 赞同：4
> 
> 时间：2013-04-09T07:34:57.727
> 
> 标签：ant

我有一个 Ant 构建脚本，它当前启动一个服务器，然后等到一个 URL 可以被解析，然后再为我执行一些 Selenium 测试。该任务看起来像这样；

```
<target name="test.selenium" depends="compile.constants, launch.server" description="Run the Selenium tests">
    <echodesc/>
    <waitfor maxwait="1" maxwaitunit="minute" checkevery="2" checkeveryunit="second">
        <http url="http://127.0.0.1:${product.listenport}/"/>
    </waitfor>
    <exec executable="${deps.python}" spawn="false" failonerror="true" dir="src">
        <arg line="manage.py test --selenium-only" />
    </exec>
</target> 
```

成功之后，我想调用一个 URL 来关闭服务器，但我不确定如何使用 Ant 执行此操作。是否可以让 Ant 打电话`127.0.0.1:${product.listenport}/QUIT`？

我之前是`taskkill`通过对正在运行的进程的命令来实现这一点的，但这已经开始导致 Windows 错误，并且该 URL 干净地关闭了服务器。

我能找到的最佳解决方案是在浏览器中打开 URL 的宏，但这仍然会给我带来问题，因为我在测试结束时有一个打开的浏览器；[http://chris.m0nk3y.net/blog/post/opening-a-url-in-the-default-browser-with-ant](http://chris.m0nk3y.net/blog/post/opening-a-url-in-the-default-browser-with-ant)

### 我的解决方案

最终我使用了以下蚂蚁目标；

```
<target name="shutdown.server" depends="init.properties" description="Shutdown the server">
    <get src="http://127.0.0.1:${product.listenport}/QUIT" dest="NUL"/>
</target> 
```

'NUL' 使我能够使用 get 而无需处理正在创建的新文件，因此这非常适合工作 \o/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:10:06.883

您可以使用`get`任务来调用http url。这是更多信息[https://ant.apache.org/manual/Tasks/get.html](https://ant.apache.org/manual/Tasks/get.html)。

例如`<get src="http://127.0.0.1:${product.listenport}/QUIT" dest="${temp.dir}/quit.res"/>`

# asp.net-mvc - MVC 编码字符串

> ID：15895991
> 
> 赞同：0
> 
> 时间：2013-04-09T07:35:07.720
> 
> 标签：asp.net-mvc, c#-4.0

我将控制器操作中的 ValidateInputAttribute 设置为 false。在我看来，我有一个文本框：

```
<p>
    <%= Html.TextBoxFor(m => m.Name.LastName, new { maxlength = "100" })%> 
    <%= Html.ValidationMessageFor(m => m.Name.LastName) %>
    <%= Html.Hidden("hiddenLastName", Model.Name.LastName) %>
</p> 
```

现在我可以通过该文本框保存所有内容，但是在显示数据时我看到奇怪的字符。因此，当我保存`<script>alert(“Boo!”)</script>`并再次打开站点以查看结果时，我看到：<script>alert(“Boo!”)</script>

我怎样才能解决这个问题？

注意：我没有在我的代码中的其他地方对输入进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:48:00.273

它是编码的字符串。如果脚本标签可以攻击您的站点，那么这个转换为 Html 编码字符串的字符串是安全的。但如果要显示带有标签元素的未编码字符串，请使用 HtmlString。

```
HtmlString htmlString = new HtmlString("rawString"); 
String encodedString = htmlString.ToHtmlString();
String not_encodedString = htmlString.ToString(); 
```

这是 msdn 链接：http: [//msdn.microsoft.com/en-us/library/system.web.htmlstring.aspx](http://msdn.microsoft.com/en-us/library/system.web.htmlstring.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:54:53.597

如果您想查看`<`而不是`&lt;`，请使用 [HttpUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)

如果您将用户输入保存在数据库中并希望他们允许输入 html，请在存储到数据库之前在您的**控制器中对他们的输入进行编码：**

```
model.Input = HttpUtility.HtmlEncode(model.Input); 
```

当您想要显示该输入时，请在您的**视图**中解码：

```
@HttpUtility.HtmlDecode(model.Input) 
```

**并且不要将 ValidateInputAttribute 设置为 false，而是在模型**中为 Input 属性使用 [AllowHtml] 属性：

```
[Required]
[AllowHtml]
public string Input {get; set;} 
```

# php - 使用zend框架检索谷歌联系人的php应用程序

> ID：15895992
> 
> 赞同：0
> 
> 时间：2013-04-09T07:35:10.640
> 
> 标签：php, zend-framework

这是关于使用 zend 框架的 gdata 库检索我的谷歌联系人。我可以使用用户名和密码检索我所有的谷歌联系人。但我想要一些不同的东西，比如用秘密 ky 和秘密 ID 检索它，因为我已经在谷歌控制台 api 中用 outh2.0 注册了我的应用程序并检索秘密密钥和秘密 ID。使用这个秘密 id 我也可以检索令牌，但我不知道如何使用这个令牌检索我的谷歌联系人可以帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:43:45.243

[https://github.com/jcleblanc/oauth/tree/master/oauth2-php-google](https://github.com/jcleblanc/oauth/tree/master/oauth2-php-google)

此链接在[上一个问题](https://stackoverflow.com/questions/7278449/using-oauth-2-0-to-access-google-apis-specifically-blogger-php)中提供，其中包含使用 PHP 和 OAuth 2.0 获取联系人提要的完整示例。

如果您尝试访问您管理的 Google Apps 域中帐户的联系人，则可以在 Zend 中使用两腿身份验证 (2LO) 和 OAuth 1.0。然后生成消费者密钥和消费者密钥，并像这样创建 http 客户端：

```
$oAuthOptions = array(
    'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
    'version' => '1.0',
    'signatureMethod' => 'HMAC-SHA1',
    'consumerKey' => [YOUR CONSUMER KEY],
    'consumerSecret' => [YOUR CONSUMER SECRET],
    'xoauth_requestor_id' => [EMAIL OF ACCOUNT TO ACCESS]
);

$consumer = new Zend_Oauth_Consumer($oAuthOptions);
$token = new Zend_Oauth_Token_Access();

$client = $token->getHttpClient($oAuthOptions,null); 
```

更多关于 OAuth 1.0 的两/三足身份验证：[https ://code.google.com/p/google-mail-xoauth-tools/wiki/PhpSampleCode](https://code.google.com/p/google-mail-xoauth-tools/wiki/PhpSampleCode)

# c# - 日期时间强制毫秒

> ID：15895994
> 
> 赞同：1
> 
> 时间：2013-04-09T07:35:11.810
> 
> 标签：c#, datetime, milliseconds

我有一个以 JSON 格式返回数据的 WCF 服务。我有一个问题，日期时间在 00 时会减少毫秒。

如何强制 datetime 不减少毫秒？我想把它作为 a`DateTime`而不是 a返回`string`。

```
[
  {
    "date": "2013-04-09T09:21:32",
    "route_id": 60256,
    "route_name": "Karlstad Malung",
    "type": "Comment"
  },
  {
    "date": "2013-04-09T09:20:58.91",
    "route_id": 60256,
    "route_name": "Test",
    "type": "Comment"
  }, 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T07:41:07.523

您可以使用“.f”格式修饰符：

```
DateTime dateValue = new DateTime(2008, 7, 16, 8, 32, 45, 0);
Console.WriteLine("{0} seconds", dateValue.ToString("s.f"));
Console.WriteLine("{0} seconds", dateValue.ToString("s.ff"));
Console.WriteLine("{0} seconds", dateValue.ToString("s.ffff"));
// The example displays the following output to the console: 
//    45.0 seconds 
//    45.00 seconds 
//    45.0000 seconds 
```

第二步是修改 WCF 序列化程序以使用这种`DateTime`格式。

# python - 如何使用 Python 在列表中填写海龟方向？

> ID：15895996
> 
> 赞同：0
> 
> 时间：2013-04-09T07:35:24.473
> 
> 标签：python, list, fill, turtle-graphics, directions

我有一个海龟方向列表：

```
redlist = ['seth(0)', 'forward(drawdist)', 'seth(0)', 'forward(drawdist)', 'seth(90)', 'forward(drawdist)', 'seth(90)', 'forward(drawdist)', 'seth(180)', 'forward(drawdist)', 'seth(180)', 'forward(drawdist)', 'seth(270)', 'forward(drawdist)', 'seth(270)', 'forward(drawdist)'] 
```

如何使用列表填写此内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-05T07:09:30.063

尽管像这样的语法正确的 Python 语句列表似乎是一个使用的机会`eval()`，但请抵制这种诱惑。这里的语法很简单，函数只有一个参数，我们可以使用`re`模块来解析命令，并且只针对有效参数执行看似有效的函数：

```
import turtle
import re

redist = [ \
    'seth(0)', 'forward(drawdist)', 'seth(0)', 'forward(drawdist)', \
    'seth(90)', 'forward(drawdist)', 'seth(90)', 'forward(drawdist)', \
    'seth(180)', 'forward(drawdist)', 'seth(180)', 'forward(drawdist)', \
    'seth(270)', 'forward(drawdist)', 'seth(270)', 'forward(drawdist)' \
    ]

valid_functions = { \
    'seth': turtle.setheading, \
    'forward': turtle.forward, \
    }

valid_arguments = { \
    'drawdist': 50, \
    }

turtle.begin_fill()

for command in redist:
    match = re.match(r"^(\w+)\((\w+)\)$", command)

    if match is None:
        raise SyntaxError("Invalid syntax")

    function, argument = match.group(1), match.group(2)

    if function not in valid_functions:
        raise ValueError("Invalid function")

    if argument in valid_arguments:
        argument = valid_arguments[argument]
    elif argument.isdigit():
        argument = int(argument)
    else:
        raise TypeError("Invalid argument")

    valid_functions[function](argument)

turtle.end_fill()

turtle.hideturtle()

turtle.mainloop() 
```

对于那些想提前阅读的人，它会画一个实心正方形。我在上面提出的异常可能不是正确的，但重点是在尝试执行作为字符串传递给您的代码时，您需要对所有内容进行错误检查并引发异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-11T22:02:50.140

使用`pendown`, 然后`fillcolor`循环中的方法：

```
def draw_n_fill(self,redlist):
  self.pendown()
  [self.getAttr(entry)() for entry in redlist] 
  self.fillcolor("red") 
```

**参考**

*   [如何在python中使用turtle模块绘制一圈颜色](https://stackoverflow.com/questions/23437360/1113772)
*   [Python：使用海龟绘制圆圈](http://www.blog.pythonlibrary.org/2012/08/06/python-using-turtles-for-drawing/)
*   [海龟方法总结](http://interactivepython.org/runestone/static/IntroPythonTurtles/Summary/summary.html)

# java - Tomcat 应用程序部署监听器

> ID：15895997
> 
> 赞同：3
> 
> 时间：2013-04-09T07:35:30.510
> 
> 标签：java, tomcat

我想知道如何监听 Tomcat Web 应用程序部署。我希望每次从容器中取消部署或部署应用程序时都调用我的侦听器。

我已经调查了一下，发现一些监听器，即`LifecycleListener`可以通过 JMX 注册。但不幸的是，这个监听器对我来说还不够，因为它仅在引擎/主机/上下文处于关闭或启动过程时触发事件。

与`ContainerListener`那基本上通知容器关闭和启动事件相同。

所以，我的问题基本上是：**我应该实现哪个接口以及如何将它注册到 tomcat 以便在每次部署新应用程序时得到通知？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-03T13:05:23.357

servlet 上下文初始化/销毁

```
import org.apache.juli.logging.Log;
import org.apache.juli.logging.LogFactory;

import javax.servlet.ServletContextListener;
import javax.servlet.ServletContextEvent;

public class AppContextListener implements ServletContextListener {

    private static final Log logger = LogFactory.getLog(AppContextListener.class);

    @Override
    public void contextDestroyed(ServletContextEvent e) {
        logger.warn("AppContext Delete: " + e.getServletContext().getContextPath());
    }

    @Override
    public void contextInitialized(ServletContextEvent e) {
        logger.warn("AppContext Create: " + e.getServletContext().getContextPath());
    }

} 
```

并放入 tomcat/conf/web.xml

```
 <listener>
     <listener-class>AppContextListener</listener-class>
   </listener> 
```