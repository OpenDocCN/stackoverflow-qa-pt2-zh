# StackOverflow 问答 13653000-13653999

# javascript - 复选框列表的jquery错误

> ID：13653000
> 
> 赞同：0
> 
> 时间：2012-11-30T20:52:46.587
> 
> 标签：javascript, jquery, jquery-selectors

我的复选框列表出现以下语法错误：

```
unrecognized expression: input:checked[name=match_list[]] 
```

HTML：

```
<label class="checkbox">
  <input type="checkbox" name="match_list[]" value="10">
   Item 10
</label>
<label class="checkbox">
  <input type="checkbox" name="match_list[]" value="20">
   Item 20
</label> 
```

jQuery：

```
 var arr=[];

    $('input:checked[name=match_list[]]').each(function(){
        arr.push($(this).val());
    }); 
```

知道错误指向什么吗？语法对我来说看起来不错...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:53:23.947

利用

```
$('input:checked[name="match_list[]"]').each(function(){ 
```

引号仅在易于解析时是可选的。

关于标签元素内的输入元素（Brian 看到的一个问题），您应该使用 for 属性：

```
<label class="checkbox" for=someid>Item 10</label>
<input type=someid "checkbox" name="match_list[]" value="10"> 
```

# c++ - 运算符>> 用 C++ 映射重载

> ID：13653007
> 
> 赞同：2
> 
> 时间：2012-11-30T20:53:09.310
> 
> 标签：c++, class, map, overloading, operator-keyword

我做了一个班学生

```
 class student
{
      private:
              string ID;
              string name;
              int age;
      public:
             ....
}; 
```

我想从用户那里获取值并将其放入地图中，所以我创建了一个 Operator>> Overloading

```
istream& operator>> (istream& in, student person){
    string newID;
    string newname;
    int newage;
    return in;
} 
```

所以当它进入cin部分时

```
 student person;
    cin>>person; 
```

当它将人员添加到数据映射时，它会调用来自默认构造函数而不是 cin 的值

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:55:50.950

运算符需要通过引用获取第二个参数：

```
istream& operator>>(istream& in, student& person) {
                                        ^ HERE 
```

否则你所做的改变`person`永远无法摆脱`operator>>()`。

# desire2learn - 通过 Valence API 的使用数据

> ID：13653014
> 
> 赞同：1
> 
> 时间：2012-11-30T20:53:43.680
> 
> 标签：desire2learn

有没有办法从 Valence API 中提取用户使用数据？

特别是我想知道用户是否曾经登录或访问过某个课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:24:15.470

不，抱歉，目前无法通过 Valence API 获得该信息。如果您希望 Valence API 提供该信息，并且您隶属于 D2L 客户，请使用他们的帐户管理链报告您的请求。如果您不直接隶属于 D2L 客户经理，则可以通过[Valence 支持链](http://docs.valence.desire2learn.com/about.html#support)报告您的请求。

这一特殊要求是其他合作伙伴和客户表示感兴趣的。

# .net - XBase 语言舍入怪异

> ID：13653016
> 
> 赞同：0
> 
> 时间：2012-11-30T20:53:46.860
> 
> 标签：.net, decimal, rounding, visual-foxpro

我需要使用[XBase 风格的](http://en.wikipedia.org/wiki/XBase)语言（在本例中为 FoxPro）获取遗留代码并将其转换为 C#.NET。我想从我的重写中得到相同的输出，但是四舍五入的差异让我抓狂。我单独尝试了**Decimal.Round(MidpointRounding)**的东西，但发现我还需要为 midpoint = 5 的情况编写自己的“向上取整”函数。

如果它有效，那很好，但我看到的是，在某些情况下需要我的“汇总”方法才能与 FoxPro 输出一致，但实际上会在其他情况下产生差异。数据库查询正在做一些乘法和除法，我想知道两个系统之间的数学差异是否正在累积。

这是一个在我看来不一致的例子。每对的初始值来自我的 LINQ 查询的输出。鉴于这些，我想生成一个与所示 FoxPro 结果相同的舍入结果：

```
.NET LINQ Query result: 7.0477049103806673503597572093.
FoxPro rounding: 7.0

.NET LINQ: 7.2499596595318807183725770943.
FoxPro rounding: 7.3 
```

关于如何在不诉诸完全笨拙的黑客攻击的情况下准确复制遗留系统的价值的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:08:05.740

您的问题可能与浮点精度有关。在 FoxPro 程序循环之前，它将值存储在什么类型的变量中？你用什么类型的？

如果 FoxPro 程序使用的浮点数比您在 C# 中使用的精度低（反之亦然），这可能是您看到的差异的原因。

# trigger.io - trigger.io 使用本机顶栏滚动到顶部

> ID：13653017
> 
> 赞同：1
> 
> 时间：2012-11-30T20:53:46.847
> 
> 标签：trigger.io

有没有办法让 trigger.io 原生顶部栏在点击时将 webview 滚动到顶部？除了按钮之外，我看不到一种明显的方式来监听顶部栏上的点击。我们有一个很长的列表，并且希望单击该栏将页面滚动到顶部，就像单击状态栏时 Safari 所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:13:32.037

目前无法从 javascript 检测顶部栏上的点击。但是，您可以在顶部栏添加一个按钮并`$(window).scrollTop()`在按钮单击事件中使用。

# c - 以编程方式检索没有硬编码成员名称的 C 结构成员的内存偏移量

> ID：13653024
> 
> 赞同：1
> 
> 时间：2012-11-30T20:54:29.563
> 
> 标签：c, gcc, cross-compiling

我有一个小程序，用于使用`offsetof()`运算符打印结构成员的偏移量。

我在许多情况下使用这个程序，其中所讨论的结构是不同的，因此我需要为每个项目（以及我对结构所做的每次修改）重新编程代码。由于这些结构往往相当大（控制和状态结构），更新会消耗大量时间。

我想要的是一种可以使用`offsetof()`等效方法的方法，但是第二个参数将是成员的名称，以字符串形式给出，而不是在语句中对其进行硬编码。

为简化起见，假设结构由 32 位字的单个字和数组组成，因此偏移量始终是 4 的倍数。

此外，欢迎使用替代方法来代替名称字符串。

[*请注意，尽管成员都是字大小的，但仅通过计算成员来计算地址并不是一个好的解决方案，因为编译器可能会在成员之间添加填充。正如一个答案（已被删除）所建议的那样，使用 packed 属性可以通过删除填充来解决问题，这不是一个有效的解决方案，因为定义结构的实际应用程序可能会使用填充来优化内存访问*]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:04:43.857

您制作以下形式的“符号表”数组：

```
#define S struct mystruct
#define X(m) { #m, offsetof(S, m) }
static const struct table {
    const char *name;
    size_t offset;
} table[] = {
    X(member1),
    X(member2),
    /* ... */
}; 
```

然后你可以有一个函数循环遍历表搜索给定的名称，并获得偏移量。您可以有多个这样的表，每个结构一个，都使用相同的搜索功能。如果成员太多以至于线性搜索性能成为问题，则可以进行二分搜索或添加哈希。

# javascript - 新的 Windows 焦点问题 JavaScript 和 C#

> ID：13653027
> 
> 赞同：0
> 
> 时间：2012-11-30T20:54:33.540
> 
> 标签：javascript, browser, popup

我有以下代码，用于在 buttonclick 上打开一个新窗口。我在按钮单击事件中执行下面的代码：新窗口打开但它没有聚焦，它只是在主页后面......请问我该如何解决这个问题......

```
 protected void btnView_Click(object sender, EventArgs e)
            {

int activeTab = pgSearchFrm.ActiveTabIndex;

string sel = this.ddlFields.SelectedValue;

string url = "\\ATPrintView.aspx?SearchID=" + Convert.ToString(activeTab) + "&Col=" + sel + "&Val=" + txtFields.Text;

ScriptManager.RegisterStartupScript(this, this.GetType(), "Open", "window.open('" + url + "','_blank','height=500,width=800,status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=no,titlebar=no').focus();", true);
    } 
```

# trigger.io - 使用触发器 io 时启动图像的位置

> ID：13653028
> 
> 赞同：1
> 
> 时间：2012-11-30T20:54:34.867
> 
> 标签：trigger.io, forge

我试图找出我应该添加自定义启动图像的位置。我按照[http://docs.trigger.io/en/v1.4/modules/launchimage.html#modules-launchimage](http://docs.trigger.io/en/v1.4/modules/launchimage.html#modules-launchimage)上的说明进行操作， 但是我不知道在我的触发器项目 src 结构中放置此图像的文件夹位置.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:15:54.007

您可以将图像放在`src`文件夹中的任何位置，您提供的路径是相对于`src`.

例如，如果您有一个文件，`your-app/src/splash.png`那么放入`"splash.png"`应该`config.json`可以工作。

如果您使用 Toolkit 中的 App 配置页面来选择图像，它将允许您从其中的文件中进行选择，`src`因此您不必手动输入路径。

# python - 如何将系列列表传递给 Pandas DataFrame？

> ID：13653030
> 
> 赞同：26
> 
> 时间：2012-11-30T20:54:35.710
> 
> 标签：python, pandas

我意识到 Dataframe 需要一张 {'series_name':Series(data, index)} 的地图。但是，即使地图是 OrderedDict()，它也会自动对该地图进行排序。

有没有一种简单的方法来传递 Series(data, index, name=name) 列表，以便保留顺序并且列名是 series.name？如果所有系列的所有索引都相同，是否有一种简单的方法？

我通常通过传递一个 numpy column_stack 的 series.values 并指定列名来做到这一点。但是，这很难看，在这种特殊情况下，数据是字符串而不是浮点数。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-30T21:13:35.413

你可以使用`pandas.concat`：

```
import pandas as pd
from pandas.util.testing import rands

data = [pd.Series([rands(4) for j in range(6)],
                  index=pd.date_range('1/1/2000', periods=6),
                  name='col'+str(i)) for i in range(4)]

df = pd.concat(data, axis=1, keys=[s.name for s in data])
print(df) 
```

产量

```
 col0  col1  col2  col3
2000-01-01  GqcN  Lwlj  Km7b  XfaA
2000-01-02  lhNC  nlSm  jCYu  XLVb
2000-01-03  sSRz  PFby  C1o5  0BJe
2000-01-04  khZb  Ny9p  crUY  LNmc
2000-01-05  hmLp  4rVp  xF2P  OmD9
2000-01-06  giah  psQb  T5RJ  oLSh 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-30T21:17:19.020

```
a = pd.Series(data=[1,2,3])
b = pd.Series(data=[4,5,6])
a.name = 'a'
b.name= 'b'

pd.DataFrame(zip(a,b), columns=[a.name, b.name]) 
```

或者只是连接数据框

```
pd.concat([pd.DataFrame(a),pd.DataFrame(b)], axis=1)

In [53]: %timeit pd.DataFrame(zip(a,b), columns=[a.name, b.name])
1000 loops, best of 3: 362 us per loop

In [54]: %timeit pd.concat([pd.DataFrame(a),pd.DataFrame(b)], axis=1)
1000 loops, best of 3: 808 us per loop 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-17T21:33:42.563

建立系列列表：

```
import pandas as pd
import numpy as np

> series = [pd.Series(np.random.rand(3), name=c) for c in list('abcdefg')] 
```

**第一种方法** `pd.DataFrame.from_items`：

```
> pd.DataFrame.from_items([(s.name, s) for s in series])
          a         b         c         d         e         f         g
0  0.071094  0.077545  0.299540  0.377555  0.751840  0.879995  0.933399
1  0.538251  0.066780  0.415607  0.796059  0.718893  0.679950  0.502138
2  0.096001  0.680868  0.883778  0.210488  0.642578  0.023881  0.250317 
```

**第二种方法** `pd.concat`：

```
> pd.concat(series, axis=1)
          a         b         c         d         e         f         g
0  0.071094  0.077545  0.299540  0.377555  0.751840  0.879995  0.933399
1  0.538251  0.066780  0.415607  0.796059  0.718893  0.679950  0.502138
2  0.096001  0.680868  0.883778  0.210488  0.642578  0.023881  0.250317 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-03-15T10:33:16.280

简单地将系列列表传递给`DataFrame`然后转置似乎也可以。它还将填充一个或另一个系列中缺少的任何索引。

```
import pandas as pd
from pandas.util.testing import rands
data = [pd.Series([rands(4) for j in range(6)],
                  index=pd.date_range('1/1/2000', periods=6),
                  name='col'+str(i)) for i in range(4)]
df = pd.DataFrame(data).T
print(df) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-13T03:09:14.230

`DataFrame.from_items`也去看看

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-30T21:09:59.227

您可以先创建一个空的 DataFrame，然后再使用`append()`它。

```
df = pd.DataFrame() 
```

然后：

```
df = df.append(list_series) 
```

我还想确保之前创建 list_series 的脚本不会弄乱我的数据框：

```
df.drop_duplicates(inplace=True) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-08T07:12:17.583

这个比较简单：

```
import pandas as pd
from pandas.util.testing import rands

data = [pd.Series([rands(4) for j in range(6)],
                  index=pd.date_range('1/1/2000', periods=6),
                  name='col'+str(i)) for i in range(4)]

df = pd.DataFrame(data)
print(df) 
```

产生

```
 2000-01-01 2000-01-02 2000-01-03 2000-01-04 2000-01-05 2000-01-06
col0       oPg5       9Af9       SNfq       vnCb       ArCU       8Bhy
col1       IKmX       xS0c       yqCQ       sVov       92CN       WIyH
col2       1x2s       JBk7       Z5vh       km7k       ed1F       pIDt
col3       m9M3       mxil       1v72       Fkme       YooA       5H5b 
```

，或者试试这个

```
df = pd.DataFrame(data).T
print(df) 
```

屈服

```
 col0  col1  col2  col3
2000-01-01  6zbm  UfrI  isNy  wVv0
2000-01-02  Kgej  0SN4  thDS  7BP2
2000-01-03  mcTx  BGDI  5BJC  mUdg
2000-01-04  iVSP  6Rim  6gg9  fY2A
2000-01-05  HzEU  giJ6  HFD1  dE98
2000-01-06  wYCi  nWmp  jqLz  GwKz 
```

# python - 选择多行 txt 文档并在 python 中写入新文本文档的问题

> ID：13653032
> 
> 赞同：5
> 
> 时间：2012-11-30T20:54:36.910
> 
> 标签：python

Python 爱好者在这里。我有一个列出数千行信息的文本文件，我试图根据它们是否匹配模式来选择一行和以下 2-3 行。我已将文件从原始文件中过滤出来，只包含我感兴趣的文件部分，因此我当前的文件如下所示：

```
trig1.RESP: 
stim4: silence.wav 
trig1.RESP: 
trig6.RESP: 1 
trig1.RESP:
trig1.RESP: 
trig5.RESP: 1
stim5: silence.wav
trig1.RESP:
trig6.RESP: 1
stim3: silence.wav
trig1.RESP:
stim5: silence.wav
trig1.RESP:
trig6.RESP: 1 
```

依此类推……基本上我要做的是编写包含该行的silence.wav部分的每一行，然后是接下来的两行。我使用了以下代码：

```
parsed_output = open("name-of-file-to-be-written", "w")
filtered_input = open("name-of-file-that-has-above-data", "r")
for line in filtered_input:
    if "silence.wav" in line and "trig1" in filtered_input.next():
        parsed_output.write(line)
        parsed_output.write(filtered_input.next())
parsed_output.close() 
```

这在大多数情况下都可以正常工作，因为它会打印silence.wav 行和具有响应的行（我最感兴趣的部分，此时响应之前的trig1 不太重要）。但是我遇到的问题是线路何时出现：

```
stim3: silence.wav
trig1.RESP: 
stim5: silence.wav 
```

由于我的输出将写入 stim3（当前行）和 stim5（跳过 trig1 后的下一行），我认为它会转到下一个“stim:silence.wav”并跳过 stim5，因为它包含在上一个命令中写的时候。我想要 stim5 之后的 trig6.RESP: 1 但由于我所描述的原因，我的输出没有显示它。有没有办法让它不跳过那个 stim5？

对不起，如果这真的很长。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:02:18.337

这样的事情怎么样？（*完全未经测试*）

```
count = 3
for line in filtered_input:
    if "silence.wav" in line:
        count = 0
    else:
        count += 1

    if count <= 2:
        filtered_output.write(line) 
```

它并不花哨，但我认为它应该非常强大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:08:30.177

我尝试将其翻译为伪代码说：

```
For each (Line) {
      If Next Line is "Trig1" AND Current Line is "silence.wav"
          Log it
}
## And We're Done 
```

（请随时在这里纠正我）

您错过了 Trig6，因为您要求下一行不存在。你能在你向后而不是向前引用的地方重写它并解决你的问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:07:03.677

一种可能的方法是使用[双端队列](http://docs.python.org/2/library/collections.html#collections.deque)，这样您就可以一次跟踪三行：

```
import collections

parsed_output = open("name-of-file-to-be-written", "w")
filtered_input = open("name-of-file-that-has-above-data", "r")

window = collections.deque([None]*3, maxlen=3)
for line in filtered_input:
    window.append(line)
    if 'silence.wav' in window[0]:
        parsed_output.write(window[0])
        # only output next two lines if they don't also contain 'silence.wav'
        if 'silence.wav' not in window[1]:
            parsed_output.write(window[1])
            if 'silence.wav' not in window[2]:
                parsed_output.write(window[2])
# following if/elif in case last or second to last line contain 'silence.wav'
if 'silence.wav' in window[1]:
    parsed_output.write(window[1])
    parsed_output.write(window[2])
elif 'silence.wav' in window[2]:
    parsed_output.write(window[2])
parsed_output.close() 
```

如果您将`maxlen`参数提供给 deque，那么当您向一端添加其他元素时，会从另一端弹出一个元素，例如：

```
>>> x = collections.deque([1, 2, 3], maxlen=3)
>>> x
deque([1, 2, 3], maxlen=3)
>>> x.append(4)
>>> x
deque([2, 3, 4], maxlen=3)
>>> x.append(5)
>>> x
deque([3, 4, 5], maxlen=3) 
```

这允许您遍历文件，但以方便的方式保存您读取的最后 3 行，只要第一个元素`window`与您的条件匹配，只要输出匹配的行和后面的两行，只要它们不也符合你的条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:27:21.553

你真的应该学习正则表达式的使用（模块 re）
当一个人想要分析文本时，它是强制性的。

看看它允许做什么：

```
import re

ss = """trig1.RESP: 
stim4: silence.wav 
trig1.RESP: 
trig6.RESP: 1 
trig1.RESP:
trig1.RESP: 
trig5.RESP: 1
stim5: silence.wav
trig1.RESP:
trig6.RESP: 1
stim3: silence.wav
trig1.RESP:
stim5: silence.wav
trig1.RESP:
trig6.RESP: 1

stim777: silence.wav
stim111: silence.wav 
trig1.RESP: 
trig6.RESP: 1
trig1.RESP: 
trig6.RESP: 1"""

pat = ('^(.+silence.wav.*)(?<! ) *\n'
       '(?:(?!.*silence.wav)(.*)(?<! ) *\n)?'
       '(?:(?!.*silence.wav)(.*)(?<! ) *)?')

RE = re.compile(pat,re.MULTILINE)

for tugr in RE.findall(ss):
    print tugr 
```

结果

```
('stim4: silence.wav', 'trig1.RESP:', 'trig6.RESP: 1')
('stim5: silence.wav', 'trig1.RESP:', 'trig6.RESP: 1')
('stim3: silence.wav', 'trig1.RESP:', '')
('stim5: silence.wav', 'trig1.RESP:', 'trig6.RESP: 1')
('stim777: silence.wav', '', '')
('stim111: silence.wav', 'trig1.RESP:', 'trig6.RESP: 1') 
```

然后你用这些行的元组做你想做的事

**pat**是一个字符串，用作定义正则表达式的模式。
**RE**是一个编译的正则表达式，它是一个对象，它有方法**search**，**match**，**findall**等

括号`( )`定义一个组。
一个组捕获文本的某些部分。但是`(?: )`定义了一个不捕获它匹配的文本部分的组。对部分文本进行操作很有用，例如将限定符`*`或`?`或`+`放在组的末尾。

当第三行有'silence.wav'时，它必须保持不匹配，而当第二行有'silence.wav'时，只有第一行必须匹配。这就是为什么`(?.*silence.wav)`模式中有两个地方的部分。

`^`是一个符号，意思是“字符串的开头”
`^`，标志的`re.MULTILINE` 意思是“一行的开头”

图案的部分`(?<! ) *`在那里不会捕捉到行尾的空格。

模式中的点`.`表示“任何字符”，LF 字符除外

```
\n 
```

和其他点，如果你需要，我可以回答你。

# haskell - 尝试一些 Yesod 示例时编译错误

> ID：13653034
> 
> 赞同：9
> 
> 时间：2012-11-30T20:54:45.850
> 
> 标签：haskell, yesod

我正在尝试`Yesod`Yesod 网页上记录的书籍示例。示例之一是[嵌入在 Wiki 中的 Chat 应用程序](http://www.yesodweb.com/book/wiki-chat-example)。当我在 ghci 中尝试时（`Chat`从中加载包含 Wiki 示例代码的模块`Wiki.hs`），我收到以下 Chat.hs 错误：

```
Chat.hs:122:34:
    Could not deduce (Text.Julius.ToJavascript Text)
      arising from a use of `Text.Julius.toJavascript'
    from the context (YesodChat master)
      bound by the type signature for
                 chatWidget :: YesodChat master =>
                               (Route Chat -> Route master) -> GWidget sub master ()
      at Chat.hs:(81,15)-(83,35)
    Possible fix:
      add an instance declaration for (Text.Julius.ToJavascript Text)
    In the first argument of `Text.Julius.Javascript', namely
      `Text.Julius.toJavascript output'
    In the expression:
      Text.Julius.Javascript (Text.Julius.toJavascript output)
    In the first argument of `Data.Monoid.mconcat', namely
      `[Text.Julius.Javascript
          ((Data.Text.Lazy.Builder.fromText . Text.Shakespeare.pack')
             "\
             \// Set up the receiving end\
             \var output = document.getElementById(\""),
        Text.Julius.Javascript (Text.Julius.toJavascript output),
        Text.Julius.Javascript
          ((Data.Text.Lazy.Builder.fromText . Text.Shakespeare.pack')
             "\");\
             \var src = new EventSource(\""),
        Text.Julius.Javascript
          (Data.Text.Lazy.Builder.fromText
             (_render_a3Yr (toMaster ReceiveR) [])),
        ....]' 
```

我对 Yesod 库还不是很熟悉。所以，我被上述错误难住了——我在其他`toWidget`调用函数的 Yesod 示例中也看到了这个错误。因此，它似乎与`toWidget`功能有关。我将感谢帮助解决上述错误。

我正在`ghc 7.6.1`使用`yesod 1.1.4.1`.

**更新：**

按照 Hammar 的建议进行了修复。我在`Chat.hs`.

1.  为 rawJS 添加导入语句：

    `import Text.Julius (rawJS)`

2.  跟踪 in 中 #{} 块的所有实例`julius whamlet`，`Chat.hs`并将它们替换为`{# rawJS ...}`

    `var output = document.getElementById("#{rawJS output}");`

    `var input = document.getElementById("#{rawJS input}");`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T22:08:48.413

我目前没有安装 Yesod 来测试它，但根据[这篇博](http://www.yesodweb.com/blog/2012/11/updates-julius-interpolation)文，在插入 JavaScript 标识符时你应该只需要更改`#{output}`为`#{rawJS output}`等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T21:50:54.317

在[`shakespeare-js-1.1.0`](http://hackage.haskell.org/package/shakespeare-js-1.1.0)中， 和其他一些类型的`ToJavascript`实例`Text`已被删除：

```
-- | A typeclass for types that can be interpolated in CoffeeScript templates.
class ToJavascript a where
    toJavascript :: a -> Builder
#if 0
instance ToJavascript [Char] where toJavascript = fromLazyText . TL.pack
instance ToJavascript TS.Text where toJavascript = fromText
instance ToJavascript TL.Text where toJavascript = fromLazyText
instance ToJavascript Javascript where toJavascript = unJavascript
instance ToJavascript Builder where toJavascript = id
#endif
instance ToJavascript Value where toJavascript = fromValue 
```

而在以前版本的包中，它们只是有条件地被禁用：

```
#ifndef SAFER_INTERPOLATION 
```

我不知道这是否是故意的并且打算保持如此，或者只是一个被遗忘的发展变化。

要按原样使用该示例，您需要针对`shakespeare-js < 1.1`. 这意味着首先卸载很多包，或者一个新的沙箱（如果你使用的是 cabal-dev 或其他一些沙箱工具）。

in的唯一实例是包`ToJavascript`中`shakespeare-js-1.1.0`的`RawJavascript`（`newtype`包装器[`Builder`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text-Lazy-Builder.html#t%3aBuilder)）和[`Value`](http://hackage.haskell.org/packages/archive/aeson/0.6.0.2/doc/html/Data-Aeson-Types.html#t%3aValue)（JSON 值的类型）`aeson`。

你可以`output`换成

```
Text.Julius.toJavascript output 
```

`RawJavascript . Data.Text.Lazy.Builder.fromText`如果它是真实代码，则获取一个值`RawJavascript`并使其工作，但由于它是 TH 生成的，因此您需要修复 TH 输出或 quasiquoter - 我都不知道该怎么做。

# java - 通过 Android 手机发送和接收字符串

> ID：13653036
> 
> 赞同：0
> 
> 时间：2012-11-30T20:54:50.983
> 
> 标签：java, android

如何从手机内的应用程序发送和接收简单数据，例如字符串？

从本质上讲，虽然这不是我的目标，但我想问的是如何创建短信服务。

我目前的想法是从数据中心购买一些在线存储，将字符串存储在其中，与他们的预期收件人单独在一起，并且每当收件人检查应用程序时，字符串就会发送给他。

我想知道这种方法是否可行，或者是否有更好的方法或软件可以帮助我？

此外，如果这种方法可行且更可取，请指出我正确的开始方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:09:01.457

有很多很多方法可以做到这一点。这完全取决于您对 Web 服务器等的了解。

要发送到设备，您可以使用 GCM ( [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html) )

但是，这不适用于电话，仅适用于它。

您可以设置一个简单的网络服务器...

*   你需要一个 HTTP 服务器，几乎所有语言都有一个，对于简单的服务器，如果你不需要太多的吞吐量，那么试试 python 之类的东西，否则看看 Apache 什么的。[http://httpd.apache.org/](http://httpd.apache.org/)
*   对于发送这些字符串的更简洁和更结构化的方式，我将使用 JSON，因此 Web 服务器将需要一个 JSON 层来处理 JSON 请求，请看这里： http: [//www.json.org/](http://www.json.org/)
*   收到请求后，您需要对其进行一些逻辑处理，这取决于您。但是一旦你得到 JSON 请求并解析它，你应该可以用它做几乎任何事情。

这一切都应该很容易实现。然后，如果您要将其公开（我将通过在本地计算机上运行服务器来开发它），那么您需要在您的家中通过域拥有一个静态 IP，并进行设置以使该域指向您的IP，如果您的 IP 是动态的，则设置可能需要更多时间，但您需要查看 FreeDNS 和更新程序客户端之类的东西。

否则，您只需找到支持您将要使用的语言（PHP、ASP.NET 或其他任何语言）的主机，然后用它们进行设置。

# javascript - 我应该测试多远以及应该测试哪些浏览器？

> ID：13653040
> 
> 赞同：4
> 
> 时间：2012-11-30T20:54:59.797
> 
> 标签：javascript, asp.net, browser

我写了一个网站，我发现它的一部分不适用于 IE8，但适用于 IE9。

这让我考虑用不同的版本来测试它。

我的问题有两个：

1.  我应该主要测试哪些浏览器？我是否需要特定的浏览器才能使用我们的应用程序？

2.  我应该在每个浏览器中“允许”多远并进行测试？

我看到我可以测试他们拥有的浏览器，所以现在只是我应该再次编程的问题吗？

大家对此有何经验？

**更新**

该网站的目的是为我们的客户提供一个访问其客户帐户信息的门户。他们将访问我们的客户网站，然后将被引导到我们的门户网站进行注册/登录并查看他们的帐户。

这有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:58:01.137

您必须在您的网站上收集统计数据并查看用户使用什么来访问它。根据站点的性质，这种分布可能会有所不同。

例如，如果该网站是为企业用户准备的，您应该期待很多 IE，但 safari 将是您最不关心的问题。

在没有统计数据的情况下回答这个问题只是猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:59:16.077

他们可能会关闭这个问题，但无论如何我都会回答。

您可以从检查[浏览器市场份额](http://en.wikipedia.org/wiki/Usage_share_of_web_browsers)开始，这将使您大致了解目前流行的浏览器。

然后，您需要了解这些信息，并了解您的目标受众是谁，并确保您为所需的用户群建立了一个成功的网站。一般来说，IE8 仍然广泛存在，并且会持续一段时间，因为这是最后一个支持 Windows XP 的 IE 版本。

# php - 使用 PHP 函数解决丢失的数字

> ID：13653041
> 
> 赞同：-2
> 
> 时间：2012-11-30T20:55:01.920
> 
> 标签：php, function, formula, equation

我有 16 个号码池 1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768。我有一个数字，它由 16 个数字的某种组合组成，其中 1-16 个数字相加。例如，我有一个由 1+2+4+8+16+128+512 组成的数字 671。我试图找出一种方法来获取我的 16 个数字池和我的总数，并确定哪些数字用于构成该总数。我将使用 php 来执行此操作，但我曾经尝试过搜索，而数学远非我的强项，我试图找到解决此问题的方法却一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:04:48.497

这是一个典型的[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)

![在此处输入图像描述](../Images/aa2f907f874bb5af0a21477f81a8b07f.png)

你可以有一个简单的回溯来实现这一点

```
echo "<pre>";
$ns = array(1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768);
print_r(subsetSum($ns, 671 )); 
```

输出

```
Array
(
    [0] => 1 + 2 + 4 + 8 + 16 + 128 + 512
) 
```

使用的功能

```
function subsetSum($arr, $val, $i = 0) {
    $r = array();
    while($i < count($arr)) {
        $v = $arr[$i];
        if($v == $val)
            $r[] = $v;
        if($v < $val)
            foreach(subsetSum($arr, $val - $v, $i + 1) as $s)
            $r[] = "$v + $s";
        $i++;
    }
    return $r;
} 
```

# hadoop - 使用 Hadoop Streaming 通过脚本运行二进制文件

> ID：13653044
> 
> 赞同：0
> 
> 时间：2012-11-30T20:55:16.193
> 
> 标签：hadoop, hadoop-streaming

我是 Hadoop 新手，我正在尝试找出一种方法来执行以下操作：

1.  我有多个输入图像文件。
2.  我有处理这些文件的二进制可执行文件。
3.  这些二进制可执行文件将文本文件作为输出写入。
4.  我有一个包含所有这些可执行文件的文件夹。
5.  我有一个脚本，它以特定顺序运行所有这些可执行文件，将图像位置作为参数传递。

我的问题是：我可以使用 Hadoop 流通过这些二进制文件处理这些图像并从文本文件中吐出结果。

我目前正在尝试这个。

我的 Hadoop 集群正在运行。我通过二进制文件和我的图像上传到 HDFS。

我已经设置了一个脚本，当hadoop运行时应该将目录更改为包含图像的文件夹并执行另一个执行二进制文件的脚本。

然后脚本通过标准输出结果吐出。

但是，我不知道如何将我的地图脚本更改为 HDFS 上的图像文件夹，然后执行另一个脚本。

有人可以给我一个提示吗？

```
 sudo ./hadoop/bin/hadoop jar ../hduser/hadoop/contrib/streaming/hadoop-streaming-1.1.0.jar \
-numReduceTasks 0 \
-file /home/hduser/RunHadoopJob.sh \
-input  /user/hduser/7posLarge \
-output /user/hduser/output5 \
-mapper RunHadoopJob.sh  \
-verbose 
```

还有我的 RunHadoopJob.sh：

```
#!/bin/bash
cd /user/hduser/7posLarge/;
/user/hduser/RunSFM/RunSFM.sh; 
```

我的 HDFS 看起来像这样：

```
hadoop fs -ls
Warning: $HADOOP_HOME is deprecated.

Found 4 items
drwxr-xr-x   - hduser supergroup          0 2012-11-28 17:32 /user/hduser/7posLarge
drwxr-xr-x   - hduser supergroup          0 2012-11-28 17:39 /user/hduser/RunSFM
drwxr-xr-x   - root   supergroup          0 2012-11-30 14:32 /user/hduser/output5 
```

我知道这不是 MapReduce 的标准用法。我只是在寻找一种方法，无需编写太多开销即可在具有不同输入的同一程序的不同集群上启动多个作业。看起来这似乎可以查看[Hadoop Streaming 文档](http://hadoop.apache.org/docs/r0.15.2/streaming.html#How+do+I+use+Hadoop+Streaming+to+run+an+arbitrary+set+of+%28semi-%29independent+tasks?)。

> “如何使用 Hadoop Streaming 运行任意（半）独立的任务集？
> 
> 通常，您不需要 Map Reduce 的全部功能，而只需要运行同一程序的多个实例——无论是在数据的不同部分，还是在相同的数据上，但参数不同。您可以使用 Hadoop Streaming 来执行此操作。"

如果这不可能，AmazonAWS 上是否有其他工具可以为我做到这一点？

**更新：** 看起来有类似的解决方案，但我很难遵循它们。他们在[这里](https://forums.aws.amazon.com/thread.jspa?messageID=130482&#130482)和[这里](https://stackoverflow.com/questions/4113798/hadoop-streaming-mapper-wrapping-a-binary-executable)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:27:02.937

处理 Hadoop 流和二进制文件时有几个问题：

*   Hadoop 不知道自己如何处理图像文件
*   映射器逐行从标准输入获取输入，因此您需要创建一个中间 shell 脚本，将图像数据从标准输入写入某个临时文件。然后传递给可执行文件的文件。

仅将目录位置传递给可执行文件并不是很有效，因为在这种情况下，您将失去数据局部性。我不想重复关于这个主题已经很好回答的问题，所以这里是链接：
[使用 Amazon MapReduce/Hadoop 进行图像处理](https://stackoverflow.com/questions/7816334/using-amazon-mapreduce-hadoop-for-image-processing)
[Hadoop：如何访问要由 map/reduce 处理的（许多）照片图像？](https://stackoverflow.com/questions/8752772/hadoop-how-to-access-many-photo-images-to-be-processed-by-map-reduce)

另一种方法是将图像文件转换为 splittable `SequenceFiles`。即：每条记录将是序列文件中的一个图像。然后使用它作为输入格式，映射器将在他们获得的每条记录上调用可执行文件。请注意，您必须`TaskTracker`事先为节点提供正确的文件权限，以便它们可以从 java 代码中执行。
有关此主题的更多信息：
[Hadoop：生成带有要在 map/reduce 中处理的图像二进制文件的 SequenceFile 的示例过程](https://stackoverflow.com/questions/8754154/hadoop-example-process-to-generating-a-sequencefile-with-image-binaries-to-be-p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:41:19.520

我能够使用“hack”来制作解决方法的原型。

我仍在尝试这个，我认为这不适用于弹性集群，因为您必须根据集群的操作系统架构重新编译二进制文件。但是，如果您有一个私有集群，这可能是一个解决方案。

使用 hadoop 流，您可以将二进制文件打包成 .jar 文件并将它们发送到节点，在脚本运行之前将它们解包。

我在 pics.jar 中有我的图像，我的程序处理在 BinaryProgramFolder.jar 中启动程序的目录中找到的所有图像。在文件夹中，我有一个启动程序的脚本。

我的流式传输作业将图像和二进制程序 + 脚本发送到节点并启动它们。同样，这是一种变通方法......不是解决问题的“真正”解决方案。

所以，

```
sudo ./hadoop/bin/hadoop jar ../hduser/hadoop/contrib/streaming/hadoop-streaming-1.1.0.jar \
    -archives 'hdfs://master:54310/user/hduser/pics.jar#pics','hdfs://master:54310/user/hduser/BinaryProgramFolder.jar#BinaryProgramFolder' \
    -numReduceTasks 0 \
    -file /home/hduser/RunHadoopJob.sh \
    -input  /user/hduser/input.txt \
    -output /user/hduser/output \
    -mapper RunHadoopJob.sh  \
    -verbose 
```

填充输入文件text.txt：

```
Filler text for streaming job. 
```

运行HadoopJob.sh

```
cp -Hr BinaryProgramFolder ./pics; #copy a sym link to your unpacked program folder into your pics directory.
cd ./pics;
./BinaryProgramFolder/BinaryProgramLauncScript.sh <params>; #lunch your program following the symlink to the programs folder, I also used a script to launch my bin program which was in the same folder as the launch script. 
```

**注意：**您必须首先将程序和图像放入 jar 存档中，然后将它们复制到 HDFS。利用`hadoop fs -copyFromLocal ./<file location> ./<hadoop fs location>`

# google-chrome - 我可以使用 chrome.devtools API 访问 JavaScript 片段吗？

> ID：13653047
> 
> 赞同：9
> 
> 时间：2012-11-30T20:55:25.000
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我想制作一个需要访问源窗格中新添加的片段的 Chrome 开发者工具扩展。

chrome.devtools API 有什么方法可以访问片段吗？

![在此处输入图像描述](../Images/31716c3b7b8130bd98bbad83fd515d20.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T07:33:04.910

是的，你可以通过[chrome.devtools.inspectedWindow API()](https://developer.chrome.com/extensions/devtools.inspectedWindow.html)

**你可以追踪**

[a) 所有可用片段的内容](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#method-getResources)

[b) 每当添加新片段及其内容时](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#event-onResourceAdded)

[c) 当一个片段被更新了新的内容\修改。](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#event-onResourceContentCommitted)

但是，要启用调试等，您必须[启用实验性开发人员标志](https://stackoverflow.com/questions/10470711/chrome-developer-tools-what-is-snippets-support)。

您可以将以下代码作为参考，您可以根据需要对其进行扩展。

**清单.json**

你必须添加

> "devtools_page":"devtools.html",

manifest.json 文件中的代码

***示例 manifest.json***

```
{
"name":"Snippets Demo",
"description":"This demonstrates How to get content from Snippets API",
"devtools_page":"devtools.html",
"manifest_version":2,
"version":"2"
} 
```

**开发工具.html**

添加`devtools.js`以避免[内联脚本](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)

***示例 devtools.html***

```
<html>
<head>
<script src="devtools.js"></script>
</head>
<body>
</body>
</html> 
```

**开发工具.js**

*添加相关代码为*

**a)** [chrome.devtools.inspectedWindow.getResources](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#method-getResources)

**b)** [chrome.devtools.inspectedWindow.onResourceAdded.addListener](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#event-onResourceAdded)

**c)** [chrome.devtools.inspectedWindow.onResourceContentCommitted.addListener()](https://developer.chrome.com/extensions/devtools.inspectedWindow.html#event-onResourceContentCommitted)

***示例 devtools.js***

```
//Fetching all available resources and filtering using name of script snippet added 
chrome.devtools.inspectedWindow.getResources(function (resources){

    // This function returns array of resources available in the current window

    for(i=0;i<resources.length;i++){

        // Matching with current snippet URL

        if(resources[i].url == "Script snippet #1"){
            resources[i].getContent(function (content,encoding){

                alert("encoding is " + encoding);
                alert("content is  "+content);
            });
        }
    }

});

//This can be used for identifying when ever a new resource is added

chrome.devtools.inspectedWindow.onResourceAdded.addListener(function (resource){
    alert("resources added" + resource.url);
    alert("resources content added " + resource.content);
});

//This can be used to detect when ever a resource code is changed/updated

chrome.devtools.inspectedWindow.onResourceContentCommitted.addListener(function(resource,content){
    alert("Resource Changed");
    alert("New Content  " + content);
    alert("New Resource  Object is " + resource);
}); 
```

将所有 3 个代码放在一起后，您会得到

*输出 1)*

![在此处输入图像描述](../Images/eea674179a7bf6f2a3d098f8fdf8dde1.png)

*输出 2)*

![在此处输入图像描述](../Images/615bf74417c9f4f2a406120ca0892edb.png)

*输出 3)*

![在此处输入图像描述](../Images/718c3def117af21fe84a547779baa222.png)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T04:52:32.000

我正在寻找这个，但接受的答案已经很老了，截至 2016 年 1 月，您无法通过`localStorage`.

另见：

[https://github.com/bahmutov/code-snippets/issues/23](https://github.com/bahmutov/code-snippets/issues/23)
[Chrome 开发工具的片段保存在哪个文件？](https://stackoverflow.com/questions/19025718/which-file-does-snippets-of-chrome-dev-tool-saved-at/25871853#25871853)

# objective-c - dismissViewControllerAnimated 完成块演示者视图和模态视图流

> ID：13653048
> 
> 赞同：2
> 
> 时间：2012-11-30T20:55:25.983
> 
> 标签：objective-c, xcode, ipad

我确实找到了这个标题的答案，并且我做了一些研究，但我仍然没有得到流量。这是我想要发生的事情：

1）单击演示者视图上的按钮以打开模式视图。2）检索一些值并单击一个按钮以关闭模式视图....将值发送到演示者视图并执行一个方法。

我知道这就像一个回调，但我仍然无法弄清楚将回调的东西放在哪里。

那么，我该怎么做呢？A) 在 presentViewController 完成块中，我是否应该包含要在模态视图完成时执行的演示者视图方法？

或者：B）在模态视图的dismissViewControllerAnimated 完成块中，我是否应该包含要在模态视图完成时执行的演示者视图方法？

有人可以帮我一些示例代码吗？或者至少帮助我了解将代码放入哪个块的流程？

谢谢你，P

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T21:12:17.950

您谈论完成块，所以我假设您不想使用委托。

在将以模态方式呈现的 viewController 中，您需要提供一个公共完成处理程序，该处理程序将在它被解除时调用。

```
@interface PresentedViewController : UIViewController

@property (nonatomic, strong) void (^onCompletion)(id result);

@end 
```

然后在实现中，您需要在解雇时调用此完成块。在这里，我假设 viewController 在单击按钮时被关闭

```
- (IBAction)done:(id)sender
{
  if (self.onCompletion) {
    self.onCompletion(self.someRetrievedValue);
  }
} 
```

现在回到显示模式的 viewController 中，您需要提供实际的完成块 - 通常在您创建 viewController 时

```
- (IBAction)showModal;
{
  PresentedViewController *controller = [[PresentedViewController alloc] init];
  controller.onCompletion = ^(id result) {
    [self doSomethingWithTheResult:result]
    [self dismissViewControllerAnimated:YES completion:nil];
  }
  [self presentViewController:controller animated:YES completion:nil];
} 
```

这将创建新的 viewController 以模态方式呈现并定义完成时需要发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:02:15.127

您可以与代表一起执行此操作，这是 Apple 似乎推荐的方式，但这对我来说似乎有点矫枉过正。您可以使用 presentingViewController 属性引用演示者，因此您可以在按钮单击方法中从呈现的控制器设置演示者中的属性值：

```
self.presentingViewController.someProp = self.theValueToPass;
[self dismissViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:02:27.663

使用委托是处理此问题的好方法：

在您的 PresentedViewController.h

```
@protocol PresentedViewControllerDelegate <NSObject>

-(void) viewWillDismiss;

@end

@property (nonatomic, weak) id <PresentedViewController> delegate; 
```

然后在您的 PresentingViewController.h 中，您将订阅此委托

```
@interface PresentingViewController : UIViewController <PresentedViewControllerDelegate> 
```

在 .m 中，您必须实现委托方法

```
- (void) viewWillDismiss {

} 
```

并且在您呈现视图控制器之前，将您创建的委托属性设置为 self.

```
presentingViewController.delegate = self; 
```

显然，这里并不是每个实现细节都已完成，但这应该可以帮助您入门。

# php - 未定义的偏移量：1 php

> ID：13653052
> 
> 赞同：0
> 
> 时间：2012-11-30T20:55:50.500
> 
> 标签：php

```
 $response = curl_exec($ch);
    curl_close($ch);
    //Split the HEADERS and BODY 
    list($h, $EALOGIN) = explode("\r\n\r\n", $response, 2);
    $r = explode("\r\n", $h);

    //EASW Key
    $s = explode(":", $r[7]);
    $t = explode(";", $s[1]);
    $EASW_KEY = $t[0]; 
    //Session Key
    $m = explode(":", $r[8]);
    $n = explode(";", $m[1]);
    $EASF_SESS = $n[0];
    //nuc
    $a = explode("<nucleusId>", $EALOGIN);
    $b = explode("</nucleusId>", $a[1]);
    $NUC = $b[0]; 
```

离线是指“$a”行。我不明白这个错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:03:35.763

该问题可能是由于`$a[1]`未设置。

在此语句中可能找不到分隔符：

```
$a = explode("<nucleusId>", $EALOGIN); 
```

尝试使用调试语句（var_dump()'s 等）并试验代码以找出问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:26:06.857

用 preg_match 试试

```
$pattern = "/<nucleusId>(.*)<\/nucleusId>/";
preg_match($pattern, $string, $matches);
$NUC = $matches[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:23:10.983

“未定义的偏移量”意味着某些数组没有具有特定键的元素。它可能是`$a`数组。

我建议像这样调试该代码：

```
$response = curl_exec($ch);
curl_close($ch);
//Split the HEADERS and BODY 
list($h, $EALOGIN) = explode("\r\n\r\n", $response, 2);
$r = explode("\r\n", $h);

//EASW Key
$s = explode(":", $r[7]);
$t = explode(";", $s[1]);
$EASW_KEY = $t[0]; 
//Session Key
$m = explode(":", $r[8]);
$n = explode(";", $m[1]);
$EASF_SESS = $n[0];
//nuc
$a = explode("<nucleusId>", $EALOGIN);

// debug start
echo "<pre>";
print_r($a);
echo "</pre>";
// debug end

$b = explode("</nucleusId>", $a[1]);
$NUC = $b[0]; 
```

# excel - 从 Sharepoint 列表中的日期和时间字段中减去小时数的公式

> ID：13653054
> 
> 赞同：0
> 
> 时间：2012-11-30T20:56:11.843
> 
> 标签：excel, sharepoint, datetime, excel-formula, formula

在 Sharepoint 列表中，我有一个日期和时间字段，我想创建一个计算字段，从日期和时间字段中减去时区偏移量（例如 -6:00）。我对公式的第一次尝试是：

```
DATE(YEAR(Column1),MONTH(Column1),DAY(Column1),HOUR(Column1) – (1/24*offset)) 
```

但当然 DATE 函数中**没有**小时参数。您将如何正确编写此公式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:15:16.693

在 SharePoint 中，日期存储为数字，小数是一天的小数。

所以这应该工作得很好：

```
=Column1-(1/24)*Offset 
```

请记住选择日期和时间作为计算列的输出类型。

# java - 在 GLSurcfaceView 回调期间从 C++ 调用回 Java 的问题

> ID：13653059
> 
> 赞同：0
> 
> 时间：2012-11-30T20:56:20.367
> 
> 标签：java, android, c++, java-native-interface

我在我的 Android 应用程序的 JAR 文件中创建了 GLSurfaceView。在 onDrawFrame 的 GLSurfaceView 回调中，我通过 JNI 调用本机 C++ 方法。在这一点上，我相信我在 GLThread 中，并且在那个本地方法中，我试图回调到我的应用程序命名空间中的 Java 类，而不是调用调用的命名空间。所以，我试图在这样做之前明确地附加到 UI 线程，但我没有成功。

我收到以下错误

```
W/dalvikvm( 4243): JNI WARNING: can't call Lcom/main/myapp;.updateView on instance of Lorg/myorg/myRenderer;
W/dalvikvm( 4243):              in Lorg/myorg/ImageRenderer;.renderImageFrame:()V (CallVoidMethodV)
I/dalvikvm( 4243): "GLThread 336" prio=5 tid=16 RUNNABLE
I/dalvikvm( 4243):   | group="main" sCount=0 dsCount=0 obj=0x418029f8 self=0x400988a8
I/dalvikvm( 4243):   | sysTid=4268 nice=0 sched=0/0 cgrp=apps handle=1362099424
I/dalvikvm( 4243):   | schedstat=( 0 0 0 ) utm=83 stm=71 core=1
I/dalvikvm( 4243):   at org.myorg.ImageRenderer.renderImageFrame(Native Method)
I/dalvikvm( 4243):   at org.myorg.ImageRenderer.onDrawFrame(ImageRenderer.java:93)
I/dalvikvm( 4243):   at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1516)
I/dalvikvm( 4243):   at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

我的 C++ 代码如下所示：

```
JavaVM * jvm;

JNIEXPORT void JNICALL Java_org_myorg_ImageRenderer_renderImageFrame
  (JNIEnv *env, jobject jObj) {

 jvm->AttachCurrentThread(&env, 0);

        jclass javaClass = env->FindClass("com/main/myapp");
             if(javaClass == NULL){
                 LOGD("ERROR - CANNOT FIND CLASS");
             }

        jfloatArray viewArray = env->NewFloatArray(16);
        env->SetFloatArrayRegion(viewArray, 0, 16, glmatrix.data);
        jmethodID method = env->GetMethodID(javaClass, "updateView", "([F)V");
        if(method == NULL){
            LOGD("ERROR - CANNOT ACCESS METHOD");
        }

        env->CallVoidMethod(jObj, method, viewArray);
        env->DeleteLocalRef(viewArray);

jvm->DetachCurrentThread();

}

JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved){
    jvm = vm;
    return JNI_VERSION_1_2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:05:24.997

> 我正在尝试回调到我的应用程序命名空间中的 Java 类，而不是调用调用的命名空间

是的，这就是问题所在。您在类中查找了一个*methodID*`com.main.myapp` ，但随后您尝试在!的原始*jobject*实例上调用该*methodID* 如果你想从另一个“命名空间”调用一个方法，你有几个选择：*`org.myorg.ImageRenderer`*

 *1.  该方法必须是静态的，这样找到一个类就足够了，你不需要一个对象
2.  另一个对象必须在本机方法中作为参数传递
3.  另一个对象必须可以作为原始对象（声明您的本机方法）的成员/getter 访问，然后通过 JNI 方法查找和调用访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:05:03.447

您的函数是从 Java 调用的，因此您不应调用`AttachCurrentThread`.

您的函数从 Java 接收对`org.myorg.myRenderer`对象的引用，其中 renderImageFrame() 是本机方法（每个本机方法都接收 Java 环境`env`作为第一个参数，其对象引用，通常表示为`thiz`，作为第二个参数。

如果要为`app`class 的对象调用 Java 方法 updateView() `com.main.myapp`，则应首先获取对该对象的引用。最简单的方法是将它作为参数传递给你的函数，所以现在它将被声明为

```
 JNIEXPORT void JNICALL Java_org_myorg_ImageRenderer_renderImageFrame(JNIEnv *env, jobject thiz, jobject app); 
```

或者，如果对 的引用是 的字段，或者由此类的某些方法返回，则可以`app`从 中找到对象。`thiz``app``org.myorg.myRenderer`

最后，您可能是对的`updateView()`，从 GL 线程调用需要 UI 线程的方法并不是一个好主意。您可能应该发出`post`，或发送消息，或简单地调用`runOnUIThread()`。*

# android - Double.valueOf(Double.valueOf(json.getString("latitude")) * 1E6) 代替 Android Lint Prob

> ID：13653060
> 
> 赞同：0
> 
> 时间：2012-11-30T20:56:26.243
> 
> 标签：android, google-maps

我收到以下警告：

使用 Double.valueOf(Double.valueOf(jsonurl.getString("latitude")) * 1E6) 代替 Android Lint 问题 使用 Double.valueOf(Double.valueOf(jsonurl.getString("longitude")) * 1E6) 代替

问题说明：你不应该直接调用包装类的构造函数，如newInteger(42)。而是调用“valueOf”工厂方法，如Integer.valueOf((42))。这通常会使用更少的内存.... ......

```
JSONObject e = arr.getJSONObject(i);
    jsonurl = (JSONObject) e.get("data");   

int jsonlng = (new Double(Double.valueOf(jsonurl.getString("longitude")) * 1E6).intValue());

newdata[i] = new GeoPoint(jsonlat,jsonlng); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:35:08.497

也许：

```
int jsonlng = (int) (Double.valueOf(jsonurl.getString("longitude")) * 1E6); 
```

“（new Double（...））.intValue（）”不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:44:04.570

```
(new Double(Double.valueOf(jsonurl.getString("longitude")) * 1E6).intValue()); 
```

会变成

```
(Double.valueOf(Double.valueOf(jsonurl.getString("longitude")) * 1E6).intValue()); 
```

没有警告。

# php - PDO 如何在 2 个不同的列中选择来自不同数组的两个值

> ID：13653061
> 
> 赞同：1
> 
> 时间：2012-11-30T20:56:35.500
> 
> 标签：php, sql, arrays, pdo, printf

我的数据库中有 2 列包含文本（`Products Code`和`Products Variant`）。

例如：
`Products Code`保存以下文本：C050101、C070104
并
`Products Variant`保存以下文本：RED、NULL

我想选择所有行`WHERE Code = Products Code AND Variant = Products Variant`。
根据我上面写的例子，我应该得到 2 行：
第一行`WHERE Code=C050101 and Variant=RED`
第二行`WHERE Code=C070104 and Variant IS NULL`<< **IS NULL**

我不知道该怎么做...
如果我只需要选择所有行，我就会知道该怎么做`WHERE Code = Products Code`>>

```
$arr = array('C050101','C070104');
$inclause = implode(',',array_fill(0,count($arr),'?'));
$stockstmt = $pdo->prepare(sprintf("SELECT `id`, `WebTitle`, `StockCode` FROM `stock` WHERE `StockCode` IN(%s)",$inclause));
$stockstmt->execute($arr); 
```

我将衷心感谢您的帮助。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:20:52.873

您不能`IN`为此使用谓词，因为`IN`只知道如何比较`=`并且您需要进行不同的比较以处理 NULL。

MySQL 有一个非标准的[空安全相等运算符`<=>`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_equal-to)，它知道 NULL=NULL 为真，而 NULL = 'RED' 为假。

如果您使用 MySQL 以外的其他东西，您的 RDBMS 可能支持`IS [NOT] DISTINCT`类似谓词的标准 SQL 语法。

我测试了以下，它的工作原理：

```
$arr = array('C050101','RED', 'C070104', NULL);

$sql = "SELECT `id`, `WebTitle`, `StockCode` FROM `stock`
  WHERE (`StockCode`, `StockVariant`) <=> (?, ?)
     OR (`StockCode`, `StockVariant`) <=> (?, ?)";

$stockstmt = $pdo->prepare($sql);
if ($stockstmt === false) { die(print_r($pdo->errorInfo(), true)); }

$status = $stockstmt->execute($arr);
if ($status === false) { die(print_r($stockstmt->errorInfo(), true)); } 
```

我将把它留给您如何构建谓词列表。

* * *

回复您的评论：

不建议使用文字字符串“NULL”来表示缺失或不适用的值。这就是 NULL 在 SQL 中的用途。

如果您想要一个使构建谓词更加动态的函数，请尝试以下操作：

```
function lookformultiplethings(array $arr)
{
  global $pdo;

  $where = array();
  $values = array();
  foreach ((array) $arr as $term) {
    $where[] = '('
        . join(',', array_map(function ($col) {return "`$col`";}, array_keys($term)))
        . ') <=> ('
        . join(',', array_fill(0,count($term),'?'))
        . ')';
    $values = array_merge($values, array_values($term));
  }
  $sql = "SELECT `id`, `WebTitle`, `StockCode` FROM `stock` ";
  if ($where) {
    $sql .= "WHERE " . join(' OR ', $where);
  }

  $stockstmt = $pdo->prepare($sql);
  if ($stockstmt === false) { die(print_r($pdo->errorInfo(), true)); }

  $status = $stockstmt->execute($values);
  if ($status === false) { die(print_r($stockstmt->errorInfo(), true)); }

  print_r($stockstmt->fetchAll());
}

lookformultiplethings(array(
  array('StockCode' => 'C050101', 'StockVariant' => 'RED'),
  array('StockCode' => 'C070104', 'StockVariant' => 'NULL'),
)); 
```

请注意，您传递的数组的键是合法的列名。也就是说，除非您根据真实列的白名单对其进行验证，否则不要让用户输入设置列名。

# vba - VBA MS Word 更改数字格式

> ID：13653063
> 
> 赞同：1
> 
> 时间：2012-11-30T20:56:42.007
> 
> 标签：vba, ms-word, numbers, format

我无法更改数字格式。我使用 RegExp 并从 doc 文件中读取数字，但我没有更改格式。评论行有问题。

```
Sub ChangeNumberFormat()

Dim SectionText As String
Dim RegEx As Object, Matches As Object, Match As Object
Dim i As Integer

Set RegEx = CreateObject("vbscript.regexp")
With RegEx
    .Global = True
    .MultiLine = False
    .Pattern = "(\d{1,3}\s(\d{3}\s)*\d{3}(\,\d{1,3})?|\d{1,3}\,\d{1,3})"
End With

For i = 1 To ActiveDocument.Sections.Count()
    SectionText = ActiveDocument.Sections(i).Range.Text
    If RegEx.Test(SectionText) Then
        Set Matches = RegEx.Execute(SectionText)

        For Each Match In Matches
            **Match = Format(Match, "##,##0.00")**
            MsgBox Match
        Next

        Set MsgMatches = Nothing
        Set    Match = Nothing
     End If
  Next

Set RegEx = Nothing
End Sub 
```

# z3c.form - 在测试环境中查找小部件管理器时引发 ComponentLookupError

> ID：13653066
> 
> 赞同：1
> 
> 时间：2012-11-30T20:56:56.907
> 
> 标签：z3c.form, zope.interface

我正在尝试使用 z3c.forms 开发一个新的小部件，并且我已经到了可以进行功能测试的地步。

不幸的是，当我使用表单设置测试时，当调用 updateWidgets 时会为 IWidgets 接口引发 ComponentLookupError，它应该只是从 z3c.form.field 中查找 FieldWidgets

我猜我没有在测试设置中正确注册 z3c.form，但我不知道如何修复它。

这是测试代码：

```
import unittest2 as unittest

import zope.interface
import zope.schema
from z3c.schema.optchoice import OptionalChoice

from zope.app.testing import setup as ztc_setup
from z3c.form.testing import TestRequest
from zope.schema.vocabulary import SimpleVocabulary, SimpleTerm
from zope.traversing.adapters import DefaultTraversable

from z3c.form import form, field
from widget import OptChoiceWidget, OptChoiceWidgetCustomTokenFactoryFactory

sample_terms = SimpleVocabulary([
                        SimpleTerm(value="first", title="First"),
                        SimpleTerm(value="second", title="Second")
                                ])

class ISchema(zope.interface.Interface):
    test_name = OptionalChoice(
            title= u"This is a title",
            values=sample_terms,
            value_type=zope.schema.TextLine(),
                          )
class SampleForm(form.BaseForm):
    widgets = [OptChoiceWidget]
    fields = field.Fields(ISchema)
    fields['test_name'].widgetFactory = OptChoiceWidgetCustomTokenFactoryFactory(('other', "Other"))
    ignoreContext = True

class TestFunctionalForm(unittest.TestCase):
    def setUp(self):
        #plone.z3cform/tests.py
        component.provideAdapter(DefaultTraversable, [None])
        self.context = ztc_setup.placefulSetUp(True)
    def tearDown(self):
        ztc_setup.placefulTearDown()
    def test_add_form(self):
        sample_form = SampleForm(self.context, TestRequest())
        data = sample_form.update() 
```

错误信息：

```
ERROR: test_add_form (z3cwidgetoptchoice.tests.TestFunctionalForm)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/alex/git/z3c.widget.optchoice/z3cwidgetoptchoice/tests.py", line 174, in test_add_form
    data = sample_form.update()
  File "/home/alex/.virtualenvs/optchoice/lib/python2.6/site-packages/z3c.form-2.9.1-py2.6.egg/z3c/form/form.py", line 150, in update
    self.updateWidgets()
  File "/home/alex/.virtualenvs/optchoice/lib/python2.6/site-packages/z3c.form-2.9.1-py2.6.egg/z3c/form/form.py", line 127, in updateWidgets
    (self, self.request, self.getContent()), interfaces.IWidgets)
  File "/home/alex/.virtualenvs/optchoice/lib/python2.6/site-packages/zope.component-4.0.1-py2.6.egg/zope/component/_api.py", line 112, in getMultiAdapter
    raise ComponentLookupError(objects, interface, name)
ComponentLookupError: ((<z3cwidgetoptchoice.tests.SampleForm object at 0x462d990>, <z3c.form.testing.TestRequest instance URL=http://127.0.0.1>, <zope.site.folder.Folder object at 0x3f070c8>), <InterfaceClass z3c.form.interfaces.IWidgets>, u'') 
```

这是我在堆栈跟踪中戳：

```
test_add_form (z3cwidgetoptchoice.tests.TestFunctionalForm) ... > /home/alex/.virtualenvs/optchoice/lib/python2.6/site-packages/zope.component-4.0.1-py2.6.egg/zope/component/_api.py(112)getMultiAdapter()
-> raise ComponentLookupError(objects, interface, name)
(Pdb) up
> /home/alex/.virtualenvs/optchoice/lib/python2.6/site-packages/z3c.form-2.9.1-py2.6.egg/z3c/form/form.py(127)updateWidgets()
-> (self, self.request, self.getContent()), interfaces.IWidgets)
(Pdb) self
<z3cwidgetoptchoice.tests.SampleForm object at 0x462d990>
(Pdb) self.request
<z3c.form.testing.TestRequest instance URL=http://127.0.0.1>
(Pdb) self.getContent()
<zope.site.folder.Folder object at 0x3f070c8>
(Pdb) list
122             return self.context
123
124         def updateWidgets(self, prefix=None):
125             '''See interfaces.IForm'''
126             self.widgets = zope.component.getMultiAdapter(
127  ->             (self, self.request, self.getContent()), interfaces.IWidgets)
128             if prefix is not None:
129                 self.widgets.prefix = prefix
130             self.widgets.mode = self.mode
131             self.widgets.ignoreContext = self.ignoreContext
132             self.widgets.ignoreRequest = self.ignoreRequest
(Pdb) c
ERROR 
```

更新：

我还尝试在实例化 Sample 表单之前显式注册接口，但这并没有帮助，并且 ComponentLookupError 再次引发。

```
from z3c.form import form, field, interfaces
zope.interface.classImplementsOnly(field.FieldWidgets,
                                       interfaces.IWidgets) 
```

# jquery - jQuery Tipsy 插件在 IE 上导致奇怪的选择元素行为

> ID：13653067
> 
> 赞同：1
> 
> 时间：2012-11-30T20:56:57.783
> 
> 标签：jquery, tipsy

我在 ASP.NET MVC 项目中使用 jquery [Tipsy插件以及 jquery 不显眼的验证。](http://onehackoranother.com/projects/jquery/tipsy/)我正在使用以下代码将 Tipsy 连接到验证代码：

```
$(function () {

    var options = {
        fade: true,
        trigger: 'focus',
        gravity: 's',
        opacity: 1,
        offset: 8
    };

    var validator = $('form').data('validator');

    if (validator) {

        // handle plugin events
        validator.settings.success = function () { }
        validator.settings.errorPlacement = function (errorElement, inputElement) {
            errorElement.hide();
            inputElement.attr('title', errorElement.text());
            inputElement.tipsy(options);
        }

        // handle cases where validation messages are 
        // provided by server side code via postback
        $('.input-validation-error').each(function (index, element) {
            element = $(element);
            sibling = element.siblings('.field-validation-error');

            if (sibling.length > 0) {
                element.attr('title', sibling.text());
                element.tipsy(options);
                sibling.hide();
            }
        });
    }
}); 
```

这一切都很好。但是，在 IE（至少 7-9）中，当我单击应用了工具提示的下拉菜单时，下拉菜单会出现然后立即消失。如果我单击并按住鼠标按钮，我可以滚动下拉菜单，但只要我松开，菜单就会消失。这不是预期的行为，任何其他浏览器也不会这样做。

作为参考，下拉菜单的 HTML 代码非常标准：

```
<li>
    @Html.LabelFor(x => x.BirthYear)
    <div class="field">

        @Html.DropDownListFor(x => x.BirthMonth, new SelectList(
            Enumerable.Range(1, 12).Select(x=>x.ToString("00"))), 
            Html.GetString("Label_Month").ToString())

        @Html.DropDownListFor(x => x.BirthYear, new SelectList(
            Enumerable.Range(1901, 112).Select(x=>x.ToString("0000"))), 
            Html.GetString("Label_Year").ToString())                    

        @Html.ValidationMessageFor(x => x.BirthYear)
    </div>
</li> 
```

有什么建议么？

# c++ - 在未格式化的输出 C++ 中打印出来

> ID：13653070
> 
> 赞同：0
> 
> 时间：2012-11-30T20:57:15.163
> 
> 标签：c++, io, output

我正在创建一棵霍夫曼树，我想在未格式化的输出中打印出每个字母的频率。但是，我的问题是我无法打印任何东西。这是我的过程：

```
char c;
unsigned int freqArray[256];
unsigned int valueShifted[256];

while (!cin.eof())
{
  c = cin.get();
  freqArray[(int)c]++;
} //mapping my frequency array to the letter it sees

void shifting(unsigned int *freqArray, unsigned int *valueShifted)
{
  for(int i = 0; i < 256; i++)
  {
    if(freqArray[i] > 0)
    {
      valueShifted[i] = (freqArray[i] << 24) | ((freqArray[i] << 8) & 0x00ff0000) | ((freqArray[i] >> 8) & 0x0000ff00) | (freqArray[i] >> 24); // shifting of bits
    }
  }

  shifting(freqArray, valueShifted);
  for(int i = 0; i < 256; i++)
  {
    if(valueShifted[i] > 0)
    {
      cout.write((char*)&valueShifted[i], sizeof(valueShifted[i])); //this is not printing anything
    }
  } 
```

可能有人知道为什么这不打印任何东西吗？我猜我的错误可能是因为我没有用 HEX 打印出来，但我不完全确定......如果有人能提供帮助，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:03:40.553

你想输出`unsigned int`数组中的每一个吗？

```
cout << valueShifted[i]; 
```

这`write`是一个低级写入。对于您的示例，您需要使用二进制编辑器来查看您正在编写的值。根据您的终端和数据内容，将二进制数据转储到标准输出可能会导致打印垃圾，或者什么也不会。

# css - SASS --watch 导致 Errno::EOPNOTSUPP: Operation not supported

> ID：13653074
> 
> 赞同：0
> 
> 时间：2012-11-30T20:57:37.787
> 
> 标签：css, sass, listen

**运行 sass --watch 时出现错误。以前没有发生过。**

/mypath/ 是本地安装的 ftp 目录。

我最近运行了这些命令：

*   sudo aptitude install ruby​​1.9.1-dev
*   sudo gem install --version '~> 0.8.8' rb-inotify

错误：

```
masangapu@EBS-2012:/mypath/sass$ sass --watch localStorage.scss
>>> Sass is watching for changes. Press Ctrl-C to stop.
Errno::EOPNOTSUPP: Operation not supported - /mypath/sass/.listen_test
Use --trace for backtrace.

masangapu@EBS-2012:/mypath/sass$ sass --trace --watch localStorage.scss
>>> Sass is watching for changes. Press Ctrl-C to stop.
/usr/lib/ruby/1.9.1/fileutils.rb:1140:in `initialize': Operation not supported - /mypath/sass/.listen_test (Errno::EOPNOTSUPP)
    from /usr/lib/ruby/1.9.1/fileutils.rb:1140:in `open'
    from /usr/lib/ruby/1.9.1/fileutils.rb:1140:in `rescue in block in touch'
    from /usr/lib/ruby/1.9.1/fileutils.rb:1136:in `block in touch'
    from /usr/lib/ruby/1.9.1/fileutils.rb:1134:in `each'
    from /usr/lib/ruby/1.9.1/fileutils.rb:1134:in `touch'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:173:in `works?'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:152:in `block in     usable_and_works?'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:152:in `each'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:152:in `all?'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:152:in     `usable_and_works?'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/adapter.rb:46:in     `select_and_initialize'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/multi_listener.rb:118:in     `initialize_adapter'
    from /var/lib/gems/1.9.1/gems/listen-0.6.0/lib/listen/multi_listener.rb:42:in     `start'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:307:in `watch'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin.rb:107:in `method_missing'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:444:in `watch_or_update'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:307:in `process_result'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:41:in `parse'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:21:in `parse!'
    from /var/lib/gems/1.9.1/gems/sass-3.2.3/bin/sass:8:in `<top (required)>'
    from /usr/local/bin/sass:23:in `load'
    from /usr/local/bin/sass:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:18:07.320

发现问题：

/mypath/ 是本地安装的 ftp 目录。显然 sass 不能很好地解决这个问题。

我能够运行**sass --trace --watch --poll localStorage.scss**

# regex - Perl 在 400'000 个文件中搜索和替换

> ID：13653077
> 
> 赞同：4
> 
> 时间：2012-11-30T20:57:52.250
> 
> 标签：regex, perl

我有大约 400'000 个文件需要替换一些文本。

我尝试了以下 Perl 脚本：

```
@files = <*.html>;

foreach $file (@files) {
    `perl -0777 -i -pe 's{<div[^>]+?id="user-info"[^>]*>.*?</div>}{}gsmi;' $file`;

    `perl -0777 -i -pe 's{<div[^>]+?class="generic"[^>]*>[^\s]*<small>[^\s]*Author.*?</div>.*?</div>.*?</div>.*?</div>.*?</div>}{}gsmi;' $file`;

    `perl -0777 -i -pe 's{<script[^>]+?src="javascript.*?"[^>]*>.*?</script>}{}gsmi;' $file`;

    `perl -p -i -e 's/.css.html/.css/g;' $file`;
} 
```

我没有深入的 Perl 知识，但脚本运行速度太慢（每天只更新大约 180 个文件）。

有没有办法加快速度？

先感谢您！

**PS：**当我在较少数量的文件上测试它时，我注意到性能要好得多......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T21:06:14.497

从 perl 调用 perl 总是比在一个进程中完成所有工作要慢。所以，解决方案可能是

```
perl -i -pe 'BEGIN { undef $/ }
             s{<div[^>]+?id="user-info"[^>]*>.*?</div>}{}gsmi;
             s{<div[^>]+?class="generic"[^>]*>[^\s]*<small>[^\s]*Author.*?</div>.*?</div>.*?</div>.*?</div>.*?</div>}{}gsmi;
             s{<script[^>]+?src="javascript.*?"[^>]*>.*?</script>}{}gsmi;
             s/.css.html/.css/g;
    ' *.html 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-30T21:10:44.003

首先，如果您将 400,000 个文件名加载到内存中，那会占用一些内存。您可以轻松地遍历文件列表，例如：

*   `File::Find`
*   `opendir`+ `while (readdir($dh))` （不加载整个列表）

其次，使用反引号会在 shell 中产生一个新进程，而且效率非常低。您可以正常打开文件，将它们啜饮，然后重新打印到相同的文件名。例如

```
while (my $file = readdir($dh)) {
    open my $fh, "<", $file or die $!;
    local $/;
    my $text = <$fh>;                # slurp file
    $text =~ s/....//g;              # do your substitutions
    open $fh, ">", $file or die $!;
    print $fh $text;                 # overwrite file, same as -i switch does
} 
```

最后.. 使用正则表达式编辑 html 并不理想。它可能适用于您的情况，但花一些时间学习 html 解析器可能是值得的。不确定它是否适合这种特殊情况，但可能值得研究，以使您的代码更稳定。

# google-sheets - 引用公式中的当前单元格值

> ID：13653091
> 
> 赞同：1
> 
> 时间：2012-11-30T20:58:56.407
> 
> 标签：google-sheets

我想在公式中使用当前单元格值。假设我有单元格 A1，如果此单元格不是空白，则执行一些操作，否则该值应保持：

```
=IF(ISBLANK(A1), sg, A1) 
```

但是，这会导致错误：`circular reference detected`. 我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:54:18.200

公式“=IF(ISBLANK(A1), sg, A1)” 遵循这种格式 =IF(test, test is true_value, test is false_value)，所以在您的情况下，如果单元格 A1 为空白（即包含空字符串“” ) 您的测试结果为 TRUE，您的公式将返回 (sg)。

如果您的公式包含在单元格 A1 中，将始终生成“错误：检测到循环依赖”，这会导致无法解决的无限循环，您测试的表达式依赖于测试生成的值。如果单元格 A1 引用包含您的公式的单元格，您还将得到“错误：检测到循环依赖”生成。此外，单元格 A1 不能为空白并包含您的公式，这种情况是互斥的。

如果返回 (sg)，则您的公式假定 (sg) 是对标记为 sg 的命名范围中包含的第一个值的引用，如果 (sg) 是您希望在 A1 为空白的情况下出现在公式单元格中的文本字符串，则它需要用引号括起来，即 =IF(ISBLANK(A1), "sg", A1)。

您可以将您的测试放在您的“其他一些操作”中的一个单元格中，该单元格不被您的“其他一些操作”生成的值引用或依赖

假设单元格 Z50 在单元格 A1 的值所依赖的引用和依赖项之外，并且它包含您的“其他一些操作”之一

**单元格 Z50 公式**...... ***=IF(A1="","",ROUNDDOWN(A1, 1)***

**单元格 A1 值**......空白或“”............15.2576536...... ......................106.93244

**单元格 Z50 结果**............真，输出 =.......假，输出 = 15.2...... ....假，输出=106.9

# actionscript-3 - 鼠标移出闪光灯时如何重播当前帧？

> ID：13653099
> 
> 赞同：0
> 
> 时间：2012-11-30T20:59:26.447
> 
> 标签：actionscript-3, flash

这是我到目前为止所得到的：

```
stop();

stage.addEventListener(MouseEvent.MOUSE_OVER, playMovie); function playMovie(event) { play(); }
stage.addEventListener(MouseEvent.MOUSE_OUT, stopMovie); function stopMovie(event) { gotoAndStop(0);}

stop(); 
```

我正在寻找当前帧的反向函数而不是“gotoAndStop”

谢谢

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:29:41.523

一种方法可以做到：

```
//a function you can call and pass in the item/timeline you want played backwards
function goBackwards(item:MovieClip):void {
    item.stop(); //make sure the item isn't playing before starting frame handler below
    item.addEventListener(Event.ENTER_FRAME, moveBackwards); //add a frame handler that will run the moveBackwards function once every frame
}

//this function will move something one frame back everytime it's called
function moveBackwards(e:Event):void {
    var m:MovieClip = e.currentTarget as MovieClip; //get the movie clip that fired the event
    if(m.currentFrame > 1){ //check to see if it's already back to the start
        m.prevFrame();  //if not move it one frame back
    }else{
        m.removeEventListener(Event.ENTER_FRAME,moveBackwards); //if it is (at the start), remove the enter frame listener so this function doesn't run anymore
    }
} 
```

因此，如果您要向后播放的对象被调用`bob`，您可以这样做 `goBackwards(bob);`：如果您想在要向后播放的时间线内使用它，请执行`goBackwards(this);`.

# c# - Winform UserControl 和 wpf WindowsFormHost：UserControl 超出了 WindowsFormHost 的边缘

> ID：13653100
> 
> 赞同：0
> 
> 时间：2012-11-30T20:59:34.047
> 
> 标签：c#, .net, wpf, xaml, windowsformshost

出于某种原因，我无法让我的 Winform 用户控件适合 WindowsFormsHost。这是我正在使用的 xaml：

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="326*" />
    <ColumnDefinition Width="300*" />
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>
    <RowDefinition Height="264*" />
    <RowDefinition Height="100*" />
    <RowDefinition Height="50*" />
  </Grid.RowDefinitions>
  <WindowsFormsHost   Grid.Row="1"
                      Grid.Column="0">
    <winforms:ServicesUserControl x:Name="servicesUserControl"
                                  UserCanEditRevenue="True"
                                  BorderStyle="Fixed3D">
    </winforms:ServicesUserControl>
  </WindowsFormsHost>
</Grid> 
```

这是一个屏幕截图，显示我的意思：

这是原始的用户控件： ![在此处输入图像描述](../Images/74fdf4b6489928d16214dbcf530c8ed2.png)

但是当我把它放在 WindowsFormHost 中时，我得到了这个： ![在此处输入图像描述](../Images/1373945bdd79cfd8f9d8605aabca7b09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:16:35.687

除非 UserControl 有自己的逻辑来调整列的大小，否则 UserControl 的宽度将绑定到其列的宽度。我会尝试在 ScrollViewer 中实现 WinFormsHost，如果这将是可接受的布局。

```
<ScrollViewer Grid.Row="1"
              Grid.Column="0">
  <WindowsFormsHost>
    <winforms:ServicesUserControl x:Name="servicesUserControl"
                                  UserCanEditRevenue="True"
                                  BorderStyle="Fixed3D" />
  </WindowsFormsHost>
</ScrollViewer> 
```

# cakephp - 如何在公共函数 beforeSave() 中获取 id

> ID：13653102
> 
> 赞同：1
> 
> 时间：2012-11-30T21:00:02.563
> 
> 标签：cakephp, cakephp-model

我需要在一个模型中获取在 beforeSave 函数（）中添加或修改的最后一个 id。我试试这个：

`$this->model->id;` 但`$this->data['model']['short']`它不起作用。

这在 cakephp 中是正确的，还是有另一种方法可以在模型中获取 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:47:58.783

我在**模型**中使用这个函数来存储模型的保存ID：

```
function afterSave($created){   
    if($created){
        $this->inserted_ids[] = $this->getInsertID();
    }
    return true;
} 
```

然后只需使用`$this->ModelName->inserted_ids;`

# facebook-graph-api - 工作几个月后，FQL 查询错误地返回正好 100 个结果

> ID：13653103
> 
> 赞同：1
> 
> 时间：2012-11-30T21:00:05.477
> 
> 标签：facebook-graph-api, facebook-fql

我有一个查询照片列表的 FQL 查询。几个月来，它按预期工作，从以下查询返回约 450 张照片：

```
SELECT object_id,src FROM photo WHERE owner=me() 
```

然而，突然之间，结果的上限为 100 - 也就是说，只返回最多的 100 个结果。

我知道这不是客户端代码错误——在我的情况下是一个 iOS 应用程序——因为这发生在我的生产代码中，该代码自正常工作以来尚未更新。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:00:05.477

我仍然不知道这个问题的原因，但我发现了一个简单的解决方法：`limit`在查询中添加一个非常高的参数。

例子：

```
SELECT object_id,src FROM photo WHERE owner=me() limit 1000 
```

如果您的结果总计小于该`limit`值，则返回预期的数字（在我的情况下大约为 ~450）。

`limit`注意： Facebook可能有一个最大值。例如，假设您期望 10,000+ 个结果 - FQL 会接受 20,000 的限制吗？我不知道。如果您遇到这种情况，请发布您的结果。

# javascript - 从非检票口字段访问表单元素

> ID：13653105
> 
> 赞同：0
> 
> 时间：2012-11-30T21:00:18.947
> 
> 标签：javascript, forms, wicket

我正在尝试访问不是检票口组件的表单值，但我不知道该怎么做。

我有一个 TextField firstName，TextField lastname，我从 javascript 中获取了一个值，我想将它传递给我的页面的 onSubmit 表单，但我不确定如何访问它。

或者也许我可以通过另一种方式获得价值。

这是代码的一部分

```
<script type="IN/Login"> 
<input type="hidden" name="linkedin-id" value="<?js= id ?>" wicket:id="hidden" />
</script> 
```

我假设是因为 wicket:id 在脚本标签中，它认为我没有将组件添加到 html 页面。

我要做的就是将 id 传递到我的检票口表单中的“onSubmit”方法中。

任何帮助，将不胜感激。我对javascript真的很陌生，所以看起来这很容易做到。我只是没能看到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:43:13.110

对不起，开始在上面的评论中发帖。我想通了。我将其更改为如下。

```
<script type="IN/Login"> 
<input type="hidden" name="linkedin-id" value="<?js= id ?>" />
</script> 
```

在我的 onSubmit

```
Request request = getRequest();
IRequestParameters irp = request.getPostParameters();
System.out.println("link id " + irp.getParameterValue("linkedin-id")); 
```

# css - 是什么导致了 ipad 上两个 div 之间的细线？

> ID：13653106
> 
> 赞同：3
> 
> 时间：2012-11-30T21:00:25.903
> 
> 标签：css, ipad

只能在实际的 iPad/iPhone 上查看（而不是在任何虚拟版本上）我在[这个网站上的两个底部 div 之间有一条细的、几乎无法察觉的线](http://www.strategies-coaching.com)

奇怪的是，一旦你放大，这条线就会消失，使用边框或负边距只会让问题变得更糟。（不要评判我的代码，由于客户强烈使用基于 CMS 的托管，我不得不跳过很多圈不想离开）。

编辑：这是该行在 iPad 上的屏幕截图。你可以点击放大查看它，因为它真的很薄。

[![http://i.stack.imgur.com/K1aUg.jpg](../Images/0594e1f206583f0a02f9d15836dadf35.png)](https://i.stack.imgur.com/K1aUg.jpg)

和违规部分：

```
<div id="bottom_gradient">
    &nbsp; <br />
    <br />
</div>

<div id="footer">
    <div id="footer_container">
        <div class="content_left_footer">
        <br />          
            <img src="images/slogan_icon.png" />
            </div>
            <div class="contact">
            <b>t.</b> 787.439.0924<br />
            <b>fax</b> 1.888.201.1222<br />
            <b>e-mail:</b> econcepcion@strategies-coaching.com<br />
            P.O. BOX 934 Dorado, P.R. 00646
            <br />
            <br />
            </div>
        </div>
        <div class="content_right_footer">
        <br />
        <br />
        <br />
            <div class="member">
            <br />
            MIEMBRO DE<br />
            <br />
            MEMBER OF
            <br />
            <br />
            </div>
        <div class="images">
        <div class="shrm"></div>
        <div class="icp"></div>
        <div class="astd"></div>
        </div>
        </div>
  </div>
</div></div>
<!-- the line appears above this div -->
<div class="column_center" style="color:white;text-align:center;">
   copyright 2012 Strategies
   <br />
   <br />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:59:16.717

看起来你的`<div id="white">`背景可能会在`<div id="footer">`. 尝试将`<div id="footer">`外部和之后移动`<div id="white">`，看​​看是否有帮助。

或者，如果您不能这样做（或者它不起作用），请尝试将 的高度设置为`<div id="footer">`超过所需的高度，并将其边距设置为使其延伸到 下方`<div id="white">`，从而覆盖正在窥视的一点点。

# asp.net - 在 IIs 7 上部署水晶报表

> ID：13653110
> 
> 赞同：0
> 
> 时间：2012-11-30T21:00:56.153
> 
> 标签：asp.net, iis-7, crystal-reports

我在 IIs 7 中配置我的网站时遇到问题，当我看到网页时出现以下错误： ![在此处输入图像描述](../Images/9f68791ee0ed32935c34ce1953bff161.png)

我已经安装了可再发行组件并将允许应用程序 32 位更改为真，我需要什么？我真的很绝望。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:55:21.280

将 Crystal 报表 dll 添加到 Web 应用程序的 [bin] 目录中。

# arrays - 检查扩展的更好方法

> ID：13653111
> 
> 赞同：1
> 
> 时间：2012-11-30T21:00:58.783
> 
> 标签：arrays, vb.net, file-extension

嘿，我有以下代码：

```
Dim validFileTypes As String() = {".bmp", ".gif", ".png", ".jpg", ".jpeg", ".tif"}

For x = 0 To NumberOfBoxes - 1
        With myTxtData(x)
            If Not Fields("customField" & z).Value.Equals(DBNull.Value) Then
                If InStr(Fields("customField" & z).Value, "@") <> 0 Then
                    'Lower case the email address
                    .Text = StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase)
                ElseIf InStr(StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase), ".jpg") <> 0 Then
                    'It contains an image!
                Else
                    .Text = StrConv(Fields("customField" & z).Value, VbStrConv.ProperCase)
                End If
  etc etc..... 
```

而不是我这样检查：

```
ElseIf InStr(StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase), ".jpg") <> 0 
OR InStr(StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase), ".png") <> 0 
OR InStr(StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase), ".gif") <> 0 
...etc... 
```

我如何使用我定义的**validFileTypes**来做同样的事情，但代码更少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:05:00.577

您可能需要添加一些代码，但这应该会让您走上正确的道路：

```
Dim isImage as Boolean = False

For each validFileType in validFileTypes
     If InStr(StrConv(Fields("customField" & z).Value, VbStrConv.Lowercase), validFileType) <> 0 Then
         isImage = True
     End If
Next 
```

# ios - 多线程GLKView绘图

> ID：13653113
> 
> 赞同：7
> 
> 时间：2012-11-30T21:01:09.783
> 
> 标签：ios, multithreading, glkit

我的主视图控制器包含许多子视图。一个这样的子视图是`GLKView`链接到`GLKViewController`. `GLKViewController`似乎是负责更新`GLKView`' 显示的人，并且自动在主线程上调用该更新函数 。

我在这个主视图控制器中的其他视图之一是`UITableView`. 当用户与表视图交互时，`GLKView`停止更新。

我承认，我对 OGL ES 编程很陌生，所以我不确定如何处理这个问题。`GLKViewController`我需要得到

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect; 
```

方法在与主线程不同的线程上调用，因此我可以`GLKView`在用户与其他元素交互时保持动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T15:58:25.033

GLKViewController 使用 CADisplayLink 以与您的显示刷新率相匹配的频率调用更新/绘制。当您的 tableview/scrollview 开始跟踪触摸时，运行循环开始赋予它所有优先级。您可能必须拆分您自己的 GLKView 和 CADisplayLink（而不是使用 GLKViewController），以便修改 CADisplayLink 的运行循环模式，以便即使 tableview/scrollview 正在跟踪触摸，它也会继续运行。有关更多信息，请参阅此[讨论](https://stackoverflow.com/questions/4876488/animation-in-opengl-es-view-freezes-when-uiscrollview-is-dragged-on-iphone)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:52:31.177

这很棘手，我没有找到一个好的方法，我相信有更好的方法，但对我来说性能不是一个大问题，所以我接受了。**我没有完整的解决方案**，也没有**按照您要求的方式****解决**问题（即通过线程渲染），但至少可能值得一看。如果我能想出一个更好的解决方案，我会更新它，但现在这就是我所拥有的。

 **我这样做的方式是，我实际上在“顶部”有一个透明的 ViewController `glkViewController`，并且我想在 GLKViewController 顶部与之交互的任何东西（例如表格视图、按钮和几乎所有 UI 的东西）都被添加到其中.

我这样做的方式是我的视图控制器有一个单例对象，`OverlayViewController`我发现它很有用，因为我想从任何地方轻松访问它，不知道这是否适合您的设计，但这对我来说很有意义。这是在`GLKViewController::viewWillAppear`选择器中添加的。

这真的是所有的魔法。所以我有一个覆盖视图，它可以托管任何 IOKit 类型的对象。我像这样添加它（更容易`viewWillAppear:`从我的`GLKViewController`子类中粘贴我的）

```
- (void) viewWillAppear: (BOOL) animated {
    [[[OverlayViewController shared] view] setUserInteractionEnabled:NO];
    [self.parentViewController.view addSubview: [[OverlayViewController shared] view]];
    ...
} 
```

这基本上意味着您将看到两个视图控制器，但它们彼此“独立”。

然而，这种方法存在**明显的问题**，例如跟踪哪个视图当前将接受用户交互的繁琐工作，因为它们彼此重叠，因此无法处理。

话虽如此，我正在研究是否可以调度一个专用于在 GLKit 中渲染的线程。**

# java - 如何获取计算机正在运行的 java 操作系统？

> ID：13653114
> 
> 赞同：-3
> 
> 时间：2012-11-30T21:01:13.480
> 
> 标签：java, operating-system

> **可能重复：**
> [如何以编程方式确定 Java 中的操作系统？](https://stackoverflow.com/questions/228477/how-do-i-programmatically-determine-operating-system-in-java)

在 Java 中，如何获取运行我的 Java 小程序的操作系统类型（Mac、Windows、Linux 等）？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:02:40.800

系统属性[`os.name`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties%28%29)提供操作系统的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:07:31.500

```
public class OpertingSystemInfo 
{
  public static void main(String[] args)
  {
    String nameOS = "os.name";  
    String versionOS = "os.version";  
    String architectureOS = "os.arch";

    System.out.println("\n  The information about OS");
    System.out.println("\nName of the OS: " + System.getProperty(nameOS));
    System.out.println("Version of the OS: " + System.getProperty(versionOS));
    System.out.println("Architecture of THe OS: " + System.getProperty(architectureOS));
  }
} 
```

[http://www.roseindia.net/java/beginners/OSInformation.shtml](http://www.roseindia.net/java/beginners/OSInformation.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:02:57.740

```
System.out.println(System.getProperties().get("os.name")); 
```

# oracle - 是否可以使用 JDBC 传递包含 XmlType 的 Oracle 集合？

> ID：13653116
> 
> 赞同：1
> 
> 时间：2012-11-30T21:01:20.707
> 
> 标签：oracle, jdbc, xmltype

如何使用 jdbc 调用存储过程，其中 IN 参数是一个嵌套表，其中包含一个包含 xmltype 的结构？

例如，下面使用瘦驱动程序调用 p_my_package.insert_proc 的 jdbc 代码是什么，其中 xml 数据可能大于 4000 个字符？

```
CREATE OR REPLACE TYPE ot_config_info
AS
  OBJECT
  (
    config_id  VARCHAR2(512),
    config_xml sys.xmltype );

CREATE OR REPLACE type tt_config_list
AS
  TABLE OF ot_config_info;

CREATE OR REPLACE
PACKAGE p_my_package
IS
  PROCEDURE insert_proc(
      p_config_list tt_config_list);
END p_my_package; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:11:42.173

```
stmt = conn.createStatement(); 
```

String insertQuery = "INSERT INTO TABLENAME (ID, NAME, STUDENTXML)"+ " VALUES(?,?,XMLTYPE(?))";

pStmt = (OraclePreparedStatement) conn.prepareStatement(insertQuery); pStmt.setObject(1, "001"); pStmt.setObject(2, "警惕"); pStmt.setStringForClob(3, "studentXMLString");

pStmt.executeUpdate();

使用 ojdbc14.jar，从[这里下载](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html)

# outlook-2007 - Outlook 公共联系人

> ID：13653117
> 
> 赞同：0
> 
> 时间：2012-11-30T21:01:29.503
> 
> 标签：outlook-2007

我一直在研究如何在用户之间共享联系人。我知道如何使用共享我的联系人文件夹选项，但我想要一个通用联系人文件，我可以将它存放在每个人都可以访问且无需被邀请查看的网络驱动器上。这是可能的还是白日梦？提前感谢您的指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T16:34:51.427

链接不受欢迎，但答案是谷歌搜索，无法进一步改进。请参阅这些链接。

[http://www.fatcow.com/knowledgebase/read_article.bml?kbid=3465](http://www.fatcow.com/knowledgebase/read_article.bml?kbid=3465)

[http://office.microsoft.com/en-us/outlook-help/create-and-share-a-public-folder-HA010148803.aspx](http://office.microsoft.com/en-us/outlook-help/create-and-share-a-public-folder-HA010148803.aspx)

[http://www.msoutlook.info/question/292](http://www.msoutlook.info/question/292)

# c# - 动态文本框滚动条

> ID：13653118
> 
> 赞同：1
> 
> 时间：2012-11-30T21:01:34.560
> 
> 标签：c#, winforms, dynamic, textbox, scrollbar

我正在尝试向我的动态文本框添加一个垂直滚动条。

这是代码

```
TextBox spellText = new TextBox()   { Multiline = true, ScrollBars.Vertical }; 
```

我得到错误：

> 初始化器成员声明器无效

ScrollBars.Verticle = True 也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:07:34.887

假设 WinForms，声明并不完全正确。试试这个：

```
TextBox spellText = new TextBox() { Multiline = true,
                                    ScrollBars = ScrollBars.Vertical }; 
```

# r - R 分段增长回归，lmer()

> ID：13653124
> 
> 赞同：1
> 
> 时间：2012-11-30T21:01:55.310
> 
> 标签：r, lme4, lmer

我想对我的数据进行**分段增长回归**，基于 Raudenbush/Bryk(1992/2002)，分层线性模型，p178 - 179。

我将不得不应用一个多层次模型来做到这一点。

我是我需要使用的 lme4-package。

我的数据包含每个 ID 一段时间内的销售收入。我有两个断点：sales>10 和 sales>25。我想分析断点前后的销售额增长情况。

每个ID都有两个变量：var1：123455555555（当销售额超过10（断点1）时，变量保持不变）var2：000000006789（当销售额超过25（断点2）时，变量在增加，在25之前是0)

```
df = data.frame (
ID = c(1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2),
sales = c(1,4,10,12,20,26,28,2,5,9,12,13,18,26,29,35),
var1 = c(1,2,3,3,3,3,3,1,2,3,4,4,4,4,4,4),
var2 = c(0,0,0,0,0,1,2,0,0,0,0,0,0,1,2,3)) 
```

我的多级模型具有以下形式：

Y= b0i + b1i*a1ti + b2i*a2ti + eti

（对不起，我不允许发布图片和公式：（）

a1ti 和 a2ti 是我指定片段的编码变量（var1 和 var2）。

第 1 级：每个人的重复观察
第 2 级：受试者之间的水平

也许有人可以解释一下我必须在我的 lmer()-Code 中指定级别 1 和级别 2 的位置以及我将如何获得我的两个部分的两个斜率？我是否必须在括号之间添加规格为 O + ... 或 1 + ... 才能仅获得截距等？

我想我的代码看起来像这样：

```
test <- (lmer(sales ~ ID*var1 + (1|var1) + (1|ID), df)) 
```

或这个：

```
test <- (lmer(sales ~ var1 + var2 + (1|var1) + (1|var2), df)) 
```

谢谢！

最好的祝福亚历克萨

# java - BoneCP 无法从断开的连接中恢复

> ID：13653129
> 
> 赞同：4
> 
> 时间：2012-11-30T21:02:18.757
> 
> 标签：java, jdbc, connection-pooling, bonecp

我对 BoneCP (0.7.1 RELEASE) 有疑问。我虽然`BoneCP.getConnection()`确保它会返回 Connection 对象假设 DB 是活动的。

这是我配置我的池的方式

```
private void setupConnectionPool() throws SQLException
{
    // setup the connection pool
    String connectUri = "jdbc:mysql://master-mysql:3306/base?zeroDateTimeBehavior=convertToNull&tinyInt1isBit=false&useCompression=true";

    BoneCPConfig config = new BoneCPConfig();
    config.setJdbcUrl(connectUri);
    config.setUsername("dbapp");
    config.setPassword("meh");
    config.setMinConnectionsPerPartition(5);
    config.setMaxConnectionsPerPartition(10);
    config.setPartitionCount(1);
    config.setConnectionTimeoutInMs(5 * 1000);

    this.connectionPool = new BoneCP(config); // setup the connection pool
} 
```

然后在代码的某个地方我像这样使用它

```
 // I'm using Apache DbUtils
    QueryRunner run = new QueryRunner();
    Object result = run.query(this.connectionPool.getConnection(), query, handler, start, limit); 
```

尝试运行此查询会引发`SQLException`状态`08S01`（通信链接故障）。

随后调用`this.connectionPool.getConnection()`返回良好的连接。

但这不是连接池的一个完整点，这样我就不必自己处理丢失连接的情况了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:28:56.783

1.  它应该捕获 08S01 并清除池中的所有连接。但是，如果您有多个线程，则可能有一个线程已经签出了可能失败的连接（其余连接应该再次恢复正常）。

2.  请试用 0.8.0-beta3-SNAPSHOT；我最近清理了那个实现，并添加了一堆健壮性测试来测试各种场景，其中包括 08S01。

# ios - 为什么要在 Ad Hoc Distribution Provisioning Profile 之前使用 Development Provisioning Profile？

> ID：13653134
> 
> 赞同：0
> 
> 时间：2012-11-30T21:02:36.590
> 
> 标签：ios, share, provisioning-profile, beta, ad-hoc-distribution

作为个人开发人员，我为什么要费力创建开发配置文件？

如果我想在我的设备上安装我的应用程序并与亲密的朋友分享以进行测试，那么直接使用分发配置文件（Ad Hoc）不是更有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:05:15.850

谁说开发配置文件是强制性的？

您不必使用开发配置文件。

Adhoc 旨在将其传递给测试目的。

如果您想单步执行代码并查看应用程序崩溃的方式/位置等，那么您需要使用开发配置文件。（因为有些错误永远无法在模拟器上识别）

否则 ADHo 就足够了。

# bash - bash 上的双缓冲区

> ID：13653141
> 
> 赞同：0
> 
> 时间：2012-11-30T21:02:54.663
> 
> 标签：bash

我有一个脚本，每 N 秒循环打印一次信息

```
function exit_loop
{
    tput rmcup
    tput cnorm
    exit 0
}

function main_loop
{
    tput smcup
    tput civis

    trap exit_loop SIGINT

    while [ true ]; do
        sleep $DELAY &
        clear
        # do things and print
        wait
    done
} 
```

以前的工作很好，但是当脚本在刷新之间打印时很难看，存在某种双缓冲区。

### 笔记

我的脚本在输出中使用颜色`echo -e`和`printf`句子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T03:55:42.250

最接近双缓冲区的是 rici 的回答：在清除屏幕*之前*`# do things and print`，将输出重定向到临时文件中做所有事情；然后清除屏幕并 cat 临时文件。

 *或者您可以将光标移动到屏幕顶部而不清除它，然后覆盖那里的内容。但是，您有责任清除超出新文本末尾的任何剩余旧文本。*

# spring-mvc - 在 Portlet Spring MVC 中不再调用 @ModelAttribute 方法

> ID：13653144
> 
> 赞同：2
> 
> 时间：2012-11-30T21:03:13.653
> 
> 标签：spring-mvc, liferay, portlet

我的问题归结为：你如何让 spring mvc`@ModelAttribute`在它已经被填充后调用？

详细地说，我正在使用 Ashish Sarin 的*Portlets in Action* 的第 8 章中的 BookCatalog 示例（这真的很好），我遇到了一个问题， `@ModelAttribute`即使在连续加载时，也只调用一次带有注释的方法。例如：

1.  显示 BookCatalog Portlet
2.  单击编辑 Book1。Book1 显示在编辑窗体中
3.  点击首页
4.  单击编辑 Book2。Book1*仍然*显示在编辑表单中

我在每个方法的开头添加了 sysouts，以查看在哪里调用了什么。结果如下：

```
showBooks 
getBook!
initBinder
showEditBookForm
showBooks
initBinder <- Where is getBook!?
showEditBookForm 
```

我在某处读到，`@ModelAttribute`只要`@ModelAttribute` 请求参数，就会调用方法。所以我尝试添加`@ModelAttribute("book") Book book`到 showEditBookForm 但似乎仍然没有触发该`@ModelAttribute`方法。

我正在使用 Spring 3.1.3.RELEASE 并使用 maven 部署到 Liferay 6.1.1。

任何援助将不胜感激！

编辑书控制器：

```
@Controller
@RequestMapping(value="VIEW")
@SessionAttributes({"book"})
public class EditBookController {

    ...

    @RenderMapping(params="myaction=editBookForm")
    public String showEditBookForm(@ModelAttribute("book") Book book) {
       System.out.println("showEditBookForm");
       return "editBookForm"
    }

    @InitBinder("book")
    public void initBinder(WebDataBinder binder) {
       System.out.println("initBinder");
       binder.registerCustomEditor(Long.class, new LongNumberPropertyEditor());
       binder.setDisallowedFields(new String[] {"isbnNumber"});
    }

    @ModelAttribute("book")
    public Book getBook(@RequestParam Long isbnNumber) {
       System.out.println("getBook!");
       return bookService.getBook(isbnNumber);
    }

    ...
} 
```

图书控制器：

```
@Controller
@RequestMapping(value = "VIEW")
public class BookController {
    ...
    @RenderMapping
    public String showBooks(RenderResponse response,SessionStatus sessionStatus) {
       System.out.println("showBooks");
       return "home";
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T01:19:17.447

根据这行代码：

```
@SessionAttributes({"book"})
public class EditBookController { 
```

您将“书”属性用作会话属性。这意味着第一次向门户发出请求时，框架将验证具有该名称的属性是否存在于 Portlet 会话中。如果不是，它会调用相应的`@ModelAttribute`方法生成一个实例并放入Session中。但是如果 Session 中已经有一个具有该名称的属性，则 Controller 将使用现有对象。

因此，当您第一次调用 Book Catalog Portlet 时，会生成 Book Attribute 的实例并将其存储在 Session 中。但是第二次——因为对象已经在会话中——Portlet 将使用第一次请求中生成的对象。如果您想在渲染或操作请求后清除存储在 Session 中的每个对象，您只需调用`SessionStatus.setComplete()`以触发 Session 清除。

这就是理论和书中所说的，但是其中存在一些错误的行为，`SessionStatus.setComplete()`并且[书作者对此有一些想法](http://www.google.com.pe/url?sa=t&rct=j&q=manning%20portlet%20in%20action%20buggy&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://www.manning-sandbox.com/thread.jspa?threadID=39694&ei=dlO5UKv1FJPi9gSDo4CoBQ&usg=AFQjCNG7_RhYPkbJzDSaIgjZXjY6MCXZxg)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:50:48.113

只是为了说明我最终登陆的内容：

```
@RenderMapping(params="myaction=editBookForm")
public String showEditBookForm(
        @ModelAttribute("book") Book book
        , @RequestParam Long isbnNumber
        , SessionStatus sessionStatus) {
        System.out.println("showEditBookForm");

       if(book != null 
          && book.getIsbnNumber() != isbnNumber) {
           sessionStatus.setComplete();
       }

       return "editBookForm";
} 
```

# apache2 - Tomcat 当前线程数

> ID：13653147
> 
> 赞同：5
> 
> 时间：2012-11-30T21:03:17.510
> 
> 标签：apache2, tomcat7

Tomcat 和 appache2 通过 AJP 连接。我有这些用于 tomcat 和 apache 的配置：

```
<Connector port="8009" protocol="AJP/1.3"
           URIEncoding="UTF-8"
           redirectPort="8443"
           connectionTimeout="20000"
           maxThreads="512" />

<IfModule mpm_event_module>
    StartServers          5
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadLimit          64
    ThreadsPerChild      25
    ServerLimit        1024
    MaxClients          512
    MaxRequestsPerChild   0
</IfModule> 
```

当我去 tomcat manager 时，我看到：

```
"ajp-bio-8009"
Max threads: 512 Current thread count: 256 Current thread busy: 231 
```

当前线程busy有时会达到256。为什么当前线程数没有设置为512？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:47:10.083

当前线程由apache动态管理。

来自apache源代码中的worker.c：线程根据需要启动。以下是启动工作线程的主要流程。

```
static int worker_run(apr_pool_t *_pconf, apr_pool_t *plog, server_rec *s)
  startup_children(remaining_children_to_start);  //server/mpm/worker/worker.c
     if (make_child(ap_server_conf, i) < 0) {     //server/mpm/worker/worker.c
       child_main(slot);                          //server/mpm/worker/worker.c
         rv = apr_thread_create(&start_thread_id, thread_attr, start_threads
         rv = apr_thread_create(&threads[i], thread_attr, worker_thread, my_info, pchild); 
```

并且当空闲线程> max_spare_threads 时，apache 将尝试通过杀死子进程/线程来减少空闲线程以减少空闲线程数。

```
if (idle_thread_count > max_spare_threads) {
    /* Kill off one child */
    ap_worker_pod_signal(pod, TRUE);
    retained->idle_spawn_rate = 1;
} 
```

apache在内部管理这些子进程，并使用信号与子进程通信以根据需要调整线程。所有线程都在`ap_scoreboard_image->servers[i][j];`

apache 将监视线程数，并使用套接字发送让 infoCollector 知道。大致通过以下代码（删除了无关的行）

```
./httpd/modules/cluster/mod_heartbeat.c
    for (i = 0; i < ctx->server_limit; i++) {
         ....
            for (j = 0; j < ctx->thread_limit; j++) {
                ws = &ap_scoreboard_image->servers[i][j];
                if (res == SERVER_READY && ps->generation == mpm_generation) {
                    ready++;
                }
            }
        }

    len = apr_snprintf(buf, sizeof(buf), "v=%u&ready=%u&busy=%u", MSG_VERSION, ready, busy);
    ...
    rv = apr_socket_sendto(sock, ctx->mcast_addr, 0, buf, &len); 
```

**在 Tomcat 中：** 这些线程信息通过以下方式接收：./tomcat/java/org/apache/catalina/ha/backend/CollectedInfo.java 并通过以下方式显示：/Users/twer/lab/tomcat/java/org/apache/catalina/经理/StatusTransformer.java

```
writer.write(" currentThreadCount=\"" + mBeanServer.getAttribute(tpName, "currentThreadCount") + "\""); 
```

这里显示的大部分代码都是主要流程，无关的行被删除。下载源代码以了解更多信息。下载apache src：[http](http://www.apache.org/dist/httpd/?C=S;O=A) ://www.apache.org/dist/httpd/?C=S;O=A 下载tomcat src：http: [//tomcat.apache.org/download-70.cgi](http://tomcat.apache.org/download-70.cgi)

# ios - 可拖动的 UIImageViews 副本

> ID：13653148
> 
> 赞同：0
> 
> 时间：2012-11-30T21:03:22.830
> 
> 标签：ios, objective-c, drag-and-drop, uiimageview

我需要制作一个启用了拖放功能的子类 UIImageView 的精确副本，因此我可以拖动它但留下一个副本来替换它，或者只是制作一个我可以拖动到另一个地方而不是第一个地方的副本。

一些截图来解释：

拖动前

![](../Images/35a2c01baf560691f92ee1389f07a106.png)

拖动：

![](../Images/1996df244c541d88f7abb85b7df22114.png)

正如你所看到的，我想把纸杯蛋糕留在原处，这样我就可以继续从中拖动多个副本。

* * *

没关系...我想通了！如何？我在de subclassed UIImageView中创建了另一个实例，复制了每个属性（UIImage，delegate，frame）将它添加到同一个superview并使用协议将它传递给我需要它的UIView......

解决方案：

编码：

```
#import <UIKit/UIKit.h>
#import "DragAndDrop.h"

@interface DraggableImageView : UIImageView

@property (weak, nonatomic) id <DragAndDrop> delegate;

@property CGPoint startLocation;
@property (strong, nonatomic) DraggableImageView *copied;

@end

#import "DraggableImageView.h"

@implementation DraggableImageView

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    self.copied = [[DraggableImageView alloc] initWithImage:[self image]];

    [self.copied setDelegate:[self delegate]];
    [self.copied setFrame:[self frame]];

    [[self superview] addSubview:self.copied];

    CGPoint pt = [[touches anyObject] locationInView:self.copied];

    self.copied.startLocation = pt;

    [[self.copied superview] bringSubviewToFront:self.copied];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:36:38.537

您需要在该类中实现 NSCopying，这里有一个链接到另一篇关于如何做到这一点的帖子：[另一个堆栈溢出帖子](https://stackoverflow.com/questions/1459598/how-to-copy-an-object-in-objective-c)

在那篇文章中，您将使用的 copywithzone 方法基本上是关于如何制作班级副本的说明。

在检测用户何时触摸/拖动该图像的代码区域中，使用上述方法对其进行复制，设置其正确的框架 x 和 y 位置，然后将其作为子视图添加到持有原始对象。

```
//Somtheing like this
myCustomObject *object2 =[object copy];
object2.frame = cgrectmake.....
[view addSubview:object2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:23:58.680

当用户点击纸杯蛋糕时，只需创建一个新的 UIImageView，然后从屏幕上已经存在的那个中复制它。

# c# - C#平面椭圆弧角

> ID：13653154
> 
> 赞同：1
> 
> 时间：2012-11-30T21:04:16.647
> 
> 标签：c#, drawing, ellipse

我在给定角度绘制平面椭圆弧时遇到问题。

我在 C# 中有一些简单的编程代码，圆弧和椭圆在给定角度：

```
 Graphics GRP = this.CreateGraphics();

        Pen PEN = new Pen(Color.Red);

        // Angle
        float Start = 358f;
        float Sweep = 180f;

        // Circle
        GRP.DrawArc(PEN, new Rectangle(75, 75, 200, 200), Start, Sweep);

        // Ellipse
        GRP.DrawArc(PEN, new Rectangle(75, 75, 200, 10), Start, Sweep); 
```

所以我的起始角是 358°，略小于 360°，后掠角是 180°。

我对圆形没有问题，但不同的情况是扁平椭圆 - 整个椭圆向 270° 旋转 - 更扁平的椭圆会导致更多的旋转（[距离由 X 表示](http://i.stack.imgur.com/QygLR.png)）。

我找不到有关此问题的任何帖子...我的程序需要精确的椭圆弧。

我真的很感激任何帮助，并为我的英语道歉=）

# macos - 使用 Developer ID 在 Mac 上为 Qt 应用程序签名

> ID：13653157
> 
> 赞同：4
> 
> 时间：2012-11-30T21:04:21.673
> 
> 标签：macos, qt, certificate, code-signing

我有一个需要签名的 QT 应用程序。以前我在 Mac 上使用 codesign 实用程序来使用证书进行签名。随着山狮的发布，Apple 正在强制开发人员使用开发人员 ID 签名以避免 Gatekeeper 警告。

我从 Apple 找到了这篇博客文章：[https ://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplicationsOutside/DistributingApplicationsOutside.html](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplicationsOutside/DistributingApplicationsOutside.html)

它仅适用于基于 Xcode 的项目。我正在使用 Qt 创建者，并且没有适当的文档可用于在 Xcode 之外使用开发人员 ID 进行签名。

有没有人遇到同样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T00:05:24.987

根据[http://successfulsoftware.net/2012/08/30/how-to-sign-your-mac-os-x-app-for-gatekeeper/](http://successfulsoftware.net/2012/08/30/how-to-sign-your-mac-os-x-app-for-gatekeeper/)您签署 Qt 框架、插件和应用程序包，例如：

```
codesign --force --verify --verbose --sign "Developer ID Application: <yourID>" <yourApp>.app/Contents/Frameworks/QtCore.framework/Versions/4/QtCore 
```

等等

# wso2 - 默认 WSO2 ESB 服务器登录凭据？

> ID：13653159
> 
> 赞同：8
> 
> 时间：2012-11-30T21:04:31.070
> 
> 标签：wso2, wso2esb

我刚刚设置了 WSO2 ESB 并在命令行控制台中启动它。我现在在浏览器中运行管理控制台网页，但登录时卡住了。是否有默认的用户名/密码作为开始使用？

任何帮助表示赞赏。

瑞克价格

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T00:00:17.183

是的，**管理员**用户名和**管理员**密码应该让您通过该登录页面并进入 WSO2 ESB 的仪表板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T19:01:11.543

是的。对于超级租户，

用户名：**管理员**

密码：**管理员**

如果是其他租户，（例如：如果租户名称是**abc.com**，管理员用户名是**admin**密码是**password123**）

用户名：**admin@abc.com**

密码：**password123**

# javascript - 如果在 aspx 页面中使用 javascript 启用复选框，则需要启用按钮

> ID：13653168
> 
> 赞同：0
> 
> 时间：2012-11-30T21:05:32.037
> 
> 标签：javascript, asp.net

如果在 aspx 页面中使用 javascript 启用了复选框，则需要启用按钮。这是我在 aspx 页面中的代码。请帮忙 ！

```
<script type="text/javascript">
function checkButt(obj) {
    alert("Inside the function");
    document.getElementById('<%=btnLoadForm.ClientID%>').disabled = !obj.checked;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:11:00.663

使用以下代码，您将获得解决方案。

**Javascript**

```
<script type="text/javascript">

    function enableordisable() {
            if (document.getElementById('CheckBox1').checked == true) {
                document.getElementById('Button1').disabled = false;
            }
            else {
                document.getElementById('Button1').disabled = true;
            }
    } 
```

**HTML**

 ````
 <asp:CheckBox ID="CheckBox1" runat="server" Text="enable" onchange="enableordisable();" />
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" Text="Button" Enabled="false" /> 
```` 

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:10:14.203

代替：

```
document.getElementById('<%=btnLoadForm.ClientID%>').disabled = !obj.checked; 
```

您可以尝试从元素中[删除](https://developer.mozilla.org/en-US/docs/DOM/element.removeAttribute)该属性（根据需要添加您的逻辑）：`disabled`

```
document.getElementById('<%=btnLoadForm.ClientID%>').removeAttribute("disabled") 
```

布尔属性在哪里`disabled`，该值没有太大区别。您可以在类似的帖子中阅读更多相关信息：[HTML - 为什么布尔属性没有布尔值？](https://stackoverflow.com/questions/7089584/html-why-boolean-attributes-does-not-have-boolean-value)

**更新：**

您需要围绕`removeAttribute`语句的逻辑。类似于：

```
function checkButt(obj) {
    if(obj.checked)
      document.getElementById('<%=btnLoadForm.ClientID%>').removeAttribute("disabled");
} 
```

`document.getElementById('<%=btnLoadForm.ClientID%>')`如果`obj.checked`选中，这将启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:13:48.450

删除`AutoPostBack="true"` 复选框

在脚本中添加事件而不是`inline HTML`..

```
<asp:Button runat="server" id="btnLoadForm" />
​&lt;asp:CheckBox runat="server" id="chk" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**JS**

```
var elem = document.getElementById('chk');

chk.addEventListener('click', function(){
    document.getElementById('btn').disabled = !this.checked;
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/8sDey/1/)**

# nginx - nginx自定义错误配置引用字符串与文件

> ID：13653170
> 
> 赞同：6
> 
> 时间：2012-11-30T21:05:48.200
> 
> 标签：nginx

我知道我可以为自定义错误页面设置文件：

```
location / {
    error_page 404 = /mybad.html;
} 
```

但我只想在配置文件中将我的页面覆盖作为内联文本提供：

```
 location / {
    error_page 404 = "<H1>Sorry!</H1>"
} 
```

nginx可以做到这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T03:14:53.650

```
location / {
    error_page 404 @sorry;
}

location @sorry {
    return 404 "<H1>Sorry!</H1>";
} 
```

*   [http://nginx.org/r/error_page](http://nginx.org/r/error_page)
*   [http://nginx.org/r/return](http://nginx.org/r/return)

# scala - foreach 的短路功能

> ID：13653175
> 
> 赞同：10
> 
> 时间：2012-11-30T21:06:05.213
> 
> 标签：scala, functional-programming

我和我的同事对以下代码的行为感到有些困惑。

```
def a: String = {
  None.foreach(return "1")
  return "2"
}

def b: String = {
  None.foreach(x => return "1")
  return "2"
} 
```

正如预期的那样，调用`b`确实返回“2”。但是，调用`a`返回“1”。什么`return "1"`时候`a`被执行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T21:22:32.447

形式的所有*功能评估

```
f({code}) 
```

相当于

```
val temp = { code }
f(temp) 
```

所以，在第一种情况下，

```
val temp = return "1"
None.foreach(temp)   // Never reach this point! 
```

而在二中，

```
val temp = (x: Nothing) => return 1
  // Equivalent: new Function1[Nothing,String]{ def apply(x: Nothing) = return "1" }
None.foreach(temp)   // Never call that weird function! 
```

所以一切都好。

但是，等等，`foreach`需要一个`A => Unit`. `return "1"`这样的功能如何？好吧，Scala 从最具体的类型开始（`Nothing`，它是任何东西的子类，因此承诺做任何你要求它做的事情，除非它不存在）。而且，由于该语句不产生任何值（控制通过返回转义），它永远不会从`Nothing`. 所以，确实`Nothing`是 的子类`Function1[A,Unit]`。

为了`Nothing`产生它——好吧，假装产生它——你实际上运行代码，然后返回。

*^(实际上，如果参数是按名称传递的，它会被偷偷转换`() => { Code }`并传入而不进行评估。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:23:12.423

其他人已经解释了这种行为，但最好不要使用`return`。

我会写类似的东西。

```
def b: String = {
  None.map(x => "1").getOrElse("2")
} 
```

或者，如果我想返回第一个匹配的项目，`List`我会使用它。`collectFirst`

编辑：我看到问题被标记为`functional programming`. `return`如果尝试以功能样式进行编程，则应避免使用。以 A => B 的地图为例。如果您使用`return`，则会破坏该类型签名。

```
def a: String = { 
  val a = Option(5).map(x => if(x==6) return "aa" else 6); // isnt returning a `B` when x == 5.
  a.toString
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:15:30.997

Scala 使用急切的应用顺序评估。这意味着在替换函数的参数之前对参数进行评估。此外，值得回顾的是，函数对自己进行评估。它是函数*应用程序*，它计算函数的返回值。现在让我们看看每个参数的计算结果。

```
scala> :t () => "1"
() => java.lang.String 
```

所以，在第二种情况下，我们得到了一个函数。它在通过之前被评估（对自身），但从未应用，因为`None`没有元素。不过，`return "1"`不需要申请。它只需要被评估，它具有重定向控制的副作用，然后从包含它的函数返回“1”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:17:05.460

这真的很酷——我不知道。[查看http://www.scala-lang.org/docu/files/ScalaReference.pdf](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 91 页的语言参考：

> return 表达式 return *e*必须出现在一些封闭的命名方法或函数的主体内。源程序中最内层的命名方法或函数*f*必须具有显式声明的结果类型，并且*e*的类型 必须符合它。return 表达式计算表达式 e 并将其值作为*f*的结果返回。
> 
> ...
> 
> 编译器生成的作为匿名函数扩展的`apply`方法在源程序中不算作命名函数，因此绝不是返回表达式的目标。
> 
> 从嵌套匿名函数返回是通过抛出和捕获一个`scala.runtime.NonLocalReturnException`. 返回点和封闭方法之间的任何异常捕获都可能会看到异常。关键比较确保这些异常仅被返回终止的方法实例捕获。
> 
> 如果 return 表达式本身是匿名函数的一部分，则*f*的封闭实例可能在 return 表达式执行之前已经返回。在这种情况下，抛出的`scala.runtime.NonLocalReturnException`内容不会被捕获，并将向上传播到调用堆栈

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T21:17:12.853

在 a 中，foreach`return "1"`在到达`return "2"`行之前执行。即使它在 foreach 中，代码仍会执行，因此它返回 1。在 b 中，x 是通过“自类型注释”（[http://www.scala-lang.org/node/124](http://www.scala-lang.org/node/124)）分配给操作的的`return "1"`

这篇关于 scala 继承的帖子可能有用：[使用这个关键字来继承？](https://stackoverflow.com/questions/8371448/using-this-keyword-to-inherit)

分享和享受

# python - 解析包含句点的 request.get() 的 params 参数中的值

> ID：13653181
> 
> 赞同：0
> 
> 时间：2012-11-30T21:06:49.340
> 
> 标签：python, url, python-requests

我正在使用 python 包请求向服务器发出获取请求。我的目标是复制某些已知的 http 请求并将它们合并到我的 python 脚本中。原始查询字符串包含一个键值对“version=0%2E12”，我知道它是“version=0.12”的 url 编码等效项。下面是我正在做的复制 http 请求的示例。

```
params = {
          'version'='0.12',
          'language'='en',
          ...
          }
 resp = requests.get(url, params) 
```

生成的 url 查询字符串中包含 'version=0.12'。如果我尝试将 params 的设置更改为以下内容，

```
 params = {
          'version'='0%2E12',
          'language'='en',
          ...
          } 
```

但生成的查询字符串包含“版本=0%252E31”。本质上，请求是解析 % 以进行 url 编码。

如何在不手动编写整个 url 的情况下获得正确解析带有句点的 params 参数的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:16:14.790

请注意，这`.`是 URL 编码值中完全有效的字符。

您需要自己编码值，绕过标准编码。我会使用`urllib.urlencode()`，然后手动替换`.`字符`%2E`。

然后，您必须将编码字符串作为查询参数附加到 URL，并配置`requests`为不重新编码值：

```
params = {
      'version'='0.12',
      'language'='en',
      ...
      }
params = urllib.urlencode(params)
params = params.replace('.', '%2E')
resp = requests.get('?'.join(url, params), config={'encode_uri': False}) 
```

设置为的`encode_uri`参数`False`在这里可以解决问题；这是[`requests`默认值](https://requests.readthedocs.io/en/latest/api/#requests-defaults)，否则将重新编码整个 URL 以确保 RFC 合规性。

# visual-studio-2010 - 在 Visual Studio 中仅增量重新编译一个文件

> ID：13653185
> 
> 赞同：-2
> 
> 时间：2012-11-30T21:07:04.397
> 
> 标签：visual-studio-2010, visual-studio, compiler-construction

在 Visual Studio 2010 中，我有许多 C/C++ 源文件需要几分钟才能编译。但是，一旦它们被编译，我只处理几个文件并且想完全重新编译它们而不删除其他文件的编译。如果我只是在文件中添加一个小注释并对其进行修改，我可以这样做，然后编译器只重新编译那些从头开始修改的文件，但我宁愿避免修改源代码来执行此操作。有没有更好的办法？

基本上发生的事情是我正在清理代码并消除问题。为此，每次修复后我都会重新编译和测试。但是，当我这样做时，它会删除存在的问题列表，因此我不得不在我有兴趣检查的文件中添加一个注释行，以强制它在不清理整个项目的情况下重新编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:46:03.407

您可以在解决方案资源管理器中右键单击单个文件并选择编译。

# c++ - C++ linux 代理服务器通信

> ID：13653188
> 
> 赞同：1
> 
> 时间：2012-11-30T21:07:24.520
> 
> 标签：c++, sockets

试图建立一个代理服务器。
从客户端接收 -> 发送到服务器 -> 从服务器接收 -> 发送到客户端。

代理从客户端接收正确的数据。
但在那之后，我从服务器接收了 0 个字节。

这是我应该从客户端接收并发送到服务器的数据包

```
0A 00 2C 01 23 00 0C 00 B3 01 
```

这是我的代码；

```
 //intercept commu by server <-> client

    memset(buffer, 0, buffer_len);

    //recv from client
    if((bytecount = recv(*csock, buffer, buffer_len, 0))== -1){
        fprintf(stderr, "Err: receiving data %d\n", errno);
        return 0;
    }

    //display what we got from the client
    printf("Received bytes %d\n", bytecount);
    for ( int i = 0; i < bytecount; i++ ) {
    printf( "%02x ", static_cast<unsigned char>( buffer[i] ) );
    }
    printf("\n");

    //send to server what we got from the client
    if((gbytecount=send(gsock, buffer, buffer_len, 0))== -1){
    fprintf(stderr, "Error sending data %d\n", errno);
    goto FINISH;
    }

    //recv from server
    if((gbytecount = recv(gsock, buffer, buffer_len, 0))== -1){
        fprintf(stderr, "Error receiving data %d\n", errno);
        return 0;
    }

    printf("Received bytes %d\n", gbytecount);
    for ( int i = 0; i < gbytecount; i++ ) {
    printf( "%02x ", static_cast<unsigned char>( buffer[i] ) );
    }
    printf("\n");   

    //send back to client what we got from the server
    if((bytecount = send(*csock, buffer, buffer_len, 0))== -1){
        fprintf(stderr, "Err: sending data %d\n", errno);
        return 0;
    } 
```

从客户端接收后，如何检查代理向服务器发送的内容？
我的逻辑有问题吗？

* * *

**更新**

我想我发现了问题，它是因为 buffer_len。

现在我有 recv() 字节 93。但服务器再次发送另一个数据包。
我该怎么处理我的代码？

目前我的代码是：

```
recv from client -> send to server -> recv from server -> send to client. 
```

我怎样才能使这个代码像如果客户端/服务器发送一些东西，它会

转发给对方？

* * *

**更新**

必须解决它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:15:54.237

我不知道你的服务器和客户端，但可能是服务器实际上`close`是导致 0 的套接字，`recv`而关闭的原因可能是你`bytecount`从客户端接收数据但向`buffer_len`服务器发送数据可能导致一些无效有效数据后的数据发送到服务器！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:53:03.810

You are using blocking calls assuming a direct 1-1 ratio of client->server calls (and vice-versa), but that is almost certainly not going to be the case in a real world application. In reality, the application is going to receive portions of the TCP stream in numerous calls to receive from both the client and the server. You can handle this in two distinct ways. Using `select()` to see what sockets need to have data read from them, or using an asynchronous library to facilitate the reading/writing to/from the client/server sockets for you.

Since this seems to come up quite a lot, see my answer to this question: [How to make a proxy server in C++ using Boost](https://stackoverflow.com/questions/11421678/how-to-make-a-proxy-server-in-c-using-boost)

See the [select() API](http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/lr2/select.htm)

或者，[这是在 boost 中编写一个示例](http://alexott.net/en/cpp/BoostAsioProxy.html)。如果您在 Google 上搜索“boost::asio 代理服务器”，还有许多其他示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:53:44.030

BigBoss 的回答是正确的：- 您应该向 gsock 发送 bytecount 字节，而不是发送 buffer_len 字节。更好的是，如果可能，您应该从标头中读取数据包的大小，并尽可能读取那么多字节

# javascript - 如何每隔 n 秒将一个新字符串从一个数组滑入一个句子？

> ID：13653193
> 
> 赞同：0
> 
> 时间：2012-11-30T21:07:34.537
> 
> 标签：javascript, jquery

如何滑出和滑入文本以替换句子中的一个单词？

这是句子：

```
<p>Lorem <span>ipsum</span> dolor sit.</p> 
```

我需要将单词`<span>`向上滑动并从底部滑动一个新单词。

目标是让一组单词每*n*秒轮换一次。例如，给定以下数组：

```
var myArr = new Array('ipsum','alpha','beta','gamma','delta','epsilon'); 
```

如何`.slideUp()`用数组中的下一个替换（通过，我期望）现有单词？

我希望最终结果有点类似于里程表的行为方式，但带有文本。有道理？

你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:00:25.087

在不为您编写代码的情况下，我为您整理了一个简短的文本切换示例。我曾经提供过动画，但如果您想要更好的控制并使其更加 odometre'ish，`.slideUp()`您可能想要使用它。`.animate()`我希望这能让您对如何实现这一目标有所了解。

[jSFiddle 示例](http://jsfiddle.net/9fRcX/5/)

粗略的 HTML

```
<div class="widget-container">
    <p>Lorem</p>
    <div class="widget-vert-rotate">
        <!-- jQuery elements will be here -->
    </div>
    <p>dolor sit amet.</p>
</div> 
```

CSS

把它们都排成一行。垂直对齐顶部是为了确保动画始终将下一个单词与句子对齐。一些正确的填充以及模拟字间距。最后为旋转容器设置一个高度并将其溢出设置为隐藏。

```
.widget-container > * {
    display: inline-block;
    vertical-align: top;
    padding-right: 0.4em;
}

.widget-vert-rotate {
    overflow: hidden;
    height: 1.1em;
} 
```

还有 JS + jQuery

```
var words = ['ipsum','nunc','telum'],
    i = 0,
    l = words.length,
    el = $('.widget-vert-rotate'),
    t = 3000;

// Create the text elements
for ( ; i < l ; i++ ) {
    $('<p />').text(words[i]).appendTo(el);
}

// Set the interval function
var itv = setInterval(function() {
    var child = el.children().first();
    child.slideUp(1000, function() {
        child.remove();

        el.append(
            $('<p />').text(child.text())
        );
    });
}, t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:13:10.087

我想你可以试试

```
var myArr = new Array('ipsum','alpha','beta','gamma','delta','epsilon');

myArr.push(myArr.shift()); 
```

*   myArr.shift() 给你“ipsum”
*   myArr.push() 把它放在最后。

**编辑**：

好的 Ryan，这是一个解决方案，您可以使用更好的动画，但这是为了示例。我首先错了 pop()，因为这是你需要的 shift() ！（也已编辑）

> 在 html 中使用它：

```
 <span id="mySpan">plop</span> 
```

> 将此用于带有 jquery 的 javascript ：

```
var myArr = new Array('ipsum ','alpha ','beta ','gamma ','delta ','epsilon ');
    loop();

    function loop() 
    {
        $("#mySpan").slideUp(3000, function(){
            myArr.push(myArr.shift());

            $("#mySpan").empty();
            $("#mySpan").append(myArr[0]);
            $("#mySpan").show(200);

            loop();
        });
    } 
```

JSFiddle：http: [//jsfiddle.net/eL3eG/](http://jsfiddle.net/eL3eG/)

# oracle10g - Oracle 中的行数

> ID：13653194
> 
> 赞同：2
> 
> 时间：2012-11-30T21:07:37.207
> 
> 标签：oracle10g, rowcount

我想使用函数 SQL%ROWCOUNT 来告诉我记录是否在表中。我拥有的代码如下：

```
DECLARE
v_emp employee%ROWTYPE; 
CURSOR c_emp IS
SELECT * FROM employee WHERE name='chuck';
BEGIN
OPEN c_emp;

    FETCH c_emp INTO v_emp;
    IF SQL%ROWCOUNT=1 THEN
             DBMS_OUTPUT.PUT_LINE('found');
            ELSE
                     DBMS_OUTPUT.PUT_LINE(TO_CHAR('not found'));
        END IF;
END; 
```

但它根本不打印任何内容，即使具有该名称的记录存在于数据库中

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:15:14.580

通常，你会做类似的事情

```
DECLARE
  l_count PLS_INTEGER;
BEGIN
  SELECT COUNT(*)
    INTO l_count
    FROM employee
   WHERE name = 'chuck'
     AND rownum = 1;

  IF( l_count = 1 )
  THEN
    dbms_output.put_line( 'found' );
  ELSE
    dbms_output.put_line( 'not found' );
  END IF;
END; 
```

如果您真的想使用显式游标，则需要检查`<<cursor_name>>%rowcount`，而不是`sql%rowcount`确定已获取多少行。如果要使用显式游标，还需要注意关闭游标。由于您没有发布表定义或您正在使用的数据，我将使用架构中的`EMP`表`SCOTT`作为示例

```
SQL> ed
Wrote file afiedt.buf

  1  DECLARE
  2    v_emp emp%ROWTYPE;
  3    CURSOR c_emp IS
  4      SELECT * FROM emp WHERE ename='SMITH';
  5  BEGIN
  6    OPEN c_emp;
  7    FETCH c_emp INTO v_emp;
  8    IF c_emp%ROWCOUNT=1 THEN
  9      DBMS_OUTPUT.PUT_LINE('found');
 10    ELSE
 11      DBMS_OUTPUT.PUT_LINE(TO_CHAR('not found'));
 12    END IF;
 13    CLOSE c_emp;
 14* END;
SQL> /
found

PL/SQL procedure successfully completed. 
```

请注意，无论您使用哪种方法，如果您希望`DBMS_OUTPUT`显示输出，则需要在您使用的任何工具中启用输出。如果您使用的是 SQL*Plus，则意味着运行

```
SQL> set serveroutput on; 
```

在执行匿名 PL/SQL 块之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T08:34:45.333

没有`SQL%ROWCOUNT`和局部变量的解决方案：

```
begin
  for entry in ( select case when count(*) = 0 then 'found'
                             else 'not found'
                        end as is_found_txt
                   from dual
                  where exists(select null
                                 from employee
                                where name = 'chuck'))
  loop
      dbms_output.put_line( entry.is_found_txt );
  end loop;
end; 
```

# java - 如何在 Java 的 GAE 中按 ReferenceProperty 进行过滤？

> ID：13653206
> 
> 赞同：0
> 
> 时间：2012-11-30T21:08:50.953
> 
> 标签：java, google-app-engine, google-cloud-datastore

假设我在 GAE Java 应用程序中有以下（简化的）模型：

```
Entity project = new Entity("Project")
project.setProperty("name", "test"); 
```

和

```
Entity task = new Entity("Task");
task.setProperty("name", "test");
task.setProperty("project", project.getKey()); 
```

如何获得所有`Task`引用特定的 s `Project`？

我试过了

```
 Query q = new Query("Task");
    Query.FilterPredicate projectFilter =
            new Query.FilterPredicate("project",
                    Query.FilterOperator.EQUAL,
                    project.getKey()
                    );
    q.setFilter(projectFilter); 
```

但无济于事。我已经使用 Datastore 查看器检查了实际数据，并且一切就绪。 `Task`s 有`Key`一个项目的属性，并且所有属性都被索引。

唯一看起来不寻常的是（考虑到我的应用程序支持多租户），该`Project`键作为查看器上的命名空间前缀这一事实。

这可能是问题所在，有什么解决办法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:35:52.227

尝试`project.getKey().getId()`改用，

或使用特殊的密钥过滤器：`Entity.KEY_RESERVED_PROPERTY`

此处描述：

[https://developers.google.com/appengine/docs/java/datastore/queries#Key_Filters](https://developers.google.com/appengine/docs/java/datastore/queries#Key_Filters)

# visual-studio-2010 - Visual Studio 已安装产品版本号的含义是什么？

> ID：13653209
> 
> 赞同：1
> 
> 时间：2012-11-30T21:09:17.263
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-c++

在 Visual Studio 2008 和 2010 的“关于”框中，有一个“已安装产品”列表。更新以外的“产品”，例如“Microsoft Visual C++ 2010”，后面有某种版本号。

这个数字的确切含义是什么？数字的不同组成部分是否有特定的含义？

我刚刚使用 VS 2008 和 VS 2010 设置了第二台开发计算机。新系统和我当前的系统上安装了相同的 KBxxx 更新。但是，安装产品后的数字不同。数字的前两部分匹配，但后两部分不同。它们不同意味着什么，如果这很重要，我如何使安装相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:22:53.860

这些数字不是版本号，而是“产品 ID”号。它们可以在不同的子键中找到

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\XXXX\Registration

它们显然只对许可和注册很重要，对实际软件没有任何意义。

# spring - RestTemplate().getForObject 给出“不是有效的 HTTP URL”

> ID：13653210
> 
> 赞同：0
> 
> 时间：2012-11-30T21:09:31.703
> 
> 标签：spring, webservice-client, resttemplate

我有一些非常基本的代码来调用 Web 服务。使用 RestTemplate().getForObject 会给我“不是有效的 HTTP URL”错误。

```
Exception in thread "main" java.lang.IllegalArgumentException:         [localhost:9080/someApp/testWs/partners/1] is not a valid HTTP URL
at org.springframework.web.util.UriUtils.encodeHttpUrl(UriUtils.java:245)
at org.springframework.web.client.RestTemplate$HttpUrlTemplate.encodeUri(RestTemplate.java:651)
at org.springframework.web.util.UriTemplate.expand(UriTemplate.java:140)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:400)
at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:199)
at org.kofc.test.TestTemplate.main(TestTemplate.java:26) 
```

这是客户端代码：

```
package org.smpkg.test;

import org.smpkg.dvo.Prtnr;
import org.springframework.web.client.RestTemplate;

public class TestTemplate 
{

    private static final long serialVersionUID = 1130201273334264152L;
    public static void main(String[] args){
        System.out.println("I am here ....");
        Prtnr partner = new RestTemplate().getForObject("localhost:9080/someApp/testWs/partners/{id}", Prtnr.class, "1");
        System.out.println("partner name is : " + partner.getPrtnrNm());
    }
} 
```

控制器

```
@RequestMapping(value="/{id}", method=RequestMethod.GET)
@ResponseBody
public Prtnr getPartner(@PathVariable("id") String id){
    ....
    ....
return partner;
    } 
```

servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/util 
        http://www.springframework.org/schema/util/spring-util-2.0.xsd">

        <mvc:annotation-driven />

        <context:component-scan base-package="org.somepkg.bso" />

        <!-- 
        <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="prefix" value="/WEB-INF/views/" />
            <property name="suffix" value=".jsp" />
        </bean>
         -->

        <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
            <property name="messageConverters">
                <util:list>
                    <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
                </util:list>
            </property>
        </bean>

        <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
          <property name="mediaTypes">
            <map>
              <entry key="atom" value="application/atom+xml"/>
              <entry key="html" value="text/html"/>
              <entry key="json" value="application/json"/>
            </map>
          </property>
          <property name="viewResolvers">
            <list>
              <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
              <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                <property name="prefix" value="/WEB-INF/jsp/"/>
                <property name="suffix" value=".jsp"/>
              </bean>
            </list>
          </property>
          <property name="defaultViews">
            <list>
              <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
            </list>
          </property>
        </bean>

        <bean id="content" class="com.springsource.samples.rest.SampleContentAtomView"/>
</beans> 
```

访问链接 localhost:9080/someApp/testWs/partners/1> 返回结果，但使用 RestTemplate().getForObject() 不起作用。

这是 Prtnr 类：

```
public class Prtnr implements Cloneable, java.io.Serializable {

private static final long serialVersionUID = 201207021420600052L;
private Integer prtnrId;
private String creatUserId;
private Date creatTs;
private String updtUserId;
private Date updtTs;
private String prtnrNm;
private Integer cncilNum;
private Character prtnrTypCd;
private Set<PrtnrGeoInfo> prtnrGeoInfos = new HashSet<PrtnrGeoInfo>(0);
private Set<PrtnrDtl> prtnrDtls = new HashSet<PrtnrDtl>(0);
private Set<SuplyDtl> suplyDtls = new HashSet<SuplyDtl>(0);
private Set<TrnsprtDtl> trnsprtDtls = new HashSet<TrnsprtDtl>(0);
private Set<PrtnrFacil> prtnrFacils = new HashSet<PrtnrFacil>(0);
private Set<PrtnrHumanResrc> prtnrHumanResrcs = new HashSet<PrtnrHumanResrc>(0);
.....
.....
Getters and setters for these properties
...
} 
```

我在服务器端看到的错误是：[12/3/12 10:25:57:764 EST] 00000039 ServletWrappe E SRVE0068E：在 servlet 的服务方法之一中抛出未捕获的异常：

```
 spitter.    
    Exception thrown : org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: 

    org.kofc.dvo.Prtnr["prtnrGeoInfos"]->org.hibernate.collection.PersistentSet[0]->org.kofc.dvo.PrtnrGeoInfo["id"]->

    org.kofc.dvo.PrtnrGeoInfoId["partner"]->
at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:164)
at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 
```

Web 服务的卷曲是： org.codehaus.jackson.map.deser 的 org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:579) 的线程“main”java.lang.StackOverflowError 中的异常。 SettableBeanProperty.deserialize(SettableBeanProperty.java:299) at org.codehaus.jackson.map.deser.SettableBeanProperty$MethodProperty.deserializeAndSet(SettableBeanProperty.java:414) at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer. java:697) 在 org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)

我错过了什么？？？

谢谢

# php - PHP 或浏览器安全黑客问题和奇怪的行为

> ID：13653215
> 
> 赞同：0
> 
> 时间：2012-11-30T21:09:57.230
> 
> 标签：php, security, post, get

在从开发服务器转移到生产服务器的过程中，我注意到一个潜在的浏览器安全问题。

在一个 PHP 文件中，我有一个简单的登录表单，`POST`它自己。基本的 HTML 如下所示：

```
<form action="http://mysite.com/includes/login/login.php" method="post">
        <table>
          <tr>
            <td>
                Username:
            </td>
            <td>
                <input type="text" name="username" size="15" maxlength="64"  tabindex=1 />
            </td>                
            </tr>
            <tr>
                <td>
                    Password:
                </td>
                <td>
                    <input type="password" name="pword" size="15" maxlength="40" tabindex=2 />
                </td>
            </tr>
        </table>
    <p><input type="submit" name="submit" value="Login"  tabindex=3 /></p>
    <input type="hidden" name="submitted" value="TRUE" />
</form>​​​​​​​ 
```

我注意到，当我（意外地）从表单操作（例如，`<form action="http://mysite.com/includes/login/login.php method="post">`）中删除结尾引号时，表单被重定向到“找不到页面”，因为它应该。但它也将数据附加`$_POST`为`$_GET`数据。所以浏览器将登录信息显示为：

```
http://mysite.com/includes/login/login.php%20method=?username=theperson&pword=happyday&submit=Login&submitted=TRUE 
```

我在 IE 和 Chrome 中得到相同的响应。这是一个很大的安全漏洞吗？我知道我可以在开发人员工具中查看类似的信息，但我想知道黑客是否可以使用它以及我是否应该采取任何措施来保护它。另外，谁能解释为什么将`$_POST`数据转换为`$_GET`数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:18:07.460

这里只有一个答案，它被转换可能是因为缺少最后一个`"`它使`<form>`元素无效，所以浏览器默认为 GET 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:22:11.560

简短的回答：没有。你没有什么可担心的。

长答案？

你说的漏洞是网站本身的代码错误对吗？**如果是这种情况，如果您将错误留在代码中，**这只是一个安全漏洞。

黑客将无法修改网站上的 html 代码来制造此故障。他们唯一能做的就是下载 html 代码，创建一个新的 html 文档并对其进行修改。在这种情况下，带有错误的 html 只会在他们的计算机上，而不是在生产站点上，这意味着其他用户不受影响。

如果黑客能够修改*Web 服务器上的*文件，那么您的安全漏洞就在其他地方并且超出了此问题的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:58:39.653

如果您的表单如下所示：

```
<form action="http://mysite.com/includes/login/login.php method="post"> 
```

它相当于：

```
<form action="http://mysite.com/includes/login/login.php method=" post"> 
```

这[将产生](http://www.w3.org/TR/html5/tokenization.html#attribute-name-state)一个具有两个属性的表单：

*   `action`：`http://mysite.com/includes/login/login.php method=`
*   `post"`:*空的*

由于没有指定方法属性，因此方法 GET 是隐含的。

这里唯一的安全考虑是敏感数据是通过 URL 发送的，该 URL 稍后会显示在代理和服务器日志中，除了您通过非安全通道发送登录凭据这一事实之外。

# windows - 使用多个 Azure 实例进行 Web 部署

> ID：13653218
> 
> 赞同：1
> 
> 时间：2012-11-30T21:10:15.573
> 
> 标签：windows, deployment, azure

我想知道当您拥有一个包含多个实例的 Web 角色时是否可以使用 Azure 的 Web 部署功能。我收到一条警告消息，表明我无法执行此操作，但我的常识告诉我，可能有一种更简单的方法来更新我已部署的项目，就像 Web 部署功能所做的那样，而不是必须经历长达一小时的发布过程Azure 项目更新了一些文件。

任何人都可以对此有所了解吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:17:51.453

这是不支持的。您需要进行全面部署。Web 部署更适合处于 QA/DEV/调试模式的 1-instance 角色

# windows - 使用用户过滤的令牌模拟线程

> ID：13653220
> 
> 赞同：0
> 
> 时间：2012-11-30T21:10:28.193
> 
> 标签：windows, winapi, uac, local-security-authority

我正在编写一个应用程序，它是一种自定义公司设置。这个应用程序做了很多任务，其中一些需要提升。

我包含了一个清单，以便当应用程序启动时 UAC 要求用户提升。

其中一项任务是将一些网络驱动器（带有`WNetAddConnection`）映射到远程服务器。这些映射应该是持久的。到目前为止一切顺利，除了当应用程序关闭时，用户看不到应用程序刚刚映射的驱动器。

经过一番研究（[https://serverfault.com/a/185885/147818](https://serverfault.com/a/185885/147818)），我了解到当用户登录时，它的会话收到 2 个令牌，一个具有低权限，另一个具有完全权限，使用的那个在需要提升时运行进程。

我的问题：我的应用程序是否有可能启动一个线程来获取当前用户过滤的令牌，当应用程序的任务完成时，用户可以在资源管理器中看到网络驱动器？

可以用这个令牌模拟线程吗？

我知道这些可能的解决方法：

*   重新设计应用程序，以便仅将一些需要提升的特定任务封装在 COM 对象中。
*   使用设置调整注册表`EnableLinkedConnections`（需要用户的会话重新启动）

但由于某些原因，这些解决方案都不是一种选择。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:25:52.643

从提升的安装程序映射驱动器时，我们遇到了同样的问题。

我们处理这个问题的方法是，我们首先从安装程序映射驱动器，该安装程序当然在**提升**的UAC 状态下运行。安装程序所做的最后一件事是创建一个文本文件，其中列出了驱动器号及其映射的网络驱动器。然后我们运行第二个**非提升**程序，为用户进行映射。这些映射是持久的。

这已经为我们在全球客户机器上进行了数千次安装。

# javascript - iPad全屏模式 - 找不到逃生

> ID：13653222
> 
> 赞同：0
> 
> 时间：2012-11-30T21:10:41.147
> 
> 标签：javascript, ipad, web-applications, fullscreen

我有一个网络应用程序，其中包含指向其他网页的链接。当用户在应用程序从全屏模式运行时点击其中一个链接时，新页面也会全屏打开，因此无法导航回 Web 应用程序。一旦从主屏幕图标启动网络应用程序，有没有人找到一种在 iPad 上退出全屏模式的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:14:31.400

尝试使用 javascript 重定向，例如：

```
document.location=''; 
```

我们实际上认为这是一个错误，但与往常一样，有些人会将此视为一个功能:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:17:53.853

如果您要去的页面应该在应用程序中，那么这可以解决您的问题。

[如何在 Safari 中打开外部链接而不是应用程序的 UIWebView？](https://stackoverflow.com/questions/9746260/phonegap-open-an-external-link-in-safari-not-the-apps-uiwebview)

如果该页面是互联网上的任何页面，那么答案几乎是否定的。

一旦你离开应用程序，就没有回头路了，除了用户点击你的应用程序。

强制 ipad 留在你的应用程序中并不简单。一些建议的方法：

1.  在您的应用程序中创建您自己的 Web 视图。如果您使用电话间隙或其他框架，则必须创建一个插件来执行此操作。然后，您将在该 Web 视图上显示加载的页面，这类似于广告的显示方式和停留在应用程序中的方式。

2.  将加载页面上的所有链接解析并替换为自定义事件，并使用服务器返回内容，而不是直接通过网络加载。

两者都非常复杂，并且存在问题，例如如果您让他们浏览特定域之外的内容，则无法拥有白名单。

# perl - Perl 哈希返回值

> ID：13653223
> 
> 赞同：1
> 
> 时间：2012-11-30T21:10:41.473
> 
> 标签：perl, hash

我是perl新手中的新手。我正在尝试创建一个返回哈希值的函数。以下代码仅返回哈希的最后一个索引。我用谷歌搜索，找不到我需要的东西。感谢是否有人能告诉我哪里出错了。

我期待，如果我通过“he_1”，我应该得到一个返回值 1，等等。但我看到的只是 9。

```
#!/usr/bin/perl

my %IndexMap = ();

my $MAX_V = 5;
my $MAX_T = 10;

sub InitIndexMap {
   foreach my $i (0..$MAX_V-1) {
      $IndexMap["he_".$i] = $i;
      print "he_".$i;
      print $IndexMap["he_".$i];
   }

    foreach my $i ($MAX_V..$MAX_T-1) {
      $IndexMap["un".$i] = $i;
      print "un".$i;
      print $IndexMap["un".$i];
    }
}

sub GetVal {
   my ($name) = @_;
   return $IndexMap[$name];
}

&InitIndexMap();
my ($index) = &Getval("he_4");
print $index; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T21:14:56.567

要读取哈希，请使用花括号，而不是方括号。试试这个：

```
sub InitIndexMap {
    foreach my $i (0..$MAX_V-1) {
        $IndexMap{ "he_" . $i } = $i;
        print "he_".$i;
        print $IndexMap{ "he_" . $i };
    }

    foreach my $i ($MAX_V..$MAX_T-1) {
        $IndexMap{ "un" . $i } = $i;
        print "un".$i;
        print $IndexMap{ "un" . $i };
    }
}

sub GetVal {
    my ( $name ) = @_;
    return $IndexMap{ $name };
} 
```

您应该将其添加到脚本的顶部：

```
use strict;
use warnings; 
```

始终打开这些 pragma 的一般规则。他们警告和错误可能会导致您找到问题的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:17:24.577

您应该使用 { 和 } 等大括号访问哈希。

`$hash_name{$key} = $value`;

在你的例子中。

`$IndexMap{"he_".$i} = $i`;

你应该考虑做一些教程。这是 Perl 中非常基础的知识。

# bash - 使用查找获取文件路径而不提供文件名

> ID：13653225
> 
> 赞同：0
> 
> 时间：2012-11-30T21:10:45.433
> 
> 标签：bash, find, command

如何获取目录内的 .pid 文件的路径。下面的代码只返回文件

```
root@linux [/]# ls -l $(find /* -name dovecot | grep var/run) | grep pid
-rw-------  1 root root       5 Nov 28 15:22 master.pid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:24:45.970

猜猜这就是你要找的东西：

```
find /var/run -name "*.pid" 2>/dev/null | grep dovecot | xargs ls -l 
```

当您在过滤器表达式中指定（部分）路径时，您还可以在 grep 命令中缩小匹配范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:27:47.000

我想输出的解释一定是`find`命令找到了一个目录名如：

```
/var/run/dovecot 
```

然后你`ls -l`在目录上做一个，它列出了目录中的文件，没有任何通往它的路径。您需要找到一种可靠的方法来列出目录中的文件及其完整路径名。

一种方法——我认为不是好方法——是：

```
find $(find /* -name dovecot -type d | grep var/run) -type f -name '*.pid' \
     -exec ls -l {} + 
```

这使用您的第一个`find`命令来获取您感兴趣的目录，然后`find`再次运行以查找`.pid`文件和执行程序`ls -l`。该`+`符号表示其`find`行为有点像`xargs`，将许多文件名捆绑在一起形成一个`ls -l`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:41:29.707

```
cat /var/run/dovecot/master.pid 
```

?

或者 ：

```
# readlink -f /var/run/dovecot/*.pid
/var/run/dovecot/master.pid 
```

# iframe - Youtube IFrame API 停止工作

> ID：13653228
> 
> 赞同：0
> 
> 时间：2012-11-30T21:11:21.350
> 
> 标签：iframe, google-analytics, youtube-api

我正在尝试使用 Youtube IFrame API 中的基本 onPlayerStateChange 事件来跟踪 Google Analytics 中的开始/停止/结束。该代码在 10 月有效，但现在视频不会显示。GA 跟踪代码是相同的，我在 Wordpress 和 Drupal 中得到相同的结果。API 有变化吗？

```
<script> 
var tag = document.createElement('script'); 
tag.src = "http://www.youtube.com/iframe_api"; 
var firstScriptTag = document.getElementsByTagName('script')[0]; 
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var player; 
function onYouTubePlayerAPIReady() { 
player = new YT.Player('player', { 
height: '461', 
width: '560', 
videoId: 'u1zgFlCw8Aw', 
events: { 
'onReady': onPlayerReady, 
'onStateChange': onPlayerStateChange 
} 
});  
}
function onPlayerReady(event) { 
event.target.playVideo(); 
} 
function onPlayerStateChange(event) { 
if (event.data ==YT.PlayerState.PLAYING) 
{_gaq.push(['_trackEvent', 'Videos', 'Play', ‘AnyEvent’ ]); } 
if (event.data ==YT.PlayerState.ENDED) 
{_gaq.push(['_trackEvent', 'Videos', 'Watch to End', ‘AnyEvent’]); } } 
</script>

<div id="player"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:16:55.037

这些是围绕“AnyEvent”的单引号，对吧？这不是有效的 JavaScript。

# mysql - MySQL存储过程，内存临时表太慢？

> ID：13653233
> 
> 赞同：0
> 
> 时间：2012-11-30T21:11:51.740
> 
> 标签：mysql, stored-procedures, temp-tables

我正在尝试在 MySQL 中编写存储过程。由于复杂的原因，我有一个带有一堆连接的聚合查询来查看对象 ID，然后使用更多连接（包括相同的表）进行另一个查询以获取一些数据

所以，像这样：

```
CREATE TEMPORARY TABLE ids ENGINE=MEMORY
SELECT MAX(child.id)
    FROM parent 
    JOIN child ON child.parent_id = parent.id
    WHERE
    GROUP BY child.parent_id;

SELECT *
    # MUST SELECT STUFF FROM PARENT, CHILD, AND STUFF JOINED ON CHILD
    FROM child 
    JOIN parent ON parent.id = child.parent_id
    # A BUNCH MORE JOINS HERE
    WHERE child.id IN (SELECT * FROM ids);

DROP TEMPORARY TABLE  IF EXISTS ids; 
```

现在我注意到第一次选择需要 0.000 秒。第二次选择，如果我将 (SELECT * FROM ids) 替换为像 (1435,2352,43653,34534,...) 这样的常量列表，也需要 0.000 秒。

但是，使用临时表创建运行它们需要 0.6 秒。0.o WTH？

所以我的问题是如何跳过这个临时表创建，只传递 id 列表？

此外，如果我将整个第一个选择作为子选择移动到第二个选择，那么整个过程需要更长的时间。超过一分钟后，我放弃了等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:27:52.613

试试这个：

```
SELECT *
FROM (
  SELECT parent.*, MAX(child.id) as max_id
  FROM parent 
  JOIN  child ON child.parent_id = parent.id
  WHERE -- some where cond
  GROUP BY parent.id
) as parents
JOIN  child ON child.id = parents.max_id
-- other joins 
```

并显示性能结果。

# java - 对象值不变

> ID：13653247
> 
> 赞同：2
> 
> 时间：2012-11-30T21:13:12.200
> 
> 标签：java

```
class smth{
    public static void main(String[] args){
        private Integer x = new Integer(17);
        inc(x);
        System.out.print("x="+x);
    }
    public static void inc(Integer x){
        x++;
        System.out.println("n="+x);
    }
} 
```

输出：n=18；x=17；

整数是一个对象，我不明白为什么在这种情况下 x 的值没有改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:15:44.133

原因`Integer`是不可变的对象。当您将它发送到方法时，会创建对它的新引用。当您进行增量时，引用内部方法被重新分配给`Integer`带有值的新方法，`18`但内部引用`main`仍然引用`Integer`带有值的旧方法`17`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:14:59.637

这是因为 Java 通过值而不是通过引用将对象传递给方法。完成方法调用后，调用方法中的对象值将与传递它之前的值相同。在被调用的方法中，值可以更改，但更改的范围是它被传递到的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:14:59.513

`Integer`是不可变的。`x++`创建一个新对象，并重新绑定以`x`引用它。`x`由于对原始的引用是按值传递的，因此更改不会传播回调用者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:15:14.100

这是因为`Integer`原语的包装器`int`是*不可变*的，并且 Java 按值传递对象引用。对方法内的对象引用所做的任何更改都不会影响传入的对象：引用被替换为对新对象的引用，但原始对象保持不变，因为它是不可变的。

要解决这个问题，您需要另一个级别的间接 - 您可以使用数组、[来自 apache commons 的可变 int](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/mutable/MutableInt.html)或滚动您自己的适当设计的类。

```
public static void main(String argv[])
    MutableInt x = new MutableInt (17);
    inc(x);
    System.out.print("x="+x.intValue());  
}
public static void inc(MutableInt x){
    x.add(1);
    System.out.println("n="+x.intValue());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T21:16:15.563

任何包装类都是不可变类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T21:16:16.537

这是因为方法内部修改的对象`inc`与该方法外部打印的对象不同。

方法内部`inc` `x`是一个指向对象的引用。当您运行 x ++ 时，它会重新分配 X 以引用具有不同值的新 Integer 对象。因此，您不会修改在 main 上声明的原始“x”变量。

您必须将“指针”返回到新的整数对象：

```
public static int inc(Integer x){
          x++;
          System.out.println("n="+x);
          return x;
      }

  public static void main(String argv[])

              Integer x = new Integer(17);
              x = inc(x);
              System.out.print("x="+x);  
  } 
```

> **Integer**是一个包含单个 int 字段的 Object。Integer 比 int 大得多。它有点像一个包含 int 的 Fedex 盒子。整数是不可变的（[来源](http://mindprod.com/jgloss/intvsinteger.html)）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-30T21:19:08.017

因为`x++`，在 Integer 对象上，实际上意味着：

```
int temp = x.intValue();
temp++;
x = Integer.valueOf(temp); 
```

x 变量被分配了一个新的 Integer 实例。而且由于参数是按值传递的，所以原始引用保持不变。

# asp.net - Google Analytics Tracker 在 ASP.NET 网站中不起作用

> ID：13653254
> 
> 赞同：0
> 
> 时间：2012-11-30T21:14:04.913
> 
> 标签：asp.net, vb.net, google-analytics

我有一个客户端，有大约 6 个网站，这些网站在 VB.NET 中都是相同的框架。我尝试在其中添加 Google Analytics Tracker，但均未成功。我有很多使用 WordPress 网站或我的自定义 CMS（在 JavaServer Faces 中）的客户，它们运行良好。我很确定我在 VB.NET 中做了一些我几乎从不使用的错误。

这是我目前正在使用的 VB.NET 中的代码：

```
<head>
    ...
    <!-- Google Analytics -->
    <asp:ContentPlaceHolder ID="GoogleAnalyticsTracker" runat="server">
        <script type="text/javascript">
            alert('ga-start');
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', '<%= m_sIDGoogle %>']);
            _gaq.push(['_setDomainName', 'none']);
            _gaq.push(['_setAllowLinker', true]);
            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                alert('ga-stop');
            }
            )();
        </script>
        </asp:ContentPlaceHolder>
</head> 
```

注意：我之前也尝试`</body>`过，如 Google Analytics 中所述。

这是渲染结果：

```
<script type="text/javascript">
    alert('ga-start');
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA–29119317–1']);
    _gaq.push(['_setDomainName', 'none']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_trackPageview']);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        alert('ga-stop');
    }
    )();
</script> 
```

另请注意，两个 alert('') 正在工作，Firebug 告诉我 ga.js 也已加载。

毕竟，谷歌分析中没有任何东西被跟踪。有人知道我做错了什么吗？

您也可以访问测试网站： http: [//mouk-mouk.amiesterre.com](http://mouk-mouk.amiesterre.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:37:43.080

终于修好了，不知道为什么，但是代码是错误的：

UA-29119317-1 > UA-29119317-1

```
UA–29119317–1 > UA-29119317-1 
```

在视觉上，我们在 Courier New 中什么都看不到...

# c# - C# Math.Round 和可为空的双精度数

> ID：13653257
> 
> 赞同：3
> 
> 时间：2012-11-30T21:14:30.833
> 
> 标签：c#, sql, ms-access, vbscript

我承担了将一个非常古老的经典 ASP/VBScript/Access 网站转换为“当前”网站的任务。正如您所怀疑的那样，大部分操作都更容易重做，但是有一个报告页面依赖于一堆没有记录的计算，所以我只需要使用他的代码/公式，但将它们移动到 C# .

只是为了全面披露，我将 Access 数据库毫无问题地导入 SQL Server。我使用 EntityFramewok PowerTools（代码优先）对新数据库进行逆向工程并创建我的 .edmx 文件。我注意到，当 EntityFramework 为我创建 .edmx 时，它在 C# 类中将数据库中浮动的字段定义为可为空的 Doubles（Double？）...是否存在任何转置、截断或更改值的风险将float转换为可为空的double时的方式？

我认为值得怀疑的另一个地方是四舍五入。显然，四舍五入的数学并没有改变，但我想知道 VBScript 和 C# 在如何四舍五入方面是否有任何已知差异。

所以VBScript中的这些行

```
varA1=oDataRs("boundData")
varB1i=varA1*3.0689
varB1=round(varB1i,3) 
```

变成这是 C#

```
var newVal = Math.Round(boundData.Value * 3.0689,3); 
```

我没有将任何东西转换为双精度或十进制，只是在它从数据库中出来时使用它。我必须使用 .Value 否则我不能乘以 Double？和双。

这些值非常接近，但在一个非常重要的数据上相差约 0.036，我找不到任何原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:39:51.050

事实上，[.NET](http://msdn.microsoft.com/en-us/library/wyk4d9cy.aspx)和[VB 都使用 Banker's Rounding 算法](http://blogs.msdn.com/b/ericlippert/archive/2003/09/26/53107.aspx)，所以只要不指定 MidpointRounding.AwayFromZero 就应该得到一致的结果。

真正有趣的问题是 Access 数据库中的源数据是浮点数还是货币列。如果是货币，那么您应该使用小数，而不是双精度。如果被倍增的数字的大小足够不同，这可能会导致微小的差异。

对于特别重要的数据，boundData的值是多少？

# javascript - 当特定文本片段出现在“查找”中时触发事件？(ctrl-F)

> ID：13653260
> 
> 赞同：3
> 
> 时间：2012-11-30T21:14:38.350
> 
> 标签：javascript, browser, dom-events

当用户在页面内搜索文本时 (`⌘</kbd>`F` or `Ctrl`-`F`), does it trigger any Javascript-accessible events?`

**这是我的示例用例：**

*   我有一个信息密集的文档页面，其中主要部分列在侧边栏中。
*   这些主要部分展开以显示子标题（在用户查看该部分之前隐藏）。
*   除非您已深度链接到该页面，否则可能很难找到子部分。
*   搭载浏览器“查找”功能会很好，这样如果用户搜索某个埋藏的物品，JS 就会检测到它并显示该部分。

请忽略此处的用户体验假设。这也可以通过页面上存在的自定义搜索字段轻松完成。我只是对检测（并搭载）内置浏览器查找功能的技术可行性感到好奇。

# python - 遍历python中的特定键集

> ID：13653269
> 
> 赞同：0
> 
> 时间：2012-11-30T21:15:11.477
> 
> 标签：python

我在 python 中有一个字典，其中日期元组作为键，数据元组作为值。

一个例子可能是：

```
(1900, 1): (2.0, 3.0, 4.0) 
```

其中 1900 是 1900 年，1 是第一个月，一月。

关键元组如下：(1900, 2), (1900, 3) 等等。

我怎样才能遍历这样的字典？特别是每年的第一个月，所以键集看起来像 (1900, 1)...(1910, 1) 元组中的第一项递增，但第二项保持不变。

感谢您给我的任何帮助，因为我对 python 比较陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:21:53.943

```
for key in sorted(my_dict, key=operator.itemgetter(1,0)):
    print(my_dict[key]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:20:22.123

```
for key, value in myDict.items():
   if(key[1] == 1):
      for value in myDict[key]:
         # gave you the year too for handy access
         iterationLogic(key[0], value) 
```

啊，没有注意到排序键访问。另一篇文章给出了对字典进行排序的逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:57:41.307

我最初的反应是更好的数据结构可能是嵌套字典，其中第一个键是年份，第二个键是月份：

```
#data looks like this:
d = {1900: {1:(the data), 2:(the data)...}, 1901: {1:(the data)...}}

for year in data:
    print year[1] 
```

# git - 在多个主分支上使用 git 的最佳方法是什么？

> ID：13653272
> 
> 赞同：1
> 
> 时间：2012-11-30T21:15:30.947
> 
> 标签：git, merge, branch

我的工作项目有一个 git repo。该软件仍在开发中，但我现在有三个不同的分支“主”，每个分支都有一些小的变化（图形定制和不同的行为）。我无法自动将我的开发分支与这些主分支合并，因为每个分支都是不同的。我读到了 git cherry-pick 但我的问题是：“这是正确的工作方式吗？” 我真的需要我的项目的这三个不同版本，也许我可以尝试将“核心”与“定制”分开并与 git submoduele 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:21:23.867

如果可以将这些变体隔离在它们自己的子目录中，则可以使用子模块（因为这是子模块在父存储库中的结构：例如，请参见“[为 git 迁移规划存储库布局](https://stackoverflow.com/a/9395375/6309)”）。
这应该是图形变化的情况。

如果这些变化是简单的配置文件差异，您还可以使用一个分支和[内容过滤器驱动程序](https://stackoverflow.com/questions/6031800/how-to-keep-different-content-of-one-file-in-my-local-and-github-repository/6031981#6031981)，以便根据检出 repo 的环境生成正确的配置文件。

我更喜欢那些选择樱桃采摘的选项，它可以引入：

*   [重复和功能依赖](https://stackoverflow.com/questions/13522664/what-is-cherry-pick-in-git/13524494#13524494)，
*   [功能依赖](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)

# node.js - Node.js Promises with Q :: Q.ninvoke 链

> ID：13653286
> 
> 赞同：1
> 
> 时间：2012-11-30T21:16:20.653
> 
> 标签：node.js, promise, q

我正在尝试缩小我的 node.js 服务器出现内存问题的潜在原因。我一直有点不舒服的代码的一部分是我对 Q Promise 的使用。

这是我的基本结构：

```
var Q = require('q');
MyClass.prototype.doSomething = function(somedata, callback) {
    var res = [];// will contain the results of each function call

    Q.ninvoke(this, 'doSomethingElse', 'hello!')
    .then((function(result){
        res.push(result);
        return Q.ninvoke(this.someobject, 'someFunction', somedata);
    }).bind(this))
    .then((function(result){
        res.push(result);
        callback(null, res);// Returns both result objects, in an array
    }).bind(this))
    .fail(callback)
    .done();
} 
```

这看起来合乎逻辑吗？

如果 doSomethingElse 函数也使用了 Promise 怎么办？这里的一切都正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T23:58:10.743

这对我来说看起来很可靠。使用 Promise没有问题`this.doSomethingElse`，只要它公开了一个 Node.js 回调 API（例如通过`nodeify`；参见最近更新的[API 参考](https://github.com/kriskowal/q/wiki/API-Reference)）。

--

也就是说，我会重写你的函数如下：

```
MyClass.prototype.doSomething = function(somedata, callback) {
    return Q.all([
        Q.ninvoke(this, 'doSomethingElse', 'hello!'),
        Q.ninvoke(this.someobject, 'someFunction', somedata)
    ]).nodeify(callback);
}; 
```

如果您遇到第二个函数取决于第一个函数的结果的情况，与此处给出的不同，我会这样做

```
MyClass.prototype.doSomething = function(somedata, callback) {
    return Q.ninvoke(this, 'doSomethingElse', 'hello!').then(function (result) {
      return Q.invoke(this.someobject, 'someFunction', result);
    }.bind(this))
    .nodeify(callback);
}; 
```

或者可能

```
MyClass.prototype.doSomething = function(somedata, callback) {
    var doSomethingElse = Q.nfbind(this.doSomethingElse.bind(this));
    var someFunction = Q.nfbind(this.someobject.someFunction.bind(this.someobject));

    return doSomethingElse('hello!').then(someFunction).nodeify(callback);
}; 
```

--

更一般地说：我们最近一直在研究 Q 性能和内存，结果主要在未发布的 master 分支中。尤其是：

*   0.8.11修复了与长堆栈跟踪相关[的相当可怕的内存泄漏](https://github.com/kriskowal/q/issues/111)
*   Master[修复了一个小的内存泄漏`Q.reject`](https://github.com/kriskowal/q/issues/148)
*   Master不再使用`Object.freeze`，[在V8中很慢](http://code.google.com/p/v8/issues/detail?id=1858)
*   大师增加了[关闭长堆栈跟踪](https://github.com/kriskowal/q#long-stack-traces)的能力。

# mingw - 如何使用 msys 在 Windows 上静态链接 iconv？

> ID：13653287
> 
> 赞同：6
> 
> 时间：2012-11-30T21:16:21.463
> 
> 标签：mingw, iconv, msys

我正在使用 mingw gcc 和 msys 来构建一些 GNU 实用程序。过去，由于不同的可执行文件需要不同版本的 libiconv，我遇到了很多问题，所以为了避免这个问题，我想将 iconv 静态链接到可执行文件中。

我已经使用 mingw 和 msys 以及 configure --enable-static 构建了 libiconv。这将创建 DLL、.dll.a 导入库和普通的 .a 静态库。

但是，当我尝试构建另一个与简单的 -liconv 链接的程序时，我得到了链接的 DLL。我认为 ld 出于某种原因更喜欢导入库而不是静态库（一般来说，这是一个不错的选择，这是特殊情况）。

如何确保我构建的程序是静态链接的？一种明显的方法是在构建时简单地删除 .dll.a 文件。这可能是最简单的选择，但我很好奇 - 是否可以设置链接器标志（通过 LDFLAGS 之类的东西）以强制静态加载 iconv（理想情况下，不影响其他库，但在紧要关头我会好的静态加载所有库）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:03:50.380

您是对的，默认情况下它将链接“共享”，除非您专门告诉它链接静态。您可以通过几种方式做到这一点，无论哪种方式适合您

```
make CC='gcc -static'
make LDFLAGS=-static
make LDFLAGS=libiconv.a 
```

您只需要查看`Makefile`并找到最不干扰的方式来适应它。

[例子](http://github.com/svnpenn/a/blob/5c50875/install/fatsort/fatsort.sh)

# .net - 我是否通过将 IL 代码编织为 IL_9999 来损害我的应用程序的性能？

> ID：13653289
> 
> 赞同：0
> 
> 时间：2012-11-30T21:16:23.887
> 
> 标签：.net, offset, cil, il

我在我的 dll 文件中弄乱了我的 IL 代码（仅用于学习目的）。我想看看如果我注入自己的 IL 代码会发生什么，例如`IL_9999: box !T`... 我想知道偏移值是否真的很重要......

就性能而言，9999 的 IL 偏移是否比 1000 的 IL 偏移成本更高？我的猜测是它不会因为编译器本身在按顺序运行时会跳过偏移量：

```
IL_000d:  ldc.i4.3
IL_000e:  box        [mscorlib]System.Int32
IL_0013:  call       instance int32 [mscorlib]System.Enum::CompareTo(object)
IL_0018:  call       void [mscorlib]System.Console::WriteLine(int32)
IL_001d:  nop 
```

此外，如果将我的 9999 的 IL 偏移量放入这些其他价值低得多的 IL 偏移量调用的中间，是否会损害我的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T12:16:03.153

所有这些`IL_XXXX:`实际上都不是偏移量，它们是标签。只是反编译器倾向于为每条指令添加一个标签，并根据其偏移量对其进行命名。这是因为标签名称不会保留在编译后的代码中（例如，编译后的 C# 可能不会有有意义的标签名称，即使它们被保留）并且反编译器需要至少有一些标签才能在分支指令中使用。

因此，如果您修改“偏移量”，然后使用 ilasm 编译代码，您实际上并没有以任何方式更改代码。因此，它不会对性能产生任何影响。

您可以验证这一点的一种方法是再次反编译修改后的程序集。

# java - properties.load() 如何接受非 inputStream

> ID：13653290
> 
> 赞同：0
> 
> 时间：2012-11-30T21:16:25.180
> 
> 标签：java, types, parameters

根据它的[文档页面](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)， java.util.Properties.load() 只接受 java.io.InputStream 。为什么我可以安全地加载[FileReader](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileReader.html)，而它显然不是 InputStream 的孩子？

这将打印来自 pFile 的属性。它出于某种原因起作用：

```
 String pFile = "/path/to/properties/file";
    Properties p = new Properties();
    FileReader fr = new FileReader(pFile);
    p.load(fr);
    System.out.println(p.toString()); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:28:13.973

因为您使用的是 Java >= 1.6 版本，它引入了 Properties.load(Reader)。

# python - 处理输入时间的最佳方法

> ID：13653295
> 
> 赞同：0
> 
> 时间：2012-11-30T21:16:41.753
> 
> 标签：python, date, time

我试图从用户那里得到一个日期和一个小时。

```
date = raw_input("enter date (example: 25/12/1990) ")
hour = raw_input("enter hour (example: 20:00) ") 
```

我就是这样做的，但我认为这不是实现它的好方法。
输入后，我想将输入的时间与当前时间以及其他时间进行比较。
我计划使用`time`python的模块。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:35:36.293

以上为您提供了一个日期作为字符串。您需要将该字符串转换为[日期](http://docs.python.org/2/library/datetime.html)时间对象，并处理出现的任何错误。如果您将用户限制为简单的日期，那么您可以使用 datetime 模块执行所有操作，如下所示：

```
>>> import datetime
>>> date = "15/03/2012"
>>> datetime.datetime.strptime(date, "%d/%m/%Y")
datetime.datetime(2012, 3, 15, 0, 0)
>>> hour = "13:01"
>>> datetime.datetime.strptime(hour, "%H:%M")
datetime.datetime(1900, 1, 1, 13, 1)
>>> datetime.datetime.strptime(date + " " + hour, "%d/%m/%Y %H:%M")
datetime.datetime(2012, 3, 15, 13, 1)

>>> date = "1/4/2012"
>>> hour = "3:01"
>>> datetime.datetime.strptime(date + " " + hour, "%d/%m/%Y %H:%M")
datetime.datetime(2012, 4, 1, 3, 1) 
```

您可以使用其他日期时间模块代码来执行诸如获取当前日期和时间之类的操作，或者查找两个日期或时间之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:27:25.923

我见过的最好的解决方案之一 - [dateutil](http://labix.org/python-dateutil)包，他们有解析器模块`parse()`，试图从字符串中提取日期/时间。[看这里](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)的例子。

# java - 面向对象，传递变量或使用对象状态

> ID：13653298
> 
> 赞同：0
> 
> 时间：2012-11-30T21:16:54.727
> 
> 标签：java, oop

嗨，为基本问题道歉，我确定我之前已经被告知答案，我花了一些时间搜索但找不到一个好的答案（可能是因为它很难作为搜索查询来表达），我已经完成了之前有一点 OO 编程，但最近我做了很多程序性的东西，所以这似乎让我的想法蒙上了阴影。

我有一个必须处理字符串的程序，该程序的一部分涉及清理字符串，所以我有这个方法：

```
private void sanitizeString() {
    removeEscape();
    removePunctuation();
    removeCaps();
} 
```

并且在类的前面声明了变量

```
String x = "... some string ..." 
```

在程序中，您显然会将所有函数传递他们需要处理的字符串，我的问题是在 OO 中是否可以在类的顶部声明这个字符串，然后执行类似的操作

```
private void removeCaps() {
    x = x.toLowerCase();
} 
```

或者应该是

```
private String removeCaps(String y) {
    y = y.toLowerCase();
    return y;
} 
```

我认为这应该是第一种方式，我知道这行得通，但我正在做一些必须证明良好 OO 的事情，所以我只想检查我的基本假设是否正确。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:23:07.080

你在这里有一个权衡：

1.  将变量声明为类变量意味着您必须为要清理的每个字符串创建一个新对象。

2.  将 String 变量传递给每个方法意味着您可以重用同一个对象来清理多个字符串。

您必须权衡每种方法的优缺点，以决定哪种方法最适合您的特定情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:18:20.177

由于`x`被声明为类变量，这个很好：

```
 private void removeCaps() {
        x = x.toLowerCase();
  } 
```

因为**类变量可以在类方法中访问，并且您不需要将类变量作为参数传递给相同的类方法**

相同的类变量只能以这种方式访问​​。非常简单的示例可能是 POJO 类，您可以在其中声明类变量并通过 getter/setter 方法公开它们。你不需要将类变量传递给这些方法，有时你不能（例如在 getter 方法中）。

在方法中添加一些关于类变量与局部变量的想法。

1.  如果需要一个理论上与类定义相关的变量，则该变量应定义为类变量。例如employeeId、employeeName.. 员工类中的变量应该定义为Employee 类变量。

2.  如果存在仅对类方法本地的变量需求，并且在方法/类之外的任何地方都不需要，则应将其定义为方法内部的局部变量。

3.  如果您正在定义一些实用程序方法来使用某些变量进行响应，那么这些变量应该作为参数传递给 util 方法。

回到你的问题：

如果您要定义一个完整的类，例如`Sanitising`，**它有几个围绕字符串变量的方法，**例如字符串类本身，那么最好将您的字符串定义为类变量并使用类变量编写方法。

但是，如果您要定义`Sanitising` **为 util/helper 类，那么最好将字符串作为方法参数传递，**因为您通常不希望您的 util 方法是有状态的（与类实例相关联）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:20:49.940

为了展示良好的 OO，您绝对应该使用

```
private String removeCaps(String y) {
    return y.toLowerCase();
} 
```

您可以将您的对象，在这种情况下，您的全局字段`x`中的字符串作为参数传递给方法。然后字符串在本地字段中`y`并返回修改后的版本。

# javascript - 将“%”输入到 javascript 输出中

> ID：13653299
> 
> 赞同：2
> 
> 时间：2012-11-30T21:16:56.553
> 
> 标签：javascript, jquery, css

有人可以帮助一个完整的javascript菜鸟吗？我的google-fu似乎完全缺乏......

我正在尝试将其转换为...

```
var $win = jQuery(window),
w = 0,h = 0,
sgcolour = [],
getWidth = function() {
 w = $win.width();
 h = $win.height();
};
$win.resize(getWidth).mousemove(function(e) {
 sgcolour = [
  Math.round(e.pageX/w * 255),
  Math.round(e.pageY/h * 255),
  150,
  1
 ];
 jQuery(document.body).css('background','rgba('+sgcolour.join(',')+')');
}).resize(); 
```

[在 jsfiddle 上](http://jsfiddle.net/7fq74/4/)

从 rgba 到 hsla，x 轴为色调，y 为饱和度，其他值固定。

我想我已经很明显了（改变'rgba'，将值从适合rgba的那些设置为适合hsla的值），但我一生都无法弄清楚如何让它在之后输出“%”所需值...

我希望我能够为自己解决这个问题，但我不确定我是否足够了解它以谷歌搜索正确的问题：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:20:01.657

`int/int`结果为`int`（所以 0 或 1）。

您应该在除法之前相乘：

```
Math.round(e.pageX * 255 / w),
Math.round(e.pageY * 255 / h), 
```

而且您不需要`Round`该值，因为它是 type `int`。

```
(e.pageX * 255 / w),
(e.pageY * 255 / h), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:23:59.250

如果它只是一个字符串，你可以只是 concatenate `'%'`，所以我不太确定问题是什么：

```
...
sgcolour = [
   Math.round(e.pageX/w * 360),
   Math.round(e.pageY/h * 100) + '%',
   '50%',
   1
];
jQuery("body").css('background','hsla('+sgcolour.join(',')+')'); 
```

请注意，这根本不是*直接*转换。如果您希望它这样做，那么我建议您使用您当前的`rgb`方法，然后将其转换为`hsl`之后。

# hadoop - hadoop集群说明

> ID：13653300
> 
> 赞同：1
> 
> 时间：2012-11-30T21:17:05.140
> 
> 标签：hadoop, amazon-ec2

我是 hadoop 的新手，我正在尝试在 Amazon EC2 上运行一个 hadoop jar。我已经通过控制台启动了我的亚马逊 ec2 实例，将我的文件上传到 dfs，然后能够成功运行作业 jar 并在实例上生成输出。

但我仍然在一方面感到困惑。我不确定该作业是在亚马逊 ec2 的单台机器上运行还是在集群上运行？如何找到我的 jar 运行所涉及的工作节点数量？

在一些参考链接中，我看到我们必须使用 launch-cluster command ，例如 "bin/hadoop-ec2 launch-cluster test-cluster 2" 。从控制台启动实例和使用这个命令（如启动集群）有什么区别。

# ruby-on-rails - 在 before_save 回调中访问非 ActiveRecord 属性

> ID：13653303
> 
> 赞同：1
> 
> 时间：2012-11-30T21:17:06.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我看来，我使用 a`<%= f.text_field :latlon %>`来编辑`latlon`属性（不是 ActiveRecord 列）。保存时，我想将其解析并`latlong`拆分为回调。`lat``lon``before_save`

我不知道如何访问`latlon`回调中变量的参数。我已经尝试过`self.latlong`，但调用与`attr_reader`and`lat`属性`lon`相同。

我知道我可以在控制器中执行此操作，但这是模型逻辑，不是吗？

```
#app/models/bla.rb
class Bla < ActiveRecord::Base
  attr_accessible :name, :lat, :lon, :latlon #but latlon is not an ActiveRecord Attribute

  before_save :foo

  def latlon
    "#{lat}, #{lon}"
  end

  attr_writer latlon

  private

  def foo
    self.lat = # regex that parse latlon
    self.lon = # regex that pase coors
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:39:08.613

您可以覆盖分配方法来执行您所描述的操作。这具有更快/更容易进行单元测试的好处。

```
def latlon=(new_value)
  # do work to split and assign
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:40:09.660

我认为您可以替换`attr_writer latlon`为

```
def latlon=(latlon)
  self.lat = # regex that parses lat from latlon
  self.lon = # regex that parses lon from latlon
end 
```

也许不要让 :lat 和 :lon 成为其中的一部分，`attr_accessible`因为它们永远不会被大量分配，即从`params`数组中分配。 `params`从控制器传递的将包含`latlon`值（格式正确）。

`before_save`在这种情况下，我认为您不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:28:34.750

模型应该可以访问`@latlon`您可以使用的实例变量，对吧？

# c# - Windows phone 分块获取照片

> ID：13653305
> 
> 赞同：1
> 
> 时间：2012-11-30T21:17:07.697
> 
> 标签：c#, .net, windows-phone-7

我想在后台任务中上传照片，限制是最大 5mb 内存使用量。

我怎样才能得到二进制块的图片？

是否可以在 HTTPWebRequest 中分块写入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:44:53.123

尝试使用[http 范围标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)。

他们让你抓住实体的小部分。

# apache-camel - 在 karaf 使用骆驼流

> ID：13653307
> 
> 赞同：1
> 
> 时间：2012-11-30T21:17:13.047
> 
> 标签：apache-camel, apache-karaf

我正在 karaf 运行一个股票示例路线。我知道它正在工作，因为当我将 stream:out 更改为 log:test 时，我可以每 5 秒看到一次日志中的消息。但是，我似乎没有在 karaf 控制台中得到任何东西。我也安装了骆驼流，在日志中看不到任何错误。我应该在运行 karaf bin/client 时看到 stream:out 数据吗？谢谢！

```
<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
<camelContext xmlns="http://camel.apache.org/schema/blueprint" id="simple">
<route>
    <from uri="timer:simple?period=5000"/>
        <setBody>
            <simple>Hello World</simple>
        </setBody>
    <to uri="stream:out"/>
 </route>
</camelContext>
</blueprint> 
```

我在下面添加了功能信息。我现在使用的是 karaf 2.2.9。我在 2.3.0 上试过：

```
karaf@root> features:list | grep stream
[installed  ] [2.9.4          ] camel-stream                             camel-2.9.4            
[uninstalled] [2.9.4          ] camel-xstream                         camel-2.9.4            
karaf@root> features:list | grep bluepr
[installed  ] [2.9.4          ] camel-blueprint                       camel-2.9.4            
[installed  ] [5.7.0          ] activemq-blueprint                    activemq-5.7.0         
karaf@root> ^D 
```

我也尝试过以下方法：

```
service KARAF-service stop
cd /usr/local/karaf
rm -rf data/cache/*
service KARAF-service start
echo "features:install camel-blueprint camel-stream" | bin/client
cp /root/simple-camel-blueprint.xml  deploy/  && tail -f data/log/karaf.log 
```

我得到：

```
***deleted startup messages***
2012-12-01 14:56:42,166 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:56:47,134 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:56:52,135 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:56:57,135 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:57:02,135 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:57:07,136 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:57:12,135 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World]
2012-12-01 14:57:17,135 | INFO  | - timer://simple | test                             | 64 - org.apache.camel.camel-core - 2.9.4 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:Hello World] 
```

如果我将“to uri”从“log:test”更改为“stream:out”，然后运行 ​​bin/client 我什么也得不到。这是一个有效的控制台输出测试吗？

我也应该添加这个：

```
karaf@root> camel:route-info route3
Camel Route route3
    Camel Context: simple

Properties 
        id = route3
        parent = 7fcb9c0a

Statistics
    Exchanges Total: 5
    Exchanges Completed: 5
    Exchanges Failed: 0
    Min Processing Time: 1ms
    Max Processing Time: 5ms
    Mean Processing Time: 1ms
    Total Processing Time: 9ms
    Last Processing Time: 1ms
    Load Avg: 0.00, 0.00, 0.00
    First Exchange Date: 2012-12-01 15:08:32
    Last Exchange Completed Date: 2012-12-01 15:08:52

Definition
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<route id="route3" xmlns="http://camel.apache.org/schema/spring">
    <from uri="timer:simple?period=5000"/>
    <setBody id="setBody3">
        <simple>Hello World</simple>
    </setBody>
    <to uri="stream:out" id="to3"/>
</route> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:39:06.137

您使用哪个 Camel 和 Karaf 版本？

你有没有安装骆驼流功能？在安装和启动自己的包之前，您需要这样做。

# c# - 使用 Esc 将表单全屏切换到窗口模式

> ID：13653311
> 
> 赞同：1
> 
> 时间：2012-11-30T21:17:35.093
> 
> 标签：c#, wpf, visual-studio-2010

我做了一些挖掘，发现了一些可以在运行时将应用程序直接运行到全屏模式的代码，我想知道是否有任何方法可以通过**按“Esc”**切换回窗口模式？

这是我的全屏模式代码：

```
private void Window_Loaded(object sender, RoutedEventArgs e) {
    WindowStyle = WindowStyle.None;
    Topmost = true;
    WindowState = WindowState.Maximized;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:29:09.223

放 `this.KeyPreview = true;`

和 `this.KeyDown += new System.Windows.Forms.KeyEventHandler(Form_KeyDown);`

```
 private void Form_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Escape)
        {
            this.WindowState = FormWindowState.Normal;
        }
    } 
```

# javascript - 从外部 div 滚动 div

> ID：13653315
> 
> 赞同：5
> 
> 时间：2012-11-30T21:17:47.080
> 
> 标签：javascript, html, css

查看下面的小 html 结构示例以了解上下文。看看这个[小提琴](http://jsfiddle.net/VfrkK/28/)和问题的例子。

小提琴用户的简短说明：

1.  向左滚动 - 垂直滚动条不可见
2.  向右滚动 - 垂直可见
3.  我希望垂直滚动条始终可见
4.  要求 - 标题必须保持固定（滚动时可见）

长解释：

我有一个带有固定标题和可滚动正文的表格。其复杂性需要两张表。这都很好。在我的事业中，我也有可调整大小的列。`table-layout: fixed`让它工作。这是出现问题。

为了使滚动体工作，我有一个 div 包裹`.rows`表格以进行滚动。这很有效，直到网格，特别是`.rows`表格，在 x 方向上溢出。在这种情况下，只有当网格一直向右滚动时，垂直滚动条才可见。因为滚动条在`.row-wrapper`div 上。那个溢出被`.grid`div隐藏了。我希望滚动条位于`.grid-canvas`div 上，以便即使滚动到左侧也能看到它。

```
<div class=grid>
    <div class=grid-canvas>
        <table class=header></table>
        <div class=row-wrapper>
            <table class=rows></table>
        </div>
    </div>
</div> 
```

旁注：如果您将表格显示设置为阻止，则不需要包装 div，除非您想支持我所做的 IE8。也许有办法解决这个问题，但这是另一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:35:48.883

经过几个小时没有运气的黑客攻击，我决定剖析一些现有的库，看看他们是如何做到这一点的。不幸的是，我非常失望。他们都在使用javascript。

这样做的好处是它只需要一小部分代码，并不意味着它会表现良好。为了使其尽可能好地执行，我会在 x 方向需要时更新标题。由于在我的情况下这通常是一个小区域，所以它应该足够好。

百倍魅力！

[小提琴](http://jsfiddle.net/VfrkK/100/)

这是基本的：

HTML

```
<div class=grid>
    <div class=grid-canvas>
        <div class=header-wrapper>
            <table class=header></table>
        </div>
        <div class=row-wrapper>
          <table class=rows></table>
        </div>
    </div>
</div> 
```

Javascript

```
$headerDiv = $('.header-wrapper');
$rowDiv = $('.row-wrapper');
$rowDiv.scroll(function(e) {
    $headerDiv.css({
        left: -$rowDiv[0].scrollLeft + 'px'
    });
});​ 
```

CSS

```
.grid {
  height: 500px;
  width: 350px;
}

.grid-canvas {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.header-wrapper {
  position: absolute;
  top: 0;
  width: auto;
  background-color: white;
  z-index: 1;
}

.row-wrapper {
  position: absolute;
  top: 0;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  overflow: auto;
  padding-top: 18px;
  background-color: lightgreen;
}

th, td {
  width: 80px;
  min-width: 80px;
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T08:26:10.417

如果你想使用 javascript/jQuery 这个呢？

```
$(function(){
    $("table").stickyTableHeaders();
});

/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
    MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */

;(function ($, window, undefined) {
    'use strict';

    var pluginName = 'stickyTableHeaders';
    var defaults = {
            fixedOffset: 0
        };

    function Plugin (el, options) {
        // To avoid scope issues, use 'base' instead of 'this'
        // to reference this class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element
        base.$el = $(el);
        base.el = el;

        // Cache DOM refs for performance reasons
        base.$window = $(window);
        base.$clonedHeader = null;
        base.$originalHeader = null;

        // Keep track of state
        base.isCloneVisible = false;
        base.leftOffset = null;
        base.topOffset = null;

        base.init = function () {
            base.options = $.extend({}, defaults, options);

            base.$el.each(function () {
                var $this = $(this);

                // remove padding on <table> to fix issue #7
                $this.css('padding', 0);

                $this.wrap('<div class="divTableWithFloatingHeader"></div>');

                base.$originalHeader = $('thead:first', this);
                base.$clonedHeader = base.$originalHeader.clone();

                base.$clonedHeader.addClass('tableFloatingHeader');
                base.$clonedHeader.css({
                    'position': 'fixed',
                    'top': 0,
                    'z-index': 1, // #18: opacity bug
                    'display': 'none'
                });

                base.$originalHeader.addClass('tableFloatingHeaderOriginal');

                base.$originalHeader.after(base.$clonedHeader);

                // enabling support for jquery.tablesorter plugin
                // forward clicks on clone to original
                $('th', base.$clonedHeader).click(function (e) {
                    var index = $('th', base.$clonedHeader).index(this);
                    $('th', base.$originalHeader).eq(index).click();
                });
                $this.bind('sortEnd', base.updateWidth);
            });

            base.updateWidth();
            base.toggleHeaders();

            base.$window.scroll(base.toggleHeaders);
            base.$window.resize(base.toggleHeaders);
            base.$window.resize(base.updateWidth);
        };

        base.toggleHeaders = function () {
            base.$el.each(function () {
                var $this = $(this);

                var newTopOffset = isNaN(base.options.fixedOffset) ?
                    base.options.fixedOffset.height() : base.options.fixedOffset;

                var offset = $this.offset();
                var scrollTop = base.$window.scrollTop() + newTopOffset;
                var scrollLeft = base.$window.scrollLeft();

                if ((scrollTop > offset.top) && (scrollTop < offset.top + $this.height())) {
                    var newLeft = offset.left - scrollLeft;
                    if (base.isCloneVisible && (newLeft === base.leftOffset) && (newTopOffset === base.topOffset)) {
                        return;
                    }

                    base.$clonedHeader.css({
                        'top': newTopOffset,
                        'margin-top': 0,
                        'left': newLeft,
                        'display': 'block'
                    });
                    base.$originalHeader.css('visibility', 'hidden');
                    base.isCloneVisible = true;
                    base.leftOffset = newLeft;
                    base.topOffset = newTopOffset;
                }
                else if (base.isCloneVisible) {
                    base.$clonedHeader.css('display', 'none');
                    base.$originalHeader.css('visibility', 'visible');
                    base.isCloneVisible = false;
                }
            });
        };

        base.updateWidth = function () {
            // Copy cell widths and classes from original header
            $('th', base.$clonedHeader).each(function (index) {
                var $this = $(this);
                var $origCell = $('th', base.$originalHeader).eq(index);
                this.className = $origCell.attr('class') || '';
                $this.css('width', $origCell.width());
            });

            // Copy row width from whole table
            base.$clonedHeader.css('width', base.$originalHeader.width());
        };

        // Run initializer
        base.init();
    }

    // A really lightweight plugin wrapper around the constructor,
    // preventing against multiple instantiations
    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
            }
        });
    };

})(jQuery, window); 
```

[现场演示](http://jsfiddle.net/jmosbech/stFcx/)

对不起，我忘了从哪里弄到的。但特别感谢他/她。还有作者，即 Jonas Mosbech。希望，它会帮助你。谢谢。！！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T22:13:11.933

我编辑了你的 CSS 并猜这是你想要的：

```
table {
  table-layout: fixed;
}

th, td {
  width: 80px;
  min-width: 80px;
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.grid {
  height: 500px;
  width: 350px;

  overflow-x: auto;
  overflow-y: scroll;
}

.grid-canvas {
  position: relative;
  width: 100%;
  height: 100%;
}

.header {
  position: absolute;
  top: 0;
  background-color: white;
  z-index: 10;
}

.row-wrapper {
  position: absolute;
  top: 0;
  width: auto;
  height: auto;
  /* assumed height of the header */
  padding-top: 18px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  background-color: lightgreen;
} 
```

# git - 安装 TortoiseGIT 时无法选择 SSH 客户端

> ID：13653319
> 
> 赞同：20
> 
> 时间：2012-11-30T21:18:00.077
> 
> 标签：git, tortoisegit

我使用 TortoisePink 作为我的 SSH 客户端安装了 TortoiseGIT。但后来我发现那不是用于我的目的的正确方法。所以，我卸载了 TortoiseGIT 并尝试重新安装，但是当我尝试重新安装时，它不会出现“选择你的 ssh 客户端”屏幕。我查看了他们的网站，但没有找到这个问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T13:26:24.963

TortoiseGIT`HKEY_CURRENT_USER\Software\TortoiseGit`卸载后将密钥留在注册表中。

我删除了它，并且能够在下次安装时选择 SSH 客户端。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-30T21:45:08.290

我可以通过转到 TortoiseGIT 设置页面来规避这个问题。在“网络”下，我注意到“TortoisePink.exe”文件仍然被选中。所以，我只是把它改成了没有路径和中提琴的“ssh.exe”！我的问题已解决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-11T19:41:33.647

我将在此处添加此内容，因为我不想为此重新安装 TortoiseGit，而其他解决方案没有帮助。

如果你想将 TortoiseGit 切换到 OpenSSH，只需在命令提示符下运行：

```
tortoisegitproc /command:firststart 
```

# c - 使用 JSHFA() 宏释放 libjudy Judy Hash Set (JudyHS) 数据结构时如何避免内存泄漏？

> ID：13653322
> 
> 赞同：1
> 
> 时间：2012-11-30T21:18:15.537
> 
> 标签：c, memory-leaks

我想使用 libjudy 构建一些数据结构来存储以固定长度字节数组为键的信息，这意味着我需要使用 JudyHS 结构。根据我对代码和文档的理解，键只能访问由单个机器字组成的元素，这很好，因为我想保存指向在堆上分配的结构的指针；但是，存在一个问题，似乎没有办法遍历先前存储的元素，并且用于释放结构的宏 (JHSFA) 在用于存储数据字的内存上调用 free()，但是没有提供允许调用代码释放单词指向的内存的机制。我验证了 JHSFA 不会使用 valgrind 和以下示例代码取消分配用户提供的内存：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <judy.h>

int
main(
  const int argc,
  const char *argv[]
)
{
  Pvoid_t table = (PWord_t)NULL;
  const size_t allocSize = sizeof("bar") + 1;
  char *bar = calloc(1, allocSize);
  strncpy(bar, "bar", allocSize);
  uint64_t key = UINT32_MAX + 1;
  PWord_t entry;
  JHSI(entry, table, &key, sizeof(key));
  *entry = (Word_t)bar;
  entry = NULL;
  JHSG(entry, table, &key, sizeof(key));
  if (!strncmp(bar, (const char *)(*entry), allocSize)) {
    printf("match\n");
  }
  else {
    printf("no match\n");
  }
  Word_t result;
  JHSFA(result, table);
} 
```

鉴于这种情况，如果此数据结构是我存储数据的唯一位置，那么其他一些 libjudy 用户能否指出一种避免内存泄漏的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:10:21.973

JudyHS 不能被迭代。因此，循环条目和释放值的典型解决方案是不可能直接实现的。您的选择是：

1) 使用 JudySL 并将您的密钥限制为其中没有 NULL 字节。如果您需要 NULL 字节，那么您还可以考虑将键转换为转义格式（即 NULL 字节是多字节转义序列的格式。）

2) 将 JudyHS 与另一个可以迭代的 ADT 结合起来。这取决于您的用例的复杂性。如果您在 JudyHS 中添加和删除内容，那么它是否可以以比 1) 更有效的方式完成这一点值得怀疑。如果您只添加整体，那么一个简单的链表、指针数组或 JudyL 将起作用。

# javascript - 虚假列和 masonry.js 不起作用

> ID：13653323
> 
> 赞同：1
> 
> 时间：2012-11-30T21:18:16.460
> 
> 标签：javascript, jquery-masonry, multiple-columns

我的作品集网站目前使用 masonry.js 以类似网格的方式显示帖子。虽然我最近遇到了一个我似乎无法摆脱的错误。如果您以较小的分辨率访问我的作品集网站[http://www.aerosphere.nl](http://www.aerosphere.nl)（调整浏览器大小或用平板电脑/手机查看），不知何故，砌体块移动到导航菜单下方。

我尝试过调整列的宽度，甚至将侧边栏移动到砖石块的右侧，但都没有成功。有人关心查看源代码和/或知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T14:47:05.030

问题在于我没有为导航菜单和网站的砖石部分使用固定位置。MasonryJS 使用固定位置来获得整体效果，并且在调整大小时，它会从屏幕的最左侧计算屏幕尺寸，因为它没有分配 x 坐标。

由于导航栏妨碍将整个事物定位在 x = 0 处，因此整个部分移动到导航栏下方。

# jquery - jquery nth-child 麻烦

> ID：13653326
> 
> 赞同：0
> 
> 时间：2012-11-30T21:18:28.517
> 
> 标签：jquery, web, selector, css-selectors

我正在使用 :nth-child 选择器来选择某些元素

情况1：

```
<div class='item show'>
<div class='item show'>
<div class='item show'>
<div class='item show'>
<div class='item show'>
<div class='item show'>
<div class='item show'>
<div class='item show'> 
```

和

案例2：

```
<div class='item show'>
<div class='item'>
<div class='item'>
<div class='item show'>
<div class='item'>
<div class='item'>
<div class='item show'>
<div class='item show'> 
```

我的代码从案例 1 开始，并执行 $('#outerDiv .show:nth-child(3n - 2)') 来选择每三个元素。这完美地工作。然后，如果用户更改某些设置，则某些元素会丢失它们的显示类并消失在屏幕上，代码看起来像案例 2。问题是现在当我执行 $('#outerDiv .show:nth-child(3n - 2)') 选择器，它仍然将其视为案例 1，即使我可以在控制台中清楚地看到它是案例 2。我做错了什么。抱歉，我无法发布实际代码，所以我举了一个简单的例子。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:20:50.347

`nth-child`选择器将**获取所有元素**，而与类无关..

使用 a`$.each`并在循环中分配类

```
​$('#outerDiv .show').each(function(i){
    if( i%3 === 0){
       $(this).addClass('a'); 
    }        
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/8V5mg/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:28:05.903

我将从关闭 div 元素开始。

代替

`<div class='item show'>`

放

```
<div class='item show'></div> 
```

这是一个快速演示，它选择 DOM 中的每第三个（也是第一个）元素：http: [//jsfiddle.net/robertp/hVBAC/2/](http://jsfiddle.net/robertp/hVBAC/2/)

我希望它有点帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:28:14.783

使用[`filter`](http://api.jquery.com/filter/)和[`css`](http://api.jquery.com/css/)函数：

```
 $('#outerDiv .show').filter(function(){
    return $(this).css('display') !== 'none';
 }).filter(":nth-child(3n - 2)"); 
```

首先，将元素列表过滤为没有属性的元素`display:none`。接下来，过滤第 n 个孩子。

# java - 将 JS 变量传递给 java 类

> ID：13653327
> 
> 赞同：1
> 
> 时间：2012-11-30T21:18:29.663
> 
> 标签：java, javascript, jsf, jsf-1.2

我正在制作一个公交路线项目，我需要谷歌地图来确定车站和停靠点，我从 JavaScript 中的谷歌地图获取坐标，现在我需要将这些坐标传递给我可以制作的 java 类这些坐标上的不同过程。我在 netbeans 上使用 JSF -Java server faces-。谁能帮我将这些坐标传递给 .java 类？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:24:25.020

有许多框架可以帮助您解决这个问题。例如，Primefaces 在其新的 JSF 实现中内置了一个谷歌地图插件（[http://www.primefaces.org/showcase-labs/ui/gmapHome.jsf](http://www.primefaces.org/showcase-labs/ui/gmapHome.jsf)）。手动操作也很容易。只需设置一个 Servlet 来处理 GET 请求并使用您希望将数据发送到 Servlet 的任何 Ajax 方法。我将从寻找一些 Servlet 和 Ajax 示例开始。同样，根据您使用的 JSF 实现，可能已经内置了 Ajax 工具。

祝你好运。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:15:04.987

You can use `<a4j:jsFunction>` to pass `javascript` values to the managed bean. This is an example.

This is your `js` array

```
<script>
  var coordinateArray = [12, 26];
</script> 
```

This is your page. Note that `sendData` is the name of your `jsFunction` and `coordinateArray.join()` converts the array to a String.

```
 <h:form>
    <a4j:commandButton value="Send" onclick="sendData(coordinateArray.join())"/>
    <a4j:jsFunction name="sendData">
      <a4j:actionparam name="param1" assignTo="#{hBean.coordinatesString}" />
    </a4j:jsFunction>
   </h:form> 
```

In you managed bean

```
 String coordinatesString;
  String[] coordinatesArray;

  public String getCoordinatesString() {
    return coordinatesString;
  }

  public void setCoordinatesString(String coordinatesString) {
    this.coordinatesString = coordinatesString;
    this.coordinatesArray = coordinatesString.split(",");//This is what you need
  } 
```

Edit:

* * *

Think `a4j:jsFunction` as a normal `javascript` function.You can put an `actionParam` inside it as in above sample. If so, it means that `jsFunction` has one argument(similar to normal javascript function argument). You give the `jsFunction` a name, and call it, using that given name like a normal `javascript` function(i.e. `funcName()`). If there is an `actionparam` inside it you should pass a parameter when you calling it(i.e. `funcName(value)`).
A `<h:form>` should not be necessarily around it. But if you want to call it when you `click` a `commandButton`, that button should be within a form.
As you say in your comment, if the name of your coordinate array is `path` then you call the above `jsFunction` like this. `sendData(path.join())`. You don't add any `javascript` code inside the `jsFunction`. **Simply you call the `jsFunction` from your `javascript` code as you call a normal `javascript` function.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:55:29.617

1.  使用隐藏输入`<h:inputHidden value="#{bean.value}"/>`。
2.  使用 javascript 更新其值。
3.  `<h:inputHidden value="#{bean.value}"/>`更新其 bean 值的过程。

这是一个工作示例：

```
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class Bean {

    private String value;

    @PostConstruct
    public void postConstruct() {
        value = "SERVER SIDE VALUE";
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

```
<h:head>
    <script>
        function updateElementValue(id,value){
            document.getElementById(id).value = value;
        }
    </script>
</h:head>

<h:body>

    <h:form id="form" prependId="false">

        <p:commandButton value="UPDATE CLIENT SIDE VALUE OF INPUT-HIDDEN"
                         onclick="updateElementValue('nameInputHiddenId',
                                                     'CLIENT SIDE VALUE');
                                                      return false;"/>
        <p:commandButton value="UPDATE SERVER SIDE VALUE OF INPUT-HIDDEN" 
                         process="@form" 
                         update="dialogId" 
                         oncomplete="dialogWidgetVar.show();" />

        <h:inputHidden id="nameInputHiddenId" value="#{bean.value}" />

        <p:dialog id="dialogId" widgetVar="dialogWidgetVar">
            <h:outputText id="nameOutputTextId" value="#{bean.value}" />
            <p:commandButton value="Yes" onclick="dialogWidgetVar.hide();" />
            <p:commandButton value="No" onclick="dialogWidgetVar.hide();"/>
        </p:dialog>

    </h:form>

</h:body> 
```

# java - 如何在 Windows 构建机器上为 Max OS X 创建 Java .app 包

> ID：13653329
> 
> 赞同：3
> 
> 时间：2012-11-30T21:18:47.940
> 
> 标签：java, macos, installation, swt, dmg

我有一个基于 SWT 的 Java 应用程序，可以在 Windows、Mac OS 和 Linux 上运行。我在我的 Windows 机器上开发它，并有一个 Linux 测试仪和一个 Mac 测试仪。目前，我的进程为我的 Windows 机器上的每个平台创建了一个可运行的 .jar 文件（它引用了来自 Eclipse.org 的平台特定的 .jar 和 lib 文件）。我有一个适用于 Windows 的安装程序 - 也是由 Windows 机器上的构建生成的。我想为我的 Mac 用户创建一个标准的 Mac OS 安装程序。正确的做法似乎是创建一个 .app 包并通过 dmg 文件分发它。这并不顺利。我有一个使用 SWT 的工作 Java 应用程序，可以在所有平台上从命令行运行。我有一种在 Windows 上构建 .dmg 的方法。但到目前为止，我所有试图让 .app 包工作的尝试都失败了。

我从遵循本教程开始：http: [//www.eclipse.org/swt/macosx/](http://www.eclipse.org/swt/macosx/)

但是在运行我的应用程序时，我收到一条错误消息，指出不支持 Power PC 的应用程序。那是使用在命令行中使用 java -jar 工作的相同二进制文件，所以问题一定出在我捆绑的方式上。页面中的示例 Hello 应用程序也无法运行，但出现不同的错误消息。

我整天都在搜索，发现了这个有希望的演讲： http: [//www.parleys.com/#st=5&id=2891&sl=72](http://www.parleys.com/#st=5&id=2891&sl=72)

在那次演讲中，演讲者说将有一种方法可以使用标准的 java 启动器在任何平台上创建 Mac OS .app 包。但我找不到任何这样的东西发布了。

我发现这篇文章看起来也很有希望：http: [//www.intransitione.com/blog/take-java-to-app-store/](http://www.intransitione.com/blog/take-java-to-app-store/)

但是这个秘籍说除非在 Mac OS 机器上构建，否则它不会工作。

我想做的是在我的 Windows 机器上为 Mac OS X 创建一个 .app 包以及 Windows 安装和 Linux 安装。最好将 jre 作为应用程序包的一部分（我已经为 Windows 和 Linux 工作）。我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:41:07.903

你见过[这个](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)吗？

.app 只是一个具有特殊结构的目录和一些特殊文件。创建完成后，您只需在每次构建时更新 JAR，可在此处找到：MyApp.app/Contents/Resources/Java/MyJar.jar。

在 My.app/Contents/Info.plist 中还会有一些 Java 特定的属性，但您可能不需要从最初设置它们的方式更改这些属性。

# ant - ANT：在 不扩展为多个参数

> ID：13653331
> 
> 赞同：0
> 
> 时间：2012-11-30T21:19:17.420
> 
> 标签：ant, build.xml

以下 ANT exec 标记未按预期运行。

```
<exec executable="c:\scratch\test.cmd">
    <arg value="A,B,C"/>
</exec> 
```

执行时，我希望它使用 1 个参数调用 text.cmd。但是，arg 正在扩展为三个单独的参数。

根据手册， value 应该将内容作为单个参数传递，但是，它作为三个传递（一个用于字符串的每个组件，用逗号分隔）。

我尝试用分号 (;) 替换命令“，”，但这也不起作用。似乎 arg 的 value 属性将提供的字符串解析为好像它是一个路径，但事实并非如此。

任何人都知道如何将“A，B，C”作为一个参数传递？

为了完整起见，我的 test.cmd 文件是这样的：

```
@echo off
echo Arg1: %1
echo Arg2: %2
echo Arg3: %3
echo Arg4: %4
echo Arg5: %5
echo Arg6: %6
echo Arg7: %7
echo Arg8: %8
echo Arg9: %9 
```

蚂蚁构建的输出是：

```
 [exec] Arg1: A
 [exec] Arg2: B
 [exec] Arg3: C
 [exec] Arg4:
 [exec] Arg5:
 [exec] Arg6:
 [exec] Arg7:
 [exec] Arg8:
 [exec] Arg9: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:59:09.153

问题已解决。我非常专注于 ant 中的问题，以至于我没有花时间测试 DOS 之类的命令行如何解释命令行参数。

从 Window 命令行，我运行 test.cmd a,c,b 并看到命令参数被拆分，因此，问题与 ant 无关。所以现在我只需要弄清楚如何强制 ANT 引用参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:43:00.050

尝试：

```
<exec executable="c:\scratch\test.cmd">
    <arg line="A,B,C"/>
</exec> 
```

[有关参数](http://ant.apache.org/manual/using.html#arg)如何工作的说明，请参见 ant 手册。

# python - 用于 JS 的双引号格式的 Python 字符串

> ID：13653334
> 
> 赞同：0
> 
> 时间：2012-11-30T21:19:30.220
> 
> 标签：python

因此，我编写了一个程序来格式化我在 Python 中的列表，以便以 HTML 形式编写为 JavaScript。看起来像这样

```
from django.template.defaultfilters import slugify
def js_format(cars):
   new_cars = []
   for car in cars:
       car = str(slugify(car))+'|'+car
       new_cars.append(car)
   return new_cars

dodge = ["Avenger","Caliber","Caravan","Challenger","Colt","D150","D250","D350","Dakota","Dart","Daytona","Durango","Durango Hybrid","Dynasty","Grand Caravan","Intrepid","Journey","Magnum","Monaco","Neon","Nitro","Omni","Raider","Ram 1500","Ram 2500","Ram 3500","Ram 50","Ram Van","Ram Wagon","Ramcharger","Shadow","Sprinter","SRT Viper","Spirit","Stealth","Stratus","Viper","W150","W250","W350"] 
```

当我使用“闪避”列表中的程序时...

```
>>> js_format(dodge)
['avenger|Avenger', 'caliber|Caliber', 'caravan|Caravan', 'challenger|Challenger', 'colt|Colt', 'd150|D150', 'd250|D250', 'd350|D350', 'dakota|Dakota', 'dart|Dart', 'daytona|Daytona', 'durango|Durango', 'durango-hybrid|Durango Hybrid', 'dynasty|Dynasty', 'grand-caravan|Grand Caravan', 'intrepid|Intrepid', 'journey|Journey', 'magnum|Magnum', 'monaco|Monaco', 'neon|Neon', 'nitro|Nitro', 'omni|Omni', 'raider|Raider', 'ram-1500|Ram 1500', 'ram-2500|Ram 2500', 'ram-3500|Ram 3500', 'ram-50|Ram 50', 'ram-van|Ram Van', 'ram-wagon|Ram Wagon', 'ramcharger|Ramcharger', 'shadow|Shadow', 'sprinter|Sprinter', 'srt-viper|SRT Viper', 'spirit|Spirit', 'stealth|Stealth', 'stratus|Stratus', 'viper|Viper', 'w150|W150', 'w250|W250', 'w350|W350'] 
```

一切都按照我想要的方式格式化，除了我需要列表中的每个项目都用双引号引起来。我不知道如何更改python中的引号，因为python平等地识别单引号和双字符串。任何帮助，将不胜感激。

感谢您查看我的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T21:23:05.003

用于`json.dumps()`创建 Javascript 文字：

```
def js_format(cars):
   new_cars = ['{0!s}|{1}'.format(slugify(car)), car) for car in cars]
   return json.dumps(new_cars) 
```

这将生成一个带有正确引用字符串的完整 JS 列表：

```
>>> js_format(dodge)
'["avenger|Avenger", "caliber|Caliber", "caravan|Caravan", "challenger|Challenger", "colt|Colt", "d150|D150", "d250|D250", "d350|D350", "dakota|Dakota", "dart|Dart", "daytona|Daytona", "durango|Durango", "durango-hybrid|Durango Hybrid", "dynasty|Dynasty", "grand-caravan|Grand Caravan", "intrepid|Intrepid", "journey|Journey", "magnum|Magnum", "monaco|Monaco", "neon|Neon", "nitro|Nitro", "omni|Omni", "raider|Raider", "ram-1500|Ram 1500", "ram-2500|Ram 2500", "ram-3500|Ram 3500", "ram-50|Ram 50", "ram-van|Ram Van", "ram-wagon|Ram Wagon", "ramcharger|Ramcharger", "shadow|Shadow", "sprinter|Sprinter", "srt-viper|SRT Viper", "spirit|Spirit", "stealth|Stealth", "stratus|Stratus", "viper|Viper", "w150|W150", "w250|W250", "w350|W350"]' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:21:39.800

在 for 循环中，将分配更改为以下内容：

```
car = '"' + str(slugify(car)) + '|' + car + '"' 
```

或者，您可以使用字符串格式：

```
car = '"{0}|{1}"'.format(str(slugify(car)), car) 
```

我可能会误解这一点，你想`js_format()`返回一个 JSON 字符串吗？如果是这样，请使用您当前的函数，但`import json`在文件的顶部，并将您的 return 语句更改为`return json.dumps(new_cars)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:23:36.090

如果您需要您的字符串包含双引号 - 手动添加它们：

```
car = '"%s|%s"' % (slugify(car), ca) 
```

# c - 如何在 Ragel 中实现前瞻

> ID：13653335
> 
> 赞同：1
> 
> 时间：2012-11-30T21:19:34.643
> 
> 标签：c, ragel

我有两种状态；一个是另一个更一般的状态的特定实例。我相信避免同时进入两种状态的正确方法是使用 k>1 实现前瞻，但我找不到任何如何做到这一点的例子。

Ragle 用户指南说：

> 在使用 fhold 和 fexec 时，用户必须小心将生成的机器与另一台机器组合在一起，以便调整当前位置的转换不会与来自另一台机器的转换组合。

我不完全确定这意味着什么，除了“不要尝试阅读当前表达式的末尾”。

我的机器是这样的：

```
seglen16 = any{2} >{ swab(p, &len, 2); len = len - 2; };            
action check {len--}
buffer = (any when check)* %when !check @{ printf("[%d]:%d\n", len, *p); };

# JPEG Markers
mk_app0 = 0xFF 0xE0; 
mk_appx = 0xFF (0xE0..0xEF);
marker = 0xFF ^0x00;
nonmarker = !marker - zlen;

# JPEG APP Segments
seg_app0_jfif = mk_app0 seglen16 "JFIF" 0x00 buffer @{ printf("jfif app0\n"); };
seg_appx_unk = mk_appx nonmarker* @{ printf("unknown app content\n"); };
seg_app = (seg_app0_jfif | seg_app1_exif | seg_appx_unk);

# Main Machine  
expr = (mk_soi @lerr(bad) nonmarker* seg_app* nonmarker* mk_eoi); 
```

我想标记 JPEG 标头，跳过未知段并处理 JFIF 等众所周知的段。JPEG 应用程序段 app0 以`0xFFE0`. 如果 app0 包含 JFIF 数据，则 app0 标记后跟一个 2 字节长度和字符串“ `JFIF\0`”。这意味着在识别应用程序段时我需要 7 个字节的前瞻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:19:23.637

> 我想标记 JPEG 标头，跳过未知段并处理 JFIF 等众所周知的段。JPEG 应用程序段 app0 以 0xFFE0 开头。如果 app0 包含 JFIF 数据，则 app0 标记后跟一个 2 字节长度和字符串“JFIF\0”。

好的。

> 这意味着在识别应用程序段时我需要 7 个字节的前瞻。

为什么？您可以将“未知”模式应用于所有段，*除了*使用通用模式已知的段：

```
seg_app0_jfif = mk_app0 seglen16 "JFIF" 0x00 buffer @{ printf("jfif app0\n"); };
known_segment = (seg_app0_jfif | seg_app1_exif);
unknown_segment = ((mk_appx nonmarker*) - known_segment) @{ printf("unknown app content\n"); };
seg_app = (known_segment | unknown_segment); 
```

这样做不需要前瞻。Ragel 生成适当的状态和转换，同时处理这两种模式，直到处理了足够多的输入以消除它们的歧义。`unknown_segment`仅当它不是 a 时才会发生完成操作`known_segment`，这似乎是您想要实现的行为。

# c++ - C“未定义的引用”，但我在同一个文件中指定了它

> ID：13653336
> 
> 赞同：2
> 
> 时间：2012-11-30T21:19:35.603
> 
> 标签：c++, reference, undefined, nintendo-ds

我正在尝试 Nintendo DS 编程，我有一个 main.cpp 文件、一个 snake.h 文件和一个 snake.cpp 文件。当我编译（使用Makefile）时，我得到了

```
/home/david/Dropbox/sources/ds/04_snake/source/snake.cpp:228: undefined reference to `printBlock(int, int, unsigned short, int)'
/home/david/Dropbox/sources/ds/04_snake/source/snake.cpp:230: undefined reference to `printBlock(int, int, unsigned short, int)' 
```

这是此功能中的错误

```
void drawSnake(game g) {
    int i;
    printBlock(g->s->last[0], g->s->last[1], g->bgColor, g->block);
    for(i=0; g->s->points[i][0]!=-1 && i<MAXLENGHT; i++)
        printBlock(g->s->points[i][0], g->s->points[i][1], g->s->color, g->block);
    return;
} 
```

但是在同一个文件中，大约 100 行之前，我有

```
int printBlock(game g, int x, int y, u16 color, int thickness) { /*code*/ } 
```

如果我注释我使用 printBlock 的行（在 drawSnake 函数中），代码编译不会出错。我试图改变名字，改变职位，但我不明白为什么只有那个功能会给我错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T21:21:46.727

那是一个不同的函数（五个参数而不是四个）。

您可能打算这样称呼它：

```
printBlock(g, g->s->points[i][0], ...
           ^ THIS 
```

（其他呼叫站点也是如此。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T21:22:06.397

您缺少第一个参数，类型为`game`。您可能需要更改第 228 行：

```
 printBlock(g->s->last[0], g->s->last[1], g->bgColor, g->block); 
```

对此：

```
 printBlock(g, g->s->last[0], g->s->last[1], g->bgColor, g->block); 
```

同样在第 230 行。

# ant - 如何在 ANT 任务中将 AM 或 PM 添加到时间日期格式？

> ID：13653337
> 
> 赞同：2
> 
> 时间：2012-11-30T21:19:35.550
> 
> 标签：ant

我有一个日期和时间戳，我想将 AM 或 PM 值添加到其中。我还没有找到这样做的方法。这是我的代码：

```
<target name="updateDate">

    <propertyset id="tdate"></propertyset>

    <tstamp>
        <format property="tdate" pattern="MM-dd-yyyy HH:mm"/>
    </tstamp>

    <echo>Updating build date to: ${tdate}</echo>

    <replaceregexp byline="true">
        <regexp pattern="BUILD_DATE:String\s+=\s+(['|&quot;])([a-zA-Z0-9-:\s]+)(['|&quot;])"/>
        <substitution expression="BUILD_DATE:String = \1${tdate}\3"/>
        <fileset dir="project/src/model">
            <include name="ProjectModel.as"/>
        </fileset>
    </replaceregexp>

</target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:24:33.803

直接来自[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

> ```
> a     Am/pm marker    Text    PM 
> ```

所以

```
<format property="tdate" pattern="MM-dd-yyyy HH:mm a"/> 
```

请注意，这是多余的`HH`，因为`HH`打印从 00 到 23`hh`的小时。用于获取从 01 到 12 的小时。

# android - 在 ICS 上重新启动时共享首选项丢失

> ID：13653338
> 
> 赞同：1
> 
> 时间：2012-11-30T21:19:51.137
> 
> 标签：android, sharedpreferences, android-4.0-ice-cream-sandwich

！！请帮助，我的用户因此丢失数据，我不知道该怎么办。

这只发生在冰淇淋三明治上，在果冻豆上很好用，Hoenycomb，是什么原因造成的？

由于我的一个字符串只是一个数字，将它保存为浮点数或整数会更好吗？

奇怪的是，它在我的 android 4.0.3 的 acer a500 平板电脑上运行良好，但它在 4.0.3 的模拟器上不起作用，我收到了一个用户在 4.0 上使用 Galaxy s3 的投诉。 4，对他来说也没有工作..

我将两个字符串保存到共享首选项，如下所示：

谢谢

```
 private static final String PREFS_NAME = "com.MY_PACKAGE.MY_APP.MY_WIDGET_PROVIDER_CLASS";
    private static final String PREF_PREFIX_KEY = "prefix_"; 
    private static final String PREF_SIZE_PREFIX_KEY = "prefix_";

...

  static void saveTitlePref(Context context, int mAppWidgetId, String text) {

        SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();
        editor.putString(PREF_PREFIX_KEY + mAppWidgetId, text);
        editor.commit();
    }

   static void saveSizePref(Context context, int mAppWidgetId, String size) {

        SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();
        editor.putString(PREF_SIZE_PREFIX_KEY, size);
        editor.commit();
    }

   static String loadTitlePref(Context context, int mAppWidgetId) {

        SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        String prefix = prefs.getString(PREF_PREFIX_KEY + mAppWidgetId, null);
        // If there is no preference saved, get the default from a resource
        if (prefix != null) {
            return prefix;
        } else {
            return context.getString(R.string.appwidget_prefix_default);
        }
    }

    static String loadSizePref(Context context, int mAppWidgetId) {

        SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        String sizeprefix = prefs.getString(PREF_SIZE_PREFIX_KEY, null);
        // If there is no preference saved, get the default from a resource
        if (sizeprefix != null) {
            return sizeprefix;
        } else {
            return "24";
        }
    } 
```

字符串 xml

```
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">

    <string name="appwidget_prefix_default"></string>
    <string name="appwidget_text_format"><xliff:g id="prefix">%1$s</xliff:g></string> 
    <string name="appwidget_size_format"><xliff:g id="sizeprefix">%s</xliff:g></string>

</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:28:15.263

每个小部件的尺寸偏好不是唯一的，这是故意的吗？

你的所作所为

```
editor.putString(PREF_SIZE_PREFIX_KEY, size); 
```

代替

```
editor.putString(PREF_SIZE_PREFIX_KEY + appWidgetId, size); 
```

与检索相同：

```
 String sizeprefix = prefs.getString(PREF_SIZE_PREFIX_KEY, null); 
```

因此，对 this 的每次新调用都会为其他小部件覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T11:32:56.957

首先，您不应该相信模拟器上发生的事情，因为它有时会奇怪地工作。

你的代码看起来不错。

我会说您应该在其他设备上检查相同的问题并检查是否正常，因为您的用户很可能遇到了其他问题，这最终推断出偏好无法正常工作

我自己经历过一些情况，用户说该应用程序不适用于他们，即使我已经在他们使用的同一设备上对其进行了测试。

# java - 通过 scribe 将 oauth 与 facebook 一起使用时，ubuntu 12 上的 JSSE 出错

> ID：13653341
> 
> 赞同：0
> 
> 时间：2012-11-30T21:20:04.137
> 
> 标签：java

我能够成功地使用 scribe 和 facebook 进行身份验证。在另一台计算机上，我现在收到以下错误消息：

```
jre/lib/jsse.jar: error reading zip file 
```

异常指向：

```
NoClassDefFoundError occured : javax/net/ssl/HttpsURLConnection 
```

除了在这个盒子上重新安装 Java 之外，我还能做些什么来进一步解决这个问题？JDK 版本是 1.6.0_35（我现在不能为这个应用程序使用 JDK 7）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:54:29.140

我在 Ubuntu 上重新安装了 JDK 6，解决了这个问题。我不确定是什么导致了以前安装的问题。希望能帮助到你。

# java - Lucene 4.0 API - NRTManager 简单案例使用

> ID：13653343
> 
> 赞同：2
> 
> 时间：2012-11-30T21:20:20.457
> 
> 标签：java, lucene

我确实在为这个新的 API 和缺乏诸如 NRT 管理器之类的核心事物的示例而苦苦挣扎。

我按照[这个](http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-lucenes.html)例子，这是最终的结果：

这是 NRT 管理器的构建方式：

```
analyzer = new StopAnalyzer(Version.LUCENE_40);
config = new IndexWriterConfig(Version.LUCENE_40, analyzer);
writer = new IndexWriter(FSDirectory.open(new File(ConfigUtil.getProperty("lucene.directory"))), config);
mgrWriter = new NRTManager.TrackingIndexWriter(writer);
ReferenceManager<IndexSearcher> mgr = new NRTManager(mgrWriter, new SearcherFactory(), true); 
```

向 NRT 管理器的编写器添加一个新元素：

```
long gen = -1;
try{
    Document userDoc = DocumentManager.getDocument(user);
    gen = mgrWriter.addDocument(userDoc);
} catch (Exception e) {}
return gen; 
```

经过一段时间后，我需要更新以前的文档：

```
// Acquire a searcher from the NRTManager. I am using the generation obtained in the creation step
((NRTManager)mgr).waitForGeneration(gen);
searcher = mgr.acquire();

//Search for the document based on some user id
Term idTerm = new Term(USER_ID, Integer.toString(userId));
Query idTermQuery = new TermQuery(term);
TopDocs result = searcher.search(idTermQuery, 1);
if (result.totalHits > 0) resultDoc = searcher.doc(result.scoreDocs[0].doc);
else resultDoc = null; 
```

问题是`resultDoc`它将始终为空。我错过了什么？我不应该使用`commit()`or`flush()`来查看这些更改。

我正在使用[此处](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/NRTManagerReopenThread.html)`NRTManagerReopenThread`举例说明的 a 。

**LE userDoc 创建**

```
public static Document getDocument(User user) {
    Document doc = new Document();
    FieldType storedType = new FieldType();
    storedType.setStored(true);
    storedType.setIndexed(false);

    // Store user data
    doc.add(new Field(USER_ID, user.getId().toString(), storedType));
    doc.add(new Field(USER_NAME, user.getFirstName() + user.getLastName(), storedType));

    FieldType unstoredType = new FieldType();
    unstoredType.setStored(false);
    unstoredType.setIndexed(true);
    Field field = null;

    // Analyze Location
    String tokens = "";
    if (user.getLocation() != null && ! user.getLocation().isEmpty()){
        for (Tag location : user.getLocation()) tokens += location.getName() + " ";

        field = new Field(USER_LOCATION, tokens, unstoredType);
        field.setBoost(Constants.LOCATION);
        doc.add(field);
    }

    // Analyze Language
    if (user.getLanguage() != null && ! user.getLanguage().isEmpty()){
        // Same as Location
}

    // Analyze Career
    if (user.getCareer() != null && ! user.getCareer().isEmpty()){
        // Same as Location
    }
    return doc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:02:20.123

您的问题与 NRT 无关。您正在再次搜索 USER_ID 字段，尽管它尚未被索引，但这是行不通的。如果您不希望您的 ID 字段被标记化，只需调用 FieldType#setTokenized(false)（或仅使用 StringField，默认情况下会执行此操作：索引为未标记化）。

# applescript - 如何使用 AppleScript 将对象记录到控制台

> ID：13653358
> 
> 赞同：60
> 
> 时间：2012-11-30T21:21:21.413
> 
> 标签：applescript

我只是想在我的 applescript 的整个生命周期中记录对象的状态。在其他语言中，对象的 toString() 方法将呈现等效的文本，我可以使用它们。在 AppleScript 中，情况似乎并非如此。

```
convert applescript object to string (similar to toString) 
```

将查找器对象（及其属性）输出到 AppleScript 编辑器的“结果”窗口，但前提是它是最后执行的语句。

如果我有一个 trace() 语句（用于记录目的的消息）：

```
on trace(message)
do shell script "cat >>~/log/applescript.txt <<END_OF_THE_LOG
" & (message as text) & "
END_OF_THE_LOG"
end trace 
```

并尝试记录相同的对象，我得到

```
Can’t make properties of application "Finder" into type text. 
```

我愿意接受更好的登录控制台的方法，但想了解如何在脚本中间编写对象的属性（如 AppleScript 编辑器所做的）以测试任何一种方式。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-01-24T19:56:24.703

AppleScript 并不容易：

*   `log` *仅*在 AppleScript Editor 中运行或通过`osascript`（`stderr`在这种情况下）运行时记录 - 在其他情况下输出将丢失，例如当应用程序运行具有`NSAppleScript`Cocoa 类的脚本时。

*   `log`只接受*一个*论点；虽然它确实接受任何对象类型，但它并不容易获得非内置类型的有意义表示：`log me`例如，尝试获取有关脚本本身的信息；经常，`log (get properties of <someObj>)`必须用于获取有意义的信息；请注意繁琐的语法，这是必需的，因为仅使用`log properties of <someObj>`通常仅打印*引用表单的名称*而不是其指向的属性（例如，无`log properties of me`用地输出 just `(*properties*)`）。

*   一般来说，AppleScript 很难获得非内置类型对象的有意义的文本表示：（`<someObj> as text`与: 相同`<someObj> as string`）令人讨厌的*中断*- 引发运行时错误 - 对于此类对象；试试`me as text`。

以下是**解决这些问题的辅助子程序**：

*   **`dlog()`**是一个子例程，它将任何对象的有意义的文本表示与基于全局配置变量的写入多个日志目标（包括系统日志和文件）的能力相结合。
*   **`toString()`**（有效嵌入`dlog()`）是一个子例程，它接受任何类型的单个对象并从中派生出有意义的文本表示。

^(向@1.61803 致敬；他的回答为实现各种日志目标提供了指导。)

## 例子：

```
 # Setup: Log to syslog and a file in the home dir.
  #        Other targets supported: "log", "alert"
  #        Set to {} to suppress logging.
set DLOG_TARGETS to { "syslog", "~/as.log" } 
  # Log properties of the front window of frontmost application.
dlog(front window of application (path to frontmost application as text))
  # Log properties of own front window; note the *list* syntax for multiple args.
dlog({"my front window: ", front window})

  # Get properties of the running script as string.
toString(me) # ->, e.g.: [script name="sandbox"] {selection:insertion point after character 2475 of text of document "sandbox2.scpt", frontmost:true, class:application, name:"AppleScript Editor", version:"2.6"} 
```

有关详细信息，请参阅每个子例程上方的源代码注释。

* * *

## dlog() 源代码

```
 # Logs a text representation of the specified object or objects, which may be of any type, typically for debugging.
    # Works hard to find a meaningful text representation of each object.
    # SYNOPSIS
    #   dlog(anyObjOrListOfObjects)
    # USE EXAMPLES
    #   dlog("before")  # single object
    #     dlog({ "front window: ", front window }) # list of objects
    # SETUP
    #   At the top of your script, define global variable DLOG_TARGETS and set it to a *list* of targets (even if you only have 1 target).
    #     set DLOG_TARGETS to {} # must be a list with any combination of: "log", "syslog", "alert", <posixFilePath>
    #   An *empty* list means that logging should be *disabled*.
    #   If you specify a POSIX file path, the file will be *appended* to; variable references in the path
    #   are allowed, and as a courtesy the path may start with "~" to refer to your home dir.
    #   Caveat: while you can *remove* the variable definition to disable logging, you'll take an additional performance hit.
    # SETUP EXAMPLES
    #    For instance, to use both AppleScript's log command *and* display a GUI alert, use:
    #       set DLOG_TARGETS to { "log", "alert" }
    # Note: 
    #   - Since the subroutine is still called even when DLOG_TARGETS is an empty list, 
    #     you pay a performancy penalty for leaving dlog() calls in your code.
    #   - Unlike with the built-in log() method, you MUST use parentheses around the parameter.
    #   - To specify more than one object, pass a *list*. Note that while you could try to synthesize a single
    #     output string by concatenation yourself, you'd lose the benefit of this subroutine's ability to derive
    #     readable text representations even of objects that can't simply be converted with `as text`.
    on dlog(anyObjOrListOfObjects)
        global DLOG_TARGETS
        try
            if length of DLOG_TARGETS is 0 then return
        on error
            return
        end try
        # The following tries hard to derive a readable representation from the input object(s).
        if class of anyObjOrListOfObjects is not list then set anyObjOrListOfObjects to {anyObjOrListOfObjects}
        local lst, i, txt, errMsg, orgTids, oName, oId, prefix, logTarget, txtCombined, prefixTime, prefixDateTime
        set lst to {}
        repeat with anyObj in anyObjOrListOfObjects
            set txt to ""
            repeat with i from 1 to 2
                try
                    if i is 1 then
                        if class of anyObj is list then
                            set {orgTids, AppleScript's text item delimiters} to {AppleScript's text item delimiters, {", "}} # '
                            set txt to ("{" & anyObj as string) & "}"
                            set AppleScript's text item delimiters to orgTids # '
                        else
                            set txt to anyObj as string
                        end if
                    else
                        set txt to properties of anyObj as string
                    end if
                on error errMsg
                    # Trick for records and record-*like* objects:
                    # We exploit the fact that the error message contains the desired string representation of the record, so we extract it from there. This (still) works as of AS 2.3 (OS X 10.9).
                    try
                        set txt to do shell script "egrep -o '\\{.*\\}' <<< " & quoted form of errMsg
                    end try
                end try
                if txt is not "" then exit repeat
            end repeat
            set prefix to ""
            if class of anyObj is not in {text, integer, real, boolean, date, list, record} and anyObj is not missing value then
                set prefix to "[" & class of anyObj
                set oName to ""
                set oId to ""
                try
                    set oName to name of anyObj
                    if oName is not missing value then set prefix to prefix & " name=\"" & oName & "\""
                end try
                try
                    set oId to id of anyObj
                    if oId is not missing value then set prefix to prefix & " id=" & oId
                end try
                set prefix to prefix & "] "
                set txt to prefix & txt
            end if
            set lst to lst & txt
        end repeat
        set {orgTids, AppleScript's text item delimiters} to {AppleScript's text item delimiters, {" "}} # '
        set txtCombined to lst as string
        set prefixTime to "[" & time string of (current date) & "] "
        set prefixDateTime to "[" & short date string of (current date) & " " & text 2 thru -1 of prefixTime
        set AppleScript's text item delimiters to orgTids # '
        # Log the result to every target specified.
        repeat with logTarget in DLOG_TARGETS
            if contents of logTarget is "log" then
                log prefixTime & txtCombined
            else if contents of logTarget is "alert" then
                display alert prefixTime & txtCombined
            else if contents of logTarget is "syslog" then
                do shell script "logger -t " & quoted form of ("AS: " & (name of me)) & " " & quoted form of txtCombined
            else # assumed to be a POSIX file path to *append* to.
                set fpath to contents of logTarget
                if fpath starts with "~/" then set fpath to "$HOME/" & text 3 thru -1 of fpath
                do shell script "printf '%s\\n' " & quoted form of (prefixDateTime & txtCombined) & " >> \"" & fpath & "\""
            end if
        end repeat
    end dlog 
```

* * *

## toString() 源代码

```
 # Converts the specified object - which may be of any type - into a string representation for logging/debugging.
    # Tries hard to find a readable representation - sadly, simple conversion with `as text` mostly doesn't work with non-primitive types.
    # An attempt is made to list the properties of non-primitive types (does not always work), and the result is prefixed with the type (class) name
    # and, if present, the object's name and ID.
    # EXAMPLE
    #       toString(path to desktop)  # -> "[alias] Macintosh HD:Users:mklement:Desktop:"
    # To test this subroutine and see the various representations, use the following:
    #   repeat with elem in {42, 3.14, "two", true, (current date), {"one", "two", "three"}, {one:1, two:"deux", three:false}, missing value, me,  path to desktop, front window of application (path to frontmost application as text)}
    #       log my toString(contents of elem)
    #   end repeat
    on toString(anyObj)
        local i, txt, errMsg, orgTids, oName, oId, prefix
        set txt to ""
        repeat with i from 1 to 2
            try
                if i is 1 then
                    if class of anyObj is list then
                        set {orgTids, AppleScript's text item delimiters} to {AppleScript's text item delimiters, {", "}}
                        set txt to ("{" & anyObj as string) & "}"
                        set AppleScript's text item delimiters to orgTids # '
                    else
                        set txt to anyObj as string
                    end if
                else
                    set txt to properties of anyObj as string
                end if
            on error errMsg
                # Trick for records and record-*like* objects:
                # We exploit the fact that the error message contains the desired string representation of the record, so we extract it from there. This (still) works as of AS 2.3 (OS X 10.9).
                try
                    set txt to do shell script "egrep -o '\\{.*\\}' <<< " & quoted form of errMsg
                end try
            end try
            if txt is not "" then exit repeat
        end repeat
        set prefix to ""
        if class of anyObj is not in {text, integer, real, boolean, date, list, record} and anyObj is not missing value then
            set prefix to "[" & class of anyObj
            set oName to ""
            set oId to ""
            try
                set oName to name of anyObj
                if oName is not missing value then set prefix to prefix & " name=\"" & oName & "\""
            end try
            try
                set oId to id of anyObj
                if oId is not missing value then set prefix to prefix & " id=" & oId
            end try
            set prefix to prefix & "] "
        end if
        return prefix & txt
    end toString 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-30T22:30:35.717

只需使用`log`AppleScript 编辑器中的语句。当您在 Applescript 编辑器中查看结果时，在窗口底部按“事件”按钮。通常按下“结果”按钮，然后您只会看到您提到的最后一条语句的结果。因此，将按钮更改为“事件”。这将向您显示脚本运行时发生的所有事情，以及`log`您在整个代码中放置的所有语句。请注意，`log`语句不必是文本。您可以记录任何对象。

这是调试脚本并查看发生了什么的最佳方式。作为一个例子，试试这个并查看“事件”。如果您查看事件，实际上认为您不需要很多`log`语句，因为所有内容都已记录！

```
set someFolder to path to desktop
log someFolder

tell application "Finder"
    set someItem to first item of someFolder
    log someItem

    set itemProps to properties of someItem
    log itemProps
end tell 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-23T13:37:01.133

尝试以下任何方法：

```
# echo to file
do shell script "echo " & quoted form of (myObj as string) & ¬
    " > ~/Desktop/as_debug.txt"

# write to file
set myFile to open for access (path to desktop as text) & ¬
    "as_debug2.txt" with write permission
write myObj to myFile
close access myFile

# log to syslog
do shell script "logger -t 'AS DEBUG' " & myObj

# show dialog
display dialog "ERROR: " & myObj 
```

如果您尝试记录的不是文本，您可以尝试：

```
quoted form of (myObj as string) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-27T16:23:09.523

以下是控制台日志的示例：

```
set my_int to 9945
log my_int
set my_srt to "Hamza"
log my_srt 
set my_array ["Apple","Mango","Banana","Gava"]
log my_array
set my_obj to {"Ali"} as string
log my_obj 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-28T17:31:54.147

```
do shell script "echo '" & (current date) & ": Found " & Thisfilename & "' >> ~/logs/MyGreatAppleScript.log" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-03T00:01:09.000

类似于`toString()`...

```
on TextOf(aVariable)
    try
        return "" & aVariable
    on error errm
        if errm begins with "Can’t make " ¬
       and errm ends with " into type Unicode text." then ¬
            return text 12 through -25 of errm
        return "item of class " & (class of aVariable) & return & errm
    end try
end TextOf 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-22T06:14:23.020

了解您的价值观的最简单方法-

```
display dialog "my variable: " & myVariableName 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-20T04:27:33.263

对于运行时间较长且我不看屏幕的脚本，我喜欢让 applescript 大声说出它在做什么。

IE。

```
say “This is a log statement.” 
```

如果在一个tell语句中：

```
tell me to say “This is a log statement.” 
```

# c++ - 链接 boost 库时出现另一个“未定义的引用”错误

> ID：13653361
> 
> 赞同：14
> 
> 时间：2012-11-30T21:21:27.773
> 
> 标签：c++, boost, undefined-reference

我看过其他几个处理这个完全相同的问题的帖子。但是，他们的解决方案似乎都不适合我。我正在编译以下代码：

```
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>
#include <boost/timer/timer.hpp>

using namespace boost::numeric::ublas;

int main(){    
   matrix<double> mat1 (3,3);
   matrix<double> mat2 (3,3);
   matrix<double> mat3 (3,3);

   unsigned k=0;

   for(unsigned i = 0; i < mat1.size1(); ++i){
      for(unsigned j = 0; j < mat1.size2(); ++j){
         mat1(i,j) = k;
         mat2(i,j) = 2*k++;
      }   
   }   

   k=0;
   if(1){
      boost::timer::auto_cpu_timer t;
      while(k<1000){
         mat3 = prod(mat1,mat2);
         k++;
      }   
   }   
   return 0;
} 
```

我正在使用以下命令行进行编译：

> $ g++ matrix_test.cpp -o matrix_test -lboost_system -lboost_timer

并收到以下错误：

> usr/lib/gcc/i686-redhat-linux/4.7.0/../../../libboost_timer.so：未定义引用`boost::chrono::steady_clock::now()'
> collect2：错误： ld 返回 1 个退出状态

如果我在编译时添加 -lboost_chrono，我会收到以下错误：

> /usr/lib/gcc/i686-redhat-linux/4.7.0/../../../libboost_chrono.so：未定义对“clock_gettime”
> collect2的引用：错误：ld返回1退出状态

我可以将clock_gettime 追踪到sys/time.h。不幸的是，我找不到相应的 .so 文件来链接。我在这里想念什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T21:26:39.337

您必须添加`-lrt`到您的链接库

```
g++ matrix_test.cpp -o matrix_test -lboost_system -lboost_timer -lboost_chrono -lrt 
```

* * *

更新 (2016-08-31)

这似乎仍然是一个问题。当您查找时`man clock_gettime`，这会导致解决方案（`-lrt`），但它也说

> 与 -lrt 链接（仅适用于 2.17 之前的 glibc 版本）。

因此，当您的 glibc 较新时，您的问题可能是其他问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-30T21:26:14.020

添加`-lrt`到您的 g++ 调用中 -`clock_gettime`在`librt.so`.

# ms-access - 防止在 MS Access vba 导入中截断前导零

> ID：13653362
> 
> 赞同：0
> 
> 时间：2012-11-30T21:21:30.677
> 
> 标签：ms-access, vba, ms-access-2010

我使用下面的代码将 CSV 文件从本地文件夹导入到 Access 中的表中。但是，我注意到前导零丢失/被截断。

不知道为什么，因为我的印象是 Access 没有切断零。

我尝试用零填充但不工作。我认为在导入访问期间前导零被截断，因为这是通过代码发生的，不知道如何阻止它。

希望这里的专业人士可以看看：

```
Option Compare Database
Option Explicit

Sub ImportFileProcedure()
Dim strPathFile As String, strFile As String, strPath As String
Dim strTable As String
Dim xlApp As Object, xlWb As Object, xlWs As Object
Dim lngRow As Long, lngLastRow As Long
Dim rst As DAO.Recordset
strPath = "C:\FOLDER\"
strTable = "TEMP_TBL"
strFile = Dir(strPath & "*.csv")
Set rst = CurrentDb.OpenRecordset(strTable)
Do While Len(strFile) > 0
      strPathFile = strPath & strFile
        Set xlApp = CreateObject("Excel.Application")
        Set xlWb = xlApp.Workbooks.Open(strPathFile)
        Set xlWs = xlWb.Worksheets(1)
        lngLastRow = xlWs.UsedRange.Rows.Count
        For lngRow = 2 To lngLastRow
            rst.AddNew
            rst("SAMPLE") = xlWs.Range("A" & lngRow).Value
            rst("SAMPLE") = xlWs.Range("B" & lngRow).Value
            rst("SAMPLE") = xlWs.Range("C" & lngRow).Value
            rst("SAMPLE") = xlWs.Range("D" & lngRow).Value
            rst("SAMPLE") = xlWs.Range("E" & lngRow).Value
            rst.Update
        Next
    xlApp.Quit
    Set xlApp = Nothing
    Set xlWb = Nothing
    Set xlWs = Nothing
    strFile = Dir()
Loop
rst.Close
Set rst = Nothing
End Sub 
```

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:32:36.010

我决定简单地创建一个 UPDATE 查询来添加/填充前导零，在数据加载到表中之后运行 UPDATE。这是我能做的最好的事情，而不是修改上面的代码：

这是 UPDATE 查询的 SQL：

```
x = left(yourfield & string(8,"0"), 8)

x = right(string(8,"0")& yourfield, 8)

or...

padlen = 8

x = left(yourfield & string(padlen,"0"), padlen)

x = right(string(padlen,"0")& yourfield, padlen) 
```

感谢大家！

# closures - dojox.gfx - 维护事件连接的 gfx 引用

> ID：13653363
> 
> 赞同：2
> 
> 时间：2012-11-30T21:21:30.767
> 
> 标签：closures, dojo, gfx

我有一个简单的程序，我在其中获取一个 svg 文件，然后从 svg 中的 rect 元素创建 gfx 形状，如下所示

```
function superCallback(shape){ 

  shape.setFill("red"); 

  } 

  dojo.ready(function() { 

                    // Load image 
                    dojo.xhrGet({ 
                            //handleAs: 'xml', 
                            url: 'svg/demo.svg', 
                            load: function(data) { 

                                    // Create the surface 
                                    var surface = dojox.gfx.createSurface("logoHolder", 2000, 1500); 

                                    var group = surface.createGroup(); 

                                    var dom = dojox.xml.parser.parse(data); 

                                    rects = dom.getElementsByTagName("rect"); 

                                    for (var idx = 0 ; idx < rects.length ; idx++) { 

                                            //alert('Coordinates ' + rects[idx].getAttribute("x") + ', ' + rects[idx].getAttribute("y")); 

                                            var rectangle = group.createRect({ x: parseFloat(rects[idx].getAttribute("x")), 
                                                                                                                     y: parseFloat(rects[idx].getAttribute("y")), 
                                                                                                                     width: parseFloat(rects[idx].getAttribute("width")), 
                                                                                                                     height: parseFloat(rects[idx].getAttribute("height")) }) 
                                                                                                                     .setStroke({ style: "Solid" , width: "7" , color :"black"}); 

                                              rectangle.connect("onclick",dojo.hitch(rectangle,function(e) { 
 superCallback(rectangle); 
                                                                                                                              })); 

} 

}); 
}); 
```

可以看出，我使用局部变量 rectangle 来创建和存储 gfx 形状，然后调用 connect 以将事件附加到它。

问题是该事件仅附加到在 for 循环中创建的最后一个 gfx rect，因为我猜闭包总是在最后一个矩形引用的上下文中执行。

需要一些帮助来解决这个问题，以便事件可以触发所有矩形

提前致谢

问候希亚姆

# ios - 动画 CAEmitterLayer 的emitterPosition

> ID：13653367
> 
> 赞同：2
> 
> 时间：2012-11-30T21:21:48.473
> 
> 标签：ios, cabasicanimation, caemitterlayer

我正在尝试像这样为 a 制作`CAEmitterLayer`动画`emitterPosition`：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"emitterPosition.x"] ;
animation.toValue = (id) toValue ;
animation.removedOnCompletion = NO ;
animation.duration = self.translationDuration ;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut] ;
animation.completion = ^(BOOL finished)
    {
    [self animateToOtherSide] ;
    } ;
[_emitterLayer addAnimation:animation forKey:@"emitterPosition"] ;
CGPoint newEmitterPosition = CGPointMake(toValue.floatValue, self.bounds.size.height/2.0) ;
_emitterLayer.emitterPosition = newEmitterPosition ; 
```

请注意，它`animation.completion`是在仅调用相应`CAAnimation`委托方法的类别中声明的。

问题是它根本没有动画，而是将发射器显示在其最终位置。我的印象是，一旦将动画添加到图层，就应该将其后面的实际模型更改为其最终位置，以便在动画完成时模型处于其最终状态；即，防止动画“弹回”到其原始位置。

我尝试将最后两行放在`animation.completion`块中，这确实像预期的那样动画。但是，当动画结束时，一些粒子会间歇性地在发射器的原始位置发射。如果您将系统置于负载下（例如，在播放动画时滚动 tableview），这种情况会更频繁地发生。

我正在考虑的另一个解决方案是根本不移动`emitterPosition`，而只是移动`CAEmitterLayer`本身，尽管我还没有尝试过。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:41:22.453

也许`emitterPosition.x`不是动画的有效关键路径。尝试`emitterPosition`改用（因此您必须提供封装在 NSValue 中的 CGPoint 值）。

我只是在我自己的机器上试过这个，它工作正常：

```
CABasicAnimation* ba = [CABasicAnimation animationWithKeyPath:@"emitterPosition"];
ba.fromValue = [NSValue valueWithCGPoint:CGPointMake(30,100)];
ba.toValue = [NSValue valueWithCGPoint:CGPointMake(200,100)];
ba.duration = 6;
ba.autoreverses = YES;
ba.repeatCount = HUGE_VALF;
[emit addAnimation:ba forKey:nil]; 
```

其他需要考虑的事情：

*   您通常可以使用 nil 作为 中的键`addAnimation:forKey:`，除非您以后需要找到此动画（例如，删除它或以某种方式覆盖它）。关键路径很重要。

*   设置`removedOnCompletion`为 NO 几乎总是错误的，并且通常是无赖的最后避难所（即由于不了解动画的工作原理）。

*   如果，正如你所说，`_emitterLayer.emitterPosition = newEmitterPosition`在完成块内设置动画，那么你为什么要使用 CABasicAnimation 呢？为什么不直接调用 UIView`animate...`并在动画块中设置emitterPosition？如果可行，它将用一块石头杀死两只鸟，移动位置并对其进行动画处理。

# sql-server - NHibernate Transactions：批次的 INSERT-UPDATE_DELETE 订单是否记录在某处？

> ID：13653369
> 
> 赞同：1
> 
> 时间：2012-11-30T21:21:55.643
> 
> 标签：sql-server, sql-server-2008, nhibernate, batch-file, transactions

前言：这个问题是[这个答案](https://stackoverflow.com/a/12616962/109941)的派生词，专门谈论`NHibernate`而不是`Hibernate`。

> 至于 Hibernate，org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(EventSource) 的 javadoc 说：
> 
> 以特殊顺序执行所有 SQL 和二级缓存更新，以免违反外键约束：
> 
> 1.  插入，按执行顺序
> 2.  更新集合元素的删除
> 3.  集合元素的插入
> 4.  删除，按执行顺序

我的问题：

1.  如果它适用于 Hibernate，那么这个命令是否也适用于 NHibernate？
2.  这个确定性的顺序是否记录在某处？

另外 - 如果这种行为是特定于 DBMS 的，我正在使用 SQL Server。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:28:25.367

[NHibernate 3.3](http://nhforge.org/doc/nh/en/index.html)的文档详细描述了调用 Session.Flush 时的步骤（第 9.6 点）。在`session.FlushMode = FlushMode.Commit;`这种情况下，事务批处理将如何执行：

*   [http://nhibernate.info/doc/nhibernate-reference/manipulatingdata.html#manipulatingdata-flushing](http://nhibernate.info/doc/nhibernate-reference/manipulatingdata.html#manipulatingdata-flushing)

步骤是：

*   所有实体插入，以相同的顺序使用 ISession.Save() 保存相应的对象

*   所有实体更新

*   所有集合删除

*   所有集合元素的删除、更新和插入

*   所有集合插入

*   所有实体删除，以相同的顺序使用 ISession.Delete() 删除相应的对象

我主要使用 SQL Server (2008) 并且可以说这是这样工作的..

# c++ - 有趣的问题运算符重载

> ID：13653370
> 
> 赞同：1
> 
> 时间：2012-11-30T21:22:01.150
> 
> 标签：c++, overloading, operator-keyword

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)
> [导致 C++ 编译器错误的原因：必须具有类或枚举类型的参数？](https://stackoverflow.com/questions/7493932/what-causes-c-compiler-error-must-have-argument-of-class-or-enumerated-type)

我正在尝试在 C++ 中使用运算符重载和泛型，当我尝试编译时似乎有 3 个小错误。使用模板 D 有一个名为 Grandeur 的类，然后我从这个类继承了 3 个类，名为`Temps(time)`, `Longueur(size)`, `Vitesse(speed)`, 我试图重载运算符，例如当我这样做时`Temps+Temps->Temps, Vitesse+Vitesse=Vitesse,Longueur+Longueur->Longueur, Longueur/Time->Vitess`等。为了不为相同类型的操作，我使用模板来利用通用性。但是当我尝试编译时出现错误。这是我的代码：

```
typedef double Longueur;
typedef double Temps;
typedef double Vitesse;

template<typename D>
class Grandeur {
  protected :
    double val; const char* unite;

  public :
    Grandeur(double qqc) : val(qqc) {}
    Grandeur(int qqc) : val(qqc) {}
    Grandeur(long qqc) : val(qqc) {}
    Grandeur(float qqc) : val(qqc) {}

    inline friend D operator+ (const D a, const D b) {
      return D (a.val + b.val);
    }

    inline friend D operator- (const D a, const D b) {
      return D (a.val - b.val);
    }

    inline friend double operator* (const D a, const D b) {
      return a.val * b.val;
    }

    inline friend double operator/ (const D a, const D b) {
      return a.val / b.val;
    }

    inline friend D operator* (D a, const int b) {
      return D (a.val * b);
    }

    inline friend D operator/ (const D a, const int b) {
      return D (a.val / b);
    }

    inline friend ostream& operator<< (ostream& os, D d) {
      return os << d.val << d.u;
    }

    class Temps : public Grandeur<Temps> {
    public:

  };

  class Vitesse : public Grandeur<Vitesse> {
    public:

  };

  class Longueur : public Grandeur<Longueur> {
    public:

  };

};

inline Longueur operator* (const Vitesse v, const Temps t) {
  return Longueur(v.val * t.val);
}

inline Vitesse operator/ (const Longueur l, const Temps t) {
  return Vitesse(l.val / t.val);
}

inline Temps operator/ (const Longueur l, const Vitesse v) {
  return Temps(l.val / v.val);
} 
```

当我尝试编译时，它说：

> `g++ essai.cc`
> `In file included from essai.cc:4:0:`
> `grandeurs.h:70:58: error: ‘Longueur operator*(Vitesse, Temps)’ must have an argument of class or enumerated type`
> `grandeurs.h:74:58: error: ‘Vitesse operator/(Longueur, Temps)’ must have an argument of class or enumerated type`
> `grandeurs.h:78:58: error: ‘Temps operator/(Longueur, Vitesse)’ must have an argument of class or enumerated type`

第 70、74 和 78 行是具有最后 3 个函数（内联）的行。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:35:01.097

您在全局范围内声明运算符，因此`Vitesse`编译器无法使用类型等。为什么不将子类移到`Grandeur<T>`的定义之外？

编辑评论：您正在尝试使用具有双精度值的运算符，但您的子类*不会*自动继承隐式转换。您需要在每个孩子中定义它们并将参数传递给父模板类。

# java - MySQL - 必须被捕获或声明被抛出

> ID：13653375
> 
> 赞同：0
> 
> 时间：2012-11-30T21:22:22.660
> 
> 标签：java, mysql, sql

我已经尽我所能从各种帖子中建立了这个课程。

我正在尝试从 MySQL 数据库中获取用户名列表。

这是检索它们的方法：

```
public ArrayList<String> LoadUsers() throws SQLException {
    ArrayList<String> players = new ArrayList<String>();
    try {
        Connection conn = null;
        ResultSet rs = null;

        try {
            conn = getConnection();
            Statement s = conn.createStatement ();
            s.executeQuery ("SELECT * FROM NFT_users");
            rs = s.getResultSet ();

            while(rs.next ()){
                players.add(rs.getString("name"));
            }
            rs.close ();
            s.close ();
        }

        catch (SQLException ex) { 
            System.out.println(ex.toString()); 
        }

        finally { 
            try { 
                if (conn != null) conn.close(); 
            } 

            catch (SQLException ex) { 
                System.out.println("On close: " + ex.toString()); 
            } 
        }
    } 

    catch(Exception ex) { 
        //trace(ex); 
    }

    return players;
} 
```

这是我的主类中的代码，它从方法中检索它：

```
 ArrayList<String> players = database.LoadUsers(); 
```

但是，我得到错误*必须被捕获或声明被抛出*。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:24:02.237

你的方法： -

```
public ArrayList<String> LoadUsers() throws SQLException { 
```

`SQLException`在它的 throws 子句中声明了一个。因此，无论从哪个方法调用此方法，您都需要将 括`invocation`在一个`try-catch`块中以处理此异常，或者也在该方法的 throws 子句中声明此异常。

因此，假设您从 method 调用您的方法`caller()`。

**所以，你有两个选择： -**

1.  `throws`在以下子句中声明例外`caller`：-

    ```
    public void caller() throws SQLException {
         ArrayList<String> players = database.LoadUsers();
    } 
    ```

2.  将方法调用包含在 try-catch 中。在这种情况下，请记住首先声明您的`list`外部块：

    ```
    public void caller() {
         ArrayList<String> players = null;
         try {
              players = database.LoadUsers();
         } catch (SQLException e) {
              e.printStackTrace();
         }
    } 
    ```

**请注意**，如果您使用第一个选项，那么您将再次在调用`caller`. 你也必须遵循这件事。

通常，方法内部引发的异常 - 要么使用 try-catch 块在那里处理，要么沿着堆栈跟踪传播到直接调用者方法，**但不能同时使用两者**。你正在用你的方法做这两件事。您正在处理异常，并已声明它也将在`throws`子句中抛出。你不应该那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:27:00.837

尝试这个

```
try{
   ArrayList<String> players = database.LoadUsers();
}catch(SQLException e){e.printStackTrace();} 
```

这是因为您的 loadUsers 方法正在引发异常。所以，无论你在哪里调用这个方法，你都需要用 try catch 包围它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:53:34.263

正如我在之前的评论中提到的，声明 LoadUsers 方法抛出异常，然后再不抛出它不是一个好主意。这引发了调用者应该准备好处理异常的期望，实际上，编译器将要求调用者用 try/catch 块包围调用，或者声明它抛出异常。

所以，有（至少）三个选项。首先是让 LoadUsers 方法实际抛出异常，如下所示：

```
public ArrayList<String> LoadUsers() throws SQLException {
    ArrayList<String> players = new ArrayList<String>();
    try {
        Connection conn = null;
        ResultSet rs = null;

        try {
            conn = getConnection();
            Statement s = conn.createStatement ();
            s.executeQuery ("SELECT * FROM NFT_users");
            rs = s.getResultSet ();

            while(rs.next ()){
                players.add(rs.getString("name"));
            }
            rs.close ();
            s.close ();
        } finally { 
            try { 
                if (conn != null) conn.close(); 
            } catch (SQLException ex) { 
                // eat the exception - we can't do anything about it here 
            } 
        }
    } 

    return players;
} 
```

在来电者中：

```
public void processPlayers() {
   try{
       ArrayList<String> players = database.LoadUsers();
      // do something with the players

   } catch(SQLException ex){

     ex.printStackTrace();
  }
} 
```

第二个选项使用相同的 LoadUsers() 方法，但也不会在调用者中捕获异常 - 它将异常传递给*调用*者：

```
public void processPlayers() throws SQLException {
      ArrayList<String> players = database.LoadUsers();
      // do something with the players
} 
```

第三个选项是在 LoadUsers 方法中而不是在调用者中捕获异常。这里的问题是调用者不会知道有问题 - 它只会得到一个空列表：

```
public ArrayList<String> LoadUsers() throws SQLException {
    ArrayList<String> players = new ArrayList<String>();
    try {
        Connection conn = null;
        ResultSet rs = null;

        try {
            conn = getConnection();
            Statement s = conn.createStatement ();
            s.executeQuery ("SELECT * FROM NFT_users");
            rs = s.getResultSet ();

            while(rs.next ()){
                players.add(rs.getString("name"));
            }
            rs.close ();
            s.close ();
        } catch(SQLException ex) {
            ex.printStackTrace(); // but the caller won't know...
        }
          finally { 
            try { 
                if (conn != null) conn.close(); 
            } catch (SQLException ex) { 
                // eat the exception - we can't do anything about it here 
            } 
        }
    } 

    return players;
} 
```

和

```
public void processPlayers() throws SQLException {
      ArrayList<String> players = database.LoadUsers(); // an empty list if something went wrong
      // do something with the players
} 
```

不推荐使用最后一个选项。

# facebook - 让朋友参加活动

> ID：13653377
> 
> 赞同：1
> 
> 时间：2012-11-30T21:22:36.367
> 
> 标签：facebook, facebook-graph-api

我在文档和网络上进行了搜索，但没有找到任何关于此的内容。

因此，当您访问 Facebook 上的活动页面时，参加活动的人员列表似乎是按顺序排列的，将您的朋友放在首位。我想这样做，但我不知道怎么做。

如果我做：

```
https://graph.facebook.com/<event_id>/attending 
```

我得到了所有参加的人，似乎是按该人单击“参加”时的顺序排列的。

如果我做：

```
 https://graph.facebook.com/<event_id>/attending/<user_id>/friends 
```

我得到用户的所有朋友，无论他们是否参加活动。

我使用 Graph API Explorer (https://developers.facebook.com/tools/explorer) 尝试了很多连接，比如获取用户的朋友，然后尝试将他们与该事件匹配，但找不到解决方案。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:09:31.403

在这种情况下最好使用 FQL。更适合这种类型的嵌套问题。

```
select uid, rsvp_status from event_member where eid = <EVENT_ID> and uid IN (SELECT uid2 from friend where uid1 = me()) 
```

这将返回参加您指定的活动的登录人的所有朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-12T09:52:14.720

接受的答案不再起作用，因为 facebook 不再允许没有活动管理员访问密钥之一的活动参与者请求[（请参阅 Graph api 参考）](https://developers.facebook.com/docs/graph-api/reference/event/attending/)。由于他们还出于隐私原因[删除了](https://stackoverflow.com/questions/24640306/what-is-the-replacement-for-friends-events-permission-in-fb-graph-api-v2-0)访问朋友活动的选项，因此目前无法仅通过 Graph API 执行此操作

# python - PocketSphinx python 和设置声学模型？

> ID：13653379
> 
> 赞同：5
> 
> 时间：2012-11-30T21:22:48.523
> 
> 标签：python, speech-recognition, cmusphinx

我正在阅读这个关于[语音识别](http://cmusphinx.sourceforge.net/wiki/tutorialconcepts)的指南，它提到我需要三个语音识别项目：声学模型、语言模型、语音词典。

我想开始玩这个[python 演示](http://cmusphinx.sourceforge.net/wiki/gstreamer)，它使用 Gstreamer 从麦克风捕获并重新采样为 8kHz、16 位 PCM 音频。

我看到我可以指定语言模型和拼音词典，我使用的是[由cmu提供]：

```
http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/US%20English%20HUB4%20Language%20Model/ 
```

但我很困惑我应该在哪里指定声学模型？gstreamer 是否有我隐含使用的自己的声学模型？我希望使用此处提供的声学模型获得更好的结果：

```
 http://sourceforge.net/projects/cmusphinx/files/Acoustic%20and%20Language%20Models/US%20English%20HUB4%20Acoustic%20Model/ 
```

（对不起超链接。我不能发布超过 2 个代表小于 10 的链接）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:26:42.973

> 但我很困惑我应该在哪里指定声学模型？

您可以使用 gstreamer 元素的 hmm 属性指定模型。就像教程中介绍的一样

```
asr.set_property('lm', '/home/user/mylanguagemodel.lm') 
```

您可以使用

```
asr.set_property('hmm', '/home/user/acoustic_model_folder') 
```

> gstreamer 是否有我隐含使用的自己的声学模型？

是的，默认情况下它使用发行版中的美国英语模型 hub4wsj_sc_8k

# css - 通过 jQuery slideToggle 扩展相邻 div 时，div 不移动

> ID：13653392
> 
> 赞同：0
> 
> 时间：2012-11-30T21:23:40.740
> 
> 标签：css, html, slidetoggle

当我的 slideToggle div 展开时，内容会覆盖它下面的 div (.fragHeader) 而不是向下推。我为扩展的 div (.fragListMoreText) 添加了一个巨大的 200px 底部边距（为了好玩），并且 .fragHeader 保持在原位，而它下方的 div (.fragNav) 被适当移动。这是相关页面的链接（我已经消除了 200 像素的边距）：

[http://mentalwarddesign.net/Andrea/Fragrances/baked.html](http://mentalwarddesign.net/Andrea/Fragrances/baked.html)

jQuery 工作正常，所以我不会包含该代码，但这里是相关的 CSS：

```
.fragListShowHide {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 11px;
    line-height: 18px;
    font-weight: normal;
    color: #009b7b;
    width: 520px;
    height: 72px;
    padding-left: 10px;
    padding-right: 10px;
    background-color: #ffffff;
}
.fragListMoreText  {
    width: 520px;
    display: none;
    margin-left: -10px;
    padding-left: 10px;
    padding-right: 10px;
    background-color: #ffffff;
}
.changeTextButtonFrag  {
    display: block;
    cursor: pointer;
    float: right;
    margin-right: -10px;
}

.fragHeader {
    background-color: #FFF;
    width: 528px;
    padding-top: 10px;
    padding-right: 5px;
    padding-left: 10px;
    margin-top: 30px;
    padding-bottom: 5px;
}
.fragNav {
    height: 116px;
    width: 543px;
    background-image: url(../Fragrances/imgFrag/navFragrance.jpg);
    -webkit-border-bottom-right-radius: 8px;
    -moz-border-radius-bottomright: 8px;
    -o-border-bottom-right-radius: 8px;
    border-bottom-right-radius: 8px;
    overflow: hidden;
    float: left;
    background-repeat: no-repeat;
    margin-bottom: 10px;
} 
```

这是受影响区域的 html：

```
 <div class="fragListShowHide" id="baked">ANGEL FOOD CAKE | APPLE CRISP | APPLE PIE | BAKED BREAD | BANANA CREAM PIE | BANANA NUT BREAD | BLUEBERRY CHEESECAKE | BLUEBERRY MUFFIN | BLUEBERRY PIE | CARROT CAKE | CHERRY COBBLER | CINNAMON BUNS | CINNAMON TOAST | COOKIE | DONUT | FUDGE BROWNIE | GINGERBREAD | GINGERSNAP | GRAHAM CRACKERS | KEY 
      <div class="fragListMoreText">LIME PIE | LEMON MERINGUE | NUT BREAD | NUT CAKE | PEACH COBBLER | PINEAPPLE UPSIDE DOWN CAKE | PLUM PUDDING | PUMPKIN PIE | SEX ON THE BEACH | SNICKER DOODLE | STRAWBERRY | CHEESECAKE | SUGAR COOKIE | VANILLA WAFER | WEDDING CAKE
       <!-- end .fragListMoreText --></div>
      <img src="../imgGlobal/more-button.png" width="51" height="16" class="changeTextButtonFrag" alt="textButton">
      <!-- end .fragListShowHide --></div>
   <div class="fragHeader">
        <h2>OUR FRAGRANCE CATEGORIES</h2>
        <p>Andrea Aromatics' custom fragrance categories are designed around familiar olfactory themes. With hundreds of individual fragrances overall, we cover practically every scent under the sun.</p>
      <!-- end .fragHeader --></div>
    <div class="fragNav" style="left: 101px; top: 265px;">
      <div class="fragNavRow1"><ul class="frag">
      <li class="chosenSub"><a href="../Fragrances/baked.html">Baked Goods</a></li>
      <li><a href="../Fragrances/floral.html">Florals</a></li>
      <li><a href="../Fragrances/nuts.html">Nuts</a></li>
      </ul>
      <!-- end .fragNavRow1 --></div>
      <div class="fragNavRow2"><ul class="frag">
      <li><a href="../Fragrances/beverage.html">Beverage</a></li>
      <li><a href="../Fragrances/fruit.html">Fruits</a></li>
      <li><a href="../Fragrances/outdoor.html">Outdoor</a></li>
      </ul>
      <!-- end .fragNavRow2 --></div>
      <div class="fragNavRow3"><ul class="frag">
      <li><a href="../Fragrances/designer.html">Designer</a></li>
      <li><a href="../Fragrances/holiday.html">Holiday</a></li>
      <li><a href="../Fragrances/spiceherb.html">Spice & Herb</a></li>
      </ul>
      <!-- end .fragNavRow3 --></div>
      <div class="fragNavRow4"><ul class="frag">
      <li><a href="../Fragrances/exotic.html">Exotic</a></li>
      <li><a href="../Fragrances/novelty.html">Novelty</a></li>
      <li><a href="../Fragrances/trees.html">Trees</a></li>
      </ul>
      <!-- end .fragNavRow3 --></div>
      <!-- end .fragNav --></div> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:41:49.207

不确定，但尝试改变

```
.fragListShowHide {
   ....
   height: auto;
} 
```

我想，这应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:54:15.713

您已经硬编码了父元素的高度 (fragListShowHide)，因此即使显示了嵌套元素，父容器 div 的高度仍然是 72，这意味着不会移动以容纳更大的内容。

从 fragListShowHide 中删除绝对高度或将 fragListMoreText 移到外面。

如果您使用 firebug，您可以清楚地看到发生了什么，并查看 div 大小。

# php - 在 Doctrine 中的实体子类上加入关系

> ID：13653394
> 
> 赞同：2
> 
> 时间：2012-11-30T21:23:58.197
> 
> 标签：php, mysql, symfony, doctrine, dql

我有两个实体共享一个抽象类，创建类表继承。我可以使用抽象类的存储库查询实体，并获取扩展抽象类的所有实体作为结果。

```
$qb = $this->createQueryBuilder('c')
    ->where('c.featured = true')
    ->orderBy('c.sticky', 'DESC')
    ->addOrderBy('c.weight', 'ASC')
    ->setFirstResult($offset)
    ->setMaxResults($limit);

// Returns 8 results, results in 34 queries 
```

子类包含与其他实体的多对多关系，因此如果我以这种方式查询，这些关系会导致额外的查询，因为它们没有被连接。如何查询扩展抽象类的实体并加入它们的列？我尝试使用左连接添加多个 from 语句，但查询返回的结果少于预期的 8 个结果。该查询生成器看起来像这样：

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb->select(array(
    'a', 'artist', 'country', 
    't', 'artwork', 'user'))
   ->from('AcmeArtworkBundle:Artwork', 'a')
   ->from('AcmeTourBundle:Tour', 't')
   ->leftJoin('a.artist', 'artist')
   ->leftJoin('a.country', 'country')
   ->leftJoin('t.artwork', 'artwork')
   ->leftJoin('t.user', 'user')
   ->where('a.featured = true')
   ->andWhere('t.featured = true')
   ->orderBy('a.sticky', 'DESC')
   ->addOrderBy('t.sticky', 'DESC')
   ->addOrderBy('a.weight', 'ASC')
   ->addOrderBy('t.weight', 'ASC')
   ->setFirstResult($offset)
   ->setMaxResults($limit);

// 5 results :-( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:19:00.950

您可以使用[fetch join](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#joins)和 Doctrine ORM 的[Paginator](https://github.com/doctrine/doctrine2/blob/8a29d91d1550eca3ac7677a34a661e708cf553f4/lib/Doctrine/ORM/Tools/Pagination/Paginator.php)，如[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html)中所述：

```
$qb = $em->createQueryBuilder()
    ->select('c', 'd')
    ->from('MyInheritanceClass', 'c')
    ->join('c.d', 'd')
    ->where('c.featured = true')
    ->orderBy('c.sticky', 'DESC')
    ->addOrderBy('c.weight', 'ASC')
    ->setFirstResult($offset)
    ->setMaxResults($limit);

$paginator = new \Doctrine\ORM\Tools\Pagination($qb);

var_dump(count($paginator)); // 8 results, 2 queries 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:20:44.923

根据@Ocramius 提供的链接提供的信息，默认情况下，Doctrine 使用延迟加载加载实体。仅在需要时才获取关联。您可以通过将获取模式设置为 EAGER 来告诉 Doctrine 自动获取关联。

```
/**
 * @var string $date
 *
 * @ORM\ManyToOne(targetEntity="Date", inversedBy="artwork", cascade={"persist"}, fetch="EAGER")
 * @ORM\JoinColumn(name="date", referencedColumnName="id")
 */
private $date; 
```

请务必注意，如果您不小心，实际上可能会导致运行更多查询。

# ruby-on-rails - “识别”命令无法识别照片

> ID：13653402
> 
> 赞同：1
> 
> 时间：2012-11-30T21:24:26.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, imagemagick, paperclip, development-environment

> **可能重复：**
> [回形针错误](https://stackoverflow.com/questions/1533351/paperclip-error)

我已经安装了 ImageMagick。如果我尝试在命令行上使用它，它可以工作。我可以使用识别。它位于`/usr/bin`。在我的`development.rb`我做

```
Paperclip.options[:command_path] = '/usr/bin/' 
```

它仍然行不通。我不断收到此错误。

```
Command :: identify -format %wx%h :file
[paperclip] An error was received while processing: #<Paperclip::NotIdentifiedByImageMagickError: /tmp/stream20121130-6368-1c4xwb9-0.jpg is not recognized by the 'identify' command.> 
```

我不知道如何使这项工作。我已经尝试了一切。我也尝试将其添加到我的`config/initializers/paperclip.rb`，但它没有用

```
require 'paperclip'

if RAILS_ENV == "development"
 Paperclip.options[:command_path] = '/usr/bin/'
end 
```

# split - Biztalk 拆分出站平面文件限制最大记录

> ID：13653406
> 
> 赞同：1
> 
> 时间：2012-11-30T21:24:51.727
> 
> 标签：split, biztalk, send

我正在使用 BizTalk 将 xml 转换为平面文件。

平面文件中可以包含的记录数量有限制。当超过这个限制时，我需要生成一个包含剩余记录的第二个（或第三个或第四个）平面文件，并且每个文件永远不会超过该最大值。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:11:53.340

你需要的是[这个](http://geekswithblogs.net/arnoudlems/archive/2006/02/15/69521.aspx)。这里的想法是：

1.  **您在编排中对信封模式进行分批（通过执行接收管道），从而使用Microsoft.XLANGs.Pipeline.XLANGPipelineManager.ExecuteReceivePipeline**控制分批的单个消息
***   **使用Microsoft.XLANGs.Pipeline.SendPipelineInputMessages**将分批的单个消息（需要多少个）添加到发送管道输入消息***   最后，您使用**Microsoft.XLANGs.Pipeline.XLANGPipelineManager.ExecuteSendPipeline**在编排中执行您的 sendpipeline ，并将您的 SendPipelineInputMessages 和您的目标平面文件信封架构传递给它。****

 ****检查[此项](http://geekswithblogs.net/sthomas/archive/2005/06/16/44023.aspx)以更清楚地了解编排中的分批。****

# php - 使用元素文本解析 SimpleXML

> ID：13653408
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:08.933
> 
> 标签：php, xml, simplexml

我在解决 SimpleXML 语法时遇到了问题。

我正在尝试根据预定义的值 DELN 从较大的 xml 文档中回显一些信息：

```
$mytimes= simplexml_load_file('http://www.bart.gov/dev/eta/bart_eta.xml');

$freemont = $mytimes->station->abbr[DELN]->eta->destination[freemont]->estimate;
$millbrae = $mytimes->station->abbr[DELN]->eta->destination[millbrae]->estimate;
$richmond = $mytimes->station->abbr[DELN]->eta->destination[richmond]->estimate; 
```

我的 XML：

```
<station>
<name>El Cerrito del Norte</name>
   <abbr>DELN</abbr>
   <date>11/30/2012</date>
   <time>07:41:02 AM PST</time>
    <eta>
         <destination>Fremont</destination>
         <estimate>14 min, 29 min, 44 min</estimate>
    </eta>
    <eta>
          <destination>Millbrae</destination>
          <estimate>6 min, 21 min, 36 min</estimate>
    </eta>
    <eta>
          <destination>Richmond</destination>
          <estimate>4 min, 10 min, 17 min</estimate>
    </eta>
</station> 
```

如果我需要提供更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:51:19.607

首先 - 我想你没有定义 DELN 常量，可能你应该使用一个字符串（'DELN'）。弗里蒙特、米尔布雷和里奇蒙特也是如此。问题不仅在于 SimpleXML 语法，而且基本上是它对您要阅读的 XML 结构的误解（缩写与 eta 不直接路径，与目标和估计相同）。无论如何 - xpath 将在这里成为你的朋友：

```
$fremont = $mytimes->xpath('//station/eta/estimate[../../abbr/text()=\'DELN\' and ../destination/text()=\'Fremont\']');
$millbrae = $mytimes->xpath('//station/eta/estimate[../../abbr/text()=\'DELN\' and ../destination/text()=\'Millbrae\']');
$richmond = $mytimes->xpath('//station/eta/estimate[../../abbr/text()=\'DELN\' and ../destination/text()=\'Richmond\']'); 
```

那么你可以这样做：

```
foreach ($fremont as $value) echo $value; 
```

要不就

```
if (count($fremont) > 0) echo $fremont[0]; 
```

# mysql - 从 Phpymyadmin 恢复数据库

> ID：13653409
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:12.363
> 
> 标签：mysql, macos, phpmyadmin

我使用 Phpmyadmin 在 Mac 上本地测试我网站上的 Drupal 网站。

我最近不得不彻底重新安装我的 Mac。我有我的硬盘的完整备份，但我不确定在哪里找到备份中的数据库以及如何恢复它们。

Phpmyadmin 将数据库存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:30:34.810

/usr/local/mysql/数据

在这里试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:04:50.230

phpMyAdmin 不写入任何数据库文件。它是一个访问 MySQL 服务器的 php 客户端应用程序。

据我所知，在 OSX 上，MySQL 服务器在 /usr/local/mysql/data 中创建其数据文件。

**1\. 停止你的 MySQL 服务器**

```
sudo /usr/local/bin/mysql.server stop 
```

**2.删除新的数据文件**

sudo mv /usr/local/mysql/data /usr/local/mysql/data.new

**3.从备份中复制旧数据文件并修复prrmissions**

```
sudo chown -R _mysql:wheel /usr/local/mysql/data 
```

**4\. 再次启动你的服务器**

```
sudo /usr/local/bin/mysql.server start 
```

**5.检查和优化数据库**

```
sudo /usr/local/mysql/bin/mysqlcheck --all-databases 
```

现在 phpMyAdmin 将显示所有旧数据库

# java - Java 写出程序 Unhandled exception type IOException

> ID：13653411
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:14.240
> 
> 标签：java, methods, ioexception, throws

我的程序的这一部分出现了多个错误。它的基本作用是从一个无组织的文件 PersonnelInfo.txt 中读取输入，并将其排序到 EmployeeInfo 类中的一个数组中（未发布，因为我不相信问题出在该类中，如果你们愿意，我会贴出来供参考）。

在对信息（如姓名、身份证号、公司职务等）进行排序后，程序将其写入另一个文件 ORGANIZEDPersonnelInfo.txt，该文件将按如下方式排序：

姓名：此处为员工姓名

ID：这里的员工ID

等等

我遇到的一个错误是在“静态 FileWriter writeOut ...”行中，它是“未处理的异常类型 IOException。我在主方法声明中放置了一个 throws IOException，但它什么也没做。

接下来，在“public String toString()”方法中，我收到了多个错误。当我尝试使其无效时，它说返回类型与 Object.toString() 不兼容。当我将其保留为字符串并返回 null 时，它希望我使用 try/catch，但主要错误仍然存​​在。

请帮忙！这越来越令人沮丧...

```
import java.io.*;
import java.util.Scanner;

public class HR {

static EmployeeInfo[] employee = new EmployeeInfo[4];
static FileWriter writeOut = new FileWriter("/Users/zach/Documents/workspace/Dec. 10, 2012/src/ORAGNIZEDPersonnelInfo.txt");
static BufferedWriter out = new BufferedWriter(writeOut);

public static void main(String[] args) throws IOException {
    File PersonnelInfo = new File("/Users/zach/Documents/workspace/Dec. 10, 2012/src/PersonnelInfo.txt");
    Scanner inputFile = new Scanner(PersonnelInfo);

    int numOfEmployees = Integer.parseInt(inputFile.nextLine());
    System.out.println("Number of employees: " + numOfEmployees);

    for (int i = 0; i < 4; i++) {
        String name = inputFile.nextLine();
        String ID = inputFile.nextLine();
        String title= inputFile.nextLine();
        String startDate = inputFile.nextLine();
        employee[i] = new EmployeeInfo(name, ID, title, startDate);
    }

    listEmployeeInfo();
    employee.toString();

}

public String toString() {
    for (EmployeeInfo i: employee) {
        out.write("Name: " + i.getName());
        out.write("ID: " + i.getID());
        out.write("Title: " + i.getTitle());
        out.write("Start Date: " + i.getStartDate());
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:33:21.443

执行时`static void main`，您不在类的实例中，`HR`而是在它的静态方法中。所以如果你想使用`toString()`你写的方法，你必须这样做`new HR().toString()`

您最好从所有字段中删除 static 关键字并创建对象的实例`HR`，然后在该对象的构造函数中打开文件，即

```
public HR() {
  try {
    this.writeOut = new FileWriter("/Users/zach/Documents/workspace/Dec. 10, 2012/src/ORAGNIZEDPersonnelInfo.txt");
  } catch (IOException e) {
     // handle it, etc.
  }
}

public void processFile() {
  // Do the stuff
}

public static void main(String[] args) {
  HR myHR = new HR().processFile();
  // etc.
} 
```

这将允许您使用 toString() 方法并允许您以您想要的方式处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:33:40.450

其他人有地址 toString()，所以我会去 FileWriter...

我会填充`writeOut`一个方法而不是静态范围，这样你就可以捕获异常，甚至尝试不同的文件名或其他东西：

```
FileWriter openOutputfile(String name)
{
    boolean done = false;
    FileWriter result = null
    try {
        result = new FileWriter(...);
        done = true;
    }
    catch(IOException ex) {
        // print the stack trace
        // prompt for another filename
        // name = read line
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:31:24.697

更正了 toString()

```
public String toString() {
    StringBuffer buf = new StringBuffer();
    for (EmployeeInfo i: employee) {
        buf.append("Name: ").append(i.getName());
        buf.append("ID: ").append(i.getID());
        // ....
    }
    return buf.toString();
} 
```

主要打印内容：

```
HR hr = new HR();
out.write(hr.toString()); 
```

但我会使用自己的写方法“writeEmployees(out)”来写，请参阅海报 JB Nizet 的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T21:31:56.967

如果您覆盖`toString()`（正如您所做的那样，因为 toSTring() 是 Object 的一个方法，并且您正在您的类中重新定义它，它像所有类一样扩展 Object），您应该尊重被覆盖方法的约定，即是返回对象的字符串表示（而不是将字段写入缓冲写入器。用另一个名称命名此方法。

此外，您正在调用一个方法 ( `out.write()`)，该方法会抛出一个检查异常：IOException。所以，要么你知道如何处理这个异常，你应该捕获它，或者你不知道如何处理它，并且方法应该声明它抛出异常：

```
public void writeToOut() throws IOException {
    for (EmployeeInfo i: employee) {
        out.write("Name: " + i.getName());
        out.write("ID: " + i.getID());
        out.write("Title: " + i.getTitle());
        out.write("Start Date: " + i.getStartDate());
    }
} 
```

您的程序中还有其他编译错误。每个都带有一条错误消息、一个文件名和一个行号。尝试理解消息并修复错误。阅读[有关异常的 Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)以了解如何处理它们。

如果您在阅读本教程后仍然无法处理它们，请提出另一个问题并粘贴您从编译器获得的确切错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T21:32:42.313

我建议将 Writer 的静态声明移到 main 中，原因有两个（一个是它们不需要是静态属性，并且 IOException 正在那里处理）。从文件中获取字符串`toString`并使用 writer 将字符串写入文件：

```
 public class HR {

    static EmployeeInfo[] employee = new EmployeeInfo[4];

    public static void main(String[] args) throws IOException {
         FileWriter writeOut = 
                    new FileWriter("/Users/zach/Documents/workspace/"+
                                   "Dec. 10, 2012/src/ORAGNIZEDPersonnelInfo.txt");
         BufferedWriter out = new BufferedWriter(writeOut);

         File PersonnelInfo = new File("/Users/zach/Documents/workspace/"+
                                       "Dec. 10, 2012/src/PersonnelInfo.txt");
         Scanner inputFile = new Scanner(PersonnelInfo);

         ....
         //write employee string in the file
         out.write(getEmployeeString());
         out.close();
    }

    public String getEmployeeString() {
     StringBuilder stringBuilder = new StringBuilder();
     for (EmployeeInfo i: employee) {
          stringBuilder.append("Name: " + i.getName());
          stringBuilder.append("ID: " + i.getID());
          stringBuilder.append("Title: " + i.getTitle());
          stringBuilder.append("Start Date: " + i.getStartDate());
     }
     return stringBuilder.toString();
   }       
 } 
```

如果您必须将它们设为静态变量，则在静态块中进行初始化，异常处理如下：

```
 static FileWriter writeOut;
     static BufferedWriter out;

     static {
        try{
           writeOut = 
                    new FileWriter("/Users/zach/Documents/workspace/"+
                                   "Dec. 10, 2012/src/ORAGNIZEDPersonnelInfo.txt");
              out = new BufferedWriter(writeOut);
         }catch(IOException ioex){
               ioex.printStackTrace();
         }
     } 
```

# java - MRU 页面替换 Java

> ID：13653412
> 
> 赞同：2
> 
> 时间：2012-11-30T21:25:30.243
> 
> 标签：java

我应该通过这些数字的数组， 7 0 1 2 0 3 0 4 2 3 0 3 2 1 2 0 1 7 0 1 然后将第一个（非重复数字）放入一个较小的数组中只有5个数字。

所以在前五个进入之后，它看起来像 7 0 1 2 3 （因为 0 已经存在于数组中）。

然后它应该搜索并将较大数组的其余部分中的每个元素与较小数组中的每个元素进行比较。吨

较大数组中的下一个元素是 0，程序需要将 0 与较小数组中的所有元素进行比较。

如果元素存在于较小的数组中，则只需将 MRU 变量设置为等于存在于较小数组中的元素的索引。

如果该数字不存在，则在下一次运行后说 4。然后程序会将 MRU 变量处的元素替换为数字 4。

我有两个问题，

1.  这个程序只是向我吐出原始数字和 idk，为什么？
2.  我从这里去哪里？

我已经为此工作了很多天，经历了无数的变化。它已经过了截止日期，但我想学习如何做到这一点。

```
 import java.util.*;
   import java.io.*;

   public class MRUPageReplacement
   {
    public static void main(String [] args)
   {
  //======== Variables ==============================================
     ArrayList<Integer>MRUList = new ArrayList<Integer>();
     int [] frames = {7,0,1,2,3};
     int i,j,MRU;
     String line;

  //======== File Reader ============================================
     try
     {      
        FileReader reader = new FileReader("MRU.txt");      
        BufferedReader r = new BufferedReader(reader); 
        while ((line=r.readLine())!=null)
        {
           MRUList.add(Integer.parseInt(line));
        }
     }
        catch(Exception e)
        {
           System.out.println("File Not Found");
        } 

     int[] array = new int [MRUList.size()];
     for (i =0; i < MRUList.size(); i++)
     {
        array[i] =  MRUList.get(i);
     } 

  //======== Fill Arrays ============================================== 

  //======== Compare ==============================================       
     for(i=0; i<array.length; i++) 
        {     // Iterate through the array
        for( j=0; j<frames.length; j++) 
            {   // Iterate through frames
           if(array[i] == frames[j]) 
                {
            // if the element is in frames
            MRU = j;
           }
           else {
           // if the element is not in frames
            frames[MRU] = array[i];   

           }
        }
     }

  /*======== Print ==============================================
     for(i=0; i<frames.length; i++)
     {
        System.out.println("frames : " + frames[i]);
     }  
  */

  }
}

// Sample output
frames : 7
frames : 0
frames : 1
frames : 2
frames : 3
frames : 0
frames : 0
frames : 1
frames : 2
frames : 3
frames : 0
frames : 1
frames : 1
frames : 2
frames : 3
frames : 0
frames : 1
frames : 2
frames : 2
frames : 3
frames : 0
frames : 1
frames : 2
frames : 2
frames : 3
frames : 3
frames : 1
frames : 2
frames : 2 
```

附带说明一下，当我尝试打印出数组而不是仅给出数字时：[I@565b540e. 那是因为它正在打印索引吗？

最终我想在每次运行时打印出帧数组。喜欢：运行 1：帧 = {70123}。

编辑：好的，在 Noctua 的一些惊人帮助之后，我现在遇到了我之前遇到的主要问题。它只识别我无法分辨的第一次或第二次迭代，因为第二个数字应该是零。这是搞砸的部分：

```
for(i=0; i<array.length; i++) 
     {     // Iterate through Array 
        for( j=0; j<frames.length; j++) 
        {   // Iterate through Frames 
           if(array[i] == frames[j]) 
           {
            // Item from Array exists in Frames
              MRU = j;
              MRU_found = true;
           }
        }
        if(!MRU_found) 
            {
           frames[MRU] = array[i];
        } 
```

我从几个角度研究过它，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:39:32.700

```
for(i=0; i<array.length; i++) {        // Iterate through the array
    for( j=0; j<frames.length; j++) {  // Iterate through frames
       if(array[i] == frames[j]) { // if the element is in frames
           MRU = j;
       } else {
           // if the element is not in frames
           frames[MRU] = array[i];   
       }
    }
 } 
```

这就是你的错误所在。不是搜索整个`frames`数组然后检查是否遇到框架，而是将 -`else`子句放在循环中。

你的意思可能是这样的：

```
for(i = 0; i < array.length; i++) {
    for(j = 0; j < frames.length && !MRU_found; j++) {
        if(array[i] == frames[j]) {
            MRU = j;
            MRU_found = true;
        }
    }
    if(!MRU_found) {
        frames[MRU] = array[i];
    }
} 
```

编辑：关于您的问题，您要打印的是内存中数组的地址。

要每次打印数组，请将代码更改为：

```
for(i = 0; i < array.length; i++) {
    for(j = 0; j < frames.length && !MRU_found; j++) {
        if(array[i] == frames[j]) {
            MRU = j;
            MRU_found = true;
        }
    }
    if(!MRU_found) {
        frames[MRU] = array[i];
    }
    System.out.print("frams: {");
    for(j = 0; j < frames.length; j++) {
        System.out.print(" ");
        System.out.print(frames[j]);
    }
    System.out.println(" }");
} 
```

# android - 对话框片段 onactivity 结果

> ID：13653414
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:40.947
> 
> 标签：android, dialog, android-fragments

我的问题是从活动中显示对话框片段，然后在对话框片段上我们启动 onactivityresult(..) 对话框正在等待活动的结果。

*   当活动顶部返回时，对话框片段不可见。
*   片段实际上在那里，在最初显示片段的父活动下。

有线案例，以防在显示片段时改变方向，流程完美无缺。

这在 Nexus 7 上才开始发生 4.2，任何机构都可以提供帮助，以便片段仍然可见并取回结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:15:07.960

你看过关于对话片段的谷歌文档吗？

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

我认为最简单的方法是为您的对话框片段创建一个接口，然后您的调用者活动将实现该接口。然后您可以通过执行以下操作来显示您的对话框片段：

> MyDialogFragment 对话框 = new MyDialogFragment();
> dialog.show(getSupportFragmentManager(), "fragment_new");

该文档有很多示例。

# ios - UILongPressGestureRecognizer 在 UITextField 上不起作用

> ID：13653415
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:41.257
> 
> 标签：ios, uitextfield, uigesturerecognizer

我在视图控制器的 viewDidLoad 方法中初始化了一个 LongPress 手势识别器，如下所示：

```
longPressGesture_= [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(displayTimeFlagCallout)]; 
```

我的视图控制器中有一个表格视图。表格视图具有自定义单元格。每个单元格有 2 个文本字段。当用户长按文本字段（开始时间和结束时间）时，我想调出一个自定义弹出框。我不希望放大镜和复制/粘贴弹出框在长按文本字段时显示为标准行为，因此在添加我的手势识别器之前，我禁用了文本字段的内置长按手势识别器。我已将以下代码添加到我的 cellforRowAtIndexPath 方法中：

```
MyCustomCell_iPhone *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

if (cell == nil)
  {
    cell = [[MyCustomCell_iPhone alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];

      for (UIGestureRecognizer *recognizer in cell.startTime.gestureRecognizers) {
          if ([recognizer isKindOfClass:[UILongPressGestureRecognizer class]]){
              recognizer.enabled = NO;
          }
      }
      for (UIGestureRecognizer *recognizer in cell.endTime.gestureRecognizers) {
          if ([recognizer isKindOfClass:[UILongPressGestureRecognizer class]]){
              recognizer.enabled = NO;
          }
      }

      [cell.startTime addGestureRecognizer:longPressGesture_];
      [cell.endTime addGestureRecognizer:longPressGesture_];

  } 
```

但是，这是行不通的。现在长按什么都没有。任何想法可能是什么问题？

谢谢黑塔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:18:19.770

三个想法：

1.  您不能对两个控件使用相同的长按手势识别器。您必须为每个控件创建一个单独的手势识别器。

2.  当您开始在文本字段中编辑时，手势识别器似乎会被重置（假设您允许在文本字段中进行编辑）。我假设您允许编辑文本字段，如果是这样，我相信您必须设置一个委托来禁用不是您自己的长手势识别器。（您可以这样做，对于您的长按手势识别器，将其子类化为，例如`CustomLongPressGestureRecognizer`，将其用于您的文本字段的手势识别器，然后您可以禁用任何`UILongPressGestureRecognizer`不属于您自己的对象`CustomLongPressGestureRecognizer`。）

3.  我从您的代码中推断出您没有使用故事板和原型单元，因为在那种情况下，`cell`永远不会`nil`，您的`if`语句永远不会最终调用您的代码。但是，如果您使用 NIB 或不使用原型单元，那么在这一点上您应该没问题。

# php - php验证消息没有出现

> ID：13653419
> 
> 赞同：0
> 
> 时间：2012-11-30T21:25:56.877
> 
> 标签：php, validation

当用户没有从下拉菜单中选择选项时，它不会显示错误消息“请选择课程”。任何人都可以看到它为什么不显示消息并查看我是否正确地进行了 php 验证以便能够检查是否选择了下拉选项？

下面是代码：

```
 $sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseNo"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

 $courses = array(); // easier if you don't use generic names for data 

 $courseHTML = "";  
 $courseHTML .= '<select name="courses" id="coursesDrop">'.PHP_EOL; 
 $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $courseno = $dbCourseNo;
     $course = $dbCourseId;
     $coursename = $dbCourseName; 
     $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  
  } 

  $courseHTML .= '</select>'; 

  $submittedCourseId = (isset($_POST['courses'])) ? $_POST['courses'] : '';
  $errormsg = (isset($errormsg)) ? $errormsg : '';

        ?>
    <h1>CREATING A NEW ASSESSMENT</h1>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
        <table>
        <tr>
        <th>Course: <?php echo $courseHTML; ?><input id="courseSubmit" type="submit" value="Submit" name="submit" /></th>
        </tr>
        <tr>
        <td id="errormsg"><?php echo $errormsg; ?></td>
        </tr>
        </table>
        </form>

        <?php

if (isset($_POST['submit'])) {

$submittedCourseId = $_POST['courses'];

if($submittedCourseId){

?>

//need to do functions here

<?php
 }
 else{
$errormsg = "Please Select a Course";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:28:22.120

`$errormsg`在输出 HTML 后正在填充。因此，`$errormsg`在输出时始终为空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:30:12.120

在页面加载的那一刻，$errormsg 尚未设置。尝试在 html 之前获取验证

# c# - BindingSource.MoveNext 抛出的异常取消数据源上的编辑值

> ID：13653424
> 
> 赞同：0
> 
> 时间：2012-11-30T21:26:16.500
> 
> 标签：c#, winforms, data-binding

我遇到了以下情况：

```
 try
    {
        Validate();
        myBindingSource.MoveNext();
    }
    catch
    {
        if (MessageBox.Show("Do you want to keep editing the record?", "Error",
            MessageBoxButtons.YesNo, MessageBoxIcon.Error) == DialogResult.No)
        {
            myBindingSource.CancelEdit();
        }                
    } 
```

其中 myBindingSource.Datasource 是一个 DataTable，数据绑定文本框在验证时更新。

我将当前记录的数据绑定文本框更改为无效状态（例如重复主键）。当我调用上面的代码片段时，自然会引发异常。

在 catch 块中，数据表行的字段值已恢复为其原始值，但文本框值保持不变（我想要相同的文本框值）。

如果我再次调用相同的代码段，则不会引发异常（DataTable 具有正确的值）。

我的问题是如何使文本框再次将其数据发送到 DataTable？

PS 如果在第一次调用代码片段后更改文本框的值，DataSet 会收到更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:13:40.927

我的最终解决方案如下（尽管它将所有数据绑定控件写回数据源。至少它使数据源和控件保持同步）：

```
try
{
    Validate();
    myBindingSource.MoveNext();
}
catch
{
    if (MessageBox.Show("Do you want to keep editing the record?", "Error",
        MessageBoxButtons.YesNo, MessageBoxIcon.Error) == DialogResult.No)
    {
        myBindingSource.CancelEdit();
    }
    else
    {
        foreach (Binding b in myBindingSource.CurrencyManager.Bindings)
                {
                    b.WriteValue();
                }
    }                
} 
```

# php - 检查是否已经需要一个类

> ID：13653426
> 
> 赞同：1
> 
> 时间：2012-11-30T21:26:29.430
> 
> 标签：php, autoload

我构建了一个自动加载方法，基本上如下：

```
public function load_class($class){
    $path = str_replace('_', '/', $class);
    if(file_exists(get_template_directory() . '/' . $path . '.php')){
        require_once(get_template_directory() . '/' . $path . '.php');
    }
} 
```

我想做的一件事是说：

如果已经需要这个类，那么只需调用它，而不是每次调用、扩展或实例化该类时都必须执行 require_once() 。

我怎么不知道该怎么做……那是我寻求帮助的地方，还是 require_once 本质上是“缓存”了需要的类？我的理解是，每次通话只需要一次。那就是它必须再次要求它的每一个电话......？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:28:54.630

如果您将其用作自动加载器，则它只会在未首先定义该类时运行。

除此之外，还`require_once()`跟踪已加载的文件。如果你`require_once()`再次调用同一个文件，什么都不会发生。

# objective-c - 适用于 iOS 的 Facebook 样式菜单，在表格单元格中单击菜单，使用 nib 名称查看

> ID：13653427
> 
> 赞同：1
> 
> 时间：2012-11-30T21:26:36.123
> 
> 标签：objective-c

我正在为 iOS 制作一个 Facebook 风格的菜单，在表格单元格上单击菜单，使用 nib 名称查看...

我已经实现了这一点，我需要创建一个名为“ListingsViewController”的新视图。我有这段代码，但这显然是替换菜单视图，当你滑动打开它时，而不是实际的窗口视图。单击单元格时，菜单应关闭并打开新视图，但菜单关闭，当您重新打开菜单时，列表视图位于菜单视图中，而不是菜单关闭时的实际主视图。

```
[self presentModalViewController:viewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:34:30.413

尝试这个。

1.- 实例化你的新控制器

```
YouController *section = [YourController alloc] initwith.... 
```

2.- 在“自我”使用中：

```
[self addChildViewController:section];
[self.view addSubview:section.view]; 
```

3.- 根据您的需要调整框架

这对我有用，但也许你正在使用不同的方式来获取菜单。

# wpf - WPF在ScaleTransform问题上滚动，多个UI元素

> ID：13653432
> 
> 赞同：0
> 
> 时间：2012-11-30T21:26:58.153
> 
> 标签：wpf, wpf-controls, scrollbar, scrollview, wpfdatagrid

还在[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f765d4c9-1719-4757-b467-2492d87bb4ab询问](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f765d4c9-1719-4757-b467-2492d87bb4ab)

全部，

我有一个在我的 WPF 应用程序中执行缩放变换的滑块。现在我遇到了一个问题，我在滚动查看器内有一个元素，该元素位于具有高度 =“*”的行内，而后续行中的另一个元素具有高度 =“自动”。

目标是直到运行时我们才知道行高（甚至元素有多大），但是我们将两个元素都显示在屏幕上，第一个元素占用与其一样多的空间罐头和底部元素始终可见，占用它需要的任何空间。

我有以下问题/解决方案声明（我认为最能描述我的问题），并且如您所见，当我想实现此目标并且仍然允许在缩放时访问所有 UI 元素时，我被困在做什么大到足以将其中一个元素从屏幕上推出（希望这是有道理的）。

```
Problem statement:
    ScaleTransform is causing top DG to disappear where RowDefinition Height="*"

Solution:
    Set Minimum height on RowDefinition to prevent DG from disappearing.

Problem statement:
    Setting Minimum height on RowDefinitoin causes lower rows to dissapear.

Solution:
    Add scrollviewer encapsulating grid.

Problem statement:
    Since top DG is in RowDefinition Height="*", if there is a lot of data in top DG, bottom DGs cannot be seen without scrolling.

Solution statement:
    ??? 
```

这是我当前的代码：

```
<Grid.RowDefinitions>
    <RowDefinition Height="*" MinHeight="120" />
    <RowDefinition Height="Auto" />
</Grid.RowDefinitions>
<GroupBox Grid.Row="0">
    <DataGrid ItemsSource="{Binding Path=SomePathThatCouldHaveLotsOfData}">
        <!--Note that DataGrid implements its own scrollviewer as long as it's not surrounded by another scrollviewer-->
        <!--...-->
    </DataGrid>
</GroupBox>
<GroupBox Grid.Row="1">
    <!--...-->
</GroupBox> 
```

希望这一切都有意义我的问题是什么以及我正在尝试做什么。任何想法我如何才能完成这项工作（希望以一种干净的方式）。如果有帮助，我正在使用 MVVM。

编辑：我应该指出，直到运行时我也不知道任何最大高度（并且最大高度可能无论如何都无关紧要，因为我们将使用比例变换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:07:26.727

全部，

我设法实现了我的目标~~，但这有点丑陋~~。

基本上，我必须捕获我的 UserControl/Page/Window 的 Loaded 和 SizeChanged 事件，并使用这些事件将 ScrollViewer.ViewPortHeight 值设置为我的 VM 中的属性。 ~~然后，只需从中减去一个已知值作为我的最大值。~~ 然后，只需将 ViewPortHeight 乘以我希望每个 UI 元素在屏幕上占据的百分比并将 UI 元素绑定到该百分比即可。

希望这将帮助其他具有相同业务需求的人。

# ios - 启动屏幕显示在设备上，但不是在 Ad Hoc Distribution 之后

> ID：13653436
> 
> 赞同：1
> 
> 时间：2012-11-30T21:27:19.573
> 
> 标签：ios, splash-screen, ipa, ad-hoc-distribution

请帮忙。我在我的项目中添加了一个启动画面。首先显示启动图像，然后显示我的本地化初始屏幕 2 秒，然后淡入我的第一个屏幕。

在我的设备上直接安装 Xcode 时，一切正常。当我构建 ipa 存档并通过 TestFlight 分发时，在同一设备上安装后，不会显示初始屏幕：启动图像后立即出现我的第一个屏幕。

我的设备是 iPhone 4S，iOS 6.0.1。部署目标设置为 5.0，我使用 Xcode 4.5.2。

我的 didFinishLaunchingWithOptions 底部的启动屏幕代码：

```
// Splash screen
UIImageView*imageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:NSLocalizedString(@"Splash_NL.PNG", @"Bestandsnaam splash screen")]];
imageView.contentMode = UIViewContentModeScaleAspectFill;
imageView.frame = self.window.bounds;
[[navigationController view] addSubview:imageView];
[[navigationController view] bringSubviewToFront:imageView];

// as usual
[self.window makeKeyAndVisible];

// korte pauze, dan fade out
[self performSelector:@selector(_fadeSplash:) withObject:imageView afterDelay:1.0]; 
```

在那之后

```
- (void) _fadeSplash:(UIView *)view
{
[UIView transitionWithView:self.window duration:2.0f options:UIViewAnimationOptionTransitionNone animations:^(void){view.alpha=0.0f;} completion:^(BOOL finished){[view removeFromSuperview];}];
} 
```

任何帮助表示赞赏；我迷路了/绝望...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:44:27.977

单击显示项目文件夹和文件的左侧窗格中的相关图像。在目标成员框下的文件检查器中，确保将其添加到您正在构建的所有目标中并且您需要它。我认为您可能有多个目标并且图像没有添加到所有目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:14:17.490

问题解决了。在构建存档之前的某个时间，我提供了新的初始屏幕图像。这些文件的扩展名是 .png 而不是 .PNG。

我认为设备上的启动画面（通过 Xcode）也应该失败（我在运行/构建之前删除了应用程序的先前版本），但显然这些资源文件以某种方式保存在内存中或其他东西中。更改扩展名并重建存档解决了它。

# jquery - How to insert text into existing text in a div using jQuery

> ID：13653453
> 
> 赞同：1
> 
> 时间：2012-11-30T21:28:19.413
> 
> 标签：jquery, web-services, jsp

I'm using jQuery 1.8.2 with a jsp and I'm trying to get text dynamically inserted into a div. Here is what I've tried:

```
var selectButton = "Your " + $(this).val();
alert("The selectButton value is: ")
$('#submitMsg').prepend(selectButton);
$('#submitMsg').show();
    ...         

<p/>
<div id="submitMsg" style="display: none;"><h3> request is being submitted..</h3></div>
<p/>
<div id="trueDiv" style="display: none;"><h3> request was successful!</h3></div>
<div id="falseDiv" style="display: none;"><h3> request was not successful!</h3></div> 
```

I want to dynamically pass in which request, based on which submit button was clicked, to the message div. Then I want to use that same text value and insert it into the request message confirmation, based on the result of the web service call, still using the same size font, but I've been unable to do this.

Using .prepend doesn't seem to merge the text well, so I need something that will directly insert it into the text of the div. What should I be using?

After I got the answer here I found a tutorial at this [link](http://www.mkyong.com/jquery/jquery-how-to-get-the-tag-value-or-element-content/). Should be helpful for similar tasks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:30:17.230

Instead of using `.prepend` use `.text` or `.html`. `.prepend` is for DOM elements, not strings. You can retain the rest of the current text like so:

```
$("#submitMsg").html("Your " + $(this).val() + $("#submitMsg").html()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:30:46.673

Use `.html()` or `.text()` to get the existing content and then add them together.

```
var html = $("#submitMsg").html();
html = selectButton + html;
$("#submitMsg").html(html); 
```

# .net - Dapper 和 SQL 注入

> ID：13653461
> 
> 赞同：44
> 
> 时间：2012-11-30T21:28:51.120
> 
> 标签：.net, orm, .net-3.5, dapper

Dapper 如何帮助防止 SQL 注入？我正在测试不同的 DAL 技术，并且必须选择一种来保护我们的站点。我倾向于 Dapper (http://code.google.com/p/dapper-dot-net/)，但需要一些帮助来了解安全性。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-01T22:42:03.010

> Dapper 如何帮助防止 SQL 注入？

它使完全参数化的数据访问变得**非常非常**容易，而无需连接输入。特别是，因为您不需要跳过大量“添加参数、设置参数类型、检查 null，*因为 ADO.NET 有糟糕的 null 处理*、冲洗/重复 20 个参数”，从而使参数处理变得**非常**方便. 它还使将行变成对象变得非常容易，避免了使用的诱惑`DataTable`……每个人都赢了。

来自评论：

> 还有一个……那么，dapper 到底有什么帮助呢？

为了回答，让我们以 marc_s 的回复为例，并以旧方式编写，假设我们必须从`connection`. 这就是：

```
List<Dog> dogs = new List<Dog>();
using(var cmd = connection.CreateCommand()) {
    cmd.CommandText = "select Age = @Age, Id = @Id";
    cmd.Parameters.AddWithValue("Age", DBNull.Value);
    cmd.Parameters.AddWithValue("Id", guid);
    using(var reader = cmd.ExecuteReader()) {
        while(reader.Read()) {
            int age = reader.ReadInt32("Age");
            int id = reader.ReadInt32("Id");
            dogs.Add(new Dog { Age = age, Id = id });
        }
        while(reader.NextResult()) {}
    }
} 
```

除了我过于简单化了，因为它还处理了广泛的问题，例如：

*   参数的空处理
*   结果列的空处理
*   使用序数列索引
*   适应底层表和类型的结构变化
*   结果列的数据转换（各种原语、字符串、枚举等之间）
*   非常常见的“在此列表中”场景的特殊处理
*   对于“执行”，“将其单独应用于输入列表”的特殊处理
*   避免愚蠢的错别字
*   减少代码维护
*   处理多个网格
*   处理在单个网格中水平返回的多个对象
*   使用任意 ADO.NET 提供程序（提示：`AddWithValue`很少存在）
    *   包括对 Oracle 等需要额外配置的特定支持
    *   与 ADO.NET 装饰器（例如“mini-profiler”）配合得很好
*   对缓冲（适用于中小型数据；最小化命令持续时间）和非缓冲（适用于大数据；最小化内存使用）访问的内置支持
*   由关心性能并“相当了解”数据访问和元编程的人优化
*   允许您使用您选择的 POCO / DTO / anon-type / 不管参数和输出
*   `dynamic`当输出不保证生成 POCO / DTO 时，允许使用（对于多列）或原语等（对于单列）
*   避免像 EF 这样的复杂全类型 ORM 的开销
*   避免弱类型层的开销，例如`DataTable`
*   根据需要打开和关闭连接
*   以及大量其他常见问题

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-11-30T21:30:53.130

您只需要像往常一样使用**参数化查询。**由于 Dapper 只是对“原始”SQL 和 ADO.NET 的“微小”（并且非常薄）扩展 - 只需使用参数化的 ADO.NET 查询并提供参数。

从 Dapper-Dot-Net 站点查看此示例：

```
var dog = connection.Query<Dog>("select Age = @Age, Id = @Id", 
                                new { Age = (int?)null, Id = guid }); 
```

SQL 查询使用参数 - 您将这些参数提供给“Dapper”查询。

总结一下：使用 Dapper 本身并不能帮助防止 SQL 注入 - 但是使用**参数化**的 ADO.NET/SQL 查询确实可以（并且 Dapper 绝对支持这些查询，完全没有问题）

# windows-phone - microsoft.phone.userdata.contact.id

> ID：13653465
> 
> 赞同：3
> 
> 时间：2012-11-30T21:29:11.793
> 
> 标签：windows-phone, windows-phone-8

我正在使用新的 Windows Phone 8 应用程序，并尝试列出手机上的联系人。

在调试模式下，我可以在成员（不是扩展名）旁边看到带有蓝色小图标的成员 ID（Contact.Id），但我无法在编程模式下访问该成员，并且在键入 A = Contact 时无法查看它.Id !，并且在 Microsoft 网站上找不到任何关于它事件的文档 我找不到成员：microsoft.phone.userdata.contact.id 这个成员的类型是什么？

![ID](../Images/6b96a80c92a6af3311d0e751ec24e974.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:16:57.633

Id 是 Contact 类的私有/受保护/内部属性。这意味着就 Silverlight 运行时而言，它是不可访问的成员。这意味着您将无法在运行时获得该值。Contact.Id 超出您的范围。

Silverlight 尊重访问级别，仅允许您访问调用代码访问级别中的成员。例如，所有类都可以调用所有其他类的所有公共成员（属性、方法、事件、字段等）。作为另一个示例，只有同一程序集中的类可以调用同一程序集中的类的内部成员。如果该程序集之外的任何类尝试访问内部成员，他们将获得 MemberAccessException。作为最后一个示例，如果一个类声明了私有成员（例如私有字段），那么只有该类可以访问该私有成员。如果另一个类尝试访问类中的私有值，它将收到 MemberAccessException。

以上对于运行时（反射）调用的成员和编译时（硬编码）调用的成员都是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T03:53:01.107

我才意识到

```
contact.GetHashCode() 
```

`Id`返回与变量窗口向下钻取中看到的属性完全相同的数字。不确定它有多可靠，以及将来它会有多可靠。

# python - gdb：中断由python加载的共享库

> ID：13653467
> 
> 赞同：9
> 
> 时间：2012-11-30T21:29:19.573
> 
> 标签：python, gdb, shared-libraries, ctypes, breakpoints

我正在尝试调试位于共享库中的 c/c++ 代码，这些代码由 python 中的 ctypes.cdll.LoadLibrary() 加载，然后从 python 调用特定函数。python代码分叉子进程，所以我需要能够打破c函数是从python父进程还是子进程调用的。一个非常简单的例子：test.c

```
// j = clib.call1(i)
int call1(int i)
{
    return i*2;
} 
```

测试.py

```
import os, sys, ctypes
path = os.path.abspath(os.path.join(os.path.dirname(sys.argv[0]), "test.so"))
clib = ctypes.cdll.LoadLibrary(path)
i = 20
j = clib.call1(i)
print "i=%d j=%d\n" %(i, j)

$ gcc -g -O0 test.c -shared -o test.so
$ gdb --args python-dbg test.py
(gdb) break test.c call1
Function "test.c call1" not defined.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (test.c call1) pending.
(gdb) info breakpoints
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   <PENDING>  test.c call1
(gdb) run
Starting program: /usr/bin/python-dbg test.py
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
i=20 j=40

[23744 refs]
[Inferior 1 (process 44079) exited normally] 
```

您可以从我的终端日志中看到，当 python 加载库时 gdb 没有看到断点。我在我的应用程序中看到了相同的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:35:53.570

`call1`改为休息

```
(gdb) break call1 
```

这也应该有效

```
(gdb) break test.c:call1 
```

# java - 为什么堆栈会爆炸

> ID：13653469
> 
> 赞同：-1
> 
> 时间：2012-11-30T21:29:33.523
> 
> 标签：java

我正在尝试发现从起始节点可到达的所有节点。

似乎从未达到基本情况，我不知道为什么。

我的代码：

```
class Vertex {
    public final String name;
    public int found;
    public Edge[] adjacencies;
    public Vertex(String argName) { name = argName; found = 0;}
}

class Edge {
    public final Vertex target;
    public Edge(Vertex argTarget, double argWeight) { target = argTarget; weight = argWeight; }
}

ArrayList<Vertex> merge(ArrayList<Vertex> a, ArrayList<Vertex> b) {
    if(a == null) return b;
    if(b == null) return a;
    for(int x = 0; x < a.size(); x++)
        b.add(a.get(x));
        return b;
}

ArrayList<Vertex> span(Vertex b) {
    System.out.println("hello");
    if(b.found == 1) {
        return null;
    }
    ArrayList<Vertex> t = new ArrayList<Vertex>();
    t.add(b);
    b.found = 0;
    if(b.adjacencies == null) return t;
    for(int x = 0; x < b.adjacencies.length; x++) {
        ArrayList<Vertex> result = span(b.adjacencies[x].target);
        t = merge(t, result);
    }
    return t;
} 
```

我收到一个堆栈溢出错误，似乎它陷入了递归，但我不知道为什么。

注意：这是我运行它的图表。

```
Vertex v0 = new Vertex("Redvile");
Vertex v1 = new Vertex("Blueville");
Vertex v2 = new Vertex("Greenville");
Vertex v3 = new Vertex("Orangeville");
Vertex v4 = new Vertex("Purpleville");

v0.adjacencies = new Edge[]{ new Edge(v1, 5), new Edge(v2, 10), new Edge(v3, 8) };
v1.adjacencies = new Edge[]{ new Edge(v0, 5), new Edge(v2, 3), new Edge(v4, 7) };
v2.adjacencies = new Edge[]{ new Edge(v0, 10), new Edge(v1, 3) };
v3.adjacencies = new Edge[]{ new Edge(v0, 8), new Edge(v4, 2) };
v4.adjacencies = new Edge[]{ new Edge(v1, 7), new Edge(v3, 2) }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:40:26.003

您从未将 found 设置为 1，您仅将其设置为 0，而您可能的意思是 1。此外，对 found 使用布尔值。此外，对 ArrayLists 使用 addAll，并返回 Collections.emptyList，而不是 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:43:01.347

鉴于这个简单的图表：

顶点A <----------------> 顶点B

顶点 A 进入跨度。found==0 所以继续，把它加到 t，设置 found=0，它有一个邻接——然后调用 span(vertex b)

顶点 B 进入跨度。found==0 所以继续，把它加到 t，设置 found=0，它有一个邻接——然后调用 span(vertex a)

顶点 A 进入跨度。found==0 所以继续，把它加到 t，设置 found=0，它有一个邻接——然后调用 span(vertex b)

等等

我认为，问题在于您应该将 found 设置为 1，而不是 0。

（将 VertexA 替换为“Redville”，将 VertexB 替换为“Blueville”以适合您的示例）

# arrays - 如何访问 Assembly 中的每个单词？

> ID：13653474
> 
> 赞同：1
> 
> 时间：2012-11-30T21:30:01.257
> 
> 标签：arrays, assembly, word, mips64, edumips64

鉴于：

```
.data
arr: .word 2,5,1,3,4
len: .word 5
sum: .word 0 
```

我如何访问“arr”中的每个单词，例如 2、3 和 4？

最终，我想做的是找到“arr”中所有值的总和，但我很难遍历“arr”。

感谢您的时间！

附加信息：

1.  我正在使用 eduMIPS64

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T02:44:33.227

首先将数组的地址加载到寄存器中，然后您可以访问具有恒定偏移量的项目。（您的汇编器可能支持诸如`lw $t0, arr+12`方便简写之类的结构。请参阅您的手册。）对于迭代，要么增加地址寄存器，要么添加另一个包含偏移量的寄存器。请务必考虑项目大小。以下示例适用于 32 位 mips，根据需要调整 64 位：

```
.data
arr: .word 2,5,1,3,4
len: .word 5
sum: .word 0

.text
.globl main
main:
    la $t0, arr
    lw $t1, 12($t0)     # load arr[3] using byte offset
    li $t1, 3           # index
    sll $t1, $t1, 2     # multiply by item size
    addu $t1, $t1, $t0  # add base address
    lw $t1, ($t1)       # load arr[3]

# iteration type 1
# for(i=len, ptr=arr; i != 0; i -= 1, ptr += 1)
# ... use *ptr ...
    la $t0, arr
    lw $t1, len         # load length
loop1:
    lw $t2, ($t0)       # load item
    # process item here
    addi $t0, $t0, 4    # add item size to pointer
    addi $t1, $t1, -1   # decrement counter
    bne $t1, $0, loop1  # if counter != 0, repeat

# iteration type 2
# for(i=0, i != len; i += 1)
# ... use arr[i] ...
    la $t0, arr
    lw $t1, len         # load length
    li $t2, 0           # index
loop2:
    sll $t3, $t2, 2     # multiply by item size
    addu $t3, $t3, $t0  # add base address
    lw $t3, ($t3)       # load item
    # process item here
    addi $t2, $t2, 1    # increment index
    bne $t2, $t1, loop2 # if index != len, repeat 
```

（注意这些示例循环不处理零长度数组，如有必要添加检查）

# php - PHP - 内部服务器错误 - 我没有对网站做任何事情

> ID：13653475
> 
> 赞同：0
> 
> 时间：2012-11-30T21:30:04.557
> 
> 标签：php, .htaccess, webserver

我的客户目前正在托管我使用 Dotster.com 为他们构建的网站，他们最近转移到了全新的服务器或其他服务器上，并重定向了域名的 DNS（他们在电子邮件中告诉她），从那时起然后这个错误一直在发生（经常），我得到`Internal Server Error`了常规消息，但这是我的错误日志：

我不知道为什么这会是一个问题？

**编辑**

新服务器一定破坏了我的`.htaccess`代码。

.ht 访问：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L]

RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]

RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA]

php_value post_max_size 1000M
php_value upload_max_filesize 1000M
php_value max_execution_time 6000000 
```

# android - 录音机不适用于三星 s3 sprint 手机

> ID：13653476
> 
> 赞同：1
> 
> 时间：2012-11-30T21:30:10.673
> 
> 标签：android, audio, galaxy, recorder

我有一个录音机类来捕获原始音频帧。它适用于除三星 s3 sprit 版本之外的所有其他手机。（它适用于其他三星 s3 手机）。我已经找到了解决这个问题的方法。问题似乎很奇怪，所以这个解决方案可能会帮助某些人节省时间。

我的录音机代码是

```
// record init
 audioRecorder.setRecordPositionUpdateListener(updateListener);
 audioRecorder.setPositionNotificationPeriod(framePeriod);
 if(audioRecorder.getState() == AudioRecord.STATE_INITIALIZED ){
    //Buffer for audio record
     buffer = new byte[framePeriod*bSamples/8*nChannels];   
    audioRecorder.startRecording();
    audioRecorder.read(buffer, 0, buffer.length)
  } 
```

在我的 RecordPositionUpdate 列表中

```
 public void onPeriodicNotification(AudioRecord recorder)
  {         
   int data_Len = audioRecorder.read(buffer, 0, buffer.length); // Fill buffer
   Log.d(TAG,"Recieved audio buffer of length "+data_Len);      
  } 
```

在 samsung s3 sprint 的情况下，我可以看到第一次读取本身给出“ERROR_INVALID_OPERATION”。因此以下更改有助于解决问题

```
// record init
audioRecorder.setRecordPositionUpdateListener(updateListener);
audioRecorder.setPositionNotificationPeriod(framePeriod);
if(audioRecorder.getState() == AudioRecord.STATE_INITIALIZED ){
  //Buffer for audio record
    buffer = new byte[framePeriod*bSamples/8*nChannels];    
    audioRecorder.startRecording();

  //Fix for recording issue with Samsung s3 Sprint phones.Doing a delayed first read
  private final int audioRecorderSettleTime = 1500; 

  new Handler().postDelayed(new Runnable() {                    
   @Override
    public void run() {
    int bytesReceived = audioRecorder.read(buffer, 0, buffer.length);
    Log.d(TAG,"Delayed first read: bytes recieved "+ bytesReceived);
    }
}, audioRecorderSettleTime); 
```

}

它工作正常并解决了我的问题。似乎这些手机有硬件级别问题，延迟了录音机缓冲区初始化。所以第一次读取应该在延迟时间之后开始。有什么办法或解决办法来解决这个问题吗？

# powershell - 使用 Powershell 重命名文件并创建子文件夹

> ID：13653479
> 
> 赞同：0
> 
> 时间：2012-11-30T21:30:24.640
> 
> 标签：powershell, file-rename

我在具有这种命名约定的目录中有 10K 文档：

> 1050_14447_Letter Extension.pdf、1333_14444_Letter.docx 等...

我尝试使用此脚本删除第二个下划线（包括第二个下划线）之前的所有字符：

```
Get-ChildItem -Filter *.pdf | Rename-Item -NewName {$_.Name -replace '^[0-9_]+'} 
```

这有效，但显示会有重复的文件名。

想知道脚本是否可以通过某种方式根据文件名（减去扩展名）创建子文件夹？所以我的主文件夹中有 10K 子文件夹。每个子文件夹只有一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:55:53.530

这应该有效。它为每个项目创建一个新文件夹，然后移动它，在此过程中重命名它。

```
gci | ? {!$_.PSIsContainer} | % {New-Item ".\$($_.BaseName)" -Type Directory; Move-Item $_ ".\$($_.BaseName)\$($_.Name -replace '^[0-9_]+')"} 
```

请注意，如果有两个文件具有相同的名称，但扩展名不同，则在尝试创建目录时会看到错误，但两个文件将在同一个文件夹中结束。

或者，如果您希望将更具可读性的内容保存在脚本中，这在功能上是相同的：

```
$files = Get-ChildItem | Where-Object {!$_.PSIsContainer}
foreach ($file in $files)
{
    $pathName = ".\" + $file.BaseName
    New-Item $pathName -Type Directory
    $newFileName = $pathName + "\" + ($file.Name -replace '^[0-9_]+')
    Move-Item $file $newFileName
} 
```

# android - 带有 NullPointer 异常的方法

> ID：13653485
> 
> 赞同：0
> 
> 时间：2012-11-30T21:31:09.790
> 
> 标签：android

使用 sharedpreferences 我运行此方法：

```
private Button button1;
private Button button2;
private TextView textView1;

@Override
public void onCreate(Bundle savedInstanceState){ 
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
checkIndex(); 
```

// 如果没有，这里保存首选项 // 在程序第二次启动后，checkIndex(); 去那次崩溃

```
public void checkIndex(){
    SharedPreferences prefs = getSharedPreferences(PRIVATE_PREF, 0);
    String index = prefs.getString("scelta", "");
    if (index == ""){
 index();
    }
    else {

        String scelta = prefs.getString("scelta", "");
        int a = prefs.getInt("arraystart", 0);
        int b = prefs.getInt("arrayend", 0);

        int size = prefs.getInt(prog +"_size", 0);
        String prog[] = new String[size];
        for(int i=0; i<prog.length; i++)

         prog[i] = prefs.getString(prog + "_" + i, null);

        String titolo = prefs.getString("titolo", "");
        int x = prefs.getInt("x", 0);

        textView1.setText(""+a+" "+b+" "+titolo); 
```

我有一个 NullPointer 异常，`textView1`但我不明白为什么！（我花了很多时间但什么都没有）......为什么？谢谢！

日志猫：

```
11-30 21:49:42.806: E/AndroidRuntime(3739): FATAL EXCEPTION: main
11-30 21:49:42.806: E/AndroidRuntime(3739): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.perledisaggezza/com.example.perledisaggezza.MainActivity}: java.lang.NullPointerException
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.os.Looper.loop(Looper.java:137)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at java.lang.reflect.Method.invokeNative(Native Method)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at java.lang.reflect.Method.invoke(Method.java:511)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at dalvik.system.NativeStart.main(Native Method)
11-30 21:49:42.806: E/AndroidRuntime(3739): Caused by: java.lang.NullPointerException
11-30 21:49:42.806: E/AndroidRuntime(3739):     at com.example.perledisaggezza.MainActivity.checkIndex(MainActivity.java:480)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at com.example.perledisaggezza.MainActivity.onCreate(MainActivity.java:149)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.Activity.performCreate(Activity.java:5008)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-30 21:49:42.806: E/AndroidRuntime(3739):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-30 21:49:42.806: E/AndroidRuntime(3739):     ... 11 more
11-30 21:51:08.107: E/Trace(3796): error opening trace file: No such file or directory (2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:00:03.587

你在做`checkIndex()` **之前**调用`textView1 = (TextView)findViewById(R.id.textView1);`你需要先初始化 textView1 然后你可以使用它，否则`checkIndex()`使用空引用。因此，您需要在`textView1 = (TextView)findViewById(R.id.textView1);`之前添加`checkIndex()`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:52:45.450

看看你的 onCreate(...) 方法。好像没写

```
setContentView(R.layout.some_layout_file) 
```

包含一个带有 textView1 id 的 TextView。或者你应该使用

```
TextView textView1 = (TextView) findViewById(R.id.textView1) 
```

# java - 是否可以在不重置其属性的情况下为 JComponent 设置操作？

> ID：13653491
> 
> 赞同：1
> 
> 时间：2012-11-30T21:31:34.527
> 
> 标签：java, swing, events, action, awt

我已经阅读了 Oracle 提供的 Java trail，他们说对象属性设置为与操作属性匹配。我想知道这是否是一组有限的共享属性，或者动作是否被强制转换为与您设置动作的对象相同的类。

我的另一个问题是......是否可以将 Action 设置为与我设置的 Component 具有相同的属性，以便它不会重置所有内容？我能想到的唯一解决方法是在对对象执行任何操作之前为对象设置操作，或者通过操作方法或构造函数传递对象并在此时设置您想要的所有值。但是我希望我可以稍后在程序中设置操作而不会打扰任何东西，这样会更方便。

例子 ...

```
JMenuItem myItem = new JMenuItem("someText");
myItem.setAction(myAction);// Clears the text from my menu item which is the problem 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:29:18.117

我：

> 为什么不让“someText”从一开始就与 Action 相关联？

你：

> 我怎么做？

解决方案：

```
 // can also pass in an icon to this constructor as a 2nd parameter
  Action myAction = new AbstractAction("Some Text") {
     {
        // set properties here including mnemmonic
        putValue(MNEMONIC_KEY, KeyEvent.VK_S);
     }

     @Override
     public void actionPerformed(ActionEvent e) {
        // action initiated code goes here
     }
  }; 
```

您还可以通过 Action 的 NAME 属性设置按钮的文本：

```
 Action myAction = new AbstractAction() {
     {
        putValue(NAME, "Some Text");
        putValue(MNEMONIC_KEY, KeyEvent.VK_S);
     }

     // ... etc...
  }; 
```

# python - python unittest - 如何引用可调用函数

> ID：13653492
> 
> 赞同：1
> 
> 时间：2012-11-30T21:31:35.030
> 
> 标签：python, unit-testing

好的，我知道这很明显，但我不知道如何为内部函数编写测试。这是一个简单的代码来说明这个问题。

```
def high(x, y):
    def low(x):
        return x*2
    return y*low(x)

class TestHigh(unittest.TestCase):
    def test_high(self):
        self.assertEqual(high(1,2),4)

    def test_low(self):
        self.assertEqual(low(3),6) 
```

结果是

```
Exception: NameError: global name 'low' is not defined 
```

在“真实”情况下，我希望能够单独测试较低级别的功能，以确保执行所有路径，这在仅从较高级别进行测试时很麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:37:24.977

low 嵌套在 high 函数中，因此无法从函数外部访问它。您的功能的等价物是`high(3,1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:37:42.200

您编写测试以确保公开可见的界面按照其规范执行。您不应尝试为未公开的内部功能编写测试。

如果您无法`low()`通过结果进行全面测试，`high()`那么未测试的部分对`low()`外界的任何事情都无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:40:44.503

**坏**：尝试创建一个类并将函数作为方法（或静态函数）添加到它。

（我将把它留在这里作为不做什么的参考。）

**好**：编写模块级函数或接受*如果嵌套它就无法测试它*。

# ruby-on-rails - 我缺少迁移文件

> ID：13653494
> 
> 赞同：2
> 
> 时间：2012-11-30T21:31:47.027
> 
> 标签：ruby-on-rails, migration

我可以添加迁移文件，但告诉 Rails 不要在本地运行它吗？我需要该文件供其他人在本地设置应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T21:39:55.160

如果你有一个文件：

```
db/migrate/20121010100909_modify_table_x.rb 
```

您可以进入数据库并运行以下 SQL。

MySQL：

```
INSERT INTO 'schema_migrations' VALUES ('20121010100909'); 
```

PostgreSQL：

```
INSERT INTO schema_migrations VALUES ('20121010100909'); 
```

然后它将忽略该迁移。

**编辑 - 如何“进入你的数据库”**

使用`config/database.yml`Rails 中的参数，连接到您正在使用的数据库。您将需要使用您正在使用的任何数据库软件的命令行工具。例如

对于 PostgreSQL：

```
psql -d <database_name> -U <username> 
```

对于 MySQL：

```
mysql -u <username> <databasename>@localhost -p 
```

如果需要，请输入您的密码。

然后输入并执行上面的SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:40:21.673

您可以在本地将正确的时间戳插入 schema_migrations 表中。

# javascript - 是否可以使用变量突出显示 jQuery 中的一行？

> ID：13653495
> 
> 赞同：2
> 
> 时间：2012-11-30T21:31:48.873
> 
> 标签：javascript, jquery, variables

我正在尝试使用 jQuery 突出显示表中的行，但我想知道是否可以为要突出显示的行使用变量。这是我现在拥有的代码，它不起作用。

```
 var rowNumber = 3 //I want to use a loop, but for testing purposes I have it set to 3
  $('tr:eq(rowNumber)').addClass('highlight'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:32:24.850

当然，为什么不呢。您可以在选择器中传递一个变量[`:eq()`](http://api.jquery.com/eq-selector/)：

```
$("tr:eq(" + rowNumber + ")").addClass("highlight"); 
```

或改用[`eq()`](http://api.jquery.com/eq/)方法：

```
$("tr").eq(rowNumber).addClass("highlight"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:32:47.807

```
$('tr').eq(rowNumber).addClass('highlight'); 
```

应该为你工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:49:02.460

让我首先解决隔离访问（即不考虑循环优化）

*   最佳解决方案：使用 .eq() （快速、美观且简短）

你可以尝试类似的东西

```
$('tr').eq(rowNumber).addClass('highlight'); 
```

说明： .eq(index) 将匹配元素集减少到指定索引处的元素。

来源：[http ://api.jquery.com/eq/](http://api.jquery.com/eq/)

*   替代解决方案：使用 ":eq(index)" 选择器（不必要地更慢、更冗长和复杂）

    $("tr:eq("+rowNumber+")").addClass('highlight');

*   第三种解决方案：（速度快，但比建议的解决方案更详细）$($('tr').get(rowNumber)).addClass('highlight');

这个是如何工作的：$('tr').get(rowNumber) 获取与查询选择器匹配的第 (rowNumber+1) 个 DOM 元素，然后使用周围的 $( ) 将其包装在 jQuery 中。

更多信息请访问：[http ://api.jquery.com/get/](http://api.jquery.com/get/)

随意尝试随附的 jsFiddle：http: [//jsfiddle.net/FuLJE/](http://jsfiddle.net/FuLJE/)

* * *

如果您特别注重性能并且确实要遍历数组，则可以这样做：

```
var trs = $('tr').get();  //get without arguments return the entire array of matched DOM elements
var rowNumber, len = trs.length; 
for(rowNumber = 0; rowNumber < len; rowNumber++) {
   var $tr = $(trs[rowNumber]);
   //various stuff here
   $tr.addClass('highlight');
   //more stuff here
} 
```

当然你也可以使用 .each()

```
$("tr").each(function (rowNumber, tr) {
   var $tr = $(tr);
   //various stuff here
   $tr.addClass('highlight');
   //more stuff here
}) 
```

文档可以在这里找到：http: [//api.jquery.com/each/](http://api.jquery.com/each/)

只是指出显而易见的：如果OP想要做的就是将突出显示类添加到所有tr，那么 $("tr").addClass('highlight') 会起作用:-)

# jquery - 将页面动态添加到 jQuery 移动 Web 应用程序

> ID：13653498
> 
> 赞同：0
> 
> 时间：2012-11-30T21:32:03.290
> 
> 标签：jquery, jquery-mobile, asp.net-mvc-4

我有一个需要 12 个 jQuery Mobile 页面的 MVC4 Web 应用程序。

1.  欢迎
2.  登录

然后还有很多其他人。

如果用户要求，我想一次添加一页，

1.  将页面动态添加到我的项目的最佳方法是什么？

2.  包含页面脚本（动态添加的页面）的适当站点在哪里？

3.  如果 data-ajax="false" 包含在 a 中，究竟是什么意思`Html.ActionLink()`？

目前，我几乎有 90% 的应用程序，但我在引用某些页面时遇到严重问题，有时视图中包含的所有页面都不会呈现或不运行脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:05:57.037

我认为您在组织 JQuery Mobile 页面时有以下选择：

(a) 一个包含所有页面的 HTML 文件（带有 class="page" 的 div）

这是最简单的方法，并且可以保证工作，但是对于大型项目，文件可能会变得太大

(b) 一个链接到子 HTML 文件的主 HTML 文件

从 UI 的角度来看，JQM 在加载子页面时默认使用“AJAX 模式”，这使得转换与选项 (a) 一样流畅。这样做的缺点是子页面没有完全加载，即没有执行任何包含或脚本。在加载时，JQM 解析第一个具有 class="page" 的 div 的子页面，提取 div 并将其添加到当前 DOM。请注意，子页面不能有多个“页面”，因为只会加载第一个页面。

要正确执行选项 (b)，您可以：

1.  包括所有 CSS、JS 并在主页中运行所有初始化脚本或

2.  在链接上指定“data-ajax=false”或“rel=external”。这迫使 JQM 完全重新加载链接/子页面，但是使用这种方法，您将失去流畅的过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:31:08.330

我过去使用的一种方法是拥有一个主页，该主页是加载到浏览器中的所有内容。

其余的“页面”只是加载到主页中的“内容”div 中的 HTML 块。显然会有一个初始“页面”，它是初始加载时主页默认加载的第一个 HTML 块，但剩余的“页面”会根据需要加载（例如，当用户登录时。单击链接， ETC。）。

我在主页中使用 JQuery .Load() 来降低每个“页面”的 HTML 块，并根据需要将它们加载到“内容”div 中。

我发现这非常方便，因为所有脚本和样式都可以驻留在每个 HTML 块中（就像对于完整的独立页面一样），而 JQuery .Load() 将负责脚本的所有运行和样式的应用。

在 MVC 方面，只有主页的视图包含完整的 HTML 页面元素，并且被构造为用作“页面”内容的“容器”。其余的视图将仅包含每个“页面”的相关内容，并被结构化以适当地适合“容器”。

# spring - 严重：javax.el.MethodNotFoundException：找不到方法：com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)

> ID：13653506
> 
> 赞同：0
> 
> 时间：2012-11-30T21:32:52.487
> 
> 标签：spring, hibernate, jsf

我对这个错误有疑问。我正在做关于 jsf、hibernate、spring 和 maven 的教程。

这是教程的链接。 [http://www.onlinetechvision.com/?p=566](http://www.onlinetechvision.com/?p=566)

这是我收到的错误消息。

```
Nov 30, 2012 2:16:56 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: Received 'javax.el.MethodNotFoundException' when invoking action listener '#{userMB.deleteUser(user.id)}' for component 'deleteUser'
Nov 30, 2012 2:16:56 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: javax.el.MethodNotFoundException: Method not found: com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)
    at org.apache.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:245)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:271)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:149)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIData.broadcast(UIData.java:911)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Nov 30, 2012 2:16:56 PM com.sun.faces.context.AjaxExceptionHandlerImpl log
SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt5:users:0, Message=Method not found: com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)
Nov 30, 2012 2:16:56 PM com.sun.faces.context.AjaxExceptionHandlerImpl log
SEVERE: Method not found: com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)
javax.faces.event.AbortProcessingException: Method not found: com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:178)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIData.broadcast(UIData.java:911)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:790)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1255)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:334)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: javax.el.MethodNotFoundException: Method not found: com.otv.managed.bean.UserManagedBean@50e0de15.deleteUser(java.lang.Integer)
    at org.apache.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:245)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:271)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:149)
    ... 26 more 
```

这是我的“UserManbedBean.java”文件。

```
package com.otv.managed.bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;

import org.springframework.dao.DataAccessException;

import com.otv.model.User;
import com.otv.user.service.IUserService;

/**
 * 
 * User Managed Bean
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */
@ManagedBean(name="userMB")
@RequestScoped
public class UserManagedBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final String SUCCESS = "success";
    private static final String ERROR   = "error";

    //Spring User Service is injected...
    @ManagedProperty(value="#{UserService}")
    IUserService userService;

    List<User> userList;

    private int id;
    private String name;
    private String surname;

    /**
     * Add User
     * 
     * @return String - Response Message
     */
    public String addUser() {
        try {
            User user = new User();
            user.setId(getId());
            user.setName(getName());
            user.setSurname(getSurname());
            getUserService().addUser(user);
            return SUCCESS;
        } catch (DataAccessException e) {
            e.printStackTrace();
        }   

        return ERROR;
    }

    /**
     * delete User
     * @param id
     */
    public void deleteUser(int id) {
        User user =(User)userService.getUserById(id);
        getUserService().deleteUser(user);
    }

    public String deleteAction(User user){
        userList.remove(user);
        return null;
    }
    /**
     * Update User
     * @param id
     */
    public void updateUser(int id){
        User user = userService.getUserById(id);
        user.setName(getName());
        user.setSurname(getSurname());
        getUserService().updateUser(user);
    }

    /**
     * Reset Fields
     * 
     */
    public void reset() {
        this.setId(0);
        this.setName("");
        this.setSurname("");
    }

    /**
     * Get User List
     * 
     * @return List - User List
     */
    public List<User> getUserList() {
        userList = new ArrayList<User>();
        userList.addAll(getUserService().getUsers());
        return userList;
    }

    /**
     * Get User Service
     * 
     * @return IUserService - User Service
     */
    public IUserService getUserService() {
        return userService;
    }

    /**
     * Set User Service
     * 
     * @param IUserService - User Service
     */
    public void setUserService(IUserService userService) {
        this.userService = userService;
    }

    /**
     * Set User List
     * 
     * @param List - User List
     */
    public void setUserList(List<User> userList) {
        this.userList = userList;
    }

    /**
     * Get User Id
     * 
     * @return int - User Id
     */
    public int getId() {
        return id;
    }

    /**
     * Set User Id
     * 
     * @param int - User Id
     */
    public void setId(int id) {
        this.id = id;
    }

    /**
     * Get User Name
     * 
     * @return String - User Name
     */
    public String getName() {
        return name;
    }

    /**
     * Set User Name
     * 
     * @param String - User Name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * Get User Surname
     * 
     * @return String - User Surname
     */
    public String getSurname() {
        return surname;
    }

    /**
     * Set User Surname
     * 
     * @param String - User Surname
     */
    public void setSurname(String surname) {
        this.surname = surname;
    }

} 
```

这是我的“success.xhtml”文件

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Welcome to OTV_JSF_Spring_Hibernate_Project</title>
</h:head>
<h:body>
    <h:form>
        <h:outputText value="USERs : "></h:outputText>
        <p:dataTable id="users" var="user" value="#{userMB.userList}" style="width: 10%">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="ID" />
                </f:facet>
                <h:outputText value="#{user.id}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Name" />
                </f:facet>
                <h:outputText value="#{user.name}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Surname" />
                </f:facet>
                <h:outputText value="#{user.surname}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Action" />
                </f:facet>
                <p:commandButton id="deleteUser" value="Delete" actionListener="#{userMB.deleteUser(user.id)}" action="#{userMB.deleteAction(user)}" /> 
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Action" />
                </f:facet>
                <p:commandButton id="updateUser" value="update" actionListener="#{userMB.updateUser(user.id)}" />   
            </p:column>

        </p:dataTable>
    </h:form>
</h:body>

</html> 
```

这是我的 UserService.java 文件

```
package com.otv.user.service;

import java.util.List;

import org.springframework.transaction.annotation.Transactional;

import com.otv.model.User;
import com.otv.user.dao.IUserDAO;

/**
 * 
 * User Service
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */
@Transactional(readOnly = true)
public class UserService implements IUserService {

    // UserDAO is injected...
    IUserDAO userDAO;

    /**
     * Add User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    @Override
    public void addUser(User user) {
        getUserDAO().addUser(user);
    }

    /**
     * Delete User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    @Override
    public void deleteUser(User user) {
        getUserDAO().deleteUser(user);
    }

    /**
     * Update User
     * 
     * @param  User user
     */
    @Transactional(readOnly = false)
    @Override
    public void updateUser(User user) {
        getUserDAO().updateUser(user);
    }

    /**
     * Get User
     * 
     * @param  int User Id
     */
    @Override
    public User getUserById(int id) {
        return getUserDAO().getUserById(id);
    }

    /**
     * Get User List
     * 
     */
    @Override
    public List<User> getUsers() {  
        return getUserDAO().getUsers();
    }

    /**
     * Get User DAO
     * 
     * @return IUserDAO - User DAO
     */
    public IUserDAO getUserDAO() {
        return userDAO;
    }

    /**
     * Set User DAO
     * 
     * @param IUserDAO - User DAO
     */
    public void setUserDAO(IUserDAO userDAO) {
        this.userDAO = userDAO;
    }

} 
```

这是我的 UserDAO.java 文件

```
package com.otv.user.dao;

import java.util.List;

import com.otv.model.User;

import org.hibernate.SessionFactory;

/**
 * 
 * User DAO
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */

public class UserDAO implements IUserDAO {

    private SessionFactory sessionFactory;

    /**
     * Get Hibernate Session Factory
     * 
     * @return SessionFactory - Hibernate Session Factory
     */
    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    /**
     * Set Hibernate Session Factory
     * 
     * @param SessionFactory - Hibernate Session Factory
     */
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    /**
     * Add User
     * 
     * @param  User user
     */
    @Override
    public void addUser(User user) {
        getSessionFactory().getCurrentSession().save(user);
    }

    /**
     * Delete User
     * 
     * @param  User user
     */
    @Override
    public void deleteUser(User user) {
        getSessionFactory().getCurrentSession().delete(user);
    }

    /**
     * Update User
     * 
     * @param  User user
     */
    @Override
    public void updateUser(User user) {
        getSessionFactory().getCurrentSession().update(user);
    }

    /**
     * Get User
     * 
     * @param  int User Id
     * @return User 
     */
    @Override
    public User getUserById(int id) {
        List list = getSessionFactory().getCurrentSession()
                                            .createQuery("from User where id=?")
                                            .setParameter(0, id).list();
        return (User)list.get(0);
    }

    /**
     * Get User List
     * 
     * @return List - User list
     */
    @Override
    public List<User> getUsers() {
        List list = getSessionFactory().getCurrentSession().createQuery("from User").list();
        return list;
    }

} 
```

感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:36:20.317

您需要在函数中替换`int`为。`Integer``public void deleteUser(int id)`

JSF 仅适用于对象，您不能使用原始类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-17T08:44:13.197

FORCE 类代理。Spring使用基于代理的aop，您的托管bean实现了一个接口，因此使用jdk动态代理而不是类代理。

要么删除接口实现（Serializable），导致 Spring 求助于 CGLIB，要么详细地强制 CGLIB 代理，声明：

```
<aop:config proxy-target-class="true" /> 
```

# php - 选择该选项后，未收到下拉菜单中的值

> ID：13653509
> 
> 赞同：0
> 
> 时间：2012-11-30T21:33:18.523
> 
> 标签：php, html, drop-down-menu

该程序开始于：

```
session_start();
$seq = 0;
if (isset($_POST['fname'])) {   
    echo $_POST['fname']."<br/>";
    if (isset($_POST['uid']) {
        echo $_POST['uid']."<br/>";
        if ($_POST['submit'] && $_POST['edupdel'] != "ABCD") {
            echo "postsubmit  = ".$_POST['submit']."<br/>";
            echo "edupdel = ".$_POST['edupdel']."<br/>";
            echo "past submit<br/>";

            $opt = $_REQUEST['edupdel'];
            echo "OPTION IS  = ".$opt;
        }   
    }   
}   
$fname  = $_POST['fname'];
$uid = $_POST['uid'];
$opt = $_POST['edupdel'];

echo $uid.$fname.$opt."<br/>";
echo "*******<br/>";
$seq = $seq + 1 ;
echo "SEQ # is = ".$seq."<br/>"; 
```

这个想法是：uid 和 fname 从第一页开始就被继承下来并且工作正常。我可以正确获得这些值。该程序使用：`<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">`

（GET 或 REQUEST 是考虑的选项，但到目前为止没有成功）。该程序有一个下拉菜单。第一个条目“ABCD”id 现在只是虚拟的，将来不应该使用。

```
Please select one of the options:
<select name="edupdel">
    <option value="ABCD">ABCD</option>
    <option value="edit">EDIT</option>
    <option value="update">UPDATE</option>
    <option value="delete">DELETE</option>
</select> 
```

提交是这样的：

```
<input type="submit" name="submit"  value="Submit" style="background-color:#FFFFFF" >
<input type="hidden" name="fname" value="<?php echo $_POST['fname']; ?>"> 
<input type="hidden" name="uid" value="<?php echo $_POST['uid']; ?>">
<input type="hidden" name="edupdel" value="<?php echo $_POST['edupdel']; ?>"> 
```

现在，出于我的无知，我不知道如何检索以下值：`<select name="edupdel">`

例如，当我从菜单中选择选项 EDIT 时，这不会显示。我什至不确定这是获取从下拉列表中选择的值的正确方法。

那么我期望什么：设置 uid、fname 和 selected 选项，以便我可以决定下一步。请记住，我是从 PHP 和整个 shebang 开始的，所以在这一点上，在论坛里看了几个小时后，我决定试一试，问论坛的人什么是编写我的代码的最佳方式需要或只是简单地指出我一些其他可能的选择。

```
Some debugging data I could get to so far according to the "echos"  above:
mary
john 
postsubmit = Submit
edupdel =
past submit
OPTION IS = johnmary ( I would expect EDIT or UPDATE or DELETE after the word mary)
*******
SEQ # is = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:43:00.300

看起来您在提交按钮之后有一个隐藏的输入字段，名称为`edupdel`。如果是这种情况，该输入值中的任何内容都将覆盖该`<select>`字段中选择的任何内容。

尝试删除该隐藏字段，或将其移动`<select>`到 HTML 中的字段上方，以便选择优先。

# grammar - 左分解语法和删除 epsilon 之间的关系

> ID：13653511
> 
> 赞同：0
> 
> 时间：2012-11-30T21:33:25.543
> 
> 标签：grammar, context-free-grammar

假设我将使用以下语法进行编译器

```
 S -> a | aB 
```

如果我对其执行左分解，它会像（e 是 epsilon）

```
 S -> aC
 C -> B | e 
```

然后我想删除 epsilon 最终就像

```
 S -> a | aC
 C -> B 
```

请注意，我似乎再次需要执行左分解，并且无限地执行左分解并来回移除 epsilon。难道我做错了什么 ？？

是否需要在编译器的语法上同时删除左分解和 epsilon？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:22:26.663

大多数时候，您不需要进行任何一种转换。事实上，对于某些文法，左分解会为 LALR(1) 解析器生成器产生移位减少冲突。

# extjs3 - 从可编辑网格中的存储中删除记录

> ID：13653512
> 
> 赞同：0
> 
> 时间：2012-11-30T21:33:39.373
> 
> 标签：extjs3

我使用来自 Array Store 的本地数据创建了一个可编辑的网格。现在我放了一个 actionColumn 来从商店中删除记录。但是删除没有发生，记录仍然存在。请在下面查看我的代码：-

```
 this.empdata = [
                [ 'Anea etet','andreeas@jhggf.com','active' ],
            [ 'Bharfdna ivasdsh','bfanas@dsgfsd.com','active' ],                    
            [ 'Crfg gfdgdtt', 'ffigh@dfsd.com', 'away' ],
            [ 'Gfdgdis Perron','geffgsp@fdhd.com', 'away' ]
       ];

    this.employee = new Ext.data.ArrayStore({
        autoSync: true,

        fields : [ {
            name : 'name'
        }, {
            name : 'email'
        }, {
            name : 'status'
        }],
        data : this.empdata
    });

    var cm = new Ext.grid.ColumnModel([{
        header: 'Name',
        dataIndex: 'name',
        flex: 1,
        editor: {
           allowBlank: false
        }
    }, {
        header: 'Email',
        dataIndex: 'email',
        flex: 1,
        editor: {
            allowBlank: false,
            vtype: 'email'
        }
    }, {
        header: 'Status',
        dataIndex: 'status', 
        editor: {
            allowBlank: false               
        }

    }, {
        xtype: 'actioncolumn',
        width: 50,
        items: [
            {
                icon   : 'src/images.jpg',             
                tooltip: 'Delete record',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("Delete " + rec.get('name'),function(btn,text){
                        if (btn == 'ok'){
                            grid.getStore().removeAt(rowIndex);
                            grid.getStore().sync();
                        }
                    })
                }
         }]
    }]);

    this.grid = new Ext.grid.EditorGridPanel({
        store: this.employee,
        cm: cm,
        xtype: 'editorgrid',
        title: 'Employee Data',
        clicksToEdit: 1,
        frame: true,
        stripeRows : true,
        width: 1000,
        height: 500,
        region: 'south',

        viewConfig : {
            forceFit : true,
            scrollOffset : 0,
        }                       
    });

    this.grid.on('validateedit', function(e) {

            if (e.field === 'status'){
                if(!((e.value === 'active')||(e.value === 'away')||(e.value === 'offline'))){
                    e.cancel = true;
                    e.record.data[e.field] = e.originalValue;
                }
            }
    });

    var win = {
            layout: {
                type: 'vbox',
                align: 'center',
                pack: 'top',
                padding: 30
            },
        items: [this.grid]          
    };

    Ext.apply(this, win); 
```

当我单击删除按钮时，会弹出一个要求确认的弹出窗口。当我单击“确定”时，它应该删除记录，但没有任何反应。请提出代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:37:37.047

您`alert`在您的处理程序中使用它只接受一个参数 - 消息。如果要确认，最好的方法是使用`Ext.Msg.confirm`. 例子：

```
handler: function(grid, rowIndex, colIndex) {
    var rec = grid.getStore().getAt(rowIndex);
    Ext.Msg.confirm(
        "Delete " + rec.get('name'),
        "Delete " + rec.get('name'),
        function(btn){
            if (btn == 'yes'){
                grid.getStore().removeAt(rowIndex);
                grid.getStore().sync();
            }
        }
    );
} 
```

# arrays - 在 Coldfusion 数组中使用 null

> ID：13653515
> 
> 赞同：4
> 
> 时间：2012-11-30T21:33:47.057
> 
> 标签：arrays, coldfusion, null, coldfusion-9

我正在创建一个数组并需要使用空值

```
<cfset addLinha[1] = qEspecialidades.especialidade>
<cfloop index="i" from="1" to="#numColumnsAntes#">
    <cfset arrayAppend(addLinha,null)>
</cfloop>
<cfset arrayAppend(addLinha,LSParseNumber(LSNumberFormat(AvgNota, "_.__")))>

<cfloop index="i" from="#numColumnsDepois#" to="#qEspecialidades.RecordCount#">
    <cfset arrayAppend(addLinha,null)>
</cfloop> 
```

我需要一个像这样的数组

```
 ["Especialidade",null,null,null,null,4.0,null,null,null] 
```

但我还没有找到如何附加`null`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T21:40:08.963

ColdFusion 本身没有空值。根据使用此变量的用途，以下一项或多项可能有用：

*   使用 javaNull：`<cfset javaNull = javaCast( "null", 0 ) />`
*   使用空格：`""`
*   使用空结构，即`{}`

Ben Nadel 对此也有[一些评论](http://www.bennadel.com/blog/1654-Learning-ColdFusion-9-IsNull-And-Working-With-NULL-Values.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:29:38.270

您可以通过增加数组的大小来“附加”一个空值，`arrayResize()`如下所示：

```
<cfset len = arrayLen(myArray)>
<cfset arrayResize(myArray, len+1)> 
```

# c++ - 除非同时构建，否则无法在 3d 地图中赋值

> ID：13653520
> 
> 赞同：1
> 
> 时间：2012-11-30T21:34:23.250
> 
> 标签：c++, class, stl, map, constructor

我正在尝试创建一个包含我创建的非 stl 类的 3 维地图。每当我尝试将实例化变量（我相信在堆栈中）分配给映射时，编译器都会失败。

如果我执行以下操作，它会起作用：

```
volume[x][y][z] = Chunk() 
```

但如果我执行：

```
Chunk c();
volume[x][y][z] = c; 
```

这是一个简短的示例：

```
#include <cstdlib>
#include <map>
#include <stdint.h>

using namespace std;

class Chunk {
public:
    Chunk();
    Chunk(const Chunk& orig);
    virtual ~Chunk();
};

Chunk::Chunk(){

}

Chunk::Chunk(const Chunk& orig) {
}

Chunk::~Chunk() {
}

/*
 *
 */
int main(int argc, char** argv) {
    map<uint32_t, map<uint32_t, map<uint32_t, Chunk > > > volume;
    int32_t width = 5, height = 5, depth = 5;
    for(uint32_t x = 0; x < width; x++){
        for(uint32_t y = 0; y < height; y++){
            for(uint32_t z = 0; y < depth; y++){
                Chunk c();
                volume[x][y][z] = c;
            }
        }
    }
    return 0;
} 
```

此示例给出以下编译错误：

```
g++    -c -g -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
main.cpp: In function ‘int main(int, char**)’:
main.cpp:41:35: error: no match for ‘operator=’ in ‘(&(& volume.std::map<_Key, _Tp, _Compare, _Alloc>::operator[] [with _Key = unsigned int, _Tp = std::map<unsigned int, std::map<unsigned int, Chunk> >, _Compare = std::less<unsigned int>, _Alloc = std::allocator<std::pair<const unsigned int, std::map<unsigned int, std::map<unsigned int, Chunk> > > >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = std::map<unsigned int, std::map<unsigned int, Chunk> >, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = unsigned int]((*(const key_type*)(& x))))->std::map<_Key, _Tp, _Compare, _Alloc>::operator[] [with _Key = unsigned int, _Tp = std::map<unsigned int, Chunk>, _Compare = std::less<unsigned int>, _Alloc = std::allocator<std::pair<const unsigned int, std::map<unsigned int, Chunk> > >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = std::map<unsigned int, Chunk>, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = unsigned int]((*(const key_type*)(& y))))->std::map<_Key, _Tp, _Compare, _Alloc>::operator[] [with _Key = unsigned int, _Tp = Chunk, _Compare = std::less<unsigned int>, _Alloc = std::allocator<std::pair<const unsigned int, Chunk> >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = Chunk, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = unsigned int]((*(const key_type*)(& z))) = c’
main.cpp:41:35: note: candidate is:
main.cpp:14:7: note: Chunk& Chunk::operator=(const Chunk&)
main.cpp:14:7: note:   no known conversion for argument 1 from ‘Chunk()’ to ‘const Chunk&’
make[2]: *** [build/Debug/GNU-Linux-x86/main.o] Error 1
make[2]: Leaving directory `/home/sean/NetBeansProjects/test3dmap'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/home/sean/NetBeansProjects/test3dmap'
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 213ms) 
```

我怀疑我可能不得不创建一个如下所示的 3d 地图：

```
map<uint32_t, map<uint32_t, map<uint32_t, Chunk* > > > volume; 
```

但是我将不得不在我自己的代码中执行内存管理，这是我想避免的。如何使显示的地图示例正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:39:30.150

`Chunk c();`是一个函数声明。试试`Chunk c;`。

PS 另请参阅[http://en.wikipedia.org/wiki/Most_vexing_parse](http://en.wikipedia.org/wiki/Most_vexing_parse)（正如乍得在上面链接中的回答中指出的那样，这并不完全相同，但也很高兴知道）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:42:23.700

请参阅 C++ 常见问题解答。使用`()`比更好地开发矩阵`[]`。
这是链接：[C++ 常见问题解答：矩阵运算符重载](http://www.parashift.com/c++-faq/matrix-subscript-op.html)

# php - Magento 在 wamp server 5.4 , 32bit 中不工作 - 显示内部服务器错误

> ID：13653523
> 
> 赞同：0
> 
> 时间：2012-11-30T21:34:38.710
> 
> 标签：php, magento, wamp

我试图在 WAMP 服务器 5.4 32 位中安装 magento
但每次它只显示 500 内部服务器错误
我跟踪代码一些代码并发现错误
`Deprecated: Function get_magic_quotes_gpc() is deprecated in C:\wamp\www\magento\app\code\core\Mage\Core\functions.php on line 32`

Magento 在 32 位 wamp 服务器上的 5.3 版本上完美运行
但是如何用 wamp 5.4 解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:20:25.520

我认为弃用消息不是问题。但是，当您重新配置 php.ini 并禁用它时，它可能会更好。

```
error_reporting(E_ALL & ~E_DEPRECATED|E_NOTICE) 
```

您应该禁用通知仅用于测试。

**[我用EasyPHP](http://www.easyphp.org/)**和 PHP 5.4.8运行 Magento，没有任何问题。我在使用**WAMP**时遇到了一些问题，因为 PHP 版本有一些错误，尤其是一些扩展非常错误，我不知道为什么。所以我改为使用 WAMP 并且运行良好的 EasyPHP。

也许你应该下载一个法国版的 Magento 并用你的网络服务器测试它。

但最后你的问题可能有很多解决方案。可能是您的文件结尾有错误的行，或者您的**.htaccess**有语法错误，并且您的网络服务器给出了消息。内部服务器错误很难解决。

# android - 用相机拍照时如何找到getThumbnail的origID。TakePicture

> ID：13653526
> 
> 赞同：2
> 
> 时间：2012-11-30T21:34:50.693
> 
> 标签：android, camera, thumbnails

对于 getThumbnail，android 文档有：

> public static Bitmap getThumbnail (ContentResolver cr, long origId, long groupId, int kind, BitmapFactory.Options options)

使用 Camera.TakePicture 拍照时，我完全不知道如何获取 origId（要执行 getThumbnail 的原始图像的 ID）。

基于我读过的各种其他问题，我目前的尝试是：

```
String[] projection = { MediaStore.Images.ImageColumns._ID, MediaStore.Images.ImageColumns.DATA };
    String sort = MediaStore.Images.ImageColumns._ID + " DESC";
    Log.d("getting IDs:",sort);
    Cursor myCursor = managedQuery(imagesUri, projection, null, null, sort);
    myCursor.moveToFirst();
    thumbBitmap = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns._ID)), MediaStore.Images.Thumbnails.MINI_KIND, null ); 
```

但是，我的日志正在输出应该是实际 ID 的字符串“_ID”，然后它在我尝试创建 myCursor 的行上给了我一个空指针异常。

我还阅读了其他人的类似问题的答案，即 SD 卡上的图像没有*ID*，在这种情况下，我猜 origID 实际上是一个 URI，而文档只是搞砸了？我非常困惑，非常欢迎任何解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:00:56.017

我最终无法使用 getThumbnail，因为我找不到任何有效的方法来成功使用图像位置的路径，并且（至少当时，我相信已经提交了报告）它有问题设备未将其缩略图存储在预期位置。

我对此的解决方案最终成为我希望可以避免的，编写我自己的小缩略图生成器，而不是使用 Android 的 getThumbnail。

```
public class CreateThumbnail extends Activity {
    Bitmap imageBitmap;
    public Bitmap notTheBestThumbnail(String file) {
        byte[] imageData = null;
        try     
        {

            final int THUMBNAIL_SIZE = 95;

            FileInputStream fis = new FileInputStream(file); //file is the path to the image-to-be-thumbnailed.
            imageBitmap = BitmapFactory.decodeStream(fis);
            imageBitmap = Bitmap.createScaledBitmap(imageBitmap, THUMBNAIL_SIZE, THUMBNAIL_SIZE, false);

            ByteArrayOutputStream baos = new ByteArrayOutputStream();  
            imageBitmap.compress(Bitmap.CompressFormat.JPEG, 10, baos); //What image format and level of compression to use.
            imageData = baos.toByteArray();

        }
        catch(Exception ex) {
            Log.e("Something did not work", "True");
        }
        return imageBitmap;
    }   
} 
```

我使用这样的类：

```
CreateThumbnail thumb = new CreateThumbnail();
thumb.notTheBestThumbnail(Environment.getExternalStorageDirectory() + "/exampleDir" + "/" + exampleVar  + "/example_img.jpg");
Bitmap mBitmap = thumb.imageBitmap; //Assigns the thumbnail to a bitmap variable, for manipulation. 
```

虽然我实际上并没有弄清楚如何获取 ID，但希望这将帮助任何面临与 getThumbnail 类似问题的人。

# php - 如何在 mysql 的整个数据库表中找到电子邮件地址的存在

> ID：13653527
> 
> 赞同：0
> 
> 时间：2012-11-30T21:34:58.743
> 
> 标签：php, mysql, sql, email

我有 1GB 的 mysql 数据库。这是我的公司数据库，我必须重构整个站点和数据库。

我已经更改了用户表中的电子邮件地址，但仍有一些表中的电子邮件地址以文本形式存储在某些字段（如 html 数据）中，但我不知道

有没有办法在所有数据库表中找到电子邮件模式并只替换那部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:40:34.800

如果您想查找*可能*是电子邮件地址的任何内容，请查看`RLIKE`运算符，以便您可以使用正则表达式`\b\S+\@\S+\.\w+\b`来查找它们。`mysqldump`扫描快照可能比扫描数据库本身更快、更方便。

# iphone - 用户拔下耳机时是否有通知？

> ID：13653529
> 
> 赞同：1
> 
> 时间：2012-11-30T21:35:04.670
> 
> 标签：iphone, ios, core-audio, audio-route

我记得关键字音频路由更改并相信有一个通知。拦截用户拔下耳机或插入耳机的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:38:17.133

您想阅读[这段 Apple 文档](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingRouteChanges/HandlingRouteChanges.html)。它不是通知（如 send by `NSNotificationCenter`），但它会通知音频路由更改。

# flash - Flash 中的多播 Flash 播放器弹出窗口

> ID：13653530
> 
> 赞同：1
> 
> 时间：2012-11-30T21:35:06.403
> 
> 标签：flash, multicast

我创建了一个 Flash 多播播放器。当用户第一次打开它时，它会显示此警报。很多人没有想法，可能会感到困惑。有什么办法可以避免这个弹出窗口？或者有什么方法可以在显示播放器之前在我自己的 gui 中显示此警报，以免人们感到困惑。

我将非常感谢您的帮助。

![在此处输入图像描述](../Images/59be51f3d17a2e14ddc24534fd3504a5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:37:30.500

不。我建议显示一个指令屏幕，包括弹出对话框图像，这样他们就知道会发生什么，并指导他们做什么。

# haskell - 如何使用更高等级（rank-N）类型多态性来表达存在类型？

> ID：13653532
> 
> 赞同：19
> 
> 时间：2012-11-30T21:35:07.993
> 
> 标签：haskell, functional-programming, existential-type, higher-rank-types

我们习惯于为多态函数提供普遍量化的类型。存在量化类型的使用频率要低得多。我们如何使用通用类型量词来表达存在量化类型？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-30T23:27:53.280

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-30T21:35:07.993

我在[Jean-Yves Girard、Yves Lafont 和 Paul Taylor 的 Proofs and Types](http://www.paultaylor.eu/stable/Proofs+Types.html)中找到了答案。

想象一下，我们有一些单参数类型并构造了一个适用于某些:`t :: * -> *`的存在类型。我们可以用这样的类型做什么？为了从中计算出一些东西，我们需要一个可以接受任意值的函数，这意味着一个类型的函数。知道了这一点，我们可以将存在类型简单地编码为一个函数，该函数接受 type 的函数，为它们提供存在值并返回结果：`t a``a``exists a. t a``t a``a``forall a. t a -> b``forall a. t a -> b``b`

```
{-# LANGUAGE RankNTypes #-}

newtype Exists t = Exists (forall b. (forall a. t a -> b) -> b) 
```

创造存在价值现在很容易：

```
exists :: t a -> Exists t
exists x = Exists (\f -> f x) 
```

如果我们想解压存在值，我们只需将其内容应用于产生结果的函数：

```
unexists :: (forall a. t a -> b) -> Exists t -> b
unexists f (Exists e) = e f 
```

然而，纯粹存在的类型几乎没有用处。我们不能用我们一无所知的价值做任何合理的事情。更多时候，我们需要具有类型类约束的存在类型。过程是一样的，我们只是为`a`. 例如：

```
newtype ExistsShow t = ExistsShow (forall b. (forall a. Show a => t a -> b) -> b)

existsShow :: Show a => t a -> ExistsShow t
existsShow x = ExistsShow (\f -> f x)

unexistsShow :: (forall a. Show a => t a -> b) -> ExistsShow t -> b
unexistsShow f (ExistsShow e) = e f 
```

注意：在函数式程序中使用存在量化通常被认为是[代码气味](https://en.wikipedia.org/wiki/Code_smell)。它可以表明我们还没有从 OO 思维中解放出来。

# php - filter_var 的替代品

> ID：13653537
> 
> 赞同：0
> 
> 时间：2012-11-30T21:35:36.457
> 
> 标签：php

> **可能重复：**
> [php 5.3.8 中的 filter_var](https://stackoverflow.com/questions/13648117/filter-var-in-php-5-3-8)

我最近升级到 php 5.3.8，但在验证用户使用“filter_var”输入注册表单的电子邮件地址时遇到问题。我想确保在输入有效的电子邮件地址时将其发布到数据库，如果由于某种原因电子邮件地址的格式不正确，我会通知用户输入有效的电子邮件地址。所以我检查了 php.net，结果发现 php 5.3.8 中不存在 filter_var 有谁知道 php 5.3.8 中 filter_var 的替代方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:37:51.840

如果您只关心提供的电子邮件地址在语法上是否有效，例如符合 RFC 2822，那么此正则表达式将提供：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:38:24.870

> # 过滤器变量
> 
> （PHP 5 >= 5.2.0）
> 
> filter_var — 使用指定过滤器过滤变量

文档说它在 5.3.8 中存在得很好，所以你应该可以使用它......

# python - 在python中将unicode gif写入文件

> ID：13653540
> 
> 赞同：1
> 
> 时间：2012-11-30T21:36:01.020
> 
> 标签：python, image

我有一个 Unicode 格式的 GIF 文件（或任何图像格式）：

```
>>> data
u'GIF89a,\x000\x00\ufffd\ufffd\x00\x00\x00\x00\ufffd\ufffd\ufff... 
```

我想把它写到文件中：

```
>>> f = open('file.gif', 'wb')
>>> f.write(data) 
```

但我收到一个错误：

```
UnicodeEncodeError at /image
'ascii' codec can't encode characters in position 10-11: ordinal not in range(128) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:42:45.463

您必须将字符串显式编码为 un​​icode

```
f.write(data.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:42:53.513

试试这个：

```
utf8data = data.encode('UTF-8')
open('file.gif', 'w').write(utf8data) 
```

# php - Doctrine2 原生查询多对多

> ID：13653546
> 
> 赞同：5
> 
> 时间：2012-11-30T21:36:33.933
> 
> 标签：php, mysql, symfony, doctrine-orm

我已阅读有关本机 sql 查询的 Doctrine2 文档。它没有谈论由多对多关系加入的实体。我不知道如何处理，任何想法或示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T04:59:48.933

您只需手动将连接表添加到 sql 中。扩展 Doctrine 手册第 14 章中的示例：

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult('User', 'u');
$rsm->addFieldResult('u', 'id', 'id');
$rsm->addFieldResult('u', 'name', 'name');
$rsm->addJoinedEntityResult('Address' , 'a', 'u', 'address');
$rsm->addFieldResult('a', 'address_id', 'id');
$rsm->addFieldResult('a', 'street', 'street');
$rsm->addFieldResult('a', 'city', 'city');

$sql = 'SELECT u.id, u.name, a.id AS address_id, a.street, a.city FROM users u ' .
       'INNER JOIN address__user j ON u.id = j.user '.
       'INNER JOIN address a ON a.id = j.address '.
       'WHERE u.name = ?';
$query = $this->_em->createNativeQuery($sql, $rsm);
$query->setParameter(1, 'romanb');

$users = $query->getResult(); 
```

此示例假定您的连接表具有字段地址和用户作为其键。

# eclipse - Mozilla 内部 Web 浏览器在 Eclipse 上不可用

> ID：13653547
> 
> 赞同：0
> 
> 时间：2012-11-30T21:36:37.470
> 
> 标签：eclipse, firefox, ubuntu-12.04

我有下面的配置，

```
Ubuntu 12.04.1
Eclipse 3.7.2
JDK 1.6.0_37
Firefox 17.0 for Ubuntu - 1.0 
```

Eclipse 上出现“内部浏览器不可用”，

```
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os linux -ws gtk -arch x86 -product org.eclipse.epp.package.jee.product

Internal browser is not available: 
No more handles [Unknown Mozilla path (MOZILLA_FIVE_HOME not set)] 
```

“使用内部网络浏览器”选项从“首选项->常规->网络浏览器”中永久禁用（灰显），

![浏览器](../Images/d812c42a94d84a8007fb7d8cabf1c484.png)

有什么要带回来的提示`Mozilla internal web browser`吗？

**@编辑**

改用 webkit1.0 作为[解决方法](https://stackoverflow.com/questions/11354115/eclipse-juno-internal-web-browser-unavailable-ubuntu)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T21:59:27.097

在使用 Eclipse 的 Ubuntu 13.04 上它自动工作，我不确定我缺少哪个 webkit，所以我安装了所有似乎相关的东西，如果有人指出它是哪个，请评论，

问候，

加布里埃尔·麦地那

```
aptitude install libqt4-webkit libqt5webkit5 libqtscript4-webkit libqtwebkit4 libswt-webkit-gtk-3-jni libwebkitgtk-1.0-0 libwebkitgtk-3.0-0 
```

# jquery - DOM 更新后使用可拖动

> ID：13653549
> 
> 赞同：2
> 
> 时间：2012-11-30T21:36:46.693
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

当前的 DOM 是这样的：

```
<div id="image_list">

</div> 
```

事件发生后，这将更新为：

```
<div id="image_list">
   <img class="dragable-img" src="image1.png" />
   <img class="dragable-img" src="image2.png" />
   <img class="dragable-img" src="image3.png" />
   <img class="dragable-img" src="image4.png" />
 </div> 
```

现在页面中有一个应该处理拖动的js

```
$('.dragable-img').draggable({
        revert: true,
            handle: 'img',
            containment: "#content-body", 
            scroll: false
 }).disableSelection(); 
```

**显然，它在更新 DOM 之前可以工作，而在更新 DOM 之后就不能工作。那么，我在这里缺少**什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:11:14.843

尝试使用[ajaxComplete()](http://api.jquery.com/ajaxComplete/)函数 - 它会在页面上的每个 ajax 调用后触发

```
$('#image_list').ajaxComplete(function(){
    $('.dragable-img',this).draggable({
        revert: true,
        handle: 'img',
        containment: "#content-body", 
        scroll: false
    }).disableSelection();
)}; 
```

更好的方法是在 $.ajax 成功函数中再次调用 draggable

```
$.ajax({
    url:yoururl
    success: function(){
       //do what you need.. update/add to your dom 
       //then call draggable on your elements
       $('.dragable-img').draggable({
           revert: true,
           handle: 'img',
           containment: "#content-body", 
           scroll: false
       }).disableSelection();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:41:52.780

检查这是否有效..

```
$('#image_list').on('draggable', '.dragable-img' , function(){
   return {
            revert: true,
            handle: 'img',
            containment: "#content-body", 
            scroll: false
   }

}).disableSelection(); 
```

如果这不起作用..`.draggable()`在元素插入**DOM**之后尝试使用。

# codeigniter - 在 CodeIgniter Active Record 的 Delete 方法中使用 OR

> ID：13653551
> 
> 赞同：0
> 
> 时间：2012-11-30T21:36:49.987
> 
> 标签：codeigniter, activerecord

我需要能够将以下内容转换为 Ci 的活动记录删除方法，但我不知道如何在删除语句中使用 OR。你能告诉我如何正确地做到这一点吗？

```
$this->db->query("DELETE FROM friend WHERE userid_friends = '{$userid}' AND friendId_friends = '{$targetedUserId}' OR userid_friends = '{$targetedUserId}' AND friendId_friends = '{$userid}' "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:24:02.187

我猜你在尝试这个：

```
$this->db->query("DELETE FROM friend WHERE 
   ( userid_friends = '{$userid}' AND friendId_friends = '{$targetedUserId}')  OR 
   ( userid_friends = '{$targetedUserId}' AND friendId_friends = '{$userid}')  "); 
```

（注意两个 AND 子句的附加括号）

但实际上你没有使用 CI 的“DELETE”方法只是一个查询。

使用活动记录删除将类似于：

```
$this->db->where("userid_friends = '{$userid}' AND friendId_friends = '{$targetedUserId}'");
$this->db->or_where("userid_friends = '{$targetedUserId}' AND friendId_friends = '{$userid}'");
$this->db->delete('friend'); 
```

对于复杂查询的调试，我建议您使用

```
echo $this->db->last_query(); 
```

因为它准确地向您展示了活动记录方法如何呈现最终查询。

# javascript - 可滚动的 div 操作内容后无法滚动？

> ID：13653553
> 
> 赞同：0
> 
> 时间：2012-11-30T21:37:10.457
> 
> 标签：javascript, html, ios, css

我有一个 iOS 6 PhoneGap 应用程序，其 div 具有固定的高度和宽度，以及用于可滚动内容的溢出-y。当应用程序加载并且运行良好时，我正在使用内容动态填充此列表。

但是，当我通过清空 div 的内容并用新的列表项替换它来再次操作 div 时，我无法再垂直滚动。就好像溢出-y 设置为“隐藏”而不是“滚动”。

有什么建议么？

# javascript - 使用日期作为 MongoDB 中的 ID？

> ID：13653557
> 
> 赞同：0
> 
> 时间：2012-11-30T21:37:47.057
> 
> 标签：javascript, mongodb, logging, mongoose

打算在 Heroku/Node/Express/Mongodb Web 应用程序中记录 API（用户/路由/参数/时间）的使用，以允许进行各种分析（谁/什么/何时/多久）。我能想到的一种方法是将它们推送到 MongoDB。

Mongo 会自动生成一个 ID，我看到可以[从自动生成的 ID 中提取创建的时间](https://stackoverflow.com/questions/8021802/get-date-and-time-from-mongodb-document-id-field)，但是由于我想要的只是时间戳，现在我想知道我是否可以使用日期**作为**ID？

这似乎可行，并且时间戳似乎足够细化（`"_id" : ISODate("2012-11-30T21:18:24.484Z")`），它们将是唯一的。这可以吗，或者只是在事情开始时要求“ID不是唯一的”错误？

```
var apilogSchema = new mongoose.Schema({            
  _id: {type: Date, default: Date.now},
  userId: {type: mongoose.Schema.Types.ObjectId, required: false},
  route: {type: String, required: false}
}) 
```

[从 mongodb 文档 _id 字段获取日期和时间](https://stackoverflow.com/questions/8021802/get-date-and-time-from-mongodb-document-id-field)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:53:07.597

约翰尼所说的，不推荐。特别是当您使用它来记录用户操作时。（有可能 2 个用户在同一毫秒执行一个操作，现在您的 id 不再是唯一的）

如果您在 node.js 上并希望您的 id 包含时间戳，请查看[node-uuid](https://github.com/broofa/node-uuid/)

# php - br 标签的 str_replace 不起作用

> ID：13653559
> 
> 赞同：3
> 
> 时间：2012-11-30T21:37:58.600
> 
> 标签：php, str-replace

我在用户提交的表单上有一个 textarea 字段，它被保存到 MySQL 数据库中。当我检索该值时，我正在运行 nl2br 将换行符转换为 br 标记。然后我使用 str_replace 将双 br 替换为 p 标签。问题是没有任何东西被替换。我一遍又一遍地看着这个，只是无法弄清楚可能出了什么问题。

这是 HTML 输出：

```
Windows XP Home / Professional
<br />(32 and 64 bit)
<br />
<br />Test Operating System 2
<br />(32 and 64 bit)
<br />
<br />Test Operating System 3
<br />(64 bit) 
```

这是我的PHP：

```
$FORMATTED = str_replace("<br /><br />", "</p><p>", $SUPPORTED_PLATFORMS); 
```

$FORMATTED 的输出看起来与上面的 HTML 输出完全相同。我本质上想用 p 标签替换所有背靠背的 br 标签，并保留所有单个 br 标签的原样。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:57:01.883

问题是，您正在尝试替换`<br /><br />`字符串，但该字符串不在您的源代码中。有`<br />\n<br />`或`<br />\r\n<br />`

# c# - SqlParameterCollection 只接受非空 SqlParameter 类型对象，不接受 DBNull 对象

> ID：13653564
> 
> 赞同：12
> 
> 时间：2012-11-30T21:38:29.897
> 
> 标签：c#, sql, ado.net, sqlparameter

当我将 SQL 参数添加`p`到集合中时，我会收到`InvalidCastException`来自帖子标题的消息。

`parentId`是一个可以为空的整数和数据库中的一个可以为空的整数。

为什么会出现此异常，我该如何解决？

我不使用存储过程，并且我已经阅读了类似的线程，但它们对我没有帮助。

```
var p = new SqlParameter("ParentId", SqlDbType.Int).Value = parentId ?? (object) DBNull.Value;
cmd.Parameters.Add(p); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-30T21:41:58.353

你没有添加你的`new SqlParameter`. `p`是 的结果`new SqlParameter("ParentId", SqlDbType.Int).Value = parentId ?? (object) DBNull.Value`。换句话说，`p`它本身就是`DBNull.Value`。

将语句一分为二，如下所示：

```
var p = new SqlParameter("ParentId", SqlDbType.Int);
p.Value = parentId ?? (object) DBNull.Value;
cmd.Parameters.Add(p); 
```

或者，

```
var p = new SqlParameter("ParentId", SqlDbType.Int) { Value = parentId ?? (object) DBNull.Value };
cmd.Parameters.Add(p); 
```

要么确保`p`是参数，而不是参数的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-30T21:42:30.053

你需要使用：

```
System.Data.SqlTypes.SqlInt32.Null 
```

# ms-access - MS Access 2007 VBA FSO.DeleteFile 错误 70 权限被拒绝

> ID：13653566
> 
> 赞同：2
> 
> 时间：2012-11-30T21:38:35.330
> 
> 标签：ms-access, vba, ms-access-2007

当我尝试使用 FSO.DeleteFile 删除文件时，我收到“错误 70 权限被拒绝”。当我尝试使用 Kill 命令时，我收到“错误 75 路径/文件访问错误”。我对该文件夹具有读/写权限，尽管它位于网络驱动器而不是本地驱动器上。

这是我的代码：

```
Private Sub DeleteFileButton_Click()
On Error GoTo Err_DeleteFileButton_Click

    Dim FileLocation As String
    Dim strSQL As String
    FileLocation = DLookup("AttachmentLink", "dbo_tbl208Attachments", "ATID = " & Me.lstFiles.Column(1))
    strSQL = "DELETE FROM dbo_tbl208Attachments WHERE ATID = " & Me.lstFiles.Column(1)
    With New Scripting.FileSystemObject
        .DeleteFile FileLocation
End With
    'Kill FileLocation
    CurrentDb.Execute strSQL, dbFailOnError
    MsgBox "File has been deleted"

Exit_DeleteFileButton_Click:
    Exit Sub

Err_DeleteFileButton_Click:
        MsgBox Err.Number & " - " & Err.Description
        Resume Exit_DeleteFileButton_Click
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-22T13:13:09.043

我以前遇到过这个。我试图删除的文件被隐藏了。如果不先取消隐藏，您无法以编程方式删除隐藏文件。在终止文件之前尝试将此子添加到您的代码中。

```
Sub unhideFile(filename as string)
    If Len(Dir$(filename, vbHidden))>0 then
        SetAttr filename, vbNormal
    End If
End Sub 
```

# parameters - 使用多个参数调用 Apache Camel RMI 端点调用方法

> ID：13653568
> 
> 赞同：3
> 
> 时间：2012-11-30T21:38:49.470
> 
> 标签：parameters, rmi, apache-camel, endpoint

我可以调用具有多个参数的 Apache Camel RMI 端点方法吗？

我调用的方法签名是：

```
public ReturnedVo methodSignature(String parm1, byte[] parm2)

Camel Route:
    from("timer:myTimer?period=5000".routeId("TestRoute").process(new Processor() {
       public void process(Exchange exchange) throws Exception{
          exchange.getOut().setBody(???????);
       }
    }).to (uri) 
```

在哪里`uri="rmi://serviceLocation?method=methodSignature"`

当方法具有单个参数时，我能够使用类似的路由从同一服务调用不同的方法。我正在使用对象的实例设置消息正文：`exchange.getOut().setBody(instanceOfObject)`。

我调用的服务是 Weblogic 8.1 上的远程 EJB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:06:32.363

回答我自己的问题。这是我为解决该问题所做的工作。

1) 对 uri 进行了更改：uri="rmi://serviceLocation?
`method=methodSignature&multiParameterArray=true`

2）创建Object数组来存储要调用的方法的参数：

对象 [] 主体 = 新对象 [] {"parm1", 新字节 [11]};

3) 更改骆驼路线以使用 Object [] 主体：

```
from("timer:myTimer?period=5000").
   routeId("TestRoute").
   process(new Processor() { 
       public void process(Exchange exchange) throws Exception{ 
           exchange.getOut().setBody(body); 
       } 
   }).
   to (uri) 
```

请注意，从 Camel 2.9 开始有不同的解决方案。这是链接 [http://camel.465427.n5.nabble.com/bean-ejb-etc-how-to-set-parameters-td4375679.html](http://camel.465427.n5.nabble.com/bean-ejb-etc-how-to-set-parameters-td4375679.html)

# ruby-on-rails - 安装rails ubuntu 12.10时出错

> ID：13653570
> 
> 赞同：0
> 
> 时间：2012-11-30T21:38:55.837
> 
> 标签：ruby-on-rails, ubuntu

> **可能重复：**
> [ruby on rails 安装 JSON ubuntu 错误](https://stackoverflow.com/questions/13652788/ruby-on-rails-installing-json-ubuntu-error)

当我尝试在 ubuntu 上安装 rails 时出现此错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file --  mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:1:in `<main>'

Gem files will remain installed in /var/lib/gems/1.9.1/gems/json-1.7.5 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

我用rvm安装。我不知道为什么它一直在发生

# javascript - Extjs 组合框视口

> ID：13653572
> 
> 赞同：0
> 
> 时间：2012-11-30T21:39:04.353
> 
> 标签：javascript, model-view-controller, extjs4

我在从视口加载组合框时遇到问题。由于某种原因，数据没有在组合框中呈现。有人可以帮忙吗？我正在使用 v 4.1 和 mvc 方法。

```
Ext.define('AM.view.Viewport', {
extend: 'Ext.container.Viewport',
layout: 'absolute',
items: [
    {
       xtype: 'combobox',
       fieldLabel: 'Stacker',
       region: 'center',
       store: Ext.create('Ext.data.Store', {
       fields: ['stk'],
       data: [
              {'stk': 'STK1'}, 
              {'stk': 'STK2'}
             ]
    }),
       queryMode: 'local',
       width: 200,
       x: 900,
       y: 70
    },
    {
        xtype: 'inventorylist',
        width: 600,
        height: 400,
        x: 25,
        y: 140
    },
    {
      xtype: 'stackerlist',  
      width: 600,
      height: 400,
      x: 725,
      y:140
    } 
```

] });

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:02:37.073

您需要为组合指定 displayField 和 valueField。

# java - Andengine 将位图附加到场景

> ID：13653575
> 
> 赞同：1
> 
> 时间：2012-11-30T21:39:11.027
> 
> 标签：java, android, bitmap, andengine, game-engine

我正在开发一个使用 Facebook 登录的游戏。我遇到的问题是当我下载图像时它是位图，我不知道如何在场景上显示位图。

我对此很陌生，希望有人可以帮助我！

```
/**
 * The actual AsyncTask that will asynchronously download the image.
 */
class ProfileImageDownloaderTask extends AsyncTask<String, Void, Bitmap> {
    private String url;
    private Sprite sprite;

    public ProfileImageDownloaderTask(Sprite sprite) {
        this.sprite = sprite;
    }

    /**
     * Actual download method.
     */
    @Override
    protected Bitmap doInBackground(String... params) {
        url = params[0];
        return downloadImage(url);
    }

    /**
     * Once the image is downloaded, do something with it
     */
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        saveImageToInternalStorage(bitmap);
    }
}

public Bitmap downloadImage(String url) {
    Bitmap image = null;
    try {
        InputStream in = new java.net.URL(url).openStream();
        image = BitmapFactory.decodeStream(in);
    } catch (Exception e) {
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    }
    return image;
} 
```

希望我能得到一些答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:07:45.497

[这](https://github.com/edbartley/AndEngine---Texture-Source-From-Bitmap/blob/master/source.java)应该有效。

我看到您正在保存图像 ( `saveImageToInternalStorage(bitmap);`)。因此，如果我给您的第一个选项不起作用，您可以改用 AndEngine 的官方类：[FileBitmapTextureAtlasSource](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/opengl/texture/atlas/bitmap/source/FileBitmapTextureAtlasSource.java)。

# java - 无法解决与Java线程相关的教科书示例

> ID：13653576
> 
> 赞同：3
> 
> 时间：2012-11-30T21:39:11.843
> 
> 标签：java, multithreading, concurrency, thread-safety, deadlock

我正在尝试在 Java 中解决以下问题：

> 有一个酒吧，吸烟和不吸烟的顾客都可以去。酒吧为顾客提供的座位数量有限。吸烟和不吸烟的顾客不能同时出现在酒吧里。每个顾客都会花一些时间去酒吧，然后进入，在酒吧里呆一段时间，最后离开，腾出座位让其他等待进入的顾客。吸烟的顾客离开酒吧后，需要更新里面的空气这样不吸烟的顾客就可以来了。
> 
> 使用 Java 中的线程同步方法创建此问题的简单模拟，并确保不会发生死锁。

我能想出的是以下代码。我有一个问题 -**如何实现需要在刷新空气所需的时间内锁定酒吧的条件？**

这是代码：

```
class Bar {
    int maxP;
    int curP;
    String state;

    public Bar(int maxP) {
        this.maxP = maxP;
        curP = 0;
        state = "none";
    }
    public synchronized void enterBar(Customer customer) {
        if(state == "none") {
            state = customer.smokingStatus;
        }
        while((curP == maxP) || state != customer.smokingStatus) {
            System.out.println(customer.name+" " + customer.smokingStatus + " is waiting to enter the bar. ");
            try {
                wait();
                if(curP == 0 && state == "none") {
                    state = customer.smokingStatus;
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        curP++;
        System.out.println(customer.name +" "+ customer.smokingStatus + " enters the bar and relaxes. ");

    }
    public synchronized void leaveBar(Customer customer) {
        curP--;
        if(curP == 0) {
                 state = "none";
             }
        System.out.println(customer.name +" " + customer.smokingStatus + " stops relaxing and leaves the bar.");
        notifyAll();
    }
} 
```

然后类客户：

```
class Customer extends Thread {
    String name;
    String smokingStatus;
    Bar bar;

    public Customer(String name, String smoker, Bar bar) {
        this.name = name;
        this.smokingStatus = smoker;
        this.bar = bar;
    }
    public void run() {
        System.out.println(this.name + " is traveling to the bar.");
        try {
            sleep((int)(Math.random()*1000));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        bar.enterBar(this);
        try {
            sleep((int)(Math.random()*5000));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        if (this.smokingStatus.equals("smoker")){
            System.out.println("After I've been here the bar's air needs some refreshing.");
            try {
                sleep((int)(Math.random()*2000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        bar.leaveBar(this);
    }
} 
```

最后是 main() 方法：

```
class MainApp {
    public static void main(String args[]) {
        Bar s = new Bar(5);
        for(int i = 0; i < 10; i++) {
            String smokingStatus;
            smokingStatus = Math.random() > 0.5 ? "smoker" : "nonsmoker";
            (new Customer("Customer " + i, smokingStatus, s)).start();
        }
    }
} 
```

如何锁定酒吧以清新空气？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:20:38.347

我创建了 Magee & Kramer 关于桥上红色和蓝色汽车的示例的修改版本。请参阅此处（[http://flylib.com/books/en/2.752.1.48/1/](http://flylib.com/books/en/2.752.1.48/1/)）。我添加了 TIME_TO_CLEAR_AIR 和 MAX_PATRONS 的东西。应该非常接近你想要的。重命名变量以适应。根据客户类型调用适当的进入/退出方法。

```
public class SafeBar {

 // smokers in the bar
 private int smokers = 0; 

 private int MAX_PATRONS = 20;

 // non-smokers in the bar
 private int nonSmokers = 0; 

 // last time a smoker left the bar
 private long lastSmoke = 0;
 private long TIME_TO_CLEAR_AIR = 10000; // 10 seconds

 synchronized void smokerEnter() throws InterruptedException { 

    while (nonSmokers>0||smokers==MAX_PATRONS) { 
        wait();
    }

    ++smokers; 
 } 

 synchronized void smokerExit(){ 
    --smokers; 
    if (smokers==0) lastSmoke = new Date().getTime();
    notifyAll(); 
 } 

 synchronized void nonSmokerEnter() throws InterruptedException { 

    long checkTime = 0;
    while (smokers>0||nonSmokers==MAX_PATRONS||(checkTime = new Date().getTime()) - lastSmoke < TIME_TO_CLEAR_AIR) {
        if (checkTime - lastSmoke < TIME_TO_CLEAR_AIR)
            wait(TIME_TO_CLEAR_AIR - (checkTime - lastSmoke));
        else 
            wait(); 
    }

    ++nonSmokers; 
 } 

 synchronized void nonSmokerExit(){ 
    --nonSmokers; 
    notifyAll(); 
 } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:48:18.690

在该`leaveBar(Customer)`方法中，如果离开酒吧的顾客是吸烟者并且是最后一个，则启动一个新线程，该线程会休眠一段时间（刷新时间），最后告诉酒吧空气新鲜。一旦空气新鲜，然后打电话`notifyAll()`让下一位顾客进入酒吧。

# php - PHP中常量的语法错误

> ID：13653579
> 
> 赞同：0
> 
> 时间：2012-11-30T21:39:35.840
> 
> 标签：php, syntax

我正在尝试为我的一个网站制作一个调试类，类似于 Java 中的记录器类。

```
<?php

abstract class DebugLevel
{
    const Notice = 1;
    const Info = 2;
    const Warning = 4;
    const Fatal = 8;
}

class Debug
{
    private static $level = DebugLevel::Fatal | DebugLevel::Warning | DebugLevel::Info | DebugLevel::Notice;

}

?> 
```

我得到一个`Parse error`：

```
Parse error: syntax error, unexpected '|', expecting ',' or ';' in (script path) on line 13 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:40:54.053

您不能将逻辑添加到 PHP 中的类属性（变量）或常量。

从[文档](http://www.php.net/manual/language.oop5.properties.php)中：

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

* * *

要设置这样的值，请使用该`__construct()`函数。

```
class Debug {

    public $level; // can not be a constant if you want to change it later!!!

    public function __construct() {
        $this->level = DebugLevel::Fatal | DebugLevel::Warning | DebugLevel::Info | DebugLevel::Notice;
    }

} 
```

或者更优雅：

```
class Debug {

    public $level; // can not be a constant if you want to change it later!!!

    public function setLevel($level) {
        $this->level = $level;
    }

} 
```

然后你可以通过以下方式调用它：

```
$Debug = new Debug();
$Debug->setLevel(DebugLevel::Warning); 
```

# javascript - 当水平滑块在高库存中移动时捕捉日期（或时间）

> ID：13653580
> 
> 赞同：-4
> 
> 时间：2012-11-30T21:39:45.027
> 
> 标签：javascript, jquery, highstock

我试图在滑块移动期间找到任何鼠标移动事件。我必须在滑块移动时捕捉日期并将其显示在 div 中。

我正在使用`setExtremes()`highstock 的方法，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:25:25.123

[此处](https://stackoverflow.com/questions/12535594/highchart-and-highstock-together)选择的答案很有用。

它建议您需要以下内容：

```
xAxis: [{
    events: {
        setExtremes: function(e) {
            $("#myDiv").text(Highcharts.dateFormat(null, e.min) + ' : ' + Highcharts.dateFormat(null, e.max));
        }
    }
}], 
```

## 编辑

我刚刚尝试[了从这个主题的 API 中引用的小提琴](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/events-setextremes/)，不幸的是`xAxis.events.setExtremes`，在水平滑块释放后事件触发了，这为时已晚。

在通过 API 很好地寻找在正确时间触发的事件之后，我不得不得出以下结论：

*   通过外部事件处理以外的其他方式，非常隐晦地提供了此功能
*   此功能不包括在内，您需要破解 Highcharts 源才能添加它。

# objective-c - Objective C 访问多维数组值

> ID：13653585
> 
> 赞同：1
> 
> 时间：2012-11-30T21:40:17.077
> 
> 标签：objective-c, arrays, dictionary, multidimensional-array

```
for(id key in stats) {
    NSLog(@"key=%@ value=%@", key, [stats objectForKey:key]);
} 
```

我有一个数组字典，每个数组本身都有许多数组。它是字典中的多维数组。

但是上面的代码给了我以下

```
2012-11-30 21:36:07.203 key=main cat c value=(
"<Food: 0x6e5fb70>"
)
2012-11-30 21:36:07.205 key=main cat b value=(
"<Food: 0x6e5fa00>",
"<Food: 0x6e5faa0>"
)
2012-11-30 21:36:07.207 key=bakery_products value=(
"<Food: 0x6e5f510>",
"<Food: 0x6e5f660>",
"<Food: 0x6e5f700>",
"<Food: 0x6e5f810>",
"<Food: 0x6e5f900>",
"<Food: 0x6e5d5d0>"
) 
```

如何访问那些显示为 Food 0x6e5fb70 的数组中的值？

我现在已经花了几个小时了，找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:42:49.540

可能是这样的：

```
for (id key in [stats allKeys]) {
    NSArray *foodArray = [stats objectForKey:key];
    for (Food *food in foodArray) {
        // do stuff with Food object
    }
} 
```

更新（对于 Ploto 的第二条评论）：

你是这个意思吗：

```
NSArray *array = [stats objectForKey:@"bakery_products"]; 
```

更新#2 `description`：

```
- (NSString *)description {
    return [NSString stringWithFormat:@"Food: %@, %@", whatever1, whatever2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:19:16.347

除了@rmaddy 提到的内容之外，如果您使用 Apple LLVM Compiler 4.0 +（我认为它与 xCode 4.4+ 一起提供），那么有一种简洁的方法可以使用文字来完成您需要的工作，根本不需要样板代码。

以下是您的操作方法：

```
for (id key in [stats allKeys]) {
    for (Food * food in stats[key]) {

        //this is the object you're looking for
        NSLog(@"Object: %@", food);

    }
} 
```

其中 stats 是您的字典对象，它的每个键都有一个数组。更新到 LLVM 4.0 值得为此付出努力:)

如果您选择使用迭代器枚举每个数组，您甚至可以像这样访问对象：

`stats[key][i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:20:42.370

一种更有效的枚举字典的方法

```
[stats enumerateKeysAndObjectsUsingBlock:^(NSString *category, NSArray *foodItems, BOOL *stop) {
  for (Food *food in foodItems) {
    // do something with food
  }
}]; 
```

显然，如果您每次都需要以相同的顺序迭代字典，则需要使用更长的时间

```
NSArray *sortedKeys = [[stats allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

for (id key in sortedKeys) {
  NSArray *foodArray = [stats objectForKey:key];
  for (Food *food in foodArray) {
    // do stuff with Food object
  }
} 
```

# java - 为什么要在 Spring-Hibernate Configuration 中同时配置 dataSource 和 sessionFactory？

> ID：13653591
> 
> 赞同：6
> 
> 时间：2012-11-30T21:40:33.280
> 
> 标签：java, spring, hibernate

我的 Web 应用程序使用 Spring 3.1.2 和 Hibernate 4.1.7。我现在想配置这两个。我有我的`hibernate.cfg.xml`文件：

```
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
        <property name="connection.username">root</property>
        <property name="connection.password">root</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="hibernate.connection.autocommit">false</property>
        <property name="dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
        <!-- 
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
         -->
        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.hbm2ddl.auto">update</property>       
    </session-factory>
</hibernate-configuration> 
```

我的`webapp-servlet.xml`弹簧配置文件：

```
<beans>
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="configLocation">
        <value>
            classpath:hibernate.cfg.xml
        </value>
    </property>
    <property name = "dataSource" ref = "dataSource"></property>
</bean>

<bean id = "dataSource" class = "org.apache.commons.dbcp.BasicDataSource">
    <property name = "driverClassName" value = "com.mysql.jdbc.Driver" />
    <property name = "url" value = "jdbc:mysql://localhost:3306/test" />
    <property name = "username" value = "root" />
    <property name = "password" value = "root" />
    <property name = "maxActive" value = "10" />
</bean>
</beans> 
```

1.  当所有需要的数据都已经包含在 hibernate 配置文件中时，为什么我需要配置一个 DataSource bean？Hibernate 是否有一些可以使用的默认值？
2.  还有哪些`DataSource`我可以使用的？
3.  我是否缺少任何其他 bean 或配置参数/属性来让 hibernate 与我的应用程序一起工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T22:00:20.453

1.  你不需要他们两个。您可以删除`hibernate.cfg.xml`并配置.`LocalSessionFactoryBean``hibernate.cfg.xml``DataSource`

2.  您有以下选择：

    *   使用[嵌入式数据库](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html#jdbc-embedded-database-support)- 有利于测试和学习目的

    *   使用`DriverManagerDataSource`- 它是一个简单的非池化数据源，可用于测试等（不推荐用于生产）

    *   使用连接池，例如 DBCP 或 c3p0

    *   如果您部署到应用程序服务器，您可以使用应用程序服务器[使用 JNDI提供的连接池](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-jee-jndi-lookup)

3.  你当前的配置已经足够了，但是缺少对[Spring 事务管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)的支持。为了启用它，您需要

    *   宣布`HibernateTransactionManager`

    *   添加`<tx:annotation-driven>`以启用声明式事务管理 ( `@Transactional`)

    *   声明`TransactionTemplate`是否要使用程序化事务管理（使用它来克服声明性事务管理的限制）

    *   另外不要忘记从 Hibernate 配置中删除与事务相关的属性，因为它们可能与 Spring 事务管理冲突

# javascript - 删除一个 div 会删除其他 div 的 onclick 吗？

> ID：13653596
> 
> 赞同：2
> 
> 时间：2012-11-30T21:40:47.697
> 
> 标签：javascript, onclick

这里有一种奇怪的行为。

```
(function(){
    var images=document.getElementsByTagName('img');
    for (var i = 0; i < images.length; i++) {
        images[i].parentNode.onclick = function () {
            var embed = "whatever";
            document.body.innerHTML = '<div id="overlay"><div class="game">' + embed + '</div></div>' + document.body.innerHTML;
            document.getElementById('overlay').onclick = function () { this.parentNode.removeChild(this); }
        }
    }
})(); 
```

本课程是简化的代码。单击覆盖后，将删除覆盖（和比赛）。但图像 onclick 事件不再起作用。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:42:36.387

这是因为以下行：

```
document.body.innerHTML = '...' + document.body.innerHTML; 
```

在这里，您将 HTML 内容直接连接为字符串，并删除绑定到包括图像在内的所有元素的所有事件。

我建议您动态`innerHTML`创建覆盖块并将其添加到`body`.

# macos - 山狮上的 jdk 6

> ID：13653597
> 
> 赞同：33
> 
> 时间：2012-11-30T21:40:48.993
> 
> 标签：macos, java, osx-mountain-lion

我刚刚安装了 Mac OSX 10.8 Mountain Lion 我正在尝试安装 JDK 版本 6 Oracle 下载中没有版本 6 的 Mac 包： [http ://www.oracle.com/technetwork/java/javase/downloads/ jdk6u37-downloads-1859587.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk6u37-downloads-1859587.html)

但是JDK版本7有一个 [http://www.oracle.com/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html)

在其他地方我可以得到 JDK 6 的 Mac 包吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-01T07:45:57.807

我记得，当你第一次做一些需要 Java 的事情时，操作系统会询问你是否要安装它，而你得到的是第 6 版。根据[这个页面](https://blogs.oracle.com/shay/entry/installing_jdeveloper_on_mac_os)，`java -version`在终端中输入就足以触发提示。

对于 JDK（而不是运行时），您需要登录[developer.apple.com](https://developer.apple.com/downloads/index.action)，搜索`java`并下载 Java for OS X 2012-006 Developer Package。我刚刚在我的 MacBook 上做了这个，现在有了`javac 1.6.0_37`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-18T17:11:56.167

*   浏览到[https://developer.apple.com/downloads/](https://developer.apple.com/downloads/)
*   下载**适用于 OS X 2013-005 开发人员包的 Java**
*   双击生成的**java_for_os_x_2013005_dp_11m4609.dmg**打开
*   双击**JavaDeveloper.pkg**进行安装；使用默认值/同意许可/输入您的密码
*   调出终端并输入`java -version`以确保您拥有正确的版本。
*   如果是*错误*的版本，（例如java版本“1.7.0_45”），那么你需要修改`~/.bash_profile`：

    ```
    # Java 6 for Android Development
    export JAVA_HOME="/Library/Java/JavaVirtualMachines/1.6.0_65-b14-462.jdk/Contents/Home/" 
    ```

*   注销并再次登录并确保您运行的是正确的版本： `java -version`. 应该是 java 版本“1.6.0_65”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T12:19:25.330

出于某种奇怪的原因——在 Java7 之前，实际上是苹果为 OSX 而不是 Sun/Oracle 提供/支持 java。这种情况最近才随着 JAVA7 而改变。因此，要获得早期版本（如 Java6），请访问[http://connect.apple.com](http://connect.apple.com) - 使用您的 Apple ID 登录，您会发现列出的 1.6 的 jdk。您也可以通过[https://developer.apple.com/](https://developer.apple.com/)找到它- 或者正如我已经说过的，从 7 开始，您可以直接从[http://www.oracle.com/technetwork/java/index.html获取它](http://www.oracle.com/technetwork/java/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T02:50:46.657

不幸的是，直到我找到了一个相当不稳定的解决方案之后，我才看到这个答案......我假设从 developer.apple.com 下载 Java 安装程序是安装 Java 6 的最简单方法，但如果像我一样，您已经安装了 Java 7，并且您正在尝试降级并且它不起作用（即，如果安装开发人员下载仍然让您使用 Java 7 作为默认版本），您可以下载适用于 OS 10.6 的 Java 包，然后使用 Pacifist 打开它，然后将文件复制过来。（从 10.7 的包中复制文件对我不起作用 - 显然它安装了 Java 7，或者至少它将 Java 7 保留为默认版本，而无法选择版本 6）。

更多信息在这里： [https ://stackoverflow.com/a/6413600/560114](https://stackoverflow.com/a/6413600/560114)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-07-18T14:42:44.897

截至 2013 年 7 月 18 日，您可以在这里获得最新的 Mac Java 6：

[http://support.apple.com/downloads/](http://support.apple.com/downloads/)

单击“Java for OS X 2013-004”链接可以进入下载页面：

[http://support.apple.com/kb/DL1572](http://support.apple.com/kb/DL1572)

# php - 如何在单个查询中将 6 倍值插入 mysql 表

> ID：13653598
> 
> 赞同：-2
> 
> 时间：2012-11-30T21:40:48.353
> 
> 标签：php, html, mysql

我有名为的表`subject`。我有列`id`(PK) 、、、、`subject_name`和( FK)。我的用户填写表格并提交。我通过表单的 post 方法获得了值。在表格中，我有 6 个科目，对于每个科目，我都有, , . 这是我的代码`total_class``attendence``cnic``total_class``attendence``subject_name`

```
if($_SERVER['REQUEST_METHOD']=='POST')
{

    $form=$_POST[form'];
    $s1=$_POST['sub1'];
    $s1=$_POST['sub2'];
    $s1=$_POST['sub3'];
    $s1=$_POST['sub4'];
    $s1=$_POST['sub5'];
    $s1=$_POST['sub6'];
    $month=$_POST['month'];

    $total_attend_1=$_POST['Ts1'];
    $total_attend_2=$_POST['Ts2'];
    $total_attend_3=$_POST['Ts3'];
    $total_attend_4=$_POST['Ts4'];
    $total_attend_5=$_POST['Ts5'];
    $total_attend_6=$_POST['Ts6'];

    $attend_1=$_POST['Attend_s1'];
    $attend_2=$_POST['Attend_s2'];
    $attend_3=$_POST['Attend_s3'];
    $attend_4=$_POST['Attend_s4'];
    $attend_5=$_POST['Attend_s5'];
    $attend_6=$_POST['Attend_s6'];
    $query=mysql_query("INSERT INTO subject VALUE( '','$s1','total_attend_1','$attend_1','$form','$month')") or die(mysql_error());
    /*My query should be here.Should I write 6 insert queries?*/ 
```

我曾尝试过使用

```
foreach($array as $attendee){
} 
```

但没有得到我的任务？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:45:23.017

正确的[插入](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语法是

```
insert into subject values (sub1, ts1, attend_s1); 
```

或具有多个值

```
insert into subject values (sub1, ts1, attend_s1), (sub2, ts2, attend_s2), (...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:44:56.107

我猜你想要这样的东西：

```
function x($str) {return mysql_real_escape_string($str);} // shorter function name
$rows = Array();
for( $i=1; $i<=6; $i++) {
  $rows[] = "(null,'".x($_POST['sub'.$i])."','".x($_POST['Ts'.$i])."','".x($_POST['Attend_s'.$i])."','".x($form)."','".x($_POST['month'])."')";
}
mysql_query("insert into `subject` values ".implode(",",$rows)); 
```

删除所有变量分配，并确保您在`$form`某处定义 - 我在您发布的代码中看不到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:51:38.617

```
// $post = a sanitized copy of $_POST

$entries = array( );
for ($i = 1; $i <= 6; ++$i) {
    $entries[] = " (NULL, '{$post['sub'.$i]}', '{$post['Ts'.$i]}', '{$post['Attend_s'.$i]}', '{$form}', '{$post['month']}') ";
}

$query = " INSERT INTO `subject` VALUES ".implode(', ', $entries); 
```

# sql-server - 无法连接到 SQL Server 2008 sspi

> ID：13653600
> 
> 赞同：-1
> 
> 时间：2012-11-30T21:40:54.213
> 
> 标签：sql-server, sql-server-2008, sspi

我在本地网络的机器上运行了一个 SQL 服务器。在过去的 3 个月里，我一直通过 Windows 身份验证连接到它。只有 1 个其他用户（Sa）并且他在过去的一两年内一直能够连接，没有问题。

现在这周我们都收到了 SSPI 错误，我们都无法连接。我们不记得`sa`登录了，因为我们都一直在使用 Windows 身份验证。

我可以很好地登录到 Windows 身份验证，重新启动我的机器但仍然无法访问服务器。我们得到同样的错误，sspi。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:38:30.897

呸，SA更改了他的密码。需要重启服务器，用新密码登录。谢谢大家的提示

# python - 如何从浏览器外部访问 Chrome 扩展程序的内容 - 例如，我希望在我正在编写的脚本中使用这些内容？

> ID：13653605
> 
> 赞同：0
> 
> 时间：2012-11-30T21:41:23.297
> 
> 标签：python, shell, unix, google-chrome-extension

假设我正在使用一个 Chrome 扩展程序，它可以很好地总结网页上的内容。与其编写自己的程序来模拟扩展程序的服务，我想创建一个脚本，然后使用扩展程序生成的摘要信息，将其捕获在我可以操作的变量中。

这是否可以编写一个可以实现这一目标的脚本？如果是这样，什么是好的起点？我想用 unix 或 python 编写脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:13:40.333

那么你必须找到它存储你想要的摘要信息的位置。它是暂时在 RAM 中还是在重新启动和排序后持续存在？什么样的信息？如果信息是临时存储的，比如每个会话，它可能会使你想要完成的事情变得更加困难。如果摘要数据存储在本地，这可能会更容易实现。例如，如果它存储在本地，您可以编写一些 python 来打开包含摘要信息的文件，将其读入变量，然后将该信息解析为您需要的任何格式。

非常开放的问题，你能提供更多细节吗？

# cuda - 使用两个 uint 表示一个双精度数，然后相乘？

> ID：13653611
> 
> 赞同：3
> 
> 时间：2012-11-30T21:41:54.840
> 
> 标签：cuda, double, gpgpu, fixed-point, uint

我正在使用 CUDA（GPGPU 编程）进行一些研究，与单精度性能相比，固有的双精度性能受到了影响（24 倍！），这是由于新的硬件架构。我决定尝试使用两个 uint 来代表一个双精度数。这样我就可以运行 DP 计算而不会显着影响性能。

例如，假设我们要使用这种方法来表示双 10.12。

uint 实数 = 10，十进制数 = 12；

所以; 'real.decimal' 在视觉上代表我们的双倍。

我们称这种类型为“单一”。

给定：单 a = 10.12，b = 20.24；

什么是乘法、除法、加法和减法的有效算法？

单个 c = a * b;

请记住，为此，不可能进行任何 DP 计算或使用大于 32 位的数据类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:52:32.297

@njuffa 发布的答案几乎可以肯定是实现这一愿望的最明智的方式。我不知道它会有多快，但由于它利用了设备上最高吞吐量的引擎（单精度浮点引擎），它似乎是所有竞争替代品中最好的。尽管如此，你确实要求一个定点表示，所以我想我还是会继续发布这个，只是使用这个问题作为想法的存储库。

这段代码有很多警告：

1.  未经广泛测试
2.  可能比大多数替代品慢
3.  不做有符号算术（你提到了 uint），所以减法是有问题的
4.  没有实施除法
5.  没有上溢/下溢检查
6.  忽略绝对不使用任何 64 位表示或操作的请求。当然，我没有使用任何 64 位 (DP) 浮点运算，但我确实使用了 64 位整数运算。我的理由是（在某些情况下）我将提议的固有 64 位表示分解为两个 32 位数量，执行一堆 32 位操作，然后当机器（编译器）将执行此操作时重新组装是毫无意义*的*无论如何，如果我请求 64 位（整数）操作。
7.  未优化。您可能可以使用 PTX 做得更好，但它可能属于“抛光粪便”的范畴。

因此，我将其作为一个框架提供，以供娱乐，也许您可​​以看到与使用例如 SP 引擎相比，以“真正的”定点格式执行它要慢多少。

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
#define N 10000
#define nTPB 512
#define SCALE 1
#define MUL_ERR_LIM (0.0000001 * SCALE * SCALE)
#define ADD_ERR_LIM (0.0000001 * SCALE)

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

// fixed point number representation: 32 bit whole portion and 32 bit decimal
typedef union {
  struct {
    unsigned d;   // decimal portion
    unsigned w;   // whole number portion
  } part;
  unsigned long val;
} fxp;

__device__ __host__ inline fxp fxp_add(fxp a, fxp b){
  fxp temp;
  temp.val = a.val + b.val;
  return temp; 
}

__device__ __host__ inline fxp fxp_sub(fxp a, fxp b){
  fxp temp;
  temp.val = a.val - b.val;
  return temp;
}

__device__ __host__ inline unsigned fxp_whole(fxp a){
  return a.part.w;
}

__device__ __host__ inline unsigned fxp_decimal(fxp a){
  return a.part.d;
}

__device__ __host__ inline void fxp_set_whole(fxp *a, unsigned val){
  a->part.w = val;
}

__device__ __host__ inline void fxp_set_decimal(fxp *a, unsigned val){
  a->part.d = val;
}

__device__ __host__ inline fxp float_to_fxp(float val){
  fxp temp;
  temp.part.w = (unsigned) truncf(val);
  temp.part.d = (unsigned) rintf((val - truncf(val)) * 0x0000000100000000ul);
  return temp;
}

__device__ __host__ inline float fxp_to_float(fxp val){
  return val.part.w + (val.part.d/(float)0x0000000100000000ul);
}

__device__ __host__ inline fxp double_to_fxp(double val){
  fxp temp;
  temp.part.w = (unsigned) trunc(val);
  temp.part.d = (unsigned) rint((val - trunc(val)) * 0x0000000100000000ul);
  return temp;
}

__device__ __host__ inline double fxp_to_double(fxp val){
  return val.part.w + (val.part.d/(double)0x0000000100000000ul);
}

__device__ __host__ fxp fxp_mul(fxp a, fxp b){
  fxp temp;
  unsigned long ltemp = ((unsigned long)a.part.w * (unsigned long)b.part.d) + ((unsigned long)a.part.d * (unsigned long)b.part.w);
  unsigned utemp = (unsigned) (ltemp & 0x0FFFFFFFFul);
  temp.part.w = (unsigned) (ltemp >> 32);
  temp.part.d = (unsigned) (((unsigned long)a.part.d * (unsigned long)b.part.d) >> 32) + utemp;
  temp.part.w += (a.part.w * b.part.w) + ((temp.part.d < utemp) ? 1:0);
  return temp;
}

__global__ void fxp_test(float *a, float *b, float *s, float *p, double *da, double *db, double *ds, double *dp, unsigned n){

  unsigned idx = threadIdx.x + (blockDim.x * blockIdx.x);
  if (idx < n){
   float la = a[idx];
   float lb = b[idx];
   double lda = da[idx];
   double ldb = db[idx];
   s[idx] = fxp_to_float(fxp_add(float_to_fxp(la), float_to_fxp(lb)));
   p[idx] = fxp_to_float(fxp_mul(float_to_fxp(la), float_to_fxp(lb)));
   ds[idx] = fxp_to_double(fxp_add(double_to_fxp(lda), double_to_fxp(ldb)));
   dp[idx] = fxp_to_double(fxp_mul(double_to_fxp(lda), double_to_fxp(ldb)));
   }
}

int main(){

  fxp a,b,c;
  float x,y,z, xp, yp, zp;
  double dx, dy, dz, dxp, dyp, dzp;
  if (sizeof(unsigned) != 4) {printf("unsigned type size error: %d\n", sizeof(unsigned)); return 1;}
  if (sizeof(unsigned long) != 8) {printf("unsigned long type error: %d\n", sizeof(unsigned long)); return 1;}
// test host side
  x = 76.705116;
  y = 1.891480;

  a = float_to_fxp(x);
  b = float_to_fxp(y);
// test conversions
  xp = fxp_to_float(a);
  yp = fxp_to_float(b);
  printf("con: a = %f, a should be %f, b = %f, b should be %f\n", xp, x, yp, y);
// test multiply
  c = fxp_mul(a, b);
  z = x*y;
  zp = fxp_to_float(c);
  printf("mul: a = %f, b = %f, c = %f, c should be %f\n", x, y, zp, z);
//test add
  c = fxp_add(a, b);
  z = x+y;
  zp = fxp_to_float(c);
  printf("add: a = %f, b = %f, c = %f, c should be %f\n", x, y, zp, z);
//test subtract
  c = fxp_sub(a, b);
  z = x-y;
  zp = fxp_to_float(c);
  printf("sub: a = %f, b = %f, c = %f, c should be %f\n", x, y, zp, z);

// now test doubles
  dx = 6.7877;
  dy = 5.2444;

  a = double_to_fxp(dx);
  b = double_to_fxp(dy);
// test conversions
  dxp = fxp_to_double(a);
  dyp = fxp_to_double(b);
  printf("dbl con: a = %f, a should be %f, b = %f, b should be %f\n", dxp, dx, dyp, dy);
// test multiply
  c = fxp_mul(a, b);
  dz = dx*dy;
  dzp = fxp_to_double(c);
  printf("double mul: a = %f, b = %f, c = %f, c should be %f\n", dx, dy, dzp, dz);
//test add
  c = fxp_add(a, b);
  dz = dx+dy;
  dzp = fxp_to_double(c);
  printf("double add: a = %f, b = %f, c = %f, c should be %f\n", dx, dy, dzp, dz);
//test subtract
  c = fxp_sub(a, b);
  dz = dx-dy;
  dzp = fxp_to_double(c);
  printf("double sub: a = %f, b = %f, c = %f, c should be %f\n", dx, dy, dzp, dz);

// test device side
  float *h_a, *d_a, *h_b, *d_b, *h_s, *d_s, *h_p, *d_p;
  double *h_da, *d_da, *h_db, *d_db, *h_ds, *d_ds, *h_dp, *d_dp;

  if ((h_a=(float *)malloc(N*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_b=(float *)malloc(N*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_s=(float *)malloc(N*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_p=(float *)malloc(N*sizeof(float))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_da=(double *)malloc(N*sizeof(double))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_db=(double *)malloc(N*sizeof(double))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_ds=(double *)malloc(N*sizeof(double))) == 0) {printf("malloc fail\n"); return 1;}
  if ((h_dp=(double *)malloc(N*sizeof(double))) == 0) {printf("malloc fail\n"); return 1;}

  cudaMalloc((void **)&d_a, N*sizeof(float));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_b, N*sizeof(float));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_s, N*sizeof(float));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_p, N*sizeof(float));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_da, N*sizeof(double));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_db, N*sizeof(double));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_ds, N*sizeof(double));
  cudaCheckErrors("cudamalloc fail");
  cudaMalloc((void **)&d_dp, N*sizeof(double));
  cudaCheckErrors("cudamalloc fail");

  for (unsigned i = 0; i < N; i++){
    h_a[i] = (float)drand48() * SCALE;
    h_b[i] = (float)drand48() * SCALE;
    h_da[i] = drand48()*SCALE;
    h_db[i] = drand48()*SCALE;
    }

  cudaMemcpy(d_a, h_a, N*sizeof(float), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(d_b, h_b, N*sizeof(float), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(d_da, h_da, N*sizeof(double), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(d_db, h_db, N*sizeof(double), cudaMemcpyHostToDevice);
  cudaCheckErrors("cudamemcpy fail");

  fxp_test<<<(N+nTPB-1)/nTPB, nTPB>>>(d_a, d_b, d_s, d_p, d_da, d_db, d_ds, d_dp, N);
  cudaCheckErrors("kernel fail");

  cudaMemcpy(h_s, d_s, N*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(h_p, d_p, N*sizeof(float), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(h_ds, d_ds, N*sizeof(double), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudamemcpy fail");
  cudaMemcpy(h_dp, d_dp, N*sizeof(double), cudaMemcpyDeviceToHost);
  cudaCheckErrors("cudamemcpy fail");

  for (unsigned i=0; i<N; i++){
    if (fabsf(h_s[i] - (h_a[i] + h_b[i])) > ADD_ERR_LIM) {printf("float add mismatch at %d, a: %f b: %f gpu: %f  cpu: %f\n", i, h_a[i], h_b[i],  h_s[i], (h_a[i] + h_b[i])); return 1;}
    if (fabsf(h_p[i] - (h_a[i] * h_b[i])) > MUL_ERR_LIM) {printf("float mul mismatch at %d, a: %f b: %f gpu: %f  cpu: %f\n", i, h_a[i], h_b[i],  h_p[i], (h_a[i] * h_b[i])); return 1;}
    if (fabs(h_ds[i] - (h_da[i] + h_db[i])) > ADD_ERR_LIM) {printf("double add mismatch at %d, a: %f b: %f gpu: %f  cpu: %f\n", i, h_da[i], h_db[i], h_ds[i], (h_da[i] + h_db[i])); return 1;}
    if (fabs(h_dp[i] - (h_da[i] * h_db[i])) > MUL_ERR_LIM) {printf("double mul mismatch at %d, a: %f b: %f gpu: %f  cpu: %f\n", i, h_da[i], h_db[i], h_dp[i], (h_da[i] * h_db[i])); return 1;}
    }
  printf("GPU results match!\n");
  return 0;
} 
```

顺便说一句，分子动力学研究代码[AMBER](http://ambermd.org)[在 GPU 上](http://ambermd.org/gpus/benchmarks.htm#Benchmarks)运行速度很快，并实现了几种不同的算术模型来实现它的速度，包括 SP 和 DP 计算的混合[以及 SPFP 格式](http://www.sciencedirect.com/science/article/pii/S0010465512003098)，它在某些工作中使用定点表示和 SP 用于其他工作。不过我不知道它的细节。但显然它可以做到很好的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:17:28.073

如果要替换双精度，可以考虑使用“双单”表示，其中操作数是称为“头”和“尾”的单精度数字对，并且满足规范化要求 |尾巴| <= 0.5 * ulp (|head|)。CUDA 的 float2 是保存所需浮点数对的合适类型。例如，不太重要的 x 分量代表“尾巴”，而更重要的 y 分量代表“头”。

请注意，这不能提供与双精度完全相同的精度。此表示的精度限制为 49 位（每个单精度尾数的 24 位加上尾部的符号位 1 位）与双精度的 53 位。这些运算不会提供 IEEE 舍入，并且范围也可能由于乘法代码中的临时量溢出而有所减小。低于正常的数量也可能无法准确表示。

我认为性能不会比使用 GPU 的本机双精度运算好很多，因为寄存器压力会更高，并且每个“双单”运算所需的单精度运算数量相当可观。您当然可以尝试测量这两种变体的性能。

以下是“双单”格式的加法示例。算法的来源在评论中注明。我相信所引用的工作反过来是基于 D. Priest 的工作，他在 1980 年代末或 1990 年代初对此主题进行了研究。对于“双单”乘法的工作示例，您可以查看 CUDA 附带的文件 math_functions.h 中的函数 __internal_dsmul() 。

对 CUDA 中的 64 位整数运算的快速评论（正如一位评论者指出的那样，这是一种潜在的替代方案）。当前的 GPU 硬件对原生 64 位整数运算的支持非常有限，主要是提供浮点类型之间的转换，以及在加载和存储中使用 64 位地址进行索引。否则，64 位整数操作是通过本机 32 位操作实现的，通过查看反汇编代码 (cuobjdump --dump-sass) 可以很容易地看到。

```
/* Based on: Andrew Thall, Extended-Precision Floating-Point Numbers for GPU 
   Computation. Retrieved from http://andrewthall.org/papers/df64_qf128.pdf
   on 7/12/2011.
*/
__device__ float2 dsadd (float2 a, float2 b)
{
    float2 z;
    float t1, t2, t3, t4, t5, e;

    t1 = __fadd_rn (a.y, b.y);
    t2 = __fadd_rn (t1, -a.y);
    t3 = __fadd_rn (__fadd_rn (a.y, t2 - t1), __fadd_rn (b.y, -t2));
    t4 = __fadd_rn (a.x, b.x);
    t2 = __fadd_rn (t4, -a.x);
    t5 = __fadd_rn (__fadd_rn (a.x, t2 - t4), __fadd_rn (b.x, -t2));
    t3 = __fadd_rn (t3, t4);
    t4 = __fadd_rn (t1, t3);
    t3 = __fadd_rn (t1 - t4, t3);
    t3 = __fadd_rn (t3, t5);
    z.y = e = __fadd_rn (t4, t3);
    z.x = __fadd_rn (t4 - e, t3);
    return z;
} 
```

# sql - 新闻数据库设计

> ID：13653618
> 
> 赞同：2
> 
> 时间：2012-11-30T21:42:21.797
> 
> 标签：sql, database, database-design, data-modeling

我正在制作一个新闻网站，但我想让用户从 Facebook 插入状态。用户可以在撰写新闻时将状态放在新闻中的任何位置。我想在插入时显示新闻。

这是新闻内容的示例

> “一些用户插入文本*状态*一些其他文本*一些其他状态*另一个文本*另一个状态*”

所以我在想在这种情况下什么是好的数据库设计。状态有用户，谁写的，日期和内容。新闻有标题、描述和日期。

我想出了五张桌子。

表**新闻标题**

```
id  
NewsTitle  
NewsDesc  
NewsDate
User 
```

表**NewsContent** - 只包含 id 和来自消息的状态或文本的消息

```
id  
content 
```

表**NewsContentDetails** - 包含状态的详细信息

```
id
ContentUser
ContentDate 
```

表**NewsContentDetailsLink** - **NewsContent**和**NewsContentDetails的连接表**

```
NewsContentId  
NewsContentDetailsId 
```

表**NewsHeaderContent** - **NewsHeader**和**NewsContent的连接表**

```
NewsHeaderId  
NewsContentId 
```

这是一个好的数据库设计还是有更好的方法来做到这一点？我担心在显示新闻时我将不得不在 sql 查询中编写许多 JOIN，这会很慢。

**编辑：** @hrr 建议的数据库设计

> ```
> **News:** 
> ```
> 
> 身份证 | 标题 | 内容 | 用户 | 日期
> 
> ```
> **Elements:** 
> ```
> 
> 身份证 | 内容 | 用户 | 日期 | 新闻_ID

**但是元素**中的某些字段将为空，我认为这不是一个好的选择。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:06:00.547

你不需要 NewsHeaderContent 除非你想在多个标题中使用相同的内容，但我不相信你想要它，所以你可以使用两个表：

表**新闻标题**

```
id  
NewsTitle  
NewsDesc  
NewsDate 
```

表**新闻内容**

```
NewsId
ContentId  
Sequence
content
ContentUser
ContentDate 
```

您可以使用该字段`Sequence`对内容进行排序。

此结构中一些数据的示例：

**新闻标题**

```
id    NewsTitle       NewsDesc               NewsDate
 1    'First News'    'Some Description'     2012-10-07
 2    'Another News'  'Description of News'  2102-12-07 
```

**新闻内容**

```
NewsId  ContentId   Sequence  content                    ContentUser  ContentDate
     1          1          1  'Some Text'                       NULL      NULL
     2          1          1  'Some user inserted text'         NULL      NULL
     2          2          2  [Status]                         User2  2012-12-07
     2          3          4  [Some other status]              User2  2012-12-07
     2          4          3  'Some other text'                 NULL      NULL
     2          5          5  'another text'                    NULL      NULL
     2          6          6  [Another Status]                 User2  2012-12-07 
```

序列可以更改，并且由于 ContentUser 和 ContentDate 仅在它是状态时使用，因此您可以使用这些字段来识别它的文本或状态，或者您可以添加一个`Type`可以保存的字段，例如`T`文本和`S`为状态。

这是我的示例的 SQLFiddle：[SQLFiddle](http://sqlfiddle.com/#!2/d2531/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:46:49.713

您可以将一张表格用于新闻，一张表格用于元素。

**消息：**

```
ID | Title | Content | User | Date 
```

**元素：**

```
ID | Content | User | Date | News_ID 
```

每个元素都有自己的新闻 ID！无需创建额外的“联结”表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:21:33.463

我认为，如果您希望读取操作非常快（我假设假设它是一个新闻站点），那么以下设计可能会很好：

整体餐桌设计： ![在此处输入图像描述](../Images/f32ca87dba307662f850fb20b0a32b56.png)

1.  我没有看到将新闻内容和新闻标题分开的理由？所以我假设它是一对一的映射（即使不是这种情况，解决方案也不会改变很多）。所以我只会有一个新闻表

    > 新闻
    > ID | 标题 | 描述 | 日期 | 内容

2.  接下来我会有一个 UserStatus 表

    > 用户状态
    > ID | 用户 ID | 状态文本

当用户想要创建一条新闻消息时，例如您指出的消息 ["Some user insert text Status Some other text Some other status another text another Status" ]，他/她可以简单地选择新闻和/或状态为句子的每个片段。

用户创建句子后，您可以获取相关内容新闻和状态并将形成的消息直接存储在表中，因此您将拥有一个针对阅读进行了优化的消息表：

```
Message
id | message | User id | DateTime 
```

缺点是您可以按状态或新闻 ID 进行过滤，也不能在新闻或状态发生变化时更新消息。

*如果我们假设您允许用户更改新闻或状态，或者您希望通过新闻 id 或状态 id 过滤消息，另一种选择是：*

存储新闻 id 的映射，以及引用新闻的消息 id 以及状态 id 和消息 id，其中状态已与片段序列号一起被引用。所以你会有：

```
News-Message-Mapper
News Id | Message Id | Fragment Sequence 
```

和

```
Status-Message-Mapper
Status Id | Message Id | Fragment Sequence 
```

片段序列表示状态或消息在整体消息中出现的位置。

现在，如果更新或删除新闻或状态，您只需参考两个映射表并重新生成这些消息或删除它们。

这优化了读取，但更新很复杂，但您的参照完整性和规范化规则得以维护。另外，您可以按新闻 ID 或状态 ID 过滤消息

# c++ - 将 QPushButton 信号连接到 QGraphicsView 插槽时出现问题

> ID：13653622
> 
> 赞同：0
> 
> 时间：2012-11-30T21:42:32.233
> 
> 标签：c++, qt, qgraphicsview, qpushbutton, qt-signals

我无法将 a 中的信号连接`QPushButton`到我的`QGraphicsView`.

我的按钮标题：

```
class Button : public QPushButton {

    Q_OBJECT

    public://public constructors / destructors

        Button(Game_state * game_state, QWidget *parent = 0);
        ~Button();

    protected://signals / slots etc QT 
        void mousePressEvent(QMouseEvent * event);//

    signals:
        void updated() { std::cout << "HELLO FROM THE UPDATED METHOD" << std::endl;}

    protected:
        Game_state * game_state;//this is the global gamestate method
        char * action_name;//this is the application name that is responsible for setting the game_state so the game controller knows what to delete / update

}; 
```

您需要`Q_Object`宏来用插槽编译它，但是当我编译时，我不断得到一个未找到的 vtable 引用，如下所示：

```
Undefined symbols for architecture x86_64:
  "vtable for Button", referenced from:
      Button::~Button()in buttons.o
      Button::~Button()in buttons.o
      Button::~Button()in buttons.o
      Button::Button(Game_state*, QWidget*)in buttons.o
      Button::Button(Game_state*, QWidget*)in buttons.o 
```

当我取出宏时，我可以很好地编译它，但是当我运行时我不断收到这个错误：

```
Object::connect: No such signal QPushButton::updated() in implementation/game_controller.cpp:11 
```

我的`game_controller`扩展`QGRaphicsView`，这是我尝试连接按钮的代码：

```
this->button = new Button(game_state);
this->proxy = new QGraphicsProxyWidget();
this->proxy = this->scene->addWidget(this->button);

connect(this->button, SIGNAL(updated()), this, SLOT(update())); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:59:52.890

保留 Q_OBJECT，moc 需要它

不要编写信号的主体，moc 会为所有信号生成代码。

不要处理 mousePressedEvent，处理 QAbstractButton 及其所有子类上可用的信号 clicked ()

# java - 从另一个线程控制倒计时

> ID：13653625
> 
> 赞同：0
> 
> 时间：2012-11-30T21:42:45.337
> 
> 标签：java, concurrency, javafx-2

我想在我的 JavaFX 应用程序中实现一个计数器。行为是通过一个按钮简单地控制：

1.  当用户第一次点击按钮时，倒计时开始倒计时 10, 9, 8, ..., 0
2.  当用户在倒计时期间单击按钮时，应取消倒计时
3.  2.之后，用户应该能够从 10 点开始再次运行倒计时

在倒计时期间，会处理一些繁重的数学计算（在我的应用程序音频分析中）。

如果我以正确的方式做，你能看看我的源代码吗？特别是我应该在上面或里面做这些`Platform.runLater`东西，我可以使用简单的 Java还是应该使用 JavaFX /类？欢迎任何建议。`CountdownController``CountdownView``Thread``Service``Task`

该应用程序分为3个组件：

1.  `CountdownTest`: 创建舞台并启动 JavaFX)
2.  `CountdownView`: 单例，包含一个简单的 Button，将按钮事件传递给`CountdownController`
3.  `CountdownController`: 单例，开始一个新的`Thread`. 在`Thread`执行倒计时，`CountdownView`更新以显示新的倒计时状态并处理一些数学内容。

**CountdownTest.java**

```
package org.example;

import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class CountdownTest extends Application {
    @Override
    public void start(Stage primaryStage) throws Exception {
        final Group root = new Group();
        final Scene scene = new Scene(root);
        root.getChildren().setAll(CountdownView.getInstance());
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    @Override
    public void stop() throws Exception {
        super.stop();
        CountdownController.getInstance().stop();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

**倒计时视图.java**

```
package org.example;

import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.control.Button;
import javafx.scene.control.Tooltip;
import javafx.scene.input.MouseEvent;

public final class CountdownView extends Group {
    private static final CountdownView instance = new CountdownView();

    private Button start;

    private CountdownView() {
        start = new Button("Start");
        start.setTooltip(new Tooltip("click to start countdown"));
        start.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                CountdownController.getInstance().onStartClick();
            }
        });

        this.getChildren().setAll(start);
    }

    public void startCountdown() {
        System.out.println("startCountdown");
        start.setTooltip(new Tooltip("click to stop countdown"));
    }

    public void setCountdown(final int countdown) {
        System.out.println("setCountdown " + countdown);
        start.setText(String.valueOf(countdown));
    }

    public void reset() {
        System.out.println("reset");
        start.setText("Start");
        start.setTooltip(new Tooltip("click to start countdown"));
    }

    public static CountdownView getInstance() {
        return instance;
    }
} 
```

**倒计时控制器.java**

```
package org.example;

import javafx.application.Platform;

public final class CountdownController {
    private static final CountdownController instance = new CountdownController();

    private Thread countdownThread;
    private volatile boolean running = false;

    public void onStartClick() {
        if (!running) {
            countdownThread = new Thread(new Runnable() {
                @Override
                public void run() {
                    running = true;
                    int countdown = 10;
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            CountdownView.getInstance().startCountdown();
                            CountdownView.getInstance().setCountdown(10);
                        }
                    });
                    final long start = System.currentTimeMillis();
                    int lastCountdown = countdown;
                    while (!Thread.interrupted() && countdown > 0) {
                        countdown = (int) (10 - (System.currentTimeMillis() - start) / 1000);
                        if (countdown != lastCountdown) {
                            lastCountdown = countdown;
                            final int currentCountdown = countdown;
                            Platform.runLater(new Runnable() {
                                @Override
                                public void run() {
                                    CountdownView.getInstance().setCountdown(
                                            currentCountdown);
                                }
                            });
                        }

                        // Do some heavy computing stuff
                        for (int i = 0; i < 10000000; i++) {
                            Math.sin(Math.random());
                        }
                    }
                    running = false;
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            CountdownView.getInstance().reset();
                        }
                    });
                }
            });
            countdownThread.start();
        } else {
            countdownThread.interrupt();
        }
    }

    public void stop() {
        if (countdownThread != null) {
            System.out.println("stop");
            countdownThread.interrupt();
        }
    }

    public static CountdownController getInstance() {
        return instance;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:20:01.077

不要过度出汗。任务和服务类只是构建在执行器之上的一些实用程序，如果您不需要它们提供的东西，那么它只是额外的工作。

我认为您使用控制器来决定应该在哪个线程上运行是正确的，您的视图足以在组件和控制器之间路由消息。

# javascript - jQueryMobile 非模态对话框

> ID：13653630
> 
> 赞同：1
> 
> 时间：2012-11-30T21:42:58.240
> 
> 标签：javascript, jquery-mobile

有没有办法在 jQueryMobile 中有一个非模态对话框？jQueryMobile 创建的默认对话框是默认的，并且没有用于非模态风格的选项/开关。是否有一些补充 JavaScript 可以编写或添加一个非模态选项，或者是否有 jQueryMobile JS 的黑客来使非模态对话框可用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T07:12:07.220

[Gajotres 在回答这个问题Draggable Non-Modal Popup Jquery Mobile](https://stackoverflow.com/questions/17811200/draggable-non-modal-popup-jquery-mobile)时为您的问题提供了一个很好的答案。

该解决方案是对 jQuery Mobile 内部工作的非常激烈的破解。如果这是图书馆本身的一部分，那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T22:39:37.907

上面的答案很好，但是因为它还包括一个可拖动弹出窗口的解决方案，所以它有点忽略了这一点，并且没有给出一个简单的答案来阻止这种模式。所以我决定为需要的人添加一个清晰的解释：

Jquery Mobile 通过添加一个覆盖所有页面的透明 DIV 来实现它的弹出模式。此 DIV 具有较高的 z-index，但此 z-index 仍低于弹出 DIV 本身。这样，这个透明DIV下的任何元素都不能被点击。如果你想阻止这种模式，只需通过更改它的 CSS 并将它的 display 属性设置为 none 来禁用这个透明的 DIV。此 DIV 的 ID 与带有“-screen”后缀的弹出窗口的 ID 相同。

```
<style>
    .PopupID-screen {
       display:none;
    }
</style> 
```

# arrays - 如何在 bash 中使用变量作为数组名

> ID：13653634
> 
> 赞同：0
> 
> 时间：2012-11-30T21:43:02.513
> 
> 标签：arrays, bash, variables

我目前正在编写一个从标准输入接收输入的脚本，然后将输入逐行加载到数组中以进行进一步处理。虽然如果我直接设置数组名称，数组可以正常工作，但当我尝试使用变量作为数组名称时，我无法让数组部分正常工作，代码本身如下：

```
input=$(</dev/stdin)
# back up the field separator for later
OLDIFS=$IFS
# set the field separator to newline
IFS=$'\n'
# populate an array from that variable, as delimited by the IFS
lines=($input) 
```

这就是我尝试将数组名称设置为变量的方法

```
arrayname="something"
eval $arrayname=($input) 
```

但不幸的是，当我运行它时，出现以下错误：

```
./f.sh: line 53: syntax error near unexpected token `('
./f.sh: line 53: `                      eval $arrayname=($input)' 
```

说了这么多，我想知道是否有人会知道我可以做些什么来使这项工作正常工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:54:20.057

而不是玩`IFS`，这在你的情况下是无用的（即使我是 的狂热粉丝`IFS`，我倾向于只在必要时使用它！），有一种更好，更有效的方式将文件加载到数组中。顺便说一句，它并不是很出名：它是命令`mapfile`（`help mapfile`在您的终端中输入运行 bash 以获取更多信息）。

因此，

```
mapfile lines 
```

将从标准输入读取并将每一行存储在一个数组`lines`中。这也存储了尾随的换行符，因此如果要修剪它，请使用以下`-t`选项：

```
mapfile -t lines 
```

要打印出数组，每个条目一行，请使用：

```
printf '%s\n' "${lines[@]}" 
```

（观察对 的引用`"${lines[@]}"`）。

请注意，使用`eval`是邪恶的！

您的主要问题是使用变量作为数组名称。bash 没有其他语言中所谓的指针。如果不使用`eval`，将很难使用存储在变量中的数组名称（除非您使用小技巧）。但是，正如我已经说过的，`eval`它是邪恶的。也许你应该多花点时间思考你的设计，可能还有另一种（更好的？）方法来实现你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:48:28.390

使用间接：

```
men=(Jack John Joe)
women=(Zoe Zelda Zanna)
gender=women[@]
echo ${!gender} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:44:52.873

```
read -a arr
printf '%s\n' ${arr[@]} 
```

这是解决方案吗？

# excel - 将单列转置为多行

> ID：13653640
> 
> 赞同：-1
> 
> 时间：2012-11-30T21:43:46.540
> 
> 标签：excel, vba, transpose

我有一列数据，大约有 800 条记录。每 18 个单元格是一个记录。我需要一个脚本，它需要每 18 个单元格并将它们动态地转置为一行，甚至需要一种编写 excel 公式的方法，将每 18 个记录从列转置为行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:54:59.083

您可能会被问到“您尝试过什么”，因为您最好在遇到困难时询问您何时遇到困难，而不是要求提供完整的解决方案。话虽如此，我可以为您提供一些提示以帮助您入门。

要在 VBA 中执行此操作，您需要执行一个循环，该循环从第一个单元格开始，获取由该单元格和以下 18 行组成的范围，然后将其粘贴到（可能）工作簿中的另一个工作表中，将其从列转置到一排。然后循环将偏移 19 个单元格并重新开始。

看看我在这个线程中给出的答案： [无法为 Excel VBA 编写宏以将特定单元格值复制到下一个空白行](https://stackoverflow.com/questions/13545064/unable-to-write-a-macro-for-excel-vba-to-copy-a-specific-cell-value-to-the-next/13545315#13545315)

这将为您提供与您的循环有些相似的语法。

要获得进行粘贴/转置的语法，请手动执行并使用宏记录器记录您的操作。这可以在“开发人员”选项卡上找到。（如果您没有看到“开发人员”选项卡，请转到“文件”->“选项”->“自定义功能区”，然后打开“开发人员”选项卡。）

试一试，如果你发现你不能让它工作，只需再次发布你遇到问题的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-13T16:35:01.817

您可以使用此 VBA 代码来实现此目的。

```
 Public Sub TransposePaste()
   'Value we want to step by....
    Dim stepVal As Long
    stepVal = 18
'Declare start row variable (-1)
 Dim row As Long
 row = 0

'Declare the column the data is coming from
Dim col As Long
col = 1

'Declare and set worksheet
Dim ws As Worksheet
Set ws = Sheet1

'end row of the data
Dim endRow As Long

endRow = ws.Cells(ws.Rows.Count, col).End(xlUp).row

'cycle to end of data end of data...
For i = 1 To endRow Step stepVal

'increment row each time
row = row + 1

    'cycle through the columns outputting the data
    For j = 1 To stepVal

    Sheet1.Cells(row, j).Value = Sheet1.Cells(i + j - 1, col).Value

    Next j
Next i 
```

结束子

# serial-port - 串行驱动程序硬件 FIFO 溢出问题

> ID：13653656
> 
> 赞同：2
> 
> 时间：2012-11-30T21:45:31.530
> 
> 标签：serial-port, driver

我们正在使用以下架构。root@ti-omap3-am3517-evm:~# cat /proc/cpuinfo 处理器：ARMv7 处理器 rev 7 (v7l) BogoMIPS：597.64 特点：swp half thumb fastmult vfp edsp neon vfpv3 CPU 实现者：0x41 CPU 架构：7 CPU 变体： 0x1 CPU 部分：0xc08 CPU 版本：7

硬件：OMAP3517/AM3517 EVM 版本：0020 序列号：0000000000000000

我们正在使用 Linux 内核版本 2.6.32 root@ti-omap3-am3517-evm:~# uname -a Linux ti-omap3-am3517-evm 2.6.32.8 #71 PREEMPT Mon Nov 5 15:37:19 EST 2012 armv7l unknown

我们面临的问题（HW FIFO 溢出）是串行驱动程序（驱动程序/串行/8250.c）uart_rx_char（）。串口有 64 字节的 FIFO，配置为在接收到 32 字节时产生中断。

我们正在以 460800 波特率从/向串行端口读取/写入数据。回归测试在我们向/从串行端口发送和接收数据的 7-8 小时内运行。几个小时后，我们看到 HWFIFO 溢出发生，我们不知道为什么会发生。我们假设以下两种情况之一正在发生。

1）串行中断被跳过，因为系统中的其他中断（以太网/ i2c和MMC（其中我们在回归测试期间不使用MMC和i2c）花费太长时间以至于跳过串行中断并且到串行中断的时间ISR 有机会运行 HW FIFO 已满。

2）另一个假设是我们必须在不到 1 毫秒（一毫秒）内处理 ISR，例如每秒 460800 位 => 460800/1000 毫秒 ~= 460 位/毫秒 ~= 52 字节/毫秒，因为我们已经配置了串行端口每 32 个字节产生一次中断，它给了我们 32/50 ms ~= 0.64 ms 的时间来完成 ISR。

如何确认我上面提到的第 1 点和第 2 点？任何指针将不胜感激。

我们还假设 8250.c（串行驱动程序）相当老旧且功能强大，它不应该像我们的那样运行。

如果您需要更多信息，请与我们联系。

8250.c 驱动程序可在此网络链接中找到。 [http://lxr.free-electrons.com/source/drivers/serial/8250.c?v=2.6.32;a=arm](http://lxr.free-electrons.com/source/drivers/serial/8250.c?v=2.6.32;a=arm)

我还有一个问题是，我们的目标板上使用的串口是基于 ST16654 的，具有以下配置。

```
[PORT_16654] = {
          .name           = "ST16654",
          .fifo_size      = 64,
          .tx_loadsz      = 32,
          .fcr            = UART_FCR_ENABLE_FIFO | UART_FCR_R_TRIG_01 |
                            UART_FCR_T_TRIG_10,
          .flags          = UART_CAP_FIFO | UART_CAP_EFR | UART_CAP_SLEEP
          } 
```

我检查了代码，在我看来 rx 触发器设置为 16 个字节，而 tx 触发器设置为 32 个字节（在[http://lxr.free-electrons.com/source/include/linux/serial_reg.h 中定义？ v=2.6.32；a=arm#L62](http://lxr.free-electrons.com/source/include/linux/serial_reg.h?v=2.6.32;a=arm#L62)）。

有谁知道为什么会这样？

# asp.net-mvc - 在 ASP.NET MVC 4 Razor 中将 HTML 块作为参数发送

> ID：13653657
> 
> 赞同：2
> 
> 时间：2012-11-30T21:45:36.170
> 
> 标签：asp.net-mvc, razor, html-helper

我已经为 ASP.NET MVC 4 编写了一个分页转发器。它有一个渲染方法，它接受页眉、页脚、正文和分隔符部分的参数来渲染，就像这样（为了便于阅读而简化了很多）：

```
public IHtmlString Render(Func<TViewModel, object> header, Func<TViewModel, object> body, Func<TViewModel, object> footer)
{
    var sb = new StringBuilder();
    // Code to render including calling the parameter objects, something like this:
    sb.Append(header(null));
    foreach (var item in items)
        sb.Append(body(item));
    sb.Append(footer(null));

    return new HtmlString(sb.ToString());
} 
```

现在，我想在 Razor 模板中使用此方法，并包含实际模板部分作为参数。这对于像这样的场景非常有用，我要么只使用纯 lambda 表达式，要么使用 oneliner 作为模板：

```
@Model.Render(body:
    item => Html.Partial("InvoiceListView", item)
, separator:
    @<hr />
) 
```

但是，如果我想做一些更复杂的事情，比如构建一个表格并填充它，我就是无法让 Razor 意识到我想将这些多行模板作为参数发送。

我想也许这会起作用：

```
@Model.Render(body: item => 
    @<text>
        <tr>
            <td>
                @item.ArticleNr
            </td>
        </tr>
    </text>
); 
```

但那里没有运气。有人有什么建议吗？还是我运气不好 - 在 Razor 中写这样的中继器是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:35:14.803

你可以看看这篇文章：

[http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)

希望能帮助到你！

**编辑：**

您可以使用一些包装器而不是直接使用 lambda 表达式

```
@helper Foo(object item)
{
    <tr>
        ...
    </tr>
}

@Model.Render(body: Foo) 
```

# asp.net-mvc - Kendo：处理 Ajax 数据请求中的错误

> ID：13653662
> 
> 赞同：33
> 
> 时间：2012-11-30T21:46:54.987
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

**在MVC4**中使用**Kendo** UI我有一个**网格**，它使**Ajax**将数据调用回控制器：

 ******```
 public ActionResult SearchUser_Read([DataSourceRequest]DataSourceRequest request)
    {
        var data = CreateAnExcaptionHere();
        return Json(data.ToDataSourceResult(request));
    } 
```

如何使用此调用通知页面出现错误？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-08-29T17:23:49.073

如果您需要显示来自服务器的错误消息，则可以通过返回仅设置了 Errors 属性的 DataSourceResult 对象来实现：

```
return this.Json(new DataSourceResult
            {
                Errors = "my custom error"
            }); 
```

并通过使用它（由该`.Events(events => events.Error("onError"))`行引用）在客户端上获取它：

```
function onError(e, status) {
    if (e.status == "customerror") {
        alert(e.errors);
    }
    else {
        alert("Generic server error.");
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-30T23:16:27.250

找到它，Kendo 支持它，只需在要调用的 JS 函数的 DataSource 中添加一个 Event。就是这样。

```
 .DataSource(dataSource => dataSource
      .Ajax()
      .Events(events => events.Error("onError"))
      .Read(read => read.Action("SearchUser_Read", "Search").Data("parentModel"))
  )

<script> 
    function onError(e, status) {
          alert("A server error has occurred!");
}
</script> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-03T14:29:33.717

稍微扩展一下 Drew 的回答：我们通常希望在发生错误时也回滚 Kendo Grid 中的更改。否则，如果从网格中删除项目时引发错误，例如，即使引发错误并显示消息，它仍会显示为已删除。

此函数还取消使用引发错误的数据源的任何网格中的更改：

```
function onError(e, status) {

    // Cancel changes on any grids on the page that are using this data source
    $('.k-grid').each(function (item) {
        var grid = $(this).data("kendoGrid");
        if (e.sender === grid.dataSource) {
            grid.cancelChanges();
        }
    });

    if (e.status == "customerror") {
        alert(e.errors);
    }
    else {
        alert("Generic server error.");
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T22:21:12.073

尝试引发异常并检查它是否提示警报消息。

对于剑道网格，有可能对您有帮助的错误事件。

[http://docs.kendoui.c​​om/documentation/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid](http://docs.kendoui.com/documentation/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid)

我们使用了 Telerik mvc 网格，如果绑定时出现任何错误，它会自动显示警报消息。

[http://www.telerik.com/community/forums/aspnet-mvc/grid/exception-handling.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/exception-handling.aspx)

[http://www.telerik.com/community/forums/aspnet-mvc/grid/how-to-do-error-handling-in-gridaction-methods.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/how-to-do-error-handling-in-gridaction-methods.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T09:58:00.683

对于读取数据，您不应向 ModelState 添加豁免并返回它，就像您为创建更新和删除请求所做的那样，而是将错误添加到数据源对象并使用相同的 jquery onerror 事件处理它。

```
 public virtual JsonResult Read_Tasks([DataSourceRequest] DataSourceRequest request) 
    {
        try
        {
            return Json(ListAll().ToDataSourceResult(request));
        }
        catch (Exception ex)
        {
            string exmptionText = ex.Message;

            ModelState.AddModelError(string.Empty, exmptionText); //This will not work 
            Logger.Error(exmptionText + ex.StackTrace);

            return this.Json(new DataSourceResult
            {
                Errors = new
                {
                    a = new { errors = new[] { exmptionText } }
                }
            });
        }
    }

function error_handler(e)
    {
        if (e.errors)
        {
        var message = "Errors:\n";
        $.each(e.errors, function (key, value) {
            if ('errors' in value) {
                $.each(value.errors, function () {
                    message += this + "\n";
                });
            }

 alert(message );
        });

    } 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-12-12T22:11:02.857

怎么样

```
throw new HttpResponseException(HttpStatusCode.BadRequest); 
```******

# java - 难以理解的日志记录行为

> ID：13653665
> 
> 赞同：0
> 
> 时间：2012-11-30T21:47:17.637
> 
> 标签：java, android, logging

我确实有一个活动类，其逻辑主要位于其他类中，特别是 Player 类。我有一个错误，我决定通过记录来跟踪，而我添加的记录消息从未出现过，所以我向上调用堆栈直到它们开始出现，直到我找到最后一条显示的消息，当玩家在这里触摸屏幕时：

```
public boolean onTouch(View v, MotionEvent event) {
  Log.i("GA.onTouch()", "phase == false");  
  Player.test();
  return true;
} 
```

没有可理解的原因为什么调用不会成功而没有错误，所以我创建了这个测试函数：

```
public static void test() {
    Toast.makeText(mParent, "so weird", Toast.LENGTH_SHORT).show();
    Log.i("Player.test()", "");
} 
```

吐司显示，但不显示日志。我不想通过 toast 进行调试，这很麻烦，谁能告诉我什么可能导致日志调用失败/不注册/不管它是做什么的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:01:07.087

`Log._`不适用于空消息。不知道为什么 ：）

`Log.i("Player.test()", "hello..It will show");`

你需要在那里留言！

# sql - oracle中的ETL使用直接sql

> ID：13653666
> 
> 赞同：0
> 
> 时间：2012-11-30T21:47:18.920
> 
> 标签：sql, database, oracle, etl

有人可以解释一下如何将数据从一个 oracle db 加载到另一个 db 或在同一个 db 中以有效的方式使用直接 sql 加载不同模式下的表。这是简单的 ETL 工作，我以前从未使用过 ETL 脚本。感谢你的帮助

最好的祝福..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:07:17.043

如果您可以建立一个[dblink](http://www.stanford.edu/dept/itss/docs/oracle/10g/server.101/b10759/statements_5005.htm)，那么它很简单 - 只需 INSERT INTO....SELECT...

如果您没有 dblink，那么仅使用 SQL 是不可能的——因为 SQL 仅在数据库会话中运行。因此，您需要某种脚本来在源数据库上启动会话并在其上运行查询，然后在目标数据库上启动会话并在那里运行查询。至于这样做的最佳方式是什么……嗯，有太多选择无法给出明智的答案——尤其是当我们甚至不知道您使用的是什么操作系统时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:57:17.083

数据泵是将大量数据从一个数据库移动到另一个数据库的好选择，表空间传输也是如此。跨 dblink 的 SQL 被限制为在链接本身上串行运行，因此如果您需要高性能，则需要运行插入/选择的多个会话

# node.js - 无法让 CORS 工作（NodeJS）

> ID：13653667
> 
> 赞同：0
> 
> 时间：2012-11-30T21:47:29.073
> 
> 标签：node.js, jsonp

我正在尝试设置跨域的 GET 请求。域 A 是目标，它有一个名为 /getUser 的服务：

```
(...)
server.get('/getUser', function(req, res) {
    console.log('Call received');
}
(...) 
```

如您所见，它并没有做太多，我只是想确保请求到达。域A有一个公共的js文件，实现了对这个服务的调用：

```
function callDomainA(){
  var url = 'https://domainA.com/getUser?callback=?';

  var xhr = _createCORSRequest('GET', url);
  if (!xhr) {
    console.log('CORS not supported by browser, try jsonp');
    _doJSONP(url)
  }
else{
    xhr.onload = function() {
        console.log('Success : ' + JSON.stringify(xhr.responseText));
    };

    xhr.onerror = function() {
        console.log('ERROR : There was an error with the CORS request.');
    };
}

xhr.send();

return false;
}

function _doJSONP(){
   (...)
}

function _createCORSRequest(method, url) {
   var xhr = new XMLHttpRequest();

    if ("withCredentials" in xhr) 
        xhr.open(method, url, true);  // XHR for Chrome/Firefox/Opera/Safari.
    else if (typeof XDomainRequest != "undefined") {
        xhr = new XDomainRequest();  // XDomainRequest for IE.
    xhr.open(method, url);
 } 
 else 
    xhr = null;  // CORS not supported.

 return xhr;
} 
```

然后我有域 B，它从域 A 加载 js 脚本，然后执行 callDomainA() 函数：

```
<script src="https://domainA.com/domainApublicjsfile.js"    type="text/javascript"></script>
(...)
callDomainA();
(...) 
```

当我在域 B 中加载包含对域 A 的调用的页面并触发对 callDomainA() 的调用时，代码检测到浏览器 (Firefox) 可以执行 CORS，但我收到的标题指示错误 500 和 ns_error_dom_bad_uri

我会期待这样的事情，因为我在域 A 中没有做任何事情来接受 CORS 请求或任何事情，但我担心请求似乎没有到达服务，或者至少 console.log() 是没有注册任何东西。

我错过了什么吗？

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:07:59.507

`?`仅在 URI 中有效一次，以表示查询字符串的开始。之后，它需要进行 URL 编码：

```
.../getUser?callback=%3f 
```

但是，虽然这可能会通过浏览器的验证，但它仍然不是 JSONP 的有效“[填充](http://en.wikipedia.org/wiki/JSONP)”。`callback`应该指定将被调用并传递 JSON 响应的全局函数的名称：

```
function handleJSONPRequest(data) {
    // ...
}

function callDomainA(){
    var url = 'https://domainA.com/getUser?callback=handleJSONPRequest';

    // ...
} 
```

`callback=?`快捷方式是某些库（例如 jQuery）的一项功能，可将 替换为`?`生成的函数的名称。但是，它不受 支持`XMLHttpRequest`。

```
$.getJSON('.../getUser?callback=?');
// GET .../getUser?callback=jQuery18204235873776488006_1354320142256&... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T10:16:25.330

我想向您推荐我的名为[simpleS](http://micnic.github.com/simpleS)的模块，它以非常简单的方式实现了 CORS，并在 Google Chrome、Mozilla Firefox 和 Opera 上进行了测试。默认情况下，它旨在接受来自当前主机或本地文件系统来源的请求。要接受来自其他来源的请求，您需要以下内容：

```
var simples = require('simples');
var server = simples(80);

server.config({
    cors: {
        origins: ['domaina.com', 'domainb.com'] // ['*'] for requests from anywhere
    }
});

server.get('/getUser', function (request, response) {
    // Your application logic
}); 
```

更多关于 simples 的文档在[这里](https://github.com/micnic/simpleS/wiki/Documentation)。该模块仍在开发中，但您可以尝试一下。

# python - 线程中的异常：必须是序列，而不是实例

> ID：13653669
> 
> 赞同：27
> 
> 时间：2012-11-30T21:47:41.920
> 
> 标签：python, multithreading, ipc

我正在研究python并且我试图执行一个带有1个参数“q”的线程，但是当我试图执行它时发生一个奇怪的异常，这是我的代码：

```
class Workspace(QMainWindow, Ui_MainWindow):
    """ This class is for managing the whole GUI `Workspace'.
        Currently a Workspace is similar to a MainWindow
    """

    def __init__(self):

        try:
            from Queue import Queue, Empty
        except ImportError:
    #from queue import Queue, Empty  # python 3.x
            print "error"

        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()

        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()

        t = threading.Thread(target=enqueue_output, args=(p.stdout, q))
        #t = Thread(target=enqueue_output, args=(p.stdout, q))

        t.daemon = True # thread dies with the program
        t.start()

# ... do other things here
        def myfunc(q):
            while True:

                try: line = q.get_nowait()
         # or q.get(timeout=.1)
                except Empty:
                    print('')
                else: # got line
    # ... do something with line
                    print "No esta null"
                    print line  

        thread = threading.Thread(target=myfunc, args=(q))
        thread.start() 
```

它失败并出现以下错误：

```
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
TypeError: myfunc() argument after * must be a sequence, not instance 
```

我不知道发生了什么！请帮忙！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-30T22:05:14.193

`args`参数 to应该是一个元组，而`threading.Thread`您传递`(q)`的不是 - 它与`q`.

我猜你想要一个单元素元组：你应该写`(q,)`.

# javascript - Raphael.js - if / else 语句在点击时不切换

> ID：13653670
> 
> 赞同：2
> 
> 时间：2012-11-30T21:47:47.327
> 
> 标签：javascript, if-statement, raphael, toggle

我有 3 个框，我希望它们在它们之间切换，并在第二次单击时关闭。目前它在它们之间切换很好（IF部分），但是当我单击同一个框以将其关闭时，如果不起作用（“else if”部分似乎不起作用）。我想我需要重组 if 语句。任何帮助是极大的赞赏。

这是 JS 小提琴：http: [//jsfiddle.net/FFdjS/5/](http://jsfiddle.net/FFdjS/5/)

这是元素的单击 if 语句之一：

```
box1.click(function() {
    if (box1.attr(strOff)) {
        box1.attr(strOn);
        box2.attr(strOff);
        box3.attr(strOff);
    } else if (box1.attr(strOn)) {
               box1.attr(strOff);
    } else {}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:23:08.477

您创建的`if-else`语句将始终在第一个`if`...

这样做的原因是，对于条件，您传递的方法的结果将始终返回 true。正如[Raphaels attr Spec](http://raphaeljs.com/reference.html#Element.attr)所指出的，该方法将返回......

*   元素（如果传递了 attr 名称和值）
*   值（如果传递了 attr 名称，则为属性）
*   值数组（如果传递了 attr 名称）
*   attr 对象（如果没有通过）

所以，你本质上只是`setting`那个 if 语句中的盒子，然后它会返回 true。相反，您应该只传递需要检查的 attr 名称并将其与您的值进行比较。如同，

`if(box1.attr('stroke-width')=='5'){...}else{...}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:25:09.440

`Element.attr(...)`当对象作为参数传递时设置属性。返回元素。如果您想对其进行调整-使用以下内容：

```
box1.click(function() {
    if (box1.attr('stroke-width') == 1) {
        box1.attr(strOn);
        box2.attr(strOff);
        box3.attr(strOff);
    } else if (box1.attr('stroke-width') == 5) {
           box1.attr(strOff);
    } else {}
}); 
```

[jsFiddle](http://jsfiddle.net/YLrzk/1/)上的示例

# iphone - 在 UITextView 上滚动内阴影

> ID：13653672
> 
> 赞同：2
> 
> 时间：2012-11-30T21:48:00.480
> 
> 标签：iphone, objective-c, ios

我想子类 UITextView 能够绘制带有自定义边框加上顶部+左内阴影的圆形矩形。

我在为任何（静态边界）视图创建这种效果（通过阅读[这篇文章）方面取得了巨大成功，但在滚动视图时遇到了问题。](https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer)

我在自定义类的 -setFrame 实例方法中做的这个效果：

```
- (void)setFrame:(CGRect)frame {
[super setFrame:frame];

UIColor *borderColor = [UIColor colorWithRed:BORDER_COLOR_RED green:BORDER_COLOR_GREEN blue:BORDER_COLOR_BLUE alpha:BORDER_COLOR_ALPHA];

// Store index of the shadow sublayer for future use
[self setShadowLayerIndex:[LayerFormatter formatAsRoundRectWithShadowOn:self withBackgroundColor:[UIColor whiteColor] andBorderColor:borderColor]];} 
```

formatAsRoundRectWithShadowOn: 是一个类方法，定义为：

```
+(NSUInteger)formatAsRoundRectWithShadowOn:(UIView*)view withBackgroundColor:(UIColor *)backgroundColor andBorderColor:(UIColor *)borderColor {
if([view isKindOfClass:[UITextField class]])
    ((UITextField*)view).borderStyle = UITextBorderStyleNone;
view.backgroundColor = backgroundColor;

view.layer.borderWidth = 1.0;
view.layer.borderColor = [borderColor CGColor];
view.layer.cornerRadius = CORNER_RADIUS;
view.layer.masksToBounds = YES;

//Add some insets to the text: https://stackoverflow.com/a/4423805
UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 20)];

if([view isKindOfClass:[UITextField class]])
{
    ((UITextField*)view).leftView = paddingView;
    ((UITextField*)view).leftViewMode = UITextFieldViewModeAlways;
}

// Create and apply a shadow layer. Help here: https://stackoverflow.com/questions/4431292/inner-shadow-effect-on-uiview-layer
CAShapeLayer* shadowLayer = [CAShapeLayer layer];

[shadowLayer setFrame:view.bounds];
[shadowLayer setShadowColor:[[UIColor blackColor] CGColor]];
[shadowLayer setShadowRadius:3.0f];
[shadowLayer setShadowOpacity:0.35f];
[shadowLayer setShadowOffset:CGSizeMake(2.0f, 2.0f)];

[shadowLayer setFillColor:[backgroundColor CGColor]];

// Causes the inner region in this example to NOT be filled.
[shadowLayer setFillRule:kCAFillRuleEvenOdd];

// Create inner and outer rectangle paths.
CGMutablePathRef path = CGPathCreateMutable();

// Outer path should be bigger than the field
UIBezierPath *bpOuter = [UIBezierPath bezierPathWithRect:CGRectInset(shadowLayer.bounds, -10, -10)];

// Inner path is the visible part of the view
UIBezierPath *bpInner = [UIBezierPath bezierPathWithRoundedRect:shadowLayer.bounds cornerRadius:CORNER_RADIUS];

// Add outer path and then add the inner path so it's subtracted from the outer path.
CGPathAddPath(path, NULL, bpOuter.CGPath);
CGPathAddPath(path, NULL, bpInner.CGPath);

CGPathCloseSubpath(path);

[shadowLayer setPath:path];
CGPathRelease(path);

[[view layer] addSublayer:shadowLayer];

NSUInteger addedAtIndex = [[[view layer] sublayers] indexOfObject:shadowLayer];
return addedAtIndex;} 
```

为了在文本视图滚动时处理正确的阴影+边框显示，我正在使用我的自定义类 -setBounds 方法来更新阴影层框架：

```
-(void)setBounds:(CGRect)bounds{
[super setBounds:bounds];

// Change the frame of the shadow layer to reflect new bounds
[[[[self layer] sublayers] objectAtIndex:self.shadowLayerIndex] setFrame:bounds];} 
```

我遇到的问题是向下滚动（插入新文本行时）或顶部（向上滚动到文本开头时）底部的阴影+框架绘制不正确。

插入新行或滚动完成（视图再次为静态）后，视图绘制正确。

任何关于这个问题的见解都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:24:36.123

我有时间深入研究这个问题并找到了我想分享的解决方案。

起初我意识到最好将阴影层设置`-awakeFromNib`在`-setFrame`.

为了在文本视图滚动时处理正确的阴影+边框显示，我改变了这样的方法：更新我现在`-layoutSubviews`在自定义类中使用覆盖的阴影层。在`-layoutSubviews`覆盖中，我正在重新创建阴影层以尊重新的边界，然后调用`[super layoutSubviews]`.

滚动，改变方向 - 它就像一个魅力！

```
- (void)layoutSubviews
{
    [self updateShadow];
    [super layoutSubviews];
}

- (void)updateShadow
{
    if (shadowLayer)
        [shadowLayer removeFromSuperlayer];

    shadowLayer = [LayerFormatter addInnerShadowLayerOn:self withShadowColor:[UIColor blackColor]];
} 
```

请注意，`+(NSUInteger)formatAsRoundRectWithShadowOn:(UIView*)view withBackgroundColor:(UIColor *)backgroundColor andBorderColor:(UIColor *)borderColor`现在将层引用返回到视图层层次结构中已添加的层（返工很简单）：

```
+(CAShapeLayer *)addInnerShadowLayerOn:(UIView *)view withShadowColor:(UIColor *)shadowColor; 
```

任何证明这种方法是正确的并且不仅仅是有效的证据/评论都将受到高度赞赏。

# svg - 将 D3.JS 示例“bullet.html”保存到 SVG

> ID：13653674
> 
> 赞同：7
> 
> 时间：2012-11-30T21:48:15.267
> 
> 标签：svg, d3.js, phantomjs, bullet-chart

我正在使用[http://bl.ocks.org/4061961](http://bl.ocks.org/4061961)上的 D3.JS 站点上的项目符号图示例：

![在此处输入图像描述](../Images/281d9ea5a62fcbd15bc65a8b16bba753.png)

我的目标是将子弹图本身保存为 SVG 文件，以便在 Inkscape 中进行编辑。使用带有 phantom.js 的 rasterize.js 示例，我能够修改代码以将项目符号图保存到 PNG 文件中，并以编程方式提取 SVG 代码并将其保存到文件中。下面是保存 SVG 代码的修改后的 rasterize.js 文件：

```
var page = require('webpage').create(), address, output, size;

if (phantom.args.length < 2 || phantom.args.length > 3) {
    console.log('Usage: rasterize.js URL filename');
    phantom.exit();
} else {
    address = phantom.args[0];
    output = phantom.args[1];
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
        } else {
            window.setTimeout(function () {
                page.render(output);
                var results = page.evaluate(function(){
                   return document.getElementById('chart').innerHTML
                })
            console.log(results);
            phantom.exit();
        }, 200);
    }
});
} 
```

上面的 JS 存储在“rasterize.js”中，并在命令行中提供给 phantomjs.exe 以创建 SVG 和 PNG 文件。

```
> phantomjs.exe rasterize.js bullet.html bullet.png > bullet.svg 
```

这是存储在 GIST 上的“bullet.svg”文件的链接：[https](https://raw.github.com/gist/4178632/08396404f40210a801ef36aeee526d9f128952a8/bullets.svg) ://raw.github.com/gist/4178632/08396404f40210a801ef36aeee526d9f128952a8/bullets.svg 您可以将此文件保存到本地驱动器并在浏览器中查看.

但是，正如当前存储的那样，此文件不会在 Inkscape 中加载。我通过添加 ?xml 标头并使用 xmlns 修改 svg 元素来修改生成的文件，因为我还手动将各个元素包装到单个块中。

我错过了什么？一旦我弄清楚如何手动使其工作，我将需要修改提取 SVG 的代码以编写标题。

修改 rasterize.js（上）以编程方式编写干净的 SVG 的其他想法或技巧？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T03:40:52.793

[svg crowbar](http://nytimes.github.io/svg-crowbar/)对单个 svg 元素做得很好，它只是一个你必须添加的书签（仅适用于 chrome）。它是由纽约时报开发的。

> 一个 Chrome 特定的小书签，它从 HTML 文档中提取 SVG 节点和随附的样式，并将它们作为 SVG 文件下载 - 例如，您可以在 Adob​​e Illustrator 中打开和编辑该文件。因为 SVG 与分辨率无关，所以当您想使用 Web 技术创建要打印的文档时（例如，可能在新闻纸上），它非常适合。它是在考虑 d3.js 的情况下创建的，但无论您选择如何生成 SVG，它都应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-22T18:32:17.147

[您还可以使用我刚刚发布的名为SaveSVG](https://github.com/akulmehta/SaveSVG)的开源库。

# spring - com.atomikos.icatch.SysException 错误：无法锁定 /var/lib/tomcat6/./tm.out

> ID：13653677
> 
> 赞同：2
> 
> 时间：2012-11-30T21:48:24.163
> 
> 标签：spring, ubuntu, tomcat6, atomikos

我在 Ubuntu 中使用 Tomcat6 部署 Spring 项目时遇到问题，而在窗口中部署时没有发生。

错误日志显示了这一点；

> PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'transactionTimeout' 抛出异常；嵌套异常是 com.atomikos.icatch.SysException: Error in init(): Couldn't get lock for /var/lib/tomcat6/./tm.out at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues( AbstractAutowireCapableBeanFactory.java:1361) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) at org .springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) 在 org. java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector .CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602 ) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Thread.java:722) 引起：org.springframework.beans.PropertyBatchUpdateException；嵌套的PropertyAccessExceptions(1)是：PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'transactionTimeout' 抛出异常；嵌套异常是：Couln'

请帮助我找到解决此错误的方法..

先感谢您。

# php - 定义“__autoload”函数

> ID：13653678
> 
> 赞同：1
> 
> 时间：2012-11-30T21:48:26.420
> 
> 标签：php, autoload

在 PHP.net 上，__autoload 的描述为“尝试加载未定义的类”。但是，它声明您可以定义“启用类自动加载”功能。所以，假设我这样定义函数：

```
function __autoload($className) {
    if (file_exists(ROOTDIRECTORY . $className . '.class.php')) {
        require_once(ROOTDIRECTORY . $className . '.class.php');
    }
} 
```

__autoload 是否仍然只加载尚未定义的类，或者上面编写的函数的内容是否会覆盖此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:25:42.737

是的，它只会触发尚未包含的类。这意味着您可以`require_once()`用更简单的方法替换`require()`它，从而减少 PHP 必须在后台执行的开销处理量。

此外，您应该`else { return false; }`在函数中添加一个，以便 PHP 在找不到类文件时触发相应的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:53:24.250

`class_exists`仅当函数返回时才会调用此函数`false`。

# java - Java：计算税

> ID：13653679
> 
> 赞同：1
> 
> 时间：2012-11-30T21:48:28.797
> 
> 标签：java, bluej

我正在编写一个计算所得税的程序，该程序会根据您的个人收入增加税额。我在“退税”行不断收到错误“可变税可能尚未初始化”；但我不确定为什么。到目前为止，这是我的代码：

```
import java.util.Scanner;  //Needed for the Scanner Class
/**
 * Write a description of class IncomeTax here.
 * @author 
 * 11/30/2012
 * The IncomeTax class determines how much tax you owe based on taxable income.
 */
 /**
 * The getTax returns the tax for the income.
 */
public double getTax() {
    double tax;
    if (income <10000.0) {
        tax = 0.10;
    }
    else {
        if (income > 10001.0 && income < 30000.0) {
            tax = 0.15;
        }
        else {
            if (income > 30001.0 && income < 60000.0) {
                tax = 0.25;
            }
            else {
                if (income > 60001.0 && income < 130000.0) {
                    tax = 0.28;
                }
                else {
                    if (income > 130001.0 && income < 250000.0) {
                        tax = 0.33;
                    }
                    else {
                        if (income > 250001.0) {
                            tax = 0.35;
                        }
                    }
                }
            }
        }
   }
   return tax;
}

/** 
 * The constructor accepts an argument for the income field.
 */
public IncomeTax(int i)
{
  income = i;
}
/**
 * The setIncome method accepts an argument for the income field.
 */
public void SetIncome(int i) {
    income = i;
}
/**
 * The getIncome method returns the income field.
 */
public int getIncome() {
    return income;
} 
```

* * *

我还没有完成，我仍然需要为用户编写代码以实际输入他们的信息进行计算，但我不想在不先修复退税行的情况下继续往下走。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:49:10.243

```
double tax; 
```

您需要初始化局部变量。

例子：

```
double tax=0.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:49:18.557

您需要初始化`tax`：

```
double tax = 0.0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:54:19.223

# 简短的回答

因为您可能没有通过任何`if`条件，所以不能保证设置`tax`. 利用：

```
double tax = 0.10; 
```

# 长答案

你有很多冗余代码。您可以通过以下方式删除很多内容：

```
public static double getTax(double income)
{
  double tax = 0.10;
  if (income > 250000.0) {
    tax = 0.35;
  } else if(income > 130000.0) {
    tax = 0.33;
  } else if(income > 60000.0) {
    tax = 0.28;
  } else if(income > 30000.0) {
    tax = 0.25;
  } else if(income > 10000.0) {
    tax = 0.15;
  }
  return tax;
} 
```

这样你就不需要检查不可能是真的事情，并且通过使用`else if`代码不会每次都缩进。干杯! 此外，通过传递参数并创建函数`static`，您可以让自己在其他地方使用该函数，如果您需要的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T21:53:28.033

是的，您需要按照其他答案中的说明初始化变量。或者，如果您希望 tax 能够为 null，您应该使用 java 对象而不是原始对象。

```
Double tax = null; 
```

# cassandra - Apache Cassandra 从计数器中删除

> ID：13653681
> 
> 赞同：13
> 
> 时间：2012-11-30T21:48:44.897
> 
> 标签：cassandra, counter, cql3

我正在开发一个用于研究 Apache Cassandra 和 Java EE 6 的小型 Web 应用程序。Cassandra 版本是 1.1.6。

有一个问题让我发疯......我创建了一个带计数器的表（使用 cqlsh v. 3.0.0）

```
CREATE TABLE test (
  author varchar PRIMARY KEY,
  tot counter
) 
```

并以这种方式放置一些值：

```
update test set tot = tot +1 where author = 'myAuthor'; 
```

列族已完美更新

```
author   | tot
----------+-----
myAuthor |   1 
```

但是，如果您尝试删除此行然后再次更新（使用相同的键），那么什么也不会发生！该表不再更新，我不知道为什么：在我看来，一旦你使用了一个密钥，你就不能再使用它了。我在 datasax 文档（http://www.datastax.com/docs/1.1/references/cql/cql_lexicon）中寻找线索，但没有找到解决方案。

有人能帮我吗？预先感谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T01:32:35.673

Cassandra 对删除计数器有一些严格的限制。您不能真正删除计数器，然后在任何短时间内再次使用它。来自[Cassandra 维基](http://wiki.apache.org/cassandra/Counters)：

> 计数器移除本质上是有限的。例如，如果您非常快速地发出“递增、删除、递增”序列，则删除可能会丢失（如果由于某种原因删除恰好是最后收到的消息）。因此，计数器的删除仅用于最终删除，即当删除的计数器随后不增加时。这也适用于行删除：如果您删除一行计数器，增加该行中的任何计数器（在删除之前存在）将导致未确定的行为。请注意，如果您需要重置计数器，一个选项（不幸的是不是并发安全的）可能是读取其值并添加 -value。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T10:22:50.833

重新添加已删除的计数器键的解决方案是从表中清除它的所有记录：

```
nodetool repair $table
cqlsh -c "ALTER TABLE $table WITH gc_grace_seconds=1;"
sleep 1
nodetool compact $table 
```

可以想象，这在实际系统中是不实用的，如果一个重要的计数器被意外删除，可能应该保留以备不时之需。

最好确保永远不会发生。

# mysql - 如何链接这些 MYSQL 表？

> ID：13653685
> 
> 赞同：0
> 
> 时间：2012-11-30T21:48:53.677
> 
> 标签：mysql, sql, create-table

我一直在绞尽脑汁想弄清楚如何通过外键完成链接以帮助使生活更轻松。我设置了两个表，并希望对它们进行第三个链接，并在第三个表中添加几列。这是我想出的语法...

## [SQL Fiddle（带有示例数据）](http://sqlfiddle.com/#!2/8ccd2)

**衬衫**

```
CREATE TABLE shirts(
    shirt_id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    shirt_name VARCHAR(100) NOT NULL,
    shirt_type VARCHAR(10) NOT NULL,
    shirt_size VARCHAR(20) NOT NULL,
    qp_price_id VARCHAR(20) NOT NULL,
    o_price_id VARCHAR(20) NOT NULL
)ENGINE=INNODB; 
```

V 领、插肩袖、帽袖等衬衫会更多……

**价格表**

```
CREATE TABLE price_list(
    price_id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    price_cat VARCHAR(20) NOT NULL,
    price NUMERIC(6,2) NOT NULL
)ENGINE=INNODB 
```

我想做的是创建一个第三个表，从衬衫表中选择 shirt_name、shirt_type 和 shirt_size 列，然后创建两列，一列是 qp_price，另一个是 o_price，并将这些外键设置为要抓取的价目表表那件衬衫的价格……我想可能会以某种方式使用 WHERE 子句，其中显示的价格由

```
WHERE shirts.qp_price_id=price_list.price_cat AND shirts.o_price_id=price_list.price_cat 
```

我想这样做，这样我就可以尽可能轻松地对多个项目进行价格更改。这一块仅适用于我需要代表的每种圆领衬衫……还有更多……所有圆领衬衫的价格与新生儿 - 1X 成人相同，所以我将这些归于“crn-qp-a”和“crn-oa”，所以如果我可以一次更改“crn-qp-a”的价格值并让它自动更新到 20 个实例，所以我不必这样做 20 次....这样做有意义吗？....请帮助...大声笑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:08:48.943

你想，首先，从`shirts`表中删除价格信息并保留它`price_list`，然后创建第三个表，在其中你可以通过`shirt_id`和`price_id`

```
create table shirt_price (
  shirt_id int UNSIGNED not null,
  qp_price_id int UNSIGNED not null,
  o_price_id int UNSIGNED not null,
  primary key (shirt_id, price_id),
  CONSTRAINT shirt_price_ibfk_1 FOREIGN KEY (shirt_id) REFERENCES shirts (shirt_id),
  CONSTRAINT shirt_price_ibfk_2 FOREIGN KEY (qp_price_id) REFERENCES price_list (price_id),
  CONSTRAINT shirt_price_ibfk_3 FOREIGN KEY (o_price_id) REFERENCES price_list (price_id)   
)ENGINE=INNODB; 
```

例如，如果您的`shirts`桌子上有以下衬衫：

```
SHIRT_ID    SHIRT_NAME      SHIRT_TYPE  SHIRT_SIZE  
1           Crewneck Tee    Men         S
2           Crewneck Tee    Men         M
3           Crewneck Tee    Men         L
4           Crewneck Tee    Men         1X
5           Crewneck Tee    Men         2X 
```

你的`price_list`桌子有以下价格：

```
PRICE_ID    PRICE_CAT   PRICE
1           crn_qp_a    27.2
2           crn_o_a     25.31
3           crn_qp_b    28.1 
```

然后每件衬衫将链接到 2 个价格，一个是`qp`价格，另一个是`o`价格。

```
SHIRT_ID    QP_PRICE_ID   O_PRICE_ID
1           1             2
2           1             2
3           1             2
4           3             2          
5           1             2 
```

要查询所有男士衬衫的价格，请执行以下操作：

```
select s.shirt_name, s.shirt_type, s.shirt_size, p_qp.price, p_o.price
from shirts s,
   price_list p_qp,
   price_list p_o,
   shirt_price rel
where s.shirt_type = 'Men'
  and rel.shirt_id = s.shirt_id
  and rel.qp_price_id = p_qp.price_id
  and rel.o_price_id = p_o.price_id; 
```

**有用的阅读：**

*   [mysql 连接](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

# linux - Windows .NET（或 LabVIEW）应用程序和 Linux c/c 应用程序之间的数据通信

> ID：13653687
> 
> 赞同：1
> 
> 时间：2012-11-30T21:49:02.677
> 
> 标签：linux, windows, sockets, networking, tcp

我想在 C#.NET 或 LabVIEW 上创建一个用户界面，并与在基于 linux 的单板计算机上运行的硬件控制应用程序进行无线（WLAN）通信。完成它的最好和最简单的方法是什么？

注意：基于 linux 的应用程序将使用 C/C++ 编写。

# usb - 设备描述符读取/64，错误 -110

> ID：13653692
> 
> 赞同：22
> 
> 时间：2012-11-30T21:49:13.930
> 
> 标签：usb, debian

我有一个运行基于 debian 的 openmediavault 的存储服务器。操作系统位于直接插入主板的 USB 3.0 记忆棒中（没有 USB 集线器或其他东西）。系统运行良好大约 3 个月和 2 天前我收到此错误：

```
usb 1-3: device descriptor read/64, error -110
usb 1-3: device not accepting address 33, error -110
usb 1-3: device not accepting address 34, error -110
hub 1-0:1.0: unable to enumerate USB device on port 3 
```

当我重新启动服务器时，一切都很好了。第二天我面临同样的错误......

我能做些什么来解决这个问题。我不想丢失 3TB 的数据...

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-01T16:53:45.320

USB错误-110表示“传输完成前超时”，这可能是由任何原因引起的。最常见的，是因为超出了功率；主机无法为笔式驱动器提供足够的电力来运行。由于没有足够的电量，U盘也无法将设备描述符提供给主机，导致无法识别等。也许您的主板上装满了消耗所有可用功率的设备。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T05:13:39.393

问题在于 USB 3.0 记忆棒需要比平时更多的电流才能用于 USB 2.0 设备。这会导致错误。我更换了棒，除此之外，我还安装了最新的 BIOS 驱动程序。没有更多的问题！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-20T13:43:14.277

只是添加另一个数据点：我的 Inateck 双托架 USB 3.0 到 SATA 设备（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/B00N1KXE9K)）遇到“错误 -110”消息。这为我修复了它：

1.  `shutdown -h now`（关掉电脑）
2.  从计算机上拔下 USB 设备。
3.  拔下电脑背面的电源线。
4.  拔下 Inateck 的电源 -**从墙壁插座上**拔出墙壁疣插头。
5.  注意到 Inateck 壁疣上有一个绿色发光的 LED；等到天黑了。
6.  总共等了约 3 分钟。
7.  将所有内容重新插入并启动。

工作喜欢一种魅力。

**注意**：以前我尝试只是拔下计算机并让它静置一会儿；那没有用。我不得不从电脑上拔下 USB 插头，从墙上拔下 USB 设备电源适配器。

必须与 USB 电源供应/协商有关吗？

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-05T07:38:32.353

我遇到了同样的错误，但没有插入 USB 设备。我在 HP ProBook 430 的内部 ssd 驱动器上安装了 Suse 13.2 和 42.2。当我启动到 42.2 时，我得到了那个错误

> 设备描述符读取/64，错误 -110

并且启动只是停在那里。在同一个硬盘上使用 13.2 就够奇怪了，我可以毫无问题地启动。遵循 Johnsters 的建议，拔掉任何电源，包括移除电池，终于做到了，所以非常感谢。对于所有遇到此帖子的人，在他们的问题中没有任何明显的 USB 设备交互：尝试使您的系统无电压，它仍然可以解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T14:18:12.413

我家的主电压不够高。它低于 180V（通常为 220-240）。有时我会遇到同样的错误。有时我的电脑会自行重启。

# javascript - 鼠标光标电动效果

> ID：13653693
> 
> 赞同：1
> 
> 时间：2012-11-30T21:49:14.737
> 
> 标签：javascript, html, css, flash, cursor

在您的专业意见中，什么是实现从屏幕中心的中心位置产生的电效果的最佳方式，该中心位置连接到光标并跟随光标移动到任何地方？

很像等离子球……只是它会一直亮着，无论走到哪里都跟着光标走。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:53:29.210

或许看看[Canvas Lightning](http://www.somethinghitme.com/projects/canvaslightning/)。

# windows-8 - Page.OnNavigatedTo 不会在 Windows 应用商店应用程序中被调用

> ID：13653694
> 
> 赞同：2
> 
> 时间：2012-11-30T21:49:17.297
> 
> 标签：windows-8, winrt-xaml

我有一个 Windows 应用商店乱七八糟的应用程序。我添加了一个 Basic Page，它添加了 Common 类，例如 LayoutAwarePage。

但是 Page.OnNavigatedTo 在应用程序启动时不会被调用。MSDN 文档说：

> 当页面加载并成为父框架的当前源时调用

这发生在启动期间。当没有调用 LoadState 时，我发现了这一点。

Rick Barraza 在他的演示中使用了 OnNavigatedTo 调用的 LoadState：

[http://channel9.msdn.com/Series/Migrating-apps-from-Windows-Phone-to-Windows-8/Binding-the-Interface-in-Windows-Store-apps#time=2m50s](http://channel9.msdn.com/Series/Migrating-apps-from-Windows-Phone-to-Windows-8/Binding-the-Interface-in-Windows-Store-apps#time=2m50s)

我知道有些东西坏了，因为现在我已经添加了一些导航按钮，调用了 OnNavigatedFrom 但由于 _pageKey 为空，因为它不是由 OnNavigatedTo 设置的*。*

我其实很困。这是 Microsoft 原生 Page 类的一个失败，但显然我是唯一遇到此问题且 100% 可发现的人。奇怪的。

**更新 1**

我添加了一个新的 Grid App 项目并且可以正常工作。Common 的东西都是标准的，但它确实不同于将 Basic Page 添加到空应用程序时编写的 Common 的东西。

我将尝试从一个新的空应用程序中复制它。

**更新 2**

好吧，我放弃了。一个新的空白应用程序并添加一个新的空白页就可以了。我将复制并粘贴我的页面并假装它从未发生过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:05:08.247

我遇到了同样的问题，这是由于在我添加的基本页面中存在 OnNavigateTo 的空覆盖。

```
public sealed partial class MvvmView1
    {
        public MvvmView1()
        {
            this.InitializeComponent();
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T14:21:01.790

为了调用 OnNavigatedTo，您的 Frame 必须调用其 Navigate 方法。

```
Frame localFrame = this.MyFrame; //this assumes MyFrame is Frame that exists in xaml and has a name 

localFrame.Navigate(new myPage()); 
```

如果您使用内容注入

```
localFrame.Content  = new myPage(); 
```

myPage 的 OnNavigatedTo 事件不会触发，因为该页面仅被加载，而不是导航到。

# c++ - (C++) 错误：无效使用非静态成员函数'int Demo::addTwoNumbers(int, int)'

> ID：13653696
> 
> 赞同：0
> 
> 时间：2012-11-30T21:49:17.857
> 
> 标签：c++, boost-python

我正在尝试使用boost python 用一个名为“addTwoNumbers”的函数来包装一个简单的演示类。这是头文件：

```
#ifndef DEMO_H_
#define DEMO_H_

#include <boost/function.hpp>

class Demo
{
public:
    Demo() {}
    virtual ~Demo() {}

    typedef void (DemoCb) (int,int,int);
    boost::function<DemoCb> onAddTwoNumbers;

    int addTwoNumbers(int x, int y);

    // Executes a callback within a thread not controlled by the caller.
    void addTwoNumbersAsync(int x, int y, boost::function<DemoCb> callback);

};

#endif /* DEMO_H_ */ 
```

这是包装：

```
#include <boost/python.hpp>
#include "../demo.h"
using namespace boost::python;

// Create a python module using boost. The name 'demo' must match the name in the makefile
BOOST_PYTHON_MODULE(python_wrap_demo) {
    // Wrapping the addTwoNumbers function:
    class_<Demo>("Demo", init<>())
        .def("addTwoNumbers", Demo::addTwoNumbers)
    ;
} 
```

我让它适用于一个类似的功能，它没有包含在一个类中。为什么我现在收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:58:41.123

我不熟悉`boost::python`，但我相信你只需要`&`传递会员的地址`.def("addTwoNumbers", &Demo::addTwoNumbers)`。非成员函数和静态成员函数可以隐式转换为函数指针，但非静态成员函数不同，需要`&`传递地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:00:51.170

错误信息非常清楚；`addTwoNumbers`是 的成员函数`Demo`，而不是静态函数，但您正试图将其作为静态函数调用。你必须有一个实例`Demo`来调用它。

在您的情况下，`addTwoNumbers`不需要是成员函数，因此只需将其设为静态即可。以供将来参考： http: [//www.parashift.com/c++-faq/pointers-to-members.html](http://www.parashift.com/c++-faq/pointers-to-members.html)

# javascript - 这个最大代码有什么作用？

> ID：13653697
> 
> 赞同：1
> 
> 时间：2012-11-30T21:49:31.367
> 
> 标签：javascript

这是一个非常简单的例子，我希望你们中的一些人能回答。这是一个应该返回参数中给定的最大值的函数。但问题是我不明白它是*如何做到的。*

```
function max(a, b) {
  return [a, b][ +(a < b) ];
} 
```

我已经习惯了像这样的 max 函数，所以我不知道上面是如何工作的：

```
function max(a, b) {
    return a > b ? a : b;
} 
```

如果有人可以向我解释这段代码是如何找到最大数字的，那将非常有帮助。例如，他为什么使用数组？为什么`+`以这种方式使用一元？（我是 JS 新手）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T21:51:32.733

`(a < b)`- 评估为布尔值`true`/`false`

`+(a < b)` 将布尔值类型转换为 int，因此您将拥有`0`或`1`

`[+(a < b)]` - 成为数组索引，`[0]`或`[1]`

`[a,b][+(a<b)]`- 使用`[0]`or `[1]`，将从新的临时数组中提取`a`or值。`b``[a,b]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T21:51:17.690

如果`a`小于`b`，则结果为，由于一元运算符`true`，它转换为数字。`1``+`

否则结果是`false`，它转换为`0`.

因此`0`and`1`用作索引以从数组中获取值。

* * *

可以这样想：

```
function max(a, b) {
    var arrayOfValues = [a, b],
        a_is_less_than_b = a < b,
        index;

    if (a_is_less_than_b)
       index = 1;
    else
       index = 0;

    return arrayOfValues[index];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:52:45.723

**设想：**

1.  `[a, b]`创建一个包含索引为 0 和 1 的两个元素的数组；
2.  `(a < b)`返回一个布尔值`true`或`false`；
3.  `+(false|true)`正在将布尔值转换为数字类型，因此它变为 0 或 1；
4.  `[a, b][0|1]`从相应索引下的数组中返回元素。

**例子：**

```
 var a = 1, b = 2; 
```

1.  `[1, 2]`;
2.  `(1 < 2) === true`;
3.  `+(true) === 1`;
4.  `[1, 2][1] === 2`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T21:50:49.090

`a`您创建一个由和组成的数组`b`，然后决定您想要的索引。我会扩展它：

```
function max(a, b) {
  var arr = [a,b];
  var aLTb = (a < b); // a boolean - whether or not a is less than b
  var index = +aLTb; // convert boolean to 0 or 1, which gives us an index
  return arr[index];
} 
```

# javascript - 有没有比使用 .live() 更好的方法将事件附加到 AJAX 加载的元素？

> ID：13653698
> 
> 赞同：1
> 
> 时间：2012-11-30T21:49:57.760
> 
> 标签：javascript, jquery

使用较新的 jQuery `.click()`,`.submit()`等被替换为：

```
$('#foo').on('click', function() {
    //
}); 
```

就最佳实践而言。有没有发生过类似的事情`.live()`？或者这仍然是最好的方法吗？

```
$('#foo').live('click', function() {
    //
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:54:27.640

委托使用`.on()`是正确的方法，而不是使用现场

```
$('staticAncestorElement').on('click','#foo',function(){

}); 
```

[从 jQuery live()](http://api.jquery.com/live/)文档中可以看出

> $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> 
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> 
> $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:54:37.727

[**On()**](http://api.jquery.com/on)具有所有其他绑定的所有功能。要绑定到动态元素，您可以`on()`像这样使用：

```
$(document).on('click', '#foo', function() {
    //
}); 
```

最好使用 close 静态元素而不是`document`.

引用我关于 jQuery 提供的许多绑定方法的另一篇文章：

> `bind()`在1.0、1.3、1.4.2 和 1.7 中`live()`添加。`delegate()``on()`
> 
> 从 1.7 开始`on()`是首选用途，`live()`已弃用且根本不推荐使用。如果您使用的是 1.3，请使用1.4.2`bind()`代替 和自 1.7 使用，而不是其他任何一个。`live()``delegate()``live()``on()`

您可以在[此处](https://stackoverflow.com/a/11148053/448144)查看完整的帖子，其中还列出了`live()`jQuery 1.7 或更高版本中的许多缺点以及不应再使用它的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T21:55:02.220

> 使用较新的 jQuery .click()、.submit() 等被替换为

他们没有被替换。`click`并且`submit`仍然有效，但现在它们是`on`. 不推荐使用的方法是`bind`和`live`。现在您可以这样做来委托事件：

```
$(closestStaticParent).on('click', 'element', function(){ ... }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T21:55:33.250

`.click`没有被替换`.on("click"`。阅读文档。

`As of jQuery 1.7, the .live() method is deprecated. Use .on() to attach event handlers.`

`.live`被`.on`和取代`.off`。

其他功能如`.click`将继续按预期工作

*   [。居住（）](http://api.jquery.com/live/)
*   [。上（）](http://api.jquery.com/on/)
*   [.off ()](http://api.jquery.com/off/)（较新版本的[.die()](http://api.jquery.com/die/)）

# c# - 与 SQL Server CE 中的同一个表相关的 2 个不同的表

> ID：13653699
> 
> 赞同：0
> 
> 时间：2012-11-30T21:49:59.010
> 
> 标签：c#, windows-phone-7, sql-server-ce

首先，我在我的应用程序中使用 LinqToSQL 和数据上下文来查询和更新数据库。我的应用程序是 Windows Phone 7 应用程序。

好的，可以说我有 3 个带有这样列的表

*   **表 A** -`Id, Name, Description`
*   **表 B** -`Id, Count, Cost`
*   **表 C** -`Id, Name, Description, Type`

*   我想在表 A 和 B 之间建立一对多的关系（许多表 B 到 1 个表 A）

*   我想在表 C 和 B 之间建立一对多的关系（许多表 B 到 1 个表 C）

所以我添加了额外的列来用于关系，所以现在我的 3 个表看起来像这样。

*   **表 A** -`Id, Name, Description`
*   **表 B** -`Id, Count, Cost, TableA_Id, TableC_Id`
*   **表 C** -`Id, Name, Description, Type`

我尝试设置上述内容，但表 B 将有 2 个约束，如果我在代码中执行类似的操作

```
TableA Ta = new TableA();
Ta.Name = "NA";
Ta.Description = "NA";
Ta.TableB.Add( new TableB()
               {
                 Count = 1,
                 Cost = 100
               });

App.MyDataContext.Database.TableA.InsertOnSubmit(Ta);
App.MyDataContext.Database.SubmitChanges(); 
```

我收到这样的错误

> *无法插入外键值，因为对应的主键值不存在。[ 外键约束名称 = FK_TableC_TableB ]*

现在我想我明白为什么我有错误，但我问有没有办法设置这个设置，所以我可以在没有错误的情况下获得相同的结果。我用过一点 SQL 和 SQL Server CE，但这是我第一次尝试这种方式的关系。

编辑：为了澄清起见，TableA 可以包含几个 TableB。TableC也可以包含几个TableB

# silverlight - 默认情况下，在 XAML/C# 应用程序中，底部 AppBar 是否在滑动时有效？

> ID：13653700
> 
> 赞同：0
> 
> 时间：2012-11-30T21:49:59.540
> 
> 标签：silverlight, xaml, windows-8

我是否需要明确执行任何操作以使底部 AppBar 出现在滑动时？还是 AppBars 在滑动时的默认行为？

我已经测试过，它在鼠标右键单击时工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:10:26.780

从底部向上滑动应该会使底部的 AppBar 出现。

在 Windows 8 开发中，您可以在模拟器中启动应用程序。这个选项在你选择构建配置的地方，默认情况下它说“本地机器”（或为我做的）。启动模拟器后，您可以查看模拟器窗口的右侧，并且有一个按钮可以切换到滑动模式。你可以用它来测试。

# c# - Lucene Spellchecker 排名建议奇怪

> ID：13653702
> 
> 赞同：2
> 
> 时间：2012-11-30T21:50:08.567
> 
> 标签：c#, lucene, lucene.net, spell-checking

我在 Lucene.NET contrib NuGet 包 v3.0.3 中使用拼写检查器。

拼写检查器索引是使用创建的 `_spellChecker.IndexDictionary(new SpellChecker.Net.Search.Spell.LuceneDictionary(reader, "Name"));`

我遇到的问题是（我假设）由于带状疱疹/n-gram 的工作方式，跑步的`_spellChecker.SuggestSimilar("Wiess")`“Weiss”得分不会很高。“Witness”、“Wireless”和“Wills”得分高于“Weiss”。

似乎“Weiss”的得分应该高于“Wireless”。有没有办法可以调整它以获得结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:13:24.807

你没有提供什么是返回的，所以我假设你只是不喜欢它提供的东西，而不是它什么都没有给你。

在 Lucene 文档中，没有采用 1 个参数的 SuggestSimilar 方法。我相信这是因为你不应该只依赖一个结果，根据 API，最少参考建议参数的数量：

“即如果 numSug == 1，不要指望那个建议是最好的。因此，你应该将此值设置**为至少 5**以获得好的建议。”

我假设您可以提供第二个论点。尝试将其设置得更高，看看你会得到什么。

编辑 -

好的。我懂了。也许一个简单的 Levenshtein 距离风格算法会更符合您的要求。Lucene 4.0 为此提供了一个（实验性的）新拼写检查器：[DirectSpellChecker](http://lucene.apache.org/core/4_0_0-BETA/suggest/org/apache/lucene/search/spell/DirectSpellChecker.html)。此外，我相信一个简单的[FuzzyQuery](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/FuzzyQuery.html)也可以完成这项工作。这些方法中的任何一种都会删除 SpellChecker 算法的某些方面，从而有效地简化它，并且您可能会发现您的结果总体上会变得更糟。

笔记：

*   “威斯”“威斯”距离 2
*   “威斯”“见证”距离2
*   “威斯”“无线”距离3
*   “威斯”“威尔斯”距离 2

所以，实际上，这可能不会让你有太多收获。您可能会编写一个过滤器来选择与查询相同长度的结果，但这无助于区分 Wills。你可能不得不忍受的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:13:11.477

这个问题引出了另一个问题。查看答案：[Lucene SpellChecker Prefer Permutations or special score](https://stackoverflow.com/questions/13689812/lucene-spellchecker-prefer-permutations-or-special-scoring/13692666#13692666)

非常感谢 femtoRgon 为我指明了正确的方向。

# django - Django 身份验证失败并出现 DatabaseError

> ID：13653711
> 
> 赞同：0
> 
> 时间：2012-11-30T21:51:40.667
> 
> 标签：django, heroku, django-views

我的 Django 应用程序部署在 Heroku 上，我在那里使用 Postgres 和 MySQL 进行开发。我无法让用户（手动）登录，我收到此错误：

```
DatabaseError at /login/
current transaction is aborted, commands ignored until end of transaction block 
```

查了代码，发现问题出在`django.contrib.auth.authenticate`

这是我的观点的代码：

```
if request.method == 'POST':
        username = request.POST.get('username')
        print username
        password = 'none'

        try:
            user = User.objects.create_user(username, 'none', password)
            user.save()
            print user
            fb_user_id = request.POST.get('fb_user_id')
            print fb_user_id
            full_name = request.POST.get('full_name')
            print full_name
            hostname = request.get_host()
            invite_link = hostname + '/referal/'+str(short_url.encode_url(int(fb_user_id)))
            print invite_link
            # Create a UserProfile object that references user.
            profile = UserProfile(
                user = user,
                fb_user_id = fb_user_id,
                username = username,
                full_name = full_name,
                invite_link = invite_link
                )
            profile.save()
            print profile

            settings = Setting(user=profile)
            settings.save()
            print settings
            print "success"

            return HttpResponse('success')
        except:
            print "error"

        # Authenticate the user
        user = authenticate(username=username,password='none')
        print user
        if user is not None:
            print "user is not None: ", user
            if user.is_active:
                print "loggin user in "
                login(request, user)
                return HttpResponseRedirect('/')
        else:
            print user,
            print "user is none"

    else:
        return HttpResponse('not a post ')
    return HttpResponse('fail') 
```

当我尝试使用注册用户登录时，我在日志中看到的最后一件事是打印在`except`块中的“错误”。在开发环境中，一切都按预期工作！以前有人遇到过这个问题吗？

**编辑** 实际上通过管理面板的身份验证工作得很好，用户注册也很完美。

# java - java.sql.SQLException：不正确的字符串值：'\xF0\x9F\x91\xBD\xF0\x9F...'

> ID：13653712
> 
> 赞同：116
> 
> 时间：2012-11-30T21:51:41.213
> 
> 标签：java, mysql, encoding, character-encoding, sqlexception

我有以下字符串值：“walmart obama”

我正在使用 MySQL 和 Java。

我收到以下异常：`java.sql.SQLException：不正确的字符串值：'\xF0\x9F\x91\xBD\xF0\x9F...'

这是我要插入的变量：

```
var1 varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL` 
```

我试图插入“walmart obama”的Java 代码是preparedStatement。所以我正在使用该`setString()`方法。

看起来问题是值的编码。我怎样才能解决这个问题？以前我使用的是 Derby SQL，而这些值最终变成了两个正方形（我认为这是空字符的表示）

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-12-07T00:15:18.547

你所拥有的[`EXTRATERRESTRIAL ALIEN (U+1F47D)`](http://www.fileformat.info/info/unicode/char/1f47d/index.htm)和[`BROKEN HEART (U+1F494)`](http://www.fileformat.info/info/unicode/char/1f494/index.htm)不在基本的多语言平面中的。它们甚至不能在 java 中表示为一个字符，`"".length() == 4`. 它们绝对不是空字符，如果你不使用支持它们的字体，你会看到方块。

[MySQL`utf8`只支持基本的多语言平面，你需要`utf8mb4`改用](http://dev.mysql.com/doc/refman/5.6/en/charset-unicode-utf8mb4.html)：

> 对于补充字符，utf8 根本无法存储字符，而 utf8mb4 需要四个字节来存储它。由于 utf8 根本无法存储字符，因此在 utf8 列中没有任何补充字符，并且在从旧版本的 MySQL 升级 utf8 数据时不必担心转换字符或丢失数据。

所以要支持这些字符，你的 MySQL 需要 5.5+ 并且你需要在`utf8mb4`任何地方使用。连接编码需要是`utf8mb4`，字符集需要是`utf8mb4`，并且整理需要是`utf8mb4`。对于 java 它仍然只是`"utf-8"`，但 MySQL 需要区分。

我不知道您使用的是什么驱动程序，但设置连接字符集的与驱动程序无关的方法是发送查询：

```
SET NAMES 'utf8mb4' 
```

在建立连接之后。

[另请参阅 Connector/J](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-usagenotes-troubleshooting.html)：

> 14.14: 如何在 Connector/J 中使用 4 字节 UTF8、utf8mb4？
> 
> 要将 4 字节 UTF8 与 Connector/J 一起使用，请使用 character_set_server=utf8mb4 配置 MySQL 服务器。*只要**未**在连接字符串中设置*characterEncoding ，Connector/J 就会使用该设置 。这相当于字符集的自动检测。

调整您的列和数据库：

```
var1 varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL 
```

同样，您的 MySQL 版本需要相对最新才能支持 utf8mb4。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-10T22:12:01.623

奇怪的是，我发现`&characterEncoding=UTF-8`从`JDBC url`类似的问题中删除对我有用。

根据我的属性，

```
jdbc_url=jdbc:mysql://localhost:3306/dbName?useUnicode=true 
```

我认为这支持@Esailija 上面所说的，即我的MySQL，它确实是5.5，正在找出它自己最喜欢的UTF-8 编码风格。

（注意，我还指定了`InputStream`我`UTF-8`在 java 代码中读取的内容，这可能没有什么坏处）......

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-12-22T18:40:54.430

总而言之，要保存需要 4 个字节的符号，您需要更新字符集和排序规则`utf8mb4`：

1.  数据库表/列： `alter table <some_table> convert to character set utf8mb4 collate utf8mb4_unicode_ci`
2.  数据库服务器连接（[见](http://dev.mysql.com/doc/refman/5.7/en/charset-server.html)）

在#2 的开发环境中，我更喜欢在启动服务器时在命令行上设置参数： `mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci`

* * *

顺便说一句，注意[连接器/J](http://dev.mysql.com/doc/connector-j/en/connector-j-reference-charsets.html)的行为`SET NAMES 'utf8mb4'`：

> 不要使用 Connector/J 发出查询集名称，因为驱动程序不会检测到字符集已更改，并将继续使用在初始连接设置期间检测到的字符集。

并避免`characterEncoding`在连接 url 中设置参数，因为它会覆盖配置的服务器编码：

> 要覆盖客户端自动检测到的编码，请使用用于连接到服务器的 URL 中的 characterEncoding 属性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-24T14:30:40.500

我是如何解决我的问题的。

我有

```
?useUnicode=true&amp;characterEncoding=UTF-8 
```

在我的休眠 jdbc 连接 url 中，我将字符串数据类型更改为数据库中的 longtext，之前是 varchar。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-26T06:58:27.973

我遇到了同样的问题，并通过将每列的**排序规则**设置为**utf8_general_ci来解决它。**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-30T21:54:31.987

将该行附加`useUnicode=true&amp;characterEncoding=UTF-8`到您的 jdbc url。

在您的情况下，数据不是使用`UTF-8`编码发送的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-06T12:34:58.120

我猜 MySQL 不相信这是有效的 UTF8 文本。我尝试在具有相同列定义的测试表上插入（mysql 客户端连接也是 UTF8），虽然它进行了插入，但我使用 MySQL CLI 客户端和 JDBC 检索的数据没有正确检索值。为了确保 UTF8 能正常工作，我为 obama 插入了一个“ö”而不是“o”：

```
johan@maiden:~$ mysql -vvv test < insert.sql 
--------------
insert into utf8_test values(_utf8 "walmart öbama ")
--------------

Query OK, 1 row affected, 1 warning (0.12 sec)

johan@maiden:~$ file insert.sql 
insert.sql: UTF-8 Unicode text 
```

用于测试的小型 Java 应用程序：

```
package test.sql;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class Test
{

    public static void main(String[] args)
    {
        System.out.println("test string=" + "walmart öbama ");
        String url = "jdbc:mysql://hostname/test?useUnicode=true&characterEncoding=UTF-8";
        try
        {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection c = DriverManager.getConnection(url, "username", "password");
            PreparedStatement p = c.prepareStatement("select * from utf8_test");
            p.execute();
            ResultSet rs = p.getResultSet();
            while (!rs.isLast())
            {
                rs.next();
                String retrieved = rs.getString(1);
                System.out.println("retrieved=\"" + retrieved + "\"");

            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

} 
```

输出：

```
johan@appel:~/workspaces/java/javatest/bin$ java test.sql.Test
test string=walmart öbama 
retrieved="walmart öbama " 
```

此外，我已经尝试使用 JDBC 连接进行相同的插入，它抛出了与您得到的相同的异常。我相信这是一个 MySQL 错误。也许已经有关于这种情况的错误报告..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-18T20:21:50.617

我遇到了同样的问题，在仔细检查所有字符集并发现它们都很好之后，我意识到我在课堂上的错误属性被注释为 @Column 而不是 @JoinColumn (javax.presistence; hibernate) 和它打破了一切。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-28T15:27:29.417

这个设置 useOldUTF8Behavior=true 对我来说很好。它没有给出不正确的字符串错误，而是将 Ã 等特殊字符转换为多个字符并保存在数据库中。

为了避免这种情况，我从 JDBC 参数中删除了这个属性，而是将我的列的数据类型转换为 BLOB。这很完美。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-05T05:39:31.993

执行

```
show VARIABLES like "%char%”; 
```

如果不是 utf8mb4，则查找字符集服务器。

将其设置在您的 my.cnf 中，例如

```
vim /etc/my.cnf 
```

添加一行

```
character_set_server = utf8mb4 
```

最后重启mysql

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-09-23T16:38:23.543

此外，数据类型可以使用 varchar 或 text 的 blob install。

# c# - 三个 PictureBox 之一不更新

> ID：13653713
> 
> 赞同：1
> 
> 时间：2012-11-30T21:52:16.050
> 
> 标签：c#, winforms

**背景：**

我的程序是实时视频 winform 应用程序。我的表格上有三个`PictureBox`。这些图片框会根据其父窗体大小自动调整大小。`Invoke`我的程序中的一个线程使用安全方法使用来自 30 fps 相机的三个 2048x2048 图像更新这些图片框。

**问题：**

当窗体足够小时，所有三个图片框都可以正常显示，尽管有问题的图片框比其他图片框慢一点。但是如果表格变大，只有一个图片框没有更新，而另外两个更新得很好。仅供参考，这些图片同时被推入像素框。听起来可能很傻，但有问题的图片框看起来有缺陷

**问题：**

我想了解为什么会出现这种症状 - 相同大小的图片框同时获得相同大小的图像，但只有一个没有更新。这是显卡问题吗？有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:50:37.407

尝试使用c#开源ispy软件[http://www.ispyconnect.com/](http://www.ispyconnect.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:32:42.923

**更新：**

因为我认为这是表单刷新的问题，所以我创建了一个线程来定期刷新我的表单。我认为非更新问题已经解决。

```
 private void MyForm_Load(object sender, EventArgs e)
    {
        Thread thread = new Thread(() =>
        {
            while (!m_bFormClose)
            {
                this.SafeInvoke(Refresh);
                Thread.Sleep(500);
            }
        });
        thread.Start();
    } 
```

我想我可以用计时器来做到这一点，但我觉得用线程更安全。如果您有更好的方法，请评论或回答。

# python - 是否可以识别 Python 的 FTP.retrlines() 函数的日期限制？

> ID：13653714
> 
> 赞同：0
> 
> 时间：2012-11-30T21:52:18.087
> 
> 标签：python, ftp, python-2.6

我正在使用标准 Python FTP 库来获取文件列表，然后在检查列表后从 FTP 站点下载文件。`ftp.retrlines('LIST',readFileCallback)`这曾经是一个快速操作，但是，站点上的文件列表每天都在增长，现在已经足够长，在执行获取文件列表时会导致显着延迟。

我对 FTP 服务器上的完整列表不感兴趣。是否有可能例如获得只有 1 个月大的文件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:28:07.320

您可以尝试传递`-t`到`LIST`，一些服务器支持它。这将按修改时间对列表进行排序（类似于`ls`）。

通常这种过滤/排序留给客户端来实现。FTP 服务器没有义务提供服务器端过滤（超出基础）。

# java - 如何添加另一个控制台以与多线程程序进行交互

> ID：13653716
> 
> 赞同：1
> 
> 时间：2012-11-30T21:52:41.677
> 
> 标签：java, multithreading, console, pipe, gnu-screen

我有一个单线程程序做一些长时间运行的计算工作。主线程正在使用控制台进行一些输出。我正在考虑添加另一个线程来与用户交互以查询诸如作业进度或进程内部状态之类的内容。

假设同步处理得当，并且用户通过命令行控制台之类的东西与第二个线程进行交互（不需要 GUI）。实现此功能的好方法是什么？我想我可以让第二个线程等待某个命名管道上的命令，并让用户使用 GNU 屏幕之类的东西连接到这个管道（我不确定它是否会工作）。

是否有任何库（Java 或非 Java）或工具来实现这一点？我的程序在 Linux 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:02:51.877

做你想做的实际上需要两个命名管道：每个方向一个。在这方面，使用套接字可能是一个更好的选择（尽管处理服务器端可能有点困难）。

至于客户端，我不认为 GNU/Screen 可以用来做这件事。如果您使用命名管道，客户端应该简单地使用`cat`（实际上是两个`cat`进程：一个写入服务器，一个读取答案）。如果您实现基于套接字的通信，您可以将`netcat`( `nc`) 用于客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:21:50.770

您需要另一个线程来读取用户的输入。这就是我将如何做到的......

```
package com.mycompany.readthread;

import java.io.*;

public class Launcher {
    public static void main(String[] args) {
        new Launcher().run();
    }

    public void run() {
        LongRunningJob job = new LongRunningJob();
        ReadInputLoop readInputLoop = new ReadInputLoop(job);
        Thread readInputLoopThread = new Thread(readInputLoop);
        readInputLoopThread.start();  // run read input loop in another thread
        job.run();  // run long running job in this thread
    }

    class LongRunningJob implements Runnable {
        private double percentageComplete;

        @Override
        public void run() {
            // long running job
            // update percentageComplete in a synchronized block
        }

        public synchronized double getPercentageComplete() {
            return percentageComplete;
        }
    }

    class ReadInputLoop implements Runnable {
        private LongRunningJob job;               

        public ReadInputLoop(LongRunningJob job) {
            this.job = job;            
        }

        @Override
        public void run() {
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            try {
                while (true) {
                    String line = br.readLine();
                    if ("exit".equalsIgnoreCase(line)) {
                        break;
                    }
                    if ("progress".equals(line)) {
                        double percentageComplete = job.getPercentageComplete();
                        System.out.println(String.format("%.3g", percentageComplete)+ "%");
                    }
                }                
            }
            catch (IOException ex) {
                System.err.println("Unexpected exception");
            }
        }
    }
} 
```

# session - nodejs express req.session 不存储我的变量

> ID：13653717
> 
> 赞同：7
> 
> 时间：2012-11-30T21:52:43.497
> 
> 标签：session, express

我正在设置一个基本的管理员身份验证，当用户登录时，我在 authcallback 中调用此函数：

```
function checkAdmin (req) {
  Admin.findOne( { user : req.user.id },function ( err, admin, count ){
    req.session.isAdmin = true;
    console.log("session : %j",req.session);
  })
} 
```

然后我做

```
res.redirect('/') 
```

索引控制器内的代码：

```
console.log("session : %j",req.session);
  res.render('index', { title: 'Accueil',message: req.flash('info') }); 
```

这就是我在控制台中得到的：

```
session : {"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path"
:"/"},"passport":{"user":"5079832df1e9a6485e000001"},"flash":{},"isAdmin":true}

session : {"cookie":{"originalMaxAge":null,"expires":null,"httpOnly":true,"path"
:"/"},"passport":{"user":"5079832df1e9a6485e000001"},"flash":{}} 
```

我不明白为什么会话不存储 isAdmin 值。

我读过一些其他问题，说 app.use(app.router) 地方可能是一个原因，但我确实这样做了：

```
app.use(cookieParser)
app.use(express.session({store: session_store }));
app.use(passport.initialize())
app.use(passport.session())

// routes should be at the last
app.use(app.router) 
```

我猜这一定是个白痴..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T16:52:07.010

好，

最后我找到了为什么这不起作用。我在我的 Admin.findOne 函数之外做了 res.redirect。所以客户端在设置会话变量之前被重定向。

这个 authCallbackFunction 正在工作：

```
exports.authCallback = function (req, res, next) {
  //Check if the logged in user is an admin
  Admin.findOne( { user : req.user.id },function ( err, admin, count ){
    var old = req.session;
      if(!err && admin)
        req.session.isAdmin = true;
      res.redirect('/')
  })
} 
```

并且当用户注销时，不要忘记重新生成会话

```
// logout
exports.logout = function (req, res) {
  req.session.regenerate(function(){
    req.logout()
    res.redirect('/login')  
  })

} 
```

# iphone - 从 XML NSString 中提取值，避免使用解析器

> ID：13653721
> 
> 赞同：1
> 
> 时间：2012-11-30T21:52:44.747
> 
> 标签：iphone, objective-c, ipad

我有这个字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<NewDataSet>
  <Table>
    <CITY>Jupiter</CITY>
    <STATE>FL</STATE>
    <ZIP>33477</ZIP>
    <AREA_CODE>561</AREA_CODE>
    <TIME_ZONE>E</TIME_ZONE>
  </Table>
</NewDataSet> 
```

我只想从中夺取城市，在这种情况下：木星

我不想使用 XML 解析器 - 有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:05:22.607

我建议研究使用 xml 解析器，但无论如何你都可以这样做：

```
NSArray *array = [yourXMLString componentsSeparatedByString:@"CITY"];
NSString *city = [[array objectAtIndex:1] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"></"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:23:20.827

```
 NSString* str=[[NSString alloc]initWithContentsOfFile: FILENAME encoding: NSUTF8StringEncoding error: nil];
    NSLog(@"%@",str);
    NSRange range1= [str rangeOfString: @"<CITY>"];
    NSRange range2= [str rangeOfString: @"</CITY>"];
    NSUInteger location= range1.location+range1.length;
    NSUInteger length= range2.location-range1.location-range1.length;
    NSString* substr= [str substringWithRange: NSMakeRange(location,length)];
    NSLog(@"%@",substr); 
```

# java - 寻找旧版本的 NetBeans 平台源代码

> ID：13653723
> 
> 赞同：0
> 
> 时间：2012-11-30T21:52:48.003
> 
> 标签：java, netbeans

我正在寻找 NetBeans 平台的 3.5.x 或 3.6 源代码。我已尝试连接到 NetBeans 网站上列出的 CVS 存储库，但我认为它们不再可用。有没有人有代码或知道我可以从哪里获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:42:54.513

试试这个[链接](http://netbeans.org/community/sources/structure.html?print=yes)浏览文本 - 显然版本存储在名为 Mercurial 的存储库中。不过，在下载任何内容之前，您需要同意他们的 T&C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:13:36.250

根据[这个 FAQ](http://wiki.netbeans.org/DevFaqGeneralWhereIsPlatformHowToBuild)，平台代码并没有与 IDE 代码分开，它们只是不同的构建。

[mercurial 存储库](http://netbeans.org/community/sources/hg.html)似乎可以追溯到 1999 年。

[这里列出](http://hg.netbeans.org/main/tags)的标签不是很一致；2003 年有一个`release35R_base`，但我没有看到类似`release36`. [也许通过存档](http://www.netbeans.info/downloads/dev.php)中可用版本中包含的信息，您可以看到每个版本对应的日期。

希望这可以帮助。

哦，如果您以前没有使用过 mercurial，那么 Joel Spolsky 的[Hg init非常好。](http://hginit.com/)

# java - 缩放文本文件 IO 应用程序

> ID：13653729
> 
> 赞同：0
> 
> 时间：2012-11-30T21:53:25.583
> 
> 标签：java

我正在编写一个 Java 应用程序，它读取逗号分隔的文本文件，对数据执行一些计算并将更新的数据写入新文件。输入文件包含大约 5 亿行，所以我试图尽可能地缩放下面的内容，以便在运行它时不会出现内存不足的异常。关于如何改进以下内容的任何想法？

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class CsvTest {

  public void readFile() {

    BufferedReader br = null;
    BufferedWriter out = null;

    try {

      br = new BufferedReader(new FileReader("C:\\input.txt"));
      FileWriter fstream = new FileWriter("C:\\output.txt");
      out = new BufferedWriter(fstream);

      String line = null;

      while ((line = br.readLine()) != null) {
        out.write(line + "\r\n");
      }
    }
    catch (FileNotFoundException ex) {
        System.err.println("Error: " + ex.getMessage());
    }
    catch (IOException ex) {
        System.err.println("Error: " + ex.getMessage());
    }
    finally {
      try {
        if (br != null) {
            br.close();
        }
        if(out != null){
            out.close();
        }
      }
      catch (IOException ex) {
          System.err.println("Error: " + ex.getMessage());
      }
    }
  }

  public static void main(String[] args) {
    CsvTest test = new CsvTest();
    test.readFile();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:06:35.617

您应该考虑使用[java.nio.channels.FileChannel](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)。还有标准 java.io 和 java.nio 的比较，例如[这样](http://geekomatic.ch/2008/09/06/1220730740479.html)。NIO 似乎是进行大规模 I/O 操作的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:29:05.480

```
 out.write(line + "\r\n"); 
```

可以去

```
 out.write(line);
    out.write("\r\n"); 
```

如果您处理具有相同对象值的单元格，例如字符串，最好不要将相同的值保存为多个对象实例。

```
private Map<Object, Object> sharedMap = new HashMap<Object, Object>();

public Object uniqueObject(Object value) {
    Object sharedValue = sharedMap.get(value);
    if (sharedValue == null) {
        sharedValue = value;
        sharedMap.put(sharedValue, sharedValue);
    }
    return sharedValue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:15:25.430

您的代码非常好，我的意思是您将数据从输入流式传输到输出中，内存中只有一行，所以就内存要求而言，它基本上是 O(1)，你不能比我认为的更好。

缓冲读取器和缓冲写入器中的缓冲区是恒定的，相对于多 GB 文件的大小和内存使用量而言可以忽略不计。

编辑：垃圾收集器应该可以很好地收集未使用的数据，至少我在类似的数据处理案例中的经验是非常积极的。

# sql-server-2008 - 通过 aspx 成员约束 SQL 搜索查询

> ID：13653734
> 
> 赞同：2
> 
> 时间：2012-11-30T21:53:31.120
> 
> 标签：sql-server-2008, asp.net-membership

我正在做一个班级项目。我有一个从用户那里收集信息并存储它的数据库。我想在 aspx 网格视图中显示每个用户添加到数据库的数据。我开始创建一个搜索查询，但我不知道如何将结果限制为只有一个用户。

选择命令 =

`SELECT * FROM`（需要）`WHERE`（这是我想弄清楚的部分） `Username = Membership.GetUser()`

（NEED 是我从中获取数据的表，Username 是我要搜索的值，Membership.GetUser() 是登录人的用户名）

任何帮助或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:02:43.777

您的问题有点含糊，但据我所知-您希望通过用户名获取与用户个人资料关联的属性。根据您的 aspx 会员提供程序的设置和版本，它可能是这样的：

```
select aspnet_Profile.* 
    from aspnet_Profile inner join aspnet_Users
       on aspnet_Profile.UserId = aspnet_Users.UserId 
    where aspnet_Users.UserName = @Username 
```

这假定您正在使用成员资格配置文件对象来存储用户相关数据。这似乎合乎逻辑，但许多应用程序扩展、修改或完全构建自己的数据存储以与 aspx 会员用户相关。

# php - 为什么需要从用户提供的数据中转义/剥离此字符？

> ID：13653742
> 
> 赞同：0
> 
> 时间：2012-11-30T21:54:00.470
> 
> 标签：php

> **可能重复：**
> [PHP 的 mysql_real_escape_string 和 MySQL 注入](https://stackoverflow.com/questions/9279973/phps-mysql-real-escape-string-and-mysql-injection)

这是有问题的角色：

```
\x1A 
```

为什么它会构成威胁，它是什么？谷歌搜索说这是一个控制字符，但我不明白这意味着什么，尤其是在转义数据的情况下。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:58:51.720

`0x1A`是 ctrl-z，在 DOS 时代它被用作 EOF（文件结束）标记。虽然它在任何现代数据库上都不是问题，但它可能被用来通过旧的 dos-days SQL 解析器偷偷额外的查询语句，所以你最终会得到类似的东西：

```
UPDATE scores SET points=points+1
ctrl-z
DROP TABLE scores 
```

一个愚蠢的解析器会停在 ctrl-z 上，想着“嘿，看，这是文件的结尾”。整个字符串将被传递给数据库，如果它是一个“智能”数据库，将忽略 ctrl-z 并愉快地执行 drop 命令

# django - GeoDjango：syncdb 无法创建 PointField

> ID：13653743
> 
> 赞同：0
> 
> 时间：2012-11-30T21:54:13.930
> 
> 标签：django, postgis, postgres.app

我在 MacOS 10.7 上使用 Django 1.2 和最新版本的[Postgres.app 。](http://postgresapp.com/)当我运行`manage.py syncdb`创建一个包含 PointField 的数据库时，我收到以下错误：

```
Installing index for stores.Store model
Failed to install index for stores.Store model: operator class "gist_geometry_ops" does not exist for access method "gist" 
```

这是我之前用来创建空间数据库的 Postgres 命令（在之前遇到[此问题](https://stackoverflow.com/questions/4737982/django-avoids-creating-pointfield-in-the-database-when-i-run-python-manage-py-sy)之后） - 它们都不会产生任何错误，这表明 PostGIS 设置正常：

```
$ psql -d stores -U storeadmin
# CREATE EXTENSION postgis;
# ALTER TABLE geometry_columns OWNER TO storeadmin;
# ALTER TABLE spatial_ref_sys OWNER TO storeadmin; 
```

做了一些谷歌搜索后，我想知道 Postgres.app 是否带有与 Django 1.2 不兼容的 PostGIS 版本？我应该升级到更新的 Django 吗？或者我应该降级到较旧的 PostGIS，如果是，如何降级？

更新：[这个线程](https://code.djangoproject.com/ticket/16455)表明即使 Django 1.4 也不兼容 PostGIS 2。我可以说服 Postgres.app 使用旧版本吗？或者我应该完全放弃 Postgres.app 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:56:30.257

GeoDjango 1.5 已发布，支持 PostGIS 2.0。此时，您最好的选择是升级。

# css - 如何仅为未访问的链接添加下划线？

> ID：13653747
> 
> 赞同：0
> 
> 时间：2012-11-30T21:54:20.787
> 
> 标签：css, hyperlink

我希望我页面中的链接具有不同`text-decoration`的（或类似的效果）。

对于“新鲜”或“未访问”的链接，我想要`text-decoration: underline`for `a:link`，但`text-decoration: none`对于`a:visited`链接。

`a:visited`出于某种原因， CSS似乎要求`text-decoration`从`a:link`. 我该如何解决这个问题？我尝试使用`border-bottom`，无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:04:31.290

在 Mozilla（如此[处记录：https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_:visited_selector](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector)）和 Chromium（可能与 Chrome 相同）下，经过经验验证：

> 您仍然可以对访问的链接进行可视化样式设置，但现在可以使用的样式受到限制。只有以下属性可以应用于访问的链接：

*   `color`
*   `background-color`
*   `border-color`（及其子属性）
*   `outline-color`
*   `color`部分填充和描边属性

> 此外，即使对于您可以为已访问链接设置的属性，您也无法更改未访问链接和已访问链接之间的透明度，否则您将能够使用 rgba() 或 hsla() 颜色值或透明关键词。

这是为了避免恶意页面上的 JavaScript 能够通过检查链接列表的呈现样式（在隐藏元素中）来访问您的浏览器历史记录。

我无法测试 Internet Explorer，但上述对于 Opera*来说似乎也是如此。*

因此，实际上，对于大多数属性，`:visited`链接的样式不能与未访问的链接不同；在他们*可以*的情况下，浏览器会有效地撒谎并“假装”链接未被访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:11:36.233

您可以通过使用border-bottom并为访问的链接上的边框指定背景颜色来模拟文本装饰差异：

```
a {
    text-decoration: none;
    border-bottom: 1px solid blue;
}
a:visited {
    border-bottom: 1px solid white;
} 
```

这个技巧只有在你使用纯色背景时才有效。这是一个 jsfiddle 来演示：http: [//jsfiddle.net/gDSxS/](http://jsfiddle.net/gDSxS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:14:39.073

好吧，这并不理想，但我发现您可以使用下划线并更改已访问的边框颜色。（在 Firefox 中测试）

在这里演示：http: [//codepen.io/anon/pen/sbhFA](http://codepen.io/anon/pen/sbhFA)

# javascript - 如何重置/清除 filepicker.io 拖放小部件？

> ID：13653753
> 
> 赞同：3
> 
> 时间：2012-11-30T21:54:31.557
> 
> 标签：javascript, filepicker.io

当拖放小部件触发 onchange 时，我们的应用程序使用我们需要的值更新隐藏字段。我们使用该文件进行进一步处理。

目前，我们只是隐藏包含拖放小部件的 div，直到我们再次需要它。不幸的是，当我们再次显示该 div 时，小部件会保留最后上传的图像的文件名，因此会让用户感到困惑。看起来他们将再次上传相同的文件，而实际上不会上传任何文件。

如何告诉拖放小部件重新初始化或清除自身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:02:12.547

这有点小技巧，但您可以在 .cancel div 上触发点击事件，它会清除小部件。

这是一些获取 DOM 元素并单击它的伪代码：`$( 'select span with X in it' ).get( 0 ).click();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:03:43.320

这是一个利用该`data-fp-class`属性的hack：

```
<input id="myInput" type="filepicker-dragdrop" data-fp-button-class="btn btn-primary btn-small" data-fp-class="filepicker-dragdrop" data-fp-apikey="urKey" data-fp-mimetypes="image/png,image/jpeg" data-fp-container="modal" data-fp-maxsize="204800" data-fp-services="COMPUTER,URL,DROPBOX,FACEBOOK,GOOGLE_DRIVE,FLICKR,INSTAGRAM,PICASA,BOX"> 
```

上传完成并切换到右侧带有“x”的所选文件后，您可以通过执行以下操作删除选择：

```
$('.filepicker-dragdrop span').get(0).click(); 
```

他们确实需要一个 API 来执行此操作，因为这很常见（检测需要删除的错误）

# python - Python 多维字典（）

> ID：13653754
> 
> 赞同：0
> 
> 时间：2012-11-30T21:54:32.883
> 
> 标签：python, arrays, hash, dictionary

我将如何制作一个字典，其键不仅代表单个字符串，而且代表多个字符串（数组）？所以每个键都绑定到一个数组，如果该键存在于另一个文件中，我可以继续向该数组附加新字符串？

我是一个相对较新的 Python 程序员，所以我可以想象我的脚本是如何工作的……但是我想不出正确的语法。

我有逻辑（我认为），我只需要在 Python 中使用哪些模块或函数的帮助。如果您需要参考我目前在 Python 方面的知识，我已经完成了 Zed Shaw**[的 Learn Python the Hard Way](http://learnpythonthehardway.org/)**的3/4 路。

让我们开始吧。例子：

文件 1：

```
A
B
C
D 
```

文件 2：

```
Ted A
Mike A
Wilma B
Frank C
Dog D
Fred D 
```

文件 3：

```
Jon Ted
Sid Ted
Mic Mike
Will Dog
Tod Dog 
```

有希望的结果（写入文件 4）：

```
>A Ted Mike Jon Sid Mic
>B Wilma
>C Frank
>D Dog Fred Will Tod 
```

因此，使用文件 1 作为键，如果键存在，我们可以用文件 2 和 3 填充元素。注意文件 2 A 和 D 有多个答案。接下来查看文件 3，我们进一步扩展；我们还看到 Jon 和 Sid(file3) = Ted(file2) = A. A 也 = Mike (file2) = Mic (file 3)

这是我的数据（100,000 个序列）的最简单示例，真正的关键是我有五个分层扩展文件，而不仅仅是 2 个（上面的示例）。

~~~ 回复了~~~

谢谢FJ等人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:01:36.910

以下应该有效：

```
keys = []
data = {}
names = {}

for line in open('file1', 'r'):
    keys.append(line.strip())
    data[line.strip()] = []

for line in open('file2', 'r'):
    name, key = line.strip().split()
    if key in data:
        data[key].append(name)
        names[name] = key

for line in open('file3', 'r'):
    nickname, name = line.strip().split()
    if name in names:
        data[names[name]].append(nickname)

with open('file4', 'w') as file4:
    for key in keys:
        file4.write('>{0} {1}\n'.format(key, ' '.join(data[key]))) 
```

# php - 将 CSS 应用于 php 变量

> ID：13653760
> 
> 赞同：-7
> 
> 时间：2012-11-30T21:55:03.070
> 
> 标签：php, css

我有一个带有以下行的 PHP 函数：

```
print ' <span class="highlight">SALE!: </span><span>£</span>'.$sxml[sales_price_inc]; 
```

我需要应用这种 CSS 样式：

```
style="text-decoration:line-through; 
```

到

```
.$sxml[sales_price_inc] 
```

它打印的可变文本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:59:11.573

您可以使用跨度包装您的文本，并且只需使用样式变量：

```
$style = "text-decoration:line-through;";
print ' <span class="highlight">SALE!: </span><span>£</span><span style="' . $style . '">' . $sxml['sales_price_inc'] . '</span>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T21:58:46.497

```
print ' <span class="highlight">SALE!: </span><span>£</span><span style="text-decoration:line-through;">'.$sxml[sales_price_inc].'</span>'; 
```

# javascript - 从父标签中获取孤立文本，子元素分离

> ID：13653761
> 
> 赞同：0
> 
> 时间：2012-11-30T21:55:04.550
> 
> 标签：javascript, html, parsing, dom, tags

我有一个编程挑战，我想知道最没有错误的方法是什么。

基本上，我有以下 HMTL：

```
<p id="first">
    Hello lorem ispum 
    <a id="link" href="...">Link</a> 
    linkety link blag
</p> 
```

（id 用于通过 getElementById 获取概念证明：实际上，我得到 DOM 引用逐个元素地解析页面）。

“Hello lorem ispum”和“linkety link blag”文本片段是孤立的——我无法直接访问它们。我只能使用段落标签或内部的“a”标签访问整个内容。

我想要的是段落中内容的一组元素。如果他们需要获取包装标签或其他东西以获取使用 JavaScript 进行修改的引用，那没关系。EG，最终结果：

```
para[0] = <span>Hello lorem ispum</span>
para[1] = <a id="link" href="...">Link</a>
para[2] = <span>linkety link blag</span> 
```

我可以更改/访问链接到页面上的内容（不是字符串）的 DOM 对象。

会不会只是一堆解析段落标签的innerHTML？

这一切都是为了一个开源的 Chrome 插件，通过简单地使用向上和向下箭头键来阅读文本的障碍。如果您对如何解决此问题有任何更好的想法，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:02:56.270

```
var paragraph = document.getElementById('first'),
    list = paragraph.childNodes,
    l = list.length,
    el, container, i = 0, result = [];

for(i; i < l; i++) {
    el = list[i];
    if (el.nodeType === 3) {
        container = document.createElement('span');
        container.className = 'wrapper';
        // we want to remove line breaks from the text
        container.innerText = el.nodeValue.replace(/(\r\n|\n|\r)/gm,"");
        el = container;
    }
    result.push(el);
} 
```

[**JSFiddle**](http://jsfiddle.net/spliter/rXZMW/5/)

我们要从文本节点中删除换行符的原因是这些将被转换为`<br>`when in a `<span>`。不要认为这是你需要的。

在您的特定情况下，`result`将类似于：

> [跨度，链接，跨度]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:05:16.563

您可以遍历`childNodes`

```
 var para = document.getElementById('first');

var arr = [];

for (var i = 0; i < para.childNodes.length; i++) {
    var elem = para.childNodes[i];
    if (elem.nodeType === 3) {
        var newElem = document.createElement('span');
        newElem.className = 'a';
        newElem.innerHTML = trim(elem.nodeValue);
        elem.parentNode.insertBefore(newElem, elem.nextSibling);
        para.removeChild(elem);
        arr.push(newElem);
    }
    else {
        arr.push(elem)
    }

}
console.log(arr);

function trim(str) {
    return str.replace(/^\s+|\s+$/g, "");
}​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/RkcUk/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:39:39.283

试试这个，它使用文本节点的内容创建一个跨度并将其替换为文本节点

```
var p = document.getElementById('first');    
var elements = [];    
for (var i = 0; i < p.childNodes.length; i++) {
    var child = p.childNodes[i];
    if (child.nodeType == 3) {//text node
        if (! /^\s+$/.test(child.nodeValue)){//skip whitespaces
            var span = document.createElement('span');
            span.innerHTML = child.nodeValue;
            p.replaceChild(span, child);
            elements.push(span);
        }
    }
    else if (child.nodeType == 1){//element node
        elements.push(child)
    }
} 
```

[http://jsfiddle.net/mowglisanu/t6UaJ/](http://jsfiddle.net/mowglisanu/t6UaJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T22:02:58.060

您可以通过遍历`<p>`标记的子节点并查看 nodeType 以查看哪些节点是文本节点，从而从不在其他元素中的文本节点中获取文本：

```
var top = document.getElementById("first");
var node = top.firstChild;
while (node) {
    // get text from text nodes that aren't contained in elements
    if (node.nodeType === 3) {
        // node.nodeValue is the text in the text node
    } else if (node.nodeType === 1) {
        // node is an element here so you can get innerHTML or textContent or whatever you want
    }
    node = node.nextSibling;
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/YvBpw/](http://jsfiddle.net/jfriend00/YvBpw/)

* * *

如果您只想要整个`<p>`标签（包括所有元素）的纯文本并跨浏览器进行操作，您可以使用以下命令：

```
var t = document.getElementById("first");
var text = t.textContent || t.innerText; 
```

这将是`<p>`标签中所有内容的 HTML 剥离文本转换。

# drupal - 我的新drupal 主题没有出现。如何在安装或手动创建后显示 drupal 主题？

> ID：13653764
> 
> 赞同：2
> 
> 时间：2012-11-30T21:55:24.160
> 
> 标签：drupal, drupal-7, drupal-theming

我创建了一个子主题，但它没有显示在可用主题的管理部分中......我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:59:27.860

我遇到了这个问题，这个解决方案对我有用...更改新安装主题的 .info 文件的名称以匹配目录名称。还要更改 .info 文件内的“名称”部分*以*匹配新的或子子主题的目录名称。真的找不到这个，所以认为 id 帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-27T18:40:53.987

我有同样的问题。事实证明，问题在于我的主题名称中有一个连字符。删除连字符后，主题显示在“外观”下。

# android - 应用程序对象的可能数量，Android

> ID：13653765
> 
> 赞同：-1
> 
> 时间：2012-11-30T21:55:24.707
> 
> 标签：android, object

是否可以有多个应用程序对象。如果是这样，我怎样才能将它们放在清单文件中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:26:18.997

不能有多个应用程序对象。我认为您希望拥有跨应用程序可用的全局对象。执行此操作的最佳方法取决于您的特定用例。一种方法是继承 Application 类并将对象放在那里。我认为在 Application 类中拥有大对象没有任何不利之处，因为无论您将它们放在*哪个*类中，它们都会很大。它们要么是持久的，在这种情况下它们总是在内存中，要么他们不是。

另一种选择是单例。

# linux - linux procstat中的RES和PRES字段有什么区别

> ID：13653767
> 
> 赞同：5
> 
> 时间：2012-11-30T21:55:41.300
> 
> 标签：linux, memory

这是 procstat 输出的平静：

```
 PID              START                END PRT  RES PRES REF SHD FL TP PATH
36502           0x400000           0x45d000 r-x   77    0  23  11 CN vn /usr/local/sbin/httpd
36502           0x65c000           0x660000 rw-    3    3   2   1 CN vn /usr/local/sbin/httpd
36502           0x660000           0x800000 rw-    5    4   2   1 CN sw
36502        0x80065c000        0x800693000 r-x   25    0  83  32 CN vn /libexec/ld-elf.so.1 
```

**RES**（驻留页面）和**PRES**（私人驻留页面）之间的主要区别是什么？是否与共享内存和私有内存有关？

并且有一个所谓的*映射标志*（CN）。据我了解，这些标志适用于每页的基础知识，而不是整个内存段，因为它是标记为 Copy-On-Write 的页面，而不是段。**那么为什么 procstat 会为整个段显示它？**

另一个问题是 - **我可以从这个输出中找出真正复制了多少页面（在 Copy-On-Write 过程中）以及父进程中剩下多少页面？**

拜托，你能帮忙弄清楚所有这些东西吗？我将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T02:38:17.767

[`procstat(1)`](http://www.unix.com/man-page/freebsd/1/procstat/)是一个 FreeBSD 实用程序，用于获取详细的进程信息。[Linux 存在](http://brokestream.com/procstat.html)类似的工具，但具有与您问题中的输出不同的特定于 Linux 的字段。此输出必须取自 FreeBSD 系统，因为这些字段在 Linux VM 子系统的上下文中没有意义。

要回答您的具体问题：

1.  RES 是常驻页数，而 PRES 是进程私有影子对象的常驻页数 [1]。复制 VM 对象时会创建影子对象 [2]，并且进程可能会请求制作​​私有副本，以便映射文件的其他进程或文件本身不可见更改 [3]。
2.  映射标志应用于映射的内存对象，而不是直接应用于页面。某些对象类型可能不是写时复制，但 vnodes 和交换（显示在您的输出中）是。[1]
3.  我认为您要问的是“与父级共享的页面数量，以及页面的修改副本数量是多少？”。在此输出中，您可以看到 23 个其他 mmap 对象引用了 httpd 文本。这些可能是子 httpd 进程以及该进程的数据段。 [1]

**参考**

[1] [http://freebsd.1045724.n5.nabble.com/proc-filesystem-td5719455.html](http://freebsd.1045724.n5.nabble.com/proc-filesystem-td5719455.html)

[2] [https://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/vm/vm.html](https://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/vm/vm.html)

[3] [http://www.freebsd.org/cgi/man.cgi?query=mmap&sektion=2](http://www.freebsd.org/cgi/man.cgi?query=mmap&sektion=2)

# cloud-foundry - 多个用户部署到一个 cloudfoundry 应用程序

> ID：13653768
> 
> 赞同：1
> 
> 时间：2012-11-30T21:55:48.550
> 
> 标签：cloud-foundry

我们有一个 cloudfoundry 应用程序，并且正在使用 vmc 进行推送/更新。但是我们如何允许多个用户能够部署这个应用程序呢？还是我们只需要与需要更新能力的人共享登录信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:21:21.207

目前，共享凭据是唯一的方法。但是，在为 Cloudfoundry.com 计划的新版本中，将解决此问题。

查看以下博客条目；

[http://blog.cloudfoundry.org/2012/06/20/heads-up-on-some-new-cloud-controller-features/](http://blog.cloudfoundry.org/2012/06/20/heads-up-on-some-new-cloud-controller-features/)

[http://blog.cloudfoundry.org/2012/08/08/cc_ng_and_vmc/](http://blog.cloudfoundry.org/2012/08/08/cc_ng_and_vmc/)

# php - 有没有办法禁用更改已在 Magento 中创建的 SKU？

> ID：13653770
> 
> 赞同：1
> 
> 时间：2012-11-30T21:55:53.310
> 
> 标签：php, magento-1.7, magento-1.6, magento

在 Magento 中，创建新产品时，您可以手动输入 SKU 编号。稍后，您可以决定将此 SKU 编号更改为其他编号。有没有办法在 Magento 中禁止这样做？一旦分配了 SKU 编号，我希望它始终是 SKU — 我不想让我的用户改为分配不同的 SKU。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T23:41:01.263

我可以想到两种方法：事件观察器和 SKU 属性的自定义属性后端模型，后者是更彻底的解决方案。

对于事件观察者，可以观察比较 SKU 属性的值，查看它是否已更改，并将其设置为原始值并显示警告消息。`saveAttribute()`除非使用等保存 SKU 属性，否则这应该足够了。

也可以在 EAV 属性后端模型中执行相同的逻辑，可以通过设置脚本轻松地将其分配给属性。但是，对于 SKU 属性，它已经有一个后端模型[`Mage_Catalog_Model_Product_Attribute_Backend_Sku`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Product/Attribute/Backend/Sku.php)。`validate()`使用标准 Magento 类重写来重写方法，添加所需的值保护逻辑，然后调用父方法非常容易- 使解决方案非常可移植。

而且，尽管无论通过`save()`或保存，都使用后端模型`saveAttribute()`，但这将确保通过管理后端的所有保存都将根据您的逻辑进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:35:10.440

我能想到的最简单的方法之一是将自定义 Javascript 文件添加到添加产品页面并检查产品 ID 是否存在，该 ID 仅在产品保存后可用。如果存在产品 ID，则禁用/隐藏 sku 字段。这不是 100% 安全的，因为您只使用 JS，但假设您可以信任管理员用户。

# encryption - 试图调和椭圆曲线误差

> ID：13653771
> 
> 赞同：2
> 
> 时间：2012-11-30T21:55:59.733
> 
> 标签：encryption, rijndael, elliptic-curve

我正在尝试执行以下操作：

我有一个使用 ECC 生成标准 Rijndael 密钥的软件（*不是*AES... 有区别：AES 仅支持 128、192 和 256 位的密钥大小，而 Rijndael 最初支持 160 和 224 位。当我在看这个软件的时候，这让我一开始觉得很痛苦。）我已经能够确定它做了以下事情：

它有几种模式，但在最弱的模式下，它使用 ECC secp160r1 生成 160 位密钥（因此是 Rijndael 和*NOT* AES）。我已经能够在我自己的软件中获取“公共”值并使用私钥，并且使用 openssl 调用，能够生成相同的密钥并解密我需要解密的数据。

在最好（最强/最难，你有什么）模式下，它几乎做同样的事情，但是，它使用 ECC sect571k1 生成一个密钥，并且只占用它为 Rijndael 256 位密钥生成的 72 个字节的前 32 个字节（在这种情况下，您可以说 AES256）。

但是，在另一种模式下，它似乎在做同样的事情，但是当我尝试像以前一样做同样的事情时，我没有得到相同的共享密钥。

如果您使用 Alice 和 Bob 的标准定义：

```
da = Alice's secret key
db = Bob's secret key
Qa = Alice's public key
Qb = Bob's public key
S  = Shared secret 
```

我有：

```
daQb --> The public value sent from Alice.
db   --> My "secret" key.
Qb   --> My "public" key.
Sc   --> The "correct" shared secret as computed by above program 
```

我检查了我的 Qb 和 daQb 是否在 sect283k1 曲线上。如果我使用 sect283r1，事情就会失败，并且我的点不会使用 Openssl EC_POINT、EC_KEY、EC_GROUP 函数在该曲线上注册（我现在会发布代码，但我面前没有它。只要我做，我会尝试在这里发布）。正如我所说，我已经能够重现其他两种模式，而且它似乎工作正常。但是，在这种模式下，当我计算密钥时，我得到 Sw --> 由我的程序计算的“错误”共享密钥。

所以，我的问题是：我是否有足够的信息来确定我是否使用了错误的数据库？我不认为我是，因为在其他两种情况下，我可以获得数据库并且它工作正常。不幸的是，我没有该程序的源代码。我正在尝试创建一个可以处理原始工具生成的数据的工具。

我曾想过尝试反转 Qb 并将数据乘以 daQb，但真正要做的就是让我得到 da，虽然这很有趣，但并没有让我找到一种可以在我必须确定 db 的共享密钥上使用它的方法，检查我的工作。

我想到的另一件事是，可能使用了与 sect283k1 类似的曲线，但不是 sect283k1（即可能是一些不同的 G？我不确定是否可以在该曲线上使用另一个生成器，但我不认为每条曲线只有一个生成器，但也许这是错误的，也许另一个生成器会产生不同的结果......即正确的结果）。

无论如何，我已经尝试了几件事，只是为了使用其他程序正在使用的相同数据生成相同的错误密钥数据。也许有一些远超 EC 数学知识的人（几乎任何人都会比我自己的更好，但我希望有人可以帮助我了解我所缺少的东西）可以告诉我一种可以调和我所得到的东西的方法其他工具得到什么。

不幸的是，我可以在设置 Rijndael 键之前停下来看看它将被设置为什么。我可以找到密钥的那部分并查看来自 ECDH_compute_key 操作的原始数据（这似乎本质上是 daQb 和 db 之间的 EC_POINT_mul （如果我对 Diffie-Hellman 密钥交换有足够的了解......我已经验证了这一点）无论如何使用一些openssl调用），并且我知道其他一些事情，但是我找不到可以帮助我了解操作的Bignum / EC代码。所以我正在寻找另一种给猫剥皮的方法.

感谢任何可以提供帮助的人。

# perl - 有没有办法在 Perl 中设置环境变量并将其导出到脚本范围之外？

> ID：13653779
> 
> 赞同：2
> 
> 时间：2012-11-30T21:57:09.020
> 
> 标签：perl, environment-variables

您可以阅读环境变量

```
$envVarVal = $ENV{'VAR_NAME'}; 
```

反向设置它不起作用，即一旦脚本完成运行，您将看不到 var：

```
$ENV{'VAR_NAME'} = 'some_val'; 
```

我还尝试了一个系统调用：

```
`export VAR_NAME=some_val`; 
```

在 Perl 脚本中调用成功，但变量再次超出范围不可见。

是否有可能做到这一点，如果没有，为什么不能在 Perl 中做到这一点，而是通过采购一个常规的 shell 脚本，任何 shell，据我所知？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T22:50:01.063

是的，使用 VMS。

这可能不是最实用的建议，但它是完整的。:)

VMS 是……不同的。VMS 和 Unix 可能比 Windows 和 Unix 更不同。Perl 是围绕 Unix 思维构建的，并且必须将这些 Unix 概念中的一些延伸到断点，以便将它们包装在 VMS 的做事方式上。其中之一是什么`%ENV`意思。

VMS 没有 Unix 那样的环境变量。VMS 最接近的东西是[逻辑名称](http://www.ctu.edu.vn/~dvxe/Bioinformatic/computer/vms-6.html)。它们是一个键/值对表，其用途类似于环境变量和 shell 别名。与 Unix 上的环境变量和 Ogres 不同，它们有层。

来自[OpenVMS 顾问：逻辑名称（第 1 部分）](http://www.openvms.org/stories.php?story=02/09/24/5441505)：

> 大多数进程与至少四个逻辑名称表（进程、作业、组和系统）相关联。通常通过首先按层次顺序搜索 Process、Job、Group 和 System 表来翻译名称。高级用户可以控制搜索和翻译过程。此外，出于安全和完整性原因，某些翻译排除了最终用户定义的逻辑名称。

在 Unix 上，环境表被*复制*到一个进程中，因此该进程不会对其父进程产生任何影响。在 VMS 上，逻辑表是一个堆栈。VMS 读取该堆栈，直到找到一个值。例如，如果您要求`SYS$OUTPUT`（例如`STDOUT`）的值，它将首先检查进程的逻辑表，然后是作业，然后是组，最后是整个系统的值。通过这种方式，操作系统可以`SYS$OUTPUT`在系统表中定义一个默认值，但它可以被您或单个进程覆盖。

[如果这看起来很复杂，它实际上是对真正发生](http://perldoc.perl.org/perlvms.html#Perl-variables)的事情的简化。

逻辑是一个堆栈，那么如果你设置一个会发生什么？

最后，对于这个答案，`$ENV{FOO} = "BAR"`将查找逻辑表堆栈并分配给它找到的第一个 FOO。如果进程表中有一个，它将分配给它。如果工作表中有一个，它将分配给它。以此类推，直到达到其写入权限的限制。此时它将在其最高的表中创建一个新条目，可能是作业表。这意味着`$ENV{FOO} = "BAR"`很可能会出现在工作表中，因此您的所有流程都可以看到。

这就是在 Perl 中在一个进程中设置环境变量并导出到另一个进程的方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T22:05:33.833

[这在大多数系统上](https://stackoverflow.com/a/13654317/1507392)是不可能的，不仅在 perl 中，在 shell 中也是如此。每个进程都有自己的从父进程继承的环境副本，并且对环境的任何更改只会影响该进程及其创建的任何子进程（在对环境进行更改之后）。

在 perl 中设置的环境变量`$ENV{VAR_NAME} = 'some_val';`将可用于之后由 perl 脚本创建的进程。就像由 shell 脚本设置的环境变量`export VAR_NAME=some_val`将反映在该脚本以后创建的任何进程中一样。

shell**函数**或获取 shell 脚本（使用`source scriptname`或`. scriptname`）可以更改比函数或源脚本更有效的环境。但这只是可能的，因为没有创建新进程来运行该代码，它将在调用它的同一进程中运行。

使用 perl 的反引号操作符来运行`export`是没有意义的。这将成功，因为这会导致 perl 启动一个设置了环境变量的新 shell 进程，但随后该进程将立即退出而不做任何有用的事情。

`echo $$`通过使用显示进程 ID，您可以在一定程度上看到这一点。在运行之前尝试在您提供的 shell 脚本中运行相同的脚本而不使用它，并在使用 perl 的反引号运算符执行的 shell 代码中运行脚本。进程 ID 也可以从 perl 中使用`print $$, "\n";`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-30T22:30:29.567

这不可能。但是，您可以告诉 Perl 为您创建一个脚本，然后对其进行 source 或 eval：

```
#!/bin/bash
eval $(perl -e 'print "VAR1=", rand 1')
perl -e 'print "VAR2=", rand 1' > var2.sh
. var2.sh
rm var2.sh
echo $VAR1 $VAR2 
```

# blackberry - 旋转的黑莓加速度计数据

> ID：13653780
> 
> 赞同：1
> 
> 时间：2012-11-30T21:57:09.597
> 
> 标签：blackberry, accelerometer

[我了解可用于 Blackberry 程序](http://www.blackberry.com/developers/docs/4.7.0api/net/rim/device/api/system/AccelerometerSensor.html)的 x/y/z G 力值和“方向”数据。

我的问题是如何提取旋转/方向 RAW-DATA？（如程序员用于[“Blackberry-Spirit-Level”应用程序](http://www.mobileindustryreview.com/2009/01/turn_a_blackberry_storm_into_a_spirit_level.html)）

“Orientation” API 似乎返回常量`ORIENTATION_TOP_UP`，`ORIENTATION_RIGHT_UP`而不是某种程度的浮点数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:59:48.073

我认为没有直接的方法来获取设备方向角度，但您可以使用`AccelerometerSensor`您提到的类提供的原始数据来计算它们。

查看[他们在 API 文档中显示的示例](http://www.blackberry.com/developers/docs/4.7.0api/net/rim/device/api/system/AccelerometerSensor.html)，您可以获得原始 X、Y 和 Z 加速度数据。然后，您使用三角函数来确定角度是多少。例如，一个设备的 Z 轴指向正下方（并且不移动......或相对于地球加速），将给出一个等于**G**的 Z 加速度值，[即重力加速度](http://www.blackberry.com/developers/docs/4.7.0api/net/rim/device/api/system/AccelerometerSensor.html#G_FORCE_VALUE)。

如果将设备保持在*其他*角度，则沿该轴的加速度值将减少轴与朝向地球的垂直线之间夹角的*正弦/余弦值。*

此示例代码显示了如何获得其中一些角度：

```
public void run()
{
    // open channel
    Channel rawDataChannel = AccelerometerSensor.openRawDataChannel( Application.getApplication() );
    // create raw sample vector with three components - X, Y, Z
    short[] xyz = new short[ 3 ];
    while( isRunning() ) {
        // read acceleration
        rawDataChannel.getLastAccelerationData( xyz );
        // process the acceleration
        process( xyz );
        // sleep for maintaining query rate
        try {
            Thread.sleep( 500 );
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    // close the channel to stop sensor query routine
    rawDataChannel.close();
}

private void process(short[] xyz) {

    short X = xyz[0];
    short Y = xyz[1];
    short Z = xyz[2];

    final double roll = MathUtilities.atan2(X, Z) * 180.0 / Math.PI;
    final double pitch = MathUtilities.atan2(Y, Math.sqrt(X*X + Z*Z)) * 180.0 / Math.PI;
    final double tilt = MathUtilities.acos(Z / Math.sqrt(X*X + Y*Y + Z*Z)) * 180.0 / Math.PI;

    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            String output = "Angles are {" + roll + ", " + pitch + ", " + tilt + "}";
            textField.setText(output);
        }
    });
} 
```

*有关滚动*、*俯仰*和*倾斜*的含义的参考，请参阅[此文档](http://www.freescale.com/files/sensors/doc/app_note/AN3461.pdf)。这就是数学的来源。

## 其他问题

这不是来自我编写的生产应用程序，因此代码尚未经过彻底测试。角度的符号可能是错误的，方程中可能存在不稳定性，或其他类似的事情。

此外，如果您使用的是**原始**加速度计数据，则需要实现校准功能。如果您运行任何类型的智能手机级应用程序，您将看到一个如何完成的示例。因此，上面计算的结果将需要根据您的校准常数进行调整。

最后，原始加速度计数据可能很嘈杂，因此您可能还需要过滤/平滑数据，具体取决于您希望如何使用它。

这只是一个起点。祝你好运！

# python - 如何在 for 循环迭代器中捕获异常

> ID：13653783
> 
> 赞同：44
> 
> 时间：2012-11-30T21:57:35.413
> 
> 标签：python, exception

这是`for`Python 中的一个循环：

```
for_stmt ::=  "for" target_list "in" expression_list ":" suite 
```

通常，当从`expression_list`引发异常中产生一个值时，循环中止。有没有一种优雅的方法（没有使用`while True`或类似的方法重写循环）来捕获这个异常并继续循环？

这是一个例子：

```
import csv

csv.field_size_limit(10)

reader = csv.reader(open('test.csv', 'r'))
for line in reader:
    print(line) 
```

使用此文件：

```
foo,bar,baz
xxx,veryverylong,yyy
abc,def,ghi 
```

这在第二行中止。我想要一种方法来跳过或记录失败的行并继续。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-30T22:41:14.667

如果你的内部迭代可以在异常之后继续，你只需要包装一个简单的生成器：

```
def wrapper(gen):
  while True:
    try:
      yield next(gen)
    except StopIteration:
      break
    except Exception as e:
      print(e) # or whatever kind of logging you want 
```

例如：

```
In [9]: list(wrapper(csv.reader(open('test.csv', 'r'))))
field larger than field limit (10)
Out[9]: [['foo', 'bar', 'baz'], ['abc', 'def', 'ghi']] 
```

另一方面，如果内部迭代器在异常后无法继续，则无法包装它：

```
def raisinggenfunc():
    yield 1
    raise ValueError("spurious error")
    yield 3

In [11]: list(wrapper(raisinggenfunc()))
spurious error
Out[11]: [1] 
```

通过调用 Python 生成器函数或评估生成器表达式创建的任何生成器都将不可恢复。

在这种情况下，您需要找到某种方法来创建一个新的迭代器来恢复迭代。对于类似的东西`csv.reader`，这意味着`n`在将文件包装到`csv.reader`. 在其他情况下，它可能意味着传递`n`给构造函数。在其他情况下——就像`raisinggenfunc`上面一样，这是不可能的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T22:33:29.873

您可以将阅读器包装在另一个迭代器中，然后您可以随意处理异常。

```
class ExceptionHandlingIterator(object):
    def __init__(self, iterable):
        self._iter = iter(iterable)
        self.handlers = []
    def __iter__(self):
        return self
    def next(self):
        try:
            return self._iter.next()
        except StopIteration as e:
            raise e
        except Exception as e:
            for handler in self.handlers:
                handler(e)
            return self.next()

csv_reader = ExceptionHandlingIterator(csv.reader(open('test.csv', 'r'))
# attach handlers to the reader here
for line in csv_reader:
    print line 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-20T05:46:34.523

事实证明，如果您`csv.reader`在 for 循环中使用，那么您可以使用 try 异常覆盖它，并且 for 循环将继续。这是一个示例：

```
reader=csv.reader
try:
   for row in reader:
      if row[0]=='type':
         datarows.append(row)
except: continue 
```

如果此代码遇到内部错误，它会跳转到 except 块并继续迭代 CSV 文件中的下一行。

**更新**：这现在给出了一个错误，正如评论中指出的那样，尽管我已经在旧版本的 2.7 中成功使用它

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T23:04:11.850

可以肯定的是，这在纯 Python 中是不可能的，不幸的是。

观察以下代码：

```
def testIter(n):
    count = 0
    while count<n:
        try:
            for i in xrange(count,n):
                if i == 3:
                    raise Exception("Asdfas")
                count = count + 1
                yield i
        except:
            continue 
```

这将输出以下内容：

```
x = testIter(10)
x.next()  # 0
x.next()  # 1
x.next()  # 2
x.next()  # Exception: Asdfas
x.next()  # Exception: StopIteration 
```

人们会期望它在 while 循环的新迭代中继续，但事实并非如此。

有些人表示 csv.reader() 继续出错。我不想为它做一个测试用例，但如果是这样，我怀疑这是因为它被实现为一个 C 模块在[这里](http://svn.python.org/projects/python/trunk/Modules/_csv.c)找到。我的 C 不是太尖锐，所以我没有深入研究它，但足以说我认为这是不可能的。

编辑：我没有直接回答你的问题。在可以恢复的迭代器的情况下执行 abarnet 所说的（这意味着它是 C 迭代器）。

编辑2：实际上并不完全正确。

```
class myInformativeException(Exception):
    def __init__(self, count):
        self.count = count

def testIter(n):
    for i in xrange(n):
        if i==4:
            raise myInformativeException(i)
        yield i

def iterwrap(n):
    x = testIter(n)
    try:
        for i in x:
            yield i
    except myInformativeException as e:
        print "Error on ", e.count 
```

这打印：

```
0
1
2
3
Error on 4 
```

因此，如果您能够在 X 元素之后创建一个迭代器，那么显然是有可能的。如果您需要更完整的示例，请告诉我。

# r - 简单的ggplot2线图错误

> ID：13653784
> 
> 赞同：0
> 
> 时间：2012-11-30T21:57:44.387
> 
> 标签：r, ggplot2

我正在尝试制作一个简单的线图，但出现以下错误：

> geom_path：每个组仅包含一个观察值。需要调整群体审美吗？

我想要 y 轴上的 status.std，x 轴上的努力，status_measure 区分两条单独的线。

下面是我的数据和我正在执行的代码：

```
df.effort <- structure(list(effort = structure(c(1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L), .Label = c("never", "not very hard", "hard enough", "very hard"
), class = "factor"), status.std = structure(c(-0.0234448237301297, 
0.0568346993679614, 0.0780165665285588, -0.0380394621882508, 
-0.135535917573711, 0.0128879641418037, 0.0806307867881565, -0.0104818763687783
), .Names = c("never", "not very hard", "hard enough", "very hard", 
"never", "not very hard", "hard enough", "very hard")), status_measure = structure(c(1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L), .Label = c("avrank.zmgs", "acent09l.zmgs"
), class = "factor")), .Names = c("effort", "status.std", "status_measure"
), row.names = c(NA, 8L), class = "data.frame")

ggplot(data=df.effort,
       aes(x=effort), y=status.std, colour=status_measure)) +   geom_line() 
```

非常感谢您的帮助。我很遗憾这个问题似乎不太可能对其他人有指导意义。如果有标题编辑或使其更通用的东西，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:29:56.360

语法错误。需要移动括号，以便 aes(...) 获得 x 和 y 参数（但*不是*color 参数，因为简单地移动到末尾会产生您发布的错误。）

```
ggplot(data=df.effort,
       aes(x=effort, y=status.std), colour=status_measure) +   geom_line() 
```

成功但无法着色任何东西。无论如何，如何为线条选择颜色？我认为颜色会坚持点，所以试试这个：

```
ggplot(data=df.effort,  aes(x=effort, y=status.std))+ 
   geom_line()+ 
   geom_point(data=df.effort, 
       aes(x=effort, y=status.std, colour=status_measure)) 
```

或者，也许您确实想要 joran 发布的内容：

```
ggplot(data=df.effort,
   aes(x=effort, y=status.std, colour=status_measure, group=status_measure)) +
   geom_line() 
```

（我以为您正在尝试使用 geom_line 将努力类别内的测量与状态测量之间的颜色区分联系起来。）

# google-maps-api-3 - 在多边形叠加层之上显示自定义 MapType

> ID：13653785
> 
> 赞同：3
> 
> 时间：2012-11-30T21:57:48.420
> 
> 标签：google-maps-api-3

我一直在与 Gheat 合作，将自定义热图创建为 ImageMapType。我还有一些颜色编码的多边形，我想在热图创建的高光下显示。

但是，自定义 ImageMapType 始终呈现在多边形下方，并被它们遮挡。我怎样才能解决这个问题？

下面的示例代码：

```
 var heatmap = new google.maps.ImageMapType({
        getTileUrl: function(coord, zoom) {
    ...
    });

    var mapOptions = {...};
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

var neighborhood1 = new google.maps.Polygon({...});
neighborhood1.setMap(map);
... lots of polys ...

    map.overlayMapTypes.insertAt(map.overlayMapTypes.length -1, heatmap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T03:01:47.627

### 更新 2（2016 年 9 月 22 日）：

这个黑客越来越难以管理，但现在，这里是更新的代码：

```
el.firstChild.firstChild.firstChild.firstChild.firstChild.style.zIndex = 102 
```

### 更新：

原始答案的代码停止工作。这个新代码对我有用：

```
el.firstChild.firstChild.firstChild.firstChild.style.zIndex = 102 
```

`102`是让它工作的最小的 zIndex。为了安全起见，您可以提高很多。

### 原答案：

我不希望它不得不走到这一步。这是我的解决方案。

```
el.firstChild.firstChild.firstChild.childNodes[3].style.zIndex = 300 
```

`el`地图在哪里`<div>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:34:57.640

这是解决此客户端的一种方法：[z-Index overlay in google maps version 3](https://stackoverflow.com/questions/2682626/z-index-overlay-in-google-maps-version-3)

# c# - UTF-8 不适用于 TextArea 内容

> ID：13653787
> 
> 赞同：0
> 
> 时间：2012-11-30T21:58:13.933
> 
> 标签：c#, unicode, httpwebrequest, textarea, jspx

我正在使用`HttpRequest`C# 中的 s 与网站交互
我可以读取页面内容，但是当我尝试将一些信息发布回服务器时，一切正常，但`TextArea`与页面中 s 的值无关......
我的文本试图为他们设置的是 **波斯语（波斯语）** ，我收到的页面设置为**Windows-1256**编码......

问题是 的内容`textarea`没有像我期望的那样以波斯语显示！

**更新：**这是我用来发送请求的代码：

```
public static string PostMultipart(string URL, List<RequestParameterInfo> parameters, List<string> cookies, string referer, string acceptLanguage, string acceptCharset, object KeepAliveValue)
{
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(URL));
   var boundary = "---------------------------7dc283270344";
   var messageBytes = Encoding.UTF8.GetBytes("--" + boundary);

   foreach (var item in parameters)
   {
      var prefixBytes = Encoding.UTF8.GetBytes("\n");
      var itemBytes = item.ToBytes();
      var postfixBytes = Encoding.UTF8.GetBytes("\n--" + boundary);

      var startIndex = messageBytes.Length;
      Array.Resize<byte>(ref messageBytes, messageBytes.Length + itemBytes.Length + prefixBytes.Length + postfixBytes.Length);

      prefixBytes.CopyTo(messageBytes, startIndex);
      itemBytes.CopyTo(messageBytes, startIndex + prefixBytes.Length);
      postfixBytes.CopyTo(messageBytes, startIndex + prefixBytes.Length + itemBytes.Length);
     }

     var lastPostfixBytes = Encoding.UTF8.GetBytes("--");
     var startIndex2 = messageBytes.Length;
     Array.Resize<byte>(ref messageBytes, messageBytes.Length + lastPostfixBytes.Length);
     lastPostfixBytes.CopyTo(messageBytes, startIndex2);

     request.Headers.Clear();
     request.Accept = "application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, */*";
     request.Headers.Add(HttpRequestHeader.Pragma, "no-cache");
     request.ContentLength = messageBytes.Length;

     request.Referer = referer;
     request.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)";
     request.ContentType = "multipart/form-data; boundary=" + boundary;
     request.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
     request.Headers.Add(HttpRequestHeader.AcceptLanguage, acceptLanguage);

     if (!string.IsNullOrWhiteSpace(acceptCharset))
         request.Headers.Add(HttpRequestHeader.AcceptCharset, acceptCharset);

     if (KeepAliveValue is Boolean)
         request.KeepAlive = (bool)KeepAliveValue;
     else
         request.Headers.Add(HttpRequestHeader.KeepAlive, (string)KeepAliveValue);

     request.Expect = null;

     request.CookieContainer = new CookieContainer();
     foreach (var item in cookies)
         request.CookieContainer.SetCookies(new Uri(URL), item);

     request.AllowWriteStreamBuffering = true;
     request.Method = "POST";

     using (var strm = request.GetRequestStream())
     {
         strm.Write(messageBytes, 0, messageBytes.Length);
     }

     string resPage = "";
     using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
     {
         using (StreamReader srResponse = new StreamReader(response.GetResponseStream()))
         {
             resPage = srResponse.ReadToEnd();
         }
     }

     return resPage;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:13:39.117

更改您的 Form 元素以使用正确的编码：

```
<form method="post" accept-charset="Windows-1256" /> 
```

或者`<form accept-charset="utf-8" />`

**更新：**

```
request.ContentType = "multipart/form-data; charset: utf-8; boundary=" + boundary; 
```

# .net - 使用或不使用 ref 关键字将数组传递给函数

> ID：13653789
> 
> 赞同：0
> 
> 时间：2012-11-30T21:58:24.167
> 
> 标签：.net, arrays, parameters

我正在尝试将数组传递给 .NET 中的函数，但我有点困惑。数组是引用类型，因此对传递给函数的数组所做的更改在函数外部可见。例子

```
static void Main(string[] args)
{
    byte[] arr = new byte[] { 1,2, 3, 4, 5 };    
    Console.WriteLine(string.Join("", arr));        //console output: 12345
    doSomething(arr);
    Console.WriteLine(string.Join("", arr));        //console output: 52341
}
static void doSomething(byte[] array)
{
    byte tmp = array[0];
    array[0] = array[array.Length - 1];
    array[array.Length - 1] = tmp;
} 
```

所以它与使用的“ref”关键字完全相同（相同的控制台输出）

```
doSomething(ref arr);  for static void doSomething(ref byte[] array) 
```

但是，如果我在函数中添加以下行：

```
array = (new byte[] { 1 }).Concat(array).ToArray(); //size of array is changed 
```

结果不同：

```
12345
52341// "ref" keyword is not used 
```

和

```
12345
152341 "ref" keyword is used 
```

有人可以解释一下为什么结果不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:26:01.597

值类型变量是包含值的变量。arr 是指向内存中 byte[] 实例的对象变量。当您通过值将它传递给方法 doSomething 时，您将指针传递给内存中的 byte[] 实例。这样 arr 和 array 都指向内存中相同的 byte[] 实例。如果 DoSomething 改变了 arr 和 array 都指向的 byte[] 的实例，它实际上并没有改变变量 arr，因为它仍然指向内存中的同一个地方。但是，由于 arr 仍然指向内存中的同一位置，并且该位置的实例已更新，因此 arr 可以“看到”更改。

当您调用 Concat 时，它会在内存中的其他位置生成一个新的 byte[] 实例，并将变量数组指向内存中的新实例。byte[] 的旧实例仍然存在，并且 arr 仍然指向它。

**当您通过 ref 传递变量*arr时，对**数组*指向的位置的任何更改也会影响*arr*指向的位置。当不通过 ref 传递时，*DoSomething*只能改变*arr*指向的内存中 byte[] 的实例，但不能改变*arr*指向的位置。**

这就是为什么通过引用传递对象和通过值传递对象之间存在差异的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:43:18.600

对于在没有关键字局部变量的方法中传递的任何参数，创建并表示原始参数*值*`Ref`的副本。因此，当您传入引用类型变量时- 这实际上是 Int32 引用，它指向某个地址，比如说 ADDR。然后在方法中创建此变量的副本，该副本完全不受原始参数 ( ) 的约束。但仍然指向内存中的相同地址，您仍然可以更改底层原始数据。并且当您通过分配参考值的本地副本更改参考值本身时，会更改但此更改不会影响方法中传递的原始参考。*`arr``arr``= new ...`*

 *如果你想“绑定”原始引用和在方法中创建的新引用 by `new()`-use `Ref`，通过指定`Ref`你说“我想通过/传递引用”。

在以下行之后：

```
array = (new byte[] { 1 }).Concat(array).ToArray(); 
```

*   在`Ref`参数的情况下：引用已更改，但由于它是通过引用 ( `Ref`) 传递的 - 原始引用也会受到影响
*   在默认参数传递的情况下：引用的本地副本已更改但原始不受影响，因此您获得了指向新创建数组的新引用*

# android - 如何从字体宽度设置视图宽度

> ID：13653790
> 
> 赞同：0
> 
> 时间：2012-11-30T21:58:24.713
> 
> 标签：android, width, spinner, font-size

我在水平布局中有一个 EditText 和一个 Spinner。我希望微调器的大小仅与容纳其最宽文本和 EditText 占用剩余空间所需的一样大。是否有捷径可寻？

例如，理想情况下，我想将微调器的宽度指定为平均字体宽度的某个倍数，在 xml 文件中声明为属性。

否则，我想我需要在运行时做一些事情，例如获取微调器中每个项目的文本宽度，并为单选按钮图标获取最大 + 一些余量。

这是我的xml：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal" >

  <EditText
    android:id="@+id/text"
    android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/text" />

  <Spinner
    android:id="@+id/type"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:spinnerMode="dropdown"
    android:textAppearance="@android:style/TextAppearance.Medium" />
</LinearLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:10:17.383

试试这个

```
<LinearLayout
    android:id="@+id/rl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="10dp"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </EditText>

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

# python - 如何在执行任务时更新进度条

> ID：13653794
> 
> 赞同：1
> 
> 时间：2012-11-30T21:58:42.767
> 
> 标签：python, multithreading, wxpython, progress-bar

我想使用 wx.ProgressDialog 来显示我的程序的进度。我有一个按钮，按下时会运行此功能：

```
def runmiP(self, event):
    predictor.runPrediction(self.uploadProtInterestField.GetValue(), self.uploadAllProteinsField.GetValue(), self.uploadPfamTextField.GetValue(), \
                   self.edit_eval_all.Value, self.edit_eval_small.Value, self.saveOutputField) 
```

predictor 是我写的一个 python 包。如何从预测器中获取进度并将其显示在进度条中？我只能返回一个值。我应该多次调用它（比如每分钟），记住它离开的位置，返回它有多远并再次调用它？就像是

```
while 1: 
    time.sleep(60)
    predictor.runPrediction(self.uploadProtInterestField.GetValue(), self.uploadAllProteinsField.GetValue(), self.uploadPfamTextField.GetValue(), \
                   self.edit_eval_all.Value, self.edit_eval_small.Value, self.saveOutputField) 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:13:05.510

这是一个普遍的问题。（除非您已经在另一个线程上运行它，否则您会阻塞整个 UI，而不仅仅是无法更新进度条，对吗？）并且有两种通用方法可以解决它。

*   将回调传递给 runPrediction，并使其`progressCallback(sofar, total)`在循环中每 X 次、每 Y% 或每 Z 秒调用一次。（您可以使用其他一些通信机制——发布到队列并触发条件、通过管道或套接字发送消息等——但想法是相同的。）

*   将 runPrediction 分解为可以按顺序运行的单独的较小作业，并在每次开始下一个作业时更新进度。

您的解决方案基本上是第二个想法的稍微笨拙但通常完全合理的版本。如果没有明确的方法来分解工作，但有一种合理的方法可以中止工作，把它藏在哪里，然后再继续，这实际上与分解工作是一样的，对吧？

Python 提供了一种通常更简单、更简洁的方法来实现第二个想法：将 runPrediction 变成一个生成器，它会在结果进入时产生结果，而不是在最后返回所有结果。然后，您只需在每个值返回时更新进度。

# c# - 如何阅读文本框中的两个单词，它们之间有：

> ID：13653797
> 
> 赞同：-5
> 
> 时间：2012-11-30T21:58:53.210
> 
> 标签：c#, input, textbox, symbols, colon

我想让我的程序用一个文本框读取两个输入。格式如下所示： First:Second

这是我试图解释的图片 [http://i.imgur.com/2Pe2I.png](http://i.imgur.com/2Pe2I.png)

我想知道之后如何将它们放入列表框中。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:02:12.620

类似于以下内容：

```
foreach (string item in TextBox1.Text.Split(':')) {
   ListBox1.Items.Add(item,item);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T22:03:53.427

您可以使用 将文本字符串分隔为字符串数组`string.split`。

```
string[] inputs = targetTextBox.Text.Split(':'); 
```

然后可以将它们添加到`ListBox.Items`using

```
targetListBox.Items.AddRange(inputs); 
```

显然总是建议对用户输入进行适当的清理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T22:01:10.343

在不知道更多的情况下，您得到的任何答案都不会非常准确，但是这些方面的内容可能会满足您的要求：

```
string[] inputParts = MyTextBox.Text.Split(':'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T22:02:36.820

```
string[] inputParts = MyTextBox.Text.Split(':'); 
```

或选项 2

```
var splitStr = MyTextBox.Text.Split(new char[] {':'}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-30T22:02:54.017

使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)函数：

```
string[] inputs = Textbox1.Text.Split(new char[] { ':' }); 
```

input[0] 将在 ':' 之前有文本，inputs [1](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)将在它之后有文本。

# php - 一个系统的多个与单个数据库

> ID：13653802
> 
> 赞同：2
> 
> 时间：2012-11-30T21:59:21.170
> 
> 标签：php, mysql, database, cakephp, database-design

我是一个非常新的 php 开发人员，我正在为教育机构开发我的第一个系统，它包含员工、管理、学生、学生表现和付款细节。

我不确定数据库中的最佳方法是什么。我应该为所有数据使用单个数据库还是需要为提到的包含创建多个数据库。

您对此有何看法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:07:00.807

不清楚你所说的数据库是什么意思：

*   它是一个数据库中的模式吗？
*   它是单个非集群实例吗？
*   它是一个具有多个实例的集群吗？还是它是合乎逻辑的，您并没有真正询问数据存储机制的物理特性。

假设需求源于学校作业，一个数据库、一个模式和多个表就足够了。

如果您需要考虑高可靠性、冗余、故障转移 - 这将是一个完全不同的答案，很可能建议使用多个数据库实例。

如果您关心大规模，那将是另一个答案，可能建议使用集群数据库环境。

简而言之，您的要求是什么，有多少记录，多少用户，让数据库长时间停机数小时或数天有多重要？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:02:14.073

包含多个表的单个数据库是最好的，imo。

因此，一个称为“研究所”的数据库或广泛包含数据的东西。在其中，您有一个针对每个用户、性能和付款的表格。用户应包含一行，指定用户是工作人员、管理员还是学生。付款和绩效应包含与用户 ID 相关联的字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T22:32:07.400

一个带有许多表的数据库就可以了。它也将更便携，因为一些低成本的托管可能只给你一个数据库或增加另一个数据库的价格（现在很少见）。它肯定会更实用，因为您的所有 SQL 都会更简单。

您可以使用另一个数据库的一个原因是，如果您克隆第一个数据库并使用它在站点内容实际向公众显示之前向编辑者显示更新。我的意思是，当管理员或编辑撰写新帖子或更新信息时，您将其插入 db1。该站点的副本可以显示预览读取 db1，然后管理员按下发布按钮，您所要做的就是使用一条 sql 指令将 db1 克隆到 db2。这样，您就有了一个“登台”站点来测试条目，以及一个供其他人使用的公共站点。当然，您也可以使用重复的表来执行此操作，但在这种情况下，两个 db 对我来说感觉更干净、更简单。

# jquery - 验证表单两次

> ID：13653803
> 
> 赞同：6
> 
> 时间：2012-11-30T21:59:22.220
> 
> 标签：jquery, jquery-validate

**代码事实：**

1.  我正在使用 jQuery
2.  还使用 jQuery Validate 插件

**我的表格的特点：**

1.  我有一个分成两部分的表格。这都是一种形式，但被两个大 div 分解
2.  表格的内容（名字、姓氏等）在第一部分。
3.  我还在表格的第一部分有一个动态表格，因此人们可以注册自己和最多 20 人。

4.  最后是注册码。这些代码最多只能使用 20 次。这意味着如果一个人用注册码注册自己和其他 19 个人，`test`那么就是这样，测试不再是可用的注册码。

**问题：**

假设注册码`test`已经被使用了 18 次。因此，如果他们注册自己和另外两个人，验证器工作正常，它会弹出一条消息，说超出了限制。**但是**，如果他们首先输入代码`test`然后添加两个人，它会验证表单为真并继续前进。这是验证器规则中的注册码代码：

```
regis_code: {
    required: true,
    reg_code: true,         
    remote: { 
        url: "Private/Code_checker.php", 
        data: {
            num: function() {
               return num_rows;
            },
            },
        async: false 
    }
} 
```

所以php脚本工作得很好。我需要做的是在他们填写表格时进行验证，但也要在提交之前进行验证。另一个问题是表单第一部分的按钮不是提交按钮，它只是一个隐藏当前 div 并显示表单的下一个 div（第 2 部分）的按钮。我如何在他们输入时进行验证，并在他们单击按钮转到第 2 部分时进行验证？

这是按钮代码以及验证器的内容：

```
$('.button2').click(function() {
    if(val.form()) {
        $('.box').animate({ height:520, left: '-=50', top: '+=30', width: '-=350' }, 750);
        $('div.box label').animate({width: '-=100%'},500);
        $('#part1').fadeOut('slow', function() {
            $('#part2').fadeIn('slow');
        });
        $('#PaySubmit').fadeIn('slow');
    }
});
var val = $('#everything').validate({...}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:01:05.373

不确定我是否理解每一个细节，但你不应该`.validate()`在点击处理程序内部调用，因为`.validate()`每次点击按钮时都会重新初始化表单上的插件，这不是你想要的。

`.validate()`-在 DOM 就绪*后*初始化插件（带有选项） 。

[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)- 检查验证状态（布尔值）或随时验证`form`。

将您的代码更改为如下所示。该按钮不会提交表单`#everything`，因为您可能`.button2`不是提交按钮。但是，单击`.button2`将检查表单是否通过了验证，如果该条件为真，则执行其余的功能。

```
$(document).ready(function() {

    $('#everything').validate({ // initialize validation plugin once
        // options
    }); 

    $('.button2').click(function() {
        if( $('#everything').valid() ) { // check if form passes validation
            $('.box').animate({ height:520, left: '-=50', top: '+=30', width: '-=350' }, 750);
            $('div.box label').animate({width: '-=100%'},500);
            $('#part1').fadeOut('slow', function() {
                $('#part2').fadeIn('slow');
            });
            $('#PaySubmit').fadeIn('slow');
        }
    });

}); 
```

现在，鉴于上面的有用信息，我认为如果您使用两组不同的`form`标签，您的系统会更好地工作。您将拥有不同验证选项的优势，并且可能为您的两步系统提供更大的灵活性。

`.validation()`使用自己独特的选项在两种表单上进行设置。然后使用按钮检查第一个（不提交），然后利用`submitHandler:`第二个表单中的函数来提交两个表单。如果您不需要/不想同时提交这两个表单，您可以编写一个函数来捕获表单 1 的值，复制到隐藏`input`元素中并与表单 2 一起提交。

像这样的东西...

```
$(document).ready(function() {

    $('#form1').validate({ // setup form 1 validation but leave out both submitHandler and submit button.
        // options
    });  

    $('#button').click(function() {  // setup button to check validation state of form 1 and reveal form 2 if true.
        if ( $('#form1').valid() ) {
            // do stuff, reveal your other form, etc.
        }
    });

    $('#form2').validate({  // setup form 2 validation and use submitHandler to take care of submission of one or both sets of data.
        // options,
        submitHandler: function(form) {
            $('#form1').submit();  // alternatively copy the values from form 1 and include in form 2's submission
            $(form).submit();      // submit this form (#form2)
        } 
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:38:13.707

您可以随时使用该[`valid()`](http://docs.jquery.com/Plugins/Validation/valid)方法（如果`validate()`已被调用...），因此您可以在提交表单时强制验证表单：

```
if (!$("#everything").valid()) {
  // do whatever you need to do
  return false;     // cancel the submit
} 
```

您还可以将事件处理程序附加到选择其他人数或动态添加新人员并使用相同方法的字段。

**编辑：**另一种方法`valid()`是只检查特定的表单字段而不是整个表单：

```
$("#everything").validate().element("#reg_code");
// assuming that the registration code field has an ID called reg_code 
```

# java - 使用 SingleClientConnManager 在 Android 中出错

> ID：13653804
> 
> 赞同：0
> 
> 时间：2012-11-30T21:59:35.260
> 
> 标签：java, php, android, sql, android-asynctask

我目前正在尝试了解有关 Android 中 AsyncTask 的一些知识。我正在使用我正在使用的一些学校项目的代码片段，但我似乎无法正确运行它。我得到的错误如下：

**“SingleClientConnManager 的使用无效：连接仍然分配。确保在分配另一个连接之前释放连接。”**

所以基本上我确实理解*它*所说的，我需要在开始另一个之前关闭 http 连接。（如果我错了，请纠正我哈哈）所以我想知道是否有人可以在这里帮助我，因为我已经被困了几个小时。

我正在使用的代码如下：

```
protected class loader extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub

        try {
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("url_of_my_phpdocument_here.php");
            //legg til data
            nameValuePairs = new ArrayList<NameValuePair>(1);

            nameValuePairs.add(new BasicNameValuePair("username",username.getText().toString().trim()));
            nameValuePairs.add(new BasicNameValuePair("password",password.getText().toString().trim()));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            response=httpclient.execute(httppost);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            final String response = httpclient.execute(httppost, responseHandler);

            //Toast.makeText(MainActivity.this,response, Toast.LENGTH_LONG).show();

            //tv.setText(""+response);
            if(response.equalsIgnoreCase("User Found"))
            {
                startActivity(new Intent("com.example.obligatorisk.BROWSER"));
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }

        return null;
    }
    // TODO Auto-generated method stub

} 
```

我做了很多研究并找到了解决方案，但对于我发现的那些示例，它们似乎非常不同和定制。即使我已经和他们玩了很长时间，我似乎也无法让他们中的任何一个工作。

谢谢你。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:50:52.680

[SingleClientConnManager 的无效使用在 Android 2.2,2.3 中发生，但在 4.1 中没有](https://stackoverflow.com/questions/12554081/invalid-use-of-singleclientconnmanager-occurs-in-android-2-2-2-3-but-not-in-4-1)

您可能想查看上面提到的线程安全问题。我认为您需要了解您的 API 版本在“异步任务”中是否默认为单线程。

# dropbox-api - DropBox API 签名无效或缺失

> ID：13653806
> 
> 赞同：0
> 
> 时间：2012-11-30T21:59:43.697
> 
> 标签：dropbox-api

我正在尝试通过 Dropbox[系列中提供的 API 启用 Dropbox 操作](http://cgeers.com/category/programming/dropbox/)

这是生成的网址：

**https://api.dropbox.com/1/metadata/sandbox/public/2WayServiceOverview.pdf?oauth_consumer_key=XXXXXX&oauth_nonce=5382801&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1354311566&oauth_token=XXXXXXXXXVfah852%8a5oopQPP4**

当然，我替换了一些数据以不共享所有数据:-)

授权通过，我得到访问代码，然后得到 **{"error": "Invalid or missing signature"}**

文件**public/2WayServiceOverview.pdf**肯定存在。我做错了什么？可能是关于 oauth_signature_method 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:35:36.283

由于您使用的是 HTTPS，因此您可以使用更简单的 PLAINTEXT 签名方法。对你来说，这意味着：

1.  设置 oauth_signature_method=PLAINTEXT
2.  设置 oauth_signature=urlencode(app_secret + "&" access_token_secret)

通过 HTTP 标头而不是通过 URL 查询参数传递 OAuth 凭据可能更容易。请参阅本文的第 4 点：[https ://www.dropbox.com/developers/blog/20](https://www.dropbox.com/developers/blog/20)

# c# - BackgroundWorker 线程在访问 Windows 窗体控件时失败

> ID：13653810
> 
> 赞同：2
> 
> 时间：2012-11-30T22:00:07.457
> 
> 标签：c#, winforms, backgroundworker

我正在尝试从后台工作进程更新 Windows 窗体控件，如下面的代码所示。不幸的是，我收到以下错误：

> 跨线程操作无效：控件“richTextBox1”从创建它的线程以外的线程访问。

这是我正在使用的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Text.RegularExpressions;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {
        private CookieContainer cookies;
        public Form1() {
            InitializeComponent();
            backgroundWorker1.DoWork += 
                new DoWorkEventHandler(backgroundWorker1_DoWork);    
        }

        public string od_auth(string s) {    
            if (s.Contains(":")) {
                string[] acc = s.Split(':');
                cookies = new CookieContainer();
                HttpWebResponse res;
                try {
                    HttpWebRequest req = 
                        (HttpWebRequest)HttpWebRequest.Create(
                            "http://m.site.ru/dk?" + 
                            "bk=GuestMain" + 
                            "&st.cmd=main" + 
                            "&tkn=1110" +
                            "&fr.posted=set" +
                            "&fr.needCaptcha=" + 
                            "&fr.login=" + acc[0] + 
                            "&fr.password=" + acc[1] +
                            "&fr.remember=on" + 
                            "&button_login=%D0%92%D0%BE%D0%B9%D1%82%D0%B8"
                        );
                    req.AllowAutoRedirect = false;
                    req.Method = "HEAD";
                    req.CookieContainer = cookies;
                    req.UserAgent = "Opera/9.80 (Windows NT 6.1; U; ru) " +
                                    "Presto/2.2.15 Version/10.10";
                    req.ContentType = "application/x-www-form-urlencoded";
                    res = (HttpWebResponse)req.GetResponse();
                    res.Close();

                    string cook = "";
                    try {
                        if (res.Headers["Location"].Contains("cmd=userMain")) {    
                            cook = "AUTHCODE=" + Regex.Match(res.Headers["Set-Cookie"], @"HCODE=(?<id>[^;]+);").Groups["id"].Value + "; ";
                            cook += "JSESSIONID=" + Regex.Match(res.Headers["Set-Cookie"], @"ESSIONID=(?<id>[^;]+);", RegexOptions.RightToLeft).Groups["id"].Value + ";";
                            richTextBox1.Text += "[+] Авторизовались успешно на " + acc[0] + ":" + acc[1] + "\r\n";
                            return cook;
                        } else {
                            cook = "badacc";
                            richTextBox1.Text += "[-] Аккаунт " + acc[0] + ":" + acc[1] + " невалидный\r\n";
                            return cook;
                        }
                    } catch {
                        cook = "badacc";
                        richTextBox1.Text += "[-] Аккаунт " + acc[0] + ":" + acc[1] + " невалидный\r\n";
                        return cook;
                    }
                }
                catch { richTextBox1.Text += "[?] network error \r\n"; ;return "err"; }
            }

            richTextBox1.Text += "[?] some error \r\n";
            return "err";
        }

        public void od_info_changer(string cook) {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://m.site.ru/dk?bk=UserSettingsProfile&st.cmd=userSettingsProfile&tkn=2154");
            request.Method = "POST";
            request.Headers.Add("Cookie: "+cook);
            request.AllowAutoRedirect = false;
            request.ContentType = "application/x-www-form-urlencoded";
            byte[] EncodedPostParams = Encoding.UTF8.GetBytes("fr.posted=set&fr.name=D1%8F&fr.surname=%D0&fr.gender=1&fr.birthday=12&fr.bmonth=10&fr.byear=1949&fr.country=10414533690&fr.city=%D0%95%D0%BA%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%BD%D0%B1%D1%83%D1%80%D0%B3&button_save=%D0%A1%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D1%82%D1%8C");
            request.ContentLength = EncodedPostParams.Length;
            request.GetRequestStream().Write(EncodedPostParams, 0, EncodedPostParams.Length);
            request.GetRequestStream().Close();

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            string html = new StreamReader(response.GetResponseStream(), Encoding.UTF8).ReadToEnd();
            if (response.Headers["Location"].IndexOf("st.cmd=userSettings") != -1) {
                richTextBox1.Text += "[+] Cменили пароль\r\n";
            } else {
                richTextBox1.Text += "[-] Не смогли сменить имя\r\n";
            }               
        }

        List<string> accs=new List<string>();
        private void открытьАккаунтыToolStripMenuItem_Click(object sender, EventArgs e) {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            if (openFileDialog1.ShowDialog() == DialogResult.OK) {
                accs.Clear();
                foreach (string s in File.ReadAllLines(openFileDialog1.FileName))
                    accs.Add(s);

                richTextBox1.Text += "[+] Загрузили " + accs.Count.ToString() + " аккаунтов\n";
            }
        }

        private void Auth_Click(object sender, EventArgs e) {
            Auth.Enabled = false; // На время расчета блокируем опасные кнопки
            backgroundWorker1.RunWorkerAsync();
        }    

        public void go() {
            foreach (string acc in accs) {
                string cook = od_auth(acc);
                if (cook!="badacc")
                    od_info_changer(cook);
            }    
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) {
            go();
        }
    }
} 
```

但是，在加载`.txt`文件并按下我的按钮后，我收到：

![此错误消息](../Images/2f5490a7612ce342bda7e30f0e6aebcb.png)

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:07:40.777

您不能直接从后台线程更新控件。您需要调用回主线程并在那里执行操作：

```
delegate void updateDelegate(string val);

private void UpdateText(string updateVal)
{
    if (richTextBox1.InvokeRequired)
        richTextBox1.Invoke(new updateDelegate(UpdateText), updateVal);
    else
        richTextBox1.Text += updateVal;

} 
```

然后在您的后台工作人员代码中`richTextBox1.text`，您可以调用该`UpdateText`方法，而不是设置。

```
UpdateText("Whatever Value you want"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:13:39.087

您正在尝试与后台任务中的 UI 控件进行交互。你不能那样做。您需要将需要一段时间才能运行（在本例中为 HTTP 请求）且不与 UI 交互的代码放入`DoWork`处理程序中，并将显示结果的代码放入`RunWorkerCompleted`事件处理程序中。完成事件将始终在 UI 线程中运行，进度更改事件也是如此。

当您需要从后台任务定期更新 UI 时，通常表示进度已更改。在这种情况下，您可以订阅相关的进度更改事件，然后通过定期将当前进度传递给后台工作人员`ReportProgress`。

您可以`Invoke`在 UI 控件上使用从后台线程中编组到 UI 线程，但在大多数情况下您应该避免这样做。使用 a 的全部原因`BackgroundWorker`是它会为您处理这些问题。您的工作只是将适当的代码放入适当的事件处理程序中。如果您需要使用`Invoke`一些奇怪的边缘情况，这有时会更容易，但如果您经常使用它，则表明您没有正确利用现有的更高级别的抽象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:04:53.787

`Control.Invoke`如果您想使用后台工作人员的表单，您应该使用。[这里](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)有解释和一些例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T22:08:34.913

您必须安全调用：

```
if (richtextBox1.InvokeRequired)
{
 richtextBox1.Invoke(//Delegate);
} 
```

# selenium - 硒/PHPUnit。是否可以在窗口/浏览器顶部打开一个干净的新窗口/浏览器？

> ID：13653812
> 
> 赞同：1
> 
> 时间：2012-11-30T22:00:17.523
> 
> 标签：selenium, phpunit

我有一个登录到网站的窗口。例如，我在 hotmail 上登录了我的电子邮件。是否可以在此基础上打开一个干净的窗口/浏览器并登录另一封电子邮件，使用该窗口/浏览器进行测试，然后关闭或切换浏览器并进行更多测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:34:01.137

要打开一个新窗口，您可以试试这个

```
selenium.openWindow("Url To Open","MyWindow");
selenium.selectWindow("MyWindow");

//Do your operations here

selenium.selectWindow(null);//This will take you to default Window 
```

希望这会对你有所帮助。

# universal-image-loader - 使用 Universal Image Loader 加载图像时显示不确定的 ProgressBar

> ID：13653816
> 
> 赞同：18
> 
> 时间：2012-11-30T22:00:44.463
> 
> 标签：universal-image-loader

我想知道是否有一种机制可以在使用通用图像加载器加载图像时显示一个旋转的“不确定”进度条来代替图像。

现在，我正在使用 DisplayImageOptions 中的 showStubImage() 选项来显示一个在下载图像时显示“无图像”的图像，但是如果在 ImageView 顶部有一个旋转的不确定 ProgressBar 时，它会非常漂亮。图片正在下载。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-01T14:59:03.593

[以供参考](https://github.com/nostra13/Android-Universal-Image-Loader/blob/f9db2b157ab5b0f4b1003f7676ee4e1847a76a12/sample/src/main/java/com/nostra13/universalimageloader/sample/fragment/ImagePagerFragment.java#L97)

```
final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
final ImageView imageView = ...
final ProgressBar spinner = ...

imageLoader.displayImage(images[position], imageView, options, new SimpleImageLoadingListener() {
    @Override
    public void onLoadingStarted(String imageUri, View view) {
        spinner.setVisibility(View.VISIBLE);
    }

    @Override
    public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
        spinner.setVisibility(View.GONE);
    }

    @Override
    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
        spinner.setVisibility(View.GONE);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T07:13:43.880

我正在发布用于从网络下载图像的网格适配器类代码。您必须使用 one`imageview`和 two声明网格布局`textviews`。将字符串数组传递给适配器。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    // TODO Auto-generated method stub
    LayoutInflater inflater = (LayoutInflater) parent.getContext().getSystemService(activity.LAYOUT_INFLATER_SERVICE);
    //LayoutInflater inflator = activity.getLayoutInflater();
    if(convertView==null)
    {
        view = new ViewHolder();
        convertView = inflater.inflate(R.layout.grid_layout, null);
        view.txtViewTitle = (TextView) convertView.findViewById(R.id.title);
        view.txtViewSubTitle = (TextView) convertView.findViewById(R.id.subTitle);
        view.imgViewFlag = (ImageView) convertView.findViewById(R.id.imageView1);
        convertView.setTag(view);
    }
    else
    {
        view = (ViewHolder) convertView.getTag();
    }

    view.txtViewTitle.setText(listTitle.get(position));
    view.txtViewSubTitle.setText(listSubTitle.get(position));

    //For Picasso
 /*   Picasso.with(parent.getContext())
            .load("http://www.radioarpan.com/upload_images/138630281911.jpg")
            .placeholder(R.mipmap.paceholder)
            .error(R.mipmap.error_page_logo)
            .noFade().resize(125,165)
            .centerCrop()
            .into(view.imgViewFlag);*/

    ImageLoader imageLoader = ImageLoader.getInstance();
    DisplayImageOptions.Builder options = new DisplayImageOptions.Builder().cacheInMemory(true)
            .cacheOnDisc(true).resetViewBeforeLoading(true)
            .showImageForEmptyUri(R.mipmap.paceholder)
            .showImageOnFail(R.mipmap.error_page_logo);

    final ProgressBar spinner =  new ProgressBar(activity, null, android.R.attr.progressBarStyleSmall);
//download and display image from url
      imageLoader.displayImage("http://www.radioarpan.com/upload_images/138630281911.jpg", view.imgViewFlag,new SimpleImageLoadingListener()
   {
       @Override
       public void onLoadingStarted(String imageUri, View view)
       {
           spinner.setVisibility(View.VISIBLE);
       }

       @Override
       public void onLoadingFailed(String imageUri, View view, FailReason failReason)
       {
           spinner.setVisibility(View.GONE);
       }

       @Override
       public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage)
       {
           spinner.setVisibility(View.GONE);
       }
   }); 
```

# java - Apache Commons Logging 的编程配置

> ID：13653818
> 
> 赞同：0
> 
> 时间：2012-11-30T22:00:51.270
> 
> 标签：java, logging, apache-commons-logging

我想在我的 Java 项目中包含一个外部库，该库特别使用 Apache Commons Logging 将消息写入日志系统。该库写入了大量“信息”级别的消息，导致日志中出现大量无用条目。

我的应用程序应该在共享环境（例如，tomcat 或 jetty）中部署和执行。我的问题是，如果我不能依赖属性/xml 配置文件，我必须为这个库配置哪些选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:02:36.077

Apache Commons Logging 并不是一个真正的日志库，它只是一个代表底层日志库（如 Log4J 或`java.util.logging`. 所以首先你必须发现你*实际*使用的是哪个库。根据不同的配置选项适用。

`commons-logging.jar`我的建议是使用[SLF4J 桥](http://www.slf4j.org/legacy.html)添加替换，然后使用您想要的任何框架。

# ruby-on-rails - 如何在我的模型中调用 number_helper？

> ID：13653819
> 
> 赞同：2
> 
> 时间：2012-11-30T22:00:56.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, best-in-place

我正在使用 best_in_place gem，长话短说，我不能在我的视图中调用这个特殊的助手，因为我必须在我的模型中调用自定义方法来自定义我希望输出的外观。

这是我认为的电话：

```
<td><%= best_in_place firm, :size, :type => :input, :nil => "Click to add Firm Size", :display_as => :in_millions %></td> 
```

这是我`Firm`模型中的方法：

```
def in_millions
    "$#{self.size}M"
end 
```

用户输入的数字不是`100000000`，而是`100`。所以我想把`100`它读下来`$100M`。这就是我的助手所做的。

但是，对于那些像 的数字`12345`，我希望输出看起来像这样`$12,345M`：

我能想到的最简单的方法就是添加`number_with_delimiter(self.size)`并保留`$`and `M`，但我无法从我的模型中访问该辅助方法。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:07:16.053

您可以通过以下方式在模型中包含助手[`ActionView::Helpers`](https://stackoverflow.com/questions/489641/using-helpers-in-model-how-do-i-include-helper-dependencies)：

```
# in model
include ActionView::Helpers 
```

不过，我想知道将演示文稿放在演示文稿一侧是否更有意义。您可以将额外的逻辑包装在替代帮助程序中：

```
# in helper
def firm_size_in_millions(firm)
  size = number_with_delimiter(firm.size)
  "$#{size}M"
end

<!-- in view -->
<%= firm_size_in_millions(@firm) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:06:46.040

助手被认为是“演示”工具——例如，货币值或十进制值在某些地区或国家/地区的表示方式可能与在其他地区或国家/地区不同。

但是，如果您知道所有这些，那么就`include ActionView::Helpers::NumberHelper`在您的模型中:-)

# r - 标记 r 中的行组和“类型 t”图

> ID：13653821
> 
> 赞同：0
> 
> 时间：2012-11-30T22:01:06.907
> 
> 标签：r, scatter-plot

我从 R 中的数据框生成了一个排序图。数据框由站点（行）的物种（列）组成。矩阵中有一组“处理”位点和一组对照位点。但是，我计算排序的方式不需要矩阵中的其他变量（即没有明确的标识符说明站点是否“被处理”。问题：我可以在不构造分类变量的情况下按组标记图中的点吗？或者，我可以给处理行（例如行 1:7 一种符号和控制（例如 8:14）另一种类型吗？

这是一个例子：

```
#guess i don't have the reputation to post images...hmmm...

#looks something like this (first column is the site)  

#     spec1 spec2 spec3...spec14
#  1    0     1     0  ...    2
#  2    1     5     0  ...    0
#  3    0     2     1  ...    0  
#  .  
#  .  
#  .  
#  14  

# vegan package  
library(vegan)  

# example data matrix is 14x14, species names across columns, sites are numbered automatically upon import of txt file into RStudio  

data(example)  

#vegdist creates a distance matrix of sites  

example.dis <- vegdist(example) 

#monoMDS computes ordination of distance matrix  

example.mds <- monoMDS(example.dis) 

#plot it 
```

**这是我认为我可以修改图表的地方，但我不知道该怎么做**

```
plot(example.mds) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:38:38.340

是的，您可以使用外部变量来指定例如点的颜色。

这是一个例子：

```
# some data
require(vegan)
data(dune)
data(dune.env)

# vector holding the colors
cols <- c("red", "blue", "pink", "green")

# NMDS with bray-curtis distance
nmds <- metaMDS(dune, "bray", 2)

# empty plot
plot(nmds, type = "n")

# Add points colored by Environmental Variable Management
points(nmds, col = cols[dune.env$Management], pch = 16)

# add legend
legend("topright", legend=levels(dune.env$Management), col=cols, pch = 16) 
```

![在此处输入图像描述](../Images/42232d8d89b3fcab6cadbcaf5da471e9.png)

# batch-file - 在批处理文件的现有子文件夹中创建一个文件夹

> ID：13653826
> 
> 赞同：1
> 
> 时间：2012-11-30T22:01:20.920
> 
> 标签：batch-file, cmd

应该很容易吧..我正在与这个作斗争。或者更确切地说，它与我作战。所以我这样做：

```
 net use w: /delete

     SET SERVER1=myserver
     SET ROOT_DRIVE=c$

     SET WEB_ROOT=\Program Files\Common Files\Microsoft Shared\Web Server Extensions\12\TEMPLATE\LAYOUTS\
     SET DESTINATION_FOLDER=PPA20_TEST

     net use w: \\%SERVER1%\%ROOT_DRIVE% /User:%usern% %password%  /persistent:yes 
     cd w:%WEB_ROOT%
     md %DESTINATION_FOLDER% 
```

所以据说这应该在映射驱动器下的 WEB_ROOT 文件夹中创建我的 DESTINATION_FOLDER 。相反，它会在调用该批处理文件的位置创建它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:15:56.813

只需`w:`在您的`cd w:%WEB_ROOT%`通话之前添加，所以它会是这样的：

```
w:
cd w:%WEB_ROOT%
md %DESTINATION_FOLDER% 
```

因此，您首先更改为驱动器`w:`，然后更改目录就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:17:46.227

这是因为它不会更改活动驱动器，而只是更改*驱动器上`W:`*的活动目录。

要同时更改活动驱动器和活动目录，请使用以下`/D`开关：

```
cd /d w:%WEB_ROOT% 
```

但是，您可能并不需要将`w:%WEB_ROOT%`目录设置为活动的。只需在`md`命令中指定完整路径：

```
md w:%WEB_ROOT%%DESTINATION_FOLDER% 
```

# javascript - 返回一个对象在第二次迭代中返回 undefined

> ID：13653828
> 
> 赞同：0
> 
> 时间：2012-11-30T22:01:26.467
> 
> 标签：javascript, jquery, parsing, object, ads

我在网页上有几个脚本，我正在遍历它们，找出哪些是广告调用（包含特定字符串），然后解析这些脚本标签以从这些脚本标签中获取一些 url 参数。

```
var cmunt_uniqueId, cmnunt_kw;

var scripts = jQuery('script');
var adObject = {};

jQuery(scripts).each(function(v,u) {

    if ((jQuery(u).attr('src') !== undefined) && (jQuery(u).attr('src').indexOf('cmnUNTmob-20121130.js') > -1)) {

    console.log('script.src[' + v + ']="' + jQuery(u).attr('src') + '"');

        var adCall = jQuery(u).attr('src');

        // console.log(adCall);

        var pubtag = adCall;
        var newtag = pubtag.replace(/^[^\?]+\??/, '');
        var parts = newtag.split('&');
        var part1 = parts[0].split('=');
        var part2 = parts[1].split('=');
        var cmn_site_unit = part1[1].split('/');
        var cmn_site = cmn_site_unit[0];
        var cmn_unit = cmn_site_unit[1];
        cmnunt_kw = part2[1];
        var cmunt_uniqueId = getCookie('__utma');

    adObject['cmn_unit'] = cmn_unit;
    adObject['cmn_site'] = cmn_site;

    console.log('inside function');
    console.log(adObject['cmn_site']);
    console.log(adObject['cmn_unit']);

    return adObject;
    }
});

console.log('outside function');   
console.log(adObject['cmn_site']);
console.log(adObject['cmn_unit']); 
```

在函数内部，在两次执行中，变量都被设置并分配给一个对象，以便在函数外部进行解析。在函数之外，在第二次执行时，变量返回未定义。

这是调用运行脚本的页面： [WebPage](http://complexmedianetwork.com/test/site/mobile/demo8b.html)

您可以使用 Firebug 在控制台中查看输出。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:15:23.743

您将所有结果存储在同一个 adObject 属性中。当你循环最新的一个会覆盖其他的。

代替 adObject['cmn_unit']，例如使用 adObject[v]：

```
adObject[v] = {
    cmn_unit:cmn_unit,
    cmn_site:cmn_site
}; 
```

此外，jQuery(scripts) 应该是真正的脚本（虽然它不是错误，只是效率低下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:06:31.183

替换您的以下行：

```
jQuery(scripts).each(function(v,u) { 
```

对于这个：

```
scripts.each(function(v,u) { 
```

由于您的`scripts`变量已经包含一个 jquery 对象。

# xaml - VS2012 - 打开 Xaml 文件时 XDesProc 挂起

> ID：13653835
> 
> 赞同：16
> 
> 时间：2012-11-30T22:02:31.933
> 
> 标签：xaml, visual-studio-2012

在 VS2012 中，每当我尝试打开 xaml 文件（即使在完整的 XAML 视图中）时，XDesProc 进程都会保持旋转并挂起 Visual Studio。我试图杀死它，但它重生了。

我在网上做了一些搜索，发现人们在 RC 版本中抱怨这个。我没有使用 RC 版本，但我仍然看到这个问题。

有没有办法解决它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T15:23:12.827

很多人都在抱怨这个（包括我自己）。

这是摆脱 XDesProc 并加快 XAML 查看性能的解决方法： [http ://weblogs.asp.net/fmarguerie/archive/2009/01/29/life-changer-xaml-tip-for-visual -studio.aspx](http://weblogs.asp.net/fmarguerie/archive/2009/01/29/life-changer-xaml-tip-for-visual-studio.aspx)

这将禁用 VS2012 中的设计器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T16:56:17.277

使用我的 Visual Studio 2012.4 和 XDeskProc 使用的 2gb RAM，如果处于设计模式，我通过关闭 View Model 的构造函数中的数据加载来解决问题。加载我的许多 Comboboxes 的 ItemsSources 只是让设计师陷入困境

If DesignerProperties.GetIsInDesignMode(New DependencyObject) Then 'Do nothing Else' Do something End If

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T20:24:49.360

“源代码（文本）编辑器”对我不起作用。

显然 XDesProc 仍然决定想出我输入的每个字符。我已经更改了 XDesProc 的权限，因此拒绝“所有人”读取和执行以从一开始就获取它。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-07-02T16:01:21.587

翻译：刚刚发现此修复适用于 Visual Studio 2012

原文： Solo encontre respuesta con este fix。视觉功能 2012。

[http://www.microsoft.com/en-ie/download/details.aspx?id=36020](http://www.microsoft.com/en-ie/download/details.aspx?id=36020)

# arrays - 从Excel Vba中另一个数组中的数组中查找非特定值

> ID：13653844
> 
> 赞同：0
> 
> 时间：2012-11-30T22:03:02.880
> 
> 标签：arrays, vba, excel

好的，我已经对这个主题进行了大量研究，但我还没有找到答案，所以这里是这样的：我收到的数据顺序不理想（只是带有日期、时间等标题的列和这些标题下的数据）我的目标是从已经手动排序的模板（在另一个工作表中）中对不需要的数据进行排序。我目前的想法是使用这样的东西来指定两个数组：

```
SetRng1 = Application.InputBox("Select The Formatted Range of Channel Names", Type:=8)

SetRng2 = Application.InputBox("Select The Unformatted Range of Channel Names", Type:=8) 
```

使用 Rng1 元素对 Rng2 元素进行排序。然而，Rng1 中的通道并不总是在 Rng2 中，在这种情况下，来自格式化数据 (Rng1) 的通道需要以正确的顺序插入，其下方有空白单元格。与 Rng2 中的情况一样，其中会有 Rng1 中没有的频道，这些将需要被推送到频道列表的末尾。此外，Rng1 和 Rng2 中标题的名称和数量将始终在变化，因此无法找到元素并仅通过它们的通道名称对其进行排序。我很惭愧地承认，我对 vba 的了解并不能胜任这项任务。我感谢可能提供的任何帮助，如果有任何不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:47:33.133

**这不是一个答案。** 这是试图理解你的问题，我怀疑这是一个有趣的问题。您应该将本文中关于您的问题的正确猜测复制到您的问题中，并替换不正确的猜测。

您不能将数据保存在数组中，因此您必须描述问题的中心。我猜您有一个包含格式化数据的工作表，并且您会不时收到一个包含新数据的 CSV 文件，该文件将被合并到工作表中。

为了使描述更容易，我将使用它来表示您的格式化数据：

```
Name   Week  Mon  Tue  Wed  Thu  Fri
John      1    5   10   12   4     3
Gwen      1    3   15    3   1     8
John      2    3    7   18   6     4
Gwen      2    9   20    4   1     7 
```

您说格式化名称可能会更改或添加。也许老板认为周一、周二等过于非正式，并希望将周名拼写出来。也许你加上星期六和星期天，然后争论星期天是一周的第一天还是最后一天。

您说 CSV 文件中的列标题并不总是与格式化的列标题匹配。当格式化的标题不是时，可能会缩写 CSV 标题。也许 CSV 标题是西班牙语的。也许在高峰期有一个公共假期，所以约翰和格温在周二到周六工作。也许周五是新员工的安息日，所以他们从周日到周四工作。

您正在考虑使用`InputBox`让用户选择两个标题序列，但我看不出它是如何工作的。

首先，您可以查看工作表以找到所需的序列。用户不必选择任何东西。

其次，用户为 CSV 文件选择名称集和序列意味着宏必须保存所有可能的名称集和序列的列表。那可能吗？由于您声明 CSV 文件可能包含一个新标题，我猜不会。

假设，这两组标题是：

```
Worksheet: Name   Week  Mon  Tue  Wed  Thu  Fri
 CSV file: Staff  WoY   Sun  Mon  Teu  Wed  Sat 
```

Name 和 Week 列有不同的名称。星期二拼写错误的复杂情况有不同的工作日。

您是否有与 CSV 文件匹配的准备好的列表？您会尝试即时解决差异吗？我认为不可能有一套完整的准备好的清单。第二个需要一些聪明而复杂的代码才能获得有限的收益。

我会（1）简化要求，（2）准备一个备用名称表。

为了简化，我会要求格式化数据提前包含所有可能的列。如果 CSV 文件包含以前未知的星期六，我会要求在应用 CSV 文件之前添加它。如果它不在列表中，我不会尝试添加“Teu”。

我的替代表将在一个隐藏的工作表中，并且是这样的，其中每一行都为同一列定义了一个替代名称列表：

```
Name   Staff      Staff member
Week   WoY        Week of year
Mon    Monday     M
Tue    Tuesday    Tu            Teu
Wed    Wednesday  W
Thu    Thursday   Th
Fri    Friday     F
Sat    Saturday   Sa            St
Sun    Sunday     Su            Sn 
```

该表无法处理歧义。给定`M T W T F`，它不能推断出第一个`T`是星期二和第二个星期四。

`Teu`如果您愿意，可以包含拼写错误（例如）。

我会要求工作表和 CSV 文件中的每个列标题都在此表中。任何无法识别的列标题都会产生有用的消息，因此用户可以在重新运行宏之前修复工作表、备选表或 CSV 文件。

应该清楚的是，尽管您可能遇到 VBA 问题，但我认为您首先遇到了设计问题。

祝你好运。

# f# - 找不到要参考的文件以使 NUnit 为 F# 处理单声道

> ID：13653845
> 
> 赞同：0
> 
> 时间：2012-11-30T22:03:11.417
> 
> 标签：f#, mono, nunit

我正在尝试在带有 F# 2.0 的 Mac 上使用 nunit-console 应用程序。我正在使用这个版本的单声道：Mono JIT 编译器版本 2.10.9（tarball Mon May 7 20:25:51 EDT 2012）。在编译我的测试 dll 时，我找不到要使用的适当参考。

我需要参考哪些文件，在哪里可以找到它们？

```
fsc -r ??? module.fs tests.fs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:32:31.247

我用

```
-r "Nunit.FrameWork.dll" 
```

# .htaccess - .htaccess 重定向传递变量（查询字符串），但不传递页面名称或目录。

> ID：13653848
> 
> 赞同：0
> 
> 时间：2012-11-30T22:03:22.817
> 
> 标签：.htaccess, redirect

试图掌握这一点，但无法完全弄清楚。

我需要重定向：

```
domainA.com/myPage.php?some=variables&are=here 
```

至：

```
domainB.com/otherPage.php?some=variables&are=here 
```

如果 myPage.php 在目录中，它也需要工作..但在 domainB 上的目录之外重定向

```
domainA.com/folder/myPage.php?some=variables&are=here 
```

去：

```
domainB.com/otherPage.php?some=variables&are=here 
```

这看起来很简单，但我的语法不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:44:05.620

在 domainA.com 域的文档根目录中的 htaccess 文件中，添加这些（最好在任何其他规则之上）

```
RewriteEngine On
RewriteCond %{HTTP_HOST}  domainA.com$ [NC]
RewriteRule /?myPage\.php$ http://domainB.com/otherPage.php [L] 
```

Thr 查询字符串参数将自动附加

# java - 反映重构更改（Java -> JSP）

> ID：13653849
> 
> 赞同：1
> 
> 时间：2012-11-30T22:03:26.890
> 
> 标签：java, eclipse, jsp, refactoring, intellij-idea

哎呀这又发生了。

今天我做了一些重构，当时我将代码从一个包移动到另一个包，却忘记更新 JSP 的导入语句。单元测试以通常的成功消息通过，代码编译时没有错误或警告，在运行时有一个很大的异常在等着我。

使用 Eclipse 或 IntelliJ IDEA，您如何处理对 Java 代码所做的重构更改未反映在 JSP 中的事实？我能做些什么来强迫这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:19:10.040

好吧，如果您遵循最佳实践，您将不会有任何 scriptlet 代码，因此您的 JSP 中也不会有任何 import 语句。如果您重命名 JSP EL 表达式中使用的 getter（例如），您仍然需要重构 JSP，但类名的更改不会产生任何影响。

我会将 JSP 编译集成到您的构建过程中（至少在持续集成服务器上）以检测 JSP 中的此类问题。这是[使用 Tomcat](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)的方法。您可以使用 Selenium 或 HtmlUnit 集成测试来检查您的 JSP 是否正常执行。

# http - 正在进行的 HTTP 状态代码？

> ID：13653850
> 
> 赞同：5
> 
> 时间：2012-11-30T22:03:34.290
> 
> 标签：http, rest

我有一个看起来像这样的端点： GET: /v1/resourcebeingcreated/status

如果此资源的加载/创建正在进行但未完成，是否有要返回的首选 HTTP 状态代码（超过 200 并带有解释“正在进行”的响应正文）？

如果不是，那么在标头或响应正文中返回“进行中”状态的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:11:18.370

1.  [http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success) - 没有。:)
2.  我认为这应该取决于您要达到的目标。您是否试图以某种方式通知第三方？如果您要定义自己的 API，那我猜可以在标题中设置它。然而，更常见和更直观的方法是身体。

# php - Zabbix 导出图形 (.PNG) 文件

> ID：13653853
> 
> 赞同：12
> 
> 时间：2012-11-30T22:03:48.403
> 
> 标签：php, linux, curl, zabbix

我的目标：

我想以 .png 格式提取与主机关联的图表。我的 GOOGLE 研究表明我们没有设计用于执行此任务的 Zabbix API。很少有博客建议用户使用 Chart2.php 和 CURL。有人可以解释一下如何去做（详细步骤）吗？

**注意：**抱歉从未在 php 和 curl 上工作过

当我尝试

```
curl https://example.com/zabbix/chart2.php?graphid=1552&width=300&height=300 
```

收到了，但是链接失效了

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>302 Found</title>
</head><body>
<h1>Found</h1>
<p>The document has moved <a href="/zabbix/openid?graphid=1552&amp;modauthopenid.referrer=https%3A%2F%2Fexample.com%2Fzabbix%2Fchart2.php%3Fgraphid%3D1552">here</a>.</p>
<hr>
<address>Apache/2.2.3 (Red Hat) Server at example.com Port 80</address>
</body></html> 
```

另外，我如何将它与我的 zabbix api (JAVA) 调用结合起来？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T14:13:54.040

这适用于正常的密码身份验证，您需要将其调整为我不使用的 openid，而且您肯定必须更改选项以使其与 curl 一起使用。

`1\. wget --save-cookies=z.coo -4 --keep-session-cookies -O - -S --post-data='name=(a zabbix username)&password=(password)&enter=Enter' 'http://example.com/zabbix/index.php?login=1'`

`2\. wget -4 --load-cookies=z.coo -O result.png 'http://example.com/zabbix/chart2.php?graphid=410&width=1778&period=102105&stime=20121129005934'`

第一个发布身份验证并保存cookie。第二个加载相同的 cookie 文件并检索 png。

你肯定想在不使用 shell 的情况下使用你喜欢的语言和 zabbix 的 JSON-RPC API 来实现它，其中已经有很多客户端库。

尽管 AFAIK 您仍然必须像这样登录才能获取图形的图像。至少目前是这样。

编辑： https: [//support.zabbix.com/browse/ZBXNEXT-562](https://support.zabbix.com/browse/ZBXNEXT-562)是投票的人（或开始工作）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-16T05:15:39.113

除此之外，如果您使用的是 Zabbix 2.0，cURL POST 数据略有变化。

替换以下内容：

`1\. wget --save-cookies=z.coo -4 --keep-session-cookies -O - -S --post-data='name=(a zabbix username)&password=(password)&enter=Enter' 'http://example.com/zabbix/index.php?login=1'`

具有以下内容：

`1\. wget --save-cookies=z.coo -4 --keep-session-cookies -O - -S --post-data='name=(a zabbix username)&password=(password)&enter=Sign in&autologin=1&request=' 'http://example.com/zabbix/index.php?login=1'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T09:47:17.980

在某些情况下，您不能或不想使用`wget`. 事实证明，您不需要登录 hack 来读取 cookie 并在下载图像时设置它们。您只需要使用 API 登录时获得的 Zabbix 会话 ID（也称为身份验证字符串）。现在您可以简单地使用它来设置一个名为的 cookie`zbx_sessionid`并调用为您提供图像的 URL。

在 Java 中：

```
private byte[] getPng(ZabbixUser user, URL pngUrl) throws IOException
{
  HttpURLConnection conn = (HttpURLConnection) pngUrl.openConnection();
  conn.setRequestProperty("Cookie", "zbx_sessionid=" + user.getSessionid());
  try (InputStream is = conn.getInputStream()) {
    return toByteArray(is);
  }
}

private static byte[] toByteArray(InputStream is) throws IOException
{
  ByteArrayOutputStream baos = new ByteArrayOutputStream();
  byte[] byteChunk = new byte[4096];
  int n;
  while ((n = is.read(byteChunk)) > 0) {
    baos.write(byteChunk, 0, n);
  }
  return baos.toByteArray();
} 
```

`ZabbixUser`是我创建的一个模型，用于存储您使用`"userData": true`. 结果对象将包含一个`sessionid`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T16:13:00.643

Zabbix 允许使用单个 wget 命令检索所需的数据，该命令会在登录后导致 HTTP 重定向。

`wget --post-data='name=(username)&password=(password)&enter=Enter&request=http%3A%2F%2Fexample.com%2Fzabbix%2Fchart2.php%3Fgraphid%3D410%26width%3D1778%26period%3D102105%26stime%3D20121129005934' -O (image file) 'http://example.com/index.php?login=1'`

不要忘记对`request`参数值进行 url 编码。

如果您想拥有最新的时期，请将其设置`stime`为遥远的未来。“20200101000000”对我来说效果很好。

使用**Zabbix 1.8.11**测试。

# xml - 如何使用 xml 配置 log4j 1.2

> ID：13653854
> 
> 赞同：11
> 
> 时间：2012-11-30T22:03:50.023
> 
> 标签：xml, log4j

我坚持使用使用 log4j 1.2.12 的遗留代码，并试图解决它引发的关于附加程序的一些错误。我找不到 log4j 1.2 的文档 - 我一直被重定向到 log4j 2。很好，但没有帮助。1.2 的主要文档没有任何示例 xml。如果有人能指出我对此的良好文档，我将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-13T12:08:25.927

原始文档位于[http://wiki.apache.org/logging-log4j/Log4jXmlFormat](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)

wiki 目前正在维护中，所以我无法验证链接是否仍然有效。您将在 archive.org 找到该文档：http://web.archive.org/web/20121024061840/http: [//wiki.apache.org/logging-log4j/Log4jXmlFormat](http://web.archive.org/web/20121024061840/http://wiki.apache.org/logging-log4j/Log4jXmlFormat)

# c++ - 开源 Qt4 的安装程序在哪里？

> ID：13653859
> 
> 赞同：-1
> 
> 时间：2012-11-30T22:04:29.850
> 
> 标签：c++, qt, installation

我一直在寻找一个小时，我去这里：http: [//qt-project.org/downloads](http://qt-project.org/downloads)，但是没有 Qt 的安装程序。它有源代码（“Qt 库”）和我下载并安装的 Qt Creator 的安装程序，但是 Qt Creator 中的一些东西丢失了（例如项目类型，“工具包”），而且我我猜这是因为我需要安装 Qt4 本身，我找不到！

我问这个是因为我在另一台计算机上很好地安装了 Qt4，但我忘记了我从哪里得到它。[http://qt.digia.com/Try-Qt-Now/](http://qt.digia.com/Try-Qt-Now/)会给我 SDK 但它是试用版，我想要开源免费版。

我在哪里得到这个！我知道它在那里，因为几周前我将它安装在另一台计算机上，我所要做的就是运行一个简单的 .exe 文件来安装它（我知道事实上它是合法副本，而不是盗版版本）。

另外，我希望能够将它与 QMake 和 QCreator 一起使用，所以我会假设这样的软件包之一：“Qt library 4.8.4 for Windows (minGW 4.4, 317 MB)”不起作用？

PS。对于决定否决/关闭这个项目的好人，我相当肯定这属于这个类别：“程序员常用的软件工具”，这是 SO FAQ 所说的适合在这个网站上提出的问题之一.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:13:50.333

它就在[http://qt-project.org/downloads](http://qt-project.org/downloads)上。“Qt 库 4.8.4 for Windows”（各种版本，用于 MinGW 和 Visual Studio。）我看不出你怎么会错过它：-/

# java - java SAX 解析器是否真的从 Internet 检索 DTD？

> ID：13653861
> 
> 赞同：6
> 
> 时间：2012-11-30T22:04:31.143
> 
> 标签：java, xml, struts2, sax, dtd

对于声明 DOCTYPE 的 XML 文件，以 struts.xml 文件为例：

Java SAX 处理实际上是从提供的 URL 中获取 dtd 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:11:17.633

即使在技术上，如果我没记错的话，许多（大多数）实现将被解释为 URI，而不是 URL。

如果您想确保在本地解决它，请查看[EntityResolver](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/EntityResolver.html)接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T22:14:47.197

根据[Xerces 文档，打开](http://xerces.apache.org/xerces2-j/faq-general.html)**验证**时解析器可能会尝试从 Internet 下载文件。但我真的认为这可以从解析器更改为解析器，因为库可能决定使用本地缓存、代理服务器或其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T06:55:59.957

您可以修改 struts.xml 以从类路径中的 struts2 核心 jar 加载 DTD 文件，而不是从 Internet 加载它

从

```
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts 
Configuration//EN" 
"http://struts.apache.org/dtds/struts-2.0.dtd"> 
```

改成

```
<!DOCTYPE struts SYSTEM "struts-2.0.dtd"> 
```

现在 sax 解析器从我放置的 /src 文件夹中加载了 struts-2.0.dtd 文件。

这也是我修改后的休眠配置文件，它的工作方式略有不同。它直接从 JAR 加载 dtd 文件，不必将其物理放置在 src 文件夹中

```
<!DOCTYPE hibernate-configuration SYSTEM "classpath://org/hibernate/hibernate-configuration-3.0.dtd"> 
```

# javascript - 按下按钮时等待 3 秒，然后提交 javascript

> ID：13653872
> 
> 赞同：1
> 
> 时间：2012-11-30T22:05:38.283
> 
> 标签：javascript

我如何制作一个 Javascript，这样当我按下我的提交按钮时，它会将按钮的名称更改为类似“正在加载...”的名称，并在 3 秒后按下按钮

```
<input type="Submit" name="submitNew" id="submitNew" value="Send"> 
```

它将充当人类的“垃圾邮件过滤器”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T22:07:59.877

一种可能的解决方案是通过以下方式为元素设置`submit`事件：`form`

*HTML：*

```
<form onsubmit="return formSubmit(this);"> 
```

*JavaScript：*

```
function formSubmit(form) {
    document.getElementById("submitNew").value = "Loading...";
    setTimeout(function() {
        form.submit();
    }, 3000);  // 3 seconds
    return false;
} 
```

另一种方法是动态设置事件（*向小猫致敬！*）：

```
window.onload = function() {
    document.getElementById("formID").onsubmit = function() {
        var form = this;
        document.getElementById("submitNew").value = "Loading...";
        setTimeout(function() {
            form.submit();
        }, 3000); // 3 seconds
        return false;
    };
};​ 
```

**演示：http:** [//jsfiddle.net/spWDk/](http://jsfiddle.net/spWDk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T13:24:01.197

您可以尝试以下解决方案：

```
<form action="https://google.com" method="post" name="simulation" id="simulation">
    <input type="text" name="nom" id="nom"/>
    <input type="text" name="prenom" id="prenom"/>
    <input type="submit" value"Submit">
</form>
<script>
$("#simulation").on('submit', function (e) {
    console.log("Submitted");
    //stop form submission
    e.preventDefault();
    //Do your custom work.
    setTimeout(function(){ document.getElementById('simulation').submit(); }, 5000);
});
</script> 
```

# scala - 需要以下 scala 片段的简单英文翻译

> ID：13653873
> 
> 赞同：12
> 
> 时间：2012-11-30T22:05:49.937
> 
> 标签：scala

我是 scala 和 playframework 的新手。有人可以将下面的代码片段翻译成简单的英文吗？在这里可以找到上下文：[http ://www.playframework.org/documentation/2.0.4/ScalaSecurity](http://www.playframework.org/documentation/2.0.4/ScalaSecurity)

```
/**
 * This method shows how you could wrap the withAuth method to also fetch your user
 * You will need to implement UserDAO.findOneByUsername
 */
def withUser(f: User => Request[AnyContent] => Result) = withAuth { username => implicit request =>
  UserDAO.findOneByUsername(username).map { user =>
    f(user)(request)
  }.getOrElse(onUnauthorized(request))
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-01T06:17:07.277

**第 1 部分：首先让我们解决柯里化语法：**

`withUser`是一种采用`f`类型为 curried 函数的方法`User => Request[AnyContent] => Result`。它接受一个`User`对象并返回另一个接受 a`Request`并返回 a 的函数`Result`。分解它，如果`f`是那个功能，那么：

```
val g = f(user) // g is a function
val result = g(request) // returns a result
// same as:
val result = f(user)(request) 
```

实际上`f`，它就像一个带有两个参数的函数，而不是调用`f(a, b)`你 call `f(a)(b)`。

`withAuth`也是一种采用柯里化函数的方法。它的类型几乎与`withUser`.

**第 2 部分：现在如何使用这些方法：**

正如[这里](http://www.playframework.org/documentation/2.0.4/ScalaActions)所解释的，play 让您通过告诉它如何将`Request`对象转换为`Result`对象来定义您的应用程序逻辑。

`withAuth`是一个辅助函数，负责为您进行身份验证并方便地检索用户名。所以你像这样使用它：

```
def index = withAuth { username => implicit request =>
  Ok(html.index(username))
} 
```

它返回一个接受 a`Request`并返回 a的函数`Result`，这正是 play 所需要的。但它需要的是一个柯里化函数（接受用户名）并返回一个函数（接受请求）。请求参数被标记为*隐式*，因此它可以隐式传递给任何需要隐式请求参数的函数/方法调用。出于本说明的目的，只需忽略`implicit`关键字。

**第 3 部分：翻译`withUser`**

好吧，它的签名类似于，`withAuth`目标是以相同的方式使用它，除了第一个参数将是 a`User`而不是 a `String`。所以它必须采取一个`User => Request => Result`. 请求特征接受一个类型参数，该参数指示其内容的类型。在这里`AnyContent`。所以参数的正确类型`withUser`是`User => Request[AnyContent] => Result`。这意味着您将能够像这样使用它：

```
withUser { user => implicit request =>
  // do something with user and request to return a result
} 
```

如果您查看 的定义`withUser`，它所做的就是调用`withAuth`：

```
def withUser(f: User => Request[AnyContent] => Result) = withAuth { 
  // ...
} 
```

因此，它将返回相同的类型，`withAuth`这意味着它将返回一个将 a`Request`转换为 a的函数`Result`（参见上面的第 2 部分）。这意味着我们将能够像这样使用它：

```
def index = withUser { user => implicit request => 
  Ok(html.index(user))
} 
```

作为参数传递的`withAuth`是柯里化函数。我介绍了中间`val`，以便您可以遵循以下类型：

```
username => // first param is the username as a String
  implicit request => // second param is the request
    // here we have to return a Result...
    // we lookup the user - we may not have one:
    val userOption: Option[User] = UserDAO.findOneByUsername(username)
    // f is the code block that will be provided inside withUser { f }
    // Part 1 explains the f(user)(request) syntax
    // We call f to get a result, in the context of the Option monad
    val resultOption: Option[Result] = userOption.map(user => f(user)(request))
    // if we have a result, return it; otherwise return an error.
    resultOption.getOrElse(onUnauthorized(request)) 
```

# objective-c - 如何发出 Yelp API 请求？

> ID：13653877
> 
> 赞同：6
> 
> 时间：2012-11-30T22:05:59.167
> 
> 标签：objective-c, ios, yelp

我只是尝试将 Yelp API 请求作为 iPhone 应用程序的一部分，但我不知道如何设置请求。我通过 Yelp 获得了所有身份验证密钥，但我不确定我需要包含哪些内容。我不需要让用户登录他们的帐户或其他任何东西，我只希望能够检索评论以显示在我的应用程序中。

假设我想在位置=旧金山搜索词=食物。我最初的想法是：

[http://api.yelp.com/v2/search?term=food&location=San+Francisco&oauth_consumer_key=XXXXXXX&oauth_nonce=XXXXX&oauth_signature=XXXXXX&oauth_signature_method=HMAC-SHA1&oauth_timestamp=XXXXX&oauth_token=XXXX](http://api.yelp.com/v2/search?term=food&location=San+Francisco&oauth_consumer_key=XXXXXXX&oauth_nonce=XXXXX&oauth_signature=XXXXXX&oauth_signature_method=HMAC-SHA1&oauth_timestamp=XXXXX&oauth_token=XXXX)

当我尝试这个时，我得到一个 INVALID_SIGNATURE 错误

从 Yelp 请求这些信息的最佳方式是什么？另外，我应该通过 URL 传递我的身份验证密钥吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:18:32.530

出于好奇，您如何处理请求？Yelp 确实有一个用于在 iOS 上获取请求的示例库，网址为： [https](https://github.com/Yelp/yelp-api/tree/master/v2/ios/YelpAPI) ://github.com/Yelp/yelp-api/tree/master/v2/ios/YelpAPI 如果您想了解他们如何处理 API 请求的示例。

编辑：我下载了 Yelp 的 iOS 项目，实际上将 OAuth 库和 YAJL 框架带入了带有 ARC 和 Storyboards 的测试 XCode 帐户，但是我确实必须将 -fno-objc-arc 添加到每个 OAuthConsumer 库中。在该过程之后，导入 OAuthConsumer.h 文件后，以下代码将起作用：我创建了一个要点，因为代码标记对我的代码格式不太满意。

[https://gist.github.com/dmason82/9200614](https://gist.github.com/dmason82/9200614)

# sql-server - 导入 dbschema 或 dacpac 忽略所有错误

> ID：13653891
> 
> 赞同：2
> 
> 时间：2012-11-30T22:07:04.727
> 
> 标签：sql-server, visual-studio-2010, database-project

我们使用 Visual Studio 数据库项目已有一段时间了，它们非常适合部署。我们已经开始将不同环境中数据库的当前状态捕获为 dbschema 或 dacpac 文件，以便我们可以在其他数据库项目中引用它们，这样我们就可以在没有生产访问权限的情况下查看生产模式的状态。

通常我想从源代码管理中获取 dbschema 或 dacpac 并在我的本地 sql 服务器上创建该模式，但由于用户存在于一个环境中而不是我的本地环境中，几乎总是会出现错误。如果我忽略用户对象类型，如果其他任何内容引用用户（如模式），我仍然会收到错误。

我已经看到了创建一个服务器项目来处理这种情况的建议，但我不想为此创建任何自定义的东西，因为我的任务是为我们的开发人员创建一个通用工具。我希望能够采用任何 dbschema 或 dacpac 并以“尽力而为”的方式导入它。

我知道这在大多数情况下会很危险，但在我的本地数据库上，我几乎从不关心是否存在数据丢失或其他严重错误。我只想要一种快速的方法来获取本地实例上 dbschema 中的有效对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:29:08.040

我知道你正在处理的确切问题。在 VS2010 中，当您使用 dbschema 文件时，我不相信除了创建服务器项目（如您所说）之外还有其他方法可以做到这一点。但是，您可以进行模式比较并选择不比较用户/登录名，我相信。

我一直在我的最新项目中使用 2012 SSDT，直到我读到你的问题才意识到这个错误消失了。当我导入现有数据库时，似乎没有使用它导入用户。因此，当我发布项目时，它没有部署任何用户。有趣的是，如果您进行模式比较，您可以选择比较用户并部署它们。但是，如果您通过项目发布（我假设使用 SqlProject.exe 发布），则不会触及用户，即使您选中了项目中不存在的目标中的删除对象。

然后我的建议是升级到最新版本的数据库项目（适用于 2010 和 2012），不要在项目中包含用户并使用 SqlPackage.exe 发布。

希望这有帮助，马克

# objective-c - 带有变量的objective-c drawrect

> ID：13653892
> 
> 赞同：0
> 
> 时间：2012-11-30T22:07:14.863
> 
> 标签：objective-c, variables, drawrect

我只是想了解如何将值从 AppDelegate 中的文本字段传递到我的 NSView 子类“ViewController”。我真的不明白。我是 Objective-c 的新手，我开始感到沮丧。请不要告诉我看书。我有 Hillegass COCOA 编程，即使在那里我也没有找到答案。叫我白痴，只要我得到这些东西，我就可以处理...我只是尝试通过输入变量*balkenHoehe*设置矩形高度：

*我的 AppDelegate .h：*

```
#import <Cocoa/Cocoa.h>  
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet NSTextField *eingabeText;

- (IBAction)pushButton:(NSButton *)sender;

@end 
```

*我的 AppDelegate .m：*

```
@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLog(@"did launch");
}

- (IBAction)pushButton:(NSButton *)sender {

    NSLog(@"Button pushed");
    double number;

    number = [_eingabeText doubleValue]; //input by textfield

    CustomView *hoehe = [[CustomView alloc] init];
    [hoehe setBalkenHoehe:number];

}
@end 
```

*我的自定义视图 .h：*

```
#import <Cocoa/Cocoa.h>

@interface CustomView : NSView
{
   double balkenHoehe;
}

-(double) balkenHoehe;
-(void) setBalkenHoehe:(double)abalkenHoehe;
@end 
```

*我的自定义视图 .m：*

```
#import "CustomView.h"

@implementation CustomView

//********************************
-(void) setBalkenHoehe:(double)abalkenHoehe
{
    balkenHoehe = abalkenHoehe;
    [self setNeedsDisplay:YES];
}

//********************************
-(double)balkenHoehe
{
return balkenHoehe;

}

//********************************
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {

    [self setBalkenHoehe:10]; //initial hight at start

    }
    return self;
}

//********************************
- (void)drawRect:(NSRect)rect
{
    NSRect bounds = [self bounds];
    float fieldWith = bounds.size.width / 3.0;
    float fieldHeight = bounds.size.height / 3.0;

        //background
    NSRect hintergrundRect =
    hintergrundRect = NSMakeRect(bounds.origin.x, bounds.origin.y,
                             bounds.size.width, bounds.size.height);
    [[NSColor grayColor] set];
    [NSBezierPath fillRect:hintergrundRect];

        //Diagram
    NSRect aRect =
    aRect = NSMakeRect (fieldWith, fieldHeight, fieldWith, balkenHoehe);

        // draw rectangle
    [[NSColor whiteColor] set];
    [NSBezierPath fillRect:aRect];

        // draw rect border
    [[NSColor blackColor] set];
    NSBezierPath *aPath = [NSBezierPath bezierPathWithRect:aRect];
    [aPath setLineWidth:1];
    [aPath stroke];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:46:11.570

Horatiu 是对的，您没有将 hoehe NSView 添加到窗口中，没有地方可以显示它。但是，我认为他提出的建议是针对 iOS 的，而这似乎是 OS/X。将视图添加到窗口的一种方法是编写

```
[self.window setContentView:hoehe]; 
```

在`pushButton:`. 但是，这只工作一次，然后它会清除按钮的视图！

一种更有用的方法是将`hoehe`视图添加到现有窗口的`contentView`：

```
ViewController *hoehe = [[ViewController alloc] init];
[hoehe setFrame:CGRectMake(20, 20, 100, 100)]; // or whatever
[self.window.contentView addSubview:hoehe ];
[hoehe setBalkenHoehe:number]; 
```

但是请注意，每次按下按钮时，您都会创建一个新的 NSView 并将其放置在之前的所有视图之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:23:01.577

我认为问题不在于您设置变量的方式。据我所知，您的视图控制器的视图没有添加到窗口的视图层次结构中，因此您的绘制矩形没有做任何事情，或者更好地说没有绘制内容的上下文。

将 ViewControllers 的视图添加到窗口或视图层次结构中，事情就应该开始了。就像是：

```
[window addSubview:_viewController.view]; 
```

这就是我能想到的你的问题。

# mysql - MySQL SELECT 将多个值显示为列

> ID：13653894
> 
> 赞同：1
> 
> 时间：2012-11-30T22:07:16.237
> 
> 标签：mysql, sql, pivot

> **可能重复：**
> [SQL“转换”查询](https://stackoverflow.com/questions/2140958/sql-transform-query)

我不知道如何编写 SQL 语句以将表的不同值显示为单独的列...这是一个示例：

```
Table A - Project
= = = = = = = = = = = = = =
ID | Project
= = = = = = = = = = = = = =
1  | Google

Table B - Tasks
= = = = = = = = = = = = = = = = = = = = = = = = = = = =
ID  | Project ID    | Task_name | Date Complete
= = = = = = = = = =  = = = = = = = = = = = = = = = = = =
1   |  1            | Build     | 10/30/12
2   |  1            | Revise    | 11/15/12
3   |  1            | Launch    | 11/30/12 
```

SQL 输出格式如下：

```
Website   | Build Date  | Revise Date   | Launch Date
= = = = = = = = = =  = = = = = = = = = = = = = = = = = =
Google    | 10/30/12    | 11/15/12      | 11/30/12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:21:22.033

这被称为 a`PIVOT`但 MySQL 没有`PIVOT`函数，但您可以使用聚合函数和`CASE`语句复制它：

```
select p.project as website,
  max(case when t.task_name = 'build' then date_format(`Date Complete`, '%m/%d/%y') end) BuildDate,
  max(case when t.task_name = 'Revise' then date_format(`Date Complete`, '%m/%d/%y') end) ReviseDate,
  max(case when t.task_name = 'Launch' then date_format(`Date Complete`, '%m/%d/%y') end) LaunchDate
from project p
inner join tasks t
  on p.id = t.`Project ID`
group by p.project 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c97e4/7)

结果：

```
| WEBSITE | BUILDDATE | REVISEDATE | LAUNCHDATE |
-------------------------------------------------
|  Google |  10/30/12 |   11/15/12 |   11/30/12 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:19:55.950

您可以使用自连接轻松完成此操作：

```
SELECT DISTINCT
   p.project_id,
   p_build.date_complete As 'Build Date',
   p_revise.date_complete As 'Revise Date',
   p_launch.date_complete As 'Launch Date'
FROM Tasks p
LEFT JOIN Tasks p_revise ON p_revise.project_id = p.project_id 
  AND p_revise.task_name = 'Revise'
LEFT JOIN Tasks p_build ON p_build.project_id = p.project_id
  AND p_build.task_name = 'Build'
LEFT JOIN Tasks p_launch ON p_launch.product_id = p.project_id
  AND p_launch.task_name = 'Launch' 
```

# matlab - Matlab 中的平均值

> ID：13653895
> 
> 赞同：2
> 
> 时间：2012-11-30T22:07:37.123
> 
> 标签：matlab, octave

我有一个大数据集，730 个值都在一个列中（即 730 行）。我想将数据分成 24 个组，除了最后一组只有 10 个值（因为 730 不能被 24 整除）。

我想找到每组 24 个值的平均值，在 Matlab 中有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:09:54.360

给定一个向量`x`，例如：

```
>> x = [11 4 3 3 4 22 4 5 32 3 53 23 5 4 6 4 452 ]'; 
```

还有一些批量大小（你的例子是 24，这个玩具例子是 5）

```
>> batchSize = 5; 
```

首先预分配一个 NaN 矩阵。（这使得最后处理奇数大小的情况更容易）

```
>> preAverage = nan(batchSize,ceil(length(x)/batchSize))
preAverage =
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN 
```

然后将您的值`x`放入新矩阵中。（这是设置为使用列优先索引）

```
>> preAverage(1:length(x)) = x;
preAverage =
    11    22    53     4
     4     4    23   452
     3     5     5   NaN
     3    32     4   NaN
     4     3     6   NaN 
```

然后使用`nanmean`取平均值，忽略`NaN`数值；

```
>> batchedAvgValues = nanmean(preAverage)
batchedAvgValues =
        5         13.2         18.2          228 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:41:36.397

如果您正在寻找每 24 行的移动平均值，您应该使用过滤器：

```
y = filter(ones(24,1), 24, x) 
```

或者

```
y = filter(ones(24,1)./24, 1, x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:27:29.710

我不确定您到底要做什么。

Matlab 有一个内置的均值函数，可以取列的平均值。

您可以使用数组拼接表示法选择列的不同部分。

例如，如果您的列名为 xs：

```
mean(xs(1:24)) 
```

将获得 xs 的前 24 个值的平均值（平均值）。

# c++ - c++ mysql连接器从字符串中选择id

> ID：13653897
> 
> 赞同：0
> 
> 时间：2012-11-30T22:07:47.503
> 
> 标签：c++, mysql

我正在尝试从 IP_Address = [string] 的表中选择 ID

我将从另一个函数中获取 IP 地址

```
 std::string GetIP(){
    return IP;
    }

  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;
  sql::PreparedStatement *pstmt;

  driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1.:3306", "root", "password");
  con->setSchema("Test");
stmt = con->createStatement();
string GETI = "84.54.584.6"; // will be GetIP()
res = stmt->executeQuery("SELECT ID FROM IPs Where IP_Address = '"+ GETI +"'");
while (res->next()) {
cout << "id = " << res->getInt(1); 
}
delete res;
delete stmt;
delete con; 
```

我在 Visual Studio 的错误列表中没有收到任何错误

但是当我运行应用程序时它不显示值并且应用程序崩溃

当我尝试

```
res = stmt->executeQuery("SELECT ID FROM IPs Where IP_Address = '84.54.584.6'"); 
```

我让它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:44:57.330

```
res = stmt->executeQuery(std::string("SELECT ID FROM IPs Where IP_Address = '"+ GETI +'\'').c_str()); 
```

# javascript - QUnit asyncTest 有什么区别？

> ID：13653902
> 
> 赞同：2
> 
> 时间：2012-11-30T22:08:29.043
> 
> 标签：javascript, jquery, qunit

假设我有以下没有 asyncTest 的代码

```
setTimeout(function(){
  test ("test1", function(){
    ok(true, "test1 works");
  }); 
}, 2000); 
```

而且，这段代码带有 asynTest

```
asyncTest ("test1", function(){
  setTimeout(function(){
    ok(true, "test1 works");
    start();
  }, 2000);
}); 
```

我的问题是这两个有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:18:52.757

取自 qUnit[**文档**](http://docs.jquery.com/QUnit/asyncTest)：

> 添加的异步测试会排队并一个接一个地运行。相当于调用一个普通的 test() 并立即调用 stop()。

而[**setTimeout**](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

> 在指定延迟后调用函数或执行代码片段。

不同之处在于 seTimeout 与 qUnit 无关，只是在指定的时间后执行指定的代码片段，而 qUnit`asyncTest`不会在指定的时间后执行，而是放置在最终从中获取的队列中并执行。

我也不认为你真的在比较同类。

# c# - 如何将新项目添加到现有的已项目并从新项目创建 dll 文件？

> ID：13653912
> 
> 赞同：-2
> 
> 时间：2012-11-30T22:09:29.717
> 
> 标签：c#

我已经在新项目中向我的项目中添加了一个新项目我刚刚创建了一个新类并将代码复制到新类中，这是我想在另一个项目中使用的代码。新项目也是一个 Windows 窗体类型。

我想要的是从新项目类创建一个 dll，这样我以后可以在另一个项目中使用 dll 来使用我刚刚添加的新项目中的 dll 中的类。

所以在新添加的项目中，我在项目属性>应用程序>输出类型>类库中进行了更改但是现在当我尝试添加新项目类的引用时，我在bin下的新项目中找不到任何dll文件>调试目录。

我再次有一个项目，我在它的解决方案中添加了一个新项目。新项目也是一个没有任何代码的 windows 窗体类型，但只有一个添加的类，我在那里添加了一些代码。我想要做的是创建一个新项目的 dll，以便以后可以在主项目中使用该类。

但是为什么它没有创建任何dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:18:50.553

简短的回答是，也许你还没有编译它？

但是，有一个更好的答案。如果我理解正确，你有这个：

```
Solution 1
  -- Windows Forms Project A
  -- Windows Forms Project B 
```

并且有代码`Windows Forms Project B`需要由`Windows Forms Project A`. 您在这里朝着正确的方向迈出了一步：

> 所以在新添加的项目中，我在项目属性>应用程序>输出类型>类库中进行了更改

不过，您可能需要采取额外的步骤来清理它。因为现在您`Class Library Project B`仍在引用它不需要的 Windows 窗体库。事实上，它非常不*应该*引用 Windows 窗体库或任何其他 UI 库。为了便于移植，类库应该完全独立于 UI。（作为提示，如果您发现自己需要从可移植类库中引用 UI 库，那么您可能在某处犯了错误，应该重新考虑逻辑属于何处。）

所以，对于初学者来说，创建一个全新的类库项目，这样你就有了：

```
Solution 1
  -- Windows Forms Project A
  -- Class Library Project B 
```

接下来，您需要`Project A`参考`Project B`. 您试图通过引用输出 DLL 来执行此操作，但这不是正确的方法，除非您有*充分*的理由这样做。相反，由于它们在同一个解决方案中，您可以使用[Project Reference](http://msdn.microsoft.com/en-us/library/ez524kew.aspx)。

如果您使用的是 Visual Studio，请右键单击`Project A`并选择`Add Reference`. 根据 Visual Studio 的版本，布局会有所不同。但是您要添加的是对解决方案中另一个项目的项目引用。选择`Project B`，一切就绪。

此时，您无需担心`Project B`独立编译。它只是一个由`Project A`. 编译时，默认情况下会在编译输出中显示`Project A`一个 DLL 。`Project B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:15:06.117

**编辑：**如果您没有找到 DLL，可能是因为它尚未构建。此外，当 2 个项目在同一个解决方案中时显式添加 DLL 可能不是您想要做的。

**继续我原来的帖子：** 不是浏览 DLL，而是单击“添加引用”对话框上的“项目”选项卡，它将从那里添加引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:15:53.470

当您将新项目添加到您的解决方案时，您需要指定一个类库，而不是一个 Windows 窗体应用程序。完成后，您将能够添加对您的第一个项目的引用，并且第二个项目（库）应该是其中一个选项卡中的一个选项（可能是“项目”或“解决方案”，具体取决于您的版本）。在您实际构建类库项目之前，该 DLL 不会显示。

# android-pay - Google Wallet XML API 通知乱序到达

> ID：13653916
> 
> 赞同：0
> 
> 时间：2012-11-30T22:09:50.330
> 
> 标签：android-pay

我正在使用 Notification XML API，而 Google 似乎没有按照我期望的顺序发送通知。例如，`order-state-change`通知将在紧接其之前已将其设置为 之后有一个`new-financial-order-state`of 。`CHARGING``CHARGED`

但是，似乎 IPN`serial-number`单调增加，所以也许我可以使用它们来忽略无序到达的通知？我没有看到任何关于这是否是面向未来的文件的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:55:53.040

唯一保证按顺序到达的结帐通知是最先到达的新订单通知。

虽然通常通知不会乱序到达，但它们偶尔会出现乱序。

对于订单状态通知，您的解决方案对我来说听起来不错，将订单状态设置为具有最高序列号的订单状态通知。

# java - 在上下文文件中配置 Tomcat 7 JDNI 数据源的问题

> ID：13653918
> 
> 赞同：0
> 
> 时间：2012-11-30T22:10:07.413
> 
> 标签：java, spring, datasource, tomcat7, jndi

这是我得到的例外：

`Error creating bean with name 'jndiDataSource' defined in class path resource [spring/database.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name [connection_pool] is not bound in this Context. Unable to find [connection_pool]`

这是我的数据源 bean：

```
<bean id="jndiDataSource"
      class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="connection_pool" />
</bean> 
```

`MyApp##1.0.2.xml`这是我放入的上下文文件`tomcat7/conf/Catalina/localhost`：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="path\to\war\my-app-1.0.2.war"
    antiResourceLocking="false" privileged="true" >

<Resource name="connection_pool" 
            url="jdbc:mysql://localhost:3306/db_name"
            driverClassName="com.mysql.jdbc.Driver"
            username="username" password="password" 
            auth="Container" type="javax.sql.DataSource"
            maxActive="100" maxIdle="30" maxWait="10000" />

</Context> 
```

有没有人知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:31:13.890

试试这个，它应该提供正确的配置：

```
<jee:jndi-lookup id="myDataSource" jndi-name="java:connection_pool" /> 
```

# excel - Excel 错误 400 与 ActiveCell.EntireRow.Insert

> ID：13653922
> 
> 赞同：0
> 
> 时间：2012-11-30T22:10:16.757
> 
> 标签：excel, vba

我在 excel 中使用一个简单的 Visual Basic 脚本遇到了模糊的“400”错误。我注释掉了所有内容，只在我的方法中留下了一行： **ActiveCell.EntireRow.Insert**

这里是“完整”（剥离）方法（键绑定到 ctrl+shift+n）：

```
Sub NewUserStory()
'
' NewUserStory Macro
' Creates a new empty user story with pasted formulas for remaining work, and cumulative planning information 
'
' Keyboard Shortcut: Ctrl+Shift+N
'
ActiveCell.EntireRow.Insert ' Insert a new row above selected row

End Sub 
```

如果我选择了任何单元格并按下宏，调试器将在我的断点处停止。当我进入该方法时，我立即收到错误“400”的弹出窗口。我 100% 确定没有其他方法被执行。

在过去的 2 个小时里，我一直在用谷歌搜索这个，但没有解决这个问题。抱歉这个蹩脚的问题，但我的工作需要血腥宏:)。

提前谢谢了！

PS：如果有人可以提供 ActiveCell.EntireRow.Insert 的替代方案，我当然也全神贯注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:52:23.057

可能您在尝试插入该行的工作表的最后一行中有内容？

那会导致错误。

# iphone - iOS 6 多个 UIWebViews：Javascript 仅在一个中运行

> ID：13653926
> 
> 赞同：7
> 
> 时间：2012-11-30T22:10:54.730
> 
> 标签：iphone, ios, ipad, ios6

iOS 6 iPad 应用程序在两个 UIWebView 中显示内容。如果两个 web 视图都包含一个 jquery 图像旋转器，那么一次只有一个可以工作。运行 < iOS 6，两者都能正常工作。

如果非动画 webview 的内容被重新加载，它开始工作，而另一个停止。此外，仅在模拟器中，我有时可以通过单击/拖动来启动已停止的 Web 视图（而另一个停止）。

如果其中一个 Web 视图中没有 javascript，则重新加载已停止的 Web 视图不会停止另一个的功能。

我的第一个想法是这是一个焦点问题，但最后一点似乎反驳了这一点，并指出两个网络视图之间存在某种污染。两个旋转器具有相同的选择器和相同的 js 脚本，但是 js 文件在本地缓存，并且被唯一地重命名，以消除缓存过程中的任何踩踏。

我在 iOS 6 发行说明中找不到任何内容来描述不同 UIWebView 之间焦点的变化。

Web 视图位于 XIB 中，但不是同一个父 UIView 的兄弟。

显然，期望的行为是不让任何一个 web 视图进入睡眠状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T13:05:47.137

您是否尝试过使一个 WebView 的大小与您的 3 个 WebView 一样大，并在该 1 个 UIWebView 中使用 3 个 iFrame 来加载每个启用了 javascript 的页面？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T11:19:28.230

JavaScript 在多个 UIWebViews 中工作，但它依赖于 JavaScript。如果您将其与 href 链接，则使用 JQuery 或其他外部 JavaScript 代码可能会出现问题。您可以通过将所有外部 JavaScript 库的代码复制到您的网页 HTML 中来解决这些问题。这就是为什么简单的 JavaScript 可以正常工作的原因。例子：

![多个 Web 视图中的 JavaScript 屏幕截图](../Images/1c1a8d15cbca309d7508332439154e4b.png)

这是一个 UITableView，每个 UITableViewCell 中都有一个 UIWebView。在 webViewDidFinishLoad 我做`[webView stringByEvaluatingJavaScriptFromString:@"document.write('hey hallo'+new Date().getTime())"];`

# winforms - 恢复后未绘制 MDI 标题栏（有时）

> ID：13653927
> 
> 赞同：0
> 
> 时间：2012-11-30T22:11:01.740
> 
> 标签：winforms, mdi

我对 WinForms MDI 有一个非常令人沮丧的问题，希望有人可以帮助我。

假设我有两种形式，FormA 和 FormB。我将两者都作为子项添加到我的 MDI，然后最大化 FormA。然后我使用主 MDI 上的 Windows 菜单切换到 FormB（然后最大化）。

现在是（有趣的？）部分：我使用 MDI 标题栏恢复 FormB，使两个表单都恢复到原来的大小。发生这种情况时（并非总是如此，但大多数情况下）会导致 FormA 失去其标题栏和边框。

这是生成的 FormA 的图片： [http://imgur.com/VVTVJ](http://imgur.com/VVTVJ) 只有当我使用 MDI Windows 菜单中的任何一个选项（平铺、层叠等）时，标题栏才会恢复。

为什么会发生这种情况，我可以做些什么来确保 MDI 在恢复窗口后返回子标题栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T20:36:20.870

已经有一段时间了，但我发现了问题。我在 MDI 中对窗体使用窗口捕捉，它干扰了初始化。我修改了代码，一切都很好。

# jquery - Twitter Bootstrap Scrollspy 激活触发器

> ID：13653930
> 
> 赞同：1
> 
> 时间：2012-11-30T22:11:11.420
> 
> 标签：jquery

我已经看到问题被问了一百万次，但我似乎无法找到解决问题的方法。

我目前正在尝试在“激活”部分时执行功能。我希望我的措辞正确。Scrollspy 可以正常工作，但我无法使用它触发任何东西：

```
$('.ul.nav li').on('activate', function()
  {
   //do something
}); 
```

在测试我是否能得到回应时，我试图触发警报，但我得到了 zilch。“激活”绑定到什么元素？菜单元素？部门ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:16:39.080

你在这里有两个问题：

1.  你的事件不正确，你需要`focus`我猜
2.  尝试开启事件委托`on`

您的代码应如下所示：

```
$(document).on("focus", ".ul.nav li", function(event){
   //do something
}); 
```

# .net - .NET 3.5 中数据访问层的定义

> ID：13653932
> 
> 赞同：0
> 
> 时间：2012-11-30T22:11:16.637
> 
> 标签：.net, sql-server-2005, orm, .net-3.5, data-access-layer

我的网络项目中有其他人编写的以下代码：

```
 StringBuilder sql = new StringBuilder("");

    // Define sql
    sql.Append("SELECT title ");
    sql.Append("FROM MyTable ");
    sql.Append(string.Format("WHERE id = {0} AND Var = '{1}'", myId, myVar));

    DataTable dtGroups = SqlHelper.GetDataTable(sql.ToString());

    if (dtGroups.Rows.Count > 0)
    {

        foreach (DataRow dr in dtGroups.Rows)
        {
            return dr["title"].ToString();
        }
    }

    return ""; 
```

然后我有一个名为 SqlHelper.cs 的助手类，它有这个方法：

```
 public static DataTable GetDataTable(string sql) {
        return GetDataTable(sql, MyConnectionString);
    } 
```

SqlHelper 类是否构成 DAL？做事的正确方法是什么？我是否应该创建一个 DAL 类，您将把 sql 发送到并只获取返回的标题（如 SqlHelper.GetTitle(sql)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:06:39.773

那个代码很*糟糕*。SQL注入；无缘无故的DataTable；StringBuilder 无缘无故。这里很简单，使用“dapper”（在 NuGet 上免费提供）：

```
using(var conn = GetSomeConnection()) { // <== todo
    return conn.Query<string>(
        "select title from MyTable where id=@id and Var=@var",
        new { id = myId, var = myVar }).FirstOrDefault() ?? "";
} 
```

这是：

*   注射安全（完全参数化）
*   直接（没有像 DataTable 这样不必要的层）
*   优化

# c# - 停止计时器并防止已逝事件触发

> ID：13653938
> 
> 赞同：1
> 
> 时间：2012-11-30T22:11:56.460
> 
> 标签：c#, winforms, multithreading, timer

来自 MSDN：

> Timer.Elapsed 事件在 ThreadPool 线程上引发，因此事件处理方法可能在一个线程上运行，同时对 Timer.Stop 方法的调用在另一个线程上运行。这可能会导致在调用 Stop 方法后引发 Elapsed 事件。

我有一个运行特定时间的计时器，然后经过并设置一个标志。有时我想停止计时器并重新启动它。

目前，当我尝试停止计时器时，经过的事件仍然会触发（有时），所以我的标志是在我不希望它时设置的。

如何停止标志并确保已逝事件不会触发？

******编辑******

 **在事件处理程序中，我尝试在运行代码之前检查计时器的状态以确保其启用，并且我还尝试在停止计时器时设置一个标志并在运行代码之前检查该标志。

都不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:34:03.143

```
 Timer t = new Timer(4000);
        t.Elapsed += t_Elapsed;
        t.Stop();
        t.Dispose(); 
```

最后一行将删除计时器，使经过的事件不会发生。

如果调用 stop 和 dispose 时计时器已经在执行经过的函数，则执行将完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T11:32:31.017

我也多次遇到类似的问题。

```
//Timer init.
 var _timer = new System.Timers.Timer
{
    AutoReset = true, 
    Enabled = true,
    Interval = TimeSpan.FromSeconds(15).TotalMilliseconds //15 seconds interval
};
 _timer.Elapsed += DoSomethingOnTimerElapsed;

//To be called on timer elapsed.
private void DoSomethingOnTimerElapsed(object source, ElapsedEventArgs e)
{
    //Disable timer.
    _timer.Enabled = false; //or _timer.Stop()
    var markers = new Dictionary<string, ConversationItem>();
    try
    {
        //does long running process
    }
    catch (Exception ex)
    {

    }
    finally
    {
        if (_shouldEnableTimer) //set its default value to true.
            _timer.Enabled = true; //or _timer.Start()
    }
}

//somewhere in the code if you want to stop timer:
_timer.Enabled = _shouldEnableTimer = false;

//At any point, if you want to resume timer add this:
_timer.Enabled = _shouldEnableTimer = true; 
```

为什么要这样做？

让我们假设，try 块内的代码需要更多时间。因此，当您禁用 timer`(_timer.Enabled = false or _timer.Stop())`时，try 块内的代码很有可能仍在执行。因此，在finally任务完成后，如果没有flag( `_shouldEnableTimer`)检查，则再次启用。因此，我通过添加额外的标志检查来防止您的问题。

为了更清楚，请仔细阅读代码和添加的注释。希望这可以帮助。**

# java - Java Interest Calculator 无法编译，不知道为什么

> ID：13653939
> 
> 赞同：1
> 
> 时间：2012-11-30T22:12:06.263
> 
> 标签：java, if-statement, syntax-error

我正在用 Java 编写一个兴趣计算器。该程序提示用户输入，并使用该输入计算某个银行帐户（支票、储蓄或 CD）的利息。

这就是我的程序的要点，而且非常简单。但是现在我被困在为什么 return 语句在 createAccount 方法中不起作用。任何帮助，将不胜感激。

银行家.java：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Banker {

// Array for type of bank account
public static void createAndShowGUI() {

    // Declare strings for period, balance, rate
    String period;
    String balance;
    String rate;
    String type;
    String input;

    // Prompt for account type
    String[] accttype = {"Checking", "Savings", "CD"}; // Array of bank acct types
    input = (String) JOptionPane.showInputDialog(null, "Choose account...",
            "Choose bank account type", JOptionPane.QUESTION_MESSAGE, null,
            accttype, // Array of acct types
            accttype[0]); // First choice

    // Prompt user for input
    period = JOptionPane.showInputDialog(null, "Number of periods (length):");
    balance = JOptionPane.showInputDialog(null, "Beginning balance:");
    rate = JOptionPane.showInputDialog(null, "Interest rate (use decimal, example: .05 = 5%):");

    // Make Calculate button
    JButton calculate = new JButton("Calculate");

    // Make 2 Labels
    JLabel blabel = new JLabel("Period: " + period);
    JLabel plabel = new JLabel("Balance: " + balance);

    // Setup window with flow layout and exit on close
    JFrame frame = new JFrame("Interest Savings Calculator Plus");
    frame.setLayout(new FlowLayout());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Add combo box, calc button and labels
    frame.add(calculate);

    frame.add(plabel);
    frame.add(blabel);

    //Display the window.
    frame.pack();
    frame.setVisible(true);

}

public static Account createAccount(String type, String checkno, String lengthm, String input) {
    String message = "Would you like to open another account?";
    String title = "Are you sure?";
    if (input == "Checking") {
        checkno = JOptionPane.showInputDialog(null, "First check number:");

        // display the JOptionPane showConfirmDialog
        int reply = JOptionPane.showConfirmDialog(null, message, title, JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
            System.exit(0);

        }
    } else if (input == "CD") {
        lengthm = JOptionPane.showInputDialog(null, "Length until maturity:");

        // display the JOptionPane showConfirmDialog
        int reply = JOptionPane.showConfirmDialog(null, message, title,     JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
            System.exit(0);
            return input;
        }
    }
}

public static void main(String[] args) {
    createAndShowGUI();
}
} 
```

账户.java

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Account implements ActionListener {

JButton calculate;
private int period;
private int balance;
private int fbalance;
private int rate;
private int monthlyFee;
private String printstring;

@Override
public String toString() {
    return String.format("Period: " + period + ", Balance: " + balance);
}

public int getPeriod() {
    return period;
}

public void setPeriod(int period) {
    this.period = period;
}

public int getBalance() {
    return balance;
}

public void setBalance(int balance) {
    this.balance = balance;
}

public int getRate() {
    return rate;
}

public void setRate(int rate) {
    this.rate = rate;
}

public int getFbalance() {
    return fbalance;
}

public void setFbalance(int fbalance) {
    this.fbalance = fbalance;
}

public String getPrintstring() {
    return printstring;
}

public void setPrintString(String printstring) {
    this.printstring = printstring;
}

public void calculate() {
    for (int i = 0; i < period; i++) {
        fbalance = balance + balance * rate - monthlyFee;
    }

}

public void actionPerformed(ActionEvent e) {
    calculate();
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T22:13:41.793

首先， is 的返回类型，`createAccount`并且`Account`您正在`String`从中返回 a 。它会在那里失败。

因此，将您的返回类型更改为`String`. 并且还要确保您的方法始终返回一个`value`. 您应该从代码可能遵循的每条路径返回一个值。或者，您可以`return null;`在方法的末尾添加 a （但您还应该考虑前面的语句）。

但同样，很难理解为什么你要返回一个`string`, from`createAccount`方法。事实上，您根本没有在该方法中创建任何帐户。请重命名您的方法以反映其确切用途。

其次，您正在比较您的`strings`using`==`运算符，一旦您摆脱编译器错误，这会给您带来问题。您应该使用`equals`方法来比较字符串：-

```
if (input == "Checking") 
```

应该： -

```
if (input.equals("Checking")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:20:14.880

那么首先，听从 Rohit 的建议。

另一个主要问题是并非所有代码路径都返回一个值。（如果输入是“检查”会发生什么？）

其次，返回值的路径放在系统退出之后：

```
public static Account createAccount(String type, String checkno, String lengthm, String input) {
    String message = "Would you like to open another account?";
    String title = "Are you sure?";
    if (input == "Checking") {
        checkno = JOptionPane.showInputDialog(null, "First check number:");

        // display the JOptionPane showConfirmDialog
        int reply = JOptionPane.showConfirmDialog(null, message, title, JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
            System.exit(0);

        }
        // Return if input == checking not here
    } else if (input == "CD") {
        lengthm = JOptionPane.showInputDialog(null, "Length until maturity:");

        // display the JOptionPane showConfirmDialog
        int reply = JOptionPane.showConfirmDialog(null, message, title,     JOptionPane.YES_NO_OPTION);
        if (reply == JOptionPane.YES_OPTION) {
            System.exit(0);
            return input;   // never gets here
        }
    }
} 
```

你在使用 IDE 吗？还是只使用记事本？您是否注意编译器警告？始终注意警告，它们可能是潜在的运行时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:14:56.873

`return`此外，当 Account 的一个分支内未创建帐户时，您还必须添加子句`if-else`。

# sql - 循环遍历 DB2 中的定界字符串

> ID：13653940
> 
> 赞同：1
> 
> 时间：2012-11-30T22:12:26.560
> 
> 标签：sql, loops, db2

我有一个带分隔符的字符串，例如：00,45,50,66,84,99。该字符串作为 IN 参数传递给 DB2 存储过程。在这个过程中，我想遍历这个字符串并将每个值插入到一个临时表中。我对 DB2 循环语法的了解很差，我为此苦苦挣扎了一段时间。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:40:49.703

有时我会使用 XQuery 中的高级功能。你可以使用类似的东西

```
SELECT    XMLQuery('$PORDER/PurchaseOrder/item/name'  PASSING porder AS "PORDER") 
FROM purchaseorder 
```

并将复杂的 XQuery 表达式放在引号之间。

然后，您可以将其包装在 XMLCAST 中以将其转换回 SQL 数据类型。我最近这样做是为了将长十六进制字符串转换为二进制，因为 XQuery 有一个功能。

```
 SELECT XMLCAST(XMLQuery( ....) AS VARCHAR(100)) ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:26:29.427

您可以定义一个递归 SP，它接受 IN varchar，处理第一个元素，并对其余元素进行递归调用。

```
CREATE OR REPLACE PROCEDURE REC (
 IN STRING VARCHAR(256)
)
P_REC: BEGIN
 DECLARE INDEX SMALLINT;
 DECLARE PRE VARCHAR(256);
 DECLARE POS VARCHAR(256);
 DECLARE STMT STATEMENT;
 PREPARE STMT FROM 'CALL REC(?)';

 SET INDEX = POSSTR (STRING, ',');
 IF (INDEX <> 0) THEN
  SET PRE = SUBSTR(STRING, 1, INDEX - 1);
  INSERT INTO table
    VALUES (PRE);
  -- Recursive call
  SET POS = SUBSTR(STRING, INDEX + 1);
  EXECUTE STMT USING POS;
 ELSE
  INSERT INTO table
    VALUES (STRING);
 END IF;
END P_REC @ 
```

要使其在 db2clp 中工作：

```
db2 create table table (string varchar(256))
db2 -td@
 <Copy, paste> in the interactive mode + quit
db2 call rec ('00,45,50,66,84,99')
db2 select * from table 
```

# javascript - Web2py 中的 Javascript 轮询

> ID：13653941
> 
> 赞同：1
> 
> 时间：2012-11-30T22:12:32.303
> 
> 标签：javascript, jquery, ajax, web2py

我将此代码放入我的主视图文件中：

```
 <html>
            <head>
           <script src="/app/static/js/jquery.js" type="text/javascript">
            <script type="text/javascript">
                jQuery(document).ready(function() {
                    window.setTimeout(function() {
                        var url = '{{=URL('monitor.load')}}';
                        jQuery('#monitor').load(url);
                    }, 10000);
                });
            </script>
            </head>

            <body>
                <div id="monitor"></div>
            </body>
        </html> 
```

为了在 #monitor div 标签中显示来自 monitor.load 文件的数据：

```
{{=data}} 
```

但是，它只在 10 秒后放置一次数据，然后它不会像我想要的那样每 10 秒更新一次数据......
如果数据在控制器中更改，或者在 monitor.load 文件中更改，则没有任何反应。 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:14:31.397

`setInterval()`如果您希望代码多次出现，则应改为使用。

**例子：**

```
setInterval("alert('hello!');", 500); 
```

上面的代码`alert('hello!');`将从页面加载到关闭之间每 500 毫秒执行一次代码。

# actionscript-3 - Flex 中的绝对布局和相对布局

> ID：13653942
> 
> 赞同：0
> 
> 时间：2012-11-30T22:12:32.733
> 
> 标签：actionscript-3, apache-flex, layout

这是一个简单的布局问题，我不知道如何回答。

我有一个`HGroup`由三个元素组成的：

1.  `Group`应拉伸 50% 的常规 Flex ；
2.  宽度以 px 为单位指定的按钮（例如，100px）；
3.  `Group`另一个应该占用其余空间的Flex 。

问题是，告诉我的第三个元素（另一个 Flex `Group`）占用所有可用空间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:43:51.607

这是我为保持 50% 的完整性而要做的事情

```
<s:HGroup width="100%">
    <s:Group width="50%" />
    <s:HGroup width="50%">
        <s:Button width="100"/>
        <s:Group width="100%" />
     </s:HGroup>
</s:HGroup> 
```

编辑：多一点解释

将组宽度设置为 100% 将使其伸展并占据剩余的空间（在右侧的 50% 内）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:53:01.323

您可以这样做，但 Jason Reeves 的答案要好得多，而且不太可能失败。这种方法唯一真正的优点是 H/VGroup 较少，这在渲染时不是那么友好（如果舞台上有很多 H/VGroup，它们使用的布局可能会导致速度变慢，或者它们有很多孩子。 ）无论如何，我会使用另一种方法而不是这个方法。

```
<s:HGroup id="rectContainer" width="100%" height="100%" gap="0">
    <s:Rect id="rect1" width="50%" height="100%"/>
    <s:Rect id="rect2" width="100" height="100%"/>
    <s:Rect id="rect3" width="{this.rectContainer.width - ( .5 * this.rectContainer.width ) - rect2.width}" height="100%"/>
</s:HGroup> 
```

# java - 将 Java 连接到 PHP 以进行多人游戏

> ID：13653945
> 
> 赞同：2
> 
> 时间：2012-11-30T22:12:53.443
> 
> 标签：java, php, networking

我想用java制作一个游戏（真的，我想在xna中做，但首先我想做一个仍在学习xna的原型），我想到了将它与php连接以实现多人游戏功能。

我想做的是在php上创建服务器端（并使用主机或我的大学服务器）不需要真正“快速”的东西（我已经计划了所有游戏，基于回合，并完成了部分编码)

我的想法是，

php 正在运行游戏流程，服务器将连接到两个玩家，两个玩家也将连接。当玩家1做出动作时，将其发送到服务器，并向玩家2发送信号，然后，玩家2询问服务器玩家1做了什么（所有这些都是为了安全问题）

我的问题是，我在想 make java connect php 就好像它是一个网页一样，但我认为等待 http 响应可能真的很慢，有人有一些提示，我可以用另一种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:22:28.130

也许 PHP 在这里不是正确的选择。我不是这种或那种语言的狂热者，我通常说一切都可以用你精通的任何语言来完成。但是 PHP 有一个问题，那就是该语言不是为通用目的而设计的，而是专门为预处理要在 HTTP 响应中提供的文档。

这使得诸如多线程、长时间运行的脚本等事情，对于常见的设置和库来说几乎是不可能的。我们无法提供更多信息，因为您没有分享有关您实际想要连接的内容的足够信息*，*但是如果您可以使用 Java，那么对于客户端和服务器来说肯定会更好（顺便说一下，您也可以节省通过在双方重用相同的库来某种类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:27:14.483

我建议使用[COMET](http://en.wikipedia.org/wiki/Comet_%28programming%29)模型，这样你就不会遇到延迟问题，因为连接已经建立并且正在等待信息进入。

这将是一个长轮询解决方案。

# php - PHP 显示的文件夹中的文件自动输入到 php/html 播放列表中

> ID：13653947
> 
> 赞同：0
> 
> 时间：2012-11-30T22:13:05.337
> 
> 标签：php, html, mp3, playlist

我有一个看起来很简单的问题。我想让我的播放列表自动填充文件夹中的文件。因此，当 mp3 添加到文件夹中时，文件会在播放列表中生成。我可以显示文件夹中的所有文件，并使用以下命令在自己的行上输出文件名：

```
<?php
$dir = "app/vd/$val/";
$files = scandir($dir);
foreach ($files as &$file) {
    if ($file!='.' && $file!='..' )
    {
        echo $file.'<br>';
    }
}
?> 
```

我使用以下方法手动将文件添加到播放列表：

```
<ul id="playlist" style="margin-left:auto; margin-right:auto;">
<li mp3="app/vd/<?php echo $val ?>/whatever.mp3" ogg="app/vd/<?php echo $val ?>/whatever.ogg" artist="<?php echo $val ?>" title="<?php echo $val1 ?>" ></li>

<li mp3="app/vd/<?php echo $val ?>/whatever2.mp3" ogg="app/vd/<?php echo $val ?>/whatever2.ogg" artist="<?php echo $val ?>" title="<?php echo $val1 ?>" ></li> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:35:10.213

把它放在 ul 标签之间...

```
<ul id="playlist" style="margin-left:auto; margin-right:auto;">
    <?php
    $dir = "app/vd/$val/";
    $files = scandir( $dir );
    foreach ( $files as $file )
        if ( $file != '.' && $file != '..' )
            echo '<li mp3="app/vd/', $val, '/', $file,'" ogg="app/vd/', $val, '/', $file, '" artist="', $val, '" title="', $val1, '" ></li>';
    ?>
</ul> 
```

或者让它看起来更好看

```
<?php $files = scandir( "app/vd/$val/" ); ?>
<ul id="playlist" style="margin-left:auto; margin-right:auto;">  
    <?php foreach ( $files as $file )
        if ( $file != '.' && $file != '..' )
            echo "<li mp3=\"app/vd/$val/$file\" ogg=\"app/vd/$val/$file\" artist=\"$val\" title=\"$val1\" ></li>"; ?>
</ul> 
```

PS：glob 是一个简洁的小函数[http://de3.php.net/manual/en/function.glob.php](http://de3.php.net/manual/en/function.glob.php) PPS：目录上的迭代器也很简洁

# python - Pearson 相关系数 2 尾 p 值含义

> ID：13653951
> 
> 赞同：18
> 
> 时间：2012-11-30T22:13:22.723
> 
> 标签：python, math, numpy, statistics, scipy

从我使用的 sciPy 库中：scipy.stats.stats import pearsonr 来计算两个数组的相关系数，我得到的值是：(0.80751532276005755, 0.19248467723994242)。

我以为我只会在 -1 到 +1 的范围内得到一个值，所以我不确定如何解释这两个结果。这是我的两个数组：

```
x = [50,500,1500,2500]
y = [17, 6, 6, 194] 
```

我做到了：

```
pearsonr(x,y) 
```

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-30T22:57:55.947

`pearsonr()`返回一个由相关系数和相应的 p 值组成的二元组：

*   相关系数的范围可以从 -1 到 +1。
*   零假设是两个变量不相关。p 值是一个介于 0 和 1 之间的数字，表示如果原假设为真，您的数据出现的概率。

如需进一步讨论，请参阅[http://www.eecs.qmul.ac.uk/~norman/blog_articles/p_values.pdf](http://www.eecs.qmul.ac.uk/~norman/blog_articles/p_values.pdf)

> 我以为我只会在 -1 到 +1 的范围内得到一个值

如果您只需要相关系数，只需忽略元组的第二个元素（p 值）：

```
corrxy = pearsonr(x,y)[0] 
```

值得一提的是，还有[`numpy.corrcoef()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.corrcoef.html)，它计算相关矩阵（没有 p 值）。

# android - ListView 显示在平板电脑上，但不在手机上

> ID：13653959
> 
> 赞同：0
> 
> 时间：2012-11-30T22:13:48.377
> 
> 标签：android, android-listview, android-activity, android-listfragment

我的列表视图项目没有出现在我的手机上，但它们出现在平板电脑上。我只对已经给出的主/详细流程进行了修改。但是，在我将项目添加到列表后，它不会显示在手机上。为什么会这样，我该如何解决？任何帮助深表感谢。这是我的列表活动。

```
package com.example.sample;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.widget.Toast;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

/**
 * An activity representing a list of Courses. This activity has different
 * presentations for handset and tablet-size devices. On handsets, the activity
 * presents a list of items, which when touched, lead to a
 * {@link CourseDetailActivity} representing item details. On tablets, the
 * activity presents the list of items and item details side-by-side using two
 * vertical panes.
 * <p>
 * The activity makes heavy use of fragments. The list of items is a
 * {@link CourseListFragment} and the item details (if present) is a
 * {@link CourseDetailFragment}.
 * <p>
 * This activity also implements the required
 * {@link CourseListFragment.Callbacks} interface to listen for item selections.
 */
public class CourseListActivity extends SherlockFragmentActivity implements
    CourseListFragment.Callbacks {

CourseListFragment listFrag;

public static String courseName;
private static final int REQUEST_CODE = 10;

/**
 * Whether or not the activity is in two-pane mode, i.e. running on a tablet
 * device.
 */
private boolean mTwoPane;
private boolean once = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_course_list);

    if (findViewById(R.id.course_detail_container) != null) {
        // The detail container view will be present only in the
        // large-screen layouts (res/values-large and
        // res/values-sw600dp). If this view is present, then the
        // activity should be in two-pane mode.
        mTwoPane = true;

        // In two-pane mode, list items should be given the
        // 'activated' state when touched.
        listFrag = ((CourseListFragment) getSupportFragmentManager()
                .findFragmentById(R.id.course_list));
        listFrag.setActivateOnItemClick(true);
    }

    // TODO: If exposing deep links into your app, handle intents here.
}

/**
 * Callback method from {@link CourseListFragment.Callbacks} indicating that
 * the item with the given ID was selected.
 */

public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    boolean bool;
    switch (item.getItemId()) {
    case R.id.add_course:
        Intent intent = new Intent(this, CourseAddActivity.class);
        startActivityForResult(intent, REQUEST_CODE);
        bool = true;
    default:
        bool = super.onOptionsItemSelected(item);
    }
    return bool;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == REQUEST_CODE) {
        if (data.hasExtra("courseName")) {
            courseName = data.getExtras().getString("courseName");
            if (mTwoPane) {
                if (!courseName.equals("")) {
                    listFrag.addCourse(courseName);
                }
            }
        }
    }
}

@Override
public void onItemSelected(String id) {
    if (mTwoPane) {
        // In two-pane mode, show the detail view in this activity by
        // adding or replacing the detail fragment using a
        // fragment transaction.
        if (once) {
            ActionBar actionBar = getSupportActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
            // initiating both tabs and set text to it.
            ActionBar.Tab assignTab = actionBar.newTab().setText(
                    "Assignments");
            ActionBar.Tab schedTab = actionBar.newTab().setText("Schedule");
            ActionBar.Tab contactTab = actionBar.newTab()
                    .setText("Contact");

            // Create three fragments to display content
            Fragment assignFragment = new Assignments();
            Fragment schedFragment = new Schedule();
            Fragment contactFragment = new Contact();

            assignTab.setTabListener(new MyTabsListener(assignFragment));
            schedTab.setTabListener(new MyTabsListener(schedFragment));
            contactTab.setTabListener(new MyTabsListener(contactFragment));

            actionBar.addTab(assignTab);
            actionBar.addTab(schedTab);
            actionBar.addTab(contactTab);
            once = false;
        }
    } else {
        // In single-pane mode, simply start the detail activity
        // for the selected item ID.
        Intent detailIntent = new Intent(this, CourseDetailActivity.class);
        startActivity(detailIntent);
    }

}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.course_detail_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }
}
} 
```

这是我的列表片段。

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(),
            layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}
public void addCourse(String courseName) {
    courseItems.add(courseName);
    adapter.notifyDataSetChanged();
}
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

谢谢你！

**编辑**

这是我的 activity_course_list.xml

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/course_list"
android:name="com.example.sample.CourseListFragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="16dp"
android:layout_marginRight="16dp"
tools:context=".CourseListActivity"
tools:layout="@android:layout/list_content" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:23:59.697

在你的 onActivityResult

```
 if (mTwoPane) {
                if (!courseName.equals("")) {
                    listFrag.addCourse(courseName);
                }
            } 
```

看起来只有在 twoPane 模式下才将结果添加到列表中：

# django - 如何将 Django-Timeline 连接到 Redis 后端？

> ID：13653961
> 
> 赞同：1
> 
> 时间：2012-11-30T22:13:56.377
> 
> 标签：django, redis, feed

目前我正在关注这个名为 Django-Timeline 的 GitHub 项目来构建活动源：[https ://github.com/tiltshift/django-timeline](https://github.com/tiltshift/django-timeline)

我的问题是如何将 Django-Timeline 连接到像 Redis 这样的后端？我已将“时间线”添加到已安装的应用程序部分。我是否需要更改我的 settings.py 中的任何其他内容才能连接它，还是它会自动连接到 Redis？

请注意，我的 Django 应用程序和 Redis 是同一台 Amazon EC2 机器。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:39:14.467

您之前是否尝试过将 Django 用于典型的关系数据库？如果没有，您可能想先尝试一下，因为 Django 不支持内置使用 Redis 或任何其他非关系数据库作为后端。您可以使用带有[Redis 后端的](https://github.com/MirkoRossini/django-redis-engine)[django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)等附加应用程序来获得该支持。

# authentication - 在 IIS 后面使用 Tomcat 进行基本身份验证

> ID：13653963
> 
> 赞同：1
> 
> 时间：2012-11-30T22:14:37.720
> 
> 标签：authentication, iis, tomcat, basic-authentication

我在 Windows Server 2008R2 机器上的 IIS 后面运行 Tomcat。如果我直接连接到 Tomcat，我的基本身份验证（用于 API 调用）正在工作。但是，一旦我通过 IIS 连接，基本身份验证信息就会丢失，并且请求会以 403 响应。

提前致谢，

雷托

# c# - 使用 nLog 和 Common.Logging 在 XAML 设计模式中出错

> ID：13653969
> 
> 赞同：0
> 
> 时间：2012-11-30T22:15:06.623
> 
> 标签：c#, visual-studio-2012, nlog, common.logging

我收到以下错误：

```
---------------------------
Microsoft Visual Studio
---------------------------
Could not load the assembly Common.Logging.NLog because the following errors occurred:

Could not load type 'NLog.TargetWithLayout' from assembly 'NLog, Version=2.0.0.0, Culture=neutral, PublicKeyToken=5120e14c03d0593c'.
---------------------------
OK   
--------------------------- 
```

当我尝试使用`DataContext`编辑器/选择器时，任何 Window/Usercontrol 属性。我从 NuGet 拉下两个程序集

NLog 配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      throwExceptions="false">

    <!-- 
  See http://nlog-project.org/wiki/Configuration_file 
  for information on customizing logging rules and outputs.
   -->
    <variable name="appName" value="APPLICATION" />
    <targets async="true">
        <target xsi:type="File"
                name="default"
                fileName="${specialfolder:ApplicationData}/APPLICATION/logs/${shortdate}.log"
                layout="${longdate} | ${uppercase:${level}} | ${message}${onexception:${newline}EXCEPTION\: ${exception:format=ToString}}"
                keepFileOpen="false"  />
        <target xsi:type="File"
                name="debug"
                fileName="${specialfolder:ApplicationData}/APPLICATION/logs/${shortdate}_debug.log"
                layout="${longdate} | ${uppercase:${level}} | ${message}${onexception:${newline}EXCEPTION\: ${exception:format=ToString}}"
                keepFileOpen="false"  />
        <target xsi:type="EventLog"
                name="eventlog"
                source="${appName}"
                layout="${message}${newline}${exception:format=ToString}" />
    </targets>

    <rules>
        <logger name="*" writeTo="default" minlevel="Info" />
        <logger name="*" writeTo="debug" minlevel="Trace" maxlevel="Debug" />
        <logger name="*" writeTo="eventlog" minlevel="Error" />
    </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:57:57.487

我遇到了同样的问题，我通过在有视图/设计器问题的模块中引用 Common.Logging 来修复它。看起来我在命名空间定义中引用的东西依赖于 Common.Logging 可用于该项目。即我的模块依赖于另一个使用通用的自定义类库。

这个问题出现的奇怪方式，以及设计师的无用错误，但添加引用修复了它。

# android - 修改/检测其字节码后如何重建apk？

> ID：13653978
> 
> 赞同：1
> 
> 时间：2012-11-30T22:15:47.237
> 
> 标签：android, build, apk

作为我研究的一部分，我需要检测任何给定 .apk 文件的 dalvik 字节码，并使用检测过的字节码获得工作的、修改过的 .apk。

我在 Windows 7 下使用 Java 1.6 编程。

**输入**

*   原始的 .apk 文件，带有原始的、未更改的`classes.dex`dalvik 字节码。
*   .apk的检测`classes.dex`字节码（是的，我们假设我们已经检测了字节码）。

**期望的输出**

*   带有检测字节码的 .apk 文件，`classes.dex`而不是原始文件。

**问题陈述**

从 Java 源代码获取所需输出的最直接方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T22:15:47.237

# 2016 年 4 月 12 日更新

关于原始答案的第2步：

当前版本的来源`ApkBuilder`可以[在官方 repo](https://android.googlesource.com/platform/tools/base/+/android-6.0.1_r31/sdklib/src/main/java/com/android/sdklib/build/ApkBuilder.java)中找到，解释为什么应该使用它的评论也可以[在官方 repo](https://android.googlesource.com/platform/tools/base/+/android-6.0.1_r31/sdklib/src/main/java/com/android/sdklib/build/ApkBuilderMain.java#181)中找到。

在您本地的 Android SDK 安装中，这些类似乎存在于`android-sdk/tools/lib/sdklib.jar`

* * *

# 原始答案 2012 年 11 月 30 日

## 第一步：删除原来的classes.dex

要首先使用自定义文件重建 .apk，`classes.dex`我们需要从中删除原始`classes.dex`文件。这可以使用[Android SDK](http://developer.android.com/sdk/index.html)`aapt.exe`安装目录中的工具轻松完成，例如位于此处：`c:\Program Files (x86)\Android\android-sdk\platform-tools\aapt.exe`

命令：

```
aapt.exe remove <path-to-the-apk> classes.dex 
```

将删除该文件。

## 第 2 步：重建 .apk

`(...)\android-sdk\tools\apkbuilder.bat`由于脚本已被弃用，因此构建 .apks 存在很多困惑。有关详细信息，请参阅[此讨论](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/sls2uFYWuWE)。

在幕后脚本调用`ApkBuilderMain`调用非弃用`ApkBuilder`。

基于不再可用的非官方资源，我想出了以下代码片段：

```
 /**
   * Builds the {@code sourceApk} with bytecode merged from {@code classesDex}. The built .apk file has the same
   * name as {@code sourceApk} and is put in {@code outputDir}.<br/>
   * <br/>
   * <b>Precondition:</b> The {@code sourceApk} doesn't contain {@code classes.dex}, so the {@code classesDex} can be
   * merged into it.
   */  
  private static File buildApk(File sourceApk, File classesDex, File outputDir) throws Exception
  {

    File outputApk;
    try {
      outputApk = new File(outputDir, sourceApk.getName());
      ApkBuilder builder = new ApkBuilder(outputApk, sourceApk, classesDex, ApkBuilder.getDebugKeystore(), null);
      builder.sealApk();
    } catch (ApkCreationException e) {
      throw new Exception(e);
    } catch (SealedApkException e) {
      throw new Exception(e);
    }

    return outputApk;
  } 
```

# unix - 超出文件末尾的 mmap

> ID：13653979
> 
> 赞同：6
> 
> 时间：2012-11-30T22:15:49.053
> 
> 标签：unix, file-io, mmap

我已经使用 mmap() 将文件映射到内存中，并且我需要写到文件末尾之外。我找不到任何确凿的文件证据证明在这种情况下发生了什么。[该文档](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2Fmmap.htm)说超出 EOF 的访问是未定义的。有没有正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:28:13.280

取消映射文件，通过任何常规方式扩展它（fseek to end + fwrite）并再次对其进行映射。这应该很快；分页的文件的任何部分都将保持分页。

您还可以在*映射文件时对其进行*扩展，然后对其进行[mremap](http://www.kernel.org/doc/man-pages/online/pages/man2/mremap.2.html)。这应该可以正常工作，因为您没有更改任何映射页面。其效果可能取决于操作系统。

[Linux mmap 手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)：

> 未指定更改与文件的添加或删除区域相对应的页面上映射的基础文件大小的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T22:20:58.213

我会先使用**[truncate(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/truncate.2.html)**或 ftruncate(2) 来设置我想要的长度（它也会使文件变大，尽管有名字），然后`mmap(2)`是它。这将完全按照您的意愿执行，无论 mmap(2) 在您超出原始 EOF 进行写入时会做什么。

无论如何，这（或一些其他记录的文件扩展方法）对于可移植程序来说都是必需的，因为**[Posix](http://pubs.opengroup.org/onlinepubs/9699919799/)**和**[Linux 手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)**都指出，文件不会通过超出末尾的写入来扩展。

# javascript - HTML5 视频无缘无故被下载“两次”

> ID：13653985
> 
> 赞同：6
> 
> 时间：2012-11-30T22:16:21.270
> 
> 标签：javascript, html5-video, video.js

我只是想知道为什么有时浏览器需要在播放 HTML5 视频之前调用两次。这是正常的还是实际上是一个错误？引擎盖下会发生什么？

不确定我的问题是否特别容易理解，我从[http://videojs.com](http://videojs.com)主页截取了一张屏幕截图，打开了网络面板，以帮助我解释它。请查看[http://bit.ly/St4rRc](http://bit.ly/St4rRc)。Apple 制作的这个著名的页面[http://www.apple.com/html5/showcase/video/](http://www.apple.com/html5/showcase/video/)也是如此，顺便说一句，该页面不使用任何 javascript 库来保存视频。我正在 Google Chrome/Windows 上对其进行测试。

谢谢，

伊兹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T22:24:16.803

许多媒体文件在文件末尾都有某种结构，它定义了原子的位置或有关媒体的其他元数据，例如持续时间、起始字节偏移量、编解码器、比特率等。可以“暗示”某些文件类型，如 mp4 容器将此数据移动到文件的开头。从历史上看，此信息被连接到媒体文件的末尾，因为许多值（持续时间）在视频完成编码之前是未知的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T22:32:06.393

第一个调用是预加载。这允许视频在用户单击播放按钮后立即准备好播放，假设它不是自动播放，或者尽可能早地播放。在下载元数据和视频的前几秒后，它被中止。

第二个调用实际上获取整个文件。浏览器将尝试仅请求尚未请求的部分，但需要将服务器配置为允许。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-27T13:18:41.767

下一个 ffmpeg 命令可以帮助您解决此问题：

```
ffmpeg -i initial-file.mp4 -c copy -movflags +faststart corrected-file.mp4 
```

从文档：

> **-movflags faststart**
> 运行第二遍，将索引（moov atom）移动到文件的开头。此操作可能需要一段时间，并且在碎片输出等各种情况下都不起作用，因此默认不启用。

# php - 如何使用 PHP foreach 为每个用户显示 S3 文件

> ID：13653986
> 
> 赞同：0
> 
> 时间：2012-11-30T22:16:30.540
> 
> 标签：php, mysql, amazon-s3

我正在使用 Amazon S3 存储用户上传的照片，使用以下代码：

```
 if(isset($_POST['Submit'])){

        $fileName = $_FILES['theFile']['name'];
        $fileTempName = $_FILES['theFile']['tmp_name'];
        $folderName = "{id}/{address}/$fileName";

        //create a new bucket
        $s3->putBucket("bucket_name", S3::ACL_PUBLIC_READ);

        //move the file
        if ($s3->putObjectFile($fileTempName, "bucket_name", $folderName, S3::ACL_PUBLIC_READ)) {
            echo ""; //etc, etc 
```

`{id}`和是动态变量，`{address}`用于在上传文件时根据存储在 mysql 数据库中的每个用户的唯一数据创建文件夹的外观。

我遇到的问题是在每个用户的密码保护站点中显示这些文件。我在下面使用的代码拍摄了所有用户的照片并将它们显示给所有用户。如果`{id}/{address}/$fileName`转换为，`123/figuero/photo.jpg`则用户`123`应该只能看到`123/figuero/photo.jpg`（或任何其他带有前言`123/`或`123/xxx/`

使用我在下面使用的代码，`bucket_name`所有用户都可以看到里面的所有文件，而不仅仅是与照片相关的动态数据相关联的文件：

```
 <ul>
        <?php
            $i = 0;
            $contents = $s3->getBucket("bucket_name");

             foreach($contents as $file)
             {

             $fname = $file['name'];
             $furl = 'http://bucket_name.s3.amazonaws.com/'.$fname;

                 echo "<li><img src='$furl'></li>";
                 {
                     $i = 0; 
                 }
             }
        ?>
    <ul> 
```

换句话说，[http://bucket_name.S3.amazonaws.com/中的](http://bucket_name.S3.amazonaws.com/)*所有*文件都被代码拉出以供显示，而不仅仅是文件中与用户有关的照片`123``123/xxx/`

我错过了什么？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T22:23:26.793

我认为最好的方法是在存储桶名称上使用某种前缀来满足您的“目录”类型需求。除此之外，您需要在回显之前评估文件名中的目录名称。

[使用 Zend 框架列出 S3 目录中的所有文件](https://stackoverflow.com/questions/8030837/list-all-files-in-a-s3-directory-with-zend-framework)

即使用桶名来区分：

```
if(isset($_POST['Submit'])){

$fileName = $_FILES['theFile']['name'];
$fileTempName = $_FILES['theFile']['tmp_name'];
$folderName = "{id}/{address}/$fileName";
$bucketName = "bucket_name" . $folderName;

//create a new bucket
$s3->putBucket($bucketName, S3::ACL_PUBLIC_READ);

//move the file
if ($s3->putObjectFile($fileTempName, $bucketName, $folderName, S3::ACL_PUBLIC_READ)) {
    echo ""; //etc, etc 
```

和

```
<ul>
    <?php
        $i = 0;
        $contents = $s3->getBucket($bucketName);

         foreach($contents as $file)
         {

         $fname = $file['name'];
         $furl = 'http://bucket_name.s3.amazonaws.com/'.$fname;

             echo "<li><img src='$furl'></li>";
             {
                 $i = 0; 
             }
         }
    ?>
<ul> 
```

# java - 使用 PMD ant 目标时找不到 ruleset/basic.xml

> ID：13653988
> 
> 赞同：5
> 
> 时间：2012-11-30T22:16:42.123
> 
> 标签：java, ant, pmd

使用 pmd-5.0.1。我有一些自定义规则集：

```
<target name="pmd">
    <condition property="rules.file" else="${data}\pmdrules.xml,${data}\madcustompmdrules.xml">
        <isset property="rules.file"/>
    </condition>        

    <pmd rulesetfiles="${rules.file}">
        <formatter type="xml" toFile="${report.file}"/>
        <fileset dir="${src}">
            <include name="**/*.java"/>
        </fileset>
    </pmd>
</target> 
```

规则集引用如下基本规则：

```
<rule ref="rulesets/basic.xml/EmptySwitchStatements"/>
<rule ref="rulesets/basic.xml/JumbledIncrementer"/>
<rule ref="rulesets/basic.xml/ForLoopShouldBeWhileLoop"/>
<rule ref="rulesets/basic.xml/UnnecessaryConversionTemporary"/>
<rule ref="rulesets/basic.xml/OverrideBothEqualsAndHashcode"/>
<rule ref="rulesets/basic.xml/DoubleCheckedLocking"/> 
```

但是，当运行这个 ant 目标时，我得到：

```
java.lang.RuntimeException: Couldn't find the class Can't find resource rulesets/basic.xml.  Make sure the resource is a valid file or URL or is on the CLASSPATH. 
```

basic.xml 不应该是 jar 文件的一部分吗？我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T22:24:48.730

看起来我的规则是基于过时的 PMD 版本。其中大部分位于`rulesets/java/basic.xml/...`.

# c# - 将嵌套属性动态添加到 ExpandoObject

> ID：13653989
> 
> 赞同：6
> 
> 时间：2012-11-30T22:16:49.957
> 
> 标签：c#, dynamic, expandoobject

我得到一个 JSON 对象（可能包含多个级别的 JSON 数组等），我想将其转换为 ExpandoObject。

我想出了如何在运行时向 ExpandoObject 添加简单属性，因为它实现了 IDictionary，但是如何在运行时添加**嵌套***属性*（例如，类似的东西`myexpando.somelist.anotherlist.someitem`）才能正确解析？

 ****编辑：**目前这适用于简单的（第一级）属性：

```
var exo = new ExpandoObject() as IDictionary<String, Object>;
exo.Add(name, value); 
```

问题是如何获得要嵌套的名称以及如何相应地解析 ExpandoObject。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-09T06:59:17.223

```
dynamic myexpando = new ExpandoObject();
myexpando.somelist = new ExpandoObject() as dynamic;
myexpando.somelist.anotherlist = new ExpandoObject() as dynamic;
myexpando.somelist.anotherlist.someitem = "Hey Hey There! I'm a nested value :D"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T07:21:34.760

您可以通过在`TryGetValue`调用时存储对先前检索到的对象或字典的引用来做到这一点。我使用如下所示的类：

```
public DynamicFile(IDictionary<string, object> dictionary)
{
    if (dictionary == null)
        throw new ArgumentNullException("dictionary");
    _dictionary = dictionary;
    _lastGetRef = _dictionary;
}

private readonly IDictionary<string, object> _dictionary;
private IDictionary<string, object> _lastGetRef;

public override bool TryGetMember(GetMemberBinder binder, out object result)
{
    if (!_dictionary.TryGetValue(binder.Name, out result))
    {
        result = null;
        return true;
    }

    var dictionary = result as IDictionary<string, object>;
    if (dictionary != null)
    {
        result = new DynamicFile(dictionary);
        _lastGetRef = dictionary;
        return true;
    }

    return true;
}

public override bool TrySetMember(SetMemberBinder binder, object value)
{
    if(_dictionary.ContainsKey(binder.Name))
        _dictionary[binder.Name] = value;
    else if (_lastGetRef.ContainsKey(binder.Name))
        _lastGetRef[binder.Name] = value;
    else
        _lastGetRef.Add(binder.Name, value);

    return true;
} 
```

`_dictionary`由构造函数在创建动态对象时设置，然后设置为直接最后一个引用字典。这是因为字典是类，因此是引用类型。

为了正确嵌套，您需要在每个嵌套级别实例化每个字典，就像多维数组一样。例如：

```
myexpando.somelist = new Dictionary<string, object>();
myexpando.somelist.anotherlist = new Dictionary<string, object>();
myexpando.somelist.anotherlist.someitem = "Hey Hey There! I'm a nested value :D"; 
```

您可能可以编写一些代码，`TryGetMember`当密钥不存在时自动添加字典，但我不需要，所以我没有添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T22:29:30.367

这样做怎么样：

```
var exo = new ExpandoObject() as IDictionary<String, Object>;
var nested1 = new ExpandoObject() as IDictionary<String, Object>;

exo.Add("Nested1", nested1);
nested1.Add("Nested2", "value");

dynamic d = exo;
Console.WriteLine(d.Nested1.Nested2); // Outputs "value" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-01T06:23:06.497

很容易

**扩大**

```
public static class ObjectExtension
{
    public static ExpandoObject ToExpando(this object source)
    {
        IDictionary<string, object> anonymousDictionary = new RouteValueDictionary(source);

        IDictionary<string, object> expando = new ExpandoObject();

        foreach (var item in anonymousDictionary)
            expando.Add(item);

        return (ExpandoObject)expando;
    }
} 
```

**客户行动**

```
 public IActionResult Client(string username)
    {
        var client = HttpContext.Items["profile"] as Client;

        var model = new
        {
            client.Id,
            client.Name,
            client.Surname,
            client.Username,
            client.Photo,
            CoverPhoto = new {
               client.CoverPhoto.Source,
               client.CoverPhoto.X
            }.ToExpando(),
        }.ToExpando();

        return View(model);
    } 
```

**客户端.cshtml**

```
<img id="cover-photo" src="@Model.CoverPhoto.Source" /> 
```**

# .net - 在 Process.Start 参数中传递引号

> ID：13653991
> 
> 赞同：5
> 
> 时间：2012-11-30T22:16:57.910
> 
> 标签：.net, batch-file

在 .NET 中，我正在运行这一行

```
var p = Process.Start(@"cmd", @"/C mklink /H c:\z\b c:\z\a\"); 
```

这一切正常，但我担心如果 mklink 的两个 args 之一有一个空间，这将无法正常工作。所以我在两个参数周围添加了“”。执行此行不再有效，当我写 \"" 时，它仍然无效。

执行时如何写引号`cmd /C`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T22:36:49.263

```
string sourcePath = @"c:\z\b";
string targetPath = @"c:\z\a";

string arguments = string.Format("\"{0}\" \"{1}\"", sourcePath, targetPath);

var p = Process.Start("cmd", "/C mklink /H " + arguments); 
```

工作示例：

```
string sourcePath = @"c:\documents and settings\harvey robert\My Documents\Test.txt";
string targetPath = @"c:\test";

string s = string.Format("\"{0}\" \"{1}\"", sourcePath, targetPath);
Process.Start("cmd", @"/c copy " + s); 
```

已复制 1 个文件。

# c++ - 限制（amp）函数的默认参数

> ID：13653992
> 
> 赞同：5
> 
> 时间：2012-11-30T22:17:00.517
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, c++-amp

以下代码无法编译。错误消息是：

错误一：

```
error C3930: 'foo' : no overloaded function has restriction specifiers that are compatible with the ambient context '' 
```

错误2：

```
error C2660: 'f1' : function does not take 0 arguments 
```

错误 3：

```
IntelliSense: amp-restricted function "int foo() restrict(amp)" (declared at line 5) must be called from an amp-restricted function 
```

该程序：

```
#include <amp.h>
#include <iostream>
using namespace std;

int foo() restrict(amp) { return 5; }

int f1(int x = foo()) restrict(amp) {
  return x;
}

int main()
{
  using namespace concurrency;

  int a[10] = {0};
  array_view<int> av(10, a);

  parallel_for_each(av.extent, [=](index<1> i) restrict(amp) {
    av[i] = f1();
  });

  for(unsigned i=0; i<10; ++i) {
    cout << av[i] << "\n";
  }
  return 0;
} 
```

奇怪的是，当我删除`restrict(amp)`on并将lambda 中`foo()`的调用替换为 时，程序编译得很好。那么 amp 函数的默认参数中的函数调用规则是什么？`f1()``5`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:29:12.837

[MSDN 论坛回答](http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/thread/fd9003f9-3f59-4e9a-ad4b-49e8b9d9c772)了这个问题。

> 我们选择的默认参数的语义与 C++ 的总体前提一致，即程序的解析是在一次从左到右的过程中完成的（尽管该规则很少有明显的例外，尤其是成员函数） - 因此，因为在函数参数声明之后读取限制说明符，位于默认参数表达式中的任何函数调用都根据“外部”限制说明进行绑定，无论好坏。换句话说，您从一开始就使用 cpu-restriction “active”（因为它是默认的）阅读程序，然后将“restrict(X)”和“}”之间的所有内容切换到限制 X，从而关闭相关范围。

# objective-c - 在 iOS6 中记录为联系人存储的每个值

> ID：13653993
> 
> 赞同：1
> 
> 时间：2012-11-30T22:17:02.690
> 
> 标签：objective-c, ios, ios6

我遇到了一个非常奇怪的问题，我试图在 iOS 6 中查找联系人的地址，除非该联系人的地址标有“地址”，否则我找不到它。在“工作”或“家庭”下输入的任何地址都不会出现。

为了解决这个问题，是否可以从联系人中获取人员记录并转储存储的每个值？我希望这能帮助我找到那些“家庭”和“工作”地址的居住地。

到目前为止，这是我的代码：

```
- (void)setAddressFromPerson:(ABRecordRef)person
{
    ABMultiValueRef addresses = ABRecordCopyValue(person, kABPersonAddressProperty);
    for (CFIndex j = 0; j<ABMultiValueGetCount(addresses);j++){
        CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(addresses, j);
        CFStringRef typeTmp = ABMultiValueCopyLabelAtIndex(addresses, j);
        CFStringRef labeltype = ABAddressBookCopyLocalizedLabel(typeTmp);
        NSString *street = [(NSString *)CFDictionaryGetValue(dict, kABPersonAddressStreetKey) copy];
        NSString *city = [(NSString *)CFDictionaryGetValue(dict, kABPersonAddressCityKey) copy];
        NSString *state = [(NSString *)CFDictionaryGetValue(dict, kABPersonAddressStateKey) copy];
        NSString *zip = [(NSString *)CFDictionaryGetValue(dict, kABPersonAddressZIPKey) copy];
        NSString *country = [(NSString *)CFDictionaryGetValue(dict, kABPersonAddressCountryKey) copy];

        NSLog(street);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:54:44.197

在视觉上解析有点困难，但转储与 an 相关的所有内容的最简单方法`ABPersonRef`是获取其 vCard 表示：

```
ABPersonRef person = ...;
CFDataRef data = ABPersonCreateVCardRepresentationWithPeople(@[person]);
NSString *vcard = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

（假设从`NSArray *`⇒`CFArrayRef`等正确转换）

# enums - 使用 XSD 1.1 的动态枚举限制

> ID：13653995
> 
> 赞同：7
> 
> 时间：2012-11-30T22:17:09.050
> 
> 标签：enums, xsd, w3c, xsd-validation, xsd-1.1

我正在尝试使用 XSD 1.1 创建一个模式定义，其中一个元素的结果依赖于另一个元素。例如，我有国家列表和每个国家的州列表的下拉列表。当一个人选择一个国家时，只能选择那个国家的州。我试图达到的伪代码看起来像这样。

```
<xs:schema xmlns:ie="http://www.interviewexchange.com" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
<xs:element name="country">       
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:enumeration value="USA" />
            <xs:enumeration value="UK" />
            <xs:enumeration value="India" />
        </xs:restriction>
    </xs:simpleType>
</xs:element>
<xs:element name="state">       
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <assert test="if (country eq 'USA')">
            <xs:enumeration value="MA" />
            <xs:enumeration value="AR" />
            <xs:enumeration value="NY" />
            </assert">
            <assert test="if (country eq 'India')">
            <xs:enumeration value="AP" />
            <xs:enumeration value="TN" />
            <xs:enumeration value="MP" />
            </assert">
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

请建议我是否遵循正确的方法，如果我遵循正确的方法，谁能给我如何达到此限制的代码？提前致谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T17:59:25.710

你越来越近了。

在 XSD 1.1 中，断言只能向下查看子树，不能向上或向上，所以如果你想在这里使用断言，你需要把它们放在 'state' 类型而不是 'address' 类型中：

```
<xs:element name="address">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="street"/>
      <xs:element ref="city"/>
      <xs:element ref="state" minOccurs="0"/>
      <xs:element ref="country"/>
    </xs:sequence>
    <xs:assert test="(country = 'UK' and not(state))
      or
      (country = 'US' and state = ('MA', 'AR', 'NY'))
      or
      (country = 'IN' and state = ('AP', 'TN', 'MP'))
      "/>
  </xs:complexType>
</xs:element> 
```

另一种方法（也在 XSD 1.1 中）是使用条件类型赋值。这允许基于可以引用其元素（但不能引用其子元素）的 XPath 表达式为元素分配不同的类型。如果我们将国家和州移动到属性中（然后，为了保持一致性，也将街道和城市移动到属性中），我们可以这样使用条件类型分配。首先，为状态定义我们想要的各种简单类型：

```
<xs:simpleType name="US-states">
  <xs:restriction base="xs:NMTOKEN">
    <xs:enumeration value="MA" />
    <xs:enumeration value="AR" />
    <xs:enumeration value="NY" />      
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="IN-states">
  <xs:restriction base="xs:NMTOKEN">
    <xs:enumeration value="AP" />
    <xs:enumeration value="TN" />
    <xs:enumeration value="MP" />   
  </xs:restriction>
</xs:simpleType> 
```

然后为我们想要的三种不同类型的地址定义三种不同的复杂类型。我假设英国地址没有“州”属性。

```
<xs:complexType name="US-address">
  <xs:attribute name="street" type="xs:string" use="required"/>
  <xs:attribute name="city" type="xs:string" use="required"/>
  <xs:attribute name="state" type="US-states"/>
  <xs:attribute name="country" type="xs:NMTOKEN" use="required"/>
</xs:complexType>
<xs:complexType name="UK-address">
  <xs:attribute name="street" type="xs:string" use="required"/>
  <xs:attribute name="city" type="xs:string" use="required"/>
  <xs:attribute name="country" type="xs:NMTOKEN" use="required"/>
</xs:complexType>
<xs:complexType name="IN-address">
  <xs:attribute name="street" type="xs:string" use="required"/>
  <xs:attribute name="city" type="xs:string" use="required"/>
  <xs:attribute name="state" type="IN-states"/>
  <xs:attribute name="country" type="xs:NMTOKEN" use="required"/>
</xs:complexType> 
```

现在我们`address`根据 'country' 的值将元素绑定到正确的其中之一：

```
<xs:element name="address">
  <xs:alternative test="@country='US'" type="US-address"/>
  <xs:alternative test="@country='IN'" type="IN-address"/>
  <xs:alternative test="@country='UK'" type="UK-address"/>
  <xs:alternative type="xs:error"/>
</xs:element> 
```

备选方案按顺序进行测试，第一个测试结果为 true 的备选方案分配类型。最后一种选择（没有测试属性）提供了一个默认值，在这种情况下是错误类型（没有元素或属性对错误类型有效）。

# jquery - 从ajax调用传递值

> ID：13653998
> 
> 赞同：0
> 
> 时间：2012-11-30T22:17:25.963
> 
> 标签：jquery, ajax

有没有办法解决如何将值从“值”传递到 if 语句？

我现在得到的值显示为 1 或 0。我现在想要完成的是如何在 if 语句中传递它。我想要这样的东西。如果 val = 0 返回真；否则返回假。我不确定我是否在使用 ajax 函数的正确轨道上。但是，如果有更好的方法可以告诉我，我将不胜感激。

```
$(function(){ 
       $('#add_product').click(function(){ 
         var i = $('#product_name').val(); 
         param = 'product_name='+i; 
         check_product(param).done(function(value) {
        var val = value; //value return is 1 or 0 - this is fine
         });
         //val should be past here so that I can determine if I will return true or false
         if(val == 0){
            return true;
         } else{
            return false;
         }
       }); 
    });

function check_product(param){ 
  return $.ajax({ 
    type : 'POST', 
    data : param, 
    url : baseurl+'cart/check_product_name/'
 });
} 
```

html表单：

```
<?php echo form_open_multipart('cart/save_product'); ?>
<h3>Product Name:</h3>
<?php echo form_input(array('name' => 'product_name', 'id' => 'product_name'), set_value('product_name')); ?>
<h3>Price:</h3>
<?php echo form_input(array('name' => 'price', 'id' => 'price'), set_value('price')); ?>
<h3>Status:</h3>
<?php
$options = array(
    '1' => 'Active',
    '0' => 'Not Active'
);
echo form_dropdown('status', $options);
 ?>
<h3>Short Description:</h3>
<?php echo form_textarea(array('name' => 'short_description', 'id' => 'short_desc'), set_value('short_description')); ?>
<h3>Image:</h3>
<?php echo form_upload('userfile'); ?><br>
<p class="submit" id="post_submit"><input type="submit" value="Submit" id="add_product" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:19:02.020

您需要阻止表单提交，然后使用 ajax 检查产品名称是否存在，当 ajax 调用完成后，如果返回值为零，则使用 javascript 提交表单：

```
$(function() {
    $('#add_product').click(function(e) {
        e.preventDefault();
        var i     = $('#product_name').val(),
            param = 'product_name=' + i,
            self  = this;
        check_product(param).done(function(value) {
            if (value === 0) self.submit();
        });
    });
});

function check_product(param) {
    return $.ajax({
        type: 'POST',
        data: param,
        url: baseurl + 'cart/check_product_name/'
    });
}​ 
```