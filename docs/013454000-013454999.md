# StackOverflow 问答 13454000-13454999

# sql - 如何获取具有相同 ID 的最新记录？

> ID：13454002
> 
> 赞同：4
> 
> 时间：2012-11-19T12:38:30.403
> 
> 标签：sql, sql-server, sql-server-2008

我想从 SQL 数据表中获取最新记录。我有以下数据表。但它返回 0 条记录。

表格1

```
PKID----FKID-----------CDateTime
1        25     2012-11-19 17:51:22.000
2        25     2012-11-19 17:53:22.000
3        25     2012-11-19 17:54:22.000
4        26     2012-11-19 17:55:22.000
5        26     2012-11-19 17:56:22.000 
```

现在，我想要具有 FKID 25 的最新记录它应该返回第三条记录（PKID = 3）......如何获得？我写了下面的代码，但它什么也没返回。

```
SELECT * from Table1 WHERE FKID = 25
 and CDateTime= (select max(CDateTime) From Table1 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:41:01.857

```
select top 1 * from tablename where FKID = 25 order by CDateTime desc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:41:36.867

您遇到的问题是您设置了一个`AND`永远不会成立的约束，因此您没有得到任何输出。这个查询可以解决问题。

```
 SELECT * from Table1 WHERE FKID = 25
     and CDateTime= (select max(CDateTime) From Table1 where FKID = 25 ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T13:03:21.887

这个问题的另一个解决方案是加入一个子查询，该子查询获取每个`FKID`.

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT FKID, MAX(CDATETIME) maxDate
            FROM tableName
            GROUP BY FKID
        ) b ON a.FKID = b.FKID AND
                a.CDateTime = MaxDate 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/26c5a/1)

或通过使用`Common Table Expression`

```
WITH latestRecords 
AS
(
    SELECT PKID, FKID, CDATETime,
            ROW_NUMBER() OVER (PARTITION BY FKID
                        ORDER BY CDateTime DESC) rn
    FROM TableNAme
)
SELECT PKID, FKID, CDATETime
FROM latestRecords
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/26c5a/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:42:23.337

您的查询没有返回值，因为子查询（从 Table1 中选择 max(CDateTime) ）将为您提供整个表中的最大 CDateTime 而不是 FKID = 25

尝试这个：

```
with cte as(
SELECT *,row_number() over (partition by FKID order by CDateTime desc) as rn 
from Table1 )
select * from cte 
WHERE FKID = 25
and rn=1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:41:16.110

尝试这个：

```
SELECT * from Table1 WHERE FKID = 25
and CDateTime= (select max(CDateTime) From Table1 where FKID = 25) 
```

# r - R：如何将结构化列表导出到 Excel

> ID：13454005
> 
> 赞同：4
> 
> 时间：2012-11-19T12:38:35.650
> 
> 标签：r, excel, list, export

这应该很简单，但我的努力`unlist`还是`matrix`失败了。

如何将以下列表导出到保留相同结构的 Excel 工作表中？

```
list(structure(list(rob = c(0.500395231401348, 0.839314035292317, 
0.710466394967634, 0.61574235723249)), .Names = "rob", row.names = c(NA, 
4L), class = "data.frame"), structure(list(rob = c(0.66163340478379, 
0.591092739290417, 0.554484883310407, 0.78199375944331, 0.489388775242085
)), .Names = "rob", row.names = c(NA, 5L), class = "data.frame"), 
    structure(list(rob = c(0.697897964659196, 0.480394119894312, 
    0.514294379103359, 0.626971885076273, 0.77938643423231, 0.618135503224601
    )), .Names = "rob", row.names = c(NA, 6L), class = "data.frame")) 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T13:40:12.307

你可以这样做：

1.  填充每个向量`NA`以使所有向量的长度相同
2.  用于`do.call(rbind, ...)`创建数据框

像这样：

```
xx <- lapply(x, unlist)
max <- max(sapply(xx, length))
do.call(rbind, lapply(xx, function(z)c(z, rep(NA, max-length(z)))))

          rob1      rob2      rob3      rob4                    
[1,] 0.5003952 0.8393140 0.7104664 0.6157424        NA        NA
[2,] 0.6616334 0.5910927 0.5544849 0.7819938 0.4893888        NA
[3,] 0.6978980 0.4803941 0.5142944 0.6269719 0.7793864 0.6181355 
```

然后这是使用`write.table()`或您最喜欢的导出到 excel 方法的简单问题。

# html - UIWebView - 改变大小和适合内容

> ID：13454009
> 
> 赞同：3
> 
> 时间：2012-11-19T12:38:55.793
> 
> 标签：html, ios, uiwebview

我想下载 html 内容，然后找出它的大小（通过调用 javascript 函数）。之后，我想将`UIWebView`框架更改为该大小。并且 html 内容应该填满整个`UIWebView`.

我在 stackoverflow 上阅读了文档和类似的问题。没有任何帮助。我不想调用**reload**方法并从服务器下载 HTML**两次**。我得到正确的 html 宽度和高度，但是在更改`UIWebView`框架大小后，html 内容不会填满框架。（下面的这段代码被调用`- (void)webViewDidFinishLoad:(UIWebView *)webView`）

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *width = [f numberFromString:[self.mediaWebView stringByEvaluatingJavaScriptFromString:@"getContentWidth()"]];
NSNumber *height = [f numberFromString:[self.mediaWebView stringByEvaluatingJavaScriptFromString:@"getContentHeight()"]];

self.mediaWebView.frame = CGRectMake(BORDER_WIDTH, BORDER_WIDTH, _frameWidth, _frameHeight);
self.mediaWebView.bounds = CGRectMake(0, 0, _frameWidth, _frameHeight); 
```

初始化代码：

```
self.mediaWebView = [[UIWebView alloc] initWithFrame:CGRectMake(BORDER_WIDTH, BORDER_WIDTH, _frameWidth, _frameHeight)];
[self.mediaWebView setBackgroundColor:[UIColor clearColor]];
[self.mediaWebView setOpaque:FALSE];
[self.mediaWebView setUserInteractionEnabled:TRUE];
self.mediaWebView.scrollView.scrollEnabled = FALSE;
self.mediaWebView.scrollView.bounces = FALSE;
self.mediaWebView.delegate = self;
self.mediaWebView.contentMode = UIViewContentModeRedraw;
self.mediaWebView.backgroundColor = [UIColor blackColor];

NSString *stringUrl = @""// some URL

NSURL *url = [NSURL URLWithString:stringUrl];
[self.mediaWebView loadHTMLString:[self.questionView.question.mediaHtml description] baseURL:url];

self.mediaWebView.scalesPageToFit = TRUE;

[self addSubview:self.mediaWebView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:11:20.173

正如我在下面问题的评论中描述的那样。将 scalesPageToFit 设置为 FALSE 就足够了

# android - AS3 Air for Android [错误 2070] - 远程加载的 SWF 无法从应用程序访问 Stage

> ID：13454010
> 
> 赞同：0
> 
> 时间：2012-11-19T12:39:10.553
> 
> 标签：android, actionscript-3, flash, air

我正在构建一个 Air for Android (AS3) 应用程序，它将加载远程 swf 文件（位于我的服务器上）

我们的想法是尽可能保持 apk 流线型以允许快速部署（将私下部署，而不是通过 Google Play 部署）

*   该 apk 称为 Loader
*   远程 swf 称为播放器。

现在，当我启动 Loader 时，Player 抛出了这个错误：

> SecurityError：错误 #2070：违反安全沙盒：调用方[http://sub.mydomain.com/remote/player.swf](http://sub.mydomain.com/remote/player.swf)无法访问 app:/Loader.swf 拥有的 Stage。

这很奇怪，因为 Player 没有尝试调用 Loader 阶段 - 我告诉 Player 创建一个名为“_stage”的新阶段，代码如下：

```
var playerContainer:MovieClip = new MovieClip();
var _stage:Stage = playerContainer.stage; 
```

使用：

```
_stage.stageWidth 
```

访问舞台宽度。

我不知道为什么 Loader 认为 Player 试图访问它的舞台属性？

我已经尝试了在各种论坛帖子中提到的以下代码，但似乎没有任何东西可以缓解安全域的问题：

在装载机

```
try {Security.allowDomain("*");}catch (e) { }; 
```

在播放器中

```
Security.allowDomain("http://sub.mydomain.com"); 
```

以及在 Player 中，对于我的 init() 函数

```
addEventListener(Event.ADDED_TO_STAGE, displayLogin); 
```

这些都没有帮助。

我完全不知所措。关于如何让 Loader 允许 Player 访问其舞台属性，这让我很头疼。

编辑 - 当两个 swf 文件都在服务器上时，我通过浏览器访问 Loader，而不是使用 android 应用程序，它加载正常。绝对是跨脚本的问题，但在我看来，我有所有正确的代码来允许这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:20:49.713

Pablo，首先如果它向舞台添加项目而不是访问舞台属性，也许您应该将 player.swf 下载到 SDCard 或应用程序本地存储并从那里加载？然后您可以设置过期日期，之后您将重新加载 player.swf？

[这是有关在 SDCARD 上存储远程文件的其他 SO 问题的链接](https://stackoverflow.com/questions/9854165/is-it-possible-to-download-and-save-file-using-adobe-air)

# android - ListView 失去平滑滚动

> ID：13454019
> 
> 赞同：2
> 
> 时间：2012-11-19T12:39:37.680
> 
> 标签：android, listview, scroll

我的 ListView 非常简单，使用**ViewHolder**方法，但**“橡胶”滚动**不起作用。如果我用手指运行列表，它只是向下/向上 4-5 行并停止（所有列表大约有 50 行）。

**适配器 getView 和 getHolder 方法**

```
private ViewHolder getHolder(View vi) {
    ViewHolder holder = new ViewHolder();
    holder._id = (TextView) vi.findViewById(R.id._id);
    holder.creator = (TextView) vi.findViewById(R.id.creator);
    holder.message = (TextView) vi.findViewById(R.id.message);
    holder.updated = (TextView) vi.findViewById(R.id.updated);
    holder.userid = (TextView) vi.findViewById(R.id.userid);

    return holder;
}         

@Override 
public View getView(int position, View convertView, ViewGroup parent) {
    // return super.getView(position, convertView, parent);
    ViewHolder holder;

    View vi = convertView;
        if (vi == null || vi.getTag() == null) {
            vi = inflater.inflate(itemLayoutIdCommon, null);
            holder = getHolder(vi);
            vi.setTag(holder);
        } else {
            holder = (ViewHolder) vi.getTag();
        }
    }

    holder._id.setText((CharSequence) mValues.get(position).get("_id"));
    holder.creator.setText((CharSequence) mValues.get(position).get("creator"));
    holder.updated.setText((CharSequence) mValues.get(position).get("updated"));
    holder.userid.setText((CharSequence) mValues.get(position).get("userid"));
    holder.message.setText((CharSequence) mValues.get(position).get("title"));

    RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) holder.message.getLayoutParams();
    holder.message.setBackgroundResource(layoutChooser.getBackground(mValues.get(position)));
    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, 0);
    layoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, 0);
    layoutParams.addRule(layoutChooser.getAlign(mValues.get(position))); // ALIGN_PARENT_RIGHT / LEFT etc.
    holder.message.setLayoutParams(layoutParams);
    return vi;
}

public static class ViewHolder {
    TextView _id;
    TextView userid;
    TextView message;
    TextView creator;
    TextView updated;
} 
```

**和 row_layout.xml (itemLayoutIdCommon)**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:tag="_id"
    android:visibility="gone" />

<TextView
    android:id="@+id/userid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:tag="userid"
    android:visibility="gone" />

<TextView
    android:id="@+id/creator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dp"
    android:layout_toLeftOf="@+id/updated"
    android:tag="creator"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white"
    android:textSize="14sp"
    android:visibility="invisible" />

<TextView
    android:id="@+id/message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginTop="30dp"
    android:enabled="false"
    android:gravity="center_vertical|center_horizontal"
    android:tag="title"
    android:textColor="@color/black" >
</TextView>

<TextView
    android:id="@+id/updated"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:tag="updated"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/blue_border"
    android:textSize="14sp" />

</RelativeLayout> 
```

** lisview.xml **

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/chat_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/dim_foreground_disabled_holo_dark"
android:orientation="vertical" >

<com.handmark.pulltorefresh.library.PullToRefreshListView
    xmlns:ptr="http://schemas.android.com/apk/res-auto"
    android:id="@+id/chat_listview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/tableRowMessage"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/actionBar1"
    android:layout_gravity="fill"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="3dp"
    android:background="@drawable/chatshape"
    android:dividerHeight="0dp"
    android:fillViewport="true"
    ptr:ptrAnimationStyle="flip"

    android:cacheColorHint="#00000000"
    android:fadingEdge="none"
    android:fastScrollEnabled="false"
    android:footerDividersEnabled="false"
    android:headerDividersEnabled="false"
    android:smoothScrollbar="true" 

    ptr:ptrMode="both" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:05:57.830

发现错误。我的活动使用了自己的 onSwipe 控制器，该控制器阻止平滑滚动从其运动事件处理程序返回真值。将其更改为 false（将事件传递给其他人）修复了该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:53:22.170

正如文件所说

> 平滑滚动的 ListView 的关键是使应用程序的主线程（UI 线程）免于繁重的处理。确保您在单独的线程中执行任何磁盘访问、网络访问或 SQL 访问。

您可以从[使 ListView 滚动平滑中获得更多详细信息](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

希望它会帮助你。

# asp.net - 将 ajax 日历扩展器添加到我的 Web 表单

> ID：13454022
> 
> 赞同：0
> 
> 时间：2012-11-19T12:39:55.390
> 
> 标签：asp.net

我正在尝试将 Ajax Calender 扩展器控件添加到我的网络表单中。我添加了下载的最新版本 ajax 并将其复制到我的应用程序 bin 文件夹中。当我运行我的应用程序时，日期控制不显示。正在使用 VS2012 EXPRESS。有人知道
做错了什么吗？我看过几个样本，但仍然不适合我。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Add-treatment.aspx.cs"       Inherits="Practice_project.Account.Add_treatment" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit"   TagPrefix="asp" %>    

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
    <header>
        <img src="../Images/Gambia_Coat_of_Arms.jpg" />
    </header>
    <div>
        <fieldset>
            <legend>Add treatment for the Patient
            </legend>
            <ol>
                <li>
                    <asp:Label ID="lbl_treatment" runat="server">Treatment</asp:Label>
                    <asp:TextBox ID="treatment_id" runat="server"></asp:TextBox>
                    <%--<asp:CompareValidator runat ="server"></asp:CompareValidator>--%>
                </li>

                <li>
                    <asp:Label ID="No1" runat="server">Nº Days on F75</asp:Label>
                    <asp:TextBox ID="f75" runat="server"></asp:TextBox>
                </li>
                <li>
                    <asp:Label runat="server" ID="No2">Nº Days on F100</asp:Label>
                    <asp:TextBox ID="f100" runat="server"></asp:TextBox>
                </li>
                <li>
                    <asp:Label ID="No3" runat="server">Nº Days on RUTF</asp:Label>
                    <asp:TextBox ID="rutf" runat="server"></asp:TextBox>

                </li>
                <li>
                    <asp:Label ID="No4" runat="server">Type RUTF</asp:Label>
                    <asp:TextBox ID="ruft_type" runat="server"></asp:TextBox>
                </li>
                <li>
                    <asp:Label ID="No5" runat="server">Nº Days on Weaning Foods</asp:Label>
                    <asp:TextBox ID="wfood" runat="server"></asp:TextBox>

                </li>
                <li>
                    <asp:Label ID="discharge" runat="server">Date of Discharge</asp:Label>
                    <asp:TextBox ID="discharge_date" runat="server"></asp:TextBox>
                    <asp:Image ID="Image1" runat="server" />
                    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

                    <asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="discharge_date" PopupButtonID="Image1" ></asp:CalendarExtender>
                </li>

            </ol>

        </fieldset>

    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:21:05.103

我终于注意到了我的错误。这是有效的：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>    

<ajaxToolkit:CalendarExtender runat="server" StartDate="1912-01-01" TargetControlID="discharge_date"  ></ajaxToolkit:CalendarExtender> 
```

# backbone.js - 如何重置主干模型的嵌套树

> ID：13454030
> 
> 赞同：0
> 
> 时间：2012-11-19T12:40:36.980
> 
> 标签：backbone.js

下面是描述嵌套树模型的代码，以及 json 中的示例数据。如何`blocks`使用提供重置`data`？

```
var Block, Blocks, data, blocks;

Block = Backbone.Model.extend({
  initialize: function() {
    this.blocks = new Blocks;
  }
});

Blocks = Backbone.Collection.extend({
  model: Block
});

data = [
  {
    id: 1,
    blocks: [
      {id: 2, blocks: [{id: 3}]}, {id: 4}
    ]
  },
  {
    id: 5
  }
];

blocks = new Blocks; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:04:26.467

```
var Block, Blocks, data, blocks;

Block = Backbone.Model.extend({
  initialize: function() {
    // access 'blocks' via attributes
    // and initialize collection by passing the attributes in
    this.attributes.blocks = new Blocks(this.attributes.blocks);
  }
});

Blocks = Backbone.Collection.extend({
  model: Block
});

data = [
  {
    id: 1,
    blocks: [
      { id: 2, 
        blocks: [
          { id: 3 }
        ]
      }, 
      { id: 4 }
    ]
  },
  {
    id: 5
  }
];

// initialize blocks by passing 'data' in
blocks = new Blocks(data);​ 
```

好的，因为属性在`attributes`初始化之前存储在下面，您需要调用`this.attributes.blocks`您的初始化函数以确保没有混淆`this.blocks`（有）。

您还需要`blocks`通过将数据传递到它的构造函数来进行初始化，这对于 的每个其他实例都是相同的`Blocks`，即那些也存储在 each中的实例`Block`。

# asp.net - SQLServer 和 VB.net 中的日期时间

> ID：13454033
> 
> 赞同：1
> 
> 时间：2012-11-19T12:40:40.423
> 
> 标签：asp.net, sql, vb.net, sql-server-2008

我正在尝试将当前日期写入数据库表。我已将表格的字段设置为“日期”。我在写信

`DateTime.Now.Date.ToString`作为插入/更新查询的参数。所以，我的代码是这样的：

`cmd.CommandText = "update tab set dt = @d where id=1" cmd.Parameters.add("@d",DateTime.Now.Date.ToString)`

这似乎没有更新数据库中的值。这里有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:43:16.657

不要将字符串传递给需要`DATE`.

改为传入`DateTime`实例：

```
cmd.Parameters.AddWithValue("@d",DateTime.Now.Date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:10:45.867

如果这是 SQL Server，请删除参数并将 SPROC 更改为使用 GETDATE()，这将导致它始终插入 SQL Server 的当前 DateTime Stamp。

# c - 如何清除C中的内存内容？

> ID：13454036
> 
> 赞同：3
> 
> 时间：2012-11-19T12:40:54.230
> 
> 标签：c

我正在以这种方式定义一个 char 指针。

```
char *s=(char *)malloc(10); 
```

在我填写所有可能适合此处的值后，我想清除我写给 s 的任何内容，并且不再使用 malloc 想写在 s 中吗？我怎样才能做到这一点？

我需要更新内容，但如果在最后一次迭代中没有更新所有值，那么我将处理我不想做的旧值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T12:45:43.120

当心！

`malloc(sizeof(2*5))`与 32 位系统相同，`malloc(sizeof(int))`仅分配 4 个字节。如果要分配 10 个字节，请使用`malloc(2 * 5)`.

* * *

`malloc()`您可以使用`memset(s, 0, 10)`或清除分配的内存`memset(s, 0, sizeof(int))`，以防万一这确实是您想要的。

请参阅[man memset](http://linux.die.net/man/3/memset)。

* * *

另一种清除内存的方法是使用[`calloc`](http://linux.die.net/man/3/calloc)而不是 malloc。这与 malloc 一样分配内存，但也将内存设置为零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T12:44:50.070

您可以使用`memset`，并将内存块中的所有字节设置为 ，来“清除”内存`0`。例如：

```
#define MEMORY_BLOCK 10

//allocate memory
unsigned char* s = malloc(MEMORY_BLOCK);

//... do stuff

//clear memory
memset(s, 0, MEMORY_BLOCK); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T12:46:29.213

几点观察：

*   您不需要转换`malloc()`C中的返回值。
*   你的`malloc()`论点看起来不对；请注意，这`sizeof`是一个运算符，而不是一个函数。它将计算其参数类型的大小： 2 * 5 具有 type `int`，因此该值可能是 4。请注意，这对于所有整数表达式都是相同的：`sizeof 1`与 相同`sizeof 100000000`。

你的问题很不清楚，很难理解为什么你觉得你必须“清除”字符串区域。内存就是内存，它将保存您上次写入的内容，无需在两次写入之间“清除”它。实际上，“清除”只是写入某些特定值。

# asp.net-mvc-3 - 枚举的 ASP NET MVC3 路由

> ID：13454037
> 
> 赞同：1
> 
> 时间：2012-11-19T12:40:56.353
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我已设置路由以通过允许格式为 URL 来允许 SEO（和人类）友好的 URL`~/{category}/{title}`

所有这些都应该路由到具有适当重定向方法的内容控制器。我还想允许`~/{category}`将您带到过滤索引。

所有这些都对我有用：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Category And Title", // Route name
        "{category}/{title}", // URL with parameters
        new { controller = "Content", action = "SeoRouting", title = UrlParameter.Optional }, // Parameter defaults
        new { category = "People|IT|Personnel|Finance|Procedures|Tools"}
        ); 

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new {controller = "Home", action = "Index", id = UrlParameter.Optional} // Parameter defaults
        );

} 
```

但如果类别发生变化，那么我需要在两个地方进行更改。在 Global.asax 和枚举中，我们有类别。

在理想情况下，如果路径第一部分中的值与 ContentCategory 枚举匹配（不区分大小写），我希望使用第一条路由，如果不匹配，则使用默认路由。

类别将很少改变，所以这不是一件大事，但如果感觉它应该是可能的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T12:49:58.493

抱歉，我对实际问题有点困惑，但是您可以通过使用实际枚举生成正则表达式对象来绕过“在两个地方更改代码”（有点）：

```
routes.MapRoute(
    "Category And Title", // Route name
    "{category}/{title}", // URL with parameters
    new { controller = "Content", action = "SeoRouting", title = UrlParameter.Optional }, // Parameter defaults
    new { category = getCategories() }
    ); 

private static string getCategories()
{
     var categories = Enum.GetNames(typeof(ContentCategory));
     return string.Join("|", categories);
} 
```

# cygwin - echo -n 在 cygwin 下不起作用

> ID：13454039
> 
> 赞同：0
> 
> 时间：2012-11-19T12:41:01.737
> 
> 标签：cygwin

我想将某些内容回显到文件中，例如：

```
aaaa
bbbb 
```

`man echo`说：

```
-n     do not output the trailing newline 
```

所以我`echo -n aaaa\r\nbbbb > somefile.txt`

但`\r\n`输出为文本，而不是换行符......上面的命令在ubuntu12.04下是可以的。我使用的是win7 64位，cygwin 1.7.16-1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:49:59.683

您需要引号和`-e`启用反斜杠转义解释的选项：

```
echo -en "aaaa\r\nbbbb" > somefile.txt 
```

*在 Cygwin 中测试，可以完成工作:)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:49:30.417

尝试这个：

```
echo -n aaaa$'\r\n'bbbb > somefile.txt 
```

这在 cygwin 和 ubuntu 下有效。

编辑：

或者

```
echo -e 'aaaa\r\nbbbbb' > somefile.txt 
```

# iphone - 使用委托更改标签文本颜色

> ID：13454043
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:41:16.883
> 
> 标签：iphone, ios, delegates, protocols

我有两个视图控制器，`ParentViewController`有使用`SecondViewController`. 现在我想从 更改`ParentViewController`标签文本颜色`ChildViewController`，因为我正在使用协议和委托，但它显示错误。

我的代码是这样的：

ChildViewController.h

```
@protocol ViewControllerDelegate

-(void) updateLabel;

@end
@interface ChildViewController : UIViewController<UITextFieldDelegate,UITextViewDelegate>
{
    id <ViewControllerDelegate> delegate;
}

@property (assign) id <ViewControllerDelegate> delegate;
@end 
```

ChildViewController.m

```
@implementation childViewController

@synthesize delegate;

- (IBAction)backBtn:(id)sender {
    [delegate updateLabel];
}
@end 
```

父视图控制器.h

```
#import <UIKit/UIKit.h>
#import "childViewController.h"

@interface ParentViewController : UIViewController<UserResizableViewDelegate,ViewControllerDelegate>

@end 
```

父视图控制器.m

```
@implementation ParentViewController

- (void)viewDidLoad
{
   ChildViewController.delegate=self;   //here it show error that ChildViewController does not have property delegate
}
- (void)updateLabel
{
    alabel.textColor = [UIColor blueColor];
}

@end 
```

**更新**

这就是我创建标签的方式

父视图控制器.m

```
- (void)viewDidLoad
{
CGRect imageFrame = CGRectMake(10, 10, 150, 80);
    labelResizableView = [[UserResizableView alloc] initWithFrame:imageFrame];
    alabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 100)];

    alabel.text = @"Drag me!";
    //alabel.text = self.newsAsset.title;
    alabel.adjustsFontSizeToFitWidth = NO;
    alabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    alabel.font = [UIFont boldSystemFontOfSize:18.0];
    //alabel.textColor = [UIColor blueColor];    
    // alabel.shadowColor = [UIColor whiteColor];
    // alabel.shadowOffset = CGSizeMake(0, 1);
    alabel.backgroundColor = [UIColor clearColor];
    alabel.lineBreakMode = UILineBreakModeWordWrap;
    alabel.numberOfLines = 10;
    alabel.minimumFontSize = 8.;
    alabel.adjustsFontSizeToFitWidth = YES;
    [alabel sizeToFit];
    labelResizableView.autoresizingMask = UIViewAutoresizingFlexibleWidth;

    // enable touch delivery
    alabel.userInteractionEnabled = YES;

    UITapGestureRecognizer *doubleTap =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap:)]; 
    doubleTap.numberOfTapsRequired = 2; 
    [self.view addGestureRecognizer:doubleTap];

    //Calculate the expected size based on the font and linebreak mode of your label
    CGSize maximumLabelSize = CGSizeMake(296,9999);

    CGSize expectedLabelSize = [myString sizeWithFont:alabel.font 
                                    constrainedToSize:maximumLabelSize 
                                        lineBreakMode:alabel.lineBreakMode]; 

    //adjust the label the the new height.
    CGRect newFrame = alabel.frame;
    newFrame.size.height = expectedLabelSize.height+40;
    newFrame.size.width = expectedLabelSize.width+40;

    alabel.frame = newFrame;
    labelResizableView.frame = newFrame;

    labelResizableView.contentView = alabel;
    labelResizableView.delegate = self;
    [self.view addSubview:labelResizableView];

} 
```

当用户点击标签时

```
- (void)labelTap:(UITapGestureRecognizer *)tapGesture {
    ChildViewController *childViewController = [[ChildViewController alloc] initWithNibName:@"ChildViewController" bundle:[NSBundle mainBundle]];

    [self presentModalViewController:childViewController animated:NO];

} 
```

当用户单击完成按钮时，在 ChildViewCoontroller 中

```
-(IBAction)doneBtn:(id)sender
{

    [adelegate updateLabel];

     [self dismissModalViewControllerAnimated:NO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:54:25.860

```
#import <UIKit/UIKit.h>
#import "childViewController.h"

@interface ParentViewController : UIViewController<UserResizableViewDelegate,ViewControllerDelegate>

@property (strong, nonatomic) ChildViewController *childViewController;

@end

@implementation ParentViewController

- (void)viewDidLoad
{
    self.childViewController = [[ChildViewController alloc] init];
    childViewController.delegate=self;   //here it show error that ChildViewController does not have property delegate
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:46:59.503

您没有设置 的委托属性`ChildViewController`。您将其设置为`ParentViewController`. 但是`ParentViewController`没有那个属性。`ChildViewController's`设置对象的委托属性`ParentViewController`

```
ChildViewController.delegate=self 
```

# c#-4.0 - 实际上我创建帐户应用程序我去显示打开amt

> ID：13454048
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:41:38.093
> 
> 标签：c#-4.0, variables

> 块引用

wpf 应用程序实际上我创建帐户应用程序我去显示打开 amt。打开 amt 等于 dr_amt-cr_amt 。dr_amt 和 cr_amt 是我可以做的 amt 表的列名

```
enter code here 
```

双a，b，c；SqlConnection con = new SqlConnection("my conn");

SqlCommand cmd = new SqlCommand("select sum(dr_amt),sum(cr_amt) from amt where id='"+tex1.Text+"'", con);

```
 con.Open();

        SqlDataReader dr = cmd.ExecuteReader();

        while (dr.Read())

        {
            a = Convert.ToDouble(dr[0]);
            b = Convert.ToDouble(dr[1]);
        }
        c = a - b;

        textBox3.Text =Convert.ToString( c); 
```

> 块引用

在构建此代码时，我看到错误使用未分配的局部变量'a'和'b'我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:00:39.020

因为如果 dr.Read() 为空，则不会分配 a 和 b。

```
double a = 0;
double b = 0; 
```

如果读者返回多行 c 将仅基于最后一行。

# c# - Windows 服务等待处理停止请求的最长时间以及如何请求额外时间

> ID：13454054
> 
> 赞同：22
> 
> 时间：2012-11-19T12:41:59.407
> 
> 标签：c#, .net, windows-services

我用 c# 编写了一个处理大量数据的 Windows 服务。当我们停止它尝试某个时间 20/30 秒然后抛出异常。

我想在 OnStop 事件中实现 ServiceBase.RequestAdditionalTime()。

我想知道 Windows 服务引发异常的确切超时时间，以便我可以在它之前请求额外的时间。

我搜索但没有找到这个默认的停止超时值。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-19T12:06:35.373

我编写了以下代码来实现它。

```
protected override void OnStop()
{
  int timeout = 10000;
  var task = Task.Factory.StartNew(() => MyTask());
  while (!task.Wait(timeout))
  {
      RequestAdditionalTime(timeout);
  }
} 
```

上面的代码启动了一个与主线程并行的任务（任务立即开始运行），下一行是每 10 秒检查一次任务是否完成，如果没有完成，它会请求额外的 10 秒并继续检查直到任务得到完全的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-04-28T19:35:05.623

# 操作系统重启的不同设置

尽管许多人提到了`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\WaitToKillServiceTimeout`注册表项，但根据[Microsoft 的这篇“服务控制处理程序”文章，](https://msdn.microsoft.com/en-us/library/windows/desktop/ms685149(v=vs.85).aspx)该注册表项**仅控制****在 Windows 本身关闭或重新启动时**服务可以关闭的最长时间：

> <...> 为了防止服务停止关闭，服务控制器的等待时间是有限制的。如果通过服务管理单元关闭服务，则限制为 125 秒。如果操作系统正在重新启动，则时间限制在 `WaitToKillServiceTimeout`值 <...>中指定

**如果 Windows 未处于重新启动或关闭过程中**，则 Windows 等待服务关闭的**默认**时间为 30 秒。但是，应用程序可以请求额外的时间，总共最多 125 秒（所有请求的总和）。

在 Windows Server 2003 及更高版本上，**可以**通过`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\ServicesPipeTimeout`注册表项更改此默认超时，如[Microsoft 支持文章](https://support.microsoft.com/en-us/help/922918/a-service-does-not-start-and-events-7000-and-7011-are-logged-in-window)（和[此 ServerFault 问题](https://serverfault.com/questions/622432/how-do-i-increase-windows-service-startup-timeout)）中所述。目前尚不清楚这是否适用于 Windows 7/8/10，因为该文章仅提及服务器版本。

**如果已**在计算机上启动重新启动/关闭，则`WaitToKillServiceTimeout`注册表项值（如果存在）指定 Windows 允许应用程序允许的最长时间，覆盖操作系统默认值。

据推测，这是为了使应用程序不能任意延迟关闭超出默认值（或管理员通过`WaitToKillServiceTimeout`注册表项指定的值）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T12:52:31.830

它在子项的注册表中设置：

```
 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control 
```

带字符串值`WaitToKillServiceTimeout`。如果未定义，则默认为 20000 (ms)。在我的机器上，它似乎设置为 12000 (12s)。我从来没有碰过它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:47:15.150

默认情况下，我相信它是 12000 毫秒，要更改它，您需要访问注册表 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\WaitToKillServiceTimeout 并更改值

但是你可以定义你自己的超时时间如果你想启动它或停止它在这里编程你定义你自己的启动时间

```
TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);
service.Start();
service.WaitForStatus(ServiceControllerStatus.Running, timeout); 
```

在这里你定义你自己的停止时间

```
 TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);
 service.Stop();
 service.WaitForStatus(ServiceControllerStatus.Stopped, timeout); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T13:05:49.063

只需始终执行`RequestAdditionalTime`, 您希望服务需要关闭的最长时间。早于预期完成并不是错误。

# iphone - 同时检测 2 次触摸

> ID：13454056
> 
> 赞同：0
> 
> 时间：2012-11-19T12:42:03.367
> 
> 标签：iphone, ios, xcode, ipad, ios6

每个人！我需要同时检测不同图像视图上的 2 次触摸。因此，当用户同时触摸两个图像视图时，我需要启动计时器。并在触摸结束时停止计时器。图像视图在屏幕上移动。当我使用一个图像视图时没有问题。你有什么想法吗？

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)
    for (UITouch *touch2 in allTouches)

    {
        CGPoint location = [touch locationInView:touch.view];
        CGPoint location2 = [touch2 locationInView:touch2.view];

        if ([touchArea2.layer.presentationLayer hitTest:location2]) {
             touchArea2.image = [UIImage imageNamed:@"TouchAreaTouched"];
        }
        if ([touchArea.layer.presentationLayer hitTest:location]) {
           touchArea.image = [UIImage imageNamed:@"TouchAreaTouched"];

            timerTouch = 10;
            touchTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0) target:self selector:@selector(randomVoid) userInfo:nil repeats:YES];
        } else if (![touchArea.layer.presentationLayer hitTest:location]){
            [touchTimer invalidate];
            touchTimer = nil;
        } }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)
        for (UITouch *touch2 in allTouches)   {

            CGPoint location = [touch locationInView:touch.view];
            CGPoint location2 = [touch2 locationInView:touch2.view];

            if (![touchArea.layer.presentationLayer hitTest:location]){
                touchArea2.image = [UIImage imageNamed:@"TouchArea"];
                touchArea.image = [UIImage imageNamed:@"TouchArea"];
                [touchTimer invalidate];
                touchTimer = nil;
            }
        }

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    touchArea.image = [UIImage imageNamed:@"TouchArea"];
    [touchTimer invalidate];
} 
```

谢谢你的帮助））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:13:06.740

你可能想看看`UIGestureRecognizerDelegate`然后方法：

```
gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:55:51.987

试试这个 ：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
  UITouch *touch = [touches anyObject];
      if ([touch view] == firstimage    ) { // Do Something}
      if ([touch view] == secondimage    ) { // Do Something}
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:20:38.233

我对这个问题想了很多，我找到了解决方法。这是我的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)
        for (UITouch *touch2 in allTouches)

    {
        CGPoint location = [touch locationInView:touch.view];
        CGPoint location2 = [touch2 locationInView:touch2.view];

        if ([touchArea2.layer.presentationLayer hitTest:location]) {
            touchArea2.image = [UIImage imageNamed:@"TouchAreaTouched"];

        }

        if ([touchArea.layer.presentationLayer hitTest:location]) {
           touchArea.image = [UIImage imageNamed:@"TouchAreaTouched"];
            if ([touchArea2.layer.presentationLayer hitTest:location2]) {
                touchArea2.image = [UIImage imageNamed:@"TouchAreaTouched"];
                            timerTouch = 10;
            touchTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0) target:self selector:@selector(randomVoid) userInfo:nil repeats:YES];
            } }}
    }

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)

          {
            CGPoint location = [touch locationInView:touch.view];
              if (![touchArea.layer.presentationLayer hitTest:location]&&![touchArea2.layer.presentationLayer hitTest:location]) {
                  touchArea.image = [UIImage imageNamed:@"TouchArea"];
                  touchArea2.image = [UIImage imageNamed:@"TouchArea"];
                  [touchTimer invalidate];
              }

                 }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    touchArea.image = [UIImage imageNamed:@"TouchArea"];
    touchArea2.image = [UIImage imageNamed:@"TouchArea"];

    [touchTimer invalidate];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:41:05.103

```
 UIView * view = [[UIView alloc] init];
    UITapGestureRecognizer * tap = nil;
    tap.numberOfTouchesRequired = 2;
    tap.delegate = self;
    [view addGestureRecognizer:tap];
}
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{

}
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

然后您识别两次触摸的位置，并决定您要做什么；

# liferay - 静态内容文件扩展名

> ID：13454058
> 
> 赞同：0
> 
> 时间：2012-11-19T12:42:07.923
> 
> 标签：liferay

我无法从 liferay 的静态内容加载 xml 文件。我得到`HTTP 404`。是否在某处配置了允许的文件扩展名？Liferay 版本是 5.2。

# java - 如何实现自定义异常？

> ID：13454066
> 
> 赞同：1
> 
> 时间：2012-11-19T12:42:37.270
> 
> 标签：java, eclipse, exception

如果未达到销售目标，这是我打印消息的加班例外。

```
public class OverTimeException extends Exception {

        int salesTarget;
        public OverTimeException(int s) {
            salesTarget = s;
        }
        String myPrint()
        {

            return "exception caught because sales target is " + salesTarget; 

        }
    } 
```

这是我想在 salesTarget 方法中使用异常的 Clerk 类。我的问题是如何将异常实现到 salesTarget 方法中？谢谢

```
public class Clerk extends Admin implements ClerkInterface {

    final double payRate = 13.00;
    final int salesTargetNum = 46;

    //Member variables
    private double unitSold;

    //Constructor
    public Clerk(String inName, String inId, double inHoursWorked,
            double intkPay, double inAdmin_quota,double inUnitSold) {
        super(inName, inId, inHoursWorked, intkPay, inAdmin_quota);

        setUnitSold(inUnitSold);

    }

    //setUnitsSold method
    private void setUnitSold(double inUnitSold) {
        unitSold = inUnitSold;

    }

    //getUnitsSold
    public double getUnitsSold(){

        return unitSold;
    }

    //toString method
    public String toString()
    {
        return " " + super.toString() + "Admin Quota " + getAdmin_quota() + "Units Sold" + getUnitsSold();

    }

    //method to confirm sales targets are made from ClerkInterface.
    public void salesTarget() {

        if(salesTargetNum >= unitSold){

            System.out.println("Clerk has not meet sales target");
        }
        else
        {
            System.out.println("Clerk has meet sales target");
        }

    }

    }//end Clerk 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:44:43.763

你想抛出异常的地方，只需做

```
throw new OverTimeException(salesTargetNum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:46:53.327

我强烈建议您覆盖类中的*所有*构造函数`Exception`。

```
import java.lang.Exception;
import java.lang.String;
import java.lang.Throwable;

public class OvertimeException extends Exception {
    /**
     * Constructs a new exception with <code>null</code> as its detail message.
     * The cause is not initialized, and may subsequently be initialized by a
     * call to {@link #initCause}.
     */
    public OvertimeException() {
        super();    //To change body of overridden methods use File | Settings | File Templates.
    }

    /**
     * Constructs a new exception with the specified cause and a detail
     * message of <tt>(cause==null ? null : cause.toString())</tt> (which
     * typically contains the class and detail message of <tt>cause</tt>).
     * This constructor is useful for exceptions that are little more than
     * wrappers for other throwables (for example, {@link
     * java.security.PrivilegedActionException}).
     * @param cause the cause (which is saved for later retrieval by the
     *              {@link #getCause()} method).  (A <tt>null</tt> value is
     *              permitted, and indicates that the cause is nonexistent or
     *              unknown.)
     * @since 1.4
     */
    public OvertimeException(Throwable cause) {
        super(cause);    //To change body of overridden methods use File | Settings | File Templates.
    }

    /**
     * Constructs a new exception with the specified detail message.  The
     * cause is not initialized, and may subsequently be initialized by
     * a call to {@link #initCause}.
     * @param message the detail message. The detail message is saved for
     *                later retrieval by the {@link #getMessage()} method.
     */
    public OvertimeException(String message) {
        super(message);    //To change body of overridden methods use File | Settings | File Templates.
    }

    /**
     * Constructs a new exception with the specified detail message and
     * cause.  <p>Note that the detail message associated with
     * <code>cause</code> is <i>not</i> automatically incorporated in
     * this exception's detail message.
     * @param message the detail message (which is saved for later retrieval
     *                by the {@link #getMessage()} method).
     * @param cause   the cause (which is saved for later retrieval by the
     *                {@link #getCause()} method).  (A <tt>null</tt> value is
     *                permitted, and indicates that the cause is nonexistent or
     *                unknown.)
     * @since 1.4
     */
    public OvertimeException(String message, Throwable cause) {
        super(message, cause);    //To change body of overridden methods use File | Settings | File Templates.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:45:20.270

```
if(salesTargetNum >= unitSold){
    throw new OverTimeException(salesTarget);         
} else {
    System.out.println("Clerk has meet sales target");
} 
```

请注意，您需要`toString`在 OverTimeException 类中使用方法，而不是拥有`toPrint`方法。

```
public class OverTimeException extends Exception {
    int salesTarget;
    public OverTimeException(int s) {
        salesTarget = s;
    } 
    public String toString() {  // Should be `toString`
        return "exception caught because sales target is " + salesTarget; 
    }
} 
```

此外，在`throws`您的`method declaration`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:45:02.533

你需要

1.  在方法签名中声明异常
2.  在需要时抛出该方法

例如

```
public void salesTarget() throws OvertimeException{
   ...
   throws new OvertimeException(s);
} 
```

请注意，您不需要在方法签名中声明[未经检查的异常。](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:45:38.397

采用

```
 public void salesTarget() throws OverTimeException {
    if(salesTargetNum >= unitSold){
        throw new OverTimeException(salesTargetNum);
    } else {
        System.out.println("Clerk has meet sales target");
    }
} 
```

你的异常应该这样声明。

```
public class OverTimeException extends Exception {

    public OvertimeException(int s){
        super("exception caught because sales target is " + s);
    }

} 
```

# git - git 显示不再在 github 上的分支

> ID：13454070
> 
> 赞同：4
> 
> 时间：2012-11-19T12:43:02.180
> 
> 标签：git, github, git-branch

跑完之后

```
git fetch 
```

我可以看到一些（不再）在 GitHub 上的分支（使用`git branch -a`）。为什么是这样？我该如何解决这个问题？在 git-cola 中尤其不舒服，在那里我可以看到所有这些枯枝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:46:06.823

如果从另一个开发人员/机器中删除了“死”分支，则需要修剪本地版本的存储库：

```
git remote prune origin 
```

# wpf - 试图访问另一个 ViewModel 中的 ViewModel 公共属性？

> ID：13454072
> 
> 赞同：0
> 
> 时间：2012-11-19T12:43:11.730
> 
> 标签：wpf, visual-studio-2010, c#-4.0, mvvm

我有 2 个视图模型：

1)

```
public class TaskTrayViewModel<T> : ViewModelBase where T : IBlotterRow, new()
{
} 
```

2)

```
public class BlotterCriteriaViewModel : ViewModelBase , IDataErrorInfo 
{ 
} 
```

我正在尝试`TaskTrayViewModel<T>`像这样访问 BlotterCriteriaViewModel 中的公共属性

```
public class BlotterCriteriaViewModel : ViewModelBase , IDataErrorInfo 
{
TaskTrayViewModel<IBlotterRow> _all;
    TaskTrayViewModel<IBlotterRow> All
    {
        get { return _all; }
        set { value = _all; }
    }
} 
```

执行上述操作时，出现以下错误：“DMS.Common.Interfaces.Blotter.IBlotterRow”必须是具有公共无参数构造函数的非抽象类型，才能将其用作泛型类型或方法中的参数“T” DMS.GUI.ViewModels.TaskTrayViewModel'。

请建议？如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:30:39.763

我不明白，你到底想做什么，但错误说（根据你的约束）要使用`TaskTrayViewModel<T>`泛型类型，你需要非抽象类型和公共无参数构造函数作为类型参数：

`public class MyBlotterRow : IBlotterRow { ... }`

然后你可以把你的财产声明写成`TaskTrayViewModel<MyBlotterRow> _all;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:49:21.867

去掉`new()`泛型约束，因为你不能用new创建接口，实际上你不能创建任何接口。请参阅[有关](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)约束的内容。您可能想使用`class`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:26:11.290

你不能有这样定义的属性：

```
TaskTrayViewModel<IBlotterRow> _all;
TaskTrayViewModel<IBlotterRow> All
{
    get { return _all; }
    set { value = _all; }
} 
```

因为您没有指定 IBlotterRow 的具体实现。如果您有`TaskTrayViewModel<T>`该类的具体实现，例如

`public class MyImpl: TaskTrayViewModel<MyClass>`

那么您可能会将其作为另一个类的属性。否则，您必须定义一个非泛型基类来`TaskTrayViewModel<T>`包含您需要的属性，或者使`BlotterCriteriaViewModel`泛型并使用其类型参数定义属性：

```
public class BlotterCriteriaViewModel<T> : ViewModelBase , IDataErrorInfo 
{
    TaskTrayViewModel<T> _all;
    TaskTrayViewModel<T> All
    {
       get { return _all; }
       set { value = _all; }
    }
} 
```

# actionscript-3 - 如何摆脱 flex 中的 #2038 错误

> ID：13454074
> 
> 赞同：0
> 
> 时间：2012-11-19T12:43:13.133
> 
> 标签：actionscript-3, apache-flex, flex4.5

这是我的代码：我创建了一个 flex 移动应用程序，我想在其中将 pdf 格式的文件保存在 ipad/iphone（任何 IOS 设备）中，但在保存该文件时，它会出现 #2038 错误。这是我的代码。

```
var file:File = File.desktopDirectory.resolvePath("indicators.pdf");

if (file.exists)
 file.deleteFile(); //delete it if exists
//create a file stream to be able to write the content of the file    
var fileStream:FileStream = new FileStream();

var popUpPage:AlertPage = new AlertPage();

try
{
 //open the file stream and set for Write
 fileStream.open(file, FileMode.WRITE);
 //writes the bytes
 fileStream.writeBytes(pdfBytes, 0, pdfBytes.length);
 //close the stream
 fileStream.close();

 PopUpManager.addPopUp(popUpPage,this,true);
 popUpPage.lblAlert.text = "indicator saved in pdf format = "+ file.nativePath;
 PopUpManager.centerPopUp(popUpPage);
 this.visible = false;
}
catch(err :Error)
{
 PopUpManager.addPopUp(popUpPage,this,true);
 popUpPage.lblAlert.text = err.message + "  "+ file.nativePath;
 PopUpManager.centerPopUp(popUpPage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T19:07:37.803

不确定权限如何在我们的桌面环境（Flex-Desktop 应用程序）中的 Android 上工作，我们能够通过修复文件夹权限来消除错误（授予用户读写修改权限）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:36:26.210

您无法保存到`desktopDirectory`任何移动设备上。您的应用只能保存到`applicationStorageDirectory`. 由于这个原因，你所拥有的每次都会出错。

作为一个简单的技巧，您应该这样做以允许两者。

```
private const isDesktop:Boolean = false;
private var baseDirectory:File = ( isDesktop ) ? File.desktopDirectory:File.applicationStorageDirectory;

//and to declare a file, do this
private var pdf:File = this.baseDirectory.resolvePath( 'blah.pdf' ); 
```

因此，您切换`isDesktop`属性以选择要使用的属性并相应地`baseDirectory`声明。然后，您只需从`baseDirectory`每次解析路径，而不是进行硬编码`applicationStorageDirectory`或`desktopDirectory`.

从长远来看，这种方法对于调试来说更加灵活。

# android - 如何从 BackupAgentHelper 中获取 PreferenceManager？

> ID：13454080
> 
> 赞同：1
> 
> 时间：2012-11-19T12:44:05.157
> 
> 标签：android, preferences

在我的 BackupAgentHelper 中，我需要知道标准首选项文件的名称。我认为“getPreferenceManager().getSharedPreferencesName()”是个好主意，但似乎我无法掌握上下文。

如何获取标准首选项文件的名称和/或 PreferenceManager 的方法？

```
public class MyBackupAgentHelper extends BackupAgentHelper {

    private static final String TAG_PREFERENCES = "preferences";

    @Override
    public void onCreate() {
        SharedPreferencesBackupHelper helper = new SharedPreferencesBackupHelper(this, this
                .getPreferenceManager().getSharedPreferencesName());
        addHelper(TAG_PREFERENCES, helper);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:45:56.067

API 缺乏简单的方法。我这样做是为了避免硬编码任何东西。

```
final public class BackupAgent extends BackupAgentHelper
{
    // A key to uniquely identify the set of backup data
    static final String PREFS_BACKUP_KEY = "prefs";

    public void onCreate()
    {
        String packageName = "???";
        try {
            // read current version information about this package
            Context context = getApplicationContext();
            PackageManager manager = context.getPackageManager();
            PackageInfo info = manager.getPackageInfo(context.getPackageName(), 0);
            packageName = info.packageName;

            // preference file name is <package_name>_preferences
            packageName += "_preferences";

            SharedPreferencesBackupHelper helper = 
                            new SharedPreferencesBackupHelper(this, packageName);
            addHelper(PREFS_BACKUP_KEY, helper);

        } catch (Exception e) {
                  e.printStackTrace();
        }   
    }
} 
```

# php - PHP中的安全文件下载，未经许可拒绝用户

> ID：13454083
> 
> 赞同：5
> 
> 时间：2012-11-19T12:44:14.237
> 
> 标签：php, file, download

我正在制作一个网站，您可以在其中购买虚拟积分文件，然后下载它们。我不想让用户在不购买的情况下下载文件，所以我必须隐藏它们。我将所有文件放在一个文件夹中，未经主机以外的任何人许可，问题是当有人购买文件并想要下载它时。

我决定制作一个文件获取器，它将检查用户的权限，然后打印出文件内容。到目前为止我的代码：

```
<?php
    require_once('content/requirements.php'); //mysql connections
    secure(1); //disconnect unlogged users

    if (!isset($_GET['id'])) //if no file id provided
        die();

    $fid=mysql_real_escape_string($_GET['id']); //file id

    $query="SELECT * FROM files WHERE user_id = "$_SESSION['user_id']." AND file_id = ".$id;

    $q=mysql_query($query);

    if (mysql_num_rows($q)!=1) //if no permission for file or multipe files returned
        die();

    $file=mysql_fetch_array($q); //file id
    $sub=mysql_fetch_array(mysql_query("SELECT * FROM sub WHERE id = ".$file['file_id'])); //payment id
?> 
```

现在，当我确定用户有权执行此操作时，phpScript 应该写入文件内容并发送适当的标题以让用户下载它。

如何逐字节读取文件并打印它以及我应该在 header() 中写入什么以使文件可下载（因此您不必复制粘贴其内容）。

也许这不是最好的方法，但这是我一段时间以来想到的最好的事情。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T12:51:25.560

来自[readfile php 文档](http://php.net/manual/en/function.readfile.php)

```
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T12:51:18.417

google上有很多脚本，下面是几个链接：

[http://www.tutorialchip.com/php-download-file-script](http://www.tutorialchip.com/php-download-file-script)

[http://www.webinfopedia.com/php-file-download-script.html](http://www.webinfopedia.com/php-file-download-script.html)

# php - 编辑在我的网站中显示价格的方式

> ID：13454085
> 
> 赞同：0
> 
> 时间：2012-11-19T12:44:26.067
> 
> 标签：php, joomla

我将要编辑代码以显示下一个可用月份而不是实际月份的价格，我被告知我需要编辑此代码，但我不知道如何...如果有人可以帮助我会理解它。

```
function get_property_price_for_display_in_lists($property_uid)
{
$MiniComponents =jomres_singleton_abstract::getInstance('mcHandler');
$mrConfig=getPropertySpecificSettings($property_uid);
set_showtime('property_uid',$property_uid);
$customTextObj =jomres_singleton_abstract::getInstance('custom_text');
$customTextObj->get_custom_text_for_property($property_uid);
$current_property_details =jomres_singleton_abstract::getInstance('basic_property_details');
$current_property_details->gather_data($property_uid);
$plugin_will_provide_lowest_price = false;
$MiniComponents->triggerEvent('07015',array('property_uid'=>$property_uid) ); // Optional
$mcOutput=$MiniComponents->getAllEventPointsData('07015');
if (count($mcOutput)>0)
    {
    foreach ($mcOutput as $key=>$val)
        {
        if ($val == true)
            {
            $plugin_will_provide_lowest_price = true;
            $controlling_plugin = $key;
            }
        }
    }

$multiplier = 1;
if (!isset($mrConfig['booking_form_daily_weekly_monthly'])) // This shouldn't be needed, as the setting is automatically pulled from jomres_config.php, but there's always one weird server...
    $mrConfig['booking_form_daily_weekly_monthly'] = "D";

switch ($mrConfig['booking_form_daily_weekly_monthly'])
    {
    case "D":
        $multiplier = 1;
        break;
    case "W":
        if ($mrConfig['tariffChargesStoredWeeklyYesNo'] != "1")
            $multiplier = 7;
        break;
    case "M":
        $multiplier = 30;
        break;
    }

$price = 0.00;
$output_lowest = false;
if ($plugin_will_provide_lowest_price)
    {
    $output_lowest = true;
    $plugin_price= $MiniComponents->specificEvent('07016',$controlling_plugin,array('property_uid'=>$property_uid));
    if (!is_null($plugin_price))
        {
        $pre_text = $plugin_price['PRE_TEXT'];
        $price =  $plugin_price['PRICE'];
        $post_text =  $plugin_price['POST_TEXT'];
        }
    }
else
    {
    $pricesFromArray=array();
    $searchDate = date("Y/m/d");
    if (isset($_REQUEST['arrivalDate']) && $_REQUEST['arrivalDate'] != "" )
        {
        $searchDate =   JSCalConvertInputDates(jomresGetParam( $_REQUEST, 'arrivalDate', "" ));
        }
    $query = "SELECT property_uid, roomrateperday FROM #__jomres_rates WHERE property_uid = ".(int)$property_uid." AND DATE_FORMAT('".$searchDate."', '%Y/%m/%d') BETWEEN DATE_FORMAT(`validfrom`, '%Y/%m/%d') AND DATE_FORMAT(`validto`, '%Y/%m/%d') AND roomrateperday > '0' ";
    $tariffList = doSelectSql($query);
    if (count($tariffList) > 0)
        {
        foreach ($tariffList as $t)
            {
            if ( !isset($pricesFromArray[$t->property_uid]) )
                $pricesFromArray[$t->property_uid]=$t->roomrateperday;
            elseif ( isset($pricesFromArray[$t->property_uid]) && $pricesFromArray[$t->property_uid] > $t->roomrateperday )
                $pricesFromArray[$t->property_uid]=$t->roomrateperday;
            }
        }
    if ($mrConfig['is_real_estate_listing']==0)
        {
        if (isset($pricesFromArray[$property_uid]))
            {
            if ($mrConfig['prices_inclusive']=="0")
                $price=output_price ($current_property_details->get_gross_accommodation_price($pricesFromArray[$property_uid],$property_uid) * $multiplier,"",true,true);
            else
                $price=output_price ($pricesFromArray[$property_uid] * $multiplier,"",true,true);

            if ($mrConfig['tariffChargesStoredWeeklyYesNo'] == "1" && $mrConfig['tariffmode'] == "1")
                $post_text = "&nbsp;".jr_gettext('_JOMRES_COM_MR_LISTTARIFF_ROOMRATEPERWEEK',_JOMRES_COM_MR_LISTTARIFF_ROOMRATEPERWEEK);
            else
                {
                if ($mrConfig['wholeday_booking'] == "1")
                    {
                    if ($mrConfig['perPersonPerNight']=="0" )
                        $post_text ="&nbsp;".jr_gettext('_JOMRES_FRONT_TARIFFS_PN_DAY_WHOLEDAY',_JOMRES_FRONT_TARIFFS_PN_DAY_WHOLEDAY);
                    else
                        $post_text ="&nbsp;".jr_gettext('_JOMRES_FRONT_TARIFFS_PPPN_DAY_WHOLEDAY',_JOMRES_FRONT_TARIFFS_PPPN_DAY_WHOLEDAY);
                    }
                else
                    {
                    switch ($mrConfig['booking_form_daily_weekly_monthly'])
                        {
                        case "D":
                            if ($mrConfig['wholeday_booking'] == "1")
                                $post_text =jr_gettext('_JOMRES_FRONT_TARIFFS_PN_DAY_WHOLEDAY',_JOMRES_FRONT_TARIFFS_PN_DAY_WHOLEDAY);
                            else
                                {
                                if ($mrConfig['perPersonPerNight']=="0" )
                                    $post_text ="&nbsp;".jr_gettext('_JOMRES_FRONT_TARIFFS_PN',_JOMRES_FRONT_TARIFFS_PN);
                                else
                                    $post_text ="&nbsp;".jr_gettext('_JOMRES_FRONT_TARIFFS_PPPN',_JOMRES_FRONT_TARIFFS_PPPN);
                                }
                            break;
                        case "W":
                            $post_text =jr_gettext('_JOMRES_BOOKINGFORM_PRICINGOUTPUT_WEEKLY',_JOMRES_BOOKINGFORM_PRICINGOUTPUT_WEEKLY);
                            break;
                        case "M":
                            $post_text =jr_gettext('_JOMRES_BOOKINGFORM_PRICINGOUTPUT_MONTHLY',_JOMRES_BOOKINGFORM_PRICINGOUTPUT_MONTHLY);
                            break;
                        }

                    }
                }
            $pre_text = jr_gettext('_JOMRES_TARIFFSFROM',_JOMRES_TARIFFSFROM,false,false);
            }
        else
            {
            $pre_text =jr_gettext('_JOMRES_COM_MR_EXTRA_PRICE',_JOMRES_COM_MR_EXTRA_PRICE);
            $price = output_price($current_property_details->real_estate_property_price,"",true,false);
            $post_text = '';
            }
        }
    else
        {
        $pre_text = jr_gettext('_JOMRES_COM_MR_EXTRA_PRICE',_JOMRES_COM_MR_EXTRA_PRICE,"",true,false);
        $price=output_price($current_property_details->real_estate_property_price);
        $post_text = '';
        }
    }
return array ( "PRE_TEXT"=>$pre_text,"PRICE"=>$price,"POST_TEXT"=>$post_text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:02:45.967

为什么这段代码很糟糕，为什么我不应该使用它？它来自 Jomres 预订系统，是的，开发人员告诉我要编辑这些行，为什么？代码是否难以理解和混淆，或者有很多快捷方式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:28:27.050

您需要修改的行是：

```
$searchDate = date("Y/m/d"); 
```

并在日期上加上一个月

```
$searchDate = date("Y/m/d") . " +1 month"; 
```

如果设置了到达日期，这将不起作用，但我想情况并非如此（一旦客户选择了日期，这将在预订期间发生）。

要回答您的第二组问题，代码很糟糕，原因如下：

*   嵌套 if 使其不可读，有 4 级嵌套 if 甚至包含几个 switch 语句......调试和维护是一场噩梦
*   对诸如此类的模糊调用

    $MiniComponents->triggerEvent('07015' $MiniComponents->specificEvent('07016'

绝对不是很不言自明。对象和方法应该是有意义的和文档化的。如果你打开 J07015...php 文件的代码（我不知道全名，应该在 core-minicomponents 文件夹中）你很可能会发现没有注释。你不想处理类似 $property->booking->getPrice() 的事情吗？

*   它不是使用 Joomla 框架，而是一个自定义框架（您需要研究它，但文档并没有真正的帮助，而且对于单个组件来说这是一项艰巨的任务）

*   应用程序架构完全混乱和混合。在 Joomla 中，我们认为 MVC 是理所当然的，在这里您可以看到一个不应该做的很好的示例：将应用程序逻辑与视图混合，您将看到输出字符串与数据库查询一起定义。

*   没有正式的命名约定：一些变量在不同的迷你组件之间更改名称，让我们更加困惑。

**为什么你不应该使用它**

你所做的每一个改变都可能破坏一些东西。由于没有分离，也没有可用的单元测试，所以很难理解我们的行为的含义。即我在属性详细信息页面中更改了一个迷你组件，却发现我因此破坏了属性列表页面......

编码将需要任何其他组件的 10 倍，因为这不是 Joomla！它只是一个在 Joomla 中流畅运行的独立产品！（但您也可以单独安装它！）

**你可以做些什么来减轻痛苦和降低风险**

*   使用代码版本控制，并仔细记录您所做的每一个更改。
*   在所有更改后测试所有功能，这将在几天后为您节省时间。
*   尝试创建自己的自定义插件（并将它们放在核心插件中），这可能是一种有效的方法来覆盖默认值，同时不会冒过多干扰项目其他部分的风险

**那你为什么要使用它？**

*（我正在为其他读者写这一段，否则我们都似乎完全不喜欢使用它）*

1.  它在功能、完整性（开发票的前端）、配置（您可以根据需要微调多少）和易用性方面是最好的。Jomres 胜过任何其他基于 joomla 的解决方案，我在 2012 年 6 月花了两周时间测试所有价格低于 2,000 美元的可用酒店解决方案
2.  该产品稳定且维护良好，为此付出了很多努力：6个月的更新日志花了我一个小时阅读。
3.  支持很快，尽管当问题太棘手时，您会得到“您需要更改一些代码”的答案，这意味着“jomres 不会这样做，所以这是您的问题”
4.  它已经存在了很长时间，并且有许多第三方扩展可用
5.  它不花费一条胳膊和一条腿。

确保在编写新代码之前将您的需求发送给支持人员，它们确实有大量的功能，但配置可能非常棘手。

# adfs2.0 - 在 adfs 和 fedlet federation 中面临的问题

> ID：13454088
> 
> 赞同：0
> 
> 时间：2012-11-19T12:44:29.947
> 
> 标签：adfs2.0, openam, federation

我也在尝试探索 fedlet + adfs federation。

我所拥有的是：

1.  安装在机器 A 上的 adfs 服务器。我还添加了 fedlet 作为依赖部分，但是当我输入回复方联合元数据 url 并单击测试 url 时，它向我抛出了异常： **读取联合元数据时发生错误。验证 url 或主机名是有效的联合元数据端点。** 但是我在依赖部分添加了fedlet的证书，并将算法设置为SHA-1。

2.  在机器 B 上完成了 openam 设置。在同一台机器上的 openam 和 tomcat 中添加了 adfs 证书。

3.  使用这个 openam 构建创建了一个 fedlet，并将 adfs 设置为我的托管身份提供程序，它安装在机器 A 上。这个生成的 fedlet 战争也部署在机器 B 上

怎么了：

1.  当我从机器 A 的浏览器访问 fedlet 链接时，它必须在单击第 1 行时进行链接，它会调用 adfs 并要求提供 adfs 登录凭据。

2.  一旦我输入凭据，它会将我重定向回 fedlet 应用程序，但是会引发以下异常：

**Http 状态 500 - 响应中的无效状态代码。**

如果有人可以帮助我解决此异常，我将不胜感激。

**更新：**

当我使用 firefox 的 saml tracer 插件解码发送到 fedlet 应用程序的响应时，我得到以下信息：

pVZpk6LKEv3%2BIt5%2F6Oj5SHSzimh0d0QBLqiobKJ8ecFSIsgmBbL8%2Bov2OK%2B7x5k39z6JcMlKT9bJU5WZL8iOo2yoQpSlCYIPkvj6%2BB%2BX4TjW8ZinPU3vn5g9yz05LMs8eSzDEIRjk9CDj%2F%2F%2B18OX1wbmKEiT10fqmbizLCFUQilBhZ0UnQ9BUk8k%2BUQROjEY9ohhr%2F9M0rR1548iREWQ2MUV%2B1AUGRrieP18ffA99CJYfP%2BwsywK3KvnHRzhwvASu8yTYWqjAA0TO4ZoWLhDDciLYbfvofvuNCwTlEE32AfQu8cluWVMT18fEeUyFAG5Pst6vR7L0LTrsjTLUHZv4PaJHuvZLNlzaOJe1uo4StDwKsPvd5blaZG6aXQH4%2B3d9HJNcf4O%2BXswGyGYX%2FP0dslol1Db26NnL43tIHl20%2Fj6G%2B%2BczoELEV7kJSpe8PcAt3AeGmqB3ylT5vA7Dw%2B9S9QBVlX1XNHPae7jFEEQODHAOx8PBf63x7f%2FcrihQE9K9unbZ3KXRcFO0qRTNQraq7IyLA6p9wAiP82D4hD%2FIiCJk8Ql4BOs3SeXZJJvjw%2F4HfgfDP4Q9xORHNlP6GCT96FVuIc5TFz4YKjS6%2BO3P7tYbz% 2FrewHTcztB%2BzSP0R2Hn5z%2BHg2YnGGUZtB7Qrds%2FMzon8X5ExmuqPj%2F4niJKwZ%2BVwz%2BiVL3VfqMu7GjEr55ZX9anpIN2bf6qoct96bqrszMOs92r9ddfnT%2BIjr%2BUfWPhxz%2F1Sn%2FdATfMXf2EqT0SJLI49QOGnqZm0WTJUpPTaaypiog27Pbs7tjTUFgGCsmZlFu2cfjckU006q%2FHkT7zelc78wGyQythpzobCYBNjuhY6GUROvaU2%2FPMP05e9R9ZtuPPMWWpVHsj%2Bt1eZhVcrPqp9i2EElWbQQqFARrMAl3PqUjESMYV9C1FOgL45zmlrW2R%2Bf%2BLmwXI08cGOo%2BwAesH6hj3%2B%2BdMNiGU7IsqNY%2FlHr37lq8OeZmNUkJ7KHAcDgZr0f2om8d0h5LMbXXXYOpv%2FHLw1JbgRmcmU5ixgfBXXBOnzvJRL4O%2Brs%2BNwbhVJm6XLOwkCILo%2FmZQ81JdzyIn4WDJ2VujCowckdBKWm2T58oAF5ff4jwIdcfhJjD5qLNrXr%2BvSp2k3LbIwaiXdi%2FOGeXZeFSePeXNgXfZEkS6C7BwLV9UEk88CXFoOK68sPVmBmDjCYtpwYKbMGS94%2BnwzGYDCqCBwoaAxHksnasZtVO3CiKOGp4Xh1ZujReZhbVy5zY9RcaT9sm09itX1pmr91tZ8UiXp4dHcBxRdRyOKpl0a3k1mDkkLevtvazTRZQPddBwvvLDQ9kXRqNR2ok%2BwYVJU4clVYDCmnqZU44y1dCL3KS5cGNiXJHDYqOHy%2BFX%2Fc%2BGgOwEoDCgcu64M%2B77yOQzeuUDHB9uuOqJZrI%2FcBuIW5PxxMu4bdYP%2FDS88KYZAZacO3By2miCEuVZ%2BtclRf0fn7Gp% 2BegpbE6JVZy6ykGia1U3m0AEBkL2yxoYiEYRInlSdV4Hr6ar4Kgql1sPGkt6kTvBxUTCyaIHCTRbdavV4W%2F25BrsivLTTEjJ0Wk4dZ0MyvXihVmmuLoaGVtNqmhRhHGnYxeaRqN6QasFFcZq54napYw51lTj8wskQsNKD0qYo9OuLD0CO1VFVfpdWSRM2LJl%2BRaBAvZ3x7yqXscTBJB5wbqZK7vnXPeugI3O%2BSM0RLmCizNnSjHa0WjS42khd7a7Z82JEpzODpHI9USKJfWdoGAjs7BLxRJBArgZUBMBO000SSHFpURL1QGAEx33hTe8nLYqpQYOw3XAjvsT%2FltVyfWerYJnUgtx2OJYXYn2VDPYh1L3FkaVGo4XxaZcqIaQwudrZqmLhpVOzecjgWBNGe5iRlJuDrYbojpwuGEHTlmBU%2FmhK4yaZq4Jh3QvfocZlufqAmy8Bel4YOVtFtSq3mCHTcoL3DnCBtSbR14sPgQQUmiNDs4JtDugT1OcnYc6GW1sAG5Ya2d56i67i3pNVaLE6ewgbeeDTQ585Vdj1tjyr60HCoiG4xpbWuCTeudU2NGoG6zoBFhn%2BoNEnrixfpxEk6aza4AKcoJlipdUQyTZJxYuTZL5%2Bqq6wuxztIZu41509d0k8a74hMP5Hqzma5PUcnbalkY11Lz9bLf6RV3ysUL%2Fr0Q3aasT1XrZnwf27WiM37slZ%2FsQurBh2uZ%2B%2F0siK7eXd86lV1fg%2FlPde3%2FAJWScze4ectuXRLXaTedN5%2B78Av%2BFf0H7y8cb4bb5N2ZLs9fJEpzODpHI9USKJfWdoGAjs7BLxRJBArgZUBMBO000SSHFpURL1QGAEx33hTe8nLYqpQYOw3XAjvsT%2FltVyfWerYJnUgtx2OJYXYn2VDPYh1L3FkaVGo4XxaZcqIaQwudrZqmLhpVOzecjgWBNGe5iRlJuDrYbojpwuGEHTlmBU%2FmhK4yaZq4Jh3QvfocZlufqAmy8Bel4YOVtFtSq3mCHTcoL3DnCBtSbR14sPgQQUmiNDs4JtDugT1OcnYc6GW1sAG5Ya2d56i67i3pNVaLE6ewgbeeDTQ585Vdj1tjyr60HCoiG4xpbWuCTeudU2NGoG6zoBFhn%2BoNEnrixfpxEk6aza4AKcoJlipdUQyTZJxYuTZL5%2Bqq6wuxztIZu41509d0k8a74hMP5Hqzma5PUcnbalkY11Lz9bLf6RV3ysUL%2Fr0Q3aasT1XrZnwf27WiM37slZ%2FsQurBh2uZ%2B%2F0siK7eXd86lV1fg%2FlPde3%2FAJWScze4ectuXRLXaTedN5%2B78Av%2BFf0H7y8cb4bb5N2ZLs9fJEpzODpHI9USKJfWdoGAjs7BLxRJBArgZUBMBO000SSHFpURL1QGAEx33hTe8nLYqpQYOw3XAjvsT%2FltVyfWerYJnUgtx2OJYXYn2VDPYh1L3FkaVGo4XxaZcqIaQwudrZqmLhpVOzecjgWBNGe5iRlJuDrYbojpwuGEHTlmBU%2FmhK4yaZq4Jh3QvfocZlufqAmy8Bel4YOVtFtSq3mCHTcoL3DnCBtSbR14sPgQQUmiNDs4JtDugT1OcnYc6GW1sAG5Ya2d56i67i3pNVaLE6ewgbeeDTQ585Vdj1tjyr60HCoiG4xpbWuCTeudU2NGoG6zoBFhn%2BoNEnrixfpxEk6aza4AKcoJlipdUQyTZJxYuTZL5%2Bqq6wuxztIZu41509d0k8a74hMP5Hqzma5PUcnbalkY11Lz9bLf6RV3ysUL%2Fr0Q3aasT1XrZnwf27WiM37slZ%2FsQurBh2uZ%2B%2F0siK7eXd86lV1fg%2FlPde3%2FAJWScze4ectuXRLXaTedN5%2B78Av%2BFf0H7y8cb4bb5N2ZLs9fyr60HCoiG4xpbWuCTeudU2NGoG6zoBFhn%2BoNEnrixfpxEk6aza4AKcoJlipdUQyTZJxYuTZL5%2Bqq6wuxztIZu41509d0k8a74hMP5Hqzma5PUcnbalkY11Lz9bLf6RV3ysUL%2Fr0Q3aasT1XrZnwf27WiM37slZ%2FsQurBh2uZ%2B%2F0siK7eXd86lV1fg%2FlPde3%2FAJWScze4ectuXRLXaTedN5%2B78Av%2BFf0H7y8cb4bb5N2ZLs9fyr60HCoiG4xpbWuCTeudU2NGoG6zoBFhn%2BoNEnrixfpxEk6aza4AKcoJlipdUQyTZJxYuTZL5%2Bqq6wuxztIZu41509d0k8a74hMP5Hqzma5PUcnbalkY11Lz9bLf6RV3ysUL%2Fr0Q3aasT1XrZnwf27WiM37slZ%2FsQurBh2uZ%2B%2F0siK7eXd86lV1fg%2FlPde3%2FAJWScze4ectuXRLXaTedN5%2B78Av%2BFf0H7y8cb4bb5N2ZLs9f

以上代码为编码形式，请解码。

因此，根据我的理解，异常是由于一些无效的 nameid 策略而出现的。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:54:01.023

“读取联合元数据时出错。”

您通常可以忽略这一点。我假设您的连接是https？

为什么你有一个 Fedlet 的证书？您是否尝试签署 AuthnResponse？

查看 ADFS 日志记录 -[如何为 Active Directory 联合身份验证服务 2.0 (AD FS 2.0) 启用调试日志记录](http://social.technet.microsoft.com/wiki/contents/articles/1407.how-to-enable-debug-logging-for-active-directory-federation-services-2-0-ad-fs-2-0.aspx)

在 fedlet 中设置登录 - 在 FederationConfig.properties 中：

```
#com.iplanet.services.debug.level=error
com.iplanet.services.debug.level=message 
```

查看 SAML 数据 - [ADFS：我想查看 SAML 数据](http://nzpcmad.blogspot.co.nz/2012/10/adfs-i-want-to-see-saml-data.html)

# c# - 在 SharePoint 中合并 PowerPoint 文件

> ID：13454094
> 
> 赞同：0
> 
> 时间：2012-11-19T12:44:46.903
> 
> 标签：c#, sharepoint, powerpoint

我想合并 2 个托管在 SharePoint 环境中的 PowerPoint 文件/幻灯片。它必须在服务器端完成。我还找到了一些解决方案，但它们都需要对我不可用的命名空间：

DocumentFormat.OpenXML // 必须安装在服务器上才能访问。不可能 :S Microsoft.Office.Interop.PowerPoint // 甚至 Office PP 也必须安装在服务器上，绝对不行。

有人知道另一个命名空间，它为我提供了合并两个 PowerPoint 幻灯片所需的功能？例如，在 SharePoint 中，您可以在浏览器中“查看”PPT 文件，甚至还有一个 sp 服务，但我没有找到任何信息如何联系它，也许可以对其进行合并。

感谢您提前提供任何帮助:)

最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:48:25.737

您遇到的问题是需要执行此“服务器端”。SharePoint 仅仅是存储，您应该能够使用允许您安装所需的 Office 文档操作工具并简单地从 SharePoint 服务器和 Web 服务读取文档的服务器。

即使是“服务器端”，您的代码也将包含以下步骤：

1.  下载ppt文件
2.  合并ppt文件
3.  将合并的文件上传到 SharePoint

# java - javadoc中的字符串内容

> ID：13454099
> 
> 赞同：4
> 
> 时间：2012-11-19T12:44:49.943
> 
> 标签：java, string, javadoc

我想知道，是否可以为公共字符串常量生成 javadoc 以生成包含其内容的 javadoc？例如对于字段：

```
public static final String MENU = "menu_2"; 
```

它会像这样生成javadoc：

```
 /**
  * value: menu_2
  */ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:50:31.473

可以直接在评论中引用：

```
/**
 * MENU static field whose value is: {@value #MENU}
 */
public static final String MENU = "menu_2"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:50:03.343

使用价值标签`/**value: {@value}*/`。有关 javadoc 标签，请参阅此链接：http: [//docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#javadoctags](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javadoc.html#javadoctags)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:49:51.820

不使用标准的 javadoc 工具。**编辑**我的立场得到纠正，谢谢@Aleksandr！

我也建议不要这样做。您应该使用 javadoc 向该字段添加上下文。例如，该字段是什么意思？不仅仅是写字段的值是什么。任何人都可以查看代码以找出该值。大多数 IDE 也可以为您检索它。在 Eclipse 中，将鼠标悬停在引用上时按住 SHIFT 键将为您提供声明。

# html - 右对齐上的CSS错误顺序

> ID：13454103
> 
> 赞同：0
> 
> 时间：2012-11-19T12:45:02.847
> 
> 标签：html, css

考虑遵循 HTML。我想将第一个`li`项目向左对齐，最后两个向右对齐。但是，将右对齐设置为最后两个会将中间`li`放在最右边，最右边`li`放在中间。我该如何解决这个订单？

**HTML：**

```
<ul>
    <li class="one">left</li>
    <li class="two">right</li>
    <li class="three">right last</li>
</ul> 
```

**CSS：**

```
ul{
    width: 100%;
    overflow: hidden;
}

ul li{
    float: left;
}

ul li.two,
ul li.three{
    float: right
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:49:36.730

你可以`display:inline-block`用来对齐 li，你可以`width`用来调整

```
​li{
   display:inline-block
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:49:22.833

这种行为是正确的，因为您开始将中间的 li 向右对齐，所以它是第一个被绘制到右侧的。然后最后一个跟随到右侧。

在使用“float”时，我不知道如何使用两个不同的 ul-tags。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:52:44.363

您在 中定义的样式中缺少逗号`"float: right"`。它应该是`"float:right;"`

尝试这个

```
ul{
    width: 100%;
    overflow: hidden;
}

ul li{
    float: right;
    display: block;
    clear: both;
}

ul li.one{
    float: left;
} 
```

让我知道问题是否仍然存在。

# c - 用 typedef 声明一个 void 参数列表是非标准的

> ID：13454105
> 
> 赞同：4
> 
> 时间：2012-11-19T12:45:07.993
> 
> 标签：c

我有一个代码片段（旧代码），其代码类似于以下内容：

```
typedef void SPECIAL_VOID;
int func (SPECIAL_VOID)
{
    .....
} 
```

GCC 会针对这段代码抛出以下警告：警告：#494-D：使用 typedef 声明 void 参数列表是非标准的

为什么 GCC 抱怨，为什么这是非标准的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T13:16:35.023

这在 C89 和 C99 之间发生了变化。

C89 有 (6.5.4.3)：

> 参数类型列表指定函数参数的类型，并且可以声明函数参数的标识符。[...] 作为列表中唯一项目的特殊情况`void`指定该函数没有参数。

在 C99 中，这更改为（6.7.5.3p10；在 C11 中为 6.7.6.3p10）：

> 作为列表中唯一项的类型未命名参数的特殊情况`void`指定该函数没有参数。

这有时被认为意味着在 C89 中，`void`在声明 0 参数函数时，只有文字标记（预处理之后）是可接受的，而在 C99 中允许使用 typedef。然而，这不是根据[缺陷报告 157](http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_157.html)标准的意图：

> 子条款 6.7.1 清楚地表明它是一个单一的参数，其类型`void`（与`void`关键字的使用相反）表明函数不接受参数。为清楚起见，应改写第 6.5.4.3 条，以强调重要的是类型`void`，而不是关键字`void`。

对于 C++，[缺陷 577](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#577)使 C++ 与 C99 保持一致；该决议不存在于 C++11 中，但存在于后标准草案 n3376 中，因此可以假定存在于该标准的下一版本中，并且可能存在于 C++11 的第一个 TC 中。由于显而易见的原因，typedef`void`不能依赖于模板参数。问题[G++ error: '<anonymous>' has incomplete type](https://stackoverflow.com/questions/9742135/g-error-anonymous-has-incomplete-type)与 g++ 讨论了这个问题，并表明 g++ 可能会暂时继续拒绝该代码。

# lyx - 如何缩进 LyX 列表之后的段落？

> ID：13454107
> 
> 赞同：17
> 
> 时间：2012-11-19T12:45:10.880
> 
> 标签：lyx

我正在用 LyX 写文档。我希望每个新段落都缩进，并且它确实发生在新部分/小节中或列表之后的所有段落旁​​边。有没有办法解决这个问题？

（对不起，如果这是一个非常基本的问题，我在任何地方都找不到答案）

这就是我得到的：

```
Subsection
first paragraph is not indent.
    second one is
    third one is 
    list:
 1\. something
 2\. something else
 again not indent. 
```

我希望它是：

```
Subsection
    first paragraph is indent.
    second one is
    third one is 
    list:
 1\. something
 2\. something else
    indent again! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-15T12:06:40.467

您可以在文档的任何位置插入 LaTeX 命令（ctrl+l 或 insert->TeX Code）。

只需将光标放在要强制缩进的行的开头，按 ctrl+l 并添加代码“\indent”。

# c# - 将本地 csv 文件的数据上传到 BigQuery 表的请求内容

> ID：13454110
> 
> 赞同：0
> 
> 时间：2012-11-19T12:45:19.990
> 
> 标签：c#, google-bigquery

实例化 HttpWebRequest 并设置属性值：-

```
 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("https://www.googleapis.com/upload/bigquery/v2/projects/776934660156/jobs");
    request.Method = "POST";
    request.ContentType = "multipart/related; boundary=xxx";
    request.Headers.Add("Authorization: Bearer " + strAccessToken);//Service Account Access token 
```

下面是 HttpWebRequest 对象的内容。当我通过此请求时，我收到错误 400 错误请求：-

```
--xxx
Content-Type: application/json; charset=UTF-8
{
"kind" : "bigquery#job" ,
"Id" : "testJob" ,
"configuration": {
"load": {
"destinationTable": {
"projectId": "776934660156",
"datasetId": "BMSTestDataset",
"tableId": "tblEvents"
},
"fieldDelimiter":"|", 
}
}
}
--xxx
Content-Type: application/octet-stream
ET00000102|MT|50|Hindi|Halla Bol|2008-01-11 00:00:00|0|2007-08-07 15:51:38.240000000|<Genre><code>DRAMA</code></Genre>|<Legends><Actor>83</Actor><Actor>2457</Actor><Actor>1639</Actor><Actor>1151</Actor><Actor>1717</Actor><Actor>1526</Actor><Director>1801</Director><Music>820</Music></Legends>
ET00000103|MT|50|Hindi|Kisse Pyaar Karoon|2009-02-27 00:00:00|0|2007-08-07 17:16:36.443000000|<Genre><code>DRAMA</code></Genre>|<Legends><Actor>228</Actor><Actor>46</Actor><Actor>2539</Actor><Actor>2415</Actor><Actor>44</Actor><Actor>2161</Actor><Actor>2100</Actor><Director>82</Director><Music>2624</Music></Legends>
--xxx-- 
```

我没有指定架构，因为该表已经存在于 BQ 数据集中。请帮帮我，我做了很多研究，但没有得到任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:56:52.587

一些东西：

首先，BigQuery 加载配置应如下所示（注意 Content-type 标头后的换行符：

```
--xxx
Content-Type: application/json; charset=UTF-8

{
  'configuration': {
    'load': {
      // Schema, only if necessary
      'schema': {
        'fields': [
          {'name':'f1', 'type':'STRING'},
          {'name':'f2', 'type':'INTEGER'}
        ]
      },
      'destinationTable': {
        'projectId': 'projectId',
        'datasetId': 'datasetId',
        'tableId': 'tableId'
      }
    }
  }
}
--xxx 
```

此外，如果您想设置作业 ID，请使用 jobReference.jobId 参数（请参阅 BigQuery API[加载配置文档）](https://developers.google.com/bigquery/docs/reference/v2/jobs#importing)。例子：

```
"jobReference": {
    "jobId": 'SOMESTRINGHERE'
} 
```

PS我认为使用随机边界字符串是一种很好的做法，例如：

```
var boundary = "------------------------" + DateTime.Now.Ticks; 
```

# meteor - 创建模型、订阅并将其数据发布到客户端（Meteor）的示例

> ID：13454113
> 
> 赞同：1
> 
> 时间：2012-11-19T12:45:27.663
> 
> 标签：meteor

我有 Rails 和 MVC 框架的背景，所以我不完全理解创建模型、发布数据并让用户订阅它的想法。

我一直在检查[Meteor 的文档](http://docs.meteor.com/)，但我仍然对某些事情感到困惑（例如，订阅和发布声明应该放在哪个文件中？模板声明应该放在哪个文件中？）

如果有人能给我一个可行的例子，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:17:19.547

最好的起点是 Meteor 自己的示例应用程序。[您可以从示例页面](http://meteor.com/examples/)预览它们（并获取有关如何在本地计算机上安装它们的说明）。

如果您想浏览一些代码，请查看他们的 Gitgub 存储库。[All Tomorrow's Party](https://github.com/meteor/meteor/tree/master/examples/parties)演示是一个相当全面的示例，它显示了用户身份验证、选择性发布、客户端和服务器代码等。

查看[排行榜演示](https://github.com/meteor/meteor/tree/master/examples/leaderboard)，了解一个非常简单的“hello world”类型示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:11:49.670

这是一个例子：

```
// Server publish the data
if(Meteor.isServer) {
  Meteor.publish("allUserData", function () {
    return Meteor.users.find();
  });
}

// Client subscribe the data
if(Meteor.isClient) {
  Meteor.subscribe('allUserData');
}

// Open bar, everybody can call all mongodb request
Meteor.users.allow({
  insert: function () {
    return true;
  },
  update: function () {
    return true;
  },
  remove: function () {
    return true;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T21:33:34.253

尝试：

```
meteor create --example parties 
```

并浏览代码。事情是当你这样做的时候：发布你返回的东西可以作为模型访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T04:19:13.990

这个问题似乎是最古老的，但只是为了保持良好的做法。

首先在`/lib`文件夹上创建一些`Collections.js`

并确保您删除 Autopublish Package 和不安全的。并在里面`Collection.js`放置下一个代码。

```
Example = new Mongo.Collection('Example');

    if(Meteor.isClient) {
     Meteor.subscribe('Example');
    } 
```

为什么在`lib`文件夹上？

因为 lib 目录中的文件将首先加载，所以我们确保我们在两边都有`Server/client`集合

现在在服务器端，我们制作发布功能。

```
 //Server.js
    Meteor.publish("Promociones", function () {
        return Example.find();
    }); 
```

我再次回答这个问题，因为我意识到我正在使用

```
Example = new Mongo.Collection('Example'); //on both server.js and client.js 
```

所以我认为这是一个很好的做法，也是对新手的一个很好的建议

# google-chrome - Chrome 扩展：让内容脚本工作

> ID：13454124
> 
> 赞同：0
> 
> 时间：2012-11-19T12:45:57.290
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我正在学习如何构建使用内容脚本的简单扩展。为此，我正在调整现有的示例扩展来获得一席之地——或者至少这是目标。

问题是，使用内容脚本的示例扩展似乎都不适合我。两个应该有效但无效的简单方法是：通过电子邮件发送此页面和 SandwichBar（直接链接到压缩扩展文件夹[http://developer.chrome.com/extensions/examples/api/infobars/sandwichbar.zip](http://developer.chrome.com/extensions/examples/api/infobars/sandwichbar.zip)）。

我在 Linux 机器上使用 Chrome 16.0.912.75。任何想法为什么会这样？冲突扩展或覆盖标志？我真的很感激任何建议。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:04:32.113

三明治栏不起作用，因为它使用信息栏实验性 API[清单版本 2](http://developer.chrome.com/extensions/tut_migration_to_manifest_v2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:54:18.650

可能是因为您使用的是非常旧的 Chrome 版本（至少在互联网时代）。他们不时更改 API，并且可能他们在此期间所做的某些事情破坏了 Chrome 16 中的内容脚本（例如从 更改`sendRequest`为`sendMessage`）。您的平台没有更新版本的 Chrome 吗？

# google-chrome-extension - chrome-extension：在后台页面加载数据

> ID：13454129
> 
> 赞同：0
> 
> 时间：2012-11-19T12:46:19.503
> 
> 标签：google-chrome-extension

我正在开发 chrome 扩展。用户在 options.html 中登录，然后应用程序将从 Web 数据库中加载大量数据。但是一旦用户关闭 options.html，加载过程将立即停止。我想在后台页面中进行加载工作，但我不会编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T05:23:37.507

您可以在[后台页面](http://developer.chrome.com/extensions/event_pages.html)中加载。

```
function load_data() { 
    // do something 
} 
```

然后在您的选项页面中调用它。

```
var app = chrome.extension.getBackgroundPage();
app.load_data(); 
```

那么您的加载过程将继续在后台运行。

# excel - 右键单击 withevents 适用于源 .xlsm 但不适用于 .xlam 插件

> ID：13454130
> 
> 赞同：2
> 
> 时间：2012-11-19T12:46:24.590
> 
> 标签：excel, vba, add-in, right-click

我已经制作了几个基于单元格值通过右键单击菜单按钮运行的宏。通常，如果我右键单击值为“XYZ”的单元格，菜单按钮将显示为“为 XYZ 运行宏”，然后执行一系列操作：显示几个用户表单、运行 SQL 查询、显示和格式化结果数据.

在原始 .xlsm 文件的“Thisworkbook”上，我有以下代码：

```
Public WithEvents mxlApp  As Application

Public WithEvents mxlSh  As Worksheet

Private Sub mxlApp_SheetBeforeRightClick(ByVal Sh As Object, ByVal Target As Range, Cancel As 
Boolean)

... (do stuff here) ...

End Sub

...

Private Sub Workbook_Open()

    Call AutoExec

End Sub

... 
```

在一个单独的模块上，我有以下函数用于设置我的事件处理程序

```
Public Sub AutoExec()

        Set mxlApp = Application

        Set ColectionOfMxlEventHandlers = New Collection

        ColectionOfMxlEventHandlers.Add mxlApp

        Debug.Print ThisWorkbook.Name & " Initialized"

End Sub 
```

问题：在原始的 .xlsm 文件上，代码运行良好：每次我右键单击符合特定条件的单元格时，都会得到“为 XYZ 运行宏”，一切都很好。

一旦我将文件保存为 .xlam 并将其加载为插件，代码将无法工作。

我一直在互联网上和这里到处寻找，无法弄清楚如何解决这个问题。

编辑：

按照 creamyegg 的建议修改代码后，这就是我所拥有的：

在类模块中`clsAppEvents`：

```
Private WithEvents mxlApp As Excel.Application

Private Sub Class_Initialize()

    Set mxlApp = Excel.Application

End Sub

Private Sub mxlApp_SheetBeforeRightClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)

Dim cBut As CommandBarButton

    On Error Resume Next

        Call CleanMenu

        If Len(Target.Value) = 8 Then

            MyId = Target.Value

            With Application

                Set cBut = .CommandBars("Cell").Controls.Add(Temporary:=True)

            End With

            With cBut

               .Caption = "Run SQL Query for " & MyId

               .Style = msoButtonCaption

               .FaceId = 2554

               .OnAction = "CallGenericQuery"

            End With

        End If

        With Application

                Set cBut = .CommandBars("Cell").Controls.Add(Temporary:=True)

        End With

        With cBut

           .Caption = "Columns_Select"

           .Style = msoButtonCaption

           .FaceId = 255

           .OnAction = "CallShowHide"

        End With

    On Error GoTo 0

End Sub 
```

在`Thisworkbook`课堂上我有

```
Public m_objMe As clsAppEvents

Private Sub Workbook_Open()

    Set m_objMe = New clsAppEvents

    Debug.Print ThisWorkbook.Name & " Initialized"

End Sub

Private Sub Workbook_BeforeClose(Cancel As Boolean)

    On Error Resume Next

           Call CleanMenu

    On Error GoTo 0

    Set m_objMe = Nothing

End Sub

Private Sub Workbook_Deactivate()

    Call CleanMenu

End Sub 
```

`MyId``CallShowHide`在包含和子的主模块中定义为公共`callGenericQuery`字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:02:28.980

这个问题听起来你`WithEvents`还在`ThisWorkbook`课堂上吗？您需要做的是创建一个新类，然后在`Workbook_Open()`您的加载项事件中实例化它的一个实例。例如：

新类 ( `clsAppEvents`)：

```
Private WithEvents mxlApp As Excel.Application

Private Sub Class_Initialize()
    Set mxlApp = Excel.Application
End Sub

Private Sub mxlApp_SheetBeforeRightClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)
...
End Sub 
```

插件`ThisWorkbook`类：

```
Private m_objMe As clsAppEvents

Private Sub Workbook_Open()
    Set m_objMe = New clsAppEvents
End Sub

Private Sub WorkbookBeforeClose(Cancel As Boolean)
    Set m_objMe = Nothing
End Sub 
```

# sql-server - 枢轴查询返回多个重复组？

> ID：13454132
> 
> 赞同：3
> 
> 时间：2012-11-19T12:46:27.347
> 
> 标签：sql-server, sql-server-2008, tsql, pivot, unpivot

我正在尝试获取具有多个重复组的结果集（将插入到表中）。这是一个脚本，显示了我开始使用的数据的一个非常简化的版本：

```
CREATE TABLE #Aggregate(
    StoreKey int ,
    NumberOfDaysBack int ,
    ThisYearGrossTransactions int ,
    ThisYearGrossPrice money ,
    LastYearGrossTransactions int ,
    LastYearGrossPrice money 
) 
GO
INSERT #Aggregate VALUES (10134, 7, 198, 71324.3600, 248, 95889.6089)
INSERT #Aggregate VALUES (10131, 7, 9, 1299.8300, 3, 662.5700)
INSERT #Aggregate VALUES (10132, 7, 57, 11029.5300, 56, 6848.3800)
INSERT #Aggregate VALUES (10130, 7, 6, 429.3100, 15, 1606.1100)
INSERT #Aggregate VALUES (10134, 28, 815, 339315.9265, 822, 342834.2365)
INSERT #Aggregate VALUES (10131, 28, 29, 5725.4900, 8, 1938.4100)
INSERT #Aggregate VALUES (10132, 28, 262, 42892.5476, 269, 37229.2600)
INSERT #Aggregate VALUES (10130, 28, 62, 6427.7072, 93, 13428.0000) 
```

然后我想为每组 NumberOfDaysBack 显示单独的数据集，如下所示：

```
StoreKey    ThisYearLast7GrossTransactions ThisYearLast7GrossPrice LastYearLast7GrossTransactions LastYearLast7GrossPrice ThisYearLast28GrossTransactions ThisYearLast28GrossPrice LastYearLast28GrossTransactions LastYearLast28GrossPrice
----------- ------------------------------ ----------------------- ------------------------------ ----------------------- ------------------------------- ------------------------ ------------------------------- ------------------------
10130       6                              429.31                  15                             1606.11                 62                              6427.7072                93                              13428.00
10131       9                              1299.83                 3                              662.57                  29                              5725.49                  8                               1938.41
10132       57                             11029.53                56                             6848.38                 262                             42892.5476               269                             37229.26
10134       198                            71324.36                248                            95889.6089              815                             339315.9265              822                             342834.2365 
```

我能够通过此查询获得上述结果集。

```
-- (using this Common Table expression as a shortcut, there's actually a dimention table
;with Store as (select distinct StoreKey from #Aggregate)
Select
    Store.StoreKey
    ,ThisYearLast7GrossTransactions = DaysBack7.ThisYearGrossTransactions
    ,ThisYearLast7GrossPrice = DaysBack7.ThisYearGrossPrice
    ,LastYearLast7GrossTransactions = DaysBack7.LastYearGrossTransactions
    ,LastYearLast7GrossPrice = DaysBack7.LastYearGrossPrice
    ,ThisYearLast28GrossTransactions = DaysBack28.ThisYearGrossTransactions
    ,ThisYearLast28GrossPrice = DaysBack28.ThisYearGrossPrice
    ,LastYearLast28GrossTransactions = DaysBack28.LastYearGrossTransactions
    ,LastYearLast28GrossPrice = DaysBack28.LastYearGrossPrice    
from Store 
    join #Aggregate DaysBack7
        on Store .StoreKey = DaysBack7.StoreKey
        and DaysBack7 .NumberOfDaysBack = 7
    join #Aggregate DaysBack28
        on Store .StoreKey = DaysBack28.StoreKey
        and DaysBack28 .NumberOfDaysBack = 28
order by Store.StoreKey 
```

但是，由于我的实际数据集要复杂得多，有更多 NumberOfDaysBack 和更多可能更改的指标，我希望能够使用数据透视语句来执行此操作，而无需显式命名每个字段。

这可能吗？感谢您的任何想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:43:49.960

`UNPIVOT`您可以同时使用和获得您想要的结果`PIVOT`：

```
select *
from
(
  select storekey, 
    value, col +'Last'+ cast(numberofdaysback as varchar(20)) + 'Days' new_col
  from
  (
    select storekey,
      numberofdaysback,
      cast(ThisYearGrossTransactions as decimal(20,5)) ThisYearGrossTransactions,
      cast(ThisYearGrossPrice as decimal(20,5)) ThisYearGrossPrice,
      cast(LastYearGrossTransactions as decimal(20,5)) LastYearGrossTransactions,
      cast(LastYearGrossPrice as decimal(20,5)) LastYearGrossPrice    
    from aggregate
  ) un
  unpivot
  (
    value
    for col in (ThisYearGrossTransactions, ThisYearGrossPrice,
                LastYearGrossTransactions, LastYearGrossPrice)
  ) unpiv
) src
pivot
(
  sum(value)
  for new_col in ([ThisYearGrossTransactionsLast7Days], [ThisYearGrossPriceLast7Days],
                  [LastYearGrossTransactionsLast7Days], [LastYearGrossPriceLast7Days],
                  [ThisYearGrossTransactionsLast28Days], [ThisYearGrossPriceLast28Days],
                  [LastYearGrossTransactionsLast28Days], [LastYearGrossPriceLast28Days])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b274d/10)

获取、 和 中的`UNPIVOT`列值`ThisYearGrossTransactions`，并将它们转换为具有多行的单列。`ThisYearGrossPrice``LastYearGrossTransactions``LastYearGrossPrice`

```
select storekey, 
  value, col +'Last'+ cast(numberofdaysback as varchar(20)) + 'Days' new_col
from
(
  select storekey,
    numberofdaysback,
    cast(ThisYearGrossTransactions as decimal(20,5)) ThisYearGrossTransactions,
    cast(ThisYearGrossPrice as decimal(20,5)) ThisYearGrossPrice,
    cast(LastYearGrossTransactions as decimal(20,5)) LastYearGrossTransactions,
    cast(LastYearGrossPrice as decimal(20,5)) LastYearGrossPrice    
  from aggregate
) un
unpivot
(
  value
  for col in (ThisYearGrossTransactions, ThisYearGrossPrice,
              LastYearGrossTransactions, LastYearGrossPrice)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b274d)

的要求`UNPIVOT`是所有数据类型必须相同，因此您需要应用其中一个`cast`或`convert`任何值。然后对数据，我通过添加到每条记录来`PIVOT`创建新的列名。`numberofdaysback`这些是在`PIVOT`查询部分中使用的值。

最终结果是：

```
| STOREKEY | THISYEARGROSSTRANSACTIONSLAST7DAYS | THISYEARGROSSPRICELAST7DAYS | LASTYEARGROSSTRANSACTIONSLAST7DAYS | LASTYEARGROSSPRICELAST7DAYS | THISYEARGROSSTRANSACTIONSLAST28DAYS | THISYEARGROSSPRICELAST28DAYS | LASTYEARGROSSTRANSACTIONSLAST28DAYS | LASTYEARGROSSPRICELAST28DAYS |
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|    10130 |                                  6 |                      429.31 |                                 15 |                     1606.11 |                                  62 |                    6427.7072 |                                  93 |                        13428 |
|    10131 |                                  9 |                     1299.83 |                                  3 |                      662.57 |                                  29 |                      5725.49 |                                   8 |                      1938.41 |
|    10132 |                                 57 |                    11029.53 |                                 56 |                     6848.38 |                                 262 |                   42892.5476 |                                 269 |                     37229.26 |
|    10134 |                                198 |                    71324.36 |                                248 |                  95889.6089 |                                 815 |                  339315.9265 |                                 822 |                  342834.2365 | 
```

如果您有已知数量的值，则上面的静态版本效果很好，`NumberOfDaysBack`但如果您有未知数量的值，那么您可以使用它的动态版本：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('Aggregate') and
               C.name not in ('StoreKey', 'NumberOfDaysBack')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name +'Last'
                         + cast(a.NumberOfDaysBack as varchar(10)) +'Days')
                    from Aggregate a
                    cross apply sys.columns  C
                   where C.object_id = object_id('Aggregate') and
                         C.name not in ('StoreKey', 'NumberOfDaysBack')
                   group by c.name, a.NumberOfDaysBack
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select storekey, 
            value, col +''Last''+ cast(numberofdaysback as varchar(20)) + ''Days'' new_col
        from 
        (
          select storekey,
            numberofdaysback,
            cast(ThisYearGrossTransactions as decimal(20,5)) ThisYearGrossTransactions,
            cast(ThisYearGrossPrice as decimal(20,5)) ThisYearGrossPrice,
            cast(LastYearGrossTransactions as decimal(20,5)) LastYearGrossTransactions,
            cast(LastYearGrossPrice as decimal(20,5)) LastYearGrossPrice    
          from aggregate
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        sum(value)
        for new_col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b274d/18)

两个查询的结果将相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:21:05.703

您想要达到的结果可能是使用 PIVOT 的结果：

```
SELECT StoreKey, 
[1] AS ThisYearGrossTransactionsFor7Days, 
[2] AS ThisYearGrossPriceFor7Days, 
[3] AS LastYearGrossTransactionsFor7Days, 
[4] AS LastYearGrossPriceFor7Days, 
[5] AS ThisYearGrossTransactionsFor28Days, 
[6] AS ThisYearGrossPriceFor28Days, 
[7] AS LastYearGrossTransactionsFor28Days, 
[8] AS LastYearGrossPriceFor28Days
FROM
(SELECT StoreKey,ThisYearGrossTransactions AS Value, 1 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 7
UNION ALL 
SELECT StoreKey,ThisYearGrossPrice AS Value, 2 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 7
UNION ALL 
SELECT StoreKey,LastYearGrossTransactions AS Value, 3 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 7
UNION ALL 
SELECT StoreKey,LastYearGrossPrice AS Value, 4 AS TypeOfAggreagate
FROM #Aggregate WHERE NumberOfDaysBack = 7
UNION ALL
SELECT StoreKey,ThisYearGrossTransactions AS Value, 5 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 28
UNION ALL 
SELECT StoreKey,ThisYearGrossPrice AS Value, 6 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 28
UNION ALL 
SELECT StoreKey,LastYearGrossTransactions AS Value, 7 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 28
UNION ALL 
SELECT StoreKey,LastYearGrossPrice AS Value, 8 AS TypeOfAggregate
FROM #Aggregate WHERE NumberOfDaysBack = 28) p
PIVOT(
SUM(Value)
FOR TypeOfAggregate IN ([1], [2], [3], [4], [5], [6], [7], [8])
) AS pvt
ORDER BY StoreKey 
```

为此，如您所见，仍然需要将 转换`#Aggregate`为不同的格式，并“键入”值（TypeOfAggregate）。

但为此，您可以编写一个`Dynamic PIVOT`. [这是 StackOwerflow 上关于它的一个线程](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

# java - 调用一个类并显示结果

> ID：13454136
> 
> 赞同：0
> 
> 时间：2012-11-19T12:46:30.690
> 
> 标签：java, android, eclipse, android-layout, android-intent

我是 android eclipse 的新手，我创建了一个类来查找最大数，如下所示

```
public class find_max_alg {
 public static void main(String[] args) {

 int data[] = {4,6,-5,5,8};

    int largest=data[0];
 for(int x=0; x<data.length; x++){
 if(data[x]>largest){
 largest = data[x];
 } 
```

我需要从android中的一个按钮调用这个类，并在按钮下的显示文件中显示结果，任何人都可以帮助我或者告诉我从哪里开始。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:50:16.603

你不需要为此上课。在按钮所在的同一个 Activity 中将其创建为函数。

如果您想从多个活动中访问它，您需要在单独的类中创建一个静态方法。在 Android 中不需要 Main。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:37:10.570

首先创建这个活动。

```
package com.test;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn_cal = (Button) findViewById(R.id.btn_cal);
        btn_cal.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                int result = MyCalculations.find_max_alg();
                Toast.makeText(getApplicationContext(), ""+result, Toast.LENGTH_LONG).show();
            }
        });

    }

} 
```

然后，为同一个包创建名为“MyCalculations”的类。

```
package com.test;

public class MyCalculations {

    public static int find_max_alg() {
        int data[] = { 4, 6, -5, 5, 8 };

        int largest = data[0];
        for (int x = 0; x < data.length; x++) {
            if (data[x] > largest) {
                largest = data[x];
            }
        }
        return largest;
    }

} 
```

这将完成您的所有工作。单击按钮后，您将在吐司消息中获得最大值。

谢谢。

# c - 根据一个键合并排序

> ID：13454139
> 
> 赞同：-2
> 
> 时间：2012-11-19T12:46:43.653
> 
> 标签：c

在这个程序中，它就像一个书店，有价格、相关性、星级和ID等信息，程序需要根据价格（从最低到最高）对列表进行排序。程序只需要实现一个归并排序（排序会带一个compare_on_price参数，所以会从低到高列出价格），然后Interface调用排序在Interface函数中，最后在main函数中调用界面。

物品清单是这样的

```
Stars   Price   Relv    ID
4.5     12.49   7.9      1
5        7.99   7.6      2
2       16.99   6.2      3
2.5     15.49   9.1      4
3.5     20.99   6        5
1        9.99   8        6
1.5     13.99   1        7
5        8.49   8.3      8
3.5     10.49   5.2      9 
```

排序后，价格应从低到高列出。到目前为止的错误：
`part1.c:117:20: error: expected expression before ',' token`
`part1.c:117:20: warning: passing argument 1 of 'mergesort' makes pointer from integer without a cast`
`part1.c:74:6: note: expected 'int *' but argument is of type 'int'`
`part1.c:117:20: warning: passing argument 4 of 'mergesort' makes pointer from integer without a cast`

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

FILE *fp;

typedef struct book{
  double rating;
  double price;
  double relevance;
  int ID;
}B;

B *list;

int read_file(char* infile, int N)
{
  int c;
  if((fp=fopen(infile, "rb")))
    {
      fscanf(fp, "%*s\t%*s\t%*s\t%*s\n");
      c=0;
      while((!feof(fp))&&(c<N))
{
  fscanf(fp, "%lf\t%lf\t%lf\t%d\n", &list[c].rating,  &list[c].price, &list[c].relevance, &list[c].ID);   
  c++;
}
  fclose(fp);      
}
  else
{
  fprintf(stderr,"%s did not open. Exiting.\n",infile);
  exit(-1);
}
  return(c);
}

int comp_on_rating(const void *a, const void *b)
{
  if ((*(B *)a).rating < (*(B *)b).rating)
    return -1;
  else if ((*(B *)a).rating > (*(B *)b).rating)
    return 1;
  else
    return 0;  
}

int comp_on_relev(const void *a, const void *b)
{

  if ((*(B *)a).relevance < (*(B *)b).relevance)
    return -1;
  else if ((*(B *)a).relevance > (*(B *)b).relevance)
    return 1;
  else
    return 0;  
}

int comp_on_price(const void *a, const void *b)
{

  if ((*(B *)a).price < (*(B *)b).price)
    return 1;
  else if ((*(B *)a).price > (*(B *)b).price)
    return -1;
  else
    return 0;  
}

/* Stable sorting method: if it keeps elements with equal keys in he smae
relative order as they were in te input. */
void mergesort(int a[],int low, int high, int(*compar)(const void *, const void *))  
{  

 int i = 0;
 int length = high - low + 1;
 int pivot  = 0;
 int merge1 = 0;
 int merge2 = 0;
 int working[length];

 if(low == high)
  return;

 pivot  = (low + high) / 2;

 mergesort(a, low, pivot,compar );
 mergesort(a, pivot + 1, high,compar);

 for(i = 0; i < length; i++)
  working[i] = a[low + i];

 merge1 = 0;
 merge2 = pivot - low + 1;

 for(i = 0; i < length; i++) {
  if(merge2 <= high - low)
   if(merge1 <= pivot - low)
    if(working[merge1] > working[merge2])
     a[i + low] = working[merge2++];
    else
     a[i + low] = working[merge1++];
   else
    a[i + low] = working[merge2++];
  else
   a[i + low] = working[merge1++];
 }

} //end function.  

void user_interface(int N)
{

  // For Part 1 this function calls the sort function to sort on Price only
 mergesort(N,0,,N-1, comp_on_price);

}

void print_results(int N)
{
  int i;
  if((fp=fopen("top20.txt","w")))
    {
  for(i=N-1;i>=N-20;i--)
{

  printf("%g %g %g %d\n", list[i].rating, list[i].price, list[i].relevance, list[i].ID);
  fprintf(fp, "%g %g %g %d\n", list[i].rating, list[i].price, list[i].relevance, list[i].ID);

}
  fclose(fp);
    }
  else
    {
  fprintf(stderr,"Trouble opening output file top20.txt\n");
  exit(-1);
}

}

int main(int argc, char *argv[])
{
  int N;

  if(argc!=3)
    {
  fprintf(stderr, "./exec <input_size> <filename>\n");
  exit(-1);
}

  /* top 20 for example */
  N=atoi(argv[1]);

  list = (B *)malloc(N*sizeof(B));

  /*read the file into the n variable*/
  N=read_file(argv[2], N);

  user_interface(N);

  print_results(N);

  return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:02:55.950

1.

```
mergesort(N,0,,N-1, comp_on_price);
            ^
          Extra , in there... 
```

1.  void mergesort(int a[],int low, int high, int(*compar)(const void *, const void *)) ^ ^ ^ ^ array int int 函数指针

你的来电：

```
 mergesort(N,0,,N-1, comp_on_price);
           ^ ^   ^         ^
          int int int     function name, 
                           a function point is an address of your function 
```

# php - 从fancybox iframe 表单中更新数据库

> ID：13454141
> 
> 赞同：1
> 
> 时间：2012-11-19T12:46:47.007
> 
> 标签：php, mysql, fancybox

我正在尝试编写代码，您可以在其中通过fancybox iframe 中的表单更新数据库的内容

即使没有显示错误，我的代码似乎也不起作用。数据库没有更新

这是我的代码

editschool.php（这是我的fancybox iframe 的内容）

```
 <?php
    $temp = mysql_query("SELECT * from tertiary_school where tschool_id = $_GET[tschool_id]");
    $temp = mysql_fetch_array($temp);
    ?>
    <center>
    <form class="form-inline" method = 'post' enctype="multipart/form-data">
    <table>
    <tr>
    <td width="40%">
    Edit School Name:
    </td>
    <td>
    <input name = "tschool_name" type="text" class="input-xlarge" id = "tschool_name" value="<?php echo $temp[tschool_name]; ?>"><button type="submit" value = "submit" name = "submit" class="btn btn-primary" onclick="event.preventDefault(); parent.$.fancybox.close();">Save Changes</button>
    </td>
    </tr>
    </table>
    </form>
    </center>
    <?php
    if(isset($_POST['submit'])) 
        {
            $tschool_name = $_POST['tschool_name'];
            $tschool_id = $_GET['tschool_id'];

            mysql_query("UPDATE tertiary_school SET tschool_name=$tschool_name WHERE tschool_id=$tschool_id") or die(mysql_error()); 
        }
    ?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:53:08.657

表单发布数据时没有 $_GET['schoolid'] ..

您可以将表单操作属性更新为

```
<form action="editschool.php?schoolid=<?php echo $_GET['schoolid'];?>" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:58:15.497

尝试下面的代码并发布输出。

```
<?php
    $temp = mysql_query("SELECT * from tertiary_school where tschool_id = $_GET[tschool_id]");
    $temp = mysql_fetch_array($temp);
    ?>
    <center>
    <form class="form-inline" method = 'post' enctype="multipart/form-data">
    <table>
    <tr>
    <td width="40%">
    Edit School Name:
    </td>
    <td>
<input type="hidden" name="tschool_id" value="<?php echo $_GET[tschool_id];?>" />
    <input name = "tschool_name" type="text" class="input-xlarge" id = "tschool_name" value="<?php echo $temp[tschool_name]; ?>"><button type="submit" value = "submit" name = "submit" class="btn btn-primary" onclick="event.preventDefault(); parent.$.fancybox.close();">Save Changes</button>
    </td>
    </tr>
    </table>
    </form>
    </center> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:59:11.627

```
$query = "UPDATE `tertiary_school` SET `tschool_name`='$tschool_name' WHERE `tschool_id`='$tschool_id'";
mysql_query($query) or die(mysql_error()); 
```

# iphone - How can I display a splash screen for a longer period of time than the default time on an iPad?

> ID：13454144
> 
> 赞同：1
> 
> 时间：2012-11-19T12:46:57.890
> 
> 标签：iphone, ipad, ios5, uiimageview, splash-screen

I have try so many way in display the splash screen for a longer period of time but i did't get perfect solution,please help me out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:49:44.313

in `AppDelegate.m` file just define splashView as a `UIImageView` and then in `didFinishLaunchingWithOptions` method write this type of code...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    splashView = [[UIImageView alloc] initWithFrame:iphoneFrame];
    splashView.image = [UIImage imageNamed:@"yourImageName"];
    [self.window addSubview:splashView];
    [self performSelector:@selector(loadViewIphone) withObject:nil afterDelay:4.0];// define time which you want..
    [self.window makeKeyAndVisible];
    return YES;
} 
```

and in loadViewIphone method just remove this splashView like bellow

```
-(void)loadViewIphone 
{
    [splashView removeFromSuperview];
    self.window.rootViewController = self.tabBarController;// or any viewontroller instead of tabbarController
    [self.window makeKeyAndVisible];

    // this bellow code is used for transactionaly swap splashscreen to our viewcontroller..
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"];

} 
```

# build - Wince 6.0的内核构建顺序如何

> ID：13454146
> 
> 赞同：1
> 
> 时间：2012-11-19T12:47:06.087
> 
> 标签：build, kernel, windows-ce

我已经更改了 winceos\COREOS\nk\kernel.. 中的文件“handle.c”，需要根据将更改放入 nk.bin 的 core.dll 进行构建

是否有任何构建顺序可以避免构建孔解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:05:17.380

首先，让我说，在您所做的地方进行更改是一个坏主意。切勿直接更改公共或私有树。如果 Microsoft 发布了更改该代码的 QFE，当您应用 QFE 时，您的更改将被覆盖且不会发出警告。始终克隆代码并更改克隆。

至于在不必重建整个项目的情况下进行内核更改，答案是否定的，你不能。代码中的更改可能会更改地址，并且大量操作系统在构建过程中使用这些地址进行修复。在进行这样的更改后，您必须重新构建整个事物（例如，与您可以单独构建而无需重新构建整个操作系统的驱动程序相反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:32:46.520

感谢您的回答。

我现在通过自己的尝试发现**是的，可以**通过在 PRIVATE 下对“winceos”文件夹执行“build & sysgen”来实现。

内核代码的更改执行只是添加一个 RETAILMSG 来查看 HANDLE 计数。文件handle.c 创建句柄表并给出句柄。有许多命令创建/分配句柄。我真的不知道，内核通过哪个句柄请求调用handle.c(??)，但是对于一些开发人员来说，能够操纵它“可以”有用吗？

但总而言之，执行“build & sysgen”+“MakeRunTimeImage”会使内核上的更改有效。我是在“PRIVATE/winceos”上做的，但也许也可以通过在本地做更多的事情来做，例如在 PRIVATE/winceos/COREOS/nk/kernel 文件夹上。我没试过；）

# angularjs - angular.js 中来自 $resource 的不可读数据

> ID：13454148
> 
> 赞同：0
> 
> 时间：2012-11-19T12:47:11.827
> 
> 标签：angularjs

我正在构建的角度应用程序有一个非常奇怪的问题。每当我从如下定义的资源中加载一些数据时（我可以构建的最简单的示例），我都会返回一些数据，我可以将其用于数据绑定（例如 ng-repeat='message in messages' 或作为 {{message.id}} ) 但是我永远无法通过将其作为数组或对象访问来从 javascript 中读取它（取决于我使用 get({id:myId}) 还是 query()）。

迭代它只会给我 $get、$query、$save 等键......但没有实际数据。

```
app.factory('Message', ['$resource', function($resource) {
    return $resource('MY_URL/messages/:id', {id: '@id'});
}]);

app.service('messageService', ['$rootScope', 'Message', function($rootScope, Message) {
    var messages = Message.query();
    var selectedMessage = null;

    var service = {};

    service.get = function(id) {
                    // Problem A (see below for details)
        if (arguments.length === 1) return Message.get({id: id});
        else return messages;
    };

var MenuCtrl = function($scope, Project, messageService, otherService) {
    $scope.projects = Project.query();
    $scope.messages = messageService.get();

    // Problem B (details below)
}; 
```

在问题 A 中，我希望能够从已经获取的集合中返回单个元素，但是我需要一些方法来处理在数据准备好之前发生的调用。

在问题 B 我想处理一些获取的数据并将结果传递给“otherService”但是我需要一种方法来延迟这个直到数据准备好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:40:50.957

我只在单元测试中看到过这个问题，解决它的方法是“刷新”模拟 $httpBackend。

根据[API 文档](http://docs.angularjs.org/api/ngMock.%24httpBackend)：

> 生产中使用的 $httpBackend 总是以异步方式响应请求。如果我们在单元测试中保留这种行为，我们将不得不创建异步单元测试，这很难编写、遵循和维护。同时测试模拟，不能同步响应，因为这会改变被测代码的执行。出于这个原因，模拟 $httpBackend 有一个 flush() 方法，它允许测试显式地刷新挂起的请求，从而保留后端的异步 api，同时允许测试同步执行。

这是一个带有一些上下文的示例：

```
// define a resource within a service
angular.module('app.services', ['ngResource'])
  .factory('Message', function ($resource) {
    var url = ...
      , params = ...
      , actions = ...;

    return $resource(url, params, actions);
  }

// Query the resource in a controller
function MessagesCtrl ($scope, $routeParams, Message) {
  $scope.messages = Message.query();
}

// unit test with a mocked backend
describe('MessagesCtrl', function() {
  var scope, ctrl, $httpBackend, messages;

  beforeEach(inject(function (_$httpBackend_, $rootScope, $controller) {
    $httpBackend = _$httpBackend_;
    scope = $rootScope.$new();

    messages = [
      {
        id: '1',
        text: 'foo',
      }, {
        id: '2',
        text: 'foo',
      }
    ]

    $httpBackend.expectGET('/api/messages').respond(messages);
    ctrl = $controller('MessagesCtrl', {$scope: scope});
  }));

  it('should get a list of messages', function () {

    // THE NEXT LINE WILL SOLVE THE PROBLEM
    $httpBackend.flush();

    expect(scope.message).toEqualData(message);
  });
}); 
```

# android - 短信发送应用程序/待定意图

> ID：13454150
> 
> 赞同：1
> 
> 时间：2012-11-19T12:47:25.567
> 
> 标签：android, android-intent, android-pendingintent

我有从 Android 发送 SMS 的应用程序。
**代码 1**

```
 SmsManager sms = SmsManager.getDefault();
    Intent intent = new Intent("smsSend");
    intent.putExtra("id", id);
    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    sms.sendTextMessage(phoneNo, null, messageText, null, null);
    SendDbUserDao.getInstance(SmsSendIntentService.this).updateSendSMSStatus(intent.getExtras().get(Constants.id).toString(), Constants.sendStatus); 
```

**代码 2**：

```
SmsManager sms = SmsManager.getDefault();
    Intent intent = new Intent("smsSend");
    intent.putExtra("id", id);
    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    if(messageText.isEmpty()){
        SendDbUserDao.getInstance(SmsSendIntentService.this).updateSendSMSStatus(id, Constants.sendStatus);
    }else {
        System.out.println("SmsSendIntentService.sendSms()" + id); 
        sms.sendTextMessage(phoneNo, null, messageText, sentPI, null);
        } 
```

监听类

```
public class SmsSendListener extends BroadcastReceiver {

String tag="SmsSendListener";

@Override
public void onReceive(Context context, Intent intent) {
    switch (getResultCode()) {
    case Activity.RESULT_OK:
        if (intent.getExtras() != null) {
            Log.i("Message Send Confirmation", intent.getExtras().get(Constants.id).toString());
            SendDbUserDao.getInstance(context).updateSendSMSStatus(intent.getExtras().get(Constants.id).toString(), Constants.sendStatus);
        }
        break;
    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
        Toast.makeText(context,"SMS Sending Error :Generic failure" ,Toast.LENGTH_SHORT).show();
        break;
    case SmsManager.RESULT_ERROR_NO_SERVICE:
        Toast.makeText(context,"SMS Sending Error :No service" ,Toast.LENGTH_SHORT).show();
        break;
    case SmsManager.RESULT_ERROR_NULL_PDU:
        Toast.makeText(context,"SMS Sending Error :Null PDU" ,Toast.LENGTH_SHORT).show();
        break;
    case SmsManager.RESULT_ERROR_RADIO_OFF:
        Toast.makeText(context,"SMS Sending Error :Radio off" ,Toast.LENGTH_SHORT).show();
        break;
    }
} 
```

问题1：逻辑上代码1和代码2相同？？
问题 2：两者的输出非常不同 代码 1 只向每个号码发送一次短信，但代码 2 发送多次！为什么 ？

# c - 有人知道为什么编译成功吗？

> ID：13454158
> 
> 赞同：8
> 
> 时间：2012-11-19T12:47:55.613
> 
> 标签：c

任何人都知道为什么[这](http://ideone.com/8wOORD)会在 C 中成功编译？

```
int main(){
     display();
   return 0;
 } 

 void display(){
     printf("Why am I compiling successfully?");
 } 
```

我认为当没有提供声明时 C 假设`extern int Function_name(arg1,arg2,...){}.`因此这应该会给出一个错误，但是它正在工作！我知道 Ideone 正在压制警告，但我的问题是为什么它没有给出直接错误？（但是在 C++ 中这是直接错误）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T12:52:11.160

**在编译器中调高警告级别，**您应该会收到 2 个警告，

`display`未声明，`int`假定

和

`display`重新声明

**编辑：**

旧版本的 C（C99 之前）并不真正关心返回类型或参数类型。您可以说这是 K&R 遗产的一部分。例如，如果您没有明确指定参数类型，编译器根本不会检查它们。

C++ 更严格，IMO 是一件好事。当我用 C 编码时，我总是提供声明并指定参数列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T12:53:34.110

它正在编译，因为 C 使用许多默认值来向后兼容。在 K&R C 中，您无法指定函数原型，因此编译器只会假设您在调用函数时知道自己在做什么。

后来（至少是 ANSI C，但甚至可能在 C99 中），C 真的没有办法区分

```
void display(void);
void display(); 
```

所以空声明也必须被接受。

这就是为什么您`display()`无需先定义就可以调用的原因。

`printf()`很相似。如果您忘记了，您将收到链接器错误，`-lc`但从编译器的角度来看，代码“足够好”。

一旦您启用编译器必须提供的所有警告，这种情况就会发生变化，并且当您禁用 K&C 兼容性或启用严格的 ANSI 检查时，它将因错误而失败。

[这就是为什么在“如何使用任何编程语言射中自己的脚](http://www.thealmightyguru.com/Humor/Docs/ShootYourselfInTheFoot.html)”之类的列表中，“C”经常被列为“你射中自己的脚” 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T13:13:29.137

这取决于您的 Cx (C89, C90, C99,...)

对于函数返回值，在 C99 之前明确规定，如果没有可见的函数声明，则翻译器提供一个。这些隐式声明默认返回类型为 int

[来自C 标准](http://www.coding-guidelines.com/cbook/cbook1_0b.pdf)的理由（6.2.5 第 506 页）

> 在 C90 之前，没有函数原型。开发人员希望能够交换具有相同整数类型的有符号和无符号版本的参数。如果函数定义中的参数类型具有不同的符号，则必须强制转换参数，这被视为与 C 的简单类型检查系统背道而驰，并且有点侵入性。原型的引入并没有完全消除论点可互换性的问题。省略号表示对 1590 省略号一无所知，不提供预期参数类型的信息。类似地，对于函数返回值，在 C99 之前明确规定，如果没有可见的函数声明，则翻译器提供一个。这些隐式声明默认返回类型为 int 。如果实际函数碰巧返回类型 unsigned int ，那么这样的默认声明可能会返回意外结果。许多开发人员对函数声明的态度很随意。我们其他人不得不忍受委员会不想破坏他们编写的所有源代码的后果。函数返回值的可互换性现在是一个争论点，因为 C99 要求函数声明在调用点可见（不再提供默认声明）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:57:12.677

它可能确实如此（假设您编写了这样的声明），但是由于您没有传递参数，因此它可以正常工作。就像你声明`int main()`它应该在哪里一样`int main(int argc, char *argv[])`。

因此，如果您尝试传递一些参数（与默认参数不同），`main`然后使用它们`display`可能会失败。

顺便说一句，对我来说它可以编译，但会产生警告：

```
$ gcc z.c
z.c:8:6: warning: conflicting types for ‘display’ [enabled by default]
z.c:4:5: note: previous implicit declaration of ‘display’ was here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:54:45.333

当我使用 gcc 编译时，我会收到有关重新声明 的警告`display`，正如您所期望的那样。

你收到警告了吗？

它可能会“运行”，因为 C 不会破坏函数名称（如 C++）。所以链接器寻找一个符号“显示”并找到一个。链接器使用该地址运行`display`。我希望结果不会像您一直期望的那样。

# c# - 为什么调用 DataGridView.Columns.Clear() 后 Columns 不保持隐藏状态？

> ID：13454163
> 
> 赞同：4
> 
> 时间：2012-11-19T12:48:18.110
> 
> 标签：c#, .net, datagridview, visibility, datagridviewcolumn

我在[SO](https://stackoverflow.com/search?q=datagridview+columns+visible)上看到了很多关于列的奇怪行为及其可见性的帖子，特别是在刷新网格和动态构建列表中的列时，但还没有找到令人满意的解决方案。

经过一番挖掘，我几乎可以肯定这个问题是由于使用了该`DataGridView.Columns.Clear()`方法。

到目前为止，我还没有弄清楚为什么，但是当我动态构建我的 DataGridView 列时删除 Clear() 方法会阻止隐藏列的出现，但我不明白为什么这会产生任何影响？当然，如果您清除 Columns 集合并用于`DataGridView.Columns.Add()`开始添加新的集合，代码如下；

```
dataGridView1.Columns.Clear(); // This is the offending method!!

dataGridView1.AutoGenerateColumns = false;
dataGridView1.ShowEditingIcon = false;
dataGridView1.RowHeadersVisible = false;

DataGridViewTextBoxColumn col = new DataGridViewTextBoxColumn();
col.DataPropertyName = "ID";
col.HeaderText = "ID";
col.Visible = false; // Notice the visibility of this column...
dataGridView1.Columns.Add(col);

... // Code is repeated for other columns in the collection 
```

我看不出有什么问题，但如果`dataGridView1.Columns.Clear();`包含在开头，我的隐藏列变得可见，这肯定是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-03T09:07:04.820

我能够重现该问题。`Clear`方法调用很好，您可以一一删除列，问题仍然存在。“冒犯”的电话令人惊讶`Add`：

```
col.Visible = false; // Notice the visibility of this column...
if (col.Visible)
{
   // Just to be sure. Never get here.
}
dataGridView1.Columns.Add(col);
if (col.Visible)
{
   // Surprise! We are here.
} 
```

**为什么会出现这种行为？**

这绝对是一个错误。仅当满足以下所有条件时才会发生此**问题**：

1.  `DataGridView`处于绑定模式，即已`DataSource`设置。数据源类型无关紧要。
2.  `Columns`集合为空
3.  `Add`使用具有的列调用方法`Visible = false`

在这种情况下，代码会遇到一个内部类`DataGridViewDataConnection`方法`MatchCurrencyManagerPosition`。看看[源代码](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/DataGridViewDataConnection.cs,8cd709952d1eda78)，尤其是

```
// Treat case where columnIndex == -1\. We change the visibility of the first column. 
```

注释和该注释之后的代码块。

**如何避免它**

回顾一下，这仅在数据绑定模式下发生，并且仅适用于第一个添加的列（如果它设置为隐藏）。

所以有几种方法可以解决这个问题：

1.  重新填充列时确保网格未处于绑定模式

    ```
    var dataSource = dataGridView.DataSource;
    dataGridView.DataSource = null;
    // Repopulate columns
    //...
    dataGridView.DataSource = dataSource; 
    ```

2.  不要使用[`Add`](https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumncollection.add(v=vs.110).aspx)方法。创建所有列并将它们保存在变量或临时列表中，最后使用[`AddRange`](https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumncollection.addrange(v=vs.110).aspx)没有这种效果的方法。

3.  不要`Visible = false`提前设置。创建并添加所有列，然后隐藏所需的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T14:13:23.593

这是因为数据表`DefaultView`被直接设置为 gridview 的数据源。

我们应该将 datasource 属性设置为，`DefaultView.ToTable()`因为每当数据表被清除或重置时，它都会清除元数据，从而丢失网格的可见性信息。

现在这真的是无法确定为什么重置数据表信息会影响`DataGridViewColumn`的可见性。

# python - os.walk 没有隐藏文件夹

> ID：13454164
> 
> 赞同：47
> 
> 时间：2012-11-19T12:48:23.633
> 
> 标签：python, linux, os.walk

我需要列出文件夹内包含目录路径的所有文件。我尝试使用`os.walk`，这显然是完美的解决方案。

但是，它也列出了隐藏的文件夹和文件。我希望我的应用程序不列出任何隐藏的文件夹或文件。是否有任何标志可以用来使其不产生任何隐藏文件？

跨平台对我来说并不是很重要，如果它只适用于 linux 就可以了（.* 模式）

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-19T12:54:02.693

不，没有选项可以`os.walk()`跳过这些。您需要自己这样做（这很容易）：

```
for root, dirs, files in os.walk(path):
    files = [f for f in files if not f[0] == '.']
    dirs[:] = [d for d in dirs if not d[0] == '.']
    # use files and dirs 
```

注意`dirs[:] =`切片分配；`os.walk`递归遍历 中列出的子目录`dirs`。通过将 的*元素*替换为`dirs`满足条件的元素（例如，名称不以 开头的目录`.`），`os.walk()`将不会访问不满足条件的目录。

这仅在您将`topdown`关键字参数保留为`True`, 的[文档中`os.walk()`](http://docs.python.org/2/library/os.html#os.walk)才有效：

> 当`topdown`is`True`时，调用者可以就地修改 dirnames 列表（可能使用`del`或切片赋值），并且`walk()`只会递归到名称保留在*dirnames*中的子目录；这可以用来修剪搜索，强制执行特定的访问顺序，甚至可以在调用者再次`walk()`恢复之前通知调用者创建或重命名的目录`walk()`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-11T15:24:15.340

我意识到这个问题没有被问到，但我有一个类似的问题，我想排除隐藏文件和以 开头的文件`__`，特别是`__pycache__`目录。我提出这个问题是因为我试图弄清楚为什么我的列表理解没有达到我的预期。我没有用`dirnames[:]`.

我创建了一个我想排除的前缀列表并修改了目录名，如下所示：

```
 exclude_prefixes = ('__', '.')  # exclusion prefixes
    for dirpath, dirnames, filenames in os.walk(node):
        # exclude all dirs starting with exclude_prefixes
        dirnames[:] = [dirname
                       for dirname in dirnames
                       if not dirname.startswith(exclude_prefixes)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-29T20:48:24.673

我的用例类似于 OP，除了我想返回某个文件夹内子目录总数的计数。就我而言，我想省略任何命名的子目录`.git`（以及可能嵌套在这些文件夹中的任何文件`.git`夹）。

在 Python 3.6.7 中，我发现接受的答案的方法不起作用——它计算了所有`.git`文件夹及其子文件夹。这对我有用：

```
num_local_subdir = 0
for root, dirs, files in os.walk(local_folder_path):
    if '.git' in dirs:
        dirs.remove('.git')
    num_local_subdir += (len(dirs)) 
```

# powershell - 使用 PowerShell 自定义 T4 脚手架

> ID：13454166
> 
> 赞同：5
> 
> 时间：2012-11-19T12:48:31.477
> 
> 标签：powershell, asp.net-mvc-4, visual-studio-2012, asp.net-mvc-scaffolding, t4scaffolding

我想创建一个使用任意**PowerShell**逻辑的**自定义脚手架。**它可以渲染**T4 模板**（如果需要，可以渲染多个模板），并输出结果：

 *****   作为项目中的新文件
*   作为插入现有类的新代码块
*   我的 PowerShell 逻辑可以使用**Visual Studio**的“代码模型”API 以其他任意方式操作文件和代码元素。

如何使用 PowerShell 自定义 T4 脚手架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:02:06.387

来自[http://blog.stevensanderson.com/2011/04/07/mvcscaffolding-creating-custom-scaffolders/](http://blog.stevensanderson.com/2011/04/07/mvcscaffolding-creating-custom-scaffolders/)：

> 在 Visual Studio 的包管理器控制台中执行以下命令：
> 
> ```
> Scaffold CustomScaffolder ClassName 
> ```
> 
> 这会将 CodeTemplates 文件夹添加到您的项目中，其中包含新脚手架的文件。
> 
> 如您所见，我们有两个文件：
> 
> *   **一个 PowerShell 脚本 (.ps1)**，我们可以在其中放置任意逻辑来决定渲染哪些模板以及输出到哪里。默认情况下，它会呈现一个 T4 模板并使用输出在项目的根目录中创建一个名为 ExampleOutput 的新文件。
> *   **T4 模板 (.t4)**，即默认 .ps1 文件呈现的内容。默认情况下，这会生成一个简单的 C#/VB 类（取决于您的项目类型）。如果你想看到这个工作，你可以立即运行自定义脚手架：
>     
>     
>     
>     `Scaffold ClassName`
>     
>     
> 
> 这将在项目的根文件夹中生成一个新的类文件 ExampleOutput.cs。这实际上只是为了向您展示它是如何工作的。我们真的不想要那个，所以不要运行新的脚手架，或者如果你已经这样做了，删除 ExampleOutput.cs****

# javascript - 带有画布的 chrome 中的奇怪行为（使用游戏循环）

> ID：13454167
> 
> 赞同：1
> 
> 时间：2012-11-19T12:48:33.040
> 
> 标签：javascript, loops, canvas, html5-canvas

我有以下代码：

```
 var gameStateRender = function (game) {

    var t = new Date();
    /* time passed since last frame */
    game.timePassed = t.getTime() - game.timeFrameStart;
    /* time when frame starts */
    game.timeFrameStart = t.getTime();
    /* time passed total */
    game.timeTotal += game.timePassed;
    game.update();
    game.draw();
    };

    /* set the default game-state */
    var gameState = gameStateRender; 
```

我使用60 fps`requestAnimFrame`的后备 ( ) 。`setTimeout`

```
 window.requestAnimFrame = (function () {

    return  window.requestAnimationFrame    || 
    window.webkitRequestAnimationFrame  || 
    window.mozRequestAnimationFrame     || 
    window.oRequestAnimationFrame       || 
    window.msRequestAnimationFrame      || 
    function(callback) {

    window.setTimeout(callback, 1000 / game.fps);
    };
    })();

    (function gameloop () {

    requestAnimFrame(gameloop);
    gameState(game);

    })(); 
```

游戏在 FF、IE9 中运行流畅，帧速率恒定为 ~60 fps。

在 chrome 中，游戏也有 ~60 fps，但会卡顿。一些事实：

*   当我在 chrome 中移动鼠标时，整个动画很流畅，当我停止移动鼠标时，动画开始结结巴巴。游戏总是有大约 60 fps（当我移动鼠标时，而当我不移动鼠标时）。

*   当我使用`console.log(...)`时，游戏运行流畅，没有在控制台上打印东西，游戏又卡顿了。（？？？）

    ```
    var gameStateRender = function (game) {

    var t = new Date();
    /* time passed since last frame */
    game.timePassed = t.getTime() - game.timeFrameStart;
    /* time when frame starts */
    game.timeFrameStart = t.getTime();
    /* time passed total */
    game.timeTotal += game.timePassed;

    console.log(game.timeTotal);

    game.update();
    game.draw();
    }; 
    ```

当我运行上面的代码时，动画很流畅。事实上，我已经验证了游戏的帧速率始终为 ~60（每帧 16 毫秒）。

以前有没有人有过这种（奇怪的）行为？对我来说听起来很奇怪。

# git - 在 bitbucket 中带有 git 的塑料 SCM

> ID：13454171
> 
> 赞同：2
> 
> 时间：2012-11-19T12:49:06.093
> 
> 标签：git, bitbucket, plasticscm

我在 bitbucket 中有我的存储库，我使用源代码控制 GIT。如果可能的话，我想在我的存储库中使用像客户端一样的塑料 SCM。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:25:13.537

免责声明：我不为 Códice 工作

你好！

现在，您可以使用 honk 描述的当前方法。

Códice 正在发布 4.2 的 alpha 版本，其中一个主要的新功能（如果不是主要的）就是这个！

我在家里用，挺好用的！如果您有兴趣使用它来试用它，您可以发送电子邮件给 Códice 的支持，我想他们会很乐意给您发送一个下载 4.2 版本的链接！:)

有一些众所周知的问题，但我认为他们会很乐意向您解释当前版本存在哪些问题，并且我认为您会很乐意使用它！:)

一位开发人员告诉我，他们已经在 Códice 中使用 4.2 版本大约 5 个月了！就在今天，他们发布了 4.2 的新版本，纠正了一些问题并带来了新功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:33:44.023

我确实建议您写信给支持（在 codicesoftware dot com 提供支持）并尝试新的 Git bisync 功能，它仍然是一个测试版，所以如果您有反馈，这里就是：[https ://plasticscm.uservoice.com/论坛/181648-git-bisync](https://plasticscm.uservoice.com/forums/181648-git-bisync)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T12:57:47.823

我正在使用 PlasticSCM 版本 5.0.44.549，我可以直接将分支与 bitbucket git repo 或 github 同步。

在 Plastic 中，右键单击一个分支，选择 Replication->Sync with Git...

在对话框中输入您的用户名和密码的 git repo url，然后按同步按钮。

您可以使用 Plasticscm 获得最好的 bitbucket/github、最好的 DVCS 和 GUI。

# php - 来自 mysql 的 Google-charts 日期范围过滤器

> ID：13454174
> 
> 赞同：1
> 
> 时间：2012-11-19T12:49:10.807
> 
> 标签：php, javascript, mysql, json, google-visualization

```
$SQLString = "SELECT    
                count(score) as counts,
                score, month,
                date FROM persons  
                GROUP BY day, month, year 
                ORDER BY date asc";     

    $result = mysql_query($SQLString);   
    $num = mysql_num_rows($result);   

# set heading   
    $data[0] = array('day','counts');       
    for ($i=1; $i<($num+1); $i++)
    {
        $data[$i] = array(substr(mysql_result($result, $i-1, "date"), 0, 10),
            (int) mysql_result($result, $i-1, "counts"));
    }   
    echo json_encode($data); 
```

这给了我这样的信息：**[["day","counts"],["2012-01-20",1],["2012-02-06",4]**

```
function drawChart() {
            var jsonData = $.ajax({
                url: "charts.php",
                dataType: "json",
                async: false
            }).responseText;

            var obj = jQuery.parseJSON(jsonData);
            var data = google.visualization.arrayToDataTable(obj);

            var options = {
                title: 'Counts'
            }; 
```

现在，我想用日期范围控制器构建我的图表：

```
var control = new google.visualization.ControlWrapper({
                 'controlType': 'ChartRangeFilter',
                 'containerId': 'control',
                 'options': {
                   // Filter by the date axis.
                   'filterColumnIndex': 0,
                   'ui': {
                     'chartType': 'LineChart',
                     'chartOptions': {
                       'chartArea': {'width': '90%'},
                       'hAxis': {'baselineColor': 'none'}
                     },
                     // Display a single series that shows the closing value of the stock.
                     // Thus, this view has two columns: the date (axis) and the stock value (line series).
                     'chartView': {
                       'columns': [0,1]
                     },
                     // 1 day in milliseconds = 24 * 60 * 60 * 1000 = 86,400,000
                     'minRangeSize': 86400000
                   }
                 },
                 // Initial range: 2012-02-09 to 2012-03-20.
                 'state': {'range': {'start': new Date(2012, 1, 1), 'end': new Date(2012, 4, 20)}}
               }); 
```

问题是：

["2012-01-20",1]，"2012-01-20" 是一个字符串，并且该日期控制器仅适用于日期类型，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:45:34.117

从这里获取数据后：

```
var obj = jQuery.parseJSON(jsonData); 
```

您可以解析 obj 用日期对象替换那些字符串日期：

```
for ( var i = 0; i < obj.<array of some kind that holds rows> i++ ) { 
    obj.<array of some kind that holds rows>.<newdatefield> = 
                      new Date( obj.<array of some kind that holds rows>.<datestring> );
} 
```

[日期转换链接：](http://www.w3schools.com/jsref/jsref_obj_date.asp)

# sql-server-ce - Sql Compact，确定ROWGUIDCOL

> ID：13454176
> 
> 赞同：0
> 
> 时间：2012-11-19T12:49:13.523
> 
> 标签：sql-server-ce, information-schema

如何确定 SQL Compact 数据库中的 ROWGUIDCOL 属性？

紧凑模式仅通过 INFORMATION_SCHEMA 公开，正如预期的那样，我没有运气在里面找到 Microsoft 专有的 ROWGUIDCOL 属性信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:43:12.100

这是我所知道的唯一（无证）方式：

```
SELECT column_flags, ... FROM information_schema.columns 
```

如果 column_flags 的值为 378 或 282，则该列是 ROWGUIDCOL

（您也可以使用我的 Scripting API 来获取此信息，从而节省您编写 SQL 代码的时间）

# javascript - MongoError,err:E11000 重复键错误

> ID：13454178
> 
> 赞同：30
> 
> 时间：2012-11-19T12:49:21.150
> 
> 标签：javascript, node.js, mongodb, mongoose

我有一个像这样的 MongoDb 架构

```
 var User = new Schema({
    "UserName": { type: String, required: true },
    "Email": { type: String, required: true, unique: true },
    "UserType": { type: String },
    "Password": { type: String }
}); 
```

我正在尝试创建一个新用户 ***这是在 NodeJs 中使用猫鼬 ODM 完成的*** ，这是用于创建的代码：

```
 controller.createUser = function (req, res) {

    var user = new models.User({
        "UserName": req.body.UserName.toLowerCase(),
        "Email": req.body.Email.toLowerCase(),
        "UserType": req.body.UserType.toLowerCase()
    });
    models.User.findOne({ 'Email': user.Email }, function (err, olduser) {
                    if (!err) {
                        if (olduser) {
                            res.send({ 'statusCode': 409, 'statusText': 'Email Already Exists' });
                        }
                        else if (!olduser) {
                            user.setPassword(req.body.Password);
                            user.save(function (err, done) {
                                if (!err) {
                                    console.log(user);
                                    res.send({ 'statusCode': 201, 'statusText': 'CREATED' });
                                }
                                else {
                                    res.send({ 'Status code': 500, 'statusText': 'Internal Server Error' });
                                }
                            });
                        }
                    }
                    else {
                        res.send({ 'statusCode': 500, 'statusText': 'ERROR' });
                    }
                });
}; 
```

对于创建新用户，我给出的属性和值如下：

```
 {
"UserName": "ann",
"Email": "ann@ann.com",
"UserType": "normaluser",
"Password":"123456"
} 
```

我收到这样的错误：

```
{"Status code":500,"statusText":"Internal Server Error","Error":{"name":"MongoError","err":"E11000 duplicate key error index: medinfo.users.$UserName_1  dup key: { : \"ann\" }","code":11000,"n":0,"connectionId":54,"ok":1}} 
```

我知道这个错误是因为用户名重复，但**我没有设置用户名具有唯一性约束。每当我添加新行时，我只需要电子邮件是唯一的，用户名可以重复**。如何实现这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-19T13:27:03.133

@ManseUK 可能是对的，看起来 UserName 是一个“键”——在这种情况下是一个索引。该`_id`属性是默认创建的“主”索引，但 mongodb 允许您拥有多个。

启动一个 mongo 控制台并运行`medinfo.users.getIndexes()`？一定是在“用户名”上添加了索引。

`required: true`不会那样做，但是您之前可能玩过其他设置并且索引没有被删除？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-12T04:58:23.980

应该有一个阻塞的索引。

您可以尝试 db.collection.dropIndex() 方法

medinfo.users.dropIndexes()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T06:50:20.747

我在我的项目中遇到了类似的问题。我试图清除所有文件，但 dup 问题仍然不断出现。直到我放弃这个集合并重新启动我的节点服务，它才正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T09:42:25.353

我意识到我的数据结构正在发生变化——这就是`versioning`派上用场的地方。

你可能需要获取一个`mongoose-version`模块，做一个`thing.remove({}, ...)`甚至删除集合：[drop database with mongoose](https://stackoverflow.com/questions/10081452/drop-database-with-mongoose)

我使用 RoboMongo 作为管理工具（我强烈推荐它！）所以我只是进入并从控制台右键单击/删除集合。

如果有人知道如何在代码中轻松地对集合进行版本化和/或删除，请随时在下面发表评论，因为它肯定有助于这个线程（和我:)）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-10-31T12:08:45.680

此错误背后的原因是，您尝试插入的集合中的索引不存在或不同。所以解决方案是删除该集合并再次运行您的程序。

# c++ - C++ char 类型值是由 OS 定义的吗？

> ID：13454183
> 
> 赞同：0
> 
> 时间：2012-11-19T12:49:26.937
> 
> 标签：c++, unicode, char

我知道 char 类型的前 128 个符号是[ASCII 符号](http://en.wikipedia.org/wiki/ASCII)，我的意思是，如果您打印它们，它们的计算方式与 ASCII 表中的一样。现在剩下的人呢？据我了解，其他 128 个符号并未严格定义。如果我打印如下所有可能的 char 值，这取决于将打印什么？

```
 char a = 0;
 for (int i = 0; i < 256; i++)
 {
    if (i == 128)
       cout << "------------------------------" <<endl;
    cout << a++ <<endl;
 } 
```

我可以配置输出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:53:23.257

的前 128 个值`char`不一定与 ASCII 字符对应。的值`char`对应于*执行字符集中*的字符，这是一个实现定义的集合。此字符集成员的值是特定于语言环境的（第 2.3/3 节）：

> 执行字符集成员的值和附加成员集是特定于语言环境的。

字符文字（例如）的`'a'`类型`char`和值等于执行字符集中的字符值。对于字符串文字也是如此。如果您的文字中的字符超出实现定义的执行字符集，则它具有实现定义的值（第 2.14.4/5 节）：

> 如果没有这样的编码，universal-character-name 将被转换为实现定义的编码。

在许多编译器中，您可以配置执行字符集。例如，使用`g++`，您可以使用该`-fexec-charset`选项。

一旦你输出了你的文本，它的解释取决于它被查看的媒介，比如终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:54:23.473

由于终端解释由 写入的字节`std::cout`，您通常可以将终端配置为将字节显示为 Latin-1、Latin-15、Cyrillic 或您想要的任何其他字符。

在您的程序中，您无法配置它在显示屏上的显示方式。您唯一能做的就是代码如何解释字节。因此，为了使用 Latin-1，您的程序和终端都必须同意这些字节的含义是 Latin-1。

# android - 在android中设置网页视图的缩放

> ID：13454188
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:49:35.580
> 
> 标签：android, webkit, android-webview

我想设置缩放以在 android 的 web 视图上显示内容。如何缩放特定级别的 Web 视图。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:51:35.383

尝试使用 webView 设置

使用 webSettings 类

```
webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

查看为 Webview 设置缩放

# css - 在这个例子中移除楼梯

> ID：13454196
> 
> 赞同：-2
> 
> 时间：2012-11-19T12:49:59.197
> 
> 标签：css

在这个例子中是否可以消除楼梯效应？我有一个向右浮动的 div 和一些向左浮动的固定高度和固定宽度的 div。如果 div 在某个地方相遇，我会得到一个相当奇怪的楼梯效果。

我知道为什么会发生这种情况并且我明白了，但我正在寻找避免这种情况的解决方案。请帮我

```
<div class="container">
  <div class="fright">just some contents floating right</div>
  <div class="fleft">a div</div>
  <div class="fleft">
        this one is the problem. 
        Is it possible to have this div start at position B
  </div>
  <div class="fleft"><b>Position B</b></div>
  <div class="fleft">a div</div>
</div> 
```

和CSS

```
div{
    margin:10px;
    padding:10px;

.container{
    width:460px;
    float:left;
}

.fright{
    float:right;
    border:1px solid green;
}

.fleft{
    float:left;
    height:180px;
    width:180px;
    border:1px solid orange;
}​ 
```

[http://jsfiddle.net/FusWd/1/](http://jsfiddle.net/FusWd/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:18:48.787

您可能想尝试使用 inline-block 来进行布局，而不是使用浮点数。

我在这里更新了你的例子：http: [//jsfiddle.net/FusWd/4/](http://jsfiddle.net/FusWd/4/)

这种技术有一些注意事项：

*   IE 6-7 不支持内联块，您必须使用“hasLayout”技巧。
*   inline-block 元素受标记中的空白影响，这可能会或可能不会破坏您的布局。有几个解决方案。
    *   您可以删除标记中内联块元素之间的空格
    *   将父元素的 font-size 和 line-height 设置为 0，将 letter-spacing 和 word-spacing 属性设置为 -1px，然后将 font-size 和 line-height 重置为所需的值，并重置 letter-spacing 和 word-间距属性的`normal`值。

# html - 垂直对齐 - 使用“list-style-image”列出

> ID：13454199
> 
> 赞同：7
> 
> 时间：2012-11-19T12:50:06.277
> 
> 标签：html, css, image, list, vertical-alignment

谷歌搜索和浏览 SO 都没有帮助我 - 希望这里有人可以解决这个问题：

我有以下html：

```
<ul>
<li>ABC 1</li>
<li>ABC 2</li>
<li>ABC 3</li>
<li>ABC 4</li>
</ul> 
```

和CSS

```
ul {list-style-image:url(../img/hook.png);}
li {vertical-align:middle;color:#FFFFFF;font-size:16px;text-shadow: 0em 0.13em 0.13em #2A2A2A;font-family:Helvetica,Arial,Sans-Serif;font-weight:normal;} 
```

“hook.png”图像是 32x35 像素 - 但每当我创建列表项时，文本（例如 ABC ...）将始终显示在图像下方。尝试了 line-height 和那些 100% 的东西 - 但都没有成功。

任何快速帮助：/？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:00:09.000

尝试一些变化

```
ul{
    background-image: url(../img/hook.png);
    background-repeat: no-repeat;
    background-position: 95% 50%;
} 
```

显然，该职位不太可能满足您的需求，但我会说，摆弄这种方法是您最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:17:16.997

```
<html>
<head>
<style>
ul
{
    list-style-image:none;
}
li
{
    color:#FFFFFF;
    font-size:16px;
    text-shadow: 0em 0.13em 0.13em #2A2A2A;
    font-family:Helvetica,Arial,Sans-Serif;
    font-weight:normal;
    line-height:35px;

    margin-bottom:5px;
    padding-left: 36px;
    background-image: url('../img/hook.png');
    background-repeat:no-repeat;
}
</style>
</head>
<body>
<ul>
<li>ABC 1</li>
<li>ABC 2</li>
<li>ABC 3</li>
<li>ABC 4</li>
</ul>
</body>
</html> 
```

从未见过我们的任何设计师在为列表实现自定义图标时尝试使用列表样式图像，我想这就是原因:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:57:49.010

如果我理解您的问题是文本似乎低于基线？

尝试为您的文本设置 beelow 属性：

**填充底部**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T08:49:42.220

我想出了类似的东西，这可能会为你节省一些时间 HTML：

```
<ul class="rozcestnik">
  <li><a href="#" title="1">1</a></li>
  <li><a href="#" title="2">2</a></li>
  <li><a href="#" title="3">3</a></li>
</ul> 
```

CSS：

```
.rozcestnik {
    list-style-type: none;
    padding: 0;
    margin: 2.5em 2em 0;
}

.rozcestnik li:before {
    background: url("icon.png") no-repeat scroll 50% 50% transparent;
    content: " ";
    display: block;
    height: 20px;
    left: -20px;
    position: absolute;
    top: 0;
    width: 20px;
}
.rozcestnik li {
    position: relative;
    padding-bottom: 5px;
    padding-left: 5px;
} 
```

根据自定义列表图像，您可能只需要自定义顶部和大小“:before”和“li”的填充。

它适用于所有主要浏览器和应用程序 IE8 等。

# c - 为什么 strtok_r 总是找到模式“.”？

> ID：13454201
> 
> 赞同：0
> 
> 时间：2012-11-19T12:50:17.427
> 
> 标签：c, strtok

在我的系统上，以下程序：

```
int main(){
        char *strgptr;
        char buf[5] = {'b','a','a','a','\0'};
        char *tmp = strtok_r(buf, ".", &strgptr);
        if(tmp != NULL){
                printf("Found a . in baaa?\n");
                printf("It was found starting at: %s\n", tmp);
        }
        else
                printf("Everything is working.\n");
} 
```

印刷：

```
Found a . in baaa?
It was found starting at: baaa 
```

但是，如果我交换“。” strtok_r 中“a”的分隔符字符串，我得到（如预期的那样）：

```
Found a . in baaa?
It was found starting at: b 
```

但是交换“。” 对于未出现在 buf 中的任何其他字符（例如“c”）产生：

```
Found a . in baaa?
It was found starting at: baaa 
```

正如预期的那样，strtok_r 的手册页说：

```
The strtok() and strtok_r() functions return a pointer to the next token, 
or NULL if there are no more tokens. 
```

那么为什么 strtok_r 在传递一个不包含任何相关标记的字符串时无法返回 NULL 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:57:38.763

因为未找到分隔符，所以您将返回整个字符串。就好像字符串后面有一个不可见的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:57:36.847

由于分隔符“.” 在 中找不到，**您**`buf`的调用`strtok`成功返回指向您的第一个（也是唯一的）令牌的指针：`"baaa"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:25:11.777

我想你实际上需要使用函数 strstr()。strtok_r 用于分割字符串，例如逗号或\n。

# php - PHP 聊天活跃用户

> ID：13454202
> 
> 赞同：6
> 
> 时间：2012-11-19T12:50:21.143
> 
> 标签：php, jquery, mysql, chat, comet

我已经使用 jquery 和 PHP 向网站添加了聊天功能，它似乎通常运行良好，但我担心可扩展性。我想知道是否有人有一些建议。我认为对我来说关键领域是有效地管理对谁在线的意识。

详细信息：我还没有实现长轮询（还），我担心 PHP (Apache) 中长时间运行的进程的原始数量会失控。

我的代码运行定期 jquery ajax 轮询（4 秒），它首先更新 db 以表示我处于活动状态并设置时间戳。然后有一个例程检查所有活动用户的时间戳并将那些外部（10 分钟）设置为非活动用户。从我目前的研究来看，这是相当正常的。但是，我担心如果我允许每个活动用户检查每个其他活动用户，然后每个人都更新数据库以启动非活动用户，那么我将得到重复的工作、记录锁定和不必要的服务器负载。

所以我已经实现了“清道夫”角色的想法。这只是其中一位在线用户，继承了清理人员的角色。其他人只是检查是否存在“清扫器”（数据库读取）并继续。如果他们检查时没有清扫器，他们就会让自己成为清扫器（DB 为自己的记录而写）。如果有多个，让自己“不扫地”，随机睡一段时间，然后再检查一次。

我的理论是，这种方式只有一个用户定期更新相关表上的几条记录，而其他人要么在阅读，要么只是在写自己的记录。所以它工作正常，但问题可能是该过程需要一些数据库读取，并且实际上可能比让每个人都像我提到的其他研究一样进行清理效率低。

到目前为止，我已经有超过 100 个并发用户运行良好，但客户希望扩展到数百个，甚至超过 1,000 个，我不知道现阶段这个想法是否好。

有谁知道这是否是一种好方法，是否可以扩展到数百个活跃用户，或者您是否可以推荐一种不同的方法？

顺便说一句，实际聊天消息的长轮询/彗星看起来很简单，我找到了一个很好的代码资源，但是有几个博客评论表明它特别是 PHP 和 apache 很危险。活动线程等。使用 usleep 和 session_write_close 将影响降至最低。

再说一次，有没有人有为数百名活跃用户设置 PHP 长轮询的实际经验，也许你可以放心！我真的希望将其迁移到 node.js（没有经验）吗？

先感谢您

托尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:56:13.757

我的建议是使用[**流星**](http://meteor.com/)框架执行此操作，即使您不是专家，这也很简单，然后只需通过 iframe 将此类聊天加载到您的 PHP 网站中。

我想，它将是可扩展的，不会消耗太多资源，而且将来只会变得更好。

它肯定胜过 PHP comet 解决方案和基于 jquery 和 ajax 超时的服务器调用。

我什至相信你可以在 github 上或多或少地找到一个只需要调整的完整解决方案。

但是，当然，请在实施之前**阅读[文档。](http://docs.meteor.com/)**

如果您担心安全问题，请阅读[**使用流星的安全性**](http://britto.co/blog/security_with_meteor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:12:03.323

长轮询对于 PHP 来说确实是相当灾难性的。PHP 总是在有限的并发进程下运行，只要您优化以尽可能快地处理每个请求，它就会很好地扩展。长轮询和类似的解决方案将很快填满您的管道。

可以说 PHP 根本不适合这种类型的东西，目前的工具在那里。如果你坚持使用 PHP，你可以试试[ReactPHP](https://github.com/react-php/react)，它是一个 PHP 框架，与 NodeJS 的构建方式非常相似。React 的含义还在于它应该作为一个单独的守护进程运行，而不是在诸如 apache 之类的网络服务器中运行。我对它的稳定性以及它的扩展性没有经验，所以你必须自己进行测试。

如果你对 javascript 很熟悉，NodeJS 并不难学。NodeJS + [socket.io](http://socket.io/)使得使用 websocket 编写聊天服务器和客户端变得非常容易。这将是我的建议。当我开始使用它时，我在几个小时内就完成了一些不错的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T10:25:25.663

如果您想使用 PHP 保留您的应用程序堆栈，您希望聊天应用程序在您的实际 Web 应用程序（而不是 iframe）中运行并且您担心扩展您的实时基础架构，那么我建议您查看托管服务以获取实时更新，比如我为之工作的[Pusher 。](http://pusher.com)通过这种方式，托管服务为您处理实时基础架构的扩展，并让您专注于构建应用程序功能。

这样，您只需要处理聊天消息请求 - 清理/验证内容 - 然后通过 Pusher 将信息推送到 1000 个连接的客户端。

快速入门指南可在此处获得：http: [//pusher.com/docs/quickstart](http://pusher.com/docs/quickstart)

我的[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)上有完整的托管服务列表。

# extjs - 如何从sencha touch中另一个视图的回调访问嵌套列表视图的工具栏对象？

> ID：13454206
> 
> 赞同：2
> 
> 时间：2012-11-19T12:50:30.513
> 
> 标签：extjs, sencha-touch-2

我是 Sencha Touch 的新手，所以我不知道它的完整结构。所以这个问题有点愚蠢，我猜:)

我认为它是一个嵌套列表对象。我在我的嵌套列表中创建了一个工具对象。现在我想从另一个视图的回调中操作这个工具栏。如何从另一个视图对象的事件回调访问位于嵌套列表视图中的工具栏对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:03:05.630

有了关于您的结构的少量信息（您是否使用 MVC 模式？没有给出示例代码）我只能说您绝对可以使用**[Ext.ComponentQuery实现这一点](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)**

假设您向名为的工具栏添加了一个自定义属性，`ident='myToolbar'`然后您可以通过调用访问此工具栏（准确地说是具有该自定义属性的任何工具栏）

```
Ext.ComponentQuery.query('[ident=myToolbar]')[0] 
```

结果将始终是一个数组，但在此示例中，我们只接受一个结果，这就是我添加的原因`[0]`

有关详细信息，请参阅 API。如果您知道如何使用**[Ext.ComponentQuery ，它就会非常强大。](http://docs.sencha.com/touch/2-0/#!/api/Ext.ComponentQuery)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:56:16.817

首先给你的工具栏一个`id`，例如`myToolbar`。然后，在你的回调中，你可以做这样的事情

```
var toolbar = Ext.getCmp('myToolbar'); 
```

获取您的工具栏对象。接下来，您可以使用工具栏变量来操作工具栏，例如更改标题：

```
toolbar.setTitle('New Title'); 
```

更多关于 getCmp()的信息[在这里](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-getCmp)。

[有关此处](http://docs.sencha.com/touch/2-0/#!/api/Ext.Toolbar)工具栏的更多信息（检查工具栏的操作方法）。

# debugging - 关系实体太大而无法调试

> ID：13454210
> 
> 赞同：3
> 
> 时间：2012-11-19T12:50:54.187
> 
> 标签：debugging, symfony

> **可能重复：**
> [symfony2 中的 var_dump 数据过多](https://stackoverflow.com/questions/11902099/too-much-data-with-var-dump-in-symfony2-doctrine2)

我有彼此相关的非常简单的实体，比如一个用户实体，它有一个个人资料，有很多图片和很多地址等。没什么太花哨的，一切都很好。

但我的问题是：如果我尝试做一个简单的

```
 print_r($this->user); die(); 
```

在控制器中，我的浏览器基本上会崩溃，显然是因为要显示的数据太多。那么，我应该担心吗？我觉得我的联想可能在某个地方是错误的......

如果这是 Symfony 的正常行为，我还应该担心所有这些数据都在内存中吗？

# asp.net-mvc - 在 HtmlHelper 扩展方法中模拟出 HttpContext

> ID：13454212
> 
> 赞同：1
> 
> 时间：2012-11-19T12:51:01.990
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, moq, rhino-mocks

如何在此扩展方法中模拟 HttpContext

```
public static class MyHtmlHelper
{
    public static string GetFullPath(this HtmlHelper helper)
    {
        var url = HttpContext.Current.Request.Url;

        return url.Scheme + "://" + url.AbsolutePath;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:56:42.070

创建一个 HttpContextFactory，使用它，然后在您的测试中设置它。

```
public static class HttpContextFactory
    {
        [ThreadStatic]
        private static HttpContextBase _mockHttpContext;

        public static void SetHttpContext(HttpContextBase httpContextBase)
        {
            _mockHttpContext = httpContextBase;
        }

        public static HttpContextBase GetHttpContext()
        {
            if (_mockHttpContext != null)
            {
                return _mockHttpContext;
            }

            if (HttpContext.Current != null)
            {
                return new HttpContextWrapper(HttpContext.Current);
            }
            return null;
        }
    } 
```

然后在你的代码中：

```
var url = HttpContextFactory.GetHttpContext().Request.Url; 
```

然后在您的测试中使用该属性作为接缝

```
HttpContextFactory.SetHttpContext(HttpMocks.HttpContext()); 
```

其中 HttpMocks 具有以下内容，并将针对您的测试进行调整：

```
public static HttpContextBase HttpContext()
      {
          var context = MockRepository.GenerateMock<HttpContextBase>();
          context.Stub(r => r.Request).Return(HttpRequest());
          // and stub out whatever else you need to, like session etc
          return context;
      }

      public static HttpRequestBase HttpRequest()
      {
          var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
          httpRequest.Stub(r => r.Url).Return("/"); //or some test setting
          return httpRequest;
      } 
```

# xpath - 如何在 X-path 表达式中将 int 数转换为货币格式？

> ID：13454213
> 
> 赞同：0
> 
> 时间：2012-11-19T12:51:02.407
> 
> 标签：xpath, xpath-2.0

我想将数字（ie.1000）直接转换成货币格式，如（ie.1,000）。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:40:12.990

在 XSLT 中有 format-number()，但在纯 XPath 中，您必须以艰难的方式完成它。也许您应该使用调用 XPath 的宿主语言进行格式化？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T14:16:46.573

您可以使用正则表达式。

如果 $number 是一个包含整数的字符串，那么您可以使用：

```
replace(replace(
  if (string-length($number) mod 3 eq 2) then concat("0", $number) 
  else if (string-length($number) mod 3 eq 1) then concat("00", $number)
  else $number, 
  "([0-9]{3})", ",$1"), 
 "^[,0]+", "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T12:27:05.560

您可以使用

```
<xsl:value-of select="format-number($wartosc, &quot;###,###,###,###,##0.00&quot;)" /> 
```

# java-me - 通过平台请求拨打电话号码

> ID：13454227
> 
> 赞同：0
> 
> 时间：2012-11-19T12:51:51.577
> 
> 标签：java-me, midp, lcdui

我已经尝试了两天编写一个拨打电话号码的代码，但我失败了

我编写了一个 midlet 和一个名为 main 作为 Displayable 的表单，该表单包含一个文本字段和

命令 。

当应用程序启动时，表格应出现并拨打所写的拨号号码

按下命令时的文本字段。

拨号过程对我不起作用。

```
import javax.microedition.io.ConnectionNotFoundException;

import javax.microedition.lcdui.Command; 

import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.*;
import javax.microedition.lcdui.Displayable.*;
import javax.microedition.lcdui.Form.*;
 import javax.microedition.midlet.MIDlet;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import javax.microedition.lcdui.*;
 import javax.microedition.midlet.MIDlet;

public class DiallNumber extends MIDlet implements CommandListener
 {
    String num;
 private  Form main;
 private Command call,dial;
 private TextField phoneField;

 Display display;

 public DiallNumber()
    {

 main = new Form("main");
phoneField = new TextField("label","",10,phoneField.PHONENUMBER);
call = new Command("call",call.OK,0);
    main.append(phoneField);
    main.addCommand(call);
    num=this.phoneField.getString().trim();
main.setCommandListener(this);
 }

/**}
 * From MIDlet. Called when the MIDlet is started.
 */
 public void startApp()
 {

 // The initial display is the first form

display = Display.getDisplay(this);
   display.setCurrent(main);

     }

public void call( String number) {
 try {
 platformRequest("tel:"+number);
 } catch (ConnectionNotFoundException ex) {
 // TODO: Exception handling
 }
 }
 public void commandAction(Command c, Displayable d){
     if(d==main)
     {
         if(c==call)

              call(""+num);
     }

 }

 public void pauseApp()
 {
 // No implementation required
 }

/*

 * /
 */

/**
 * From MIDlet. Called to signal the MIDlet to terminate.
 *
* @param unconditional
 * whether the MIDlet has to be unconditionally terminated
 */
 public void destroyApp(boolean unconditional)
 {
 // No implementation required
 }

/**
 * From CommandListener. Called by the system to indicate that a command has
 * been invoked on a particular displayable.
 *
* @param command
 * the command that was invoked
 * @param displayable
 * the displayable where the command was invoked
 */

       } 
```

* * *

我的日志跟踪

```
Copying 1 file to C:\Users\ELHADI\Documents\NetBeansProjects\DiallNumber2\dist\nbrun5217990045006831680
Copying 1 file to C:\Users\ELHADI\Documents\NetBeansProjects\DiallNumber2\dist\nbrun5217990045006831680
Jad URL for OTA execution: http://localhost:8082/servlet/org.netbeans.modules.mobility.project.jam.JAMServlet/C%3A/Users/ELHADI/Documents/NetBeansProjects/DiallNumber2/dist//DiallNumber2.jad
Starting emulator in execution mode
Installing suite from: http://127.0.0.1:49320/DiallNumber2.jad
[WARN] [rms     ] javacall_file_open: _wopen failed for: C:\Users\ELHADI\javame-sdk\3.0\work\0\appdb\_delete_notify.dat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:56:52.833

我已经解决了这个问题

```
import javax.microedition.io.ConnectionNotFoundException;
import javax.microedition.lcdui.Command;
import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.*;
import javax.microedition.lcdui.Displayable.*;
import javax.microedition.lcdui.Form.*;
 import javax.microedition.midlet.MIDlet;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import javax.microedition.lcdui.*;
 import javax.microedition.midlet.MIDlet;

public class DiallNumber extends MIDlet  
 {

    private  Display display;
 private MIDlet midlet;

Form f = new form("f");

/**}
 * From MIDlet. Called when the MIDlet is started.
 */
 public void startApp()
 {

display = Display.getDisplay(this);
  display.setCurrent(f);
}

 public void pauseApp()
 {
 // No implementation required
 }

/*

 * /
 */

/**
 * From MIDlet. Called to signal the MIDlet to terminate.
 *
* @param unconditional
 * whether the MIDlet has to be unconditionally terminated
 */
 public void destroyApp(boolean unconditional)
 {
 // No implementation required
 }
   class form extends   Form  implements CommandListener

           {
           private  Command call;

            private TextField phoneField;
           private String n;
   public form(String title )
       {
       super(title);

       call =new Command("call",call.OK,0);
       this.phoneField =new TextField("number","",20,phoneField.PHONENUMBER);

   addCommand(call);
   append(this.phoneField);

   this.setCommandListener(this);
      }

        public void commandAction(Command c,Displayable  d)
       {

   if(c==call)
   {

   try
   {
       n=phoneField.getString().trim();
      platformRequest("tel:"+n);

   }
  catch(javax.microedition.io.ConnectionNotFoundException e)
  {e.printStackTrace();}
   }

   }

   }

       } 
```

# java - eclipse中绿色和蓝色注释的区别

> ID：13454228
> 
> 赞同：12
> 
> 时间：2012-11-19T12:51:51.520
> 
> 标签：java, eclipse

我在eclipse中看到了两种类型的评论。一种是绿色的，另一种是蓝色的。两者有什么区别？哪个用于函数，哪个用于类和其他变量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T12:53:37.397

这两种类型的评论是：

```
/**
  * comment goes here (notice the extra '*' in previous line)
  */ 
```

和这个：

```
/*
 * comment goes here (notice the extra '*' is not present in previous line)
 */ 
```

这两种评论风格有不同的颜色。第一个得到蓝色，第二个得到绿色。

第一种样式是 Javadoc 注释，可用于生成各种文档格式。Eclipse 将使用这些来为文档项生成工具提示和自动完成文档。

有关更多详细信息[，请参阅文档](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:55:06.637

```
// and /* .. */    are standard comments and show up in green color
/** ...... **/     are javadoc comments and show up in blue color 
```

文档[JavaDoc](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:54:08.487

绿色注释是普通注释，蓝色注释是 JavaDoc 注释

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:54:20.120

我猜一个是普通注释（`/* ... */`），而另一个是 javadoc（`/** ... */`）确实表示特定的类和方法文档。

# internet-explorer-7 - IE 7 中标头值的最大长度

> ID：13454232
> 
> 赞同：0
> 
> 时间：2012-11-19T12:52:08.320
> 
> 标签：internet-explorer-7, http-headers

Tomcat 发送包含“Content-disposition:attachment; filename*=utf-8''myverylooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooname.docx”的响应。在所有浏览器中它都运行良好。但在 IE7 中，文件名被截断为最后 42 个字符。我应该怎么做才能防止这种截断？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:12:44.397

我遇到过类似的问题，但总是使用非英文网站。诀窍是在 ISO8859-1 中编码输出文件名

这段代码（C#）解决了这个问题。

response.setHeader("Content-Disposition", "attachment;filename=" + new String(fileName.getBytes("UTF-8"), "ISO8859-1"));

# android - 安卓应用崩溃

> ID：13454239
> 
> 赞同：0
> 
> 时间：2012-11-19T12:52:33.913
> 
> 标签：android, android-intent, crash, android-manifest

我的应用程序确实打开了启动画面，并且播放了背景音乐..但在那之后它应该打开一个列表活动但它崩溃了我之前尝试使用几乎所有其他名称运行相同的程序但是当我重新输入程序时它崩溃了..我已经清理并刷新了，这甚至没有任何区别

我的java文件

飞溅.java：

```
package com.alpha.beta;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class Splash extends Activity {
MediaPlayer ourSong;

@Override
protected void onCreate(Bundle beta) {
    super.onCreate(beta);
    setContentView(R.layout.splash);
    ourSong = MediaPlayer.create(Splash.this, R.raw.splash_sound);
    ourSong.start();
    Thread timer = new Thread(){
        public void run(){
            try {
                sleep(5100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                Intent openStartingPoint = new Intent("com.alpha.beta.MENU");
                startActivity(openStartingPoint);
            }
        }
    };
    timer.start();
}

    @Override
    protected void onPause() {
        super.onPause();
        ourSong.release();
        finish();
}
} 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.alpha.beta"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_app" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="@string/title_activity_app" >
        <action android:name="com.alpha.beta.MENU" />

        <category android:name="android.intent.category.DEFAULT" />
    </activity>
    <activity
        android:name=".App"
        android:label="@string/title_activity_app" >
        <action android:name="com.alpha.beta.APP" />

        <category android:name="android.intent.category.DEFAULT" />
    </activity>
</application> 
```

```
 11-19 18:35:42.291: W/dalvikvm(882): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
           11-19 18:35:42.321: E/AndroidRuntime(882): FATAL EXCEPTION: Thread-8
           11-19 18:35:42.321: E/AndroidRuntime(882): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.alpha.beta.Menu }
           11-19 18:35:42.321: E/AndroidRuntime(882):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
           11-19 18:35:42.321: E/AndroidRuntime(882):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
           11-19 18:35:42.321: E/AndroidRuntime(882):   at android.app.Activity.startActivityForResult(Activity.java:2817)
           11-19 18:35:42.321: E/AndroidRuntime(882):   at android.app.Activity.startActivity(Activity.java:2923)
           11-19 18:35:42.321: E/AndroidRuntime(882):   at com.alpha.beta.Splash$1.run(Splash.java:26)
           11-19 18:35:46.190: I/Process(882): Sending signal. PID: 882 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:19:00.953

试试这个方法

```
 Intent openStartingPoint = new Intent(Splash.this,Menu.class);
  startActivity(openStartingPoint); 
```

**编辑**：-有时是无法获得该活动的上下文的问题。这就是为什么您可能会遇到异常`ActivityNotFoundException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:59:22.407

只是一个想法。在意图中，您将类名指定为**MENU**，但在清单中，它是*Menu*。尝试更改它，区分大小写可能是个问题。还要为您的**Menu**类定义操作。动作名称应该是**VIEW**。

活动（启动画面和菜单）是否属于同一个包，如果是，请尝试

```
 Intent i = new Intent(Splash.this, Menu.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

startActivity(i); 
```

# ruby - Ruby 等效调用 verifyEditable selenium 命令

> ID：13454240
> 
> 赞同：0
> 
> 时间：2012-11-19T12:52:39.530
> 
> 标签：ruby, selenium-webdriver

使用 ruby​​ selenium-webdirver，我想检查输入元素是否可编辑。为了检查这一点，在 IDE 中，我们使用了 selenium 命令 - verifyEditable。在Ruby中，有什么方法（方法），我们验证元素是否可编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:50:07.847

你试过`$driver.find_element(:id, "elementID").enabled?`吗？只要您只检查您知道是输入字段的元素，这就会起作用。

在我的测试中，我只是在托管浏览器控件的同一个类/模块中声明一个方法：

```
def element_enabled?(how, what)
  if $driver.find_element(how, what).displayed? && $driver.find_element(how, what).enabled? then
    true
  else
    false
  end
rescue Selenium::WebDriver::Error::NoSuchElementError
  false
end 
```

然后你可以使用该方法：

```
element_enabled?(:id, "elementID") 
```

如果您尝试输入输入的元素当前不可见，则拥有`foo.displayed? && foo.enabled?`可以防止您的脚本出现错误。

如果您要求页面上不存在的元素，则包含该`rescue`命令只会使方法返回。`false`如果您忽略该`rescue`块，您的脚本将退出并返回 Selenium 错误消息，抱怨该元素不存在。我的偏好是始终使用`true`or`false`代替（例如 with `verifyEditable`），但您可能会发现如果元素不存在（例如 with ），您希望脚本退出并出现错误`assertEditable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:24:03.013

```
disabled = find('input_id')['disabled']
disabled.should_not == 'disabled'
disabled.should_not == 'true' # just to be safe 
```

或者使用 selenium 驱动程序，您可以继续填写一些值

```
fill_in 'input_id_or_label', with: "some input value" 
```

如果该字段被禁用，硒会抱怨（但一些无头驱动程序不会，例如[capybara-webkit](https://github.com/thoughtbot/capybara-webkit)）：

```
 Selenium::WebDriver::Error::InvalidElementStateError: Element is disabled and so may not be used for actions 
```

但是我不认为使用 selenium 来执行这样的视图测试是一个好主意——它很慢并且可能会不稳定，并且结果可能因驱动程序而异。如果默认情况下在禁用输入的情况下呈现视图，则应该进行视图测试；否则，如果是一些禁用输入的 javascript，它应该是一个简单的[jasmine](https://github.com/pivotal/jasmine) / [mocha](https://github.com/visionmedia/mocha) javascript 测试。

# visual-studio-2010 - Firefox 未检测到 NPAPI 插件

> ID：13454249
> 
> 赞同：1
> 
> 时间：2012-11-19T12:53:07.963
> 
> 标签：visual-studio-2010, firefox, windows-7-x64, npapi

我正在尝试让 Firefox（Windows 7 x64 Professional 下的 16.0.2）检测空白 NPAPI 插件。这是我的代码。

nplithium.def

```
LIBRARY    nplithium

EXPORTS
    NP_GetEntryPoints     @1
    NP_Initialize         @2
    NP_Shutdown           @3 
```

nplithium.rc

```
// Microsoft Visual C++ generated resource script.
//
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#include "afxres.h"

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

/////////////////////////////////////////////////////////////////////////////
// English (United States) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US

/////////////////////////////////////////////////////////////////////////////
//
// Version
//

VS_VERSION_INFO VERSIONINFO
 FILEVERSION 1,0,0,1
 PRODUCTVERSION 1,0,0,1
 FILEFLAGSMASK 0x3fL
#ifdef _DEBUG
 FILEFLAGS 0x1L
#else
 FILEFLAGS 0x0L
#endif
 FILEOS 0x40004L
 FILETYPE 0x2L
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904b0"
        BEGIN
            VALUE "CompanyName", "Antek SRL"
            VALUE "FileDescription", "Example Lithium"
            VALUE "FileVersion", "1.0.0.2"
            VALUE "InternalName", "nplithium"
            VALUE "LegalCopyright", "Copyright (C) Marco Buzzanca 2012"
            VALUE "MIMEType", "application/x-lithium"
            VALUE "OriginalFilename", "nplithium.dll"
            VALUE "ProductName", "lithium"
            VALUE "ProductVersion", "1.0.0.1"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1200
    END
END

#endif    // English (United States) resources
/////////////////////////////////////////////////////////////////////////////

#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
// 
```

dll_entry.cpp

```
#include "npapi.h"
#include "npfunctions.h"

extern "C" 
{
    NPError OSCALL NP_GetEntryPoints(NPPluginFuncs* functions) 
    {
        if(functions == NULL)
            return NPERR_INVALID_FUNCTABLE_ERROR;

        if(functions->size < sizeof(NPPluginFuncs))
            return NPERR_INVALID_FUNCTABLE_ERROR;

        functions->version       = (NP_VERSION_MAJOR << 8) | NP_VERSION_MINOR;
        functions->newp          = NULL;
        functions->destroy       = NULL;
        functions->setwindow     = NULL;
        functions->newstream     = NULL;
        functions->destroystream = NULL;
        functions->asfile        = NULL;
        functions->writeready    = NULL;
        functions->write         = NULL;
        functions->print         = NULL;
        functions->event         = NULL;
        functions->urlnotify     = NULL;
        functions->getvalue      = NULL;
        functions->setvalue      = NULL;
        functions->javaClass     = NULL;

        return NPERR_NO_ERROR;
    }

    NPError OSCALL NP_Initialize(NPNetscapeFuncs* functions)
    {
        return NPERR_NO_ERROR;
    }

    NPError OSCALL NP_Shutdown() 
    {
        return NPERR_NO_ERROR;
    }
} 
```

不幸的是，我在网上找到的所有示例插件和教程要么已过时，要么不完整。MDN 也无济于事，因为它几乎没有提供关于浏览器期望这些函数做什么的信息（NP_GetEntryPoints 完全没有文档记录）。

有什么我想念的吗？我不是想让插件做任何事情，我只是想让 firefox 检测到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:54:08.813

我设法让 Firefox 检测到我的插件。

如[插件开发概述中所述](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Development_Overview#MS_Windows)：

> 为此，插件 DLL 的嵌入式资源的版本标记应包含以下字符串/值对集：
> 
> *   MIMEType：用于 MIME 类型
> *   FileExtents：用于文件扩展名
> *   FileOpenName：用于文件打开模板
> *   ProductName：为插件名称
> *   FileDescription：用于描述
> *   语言：用于使用的语言

我的 .rc 文件中缺少其中的几对。

# jquery - 缓解下拉菜单问题

> ID：13454251
> 
> 赞同：1
> 
> 时间：2012-11-19T12:53:09.330
> 
> 标签：jquery, menu, animated

我有一个下拉菜单，使用 easeOutBounce 显示/隐藏子导航。它工作了几个月，然后我们的网络主机切换了服务器，突然间它就不起作用了。我完全感到困惑。我可以看到没有任何变化，但是动画不起作用。我在下面粘贴了我的代码。拜托，拜托，如果你发现它有问题，请告诉我，我很绝望。

```
$(document).ready(function() {
$('body').css('display','none');

$("ul.blockeasing li.main").mouseover(function() { 
  $(this).find('.subnav').stop().animate({height: '220px', opacity:'1'},{queue:false,duration:1500, easing:'easeOutBounce'})
    }); 
$("ul.blockeasing li.main").mouseout(function() { $(this).find('.subnav').stop().animate({height:'0px', opacity:'0'},{queue:false, duration:1600, easing: 'easeOutBounce'})
    });

    $("li.main").hover(function() {
          $(this).stop().animate({ backgroundColor: "#5b77bb"}, 600);},
       function() {
          $(this).stop().animate({ backgroundColor: "#b0b0b1" }, 600);
    });

 $('body').css('display', '');

}); 
```

这是HTML：

```
<!DOCTYPE html>

<head>

<title>Decinar | Home</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta http-equiv="content-type" content="text/html;charset=utf-8" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<script type="text/javascript" src="blockeasing.js"></script>

<link type="text/css" rel="stylesheet" href="css/IndexCSS.css" />
<link type="text/css" rel="stylesheet" href="css/headermenuCSS.css" />

</head>
<body>

<div class="menu">
<ul class="blockeasing">

<li class="main_logo"><a href="index.html"><img src="images/GoodLogo.png" style="border:none" alt="Decinar Logo" /></a>

<li class="main">The Decinar Program
<ul class="subnav">
<li><a href="program_overview.html">Program Overview</a></li>
<li><a href="program_benefits.html">Program Benefits</a></li>
<li><a href="decinar_modules.html">Decinar Module Series</a></li>
<li><a href="module_desc.html">Decinar Module Descriptions</a></li>
<li><a href="virtual_classroom.html">The Virtual Classroom</a></li>
<li><a href="360.html">360 Degree Feedback &amp Joint Venture</a></li>
</ul>
</li>
<li class="main">Learning Paths
<ul class="subnav">
<li><a href="enrolment_options.html">Program Enrolment Options</a></li>
<li><a href="decinar_discovery.html">Decinar Discovery Session</a></li>
<li><a href="resilient_optimism.html">Resilient Optimism Workshop</a></li>
<li><a href="students.html">Decinar for Students</a></li>
<li><a href="families.html">Decinar for Couples and Families</a></li>
</ul>
</li>
<li class="main">Licensing and Careers
<ul class="subnav">
<li><a href="licensing_news.html">What's new in licensing?</a></li>
<li><a href="licensing.html">Licensing Opportunities</a></li>
<li><a href="careers.html">Career and Partnership Opportunities</a></li>
</ul>
</li>
<li class="main">Connect with Decinar
<ul class="subnav">
<li><a href="contact.php">Contact Us</a></li>
<li><a href="blog.html">Blog</a></li>
<li><a href="testimonials.html">Graduate Testimonials</a></li>
<li><a href="socialmedia.html">Social Media Groups</a></li>
</ul>
</li>
</ul>

    </div> 
```

这是CSS：

```
div.menu{

    height:50px;
    position:relative;
    width:1200px;
    z-index:1000;
margin-left: auto;
margin-right: auto;
margin-bottom: -10px;
}     
ul.blockeasing {
    color: black;
    float:left;
    font-size:13px;
font-family: IstokWeb-Regular, Arial, sans-serif;
    padding:0;
    width:1300px;
}
ul.blockeasing li{
    background:none repeat scroll 0 0 #b0b0b1;
border-radius: 3px;
    border:none;
    display:block;
    float:left;
    height:60px;
    list-style:none outside none;
    margin:0 5px;
    padding:5px 0px;
    text-align:center;
    width:220px;
}

ul.blockeasing li.main_logo {
background: transparent none repeat scroll 0 0;
display: block;
float: left;
list-style: none outside none;
margin:-20px 5px 0 5px;
padding: 12px 5px;
width: 250px;
}

ul.blockeasing li.main{
  height:20px;
  position:relative;    
}

ul.blockeasing li a{
    color: black;
text-decoration: none;
}

ul.blockeasing li ul.subnav{
    background:none repeat scroll 0 0 #b0b0b1;
border-radius: 3px;
    border-bottom:5px solid #5b77bb;
    float:left;
    padding:0px 5px 0;
    position:relative;
    width:250px;
    margin-top:15px;
    height:0px;
    display:none
 }

ul.blockeasing li ul li{
    border:none;
    border-bottom:1px solid #ccc;
    padding:5px;
    float:left;
    width:100px;
    overflow:visible
} 
```

# for-loop - Mathematica，使用 for 循环定义多个函数

> ID：13454252
> 
> 赞同：0
> 
> 时间：2012-11-19T12:53:11.683
> 
> 标签：for-loop, wolfram-mathematica, user-defined-functions

我在 Mathematica 中使用通常的 for 循环进行计算：

`For[i=1,i<n+1,i++, ...calculation... ]`

对于每个`i`我需要定义一个函数`F_i[x_,y_]:=...`。这里“i”被假定为函数的标签。然而，这不是正确的 Mathematica 表达式。

问题是，如何定义标签 i 区分的多个函数？我的意思是，正确的语法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:25:27.553

我不确定您要做什么，但我有信心 for 循环不是 Mathematica 的方式。Mathematica 已经有了模式匹配，可能消除了循环的需要。

这样的事情怎么办

```
f[i_][x_,y_]:= i(x+y) 
```

或类似的东西

```
f[s_String][x_,y_]:=StringLength[s](x+y) 
```

甚至

```
f[s_,x_,y_]:=StringLength[s](x+y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:56:34.593

以下是一些可能有所帮助的步骤。下面有两个版本，第二个包含`i`函数定义的RHS上的值。

```
n = 2;

For[i = 1, i < n + 1, i++,
 f[i][x_, y_] := (x + y)*i]

?f 
```

全球`f

f[1][x_,y_] := (x+y) 我

f[2][x_,y_] := (x+y) 我

```
Clear[i]

f[2][2, 3] 
```

5 我

```
Quit[]

n = 2;

For[i = 1, i < n + 1, i++,
 With[{j = i},
  f[i][x_, y_] := (x + y)*j]]

?f 
```

全球`f

f[1][x$ *,y$* ] := (x$+y$) 1

f[2][x$ *,y$* ] := (x$+y$) 2

```
Clear[i]

f[2][2, 3] 
```

10

# java - Java 从属性文件创建 SessionFactory

> ID：13454253
> 
> 赞同：0
> 
> 时间：2012-11-19T12:53:16.220
> 
> 标签：java, hibernate

我通过读取项目外部的属性文件来创建会话工厂。我的属性文件如下，

```
hibernate.connection.driver_class=com.mysql.jdbc.Driver
hibernate.connection.username=root
hibernate.connection.password=root
hibernate.connection.url=jdbc:mysql://localhost:3306/hi5
hibernate.dialect=org.hibernate.dialect.MySQLDialect
entity=CmtFreeformpages,CmtNewsTicker 
```

我通过如下读取属性文件来创建 Sessionfactory，

```
properties.load(new FileReader(new File(global.constants.GlobalConstants.parentDirectory + File.separator + global.constants.GlobalConstants.propertiesFile)));
Configuration configuration = new Configuration().setProperties(properties);
Set<Object> setOfProperties = properties.keySet();
for(Object propertyObject : setOfProperties){
if (propertyObject != null) {
String propName = propertyObject.toString();
if(propName.equalsIgnoreCase("entity")){
String value = properties.getProperty(propName);
Object[] entities = value.split(",");
for(int i=0;i<entities.length;i++){
 configuration.addAnnotatedClass(entities[i]);
}
sessionFactory = configuration.buildSessionFactory(); 
```

但是 configuration.addAnnotatedClass 方法不接受字符串。那么如何将带注释的类添加到配置中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:04:02.193

由于`addAnnotatedClass()`接受 a `Class`，您需要使用`Class`es 获取给定类名`Class.forName()`：

```
configuration.addAnnotatedClass(Class.forName(entities[i])); 
```

请注意，`Class.forName()`需要完全限定的类名，即包含包名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:02:23.427

在将其添加到配置之前，您必须使用类加载器加载命名实体类，使用包名和类名。

调用 addPackage 也可能是值得的，以防在包级别有任何注释。

# android - 安卓操作栏

> ID：13454261
> 
> 赞同：0
> 
> 时间：2012-11-19T12:53:34.380
> 
> 标签：android, android-actionbar

![在此处输入图像描述](../Images/616b8d89e22b37d2da83983999c69622.png)

嗨朋友我想完全像这样实现操作栏（只有文本），如果我选择任何文本，气球上的蓝色边框会出现那个特定的文本，其余的都是正常的，如何实现这个。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:56:18.727

您可能是指导航选项卡。

您需要的一切都在这里解释：http: [//developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

# vb.net - 如何从 SSRS 的代码窗格中引用对象？

> ID：13454264
> 
> 赞同：1
> 
> 时间：2012-11-19T12:53:48.517
> 
> 标签：vb.net, reporting-services

如何从代码中引用对象（页面设置之后，引用之前）？

例如，给定这个类：

![在此处输入图像描述](../Images/3b78ed8ff399c951479d6eb862a5ecda.png)

如何在代码窗格中使用该对象，我尝试了这个，但它不起作用：

```
Public Shared Function Test() As String

    Test = "Hello " & m_Class1.SomeFunction()

End Function 
```

我也试过了，也没用：

```
Public Shared Function Test() As String

    Test = "Hello " & Code.m_Class1.SomeFunction()

End Function 
```

注意，我没有程序集的源代码，我不能直接在那里进行更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:24:37.287

AFAIK你不能。
您在代码窗格中编写的任何内容都必须是静态的（在 vb 中共享），因此您应该将“ClassLibrary2.Class1”包装在静态方法中并调用它`ClassLibrary2.MyStaticClass.MyStaticMethod()`（或者在新程序集中，因为您无法重新编译原件）

请注意，您确实可以从 RS 项目的表达式框中调用您的实例 m_Class1 实例，例如 Code.m_Class1.SomeMethod()

# cimg - 如何在 CimgDisplay 窗口中显示图像的直方图

> ID：13454265
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:53:52.553
> 
> 标签：cimg

我正在使用 Cimg 库

我有一张图片：`CImg image;`

和`CImgDisplay main_disp;`

我想`image`在 main_ 上显示直方图`disp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:30:25.103

这是 CImg 文档： [http ://cimg.sourceforge.net/reference/index.html](http://cimg.sourceforge.net/reference/index.html)

而且，这里有一些代码可以从图像计算直方图并将其显示在预先存在的显示器上：

```
// create display and image
CImg< float > image;
CImgDisplay< float > main_disp;

// do some stuff to populate image ...

// compute the histogram
const CImg< float > histogram = img.histogram( numberOfBins );

// display histogram on display
main_disp.display( histogram );

// wait until display is closed
while ( !main_disp.is_closed() ) { main_disp.wait(); } 
```

# objective-c - 如何在 iPhone 上处理大量数据？

> ID：13454266
> 
> 赞同：0
> 
> 时间：2012-11-19T12:53:57.100
> 
> 标签：objective-c, memory-management, cocos2d-iphone

我需要分析这首歌的一部分。当我在 iPhone 模拟器上测试时，我使用了`myArray[150][220500]`很大的 2d 数组.. 所以.. 我无法让这段代码在设备上工作，因为它没有足够的内存（代码适用于较小的 2d 数组，但这还不够用于分析）。

有什么想法我怎么能在设备上完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:21:45.243

这是太多的数据分配在堆栈上。根据[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)， iOS 在主线程上只有 1MB 的堆栈空间，辅助线程有 512KB。假设`myArray`被声明为`int`（4 个字节），您至少要分配

> `(4 * 150 * 220500) bytes = 132300000 bytes = 126.171 MB`

您将需要在堆上分配内存，而不是使用`malloc`or `calloc`。

```
//Initialize array
int **myArray = malloc(150 * sizeof(*myArray));
for(unsigned int i = 0; i < 150; ++i)
{
    //Use calloc if you want all 0's
    myArray[i] = malloc(220500 * sizeof(**myArray));
}

//Use array
myArray[10][2000] = 36;
NSLog(@"[10][2000] = %d", myArray[10][2000]);

//Delete array - You must do this to prevent memory leaks
for(unsigned int i = 0; i < 150; ++i)
{
    free(myArray[i]);
}
free(myArray); 
```

# symfony - Doctrine2 如何使用命名查询创建查询构建器？

> ID：13454270
> 
> 赞同：0
> 
> 时间：2012-11-19T12:54:07.483
> 
> 标签：symfony, doctrine-orm

我可以使用`@NamedQuery`注释来创建查询，但不能使用 QueryBuilder。如何从命名查询创建 QueryBuilder 以添加附加`where`语句，而不解析查询字符串？

# jsf-2 - primefaces p：ajax更新不起作用

> ID：13454272
> 
> 赞同：3
> 
> 时间：2012-11-19T12:54:19.103
> 
> 标签：jsf-2, primefaces

我正在使用带有单元内编辑的 primefaces 3.4.2 数据表。我想在调用编辑事件方法后，要更新数据表本身。我是这样做的：

```
<p:dataTable id="timeTable" var="log" value="#{reviewTimesheetBean.lazyModel}" paginator="true"
                            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="15,30,45,60"
                            paginatorPosition="bottom" rows="2" currentPageReportTemplate="{currentPage} de {totalPages}" lazy="true" editable="true" emptyMessage="#{label['empty.message']}">

  <p:ajax event="rowEdit" listener="#{reviewTimesheetBean.onEdit}" update="timeTable" />
   <p:ajax event="rowEditCancel" listener="#{reviewTimesheetBean.onCancel}" update="timeTable" />
....
</p:datatable> 
```

但是在 rowEdit 事件之后永远不会调用 load 方法。我也尝试使用选择器，但它也不起作用。不能以这种方式更新数据表吗？

谢谢

凯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T16:00:17.660

你试过remoteCommand吗？

```
<p:remoteCommand name="onCellEdit" action="#{bean.init}" update="formId" ignoreAutoUpdate="true" /> 
```

然后在您的数据表中：

```
<p:ajax event="cellEdit" oncomplete="onCellEdit()" listener="#{bean.onCellEdit}" /> 
```

PS。remoteCommand 就在数据表的上方……不确定这是否有任何影响。

请注意，onComplete 值必须与远程命令的名称匹配。

# ios - xcode 4：如何添加自定义编译器？

> ID：13454273
> 
> 赞同：1
> 
> 时间：2012-11-19T12:54:18.023
> 
> 标签：ios, xcode, compiler-construction

Xcode*似乎*允许通过 Build Rules 选项卡为源文件指定自定义编译器（将系统 C 规则复制到目标，选择“Custom Script”。只是为了测试这个概念，我写成`echo $*`脚本。但它并不是真的运行该脚本（没有输出发送到控制台）；最终结果是没有构建文件，所以后来我得到一个链接错误。

我用错了吗？在 Xcode 4.x 中使用自定义编译器的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:08:47.443

我试过你的例子。除非我将输出文件添加到构建规则的输出文件表中，否则脚本不会运行。然后脚本运行，但结果出现在构建脚本而不是控制台中。通过选择 View > Navigator > Show Log Navigator 打开日志导航器。从日志导航器中选择您的构建以打开构建结果窗口。在构建结果窗口中应该有一个运行自定义 shell 脚本步骤。台阶的右侧是一个带有几条水平线的小按钮。单击该按钮以显示构建脚本。

如果您想对项目中的某些文件使用自定义编译器，您可能会发现将运行脚本构建阶段添加到目标并将要编译的文件添加到运行脚本构建阶段会更容易。

# fibonacci - 如果输入是斐波那契数列中的第 n 项，则找到 n

> ID：13454284
> 
> 赞同：0
> 
> 时间：2012-11-19T12:54:29.407
> 
> 标签：fibonacci, series

在斐波那契数列中，我们假设第 n 个斐波那契项是 T。F(n)=T。但我想编写一个程序，它将 T 作为输入并返回 n，这意味着它在系列中是哪个术语（假设 T 总是一个斐波那契数。）我想找出是否有一种有效的方法来找到它.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:08:49.433

简单的方法是简单地开始生成斐波那契数，直到 F(i) == T，如果正确实施（阅读：非递归），其复杂度为 O(T)。此方法还允许您确保 T 是有效的斐波那契数。

如果*保证*T 是有效的斐波那契数，则可以使用近似规则： [公式](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibFormula.html#formula)

看起来很复杂，其实不然。要点是：从某一点开始，F(i+1)/F(i) 的比值变为一个常数值。由于我们不是在生成斐波那契数，而只是在寻找“索引”，因此我们可以放弃其中的大部分并实现以下内容：

```
breakpoint := f(T)
Any f(i) where i > T = f(i-1)*Ratio = f(T) * Ratio^(i-T) 
```

我们可以通过简单地取 Log(N, R) 来得到相反的结果，R 是 Ratio。通过调整早期数字的不准确性，我们甚至不必选择断点（如果你这样做：它对于 i > 17 是正确的）。

该比率约为 1.618034。取 6765 (= F(20)) 的 log(1.618034)，我们得到的值为 18.3277。对于任何更高的斐波那契数，精度保持不变，因此只需向下舍入并加 2 即可为我们提供准确的斐波那契“等级”（假设 F(1) = F(2) = 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:05:17.567

第一步是以非递归方式实现 fib 数，例如

```
fib1=0;fib2=1;
for(i=startIndex;i<stopIndex;i++)
{
     if(fib1<fib2)
     {
        fib1+=fib2;
        if(fib1=T) return i;
        if(fib1>T) return -1;
     }
     else
     {
        fib2+=fib1;
        if(fib2=T) return i;
        if(fib2>t) return -1;
     }
} 
```

这里 startIndex 将设置为 3 stopIndex 将设置为 10000 左右。要减少迭代，您还可以选择 2 个种子编号，它们是序列更靠后的连续 fib 编号。然后将 startIndex 设置为下一个索引，并通过适当调整 stopIndex 进行计算。我建议根据机器性能和最大预期输入将序列分成几个部分，以最小化运行时间。

# html - Firefox 上的搜索框损坏

> ID：13454285
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:54:30.837
> 
> 标签：html, css

我正在尝试用 css 制作一些美容搜索框。

在 chrome 上，这工作正常，但在 FF 上，搜索按钮坏了..

```
 <form class="form-wrapper cf" action="" method="post">
        <input type="search" placeholder="O que voce procura?" required>
        <button type="submit">BUSCAR</button>
    </form> 
```

我的输入字段 css：

```
 /* Form text input */
    .form-wrapper input {
        width: 230px;
        height: 30px;
        padding: 0px 10px 0px 30px;
        padding-top:5px\9;
        float: left;    
        font: 16px 'Maven Pro', Arial, Tahoma, serif;
        color:#959595;
        border: 0;
        background: #eee url(imagens/lupa.png) no-repeat;
        background-position:5px center;
        border-radius: 3px 0 0 3px;      
    }
    .form-wrapper input:focus {
        outline: 0;
        background: #fff url(imagens/lupa.png) no-repeat;
        background-position:5px center;
        /*box-shadow: 0 0 2px rgba(0,0,0,.8) inset;*/
    } 
```

这是我的小提琴：http: [//jsfiddle.net/NeRFC/](http://jsfiddle.net/NeRFC/)

在 Chrome 和 Firefox 上打开以查看问题

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:58:59.293

刚刚从 .form-wrapper 中删除了宽度，它似乎可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:02:22.737

尝试将 mozilla 规则添加到 .form-wrapper 输入：

```
-moz-border-radius: 3px 0 0 3px; 
```

另外，尝试正确注释这些行：

在 .form-wrapper 输入中：

```
background: #eee url(imagens/lupa.png) no-repeat; 
```

到

```
#background: eee url(imagens/lupa.png) no-repeat; 
```

在 .form-wrapper 中输入：焦点：

```
background: #fff url(imagens/lupa.png) no-repeat; 
```

到

```
#background: fff url(imagens/lupa.png) no-repeat; 
```

马克西姆

# javascript - 以 JSON 格式获取 Twitter 订阅源，无需身份验证

> ID：13454287
> 
> 赞同：25
> 
> 时间：2012-11-19T12:54:36.257
> 
> 标签：javascript, twitter

几年前我写了一个小的 JavaScript，它抓取了用户（我的）最近的推文，然后将其解析出来以显示，包括链接、日期等。

它使用这个 json 调用来检索推文，但它不再有效。

```
http://twitter.com/statuses/user_timeline/radfan.json 
```

它现在返回错误：

```
{"errors":[{"message":"Sorry, that page does not exist","code":34}]} 
```

我已经研究过使用 api 版本（下面的代码），但这需要身份验证，我宁愿避免这样做，因为它只是为了在我的网站上显示我的最新推文，无论如何在我的个人资料页面上都是公开的：

```
http://api.twitter.com/1/statuses/radfan.json 
```

我没有跟上 Twitter 的 API 更改，因为我不再真正使用它，有没有办法解决这个问题，还是不再可能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T04:21:57.000

以前，**搜索 API**是唯一不需要某种形式的**OAuth**的 Twitter API 。现在它确实需要身份验证。

Twitter 的**搜索 API**是通过第三方收购获得的——他们很少支持它，而且似乎对它的存在不感兴趣。最重要的是，有效负载存在许多限制，包括但不限于您返回的**JSON**或**XML**文件中的一组**键：值**对严重减少。

 ****听到这话，我惊呆了。我花了很长时间弄清楚如何使用最少的代码来执行简单的**GET**请求（例如显示时间线）。

我决定采用**OAuth**路线来确保相关的有效负载。您需要一种服务器端语言来执行此操作。**JavaScript**对最终用户可见，因此在 .js 文件中包含必要的**密钥**和**机密是一个坏主意。**

我不想使用一个大图书馆，所以我的答案是**PHP**和 @Rivers 的答案[在这里](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1/14007402#14007402)的帮助。@lackovic10 下面的答案描述了如何在身份验证中包含查询。

我希望这可以帮助其他人节省思考如何将 Twitter 的 API 与新的**OAuth**要求一起使用的时间。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-18T18:19:50.990

您无需登录即可通过高级搜索访问和抓取 Twitter：

*   [https://twitter.com/search-advanced](https://twitter.com/search-advanced)

**获取请求**

执行基本搜索请求时，您会得到：

```
https://twitter.com/search?q=Babylon%205&src=typd 
```

*   q（我们的查询编码）
*   src（假设是查询的来源，即键入）

默认情况下，Twitter 返回前 25 条结果，但如果你点击 `all`你可以获得实时推文：

```
https://twitter.com/search?f=realtime&q=Babylon%205&src=typd 
```

**JSON 内容**

更多推文通过 AJAX 加载到页面上：

```
https://twitter.com/i/search/timeline?f=realtime&q=Babylon%205&src=typd&include_available_features=1&include_entities=1&last_note_ts=85&max_position=TWEET-553069642609344512-553159310448918528-BD1UO2FFu9QAAAAAAAAETAAAAAcAAAASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

用于`max_position`请求下一条推文

以下 json 数组返回抓取内容所需的所有内容：

```
https://twitter.com/i/search/timeline?f=realtime&q=Babylon%205&src=typd 
```

*   has_more_items (bool)
*   items_html (html)
*   最大位置（键）
*   refresh_cursor（键）

**DOM 元素**

这里有一个`DOM elements`你可以用来提取的列表

作者推特句柄

```
div.original-tweet[data-tweet-id] 
```

作者姓名

```
div.original-tweet[data-name] 
```

作者的用户ID

```
div.original-tweet[data-user-id] 
```

帖子的时间戳

```
span._timestamp[data-time] 
```

帖子的时间戳，以毫秒为单位

```
span._timestamp[data-time-ms] 
```

推文文本

```
p.tweet-text 
```

转推数

```
span.ProfileTweet-action–retweet > span.ProfileTweet-actionCount[data-tweet-stat-count] 
```

收藏数量

```
span.ProfileTweet-action–favorite > span.ProfileTweet-actionCount[data-tweet-stat-count] 
```

**资源**

*   [https://code.recuweb.com/2015/scraping-tweets-directly-from-twitter-without-authentication/](https://code.recuweb.com/2015/scraping-tweets-directly-from-twitter-without-authentication/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-08T13:04:16.143

如果您仍在寻找 JSON 中未经身份验证的推文，这应该可以工作： [https ://github.com/cosmocatalano/tweet-2-json](https://github.com/cosmocatalano/tweet-2-json)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:42:50.697

您可以使用 twitter api v1 获取推文，而无需使用 OAuth。例如：[这个](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&trim_user=true&screen_name=jack&page=0&count=100)链接会变成@jack 的最后 100 条推文。

时间线文档在[这里](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-03T18:11:01.770

这是一个快速的 hack（真的是一个 hack，应该谨慎使用，因为它不是未来的证明），它使用[http://anyorigin.com](http://anyorigin.com)来抓取 twitter 站点以获取最新的推文。

[http://codepen.io/JonOlick/pen/XJaXBd](http://codepen.io/JonOlick/pen/XJaXBd)

它通过使用 anyorigin（您必须付费才能使用它）来获取 HTML 来工作。然后它使用 jquery 解析 HTML 以提取相关的推文。

移动网站上的推文使用 .tweet-text 类的 div，所以这很轻松。

相关代码如下所示：

```
$.getJSON('http://anyorigin.com/get?url=mobile.twitter.com/JonOlick&callback=?', function(data){

  // Remap ... utf8 encoding to ascii. 
  var bar = data.contents;
  bar = bar.replace(/â€¦/g, '...');

  var el = $( '<div></div>' );
  el.html(bar);

  // Change all links to point back at twitter
  $('.twitter-atreply', el).each(function(i){
    $(this).attr('href', "https://twitter.com" + $(this).attr('href'))
  });

  // For all tweets
  $('.tweet-text', el).each(function(i){
    // We only care about the first 4 tweets
    if(i < 4) {
      var foo = $(this).html();
      $('#test').html($('#test').html() + "<div class=ProfileTweet><div class=ProfileTweet-contents>" + foo + "</div></div><br>");
    }
  });

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T13:03:42.373

正如您在[文档](https://dev.twitter.com/docs/auth)中看到的那样，使用 REST API 您需要[OAuth 令牌](https://dev.twitter.com/docs/auth/obtaining-access-tokens)才能执行此操作。幸运的是，我们可以使用[搜索](https://dev.twitter.com/docs/using-search)（不使用 OAuth）并使用`from:[USERNAME]`运算符

~~示例： [http](http://search.twitter.com/search.json?q=from:marcofolio)
://search.twitter.com/search.json?q=from:marcofolio 将为您提供一个 JSON 对象，其中包含来自该用户的推文，其中~~

```
object.results[0] 
```

~~会给你最后一条推文。~~

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-01T15:22:31.057

您可以使用 Twitter API 包装器，例如[TweetJS.com](https://www.TweetJS.com)，它提供一组有限的 Twitter API 功能，但不需要身份验证。它是这样称呼的；

```
TweetJs.ListTweetsOnUserTimeline("PetrucciMusic",
function (data) {
    console.log(data);
}); 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-05-06T17:20:38.340

方法“GET statuses/user_timeline”需要用户身份验证，如您在官方文档中看到的：

您可以使用不需要身份验证的搜索方法“GET 搜索”。

你有一个从这里开始的代码：http: [//jsfiddle.net/73L4c/6/](http://jsfiddle.net/73L4c/6/)

```
function searchTwitter(query) {
    $.ajax({
        url: 'http://search.twitter.com/search.json?' + jQuery.param(query),
        dataType: 'jsonp',
        success: function(data) {
            var tweets = $('#tweets');
            tweets.html('');
            for (res in data['results']) {
                tweets.append('<div>' + data['results'][res]['from_user'] + ' wrote: <p>' + data['results'][res]['text'] + '</p></div><br />');
            }
        }
    });
}

$(document).ready(function() {
    $('#submit').click(function() {
        var params = {
            q: $('#query').val(),
            rpp: 5
        };
        // alert(jQuery.param(params));
        searchTwitter(params);
    });
}) 
```****

# java - 如何判断一个菜单项是否被点击

> ID：13454289
> 
> 赞同：3
> 
> 时间：2012-11-19T12:54:42.247
> 
> 标签：java, swing, jmenuitem

如标题所述，我需要知道如何确定是否单击了菜单项，然后运行相关的功能。例如，我有一个带有 JMenuItem“退出”的 JMenu，单击它时应该运行一个关闭表单方法。

```
import javax.swing.*;

public class selector_form extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = -5963842156289770842L;

public selector_form(String name)
{
    super.setTitle(name);
    setupComponents(this);
    super.setVisible(true);

}

private void setupComponents(JFrame frame)
{

    JMenuItem file_items = new JMenuItem("Exit");
    JMenuItem config_items = new JMenuItem("Preferences");
    JMenuItem[] machine_items = {new JMenuItem("Refresh"), 
            new JMenuItem("Add Dynamically"), new JMenuItem("Remove Dynamically")
    };
    JMenuItem[] emulator_items = {new JMenuItem("Start Emulator"),
            new JMenuItem("Stop Emulator"), new JMenuItem("Pause Emulator"),
            new JMenuItem("Reset Emulator"), new JMenuItem("Crash Emulator")
    };
    JMenuItem[] memory_items = {new JMenuItem("View Emulator Memory"),
            new JMenuItem("System Cheats"), new JMenuItem("Dump Emulator Memory"),
            new JMenuItem("Edit Specific Address"), 
            new JMenuItem("Show Allocations"), new JMenuItem("Allocate Memory"),
            new JMenuItem("DeAllocate Memory")
    };
    JMenuItem[] cpu_items = {new JMenuItem("Show Host Specs"),
            new JMenuItem("Show Emulator Specs"), 
            new JMenuItem("Enable HyperThreadding")
    };
    JMenuItem[] about_items = {new JMenuItem("Help Contents"), 
            new JMenuItem("About")
    };

    frame.setSize(800, 600);

    JMenuBar jmb = new JMenuBar();
    JMenu jm_a = new JMenu("File");
    JMenu jm_c = new JMenu("Config");
    JMenu jm_d = new JMenu("Machines");
    JMenu jm_e = new JMenu("Emulator");
    JMenu jm_f = new JMenu("Memory");
    JMenu jm_g = new JMenu("CPU");
    JMenu jm_h = new JMenu("About");

    jm_a.add(file_items);
    jm_c.add(config_items);
    for(JMenuItem item : machine_items)
        jm_d.add(item);
    for(JMenuItem item : emulator_items)
        jm_e.add(item);
    for(JMenuItem item : memory_items)
        jm_f.add(item);
    for(JMenuItem item : cpu_items)
        jm_g.add(item);
    for(JMenuItem item : about_items)
        jm_h.add(item);

    jmb.add(jm_a);
    jmb.add(jm_c);
    jmb.add(jm_d);
    jmb.add(jm_e);
    jmb.add(jm_f);
    jmb.add(jm_g);
    jmb.add(jm_h);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

    frame.setJMenuBar(jmb);

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:57:45.797

只需添加一个`ActionListener`。

```
menu_item.addActionListener(this); 
```

并实现`ActionListener`接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:59:37.543

您可以使用[ActionListener](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ActionListener.html)[来做到这一点](http://www.java2s.com/Tutorial/Java/0240__Swing/ListeningtoJMenuItemEventswithanActionListener.htm)。您可以创建自己的 ActionListener 类。

```
class MenuActionListener implements ActionListener {
  public void actionPerformed(ActionEvent e) {
    System.out.println("Selected: " + e.getActionCommand());    
  }
} 
```

然后将其添加到 JMenuItem。

```
JMenuItem newMenuItem = new JMenuItem("New");
newMenuItem.addActionListener(new MenuActionListener()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:14:44.980

感谢所有的答案。这就是我所做的。

我使用了 totymedli 的示例并编写了一个名为 MenuActionHelper 的类，该类调用了一个 MenuEventHandler 专业类，该类将一个 ID 传递给调用所需函数的函数。

更新的选择器形式：

```
package application;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class selector_form extends JFrame {

public static MenuEventHandler mehandler;
/**
 * 
 */
private static final long serialVersionUID = -5963842156289770842L;

public selector_form(String name)
{
    super.setTitle(name);
    setupComponents(this);
    super.setVisible(true);
    mehandler = new MenuEventHandler(this);

}

private void setupComponents(JFrame frame)
{

    JMenuItem file_items = new JMenuItem("Exit");
    JMenuItem config_items = new JMenuItem("Preferences");
    JMenuItem[] machine_items = {new JMenuItem("Refresh"), 
            new JMenuItem("Add Dynamically"), new JMenuItem("Remove Dynamically")
    };
    JMenuItem[] emulator_items = {new JMenuItem("Start Emulator"),
            new JMenuItem("Stop Emulator"), new JMenuItem("Pause Emulator"),
            new JMenuItem("Reset Emulator"), new JMenuItem("Crash Emulator")
    };
    JMenuItem[] memory_items = {new JMenuItem("View Emulator Memory"),
            new JMenuItem("System Cheats"), new JMenuItem("Dump Emulator Memory"),
            new JMenuItem("Edit Specific Address"), 
            new JMenuItem("Show Allocations"), new JMenuItem("Allocate Memory"),
            new JMenuItem("DeAllocate Memory")
    };
    JMenuItem[] cpu_items = {new JMenuItem("Show Host Specs"),
            new JMenuItem("Show Emulator Specs"), 
            new JMenuItem("Enable HyperThreadding"), 
            new JMenuItem("Show Disassembly in real time")
    };
    JMenuItem[] about_items = {new JMenuItem("Help Contents"), 
            new JMenuItem("About")
    };

    frame.setSize(800, 600);

    JMenuBar jmb = new JMenuBar();
    JMenu jm_a = new JMenu("File");
    JMenu jm_c = new JMenu("Config");
    JMenu jm_d = new JMenu("Machines");
    JMenu jm_e = new JMenu("Emulator");
    JMenu jm_f = new JMenu("Memory");
    JMenu jm_g = new JMenu("CPU");
    JMenu jm_h = new JMenu("About");

    jm_a.add(file_items);
    jm_c.add(config_items);
    for(JMenuItem item : machine_items)
        jm_d.add(item);
    for(JMenuItem item : emulator_items)
        jm_e.add(item);
    for(JMenuItem item : memory_items)
        jm_f.add(item);
    for(JMenuItem item : cpu_items)
        jm_g.add(item);
    for(JMenuItem item : about_items)
        jm_h.add(item);

    jmb.add(jm_a);
    jmb.add(jm_c);
    jmb.add(jm_d);
    jmb.add(jm_e);
    jmb.add(jm_f);
    jmb.add(jm_g);
    jmb.add(jm_h);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

    frame.setJMenuBar(jmb);

    //Menu Action Helpers
    file_items.addActionListener(new MenuActionHelper(1));

}

}

/* EFFECTIVE ACTIONLISTENER
 * 
 * passes an integral argument to MeunEventHandler
 */

class MenuActionHelper implements ActionListener
{

public static int digitalIdentifier;

public MenuActionHelper(int i)
{
    MenuActionHelper.digitalIdentifier = i;
}
@Override
public void actionPerformed(ActionEvent arg0) 
{
    try
    {
        if(!(selector_form.mehandler.parseEvent(MenuActionHelper.digitalIdentifier)))
        {
            throw new Exception("Invalid Menu Event ID Parsed!");
        }
        else return;
    }catch(Exception e)
    {
        e.printStackTrace();
    }

}

} 
```

和新的 MenuEventHandler 类：

```
package application;

import javax.swing.JFrame;

public class MenuEventHandler {

/* have a static number which is the max an id can be */
public static final int maxActionId = 1000; //good large number

public static JFrame frame;

public MenuEventHandler(JFrame frame) //import jframe functionality
{
    MenuEventHandler.frame = frame;
}

public boolean parseEvent(int i)
{
    boolean success = false;

    switch(i)
    {
    case 1:
    {
        MenuEventHandler.frame.dispose();
        success = true;
    }
    break;
    }
    return success;
}
} 
```

现在，如果有人单击退出 MenuItem，则表单关闭并且应用程序结束。

# python - 你如何在 python 中安排你的站点包文件夹

> ID：13454291
> 
> 赞同：0
> 
> 时间：2012-11-19T12:54:44.210
> 
> 标签：python, python-module

我刚刚下载了 django 并将其安装到`C:\Python27\Lib\site-packages` 所以现在我的`site-packages`目录看起来相当杂乱无章，有 5 个单独的文件夹，一堆文本文件和一个 python 脚本。`site-packages`我应该为 django 包创建一个子目录并将所有内容存储在其中吗？如果我这样做，python intrepeter 会知道在`Django`目录中查找`site-packages`django 包的目录吗？还是我必须改变一些环境变量？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:06:41.827

我不确定你是否在问它，因为这是你*需要*知道的，因为你有一些复杂的设置。如果您只想安装 Django，您应该按照他们[网站上](https://docs.djangoproject.com/en/dev/topics/install/?from=olddocs)的安装说明进行操作：

```
pip install Django 
```

site-packages 中的目录顺序是 Python 构建的内部机制，我认为你不应该更改它，除非你想创建自己的包并想了解更多关于 python 如何查找已安装包的信息（如果这是我将开始阅读本文档的情况：http: [//docs.python.org/2/distutils/index.html](http://docs.python.org/2/distutils/index.html)）

正如对您的问题的评论以及[Django](https://docs.djangoproject.com/en/dev/topics/install/?from=olddocs)的文档中所建议的那样，您应该考虑使用[virtualenv](http://www.virtualenv.org/en/latest/)，尤其是在开发将部署在具有特定 Django 版本的服务器上的 web 应用程序时。随着时间的推移，您会发​​现您想要创建需要不同版本模块的其他应用程序，并且仍然支持您需要使用 virtualenv 的现有应用程序。

# macos - 当它不是前端应用程序时，如何将键盘事件发送到我的应用程序？

> ID：13454292
> 
> 赞同：1
> 
> 时间：2012-11-19T12:54:47.187
> 
> 标签：macos, cocoa

我希望我的应用程序在发生某个键盘事件时收到通知（例如，在不到 0.5 秒的时间内按下 alt 键两次）。该应用程序不应该是前端应用程序。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:56:13.433

您需要为修改键更改安装事件点击。

这应该让你开始：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    CFMachPortRef eventTap;
    CGEventMask eventMask;
    CFRunLoopSourceRef runLoopSource;

    eventMask = CGEventMaskBit(kCGEventFlagsChanged);

    eventTap = CGEventTapCreate(kCGSessionEventTap, kCGHeadInsertEventTap, 0,
                                eventMask, KeyHandler, NULL);
    if (!eventTap) {
        NSLog(@"failed to create event tap");
        exit(1);
    }

    runLoopSource = CFMachPortCreateRunLoopSource(kCFAllocatorDefault, eventTap, 0);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), runLoopSource, kCFRunLoopCommonModes);    
    CGEventTapEnable(eventTap, true);
}

static CGEventFlags previousFlags = 0;

CGEventRef KeyHandler(CGEventTapProxy proxy, CGEventType type, CGEventRef event, void *refcon)
{
    if (type == kCGEventFlagsChanged) {
        CGEventFlags curAltkey = CGEventGetFlags(event)&kCGEventFlagMaskAlternate;
        if (curAltkey != previousFlags)
            NSLog(@"alt key changed");
    }

    return event;
} 
```

# mouse - Microsoft Visual SourceSafe 使用双显示器非动作鼠标滚轮

> ID：13454294
> 
> 赞同：1
> 
> 时间：2012-11-19T12:55:01.677
> 
> 标签：mouse

我在双显示器中使用 Microsoft Visual SourceSafe 但是！！主显示器正常动作鼠标滚轮第二显示器无动作！！

什么问题？？

我安装了鼠标驱动程序（微软）并更换了鼠标

但之前相等

鼠标型号：微软无线鼠标1000和微软无线键盘800

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:10:52.760

试试这个：VB6 和其他的滚轮修复：http: [//www.joebott.com/vb6scrollwheel.htm](http://www.joebott.com/vb6scrollwheel.htm)

*注意：SourceSafe 是旧版软件，请不要再使用它。*

# jsf - 根据 selectOneMenu 值有条件地渲染组件

> ID：13454295
> 
> 赞同：2
> 
> 时间：2012-11-19T12:55:02.713
> 
> 标签：jsf, selectonemenu, conditional-rendering

有没有办法根据用户从 selectOneMenu 组件中选择的当前值来呈现组件？我的 selectOneMenu 组件填充了一个枚举，该枚举由两个值组成，吸烟者和非吸烟者。如果用户选择了吸烟者，我想在其下方呈现一个复选框，让用户检查他们在 10 天、20 天、30 天以上等天抽了多少烟。如果他们的用户选择了非吸烟者，我也希望相反的工作，即复选框不会呈现/消失。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T13:28:45.267

`rendered`只需检查目标组件属性中下拉菜单的值，并通过`<f:ajax>`. 这是一个启动示例：

```
<h:selectOneMenu value="#{bean.item}">
    <f:selectItem itemValue="one" />
    <f:selectItem itemValue="two" />
    <f:selectItem itemValue="three" />
    <f:ajax render="results" />
</h:selectOneMenu>

<h:panelGroup id="results">
    <h:panelGroup rendered="#{bean.item eq 'one'}">
        You have selected "one".
    </h:panelGroup>
    <h:panelGroup rendered="#{bean.item eq 'two'}">
        You have selected "two".
    </h:panelGroup>
    <h:panelGroup rendered="#{bean.item eq 'three'}">
        You have selected "three".
    </h:panelGroup>
</h:panelGroup> 
```

如果您想根据所选值执行一些业务逻辑，请使用`<f:ajax listener>`.

```
<f:ajax listener="#{bean.changeItem}" render="results" /> 
```

```
public void changeItem() {
    someResult = someService.getByItem(item);
} 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)
*   [如何在更改 ah:selectOneMenu 时加载和显示依赖的 h:selectOneMenu](https://stackoverflow.com/questions/11505248/how-to-display-dependent-hselectonemenus-with-a-list-of-countries-and-cities/)
*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components)

# ejb-3.0 - 在上下文查找中未识别 EJB 类

> ID：13454298
> 
> 赞同：0
> 
> 时间：2012-11-19T12:55:07.513
> 
> 标签：ejb-3.0

我编写了一个示例 EJB 类，如下所示：

```
@Stateless(mappedName = "BusinessSLSB")
@Local(BusinessLocal.class)
@TransactionAttribute(value = TransactionAttributeType.REQUIRES_NEW)
public  class BusinessSLSB implements BusinessLocal{

            //body of the class

} 
```

我在同一个项目中有一个非 EJB 类，我尝试通过以下方式查找文件：

```
public class GetTransactionData {
private BusinessLocal business;
public GetTransactionDataForMercury(){
    notifier.info("Creating an object of GetTransactionData");
    try{
        InitialContext ctx = new InitialContext();
        business = (BusinessLocal) ctx.lookup("BusinessSLSB");
    }catch(Exception ne){
        notifier.error("Error occurred --> " + ne.getMessage());
    }
} 
```

当我执行代码时，出现以下异常：

```
Error occurred --> Unable to resolve BusinessSLSB. Resolved ' 
```

我在提供查找名称时出错了吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:55:36.140

没有任何 mappedName 的使用是可移植的。因此，您不能假设您通过该属性分配的名称最终将始终是顶级 JNDI 名称。

您使用的是哪个服务器？如果它支持 EJB 3.1，则删除 mappedName 并使用可移植的 JNDI 名称。否则无论如何都要删除 mappedName 并找出您的服务器分配的专有 JNDI 名称。许多人会在启动时将其打印在日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:44:53.693

我已经找到了解决此类问题的方法。解决方案是在 web.xml 文件中添加以下行：

```
<ejb-local-ref> 
    <ejb-ref-name>ejb/BusinessLocal</ejb-ref-name> 
    <local>dk.tdc.soa.smo.draco.ejb.BusinessLocal</local> 
 </ejb-local-ref> 
```

以及 GetTransactionData 中的以下行：

```
public class GetTransactionData {
      private BusinessLocal business;
      public GetTransactionDataForMercury(){
      notifier.info("Creating an object of GetTransactionData");
      try{
         InitialContext ctx = new InitialContext();
         business = (BusinessLocal) ctx.lookup("java:comp/env/ejb/BusinessLocal");
         }catch(Exception ne){
      notifier.error("Error occurred --> " + ne.getMessage());
      }
} 
```

# google-chrome - 铬与铬 [扩展比较]

> ID：13454300
> 
> 赞同：3
> 
> 时间：2012-11-19T12:55:13.897
> 
> 标签：google-chrome, google-chrome-extension, chromium

在比较开源浏览器 Firefox 和 Chromium 的扩展、附加组件、列表时，我试图找到一些有趣的数据。
我感兴趣的是多宿主扩展（在两个浏览器列表中都可用的扩展）。
但是在浏览 Chromium 扩展列表时，我发现它与 Chrome 中的列表相同。
**问题：-**
我可以在 Chrome 上使用每个扩展程序也在 Chromium 上吗？
- 如果没有，我在哪里可以找到我可以在 Chromium 上使用哪些扩展的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T13:51:55.490

是的，Chrome 和 Chromium 代码库基本相同（除了一些辅助功能，如自动更新）。Chrome 只是 Chromium 的品牌版本，因此所有相同的扩展都可以在两者中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T16:13:38.753

我对这个主题进行了调查，发现了 2 篇关于这个主题的文章。

## [Google Chrome 和 Chromium 浏览器有什么区别？](http://What%20Is%20The%20Difference%20Between%20Google%20Chrome%20And%20Chromium%20Browser?)

以及最近的

## [铬和铬有什么区别？](http://What%E2%80%99s%20the%20Difference%20Between%20Chromium%20and%20Chrome?)

作为开发人员，我对 Chromium 有强烈的偏见，将其用作测试工具和浏览器测试的基础。对 Google 的利益也有重大的不真实。

上面的第二篇文章声称 Chromium 没有 Google 后门数据收集（间谍软件）。这种说法**没有**得到测试的支持。需要进一步最近的测试和验证。

# jquery - 使用 jquery 插件初始化后更改 tinymce 工具栏按钮

> ID：13454301
> 
> 赞同：3
> 
> 时间：2012-11-19T12:55:13.837
> 
> 标签：jquery, tinymce

加载实例后，我需要更改工具栏按钮。下面的示例应该将按钮更改为仅显示保存和新文档，但事实并非如此。

[http://fiddle.tinymce.com/Hvcaab](http://fiddle.tinymce.com/Hvcaab)

```
<script type="text/javascript">
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true
});

$(function(){
    $('#testbutt').click(function(e){        
        console.log($('#testing').tinymce().theme.settings.theme_advanced_buttons1);
        $('#testing').tinymce().theme.settings.theme_advanced_buttons1 = "save,newdocument";
        console.log($('#testing').tinymce().theme.settings.theme_advanced_buttons1);
        $('#testing').tinymce().execCommand("mceRepaint");
        $('#testing').tinymce().render();
    });
})

</script>
<input type="button" id="testbutt" value="test">
<form method="post" action="dump.php">
        <textarea name="content" id="testing">
        </textarea>
</form> 
```

# version-control - Windows 7 上的 Clearcase 无法创建动态视图

> ID：13454303
> 
> 赞同：2
> 
> 时间：2012-11-19T12:55:16.217
> 
> 标签：version-control, clearcase

我的 Clearcase 版本：`7.1.0`。

在我安装 Clearcase 之后，我的操作系统是 Windows 7。我无法使用 Create View 创建动态视图。我发现当我从控制面板启动 clearcase 服务时，只有两个服务。

除了下载更高版本之外，有什么方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:19:48.197

ClearCase 7.1.2 部署在我们工作的 Windows 7 上。

但是，当我看到只有两个服务时，这意味着 MVFS（它是一个设备，而不是驱动程序）未能正确安装。

通常的解决方法是卸载并重新安装 ClearCase。
但不能保证 7.1.0。

* * *

OP补充说：

> 重装了三遍，问题依旧

这证实了 Windows 7 不支持 7.1.0（至少对于动态视图部分）。
正如“ [ClearCase 7.1.x 的系统要求](http://www-01.ibm.com/support/docview.wss?uid=swg21302974)”所证实的，Windows7 SP1 实际上至少需要 7.1.2.3。
即使这样，您也会遇到一些问题：“ [PM54437：Windows 7 64bit MVFS 客户端使用 ALBD_FIND_SERVER RPC 淹没 View Server 主机的 albd_server](http://www-01.ibm.com/support/docview.wss?uid=swg1PM54437) ”（需要 7.1.2.6）

因此建议获取最新的 7.1.x。

* * *

不过，在您的情况下，由于无法获得高于 7.1.0 的版本，您可以尝试在 Windows 7 上 安装[Virtual PC Windows Xp 。](http://www.microsoft.com/windows/virtual-pc/download.aspx)

> Microsoft Virtual PC for Windows（以前称为 Connectix Virtual PC）是一个基于客户端的软件虚拟化应用程序，它允许同时操作系统在单个 PC 上运行。
> 每个虚拟机在一个独立的、隔离的软件环境中模拟一个完整的硬件系统（从处理器到网卡），从而能够同时运行其他不兼容的系统。

[ClearCase 确实支持 Virtual PC](http://www-01.ibm.com/support/docview.wss?uid=swg21228619)。

# symfony - 在计时器分析器部分的自定义类别下对数据进行分组

> ID：13454309
> 
> 赞同：2
> 
> 时间：2012-11-19T12:55:41.990
> 
> 标签：symfony, symfony-2.1

我已被添加到计时器分析器部分的海关数据中，但似乎我在对其进行分组时遇到了问题。

我的代码看起来像：

```
if (null !== $this->stopwatch) {
    $e = $this->stopwatch->start($name.'.ws', 'webservice');
}

$soap->myWebServiceCall();

if (null !== $this->stopwatch) {
    $e->stop();
} 
```

`stopwatch`指的是服务与`id` `debug.stopwatch`

正如您在下面的屏幕显示中所见，它无法将结果分组到“Web 服务”类别中。（它当前将它们存储在“默认”部分下）。

怎么了 ？谢谢。

![计时器分析器](../Images/4a9577bbe571a912135c35330dfd88d2.png)

# python - 在不执行代码的情况下，你怎么能拥有 Python 3.x 的不兼容性？

> ID：13454315
> 
> 赞同：5
> 
> 时间：2012-11-19T12:56:07.057
> 
> 标签：python, python-2.7, compiler-warnings

做的时候`python --help`你有：

```
-3     : warn about Python 3.x incompatibilities that 2to3 cannot trivially fix 
```

执行时`python -3 hello.py`，检查已完成，但您的 hello.py 已执行。[我在这里](https://stackoverflow.com/questions/2042426/compile-python-py-file-without-executing)看到您可以只编译 .py 代码而不使用`py_compile`模块执行它，但是您不能使用 .py 调用该`-3`选项`py_compile`。如果不实际运行你的 python 代码，你怎么能得到所有这些警告？

# php - PHP 性能（操作码缓存/函数波动）

> ID：13454319
> 
> 赞同：3
> 
> 时间：2012-11-19T12:56:23.653
> 
> 标签：php, caching, immutability, opcode-cache

**背景故事**

我维护了一系列（网络）应用程序，它们都使用一个大型的本土 PHP 库。其中一些应用程序是员工使用的传统桌面应用程序，但其他应用程序（也与这个问题更相关）是 PHP 网站，随着受欢迎程度的持续增长，性能正成为一个更重要的问题。

**当前的 PHP 缓存方法**

为了加快我们的一个网站（它是一家商店，将其视为[thinkgeek.com](http://www.thinkgeek.com/)），我使用 memcached 来缓存不需要不断动态构建的网站的某些部分（例如某个类别的产品列表）。

我们还使用 APC 的出厂默认安装作为 OPCode 缓存。

这两种方法都显着改善了网站的性能，但我非常期待在优化的道路上走得更远。

**PHP中的函数波动率**

我本人来自数据库背景，我非常喜欢例如 PostgreSQL 如何使用[函数波动性](http://www.postgresql.org/docs/9.1/static/xfunc-volatility.html)来获得巨大的性能提升，同时保持可靠和准确的结果。

我的问题是，**是否有任何 PHP 扩展允许开发人员将某些函数（或类方法）标记为`IMMUTABLE`？**（意味着当给定相同的输入参数时，该函数的结果总是相同的）。然后，此缓存扩展可以缓存该函数的结果，这在使用大型代码库时会带来巨大的性能提升。

一个简单的例子是一个方法，例如`SomeClass::getWebsiteFooter();`它返回一些始终相同的 HTML 代码，除非网站已被更改（在这种情况下缓存将被刷新）。

这样的事情存在吗？我一直无法在市场上找到任何类似的东西。是否有任何其他可能对我的情况有益的性能改进方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:05:56.083

我会说您将 php 应用程序视为 Web 应用程序并实现了多个级别的缓存。

IMMUTABLE 方法 - 我认为这不是好方法。在数据库级别、应用程序级别（memcached）使用缓存是一个好的开始。

然后我建议在视图级别[缓存 Smarty 缓存](http://www.smarty.net/docs/en/caching.tpl)和缓存代理，如[Squid](http://www.squid-cache.org/)或[Varnish](https://www.varnish-cache.org/)

# wifi - 传感器操作软件

> ID：13454325
> 
> 赞同：2
> 
> 时间：2012-11-19T12:56:44.487
> 
> 标签：wifi

我正在寻找用于无线传感器网络环境中无线传感器管理的开源软件。更具体地说，我有一些基于 802.11 的温度传感器，它们使用 802.11 路由器与 PC 连接。我需要将可配置的开源软件放入 pc 以操纵来自传感器的信息。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T20:44:42.277

我一直在使用[Zenoss Core 社区](http://community.zenoss.org/)版来完成您提到的任务。它允许您监控多个温度传感器，将信息存储在循环数据库中。部署后，您无需执行过多的内务处理。

如果您的传感器实现了 SNMP（简单网络管理协议），您只需要根据制造商规格启用协议并让 zenoss 发现您的设备。

您可以根据您的自定义配置创建自定义报告和触发事件（例如，当温度超过一定水平时发送电子邮件）。

最后，如果使用 SNMP 以外的其他方法检索监控信息，您可以使用 Python 编写自定义脚本，以便帮助 zenoss 检索所需的信息。深入论坛。该脚本可能已经可用于您的传感器。

# ruby-on-rails - 在 Rails 3.1 的视图中打印模型的值

> ID：13454330
> 
> 赞同：0
> 
> 时间：2012-11-19T12:57:01.383
> 
> 标签：ruby-on-rails, view, ruby-on-rails-3.1

我正在将 Rails 3.0.17 应用程序升级到 Rails 3.1.8 (Ruby 1.9.2)，并且在视图中遇到了奇怪的行为。我有一个 @tasks 数组，我在视图的开头打印：

```
<%= pluralize(@tasks.first.estimates.last.work_hours, t("hour"), t("hours")) %> 
```

没关系，显示 @tasks 数组上第一个任务的所有估计中最后估计的 work_hours 属性。

但是下面几行我使用相同的代码再次打印它，并显示为 0。

有什么提示吗？

谢谢。

# wpf - 如何更改 Infragistics XamDataGrid 上的列标题标题

> ID：13454331
> 
> 赞同：2
> 
> 时间：2012-11-19T12:57:04.080
> 
> 标签：wpf, infragistics, xamdatagrid

这似乎有点微不足道，但我`XamDataGrid`在我的 WPF 应用程序中有一个我想自己设置它的列标题但不能。

绑定是到`BindingList<DictionaryEntry>`（不是那个`.Net`，但仍然只有`Key`和`Value`属性。

这些列被命名`Key`并且`Value`（如果我更改`DictionaryEntry`类中的属性名称，则更新），而我想在 XAML 中设置它们：（该`FieldsLayout`部分）

```
<igDP:XamDataGrid Grid.Row="1"
                  Grid.Column="0"
                  Name="ResultStructure"
                  DataSource="{Binding Path=VariablesDictionary, Mode=TwoWay, ValidatesOnExceptions=True}"
                  Theme="Aero"
                  GroupByAreaLocation="None"
                  IsEnabled="{Binding CanEditStructure}"
                  CellUpdating="ResultStructure_OnCellUpdating"
                  CellUpdated="ResultStructure_OnCellUpdated">
  <igDP:XamDataGrid.FieldLayoutSettings>
    <igDP:FieldLayoutSettings AllowClipboardOperations="All"
                              AllowFieldMoving="WithinLogicalRow"
                              AllowAddNew="True"
                              AddNewRecordLocation="OnBottom"
                              AllowDelete="True" />
  </igDP:XamDataGrid.FieldLayoutSettings>
  <igDP:XamDataGrid.FieldLayouts>
    <igDP:FieldLayout>
      <igDP:FieldLayout.Fields>
        <igDP:Field Name="Column" Tag="Column" Width="Auto" />
        <igDP:Field Tag="Variable" Name="Variable" Width="Auto" />
      </igDP:FieldLayout.Fields>
    </igDP:FieldLayout>
  </igDP:XamDataGrid.FieldLayouts>
</igDP:XamDataGrid> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:30:17.247

这个问题有一个标签属性

```
<igDP:Field Name="propertyName" Label="Your custom column name" /> 
```

**编辑 2**

这是一个对我有用的完整示例（注意：您需要 AutoGenerateFields="False"），现在带有视图模型。

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:igDP="http://infragistics.com/DataPresenter"
        Title="Window1"
        Height="400"
        Width="600">
  <Grid>
    <igDP:XamDataGrid DataSource="{Binding SampleDataList}"
                      Theme="Aero"
                      GroupByAreaLocation="None">
      <igDP:XamDataGrid.FieldLayoutSettings>
        <igDP:FieldLayoutSettings AllowClipboardOperations="All"
                                  AllowFieldMoving="WithinLogicalRow"
                                  AllowAddNew="True"
                                  AddNewRecordLocation="OnBottom"
                                  AutoGenerateFields="False"
                                  AllowDelete="True" />
      </igDP:XamDataGrid.FieldLayoutSettings>
      <igDP:XamDataGrid.FieldLayouts>
        <igDP:FieldLayout>
          <igDP:FieldLayout.Fields>
            <igDP:Field Name="Sample1"
                        Label="Custom Label Spalte 1"
                        Width="Auto" />
            <igDP:Field Name="Sample2"
                        Label="Custom Label Spalte 2"
                        Width="Auto" />
          </igDP:FieldLayout.Fields>
        </igDP:FieldLayout>
      </igDP:XamDataGrid.FieldLayouts>
    </igDP:XamDataGrid>
  </Grid>
</Window> 
```

后面的代码和使用 BindingList 的视图模型

```
public partial class Window1 : Window
{
  public Window1() {
    this.DataContext = new SampleDataViewModel();
    this.InitializeComponent();
  }
}

public class SampleDataViewModel : DependencyObject
{
  public class SampleData : INotifyPropertyChanged
  {
    private string sample1;
    private string sample2;

    public string Sample1 {
      get { return this.sample1; }
      set {
        if (Equals(value, this.sample1)) {
          return;
        }
        this.sample1 = value;
        this.OnPropertyChanged("Sample1");
      }
    }

    public string Sample2 {
      get { return this.sample2; }
      set {
        if (Equals(value, this.sample2)) {
          return;
        }
        this.sample2 = value;
        this.OnPropertyChanged("Sample2");
      }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName) {
      var handler = this.PropertyChanged;
      if (handler != null) {
        handler(this, new PropertyChangedEventArgs(propertyName));
      }
    }
  }

  public static readonly DependencyProperty SampleDataListProperty =
    DependencyProperty.Register("SampleDataList", typeof(BindingList<SampleData>), typeof(Window1), new PropertyMetadata(default(BindingList<SampleData>)));

  public BindingList<SampleData> SampleDataList {
    get { return (BindingList<SampleData>)this.GetValue(SampleDataListProperty); }
    set { this.SetValue(SampleDataListProperty, value); }
  }

  public SampleDataViewModel() {
    this.SampleDataList = new BindingList<SampleData>();
    for (int i = 0; i < 10; i++) {
      var data = new SampleData();
      data.Sample1 = "Test sample Text " + i % 100;
      data.Sample2 = "Another Test " + i % 200;
      this.SampleDataList.Add(data);
    }
  }
} 
```

希望有帮助

# xcode - DateFromString 返回错误值

> ID：13454335
> 
> 赞同：0
> 
> 时间：2012-11-19T12:57:18.823
> 
> 标签：xcode, macos, nsdate, nsdateformatter

我正在使用 NSDateFormatter 和 datefromString 是一整年

```
NSString *date    = [[command substringWithRange:NSMakeRange(pos.location + 3, command.length - pos.location - 9)] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSLog(@"  date        [%@]   " , date       ); 
NSLog(@"  lastAccess  [%@]   " , lastAccess );
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init]; 
[dateFormat setDateFormat:@"YYYY-MM-dd HH:mm:ss Z"]; 
[dateFormat setTimeZone:[NSTimeZone systemTimeZone]]; 
NSDate *filedate = [dateFormat dateFromString:date];

NSLog(@"1     %@   %f  " , filedate    , [filedate   timeIntervalSince1970]); 
NSLog(@"2     %@   %f  " , lastAccess  , [lastAccess timeIntervalSince1970]); 
NSLog(@"3     %@   " , date); 
```

产生以下输出

```
 date        [2012-11-18 19:00:23 +0000]   
  lastAccess  [2012-11-18 19:00:21 +0000]   
  1     2011-11-18 19:00:23 +0000   1321642823.000000  
  2     2012-11-18 19:00:21 +0000   1353265221.929860  
  3     2012-11-18 19:00:23 +0000 
```

日期有 2012 年，再次用 3 确认）

但请查看 1）它有 2011 年 1）文件日期 datefromstring of date

有任何想法吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:43:16.010

年份使用小写字母。

你的日期格式应该是`yyyy-MM-dd HH:mm:ss Z`.

根据[unicode 日期格式指南](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

*   yyyy 表示年份
*   YYYY 表示基于“一年中的一周”的日历中的年份。

我不确定为什么这会产生不同的结果，但您几乎应该始终使用小写变体。

# javascript - Google 图片搜索已弃用

> ID：13454338
> 
> 赞同：1
> 
> 时间：2012-11-19T12:57:32.300
> 
> 标签：javascript, google-api

我需要在我的网站中集成 Google 图片搜索，但我发现该 API 已被弃用。

所以基本上我想建立一个集成的图像搜索（如果我使用雅虎，谷歌，更多？）添加和品牌标志并不重要，只要用户可以留在页面上并在那里搜索图像。

有没有其他选择？弃用的谷歌 API 还值得去吗？

这是我的示例代码，今天仍然有效：

```
function getGoogleImages(query, userIp, callback) {
  var url = 'https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=' + query + '&userip=' + userIp + '&callback=?';

  $.getJson(url, function(data) {
    callback(data.responseData.results);
  });
}

  getImages('Horses', 'ip-goes-here', function(data) {
    $.each(data, function(i, results) {
      $('<img />').attr('src', results.unescapedUrl).attr('id', 'img' + i).appendTo('#images');
      $('#img' + i).wrap($('<a />').attr('href', results.unescapedUrl));
    });
  }); 
```

笔记：

我知道不推荐使用的 API，但自定义搜索不是我想要的，我想在 Google 图片 (http://www.images.google.com) 上搜索，而不是在我的网站上搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:42:35.660

尝试天蓝色

[https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)

似乎每月有 5000 次点击是免费的

# java - 使用 Java 8 的 Monad

> ID：13454347
> 
> 赞同：83
> 
> 时间：2012-11-19T12:58:09.383
> 
> 标签：java, java-8, monads, optional

为了帮助理解 monad 是什么，有人可以提供一个使用 java 的示例吗？他们有可能吗？

如果您从此处下载预发布的 lambda 兼容 JDK8，则可以使用 java 进行 Lambda 表达式[http://jdk8.java.net/lambda/](http://jdk8.java.net/lambda/)

下面显示了使用此 JDK 的 lambda 示例，有人可以提供一个比较简单的 monad 吗？

```
public interface TransformService {
        int[] transform(List<Integer> inputs);
    }
    public static void main(String ars[]) {
        TransformService transformService = (inputs) -> {
            int[] ints = new int[inputs.size()];
            int i = 0;
            for (Integer element : inputs) {
                ints[i] = element;
            }
            return ints;
        };

        List<Integer> inputs = new ArrayList<Integer>(5) {{
            add(10);
            add(10);
        }};
        int[] results = transformService.transform(inputs);
    } 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-11-12T14:55:25.423

仅供参考：

提议的[JDK8 Optional](http://download.java.net/jdk8/docs/api/java/util/Optional.html)类**确实满足**三个[Monad 定律](http://learnyouahaskell.com/a-fistful-of-monads#monad-laws)。这是一个[证明这一点的要点](https://gist.github.com/ms-tg/7420496#file-jdk8_optional_monad_laws-java)。

一个 Monad 所需要的只是提供符合**三个**定律的**两个函数。**

 **两个功能：

1.  将*值放入一元上下文中*

    *   哈斯克尔的可能：`return`/`Just`
    *   斯卡拉的选项：`Some`
    *   函数式 Java 的选项：`Option.some`
    *   JDK8的可选：`Optional.of`
2.  *在单子上下文中*应用函数

     **   Haskell 的 Maybe：（`>>=`又名`bind`）
    *   斯卡拉的选项：`flatMap`
    *   函数式 Java 的选项：`flatMap`
    *   JDK8的可选：`flatMap`* 

 *请参阅[上面的要点](https://gist.github.com/ms-tg/7420496#file-jdk8_optional_monad_laws-java)以获取三个定律的 java 演示。

注意：要理解的关键之一是*要在单子上下文中应用的函数*的签名：它采用原始值类型，并返回单子类型。

换句话说，如果您有 的实例`Optional<Integer>`，则可以传递给其`flatMap`方法的函数将具有签名`(Integer) -> Optional<U>`，其中`U`值类型不必是`Integer`，例如`String`：

```
Optional<Integer> maybeInteger = Optional.of(1);

// Function that takes Integer and returns Optional<Integer>
Optional<Integer> maybePlusOne = maybeInteger.flatMap(n -> Optional.of(n + 1));

// Function that takes Integer and returns Optional<String>
Optional<String> maybeString = maybePlusOne.flatMap(n -> Optional.of(n.toString)); 
```

您不需要任何类型的 Monad 接口来以这种方式编码或以这种方式思考。在 Scala 中，您无需对 Monad 接口进行编码（除非您使用的是 Scalaz 库...）。JDK8 似乎也将授权 Java 人员使用这种*链式单元计算*。

希望这有帮助！

**更新：**[在](https://devblog.timgroup.com/2013/11/11/does-jdk8s-optional-class-satisfy-the-monad-laws-yes-it-does/)此发表博客。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-11-19T14:15:56.563

Java 8 将有 lambda；单子是一个完全不同的故事。它们在函数式编程中很难解释（正如 Haskell 和 Scala 中关于该主题的大量教程所证明的那样）。

Monad 是静态类型函数式语言的典型特征。用 OO 语言来描述它们，你可以想象一个`Monad`界面。实现的类`Monad`将被称为“monadic”，前提是在实现`Monad`实现时遵守所谓的“monad 法则”。然后，该语言提供了一些*语法糖*，使使用`Monad`类的实例变得有趣。

现在`Iterable`在 Java 中与 monad 无关，但作为 Java 编译器特别处理的类型的示例（`foreach`Java 5 附带的语法），请考虑以下内容：

```
Iterable<Something> things = getThings(..);
for (Something s: things) {  /* do something with s */ } 
```

因此，虽然我们可以在旧式循环中使用`Iterable`'s`Iterator`方法（和公司） ，但 Java 将这种语法糖作为一种*特殊情况*授予我们。`hasNext``for`

 *因此，正如实现`Iterable`并且`Iterator`必须遵守`Iterator`法律的类（例如：如果没有下一个元素则`hasNext`必须返回）在 语法中有用 - 将存在几个对相应符号有用的一元类*（*正如在 Haskell 中所调用的那样） ) 或 Scala 的符号。`false``foreach`*`do``for`*

 *所以 -

1.  什么是一元类的好例子？
2.  处理它们的语法糖会是什么样子？

在 Java 8 中，我不知道 - 我知道 lambda 表示法，但我不知道其他特殊的语法糖，所以我必须用另一种语言给你一个例子。

Monad 通常用作*容器*类（列表就是一个例子）。Java 已经有了`java.util.List`显然不是单子的，但这里是 Scala 的：

```
val nums = List(1, 2, 3, 4)
val strs = List("hello", "hola")
val result = for { // Iterate both lists, return a resulting list that contains 
                   // pairs of (Int, String) s.t the string size is same as the num.
  n <- nums        
  s <- strs if n == s.length 
} yield (n, s)
// result will be List((4, "hola")) 
// A list of exactly one element, the pair (4, "hola") 
```

这是（大致）语法糖：

```
val nums = List(1, 2, 3, 4)
val strs = List("hello", "hola")
val results = 
nums.flatMap( n =>                 
  strs.filter(s => s.size == n).   // same as the 'if'
       map(s => (n, s))            // Same as the 'yield'
)
// flatMap takes a lambda as an argument, as do filter and map
// 
```

这显示了 Scala 的一个特性，其中利用 monad 来提供*列表*推导。

所以`List`Scala 中的 a 是一个 monad，因为它遵循 Scala 的 monad 法则，该法则规定所有 monad 实现必须有符合`flatMap`的 ,`map`和`filter`方法（如果你对法则感兴趣，“Monads are Elephants”博客条目有最好的描述我'到目前为止发现）。而且，正如您所看到的，lambdas（和 HoF）是绝对*必要*的，但*不足以*使这种东西在实际中有用。

除了容器式的单子之外，还有很多有用的单子。他们有各种各样的应用。我最喜欢的一定是`Option`Scala 中的`Maybe`monad（Haskell 中的 monad），它是一种带来*空安全性*的包装器类型：monad 的 Scala API 页面`Option`有一个非常简单的示例用法：[http://www.scala-lang。 org/api/current/scala/Option.html](http://www.scala-lang.org/api/current/scala/Option.html) 在 Haskell 中，monad 在表示 IO 方面很有用，作为一种解决非 monadic Haskell 代码执行顺序不确定这一事实的方法。

拥有 lambdas 是进入函数式编程世界的第一步。monad 需要 monad 约定和足够大的可用 monad 类型集，*以及*语法糖，以使使用它们变得有趣和有用。

由于 Scala 可以说是最接近 Java 的语言，它也允许（单子）函数式编程，如果您（仍然）感兴趣，请查看这个 Monad Scala 教程：http: [//james-iry.blogspot.jp/2007/09/ monads-are-elephants-part-1.html](http://james-iry.blogspot.jp/2007/09/monads-are-elephants-part-1.html)

粗略的谷歌搜索表明，在 Java 中至少有一次尝试这样做：[https](https://github.com/RichardWarburton/Monads-in-Java) ://github.com/RichardWarburton/Monads-in-Java -

可悲的是，解释 Java 中的 monad（即使使用 lambda）与解释 ANSI C（而不是 C++ 或 Java）中成熟的面向对象编程一样困难。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-27T07:33:26.250

尽管 monad 可以在 Java 中实现，但任何涉及它们的计算都注定会成为泛型和花括号的混乱混合。

我会说 Java 绝对**不是**用来说明它们的工作或研究它们的意义和本质的语言。为此，最好使用 JavaScript 或支付一些额外的费用并学习 Haskell。

无论如何，我是在向您发出信号，我刚刚使用新的**Java 8 lambdas实现了一个****状态 monad**。这绝对是一个宠物项目，但它适用于一个非平凡的测试用例。

 **您可能会在[我的博客](https://faustinelli.wordpress.com/2014/04/25/the-state-monad-in-java-8-eventually/)中找到它，但我会在这里为您提供一些详细信息。

**状态单子基本上是从状态到一对 (state,content) 的函数**。你通常给状态一个泛型类型 S，给内容一个泛型类型 A。

因为 Java 没有对，所以我们必须使用特定的类对它们进行建模，我们称之为 Scp（状态-内容对），在这种情况下它将具有泛型类型`Scp<S,A>`和构造函数`new Scp<S,A>(S state,A content)`。这样做之后，我们可以说一元函数将具有类型

```
java.util.function.Function<S,Scp<S,A>> 
```

这是一个`@FunctionalInterface`。也就是说，它的唯一一个实现方法可以在不命名的情况下调用，传递一个具有正确类型的 lambda 表达式。

该类`StateMonad<S,A>`主要是函数的包装器。它的构造函数可以被调用，例如

```
new StateMonad<Integer, String>(n -> new Scp<Integer, String>(n + 1, "value")); 
```

state monad 将函数存储为实例变量。然后有必要提供一个公共方法来访问它并为其提供状态。我决定称它为`s2scp`（“状态到状态-内容对”）。

要完成 monad 的定义，您必须提供一个*单元*（又名*return*）和一个*绑定*（又名*flatMap*）方法。我个人更喜欢将 unit 指定为 static，而 bind 是实例成员。

在状态单子的情况下，单位必须如下：

```
public static <S, A> StateMonad<S, A> unit(A a) {
    return new StateMonad<S, A>((S s) -> new Scp<S, A>(s, a));
} 
```

而绑定（作为实例成员）是：

```
public <B> StateMonad<S, B> bind(final Function<A, StateMonad<S, B>> famb) {
    return new StateMonad<S, B>((S s) -> {
        Scp<S, A> currentPair = this.s2scp(s);
        return famb(currentPair.content).s2scp(currentPair.state);
    });
} 
```

你注意到 bind 必须引入一个泛型类型 B，因为它是一种允许异构状态 monad 链接的机制，并为这个和任何其他 monad 提供了将计算从一个类型移动到另一个类型的非凡能力。

我将在这里停止使用 Java 代码。复杂的东西在 GitHub 项目中。与以前的 Java 版本相比，lambdas 删除了很多花括号，但语法仍然相当复杂。

顺便说一句，我正在展示如何用其他主流语言编写类似的状态 monad 代码。在 Scala 的情况下， bind （在这种情况下**必须**称为*flatMap*）读起来像

```
def flatMap[A, B](famb: A => State[S, B]) = new State[S, B]((s: S) => {
  val (ss: S, aa: A) = this.s2scp(s)
  famb(aa).s2scp(ss)
}) 
```

而 JavaScript 中的绑定是我最喜欢的；100% 功能齐全、精益求精，但 - 当然 - 无类型：

```
var bind = function(famb){
    return state(function(s) {
        var a = this(s);
        return famb(a.value)(a.state);
    });
}; 
```

<shameless> 我在这里偷工减料，但如果你对细节感兴趣，你可以在我的 WP 博客上找到它们。</sameless>

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-08T01:28:45.873

> 这是关于 monad 难以掌握的一点：monad 是一种模式，而不是特定的类型。Monad 是一种形状，它们是一个抽象接口（不是 Java 意义上的），而不是一个具体的数据结构。因此，任何示例驱动的教程都注定是不完整和失败的。[...] 理解 monad 的唯一方法是了解它们的本质：一种数学结构。

[单子不是隐喻](http://www.codecommit.com/blog/ruby/monads-are-not-metaphors)Daniel Spiewak

* * *

**Java SE 8 中的 Monad**

列表单子

```
interface Person {
    List<Person> parents();

    default List<Person> greatGrandParents1() {
        List<Person> list = new ArrayList<>();
        for (Person p : parents()) {
            for (Person gp : p.parents()) {
                for (Person ggp : p.parents()) {

                    list.add(ggp);
                }
            }
        }
        return list;
    }

    // <R> Stream<R> flatMap(Function<? super T, ? extends Stream<? extends R>> mapper)
    default List<Person> greatGrandParents2() {
        return Stream.of(parents())
                .flatMap(p -> Stream.of(p.parents()))
                .flatMap(gp -> Stream.of(gp.parents()))
                .collect(toList());
    }
} 
```

也许单子

```
interface Person {
    String firstName();
    String middleName();
    String lastName();

    default String fullName1() {
        String fName = firstName();
        if (fName != null) {
            String mName = middleName();
            if (mName != null) {
                String lName = lastName();
                if (lName != null) {
                    return fName + " " + mName + " " + lName;
                }
            }
        }
        return null;
    }

    // <U> Optional<U> flatMap(Function<? super T, Optional<U>> mapper)
    default Optional<String> fullName2() {
        return Optional.ofNullable(firstName())
                .flatMap(fName -> Optional.ofNullable(middleName())
                .flatMap(mName -> Optional.ofNullable(lastName())
                .flatMap(lName -> Optional.of(fName + " " + mName + " " + lName))));
    }
} 
```

* * *

Monad 是*嵌套*控制流封装的*通用*模式。即一种从嵌套的命令式惯用语创建可重用组件的方法。

 *重要的是要理解 monad 不仅仅是具有*平面映射*操作的通用包装类。例如，`ArrayList`一个`flatMap`方法不会是一个单子。因为*单子定律*禁止副作用。

Monad 是一种*形式主义*。它描述了结构，无论内容或含义如何。人们在与毫无意义（抽象）的事物相关联时挣扎。所以他们想出了不是单子的隐喻。

*另见：* Erik Meijer 和 Gilad Bracha 之间的[对话。](https://youtu.be/QNpKYypLAO8?t=34m8s)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-19T13:20:42.620

理解 monad 的唯一方法是编写一堆组合子库，注意由此产生的重复，然后自己发现 monad 可以让您排除这种重复。在发现这一点时，每个人都对什么是 monad 建立了一些直觉……但这种直觉并不是你可以直接与其他人交流的那种东西——似乎每个人都必须经历从一些具体的泛化到 monad 的相同经历组合库的示例。然而

在这里我找到了一些学习蒙达斯的材料。

希望对你也有用。

[代码提交](http://www.codecommit.com/blog/ruby/monads-are-not-metaphors)

[james-iry.blogspot](http://james-iry.blogspot.it/2007/09/monads-are-elephants-part-1.html)

[debasishg.blogspot](http://debasishg.blogspot.it/2008/03/monads-another-way-to-abstract.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T04:48:53.310

[这篇博客文章](http://logicaltypes.blogspot.com.au/2011/09/monads-in-java.html)提供了一个分步示例，说明如何在 Java 中实现 Monad 类型（接口），然后使用它来定义 Maybe monad，作为一个实际应用程序。

[这篇文章](http://blog.tmorris.net/maybe-monad-in-java/)解释了 Java 语言中内置了一个 monad，强调了 monad 比许多程序员想象的更常见，而且编码人员经常[不经意地重新发明它们](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-10T09:55:36.727

`Optional`尽管关于是否满足 Monad 定律存在所有争议`Stream`，但我通常喜欢以同样`Optional`的`CompletableFuture`方式查看 . 事实上，它们都提供了一个`flatMap()`，这就是我所关心的，让我接受“*副作用的雅致成分*”（由 Erik Meijer 引用）。所以我们可能有对应的`Stream`，`Optional`并`CompletableFuture`以如下方式：

[![](../Images/1fc9330d4809e9ece79e015f35a4e559.png)](https://gist.github.com/fmcarvalho/2be5ff6419f9d5d8df8c9c11fcd45271)

关于 Monads，我通常只考虑`flatMap()`（来自Erik Meijer*的“反应式编程原理”课程）来简化它：*

![Eric-Meijer-flatMap](../Images/89848e670193b74bfec6cc09a7287104.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-07T18:41:50.730

我喜欢以更数学（但仍然是非正式的）方式来考虑单子。之后，我将解释与 Java 8 的一个单子*CompletableFuture*的关系。

首先，一个 monad`M`是一个*functor*。也就是说，它将一种类型转换为另一种类型：如果`X`是一种类型（例如`String`），那么我们就有另一种类型`M<X>`（例如`List<String>`）。此外，如果我们有`X -> Y`类型的转换/函数，我们应该得到一个函数`M<X> -> M<Y>`。

但是这样的单子有更多的数据。我们有一个所谓的单元，它是`X -> M<X>`每种类型的函数`X`。换句话说， 的每个对象都`X`可以以自然的方式包装到 monad 中。

然而，monad 最具特征的数据是它的产品：`M<M<X>> -> M<X>`每种类型的函数`X`。

所有这些数据都应该满足一些公理，如函子性、结合性、单位定律，但我不会在这里详细介绍，对于实际使用也没有关系。

我们现在可以推导出 monads 的另一个操作，它通常用作 monads 的等效定义，绑定操作：值/对象 in`M<X>`可以与函数绑定以在`X -> M<Y>`中产生另一个值`M<Y>`。我们如何实现这一目标？好吧，首先我们将功能性应用于函数以获得一个函数`M<X> -> M<M<Y>>`。接下来我们将一元乘积应用于目标以获得函数`M<X> -> M<Y>`。现在我们可以根据需要插入值`M<X>`来获取值`M<Y>`。此绑定操作用于将多个单子操作链接在一起。

现在让我们*来看 CompletableFuture*示例，即`CompletableFuture = M`. 将一个对象想象`CompletableFuture<MyData>`为一些异步执行的计算，并在未来某个时间产生一个对象`MyData`作为结果。这里的一元操作是什么？

*   函数性是用方法实现的`thenApply`：首先执行计算，一旦结果可用，`thenApply`就应用给定的函数将结果转换为另一种类型
*   monadic 单元是用方法实现的`completedFuture`：正如文档所说，结果计算已经完成并立即产生给定值
*   一元乘积不是由函数实现的，但下面的绑定操作等价于它（连同函数性），其语义简单如下：给定一个类型的计算，`CompletableFuture<CompletableFuture<MyData>>`该计算异步产生另一个计算，`CompletableFuture<MyData>`而另一个计算又产生一些值`MyData`，因此在另一个之后执行两个计算总共会产生一个计算
*   产生的绑定操作由方法实现`thenCompose`

如您所见，计算现在可以包含在一个特殊的上下文中，即*异步性*。一般的单子结构使我们能够在给定的上下文中链接此类计算。`CompletableFuture`例如，在*Lagom*框架中用于轻松构建高度异步的请求处理程序，这些处理程序由高效的线程池透明地备份（而不是由专用线程处理每个请求）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-29T14:44:08.877

Java 中“可选”Monad 的图表。

您的任务：使用浅蓝色框中的函数（**浅蓝色框函数**）对“Actuals”（左侧）执行操作，将 union 类型的元素转换*为*`T` *union* `null`类型。这里只显示了一个框，但可能有一系列浅蓝色框（因此从类型*union*到 type _union再到 type *union*等）`U` *`null`**`U` *`null``V``null``W` *`null`*****

 *****实际上，这会让您担心`null`函数应用程序链中出现的值。丑陋！

解决方案：使用**浅绿色框功能**将您包装`T`成一个，移动到“可选”（右侧）。在这里，使用**红框函数**将类型元素转换为类型。将函数的应用镜像到“Actuals”，可能会有几个红框函数被链接起来（因此从 type到then to等）。**最后，通过深绿色框功能**之一从“Optionals”移回“Actuals” 。`Optional<T>`**`Optional<T>``Optional<U>`**`Optional<U>``Optional<V>``Optional<W>`****

 ******再也不用担心`null`价值观了。在实现方面，总会有一个`Optional<U>`，它可能为空，也可能不为空。您可以将调用链接到**红框函数**而无需进行空检查。

重点：**红框功能**没有单独直接实现。相反，它们是通过使用 the或高阶函数从**蓝盒函数**（无论已实现且可用，通常是浅蓝色函数）中获得的。`map``flatMap`

灰色框提供额外的支持功能。

简单的。

[![Java 可选，如何使用](../Images/55587b55356ecbd18fc35d26cecabd72.png)](https://i.stack.imgur.com/rqbRA.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-29T17:17:11.190

Haskell monads 是一个接口，它指定将“包装在另一种数据类型中的数据类型”转换为另一种“包装在另一种或相同数据类型中的数据类型”的规则；转换步骤由您使用格式定义的函数指定。

函数格式接受一个数据类型并返回“包装在另一个数据类型中的数据类型”。您可以在转换期间指定操作/计算，例如乘法或查找某些内容。

由于嵌套抽象，很难理解。它是如此抽象，以至于您可以重用规则将数据类型转换为数据类型，而无需自定义编程来解开第一个“包装在另一个数据类型中的数据类型”，然后再将数据放入指定的函数；某些数据类型的可选是“数据类型中的数据类型”的示例。

指定的函数是任何确认格式的 lambda。

你不需要完全理解它；您将编写自己的可重用接口来解决类似的问题。Monad 之所以存在，是因为一些数学家已经解决了这个问题，并创建了 monad 供您重用。但是由于它的抽象性，一开始就很难学习和重用。

换句话说，例如 Optional 是一个包装类，但有些数据是包装的，有些不是，有些函数采用包装的数据类型但有些没有，返回类型可以是包装的类型，也可以不是。要链接调用参数/返回类型中可能包装或不包装的函数混合，您可以执行自己的自定义包装/解包或重用仿函数/应用程序/单子的模式来处理所有那些包装/解包的链接函数调用组合。每次您尝试将可选项放入仅接受纯值并返回可选项的方法时，这些步骤就是 monad 所做的。*******************

# ruby-on-rails - 如何在 Rails 3 中添加 JSON 范围内的属性

> ID：13454350
> 
> 赞同：0
> 
> 时间：2012-11-19T12:58:21.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我的目标是在 JSON 范围内添加一个属性，这是一些代码：

```
User <ActiveRecord::Base
   has_many :reviews

Review<ActiveRecord::Base
   scope :best, lambda { |n| where('reviews.rating > ?',n} 
```

在我的 UsersController 中，我想做这样的事情：

```
format.json{
      render :json => @user.to_json :include=> :reviews.best 
```

我也尝试过类似的东西：

```
format.json{
      render :json => @user.to_json :include =>{ :reviews => {:method => best} } 
```

但它不起作用...

有任何想法吗 ？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:05:26.103

我建议您为此使用 gem，有[Active Record Serializers](https://github.com/josevalim/active_model_serializers)可以满足您的需求，或者[Rabl](https://github.com/nesquena/rabl)，有一个[RailsCast](http://railscasts.com/episodes/322-rabl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:04:04.577

好的，我想通了！这是一个解决方案：在用户模型中，我们可以添加一个虚拟属性，例如

```
def best_reviews
   self.reviews.best
end 
```

然后当我们创建 json 时，我们可以添加：

```
format.json{
  render :json => @user.to_json :methods => %w(best_reviews)
} 
```

它确实有效！但我不知道这是否是最好的解决方案

# ios - 更新到新位置时保持为 NULL

> ID：13454354
> 
> 赞同：0
> 
> 时间：2012-11-19T12:58:41.057
> 
> 标签：ios, null, cllocationmanager

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
NSDateFormatter * formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm"];

NSString *latitude =  [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
NSString *longitude =  [NSString stringWithFormat:@"%f", newLocation.coordinate.longitude];
NSString *stringFromDate = [formatter stringFromDate:newLocation.timestamp];

resultsLabel.text = [NSString stringWithFormat:@"(%@) %@ Location %.06f %.06f %@", ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground) ? @"bg" : @"fg", resultsLabel.tag == 0 ? @"gps:" : @"sig" , newLocation.coordinate.latitude, newLocation.coordinate.longitude, [formatter stringFromDate:newLocation.timestamp]];

NSLog(@"%@", resultsLabel.text);

LocationTestAppDelegate * appDelegate = (LocationTestAppDelegate *)[UIApplication sharedApplication].delegate;
[appDelegate log:resultsLabel.text];

} 
```

但我把它作为输出。

```
(null) 
```

上 ：

```
 NSLog(@"%@", resultsLabel.text); 
```

有谁知道我做错了什么？

```
 - (id) initWithLabel:(UILabel*)label
{
resultsLabel = label;
return [super init];
} 
```

在我的委托中，我在这里设置了 resultLabel：

```
- (void) log:(NSString*)msg
{
 NSDateFormatter * formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setTimeStyle:NSDateFormatterMediumStyle];
NSString * logMessage = [NSString stringWithFormat:@"%@ %@", [formatter stringFromDate:[NSDate date]], msg];
NSString * fileName = [self locationPath];
FILE * f = fopen([fileName UTF8String], "at");
fprintf(f, "%s\n", [logMessage UTF8String]);
fclose (f);} 
```

**编辑**

我删除了 GPS 功能。

有谁知道正确的 NSLog 会在新位置。经纬度时间戳？

**编辑 2**

我在这里设置了结果标签：

```
@interface  LocationDelegate : NSObject <CLLocationManagerDelegate> 
{
UILabel * resultsLabel;
NSString * _phonenumber;

}

- (id) initWithLabel:(UILabel*)label;
//-(id)initWithDictionary:(NSDictionary *)dict;
//-(id)initWithName:(NSString *)aName;
//-(NSDictionary *)toDictionary;

@property (nonatomic , retain) NSString *phonenumber; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:12:44.463

你的`init`代码很奇怪。这是更常见的：

```
- (id) initWithLabel:(UILabel*)label
{
    if (self = [super init]) {
        resultsLabel = label; // Or maybe _resultsLabel, depending on your code
    }
    return self;
} 
```

然后通过`self.resultsLabel`.

大概你的问题是`resultsLabel`当`nil`你尝试设置它的文本时。发送消息到`nil`什么都不做，甚至不会给出错误。

# asp.net-mvc-4 - Jquery 表单验证不使用模型注释

> ID：13454367
> 
> 赞同：0
> 
> 时间：2012-11-19T12:59:44.060
> 
> 标签：asp.net-mvc-4, jquery-validate

这个问题我试了很多方法，还是没有得到答案。在 Asp.net MVC4 中，有没有一种方法可以将 jquery 代码添加到我的视图中，而不必向模型添加任何类型的注释来验证我的表单输入？我刚刚意识到我正在使用 Ajax.BeginForm... 我打赌我不能在我的表单上使用常规的 Jquery Ajax 调用。我敢打赌，如果我使用 HTML.beginForm，常规的 jquery 会起作用。但现在这将打破我的 ajax 调用......由于某种原因失败了。好吧，我正要找出原因。希望我能弄清楚如何避免使用所有 Asp.net Ajax 废话。它只给我带来了巨大的头痛。哦，等等，你知道吗，我只是看了另一个视图，我正在使用 Html.BeginForm，但我仍然不能在我的视图中使用纯 jquery 代码来验证我的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:25:06.943

当然这是可能的 - ASP.NET MVC 只是发出 HTML 是吗？所以只需将一些 jquery 验证代码添加到准备好的文档中。

```
$(function(){
 $('#myform').validate(/* options here */);
}); 
```

# php - PDO 和 LOAD DATA LOCAL INFILE 不起作用

> ID：13454370
> 
> 赞同：6
> 
> 时间：2012-11-19T12:59:48.687
> 
> 标签：php, mysql, pdo

我只是尝试将 LOAD DATA LOCL INFILE 与 pdo 一起使用。没有为我解决。这是我的功能

```
function connect($db_name,$db_host,$db_user,$db_pass)
{
    try
    {
        $this->connect = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass);    
        $this->connect->exec("LOAD DATA LOCAL INFILE 'http://localhost/testoo.csv'
                                INTO TABLE 'parsed'
                                FIELDS TERMINATED BY ','
                                OPTIONALLY ENCLOSED BY '\"'
                                LINES TERMINATED BY '\n'
                                ('name','link','price','brand','imageurl')");

    }
    catch(PDOException $e) 
    {  
        echo $e->getMessage(); 
    }
} 
```

现在什么都没有发生。相同的查询适用于普通的 mysql_query。这个问题的任何指针？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-02T10:14:00.640

`PDO::MYSQL_ATTR_LOCAL_INFILE`在 PDO 连接选项中设置属性：

```
function connect($db_name,$db_host,$db_user,$db_pass)
    {
        try
        {
            $this->connect = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass,array(PDO::MYSQL_ATTR_LOCAL_INFILE => true));    
            $this->connect->exec("LOAD DATA LOCAL INFILE 'http://localhost/testoo.csv'
                                    INTO TABLE 'parsed'
                                    FIELDS TERMINATED BY ','
                                    OPTIONALLY ENCLOSED BY '\"'
                                    LINES TERMINATED BY '\n'
                                    ('name','link','price','brand','imageurl')");

        }
        catch(PDOException $e) 
        {  
            echo $e->getMessage(); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T13:27:18.843

我有同样的问题。我的 MySQL 服务器有正确的 local-infile conf，`PHP/PDO`也有正确的`PDO::MYSQL_ATTR_LOCAL_INFILE`conf。解决方案是（重新）安装 php5-mysqlnd。

```
$> apt-get update
$> apt-get install php5-mysqlnd 
```

......它奏效了:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:58:13.663

## 2019年编辑

7 年后 Sammitch 在这里说我最初的答案很糟糕。我什至无法弄清楚我在说什么“`fgetcsv()`资源使用问题”。7 年前的 PHP 可能缺少今天的一些 IO 流优化，但我愿意认为这是与 PHP 无关的资源限制。

**Jay Dhameliya 在下面的回答很可能是您想要的方式。** `LOAD DATA INFILE`应该尽可能快地将数据直接发送到 mySQL 中。

为了完整起见，假设有*一些*东西阻止使用`LOAD DATA INFILE`[比如最近发现的巨大安全漏洞]，并且您希望有效地从文件加载数据，您可能希望利用事务来批量 IO 和索引写入。例如：

```
$fname = 'myfile.csv';

if( ! $fh = fopen($myfile, 'r') ) {
    throw new Exception("Could not open $fname for reading.");
}

$dbh = new PDO(...);
$dbh->beginTransaction();
$stmt = $dbh->prepare('INSERT INTO table VALUES (?,?,?,...)')
try {
    while( $params = fgetcsv($fh) ) {
        $stmt->execute($params);
    }
} catch( \PDOException $e ) {
    $dbh->rollBack();
    throw $e;
}
$dbh->commit(); 
```

将所有内容批处理到单个事务中仍然`LOAD DATA INFILE`是速度如此之快的部分原因，并且很可能是@Benjamin 建议使用扩展插入的很大一部分。

## 原始答案

1.  [LOAD DATA LOCAL INFILE 在... PHP 中被禁止](https://stackoverflow.com/questions/7638090/load-data-local-infile-forbidden-in-php)
2.  确保 mySQL 和 www 用户都可以访问相关文件。

或者：[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)以编程方式使用和创建插入。

## 编辑：

为了避免 [因为它尝试一次读取整个文件] 的资源使用问题，`fgetcsv()`您可以创建一个类似于下面的循环来读取/插入可管理的块。

```
<?php
$fname = 'myfile.csv';
$chunksize = 50;

if( ! $fh = fopen($myfile, 'r') ) {
    throw new Exception("Could not open $fname for reading.");
}

$i=0;
$buffer = array()
while(!feof($fh)) {
    $buffer[] = fgets($fh);
    $i++;
    if( ($i % $chunksize) == 0 ) {
        commit_buffer($buffer);
        //run inserts
        $buffer = array(); //blank out the buffer.
    }
}

//clean out remaining buffer entries.
if( count($buffer) ) { commit_buffer($buffer); }

function commit_buffer($buffer) {
    foreach( $buffer as $line ) {
        $fields = explode(',', $line);
        //create inserts
    }
    //run inserts
    $buffer = array(); //blank out the buffer.
} 
```

这样`$chunksize`，在任何给定时间，只有行保存在内存中。

您可能需要额外的代码来处理诸如包含逗号和换行符的封装字符串之类的事情，但是如果您无法开始`LOAD DATA LOCAL INFILE`工作，我看不到太多其他选择。

# google-bigquery - 扁平化是否会影响 BigQuery 中的定价

> ID：13454371
> 
> 赞同：1
> 
> 时间：2012-11-19T13:00:07.630
> 
> 标签：google-bigquery

BigQuery 支持重复的数组列。这些可以通过使用[FLATTEN](https://developers.google.com/bigquery/docs/data#flatten)函数展开（“展平”）。由于 BigQuery 中的定价与数据集的大小（更准确地说是使用的列）绑定在一起，因此扁平化是否会使我的查询变得更加昂贵，因为它会影响数据集的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:10:13.957

不，展平不会影响成本，因为它实际上并没有扩大 BigQuery 需要读取的数据量。

# android - 关闭应用后保存信息

> ID：13454372
> 
> 赞同：0
> 
> 时间：2012-11-19T13:00:10.743
> 
> 标签：android, xml, android-linearlayout, android-preferences

我一直在尝试为我的应用程序创建一个用户个人资料部分，用户在其中输入他的信息（姓名、DoB、身高、体重等）并点击提交。在此之后，他被带到应用程序的主菜单。

我遇到的问题是，如果我关闭应用程序并再次运行它，这显然会导致应用程序再次显示用户配置文件部分并要求用户输入他的信息。

我一直在尝试寻找一种方法来让应用程序保存用户输入的信息并记住它。因此，例如，当用户第一次使用该应用程序时，他会获取用户个人资料部分并输入他的信息。当用户关闭应用程序并再次打开它时，它应该直接将他带到主菜单。

我知道我可以通过 Preferences 稍微实现这一点，但我宁愿使用普通布局（LinearLayout），以便它为我提供更多选项，例如 TextView 等。

有没有一种方法可以让我只使用 LinearLayout 而不是 Preferences 来实现这一点？

我也一直在考虑创建自定义首选项，但我发现没有一个特别有用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:04:26.653

使用`SharedPreferences`.

1.  检查应用程序的首次运行并显示您要输入用户配置文件的布局。

2.  在共享首选项中为第一次运行存储布尔标志后，这将阻止您的配置文件屏幕再次显示。

查看[检查应用程序是否首次运行](https://stackoverflow.com/questions/7217578/android-apllication-first-run)

**更新：**

将此`FirstRun()`代码放在您`onCreate()`的**Main Activity**中。

```
private void FirstRun()
{
 SharedPreferences settings = this.getSharedPreferences(MainActivity.PREFS_NAME, 0);
 boolean firstrun = settings.getBoolean("firstrun", true);
 if (firstrun)
 {
  // Checks to see if we've ran the application b4

  SharedPreferences.Editor e = settings.edit();
  e.putBoolean("firstrun", false);
  e.commit();
  // Display User Profile Screen    
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:09:31.533

使用 sharedPreference 通过这种方式存储信息..

```
 final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
        SharedPreferences.Editor editor = pref1.edit();
        editor.putString("userid", "success");
        editor.commit(); 
```

并从中获取价值使用下面的代码..

```
final SharedPreferences pref1 = getSharedPreferences("myapp", MODE_PRIVATE);
String str1= pref2.getString("userid", null); 
```

或尝试使用 SqliteDatabase 或者可能是 Application Class..这将根据需要存储信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:11:09.023

```
@Override
public boolean saveUserData(UserModel userModel, Context context) {

    email = userModel.getEmail();
    firstName = userModel.getFirstName();
    lastName = userModel.getLastName();
    twitterId = userModel.getTwitterId();

    SharedPreferences userData = context.getSharedPreferences(APP_NAME,
            Context.MODE_PRIVATE);
    SharedPreferences.Editor setUserDataPreference = userData.edit();

    setUserDataPreference.putString(EMAIL, email);
    setUserDataPreference.putString(FIRST_NAME, firstName);
    setUserDataPreference.putString(LAST_NAME, lastName);
    setUserDataPreference.putString(TWITTER_ID, twitterId);

    setUserDataPreference.commit();

    return true;
}

 @Override
        public UserModel getUserData(Context context) {
            UserModel userModel = new UserModel();

            SharedPreferences userData = context.getSharedPreferences(APP_NAME,
                    Context.MODE_PRIVATE);

            email = userData.getString(EMAIL, "");
            firstName = userData.getString(FIRST_NAME, "");
            lastName = userData.getString(LAST_NAME, "");
            twitterId = userData.getString(TWITTER_ID, "");

            userModel.setEmail(email);
            userModel.setFirstName(firstName);
            userModel.setLastName(lastName);
            userModel.setTwitterId(twitterId);

            return userModel;
        } 
```

# sql - 什么时候在哪里条款？

> ID：13454375
> 
> 赞同：0
> 
> 时间：2012-11-19T13:00:16.207
> 
> 标签：sql, sql-server

我有一个有趣的问题。我将编写一个标量值函数。其中一个参数不在表格列中。我必须在 where 子句中使用这个参数 (@ImpUrgPri)。至于那个参数，会有一个条件，表中存在一个列。你能帮我解决这个问题吗？

```
DECLARE @ImpUrgPri NVARCHAR(3)
SET @ImpUrgPri = 'URG'
DECLARE @Enum INT
SET @Enum = 0

select COUNT(*) 
from zODYA_vwCallReq_AllData 
where ActiveFlag = 1
AND 
(CASE WHEN (@ImpUrgPri = 'PRI') THEN Priority_Enum == @Enum
        WHEN (@ImpUrgPri = 'URG') THEN Urgency_Enum == @Enum 
        WHEN (@ImpUrgPri = 'IMP') THEN Impact_Enum == @Enum END)

group by 
(CASE WHEN (@ImpUrgPri = 'PRI') THEN Priority_Enum 
        WHEN (@ImpUrgPri = 'URG') THEN Urgency_Enum 
        WHEN (@ImpUrgPri = 'IMP') THEN Impact_Enum END) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:06:38.640

您的选择可能是：

```
select COUNT(*) 
from zODYA_vwCallReq_AllData 
where ActiveFlag = 1
AND @Enum =  (CASE WHEN (@ImpUrgPri = 'PRI') THEN Priority_Enum
             WHEN (@ImpUrgPri = 'URG') THEN Urgency_Enum
             WHEN (@ImpUrgPri = 'IMP') THEN Impact_Enum END)

group by 
(CASE WHEN (@ImpUrgPri = 'PRI') THEN Priority_Enum 
        WHEN (@ImpUrgPri = 'URG') THEN Urgency_Enum 
        WHEN (@ImpUrgPri = 'IMP') THEN Impact_Enum END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:02:27.980

我认为最好使用`IF`并拥有三个不同`SELECT`的 s，每个“何时”案例一个。

您还可以动态创建 SQL（在存储过程中），这会使存储过程稍微短一些。这里只有三个选项，我会坚持使用 3 个 SELECT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:08:09.733

```
DECLARE @ImpUrgPri NVARCHAR(3)
SET @ImpUrgPri = 'URG'
DECLARE @Enum INT
SET @Enum = 0

select COUNT(*) 
from zODYA_vwCallReq_AllData 
where ActiveFlag = 1
AND 
(CASE @ImpUrgPri
    WHEN 'PRI' THEN Priority_Enum
    WHEN 'URG' THEN Urgency_Enum
    WHEN 'IMP' THEN Impact_Enum
END) = @Enum
group by 
(CASE @ImpUrgPri
    WHEN 'PRI' THEN Priority_Enum
    WHEN 'URG' THEN Urgency_Enum
    WHEN 'IMP' THEN Impact_Enum
END) 
```

# android - 在 Android 上扫描的最大 ZXING 版本

> ID：13454376
> 
> 赞同：2
> 
> 时间：2012-11-19T13:00:16.777
> 
> 标签：android, qr-code, zxing

Android ZXING可以扫描的二维码最高版本号是多少？似乎使用我的 8 MP 相机，我最多只能扫描打印为 1 英寸见方的版本 20。有什么办法可以改善这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:10:55.003

理论上最高版本 40 是可能的。在实践中，它受到相机质量和焦点的限制。即使对于一台好的相机，20 版以上的版本也相当不稳定。您的图片分辨率无关紧要，因为它使用预览模式。

# java - 执行命令行应用程序

> ID：13454378
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:00:36.083
> 
> 标签：java

我正在尝试从代码中对类文件执行 JAD 反编译器：

```
Process p = Runtime.getRuntime().exec("c:\\1\\jad.exe c:\\1\\EIn.class");
//All paths are correct, "c:\\1\\jad.exe c:\\1\\EIn.class" wotks when I run it in cmd 
```

当我调试时，我没有收到任何错误，调试器移动到下一行......

如果我说：

```
int res = p.waitFor(); 
```

它只是挂起。

更新：

```
BufferedReader in = new BufferedReader(new InputStreamReader(p.getErrorStream()));
String str = null;
while ((str = in.readLine()) != null) { //Stucks here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:04:15.847

反编译器是否在`jad`等待您通过标准输入的输入？

要查看您遇到的错误，请使用`getOutputStream`并`getErrorStream`查看反编译器正在写出的内容。

您可以使用`ProcessBuilder`该类使重定向流更加愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:07:04.027

```
public static void main(String[] args) throws Exception {

    String[] cmd = { "c:\\1\\jad.exe", "-c:\\1\\EIn.class" };
    Process p = Runtime.getRuntime().exec(cmd);
    p.waitFor();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:10:14.033

这是 Java 中的 TRAP，请看看[这个页面](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)，你会得到比你想要的更多的东西！

# c# - 如何使用 AsyncFileUpload 在 c# 中读取 asp.net 中的文件内容？

> ID：13454383
> 
> 赞同：0
> 
> 时间：2012-11-19T13:01:00.853
> 
> 标签：c#, asp.net, file-upload, asyncfileupload

我有一个 AsyncFileUpload 控件：

```
<asp:AsyncFileUpload ID="venfileupld" runat="server" OnUploadedComplete="ProcessUpload" /> 
```

在其`OnUploadedComplete`事件中，我正在编写此代码：

```
protected void ProcessUpload(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string name = venfileupld.FileName.ToString();
    string filepath = "upload_excel/" + name;
    venfileupld.SaveAs(Server.MapPath(name));

} 
```

现在我必须阅读上传文件的内容......我有一个功能：

```
public void writetodb(string filename)
{
    string[] str;
    string vcode = "";
    string pswd = "";
    string vname = "";
    StreamReader sr = new StreamReader(filename);
    string line="";

    while ((line = sr.ReadLine()) != null)
    {
        str = line.Split(new char[] { ',' });
        vcode = str[0];
        pswd = str[1];
        vname = str[2];
        insertdataintosql(vcode, pswd, vname);
    }
    lblmsg4.Text = "Data Inserted Sucessfully";
} 
```

现在我的查询是如何让上传的文件传递给这个函数？

**更新**

我已经这样做了：

```
protected void ProcessUpload(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string name = venfileupld.FileName.ToString();
    string filepath = "upload_excel/" + name;
    venfileupld.SaveAs(Server.MapPath(name));
    string filename = System.IO.Path.GetFileName(e.FileName);
    writetodb(filepath);

} 
```

但出现错误...找不到文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:14:59.467

我不确定我是否理解了这个问题，但这并不容易：

```
protected void ProcessUpload(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    string name = System.IO.Path.GetFileName(e.filename);
    string dir = Server.MapPath("upload_excel/");
    string path = Path.Combine(dir, name);
    venfileupld.SaveAs(path);
    writetodb(path);
} 
```

`SaveAs`将文件保存在服务器上，这样你就可以用它做你想做的事。

# java - SimpleMappingExceptionResolver 似乎不起作用

> ID：13454384
> 
> 赞同：0
> 
> 时间：2012-11-19T13:01:10.440
> 
> 标签：java, spring, jakarta-ee

我们在使用 SimpleMappingExceptionResolver 时遇到了一些问题。但是，永远不会触发自定义错误页面。这个配置有什么问题？或者我们是否遗漏了一些我们也应该配置以使其工作的东西？我也尝试过其他例外。

```
<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">      
    <property name="exceptionMappings">
        <props>
            <prop key="javax.ejb.TransactionRolledbackLocalException">transaction-rollback</prop>                
        </props>
    </property>

    <property name="defaultStatusCode" value="500"/>
    <property name="defaultErrorView" value="internal-error"/>
</bean> 
```

# c# - 将十六进制枚举参数从 C# 传递到 C

> ID：13454385
> 
> 赞同：4
> 
> 时间：2012-11-19T13:01:10.790
> 
> 标签：c#, c, enums, interop

我在 C 中有一个接受十六进制参数的函数。我需要从 C# 调用这个函数。我目前的方法似乎不正确，因为我的 C 函数返回了错误的数字。

这是我的 C 函数的声明：

```
enum tags {
    TAG_A = -1,
    TAG_B  = 0x00, 
    TAG_C = 0xC1,  
    ...
};
int myfunction(enum tags t); 
```

这是我的 C# 代码：

```
enum tags {
    TAG_A = -1,
    TAG_B  = 0x00, 
    TAG_C = 0xC1, 
    ...
    }

[DllImport ("mylibraryname")]
    public static extern int myfunction(tags t);

myfunction(tags.TAG_B); 
```

我在 Mac 上，我使用 Mono 和 Xcode 来完成所有这些工作。可以假定 C 函数是正确的，因为它是我下载的开源库。我认为十六进制数字有问题，但我不确定。

# 解决方案：

我勾选了一个答案，尽管实际上将 C# 枚举设置为长期解决了我的问题。所以在 C# 中，我有：

> 枚举标签：长 { TAG_A = -1，TAG_B = 0x00，TAG_C = 0xC1，...}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:15:09.353

Hexadecimal is simply a different way of expressing a literal integer value. It's irrelevant to your problem. For instance `TAG_B = 0x00` and `TAG_B = 0` both mean exactly the same thing.

The problem is possibly that the C `enum` is a 16 bit integer, whereas the C# `enum` is 32 bit. Instead of creating an enum in C#, try just doing it as straight `Int32` values:

```
static class tags 
{
    public static short TAG_A = -1;
    public static short TAG_B  = 0x00;
    public static short TAG_C = 0xC1;
    // ...
}

[DllImport ("mylibraryname")]
public static extern int myfunction(short t);

myfunction(tags.TAG_B); 
```

Or, as L.B suggested, you can just set the type of the `enum` members:

```
enum tags:short 
{
    TAG_A = -1,
    TAG_B  = 0x00, 
    TAG_C = 0xC1,
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:16:31.533

On my architecture sizeof(enum_t), where enum_t is a typedef of an enum returns 4 bytes, so if the C# enum is 4 bytes as well i can't see the problem.

Check the size of the enum with sizeof for your architecture, if they match the problem is somewhere else.

# python - 使用可移植 python 连接到 Access 数据库

> ID：13454386
> 
> 赞同：2
> 
> 时间：2012-11-19T13:01:23.440
> 
> 标签：python, database, ms-access, odbc, portability

我想使用可移植的 python 2.7.x 连接到 Access 数据库。我似乎无法让它工作，因为它没有 pyodbc 库。还有另一种使用便携式python连接的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:48:37.620

最新版本的便携式 python 有一个安装 pyodbc 的选项，但您必须选择它默认不进入的选项。

1.  点击模块选项
2.  选择 pyodbc 的选项

![从模块列表中选择 pyodbc 选项](../Images/020d2768ac235193fbffbbce62d955fa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:30:17.433

我以不同的方式做到了... 按照我刚刚在我的 mac 雪豹上所做的操作！！

从 Internet 上的位置下载 pyodbc 的源代码。提取并“cd”到该目录中...... 运行“ `python setup.py build`”，然后`pyodbc.so`从该构建的目录中获取“”文件。制作名为' `pyodbc.py`'的新python文件并写入下面给出的内容。（并将'pyodbc.so'文件与它一起放置）

```
def __bootstrap__():
   global __bootstrap__, __loader__, __file__
   import sys, pkg_resources, imp
   __file__ = pkg_resources.resource_filename(__name__,'pyodbc.so')
   __loader__ = None; del __bootstrap__, __loader__
   imp.load_dynamic(__name__,__file__)
__bootstrap__() 
```

（请记住将上面的代码放在名为“pyodbc.py”的文件中，然后将“pyodbc.so”文件放在其中），最后将所有这些放在您想要使用的地方或在运行时将该位置添加`sys.path`为：

```
>>> import sys
>>> sys.path.insert(0,"/my_portable/location") # location to dir which contains those two files 
```

在完成所有这些之后，我将这两个文件与我的测试 python 文件放在一起。并且我能够在不安装它的情况下导入“pyodbc”。

```
>>> import pyodbc
>>> dir(pyodbc) 
```

# html - 文本 CSS 之前的透明 PNG

> ID：13454388
> 
> 赞同：-2
> 
> 时间：2012-11-19T13:01:32.973
> 
> 标签：html, css, background, background-image

我正在尝试制作一个没有不透明 css 内容的页面，但在所有文本和图像上都有一个透明的图像。只是，我无法获得文本的背景。

CSS：

```
 background-image: url('spotlight.png');
   width: 100%;
   height: 100%;
   position: absolute;
   top: 0;
   left: 0;
   z-index: 100; 
```

和 HTML 简单：

```
<div class="darkLayer"></div> 
```

结果：

![结果](../Images/8417175ca5505d22a520854397cdc883.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:05:16.933

url 应该是`url('spotlight.png');`，当然 png 必须是透明的。我还建议 toninoj 的想法与高数 z-index。

反正。你为什么要这样做？我能猜到的唯一解释是使右键单击抵抗网页，但还有其他更好的方法可以实现该目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:05:35.683

如果您希望 png 覆盖页面中的**所有**内容，则需要将覆盖 div 中的所有内容都清空，并将 z-index 增加到 20000 或其他值。

虽然，我不是 100% 确定你想要做什么。

但我认为，它在跨浏览器兼容性方面确实胜过 css。

是的，**在您的图片网址上使用引号**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:17:36.567

这个怎么样？

[http://jsfiddle.net/Z8rkT/](http://jsfiddle.net/Z8rkT/)

在此示例中，您只需将背景/不透明度线替换为透明背景图像。

* * *

```
<div class="wrapper">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla gravida, metus pharetra euismod eleifend, nisi est tempor massa, vel consectetur lorem elit non ante. Nulla facilisi. Nulla id libero eu erat suscipit pellentesque ultrices quis tellus. Donec ante dui, scelerisque nec venenatis id, suscipit sit amet ligula. Nulla turpis justo, fermentum id ullamcorper condimentum, posuere sit amet ligula. Praesent auctor, mi at tempor tincidunt, felis libero pretium ipsum, quis iaculis odio erat eu urna. Integer vel fermentum ipsum. Duis sit amet accumsan nunc. Nulla facilisi. Etiam condimentum nulla nec quam venenatis laoreet. Etiam massa ipsum, pellentesque sed imperdiet eget, ornare eget est. Fusce pulvinar lorem in nunc tempus fringilla. Vivamus posuere augue a mi interdum rhoncus. </p>
</div>

<div class="overlay"></div>

 html, body {
 width:100%;
 height:100%;
}

.wrapper {
 position:relative;
 z-index:1;
}

.overlay {
 position:absolute;
 top:0;
 left:0;
 width:100%;
 height:100%;
 background:#333;
 opacity:0.75;
} 
```

# android - 从相机或画廊获取全尺寸图片

> ID：13454390
> 
> 赞同：0
> 
> 时间：2012-11-19T13:01:43.580
> 
> 标签：android, android-camera, image-gallery

我正在尝试在注册过程中从用户那里获取图片。所以我有一个表格和一个按钮，可以启动相机、画廊、保管箱等，并要求用户选择或拍照。

在按钮 onClick 方法中，我正在使用本主题第二个答案中的示例[允许用户为图像选择相机或画廊](https://stackoverflow.com/questions/4455558/allow-user-to-select-camera-or-gallery-for-image)，它会打开一个对话框，其中包含我的图像应用程序作为选项。拍摄或选择照片后，我在 onActivityResult 的代码如下：

```
Bundle extras = data.getExtras();
Bitmap mImageBitmap = (Bitmap) extras.get("data");
foto.setImageBitmap(mImageBitmap) 
```

所以我有2个问题。首先，这只会得到一个缩略图，而不是我需要的全尺寸图片。其次，这仅在用户选择用相机拍摄新照片时才有效......

为了获得全尺寸图片，这段代码看起来不错[Android Camera Intent: how to get full-sized photo？](https://stackoverflow.com/questions/6448856/android-camera-intent-how-to-get-full-sized-photo)但它仅适用于相机拍摄的照片，而且还有这个选择器的意图，我不确定这段代码适合哪里。我应该验证女巫来源使用已选择吗？如果是这样，我该怎么做？

编辑：选择器意图为我提供了 4 个图像源选项：相机、图库、Dropbox 和 ASTRO 文件管理器。如果我安装了其他应用程序，当然会有更多选项可用。所以我检查了每种情况下的意图内容：

```
CAMERA: act=inline-data (has extras)
DROPBOX and GALLERY: dat="file path"
ASTRO: dat="file path" (has extras) 
```

所以验证意图是否有额外内容并不能告诉我来源。data.hasExtra("act") 和 data.hasExtra("dat") 都返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:10:39.287

这是从相机捕获的图像中获取全尺寸图像的代码

声明对象

```
private File dir, destImage,f;
private String cameraFile = null;

private static final int CAPTURE_FROM_CAMERA = 1; 
```

在你的活动中

```
dir = new File(Environment.getExternalStorageDirectory()
            .getAbsolutePath(), "MyApp");
if (!dir.isDirectory())
    dir.mkdir();

destImage = new File(dir, new Date().getTime() + ".jpg");
cameraFile = destImage.getAbsolutePath();   
try{
    if(!destImage.createNewFile())
        Log.e("check", "unable to create empty file");

}catch(IOException ex){
    ex.printStackTrace();
}

f = new File(destImage.getAbsolutePath());
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(destImage));
startActivityForResult(i,CAPTURE_FROM_CAMERA); 
```

在你的 onActivityResult

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
      case CAPTURE_FROM_CAMERA:
        if (resultCode==RESULT_OK) {
            if(f==null){
                if(cameraFile!=null)
                    f = new File(cameraFile);
                else
                    Log.e("check", "camera file object null line no 279");
            }else
                Log.e("check", f.getAbsolutePath());
            Bitmap useBitmap = BitmapFactory.decodeFile(f.getAbsolutePath());

                            // now use this bitmap wherever you want
        }
        break;
     }
} 
```

# c++ - C++ 中的动态代理类。是否可以？

> ID：13454391
> 
> 赞同：4
> 
> 时间：2012-11-19T13:01:57.253
> 
> 标签：c++, dynamic-proxy

首先，让我说我不是 C++ 程序员大师。我有几年的 C++ 经验，但我的主要领域是 .NET/C#。

我正在寻找一种在 C++ 中创建动态代理/包装类的方法。特别是，我想要实现的是拦截方法调用。这种技巧在 Java/.NET 世界中很常见，但 C++ 缺乏反射。

我找到了一个[在线教程](http://cppguru.wordpress.com/2009/01/14/c-proxy-template/)，它解释了如何通过 -> 运算符重载创建包装器并拦截方法调用：

```
class Person{
  std::string mName;
  Person(std::string pName): mName(name){}
  void printName(){
     std::cout << mName << std::endl;
  }

};

template <class T >
class Wrap {
     T * p ;
     public:
             Wrap (T * pp ) :p (pp) { }
             Call_proxy <T> operator ->() {
                   prefix ();
                   return Call_proxy<T>(p);
             }
};
template <class T >
class Call_proxy {
       T * p ;
       public :
              Call_proxy (T * pp ) :p (pp ){ }
              ˜Call_proxy () {
                     suffix ();
               }
               T * operator ->() {
                          return p ;
                }
 }; 
```

正如您从这个示例中看到的，我们可以在调用之前和之后捕获方法调用事件，但我不清楚的是如何检测正在调用哪个方法？有可能吗？

谢谢

**更新**

好吧，为了让事情更清楚，我真的不在乎实现是否真正动态。拥有一个类似于智能指针的包装类对我来说很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:28:40.600

不，这是专门为非侵入性设计的，包装器所做的只是促进前缀和后缀的调用，然后返回被引用的对象，以便它可以调用指定的函数。如果 -> 运算符被重载，那么 object->function() 将扩展为 object.operator->()->function()。

这是 Stroustrup 所写论文的链接，内容非常丰富[http://www.stroustrup.com/wrapper.pdf](http://www.stroustrup.com/wrapper.pdf)

# r - R删除包含某个值的行

> ID：13454395
> 
> 赞同：3
> 
> 时间：2012-11-19T13:02:15.177
> 
> 标签：r, dataframe

所以它有一个 csv 我正在读入一个 R 数据帧，它看起来像这样

```
clientx,clienty,screenx,screeny
481,855,481,847
481,784,481,847
481,784,481,847
879,292,879,355 
```

第一行当然是标题。所以我们有 4 列，其中包含数字数据，范围从 1 到 4 位。集合中没有负数，除了 -1 表示缺失值。我想删除任何 4 列中包含 -1 的每一行。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T13:25:20.160

您最有效的方法是使用 的`na.strings`参数将所有值`read.csv()`编码为，然后删除不完整的情况。`-1``NA`

* * *

**`na.strings=-1`第**1 步：**设置`read.csv()`：**

 **```
x <- read.csv(text="
clientx,clienty,screenx,screeny
481,855,481,847
481,784,481,847
481,784,481,847
-1,292,879,355", header=TRUE, na.strings=-1)

x
clientx clienty screenx screeny
1     481     855     481     847
2     481     784     481     847
3     481     784     481     847
4      NA     292     879     355 
```

* * *

**第 2 步：**现在使用`complete.cases`or `na.omit`：

```
x[complete.cases(x), ]
  clientx clienty screenx screeny
1     481     855     481     847
2     481     784     481     847
3     481     784     481     847

na.omit(x)
  clientx clienty screenx screeny
1     481     855     481     847
2     481     784     481     847
3     481     784     481     847 
```

* * *

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T13:15:01.747

直接方式：

```
df <- df[!apply(df, 1, function(x) {any(x == -1)}),] 
```

更新：如果 data.frame 包含字符列，则此方法将失败，因为`apply`隐式将 data.frame 转换为矩阵（仅包含一种类型的数据）并且字符类型优先于数字类型，因此 data.frame 将转换为字符矩阵。

或将 -1 替换为`NA`然后使用`na.omit`：

```
df[df==-1] <- NA
df <- na.omit(df) 
```

这些应该工作，我没有检查。请始终尝试提供可重现的示例来说明您的问题。**

# sql-server-2008 - 从 SQL 作业运行 PSExec 的权限

> ID：13454402
> 
> 赞同：0
> 
> 时间：2012-11-19T13:02:50.870
> 
> 标签：sql-server-2008, psexec, sql-job

我在 CMDExec 类型的 SQL 作业步骤中有以下内容（详细信息已更改）：

```
D:\path\PSExec.exe \\servername -accepteula -u "domain\username" -p password D:\path\executable.exe 
```

这工作正常。但是，我已经在 SQL Server 中为同一个用户帐户设置了一个代理 - 作业正在使用它，所以你会认为我不需要 -u 和 -p 参数。但是，如果我不提供它们，我会收到错误消息：

```
Unhandled Exception: System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. 
```

它来自 SQL Server，因为远程可执行文件以相同的用户上下文连接到 SQL。

为什么这不起作用，我可以在不包括工作详细信息的凭据的情况下使其工作吗？（或批处理文件，或类似文件）

谢谢

PS远程可执行文件连接的SQL Server与运行作业的SQL Server相同，如果有帮助的话！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:27:12.120

原因是因为 Kerberos 没有运行！

感谢 LinkedIn SQLDBA 组的 Marc Jellinek :)

# c# - SQL Server 2008 在哪里保存 database.mdf 文件？

> ID：13454407
> 
> 赞同：0
> 
> 时间：2012-11-19T13:03:11.767
> 
> 标签：c#, .net, ado.net

> **可能重复：**
> [SQL Server 连接字符串问题](https://stackoverflow.com/questions/8063158/sql-server-connection-string-problems)

我正在使用 asp.net 开发一个项目，数据库是 SQL Server 2008。当我在服务器上上传项目时，它无法连接到数据库。

我正在`web.config`文件中编写以下代码。我无法将文件存储在`.mdf`文件`App_data`夹中。

```
<connectionStrings> 
    <add name="bcharyaConnectionString" 
         connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\bcharya.mdf;Integrated Security=True;
                           User Id=myUsername;Password=myPassword;User Instance=True" 
         providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:06:08.167

使用此查询查找数据文件的位置

```
SELECT name, physical_name AS current_file_location
FROM sys.master_files 
```

[http://blog.sqlauthority.com/2009/02/17/sql-server-find-current-location-of-data-and-log-file-of-all-the-database/](http://blog.sqlauthority.com/2009/02/17/sql-server-find-current-location-of-data-and-log-file-of-all-the-database/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:17:43.250

Full fat SQL Server 不支持`AttachDbFilename`在连接字符串中。[您需要通过其他方式（很可能是SSMS](http://en.wikipedia.org/wiki/SQL_Server_Management_Studio) ）将数据库添加到您的服务器实例，然后使用不同的连接字符串连接到它。

# android - 在 Eclipse 中创建新的 android 项目需要很长时间

> ID：13454414
> 
> 赞同：0
> 
> 时间：2012-11-19T13:03:42.490
> 
> 标签：android, eclipse, project

我已经安装了已内置 Android SDK 的 Eclipse IDE。当我尝试创建一个新的 android 项目时，向导显示，我完成了所有步骤，没有问题，但在最后一步，当我单击完成时，项目需要永远构建。向导只是站在那里，我无法与它互动，也无法与日食互动。

在 eclipse 的状态栏上，我可以看到内存使用情况，在向导中单击完成后的前两三秒内，内存使用量越来越大，但两三秒后它停止了，一切都停止了。但这不是死锁，因为大约一个小时后，我可以看到内存使用量增加了 1MB（仅 1MB）。按照这个速度，创建一个项目需要很长时间。我把它留了一夜，但它仍然没有完成。

（我曾尝试将 eclipse 的内存限制增加到 1024MB，但没有帮助）

编辑：

eclipse（和javaw.exe）的CPU消耗很低，大约1%。我的 CPU 是 AMD A6-3400M，操作系统是 Windows7 64 位，4GB RAM。

# wpf - WPF：绑定到嵌套对象的属性

> ID：13454415
> 
> 赞同：1
> 
> 时间：2012-11-19T13:03:46.153
> 
> 标签：wpf, xaml, binding

我的控件 ( `MyControl`) 基于`UserControl`. 它包含`ListBox`名为 的项目`myListBox`。我将`MyControl`实例作为`myControlInstance`变量放在窗口上。此窗口包含和其他控件，命名为`appInfo`变量。`appInfo.SomeProperty`我需要将与绑定`MyControl.myListBox.SelectedItem`。我怎样才能通过 XAML 做到这一点？

我试试看：

```
DataContext="{Binding ElementName=myControlInstanceName, 
Path=myListBox.SelectedItem}" 
```

但它不起作用。如何通过 XAML 解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:25:32.123

我通过下一个 XAML 代码解决它：`DataContext="{Binding ElementName=myControlInstanceName, Path=Content.Children[1].SelectedItem}"`

# c# - ListView bound to a derived collection not updating (XAML / Windows 8)

> ID：13454418
> 
> 赞同：2
> 
> 时间：2012-11-19T13:04:04.173
> 
> 标签：c#, xaml, listview, windows-8, observablecollection

I'm trying to pivot my data by creating a 'view' of an Observable Collection based on certain criteria. Here's a simple example.

I have two ListViews. One is bound directly to a collection of `Dates`, the other is bound to a `DatesAfterToday` collection derived from the first collection using `Where(x => x.Date > DateTime.Today)`

When I add a new item to my `Dates` collection, only the first ListView changes. The ListView bound to `DatesAfterToday` does not update at all. I've tried adding a `PropertyChangedEventHandler` to the viewmodel and firing it when the dates collection is updated, but it's not working.

MainPage.xaml

```
<StackPanel>
    <ListView x:Name="ListOne" ItemsSource="{Binding Dates}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Date}"></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
    <ListView x:Name="ListTwo" ItemsSource="{Binding DatesAfterToday}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Date}"></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
    <Button Click="Button_Click_1">Press Me to Add a Date</Button>
</StackPanel> 
```

View Model

```
public class Model : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public Model()
    {
        _Dates = new ObservableCollection<DateTime>();
    }
    private ObservableCollection<DateTime> _Dates;
    public ObservableCollection<DateTime> Dates
    {
        get
        {
            return _Dates;
        }
        set
        {
            _Dates = value;
            if (PropertyChanged != null){
                PropertyChanged(this, new PropertyChangedEventArgs("_Dates"));
                PropertyChanged(this, new PropertyChangedEventArgs("Dates"));
                PropertyChanged(this, new PropertyChangedEventArgs("DatesAfterToday"));
            }
        }
    }
    public ObservableCollection<DateTime> DatesAfterToday 
    { 
        get {
            return new ObservableCollection<DateTime>(
                _Dates.Where(t => t.Date > DateTime.Today).ToList()
            );
        }
    }
} 
```

MainPage.xaml.cs

```
public sealed partial class ListTest : Page
{
    public Model model;
    public ListTest()
    {
        this.InitializeComponent();
        model = new Model();
        model.Dates.Add(new DateTime(2012, 11, 12, 0, 0, 0));
        model.Dates.Add(new DateTime(2012, 11, 15, 0, 0, 0));
        model.Dates.Add(new DateTime(2012, 11, 17, 0, 0, 0));
        model.Dates.Add(new DateTime(2012, 11, 20, 0, 0, 0));
        model.Dates.Add(new DateTime(2012, 11, 22, 0, 0, 0));
        this.DataContext = model;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        model.Dates.Add(new DateTime(2012, 11, 24, 0, 0, 0));
    }
} 
```

UPDATE: Edited the question to make it a bit easier to read.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:22:41.133

Modify your `Model` constructor as follows:

```
public Model()
{
    _Dates = new ObservableCollection<DateTime>();

    _Dates.CollectionChanged += (s, e) =>
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("DatesAfterToday"));
            }
        };
} 
```

The thing is that when you add/remove items from the `_Dates` collection, the setter won't be called, and that's why the property change event for `DatesAfterToday` is never raised.

For collections, WPF also registers for the `CollectionChanged` event, which is exposed by the `INotifyCollectionChanged` interface implemented by `ObservableCollection`. So what you can do is raise the notification for `DatesAfterToday` whenever the `_Dates` collection is modified.

# css - CSS3 变换矩阵到全变换转换

> ID：13454420
> 
> 赞同：4
> 
> 时间：2012-11-19T13:04:06.077
> 
> 标签：css

我有一个**100px 宽度**和**100px 高度**的 div，具有以下矩阵：

```
transform: matrix(1, 0.5, 1, -0.45, 0, 0); 
```

这给了我这个：

![使用 matrxi 转换后的 div](../Images/883b3f1f149a340f7943dd9e47e2caf7.png)

如何将变换矩阵 CSS 规则转换为完整的变换 CSS 规则？

***例如：***

```
transform: scale(0.1) rotate(0.5) skew(0.3); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T13:34:23.907

您将需要根据矩阵中的值计算每个部分。我发现的关于仿射变换的最好介绍是这个（尽管它是针对 ActionScript，但数学是一样的）；

[http://www.senocular.com/flash/tutorials/transformmatrix/](http://www.senocular.com/flash/tutorials/transformmatrix/)

或者这个，专门针对 CSS：

[http://dev.opera.com/articles/view/understanding-the-css-transforms-matrix/](http://dev.opera.com/articles/view/understanding-the-css-transforms-matrix/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-28T00:53:27.817

我在 gists [https://gist.github.com/mbostock/1340727](https://gist.github.com/mbostock/1340727)上发现了一些称为分解矩阵的东西，符合 W3C 标准，希望这会有所帮助。

# java - 序列化方法

> ID：13454421
> 
> 赞同：0
> 
> 时间：2012-11-19T13:04:12.203
> 
> 标签：java, android, serialization, xml-serialization, restlet

我正在编写 android 应用程序 - 客户端和 java 服务器。我正在使用restlet库。当我在手机上运行应用程序时，logcat 中出现以下错误： `11-19 13:43:53.665: E/dalvikvm(10130): Could not find class 'java.beans.XMLDecoder', referenced from method org.restlet.representation.ObjectRepresentation.<init>`

我想我必须更改对象序列化方法（我更喜欢使用 Java 原生序列化，因为它就像在服务器上一样）但我不知道该怎么做。

android应用程序中的代码：

```
ClientResource cr = new ClientResource(
    "http://192.168.1.102:8182/speedLimit"
);

resource = cr.wrap(SpeedLimitsResource.class);
coords.setLatitude(55);
coords.setLongtitude(16.5);
pack = resource.retrieve(coords); 
```

pack 和 coords 是在客户端和服务器之间共享的传输类的实例。它们实现了 Serializable，它们在同一个包中。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:48:33.907

确保您使用 android 版本的 restlet：[http ://www.restlet.org/downloads/stable](http://www.restlet.org/downloads/stable)

# windows-phone-7 - 尝试访问 Microsoft.Phone.Media.Extended 时反射失败

> ID：13454422
> 
> 赞同：3
> 
> 时间：2012-11-19T13:04:15.913
> 
> 标签：windows-phone-7, windows-phone-8

我正在Silverlight 中为Windows phone 8 开发一个Flash Light 应用程序。目前我深陷在一个使用“Microsoft.Phone.Media.Extended”程序集的问题上。Windows Phone 7 的 Flash Light 应用程序已经在 Windows Phone Marketplace 中运行，它在 Windows Phone 7 上运行良好，但由于“Microsoft.Phone.Media.Extended”dll，它不适用于 Windows Phone 8。

将 WP7 应用程序转换为 wp8 并运行后，我收到了这种类型的错误消息：

> 无法加载文件或程序集“Microsoft.Phone.Media.Extended,Version=7.0.0.0, Culture=neutral, PublicKeyToken=24eec0d8c86cda1e”或其依赖项之一。系统找不到特定文件。”

根据 Windows Phone 特定功能的以下链接：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx)

> 如果您使用反射来访问此程序集中的 API，因为它们没有公开公开，您的应用程序可能会在 Windows Phone 8 设备上失败。删除对此程序集的调用并使用公开的媒体 API。

我不明白如何使用公开的媒体 API。我在 Windows Phone 7 中使用反射使用 Microsoft.Phone.Media.Extended。是否有任何直接方法可以在 Windows Phone 8 中访问 Microsoft.Phone.Media.Extended 或其他方式来解决这个问题？

谢谢。

==================================================== ========================= 编辑问题：

你好，

根据线程，我们使用“VideoTorchMode”枚举来打开手电筒。据此，我使用带有以下代码的 Windows.Phone.Media.Capture 命名空间的 AudioVideoCaptureDevice 类：

```
 var objDevice = await AudioVideoCaptureDevice.OpenAsync(CameraSensorLocation.Back, AudioVideoCaptureDevice.GetAvailableCaptureResolution(CameraSensorLocation.Back).First());
    objDevice .SetProperty(KnownCameraAudioVideoProperties.VideoTorchMode, VideoTorchMode.On); 
```

我想保持闪光灯打开但不捕捉视频。所以，我还没有初始化视频捕获代码。问题是，我还没有 WP8，在模拟器中我无法测试这个。

任何人都可以确认，一旦我输入此代码，我的应用程序将作为 Flashlight-X 工作，其中灯将亮起而不闪烁，并且它也不会在 WP8 中崩溃。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T13:02:49.523

Microsoft.Phone.Media.Extended 是 WP7 中的私有 API，不打算由 3rd 方开发人员使用。该 API 不存在或适用于 WP8。

对于 WP8 手电筒，使用 VideoTorchMode=On 的 AudioVideoCaptureDevice 已知属性。此外，请确保通过显示白屏来处理异常或没有相机手电筒的设备等故障。

这是在 Lumia 820 和 Lumia 920 上打开相机闪光灯的代码示例：

```
var sensorLocation = CameraSensorLocation.Back;

try
{
    // get the AudioViceoCaptureDevice
    var avDevice = await AudioVideoCaptureDevice.OpenAsync(sensorLocation,
        AudioVideoCaptureDevice.GetAvailableCaptureResolutions(sensorLocation).First());

    // turn flashlight on
    var supportedCameraModes = AudioVideoCaptureDevice
        .GetSupportedPropertyValues(sensorLocation, KnownCameraAudioVideoProperties.VideoTorchMode);
    if (supportedCameraModes.ToList().Contains((UInt32)VideoTorchMode.On))
    {
        avDevice.SetProperty(KnownCameraAudioVideoProperties.VideoTorchMode, VideoTorchMode.On);

        // set flash power to maxinum
        avDevice.SetProperty(KnownCameraAudioVideoProperties.VideoTorchPower,
            AudioVideoCaptureDevice.GetSupportedPropertyRange(sensorLocation, KnownCameraAudioVideoProperties.VideoTorchPower).Max);
    }
    else
    {
        ShowWhiteScreenInsteadOfCameraTorch();
    }

}
catch(Exception ex)
{
    // Flashlight isn't supported on this device, instead show a White Screen as the flash light
    ShowWhiteScreenInsteadOfCameraTorch();
} 
```

确保在使用相机手电筒（ISV_Camera、Microphone 和 ID_REQ_BACK_Camera）时向您的 WP8 应用程序添加所需的功能和要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:59:13.543

What about getting this assembly from somewhere and adding it to your XAP directly (try asking on XDA developers)? This might work, if it's signed and not requiring any special capabilities.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T00:30:25.073

如果您使用新 API“录制”视频，那么使用[VideoTorchMode](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.videotorchmode%28v=vs.105%29.aspx)枚举可能只是希望您想要创建“手电筒”效果。

# google-maps - 是否可以在不向谷歌服务器请求的情况下将位置标记放在谷歌地图上？

> ID：13454429
> 
> 赞同：0
> 
> 时间：2012-11-19T13:04:27.723
> 
> 标签：google-maps, google-maps-markers

真正快速/简单的问题将确定我用于我的项目的地图 API。

我不需要一个例子——我想弄清楚，我只需要知道这些能力是否存在。

如果我在数据库中存储了地理编码（纬度，经度）坐标，我可以在谷歌地图上放置一个红色的小标记，而不必实际从谷歌发出地理编码请求吗？

附加问题：

此外，每次我显示他们的一张地图时，它是否会计入任何配额，即使我给他们地理编码的坐标？因为我的意思是从技术上讲，他们的地图仍然必须找到那些坐标......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:42:34.447

Q1：是的——你告诉 API 放置标记的坐标，而不是让谷歌找到这些坐标。

Q2：使用限制[由谷歌公布](https://developers.google.com/maps/faq#usagelimits)。您每天最多可以[加载 25000 个地图。](https://developers.google.com/maps/faq#usage_mapload)如果您不使用地理编码器，因为您自己提供坐标，那么您不使用地理编码器访问。

# versioning - Perforce - 如何丢弃整个文件夹的更改？

> ID：13454431
> 
> 赞同：2
> 
> 时间：2012-11-19T13:04:35.717
> 
> 标签：versioning, perforce

我已经修改和编辑了针对 Windows 32 构建的文件夹中的一些项目文件，并使项目构建为不同的目标。然后我复制了该文件夹并将其重命名，但我希望 depo 中的文件不会对 windows 32 文件夹进行任何修改。

如何放弃对 windows 32 文件夹所做的更改并用工作的 depo 版本替换文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:12:53.190

从命令行，以下应该工作：

```
c:\my\root\source\dir> p4 revert windows32/...
c:\my\root\source\dir> p4 sync windows32/...#none
c:\my\root\source\dir> rd /s/q windows32
c:\my\root\source\dir> p4 sync windows32/... 
```

我通常删除目录（因此是`rd`）以捕获错误添加到源目录而不是 repo 的任何文件。`revert`除非在 windows 子目录中有处于*编辑*模式的文件，否则不需要。为了安全起见，我通常会还原所有内容。如果您在线上遇到错误`sync windows32/...#none`，请尝试替换`#none`为`#0`。

# c - 如何通过 void 指针访问成员

> ID：13454433
> 
> 赞同：1
> 
> 时间：2012-11-19T13:04:41.047
> 
> 标签：c, syntax, void-pointers

从尝试编写一个将基本算术翻译成英文的小程序开始，我最终构建了一个二叉树（它不可避免地非常不平衡）来表示评估的顺序。首先，我写了

```
struct expr;

    typedef struct{
    unsigned char entity_flag;  /*positive when the oprd
    struct represents an entity 
     ---a single digit or a parenthesized block*/                      
    char oprt;

    expr * l_oprd;// these two point to the children nodes 
    expr * r_oprd;
    } expr; 
```

但是，为了有效地表示单个数字，我更喜欢

```
typedef struct{
 unsigned char entity_flag;
 int ival;
} digit; 
```

由于现在每个“expr”结构的“oprd”字段可能是上述结构中的任何一个，我现在将修改它们的类型为

```
void * l_oprd;
void * r_oprd; 
```

然后是“中心问题”：如何通过 void 指针访问成员？请看下面的代码

```
#include<stdio.h>
#include<stdlib.h>

typedef struct {
int i1;
int i2;} s;
main(){
void* p=malloc(sizeof(s));

//p->i1=1;
//p->i2=2;

*(int*)p=1;
*((int *)p+1)=2;
printf("s{i1:%d, i2: %d}\n",*(int*)p,*((int *)p+1));
} 
```

编译器不接受注释版本！我必须用上面杂乱的方法来做吗？

请帮忙。

PS：正如您所注意到的，上面的每个 struct-s 都拥有一个名为“entity_flag”的字段，因此

```
void * vp;
...(giving some value to vp)
unsigned char flag=vp->entity_flag; 
```

无论 void 指向什么，都可以提取标志，这在 C 中是否允许？甚至是 C 语言中的“安全”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:07:30.637

只需转换`p` 为相关的指针类型：

```
s *a = p;

a->i1 = 42;
a->i2 = 31; 
```

或者

```
((s *) p)->i1 = 42;
((s *) p)->i2 = 31; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:07:59.120

你可以投它：

```
((s*)p)->i1=1;
((s*)p)->i2=2; 
```

我没有看到任何`entity_flag`结构`s`，但如果你`expr`的意思同样适用：

```
unsigned char flag=((expr*)vp)->entity_flag; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:14:04.097

您不能通过`void *`指针访问成员。您可以通过多种方式进行转换（实际上，您甚至*不需要*用 明确说明情况`void *`），但即使这样也是**错误的答案**。

正确答案是使用`union`：

```
typedef union {
  struct{
    unsigned char entity_flag;  /*positive when the oprd
    struct represents an entity 
     ---a single digit or a parenthesized block*/                      
    char oprt;

    expr * l_oprd;// these two point to the children nodes 
    expr * r_oprd;
  } expr;
  struct{
    unsigned char entity_flag;
    int ival;
  } digit;
} expr; 
```

然后您可以访问这样的表达式（给定一个变量`expr *e`）：

```
e->expr->entity_flag; 
```

像这样的数字：

```
e->digit->entity_flag; 
```

任何其他解决方案都是令人讨厌的黑客，IMO，并且大多数转换解决方案都将冒着违反“严格别名”规则的风险，即允许编译器假设两个不同类型的指针不能引用相同的内存。

* * *

编辑 ...

如果您需要能够检查数据本身以找出正在使用的工会成员，您可以。

基本上，如果两个结构中最顶层的字段被声明为相同，那么它们将具有相同的二进制表示。这不仅限于联合，在为该架构编译的所有二进制文件中通常都是如此（如果您考虑一下，这对于库的工作至关重要）。

在联合体中，通常会将它们拉出到一个单独的结构中，以便您在做什么很明显，尽管这不是必需的：

```
union {
  struct {
    int ID;
  } base;
  struct {
    int ID;
    char *data
  } A;
  struct {
    int ID;
    int *numeric_data;
  } B;
} 
```

在此方案中，`p->base.ID`, `p->A.ID`,`p->B.ID`保证读取相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T13:55:36.323

如果您知道 struct 成员所在位置的偏移量，则可以进行指针运算，然后根据 entity_flag 的值强制转换为适当的类型。

我强烈建议以字节为单位对齐两个结构，并为 oprt 和 digit 使用相同的字节数。

此外，如果您的树中只有 oprt 和 digit“类型”，您可以牺牲第一位精度来标记 digit 或 oprt，并节省 unsigned char entity_flag 所需的空间。如果您对 oprt 和 digit 使用单个 4 字节 int var 并使用第一位对类型进行编码，则可以通过（使用联合解决方案模式：在线程中提出）提取数字

```
typedef union {
    struct {
        int code;
        expr * l_expr;
        expr * r_expr;
    } oprt;
    struct {
       int val;
    } digit;
} expr;

expr *x;
int raw_digit = x->digit.val;

int digit = raw_digit | ((0x4000000 & raw_digit) << 1 ) // preserves sign in 2's complement 

x->digit.val = digit | 0x8000000                       // assuming MSB==1 means digit 
```

使用联合不一定会为数字使用更多内存。基本上一个数字只需要4个字节。因此，每次需要分配数字类型 expr 时，您只需调用 malloc(4)，将结果转换为 *expr，并相应地将 MSB 设置为 1。如果您对 expr 指针进行编码和解码而没有错误，那么您将永远不会尝试超出“数字”类型 expr 的第 4 个字节......希望如此。如果您需要安全，我不推荐此解决方案^_^

要轻松检查 expr 类型，您可以在联合中使用位域，我相信：

```
typedef union {
   struct {
       int code;
       expr * l_expr;
       expr * r_expr;
   } oprt;
   struct {
       int val;
   } digit;
   struct {
       unsigned int is_digit : 1;
       int : 31; //unused
   } type; 
```

} 表达式；

# java - 变量的 ANTLR 文法

> ID：13454437
> 
> 赞同：3
> 
> 时间：2012-11-19T13:05:19.943
> 
> 标签：java, antlr, dsl, antlr3, antlrworks

看看我的语法

```
grammar protocol;

options {  
  language = Java; 
  output = AST;
}                     
//imaginary tokens
tokens{ 
BOOL;
CHAR;
STRING;
}
parse
    : declaration
    ;

declaration
    :   variable
    ;
variable
    :   locals
    ;
locals
  :  (bool
  |  char
  |  string)+
  ;
bool
    :'bool' ID -> ^(BOOL ID)
    ;
char
    : 'char' ID -> ^(CHAR ID)
    ;
string  
    :'string' ID -> ^(STRING ID)
    ;

ID  
    : (('a'..'z' | 'A'..'Z'|'_')('a'..'z' | 'A'..'Z'|'0'..'9'|'_'))*
    ;
INT 
    : ('0'..'9')+
    ;
WHITESPACE
    : ('\t' | ' ' | '\r' | '\n' | '\u000C')+ {$channel = HIDDEN;}
    ; 
```

对于以下输入，

```
bool boolVariable
char charVariable
string stringVariable 
```

我的语法创建了以下 AST
![AST 对于变量的语法](../Images/c9df8770a9d36846fe88141704aefe11.png)

我不能多次声明一个变量。我不想一次声明相同类型的变量，用逗号分隔，但我想要这样

```
bool boolVariable1
bool boolVariable2
bool boolVariable3
string stringVariable1
string stringVariable2 
```

这样做之后，我希望所有变量都属于两种主要类型。共享和本地。在 Java 中，共享变量（静态）是对所有对象具有单个副本的变量，而局部变量对每个对象具有单独的副本。我希望用户在定义变量集之前明确指定变量的范围。喜欢，

```
locals:
    bool boolVariable1
    bool boolVariable2
    bool boolVariable3
    string stringVariable1
    string stringVariable2
shared:
    bool boolVariable4
    bool boolVariable5
    bool boolVariable6
    string stringVariable3
    string stringVariable4
    char charVariable1 
```

此外，有什么方法可以检查用户不能有两个同名的变量吗？喜欢，

```
bool boolVariable
bool boolVariable 
```

应该给出某种错误或类似的错误。有什么想法/帮助吗？
谢谢

**编辑 - 解决方案**

```
grammar protocol;

options {  
  language = Java; 
  output = AST;
}                     
//imaginary tokens
tokens{ 
BOOL;
CHAR;
STRING;
SBOOL;
SCHAR;
SSTRING;
}
parse
    : declaration
    ;

declaration
    :   variable
    ;
variable
    :   (locals 
    |   shared)*
    ;
locals
  : 'locals:' (bool| char| string)*
  ;
bool
    :'bool' ID -> ^(BOOL ID)
    ;
char
    : 'char' ID -> ^(CHAR ID)
    ;
string  
    :'string' ID -> ^(STRING ID)
    ;
shared
  : 'shared:' (sbool| schar| sstring)*
  ;

sbool
    :'bool' ID -> ^(SBOOL ID)
    ;
schar
    : 'char' ID -> ^(SCHAR ID)
    ;
sstring 
    :'string' ID -> ^(SSTRING ID)
    ;
ID  
    : (('a'..'z' | 'A'..'Z'|'_')('a'..'z' | 'A'..'Z'|'0'..'9'|'_'))*
    ;
INT 
    : ('0'..'9')+
    ;
WHITESPACE
    : ('\t' | ' ' | '\r' | '\n' | '\u000C')+ {$channel = HIDDEN;}
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:26:29.153

正如 Bahdan 在[他的回答](https://stackoverflow.com/a/13454627/1201210)中提到的那样，您需要维护一个已经使用过的名称的集合。这是一个基于您更新的语法的简单示例（在此答案的底部进行了一些其他更改）。新规则`var`是使用新成员代码的地方。请注意，这里没有进行真正的错误处理，只是进行名称检查。

```
grammar protocol;

options {  
  language = Java; 
  output = AST;
}                     
//imaginary tokens
tokens{ 
BOOL;
CHAR;
STRING;
SBOOL;
SCHAR;
SSTRING;
}

@parser::header { 
    import java.util.ArrayList;
}

@members {
    private ArrayList<String> variableNames = new ArrayList<String>();

    private boolean variableDefined(String name){
        return variableNames.contains(name);
    }

    private void defineVariable(String name){
        variableNames.add(name);
    }
}

parse
    : declaration
    ;

declaration
    :   variable
    ;
variable
    :   (locals | shared)*
    ;
locals
    : 'locals:' (bool| char_ | string)*
    ;
bool
    :'bool' var -> ^(BOOL var)
    ;
char_
    : 'char' var -> ^(CHAR var)
    ;
string  
    :'string' var -> ^(STRING var)
    ;
shared
    : 'shared:' (sbool| schar| sstring)*
    ;
sbool
    :'bool' var -> ^(SBOOL var)
    ;
schar
    : 'char' var -> ^(SCHAR var)
    ;
sstring 
    :'string' var -> ^(SSTRING var)
    ;   
var
    : ID 
      {!variableDefined($ID.text)}? //This rule is only satisfied if the variable is new. 
      {defineVariable($ID.text);}  //we made it here, so it's new. Add it for future reference.
    ;    
ID  
    : ('a'..'z' | 'A'..'Z'|'_')('a'..'z' | 'A'..'Z'|'0'..'9'|'_')*
    ;
INT 
    : ('0'..'9')+
    ;
WHITESPACE
    : ('\t' | ' ' | '\r' | '\n' | '\u000C')+ {$channel = HIDDEN;}
    ; 
```

> 我可以声明两个变量，如 bool boolVariable bool boolVariable 但我不能声明两个变量，如 bool boolVariable bool boolVariable12

请参阅我对`ID`上面的更改。有一组额外的括号破坏了规则。我还重命名`char`为`char_`让解析器为我正确编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:18:19.863

你可以试试这个：

```
 locals
      :  bool* char* string*
      ; 
```

它应该允许您声明具有相同类型的不同变量。禁止声明具有相同名称的不同变量的最佳（我认为）方法是将集合（在 Java 中）与声明的先前变量保持一致。只需调用 Java 函数，就像[这里](http://www.antlr.org/wiki/display/ANTLR3/Simple+tree-based+interpeter)

最诚挚的问候

# java - 合并 Hibernate 集合上的项目

> ID：13454439
> 
> 赞同：0
> 
> 时间：2012-11-19T13:05:28.430
> 
> 标签：java, database, hibernate, jpa

我有这个实体：

```
@Entity
@Table(name="AA_CHARGE")
public class Charge2 extends AbstractProduct implements Serializable {

    private static final long serialVersionUID = 1L;

    private String currency;

    private String chargeType;

    @OneToMany(mappedBy = "charge")
    private Set<Rate2> chargeRates;

    ...
}

public class Rate2 implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="RATE_ID")
    private String id;

    private Date startDate;

    private Date endDate;

    private BigDecimal rate;

    private String templateType;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="CHARGE_ID")
    private Charge2 charge;

    ...
} 
```

我有一个指定的**Charge 对象**，其中只有一个**ChargeRates 集合**上的元素（例如，带有 id A），它保存在数据库中。

在这种情况下，我读取了另一个对象并获得了相同的费用，但**chargeRates 集合不等于**。（例如，有一个 ID 为 B 的费率）。

hibernate 是否应该更新我的 Charge 并将 2 个元素放入 ChargeRates 中？在此之后，如果我对数据库进行查询，则会收到错误消息“具有相同标识符值的不同对象已与会话相关联”

Charge id 是一样的，为什么hibernate会针对这种情况报这个错误呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:33:21.440

No Hibernate 不会更新您现有的收费对象。因为您没有更新已附加到休眠会话的现有费用对象。当您创建新的收费对象时，休眠不知道它的内容是否与已经附加的内容相似，因为**这两个对象的哈希码不相同。**结果你得到了例外。

**解决方案：**
当您看到第二个对象与前一个对象相似时。您只能将新的chargeRate 对象添加到之前的charge 对象列表中。然后更新对象（更改反映在数据库中）。

# ruby-on-rails - Rails 活动记录在哪里找到 nil

> ID：13454446
> 
> 赞同：2
> 
> 时间：2012-11-19T13:05:51.027
> 
> 标签：ruby-on-rails, ruby, activerecord

我的产品模型有一个成本属性，它的类型是`float`并且一切正常。创建新产品时，用户可以为免费产品输入 0 或留空，或在付费产品时输入成本，到目前为止效果还不错

现在我正在尝试确定免费项目的范围，但是由于 float 正在返回`NIL`空字段并且我无法返回 nil 字段。

我试过了

`scope :free, where("cost IS NULL or cost < ?", 1 )`

并且它不返回空白（NIL）字段，但仅返回 0 字段，但我想返回空白（NIL）字段和 0 字段。我知道rails 3中的浮动字段返回`nil`而不是`null`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T14:16:48.933

尝试这个：

```
scope :free, where(:cost => [nil,0] ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T14:15:04.453

我会改为将成本列设置为 0，以防成本字段留空。它将为您节省 nil 处理并使您的代码更加一致。

为此，只需在您的 Product 模型上应用 before_create 回调：

```
before_create :set_cost

def set_cost
  self.cost = 0 if self.cost.blank?
end 
```

然后只需应用迁移将所有 NULL 成本产品转换为 0 成本产品。

# c - 从字符串 [strcspn()] 中的指针警告中获取整数

> ID：13454447
> 
> 赞同：0
> 
> 时间：2012-11-19T13:05:51.543
> 
> 标签：c, string, string-comparison

我正在使用此函数从字符串中删除换行符：

```
void remove_newline(char *string) {
    string[strcspn(string, "\r")] = "\0";
    string[strcspn(string, "\n")] = "\0";
} 
```

有趣的是，当我尝试编译时收到警告：

> 警告：赋值从没有强制转换的指针生成整数

为什么在这种情况下我会收到这样的警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:10:26.463

`"\0"`是一个*字符串文字*并定义一个字符数组`{'\0', '\0'}`。如果不使用索引，它会衰减为指针。然后，您尝试将此指针分配给`string[...]`哪个是 8 位整数 a `char`，因此会发出警告

> 赋值从没有强制转换的指针生成整数

要对单个字符、*字符文字*进行编码，请使用单引号：`'\0'`

# .net - 在线安装 .net 应用程序

> ID：13454452
> 
> 赞同：0
> 
> 时间：2012-11-19T13:06:12.983
> 
> 标签：.net, winforms, installation

我有一个 Windows 窗体应用程序。我想让用户访问 url（一个网站），然后单击网站上的安装按钮。单击此按钮应在他们的计算机上安装应用程序。我希望我说清楚了。任何帮助，将不胜感激。

**我不希望 clickOnce 安装或 MSI 包可在线下载**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:20:05.470

转到项目属性-> 发布-> 发布向导-> 从网站继续

# html - svg + ipad 标志大小困难

> ID：13454453
> 
> 赞同：0
> 
> 时间：2012-11-19T13:06:25.057
> 
> 标签：html, css, svg

在此处使用 svg 作为徽标（需要时回退到 png）

在桌面上一切正常，当我缩小浏览器时一切正常。但是在真正的 ipad 上，我的徽标（svg）正在将导航向下推……很多。

显然有什么问题，但它无法弄清楚它是什么。已尝试为其添加最大高度，但没有区别。已尝试向周围的 div 添加最大高度 .... 不走运

...我可以忽略 svg 而只使用 png，但想让它工作。

任何人都可以帮助解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:50:58.000

好的，我已经解决了这个问题。

我正在使用modernizr和img标签

```
if (Modernizr.inlinesvg) {
               //SVG.
        //    $('#logosvg').html('<img src="BLogo_Intra_RGB.svg" alt="alt" />');

        } else {
            //No SVG.
        //    $('#logosvg').html('<img src="logo.png" alt="alt" />');
} 
```

而我现在已将其更改为使用对象标签

```
 <div id="logosvg" class="eleven columns" style="outline: 1px solid blue">
            <object data="Logo_Intra_RGB.svg" type="image/svg+xml" class="classsvg" alt="alt">
                <a href="Logo_Intra_RGB.svg">
                    <!--[if lte IE 8 ]-->
                    <img src="log.png" alt="alt">
                    <--![endif]-->
                </a>
            </object>
            </div> 
```

这似乎工作正常我在classsvg上有一个100%的css宽度

请注意，我可以看到为什么 svg 没有得到更广泛的使用 :-)

# windows-7 - 在 Windows 7 上的 IIS7.5 中添加 ASP 网站

> ID：13454455
> 
> 赞同：0
> 
> 时间：2012-11-19T13:06:27.147
> 
> 标签：windows-7, iis-7, asp-classic

我正在尝试在 Windows 7 上的 IIS 7.5 下添加一个 ASP 网站，但到目前为止还没有运气。这个网站仅供我在本地访问。我需要对一些 ASP 文件中的一些 HTML 进行一些更改，并且我只需要能够在我进行更改时对其进行测试。

我安装了 IIS 并选中了 ASP 框。接下来，我添加了一个名为 ASP 的应用程序池，其中设置了“无托管代码”和“ASP”。接下来，我通过右键单击“站点”然后单击“添加网站...”来添加网站。我给了它一个名字，设置它使用 ASP 应用程序池，将它指向 ASP 代码所在的路径（我在传递身份验证时保留它），并输入 5555 作为端口，以免干扰默认网站。代码位于我的服务器上，路径仅使用我总是用来访问该驱动器阵列上的文件的映射驱动器。

当我输入时`http://mysite:5555`，我得到“ `could not find mysite:5555`”。我真的不知道所有这些设置是否正确或我应该尝试什么。

我错过了什么？

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:02:06.767

在此网站的 IIS 设置中将主机更改为“localhost”就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:13:18.847

如果您没有运气，请尝试下载 Baby ASP Web Server。

[http://www.softpedia.com/get/Internet/Servers/WEB-Servers/Baby-ASP-Web-Server.shtml](http://www.softpedia.com/get/Internet/Servers/WEB-Servers/Baby-ASP-Web-Server.shtml)

与来自 Internet 的所有应用程序一样，请在安装前扫描威胁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:04:20.090

你检查过你的防火墙规则吗？

# node.js - 在 nodejs 中封装一个 socket.io 实例

> ID：13454456
> 
> 赞同：0
> 
> 时间：2012-11-19T13:06:28.147
> 
> 标签：node.js, module, socket.io

我正在尝试在模块中封装 socket.io 实例。我这样做了，但它看起来有点乱，因为我必须注入一些依赖项来验证来自 express/passport 的套接字传输。

我的问题是我想访问模块外部的套接字实例，例如`socket.on("newDevice", function (data) {});`

我通过连接事件获得的套接字实例在函数内部，它甚至可能在创建时不存在，因为没有建立连接。这对我来说看起来有点不对劲。我不想仅仅因为我需要它们在函数范围内而注入越来越多的依赖。

我想过做`sio.on('connection', function(socket) {});`模块的外部。也许我可以做两次，首先在模块内部，然后在外部，但我想我会创建两个听众。

有什么好的做法或模式可以正确地做到这一点吗？

```
var io = require('socket.io');

var socket = function (server, sessionStore, cookieParser, authentication)  {

    var sio = io.listen(server);

    // Configure socket.io
    sio.configure(function () {

        // Authorize the socket.io request
        sio.set('authorization', function (data, accept) {
                    // Authorization is done here
        });

    });

    sio.on('connection', function(socket) {

    var lastActionTime = new Date();

    // Get the userId from the session
    var session   = socket.handshake.session;
    var userId    = session.passport.user;
    var sessionID = socket.handshake.sessionID;

    var userdata = null;

    // Deserialize user by the userId
    authentication.deserializeUser(userId, function(err, user) {
              // get the userdata
    });

    socket.on('disconnect', function() {

    });

    socket.on('brightnessChange', function(data) {
        // TODO Do something here device control

        // Broadcast to other devices
        this.broadcast.emit('brightnessChange', data);
    });

}); 

    return sio;
};

module.exports = socket; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T02:40:12.617

我建议，下面的灵活性和可扩展性很好。我已经尝试了两种方式并导致使用多个连接事件。

> 我想过做 sio.on('connection', function(socket) {}); 模块外。也许我可以做两次，首先在模块内部，然后在外部，但我想我会创建两个听众。

# node.js - 将缓冲区限制为 nodejs 子进程的输出

> ID：13454459
> 
> 赞同：0
> 
> 时间：2012-11-19T13:06:43.963
> 
> 标签：node.js, buffer, spawn

我正在尝试使用 spawn 命令从 nodejs 执行命令行命令（此处为：cat）。

```
var spawn = require('child_process').spawn;
var cat = spawn('cat');
result = new Buffer(2048);
cat.stdout.on('data', function (data) 
 {
    data.copy(result);
 });
cat.on('exit', function (code) 
{
    console.log(result.toString());
});
cat.stdin.write(InBUFFER);
cat.stdin.end(); 
```

该命令的输出似乎在 Buffer 中的某个位置，但其余部分也已输出。是否有某种空字符可用于确定输出何时结束？

**更新：**澄清一下：输出中有很多随机字符，它们似乎是缓冲区的一部分。我正在寻找一种将命令行命令的有用输出与缓冲区的其余部分分开的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:44:21.243

这取决于您在 InBUFFER 中拥有的内容，而您没有显示这些内容。

`InBUFFER`例如`"test"`，如果你有一个字符串，`result`将包含`test`很多零，最多 2048（`toString`调用时 0 将转换为空白）。
如果你里面有垃圾`InBUFFER`，你会得到垃圾作为输出。也许您正在读取文件并且没有正确设置字符编码。

# eclipse - Xtext 中的模型是枚举类型吗？

> ID：13454460
> 
> 赞同：1
> 
> 时间：2012-11-19T13:06:48.957
> 
> 标签：eclipse, model, xtext, ecore

我创建了我的生态模型：

![在此处输入图像描述](../Images/90cab5ba346d18ee2fcba6cfc671aa3c.png)

我已经在我的 xtext 文件中指定了它：

```
MinRequirementsType returns MinRequirementsType:
    'MinRequirementsType' 
```

接下来我想实现规则，但是当我尝试

```
enum minrequire: 0|1 ; 
```

我搞错了！

正确的语法如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:39:48.143

您的枚举声明是错误的。尝试以下操作：

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals

generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"

Model: test+=Test*;

enum OneOrZero: one = '1' | zero = '0';

Test returns Test: value = OneOrZero; 
```

问候，

泽维尔

# linux - 按 id 对 unix 文件进行排序

> ID：13454464
> 
> 赞同：2
> 
> 时间：2012-11-19T13:06:56.027
> 
> 标签：linux, unix, sorting

我想按 id 列对 unix 文件进行排序，但是当我使用 sort -k4,4 或 -k4,4n 时，我没有得到预期的结果。

感兴趣的列应该这样排序：

```
id1
id2
id3
id4
etc. 
```

相反，当我对 -k4,4 进行排序时，它是这样排序的

```
id1
id10
id100
id1000
id10000
id10001
etc. 
```

我的 unix 版本使用以下排序功能：

```
sort --help
Usage: sort [OPTION]... [FILE]...
Write sorted concatenation of all FILE(s) to standard output.

Mandatory arguments to long options are mandatory for short options too.
Ordering options:

  -b, --ignore-leading-blanks  ignore leading blanks
  -d, --dictionary-order      consider only blanks and alphanumeric characters
  -f, --ignore-case           fold lower case to upper case characters
  -g, --general-numeric-sort  compare according to general numerical value
  -i, --ignore-nonprinting    consider only printable characters
  -M, --month-sort            compare (unknown) < `JAN' < ... < `DEC'
  -n, --numeric-sort          compare according to string numerical value
  -r, --reverse               reverse the result of comparisons

Other options:

  -c, --check               check whether input is sorted; do not sort
  -k, --key=POS1[,POS2]     start a key at POS1, end it at POS2 (origin 1)
  -m, --merge               merge already sorted files; do not sort
  -o, --output=FILE         write result to FILE instead of standard output
  -s, --stable              stabilize sort by disabling last-resort comparison
  -S, --buffer-size=SIZE    use SIZE for main memory buffer
  -t, --field-separator=SEP  use SEP instead of non-blank to blank transition
  -T, --temporary-directory=DIR  use DIR for temporaries, not $TMPDIR or /tmp;
                              multiple options specify multiple directories
  -u, --unique              with -c, check for strict ordering;
                              without -c, output only the first of an equal run
  -z, --zero-terminated     end lines with 0 byte, not newline
      --help     display this help and exit
      --version  output version information and exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:10:41.287

使用`-V`or`--version-sort`选项进行版本排序

`sort -V -k4,4 file.txt`

**例子：**

```
$ cat file.txt
id5
id3
id100
id1
id10 
```

**输出：**

```
$ sort -V file.txt
id1
id3
id5
id10
id100 
```

**编辑：**

如果您的实现`sort`没有`-V`选项，则使用`sed`to remove的解决方法可以完成`id`数字排序，然后用 替换回来，如下所示：`-n``id``sed`

```
sed -E 's/id([0-9]+)/\1/' file.txt | sort -n -k4,4 | sed -E 's/( *)([0-9]+)( *|$)/\1id\2\3/' 
```

*注意：此解决方案取决于数据，仅当在 ID 列之前没有找到包含纯数字的列时才有效。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:41:15.440

正如[sudo_o 已经提到](https://stackoverflow.com/questions/13454464/sort-unix-file-by-id/13454516#13454516)的那样，最简单的方法是使用`--version-sort`which 对文本中出现的数字进行自然排序。

如果您的版本`sort`没有该选项，则解决此问题的一种方法是在排序之前暂时删除“id”前缀，然后替换它们。这是使用 awk 的一种方法：

```
awk 'sub("^id", "", $4)' file.txt | sort -k4,4n | awk 'sub("^", "id", $4)' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T16:42:14.567

如果您`sort`支持它，您还可以使用语法 FC 来使用字段中的特定字符。

这将对字段 4 进行排序，从字符 3 到 10，数值：

```
sort -bn -k 4.3,4.10 file 
```

这将对字段 4 进行排序，从字符 3 到字段结尾，数值：

```
sort -bn -k 4.3,4 file 
```

# xcode - UIActivityViewController

> ID：13454472
> 
> 赞同：0
> 
> 时间：2012-11-19T13:07:10.140
> 
> 标签：xcode, uiactivityviewcontroller

iPad 上的 UIActivityViewController 有问题

这是我的代码：

```
NSString* someText = @"Hi, I am using the official iEveryThing Tech app #iEveryTech";
        NSString* Website = [NSURL URLWithString:@"https://itunes.apple.com/us/app/ieverytech/id578148847?l=de&ls=1&mt=8"];
        NSArray* dataToShare = @[someText,Website];

        Class activityViewController = NSClassFromString(@"UIActivityViewController");

        if(activityViewController) {
            UIActivityViewController* activityViewController =
        [[UIActivityViewController alloc] initWithActivityItems:dataToShare
                                          applicationActivities:nil];
            [self presentViewController:activityViewController animated:YES completion:nil];}

        } 
```

在 iPhone 上，Mail composer View 将在发送邮件后消失，但 iPad 上的 Composer 不会消失，这是我的 Composer：

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {

    if (error) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"error"

                                                        message:[NSString stringWithFormat:@"error %@", [error description]]

                                                       delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];

        [alert show];

        [self dismissModalViewControllerAnimated:YES];

    }

    else {

        [self dismissModalViewControllerAnimated:YES];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T12:48:33.503

activityViewController 使用本机方法发送邮件不需要使用 mailComposeController，像这样

```
NSMutableArray *items = [NSMutableArray new];
    [items addObject:@"text for share"];
    [items addObject:[UIImage imageWithData:[NSData dataWithContentsOfFile:self.imagePath]]];

NSArray *activityItems = [NSArray arrayWithArray:items];

self.activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:[NSArray arrayWithObjects:whatsapp,instagram, nil]];

self.activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint,UIActivityTypeAirDrop,UIActivityTypeCopyToPasteboard];

[self presentViewController:self.activityVC animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:05:19.523

首先，当使用 activityViewController 时，您的类不是邮件编写器的委托，并且不会调用代码。这一切都在 activityViewController 内部处理。

至于您的视图不会被关闭，请为 activityViewController 实现完整的块调用。在块中一定要关闭视图控制器。

# android - 如何修改 TimePicker 以使用分钟和秒而不是小时和分钟

> ID：13454474
> 
> 赞同：2
> 
> 时间：2012-11-19T13:07:32.140
> 
> 标签：android, timepicker

在我的应用程序中，用户必须通过 TimePicker 选择分钟和秒。

但是这个组件默认配置小时和分钟。我该如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:04:41.997

您将需要实现自己的`MinutesAndSecondsPicker`. `TimePicker`仅与小时和分钟相关联。

# objective-c - CallCenter 使应用程序崩溃

> ID：13454480
> 
> 赞同：2
> 
> 时间：2012-11-19T13:07:54.643
> 
> 标签：objective-c, ios

我对 CTCallCenter 有一个很大的问题，如果你接到电话但从不接听电话，电话就会崩溃。然后音乐应该回来，但是evertyhing就死了。

这是代码的样子：

```
_callCenter = [[CTCallCenter alloc] init];
_callCenter.callEventHandler = ^(CTCall* call){

    if (call.callState == CTCallStateDialing || call.callState==CTCallStateIncoming) { 
        _shouldResumeSongIfConnectionIsAlive=NO;

        if([[TFAudioPlayer sharedAudioPlayer] status]==TFAudioPlayerStatusPlaying){
            [[TFAudioPlayer sharedAudioPlayer] pause];
            isAppWasPlaying=YES;

        }else isAppWasPlaying=NO;

    }else if(call.callState==CTCallStateDisconnected){

        if(isAppWasPlaying){
            [[TFAudioPlayer sharedAudioPlayer] playForcedFromWhereItStopped];
            _shouldResumeSongIfConnectionIsAlive=YES;
        }
    }
}; 
```

我找不到任何方法来处理用户不拿起电话的情况。CTCallCenter 只有我能看到的传入、断开连接、连接和拨号。

有人有线索吗？

编辑：

仅当我在未连接和调试手机上运行该应用程序时才会出现此问题。当对方挂断（未接电话）时，应用程序直接死机。

堆栈跟踪：

```
Date/Time:       2012-11-19 14:20:47.470 +0100
OS Version:      iPhone OS 5.1 (9B179)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xbbadbeef
Crashed Thread:  10

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x356bb004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x356bb1fa mach_msg + 50
2   CoreFoundation                  0x372203ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x3721f0ea __CFRunLoopRun + 818
4   CoreFoundation                  0x371a249e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x371a2366 CFRunLoopRunInMode + 98
6   GraphicsServices                0x320af432 GSEventRunModal + 130
7   UIKit                           0x33926e76 UIApplicationMain + 1074
8   My App                          0x0001e63c 0x1a000 + 17980
9   My App                          0x0001c268 0x1a000 + 8808 
```

还！如果我使用 DEPLOY POSTPROCESSING = YES 运行应用程序，它不会崩溃。我不明白

# sockets - erlang 套接字和 gen_server - 服务器端没有收到数据

> ID：13454481
> 
> 赞同：1
> 
> 时间：2012-11-19T13:07:55.323
> 
> 标签：sockets, erlang, erlang-supervisor, gen-server

**简而言之：** 我正在尝试制作一个客户端连接并发送/接收消息的套接字服务器（基于 Learn you some erlang tutorial [http://learnyousomeerlang.com/buckets-of-sockets](http://learnyousomeerlang.com/buckets-of-sockets)中的 sockserv 代码）服务器端组件: supervisor - 独特的，从一开始就开始，产生具有 gen_server 行为的进程 gen_server 行为进程 - 每个处理一个连接。

客户端：客户端连接到套接字并发送几个字节的数据然后断开连接。

**代码详细信息** 我的代码与本教程中的代码几乎相同。主管是相同的。gen_server 组件被简化，因此它只有一个 handle_info 案例，它应该捕获所有内容并打印它。

**问题** 连接成功，但是当客户端发送数据时，服务器表现得好像没有接收到数据（我希望在发生这种情况时调用handle_info）。

handle_info 确实被调用，但仅在客户端断开连接并且此事件与消息一起报告时。

**我尝试** 过使用 Erlang 或 Java 编写的不同客户端，我尝试过设置套接字的主动/被动状态。教程作者在发送消息后设置{active, once}。在这样创建 AcceptSocket 之后，我最终只是设置了 {active, true} ：（gen_server proc 初始化为包含由主管创建的原始 ListenSocket 的状态）

```
handle_cast(accept, S = #state{socket=ListenSocket}) ->

     {ok, AcceptSocket} = gen_tcp:accept(ListenSocket),
     io:format("accepted connection ~n", []),

      sockserv_sup:start_socket(), % a new acceptor is born, praise the lord
      inet:setopts(AcceptSocket, [{active, true}]),
      send(AcceptSocket, "Yellow", []),
      {noreply, S#state{socket=AcceptSocket, next=name}}.

send(Socket, Str, Args) ->
    ok = gen_tcp:send(Socket, io_lib:format(Str++"~n", Args)),
    ok.

   handle_info(E, S) ->
       io:format("mothereffing unexpected: ~p~n", [E]),
       {noreply, S}. 
```

它绝对没有效果。handle_info 仅在连接丢失时被调用，因为客户端断开连接。每当客户端发送数据时，什么都不会发生。

可能是什么问题呢？我花了很长时间在这上面，我真的不知道。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:24:04.463

您是否尝试过在[http://www.erlang.org/doc/man/inet.html#setopts-2中设置其他选项](http://www.erlang.org/doc/man/inet.html#setopts-2)

inet:setopts(AcceptSocket, [{active, true}])

例如：

{packet, line} 一次读取一行

和

binary 以二进制形式读入数据。

我最近也在根据该教程进行类似的练习，我使用的选项是：

inet:setopts(LSocket, [{active,true}, {packet, line}, 二进制, {reuseaddr, true}]),

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:39:32.247

最后，请注意选项。我确实没有注意这组选项的含义。我尝试了一个更缩小的情况并解决了问题。我的问题是 {packet, line} 选项，这意味着 \n 被视为消息分隔符。

# c# - 为 Lightswitch 创建自定义控件

> ID：13454484
> 
> 赞同：0
> 
> 时间：2012-11-19T13:08:05.190
> 
> 标签：c#, visual-studio-lightswitch

我需要创建一个自定义控件，它基本上是一个带有一些文本框的 WPF StackPanel 来过滤我项目数据源中的表。

此自定义控件将仅由此应用程序使用。

我是否需要创建一个 Lightswitch 扩展项目，或者考虑到自定义控件仅由该项目使用，是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:17:36.583

将自定义控件添加到屏幕

1.  在屏幕内容树中，选择任何组。
2.  在屏幕设计器的顶部，单击添加布局项，然后单击自定义控件。
3.  在“添加自定义控件”对话框中，展开程序集节点，展开命名空间节点，然后选择控件节点。
4.  如果所需的程序集未出现在“添加自定义控件”对话框中，请单击“添加引用”。在“添加引用”对话框中，选择包含要使用的控件的程序集或本地项目，然后单击“确定”。
5.  在“为新的自定义控件指定数据”字段中，键入要绑定到该控件的屏幕数据的名称，然后单击“确定”。例如，如果您希望自定义列表框显示名为 CustomerSet 的集合中的名称，请键入 CustomerSet。如果您希望控件显示当前选定客户的名称，请键入 CustomerSet.SelectedItem.ContactName。

参考：http: [//msdn.microsoft.com/en-us/library/gg406736.aspx](http://msdn.microsoft.com/en-us/library/gg406736.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:31:16.210

不，在这种情况下您不需要创建扩展项目。

查看本教程[在 Lightswitch 应用程序中创建自定义控件](http://geekswithblogs.net/ebartolesi/archive/2011/08/08/create-a-custom-control-in-a-lightswitch-application.aspx)

# epub - 固定布局的 ePub 显示一页，无论是横向模式还是纵向模式

> ID：13454485
> 
> 赞同：1
> 
> 时间：2012-11-19T13:08:05.677
> 
> 标签：epub

你知道是否有可能制作一个固定布局的 ePub，无论是横向模式还是纵向模式，每次在 iBooks 中显示一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:40:28.980

它看起来像一个组合`<meta property="rendition:layout">pre-paginated</meta>`并且`<meta property="rendition:orientation">auto</meta>`应该可以解决问题。

参看。[http://epubsecrets.com/fixed-layout-in-epub-3-0-draft-metadata-property-definitions.php](http://epubsecrets.com/fixed-layout-in-epub-3-0-draft-metadata-property-definitions.php)

# internet-explorer - 有没有办法控制CDHTMLDialog使用的IE版本

> ID：13454488
> 
> 赞同：1
> 
> 时间：2012-11-19T13:08:19.920
> 
> 标签：internet-explorer, visual-studio-2012, version, dhtml

我正在为受控环境构建应用程序。我开始使用 CDHTMLDialog (Visual Studio 2012) 认为它会快速简单，但我很快发现文档很少。我已经能够弄清楚大多数事情，但是由于 OLE 控件使用的 IE 版本，我一直遇到问题。

我在这个运行 Win7 的系统上安装了 IE9（因为它是一个受控应用程序，我可以保证所有安装都如此）。首先，我注意到圆角不起作用，所以我认为它一定是 IE8。然后我注意到border-spacing 不起作用，但cellspacing 起作用，所以它必须使用IE7。有没有办法让这个类使用的任何东西更新到当前的浏览器引擎？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T08:16:04.073

底层控件默认为 IE6 兼容模式。您可以通过添加以下标记在 CDHTMLDialog 和类似中切换浏览器版本：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

这允许您使用 SVG、现代 CSS 功能等。要始终使用可用的 IE 的最大版本，您可以将上面的内容更改为使用`IE=Edge`.

# c++ - Win32 - 设置自定义工具项图标

> ID：13454490
> 
> 赞同：2
> 
> 时间：2012-11-19T13:08:26.077
> 
> 标签：c++, windows, winapi

这是来自 MSDN 的用于创建工具栏的代码。我做了一些修改以使用自定义图标。

```
HWND hToolbar = CreateWindowEx(0, TOOLBARCLASSNAME, 0, 
    TBSTYLE_FLAT | CCS_ADJUSTABLE | CCS_NODIVIDER | WS_CHILD | WS_VISIBLE | TBSTYLE_WRAPABLE,
    0, 0, 0, 0, hwnd, (HMENU)ID_TOOLBAR, g_hInstance, 0);
if ( !hToolbar )
    return FALSE;

SendMessage(hToolbar, TB_BUTTONSTRUCTSIZE, (WPARAM)sizeof(TBBUTTON), 0);

const int numButtons = 12;

HIMAGELIST hImageList = ImageList_Create(16, 16, ILC_COLOR16 | ILC_MASK, numButtons, 0);
SendMessage(hToolbar, TB_SETIMAGELIST, (WPARAM)0, (LPARAM)hImageList);
SendMessage(hToolbar, TB_LOADIMAGES, (WPARAM)IDB_STD_SMALL_COLOR, (LPARAM)HINST_COMMCTRL);

TBBUTTON tbButtons[numButtons] = 
{
             // IDI_ICON1 - the custom icon
    { MAKELONG(0, 0), IDI_ICON1, TBSTATE_ENABLED,
    BTNS_AUTOSIZE, {0}, 0, (INT_PTR)L"Add Download" }
};
SendMessage(hToolbar, TB_ADDBUTTONS, numButtons, (LPARAM)tbButtons);

SendMessage(hToolbar, TB_AUTOSIZE, 0, 0); 
```

但是没有显示自定义图标。它只是空白。如果需要，我会发布屏幕截图。我究竟做错了什么？提前致谢。

# php - $_POST vars 与 MySQL 相结合会导致 MySQL 语法错误 - 在第 1 行接近 '1'

> ID：13454493
> 
> 赞同：-1
> 
> 时间：2012-11-19T13:08:41.400
> 
> 标签：php, mysql

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法**

查询有效，但错误报告“困扰”我 :)

```
//the vars i use
$pos = $_POST['positie'];   //this can be B1 till M100
$kolom = $pos[0];           //get first char of the $pos string 
$rij = substr($pos, 1, 3);  //get the rest of the chars

$sql= mysql_query("UPDATE floorplan SET available='0' WHERE kolom='$kolom' AND rij='$rij'") or die( mysql_error() ); 
```

kolom 是 varchar(4)，rij 是 int(4)，avaiable 是布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:22:14.780

假设 $pos 的值为“B1”。

然后，`substr($pos, 1, 3);`将返回一个越界异常。

尝试`substr($pos, 1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:24:15.497

在 mysql 中，布尔值只是 TINYINT(1) 的同义词。值 0 被认为是 FALSE。所以，改变

```
$rij = substr($pos, 1, 3); 
```

至

```
$rij = intval(substr($pos, 1, 3)); 
```

并查询

```
"UPDATE floorplan SET available=0 WHERE kolom='$kolom' AND rij=$rij" 
```

可以解决您的问题，但就像其他人所说，您应该考虑[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)。

# javascript - JSTree使用json数据在标题后添加图像

> ID：13454495
> 
> 赞同：2
> 
> 时间：2012-11-19T13:08:43.300
> 
> 标签：javascript, jstree

我正在使用 jsTree，我想在使用 json 数据的节点标题之后添加图像这是示例图像。我想在标题报告标题之后添加添加部分和添加元素图像

![在此处输入图像描述](../Images/713e103a7a50224029ffbed8fafa4c21.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:38:53.397

[Radek 在 jstree-grid 页面https://github.com/deitch/jstree-grid/issues/26](https://github.com/deitch/jstree-grid/issues/26)上打开了一个问题

我很难理解的是，它看起来不像你想要一个网格。看起来您希望节点标签本身也有一些 html？还是您*确实*想要 html，但您希望输入是 json 转换为 html 的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T22:21:22.847

对于旧版本`jsTree 1.0-rc3`，我们需要`html_titles : true`将节点标题设置为 html 内容而不是纯文本。

例子：

```
buttons = "<strong><a class='delete' href='javascript:;'>x</a><a class='extend' href='javascript:;'>+</a></strong>"
$("#demo1").jstree({
  "json_data" : {
    "data" : [
    {
      "data" : "A node" + buttons,
      "metadata" : { id : 23 },
      "children" : [ "Child 1", "A Child 2" ]
    }
    ]
  },
  "plugins" : [ "themes", "json_data", "ui"],
  "core": {html_titles : true}
}); 
```

希望它可以帮助`jstree`像我一样在旧版本中受到打击的人。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T18:15:29.503

这是我使用 JSON 数据将图标附加到 JSTREE 节点文本的解决方案。我正在使用 Microsoft 的 fabric.css 作为图标库。（使用 jstree 3.3.1 & Bootstrap 作为边距类）

```
//Create JSON Obj
var obj = {
    id: 1, 
    text: "MY NODE TEXT" + "<i class='ms-Icon ms-Icon--check ml-2'></i>", 
    state: { opened: true },
    li_attr: { "class": "myCustomClass"}
};

// Append to array
var JSONDATA = [];
JSONDATA.push(obj);

//Push to JSTREE
$('#jstree').jstree(true).settings.core.data = JSONDATA; 
```

# css - 气泡总是在页面前面

> ID：13454498
> 
> 赞同：1
> 
> 时间：2012-11-19T13:09:07.150
> 
> 标签：css

我有一个带有气泡窗口的滑块。一旦我滑动滑块，气泡窗口将跟随滑块处理程序的位置。问题是滑块上方有一个用于显示标题的 div。因此，当滑动发生时，气泡窗口与滑块上方的 div 重叠，其中 1/3 部分隐藏在 div 下方。一旦发生滑动，我总是使用`z-index:100`气泡窗口使其位于前面。但是，气泡窗口仍在 div 下方。请参阅图片以获取信息。任何想法？

气泡窗容器

```
.sliderAreaWithUnits { padding-left: 80px !important; padding-right:50px !important; padding-top: 30px !important; padding-bottom: 30px !important; position: relative;top: 0;left: 40;border-radius: 4px;} 
```

气泡窗口 css

```
.bubbleWindow {
    position: absolute;
    top: -20px;
    width: 80px;
    height: 50px; 
    font-size: 10px;
    font-weight: bold;
    text-align: center;
    vertical-align: middle;
    padding-top: 9px;
    background: transparent url('../Images/bubbleWithUnits.png') no-repeat ;
    display: none;
    z-index: 100;
} 
```

标题 css

```
#headerTitle, .headerTitle {
    margin:0;
    color:@primary-text-color;
    padding:3;
    font:bold 16px Arial, Sans-Serif;
    text-decoration:none;
}
.trigger #headerTitle {
    background:url('../../content/images/toggleArrowUp.png') no-repeat right;
    margin:0;
    height: 24px;
    padding:0 0 0 10px;
    font:bold 12px/24px Arial, Sans-Serif;
    color:@primary-text-color;
    text-decoration:none;
} 
```

![在此处输入图像描述](../Images/e92f02fa5761c46b306d5e2e6cd27edc.png)

# c# - Mono For Android，FindViewById A CheckBoxPreference？

> ID：13454500
> 
> 赞同：0
> 
> 时间：2012-11-19T13:09:13.567
> 
> 标签：c#, android, mono, preference

我有一个 PreferenceScreen，用户可以在其中选中/取消选中一个复选框。

要访问我一直使用的 Activity 中的任何控件：

```
var button = FindViewById<Button>(Resource.Id.myButton); 
```

现在好了，我想访问我的`CheckBoxPreference`.. ，但它不工作，我得到这个异常：

*类型“Android.Preferences.CheckBoxPreference”不能用作泛型类型或方法“Android.App.Activity.FindViewById(int)”中的类型参数“T”。没有从“Android.Preferences.CheckBoxPreference”到“Android.Views.View”的隐式引用转换。*

我的 PreferenceScreen.xml 看起来如何：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
  <PreferenceCategory
    android:title="Basic"
    android:id="@+id/preferenceCategory">
    <CheckBoxPreference
      android:id="@+id/preferenceCheckBox"
      android:key="usetestdata"
      android:title="Testdata ON/OFF"
      android:defaultValue="true" />
  </PreferenceCategory>
</PreferenceScreen> 
```

和不工作的代码：

```
var aCheckBox = FindViewById<CheckBoxPreference>(Resource.Id.preferenceCheckBox);
aCheckBox.Enabled = false; 
```

也许有人可以帮助我并告诉我如何从 PreferenceScreen 访问活动中的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:23:58.947

这是使用 PreferenceActivity 的代码

```
public class SettingsActivity extends PreferenceActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //add the prefernces.xml layout
        addPreferencesFromResource(R.xml.preferences);

    final CheckBoxPreference cf = (CheckBoxPreference) findPreference("checkbox"));
    cf.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
        public boolean onPreferenceChange(Preference preference, Object newValue) {
                         // do something here
                         return false;
        }
    });
} 
```

你的preferences.xml在xml文件夹中

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference android:key="checkbox"
        android:title="Title"/>
</PreferenceScreen> 
```

# c# - 从另一个表单获取文本框的值

> ID：13454505
> 
> 赞同：0
> 
> 时间：2012-11-19T13:09:47.290
> 
> 标签：c#, visual-studio-2010

我有一个包含菜单和停靠面板的 ac# windows 应用程序。如果单击菜单上的任何元素，停靠面板上会出现一个表单

有一个包含搜索文本框的书本形式。

在菜单中有一个名称为 (save) 的项目用于保存布局以供其他用途，并且在保存布局后打开的表单仍会在停靠面板中作为选项卡打开

注意：用户可以多次打开同一个表单

* * *

我需要的是，当用户单击保存链接时，我需要从书籍表单中获取搜索文本框的值并将其设置在主表单的变量中。

* * *

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:23:41.670

```
List<String> texts = new List<String>();
foreach(Form form in Application.OpenForms){
    if (form.Name == "bookForm"){
        TextBox textbox= form.Controls[<your textbox namr>] as TextBox;
        texts.Add(textbox);
    }
} 
```

那么你可以尽可能使用这个文本列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:18:12.543

添加一个公共属性，作为搜索文本框`Text`属性的包装器。

```
public string SearchString
{
    get {
        return searchTextbox.Text; // Where the searchTextbox is id of the textbox
    }
} 
```

然后可以在表单的实例上引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:36:16.840

在主窗体上添加一个函数来设置变量的值：

```
private void My_method(string value)
    {        
        your_variable = value;              
    } 
```

现在，在打开 BookForm 时，将主表单作为参数传递给 Book Form 构造函数，如下所示

```
Main_Form _fd;
public BookForm(Main_form fd)
    {
        InitializeComponent();
        _fd = fd;
    } 
```

现在您可以从该表单上的任何位置调用 Mainform 函数，例如：-

```
_fd.My_method(searchtextBox.text); 
```

现在用户不必一次又一次地打开和关闭表单！希望它会帮助你！

# c# - 自定义拆分操作

> ID：13454506
> 
> 赞同：0
> 
> 时间：2012-11-19T13:09:57.450
> 
> 标签：c#, string, text, xpath, split

想想我有几个 XPath 表达式，比如：

```
loan:_applicant/base:_entity/person:_locations/base:SmartRefOfLocationeJDvviUx[base:_entity/contact:_category/base:_underlyingValue='Personal' and base:_entity/contact:_confirmedByResident/common:_isConfirmed/base:_underlyingValue='true' and base:_entity/base:_process/base:_entity/base:_id/base:_underlyingValue = /loan:Application/base:_process/base:_entity/base:_id/base:_underlyingValue]/base:_entity/base:_id/base:_underlyingValue 
```

我尝试使用`/base:_entity`部分作为拆分器来拆分这些表达式，如下所示：

```
string[] stringSeparators = new string[] { "/base:_entity" };
string[] pathTokens = xPath.Split(stringSeparators, StringSplitOptions.None); 
```

但我需要防止在和 字符`/base:_entity`之间分裂。`[``]`

我必须为上面编写的示例表达式生成以下字符串数组作为输出：

```
"loan:_applicant"
"/person:_locations/base:SmartRefOfLocationeJDvviUx
[base:_entity/contact:_category/base:_underlyingValue='Personal' and base:_entity/contact:_confirmedByResident/common:_isConfirmed/base:_underlyingValue='true' and base:_entity/base:_process/base:_entity/base:_id/base:_underlyingValue =  /loan:Application/base:_process/base:_entity/base:_id/base:_underlyingValue]"
"/base:_id/base:_underlyingValue" 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:37:03.870

我会使用一些可爱的正则表达式`(?<=^.*\][^\[]*|^[^\[\]]*)/base:_entity`，然后使用正则表达式的方法拆分。它使用肯定的后视来检查左边的第一个括号是右括号']'还是根本没有括号。

# python - 是否可以在没有循环导入的情况下在模块中导入烧瓶配置值？

> ID：13454507
> 
> 赞同：18
> 
> 时间：2012-11-19T13:09:58.413
> 
> 标签：python, flask, circular-dependency, python-module

我正在使用带有蓝图的 Flask 来为我的网站获取框架，并且在我的应用程序深处使用配置类时遇到问题。

这是一些虚拟代码，解释了我如何设置所有内容：

**网站配置.py**

```
class Config(object):
  pass

class ProductionConfig(Config):
  DEBUG = False

class DevelopmentConfig(Config):
  DEBUG = True 
```

**网站/__ 初始化 __.py**：

```
# Some app code and config loading
app = Flask('website')
app.config.from_object('websiteconfig.DevelopmentConfig')

# Import some random blueprint
from website import users
app.register_blueprint(users.api)

# This works:
# print app.config['DEBUG'] 
```

**网站/用户/__ 初始化 __.py**：

```
from flask import Blueprint
from website.users.models import test
api = Blueprint('users', __name__, url_prefix='/users')

# This works:
# print api.config['DEBUG']

# From models
print test() 
```

**网站/用户/models.py**：

```
# How can I reach the config variables here?
def test():
    # I want config['DEBUG'] here 
```

如何访问存储在包`app.py`深处加载的类中的配置变量`users`？

像`from website import app`（在models.py中）这样的循环导入是可接受的解决方案吗？

如果没有，是否有一些我错过的简单解决方案？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-19T21:14:14.777

我相信你可以使用烧瓶的 current_app 成语。

[http://flask.pocoo.org/docs/api/#flask.current_app](http://flask.pocoo.org/docs/api/#flask.current_app)

```
from flask import current_app

def test():
  return current_app.config.get('some_config_value') 
```

# vb.net - 如何在没有 API 的情况下找到 OneDrive (SkyDrive) 和 GoogleDrive 文件夹？

> ID：13454508
> 
> 赞同：3
> 
> 时间：2012-11-19T13:10:01.773
> 
> 标签：vb.net, google-drive-api, onedrive

感谢这篇文章，

[如何使用 C# 以编程方式定位我的 Dropbox 文件夹？](https://stackoverflow.com/questions/9660280/how-do-i-programmatically-locate-my-dropbox-folder-using-c)

我可以通过编程方式找到 Dropbox 文件夹。现在，如果不安装和使用各种 API，我该如何为 GoogleDrive 和 MS SkyDrive 做同样的事情？

Vb.Net 或 C# 解决方案都可以...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-10T13:03:37.110

### OneDrive / SkyDrive

[Chiwda](https://stackoverflow.com/a/13703215/107625)的解决方案使我朝着正确的方向前进，但没有直接在我的机器上运行（Windows 8.1 German），因为注册表项不存在。

相反，这有效：

```
private static string getOneDriveFolderPath()
{
    var value1 = Registry.GetValue(
        @"HKEY_CURRENT_USER\Software\Microsoft\SkyDrive", 
        @"UserFolder", null);

    var path1 = value1 as string;
    if (path1 != null && Directory.Exist(path1)) return path1;

    var value2 = Registry.GetValue(
        @"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\SkyDrive",
        @"UserFolder", null);

    var path2 = value2 as string;
    if (path2 != null && Directory.Exists(path2)) return path2;

    var value3 = Registry.GetValue(
        @"HKEY_CURRENT_USER\Software\Microsoft\OneDrive",
        @"UserFolder", null);

    var path3 = value3 as string;
    if (path3 != null && Directory.Exists(path3)) return path3;

    return null;
} 
```

代码首先尝试 Chiwda 答案中的路径，而不是尝试我机器上存在的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:44:26.863

我在这里找到了部分答案...

[如何使用 C# 以编程方式定位我的 Google Drive 文件夹？](https://stackoverflow.com/questions/12173077/how-do-i-programmatically-locate-my-google-drive-folder-using-c)

这是我的三个主要 Webfolder 服务的代码

```
Dim StoreFolder As String = ""
' Dropbox
Dim dbPath As String = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Dropbox\\host.db")
Dim lines() As String = System.IO.File.ReadAllLines(dbPath)
Dim dbBase64Text As Byte() = Convert.FromBase64String(lines(1))
StoreFolder = System.Text.ASCIIEncoding.ASCII.GetString(dbBase64Text)

' SkyDrive
StoreFolder = My.Computer.Registry.GetValue("HKEY_CURRENT_USER\Software\Microsoft\SkyDrive", "UserFolder", Nothing)

' Google Drive
Dim dbPath As String = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData), "Google\\Drive\\sync_config.db")
File.Copy(dbPath, "temp.db", True)
StoreFolder = File.ReadAllText("temp.db", System.Text.Encoding.ASCII)
StoreFolder = StoreFolder.Substring(StoreFolder.IndexOf("local_sync_root_pathvalue") + 29)
StoreFolder = StoreFolder.Substring(0, StoreFolder.IndexOf(Char.ConvertFromUtf32(24))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T13:34:35.317

### 谷歌云端硬盘

再一次，[Chiwda 的解决方案](https://stackoverflow.com/a/13703215/107625)向我展示了正确的方法。Google Drive 需要有一个可用的 SQLite 库才能读取本地文件夹的路径。

我的代码：

```
private static string checkGetGoogleDriveLocation()
{
    var appDataPath = Environment.GetFolderPath(
                          Environment.SpecialFolder.LocalApplicationData);
    var dbPath = Path.Combine(appDataPath, 
                     @"Google\Drive\user_default\sync_config.db");

    if (!File.Exists(dbPath)) return null;

    var tmp = dbPath + Guid.NewGuid();
    File.CopyFile(dbPath, tmp);

    var folderPath = tryGetFolderFromGoogleDriveDB(tmp);
    if (string.IsNullOrEmpty(folderPath) || !Directory.Exists(folderPath)) return null;

    File.Delete(folderPath);

    return folderPath;
} 
```

我已经在[“sqlite-net”NuGet 包](https://www.nuget.org/packages/sqlite-net/)`tryGetFolderFromGoogleDriveDB`的帮助下实现了这个功能，该包也可以[在 GitHub 上找到](https://github.com/praeclarum/sqlite-net)：

```
private static string tryGetFolderFromGoogleDriveDB(string dbFilePath)
{
    using (var conn = new SQLiteConnection(dbFilePath, SQLiteOpenFlags.ReadOnly))
    {
        var cmd = conn.CreateCommand(
            @"select data_value from data where entry_key='local_sync_root_path'");
        return cmd.ExecuteScalar<string>();
    }
} 
```

请注意，sqlite-net 包执行 P/Invoke 本机[**sqlite3.dll**文件](http://www.sqlite.org/download.html)，因此您必须确保它存储在与您正在使用此代码的可执行文件相同的文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T12:00:11.920

不完全是您将能够使用的，但您可以为 VB.net 对其进行逆向工程。我使用 VBA 将一些文档保存到用户 Dropbox 文件夹的解决方案。它会在默认安装位置查找它，如果找不到，则会提示输入文件夹。无论如何，大多数人都会离开默认位置 IMO，因此很少会错过它。从记忆中，SkyDrive 和 Google Drive 也遵循相同的默认位置模式，所以稍微调整一下应该能够找到所有这些模式。

```
Sub finddropbox()
Dim strOS, localdrive, dropboxfolder As String
Dim folderSelect As FileDialog
Dim objWMIService, colOperatingSystems, objOperatingSystem

strComputer = "."    
Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colOperatingSystems = objWMIService.ExecQuery("Select * from Win32_OperatingSystem")

For Each objOperatingSystem In colOperatingSystems
    strOS = objOperatingSystem.Caption
Next

If InStr(strOS, "XP") Then
    localdrive = Environ("USERPROFILE") & "\My Documents\"
Else
    localdrive = Environ("USERPROFILE")
End If

dropboxfolder = localdrive & "Dropbox\"
If Dir(dropboxfolder, vbDirectory) = vbNullString Then
    Set folderSelect = Application.FileDialog(msoFileDialogFolderPicker)
        With folderSelect
            .Title = "Select Dropbox Folder"
            .AllowMultiSelect = False
            .InitialFileName = Environ("SYSTEMDRIVE")
            If .Show = -1 Then
                dropboxfolder = .SelectedItems(1)
            End If
       End With
End If

Debug.Print dropboxfolder

End Sub 
```

# c# - httppost 后关闭模态窗口

> ID：13454514
> 
> 赞同：2
> 
> 时间：2012-11-19T13:10:37.663
> 
> 标签：c#, javascript, asp.net-mvc, modal-dialog

我有一个显示用户角色列表（例如，管理员、操作员等）的视图和一个弹出模式窗口的“添加”按钮，允许用户添加新角色。

在我的控制器中，我将此作为我的 HttpPost 方法

```
 [HttpPost]
    public ActionResult Create(RoleModel model)
    {

        if (ModelState.IsValid)
        {
            var role = new RoleDto
                {
                    Name = model.Name,
                    Description = model.Description
                };

            var roleAdded = _rolePermissionsRepository.AddRole(role);
            if (roleAdded != null)
            {
                //CLOSE WINDOW
            }
            else
            {
                //PRINT ERROR MSG TO WINDOW
            }
        }
        return View();
    } 
```

如果添加到数据库成功，我想关闭模式窗口，然后刷新我的主索引页面上的列表。

如果在持久化到数据库时出现一些错误，模式窗口应该保持打开状态，并显示一些错误。

我该如何做到这一点？

这就是我在索引页面上用来弹出窗口的内容

```
 $("#open").click(function (e) {
        wnd.center();
        wnd.open();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:16:02.457

您应该返回一个 JsonResult 来告诉浏览器发生了什么。

```
[HttpPost]
public ActionResult Create(RoleModel model)
{

    if (ModelState.IsValid)
    {
        var role = new RoleDto
            {
                Name = model.Name,
                Description = model.Description
            };

        var roleAdded = _rolePermissionsRepository.AddRole(role);
        if (roleAdded != null)
        {
            //CLOSE WINDOW
            return Json(new { success = true });
        }
        else
        {
            return Json(new { error = "Error! Can't Save Data!" });
        }
    }

    return Json(new { error = "Generic Error Message!" });
} 
```

这是应该在您的 wnd 页面中运行的 javascript，如果有错误消息，则显示错误消息，否则关闭窗口。

```
$('form').submit(function(e) {
    e.preventDefault();
    $.post(this.action, $(this).serialize(), function(response) {
        if(response.error) {
            alert(response.error);
        }
        else {
            wnd.close();
        }
    }, 'json');
}); 
```

# jquery - 从表中选择特定数据 (td)

> ID：13454517
> 
> 赞同：0
> 
> 时间：2012-11-19T13:10:41.657
> 
> 标签：jquery

我需要从下表中选择所有语言。输出应该是 Java、Ruby、Smalltalk、C++。我应该使用什么 jQuery 语句？谢谢

```
<table id="languages" border="0" cellspacing="1">

<thead>
    <tr>
      <th>Language</th>
      <th>Type</th>
      <th>Invented</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java</td>
      <td>Static</td>
      <td>1995</td>
    </tr>
    <tr>
      <td>Ruby</td>
      <td>Dynamic</td>
      <td>1993</td>
    </tr>
    <tr>
      <td>Smalltalk</td>
      <td>Dynamic</td>
      <td>1972</td>
    </tr>
    <tr>
      <td>C++</td>
      <td>Static</td>
      <td>1983</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:15:14.127

您可以使用`map`方法：

```
var lang = $('#languages td:first-child').map(function(){
       return this.innerHTML
}).get() 
```

`lang`是一个值数组（*语言*），如果您想将值存储为字符串，您可以使用`join`以下方法：

```
lang = lang.join(', '); 
```

[http://jsfiddle.net/hZqHc/](http://jsfiddle.net/hZqHc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:16:40.500

```
var langs = '';    
$.each($('#languages tbody tr'), function(){
       langs += $(this).find('td:eq(0)').html() + ', ';
    });
langs = langs.substring(0, langs.length - 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:18:09.210

这会将每个值添加到数组中：

```
​var langs = [];
$('#languages tbody tr').each(function(){
    langs.push($(this).find('td:first').text()); 
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
console.log(langs); 
```

您可以轻松地将它们附加到字符串中。​请参阅[http://jsfiddle.net/fXdkg/](http://jsfiddle.net/fXdkg/)以获取工作片段。

# html - GET 和 POST 方法

> ID：13454520
> 
> 赞同：0
> 
> 时间：2012-11-19T13:11:02.437
> 
> 标签：html, post, methods, get

我有一个应用程序（检查点防火墙）

使用 GET 方法从变量发送格式化 URL 以形成请求

```
https://api.example.com/http/sendmsg?api_id=$APIID&user=
$USERNAME&password=$PASSWORD&to=$PHONE&text=$MESSAGE 
```

我想使用的网站是如何使用具有以下来源的 POST 方法的基本形式。

```
<html>
    <form method="post">
        Number:<input type="text" name="number"/><br/>
        Message:<textarea cols="40" rows="4" name="message"></textarea><br/>
        <input type="submit" value="send"/>
    </form>
</html> 
```

我可以随意更改 URL 的格式，因为您可能猜到这是发送 SMS 文本消息。

有没有办法用 POST 方法格式化 URL，或者创建一个可以翻译请求的中间网页？

谢谢你

编辑

所以这就是我的想法

```
$number = ($_GET["number"]);
$message = ($_GET["message"]);

//for testing the get method echo variables on screen
echo("Number: " . $number . "<br />");
echo("Message: " . $message . "<br />");

//use curl to post variables to second website
$vars = "number-" . $number . "&message=2 . message;
$ch = curl_init( '10.43.23.53' );
curl_setopt( $ch, CURLOPT_POST, 1);
curl_setopt( $ch, CURLOPT_POSTFIELDS, $vars);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec( $ch );

print_r(curl_getinfo($ch)); 
```

此脚本由网站托管，因此应用程序 A 可以使用其 GET 方法来提供变量，并且脚本将通过 post 将它们重新发布到应用程序 B。但是它不起作用，我没有从响应中得到任何结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:22:50.697

```
$apiKey = 'your-api-key-here';
$user = 'your-username-here';
$password = 'your-password-here';
$number = isset($_POST['number']) ? $_POST['number'] : null;
$message = isset($_GPOST['message']) ? $_POST['message'] : null;

$url = sprintf('https://api.example.com/http/sendmsg?api_id=%s&user= %s&password=%s&to=%s&text=%s',
    $apiKey, $user, $password, urlencodee($message)
);

// validating message etc. left to OP

$response = file_get_contents($url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:12:39.237

您将无法将 POST 作为 GET 发送，它们是不同的方法，并且 POST 需要随请求一起发送的变量在 GET 请求中不可用。

理论上，您可以创建一个中介，它接受初始 GET 请求并形成合适的 POST 请求并将其发送到目标服务器。这个的实际实现超出了这个问题的范围。

# sql - SQL-将所有数据收集到一个变量中

> ID：13454525
> 
> 赞同：1
> 
> 时间：2012-11-19T13:11:15.310
> 
> 标签：sql, sql-server

我需要将所有返回数据收集到使用逗号分隔的变量中。

假设我有一个选择命令，例如：`select * from #temptable`。它的回报：

```
Field1|Field2
-------------
Value1|Value2 
```

> 预期结果：@testvariable 保存值：'Value1','Value2'

在这张表上，它们可能有 2 列，我需要将所有返回结果存储到一个变量中。我们可以很容易地收集一个值，例如：`select @var=column1 from #temptable.`但我需要存储所有。这里的问题是，列的数量可以变化。意思是，列数和列名是从另一个查询生成的。所以，我不能提及字段名称。我需要一种动态的方式来做到这一点。在这张桌子上只有一行会被返回。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:35:46.510

您可以在没有动态 SQL 的情况下使用`XML`

```
DECLARE @xml XML = (SELECT * FROM #temptable FOR XML PATH(''))

SELECT stuff((SELECT ',' + node.value('.', 'varchar(100)')
              FROM   @xml.nodes('/*') AS T(node)
              FOR XML PATH(''), type).value('.','varchar(max)')
              , 1, 1, ''); 
```

这可能由比我更擅长 XML 查询的人来简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:32:42.513

由于您的列名是动态的，所以首先您必须将列名作为逗号分隔在变量中，然后可以使用`EXEC(`)

例如 ：-

```
 //making comma seperated column names from table B
     DECLARE @var varchar(1000)=SELECT SUBSTRING(
        (SELECT ',' + Colnames 
        FROM TABLEB
        ORDER BY Colnames 
        FOR XML PATH('')),2,200000)
  //Execute the sql statement   
        EXEC('select '+@var+' from tableA') 
```

如果要获取执行 sql 语句后返回的值，则可以使用 [sp_executesql (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

# android - 隐藏果冻豆片中的系统栏（有根）

> ID：13454528
> 
> 赞同：7
> 
> 时间：2012-11-19T13:11:48.283
> 
> 标签：android, root

我有一个 Android Jelly Bean 平板电脑，它已经植根并试图运行一个应用程序，该应用程序具有隐藏系统栏的代码，但它没有被隐藏，任何人都可以帮助我解决这个问题。

在终端中获取输出： `Result Parcel(00000000 '....')`

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button hide=(Button)findViewById(R.id.button1);
        Button show=(Button)findViewById(R.id.button2);
        hide.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 Log.v("ds", "hideSystembar");
                    try {
                        Process proc = Runtime.getRuntime().exec(new String[]{
                                "su","-c","service call activity 79 s16 com.android.systemui"});
                        proc.waitFor();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
            }
        });
        show.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                  Log.v("f", "showSystembar");
                    try {
                        Process proc = Runtime.getRuntime().exec(new String[]{
                                "am","startservice","-n","com.android.systemui/.SystemUIService"});
                        proc.waitFor();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
            }
        });
    }
} 
```

虽然我得到了许可：![在此处输入图像描述](../Images/2b64f7e00b171a015fee3511c82f69be.png)

超级用户日志截图： ![在此处输入图像描述](../Images/cd5b89431b993f4ae647387c5ba81ce9.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T22:55:27.510

引入 ICS 时，该类的进程 ID`SystemUI`从 79 更改为 42。
下面的代码适用于您的应用程序可能运行的任何 Android 版本。

```
//HIDE TOOLBAR
try{
    //REQUIRES ROOT
    Build.VERSION_CODES vc = new Build.VERSION_CODES();
    Build.VERSION vr = new Build.VERSION();
    String ProcID = "79"; //HONEYCOMB AND OLDER

    //v.RELEASE  //4.0.3
    if(vr.SDK_INT >= vc.ICE_CREAM_SANDWICH){
        ProcID = "42"; //ICS AND NEWER
    }

    //REQUIRES ROOT
    Process proc = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity "+ ProcID +" s16 com.android.systemui"}); //WAS 79
    proc.waitFor();

}catch(Exception ex){
    Toast.makeText(getApplicationContext(), ex.getMessage(), Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T23:52:30.097

我写了一篇文章，解释了如何获得root权限，即使在Android 4.2上也能隐藏/显示系统栏

[http://masashi-k.blogspot.com/2013/09/hide-show-system-bar-of-android.html](http://masashi-k.blogspot.com/2013/09/hide-show-system-bar-of-android.html)

使用 RootTools 库获取 root 权限。 ![在此处输入图像描述](../Images/156de1da164e9421e942558131f97083.png)

隐藏系统栏 ![在此处输入图像描述](../Images/eb10e48438c0e5368f77784346c8afb2.png)

# joomla - 仅对 joomla 中的访客用户可见的菜单

> ID：13454529
> 
> 赞同：0
> 
> 时间：2012-11-19T13:11:54.560
> 
> 标签：joomla, menu

我正在尝试在 joomla 1.5 中实现一个菜单，该菜单应该只对访客用户可见，而不是注册用户。为此，我在两个文件中进行了更改，它们是`administrator/components/com_menus/models/metadata/component.xml` 和

```
modules/mod_mainmenu/helper.php 
```

对于第一个文件，我在第 20 行添加了以下代码：

```
<param name="show_to_guest_only" type="radio" default="0" label="Show to Guest only" description="Show menu to guest user only.">
<option value="0">No</option>
<option value="1">Yes</option>
</param> 
```

对于第二个文件，我在第 50 行之前添加了以下代码：

```
$row_params = new JParameter($row->params);
if ($row_params->get('show_to_guest_only') == 1 && $user->id ){
continue;
} 
```

但是在这样做之后，我也没有得到预期的结果。你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:32:45.657

你不应该破解核心文件。如果没有别的，请将 mod_mainmenu 复制到另一个名称，例如 mod_guestmenu，然后在那里进行更改并安装。

您可能希望使用 extensions.joomla.org 上提供的高级模块管理扩展[之一](http://extensions.joomla.org)

MetaMod 是一个浮现在脑海中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:26:04.477

尝试使用这个。它检测用户是否是客人，并获取特定菜单类型的项目。

```
$user =& JFactory::getApplication();
$app =& JFactory::getApplication();
$menu = $app->getMenu();
$menu_items = $menu->getItems('menutype', 'mainmenu');

if ($user->guest) {
    //your code goes in here
} 
```

希望这可以帮助。

# android - onConfigurationChanged(Configuration newConfig) 没有调用

> ID：13454530
> 
> 赞同：0
> 
> 时间：2012-11-19T13:11:59.407
> 
> 标签：android, android-imageview

我正在使用这个[库](https://github.com/sephiroth74/ImageViewZoom)进行缩放缩放。但是当我旋转图像时图像旋转不起作用。它将转到第一个图像。我看到了日志文件。这里的活动在轮换时间重新开始。

我试过这段代码： -

```
<activity android:name="imageTouchs" android:configChanges="orientation|screenSize|keyboardHidden" /> 
```

并且

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.imagetouchs);
 System.out.println("configu call " +newConfig);
} 
```

但是这里 my`onConfigurationChanged(Configuration newConfig)`没有被调用。

有人可以指出可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:17:58.157

替换 xml 中的 configChanges 属性值

从

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

至

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:21:33.407

看看[`exported`属性](http://developer.android.com/guide/topics/manifest/activity-element.html#exported)

# c# - Outlook 更改 MessageClass 数字签名邮件

> ID：13454536
> 
> 赞同：1
> 
> 时间：2012-11-19T13:12:19.807
> 
> 标签：c#, outlook, ms-office, vsto

我正在开发一个项目，该项目在 Outlook 2010 中为特殊消息显示自定义图标和信息区域。为了实现这一点，我更改了消息的 MessageClass。这很好用，只要消息没有数字签名。
这是更改 MessageClass 的代码：

```
 public static void SetMessageClass(ref Outlook.MailItem mi) {
        try {
            if (mi.MessageClass.ToLower() == "ipm.note" || mi.MessageClass.ToLower() == "ipm.note.smime" || mi.MessageClass.ToLower() == "ipm.note.myclass") {
                Logger.Log("Setze Message-Class auf " + MESSAGE_CLASS);
                mi.MessageClass = MESSAGE_CLASS;
                mi.Save();
            }
        } catch (System.Exception ex) {
            Logger.Log("Fehler beim setzen der Message-Class:\r\n" + ex.Message);
        }
    } 
```

我需要更改 MessageClass，因为我想显示一个图标和一个信息区域。

如果邮件有数字签名，则会出现以下窗口： [http ://social.msdn.microsoft.com/Forums/getfile/186575](http://social.msdn.microsoft.com/Forums/getfile/186575)

我点击哪个按钮都没有关系，图标不会改变。

谁能帮我？

问候克纳德

PS：这是德语问题：[http ://social.msdn.microsoft.com/Forums/de-DE/vstode/thread/e51b221e-89f6-419f-90e6-e17c74662a9f](http://social.msdn.microsoft.com/Forums/de-DE/vstode/thread/e51b221e-89f6-419f-90e6-e17c74662a9f)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T16:43:43.997

Outlook 竭尽全力将签名/加密的消息表示为常规 IPM。注意 MailItem 对象（它们不是）。

我知道的唯一解决方法是使用扩展 MAPI（C++ 或 Delphi）或[Redemption](http://www.dimastr.com/redemption/)（任何语言）绕过 OOM 层 - 在 Redemption 中使用 RDOSession.GetItemFromID。然后，您可以阅读 MessageClass/PR_MESSAGE_CLASS 属性并绕过签名/加密消息。

# android - 我可以告诉哪个线程调用了我的服务方法吗？

> ID：13454537
> 
> 赞同：1
> 
> 时间：2012-11-19T13:12:21.527
> 
> 标签：android, multithreading

假设我有一个产生 2 个线程的服务。这 2 个线程可以访问任何服务的方法。有什么方法可以告诉（在方法中）哪个线程调用了它？

我知道 Android 中的进程存在这样的机制：例如，我可以使用 getCallingUid，但是线程也有类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:15:14.033

您可以使用`currentThread`方法来获取线程并使用`getName`来获取它的名称：

```
String name = Thread.currentThread().getName();
Log.d("Service", "Called from " + name + " thread"); 
```

当您创建创建线程时，您可以在构造函数中指定它的名称。见[线程](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:15:44.513

Thread.currentThread() 将始终传递当前线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:16:32.170

如果你传入[Thread.getId](http://developer.android.com/reference/java/lang/Thread.html#getId%28%29)怎么办？

# asp.net - 在 ASP.NET 中将正文标记从母版页公开到内容页

> ID：13454543
> 
> 赞同：0
> 
> 时间：2012-11-19T13:12:56.300
> 
> 标签：asp.net, master-pages, document-body, content-pages

我想将`<body>`my暴露`Master Page`给我的`Content Pages`. 因此我这样做：

**大师.aspx**

```
<body id="MasterPageBodyTag" runat="server"> 
```

**大师.aspx.vb**

```
 Public Property Messaging() As Messaging
        Get
            Return mMessaging
        End Get
        Set(ByVal value As Messaging)
            mMessaging = value
        End Set
  End Property

  Public Property BodyTag() As HtmlGenericControl
        Get
            Return MasterPageBodyTag
        End Get
        Set(ByVal value As HtmlGenericControl)
            MasterPageBodyTag = value
        End Set
End Property 
```

**内容页面.aspx**

```
<%@ MasterType VirtualPath="~/my.master" %> 
```

**内容页面.aspx.vb**

```
Master.BodyTag.Attributes.Add("onload", "MyScript()") 
```

但是，我不仅没有`BodyTag`在我的内容页面中获得 ，而且我还收到一个错误，我无法访问该`Messaging`属性（*错误：不是 Master 的成员*），该属性之前工作正常。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:26:54.740

我不是VB专家。但似乎您首先需要将 me.Master 引用到您的自定义母版页的 Class 类型，然后再尝试访问特定于您的自定义母版页的属性和方法。我想在这种情况下无法完成自动定制。因此，您可以尝试执行以下操作：

```
Dim myCustomMaster As Site = CType(me.Master, Site) 
```

其中站点类型是自定义主类类型。

# sharepoint - 将文档从 VSS 导入 Sharepoint

> ID：13454544
> 
> 赞同：0
> 
> 时间：2012-11-19T13:12:58.880
> 
> 标签：sharepoint, visual-sourcesafe

我希望在 VSS2005 中导出一个包含 word 文档的文件夹。是否可以通过使用工具将其导出到共享点文档库？

如果可能的话，我想保留版本历史。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:24:10.697

如果您不需要保留历史记录和用户身份，您可以使用库功能区中的按钮在 Windows 资源管理器中打开 SharePoint 库。然后只需复制所有文件。

# php - 谷歌地理编码器限制

> ID：13454546
> 
> 赞同：0
> 
> 时间：2012-11-19T13:13:02.827
> 
> 标签：php, javascript, google-maps, limit

有没有办法通过一个地理编码请求发送多个地址：

```
geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        addMarker(results[0].geometry.location); 
        var the_string = generate_string(elements, a, address);

        infowindow[a] = new google.maps.InfoWindow({
            content: the_string
        });     

        google.maps.event.addListener(markersArray[a], "click", function() {
            infowindow[a].open(map, markersArray[a]);
        });
    } else {
        alert("Geocode was not successful for the following reason: " + status);
    }
}); 
```

其中地址包含地址数组。原因是我[在使用 google maps](https://stackoverflow.com/questions/3529746/over-query-limit-while-using-google-maps)和 here [Google Map Javascript API v3 - OVER_QUERY_LIMIT时遇到了“OVER_QUERY_LIMIT”](https://stackoverflow.com/questions/9764757/google-map-javascript-api-v3-over-query-limit-error)

我想知道我是否应该开始使用客户端的服务器端版本或继续使用 javascript api 并获得通过地理编码器调用发送地址数组的帮助？

根据您的意见或经验，如果我有一个应用程序，您可以在字段中输入无数地址，然后按“绘图到地图”按钮，您将如何在 api 调用、地理编码等方面执行此操作？

**编辑：////////////////////////**

我现在正在使用这段代码：

```
class geocoder{
    static private $url = "http://maps.google.com/maps/api/geocode/json?sensor=false&address=";

    static public function getLocation($address){
        $url = self::$url.urlencode($address);

        $resp_json = self::curl_file_get_contents($url);
        $resp = json_decode($resp_json, true);

        if($resp['status']='OK'){
            return $resp['results'][0]['geometry']['location'];
        }else{
            return false;
        }
    }

    static private function curl_file_get_contents($URL){
        $c = curl_init();
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($c, CURLOPT_URL, $URL);
        $contents = curl_exec($c);
        curl_close($c);

        if ($contents) return $contents;
            else return FALSE;
    }
} 
```

并这样称呼它：

```
$address = urlencode($field_set["value"]);
$loc = geocoder::getLocation($address); 
```

在每个地址的循环中（在这种情况下为 20 次）。

它只在地图上放置 10 个标记，无论循环是否正确具有 2 个不同的 lngs 和 lats。

它为最后 10 个 lat lngs 返回 null ：s

**编辑：///////////////////////////**

我在调用这个的循环中放置了一个睡眠：

```
$loc = geocoder::getLocation($address); 
```

每进行第 8 次地理编码，它会暂停一秒钟然后继续。这似乎允许正确呈现所有地理编码器位置......但这似乎是一个绒毛。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:25:44.747

使用地理编码的最佳方法是将经度和纬度值存储在您的服务器上，这样您就不必在每次脚本运行时发送一堆地理编码请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:28:06.067

不，地址必须是[文档](https://developers.google.com/maps/documentation/geocoding/)中指定的地址。

地理编码器将返回一个结果数组，但是您不能将地址数组输入到地理编码/反向地理编码，无论如何都不太合乎逻辑，人们会使用它来利用限制。

你不应该对 query_limit 太担心，因为只要它是 javascript api 并且没有后端，它就按 IP/天计算。因此，如果您有多个用户使用此功能，则会为他们单独设置限制，并且不会累加。

如果你因为有本地环境而超出了很多限制，那么我认为你可能需要为每天有多达 10 万个请求的商业服务租用谷歌地图。

# wordpress - WooCommerce 中的自定义运输模块字段

> ID：13454550
> 
> 赞同：0
> 
> 时间：2012-11-19T13:13:12.477
> 
> 标签：wordpress, woocommerce, shipping

我正在为 WooCommerce 开发一个运输模块，并在某个条件下添加自定义字段时遇到问题。

我的情况如下。

我有 2 种运输方式

1.  标准统一费率
2.  选择后需要额外选择的

我需要的是在 2\. 选择运输模块后添加一个选择框，如果没有则隐藏它。

这样做的正确方法是什么？

# javascript - 动态插入新的html元素

> ID：13454555
> 
> 赞同：0
> 
> 时间：2012-11-19T13:13:34.863
> 
> 标签：javascript, jquery, html

我有以下运行`etape.html`启动页面的代码，它允许将 html 元素插入到带有`n`迭代的 html 块中。

对于第一次迭代，一切都很好并且出现了，但在第二次迭代中，div 块中没有出现任何内容。

次要考虑在按下“ *Suivant* ”按钮时执行，允许重新加载页面`etape.html`

有人有什么想法吗？

```
index=0;    
$("#etape").live('pageshow', function() {

    if(index>5)
    {
    //Go to other Page
    }

    switch(id_type_champ)
    {
        case 1:
            $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+'  >  ').trigger("create");
            alert("case 1");
            break;
        case 2:
            $('#header-right-container').append(''+nom_champ+'<input type="text" id='+Id+' > ').trigger("create");
            alert("case 2");
            break;
        case 3:
            $('#header-right-container').append(''+nom_champ+'<input type="date" id='+Id+' OnClick="aff_date(\'' + Id + '\')">').trigger("create");
            alert("case 3");
            break;
        case 4:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+'    ><option value=0></option></select>').trigger("create");
            alert("case 4");
            break;
        case 5:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 5");
            break;
        case 6:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 6");
            break;
        case 7:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 7");
            break;
        case 8:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 8");
            break;
        case 9:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 1");
            break;
        default:
            $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create");
            alert("case 1");
            break;
    }

    $('#header-left-container').append('<a href="etape.html" data-role="button"  OnClick="DoAction()" data-icon="arrow-r"    data-iconpos="right"  data-theme="a" id="suivant">Suivant</a> ').trigger("create");
}

function DoAction()
{
    //$('#'+id+'').val() ;        //GET text
    //$('#'+id+'').val('AAAAAA'); //SET
    index++;
    alert('Button has been clicked avec un index =  a '+ index);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:25:17.977

我看不到代码，但我会检查您是否添加了多个具有相同 ID 的 HTML 元素。ID 必须是唯一的。

`<select id='+Id+' >`

Id aa 是在第二次迭代中重置的计数器吗？在第二次迭代运行之前，第一次迭代是否存储在某个地方，而不是被删除？使用萤火虫之类的检查。

# blackberry - 我们如何在具有 OS 6 及更高版本的黑莓中扫描二维码

> ID：13454557
> 
> 赞同：0
> 
> 时间：2012-11-19T13:13:45.197
> 
> 标签：blackberry, qr-code, blackberry-os6

我需要知道是否有 api 或代码可用于扫描具有 OS6.0 及更高版本的黑莓中的 QR 码。我是 QR 编码部分的新手，所以请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:47:44.943

从 BlackBerry OS 6 开始，API 中包含 xzing 条码扫描库。[RIM在此处](http://docs.blackberry.com/de-de/developers/deliverables/29251/Barcode_1583481_11.jsp)提供了开发人员指南。我建议你从那里开始，然后继续阅读其他内容。Zxing 是一个提供大量在线文档的 Google 库。

# xcode - 如何验证死代码已从二进制文件中删除？

> ID：13454559
> 
> 赞同：4
> 
> 时间：2012-11-19T13:13:46.097
> 
> 标签：xcode, linux, macos, unix

我的 c/obj-c 代码（一个用 clang 构建的 iOS 应用程序）有一些被`#ifdefs`. 我想确保从这些函数调用而不是从其他函数调用的代码（死代码）在链接时被剥离（消除）。我试过：

1.  在应该消除的函数中添加本地文字 char[]；`strings`在可执行文件上运行时，该字符串仍然可见。
2.  添加一个应该被淘汰的功能；运行字符串时，函数名称仍然可见。

在你问之前，我正在为发布而构建，并且所有剥离设置（显然包括死代码剥离）都已启用。

这个问题并不是真正的 xcode/apple/iOS 特定的；我认为答案在任何 POSIX 开发平台上都应该几乎相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:16:51.113

**（编辑）**

在 binutils 中，`ld`可以`--gc-sections`选择在对象级别执行您想要的部分。你有几个选择：

*   使用`gcc`'s flags`-ffunction-sections`并将`-fdata-sections`每个符号隔离到自己的部分，然后使用`--gc-sections`;

*   将**所有**要删除的候选者放入一个单独的文件中，链接器将能够剥离整个部分；

*   反汇编生成的二进制文件，删除死代码，再次汇编；

*   使用`strip`适当`-N`的选项从符号表中丢弃有问题的符号 - 这会将代码和数据保留在那里，但不会显示在符号表中。

# c# - 如何配置 tfs 构建代理来构建发布配置文件？

> ID：13454562
> 
> 赞同：8
> 
> 时间：2012-11-19T13:14:04.797
> 
> 标签：c#, asp.net, asp.net-mvc, tfs, visual-studio-2012

我有一个带有 vs2010 的 TFS 构建服务器。

我正在使用这个构建模板

[http://ge.tt/3KQnZuR/v/0?c](http://ge.tt/3KQnZuR/v/0?c)

在我自己的机器上，我在 vs2012 中创建了一个新的解决方案。

我创建了一个`publishing profile`

如何将它附加`pubxml`到 tfs-builder 代理而不是旧的`web deployment project`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T20:37:28.490

您需要通过传递适当的 MSBuild 参数来告诉 TFS 执行此操作。

*   编辑构建配置
*   转到进程选项卡
*   在该`MSBuild Arguments`部分中输入以下内容：

`/p:DeployOnBuild=true;PublishProfile=<NameOfPublishProfile>`

这应该指示 TFS 在部署您的应用程序时使用您的发布配置文件。

# android - 为什么我的项目无法解析？

> ID：13454564
> 
> 赞同：1
> 
> 时间：2012-11-19T13:14:19.560
> 
> 标签：android

```
11-19 15:13:55.955: W/PackageManager(2096): verifying app can be installed or not
11-19 15:13:56.020: W/PackageParser(2096): /data/app/vmdl2068695449.tmp
11-19 15:13:56.020: W/PackageParser(2096): java.lang.UnsupportedOperationException: Can't convert to integer: type=0x3
11-19 15:13:56.020: W/PackageParser(2096):  at android.content.res.TypedArray.getInteger(TypedArray.java:367)
11-19 15:13:56.020: W/PackageParser(2096):  at android.content.pm.PackageParser.parsePackage(PackageParser.java:856)
11-19 15:13:56.020: W/PackageParser(2096):  at android.content.pm.PackageParser.parsePackage(PackageParser.java:444)
11-19 15:13:56.020: W/PackageParser(2096):  at com.android.server.pm.PackageManagerService.installPackageLI(PackageManagerService.java:7689)
11-19 15:13:56.020: W/PackageParser(2096):  at com.android.server.pm.PackageManagerService.access$1500(PackageManagerService.java:174)
11-19 15:13:56.020: W/PackageParser(2096):  at com.android.server.pm.PackageManagerService$6.run(PackageManagerService.java:6222)
11-19 15:13:56.020: W/PackageParser(2096):  at android.os.Handler.handleCallback(Handler.java:605)
11-19 15:13:56.020: W/PackageParser(2096):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-19 15:13:56.020: W/PackageParser(2096):  at android.os.Looper.loop(Looper.java:137)
11-19 15:13:56.020: W/PackageParser(2096):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

安装错误：INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:31:53.353

已解决的问题 - 问题是我在 menisfest 文件中的版本代码中输入了一个非整数值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T13:18:45.157

我想这是问题所在：

```
 java.lang.UnsupportedOperationException: Can't convert to integer: type=0x3 
```

它发生在这里：

```
TypedArray.java (line 367) 
```

# c# - Directshow.net 未检测到 Windows 7 中的所有麦克风

> ID：13454565
> 
> 赞同：1
> 
> 时间：2012-11-19T13:14:25.330
> 
> 标签：c#, windows, audio, directshow, directshow.net

我遇到了 Directshow.net 库和 Windows 7 的问题。

在某些 PC 中（仅当在设备管理器 > 控制器声音、视频中列出：“高清晰度音频设备”时）仅在 Skype、MSN 和录音设备列出至少两个时检测到 1 个麦克风；执行此代码时：

```
Filter audioDevice = null;
if (capture != null)
audioDevice = capture.AudioDevice; 
```

“audioDevice”只有第一个麦克风（内置麦克风或后置麦克风），不检索第二个麦克风（前置麦克风-jack-），反之亦然。

有人已经解决或知道另一个库来从 C# 捕获视频和音频？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:20:33.820

这里没有什么要解决的。DirectShow.NET 使用 DirectShow，后者又使用[Audio Capture Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317587%28v=vs.85%29.aspx)，后者使用旧版音频 API 来捕获音频。Skype 改为使用[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx)，这是 Windows Vista+ 中最新最好的音频捕获 API（回退到 Windows XP- 中的旧 API）。

只有一种解决方法可用：编写由 WASAPI 支持的专有音频捕获过滤器。

# javascript - 下面的代码在做什么？

> ID：13454567
> 
> 赞同：0
> 
> 时间：2012-11-19T13:14:42.573
> 
> 标签：javascript, google-maps-api-3

我已经下载了一些 Google maps API 3 的示例，我可以看到如下代码：

```
(function (i, marker) {
    google.maps.event.addListener(marker, 'click', function () {
        if (!infowindow) {
            infowindow = new google.maps.InfoWindow();
        }
        infowindow.setContent("Message" + i);
        infowindow.open(map, marker);
    });
})(i, marker); 
```

有人可以解释一下这是什么意思吗？或者我们可以用不同的方式重写上面的代码吗？我对 JavaScript 有点陌生，不知道上面的代码到底是做什么的？

这是完整的脚本

功能标记（）{

```
 InitializeMap();

    var ltlng = [];

    ltlng.push(new google.maps.LatLng(17.22, 78.28));
    ltlng.push(new google.maps.LatLng(13.5, 79.2));
    ltlng.push(new google.maps.LatLng(15.24, 77.16));

    map.setCenter(ltlng[0]);

    for (var i = 0; i <= ltlng.length; i++) {
        marker = new google.maps.Marker({
            map: map,
            position: ltlng[i]
        });

        (function (i, marker) {

            google.maps.event.addListener(marker, 'click', function () {

                if (!infowindow) {
                    infowindow = new google.maps.InfoWindow();
                }

                infowindow.setContent("Message" + i);

                infowindow.open(map, marker);

            });

        })(i, marker);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:19:19.337

```
(function (i, marker) {
    google.maps.event.addListener(marker, 'click', function () {
        if (!infowindow) {
            infowindow = new google.maps.InfoWindow();
        }
        infowindow.setContent("Message" + i);
        infowindow.open(map, marker);
    });
})(i, marker); 
```

编码：

*   立即执行定义的函数，传递给它`i`，并且`marker`
*   然后它将处理程序添加到`click`事件的标记
*   单击标记时，如果不存在`infowindow`，则会创建一个
    *   然后添加内容并`infowindow`在地图上的标记上打开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:32:42.643

您的代码片段等效于下面的代码，只是它避免声明变量`myFunc`：

```
var myFunc = function(i, marker) {
    google.maps.event.addListener(marker, 'click', function () {
        if (!infowindow) {
            infowindow = new google.maps.InfoWindow();
        }
        infowindow.setContent("Message" + i);
        infowindow.open(map, marker);
    });
};
myFunc(i, marker); 
```

这是一种常见的*javascript*模式来捕获可变变量的值（`i`或者`marker`如果我们在*for 循环*中可以更改；没有它，它将是最后一个值，`i`并且`marker`将在点击处理程序中使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:19:27.453

此代码在给定标记上分配单击事件处理程序，以便在单击时弹出新的信息窗口，其中包含文本“消息”，后跟看起来是标记索引的内容。

这段代码很可能是所有标记循环的一部分。

如果我正确理解您的目标，请将此类功能添加到您的代码中：

```
function AssignMarkerClick(marker, index) {
    google.maps.event.addListener(marker, 'click', function () {
        if (!infowindow) {
            infowindow = new google.maps.InfoWindow();
        }

        infowindow.setContent("Message" + index);
        infowindow.open(map, marker);
    });
} 
```

然后将循环更改为：

```
for (var i = 0; i <= ltlng.length; i++) {
    marker = new google.maps.Marker({
        map: map,
        position: ltlng[i]
    });
    AssignMarkerClick(marker, i);
} 
```

# java - VMware vCenter 性能

> ID：13454568
> 
> 赞同：0
> 
> 时间：2012-11-19T13:14:45.797
> 
> 标签：java, memory, vmware

我试图弄清楚为什么我们的 VMware VCenter 服务器会消耗如此多的 CPU 和内存。我注意到服务器上正在运行几个 Java 进程，它们正在消耗大量 RAM 内存。

vCenter 服务器是虚拟的，运行 Windows Server 2008 和 8GB RAM。

有谁知道这些java进程属于什么？

![Java 进程](../Images/e856105d2680ba3571d2641e4ea765cb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T00:43:47.037

vCenter 的许多核心服务都使用 java，因此几乎可以肯定它与 vCenter 的服务有关。

确定每个流程的用途的最佳选择是使用更好的工具，例如[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)。它将向您显示进程树，指示生成它的父进程，并且还将通过将鼠标悬停在进程名称上明确列出与该进程关联的服务。

但是，如果你想直接从命令行检查，你可以使用这样的东西：

```
TASKLIST /SVC /FI "IMAGENAME EQ JAVA.EXE" 
```

*   该`/SVC`标志告诉系统列出正在运行的服务。
*   该`/FI`标志表明您希望使用指定的条件过滤结果
*   `"IMAGENAME EQ JAVA.EXE"`是仅列出图像名称为“JAVA.EXE”的进程的过滤器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-28T12:51:28.080

任务列表 /SVC /FI "IMAGENAME EQ JAVA.EXE"

这不会让您在 Java 中运行进程。Process Explorer 也不会。Java是一个虚拟机环境。它是一个容器。它实际上不运行任何进程。它执行 IL。中级语言。它是Java（和.NET）被编译成的。它相当于 .NET 中的 CLR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T14:29:52.507

在任务管理器中选择视图，然后是列和“命令行” 它应该提供有关 Java 正在运行的更多信息。

# symfony - 如何捕获没有用户名的用户？

> ID：13454576
> 
> 赞同：1
> 
> 时间：2012-11-19T13:15:10.620
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我正在将相当大的社区迁移到 symfony2。当前用户表包含许多用户名中包含非字母数字字符的用户。在新版本中，我只允许 [a-zA-Z0-9-] 为每个用户提供语义 URL 等好处。

是否可以捕获使用电子邮件/密码登录且未设置用户名的用户？我希望他们重定向到可以重新选择用户名的页面。棘手的部分：除非他们拥有正确的用户名，否则他们不应该能够触摸网站上的任何内容。

我从 fosuserbundle 中考虑了一个事件，但找不到合适的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:24:45.980

你可以使用事件。在此处查看示例：http: [//symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html](http://symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html)

当然，更改用户名的操作应该被事件监听器忽略。就像登录和其他匿名操作一样。

您可以通过对事件设置响应来返回任何响应，包括重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:52:53.667

只是一个想法。AOP 范式（JMSAopBundle）怎么样？为您的控制器定义一个切入点（登录控制器除外）：

```
class PrivateEntityInformationPointcut implements PointcutInterface
{

    public function matchesClass(\ReflectionClass $class)
    {
        return $class->isSubclassOf('Your\Controller\Superclass')
            && $class->name !== 'Your\Controller\Access';
    }

    public function matchesMethod(\ReflectionMethod $method)
    {
        return true; // Any method
    }

} 
```

然后拦截器应该重定向到设置用户名的页面：

```
class DenyEntityAccessInterceptor implements MethodInterceptorInterface
{

    private $securityContext;

    private $logger;

    /**
     * @DI\InjectParams({
     *     "securityContext" = @DI\Inject("security.context"),
     *     "logger"          = @DI\Inject("logger"),
     * })
     */
    public function __construct(SecurityContext $securityContext,
        Logger $logger)
    {
        $this->securityContext = $securityContext;
        $this->logger          = $logger;
    }

    public function intercept(MethodInvocation $invocation)
    {
        // Check username, redirect using the router, log what's happening

        // It's OK
        return $invocation->proceed();
    }

} 
```

# objective-c - 如何使用 NSTimer 在 Objective-C 中每 x 秒调用一次方法？

> ID：13454583
> 
> 赞同：23
> 
> 时间：2012-11-19T13:15:36.220
> 
> 标签：objective-c, cocoa-touch, nstimer

我正在使用 Objective-C、Xcode 4.5.1 并为 iPhone 开发一个应用程序。

我有一个方法 A，我想在其中调用另一个方法 B 以每 x 秒进行一系列计算。在方法 AI 开始播放音频文件。方法 B 将在音频文件的持续时间内每 x 秒监视一次音频。

我找到`NSTimer`了一个潜在的解决方案，但很难让它工作/理解它。

我只是想每隔 x 秒调用一次方法 B 并运行它的计算，但`NSTimer`需要我提供一些我不确定我应该告诉它的东西。

```
[NSTimer scheduledTimerWithTimeInterval:(NSTimeInterval) 
target:(id) select:(SEL) userInfo:(id) repeats:(BOOL)]; 
```

我的理解是，我提供了我想要操作`NSTimeInterval`的时间间隔。`NSTimer`但是，我如何告诉它运行方法 B？

我查看了示例代码，目前的印象是我在“ `select:`”处提供了该方法。但是，我在 ' `target:`' 处写什么？为什么我需要一个目标？我尝试输入' `self`'，但 Xcode 告诉我：

> 使用未声明的标识符“self”

```
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self 
select:@selector(targetMethod:myVolumeMonitor()) userInfo:nil repeats:YES]; 
```

所以，我认为 ' `self`' 应该是一个指向对象的指针，但我想指向哪里呢？

下面是我的代码的简化：

```
MethodA()
{
//Start playing an audio file.

//NSTimer calling Method B, as long the audio file is playing, every x seconds.
}

MethodB()
{
//Do calculations.
} 
```

如果有人能为我提供一些答案/为我指明正确的方向，我将不胜感激！（：

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-19T13:33:13.737

Target 是 select 中指定的消息的接收者。在 Objective-C 中不调用函数。有相当多的消息发送到对象。Object 在内部引用它的符号表并确定它的哪个方法被调用。那是一个选择器。您的选择器是`@selector(MethodB)`. （顺便说一句：您应该以小写开头的方法名称。“methodB”在这里更合适。）这导致了一个问题：如何确定消息发送到的对象？那就是目标。在你的情况下，它只是`self`.

顺便说一句：在这种情况下，选择器应该返回 void 并接受一个 id，它是 NSTimer 对象本身的 id。如果您希望计时器根据您的程序逻辑根据某些条件停止触发，这将派上用场。最重要的是：您的选择器 then`methodB:`而不是`methodB`.

```
- (void) methodA
{
//Start playing an audio file.

//NSTimer calling Method B, as long the audio file is playing, every 5 seconds.
[NSTimer scheduledTimerWithTimeInterval:5.0f 
target:self selector:@selector(methodB:) userInfo:nil repeats:YES];
}

- (void) methodB:(NSTimer *)timer
{
//Do calculations.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T13:27:29.150

尝试这个

```
 NSTimer *aTimer = [NSTimer timerWithTimeInterval:(x) target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];

    NSRunLoop *runner = [NSRunLoop currentRunLoop];
    [runner addTimer:aTimer forMode: NSDefaultRunLoopMode];  
    [popUpImageView release];

- (void)timerFired:(NSTimer*)theTimer 
{
if(condition)
{
  [theTimer isValid]; //recall the NSTimer
   //implement your methods
}
else
{
  [theTimer invalidate]; //stop the NSTimer

}

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T13:22:21.963

好吧，您正在尝试调用普通的 C 方法，[`NSTimer`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)但不能这样做。

目标是调用[选择器](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/doc/uid/20000319-CHDDAEIA)的类的实例，这个选择器和不选择。此处的选择器是`SEL`您可以使用该 `@selector(METHOD_NAME)`函数创建的类型。

例如，这将调用`handleTimer :`0.1 秒：（对于此示例，使用 AppDelegate）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    //SNIP, some code to setup the windos.   

    [NSTimer scheduledTimerWithTimeInterval:0.1f target:self selector:@selector(handleTimer:) userInfo:nil repeats:YES];
    return YES;
}

- (void) handleTimer:(NSTimer *)timer {
    // Hanlde the timed event.
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-19T13:23:03.617

如果您查看您的代码并与下面的代码进行比较

```
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self
select:@selector(targetMethod:myVolumeMonitor()) userInfo:nil repeats:YES]; 
```

self 表示您正在调用类的同一实例中的方法，在您的示例中，该方法是 myVolumeMonitor

```
[NSTimer scheduledTimerWithTimeInterval:0.1 target:self
selector:@selector(MethodB) userInfo:nil repeats:YES]; 
```

不过你很高兴

方法应该是这样的

```
- (void)MethodB:(NSTimer*)timer { 
// do something
} 
```

# windows-runtime - 将较短的流写入 StorageFile

> ID：13454584
> 
> 赞同：1
> 
> 时间：2012-11-19T13:15:38.217
> 
> 标签：windows-runtime, xml-serialization, storagefile

我有一个包含 XML 的 StorageFile。我从 StorageFile 读取 XML，然后对其进行编辑，然后使用以下代码将其再次保存到 StorageFile：

```
using (var writeStream = await storageFile.OpenStreamForWriteAsync())
{
    xDocument.Save(writeStream, SaveOptions.None);
} 
```

但是，当我使内容更短时，例如从

```
<Node>
    <Child>This is a verrrrrryyy long text</Child>
<Node> 
```

至

```
<Node>
    <Child>This is short</Child>
<Node> 
```

磁盘上的结果如下：

```
<Node>
    <Child>This is short</Child>
<Node>rrryyy long text</Child>
<Node> 
```

显然，Stream 只在文件中写入新字节，而旧字节完好无损，从而导致下次我尝试打开它时 XML 无效，所以这可能不是正确的保存方式......

我应该如何保存它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-27T20:54:41.643

解决方案是截断流：

```
using (var writeStream = await f.OpenStreamForWriteAsync()) 
{ 
   if (writeStream.CanSeek && writeStream.Length > 0) 
      writeStream.SetLength(0); 
   _xml.Save(writeStream, SaveOptions.None); 
} 
```

# pandas - 在 matplotlib 中为烛台图添加标签

> ID：13454588
> 
> 赞同：0
> 
> 时间：2012-11-19T13:15:45.590
> 
> 标签：pandas, label, candlestick-chart

我正在尝试将一个系列（由 [1,2,0,....] 列表组成）添加到我使用 matplotlib 制作的烛台图表中，但无法弄清楚如何为每个特定蜡烛包含这些标签图表。基本上我想制作一张这样的图表：

[![指标](../Images/3cbd93ea6dfa649fb156d3f4cc98e23e.png)](https://i.stack.imgur.com/bkLVX.png)
[（来源：[linnsoft.com](http://www.linnsoft.com/charts/images/TD_Sequential.png)）]

在每根蜡烛上方或下方带有带有数字（我的信号系列）的标签。有什么办法可以达到吗？

不知道它是否有帮助，但我的系列是熊猫 DataFrame 类型的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:24:43.303

这是一个源自 - [http://matplotlib.org/examples/pylab_examples/finance_demo.html的示例](http://matplotlib.org/examples/pylab_examples/finance_demo.html)

请特别注意`ax.annotate`下面代码中的方法调用。

```
from pylab import *
from matplotlib.dates import  DateFormatter, WeekdayLocator, HourLocator, \
     DayLocator, MONDAY
from matplotlib.finance import quotes_historical_yahoo, candlestick,\
     plot_day_summary, candlestick2

# (Year, month, day) tuples suffice as args for quotes_historical_yahoo
date1 = ( 2004, 2, 1)
date2 = ( 2004, 4, 12 )

mondays = WeekdayLocator(MONDAY)        # major ticks on the mondays
alldays    = DayLocator()              # minor ticks on the days
weekFormatter = DateFormatter('%b %d')  # Eg, Jan 12
dayFormatter = DateFormatter('%d')      # Eg, 12

quotes = quotes_historical_yahoo('INTC', date1, date2)
if len(quotes) == 0:
    raise SystemExit

fig = figure()
fig.subplots_adjust(bottom=0.2)
ax = fig.add_subplot(111)
ax.xaxis.set_major_locator(mondays)
ax.xaxis.set_minor_locator(alldays)
ax.xaxis.set_major_formatter(weekFormatter)
#ax.xaxis.set_minor_formatter(dayFormatter)

#plot_day_summary(ax, quotes, ticksize=3)
candlestick(ax, quotes, width=0.6)

ax.xaxis_date()
ax.autoscale_view()
setp( gca().get_xticklabels(), rotation=45, horizontalalignment='right')

import datetime
dt = datetime.datetime(2004, 3, 8)

# Annotating a specific candle
ax.annotate('This is my special candle', xy=(dt, 24), xytext=(dt, 25),
            arrowprops=dict(facecolor='black', shrink=0.05),
           )

show() 
```

如果您运行此文件，结果图应显示：-

![在此处输入图像描述](../Images/712671fb80c5b349a8aca94247db34a9.png)

# java - 如何通过将 BoxLayout 更改为不同的 LayoutManager 来改进 GUI？

> ID：13454589
> 
> 赞同：0
> 
> 时间：2012-11-19T13:15:47.803
> 
> 标签：java, swing, awt, layout-manager, boxlayout

我对 Java 中的 Swing 有一个大问题，我为此使用了 BoxLayout，但它看起来仍然很糟糕。关于我使用布局的任何建议，或者如何将其更改为假设中的样子？（[这里是假设](http://imgur.com/a/NKA48#0)）

```
Container main = new Container();
    Container left = new Container();// here goin buttons
    Container right = new Container(); // here goin tabs +  more buttons, textfields and other stuff

    BoxLayout lewyL = new BoxLayout(left, BoxLayout.Y_AXIS);
    left.setLayout(lewyL);
    left.add(rastrowa); //radiobutton
    left.add(wektorowa);//radiobutton
    left.add(apDwuliniowa);//checkbox
    left.add(wczytaj);//button
    left.add(zapisz);//obutton
    left.add(wyczysc);//button
    BoxLayout prawyL = new BoxLayout(right, BoxLayout.Y_AXIS);
    right.setLayout(prawyL);
    right.add(zakladki);// tabs (mostly i use BoxLayout but for last one i need something more "complicated") 
```

编辑：我几乎解决了这个问题，我需要将所有元素向左移动（[它看起来如何](http://i.imgur.com/9kdZs.png)）但我不知道如何；/这是这个类的构造函数。

```
 JLabel label = new JLabel("O wektor");
    JLabel labelA = new JLabel("a:");
    JLabel labelB = new JLabel("b:");
    JButton wykonaj = new JButton("Wykonaj");
    JTextField a = new JTextField(5);
    JTextField b = new JTextField(5);
    add(label);
    add(labelA);
    add(a);
    add(labelB);
    add(b);
    add(wykonaj); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:25:08.073

它的外观没有问题（在我看来），但如果你想让它看起来更好一点，为什么不将左侧面板（即 6x1）转换为 3x2 面板，并打开复选框/单选按钮左边，右边的按钮？听起来像是一份工作`GridLayout`——我最喜欢的课程之一……

```
JPanel leftPanel = new JPanel(new GridLayout(3,2));
leftPanel.add(rastrowa);     //radiobutton
leftPanel.add(wczytaj);      //button
leftPanel.add(wektorowa);    //radiobutton
leftPanel.add(zapisz);       //obutton
leftPanel.add(apDwuliniowa); //checkbox
leftPanel.add(wyczysc);      //button 
```

请注意，`3,2`定义了行数、列数。添加面板时，它们从左到右和从上到下添加到网格中。`GridLayout`还会自动调整组件的大小，因此所有按钮等都将具有相同的宽度和高度，使其看起来更加一致。

[GridLayout 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridLayout.html)可能很有用，而布局管理器的可视化[指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)是查看其他布局管理器的好地方，这些布局管理器可能更适合您的不同情况。我个人认为`BorderLayout`它`GridLayout`是最有用的，并且涵盖了我的 GUI 所需的大约 95% 的情况。

# c# - 保存不同项目的应用价值

> ID：13454590
> 
> 赞同：0
> 
> 时间：2012-11-19T13:15:50.627
> 
> 标签：c#

我创建了一个计算各种海军材料的程序。现在是保存用户输入、计算和结果的时候了。问题是，我的同事需要为不同的客户进行计算，为他们创建不同的项目编号。所以我想为这些不同的项目保存我的程序的所有值。我会将项目显示为开始屏幕，在`DataGridView`. 根据所选项目，程序必须加载这些值。

我已经查看了其他人以前的解决方案，为此使用了数据库，但我的问题是：是否有这样做，而不使用数据库。因为我是数据库新手，在 C# 方面也没有那么丰富。因此，如果有人有提示、参考或小例子，我将不胜感激。

关于应用程序的一些信息：

该应用程序具有不同的标签页。在每个选项卡页面中，用户必须提供一些输入，例如宽度、高度、深度等。在一个选项卡中，风力作用于其他选项卡上的输入。在另一个选项卡中，线的力应用于不同选项卡上的多个输入，等等。

这些值需要针对不同的客户进行计算，因此需要针对不同的项目进行计算。需要保存这些项目，以便对其进行审查、编辑等。因此，一个人打开程序并看到一个带有 DataGridView 的窗口，其中包含不同的项目（项目编号、客户端名称等）。他单击一个项目进行编辑，因此他应该看到属于该程序的值。如果他关闭此项目，则应保存值，并且用户应该可以在 DataGridView 中选择其他项目并加载其他项目的值。

我的问题是：我如何用它们的值保存这些“不同的项目”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:35:34.443

OP 要求一个“保存”功能，这不仅仅是在程序执行期间保留数据（您必须这样做才能使应用程序有价值。）

我建议将数据保存在 sdcard 上的文件中，这样您不仅可以稍后调用它，还可以让用户将设备作为外部驱动器安装在自己的计算机上并获取数据以在其他地方使用。

所以你真的需要一个多点系统：

1) 实现 onSaveInstanceState()。在这个方法中，你被传递了一个Bundle，它基本上就像一个哈希对象。在捆绑包中存储尽可能多的信息，以便在应用程序停止的位置重新启动应用程序。在您的 onCreate() 方法中，检查传入的包是否为非空，如果是，则从包中恢复状态。

2) 实现 onPause()。在此方法中，创建一个 SharedPreferences 编辑器并使用它来保存您下次启动应用程序所需的任何状态。这主要包括用户的偏好（因此得名），但与应用程序的启动状态相关的任何其他内容也应该放在此处。我不会*在*这里存储分数，只是你需要重新启动应用程序的东西。然后，在 onCreate() 中，只要没有捆绑对象，就使用 SharedPreferences 接口来调用这些设置。

3a) 至于分数之类的东西，你可以按照上面 Mathias 的建议，将分数存储在 getFilesDir() 中返回的目录中，使用 openFileOutput() 等。我认为这个目录是应用程序私有的，并且存在于主存储中，这意味着其他应用程序和用户将无法访问数据。如果你没问题，那么这可能是要走的路。

3b）如果您确实希望其他应用程序或用户可以直接访问数据，或者如果数据将非常大，那么 sdcard 就是要走的路。选择一个目录名称，如 com/user1446371/basketballapp/ 以避免与其他应用程序冲突（除非您确定您的应用程序名称是合理唯一的）并在 sdcard 上创建该目录。正如 Mathias 所指出的，您应该首先确认 sdcard 已安装。

```
File sdcard = Environment.getExternalStorageDirectory();
if( sdcard == null || !sdcard.isDirectory()) {
    fail("sdcard not available");
}
File datadir = new File(sdcard, "com/user1446371/basketballapp/");
if( !datadir.exists() && !datadir.mkdirs() ) {
    fail("unable to create data directory");
}
if( !datadir.isDirectory() ) {
    fail("exists, but is not a directory");
}
// Now use regular java I/O to read and write files to data directory 
```

我建议为您的数据使用简单的 CSV 文件，以便其他应用程序可以轻松读取它们。

显然，您必须编写允许“保存”和“打开”对话框的活动。我通常只是调用 openintents 文件管理器并让它完成工作。但是，这需要您的用户安装 openintents 文件管理器才能使用这些功能。

# c# - C# 结构上的 new 总是在堆栈上分配吗？

> ID：13454597
> 
> 赞同：1
> 
> 时间：2012-11-19T13:16:06.917
> 
> 标签：c#, garbage-collection

只是想知道如果我用 new 分配结构，我是否不必关心垃圾收集。

如果它们后来被投射到一个物体上怎么办？

```
public object Func()
{
  SMyStruct bla = new SMyStruct();

  return bla;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:18:03.030

它将被“装箱”并在堆上分配。

通过 C# 实现的 Richter CLR：

可以使用称为装箱的机制将值类型转换为引用类型。在内部，当 valuetype 的实例被装箱时，会发生以下情况：

1.  内存是从托管堆中分配的。分配的内存量是值类型字段所需的大小加上托管堆上所有对象所需的两个额外开销成员（类型对象指针和同步块索引）。

2.  值类型的字段被复制到新分配的堆内存中。

3.  返回对象的地址。这个地址现在是一个对象的引用；值类型现在是引用类型。

# silverlight-4.0 - 在 itemsource 更改上执行 DataGrid Selected Item 属性

> ID：13454601
> 
> 赞同：1
> 
> 时间：2012-11-19T13:16:31.807
> 
> 标签：silverlight-4.0, mvvm-light

我有一个 Silverlight 项目，我正在使用 MVVM 模式。

我有一个 GridView 控件，我从 ViewModel 分配它的 ItemSource。它的 SelectedItem 绑定到 ViewModel 属性。

单击按钮时，我正在更新网格的 ItemSource。但是我现在的问题是，当我更新 ItemSource 时，SelectedItem 绑定属性也会被执行。

有没有办法可以阻止 SelectedItem 属性在更新 ItemSource 时执行？

这是我的数据网格

```
 <sdk:DataGrid x:Name="DataGrid" Width="400"
                                               Height="511" Visibility="Visible"
                                                SelectionMode="Single"
ItemsSource="{Binding DetailInfo, Mode=TwoWay}"
    SelectedItem = {Binding SelectedAgent}                                           ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Auto" AutoGenerateColumns="False"
                                               CanUserReorderColumns="False" CanUserResizeColumns="True" IsReadOnly="True"
                                               CanUserSortColumns="True">
                            <sdk:DataGrid.Columns>
                                <sdk:DataGridTextColumn x:Name="detailRank" Binding="{Binding Rank}" Header="#" Width="40"/>
                                <sdk:DataGridTextColumn x:Name="detailName" Binding="{Binding Name}" Header="Reps" Width="160"/>
                                <sdk:DataGridTextColumn x:Name="detailRevenue" Binding="{Binding Revenue, StringFormat=\{0:C0\}}" Header="Revenue" Width="70"/>
                                <sdk:DataGridTextColumn x:Name="detailProfit" Binding="{Binding Profit, StringFormat=\{0:C0\}}" Header="Profit" Width="58"/>
                                <sdk:DataGridTextColumn x:Name="detailMargin" Binding="{Binding Margin, StringFormat=\{0:P0\}}" Header="Margin" Width="55"/>
                            </sdk:DataGrid.Columns>
                        </sdk:DataGrid> 
```

在我的视图模型中，我有一个属性绑定到 Grid 中的 SelectedItem

```
private Agent _selectedAgent;

public Agent SelectedAgent
{
get{ return this._selectedAgent; }

set
{
this._selectedAgent = value;
RaisepropertyChanged("SelectedAgent");
}
} 
```

现在，当 ItemSource 更新时， SelectedAgent 属性将再次执行。

# java - Java 类加载器和 XML 文件

> ID：13454605
> 
> 赞同：3
> 
> 时间：2012-11-19T13:16:42.193
> 
> 标签：java, xml, classloader

我想在 EAR 中访问 JAR 中的 xml 文件，但它失败了。

我的 EAR 结构是这样的：

```
ear-0.0.1-SNAPSHOT.ear
|_META-INF
|_lib
   |_log4j-1.2.17.jar
   |_ejb-client-0.0.1-SNAPSHOT.jar
   |_dtos-0.0.1-SNAPSHOT.jar
   |_configuration-0.0.1-SNAPSHOT.jar
      |_xml
         |_universes
            |_universes.xml
      |_META-INF
      |_log4j.xml
|_ejb-impl-0.0.1-SNAPSHOT.jar
|_web-0.0.1-SNAPSHOT.war 
```

所以我想访问存储在其中的单例 EJB 中的 Universes.xml `ejb-impl-0.0.1-SNAPSHOT.jar`。

我测试过：

```
InputStream ip = getClass().getClassLoader().getResourceAsStream("/xml/universes/universes.xml"); 
```

或者 ：

```
InputStream ip = ClassLoader.class.getResourceAsStream("/xml/universes/universes.xml"); 
```

和一些不同的包装符号没有成功。

我的 EAR 部署在 Glassfish V3 中。

谢谢你的帮助

# c# - ToolStripProgressBar 不可访问

> ID：13454609
> 
> 赞同：1
> 
> 时间：2012-11-19T13:17:00.320
> 
> 标签：c#, winforms

我在表单中添加`StatusStrip`了 2 个项目，然后在此条中添加了 2 个项目：`ToolStripStatusLabel`和`ToolStripProgressBar`.

VS (2010) 在设计器文件中创建了以下代码：

```
this.statusLabel = new System.Windows.Forms.ToolStripStatusLabel();
...
System.Windows.Forms.ToolStripProgressBar progressBar; 
```

所以，它适用`StatusLabel`于cs文件

```
this.statusLabel.Text = "Hello world"; 
```

但`progressBar`变量不可访问。为什么？在这种情况下我该如何设定`progressBar`价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:39:59.247

在 Designer 视图中选择您`ToolStripProgressBar`的并检查其`GenerateMember`属性。我想它是`False`偶然设置的。

# ruby - 如何使“SomeClass.new”返回计算值而不是创建的对象

> ID：13454611
> 
> 赞同：0
> 
> 时间：2012-11-19T13:17:21.373
> 
> 标签：ruby

对Ruby的`initialize`方法有点困惑。

为什么它不像其他方法那样返回我的值？

```
class SomeClass

  attr_reader :val

  def initialize a, b, c
    @val = a + b + c
    @val
  end

end

val = SomeClass.new 1, 2, 3 
```

我需要`val`不被`6`初始化的对象。

我当然可以使用`val.val`，但那是另一回事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:18:25.570

您需要覆盖`self.new`方法：

```
class SomeClass
  def self.new(*)
    instance = super
    instance.val
  end

  attr_reader :val

  def initialize a, b, c
    @val = a + b + c
    @val
  end

end

p SomeClass.new 1, 2, 3
#=> 6 
```

当您创建一个类的实例时，您实际上是在调用`self.new`该类，然后调用`initialize`方法并返回初始化的实例。

### 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-make-initialize-to-return-computed-value-rather-than-created-object.rb&run=true)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:45:38.253

`initialize`是一种方法，就像任何其他方法一样。*当然*，它返回返回值，就像任何其他方法一样。

是什么让你觉得它没有？你从来没有调用`initialize`你提供的代码示例，那么你怎么知道它返回什么值呢？

```
class SomeClass
  attr_reader :val

  def initialize a, b, c
    @val = a + b + c
    @val
  end

end

obj = SomeClass.allocate
val = obj.send :initialize, 1, 2, 3
# => 6 
```

# javascript - Cloudmade 和 Leaflet：多个自定义标记

> ID：13454619
> 
> 赞同：0
> 
> 时间：2012-11-19T13:17:54.670
> 
> 标签：javascript, maps, leaflet, cloudmade

我遵循了关于如何创建图层控制和自定义标记的传单教程：

标记：http://leafletjs.com/examples/custom-icons.html 控制：http: [//leafletjs.com/examples/layers-control.html](http://leafletjs.com/examples/layers-control.html)

我正在使用控制代码，我想为此添加多个自定义标记。应用代码时，地图会变为空白，但是使用一个标记它可以工作。任何帮助或指导都会很棒。

这是我当前的多个标记中断代码：

加载时控制台中确实出现错误：var officeoneIcon = new officeIcon({iconUrl: 'images/office1.png'}), officeIcon 未定义。

[代码]

```
var officeoneIcon = new officeIcon({iconUrl: 'images/office1.png'}),
    officetwoIcon = new officeIcon({iconUrl: 'images/office2.png'}),
    officethreeIcon = new officeIcon({iconUrl: 'images/office3.png'});

var officeone = L.marker([lat,long],{icon: officeoneIcon}).bindPopup('<b>Office Address</b>');

var officetwo = L.marker([lat,long],{icon: officetwoIcon}).bindPopup('<b>Office Address</b>');

var officethree = L.marker([lat,long],{icon: officethreeIcon}).bindPopup('<b>Office Address</b>');

var cities = L.layerGroup([officeone, officetwo, officethree]);

var minimal   = L.tileLayer(cloudmadeUrl, {styleId: 22677}),
midnight  = L.tileLayer(cloudmadeUrl, {styleId: 999}),
motorways = L.tileLayer(cloudmadeUrl, {styleId: 46561});

var map = L.map('map', {
center: new L.LatLng(lat,long),
zoom: 10,
scrollWheelZoom: true,
layers: [minimal, motorways, cities]
});

var baseMaps = {
    "Minimal": minimal,
    "Night View": midnight,

};

var overlayMaps = {
    "Motorways": motorways,
    "Display Markers": cities
};

L.control.layers(baseMaps, overlayMaps).addTo(map); 
```

[/代码]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:46:50.530

这已通过`"var officeIcon =L.icon;"`在 iconUrl 代码行上方添加来解决。

# android - ActionBar 什么时候支持库

> ID：13454623
> 
> 赞同：2
> 
> 时间：2012-11-19T13:18:03.780
> 
> 标签：android

当我在 Google I/O 时，他们说他们正在将 ActionBar 添加到支持库中，但到目前为止我还没有看到这种情况发生。它在会议上的所有公告中得到了最大的欢呼:) 有人知道什么时候会添加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:27:06.927

你会发现其他人何时发现，是否以及何时发货。Google 并未公布 Android 未来软件版本的时间表。

# php - 如何在 yii 中运行 giix 扩展

> ID：13454630
> 
> 赞同：2
> 
> 时间：2012-11-19T13:18:37.550
> 
> 标签：php, yii

我使用以下 url 运行 gii: `localhost/path to index.php?r=gii`，但只有 gii 模块运行不 giix。

请告诉我giix的正确配置？

我的 config.php 是：

```
'import'=>array(
    'application.models.*',
    'application.components.*',
),
'gii' => array(
    'class' => 'system.gii.GiiModule',
    'password'=>'.......',
    'generatorPaths' => array(
        'ext.giix.generators', // giix generators
    ),
),
'components'=>array(
    'ext.giix.components.*', 
    'messages' => array ( // giix messages directory,giix is  and extension.
        'extensionBasePaths' => array(
            'ext.giix.messages', // giix messages directory.
        ),
    ),
), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:01:02.043

根据 Giix 文档，您需要导入**'ext.giix-components.*'**并且 generatorPaths 应该是**'ext.giix-core'**。所以你的代码应该是这样的：

```
 'import'=>array(
        'application.models.*',
        'application.components.*',
        'ext.giix-components.*', // You need to import the giix component
    ),
    'gii' => array(
        'class' => 'system.gii.GiiModule',
        'password'=>'.......',
        'generatorPaths' => array(
            'ext.giix-core', // giix generator
        ),
    ), 
```

# zend-framework - ZF1 Order By 3 条款

> ID：13454634
> 
> 赞同：0
> 
> 时间：2012-11-19T13:18:45.333
> 
> 标签：zend-framework

$select->order(array('a.pay DESC', 'a.payDate ASC', 'a.insertDate DESC'));

我以这种方式订购查询，但是当我看到结果时，实际上 a.insertDate 在我的结果订购列表中没有任何作用。

我想在付费账户（a.pay > 0）在第一位并且最老的付费账户在第一位时实现订单。然后在付费账户之后将列出账户，这些账户应该由 a.insertDate DESC 排序（意味着新的帐户将在付款后放置）。我尝试使用 a.id DESC 没有 a.insertDate DESC，但什么也没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:50:45.543

我找到了解决方案

`$select->order(array('a.pay DESC','isnull(a.payDate) ASC', 'a.payDate ASC', 'a.insertDate DESC'));`

# javascript - Chrome、IE、Opera、Safari 上的 iFrame overflow-x BUG，但 Firefox 上没有

> ID：13454636
> 
> 赞同：1
> 
> 时间：2012-11-19T13:18:48.990
> 
> 标签：javascript, jquery, css, html

我必须在 iFrame 中加载远程 url。远程内容将比 iFrame 宽一些。我不希望显示水平滚动条，但如果需要，则显示垂直滚动条。

我尝试了以下代码：

```
<iframe scrolling="auto" style="width:500px; height:300px; border:0; padding:0; margin:0; overflow-x:hidden; overflow-y:auto;" src="http://digg.com"></iframe> 
```

它适用于 Firefox，但不适用于 IE、Chrome、Opera ......这可能是一个错误或什么的。小提琴：http: [//jsfiddle.net/DpbUy/3/](http://jsfiddle.net/DpbUy/3/)

* * *

我还尝试了在[**此处**](https://stackoverflow.com/questions/67354/dreaded-iframe-horizontal-scroll-bar-cant-be-removed-in-ie)标记为接受的答案中提供的标签`horizontalscrolling`和iFrame ，但也没有运气。`horizontalscrolling`[](https://stackoverflow.com/questions/67354/dreaded-iframe-horizontal-scroll-bar-cant-be-removed-in-ie)

```
`<iframe scrolling="yes" horizontalscrolling="no" verticalscrolling="yes" style="width:500px; height:300px; border:0; padding:0; margin:0;" src="http://digg.com"></iframe>` 
```

 **Th 在任何浏览器中都不起作用。

小提琴：http: [//jsfiddle.net/85q4r/](http://jsfiddle.net/85q4r/)

* * *

我知道我可以删除 iFrame 的滚动条并将其高度设置为`4000px`或其他内容，然后将其放入 div 中`overflow-x:hidden; overflow-y:auto;`，但我想要一种更干净的方式。

* * *

我想知道我是否应该放弃这个并尝试另一种方法。谁能告诉我是否可以这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:36:26.890

要从 iframe 中删除水平滚动条，请对其应用此 css 规则：

```
iframe{
    overflow-x:hidden
} 
```

您无需将其应用于 iframe 内容。**

# joomla - 自定义编辑器字段不保存 Joomla 1.5 中的 HTML

> ID：13454638
> 
> 赞同：2
> 
> 时间：2012-11-19T13:19:14.510
> 
> 标签：joomla, joomla1.5

我在 Joomla 1.5 管理员面板中添加了额外的编辑器字段：

```
$editor =& JFactory::getEditor();
echo $editor->display( 'shortdescr',  $row->shortdescr , '100%', '150', '75', '20', false ); 
```

一切正常，但是当我尝试在此字段中保存 html 时，joomla 删除 html-tags 并且我只得到纯文本。

这是我的`saveContent`功能：

```
function saveContent()
{
    global $mainframe;
    // Check for request forgeries
    JRequest::checkToken() or jexit( 'Invalid Token' );

    // Initialize variables
    $db     = & JFactory::getDBO();
    $user       = & JFactory::getUser();
    $dispatcher     = & JDispatcher::getInstance();
    JPluginHelper::importPlugin('content');

    $details    = JRequest::getVar( 'details', array(), 'post', 'array');
    $option     = JRequest::getCmd( 'option' );
    $task       = JRequest::getCmd( 'task' );
    $sectionid  = JRequest::getVar( 'sectionid', 0, '', 'int' );
    $redirect   = JRequest::getVar( 'redirect', $sectionid, 'post', 'int' );
    $menu       = JRequest::getVar( 'menu', 'mainmenu', 'post', 'menutype' );
    $menuid     = JRequest::getVar( 'menuid', 0, 'post', 'int' );
    $nullDate   = $db->getNullDate();

    $row = & JTable::getInstance('content');
    if (!$row->bind(JRequest::get('post'))) {
        JError::raiseError( 500, $db->stderr() );
        return false;
    }
    $post=JRequest::get('post');
    $post['shortdescr'] = JRequest::getVar( 'shortdescr', '', 'post', 'string', JREQUEST_ALLOWHTML );
    $row->bind($details);

    // sanitise id field
    $row->id = (int) $row->id;

    $isNew = true;
    // Are we saving from an item edit?
    if ($row->id) {
        $isNew = false;
        $datenow =& JFactory::getDate();
        $row->modified      = $datenow->toMySQL();
        $row->modified_by   = $user->get('id');
    }

    $row->created_by    = $row->created_by ? $row->created_by : $user->get('id');

    if ($row->created && strlen(trim( $row->created )) <= 10) {
        $row->created   .= ' 00:00:00';
    }

    $config =& JFactory::getConfig();
    $tzoffset = $config->getValue('config.offset');
    $date =& JFactory::getDate($row->created, $tzoffset);
    $row->created = $date->toMySQL();

    // Append time if not added to publish date
    if (strlen(trim($row->publish_up)) <= 10) {
        $row->publish_up .= ' 00:00:00';
    }

    $date =& JFactory::getDate($row->publish_up, $tzoffset);
    $row->publish_up = $date->toMySQL();

    // Handle never unpublish date
    if (trim($row->publish_down) == JText::_('Never') || trim( $row->publish_down ) == '')
    {
        $row->publish_down = $nullDate;
    }
    else
    {
        if (strlen(trim( $row->publish_down )) <= 10) {
            $row->publish_down .= ' 00:00:00';
        }
        $date =& JFactory::getDate($row->publish_down, $tzoffset);
        $row->publish_down = $date->toMySQL();
    }

    // Get a state and parameter variables from the request
    $row->state = JRequest::getVar( 'state', 0, '', 'int' );
    $params     = JRequest::getVar( 'params', null, 'post', 'array' );

    // Build parameter INI string
    if (is_array($params))
    {
        $txt = array ();
        foreach ($params as $k => $v) {
            $txt[] = "$k=$v";
        }
        $row->attribs = implode("\n", $txt);
    }

    // Get metadata string
    $metadata = JRequest::getVar( 'meta', null, 'post', 'array');
    if (is_array($metadata))
    {
        $txt = array();
        foreach ($metadata as $k => $v) {
            if ($k == 'description') {
                $row->metadesc = $v;
            } elseif ($k == 'keywords') {
                $row->metakey = $v;
            } else {
                $txt[] = "$k=$v";
            }
        }
        $row->metadata = implode("\n", $txt);
    }

    // Prepare the content for saving to the database
    ContentHelper::saveContentPrep( $row );

    // Make sure the data is valid
    if (!$row->check()) {
        JError::raiseError( 500, $db->stderr() );
        return false;
    }

    // Increment the content version number
    $row->version++;

    $result = $dispatcher->trigger('onBeforeContentSave', array(&$row, $isNew));
    if(in_array(false, $result, true)) {
        JError::raiseError(500, $row->getError());
        return false;
    }

    // Store the content to the database
    if (!$row->store()) {
        JError::raiseError( 500, $db->stderr() );
        return false;
    }

    // Check the article and update item order
    $row->checkin();
    $row->reorder('catid = '.(int) $row->catid.' AND state >= 0');

    /*
     * We need to update frontpage status for the article.
     *
     * First we include the frontpage table and instantiate an instance of it.
     */
    require_once (JPATH_ADMINISTRATOR.DS.'components'.DS.'com_frontpage'.DS.'tables'.DS.'frontpage.php');
    $fp = new TableFrontPage($db);

    // Is the article viewable on the frontpage?
    if (JRequest::getVar( 'frontpage', 0, '', 'int' ))
    {
        // Is the item already viewable on the frontpage?
        if (!$fp->load($row->id))
        {
            // Insert the new entry
            $query = 'INSERT INTO #__content_frontpage' .
                    ' VALUES ( '. (int) $row->id .', 1 )';
            $db->setQuery($query);
            if (!$db->query())
            {
                JError::raiseError( 500, $db->stderr() );
                return false;
            }
            $fp->ordering = 1;
        }
    }
    else
    {
        // Delete the item from frontpage if it exists
        if (!$fp->delete($row->id)) {
            $msg .= $fp->stderr();
        }
        $fp->ordering = 0;
    }
    $fp->reorder();

    $cache = & JFactory::getCache('com_content');
    $cache->clean();

    $dispatcher->trigger('onAfterContentSave', array(&$row, $isNew));

    switch ($task)
    {
        case 'go2menu' :
            $mainframe->redirect('index.php?option=com_menus&menutype=' . $menu);
            break;

        case 'go2menuitem' :
            $mainframe->redirect(
                'index.php?option=com_menus&menutype=' . $menu
                . '&task=edit&id=' . $menuid
            );
            break;

        case 'menulink' :
            ContentHelper::menuLink($redirect, $row->id);
            break;

        case 'resethits' :
            ContentHelper::resetHits($redirect, $row->id);
            break;

        case 'apply' :
            $msg = JText::sprintf('SUCCESSFULLY SAVED CHANGES TO ARTICLE', $row->title);
            $mainframe->redirect('index.php?option=com_content&sectionid='.$redirect.'&task=edit&cid[]='.$row->id, $msg);
            break;

        case 'save' :
        default :
            $msg = JText::sprintf('Successfully Saved Article', $row->title);
            $mainframe->redirect('index.php?option=com_content&sectionid='.$redirect, $msg);
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:33:19.720

而不是这个——

```
$row = & JTable::getInstance('content');
if (!$row->bind(JRequest::get('post'))) {
    JError::raiseError( 500, $db->stderr() );
    return false;
}
$post=JRequest::get('post');
$post['shortdescr'] = JRequest::getVar( 'shortdescr', '', 'post', 'string', JREQUEST_ALLOWHTML ); 
```

试试这个-

```
 $post=JRequest::get('post');
    $post['shortdescr'] = JRequest::getVar( 'shortdescr', '', 'post', 'string', JREQUEST_ALLOWHTML );
    $row = & JTable::getInstance('content');
    if (!$row->bind($post)) {
        JError::raiseError( 500, $db->stderr() );
        return false;
    } 
```

# php - Jquery无法将变量传递给php

> ID：13454640
> 
> 赞同：0
> 
> 时间：2012-11-19T13:19:19.383
> 
> 标签：php, javascript, jquery, html

我正在尝试将变量从 javascript 传递到它可以执行某些东西的 php，但是 php 文件没有被调用或没有被执行，并且我检查过，php 文件本身可以正常工作。

```
$(function () {
   $('#comments').click(function () {
     var data1 = '4';
     var data2 = yes;
     var data3 = '26';
     $.post('new.php', 'val=' + data1, function (response) {
       alert(response);
     });
     return false;
   });
 }); 

<div id='comments'>
<a href="#" onclick="doSomething();" >Click Me!</a></div> 
```

有人可以指出我做的错误:)

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:24:01.343

从您发布的代码片段中，主要问题是您引用了一个未声明的变量`yes`. 也许你打算写`true`。JavaScript 布尔值只是`true`, 和`false`.

也`doSomething`似乎未声明，但在这种情况下，由于您已经在 J​​S 代码中处理了这个`$('#comments').click()`，您应该`onClick`从元素中删除侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:21:48.253

更改您的 ajax 发布数据设置。试试下面的代码

```
 $.post('new.php', {val:data1}, function (response) {

  }); 
```

**[请参阅jQuery POST](http://api.jquery.com/jQuery.post/)**中的示例

# python - Python 鼻子在覆盖范围内抛出 TypeError 错误

> ID：13454642
> 
> 赞同：0
> 
> 时间：2012-11-19T13:19:29.440
> 
> 标签：python, nose, coverage.py, python-coverage

当我使用带有覆盖范围的nosetests 1.2.1 时，它会引发以下错误。

```
/usr/lib/python2.6/site-packages/tw/core/view.py:223: DeprecationWarning: object.__new__() takes no parameters
obj = object.__new__(cls, *args, **kw)
Traceback (most recent call last):
File "/usr/bin/nosetests", line 9, in <module>
  load_entry_point('nose==1.2.1', 'console_scripts', 'nosetests')()
File "/usr/lib/python2.6/site-packages/nose/core.py", line 118, in __init__
**extra_args)
File "/usr/lib64/python2.6/unittest.py", line 815, in __init__
  self.parseArgs(argv)
File "/usr/lib/python2.6/site-packages/nose/core.py", line 135, in parseArgs
  self.config.configure(argv, doc=self.usage())
File "/usr/lib/python2.6/site-packages/nose/config.py", line 338, in configure
  self.plugins.configure(options, self)
File "/usr/lib/python2.6/site-packages/nose/plugins/manager.py", line 284, in configure
  cfg(options, config)
File "/usr/lib/python2.6/site-packages/nose/plugins/manager.py", line 99, in __call__
  return self.call(*arg, **kw)
File "/usr/lib/python2.6/site-packages/nose/plugins/manager.py", line 167, in simple
  result = meth(*arg, **kw)
File "/usr/lib/python2.6/site-packages/nose/plugins/cover.py", line 137, in configure
  branch=self.coverBranches, data_suffix=None)
TypeError: __init__() got an unexpected keyword argument 'branch' 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:27:36.613

你有最后一个版本的鼻子，但覆盖的旧版本，鼻子使用最近添加到覆盖中的功能。

分支覆盖支持在`coverage`3.2 中添加，并且您拥有 3.0.1 版本（请参阅[https://crate.io/packages/coverage/](https://crate.io/packages/coverage/)）。

您需要更新覆盖范围。

*   如果您手动安装它，`pip install -U coverage`应该可以解决问题。
*   如果您从发行版的存储库中安装了 if，则应将其转发给他们，以便他们修复它。同时，您可以使用 virtualenv 全局更新它，也可以`sudo pip install -U coverage`使用 virtualenv。

# javascript - 在谷歌地图中拖放一组自定义图标

> ID：13454645
> 
> 赞同：1
> 
> 时间：2012-11-19T13:19:54.483
> 
> 标签：javascript, google-maps

到目前为止，我所拥有的是一张根据用户提供的街道地址放置酒吧位置的地图。

但是现在我需要关联一个描述用户拥有的栏类型的图标。所以我的地图右侧有一个图标列表和地图内的标记。

有没有办法拖放用户选择的图像并将这个标记替换为新图像？

这个想法是捕获正在拖动的图标，将当前标记替换为这个新标记，并将信息存储到我的数据库中。我想我可以做最后一部分，但我对前两部分知之甚少:(

任何有关如何开始的指南将不胜感激:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:29:27.683

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>MVC is Fun</title>

        <style type="text/css">
            *{
                margin: 0px;
                padding: 0px;
            }
            html { height: 100% }
            body{ height: 100%; margin: 0px; padding: 0px;}
            #map_canvas { height: 50% }
            #shelf{position:fixed; top:10px; left:500px; height:100px;width:200px;background:white;opacity:0.7;}
            #draggable {position:absolute; top:10px; left:10px; width: 30px; height: 30px;z-index:1000000000;}
        </style>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#draggable").draggable({helper: 'clone',
                    stop: function(e) {
                        var point=new google.maps.Point(e.pageX,e.pageY);
                        var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
                        var icon = $(this).attr('src');
                        placeMarker(ll, icon);
                    }
                });
                $("#draggable2").draggable({helper: 'clone',
                    stop: function(e) {
                        var point=new google.maps.Point(e.pageX,e.pageY);
                        var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
                        var icon = $(this).attr('src');
                        placeMarker(ll, icon);
                    }
                });
                $("#draggable3").draggable({helper: 'clone',
                    stop: function(e) {
                        var point=new google.maps.Point(e.pageX,e.pageY);
                        var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
                        var icon = $(this).attr('src');
                        placeMarker(ll, icon);
                    }
                });
                $("#draggable4").draggable({helper: 'clone',
                    stop: function(e) {
                        var point=new google.maps.Point(e.pageX,e.pageY);
                        var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
                        var icon = $(this).attr('src');
                        placeMarker(ll, icon);
                    }
                });
                $("#draggable5").draggable({helper: 'clone',
                    stop: function(e) {
                        var point=new google.maps.Point(e.pageX,e.pageY);
                        var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
                        var icon = $(this).attr('src');
                        placeMarker(ll, icon);
                    }
                });
            });
        </script>
        <script type="text/javascript">
            var $map;
            var $latlng;
            var overlay;
            function initialize() {
                var $latlng = new google.maps.LatLng(66.5, 25.733333);
                var myOptions = {
                    zoom: 3,
                    center: $latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
                        position: google.maps.ControlPosition.TOP_LEFT },
                    zoomControl: true,
                    zoomControlOptions: {
                        style: google.maps.ZoomControlStyle.LARGE,
                        position: google.maps.ControlPosition.LEFT_TOP
                    },
                    scaleControl: true,
                    scaleControlOptions: {
                        position: google.maps.ControlPosition.TOP_LEFT
                    },
                    streetViewControl: false,

                    panControl:false,

                };
                $map = new google.maps.Map(document.getElementById("map_canvas"),
                myOptions);

                overlay = new google.maps.OverlayView();
                overlay.draw = function() {};
                overlay.setMap($map);
            } 
            function placeMarker(location, icon) {
                var marker = new google.maps.Marker({
                    position: location, 
                    map: $map,
                    icon: icon
                });

            }
        </script>
    </head>
    <body onload="initialize()">
        <div id="map_canvas"></div>
        <div id='shelf'>
            <ul>
                <li>
                    <img src="ico_beer.png" id="draggable" />
                </li>
                <li>
                    <img src="ico_comedy.png" id="draggable2" />
                </li>
                <li>
                    <img src="ico_dance_club.png" id="draggable3" />
                </li>
                <li>
                    <img src="ico_food.png" id="draggable4" />
                </li>
                <li>
                    <img src="ico_karaoke.png" id="draggable5" />
                </li>
            </ul>
        </div>
        <div id="info"></div>
    </body>
</html> 
```

当然，我使用了这个人回答的问题，这对我有很大帮助！:) [谷歌地图将对象从地图外部拖放到谷歌地图中](https://stackoverflow.com/questions/5510972/google-maps-drag-and-drop-objects-into-google-maps-from-outside-the-map)

# grails - 无法访问 Spring Security UI 的注册页面

> ID：13454646
> 
> 赞同：0
> 
> 时间：2012-11-19T13:19:55.653
> 
> 标签：grails, spring-security, grails-plugin

嗨，我已经在我的 grails 应用程序中安装了 spring security UI 插件。我正在尝试从[Facebook 注册](http://developers.facebook.com/docs/plugins/registration/)创建注册页面，而不是从插件默认注册页面。

我正在解码响应并取回用户名、电子邮件和密码。

现在我希望我需要将它们发送到`RegisterController`'s`register`行动。像：

```
 redirect(controller:"register",action:"register",params:[username:username,email:email]) 
```

但是当我重定向时，我得到一个`405`错误。

但我可以`RegisterController`在插件目录中看到。

我在这里缺少什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:58:03.700

如果您查看 RegisterController 注册操作允许哪些方法？405 错误是不允许的方法。这可能意味着您对仅允许 POST 的操作执行 GET。

查看 spring security UI 插件，它看起来像是期待一个带有该操作的命令对象的 Post，但是如果您不需要用户输入更多详细信息，您应该能够直接从您的数据创建用户现在有。

# c# - 我可以使用 Data Annotations 或 Fluent 在数据存储和实体类之间转换值吗？

> ID：13454652
> 
> 赞同：1
> 
> 时间：2012-11-19T13:20:09.720
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用现有的 [设计不良] 数据库，该数据库将美元金额存储为数据库中的整数（即 $10.99 == 1099）。我希望我的实体类将此值视为小数，以便使用代码不必进行翻译。

**有没有办法将值转换为整数和十进制，然后使用 Data Annotations 或 Fluent 配置返回？**

与此同时，我正在使用一种 hack，它本质上是用一个处理翻译的小数属性“包装”整数属性。

```
 [Column("intTotal")]
    public virtual int TotalAsInt { get; set; }

    [NotMapped]
    public virtual decimal Total
    {
        get { return (decimal) TotalAsInt/100; }
        set { TotalAsInt = (int)(value*100); }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:53:06.360

> 有没有办法将值转换为整数和十进制，然后使用 Data Annotations 或 Fluent 配置返回？

据我所知不是。您的解决方案看起来不错。

`TotalAsInt`您可以通过将其设为属性来隐藏`private`，但是您不能在or之`IQueryable`类的方法中使用它。`Where``Select`

所以，在你修复数据库之前，我会选择你的解决方案。

# for-loop - 两个 for 循环批量从两个不同的文本文件中获取数据

> ID：13454653
> 
> 赞同：4
> 
> 时间：2012-11-19T13:20:11.757
> 
> 标签：for-loop, batch-file

我正在尝试创建一个小脚本，该脚本将从文本文件（`Users.txt`）中为每个用户名创建一个文件夹，并在该文件夹中创建另一个带有其 ID（`ID.txt`）的子文件夹

我创建了以下脚本：

```
@echo off

setlocal EnableDelayedExpansion
set Users=Users.txt
set ID=id.txt

for /f %%i IN (%Users%) DO ((
    set username=%%i
    )       
    for /f %%j IN (%ID%) DO (
    set ID=%%j
    mkdir c:\Test\!username!\!ID!       
)
) 
```

但结果是对于每个“用户”文件夹，我得到了所有 ID 的子文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:56:23.330

假设两个文件具有相同的行数：

```
@echo off
setlocal EnableDelayedExpansion
set "userFile=Users.txt"
set "idFile=id.txt"
<"%idFile%" (
  for "usebackq" /f %%i IN ("%userFile%") do (
    set /p "id="
    mkdir "c:\Test\%%i\!id!"
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:45:13.970

根据您的评论，您可以保留各种计数器，并在嵌套循环中根据该计数器查找正确的 ID。我什至不确定这是可能的。

可能是这样的（未经测试）：

```
set COUNTER = 0
for /f %%i in (%users%) do (
    set /A COUNTER = %COUNTER%+1
    goto :callInnerLoop %%i %COUNTER%
)

goto :EOF
:callInnerLoop
SET LOCALCOUNTER=0
for /f %%i in (%id%) DO (
   set /A COUNT=%COUNT%+1
   if (!COUNT!=%2) (
      REM FOUND %ID%
      goto :EOF
   )   
) 
```

不过，这确实是一段杂乱无章的代码，批处理脚本似乎不太适合这项工作。如果您可以合并文件（例如，每行带有“用户名；ID”的 CSV 文件），这将变得容易得多。否则我会建议切换到更强大的脚本语言，如 powershell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:55:03.317

一种非常丑陋的方式；读取用户名，然后从 id 文件中获取相应的行

```
@echo off
setlocal disabledelayedexpansion
set Users=Users.txt
set ID=id.txt
set linenum=0

for /f %%i IN (%Users%) DO (
  call :getId %%linenum%% %%i
  set /a linenum=linenum+1  
)
goto :eof
:getId
if "%1"=="0" (set options=) else set options=skip=%1
for /f "%options%" %%j in (%id%) do (
    echo %2\%%j
    goto:eof
 ) 
```

# osgi - 如何将 Fragment-Bundle 放入 Tycho 测试运行时？

> ID：13454654
> 
> 赞同：8
> 
> 时间：2012-11-19T13:20:20.500
> 
> 标签：osgi, tycho, osgi-fragment

我有一个依赖于它的实现包和片段包（清单中的片段主机）。此外，还有一个包含一些测试的捆绑包。

现在我想测试我的实现并使用 tycho-surefire-plugin。带有测试的bundle 是通过MANIFEST 中的Require-Bundle 引用实现的bundle。到现在为止还挺好。问题是如何将片段包放入测试运行时？我已经在我的 eclipse-test-plugin 中尝试了 tycho-surefire-plugin 配置中的依赖关系。但它不起作用。什么是正确的方法？

编辑：我的测试插件的 pom.xml

```
 <plugin>
     <groupId>org.eclipse.tycho</groupId>
     <artifactId>tycho-surefire-plugin</artifactId>
     <version>${tycho-version}</version>
     <configuration>
      <testSuite>com.example.impl.tests</testSuite>
      <testClass>com.example.impl.tests.MyTest</testClass>
      <dependencies>
       <dependency>
       <type>eclipse-plugin</type>
       <artifactId>com.example.impl.config</artifactId>
       <version>1.0.0</version>
      </dependency>         
    </dependencies>
    </configuration>
    </plugin> 
```

片段包的清单：

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: com.example.config
    Bundle-SymbolicName: com.example.config
    Bundle-Version: 1.0.0.qualifier
    Bundle-Vendor: example
    Fragment-Host: com.example.impl;bundle-version="1.0.0.qualifier"
    Bundle-ClassPath: resources/
    Bundle-RequiredExecutionEnvironment: JavaSE-1.7 
```

从反应堆 pom.xml 中提取：

```
 <modules>
     <module>../com.example.impl</module> 
     <module>../com.example.impl.config</module>
     <module>../com.example.impl.tests</module>
    </module> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T06:39:54.217

它接缝我自己找到了答案。如果有人遇到同样的问题：Tycho 不会自动扩展 Fragment-Host bundle-version 中的 .qualifier 版本。

# math - 查找由两条线定义的区域中的所有整数点

> ID：13454656
> 
> 赞同：0
> 
> 时间：2012-11-19T13:20:26.120
> 
> 标签：math, graphics

我需要一种有效的方法来获取由两条线定义的区域中的所有整数点。

我从由两点 Pt1 和 Pt2 定义的线开始。然后移动这条线，得到两个新点 Pt1new 和 Pt2new。然后，我需要找到由线条移动产生的区域中的所有欧拉点。

对于简单的情况，这没有问题，因为我只会在最小 x 和 y 值与最大 x 和 y 值之间生成一个矩形区域。然后检查与欧拉网格建立的交点是否实际上在我的点生成的区域内。（通过顺时针方向的点并检查点是否始终在右侧）

但是对于第二个问题（图像中较低的问题），这似乎不起作用，因为我无法轻松检查该点是否实际上在该区域内。我怎样才能以一种快速简单的方式找到所有这些点。

在图形中，我有兴趣找到绿点。它位于欧拉网格上（例如 x 和 y 坐标是整数值）。

![问题图片](../Images/27a6c4554a9a336b32d5723c05428d30.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:37:17.370

如果两条线 Pt1-Pt2 和 Pt1new-Pt2new 相交于点 P0，则求三角形 Pt1-Pt1new-P0 和 Pt2-Pt2new-P0 中的所有欧拉点。

最简单的方法与您用于四边形的方法相同。计算边界框并测试里面的每个欧拉点。您可能需要使用[重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinates_%28mathematics%29)来检查这一点。

作为进一步的概括，您可能希望始终使用三角形：正常的 Pt1-Pt2-Pt1new + Pt2-Pt2new-Pt1new 和退化的 Pt1-Pt1new-P0 + Pt2-Pt2new-P0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:37:36.723

我认为您需要更改您的参考。

想象一下，您的原点锚定在您的线上，而实际上是网格在移动。您可以清楚地看到，首先突出显示的网格点已向上移动到线上。在第二种情况下，网格旋转了，只有突出显示的点移到了线上。

由于一切都是线性的（这里没有曲线），如果一个点在转换之前“低于”这条线，然后在它之下，那么它从未穿过它。

定义，然后衡量一个点是低于还是高于该线。如果您的线的最远任一端移动了 3 个单位，那么我们只需要考虑距离线最多 3 个单位的网格点。对于这些点中的每一个，测试它在转换前后是低于还是高于该线。如果它的状态改变了，那么这条线就通过了。如果没有，那么它没有。

那么，上面/下面的措施。该线由以下定义

**y = mx + c**。

如果点 p (px,py) 位于直线上方

py > m.py + c。

在矩阵中，我们可以首先将线 AB (ax,ay 到 bx,by) 和点 (px,py) 都转换为将 A 置于原点：

```
Q' = Q + | -ax |
         | -ay | 
```

然后我们可以旋转它以使轴与线对齐。由于线与 x 轴之间的角度由 sin(θ) = (dy / d) 和 cos(θ) = (dx / d) 给出：

```
d = sqrt((by-ay)^2 + (bx-ax)^2)
s = (by-ay)/d
c = (bx-ax)/d 
```

角度的旋转矩阵在[这个维基百科页面](http://en.wikipedia.org/wiki/Transformation_matrix)中给出，使用 s 和 c 我们得到：

```
R = |  c  s |
    | -s  c | 
```

对线应用平移然后旋转，使谎言沿 x 轴，从原点到 x=d。然后该点将具有正或负 y 值。因此将其应用于点 p：

```
q = R(p+T) = |  c  s | ( |px| + |-ax|  
             | -s  c |   |py|   |-ay|  )

p'x = px - ax
p'y = py - ay
qx =  c * p'x + s * p'y
qy = -s * p'x + c * p'y 
```

假设我们在点 P 上针对两条不同的线 AB 和 CD 执行此操作。我们将得到两个点 F 和 G（之前和之后的变换点）。如果：

```
if( signof(fy) != signof(gy) ) {
    // crossed the origin
} 
```

但请注意，这仅测试 y。如果线太短而无法到达该点，则该点可能只是通过该线。因此，测试 x 值是否也发生了变化：

```
if( (fx < 0) && (gx < 0) ||
    (fx > d) && (gx > d) ) {
    // whooshed past
} 
```

因此，如果您同时测试这两个，您就会知道该点是否越过界限而没有飞过。

希望这很清楚...

# pdf - 使用 MonoTouch 如何将 PDF 文件从 URL 直接保存到 iBooks？

> ID：13454668
> 
> 赞同：1
> 
> 时间：2012-11-19T13:21:08.550
> 
> 标签：pdf, uiwebview, xamarin.ios, ibooks, xamarin

目前我将 PDF URL 传递给 UIWebView 并将其显示在应用程序中。PDF 文件是外部文件，不包含在捆绑包中。

一旦文件显示在 UIWebView 中，我想为用户提供将文件保存到 iBooks 的选项。

我不想将 PDF 文件保存在应用程序本身中我想在 UIWebView 中查看它并在导航栏上添加一个按钮；“保存到 iBooks”。

1 - 那么我如何检测是否安装了 iBooks？

2 - 如何从导航栏将 PDF 文件保存到 iBooks？

我找到了一些在应用程序本身中本地保存文件的参考，但我想将它直接保存到 iBooks。

我没有使用 XCode，而是使用 Monotouch/Monodevelop。

谢谢 - 对于单点触控的新手来说，这有点令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:33:58.897

我最近问[了几乎完全相同的问题](https://stackoverflow.com/questions/13375472/add-open-in-ibooks-to-uiwebview)。

它不适用于 MonoTouch，但可能会给您答案。

# php - WAMP：禁止错误

> ID：13454672
> 
> 赞同：0
> 
> 时间：2012-11-19T13:21:26.423
> 
> 标签：php, html, wamp

我是 wamp 、 php 和 html 的新手，请原谅这个原始问题。但我最近在使用 WAMP 时遇到了很多麻烦。

当我点击表单上的提交按钮时，它给了我 Forbidden You don't have permission to access

> /myproj/< 在此服务器上。

我正在尝试创建一个带有下拉菜单输入的简单表单。

请在下面找到我的代码：

```
 <html>
    <body>
    <div align="center">
    <form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
    Select a Template <br>
     <select name="template" id="rawquery">
      <option>Select</option>
      <option value="Alpha query">Alpha</option>
      <option value="Betaquery">Beta</option>
       <option value="Gamma query">Gamma</option>
       <option value="Epsilon query">Epsilon</option>
       </select>
       <br> 
        <input type="submit" name="submit">
        <br><br>
         </form>
        <?php echo $_POST("rawquery") ; ?>

        Raw Qyery :  <br><textarea name="raw" rows="10" cols="50" id="Raw">The Raw                 template as selected from the menu</textarea>
        <br><br>

      please input the values given below : 

      </body>
      </html> 
```

我试过改变：

`"<?php echo $_SERVER['PHP_SELF'];?>"` 至 `"<?php echo $PHP_SELF;?>"`

没有运气，apache错误日志显示以下内容：

> [2012 年 11 月 19 日星期一 18:40:18] [错误] [客户端 127.0.0.1] (20024)给定路径格式错误或包含无效字符：无法映射 POST /myproj/%3C?php%20echo%20$_SERVER[ 'PHP_SELF'];?%3E HTTP/1.1 到文件，引用：[http://localhost/myproj/Form.html](http://localhost/myproj/Form.html)

任何帮助将不胜感激。提前致谢 。！

服务器页面上的源代码如下所示：

```
 <html>
    <body>
    <div align="center">
    <form method="post" action="<?php echo $PHP_SELF;?>">
    Select a Template <br>
    <select name="template" id="rawquery">
    <option>Select</option>
    <option value="Alpha query">Alpha</option>
    <option value="Betaquery">Beta</option>
    <option value="Gamma query">Gamma</option>
    <option value="Epsilon query">Epsilon</option>
    </select>
     <br> 
    <input type="submit" name="submit">
     <br><br>
    </form>
     Raw Qyery :  <br><textarea name="raw" rows="10" cols="50" id="Raw">The Raw template as selected from the menu</textarea>
    <br><br>

please input the values given below : 

 </body> </html> 
```

到目前为止，我还没有添加任何 PHP 代码，我尝试过它不起作用我什至无法回显模板..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:36:51.053

您有一些错误，但主要是您选择的名称错误。当您发布某些内容时，它采用“名称”属性而不是“id”。第二个错误是您在`$_POST`. 此外，您运行的文件必须具有`.PHP`扩展名。通过以下更改（至少对我而言），它可以正常工作。试试看，让我知道！:)

```
<html>
    <head></head>
    <body>
        <div align = "center">
            <form method = "post" action = "<?php echo $_SERVER['PHP_SELF']; ?>">
                Select a Template<br />
                    <select name = "template" id = "rawquery">
                        <option>Select</option>
                        <option value = "Alpha query">Alpha</option>
                        <option value = "Betaquery">Beta</option>
                        <option value = "Gamma query">Gamma</option>
                        <option value = "Epsilon query">Epsilon</option>
                    </select>
                <br /> 
                <input type = "submit" name = "submit"><br /><br />
            </form>
            <?php if (isset($_POST["template"])) echo $_POST["template"]; ?> Raw Qyery:  <br />
            <textarea name = "raw" rows = "10" cols = "50" id = "Raw">The Raw template as selected from the menu</textarea>
            <br /><br />
            please input the values given below : 
        </div>
    </body>
</html> 
```

# php - 为什么 PHP 错误显示在终端中，而不是在 ubuntu 的浏览器中显示

> ID：13454674
> 
> 赞同：0
> 
> 时间：2012-11-19T13:21:26.830
> 
> 标签：php, ubuntu

我在 Ubuntu 的终端中编写和执行`PHP`代码。在这种情况下，我遇到了一些错误。当我使用终端时，它会立即显示错误。当在浏览器中运行相同的代码时，它不会显示任何错误。为什么会发生这种情况，如何在浏览器中显示错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:27:18.923

**命令行 php** 和常规、**web php**（如 apache 的）有**不同的 php.ini**文件和**不同的配置**

您应该做的是**比较这两个 ini 文件并找到您需要更正的内容**。

查找`error_reporting`和`display_errors`指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:30:57.040

更改`error_reporting`为`E_ALL`和或`display_errors = 1`并重新启动 Web 服务。`/etc/php5/cli/php.ini``/etc/php/fpm/php.ini`

# android - 如何在Android的JNI中复用第三方libXXX.so

> ID：13454676
> 
> 赞同：2
> 
> 时间：2012-11-19T13:21:39.590
> 
> 标签：android, android-ndk

我的应用程序是一个系统应用程序。所以我可以使用 mm 编译它，但我无法使用 NDK-BUILD 编译它。我想用第三方libXXX.so的方法，我想新建一个libX.so，为java代码提供接口。关键是我的cpp文件回调了第三方libXXX.so的方法。所有对应的文件都在同一个目录下。包括Android.mk;a.cpp;liborigin.so;ah android.mk：</p>

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := foo-prebuilt
LOCAL_SRC_FILES := liboringa.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE_TAGS    := eng
#LOCAL_PRELINK_MODULE := false
LOCAL_MODULE         := libfoo
LOCAL_SRC_FILES      := /a.cpp
LOCAL_C_INCLUDES     := /zinnia.h
LOCAL_SHARED_LIBRARIES := foo-prebuilt
include $(BUILD_SHARED_LIBRARY) 
```

MM之后，出现错误：required target“out/target/product/generic/obj/lib/foo-prebuilt.so”。停止。谁能帮忙？如何编写makefile..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:03:31.063

你需要

```
sudo vi /etc/profile 
export ANDROID_JAVA_HOME = (java in android root java)
. /etc/profile 
```

# ruby-on-rails - 使用 ruby on rails 中的 devise 在会话中设置用户的时区

> ID：13454679
> 
> 赞同：0
> 
> 时间：2012-11-19T13:21:50.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, timezone

我在登录表单上创建了一个隐藏字段，其中包含用户时区，现在我想在该用户会话上设置它。我正在使用设计进行身份验证。`params[:hiddenfieldname]` 在我将用户重定向到主页的控制器中无法访问使用值时。请告诉我我缺少哪些步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:37:12.973

我认为问题中没有足够的信息来提供明确的答案；如果没有，请发布您拥有的不起作用的代码。这是我的猜测...

当您使用 Devise 登录（或注销）时，这些操作由 Devise::SessionController 管理。在用户登录后，该控制器的一部分将用户重定向到一个位置（默认情况下是家），此时`params`阵列被清除。

您需要在代码中覆盖该控制器的相关方法，以便`params`在 Devise 登录过程的其余部分运行之前将时区的值捕获到会话中。就像是

```
class DeviseCustom::SessionsController < Devise::SessionsController
  def create
    session[:user_timezone] = params[:hiddenfieldname]
    super
  end
end 
```

此代码将存在`apps/controllers/devise_custom/session_controller.rb`于您的项目中。

编辑：您还需要更新`routes.rb`以指定新控制器的自定义路径，如下所示

```
devise_for :users, :controllers => {
  :sessions => "devise_custom/sessions",
} 
```

# android - 如何创建具有 2 个值的 ListView，但显示其中一个，第二个用于其他目的

> ID：13454681
> 
> 赞同：0
> 
> 时间：2012-11-19T13:21:56.427
> 
> 标签：android, android-intent, android-activity, android-listview

我有两个 Android 活动。

第一个是在 ListView 中显示书名。数据来自网络服务并读取图书 ID

通过单击一个项目（其值为书名），它将转到第二个活动以显示来自其他 Web 服务的书籍详细信息，但这取决于书籍 ID。

如何使第一个活动中的 ListView 显示标题但传递 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:42:13.597

将此类适配器与您的列表视图一起使用并为列表视图实现 onItemClickListener。从 onItemClickListener 获取位置并将 bookId [位置] 发送到下一个活动，您希望在其中显示具有类似于 bookId [位置] 的特定书籍的详细信息。

```
public class MySimpleAdapter extends BaseAdapter 
{
    private final Activity context;
    private final String[] bookTitle;
    private final Integer[] bookId;

public MySimpleAdapter(Activity context, String[] title,Integer[] id) 
{
    super();
    this.context = context;
    this.bookTitle = title;
    this.bookId = id;
}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return bookTitle.length;
}
@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) 
{

    //inflating
    LayoutInflater inflater = context.getLayoutInflater();
    convertView = inflater.inflate(R.layout.list_inflater,null);

    //binding
        final TextView tvTitle=(TextView)convertView.findViewById(R.id.tvTitle);

    tvTitle.setText(bookTitle[position]);

    return convertView;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:30:50.113

使用“自制”项目制作一个列表视图，并在构造函数中传递 ID 和该项目的变量。例子：

```
public class TextBook extends LinearLayout {

private String id;

public TextBook(Context context, AttributeSet attrs, String id) {
    super(context, attrs);
    this.id = id;

    LayoutInflater inflater = (LayoutInflater) getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.yourlayout, this);
}

} 
```

或类似的东西。并且不要忘记检索 textview 或您在布局中使用的任何内容并放置设置器（当然还有您的适配器。）。

# asp.net - 有条件地在 Web 表单上放置控件

> ID：13454682
> 
> 赞同：1
> 
> 时间：2012-11-19T13:22:01.800
> 
> 标签：asp.net, user-controls, conditional

我有一个列表视图，我将一些问题绑定到它，以便用户可以回答它们。根据问题的类型，可以通过radiobuttonlist、dropdownlist、textbox等不同的输入控件来回答。

有点像这样：

```
<itemtemplate>
    if (#eval("QuestionType") == 1)
       {
           <asp:RadioButtonList runat="Serer" />
       }
    elseif(#eval("QuestionType") == 2)
       {
           <asp:DropDownList runat="Serer" />
       }
    elseif(#eval("QuestionType") == 3)
       {
           <asp:CheckboxList runat="Serer" />
       }
</itemtemplate> 
```

以上是我实际拥有的简化示例伪代码。

我希望你明白我真正在寻找什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:26:13.510

您不能有条件地“放置”它们，但可以有条件地设置它们的可见性。

```
<asp:RadioButtonList runat="server" 
    Visible='<%# (int)DataBinder.Eval(Container.DataItem("QuestionType")) == 1 %>' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:37:02.783

您需要`OnItemDataBound`为您的`ListView`.

```
<asp:ListView ID="lstVw" runat="server" OnItemDataBound="lstVw_ItemDataBound">
    <ItemTemplate></ItemTemplate>
</asp:ListView> 
```

从那时起，您可以动态地将控件添加到行数据项的 Controls 集合中。

```
protected void lstVw_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        int val = int.Parse(e.Item.DataItem.ToString());

        switch (val)
        {
            case 1:
                RadioButtonList list = new RadioButtonList();
                list.Items.Add("Option 1");
                list.Items.Add("Option 2");

                e.Item.Controls.Add(list);

                break;
            case 2:
                //  Add a dropdown list
                break;
            case 3:
                //  Add a checkbox list
                break;
            default:
                //
                break;
        }
    }
} 
```

需要注意的一件事 - 我将我的 ListView 直接绑定到`List<int>`. 所以你需要的代码会略有不同——看看[这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)。一般的想法是转换`e.Item.DataItem`为 ListView 绑定的任何类型，然后从中获取您需要的值。

现在在回发时获取动态添加的控件的值（假设您需要）将变得很棘手。您必须使用[Page.FindControl() 遍历](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)页面上的控件，甚至可能检查 ListView 并在其 DataRows 上调用 FindControl。您可能需要使用反射来查找每个控件的类型。就像我说的，这不会是直截了当的，但你应该能够完成它。

# c# - 在 Objective C 中调用 C# webMethod

> ID：13454683
> 
> 赞同：3
> 
> 时间：2012-11-19T13:22:04.690
> 
> 标签：c#, objective-c, http-post, httpresponse, webmethod

我正在尝试与这个简单的 C# webMethod 进行通信：

```
[WebMethod()]
public static string login(string userName)
{
     if (userName == "test"){
         return "validated";
     }
     return "error";
} 
```

我正在尝试使用以下目标 C 代码连接到它：

```
NSString *userName = @"test";
NSString *post = [NSString stringWithFormat:@"userName=%@", userName];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSString *serverURLString = @"http://myURL.aspx/login";
NSURL *serverURL = [NSURL URLWithString:serverURLString];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:serverURL];
[request setHTTPMethod:@"POST"];
[request addValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];

NSHTTPURLResponse *urlResponse = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"result = %@", result); 
```

而不是打印出“已验证”或“错误”，我得到：

```
result = <!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
</title></head>
<body>
<form method="post" action="login" id="form1">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"   value="/wEPDwULLTE2MTY2ODcyMjlkZFwRG2UySOwu+02xaz+VP6mmD60UBRkXvHCHxGohOt9d" />
<div>    
</div>
</form>
</body>
</html> 
```

谁能告诉我 Web 方法或 Objective C 代码是否有明显问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:30:26.113

我相信 WebMethods 是 SOAP，所以与其手动进行，为什么不使用 API 来处理 SOAP？比如[wsdl2objc](http://code.google.com/p/wsdl2objc/)。

# android - Android与梯队网关的连接

> ID：13454689
> 
> 赞同：1
> 
> 时间：2012-11-19T13:22:20.370
> 
> 标签：android, gateway

我想为android创建一个应用程序。此应用程序必须与网关（以太网/Lon）进行通信。这个网关比生成两个 java 类的 POM.xml 交付：-ILON100.class -ILON100PortType.class 我按照他们的说明和教程，我在 Eclipse 中创建了一个 java 项目。该项目改变了网关的两个状态继电器并获得了它们的新位置。该项目运行正常。

现在我想用一个 Android 项目创建相同的项目。我使用相同的 javacode 创建项目并且我的项目正在运行，但是当我尝试更改继电器的状态时。当我在 java 中运行我的新项目时，当我在 Android 中使用 AVD 运行我的项目时，我的项目停止。我通过以下行代码在 Android 中执行字体“Recup”：“Client.Recup();” 在我的主要课程“Principal.java”中。

**我的 Logcat 错误是：**

```
11-02 10:50:44.461: E/AndroidRuntime(665): FATAL EXCEPTION: main
11-02 10:50:44.461: E/AndroidRuntime(665): java.lang.IllegalStateException: Could not execute method of the activity
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.view.View$1.onClick(View.java:3591)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.view.View.performClick(View.java:4084)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.view.View$PerformClick.run(View.java:16966)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.os.Handler.handleCallback(Handler.java:615)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.os.Handler.dispatchMessage(Handler.java:92)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.os.Looper.loop(Looper.java:137)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.app.ActivityThread.main(ActivityThread.java:4745)
11-02 10:50:44.461: E/AndroidRuntime(665):         at java.lang.reflect.Method.invokeNative(Native Method)
11-02 10:50:44.461: E/AndroidRuntime(665):         at java.lang.reflect.Method.invoke(Method.java:511)
11-02 10:50:44.461: E/AndroidRuntime(665):         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-02 10:50:44.461: E/AndroidRuntime(665):         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-02 10:50:44.461: E/AndroidRuntime(665):         at dalvik.system.NativeStart.main(Native Method)
11-02 10:50:44.461: E/AndroidRuntime(665): Caused by: java.lang.reflect.InvocationTargetException
11-02 10:50:44.461: E/AndroidRuntime(665):         at java.lang.reflect.Method.invokeNative(Native Method)
11-02 10:50:44.461: E/AndroidRuntime(665):         at java.lang.reflect.Method.invoke(Method.java:511)
11-02 10:50:44.461: E/AndroidRuntime(665):         at android.view.View$1.onClick(View.java:3586)
11-02 10:50:44.461: E/AndroidRuntime(665):         ... 11 more
11-02 10:50:44.461: E/AndroidRuntime(665): Caused by: java.lang.NoClassDefFoundError: com.echelon.wsdl.web_services_ns.ilon100.v4_0.wsdl.ILON100
11-02 10:50:44.461: E/AndroidRuntime(665):         at com.echelon.sample.client.ilon.Client.Recup(Client.java:25)
11-02 10:50:44.461: E/AndroidRuntime(665):         at com.echelon.sample.client.ilon.Principal.test(Principal.java:23)
11-02 10:50:44.461: E/AndroidRuntime(665):         ... 14 more
11-02 10:50:49.991: I/Process(665): Sending signal. PID: 665 SIG: 9 
```

**客户端类：**

```
package com.echelon.sample.client.ilon;

import com.echelon.wsdl.web_services_ns.ilon100.v4_0.message.DpData;
import com.echelon.wsdl.web_services_ns.ilon100.v4_0.message.EXSelect;
import com.echelon.wsdl.web_services_ns.ilon100.v4_0.message.ItemColl;
import com.echelon.wsdl.web_services_ns.ilon100.v4_0.message.ItemDataColl;
import com.echelon.wsdl.web_services_ns.ilon100.v4_0.wsdl.ILON100;
import com.echelon.wsdl.web_services_ns.ilon100.v4_0.wsdl.ILON100PortType;

public class Client
{

    public static void main (String[] args)
    {
        Recup();
    }

    public static void Recup()
    {
        ILON100 iLon100 = null;
        ILON100PortType SmartServer = null;
        try
        {
            iLon100 = new ILON100();
            SmartServer = (iLon100).getILON100HttpPort();
                try 
                {
                    // _________________________
                    // Soap::List
                    EXSelect xSelect = new EXSelect();
                    xSelect.setXSelect("//Item[@xsi:type=\"Dp_Cfg\"][contains(UCPTname,\"nviClaValue\")]");
                    ItemColl itemColl = SmartServer.list(xSelect);
                    if(0 < itemColl.getUCPTfaultCount()) {
                        System.out.printf("List-Response contains %s faults\r\n",itemColl.getUCPTfaultCount());
                    }
                    // just print the returned count of Item-s
                    System.out.println("Items returned = " + itemColl.getItem().size());
                    if(itemColl.getItem().size()> 0) 
                    {
                        // _________________________
                        // Soap::Read
                        ItemDataColl itemDataColl = SmartServer.read(itemColl);
                        if(0 < itemDataColl.getUCPTfaultCount()) 
                        {
                            System.out.printf("Read-Response contains %s faults\r\n",itemColl.getUCPTfaultCount());
                        }
                        // just print some properties
                        for (int i = 0; i <itemColl.getItem().size(); i++)
                        {
                            System.out.print(((DpData)(itemDataColl.getItem().get(i))).getUCPTname()+ " = ");
                            System.out.print(((DpData)(itemDataColl.getItem().get(i))).getUCPTvalue().get(0).getValue() + "(Value Read)" + "\r\n");
                            DpData dpData = (DpData) itemDataColl.getItem().get(i);
                            if(dpData.getUCPTvalue().get(0).getValue().compareTo ("0.0 0")== 0)
                            {
                                dpData.getUCPTvalue().get(0).setValue("100.0 1");
                                dpData.getUCPTvalue().get(1).setValue("ON");
                                itemDataColl.getItem().add(dpData);
                            }
                            else if(dpData.getUCPTvalue().get(0).getValue().compareTo ("100.0 1")== 0)
                            {
                                dpData.getUCPTvalue().get(0).setValue("0.0 0");
                                dpData.getUCPTvalue().get(1).setValue("OFF");
                                itemDataColl.getItem().add(dpData);
                            }
                        }
                        ItemColl writeResponse = SmartServer.write(itemDataColl);
                        if(writeResponse.getUCPTfaultCount()> 0)
                        {
                            // print out error and exit
                            System.out.println("An error occurred:");
                            for (int j = 0; j <itemColl.getItem().size(); j++)
                            {
                                System.out.println("Item: " + itemColl.getItem().get(j).getUCPTname() + ",fault code: " + itemColl.getItem().get(j).getFault().getFaultcode() + ",fault string: " + itemColl.getItem().get(j).getFault().getFaultstring());
                            }
                        }
                        else
                        {
                            // success
                            System.out.println("\r\n" + "Write is successful");
                            for (int j = 0; j <itemColl.getItem().size(); j++)
                            {
                                System.out.print(((DpData)(itemDataColl.getItem().get(j))).getUCPTname()+" = ");
                                System.out.print(((DpData)(itemDataColl.getItem().get(j))).getUCPTvalue().get(0).getValue()+ "(Value Written)" + "\r\n");
                            }
                        }
                    }
                }
                catch (Exception e) 
                {
                    System.out.println(e.getMessage());
                }
        }
        catch (Exception e) 
        {
            System.out.println(e.getMessage());
        }
        finally 
        {
            iLon100 = null;
            SmartServer = null;
        }
    }
} 
```

**校长类：**

```
package com.echelon.sample.client.ilon;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class Principal extends Activity
{
    @Override
    public void onCreate (Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layoutclient);
    }

    public void test (View V)
    {
        TextView tvw_affiche;
        tvw_affiche=(TextView)this.findViewById(R.id.tvw_affiche);
        tvw_affiche.setText("");
        /*********************************************************/
        Client.Recup();
        /*********************************************************/
        tvw_affiche.setText("OK");
    }
} 
```

**ILON100.class：**

```
package com.echelon.wsdl.web_services_ns.ilon100.v4_0.wsdl;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;
import javax.xml.ws.WebServiceException;
import javax.xml.ws.WebServiceFeature;

/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2.7-b73 
 * Generated source version: 2.2
 * 
 */
@WebServiceClient(name = "iLON100", targetNamespace = "http://wsdl.echelon.com/web_services_ns/ilon100/v4.0/wsdl/", wsdlLocation = "file:/C:/Users/WIN7CLIMEL/workspace/ilon.ws.clients/jax-ws/src/wsdl/iLON100.wsdl")
public class ILON100
    extends Service
{

    private final static URL ILON100_WSDL_LOCATION;
    private final static WebServiceException ILON100_EXCEPTION;
    private final static QName ILON100_QNAME = new QName("http://wsdl.echelon.com/web_services_ns/ilon100/v4.0/wsdl/", "iLON100");

    static {
        URL url = null;
        WebServiceException e = null;
        try {
            url = new URL("file:/C:/Users/WIN7CLIMEL/workspace/ilon.ws.clients/jax-ws/src/wsdl/iLON100.wsdl");
        } catch (MalformedURLException ex) {
            e = new WebServiceException(ex);
        }
        ILON100_WSDL_LOCATION = url;
        ILON100_EXCEPTION = e;
    }

    public ILON100() {
        super(__getWsdlLocation(), ILON100_QNAME);
    }

    public ILON100(WebServiceFeature... features) {
        super(__getWsdlLocation(), ILON100_QNAME, features);
    }

    public ILON100(URL wsdlLocation) {
        super(wsdlLocation, ILON100_QNAME);
    }

    public ILON100(URL wsdlLocation, WebServiceFeature... features) {
        super(wsdlLocation, ILON100_QNAME, features);
    }

    public ILON100(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public ILON100(URL wsdlLocation, QName serviceName, WebServiceFeature... features) {
        super(wsdlLocation, serviceName, features);
    }

    /**
     * 
     * @return
     *     returns ILON100PortType
     */
    @WebEndpoint(name = "iLON100httpPort")
    public ILON100PortType getILON100HttpPort() {
        return super.getPort(new QName("http://wsdl.echelon.com/web_services_ns/ilon100/v4.0/wsdl/", "iLON100httpPort"), ILON100PortType.class);
    }

    /**
     * 
     * @param features
     *     A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.
     * @return
     *     returns ILON100PortType
     */
    @WebEndpoint(name = "iLON100httpPort")
    public ILON100PortType getILON100HttpPort(WebServiceFeature... features) {
        return super.getPort(new QName("http://wsdl.echelon.com/web_services_ns/ilon100/v4.0/wsdl/", "iLON100httpPort"), ILON100PortType.class, features);
    }

    private static URL __getWsdlLocation() {
        if (ILON100_EXCEPTION!= null) {
            throw ILON100_EXCEPTION;
        }
        return ILON100_WSDL_LOCATION;
    }
} 
```

**安卓清单：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.echelon.sample.client.ilon"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />   

    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Client"
            android:label="@string/app_name" >
        </activity>   
        <activity
            android:name=".Principal"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />         
            </intent-filter>
        </activity>
     </application>
</manifest> 
```

**Fichier POM.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
 <project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.echelon.es</groupId>
    <artifactId>ilon-ws</artifactId>
    <version>4.03-SNAPSHOT</version>
    <name>ECHELON i.LON SmartServer</name>
    <packaging>jar</packaging>

    <properties>
        <ip-address-ilon>192.168.0.100</ip-address-ilon>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-rt</artifactId>
            <version>2.2.7-promoted-b73</version>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>1.5_r4</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <repositories>
        <repository>
            <id>java.net</id>
            <url>http://download.java.net/maven/1/</url>
            <layout>legacy</layout>
        </repository>
        <repository>
            <id>java.net2</id>
            <url>http://download.java.net/maven/2/</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>java.net2</id>
            <url>http://download.java.net/maven/2/</url>
        </pluginRepository>
    </pluginRepositories>

    <build>
        <!-- To define the plugin version  -->
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>2.6</version>
                </plugin>
            </plugins>
        </pluginManagement>
                <sourceDirectory>src</sourceDirectory>
        <plugins>
              <plugin>
                  <artifactId>maven-compiler-plugin</artifactId>
                  <configuration>
                      <source>1.5</source>
                      <target>1.5</target>
                  </configuration>
              </plugin>
            <!--  CALL: mvn javadoc:javadoc -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.6</version>
            </plugin>

            <!--  CALL: mvn jaxws:wsimport -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxws-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsimport</goal>
                        </goals>
                    </execution>
                </executions>

                <configuration>
                    <verbose>true</verbose>
                    <!-- +++++++++++++++++++++++++++++++++ -->
                    <!--  get the WSDL file from the i.LON -->
                    <!-- +++++++++++++++++++++++++++++++++ -->
                    <!-- wsdlUrls>
                      <wsdlUrl>http://${ip-address-ilon}:80/WSDL/v4.0/iLON100.wsdl</wsdlUrl>
                    </wsdlUrls -->

                    <!-- +++++++++++++++++++++++++++++++++++++++ -->
                    <!--  get the WSDL file from the a directory -->
                    <!-- +++++++++++++++++++++++++++++++++++++++ -->
                    <wsdlDirectory>${basedir}/src/wsdl</wsdlDirectory>
                    <wsdlFiles>                
                        <wsdlFile>iLON100.wsdl</wsdlFile>
                    </wsdlFiles>
                    <!-- packageName>fromwsdl.client</packageName -->
                </configuration>

                <!-- if you want to use a specific version of JAX-WS -->
                <dependencies>
                    <dependency>
                        <groupId>com.sun.xml.ws</groupId>
                        <artifactId>jaxws-tools</artifactId>
                        <version>2.2.7-promoted-b73</version>
                    </dependency>
                </dependencies>            
              </plugin>

              <!-- Don't forget Java 5!!      -->
              <!-- CALL: mvn compiler:compile -->
              <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <verbose>true</verbose>
                        <source>1.5</source>
                        <target>1.5</target>
                    </configuration>
              </plugin>

              <!--  CALL: mvn source:jar -->
              <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-source-plugin</artifactId>
                  <executions>
                      <execution>
                          <id>attach-sources</id>
                          <phase>verify</phase>
                          <goals>
                              <goal>jar</goal>
                          </goals>
                      </execution>
                  </executions>
                  <configuration>
                      <verbose>true</verbose>
                  </configuration>            
              </plugin>          
        </plugins>
    </build>
    <reporting>
        <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.5</version>
        </plugin>
        </plugins>
    </reporting>    
</project> 
```

好的。我提前感谢所有将解决我的问题的人。真挚地

# drupal - Drupal - 无法禁用语言前缀

> ID：13454693
> 
> 赞同：0
> 
> 时间：2012-11-19T13:22:28.187
> 
> 标签：drupal

**背景：**

我正在将 Drupal 7 站点从服务器迁移到另一个站点。在它的新位置，Drupal 安装存在问题，即没有正确提交任何表单。提交任何表格后，信息尚未保存。

我认为这与 URL 中的语言前缀有关。一切都从“http://newsite.dev/admin/modules”指向“http://newsite.dev/en/admin/modules”。我认为 URL 中的这个“en”语言前缀导致了问题。

**问题：**

如何完全禁用语言前缀？

我曾尝试直接在数据库中禁用“语言环境”模块 - 但没有任何乐趣。

是否有任何 Drupal boffins 可以提供帮助？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:18:58.657

只需删除 admin/config/regional/language/edit/en 中的前缀

我认为这是您的默认语言

希望能帮助到你

公关

# python - 如何在 Python 中打印 c_ubyte_Array 对象

> ID：13454695
> 
> 赞同：4
> 
> 时间：2012-11-19T13:22:35.653
> 
> 标签：python, c, printing, ctypes

在 Python 中打印 C 无符号字符数组内容的最佳方法是什么，

如果我使用`print theStruct.TheProperty`

我得到...

`<structs.c_ubyte_Array_8 object at 0x80fdb6c>`

定义是：

`class theStruct(Structure): _fields_ = [("TheProperty", c_ubyte * 8)]`

所需的输出类似于： `Mr Smith`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:03:15.783

假设它是一个以 null 结尾的字符串，您可以将数组转换为 a`char *`并使用它的`value`. 这是一个不是这种情况的示例。

```
>>> class Person(Structure): _fields_ = [("name", c_ubyte * 8), ('age', c_ubyte)]
... 
>>> smith = Person((c_ubyte * 8)(*bytearray('Mr Smith')), 9)
>>> smith.age
9
>>> cast(smith.name, c_char_p).value
'Mr Smith\t' 
```

“史密斯先生”填满了数组，因此转换为`c_char_p`包括下一个字段的值，即 9（ASCII 选项卡），谁知道还有什么，直到它到达一个空字节。

相反，您可以使用以下方法迭代数组`join`：

```
>>> ''.join(map(chr, smith.name))
'Mr Smith' 
```

或者使用字节数组：

```
>>> bytearray(smith.name)
bytearray(b'Mr Smith') 
```

蟒蛇 3：

```
>>> smith = Person((c_ubyte * 8)(*b'Mr Smith'), 9)
>>> bytes(smith.name).decode('ascii')
'Mr Smith' 
```

# javascript - 单击行的Jquery切换元素

> ID：13454696
> 
> 赞同：1
> 
> 时间：2012-11-19T13:22:38.483
> 
> 标签：javascript, jquery

这应该是一个客户列表，您可以在其中单击行以选择它们，然后将它们提交到数据库以进行 cron 作业以获取它们并向它们发送电子邮件。

我正在尝试突出显示行而不是使用复选框，这就是为什么我放置两个隐藏元素，一个用于客户端 ID，另一个 - bool 用于检查是否已单击行。

我想不通的是如何切换特定行的元素值（选中）。

```
<table>
<tbody>
<tr class="contactrow">
<input type="hidden" name="id" value="995"/>
<input type="hidden" name="checked" value="FALSE"/>
<td>Andrew Ostrich</td>
<td>AO Company</td>
<td>7537535</td>
<td>ao@aocompany.com</td>
</tr>
<tr class="contactrow">
<input type="hidden" name="id" value="296"/>
<input type="hidden" name="checked" value="FALSE"/>
<td>Brendon Evans</td>
<td>Institute of Modern Arts</td>
<td>648648468</td>
<td>bevans@ioma.co.uk</td>
</tr>
<tr class="contactrow">
<input type="hidden" name="id" value="421"/>
<input type="hidden" name="checked" value="FALSE"/>
<td>Rudy Thompson</td>
<td>Marine CORP</td>
<td>95939288</td>
<td>Rudee@mcorp.es</td>
</tr>
</tbody>
</table> 
```

​另外， [http://jsfiddle.net/FHjAc/](http://jsfiddle.net/FHjAc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:27:42.790

部分问题是服务器将无法识别已检查哪些客户端 ID。所有这些`input[type=checkbox]`共享相同的`name`属性，该属性用于标识每个参数。

如果将`name`属性更改为`checked[__ID__]`，则可以循环参数并将这些记录提交到数据库。

在 PHP 中，您将执行以下操作。

```
<?php

$checked = $_POST['checked'];

foreach( $checked as $id ) {
  // do something with the $id here
} 
```

## 更新

我没有意识到您正在为选中的字段使用隐藏输入。如果您将其更改为复选框，您的工作应该会容易得多。

**HTML**这就是我标记 HTML 的方式，您可以使用 CSS 来隐藏带有`display: none`.

```
<tr class="contactrow">
  <td>
    <input type="checkbox" name="checked[421]" />
    Rudy Thompson
  </td>
  <td>Marine CORP</td>
  <td>95939288</td>
  <td>Rudee@mcorp.es</td>
</tr> 
```

**jQuery**

```
$(function () {
  $('.contactrow').click(function () {
    var checkbox = $(this).find('input[type=checkbox]');
    checkbox.prop('checked', !checkbox.prop('checked'));
    $(this).toggleClass('contactrow_highlight');
  });  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:33:59.800

我对此进行了测试，它对我有用。

```
$(function () {
    $('.contactrow').click(function () {
        $(this).toggleClass("contactrow_highlight");
        $(this).find("input").each(function(){
            if($(this).attr("name") == "checked"){
                if($(this).val() == "FALSE"){
                    $(this).val("TRUE");
                } else {
                    $(this).val("FALSE");                   
                }
            }
        });
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:34:47.347

给你：http: [//jsfiddle.net/AuYZf/1/](http://jsfiddle.net/AuYZf/1/)

您可以获得单击的行元素的第一个子元素的兄弟姐妹，第三个似乎是所需的元素。然后你可以简单地切换值：

```
var inputElement = this.firstChild.nextSibling.nextSibling.nextSibling;
inputElement.value = (inputElement.value != "true") 
```

（我使用 != 因为字符串“false”仍然评估为 true）
它甚至不使用 jQuery 循环遍历所有内容。

# javascript - 使用 jQuery Mobile 和 PhoneGap 加载动态 JavaScript/HTML

> ID：13454697
> 
> 赞同：0
> 
> 时间：2012-11-19T13:22:42.097
> 
> 标签：javascript, jquery, cordova

我正在使用`Dreamweaver CS6`(with `PhoneGap`)`jQuery Mobile`和 JavaScript 开发一个移动应用程序，该应用程序将收集用户输入的表单数据，将数据转换为 JSON 对象并将其传输到 python Web 服务。移动应用程序的目的是让用户创建一个食品订单，然后将其发送到餐厅。我想向 SO 社区询问什么是处理创建订单逻辑的优雅方式。目前，该逻辑由 HTML 页面中的 JavaScript 定义，示例如下（为简洁起见）：

JavaScript：

```
 var burgerType; //defines burger type eg.cheeseburger,hamburger
    var burgerQueue = new Array(); //holds completed burgers

    //detects if cheeseburger
    $("#cheeseburger").click(function() {
        burgerType="cheeseburger";
    });

    //detects if hamburger
    $("#hamburger").click(function() {
        burgerType="hamburger";
    }); 
```

HTML：

```
 <div data-role="content">
    <ul data-role="listview" data-theme="e" id="burgers">
      <li id="cheeseburger"><a href="#toppings">Cheeseburger</a></li>
      <li id="hamburger"><a href="#toppings">Hamburger</a></li>
    </ul>
  </div> 
```

截图：点击一个汉堡会带你进入[一个让你选择浇头的屏幕](http://i.imgur.com/liXEp.jpg)，没有包括它，因为不认为它是相关的。

我意识到这可能是处理逻辑的一种非常糟糕的方式，因为如果餐厅菜单发生变化，我将不得不修改应用程序，将其重新发布到各自的市场（Play、iTunes 等），并让用户更新它。我想做的最后一件事是因为错误或更改而不得不不断更新应用程序，从而让用户感到沮丧。我知道我可以通过使用驻留在应用程序目录中的外部 javascript 库将逻辑部分从 HTML 中分离出来，但这对不断更新的问题没有帮助。我会将应用程序链接直接链接到网络服务器上的移动应用程序页面（因此我所做的更改无需更新应用程序即可立即看到）但我在另一篇 SO 帖子中读到 Apple 网守不发布基本上是只是一个包裹在应用程序中的网页。我'

回顾一下：尝试使用 jQuery/JavaScript 动态生成用户界面和编码逻辑，而不会因不断更新而让用户感到沮丧。（有点像 jQuery 如何让您热链接到他们的 CDN 托管库）。我意识到这可能会令人困惑，我会澄清提出的任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:24:51.603

您可以将单个事件绑定到多个元素：

```
$("#burgers").on("click", "a" function() {
    var li = $(this).parent();
    burgerType = li.attr("id");

    $.mobile.changePage("#toppings");
    return false;
}); 
```

然后您只需要从数据中生成列表元素，可能基于 ajax 调用。对于这类事情，我通常在应用程序启动时在后台进行 ajax 调用，并保存该调用的先前结果，以便连接更新不会减慢应用程序的启动速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:50:25.700

对于这种事情，您最好使用像 jQuery mobile 这样的 AJAX 导航框架，它可以在页面之间移动而无需重新加载任何内容，而您只有一个真正的 html 文档。

# c# - 如何注册路由区域

> ID：13454699
> 
> 赞同：30
> 
> 时间：2012-11-19T13:22:45.463
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我创建了具有 3 个不同区域的 MVC 应用程序。（管理员、用户、新闻）这是我在 App_Start 目录中的 RouteConfig.cs 文件：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            namespaces: new[] { "TestMvcApplication.Controllers" }
        );
    }
} 
```

这是我的 AdminAreaRegisteration.cs 文件：

```
 namespace TestMvcApplication.Areas.Admin
{
    public class AdminAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "Admin";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Admin_default",
                "Admin/{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                namespaces: new[] { "TestMvcApplication.Areas.Admin.Controllers" }                
            );
        }
    }
} 
```

最后这是我的 Global.asax.cs 文件内容：

```
namespace TestMvcApplication
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
        }
    }
} 
```

我网站的主页已完全加载并且可以正常工作。但是路由未检测到管理员或其他区域的主页，我给出了以下错误消息：

```
Server Error in '/' Application.
The resource cannot be found.
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.

Requested URL: /Admin/Home 
```

我怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T13:44:34.623

`AreaRegistration.RegisterAllAreas()`在你的某个地方打电话`RegisterRoutes`

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    AreaRegistration.RegisterAllAreas();
    ....
} 
```

**提示：**使用[RouteDebugger 2.0](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)或[Routing Debugger](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)之类的工具来调查您的路线

获取最新的 NuGet： [用于 MVC 的 Route Debugger](https://www.nuget.org/packages/routedebugger/)或[用于 WepApi 的 RouteDebugger](http://www.nuget.org/packages/WebApiRouteDebugger/)

这是关于[如何使用 WebApi 设置和使用 RouteDebugger 的教程](http://blogs.msdn.com/b/webdev/archive/2013/04/04/debugging-asp-net-web-api-with-route-debugger.aspx)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-19T13:53:06.110

从提供的代码中，我可以看到 2 个潜在问题：

1.  你没有打电话给[RegisterAllAreas](http://msdn.microsoft.com/en-us/library/ee402951%28v=vs.108%29.aspx)
2.  您似乎没有覆盖[AreaName](http://msdn.microsoft.com/en-us/library/system.web.mvc.arearegistration.areaname%28v=vs.108%29.aspx)属性

尝试将您的代码更改为：

**全球.asax**

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    AreaRegistration.RegisterAllAreas();
    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        namespaces: new[] { "TestMvcApplication.Controllers" }
    );
} 
```

**管理区**

```
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Admin";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-23T23:21:53.700

只需使用静态方法**RegisterAreas()**在这里代码创建一个静态类名称它**AreaConfig ：**

 **```
public static class AreaConfig
{
    public static void RegisterAreas()
    {
        // 
        // Admin area . . .

        var adminArea = new AdminAreaRegistration();
        var adminAreaContext = new AreaRegistrationContext(adminArea.AreaName, RouteTable.Routes);
        adminArea.RegisterArea(adminAreaContext);

        // 
        // Default area . . .

        var defaultArea = new DefaultAreaRegistration();
        var defaultAreaContext = new AreaRegistrationContext(defaultArea.AreaName, RouteTable.Routes);
        defaultArea.RegisterArea(defaultAreaContext);
    }
} 
```

然后在 Global.asax.cs 文件中调用它，如下所示：

```
protected void Application_Start()
    {
        . . .

        AreaConfig.RegisterAreas();

        . . .
    } 
```**

# jquery - 侧边栏中的延迟加载 - 不起作用，缺少一些琐碎的东西

> ID：13454701
> 
> 赞同：0
> 
> 时间：2012-11-19T13:22:51.070
> 
> 标签：jquery, lazy-loading

我似乎在这里遗漏了一些非常微不足道的东西......我无法让lazyload在右侧的侧边栏上工作。有什么猜测吗？

链接在这里：

[APM v2](http://arquitectospelomundo.com/v2/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:29:19.340

在设置侧边栏 innerHTML 后尝试添加延迟加载。

```
document.getElementById("side_bar").innerHTML = side_bar_html;
$("img.lazy").lazyload({         
  effect : "fadeIn",
  container: $("#side_bar")
}); 
```

# vim - Vim 自动缩进在多行注释后表现异常

> ID：13454702
> 
> 赞同：1
> 
> 时间：2012-11-19T13:22:56.853
> 
> 标签：vim, macvim, auto-indent

我有这段 PHP 代码：

```
 } elseif($uri->next() == "list"){
      bla();
      /*****************************************
       * Get empty relation by type             *
       * ====================================== *
       * GET /api.php?/relations/(string)/list  *
       ******************************************/
  //get a list of all relations with the specified type.
  $rel->giveRelationsOfType($relationType);
    } elseif($uri->end()){ 
```

它的缩进完全按照上面显示的方式自动完成。我当然希望我的 elseif 块中的所有内容都缩进到与“bla”相同的列，如下所示：

```
 } elseif($uri->next() == "list"){
      bla();
      /*****************************************
       * Get empty relation by type             *
       * ====================================== *
       * GET /api.php?/relations/(string)/list  *
       ******************************************/
      //get a list of all relations with the specified type.
      $rel->giveRelationsOfType($relationType);
    } elseif($uri->end()){ 
```

但是当我选择整个块（可视模式）并按时`=`，缩进变回我的第一个示例的缩进。我尝试了上述几种变体；多行注释似乎是奇怪的缩进所依赖的东西。

我的格式选项（`set fo?`）是`2qwcbro`. （按`:h fo-table`信息）在我的`vimrc`我有

```
set smartindent
set tabstop=2
set shiftwidth=2
set expandtab 
```

但是，`set smartindent`似乎被我的文件类型或其他东西关闭了，即使在`{`. 打开 smartindent 没有帮助。

# c++ - 虚拟基类在多级继承中有什么用？

> ID：13454703
> 
> 赞同：1
> 
> 时间：2012-11-19T13:22:58.997
> 
> 标签：c++, virtual, base-class, multi-level

这是一道考试题。

> 编写一个程序来演示虚拟基类在多级继承中的使用。

我想不出虚拟基类实际上会对**多级继承的特定情况**产生任何影响的任何情况。

我能想到的问题的唯一**可能答案是显示其中包含多级继承的混合继承（菱形）。**

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:27:54.363

你回答了你的问题。答案是钻石的情况。对于使用的原因和原因，请参阅这个问题：
[在 C++ 中，什么是虚拟基类？](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)

# port - 以管理员权限运行 IIS Express

> ID：13454705
> 
> 赞同：36
> 
> 时间：2012-11-19T13:23:02.453
> 
> 标签：port, iis-express, administration, hostname, elevated-privileges

以前有人问过这个问题，但被关闭为“不是一个真正的问题”

[https://stackoverflow.com/questions/7450813/how-to-run-a-site-with-administrative-privileges-in-iis-express-7-5](https://stackoverflow.com/questions/7450813/how-to-run-a-site-with-administrative-privileges-in-iis-express-7-5)

但是我认为这是一个真正的问题，因为我也需要这样做，有 MS 文档解释了如何“[在没有管理权限的情况下运行 IIS Express](http://www.iis.net/learn/extensions/using-iis-express/running-iis-express-without-administrative-privileges) ”，但由于这是默认运行的方式，因此坦率地说，对本文的需求让我感到困惑。但是我不知道如何以管理员权限运行它。

当我尝试启动我的 VS2012 网站时，我从 IIS express 收到以下错误消息：“无法启动网站，因为需要管理权限才能绑定到主机名或端口”，并提供了有关在没有管理员的情况下运行它的 MS 文档的链接特权。

我最终要做的是将我的开发站点在本地运行为 http://vs2012:nnnnn，这样我就可以附加提琴手调试器（由于使用 localhost 时绕过 IE 中的代理）

这曾经工作得很好，今天早上我重新安装了窗户，现在撞到了一堵砖墙！

有谁知道如何给 IIS express 管理员权限，如错误消息中所示？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2016-07-18T07:58:19.430

**对于 Visual Studio 2015 和 2012，此解决方案将起作用。**

1.  转到 Visual Studio 中的解决方案资源管理器，右键单击 Web 项目并选择“卸载项目”
2.  接下来在同一个项目上，右键单击并选择“编辑项目文件”</li>
3.  找到
    `<DevelopmentServerPort>0</DevelopmentServerPort><IISUrl>http://localhost:56058/</IISUrl>`
    xml 标签并删除它们。
4.  重新加载项目并运行。

要遵循的图像：

[![在此处输入图像描述](../Images/12ff98a8f131252b08e2bf31e961a1df.png)](https://i.stack.imgur.com/gn4My.jpg)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-19T13:30:03.340

我已经解决了。

我将 Visual Studio 切换为使用管理权限运行，还找到了 IIS Express 的 .exe 并将其设置为始终使用管理权限运行。我不是 100% 肯定需要第二个，但无论如何都做了。

我希望这可以帮助其他遇到同样问题的人。

*编辑*

(19/08/2013)

这似乎只在 Windows 7 中有效，在 Windows 8 上，我最终放弃了，现在使用全面的 IIS 来完成我的所有开发工作。

*编辑*

(07/06/2018)

@Tarostar（下面的评论），让它在 Windows 10 VS2017 上运行，而其他一些人在使用相同的方法之前已经让它在 Windows 8 上运行。所以我可能在我的 Windows 8 机器上做错了什么。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-05T15:58:17.420

就我而言，该站点在没有管理员权限的情况下工作，并且在某些时候停止并仅与管理员一起工作。

端口号高于不需要管理员权限的 1024，但 Visual Studio 2015 拒绝运行没有管理员权限的站点。

我想通了，这是因为它被添加到

```
netsh http show urlacl 
```

这向我展示了

```
Reserved URL            : http://*:15888/
        User: \Everyone
            Listen: Yes
            Delegate: No
            SDDL: D:(A;;GX;;;WD) 
```

因此，就我而言，我已将其从该列表中删除，并且它再次起作用。这是删除的命令：

```
netsh http delete urlacl http://*:15888/ 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-12T11:38:15.953

虽然有点晚了，并且不是对“如何以管理权限运行”的问题的回答，但这可能是对所述问题/错误的解决方案：

> 无法启动网站，因为需要管理权限才能绑定到主机名或端口

如[running-iis-express-from-the-command-line](http://www.iis.net/learn/extensions/using-iis-express/running-iis-express-from-the-command-line)中所述，使用的端口号可能需要以下管理权限：

> 如果要在编号为 1024 或更少的端口上运行 IIS Express，则必须具有管理员用户权限。

因此，如果您可以在高于 1024 的端口号上运行，您可能根本不需要管理权限。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-02T10:31:34.357

这不是授予 ISS 管理员权限的方法，而是解决帖子中的错误的方法。一天早上我开始看到这个错误，并通过关闭我电脑的移动热点解决了这个问题。显然，与其他设备共享您的互联网可能会导致“无法启动网站，因为需要管理权限才能绑定到主机名或端口”错误。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-01T04:02:48.440

1）找到CSPROJ文件。这是在您的项目文件中 2）CSPROJ 文件在记事本中打开（拖动到记事本） 3）搜索两行（按 Ctrl+F 并键入第一个单词，例如：）

```
<DevelopmentServerPort>0</DevelopmentServerPort>
<IISUrl>http://localhost:57680/</IISUrl> 
```

4）删除两行。5) 保存 CSPROJ 文件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-02T23:37:35.960

我知道这可能为时已晚，但其他解决方法都不适合我。所以这就是我所做的。我正在使用 Web API 2 并且 IIS Express 不时启动，并且在我将项目加载到新解决方案中之后它会起作用。但是，我找到了更好的解决方案。在 csproj 文件中删除 WebProjectProperties 下的这两个节点，您将全部设置好。

*   开发服务器VPath
*   IISUrl

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-06T07:05:25.147

这对我有用！

在 VS 中，您可以右键单击项目，选择**Unload Project**，然后再次右键单击并选择 Edit ProjectName.csproj。

删除**DevelopmentServerPort**和**IISUrl**标记。

之后，您可以右键单击项目并选择**重新加载项目**以重新开始工作。删除 DevelopmentServerPort 和 IISUrl 标签会导致 VS 重新生成端口号，之后项目运行良好。

我做的另一件事是打开我的 Documents\IISExpress\Config\applicationHost.config 文件并删除旧站点，但我不确定是否有必要

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-01-31T02:09:20.903

**我通过关闭我的 VPN**解决了​​（解决）这个错误。

不确定为什么运行 vpn 会导致错误“无法启动网站，因为需要管理权限才能绑定到主机名或端口”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-01T09:50:08.860

Morvael 建议的方法的一个小补充 - 即使您在为 Visual Studio 和 IISExpress 分配管理员权限后遇到错误，也请尝试在此之后重新启动系统。为我工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-10T14:05:37.917

您可以在以下位置更改文件：

```
%userprofile%\Documents\IISExpress\config\applicationhost.config 
```

转到文件的这一部分：

```
<system.applicationHost>
     <applicationPools>
          <applicationPoolDefaults managedRuntimeLoader="v4.0" > 
```

并为您的应用程序池添加一个标签，指定它应该在其下运行的用户名和密码：

```
<processModel userName="Uname" password="Pword" /> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-28T13:42:29.383

我最终通过右键单击 Visual Studio 并单击“以管理员身份运行”解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-24T15:12:44.137

从 2018 年开始......我在 VS 2017 上遇到了这个问题并收到了相同的错误消息。为了解决这个问题，我将项目配置中的项目 URL 从[http://localhost:10243](http://localhost:10243)更改为[http://localhost:10244](http://localhost:10244)。一旦我确认我想要创建虚拟目录，我就可以在浏览器中启动我的项目。我没有在管理员模式下运行 VS。希望这可以帮助！

# facebook - 面临集成 Facebook stream.share 对话框的问题

> ID：13454707
> 
> 赞同：2
> 
> 时间：2012-11-19T13:23:09.930
> 
> 标签：facebook, stream, share

实现共享对话框时面临问题。

如果我指定 Facebook 帖子 URL，我没有得到正确的图像，对话框上的描述只显示 url： http: [//www.facebook.com/132203113509196/posts/441790742550430](http://www.facebook.com/132203113509196/posts/441790742550430)

当前片段用于共享对话框。

```
FB.ui({
    method: 'stream.share',
    u: post_url,
}, function(response){ console.log(response); } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:31:26.990

好吧，这不是它的工作原理，该 url 中没有 Open Graph 标签。另外，我认为“stream.share”已被弃用，最好使用“feed”：

> [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

当然，您必须自己定义所有参数，但这也使其非常灵活。例如，您可以使用 Graph API 读取数据并将其用于提要对话框：

> [https://developers.facebook.com/tools/explorer/?method=GET&path=132203113509196_441790742550430](https://developers.facebook.com/tools/explorer/?method=GET&path=132203113509196_441790742550430)

# c# - 没有文件怎么玩？

> ID：13454709
> 
> 赞同：2
> 
> 时间：2012-11-19T13:23:21.553
> 
> 标签：c#, .net, audio, naudio

我想在不从文件加载/流式传输的情况下播放响铃警报。

我可以在代码中嵌入它的信号或音调吗？我正在使用`NAudio`.

我的目的是通过删除 IO 操作来提高性能。

我不想使用嵌入式资源。只有我想在代码中生成响铃警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:11:41.780

使用 NAudio，您可以使用以下选项来执行此操作：

*   从流（在内存中）播放文件。您在其他答案中有此代码，实际上您甚至不需要 NAudio 来完成此任务，因为`System.Media.SoundPlayer`就足够了）。
*   生成将要播放的信号（无需将其保存在某处）。
*   播放一串声音命令（就像我们在 BASIC的*美好时光*中所做的那样）。`play`

## 产生信号

第一种情况的示例来自 MSDN 上的[Charles Petzold](http://msdn.microsoft.com/en-us/magazine/ee309883.aspx)文章（但也请查看[NAudio 文档](http://mark-dot-net.blogspot.it/2009/10/playback-of-sine-wave-in-naudio.html)）：

```
class SineWaveOscillator : WaveProvider16 {
  double phaseAngle;

  public SineWaveOscillator(int sampleRate): 
    base(sampleRate, 1) {
  }

  public double Frequency { set; get; }
  public short Amplitude { set; get; }

  public override int Read(short[] buffer, int offset, 
    int sampleCount) {

    for (int index = 0; index < sampleCount; index++) {
      buffer[offset + index] = 
        (short)(Amplitude * Math.Sin(phaseAngle));
      phaseAngle += 
        2 * Math.PI * Frequency / WaveFormat.SampleRate;

      if (phaseAngle > 2 * Math.PI)
        phaseAngle -= 2 * Math.PI;
    }
    return sampleCount;
  }
} 
```

然后播放音调的代码很简单：

```
SineWaveOscillator osc = new SineWaveOscillator(44100);
osc.Frequency = 440;
osc.Amplitude = 8192;

WaveOut waveOut = new WaveOut();
waveOut.Init(osc);
waveOut.Play(); 
```

## 播放 MIDI

对于第二种情况（播放一串 MIDI 命令），请再次查看[Charles Petzold 的另一篇文章](http://msdn.microsoft.com/en-us/magazine/ee336028.aspx)。他的`MidiStringPlayer`课程提供了你需要的一切（但你可能需要去掉 WPF 代码才能在你想要的地方使用它）。使用 NAudio 播放 MIDI 的基本代码是：

```
using (MidiOut midiOut = new MidiOut(0))
{
    midiOut.Send(MidiMessage.StartNote(60, 127, 0).RawData);
    Thread.Sleep(1000);
    midiOut.Send(MidiMessage.StopNote(60, 0, 0).RawData);
    Thread.Sleep(1000);
} 
```

如果您确实需要从字符串中播放音符，那么您必须对其进行解析，代码太长，无法在此处发布，但在链接中您会找到所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:05:38.190

**对于 NAudio 解决方案看起来像这样**

Test.Properties.Resources.aaa 这是 mp3 的路径

```
using (var ms = new MemoryStream(Test.Properties.Resources.aaa))
using (var rdr = new NAudio.Wave.Mp3FileReader(ms))
using (var wavStream = NAudio.Wave.WaveFormatConversionStream.CreatePcmStream(rdr))
using (var baStream = new NAudio.Wave.BlockAlignReductionStream(wavStream))
using (var waveOut = new NAudio.Wave.WaveOut(NAudio.Wave.WaveCallbackInfo.FunctionCallback())) {
   waveOut.Init(baStream);
   waveOut.Play();
   while (waveOut.PlaybackState == NAudio.Wave.PlaybackState.Playing) {
      System.Threading.Thread.Sleep(100);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:48:10.427

您可以通过将任何类型的文件添加到资源中来将其嵌入到您的项目中。

在 Visual Studio 中，您可以通过资源 --> 添加资源 --> 添加现有文件来执行此操作。

在我的例子中，我将资源文件命名为 mySound。

`SoundPlayer`然后您可以通过添加以资源为参数的文件来打开文件。

例如

```
 SoundPlayer mysoundplayer = new SoundPlayer(MyAssemblyName.Properties.Resources.mySound);
    mysoundplayer.Play(); 
```

# mysql - mysql 自定义 order by 混合数据类型

> ID：13454715
> 
> 赞同：5
> 
> 时间：2012-11-19T13:23:44.870
> 
> 标签：mysql, sql-order-by

在以下 mysql 查询中，我使用自定义 order by 语句，因此我可以按特定顺序而不是字母顺序显示各种大小：

```
select distinct size 
from product p left join productsizes ps 
             on p.productcode = ps.size_prodcode 
order by field(size, 'XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', 'XXXL') 
```

如果某些产品也有数字尺寸，我该如何编写顺序，以便将数字尺寸与自定义顺序一起按升序排列？

所需输出的示例：

> 30、32、34、S、M、L

或者

> S、M、L、30、32、34

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:27:24.740

[`FIELD()`](http://dev.mysql.com/doc/en/string-functions.html#function_field)`0`未找到搜索字符串时返回。所以：

```
ORDER BY FIELD(size, 'XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', 'XXXL'), size 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:28:50.830

尝试

```
ORDER BY (CASE WHEN sizes REGEXP '(\d)+' THEN 0 ELSE 1 END) ASC,
         field(sizes, 'XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL', 'XXXL') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:29:10.380

您应该尝试使用包含所有大小的枚举字段。它将保持其排序顺序。

```
CREATE TABLE ... (
  ...
  size ENUM ('30', '32', '34', 'S', 'M', 'L')
  ...
); 
```

或者

```
CREATE TABLE ... (
  ...
  size ENUM ('S', 'M', 'L', '30', '32', '34')
  ...
); 
```

# java - 如何使用 spring 和 jquery 设置真正的跨域策略

> ID：13454719
> 
> 赞同：5
> 
> 时间：2012-11-19T13:23:46.810
> 
> 标签：java, jquery, spring-mvc, access-control

我是网络开发方面的菜鸟，在网络上苦苦挣扎之后，我找到了解决方案。我分享它是因为我觉得它没有很好的文档记录并且可以被其他人使用，并且因为我需要一些反馈。

我想为特定域提供对 API 的访问权限。

首先，我尝试设置请求的标头，但由于两个原因它根本不起作用。

第一个原因是我不允许在 crossdomain.xml 中使用它：

```
 <cross-domain-policy xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.adobe.com/xml/schemas/PolicyFile.xsd">
          <allow-http-request-headers-from domain="domain1WithoutSlashAtTheEnd" headers="*"/>
          <allow-http-request-headers-from domain="domain2WithoutSlashAtTheEnd" headers="*"/>
    </cross-domain-policy> 
```

第二个原因是我试图设置“access-control-allow-origin”标头，而它没用。任何像这样的自定义标题都会被忽略。实际上，服务器不需要任何那种东西，他的默认行为允许我获取调用的来源（域），我可以在过滤器中处理它，如下所示：

```
 String origin = hsRequest.getHeader("Origin");
    if (allowedDomainList.contains(origin)) {
      hsResponse.setHeader("Access-Control-Allow-Origin", origin);
    } else {
      throw new SomeException("domain not allowed");
    } 
```

其中“allowedDomainList”是一个字符串列表，我在其中提供了我允许访问我的 API 的所有域。它似乎工作正常。你怎么看待这件事？您能否更具体地了解：

```
 headers="*" 
```

也许只说“访问控制允许来源”。然后我看到有一个“安全”属性，我不知道如何处理它。

我已经拥有的代码也有问题：

```
 <!DOCTYPE cross-domain-policy 
    SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
      <cross-domain-policy>
        <allow-access-from domain="*" />
      </cross-domain-policy> 
```

我想知道它如何干扰我的政策行为。似乎它没有影响，但我对 crossdomain.xml 非常不清楚。

最后一点是关于 jQuery (http://api.jquery.com/jQuery.ajax/)。如果我们无法在服务器端获取标头，为什么 jQuery 有设置标头的功能？另外，它有两种“给予”标题的方式：使用“beforeSend”和“headers”。这两点对我来说没有意义，正如你在上面看到的，这让我最终白白浪费了很多时间！

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T20:59:04.990

与其考虑如何允许特定域访问您的 api，也许这些其他域应该以不同的方式访问您的 api。

如果其他域从那里的 Web 服务器而不是他们的客户端发出 Web 请求，那么您根本不必担心跨域脚本。

其他域的客户端可以发布到它自己的 Web 服务器，向您的服务器发出 Web 请求并将结果传递回他们的客户端。

此外，如果您担心安全性，有很多方法可以保护您的 api，而无需维护可以访问的域列表。

# c# - 多个主机上的 Couchbase memcached 存储桶未获得所有结果

> ID：13454720
> 
> 赞同：0
> 
> 时间：2012-11-19T13:23:51.280
> 
> 标签：c#, memcached, couchbase

我正在使用 couchbase memcached 存储桶来替代我们旧的 memcached 缓存。我在同一个集群上也有一个沙发底座桶。

集群有两个节点，我使用的配置非常基本。

```
<couchbase>
    <CouchBaseBucket>
      <servers bucket="CouchBaseBucket" bucketPassword="password">
        <add uri="http://10.100.10.97:8091/pools"/>
        <add uri="http://10.100.10.98:8091/pools"/>
      </servers>
    </CouchBaseBucket>
    <MemcachedBucket>
      <servers bucket="MemcachedBucket" bucketPassword="password">
        <add uri="http://10.100.10.97:8091/pools"/>
        <add uri="http://10.100.10.98:8091/pools"/>
      </servers>
    </MemcachedBucket>    
  </couchbase> 
```

（多桶配置是根据此处的[Couchbase multiple buckets in .NET app.config](https://stackoverflow.com/questions/10554175/couchbase-multiple-buckets-in-net-app-config)中的 SO 帖子完成的）

问题是我并不总是对我刚刚插入的条目进行缓存命中（但有时我会这样做）。整个存储桶只有 2 个可用 GB 中的 4-5 个项目，键值对由一个 20 个字符的键和一个 Guid 值组成，因此驱逐应该不是问题。

当我在只有一个主机的测试设置中尝试这个时，我从来没有遇到过这个问题，所以我怀疑这可能与 NodeLocator 有关，但是它应该是默认的 KetamaNodeLocator，因为我没有在配置。

我使用的客户端是 Couchbase .NET 客户端库，Assembly 版本 1.1.6.0，我的服务器是 couchbase server 1.8.1

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:37:49.960

已解决，与多台主机无关。嗯……差不多。

问题是其中一位主持人的时钟在未来两个小时后关闭。＃我的天啊

我认为这对 Couchbase 来说是个问题，因为它假设/要求所有涉及的服务器（运行服务器的服务器和运行客户端的服务器）必须同步时钟。

无论如何，也许这可以节省一些可怜的灵魂几个小时的调查

# c# - 如何修改 KeyValuePair 值？

> ID：13454721
> 
> 赞同：93
> 
> 时间：2012-11-19T13:23:54.360
> 
> 标签：c#, .net, key-value

当我尝试修改项目的值时遇到问题，因为它只是一个只读字段。

```
KeyValuePair<Tkey, Tvalue> 
```

我尝试了不同的选择，例如：

```
Dictionary<Tkey, Tvalue> 
```

但我也有同样的问题。有没有办法将值字段设置为新值？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-11-19T13:27:34.993

你不能修改它，你可以用一个新的替换它。

```
var newEntry = new KeyValuePair<TKey, TValue>(oldEntry.Key, newValue); 
```

或字典：

```
dictionary[oldEntry.Key] = newValue; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-29T14:16:54.587

在这里，如果你想让 KeyValuePair 可变。

制作一个自定义类。

```
public class KeyVal<Key, Val>
{
    public Key Id { get; set; }
    public Val Text { get; set; }

    public KeyVal() { }

    public KeyVal(Key key, Val val)
    {
        this.Id = key;
        this.Text = val;
    }
} 
```

所以我们可以让它在 KeyValuePair 中的任何地方使用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-19T13:27:28.533

`KeyValuePair<TKey, TValue>`是不可变的。您需要使用修改后的键或值创建一个新的。你接下来实际做什么取决于你的场景，以及你到底想做什么......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-20T10:08:57.397

KeyValuePair 是不可变的，

```
namespace System.Collections.Generic
{
  [Serializable]
  public struct KeyValuePair<TKey, TValue>
  {
    public KeyValuePair(TKey key, TValue value);
    public TKey Key { get; }
    public TValue Value { get; }
    public override string ToString();
  }
} 
```

如果您要更新 KeyValuePair 中的任何现有值，则可以尝试删除现有值，然后添加修改后的值

例如：

```
var list = new List<KeyValuePair<string, int>>();
list.Add(new KeyValuePair<string, int>("Cat", 1));
list.Add(new KeyValuePair<string, int>("Dog", 2));
list.Add(new KeyValuePair<string, int>("Rabbit", 4));

int removalStatus = list.RemoveAll(x => x.Key == "Rabbit");

if (removalStatus == 1)
{
    list.Add(new KeyValuePair<string, int>("Rabbit", 5));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-29T08:49:55.740

```
Dictionary<long, int> _rowItems = new Dictionary<long, int>();
  _rowItems.Where(x => x.Value > 1).ToList().ForEach(x => { _rowItems[x.Key] = x.Value - 1; }); 
```

> 对于 Dictionary 我们可以根据某些条件以这种方式更新值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-11T15:52:52.200

您不能修改 KeyValuePair，但可以像这样修改字典值：

```
foreach (KeyValuePair<String, int> entry in dict.ToList())
{
    dict[entry.Key] = entry.Value + 1;
} 
```

或像这样：

```
foreach (String entry in dict.Keys.ToList())
{
    dict[entry] = dict[entry] + 1;
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-27T08:52:25.123

`KeyValuePair<TKey, TValue>`是一个结构体，而 C# 中的结构体是值类型，并且被提到是不可变的。原因很明显，`Dictionary<TKey,TValue>`应该是高性能的数据结构。使用引用类型而不是值类型会使用过多的内存开销。与字典中直接存储的值类型不同，此外，将为字典中的每个条目分配 32 位或 64 位引用。这些引用将指向入口实例的堆。整体性能将迅速下降。

Microsoft 选择 struct over class 的规则`Dictionary<TKey,TValue>`满足：

✔️ 如果类型的实例很小且通常短命或通常嵌入在其他对象中，请考虑定义结构而不是类。

❌ 避免定义结构，除非该类型具有以下所有特征：

*   它在逻辑上表示单个值，类似于原始类型（int、double 等）。
*   它的实例大小小于 16 个字节。
*   它是不可变的。
*   它不必经常装箱。

# javascript - AngularJS：将指令转换为过滤器，并且仍然可以轻松访问 DOM

> ID：13454724
> 
> 赞同：1
> 
> 时间：2012-11-19T13:24:01.147
> 
> 标签：javascript, jquery, angularjs

从我问过的上一个问题（http://stackoverflow.com/q/13383552/740318）我从创建一个设计不佳的过滤器到一个（仍然很糟糕但有效的）指令，这样做，我意识到它应该在正确实施时作为过滤器完成。现在奇怪的部分是（以我有限的理解）我将不得不重新建立一些最初实现的“hackish”技术，以使过滤器在转换时工作。

该指令是这样的：

```
widget.directive('truncate', function() {
  return {
    restrict: 'A',
    replace: true,
    // {{child.display}} will be a truncated copy of child.name
    template: '<a class="entity-name" href="{{child.url}}" title="{{child.name}}">{{child.display}}</a>',
    link: function(scope, element, attr) {
      var widthThreshold = $(element).parent().parent().width() * 0.85,
          // get the font-size without the 'px' at the end, what with media queries effecting font
          fontSize = $(element).css('font-size').substring(0, $(element).css('font-size').lastIndexOf('px')),
          sizeRatio = 29760/20621,
          characterCount = Math.floor((widthThreshold / fontSize) * sizeRatio);

      scope.$watch('child', function(val) {
        // Truncate it and trim any possible trailing white-space 
        var truncatedName = $.trim(scope.child.name.substring(0, characterCount));
        // Make sure characterCount isn't > the current length when accounting for the ...
        if (characterCount < scope.child.name.length + 3) {
          scope.child.display = truncatedName + '...';
        }
      });
    }
  }
}); 
```

为简单起见，我使用 jQuery 来获取`.width()`元素父级的父级。这给了我必须使用的总屏幕宽度。根据上述值（以及诸如 font-size CSS 属性之类的东西），我截断字符串以尽可能合理地显示，然后以三个句点（“...”）结束。这很简单，因为元素被传递给指令，我可以简单地使用`$(element)`jQuery 来获取标识符并解决它。

现在使用过滤器，我仅限于传入的字符串，并且没有像使用指令那样的元素。以我有限的知识，在过滤器中完成此操作的唯一方法是`$('a:contains("' + name + '")')`使用之前实现的原始（并且可能是过程密集型）方法（在上面提到的上一个问题中），或者可以动态地为每个方法分配一个 id`<a>`并传递它进入过滤器。也许类似于（未经测试的伪代码，希望它能够理解这一点）：

```
<script>
function entityController($scope, $http) {
  $http.get('/path/to/json').success(function(res) {
    /* Sample return JSON ("uuid" is a unique database stored identifier):
     * {
     *   children: [
     *     { uuid:"123", url:"path/to/file", name:"File Name", display:"File Name" },
     *     { uuid:"234", url:"path/to/file2", name:"Second File Name", display:"Second File Name" },
     *     ...
     *   ]
     * }
     */
    $scope.children = res.children
  });
}
</script>
<body class="ng-controller:entityController" ng-controller="entityController">
  <div ng-repeat="child in children">
    <!-- Not sure if {{child.name | truncate:uuid}} would work, hopefully it conveys the point -->
    <a id="{{child.uuid}}" href="{{child.url}}" title="{{child.name | truncate:uuid}}">{{child.display}}</a>
  </div>
</body> 
```

现在，如果我想通过 jQuery 访问它，我将不得不通过一些 hackish 来复制上述指令的功能，例如：

```
var app = angular.module('app', []);

app.filter('truncate', function() {
  return function(str, uuid) {
    var widthThreshold = $('#' + uuid).parent().parent().width() * 0.85,
        fontSize = $('#' + uuid).css('font-size').substring(0, $('#' + uuid).lastIndexOf('px')),
        ...
}); 
```

它似乎从那里螺旋式下降，在那里我继续查询 DOM 以获取越来越多的信息，这些信息让我思考指令是否是不正确的（但“更干净”，如果它曾经是这样的话）方法。使用过滤器时，是否有适当的方法来访问 DOM 属性，例如父元素的宽度或字体大小，而不必滥用 jQuery，并增加我的语法只是为了访问过滤器中的 DOM ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:07:37.940

AFAIK，没有办法通过角度将 $element 传递给过滤器。指令是用于 DOM 操作的。虽然您可能*觉得*您只是在尝试缩短范围内的字符串，但您实际上是在尝试操纵添加到 DOM 中的内容，因此该指令是正确的选择，IMO。

也就是说，您是否查看过 CSS [text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)？它可能会在没有 JavaScript 的情况下完成您想要做的事情。

# html - 调整大小时更改跨度位置：Twitter Bootstrap

> ID：13454726
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:14.743
> 
> 标签：html, css, twitter-bootstrap, responsive-design

在 Twitter Bootstrap 中，我连续使用了 span5 和 span7。当我将浏览器调整为移动布局时，span5 保持在顶部，而 span7 低于 span5。我希望 span7 保持在顶部，而 span5 低于它。

我怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:56:46.093

颠倒它们在 DOM 树中的顺序以获得：

```
<div class="span7"></div>
<div class="span5"></div>

```

...然后`float: right`为 span5 和 span7 设置。您可以为此使用特定的 CSS 类名称。

这样，在较大的显示器上，span5 位于左侧，span7 位于右侧，在移动设备上 span7 位于上方，span5 位于下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:34:28.690

为了实现这样的目标，您需要稍微操作一下 DOM 结构。如果可能的话，我首先建议尝试“破解”页面结构。我的意思是；是否可以将第一个放在 DOM 中，然后左右`span7`浮动？这将允许您在任何屏幕尺寸下以正确的顺序显示它们，并且您可以使用所需尺寸的媒体查询来修复浮动。`span7``span5`

否则，这听起来像是 jQuery 的工作。jQuery 将允许您动态操作 DOM 元素，您可以轻松编写一个脚本，该脚本在某个窗口宽度处处理两个元素的 DOM 位置。

# jquery - JQuery, Draggable 和 Droppable - 找到一个 Droppable，我得到了 ID

> ID：13454728
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:23.237
> 
> 标签：jquery, jquery-droppable, jquery-draggable

当 Draggable 停止事件正在运行时，我需要找到一个可放置的控件，并且我得到了一个 ID。这可能吗？所以基本上我的想法是这样的：当“out”函数运行时，我存储 dropId。然后，如果要还原项目，我需要将旧的 Droppable 设置为仅接受还原的 Draggable。

这是我的代码的一部分：

```
 var dropId;
        $('.droppable').droppable
        ({
            hoverClass: "ui-state-active",
            drop: itemDrop,
            out: function (event, ui) {
                $(this).droppable('option', 'accept', '.draggable');
                ui.draggable.zIndex = 6000
                dropId = $(this).attr("id");
            },

        $('.draggable').draggable
        ({
            revert: 'invalid',
            cursor: 'move',
            zIndex: 5000,
            stop: function (event, ui) {
                var draggableId = $(this).attr("id");
                if (event.reverted) { 
                   // dropID.droppable('option', 'accept', draggableId), something lite this
                }
            }

        }); 
```

我的 itemDrop 函数基本上更新了数据库，并设置了这个： $(this).droppable('option', 'accept', ui.draggable);

这在某种程度上是我在还原项目时所追求的。

希望我有点清楚！如果没有，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:48:25.970

你需要在你的代码中做一些小的改动，检查这个

```
 $("#" + dropId).droppable('option', 'accept', "#" + draggableId); 
```

# list - 将列表（int 值）与 1 个 int 进行比较

> ID：13454729
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:25.960
> 
> 标签：list

我需要将 ID 与列表进行比较.. 但不知何故它不起作用

```
<%@ page import="java.net.URLEncoder, java.util.ArrayList, java.util.HashMap" %>
<%
    int someID = 1500;
    int someList[] = new int[]{1296, 1297, 1298, 1299, 1500};
    for(int i = 0; i < someList.length; i++){
        if(someList[i] == someID){
%>
            <a href="blablabla.html">Option 1</a>
<%
        }else{
%>
            <a href="blablabla.html">Option 2</a>
<%
        }
    }
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:26:33.057

在第一条语句后加分号？

# asp.net - 构建这种错误处理的最有效方法是什么？

> ID：13454731
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:52.047
> 
> 标签：asp.net, vb.net

我从 Web 表单中获取用户输入，如下所示：

```
Dim t_ResolvedID As TextBox = DirectCast(gvrow.FindControl("editResolved"), TextBox)
Dim t_CommentsID As TextBox = DirectCast(gvrow.FindControl("editComments"), TextBox) 
```

我想限制可接受的输入如下：

*   t_ResolvedID 只能是正整数（无字母字符）
*   t_CommentsID 不应超过 4000 个字符。此外，如果 t_CommentsID.Text 包含单引号，请将其替换为两个单引号

截至目前，我正在执行此错误处理，如下所示：

```
If IsNumeric(t_ResolvedID.Text) Then
    resolved = Integer.Parse(t_ResolvedID.Text)
Else
    ShowMessage("Error!  Invalid character in 'Resolved' field.")
    errorCount += 1
End If

If Integer.Parse(t_ResolvedID.Text) < 0 Then
    ShowMessage("Error!  'Resolved' field cannot be negative!")
    errorCount += 1
End If

If t_CommentsID.Text.Length > 4000 Then
    errorCount += 1
    ShowMessage("Error!  The 'Comments' field cannot exceed 4000 characters!")
End If

'Transform single quote into two single quotes to avoid SQL errors
If t_CommentsID.Text.Contains("'") Then
    comments = t_CommentsID.Text.Replace("'", "''")
End If

If t_CommentsID.Text.Length < 4000 And Not t_CommentsID.Text.Contains("'") Then
    comments = t_CommentsID.Text
End If 
```

不过，我觉得有更好的方法来做到这一点。现在，我只保留错误计数，因为我不想使用错误数据执行最终更新 SQL 查询。所以我在运行查询之前检查 errorCount 是否等于 0。我怎样才能使它更有效率？

我将 AJAX 用于 ShowMessage() 函数，所以如果可能的话，我想保留通知用户错误的能力。

谢谢！

编辑：我最终修改我的代码如下：

```
If Not IsNumeric(t_ResolvedID.Text) Then
    errors += "Error!  Invalid character in 'Resolved' field<br/>"
Else
    resolved = Integer.Parse(t_ResolvedID.Text)
    If resolved < 0 Then
        errors += "Error!  'Resolved' field cannot be negative!<br/>"
    Else
        resolved = t_ResolvedID.Text
    End If
End If

If t_CommentsID.Text.Length > 4000 Then
    'errorCount += 1
    errors += "Error!  'Comments' field cannot exceed 4000 characters!<br/>"
End If

'Transform single quote into two single quotes to avoid SQL errors
If t_CommentsID.Text.Contains("'") Then
    comments = t_CommentsID.Text.Replace("'", "''")
End If

If t_CommentsID.Text.Length < 4000 And Not t_CommentsID.Text.Contains("'") Then
    comments = t_CommentsID.Text

End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:18:45.080

你的意思是这样的？

```
If Not IsNumeric(intString) Then
    errors += "Error!  Invalid character in 'Resolved' field<br/>"
Else
    If Not Integer.TryParse(intString, resolved) Then
        errors += "Error!  Resolved must be an integer."
    End If
end if 
```

# objective-c - 无法将对象添加到 NSMutableArray

> ID：13454734
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:59.193
> 
> 标签：objective-c, chipmunk, physics-engine

再会 ！我使用物理引擎“花栗鼠”。尝试通过单击创建动态对象。AddBalls() 创建所需的身体和形状。通过单击它必须生成一个新对象并将其放入数组中。

```
-(void)AddBalls: (UIImageView *)image;
{
    cpBody *ball2Body = cpBodyNew(100.0, INFINITY);
    ball2Body->p = cpv(60, 250);
    cpSpaceAddBody(space, ball2Body);

    cpShape *ball2Shape = cpCircleShapeNew(ball2Body, 20.0, cpvzero);
    ball2Shape->e = 0.5;
    ball2Shape->u=0.2;
    ball2Shape->data = (__bridge void*)image;
    ball2Shape->collision_type = 1;
    cpSpaceAddShape(space, ball2Shape);

    [children addObject: (__bridge id)ball2Shape];//EXC_BAD_ACCESS code=1
}

-(void)setupChipmunk

{
    cpInitChipmunk();
    space = cpSpaceNew();
    space->gravity = cpv(0, -100);
    space->elasticIterations = 10;

    [NSTimer scheduledTimerWithTimeInterval:1.0f/60.0f target:self selector:@selector(tick:) userInfo:nil repeats:YES];

    cpBody *ballBody = cpBodyNew(100.0, INFINITY);
    ballBody->p = cpv(60,250);
    cpSpaceAddBody(space, ballBody);
    cpShape *ballShape = cpCircleShapeNew(ballBody, 20.0, cpvzero);
    ballShape->e = 0.5;
    ballShape->u = 0.8;
    (ballShape->data) =(__bridge void*) ball;
    ballShape->collision_type = 1;
    cpSpaceAddShape(space, ballShape);
}

-(void)tick:(NSTimer *)timer
{
    cpSpaceStep(space, 1.0f/60.0f);
    cpSpaceHashEach(space->activeShapes, &updateShape, nil);
}

-(void) updateShape (void *ptr, void *unused)
{
    cpShape *shape = (cpShape*)ptr;

    if(shape == nil || shape->body == nil || shape->data == nil) {
        NSLog(@"Unexpected shape please debug here...");
        return;
    }

    if([(__bridge UIImageView*)shape->data isKindOfClass:[UIView class]]) {
        [(UIView *)((__bridge UIImageView*)shape->data) setCenter:CGPointMake(shape->body->p.x, 480 - shape->body->p.y)];
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

- (void)handleTap:(UITapGestureRecognizer *)sender {     
    if (sender.state == UIGestureRecognizerStateEnded) {
        [self AddBalls];
    }
} 
```

方法 AddBalls 应该将新形状放入数组中。但我得到了错误“ `EXC_BAD_ACCESS...`”。我应该怎么办？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:48:37.763

您不能将任何类型强制转换为`id`，它实际上必须是 Objective-C 类型。您需要`ball2Shape`将`NSValue`.

```
[children addObject:[NSValue value:&ball2Shape withObjCType:@encode(cpBody*)]];

...
//When you need to use/free the values
for (NSValue *value in children)
{
    cpBody *body = (cpBody*)[value pointerValue];

    //Use body like you did above.

    //Even though it is ARC you will need to free cpBody since
    // it is not an Objective-C object
    cpBodyFree(body);
} 
```

# javascript - 从 DOM 中删除元素不会删除该 DIV 元素内的 javascript 代码的效果

> ID：13454735
> 
> 赞同：0
> 
> 时间：2012-11-19T13:24:59.863
> 
> 标签：javascript, jquery

我在 javascript 的帮助下将整个页面动态加载到一个 DIV 元素中。但是当我关闭我正在使用的 div 时`("#Viewer").remove()`。但是加载在该元素内的 javascrpit/jquery 仍然在工作。我怎样才能消除它的影响。

有一个查看器 DIV。我正在将整个另一个页面加载到其中。当我关闭它时，我使用`("#Viewer").remove()`. 当它第一次加载时，在其他加载的数据上会发生一些与之相关的动画和转换。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:36:11.463

在我读完重复项后建议这个工作

```
<script type="text/javascript" id="myScript">
</script> 
```

并删除

```
 $("#myScript").remove(); 
```

# sql - SQL 创建日志

> ID：13454737
> 
> 赞同：2
> 
> 时间：2012-11-19T13:25:04.373
> 
> 标签：sql, ms-access

我正在尝试创建一个查询，让我记录每人每项任务花费的小时数。

我有以下表格：

*   包含以下列的日志表：TaskID、PersonID、Hours
*   包含列的成员表：ID、姓名、电子邮件、Skype、便笺

最终日志应如下所示：

```
| Person1 | Task1 | x hours |
| Person1 | Task2 | x hours |
| Person2 | Task1 | x hours | 
```

所以它必须按人和任务分组。

给我带来麻烦的是总小时数。

到目前为止，这就是我所拥有的：

```
SELECT m.Name, t.Task, Sum(l.Hours) AS TotalHours
FROM Member AS m, Log AS l, Tasks AS t
WHERE t.TaskID=l.TaskID
GROUP BY t.Task, m.Name; 
```

然而，这给了我一个独特的个人-任务组合列表，但包含在该任务上花费的总小时数，而不是每人在该任务上花费的总小时数。

希望我已经足够清楚地解释了这个问题，以便您可以帮助我。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:55:03.390

您可以`Member table`在`where`子句中包含您的内容。

因此，如果您`Log table`还包括`MemberId`您的 Sql 查询，则会显示：-

```
Select m.Name, t.Task, Sum(l.Hours) As TotalHours
From Member AS m, Log AS l, Tasks AS t
WHERE t.TaskID=l.TaskID and m.MemberId=l.MemberId
GROUP BY t.Task, m.Name 
```

这应该会给你你需要的结果。

*编辑 ：*

如果您确实想使用显式而不是隐式连接，那么查询将显示如下内容：-

```
Select m.Name, t.Task, Sum(l.Hours) As TotalHours
From Log AS l
Inner join tasks AS t
On t.TaskID=l.TaskID
Inner join Member AS m
On m.MemberId=l.MemberId
GROUP BY t.Task, m.Name 
```

我通常使用显式连接，因为我的查询要大得多，而且我发现显式连接更容易阅读。至于效率和其他因素，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:30:00.207

您还需要重新加入您的会员表。在您发布的示例中，您仅加入日志和任务表。

如果您提供有关成员表中内容的更多信息，我很乐意提供帮助。

# neural-network - NN 的好结果，而不是 SVM；值得关注？

> ID：13454746
> 
> 赞同：1
> 
> 时间：2012-11-19T13:25:39.030
> 
> 标签：neural-network, svm

我为我正在执行的概念验证研究煞费苦心地收集数据。数据由 40 个不同的主题组成，每个主题有 12 个以 60 个时间间隔测量的参数，1 个输出参数为 0 或 1。所以我正在构建一个二元分类器。

我事先知道输入参数和输出之间存在非线性关系，因此贝叶斯分类器的简单感知器将无法对样本进行分类。经过初步测试，这一假设被证明是正确的。

因此我去了神经网络，我希望结果很好。大约 1-5% 的误差通常是结果。训练是通过使用 70% 作为训练和 30% 作为评估来完成的。通过模型再次运行完整的数据集（100%）我对结果非常满意。下面是一个典型的混淆矩阵（P = 正，N = 负）：

```
 P    N
P  13    2   
N   3   42 
```

所以我很高兴，并且对于我使用 30% 进行评估的想法，我确信我不适合噪音。

因此，我决定使用 SVM 进行双重检查，但 SVM 无法收敛到一个好的解决方案。大多数时候，解决方案都很糟糕（比如 90% 的错误......）。也许我不完全了解 SVM 或者实现不正确，但这让我很困扰，因为我认为当 NN 提供一个好的解决方案时，由于它们的最大边距超平面，SVM 在分离数据方面大部分时间都更好。

这说明我的结果是什么？我适合噪音吗？我怎么知道这是否是正确的结果？

我使用 Encog 进行计算，但 NN 结果与我制作的本土 NN 模型相当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:51:32.397

如果您是第一次使用 SVM，我强烈建议您看一看著名的 SVM 包[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)的作者的[支持向量分类实用指南](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)。它提供了训练 SVM 分类器的建议列表。

*   将数据转换为 SVM 包的格式
*   对数据进行简单的缩放
*   考虑 RBF 内核
*   使用交叉验证找到最佳参数 C 和 γ
*   使用最佳参数 C 和 γ
*   训练整个训练集
*   测试

简而言之，尝试缩放您的数据并仔细选择内核和参数。

# sql - 从具有相同日期但不同外键的相同表列中选择

> ID：13454748
> 
> 赞同：1
> 
> 时间：2012-11-19T13:25:43.200
> 
> 标签：sql, foreign-keys, selection

我有下表

表名：`hydroraw`

```
idhydroraw|idstndb|dates|dist_raw|lvl_m

1|1|2011-12-14 14:20|2.3|4.5

2|1|2011-12-14 14:30|2.4|4.3

1|2|2011-12-14 14:20|6  |9

2|2|2011-12-14 14:30|8  |10 
```

...ETC

我尝试选择但对于相同的日期`dist_raw`并`lvl_m` `where idstndb =1 and idstndb=2`产生如下内容：

```
2011-12-14 14:20|2.3|4.5|6 | 9

2011-12-14 14:30|2.4|4.3|8 | 10 
```

我是 sql 新手，**我想请教一些提示 - 不是解决方案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:51:34.880

因为你要求一些光来找到答案。请同时检查此链接。它清楚地解释了[SQL 中使用的每种 JOIN 类型之间的区别。](https://stackoverflow.com/questions/5706437/whats-the-difference-between-inner-join-left-join-right-join-full-join-in-mys)

如果您正在学习 SQL，最重要的是了解这些连接以及您的实体和参照完整性关系。:)

在后一注中，无论如何，您的上表中似乎没有主键......无论如何祝您好运。如果您需要答案，请告诉我们。这是一个只能用于更快的表、sql 查询测试的工具。

*   [SQLFiddle](http://sqlfiddle.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:28:57.503

查看[INNER JOIN](http://msdn.microsoft.com/en-us/library/ms190014%28v=sql.105%29.aspx)的概念。然后看看' [SELF JOIN](http://msdn.microsoft.com/en-us/library/ms177490%28v=sql.105%29.aspx) '。

# tomcat - 将 windows 活动目录与 apache tomcat 集成以获取用户名

> ID：13454751
> 
> 赞同：0
> 
> 时间：2012-11-19T13:25:51.173
> 
> 标签：tomcat, active-directory, integration

如何将 windows 活动目录与 apache tomcat 集成...以便在客户端尝试访问基于 apache 的应用程序时获取客户端用户名？每次登录时，应将用户名和密码发送到 apache tomcat 服务器，该服务器将返回用户角色，具体取决于授予用户的访问权限。谢谢...

# jsf - ui 是未定义的 jsf primefaces

> ID：13454755
> 
> 赞同：3
> 
> 时间：2012-11-19T13:26:19.700
> 
> 标签：jsf, primefaces, undefined

我在使用 primefaces 自动完成组件时遇到问题。当触发 ia 得到错误 $ui. 是未定义的，甚至没有调用支持 bean。

我的代码是：

```
<p:autoComplete completeMethod="#{auto.uliList}" value="#{naroc.ulValue}"></p:autoComplete> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:39:23.817

这可以识别为 jQuery / jQuery UI 冲突。

PrimeFaces 已经自带了 jQuery 和 jQuery UI 库。如果您通过自定义`<script>`or手动包含 jQuery 和/或 jQuery UI `<h:outputScript>`，那么它只会与 PrimeFaces 提供的冲突并导致这种“foo is undefined”错误。您应该从页面（和您的 web 应用程序）**中删除**手动包含的 jQuery 脚本，并改用 PrimeFaces 提供的脚本。

如果您的页面不一定使用 PrimeFaces 组件（因此其捆绑的 jQuery 脚本不一定会自动包含在每个页面上），那么您需要明确指定 PrimeFaces 自己的 jQuery：

```
<h:outputScript library="primefaces" name="jquery/jquery.js" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:53:53.373

我只是设法解决了我的问题。这很简单但很有效。因此，如果您遇到与我类似的问题，只需将此代码添加到您的页面标题：

```
<h:outputScript target="head">
    jQuery.noConflict();
</h:outputScript> 
```

# c++ - 多态对象成员

> ID：13454756
> 
> 赞同：2
> 
> 时间：2012-11-19T13:26:23.840
> 
> 标签：c++, polymorphism

我有以下问题。我有一个基类和几个继承自它的类。所有这些类都共享一个非常相似的接口，并且很可能不需要重载大多数共享方法。

但是，它们都使用不同的成员对象，这些成员对象相互派生，并且也共享一个非常相似的接口。

```
class BaseClass
{
    protected:
        Com* com;

    public:
        void setReady()
        {
            com->setReady();
        }
}

class DerivedClass : BaseClass
{
    protected:
        DerivedCom* com;
}

class Derived2Class : BaseClass
{
    protected:
        Derived2Com* com;
} 
```

如何启用`DerivedClass`运行`setReady()`其版本`com`而不是继承自的版本`BaseClass`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:34:11.567

使用 Com 的不同实现构建您的实例。（假设 DerivedCom 实现 Com）

```
class BaseClass
{
    protected:
        Com* com;

    public:
        BaseClass(Com* c = new Com) : com(c) 
        {}

        void setReady()
        {
            com->setReady();
        }
}

class DerivedClass : BaseClass
{
    public:
        DerivedClass() : BaseClass(new DerivedCom) 
        {}
}

class Derived2Class : BaseClass
{
    public:
        Derived2Class() : BaseClass(new Derived2Com) 
        {}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:31:48.927

一个简单的解决方案是引入一个`getCom()`受保护的虚函数，它返回一个`Com*`or `Com&`：

```
virtual Com* getCom()
{ return this->com; } 
```

子类可以覆盖它并返回它们自己的 Com 派生实例。`setReady()`然后可以将您的功能实现为：

```
void setReady()
{
    getCom()->setReady();
} 
```

`com`然后可以制作您的会员`private`，顺便说一句。

此解决方案的缺点是您将`Com`在子类中有多个 -derived 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:29:39.557

也许一个类模板可以帮助你：

```
class BaseClass
{
protected:
    Com* com;

public:
    virtual void setReady()
    {
        com->setReady();
    }
};

template<typename T>
class ComDerived : public BaseClass {
protected:
    T* com;
public:
    void setReady()
    {
        com->setReady();
    }
};

class DerivedClass : public ComDerived<DerivedCom>
{

};

class Derived2Class : public ComDerived<Derived2Com>
{

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T14:07:04.090

为了建立 d909b 的答案，我会做类似的事情：

```
class BaseClass {
private:
   virtual Com * alloc_com() {
      return new Com;
   }
   Com * com;
public:
   BaseClass() : com(alloc_com()) {}
   void setReady() {
      com->setReady();
   }
};

class DerivedClass {
private:
   virtual Com * alloc_com() override {
      return new DerivedCom;
   }
};

class Derived2Class {
private:
   virtual Com * alloc_com() override {
      return new Derived2Com;
   }
}; 
```

只要 DerivedCom 从 Com 公开继承并且当 Com 具有虚拟析构函数时，这将起作用。如果 Com 没有虚拟析构函数，还需要有一个虚拟的 dealloc_com 函数。否则，您需要使用模板或 CRTP 模式，然后您仅限于能够在编译时推断出对象类型的情况。但是，如果您知道这些是您唯一的情况，那么使用模板将允许您在不增加虚函数调用开销的情况下使用接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T13:30:12.437

为什么不模板化母班？

```
template <typename T>
class BaseClass
{
    protected:
        T* com;

    public:
        void setReady()
        {
            com->setReady();
        }
};

class DerivedClass : BaseClass<DerivedCom>
{
};

class Derived2Class : BaseClass<Derived2Com>
{
}; 
```

# apache-flex - Flex AdvancedDataGrid 分层视图 itemrenderer

> ID：13454758
> 
> 赞同：0
> 
> 时间：2012-11-19T13:26:34.213
> 
> 标签：apache-flex, hierarchical-data, itemrenderer, advanceddatagrid

我在我的 AdvancedDatagrid 中显示分层数据。我已经为显示分层的列设置了一个复选框作为 itemrenderer。视图中的每个叶节点旁边都有复选框。假设 A 组节点有 A1、A2、A3 等作为子节点，B 组有 B1、B2 等作为子节点。所有子节点（即叶节点）旁边都有复选框。如果我自动选择 A 组下的任何复选框，其他组下的复选框应该被禁用，并且在取消选中复选框时它应该启用。

请让我知道如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:29:47.097

最好的方法是在数据模型中创建层次树。因此，对于每个具有子节点的节点，如果您有一个选定的属性，您还将修改这些子节点的选定属性。这样，您的 ADG 只是数据状态的一个视图。然后，您将复选框的更改事件绑定到此选定属性。

[编辑以显示树示例]

与 XML 类似，您的数据结构可以有一个树叶/节点范式例如（伪代码）：

“人”树：

```
var gf:Person = new Person();
    gf.name = 'Frank';

var gm:Person = new Person();
    gm.name = 'Elise';

var c1:Person = new Person();
    c1.name = 'Mary';

var c2:Person = new Person();
    c2.name = 'Frank Jr';

var c3:Person = new Person();
    c3.name = 'Sam';

var couple:PersonGroup = new PersonGroup();
    couple.relation = [gm, gf];
    couple.children = [c1, c2, c3];

//now you add another 'married PersonGroup to child one, and their children' 
```

因此，由于您有一个“子”属性，因此 HierarchicalData 知道如何使用它，但是如果您的“节点”被命名为其他名称，则它们是一个允许您将其设置为其他内容的字段。

因此，为了扩展这个，每个“Person”都将具有一个“已选择、启用、活动，无论哪个”的属性，并且该属性需要是一个 setter，然后修改该属性也存在于它的子项中。通过这种方式，您的数据状态始终保留在您的数据模型中，而 ADG 恰好是您用来显示该表示的当前视图。

# java - 异步 div

> ID：13454759
> 
> 赞同：0
> 
> 时间：2012-11-19T13:26:36.177
> 
> 标签：java, jsp, servlets, asynchronous, widget

我的 Java EE 应用程序（JSP 文件，从 Servlet.java 调用）中有以下代码：

```
 <div class="drop">               
           <c:forEach var="widget" items="${widgets}">
              <div class="drag">
                 <p><h2>Widget</h2></p>
                 // WIDGET GRAPHIC REPRESENTATION
              </div>
           </c:forEach>
     </div>
     <input class="add" type="image" src="image.jpg"> 
```

我想要的是在浏览器中加载和显示 JSP 文件，然后加载小部件。只要未加载小部件，理想情况就会显示加载图标。如何实现这样的异步解决方案？有人可以解释和/或做一个小演示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:41:18.320

我认为这应该对您有所帮助，我不确定

```
//use id of div(that contains the widgets) that 
//you want to hide before all widget are shown
$('#my_div_id')
    .hide()  // hide it initially and then use load event handler
    .load(function() {
        $(this).show();//display/show the div when load completes
    })
; 
```

# sql - 如何在 b/kb/mb 中检查 SQL 表行的大小？

> ID：13454762
> 
> 赞同：2
> 
> 时间：2012-11-19T13:26:46.890
> 
> 标签：sql, database, stored-procedures

我知道一个`sp_spaceused`存储过程来检查 SQL 表或其数据库的大小，但是有没有办法检查单个表行的大小？

**我试过的：**

*   在插入行之前和之后在表上运行`sp_spaceused`（它不会改变`sp_spaceused`查询的结果，因为行的大小不够大）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:33:47.613

我经常使用我在[这里](http://power-programming.co.uk/post/2010/02/26/TSQL-Identify-space-used-by-tables-in-a-way-that-can-be-analysed.aspx)找到的脚本来获取大小甚至更多信息。我确信您可以根据自己的需要进行调整。

# xcode - 如何播放不在主包中的音频文件？

> ID：13454763
> 
> 赞同：0
> 
> 时间：2012-11-19T13:26:53.807
> 
> 标签：xcode, xcode4, mp3, avplayer

这是我从应用程序目录播放 mp3 文件的代码，由于某种原因它无法正常工作。租赁找出这个代码有什么问题！

```
 -(IBAction)PlayLesson:(id)sender;
 {
NSString *folderAndFile = @"/Users/alaaalfadhel/Library/Application Support/iPhone        Simulator/5.1/Applications/1021CF5B-F664-4123-B9CB-529217225B74/Documents/file.mp3";
NSString *audioFilePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,               NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:folderAndFile];
   NSURL *url = [NSURL fileURLWithPath:audioFilePath];
                                         ofType:@"mp3"]];
   AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];

    [click play];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:07:41.153

由于`NSSearchPathForDirectoriesInDomains`提供了 Documents 目录的所有内容，因此您无需为其提供文件夹/文件组合，而只需提供文件即可。

你真的希望你的 URL 是 /Users/alaaalfadhel/Library/Application Support/iPhone Simulator/5.1/Applications/5515AFBA-1E7D-4B06-A62E-F6FDFD7DD7C7/Documents/file.m‌​p3 而不是日志中显示的那个。这是必要的，因为只要您从模拟器中删除应用程序然后再次启动它，长十六进制值就会改变。

# linux - 如何在 Windows 上对文件进行 chmod 0777 并按原样提交到 Git？

> ID：13454764
> 
> 赞同：21
> 
> 时间：2012-11-19T13:26:58.183
> 
> 标签：linux, windows, git, filesystems

我在 Windows 上工作，在生产上有一个 Linux 系统，我想将一些文件 chmod 到 0777，但我不知道如何在 Windows 上进行。我宁愿不在生产中这样做，因为我无法在那里提交/推送。

有没有办法在 Windows 上 chmod 0777 文件并将其提交给 Git，以便在我克隆/拉取生产时它保持 0777？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-19T13:37:44.537

如果要将文件标记为可执行文件，可以使用

```
git update-index --chmod=+x <your_file> 
```

如果你真的想让文件对每个人都可写，你必须`post-update`在 linux 系统上设置一个钩子，因为 git 不跟踪文件权限，只跟踪可执行位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T14:25:12.000

另一种解决方案是在 Windows 上安装[Cygwin](http://www.cygwin.com/)。

Cygwin 模拟类 Unix 环境，但所有 cygwin 程序都在您的 Windows 机器上本地运行。它不是虚拟机。但是，cygwin 二进制文件是使用 cygwin 库编译的，这使它们能够理解普通 Windows 程序无法理解的诸如 unix 样式文件权限之类的东西。

所以你需要为 Cygwin 安装一个 git 版本。首次安装 Cygwin 时，只需从 Cygwin 安装程序中选择 git。

# matlab - 有没有办法制作一个在每次迭代时旋转轴的迭代图

> ID：13454766
> 
> 赞同：1
> 
> 时间：2012-11-19T13:27:03.150
> 
> 标签：matlab, for-loop, rotation, plot, axes

我想制作一个图，然后将 xy 轴旋转一个角度；然后在旋转轴上再次制作相同的图，然后再次旋转轴以获得下一个类似的图

像这样的东西：

```
hold all;

for k= 0:1:10
    % rotate-axis-about-origin(angle * k)
    plot(XY(:,1),XY(:,2));
end 
```

有什么方法可以实现我的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:35:51.033

您可以通过在每一步滚动相机来做到这一点[`camroll`](http://www.mathworks.com/help/matlab/ref/camroll.html)。这是一个用于绘制正弦的玩具工作示例：

```
hold all

x = -3:0.01:3;
y = sin(x);
angle = 1; % in degrees
for k = 1:90 % 90 steps
    plot(x,y, 'k');
    camroll(angle); % roll 'angle' degrees at each step
    drawnow
    pause(0.05)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:36:33.957

在循环内使用旋转矩阵：

```
hold all;

% test vector and matrix
x = (1:10)';
y = x.^2;    
XY0 = [x y];

angle = 1/180*pi;   % 1 degree

for k= 0:1:10
    % rotate-axis-about-origin(angle * k)
    rot = [cos(angle*k) sin(angle*k);-sin(angle*k) cos(angle*k)];
    XY = XY0*rot;
    plot(XY(:,1),XY(:,2));
end 
```

XY0 是原始矩阵，XY 每一步都不同。

希望这是您正在寻找的。

# struts2 - 在 Struts 2 中使用自定义数据属性：选择

> ID：13454771
> 
> 赞同：2
> 
> 时间：2012-11-19T13:27:19.667
> 
> 标签：struts2, struts-tags

我正在尝试在 Struts2 标记中使用 HTML 的自定义数据属性，这是我的示例代码

```
<s:select list="myList" listKey="myListVal"  listValue="myListDesc"  data-inputs="myListInput" ></s:select> 
```

例如，我期待这样的事情

```
<select >
     <option value="myListVal1" data-inputs="myListInput1">myListDesc1</option>
     <option value="myListVal2" data-inputs="myListInput2">myListDesc2</option>
     <option value="myListVal3" data-inputs="myListInput3">myListDesc3</option>
</select> 
```

相反，我得到了这个

```
<select data-inputs="myListInput" >
     <option value="myListVal1" >myListDesc1</option>
     <option value="myListVal2" >myListDesc2</option>
     <option value="myListVal3" >myListDesc3</option>
</select> 
```

是否可以在其中的选项的 struts 选择标签中描述数据属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:06:23.853

覆盖`<s:select>`标签模板。或者只使用 HTML 标签`<s:iterator>`

```
<select name="list">
   <s:iterator value="myList" status="stat">
      <option value="<s:property value="myListVal"/>" data-inputs="myListInput<s:property value="#stat.index"/>"><s:property value="myListDesc"/></option>
   </s:iterator>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:21:40.297

~~You can't inject custom attributes into a Struts2 UI Tag directly.~~

According to Dave Newton's comment, you can with Struts2 >= 2.1.x

But still it's not possible to apply them to the `option` elements instead of the `select`, so I'll leave the answer in case you need to extend the original `select` tag to define a custom behaviour (like apply certain attributes to the options).

* * *

You can `extend` the `<s:select>` Struts2 tag to allow it to manage new kind of attributes...: [http://bodez.wordpress.com/2009/03/13/customising-struts2-jsp-tags/](http://bodez.wordpress.com/2009/03/13/customising-struts2-jsp-tags/) ,

or create your own tag directly, but in your case would be overkill: [http://joshuajava.wordpress.com/2008/12/27/creating-custom-components-with-struts-2/](http://joshuajava.wordpress.com/2008/12/27/creating-custom-components-with-struts-2/)).

Last but not least, you could even add your custom attributes once the page is rendered, using something like jQuery (demo: [http://jsfiddle.net/CLNDs/](http://jsfiddle.net/CLNDs/) ); they will be accessible, but not visible in source.

# java - java中的嵌套xml，无法读取内部部分

> ID：13454772
> 
> 赞同：1
> 
> 时间：2012-11-19T13:27:23.133
> 
> 标签：java, xml, parsing, nested

这是我的 XML：

```
<questions>
    <question>
        <title>What eth speed?</title>
        <options>
            <option>10</option>
            <option>100</option>
            <option>1000</option>
        </options>
        <tagtochange>change this tag</tagtochange>
    </question>
    <question>
        <title>What duration?</title>
        <options>
            <option>Null</option>
        </options>
        <tagtochange>duration</tagtochange>
    </question>
</questions> 
```

我正在尝试在 java 中解析它，但我无法取出内部选项标签，我要么一无所获，要么从所有问题中得到一切！

这是我的代码：

```
DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
DocumentBuilder db =dbf.newDocumentBuilder();
Document doc=db.parse("questions.xml");
NodeList nl = doc.getElementsByTagName("question");
for(int i=0;i<nl.getLength();i++)
    {
      NodeList titleNlc=    doc.getElementsByTagName("title");
      Element titleElements=(Element)titleNlc.item(i);
      String titleTagValue=titleElements.getChildNodes().item(0).getNodeValue();

      NodeList optionsNlc=    doc.getElementsByTagName("options");
      Element optionsElements=(Element)optionsNlc.item(i);
      String optionsTagValue=optionsElements.getChildNodes().item(0).getNodeValue();  

      NodeList tagNlc=    doc.getElementsByTagName("tagtochange");
      Element tagElements=(Element)tagNlc.item(i);
      String tagTagValue=tagElements.getChildNodes().item(0).getNodeValue();

      System.out.println("title :"+titleTagValue);    
      System.out.println("option :"+optionsTagValue);    
      System.out.println("tagtochange :"+tagTagValue);
      System.out.println(optionsElements.toString());
    } 
```

谢谢你的帮助！

编辑：我计划用这些数据动态创建一个表单，所以要么没有选项，它会创建一个文本框，要么没有选项，它会创建一个组合框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:32:20.320

从这篇文章中找到了我一直在寻找的答案：[parsing Xml with NodeList and DocumentBuilder](https://stackoverflow.com/questions/6604876/parsing-xml-with-nodelist-and-documentbuilder)

我稍微编辑了我的xml：

```
<questions>
    <question title="What eth speed?" tag="tagEth">
        <options>
            <option>10</option>
            <option>100</option>
            <option>1000</option>
        </options>
    </question>
    <question title="What duration?" tag="tagDuration">
        <options>
            <option>Null</option>
        </options>
    </question>
</questions> 
```

这是java：

```
for(int i=0;i<questionList.getLength();i++)
    {
        Element question = (Element) questionList.item(i);
        String questionText = question.getAttribute("title");
        String tagText = question.getAttribute("tag");
        System.out.println("Question :"+questionText);
        System.out.println("tag :"+tagText);

        NodeList optionList = question.getElementsByTagName("option");
        for (int j = 0; j < optionList.getLength(); ++j)
        {
            Element option = (Element) optionList.item(j);
            String optionText = option.getFirstChild().getNodeValue();
            System.out.println("Option :"+optionText);
        }
    } 
```

这给出了这个输出：

```
Question :What eth speed?
tag :tagEth
Option :10
Option :100
Option :1000
Question :What duration?
tag :tagDuration
Option :Null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:48:09.307

一个简单的 Java Parser 将帮助您：

```
import java.util.Vector;

/**
 * XMLSimpleTouch is a simple xml parser, it allow to retrive only tags bodies.
 * 
 * Example XML file (in exampleXmlString variable): <?xml?> <books> <book>
 * <title>book1 title</title> <isbn>1122334455</isbn> </book> <book>
 * <title>book2 title</title> <isbn>2233445566</isbn> </book> </books>
 * 
 * Example of use: XMLSimpleTouch xml = new XMLSimpleTouch(exampleXmlString);
 * xml.getString("books/book/title"); // return "book1 title" //NOW WE LOOK FOR
 * SECOND BOOK xml.getString("books/book[2]/title"); // return "book2 title"
 * 
 * path "books/book[1]/title" is equal: "books/book/title"
 * 
 *         TODO: 1) add attributes, 2) add parsing from stream
 */
public class XMLSimpleTouch {
    private String defaultNodeValue = null;

    /** XML string to parse */
    private String strXML = null;

    /**
     * Constructor
     * 
     * @param xml
     *            XML string to parse
     */
    public XMLSimpleTouch(String xml) {
        this.strXML = xml;
    }

    /**
     * Retrive string value between tags from given path. XML file was given in
     * constructor, default value is null.
     * 
     * @param XMLpath
     *            path to string
     * @return value in given path or default value if path not found
     */
    public String getText(String XMLpath) {
        return getText(XMLpath, null, null);
    }

    /**
     * Retrive string value between tags from given path.
     * 
     * @param XMLpath
     *            path to string
     * @param defaultValue
     *            default value to return if path not found
     * @return value in given path or default value if path not found
     */
    public String getText(String XMLpath, String defaultValue) {
        this.defaultNodeValue = defaultValue;
        return getText(XMLpath, defaultValue, null);
    }

    /**
     * Retrive string value between tags from given path.
     * 
     * @param XMLpath
     *            path to string
     * @param defaultValue
     *            default value to return if path not found
     * @param XMLFile
     *            xml string to parse instead of given in constructor
     * @return value in given path or default value if path not found
     */
    public String getText(String XMLpath, String defaultValue, String XMLFile) {
        if (strXML == null)
            return null;
        try {
            /** Disasembly path */
            Object[][] path = dissasemblyPath(XMLpath);
            /** XML string to parse */
            String result = strXML;
            /** If given xml string is null use xml given in constructor */
            if (XMLFile != null)
                result = XMLFile;
            /** Extract value from path */
            for (int i = 0; i < path.length; i++) {
                /** Get element from path */
                String element = (String) path[i][0];
                /** Get occurence we search */
                int occurence = ((Integer) path[i][1]).intValue();
                /** Extract element */
                result = extractElement(element, occurence, result);
            }
            /** Return extracted value */
            return result;
        } catch (Exception e) {
        }
        return defaultValue;
    }

    /**
     * Search for given element and return its body.
     * 
     * @param element
     * @param occurence
     * @param xmlStr
     *            string where we look for element
     * @return
     */
    private String extractElement(String element, int occurence, String xmlStr) {
        int index = 0;
        String elString = null;
        do {
            int elNameLength = element.length() + 2;
            int elStart = xmlStr.indexOf("<" + element + ">", index);
            int elEnd = xmlStr.indexOf("</" + element + ">", elStart
                    + elNameLength);
            // returns 'defaultNodeValue' if the specifed child node(eg:
            // books/book[4]) not found or none of childs are present
            if (elStart == -1 || elEnd == -1)
                return defaultNodeValue;
            elString = xmlStr.substring(elStart + elNameLength, elEnd);
            occurence--;
            index = elEnd + elNameLength;
        }
        /** Repeat until occurence is 0 or null is given */
        while (occurence > 0 && elString != null);
        return elString;
    }

    /**
     * Disassembly path to elements and its occurences
     * 
     * @param XMLpath
     *            path to disassembly
     * @return Object[][] array, first element in array is path element, second
     *         is occurence.
     */
    private Object[][] dissasemblyPath(String XMLpath) {
        /** Split path */
        String[] str = split(XMLpath, "/");
        /** Create array to keep elements and occurences */
        Object[][] resultArray = new Object[str.length][2];
        /** Fill array with elements from path */
        for (int i = 0; i < str.length; i++) {
            /** Get path piece */
            String s = str[i];
            String occurence = "1";
            /** Search for occurence */
            int occur1 = s.indexOf("[");
            int occur2 = s.indexOf("]", occur1 + 1);
            if (occur1 != -1 && occur2 != -1) {
                /** Occurence defined */
                occurence = s.substring(occur1 + 1, occur2);
                resultArray[i][0] = s.substring(0, occur1);
                resultArray[i][1] = new Integer(Integer.parseInt(occurence));
            } else {
                /** No occurence defined, using default */
                resultArray[i][0] = s;
                resultArray[i][1] = new Integer(1);
            }
        }
        return resultArray;
    }

    public static String[] split(String source, String separator) {
        Vector<String> vector = new Vector<String>();
        String[] strings = null;
        while (true) {
            int index = source.indexOf(separator);

            if (index == -1) {
                vector.addElement(source);
                break;
            }
            vector.addElement(source.substring(0, index));
            source = source.substring(index + separator.length());
        }

        strings = new String[vector.size()];
        for (int i = 0; i < vector.size(); ++i) {
            strings[i] = ((String) vector.elementAt(i));
        }

        return strings;
    }

    public static void main(String[] args) {
        String xml = "<questions>" + 
        "    <question>" + 
        "        <title>What eth speed?</title>" + 
        "        <options>" + 
        "            <option>10</option>" + 
        "            <option>100</option>" + 
        "            <option>1000</option>" + 
        "        </options>" + 
        "        <tagtochange>change this tag</tagtochange>" + 
        "    </question>" + 
        "    <question>" + 
        "        <title>What duration?</title>" + 
        "        <options>" + 
        "            <option>Null</option>" + 
        "        </options>" + 
        "        <tagtochange>duration</tagtochange>" + 
        "    </question>" + 
        "</questions>";

        XMLSimpleTouch xmlParser = new XMLSimpleTouch(xml);

        // traversing the first question 
        System.out.println(xmlParser.getText("questions/question[1]/options/option[1]"));
        System.out.println(xmlParser.getText("questions/question[1]/options/option[2]"));
        System.out.println(xmlParser.getText("questions/question[1]/options/option[3]"));
        System.out.println(xmlParser.getText("questions/question[1]/options/option[4]")); // this will be null

        // traversing the second question       
        System.out.println(xmlParser.getText("questions/question[2]/options/option[1]"));
        System.out.println(xmlParser.getText("questions/question[2]/options/option[2]"));
        System.out.println(xmlParser.getText("questions/question[2]/options/option[3]"));
        System.out.println(xmlParser.getText("questions/question[2]/options/option[4]"));

    }

} 
```

您还可以使用简单的逻辑进行迭代，将边界/退出条件作为`null`值。

**编辑**

添加了迭代逻辑以获取所有`option`标签值`questions`

```
for(int i=1;;i++)
{
    String value = xmlParser.getText("questions/question["+i+"]");
    if(value==null)break;
    for(int j=1;;j++)
    {
        value = xmlParser.getText("questions/question["+i+"]/options/option["+j+"]");
        if(value==null)break;
        System.out.println(value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:36:10.317

```
NodeList optionsNlc=    doc.getElementsByTagName("options");
Element optionsElements=(Element)optionsNlc.item(i);

NodeList optionNlc = optionsElements.getElementsByTagName("option");
// process the list of child nodes 
```

您还可以使用：

```
NodeList optionNlc = optionsElements.getChildNodes(); 
```

因为你知道 xml 应该是什么样子

# drop-down-menu - Dojo Enhancedgrid 过滤器：如何在下拉自动完成中设置自定义选项

> ID：13454776
> 
> 赞同：1
> 
> 时间：2012-11-19T13:27:29.120
> 
> 标签：drop-down-menu, filter, dojo

我正在使用 Dojo v1.8.1 + Enhancedgrid + Filter 插件，我想为其中一列的自动完成下拉菜单设置自定义选项菜单。我怎样才能做到这一点？

更多的问题：我的一个专栏是一个逗号分隔的字符串列表，这组字符串是有限的并且是已知的（大约 40 个不同的字符串）。例如，假设列的几行如下所示： 第 1 行：苹果、香蕉、菠萝 第 2 行：苹果、菠萝 第 3 行：香蕉 第 4 行：菠萝、草莓

如果我在过滤器插件中将此列设置为：datatype:"string", autoComplete: true，过滤器自动完成下拉菜单上呈现的选项是：apple,banana,pineapple apple,pineapple banana pineapple

但是，我希望将这些选项呈现给用户：苹果香蕉菠萝

以便过滤器选择“包含”用户选择的字符串的任何行。这可能吗？

您可能会争辩说，以逗号分隔的字符串列表并不是向用户展示此数据的最佳方式。我仍然可以更改这一点，所以如果您有任何其他想法，请告诉我。但是，此列应该是可过滤的。

提前感谢您的时间和帮助，

金莺

# sql-server - 删除未使用/冗余的 SQL 代理计划？

> ID：13454784
> 
> 赞同：1
> 
> 时间：2012-11-19T13:27:39.667
> 
> 标签：sql-server, sql-server-2008

是否可以从 SQL Server 2008 中删除未使用的 SQL 代理计划？

如果是这样，怎么做？我确定我错过了一些非常明显的东西！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:45:56.887

如果您知道多余的时间表，那么它只是调用`sp_delete_schedule`- [http://msdn.microsoft.com/en-us/library/ms175050(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms175050(v=sql.100).aspx) - 删除

如果您需要获取当前未启用或附加到作业的计划列表，则需要通过msdb中的`sysschedules`和表`sysjobschedules`

残疾人工作很容易找到：

```
select a.schedule_id, a.name, b.name
from msdb..sysschedules a
left join master..syslogins b on a.owner_sid=b.sid
where enabled=0 
```

要查找已启用但未附加到作业的那些：

```
选择 a.schedule_id、a.name、a.owner_sid、b.name
从
msdb..sys 安排一个
left join master..syslogins b on a.owner_sid=b.sid
其中 a.schedule_id 不在
（从 msdb..sysjobschedules 中选择 schedule_id）

```

我包括所有者名称，因此我可以检查系统计划（由 sa 拥有），因为我看不到任何其他方式来识别它们（如果其他人可以，我很想知道）。

# php - 从第一个表中选择一行，然后加入多个

> ID：13454789
> 
> 赞同：0
> 
> 时间：2012-11-19T13:28:01.883
> 
> 标签：php, sql, join

我有以下表格，

客户

```
client_id | client_name
2         | client 1
3         | client 2
4         | client 3 
```

新闻稿

```
press_release_id | date                  | title                 | client_id
1                | 2012-10-16 00:00:00   | new press release     | 3
2                | 2012-10-16 00:00:00   | worlwide news         | 2 
```

新闻稿内容

```
press_release_id | content | translation
1                | content | en
2                | content | fr 
```

我想编写一个基本上为每个客户选择最新新闻稿的查询。该列表将只为每个新闻稿返回 1 个客户

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:31:12.813

尝试这个：

```
SELECT 
  c.client_name,
  pr.date,
  pr.title, 
  pc.content,
  pc.translation
FROM clients c
INNER JOIN pressreleases pr ON c.client_id = pr.client_id
INNER JOIN
(
   SELECT 
     press_release_id, MAX(date) LatestDate
   FROM pressreleases 
   GROUP BY press_relaese_id
) pl ON pr.press_release_id = pl.press_release_id AND pr.date = pl.latestdate
INNER JOIN press releasecontent pc ON pr.press_release_id = pc.press_release_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:32:35.593

```
SELECT  a.*, b.*, d.*
FROM    clients a
        INNER JOIN pressReleases b
            ON a.client_ID = b.client_ID
        INNER JOIN
        (
            SELECT client_ID, MAX(date) maxDate
            FROM pressReleases
            GROUP BY client_ID
        ) c ON b.date = c.mAxDate AND
                b.client_ID = c.client_ID
        INNER JOIN pressReleaseContent d
            ON b.press_release_id = d.press_release_id 
```

*   [SQLFiddle Demo（*架构可能不同，但他们有相同的想法*）](http://sqlfiddle.com/#!2/89929/3)
*   [上一个答案（浏览**每个条目的最大记录**）](https://stackoverflow.com/a/12586263/491243)

# java - 在 oracle 10g 中使用 play framework 2.0

> ID：13454790
> 
> 赞同：3
> 
> 时间：2012-11-19T13:28:02.230
> 
> 标签：java, playframework, oracle10g, configuration-files

我尝试将播放框架示例连接到 oracle 10g db，所以我使用这些字符串连接：

```
jpa.dialect=org.hibernate.dialect.Oracle10gDialect
db.url=jdbc:oracle:thin:@10.0.2.1521:1521:play
db.driver=oracle.jdbc.driver.OracleDriver
db.user=sysdba
db.pass=tongji 
```

并将 ojdbc14.jar 放到`/lib directory`. 但我得到这个错误： ![在此处输入图像描述](../Images/a352fe0fecf4103ff11b81adce0c1359.png)

我尝试了不同的东西（放在`""`每一行，尝试`localhost`而不是我的听众的 IP 地址，......）但没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T13:55:11.473

对于默认数据库键，其格式为设置名称：`db.default.key-name`.

试试这个：

```
db.default.url="jdbc:oracle:thin:@10.0.2.1521:1521:play"
db.default.driver=oracle.jdbc.driver.OracleDriver
db.default.user=sysdba
db.default.pass=tongji 
```

（*当然要插入正确的 URL 和凭据等，我不知道 Oracle 的连接 URL 的格式*）

# php - jqplot 从 php-mysql 检索结果

> ID：13454793
> 
> 赞同：0
> 
> 时间：2012-11-19T13:28:09.933
> 
> 标签：php, javascript, jquery, mysql, jqplot

我在使用 jqplot 绘制饼图时遇到问题。

从 php 获得结果后，我使用 json_encode 将其转换为 json。输出是

```
{"a":2,"b":1,"c":5,"d":650} 
```

现在，当我尝试将这些结果放入我的 javascript

```
<script class="code" type="text/javascript">
$(document).ready(function(){
    // method 1
    //var data1 = document.getElementById("dataArray").value;
    //eval('data1 = '+data+';');

    // method 2
    var data1 = <?php echo json_encode($data); ?>;

    var plot1 = jQuery.jqplot ('Chart', [data1], 
    { 
        seriesDefaults: {
            // Make this a pie chart.
            renderer: jQuery.jqplot.PieRenderer, 
            rendererOptions: {
                // Put data labels on the pie slices.
                // By default, labels show the percentage of the slice.
                showDataLabels: true
            }
        }, 
        legend: { show:true, location: 'e' }
    }
    );
});
</script> 
```

我尝试了两种方法，第一种将其放在隐藏字段中，第二种直接从 PHP 中检索。这两者都会导致`Uncaught. No plot target specified`我的 Chrome 控制台出现错误。

我在这里做错了什么？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:39:30.610

正如阿萨德所说，我的愚蠢错误是`Chart`没有指定为元素。所以是的，如果其他人遇到同样的问题，请务必检查一下。:)

# javascript - Ajax 和重写引擎

> ID：13454795
> 
> 赞同：2
> 
> 时间：2012-11-19T13:28:17.233
> 
> 标签：javascript, ajax, .htaccess

我有一个ajax问题并重写引擎。我创建了一个站点，在这里我使用了这个加载更多脚本：

> [http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html](http://www.9lessons.info/2009/12/twitter-style-load-more-results-with.html)

当 url 看起来像这样：**example.com/user.php** ?u=ExampleUser 但我在 .htaccess 中有这个：

```
RewriteRule ^u/(.*) user.php?u=$1 [L] 
```

因此，如果我输入类似**example.com/u/ExampleUser**的内容，我会得到如下用户名：

```
$username = $_GET['u']; 
```

但是以这种方式，当我单击加载更多时，它不会从用户那里加载更多帖子，它只是开始将网站本身引导到 div 框（就像它是 iframe 一样......）。请帮助我，这是必要的。这是我的脚本，它应该从 MySQL 数据库加载更多信息（$id 是数据库中的用户 ID）：

```
$(function() {
    // More Button
    $('.more').live("click",function() {
        var ID = $(this).attr("id");
        if (ID) {
            $("#more" + ID).html('<img src="moreajax.gif" />');

            $.ajax({
                type: "POST",
                url: "ajax_more.php",
                data: 'lastmsg='+ID+'&user='+<? echo $id; ?>,
                cache: false,
                success: function(html) {
                    $("#container").append(html);
                    $("#more"+ID).remove();
                }
            });
        } else {
            $(".morebox").html('The End');
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:05:12.460

不知道代码的整个上下文，*看起来*当进行 ajax 调用时，最终的 url 类似于`domain.tld/u/ajax_more.php`.

我通过在 javascript 对象中维护一个常量列表来解决这个问题。

例如，我有一个`paths.php`包含以下内容的文件：

```
<?php
    header("Content-Type: text/javascript");
    echo "
        myNamespace.paths = {
            RELATIVE_FOLDER: '<?=RELATIVE_FOLDER?>',
            // add more as required...
        }
    ";
?> 
```

这就像常规脚本（带有`script`标签）一样包含在页面中，并且从那时起，`myNamespace.paths`它将包含您的常量，如服务器返回的那样。

就我而言，如果 URL 是“http://www.example.org/path/to/my/dev/env”，我会在服务器端`RELATIVE_FOLDER`设置为`/path/to/my/dev/env/`，然后将其包含在路径对象中.

稍后，在您的 ajax 调用中：

```
$.ajax({
    type: "POST",
    url: myNamespace.paths.RELATIVE_FOLDER + "ajax_more.php",
    // ... everything else
}); 
```

* * *

我注意到您将 PHP 直接注入脚本没有问题。这不一定是坏事，但它确实让你更难缩小你的 js。这就是为什么我用一个单独的文件来存储常量，而不是直接用`<?= ... ?>`标签将它注入到 javascript 本身中的原因。

# c# - 在运行时使用未分配的局部变量

> ID：13454800
> 
> 赞同：0
> 
> 时间：2012-11-19T13:28:44.667
> 
> 标签：c#, wpf, sql-server-2005

wpf 应用程序实际上我创建帐户应用程序我去显示打开 amt。打开 amt 等于 dr_amt-cr_amt 。dr_amt 和 cr_amt 是我可以做的 amt 表的列名

```
double a, b, c;

SqlConnection con = new SqlConnection("my conn");

SqlCommand cmd = new SqlCommand("select sum(dr_amt),sum(cr_amt) from amt where id='"+tex1.Text+"'", con);

con.Open();

SqlDataReader dr = cmd.ExecuteReader();

while (dr.Read())

{
    a = Convert.ToDouble(dr[0]);
    b = Convert.ToDouble(dr[1]);
}
c = a - b;

textBox3.Text =Convert.ToString( c); 
```

在构建此代码时，我看到错误使用未分配的局部变量'a'和'b'我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:30:56.457

> 在构建此代码时，我看到错误 Use of unassigned local variable'a' and 'b'

是的，你会的。它们没有明确分配，因为您的`while`循环可能不会执行。

如果没有行，您希望结果是什么？这个问题的答案将决定你应该做什么。（另外，如果有*不止*一行，只有最后一行会影响结果 - 这是故意的吗？）

例如，您*可以*只给它们值以开始：

```
double a = 0, b = 0, c; 
```

如果没有行，这将为您提供 0 的结果。如果那是你想要的...

（请注意，我会尽可能晚地声明变量。）

此外，**请**使用参数化 SQL。您当前的代码容易受到[SQL 注入攻击](http://bobby-tables.com)。哦，使用`using`语句来确保您适当地关闭命令和异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:31:40.767

您需要设置 a 和 b，因为当 dr 中没有数据时，while 循环甚至不会执行一次迭代。

```
double a = 0, b = 0, c; 
```

# css - div 浮动或向左和顶部显示内联块

> ID：13454802
> 
> 赞同：2
> 
> 时间：2012-11-19T13:28:50.290
> 
> 标签：css, html

我在 div 中有这样的动态数据：http: [//jsfiddle.net/rvWzr/](http://jsfiddle.net/rvWzr/)

```
<div class="container">
<div style="width:200px;height:100px;">1</div>           
<div style="width:200px;height:300px;">2</div> 
<div style="width:200px;height:140px;">3</div> 
<div style="width:200px;height:210px;">4</div> 
<div style="width:200px;height:140px;">5</div> 
<div style="width:200px;height:120px;">6</div> 
</div>​

.container div{
display:inline-block;
border:1px solid black;
margin:0px 0px 20px 20px;
}​ 
```

在我的屏幕上，它看起来像这样： ![在此处输入图像描述](../Images/dd99f80e87ee6a6f54c12f5c5baaac6a.png)

但我希望它看起来像这样，以免浪费空间： ![在此处输入图像描述](../Images/43f471ad7912d4f54c727d6afe850e37.png)

我怎样才能做到这一点？有没有像“float:left top;”这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:32:31.247

不幸的是，此功能不存在。您可以将代码重写为列，但我担心这在调整大小时不够健壮。

## 更新

随着 Flexbox 的兴起（所有主流浏览器都支持），终于有一个简单的解决方案可以满足我们中那些不怕 IE8/IE9 不受支持的大胆人士的需求！

`**[Flexbox - Guide](http://css-tricks.com/snippets/css/a-guide-to-flexbox/)**`

`**[Flexbox - Support](http://caniuse.com/#search=flex)**`

*如果它是一个急需的功能并且您现在需要它，我建议您使用为您执行此操作的 js-plugin。我曾经使用过**[jq-masonry](http://masonry.desandro.com/)**并且对它非常满意。*

# sql - 通过联合使用不同的顺序

> ID：13454815
> 
> 赞同：14
> 
> 时间：2012-11-19T13:29:21.427
> 
> 标签：sql, sql-server, tsql

我想写一个查询

```
 select top 10 * from A
    order by price
    union
    select top 3 * from A 
    order by price 
```

或者那样的

```
 select top 10 * from A
    where name like '%smt%'
    order by price
    union
    select top 3 * from A
    where name not like '%smt%'
    order by price 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T13:32:47.287

这应该有效：

```
SELECT * 
FROM (SELECT TOP 10 A.*, 0 AS Ordinal
      FROM A
      ORDER BY [Price]) AS A1

UNION ALL

SELECT * 
FROM (SELECT TOP 3 A.*, 1 AS Ordinal
      FROM A
      ORDER BY [Name]) AS A2

ORDER BY Ordinal 
```

来自[**MSDN**](http://msdn.microsoft.com/en-us/library/ms188385.aspx)：

> 在使用 UNION、EXCEPT 或 INTERSECT 运算符的查询中，仅允许在语句末尾使用 ORDER BY。此限制仅适用于在顶级查询**而不是子查询**中指定 UNION、EXCEPT 和 INTERSECT 时。

**已编辑**：强制您需要将 an`ORDER BY`应用于外部查询的顺序。我在两个查询中都添加了一个常量值列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T13:32:55.083

这是一种真正的hacky方式。您可能希望这些在现实中作为单独的查询，但这应该会给您想要的结果......

```
select *
from (
  select top 10 *, 1 as 'ord', price as 'ordprice' from A
  union 
  select top 3 *, 2 as 'ord', 0 as 'ordprice' from A
) a
order by ord, ordprice, name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T13:36:57.947

UNION 不喜欢 UNIONed 表达式中的 ORDER by 子句。试试这个：

```
SELECT * FROM
   (SELECT TOP 10 * FROM A ORDER BY Price) SetA
UNION
SELECT * FROM
   (SELECT TOP 3 * FROM a ORDER BY name) Setb
[ORDER BY something] 
```

这欺骗了 UNION 运算符忽略 ORDER BY，它们仍然在 TOP 运算符上正确运行。如果您愿意，您可以应用最终的 ORDER BY 来订购 UNIONed 集。

[现在已编辑，不再完全适用于您的问题！]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:33:37.037

```
select top 10 *,0 as RS from A
union
select top 3 *,1 as RS from A 
order by
    RS,
    CASE WHEN RS=0 THEN price END, --Don't affect RS 1
    name 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-06-19T12:14:49.293

cmd.CommandText = "SELECT 0 AS Employee_ID, 'No Employees' as Employee_FullName, 'id1' Orderkey UNION ALL SELECT Employee_ID, Employee_FullName, 'id2' Orderkey FROM tblEmployee ORDER BY Orderkey, Employee_FullName"

ds = dbconn.SelectQuery(cmd)

ds.Tables(0).Columns.Remove(ds.Tables(0).Columns("Orderkey"))

# tfs - 无法在代理 TFS 2010 上运行 Web 测试

> ID：13454821
> 
> 赞同：2
> 
> 时间：2012-11-19T13:29:43.157
> 
> 标签：tfs, performance-testing

我遇到了数据绑定 Web 性能测试的问题。我有两个网络测试，每个测试都绑定到不同的 CSV 文件。最初创建的第一个运行良好。但是第二个网络测试抛出了以下内容。

**错误**：

```
Could not run Web test 'WebTest1' on agent {{SERVER}}: Could not access table 'Data#csv' in data source '{{Datasource}}' of test '6181b289-71fa-478f-8341-eba270b46c2a': No value given for one or more required parameters. 
```

我在本地运行它们。没有设置控制器或代理，我正在使用`VS 2010 SP1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T11:41:08.143

在 Web 测试中加载的 Visual Studio 中打开 CSV 文件，并将标头和值的分隔符从 更改为`;`。`,`例如：

前：

```
username;password;shopID;periodID
user1;password11;1;10
user2;password22;2;10 
```

后：

```
username,password,shopID,periodID
user1,password11,1,10
user2,password22,2,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T15:13:52.513

从 SQL Server 查询的结果创建我的 .CVS 文件后，我收到了上述错误。用记事本检查 .CVS 后，我发现它被格式化为 UTF-8。从记事本只需将编码设置为 ANSI 而不是 UTF-8 或 Unicode，这将解决问题。

# regex - delphi TRegEx 在 perl 风格的正则表达式中不区分大小写的问题

> ID：13454822
> 
> 赞同：1
> 
> 时间：2012-11-19T13:29:44.613
> 
> 标签：regex, delphi

当我对长文本使用 TRegEx 并且长文本来自网络时，我遇到了问题！我使用 Indy 获取网页源，然后使用 Regex 查找链接！但是正则表达式无法正常工作的问题！

我的正则表达式：

```
'/stream_map=(.[^&]*?)&/i' 
```

来源：

```
const HTTP_RESPONSE_OK = 200;

function GetPage(aURL: string): string;
var
  Response: TStringStream;
  HTTP: TIdHTTP;
begin
  Result := '';
  Response := TStringStream.Create('');
  try
    HTTP := TIdHTTP.Create(nil);
    try
      HTTP.Get(aURL, Response);
      if HTTP.ResponseCode = HTTP_RESPONSE_OK then begin
        Result := Response.DataString;
      end else begin
        // TODO -cLogging: add some logging
      end;
    finally
      HTTP.Free;
    end;
  finally
    Response.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
    var 
    regex : TRegEx;
    exper : string;
    result : string;
    fmatch : TMatchCollection;
    begin

    //Edit1.Text = http://www.youtube.com/watch?v=rzADrNmwYI0&feature=player_embedded 
    Memo1.Text := GetPage(Edit1.Text);  
    exper := '/stream_map=(.[^&]*?)&/i';
    regex := TRegEx.Create(exper);
    fmatch := regex.Matches(Memo1.Text);  //Memo1.Text = web pagesource
    ShowMessage(IntToStr(fmatch.Count));
end; 
```

Memo1.Text 包含 youtube 网页的源代码： * 我无法添加整个源代码，但这部分包含 Regex hae 要查找的内容*

```
<!DOCTYPE html>
  <html lang="ar" dir="rtl" >

<head>
      <script>
var yt = yt || {};yt.timing = yt.timing || {};yt.timing.tick = function(label, opt_time) {var timer = yt.timing['timer'] || {};if(opt_time) {timer[label] = opt_time;}else {timer[label] = new Date().getTime();}yt.timing['timer'] = timer;};yt.timing.info = function(label, value) {var info_args = yt.timing['info_args'] || {};info_args[label] = value;yt.timing['info_args'] = info_args;};yt.timing.info('e', "922401,920704,912806,927201,925706,922403,913546,913556,916805,920201,901451");yt.timing.wff = true;yt.timing.info('an', "");if (document.webkitVisibilityState == 'prerender') {document.addEventListener('webkitvisibilitychange', function() {yt.timing.tick('start');}, false);}yt.timing.tick('start');yt.timing.info('li','0');try {yt.timing['srt'] = window.gtbExternal && window.gtbExternal.pageT() ||window.external && window.external.pageT;} catch(e) {}if (window.chrome && window.chrome.csi) {yt.timing['srt'] = Math.floor(window.chrome.csi().pageT);}if (window.msPerformance && window.msPerformance.timing) {yt.timing['srt'] = window.msPerformance.timing.responseStart - window.msPerformance.timing.navigationStart;}    </script>

<script>var yt = yt || {};yt.preload = {};yt.preload.counter_ = 0;yt.preload.start = function(src) {var img = new Image();var counter = ++yt.preload.counter_;yt.preload[counter] = img;img.onload = img.onerror = function () {delete yt.preload[counter];};img.src = src;img = null;};yt.preload.start("http:\/\/o-o---preferred---sn-apo3qvuoxuxbt-j5pe---v1---lscache6.c.youtube.com\/crossdomain.xml");yt.preload.start("http:\/\/o-o---preferred---sn-apo3qvuoxuxbt-j5pe---v1---lscache6.c.youtube.com\/generate_204?ip=41.130.156.126\u0026upn=kcE458sG0pI\u0026sparams=algorithm%2Cburst%2Ccp%2Cfactor%2Cid%2Cip%2Cipbits%2Citag%2Csource%2Cupn%2Cexpire\u0026fexp=922401%2C920704%2C912806%2C927201%2C925706%2C922403%2C913546%2C913556%2C916805%2C920201%2C901451\u0026mt=1353328753\u0026ms=au\u0026algorithm=throttle-factor\u0026burst=40\u0026ipbits=8\u0026itag=34\u0026sver=3\u0026signature=714099358414A97203AB854A2368EA03C52C15B1.5A59DBDF733A57676263F529B85080CCB60567C0\u0026mv=m\u0026source=youtube\u0026expire=1353352420\u0026key=yt1\u0026factor=1.25\u0026cp=U0hUSFNQUF9HSkNONF9LSlRFOjNUWG00ckdxbFE2\u0026id=af3003acd9b0608d");</script><title>&#x202a;Katyusha - Original Version&#x202c;&rlm; - YouTube</title><link rel="search" type="application/opensearchdescription+xml" href="http://www.youtube.com/opensearch?locale=ar_EG" title="Ø¨Ø­Ø« Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ YouTube"><link rel="icon" href="http://s.ytimg.com/yts/img/favicon-vfldLzJxy.ico" type="image/x-icon"><link rel="shortcut icon" href="http://s.ytimg.com/yts/img/favicon-vfldLzJxy.ico" type="image/x-icon">   <link rel="icon" href="//s.ytimg.com/yts/img/favicon_32-vflWoMFGx.png" sizes="32x32"><link rel="canonical" href="/watch?v=rzADrNmwYI0"><link rel="alternate" media="handheld" href="http://m.youtube.com/watch?v=rzADrNmwYI0"><link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.youtube.com/watch?v=rzADrNmwYI0"><link rel="shortlink" href="http://youtu.be/rzADrNmwYI0">    <meta name="title" content="Katyusha - Original Version">

    <meta name="description" content="Dedicate to friend &quot;Jenya&quot;. Sung by Lidiya Ruslanova.">

    <meta name="keywords" content="katusha, Lidiya, katyusha, Ruslanova">

    <link rel="alternate" type="application/json+oembed" href="http://www.youtube.com/oembed?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DrzADrNmwYI0&amp;format=json" title="Katyusha - Original Version">
  <link rel="alternate" type="text/xml+oembed" href="http://www.youtube.com/oembed?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DrzADrNmwYI0&amp;format=xml" title="Katyusha - Original Version">

      <meta property="og:url" content="http://www.youtube.com/watch?v=rzADrNmwYI0">
    <meta property="og:title" content="Katyusha - Original Version">
    <meta property="og:description" content="Dedicate to friend &quot;Jenya&quot;. Sung by Lidiya Ruslanova.">
    <meta property="og:type" content="video">
    <meta property="og:image" content="http://i3.ytimg.com/vi/rzADrNmwYI0/mqdefault.jpg">
      <meta property="og:video" content="http://www.youtube.com/v/rzADrNmwYI0?version=3&amp;autohide=1">
      <meta property="og:video:type" content="application/x-shockwave-flash">
      <meta property="og:video:width" content="480">
      <meta property="og:video:height" content="360">
    <meta property="og:site_name" content="YouTube">
    <meta property="fb:app_id" content="87741124305">
    <meta name="twitter:card" value="player">
    <meta name="twitter:site" value="@youtube">
      <meta name="twitter:player" value="https://www.youtube.com/embed/rzADrNmwYI0">
      <meta property="twitter:player:width" content="480">
      <meta property="twitter:player:height" content="360">

  <link id="css-3848904683" rel="stylesheet" href="http://s.ytimg.com/yts/cssbin/www-core-rtl-vflG11Gbd.css">

 <script>
    yt.setConfig({
      'VIDEO_ID': "rzADrNmwYI0"    });
    yt.setAjaxToken('watch_actions_ajax', "");

    if (window['gYouTubePlayerReady']) {
      yt.registerGlobal('gYouTubePlayerReady');
    }
  </script>

  <script>
    yt = yt || {};
      yt.playerConfig = {"assets": {"css_actions": "http:\/\/s.ytimg.com\/yts\/cssbin\/www-player-actions-vflJeCcsD.css", "html": "\/html5_player_template", "css": "http:\/\/s.ytimg.com\/yts\/cssbin\/www-player-vfltPqzFT.css", "js": "http:\/\/s.ytimg.com\/yts\/jsbin\/html5player-vflfytLU0.js"}, "url": "http:\/\/s.ytimg.com\/yts\/swfbin\/watch_as3-vfle2krMl.swf", "min_version": "8.0.0", "args": {"is_html5_mobile_device": false, "fexp": "909713,914071,901460,922401,920704,912806,927201,925706,922403,913546,913556,916805,920201,901451", "ptk": "youtube_none", "enablecsi": "1", "allow_embed": 1, "rvs": "view_count=125%2C985\u0026feature_type=fvwp\u0026author=ulaghchi\u0026title=Katyusha\u0026length_seconds=158\u0026featured=1\u0026id=5w0k75NuOdk,view_count=106%2C966\u0026author=etalococh\u0026length_seconds=145\u0026id=h-qTrtu6uS4\u0026title=Joseph+Stalin+dancing+Katyusha,view_count=170%2C742\u0026author=lekutski\u0026length_seconds=289\u0026id=Y-wFYkGvX2c\u0026title=%D0%AE.%D0%A8%D0%B5%D0%B2%D1%87%D1%83%D0%BA-%22%D0%A0%D0%B0%D1%81%D0%BA%D0%B8%D0%BD%D1%83%D0%BB%D0%BE%D1%81%D1%8C+%D0%BC%D0%BE%D1%80%D0%B5+%D1%88%D0%B8%D1%80%D0%BE%D0%BA%D0%BE%22,view_count=2%2C053%2C337\u0026author=Vdovkinanadya\u0026length_seconds=127\u0026id=llS6p4YzsaY\u0026title=%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0+%28%D0%9A%D0%BE%D0%BD%D1%86%D0%B5%D1%80%D1%82+%22%D0%9F%D0%B5%D1%81%D0%BD%D0%B8+%D0%B2%D0%BE%D0%B5%D0%BD%D0%BD%D1%8B%D1%85+%D0%BB%D0%B5%D1%82%22%29,view_count=553%2C516\u0026author=OdessaNLA\u0026length_seconds=230\u0026id=65RhWzrbqPA\u0026title=%D0%9F%D0%B5%D1%81%D0%BD%D0%B8+%D0%BF%D0%BE%D0%B1%D0%B5%D0%B4%D1%8B+2010+%22%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0%22+%28%D0%9D%D0%A3+%22%D0%9E%D0%AE%D0%90%22%29,view_count=418%2C833\u0026author=myevro\u0026length_seconds=125\u0026id=rnt-7MWxb8M\u0026title=%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0-%D0%9C%D0%B0%D1%80%D0%B8%D0%BD%D0%B0+%D0%94%D0%B5%D0%B2%D1%8F%D1%82%D0%BE%D0%B2%D0%B0+%D0%B8+%D0%9A%D0%B0%D1%82%D1%8F+%D0%A0%D1%8F%D0%B1%D0%BE%D0%B2%D0%B0.,view_count=97%2C149\u0026author=muratshawn\u0026length_seconds=196\u0026id=C1KFoJfpiao\u0026title=Katyusha+%2F+%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0+-+Turkish+%26+Russian+Pride+together%21%21%21,view_count=291%2C062\u0026author=%D0%A2%D0%B0%D1%82%D1%8C%D1%8F%D0%BD%D0%B0+%D0%91%D1%83%D0%BB%D0%B0%D0%BD%D0%BE%D0%B2%D0%B0\u0026length_seconds=139\u0026id=-w-0sFmBo0I\u0026title=%22%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0%22+%D0%A2.%D0%91%D1%83%D0%BB%D0%B0%D0%BD%D0%BE%D0%B2%D0%B0+%28live%29,view_count=126%2C353\u0026author=SovietMusicLover\u0026length_seconds=175\u0026id=MqgHn27h60c\u0026title=Katyusha+English+Version+%28with+lyrics%29,view_count=645%2C699\u0026author=stmnf\u0026length_seconds=103\u0026id=n0kgtHRGkjk\u0026title=%D0%9A%D0%B0%D1%82%D1%8E%D1%88%D0%B0+%D0%BD%D0%B0+%D0%BA%D0%B8%D1%82%D0%B0%D0%B9%D1%81%D0%BA%D0%BE%D0%BC+%28Katyusha+-+Chinese+version%29,view_count=141%2C603\u0026author=joseeash\u0026length_seconds=181\u0026id=nEUqmMNf6dk\u0026title=%D0%9B%D0%B8%D0%B4%D0%B8%D1%8F+%D0%A0%D1%83%D1%81%D0%BB%D0%B0%D0%BD%D0%BE%D0%B2%D0%B0+%D0%9E%D0%BA%D1%80%D0%B0%D1%81%D0%B8%D0%BB%D1%81%D1%8F+%D0%BC%D0%B5%D1%81%D1%8F%D1%86+%D0%B1%D0%B0%D0%B3%D1%80%D1%8F%D0%BD%D1%86%D0%B5%D0%BC,view_count=161%2C453\u0026author=olegtimes\u0026length_seconds=179\u0026id=bmaRGOa0mz4\u0026title=%D0%A0%D0%B0%D1%81%D0%BA%D0%B8%D0%BD%D1%83%D0%BB%D0%BE%D1%81%D1%8C+%D0%BC%D0%BE%D1%80%D0%B5+%D1%88%D0%B8%D1%80%D0%BE%D0%BA%D0%BE...%28%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8+%D0%BC%D0%BE%D0%B5%D0%B3%D0%BE+%D0%B4%D0%B5%D0%B4%D0%B0%29", "vq": "auto", "account_playback_token": "", "autohide": "2", "csi_page_type": "watch5", "keywords": "katusha,Lidiya,katyusha,Ruslanova", "cr": "EG", "fmt_list": "43\/640x360\/99\/0\/0,34\/640x360\/9\/0\/115,18\/640x360\/9\/0\/115,5\/320x240\/7\/0\/0,36\/320x240\/99\/0\/0,17\/176x144\/99\/0\/0", "title": "Katyusha - Original Version", "length_seconds": 178, "feature": "player_embedded", "enablejsapi": 1, "plid": "AATO2QkpPQoh4PMK", "tmi": "1", "watch_xlb": "http:\/\/s.ytimg.com\/yts\/xlbbin\/watch-strings-ar_EG-vfl8x8AOb.xlb", "sdetail": "f:player_embedded,", "url_encoded_fmt_stream_map": "itag=43\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v24---lscache6.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dcp%252Cid%252Cip%252Cipbits%252Citag%252Cratebypass%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26key%3Dyt1%26expire%3D1353356020%26itag%3D43%26ipbits%3D8%26sver%3D3%26ratebypass%3Dyes%26mt%3D1353331452%26ip%3D41.130.156.126%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2Fwebm%3B+codecs%3D%22vp8.0%2C+vorbis%22\u0026fallback_host=tc.v24.cache6.c.youtube.com\u0026sig=49ABA8D1BEFB1DFC8A34723985E46C52C2345836.C90B5EB1FC04705DC80908D5DEB69355D9F27BF3\u0026quality=medium,itag=34\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v1---lscache6.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dalgorithm%252Cburst%252Ccp%252Cfactor%252Cid%252Cip%252Cipbits%252Citag%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26expire%3D1353356020%26algorithm%3Dthrottle-factor%26burst%3D40%26ip%3D41.130.156.126%26itag%3D34%26sver%3D3%26key%3Dyt1%26mt%3D1353331452%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26ipbits%3D8%26factor%3D1.25%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2Fx-flv\u0026fallback_host=tc.v1.cache6.c.youtube.com\u0026sig=4FEAD1755F1E057F47DDD670D4AA35BD73A23F26.3FA850543DC5016C9ED03B1C46CFF1A010CB6A66\u0026quality=medium,itag=18\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v5---lscache1.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dcp%252Cid%252Cip%252Cipbits%252Citag%252Cratebypass%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26key%3Dyt1%26expire%3D1353356020%26itag%3D18%26ipbits%3D8%26sver%3D3%26ratebypass%3Dyes%26mt%3D1353331452%26ip%3D41.130.156.126%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2Fmp4%3B+codecs%3D%22avc1.42001E%2C+mp4a.40.2%22\u0026fallback_host=tc.v5.cache1.c.youtube.com\u0026sig=C4E2F657F55A18E9295DD24FFA840608B4253F93.45B3E0816ADA603DC572C59D9E8586AA4385C009\u0026quality=medium,itag=5\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v17---lscache8.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dalgorithm%252Cburst%252Ccp%252Cfactor%252Cid%252Cip%252Cipbits%252Citag%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26expire%3D1353356020%26algorithm%3Dthrottle-factor%26burst%3D40%26ip%3D41.130.156.126%26itag%3D5%26sver%3D3%26key%3Dyt1%26mt%3D1353331452%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26ipbits%3D8%26factor%3D1.25%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2Fx-flv\u0026fallback_host=tc.v17.cache8.c.youtube.com\u0026sig=3B3F89080069727F65C5EE42121051AF7807BD78.D028F451AF0CD7C6D2C31D4B66DBB6748B2C63C3\u0026quality=small,itag=36\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v8---lscache6.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dalgorithm%252Cburst%252Ccp%252Cfactor%252Cid%252Cip%252Cipbits%252Citag%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26expire%3D1353356020%26algorithm%3Dthrottle-factor%26burst%3D40%26ip%3D41.130.156.126%26itag%3D36%26sver%3D3%26key%3Dyt1%26mt%3D1353331452%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26ipbits%3D8%26factor%3D1.25%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2F3gpp%3B+codecs%3D%22mp4v.20.3%2C+mp4a.40.2%22\u0026fallback_host=tc.v8.cache6.c.youtube.com\u0026sig=903B784F3388B39AC124E407088589455737ECAD.5D858C302F1A4098EBD26D28175F1528A3950733\u0026quality=small,itag=17\u0026url=http%3A%2F%2Fo-o---preferred---sn-apo3qvuoxuxbt-j5pe---v5---lscache6.c.youtube.com%2Fvideoplayback%3Fupn%3DsKXkbQaXRVo%26sparams%3Dalgorithm%252Cburst%252Ccp%252Cfactor%252Cid%252Cip%252Cipbits%252Citag%252Csource%252Cupn%252Cexpire%26fexp%3D909713%252C914071%252C901460%252C922401%252C920704%252C912806%252C927201%252C925706%252C922403%252C913546%252C913556%252C916805%252C920201%252C901451%26expire%3D1353356020%26algorithm%3Dthrottle-factor%26burst%3D40%26ip%3D41.130.156.126%26itag%3D17%26sver%3D3%26key%3Dyt1%26mt%3D1353331452%26mv%3Dm%26source%3Dyoutube%26ms%3Dau%26ipbits%3D8%26factor%3D1.25%26cp%3DU0hUSFNQVF9HSkNONF9LSlhBOnlKX3RvWnNqQmpJ%26id%3Daf3003acd9b0608d\u0026type=video%2F3gpp%3B+codecs%3D%22mp4v.20.3%2C+mp4a.40.2%22\u0026fallback_host=tc.v5.cache6.c.youtube.com\u0026sig=A7B5DE52FA6841DE8EAFE6E0EED1EC6C16BACBDA.5E93B423ACC4C8DC5408F2679B77BA62DFEA5C27\u0026quality=small", "watermark": ",http:\/\/s.ytimg.com\/yts\/img\/watermark\/youtube_watermark-vflHX6b6E.png,http:\/\/s.ytimg.com\/yts\/img\/watermark\/youtube_hd_watermark-vflAzLcD6.png", "timestamp": 1353331463, "storyboard_spec": "http:\/\/i3.ytimg.com\/sb\/rzADrNmwYI0\/storyboard3_L$L\/$N.jpg|48#27#100#10#10#0#default#GqaoUNyA6isSrQNPTbprBE4NYTM|60#45#90#10#10#2000#M$M#sFARy7zZvYQwYsVsY9bympTRZxk|120#90#90#5#5#2000#M$M#k65LP1yOXoOjotxpIEPQsPkjIz4|240#180#90#3#3#2000#M$M#hIi9MEmhmAlaVEse_eDZ0NquQ6g", "showpopout": 1, "hl": "ar_EG", "no_get_video_log": "1", "endscreen_module": "http:\/\/s.ytimg.com\/yts\/swfbin\/endscreen-vflF6koqY.swf", "referrer": null, "video_id": "rzADrNmwYI0", "sendtmp": "1", "sk": "nQCANo-fhqpEFHwwW1pEcr11kG4XFL4MC", "pltype": "contentugc", "t": "vjVQa1PpcFNl5t5AGz5yeB9bo6aI4nZA-J_9nSI_sz8=", "loudness": -18.3199996948}, "url_v9as2": "http:\/\/s.ytimg.com\/yts\/swfbin\/cps-vflYNIJaJ.swf", "params": {"allowscriptaccess": "always", "allowfullscreen": "true", "bgcolor": "#000000"}, "attrs": {"id": "movie_player"}, "url_v8": "http:\/\/s.ytimg.com\/yts\/swfbin\/cps-vflYNIJaJ.swf", "html5": false};
      yt.setConfig({
    'EMBED_HTML_TEMPLATE': "\u003ciframe width=\"__width__\" height=\"__height__\" src=\"__url__\" frameborder=\"0\" allowfullscreen\u003e\u003c\/iframe\u003e",
    'EMBED_HTML_URL': "http:\/\/www.youtube.com\/embed\/__videoid__"
  });
    yt.setMsg('FLASH_UPGRADE', "\u003cdiv class=\"yt-alert yt-alert-default yt-alert-error  yt-alert-player\"\u003e  \u003cdiv class=\"yt-alert-icon\"\u003e\n    \u003cimg s\u0072c=\"\/\/s.ytimg.com\/yts\/img\/pixel-vfl3z5WfW.gif\" class=\"icon master-sprite\" alt=\"\u0631\u0645\u0632 \u0627\u0644\u062a\u0646\u0628\u064a\u0647\"\u003e\n  \u003c\/div\u003e\n\u003cdiv class=\"yt-alert-buttons\"\u003e\u003c\/div\u003e\u003cdiv class=\"yt-alert-content\" role=\"alert\"\u003e    \u003cspan class=\"yt-alert-vertical-trick\"\u003e\u003c\/span\u003e\n    \u003cdiv class=\"yt-alert-message\"\u003e\n            \u064a\u062c\u0628 \u062a\u0631\u0642\u064a\u0629 Adobe Flash Player \u0644\u0645\u0634\u0627\u0647\u062f\u0629 \u0647\u0630\u0627 \u0627\u0644\u0641\u064a\u062f\u064a\u0648\. \u003cbr\u003e \u003ca href=\"http:\/\/get.adobe.com\/flashplayer\/\"\u003e\u0646\u0632\u0651\u0644\u0647 \u0645\u0646 Adobe.\u003c\/a\u003e\n    \u003c\/div\u003e\n\u003c\/div\u003e\u003c\/div\u003e");
  yt.setMsg('PLAYER_FALLBACK', "\u003cdiv class=\"yt-alert yt-alert-default yt-alert-error  yt-alert-player\"\u003e  \u003cdiv class=\"yt-alert-icon\"\u003e\n    \u003cimg s\u0072c=\"\/\/s.ytimg.com\/yts\/img\/pixel-vfl3z5WfW.gif\" class=\"icon master-sprite\" alt=\"\u0631\u0645\u0632 \u0627\u0644\u062a\u0646\u0628\u064a\u0647\"\u003e\n  \u003c\/div\u003e\n\u003cdiv class=\"yt-alert-buttons\"\u003e\u003c\/div\u003e\u003cdiv class=\"yt-alert-content\" role=\"alert\"\u003e    \u003cspan class=\"yt-alert-vertical-trick\"\u003e\u003c\/span\u003e\n    \u003cdiv class=\"yt-alert-message\"\u003e\n            \u064a\u0644\u0632\u0645 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0647\u0646\u0627\u0643 \u0645\u062a\u0635\u0641\u062d \u064a\u062a\u0648\u0641\u0631 \u0628\u0647 \u0645\u0634\u063a\u0644 Adobe Flash \u0623\u0648 HTML5 \u0644\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0641\u064a\u062f\u064a\u0648\. \u003cbr\u003e \u003ca href=\"http:\/\/get.adobe.com\/flashplayer\/\"\u003e\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0623\u062d\u062f\u062b \u0645\u0634\u063a\u0644 Flash\u003c\/a\u003e \u003cbr\u003e \u003ca href=\"\/html5\"\u003e\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0648\u0644 \u0627\u0644\u062a\u0631\u0642\u064a\u0629 \u0625\u0644\u0649 \u0645\u062a\u0635\u0641\u062d HTML5\u003c\/a\u003e\n    \u003c\/div\u003e\n\u003c\/div\u003e\u003c\/div\u003e");
  yt.setMsg('QUICKTIME_FALLBACK', "\u003cdiv class=\"yt-alert yt-alert-default yt-alert-error  yt-alert-player\"\u003e  \u003cdiv class=\"yt-alert-icon\"\u003e\n    \u003cimg s\u0072c=\"\/\/s.ytimg.com\/yts\/img\/pixel-vfl3z5WfW.gif\" class=\"icon master-sprite\" alt=\"\u0631\u0645\u0632 \u0627\u0644\u062a\u0646\u0628\u064a\u0647\"\u003e\n  \u003c\/div\u003e\n\u003cdiv class=\"yt-alert-buttons\"\u003e\u003c\/div\u003e\u003cdiv class=\"yt-alert-content\" role=\"alert\"\u003e    \u003cspan class=\"yt-alert-vertical-trick\"\u003e\u003c\/span\u003e\n    \u003cdiv class=\"yt-alert-message\"\u003e\n            \u064a\u0644\u0632\u0645 \u0628\u0631\u0646\u0627\u0645\u062c Adobe Flash Player \u0623\u0648 QuickTime \u0644\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0641\u064a\u062f\u064a\u0648\. \u003cbr\u003e \u003ca href=\"http:\/\/get.adobe.com\/flashplayer\/\"\u003e\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0623\u062d\u062f\u062b \u0625\u0635\u062f\u0627\u0631 \u0645\u0646 Flash Player\u003c\/a\u003e \u003cbr\u003e \u003ca href=\"http:\/\/www.apple.com\/quicktime\/download\/\"\u003e\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0623\u062d\u062f\u062b \u0625\u0635\u062f\u0627\u0631 \u0645\u0646 QuickTime\u003c\/a\u003e\n    \u003c\/div\u003e\n\u003c\/div\u003e\u003c\/div\u003e");

    (function() {
      var forceUpdate = yt.www.watch.player.updateConfig(yt.playerConfig);
      var youTubePlayer = yt.player.update('watch-player', yt.playerConfig,
          forceUpdate, gYouTubePlayerReady);
      yt.setConfig({'PLAYER_REFERENCE': youTubePlayer});
    })();
  </script>

  </script>

  <script>
    yt.setMsg({
      'ADDTO_WATCH_LATER_ADDED': "\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629",
      'ADDTO_WATCH_LATER_ERROR': "\u062e\u0637\u0623"
    });
  </script>

      <script>
if (window.yt.timing) {yt.timing.tick("js_foot");}    </script>

  <div id="debug">

  </div>

</body>
</html> 
```

匹配计数显示“0”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:06:10.863

在我看来，好像您对正则表达式使用了错误的语法。

```
'/stream_map=(.[^&]*?)&/i' 
```

看起来像 Perl 正则表达式语法。

对于 Delphi `TRegEx`，您需要删除斜杠分隔符并通过选项参数指定不区分大小写。像这样：

```
regex := TRegEx.Create('stream_map=(.[^&]*?)&', [roIgnoreCase]); 
```

# java - 如何使用字符串标记器从单词列表中删除单词？

> ID：13454824
> 
> 赞同：-2
> 
> 时间：2012-11-19T13:29:49.867
> 
> 标签：java, string, tokenize, pos-tagger

在 Java 中的 Pos Tagging 之后，我有一个单词列表。现在我想删除带有指定标签的特定单词。如何使用字符串标记器来删除标记的单词？比如to-PRP？以及所有带有标签 prp 的单词？

输入文件：

```
mike-NNS

Buses-NNP

Walk_VRB

to_PRP 
```

. . . . . . . . . 等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:15:41.883

```
 final List<String> result = new ArrayList<String>();

    final List<String> textList= getList(); // get your list

    final StringTokenizer tokenizer = 
      new StringTokenizer(textList, delimiter); // your delimiter
    while (tokenizer.hasMoreElements()) {
      final String token = tokenizer.nextToken();
      if (isValid(token)) { // implement your own isValid method
        result.add(token);
      }

    }
    return result; 
```

# ruby-on-rails - Ruby on Rails URL 格式

> ID：13454829
> 
> 赞同：6
> 
> 时间：2012-11-19T13:30:06.560
> 
> 标签：ruby-on-rails, ruby

我有一个 Ruby on Rails 应用程序，您可以在其中创建“帖子”。我首先使用脚手架生成器来生成作为字符串的标题和作为内容的正文。

每个'post'都有一个id的url，例如/1、/2、/3等。

有没有办法将其更改为一串随机字符，例如 /49sl、/l9sl 等？

### 更新

这是我所拥有的`posts_controller.rb`

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
   @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T13:38:05.847

Rails 使用`to_param`ActiveRecord 对象的方法将其解析为 URL。

假设您有办法生成这些唯一 ID（将其称为 IdGenerator），您可以执行以下操作：

1- 每当您持久保存 Post 对象并将其保存到数据库时生成此 id，假设在 url_id 列下

```
class Post < ActiveRecord::Base
  before_create :generate_url_id
  def generate_url_id
    self.url_id = IdGenerator.generate_id
  end
end 
```

2-在您的 Post 模型中覆盖该`to_param`方法：

```
class Post < ActiveRecord::Base
  def to_param
    return url_id
  end
end 
```

现在`post_path(@post)`将解析为 /posts/url_id

顺便说一句，如果您还没有 ID 生成器，您可以使用`SecureRandom.urlsafe_base64` 或[查看这里。](https://stackoverflow.com/questions/6021372/best-way-to-create-unique-token-in-rails)

阅读有关[to_param 文档的](http://apidock.com/rails/ActiveRecord/Integration/to_param)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T23:03:27.473

我希望这两个资源对您有所帮助：

1.  名为[obfuscate_id](https://github.com/namick/obfuscate_id)的 gem 。它以如下格式表示 ID：

    [http://tennisfans.eu/products/4656446465](http://tennisfans.eu/products/4656446465)

2.  另一个 gem - [masked_id](https://github.com/wbasmayor/masked_id)。它提供了类似的功能。您可以控制 url 创建的格式，在类中定义它。查看源代码，这个 gem 使用了 obfuscate_id gem 的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:42:14.647

在 Erez 手动方式旁边，您可以使用[**friendly_id**](https://github.com/norman/friendly_id) gem，并使用唯一的 id 作为您的 slug。

```
class Post < ActiveRecord::Base
  # FriendlyId
  friendly_id :uid

  # Set a unique user id on create
  before_save :set_uid, on: :create

  def set_uid
    self[uid] = rand(36**8).to_s(36)
  end
end 
```

请注意这里的uid的设置并不能保证唯一性。您当然需要添加某种验证，但整个主题与谷歌不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:00:22.420

Friendly_id 是一个很好的解决方案，如果你想使用 gem 的话。

关注此截屏视频：

[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

（视频或 asciicast，随您的喜好）

Ryan Bates 的截屏视频做得非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T04:55:43.317

如果您仍然想要另一个选项来生成 id，您可以尝试使用 UUID：

[https://en.wikipedia.org/wiki/Universally_unique_identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier)

还有一个可以轻松生成它们的红宝石：

[https://github.com/assaf/uuid](https://github.com/assaf/uuid)

但是，我会问：你为什么要让它们随机呢？如果您要做的是避免您的一个用户在 url 中键入另一个 id 并访问不属于他们的数据，那么您可能希望通过限定 finder 来限制控制器中的访问，如下所示：

```
def show
    @post = current_user.posts.where(:id => params[:id]).first
    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @post }
    end
end 
```

在这种情况下， current_user 是一个函数，它返回当前经过身份验证的用户（来自会话，或者您的应用程序逻辑规定的任何内容）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T18:37:05.917

您可以按照以下 3 个步骤为您的帖子提供随机 URL：

1- 在您的模型 (Post.rb) 中，在保存之前为每个帖子生成一个随机字符串。例如，

```
class Post < ActiveRecord::Base
  before_create :generate_url_id
  def generate_url_id
    self.url_id = SecureRandom.urlsafe_base64
  end
end 
```

2- 在您的模型 (Post.rb) 中，提供一个[to_param 方法](http://apidock.com/rails/ActiveRecord/Base/to_param)来覆盖 Rails 的默认 URL 生成。例如：

```
class Post < ActiveRecord::Base
  def to_param
    self.url_id
  end
end 
```

3- 在您的控制器 (PostsController.rb) 中，使用动态查找器通过其随机字符串查找您的帖子。例如，

```
class PostsController < ApplicationController
  def show
    @post = Post.find_by_url_id(params[:id])
    ...
  end
end 
```

我继续整理了[一个完整的示例并将其发布到 Github](https://github.com/kburkhardt/rails_url_demo)。

# javascript - 10 秒后结束 javascript 函数

> ID：13454830
> 
> 赞同：0
> 
> 时间：2012-11-19T13:30:08.370
> 
> 标签：javascript

我找到了一个 javascript 雪脚本。这是小提琴：http: [//jsfiddle.net/wj2K4/](http://jsfiddle.net/wj2K4/)

（非常好）

它只是一个噱头，我不想让它占据页面，所以我想在 10 或 30 秒后将其关闭。

我认为杀死脚本将是最简单的方法，但我找不到合适的命令。（或堆栈上的类似问题）

setTimeout() & setInterval() 不是我想要的。

想法？

这段代码毫无意义，但没有它我无法发布问题：

```
function doStart() {
if (!s.excludeMobile || !isMobile) {
  if (s.freezeOnBlur) {
    s.events.add(isIE?document:window,'mousemove',doDelayedStart);
  } else {
    doDelayedStart();
  }
}
// event cleanup
s.events.remove(window, 'load', doStart);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:35:57.023

用于`s.stop();`停止雪动画。看下面的代码，我是用来`setTimeout`停止动画的

```
function doStart() {
  if (!s.excludeMobile || !isMobile) {
    if (s.freezeOnBlur) {
      s.events.add(isIE?document:window,'mousemove',doDelayedStart);
    } else {
      doDelayedStart();
    }
  }
  // event cleanup
  s.events.remove(window, 'load', doStart);
  setTimeout(function(){s.stop();},15000); //stop after 15 seconds
} 
```

演示：http: [//jsfiddle.net/muthkum/wj2K4/1/](http://jsfiddle.net/muthkum/wj2K4/1/)

# php - php中array_push()的奇怪行为

> ID：13454834
> 
> 赞同：-5
> 
> 时间：2012-11-19T13:30:16.750
> 
> 标签：php, arrays

我在php的array_push函数中遇到了一个奇怪的问题。

让我们看看我的代码：

```
$sets_collection=array();
foreach($result['ques'] as $val){
      $sets_collection=array_push($sets_collection,$val['set']);
      } 
```

比它给我的错误：消息：array_push（）期望参数1是数组，给定整数

但是当我这样做时，它工作正常：

```
$sets_collection=array();
      $i=0;
        foreach($result['ques'] as $val)
        {
        $sets_collection[$i]=$val['set']; 
        $i++;
        } 
```

**我的问题是为什么会发生这种情况，是否必须有一个数组的索引才能执行推送操作？因为在我的第一种情况下，数组 $set_collection 没有任何索引，请告诉我为什么会这样？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:32:25.510

试试这个

```
$sets_collection=array();

foreach($result['ques'] as $val){
    array_push($sets_collection,$val['set']); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:34:02.377

这是因为[`array_push()`](http://php.net/manual/en/function.array-push.php)返回数组内的新元素数量。您不会将返回的值分配给数组变量。第一个参数实际上是通过引用传递的。因此，它的值被函数改变了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T13:36:07.670

这是因为`array_push`返回数组中新的元素数量，当您在第一次迭代中推送数组时它可以工作，但在第二次迭代`$sets_collection becomes 1`中，`integer`函数会因上述错误而失败。

参考：[array_push()](http://php.net/manual/en/function.array-push.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:57:57.350

`array_push`不返回数组 - 只是一个整数。可能由于 的预期返回而假定变量`sets_collection`已更改为整数`array_push`，因此后续参数也被视为整数。

只需删除分配，它应该可以正常工作。

```
array_push($sets_collection,$val['set']); 
```

# git - 签入后更新标识字符串

> ID：13454835
> 
> 赞同：2
> 
> 时间：2012-11-19T13:30:20.843
> 
> 标签：git, ident

我已经在文件中启用了`$Id:$`via的扩展。这使我能够在其他人签出我的存储库并从那里安装它时快速确定文件是否已过时。`ident``.gitattributes`

现在，我还将我自己的 Git 存储库的内容同步到其他（非开发，即没有 Git）系统。问题是关键字扩展只发生在*checkout*，但我的工作流程是*commit -> push -> sync*，所以同步的副本包含过时的 Id。

**如何在本地提交后轻松强制更新 ID？（任何提交后自动执行此操作的奖励积分！）**

一个简单的`git checkout`不起作用（也不起作用`--force`），可能是因为文件内容没有改变。也没有`git checkout-index --force`。我只能通过本地修改来实现这一点（很麻烦，需要知道修改后的文件）：

```
$ echo "modified" >> file
$ git checkout file 
```

或者通过临时签出之前的提交：

```
$ git checkout HEAD^
$ git checkout HEAD@{1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:33:14.990

这里有一些建议：

`git checkout --force .`或许`git checkout --force file.txt`

如果其中一个命令有效，那么您可以创建一个脚本`.git/hooks/post-commit`并使该脚本成为调用该命令（或任何有效命令）的单行脚本，然后 git 将在每次提交时执行此操作。我相信钩子脚本会自动将工作目录的根目录（.git 文件夹所在的位置）设置为脚本的 cwd。

编辑：

如果你运行，`touch file.txt; git checkout file.txt`那么 git 将执行完整的检查，包括在我测试时应用 ident 属性。希望可以以某种方式使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T12:55:58.840

这可以通过提交后挂钩来完成。我已经通过一个脚本自动化了设置，该脚本作为我的[git-extensions 存储库](https://github.com/inkarkat/git-extensions/blob/master/git-ident-update)的一部分进行维护：

```
$ git-ident-update --help
Update the expansion of $Id$ to $Id:...$ via ident in the .gitattributes
after a commit.
To do this automatically in the future, invoke with --install.
Usage: git-ident-update [--install|--uninstall|--status|--set [<path>[ <path> ...]]] [-?|-h|--help] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-10T23:55:21.647

我使用以下命令对最近更新的包含 git Id 的文件运行 touch 和 git checkout：

```
find . -type f -mtime -1 -a -not -name '*~' | \
   xargs grep -l '$Id:' | \
   xargs --replace --verbose sh -c '{ touch {} ; git checkout {}; }' 
```

# zend-framework2 - ZF2 - 使用 CONCAT 进行选择

> ID：13454836
> 
> 赞同：2
> 
> 时间：2012-11-19T13:30:25.717
> 
> 标签：zend-framework2

我正在尝试进行这样的选择：

> SELECT `c`.*, CONCAT(c.provider_id,'#',c.name") 从`contact`AS`c`

所以，我正在写这样的东西......

```
$sql = new Sql($this->adapter);
        $query = $sql->select()
        ->from(array('c' => 'contact'))
        ->columns(array("CONCAT(c.provider_id,'#',c.name"), false) 
```

但是，结果是：

> 从`c``CONCAT(c.provider_id,'#',c.name`原样 中选择`CONCAT(c.provider_id,'#',c.name``contact``c`

我究竟做错了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-21T10:30:12.903

当我必须从表中提取一些列并添加 Sql 函数时，我通常使用以下代码：

```
$sql = new Sql($this->adapter);
$query = $sql->select()
    ->from(array('c' => 'contact'))
    ->columns(array(
        'id', 'name', 'data' => new Expression('CONCAT(c.provider_id,'#',c.name)')
    )
); 
```

`Expression`是 的一个实例`Zend\Db\Sql\Expression`，结果是：

```
SELECT `id`, `name`,  CONCAT(c.provider_id,'#',c.name) AS `data` FROM `contact` AS `c` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T09:23:06.443

如果您需要使用 MySQL 函数或您不想自动为您转义的任何其他内容，请查看数据库表达式。一些例子：

[https://github.com/ralphschindler/Zend_Db-Examples](https://github.com/ralphschindler/Zend_Db-Examples)

```
$sql = new Sql($this->adapter);
$query = $sql->select()
    ->from(array('c' => 'contact'))
    ->columns(array(
        '*', new Expression("CONCAT(c.provider_id,'#',c.name) as data")
    ))
; 
```

# jquery - 由 jquery 克隆的 div 部分

> ID：13454838
> 
> 赞同：0
> 
> 时间：2012-11-19T13:30:27.073
> 
> 标签：jquery

我面临创建我的 firstSection（div）的克隆并将其粘贴到 secondSection 的问题。

```
<script type="text/javascript">
   $(document).ready(function(){
        $("#firstSection").clone().prependTo("#secondSection");
   });
</script>

<table width="100%" border="1">
<div id="firstSection">
    <tr>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>3</td>
        <td>3</td>
    </tr>
</div>

<div id="secondSection">
    <tr>
        <td>9</td>
        <td>9</td>
        <td>9</td>
    </tr>
</div>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:33:55.563

首先，您不能`div`在 a 中包含元素`table`（除非它们包含在 a `td`or`th`中，因此这可能是浏览器更正无效标记的结果，但是如果您使用`tbody`而不是`div`，它*应该可以*工作：

```
<table width="100%" border="1">

    <tbody id="firstSection">
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>2</td>
            <td>2</td>
            <td>2</td>
        </tr>
        <tr>
            <td>3</td>
            <td>3</td>
            <td>3</td>
        </tr>
    </tbody>

    <tbody id="secondSection">
        <tr>
            <td>9</td>
            <td>9</td>
            <td>9</td>
        </tr>
    </tbody>

</table> 
```

假设您只想复制`tbody`/`#firstSection`元素的内容，而不是创建多重嵌套元素：

```
$('#firstSection').clone().contents().prependTo('#secondSection'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6CehB/)。

# java - 我是否需要创建套接字才能使用 Java 获取远程主机 IP？

> ID：13454840
> 
> 赞同：0
> 
> 时间：2012-11-19T13:30:33.403
> 
> 标签：java, sockets, network-programming

我刚刚在这里发布了一个问题：[How to get the IP address for remote host using Java](https://stackoverflow.com/questions/13448790/how-to-get-the-ip-address-for-remote-host-using-java)

以下代码在我测试的几个域名中与我一起使用。

```
 InetAddress inetAddress = InetAddress.getByName("http://www.google.com");
    String ipAddress = inetAddress.getHostAddress().toString()'
    System.out.println(ipAddress );//prints 66.152.109.61 
```

但我很怀疑。如何在不创建套接字的情况下获取 IP？

所以，在我进入代码的进一步阶段之前，我只需要从一点确定：我是否需要创建套接字才能获取远程主机的 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:35:20.963

简短的回答：没有。

更长的答案：IP 和域名通过[DNS](http://da.wikipedia.org/wiki/Domain_Name_System)连接（您应该阅读）。您的代码实际上是在与您的操作系统 DNS 解析器对话（DNS（主要）通过 UDP 套接字工作，因此原则上您可以说涉及到一个套接字 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:34:48.653

不需要从您的代码中创建套接字，getHostAddress 将在后台打开一个套接字并使用您机器上的 DNS 配置调用存根解析器来解析名称，如果您对流量进行wireshark，您会发现它已经过去并查询您的主机名的 dns 服务器

# windows-8 - 如何模拟 Windows RT

> ID：13454841
> 
> 赞同：10
> 
> 时间：2012-11-19T13:30:34.483
> 
> 标签：windows-8, arm, emulation, windows-rt

出于开发目的，我如何在模拟器中运行 Windows RT（Windows 8 的受限 ARM 版本）？这个问题包含两个部分：

*   获取映像：是否存在安装映像（对于供应商，在 MSDN 中，...）？我可以拍摄 Surface RT 磁盘的快照（如何？），或者我可以以某种方式从恢复数据中提取它（我不知道恢复系统是如何工作的，但是有一个功能可以完全擦除并重新安装 Surface 上的软件）。
*   运行图像：我可以在什么上模拟它？我听说过 QEMU，但它以速度慢着称。此外，该程序必须模拟必要的硬件 (Tegra-3)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-05-13T15:03:08.127

我知道这个问题是 7 年前提出的，但现在可以在最新的 QEMU 4.2.0 中模拟 ARM 上的 Windows。

### 要遵循的步骤：

1.  修补 QEMU 以报告可用的 EL3 TrustZone：[https](https://github.com/TeoIzAwezome/rtemu/commit/0f8b8ec18725cd0f66a39b5520fb6a435a757f95) ://github.com/TeoIzAwezome/rtemu/commit/0f8b8ec18725cd0f66a39b5520fb6a435a757f95 - 如果您使用的是 Windows 并且不想从源代码构建 QEMU，您可以修补`qemu-system-arm.exe`：将这个十六进制序列替换为NOPs `4531C931D24C8D05BE515C004889F1E87AD82E00`=> `9090909090909090909090909090909090909090`- 它取代了这部分：

![](../Images/1f7fe38fe60c32a93c36b432171e6e72.png)

![](../Images/209d161d4a5e61fdb25110a51d85c7fb.png)

2.  下载 QEMU 32 位 ARM 平台的 Linaro 固件，特别是 15.12 版本，这是最后一个在 ARM 上引导 Windows 没有问题的版本：[https ://releases.linaro.org/components/kernel/uefi-linaro/15.12/release/qemu /QEMU_EFI.fd](https://releases.linaro.org/components/kernel/uefi-linaro/15.12/release/qemu/QEMU_EFI.fd)
3.  下载 Windows RT 8.1 的 ESD 映像，这些映像可从 Microsoft 公开获得。您可以在此处找到下载链接[https://tech.myonlylonely.com/wimboot-for-surface-2-en/](https://tech.myonlylonely.com/wimboot-for-surface-2-en/) 或使用带有此字符串的 Google：`9600.17053.winblue_refresh.141120-0031_woafre_client_CoreARM_O15_en-us-IR5_CCSA_WOAFRER_EN-US_ESD_2F1E1C773E39C4672F52B1F3A0AE7844FD837B23.esd`
4.  要么将 ESD 转换为 ISO，要么将其提取为`esd-decrypter-wimlib-8.7z`：[https ://www.tenforums.com/software-apps/27180-windows-10-recovery-tools-bootable-rescue-disk-2.html](https://www.tenforums.com/software-apps/27180-windows-10-recovery-tools-bootable-rescue-disk-2.html)
5.  您将需要为 32 位 ARM 平台编译的 QEMU 的 VirtIO 驱动程序，预编译`viostor.sys`驱动程序可在此处获得[https://www.betaarchive.com/forum/viewtopic.php?f=62&t=40522](https://www.betaarchive.com/forum/viewtopic.php?f=62&t=40522) - 如果您在 Visual Studio 中自己构建驱动程序，确保通过使用创建目录文件`Inf2Cat /driver:C:\Drivers\ /os:8_ARM,6_3_ARM`并对其进行测试签名（所有`.cat`和`.sys`文件）；驱动程序准备好后，您可以将它们滑入`boot.wim`并`install.wim`使用`dism /Mount-Wim`+ `/Add-Driver`+`/Unmount-Wim`
6.  如果您不想从 ISO 启动和安装，您可以创建一个 VHD/VHDX 磁盘映像并对其进行格式化/分区，就像在 UEFI 系统上安装 Windows 一样 - GPT 分区：EFI 分区 - FAT32、MSR 分区, 主分区 - NTFS。使用`dism /Apply-Image`with`install.wim`将 Windows 文件安装到创建的磁盘，并`bcdboot`安装 EFI 文件
7.  由于您使用的是测试签名的驱动程序，因此您需要调整 EFI 分区上的 BCD 文件：

```
set BCD=E:\EFI\Microsoft\Boot\BCD
bcdedit /store %BCD% /set {globalsettings} testsigning on
bcdedit /store %BCD% /set {globalsettings} nointegritychecks on 
```

8.  一切完成后，使用以下参数启动 QEMU：

```
set HDD=windows-on-arm.vhd
set ISO=en_windows_8.1_ir4_ARM_dvd.iso

qemu-system-arm ^
-M virt ^
-cpu cortex-a15 ^
-smp 2 ^
--accel tcg,thread=multi ^
-m 2G ^
-bios QEMU_EFI_1512.fd ^
-device VGA ^
-device ich9-usb-ehci1 ^
-device usb-kbd ^
-device usb-tablet ^
-drive if=virtio,file=%HDD% ^
-device virtio-scsi-pci,id=scsi0 ^
-device scsi-cd,drive=install,bus=scsi0.0 ^
-drive if=none,format=raw,id=install,file=%ISO%,readonly=on ^
-rtc base="2013-07-15",clock=vm 
```

### 笔记：

*   PCI MMIO 区域存在已知问题，USB 输入因此无法工作。您可以通过使用此选项替换此选项来解决此`-M virt`问题，`-M virt,highmem=false`但 Windows 8.1 RT 将使用代码抛出 BSOD `SYSTEM_THREAD_EXCEPTION_NOT_HANDLED`。

*   众所周知，适用于 ARM 的 Windows 10 不会抛出此 BSOD 代码，并且在 QEMU 中与`-M virt,highmem=false`. 您可以使用谷歌获取它`10.0.15035.0.rs2_release.170209-1535_armfre_client-enterprise_volume_en-us`：：

![](../Images/253349c4a2e56296eddbe7ecd1f8fdaa.png)

*   另请注意，即使在 Intel Core i7-8700 @ 3.2 GHz 上，32 位 ARM 的完全仿真也非常慢，因此最好使用一些现代 ARM 板，例如具有硬件加速 KVM 管理程序的 Raspberry Pi 4。

*   32 位 ARM 的 Windows 已经被认为是旧版，最好切换到 AArch64 也就是 ARM64 的 Windows，请参阅[https://withinrafael.com/2018/02/12/boot-arm64-builds-of-windows-10-in-qemu /](https://withinrafael.com/2018/02/12/boot-arm64-builds-of-windows-10-in-qemu/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T14:47:10.160

There's no way to truly emulate a Windows RT enivonrment on ARM. You have two options...

1) Go pick yourself up a Surface tablet.

2) Contact your local Microsoft Technical Evangelist to see if they have loaner hardware available.

Also, chances are your local Microsoft Evangelist team is holding Windows 8 developer events where they may have test hardware on hand for you to try. If you're in the US, you can find a list of these events at [http://msdnevents.com](http://msdnevents.com).

# r - 如何加载需要引用具有命名空间的符号的包？

> ID：13454842
> 
> 赞同：0
> 
> 时间：2012-11-19T13:30:36.387
> 
> 标签：r, package

如何加载一个包但不将它导出的所有内容放入“主命名空间”？

```
library(myPackage) # exports myVar
myVar            # This works, but I want it not to work
myPackage::myVar # This works, and I do want it to work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:19:01.690

对于访问包中的导出变量，`::`就足够了。您无需加载包即可使用此语法。正如`?":::"`详细信息部分的第一段所指出的，@csgillespie 建议的三重冒号旨在检查未由包导出的内部变量。

# jquery - 具有 data-position="fixed" 和全屏的 Div

> ID：13454843
> 
> 赞同：0
> 
> 时间：2012-11-19T13:30:38.003
> 
> 标签：jquery, html, events, jquery-mobile

对于我的平板电脑应用程序，我必须有一个`data-position="fixed"` Automaticaly 层，为全屏功能添加了背景上的点击事件，请参见此示例：单击所需的任何位置；页眉和页脚都将切换可见性。

我的问题是我不想要这个功能，但即使我包含`data-fullscreen="false"`在我`div`的 中，事件仍然被创建。

我不能直接添加`"position fixed"`CSS，因为它完全崩溃了显示。你遇到过这个吗？你是怎么处理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:39:46.937

尝试这个：

```
 <div data-position="fixed" data-tap-toggle="false" data-fullscreen="true"> 
```

# msbuild - 从命令行使用 c++ WinRT 组件构建 Windows Phone 8 项目

> ID：13454847
> 
> 赞同：3
> 
> 时间：2012-11-19T13:30:54.027
> 
> 标签：msbuild, visual-studio-2012, windows-phone, windows-phone-8

我正在尝试构建一个 Windows Phone 8 项目，其中包含对用 C++ 编写的 WinRT 组件项目的引用。该项目从 VS2012 IDE 构建，但不使用 MSBuild (c:\Windows\Microsoft.Net\Framework\v4.0.30319\MSBuild.exe) 从命令行构建。它抛出这个错误：

```
WindowsPhoneRuntimeComponent1\WindowsPhoneRuntimeComponent1.vcxproj(185,3): error MSB4019: The imported project "C:\Program Files (x86)\MSBuild\Microsoft\WindowsPhone\v7.0\Microsoft.Cpp.WindowsPhone.7.0.targets" was not found. Confirm that
 the path in the <Import> declaration is correct, and that the file exists on disk. 
```

我对所需目标文件的判断是它试图为 WP7 构建一个 WP8 项目。有谁知道如何解决这个问题，或者是否有可能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:34:00.317

您需要将项目更改为 WP8。右键单击您的项目，选择属性。在应用程序选项卡下，将类型从 WP7 更改为 WP8。希望有效。

# facebook - Facebook Feed 对话框是否有标准图标？

> ID：13454851
> 
> 赞同：2
> 
> 时间：2012-11-19T13:31:04.060
> 
> 标签：facebook, icons, share, facebook-wall, facebook-timeline

我想将 Facebook 提要对话框添加到我的网站。用户为了调用此对话框而看到的可点击“事物”的常见做法是什么？我能想到几种可能：

1.  我见过一个绿色的小方块，里面有一对引号。谷歌发现当我搜索“post to wall icon”时——但现在“wall”似乎已经过时了，这不就是时间线吗？

2.  带有“共享”的蓝色按钮以白色字体书写。再一次，我读到“分享”是一个较旧的概念。

3.  一个超级无聊的文本链接，例如“发布到您的时间线”（来吧，必须有一个可识别的图标 :)）

# c# - 联系人类搜索异步

> ID：13454852
> 
> 赞同：1
> 
> 时间：2012-11-19T13:31:08.003
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

在我的应用程序中，我 `AddressChooserTask`用来获取联系方式

```
 AddressChooserTask m_AddressChooserTask = new AddressChooserTask();
        m_AddressChooserTask.Completed += new EventHandler<AddressResult>(OnAddressChooserTaskCampleted);
        m_AddressChooserTask.Show(); 
```

但每次我的事件处理程序出错时

```
 void OnAddressChooserTaskCampleted(object sender, AddressResult e)
    {

        if (e.TaskResult == TaskResult.OK)
        {
            m_ContactRec.m_Name = e.DisplayName.ToString(); 
        }

        if (m_ContactRec.m_Name != null)
        {
            Contacts m_contacts = new Contacts();
            m_contacts.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(OnContactsSearchCompleted);               
            m_contacts.SearchAsync(m_ContactRec.m_Name, FilterKind.DisplayName, null);

        }

    } 
```

![在此处输入图像描述](../Images/8ef0091f2b4c09152b53752bda8ff82e.png)

调试器停在这里`m_contacts.SearchAsync`。我有点困惑，这个事件 cleary 在 UI 线程中，你能告诉我我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:06:55.883

有没有加

```
 <Capability Name="ID_CAP_CONTACTS"/> 
```

到 WMAppManifest.xml？

# jquery - 如何将新添加的handsontable jquery插件列保存到数据库表中？

> ID：13454859
> 
> 赞同：0
> 
> 时间：2012-11-19T13:31:37.780
> 
> 标签：jquery, jquery-plugins, handsontable

我正在使用handsontable jquery 插件。它具有添加新列的功能。现在我的问题是当添加新列时，我将如何将其保存到数据库中？因为表有固定的列。有什么建议么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T01:56:46.700

当您在handsontable 中创建新列时，也要在数据库中创建新列。您可以使用[事件](https://github.com/warpech/jquery-handsontable/wiki/Events)执行此操作：

```
afterCreateCol (index: Number) 
```

“创建新列时触发回调”

# javascript - Chrome和Safari中的JQuery动画错误，在Firefox中它按预期工作

> ID：13454876
> 
> 赞同：1
> 
> 时间：2012-11-19T13:32:34.507
> 
> 标签：javascript, jquery, html, css, animation

我有一个页面，其中必要的元素被重新定位在一些额外的 html 属性上。

例如：

```
<div class="contentplate" relativePosition="top-left" relx="1" rely="3" relw="14" relh="8"  relFontSize="80"></div> 
```

由类'contentplate'重新定位。它定位到与实际窗口大小相关的栅格。它的子元素被递归处理以获得相对定位也在这个容器内工作。所有这些都按预期工作。

当使用 jQuery('parentcontainer').animate( {left:0},100 ) 或其他东西时，麻烦就开始了：以某种方式重新定位元素会导致 jquery 只为父元素而不是子元素设置动画。有趣的部分是在动画完成后，孩子的位置被 jQuery 以某种方式纠正了，但正如所告知的那样没有动画。

所有元素的样式位置：绝对，溢出：隐藏

不，resotion 算法仅在调整窗口大小或页面加载一次后运行。

如果您有兴趣，我有 3 项测试：
网站完全动态重新定位（动画失败，Firefox 除外）
[http://www.bourier.org/demos/jquery_animation_failure/test_2.html](http://www.bourier.org/demos/jquery_animation_failure/test_2.html)

没有主动重新定位的重新定位站点的快照（所有浏览器，都很好）
[http://www.bourier.org/demos/jquery_animation_failure/test.html](http://www.bourier.org/demos/jquery_animation_failure/test.html)

一个带有黄色网格的完全动态重新定位站点，您可以看到已启用
[http://www.bourier.org/demos/jquery_animation_failure/test_3.html](http://www.bourier.org/demos/jquery_animation_failure/test_3.html)

一个屏幕截图，您可以在其中看到启用网格的动态页面 ![在此处输入图像描述](../Images/cc505e2dfa6995a56e4861412474e7c7.png) 感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:58:48.577

看起来，这是浏览器引擎中的一个错误，与画布的使用和上面 div 的 z-ordered 的 CSS 修改相关。

画布仅用于检查网格功能是否正确，例如调试目的。

我删除了画布，现在一切都按预期工作。

有一些非常错误的东西，可以在这里使用 chrome 开发工具显示：调试器和鼠标指针在正确的位置检测到元素，但它们没有显示在那里。这很奇怪。

![在此处输入图像描述](../Images/649a89876131468bedbb9d1455ed9895.png)

我不想比这更深入，但在我看来，Firefox 的行为是正确的，而 Chrome 和 Safari 的做法非常错误。

如果我应该向 chrome 开发人员发布问题报告，请发表评论，我会的。

# android - 在按钮单击时显示和隐藏片段

> ID：13454879
> 
> 赞同：1
> 
> 时间：2012-11-19T13:32:44.613
> 
> 标签：android, android-fragments

我正在开发一个由`Fragment`s 组成的应用程序，当我单击按钮时，它应该显示和隐藏。默认情况下，我已将片段设置为可见性消失，即使这对我也不起作用：

```
FragmentTransaction  mFragmentTransaction = getFragmentManager().beginTransaction();
mMenuFragment = new MenuFragment();
mFragmentTransaction.add(R.id.frmMenuBar, mMenuFragment); 
mFragmentTransaction.hide(mMenuFragment);
mFragmentTransaction.addToBackStack(null);
mFragmentTransaction.commit(); 
```

下面的代码我一直点击按钮。

```
@Override
protected void onMenuButtonClick(View Button) {
super.onMenuButtonClick(Button);
System.out.println("Botton Clciked");

if (Button.isClickable()) {
    FragmentTransaction menuTransaction = getFragmentManager().beginTransaction();
    menuTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    menuTransaction.show(mMenuFragment);
    menuTransaction.addToBackStack(null);
    menuTransaction.commit();
} else {
    FragmentTransaction menuShowTransaction = getFragmentManager().beginTransaction();
    menuShowTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    menuShowTransaction.hide(mMenuFragment);
    menuShowTransaction.addToBackStack(null);
    menuShowTransaction.commit();
}
} 
```

请任何人帮助我。

# .net - 当套接字连续接收到超出程序处理能力的数据时会发生什么？

> ID：13454888
> 
> 赞同：1
> 
> 时间：2012-11-19T13:33:13.557
> 
> 标签：.net, sockets

我有一个从安全摄像头下载图像流的应用程序（每个摄像头一个线程）。我向相机发出获取请求，相机通过发送无尽的 jpg 图像流来响应。

如果相机向程序发送数据的速度快于程序处理数据的速度，那么应用程序的行为是什么？现在我注意到计算机的已用内存上升到 95%，然后一直保持在那里，但是这个已用内存没有附加到任何特定的进程。这是因为套接字缓冲区不断扩展到某个点，然后当它们无法进一步扩展时才开始丢弃数据包？

我正在使用 .Net 套接字，如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:11:12.060

如果“流”是指 TCP，则内核套接字接收缓冲区将填满，操作系统网络堆栈将应用[TCP 流控制](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Flow_control)来减慢发送者的速度。

另一方面，如果您正在使用 UDP，那么在某些时候您的接收器将开始丢弃数据包，除非您在应用程序级协议中有一些排序，否则您将不会知道它。

# internet-explorer - IE 中的 Ajax 错误

> ID：13454890
> 
> 赞同：0
> 
> 时间：2012-11-19T13:33:19.353
> 
> 标签：internet-explorer, jquery, servlets

我在java中有一个servlet。

我的 servlet URL 是**http://192.168.10.113:8080/collective-intellegence/UserClickPersonClassifier?userid=1&query=asp.net**

此 URL 提供 json 数据。

我正在使用 jquery ajax 调用来获取数据。

**我的代码**

```
function SecondResultLink(link, userId, userInput) {
try{
    var urlSearch = "http://192.168.10.113:8080/collective-intellegence/UserClickLinkClassifier?userid=" + userId + "&query=" + userInput;
    $.ajax({
        url: urlSearch,
        type: 'POST',
        dataType: 'json',
        async: false,
        success: function (data) {
            if (data.length != 0) {
                for (index = 0; index < data.length; index++) {
                    if (!link.exist(data[index].Link.name.toLowerCase(), data[index].Score)) {
                        link.add(data[index].Link.name.toLowerCase(), data[index].Score);
                    }
                }
            }
        },
        error: function (error) {
            alert(error.error);
        }
    });
}
catch (err) {
    alert(err);
}
} 
```

上面的代码在 Chrome、Firefox 和 Safari 中给出了 45 条记录，但在 Opera 中给出了 25 条记录并在 IE 中给出了错误消息。

IE 中的错误消息：- **function(){if(c){var a=c.length;m(arguments),i? k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))} 返回这个}**

在除 IE 之外的所有浏览器中，请求都会发送到服务器，但在 IE 中，请求不会发送到服务器。

这不是跨域问题，因为我允许所有人访问服务器（在 Access-Control-Allow-Origin: * 的标题中看到）

IE有什么问题？如何解决此问题或任何其他获取数据的方法。

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:05:35.997

IE8 和 IE9 不完全支持 cors.. 所以你必须为 ie 8 和 9 编写一些代码

通过此链接这将对您有所帮助（单击此处）[http://msdn.microsoft.com/en-us/library/dd573303%28v=vs.85%29.aspx]

# iphone - 刷新 TableView 中的 RSS 数据

> ID：13454892
> 
> 赞同：0
> 
> 时间：2012-11-19T13:33:23.893
> 
> 标签：iphone, xcode, uitableview, reloaddata

我在解析 RSS 时尝试刷新我的 TableView。一旦我更新了 xml，然后按下刷新按钮，它不会做任何事情，但是当我关闭并打开应用程序时，它会运行新的更新的 xml。我的问题可能在哪里？

```
-(void)refreshButton{

[self.MyTableView reloadData];

NSLog(@"RSS refreshed");
} 
```

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:30:23.910

问题是您正在从 .xml 解析 xml `viewDidLoad`。因此，如果 xml 被更改，那么您需要再次解析它。

所以改变刷新数据的方法，如：

```
-(void)refreshButton
{
  NSXMLParser *parser = [[NSXMLParser alloc] initWithData:newXMLData];
  [parser parse];
  [self.MyTableView reloadData];
} 
```

`newXMLData`是的一个实例，`NSData`它以字节的形式保存`XML`文件。

# maven - 在 Mac 上将 java Maven 项目导入 Eclipse juno 后出错？

> ID：13454893
> 
> 赞同：0
> 
> 时间：2012-11-19T13:33:23.543
> 
> 标签：maven

我将 maven 项目从 perforce 导入到 Mac 上的 eclipse juno 并刷新和更新了依赖项，但所有 maven 项目仍然显示错误，而不是 java 类。我正在使用带有 JSE 1.6 的 mac 10.7.4。

在问题门户中，我收到警告描述为..

```
Build path specifies execution environment J2SE-1.5\. There are no JREs installed in the workspace that are strictly compatible with this environment. 
```

但是，如果我使用 jdk 1.6 在 Windows 上导入相同的项目，它工作正常，没有显示错误。请建议。

# c# - 处置或杀死 DispatcherTimer 对象和访问 DispatcherTimer 对象

> ID：13454894
> 
> 赞同：9
> 
> 时间：2012-11-19T13:33:33.333
> 
> 标签：c#, wpf, uwp, dispatchertimer

问题1：您好，我想知道有没有一种方法可以处理或杀死*DispatcherTimer*的对象并创建一个同名的新对象？

*问题 2：如果DispatcherTimer*对象设置为 Public，我可以访问其他类中的对象吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T14:43:05.083

1.  您不能处置 DispatcherTimer 对象。它没有实现 IDisposable 接口。您不能显式地杀死（释放、销毁）托管世界中的对象。如果您不再需要计时器对象，请将其禁用并将对它的引用设置为 null。稍后将由 GC 收集。您可以通过设置 IsEnabled = false 或调用来禁用或停止计时器`timer.Stop()`。效果是一样的。
2.  是的。我想你有这样的公共财产：

    `public DispatcherTimer MyTimer { get; private set; }`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-01T08:48:15.603

添加来自 Lubo 的正确答案（并从其下方的评论中提出该主题）：即使您无法处理*DispatcherTimer*（很可能是因为它连接到 WPF / UWP Dispatcher 本身的非托管部分，该部分与应用程序一样长本身），您仍然应该***取消订阅***其事件。

比如说，如果你有一些方法（*StartRefreshTimer*）你初始化了*DispatcherTimer*并开始监听它的*Tick*事件：

```
private DispatcherTimer _refreshTimer = new DispatcherTimer() { Interval = TimeSpan.FromMinutes(1) };

private void StartRefreshTimer()
{
    if (_refreshTimer != null)
    {
        _refreshTimer.Tick += OnTick; // subscribe to timer's ticks
        _refreshTimer.Start(); // start timer
    }
}

private void OnTick(object sender, object args)
{
    // your custom OnTick logic
} 
```

然后你应该有一个方法来停止计时器并取消订阅它的事件：

```
private void StopRefreshTimer()
{
    if (_refreshTimer != null)
    {
        _refreshTimer.Stop(); // stop timer
        _refreshTimer.Tick -= OnTick; // unsubscribe from timer's ticks
    }
} 
```

当你的类超出范围时（例如，当你的 WPF / UWP*控件*或*ViewModel*被卸载时），你应该确保调用这个“tear down”方法。如果您不取消订阅计时器事件，您最终可能会因从外部范围引用到您的计时器托管类而导致内存泄漏。

# sass - 使用不同版本运行 Compass/SASS

> ID：13454895
> 
> 赞同：5
> 
> 时间：2012-11-19T13:33:35.673
> 
> 标签：sass, compass-sass, susy-compass, blueprint

我正在尝试在两个不同的指南针项目上找到一个很好的解决方案。一个基于 Compass 使用 Blueprint（旧版本），另一个基于 susy grid（新版本）。

目前，我必须为该`watch`过程重新安装正确的版本。

是否可以`compile`使用指定的版本运行？如果还可以运行`watch`具有指定版本的进程，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:00:18.713

运行它

```
compass _0.10.5_ compile 
```

会做你想做的。（显然，您将所需的版本替换为 0.10.5。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T13:39:31.013

您正在寻找的工具可能是[rvm](https://rvm.io/)，它允许您安装不同版本的 ruby​​/gems 并在它们之间轻松切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:06:33.450

也许有更简单的方法。如果您可以使用 Codekit 或 Livereload 之类的工具，那么这些工具允许您使用嵌入式 sass 库或定义您自己的库。

您可以将内置库用于一个项目，将自定义库用于其他项目。

我相信上面建议的 RVM 也有效，但我自己从未尝试过。

# php - SQL 从表中获取 DISTINCT 日期值

> ID：13454896
> 
> 赞同：0
> 
> 时间：2012-11-19T13:33:34.420
> 
> 标签：php, mysql, sql

我在一个名为 startdate 的表中有一个字段，我想做的是尽可能少地运行查询以获得一个显示如下的列表：

```
2012

January
March
October

2011

September
November 
```

我想每年显示的唯一日期是有记录的日期。

任何帮助或指针表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:37:42.413

此查询可用于在给定日期（此处为开始日期）的表中查找所有不同的年/月组合。

```
SELECT     YEAR(startdate) AS DYear, MONTH(startdate) AS DMonth 
FROM         tablename
GROUP BY YEAR(startdate), MONTH(startdate) 
```

在以您选择的任何方式获得结果后，您可以执行以下操作：

```
$year = 0;
  while ($row) { //loop through your rows here using while or foreach
    if($year != $row['DYear']){
      echo '<h1>'.$row['DYear'].'</h1>';
      $year = $row['DYear'];
    }
    echo '<ul>';
    echo '<li>'.$row['DMonth'].'</li>';
    echo '</ul>';
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:00:49.200

正如其他帖子已经给出了您的答案，我将提供有关这些答案*为何有效的信息。*

在 SQL 选择语句中，您可以提供关键字。特别是对于 MySQL，您可以提供`ALL, DISTINCT, DISTINCTROW`（以及其他与不同行无关的）。

后两个选项实际上是相同的选项并产生相同的结果。没有关键字的默认选择语句使用`ALL`返回所有结果。通过传入，`DISTINCT`您可以消除任何重复的条目。

重复条目是所有字段都相同的条目。但是，应该注意，如果您有一个自动递增的主键，则每一行都与最后一行不同，因为 pk 不同。为了使用这种设置选择不同的值，您需要指定一个真正不同的单独列名称。

有关 MySQL SELECT 语句的更多信息，请参阅[用户指南的选择部分](http://dev.mysql.com/doc/refman/5.5/en/select.html)。

希望我没有提供您已经从提供的答案中收集到的信息，但我一直发现理解“为什么”和“如何”通常可以让我了解特定解决方案何时有效，以及何时无效.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:57:06.120

```
SELECT DISTINCT YEAR(startdate), MONTHNAME(startdate)
FROM   mytable
ORDER BY YEAR(startdate) desc,  MONTH(startdate) asc; 
```

应该可以解决问题，但是输出将是：

```
2012 January
2012 March
2012 October
2011 September
2011 November 
```

您可以使用 eggyal 提供的代码将其转换为您正在寻找的格式。请注意，您需要在 MONTH 而不是 MONTHNAME 上订购（除非您想要按字母顺序）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:37:00.543

使用[PDO](http://www.php.net/manual/en/book.pdo.php)，您可以执行以下操作：

```
$dbh = new PDO("mysql:dbname=$dbname", $username, $password);

$qry = $dbh->query('
  SELECT DISTINCT
    YEAR(startdate)      AS year,
    MONTHNAME(startdate) AS month
  FROM
    my_table
  ORDER BY
    startdate
');

if ($qry) {    
  $row = $qry->fetch();
  while ($row) {
    $current_year = $row['year'];
    echo '<h1>',htmlentities($current_year),'</h1><ul>';
    do {
      echo '<li>',htmlentities($row['month']),'</li>';
    } while ($row = $qry->fetch() and $row['year'] == $current_year);
    echo '</ul>';
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T13:38:58.067

```
select distinct column1, column2, column3... from table where columnx <> "" order by year, month 
```

# c# - 设置静态属性C#时出现堆栈溢出异常

> ID：13454902
> 
> 赞同：-2
> 
> 时间：2012-11-19T13:33:56.630
> 
> 标签：c#, properties, static, set, stack-overflow

> **可能重复：**
> [C# 新手，为什么 Property Set 会抛出 StackOverflow 异常？](https://stackoverflow.com/questions/367192/new-to-c-why-does-property-set-throw-stackoverflow-exception)

尝试设置静态属性时出现堆栈溢出异常。

```
public static class StaticTest
{
   static string stringToSet
   {
      get
      {                
          return stringToSet;
      }
      set
      {
          stringToSet = value;
      }
   }
} 
```

然后，在其他班级：

```
public void setStaticProperty()
{
    StaticTest.stringToSet = "Hello World";    // StackOverflow exception here
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T13:35:55.673

```
 set
  {
      stringToSet = value;
  } 
```

你在你的 setter （和 getter ）中得到了无限递归，因为它调用了自己，因此 StackOverflow。

如果您不需要直接修改基础字段，请改用自动属性：

```
static string stringToSet {get; set;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T13:36:35.480

在您的静态属性设置器中，您正在为静态属性分配一个值`stringToSet`，它调用您的静态属性设置器，您在其中为静态属性分配一个值`stringToSet`，它调用您的静态属性设置器，您在其中为静态分配一个值property `stringToSet`，它调用您的静态属性设置器，您在其中为静态属性分配一个值`stringToSet`...

您需要添加一个私有字段来存储属性值；通常您会重命名该属性，使其以大写字母 ( `StringToSet`) 开头。

```
private string stringToSet;

public string StringToSet {
    get {
        return stringToSet;
    }
    set {
        stringToSet = value;
    }
} 
```

# cookies - 子域cookie安全

> ID：13454903
> 
> 赞同：3
> 
> 时间：2012-11-19T13:33:56.770
> 
> 标签：cookies

这里非常简单的问题。了解跨域 cookie 安全性，是否同样适用于子域？

例如。我应该能够从 www.abc123.com 的子域读取 some.abc123.com 上设置的 cookie 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T13:59:15.410

Cookie 域是后缀匹配的，因此 Cookie`www.abc123.com`不会在网站上发送，`some.abc123.com`反之亦然。

要在两个域上发送 cookie，您应该将`.abc123.com`其用作域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:56:01.803

作为替代方案，在 abc123.com 级别设置 cookie，然后从那里设置和读取 cookie。

请参阅此处 [为多个子域设置 cookie](https://stackoverflow.com/questions/2465036/setting-cookies-for-multiple-sub-domains)

# javascript - 每次点击 div 时在文本区域中获取动态文本

> ID：13454907
> 
> 赞同：0
> 
> 时间：2012-11-19T13:34:06.577
> 
> 标签：javascript, jquery, html

我想打开`CKEDITOR`on `click-event`of `div`，并希望`textarea`ckeditor 中的 div 内容，但不知何故这不起作用。

在此先感谢，并为我糟糕的英语感到抱歉

```
function createEditor() {

    $('DIV').click(function(event) {
        var id1 = event.target.id;
        //alert(id1);

        document.getElementById("editor1").value = '';
        var newtext = document.getElementById(id1).innerHTML;
        alert(newtext);
        document.getElementById("editor1").value += newtext;
    });

    document.getElementById("contents").style.display = "block";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:40:22.247

删除 createEditor() 函数并尝试

```
 $('DIV').click(function(event) {
    var id1 = event.target.id;
    //alert(id1);

    document.getElementById("editor1").value = '';
    var newtext = document.getElementById(id1).innerHTML;
    alert(newtext);
    document.getElementById("editor1").value += newtext;
});

document.getElementById("contents").style.display = "block"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:28:59.557

如果您只想要单击的 div 的文本并且您正在使用 jQuery，请尝试

```
$("div").click( function() {
    var newtext = $(this).text();
    $("#editor1").text( newtext );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:24:18.320

这个解决方案将更多地依赖 jQuery。首先，如果您希望在单击 a 时触发此功能`div`，请摆脱您的`function()`，因为每次`div`单击 a 时都会触发您的事件，所以没有必要。

这应该可以解决您的问题：

```
$('div').click(function(e) {
    $id1 = $(this).attr("id");
    alert($id1);

   $("#editor1").val(' '); //Are you sure you want to empty your textarea?
   $newtext = $("#"+$id1).html();
   alert($newtext);
   $("#editor1").val($newtext); //Because when you append the newtext it won't append but replace the text it's already on this.

   $("#contents").css("display","block");
}); 
```

这是一个使用您的函数的类似示例的 [小提琴：](http://jsfiddle.net/brunovieira/6EM6A/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T14:23:10.403

试试这个将数据添加到文本区域。

```
$("#editor1").val(newtext); 
```

或使用

```
$('#editor1').append(newtext); 
```

# php - 如何在php中加入分叉进程

> ID：13454908
> 
> 赞同：0
> 
> 时间：2012-11-19T13:34:08.630
> 
> 标签：php, fork, pcntl

我需要在哪里分叉一个进程。然后当他们的任务完成时，父进程应该继续做一些其他的工作。如何才能做到这一点？这是我所做的

```
$sql = "call some_sample_proc()";
$res = $dbConn->query($sql);
$i=0;
$memcacheData = array();
while($row = $dbConn->fetch_assoc()) {
    $value = $row['col1'].$row['col2'].$row['col3'];
    $memcachceData[$i++] = $value;
}
for($i=0; $i<5; $i++) {
    $pid = pcntl_fork();
    if($pid == 0) {
        $im = $i;
        echo "forked process $i \n";   //  -- 1
        exit;
    } else if($pid == -1) {
        echo "Could not fork \n";
    }
}
while (pcntl_waitpid(0, $status) != -1) {
    $status = pcntl_wexitstatus($status);
    echo "Child $status completed $im\n ";
    $childCompleteCount ++;
}
echo "completion count $childCompleteCount\n";
if($childCompleteCount == 5) {
     echo "All finished\n";
     //exit; //if this is uncommented, ONLY THEN the program finishes 
} 
```

当我用这段代码执行程序时，我得到了这个输出......

```
forked process 0
forked process 1
forked process 3
forked process 2
forked process 4
Child 0 completed 0
Child 0 completed 0
Child 0 completed 0
Child 0 completed 0
Child 0 completed 0
completion count 5
All finished 
```

但在打印完成计数 5 程序后似乎挂起。它不会返回提示。所以现在我们知道所有子（分叉）进程都已完成，我们如何恢复进一步的执行？

# pandas - 熊猫 read_csv 中缺少数据

> ID：13454909
> 
> 赞同：0
> 
> 时间：2012-11-19T13:34:10.030
> 
> 标签：pandas

### 我的数据：

* * *

```
a,b,c,d,e,f
1.5,4.8,,6.3
1.60,5.2,6.5,7.2
1.70,5.5,6.6,8.3,5.7
1.80,6.1,6.7,9.7,6.2
1.90,7.1,6.8,11.1,6.7
2,,6.8,12.5,7.3
2.08,,,,7.8
2.1,,7.2
2.2,,8.0
2.3,,8.7
2.4,,9.2,8.2 
```

* * *

```
from pandas import read_csv
ds = read_csv ('lin-nan.dat', index_col=0, sep=',')

Traceback (most recent call last):
  File "read_lin.py", line 7, in <module>
    ds = read_csv ('lin-nan.dat', index_col=0, sep=',')
  File "/home/nbecker/.local/lib/python2.7/site-packages/pandas/io/parsers.py", line 253, in read_csv
    return _read(TextParser, filepath_or_buffer, kdict)
  File "/home/nbecker/.local/lib/python2.7/site-packages/pandas/io/parsers.py", line 202, in _read
    return parser.get_chunk()
  File "/home/nbecker/.local/lib/python2.7/site-packages/pandas/io/parsers.py", line 844, in get_chunk
    alldata = self._rows_to_cols(content)
  File "/home/nbecker/.local/lib/python2.7/site-packages/pandas/io/parsers.py", line 809, in _rows_to_cols
    raise ValueError(msg)
ValueError: Expecting 6 columns, got 5 in row 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:31:08.847

您可以使用该功能的`error_bad_lines=False`选项`read_csv`。它会自动跳过格式错误的行并打印它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:50:47.473

问题是您没有任何长度为 6 的列（最长为 5），我*认为*没有关键字 in`read_csv`可以克服这一点。

一种解决方案是更明确：

```
In [1]: df = pd.read_csv('lin-nan.dat', names=list('abcde'), index_col=0, skiprows=1)

In [2]: df['f'] = np.nan

In [3]: df
Out[3]: 
        b    c     d    e   f
a                            
1.50  4.8  NaN   6.3  NaN NaN
1.60  5.2  6.5   7.2  NaN NaN
1.70  5.5  6.6   8.3  5.7 NaN
1.80  6.1  6.7   9.7  6.2 NaN
1.90  7.1  6.8  11.1  6.7 NaN
2.00  NaN  6.8  12.5  7.3 NaN
2.08  NaN  NaN   NaN  7.8 NaN
2.10  NaN  7.2   NaN  NaN NaN
2.20  NaN  8.0   NaN  NaN NaN
2.30  NaN  8.7   NaN  NaN NaN
2.40  NaN  9.2   8.2  NaN NaN 
```

# ios - 如何使用 Facebook SDK 3.1 避免“应用程序已获得授权”

> ID：13454911
> 
> 赞同：3
> 
> 时间：2012-11-19T13:34:11.587
> 
> 标签：ios, facebook, facebook-ios-sdk

每次我想通过 Facebook idk 登录时，safari 都会打开并告诉我我的应用程序已获得授权。但我不想每次用户使用 Facebook 登录时都显示此屏幕。我按照[此处](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)的说明实现了 facebook 登录功能。如果单击身份验证按钮，我只需调用 openSessionWithAllowLoginMethod，然后它会为我处理其余部分。但是我不知道如何将它不会每次都显示授权屏幕的功能应用于此代码？我真的很感激一些提示或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:10:16.393

在 App Dashboard 的 Basic Settings 的 Native iOS App 部分中填写与您的应用相关的每个字段。如果未配置这些字段，我们将无法将流量吸引到您的应用或 iOS 应用商店。此外，我们使用 iOS Bundle ID 来简化已经对您的应用进行身份验证的用户的身份验证。[专业提示 3：完成所有 iOS 应用设置](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

# javascript - 使用 d3.js 一页上的多个 teemaps

> ID：13454914
> 
> 赞同：1
> 
> 时间：2012-11-19T13:34:29.570
> 
> 标签：javascript, d3.js, treemap

我正在尝试在一个页面上制作一个包含多个树形图的页面。到目前为止，我已经能够使用我将 json 传递给的函数来做到这一点。但是当我试图改变树形图中的值时，我遇到了各种各样的问题。这是创建树形图的函数，您可以看到更改函数的开始：

```
TreeMap.prototype.drawSystem = function(json, key) {
    var treemap = d3.layout.treemap()
        .size([this.d3.width, this.d3.height])
        .sticky(false)
        .value(function(d) { return d.size; });

    var div = d3.select("#systems").append("div")
        .attr("id", key)
        .style("position", "relative")
        .style("width", this.d3.width + "px")
        .style("height", this.d3.height + "px")
        .style("padding", this.d3.padding + "px");

    div.data([json]).selectAll("div")
        .data(treemap.nodes)
        .enter().append("div")
        .attr("class", "cell")
        .style("background", 'red')
        .call(this.cell)
        .text(function(d) { return d.children ? null : d.name + '    Memory: ' + d.size + 'GB'+ '    Disk: ' + d.disk + 'GB'; });

    d3.selectAll("input").on("change", function change(key) {
            console.log(d3);
            console.log(div);
            console.log(key);
        //div.data(treemap.value(
        //    function (d) {
        //        return d.disk;
        //    }
        //)).transition().duration(150).call(this.cell).text(
        //    function (d) {
        //    return d.children ? null : d.name + '    Disk: ' + d.disk + 'GB';
        //}
        //);
    });

}; 
```

这是我使用的 Json：

```
{
    "global1": {
        "name": "P",
        "children": [
            {
                "name": "red",
                "children": [
                    {
                        "name": "ADMI - fnet-admi-uat",
                        "size": 20.1,
                        "disk": 10
                    },
                    {
                        "name": "ALEV - fnet-alev3z1",
                        "size": 13.1,
                        "disk": 27
                    }
                ]
            }
        ]
    },
    "global2": {
        "name": "1",
        "children": [
            {
                "name": "red",
                "children": [
                    {
                        "name": "this is another co",
                        "size": 20.1,
                        "disk": 10
                    },
                    {
                        "name": "this is tomshting",
                        "size": 13.1,
                        "disk": 27
                    }
                ]
            }
        ]
    }
} 
```

像这样调用函数：

```
 for (key in data) {
                if (typeof data[key] !== 'function') {
                    this.drawSystem(data[key], key);
                }
            } 
```

我可以看到哪里出错了，即重用变量来创建 div 等。但我不知道如何克服这个问题。

以前有没有人做过这样的事情的经验？如果是这样，您是否有任何指示可以向我发送正确的方向？

谢谢

# iphone - 如何提高从不同分辨率设备拍摄的图像质量 - iOS

> ID：13454916
> 
> 赞同：1
> 
> 时间：2012-11-19T13:34:40.993
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，我们正在处理大量图像（捕获、上传、从服务器下载并显示它们）。如果我们从 iOS 或任何大分辨率的 Android 设备上捕获图像，捕获的图像会正常显示而不会丢失质量。但是当从低分辨率的低端设备捕获图像时，我遇到了问题。（Android 的低端设备）有没有办法处理这种情况，无论设备分辨率如何，图像都不应降低质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:45:00.433

您几乎被该设备的相机功能所困扰。如果设备有一个 3.2MP 的摄像头，那么它将只能创建一个最大分辨率为 2048 × 1536 的图像，不管是给还是取。

基本上，您可以降级图像的分辨率，而不是在受设备硬件限制的情况下升级。

# delphi - CreateProcess 并获取句柄

> ID：13454921
> 
> 赞同：1
> 
> 时间：2012-11-19T13:34:49.473
> 
> 标签：delphi, winapi, delphi-2010

我正在使用 CreateProcess API 将 RealVNC 与我的 exe 集成...我只需要为创建的 vnc 客户端处理句柄，但到目前为止我没有成功。代码非常简单：

```
procedure TForm1.VncAuth;
var
  StartInfo: TStartupInfo;
  ProcInfo: TProcessInformation;
  CmdLine: string;
  title: string;
  ProcHandle: THandle;
begin
  FillChar(StartInfo,SizeOf(TStartupInfo),#0);
  FillChar(ProcInfo,SizeOf(TProcessInformation),#0);
  StartInfo.cb := SizeOf(TStartupInfo);
  CmdLine:= 'vnc.exe';
  UniqueString(CmdLine);
  CreateProcess(NIL ,PChar(CmdLine), NIL, NIL, False, CREATE_NEW_CONSOLE or NORMAL_PRIORITY_CLASS
                                  , NIL, NIL, StartInfo, ProcInfo);
  ProcHandle:= ProcInfo.hProcess;
  GetWindowText(ProcHandle, PChar(title), 255);
  ShowMessage(title);
end; 
```

title var 中没有返回任何内容...... GetWindowText 函数只是一个测试，看看我是否有正确的句柄，如果是，我应该看到 vnc 客户端标题的权利吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T13:59:25.090

窗口句柄和进程句柄不是一回事。因为`GetWindowText`你需要一个窗把手。

1.  创建进程后调用`WaitForInputIdle`允许进程启动并创建其主窗口。
2.  调用`EnumWindows`枚举顶层窗口。
3.  对于每个顶级窗口，调用`GetWindowThreadProcessId`以找出创建该窗口的进程的进程 ID。您创建的进程的进程 ID 是`ProcInfo.dwProcessId`。
4.  当您找到一个进程 ID 与您刚刚创建的进程匹配的窗口时，该窗口就是您的对象！

# php - 脚本标签中的 preg_replace 宽度

> ID：13454922
> 
> 赞同：0
> 
> 时间：2012-11-19T13:34:53.890
> 
> 标签：php, regex, preg-replace

使用 preg_replace 作为脚本标签。

```
<script src="/player.js?video=204442&width=300&height=198&mproce=true&primaryColor=0xFF9900&showFeed=0&autoplay=0&browser=0&partnerid=130101" type="text/javascript"></script> 
```

我想用新值替换宽度和高度。现在我有了 substr 和 strpos 的解决方案，但也许 preg_replace 会是一个更好的解决方案。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:43:33.690

这个怎么样：

```
$str = '<script src="/player.js?video=204442&width=300&height=198&mproce=true&primaryColor=0xFF9900&showFeed=0&autoplay=0&browser=0&partnerid=130101" type="text/javascript"></script>';

$str = preg_replace('/width=\d+/i', 'width=999', $str);
$str = preg_replace('/height=\d+/i', 'height=999', $str);

print_r( $str ); 
```

# android - 无法反序列化 ArrayList

> ID：13454945
> 
> 赞同：0
> 
> 时间：2012-11-19T13:36:21.033
> 
> 标签：android, jackson

我正在使用 Jackson 库来解析本地 json 文件。当按下解析按钮时，我有这个错误：

```
W/System.err(7569): org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of VALUE_NUMBER_INT token 
```

json文件是：

```
{"surveys":[{"id_survey":"1","question_survey":"Are you happy with the actual government?","answer_yes":"50","answer_no":"20"}],"success":1} 
```

进行检索的方法是：

```
final void gettingJson() {
    final Thread checkUpdate = new Thread() {
        public void run() {
        usersController.init();
        final StringBuilder str = new StringBuilder("user : ");
        for (User u : usersController.findAll()) {
            str.append("\n").append("ID : ").append(u.getId_survey());
            str.append("\n").append("Question : ").append(u.getQuestion_survey());
            str.append("\n").append("Yes : ").append(u.getAnswer_yes());
            str.append("\n").append("No : ").append(u.getAnswer_no());

        }
        runOnUiThread(new Runnable() {
                public void run() {
                    displayJson.setText(str.toString());
                }
            });

        }
    };
    checkUpdate.start();
    } 
```

有什么要在代码中添加的吗？难道我做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:15:16.250

问题解决了，这是由于 json 文件中的那个字符串`"success":1`。所以我删除了它，现在一切都很好。

# c++ - 在 C/C++ 中将非常大的 int（写为字符串）转换为二进制字符串

> ID：13454946
> 
> 赞同：6
> 
> 时间：2012-11-19T13:36:25.353
> 
> 标签：c++, c

我有一个以 10 为基数的数字，大约有 10k 位。我想将其转换为基数 2（1010101001 ...）。我能想到的只是原始算法：

`take last digit mod 2 -> write down bit`

`number divide by 2;`

在字符串上实现小学除法应该不难，但我认为它非常低效。如果我是对的，它将是`O(l^2)`，其中`l`表示以 10 为基数的数字长度。可以更快地完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:50:23.763

除以 2 与乘以 1/2 相同。对于后者，您可以使用一些众所周知的快速乘法算法（Toom–Cook、Schönhage–Strassen 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:39:05.457

如果您正在处理大数字，我真的建议您使用多精度库。尝试 GMP 或 MPRF 或类似的东西。
-Øystein

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:12:25.323

据我了解，您的大数表示为十进制数字序列。如果是这样，您可以使用乘法和加法计算“二进制”表示：

> value = sum(i in 0...n-1) 10 ^i * digit [i]

这种计算可以以分而治之的方式分成几部分，尽管我不确定你是否可以达到 O(n log n) 算法。

# matlab - 浮点精度matlab滤波器2

> ID：13454948
> 
> 赞同：0
> 
> 时间：2012-11-19T13:36:29.710
> 
> 标签：matlab, floating-point, filtering

我遇到了由 filter2 引起的舍入错误。这是一个最小的代码示例：

```
format long

x=[ 0 0 0 0 0
 64 65 72 74 72
 104 111 109 106 112];

h=[ 0 0 0 0 0
 0 0.500000000000000 0 0.500000000000000 0
 0 0 0 0 0]

y=filter2(h,x, 'valid')
y_= x(2,2)/2 + x(2,4)/2
y__= sum(sum(x .* h))    
round(y)
round(y_)
round(y__) 
```

结果是

```
y = 69.499999999999986
y_ = 69.500000000000000
y_ = 69.500000000000000
ans = 69
ans = 70
ans = 70 
```

我猜这是在 fft 域（或类似的东西）中进行过滤的结果。不幸的是，在验证我正在生成的测试向量时，这给我带来了问题 FPGA 实现。

任何想法如何修复/避免此错误？

PS我正在使用matlab 2007b。

编辑：2007a 到 2007b Edit2：添加了 y__ 示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:00:50.270

使用浮点算术执行的操作会产生近似结果是预期的行为。浮点运算使用固定位数来表示数字，每次浮点运算的结果都舍入到最接近的可表示数字（除非设置了另一种舍入模式）。

特别是，执行 FFT 需要许多值的正弦和余弦，而正弦和余弦不能精确表示，对这些值和 FFT 数据中的值进行算术运算会产生许多不能精确表示的中间结果。因此，预计 FFT 的结果是近似的。

对浮点 FFT 中的错误的研究表明错误行为通常是好的。但是，您不能期望结果会落在 69.5 的“正确”一侧，从而导致您想要的舍入。从本质上讲，期望对 FFT 的结果进行四舍五入会产生准确的结果是错误的。

通常，使用精度更高的浮点格式可以减少错误的幅度。因此，使用更高的精度可以产生更接近理想结果的 FFT 结果。但是，请考虑进行舍入工作所需的条件。任何 69.5 或稍大的数字将四舍五入为 70。任何略小于 69.5 的数字将四舍五入为 69，这是您不想要的。因此，按照您的意愿进行舍入，产生小于 69.5 的数字的错误是不可接受的，无论该错误有多小。但是，每种浮点格式都有**一些**错误。**因此，无法保证产生可以按照您希望的方式四舍五入的结果的精度。**（可以通过设置舍入模式在一定程度上控制误差，以根据需要向上或向下舍入。但是，FFT 是一项复杂的操作，在最终产品中获得所需的舍入需要在每个中间操作中控制舍入，这是不切实际的.)

因此，浮点 FFT 不会产生您想要的结果。您可以使用的一些选项是：

*   改变你的期望；不要期望过滤器产生与精确算术相同的结果。
*   使用直接算术而不是 FFT 执行滤波器。（我不使用 Matlab 并且无法建议在 Matlab 中执行此操作的好方法。）请注意，只要所有中间值都可以浮点格式表示，使用浮点算术执行此操作将产生精确结果。这通常仅适用于过滤器和数据中具有“简单”值的小型过滤器。（为此目的，并假设二进制浮点格式，“简单”值是那些仅用浮点格式的小数部分中的几位表示的值，即那些是两个整数幂的和彼此接近，例如 .625，即 2 ^(-1) +2 ^(-3)。）
*   使用精确的算术。一些数学软件，如 Maple 和 Mathematica，支持精确算术。据我所知，Matlab 没有。这通常需要使用直接算术而不是 FFT 来执行滤波器，因为执行 FFT 需要更高的数学能力（精确地处理正弦和余弦）。

既然你说这是为了测试，我建议你：

*   允许结果中有小错误。小错误是浮点运算的典型特征，通常并不表示您正在测试的过滤器中存在错误。您在测试中寻找的错误通常会产生大量错误。
*   如果足够，请使用直接算术，如果需要，请使用精确算术。这将消耗更多的处理器时间。但是，测试通常不需要高性能，因此可以使用更多的处理器时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:02:09.467

处理这个问题的标准方法是避免浮点比较。

与其检查两个事物是否相等，不如检查绝对差是否小于某个 epsilon。

因此，如果您想查看您的两个数字是否匹配，您可以执行以下操作：

```
abs(y-y_) 
```

# c++ - Linux 服务方式

> ID：13454949
> 
> 赞同：1
> 
> 时间：2012-11-19T13:36:30.040
> 
> 标签：c++, linux, unix, windows-services

我需要为 Linux 系统实现一个类似 windows 的服务。有 C++ 代码可以执行我希望按计划（每分钟）运行的特定工作。

该服务将始终启动并运行 24 小时/天、7 天/周和 365 天/年，并且应该具有高度的容错性。

实施此类服务的最佳方法是什么？守护进程、Linux 服务、cron 等或它们的某种组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:41:04.783

您通常使用 cron 作业或守护程序来执行此操作，但不能同时使用两者。

> 有 C++ 代码可以执行我希望按计划（每分钟）运行的特定工作。

这听起来像是 cron 工作的候选人。但是，如果您需要在两次调用之间保持大量状态，那么带有 1 分钟计时器的守护进程可能是更好的选择。

您可能想提供有关您的应用程序应该做什么的更多详细信息。

# c++ - PathCchAppend 和相对路径

> ID：13454953
> 
> 赞同：0
> 
> 时间：2012-11-19T13:36:46.923
> 
> 标签：c++

将 PathCchAppend 与引用某个父级的相对路径一起使用时

```
"..\..\folder1\" + "folder2" 
```

结果是

```
"folder1\folder2\" 
```

代替

```
"..\..\folder1\folder2\" 
```

除了创建我自己的函数之外，是否有更好的方法/选项来在 PathCchAppendEx 和 PathCchCombine 中附加路径具有相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:03:49.063

无法将两条相对路径与该家族的功能之一结合起来。我会使用 GetCurrentDirectory() 或 GetModuleFileName() （取决于你的情况）得到一个绝对路径，并将它与第一个路径结合起来，然后将结果与第二个结合起来。通常你总是有一些地方可以建立一个绝对路径来开始。

# c# - 从windows进程获取数据到winform

> ID：13454964
> 
> 赞同：1
> 
> 时间：2012-11-19T13:37:28.103
> 
> 标签：c#

我是新来的，这是我第一次向社区寻求帮助。我也是升 C 的新手，但我尝试在此过程中进行管理和学习。

我想得到一些帮助来了解如何为 windows 编写一个进程，我可以用它与我的 winform 进行通信。

我制作了一个 winform 应用程序，它允许我从 Active Directory 中检索一些数据，以及“使用 powerShell”和 AD 类从网络上的计算机中检索一些其他数据。

由于某些原因，我无法获取有关 ex 的正确信息：共享打印机，因为 PowerShell 给了我计算机打印机的输出，而不是用户打印机。这是一个简单的例子。

所以我决定编写一个我想上传并安装在远程计算机上的进程，直到这里我可以管理它。

我想了解什么，如果你能给我看一个小例子，那就是如何在这个过程中添加一些函数并将这个函数的输出返回到我的 Winform。

例如：

1.在我的Winform中远程调用进程并要求他给我所有已安装打印机的列表。2\. 例如，在 lisbox 中显示输出。

我想提前告诉你谢谢你的帮助

# mysql - SELECT 作为同一张表的子集

> ID：13454966
> 
> 赞同：0
> 
> 时间：2012-11-19T13:37:38.727
> 
> 标签：mysql

我正在尝试做这样的事情，所以结果是 2 个单独选择的组合

```
SELECT
order_number,placed_by,placed_when,updated_by,updated_when,
(SELECT SUM(qty_order<>qty_rec) 
 FROM 1_purchase_orders 
 WHERE order_number=order_number AND line_number<>0)
WHERE
supp_number=4 AND line_number=0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:40:16.490

您在查询中使用的相关子查询必须只返回一个标量值。像这样的东西：

```
SELECT 
  t1.order_number,
  t1.placed_by,
  t1.placed_when,
  t1.updated_by,
  t1.updated_when, 
  (SELECT SUM(t2.qty_order <> t2.qty_rec) 
   FROM 1_purchase_orders t2
   WHERE t2.order_number = t1.order_number AND t2.line_number <> 0 
   ORDER BY qty_order LIMIT 1) 
FROM 1_purchase_orders t1
WHERE t1.supp_number = 4 AND t1.line_number=0; 
```

# java - 不在同一 IP 范围内时无法连接 Socket。（子网）

> ID：13454970
> 
> 赞同：1
> 
> 时间：2012-11-19T13:37:47.530
> 
> 标签：java, sockets, connection, subnet

在 IP 为 145.74.217.109 的机器 A 上运行 ServerSocket 然后尝试使用 IP 为 145.74.219.103 的机器 B 连接到机器 A 时，我无法连接。但是当使用机器 C 和 ip 145.74.217.180 时，它可以工作。

我不确定这是否可以在代码中或仅在网络设置中解决。如果是网络问题，是否有另一种方法可以解决这个问题，或者我需要从套接字转移到...？

机器A：

```
public void run() {
        try {
            sock = new ServerSocket(Constants.PORT);
            for (;;) {
                Socket newsock = sock.accept();

                System.out.println("Accepting new player: ");

                new PaintballPlayer(newsock);
            }
        } catch (Exception e) {
            System.out.println("IO error " + e);
        }
        System.out.println("End!");

        try {
            sock.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

机器 B、C：

```
socket = new Socket(ip, Constants.PORT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:51:41.497

如果您查看 IP 我们服务器的 IP `145.74.217.109`IP`145.74.217.180`能够连接而 `145.74.219.103`无法连接，则意味着子网 `145.74.219.X`无法访 `145.74.217.X`​​问这就是它无法连接的原因。这是网络设置询问您的网络管理员。使您的两台机器具有相同的子网掩码

# c# - 从 dxf 导入椭圆弧

> ID：13454971
> 
> 赞同：1
> 
> 时间：2012-11-19T13:37:49.450
> 
> 标签：c#, graphics, drawing, autocad

我有一个问题让我拔掉了我头上的最后一根头发。我正在努力使用从 DXF 提取的数据在我的 c#winform 应用程序中重现一个有角度的椭圆弧。

数据如下：

```
Centerpoint at X                                  : 597,5; 
Centerpoint at Y                                  : 185; 
Endpoint of major axis, relative to the center (X): 35,9651502358374;
Endpoint of major axis, relative to the center (Y): 60,0542085828599; 
Ratio of minor axis to major axis                 : 0,35714285714286; 
Start parameter                                   : 4,78575772944812;
End parameter                                     : 7,78061288491105; 
```

编码：

```
float ex = 597,5;                              //Centerpoint at X
float ey = 185;                                //Centerpoint at Y                                
float exb = 35,9651502358374;                  //Endpoint of major axis (X)                         
float eyb = 60,0542085828599;                  //Endpoint of major axis (Y)                              
float EllipseRatio = 0,35714285714286;                            
double sa = 4,78575772944812;                  //Start parameter                              
double ea = 7,78061288491105;                  //End parameter
sa = double.Parse(exb.ToString()) * Math.Cos(sa) +     //Now it's a Start angle
     double.Parse(eyb.ToString()) * Math.Sin(sa);
ea = 2 * double.Parse(exb.ToString()) * Math.Cos(ea) + //Now it's a sweep angle
     double.Parse(eyb.ToString()) * Math.Sin(ea);
double angle = Math.Atan(exb / eyb);                   //Rotation angle 
Graphics ellipse = this.CreateGraphics();
ellipse.TranslateTransform(ex, ey);                    //So I can rotate at center
ellipse.RotateTransform(float.Parse(angle.ToString()));

ellipse.DrawArc(PreviewPen, (0 - exb), eyb, 2 * exb, 2 * eyb * EllipseRatio, 
                            float.Parse(sa.ToString()), float.Parse(ea.ToString())); 
```

它应该是这样的； ![在此处输入图像描述](../Images/f9dca38de74b313929108634d1c43dd9.png)

相反，它看起来像这样： ![在此处输入图像描述](../Images/e7f0121336e18788f383263ca0886123.png)

如您所见，所有形状都可以，除了椭圆。

我就是搞不定。要么位置不对，要么方位不对，大小、形状、角度……

在某些时候我接近了，但后来我的思维引擎就炸了。

我没有使用电子图形。

如果可以，请提供详细信息。

# iphone - 从自定义类增加单元格加载的高度？

> ID：13454977
> 
> 赞同：-2
> 
> 时间：2012-11-19T13:38:48.127
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [从自定义单元格加载时如何调整单元格表的高度？](https://stackoverflow.com/questions/13451738/how-to-adjust-the-hieght-of-the-cell-table-when-loading-from-the-custom-cells)

我有一个应用程序，我正在从不同的自定义类对象加载单元格。它工作正常。但我的问题是我在这个子类上添加了一个文本视图。我需要根据该文本视图的内容调整表格视图中单元格的高度。`

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0)
    { 
       return 125;
    }
    else
    {
        return  245;
    }
} 
```

现在我正在这样做。但我希望根据自定义类单元格中的文本视图内容大小更改单元格高度。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:45:41.093

你可以很容易地做到这一点，只需看看[这个](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UITableViewCell *cell;
  UILabel *label = nil;

  cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
  if (cell == nil)
  {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell"] autorelease];

    label = [[UILabel alloc] initWithFrame:CGRectZero];
    [label setLineBreakMode:UILineBreakModeWordWrap];
    [label setMinimumFontSize:FONT_SIZE];
    [label setNumberOfLines:0];
    [label setFont:[UIFont systemFontOfSize:FONT_SIZE]];
    [label setTag:1];

    [[cell contentView] addSubview:label];
  }
} 
```

然后你可以计算单元格高度，这里有一个完整的示例[链接](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
  NSString *text = [items objectAtIndex:[indexPath row]];

  CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

  CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

  CGFloat height = MAX(size.height, 44.0f);

  return height + (CELL_CONTENT_MARGIN * 2);
} 
```

# python - 在生产中提供 django 压缩文件

> ID：13454978
> 
> 赞同：0
> 
> 时间：2012-11-19T13:38:51.470
> 
> 标签：python, django, django-compressor

在生产中部署 Django 解决方案时，我遇到了压缩和编译静态文件的问题。我让 Django 在 Nginx 反向代理下运行，该代理还负责提供静态文件。

找不到某些文件（特别是 js 和 css 文件），我注意到这是因为 settings.py 中的以下设置启用了压缩

```
COMPRESS_ENABLED = True
COMPRESS_PRECOMPILERS = (

    ('text/coffeescript', 'coffee --compile --stdio'), 
    ('text/less', 'lessc {infile} {outfile}'),
)
COMPRESS_JS_FILTERS = [
    'compressor.filters.jsmin.JSMinFilter'
]

INSTALLED_APPS = (
    # [..]
    'compressor',
    # [..]
) 
```

那么，冻结预编译和压缩以便在生产中部署它们的最正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:42:42.783

除了上述评论，也许值得一看

```
https://github.com/jezdez/django_compressor 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:46:48.710

我猜您正在寻找一种在部署之前在您的开发机器上压缩文件的方法：

```
./manage.py compress --force 
```

您还应该在设置中设置 COMPRESS_OFFLINE：

```
COMPRESS_OFFLINE = True
if 'compress' in sys.argv:
    # compressor related settings when called as management command
    TEMPLATE_DEBUG = False
    COMPRESS_ENABLED = True 
```

# android - 如何为 android 2.X 使用 addPreferencesFromResource？

> ID：13454979
> 
> 赞同：7
> 
> 时间：2012-11-19T13:38:54.917
> 
> 标签：android, deprecated, android-preferences

遵循了几个howto，但我不明白，
如何使用 `addPreferencesFromResource(R.xml.preferences)`，因为已弃用。

最好的方法是使用，`fragment`但片段仅在 3.0 以后可用，我需要为 android 版本 2.x 做

我会走哪条路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:44:58.537

在 Android 中，“已弃用”的意思是“我们认为您应该考虑另一种解决方案”。特别是对于这种情况，您别无选择，只能`addPreferencesFromResource()`在 Android 2.x 上使用，因为`onBuildHeaders()`（API 级别 11+ 中使用的方法）不存在。

您可以创建支持两者的代码：

```
public class EditPreferences extends SherlockPreferenceActivity {
  @SuppressWarnings("deprecation")
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (Build.VERSION.SDK_INT<Build.VERSION_CODES.HONEYCOMB) {
      addPreferencesFromResource(R.xml.preferences);
      addPreferencesFromResource(R.xml.preferences2);
    }
  }

  @Override
  public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.preference_headers, target);
  }
} 
```

在这里，我们`onBuildHeaders()`用于 API Level 11+ 和`addPreferencesFromResource()`API Level 10 及以下。这是从中提取此代码[的完整示例项目。](https://github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC)

# sql - SQL 获取行作为列

> ID：13454984
> 
> 赞同：0
> 
> 时间：2012-11-19T13:39:10.470
> 
> 标签：sql

> **可能重复：**
> [SQL Server：列到行](https://stackoverflow.com/questions/11070158/sql-server-column-to-row)

我想获取具有相同日期/时间的数据以组织为一行而不是多行。

这是原始数据

```
 date          time              variable                  value
2012-11-01  18:02:07.0000000    Batch.BasisBatchSize                                                    450.0                         
2012-11-01  18:02:07.0000000    Batch.BatchSize                                                         450.0                         
2012-11-01  18:02:07.0000000    Batch.BatchStartTime                                                                  2012-10-30-11:20:05.786       
2012-11-01  18:02:07.0000000    Batch.RecipeName                                                        MIX-CIP
2012-11-01  18:02:07.0000000    BinID[1]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[2]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[3]                                                                0.0                           
2012-11-01  18:02:07.0000000    SBinID[4]                                                               0.0                           
2012-11-01  18:02:07.0000000    BinID[5]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[6]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[7]                                                            0.0                           
2012-11-01  18:02:07.0000000    BinID[8]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[9]                                                                0.0                           
2012-11-01  18:02:07.0000000    BinID[10]                                                               0.0                                              
2012-11-01  18:02:07.0000000    Flavour[1].Weight                                                           0.0                           
2012-11-01  18:02:07.0000000    Flavour[2].Weight                                                       0.0                           
2012-11-01  18:02:07.0000000    Flavour[3].Weight                                                       0.0                           
2012-11-01  18:02:07.0000000    Flavour[4].Weight                                                       0.0                           
2012-11-01  18:02:07.0000000    Flavour[5].Weight                                                       0.0 
```

我希望它看起来像这样：

```
date        time                Batch.BasisBatchSize   Batch.BatchSize  
2012-11-01  18:02:07.0000000             450.0 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:28:01.527

In SQL Server you can use the `PIVOT` function to perform this data transformation. There are a few ways that this can be performed.

Static version is where you hard-code all of the values:

```
select *
from
(
  select date, time, variable, value
  from yourtable
) src
pivot
(
  max(value)
  for variable in ([Batch.BasisBatchSize], [Batch.BatchSize])  -- other column will go here
) piv; 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/35a952/1)

In a dynamic version the list of columns is gathered at run-time:

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(variable) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT date, time, ' + @cols + ' from 
             (
                select date, time, variable, value
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for variable in (' + @cols + ')
            ) p '

execute(@query) 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/35a952/2)

If you do not have access to a `PIVOT` function then you can use an aggregate function with a `CASE` statement:

```
select date,
  time,
  max(case when variable = 'Batch.BasisBatchSize' then value end) as [Batch.BasisBatchSize],
  max(case when variable = 'Batch.BatchSize' then value end) as [Batch.BatchSize],
  max(case when variable = 'Batch.BatchStartTime' then value end) as [Batch.BatchStartTime],
  max(case when variable = 'Batch.RecipeName' then value end) as [Batch.RecipeName]
from yourtable
group by date, time 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/35a952/4)

All versions will return the same result:

```
|                            DATE |             TIME | BATCH.BASISBATCHSIZE | BATCH.BATCHSIZE |    BATCH.BATCHSTARTTIME | BATCH.RECIPENAME |
--------------------------------------------------------------------------------------------------------------------------------------------
| November, 01 2012 00:00:00+0000 | 18:02:07.0000000 |                450.0 |           450.0 | 2012-10-30-11:20:05.786 |          MIX-CIP | 
```

# c# - ASP.NET 在 Javascript 中设置隐藏字段的值

> ID：13454985
> 
> 赞同：26
> 
> 时间：2012-11-19T13:39:11.250
> 
> 标签：c#, javascript, asp.net

我不知道如何在 Javascript 中设置 hiddenField 的值。有人可以告诉我怎么做吗？

Javascript：

```
document.getElementById('hdntxtbxTaksit').value = ""; 
```

HTML：

```
<asp:HiddenField ID="hdntxtbxTaksit" runat="server" Value="" Visible="false">   </asp:HiddenField> 
```

> 错误：“无法获取属性\'value\'的值：对象为空或未定义”

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-19T13:41:35.227

**在 ASP.Net 4.0 之前**

*客户编号*

获取在使用母版页的页面中生成的客户端 ID。由于母版页是 UserControl 类型，它将有自己的 Id 并将页面视为子控件并生成带有前缀的不同 id like `ctrl_`。

这可以通过`<%= ControlName.ClientID %>`在页面中使用来解决，并且可以分配给任何字符串或稍后可以引用的 javascript 变量。

```
var myHidden=document.getElementById('<%= hdntxtbxTaksit.ClientID %>'); 
```

*   如果您使用母版页，Asp.net 服务器控件 ID 会有所不同。

**ASP.Net 4.0 +**

*ClientIDMode 属性*

使用此属性来控制您希望如何为您生成 ID。对于您的情况，在页面级别设置**ClientIDMode="static"**将解决问题。同样的事情也可以应用于控制级别。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-16T09:50:39.630

`asp:HiddenField`作为：

```
<asp:HiddenField runat="server" ID="hfProduct" ClientIDMode="Static" /> 
```

js代码：

```
$("#hfProduct").val("test") 
```

以及背后的代码：

```
hfProduct.Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-23T14:11:32.057

*   首先，您需要正确创建隐藏字段

    `<asp:HiddenField ID="hdntxtbxTaksit" runat="server"></asp:HiddenField>`

*   然后你需要为隐藏字段设置值

    如果你不使用[Jquery](http://jquery.com/)，你应该使用它：

    `document.getElementById("<%= hdntxtbxTaksit.ClientID %>").value = "test";`

    如果您使用的是[Jquery](http://jquery.com/)，它应该是这样的：

    `$("#<%= hdntxtbxTaksit.ClientID %>").val("test");`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T13:41:27.127

```
document.getElementById('<%=hdntxtbxTaksit.ClientID%>').value 
```

您在服务器中设置的 id 是与客户端 id 不同的服务器 id。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-15T22:39:52.973

试试这个代码：

```
$('hdntxtbxTaksit').val('test'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T13:41:25.513

我怀疑您需要[`ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)在 JavaScript 代码中使用而不是文字 ID 字符串，因为您已将该字段标记为`runat="server"`.

例如，如果您的 JavaScript 代码位于 aspx 文件中（不是单独的 JavaScript 文件）：

```
var val = document.getElementById('<%=hdntxtbxTaksit.ClientID%>').value; 
```

如果它位于不是由 ASP.Net 内容呈现的单独 JavaScript 文件中，您将不得不以另一种方式找到它，例如按类。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-13T12:12:26.653

我的理解是，如果您`controls.Visible = false`在初始页面加载期间设置，它不会在客户端响应中呈现。我解决您问题的建议是

不要使用占位符，从场景来看，其实不需要占位符，除非需要在服务器端动态添加控件。使用 div，不使用`runat=server`. 您始终可以使用 css 控制该 div 的可见性。如果以后需要动态添加控件，请使用占位符，但不要设置`visible = false`. 无论如何，占位符不会有任何显示，使用 css 设置该占位符的可见性。以下是如何以编程方式进行操作：

```
placeholderId.Attributes["style"] = "display:none"; 
```

无论如何，正如其他人所说，您的问题会发生，因为一旦您设置`control.visible = false`，它就不会在客户端响应中呈现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-13T13:34:54.890

我会建议你使用 HiddenField 的 ClientID。首先在代码隐藏的任何 Javascript 变量中注册其客户端 ID，然后在客户端脚本中使用它。作为：

.cs 文件代码：

```
ClientScript.RegisterStartupScript(this.GetType(), "clientids", "var hdntxtbxTaksit=" + hdntxtbxTaksit.ClientID, true); 
```

然后在JS中使用以下代码：

```
document.getElementById(hdntxtbxTaksit).value= ""; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-02T18:46:54.007

尝试设置 Javascript 值，如`document.getElementByName('hdntxtbxTaksit').value = '0';`

# asp.net-mvc - 敲除数组过滤器和计算的可观察量不起作用

> ID：13454987
> 
> 赞同：2
> 
> 时间：2012-11-19T13:39:21.997
> 
> 标签：asp.net-mvc, knockout.js, asp.net-mvc-4

我是淘汰赛的新手。我正在尝试一个场景，但我无法让它发挥作用。请帮忙。我正在使用 MVC4。

```
 function ViewModel(data) {
        var self = this;
        this.Collection = ko.observable(data);

        self.GetFilteredCollection = ko.computed(function () {
            var filteredCollection = ko.utils.arrayFilter(self.Collection(), function (item) {
                return item.IsSelected == true;
            });
            return filteredCollection;
        });

        self.FilteredCollectionCount = ko.computed(function () {
            return self.GetFilteredCollection().length;                
        });
});

var collectionList = eval('<%= new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model.Collection) %>');

    var VM = new ViewModel(collectionList);
    ko.applyBindings(VM); 
```

我已将该`IsSelected`属性绑定到复选框。最初，该`IsSelected`属性将设置为 false。

```
<span id="Span1" data-bind="text:$root.FilteredCollectionCount"></span> 
```

即使我选中复选框，我总是将 Span 值设为 0。但我可以看到属性`IsSelected`更改为 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:54:42.020

您需要将 IsSelected 变成一个 observable 以便计算的 observable 在 IsSelected 的值发生变化时能够得到通知

如果它已经是可观察的，那么您需要将代码更改为

```
return item.IsSelected() == true; 
```

# drupal - drupal 7网站中的webform提交

> ID：13454990
> 
> 赞同：0
> 
> 时间：2012-11-19T13:39:29.190
> 
> 标签：drupal, drupal-webform, drupal-form-submission

我已经为我的 drupal 7 网站安装了 Webform 模块。它工作得很好，但是当我单击提交按钮而不填写表单时，它会转到一个页面，当我想重新加载相同的网络表单时显示结果。如何设置路径以加载 webform 在单击提交按钮而不填写表单时包含的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:01:59.587

也许您可以在 node/XXX/webform/configure （高级参数）中设置自定义页面，然后您可以从那里验证网络表单。

您也可以使用[webform_validation](http://drupal.org/project/webform_validation)并在表单为空时拒绝提交按钮

希望能帮助到你

公关

# d3.js - 使用 D3 过渡逐渐更改数字显示为 svg 文本

> ID：13454993
> 
> 赞同：18
> 
> 时间：2012-11-19T13:39:39.313
> 
> 标签：d3.js, label, transition

我正在寻找一种简单的方法来逐渐改变用 d3 显示为 svg 文本的数字的值。

```
var quality = [0.06, 14];
// qSVG is just the main svg element

qSVG.selectAll(".txt")
    .data(quality)
    .enter()
    .append("text")
    .attr("class", "txt")
    .text(0)
    .transition()
    .duration(1750)
        .text(function(d){
             return d;
        }); 
```

由于在这种情况下文本是一个数字，我希望有一种简单的方法可以将其递增到过渡结束。

也许你们中的某个人有一个想法。

干杯

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-19T18:07:22.087

d3JS 似乎已经提供了一个合适的函数，叫做“tween”

这是代码示例的重要部分。

```
 .tween("text", function(d) {
        var i = d3.interpolate(this.textContent, d),
            prec = (d + "").split("."),
            round = (prec.length > 1) ? Math.pow(10, prec[1].length) : 1;

        return function(t) {
            this.textContent = Math.round(i(t) * round) / round;
        };
    });​ 
```

[http://jsfiddle.net/c5YVX/280/](http://jsfiddle.net/c5YVX/280/)

您可以在给定的时间间隔内从任何开始到任何结束值递增它们，而不管它们的数字精度。

它是为 SVG 文本实现的，但对于标准 html 文本当然是一样的。

如果您只需要用于舍入数字的普通补间函数，它会变得更轻量级。

```
 .tween("text", function(d) {
        var i = d3.interpolate(this.textContent, d),

        return function(t) {
            this.textContent = Math.round(i(t));
        };
    });​ 
```

# ruby-on-rails - 设计和单独的用户表

> ID：13454994
> 
> 赞同：0
> 
> 时间：2012-11-19T13:39:42.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我正在开发一个使用 devise 进行身份验证的 rails 3.2 应用程序。

对于与应用程序无关的目标（主要是统计信息），我需要创建一个单独的用户表（我们称之为 alt_users），它只包含用户表的某些字段（姓名、电子邮件和其他一些字段）但没有密码摘要和其他敏感信息。此外，如果用户修改他的帐户或删除它，则不必修改此记录。

我的想法是，当用户注册时，在设计完成他的工作之前，一些选定的字段被插入到 alt_users 表中。

为了实现这一点，覆盖设计行为的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:52:03.960

您可以通过以下方式覆盖 Devise 的 RegistrationsController：

在您的 routes.rb 中：

```
devise_for :users, :controllers => {:registrations => "registrations"} 
```

然后创建文件 app/controllers/registrations_controller.rb ：

```
# app/controllers/registrations_controller.rb
class RegistrationsController < Devise::RegistrationsController

  def create
    # add your data to alt_users here
    super
  end

end 
```

附带说明一下，如果您可以避免覆盖 Devise 的控制器，那将是最好的。尝试考虑其他选项，例如`before_create`User 模型上的回调。

# javascript - 验证在 Mozilla 中不起作用，但在 Google Chrome 中起作用

> ID：13454998
> 
> 赞同：4
> 
> 时间：2012-11-19T13:39:51.150
> 
> 标签：javascript, validation, jsp, firefox, google-chrome

我在验证中遇到问题。它可以在 google chrome 中运行，但不能在 Mozilla 中运行。

喜欢：我有一个表格，其中 Name: ***_* __ *_*** 。

我想进行验证，以便用户无法写入数值。

**在javascript内部：**

```
function checkerFunction1(e)
{
    var charCode1=e.which || e.keyCode;
    if((charCode1 >= 65 && charCode1 <= 90) ||(charCode1 >= 97 && charCode1 <= 122) ||(charCode1==32 || charCode1==8 || charCode1==46))
        return true;
    return false;
} 
```

jsp页面内部：

```
<input type="text" value="Name" onkeypress="return checkerFunction1(window.event)"/> 
```

为什么它在 Mozilla 中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:55:31.113

你忘记打电话了`e.preventDefault()`。

```
function checkerFunction1(e) {
    e = e || window.event;
    var charCode1=e.which || e.keyCode;
    if(
        (charCode1 >= 65 && charCode1 <= 90)
        || (charCode1 >= 97 && charCode1 <= 122)
        || (charCode1==32 || charCode1==8 || charCode1==46)
    ) return true;
    return e.preventDefault(), false;
} 
```

看到[**这个小提琴**](http://jsfiddle.net/gRfsP/)。

更好的做法是在窗口加载时将事件侦听器附加到 DOM 元素，而不是通过 html 属性，因为它将 HTML 与 JavaScript 分开。它还具有选择何时要捕获事件本身的额外好处。如果绝对需要兼容性，
您仍然可以在函数内部抓取。`window.event`

* * *

Firefox 中的“`undefined`问题”来自于`event`被视为关键字而不是变量，所以`window.event === undefined`但是`event !== undefined`，因此，如果您想将事物保留为属性，您可以这样做
`onkeypress="return checkerFunction1(window.event||event)"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:00:11.220

这应该解决它：

```
function checkerFunction1(e)
{
    e = e || window.event;
    var charCode1=e.which || e.keyCode;
    return ((charCode1 >= 65 && charCode1 <= 90) ||(charCode1 >= 97 && charCode1 <= 122) ||(charCode1==32 || charCode1==8 || charCode1==46))
} 
```

括号中的条件`if`已经是一个布尔值。当您想返回时不需要 if`true`或`false`，您基本上是在说：

```
if(true)
    return true;
else
    return false; 
```

Firefox 告诉我“e 未定义”您需要使用该`event`浏览器的对象（如上所示）

`preventDefault()`不需要。返回`false`将阻止 Firefox 在该字段中输入错误的密钥。