# StackOverflow 问答 12809000-12809999

# ios - iOS 中的语音可达性

> ID：12809001
> 
> 赞同：3
> 
> 时间：2012-10-09T21:55:05.020
> 
> 标签：ios, reachability

我在我的应用程序中为蜂窝数据 (WWAN) 和 WiFi 提供了可达性类。我很好奇是否有人找到了一种确定语音可达性的方法，因为蜂窝网络有时会提供语音通话功能而无需数据流量。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:04:57.497

如果您只需要知道是否安装了 SIM 卡，即不知道当前是否有任何覆盖，您可以创建 Core Telephony 框架[`CTTelephonyNetworkInfo`](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html "CTTelephonyNetworkInfo 类参考")类的实例并检查其`subscriberCellularProvider`属性是否已设置。

# scala - Play 2.0 - 将当前执行状态推送到页面

> ID：12809005
> 
> 赞同：1
> 
> 时间：2012-10-09T21:55:32.243
> 
> 标签：scala, playframework, playframework-2.0

所以我目前有一个独立于 Play 的应用程序，它的执行可能需要很长时间。

我想使用 Play 在它上面放置一个 UI，可以调用应用程序，并向用户显示应用程序内部执行的一些细节。我希望页面在执行过程中自动更新，例如，如果应用程序中的变量增加，这将反映在页面上。

我不确定从哪里开始 - 我需要将应用程序拆分为模型 + 控制器吗？还是我只需要在控制器中有代码来实例化我已经编码的类并调用我需要的方法？

在页面上不断显示执行状态呢？

我应该了解/阅读的任何资源？代码示例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T23:12:24.480

你想让这个应用程序在游戏之外运行，也许在另一台服务器上？您可以修改应用程序，还是这是第 3 方软件？

如果是这样，您必须有某种方式在您的播放前端和您的应用程序之间来回发送数据。您可以让您的应用程序公开一个 websocket，然后您的播放前端和您的应用程序可以相互推送数据。然后，您可以让您的客户端页面打开一个 websocket 来播放前端，然后播放可以将更新推送到客户端。如果您的应用程序不支持 websocket，您还可以在前端公开一些 URL 以供应用程序 POST 到。然后，您可以使用某种消息总线或数据库机制（RabbitMQ、redis、Mongo capped collection，甚至只是一个共享队列对象），以便前端 websocket 可以获取这些更新并将它们发送到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:46:04.680

您可能已经这样做了，但一个好的起点是使用`play new`命令创建一个框架 Play 应用程序，同时参考[创建新应用程序](http://www.playframework.org/documentation/2.0.4/NewApplication%20%22creating%20a%20new%20application%22%20section.)部分。您将拥有“视图”（HTML 模板页面）和一个控制器（在 中`Application.scala`）。你可以添加更多的控制器，但是你只需要一个页面就足够了。

您可以将应用程序（如果是 JVM 应用程序）中的 jars 添加到 Play 应用程序的 lib 目录中。从这里：“或者我只需要在控制器中有代码来实例化我已经编码的类并调用我需要的方法？” 听起来您很乐意让您的应用程序在 Jetty + Play 服务器的进程中运行。查看[Global](http://www.playframework.org/documentation/2.0.4/ScalaGlobal)对象以在进程启动时启动您的应用程序。

查看有关[彗星套接字](http://www.playframework.org/documentation/2.0.4/ScalaComet)的部分，以将更新从 Play 应用程序发送到浏览器。您需要在网页中使用一些 Javascript。

# java - 访问 ArrayList (java) 中的对象类变量

> ID：12809009
> 
> 赞同：1
> 
> 时间：2012-10-09T21:55:54.900
> 
> 标签：java, arraylist

所以，假设我有一门课来描述一本书

```
 public class Book {
     String name;
     int pages;
     String auother;
     boolean available;
     String rentername;
  } 
```

现在，我设置了一个数组列表来包含我希望在运行期间拥有/添加/删除的未知数量的书籍。问题是，当我尝试通过索引访问数组列表中的某本书时，我得到了一个错误。

```
enter code here

ArrayList Books = new ArrayList();
Book bk1 = new Book();
Books.add(bk1);
System.out.println(Books[0]. --->>> won't give me accesses to the 'Book' class variables (name, pages...) 
```

那么，我怎样才能使它成为类变量呢？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T22:06:55.160

[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)是[`java.util.List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)由动态数组支持的集合的实现。

这意味着三件事。

首先，您无需担心调整数组的大小、分配或处理元素到数组中，它们`ArrayList`会为您处理。

其次，任何想要 a 的方法`List`都不关心`LinkedList`解耦代码的实现（您可以传递 a 代替）（这意味着您可以更改实现而不会对依赖它的人产生不利影响，因为通过`List`接口制定的合同）

第三，要与 的内容进行交互`List`，您需要使用一种或多种接口访问方法。

你已经知道了`add`，但是要获取一个对象，你需要使用[`get`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)which；

> 返回此列表中指定位置的元素

你也可能对此有兴趣

*   [`remove(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28int%29)和[`remove(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)
*   [`set(int, Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#set%28int,%20E%29)
*   [`contains(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)
*   [`indexOf(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)
*   [`size`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#size%28%29)

当然，还有其他方法，但这些都是立即有用的。

我也会阅读[Collections Trail](http://docs.oracle.com/javase/tutorial/collections/index.html)

**更新示例**

```
public class Test {

    public static void main(String[] args) {
        new Test();
    }

    public Test() {

        List<Book> listOfBooks = new ArrayList<Book>();
        Book bk1 = new Book();
        listOfBooks.add(bk1);

        System.out.println("           bk1 = " + bk1);
        System.out.println("listOfBooks(0) = " + listOfBooks.get(0));

    }

    public class Book {

        String name;
        int pages;
        String auother;
        boolean available;
        String rentername;

        @Override
        public String toString() {
            return "Book: name = " + name + "; pages = " + pages + "; available = " + available + "; rentername = " + rentername + "; hashCode = " + hashCode();
        }

    }
} 
```

哪个输出

```
 bk1 = Book: name = null; pages = 0; available = false; rentername = null; hashCode = 1137551390
listOfBooks(0) = Book: name = null; pages = 0; available = false; rentername = null; hashCode = 1137551390 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T21:56:45.677

使用 的[`get(int index)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)方法`List`获取你想要的条目：

```
System.out.println(Books.get(0)); 
```

您不能`List`使用用于数组的表示法访问 a 的条目。

顺便说一句：请遵守[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T21:56:44.823

您需要创建公共 setter 和 getters 方法来访问字段，并访问您需要的 book 实例

```
books.get(index) 
```

# c# - 标题排序表达式

> ID：12809011
> 
> 赞同：2
> 
> 时间：2012-10-09T21:56:08.717
> 
> 标签：c#, gridview

gridview 列标题从 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) { GridView grid = sender as GridView; DataRowView tableData = e.Row.DataItem as DataRowView;

```
 if (e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[1].Text = System.DateTime.Now.AddMonths(-3).ToString("MMMM") ;
    }
} 
```

如何从后面的代码中对这一特定列进行排序。文件.asp

```
<asp:TemplateField ItemStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom" ItemStyle-Wrap="False">
<ItemTemplate>
<asp:Label ID="lblMonth_1" runat="server"></asp:Label>
</ItemTemplate>
</asp:TemplateField> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:21:09.490

您可能不需要为此查看代码。你用的是什么类型的数据库？

您是否考虑过修改查询以包含另一列？

```
select mydate, dateadd(m, -3, mydate) as olderdate from mytable; 
```

然后，您可以将您的 gridview 字段设置为：

```
<asp:BoundField DataField="olderdate" HeaderText="Older Date" SortExpression="olderdate" dataformatstring="{0:MMM}">
    <ItemStyle Wrap="False" />
</asp:BoundField> 
```

并将您的网格视图标记为 AllowSorting="true"。

# ajax - 使用 ajax 映射/可观察对象

> ID：12809013
> 
> 赞同：0
> 
> 时间：2012-10-09T21:56:29.797
> 
> 标签：ajax, knockout.js

我使用以下 ajax 代码通过它的 id 获取一个名为 Client 的对象，如下所示：

```
$.ajax({
            url: "api/client/GetClient/" + id,
            contentType: 'json',
            success: function (result) {
                model.selectedClient(result);
                $("#loader").hide();
            },
            failure: function (result) {
                alert(result.d);
                $("#loader").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("An error occurred, please try again.");
                $("#loader").hide();
            }
        }); 
```

但是，尽管 selectedClient 是可观察的，但如果我将 say selectedClient().Name 的值绑定到文本框，则它的值不是这样，更改文本框不会更新值。我不想创建一个函数和一个 push 方法，我喜欢能够简单地将返回的对象放入，以便将来的更改是无缝的。我该怎么做才能使它们成为可观察的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:50:16.850

`selectedClient`如果您想反映 UI 中的更改，它应该是可观察的，它的属性也是如此。

你是如何创建你 selectedClient 的？

您实际上应该像这样创建一个类：

```
Client = function(data){
    ko.mapping.fromJS(data,{},this);
} 
```

在您的视图模型中有这样的属性：

```
selectedClient = ko.observable() 
```

你的ajax成功方法应该是：

```
success: function (result) {
            model.selectedClient(new Client (result));
            $("#loader").hide();
         } 
```

这将确保无论何时您的对象的属性发生变化，您的视图都会反映它。有关更多信息，您可以参考此链接：

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

# c++ - OpenCv 中实时视频流的图像拼接

> ID：12809014
> 
> 赞同：-3
> 
> 时间：2012-10-09T21:56:36.397
> 
> 标签：c++, multithreading, visual-studio, opencv, image-stitching

我正在尝试使用 OpenCv 拼接来自实时摄像机（更像是全景图）的图像。缝合工作正常。我的问题是，我希望以 30 英里/小时左右的速度实时完成拼接，但拼接的处理速度很慢。

我想使用线程来提高速度，但为了使用它们，我需要存储我的实时视频流，或者有什么方法可以直接将线程用于实时流。

这是一个示例代码：

```
 SapAcqDevice *pAcq=new SapAcqDevice("Genie_HM1400_1", false);
  SapBuffer *pBuffer = new SapBuffer(20,pAcq);
  SapView *pView=new SapView(pBuffer,(HWND)-1);
  SapAcqDeviceToBuf *pTransfer= new SapAcqDeviceToB(pAcq,pBuffer,XferCallback,pView);

  pAcq->Create();
  pBuffer->Create();
  pView->Create();

  pTransfer->Create();  
  pTransfer->Grab();

  printf("Press any key to stop grab\n");
  getch();

  pTransfer->Freeze();  
  pTransfer->Wait(5000);

  printf("Press any key to terminate\n");
  getch(); 
```

上面的代码用于捕获实时流。XferCallback 函数用于对帧进行处理。在这个函数中，我调用我的缝合引擎。由于引擎的处理速度很慢，我想使用线程。

这是回调函数的示例代码：

```
SapView *pView = (SapView *) pInfo->GetContext();
SapBuffer *pBuffer;
pBuffer = pView->GetBuffer();

void *pData=NULL;
pBuffer->GetAddress(&pData);

int width=pBuffer->GetWidth();
int height=pBuffer->GetHeight();
int depth=pBuffer->GetPixelDepth();

IplImage *fram;
fram = cvCreateImage(cvSize(width,height),depth,1);
cvSetImageData(fram,pData,width);

stitching(frame_num , fram);

cvWaitKey(1);

frame_num++; 
```

我想要许多线程在缝合引擎上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:37:47.703

如果您认为使用线可以足够快地缝合，那就去吧。

> 我需要存储我的实时视频流还是有什么方法可以直接使用线程进行实时流。

您可能会受益于使用预先分配的帧设置环形缓冲区。你知道图像大小不会改变。因此，您的 Sapera 采集回调只是将一帧推入缓冲区。

然后，您将有另一个线程尽可能快地缝合并维护状态信息以帮助优化下一个缝合。您没有提供有关拼接过程的太多信息，但大概您可以使其与 OpenMP 并行。如果这足够快以跟上帧采集，那么你会没事的。如果没有，那么您将开始丢帧，因为您的环形缓冲区已满。

如上所述，您可能可以预测下一帧的拼接应该从哪里开始。这是基于一帧和下一帧之间的移动应该相当小和/或平滑。这样，您可以缩小搜索范围并大大提高速度。

# google-apps-script - Google Apps 添加编辑器文件夹

> ID：12809022
> 
> 赞同：1
> 
> 时间：2012-10-09T21:57:07.797
> 
> 标签：google-apps-script, google-sheets

我有一个电子邮件用户列表`Listvalideur[]`。我创建了一个文件夹。

1.  如何使用此将编辑器添加到新文件夹`Listvalideur`？这几行不起作用：

    ```
    var folder = optFolder.createFolder(folderName); 
    for (var i=0; i<Listvalideur.length; i++) {
        folder.addEditor(Listvalideur[i][0]);
    } 
    ```

2.  你也能给我`folder.addeditors`方法的语法吗？这两种语法不起作用：

    ```
    folder.addEditors('xxx1.yyy1@vvv.com','xxx2.yyyy2@vvv.com');
    folder.addEditors('xxx1.yyy1@vvv.com,xxx2.yyyy2@vvv.com'); 
    ```

非常感谢

谢谢你的回答。实际上我的数组只有一维Listvalideur[i]。我从电子表格中获取此变量调用 $ListValideur

```
 |       A 
1  |  email1@etc
2  |  email2@example 
```

我使用这种语法来读取和设置数组调用 listvalideur[]

```
var Listvalideur = SpreadsheetApp.openById(sskeyTable)
     .getSheetByName('$ListValideur')
     .getDataRange‌​()
     .getValues(); 
```

现在我想从我的数组 listvalideur[] 添加所有电子邮件用户以访问文件夹。

我在没有 manage 的情况下尝试这种语法：

```
var folder = optFolder.createFolder(folderName); 
folder.addEditors(ListValideur[]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:55:24.463

1.  在您的问题中，您说您有一个`Listvalideur`可变的电子邮件列表。它真的是一维数组（例如列表）还是矩阵？因为在您编写的代码上`Listvalideur[i][0]`。只试一试`Listvalideur[i]`。或者向我们展示如何获取/创建此变量。其余的代码看起来不错。

2.  您需要传递一系列电子邮件，例如*（注意括号）*

    ```
    folder.addEditors(['email1@etc', 'email2@example']); 
    ```

# beagleboard - Beagleboard Xm 的 SPI

> ID：12809023
> 
> 赞同：2
> 
> 时间：2012-10-09T21:57:33.580
> 
> 标签：beagleboard, spi

我试图让 spi 接口在 BeagleBoard Xm 上工作。我已经重新配置内核（2.6.32）以允许访问用户空间中的 spidev 驱动程序（spidev3.0 和 3.1 显示在 /dev 下），并且我已经编译了 Documentation/spi 下给出的 spidev_test.c 程序。当我运行程序时，我得到以下输出：

```
# ./spi_test -D /dev/spidev3.0 spi mode: 3 bits per word: 8 max speed: 5[ 186.539611] spidev spi3.0: DMA RX last word empty00000 Hz (500 KHz)

 00 00 00 00 00 00  00 00 00 00 00 00  00 00 00 00 00 00  00 00 00 00
 00 00  00 00 00 00 00 00  00 00 00 00 00 00  00 0D 
```

我正在传输以下内容，并希望在接收缓冲区中看到：0xFF、0xFF、0xFF、0xFF、0xFF、0xFF、0x40、0x00、0x00、0x00、0x00、0x95、0xFF、0xFF、0xFF、0xFF、0xFF , 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xDE, 0xAD, 0xBE, 0xEF, 0xBA, 0xAD, 0xF0, 0x0D

我在板上的 SIMO 和 SOMI 之间有一个跳线，当用 o-scope 探测 CLK 或 CS0 引脚时，我没有看到任何引脚上有任何活动。这让我相信我没有在内核或 u-boot 中正确配置某些东西。DMA 错误也可能是配置问题的线索。

有没有人遇到过这个问题？或者对我可能遇到的问题有任何见解？

我下一个可能的解决方案是使用更新的内核并深入研究 u-boot 以查看 u-boot 是否覆盖了我的 pin muxing。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:36:55.477

我能够弄清楚我的问题。我在内核中启用了 spidev 和 pin muxing，但没有更新 u-boot。最后，在升级到 2.6.39-rc7 内核并对 u-boot 中的 beagle.h 文件进行正确调整后，我的环回测试似乎工作正常。

# ios - 如何仅为一个视图控制器设置 UINavigation 栏的 titletextattributes？

> ID：12809024
> 
> 赞同：4
> 
> 时间：2012-10-09T21:57:32.570
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar, viewdidload

我正在尝试仅更改我的一个视图控制器的字体大小，因为它适用于更多文本，因此需要比我的其他视图更小的字体大小。我在didFinishLaunchingWithOptions 期间在appdelegate 中设置导航栏属性，然后在viewDidLoad 期间为有问题的视图控制器设置字体。但是，当我返回或前进屏幕时，我对导航栏所做的更改会保留下来，即较小的字体。有没有解决的办法？例如，在退出视图时将字体设置回正常状态或其他什么？

Cliffsnotes：试图在一个视图控制器中设置字体，但是一旦我设置了它，它就适用于所有视图控制器。

代码如下：

在 AppDelegate 中：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar.png"] forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor clearColor],
  UITextAttributeTextColor,
  [UIColor whiteColor],
  UITextAttributeTextShadowColor,
  [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],
  UITextAttributeTextShadowOffset,
  [UIFont fontWithName:@"QuicksandBold-Regular" size:24.0],
  UITextAttributeFont,
  nil]]; 
```

在视图控制器 viewDidLoad 中：

```
[self.navigationController.navigationBar setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                                     [UIColor clearColor],
                                                                     UITextAttributeTextColor,
                                                                     [UIColor whiteColor],
                                                                     UITextAttributeTextShadowColor,
                                                                     [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],
                                                                     UITextAttributeTextShadowOffset,
                                                                     [UIFont fontWithName:@"QuicksandBold-Regular" size:18.0],
                                                                     UITextAttributeFont,
                                                                     nil]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:12:31.550

导航栏由导航控制器中的所有视图控制器共享。所以一旦你改变了导航栏，同一个导航堆栈中的所有视图控制器都会受到影响。一种选择是为这个视图控制器设置一个自定义 titleView。

```
self.navigationItem.titleView = ... // some UILabel with the desired formatting 
```

这样，只有一个视图控制器显示自定义标题。

另一种选择是在视图控制器的 viewWillAppear 方法中更改导航栏的外观，然后在视图控制器的 viewWillDisappear 方法中将其重置。但是这种方法可能不如只使用自定义的titleView那么流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T21:37:08.887

所以，现在你的属性键已被弃用。使用此键：

```
NSDictionary* attributes = [NSDictionary dictionaryWithObjectsAndKeys:
 [UIColor clearColor], NSForegroundColorAttributeName,
 [UIColor whiteColor], NSShadowAttributeName,
 [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], NSShadowAttributeName,
 [UIFont fontWithName:@"QuicksandBold-Regular" size:24.0], NSFontAttributeName,
 nil]; 
```

# django - 格式以语言感知方式在 Django 模板中浮动

> ID：12809027
> 
> 赞同：3
> 
> 时间：2012-10-09T21:57:43.260
> 
> 标签：django, internationalization, django-templates

我正在使用 Django 的[人性化](https://docs.djangoproject.com/en/dev/ref/contrib/humanize/#ref-contrib-humanize)来使我的应用程序中的大浮点数更具可读性。此外，我的应用程序有不同的语言版本，不同的语言使用 , 和 . 反过来用数字签名。

对于整数值，humanize 标签`intcomma`效果很好：

```
{{ intvalue|intcomma }} 
```

会给不同的语言环境：

```
English:  1,000,000
Dutch:    1.000.000 
```

但是，使用浮点数并不能很好地工作。例如，在我的模板中，您会发现：

```
{{ floatvalue|floatformat:2|intcomma }} 
```

会给不同的语言环境：

```
English:  1,000,000.00
Dutch:    1,000,000,00 
```

请注意，荷兰语不是 1.000.000,00，而是显示 1,000,000,00。切换 floatformat:2 和 intcomma 标记也不起作用，因为该值什么也没有。

**关于如何轻松解决此问题的任何想法？**

（如果可能的话，我宁愿不使用外部库，例如[Babel](http://babel.edgewall.org/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:01:03.507

试试 Django[**格式本地化**功能](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/)。它为您提供了三个选项。正如 Django 文档所说，

> Django 的格式化系统能够使用为当前语言环境指定的格式在模板中显示日期、时间和数字。它还处理表单中的本地化输入。
> 
> 启用后，访问相同内容的两个用户可能会看到格式不同的日期、时间和数字，具体取决于他们当前区域设置的格式。
> 
> 默认情况下禁用格式化系统。要启用它，必须`USE_L10N = True`在您的设置文件中进行设置。

因此，第一个选项为所有模板打开依赖于区域设置的数字格式。

第二个选项是使用[`localize`模板标签](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#localize)为模板的一部分打开依赖于区域设置的数字格式。例如，

```
{% load l10n %}

{% localize on %}
    {{ value }}
{% endlocalize %} 
```

第三种选择是使用[`localize`模板过滤器](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#std%3atemplatefilter-localize)来强制为单个值设置依赖于区域设置的数字格式。例如，

```
{% load l10n %}

{{ value|localize }} 
```

# c# - 向 ObervableCollection 添加额外的控件

> ID：12809032
> 
> 赞同：0
> 
> 时间：2012-10-09T21:57:57.287
> 
> 标签：c#, wpf

我对 WPF 真的很陌生，所以如果这是一个明显的问题，我很抱歉。我在 XAML 中有一个简单的复选框

```
<ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" 
ItemsSource="{Binding Selections}" >
    <ListBox.ItemTemplate>
            <DataTemplate>
                    <Grid >
                    <CheckBox IsChecked="{Binding IsChecked}" 
                       Content="{Binding Path=Item.SelectionName}" />
                    </Grid >  
            </DataTemplate>
        </ListBox.ItemTemplate>
</ListBox> 
```

允许绑定和 INotifyPropertyChanged 的​​简化代码是：

```
public ObservableCollection<CheckedListItem<Selection>> Selections { get; set; }

public class Selection
{
    public String SelectionName { get; set; }
}

  Selections = new ObservableCollection<CheckedListItem<Selection>>();
  Selections.Add(new CheckedListItem<Selection>(new Selection() 
         { SelectionName = "SomeName" }, isChecked: true));

    public class CheckedListItem<T> : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private bool isChecked;
        private T item;

        public CheckedListItem()
        { }

        public CheckedListItem(T item, bool isChecked = false)
        {
            this.item = item;
            this.isChecked = isChecked;
        }

        public T Item
        {
            get { return item; }
            set
            {
                item = value;
                if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Item"));
            }
        }

        public bool IsChecked
        {
            get { return isChecked; }
            set
            {
                isChecked = value;
                if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("IsChecked"));
            }
        }
    } 
```

我现在需要添加一个与每个复选框关联的附加文本框，所以在 XAML 中我有

```
 <ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" 
           ItemsSource="{Binding Selections}" Margin="12,22,12,94">
    <ListBox.ItemTemplate>
            <DataTemplate>
                    <Grid >
                    <CheckBox IsChecked="{Binding IsChecked}" 
                       Content="{Binding Path=Item.SelectionName}" />
                    <<TextBox />
                    </Grid >  
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我有点难过如何将它作为 ObservableCollection 的一部分包含在内并在 CheckBox 和关联的 TextBox 上设置绑定？两者都被加在一起，`Selections.Add(new CheckedListItem<Selection>(new Selection() { SelectionName = "SomeName" }, isChecked: true));`这让我有些困惑。

编辑：添加完整代码

```
public partial class SelectionSettingWindow : Window
    {

        public ObservableCollection<CheckedListItem<Selection>> Selections { get; set; }

        public class Selection
        {
            public String SelectionName { get; set; }
            public string SelectionTextField { get; set; }
        }

        public SelectionSettingWindow()
        {
            InitializeComponent();

            Selections = new ObservableCollection<CheckedListItem<Selection>>();
            string fg = @"Item1,true,TExtbox1text:Item2,true,TExtbox2text:Item3,false,TExtbox3text"; //Test String
            string[] splitSelections = fg.Split(':');
            foreach (string item in splitSelections)
            {
                string[] spSelectionSetting = item.Split(',');

                bool bchecked = bool.Parse(spSelectionSetting[1].ToString());
                string tbText = spSelectionSetting[2].ToString();
                Selections.Add(new CheckedListItem<Selection>(new Selection() 
                   { SelectionName = spSelectionSetting[0].ToString(),   
                       SelectionTextField = bText }, isChecked: bchecked));

            }

            DataContext = this;
        }

        public class CheckedListItem<T> : INotifyPropertyChanged
        {
            public event PropertyChangedEventHandler PropertyChanged;

            private bool isChecked;
            private T item;
            private string textField;

            public CheckedListItem()
            { }

            public CheckedListItem(T item, bool isChecked = false)
            {
                this.item = item;
                this.isChecked = isChecked;
            }

            public T Item
            {
                get { return item; }
                set
                {
                    item = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Item"));
                }
            }

            public bool IsChecked
            {
                get { return isChecked; }
                set
                {
                    isChecked = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("IsChecked"));
                }
            }

            public string TextField
            {
                get { return textField; }
                set
                {
                    textField = value;
                    if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("TextField"));
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:05:25.393

```
<ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" 
       ItemsSource="{Binding Selections}" Margin="12,22,12,94">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" 
                   Content="{Binding Path=Item.SelectionName}" />
                <TextBox Text="{Binding Item.SelectionTextField, Mode=TwoWay}" />
            </StackPanel>  
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

将`SelectionTextField`上面的内容替换为需要使用`Selection`类上的文本框进行编辑的任何字段。

请注意，我将其更改`<Grid>`为 a`<StackPanel>`所以它们不会出现在彼此之上，并将绑定更改为 TwoWay，因此更改会反映在模型中。

确保您的`Selection`类实现`INotifyPropertyChanged`（ObservableCollection 在将内容添加到集合中/从集合中删除时更新 UI，它不知道何时通知内容的属性发生更改，因此他们需要自己执行此操作）

在许多类上实现`INotifyPropertyChanged`可能很麻烦。我发现实现一个对此有用的基类。我已经有了这个，还有一个额外的反射帮助器，用于[在此处](http://amoore.katalyststudios.com/sites/default/files/Aaron%20Moore%20MVVM%20Foundation.zip)更改可用的 raise 属性，以及我提供的一个[片段。](http://amoore.katalyststudios.com/files/MVVMProperty.snippet)它是silverlight，但它应该适用于WPF。使用我通过下载提供的代码，您只需键入`proprpc`并点击选项卡，Visual Studio 就会存根通知更改的属性。一些解释在我的一篇旧博客文章中[，](http://amoore.katalyststudios.com/content/game-day)并归功于我基于代码和片段的位置。

# sql - SQL：从多个表中获取数据

> ID：12809035
> 
> 赞同：0
> 
> 时间：2012-10-09T21:58:17.593
> 
> 标签：sql

我有以下内容：

```
SELECT  
   f.Korsnamn AS Foto, ä.ID AS ÄrendeID, ä.Kortnamn AS Ärende, l.Kortnamn AS Labb
FROM    
   Foto f, Ärendet ä, Labbrapport l
WHERE   
   f.ÄrendeID = ä.ID 
```

返回：

```
Foto  ÄrendeID  Ärende  Labb
1123       10   asd      sdf
korset     12   234      sdf
111        13   213      sdf
asd         9   123123   sdf 
```

在我的`Labbrapport`表中，只有一个条目，外键为`Ärende.ID = 12`，但它也列在`ÄrendeID`10、13 和 9 上？我应该怎么做才能得到类似这样的输出：

```
Foto    ÄrendeID  Ärende    Labb
1123       10       asd 
korset     12       234      sdf
111        13       213
asd         9       123123 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:02:21.400

```
SELECT f.Korsnamn AS Foto, ä.ID AS ÄrendeID, ä.Kortnamn AS Ärende, l.Kortnamn AS Labb
FROM Foto f, Ärendet ä, Labbrapport l
WHERE f.ÄrendeID = ä.ID
AND l.ÄrendeID = f.ÄrendeID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:02:56.783

在和之间添加`join`条件。例如下面：`Labbrapport``Ärendet`

```
SELECT f.Korsnamn AS Foto, ä.ID AS ÄrendeID, ä.Kortnamn AS Ärende, 
       l.Kortnamn AS Labb
FROM Foto f, Ärendet ä, Labbrapport l
WHERE f.ÄrendeID = ä.ID
      AND ä.ID = l.ID; 
```

请使用上述查询中的正确`join key`列。`Labbrapport`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:24:10.173

使用 LEFT JOIN 或 RIGHT JOIN 取决于您的主表。在您的情况下使用 LEFT JOIN

```
SELECT f.Korsnamn AS Foto, ä.ID AS ÄrendeID, ä.Kortnamn AS Ärende, 
   l.Kortnamn AS Labb
FROM Foto f 
INNER JOIN Ärendet ä ON f.ÄrendeID = ä.ID
LEFT JOIN Labbrapport l ON ä.ID = l.ID 
```

# javascript - IE JS 类型错误：对象不支持此属性或方法

> ID：12809044
> 
> 赞同：0
> 
> 时间：2012-10-09T21:59:25.053
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我正在尝试编写一个 cookie 来跟踪访问者的新近度，而我正在使用 IE8 碰壁。我的日志向 IE 用户显示的错误信息不那么丰富：**TypeError: Object does not support this property or method。**

知道我需要在下面的代码中修改什么以便它与 IE 一起使用吗？

```
var currentDate = Date.now();
var cookies = document.cookie.match(/jcom\=.+\}/);

if (cookies == null) {
var cookieBase = '{"created":"createdNull","lastVisit":"visitNull"}';
var siteTime = $.parseJSON(cookieBase);
siteTime.created = currentDate;
siteTime.lastVisit = currentDate;
cookieOut = "{\"created\":" + siteTime.created + ",\"lastVisit\":" + siteTime.lastVisit + "};expires=Thu, 2 Aug 2020 20:47:11 UTC;path=/";
document.cookie="jcom=" + cookieOut;
}
else {
var cookies = document.cookie.match(/jcom\=.+\}/)[0];
var cookieSplit1 = cookies.split('=')[1];
var cookieSplit= cookieSplit1.split(';')[0]
var siteTime = $.parseJSON(cookieSplit);
siteTime.lastVisit = currentDate;
cookieOut = "{\"created\":" + siteTime.created + ",\"lastVisit\":"+ siteTime.lastVisit + "};expires=Thu, 2 Aug 2020 20:47:11 UTC;path=/";
document.cookie="jcom=" + cookieOut;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:02:10.237

Internet Explorer 8 不支持`Date.now()`。你可以很容易地自己实现它：

```
if( !Date.now) {
    Date.now = function() {return new Date.getTime();};
} 
```

# wcf - 引用程序集中的 Unity 配置无法识别

> ID：12809047
> 
> 赞同：1
> 
> 时间：2012-10-09T21:59:43.943
> 
> 标签：wcf, unity-container, enterprise-library, msmq

我有一个从另一个项目继承而来的相当昂贵的库。此程序集通过 Unity 使用拦截，并且需要精心设计的 Web.config 用于设计时配置。我正在尝试从 MSMQ WCF 服务中使用此程序集，当程序集中的代码尝试打开企业库托管的数据库连接时，我收到错误。

> 依赖项解析失败，type = "ServicesImplementation.EntityMaster.IEntityRepository"，name = "(none)"。异常发生时：解决时。异常是： InvalidOperationException - 当前类型 ServicesImplementation.EntityMaster.IEntityRepository 是一个接口，无法构造。您是否缺少类型映射？

我的问题是，我是否需要从我的 WCF 服务中承担所有配置职责，或者此配置是否封装在引用的程序集中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:09:36.517

您必须在 .config 文件中包含所有配置。它是应用程序获取配置数据的默认来源。另请注意，如果您在 IIS 中托管，则应使用 web.config，如果不是（Windows 服务或应用程序） - 使用 app.config。可以将部分配置提取到另一个文件并从主配置中引用它。

例如：

Assembly1 包含服务定义和主机逻辑。
Assembly2 实际上托管 Assembly1 服务。

在这种情况下，所有服务配置都必须驻留在 Assembly2 *.config 文件中。

# java - 集群应用环境中的 ServletContex 属性

> ID：12809048
> 
> 赞同：1
> 
> 时间：2012-10-09T21:59:48.903
> 
> 标签：java, servlets, struts2, struts, servletconfig

我将我的应用程序部署在具有两台服务器的集群中。当我使用以下方式设置任何属性时：

```
this.getServletContext().setAttribute("test", testObj); 
```

1.  是否可以通过两个服务器访问`testObj`带有密钥的属性？`test`
2.  服务器的数量是否等于 JVM 的数量？就我而言，有两台服务器，这是否意味着有两个 JVM？
3.  根据我的理解， [ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)是每个 JVM 每个 webapp 一个，所以在我的情况下，`testObj`当通过两个 JVM 访问时是否可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:12:38.053

根据[ServletContext javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)：

> 对于在其部署描述符中标记为“分布式”的 Web 应用程序，每个虚拟机将有一个上下文实例。在这种情况下，上下文不能用作共享全局信息的位置（因为信息不会是真正的全局信息）。请改用数据库等外部资源。

[Servlet 规范](http://download.oracle.com/otndocs/jcp/servlet-2.5-mrel2-eval-oth-JSpec/)还在“SRV.4.4.1 分布式容器中的上下文属性”中声明：

> 上下文属性对于创建它们的 JVM 来说是本地的。这可以防止 ServletContext 属性成为分布式容器中的共享内存存储。当需要在分布式环境中运行的 servlet 之间共享信息时，应将信息放入会话中（参见第 SRV.7 章，“会话”），存储在数据库中，或设置在 Enterprise JavaBeansTM 组件中。

所以你的问题的答案是否定的，该属性在整个集群中是不可访问的，它仅在本地 JVM 上可用。

至于每台服务器的 JVM 数量，在基本设置中，您可以在每台物理机器上拥有一个 JVM，但您也可以[在同一台机器上拥有更多 JVM，具体取决于应用程序的特性或者您是否希望最大限度地利用硬件](https://stackoverflow.com/questions/4569159/why-do-we-use-multi-application-server-instances-on-the-same-server)。

# java - 推送或拉取通知

> ID：12809052
> 
> 赞同：0
> 
> 时间：2012-10-09T22:00:05.187
> 
> 标签：java, android, ios, mobile, push-notification

我们想为移动应用程序实现一个后端服务器 [Java EE]，它会在某些事件上向移动设备发送通知，我问的是推送通知还是拉取通知的最佳/最简单方法，这是我的想法/问题
1-要求是只要应用程序正在运行就立即将通知发送到移动设备，如果它没有运行则不需要发送
2-我读到要向 IOS 或 Android 推送通知，我需要连接到苹果/谷歌通知服务器，我觉得这很复杂，特别是它需要低级套接字编程，但是基于数字1，项目时间和预算有限，我们真的需要推动吗？它真的很复杂吗
3-我读到拉日期可能会耗尽电池并消耗数据，但是如果在移动设备上实现一个每天只运行 3 或 4 次的简单作业，在后端服务器上调用一个简单的 Web 服务来请求通知
PS 将是非常感谢您可以提供一些类似案例的教程:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:08:31.317

1）如果您的应用程序已经在运行，它是否仍然连接到同一位置？如果是这样，您最好在那时拉取通知。但是，如果应用程序没有主动连接，我会尽量避免拉动。

2）直接与谷歌和苹果网站上的通知服务器交互，确实是一项繁琐的任务。然而，有些公司已经让这对你来说变得更容易了。使用 urbanairship、xtify 和 mblox 等公司的优势将使您在几分钟内开始发送推送消息。（例如，请查看教程部分中的[http://developer.mblox.com/docs/](http://developer.mblox.com/docs/)）。

3) 根据您尝试呈现的数据，最终用户现在每天都习惯于即时数据。我无法想象每天拉 3 到 4 次的服务就足够了，但是如果您的用例确实限制为每天 4 次，并且您为此创建的后台进程中没有其他活动，您还不如让后台进程运行。但是请仔细考虑一下……如果您想在任何时候增加每天阅读的次数，您可能很快就会达到需要重写以确保最终用户满意度的地步。

# servlets - servlet - 应用程序范围内的同步访问属性

> ID：12809056
> 
> 赞同：1
> 
> 时间：2012-10-09T22:00:30.057
> 
> 标签：servlets, synchronization

```
// in a context listener
public void contextInitialized(ServletContextEvent sce) {
        SessionListener.context = sce.getServletContext();
        HashMap<String, String> messages = new HashMap<>();
        context.setAttribute("messages", messages);
} 
```

现在我想从各种 servlet 访问消息映射 - 同步呢？

即我想向地图添加一个元素（其键必须是唯一的） - 所以我可能必须尝试几次 - 除非java ee api中有一些方法（？）

编辑：也有兴趣同步访问会话范围的地图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:32:23.060

此映射是由多个线程共享的非线程安全对象。所以每次访问地图都应该同步。您有多种选择：

*   让地图的每个客户端在地图本身上同步：非常脆弱
*   使用像`Collections.synchronizedMap()`ConcurrentHashMap 这样的线程安全映射。这永远不会让地图处于不一致的状态，但是对于应该是原子但涉及地图上的多个方法调用的操作仍然需要额外的同步
*   将地图封装成您自己的对象，并确保该对象提供了需要在地图上完成的所有必要操作。这些操作当然应该执行必要的同步。

第三种解决方案可能是最好的解决方案。如果地图上的操作非常简单，并且被地图的方法覆盖，那么第二个可能就可以了。

关于唯一和随机字符串的生成，您可以将[UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)（用于唯一性）和 Random（或 SecureRandom，取决于您的要求）组合起来以获得随机性。

# api - ColdFusion Twitter API 错误请求

> ID：12809057
> 
> 赞同：2
> 
> 时间：2012-10-09T22:00:31.033
> 
> 标签：api, twitter, coldfusion, cfhttp

我正在从事一个项目，该项目涉及获取 twitter 数据信息，对其进行解析，并将其显示在我们的网站上以用于管理目的。我们还在研究通过与 Twitter REST API 互锁的 Web 界面发布推文或更新，但首先，我想做简单的 GET。我正在尝试通过 dev.twitter.com 上的 API 文档执行我的 home_timeline 之一，并且在我的数据响应中收到 400 Bad Request 错误。这是我用来执行该 GET 的 ColdFusion 代码（为安全起见删除了实际代码）：

```
 <cfhttp url="https://api.twitter.com/1.1/statuses/home_timeline.json" method="get" result="thisGet">
        <cfheader name="oauth_consumer_key" value="*ConsumerKeyCode*">
        <cfheader name="oauth_nonce" value="*NonceCode*">
        <cfheader name="oauth_signature" value="*SignatureCode*">
        <cfheader name="oauth_signature_method" value="HMAC-SHA1">
        <cfheader name="oauth_timestamp" value="1349816229">
        <cfheader name="oauth_token" value="*TokenCode*">
        <cfheader name="oauth_version" value="1.0">
        <cfhttpparam name="username" value="*TwitterUserName*" type="formfield">
        <cfhttpparam name="password" value="*TwitterPassword*" type="formfield">
    </cfhttp> 
```

谁能告诉我我在这里做错了什么？谢谢！

更新：将 home.timeline 更改为 home_timeline。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:51:39.360

我对 Twitter API 一无所知，但是从 2 分钟的谷歌搜索开始，我看到很多对 . 的引用`home_timeline`，而对`home.timeline`. 你确定你做对了吗？

# android - getReadableDatabase 上的 Android DatabaseObjectNotClosedException

> ID：12809060
> 
> 赞同：0
> 
> 时间：2012-10-09T22:00:44.137
> 
> 标签：android, sqlite

我正在尝试在我的 android 应用程序中使用 SQLite 数据库。它曾经可以工作（我发誓我没有改变任何东西），并且显然发生了一些变化，因为我的代码现在在查询数据库时没有返回任何内容。当我单步执行代码本身时，我注意到只要我的 DBHelper 调用`this.getReadableDatabase()`数据库就有一个`mStackTrace`DatabaseObjectNotClosedException，即使这是我第一次在应用程序本身中打开数据库。奇怪的是，这个错误实际上从未被抛出，甚至可能不是我的问题，但我认为这是一个很好的起点。

代码：
{snip}

我不是 100% 知道这里到底发生了什么。该类应该将数据库从 res/assets 复制到本地数据文件夹，它似乎可以工作，但数据库要么不正确，要么最终被指向错误的东西，因为没有返回任何行。想法？

编辑：附加更新；我查看了存储文件的 data/ 目录，发现了两个独立的数据库，一个`files/`在`databases/`. `files/`具有所有数据完整的正确数据库，并且`databases/`只是 android 的空白数据库设置。我的代码应该调用数据库`files/`，但也许不是？

编辑：已解决。我发现了问题，它与我的 DBhelper 无关。显然，我在该项目中的团队编辑了一个他不应该用于测试的字段，却忘记了将其改回来。原来我正在做的 SQL 调用是错误的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:17:43.760

确保您只使用 的一个实例`SQLiteOpenHelper`，如本[**博**](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)文中所述。我敢打赌，问题是您不小心创建了该类的多个实例并且忘记关闭其中一个。您也可以按照 Sam 的建议执行操作，并非常小心地关闭`SQLiteOpenHelper`您创建的实例。但是，在我看来，`SQLiteOpenHelper`在整个应用程序的生命周期中使用相同的东西要干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:49:18.413

编辑：已解决。我发现了问题，它与我的 DBhelper 无关。显然，我在该项目中的团队编辑了一个他不应该用于测试的字段，却忘记了将其改回来。原来我正在做的 SQL 调用是错误的。谢谢您的帮助！

# java - 接口错误 - 使用 Web 服务、Glassfish 和 JAX-RPC 的部署错误

> ID：12809062
> 
> 赞同：1
> 
> 时间：2012-10-09T22:00:59.543
> 
> 标签：java, web-services, glassfish

我正在尝试在 glasshfish 中部署战争，但它抛出了下面的错误。AffiliateInfo 是 ChannelInfo 的子类。它用作其中一项 Web 服务中的参数。我们使用 JAX-RPC 来调用 Web 服务。你能告诉我从哪里开始寻找错误吗？我在这个问题上迷路了，谷歌也没有帮助。

```
**[#|2012-10-09T16:59:44.289-0400|WARNING|sun-appserver2.1|javax.enterprise.system.tools.deployment|_ThreadID=17;_ThreadName=Thread-788;_RequestID=ba9ed32d-c9b1-472c-95da-7a62c9dffdc2;|DPL5035:Error while running ejbc
com.sun.enterprise.deployment.backend.IASDeploymentException: Fatal Error from EJB Compiler -- class com.netsol.partners.intf.responses.AffiliateInfo has interface com.netsol.partners.intf.responses.ChannelInfo as super class**
    at com.sun.enterprise.webservice.codegen.JaxRpcRICodegen.accept(JaxRpcRICodegen.java:276)
    at com.sun.enterprise.deployment.WebBundleDescriptor.visit(WebBundleDescriptor.java:1410)
    at com.sun.enterprise.deployment.Application.visit(Application.java:1832)
    at com.sun.enterprise.webservice.codegen.JaxRpcRICodegen.run(JaxRpcRICodegen.java:142)
    at com.sun.ejb.codegen.IASEJBC.doCompile(IASEJBC.java:856)
    at com.sun.ejb.codegen.IASEJBC.ejbc(IASEJBC.java:593)
    at com.sun.enterprise.deployment.backend.EJBCompiler.preDeployModule(EJBCompiler.java:319)
    at com.sun.enterprise.deployment.backend.EJBCompiler.compile(EJBCompiler.java:212)
    at com.sun.enterprise.deployment.backend.ModuleDeployer.runEJBC(ModuleDeployer.java:817)
    at com.sun.enterprise.deployment.backend.WebModuleDeployer.deploy(WebModuleDeployer.java:184)
    at com.sun.enterprise.deployment.backend.ModuleDeployer.doRequestFinish(ModuleDeployer.java:182)
    at com.sun.enterprise.deployment.phasing.J2EECPhase.runPhase(J2EECPhase.java:208)
    at com.sun.enterprise.deployment.phasing.DeploymentPhase.executePhase(DeploymentPhase.java:108)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.executePhases(PEDeploymentService.java:966)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.deploy(PEDeploymentService.java:283)
    at com.sun.enterprise.deployment.phasing.PEDeploymentService.deploy(PEDeploymentService.java:835)
    at com.sun.enterprise.management.deploy.DeployThread.deploy(DeployThread.java:187)
    at com.sun.enterprise.management.deploy.DeployThread.run(DeployThread.java:225)
|#] 
```

# node.js - 在 Node.js 中创建一个空文件？

> ID：12809068
> 
> 赞同：83
> 
> 时间：2012-10-09T22:01:32.840
> 
> 标签：node.js, filesystems

现在我使用

```
fs.openSync(filepath, 'a') 
```

但这有点棘手。是否有在 Node.js 中创建空文件的“标准”方法？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-10-09T22:38:27.203

如果您想强制文件为空，那么您想使用该`'w'`标志：

```
var fd = fs.openSync(filepath, 'w'); 
```

如果文件存在，它将截断文件，如果不存在，则创建它。

`fs.closeSync`如果您不需要它返回的文件描述符，请将其包装在调用中。

```
fs.closeSync(fs.openSync(filepath, 'w')); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-26T17:40:23.070

这是异步方式，使用`"wx"`它在现有文件上失败。

```
var fs = require("fs");
fs.open(path, "wx", function (err, fd) {
    // handle error
    fs.close(fd, function (err) {
        // handle error
    });
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-14T03:06:10.297

如果你希望它像 UNIX 触摸一样，我会使用你所拥有`fs.openSync(filepath, 'a')`的，否则如果文件已经存在，'w' 将覆盖文件，如果文件已经存在，'wx' 将失败。但是你想更新文件的 mtime，所以使用 'a' 并且不附加任何内容。

# ruby-on-rails - 为什么从数据库出来后我的小数会稍微大一点？

> ID：12809070
> 
> 赞同：3
> 
> 时间：2012-10-09T22:01:36.640
> 
> 标签：ruby-on-rails, ruby, sqlite, activerecord

我对进出数据库后获得额外 0.000000000000000001 （左右）的 2 位小数感到有些困惑。

这就是我所做的：（Rails 3.2.8）

创建了一个迁移：

```
class CreateItems < ActiveRecord::Migration
  def change
    create_table :items do |t|
      t.column :price, :decimal, :precision => 16, :scale => 2
    end
  end
end 
```

创建了一个模型：

```
class Item < ActiveRecord::Base
end 
```

然后：

```
$ rails c
>> i = Item.new
>> i.price = 9.46
>> i.save
>> Item.first.price
=> #<BigDecimal:46b3768,'0.9460000000 000001E1',27(45)> 
```

这是一个 SQLite 数据库，在那里看起来一切正常：

```
$ rails db
>> select * from items;
1|9.46 
```

请注意，我注意到发生这种情况的唯一数字是 9.46。额外的 0.00000000000001 是从哪里来的？

* * *

**编辑**我知道如果没有小错误，某些数字的浮点表示是不可能的。但是为什么不`Item.first.price`等于`BigDecimal.new('9.46')`呢？SQLite 是否存储一个浮点数而不是一个整数，并且它应该被除以 10 的次数（这就是我对小数列的期望）？或者 ActiveRecord 中是否有一些我不知道从数据库中检索值的问题？见下文：

```
$ rails c
>> decimal = BigDecimal.new('9.46')
>> Item.first.price == decimal
=> false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:07:30.807

9.46 不能完全表示为 IEEE`double`精度浮点数。这有[很多后果](https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter)，但这意味着你得到的值是完全可表示的，并且最接近你输入的值。

如果取出 ' `9.46`' 至关重要，请将其存储在具有`TEXT`关联性的列中（并注意您存储的是字符串，而不是“数字”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:08:30.213

我建议阅读这篇文章：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

这篇文章的 tl;dr 版本...

> 将无限多个实数压缩为有限位数需要近似表示。尽管整数有无限多，但在大多数程序中，整数计算的结果可以存储在 32 位中。相反，给定任何固定位数，大多数实数计算将产生无法使用那么多位精确表示的量。因此，浮点计算的结果必须经常四舍五入以适应其有限表示。这种舍入误差是浮点计算的特征。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:08:50.383

我对红宝石不是很熟悉，但不是使用

```
i.price = 9.46 
```

尝试使用

```
i.price = BigDecimal.new('9.46') 
```

# php - 带括号的 URL 参数

> ID：12809072
> 
> 赞同：1
> 
> 时间：2012-10-09T22:01:50.650
> 
> 标签：php

> **可能重复：**
> [PHP：表单输入字段名称包含方括号，如 field[index]](https://stackoverflow.com/questions/4543500/php-form-input-field-names-containing-square-brackets-like-fieldindex)

我刚刚看到一个带有括号的 URL 参数，有谁知道使用括号的原因是什么？

`www.website.com?request[product]=Digital+Printing`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:05:39.757

您可以传递格式的参数来制作数组

```
<input type="text" name="request[product]" value="..."/>
<input type="text" name="request[item]" value="..."/> 
```

> www.website.com?request[product]=Digital+Printing&request[item]=something

所以在后端你可以像这样访问它：

```
echo $_GET['request']['product']; // Digital Printing
echo $_GET['request']['item']; // something 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T22:07:17.900

它用于传递数组。

```
//Example: ?request[product]=Digital+Printing&request[key]=abc123
var_dump($_GET['request']);
/**
 * array (size=2)
      'product' => string 'Digital Printing' (length=16)
      'key' => string 'abc123' (length=6)
 */ 
```

它在 POST 中更多地用于发送具有相同键名的多个值，例如多选选项或复选框。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T22:04:23.323

`$_GET['request']`是一个数组，所以它表示有`request[product]`

如果你跑

```
 var_dump($_GET); 
```

你会得到

```
array
  'request' => 
    array
      'product' => string 'Digital Printing' (length=16) 
```

# prolog - 部分字典/记录统一？

> ID：12809075
> 
> 赞同：14
> 
> 时间：2012-10-09T22:02:16.050
> 
> 标签：prolog, clojure-core.logic, minikanren

我知道一些 Prologs 支持开箱即用的类字典关联数据结构。对于这样做的实现，它们是否支持与另一个实际上不包含所有键的结构部分统一的概念？

例如，在 core.logic/miniKanren 的语法中：

```
(run* [q]
  (== {:foo 1 :bar 2} (partial-map :foo q))) 
```

这将返回 q 绑定为 1 的单个结果。

Prologs 是否给这个操作或这个部分结构命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:29:00.520

一般来说，一种解决Prolog中基本数据类型选择不佳的标准方法是：通过添加库和使用接口。[例如， SWI-Prolog](http://www.swi-prolog.org)带有实现基于 AVL 树的关联数据结构的[`assoc`库。](http://www.swi-prolog.org/pldoc/doc/swi/library/assoc.pl)（顺便说一句，平衡树在功能和逻辑编程中比哈希表更常见，因为在树上创建“持久”数据结构比哈希表更容易——在共享内部结构的 FP 意义上是持久的。）

使用这个库看起来像这样：

```
?- [library(assoc)].
% library(assoc) compiled into assoc 0.00 sec, 97 clauses
true.

?- empty_assoc(Assoc).
Assoc = t.

?- empty_assoc(Assoc), get_assoc(test, Assoc, V).
false.

?- empty_assoc(Assoc), put_assoc(test, Assoc, foo, Assoc2).
Assoc = t,
Assoc2 = t(test, foo, -, t, t).

?- empty_assoc(Assoc), 
   put_assoc(test, Assoc, foo, Assoc2), 
   get_assoc(test, Assoc2, Value).
Assoc = t,
Assoc2 = t(test, foo, -, t, t),
Value = foo. 
```

一旦你有了这样的接口，你就可以在它上面定义各种逻辑关系。一旦你有了逻辑关系，Prolog 的正常统一机制就会处理剩下的事情——不需要对这种或那种数据类型的特殊支持。根据您的要求，我认为您想要的是一个子集关系，除了检查一个关联的所有都在另一个关联中并且它们都具有相同的值。我想这看起来像这样：

```
association_subset(Left, Right) :-
  forall(gen_assoc(Assoc, Left, Value), get_assoc(Assoc, Right, Value)). 
```

仅当左关联是右关联的子集时，此谓词才为真，如上定义。我们可以测试它，看看它是否在做我们想要的：

```
simple(Assoc) :- 
  empty_assoc(Empty),
  put_assoc(foo, Empty, foo_test, V1),
  put_assoc(bar, V1, bar_test, Assoc).

complex(Assoc) :-
  simple(Assoc1),
  put_assoc(baz, Assoc1, bazzle, Assoc).

unrelated(Assoc) :-
  empty_assoc(Empty),
  put_assoc(baz, Empty, bazzle, Assoc). 
```

...

```
?- simple(X), complex(Y), association_subset(X, Y).
X = t(foo, foo_test, <, t(bar, bar_test, -, t, t), t),
Y = t(baz, bazzle, -, t(bar, bar_test, -, t, t), t(foo, foo_test, -, t, t)).

?- simple(X), simple(Y), association_subset(X, Y).
X = Y, Y = t(foo, foo_test, <, t(bar, bar_test, -, t, t), t).

?- simple(X), unrelated(Y), association_subset(X, Y).
false.

?- complex(X), simple(Y), association_subset(X, Y).
false. 
```

我们可以将其翻译为您的确切问题，如下所示：

```
left(Assoc) :- 
  empty_assoc(Empty),
  put_assoc(foo, Empty, 1, Assoc).

right(Assoc) :-
  left(Assoc1),
  put_assoc(bar, Assoc1, 2, Assoc).

?- left(L), right(R), association_subset(L, R), get_assoc(foo, L, Q).
L = t(foo, 1, -, t, t),
R = t(foo, 1, <, t(bar, 2, -, t, t), t),
Q = 1. 
```

我意识到这个答案并没有真正回答您提出的问题，但我希望它回答了问题下方的问题。换句话说，*不需要*对这些数据结构进行特殊支持——上述谓词也可以在关联列表上定义，您可以看到您所需要的只是创建空关联的常用方法，添加，测试和生成关联的键/值和底层数据结构变得无关紧要。无论是数据结构还是统一，都不需要特殊的支持。特殊的语法肯定会让它看起来更好看！但是没有必要得到你想要的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T09:06:09.943

某些 Prolog 系统（例如 Eclipse）具有记录符号。当您事先知道地图的可能键时，可以使用此功能。但它需要一个类型声明。记录符号也出现在 Prolog 的后代语言中，例如 Erlang。

这个想法很简单。您首先声明一个记录类型（这里发明了一些语法）：

```
:- rectype T{K1,...,Kn}. 
```

现在您可以在您的 Prolog 程序记录中使用，只需编写（这里再次发明了一些语法）：

```
... T{F1 = V1, .., Fn = Vm} ... 
```

在编译类型时，记录将被转换为复合，然后可以很容易地用于正常的统一。转换根据记录类型声明重新排序键值对，然后删除键并仅使用位置。如果记录类型声明也涵盖了这一点，则未使用的位置将被匿名变量或默认值替换。

```
... T(W1, ..., Wn) ... 
```

您的示例将按如下方式工作：

```
:- rectype myrec{foo, bar}

?- myrec{foo=1,bar=2} = myrec{foo=q} 
```

后一个查询将在内部执行为：

```
?- myrec(1,2) = myrec(q,_). 
```

有关 Eclipse 如何执行此操作的更多详细信息，请参见此处的示例：http:
[//www.eclipseclp.org/doc/bips/kernel/syntax/struct-1.html](http://www.eclipseclp.org/doc/bips/kernel/syntax/struct-1.html)

对于键集不是静态的动态映射，您可以实现动态数据结构，如关于 SWI-Prolog AVL 树的另一篇文章所示。或者向您的 Prolog 系统询问特定数据结构的句柄。使用 FFI（外部功能接口）实现这些或访问已与 Prolog 系统捆绑的这些。例如 Eclipse 捆绑了一对，请参阅下面文章中的“描述”部分：http:
[//www.eclipseclp.org/doc/bips/kernel/record/index.html](http://www.eclipseclp.org/doc/bips/kernel/record/index.html)

再见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:36:26.940

我不清楚你真正想要什么（你已经删除了散列方面），但也许你更想要特征术语或特征结构？

它们很受语言学家的欢迎，并已成为生活的一部分。

可以在属性变量的帮助下实现它们，但到目前为止，我还没有看到对它们的太多需求。

您还可以使用句法统一来稍微笨拙地模拟它们。这很笨拙，因为您需要用一个单独的参数来表示每个特征（您可以做得更好，但它也更复杂）。因此，如果您的程序包含 n 个特征，则一个特征结构将包含 n 个不同的参数，其中大多数永远不会被触及。但是，统一将按预期直接工作。

# php - 选择并计算另一个表中的记录的查询

> ID：12809080
> 
> 赞同：-1
> 
> 时间：2012-10-09T22:02:26.440
> 
> 标签：php, sql

我一直在研究这个问题一段时间，但我似乎无法找到一种有效地做到这一点的方法。

基本上我有一个包含问题的表格，并且我有一个表格来跟踪问题的答案以及与该答案相关的用户的用户信息。答案都是对或错，我想跟踪每个问题的总对错答案。

所以第一个查询是选择问题表中的所有记录。第二个查询通过 questionID 选择答案

我想创建一个同时执行所有这些操作的查询，我最近尝试但没有成功的查询如下：

```
SELECT questions.*, count(answers.*) as total_answers FROM questions
LEFT OUTER JOIN
(
SELECT answers.* AS true FROM votes
WHERE answer = 1 AND questionID = THIS.ID
) 
```

此查询不起作用，因为我无法执行另一个 WHERE 语句来指定我只想获取答案为 1 或 0 的记录（真或假答案都是二进制的）。我在 SQL 中没有找到 THIS 选择器或任何类似的东西。我希望我已经足够清楚了。在遇到这个问题之前，我以为我对查询有很好的理解。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:08:52.380

类似的东西（你的结构对我来说不是很清楚，所以可能需要调整）

```
select 
  q.*, 
  count(a.*) as total_answers, 
  sum(case when a.answer = 1 then 1 else 0 end) as total_correct,
  sum(case when a.answer = 0 then 1 else 0 end) as total_false
FROM questions q
left join answers a on q.ID = a.questionID
group by q.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:20:23.160

参考拉斐尔提到的答案，这是另一种写法：

```
Select  Question.*
,   Sum(TrueAnswer.answer)
+   Sum(FalseAnswer.answer)     As  total_answers
,   Sum(TrueAnswer.answer)      As  total_TrueAnswer
,   Sum(FalseAnswer.answer)     As  total_FalseAnswer
    From    questions       As  Question
    Left    Outer   Join
        answers         As  TrueAnswer
    On  Question.ID     =   TrueAnswer.questionID
    And TrueAnswer.answer   =   1
    Left    Outer   Join
        answers         As  FalseAnswer
    On  Question.ID         =   FalseAnswer.questionID
    And FalseAnswer.answer  =   0
    Group   by  Question.ID 
```

# php - smarty块名可以从smarty变量派生吗

> ID：12809081
> 
> 赞同：1
> 
> 时间：2012-10-09T22:02:35.317
> 
> 标签：php, smarty, block

我想根据 smarty 数据定义 smarty 块名称，但我似乎做不到。
例子：

```
{foreach $array as $code}
  {block name=block_$code}
     <div id='{$code}'></div>
  {/block}
{/foreach} 
```

我的目的是通过子模板扩展特定的 block_$code 块。这是可能的还是我可以使用其他一些技巧来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:36:00.180

您可以使用[`{assign}`](http://www.smarty.net/docs/en/language.function.assign.tpl)块和[`cat`](http://www.smarty.net/docsv2/en/language.modifier.cat.tpl)修饰符。例如

```
{foreach $array as $code}
    {assign var=foo value="block_"|cat:$code}
    {block name=$foo}
        <div>
    {/block}
{/foreach} 
```

注意我没有测试过这个，但它应该可以工作。您也可以将其短路并仅使用`{block name="block_"|cat:$code}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:08:04.770

我能够找到 2011 年的以下链接，表明当时这是不可能的。我怀疑它仍然不是：

[http://www.smarty.net/forums/viewtopic.php?t=19805&highlight=block%20variable%20name](http://www.smarty.net/forums/viewtopic.php?t=19805&highlight=block%20variable%20name)

好消息是我能够弄清楚如何在没有它的情况下使我的代码工作。我希望能够仅覆盖由 foreach 定义的 div 之一。我可以这样做：

家长：

```
{foreach $array as $code}
    {block name=code_loop}
        <div>Normal Stuff</div>
    {/block}
{/foreach} 
```

孩子：

```
{block name=code_loop}
    {if $code == 'code of interest'}
        <div>New Stuff</div>
    {else}
        {$smarty.block.parent}
    {/if}
{/block} 
```

# php - 数据表：根据单元格更改行颜色

> ID：12809084
> 
> 赞同：3
> 
> 时间：2012-10-09T22:02:56.593
> 
> 标签：php, jquery, css, datatables

对于服务器端加载的数据表，我正在尝试根据值更改行颜色，但它不起作用。我在我的 javascript 上使用这样的代码：

```
$('#table').dataTable({
     'bServerSide': true,
     'bProcessing': true,
     'sAjaxSource': 'datatables/my_ajax.php',
     'iDisplayLength': 50,
     "sPaginationType": "bootstrap",
     "fnInitComplete": function(oSettings) {
         for (var i = 0, iLen = oSettings.aoData.length; i < iLen; i++) {
             if (jQuery.inArray(oSettings.aoData[i]._aData[2], food_types) != -1) {
                 oSettings.aoData[i].nTr.className = "myClass";
             }
         }
     }, 
```

myClass 看起来像：

```
.myClass{ 
    background-color: red;
}

.myClass td {
   background-color: red; 
} 
```

所以，基本上当`<td>`每一行的第二个有一个出现在食物类型数组上的值时，类应该更改为 myClass。这部分正在工作（我可以看到类已更改的萤火虫），但是我看不到更改（我没有看到该行变为红色背景）。我错过了什么？另外，这是一种好方法还是更清洁的方法是直接从 ajax 更改颜色？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:08:15.933

看起来您的 dataTable 的 CSS 包装器正在覆盖您的样式 .. 也许这就是您看不到背景颜色变化的原因..

看起来您需要更改应用它的类..

在这些方面可能更多

```
table.display.myClass 
{

 background-color: red !important
}

table.display.myClass td
{

 background-color: red !important
} 
```

更像是猜测包装器，因为我不知道数据表插件应用的确切类..

# printing - @media print 在谷歌上不起作用

> ID：12809088
> 
> 赞同：0
> 
> 时间：2012-10-09T22:03:30.290
> 
> 标签：printing, cross-browser, media, css, css-paged-media

我试图找出为什么`@media print`不能在 Chrome 上运行。IE和FF都可以。

我正在打印优惠券的打印页面，但 Chrome 正在打印空白页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T12:37:16.507

你在使用分离的CSS吗？

尝试在页面内嵌入 css 以查看问题是否仍然存在。

下面的示例似乎在同一页面中工作：

```
<style type="text/css">
    @media print{
    .button {display : none} 
    }
 </style> 
```

# php - 是否可以找到发送此电子邮件的 php 脚本

> ID：12809089
> 
> 赞同：-1
> 
> 时间：2012-10-09T22:03:34.037
> 
> 标签：php, email, sendmail, email-headers

我有一个旧网站，只是找不到生成带有这些标题的电子邮件的脚本：

```
Return-Path: <username-www@server.com>
Delivered-To: support@example.com
Received: (qmail 46814 invoked by uid 89); 9 Oct 2012 14:06:48 -0000
Delivered-To: example.com-cs@example.com
Received: (qmail 46800 invoked by uid 89); 9 Oct 2012 14:06:48 -0000
Received: from unknown (HELO bmf.server.com) (83.98.198.11)
  by server.com with SMTP; 9 Oct 2012 14:06:48 -0000
Received-SPF: none (server.com: domain at server.com does    not     designate permitted sender hosts)
X-Recieved: Authenticated device
X-Recieved: Authenticated device
X-Recieved: Authenticated device
Date: Tue, 9 Oct 2012 10:06:34 -0400 (EDT)
Message-Id: <201210091406.q99E6Y14009874@server.com>
To: cs@example.com
Subject: Assistance request sent from Customer Support page
From:no-reply@example.com
Content-Type: text/html; charset=ISO-8859-1 
```

是否有任何日志通过什么脚本生成了 id:201210091406.q99E6Y14009874@server.com 的电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:06:43.243

如果您不更改或无法更改服务器日志，只需在您站点的所有文件中进行文本搜索，以查找字符串“从客户支持页面发送的协助请求”。可能主题可以在电子邮件脚本中进行硬编码，或者从配置文件或数据库中加载。完整的文件搜索将帮助您追踪它是否是前两种情况之一。

如果您没有找到它，请查询可能包含此值的数据库（如果您有任何电子邮件配置表）。如果数据库中有这样的记录，您可以运行另一个搜索来查询该表并使用这些值发送电子邮件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:08:30.587

请参阅[`mail.log`（字符串）PHP 设置](http://www.php.net/manual/en/mail.configuration.php#ini.mail.log)，它允许您跟踪通过该[`mail()`函数](http://php.net/mail)发送的邮件并显示文件名和行号：

> 将记录所有 mail() 调用的日志文件的路径。日志条目包括脚本的完整路径、行号、To 地址和标题。

您需要做的就是启用它，然后检查邮件。

然后在您的 PHP 配置中启用[`mail.add_x_header`](http://www.php.net/manual/en/mail.configuration.php#ini.mail.add-x-header)，您甚至可以在下一封电子邮件中看到涉及哪个脚本。

# kinect - 没有声音时的语音识别 API 匹配语法（Microsoft）

> ID：12809098
> 
> 赞同：2
> 
> 时间：2012-10-09T22:04:25.477
> 
> 标签：kinect, speech-recognition

我已经使用 Microsoft SAPI 和 Kinect构建了[语音识别工具。](http://encausse.wordpress.com/s-a-r-a-h/)

以下代码示例我加载 XML 语法并启动 SpeechRecognitionEngine。

有时，当声音很少或没有声音时，SpeechRecognitionEngine 会以非常高的置信度 (0.85) 匹配一个简单的句子：“Sarah what time is it”

*   引擎为什么会在沉默中触发这场强敌？！
*   任何Workaroud？

这是我[在 GitHub 上的主要课程](https://github.com/JpEncausse/WSRMacro/blob/master/WSRMacro/WSRMacro.cs)

我还用转储（wav + xml）写（法语）[博客文章](http://encausse.wordpress.com/2012/12/17/sarah-reconnaissance-vocale/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:48:39.940

我不确定你说的是哪个波形文件（我从中学开始就不会说法语）。但我认为你们小组的这一波符合条件：dump_2012_12.16_12.47.33.wav。它具有 0.857 的高置信度值，并且在音频文件中似乎没有任何语音。查看频谱图（见下文），您可以看到音频文件确实包含语音范围内的能量。 ![在此处输入图像描述](../Images/2e5b1950b821a1b0db610598f16ac223.png)

如今，大多数语音识别引擎都使用隐马尔可夫模型（又名 HMM）将音频矢量模式与语音匹配。今天的最新技术在这方面并不总是准确的。HMM 往往对背景噪音非常敏感。

这就是为什么当今生产中的大多数语音类型功能（如 Siri）都是一键通。您需要按下一个按钮，然后您有 5 秒钟的时间对着麦克风讲话。他们这样做是为了确保存在某种类型的语音信号。对于那些开放式麦克风（我知道的只有 Kinect）的系统，他们尝试使用一种回声消除形式来抑制背景音频。但即使采用最先进的技术，仍然存在流血。

我所知道的唯一相对简单的解决方法（同样不是 100%）涉及编辑您的语法以包含垃圾规则并缩短可能的短语列表。当语音引擎不知道该做什么时，垃圾规则会给它一个“跑回家找妈妈”的选项。

[http://www.w3.org/TR/speech-grammar/#S2.2.3](http://www.w3.org/TR/speech-grammar/#S2.2.3)

虽然我不认为这是推荐的用法，但我已经看到一些系统在使用垃圾规则来帮助过滤背景噪音时表现得更好。当然，他们必须忽略垃圾回收事件。

# php - PHP/MySQL 中的奇数或偶数

> ID：12809100
> 
> 赞同：-2
> 
> 时间：2012-10-09T22:04:30.283
> 
> 标签：php, html, mysql, manual

我想问如何在 mysql->php 输出中设置奇数或事件。我可以使用该代码执行此操作：

```
if($i%2 == 0)
{
    $class = 'content';
}
else
{
    $class = 'contents';
}

echo "<tr class='$class'>... 
```

...但是如果我在 mysql 中手动删除一行，输出的事情就会变得一团糟。我正在考虑使用 foreach 的某种方式......或类似的东西。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:14:48.550

如果您尝试在奇数和偶数输出行上交替，我喜欢使用一个简单的切换：

```
$toggle = false;
foreach($items as $item){

  if($toggle){
   ..contents...
  }else{
   ...alternative content....
  }
  $toggle = !$toggle;
} 
```

如果需要紧凑的代码，您可以使用三元比较来压缩它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:07:51.257

这将起作用：

```
$i = 0;
while ($row = $result->fetch_assoc()) {
    $class = ($i++ % 2) ? 'contents' : 'content';
...
} 
```

# html - 呈现网站时出现的随机字符

> ID：12809102
> 
> 赞同：-1
> 
> 时间：2012-10-09T22:04:43.237
> 
> 标签：html, encoding, ascii

在几个站点上，我让随机 ASCII 字符出现在文档中间。它一直在测试站点上，直到我最近为一个刚刚出现的客户项目才出现问题。它们不会显示在我使用的开发环境（aptana 3）中，但是当在浏览器中查看时，它们会同时出现在屏幕和源代码中。
我环顾四周，似乎其他人遇到了问题，但我无法找到任何真正的解决方案。我尝试弄乱文本编码，但没有任何改变。有没有人能够解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:19:06.770

1.  您是否尝试将文件保存为 UTF-8？

2.  您是否确认您的文件实际上保存为 UTF-8？检查文件类型的 Linux 命令是：

    `file -i filename.html`

3.  您是否验证了从网络服务器发送的内容标头？

4.  是否有任何文本来自数据库？

5.  您还可以尝试添加以下元字符串：

    `<meta charset="utf-8">`

使用您的示例网站：[http ://www.oryxwebstudio.com/saloncruz/#contact](http://www.oryxwebstudio.com/saloncruz/#contact)

也许我是盲人，但我在 IE、Firefox 或 Chrome 中看不到任何无效字符。这是火狐的截图：

![联系表格截图](../Images/4cd043076a3525d0257c7d0b15a366d1.png)

# ios - 在 ARC 下将对象作为不透明的上下文参数安全地传递

> ID：12809107
> 
> 赞同：5
> 
> 时间：2012-10-09T22:05:16.437
> 
> 标签：ios, cocoa, automatic-ref-counting

在手动内存管理下，我经常使用这种模式：

```
NSString * myStr = /* some local object */
[UIView beginAnimation:@"foo" context:(void *)[myStr retain]]; 
```

然后，稍后异步：

```
- (void)animationDidStop:(NSString *)anim finished:(NSNumber *)num context:(void *)context
{
    NSString * contextStr = (NSString *)context;
    // ...
    [contextStr release];
} 
```

即我手动管理用作不透明上下文的对象的生命周期。（这适用于旧的 UIView 动画，但也适用于我使用的其他类型的 API。）

在 ARC 下，我的直觉是我想`__bridge_retained`进入`__bridge_transfer`处理程序，[正如这里所建议](https://stackoverflow.com/questions/8515475/getting-a-error-with-implicit-conversion-of-an-pointer-using-automatic-reference)的那样。但这将 Cocoa 对象视为`CFType`不是因为它真的被桥接了，而只是为了将保留物塞进它的喉咙。

这是有效的，这在风格上是否可以接受？如果没有，更好的*解决方案是什么？

[（这个问题中](https://stackoverflow.com/questions/8157105/uiview-animation-on-multiple-uiimageviews-in-arc)接受的答案给出了一个不同的答案，说`__bridge`单独是可以的，但在我看来这是错误的，因为原始字符串一旦超出第一个函数的范围就有被释放的风险。 对？）

*请不要说“改用基于块的动画”。（这不是我要问的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:22:19.937

跟着你的直觉走。`__bridge_retained`将对象的管理从 ARC 转移给您，而`__bridge_transfer`相反，不要担心将对象视为一个`CFType`- 您并没有真正这样做只是接管管理。

您看到推荐的另一种方法是构建您的代码，以便 ARC 保留管理，但这很容易让人觉得做作（并且变得混乱）。让您使用的 API 保持其设计的价值是干净的；只需在将管理交给 API 并返回给 ARC 的地方适当地注释代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:44:13.207

即使使用`__bridge_retained`/`__bridge_transfer`对我来说似乎很好（将所有权转移给 CoreFoundation 或任何 C 代码或您自己都是一样的，您只需告诉 ARC 您在某个时候对对象所有权负责并稍后将所有权归还给 ARC），如果您愿意，您可以**`strong`**在您用作某处的对象上保留一个引用`context`，这样 ARC 就不会回收它的内存。

例如，这可以通过`@property(strong)`在您的类中使用 a 来实现，将其影响到您之前执行 your 时的值`retain`，并将其分配给`nil`您之前执行时的值 your`release`让字符串离开。

* * *

请注意，如果您需要在同一个类中保留多个上下文，您可以选择使用`NSMutableArray`保留上下文字符串的选项，而不是为每个上下文声明一个属性。

```
@interface YourClass ()
@property(strong) NSMutableArray* runningAnimationContexts;
@end

@implementation YourClass
-(id)init {
  self = [super init];
  if (self) {
    self.runningAnimationContexts = [NSMutableArray array];
  }
  return self;
}

-(void)someMethod
{
  // Example with two different parallel animations using old API

  NSString * myStr = /* some local object */
  [self.runningAnimationContexts addObject:myStr]; // ~ retain
  [UIView beginAnimation:@"foo" context:(__bridge)myStr];
  ...
  [UIView commitAnimations];

  NSString * myStr2 = /* some other local object */
  [self.runningAnimationContexts addObject:myStr2]; // ~ retain
  [UIView beginAnimation:@"foo2" context:(__bridge)myStr2];
  ...
  [UIView commitAnimations];

}
- (void)animationDidStop:(NSString *)anim finished:(NSNumber *)num context:(void *)context
{
  NSString * contextStr = (__bridge NSString *)context;
  // ...
  [self.runningAnimationContexts removeObject:contextStr]; // ~ release
}
@end 
```

# jquery - 多个div的不透明度滚动动画

> ID：12809111
> 
> 赞同：1
> 
> 时间：2012-10-09T22:05:23.387
> 
> 标签：jquery, html, scroll, opacity

我已经有一个 jQuery 脚本，当我向下滚动（或当 div 到达顶部时）时，我发现它会将我的第一个 div 的不透明度从 1 更改为 0。

但是现在我想让下一个 div 在到达页面顶部时做同样的事情，而不是同时进行。

以下是部分代码：

那是 HTML 部分：

```
<div id="wrap">

  <section id="logo">
    <img src="images/layout/logo.png"> 
  </section> <!-- logo -->

  <section id="intro">  
    <img src="images/layout/welcome.png">

    <p><h2>Text text text text here here here here</h2></p>
  </section> <!-- intro -->

</div> 
```

然后是我的 jQuery 脚本，目前仅适用于徽标部分。

```
var divs = $('#logo');
$(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.css({ 'opacity' : (1 - st/100) });
}); 
```

为了完全清楚发生了什么，我给你留下了我当前页面的链接：

[www.hyker.be/opacity](http://www.hyker.be/opacity)

我只是希望“靠近一点”的 div 与“标志”的 div 做同样的事情，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:21:35.197

我会在开始时将它们全部添加，并且只有在它们在范围内时才会淡出它们。

```
var divs = $('#logo, #intro');
var range = 100;
$(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.each(function() {
      var offset = $(this).offset().top;
      $(this).css({ 'opacity' : (1 - ((st - offset + range) / range)) });
   });
}); 
```

**更新**

这似乎效果更好。基于对象的中心而不是顶部淡入淡出。

```
var divs = $('#logo, #intro');
var range = 100;
$(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.each(function() {
      var offset = $(this).offset().top;
      var height = $(this).outerHeight();
      offset = offset + height/2;
      $(this).css({ 'opacity' : (1 - ((st - offset + range) / range)) });
   });
}); 
```

**资源**

*   [http://api.jquery.com/offset/](http://api.jquery.com/offset/)

# vb.net - VB.NET 用字节填充大文件

> ID：12809117
> 
> 赞同：0
> 
> 时间：2012-10-09T22:05:41.413
> 
> 标签：vb.net, file-io

我正在创建一个临时文件来存储一个无法放入内存的巨大矩阵。我想先将临时文件写入磁盘，以便可以使用流对象查找文件中的位置。我已经知道我需要的确切尺寸。

写 2 GB 的零最简单的方法是什么？

我试着一次写一个字节，这真的很慢。我还尝试编写字节数组块，这要快得多，但我必须在数学上很烂，因为我无法得到我期望的最终大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:28:22.853

[BinaryWriter](http://msdn.microsoft.com/en-us/library/ft83zssf.aspx)有一个[Seek](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.seek.aspx)方法，它允许您在文件上设置任意位置，如果该位置在文件末尾之外也是如此。
如果您在此位置写入一个简单字节，操作系统将调整文件大小以允许在请求的位置写入。

```
 Dim testfile as String = "d:\temp\testfile.bin"
    Dim fs As FileStream = File.Create(testfile)
    Dim utf8 As UTF8Encoding = new UTF8Encoding()
    Dim bw As BinaryWriter = new BinaryWriter(fs, utf8)
    bw.Seek(1500, SeekOrigin.Begin) 'only 1500 bytes just for test
    bw.Write(255)
    fs.Close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:25:05.930

这不是非常有效，但我在 38 秒内编写了一个 2gig 文件，首先在调试模式下编译......

```
StringBuilder s = new StringBuilder();
for (int i = 0; i <= 4000; i++) s.Append("0");

System.Diagnostics.Stopwatch t = System.Diagnostics.Stopwatch.StartNew();
using (StreamWriter file = new StreamWriter(@"c:\temp\temp.text"))
{
      for (long i = 0; i < 2147483648; i+= 4000)
         file.Write(s.ToString());
}
this.label1.Text = t.Elapsed.TotalSeconds.ToString(); 
```

根据谷歌的说法， 2 场演出就是[这么多。](https://www.google.com/search?client=opera&rls=en&q=stopwatch&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest#hl=nl&client=opera&rls=en&channel=suggest&sclient=psy-ab&q=2gigs+to+bytes&oq=2gigs+to+bytes&gs_l=serp.3..0i13i30.238284.242074.2.242159.16.15.1.0.0.0.160.1186.9j5.14.0...0.0...1c.1.mInZNkQUzI0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=50337f75cb9611b7&biw=1887&bih=1077)

所以，我不知道，你想要这个多快？

# html - 在另一个 DIV 中定位基于 DIV 的图像

> ID：12809118
> 
> 赞同：0
> 
> 时间：2012-10-09T22:05:45.860
> 
> 标签：html, css

好的，我在 DIV 中定位图像时遇到了一个小问题。

```
<div id="wholePage">
     <img src="theImages/header_shadow_flip.png" id="hF" />
     <div id="pageWrapper"><img src="theImages/header_shadow.png" id="bF" />
     </div>
</div> 
```

我对两个 DIV 都有以下 CSS

```
#wholePage {
    position: relative;
    width: 1000px;
    padding: 0 10px;
    padding-top: 35px;
    margin: 0 auto;
}
#pageWrapper {
    position: relative;
    width: 960px;
    padding: 0 10px;
    padding-top: 37px;
    margin: 0 auto;
} 
```

顶部阴影的 CSS，效果很好。不用改，就是：

```
img#hF {
    position: absolute;
    left: 50px;
    top: 56px;
    z-index:2;
} 
```

但是底部的页脚图像给了我问题，css是：

```
img#bF {
    position: absolute;
    left: 50px;
    top: 1657px;
    z-index:2;
} 
```

该页面的两个示例如下：

```
www.interfaithmedical.com/CheckSite/index.html
www.interfaithmedical.com/CheckSite/ms_gynecology.html 
```

如何对齐底部阴影图像以匹配 pageWrapper DIV，使其位于其正下方？并且不会像在第二个链接上那样基于页面本身进行定位。（在第二个链接上，您可以看到它使用原始间距并超出页面内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:14:33.207

尝试将 的属性设置为 -4px ，而不是设置 的`top:`属性。这样，您就不会每次都被 1657px 高的页面所束缚。`bF``bottom:``bF`

```
img#bF {
    left: 50px;
    position: absolute;
    bottom: -4px;
    z-index: 2;
} 
```

# iphone - becomeFirstResponder 重置 contentOffset

> ID：12809119
> 
> 赞同：6
> 
> 时间：2012-10-09T22:05:51.180
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UIScrollView，其中有一个 UITextField，所以我所做的是在第三个文本字段（即密码）上向下滚动 UIScrollView 的偏移量：

```
#pragma mark UITextFieldDelegate
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if ((textField == self.emailTextField_ || textField == self.passwordTextField_)){
        if (self.scrollView_.contentOffset.y != self.emailTextField_.frameY - self.emailTextField_.frameHeight/2){
            shouldAdjustOffset = YES;
        } else {
            shouldAdjustOffset = NO;
        }

        if (shouldAdjustOffset){
            [self.scrollView_ setContentOffset:CGPointMake(0, self.emailTextField_.frameY - self.emailTextField_.frameHeight/2) animated:YES];
        }
    }
}

-(BOOL) textFieldShouldReturn:(UITextField *)textField
{
    if (textField == self.firstNameTexField_){
        [self.firstNameTexField_ resignFirstResponder];
        [self.lastNameTextField_ becomeFirstResponder];
    } else if (textField == self.lastNameTextField_){
        [self.lastNameTextField_ resignFirstResponder];
        [self.emailTextField_ becomeFirstResponder];
    } else if (textField == self.emailTextField_){
        [self.emailTextField_ resignFirstResponder];
        [self.passwordTextField_ becomeFirstResponder];
    } else if (textField == self.passwordTextField_){
        [self signupButtonPressed:nil];
        [self.passwordTextField_ resignFirstResponder];
    }

    return YES;
} 
```

现在的问题是，当我在下一个文本字段中时，它会将内容偏移量重置回 0，当我这样做时：

```
 [self.emailTextField_ resignFirstResponder];
        [self.passwordTextField_ becomeFirstResponder]; 
```

. 我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:46:01.070

只需在显示键盘（成为FirstResponder）之前打开滚动视图滚动并启用它之后的滚动，

```
scrollView.scrollEnabled = NO;
[someControl becomeFirstResponder];
scrollView.scrollEnabled = YES;
[scrollview doTheScrollingHere]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T10:35:39.133

@Deepan，您为我节省了很多时间:) 只有我建议的是覆盖*UITextField*方法***becomeFirstResponder***以首先检查它是否在*UIScrollView*中以及是否暂时禁用滚动

```
- (BOOL)becomeFirstResponder
{
    if ([self.superview isKindOfClass:[UIScrollView class]])
    {
        [(UIScrollView*)self.superview setScrollEnabled:NO];
    }

    BOOL accept = [super becomeFirstResponder];

    if ([self.superview isKindOfClass:[UIScrollView class]])
    {
        [(UIScrollView*)self.superview setScrollEnabled:YES];
    }

    return accept
} 
```

# jquery - Selectivizr 导致选择下拉菜单需要两次单击才能在 IE8 及以下版本中打开

> ID：12809122
> 
> 赞同：6
> 
> 时间：2012-10-09T22:06:19.510
> 
> 标签：jquery, drop-down-menu, internet-explorer-8, selectivizr

我最近在公司内部网站上实施了 Selectivizr，因为我们需要支持 IE7/8。不幸的是，我们的网站通过 jQuery/AJAX 加载了大量动态内容。

为了解决这个问题，我重载了 jQuery 就绪函数，以便在 Selectivizr 执行它所设定的任何任务后重新加载它。我的代码如下所示：

```
$(function () {
    if ($('body.ie8, body.ie7, body.comp-view8, body.comp-view7').length > 0) {
        (function () {
            var original = jQuery.fn.ready;
            var getSelectivizr;
            jQuery.fn.ready = function () {
                // Execute the original method.
                original.apply(this, arguments);

                clearTimeout(getSelectivizr);
                getSelectivizr = setTimeout(function () {
                    $.getScript(selectivizr);
                }, 50);
            }

        })();
    }
}); 
```

很简单。然而，一位队友最近发现了一个似乎相关的错误。在 IE8/7 中，任何动态加载到页面中的选择下拉列表（我不确定是否会影响静态下拉列表以及这些页面都没有），需要单击两次才能打开它。

更具体地说，在 IE8/7 中，第一次单击似乎将“焦点”放在下拉列表上，而第二次单击则将其打开。它的兼容性视图，它实际上打开了一瞬间然后关闭。第二次单击打开它就好了（只要您仍然专注于下拉菜单）。

我曾认为这可能是 Selectivizr 正在做的事情的问题，因为它并不是真正设计用于处理动态加载的内容，但经过一些调试后，似乎是 setTimeout 导致了这种奇怪的行为。

我完全不知道如何在**不删除我的 Selectivizr 实现的情况下解决这个问题**。

可能值得注意的是，如果进行不同的 AJAX 调用，setTimeout 是防止浏览器尝试多次加载 Selectivizr 所必需的，因为这可能会导致浏览器出现严重的性能问题。

***注意：此问题不能准确反映标题中所述的问题，因此我对其进行了更新以提供更好的搜索！几周后回到这个问题后，我意识到我最初的调试导致我走错了路。对不起，伙计们，但我已经提供了一个答案，希望对您有所帮助！:)***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:19:28.623

所以，我终于有机会回到这个错误，似乎解决方案一直盯着我看，由于我最初的调试搞砸了，我完全错过了它。

事实证明，这一直是一个选择性问题。不幸的是，对 IE8 及更低版本中的选择框进行任何类型的动态更改 (JS) 会导致它被重绘，这会迫使它关闭（或永远不会打开，具体取决于版本/模式）。selectivizr 的工作方式是它离散地为元素添加一个类，例如“slvzr-focus”，使用 JS 来模仿伪类的行为；在这种情况下“：焦点”。

因此，简单地限制 selectivizr 应用这种补丁来选择焦点框是有意义的。我的解决方案如下，尽管它可能不适合所有人（或者，您可以简单地确保您的 CSS 中不存在 ":focus" 选择器，这将导致 selectivizr 永远不会触发事件）：

**1)** 在 selectivizr.js 中找到以下行：

```
if (!hasPatch(elm, patch)) {

    if (patch.applyClass && (patch.applyClass === true || patch.applyClass(elm) === true)) {

        cssClasses = toggleClass(cssClasses, patch.className, true);
    }

} 
```

**2)** 用以下*if*语句包装它：

```
if (!(elm.tagName == 'SELECT' && patch.className == 'slvzr-focus')) {
} 
```

**3)** 完成后，该块应如下所示：

```
if (!(elm.tagName == 'SELECT' && patch.className == 'slvzr-focus')) {
    if (!hasPatch(elm, patch)) {

        if (patch.applyClass && (patch.applyClass === true || patch.applyClass(elm) === true)) {

            cssClasses = toggleClass(cssClasses, patch.className, true);
        }
    }
} 
```

希望能帮助那里的人。

谢谢S/O！

# windows-8 - 当我将 WinJS.UI.ListView 与 WinJS.UI.ListLayout 一起使用时，会显示加载栏

> ID：12809128
> 
> 赞同：0
> 
> 时间：2012-10-09T22:06:48.997
> 
> 标签：windows-8, winjs

我用 ListView 创建了非常简单的导航项目。当我使用 ListLayout 时，它不会显示我的数据。相反，它显示加载栏。当我使用 GridLayout 时，一切正常。有什么问题？

# java - 测试矩形是否包含另一个矩形的全部或部分？

> ID：12809134
> 
> 赞同：-1
> 
> 时间：2012-10-09T22:06:59.090
> 
> 标签：java, android, algorithm

我有这个代码：

```
graphicsContext.setCanvas(canvas);
graphicsContext.clear();
camera.applyTransform(graphicsContext);
RectF screen = camera.getCamRect(getWidth(), getHeight());

for(Road r : roads) {
  if(screen.contains(r.getRect())) {
    r.draw(graphicsContext);
  }
}

for(Intersection i : intersections) {
  if(screen.contains(i.getRect())) {
    i.draw(graphicsContext);
  }
} 
```

唯一的问题是 contains 方法必须具有 A 中 B 的所有 4 个顶点才能返回 true。我可以使用什么类型的算法，给定上、左、下、右来检查 B 是 B 的一部分还是完全在 B 内。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:11:10.040

只需`RectF.contains()`与要测试相交的形状的每个顶点一起使用

甚至更容易，`RectF.intersects()`将为您处理所有这些。

这一切都在[文档](http://developer.android.com/reference/android/graphics/RectF.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:11:26.757

只需使用以下`intersects`方法：

```
for(Road r : roads)
{
    if(RectF.intersects(screen, r.getRect()))
    {
        r.draw(graphicsContext);
    }
} 
```

# knockout.js - 如何在带有剔除的选择框中选择特定值

> ID：12809139
> 
> 赞同：0
> 
> 时间：2012-10-09T22:07:40.027
> 
> 标签：knockout.js

这是我所拥有的小提琴：

[http://jsfiddle.net/3LHBL/1/](http://jsfiddle.net/3LHBL/1/)

一旦重新填充第二个下拉菜单以选择第一项或我从其他地方指定的一项，如何重置第二个下拉菜单？

例子：

1.  用户查看“abc”“5”
2.  用户更改为 'def' -> 第二次选择应该选择 value =='20' || 第一个选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:20:51.803

`selectedEvent`您可以通过在设置新`events`列表后立即设置来使其选择新选项。这是一个例子：http: [//jsfiddle.net/mbest/3LHBL/2/](http://jsfiddle.net/mbest/3LHBL/2/)

设置第一个选项的方法类似：http: [//jsfiddle.net/mbest/3LHBL/3/](http://jsfiddle.net/mbest/3LHBL/3/)

# expression - 基于 Header 属性的 Mule 选择节点表达式

> ID：12809143
> 
> 赞同：3
> 
> 时间：2012-10-09T22:07:58.987
> 
> 标签：expression, mule, choice

如何根据消息中的标头属性使用选择节点在 mule 中路由消息？

我的消息有两个标题：prop1 和 prop2。

当我尝试使用此表达式进行路由时：

```
 <when expression="INBOUND:prop1=abc evaluator="header"> 
```

有用。

但是当我尝试这个时：

```
 <when expression="INBOUND:prop1=abc and prop2=123" evaluator="headers"> 
```

这没用。我的意思是，即使我在消息中正确设置了标题属性，它也会进入“否则”流程。

任何想法将不胜感激！

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:17:54.557

假设 Mule 3.3.x 和两个属性都是字符串：

```
<when expression="#[message.inboundProperties.?prop1 == 'abc' and message.inboundProperties.?prop2 == '123']"> 
```

请注意，这是空值安全的，即`prop1`不需要`prop2`在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:22:10.353

标头求值器不是为处理复杂表达式而设计的（即它不支持逻辑运算符）

根据您的 sintax，我假设您正在使用版本 < 3.3.0 的 mule，因此基于[MEL](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)的示例可能无法满足您的需求，尽管您应该在升级后立即采用这种方法。

在较旧的 mule 版本中，最好的方法可能是使用 groovy 表达式评估器，并且 when 条件如下所示

```
<when expression="#[groovy:message.getInboundProperty('prop1') == 'abc' && message.getInboundProperty('prop2') == '123']"> 
```

# javascript - 如何在 javascript 中创建网站图标？

> ID：12809144
> 
> 赞同：8
> 
> 时间：2012-10-09T22:08:09.807
> 
> 标签：javascript, html, html5-canvas, favicon

我想向网站添加一个网站[图标](http://en.wikipedia.org/wiki/Favicon)，以便能够识别它的标签。不过，我不希望 favicon 成为文件。在 Javascript 中创建一个的最佳方法是什么？

原因

*   favicon 文件需要额外的 HTTP 请求，这会增加页面加载时间。
*   更改 Web 服务器可能会将静态内容服务更改为另一种方式，这会导致头痛。

PS：我已经提出[了一个解决方案](https://stackoverflow.com/a/12809146/906658)来解决这个问题，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T22:08:09.807

如果简单的基于表单的图形就足够了，那么可以使用 HTML5 Canvas 创建一个网站图标。已成功尝试[在加载图标图像后对其进行修改](https://stackoverflow.com/a/6964230/906658)。类似地，可以使用基本的 canvas API 完全在 javascript 中创建一个网站图标。以下示例创建并设置了一个带有绿色方块的灰色图标：

```
<script>
    var canvas = document.createElement('canvas');
    canvas.width = 16;
    canvas.height = 16;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = "#aaa";
    ctx.fillRect(0, 0, 16, 16);
    ctx.fillStyle = "#afa";
    ctx.fillRect(4, 4, 8, 8);            
    var link = document.createElement('link');
    link.type = 'image/x-icon';
    link.rel = 'shortcut icon';
    link.href = canvas.toDataURL("image/x-icon");
    document.getElementsByTagName('head')[0].appendChild(link);
</script> 
```

对于当前过时的版本 Internet Explorer (<9)，需要一种解决方法，例如[Explorer Canvas](http://code.google.com/p/explorercanvas/)。请参阅有关如何执行此操作的[官方说明。](http://code.google.com/p/explorercanvas/wiki/Instructions)

# jquery - 替换链接中的文本

> ID：12809145
> 
> 赞同：2
> 
> 时间：2012-10-09T22:08:11.040
> 
> 标签：jquery, contenteditable

我有一个 div ( `contenteditable="true"`) ，其中包含一些 html。我正在尝试替换整个 div 中的文本，但与某个类的链接*除外。*

我试过：

```
$('div#text').not('a.selected').each(function() {
    $(this).html = replaceFunction($(this).text))
}); 
```

但它不会取代任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:10:24.550

您不想设置`.html`，因为它是 jQuery 定义的函数。采用

```
$('#text :not(a.selected)').each(function() {
  $(this).html(replaceFunction($(this).text())));
}); 
```

编辑：我还注意到您使用`.text`的是一个值，但这也是一个函数。我在上面更正了它以调用`.text()`而不是将其视为字符串。

EDIT2：另外，您的选择器不正确，已在上面修复。`div#text`可以简单地`#text`因为您不应该`text`在页面上将 id 两次用于另一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T22:11:48.960

你的选择器永远不会返回任何东西。您是在说“给 div id=text 的 div 不是 class=selected 的 a 元素”。用于`.children()`获取 div 的子项。

`.html`并且`.text`是方法。你不能分配给他们。它们具有获取和设置的重载：
`.html()`将获取 html。
`.html(newhtml)`将设置html。

你想要这样的东西：

```
$('div#text').children().not('a.selected').each(function() {
    $(this).html(replaceFunction($(this).text()));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:12:15.477

试试这个

```
$(this).html(replaceFunction($(this).text()))); 
```

您没有设置 div 的 html .. 但您似乎只是为其分配了值.. 什么都不做..

也失踪`()` 了`.text()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:19:01.210

在您的代码中，jQuery 将找到 ID 为“text”的所有 div（有一个），然后从结果集中删除所有具有“selected”类的锚元素（没有）。

如果在 div#text 中所有内容都包含在任何类型的元素中，请尝试以下操作：

```
$('div#text').children().not('a.selected').each(function() {
    $(this).html = replaceFunction($(this).text))
}); 
```

或性能较差但所有级别的发现

```
$('div#text').find("*").not('a.selected').each(function() {
    $(this).html = replaceFunction($(this).text))
}); 
```

您还可以使用 vanilla JS 在一个简单的循环中扫描所有 HTML 节点（包括文本节点）。

# java - eclipse插件执行中的NoClassDefFoundError

> ID：12809150
> 
> 赞同：1
> 
> 时间：2012-10-09T22:08:19.370
> 
> 标签：java, eclipse, jar, execution

我正在构建使用 JDT/AST 的 eclipse 插件。构建插件工作正常，但是当我尝试运行插件时。我去这个错误信息。它抱怨找不到 ASTVisitor 类。

![在此处输入图像描述](../Images/685811a6760ae4f9619a44db0e032fa5.png)

我用用户库检查了`org.eclipse.jdt.core***.jar`它是否在构建路径中。

![在此处输入图像描述](../Images/a59e38b6d0b9920628854a6b8314447e.png)

可能有什么问题？我是否需要设置指向 jar 文件的执行路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:13:47.397

Eclipse 插件使用该`Manifest.MF`文件管理依赖项。签入作为必需插件的`Manifest.MF`文件的依赖项选项卡。`org.eclipse.jdt.core`

# perl - 弹性 MapReduce 引导程序安装 Perl 模块

> ID：12809163
> 
> 赞同：2
> 
> 时间：2012-10-09T22:09:36.563
> 
> 标签：perl, hadoop-streaming, amazon-emr

我正在尝试编写一个 Perl 脚本，该脚本将在 Elastic MapReduce 的 Streaming 功能下作为映射器运行。我正在尝试使用 Net::Amazon::S3 （或据说更便携的 Amazon::S3）来做一些额外的文件 I/O 从和到 S3。该模块不在默认 AMI 上，因此我尝试在引导操作脚本中使用 CPAN 来安装它。引导脚本当前包含：

perl -MCPAN -e 'CPAN::Shell->install(Amazon::S3)'

但是，15 分钟后引导操作仍未完成，所以我认为它正在等待某种输入。我环顾四周，但没有找到任何加载 Perl 模块的引导操作脚本示例。有人可以建议我吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:48:58.797

*   从`~/.cpan/CPAN/MyConfig.pm`配置了`cpan`.
*   将`cpan`配置选项设置`prerequisites_policy`为`follow`.
*   将环境变量设置`PERL_MM_USE_DEFAULT`为`1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:07:14.927

找到了一种更简单、更快捷的方法。看起来大多数 CPAN 模块也可以通过 apt-get 获得。我有一个引导操作脚本，现在说：

```
#!/bin/bash -e

source /etc/profile
# Make sure we have all of the dependencies in place for our Perl script.
sudo apt-get install -y libjson-perl
sudo apt-get install -y liburi-encode-perl 
```

请注意，这不会加载我在原始问题中询问的 S3 模块。我已经更改了我的代码，因此我不再需要该功能。但是，Net::Amazon::S3 可以作为 libnet-amazon-s3-perl 使用，所以

```
sudo apt-get install -y libnet-amazon-s3-perl 
```

应该做的工作。

有关信息，[请访问 http://www.deepakg.com/prog/2009/01/cpan-modules-on-ubuntu-apt-get-vs-perl-mcpan/](http://www.deepakg.com/prog/2009/01/cpan-modules-on-ubuntu-apt-get-vs-perl-mcpan/)。

# c# - 为用户在 DataGridView 中编辑的单元格的列标题添加刻度线

> ID：12809166
> 
> 赞同：0
> 
> 时间：2012-10-09T22:10:05.733
> 
> 标签：c#, winforms, datagridview

在我的 DataGridView 中，有一个小刻度线可以帮助用户可视化他们所在的行，但对于他们所在的当前列似乎没有相同类型的刻度线。

![在此处输入图像描述](../Images/4a790dd7bbf298e84111aa5ecc1b8a8d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:43:43.463

如果您想要一个实际的 tic 标记，您将需要进行一些自定义绘图，或者操作排序 tic 标记。我不推荐后者，因为现在列标题中的小箭头表示“排序”已成为惯例。

但是，您可以使用标题单元格的格式。在这个（半粗略但有效的）示例中，将标题单元格中的文本更改为粗体以指示当前选定单元格所在的列。当用户通过制表符或简单地单击新单元格来更改单元格时，正确的列标题文本将变为粗体。

![在此处输入图像描述](../Images/735dc2e2eef84c2a082bf902d4faa25e.png)

显然，还有一些其他的属性需要处理，尽管您可能不得不折腾一段时间试图找到使用 style 属性的正确方法。我使用粗体文本是因为它是一个简单的演示（不过，这可能也是我在项目中处理它的方式）。

基本上，这一切都归结为 DataGridViewColumn.HeaderCell.Style 属性。

在下文中，我继承自 DataGridview 类，然后在控件来源的 CellEnter 事件期间使用一些事件处理来操作标题单元格：

```
class dgvControl : DataGridView
{
    // Keep track of the most recently selected column:
    private DataGridViewColumn _currentColumn;

    public dgvControl() : base()
    {
        // Add a handler for the cell enter event:
        this.CellEnter += new DataGridViewCellEventHandler(dgvControl_CellEnter);

        // When the Control is initialized, instantiate the placeholder
        // variable as a new object:
        _currentColumn = new DataGridViewColumn();

        // In case there are no columns added (for the designer):
        if (this.Columns.Count > 0)
        {
            this.OnColumnFocus(0);
        }
    }

    void dgvControl_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        this.OnColumnFocus(e.ColumnIndex);        
    }

    void OnColumnFocus(int ColumnIndex)
    {
        // If the new cell is in the same column, do nothing:
        if (ColumnIndex != _currentColumn.Index)
        {
            // Set up a custom font to represent the current column:
            Font selectedFont = new Font(this.Font, FontStyle.Bold);

            // Grab a reference to the current column:
            var newColumn = this.Columns[ColumnIndex];

            // Change the font to indicate status:
            newColumn.HeaderCell.Style.Font = selectedFont;

            // Set the font of the previous column back to normal:
            _currentColumn.HeaderCell.Style.Font = this.Font;

            // Set the current column placeholder to refer to the new column:
            _currentColumn = newColumn;
        }

    }
} 
```

更新：

如果您想获得更多控制权，并弄乱标题单元格背景颜色或字体以外的其他样式属性，则需要将 EnableHeadersVisualStyles 属性设置为 false。下面的代码已被修改，以便可以操纵标题的背景颜色。增加灵活性的代价是您不再获得标题的更光滑的视觉外观（它们变平，不再有轻微的渐变）。

您可以非常雄心勃勃并覆盖 OnPaint 方法来进行自己的排水，但这似乎有点极端。试试这段代码，看看headers的外观是不是简直无法忍受。无论如何，这是一个开始！

```
class dgvControl : DataGridView
{
    // Keep track of the most recently selected column:
    private DataGridViewColumn _currentColumn;

    public dgvControl() : base()
    {
        this.EnableHeadersVisualStyles = false;

        // Add a handler for the cell enter event:
        this.CellEnter += new DataGridViewCellEventHandler(dgvControl_CellEnter);

        // When the Control is initialized, instantiate the placeholder
        // variable as a new object:
        _currentColumn = new DataGridViewColumn();

        // In case there are no columns added (for the designer):
        if (this.Columns.Count > 0)
        {
            this.OnColumnFocus(0);
        }
    }

    void dgvControl_CellEnter(object sender, DataGridViewCellEventArgs e)
    {
        this.OnColumnFocus(e.ColumnIndex);        
    }

    void OnColumnFocus(int ColumnIndex)
    {
        // If the new cell is in the same column, do nothing:
        if (ColumnIndex != _currentColumn.Index)
        {
            // Set up a custom font to represent the current column:
            Font selectedFont = new Font(this.Font, FontStyle.Bold);

            // Grab a reference to the current column:
            var newColumn = this.Columns[ColumnIndex];

            // Change the font to indicate status:
            newColumn.HeaderCell.Style.Font = selectedFont;

            // Change the color to a slightly darker shade of gray:
            newColumn.HeaderCell.Style.BackColor = Color.LightGray;

            // Set the font of the previous column back to normal:
            _currentColumn.HeaderCell.Style.Font = this.Font;

            // Change the color of the previous column back to the default:
            _currentColumn.HeaderCell.Style.BackColor = Color.Empty;

            // Set the current column placeholder to refer to the new column:
            _currentColumn = newColumn;
        }

    }
} 
```

# eclipse - ASM 库：GAE 和 Spring 之间的版本不兼容

> ID：12809170
> 
> 赞同：2
> 
> 时间：2012-10-09T22:10:24.143
> 
> 标签：eclipse, spring, google-app-engine

我目前正在开发一个基于 Spring 3.1.2 的项目，该项目需要在 GAE 上运行。

在研究了日志之后，我想我知道为什么每当我需要与应用程序交互时都会收到 500 内部服务器错误。我面临的问题与 ASM (http://asm.ow2.org/) 有关。

似乎 GAE 依赖于 ASM 4.0，而如果我使用 ASM 3.1，项目在本地运行良好。

但是，我发现在 ASM 4.0 时无法使其工作 :(

我是 Google App Engine 的新手，所以......欢迎任何解决此问题的提示！（我整个早上都在寻找问题所在并尝试了太多不同的方法来解决它......但没有办法）。

非常感谢您的建议；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:41:49.977

我找到了一些相关信息，尝试将您的 spring 版本升级到 3.2 M2。此版本支持 cgilib 3.0 和 asm 4.0！

访问[https://jira.springsource.org/browse/SPR-9669](https://jira.springsource.org/browse/SPR-9669)

# ios - 如何停止符号添加“ " 碎片到 iOS 崩溃日志

> ID：12809174
> 
> 赞同：16
> 
> 时间：2012-10-09T22:10:53.357
> 
> 标签：ios

我有来自 App Store 中的 iPhone 应用程序的崩溃日志（通过 iTunes Connect 检索），在符号化后有一堆来自 CodeData 和 CoreFoundation 的“<redacted>”方法名称。

来自 iTunes Connect 的原始崩溃日志文件如下所示：

```
Last Exception Backtrace:
0   CoreFoundation                  0x34a0929e __exceptionPreprocess
1   libobjc.A.dylib                 0x32d1997a objc_exception_throw
2   CoreData                        0x3631fec2 -[NSSQLCore _obtainOpenChannel]
3   CoreData                        0x363cfd9c newFetchedRowsForFetchPlan_MT
4   CoreData                        0x363b3be6 -[NSSQLCore newFetchedPKsForSourceID:andRelationship:]
5   CoreData                        0x363a6008 -[NSSQLCore newValueForRelationship:forObjectWithID:withContext:error:]
6   CoreData                        0x3635690a -[NSFaultHandler retainedFulfillAggregateFaultForObject:andRelationship:withContext:]
7   CoreData                        0x36326d48 -[_NSFaultingMutableSet willRead]
8   CoreData                        0x3632767c -[_NSFaultingMutableSet allObjects] 
```

在我的 Mac 上符号化后的日志如下所示：

```
Last Exception Backtrace:
0   CoreFoundation                  0x34a0929e <redacted> + 158
1   libobjc.A.dylib                 0x32d1997a objc_exception_throw + 26
2   CoreData                        0x3631fec2 <redacted> + 230
3   CoreData                        0x363cfd9c <redacted> + 948
4   CoreData                        0x363b3be6 <redacted> + 2590
5   CoreData                        0x363a6008 <redacted> + 528
6   CoreData                        0x3635690a <redacted> + 478
7   CoreData                        0x36326d48 <redacted> + 220
8   CoreData                        0x3632767c <redacted> + 20
9   [myappname]                     [memory addresses here]
... 
```

谁能帮助找出为什么“<redacted>”被添加到符号化版本中？我自己的应用程序中的符号符号化得很好，正如您在上面看到的基本 libobjc 符号一样。

**更新**：在 Kerni 的回答之后切换日志更清晰

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T07:35:57.470

我遇到了同样的问题，并通过从`~/Library/Developer/Xcode/iOS`DeviceSupport 中删除所有 iOS 6.0（包括测试版）数据来删除消息。

现在，symbolicate 使用存储在的符号数据，`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/6.0 (10A403)/`
而不是存储在用户库中的符号数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T22:30:24.197

据我了解：第一份报告是从 iTunes Connect 下载的，第二份是在您在 Mac 上处理之后。

`<redacted>`在设备上编写崩溃报告时，iOS 在解析某些系统库的某些部分的某些系统符号时正在使用它。除了在 Mac 上再次对其进行符号化之外，您无法采取任何措施来避免这种情况发生。

更新：符号化脚本重新处理所有行，并且自从 iOS 6 beta 版本之一以来，Apple 开始报告这些`<redacted>`符号。这也意味着旧版本的 atos 将返回`<redacted>`而不是正确的符号。

请检查 Xcode 4.5 安装时是否存在 iOS 6 符号，并且当前选择了 Xcode 4.5。您需要确保您的系统使用最新版本的 atos。

符号`xcrun`化脚本用于查找`atos`二进制文件，因此您可以使用以下命令检查它是否找到正确的文件：

`xcrun -find -sdk iphoneos atos`

这应该指向 Xcode 4.5 应用程序包。

# java - TreeSet 搜索需要很长时间，谜题：找到幸运数字

> ID：12809177
> 
> 赞同：2
> 
> 时间：2012-10-09T22:11:18.667
> 
> 标签：java, algorithm, optimization, dynamic, puzzle

找到幸运数字实际上是一个问题 - 那些数字之和和数字平方和为质数的数字。我已经实施[了埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。现在为了进一步优化它，我评论了我的 getDigitSum 方法，我认为它很重并替换为两个硬编码值，但解决一个测试用例仍然需要几分钟。[这是对实际问题的参考](https://codereview.stackexchange.com/questions/8319/puzzle-sum-of-the-digits-is-prime-or-not)

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Set;
import java.util.TreeSet;

public class Solution {

private static int[] getDigitSum(long num) {

    long sum = 0;
    long squareSum = 0;
    for (long tempNum = num; tempNum > 0; tempNum = tempNum / 10) {
        if (tempNum < 0) {
            sum = sum + tempNum;
            squareSum = squareSum + (tempNum * tempNum);
        } else {
            long temp = tempNum % 10;
            sum = sum + temp;
            squareSum = squareSum + (temp * temp);

        }
    }
    int[] twosums = new int[2];
    twosums[0] = Integer.parseInt(sum+"");
    twosums[1] = Integer.parseInt(squareSum+"");
    // System.out.println("sum Of digits: " + twoDoubles[0]);
    // System.out.println("squareSum Of digits: " + twoDoubles[1]);
    return twosums;
}

public static Set<Integer> getPrimeSet(int maxValue) {
    boolean[] primeArray = new boolean[maxValue + 1];
    for (int i = 2; i < primeArray.length; i++) {
        primeArray[i] = true;
    }
    Set<Integer> primeSet = new TreeSet<Integer>();
    for (int i = 2; i < maxValue; i++) {
        if (primeArray[i]) {
            primeSet.add(i);
            markMutiplesAsComposite(primeArray, i);
        }
    }

    return primeSet;
}

public static void markMutiplesAsComposite(boolean[] primeArray, int value) {
    for (int i = 2; i*value < primeArray.length; i++) {
        primeArray[i * value] = false;

    }
}

public static void main(String args[]) throws NumberFormatException,
        IOException {
    // getDigitSum(80001001000l);
    //System.out.println(getPrimeSet(1600));
    Set set = getPrimeSet(1600);
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int totalCases = Integer.parseInt(br.readLine());
    for (int cases = 0; cases < totalCases; cases++) {
        String[] str = br.readLine().split(" ");
        long startRange = Long.parseLong(str[0]);
        long endRange = Long.parseLong(str[1]);
        int luckyCount = 0;
        for (long num = startRange; num <= endRange; num++) {
            int[] longArray = getDigitSum(num); \\this method was commented for testing purpose and was replaced with any two hardcoded values
            if(set.contains(longArray[0]) && set.contains(longArray[1])){
                luckyCount++;
            }

        }
        System.out.println(luckyCount);
    }

}
} 
```

我应该用什么来缓存结果，以便搜索所需的时间更少，目前它需要大量的时间。完成 10000 个范围为 1 99999999999999（18 次 9 - 最坏情况）的测试用例需要几分钟，即使搜索值已被硬编码以用于测试目的（1600、1501）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:28:07.817

你需要一个不同的算法。缓存不是你的问题。

如果范围很大 - 你可以打赌有些会 - 即使是一个几乎什么都不做的循环也会花费很长时间。如果我理解正确，范围的结尾被限制为不超过 10 ^(18 。)假设范围的开始是一半。然后你会迭代 5*10 ^(17 个)数字。假设您有一个 2.5 GHz CPU，那么您每秒有 2.5*10 ^(9个时钟周期。)如果每次迭代需要一个周期，那就是 2*10 ⁸ CPU 秒。一年大约有 3.1*10 ⁷秒，因此循环大约需要六年半。

从另一边攻击问题。数字的平方和最多可以是 18*9 ²，也就是 1458，一个相当小的数字。数字本身的总和最多可以是`18*9 = 162`。

对于小于 162 的素数，找出所有可能的分解为最多 18 位数字的总和（忽略 0）。丢弃那些平方和不是素数的分解。剩下的组合不多。然后找出在指定范围内您可以使用每种可能的分解构造多少个数字（如果需要，用零填充）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:42:45.080

此实现中几乎没有可以改进的地方。为了开始解决问题，我首先做了一些更改以了解主要问题：使总起始案例的值为 1，并将范围设置为十亿（1,000,000,000）以进行大量迭代。我也使用方法“getDigitSum”，但注释掉了实际生成数字总和的代码，以查看其余部分如何运行：以下是为初始测试运行修改的方法：

```
private static int[] getDigitSum(long num) {

    long sum = 0;
    long squareSum = 0;
//    for (long tempNum = num; tempNum > 0; tempNum = tempNum / 10) {
//        if (tempNum < 0) {
//            sum = sum + tempNum;
//            squareSum = squareSum + (tempNum * tempNum);
//        } else {
//            long temp = tempNum % 10;
//            sum = sum + temp;
//            squareSum = squareSum + (temp * temp);
//
//        }
//    }
    int[] twosums = new int[2];
    twosums[0] = Integer.parseInt(sum+"");
    twosums[1] = Integer.parseInt(squareSum+"");
    // System.out.println("sum Of digits: " + twoDoubles[0]);
    // System.out.println("squareSum Of digits: " + twoDoubles[1]);
    return twosums;
} 
```

和

```
public static void main(String args[]) throws NumberFormatException,
        IOException {
    // getDigitSum(80001001000l);
    //System.out.println(getPrimeSet(1600));
    Set set = getPrimeSet(1600);
    //BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int totalCases = 1;
    for (int cases = 0; cases < totalCases; cases++) {
        //String[] str = br.readLine().split(" ");
        long startRange = Long.parseLong("1");
        long endRange = Long.parseLong("1000000000");
        int luckyCount = 0;
        for (long num = startRange; num <= endRange; num++) {
            int[] longArray = getDigitSum(num); //this method was commented for testing purpose and was replaced with any two hardcoded values
            if(set.contains(longArray[0]) && set.contains(longArray[1])){
                luckyCount++;
            }

        }
        System.out.println(luckyCount);
    }

} 
```

**运行代码需要 5 分 8 秒。** 现在我们可以开始逐步优化它了。我现在将提到实现中可以优化的各个点。

***1- 在方法 getDigitSum(long num)***

```
int[] twosums = new int[2];
twosums[0] = Integer.parseInt(sum+"");
twosums[1] = Integer.parseInt(squareSum+""); 
```

以上不好。每次调用此方法时，都会创建两个 String 对象，例如 (sum+"") ，然后再将它们解析为 int。考虑到该方法在我的测试中被调用了十亿次，它产生了 20 亿次 String 对象创建操作。因为您知道该值是一个 int （根据那里的数学并基于您提供的链接），所以使用强制转换就足够了：

```
twosums[0] = (int)sum;
twosums[1] = (int)squareSum; 
```

**2-在“主要”方法中，您有以下内容**

```
for (long num = startRange; num <= endRange; num++) {
            int[] longArray = getDigitSum(num); \\this method was commented for testing purpose and was replaced with any two hardcoded values
            if(set.contains(longArray[0]) && set.contains(longArray[1])){
                luckyCount++;
            }
   } 
```

这里有几个问题：

**a- set.contains(longArray[0])**将创建一个 Integer 对象（带有自动装箱），因为 contains 方法需要一个对象。这是一个很大的浪费，没有必要。在我们的示例中，将创建十亿个 Integer 对象。此外，集合的使用，无论是树集还是散列集，都不是我们的最佳选择。

您要做的是获取一个包含 1 .. 1600 范围内的素数的集合。这样，要检查该范围内的数字是否为素数，您可以检查它是否包含在集合中。这不好，因为 set contains 方法有数十亿次调用。相反，可以使用您在填充集合时创建的布尔数组：要查找数字 1500 是否为素数，只需访问数组中的索引 1500。这是更快的解决方案。由于它只有 1600 个元素（1600 大于最坏情况的最大数字平方和），因此与速度增益相比，错误位置的浪费内存不是问题。

**b- int[] longArray = getDigitSum(num);** 正在分配并返回一个 int 数组。这将发生数十亿次。在我们的例子中，我们可以在循环之外定义它一次并将它发送到它被填充的方法。在十亿次迭代中，这节省了 7 秒，这本身并没有太大的变化。但是如果测试用例按照你的计划重复 1000 次，那就是 7000 秒。

因此，在修改代码以实现上述所有内容后，您将拥有以下内容：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Set;
import java.util.TreeSet;

public class Solution {

private static void getDigitSum(long num,int[] arr) {

    long sum = 0;
    long squareSum = 0;
//    for (long tempNum = num; tempNum > 0; tempNum = tempNum / 10) {
//        if (tempNum < 0) {
//            sum = sum + tempNum;
//            squareSum = squareSum + (tempNum * tempNum);
//        } else {
//            long temp = tempNum % 10;
//            sum = sum + temp;
//            squareSum = squareSum + (temp * temp);
//
//        }
//    }
    arr[0] = (int)sum;
    arr[1] = (int)squareSum;
    // System.out.println("sum Of digits: " + twoDoubles[0]);
    // System.out.println("squareSum Of digits: " + twoDoubles[1]);

}

public static boolean[] getPrimeSet(int maxValue) {
    boolean[] primeArray = new boolean[maxValue + 1];
    for (int i = 2; i < primeArray.length; i++) {
        primeArray[i] = true;
    }

    for (int i = 2; i < maxValue; i++) {
        if (primeArray[i]) {
            markMutiplesAsComposite(primeArray, i);
        }
    }

    return primeArray;
}

public static void markMutiplesAsComposite(boolean[] primeArray, int value) {
    for (int i = 2; i*value < primeArray.length; i++) {
        primeArray[i * value] = false;

    }
}

public static void main(String args[]) throws NumberFormatException,
        IOException {
    // getDigitSum(80001001000l);
    //System.out.println(getPrimeSet(1600));
    boolean[] primeArray = getPrimeSet(1600);
    //BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int totalCases = 1;
    for (int cases = 0; cases < totalCases; cases++) {
        //String[] str = br.readLine().split(" ");
        long startRange = Long.parseLong("1");
        long endRange = Long.parseLong("1000000000");
        int luckyCount = 0;
        int[] longArray=new int[2];
        for (long num = startRange; num <= endRange; num++) {
            getDigitSum(num,longArray); //this method was commented for testing purpose and was replaced with any two hardcoded values
            if(primeArray[longArray[0]] && primeArray[longArray[1]]){
                luckyCount++;
            }

        }
        System.out.println(luckyCount);
    }

}
} 
```

**运行代码需要 4 秒。**

十亿次迭代花费了 4 秒而不是 5 分 8 秒，这是一个改进。剩下的唯一问题是数字总和和数字平方和的实际计算。我注释掉的代码（如您在我发布的代码中所见）。如果取消注释，运行时间将需要 6-7 分钟。在这里，没有什么可以改进的，除非你找到一些数学方法来根据以前的结果进行增量计算。

# security - 从文本框验证防止sql注入

> ID：12809178
> 
> 赞同：-3
> 
> 时间：2012-10-09T22:11:22.987
> 
> 标签：security, sql-injection

什么是特殊字符；出于安全原因，我不应该允许用户在文本框字段中输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T22:16:08.797

通过使用如下准备好的语句，可以更可靠地防止 SQL 注入。如果您不能使用此模式，那么第二好的方法是将好的字符“列入白名单”，而不是将禁止的字符“列入黑名单”。

**。网**

```
 String query = 
     "SELECT account_balance FROM user_data WHERE user_name = ?";
 try {
    OleDbCommand command = new OleDbCommand(query, connection);
    command.Parameters.Add(new OleDbParameter("custrName", CustName Name.Text));
    OleDbDataReader reader = command.ExecuteReader();
    // …
 } catch (OleDbException se) {
    // error handling
 } 
```

**爪哇**

```
 String custname = request.getParameter("customerName"); 
 String query = "SELECT account_balance FROM user_data WHERE user_name = ? ";

 PreparedStatement pstmt = connection.prepareStatement( query );
 pstmt.setString( 1, custname); 
 ResultSet results = pstmt.executeQuery( ); 
```

您可以查阅[OWASP SQL 注入预防备忘单](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)以获取更多准备好的语句示例和[OWASP 输入验证备忘单](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)，以了解有关白名单的更多信息，如果您绝对设置为白名单/黑名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:15:51.967

mysql_real_escape_string($string) (PHP) 将为您完成这项工作。您不必过滤数据。

大多数情况下 ' （单引号）和 " （双引号）会在没有转义的情况下带来麻烦。

# java - 执行者与线程

> ID：12809185
> 
> 赞同：4
> 
> 时间：2012-10-09T22:12:05.703
> 
> 标签：java, multithreading, executorservice

我正在尝试运行以下代码：

```
public static void main(String[] args){
    ScheduledExecutorService service = new ScheduledThreadPoolExecutor(2);

    Runnable r = new Runnable() {
        @Override
        public void run() {
            throw new RuntimeException();
        }
    };
    service.execute(r );
    ScheduledFuture<?> schedule = service.schedule(r, 0, TimeUnit.SECONDS);
    new Thread(r).run();
} 
```

关于上述，我有以下问题：

1.  有没有办法捕捉和响应执行者线程上发生的异常？
2.  为什么创建的线程的异常显式传播到主线程，但使用执行器服务的两次执行都没有传播该错误？怎么会发现这个错误？

编辑：想到另一个问题：

1.  如何停止我安排的给定定期任务，比如在 N 次重复或 N 分钟之后？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:14:38.637

问题 2 真的很简单——你实际上并没有开始一个新线程，你只是在调用`run()`，它在原始线程中同步运行。您应该调用`start()`，此时异常*不会*被传播回来。

至于处理 a 中的异常，`ScheduledExecutorService`如果调用，如果原始任务抛出异常，[`Future.get()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28%29)它将抛出，将原始异常暴露为原因：[`ExecutionException`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html#ExecutionException%28%29)

> 尝试检索因抛出异常而中止的任务的结果时抛出异常。可以使用该`Throwable.getCause()`方法检查此异常。

如果您需要响应异常*而不*阻塞将来完成，您可以将您的“真实”包装`Runnable`在另一个刚刚委托给原始`run()`方法的“真实”中，但使用适当的 try/catch 块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T22:15:20.523

你可以像这样抓住它：

```
 ScheduledFuture<?> schedule = service.schedule(r, 0, TimeUnit.SECONDS);
    try {
        Object get = schedule.get();
    } catch (InterruptedException ex) {
        ex.printStackTrace();
    } catch (ExecutionException ex) {
        ex.printStackTrace();
    } 
```

如果运行的代码`(Scheduled)ExecutorService` [抛出](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get())异常，它将在调用时重新`[Future.get()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28%29)`抛出`ExecutionException`

编辑：

关于停止计划任务，已经[讨论并解决](https://stackoverflow.com/questions/5233893/how-to-effectively-cancel-periodic-scheduledexecutorservice-task)了。

# python - 如何比较两个未知长度、顺序和重复值列表中的每个项目，同时最小化 Python 中的写入和保留位置？

> ID：12809190
> 
> 赞同：1
> 
> 时间：2012-10-09T22:12:32.783
> 
> 标签：python, loops

我保证我已经尝试过搜索，但我发现的每一个问题最终都有一些未说明或违反的标准，这使得答案对我来说不够。

我正在向 Python 脚本发送一个列表。该列表将存储在某个地方，但我想尽量减少写入（这是在远程服务上，每次写入都要收费）。

```
listNew = ["some", "list", "sent", "in", "that", "may", "be", "different", "later", "some"]
listPrevious = ["some", "some", "list", "that", "was", "saved", "previously"] 
```

（请不要因为它们是字符串而分心；我的列表实际上包含整数。）

简单的基本算法是逐个索引地迭代两个列表。如果项目相同，我不需要写；繁荣，省钱。然而，最终保存的数据应该是 listNew。

在其他语言中，我可以通过索引直接引用元素。

```
for (int i = 0; i < listNew.length; i++) {
    // Have we exceeded the previous list's length? Time to just write data in.
    if (listPrevious[i] == null)
        listPrevious.append(listNew[i]);
        continue;

    if (listNew[i] != listPrevious[i])
        listPrevious[i] = listNew[i]
} 
```

不幸的是，我在[循环技术](http://docs.python.org/tutorial/datastructures.html#looping-techniques)和[列表方法](http://docs.python.org/tutorial/datastructures.html#more-on-lists)中发现的并没有提供：

1.  通过索引获取元素而不删除它的方法（pop 方法），也不是

2.  通过精确值和定位获取元素索引的方法，因为我有重复项（在上面的代码中，使用 list.index("some") 将返回 listPrevious 中的第一个索引，尽管我实际上正在查看最后一个索引listNew 中的元素），也不

3.  遍历我的列表超出列表之一长度的方法（似乎 zip() 不会迭代超出较小列表的长度）。

关于我应该如何处理这个问题的任何想法？当我搜索以前的问题时，总是以某种方式违反了这三个标准之一。

顺便说一句，我试图避免像下面这样的解决方案，这也是其他问题中标记的解决方案之一。

```
for newitem in listNew
    for olditem in listPrevious
        if newitem != olditem
            # save the newitem 
```

这会将 listNew 中的元素与 listPrevious 中的每个元素进行比较，这是低效的。我只需要知道它是否匹配另一个列表中的相同索引。

-------- 通过评论请求

输入：2 个列表，listNew 和 listPrevious。另一个例子

*   listNew = [100, 500, 200, 200, 100, 50, 700]
*   listPrevious = [100, 500, 200, 400, 400, 50]

输出：listPrevious 现在是 listNew，而不必覆盖相同的元素。

listPrevious = [100, 500, 200, 200, 100, 50, 700]

*   不需要写入：[100, 500, 200, **_,****, 50, _* _] <- 保存 4 次写入*

**   确实需要写：[ **_，****, _* _, 200, 100, __, 700] <- 执行了 3 次写入，而不是执行了 .length 次写入！** 

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:20:35.507

从您的 C 代码中，我创建了以下内容。希望它做你想要的：

```
for i in range(len(listNew)):
    # Have we exceeded the previous list's length? Time to just write data in.
    if i >= len(listPrevious):
        listPrevious.append(listNew[i])
        continue

    if listNew[i] != listPrevious[i]:
        listPrevious[i] = listNew[i] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:23:45.650

如果你想用你需要的索引按顺序迭代`enumerate`：

```
for idx, item in enumerate(mylist):
  # idx is the 0-indexed value where item resides in mylist. 
```

如果你想在 python 中迭代成对的东西，你可以使用`zip`：

```
for a, b in zip(newlist, oldlist):
  # items a and b reside at the same index in their respective parent lists. 
```

您可以结合以下方法：

```
for idx, (a, b) in enumerate(zip(newlist, oldlist)):
  # here you have everything you probably need, based on what I can 
  # tell from your question. 
```

根据您的数据集，您还可以查看`itertools`模块中的附加功能，特别是`izip_longest`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:26:49.237

Python 的列表方法实际上确实提供了您认为它没有提供的所有功能**（最后一个代码示例等同于您的示例代码）**：

1.  通过索引获取元素而不删除它的方法（pop 方法）

    ```
    >>> data = ['a', 'b', 'c']
    >>> data[1]        # accessing an element by index
    'b' 
    ```

2.  通过精确值和定位获取元素索引的方法，因为我有重复项（在上面的代码中，使用 list.index("some") 将返回 listPrevious 中的第一个索引，尽管我实际上正在查看最后一个索引listNew 中的元素）

    ```
    >>> data = ['a', 'b', 'c', 'b', 'a']
    >>> data.index('a')     # without a start arg, call finds the first index
    0
    >>> data.index('a', 1)  # you can find later indices by giving a start index
    4 
    ```

3.  遍历我的列表超出列表之一长度的方法（似乎 zip() 不会迭代超出较小列表的长度）。

    ```
    for i, item in enumerate(listNew):    # loops over indices and values
        if i >= len(listPrevious):
            listPrevious.append(item)
            continue

        if item != listPrevious[i]:
            listPrevious[i] = item 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:25:25.227

物品的位置重要吗？

如果不是简单地这样做::

```
for n in NewList:
    if n not in OldList:
        OldList.append(n)
        process(n) 
```**

# sql-server - Storing 'Point' column from ShapeFile

> ID：12809201
> 
> 赞同：1
> 
> 时间：2012-10-09T22:14:25.850
> 
> 标签：sql-server, sql-server-2008, gis, geospatial

I have a Shapefile (*.shp) which I am loading into the Database. I have a column called Point" which stores the Data in shapes. For example

```
POLYGON ((1543297.7815 5169880.9468, 1543236.7046 5169848.3834,
          1543195.0218 5169930.2767, 1543104.4989 5170101.6818,
          1543056.805 5170191.9835, 1542969.1187 5170358.1396,
          1542820.9656 5170638.8525, 1542820.6605 5170639.7223,
          1542816.1912 5170647.8707, 1543158.2618 5170829.6437, 
          1543318.4126 5170915.6562, 1543559.2078 5171043.8001, 
          1543840.2014 5171192.4698, 1544108.917 5171336.1306, 
          1544271.7972 5171422.313, 1544357.0262 5171263.5454, 
          1544447.9779 5171091.3804, 1544468.04 5171054.3179, 
          1544529.7931 5170936.192, 1544583.3416 5170837.5321, 
          1544658.3376 5170696.5608, 1544699.0638 5170622.0859,
          1543985.6169 5170245.4526, 1543618.4129 5170050.7422,
          1543297.7815 5169880.9468)) 
```

The data type of the Column "Point" is `nvarchar(max)`.

The problem is when the size of Polygon exceeds , the column truncates and does not store all the values. I can't convert Points into Geometry as I want to convert Points into Lat/long from Polygon.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:06:19.287

I'd suggest storing the whole polygon as a geometry type. If/when you need to "convert" it to geography, use the geography methods STNumPoints and STPointN to extract the individual points in sequence and convert them as appropriate.

Speaking of the conversion, what format are your data in now? I'm not seeing lat/long info there, but perhaps I'm missing something.

Edit: Here's a solution that I just coded.

```
use tempdb;
create table tally (i int not null);
with 
    a as (select 1 as [i] union select 0),
    b as (select 1 as [i] from a as [a1] cross join a as [a2]),
    c as (select 1 as [i] from b as [a1] cross join b as [a2]),
    d as (select 1 as [i] from c as [a1] cross join c as [a2]),
    e as (select 1 as [i] from d as [a1] cross join d as [a2])
insert into tally
select row_number() over (order by i) from e
create unique clustered index [CI_Tally] on tally (i)

create table ace (g geometry)
insert into ace (g)
values (geometry::STGeomFromText(<<your polygon string here>>, 0));

select i, g.STPointN(t.i), g.STPointN(t.i).STAsText()
from ace as [a]
cross join tally as [t]
where t.i <= g.STNumPoints() 
```

# java - 在java中禁用Mac OS X键绑定

> ID：12809202
> 
> 赞同：3
> 
> 时间：2012-10-09T22:14:31.867
> 
> 标签：java, macos, keyboard-shortcuts

我正在尝试创建一个应用程序，并且我想删除所有基本的 mac 键绑定。例如，如果用户尝试执行命令+空格，那么我不想打开聚光灯。我该怎么做呢？Toolkit 有什么我缺少的东西吗？

谢谢你，霍华德史塔克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:02:31.637

我知道在 OS X 上执行此操作的唯一方法——通常，不仅仅是在 Java 中——是通过设置来启用 kiosk 模式`NSApplication.presentationOptions`。不过，我不确定是否有任何方法可以在不深入研究 JNI 的情况下使用 Java 做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T22:47:32.847

在首选项或聚光灯中搜索键盘快捷键并关闭不需要的快捷键

# php - PHP服务器连接测试

> ID：12809204
> 
> 赞同：3
> 
> 时间：2012-10-09T22:14:34.020
> 
> 标签：php

是否有一个 php 脚本/片段允许您检查 URL/IP 的连接速度。假设 URL 是 www.example.com，当我运行 php 脚本时，它会显示连接（211 毫秒）到 URL/IP 所需的时间，我发现一些脚本只显示它是在线还是离线但不是它的速度。

我非常了解免费和付费服务。我想创建自己的自定义/私人服务器来监控我的许多服务器，并且无法找到连接到给定位置的简单脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:21:41.257

也许是这样的：

```
<?php
// Create a curl handle
$ch = curl_init('http://www.yahoo.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Execute
curl_exec($ch);

// Check if any error occured
if(!curl_errno($ch)) {
    $info = curl_getinfo($ch);
    echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url'];
}
// Close handle
curl_close($ch);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:23:55.047

尝试这个：

```
$ch = curl_init("http://www.google.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$start = microtime();
$foo = curl_exec($ch);
$end = microtime();
curl_close($ch);

echo "Seconds to load = ". $end - $start; 
```

这不会考虑图像或 javascript，只考虑初始响应时间和服务器代码的运行。

# r - 用于创建多维周期性基函数的 R 包？

> ID：12809209
> 
> 赞同：3
> 
> 时间：2012-10-09T22:14:49.277
> 
> 标签：r, statistics

我正在做一些建模工作，其中我试图参数化随季节和一天中的时间而变化的效果。一天中的时间效应在季节之间以一种复杂的方式存在差异，因此似乎最通用的方法是在周期性的 [一天中的时间，一年中的一天] 空间中对效果进行建模。

所描述的效果与实际预测器和预测量具有非线性关系，因此我需要一个可以使用非线性优化进行调整的显式参数化。

因此，最明显的选择是二维傅里叶基。任何人都可以推荐一个 R 包来生成这个吗？我找到了具有“create.fourier.basis”功能的包 fda，但这似乎只适用于 1D。

除了傅立叶方法之外，我所拥有的数据的采样在 [一天中的时间，一年中的一天] 平面上非常不规则，因此理想情况下是一种更加本地化的方法，例如周期性三次样条，我可以在其中放置更多节点丰富的数据飞机的某些部分会更好。有谁知道为这种表示创建 2D 基础的 R 包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T23:04:35.837

**mgcv**包可以创建两个或多个基础基函数的张量积基函数。它还允许循环三次和 p 样条，可用于您提到的变量，作为张量积的基础基函数。

由于**mgcv**与 RI 一起使用，就从这个开始。看看`?te`和`?smooth.terms`开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:09:16.693

fda 包适合处理多变量函数数据。看看例如

?fd

fd 的帮助指出，将三维数组分配给基函数对象可为您提供多元函数数据对象。在他们的书中，Ramsay、Hooker 和 Graves (2009) 使用多元函数数据对象来捕获具有笔位置和时间维度的 2D 定义的手写数据。

也许我错了，但你不能对你的数据应用相同的框架吗？它是按季节、白天和效果定义的？

# matlab - 有没有办法增加matlab可用的内存？

> ID：12809211
> 
> 赞同：0
> 
> 时间：2012-10-09T22:15:02.140
> 
> 标签：matlab, memory

> **可能重复：**
> [matlab 错误“内存不足”](https://stackoverflow.com/questions/3422502/matlab-error-out-of-memory)

我正在尝试对 matlab 中接近 10000 * 300 * 100 的巨大张量进行张量分解。但是我存储张量的内存已经用完了，更不用说计算分解了。有没有办法让我在内存不足时指示 matlab 给我更多内存？

我有 4 GB 的 RAM。所以原则上应该可以获得 2.4 GB 的张量（假设张量的每个元素占用 8 个字节）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:32:14.927

（假设您确实需要一个这种大小的密集数组......）一种方法可能是使用[并行计算工具箱](http://www.mathworks.co.uk/products/parallel-computing/index.html)（PCT）中的[分布式数组。](http://www.mathworks.co.uk/products/parallel-computing/parallel/distarrays.html)这使您可以将单个数组分布在多台机器的 RAM 中。您还需要与工作人员一样多的[MATLAB 分布式计算服务器](http://www.mathworks.co.uk/products/distriben/)许可证。

并非所有函数都可用于分布式数组，但已实现大量核心算术和线性代数函数 -[此处](http://www.mathworks.co.uk/help/distcomp/using-matlab-functions-on-codistributed-arrays.html)列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:10:10.133

如果您没有足够的 RAM，您可以进行一些“核外”计算，在磁盘上分配数据。看看[VVAR 文件交换项目](http://www.mathworks.com/matlabcentral/fileexchange/34276-vvar-class-a-fast-virtual-variable-class-for-matlab)。我没有使用它，但描述可能符合您的需要。创建的数组可以以正常的 matlab 方式使用，并在需要时无缝保存到 HDD。

# android - android中sqlite中的求和查询

> ID：12809214
> 
> 赞同：8
> 
> 时间：2012-10-09T22:15:38.573
> 
> 标签：android, database, sqlite, android-sqlite

我是 java、android 和 sqlite 的新手，我被困在这个问题上。我有列，即_id，type，amount（int），category，description。我正在尝试获取特定类别的金额总和并将它们存储在int中。我知道我需要提供错误，但它只是让我强制关闭。请帮助

```
 public class TransactionReport extends Activity {
private static SQLiteDatabase db;
Cursor c;
int amount;
DbCrud localDbCrud = new DbCrud(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.report);
    localDbCrud.open();                //localDatabase = localDbHelper.getWritableDatabase();  return this;
    c.moveToFirst();
    do{
        c = db.rawQuery("select sum(amount) from transaction_table where category = Salary ;", null);

      }while(c.moveToNext());

    amount = c.getInt(0);
    c.close();
    TextView ltxt = (TextView) findViewById(R.id.amt);
    ltxt.setText(""+amount);
    localDbCrud.close();  //localDatabase.close();

}

} 
```

如果详细解释会很有帮助，因为我是一个完整的菜鸟，我确实尝试找到解决方案但没有找到任何解决方案。提前致谢

```
10-10 03:55:29.828: E/AndroidRuntime(10229): FATAL EXCEPTION: main
10-10 03:55:29.828: E/AndroidRuntime(10229): java.lang.RuntimeException: Unable to      start activity   ComponentInfo{com.hishighness.budgetracker/com.hishighness.budgetracker.TransactionReport}:     java.lang.NullPointerException
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at  android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.os.Looper.loop(Looper.java:130)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at java.lang.reflect.Method.invokeNative(Native Method)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at java.lang.reflect.Method.invoke(Method.java:507)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at dalvik.system.NativeStart.main(Native Method)
10-10 03:55:29.828: E/AndroidRuntime(10229): Caused by: java.lang.NullPointerException
10-10 03:55:29.828: E/AndroidRuntime(10229):    at com.hishighness.budgetracker.TransactionReport.onCreate(TransactionReport.java:27)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-10 03:55:29.828: E/AndroidRuntime(10229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-10 03:55:29.828: E/AndroidRuntime(10229):    ... 11 more 
```

这是日志。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T22:18:14.613

**另外**
我相信你想用`localDBCrud.rawQuery()`，没有`db.rawQuery()`。

**原来**
我猜你有一个 NullPointerException。这里：

```
c.moveToFirst(); 
```

`c`您在使用初始化它之前尝试使用它`db.rawQuery()`。

* * *

您在这里还有一些逻辑错误：

```
c.moveToFirst();
do{
    c = db.rawQuery("select sum(amount) from transaction_table where category = Salary ;", null);
  }while(c.moveToNext());

amount = c.getInt(0);
c.close(); 
```

试试这个：

```
c = db.rawQuery("select sum(amount) from transaction_table where category = Salary ;", null);
if(c.moveToFirst())
    amount = c.getInt(0);
else
    amount = -1;
c.close(); 
```

**@toadsky**也做了一个很好的观察，也听从他的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:18:27.733

您应该将字符串值用单引号括起来。所以而不是：

```
select sum(amount) from transaction_table where category = Salary ; 
```

做：

```
select sum(amount) from transaction_table where category = 'Salary'; 
```

# php - 布局上的 Symfony link_to 弹出窗口不起作用

> ID：12809217
> 
> 赞同：0
> 
> 时间：2012-10-09T22:16:08.497
> 
> 标签：php, popup, symfony-1.4, link-to

我有一个布局基页。在这个页面上，我有一个 link_to 来打开一个弹出窗口：

```
<?php $options = 'left=100,top=10,width=650,height=375,location=no,scrollbars =yes,resizable=yes,directories=no,status=no,toolbar=no,menub ar=no' ?>
<?php echo link_to(image_tag($profile_picture, 'size=25x25') .' ' .$sf_user->getAttribute('user')->getUsername(), '/frontend_dev.php/user/' .$sf_user->getAttribute('user')->getId(),
    array(
    'popup' => array('popupWindow', $options)
    )
); ?> 
```

当我单击该链接时，用户页面将打开，但不在弹出窗口中。但是当我单击用户页面中的相同链接时，它会在弹出窗口中打开用户页面。我什至尝试了一个带有 onclick 的纯 HTML 链接：

```
<a href="http://google.com" onclick="window.open(this.href, 'popupWindow', 'width=500, height=500')">Google</a> 
```

它仍然没有从布局打开弹出窗口，但从用户页面打开了！

有人可以向我解释我做错了什么吗？

也许你在问我是如何加载用户页面的，就像这样：

```
<?php echo $sf_content ?> 
```

用户页面用 PHP 做简单的 HTML，所以没什么特别的。

编辑：

嗯，它与 sfGuestBookPlugin 的索引页有关，它有一个

```
<script type="text/javascript">
$(document).ready(function() {
});
</script> 
```

部分，我在文件底部的另一个脚本标记中有我自己的 JS 部分：

```
<script type="text/javascript">
    var open = true;
    $(".form-title").click(function() {
        if(open) {
            $(".openClose").text("▼");
            open = false;
        } else {
            $(".openClose").text("▲");
            open = true;
        }
    });
</script> 
```

有帮助的是在 $(document).ready() 部分中移动这部分。但我仍然很好奇为什么这会有所帮助。如果可以请解释一下？

# .net - 是否可以防止 DLL 被修改？

> ID：12809219
> 
> 赞同：2
> 
> 时间：2012-10-09T22:16:41.847
> 
> 标签：.net, code-security

是否可以签署或以其他方式保护托管 (.NET) DLL 不被修改？我正在寻找可能的解决方案来检测对 DLL 的更改并防止它们被 .NET 运行时加载。我不介意是否有人可以在 Reflector 或 ILSpy 中加载 DLL - 只要修改后的 DLL 无法执行，我就可以了。

我对此主题进行了一些搜索，但大多数文章/讨论都推荐混淆，这不是我想要的。我认为对 DLL 进行数字签名可以实现这一点，但与同事的交谈让我对此表示怀疑，而且我对这方面的了解也很肤浅。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:21:16.640

[签署 DLL](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)不会阻止其他人反编译然后修改您的 DLL。它*确实*阻止的是他们这样做，*然后将结果作为原始*. 换句话说，如果调用者决定信任修改后的 DLL，它将执行，但任何期望它拥有*您的*公钥令牌的代码都会拒绝它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:20:32.887

签署图书馆将防止修改。不利的一面是，一旦你签署了这个库，你也必须签署它使用的所有子库。如果您使用的是 NuGet 库中的某些内容，那可能会让人头疼。

理论上，一旦对 dll 进行签名，就会创建一个签名以确保它未被修改。如果有人破解了它，那么框架将不会加载它。

# ios - 只需单击一下即可激活垂直分页

> ID：12809221
> 
> 赞同：0
> 
> 时间：2012-10-09T22:17:02.250
> 
> 标签：ios

我有一个 800 像素高的视图，其中包含两个主要视图。我希望用户能够在部分之间向上/向下滑动。所以我在 viewDidLoad 中这样做：

```
_scrollView.contentSize = CGSizeMake(self.view.frame.size.width, 400);
[_scrollView setContentOffset:CGPointMake(0, _containerView.frame.origin.y - 5) animated:NO];
_scrollView.pagingEnabled = YES;
_scrollView.alwaysBounceHorizontal = NO;
_scrollView.directionalLockEnabled = YES;
_scrollView.delegate = self; 
```

我正在尝试初始化显示我的底部的视图——这就是 containerView 所在的位置。然而，奇怪的事情发生了，每当我在视图上单击一下，它就会射到它上面的视图上。发生这种情况后，我无法向下滚动或任何东西。

只有当我将高度设置为 1200 像素这样的大数字时，我才能滚动。然而，即便如此，只需单击底部视图即可将其发送到顶部视图。当我禁用分页时，单击时滚动不会向上飞，但这意味着我必须手动管理分页，这肯定不太理想。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:55:08.483

框架只需要用户可以看到的大小。800px 大于 iPhone 屏幕的大小。内容大小需要是用户看到的帧的两倍，因此分页将导致您在两半之间移动。

# php - Facebook 事件 API

> ID：12809224
> 
> 赞同：1
> 
> 时间：2012-10-09T22:17:30.843
> 
> 标签：php, facebook-graph-api

我在 facebook 上有一个页面，我在上面创建了许多活动。

我也在我的移动应用程序中使用这些事件。

但是现在图形 API 显示了我已经去过的事件。

如果您转到[Graph API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=jarnvags/events)，您会看到它显示了 4 个事件。

但底部的最后 2 个事件是过去的事件。

我已经为他们添加了结束日期，所以这不是这里的问题。

怎么做才能使图形 API 不显示这两个事件？

我不想将它们从 facebook 中删除，而只是想隐藏它。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:32:29.333

`since`您可以使用接受 unix 时间戳的查询参数将 facebook 返回的数据限制为仅显示在特定日期之后创建的事件。

因此，如果您想要在**2012 年 10 月 8 日**或任何其他日期之后创建的事件，您可以使用`since`查询参数进行调用，在这种情况下，unix 时间戳`08 Oct 2012 00:00:00 GMT`将为`1349654400`。

现在，如果我们使用`since`查询参数和上面的 unix 时间戳进行调用，它将返回**2012 年 10 月 8 日**之后创建的所有事件。

这是使用查询参数在[Graph API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=jarnvags%2Fevents%3Fsince%3D1349654400)上进行的工作调用。`since`

如果上面的链接不起作用：

> [https://developers.facebook.com/tools/explorer?method=GET&path=jarnvags%2Fevents%3Fsince%3D1349654400](https://developers.facebook.com/tools/explorer?method=GET&path=jarnvags%2Fevents%3Fsince%3D1349654400)
> 
> **路径**：jarnvags/events?since=1349654400

让我知道这是否对您有帮助:)

**编辑：** 这是使用[FQL](https://developers.facebook.com/tools/explorer/?fql=SELECT%20eid%2C%20name%2C%20description%2C%20pic_big%2C%20start_time%2C%20end_time%2C%20location%20FROM%20event%20WHERE%20creator%20%3D%20109341359096369%20AND%20eid%20IN%20%28SELECT%20eid%20FROM%20event_member%20WHERE%20uid%20%3D%20109341359096369%29%20AND%20start_time%20%3E%3D%20now%28%29%20ORDER%20BY%20start_time)的方法：

```
SELECT eid, name, description, pic_big, start_time, end_time, location FROM event WHERE creator = 109341359096369 AND eid IN (SELECT eid FROM event_member WHERE uid = 109341359096369) AND start_time >= now() ORDER BY start_time 
```

以下是您应该如何在 PHP 中执行此操作：

```
$pageID = '109341359096369';
$fql = 'SELECT eid, name, description, pic_big, start_time, end_time, location FROM event WHERE creator = ' . $pageID . ' AND eid IN (SELECT eid FROM event_member WHERE uid = ' . $pageID . ') AND start_time >= now() ORDER BY start_time';
$ret_obj = $facebook->api(array(
                           'method' => 'fql.query',
                           'query' => $fql,
                         ));
print_r($ret_obj); 
```

查看`event`表格[FQL 文档](https://developers.facebook.com/docs/reference/fql/event/)：[https ://developers.facebook.com/docs/reference/fql/event/](https://developers.facebook.com/docs/reference/fql/event/)

**编辑2：**只是想在评论中强调下面[cpilko](http://facebook.stackoverflow.com/questions/12809224/facebook-events-api/12809902#comment17326263_12809902)提出的观点，以便将来看到此答案的人很容易注意到它，您不必再将日期转换为时间戳，它也仅适用于日期（`2012-10-08`）。

这是[`Events Timezone Migration Note`](https://developers.facebook.com/docs/reference/api/event/)从 facebook events doc 中引用的内容：

> **[事件时区迁移说明](https://developers.facebook.com/docs/reference/api/event/)**
> 
> 从“Events Timezone”迁移开始，所有事件时间始终是 ISO-8601 格式的字符串；'date_format' 查询字符串修饰符不再有任何效果。现在返回以下格式，具体取决于事件的类型：
> 
> 仅日期（例如，'2012-07-04'）：有日期但还没有具体时间的事件。精确时间（例如，'2012-07-04T19:00:00-0700'）：在特定时间点开始的事件，在与 UTC 的特定偏移量中。这是新的 Facebook 事件跟踪时间的方式，并允许用户查看不同时区的事件。本地时间（已弃用，例如“2012-07-04T19:00:00”）：没有任何时区信息的遗留事件。此格式已弃用，但由于仍在系统中的遗留事件而继续返回。

# ruby-on-rails - 如何在 Rails 中调试静默数据库错误（例如“保存”）？

> ID：12809227
> 
> 赞同：5
> 
> 时间：2012-10-09T22:17:36.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3, debugging, activerecord

如何获取有关 Rails 中静默发生的错误的更多信息，例如 @object.save？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T05:25:17.573

添加 bang 以便在验证失败时引发错误。

```
@article.save!
# ActiveRecord::RecordInvalid: Validation failed: Title can't be blank... 
```

`save`如果您不希望验证失败，请始终优先使用此方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T22:17:36.693

根据[这篇文章](http://www.ruby-forum.com/topic/102720)，类似以下的工作：

```
logger.debug @item.errors.full_messages 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-14T06:14:38.920

有时，AR 会因为验证错误以外的原因静默失败。其他几件要检查的事情是：

*   不返回 true 的 AR 回调（例如 before_save）
*   无效的父/子记录
*   @item.valid?, @item.errors.full_messages
*   @item.changes，@item.changed？

我还包括了 user456584 关于检查验证错误的评论。正如 Semyon 所说，@item.save！即使它不是特别有用，至少会引发异常。

# python - 是否可以调用 exec 以使其与 Python 3 和 Python 2 兼容？

> ID：12809234
> 
> 赞同：8
> 
> 时间：2012-10-09T22:17:56.623
> 
> 标签：python, python-2.7, python-3.x

我`exec`在一些 Python 2 代码中使用该语句，并且我试图使该代码与 Python 2 和 Python 3 兼容，但在 Python 3 中，`exec`已从语句更改为函数。是否可以编写与 Python 2 和 3 兼容的代码？我读过[Python 2 和 Python 3 dual development](https://stackoverflow.com/q/11372190/4794)，但我对`exec`语句/函数更改的具体解决方案感兴趣。

我意识到这`exec`通常是不鼓励的，但我正在构建一个 Eclipse 插件，它在 PyDev 之上实现实时编码。有关更多详细信息，请参阅[项目页面](http://donkirkby.github.com/live-py-plugin/)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-26T10:34:24.707

一些[Python 移植指南`exec`](http://python3porting.com/differences.html#exec) **出错了**：

> 如果您需要传入全局或本地字典，则需要定义具有两种不同实现的自定义函数，一种用于 Python 2，另一种用于 Python 3。通常`six`包括一个出色的实现，称为`exec_()`.

**无需此类自定义函数即可将 Python 2 代码移植到 Python 3** (*)。您可以在 Python 2中执行`exec(code)`, `exec(code, globs)`and ，并且它可以工作。`exec(code, globs, locs)`

只要存在， Python 就**一直**接受与 Python 3 兼容的“语法” 。这样做的原因是 Python 2 和 Python 1（？！）有一个技巧来保持*向后兼容*Python 0.9.8，其中是一个函数。现在，如果传递一个 2 元组，它被解释为，如果是一个 3 元组，它被解释为。是的，[in](https://bitbucket.org/gutworth/six/src/784c6a213c4527ea18f86a800f51bf16bc1df5bc/six.py?at=default#cl-688)是不必要的复杂。`exec``exec`*`exec``exec``(code, globals)``(code, globals, locals)`[`exec_``six`](https://bitbucket.org/gutworth/six/src/784c6a213c4527ea18f86a800f51bf16bc1df5bc/six.py?at=default#cl-688)*

 *因此，

```
exec(source, global_vars, local_vars) 
```

保证在 CPython 0.9.9、1.x、2.x、3.x 中以相同的方式工作；而且我还验证了它在 Jython 2.5.2、PyPy 2.3.1 (Python 2.7.6) 和 IronPython 2.6.1 中有效：

```
Jython 2.5.2 (Release_2_5_2:7206, Mar 2 2011, 23:12:06) 
[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.8.0_25
Type "help", "copyright", "credits" or "license" for more information.
>>> exec('print a', globals(), {'a':42})
42 
```

* * *

*) 存在细微差别，因此并非所有*Python 3*代码都适用于 Python 2，即

*   `foo = exec`在 Python 3 中有效，但在 Python 2 中无效`map(exec, ['print(a + a)', 'print(b + b)'])`，但我真的不知道为什么有人想在实际代码中使用这些结构。
*   正如[Paul Hounshell](https://stackoverflow.com/users/156767/hounshell)所发现的，在 Python 2 中，以下代码将引发[SyntaxError: unqualified exec is not allowed in function 'print_arg' 因为它包含一个带有自由变量的嵌套函数](https://stackoverflow.com/a/41368813/918959)：

    ```
    def print_arg(arg):
        def do_print():
            print(arg)
        exec('do_print()') 
    ```

    以下构造毫无例外地工作。

    ```
    def print_arg(arg):
        def do_print():
            print(arg)
        exec 'do_print()' in {} 
    ```

    在 Python 2.7.9 之前，如果将一个用于`exec('do_print()', {})`后者，则会抛出相同的 SyntaxError；但从 Python 2.7.9 开始，解析器/编译器也将允许这种备用元组语法。

同样，边缘情况下的解决方案可能是放弃使用`exec`并`eval`改为使用（[`eval`可用于执行`compile`在`exec`模式下](https://stackoverflow.com/a/29456463/918959)编译的字节码）：

```
def print_arg(arg):
    def do_print():
        print(arg)

    eval(compile('do_print(); print("it really works")', '<string>', 'exec')) 
```

* * *

我已经写了一个关于内部结构的更详细的答案`exec`，`eval`以及Python 中的 eval、exec 和 compile`compile`有[什么区别？](https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile-in-python/29456463#29456463)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T22:17:56.623

[在 Antti 发布他的回答](https://stackoverflow.com/a/29876520/4794)Python 2 support the Python 3 [exec function syntax](https://docs.python.org/2/reference/simple_stmts.html#the-exec-statement)之前，我找到了几个这样做的选项。

> 第一个表达式也可以是长度为 2 或 3 的元组。在这种情况下，必须省略可选部分。形式`exec(expr, globals)`等价于`exec expr in globals`，而形式`exec(expr, globals, locals)`等价于`exec expr in globals, locals`。exec 的元组形式提供了与 Python 3 的兼容性，其中 exec 是一个函数而不是语句。

如果您出于某种原因不想使用它，这里是我找到的所有其他选项。

**导入存根**

您可以声明两个不同的导入存根并导入与当前解释器一起使用的任何一个。这是基于我在 PyDev 源代码中看到的。

这是您在主模块中放入的内容：

```
try:
    from exec_python2 import exec_code #@UnusedImport
except:
    from exec_python3 import exec_code #@Reimport 
```

这是您放入的内容`exec_python2.py`：

```
def exec_code(source, global_vars, local_vars):
    exec source in global_vars, local_vars 
```

这是您放入的内容`exec_python3.py`：

```
def exec_code(source, global_vars, local_vars):
    exec(source, global_vars, local_vars) 
```

**在 Eval 中执行**

[Ned Batchelder](http://nedbatchelder.com/blog/200910/running_the_same_code_on_python_2x_and_3x.html)发布了一种将语句包装`exec`在调用中的技术，`eval`因此它不会在 Python 3 中导致语法错误。它很聪明，但不清楚。

```
# Exec is a statement in Py2, a function in Py3

if sys.hexversion > 0x03000000:
    def exec_function(source, filename, global_map):
        """A wrapper around exec()."""
        exec(compile(source, filename, "exec"), global_map)
else:
    # OK, this is pretty gross.  In Py2, exec was a statement, but that will
    # be a syntax error if we try to put it in a Py3 file, even if it isn't
    # executed.  So hide it inside an evaluated string literal instead.
    eval(compile("""\
def exec_function(source, filename, global_map):
    exec compile(source, filename, "exec") in global_map
""",
    "<exec_function>", "exec"
    )) 
```

**六包**

六[包](http://packages.python.org/six/)是一个兼容性库，用于编写可在 Python 2 和 Python 3 下运行的代码。它具有可转换为两个版本的[`exec_()`功能。](http://packages.python.org/six/#six.exec_)我没试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-28T20:16:42.840

我需要这样做，我不能使用六个，而且我的 Python 版本不支持 @Antti 的方法，因为我在带有自由变量的嵌套函数中使用了它。我也不想要不必要的进口。这就是我想出的。这可能需要在模块中，而不是在方法中：

```
try:
  # Try Python2.
  _exec_impls = {
    0: compile('exec code', '<python2>', 'exec'),
    1: compile('exec code in _vars[0]', '<python2>', 'exec'),
    2: compile('exec code in _vars[0], _vars[1]', '<python2>', 'exec'),
  }

  def _exec(code, *vars):
    impl = _exec_impls.get(len(vars))
    if not impl:
      raise TypeError('_exec expected at most 3 arguments, got %s' % (len(vars) + 1))
    return eval(impl, { 'code': code, '_vars': vars })

except Exception as e:
  # Wrap Python 3.
  _exec = eval('exec') 
```

之后，`_exec`像 Python3 版本一样工作。你可以给它一个字符串，也可以通过`compile()`. 它不会得到你可能想要的全局变量或局部变量，所以将它们传入：

```
def print_arg(arg):
  def do_print():
    print(arg)
  _exec('do_print(); do_print(); do_print()', globals(), locals())

print_arg(7)  # Prints '7' 
```

或不。我是 StackOverflow 的帖子，不是警察。

**更新：**

你为什么不直接使用`eval()`？ `eval()`期望*表达式*，而`exec()`期望*语句*。如果您刚刚得到一个表达式，那么使用什么并不重要，因为所有有效的表达式都是有效的语句，但反之则不成立。仅仅执行一个方法就是一个表达式，即使它没有返回任何东西；有一个隐含的`None`返回。

这通过尝试 eval 来证明`pass`，这是一个语句：

```
>>> exec('pass')
>>> eval('pass')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1
    pass
       ^
SyntaxError: unexpected EOF while parsing 
```*

# jquery - 在某些页面的标题中插入细节 js - 活动管理员

> ID：12809237
> 
> 赞同：3
> 
> 时间：2012-10-09T22:18:07.863
> 
> 标签：jquery, ruby-on-rails, highcharts, activeadmin, head

我使用活动管理员，在我的应用程序中，必须在特定页面（不是全部）中加载不同的 .js。

关注此主题[在 Rails 3 应用程序中添加特定于页面的 javascript 的最佳方式是什么？](https://stackoverflow.com/questions/3437585/best-way-to-add-page-specific-javascript-in-a-rails-3-app?answertab=votes#tab-top)看起来很简单，但活动管理员中的布局已编译。

我使用了一种解决方法来覆盖页脚：

```
 class ActiveAdmin::Views::Pages::Base < Arbre::HTML::Document
 private
  # Renders the content for the footer
  def build_footer
    div :id => "footer" do
      para "Copyright &copy; #{Date.today.year.to_s}- All rights reserved ".html_safe
    end
  end
end 
```

如何在某些页面的标题中添加一些 .js？如何解决？（如果可能的话，使用“yield :head”或类似的东西，所以我可以从任何地方更容易地调用它；））

编辑注意：我想要包含的 js 呈现一个 highcharts

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T05:44:05.753

我正在使用 ActiveAdmin 0.5.0 的主分支（截至 2012 年 11 月 23 日），并且有一个`within`适用于我的 Arbre 构建器方法。

```
show do 
   within @head do
      script :src => javascript_path('somefile.js'), :type => "text/javascript"
   end
end 
```

您可以在 中查看其使用示例`ActiveAdmin::Views::Pages::Base#build_active_admin_head`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:29:06.327

我找到了一个“替代”解决方案，基本的解决方案：只需将脚本插入带有 jquery 标记 $(document).ready(...) 的 html 正文中（但会降低性能和干编码）

# c# - 添加到按钮的 Click 事件时，为什么要创建一个新的 RoutedEventHandler？

> ID：12809241
> 
> 赞同：2
> 
> 时间：2012-10-09T22:18:34.040
> 
> 标签：c#, visual-studio, intellisense

有什么区别：

```
this.btnConnect.Click += btnConnect_Click; 
```

和：

```
this.btnConnect.Click += new RoutedEventHandler(btnConnect_Click); 
```

无论哪种方式似乎都一样，但是 Visual Studio IntelliSense 插入了第二个示例，我很好奇为什么。

我最初的猜测是，使用 IntelliSense 版本可以让每个按钮调用它自己的 实例`RoutedEventHandler`，使其成为线程安全的？并且使用第一个示例，然后每个按钮将调用该方法的相同实例，并且它们可能会踩到彼此的脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:21:18.090

这是同一件事，第一个只是一个语法糖，即编译器为两者生成相同的 IL 字节码——总是创建一个委托实例。

IIRC，C# 的第一个版本不允许第一种语法，它是在 C# 2.0 中引入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T03:35:04.907

您还可以使用 Lambda 来新建一个 RoutedEventHandler：

```
 new RoutedEventHandler(
            (sendItem, args) =>
            {
                //things you want to do
                IsTopMost = !IsTopMost;
                this.Topmost = IsTopMost;
                ((MenuItem) sendItem).Header = menuWords[0, ++menuClickCount[0]%2];
            }) 
```

# matlab - 在编译的 matlab 代码之间切换控制

> ID：12809247
> 
> 赞同：0
> 
> 时间：2012-10-09T22:19:08.813
> 
> 标签：matlab, matlab-compiler

所以我有两段编译的matlab代码（在exe中）。我想要以下行为：

一个exe文件（exefile1）调用另一个，使用'system（'exefile2'）'。另一个文件（exefile2）运行并在完成其功能后，将控制权返回给调用文件（exefile1）。但由于某种原因，exefile2 并没有返回控制，而只是完成并返回到命令提示符。他们是实现我想要的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:21:31.717

您没有在描述中提供很多细节，但是我尝试了以下方法，效果很好。

第一个脚本（hello.m）：

```
try
    disp('hello');
    system('hi.exe');
    disp('hello');
catch
    fprintf('%s', exc.getReport('extended'))
end 
```

第二个脚本（hi.m）：

```
try
    disp('hi')
catch
    fprintf('%s', exc.getReport('extended'))
end 
```

try-catch 在这里有点不必要，但在编译时它总是有帮助的。无论如何，基本思想是：

```
hello starts
hello prints hello
hello starts hi
hi prints hi and returns
hello prints hello again
end 
```

我将这两个脚本编译为**控制台应用程序**并在命令提示符下运行它，它工作正常：

```
hello
hi
hello 
```

所以我不确定你的具体问题是什么，但基本的想法很好......

# primefaces - 隐藏 primefaces 表列标题

> ID：12809250
> 
> 赞同：11
> 
> 时间：2012-10-09T22:19:47.740
> 
> 标签：primefaces, hide, treetable, columnheader

我有 ap:treeTable 并且树内容都在一列中。树是一个共享组件，所以我的一些页面需要列标题，而有些则不需要。在 columnHeader 为空的页面中，它为列标题创建了一个空行，这是我不想要的。我确实想要列内容，而不是没有列标题时的标题。

我怎样才能解决这个问题？任何指针/想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T05:07:26.347

您可以通过将 thead display 属性设置为 none 来使用自定义 CSS 解决这个问题：

例子：

```
div[id="testForm:first"] thead {
    display:none;
} 
```

如果您的 JSF 与此类似：

```
<h:form id="testForm">
    <p:dataTable id="first">
        ...
    <p:/dataTable>
</h:form> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-05T19:33:57.860

如果您`<p:dataTable>`使用这样的列宽

```
<p:dataTable styleClass="myTable">
   <p:column width="100"> 
```

并且您使用以下 CSS 隐藏列标题

```
.myTable thead {
    display:none;
} 
```

您还将丢失您设置的列宽

* * *

隐藏列标题并保持列宽的解决方案

```
.myTable thead th { 
    border: none !important; 
    background: none !important; 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-25T17:59:51.153

更正式的解决方案：

标签：

```
<p:treeTable styleClass="tree-table-no-header"> 
```

风格：

```
.tree-table-no-header thead {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-22T20:45:34.017

您可能会发现您需要更具体地使用样式选择器：

```
 div[id$="myTableId"]>div>table>thead { display:none; } 
```

这也消除了引用您的表单 ID 的需要。'$' 以通配符开头，'>' 表示仅选择直接子级。请参阅[http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)以获得非常好的 CSS 选择器参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-05T07:53:50.650

隐藏标题（与其他答案相同）：

```
.hide-table-header thead {
    display: none;
} 
```

...并指定列宽：

```
<p:dataTable styleClass="hide-table-header">
        <p:column style="width: 80px"> 
```

这些不适用于 reflow="true" 表。

对我来说，边框：无，背景：无建议在表格上方留下一个空白空间，并隐藏表格的左侧边框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-13T13:13:26.507

将此代码添加到您的 css3 文件中

```
** Remove the header from the dataTable**/
.ui-datatable.borderless thead {
  display: none;
}

/** Remove the border from the dataTable **/
.ui-datatable.borderless tbody,
.ui-datatable.borderless tbody tr,
.ui-datatable.borderless tbody td {
    border-style: none;
    } 
```

然后从 xhtml 文件中调用此代码，如下所示：

```
<p:dataTable styleClass="borderless"> 
```

# ios - 在手势期间切换对象（拖放）

> ID：12809256
> 
> 赞同：3
> 
> 时间：2012-10-09T22:20:23.637
> 
> 标签：ios, cocoa-touch, drag-and-drop, uigesturerecognizer

我正在创建一个带有拖放可重新排列事件的日历。

视图层次结构如下所示：
ViewController - ScrollView - CalendarWeekView - EventView

scrollView 启用了分页，我一次显示一周。为了实现跨周的连续滚动，我在滚动时回收了三个 WeekCalendarView 对象。各个 EventView 是 CalendarWeekView 的子视图。

我希望能够将一个 EventViews 从一个星期拖放到另一个星期。

我在可见的一周内通过 EventViews 上的 UILongPressGestureRecognizer 设置进行了拖放操作。我在 WeekView 中添加了“热边缘”来触发滚动，这样我就可以从当前一周拖放到它工作的任一侧。

但是，如果我从最初的一周开始滚动超过一周，则会发生视图回收，并且创建并“拥有”我正在拖动的 EventView 的 WeekView 将被回收（属性重置）。我正在拖动的事件对象被重置并重用，从而终止了拖动行为（或者充其量改变了被拖动的事件！）。

我想我需要将拖动视图与 WeekViews 分离，在拖动时为我的事件创建一个新对象。

如何将 EventView 中的长按手势事件传递给这个新对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:28:36.177

> 如何将 EventView 中的长按手势事件传递给这个新对象？

正如您所建议的那样：D 您可以使用`addTarget:action:`并`removeTarget:action:`调整手势识别器调用的对象上的方法。如果您愿意，您甚至可以同时拥有多个目标。

在你的情况下，你可能想要这样的东西：

```
[g removeTarget:self action:NULL]; // Remove everything that this object added
[g addTarget:newObject action:newSEL]; 
```

* * *

编辑：由于您正在拖动特定的 EventView，而不是创建一个新的 EventView 并处理洗牌 GR，因此请尝试将拖动的 EventView 移动到另一个超级视图（可能是滚动视图，尽管我什至将 UIWindow 用于这种事物）。

# asp.net - 使用 Web.Config 转换插入多个项目

> ID：12809264
> 
> 赞同：6
> 
> 时间：2012-10-09T22:21:08.503
> 
> 标签：asp.net, web-config, web-config-transform

我有一个 C# 项目，它引用了很多 WCF 服务。对于本地测试，我想替换身份标签的内容，以便它接受在 localhost 上运行的任何内容。

以下转换有效，但仅在第一个匹配位置插入 dns 元素。所以，如果我有 5 个端点被引用，一个会有 dns 标签，而其他的都有空的标识元素。

```
<system.serviceModel>
    <client>
      <endpoint>
        <identity>
          <dns xdt:Transform="Insert" value="localhost"/>
          <userPrincipalName xdt:Transform="RemoveAll" value="someIdentity" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

如何更改所有匹配元素，而不仅仅是第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:54:14.577

使用该`xdt:Locator`属性定义 XPath 表达式以匹配`<identity>`您要插入的所有元素。

```
 <system.serviceModel>
    <client>
      <endpoint>
        <identity xdt:Locator="XPath(//identity)">
          <dns xdt:Transform="Insert" value="localhost"/>
          <userPrincipalName xdt:Transform="RemoveAll"/>
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

# perl - Perl 调试器各种输出

> ID：12809265
> 
> 赞同：-1
> 
> 时间：2012-10-09T22:21:15.393
> 
> 标签：perl, debugging

在编写脚本时，我注意到一些非常奇怪的 Perl 行为。任务是修剪存储在变量中的字符串的最后一个字符`$temp1`，这可以使用一个`chop($temp1)`或更复杂`substr($temp1, 0, length($temp1) - 1)`的 . 这些都作为单线工作，但在我的脚本中，`substr`解决方案不起作用。以下是调试器的示例：

# 第一个问题：

# 第一个解决方案 - 不工作：

```
main::(delmid_n.pl:24):     if (($state == 0) && ($_ !~ $musr) && ($_ !~ $lusr)) {
>> n
main::(delmid_n.pl:54):         $strprn=substr($temp1, 0, length($temp1) - 1);
>> p $temp1
                (-,user2,t-mobile.co.uk)\

>> p substr($temp1, 0, length($temp1) - 1) . "\n";
                (-,user2,t-mobile.co.uk)

  DB<4> 
main::(delmid_n.pl:55):     print $strprn . "\n";
  DB<4> 

main::(delmid_n.pl:56):         $temp1 = "";
  DB<4> 
```

正如您在`$strprn`变量中看到的那样，没有存储任何内容。如果通过“p”命令打印相同的代码（存储在`$strprn`变量中），则输出正常。可以使用上述`chop()`功能克服此“错误”（请参见下面的代码）：

# 第二种解决方案 - 工作：

```
main::(delmid_w.pl:24):     if (($state == 0) && ($_ !~ $musr) && ($_ !~ $lusr)) {
>> p $temp1
                (-,user2,t-mobile.co.uk)\

  DB<4> n
main::(delmid_w.pl:56):     chop ($temp1);
  DB<4> n
main::(delmid_w.pl:57):     print $temp1;
  DB<4> n
                (-,user2,t-mobile.co.uk)
main::(delmid_w.pl:58):         $temp1 = "";
  DB<4> 
```

上面的代码与第一个示例完全相同，但以下两行来自第一个示例：

```
$strprn=substr($temp1, 0, length($temp1) - 1);
print $strprn . "\n"; 
```

在第二个示例中替换为以下两行：

```
chop ($temp1);
print $temp1; 
```

第二种解决方案有什么问题？

# 第二个问题：

到目前为止，这是一个我没有解决方法的问题。

```
 DB<1> 
main::(delbeg_n.pl:15): $state = 0;
  DB<1> 
main::(delbeg_n.pl:16): $muser = qr/\(-,user1,[^,]+\.co\.uk\)\\$/;
  DB<1> 
main::(delbeg_n.pl:19): line: while (<>) {
  DB<1> 
main::(delbeg_n.pl:20):     chomp;      # strip record separator
  DB<1> 
main::(delbeg_n.pl:21):     @Fld = split(/\s+/, $_,);
  DB<1> 
main::(delbeg_n.pl:23):     if (($state == 0) && ($Fld[1] =~ $muser)) {
  DB<1> p $Fld[1]        
(-,user1,one2one.co.uk)\

  DB<2> n
main::(delbeg_n.pl:43):         print $_;
  DB<2> p $_
netgroup1       (-,user1,one2one.co.uk)\

  DB<3> if ($Fld[1] =~ $muser) {print "TRUE"}
TRUE 
```

正如您在代码中执行第 21 行后所看到的，下一个执行行是第 43 行（else 语句）。为什么以下条件没有被评估为真，允许代码从第 23、24、25 行继续？

```
if (($state == 0) && ($Fld[1] =~ $muser)) 
```

插入以下行是为了证明条件应该被评估为真：

```
if ($Fld[1] =~ $muser) {print "TRUE"} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:24:10.203

这两个问题是相关的。行尾有一些奇怪的东西。

首先，看起来你在行尾的斜线后面有一个换行符，你没有把它切掉——至少调试器显示的是这样的：

```
>> p $temp1
                (-,user2,t-mobile.co.uk)\

  DB<4> n 
```

如果没有换行符，它将是

```
>> p $temp1
                (-,user2,t-mobile.co.uk)\
  DB<4> n 
```

所以，应该有两个字符：`\`和换行符。

为什么会出现这种奇怪的行为 - 如果不查看您的输入文件，我不知道。

此外，您可以不使用字符串长度，而是执行`substr( $string, 0, -1 )`-- 这也将返回除最后一个字符之外的所有字符。

这可能是您的第二个问题的原因——我猜这是匹配的，它是导致不匹配`\(-,user1,[^,]+\.co\.uk\)\\`的行尾标记。`$`

*   `use strict`请
*   检查文件类型（dos、unix、旧 mac）
*   在十六进制编辑器中查看文件

# javascript - 画布：大圆圈内的球应该偏转

> ID：12809266
> 
> 赞同：0
> 
> 时间：2012-10-09T22:21:15.977
> 
> 标签：javascript, canvas, html5-canvas

我有一个小圆圈，在一个更大的圆圈内。小圆圈在飞来飞去，如果小圆圈到达大圆圈的边界，它应该会发生碰撞。我几乎设法做到了，但它仍然不能完美地工作。有时圆在边界之前碰撞，有时在边界之后。这是我的代码：

```
 if (!(Math.pow((xSmallCircle + radiusSmallCircle) - (xBigCircle), 2) + Math.pow((
    ySmallCircle + radiusSmallCircle) - yBigCircle, 2) < Math.pow(radiusBigCircle + 10, 2))) {
                                    xVelocity *= -1;
                                    yVelocity *= -1;
    } else if (!(Math.pow((xSmallCircle - radiusSmallCircle) - (xBigCircle), 2) + Math.pow((
    ySmallCircle - radiusSmallCircle) - yBigCircle, 2) < Math.pow(radiusBigCircle + 10, 2))) {
                                        xVelocity *= -1;
                                        yVelocity *= -1;
    } else if (!(Math.pow((xSmallCircle + radiusSmallCircle) - (xBigCircle), 2) + Math.pow((
    ySmallCircle - radiusSmallCircle) - yBigCircle, 2) < Math.pow(radiusBigCircle + 10, 2))) {
                                        xVelocity *= -1;
                                        yVelocity *= -1;              
    } else if (!(Math.pow((xSmallCircle - radiusSmallCircle) - (xBigCircle), 2) + Math.pow((
    ySmallCircle + radiusSmallCircle) - yBigCircle, 2) < Math.pow(radiusBigCircle + 10, 2))) {
                                        xVelocity *= -1;
                                        yVelocity *= -1;
                        } 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:48:14.927

这是因为您只在四个点检查碰撞，实际上都在内圈之外。尝试一种更简单且数学上正确的碰撞检测机制。

```
var sep = Math.sqrt(
      Math.pow(xSmallCircle-xBigCircle, 2) 
      + Math.pow(ySmallCircle-yBigCircle, 2)
);
if( sep + radiusSmallCircle + borderWidthSmallCircle >= radiusBigCircle ){
    //You have a collision Here
} 
```

这里的逻辑是，如果你计算每个圆的中心之间的线段的长度，并加上小圆的半径，你会得到最小圆的半径，即（a）与外圆同心， (b) 完全包围较小的圆圈。如果那个圆比你的外圆更大或大小相同，你就会发生碰撞。

如果您仍然有不精确的碰撞，则可能是舍入错误。

# android - 选择联系人并检索电话号码

> ID：12809274
> 
> 赞同：0
> 
> 时间：2012-10-09T22:21:49.697
> 
> 标签：android

我正在尝试获取用于选择联系人并检索电话号码的代码。我发现一段代码在模拟器（android 版本 2.3.3）和我兄弟的手机（果冻豆）上运行良好，但在我自己的设备上运行良好（android 2.3.4）

这是代码：转到联系人

```
 public void onClick(View arg0) {
        // TODO Auto-generated method stub
         Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
         intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
         startActivityForResult(intent, 1);      
    } 
```

从联系人回来时：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (data != null) {
        Uri uri = data.getData();

        if (uri != null) {
            Cursor c = null;
            try {
                c = getContentResolver().query(uri, new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER},
                        null, null, null);

                if (c != null && c.moveToFirst()) {
                    String number = c.getString(0);
                    //int type = c.getInt(1);
                    showSelectedNumber(0, number);
                }
            } finally {
                if (c != null) {
                    c.close();
                }
            }
        }
    }
}

public void showSelectedNumber(int type, String number) {
    Toast.makeText(this,number, Toast.LENGTH_LONG).show();      
} 
```

同样，这适用于模拟器（android 2.3.4）和果冻豆，但不适用于我的设备（android 2.3.5）

这是从日志中得出的：

```
10-10 22:07:15.775: E/AndroidRuntime(5075): FATAL EXCEPTION: main
10-10 22:07:15.775: E/AndroidRuntime(5075): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/data/2848 (has extras) }} to activity {com.example.omer/com.example.omer.SmsInfo}: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.HtcContactsProvider2 uri content://com.android.contacts/data/2848 from pid=5075, uid=10125 requires android.permission.READ_CONTACTS
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.ActivityThread.deliverResults(ActivityThread.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.ActivityThread.handleSendResult(ActivityThread.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.ActivityThread.access$2000(ActivityThread.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.os.Handler.dispatchMessage(Handler.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.os.Looper.loop(Looper.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.ActivityThread.main(ActivityThread.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at java.lang.reflect.Method.invokeNative(Native Method)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at java.lang.reflect.Method.invoke(Method.java:507)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at dalvik.system.NativeStart.main(Native Method)
10-10 22:07:15.775: E/AndroidRuntime(5075): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.HtcContactsProvider2 uri content://com.android.contacts/data/2848 from pid=5075, uid=10125 requires android.permission.READ_CONTACTS
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.os.Parcel.readException(Parcel.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.content.ContentProviderProxy.query(ContentProviderNative.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.content.ContentResolver.query(ContentResolver.java)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at com.example.omer.SmsInfo.onActivityResult(SmsInfo.java:87)
10-10 22:07:15.775: E/AndroidRuntime(5075):     at android.app.Activity.dispatchActivityResult(Activity.java) 
```

10-10 22:07:15.775: E/AndroidRuntime(5075): ... 12 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:13:03.920

好的..刚刚得到它我必须向清单文件添加权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:11:55.930

根据错误信息：

> java.lang.RuntimeException：将结果 ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/data/2848 (has extras) }} 传递给失败活动 {com.example.omer/com.example.omer.SmsInfo}：java.lang.SecurityException：权限拒绝：读取 com.android.providers.contacts.HtcContactsProvider2 uri content://com.android.contacts/data/2848从 pid=5075, uid=10125 需要 android.permission.READ_CONTACTS

您需要添加权限`android.permission.READ_CONTACTS`

# mysql - mysql内部连接语句错误

> ID：12809276
> 
> 赞同：0
> 
> 时间：2012-10-09T22:22:06.017
> 
> 标签：mysql, inner-join

我收到以下错误：

> 1052 - 字段列表中的列“product_id”不明确

当我运行以下命令时：

```
SELECT `product_id`, `product_name`
FROM `products`
INNER JOIN `products_has_product_category`
   ON `products.product_id` = `products_has_product_category.product_id`
   AND `products_has_product_category.category_id` = 1
ORDER BY `products.product_name` 
```

我的`PRODUCTS`桌子有

```
product_id, product_name, etc 
```

我的`products_has_product_category`桌子有

```
product_id, category_id 
```

这是我第一次尝试加入，所以我很感激帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:24:09.960

您需要指定`product_id`来自哪个表。由于`product_id`在两个表中，当您使用`SELECT`它时，您需要指定要从哪个表中获取值。使用表别名：

```
SELECT p.product_id, p.product_name
FROM `products` p
INNER JOIN `products_has_product_category` pc
    ON p.product_id = pc.product_id
    AND pc.category_id = 1
ORDER BY p.product_name 
```

没有表别名：

```
SELECT `products`.`product_id`, `products`.`product_name`
FROM `products`
INNER JOIN `products_has_product_category`
  ON `products.product_id` = `products_has_product_category.product_id`
  AND `products_has_product_category.category_id` = 1
ORDER BY `products.product_name` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:24:17.497

如果我正确理解您的意图，您可能指的是 WHERE 而不是 AND：

```
SELECT `products`.`product_id`, `products`.`product_name`
          FROM `products`
          INNER JOIN `products_has_product_category`
          ON `products.product_id` = `products_has_product_category.product_id`
          WHERE `products_has_product_category.category_id` = 1
          ORDER BY `products.product_name` 
```

# ruby-on-rails - 在 Rails 中更新没有回调的序列化属性

> ID：12809278
> 
> 赞同：5
> 
> 时间：2012-10-09T22:22:14.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用同一对象的 after_save 回调中的一些数据更新序列化属性。

由于各种原因（副作用、无限循环），我不希望触发任何回调。实现这一点的典型方法是使用*`update_column`*，但不幸的是，这不适用于序列化属性。

我知道我可以在我的回调上设置条件以避免再次调用它们，但感觉应该有一种 update_attribute 形式，它不会触发回调，但仍然适用于序列化属性。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:01:28.423

这就是我所做的

```
serialize :properties, Hash

def update_property(name, value)
  self.properties[name] = value
  update_column(:properties, properties)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-15T14:55:35.873

下面分享一个示例，如何在不使用回调的情况下更新序列化属性。

假设您有一个火车对象，并且该表中有一个名为“running_weekdays”的序列化属性，该属性存储特定火车在哪一天运行。

```
train = Train.last
train.running_weekdays
=>  {"Mon"=>"true", "Tues"=>"true", "Wedn"=>"true", "Thur"=>"true", "Frid"=>"true", "Sat"=>"true", "Sun"=>"true"} 
```

现在假设您要将除“星期一”之外的所有工作日的值设置为 false

```
changed_weekdays = {"Mon"=>"true", "Tues"=>"false", "Wedn"=>"false", "Thur"=>"false", "Frid"=>"false", "Sat"=>"false", "Sun"=>"false"} 
```

现在您可以使用 update_column 来更新它，如下所示：

```
train.update_column(:running_weekdays,  train.class.serialized_attributes['running_weekdays'].dump(changed_weekdays)) 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T10:05:49.260

您需要在更新列之前对哈希进行编码：

```
update_column(:properties, self.class.serialized_attributes['properties'].dump(properties)) 
```

# database - 查询超过 15m 行的最佳方法？

> ID：12809281
> 
> 赞同：3
> 
> 时间：2012-10-09T22:22:31.757
> 
> 标签：database, postgresql, solr, replication, scalability

我有一个在 Postgresql 中有超过 15m 行的表。用户可以将这些行（比如项目）保存到他们的库中，当他们请求他们的库时，系统会加载用户的库。

Postgresql 中的查询就像

```
SELECT item.id, item.name 
FROM items JOIN library ON (library.item_id = item.id) 
WHERE library.user_id = 1 
```

，该表已经被索引和非规范化，所以我不需要任何其他 JOIN。

如果用户在库中有很多项目（如 1k 项目），则查询时间通常会增加。（例如对于 1k 个项目，查询时间为 7 秒）我的目标是减少大型数据集的查询时间。

我已经使用 Solr 进行全文搜索，我尝试过类似的查询，`?q=id:1 OR id:100 OR id:345`但我不确定它在 Solr 中是否有效。

我想知道查询此数据集的替代方法。我系统的瓶颈似乎是磁盘速度。我应该购买具有超过 15gb 内存的服务器并在增加`shared_memory`选项中使用 Postgresql，还是尝试使用 Mongodb 或其他基于内存的数据库，或者我应该创建一个集群系统并在 Postgresql 中复制数据？

```
items:
    Column    |       Type        
 --------------+-------------------
  id           | text              
  mbid         | uuid              
  name         | character varying
  length       | integer          
  track_no     | integer          
  artist       | text[]            
  artist_name  | text            
  release      | text              
  release_name | character varying
  rank         | numeric          

user_library:

    Column    |            Type             |                              Modifiers
--------------+-----------------------------+--------------------------------------------------------------
 user_id      | integer                     | not null
 recording_id | character varying(32)       |
 timestamp    | timestamp without time zone | default now()
 id           | integer                     | primary key nextval('user_library_idx_pk'::regclass)

-------------------

explain analyze 
SELECT recording.id,name,track_no,artist,artist_name,release,release_name
FROM recording JOIN user_library ON (user_library.recording_id = recording.id)
WHERE user_library.user_id = 1;

 QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=0.00..10745.33 rows=1036539 width=134) (actual time=0.168..57.663 rows=1000 loops=1)
   Join Filter: (recording.id = (recording_id)::text)
   ->  Seq Scan on user_library  (cost=0.00..231.51 rows=1000 width=19) (actual time=0.027..3.297 rows=1000 loops=1) (my opinion: because user_library has only 2 rows, Postgresql didn't use index to save resources.)
         Filter: (user_id = 1)
   ->  Append  (cost=0.00..10.49 rows=2 width=165) (actual time=0.045..0.047 rows=1 loops=1000)
         ->  Seq Scan on recording  (cost=0.00..0.00 rows=1 width=196) (actual time=0.001..0.001 rows=0 loops=1000)
         ->  Index Scan using de_recording3_table_pkey on de_recording recording  (cost=0.00..10.49 rows=1 width=134) (actual time=0.040..0.042 rows=1 loops=1000)
               Index Cond: (id = (user_library.recording_id)::text)
 Total runtime: 58.589 ms
(9 rows) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:27:02.507

首先，如果您的有趣（常用）数据集可以舒适地适应内存以及所有索引，那么您将获得更好的性能，所以是的，更多的 RAM 会有所帮助。但是，对于 1k 条记录，您的部分时间将用于具体化记录并将它们发送给客户。

其他几个初始点：

1.  没有什么可以替代真实的剖析。您可能会对时间花在哪里感到惊讶。在 PostgreSQL 上，使用解释分析对查询进行分析。
2.  查看游标和限制/偏移量。

在这些完成之前，我认为没有人能提出更好的建议。

# php - 如何为每个文本输入编写 $_POST 方法

> ID：12809282
> 
> 赞同：4
> 
> 时间：2012-10-09T22:22:43.237
> 
> 标签：php, javascript, html

我有一堆表格行，每行将包含一堆文本输入。现在下面是可能输入的名称属性，它在每个表行中包含自己的值：

```
answerAvalue = A
answerBvalue = B
answerCvalue = C
answerDvalue = D
answerEvalue = E

... //all the way to answerZvalue = Z

answerTruevalue = True
answerFalsevalue = False
answerYesValue = Yes
answerNovalue = No 
```

每个表格行还包含一些单选按钮，如下所示：

```
<input type="radio" name="reply" />= = Single
<input type="radio" name="reply" />= = Multiple 
```

因此，假设我遍历每个表行并检索每行中选择的每个单选按钮的值，那么代码如下：

```
$i = 0;
$c = count($_POST['gridValues']); //counts number of appended rows

for($i = 0;  $i < $c; $i++ ){ //for each loop which goes through each row

switch ($_POST['reply'][$i]){ 

case "single": 
$selected_reply = "Single"; 
break; 

case "multiple": 
$selected_reply = "Multiple"; 
break; 

default: 
$selected_reply = ""; 
break; 

} 
```

但是我的问题是，因为每个文本输入都有自己的名称属性，那么我该如何编写代码来实现与上面相同的功能，但显然是针对文本输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:27:34.227

```
foreach($_POST as $key=>$value)
echo $key."=>".$value; //key is for example "reply" and value f.e. "2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:47:05.233

```
foreach($_POST as $key=>$value)
{
  if(is_array($value))
  {
     foreach($value as $k => $v)
     {
       echo k."=>".$v; 
     }
  }
  else
  {
     echo $key."=>".$value; 
  }
} 
```

# c# - 如何实现 Casle Windsor 安装程序来安装不同的模块进行调试和发布？

> ID：12809284
> 
> 赞同：0
> 
> 时间：2012-10-09T22:22:53.957
> 
> 标签：c#, castle-windsor

我有许多典型的温莎城堡安装程序，例如：

```
public class StrategyInstaller : IWindsorInstaller
{
    #region IWindsorInstaller Members

    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component.For<INavigationStrategy>()
                               .ImplementedBy<NavigationStrategy>()
                               .LifestylePerWebRequest()); 
```

我的问题是，当我处于调试模式和发布模式时，如何安装不同的（例如策略）？

（这适用于仅在发布环境中可用的依赖项）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:15:41.803

如果是我，我不希望编译后的代码在调试和发布之间有所不同。这在推出您的发行版时可能会造成相当大的破坏，这是您第一次真正运行发行版二进制文件。话虽如此，您的观点是正确的，您有时需要实例化类的存根版本而不是真实版本。

这需要设置更多，但我建议您制作一个包含真实实现（例如连接到真实数据库）的程序集和另一个包含存根实现的程序集（例如返回硬编码或基于配置的数据库-像价值观）。然后有一个配置值告诉您的应用程序要加载哪个程序集。这样，真实实现和存根实现都可以在调试和发布模式下编译，并且您可以在两种环境中交换程序集。这对于测试生产中的问题也很有用，你想测试一些东西，但实际上并没有让它真正实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T22:32:55.350

根据评论使用以下内容进行编辑：

```
#if DEBUG
    container.Register(Component.For<INavigationStrategy>()
                           .ImplementedBy<NavigationStrategy>()
                           .LifestylePerWebRequest());
#else
    container.Register(Component.For<INavigationStrategy>()
                           .ImplementedBy<DebugNavigationStrategy>()
                           .LifestylePerWebRequest());        
#endif 
```

# typescript - TypeScript 函数箭头表达式返回对象

> ID：12809285
> 
> 赞同：66
> 
> 时间：2012-10-09T22:23:00.373
> 
> 标签：typescript

我有这样的情况：

```
interface MoverShaker {
    getStatus(): { speed: number; frequency: number; };
}

function GetMoverShaker() : MoverShaker {
    return {
        getStatus: () => { speed: 2, frequency: 3 }
    }
} 
```

我收到这样的错误：当前范围内不存在名称“频率”。在 TypeScript 中可以进行这样的构造吗？如果我使用这样的结构，那么一切都很好：

```
function GetMoverShaker(): MoverShaker {
    return {
        getStatus: () => {
             return { speed: 2, frequency: 3 }
        }
} 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-07-24T19:31:09.570

您可以添加括号：

```
() => ({x:1,y:2}) 
```

这使解析器明白 { 不是代码块的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T11:09:25.813

在您的第一条语句中，您没有返回对象。如果要忽略`return`返回 an 的箭头函数中的关键字，`object`则需要将直接返回的值包装在`()`.

这将使您的功能看起来像这样

```
function GetMoverShaker() : MoverShaker {
    return {
        getStatus: () => ({ speed: 2, frequency: 3 })
    }
} 
```

# matlab - MATLAB：运行 .m 文件时，命令窗口中仅显示文件名

> ID：12809294
> 
> 赞同：0
> 
> 时间：2012-10-09T22:24:03.470
> 
> 标签：matlab

一切工作正常，突然而不是正常运行我的所有 .m 文件开始在命令窗口中只生成文件名。发生了什么以及如何解决这个问题？重新启动 MATLAB 没有结果。

# nosql - NoSQL：从表 DynamoDB/Azure 表存储中获取最新值

> ID：12809295
> 
> 赞同：36
> 
> 时间：2012-10-09T22:24:08.417
> 
> 标签：nosql, amazon-dynamodb, azure-table-storage

我有一个小问题需要一些建议：

*   假设我们有几百个数据表，每个表有几千万行。
*   数据表是时间戳（键） - 值
*   数据表每秒写入一次

每个表的最新条目应该可以快速获得，并且很可能被查询最多（类似于“实时跟踪数据”）。由于缺少“Last()”或类似内容，我正在考虑创建另一个表“LatestValues”，其中更新每个数据表的最新条目以便更快地检索。但是，这将为每个写入操作添加额外的更新。此外，大部分流量将集中在这张桌子上（好/坏？）。有没有更好的解决方案或者我错过了什么？

另外，假设我们要查询数据表中的值。既然扫描显然是不可能的，那么唯一的选择是通过复制数据来创建二级索引，有效地使存储需求和写入操作量翻倍吗？还有其他解决方案吗？

我主要关注 DynamoDB 和 Azure 表存储，但我也很好奇 BigTable 是如何处理这个问题的。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-09T23:03:51.527

我今天刚刚发表了一篇文章，其中包含一些[关于 DynamoDB 的常见“食谱”](https://blog.yadutaf.fr/2012/10/07/common-dynamodb-questionsmisconceptionsrecipes/)。其中之一是“存储文章修订，始终保持最新”，我认为您可能会感兴趣 :)

简而言之，您可以使用`Query(hash_key=..., ScanIndexForward=True, limit=1)`

但是，这假设您有一个 range_key_defined。

使用`Scan`，您没有这样的参数`ScanIndexForward=false`，无论如何，您不能依赖顺序，因为数据分布在分区上，`Scan`然后请求被负载平衡。

要使用 DynamoDB 实现您的目标，您可以通过以下方式“拆分”您的时间戳：

1.  `hash_key`： 日期
2.  `range_key`：时间或完整的时间戳，你喜欢

然后，您可以使用`Query`++的“`Limit=1`技巧 ”`ScanIndexForward=false`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T22:47:59.133

通常，您可能只想反转时间戳，因此它会随着时间的推移而减少，将最新的行留在顶部。

这是我的一篇博客文章，概述了如何使用 Windows Azure 存储：http: [//blog.smarx.com/posts/using-numbers-as-keys-in-windows-azure](http://blog.smarx.com/posts/using-numbers-as-keys-in-windows-azure)。

**更新**

我将 DynamoDB 用于一个项目，但以一种非常简单的方式，所以我没有太多经验。也就是说，[http:](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/QueryAndScan.html) //docs.amazonwebservices.com/amazondynamodb/latest/developerguide/QueryAndScan.html 向我建议您可以指定`ScanIndexForward=false`并`Limit=1`获取最后一项。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-06-12T01:04:56.447

对于发现此线程但只关心 1 个表的人：

您可以通过单击列以按这些值排序来从 UI 中的表中获取最新项目。

# python - 我怎样才能把它分成两个字符串？

> ID：12809298
> 
> 赞同：0
> 
> 时间：2012-10-09T22:24:13.883
> 
> 标签：python, python-2.7, pyramid

*我是 Python 新手，我不确定我应该寻找什么，但我向你保证，我已经完成了我的研究，并且仍然为这个简单的问题想出了一个相当丑陋的 20 行长代码块。*

我正在使用基于 Pyramid 框架的应用程序处理遍历 URL。

现在，URL 可以是：（url = None）

1.  网址 = ""
2.  网址 = "/"
3.  网址 = "/block_1"
4.  url = "/block_1/"
5.  url = "/block_1/block_2"
6.  url = "/block_1/block_2/"

url 不能包含任何内容。在这种情况下，我希望我的函数返回 False、None 或空列表或元组。（不管是哪个。）（匹配选项 0 或 1）

Block_1：这是一个单词，a 到 Z 字符串。不能也不应该包含任何特殊字符。事实上，作为 block_1 获取的内容**应该在字典**（或列表）中，如果未找到，则应该引发并返回错误。如果 block_1 不存在或未找到，如上所述，该函数应返回 False、None 或空列表或元组。（匹配选项 2 和 3）

Block_2：Block_2 可以是任何东西。为简单起见，它可以包含任何语言的任何字符以及特殊字符，例如：()[]。如果我弄错了，请原谅，但我认为我想要的基本上是它匹配`[\pL\pN].*`，除了一个例外：它的最后一个字符不能是斜杠：既不是`"\"`也不是`"/"`。最好是，我希望它是`a to Z (including all languages' alphabets and their accented characters) along with some other characters from a list`（我在上面特别定义：（）和[]）。如果没有给出block_2，它应该有值None，如果它不匹配，它应该返回False。（匹配上面列出的最后 2 个选项）

我的代码开始于，相当原始，我为此道歉：

```
if not url: 
    return False
# then goes on evaluating the first charachter to see if it's a /
if fetch[0]  == '/':
    length = len(url)
    #then checks if there's a second / for the block_2
    slash_2 = fetch.find('/', 3) # or '/', 1
    if slash_2 == -1:
        block_1, block_2 = url[1:length].lower(), None
        # checks if block_1 is in a dictionary
        if not block_1 in the_dict:
            return False
    else: # if it's there it processes what's remaining
        block_1 = fetch[1:slash_2]
        block_2 = fetch[slash_2+1:]
        # then checks if there's another slash at the end of block_2
        if block_2[-1] == '/': # if so it removes it
            block_2 = block_2[:-1]
return False # otherwise returns false, which can be () or [] or None 
```

如果我的代码很糟糕而且过于复杂，我很抱歉。我只喜欢一种更优雅、更好的方法来做到这一点。

那么我该怎么做呢？我应该怎么做才能摆脱这些卡住的代码行？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:26:02.607

`split('/')`绝对应该使用它，这应该可以帮助您解析 URL。

如果这还不够，`urlparse`应该用来解析

```
urlparse.urlparse(path) 
```

```
In [31]: url = 'http://stackoverflow.com/questions/12809298/how-can-i-separate-this-into-two-strings/12809315#12809315'

In [32]: urlparse.urlparse(url)
Out[32]: ParseResult(scheme='http', netloc='stackoverflow.com', path='/questions/12809298/how-can-i-separate-this-into-two-strings/12809315', params='', query='', fragment='12809315')

In [33]: a = urlparse.urlparse(url)

In [34]: a.path
Out[34]: '/questions/12809298/how-can-i-separate-this-into-two-strings/12809315'

In [35]: a.path.split('/')
Out[35]: 
['',
 'questions',
 '12809298',
 'how-can-i-separate-this-into-two-strings',
 '12809315'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:26:15.250

我要尝试的第一件事是[`.split()`字符串函数](http://docs.python.org/library/stdtypes.html#str.split)：

```
>>> url = "/block_1/block_2"
>>> url.split("/")
['', 'block_1', 'block_2'] 
```

这将返回由字符分隔的字符串组件列表`/`。从那里，您可以使用该`len()`函数找出列表的长度，并根据您所需的逻辑采取适当的操作。

# cassandra - 使用 Kundera 在 Play 框架中连接到 Cassandra DB

> ID：12809303
> 
> 赞同：0
> 
> 时间：2012-10-09T22:24:49.657
> 
> 标签：cassandra, playframework-2.0, kundera

我尝试使用[Kundera](https://github.com/impetus-opensource/Kundera/wiki/Getting-Started-in-5-minutes)方法，但我不知道将 persistence.xml 放在哪里，我尝试将它放在 conf/WEB-INF/ 中，但是当我尝试运行它时说**“线程中的异常”主“javax.persistence.PersistenceException：没有名为 cassandra_pu 的 EntityManager 的持久性提供程序**。

有人可以告诉我哪里错了吗？有没有其他方法可以将 Cassandra 连接到 Play 2.0.4？
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:03:01.243

另一个选项是 cassandra 的 PlayOrm 几乎使用它的 playframework 插件完成。仍然需要做一个 playframework 模块并且它有内存版本以及快速开发。应该在下周末之前完成。

可以在此处找到有关带有 playframework 的 playorm 的文档

[https://github.com/deanhiller/playorm/wiki/PlayFramework-1.2.x-Support](https://github.com/deanhiller/playorm/wiki/PlayFramework-1.2.x-Support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:24:17.183

对于 Kundera，persistence.xml 通常应该在 $PROJECT_ROOT/src/META-INF/persistence.xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:05:35.730

请查看： [https](https://github.com/downloads/impetus-opensource/Kundera-Examples/project%20(1).zip) ://github.com/downloads/impetus-opensource/Kundera-Examples/project%20(1).zip 以供参考。

和

[https://github.com/impetus-opensource/Kundera/wiki/Getting-Started-in-5-minutes](https://github.com/impetus-opensource/Kundera/wiki/Getting-Started-in-5-minutes)

应该可以帮助您了解如何使用它。

-维维克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-06T11:39:55.630

它应该放在 conf/META-INF 文件夹下。下面的链接应该可以帮助您在 Play 中使用 kundera！

[http://techrecipes.in/2013/07/06/play-nosql-building-nosql-applications-with-play-framework/](http://techrecipes.in/2013/07/06/play-nosql-building-nosql-applications-with-play-framework/)

# python - Python Turtle 递归树

> ID：12809304
> 
> 赞同：3
> 
> 时间：2012-10-09T22:24:55.683
> 
> 标签：python, tree, turtle-graphics

我想用python的turtle编写一个程序来创建一个有层次的树。下面是一些 I/O，因此您可以看到它应该做什么。

![在此处输入图像描述](../Images/6f510da3fc54112306a92488b37a2a53.png)

我的程序适用于第一种情况，但为第二种情况打印太多。该计划的规定是：

*   必须是递归的

*   只能使用以下海龟函数：

    ```
    turtle.forward(100)     <-- turtle goes forward 100 steps
    turtle.right(90)        <-- turtle turns right 90 degrees
    turtle.penup()          <-- turtle lifts its pen up off of the paper
    turtle.forward(100)     <-- turtle goes forward 100 steps
    turtle.pendown()        <-- turtle puts its pen down on the paper
    turtle.pencolor("red")  <-- turtle uses red pen
    turtle.circle(100)      <-- turtle draws circle of radius 100 
    turtle.pencolor("blue") <-- turtle changes to blue pen (most other common colors work too!)
    turtle.forward(50)      <-- turtle moves forward 50 steps
    turtle.xcor()           <-- turtle returns its current x-coordinate
    turtle.ycor()           <-- turtle returns its current y-coordinate 
    ```

我的程序：

```
import turtle

def tree(length,n):
    """ paints a branch of a tree with 2 smaller branches, like an Y"""
    if length < (length/n):
           return       # escape the function
    turtle.forward(length)        # paint the thik branch of the tree
    turtle.left(45)          # rotate left for smaller "fork" branch
    tree(length * 0.5,length/n)      # create a smaller branch with 1/2 the lenght of the parent branch
    turtle.right(90)         # rotoate right for smaller "fork" branch
    tree(length * 0.5,length/n)      # create second smaller branch
    turtle.left(45)          # rotate back to original heading
    turtle.backward(length)       # move back to original position
    return              # leave the function, continue with calling program 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:42:11.397

我认为有两个问题。

首先，对于递归调用，第二个参数应该是 n-1 而不是 length/n。如果您正在绘制第 n 级，则下一次调用将绘制第 n-1 级，而不是级别长度/n。

第二个问题是逃逸条件。通过第一次更改，当没有更多级别可以绘制时，绘制将完成，或者 n==1。

这听起来像家庭作业，所以我不会发布确切的代码。

# php - php输出格式

> ID：12809305
> 
> 赞同：0
> 
> 时间：2012-10-09T22:24:59.253
> 
> 标签：php, syntax

我有这个：

```
<?php 
$values = $cfs->get('promoter'); 
if (!empty($values)) {
    echo $cfs->get_labels('promoter');  
    echo implode(', ', array_keys($values));
}
?>
<br /> 
```

打印如下内容：

```
PromoterPromoter1, Promoter2 
```

当我想要这样的东西时：

```
Promoter: Promoter1, Promoter2 
```

另外，我怎么能`<br />`在 php 中包含，所以如果该字段为空白，换行符也被排除在外？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:29:01.340

```
<?php 
$values = $cfs->get('promoter'); 
if (!empty($values)) {
    echo $cfs->get_labels('promoter').": ";  
    echo implode(', ', array_keys($values))."<br />";
}
?> 
```

使用 PHP 的连接运算符 - 即句点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:28:24.200

您可以简单地`": "`在末尾附加一个字符串

```
echo $cfs->get_labels('promoter').": "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:34:00.607

```
<?php 
$values = $cfs->get('promoter'); 
if (!empty($values)) {
    $word = "";
    $word .= $cfs->get_labels('promoter');
    $word .= ": ";
    $word .= implode(', ', array_keys($values));
    $word .= "<br />";
    echo $word;
}
?> 
```

# java - 将同一数据库中的多行映射到单个实体

> ID：12809307
> 
> 赞同：3
> 
> 时间：2012-10-09T22:25:13.750
> 
> 标签：java, hibernate, jpa

我正在寻找将一个表中的多行映射到一个实体的最佳方法。我拥有的数据库表如下所示：

```
principal_id    permission    target
12312313        PERM1         1000
12312313        PERM2         1000
12312313        PERM2         1002 
```

理想情况下，我想将此表的内容作为字段映射到我的 Principal @Entity 中，如下所示：

```
@Entity
...
public class Principal {
    @Id
    private long principalId;

    ...

    private Map<String, List<Long>> permissionMap;

} 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T00:14:09.960

我不知道有一种方法可以完全按照您的意愿行事。我能得到的最接近的是：

```
@Embeddable
public class Permission {
    private String permission;
    private int target;
}

@ElementCollection
@CollectionTable(name="foo", joinColumns = @JoinColumn(name = "principal_id"))
private Set<Permission> permissions; 
```

如果每个目标只有一个权限，那么您可以使用地图：

```
@ElementCollection
@CollectionTable(name="foo", joinColumns = @JoinColumn(name = "principal_id"))
@MapKeyColumn(name="permission")
@Column(name="target")
private Map<String, Integer> permissions; 
```

可悲的是，我认为对于包含集合的地图没有办法做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T23:57:38.160

我建议采用以下结构：

```
@Entity
...
public class Principal {

    @Id
    private long principalId;
    /** Other properties **/
    @OneToMany
    private Set<Permission> permissions;
....
}

@Entity
@IdClass(PermissionId.class)
public class Permission {
    @Id
    private String permission;
    @Id
    private Long target

    public static class PermissionId implements Serializable {
        private String permission;
        private Long target;
        /** setters/getters hashcode and equals goes here **/
    }
} 
```

# jquery - Knockout.js 是否适合屏幕类型？

> ID：12809310
> 
> 赞同：0
> 
> 时间：2012-10-09T22:25:35.450
> 
> 标签：jquery, knockout.js

我曾想尝试使用 knockout.js，但并不真正需要它。然而，我正在构建一个新屏幕，并想知道是否值得在 knockout.js 中尝试使用 jquery。

![在此处输入图像描述](../Images/1fde9d021b5e4ea6e4aff1a6cfc48db2.png)

这是谷歌日历重复预约屏幕。现在我想做的是非常类似于它们可能的复选框、下拉列表和单选按钮。

每个选择都会影响摘要部分。因此，如果我取消选中“F”，那么摘要应该会更新。

淘汰赛会让我更容易构建摘要部分吗？或者他们还有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:54:05.337

这是你可以用 Knockout.js 做的事情。KO 不一定是 jQuery 的替代品，而是一个更高级别的层来帮助模型和视图绑定（即 VMMV）。jQuery 仍然适用于动画，最重要的是 AJAX 调用。取决于你在做什么，KO 和 jQuery 可以很好地相处。

KO 可能很难让你头脑清醒，但一旦你做到了，它就非常棒了，并且让某些事情变得非常简单。例如，我只处理了单击星期几并显示它的部分：

[http://codepen.io/CWSpear/pen/IbkvJ](http://codepen.io/CWSpear/pen/IbkvJ)

如果没有检查任何内容，则不会显示任何内容，但是一旦您开始检查内容，它就会显示检查的日期（即`Weekly on Thursday`）。

JavaScript 只有几行代码。神奇的是绑定：

每个输入都有一个`data-bind="checked: days"`属性，这意味着当它们被检查时，它们会自动添加到`days`我的 ViewModel 中的变量中，即`ko.observeableArray`. 这意味着它正在监视这些复选框，一旦有变化，它就会通知任何依赖它的东西。

事实证明，我们的`summary`变量是 a `ko.computable`（这是一个可计算的 observable）。它有一个属性：`data-bind="text: summary, visible: days().length > 0"`. 这意味着它只有在非空时才可见`days`，并且文本在我们的 javascript 中定义为“Weekly on [list of `days`]”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:22:55.010

我已经在各种不同的项目中使用 Knockout 大约 18 个月了。根据我的经验，Knockout 对于将行为绑定到表单状态然后最终将这些表单转储回您的服务器非常有用。

在我看来，淘汰赛的最大缺点是：

*   随着您的页面/视图模型变大，客户端性能问题。
*   在您的客户端中缺乏对网络/AJAX 层的内置支持。
*   它需要一些设置/学习，并且在您的 JS 资产中占用的空间不小。

对于这个用例，您并不是特别容易受到前两个的影响。你可能是第三个，但如果你已经在其他地方使用 Knockout，我会说去吧。

# c# - 提取渐变画笔属性

> ID：12809313
> 
> 赞同：2
> 
> 时间：2012-10-09T22:25:48.383
> 
> 标签：c#, silverlight, xaml

它在哪里指定和/或是否可以从网格列标题中提取渐变画笔？我特别关注 Sliverlight 4 中 ScrollDataGrid 标头的默认渐变设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:44:11.940

Pretty much all your brushes will be in a file called Brushes.xaml in a Resources/Styles directory, search your solution for them. If you want to know what a specific brush being used is on a control, just open the control template for it and look for the name of the StaticResource being called for it.

Expression Blend makes this relatively simple. I think the one you're referring to is the HighLightColorBrush which then translates over to HighlightColor. Hope this helps.

# google-chrome - 安装 Google Web Toolkit 开发者插件

> ID：12809314
> 
> 赞同：2
> 
> 时间：2012-10-09T22:26:00.517
> 
> 标签：google-chrome, gwt

当我通过谷歌应用引擎工作时，我正在尝试设置我的第一个“Hello World”应用程序在我的 Chrome 浏览器中运行

当（第一次），我导航到 URL

```
http://127.0.0.1:8888/MyTest.html?gwt.codesvr=127.0.0.1:9997 
```

我毫不奇怪地得到

![在此处输入图像描述](../Images/e3792c3315b8e0e34ff0d258a64940d8.png)

好的，所以我应该从[Chrome Web Store](https://chrome.google.com/webstore/search/Google%20web%20toolkit)获取插件。我没有看到任何看起来像“Google Web Toolkit Developer Plugin”的东西。“gwt chrome”搜索的相同交易。[在此处输入链接描述](https://chrome.google.com/webstore/search/gwt%20chrome)

请问我错过了什么？我怎样才能安装这个插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:32:19.187

可能有帮助的快速修复：

1.  右键单击 chrome 图标>属性>快捷方式
2.  添加目标：--enable-easy-off-store-extension-install
3.  打开 chrome 并导航到扩展（ chrome://chrome/extensions/ ）
4.  将插件拖放到它上面（如果您之前尝试安装它但没有成功，应该在您的下载文件夹中）

或者这个：

1- 从网站下载扩展文件并将其保存到您的计算机。
2- 单击浏览器工具栏上的扳手图标。
3- 选择工具 > 扩展。
4- 在您的计算机上找到扩展文件并将文件拖到扩展页面上。
5- 在出现的对话框中查看权限列表。如果您想继续，请单击安装。

[谷歌问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=7569)

# objective-c - 核心数据：以一对多的关系获取实体的获取请求

> ID：12809319
> 
> 赞同：1
> 
> 时间：2012-10-09T22:26:28.637
> 
> 标签：objective-c, core-data

假设我有 3 个实体`Grandparent`、`Parent`和`Child`。

`Grandparent - Parent`是一对多的关系

`Parent - Child`是多对一的关系

`Child`有一个`age`属性

我的目标是让所有`Child`实体在`Parent`哪里`Parent.grandparent`是确定的`Grandparent`。另外，我想对获取的结果进行排序`age`。我知道我可以通过多个步骤来做到这一点，但我的问题是：如何在单个 fetch 请求中完成此操作？

**编辑**：也许这张图会比上面的描述更清楚一些。 ![在此处输入图像描述](../Images/73dc294ad8149c98c8df8f660d646844.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:19:42.847

我很幸运，发现这个答案 [NSPredicate 在 NSFetchedResultsController 中表现得很奇怪](https://stackoverflow.com/questions/2580875/nspredicate-acting-strange-in-nsfetchedresultscontroller)

这个问题的措辞不同，这就是为什么我花了一段时间才找到它。基本上，我正在寻找的谓词是以下格式：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(parent, $x, $x.grandparent == %@).@count != 0", grandParent]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:35:54.950

我假设变量和关系名称，将它们更改为您在代码和模型中命名的任何名称。

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Child" inManagedObjectContext:context];
request.predicate = [NSPredicate predicateWithFormat:@"parent.grandparent == %@", grandParentObject];
request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"age" ascending:YES]]; 
```

这应该有效。我习惯了代码完成，我没有在 Xcode 中输入这个，所以方法名称可能有点偏离，但你明白了。

# asp.net-mvc - MVC AJAX 属性验证

> ID：12809323
> 
> 赞同：3
> 
> 时间：2012-10-09T22:27:20.717
> 
> 标签：asp.net-mvc, jquery-validate, asp.net-mvc-4

我有一个创建用户视图（操作），除了某些字段类型、日期、电子邮件地址等的客户端验证之外，我想通过调用几个服务器控制器操作来检查一对例如电子邮件地址和用户名是否是唯一的。

我本来认为最好“挂钩”到现有的 MVC 验证机制中来调用这些 ajax 函数。因此，当表单验证发生时，它会调用我的 ajax 验证器，并在 modelstate.isvalid 中回顾性地反映这一点，并且任何错误都会显示在默认的 html.validation 帮助器中。

我不确定这是否可行，或者我是否需要单独处理自己的验证？目前我已经创建了几个 jquery 函数，它们调用几个控制器操作并在我添加的几个跨度中显示用户名和电子邮件地址的有效性状态。

MVC 的最佳模式是什么？我考虑了将上述每个字段包装在单独的 @Ajax.BeginForm(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:35:47.043

Asp.Net MVC 中内置了远程验证。

在模型中：

```
public class CreateUserModel 
{
    [Remote("IsNameAvailable", "Validation")]
    public override string UserName { get; set; }
} 
```

在控制器中：

```
public class ValidationController : Controller 
{
    public JsonResult IsNameAvailable(string Username) 
    {
        ... Do some checks
        return Json({some validation message here}, JsonRequestBehavior.AllowGet);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:42:18.533

您可以使用远程验证。阅读这篇文章： http: [//msdn.microsoft.com/en-us/library/gg508808 (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

# c# - 业务层分页设计指南

> ID：12809326
> 
> 赞同：0
> 
> 时间：2012-10-09T22:27:33.947
> 
> 标签：c#, n-tier-architecture, custompaging, business-layer

WCF/C# N 层应用程序。

我们已经使用[这个片段](http://www.csharpdeveloping.net/Snippet/how_to_make_paging_in_collections)作为基本指南在我们的业务层中实现了分页。

我只是想知道-为了使分页功能可测试，我应该使分页器成为我们 Manager 类的公共属性还是将其注入构造函数中？我们已经为单元测试注入了一个存储库，但我认为沿着注入过多的路线走下去是不对的。

或者，最好将寻呼机保密？无论如何，页面大小将在配置文件中指定，所以我想我可以在测试 app.config 中指定页面大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:52:21.967

我会将您的寻呼机注入如下：

```
 public interface IPager {
     int PageSize {get;}
  } 
```

然后，您的具体类将很简单，例如：

```
 internal class ConfigPager : IPager {
     public int PageSize {
         get{

             int pageSize = 10;  // default value
             Int32.TryParse(ConfigurationManager.AppSettings["PageSize"], out pageSize);
             return pageSize;
         }
     }
  } 
```

通过注入 IPager，您可以更全面地测试您的管理器类，以确保它实际上尊重 PageSize 的不同设置，因为您可以轻松地模拟它并测试不同的大小。这将调出任何可能有人尝试在您的管理器中硬编码页面大小值的情况。

# linux - 在 Linux 下，被忽略的信号仍然会中断系统调用吗？

> ID：12809327
> 
> 赞同：1
> 
> 时间：2012-10-09T22:27:46.270
> 
> 标签：linux, signals

假设我`SIG_IGN` `SIGPIPE`在我的程序开始时。后来，我收到一个`SIGPIPE`. **通常**，某些系统调用（例如`select()`在收到信号时处于活动状态）将被中断并返回失败并设置`errno = EINTR`。我的问题是，如果我明确告诉我要忽略的 Linux 内核，会发生这种情况`SIGPIPE`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:43:15.637

不，它只会忽略它。唯一不能忽略的信号是 SIGKILL。

# c - 为什么这个函数会出现段错误？

> ID：12809331
> 
> 赞同：3
> 
> 时间：2012-10-09T22:28:19.963
> 
> 标签：c, file-io, segmentation-fault

这一直困扰着我一段时间；这个函数甚至不返回，它只是段错误。我指定了一个正确的文件位置，我在函数的每个可能点检查错误，我不明白？

```
GLchar* getShaderString(const GLchar* file_path){
    FILE* srcfile = NULL;
    if(!(srcfile = fopen(file_path, "r")))
        return(NULL);
    fseek(srcfile, 0l, SEEK_END);
    long len;
    if((len = ftell(srcfile)) == -1)
        return (NULL);
    fseek(srcfile, 0l, SEEK_SET);
    GLchar* buff;
    if(!(buff = malloc(len + 1)))
        return (NULL);
    fread((GLvoid*)buff, len, 1, srcfile);
    fclose(srcfile);
    buff[len + 1] = '\0';
    return (buff);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T22:29:59.297

```
buff[len + 1] = '\0'; 
```

应该：

```
buff[len] = '\0'; 
```

您的数组中有`len + 1`元素，最后一个元素位于 index `len`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:30:00.857

fopen 适用于`const char*`not `const GLchar*`。

另外，`buff[len+1] = '\0';`应该是`buff[len] = '\0';`。

# file - Bash：从文件中逐行传递参数

> ID：12809334
> 
> 赞同：3
> 
> 时间：2012-10-09T22:28:26.053
> 
> 标签：file, bash, arguments

我正在逐行读取文件中的参数，但每一行都有几个参数。代码的要点如下

```
cat file.txt | while read LINE ; do
    echo -e `./foo.sh "$COUNT" "$LINE"`
done 
```

foo.sh

```
#!/bin/bash
echo "$2\t$3\t$4" 
```

文件.txt

```
0 0 0
0 0 1
0 1 0
0 0 1 
```

回来。注意它不是标签

```
0 0 0
0 0 1
0 1 0
0 0 1 
```

这是我正在尝试做的更简单的示例；我的 foo.sh 实际上是使用参数进行 sql 调用。我知道我的 foo.sh 函数通过调试工作，所以我将它缩小到行阅读器。对我哪里出错有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:37:41.190

我认为您需要执行以下任一操作：

1.  取消引用变量
2.  评估字符串

所以它变成了：

```
echo -e `./foo.sh "$COUNT" $LINE` 
```

或者

```
echo -e `eval ./foo.sh "$COUNT" "$LINE"` 
```

否则 bash 将调用作为单个参数`foo.sh`传递。`$LINE`通过显式评估它，bash 将首先生成最终的命令字符串，然后重新解释它，实际上拆分`$LINE`为单独的参数。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:16:00.977

您将外部命令嵌套在回声中是否有原因？这样的事情呢？我只是在 foo.sh 中的 echo 中添加了 -e 并在外部调用中取出了 echo。

```
cat foo.txt | while read LINE ; do
    ./foo.sh $COUNT $LINE
done 
```

foo.sh：

```
#!/bin/bash
echo -e "$2\t$3\t$4" 
```

# java - NullPointerException 在 Google App Engine LocalSERviceTestHelper 上调用 tearDown()

> ID：12809336
> 
> 赞同：3
> 
> 时间：2012-10-09T22:28:55.213
> 
> 标签：java, unit-testing, google-app-engine, memcached, testng

我正在为严重依赖 Google App Engine 服务（如 Memcache 和 Datastore）的 Google App Engine Java 应用程序编写测试（集成和单元）。为了使用这些服务在本地测试我的应用程序，我在所有测试用例的父类中都有这一行：

```
private final LocalServiceTestHelper helper = new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig(), new LocalMemcacheServiceTestConfig()); 
```

我用这个函数调用开始每个测试（通过TestNG的`@BeforeMethod`注释）：

```
helper.setUp(); 
```

我用这个函数调用结束每个测试（通过TestNG的`@AfterMethod`注释）：

```
helper.tearDown(); 
```

（这里参考了[TestNG annotations](http://testng.org/doc/documentation-main.html#annotations) and [local unit testing for Google App Engine's Java Runtime](https://developers.google.com/appengine/docs/java/tools/localunittesting)，以备不时之需。尤其是后面的链接，请注意我的代码严格遵循Google给出的示例）

需要注意的一点是，我在 Java 应用程序中的一个 servlet 使用了 MemcacheService 实例。它被 Guice 注入到 servlet 的构造函数中。

现在，我构建我的代码并通过调用来运行它`mvn clean install`，这将启动一个*Jetty*实例并在代码编译后运行我的测试。**令我懊恼的是，**我在 TestNG 报告大规模测试失败之前打印了这个堆栈跟踪：

```
SEVERE: Received exception tearing down config of type com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig
java.lang.NullPointerException
at com.google.appengine.tools.development.testing.LocalServiceTestHelper.getLocalService(LocalServiceTestHelper.java:495)
at com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.getLocalMemcacheService(LocalMemcacheServiceTestConfig.java:71)
at com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.tearDown(LocalMemcacheServiceTestConfig.java:47)
at com.google.appengine.tools.development.testing.LocalServiceTestHelper.tearDown(LocalServiceTestHelper.java:438)
at com.ea.pogosocial.AbstractTest.tearDown(AbstractTest.java:65)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)
at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:796)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:907)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1237)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

我已经尝试了几乎所有我能想到的来解决这个问题，但我仍然遇到了这个 tearDown() 问题，这真的让我很困惑。除了 put() 和 get()，我没有对 servlet 中的 memcache 实例做任何花哨的事情。有人对我应该做什么有任何想法吗？

如果需要更多信息或代码，我很乐意提供。需要注意的一件事：当我启动我的 Jetty 服务器`mvn gae:run`并通过 Eclipse 执行 TestNG 测试时，我没有遇到这个问题。也许这是因为我的 servlet 被注入了一个非本地的 memcache 单元测试助手实例，而是一个实际版本的 memcache 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T16:57:05.357

我有这个完全相同的错误。对我来说，问题是 Google App Engine SDK 依赖项的版本号不匹配

我有：

*   appengine-api-1.0-sdk：1.8.1.1
*   应用引擎 API 实验室：1.8.1.1
*   appengine-api-stubs：1.8.1.1
*   应用引擎测试：1.8.1.1
*   应用引擎工具 SDK：**1.7.2**

一旦我将 appengine-tools-sdk 更新为与其余依赖项相同的版本，我的测试又开始通过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:36:41.540

我认为您在使用 @BeforeMethod 和 @AfterMethod 注释时遇到了一些小问题。基本上这些注释在每个测试方法执行之前和每个测试方法执行之后调用。如上所述，您不能为单个测试方法分配 @BeforeMethod 和 @AfterMethod 注释。

并尝试在 @BeforeClass 或 @BeforeSuite 注释中实现您的服务器启动。因此，您可以确保在执行测试时服务器已启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:39:16.003

只需将这 3 个库（测试库的一部分）添加到您的类路径中：

```
${SDK_ROOT}/lib/impl/appengine-api.jar
${SDK_ROOT}/lib/impl/appengine-api-labs.jar
${SDK_ROOT}/lib/impl/appengine-api-stubs.jar 
```

这应该可以解决问题。

# javascript - 我从哪里获得 YUI 测试代码覆盖率的 jar 文件？

> ID：12809338
> 
> 赞同：0
> 
> 时间：2012-10-09T22:29:06.960
> 
> 标签：javascript, unit-testing, automated-tests, yui

[YUI Test -Code Coverage Utility 文档](https://github.com/yui/yuitest/wiki/Code-Coverage)建议我们需要一些 jar 文件来检测代码：

```
yuitest-coverage-x.y.z.jar - used to instrument JavaScript code.
yuitest-coverage-report-x.y.z.jar - used to generate reports from the JSON code coverage output. 
```

我在哪里可以得到这些 jar 文件？请告诉我在某个地方有一个可以下载的垃圾箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:35:09.103

构建 .jar 文件在 GitHub 上可用，位于[https://github.com/yui/yuitest/tree/master/java/build](https://github.com/yui/yuitest/tree/master/java/build)

# javascript - 如何针对 Google Api 撤销身份验证令牌客户端

> ID：12809339
> 
> 赞同：2
> 
> 时间：2012-10-09T22:29:08.580
> 
> 标签：javascript, jquery, oauth, google-api, google-analytics-api

我正在尝试使用 Google Api 客户端代码撤销令牌。

我的代码看起来像这样：

```
$.get("https://accounts.google.com/o/oauth2/revoke?token=" + accessToken, function () {
        window.location.reload();
    }); 
```

我收到以下错误？

> XMLHttpRequest 无法加载 [https://accounts.google.com/o/oauth2/revoke?token=tokenishere](https://accounts.google.com/o/oauth2/revoke?token=tokenishere)来源 [http://balblabla.com](http://balblabla.com)不受 Access-Control-Allow-Origin 的允许。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-06T04:19:05.603

经过一些研究，我发现您可以通过在 jquery ajax 请求中指定 dataType: 'jsonp' 选项来绕过 cors 限制。相关信息在这里：[https ://developers.google.com/+/web/signin/disconnect](https://developers.google.com/+/web/signin/disconnect)

```
$.ajax({
  type: 'GET',
  url: revokeUrl,
  async: false,
  contentType: "application/json",
  dataType: 'jsonp',
  success: function(nullResponse) {
    // Do something now that user is disconnected
    // The response is always undefined.
  },
  error: function(e) {
    // Handle the error
    // console.log(e);
    // You could point users to manually disconnect if unsuccessful
    // https://plus.google.com/apps
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T22:19:23.467

继@krg 的评论之后：

> 根据错误，您似乎无法在此客户端上执行此操作。也许您需要一个服务器端脚本来处理来自您的域内的请求。您还可以探索[此](http://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)解决方案。这是使用该解决方案的[jsFiddle](http://jsfiddle.net/hwjPS/)示例。

我在服务器端使用相同的代码完成了此操作：

> ```
> $.ajax({
>      url:"https://accounts.google.com/o/oauth2/revoke?token=10100101",
>      dataType: 'jsonp', // Notice! JSONP <-- P (lowercase)
>      success:function(json){
>          console.log(arguments);
>          // do stuff with json (in this case an array)
>          alert("Success");
>      },
>      error:function(){
>          alert("Error");
>      },
> }); 
> ```

哪个有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-16T18:28:00.513

现在 jsonp 不起作用。他们已将内容类型更改为“application/x-www-form-urlencoded”，

```
 $.ajax({
        type: 'GET',
        url: "https://accounts.google.com/o/oauth2/revoke?token=dsfgdfsg.98sdfgsdfg9sd8fgsdfgs.sdfg89dsfg",
        async: false,
        contentType: "application/x-www-form-urlencoded",
        success: function(nullResponse) {
            // Do something now that user is disconnected
            // The response is always undefined.
        },
        error: function(e) {
            console.log(e)
        }
    }); 
```

# asp.net - webclient.openread() URI 格式问题

> ID：12809341
> 
> 赞同：0
> 
> 时间：2012-10-09T22:29:10.577
> 
> 标签：asp.net, webclient

我正在尝试将 uri 从文本框发送到 weblclient 实例。问题是如果我发送 www.stackoverflow.com 它会引发格式异常。如何解决这个问题？我不能攻击 http:// 因为如果用户粘贴正确的格式，那么动态附加的位会导致问题。

```
 protected void TextBoxUrl_TextChanged(object sender, EventArgs e)
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

    using (var wc = new System.Net.WebClient())
    {
        doc.Load(wc.OpenRead(TextBoxUrl.Text),Encoding .UTF8 );

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:37:51.070

首先将您的代码移出 TextChanged ，否则它将为输入的每个字符触发。

其次，您必须编写用户输入内容的解析例程。您可以随时检查 TextBoxUrl.Text.StartsWith("http") 是否将其添加到字符串的开头。

相反，我会推荐一些更好的东西，比如使用 System.Uri.IsWellFormedUriString(TextBoxUrl.Text)。如果它通过然后调用您的 Load 方法，否则让他们修复它或添加“http”等。

# objective-c - gdb 远程返回错误：调用完成块时出现 E08 (EXC_BAD_ACCESS)

> ID：12809343
> 
> 赞同：8
> 
> 时间：2012-10-09T22:29:14.320
> 
> 标签：objective-c, automatic-ref-counting, ios6, objective-c-blocks

我正在使用 ARC，在 iOS6 上我遇到了一个奇怪的崩溃：gdb remote 返回了一个错误：E08

在堆栈跟踪中，之前的方法位于调用完成块的行上。我阅读了很多关于块和 ARC 的内容，但在以下上下文中使用它们时我仍然没有信心：

（简化的方法并省略了一些代码）

```
- (void) method1: (void(^)(NSMutableArray *a)) completionBlock withFailedBlock:(void(^)(NSInteger errorCode,NSString *error)) failedBlock {
    __weak Controller *weakSelf = self;

    ...

    if(condition)
        completionBlock(weakSelf.a);

    //still do method2, since we might get updated data
    [weakself.service method2:^(NSMutableArray *a2) {
        weakSelf.shouldRefresh = NO;

        ...
        completionBlock(a2); //<-- sometimes crashes here
    } withFailedBlock:^(NSInteger errorCode, NSString *error) {
        failedBlock(errorCode, error);
    }];

} withFailedBlock:^(NSInteger errorCode, NSString *error) {
    failedBlock(errorCode, error);
}]; 
```

调用代码：

```
[[Controller sharedController] method1:^(NSMutableArray *a) {
    //save result in model (singleton)
    [Model sharedModel].a = a;
    [weakSelf refreshUI];

} withFailedBlock:^(NSInteger errorCode,NSString *error) {
    ;//show alert

}]; 
```

当我检查块及其周围的值时，它们似乎还可以。我也有 NSZombie。我的完成块应该被自动复制，因为它是从块内引用的。

我在这里想念什么？我在 iOS5 和 4.3 上也看到过崩溃，但从来没有 gdb remote 返回错误：E08。在这些情况下，来自调试器的信息也没有帮助。我正在使用[PLWeakCompatibility](https://github.com/plausiblelabs/PLWeakCompatibility)以便在 iOS4.3 下支持 __weak

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:10:36.687

你还有这个问题吗？

在这种情况下你为什么需要weakSelf。在这种情况下，您看起来不像是在捕捉自我。当你离开它时，代码是否仍然崩溃？

顺便说一句，我认为当您尝试为您的问题简化它时，您的 method1 实现有点混乱。

```
- (void) method1: (void(^)(NSMutableArray *a)) completionBlock withFailedBlock:(void(^)(NSInteger errorCode,NSString *error)) failedBlock {
    ...
} withFailedBlock:^(NSInteger errorCode, NSString *error) {
    ...
}]; 
```

看起来不像是有效的方法实现。不应该是这样的：

```
- (void) method1: (void(^)(NSMutableArray *a)) completionBlock withFailedBlock:(void(^)(NSInteger errorCode,NSString *error)) failedBlock {
    ...
} 
```

# cakephp - 我可以在 cake php 中创建一个包含与模型不对应的字段的表单吗？

> ID：12809345
> 
> 赞同：0
> 
> 时间：2012-10-09T22:29:53.410
> 
> 标签：cakephp

我有一个用于收集电子邮件地址的表单，它对应于我的用户模型。我希望表单也有一个用于电子邮件的文本字段，但我不需要将消息保存到我的数据库中。

```
echo $this->Form->create('User', array('action' => 'invite','controller' => 'users'));
echo $this->Form->input('User.from', array('label'=>"Your email",'value'=>'your         email','class'=>"",'type'=>'email'));
echo $this->Form->input('User.to', array('label'=>"Your friend's", 'value'=>"your friend's email",'class'=>"",'type'=>'email'));
echo $this->Form->textarea('User.message', array('label'=>'Your message', 'value'=>"some message"));
echo $this->Form->end(array('label'=>'Invite', 'class'=>'buttonstyle')); 
```

这有效，但前提是我在我的用户表中添加了一个我不需要的消息列。我宁愿做这样的事情

```
echo $this->Form->textarea('message', array('label'=>'Your message', 'value'=>"some message")); 
```

但这不起作用，我猜是因为“消息”与模型无关。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:22:52.943

你是什​​么意思？当然可以，拥有与数据库表字段不对应的表单字段是一件非常正常/微不足道的事情。

但你最初的问题是错误的。它们通常总是属于一个模型（可以说是一个范围），但不一定属于一个数据库表。您甚至可以在没有任何相关模型的情况下拥有它们。但在大多数情况下，这没有多大意义。

问题是：您是否需要为他们提供蛋糕魔法（根据类型通过 input() 自动生成复选框/文本区域）？你想验证他们吗？那么您至少需要为它们考虑一些架构条目。

请参阅[http://www.dereuromark.de/2011/12/15/tools-plugin-part-2-contact-form/](http://www.dereuromark.de/2011/12/15/tools-plugin-part-2-contact-form/)示例如何使用模型中的 _schema 来获得所有这些（就像使用真实的数据库字段）。

哦，还有

1.  'controller' => 'users' 不像你说的那样工作，只有 'action' 和 'url' 键。
2.  'value' 是错误的（使用 'default' 代替）

# java - 带有 PutRequest 的多列族

> ID：12809354
> 
> 赞同：0
> 
> 时间：2012-10-09T22:30:49.780
> 
> 标签：java, hadoop, hbase, flume

我正在编写用于 Flume-NG 1.3.0 的自定义 HbaseSink，并且需要`org.hbase.async.PutRequest`在同一行中执行多个列族。我没有看到构造函数或任何类似于`Put.add(columnFamily, columnName, value)`.

有人可以阐明我应该如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:38:54.403

我也试图找到这个问题的解决方案，但找不到任何参考。所以这就是我在我的应用程序中所做的

`

```
public void addRecord(String tableName, String rowKey, String family, HashMap<String, String> hash) {
        try {
            HTable table = new HTable(conf, tableName);
            Put put = new Put(Bytes.toBytes(rowKey));

            Iterator<String> it = hash.keySet().iterator();
            while (it.hasNext()) {
                String key = it.next();
                String val = hash.get(key);
                put.add(Bytes.toBytes(family), Bytes.toBytes(key), Bytes.toBytes(val));
            }
            table.put(put);

        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

`

在这里，HashMap 哈希包含列名及其值。

# java - 在 case 条件下使用 char 的 switch 语句？

> ID：12809355
> 
> 赞同：1
> 
> 时间：2012-10-09T22:31:23.113
> 
> 标签：java, switch-statement

我正在尝试编写一个使用 char 表示每种情况的 switch 语句。在我的教科书中，示例显示我可以使用 char 来执行此操作，但是当我编译程序时，我得到了：

```
 StudentInvoiceListMenuApp.java:54: error: incompatible types
        case 'R':
             ^
    required: String
    found:    char
    1 error 
```

这是我的代码：

```
 switch (inputCode) {

        case 'R':
            System.out.println("\nEnter file name:");
            fileName = menuApp.nextLine();
            if (inputCode.trim().length() == 0) {
                break; // no file name entered
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:33:05.080

看起来`inputCode`是 type `String`，而不是`char`...所以如果您使用的是 Java 7，您只想将其更改为：

```
case "R": 
```

或者，将类型更改`inputCode`为`char`，在其他地方进行适当的调整。（如果你没有使用 Java 7，这将是你唯一的选择——但我怀疑你使用*的是*Java 7，否则你会得到一个不同的编译器错误。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:33:10.530

问题是 inputCode 是一个字符串。如果你想查看字符串的第一个元素，你应该这样做：

```
switch (inputCode[0]) { 
```

如果要与单个字符串进行比较，您应该这样做：

```
case "R": 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:33:17.473

`inputCode`似乎是的实例，`String`您正试图将其与`char`,

java -7 及之后支持 switch 中的字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:33:42.730

`inputCode`是一个字符串实例。

# actionscript-3 - 如何在函数参数中为 Number 传递 null 值？

> ID：12809358
> 
> 赞同：0
> 
> 时间：2012-10-09T22:31:45.053
> 
> 标签：actionscript-3

我有一个函数，我想为参数传递 null，以便获取默认参数值，但它似乎不喜欢 null、undefined 或 NaN。

这是我的功能：

```
function myFunction(value:Number = .5, value2:Number = .6):Number {
   return value;
} 
```

然后：

```
var result = myFunction(null, 10);
trace(result); // 0

var result = myFunction(NaN, 10);
trace(result); // NaN

var result = myFunction(undefined, 10);
trace(result); // NaN 
```

如何让它默认为 0.5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:24:55.837

如果你在不传递参数的情况下调用你的函数，你应该得到你期望的默认值。在您的示例中，仅在根本未传递值时才使用默认值。

```
function myFunction(value:Number = .5, value2:Number = .6):Number {
   return value;
}

var result = myFunction();
trace( result ) // 0.5 
```

如果您想传递第二个参数而不是第一个参数，那么您可能必须考虑另一种方法。

在 AS3 中键入“数字”的变量不能有 null 值，并且会自动转换为 NaN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T13:08:34.587

基本上，您正在做的是[功能重载](http://en.wikipedia.org/wiki/Function_overloading)，而AS3**不**支持。
但是，您可以通过使用通配符类型来模拟重载。

```
function myFunction(value:*= .5, value2:Number = .6):Number {
   return value;
} 
```

但是您的默认值可能不会被分配/访问。
我强烈建议你重新设计它，因为它上面写满了代码味道，稍后会回来困扰你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T23:56:42.637

```
function myFunction(value:Number = .5, value2:Number = .6):Number
{
    if (isNaN(value)) value = .5;
    return value;
}

var result = myFunction(NaN,10);
trace(result); //0.5 
```

你到底想做什么？当然必须有更好的方法。

# perl - perl：通过 SSH 运行远程 perl 脚本并查询远程机器上的环境变量

> ID：12809359
> 
> 赞同：1
> 
> 时间：2012-10-09T22:31:45.927
> 
> 标签：perl, ssh, environment-variables

> **可能重复：**
> [为什么 SSH 远程命令获得的环境变量比手动运行时少？](https://stackoverflow.com/questions/216202/why-does-an-ssh-remote-command-get-fewer-environment-variables-then-when-run-man)

**在 Mac OS X 10.8.2 上运行**

我正在通过 SSH 运行 perl 脚本，在 perl 脚本中我使用 $ENV{MY_VAR_NAME} 查询环境变量，并且在本地运行时工作正常。但是通过 SSH，所有环境变量都变得未设置。

我也试着跑

```
system("source ~/.bash_profile"); 
```

在我的脚本开头无济于事。

有小费吗？

**编辑：**

改写我的问题。

我有机器 A 和 B。我在机器 B 上运行我的 perl，试图在 B 上获取环境变量并且它工作。然后我从 A SSH 到 B 运行相同的脚本，即使用此代码

```
ssh user@B perl myscript.pl 
```

这次B上的环境变量都是空白的。

有小费吗？

**更新：**

我发现运行上面的脚本，机器B上的~/.bashrc被调用了，但是在~/.bashrc中设置了环境变量后，再次运行上面的命令，还是没有看到任何环境变量。

另外，如果我的 perl 脚本只包含

```
echo $ENV{PATH} 
```

然后我得到

```
/usr/bin:/bin:/usr/sbin:/sbin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:41:44.010

使用 ssh 执行命令时设置的环境变量取决于：

*   登录外壳
*   该 shell 的启动文件的内容

例如，当它启动时`bash`可能会读取以下任何文件：

*   `~/.bash_profile`
*   `~/.profile`
*   `~/.bashrc`
*   `~/.bash_login`
*   `/etc/profile`

取决于诸如外壳是否被视为“登录”外壳、会话是否为“交互式”会话等因素。

当你使用`ssh`.

您只需放入`echo here in XXXX`各种文件并执行 ssh 命令即可完成此操作。（请注意，`ssh`没有命令可能会调用与使用命令不同的启动文件`ssh`。）

对于`bash`，请参阅`INVOCATION`其页面中的部分，了解启动时`man`读取哪些文件的描述。`bash`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:50:49.650

The trick is to run `.bash_profile` and the perl script under the same remote shell session:

```
ssh user@B 'source ~/.bash_profile && perl myscript.pl' 
```

# php - ZF2：模块组

> ID：12809364
> 
> 赞同：2
> 
> 时间：2012-10-09T22:32:31.990
> 
> 标签：php, zend-framework2, zend-config

我正在学习ZF2并计划应用程序。

我想要一个包含多组模块的应用程序。每组模块最多可包含 20 多个模块。

我无法保证整个应用程序的任何模块的名称都是唯一的，但我可以保证它们在模块组中的唯一性。

理想情况下，使用主机路由器将请求路由到模块组。

例如 [http://admin.mysite.com/foo/](http://admin.mysite.com/foo/) => 'Admin/Foo/Index/Index',

[http://special.mysite.com/foo/](http://special.mysite.com/foo/) => '特殊/Foo/Index/Index'

**想法#1**

我希望为每个模块组使用不同的 module_path 并在模块组周围命名模块路径以确定模块类的唯一性。但是发送到 module_autoloader 的模块似乎只关注传递的任何字符串的第一部分。

例如

```
array('modules' => array(
 'Admin\Admin','Admin\Bob','Admin\Users'
)); 
```

这会得到我不明白的奇怪行为：

*   这三个都将指向正确的模块控制器，但它们会加载 Admin\Admin 的视图（模块列表中的第一个）而不是它们自己的视图。
*   IE /users，加载 Admin\Users\IndexController 但使用视图脚本 Admin\Admin\view\admin\Index\index.phtml

我已经设法通过对 templateInjecter 的一些小改动来解决这个问题，但它看起来很乱。

**想法#2**

只需将模块名称添加到它们的子目录中，例如

```
namespace AdminAdmin\Controller,
class  IndexController {} 
```

**想法**

*   命名空间将优于类前缀
*   我们正在尝试尽可能多地自动化，而不是为每个模块使用硬编码的路由
*   使用共享模块的多个应用程序通过通用 cookie 主机/memcache 和 db 等进行身份验证可能是有意义的......
*   使用模块控制器等的treeRouteStack中的托管类型路由将每个模块路由到某个子域......

**问题：**

*   他们是这种情况或类似情况的最佳实践吗？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:59:31.923

我对您的问题的解释是，您实际上是在问两个问题：

# (1) 命名空间模块

ZF2 本身就可以做到这一点。ZF2 中的模块基本上只是 PHP 命名空间，所以一个名为的模块`Foo\Bar`是完全可以接受的，默认情况下模块加载器会在`module/Foo/Bar`then中查找它的模块类`vendor/Foo/Bar`。

例如，如果你想创建一个模块 Anvil 并在命名空间 Acme 下，你将创建 directory `module/Acme/Anvil`，并在其中创建一个`Module.php`文件：

```
<?php
namespace Acme\Anvil;

class Module
{
    /* module class code goes here */
} 
```

在您的应用程序中`config/application.config.php`，您将添加`Acme\Anvil`到`modules`密钥：

```
return array(
    'modules' => array(
        'Application',
        'Acme\Anvil',
    ),
    // Remaining bits of config array are unchanged
); 
```

# (2) 动态加载模块

您可以采取的一种方法是修改站点的引导程序`index.php`以根据主机名即时修改配置。例如，使用[ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)你可以像这样设置你的`application.config.php`文件：

```
<?php
return array(
    'modules' => array(
        'Application',
        // Other modules common to all sites go here
    ),
    'sites' => array(
        'site-one.mydomain.com' => array(
            'modules' => array(
                'ModuleOne',
                'ModuleTwo',
            ),
        ),
        'site-two.mydomain.com' => array(
            'modules' => array(
                'ModuleThree',
            ),
        ),
    ),
    // Remaining bits of config array are unchanged
); 
```

为了完成这项工作，我们稍作修改以`public/index.php`拦截从中加载的配置数组`config/application.config.php`并重新配置`modules`密钥：

```
// Pick host out of request
$hostname = $_SERVER['HTTP_HOST'];

// Load application configuration
$applicationConfig = require 'config/application.config.php';

// Merge site-specific modules into loaded modules array
$applicationConfig['modules'] = array_merge(
    $applicationConfig['modules'],
    $applicationConfig['sites'][$hostname]['modules']
);

// Run the application!
Zend\Mvc\Application::init($applicationConfig)->run(); 
```

这种方法提供了一种简单的方法来更改为特定主机名加载哪些模块，但可以轻松扩展以允许特定于站点的配置文件自动加载和特定于站点的模块目录。

# c# - GC Generations - 收集问题

> ID：12809365
> 
> 赞同：2
> 
> 时间：2012-10-09T22:32:35.550
> 
> 标签：c#, memory-management, garbage-collection

给定以下代码：

```
namespace GcDemo
{
    class Program
    {
        static void Main(string[] args)
        {
            var list = new List<object>();
            Console.WriteLine("list is in {0} generation.", GC.GetGeneration(list));
            GC.Collect();
            Console.WriteLine("list is in {0} generation.", GC.GetGeneration(list));
            GC.Collect();
            list.Add(new object());
            Console.WriteLine("list is in {0} generation. object is in {1} generation.", GC.GetGeneration(list), GC.GetGeneration(list[0]));
            GC.Collect(0);
            Console.WriteLine("list is in {0} generation. object is in {1} generation.", GC.GetGeneration(list), GC.GetGeneration(list[0]));

        }
    }
} 
```

list 对象在 Gen 2 中，而它是第 0 代中唯一的引用 list[0] 对象。它怎么知道不在 GC.Collect(0) 中收集它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:38:56.663

[这篇文章](http://msdn.microsoft.com/en-us/library/ms973837.aspx)简单地描述了它的工作原理；阅读“使世代与写入障碍一起工作”部分。[这](http://blogs.msdn.com/b/abhinaba/archive/2009/03/02/back-to-basics-generational-garbage-collection.aspx)是另一个很好的博客文章，更详细地解释了技术。

执行摘要是 CLR 发出代码，因此它可以检测到 Gen2 对象的写入时间。它将写入记录到一个数据结构（“卡表”）中，在进行 Gen0 收集时它会检查该数据结构；这允许它找到 Gen2 -> Gen0 引用，而无需在内存中遍历所有对象的全部成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:43:47.837

我是对的，你的问题是，为什么 GC 不收集`list[0]`？

如果是这样，那么答案是，因为`list`内部有对您创建的对象的引用（因为`List<T>`内部有一个数组`T[]`来保存项目）。

所以你的引用链看起来像这样：`Program.Main()`-> `list`-> `list[0]`，因此 GC 不能（也不应该）收集这个对象，不管你的对象在哪一代。

**编辑**：您开始收集 gen 0, ...`list[0]`在 gen 0 + 中引用（见上文）=> GC*不*收集`list[0]`，而是将其移至 gen 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T00:03:25.320

主要规则非常简单，当没有对它的引用时，对象就会被收集。您添加到列表中的对象无法被收集，列表中有对它的引用。无法收集该列表，您的代码有对其的引用。一直到最后一条语句。每次强制收集时，您都会强制对象移动到下一代。

唯一可能对此感到困惑的是垃圾收集器可以看到该列表存储了对该对象的引用。它肯定会。必然如此，您不希望对象随机消失。CLR 所做的很大一部分工作是为垃圾收集器提供尽快发现它所需的信息。

可能更令人困惑的是，它还可以看到您的代码对列表有引用。这是抖动功能的一个重要部分，它构建了一个表格，说明代码的哪一部分引用了局部变量。由于最后一条语句引用了列表，因此您在代码段中看不到这一点。

# android - Android beta 测试服务

> ID：12809367
> 
> 赞同：0
> 
> 时间：2012-10-09T22:32:49.343
> 
> 标签：android, beta-testing

我已经开发了 android 应用程序，并希望对尽可能多的用户进行一些 beta 测试。是否有网络服务可以找到移动 beta 测试人员，最好是志愿者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:07:57.713

在 Google Play 中作为免费应用发布，标题附有“BETA”。

您将获得基于 Google 的错误报告，因此您可以修复错误，然后发布修补版本。

重复此循环，直到您感到满意并感觉项目稳定为止，然后将“BETA”从标题中删除。

# sql - 如何从 sql 中选择超过 6 个月的数据？

> ID：12809371
> 
> 赞同：3
> 
> 时间：2012-10-09T22:33:14.757
> 
> 标签：sql, datediff

如果另一个表中的日期至少比今天早 6 个月，我想从一个表中选择一些数据。我尝试过这样的事情： [如果超过 6 个月，则从 SQL Server 中选择记录，](https://stackoverflow.com/questions/7740849/select-records-from-sql-server-if-greater-than-6-months) 但我收到错误：*子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*
这是我的处理方式：

```
SELECT FCIF, [Date], [Desc]
FROM tblFCIF
WHERE tblFCIF.FCIF =
(SELECT FCIFSignOff.FCIF
FROM FCIFSignOff
WHERE ID='12'
AND (DateDiff(month,SignOffDate,GetDate()) > 0) ) 
```

因此，没有最后一行的这段代码选择了 ID 为 12 的所有内容。我只需要获取 6 个多月前的所有内容。

```
DATEDIFF(datepart,startdate,enddate) 
```

当“月”在白天时，它会返回以月为单位的差异。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T22:35:38.857

而不是你的`DateDiff`线，使用：

```
AND (DateAdd(MM, -6, GetDate()) > SignOffDate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:36:52.943

我不知道你的架构是什么样的。但是，我将继续猜测您需要`IN`操作员，而不是`=`操作员。

```
SELECT FCIF, [Date], [Desc]
FROM tblFCIF
WHERE tblFCIF.FCIF IN
(SELECT FCIFSignOff.FCIF
FROM FCIFSignOff
WHERE ID='12'
AND (DateDiff(month,SignOffDate,GetDate()) > 0) ) 
```

# c# - WinfForms最大化窗口无边框隐藏任务栏

> ID：12809373
> 
> 赞同：1
> 
> 时间：2012-10-09T22:33:18.573
> 
> 标签：c#, .net, winforms

我正在尝试使用自定义关闭和最小化按钮创建一个无边框表单。但是，似乎将边框设置为无并将窗口状态设置为最大化会导致表单隐藏任务栏，这不是我想要的。请注意，我使用的是 Windows 7，我在这里和其他地方阅读了几个答案，似乎对我没有任何帮助，任务栏总是被隐藏。下面列出了一些没有运气的尝试：

*   `this.WindowState = FormWindowState.Maximized; this.FormBorderStyle = FormBorderStyle.None; this.TopMost = true;`

*   `Screen screen = Screen.FromPoint(this.Location); this.Size = screen.WorkingArea.Size; this.Location = Point.Empty;`

*   `this.Bounds = Screen.PrimaryScreen.WorkingArea;`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-21T17:26:52.223

我想这就是你要找的

```
this.MaximumSize = Screen.PrimaryScreen.WorkingArea.Size; 
```

[检查这个](https://stackoverflow.com/questions/975284/maximized-screen-ignores-taskbar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:45:54.220

这是最简单的解决方案：

```
this.Width = Screen.PrimaryScreen.Bounds.Width;
this.Height = Screen.PrimaryScreen.Bounds.Height - 40;

this.Location = new Point();

this.StartPosition = FormStartPosition.Manual; 
```

在此示例中，我假设任务栏是可见的，并且该任务栏位于底部。您可以阅读此问题/答案[如何以编程方式确定 Windows 任务栏是否隐藏？](https://stackoverflow.com/questions/2032461/how-can-i-determine-programmatically-whether-the-windows-taskbar-is-hidden-or-no)为了通过自动检测任务栏状态来扩展我的示例。

下面是如何确定任务栏大小的示例：[如何获取任务栏的位置和大小？](https://stackoverflow.com/questions/1264406/how-do-i-get-the-taskbars-position-and-size).

在我的分辨率下，任务栏大小为 40。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T14:25:43.733

当您将表单边框样式设置为无时，表单将隐藏任务栏。要解决这个问题，您必须手动设置表单的 MaximumSize。如果 Windows 自动隐藏任务栏，表单甚至会覆盖隐藏的任务栏！为了解决这个问题，将最大尺寸高度降低一个像素（如果您的任务栏位于底部）！

```
 Me.MaximumSize = New Size(My.Computer.Screen.WorkingArea.Size.Width, _
                                  My.Computer.Screen.WorkingArea.Size.Height - 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:48:49.123

这似乎是您告诉表单展示的行为 - 如果您告诉它在最上面并将边界明确设置为整个屏幕，它将覆盖任务栏。（这通常在 POS 和触摸屏应用程序中完成）

尝试只设置 FormWindowState.Maximized 而不是告诉边界填满整个屏幕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-06T10:53:50.483

只需将开始位置设置为手动并将 MaximizeBox 属性设置为 true。当通过单击最大化按钮加载并最大化表单时，您可以拥有任务栏！

# c# - 使用 C# 解析 XML

> ID：12809380
> 
> 赞同：1
> 
> 时间：2012-10-09T22:33:57.963
> 
> 标签：c#, xmlreader

我有从 ARIN 获得的 XML 响应：

```
<nets xmlns="http://www.arin.net/whoisrws/core/v1" xmlns:ns2="http://www.arin.net/whoisrws/rdns/v1" xmlns:ns3="http://www.arin.net/whoisrws/netref/v2" termsOfUse="https://www.arin.net/whois_tou.html">
    <limitExceeded limit="256">false</limitExceeded>
    <net termsOfUse="https://www.arin.net/whois_tou.html">
        <registrationDate>2003-05-09T16:14:30-04:00</registrationDate>
        <ref>http://whois.arin.net/rest/net/NET-216-113-160-0-1</ref>
        <ns2:delegations termsOfUse="https://www.arin.net/whois_tou.html">
            <ns2:delegationRef name="186.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/186.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="165.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/165.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="173.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/173.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="189.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/189.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="169.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/169.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="167.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/167.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="171.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/171.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="166.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/166.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="190.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/190.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="188.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/188.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="176.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/176.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="172.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/172.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="170.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/170.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="191.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/191.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="174.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/174.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="162.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/162.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="185.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/185.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="180.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/180.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="168.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/168.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="175.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/175.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="161.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/161.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="179.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/179.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="177.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/177.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="183.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/183.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="181.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/181.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="187.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/187.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="163.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/163.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="184.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/184.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="160.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/160.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="182.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/182.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="178.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/178.113.216.in-addr.arpa.</ns2:delegationRef>
            <ns2:delegationRef name="164.113.216.in-addr.arpa.">http://whois.arin.net/rest/rdns/164.113.216.in-addr.arpa.</ns2:delegationRef>
        </ns2:delegations>
        <endAddress>216.113.191.255</endAddress>
        <handle>NET-216-113-160-0-1</handle>
        <name>EBAY-QA-IT-1</name>
        <netBlocks>
            <netBlock>
                <cidrLength>19</cidrLength>
                <endAddress>216.113.191.255</endAddress>
                <description>Direct Assignment</description>
                <type>DS</type>
                <startAddress>216.113.160.0</startAddress>
            </netBlock>
        </netBlocks>
        <pocs termsOfUse="https://www.arin.net/whois_tou.html"/>
        <orgRef name="eBay, Inc" handle="EBAY">http://whois.arin.net/rest/org/EBAY</orgRef>
        <parentNetRef name="NET216" handle="NET-216-0-0-0-0">http://whois.arin.net/rest/net/NET-216-0-0-0-0</parentNetRef>
        <startAddress>216.113.160.0</startAddress>
        <updateDate>2012-03-02T08:03:18-05:00</updateDate>
        <version>4</version>
    </net>
</nets> 
```

我正在尝试获取此信息：

[http://whois.arin.net/rest/org/EBAY](http://whois.arin.net/rest/org/EBAY)

从这一行：

```
<orgRef name="eBay, Inc" handle="EBAY">http://whois.arin.net/rest/org/EBAY</orgRef> 
```

如何使用 C# 获取此信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:39:57.077

使用 Linq-Xml（在 .Net 3.5 及更高版本中可用），您可以使用以下代码片段来完成：

```
XNamespace xns = "http://www.arin.net/whoisrws/core/v1"; //The default xmlns from the root element.

var orgRefHandle =
  XDocument.Parse(xml)
  .Root
  .Element(xns + "net")
  .Element(xns + "orgRef")
  .Attribute("handle").Value; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T22:40:28.487

一种方法是使用`XmlDocument`：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xmlString);

foreach(XmlElement ele in xmlDoc.DocumentElement.GetElementsByTagName("net"))
{
    // Writes value to console.
    Console.WriteLine(((XmlElement)ele.GetElementsByTagName("orgRef")).Attributes["handle"].Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:40:44.127

将内容加载到 XmlDocument 中，然后您可以使用 XPath 查询使用 SelectSingleNode: 获取节点的属性`/nets/limitexceeded/net/orgref/@Name`并获取值。

# mysql - 如何创建带有括号的 SQL 列名

> ID：12809382
> 
> 赞同：0
> 
> 时间：2012-10-09T22:34:01.757
> 
> 标签：mysql, sql, brackets

我想知道是否有一个 SQL 命令可以让我将括号 [] 包裹在现有的列名周围。

例如，在 中`MyTable`，我有标题为`1`、`2`、`3`、的列`4`。我想更改这些，以便它们的新列名是`[1]`, `[2]`, `[3]`, `[4]`。

有没有让我这样做的 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:44:12.877

在 Sql Server 上，这可以完成这项工作：

```
select 1 AS "[1]" 
```

当然，这会选择文字整数 1。要选择一个名为 1 的字段，您需要这样做：

```
select [1] AS "[1]" 
```

我同意评论者的观点，整个想法似乎充满了危险，但如果您正在处理遗留/专有数据，有时您别无选择。

如果要自动执行此操作，可以运行以下代码（或将其制成存储过程以供重复使用）：

```
BEGIN
    DECLARE @Comma AS VARCHAR(2)
    DECLARE @Sql as VARCHAR(5000)
    DECLARE @Column AS VARCHAR(50)

    SET @Sql = 'SELECT '
    SET @Comma = ''

    DECLARE ColCsr CURSOR FOR
        SELECT COLUMN_NAME from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = 'MyTable' 

    OPEN ColCsr
    FETCH NEXT FROM ColCsr INTO @Column

    WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @Sql = @Sql + @Comma + @Column + ' AS "[' + @Column + ']"'
        SET @Comma = ', '
        FETCH NEXT FROM ColCsr INTO @Column
    END
    CLOSE ColCsr
    DEALLOCATE ColCsr

    SET @Sql = @Sql + ' FROM MyTable'

    EXEC (@Sql)
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:45:42.270

在 SQL Server 中，我猜你可以这样做：

```
select [1] as [[1]]], [2] as [[2]]] ... 
```

不过，这似乎是一个奇怪的要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:46:12.517

括号是一种 SQL Server/T-SQL 语法。列名称没有括号作为名称的一部分。括号仅在编写 SQL 语句时使用，以允许该列名可以是一些保留关键字。这样你就可以有一个名为“table”的列：

```
CREATE TABLE [MyTable](
[Table] [nchar](10) NULL, 
[Column] [nchar](10) NULL, 
)
GO

SELECT [Table], [Column] from MyTable
GO 
```

# windows-8 - Windows 8 时间触发后台任务

> ID：12809384
> 
> 赞同：1
> 
> 时间：2012-10-09T22:34:08.390
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我想每 8 小时执行一次后台任务（更频繁也可以）。如果在应该执行后台任务时计算机关闭或休眠，它是否会跳过该迭代？

假设它确实如此，我的下一个要求是在计算机退出休眠或打开时安排它。后者很简单；我可以在会话开始时安排系统触发的后台任务。但是我不确定当用户“取消休眠”计算机时如何处理这种情况。对这个有什么建议吗？UserPresent 触发器看起来很有希望，但我无法找到任何关于何时触发的定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:56:19.307

请参阅此评论：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx#10318589](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/24/being-productive-in-the-background-background-tasks.aspx#10318589)

所以不，如果系统正在睡眠/休眠，可能会跳过 TimeTrigger。

可在此处找到可用条件：http: [//msdn.microsoft.com/en-US/library/windows/apps/windows.applicationmodel.background.systemconditiontype](http://msdn.microsoft.com/en-US/library/windows/apps/windows.applicationmodel.background.systemconditiontype)

我建议您创建两个后台任务（我对后台任务没有太多经验，所以我什至不确定这有多大可能）。一个用于 TimeTrigger，另一个使用 UserPresent 条件运行。如果 TimeTrigger 成功运行，请在某处存储带有上次运行时间的标志或值，当第二个任务即将运行时，检查此标志/上次运行时间，然后根据需要中止或继续。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T23:36:49.970

我的建议是下载以下 SDK 示例：

[http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9)

运行示例，使用 TimeTrigger 注册后台任务，并在任务设置完成前不久使机器休眠。然后，等待足够长的时间让任务计时器到期，然后恢复机器（保持示例应用程序运行），然后切换回示例应用程序并查看任务是否完成。

这应该告诉您任务是否会在恢复时执行。

# asp.net-mvc - 在 MVC 3 Razor 视图中，当布局需要嵌套表单时，如何发布到不同的操作？

> ID：12809386
> 
> 赞同：3
> 
> 时间：2012-10-09T22:34:17.253
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, nested-forms

使用我的一些 MVC 3 Razor 视图时，我发现需要嵌套表单，这是不可能的（在 HTML 中不允许）。

有一个表格，针对特定操作，包含一个表格。但是在 some/all/one_particular tablerow 我需要针对一个单独的操作。例如：

```
@using (Html.BeginForm("EditPersons"))
{
    <table>
        <tr>
            <th>Name</th>
            <th>Age</th>
        </tr>
        @for (int i=0; i < Model.Persons.Count; i++)
        {
            <tr>
                <td>@Html.TextBox(...)</td>
                <td>@Html.TextBox(...)</td>
            </tr>
        }
            <tr>
                <td></td>
                <td>
                    @using (Html.BeginForm("AddPerson")
                    {
                        <input type="submit" value="Add person" />
                    }
                </td>
            </tr>
    </table>
} 
```

现在，我显然可以将“添加人员”按钮放在整个表格下方，但是我如何让它与第二个表格列对齐？

另外，我可以让“添加人员”按钮在隐藏字段中放置一些“命令”，并让 EditPersons 操作检查是否应该添加人员或为现有人员保存更新的数据，但我觉得这有点击败单一目的行为的范式（与可怕的老式 ASP“自发”形式相反）。

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:25:49.280

嗨，我不明白您如何需要 2 个表单以及为什么需要使用服务器端技术。

我确信有人能够使用 asp.net mvc 技术找到解决方案，但就我而言，javascript 会轻而易举地做到这一点。因此，您希望能够在提交整个表单之前向服务器发送一些值，或者您可能希望表单的某些部分以不同的方式工作，而不是作为一个整体工作。没关系。无论哪种方式 javascript 都是您的语言，请考虑对您的代码进行这些更改（使用 jQuery）：

```
@using (Html.BeginForm("EditPersons"))
{
    <table>
        <tr>
            <th>Name</th>
            <th>Age</th>
        </tr>
        @for (int i=0; i < Model.Persons.Count; i++)
        {
            <tr>
                <td>@Html.TextBox(...)</td>
                <td>@Html.TextBox(...)</td>
            </tr>
        }

        <tr>
            <td><input type="text" id="field" name="field"/></td>
            <td>
                <input type="button" id="btnAddPerson" value="Add person" />
            </td>
        </tr>
        <tr><td colspan="2"><input type="submit" value="send the whole thing" /></td></tr>

 }
 <script>
    $(document).ready(function(){
        $("#btnAddPerson").click(function(event){
            event.stopPropagation();
            $.post("/actionTohandle/addperson", { person : $("#field").val()}, function(data){
                //do something with the result
            })
        })
    })
 </script> 
```

如果单击添加人员按钮，它将向服务器端发送 POST 请求，FormCollection 对象将只有一个键，即 collection["field"]。我正在调用的操作 (AddPerson) 在 ActionToHandleController 上。另一方面，如果您单击提交按钮，您将在（我猜）PersonsController 上调用 EditPersons。因此，您可以在 2 个不同的位置（控制器）上执行 2 个不同的操作。相同的形式。这个例子只是冰山一角。这是 ASP.NET MVC 的一大特色，您拥有更多的灵活性，并且并非所有内容都必须作为服务器端脚本处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:02:33.673

仅供参考，将表单标签放在表格中（即环绕 tr 标签）是不合法的 HTML。它适用于某些（大多数？）浏览器，但不能保证它会起作用，也不能保证移动浏览器会支持它。

那么问你如何做一些无效的事情来避免做其他同样无效的事情到底有什么意义呢？

正确的方法是将表格包装在一个表格中。然后，您在每一行上使用提交按钮，但您给每个按钮一个稍微不同的 id，例如“Submit_1”，然后您确定哪个行按钮被点击了哪个按钮，哪个按钮出现在发布的值中。

其他可能性是让 JavaScript 在您单击按钮时执行：

```
<input type="button" onclick="SubmitMyForm(15)" /> 
```

您有一个名为 SubmitMyForm 的方法，该方法采用行号参数（或您要使用的任何其他标识符，也许您可​​以使用 jquery 提取数据属性值来标识行）。

最后，在表格的底部，您可以调用不同的方法，例如“AddPerson”，它将修改表单的操作属性，然后调用 form.submit() 并将其发布到不同的操作。虽然老实说，在大多数情况下，您不需要为此发帖。您只需使用重定向到新页面的链接即可。

在任何情况下，您都不需要嵌套表单（无效），即使将 tr 包装在表单中是合法的（实际上并非如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:30:50.277

目前尚不清楚您要通过这种形式实现什么......我想说应该只有一种形式：编辑或创建 - 哪个应该决定您的服务器（或客户端）逻辑。但是，如果您确实需要两个“嵌套”表单，则可以考虑使用 jquery .ajax 方法调用操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:46:36.050

我目前正在做类似的事情。我将要执行的操作存储在输入元素中。

```
<input type="submit" value="Add person" data-action"/AddPerson"> 
```

然后通过订阅单击或提交表单`Action=""`，使用[.Data()](http://api.jquery.com/data/#data-html5)将表单更改为数据操作。

# jquery - IE 中的 jQuery focus() 和 focusout() 冲突

> ID：12809388
> 
> 赞同：1
> 
> 时间：2012-10-09T22:34:44.243
> 
> 标签：jquery, internet-explorer

不知道如何解决这个问题。

我正在使用`jQuery.focus()`并`jQuery.focusout()`触发 Ajax 请求并重命名 WordPress 中的帖子。此代码在 Chrome 和 Firefox 中运行正常，但我无法在 IE 上运行。

片段：

```
$('.editname').on('click', function() {

    var input = $('<input id="editcat" type="text" name="editcat" value="' + name + '" />');
    input.appendTo($(this));
    $("#editcat").focus();
});

$(".editname").focusout(function() {

    $(this).children('input').detach();
    $(this).children('span').show();

}); 
```

**工作示例：http:** [//jsfiddle.net/moraleida/fE5Tq/3/](http://jsfiddle.net/moraleida/fE5Tq/3/)

似乎在浏览器有时间处理附加输入`appendTo`之前，在 IE之后立即调用了 focusout() 事件。`focus()`

是否有已知的解决方法？

**编辑**

更改`focusout`为`blur`不起作用。显然，问题在于调用`$("#editcat").focus();`会使`.editname`焦点松散/模糊。如果我评论那条线，输入看起来没问题，但是当我点击关注它时，它就会分离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:36:52.367

尝试使用模糊事件

```
$(".editname").on('blur', function() {

    $(this).children('input').detach();
    $(this).children('span').show();

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:10:21.040

事实证明，问题在于附加`focusout`到父元素，而不是`input`元素。这解决了它：

```
$(".editname").on('focusout', 'input', function() {

    // $(this) now refers to the input element, not .editname
    $(this).siblings('span').show();
    $(this).detach();

    });
});​ 
```

最终工作小提琴供参考：http: [//jsfiddle.net/moraleida/fE5Tq/8/](http://jsfiddle.net/moraleida/fE5Tq/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:38:19.813

尝试使用模糊事件而不是 focusout。

# regex - 匹配自定义标签

> ID：12809391
> 
> 赞同：0
> 
> 时间：2012-10-09T22:35:23.833
> 
> 标签：regex

你能告诉我如何匹配由以下组成的字符串：

*   一些文字
*   以“小于”开头的东西，然后是任何中间`cat, dog, pen <cat>`和大于
*   然后可能会出现一些文本，或者什么都没有，例如`<cat> some text`
*   然后关闭相同的标签，例如`<cat> some text </cat>`
*   最终被一些文本和其他标签所取代

所以一个例子可能是

```
some text <cat> another text </cat> <dog> </dog> other text <pen> bla bla bla </pen> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:38:46.047

你需要回溯。根据您使用的正则表达式的风格，类似的东西可能会起作用：

```
<(cat|dog|pen)>.*<\/\1> 
```

以上将在 Perl 中工作。但是，YMMV 取决于您使用的工具。例如，在 sed 中，以下将起作用：

```
<\(cat\|dog\|pen\)>.*<\/\1> 
```

正如评论中所指出的，`.*`中间的不应该是贪婪的，否则它只会匹配`<dog>blah</dog> <dog>foo</dog>`一次。具体如何做取决于正则表达式引擎。

在一个简单的情况下，您不允许在两者之间使用*任何*标签：

```
<(cat|dog|pen)>[^<>]*<\/\1> 
```

或者，在 Perl 中，您可以使正则表达式不贪心：

```
<(cat|dog|pen)>.*?<\/\1> 
```

或者你可以在不回溯的情况下做到这一点，但这是步法：

```
 (<cat>.*?<\/cat>|<dog>.*?<\/dog>|<pen>.*?<\/pen>) 
```

# iphone - 延迟加载 TableView 图像不一致

> ID：12809392
> 
> 赞同：1
> 
> 时间：2012-10-09T22:35:26.857
> 
> 标签：iphone, objective-c

我懒惰地将标志图像加载到具有 16 个国家/地区的 tableview 上。这是我的代码：

```
#import "ViewController.h"

@implementation ViewController
@synthesize tableView;
@synthesize countryNamesArray;
@synthesize receivedData; 
@synthesize flagImage;
@synthesize flagImagesArray;
@synthesize requestsAlreadyMade;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle
-(void)issueRequest:(NSString *)fullCountryImageURL{

    NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:fullCountryImageURL]
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:60.0];
    // create the connection with the request
    // and start loading the data
    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if (theConnection) {
        // Create the NSMutableData to hold the received data.
        // receivedData is an instance variable declared elsewhere.
        receivedData = [NSMutableData data];                                    
    } 
    else {
        // Inform the user that the connection failed.
    }
}

- (void)viewDidLoad
{   
    requestsAlreadyMade = [[NSMutableArray alloc]init];
    flagImagesArray = [[NSMutableArray alloc]init];
    for(int x=0; x<16; x++){
        [flagImagesArray insertObject:[UIImage imageNamed: @"jollyroger_poisonflag.jpg"] atIndex:x];

    }
    countryNamesArray=[[NSArray alloc] initWithObjects:@"India",@"USA",@"Antarctica",@"Brazil",@"Canada",@"China",@"France",@"Germany",@"Italy",@"Japan",@"Kenya",@"Malaysia",@"Mexico",@"South Africa",@"United Kingdom",@"Vietnam",nil];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

-(NSInteger)tableView:(UITableView *)tableview numberOfRowsInSection:(NSInteger)section{
    return 16;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    // This method is called when the server has determined that it
    // has enough information to create the NSURLResponse.

    // It can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.

    // receivedData is an instance variable declared elsewhere.
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [receivedData appendData:data];
}
- (void)connection:(NSURLConnection *)connectiondidFailWithError:(NSError *)error
{
    // release the connection, and the data object
    // receivedData is declared as a method instance elsewhere

    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // do something with the data
    // receivedData is declared as a method instance elsewhere
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);
    flagImage = [UIImage imageWithData: receivedData];
    if([receivedData length]==19935){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==0)
                [flagImagesArray replaceObjectAtIndex:0 withObject:flagImage];
        }
    }
    else if([receivedData length]==9280){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==1)
                [flagImagesArray replaceObjectAtIndex:1 withObject:flagImage];
        }
    }
    else if([receivedData length]==9567){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==2)
                [flagImagesArray replaceObjectAtIndex:2 withObject:flagImage];
        }
    }
    else if([receivedData length]==12152){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==3)
                [flagImagesArray replaceObjectAtIndex:3 withObject:flagImage];
        }
    }
    else if([receivedData length]==10903){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==4)
                [flagImagesArray replaceObjectAtIndex:4 withObject:flagImage];
        }
    }
    else if([receivedData length]==11298){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==5)
                [flagImagesArray replaceObjectAtIndex:5 withObject:flagImage];
        }
    }
    else if([receivedData length]==8682){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==6)
                [flagImagesArray replaceObjectAtIndex:6 withObject:flagImage];
        }
    }
    else if([receivedData length]==6865){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==7)
                [flagImagesArray replaceObjectAtIndex:7 withObject:flagImage];
        }
    }
    else if([receivedData length]==10567){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==8)
                [flagImagesArray replaceObjectAtIndex:8 withObject:flagImage];
        }
    }
    else if([receivedData length]==9423){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==9)
                [flagImagesArray replaceObjectAtIndex:9 withObject:flagImage];
        }
    }
    else if([receivedData length]==8962){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==10)
                [flagImagesArray replaceObjectAtIndex:10 withObject:flagImage];
        }
    }
    else if([receivedData length]==12238){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==11)
                [flagImagesArray replaceObjectAtIndex:11 withObject:flagImage];
        }
    }
    else if([receivedData length]==5980){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==12)
                [flagImagesArray replaceObjectAtIndex:12 withObject:flagImage];
        }
    }
    else if([receivedData length]==10562){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==13)
                [flagImagesArray replaceObjectAtIndex:13 withObject:flagImage];
        }
    }
    else if([receivedData length]==9690){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==14)
                [flagImagesArray replaceObjectAtIndex:14 withObject:flagImage];
        }
    }
    else if([receivedData length]==11590){
        for (NSIndexPath *indexPath in [tableView indexPathsForVisibleRows]){
            if(indexPath.row==15)
                [flagImagesArray replaceObjectAtIndex:15 withObject:flagImage];
        }
    }

    [tableView reloadData];
}

-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellIdentifier = @"countryCell";
    static int numberOfRequests=0;
    UITableViewCell *cell=(UITableViewCell *) [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell==nil){
        cell=[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    // Create the request.

    NSString *flagImageURLPartOne = @"http://www.imageslink/";
    NSString *countryNumber = [NSString stringWithFormat:@"%i", indexPath.row+1];
    NSString *flagImageURLPartTwo = @".png";
    NSString *fullCountryImageURL = [NSString stringWithFormat:@"%@%@%@", flagImageURLPartOne, countryNumber, flagImageURLPartTwo];
    if(!([requestsAlreadyMade containsObject:fullCountryImageURL])){
         [self issueRequest:fullCountryImageURL];
         [requestsAlreadyMade addObject:fullCountryImageURL];
    }

    cell.imageView.image=[flagImagesArray objectAtIndex:indexPath.row];
    cell.textLabel.text= [countryNamesArray objectAtIndex:indexPath.row];

    return cell;
}

-(void) tableView:(UITableView *) tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
}

@end 
```

所以我遇到的问题有点奇怪。当 tableview 首次加载时，初始可见行加载得很好。如果我快速向下滚动到列表的后半部分，所有其他图像延迟加载也很好。但是，如果我非常缓慢地向下滚动，即使在我停止滚动之后，我的国家的一张图片也永远不会加载。有没有人有任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:27:01.157

我可以通过更改“(void)connectionDidFinishLoading:(NSURLConnection *)connection”方法中的代码来解决此问题，以检查基于方法 [NSURLConnection currentRequest] 而不是按大小下载的图像。这将代码简化为只有一个 if 语句和循环，我认为这提高了我需要防止不稳定的性能。

# php - 如何将 AmazonSTS 与 aws php sdk 一起使用？

> ID：12809393
> 
> 赞同：1
> 
> 时间：2012-10-09T22:35:27.453
> 
> 标签：php, sdk, amazon-web-services

我正在尝试使用 aws sdk for php 为用户创建临时凭据。据我所知，这应该只是通过 IAM 为我的 sdk 用户添加 sts 策略的情况：

```
{
  "Statement": [
    {
      "Sid": "Stmt1349820612345",
      "Action": "sts:*",
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
} 
```

然后实例化 sts 类，如示例所示：

```
 // Instantiate the class
  $token = new AmazonSTS();

// Generate a new IAM policy
  $policy = new CFPolicy($token, array(
    'Statement' => array(
      array(
        'Sid' => 'SID' . time(),
        'Action' => array(
          's3:ListBucket'
        ),
        'Effect' => 'Allow',
        'Resource' => 'arn:aws:s3:::my-bucket'
      )
    )
  ));

// Fetch the session credentials
  $response = $token->get_federation_token('my-user', array(
    'Policy' => $policy->get_json(),
    'DurationSeconds' => 3600
  ));

  $credentials = $response->body->GetFederatedTokenResult->Credentials
    ->to_array()->getArrayCopy();
  return $credentials; 
```

当我使用常规临时凭证令牌时它工作正常：

```
$token = new AmazonSTS();
$response = $token->get_session_token();

$credentials = $response->body->GetSessionTokenResult->Credentials->to_array()->getArrayCopy(); 
```

有没有人有一个可行的例子或者可以看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:03:37.987

终于[在有效的 s3 文档中找到了](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AuthUsingTempFederationTokenPHP.html)这个

```
 $AccessKeyId = (string)$response->
    body->GetFederationTokenResult->Credentials->AccessKeyId;
  $SecretAccessKey = (string)$response->
    body->GetFederationTokenResult->Credentials->SecretAccessKey;
  $SessionToken = (string)$response->
    body->GetFederationTokenResult->Credentials->SessionToken; 
```

所以这行得通

```
$credentials = $response->body->GetFederationTokenResult->Credentials->to_array()->getArrayCopy(); 
```

# html - 居中导航栏

> ID：12809394
> 
> 赞同：0
> 
> 时间：2012-10-09T22:35:33.580
> 
> 标签：html, css, navbar, margins

我正在尝试制作自己的导航栏，以更好地了解如何创建良好的导航栏。我遇到的问题是我的导航栏居中。现在我知道使用使用 margin-left: auto 和 margin-right: auto 通常可以做到这一点，我过去曾使用过，但在这种情况下，无论我将这些样式元素放在哪里，我的导航栏似乎都不是居中。我将我的身体设置为 100%，并在下面提供了我的代码。*注意：我已经为我的导航栏尝试了一个容器并将其居中，但它似乎仍然不起作用。

```
#navbar ul {
list-style-type:none;
color: #000;
padding: 0px;
text-align: center;
}
li:hover {
background-color: #cc2c32;
padding: 16px .1px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
}
.subcategory {
display: none;
width: 1031px;
height: 200px;
background-color: #cc2c32;
color: #03F;
position: absolute;
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
margin-top: 15px;
}
li:hover .subcategory {
display: block;
}
#navbar {
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
background-color: #dee8ff;
float: left;
font-family: Arial, Helvetica, sans-serif;
margin-left: auto;
margin-right: auto;
}
#navbar ul li {
display: inline;
}
#navbar ul li a {
padding: 0 1.5em;
text-decoration: none;
}
ol {
list-style-type: none;
float: left;
display: block;
}
.contentwrapper {
margin-top: 10px;
margin-bottom: 10px;
height: 180px;
width: 200px;
background-color: inherit;
position: relative;
color: #2d4594;
}
a:link {
color: #2d4594;
text-decoration: none;
}
a:visited {
color: #2d4594;
text-decoration: none;
}
a:hover {
color: #2d4594;
text-decoration: none;
} 
```

我的 HTML 是

```
<body>
<div id="navbar">
  <ul> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory">
            <div class="contentwrapper">
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            <ol>Hey</ol>
            </div>
        </div>
    </li>
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory"></div>
    </li> 
</ul> 
</div> 
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:46:01.580

这就是 inline-block 是你朋友的地方。不要使用浮点数。

```
#navbar {
    text-align: center;
}

#navbar > ul {
    display: inline-block;
    vertical-align: top;
    *display: inline;
    *zoom: 1;
} 
```

编辑：添加[菲德尔](http://jsfiddle.net/ryanwheale/QdahU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:47:07.573

使用 #navbar 上的 float:left 您将无法使用 marin-left|right:auto 技巧。如果你只是删除浮动，#navbar 将是 100% 宽，这也不是一个选项。

简单的解决方案：

1.  从#navbar 中删除浮动并在#navbar 上使用固定宽度，并在左右两侧使用自动边距。

2.  从 #navbar 中删除 float 并在 #navbar 上使用 display:inline-block 并在其父元素上添加 text-align:center 。如有必要，在#navbar li 上设置 text-align:left 。

3.  从#navbar 中删除浮动并为#navbar 列表项设置display:inline-block，并在#navbar 上使用text-align:center。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:42:33.040

从您的**#navbar{}** css 中删除**float: left 。**然后你可能想移动**背景颜色：#dee8ff;** 到一个子元素，你可能会稍微调整填充。

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:41:14.803

删除和添加（宽度取自子类别类`float:left`）`#navbar``width: 1031px; margin:0 auto`

```
#navbar {
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
background-color: #dee8ff;
width: 1031px;
font-family: Arial, Helvetica, sans-serif;
margin:0 auto
} 
```

演示[http://jsfiddle.net/KLP8d/](http://jsfiddle.net/KLP8d/)****

# java - Java Swing 中的 IllegalComponentStateException

> ID：12809396
> 
> 赞同：6
> 
> 时间：2012-10-09T22:35:40.617
> 
> 标签：java, swing, java-7

在做一个基于 java swing 程序的时候，我遇到了一个奇怪的错误，我只在我的电脑上遇到了一个奇怪的错误（我尝试了另外 2 个，一切都很好）。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class ModalDialogsTest extends JFrame implements ActionListener{

        private JButton choice;

        ModalDialogsTest(){
                setSize(400,300);
                JPanel panel = new JPanel();
                getContentPane().add(panel);
                panel.setLayout(new BoxLayout(panel,BoxLayout.Y_AXIS));
            choice = new JButton("My button");
            panel.add(choice);
            choice.addActionListener(this);
        }

        public void actionPerformed(ActionEvent event){
                        simpleStringChoiceDialog();
        }

        private void simpleStringChoiceDialog(){
                Object[] possibilities = {"choice 1", "choice 2", "choice 3"};
                String s = (String)JOptionPane.showInputDialog(
                                    this, null, null,
                                    JOptionPane.PLAIN_MESSAGE, null,
                                    possibilities, possibilities[0]);
                System.out.println(s);
        }

        public static void main(String[] args) {
                ModalDialogsTest newWindow = new ModalDialogsTest();
                newWindow.setVisible(true);
        }
} 
```

问题是当我单击下拉菜单选择选项时出现错误。错误是：

```
 java.awt.IllegalComponentStateException: component must be showing on the screen to determine its location
    at java.awt.Component.getLocationOnScreen_NoTreeLock(Component.java:2044)
    at java.awt.Component.getLocationOnScreen(Component.java:2018)
    at sun.lwawt.macosx.CAccessibility$22.call(CAccessibility.java:390)
    at sun.lwawt.macosx.CAccessibility$22.call(CAccessibility.java:388)
    at sun.lwawt.macosx.LWCToolkit$CallableWrapper.run(LWCToolkit.java:527)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:241)
    at sun.lwawt.macosx.LWCToolkit$CPeerEvent.dispatch(LWCToolkit.java:684)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:155)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at javax.swing.JOptionPane.showInputDialog(JOptionPane.java:583)
    at ModalDialogsTest.simpleStringChoiceDialog(ModalDialogsTest.java:109)
    at ModalDialogsTest.actionPerformed(ModalDialogsTest.java:70)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
    choice 2 
```

## 如您所见，发生了错误，但我仍然可以获得函数的结果，所以我不知道出了什么问题......有什么线索吗？我在 MacOS X Mountain Lion 上使用 Java 7。

好的，这是您问我的结果：
System.out.println(System.getProperty("java.vm.name")); 给我：

```
Java HotSpot(TM) 64-Bit Server VM. 
```

System.getProperties().list(System.out); 给我：

```
-- listing properties --
java.runtime.name=Java(TM) SE Runtime Environment
sun.boot.library.path=/Library/Java/JavaVirtualMachines/jdk...
java.vm.version=23.3-b01
user.country.format=IE
gopherProxySet=false
java.vm.vendor=Oracle Corporation
java.vendor.url=http://java.oracle.com/
path.separator=:
java.vm.name=Java HotSpot(TM) 64-Bit Server VM
file.encoding.pkg=sun.io
user.country=FR
sun.java.launcher=SUN_STANDARD
sun.os.patch.level=unknown
java.vm.specification.name=Java Virtual Machine Specification
user.dir=/Users/hugo/Documents/workspace/dialogs
java.runtime.version=1.7.0_07-b10
java.awt.graphicsenv=sun.awt.CGraphicsEnvironment
java.endorsed.dirs=/Library/Java/JavaVirtualMachines/jdk...
os.arch=x86_64
java.io.tmpdir=/var/folders/2n/q2bb2df90qqb_x38djlwx...
line.separator=

java.vm.specification.vendor=Oracle Corporation
os.name=Mac OS X
sun.jnu.encoding=US-ASCII
java.library.path=/Users/hugo/Library/Java/Extensions:/...
java.specification.name=Java Platform API Specification
java.class.version=51.0
sun.management.compiler=HotSpot 64-Bit Tiered Compilers
os.version=10.8
http.nonProxyHosts=local|*.local|169.254/16|*.169.254/16
user.home=/Users/hugo
user.timezone=
java.awt.printerjob=sun.lwawt.macosx.CPrinterJob
file.encoding=US-ASCII
java.specification.version=1.7
user.name=hugo
java.class.path=/Users/hugo/Documents/workspace/dialo...
java.vm.specification.version=1.7
sun.arch.data.model=64
java.home=/Library/Java/JavaVirtualMachines/jdk...
sun.java.command=ModalDialogsTest
java.specification.vendor=Oracle Corporation
user.language=fr
user.language.format=en
awt.toolkit=sun.lwawt.macosx.LWCToolkit
java.vm.info=mixed mode
java.version=1.7.0_07
java.ext.dirs=/Users/hugo/Library/Java/Extensions:/...
sun.boot.class.path=/Library/Java/JavaVirtualMachines/jdk...
java.vendor=Oracle Corporation
file.separator=/
java.vendor.url.bug=http://bugreport.sun.com/bugreport/
sun.cpu.endian=little
sun.io.unicode.encoding=UnicodeBig
sun.font.fontmanager=sun.font.CFontManager
socksNonProxyHosts=local|*.local|169.254/16|*.169.254/16
ftp.nonProxyHosts=local|*.local|169.254/16|*.169.254/16
sun.cpu.isalist= 
```

编辑：我忘了提到我在另一台和我的完全一样的mac上试过（除了我的内存更多，但没关系）和windows 7电脑上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-16T17:41:01.737

我在 Mac Yosemite 上使用 Java 7 时遇到了同样的问题。在我的情况下，它是由一个名为“Cinch”的第三方工具引起的，我用它来在桌面上安排我的窗口。停用该工具会使异常消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-01T19:02:40.627

您是否正在使用（否则非常出色）窗口管理增强器[zoom](http://www.coderage-software.com/zooom/index.html)？

我在使用某些 Java GUI 时总是会出现这个错误，即使使用像 Matlab 这样的商业软件也是如此。

除了混乱的控制台之外，它似乎从来没有真正打扰过任何功能。

不幸的是，我没有解决方案。但也许知道这可能是原因是有帮助的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T22:51:45.093

Rewrite as Hovercraft Full Of Eels 说：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            ModalDialogsTest newWindow = new ModalDialogsTest();
            newWindow.setVisible(true);
        }
    });

} 
```

该异常不应再出现。

编辑：

用Oracle Java7编译和运行没有问题。看起来 OpenJDK for Mac 有一些[问题](http://java.net/jira/browse/MACOSX_PORT-337)。如果我没有看到这一点，我会确信您没有发布整个堆栈跟踪。~~*请再次验证您是否已发布整个堆栈跟踪。*如果您已经发布了整个堆栈跟踪~~，那么：

1.  您使用的是 OpenJDK 还是[Oracle Java](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)？

2.  另外两台电脑也是 Mac 还是？

要检查您正在使用的 JVM 实现，请将此行放入您的代码中：

```
System.out.println(System.getProperty("java.vm.name")); 
```

并发布输出。如果输出为空，请输入以下行：

```
System.getProperties().list(System.out); 
```

并发布输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T23:34:58.473

只是一个想法。使您的`panel`变量成为全局变量，然后将`showInputDialog`from的第一个参数更改`this`为`panel`。

```
 String s = (String)JOptionPane.showInputDialog(
                                panel, null, null,
                                JOptionPane.PLAIN_MESSAGE, null,
                                possibilities, possibilities[0]); 
```

编辑：

我认为这些行

```
at javax.swing.JOptionPane.showInputDialog(JOptionPane.java:583)
at ModalDialogsTest.simpleStringChoiceDialog(ModalDialogsTest.java:109) 
```

表明问题是 的`parentComponent`论点`showInputDialog`。更改您的代码并创建一个`JFrame`而不是扩展它。另请参阅[此](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=19861)和[此](http://www.moparscape.org/smf/index.php?topic=382718.0)

编辑2：

我稍微更改了您的代码，运行它，如果异常仍然存在，那么我不知道还有什么问题......

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ModalDialogsTest implements ActionListener{

    private JButton choice;
    private JPanel panel = new JPanel();
    private JFrame frame = new JFrame();

    ModalDialogsTest() {
        frame.getContentPane().add(panel);
        panel.setLayout(new BoxLayout(panel,BoxLayout.Y_AXIS));
        choice = new JButton("My button");
        panel.add(choice);
        choice.addActionListener(this);        
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400,300);
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent event) {
        simpleStringChoiceDialog();
    }

    private void simpleStringChoiceDialog() {
        Object[] possibilities = {"choice 1", "choice 2", "choice 3"};
        String s = (String)JOptionPane.showInputDialog(
                    frame.getContentPane(), null, null,
                    // panel, null, null,                   // <-- or this
                    JOptionPane.PLAIN_MESSAGE, null,
                    possibilities, possibilities[0]);
                    System.out.println(s);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ModalDialogsTest();
            }
        });
    }
} 
```

# matrix - 5x7 LED 矩阵的 Arduino 代码不起作用

> ID：12809399
> 
> 赞同：1
> 
> 时间：2012-10-09T22:35:51.850
> 
> 标签：matrix, arduino, led

我想知道我在这个项目中做错了什么。我有一个 8x8 矩阵代码并试图将其调整为我的 5x7 [LED](http://en.wikipedia.org/wiki/Light-emitting_diode)矩阵。

因此，重要的是要记住我正在使用 FrequencyTimer2 库，并且由于[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)端口的数量，我只能使用橙色 LED。

LED 矩阵 5x7 映射：

![在此处输入图像描述](../Images/b4898ae5cb7de130a65e35e2a6d264b0.png)

[原始代码](http://www.arduino.cc/playground/Main/DirectDriveLEDMatrix)（第一个示例代码）

改编代码：

```
/*
 * Show messages on an 8x8 LED matrix,
 * scrolling from right to left.
 *
 * Uses FrequencyTimer2 library to
 * constantly run an interrupt routine
 * at a specified frequency. This
 * refreshes the display without the
 * main loop having to do anything.
 *
 */

#include <FrequencyTimer2.h>

#define SPACE { \
    {0, 0, 0, 0, 0},  \
    {0, 0, 0, 0, 0}, \
    {0, 0, 0, 0, 0}, \
    {0, 0, 0, 0, 0}, \
    {0, 0, 0, 0, 0}, \
    {0, 0, 0, 0, 0}, \
    {0, 0, 0, 0, 0}, \
}

#define H { \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 1, 1, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
 }

#define E  { \
    {1, 1, 1, 1, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 1, 1, 1, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 1, 1, 1, 0}  \
}

#define L { \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 0, 0, 0, 0}, \
    {1, 1, 1, 1, 0}  \
}

#define O { \
    {1, 1, 1, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 0, 0, 1, 0}, \
    {1, 1, 1, 1, 0}  \
}

byte col = 0;
byte leds[5][7];

// pin[xx] on LED matrix connected to nn on Arduino (-1 is dummy to make array start at pos 1)
int pins[14]= {-1, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1};

// col[xx] of LEDs = pin yy on LED matrix
int cols[5] = {pins[13], pins[11], pins[10], pins[4], pins[6]};

// row[xx] of LEDs = pin yy on LED matrix
int rows[7] = {pins[5], pins[2], pins[3], pins[9], pins[8], pins[7], pins[12]};
const int numPatterns = 6;
byte patterns[numPatterns][8][8] = {
  H,E,L,L,O,SPACE
};

int pattern = 0;

void setup() {
  // Sets the pins as output
  for (int i = 1; i <= 16; i++) {
    pinMode(pins[i], OUTPUT);
  }

  // Set up cols and rows
  for (int i = 1; i <= 8; i++) {
    digitalWrite(cols[i - 1], LOW);
  }

  for (int i = 1; i <= 8; i++) {
    digitalWrite(rows[i - 1], LOW);
  }

  clearLeds();

  // Turn off toggling of pin 11
  FrequencyTimer2::disable();
  // Set refresh rate (interrupt timeout period)
  FrequencyTimer2::setPeriod(2000);
  // Set interrupt routine to be called
  FrequencyTimer2::setOnOverflow(display);

  setPattern(pattern);
}

void loop() {
    pattern = ++pattern % numPatterns;
    slidePattern(pattern, 60);
}

void clearLeds() {
  // Clear display array
  for (int i = 0; i < 8; i++) {
    for (int j = 0; j < 8; j++) {
      leds[i][j] = 0;
    }
  }
}

void setPattern(int pattern) {
  for (int i = 0; i < 8; i++) {
    for (int j = 0; j < 8; j++) {
      leds[i][j] = patterns[pattern][i][j];
    }
  }
}

void slidePattern(int pattern, int del) {
  for (int l = 0; l < 8; l++) {
    for (int i = 0; i < 7; i++) {
      for (int j = 0; j < 8; j++) {
        leds[j][i] = leds[j][i+1];
      }
    }
    for (int j = 0; j < 8; j++) {
      leds[j][7] = patterns[pattern][j][0 + l];
    }
    delay(del);
  }
}

// Interrupt routine
void display() {
  digitalWrite(cols[col], LOW);  // Turn whole previous column off
  col++;
  if (col == 8) {
    col = 0;
  }
  for (int row = 0; row < 8; row++) {
    if (leds[col][7 - row] == 1) {
      digitalWrite(rows[row], LOW);  // Turn on this LED
    }
    else {
      digitalWrite(rows[row], HIGH); // Turn off this LED
    }
  }
  digitalWrite(cols[col], HIGH); // Turn whole column on at once (for equal lighting times)
} 
```

# java - Java 中的 FileOutputStream 问题

> ID：12809406
> 
> 赞同：0
> 
> 时间：2012-10-09T22:37:10.683
> 
> 标签：java, file-io

执行以下代码时出现运行时异常。我看不出有什么问题。

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.PrintWriter;

public class FileIO {

    public static void main(String[] args){

        File test = new File("test.txt");

        FileOutputStream ostream = new FileOutputStream(test); 

        PrintWriter out = new PrintWriter(ostream);
    }
} 
```

我不断得到一个`FileNotFoundException`. 我已经尝试将文件保存在项目中每个可能的文件夹中，并尝试给出明确的路径，但我一直遇到同样的异常。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:44:48.110

当我尝试这个时，它甚至没有编译。我不得不说主要`throws FileNotFoundException`

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.PrintWriter;
import java.io.FileNotFoundException;

public class FileIO 
{

    public static void main(String[] args) throws FileNotFoundException
    {

        File test = new File("test.txt");

        FileOutputStream ostream = new FileOutputStream(test); 

        PrintWriter out = new PrintWriter(ostream);            
    }
} 
```

这工作得很好，没有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:58:26.017

> 执行以下代码时出现运行时异常。

不，你没有。尝试*编译*时收到*编译器错误消息*。该消息告诉您 new FileOutputStream 抛出 FileNotFoundException 并且您的代码没有捕获它。所以修复你的代码来做到这一点，或者将 main() 声明为“抛出 FileNotFoundException”。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:45:04.860

答案无疑是当前目录不是你想的那样。

在初始化文件变量后立即添加这行代码：

```
System.out.println(test.getAbsolutePath()); 
```

问题应该很明显。

或者，指定一个绝对路径：

```
File test = new File("/mydir/test.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:52:25.997

当前目录中的文件很可能是只读的，并且禁止`test.txt`尝试打开它进行写入（通过实例化 type 类）。`FileOutputStream`

检查文件的权限或删除它并再次运行您的程序（在`try catch`为.`FileNotFoundException``FileOutputStream`

例如：

```
 try {
        ostream = new FileOutputStream(test);
        PrintWriter out = new PrintWriter(ostream); 
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T22:53:36.030

基于[File 类](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)和[FileOutputStream 类](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html)，试试这个：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.PrintWriter;

public class FileIO {

    public static void main(String[] args){

        File test = new File("test.txt");

        if (test.exists()) {
            if (!test.isFile()) {
                System.out.println("File " + test.getAbsolutePath() + " is not a regular file!");
                System.exit(1);
            } else if (!test.canWrite()) {
                System.out.println("Can not write to file " + test.getAbsolutePath() + "!");
                System.exit(1);
            }
        } else {
            test.createNewFile();
        }

        FileOutputStream ostream = new FileOutputStream(test); 

        PrintWriter out = new PrintWriter(ostream);
    }
} 
```

这将检查常见的错误情况。

*   文件已存在
*   文件不是常规文件
*   文件无法写入*

# c# - 如何从我的 elasticsearch 索引中排除 HTML 内容？

> ID：12809408
> 
> 赞同：5
> 
> 时间：2012-10-09T22:37:12.633
> 
> 标签：c#, .net, elasticsearch

我正在使用 Elasticsearch，并使用 WebRequest 编写自己的包装器，因为 NEST（通常的选择）令人费解地似乎缺乏插入项目并返回生成的 ID 的能力。

无论如何-一般方法没有问题。但是，任何 HTML 内容都按原样编入索引，即，如果我`<strong>test</strong>`在某个字段中，则搜索“strong”查询会返回该项目。

根据我发现的随机留言板帖子，我已将其放在 elasticsearch.yml 中：

```
index:
    analysis:
        analyzer:
            htmlContentAnalyzer:
                type: custom
                tokenizer: standard
                filter: standard
                char_filter: html_strip 
```

然后，我为我的索引“内容”、项目类型“新闻”创建了一个映射：

```
PUT http://localhost:9200/content/news/_mapping

{
    "news" : {
        "properties" : {
            "TextContent" : {
                "type" : "string",
                "index" : "analyzed",
                "analyzer" : "htmlContentAnalyzer",
                "store" : "yes"
                }
            }
        }
    }
} 
```

`store`/`yes`只是为了“有趣”，没有区别。以上给了我200 OK。

但是，搜索返回相同的结果。

没有帮助的是弹性搜索文档似乎令人震惊。看看这个页面：

[http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html)

它为您简要介绍了映射是什么，并在映射部分中说明了更多详细信息，即此页面：

[http://www.elasticsearch.org/guide/reference/mapping/](http://www.elasticsearch.org/guide/reference/mapping/)

......这似乎真的很可怕。没有提到我发现的格式/对象图 - 没有提到“属性”、“类型”、“分析器”、“索引”等。右边的菜单上有一些部分，例如“_index”，但它们似乎是指整个项目？那是在哪里指出的？

所以我的问题是在两个方面：

*   如何停止索引 HTML 标记（以及我猜的实体、属性值）？- 我仍然希望存储 HTML，请注意
*   是否有更好的弹性搜索信息/文档来源？或者我是在没有超级秘密解码器眼镜的情况下看它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:03:27.167

在#elasticsearch（freenode IRC）上感谢chrismale -

搜索`_all`是不好的：那是用它自己的分析器索引的。查询我的`TextContent`领域特别按预期工作。

# javascript - Javascript/YUI 字符计数器减一

> ID：12809415
> 
> 赞同：0
> 
> 时间：2012-10-09T22:38:11.810
> 
> 标签：javascript, yui, charactercount

我已经检查了几次代码，但无法弄清楚为什么第一次击键似乎不算数。

当 textarea 为空字符串时，计数器显示应准确读取。但似乎textarea需要为空两次......

[http://jsfiddle.net/ndreckshage/zVQZR/](http://jsfiddle.net/ndreckshage/zVQZR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:45:42.787

尝试收听`keyup`事件。

`keypress`当实际字符**被插入**到文本区域时触发该事件。当您读取 textarea — 的值时，将返回事件**之前**的`message.get('value')`旧值。这就解释了为什么计数器显示剩余的字符数过时（不准确）。**`keypress`**

 **更多关于`keydown`、`keypress`和`keyup`事件：[http ://www.quirksmode.org/dom/events/keys.html](http://www.quirksmode.org/dom/events/keys.html)

* * *

**更新：**

有一种更好的方法来检测`<input>`和的变化`<textarea>`。

YUI`event-valuechange`模块提供了一个在用户通过以下方式更改输入值时触发的[`valuechange`事件](http://yuilibrary.com/yui/docs/event/valuechange.html)：

*   输入一个简单的字符
*   键入多笔画字符
*   使用输入法编辑器
*   使用 Ctrl+X 或 Cmd+V 剪切或粘贴到值中
*   使用键盘召唤的上下文菜单剪切或粘贴；或者
*   从右键单击上下文菜单中剪切或粘贴。

以下是如何在带有 ID 的输入上使用它`message`：

```
YUI().use('event-valuechange', function (Y) {
    Y.one('#message').on('valueChange', function (e) {
        // The value has changed! Handle it here...
    });
}); 
```

现场演示：http: [//jsfiddle.net/Pd9X9/](http://jsfiddle.net/Pd9X9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:51:02.927

更改为`keyup`事件，它在这里对我来说很好：http: [//jsfiddle.net/jfriend00/grZW7/](http://jsfiddle.net/jfriend00/grZW7/)。keypress 事件仅发生在某些键上，并且可能在字段文本更新之前发生，而`keyup`之后总是发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:53:58.613

使用 'keyup' 作为事件触发器**

# django - Django静态文件404

> ID：12809416
> 
> 赞同：93
> 
> 时间：2012-10-09T22:38:18.653
> 
> 标签：django, static, http-status-code-404

我无法让我的静态文件出现。我已经尝试了各种设置和目录配置等，但它们只是显示为 404。我已经安装了 debug_toolbar，所以知道 STATIC_URL 正在到达我的请求上下文。

显示 /static 的目录结构（我也将目录放在了餐应用文件夹和用户中，只是为了尝试一下。

```
/mealmate
    /mealmate
    /meals
    /static
        /css
             /bootstrap.min.css
    /templates
    /users 
```

Settings.py（一些重要的设置，虽然我已经尝试过其他各种设置）：

```
MEDIA_ROOT = os.path.join(PROJECT_PATH, 'media/')

STATIC_URL = '/static/'

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
)

WSGI_APPLICATION = 'mealmate.wsgi.application' 
```

在 base.html 中呈现

```
 <link rel="stylesheet" href="/static/css/bootstrap.min.css"> 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-06-13T06:49:17.530

这是 django for windows 中静态/媒体/模板访问的有效解决方案，

设置.py

```
import os.path

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = ( os.path.join('static'), ) 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-12-09T13:35:49.230

对我来说，这是由于将 debug 设置为 false in 引起的`settings.py`。一种解决方法是将`--insecure`开关传递给`runserver`，但真正的解决方案是使用适当的 Web 服务器来提供静态文件。[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/5836674/why-does-debug-false-setting-make-my-django-static-files-access-fail)的答案。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-11T18:56:51.287

如果您在 Web 服务器上运行它，您是否将静态文件复制到公共可访问文件夹？例如：

```
# web accessible folder
STATIC_ROOT = '/home/your_name/www/mealmate/static/'

# URL prefix for static files.
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # location of your application, should not be public web accessible 
    '/home/your_name/website/mealmate/static',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

然后你可以使用这篇文章[Django static Files](https://stackoverflow.com/questions/9824359/django-static-files)并使用 manage.py 将静态文件复制到公共可访问文件夹

```
# --link    Create a symbolic link to each file instead of copying.
# --noinput Do NOT prompt the user for input of any kind.
#
python manage.py collectstatic -link --noinput 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-22T14:05:46.127

从上面的评论 - 运行这个

```
python manage.py findstatic --verbosity 2 css/styles.css 
```

> 找不到“css/styles.css”的匹配文件。
> 
> 查看以下位置：
> /Users/yourname/Documents/Workspace/test/staticfiles

我只是将我的**静态**文件夹重命名为**staticfiles**，一切都很好。（我在 osx + django 1.x 上）

如果您在本地开发盒上，使用不安全模式可能不会受到伤害 - 否则您可能仍然会收到 404 错误。

```
python manage.py runserver --insecure 
```

更新

实际上深入研究 settings.py 发现了侵权行。

```
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'staticfiles'),
) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-10-08T17:36:55.743

如果您最近在设置文件中将调试更改为 false。遵循此程序。

大多数情况下，它是由 settings.py 中的调试设置为 false 引起的。如果您将 --insecure 开关传递给 runserver 它应该可以工作。因此，如果您确实`python manage.py runserver 0.0.0.0:8000`将其更改为`python manage.py runserver 0.0.0.0:8000 --insecure`。

它应该工作。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-08-12T00:26:44.210

我只是添加了相当于

```
STATICFILES_DIRS = (
    '/absolute_path_to_project/mealmate/static',
) 
```

让这个工作。当然，替换`absolute_path_to_project`为您的实际路径，并在必要时添加驱动器号。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-01-03T04:25:48.987

我也陷入了 404 问题，直到我意识到 Apache 阻止了对静态目录的请求。我曾经`python manage.py collectstatic`将所有静态文件复制到我的项目根目录下的**静态**目录，即**/var/my/site/static**。和

```
Alias /static /var/my/site/static
<Directory /var/my/site/static>
        Require all granted
</Directory> 
```

在**/etc/httpd/conf/httpd.conf**中，它现在可以正常工作。

如果以上答案都不起作用，您可以考虑检查您的服务器配置。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-08-01T13:11:50.960

就我而言，我所要做的就是重新运行服务器：

```
python manage.py runserver 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-10-10T00:36:59.980

我假设你在这里使用 Django1.3+。

首先，您需要定义更多设置：

```
STATICFILES_FINDERS = [
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
]

STATICFILES_DIRS = [
    path.join(TOP_DIR, 'static'),
]

STATIC_ROOT = path.join(TOP_DIR, 'staticfiles')
STATIC_URL = '/static/' 
```

这应该可以帮助您找到该目录。

此外，您应该始终使用以下方式访问您的静态文件`STATIC URL`：

```
<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.min.css"> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-11-25T03:13:35.137

确保 mealmate 在您的 INSTALLED_APPS 中

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2020-03-30T05:08:55.443

在下面添加`setting.py`

```
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'static'),
] 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-05-05T08:56:56.993

在 Django 中，您的模板还有一个优势，您可以像这样链接静态，也许这就是您的问题！

```
<script src="{% static 'myapp/bootstrap.min.js' %}"></script>
<link href="{% static 'myapp/bootstrap.css' %}" rel="stylesheet" type="text/css"/> 
```

它更好用

> {% 静态“文件名”%}

它也更容易了解，我参考[https://docs.djangoproject.com/en/1.11/intro/tutorial06/](https://docs.djangoproject.com/en/1.11/intro/tutorial06/)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-10-23T08:52:31.960

在我的情况下，我的静态文件在`resources/static`目录中，我设置了一些设置，例如`settings.py`文件中的吹气：

```
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, './resources/static/'),
) 
```

并像这样在我的模板中使用它：

```
% load static %}
    <link rel="stylesheet" type="text/css" href="{% static '/plugins/bootstrap/css/bootstrap.css' %}"> 
```

这种方式对我有用。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-10-04T08:09:31.497

**如果您遇到此错误，请首先检查调试的真假，以及您是否同时使用“STATIC_ROOT”和“STATICFILES_DIRS”**

对于我的情况，我在我的 settings.py 中使用了以下内容：

```
import os (You have to import os at first)

#(If the app is in production mode then False. By default True)

   DEBUG = False 

#(If debug is false then add allowed hosts)

   ALLOWED_HOSTS = ['*'] 

#(Built in)

   STATIC_URL = '/static/' 

   STATIC_ROOT = 'static' (You have to add it to the code)

   STATICFILES_DIRS = [ os.path.join(BASE_DIR, '/static') ] (You have to add it to the code) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-09-22T17:51:37.187

在您的设置中将 DEBUG 变量更改为 True。

如果启用了调试，runserver 方法只查找静态，如果没有，它将在 STATIC_ROOT url 中查找

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-05-09T01:16:49.643

将以下行插入项目主文件夹的 settings.py 中：

```
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (os.path.join('static')) 
```

然后，在 html 文件中插入：

```
{% load static %} 
```

最后，在 settings.py 中，添加`django.contrib.staticfiles`到`INSTALLED_APPS = [...]`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-11T07:10:21.203

我认为您错过了将应用程序 INSTALLED_APPS 放入您的 settings.py 文件中，您应该添加“mealmate”

```
INSTALLED_APPS = (
    'mealmate',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
) 
```

之后，静态和命令文件将对 django 可见。我在使用命令时遇到问题，这就是我修复它的方式。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-31T07:39:46.583

对我来说，除了运行 manage.py runserver myip:port 什么都不做。然后我关闭它并重新启动uwsgi，静态文件加载成功。我不知道为什么，但它对我有用......

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-19T12:06:34.717

我面临同样的问题。这里我如何解决在模板中访问静态文件的问题。

我的 Django 项目（识别/）文件目录如下所示：

```
/media
   /1
     i1.jpg
     i2.jpg
     ....

/static
    /css
       /op.css
    /img
       /emoji.png

/Recognition
    ...
    /settings.py
    /urls.py
    ...

/uploader
    ...
    /urls.py
    /templates
         /uploader
             /create.html
    ... 
```

我的 settings.py 看起来像这样：

```
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'Recognition',
    'uploader',
]

STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static')

MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media') 
```

我的 (Recognition/urls.py) 看起来像这样：

```
urlpatterns = [
    path('admin/', admin.site.urls),
    ...
]
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT) 
```

然后我像这样访问模板（create.html）中的所有静态文件和媒体文件：这是示例代码

```
<!DOCTYPE html>
<html>
<head>
   {% block extrahead %}
      <link rel="stylesheet" type="text/css" href="static/css/op.css">
   {% endblock %}
</head>

<style type="text/css">
.notfound .notfound-404 {
  ...
  background-image: url('static/img/emoji.png');
  ...
}
<style>

<body>
  <img src="{{ MEDIA_ROOT }}/media/i1.jpg" class="image_responsive" height="100px" width="100px">
</body> 
```

**或者**

你可以使用这个 django 命令来查看 django 在哪里看到你的静态文件。[资源](https://docs.djangoproject.com/en/3.0/ref/contrib/staticfiles/)

```
python manage.py collectstatic --help 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-16T07:53:35.187

在 Cpanel 上，这是一个很好的解决[方案](https://stackoverflow.com/questions/60096993/load-static-files-in-django-admin-panel-using-python-in-cpanel)

在 cpanel 的终端上安装 dj-static static3

```
pip install dj-static static3 
```

然后在 wsgi.py 替换此代码 py 应用程序

```
from dj_static import Cling

application = Cling(get_wsgi_application()) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-11-03T17:31:23.420

我能够通过将 js 文件名从骆驼案例更改为蛇案例来解决同样的问题。

# javascript - 使用 Jquery UI datepicker 敲除日期未显示在提交按钮上

> ID：12809418
> 
> 赞同：0
> 
> 时间：2012-10-09T22:38:22.477
> 
> 标签：javascript, asp.net-mvc, knockout.js, datepicker, submit

我添加了 Datepicker UI。每次我添加新的礼物日期文本框时，日期选择器都可以正常工作。

但是当我点击提交按钮时，它没有以 json 格式显示日期。

请参阅此链接，例如 [ [http://jsfiddle.net/pakpatel/5p6Uz/2/](http://jsfiddle.net/pakpatel/5p6Uz/2/) ]

谁能解释我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:44:36.340

您需要绑定值：

```
<input class='required' data-bind='datepicker: choosedate, value: choosedate, datepickeroptions: { mindate:  new Date()  }, uniquename: true' /> 
```

# ruby - 如何使用 Grape 记录 Mongo 查询？

> ID：12809421
> 
> 赞同：0
> 
> 时间：2012-10-09T22:38:42.037
> 
> 标签：ruby, mongodb, mongoid

我正在使用[Grape](https://github.com/intridea/grape)构建一个 API ，并使用 mongoid 作为 MongoDB 的 ORM。我尝试使用工头、shotgun 和 rackup 启动应用程序，但它们都没有显示 Mongoid 正在进行的 mongo 查询。我正在根据他们的文档设置记录器。怎么能看到这些查询？

```
Mongoid.logger = App.logger
Mongoid.logger.level = Logger::INFO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:41:40.617

原来我还需要设置轻便摩托车的记录器和级别。

```
Mongoid.logger = Moped.logger = App.logger
Mongoid.logger.level = Moped.logger.level = Logger::DEBUG 
```

# java - 套接字一直关闭

> ID：12809423
> 
> 赞同：0
> 
> 时间：2012-10-09T22:38:58.790
> 
> 标签：java, sockets, serversocket

**编辑：**在服务器端，如果我从 ServerWriter 类的 run 方法中删除代码并将其放入 send order 方法中，删除线程代码，它再次开始正常工作，套接字不会关闭。但我需要它是多线程的，我不明白为什么套接字用线程关闭。代码如下所示

```
 public void sendOrder(Order o){
//      ServerWriter sw=new ServerWriter(serversocket,o);
//      Thread t=new Thread(sw);
//      t.start();
        ObjectOutputStream out=null;
        if(serversocket.isClosed()){
            System.out.println("closed");
        }
        else{
            System.out.println("notclosed");
        }
        try {
            out=new ObjectOutputStream(serversocket.getOutputStream());
            out.writeObject(o);
            out.reset();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

**编辑：**我认为套接字在服务器端关闭，而不是客户端，从服务器的输出中推断出这一点，它在检查时打印关闭`isclosed()`，而在客户端它说 Not Closed

我有一个套接字程序。我在客户端 1 中有两种方法用于打开套接字，另一种用于读取数据。每次我尝试运行此代码时，我都会不断收到`eofexception`，这意味着套接字已关闭。

几天前我最后一次处理这段代码时遇到了这个错误，所以我只是从阅读中删除了所有代码并将其粘贴到 open 方法中，它就开始工作了（我真的不明白为什么）。

今天我恢复过来，只是将代码移回 read 方法，一切都开始正常工作，连接并没有自行关闭。然后我将读取部分设为线程，但一切正常，我正在处理代码的写入部分，现在当我运行它时`eofexception`，我再次得到相同的结果，我没有更改读取代码中的任何内容，所以我不知道为什么会这样。在服务器端，我做了类似的事情，我在一个方法中接受一个套接字并通过一个线程发送数据。在服务器端，我得到一个 SocketException。

我真的可以使用一些帮助来阐明我做错了什么。

以下是客户端代码

```
public void open(){
    try
    {
        s=new Socket(InetAddress.getLocalHost(),12345);

        s.setKeepAlive(true);

    }

    catch(UnknownHostException u)
    {
        System.err.println("I don't know host");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

}

public void read(){
    ClientReader cr=new ClientReader(s);
    Thread t=new Thread(cr);
    t.start();
}

class ClientReader implements Runnable{
    Socket s;
    ClientReader(Socket s){
        this.s=s;
    }
    public void run(){
        InputStream is;
        ObjectInputStream ois=null;
        try {
            is = s.getInputStream();
                    if(!(s==null)){
                System.out.println("not null");
            }
                    **//outputs NotClosed here**
        if(s.isClosed()){
            System.out.println("CLOSED");
        }
                    else system.out.println("Not Closed")

              //Throws EOFException here
         ois= new ObjectInputStream(is); 
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }
        Order order;
         while(true){
             try{
             order=(Order)ois.readObject();
             Client_Socket.ll.add(order);
            System.out.println(order);
            System.out.println(order.getTotal()); 

             }
             catch(EOFException e){

                 try{
                 ois.close();
                 s.close();
                 break;

             } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
             } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
         }
    }
} 
```

调用客户端的**主要**方法

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Client_Socket cs=new Client_Socket();
    cs.open();
    cs.read();

} 
```

**客户端异常**

```
not null
Not Closed

java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at ClientReader.run(Client_Socket.java:82)
    at java.lang.Thread.run(Unknown Source)
Exception in thread "Thread-0" java.lang.NullPointerException
    at ClientReader.run(Client_Socket.java:91)
    at java.lang.Thread.run(Unknown Source) 
```

**服务器端异常**

```
Connection from Socket[addr=/192.168.0.108,port=50380,localport=12345]
closed

java.net.SocketException: Socket is closed
    at java.net.Socket.getOutputStream(Unknown Source)
    at ServerWriter.run(Server_Socket.java:123)
    at java.lang.Thread.run(Unknown Source) 
```

**服务器端代码片段**

```
public void openSocket(){
    try
    {
        service=new ServerSocket(12345);

        serversocket=service.accept();
        serversocket.setKeepAlive(true);
        System.out.println("Connection from "+serversocket);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("output stream error");
        System.out.println(e);
    }

}

public void sendOrder(Order o){
    ServerWriter sw=new ServerWriter(serversocket,o);
    Thread t=new Thread(sw);
    t.start();

}

class ServerWriter implements Runnable{
    Socket serversocket;
    Order o;
    ServerWriter(Socket s,Order o){
        this.serversocket=s;
        this.o=o;
    }

    public void run() {
        ObjectOutputStream out=null;
        if(serversocket.isClosed()){
            System.out.println("closed");
        }
        else{
            System.out.println("notclosed");
        }
        try {
            //SocketException here
            out=new ObjectOutputStream(serversocket.getOutputStream());
            out.writeObject(o);
            out.reset();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

调用服务器的方法片段

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Order o=new Order();
    Server_Socket ss=new Server_Socket();
    ss.openSocket();
    ss.sendOrder(o);
    ss.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:57:37.940

该异常意味着*您*关闭了套接字，然后继续使用它。与同行无关。

可能您不知道关闭套接字的输入流或输出流会关闭另一个流和套接字。

# arrays - Matlab - 两条线的距离

> ID：12809426
> 
> 赞同：5
> 
> 时间：2012-10-09T22:39:39.010
> 
> 标签：arrays, matlab, integration, area

我有两条线，一条直线，一条曲线。两者都具有定义行的任意数量的 x 和 y 值 - 任一行的 x 和 y 值的数量都不相同。我试图获得曲线坐标和直线坐标之间的点的单独距离。您可以考虑离散集成以更好地了解我在说什么，类似于以下内容：[http ://www.scientific-solutions.ch/tech/origin/products/images/calculus_integral.gif](http://www.scientific-solutions.ch/tech/origin/products/images/calculus_integral.gif)

通过添加不同的距离，我会得到该区域。我被卡住的部分是点的实际同步。例如，我可以简单地比较每十个索引的直线和曲线坐标的 x 和 y 值，因为曲线坐标是时间相关的（因为点不会以一般速率变化）。我需要一种方法来同步两组点的实际坐标。我曾考虑将两组点内插到特定数量的点，但同样，曲线组的时间依赖性使该解决方案无效。

有人可以建议一个这样做的好方法，概述基础知识吗？我真的很感激帮助。

要尝试的代码（伪）：

```
xLine = [value1 value2 ...]
yLine = [value1 value2 ...]
xCurve = [value1 value2 ...]
yCurve = [value1 value2 ...]

xLineInterpolate = %interpolate of every 10 points of x until a certain value. same with yLineInterpolate, xCurveInterpolate and yCurveInterpolate. 
```

然后，我可以从每个数组中获取相同的索引并做一些代数来获得距离。我担心的是我的线值以恒定的速率增加，而我的曲线值有时不会改变（x 和 y 值具有不同的变化率），有时会。那么这样的插值方法会出错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:07:05.237

如果我理解正确，您想知道直线和曲线之间的距离。最简单的方法是执行坐标变换，使直线成为新的 x 轴。在该帧中，曲线的 y 值是您寻找的距离。

此坐标变换等于旋转和平移，如下所示：

```
% estimate coefficients for straight line
sol = [x1 ones(size(x1))] \ y1;
m = sol(1); %# slope
b = sol(2); %# y-offset at x=0

% shift curved line down by b 
% (makes the straight line go through the origin)
y2 = y2 - b;

% rotate the curved line by -atan(m)
% (makes the straight line run parallel to the x-axis)
a = -atan(m);
R = [+cos(a) -sin(a)
     +sin(a) +cos(a)];    
XY = R*[x2; y2];

% the distances are then the values of y3\. 
x3 = XY(1,:);
y3 = XY(2,:); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T01:01:24.037

您需要使用插值。我看不出这里的时间依赖性如何相关 - 也许您正在考虑将一条直线拟合到两条曲线？这是个坏主意。

只需假设每两个相邻点由一条直线连接，您就可以对任何曲线进行简单的插值。这可以被证明是曲线的合理近似。

因此，假设您正在查看彼此相邻的 (x1,y1) 和 (x2,y2)，现在您选择了一个介于 x1 和 x2 (x1 < x2 < x3) 之间的 x3，并且想要找到y3 值。

查找 y3 的简单方法如下：

```
p=(x3-x1)/(x2-x1)
y3=y1+p*(y2-y1) 
```

这个想法是 p 显示 x1 和 x2 之间的相对位置（例如，0.5 将是中间），然后您使用 p 作为 y1 和 y2 之间的相对位置。

# css - 简单的 CSS3 淡入/淡出精灵图像导航？

> ID：12809432
> 
> 赞同：0
> 
> 时间：2012-10-09T22:40:11.273
> 
> 标签：css, navigation, css-sprites

我正在尝试创建一个水平菜单，该菜单将在下方显示带有居中文本的图标列表。

这是我到目前为止所取得的成就：

[http://lifeofstrange.com/fade/](http://lifeofstrange.com/fade/)

我希望图标使用一个图像精灵，当你悬停时会淡入/淡出，如果可能的话，下面的文本也会有淡入淡出效果。

我非常接近实现效果但是我不确定css3转换在代码中的位置，

非常感谢您的帮助或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:04:54.543

如果您想要箭头和文本上的淡入淡出过渡，那么您将不希望更改文本的颜色和箭头背景的位置。您要做的是将背景设置为较暗的箭头，然后在悬停时将其不透明度设置为 0.6 或其他值，与文本相同。如果您转换背景位置，您会看到从精灵的一个部分到另一部分的滑动效果，这不是您想要的。

```
ul li a {
    -webkit-transition: opacity 0.3s;
    -moz-transition: opacity 0.3s;
    -o-transition: opacity 0.3s;
    transition: opacity 0.3s;
}
ul li a:hover {
    opacity: 0.6;
} 
```

# amazon-ec2 - EC2 自动缩放不会在服务器上放置名称（标签）

> ID：12809436
> 
> 赞同：14
> 
> 时间：2012-10-09T22:40:49.430
> 
> 标签：amazon-ec2, amazon-web-services, autoscaling

我在 EC2 上创建了一个自动缩放组，它工作得很好。服务器根据负载进行扩展和缩减。我想了解更多关于管理方面的信息，并且想知道是否有办法让自动缩放组动态地将名称添加到它启动的实例中。我指的是添加一个带有 key=Name 和 value=autogeneratedid 的标签。

例如，如果我有一个名为 test-group 的自动缩放组，服务器将使用以下名称启动：

```
test-group-1
test-group-2
test-group-3
... 
```

我想在 EC2 管理控制台中找到它们并枚举它们，但现在它们只是显示为“空”名称（Tag key=Name 未在实例上明确设置）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T02:02:40.400

为了获得要在实例上设置的标签，请确保您正在`PropagateAtLaunch`为 Auto Scaling 组中的标签设置标志 ("p=1")。

您需要阅读 Amazon 文档中的这一部分：

> [http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/ASTagging.html](http://docs.amazonwebservices.com/AutoScaling/latest/DeveloperGuide/ASTagging.html)

至于让亚马逊动态地将参数添加到标签值，我不知道有任何此类功能。

# javascript - 捕获用户单击页面上的按钮时触发的任何 JS 事件

> ID：12809440
> 
> 赞同：0
> 
> 时间：2012-10-09T22:41:11.600
> 
> 标签：javascript, wordpress, bookmarklet

我正在尝试创建一个向 WordPress 帖子添加自定义字段的书签。这可以通过 WP 轻松完成，但我不断将相同的字段（具有相同的值）添加到许多不同的帖子中，并希望将其自动化。

基本上，我要做的是在我单击 WP 管理面板中的“添加自定义字段”按钮后立即捕获 JS 触发的任何内容。我不太确定该怎么做，所以任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:20:45.037

我对 WP 一无所知，但通常使用 JavaScript 自动输入表单的方式是复制您手动执行的任何操作，但使用代码执行。一些示例代码可能如下所示

```
document.getElementById('field1').value = "my data";
document.getElementById('savebutton').click(); 
```

或者

```
document.getElementsByName('field1')[0].value = "my data";
document.getElementsByTagName('button')[0].click(); 
```

ETC

# c# - 通过 Tamir.SharpSSH.Sftp.Get() 下载文件

> ID：12809447
> 
> 赞同：1
> 
> 时间：2012-10-09T22:42:04.593
> 
> 标签：c#, asp.net, sftp

我正在尝试使用 Tamir SSH 库下载文件。我能够连接到远程 FTP 站点，将文件上传到该站点，但是在尝试下载时出现异常。我已经让 IIS_IUSRS 完全控制本地目录以及 ASPNET。我已经测试了我能够在我试图下载到的同一个本地目录中创建一个文本文件。有任何想法吗？

```
string SFTP_HOST = ConfigurationManager.AppSettings["AccentivFtpHost"];
string SFTP_USERNAME =  ConfigurationManager.AppSettings["AccentivFtpUsername"];
string SFTP_PASSWORD = ConfigurationManager.AppSettings["AccentivFtpPassword"];

Sftp client = new Sftp(SFTP_HOST, SFTP_USERNAME, SFTP_PASSWORD);

client.Connect(22);
client.Get("test.txt", "c:\\test.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:19:05.860

您可能在文件目录中缺少“/”字符。您可能需要将它放在“test.txt”（如“/test.txt”）之前的 Get 函数调用中，或者放在应用配置文件中 AccentivFtpHost 值的末尾。

# python - Django/MySQL 时间数据类型

> ID：12809448
> 
> 赞同：0
> 
> 时间：2012-10-09T22:42:04.803
> 
> 标签：python, mysql, django

我正在使用 Django 从已经创建并被其他人使用的现有 mysql 数据库导入。我在用着：

```
python manage.py inspectdb > models.py 
```

我的模型中的类如下：

```
class Funciones(models.Model):
    idfuncion = models.IntegerField(primary_key=True)
    idpelicula = models.ForeignKey(Peliculas, db_column='idpelicula')
    idcine = models.ForeignKey(Cines, db_column='idcine')
    hora = models.TextField() # This field type is a guess.
    tipo_3d = models.IntegerField(null=True, db_column=u'3d', blank=True) # Field renamed
    xd = models.IntegerField(null=True, blank=True)
    gtmax = models.IntegerField(null=True, blank=True)
    vip = models.IntegerField(null=True, blank=True)
    idioma = models.CharField(max_length=33)
    idciudad = models.ForeignKey(Ciudades, db_column='idciudad')
    class Meta:
        db_table = u'funciones' 
```

现在这个属性： ***hora = models.TextField() # 这个字段类型是猜测***

对应MYSQL中的一个*时间数据类型。*现在，由于我无法更改 MYSQL 中的数据类型，因为其他人已经从另一个应用程序创建了许多对数据库的查询，我想知道我应该在我的 django 模型中使用的适当的相应 django 数据类型。我在想*DateTimeField*但是我应该在写入数据库之前以某种方式截断日期部分。

有任何想法吗？

谢谢

**编辑：**

正如佩德罗所指出的：

Django 实际上有一个 TimeField，为什么不使用它呢？——佩德罗·罗马诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-04T20:37:53.630

您可以使用此[https://djangosnippets.org/snippets/1060/使用 Timedelta 对象来表示“经过的时间”](https://djangosnippets.org/snippets/1060/)

# android - 有什么方法可以保护应用程序不被低内存杀手杀死？

> ID：12809450
> 
> 赞同：2
> 
> 时间：2012-10-09T22:42:11.287
> 
> 标签：android

是的，防止被低内存杀手杀死。AndroidManifest.xml 中是否有任何选项？

可能应用程序包含一项服务，该服务需要一直在后台运行。

我的应用程序放在 system/app 中，运行一项重要的服务。这是我们的设计。

有很多应用程序在运行，我无法控制其他人以节省内存，但我想要一种方法让Android不会杀死我，就像Phone app和SystemUi一样。

在 Android 中，oom_adi 较低的应用被杀死的可能性较小。为此，只需设置 ( `application android:persistent="true"`)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:45:28.187

> 有什么方法可以保护应用程序不被低内存杀手杀死？

并不真地。`startForeground()`如果您（和用户）认为您的服务是前台用户体验的一部分，则可以使用，尽管这会`Notification`在状态或系统栏中放置一个。

> 需要一直在后台运行

用户可以并且将随时摆脱您的服务（例如，通过在 Android 4.0+ 上的“最近任务”列表中滑动您的条目、通过任务杀手、通过设置中的强制停止）。真正需要永久服务的应用程序注定要失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:59:36.663

Android 相当高效，擅长处理这样的场景；正如 Commonsware 上面指出的那样，如

> 用户可以并且将随时摆脱您的服务

*您的应用程序无法控制用户*，这就是 OP 遇到的问题，试图（相当微弱地）减轻最终用户的行为和选择！

与其浪费精力试图“***击败***”低内存杀手，不如 ***重新考虑和重新设计您的应用程序***，使其不占用资源，这是 Android 介入并说“*嘿，停止玩我的我已经向您的申请提供了宝贵的资源，否则我会杀了您*”，从字面上看！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:15:56.837

考虑使用警报而不是长时间运行的服务。大多数时候，您可以在没有服务的情况下完成同样的事情。

# javascript - javascript：如何根据数据库值判断字段值是空字符串还是null

> ID：12809453
> 
> 赞同：1
> 
> 时间：2012-10-09T22:42:31.117
> 
> 标签：javascript, null

我在 Oracle 数据库中有一个名为“ **id** ”的字段列，“id”的值可以是 null 或 2-space（即“”）字符串。该字段值由第三方应用程序 (Serena Business Manager) 映射。我应该编写一个 javascript 来判断该字段是空的还是有 2 个空格。

我通过javascript语句尝试过：

```
if(id === '')
{
     doSomething()
} 
```

这将允许那些在数据库中具有空值的 'id' 通过。所以这里有一个问题：如何让数据库中带有空格（不一定是两个）的字符串传递一个 javascript 'if' 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:48:59.743

在 Oracle 中，NULL 和空字符串之间没有区别。空字符串为 NULL。您无法在代码中区分两者，因为您无法在数据库中区分它们。

StackOverflow 上有另一个线程，我们在其中讨论[为什么 Oracle 将空字符串视为 NULL](https://stackoverflow.com/questions/203493/why-does-oracle-9i-treat-an-empty-string-as-null/203536#203536)，尽管 ANSI 标准规定应区别对待这两者。

因为听起来您实际上不是在寻找空字符串，而是在寻找带有两个空格的字符串

```
if(id === '' || id == '  ')
{
     doSomething()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:45:49.157

如果您想在字符串为空或为空时执行某些操作：

```
if (!id || id === '') {
    doSomething()
} 
```

试试这个[jsfiddle](http://jsfiddle.net/P47cR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:48:23.617

你可以使用`NVL(id, 'this was really null') AS id`. 这将使您当前的 JavaScript 工作。

您的查询看起来如何？它是如何到达 JS 的？`null`在您粘贴的代码之前，您的或“空”字符串可能发生了很多事情......

PS：一个空或空的'id'数据库列有点奇怪...... :)

# c# - 如何从 C# 引用带有美元符号的标识符？

> ID：12809455
> 
> 赞同：9
> 
> 时间：2012-10-09T22:42:53.150
> 
> 标签：c#, scala, ikvm

我正在尝试使用由 ikvmc 从 Scala 代码编译的 jar 文件生成的 DLL（是的，我的日子很棒）。Scala 编译器似乎为运算符重载生成包含美元符号的标识符，而 IKVM 使用生成的 DLL 中的标识符（我可以在 Reflector 中看到它）。问题是，美元符号在 C# 代码中是非法的，所以我不能引用这些方法。

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T23:03:43.100

您应该能够使用反射访问时髦的方法。这不是一个好的解决方案，但至少它应该可以工作。根据 DLL 中 API 的结构，可以在方法周围创建一个包装器以本地化反射代码。然后从您的其余代码中调用漂亮的包装器。

另一种方法是破解目标 DLL 中的 IL 并更改标识符。或者对您自己的代码进行一些构建后的 IL-hacking。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T23:31:57.443

也许您可以教 IKVM 重命名这些标识符，使它们没有美元符号？我不是很熟悉，但是快速搜索一下就发现了这些：

[http://weblog.ikvm.net/default.aspx?date=2005-05-02](http://weblog.ikvm.net/default.aspx?date=2005-05-02)

[IKVM 的 Remap XML 文件的格式是什么？](https://stackoverflow.com/questions/115041/what-is-the-format-of-the-remap-xml-file-for-ikvm)

[IKVM 的 Map.xml 中的字符串和复杂数据类型！](https://stackoverflow.com/questions/4687290/string-and-complex-data-types-in-map-xml-for-ikvm)

好狩猎

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T23:17:38.913

为这些方法编写同义词：

```
def +(a:A,b:A) = a + b
val plus = + _ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T23:21:27.883

我担心您将不得不使用反射来访问这些成员。在您的情况下，转义根本不起作用。

* * *

但是对于那些对逃避机制感兴趣的人，我已经写了一个解释。

在 C# 中，您可以使用 @-sign 来转义关键字并将它们用作标识符。但是，这无助于转义无效字符：

```
bool @bool = false; 
```

有一种方法可以通过使用 Unicode 转义序列来以不同的方式编写标识符：

```
int i\u0064;  // '\u0064' == 'd'  
id = 5; 
```

是的，这行得通。然而，即使有了这个技巧，你仍然不能在标识符中使用 $-sign。试...

```
int i\u0024;  // '\u0024' == '$' 
```

...给出编译器错误`"Unexpected character '\u0024'"`。标识符必须仍然是有效的标识符！c# 编译器可能会在某种预处理中解析转义序列，并将生成的标识符视为正常输入

那么这种逃避有什么用呢？如果有人使用您键盘上没有的外语字符，也许它可以帮助您。

```
int \u00E4; // German a-Umlaut
ä = 5; 
```

* * *

# ssh - Cygwin SSH 公钥认证 UNC 网络路径“不是目录”

> ID：12809456
> 
> 赞同：1
> 
> 时间：2012-10-09T22:43:04.030
> 
> 标签：ssh, cygwin, rsync, public-key, unc

通过基于公钥 (rsa) 的身份验证访问基于 Cygwin 的 SSH 服务器时，我遇到了一个独特的问题。

如果我通过密码验证登录服务器：

```
ssh Administrator@domain.com 
```

我登录就好了，然后可以执行：

```
cd //anotherpc/shareName 
```

或者`cd /backup/anotherpc`这是指向上述网络共享的符号链接

这是成功的，我可以毫无问题地访问该共享上的任何内容。

如果我在使用公钥认证机制登录后做同样的事情，就会出现问题。

错误输出为：

```
cd //anotherpc/shareName
-bash: cd: //anotherpc/shareName: Not a directory 
```

更新：

/etc/sshd_config 文件具有以下命令，已删除所有注释掉的行：

```
Port 22
StrictModes no
AuthorizedKeysFile  .ssh/authorized_keys
UsePrivilegeSeparation yes
Subsystem   sftp    /usr/sbin/sftp-server 
```

这非常奇怪。任何帮助将不胜感激！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:50:40.170

如果您在尝试访问网络共享之前运行此命令，将创建所需的身份验证令牌。

net use '\machineName\shareName' /user:"DOMAIN\Username" 密码

有关完整详细信息，请参阅：

见[http://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-setuid-overview](http://cygwin.com/cygwin-ug-net/ntsec.html#ntsec-setuid-overview)

# spring-mvc - 在 REST Api 上混合 @Transactional 和 @Controller 语义

> ID：12809458
> 
> 赞同：1
> 
> 时间：2012-10-09T22:43:08.697
> 
> 标签：spring-mvc, spring-transactions

我想将后端公开为“资源”（如 Restlet）并消除服务层，以便休息资源可以直接与道交互。这样，资源*是*合同而不是接口。

如果事务由 Spring 在本地管理，在 Spring MVC 3 控制器上使用 @Transactional 语义是否存在问题？回滚和捕获异常的任何陷阱？

```
@RequestMapping(value = "/user/{userId}", method = RequestMethod.PUT)
@ResponseStatus(HttpStatus.OK)
@Transactional
public void updateUser(@PathVariable Long userId, @RequestBody ProfileUser user) {

   // dao update
}

spring config:
<tx:annotation-driven />
 <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:14:30.637

我认为您可能会在这里遇到问题。默认情况下，Spring 将使用 JDK 动态代理将事务行为应用于您的方法。这依赖于您的控制器实现合适的接口，即公开 updateUser 方法的接口。Spring[博客](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)上有一篇很棒的博文。

由于 Spring 未能在代理上找到方法，您很可能会看到错误。

如果您告诉 Spring 使用基于 CGLIB 的代理，则可以使用上述方法。这在[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-autoproxy-force-CGLIB)的文档中进行了描述。

# android - ImageView 中的透明位图

> ID：12809462
> 
> 赞同：2
> 
> 时间：2012-10-09T22:43:44.470
> 
> 标签：android, bitmap, imageview, transparency, mask

我想在现有位图上绘制一些东西，同时保持位图分开。所以想法是让一个RelativeLayout和两个ImageViews堆叠在一起，顶部的一个保存要绘制的位图，底部的一个保存带有背景图片的位图。

layout.xml（仅相关部分）

```
<RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
    <ImageView 
        android:id="@+id/photo_mask"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:color/transparent" />
    <ImageView 
        android:id="@+id/photo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

layout.java（仅相关部分）

```
setContentView(R.layout.layout);

ImageView image = (ImageView) findViewById(R.id.photo);
image.setImageBitmap(mSomeImage);

mMaskPaint = new Paint();
mMaskPaint.setColor(0xFF0000);
mMaskPaint.setAlpha(128);

mMaskBitmap = Bitmap.createBitmap(128, 128, Bitmap.Config.ARGB_8888);
mMaskBitmap.eraseColor(Color.TRANSPARENT);

mMaskCanvas = new Canvas(mMaskBitmap);
mMaskCanvas.drawCircle(64, 64, 10, mMaskPaint);

ImageView mask = (ImageView) findViewById(R.id.photo_mask);
image.setImageBitmap(mMaskBitmap); 
```

请注意，mSomeImage 是一个 128x128 的位图，因此它将匹配掩码位图。我在遮罩位图中间画了一个红色圆圈，完美显示。但是，遮罩位图不会显示背景图像，而是显示黑色背景。

所以我尝试了：

*   将 ImageView 的背景颜色设置为透明
*   使用 .eraseColor 将遮罩位图的像素设置为透明
*   将位图配置设置为 ARGB_8888
*   设置蒙版 ImageView 的 alpha

这些似乎都不起作用。当我执行eraseColor(Color.BLUE) 时，背景为蓝色，中间有红色圆圈。当我设置蒙版 ImageView 的 alpha 时，背景仍然是黑色的。当我注释掉 setImageBitmap(mMaskBitmap) 时，显示背景图像。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:26:00.783

你的背景不对。改变

```
ImageView mask = (ImageView) findViewById(R.id.photo_mask);
image.setImageBitmap(mMaskBitmap); 
```

到

```
ImageView mask = (ImageView) findViewById(R.id.photo_mask);
mask.setImageBitmap(mMaskBitmap); 
```

# python - 如何使python程序可扩展

> ID：12809466
> 
> 赞同：0
> 
> 时间：2012-10-09T22:43:56.700
> 
> 标签：python

所以我的程序中有一行这样的代码：

```
str = str.replace('ten', '10s')
str = str.replace('twy', '20s')
str = str.replave('fy', '40s')
... 
```

我想让它不必手动打开我的源文件来添加新案例。例如（'sy'，'70'）。我知道我必须以某种方式将所有这些放在一个函数中，但我想从命令行映射不在我的“映射器库”中的案例。可能是配置文件？如何？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:59:10.567

您可以使用[json](http://www.json.org/)格式的配置文件，如下所示：

```
[
    ["ten", "10s"],
    ["twy", "20s"],
    ["fy", "40s"]
] 
```

将其保存为“replacements.json”，然后以这种方式使用它：

```
import json

with open('replacements.json') as i:
    replacements = json.load(i)

text = 'ten, twy, fy'
for r in replacements:
    text = text.replace(r[0], r[1]) 
```

然后，当您需要更改值时，只需编辑 replacements.json 文件，无需接触任何 Python 代码。

替换文件的格式可以是任何格式，但 json 易于使用和编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:38:46.553

您可以使用 csv 将替换以人工可编辑的形式存储在文件中：

```
import csv

with open('replacements.csv', 'rb') as f:
     replacements = list(csv.reader(f))

for old, new in replacements:
    your_string = your_string.replace(old, new) 
```

其中`replacements.csv`：

```
ten,10s
twy,20s
fy,40s 
```

`"`它避免了不必要的标记，例如`[]`json 格式，并允许分隔符 ( `,`) 出现在字符串本身中，这与[@WoLpH 的答案](https://stackoverflow.com/a/12809543/4279)中的纯文本格式不同。

（[活生生的例子](http://ideone.com/juKAi)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:50:48.767

一个简单的解决方案可能是将它们放在一个文件中，在您的程序中读取它们并在循环中进行替换..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:51:30.663

有很多方法可以做到这一点，如果这是一个很少改变的事情，你可以考虑用 Python dict 来做：

```
mappings = {
  'ten': '10s',
  'twy': '20s',
  'fy': '40s',
}

def replace(str_):
  for s, r in mappings.iteritems():
    str_.replace(s, r)
  return str_ 
```

或者在文本文件中（确保使用任何键中未使用的安全分隔符！）

**映射.txt**

```
ten|10s
twy|20s
fy|40s 
```

而 Python 部分：

```
mappings = {}
for line in open('mappings.txt'):
    k, v = line.split('|', 1)
    mappings[k] = v 
```

并使用上面的替换:)

# python - 如何获取 grep 命令的输出（Python）

> ID：12809467
> 
> 赞同：7
> 
> 时间：2012-10-09T22:43:58.620
> 
> 标签：python, grep, subprocess

我有一个输入文件 test.txt 为：

```
host:dc2000
host:192.168.178.2 
```

我想通过以下方式获取这些机器的所有地址：

```
grep "host:" /root/test.txt 
```

依此类推，我通过 python 获得命令输出：

```
import subprocess
file_input='/root/test.txt'
hosts=subprocess.Popen(['grep','"host:"',file_input], stdout= subprocess.PIPE)
print hosts.stdout.read() 
```

但结果是空字符串。

我不知道我遇到了什么问题。你能建议我如何解决吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T22:46:31.297

试试看：

```
import subprocess
hosts = subprocess.check_output("grep 'host:' /root/test.txt", shell=True)
print hosts 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T22:47:47.933

您的代码应该可以工作，您确定用户具有读取文件的访问权限吗？

另外，你确定`"host:"`文件中有一个吗？你可能是这个意思：

```
hosts_process = subprocess.Popen(['grep','host:',file_input], stdout= subprocess.PIPE)
hosts_out, hosts_err = hosts_process.communicate() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-23T16:08:07.773

另一种解决方案，尝试 Plumbum 包（[https://plumbum.readthedocs.io/](https://plumbum.readthedocs.io/)）：

`from plumbum.cmd import grep print(grep("host:", "/root/test.txt")) print(grep("-n", "host:", "/root/test.txt")) #'-n' option`

# javascript - Javascript 注入 - 更改文本字段大小

> ID：12809471
> 
> 赞同：0
> 
> 时间：2012-10-09T22:44:13.907
> 
> 标签：javascript

我必须使用一个特殊的表格来工作，表格的评论部分太小了（30多行文字大约5行）由于开发人员不经常更新软件，我通常会主动创建做我想要的书签。

我正在尝试创建一个扩展文本框大小的 javascript 行。我正在采用这种方法，但它不起作用：

```
 javascript:document.getElementById("CommentArea").style.height="700px"; 
```

如果有帮助，表格名称是“调查”。

有任何想法吗？

（注意：我正在尝试更改视觉大小，而不是字符限制。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:48:52.580

[`Textarea`](https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea)s 使用`rows`属性来确定`number of visible text lines for the control`：

```
​document.getElementById("test").rows = 20;​ 
```

**[例子](http://jsfiddle.net/DbSxa/)**

# c# - 名称重复时在 Excel 工作簿中按字符串获取命名范围

> ID：12809472
> 
> 赞同：7
> 
> 时间：2012-10-09T22:44:18.900
> 
> 标签：c#, excel, named-ranges

详细地说，假设我的工作簿中有两个命名范围。两个命名范围具有相同的名称（比如说“myName”），但一个范围限定为 Sheet1，另一个范围限定为工作簿。

给定命名范围的名称（字符串），我想获取工作簿级别的命名范围。

如果我使用本机调用：`wb.Names.Item("myName")`，它将返回工作表范围的命名范围。

相反，如果我这样做：`wb.Names.Item("Sheet1!myName")`，那显然会返回工作表范围的名称范围。我发现我可以使用它来指定特定于工作表的工作表，但不能指定工作簿。

无论如何我可以指定我想要工作簿范围吗？

我的解决方法目前正在遍历所有名称的列表，并比较 .Name 属性以获取工作簿范围命名范围。这是因为 .Name 属性附加了一个“Sheet1！”。到工作表范围命名范围。然而，这样做成本很高，我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:14:54.953

When we (JKP and myself) were writing [Name Manager](http://www.decisionmodels.com/downloads.htm) we specifically added a filter and warning message for Duplicate Global/Local Names because this Excel object model behaviour you mention leads to hard to detect bugs.

So my recommendation is never to use duplicate Global/Local Names.

We use code to detect if a name is duplicate global/local with the parent of the local name active and then switch sheets if necessary. The optimised VBA code we use to find the local version of a global name is this: its reasonably fast unless you have several tens of thousands of names -

```
 Function FindNameLocal(oSheet As Worksheet, sName As String) As Name
        Dim oName As Name
        Dim strLocalName As String
        Dim strLocalNameNoQuote
        Dim strName As String
        Set FindNameLocal = Nothing
        If Len(sName) > 0 And Not oSheet Is Nothing And oSheet.Names.Count > 0 Then
            On Error Resume Next
            strLocalName = "'" & oSheet.Name & "'!" & sName
            strLocalNameNoQuote = oSheet.Name & "!" & sName
            Set FindNameLocal = oSheet.Names(strLocalName)
            If Err <> 0 Or (FindNameLocal.NameLocal <> strLocalName And FindNameLocal.NameLocal <> strLocalNameNoQuote) Then
                On Error GoTo 0
                Set FindNameLocal = Nothing
                For Each oName In oSheet.Names
                    strName = oName.Name
                    If Len(strLocalName) = Len(strName) Or Len(strLocalNameNoQuote) = Len(strName) Then
                        If strName = strLocalName Or strName = strLocalNameNoQuote Then
                            Set FindNameLocal = oName
                            GoTo GoExit
                        End If
                    End If
                Next
            End If
        End If
GoExit:
    End Function 
```

# mongodb - pymongo cursor getMore 需要很长时间

> ID：12809474
> 
> 赞同：3
> 
> 时间：2012-10-09T22:44:26.363
> 
> 标签：mongodb, cursor, pymongo

我的 python 脚本迭代数据集所花费的时间有问题。数据集大约有 40k 个文档。这足以使 pymongo 游标发出多个提取，这些提取是内部的并且从开发人员那里抽象出来。我尽可能地简化了我的脚本来演示这个问题：

```
from pymongo import Connection
import time

def main():
    starttime = time.time()
    cursor = db.survey_answers.find()
    counter=0;
    lastsecond=-1;
    for entry in cursor:
        if int(time.time()-starttime)!=lastsecond:
            print "loop number:", counter, "   seconds:",int(time.time()-starttime);
            lastsecond= int(time.time()-starttime)
        counter+=1;
    print (time.time()-starttime), "seconds for the mongo query to get rows:",counter;

connection = Connection(APPSERVER)#either localhost or hostname depending on test
db = connection.beacon

if __name__ == "__main__":
    main() 
```

我的设置如下。我有 4 个单独的主机，一个运行 mongos 的 APPSERVER 和 3 个其他分片主机，每个主机都是主副本集和另外两个的辅助副本集。

我可以从其中一个分片服务器（连接指向 APPSERVER 主机名）运行它，我得到：

```
loop number: 0    seconds: 0
loop number: 101    seconds: 2
loop number: 7343    seconds: 5
loop number: 14666    seconds: 8
loop number: 21810    seconds: 10
loop number: 28985    seconds: 13
loop number: 36078    seconds: 15
16.0257680416 seconds for the mongo query to get rows: 41541 
```

所以很明显这里发生了什么，游标请求的第一批大小是 100，然后每个后续的都是 4m 的数据，这对我来说似乎刚刚超过 7k 个文档。每次获取花费**2-3 秒！！！！**

我想我可以通过将我的应用程序移近 mongos 实例来解决这个问题。我在 APPSERVER 上运行了上面的代码（连接指向本地主机）希望减少网络使用量....但情况更糟！

```
loop number: 0    seconds: 0
loop number: 101    seconds: 9
loop number: 7343    seconds: 19
loop number: 14666    seconds: 28
loop number: 21810    seconds: 38
loop number: 28985    seconds: 47
loop number: 36078    seconds: 53
53.5974030495 seconds for the mongo query to get rows: 41541 
```

两个测试中的游标大小*完全相同*，这很好，但是每个游标获取**在这里花费 9-10 秒！！！**

我知道我有四个需要通信的独立主机，所以这不可能是即时的。但是我需要遍历可能有 1000 万条记录的集合。以每 7k 2 秒计算，这**只需不到一个小时**！我不能拥有这个！

顺便说一句，我是 python/mongo 世界的新手，我习惯了 php 和 mysql，我希望它可以在几分之一秒内处理：

```
$q=mysql_query("select * from big_table");//let's say 10m rows here ....
$c=0;
while($r=mysql_fetch_rows($q))
    $c++;
echo $c." rows examined"; 
```

有人可以解释我提出的 pymongo（约 1 小时）和 php/mysql（<1 秒）方法之间的巨大差异吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:12:45.620

在 A. Jesse Jiryu Davis 的帮助下，我能够解决这个问题。原来我没有安装 C 扩展。我想在没有分片的情况下运行另一个测试，这样我就可以排除网络延迟的问题。我得到了一个干净的主机，设置了 mongo，导入了我的数据，运行了我的脚本，花费了同样多的时间。所以我知道分片/副本集与这个问题没有任何关系。

在修复之前，我能够打印：

```
pymongo.has_c(): False
pymongo version 2.3 
```

然后我按照[说明](http://api.mongodb.org/python/current/installation.html)安装 c 扩展的依赖项：

```
yum install gcc python-devel 
```

然后我重新安装了pymongo驱动：

```
git clone git://github.com/mongodb/mongo-python-driver.git pymongo
cd pymongo/
python setup.py install 
```

我重新运行了我的脚本，它现在打印：

```
pymongo.has_c(): True
pymongo version 2.3+ 
```

与上面的 16 秒相比，运行大约需要 1.8 秒。获取 40k 记录并对其进行迭代似乎仍然很长，但这是一个显着的改进。

我现在将在我的 prod（分片、副本集）环境中运行这些更新，希望能看到相同的结果。

******更新* ***** 我在我的 prod 环境中更新了我的 pymongo 驱动程序，并且有改进，尽管没有那么多。几次测试大约需要 2.5-3.5 秒。我认为分片性质是这里的错。迭代超过 4 万条记录似乎仍然非常缓慢。**

# javascript - CamanJS 图像处理，奇怪的错误

> ID：12809480
> 
> 赞同：0
> 
> 时间：2012-10-09T22:45:29.523
> 
> 标签：javascript, image-processing

我正在使用 CamanJS 使用 javascript 进行一些图像处理，并且我有两个类似的非常简单的脚本，第一个运行良好，第二个不行（这是我需要运行的脚本）。

这是第一个工作：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>CamanJS Testing Playground</title>
    <script type="text/javascript" src="caman.full.min.js"></script>
</head>
<body>
    <button onclick="filtraPhoto();">MODIFICA</button><br />
    <img id="smallImage" />
    <script>
    var immagine;
    var smallImage = document.getElementById('smallImage');
    smallImage.src = "test1_600.jpg";
    immagine = Caman("#smallImage", function () {});
    function filtraPhoto() {
        immagine.brightness(10).contrast(500).render(function () {
            alert("Done!");
        });
    }
    </script>
</body>
</html> 
```

这是第二个不起作用，它在萤火虫中返回错误：TypeError：this.c.pixelData is undefined

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>CamanJS Testing Playground</title>
    <script type="text/javascript" src="caman.full.min.js"></script>
    <script>
    var immagine;
    function carica()
    {
        var smallImage = document.getElementById('smallImage');
        smallImage.src = "test1_600.jpg";
        immagine = Caman("#smallImage", function () {});
    }
    function filtraPhoto() {
        immagine.brightness(10).contrast(500).render(function () {
            alert("Done!");
        });
    }
    </script>
</head>
<body>
    <button onclick="carica();">carica immagine</button><br />
    <button onclick="filtraPhoto();">MODIFICA</button><br />
    <img id="smallImage" />
</body>
</html> 
```

* * *

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:19:46.947

对我来说，它在 Firefox 和 Chrome 中运行得都很好。以我有限的经验，this.c.pixelData 通常在您转换为 CamanInstance 未成功创建时出现。

这可能是因为很多原因，但出乎意料的是，即使您已将它们换掉，CamanJS 也不会让您对多个对象使用相同的 html 标识符（类或 id）。因此，如果您在同一页面上运行上述两个脚本，则会导致错误。

抱歉，无法重现您的错误，很难提供更多帮助。

# ios - 应用程序在显示 UIActionSheet 时经常崩溃

> ID：12809481
> 
> 赞同：0
> 
> 时间：2012-10-09T22:45:35.997
> 
> 标签：ios, ios5, ios6

当调用显示操作表时，我间歇性地收到以下错误。

> -[UIActionSheet showInView:] 中的断言失败
> 
> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效参数不满足：视图！= nil”

现在在这种情况下，我没有更改屏幕。UIActionSheet 在触发本地通知时显示，并且我让观察者在此视图上调用本地方法：我将属性标记为强。当操作表被关闭时，我也将其设置为 nil。我正在为 UI 使用故事板。崩溃它是相当可重复的，也许少于 5 次尝试。（谢天谢地，我有这样的经历）。有什么建议接下来要尝试什么？我真的把头发拉出来了。我在这个主题上看到的大多数问题都指向一旦做出选择就会发生崩溃。在我的情况下，它是在演示和间歇性的。同样值得一提的是，这个特殊的视图在嵌入式导航控制器中有几个堆栈。Home>tableview>detail select>有问题的viewController。

```
self.actionSheet = [[UIActionSheet alloc]
                            initWithTitle:@"Select Choice" delegate:self cancelButtonTitle:@"Not Yet" destructiveButtonTitle:@"Do this Now" otherButtonTitles:nil];

[self.actionSheet showInView:self.parentViewController.tabBarController.view]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:51:10.770

根据您的代码，调用它时似乎设置`self.tabBarController`或未`self.tabBarController.tabBar`设置。

尝试使用：

```
[self.actionSheet showInView:self.view]; 
```

**编辑：**修复错误

**编辑 2：**使操作表显示在选项卡栏的顶部

```
[self.actionSheet showInView:[[UIApplication sharedApplication].delegate window]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T03:34:23.260

问题的答案是我没有删除 NSNotificationCenter 观察者。只有当@zsnow 推荐更改解决了崩溃但导致出现重复的 UIAlertSheet 对话框时，这一点才变得明显。

在我的特殊情况下，添加以下内容解决了我的问题。感谢大家的帮助。这些建议让我离终点线足够近。

```
-(void)viewWillDisappear:(BOOL)animated {

[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

}

# javascript - 嵌入在 iframe 中的页面中的 YouTube 视频在 Firefox 中不起作用

> ID：12809487
> 
> 赞同：1
> 
> 时间：2012-10-09T22:45:55.100
> 
> 标签：javascript, html, iframe, youtube

我认为这是 Firefox 中的一个错误，但只是想我会在这里检查。

我的网页上有一个 iframe，其中包含一个包含嵌入式 YouTube 播放器（在 iframe 内）的页面。这在 Firefox 中可以正常工作。

但是，当我添加以下 CSS 规则时：

```
iframe {
  transform: scale(0.75, 0.75);
  -moz-transform: scale(.75, .75);
  -webkit-transform: scale(.75, .75);
  -o-transform: scale(.75, .75);
  -ms-transform: scale(.75, .75);
} 
```

对于外部 iframe，YouTube 视频仅在 Firefox 中停止工作。它适用于 Chrome、Opera 和 Safari。

这是一个 Firefox 错误吗？

这是一个 JSFiddle 示例[http://jsfiddle.net/6C65Y/28/](http://jsfiddle.net/6C65Y/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:09:00.323

似乎 firefox 不管理 iframe 上的 CSS 比例。

此代码将起作用：

```
var previewFrame = document.getElementById('test');
var preview =  previewFrame.contentDocument ||  previewFrame.contentWindow.document;
preview.open();

var code = '<!doctype html><title>Test</title><h1>YouTube video</h1><iframe src="http://www.youtube.com/embed/64qx95Ckrwc" width="75%" height="75%"></iframe>';

preview.write(code);
preview.close(); 
```

​</p>

# jsf-2 - 更新动态生成的 selectOneMenu

> ID：12809488
> 
> 赞同：0
> 
> 时间：2012-10-09T22:46:00.327
> 
> 标签：jsf-2, primefaces

在我的网络应用程序中，我有以下数据表：

```
<!-- Exibição da lista de públicos -->
                <p:dataTable id="dtEventos" 
                             value="#{relatoriosBean.listaEventos}"
                             paginator="true" rows="5" 
                             rowsPerPageTemplate="5,10"
                             paginatorPosition="bottom"
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             var="atual"
                             emptyMessage="Não há eventos para exibição"
                             rendered="#{relatoriosBean.exibirPainelDados}">

                    <f:facet name="header">
                        Eventos
                    </f:facet>

                    <p:column sortBy="#{atual.nmeEvento}" styleClass="wrap">
                        <f:facet name="header">
                            Nome
                        </f:facet>
                        <p:panelGrid columns="1" 
                                     styleClass="gridNoLine">
                            <h:outputLabel id="olViewNomeEvento" 
                                           value="#{atual.nmeEvento}" 
                                           styleClass="t2"/>
                            <p:separator title="Descrição do evento"/>
                            <p:row>
                                <h:outputLabel value="Início: " styleClass="t2"/>
                                <h:outputLabel value="#{atual.dtaInicioEvento}"/>
                                <h:outputLabel value="Término: " styleClass="t2"/>
                                <h:outputLabel value="#{atual.dtaTerminoEvento}"/>
                            </p:row>
                            <h:outputLabel value="#{atual.dscEvento}" 
                                           styleClass="wrap"/>
                        </p:panelGrid>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            Relatórios
                        </f:facet>
                        <p:panelGrid columns="2" styleClass="gridNoLine">
                            <p:selectOneMenu value="#{relatoriosBean.tipoEventoRelatorioSelecionado}"
                                             required="true"
                                             requiredMessage="Selecione o relatório a ser gerado."
                                             effect="fade">
                                <f:selectItem itemLabel="Selecione um item..." itemValue=""/>
                                <f:selectItems value="#{relatoriosBean.tiposEventoRelatorios}">
                                </f:selectItems>
                            </p:selectOneMenu>
                            <p:commandButton icon="ui-icon-document" 
                                             title="Gerar relatório"
                                             actionListener="#{relatoriosBean.gerarRelatorio}"
                                             update="UPDATE THE SELECTONEMENU OF THE LINE">
                                <f:setPropertyActionListener value="#{atual.idtEvento}"
                                                             target="#{relatoriosBean.idEventoSelecionado}}"/>
                            </p:commandButton>
                        </p:panelGrid>
                    </p:column>
                </p:dataTable> 
```

如您所见，在其中一个数据表列中，我有一个 selectOneMenu。在同一列中，我有一个设置了 actionListener 的按钮。好吧，我想要的是：根据命令按钮的单击更新列的 selectOneMenu。有办法做到这一点吗？

好的！现在 f:setPropertyActionListener 没有设置属性 eventtoSelecionado。这是代码：

```
<p:dataTable value="#{relatoriosBean.listaEventos}"
                             var="atual">
                    ...

                    <p:column>
                        <f:facet name="header">
                            Relatórios
                        </f:facet>
                        <p:panelGrid columns="2" 
                                     styleClass="gridNoLine">
                            <p:selectOneMenu id="somRelatorios"
                                             value="#{relatoriosBean.relatorioSelecionado}"
                                             required="true"
                                             requiredMessage="Selecione o relatório a ser gerado."
                                             effect="fade">
                                <f:selectItem itemLabel="Selecione um item..." itemValue=""/>
                                <f:selectItems value="#{relatoriosBean.relatorios}">
                                </f:selectItems>
                            </p:selectOneMenu>
                            <p:commandButton id="cbGerarRelatorio"
                                             icon="ui-icon-document" 
                                             title="Gerar relatório"
                                             actionListener="#{relatoriosBean.gerarRelatorio}"
                                             update=":frmRelatorios:opPainelDados"
                                             process="@this somRelatorios"
                                             immediate="true">
                                <f:setPropertyActionListener target="#{relatoriosBean.eventoSelecionado}"
                                                             value="#{atual}"/>
                            </p:commandButton>
                        </p:panelGrid>
                    </p:column>
                </p:dataTable> 
```

在 gerarRelatorio 动作侦听器中，属性 eventtoSelecionado 为 null。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:35:27.570

当然，将此添加`id=mySelectOne`到您`<p:selectOneMenu/>`的`<p:commandButton/>`设置中，并将`update`属性设置为`update="mySelectOne"`. `@ViewScoped`但是为了在这个 ajax 更新中获得最好的结果，如果你还没有这样做的话，我强烈建议你设置你的托管 bean 注释。您的命令按钮在更新结束时应如下所示

```
 <p:commandButton icon="ui-icon-document" 
                                         title="Gerar relatório"
                                         actionListener="#{relatoriosBean.gerarRelatorio}"
                                         update="mySelectOne"> 
```

# ruby - 在 Ruby 测试中验证大散列的有效方法

> ID：12809490
> 
> 赞同：0
> 
> 时间：2012-10-09T22:46:12.067
> 
> 标签：ruby, testing

测试哈希是否包含特定键和值的有效方法是什么？

我所说的高效是指以下项目：

*   失败时易于阅读的输出
*   易于阅读的测试源
*   最短的测试仍然有效

有时在 Ruby 中我必须创建一个大哈希。我想学习一种有效的方法来测试这些哈希：

```
expected_hash = {
    :one => 'one',
    :two => 'two',
    :sub_hash1 => {
        :one => 'one',
        :two => 'two'
    },
    :sub_hash2 => {
        :one => 'one',
        :two => 'two'
    }
} 
```

我可以测试这有几种方法。我最常使用的两种方法是一次使用整个哈希，或者单个项目：

```
assert_equal expected_hash, my_hash
assert_equal 'one', my_hash[:one] 
```

这些方法适用于像我们的示例散列这样的小散列，但对于非常大的散列，这些方法会失效。整个哈希测试将显示太多关于失败的信息。而且单项测试会使我的测试代码太大。

我在想一种有效的方法是将测试分解为许多较小的测试，这些测试仅验证部分哈希。这些较小的测试中的每一个都可以使用整个哈希样式测试。不幸的是，我不知道如何让 Ruby 为不在子哈希中的项目执行此操作。子哈希可以像下面这样完成：

```
assert_equal expected_hash[:sub_hash1], my_hash[:sub_hash1]
assert_equal expected_hash[:sub_hash2], my_hash[:sub_hash2] 
```

如何测试哈希的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:30:12.883

测试时，您需要使用可管理的块。正如您所发现的，针对巨大的散列进行测试使得很难跟踪正在发生的事情。

考虑使用`to_a`. 然后您可以轻松地使用集合运算符来比较数组，并找出丢失/更改的内容。

例如：

```
[1,2] - [2,3]
=> [1]
[2,3] - [1,2]
=> [3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:13:15.877

您可以`hash`对哈希使用方法来比较其中两个或它们的部分：

```
h = {:test => 'test'}
 => {:test=>"test"} 
h1 = {:test => 'test2'}
 => {:test=>"test2"} 
h.hash
 => -1058076452551767024 
h1.hash
 => 1300393442551759555

 h.hash == h1.hash
 => false 
```

# javascript - 有效的 Javascript Date 对象需要什么？

> ID：12809492
> 
> 赞同：1
> 
> 时间：2012-10-09T22:46:22.893
> 
> 标签：javascript, html, date

我一整天都在为此头疼。无论我如何初始化 Javascript 日期，我似乎都无法获得有效的日期对象......我假设日期是无效的，并且通过使用 Chrome 的调试器检查它不能正常工作，它的值是'__proto__：无效日期'。

我已经尝试了以下所有方法：

```
var d = new Date();
var d = new Date('2012-10-08');
var d = new Date('2012-10-08 00:00:00');
var d = new Date(Date('2012-10-08'));
var d = new Date(Date.parse('2012-10-08'));
var d = new Date(2012,10,08);
var d = new Date("October 13, 1975 11:13:00"); 
```

以及无数其他尝试。

这在 iOS 中出现了一个问题，我试图从这些 Date 对象中获取值，但每个函数都只返回 NaN。我宁愿避免使用外部库或必须将 YYYY-MM-DD 格式转换为任何其他格式，因为我试图让它与 HTML5 输入 type="date" 一起使用，并且移动代码最少地点。

本质上，这归结为：使 Date 对象有效的参数是什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:59:02.347

不要相信 Date 对象来解析字符串，您必须手动进行。给定格式`2012-10-08`，

```
function stringToDate(s) {
    s = s.match(/\d+/g);
    if (s) {
        return new Date(s[0], --s[1], s[2]);
    } 
} 
```

您可能想要对输入字符串和生成的日期对象进行一些验证，上面只是显示了转换。

### 编辑

顺便说一句，似乎在所有浏览器中一致解析的唯一字符串格式是美国特定的`month/date/year`格式。没有规范支持它的使用，也没有任何理由相信浏览器会继续支持它，除了实用主义和“遗留”的原因。

对于绝大多数地区，“2/3/2012”被解释为 3 月 2 日，因此得到 2 月 3 日可能是意料之外的。

一旦旧版本的 IE 不再使用（可能几年后），按照 ECMA-262 使用 ISO8601 扩展格式应该是安全的。但是，即使支持它的浏览器也不一致。例如给定：

```
new Date('2011-02-29'); 
```

Firefox 15 返回“无效日期”，IE 9 和 Chrome 22 返回 2011 年 3 月 1 日的日期对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:58:12.680

调用方法有以下三种方式：

*   从纪元开始的毫秒数：

    ```
     new Date(milliseconds) 
    ```

*   任何[符合 IETF 的 RFC 2822 时间戳](https://www.rfc-editor.org/rfc/rfc2822#page-14)：

    ```
     new Date("November 2, 1988 10:00:00"); 
    ```

*   个人参数：

    ```
     new Date(year, month, day [, hour, minute, second, millisecond])
     new Date(1988,11,02,10,0,0); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T23:19:24.577

如果您主要关心的是解析，请查看[Moment.js](http://momentjs.com/)，它显然优于自己解析事物。（恕我直言）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T15:59:31.120

结果 jQuery 没有在 iOS 中正确地将 .change() 事件绑定到 input type="date" 。将事件更改为 .blur() ，现在一切似乎都正常了。但是，在 Chrome 中创建有效的日期对象似乎仍然是不可能的......另一天的问题。

感谢大家的帮助！

# c++ - 就地修改并返回副本是否有意义？

> ID：12809496
> 
> 赞同：14
> 
> 时间：2012-10-09T22:46:57.760
> 
> 标签：c++, python, mutable

注意：我标记了这个 Python 和 C++，因为我已经看到了这两个例子，但问题是与语言无关。

修改对象的函数或类方法有两种选择：直接修改相关对象中的数据，或者创建一个新副本并返回它，同时保持原始数据不变。通常，您可以通过查看函数返回的内容来判断哪个是哪个。

有时您会发现一个函数尝试同时执行这两种操作，修改原始对象，然后返回对该对象的副本或引用。有没有这样的情况比只做一个或另一个提供任何优势？

我已经看到了依赖于返回对对象的引用的[流畅接口](http://martinfowler.com/bliki/FluentInterface.html)或[方法链](http://en.wikipedia.org/wiki/Method_chaining)的示例，但这似乎是一种特殊情况，在上下文中应该是显而易见的。

我的第一个不好的例子直接来自[Python 文档](http://docs.python.org/tutorial/controlflow.html#default-argument-values)，并说明了可变默认参数的问题。对我来说，这个例子是不切实际的：如果函数修改了它的参数，那么有一个默认值是没有意义的，如果它返回一个副本，那么应该在任何修改发生之前制作副本。问题之所以存在，是因为它试图两者兼而有之。

```
def f(a, L=[]):
    L.append(a)
    return L 
```

第二个示例来自[`CStringT::MakeUpper`](http://msdn.microsoft.com/en-us/library/h526w0yy(v=vs.80).aspx)函数中的 Microsoft C++。文档说明了返回值：

> 返回字符串的副本，但全部为大写字符。

这导致人们期望原件保持不变。部分问题在于文档具有误导性，如果您查看原型，您会发现它返回了对字符串的*引用。*除非仔细观察，否则您不会注意到这一点，并且将结果分配给新字符串编译不会出错。惊喜在后面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T00:08:41.683

C++ 示例 Inc/Dec 运算符

```
// Pre-Increment: Create a new object for return and modify self.
myiterator  operator++(int) {myiterator tmp(*this); operator++(); return tmp;}

// Post-Increment: modify self and return a reference
myiterator&  operator++() {/* Do Stuff*/ return *this;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:16:49.753

在 C++ 中有一些明显的示例，您希望在其中修改对象并返回引用：

1.  任务：

    ```
    T & T::operator=(T && rhs)
    {
        ptr = rhs.ptr;
        rhs.ptr = nullptr;
        return *this;
    } 
    ```

    这个修改了对象本身和参数，并返回对自身的引用。这样就可以写了`a = b = c;`。

2.  IO流：

    ```
    std::ostream & operator<<(std::ostream & os, T const & t)
    {
        os << t->ptr;
        return os;
    } 
    ```

    同样，这允许链接操作，`std::cout << t1 << t2 << t3;`或典型的“提取和检查” `if (std::cin >> n) { /* ... */ }`。

基本上，返回对其中一个输入对象的引用总是用于链式调用或以某种形式评估结果状态，并且有几个有用的场景。

另一方面，修改参数然后返回对象的*副本*似乎不太有用。

# javascript - 如何在javascript中制作定时队列

> ID：12809500
> 
> 赞同：2
> 
> 时间：2012-10-09T22:47:10.897
> 
> 标签：javascript, jquery, extjs

行。我没有这个问题的代码。我问这个是因为我是 javascript 新手。我想知道如何在 JS 中创建定时队列。这是诀窍。

我有一个组合框。组合框后面有 extjs 数据存储，它每 5 秒用新数据更新一次，即组合将获得新的行条目。

行条目可以是 1,2 和 3 三种类型。可以有多个相同类型但具有不同行 ID 的行。如果 5 分钟内没有更新，则每行都将从组合中删除。这意味着如果我从商店获得类型 3 的新行，它将在组合中停留 5 分钟。如果在获取的新数据中出现相同的行（具有相同的 id 和类型），则 5 分钟计时器将重置并再次计数 5 分钟。等等。

如何在 javascript 中实现此功能。

不明白的请写评论。

这是一个例子：

```
row_1 type1 5 min timer start
row_2 type1 5 min timer start
row_3 type3 5 min timer start
row_2 type2 5 min timer start 
```

这是当前获取的数据的示例。3分钟后，我得到了这个数据。

```
row_3 type3 5 min timer start 
```

其余的行计时器将继续运行，直到达到 5 分钟的限制，但对于第三行，计时器将被重置，它将在接下来的 5 分钟内停留在组合中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:09:56.673

您将必须在这里跟踪两件事：实际项目，以及上次更新的时间（或者更准确地说，将更新它的超时事件。

```
timeouts = [];
elems = [];
function updateElem(no){
    //Do your update on elems[no]
    clearTimeout(timeouts[no]);
    timeouts[no] = setTimeout(function(){ removeElem(no) }, 5*60*1000 );
}
function removeElem(no){
    //Remove the element.
} 
```

这展示了基本概念。有很多更好的方法可以将所有内容联系在一起，但基本思想是：

*   在对象上设置超时以在五分钟后将其删除
*   更新对象时：
    *   清除之前的超时
    *   设置新的超时

因为 JS 并不是真正的多线程，所以您不必担心并发问题，只要您确定了范围。

[查看此文档](http://www.w3schools.com/js/js_timing.asp)以更全面地了解超时事件是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:52:28.787

别的地方：

```
function ComboRemoval(id)
{
    Lookup your combobox (document.findelementbyid perhaps)
    Find element with value "id"
    remove it
} 
```

向组合框添加元素时：

```
Add the element
setInterval(function() { ComboRemoval(1234)}, 300000);  //FIXED AS PER COMMENTS BELOW 
```

setInterval 将在 5 分钟内触发 ComboRemoval 函数，并从框中删除 ID 1234。

300000 = 5 分钟（1000 = 1 秒，60 x 5 = 300 秒，300 x 1000 = 300000）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:58:39.337

您需要使用调用 setTimeout() 的递归函数

例子：

```
function myFunc() {
    var minutes = 5;
    //do stuff here
    setTimeout(function() { myFunc() }, minutes*60000 }; 
} 
```

调用时 myFunc() 将触发，然后在 5 分钟计时器上调用自身。其余程序逻辑 100% 取决于最终结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T23:12:06.493

基于@Gherkin 的回答，使用 jQuery：

```
function addOption(key, text, timeout) {

    var el = $("<option></option>")
         .attr("value",key)
             .text(text);
    ​$('#test').append(el);
    setTimeout(function() { el.remove(); }, timeout);
} 
```

现在您可以致电：

```
addOption("value", "Text for option", 2000); 
```

看看它在行动：http: [//jsfiddle.net/um9Cu/](http://jsfiddle.net/um9Cu/)

您可以扩展 addOption() 以使用密钥查找现有项目并延长超时时间，或者您需要做的任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T16:21:36.697

我通过使用签名会话解决了这个问题。最新的数据是在 session 中写入的，所以新的请求是根据 session 中的数据来的。我同时使用了 php 和 js。Js 正在通过 php 会话读取

# c# - 使用 Skype4Com 转移 Skype 通话 - 可以吗？

> ID：12809502
> 
> 赞同：3
> 
> 时间：2012-10-09T22:47:18.510
> 
> 标签：c#, forwarding, skype4com

我目前正在使用 c# 开发一个Skype插件/应用程序，我希望能够将呼叫转移/转发到另一个Skype地址。

我尝试使用`ICall.Transfer();`，它（我后来发现）基本上只传输文件而不是调用。然后我尝试使用`ICall.Forward();`，但该功能尝试将呼叫发送到语音信箱，并且不允许我设置任何其他目标来将呼叫转发到。

所以我的问题是：是否可以使用基本的 Skype4Com 功能转接/转接呼叫，或者我应该尝试编写一个解决方法，涉及创建电话会议然后离开通话，所以“转接”的呼叫者留在对话中？

我真的很想对此有所了解。

**编辑：**

我解决了。事实证明，该`ICall.Transfer();`功能是要走的路。
我只是忽略了我犯的一个简单错误，可以通过一些简单的调试来防止它。

使用以下内容：

```
ICall.Transfer("skype.address"); 
```

有效，但我试图动态加载Skype地址，这在过程中的某处出现错误。

# c++ - 在 Internet Explorer_Server (IWebBrowser2) 上拦截 WM_COMMAND（从加速器发送）

> ID：12809507
> 
> 赞同：4
> 
> 时间：2012-10-09T22:47:59.960
> 
> 标签：c++, internet-explorer, mfc, atl

我需要拦截发送到我的 CHtmlView 对象的粘贴消息。根据 Spy++，它作为 WM_COMMAND 消息发送 - 但根据 Spy++，消息不是发送到 CHtmlView 对象，而是发送到它包装的 Internet Explorer_Server（或 IWebBrowser2）对象。在任何其他父对象中都看不到有问题的 WM_COMMAND 消息（我通过观察和 Spy++ 发现了这一点）。

我如何拦截这个（甚至，比如说，一个全选）消息？我已经查看了 AfxCallWndProc 以获得正确的 WM_COMMAND 消息，但它没有出现在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:28:43.520

要拦截消息（例如：WM_COMMAND），您需要通过调用以下方法对窗口（在您的情况下为 Internet Explorer_Server）进行子类化：

```
BOOL SetWindowSubclass(
  _In_  HWND hWnd,
  _In_  SUBCLASSPROC pfnSubclass,
  _In_  UINT_PTR uIdSubclass,
  _In_  DWORD_PTR dwRefData
); 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb773183(v=vs.85).aspx#set_windowsubclass](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773183(v=vs.85).aspx#set_windowsubclass)

之后，您自己的 Windows 程序首先进行控制，然后您可以决定如何处理该消息。

# ruby-on-rails - Rails 中的日期转换

> ID：12809513
> 
> 赞同：0
> 
> 时间：2012-10-09T22:48:49.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb

我正在从 Rails 3.2 中的 CSV 导入数据并将其保存到 mongodb 集合中，除日期字段外一切正常。导入的日期格式为 DD/MM/YYY。请问如何将导入的日期转换为 YYYY-MM-DD？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:04:23.023

您可以像这样使用日期解析：

```
Date.strptime('01/02/2003', '%d/%m/%Y').to_s    #=> "2003-02-01" 
```

*   [`Date.strptime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-c-strptime)`Date`从给定格式的字符串创建对象

*   [`Date#to_s`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-to_s)以 ISO 8601 格式返回它（即 YYYY-MM-DD）

但这取决于你的 CSV 有多大——这会创建一堆中间`Date`对象，这些对象会比（有点难看的）字符串索引方法慢一点：

```
def reformat_date(date)
  "#{date[6..9]}-#{date[3..4]}-#{date[0..1]}"
end

reformat_date('01/02/2003')     #=> "2003-02-01" 
```

**更新**

我很好奇，所以我运行了一些快速基准测试——日期解析方法比字符串方法慢大约 2.7 倍（5.289 秒对 1.981 秒进行一百万次转换，Ruby 1.9.3/Windows）。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:08:42.657

你可能需要

```
require 'date' 
```

然后使用以下语句解析日期：

```
d = Date.strptime('09/10/2012', '%d/%m/%Y') 
```

使用以下示例将返回正确的格式：

```
d.year #=> 2012
d.mon  #=> 10
d.day  #=> 9
d.strftime('%Y/%m/%d')  #=> "2012/10/09" 
```

然后将其保存到数据库中。不过，我对 mongodb 并不熟悉，但我相信你知道该怎么做。

有关日期解析的更多信息，您应该访问[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)。

# html - IE8 中提交的表单中的 $_FILES 数组为空

> ID：12809514
> 
> 赞同：0
> 
> 时间：2012-10-09T22:48:51.340
> 
> 标签：html, forms, iframe, internet-explorer-8, submit

我正在尝试创建一个上传脚本，但遇到了 IE8 和更早版本的问题。（当然；））在所有其他浏览器中它工作正常，但在 IE8 中 $_FILES 数组是空的。这是正在使用的 html 代码：

```
<FORM method=post action=api/upload.php target=form8230839>
    <INPUT name=file type=file>
    <INPUT value="Submit Query" type=submit>
    <INPUT name=id value=id66130748349062623150808191 type=hidden>
</FORM>
<IFRAME id=form8230839 name=form8230839></IFRAME> 
```

（注意代码是由 javascript createElement 生成的，所以 IE8 用大写字母写出来，并且属性周围没有引号。）

然后在我正在做的php文件中：

```
print_r($_FILES); 
```

哪个返回一个空数组？任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:50:19.700

添加`enctype="multipart/form-data"`到您的表单标签。

规格：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:51:42.780

您的问题似乎与此问题可能重复：

[PHP 中的 $_FILES 数组为空](https://stackoverflow.com/questions/1627017/files-array-in-php-is-empty)

然而，正如其他人所指出的那样，以及从附件中，解决方案是添加：

```
enctype="multipart/form-data" 
```

到你的表格。

# c# - 初始化类 C#

> ID：12809517
> 
> 赞同：1
> 
> 时间：2012-10-09T22:49:07.323
> 
> 标签：c#, unit-testing, tdd, mstest

启动类并将该初始化保存在变量中以供其他方法使用而不是每次都启动的最佳方法是什么。

这是我的代码：

```
private Employee employee;
public Employee SystemUnderTest
{
   get 
   {
       if (employee == null)
       {
          employee = new Employee();
       }
      return employee;
   }
}

//..method1 Test1
   public void TestMethod1()
   {
     Assert.IsTrue(SystemUnderTest.IsActive());
   }

   //..method2 Test   
   public void TestMethod2()
   {
     Assert.IsTrue(SystemUnderTest.IsEmployeeExists());
   } 
```

PS：调试时我注意到它确实用每个方法初始化了 Employee 对象。

使用 3.5 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:00:02.643

单例模式（变体之一，延迟初始化）：

```
public class Singleton
{
    private readonly static object _lockObject = new object();
    private static Singleton _instance;

    public static Singleton Instance {
        get
        {
            if (_instance == null)
            {
                lock (_lockObject)
                {
                    if (_instance == null)
                        _instance = new Singleton();
                }
            }
            return _instance;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:53:16.517

静态初始化应该可以工作。这将在您第一次访问该类型时运行，并且共享变量将可用于所有实例。

```
private static bool m_HasInitialized = false;

private static MyClassName()
{
    // Do Stuff...
    m_HasInitialized = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:56:10.717

如果我正确理解您的问题，请在您的测试类中创建一个私有字段来保存包含初始化信息的变量，然后使用带有 [TestInitialize] 或 [TestSetUp] 属性（取决于您的测试框架）装饰的方法来初始化信息。这将使您的所有测试方法都可以看到私有字段，但您只需在一个地方定义初始化。这还具有为每个测试方法重新初始化变量的额外好处，这样如果一个测试意外地改变了变量的状态，它不应该导致其他测试中断。

但是，如果您真的希望初始化只发生一次（而不是只定义一次代码），请使用 [TestFixtureSetUp] 或 [ClassInitialize] 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:56:50.567

您可以在类静态构造函数中初始化一个静态字段，或者您可以使用`[ClassInitialize]` [*](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute%28v=vs.80%29.aspx) unit test 属性来标记您希望在该单元测试类中的任何测试方法执行之前执行的方法。

更多信息在这里：[您是否使用 TestInitialize 或测试类构造函数来准备每个测试？为什么？](https://stackoverflow.com/questions/334515/do-you-use-testinitialize-or-the-test-class-constructor-to-prepare-each-test-an)

# php - 从 PHP 中调用 PHP 脚本

> ID：12809518
> 
> 赞同：0
> 
> 时间：2012-10-09T22:49:08.743
> 
> 标签：php

我有一个 PHP 脚本，我想通过浏览器和命令行运行它。当我从命令行运行脚本时，它可以毫无问题地执行。但是，当我通过诸如`exec`or之类的函数调用它时`passthru`，它不起作用。我没有从通话中得到任何输出，并且在日志中没有看到任何错误。我很困惑...

```
echo exec('php /usr/share/nginx/www/function.php arg1'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:52:22.000

当您使用`exec()`. 所以做这样的事情：

```
exec('php /usr/share/nginx/www/function.php arg1', $output);
print_r($output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:52:40.237

@大卫，

有几件事要检查。

1.  创建一个 PHP 信息页面并查看是否启用了 exec 或 passthru。主机出于安全考虑将其禁用。

尝试：

```
<?php

$exe = exec('php /usr/share/nginx/www/function.php arg1');

var_dump($exe);

?> 
```

你甚至可以这样做：

```
<?php

if(function_exists('exec')) {
    echo "exec is enabled";
}
?> 
```

# python - Python：从函数中分配对象的变量（OpenERP）

> ID：12809520
> 
> 赞同：2
> 
> 时间：2012-10-09T22:49:24.047
> 
> 标签：python, openerp

我正在开发 OpenERP 环境，但也许我的问题可以从纯 python 的角度来回答。我要做的是定义一个类，其“_columns”变量可以从返回相应字典的函数中设置。所以基本上：

```
class repos_report(osv.osv):
    _name = "repos.report"
    _description = "Reposition"
    _auto = False

    def _get_dyna_cols(self):
        ret = {}
        cr = self.cr
        cr.execute('Select ... From ...')
        pass           #<- Fill dictionary
        return ret

    _columns = _get_dyna_cols()

    def init(self, cr):
        pass    #Other stuff here too, but I need to set my _columns before as per openerp 

repos_report() 
```

我尝试了很多方法，但这些代码反映了我的基本需求。当我执行我的模块进行安装时，我收到以下错误。

```
TypeError: _get_dyna_cols() takes exactly 1 argument (0 given) 
```

在定义`_get_dyna_cols`我需要`self`作为第一个参数的函数时（甚至在执行之前）。此外，我需要对 openerp 的“cr”光标的引用，以便查询数据以填充我的 _columns 字典。那么，如何调用此函数以便将其分配给`_columns`? 我可以将什么参数传递给这个函数？

从 OpenERP 的角度来看，我想我很清楚我的需求。因此，也欢迎任何其他建议的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:13:50.173

从 OpenERP 的角度来看，正确的解决方案取决于您实际尝试做的事情，而这在您的描述中并不十分清楚。通常`_columns`模型的定义必须是静态的，因为它将被 ORM 自省并且（除其他外）将导致创建相应的数据库列。您可以`_columns`在模型的`__init__`方法（不是`init`¹）中设置，但这没有多大意义，因为结果不能随时间而改变，（并且它只会在模型注册表初始化时被调用一次）。

现在“静态列”规则有一些例外：

## 功能字段

当您只想动态处理虚拟列上的读/写操作时，您可以简单地使用该[`fields.function`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#functional-fields)类型的列。它需要模拟其他字段类型之一，但可以动态地对数据执行任何操作。典型示例将经过一些预处理后将数据存储在其他（实际）列中。官方 OpenERP 模块中有数百个示例。

## 动态列集

在开发向导模型（`TransientModel`以前是 的子类`osv_memory`）时，通常不关心数据库存储，只是想从用户那里获取一些输入并采取相应的操作。在这种情况下，需要一组完全动态的列并不少见，其中列的数量和类型可能会在每次使用模型时发生变化。这可以通过重写一些关键的 API 方法来模拟动态列来实现：

*   [`fields_view_get`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.fields_view_get)是客户端为获取模型的视图（表单/树/...）定义而调用的 API 方法。
*   [`fields_get`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.fields_get)包含在结果中，`fields_view_get`但可以单独调用，并返回`dict`模型的列定义。
*   [`search`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.search), [`read`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.read),[`write`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.write)和[`create`](http://doc.openerp.com/v6.1/developer/03_modules_2.html#openerp.osv.orm.BaseModel.create)被客户端调用以访问和更新记录数据，并且应该优雅地接受或返回在结果中定义的列的值`fields_get`

通过正确覆盖这些方法，您可以完全实现动态列，但您需要保留 API 行为，并在实际静态列或其他模型中自己处理数据（如果有）的持久性。

官方插件中有一些此类动态列集的示例，例如在`survey`需要根据调查活动的定义模拟调查表格的模块中。

¹ The `init()` method is only called when the model's module is installed or updated, in order to setup/update the database backend for this model. It relies on the `_columns` to do this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:37:05.517

当您`_columns = _get_dyna_cols()`在类主体中编写时，该函数调用就在类主体中进行，因为 Python 仍在解析类本身。那时，您的`_get_dyn_cols`方法只是本地（类主体）命名空间中的一个函数对象 - 它被调用。

您收到的错误消息是由于缺少`self`参数，该参数仅在您将函数作为方法访问时插入 - 但此错误消息不是这里的错误：错误是您正在进行即时函数调用并期望一种特殊行为，例如延迟执行。

在 Python 中实现您想要的方法 - 即在`colluns`访问属性时自动调用该方法是使用内置的“属性”。在这种情况下，只需执行以下操作：`_columns = property(_get_dyna_cols)`- 这将创建一个名为“columns”的类属性，每当从实例访问该属性时，该属性将通过称为“描述符协议”的机制调用所需的方法。

要了解有关内置属性的更多信息，请查看文档：[http ://docs.python.org/library/functions.html#property](http://docs.python.org/library/functions.html#property)

# wordpress - 在 WordPress 中创建帖子时获取元数据

> ID：12809525
> 
> 赞同：5
> 
> 时间：2012-10-09T22:49:57.133
> 
> 标签：wordpress

我正在使用 save_post 操作来检查自定义帖子中的元数据字段并对该值采取一些操作。这是我如何做到这一点的基本胆量：

```
add_action('save_post', 'my_save_post');

function my_save_post($post_id)
{
    // Check if not autosaving, processing correct post type etc.
    // ...

    // Get the custom field value.
    $my_field_value = get_post_meta($post_id, 'my_field', true);

    // Do some action
    // ...
} 
```

通过管理页面更新帖子时，这可以正常工作。但是，第一次创建帖子时，`my_field_value`始终为空。该字段确实正确保存，但此操作触发器似乎无法看到它，也没有任何其他自定义字段值。

我希望对创建的所有此类帖子执行该操作，并且我将通过 CSV Imported 插件导入许多帖子。即使这样，自定义字段确实会正确导入，并且会为导入的每一行触发操作触发器，但 save_post 操作仍然看不到自定义字段值。

据我从文档中可以看出，在此操作触发时，帖子已经创建，因此我应该始终能够看到该自定义元字段。

* * *

答案似乎在于事情发生的顺序。从表单创建帖子时，自定义字段都由适当的操作收集并在我的 save_post 操作触发之前添加到帖子中。这意味着我的触发器能够看到那些自定义字段值。

从 CSV 导入时，首先创建基本帖子，然后添加自定义元字段。save_post 触发器在第一次创建时触发，在添加元字段之前，因此自定义字段数据对 save_post 操作不可见。

`updated_post_meta`我的解决方案是使用和`added_post_meta`操作*以及*操作来捕获元数据的更新`save_post`：

```
add_action('updated_post_meta', 'my_updated_post_meta', 10, 4);
add_action('added_post_meta', 'my_updated_post_meta', 10, 4);

function my_updated_post_meta($meta_id, $post_id, $meta_key, $meta_value)
{
    // Make sure we are handling just the meta field we are interested in.
    if ($meta_key != 'my_custom_field') return;
    if (wp_is_post_revision($post_id)) return;
    if (get_post_type($post_id) != 'my_post_type') return;
    if (trim($meta_value) == '') return;

    // Do my custom task (linking this post to a parent post in a different
    // post type). This is the same task performed by the save_post action.
    my_link_product_track($post_id, trim($meta_value));
} 
```

这基本上就是我所做的，而且它似乎运作良好。我确实将以上所有内容封装到主题中的自定义类中，不建议使用此处显示的全局范围变量，但这只是为了展示方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:53:16.703

你应该看看 using`$post->ID`而不是`$post_id`-

```
$my_field_value = get_post_meta($post->ID, 'my_field', true); 
```

[法典中的 get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta#Examples)

**编辑**：

你能做这样的事情吗？

```
if($post->ID == ''){
    $pid = $post_id;
} else {
    $pid = $post->ID;
}

//$pid = $post->ID or $post_id, whichever contains a value
$my_field_value = get_post_meta($pid, 'my_field', true); 
```

在 $post->ID 和 $post_id 中查找值并使用不为空的那个？

# php - xsendfile 不适用于 mod_rewrite

> ID：12809526
> 
> 赞同：1
> 
> 时间：2012-10-09T22:50:06.120
> 
> 标签：php, apache, mod-rewrite, apache2, x-sendfile

我正在尝试从重写的 URL 发送文件。在 .htaccess 文件中，我有：

```
RewriteRule ^foo$ foo.php [L] 
```

在 foo.php 中：

```
header("x-sendfile: ".$_SERVER["DOCUMENT_ROOT"]."/filesdir/test.txt"); 
```

直接浏览到 foo.php 时，我看到了文件的内容，但是当浏览到 /foo 时，我得到 404。

我试图搜索网络，但除了将 foo 重定向到 foo.php 之外找不到任何解决方案

有谁知道问题出在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:29:59.657

我解决了这个问题。

在 httpd.conf 中有 XSendFilePath 指令，它是一个已解析的符号路径，而在 php 中，“filesdir”实际上是 XSendFilePath 中路径的符号链接。

我已将符号链接添加到 XSendFilePath，现在一切正常！

# css - 在图像元素上使用 ::before 或 ::after？

> ID：12809530
> 
> 赞同：0
> 
> 时间：2012-10-09T22:50:36.463
> 
> 标签：css, image, pseudo-element

“::before”和“::after”伪元素对图像元素不起作用吗？

这是我放在一起的一个例子......我只是想在这里的图像后面得到一个黄色背景：http: [//dabblet.com/gist/3861878](http://dabblet.com/gist/3861878)

[我在另一篇文章](https://stackoverflow.com/questions/11846931/pseudo-element-before-or-after-on-an-image-element)中看到了这个“已回答”（但没有其他细节），但似乎在其他地方找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:54:02.097

CSS 2.1 规范说：

> 笔记。该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。

[http://www.w3.org/TR/CSS21/generate.html](http://www.w3.org/TR/CSS21/generate.html)

所以避免使用它是明智的。跨浏览器的行为是不确定的，并且将来可能会发生变化。

# servicestack - 来自 ServiceStack Web 服务的奇怪 NotFound 响应

> ID：12809534
> 
> 赞同：1
> 
> 时间：2012-10-09T22:50:58.853
> 
> 标签：servicestack

我可以通过 Javascript 使用“/api/X”路径调用我的服务。**（后动词）**

我可以使用 client.Get(serviceUrl) //client is JsonServiceClient**在没有请求对象的情况下调用相同的服务**

但是 client.Send(X) 不起作用。我收到奇怪的 404 NotFound 响应？

我错过了什么吗？我该如何调试问题？

到现在为止的费用是5小时！

清单

*   X 类有两个字符串属性（没有枚举或自定义类型）
*   X 和 XResponse 具有 DataContract 和 DataMember 属性（试用版）

代码：

在 AppHost.cs 中

```
 base.SetConfig(new EndpointHostConfig
        {
            GlobalResponseHeaders =
                {
                    { "Access-Control-Allow-Origin", "*" },
                    { "Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS" },
                },
            AppendUtf8CharsetOnContentTypes = new HashSet<string> { ContentType.Html },
            DebugMode = true, //Show StackTraces in service responses during development
            LogFactory = new ElmahLogFactory(new Log4NetFactory())
        });

        //Set JSON web services to return idiomatic JSON camelCase properties
        ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;

        //Configure User Defined REST Paths
        Routes.Add<JobRequest>("/job"); 
```

在 Model.cs 中

```
 [DataContract]
public class JobRequest : IReturn<JobRequestResponse>
{
    [DataMember]
    public string JobRequestEnum { get; set; }
    [DataMember]
    public string JobData { get; set; }
}

[DataContract]
public class JobRequestResponse : IHasResponseStatus
{
    [DataMember]
    public string Message { get; set; }

    [DataMember]
    public ResponseStatus ResponseStatus { get; set; }
} 
```

在 JobService.cs 中

```
 public class JobService : ServiceStack.ServiceInterface.Service
{
    public JobRepository Repository { get; set; }

    public object Any(JobRequest request)
    {
        return new JobRequestResponse() { Message = "ok" };
    }
} 
```

在 Javascript.js 中 // 它可以工作

```
$.ajax({
type: 'POST',
url: "/api/job",
data: '{ "jobRequestEnum": "test", "jobData": "test" }',
dataType: "json",
contentType: "application/json",
success: function (res) {
    debugger;
} 
```

});

在 CallJob.js 中 // 它不起作用

```
string serviceUrl = ConfigurationManager.AppSettings["serviceUrl"];

        using (JsonServiceClient client = new JsonServiceClient(serviceUrl))
        {
            var request = new JobRequest() { JobData = "test", JobRequestEnum = "test" };
            var response = client.Send<JobRequestResponse>(request);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:09:16.693

如果您`[Route]`在请求 DTO 上添加，例如：

```
[Route("/job")]
[DataContract]
public class JobRequest : IReturn<JobRequestResponse>
{
    [DataMember]
    public string JobRequestEnum { get; set; }
    [DataMember]
    public string JobData { get; set; }
} 
```

### 新的 IReturn C# 客户端 API

然后 C# 客户端将能够在`/job`客户端上使用自定义路由，例如：

```
var client = new JsonServiceClient(serviceUrl);
var request = new JobRequest { JobData = "test", JobRequestEnum = "test" };
JobRequestResponse response = client.Post(request); 
```

每当您没有在请求 DTO 上定义路由或指定响应类型时，例如：

```
var response = client.Send<JobRequestResponse>(request); 
```

您没有使用`IReturn<T>`C# 客户端 API，因此它会将**POST**发送到[预定义的路由](http://www.servicestack.net/ServiceStack.Hello/#predefinedroutes)，这将是：

```
POST /json/syncreply/JobsRequest
{ ... } 
```

不像`/jobs`您假设的那样（即 C# 客户端无法知道路由信息，因此它回退到使用预定义的路由）。

### 手动指定使用 /customroute

否则，如果您想将 Route 定义保留在 AppHost 中，您可以通过在 C# 调用中提供它来强制它使用预定义的 url，例如：

```
client.Post<JobRequestResponse>("/job", request); 
```

### 不需要“响应”后缀

同样在新的 API 中（以及当您使用`IReturn<T>`标记时），您不再需要 Request DTO + 'Response' 命名约定，并且可以自由选择所需的任何名称，因此不必`JobRequestResponse`听起来有点尴尬： )

# gwt - GWT 网格视图动画

> ID：12809538
> 
> 赞同：0
> 
> 时间：2012-10-09T22:51:12.603
> 
> 标签：gwt

嗨，我正在尝试制作一个在动画中滚动的图像网格，类似于[http://gwt.google.com/samples/Showcase/Showcase.html#!CwTabLayoutPanel](http://gwt.google.com/samples/Showcase/Showcase.html#!CwTabLayoutPanel)减去标签。我尝试浏览 google api 并搜索示例，但找不到任何东西。有人可以指出我如何实现这样的事情的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:39:53.677

你有两个选择。

A. GWT 动画内置在它的一些面板中：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Recipes](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Recipes)

向下滚动到布局动画。

B. 使用 CSS3 动画：

[http://www.w3schools.com/css3/css3_animations.asp](http://www.w3schools.com/css3/css3_animations.asp)

# facebook - Facebook 网站网址与画布网址不同

> ID：12809539
> 
> 赞同：1
> 
> 时间：2012-10-09T22:51:15.073
> 
> 标签：facebook, node.js, facebook-graph-api, heroku, facebook-apps

我在一个托管帐户上有一个正在运行的 Facebook 应用程序（画布应用程序）。我尝试使用 Heroku Node.js 创建一个带有 facebook 登录的外部网站，并使用这个新主机（创建的原始应用程序具有不同的密钥和 app_id。

如果我更改环境变量（secret 和 app_id）以使用我现有的（旧）应用程序，当我尝试运行 FB 调用时，我会收到“不支持的获取请求，错误代码 100”，并且该应用程序将不允许任何调用。

如果我回到 heroku 默认给出的原始 app_id 和秘密 - 它运作良好。

知道有什么问题吗？站点 url 必须与画布 url 相同吗？

# objective-c - Objective-C乘法总是等于零？

> ID：12809540
> 
> 赞同：0
> 
> 时间：2012-10-09T22:51:21.127
> 
> 标签：objective-c, multiplication

我有一个名为-bombObject 的对象，它有一个名为“blastRadius”的浮点属性。

当'NSLog(@"%.2f",bombObject.blastRadius);' 执行我得到我在第一步中所做的任何事情，例如 100 等。但是如果执行：'NSLog(@"%.2f",bombObject.blastRadius*(3/7));' 我没有得到 3/7 的blastRadius，我得到 0.00。但是，如果我执行 'NSLog(@"%.2f",(bombObject.blastRadius*3)/7);' 我得到了想要的答案。

为什么是这样？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:54:54.373

int/int 不会提升为浮点数，因此您最终只会返回一个整数。3/7 小于 1，因此您最终会截断为 0。然后将 bombObject.blastRadius 乘以 0，得到您所看到的 0.00 答案。

为什么 (bombObject.blastRadius*3)/7 可以工作？因为 bombObject.blastRadius*3 是一个浮点结果；一个 float / int 将成为一个 float 这就是它在这种情况下工作的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:56:45.567

(3/7) 被计算为整数表达式，结果为零，因此 blastRadius*(3/7) 结果为零。

blastRadius*3 被评估为浮点数 (float * int = float) ，因此结果被评估为浮点值。

# iphone - iOS Core Data：对 Core Data 和数据库感到困惑

> ID：12809541
> 
> 赞同：2
> 
> 时间：2012-10-09T22:51:20.987
> 
> 标签：iphone, ios, database, core-data

我真的很困惑核心数据到底是什么。或者我想我的问题是，在处理数据库时，你会使用 Core Data 吗？就像我想从数据库中访问值一样，我会使用 Core Data 来访问这些值吗？我将如何解决这个问题？

十分感谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T23:02:53.490

Core Data 是一个完成“对象持久性”工作的框架。换句话说，您可以使用的代码负责将对象集合保存到磁盘并稍后再次加载它们。它做了很多工作来允许您存储大量数据并一次只加载您需要的对象，并在内存紧张时卸载那些。

Core Data 可以使用数据库来完成此任务，但那是它的业务，而不是您的业务。当你使用 Core Data 时，它是一个黑盒子。你告诉它保存数据，然后让开。

如果您想与现有数据库交互，例如 Web 服务器上的 MySQL 数据库，那是完全不同的事情。您可能会使用 Core Data 在您的设备上存储对象的本地副本，但在这种情况下，Core Data 不会关心对象是来自其他数据库的副本。它不在乎。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T22:59:36.783

它是在 iOS 应用程序中存储数据的一种方便的本地方式。不要将其视为 sqlite，尽管您可以使用各种 sqlite 工具查看它创建的文件。而是将其视为一种工具，用于处理对您的应用程序很重要的信息对象图。

我主要以两种方式使用它。首先存储一堆对应用程序很重要的静态数据，在一种情况下是用于室内地图应用程序的大量位置数据。作为航点的大量 CSV 文件到达的内容被转换为核心数据。Core Data 对此非常有用，因为它允许准备一个包含所有信息的应用程序附带的 sqlite 文件。来自 Web 服务的更新随着添加到核心数据中以保持信息最新的更多 CSV 到达。在运行时，位置信息对象（用户所在的航点）通过谓词（即他们点击的点）检索，并且该对象通过其核心数据关系指示从该点可以去哪里。Core Data 提供了通过室内地图执行 A* 路由所需的信息。

其次，当您有一堆以 JSON 形式到达的对象并且您希望以后能够存储和访问这些对象时，这很棒。假设您有一个典型的应用程序，其中有一个用户和一些关于用户的信息，我们称之为事物。用户拥有事物。当您想了解有关用户的某些信息时，您可以使用谓词（通常是“名称”或类似名称）检索 Core Data 记录，然后您将获得您存储的有关用户的所有信息。同样，您可以利用关系来探索用户的联系并使信息显示变得容易。也许用户有很多东西，然后你可以说“user.things”，你会得到一个代表这些东西的 NSManagedObjects 的 NSSet。

您可以像使用数据库一样使用它。它的实用性在于它可以轻松地从您的 iOS 代码中的任何位置访问，也易于存储和检索信息。故障允许您检索一个对象并通过遵循关系导航到通过关系连接的任何对象。因为您在数据模型编辑器中自己定义属性和关系，所以很容易针对您需要存储的内容进行定制。对我来说，它是 iOS 中最常用和最有用的部分之一。

当您想自动显示来自 Core Data 的信息时，您可以使用 NSFetchedResultsController 来启动提取并通过委托方法响应对基础数据的更改。如果您设置 UITableView 以使用 NSFetchedResultsController 作为数据源，您可以让表格在单元格中显示的对象发生更改时自动更新。对于您定期更新信息并希望显示的内容保持最新的应用程序非常有用。

当您的对象模型发生更改时，可以维护所有现有信息并将其迁移到新模型。Core Data 会在可能的情况下管理自动（轻量级迁移），或者如果您进行了更彻底的更改，您可以提供规则来处理迁移。

Core Data 的局限性在于它不适合存储二进制文件。如果您有需要存储的图像，存储图像位置的路径比尝试存储实际数据要好得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T22:58:14.493

是的，如果你想在你的设备上建立一个本地数据库，Core Data 是合适的技术。[从核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)开始你的研究可能很有意义。

您也可以使用[SQLite](http://www.sqlite.org)（Core Data 在后端使用它），但 Core Data 提供了一些物质优势，并且是 iOS 的首选数据库接口。但是，如果您出于任何原因决定使用 SQLite，我建议您考虑使用[FMDB Objective-C SQLite 包装器](https://github.com/ccgus/fmdb)。

但是Core Data通常是要走的路。

# excel - 如何在 Excel 中为固定行数重复宏代码？

> ID：12809542
> 
> 赞同：0
> 
> 时间：2012-10-09T22:51:26.510
> 
> 标签：excel, excel-2010, vba

我对宏和 VB 完全陌生，因此将不胜感激。我有这种形式的excel数据：

```
Clip    PSNR-codec1     PSNR-codec2     Bit Rates 
Video1  29.426086       29.220891       94357
Video1  31.207342       31.703124       322832
Video1  34.474587       34.255598       633468
Video1  36.445279       35.479189       936961
Video1  39.093937       36.4768         1539093
Video2  41.156012       37.295318       326742
Video2  43.355358       37.684239       604494
Video2  29.95337        29.30644        1218206
Video2  32.040252       30.837518       1809751
Video2  34.194409       32.774954       2387549
Video3  35.495356       33.806537       1567065
Video3  36.395173       34.544676       2173151
Video3  37.077718       35.234943       3094348
Video3  35.681498       36.036972       3240981
Video3  171.661771      83.104314       3355959
Video4  171.247791      96.978608       5103370
Video4  185.239286      128.064048      6636778
Video4  189.115735      115.418461      8150015
Video4  185.35225       154.3189011     2345629 
```

**我的要求是在单独的表格中为每个视频**创建一个“XYScatterSmooth”类型的图表。该图应在 X 轴上显示比特率，在 Y 轴上显示 PSNR。展望未来，我们还将拥有更多视频的数据。那么我该如何编写一个宏，它将为每个视频重复这些步骤（即循环应该每 5 行重复一次。5 行数据是固定数量）

Excel 版本：2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:04:10.147

这对您提供的示例数据有用。

将所有数据放在第一张表上，删除任何其他表。您的数据需要从第 2 行开始（如上）。宏会询问您视频的总数（我发现这比循环直到一个空单元格更容易），然后在新工作表上创建图表。它将工作表命名为 Video1、Video2 等。

让我知道它是否适合你。

```
Private Sub BitRateCharts()

' Data should be on Sheet 1\. Delete all other sheets.

    Dim nVideoNum As Integer
    nVideoNum = 1

    Dim n As Integer
    n = 1

    Dim nStart As Integer
    nStart = 2

    Dim nLast As Integer
    nLast = 6

    Dim nVideos As Integer
    nVideos = InputBox("How many videos?")

    Dim nSheetNum
    nSheetNum = ActiveSheet.Index

    Do Until n > nVideos

    nSheetNum = ActiveSheet.Index
        If nSheetNum = ThisWorkbook.Sheets.Count Then
            Worksheets.Add(After:=Worksheets(Worksheets.Count)).Name = "Video" & nVideoNum
        Else
        End If

            ActiveSheet.Shapes.AddChart.Select
            ActiveChart.ChartType = xlXYScatterSmoothNoMarkers
            ActiveChart.SetSourceData Source:=Range("Sheet1!$B$" & nStart & ":$D$" & nLast & "")
            ActiveChart.SeriesCollection(1).XValues = "=Sheet1!$D$" & nStart & ":$D$" & nLast & ""
            ActiveChart.SeriesCollection(1).Values = "=Sheet1!$B$" & nStart & ":$B$" & nLast & ""
            ActiveChart.SeriesCollection(2).XValues = "=Sheet1!$D$" & nStart & ":$D$" & nLast & ""
            ActiveChart.SeriesCollection(2).Values = "=Sheet1!$C$" & nStart & ":$C$" & nLast & ""
            ActiveChart.SeriesCollection(1).Name = "=""PSNR-Codec1"""
            ActiveChart.SeriesCollection(2).Name = "=""PSNR-codec2"""

            n = n + 1

            nVideoNum = nVideoNum + 1

            nStart = nStart + 5
            nLast = nLast + 5
    Loop

    MsgBox ("Macro Complete.")

Exit Sub

ErrMsg:

    MsgBox ("Error encountered. Macro could not complete.")

End Sub 
```

# php - 使用 ExtJS 的 PHP 拖放文件上传

> ID：12809545
> 
> 赞同：0
> 
> 时间：2012-10-09T22:51:36.970
> 
> 标签：php, zend-framework, extjs

我有一个正在使用的小部件，它对我在 Zend 控制器中创建的方法发出请求。用户将图像上传到服务器，并且 jpeg 在请求正文中被 POST 到服务器。

你如何在 PHP 端访问它？我查看了 $_POST、$HTTP_RAW_POST_DATA（设置 php.ini 设置后）、$_FILES，并尝试了：

```
$data = file_get_contents( 'php://input' ); 
```

所有这些全局变量和变量都是空的。我正在使用 charles 代理，您可以在其中看到请求和图像二进制数据。我会尽快链接屏幕截图（imgur 已关闭）。

![在此处输入图像描述](../Images/0c660cfa34ef8ccacb370a9f9a9914e8.png)

编辑：截图

编辑：我在某个地方：

```
public function filesAction() {

        $request = $this->getRequest();
        $params  = $request->getParams();

        if ( $request->isPost() ) {

                    $httpContent = fopen( 'php://input', 'r' );
                    echo stream_get_contents( $httpContent );

        }
} 
```

现在在响应中将二进制数据返回给我，我只需要使用 fwrite() 或类似的东西在服务器上创建图像，然后我可以继续在需要的地方进行 FTP 处理。

# ios - 自动大写单词在 UITextField 中不起作用

> ID：12809547
> 
> 赞同：3
> 
> 时间：2012-10-09T22:51:43.373
> 
> 标签：ios, objective-c

我有以下代码使第一个字母变为粗体：

```
 self.firstNameTexField_.autocapitalizationType = UITextAutocapitalizationTypeWords;
    self.lastNameTextField_.autocapitalizationType = UITextAutocapitalizationTypeWords;
    self.emailTextField_.autocapitalizationType = UITextAutocapitalizationTypeWords; 
```

但是，这不会使单词的首字母大写。知道为什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-04-01T20:33:33.047

这里没有提到的是某些键盘类型不支持自动大写功能，最值得注意的是：

> `NamePhonePad`指定用于输入人名或电话号码的小键盘。此键盘类型不支持自动大写。

为什么为一个人的名字设计的键盘不支持自动大写是我无法理解的。

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextInputTraits_Protocol/index.html#//apple_ref/swift/enum/c:@E@UIKeyboardType](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextInputTraits_Protocol/index.html#//apple_ref/swift/enum/c:@E@UIKeyboardType)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-09T22:58:31.560

您是否在计算机键盘上打字时在模拟器中进行测试？当您这样做时，自动大写不适用。如果您在应用程序中点击键盘，您应该会看到所需的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-03T01:48:54.843

对我来说，问题是我`textField.becomeFirstResponder()`在设置`autocapitalizationType`. 一旦我切换了**设置后**的`textField.becomeFirstResponder()`顺序，它就会按预期工作。**`autocapitalizationType`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:09:01.757

```
self.firstNameTexField_.autocapitalizationType = UITextAutocapitalizationTypeWords; 
```

改变

```
self.firstNameTexField_.autocapitalizationType = UITextAutocapitalizationTypeAllCharacters; 
```**

# maven - 删除在maven中默认创建的jar

> ID：12809559
> 
> 赞同：9
> 
> 时间：2012-10-09T22:53:02.740
> 
> 标签：maven, jar, maven-assembly-plugin

我正在使用 Maven 程序集插件。在我的 pom.xml 中，打包类型：jar 我不使用 maven jar 插件。

每当我运行 mvn clean package 时，它​​会创建 2 个 jar 文件：一个来自 maven 程序集，另一个是默认创建的（由于包装类型 =jar）。我只想保留由程序集插件创建的 jar 文件。怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T07:38:15.117

你可能有你的理由，但我怀疑跳过正在构建和部署的默认 jar 是一个很好的解决方案。

无论如何，这里是如何禁用正在构建的默认 jar。

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <id>make-assembly</id>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <!-- some configuration of yours... -->
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.1</version>
            <executions>
                <execution>
                    <id>default-jar</id>
                    <!-- put the default-jar in the none phase to skip it from being created -->
                    <phase>none</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

# c# - 如何从PNG图像中删除空白并重新保存它们

> ID：12809560
> 
> 赞同：2
> 
> 时间：2012-10-09T22:53:02.127
> 
> 标签：c#, c#-4.0, image-processing, photoshop

好吧，我不知道这是否可以通过任何软件以编程方式实现，但让我们学习一下。

现在让我用例子来演示一下

我正在使用paint.net 魔杖公差 0%

空的空间

![在此处输入图像描述](../Images/7435d5c92c357b226d4954640eb1a3e7.png)

和这里的空白空间删除版本

![在此处输入图像描述](../Images/e3b43151207be6aec5241d4598ca35bb.png)

这是否可以通过任何软件（如 c# 或 photoshop 等）来完成

我需要做批处理

泰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:02:54.403

我真的不知道这是否回答了你的问题，但我希望它能回答

这是从[Darren](https://stackoverflow.com/questions/248141/remove-surrounding-whitespace-from-an-image/10392379#10392379)的图像中删除周围**空白区域的代码**

```
public static Bitmap Crop(Bitmap bmp)
    {
        int w = bmp.Width;
        int h = bmp.Height;

        Func<int, bool> allWhiteRow = row =>
        {
            for (int i = 0; i < w; ++i)
                if (bmp.GetPixel(i, row).R != 255)
                    return false;
            return true;
        };

        Func<int, bool> allWhiteColumn = col =>
        {
            for (int i = 0; i < h; ++i)
                if (bmp.GetPixel(col, i).R != 255)
                    return false;
            return true;
        };

        int topmost = 0;
        for (int row = 0; row < h; ++row)
        {
            if (allWhiteRow(row))
                topmost = row;
            else break;
        }

        int bottommost = 0;
        for (int row = h - 1; row >= 0; --row)
        {
            if (allWhiteRow(row))
                bottommost = row;
            else break;
        }

        int leftmost = 0, rightmost = 0;
        for (int col = 0; col < w; ++col)
        {
            if (allWhiteColumn(col))
                leftmost = col;
            else
                break;
        }

        for (int col = w - 1; col >= 0; --col)
        {
            if (allWhiteColumn(col))
                rightmost = col;
            else
                break;
        }

        if (rightmost == 0) rightmost = w; // As reached left
        if (bottommost == 0) bottommost = h; // As reached top.

        int croppedWidth = rightmost - leftmost;
        int croppedHeight = bottommost - topmost;

        if (croppedWidth == 0) // No border on left or right
        {
            leftmost = 0;
            croppedWidth = w;
        }

        if (croppedHeight == 0) // No border on top or bottom
        {
            topmost = 0;
            croppedHeight = h;
        }

        try
        {
            var target = new Bitmap(croppedWidth, croppedHeight);
            using (Graphics g = Graphics.FromImage(target))
            {
                g.DrawImage(bmp,
                  new RectangleF(0, 0, croppedWidth, croppedHeight),
                  new RectangleF(leftmost, topmost, croppedWidth, croppedHeight),
                  GraphicsUnit.Pixel);
            }
            return target;
        }
        catch (Exception ex)
        {
            throw new Exception(
              string.Format("Values are topmost={0} btm={1} left={2} right={3} croppedWidth={4} croppedHeight={5}", topmost, bottommost, leftmost, rightmost, croppedWidth, croppedHeight),
              ex);
        }
    } 
```

谢谢，

我希望这有帮助 ：）

# php - Codeigniter SSL / HTTPS 我的选择是什么，多个子域在起作用。

> ID：12809561
> 
> 赞同：0
> 
> 时间：2012-10-09T22:53:04.490
> 
> 标签：php, codeigniter, ssl, https

最近在我们的服务器/域上安装了 SSL 证书，我现在意识到 CI 不喜欢`https://`看起来像任何有效的东西`http://`都会得到 404，`https://`但我有一些不需要全部的视图/控制器`https://`。例如，当用户未登录到我正在构建的服务时的页面是可见的。我想出的唯一一件事是在 config.php 中配置 base_url，这对我来说也不是那么好，因为我们有多个环境，服务在到达公共可视区域之前运行。

我的意思是我们有我们的开发区域，我们的每个开发人员都有一个单独的子域，其中包含当前的开发堆栈，致力于他们正在从事的工作。然后我们有一个暂存区和 QA 区，以及一个测试区，所有这些都将在投入生产之前进行。

所以我正在寻找关于如何处理所有这些的想法，并且缺少 base_url 配置，我不知道从哪里开始使它成为一个易于管理的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T19:26:35.910

我为我的 CodeIgniter 站点使用了 DEV、QA 和生产环境，它们都可以正常使用 HTTPS。HTTPS 无需特殊设置即可使用它。也许您可以提供您遇到问题的 URL？

下面是我如何管理多个子域。

在“/application/config/config.php”中，将 base_url 设置为自动检测，将其留空：

```
$config['base_url'] = ''; 
```

我假设您的网址是：

*   [http://dev.yourdomain.com](http://dev.yourdomain.com)
*   [http://qa.yourdomain.com](http://qa.yourdomain.com)
*   [http://youdomain.com](http://youdomain.com)

要管理不同的环境，请打开根目录下的 index.php 并添加：

```
// This sets the environment based on the subdomain
$domain = explode('.', $_SERVER['HTTP_HOST']);
switch($domain[0])
{
    case 'dev':
        $env = 'dev';
            break;
        case 'qa':
        $env = 'qa';
            break;
    default:
        $env = 'production';
        break;                  
}

define('ENVIRONMENT', $env);

// Error reporting
if (defined('ENVIRONMENT'))
{
    switch (ENVIRONMENT)
    {
        case 'dev':
            error_reporting(E_ALL);
            ini_set("display_errors", 1);
            break;          
        case 'qa':
            case 'production':
            error_reporting(0);
            break;
        case 'production':
            error_reporting(0);
            break;
        default:
            exit('The application environment is not set correctly.');
    }
} 
```

如果您有数据库，请将'/application/config/database.php' 设置为：

```
// Use the respective DB based on the domain name
switch(ENVIRONMENT){
    case 'dev':
        $active_group = 'dev';
        break;
    case 'qa':
        $active_group = 'qa';
        break;
    default:
        $active_group = 'production';
    break;                  
}

// setup domain specific DB's
$db['dev']['hostname'] = 'mysql.stabletransit.com';
// etc..

$db['qa']['hostname'] = 'mysql.stabletransit.com';
// etc..

$db['production']['hostname'] = 'mysql.stabletransit.com';
// etc.. 
```

# php - PHP用透明像素替换颜色像素

> ID：12809564
> 
> 赞同：1
> 
> 时间：2012-10-09T22:53:25.760
> 
> 标签：php, image-processing, gd, alpha-transparency

我想以一种简单的方式制作一个带有透明背景的纯色徽标，因此我决定采用第一个像素并将所有图像上的颜色设置为透明，我知道这不是所有人的最佳解决方案，但我认为涵盖在大多数情况下。

问题是它着色黑色的像素是透明的，这是我的代码：

```
$im = $this->loadImage($targetFile);
$this->replaceImageColor($im, imagecolorat($im, 0, 0), imageColorAllocateAlpha($im, 255, 255, 255, 127));
imagepng($im, 'test.png'); 
```

我的班级职能：

```
function loadImage($imagePath) {
    $resource = false;
    if( strstr($imagePath, '.jpg') || strstr($imagePath, '.jpeg') )
        $resource = @imagecreatefromjpg($imagePath);
    if( strstr($imagePath, '.png') )
        $resource = @imagecreatefrompng($imagePath);

    return $resource;
}

function replaceImageColor($img, $from, $to) {
    // pixel by pixel grid.
    for ($y = 0; $y < imagesy($img); $y++) {
        for ($x = 0; $x < imagesx($img); $x++) {
            // find hex at x,y
            $at = imagecolorat($img, $x, $y);
            // set $from to $to if hex matches.
            if ($at == $from) 
                imagesetpixel($img, $x, $y, $to);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:08:44.300

最后我以这种方式解决了它

```
$im = $this->loadImage($targetFileIcon);
$out = $this->transparentColorImage($im, imagecolorat($im, 0, 0));
imagepng($out, 'test.png');
imagedestroy($im);
imagedestroy($out);

function loadImage($imagePath) {
    $resource = false;
    if( strstr($imagePath, '.jpg') || strstr($imagePath, '.jpeg') )
        $resource = @imagecreatefromjpg($imagePath);
    if( strstr($imagePath, '.png') )
        $resource = @imagecreatefrompng($imagePath);

    return $resource;
}

function transparentColorImage($img, $color) {
    // pixel by pixel grid.
    $out = ImageCreateTrueColor(imagesx($img),imagesy($img));
    imagesavealpha($out, true);
    imagealphablending($out, false);
    $white = imagecolorallocatealpha($out, 255, 255, 255, 127);
    imagefill($out, 0, 0, $white);
    for ($y = 0; $y < imagesy($img); $y++) {
        for ($x = 0; $x < imagesx($img); $x++) {
            // find hex at x,y
            $at = imagecolorat($img, $x, $y);
            // set $from to $to if hex matches.
            if ($at != $color)
                imagesetpixel($out, $x, $y, $at);
        }
    }
    return $out;
} 
```

我创建了一个带有 alpha 通道且没有 alphablend 的真实图像。

BR

# node.js - 使用旧版本的 Node JS

> ID：12809567
> 
> 赞同：0
> 
> 时间：2012-10-09T22:53:46.887
> 
> 标签：node.js

嗨，我有一个 Windows 操作系统，我目前正在运行最新版本的 Node.JS（包括 npm）。我真的很想构建和编译 0.1.91，可以在这里找到[http://nodejs.org/dist/](http://nodejs.org/dist/)。我对此非常陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:25:19.037

Node 首先在 .5 dev 分支中支持原生 Windows 构建。为了实现这一目标，他们不得不从头开始重写许多内部结构——平台兼容层现在以[libuv](https://github.com/joyent/libuv)的形式存在。

在此之前，您必须在 Cygwin 下构建 Node。我记得使用 Cygwin 在 Windows 中构建 .4，这完全是痛苦的。GitHub wiki 已经撤下了所有与 Cygwin 相关的信息，因为它不再相关。（如果你*真的*想看看 Cygwin 的构建是如何完成的，我想你可以克隆 wiki 的[repo](https://github.com/joyent/node/wiki/_access)并四处挖掘。这些信息不再在线提供。）

直到[0.1.98](https://github.com/joyent/node/blob/v0.8.11-release/ChangeLog#L2522)才添加了对使用 Cygwin 在 Windows 上构建的支持，并且在 0.6 中放弃了支持。因此，您尝试构建的特定版本将不起作用。

* * *

无论如何，运行非常旧的软件是一个非常糟糕的主意，尤其是像 Node 0.1 这样的软件，它还处于开发的早期阶段。它几乎可以保证充满安全漏洞。

# php - 服务器时间/日期动态偏移

> ID：12809568
> 
> 赞同：2
> 
> 时间：2012-10-09T22:53:51.473
> 
> 标签：php, date, timezone, local

我试图弄清楚如何调整下面的代码以抵消任何用户的时区。

```
function now($format = 'Y-m-d H:i:s'){
    return @date($format,mktime());
} 
```

我在下面使用它来调整我的当地时间

```
function now($format = 'Y-m-d H:i:s'){
    return @date($format,mktime() -3600);
} 
```

但我需要根据用户动态调整它。

编辑：我让用户通过表单中的下拉列表定义他们的时区，将其保存到数据库中，例如“America/Los_Angeles”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:00:17.727

使用 PHP 提供的 DateTime 对象可能是一个非常好的主意。它也承诺处理时区：

```
// Current date/time in the specified time zone.
$date = new DateTime(null, new DateTimeZone('Pacific/Nauru'));
echo $date->format('Y-m-d H:i:sP') . "\n"; 
```

（来自文档页面[http://de3.php.net/manual/en/datetime.construct.php](http://de3.php.net/manual/en/datetime.construct.php)的代码）

要获取有关所选时区的任何信息，DateTimeZone 通过以下方法提供对时区数据库信息的访问`getTransitions()`（您将获得一个包含每个已知时间的偏移量的数组，请参阅[http://de3.php.net上的示例/manual/en/datetimezone.gettransitions.php](http://de3.php.net/manual/en/datetimezone.gettransitions.php)）和`getOffset()`（需要偏移量的时间，请参阅[http://de3.php.net/manual/en/datetimezone.getoffset.php](http://de3.php.net/manual/en/datetimezone.getoffset.php)）。

所以基本上没有“以秒为单位的偏移量”之类的东西，因为这个值的变化取决于 a）你要求的时间，因为像夏令时这样的东西会随着时间的推移而影响它，以及 b）你要求的时间它，因为对时区的任何更改都受当地法律的影响，而不是不可更改的自然法。

您正在以正确的方式存储可以在必要时转换为本地时间的通用时间，但我建议不要尝试自己做，而是利用 PHP 提供的功能。它会花费您更少的时间来编写代码。

# apache - 如何将 .htaccess 代码转换为 web.config？

> ID：12809571
> 
> 赞同：0
> 
> 时间：2012-10-09T22:54:00.490
> 
> 标签：apache, iis

```
RewriteEngine On
RewriteCond %{HTTPS} (on)?
RewriteCond %{HTTP:Host} ^(?:www.)(.+)$ [NC]
RewriteCond %{REQUEST_URI} (.+)
RewriteRule .? http(?%1s)://%2%3 [R=301,L]
RewriteCond %{HTTP_Host} ([^.]+).itsprofile.com$ [NC]
RewriteRule (.*) http://itsprofile.com/viewindex.php$1?id =%1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T04:17:03.303

当您说转换为 web.config 时，我假设您的意思是将 .htaccess 重写规则转换为 IIS URL 重写规则。[您可以在此处](http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules)找到有关将 .htaccess 规则导入 IIS URL 重写的信息。

您上面的重写规则将被导入并转换为：

```
<rewrite>
  <rules>
    <rule name="Imported Rule 1" stopProcessing="true">
      <match url=".?" ignoreCase="false" />
      <conditions>
        <add input="{HTTPS}" pattern="(on)?" ignoreCase="false" />
        <add input="{HTTP_HOST}" pattern="^(?:www.)(.+)$" />
        <add input="{URL}" pattern="(.+)" ignoreCase="false" />
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="http(?{C:1}s)://{C:2}{C:3}" appendQueryString="false" />
    </rule>
    <rule name="Imported Rule 2">
      <match url="(.*)" ignoreCase="false" />
      <conditions>
        <add input="{HTTP_Host}" pattern="([^.]+).itsprofile.com$" />
      </conditions>
      <action type="Redirect" redirectType="Found" url="http://itsprofile.com/viewindex.php{R:1}?id" appendQueryString="false" />
    </rule>
  </rules> 
```

自然，您会想要测试所有规则。

# string - 查找重复值的最新/最后一行并返回一个字符串

> ID：12809574
> 
> 赞同：0
> 
> 时间：2012-10-09T22:54:08.287
> 
> 标签：string, indexing, max, offset, vlookup

（在 MS Excel 2010 中）

这是我的数据表的示例：

表 1

订单号 用户 ID 输入日期 备注
1 BGR 12/1/2010 致电客户
2 WRE 12/2/2010 收到文件
4 BGR 12/3/2010 订单发货
7 SWL 12/4/2010 订单退回
1 WRE 12/5/2010 要求退款
1 SWL 2010 年 12 月 6 日致电客户
7 WRE 2010 年 12 月 7 日收到文件
2 SWL 2010 年 12 月 8 日订单发货
4 BGR 2010 年 12 月 9 日要求退款

在另一张纸上，我想要一个订单号的主列表，然后有一个列，其中注释字段自动更新为最新的新信息，因为新条目被放入 Sheet1 的下一个空行

Order# CustomerName LatestNote
1 Cust1（此客户的 Sheet1 的最后一个注释）
2 Cust2（此客户的 Sheet1 的最后一个注释）
3 Cust3（此客户的 Sheet1 的最后一个注释）
4 Cust4（此客户的 Sheet1 的最后一个注释）
5 Cust5 （此客户的 Sheet1 的最后一个注释）
6 Cust6（此客户的 Sheet1 的最后一个注释）
7 Cust7（此客户的 Sheet1 的最后一个注释）
8 Cust8（此客户的 Sheet1 的最后一个注释）
9 Cust9（此客户的 Sheet1 的最后一个注释）该客户）

非常感激你的帮助！我整天都在绞尽脑汁！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:57:34.973

我假设这是excel？按日期反转订单表 1。最新值优先。然后使用 vlookup - 它总是返回最新的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T15:25:33.947

我遇到了类似的情况，并使用帮助列从记录搜索中消除了较早的条目。在您的示例中，它看起来像这样：

在工作表 1 上，在数据前面插入一个新列（A 列变为 B 列）。在单元格 A2 中，插入：

```
=IF(B2="","",IF(COUNTIF($B:$B,B2)=COUNTIF($B$2:B2,B2),B2,"")) 
```

把它复制到你需要的地方。如果您愿意，可以隐藏该列。（选择列，右键单击，“隐藏”）

该公式计算订单号在 B 列中出现的总次数。如果当前行的计数等于总计数，则将订单号复制到 A 列。如果它们不相等或 B 列单元格为空白，则将 A 列单元格留空。

在您的新工作表上，一个简单的索引/匹配公式将返回您想要的信息。在单元格 C2 中，插入：

```
=INDEX('Sheet1'!$A:$E,MATCH($A2,'Sheet1'!$A:$A,0),5) 
```

这将显示您的最新笔记。把公式复制到你需要的地方。

注意：如果您可以将行号添加到数组中（`$A$2:$E$501`而不是`$A:$E`例如），它将加快计算速度。

# php - 使用公交数据计算最高效的公交路线

> ID：12809576
> 
> 赞同：0
> 
> 时间：2012-10-09T22:54:11.847
> 
> 标签：php, mysql, algorithm

我有我所在城市的公交数据，我想用 PHP 构建一个工具，允许用户在地图上选择两个公交车站，然后让应用程序计算城市公交系统上从停靠站 A 到停靠站的有效路线B. 从 A 站到 B 站的路线可能涉及在某些站点换乘公共汽车以到达最终目的地。

我有我所在城市的公交车站位置、公交车站时间、路线和行程信息的数据：

*路线： http:* [//openregina.cloudapp.net/DataBrowser/OpenRegina/TransitRoutes](http://openregina.cloudapp.net/DataBrowser/OpenRegina/TransitRoutes)

*站点：http :* [//openregina.cloudapp.net/DataBrowser/OpenRegina/TransitStops](http://openregina.cloudapp.net/DataBrowser/OpenRegina/TransitStops)

*停止时间： http:* [//openregina.cloudapp.net/DataBrowser/OpenRegina/TransitStopTimes](http://openregina.cloudapp.net/DataBrowser/OpenRegina/TransitStopTimes)

*行程：http :* [//openregina.cloudapp.net/DataBrowser/OpenRegina/TransitTrips](http://openregina.cloudapp.net/DataBrowser/OpenRegina/TransitTrips)

我已将上述数据提取到我自己的 MySQL 数据库中。

**使用这些数据，我如何计算从 A 站到 B 站的有效路线？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:18:47.117

基本上，您需要一个大图，其中每个巴士站由一个顶点表示，每个直接连接由一条边表示。然后，您可以通过深度优先搜索来寻找最便宜、最快或最短的或所有这些的组合。看这里：[如何制作一个简单的公交路线搜索引擎？](https://stackoverflow.com/questions/8189245/how-do-i-make-a-simple-bus-route-search-engine/8189349#8189349).

# asp.net - ASP.NET 的 ProtectedConfigurationProvider 的 Initialize 方法中的网站 BaseDirectory（.NET 框架 4.5）

> ID：12809582
> 
> 赞同：3
> 
> 时间：2012-10-09T22:55:29.923
> 
> 标签：asp.net, configuration, .net-4.5, provider

**目标**：在调用继承自 ProtectedConfigurationProvider 的类的 Initialize 方法期间，使用 .NET Framework 4.5 查找正在运行的 ASP.NET Web 应用程序的 BaseDirectory。

**问题**：.NET Framework 4.5 更改了 ProtectedConfigurationProvider 类在哪个域下运行（也许还有在应用程序的生命周期中调用该类时？）

在安装 .NET Framework 4.5 之前，可以在继承自 ProtectedConfigurationProvider 的类的 Initialize 或 Decrypt 方法期间使用“AppDomain.CurrentDomain.BaseDirectory”进行检索。这将解决类似于“c:\inetpub\wwwroot\xyz\”的问题

安装 .NET Framework 4.5 后，在 Initialize 或 Decrypt 方法期间，“AppDomain.CurrentDomain.BaseDirectory”解析为类似于“C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\”的内容。

**用例**：使用自定义“ProtectedConfigurationProvider”类将配置数据调用从 web.config/app.config 重定向到应用程序目录中的自定义配置文件。（例如[http://www.wrox.com/WileyCDA/Section/Redirecting-Configuration-with-a-Custom-Provider.id-291932.html](http://www.wrox.com/WileyCDA/Section/Redirecting-Configuration-with-a-Custom-Provider.id-291932.html) 或 [https://github.com/kellyhughes/ConfigPTFE](https://github.com/kellyhughes/ConfigPTFE)）。这在具有“configProtectionProvider”属性的配置节点中使用。该库被各种应用程序类型（例如 winforms、wpf、windows 服务、Web 应用程序）使用。上面提到的问题仅发生在 Web 应用程序的上下文中。

**注意**：在调用此方法时，我知道要依靠从中收集信息的大多数对象都是空的。例如，HttpContext 和 Server.MapPath 无济于事，因为此时它们似乎不存在。是的，我也知道还有其他方法可以将配置文件与主配置分开。这个自定义库提供了使用“file”或“configSource”属性等无法提供的附加功能。

# java - 为什么不能在 java 中的方法之外声明和初始化数组？

> ID：12809583
> 
> 赞同：0
> 
> 时间：2012-10-09T22:56:05.873
> 
> 标签：java, arrays

当我在方法之外的 java 中的不同行上声明和构造一个数组时，我感到很困惑，因此它将是一个实例变量，我得到一个编译错误，但是当我在一行上构造和初始化时很好，为什么这会发生吗？

```
public class HelloWorld {

//This works fine
int anArray [] = new int[5];

//this doesn't compile "syntax error on token ";", , expected"
int[] jumper;
jumper = new int[5];

public static void main(String[] args) {
}

void doStuff() {

    //this works fine
    int[] jumper;
    jumper = new int[5];
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T22:58:07.330

```
jumper = new int[5]; 
```

是一个语句，必须出现在方法、构造函数或初始化块中。

我想你知道，你可以这样做：

```
int[] jumper = new int[5]; 
```

因为您*可以*在变量声明中进行赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:30:56.663

一个小的语法更改将修复编译器错误：

```
int[] jumper;
{
   jumper = new int[5];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:42:08.823

您根本无法在方法之外运行命令。除了在变量声明时赋值（除了像初始化块这样的情况）。

您可以在声明期间初始化变量：

`private int[] numbers = new int[5];`

您可以在构造函数中初始化

```
class MyClass {
   private int[] numbers;

   public MyClass() {
      numbers = new int[5];
   }

} 
```

或者在初始化块中初始化

```
private int numbers[5];

{
      numbers = new int[5];
} 
```

# java - javac 将文件从文件夹 A 编译到文件夹 B ( linux )

> ID：12809585
> 
> 赞同：1
> 
> 时间：2012-10-09T22:56:25.560
> 
> 标签：java, compilation, javac

我有一个小的java项目。我想保持文件在我的项目文件夹中的组织结构。

有 3 个文件夹`bin/`：`res/`和`src/`。在 src 中都是源文件。在 res 中是一些资源，例如要打印的文本文件是在运行时保存的文件。在 bin 中是所有二进制文件所在的位置。

我发现，我可以使用 bin 文件夹的 -d 参数编译我的源文件。

`javac -d bin src/*.java`

但是我无法`java bin/Main`从我的项目文件夹中运行它给了我一个 classnotfound 错误。（进去`bin`然后运行`java Main`工作。为什么？？）

第二个问题是， res 文件只有`res/`在`bin/`. 我想要它有点像在 Eclipse 中。在源代码文件中`res/`的使用就像执行程序在项目文件夹中一样。

我希望你明白我想要做什么。感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:01:52.960

Java 要求`.class`文件可以从类路径根目录中找到。所以如果你的类路径是`.`，那么类`com.mycompany.MyClass`应该是在`./com/mycompany/MyClass.class`。因此，要从基本目录运行文件，请通过将`-cp bin`命令行参数设置为`java`.

你是如何尝试获取这些`res`文件的？如果您使用`-cp`上面的技巧，您应该可以使用`new FileReader("res/file1.txt")`. 如果你在`bin`文件夹中运行，你需要`new FileReader("../res/file1.txt")`

# r - 数据框中的特定聚合

> ID：12809590
> 
> 赞同：1
> 
> 时间：2012-10-09T22:56:35.493
> 
> 标签：r, aggregate

我有一个数据框，其中包含课程 ID、学生 ID、周数（第一周为 1，第二周为 2，...），以及每个用户每周在每门课程中所做的一些信息。如果讲师在那周在该课程中“干预”学生，则 df 的最后两列是非 NA，否则为 NA。我想比较每个学生在第一次干预之前和之后的行为。

所以我想做的是一个专栏，“HasIntervened”，它比学生的第一次干预少几周为假，大于或等于几周为真，但我有一个地狱般的时间来创建它简单的列。我相当肯定这将`aggregate`是要走的路，但我只是没有以正确的方式思考这个问题。

这是`dput`数据框的前 60 行（5 个学生的价值）：

```
structure(list(UserID = c(4188948L, 4188948L, 4188948L, 4188948L, 
4188948L, 4188948L, 4735684L, 4735684L, 4735684L, 4735684L, 4735684L, 
4735684L, 6292486L, 6292486L, 6292486L, 6292486L, 6292486L, 6292486L, 
6469671L, 6469671L, 6469671L, 6469671L, 6469671L, 6469671L, 6538263L, 
6538263L, 6538263L, 6538263L, 6538263L, 6538263L, 6621258L, 6621258L, 
6621258L, 6621258L, 6621258L, 6621258L, 6891869L, 6891869L, 6891869L, 
6891869L, 6891869L, 6891869L, 6891869L, 6891869L, 6891869L, 6891869L, 
6891869L, 6891869L, 6978155L, 6978155L, 6978155L, 6978155L, 6978155L, 
6978155L, 7195846L, 7195846L, 7195846L, 7195846L, 7195846L, 7195846L
), CourseID = c(6567871L, 6567871L, 6567871L, 6567871L, 6567871L, 
6567871L, 6567168L, 6567168L, 6567168L, 6567168L, 6567168L, 6567168L, 
6567864L, 6567864L, 6567864L, 6567864L, 6567864L, 6567864L, 6567159L, 
6567159L, 6567159L, 6567159L, 6567159L, 6567159L, 6567162L, 6567162L, 
6567162L, 6567162L, 6567162L, 6567162L, 6567853L, 6567853L, 6567853L, 
6567853L, 6567853L, 6567853L, 6567159L, 6567159L, 6567159L, 6567159L, 
6567159L, 6567159L, 6567864L, 6567864L, 6567864L, 6567864L, 6567864L, 
6567864L, 6567873L, 6567873L, 6567873L, 6567873L, 6567873L, 6567873L, 
6567859L, 6567859L, 6567859L, 6567859L, 6567859L, 6567859L), 
WeekInCourse = c(1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 
3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 
4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 
5, 6, 1, 2, 3, 4, 5, 6), WeekPostCount = c(1L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 5L, 3L, 4L, 3L, 3L, 0L, 4L, 
0L, 0L, 0L, 0L, 0L, 3L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 2L, 
2L, 0L, 0L, 4L, 0L, 3L, 0L, 3L, 0L, 0L, 0L), WeekLoginCount = c(2L, 
1L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 0L, 0L, 0L, 4L, 4L, 1L, 0L, 
0L, 0L, 3L, 3L, 1L, 0L, 0L, 0L, 2L, 1L, 0L, 0L, 0L, 0L, 1L, 
1L, 0L, 0L, 0L, 0L, 3L, 0L, 0L, 0L, 0L, 0L, 4L, 1L, 0L, 0L, 
0L, 0L, 3L, 3L, 1L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L), 
WeekPointsPercent = c(0, 0, 0, 0, 0, 0, 0, 0.185714285714286, 
0.375, 0.2, 0, 0, 0, 0.85, 0.7, 0.4, 0.7, 0.7, 0, 0.857142857142857, 
0.35, 0, 0, 0.712765957446808, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.25, 0, 0, 0, 0, 0, 0.5, 0.5, 
0, 0, 0.7, 1, 1, 0.375, 0.723076923076923, 0, 0.738636363636364
), CumulativePointsPercent = c(0, 0, 0, 0, 0, 0, 0, 0.185714285714286, 
0.254545454545455, 0.235294117647059, 0.235294117647059, 
0.10958904109589, 0, 0.85, 0.8, 0.533333333333333, 0.55, 
0.563636363636364, 0, 0.857142857142857, 0.623076923076923, 
0.476470588235294, 0.476470588235294, 0.600558659217877, 
0, 1, 0.0666666666666667, 0.0666666666666667, 0.0461538461538462, 
0.0461538461538462, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0.25, 0.166666666666667, 0.0555555555555556, 0.05, 0.0454545454545455, 
0, 0.5, 0.5, 0.166666666666667, 0.15, 0.2, 1, 1, 0.615384615384615, 
0.669230769230769, 0.621428571428571, 0.666666666666667), 
RiskEstimate = c(0.627717786405816, 0.986868933315635, 0.986687587608184, 
0.993909863003438, 0.997123961252086, 0.995862152216296, 
0.914011371723269, 0.925359536086114, 0.902625588346349, 
0.956922151061089, 0.977244888475535, 0.975006380719003, 
0.215420992232115, 0.174623555825523, 0.241380495376484, 
0.699712463799006, 0.692014530298594, 0.697966901130338, 
0.765071150059092, 0.763071307309743, 0.767261726128078, 
0.835918063362269, 0.854949153314029, 0.805318343915736, 
0.792873572656207, 0.790581615380765, 0.82622599277251, 0.9330287497742, 
0.965763061363497, 0.951226314109191, 0.851355921713566, 
0.991081300877175, 0.989671569185701, 0.995402298000919, 
0.997671718747865, 0.996593366142757, 0.738690043138604, 
0.865412845144037, 0.831369850200541, 0.93845410260835, 0.968400480533385, 
0.9533338828382, 0.624930735381371, 0.981915016747928, 0.985037736895337, 
0.994680902796769, 0.996907588471311, 0.995388109404559, 
0.887995464972052, 0.970620002831325, 0.97136665697772, 0.992618626388727, 
0.99543249839328, 0.992149889176406, 0.923802324633255, 0.984464950934932, 
0.978726967214146, 0.971473084822075, 0.97886220009245, 0.979311013989987
), RiskBin = c(3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 1L, 1L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L), InterventionID = c(NA, 26L, NA, NA, NA, 
NA, NA, NA, NA, NA, 50L, NA, NA, NA, NA, NA, 73L, NA, NA, 
NA, NA, NA, 56L, NA, NA, NA, NA, 46L, NA, NA, NA, 33L, NA, 
NA, NA, NA, 15L, NA, NA, 43L, 53L, NA, NA, NA, NA, NA, 71L, 
NA, NA, NA, NA, NA, 78L, NA, NA, 36L, NA, NA, 80L, NA), InterventionType = structure(c(NA, 
2L, NA, NA, NA, NA, NA, NA, NA, NA, 3L, NA, NA, NA, NA, NA, 
2L, NA, NA, NA, NA, NA, 3L, NA, NA, NA, NA, 3L, NA, NA, NA, 
2L, NA, NA, NA, NA, 3L, NA, NA, 3L, 2L, NA, NA, NA, NA, NA, 
2L, NA, NA, NA, NA, NA, 2L, NA, NA, 3L, NA, NA, 3L, NA), .Label = c("", 
"At-Risk Form", "Email", "Other", "Phone"), class = "factor")), .Names = c("UserID", 
"CourseID", "WeekInCourse", "WeekPostCount", "WeekLoginCount", 
"WeekPointsPercent", "CumulativePointsPercent", "RiskEstimate", 
"RiskBin", "InterventionID", "InterventionType"), row.names = c(NA, 
60L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:24:25.090

```
courses$HasIntervened <- as.logical( with(courses, ave(InterventionID,
                                                 UserID, CourseID,  # grouping factors
                                           FUN=function(x) cumsum( !is.na(x) ) ) ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:20:12.603

试试这个：

```
foo = your.data
foo$WeekInCourse[is.na(foo$InterventionID)]=Inf
bar = setNames(aggregate(WeekInCourse ~ UserID, foo, min),c("UserID","FirstW"))
foo = merge(foo, bar, by="UserID")
your.data$HasIntervened = your.data$WeekInCourse >= foo$FirstW 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:20:28.527

一种`data.table`编码优雅和内存效率的方法

```
library(data.table)
# assuming your data is in DF
DT <- as.data.table(DF)
# set the key to ensure that the data is sorted by week within 
# each user / course combination
setkey(DT, UserID, CourseID,  WeekInCourse)
# using cumsum  
DT[,hasIntervened := cumsum(!is.na(InterventionID))>0 ,by =list(CourseID, UserID)] 
```

语法避免了`data.table`需要`with`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T00:59:00.593

这应该有效：

```
library(plyr)
ddply(df, .(UserID), function(x) {
     i <- which.min((x$InterventionID))
    if(i>1) {
        x$HasIntervened <- c(rep(FALSE,i-1), rep(TRUE, nrow(x)-i+1))
        } else {
        x$HasIntervened <- TRUE     
        }
     x
    }) 
```

# mysql - 内部的 SQL 影响连接结果

> ID：12809597
> 
> 赞同：1
> 
> 时间：2012-10-09T22:56:55.160
> 
> 标签：mysql, sql, database

我有 2 个返回不同结果的 sql 查询。两个查询都使用相同的连接操作，但对 IN 子句内的连接参数的绑定不同。

在第一个上，我直接引用了 join 参数。在第二个我使用免费上下文查询。我得到了不同的结果，我想知道为什么。

```
-- this one returns 13 tuples
select c.companyname
    from companies as c
    join stocklist as s
    using (companyid)
    where s.price in((select MAX(s.price)),( select MIN(s.price)));

--this one returns two tuples. as it should
select companyname
    from companies join stockslist
    using (companyid)
    where price in(
    (select max(price) from stockslist),(select min(price) from stockslist)
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:03:47.497

您可以将其`s`视为表的命名*实例*`stockslist`。这并不完全正确，但以这种方式思考它会有所帮助。

当您在内部查询中使用外部查询中的命名表时，它会使用该特定行中的值对外部表的每一行执行内部查询。

您的顶级查询基本上等同于：

```
-- this one returns 13 tuples
select c.companyname
    from companies as c
    join stocklist as s
    using (companyid)
    where s.price in(s.price,s.price) 
```

# jquery - $.mobile.changePage($("") 总是加载改变的网页

> ID：12809598
> 
> 赞同：0
> 
> 时间：2012-10-09T22:57:11.997
> 
> 标签：jquery, jquery-mobile

我很难让 $.mobile.changePage() 正常工作。例如：我有一个页面调用“报告中断”，并且上面有一个添加按钮。当我点击添加按钮时，应用程序将转到另一个名为“新中断”的页面，然后我将输入一些信息并提交。之后我再次返回“报告中断”，然后单击添加按钮，但每次我得到的都是修改后的页面而不是原始页面。我正在使用 $.mobile.changePage() 将“报告中断”转移到“新中断”。

任何建议都会有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:04:15.487

您可以将`reloadPage`选项设置`true`为`$.mobile.changePage()`方法。这仅在您加载外部页面而不是内部页面（多页面模板）时才有效。

例如：

```
$.mobile.changePage("some-external-page.html", {
    reloadPage : true
}); 
```

文档：http: [//jquerymobile.com/demos/1.2.0/docs/api/methods.html](http://jquerymobile.com/demos/1.2.0/docs/api/methods.html)

# android - AppMarketStore 等 DIY 引擎背后是什么？

> ID：12809600
> 
> 赞同：2
> 
> 时间：2012-10-09T22:57:29.187
> 
> 标签：android, ios, mobile

您好，提前感谢您的任何回复。

我们正在尝试进行定制的 iOS/Android 开发，但是我们刚刚发现了一些 DIY 网站，适用于[appsmakerstore](http://appsmakerstore.com)或[ShoutEm](http://www.shoutem.com)等 APP 。

它们都与一侧的移动设备和拖放小部件共享相同的 UI。我们想知道是什么在为这些 Web 界面提供动力来自己构建它。所有这些网站背后的堆栈是什么？

干杯，查克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:23:15.487

您基本上有三个跨平台开发选项（我假设这是您问题背后的目标）：

1.  使用广泛支持的**HTML(5) 标准**，创建看起来与目标移动平台完全相同的基本块（按钮、菜单...），并通过 JavaScript 添加自定义功能（位置、相机）。该应用程序的外观和行为与每个平台上的本机应用程序完全相同，*但*实际上只是在自定义包装器下运行的网页。

    这就是[**PhoneGap**](http://phonegap.com/)所做的，这也是**ShoutEm所做的，** **Appsmakerstore**可能也是如此（我不确定这个）。

2.  为每个平台构建一个**自定义框架***（您必须使用许多不同的语言，例如 Android 上的 Java、iOS 上的 Objective-C 等等）*，并且可能使用一种通用语言*（JavaScript？Ruby？Python？Lua？）*，或基本版本界面（la WordPress 或 Drupal），让您轻松编辑内容。

3.  **独立开发每个应用程序**。与其他两种解决方案相比，您必须准备好为此投入更多时间（和金钱），但在大多数情况下，用户体验会更加美观和一致。

基本上，#1 对于简单的应用程序来说已经足够了，尽管它可能比完全原生的应用程序[慢一点。](https://stackoverflow.com/questions/6966417/does-phonegap-use-just-uiwebview-or-is-it-doing-something-more-then-that-nitro)在最近的新闻中，Facebook 刚刚跌落了第一名，[又回到了原生状态](http://apple.slashdot.org/story/12/06/28/1719233/facebook-ios-app-ditching-html5-for-objectivec)。

我不知道有人提供#2 并为完全原生的跨平台开发提供了很好的结果，所以在这种情况下你必须自己动手。

无论如何，您可能还想查看[这个问题](https://stackoverflow.com/questions/8865277/mobile-development-native-vs-cross-platform-vs-javascript)以更深入地审查该主题。

# css - 针对特定版本 Firefox 的 CSS

> ID：12809605
> 
> 赞同：2
> 
> 时间：2012-10-09T22:58:02.730
> 
> 标签：css, firefox

Firefox 的快速更新周期开始给我们带来问题，因为每次重大更新似乎都会引入渲染变化。

是否有可靠的方法（javascript 或 css）来针对特定主要版本的 Firefox？

# css - Jquery 事件绑定以选择焦点输入/输出

> ID：12809607
> 
> 赞同：0
> 
> 时间：2012-10-09T22:58:06.970
> 
> 标签：css, focus, jquery

`select`我对元素的 jquery 事件绑定有这个问题。当我单击选择时，`.focus`应该添加该类。但是从下拉列表中选择一个选项会破坏逻辑。

==> [JSFIDDLE](http://jsfiddle.net/FHWYr/)

脚步：

1.  点击选择
2.  选择一个选项
3.  单击选择->`.focus`未添加

代码：

```
<a>
   <select>
      <option>A</option>
      <option>B</option>
      <option>C</option>
   </select>
</a>​

$('select').focusin(function(){
    $(this).parent('a').addClass('focus');
});
$('select').bind('focusout change',function(){
    $(this).parent('a').removeClass('focus');
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:17:09.350

问题的根源是您仅在选择焦点时添加类，然后在选择值更改时将其删除。类永远不会被添加回来的原因是，当您选择其中一个选项时，选择永远不会失去焦点。这样的事情应该让你得到你所追求的行为：

```
$('select').click(function(){
   $(this).parent('a').toggleClass('focus'); 
});

$('select').blur(function() {
   $(this).parent('a').removeClass('focus'); 
}); 
```

**编辑**- 我猜你想在选择一个选项时保留删除类的功能，这就是为什么我会绑定到点击而不是焦点和模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:11:08.023

这是因为选择该选项会从元素中移除焦点，`select`就像您从`select`

所以`focusout`这里发生了一个选择..所以这显然删除了`select`..的父元素上的类

也没有添加类，因为`select`这里已经集中了..

所以改为使用 **.blur()** 和**.focus()** 事件..

[检查演示](http://jsfiddle.net/sushanth009/FHWYr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:11:59.223

我相信你正在寻找这样的东西，但我可能是错的：

```
$('select').on("focus", function(){
    $(this).parent('a').addClass('focus');
});
$('select').on('blur',function(){
    $(this).parent('a').removeClass('focus');
});​ 
```

用于`on`绑定事件并将`focus`and`blur`事件用于您的选择框。如果我正确理解了这个问题，这应该会解决您的问题。

**[例子](http://jsfiddle.net/FHWYr/)**

# emacs - 用前瞻/后向替换-regexp-in-string

> ID：12809610
> 
> 赞同：0
> 
> 时间：2012-10-09T22:58:17.983
> 
> 标签：emacs, elisp

我想替换字符串中所有出现的`\w \w`with `\w\\\w`，其中`\w`部分在替换前后保持不变，例如

```
[.A foobar] [.B baz] 
```

应该导致

```
[.A\\foobar] [.B\\baz] 
```

它也应该与

```
[.A' foobar] [.B -baz] 
```

=>

```
[.A'\\foobar] [.B\\-baz] 
```

来自 jlf @ #emacs

```
(while (string-match "\(.*\w\) \(\w\)" str)
  (setq str (concat (match-string 1 str) "\\" (match-string 2 str)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T06:39:05.123

(替换-正则表达式-字符串" \\_<\\w+\\_>" (lambda (x) (concat "\\\\s" (substring x 1))) mystring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:15:12.313

这可能更通用一点：

```
(defun replace-between-words (input replacement &optional preserve)
  "Replaces white space between two words with REPLACEMENT
if REPLACEMENT is a character, and PRESERVE is not NIL, then
that character is duplicated as many times as there are white spaces
between words. If PRESERVE is NIL, then only one character is
inserted.
If REPLACEMENT is a string and PRESERVE is not NIL, then it is rolled
into the available white space, otherwise the entire replacement string
is insterted."
  (with-output-to-string
    (let ((match "*") (replaced t)
          (white-count 0)
          seen-start seen-end current whites)
      (dotimes (i (length input))
        (setf current (aref input i)
              (aref match 0) current)
        (cond
         ((string-match "\\w" match)
          (if seen-end
              (progn
                (if (stringp replacement)
                    (if preserve
                        (dotimes (j white-count)
                          (write-char
                           (aref replacement
                                 (mod j (length replacement )))))
                      (princ replacement))
                  (if preserve
                      (dotimes (j white-count)
                        (write-char replacement))
                    (write-char replacement)))
                (setq seen-end nil))
            (setq seen-start t))
          (setq whites nil white-count 0)
          (write-char current))
         ((member current '(?\ ?\t ?\n ?\r))
          (if seen-start
              (if seen-end
                  (progn
                    (setq whites (cons current whites))
                    (incf white-count))
                (setq seen-end t white-count 1 whites (list ?\ )))
            (write-char current)))
         (t (when (> white-count 0)
              (princ (coerce whites 'string))
              (setq white-count 0 whites nil))
             (write-char current)
            (setq seen-end nil seen-start nil)))))))

(replace-between-words "[.A foobar]    [.B   baz]" ?\/)
"[.A/foobar]    [.B/baz]"

(replace-between-words "[.A foobar]    [.B   baz]" "-=*=-" t)
"[.A-foobar]    [.B-=*baz]"

(replace-between-words "[.A foobar]    [.B   baz]" "-=*=-")
"[.A-=*=-foobar]    [.B-=*=-baz]"

(replace-between-words "[.A foobar]    [.B   baz]" ?\/ t)
"[.A/foobar]    [.B///baz]"

(replace-between-words "[.CP [.TP [.NP" ?\/ t)
"[.CP [.TP [.NP" 
```

并且最终可能会更快:)

# php - .dialog 不适用于 AJAX 注入的 HTML

> ID：12809612
> 
> 赞同：0
> 
> 时间：2012-10-09T22:58:19.530
> 
> 标签：php, jquery-ui, jquery

下面的所有代码都是我正在尝试做的一个独立的工作示例（大大简化）。如果有人将以下代码块复制/粘贴到 3 个单独的文件中，则代码完全正常运行——只需记住在文档顶部的脚本标记中引用/包含 test4.js 和 jquery 库。

**摘要：**通过 Ajax 注入的 HTML 表单无法与 jQuery UI 对话框小部件一起使用。

**目标：**当点击 div #putit_here 时，jquery-ajax 会注入一个 html 表单（最终，它将从 DB 中检索适当的表单值，这就是 ajax 的原因）。通过 ajax 注入 HTML 后，将出现一个 jQuery .dialog 允许用户修改表单数据并重新提交表单。

**问题：** jQueryUI .dialog 没有出现。但是，如果注释掉 jQuery 中的 ajax 块*并重*命名 HTML 中的第二个 div（将 id="editThisContact_2" 更改为 id="editThisContact_1"），一切都会起作用。

因此，问题似乎是 HTML 被注入的事实。我错过了什么？

我正在尝试在[此处](http://jsfiddle.net/bcmit/ekBA3/12/)创建此难题的 jsfiddle 示例。对此也没有很大的运气。[有关在 jsfiddle 中模拟 ajax 调用的一个很好的示例，请参见此处](https://stackoverflow.com/questions/4528392/jsfiddle-echo-html-not-working-with-jquery?rq=1)。

HTML：索引.php

```
<div id="putit_here">
    Click here
</div>

<!-- ----------------------------------------------------------------------- -->
<!-- *** Below div not req for example. However, to prove the code works *** -->
<!-- *** without the ajax call, RENAME id="editThisContact_2" to _1 and  *** -->
<!-- *** comment-out the ajax block (see embedded notes) in the JS code. *** -->
<!-- ----------------------------------------------------------------------- -->
<div id="editThisContact_2" style="display:none;">
        <p class="instructions">Edit contact information for <span class="editname"></span>.</p>
    <form name="editForm" onsubmit="return false;">
        <fieldset>
<span style="position:relative;left:-95px;">First Name:</span><span style="position:relative;left:10px;">Last Name:</span><br />
        <input type="text" id="fn_1" value="Peter" name="fn_1">
        <input type="text" id="ln_1" value="Rabbit" name="ln_1"><br /><br />
    <span style="position:relative;left:-120px;">Email:</span><span style="position:relative;left:30px;">Cell Phone:</span><br />
        <input type="text" id="em_1" value="pr@warren.nimh.com" name="em_1">
        <input type="text" id="cp_1" value="123-456-7890" name="cp_1">
        </fieldset>
    </form>
</div> 
```

* * *

AJAX - ax_test4.php

```
 $rrow = array();
    $rrow['contact_id'] = 1;
    $rrow['first_name'] = 'Peter';
    $rrow['last_name'] = 'Rabbit';
    $rrow['email1'] = 'peter.rabbit@thewarren.nimh.com';
    $rrow['cell_phone'] = '+1.250.555.1212';

    $r = '

    <div id="editThisContact_'.$rrow['contact_id'].'" style="display:none">
            <p class="instructions">Edit contact information for <span class="editname"></span>.</p>
        <form name="editForm" onsubmit="return false;">
            <fieldset>
        <span style="position:relative;left:-95px;">First Name:</span><span style="position:relative;left:10px;">Last Name:</span><br />
            <input type="text" id="fn_'.$rrow['contact_id'].'" value="'.$rrow['first_name'].'" name="fn_'.$rrow['contact_id'].'">
            <input type="text" id="ln_'.$rrow['contact_id'].'" value="'.$rrow['last_name'].'" name="ln_'.$rrow['contact_id'].'"><br /><br />
        <span style="position:relative;left:-120px;">Email:</span><span style="position:relative;left:30px;">Cell Phone:</span><br />
            <input type="text" id="em_'.$rrow['contact_id'].'" value="'.$rrow['email1'].'" name="em_'.$rrow['contact_id'].'">
            <input type="text" id="cp_'.$rrow['contact_id'].'" value="'.$rrow['cell_phone'].'" name="cp_'.$rrow['contact_id'].'">
            </fieldset>
        </form>
    </div>
    ';
    echo $r; 
```

* * *

JAVASCRIPT/JQUERY：test4.js

```
<script>

$(function() {

    var pih = $('#putit_here');

    pih.click(function() {

        fn = $('#fn_1').val();
        ln = $('#ln_1').val();
        editname = fn + " " + ln;

//To test without ajax injection: (i.e. for "Test2", the proof...)
//Comment out from here --> */
            $.ajax({
            type: "POST",
            url: "ax_test4.php",
            data: 'user_level=0',
            success:function(data){
                pih.html(data);
            }
        }); //End ajax
//To here <-- */
        $( "#editThisContact_1" ).dialog( "open" );
    }); //End pih.click

    $( "#editThisContact_1" ).dialog({
        autoOpen: false,
        height: 400,
        width: 600,
        modal: true,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            alert('DialogClose fired');
        }
    });

}); //End document.ready

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:15:52.690

您必须在成功调用中创建对话框。当 html 不存在时，您当前正在创建对话框。

```
$.ajax({
            type: "POST",
            url: "ax_test4.php",
            data: 'user_level=0',
            success:function(data){
                pih.html(data);
           $( "#editThisContact_1" ).dialog({
        autoOpen: false,
        height: 400,
        width: 600,
        modal: true,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            alert('DialogClose fired');
        }
    });
            }
        }); //End ajax 
```

# c++ - 从文本文件中读取记录

> ID：12809613
> 
> 赞同：0
> 
> 时间：2012-10-09T22:58:26.173
> 
> 标签：c++, search, text

好的，我是 C++ 新手，但我正在做很多练习。

这是我的问题，有人可以看看我的源代码，请在这里引导我朝着正确的方向前进。

这就是我想要做的。

1.  该程序应该能够读取其中包含记录的文本文件。（做到了）
2.  我还想在文本文件中使用字符串搜索记录（还没有这样做）
3.  此外，使用文本文件中的十进制数字或双精度从最高到最低对记录进行排序。我正在考虑使用冒泡排序功能。

**这是我的代码**

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

//double gpa;
//string

int main () 
 {
  string line;
  ifstream myfile ("testfile.txt");
  if (myfile.is_open())
 {
    while ( myfile.good() )
 {
      getline (myfile,line);
      cout << line << endl;

 }
    myfile.close();
 }

else cout << "Unable to open file"; 

char c;
cout<<"\n enter a character and enter to exit: ";
cin>>c;
return 0;
} 
```

**这是一个带有记录的示例文本文件。**

```
aRecord 90 90 90 90 22.5
bRecord 96 90 90 90 23.9
cRecord 87 90 100 100 19.9
dRecord 100 100 100 100 25.5
eRecord 67 34 78 32 45 13.5
fRecord 54 45 65 75 34 9.84
gRecord 110 75 43 65 18.56 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:24:29.490

请注意，这`getline(myfile, line)`可能会失败，因此`line`在这种情况下使用 value of 是不正确的：

```
while (myfile.good())
{
    getline(myfile, line);
    cout << line << endl;
} 
```

应该：

```
while (getline(myfile, line))
{
    cout << line << endl;
} 
```

对于您的问题 2 和 3：在寻求帮助之前，您应该自己尝试一些事情。如果不是解决方案，甚至不是尝试，那么您至少应该对此有一些想法。每次您想从中检索一些数据时，您都想浏览您的文本文件吗？一次读取它并将其存储在内存中不是更好吗（也许`std::vector<Record>`然后在记录向量中搜索记录）？你想逐行浏览你的文件并在每一行中搜索一些特定的字符串吗？......只要多想一下，你就会找到问题的答案。

# google-chrome - Chrome：无法加载 GWT DevMode 插件

> ID：12809616
> 
> 赞同：2
> 
> 时间：2012-10-09T22:58:31.297
> 
> 标签：google-chrome, gwt

我的 GWT 插件已安装并启用

![在此处输入图像描述](../Images/d027c9860f2b9158cbf7e62a1590a82c.png)

但是，当我的应用程序加载时，我得到

![在此处输入图像描述](../Images/b79408b3317c0ce6e056c89df4ae9b9e.png)

这里有什么问题？你有什么建议我尝试解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:12:47.773

Mac 版 Chrome 22 放弃了对长期弃用的插件模型的支持，GWT 插件仍在使用这些模型；您无法加载该版本的插件。插件源[已经更新](https://code.google.com/p/google-web-toolkit/source/detail?r=11310)为与当前版本的 Chrome 兼容，只需要包含该更改的插件的新版本即可。

# powershell - Powershell Format-Table 导致空列

> ID：12809618
> 
> 赞同：2
> 
> 时间：2012-10-09T22:58:43.510
> 
> 标签：powershell, formatting

跑步：

```
get-vm -server hyperv
get-vm -server hyperv | format-table -AutoSize 
```

结果是 5 列输出，其中所有 5 列中的数据都符合预期。

跑步：

```
get-vm -server hyperv | select VMElementName,State,Host | format-table -AutoSize
get-vm -server hyperv | format-table -Property VMElementName,State,Host -AutoSize 
```

生成 3 列输出，其中仅 VMElementName 列中的数据。任何减少列数的尝试都会导致除 VMElementName 列之外的所有列都为空。更改顺序没有效果。选择任何单列都没有区别。只有 VMElementName 列包含数据。

如何获取要显示的其余数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:55:38.670

使用 Server 2008 R2 中的 Hyper-V 模块，Get-VM 返回类型为 的对象`System.Management.ManagementObject#root\virtualization\Msvm_ComputerSystem`。换句话说，这些是基于 WMI 的对象，其中 WMI 类是`Msvm_ComputerSystem`.

您的问题是该对象不包含您要求的某些属性。

如果你做 a `Get-VM | Get-Member`，你可以看到可用的实际属性，我想你想要的是

```
Get-VM | FT Elementname, statusdescriptions,pscomputername

Elementname                             statusdescriptions                  PSComputerName
-----------                             ------------------                  --------------
Lync - SE                               {Operating normally}                    COOKHAM8
Lync - QMS                              {Operating normally}                    COOKHAM8
Lync - DC                               {Operating normally}                    COOKHAM8
Lync - SPS2010                          {Operating normally}                    COOKHAM8
DEV1 - win7+Dev tools                   {Operating normally}                    COOKHAM8
S1.Cookham/Net (Srv2012)                {Operating normally}                    COOKHAM8
SQL2012                                 {Operating normally}                    COOKHAM8
W8.Cookham.Net(w8 RTM)                  {Operating normally}                    COOKHAM8
Lync - EXUM                             {Operating normally}                    COOKHAM8
SQL2008                                 {Operating normally}                    COOKHAM8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T01:07:20.547

空`Format-Table`列通常表示关联的属性不存在，或者每个项目的值为 $null 或空字符串。如果我查看 Windows 8 上 Get-VM 的输出（我在其中创建了一个 hyper-v VM），我看不到这些属性。您可以使用如下方式查看可用的属性`Get-Member`：

```
Get-VM -server hyperv | Get-Member 
```

# ruby-on-rails - 具有两个数据库的支持团队的 Rails 应用程序

> ID：12809620
> 
> 赞同：3
> 
> 时间：2012-10-09T22:59:08.527
> 
> 标签：ruby-on-rails, ruby, sql-server-2008, sqlite

我查看了一些关于 SO 的答案并查看了一些文档，但我发现的大部分内容都是针对查询具有相似数据的多个数据库（即复制的 dbs 或不同的客户端......）

我有一件非常具体的事情要完成：

我有一个支持团队需要监视针对 SQL Server 数据库的某些查询的结果（例如，如果有超过三行恐慌！）。不幸的是，我将无法使用同一台服务器进行身份验证（他们想要的），并且正在考虑只使用 sqlite。有人曾经成功地实施过类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:57:58.403

这里可能需要建立连接方法：它允许您覆盖特定模型的非默认数据库连接参数。在 api.rubyonrails.org 上查找建立连接，这应该会为您提供完整的文档。

# php - SQL 插入 Auto_Increment 列

> ID：12809625
> 
> 赞同：4
> 
> 时间：2012-10-09T22:59:44.553
> 
> 标签：php, sql

基本上，我有一个用于通用 SQL 语句的 PHP 类：

1.  `object.table('table_name')``'table_name'`用从 table_schema 中拉出的列名填充一个数组

2.  `object.insert(data_array)``'table_name'`使用列数组和 data_array运行插入语句

3.  `object.select('where')``'table_name'`使用 where 语句输入返回所有内容或不返回任何内容

我这样做是因为我很懒，我想让我的代码更漂亮。但是，模式查找会返回`ID`我的表中的列，这很好，因为有时我需要将它与`object.select()`. 但是，这`object.insert()`有点困难。

是否有一些我不知道的 SQL 功能可以让您准确地插入自动递增的列，或者在我眼前是否有更简单的解决方案，而我只是一个彻头彻尾的白痴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:03:12.347

无法插入自动递增的列。您可以执行插入（绕过自动递增字段）并接受自动生成的 id ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:04:42.347

您需要从插入语句中省略 id 列并用于`last_insert_id()`获取最后插入的键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T23:26:23.483

不确定您使用的是哪个 rdbms，但在 SQL Server 中，您可以通过以下方式允许插入标识列：

```
SET IDENTITY_INSERT dbo.MyTable ON 
```

但我不确定你为什么要这样做......

相反，当您这样做时：object.table('table_name')，收集的不仅仅是列名，例如 ColumnName、DataType、IsIdentity 等。它可以是多维数组，也可以是一个类。

然后在插入/选择时，您可以过滤掉 IsIdentity 的列。在构造插入时，了解数据类型也很有帮助。

# c# - 使用 Select 子句调整 IQueryable 的序列元素？

> ID：12809631
> 
> 赞同：0
> 
> 时间：2012-10-09T23:00:29.127
> 
> 标签：c#, sql, entity-framework, ef-code-first

我想做一些感觉应该很简单的事情，但结果却让我很头疼。我`Select`来自一个`IQueryable`而不是创建一个新对象，我想“调整”我正在投影的那个。这是我想要做的（`context`是 a `DbContext`，我使用的是代码优先方法）：

```
var eventsToReturn =
    ((IQueryable<Event>)
        context.Events
        .OrderByDescending(evnt => evnt.TakesPlaceOn)
        .Skip(startAt)
        .Take(numberToReturn)
    )
    .Select(evnt =>
        {
            evnt.UnmappedUsersCount = evnt.Users.Count();
            return evnt;
        }
    )
    .ToList(); 
```

这很好，因为 Entity Framework 不必实际获取`User`与每个事件关联的所有实体，并且可以使用聚合`COUNT`函数来简单地获取用户数量。但是，它不起作用，因为该`IQueryable`版本需要`Select`一个没有方法体的 lambda 语句，可以转换为表达式树。因此，虽然上述方法不起作用，但它确实：

```
.Select(evnt => evnt) 
```

...所以这样做：

```
.Select(evnt => evnt.Users.Count()) 
```

我已经解决了这个问题，但我的方式似乎相当冗长。这是我的方法：

```
var eventsToReturnData =
    ((IQueryable<Event>)
        context.Events
        .OrderByDescending(evnt => evnt.TakesPlaceOn)
        .Skip(startAt)
        .Take(numberToReturn)
    )
    .Select(evnt =>
        new {
            Event = evnt,
            UnmappedUsersCount = evnt.Users.Count()
        }
    )
    .ToList();

var eventsToReturn = eventsToReturnData
    .Select(evntData => {
        evntData.Event.UnmappedUsersCount = evntData.UnmappedUsersCount;
        return evntData.Event;
    })
    .ToList(); 
```

所以我将主要`Event`对象投影到一个匿名对象中，以及`int`我想添加到它的一个微小对象，然后做一个全新`Select`的 on `eventsToReturnData`，这一次工作，因为`eventsToReturnData`是一个`IEnumerable`（所以 lambda 可以有一个方法body），只是通过设置我从第一个查询中获得的整数来调整`Event`对象。`UnmappedUsersCount`

有没有更简单或更优雅的方法来做到这一点？我想避免 EF 必须为每个事件检索所有用户，因此仅使用's方法`Event.Users.Count()`返回的内容是没有好处的。`IQueryable``Select`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:06:42.033

您可以利用`Expression`该类在运行时构建一棵树，但这需要大量工作和代码，只有在您必须多次执行此类操作时才合理。

如果这种模式在您的代码中仅出现一次或很少出现，这是您能做的最好的事情。

# statistics - 支持向量机和标准中的参数 C 以找到最佳参数

> ID：12809633
> 
> 赞同：1
> 
> 时间：2012-10-09T23:00:42.463
> 
> 标签：statistics, svm

SVM 中的成本参数 C 是什么意思？我的意思是，如果 C 很大，是否意味着“我不能容忍错误的分类”？

在实验中找到最佳参数时，如何确定范围和步长？

顺便问一下，决定哪个参数更好的标准是什么？交叉验证的错误数量或我们从 SVM 获得的支持向量的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T20:14:59.940

**什么是C？**

SVM 训练解决的优化问题有两个术语：

1.  一个有利于“更简单”权重的正则化术语
2.  确保权重正确分类训练数据点的损失项。

C 只是这些对术语的重要性之间的平衡。如果 C 高，则对 (2) 给予很大的权重，如果 C 较低，则对 (1) 给予很大的权重。

**如果我只是想要准确的结果，为什么不把 C 设置得很高呢？**

术语 (1) 防止过度拟合（非常擅长对训练数据进行分类，但对未见过的测试数据进行分类非常糟糕）

**好的，我只想要准确的结果，为什么我不把 C 设置得很低呢？**

术语 (2) 确保训练优化关注训练数据，您不仅需要“简单”（在 L2 意义上）的权重，还需要正确分类训练数据的简单权重。

**概括：**

训练 SVM 是两个方面的平衡。C 是损失项相对于正则化项的相对重要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T20:03:37.857

-C 表示您如何容忍分类错误（松弛变量）。为了找到更好的模型，我想我们必须设置一个大的阈值并进行交叉验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T07:32:52.377

就这样吧。SVM 中的 C 参数是**误差项的惩罚参数**。您可以将其视为算法必须满足的正确分类程度或SVM必须满足的优化程度。

对于**更大的 C 值**，SVM 优化器无法对任何单点进行错误分类。是的，正如您所说，SVM 优化器的容差对于较高的 C 值很高。但对于**Smaller C**，SVM 优化器至少允许有一定的自由度，以满足最佳超平面！

`SVC(C=1.0, kernel='rbf', degree=3, gamma='auto')` --> 低容错 RBF 内核

`SVC(C=1000.0,kernel='linear',degree=3,gamma='auto')`-->高容错线性内核

参考：[http ://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC](http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC)

# typescript - 这在 TypeScript 箭头定义中？

> ID：12809634
> 
> 赞同：2
> 
> 时间：2012-10-09T23:00:47.830
> 
> 标签：typescript

我在 TypeScript 中写了这样的对象字面量：

```
var object = {
    message: "Say",
    say: () => {
        return this.message;
     }
}; 
```

我得到了这样生成的 JavaScript：

```
var object = {
    message: "Say",
    say: function () {
        return _this.message;
    }
}; 
```

在 return 语句之前不应该有这样的行：

```
 var _that = this; 
```

当我使用箭头函数表达式时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:03:53.067

你是对的。它缺少：

```
var _this = this; 
```

这是在发布（0.8）之后发现的，目前已在开发人员分支上修复。

注意：我也认为你想写

```
var object = {
    message: "Say",
    say: function () {
        return () => this.message;
    }
}; 
```

它实际上会在运行时打印说。见：[http ://wiki.ecmascript.org/doku.php?id=harmony:arrow_function_syntax](http://wiki.ecmascript.org/doku.php?id=harmony:arrow_function_syntax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:25:03.490

`=>`这里有点危险，因为严格来说，它**绑定`this`到封闭范围的`this`**. 在正确的代码生成中，该`var _this = this;`行位于对象字面量*之上*`say`，您的函数仅返回`undefined`.

当您真正想要引用将出现在封闭范围`this`中的表达式时，您只想在表达式中使用。在这种特殊情况下，您不需要（您想要内部范围，即对象文字本身）。`=>``this``this`

# regex - 使用正则表达式替换 JSF 字符串

> ID：12809635
> 
> 赞同：1
> 
> 时间：2012-10-09T23:01:31.520
> 
> 标签：regex, string, jsf, replace

我有一个作为日期输出的字符串：

```
#{bean.someString} 
```

我想获取该字符串并使用正则表达式对其进行操作，如下所示：

*   原始字符串：“11/22”
*   预期字符串：“22/11”

我尝试使用 f:replace 使用正则表达式，例如：

```
#{fn:replace(bean.someString, "(.*?)/(.*?)", "$2/$1")} 
```

但结果如下：

*   实际字符串：“/1122”

有谁知道我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:25:17.103

以下是答案（经过多次磨难）。

因为我有一组固定的字符要遍历，所以我可以使用以下内容来获得正确的替换：

```
#{fn:replace(bean.someString, "(.{2})/(.{2})", "$2/$1")} 
```

正常的正则表达式在这里不起作用的疯狂。

# sql - 查找计数出现

> ID：12809638
> 
> 赞同：6
> 
> 时间：2012-10-09T23:01:35.083
> 
> 标签：sql, sql-server, tsql, pivot

我有一个包含 2 列的表（db：sql server 2008）：

```
id         name
-----      ------
1          Bob
2          Mike
3          Mary
4          Mike
5          Barry
6          Benson
7          Burrows 
```

我想计算以 B 开头并以 M 开头的名称（在一行中）？

喜欢：

```
Count of B        Count of M
-----------      ------------
4                  3 
```

我唯一想到的就是工会。有什么想法可以在单个查询中更清洁（没有联合）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T23:08:35.707

尝试使用`CASE`,

```
SELECT  SUM(CASE WHEN SUBSTRING(name,1,1) = 'B' Then 1 ELSE 0 END),
        SUM(CASE WHEN SUBSTRING(name,1,1) = 'M' Then 1 ELSE 0 END)
FROM TAbleName 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/661555/5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T23:11:53.937

你可以用`PIVOT`这个。如果您有已知数量的列，则可以使用 STATIC PIVOT 对值进行硬编码：

```
select *
from
(
  select substring(name, 1, 1) name, -- use the same field twice, 
    substring(name, 1, 1) initial    -- once will be for the count the other for columns
  from yourtable
) x
pivot
(
  count(name)
  for initial in ([B], [M])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/573ba/3)

如果要转换的列数未知，则可以使用动态 sql 并创建动态 PIVOT：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' 
                      + QUOTENAME(substring(name, 1, 1)) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
              select substring(name, 1, 1) name, 
                substring(name, 1, 1) initial
              from yourtable
            ) x
            pivot 
            (
                count(name)
                for initial in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5b76f/1)

如果您想将数据集过滤为仅以开头的数据集，`B or M`则可以使用`WHERE`子句进行过滤。

```
where substring(name, 1, 1) in ('B', 'M') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:30:39.313

这是另一种方式

```
Declare @T Table ([id] varchar(5), [name] varchar(7));

INSERT INTO @T([id], [name])
VALUES
    ('1', 'Bob'),
    ('2', 'Mike'),
    ('3', 'Mary'),
    ('4', 'Mike'),
    ('5', 'Barry'),
    ('6', 'Benson'),
    ('7', 'Burrows')

;WITH CTE AS
(SELECT
    Initials = SUBSTRING(name,1,1)
    ,Cnt = COUNT([name]) 
FROM @t 
GROUP BY SUBSTRING(name,1,1))

SELECT 
    [Count of B] = (SELECT Cnt FROM CTE WHERE Initials = 'B')
    ,[Count of M] = (SELECT Cnt FROM CTE WHERE Initials = 'M') 
```

**结果**

```
Count of B  Count of M
4             3 
```

# android - 结束活动

> ID：12809641
> 
> 赞同：0
> 
> 时间：2012-10-09T23:01:55.100
> 
> 标签：android, android-intent, android-activity

我有一个在接到电话时发生的活动。但是，它仅在第一次接到电话时才有效。使它适用于后续调用的最佳方法是什么？除了 startActivity 之外，我还应该做些什么（例如，是否有像 bringActivityToForeground 之类的东西？）还是需要在通话中断时结束活动？我将如何结束一项活动？

```
public class CallReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
      Intent myIntent = new Intent(context, MyActivity.class);
      context.startActivity(myIntent);

    } else if (TelephonyManager.EXTRA_STATE_IDLE.equals(state)) {
      // TODO: remove the screen?
    }    
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:10:42.367

接到电话后，您是否尝试过明确地恢复活动？

# uiview - 在 iOS UIView 动画中的矢量数学失败

> ID：12809643
> 
> 赞同：0
> 
> 时间：2012-10-09T23:02:12.620
> 
> 标签：uiview, vector, uiviewanimation

我正在尝试设置一个动画，其中一个球有一个速度，并被加速到接触点。首先，我从[http://www.youtube.com/watch?v=buFCoj2jqDk&feature=relmfu](http://www.youtube.com/watch?v=buFCoj2jqDk&feature=relmfu)的教程中成功转录了一个应用程序。

但是当我试图引入速度的概念时，我似乎在矢量数学上失败了。我想简单地把两个向量相减，但直到我进入下面的详细选项，我才得到正确的语法。

该应用程序提供***了“断点 1.1”***

相关代码如下：

```
@interface ViewController : UIViewController {UIImageView *spritey; CGPoint vee; CGPoint acc;}
@property (nonatomic, retain) UIImageView *spritey;
@property (assign) CGPoint vee;
@property (assign) CGPoint acc;
@end

//.m
- (void)viewDidLoad
{
[super viewDidLoad];
spritey = [[UIImageView alloc] initWithImage: [UIImage imageNamed:@"cloud2.png"]];
[spritey setFrame:CGRectMake(60,60,50,50)];
[self.view addSubview:spritey];
vee=CGPointMake(0,0);
}
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *myTouch=[ touches anyObject];
    [UIView beginAnimations:@"moveTo" context:NULL];
    [UIView setAnimationDuration: 2.25];
    [UIView setAnimationBeginsFromCurrentState:YES];
    CGPoint newTarget=[myTouch locationInView:self.view];
    vee=CGPointMake(vee.x+(newTarget.x-spritey.center.x)/10,
                    vee.y+(newTarget.y-spritey.center.y)/10);
   spritey.center=CGPointMake(spritey.center.x+vee.x,spritey.center.y+vee.y);
   //spritey.center=[myTouch locationInView:self.view];
   [UIView setAnimationDelegate:self];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
   [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:41:03.280

在断点处停止是一个调试工具，而不是错误，据我们这里的朋友说： [“Thread 1: stopped at breakpoint” error when initializing an NSURL object](https://stackoverflow.com/questions/10016890/thread-1-stopped-at-breakpoint-error-when-initializing-an-nsurl-object)

不知何故，我一定打开了一个。Going to *View--> Navigator --> Show Breakpoint Navigator* 把我带到了一个我可以删除它的地方。

代码现在按预期工作！

# bash - bash - 匹配并选择字符串的最佳分数

> ID：12809644
> 
> 赞同：3
> 
> 时间：2012-10-09T23:02:30.833
> 
> 标签：bash, pattern-matching

我正在试验 bash 脚本，需要帮助解决这个问题：
我在文本文件中有以下数据：（test.txt）

```
have.a.nice.day.a=42and55  
have.a.nice.day.b=0  
have.a.nice.day.c=55and67  
go.to.sleep.a=111  
go.to.sleep.b=2and122and33  
go.to.sleep.c=64 
```

我想将字符串与其匹配的分数分开，并将分数与其分隔符（在本例中：“and”）分开，并从每个组中选择得分最高的字符串。
在这种情况下，组“have.a.nice.day”将是“have.a.nice.day.c”，组“go.to.sleep”将是“go.to.sleep.b”，
所以我想最好的办法是分离元素并递归地为它们分配变量。像这样：

```
#!/bin/bash
names=$(cat test.txt | grep -o -P '.+(?==\d+)')
 for name in $names
 do
  echo -n "$name"" "
  scores=$(cat test.txt | grep -o -P '(?<='$name'=).+')
   for scores_group in $scores
   do
    single_score=$(echo $scores_group | grep -o -P '\d+') 
     for score in $single_score
     do
      echo -n "$score"" "
     done
     echo
   done
 done 
```

输出将是：

```
have.a.nice.day.a 42 55 
have.a.nice.day.b 0 
have.a.nice.day.c 55 67 
go.to.sleep.a 111 
go.to.sleep.b 2 122 33 
go.to.sleep.c 64 
```

但现在我不知道如何为每组找到最好的分数。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:21:18.133

因此，我认为您的实际问题是如何获取已标记为“输出”的“输入文本”，并找到数字最高的行？

假设您的输出是输入，我将使用 awk 执行此操作：

```
$ awk '{name=$1; item=$1; sub(/\.[^.]+$/,"",name); sub(/.*\./,"",item); for (i=2; i<=NF; i++) {if($i>highest[name]){highest[name]=$i;which[name]=item}}} END{for(name in highest){printf("%s = %s = %s\n",name,which[name],highest[name])}}' input.txt
go.to.sleep = b = 122
have.a.nice.day = c = 67 
```

或者，为了解释而打破：

```
{

  # Get the parts of the first field...
  name=$1; sub(/\.[^.]+$/,"",name);
  item=$1; sub(/.*\./,"",item);

  # Walk through the scores, record the highest in an array
  for (i=2; i<=NF; i++) {
    if ($i>highest[name]) {
      highest[name]=$i;
      which[name]=item;
    }
  }
}

# Now, step through the resultant array
END {
  for (name in highest) {
    printf("%s = %s = %s\n",name,which[name],highest[name]);
  }
} 
```

这会吗？还是您*真的*想在纯 bash 中实现这一目标？如果是这样，上面的 awk 可以用下面的 bash 表示：

```
#!/bin/bash

declare -A highest
declare -A which

while read word scores; do
    name=${word%.*}
    item=${word##*.}
    set -- $scores
    while [[ -n "$1" ]]; do
        if [[ $1 -gt highest[$name] ]]; then
            highest[$name]=$1
            which[$name]=$item
        fi
        shift
    done
done < input.txt

for name in "${!highest[@]}"; do
    printf "%s = %s = %s\n" "$name" "${which[$name]}" "${highest[$name]}"
done 
```

# python - 打开不支持的压缩类型的 zipfile 静默返回空文件流，而不是抛出异常

> ID：12809651
> 
> 赞同：14
> 
> 时间：2012-10-09T23:02:56.690
> 
> 标签：python, zipfile, file-type

似乎让我的头从一个新手错误中解脱出来，我不是新手。我有一个 1.2G 已知良好的 zipfile *'train.zip'*，其中包含一个 3.5G 文件*'train.csv'*。我打开 zipfile 并文件本身没有任何异常（没有*LargeZipFile*），但生成的文件流似乎是空的。（UNIX *'unzip -c ...'*确认它很好） Python 返回的文件对象`ZipFile.open()`不是可搜索的或可分辨的，所以我无法检查。

Python 发行版是*2.7.3 EPD-free 7.3-1 (32-bit)*；但对于大拉链应该没问题。操作系统为 MacOS 10.6.6

```
import csv
import zipfile as zf

zip_pathname = os.path.join('/my/data/path/.../', 'train.zip')
#with zf.ZipFile(zip_pathname).open('train.csv') as z:
z = zf.ZipFile(zip_pathname, 'r', zf.ZIP_DEFLATED, allowZip64=True) # I tried all permutations
z.debug = 1
z.testzip() # zipfile integrity is ok

z1 = z.open('train.csv', 'r') # our file keeps coming up empty?

# Check the info to confirm z1 is indeed a valid 3.5Gb file...
z1i = z.getinfo(file_name)
for att in ('filename', 'file_size', 'compress_size', 'compress_type', 'date_time',  'CRC', 'comment'):
    print '%s:\t' % att, getattr(z1i,att)
# ... and it looks ok. compress_type = 9 ok?
#filename:  train.csv
#file_size: 3729150126
#compress_size: 1284613649
#compress_type: 9
#date_time: (2012, 8, 20, 15, 30, 4)
#CRC:   1679210291

# All attempts to read z1 come up empty?!
# z1.readline() gives ''
# z1.readlines() gives []
# z1.read() takes ~60sec but also returns '' ?

# code I would want to run is:
reader = csv.reader(z1)
header = reader.next()
return reader 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-09T23:25:25.813

原因是以下因素的组合：

*   此文件的压缩类型为*类型 9：Deflate64/Enhanced Deflate*（PKWare 的专有格式，相对于更常见的类型 8）
*   和一个[zipfile](http://docs.python.org/library/zipfile.html)错误：它不会为不受支持的压缩类型抛出异常。它过去只是[默默地返回一个错误的文件对象](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)[第 4.4.5 节压缩方法]。啊。多么虚伪。更新：我提交了[错误 14313](http://bugs.python.org/issue14313)，它已在 2012 年修复，因此当压缩类型未知时，它现在会引发 NotImplementedError。

命令行**解决方法**是解压缩，然后重新压缩，以获得简单的*类型 8: Deflated*。

[zipfile 将在 2.7 、 3.2+ 中抛出异常](http://bugs.python.org/issue14313)我猜 zipfile 将永远无法真正处理类型 9，出于法律原因。Python 文档没有提到 zipfile 无法[处理其他压缩类型](http://bugs.python.org/issue14313):(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-12-13T17:50:21.640

我处理 Python 的 ZipFile 不支持的压缩类型的解决方案是在 ZipFile.extractall 失败时依赖对 7zip 的调用。

```
from zipfile import ZipFile
import subprocess, sys

def Unzip(zipFile, destinationDirectory):
    try:
        with ZipFile(zipFile, 'r') as zipObj:
            # Extract all the contents of zip file in different directory
            zipObj.extractall(destinationDirectory)
    except:
        print("An exception occurred extracting with Python ZipFile library.")
        print("Attempting to extract using 7zip")
        subprocess.Popen(["7z", "e", f"{zipFile}", f"-o{destinationDirectory}", "-y"]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-10T06:45:00.703

压缩类型 9 是 Deflate64/Enhanced Deflate，Python 的 zipfile 模块不支持（本质上是[因为 zlib 不支持 Deflate64](https://zlib.net/zlib_faq.html#faq40)，zipfile 委托给它）。

如果较小的文件可以正常工作，我怀疑这个 zipfile 是由 Windows Explorer 创建的：[对于较大的文件，Windows Explorer 可以决定使用 Deflate64](https://superuser.com/q/1249267)。

（注意 Zip64 与 Deflate64 不同。Zip64 由 Python 的 zipfile 模块支持，只是对一些元数据在 zipfile 中的存储方式进行了一些更改，但仍使用常规 Deflate 来压缩数据。）

但是，[stream-unzip](https://github.com/uktrade/stream-unzip)现在支持 Deflate64。修改其示例以从本地磁盘读取，并像您的示例一样读取 CSV 文件：

```
import csv
from io import IOBase, TextIOWrapper
import os

from stream_unzip import stream_unzip

def get_zipped_chunks(zip_pathname):
    with open(zip_pathname, 'rb') as f:
       while True:
           chunk = f.read(65536)
           if not chunk:
               break
           yield chunk

def get_unzipped_chunks(zipped_chunks, filename)
    for file_name, file_size, unzipped_chunks in stream_unzip(zipped_chunks):
        if file_name != filename:
            for chunk in unzipped_chunks:
                pass
            continue
        yield from unzipped_chunks

def to_str_lines(iterable):
    # Based on the answer at https://stackoverflow.com/a/70639580/1319998
    chunk = b''
    offset = 0
    it = iter(iterable)

    def up_to_iter(size):
        nonlocal chunk, offset

        while size:
            if offset == len(chunk):
                try:
                    chunk = next(it)
                except StopIteration:
                    break
                else:
                    offset = 0
            to_yield = min(size, len(chunk) - offset)
            offset = offset + to_yield
            size -= to_yield
            yield chunk[offset - to_yield:offset]

    class FileLikeObj(IOBase):
        def readable(self):
            return True
        def read(self, size=-1):
            return b''.join(up_to_iter(float('inf') if size is None or size < 0 else size))

    yield from TextIOWrapper(FileLikeObj(), encoding='utf-8', newline='')

zipped_chunks = get_zipped_chunks(os.path.join('/my/data/path/.../', 'train.zip'))
unzipped_chunks = get_unzipped_chunks(zipped_chunks, b'train.csv')
str_lines = to_str_lines(unzipped_chunks)
csv_reader = csv.reader(str_lines)

for row in csv_reader:
    print(row) 
```

# asp.net - VS2012 中无法识别的标签前缀或设备过滤器“asp”

> ID：12809653
> 
> 赞同：30
> 
> 时间：2012-10-09T23:03:20.257
> 
> 标签：asp.net, visual-studio-2012, intellisense

我最近安装了 VS2012 并从事我过去使用 VS2010 的工作项目。我从来没有遇到过 VS2010 不识别 asp 前缀标签的问题，但 VS2012 是。我尝试删除`ReflectedSchemas`下的文件夹

> C:\Users[用户名]\AppData\Roaming\Microsoft\VisualStudio\11.0\

但仍然无法正常工作。有人在 VS2012 中遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2018-01-20T18:32:13.480

在 Visual Studio 2015 中，从解决方案资源管理器关闭并重新打开文件（.aspx 文件不是解决方案）对我有用。在尝试其他任何操作之前，您可以尝试一下。

[![在此处输入图像描述](../Images/497e3c71fb586e754869ad9c19b0f641.png)](https://i.stack.imgur.com/PmO9K.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-10T09:24:31.623

你的 Web.Config 中是否碰巧有这样的东西：

```
<pages>
  <controls>
    <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </controls>
</pages> 
```

在这种情况下，删除 asp tagPrefix 的条目（如果没有其他 tagPrefix 剩下，则删除整个部分）。这对我有用。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-05-17T11:18:01.020

如果您在内容页面中遇到此“VS2012 中无法识别的标签前缀'asp'”问题，

> 检查您在其下添加内容页面的母版页是否缺少`**<body>** or <form>`标签！

如果它偶然丢失了这个标签，那么这个`<asp>`标签就无法识别。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-02T08:49:02.620

对于使用 .Net 4.0 的项目设置，以下几行有效。

```
 <pages>
        <controls>
            <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        </controls>
    </pages> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-11T18:15:48.603

RuudvanFalier 的回答让我想到了 tagPrefixes，所以我在我的 aspx 页面中删除了以下内容，然后将其添加回来，警告就消失了。

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-21T04:52:42.387

```
<%@ Page Title="" Language="VB" MasterPageFile="something" AutoEventWireup="false" CodeFile="something" Inherits="something" %>
<br/><br/> 
```

请在第一行后输入“输入”。它对我有用

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-13T12:25:11.070

由于粗心造成

我的问题已解决

我删除了下面的结构，

.net 可能会使用它来识别元素，当我把它放回去时一切正常

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-08-02T14:24:57.993

只需从页面中剪切页面指令行就可以保存它。将页面指令行粘贴回来并再次保存。这对我有用。我正在使用vs2019 ..

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-06T02:20:38.460

只需关闭解决方案并重新打开它对我有用（或关闭 Visual Studio 并重新打开它）。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-11T11:53:34.390

对我来说，这个错误是在我在发布过程中遇到错误之后开始发生的（我也将它设置为编译 .aspx 页面）。请注意，双击错误不会加载您的解决方案源代码，而是在`obj`子文件夹中加载一个副本。即**检查您是否已打开实际源代码**。

是的，这是一个脑残的错误。是的，我只花了 10 分钟调试它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-22T08:13:47.393

通过将 .Net 版本（在项目属性中）从 4.5 更改回 3.5，我设法摆脱了这些错误。然后我将它改回 4.5 并且错误没有返回。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-01-17T08:43:26.103

您可以尝试在您的 aspx 页面标签中编写母版页

喜欢：

> MasterPageFile="~/Master.Master"

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-12-03T23:56:44.183

很抱歉之前没有回答这个问题。虽然我假设 VS2012 服务包或更新为我解决了这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-05-13T06:34:23.560

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %> 
```

在内容页面绑定到母版页的一行之后，将其添加到 ASP 页面的顶部。希望你的问题能得到解决。它对我有用。

当前： Flippertech 的 ASP 开发人员

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-03T00:03:49.527

就我而言，现有的解决方案都没有奏效，但其中一个敲响了警钟。我在 VS2017 解决方案的 MasterPage 中添加了一些标签（包括一些 JavaScript 和 CSS 文件引用），如下所示：

`<asp:ContentPlaceHolder ID="Content1" runat="server"> <script type="text/javascript" src="behavior.js"></script> </asp:ContentPlaceHolder>`

我删除了那些脚本标签，错误消失了。奇怪的是，*我还有其他页面也从同一个 MasterPage 继承，但那里不存在错误*。但是，错误出现在我在解决方案中创建的这个特定页面***上***将脚本添加到 MasterPage。我的想法是避免在从 MasterPage 继承的每个页面上添加相同的脚本，因此我将这些脚本再次添加回 MasterPage，只是为了检查......并且错误没有再次出现。我的理论是 Visual Studio 中的某些内部文件已损坏，如果您将一些脚本或任何内容添加到母版页然后删除它，或者您只是修改母版页以保存更改，这些更改会重写一些内部文件在 Visual Studio 中，它用于解析 ASP 和 HTML 内容。换句话说，这就像“刷新” IDE，以便正确解析您的页面。这只是一个理论，但无论如何它都有效，所以我希望这个解决方案也适用于其他人。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-05T07:54:02.847

如果此错误出现在那些继承母版页的页面上，那么一个可能的原因是 !DOCTYPE 标记，您可能在页面的某处使用了该标记来将 !DOCTYPE 声明为 html。由于 asp 是 asp.net 前缀标记而不是 html，因此会发生此错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-11T02:18:26.970

我在 asp.net 4 网站上遇到了这个问题。添加 3.5 兼容性修复了它。

```
<pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/> 
```

# jquery - 当浏览器窗口大小随 js 和 jQuery 发生变化时，如何相应地调整所有 div 的大小/缩放/重新定位？

> ID：12809669
> 
> 赞同：0
> 
> 时间：2012-10-09T23:04:35.370
> 
> 标签：jquery, draggable, responsive-design, resizable, window-resize

您好，我目前有一个非常简单的网站。它由一个全帧的背景图像和一个容器 div 组成......背景图像是动态居中的，并使用 css 规则放置，如下所示：

```
html {
    background: url(../images/hotel_room.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这对我来说似乎很有效，并保持背景图像以一种“响应式”的方式定位，这正是我想要的！

我还有一个全宽的容器 div，位置如下：

```
#mega_wrap{
    position: absolute;
    top:0;
    left: 0;
    height: 100%;
    width:100%;
} 
```

接下来，我有一些简单的 jQuery，它使用 onClick 将 div 附加到 #mega_wrap 容器，基于鼠标单击时的位置......就像这样：

```
$(document).ready(function() {

    //onClick append a resizable & draggable div with handles on all 4 corners
    $('#mega_wrap').click(function(e){

        //Define element css and positioning then add both draggable and resizable from jQuery UI
        var ele = $("<div>");
            ele.css({width:"100px", height:"100px", border:"3px dashed white", position:"absolute", left: e.pageX - 50, top: e.pageY -50});
            ele.draggable();
            ele.resizable({
                handles: 'all'
            }); 

        //Define elements handles and append them to the new div
        var eleHandleNE = $("<div class='ui-resizable-handle ui-resizable-ne' id='negrip'>");
        var eleHandleSE = $("<div class='ui-resizable-handle ui-resizable-se' id='segrip'>");
        var eleHandleSW = $("<div class='ui-resizable-handle ui-resizable-sw' id='swgrip'>");
        var eleHandleNW = $("<div class='ui-resizable-handle ui-resizable-nw' id='nwgrip'>");

            eleHandleNE.appendTo(ele);
            eleHandleSE.appendTo(ele);
            eleHandleSW.appendTo(ele);
            eleHandleNW.appendTo(ele);

        //Append new div to the container div called mega_wrap
        $("#mega_wrap").append(ele);

   }); 
}); 
```

注意：所有的 div 都可以在所有角落调整大小，并且可以使用 jQuery 拖动......所以 div 可能是容器内的任何大小和任何位置#mega_wrap ......。这是我的问题开始的地方：

我正在寻找一种方法来使用每个 div 的某种变量来跟踪所有附加 DIVS 的位置？！使用javascript或jquery？？然后，如果/当调整 div 的大小或在容器周围拖动时，我需要能够更新该变量！

最后...当调整窗口大小时，我需要将 div 调整到它们在背景图像上的确切旧位置...所以每个 div 都会根据窗口大小以锁定的比例适当地缩放（向上或向下）？！ ?

注意：认为我可能必须根据提供的解决方案以不同的方式制作背景图像？接受建议....可能从 .css 更改为 .js 或 php？

非常感谢您的帮助.... TIY

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:20:59.443

我通常为每个 div 添加一个属性：

```
var eleHandleNE = '<div class="ww xx yy" id="zz" iniWidth="100" iniHeight="200">'; 
```

稍后，当 $(window).resize(...) 触发（或您正在使用的任何内容）时，查找属性并对其进行缩放：

```
$(this).width($(this).attr('iniWidth')*ratio);
$(this).height($(this).attr('iniHeight')*ratio); 
```

顺便说一句，不要悬而未决（尤其是因为我建议添加非标准属性标签），但您的 id 应该都是唯一的。如果是，另一种选择是创建一个对象数组来存储所有初始数据。然后，您可以使用数组和 id 来检索/设置您的值：

```
//initial div's attrs
divArray = new Array({id:'#id0',width:100,height:200},{id:'#id1',width:50,height:90});
...
//adding another div later
divArray[divArray.length] = {id:'#id2',width:300,height:500};

//Resize stuff...
function resizeStuff(divArray,ratio) {
  for(i=0;i<divArray.length; i++) {
    $(divArray[i].id).width((divArray[i].width*ratio);
    $(divArray[i].id).height((divArray[i].height*ratio);
  }
} 
```

# jakarta-ee - Glassfish：提供用户上传的文件（备用 docroot 相关 Webapp）

> ID：12809671
> 
> 赞同：2
> 
> 时间：2012-10-09T23:04:36.727
> 
> 标签：jakarta-ee, primefaces, glassfish

在我的 webapp 中，我让用户上传文件（图像和文档），这些文件以后应该可供其他用户使用。

这是 glassfish-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD 
    GlassFish Application Server 3.1 Servlet 3.0//EN" 
    "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
    <parameter-encoding default-charset="UTF-8" />
<property name="alternatedocroot_1"
         value="from=/uploads/* dir=C:/glassfish31/glassfish/domains/domain1" />
</glassfish-web-app> 
```

它可以工作，但我想在其他系统（linux/windows）上部署应用程序。

Q1：有什么办法可以避免在这里写完整的路径，至少让它在 linux/windows 上可移植？

Q2：上传文件时，我使用 primefaces 并使用指向与上述相同目录的硬编码字符串将文件存储到光盘。

```
public static final String ALTERNATE_DOC_ROOT_1 = "C:/glassfish31/glassfish/domains/domain1/uploads"; 
```

是否有一些 API 可以让我的代码查找备用 docroot 的绝对路径，以便可以在其中存储文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:03:20.010

Q1：简单地用点替换绝对路径使其默认为：

```
C:/glassfish31/glassfish/domains/domain1

<property name="alternatedocroot_1"
     value="from=/uploads/* dir=." /> 
```

所以我想这也适用于linux，但没有测试

# java - 在图中寻找路径？（全球定位系统）？

> ID：12809676
> 
> 赞同：2
> 
> 时间：2012-10-09T23:05:06.410
> 
> 标签：java, c++, algorithm

我游戏中的城市本质上是道路和十字路口的图表。

每条道路都有对起点和终点交叉口的引用。

每个交叉路口都有对顶部、左侧、底部、右侧道路的引用，如果它是 3 路、2 路路口等，则为 null。

道路是长方形的。

鉴于此，有没有办法生成从道路 A 到道路 B 的路径？（比说 A* 更简单的事情？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:07:07.260

由于该图未加权，您可以尝试[BFS](http://en.wikipedia.org/wiki/Breadth-first_search) - 尽管它不知情并且可能会比 A* 算法慢（对 A* 具有合理的启发式函数）。

[您可以通过执行双向 BFS](http://en.wikipedia.org/wiki/Bidirectional_search)来加快它的速度——这在未加权图中也是最佳的，并且应该比标准 BFS 快得多。
双向 BFS 的想法很简单：在“同一时间”（一个接一个）从头到尾执行一个 BFS 步骤（深度 1，深度 2，...），一旦你发现两个搜索的前沿相交 - 你有你的路径。
它要快得多，因为每个方向只搜索到中间，为您提供`O(2 * B^(d/2)) = O(B^(d/2))`要探索的总节点（`d`最佳解决方案的深度在哪里，并且`B`是分支因子 - 在您的情况下为 4），而常规 BFS 是`O(B^d)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:43:42.350

[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:13:45.377

如果您不想自己实现所有路径查找算法，我强烈推荐[JGraphT](http://jgrapht.org/)。它是满足您所有图形需求的优秀库。它可以通过返回边列表为您找到最短路径。

不过，它当然有一个学习曲线。我一开始想使用 WeightDirectedGraphs，后来在谷歌上搜索了一下才找到合适的使用方法。

编辑：我刚刚注意到您将您的帖子标记为 Java 和 C++，但 JGraphT 是一个 Java 库（正如名称中的 J 所暗示的那样）。

# c# - Base64 字符串发布到 URL

> ID：12809678
> 
> 赞同：0
> 
> 时间：2012-10-09T23:05:07.373
> 
> 标签：c#, .net

我有一串文本需要先转换为 base64，然后才能发布到 url。这是我的代码

```
 HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
      byte[] postDataBytes = Encoding.UTF8.GetBytes(strCXML);
       string returnValue = System.Convert.ToBase64String(postDataBytes);
       req.Method = "POST";
       req.ContentLength = postDataBytes.Length;
       req.ContentLength = postDataBytes.Length;
       Stream requestStream = req.GetRequestStream();
       requestStream.Write(returnValue,0, postDataBytes.Length); 
```

问题是我在最后一行出现错误 System.IO.Stream.Write(byte[],int,int) returnValue is base64 string cant be used as byte[] required in stream.writer 知道如何使用那个base64字符串调用 returnvalue 并将其放入 url 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T23:10:52.443

您应该通过 Encoding.GetBytes 将 base64 字符串转换为字节数组

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
byte[] postDataBytes = Encoding.UTF8.GetBytes(strCXML);
string returnValue = System.Convert.ToBase64String(postDataBytes);

postDataBytes = Encoding.UTF8.GetBytes(returnValue);

req.Method = "POST";
req.ContentLength = postDataBytes.Length;
Stream requestStream = req.GetRequestStream();
requestStream.Write(postDataBytes, 0, postDataBytes.Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:09:43.087

您正在使用 Stream 作为您的 requestStream。Stream.Write 采用字节数组，而不是 Base64 字符串。

我认为您的操作顺序错误。我会先将 strCXML 转换为 Base64 字符串，然后将其编码为字节数组以写入请求流。

# javascript - 如何获取 XMLhttp responseText？

> ID：12809680
> 
> 赞同：1
> 
> 时间：2012-10-09T23:05:38.390
> 
> 标签：javascript

我对 xmlhttp 对象不太熟悉，尽管有可用的文档，但在获取`responseText`. 非常接近，但如果有人能指出以下为什么不起作用，我将不胜感激；在`send()`它死了之后......：

```
function fetchgenotype() {
    // here's where we use an Ajax function to fetch the allele values without reloading the page.
    // Get the index number of the genotype record to retrieve; retrieve it; populate the alleles.
    var mndx, sndx = 0;
    mndx = $('#marker').val();
    if (Study_selected) {
        sndx = $('#stylabid').val();
    } else {
        sndx = $('#pjtlabid').val();
    }
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            // Recieve the return value, parse and assign to screen form. 
            var allele_stg = "";
            allele_stg = document.getElementById("allele_ary").innerHTML = xmlhttp.responseText;
            ary = new Array();
            ary = str_getcsv(allele_ary, ',');
            $('#allele_1_1').val() = ary[0];
            $('#allele_1_2').val() = ary[1];
        }
    }
    xmlhttp.open("GET", "fetchAlleles.php?mndx=" + mndx + "&sndx=" + sndx, true);
    xmlhttp.send();
} // end of fetchgenotype 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:35:39.073

您可以通过将`if`语句更改为：

```
if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    // Receive the return value, parse and assign to screen form. 
    var allele_stg = "",
        rText = xmlhttp.responseText;
    /*
     * By assigning xmlhttp.responseText to a seperate variable
     * you can now check to make sure rText contains what you
     * expect to see.
     * 
     * By making the call to getElementById and assigning the
     * innerHTML property in separate statements, you can now
     * check to make sure that getElementById is returning a
     * DOM element, or if it's undefined.
     */
    allele_stg = document.getElementById("allele_ary");
    allele_stg.innerHTML = rText;
    ary = new Array();
    ary = str_getcsv(allele_ary, ',');
    $('#allele_1_1').val() = ary[0];
    $('#allele_1_2').val() = ary[1];
} else {
    console.log('xmlhttp.readyState:' + xmlhttp.readyState);
    console.log('xmlhttp.status:' + xmlhttp.status);
} 
```

然后监控控制台。我怀疑你要么没有得到 a ，`200` `xmlhttp.status`要么`xmlhttp.readyState`永远不会得到`4`。

# python - numpy.Zeros（x * y，x * y）的自组织映射内存错误？我的 X/Y 应该代表什么？

> ID：12809681
> 
> 赞同：0
> 
> 时间：2012-10-09T23:05:43.887
> 
> 标签：python, numpy, artificial-intelligence, self-organizing-maps

我正在尝试使用[Stephan Marslands 2D 自组织图](http://www-ist.massey.ac.nz/smarsland/Code/9/som.py)（结合[主成分分析](http://www-ist.massey.ac.nz/smarsland/Code/10/pca.py)）

```
import som as sm
#put it into som
def som_algorithm(inputs,nIterations,x=0,y=0):
    print "Running Self-Organizing Map!"
    if x == 0 and y == 0:
        y = len(inputs[0])
        x = len(inputs)
    print "x axis is " + str(x) + " / y axis is " + str(y)
    som = sm.som(x,y,inputs)
    som.somtrain(inputs, nIterations)
    print som.somfwd(inputs)

som_algorithm(training, 100) 
```

并根据我[预处理后](http://csgo.co.nz/06005586/lingspam.py)的数据集，产生此错误

```
Running Self-Organizing Map!
x axis is 600 / y axis is 173
Traceback (most recent call last):
  File "\source\bag_of_words.py", line 112, in <module>
som_algorithm(training, 100)
  File "\source\bag_of_words.py", line 87, in som_algorithm
som = sm.som(x,y,inputs)
  File "\som\__init__.py", line 44, in __init__
self.mapDist = zeros((self.x*self.y,self.x*self.y))
MemoryError 
```

目前，my`Y`表示每个数组的元素数量（数组维度包含在较大维度中），my`X`表示包含较小数组维度的较大维度。什么可能导致此内存错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:47:47.600

该代码试图创建一个形状为 x*y x*y 的零数组。那是 10774440000 个元素。数组中的每个值都是 8 个字节（双精度）。超过 80 GB。您只是内存不足。

# bash - 从另一个文件将文本附加到现有制表符分隔文件中的列

> ID：12809682
> 
> 赞同：0
> 
> 时间：2012-10-09T23:05:49.550
> 
> 标签：bash

在一个制表符分隔的文件中，它采用以下形式：

身份证 | 整数 | 整数

```
1   12345    56789
2   11111    233323
3   43423    789798 
```

基本上 file1.txt 是一个制表符分隔的文件，其中第一列是编号为 1-50 的 sql 数据库的主键。其他两列只是与我们的数据集相对应的数字。

然后在另一个文件中我有： string | 整数

```
c1  234234
c10 2342 
c11 5234
c2  987987
c3  234234 
```

在 file2.txt 中，ID 是一个字符串，其中数字是 file1.txt 中对应的 ID。我想将整数数据从 file2.txt 附加到 file1.txt。
我希望输出是

```
1   12345    56789    234234
2   11111    233323   987987
3   43423    789798   234234 
```

由于最初在 file2 数据库中创建数据的方式，该字符串是 ID。所以当我们订购它时，它是 c1,c10,c11,c12...c2,c20,c21,c22...等。我想将数字与第一个文件对齐并附加数据。我怎样才能做到这一点？我很不喜欢 bash，只有在我的列已经完美排列时才找到粘贴命令。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:18:03.000

一种使用方式`GNU awk`：

```
awk 'BEGIN { FS=OFS="\t" } FNR==NR { array[substr($1, 2)]=$2; next } { if ($1 in array) print $0, array[$1] }' file2.txt file1.txt 
```

结果：

```
1   12345   56789   234234
2   11111   233323  987987
3   43423   789798  234234 
```

编辑：

也许 in 中的字符串`file2.txt`可能包含许多非数字字符。如果是这种情况，请尝试以下操作：

```
awk 'BEGIN { FS=OFS="\t" } FNR==NR { gsub(/[^0-9]+/, "", $1); array[$1]=$2; next } { if ($1 in array) print $0, array[$1] }' file2.txt file1.txt 
```

结果：

```
1   12345   56789   234234
2   11111   233323  987987
3   43423   789798  234234 
```

# html - 内容提供者是否可以设置 iframe 高度？

> ID：12809685
> 
> 赞同：0
> 
> 时间：2012-10-09T23:06:09.810
> 
> 标签：html, iframe

情况：

站点*abc*为*def*提供了一个 iframe（或一个 div，或任何能使最后一部分工作的东西）。*iframe 正在从abc*中提取内容 iframe 会切断内容，因为*def*设置的高度太小。 *abc*想要控制 iframe 的高度。

这可能与对JS的限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:18:19.410

如果父页面和框架页面都在同一个域中，则可以跨脚本。如果它们在不同的域上，大多数浏览器都会限制这一点。

# jquery - MVC JavaScriptSerializer 反序列化 json

> ID：12809691
> 
> 赞同：1
> 
> 时间：2012-10-09T23:06:32.650
> 
> 标签：jquery, asp.net-mvc, json, deserialization

我有以下 jquery -

```
var items = new Array();
   items.push({
    "Item1":$("myvalue").val(),
    "Item2":$("myvalue2").val()
});

    ....

    data: {
           'items':  JSON.stringify(items) 
          },
    .... 
```

使用以下反序列化代码 -

```
var js = new JavaScriptSerializer();
var myobj = js.Deserialize<JsonModel>(items); 
```

到以下对象 -

```
public class JsonModel
{
    public string Item1 { get; set; }
    public string Item2 { get; set; }
} 
```

这是返回给我的控制器的 json 字符串

```
[{\"Item1\":\"1|2|3|5\",\"Item2\":\"1\"}] 
```

这是行不通的。当我运行这段代码时，我得到了一个空对象。但是，如果我对 json 字符串进行替换并删除 [ 和 ]，它将使用正确的数据反序列化。

我是否处理不正确 - 我想反序列化到我的对象而不必修改 json 字符串。

任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T00:28:32.453

`JSON.stringify(items)`将序列化为一个数组，因为`items`是一个数组。您可能想要的是：

```
var jsonModel = {
  "Item1":$("myvalue").val(),      
  "Item2":$("myvalue2").val()      
};

....

{
    'items': JSON.stringify(jsonModel)
} 
```

我在这里所做的一切都没有使用`items`数组。

唯一需要注意的是，如果您确实想要将这些对象的数组发送回您的控制器。如果是这种情况，您的反序列化代码将需要看起来像

```
js.Deserialize<IEnumerable<JsonModel>>(items); 
```

当然，您需要像以前一样发回一个序列化数组。

# html - 圣杯, how to no-scalable?

Maybe someone can give me a hint, how to create non-scaleable textareas?

I tryed the usual stuff like :

```
<g:textarea name="t</h1>
<blockquote>
        <p>ID：12809692</p>
        <p>赞同：2</p>
        <p>时间：2012-10-09T23:06:38.180</p>
        <p>标签：html, css, grails, textarea</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：3</p>
            <p>时间：2012-10-10T02:18:44.263</p>
            </blockquote>

<p>你没有任何身份证。所以试试：</p>

<pre><code><g:textArea name=" tumble"="" id="tumble" value="myVtumble" rows="2" cols="2" &gt;="" <="" code=""></g:textarea>
```

 `或者

```
<style>
textarea[name='tumble'] { 
   resize: none; 
} 
</style> 
````

# python - 如何将defaultdict中的每个计数相加？

> ID：12809694
> 
> 赞同：2
> 
> 时间：2012-10-09T23:06:46.363
> 
> 标签：python

这是我必须计算文档中每个单词的内容：

```
from collections import defaultdict
word_dict=defaultdict(int)

def count_words(newstring):
    words=newstring.lower().split()
    for word in words:
        word_dict[word]+=1 
```

当我打印`word_dict`时，我得到以下结果：

```
defaultdict(<type 'int'>, {'rate': 1, 'babo-free': 1, 'risk': 3, 'interest': 1}) 
```

我需要添加每个计数，以便`total_count`变量应该等于 6。

我想这对你们中的许多人来说可能太容易了，但作为一个初学者，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T23:13:58.153

您可以像使用任何字典一样执行此操作：

```
>>> d = {'a': 1, 'b': 1, 'c': 3, 'd': 4}
>>> sum(d.values())
9 
```

在 Python 2.* 中，您还可以使用

```
>>> sum(d.itervalues())
9 
```

这不会创建新列表，但坦率地说，您的列表不太可能长到足以成为瓶颈。工作`defaultdict`方式相同：

```
>>> from collections import defaultdict
>>> d2 = defaultdict(int)
>>> d2.update(d)
>>> d2
defaultdict(<type 'int'>, {'a': 1, 'c': 3, 'b': 1, 'd': 4})
>>> sum(d2.values())
9 
```

顺便说一句，在 Python 2.7+ 中，还有一个方便的`Counter`对象：

```
>>> from collections import Counter
>>> Counter("a b A B B c".lower().split())
Counter({'b': 3, 'a': 2, 'c': 1})
>>> Counter("a b A B B c".lower().split()).most_common()
[('b', 3), ('a', 2), ('c', 1)]
>>> sum(Counter("a b A B B c".lower().split()).values())
6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:13:44.440

使用`iteritems`您可以获得键值对列表。有了它，您可以使用 for 循环将数字相加。

例如

```
sum = 0
for k,v in d.iteritems():
    sum += v 
```

# java - 空字符串的 JDK 常量

> ID：12809695
> 
> 赞同：4
> 
> 时间：2012-10-09T23:07:04.400
> 
> 标签：java

> **可能重复：**
> [为什么java中没有String.Empty？](https://stackoverflow.com/questions/3450604/why-is-there-no-string-empty-in-java)

是否有用于空字符串的 JDK 常量，例如 String.EMPTY，等于“”？我似乎找不到它。我更喜欢使用它而不是“”。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T23:10:02.010

不，没有。但是由于整个世界（嗯，几乎）都在使用 Jakarta Commons-Lang，所以你也可以。使用`StringUtils.EMPTY`：[http ://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#EMPTY](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#EMPTY)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T23:09:29.340

有什么问题`""`？它的行为就像一个常量，它取自字符串池，写起来真的很短，比`String.EMPTY`.

此外，如果您需要测试字符串是否为空，只需执行以下操作：

```
myString.isEmpty(); 
```

**更新**

[`isEmpty()`](https://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#isEmpty%28java.lang.String%29)如果字符串可以为空，最好使用[`isNotBlank()`](https://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#isNotBlank%28java.lang.String%29)Apache Common 的[StringUtils](https://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html)类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T23:10:04.863

Apache Commons 完全符合您的要求。它有一个名为 StringUtils.EMPTY 的常量。如果你想看看，这里是图书馆的链接： http: [//commons.apache.org/lang/](http://commons.apache.org/lang/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T23:20:44.580

其他人已经指出了 .isEmpty() 函数，所以我会更进一步。我想知道一个字符串是 Null 还是 Empty 还是 Whitespace（即空格和/或制表符）。所以我写了自己的方法来做到这一点。

```
//Check to see if a string is null or empty
public static boolean stringIsNullOrEmpty(String s)
{
    return (s == null) || (s.isEmpty());
}

//Check to see if a string is null or empty or whitespace
public static boolean stringIsNullOrWhiteSpace(String s)
{
    return (s == null) || (s.trim().isEmpty());
} 
```

要使用这些，你会做类似的事情

```
String myString = "whatever";

if(stringIsNullOrWhiteSpace(myString))
{
    doSomething();
} 
```

祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-09T23:09:22.640

我所知道的默认 JDK 中没有任何内容。您可能需要定义自己的常量，或导入具有常量的第三方库。

如果您的意图是检查空字符串，您可以尝试以下操作。

`YOUSTRING.isEmpty();`

但是请注意， isEmpty 不是 Null 安全的，并且并非在所有版本的 JDK 中。

为了安全起见，请使用`"".equals(YOURSTRING);`

但是，每次执行此操作时都会将空字符串添加到 HEAP 中。因此最好指向一个`public static final` 常数，这样堆上就只有一个。

# python - 从字典中的列表中删除项目

> ID：12809698
> 
> 赞同：1
> 
> 时间：2012-10-09T23:07:15.877
> 
> 标签：python, list, dictionary

我有两本词典。例如：

```
dict_a = {'verbs': ['run', 'go', 'eat'], 'nouns':['dog', 'cat', 'bear']}

dict_b = {'verbs': ['jump'], 'nouns': ['human']} 
```

我编写了一个函数，它可以从 dict_b 中获取每个列表中的所有项目，并将它们放在 dict_a 中的适当位置。（即，dict_b 'verbs' 将进入 dict_a 'verbs' 等......）

但是，如果它们在 dict_a 中，我还需要编写一个函数来从 dict_b 中取出这些相同的单词，但我有点迷路了。我已经写了一些东西，但它们都没有奏效。我不指望任何人为我做这项工作，但如果有人有提示给......那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:41:57.043

如果动词/名词的顺序不重要，最好使用集合代替您的列表

```
>>> dict_a = {'verbs': {'run', 'go', 'eat'}, 'nouns':{'dog', 'cat', 'bear'}}
>>> dict_b = {'verbs': {'jump'}, 'nouns': {'human'}}
>>> for k in dict_a:
...  dict_a[k] |= dict_b[k]
... 
>>> dict_a
{'verbs': set(['go', 'jump', 'run', 'eat']), 'nouns': set(['human', 'dog', 'bear', 'cat'])} 
```

我不太清楚你问题的第二部分是什么，但很容易从另一个集合中删除元素

```
>>> for k in dict_a:
...  dict_a[k] -= dict_b[k]
... 
>>> dict_a
{'verbs': set(['go', 'run', 'eat']), 'nouns': set(['dog', 'bear', 'cat'])} 
```

IE。回到原来的`dict_a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:57:25.960

```
dict_a = {'verbs': ['run', 'go', 'eat'], 'nouns':['dog', 'cat', 'bear']}
dict_b = {'verbs': ['jump'], 'nouns': ['human']}

def foo(dict_a, dict_b):
  for k,v in dict_b.iteritems():
    for word in v[:]:
      if word in dict_a.get(k, []):
        dict_b[k].remove(word) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:06:24.747

首先，您可以使用*dict 理解*来合并两个字典：

```
{key:dict_a[key] + dict_b[key] for key in dict_b if dict_a.has_key(key)} 
```

或者，没有 dict 理解：

```
for key in dict_b:
    if dict_a.has_key(key):
        dict_a[key] += dict_b[key] 
```

从`dict_b`字典中删除项目很容易：

```
for key in dict_a:
    if dict_b.has_key(key):
        del dict_b[key] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T23:10:33.677

> list.remove(x)
> 
> 从列表中删除值为 x 的第一项。如果没有这样的项目是错误的。

从 Python 文档，[这里](http://docs.python.org/tutorial/datastructures.html). 可能就够了，如果没有，我再补充一点！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T23:18:11.640

您可以使用`pop`, 从列表中删除检查的元素。

虽然我可以建议：

```
dict_a['verbs'] = dict_a['verbs'] + dict_b['verbs']
dict_a['nouns'] = dict_a['nouns'] + dict_b['nouns'] 
```

.

另一种可能更可取的选择是映射另一种方式（然后你可以`update`）：

```
dict_c = {'run': 'verb', 'cat': 'noun',...}
dict_c = {'jump':'verb', 'human':'noun'}
dict_c.update(dict_d) 
```

# php - 以 php foreach 和 sql group by 为标题

> ID：12809701
> 
> 赞同：0
> 
> 时间：2012-10-09T23:07:23.967
> 
> 标签：php, mysql

我不知道如果没有第二个 sql 查询这是否可能，但我认为最好先问一下。

我有一个带有 GROUP BY 子句的 SQL 查询。在 foreach 循环中显示结果，我想为每个条件插入一个标题。是否可以只处理一个查询？

IE。

仅限非洗手间

```
DATA
DATA
DATA 
```

仅限酒吧间

```
DATA
DATA
DATA 
```

SQL 代码：

```
SELECT 
      `Keg`.`content_type_id`, `Keg`.`is_taproom_only`, count(content_type_id), `ContentType`.`id`, `ContentType`.`name`     
FROM 
      `kegdb`.`kegs` AS `Keg` 
LEFT JOIN
      `kegdb`.`content_types` AS `ContentType` 
      ON (`Keg`.`content_type_id` = `ContentType`.`id`) 
WHERE 
       `status_type_id` = 6     
GROUP BY 
      is_taproom_only, content_type_id 
ORDER BY 
      `is_taproom_only` ASC, `ContentType`.`name` ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:16:35.603

所以，假设您的数据将是*这样*的：

```
is_taproom_only, content_type_id, content_type_name
-----------------------
NonTaproom, content_type_id, content_type_name
NonTaproom, content_type_id, content_type_name
NonTaproom, content_type_id, content_type_name
TaproomOnly, content_type_id, content_type_name
TaproomOnly, content_type_id, content_type_name
TaproomOnly, content_type_id, content_type_name 
```

您可以（如air4x在上面的评论中所说）使用变量来存储标题，并在循环结果时，仅在标题与先前存储的标题不同时才打印标题。

注意：这种方法仅在您的结果按标题值排序时才有效（我可以看到它们是）。

PHP 代码将如下所示：

```
$is_taproom_only = '';

foreach $rows as $row {

    echo ($is_taproom_only <> $row['is_taproom_only']) ? $row['is_taproom_only'] : ''; //only print if they're different
    $is_taproom_only = $row['is_taproom_only']; //store for the next iteration

    //print other data
    echo $row['content_type_id'];
    echo $row['content_type_name'];

} 
```

# javascript - 如何让 (Android) 上的 Google Chrome 与 JQM 一起使用？我无法让 Google Chrome（移动）浏览器向下滚动页面

> ID：12809703
> 
> 赞同：1
> 
> 时间：2012-10-09T23:07:37.290
> 
> 标签：javascript, jquery, firefox, google-chrome, jquery-mobile

基本上，我使用 Jquery Mobile 开发了一个 web 应用程序，但在我的 Android 手机上的 google chrome 上查看这个 web 应用程序时遇到了问题。出于某种原因，我可以单击按钮，但是当我转到必须向下滚动才能查看数据的页面时，谷歌浏览器拒绝滚动。但是，当我在 Firefox 上测试这个应用程序时，我没有这个问题，有人有什么想法吗？任何事情都将不胜感激！

我的网络应用程序的链接是[http://testgroundwebapp.appspot.com](http://testgroundwebapp.appspot.com)

# php - 为什么我的 PHP mail() 函数不发送换行符？

> ID：12809705
> 
> 赞同：-1
> 
> 时间：2012-10-09T23:07:44.510
> 
> 标签：php

这是脚本：

```
<?php

    $name = $_POST["name"];
    $email = $_POST["email"];
    $message = $_POST["message"];

    $recipient = "me@christianselig.com";
    $subject = "Message From Website";
    $body = "[From: " . $name . "]\r\n\r\n" . $message;
    $headers = "From: " . $email . "\r\n";
    $headers .= "Content-type: text/html; charset=UTF-8" . "\r\n";

    $success = mail($recipient, $subject, $body, $headers);

    echo $success;

?> 
```

在此页面上：christianselig.com/contact.html

我的消息将在没有任何换行符的情况下发送。我将其设置为使用双换行符将 [From: xxx] 部分与消息分开，所以它应该如下所示：

> [来自：约翰]
> 
> 嘿。

但事实并非如此。

如果我将消息设为多行，它也会将它们连接到一行。如何防止这种行为？我的代码曾经允许它，但我以某种方式破坏了它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:10:35.527

因为您使用 html 格式发送它。尝试：

```
$body = nl2br("[From: " . $name . "]\r\n\r\n" . $message); 
```

# imap - 具有多个 OR 的 IMAP 标准

> ID：12809709
> 
> 赞同：6
> 
> 时间：2012-10-09T23:08:09.263
> 
> 标签：imap, gmail-imap

我正在使用 gmail 的 IMAP API 来搜索邮件。

我使用“OR”标准来搜索不同的关键字。如果我只去一个级别，这很有效，即类似

```
'UID SEARCH OR (FROM "somebody@email.com") (TO "somebody@email.com")' 
```

但是，当我尝试更长的表达式时它不起作用

标准或标准或标准或标准

转换为（据我理解的语法）

```
'UID SEARCH OR ( OR (FROM "somebodyelse@email.com") (TO "somebodyelse@email.com")) ( OR (FROM "somebody@email.com") (TO "somebody@email.com"))' 
```

为了清楚起见，我基本上想要从给定电子邮件列表中发送或发送到任何给定电子邮件列表的所有消息

我从图书馆得到的错误是

```
[ 'A34', 'BAD', 'Could', 'not', 'parse', 'command' ] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T12:42:40.283

不要使用括号。

IMAP 使用不需要它们的波兰符号：

```
UID SEARCH OR OR FROM one@mail.com TO one@mail.com OR FROM two@mail.com TO two@mail.com 
```

在某些情况下需要括号（因为 IMAP AND 运算符可以采用 2 个以上的操作数）： [https ://www.limilabs.com/blog/imap-search-requires-parentheses](https://www.limilabs.com/blog/imap-search-requires-parentheses)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-13T14:34:45.563

因此，如果您有 N 个要一起“或”的表达式，则可以在这 N 个表达式前加上 N-1 个“OR”。

例如，在 Perl 中，这将是：

```
$search = join " ", ("OR") x (@exprs - 1), @exprs; 
```

# c - 具有不同数据类型的 memcpy()

> ID：12809718
> 
> 赞同：-1
> 
> 时间：2012-10-09T23:09:34.070
> 
> 标签：c, arrays, malloc, memcpy

试图将 A 复制到 B....

```
char *A;
double *B;
unsigned int size = 1024;

A = malloc (size*size * sizeof (char));
B = malloc (size*size * sizeof (double));
//fill A here

memcpy (B, &A[0], (size*size * sizeof (char))); 
```

B 中的打印值与 A 中的不匹配。

怎么了？

谢谢你的帮助！

编辑：重点是测试 memcpy 函数相对于 L2 缓存大小的速度。我只是想确保上面的代码实际上是将所有 A 复制到 B 中。很抱歉省略了这些信息：我只是尽量让它尽可能简单（这次走得太远了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:22:48.827

很难准确地说出您要做什么。

你是如何打印值的？打印例程`printf`也取决于类型。

听起来您只想获取浮点输入值。这可以使用[scanf 系列](http://linux.die.net/man/3/scanf)来完成。

```
int num_floats = 10;

double* B = malloc (num_floats * sizeof (double));

int count;

for (count = 0; count < num_floats; count++)
{
    printf("Insert float %d: ", count);
    scanf("%f", &B[num_floats]);
}

for (count = 0; count < num_floats; count++)
{
    printf("Float %d: %f", B[num_floats]);
}

free(B); 
```

如果您尝试将 C 字符串从转换`char *`为浮点数并且不想使用`sscanf`，您也可以使用[atof](http://linux.die.net/man/3/atof)。

```
const char* num_str = "1.01";
double num = atof(num_str); 
```

# php - PHP 到 Quickbooks - 如果她在桌面上运行，我如何连接两者？

> ID：12809721
> 
> 赞同：5
> 
> 时间：2012-10-09T23:09:55.043
> 
> 标签：php, e-commerce, quickbooks

我的任务是为小型本地企业提供电子商务解决方案。我的客户使用 Intuit/Quickbooks 销售点软件。我刚刚发现 Intuit 有一系列允许互操作性的 PHP 5+ 类（对于可能偶然发现此问题的任何其他人的链接：[https](https://code.intuit.com/sf/sfmain/do/viewProject/projects.php_devkit) ://code.intuit.com/sf/sfmain/do/viewProject/projects.php_devkit ）。

该网站将托管在共享主机上，因此这两个系统实际上是分开的。她的桌面确实可以访问互联网。

所以，我的问题：

1.  有没有办法让我通过 curl 连接到她的桌面？
2.  如果是这样，如果我无法在我的主机上创建 VPN，是否有办法让我安全地做到这一点？
3.  现在我想起来了，有没有可以使用的 VPN 服务？
4.  我应该注意的任何其他安全事项？

付款处理将通过 Stripe ( [http://www.stripe.com](http://www.stripe.com) ) 处理。这实际上仅用于库存/订单同步。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:33:47.983

您最好的选择是 QuickBooks Web 连接器，以及您提到的那组 PHP 类。请参阅下面的具体评论：

> 我刚刚发现 Intuit 有一系列允许互操作性的 PHP 5+ 类（对于可能偶然发现此问题的任何其他人的链接：[https](https://code.intuit.com/sf/sfmain/do/viewProject/projects.php_devkit) ://code.intuit.com/sf/sfmain/do/viewProject/projects.php_devkit ）。

值得注意的是，该库不是由 Intuit 开发的（免责声明 - 我是该库的开发人员）。Intuit 托管我们的 Subversion 存储库，但我们是一家独立的公司，并且 Intuit 不参与实际的 PHP 代码。Intuit 仅提供基于 Windows COM 的 API，我们提供实际的 PHP 组件，因此您可以通过 Web 连接器从远程服务器与 QuickBooks 对话，而无需使用 COM。

我们有大量关于[QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks)的信息，这些信息可能会有所帮助 - 特别是[QuickBooks 与 PHP 的集成部分](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_php)和[QuickBooks Web 连接器的概述](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_web_connector)。

考虑从您发布的链接中获取最新的夜间构建，并查看此文件：* docs/example_web_connector_point_of_sale.php

它说明了 PHP 和 QuickBooks 销售点之间的数据交换。

> 该网站将托管在共享主机上，因此这两个系统实际上是分开的。她的桌面确实可以访问互联网。

这个^^^很好，典型的场景。这正是 Web 连接器的设计目的。Web 连接器本质上充当 PHP SOAP 服务和 QuickBooks 本身之间的“哑代理” - 它通过 HTTP(S) 将来自 PHP 应用程序的消息中继到 QuickBooks。

> 有没有办法让我通过 curl 连接到她的桌面？

没有 Curl，不（虽然你可以建造一个......但为什么要重新发明轮子？）。Web 连接器是基于 SOAP 的，但您的 PHP 组件将是 SOAP 服务器的一半，而不是 SOAP 客户端的一半。

> 如果是这样，如果我无法在我的主机上创建 VPN，是否有办法让我安全地做到这一点？

Web 连接器可以通过 HTTPS 使用 SSL 来保证数据在网络上传输时的安全。

> 现在我想起来了，有没有可以使用的 VPN 服务？

只需购买 SSL 证书，就更容易了。:-)

> 我应该注意的任何其他安全事项？

不超出您可以在 Stackoverflow 其他地方找到的典型 Web 应用程序安全指南。

> 如果您要同步到 Quickbooks 之类的系统，请不要实时进行，而是在批处理过程中进行，这样可以应对她的桌面被关闭、糟糕的办公室互联网（与数据中心相比）等情况有弹性变慢或减速等

这个 ^^^ 是很好的建议，并且正是 Web 连接器的工作原理。

> 如果你需要实时，在桌面上运行的 Quickbooks 不是你要走的路。

事实上，如果你需要实时性，QuickBooks*时期*并不是要走的路。QuickBooks 是一款出色的中小型企业会计软件……但速度慢且不够可靠，无法进行一致的实时通信。话虽如此……你所说的*不需要*实时通信，所以这不应该打扰你。

> 批处理订单不是问题，但我如何才能使批处理具有弹性？

PHP 代码使用带有状态的队列，因此您可以跟踪已处理的内容、未处理的内容以及从 QuickBooks 返回的内容作为响应（“成功添加客户！”与“糟糕，添加客户失败因为 ...”），QuickBooks 抛出的错误消息等等，然后用您的代码或手动做出适当的反应。

您不需要 cron - 可以安排 Web 连接器运行，它会将所有错误和大量其他信息转发给您，以便您可以处理错误、发送警告、构建报告以向人们展示失败/成功等

# java - 如何使用 SAXParser 解析 XML 文件并使用 Java 将其转换为节点列表

> ID：12809725
> 
> 赞同：0
> 
> 时间：2012-10-09T23:10:06.570
> 
> 标签：java, parsing, saxparser

我是 SAXParser 的新手，所以请原谅我。

如何解析任何 XML 文件并将其转换为`List<XNode>`？下面是类 XNode 的结构：

```
class XNode{

    private String nodeName;
    private String nodeValue;
    private List<XAttribute> attributes;
    private boolean isParentNode;
    private List<XNode> childNodes;
} 
```

还有XAttribute的结构：

```
class XAttribute{

    private String name;
    private String value;
} 
```

通过解析任何文件，它应该返回 List 对象。

到目前为止，我已经尝试了下面的代码，但不知道如何检查和附加 childNodes。

```
public class XmlProcesser extends DefaultHandler {
    XMLResponse xmlResponse = null;
    boolean endtag = false;

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        System.out.print("" + qName + "");
        if (attributes.getLength() == 0) {
        } else {
            for (int index = 0; index < attributes.getLength(); index++) {
                System.out.print(attributes.getLocalName(index) + " =  " + attributes.getValue(index));
            }
        }
    }

    @Override
    public void characters(char ch[], int start, int length) throws SAXException {
        String s = new String(ch, start, length);
        System.out.println(s);
        endtag = false;
    }

    @Override
    public void endElement(String uri, String localName,
            String qName) throws SAXException {
        endtag = true;
        System.out.print("  " + qName + "  ");

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:37:24.697

一种常用的方法是使用`Stack`当前节点的 a 和 a 概念。当您遇到 a`startElement`时，请执行以下操作

1.  创建一个新元素`child`
2.  将此`child`元素添加到`current`元素
3.  将`current`元素压入栈中
4.  使`child`元素成为新`current`元素。

当你遇到`endElement`你做相反的事情：

1.  从 中弹出顶部元素`stack`并再次制作该`current`元素。

堆栈的底部是`root`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:21:07.003

```
Pop the top element from the stack and make the current element again.

Pop the top element from the stack and make the current element again.

Pop the top element from the stack and make the current element again.

Pop the top element from the stack and make the current element again. 
```

# ruby-on-rails - 如何在 Rails 视图中显示交互式代码？

> ID：12809726
> 
> 赞同：0
> 
> 时间：2012-10-09T23:10:10.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3

代码本身将是红宝石。想法是使其对用户具有交互性。例如，代码要求：

你叫什么名字？
用户输入“约翰”
嗨约翰！

我知道我可以做到<%...%>。我想在一个单独的 ruby​​.rb 文件中制作它，该文件将通过新模板中的表单“上传”。在显示模板中将显示代码的结果。这种交互性的任何宝石？
期待
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:32:23.927

这是*非常*糟糕的做法，不应该*在*没有清理输入的情况下使用，但是 Ruby 有一个[`eval`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)声明。向它传递一个字符串（例如您的表单发布的参数），它会将该字符串评估为 Ruby 并返回结果。

```
x = 5
eval "x / 2.5"
=> 2.0 
```

如果您希望上传一个 .rb 文件，您可以[读取该文件](https://stackoverflow.com/questions/7157207/how-can-i-read-file-with-ruby)并将内容传递给`eval`.

但请记住，将所有输入视为敌对。

# java - Spring 3.1 和 Jackson：在验证之前合并数据库实体和未编组的参数

> ID：12809730
> 
> 赞同：0
> 
> 时间：2012-10-09T23:10:29.333
> 
> 标签：java, spring-mvc, jackson, spring-3

据我了解，当杰克逊解组一个对象时，请求调用中未提及的字段将设置为默认值（如果是对象，则为 null），并且如果对该特定字段有约束，例如 @NotNull，则验证失败. 因此无法进行部分更新。

有谁知道最好的解决方法是什么（REST 中的部分更新）？以前有没有人实施过这样的事情？

我的直觉是，必须合并原始对象（来自 db）和新的未编组对象，然后该对象应该得到验证，但真的不知道如何实现这一点。任何其他想法将不胜感激。

我正在使用 Spring 3.1.2 和 Jackson 1.9.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:02:00.083

您可以使用自省将自己的未编组对象与数据库中的现有对象合并。

```
import java.beans.Introspector;
...

Class<?> entityClass = YourEntity.class

// oldEntity is from database
oldEntity = entityManager.getReference(entityclass, id);

for (PropertyDescriptor property : Introspector.getBeanInfo(entityClass).getPropertyDescriptors()) {
    if (property.getReadMethod() != null && property.getWriteMethod() != null) {

        // You retrieve the value of the current property of your unmarshalled entity
        Object newValue = property.getReadMethod().invoke(unmarshalledEntity);

        if (value != null) {
            property.getWriteMethod().invoke(oldEntity, newValue);
        }
    }
} 
```

但是使用此解决方案，您无法将字段更新为`null`......这可能是一个问题。这只是一个想法，您应该注意 的类型`value`，它可能是另一个 bean，因此您必须递归地自省您的数据。

# php - 我在 $_POST 方法上收到一个未定义的错误

> ID：12809736
> 
> 赞同：0
> 
> 时间：2012-10-09T23:10:53.710
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

这很奇怪，但我正在使用下面的 $_POST 方法发布输入：

```
$c = count($_POST['gridValues']); 
```

但问题是我收到一条错误消息：

> 注意：未定义的索引：第 40 行 /web/stud/..../ 中的 gridValues（即上面的行）

为什么我会收到此错误，因为 $_POST 方法绝对正确？

下面是整个代码：

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

 ini_set('display_errors',1); 
 error_reporting(E_ALL);

session_start();

?>

$i = 0;
$c = count($_POST['gridValues']);

for($i = 0;  $i < $c; $i++ ){

    switch ($_POST['gridValues'][$i]){

 case "3": 
    $selected_option = "A-C";
    break;

    case "4": 
    $selected_option = "A-D";
    break;

    case "5": 
    $selected_option = "A-E";
    break;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:12:16.670

您需要先检查它是否已设置：

```
<?php

if(isset($_POST['gridValues'])) {
   $c = count($_POST['gridValues']);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:21:48.747

有几种方法可以防止关于未定义变量的通知级别消息。

1.  **将 @ 放在变量前面**。例如：`$c = @$_POST['gridValues']`这可能很危险，因为您明确告诉它忽略变量的任何问题。有关 @ 的更多信息，请参阅 PHP 手册：http: [//php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)

2.  **关闭（或更改）错误报告**。前任：`ini_set('display_errors', 0);`

3.  **在使用之前检查变量是否已定义**。前任：

    ```
    $c = '';
    if(!empty($_POST['gridValues'])){
        $c = count($_POST['gridValues']);
    } 
    ```

# lifecycle - Android Application类方法onCreate被多次调用

> ID：12809737
> 
> 赞同：15
> 
> 时间：2012-10-09T23:10:53.443
> 
> 标签：lifecycle, acra, android

我已经在我的 android 应用程序中重载了 Application 类，并且我正在使用[ACRA](http://code.google.com/p/acra/)报告系统。我的应用看起来像（[这里是真正的源代码](https://github.com/evilsocket/dsploit/blob/master/src/it/evilsocket/dsploit/DSploitApplication.java)）：

```
public class MyApplication extends Application 
{
    @Override
    public void onCreate() {        
        ACRA.init( this );

        /*
         * Initialize my singletons etc
         * ...
         * ...
         */
        super.onCreate();
    }
} 
```

据我所知，Application 对象应该只创建一次，所以 onCreate 方法应该只调用一次。问题是，在我的崩溃报告中（来自 ACRA）我有这个：

```
java.lang.RuntimeException: Unable to create service it.evilsocket.myapp.net.N ...
java.lang.RuntimeException: Unable to create service it.evilsocket.myapp.net.NetworkMonitorService: java.lang.RuntimeException: Unable to create application it.evilsocket.myapp.MyApplication: **java.lang.IllegalStateException: ACRA#init called more than once**
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2283)
    at android.app.ActivityThread.access$1600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1212)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4441)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Unable to create application it.evilsocket.myapp.MyApplication: java.lang.IllegalStateException: ACRA#init called more than once
    at android.app.LoadedApk.makeApplication(LoadedApk.java:495)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2269)
    ... 10 more
Caused by: java.lang.IllegalStateException: ACRA#init called more than once
    at org.acra.ACRA.init(ACRA.java:118)
    at it.evilsocket.myapp.MyApplication.onCreate(MyApplication.java:46)
    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
    at android.app.LoadedApk.makeApplication(LoadedApk.java:492)
    ... 11 more
java.lang.RuntimeException: Unable to create application it.evilsocket.myapp.MyApplication: java.lang.IllegalStateException: ACRA#init called more than once
    at android.app.LoadedApk.makeApplication(LoadedApk.java:495)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2269)
    at android.app.ActivityThread.access$1600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1212)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4441)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: ACRA#init called more than once
    at org.acra.ACRA.init(ACRA.java:118)
    at it.evilsocket.myapp.MyApplication.onCreate(MyApplication.java:46)
    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
    at android.app.LoadedApk.makeApplication(LoadedApk.java:492)
    ... 11 more
java.lang.IllegalStateException: ACRA#init called more than once
    at org.acra.ACRA.init(ACRA.java:118)
    at it.evilsocket.myapp.MyApplication.onCreate(MyApplication.java:46)
    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
    at android.app.LoadedApk.makeApplication(LoadedApk.java:492)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2269)
    at android.app.ActivityThread.access$1600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1212)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4441)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method) 
```

所以看起来应用程序 onCreate 被多次调用，对此有什么想法吗？

**笔记：**

*   在我的 android xml 清单中，我没有**使用**android:process="string" 属性。
*   是的，**我确信**在我的初始化例程中我**不会**意外调用 MyApplication.onCreate 。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-16T09:59:20.367

我认为您的申请中有额外的流程。这就是 Application.onCreate 被多次调用的原因。查看您的清单文件并尝试使用类似**android:process=**的内容查找活动或服务。这意味着活动/服务正在第二个 Dalvik VM 中启动，这就是创建另一个应用程序实例的原因。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T23:54:24.977

如果您查看堆栈跟踪，它看起来像是`ACRA.init`在调用`makeApplication`. 我怀疑有某种代码可以检查应用程序是否已经创建，如果没有，请创建它，并且它是由您调用`ACRA.init`before引起的`super.onCreate`。通常，在覆盖`onCreate`方法（无论是`Application`还是`Activity`）时，建议将其`super.onCreate`作为实现的第一行调用，然后再执行自定义操作。我会试一试，看看它是否能解决问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-25T17:18:33.700

我也在野外使用 ACRA 4.4.0 看到了这一点。

也许在 init 方法下像这样简单？

```
if (mApplication != null) {
    throw new IllegalStateException("ACRA#init called more than once");
    //(return or finish or gracefully exit somehow)       
} else {
    mApplication = app;
    //and then continue with rest of acra init... 
```

编辑：2012 年 12 月 27 日作为对此的跟进，凯文似乎已经采用了这些更改。详细信息在这里： [https ://github.com/ACRA/acra/commit/cda06f5b803a09e9e7cc7dafae2c65c8fa69b861](https://github.com/ACRA/acra/commit/cda06f5b803a09e9e7cc7dafae2c65c8fa69b861)

# android - 如何在 Alertdialog 上有文字和可点击的 URL 链接？

> ID：12809743
> 
> 赞同：4
> 
> 时间：2012-10-09T23:11:43.953
> 
> 标签：android, android-alertdialog

我阅读了示例代码并在下面尝试了一些方法，但它不起作用。该文本似乎不是超链接。请帮忙：（

```
String randomString = XXXX.getString();
        if(randomString .contains("XXXX"))
        {
            TextView tv  = new TextView(this);
            tv.setMovementMethod(LinkMovementMethod.getInstance());
            tv.setText(randomString +"/n"+Html.fromHtml("<a href=https://play.google.com/store/apps/details?id=com.xxxxxxxxx>Click Here</a>"));
            AlertDialog dialog = new AlertDialog.Builder(activity.this)
            .setView(tv)
            .setPositiveButton("OK!", new DialogInterface.OnClickListener()
            {

                public void onClick(DialogInterface dialog, int which)
                {

                }
            })
            .show();

        } 
```

编辑：这项工作：

```
tv.setText(Html.fromHtml("<br><a href=https://play.google.com/store/apps/details?id=com.xxxxxxxxx>Click Here</a>")); 
```

没有 `randomString+`

只要我把randomString+Html.fromHtml....“点击这里”变成常规文本

但我也想将 randomString 放在 textview 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:14:22.797

您的 URL 周围缺少引号。尝试：

```
Html.fromHtml("<a href='https://play.google.com/store/apps/details?id=com.xxxxxxxxx'>Click Here</a>") 
```

请注意 URL 周围的单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-28T13:10:28.623

```
AlertDialog.Builder builder1 = new AlertDialog.Builder(youractivity.this);

builder1.setMessage(Html.fromHtml("your message,<a href=\"http://www.google.com\">link</a>"));

builder1.setCancelable(false);
builder1.setPositiveButton("ok", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
    }
});

AlertDialog Alert1 = builder1.create();
Alert1 .show();
((TextView)Alert1.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T09:56:37.223

您需要以 HTML 样式使用 all

像这样

```
Html.fromHtml(
"<b>Hello</b><br>" +
"<a href='https://play.google.com/store/apps/details?id=com.xxxxxxxxx'>Click Here</a>"
) 
```

# javascript - Rails Facebook OAuth 弹出窗口 JS

> ID：12809750
> 
> 赞同：1
> 
> 时间：2012-10-09T23:13:01.503
> 
> 标签：javascript, ruby-on-rails

我在这里使用了 Chris Heald 的回答：“http://stackoverflow.com/questions/4491433/turn-omniauth-facebook-login-into-a-popup”，效果很好。

一个问题在于重定向。我正在使用 Devise 和 Oauth 进行 Facebook 登录 - 我希望在登录后关闭弹出窗口，并在登录/注册后将用户重定向到正确的页面。

出于某种原因，现在，在弹出窗口中加载了正确的路径，并且弹出窗口没有关闭。我想我错过了一些非常基本的东西。有任何想法吗？我是个彻头彻尾的JS新手！！

弹出窗口的 JS：

```
function popupCenter(url, width, height, name) {
    var left = (screen.width/2)-(width/2);
    var top = (screen.height/2)-(height/2);
    return window.open(url, name, "menubar=no,toolbar=no,status=no,width="+width+",height="+height+",toolbar=no,left="+left+",top="+top);
  }

  $("a.popup").click(function(e) {
    popupCenter($(this).attr("href"), $(this).attr("data-width"), $(this).attr("data-height"), "authPopup");
    e.stopPropagation(); return false;
}); 
```

用于重定向的 JS：

```
if(window.opener) {
    window.opener.location = <%= after_sign_in_path %>;
    window.close()
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:57:24.317

您确定您的 after_sign_in_path 在引号中吗？你可能想试试这个：

```
window.opener.location = "<%= after_sign_in_path %>" 
```

我怀疑窗口没有关闭，因为在执行该行之前存在 javascript 错误。

# python - 通过python输入一个列表到html

> ID：12809751
> 
> 赞同：-2
> 
> 时间：2012-10-09T23:13:05.667
> 
> 标签：python, html, list

我有一个包含九个数字的列表，我想将它们放入一个 html 中，例如 aList = [1,2,3,4,5,6,7,8,9]。所以在python中我想输入类似这样的东西 myPage.write("aList[0],aList[1],aList[2],blablabla") 显然它不起作用......那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:17:26.617

您是否正在寻找类似的东西：

**注意**：这尚未经过测试。

```
def listToHTML(list):
    str = "<ul>"
    for elem in list:
        str += "<li>" + str(elem) + "</li>"
    str += "</ul>"
    return str 
```

# file - 在 ParaView 中显示高程网格

> ID：12809758
> 
> 赞同：2
> 
> 时间：2012-10-09T23:14:13.950
> 
> 标签：file, grid, format, elevation, paraview

我是 ParaView 的新手，完全迷失了所有不同的数据格式。我要做的就是显示一个由程序生成的高程网格。我将高程网格存储在一个二维浮点数组中，该数组由坐标索引`x`并`y`存储`z`坐标。换句话说`elevationGrid[x][y]`，存储点 (x, y) 上方的高度。

我应该使用哪种文件格式以及它是如何定义的？如果有人可以提供一个示例文件，例如 3x3 网格，那将是理想的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T13:44:05.697

第一种方法采用 5x5 网格和方程 z = x^2+y^2，使用非常简单的输入格式。这是一种通用方法，并不特别适用于结构化网格。Paraview 3.14.1 已完成以下工作。

### 1）以csv格式保存您的数据，即：

```
"x","y","z"
-0.5,-0.5,0.5
-0.30000001,-0.5,0.34000001
-0.1,-0.5,0.26
[...]
0.1,0.5,0.26
0.30000001,0.5,0.34000001
0.5,0.5,0.5 
```

### 2) 在 Paraview 中打开您的 csv 文件

填写所需的导入选项。

### 3）将您的表格转换为几何点

将过滤器 > 按字母顺序 > 表格应用于点

您将被要求为每个坐标提供每个变量。

### 4) 显示 3D 视图以查看您的观点

创建一个新的可视化视图（添加一个新选项卡）并选择“3D 视图”。激活您的 TableToPoints 过滤器，单击管道中其名称附近的小眼睛。

如果一切正常，此时您将看到散点图。

### 5）最后一步：创建表面

应用过滤器 > 按字母顺序 > Delaunay 2D

并使用默认选项，最终获得：

![elevation](../Images/e9668ce0dc541ddf7f7682ccc4eff2c3.png)

**编辑：**

I remember the name of the dedicated function to create elevation map... It is the ***Wrap by scalar*** function. You can combine it with some above steps to get more easily what you want. I could give you an example if necessary.

# c++ - LD_PRELOAD 与 boost 文件系统库

> ID：12809766
> 
> 赞同：3
> 
> 时间：2012-10-09T23:14:48.260
> 
> 标签：c++, c, linux, boost

我正在尝试拦截 Linux 中的开放系统调用。它适用于其他库，但不适用于 boost libboost_fileystem。这是我的代码（为了便于阅读而删除）。

```
#include <boost/filesystem/fstream.hpp>
#include <sys/stat.h>
#include <unistd.h>
#include <fcntl.h>
#include <dlfcn.h>
#include <stdarg.h>
#include <stdio.h>

using namespace std;
using namespace boost::filesystem;

typedef int (*open_func_type)(const char * pathname, int flags, ...);

int open(const char *path, int flags, ...)
{
  va_list arg;
  mode_t mode = 0;
  if (flags & O_CREAT)
    {
      va_start(arg, flags);
      mode = va_arg(arg, mode_t);
      va_end(arg);
    }

  //some stuff here
  open_func_type open_func = (open_func_type) dlsym(RTLD_NEXT, "open");
  return open_func(path, flags, mode);
}

int main()
{
   boost::filesystem::fstream build_path;
   build_path.open("/tmp/test.txt", ios::in);

   //other stuff
   return 0;
} 
```

我使用 gdb 逐步执行了代码，但没有调用我的开放实现。但是执行 strace 会显示正在调用的开放系统调用。如果我调用其他调用 open 的库函数，我会看到我的实现被调用。我在这里做错了什么？我正在与 boost 库动态链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:42:24.387

我花了一些时间来解决这个问题，发现内部 boost 调用 std::basic_filebuf open 反过来又调用 fopen。fopen 似乎在内核中调用 open 系统调用而不调用 open 库调用（如果有人能指出原因会很好）。我截获了 fopen 呼叫，现在可以正常工作。如果使用大文件支持，还需要实现fopen64。

# c# - Magento API 在成功登录时抛出异常

> ID：12809768
> 
> 赞同：2
> 
> 时间：2012-10-09T23:14:51.197
> 
> 标签：c#, api, magento, exception, soap

在 C# 中，当连接到 Magento API 时，它会在成功登录时抛出异常：

```
// connect to the first store
_magentoService = new MagentoService {Url = "http://store1.com/index.php/api/v2_soap"};
_magentoService.login(user1, password1);

// later on, connect to the second store (note the different url)
_magentoService = new MagentoService {Url = "http://store2.com/index.php/api/v2_soap"};
_magentoService.login(user2, password2); 
```

连接到第一家商店返回：

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Magento" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:loginResponse><loginReturn xsi:type="xsd:string">bec0144c8642f227e8fb3d032f40xxxx</loginReturn></ns1:loginResponse></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

这是成功登录所期望的确切响应。连接到第二个商店也会返回完全相同的结果，并且还会引发异常：

```
 System.Net.WebException was caught
  Message=The request failed with the error message:
  <?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Magento" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:loginResponse><loginReturn xsi:type="xsd:string">bec0144c8642f227e8fb3d032f40zzzz</loginReturn></ns1:loginResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>
  Source=System.Web.Services
  StackTrace:
       at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
       at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 
```

为什么登录成功后会抛出异常？第一个站点（成功）是 Magento v1.6，失败的商店是 Magento v1.7

我通过网络参考使用 Magento，login() 方法的生成代码如下。调用 this.Invoke 时发生异常：

```
[System.Web.Services.Protocols.SoapRpcMethodAttribute("urn:Mage_Api_Model_Server_V2_HandlerAction", RequestNamespace="urn:Magento", ResponseNamespace="urn:Magento")]
[return: System.Xml.Serialization.SoapElementAttribute("loginReturn")]
public string login(string username, string apiKey) {
    object[] results = this.Invoke("login", new object[] {
                username,
                apiKey});
    return ((string)(results[0]));
} 
```

# php - 如何使用脚本在本地创建网站图标？

> ID：12809772
> 
> 赞同：6
> 
> 时间：2012-10-09T23:15:29.107
> 
> 标签：php, imagemagick, gd, favicon

多年来，我一直在使用[http://tools.dynamicdrive.com/favicon/](http://tools.dynamicdrive.com/favicon/)来生成网站图标。在我什至不知道如何进行任何编码之前，我就开始使用它（我现在不太好）。我不介意使用该实用程序，因为图标总是看起来不错，但我希望能够在本地进行。

如何使用脚本在本地创建网站图标？不知何故使用 PHP，imagemagick / gd 或者可能从命令行啜饮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T23:27:48.153

您可以使用 imagemagik 转换。我从[这个网站](http://bergamini.org/computers/creating-favicon.ico-icon-files-with-imagemagick-convert.html)获取了这些命令。

首先制作一个主图像：

> `convert some_image.bmp -resize 256x256 -transparent white favicon-256.png`
> 
> 然后我们要为您想要包含在 .ico 文件中的每种尺寸制作图像。
> 
> `convert favicon-256.png -resize 16x16 favicon-16.png`
> 
> `convert favicon-256.png -resize 32x32 favicon-32.png`
> 
> `convert favicon-256.png -resize 64x64 favicon-64.png`
> 
> `convert favicon-256.png -resize 128x128 favicon-128.png`
> 
> 现在您要将它们捆绑到 .ico 文件中，我发现的技巧是将其设置为 256 色，否则将无法正常显示！
> 
> `convert favicon-16.png favicon-32.png favicon-64.png favicon-128.png favicon-256.png -colors 256 favicon.ico`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:36:06.073

ImageMagick 或 phpThumb 将为您执行此操作，但更简单的解决方案（仅需要 PHP 和 GD 库）是[https://github.com/chrisbliss18/php-ico](https://github.com/chrisbliss18/php-ico)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T19:18:28.820

看看这个脚本： [http ://bgallz.org/488/php-favicon-generator-script/](http://bgallz.org/488/php-favicon-generator-script/)

我使用 PHP 编写它以从 jpeg、gif 或 png 生成 favicon (.ico) 文件。正如上面的 ernie 所说，大多数浏览器现在都支持图标的图像文件。该脚本只是将文件的扩展名更改为“.ico”

正如我所拥有的：

```
// Rename image to .ico file
rename($filename,"./favicon/".$strip_ext.".ico"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-09T16:18:18.430

我为此创建了一个项目：[faviconbuild](https://theknowledgeaccelerator.com/faviconbuild/)。

我用两个简单的脚本构建了它（一个 .bat 用于 Windows，一个 .sh 用于 Unix、Mac 和 Windows，如果使用 Cygwin）。它依赖于[ImageMagick](http://www.imagemagick.org/script/index.php)，因此您可以为您的平台下载最新版本，或者从我包含在[发行版](https://github.com/matthewsanders/faviconbuild/releases)中的版本中获取。

我已经在[MIT 许可](https://github.com/matthewsanders/faviconbuild/blob/master/LICENSE)下发布了它，因此您可以随意将它用于商业或个人项目，或者简单地用作您自己脚本的灵感。

我目前在我自己的项目中使用它，如下所示：

```
./faviconbuild/faviconbuild.sh -i ./source.png 
```

您可以通过`-h`or`--help`选项获得可用命令的完整列表。

这将获取输入源图像并生成所有输出图像和多分辨率 .ico，以及您的网站所需的 html 标记。

还可以通过提供基于自定义文本的解析文件作为输入来自定义脚本。当前文件可以在[这里](https://github.com/matthewsanders/faviconbuild/blob/master/favinput.txt)的项目中找到。这使得脚本可以轻松地为所有平台上的任何项目扩展。

由于它托管在[github](https://github.com/matthewsanders/faviconbuild)上，因此我鼓励任何人为该项目做出贡献，即使只是提交功能请求。

我还发布了[一篇博客文章](https://theknowledgeaccelerator.com/2015/10/10/faviconbuild/)，介绍了开发过程并作为 bash/batch 的迷你教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T23:25:48.380

您真正需要做的就是将图像大小调整为 16x16 文件。虽然 ICO 格式曾经是标准格式，但现代浏览器可以处理[PNG、GIF 和 JPG（以及其他格式）](http://en.wikipedia.org/wiki/Favicon#File_format_support)。

通过谷歌搜索可以轻松找到调整大小的脚本，例如：

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-13T07:56:43.063

此脚本更新现有文件，您可能需要为您的项目更改它。删除“确认”行，或获取我的确认脚本以配合它。

警告：它将破坏`.png`当前目录中的任何文件。

```
#!/bin/bash -eu
# public domain, by Sam Watkins
echo "You need to run this from a directory containing only the png icons."
confirm "Are you in the icons directory?"
source=`readlink -f "$1"`
chmod -w $source
v convert "$source" -resize 512x512 -background white -alpha remove -alpha off tmp-512-white.png
v convert "$source" -resize 512x512 tmp-512.png
sizes="16 32 64 128 256"
favicons=
for W in $sizes; do
    F=favicon-${W}x$W.png
    v convert tmp-512.png -resize ${W}x$W $F
    favicons="$favicons $F"
done
v convert $favicons -colors 256 favicon.ico

for F in *.png; do
    case "$F" in
    favicon-*)
        ;;
    apple-touch-icon*)
        v convert tmp-512-white.png -resize `identify -format "%wx%h" "$F"` "$F"
        ;;
    *)
        v convert tmp-512.png -resize `identify -format "%wx%h" "$F"` "$F"
        ;;
    esac
done
rm -f tmp-512-white.png tmp-512.png 
```

[https://ucm.dev/b/make-icons](https://ucm.dev/b/make-icons)

[https://ucm.dev/b/confirm](https://ucm.dev/b/confirm)

# javascript - 一个 for 循环可以增加/减少一个以上吗？

> ID：12809776
> 
> 赞同：159
> 
> 时间：2012-10-09T23:16:32.767
> 
> 标签：javascript, for-loop, increment

除了and之外，还有其他方法可以增加`for`Javascript 中的循环吗？例如，我想增加 3 而不是 1。`i++``++i`

```
for (var i = 0; i < myVar.length; i+3) {
   //every three
} 
```

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2012-10-09T23:18:07.183

使用`+=` [赋值运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Assignment_operators)：

```
for (var i = 0; i < myVar.length; i += 3) { 
```

从技术上讲，您可以在 for 循环的最终表达式中放置您想要的任何表达式，但它通常用于更新计数器变量。

有关 for 循环的每个步骤的更多信息，[请查看 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-09T23:28:25.033

一个`for`循环：

```
for(INIT; TEST; ADVANCE) {
    BODY
} 
```

意思如下：

```
INIT;
while (true) {
    if (!TEST)
        break;
    BODY;
    ADVANCE;
} 
```

您几乎可以为`INIT`、`TEST`、`ADVANCE`和编写任何表达式`BODY`。

请注意，`++`运算符和变体是具有副作用的运算符（如果您不使用它们，应尽量避免使用它们`i+=1`）：

*   `++i`方法`i+=1; return i`
*   `i++`方法`oldI=i; i+=1; return oldI`

例子：

```
> i=0
> [i++, i, ++i, i, i--, i, --i, i]
[0, 1, 2, 2, 2, 1, 0, 0] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-09T23:19:09.340

```
for (var i = 0; i < 10; i = i + 2) {
    // code here
}​ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-09T23:32:05.187

Andrew Whitaker 的回答是正确的，但您可以对任何部分使用任何表达式。
请记住第二个（中间）表达式应该计算，以便可以将其与布尔值`true`或`false`.

当我使用[`for`循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)时，我认为它是

```
for (var i = 0; i < 10; ++i) {
    /* expression */
} 
```

作为存在

```
var i = 0;
while( i < 10 ) {
    /* expression */
    ++i;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-02-20T07:36:03.920

```
for (var i = 0; i < myVar.length; i+=3) {
   //every three
} 
```

*额外的*

```
Operator   Example    Same As
  ++       X ++        x = x + 1
  --       X --        x = x - 1
  +=       x += y      x = x + y
  -=       x -= y      x = x - y
  *=       x *= y      x = x * y
  /=       x /= y      x = x / y
  %=       x %= y      x = x % y 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-24T00:22:20.433

你当然可以。其他人已经正确指出你需要做`i += 3`. 您无法执行您发布的内容，因为您在这里所做的只是添加`i + 3`但从未将结果分配回`i`. `i++`只是 的简写`i = i + 1`，同样`i +=3`是 的简写`i = i + 3`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-03T05:41:33.647

三元运算符的最后一部分允许您指定增量步长。例如，i++ 表示增加 1。i+=2 与 i=i+2,... 等相同。 **示例：**

```
let val= [];

for (let i = 0; i < 9; i+=2) {
  val = val + i+",";
}

console.log(val); 
```

预期结果：“2,4,6,8”

'i' 可以是任何浮点数或整数，具体取决于所需的步长。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-13T00:24:56.997

有一个运营商就是为了这个。例如，如果我想将变量 i 更改为 3，那么：

```
var someValue = 9;
var Increment  = 3;
for(var i=0;i<someValue;i+=Increment){
//do whatever
}
```

要减少，请使用 -=

```
var someValue = 3;
var Increment  = 3;
for(var i=9;i>someValue;i+=Increment){
//do whatever
}
```

# java - 如何在 Java 中克隆 org.json.JSONObject？

> ID：12809779
> 
> 赞同：50
> 
> 时间：2012-10-09T23:16:56.773
> 
> 标签：java, json, org.json

有没有办法克隆一个实例`org.json.JSONObject`而不对其进行字符串化并重新分析结果？

浅拷贝是可以接受的。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-08-24T11:32:15.147

最简单（但速度极慢且效率低下）的方法

```
JSONObject clone = new JSONObject(original.toString()); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-10-09T23:30:21.517

使用[`public JSONObject(JSONObject jo, java.lang.String[] names)`](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject%28org.json.JSONObject,%20java.lang.String%5B%5D%29)构造函数和[`public static java.lang.String[] getNames(JSONObject jo)`](http://www.json.org/javadoc/org/json/JSONObject.html#getNames%28org.json.JSONObject%29)方法。

```
JSONObject copy = new JSONObject(original, JSONObject.getNames(original)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-04T11:35:48.670

由于无法在android`$JSONObject.getNames(original)`中访问，您可以使用以下方法：

```
public JSONObject shallowCopy(JSONObject original) {
    JSONObject copy = new JSONObject();

    for ( Iterator<String> iterator = original.keys(); iterator.hasNext(); ) {
        String      key     = iterator.next();
        JSONObject  value   = original.optJSONObject(key);

        try {
            copy.put(key, value);
        } catch ( JSONException e ) {
            //TODO process exception
        }
    }

    return copy;
} 
```

但请记住，它不是深拷贝。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-13T01:18:01.063

对于**Android**开发者来说，不使用的最简单的解决方案`.getNames`是：

```
JSONObject copy = new JSONObject();
for (Object key : original.keySet()) {
  Object value = original.get(key);
  copy.put(key, value);
} 
```

> 注意：这只是一个**浅**拷贝

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-04T10:02:26.747

找不到 com.google.gwt.json.client.JSONObject 的现有深度克隆方法，但实现应该是几行代码，例如：

```
public static JSONValue deepClone(JSONValue jsonValue){
    JSONString string = jsonValue.isString();
    if (string != null){return new JSONString(string.stringValue());}

    JSONBoolean aBoolean = jsonValue.isBoolean();
    if (aBoolean != null){return JSONBoolean.getInstance(aBoolean.booleanValue());}

    JSONNull aNull = jsonValue.isNull();
    if (aNull != null){return JSONNull.getInstance();}

    JSONNumber number = jsonValue.isNumber();
    if (number!=null){return new JSONNumber(number.doubleValue());}

    JSONObject jsonObject = jsonValue.isObject();
    if (jsonObject!=null){
        JSONObject clonedObject = new JSONObject();
        for (String key : jsonObject.keySet()){
            clonedObject.put(key, deepClone(jsonObject.get(key)));
        }
        return clonedObject;
    }

    JSONArray array = jsonValue.isArray();
    if (array != null){
        JSONArray clonedArray = new JSONArray();
        for (int i=0 ; i < array.size() ; ++i){
            clonedArray.set(i, deepClone(array.get(i)));
        }
        return clonedArray;
    }

    throw new IllegalStateException();
} 
```

**注意：* *我还没有测试过！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-13T15:05:12.603

我发现的最快+最小的方法就是这个。它做深拷贝。

JSONObject 克隆=新 JSONObject(original.toMap());

我知道提问者说

> 浅拷贝是可以接受的。但我认为这不排除解决方案是否会进行深度复制。

更新：toMap() 函数在 Android 中不可用。但是在 maven 上 groupId org.json 下可用的 org.json 库有它：[https ://search.maven.org/artifact/org.json/json/20210307/bundle](https://search.maven.org/artifact/org.json/json/20210307/bundle)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-10-05T02:54:35.620

如果有人来这里寻找 org.google.gson 的深层克隆，因为他们没有公开他们的 deepClone() 方法，这就是我想出的......

```
public static JsonElement deepClone(JsonElement el){
    if (el.isJsonPrimitive() || el.isJsonNull())
        return el;
    if (el.isJsonArray()) {
        JsonArray array = new JsonArray();
        for(JsonElement arrayEl: el.getAsJsonArray())
            array.add(deepClone(arrayEl));
        return array;
    }
    if(el.isJsonObject()) {
        JsonObject obj = new JsonObject();
        for (Map.Entry<String, JsonElement> entry : el.getAsJsonObject().entrySet()) {
            obj.add(entry.getKey(), deepClone(entry.getValue()));
        }
        return obj;
    }
    throw new IllegalArgumentException("JsonElement type " + el.getClass().getName());
} 
```

这里有一些方法可以合并两个 JsonObject

```
public static JsonObject merge(String overrideJson, JsonObject defaultObj) {
    return mergeInto((JsonObject)new JsonParser().parse(overrideJson), defaultObj);
}
public static JsonObject merge(JsonObject overrideObj, JsonObject defaultObj) {
    return mergeOverride((JsonObject)deepClone(defaultObj), overrideObj);
}
public static JsonObject mergeOverride(JsonObject targetObj, JsonObject overrideObj) {
    for (Map.Entry<String, JsonElement> entry : overrideObj.entrySet())
            targetObj.add(entry.getKey(), deepClone(entry.getValue()));
    return targetObj;
}
public static JsonObject mergeInto(JsonObject targetObj, JsonObject defaultObj) {
    for (Map.Entry<String, JsonElement> entry : defaultObj.entrySet()) {
        if (targetObj.has(entry.getKey()) == false)
            targetObj.add(entry.getKey(), deepClone(entry.getValue()));
    }
    return targetObj;
} 
```

# iphone - 如何更改...的标题 更多导航

> ID：12809781
> 
> 赞同：0
> 
> 时间：2012-10-09T23:17:20.750
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller, uinavigationbar

我在情节提要中布置了一个界面，我的一个控制器被推入**了标签栏控制器的 ... More... 部分**。我似乎找不到设置它的导航项标题的方法。它在情节提要中设置，但没有出现。

这是结构标签栏>与导航控制器的关系>与视图控制器的关系

```
self.navigationItem.title = @"DOES NOT WORK";

    UINavigationBar *moreNavigationBar = self.tabBarController.moreNavigationController. navigationBar;
    moreNavigationBar.topItem.title = @"SETS THE BACK BUTTON TITLE"; 
```

**我需要做什么才能在所附屏幕截图的空白处设置文本？**

![标签栏更多项目标题](../Images/d00fa639bbf486efcb5d5d26445ce28f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:46:22.380

除非您在隐藏标题的选项卡栏中有自定义代码，否则您只需更改正在显示的*视图控制器*`title`的属性。这可以在故事板编辑器中轻松完成。

 *![物业版](../Images/aeebed9e6fe639d455c21d7377ed38e7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:58:35.240

如果您想以编程方式执行此操作，您只需在您`viewDidLoad`的`viewController`as 中添加以下内容，

```
self.title = @"title goes here"; 
```*

# git - git 冲突 - 在 HEAD 中删除并在修订中修改的文件

> ID：12809783
> 
> 赞同：13
> 
> 时间：2012-10-09T23:17:25.243
> 
> 标签：git

对 git 来说很新，有一点问题，我不知道如何解决。我错误地更改了工作副本中的一个文件并且没有提交更改。然后，我对另一个副本进行了更改并提交了它们——当我尝试拉取更改时，不出所料地收到一个错误，说我的“对文件的本地更改将被合并、中止覆盖”。所以我使用 git rm 删除了有问题的文件，然后使用 git add -u 并提交了删除。然后我试图拉入最新的副本并得到以下内容。处理这个问题的最佳方法是什么？感谢任何指示

```
CONFLICT (delete/modify): wp-content/plugins/wp-flash-countdown/xml_option_.xml deleted in HEAD and modified in ba878ab1efe3a039961a446c490d5c93a2bc22e1\. Version ba878ab1efe3a039961a446c490d5c93a2bc22e1 of wp-content/plugins/wp-flash-countdown/xml_option_.xml left in tree.
Automatic merge failed; fix conflicts and then commit the result. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-06T15:17:19.933

如果你现在这样做`git status`，它的输出包含：

```
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution) 
```

如果您`git rm`是他们，`needs merge`将输出警告，但删除将成功，然后您可以提交修改 - 这将是“合并提交”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T23:20:29.147

那么此时您是否在您拉到的工作副本中拥有该文件？

如果是这样，只需将其删除并重新提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-22T21:34:01.973

一个俗气的 WordPress 主机也有类似的问题。试试这个..

```
git log --follow -- readme.html 
```

请注意该文件最后一次存在的提交 ID（就像在您删除它之前一样。）现在您想从 git 中“签出”该文件。

```
git checkout (commit id) readme.html 
```

然后添加、提交、推送等。为我工作！

# python - 在 python 中读取（大概）unicode 文件

> ID：12809798
> 
> 赞同：0
> 
> 时间：2012-10-09T23:19:33.077
> 
> 标签：python, text, unicode-string

当我使用简单的 I/o 调用来读取系统上的特定文件时，例如：

```
f = open('file.ini')
for line in f.readlines():
    print line 
```

我得到这样的输出：

```
 H E L L O !  W H Y  A R E  T H E R E  S O  M A N Y  S P A C E S ? 
```

我认为它是 Unicode，但我不太清楚如何将其读取为 Unicode/将其转换为 ascii。建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T23:34:00.550

[`codecs`](http://docs.python.org/library/codecs.html)尝试使用以使事情更容易打开文件。

例子：

```
import codecs
f = codecs.open('file.ini', encoding='utf-16-le')  # You can experiment with different encodings
for line in f:  # note, the readlines is not really needed
    print line,  # the comma strips the trailing newline in case that's bothering you 
```

PS：如果你不知道编码，我建议看这个问题：[Determine the encoding of text in Python](https://stackoverflow.com/questions/436220/python-is-there-a-way-to-determine-the-encoding-of-text-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:40:54.820

非常规则的空格通常表明您的数据是用 UTF16 编码的——通常您看到的是每隔一个字节是一个 0 字节。您可以通过打印出您正在阅读的实际二进制数据来确认这一点：

```
f = open('file.ini')
line in f.readline():
print map(ord, line) 
```

如果你看到这样的输出：

```
[..., 68, 0, 65, 0, 76, 0, 76, 0, 79, ...] 
```

那么几乎可以肯定是这样。

那么，诀窍是确定是*偶数*字节是 0，还是*奇数*字节。有两种 UTF-16 编码：Big-endian 和 little-endian，以先出现的字节的重要性命名。如果你的 0 出现在它们关联的字符*之前*，那么文件是大端的，你可以像这样打开它（Python 3.x）：

```
f = open('file.ini', encoding='utf16be') 
```

在 Python 2.x 中，导入`codecs`模块来执行此操作：

```
import codecs
f = codecs.open('file.ini', encoding='utf16be') 
```

如果后面是 0，则替换为“utf16le”。

（您需要确保在读取文件时对其进行解码，或者在解码之前将整个内容读入内存。您绝对不想在解码之前将行分开）

如果幸运的话，文件的开头写了一个字节顺序标记，这个字符是 U+FEFF——如果前两个字节是`[254, 255]`，那么编码是 big-endian，如果`[255, 254]`是 ，那么它是 little-字节序。

如果这些都不适用，那么您可能没有查看 UTF-16 数据，您将不得不做更多的研究以确定您正在查看的编码。

# sql - 如何处理数据库表的 2 亿行与 XML 文件上的 100.000 子集的比较？

> ID：12809804
> 
> 赞同：0
> 
> 时间：2012-10-09T23:20:38.677
> 
> 标签：sql, database, database-design

我目前正在编写一个应用程序，该应用程序需要能够从数百万用户中选择一个 ID 子集......

我目前正在编写软件以从包含巴西人口 200.000.000 (200M) 的整个列表的表中选择一组 100.000 个 ID，我需要能够在合理的时间内完成此操作... ID on Table = XML 上的 ID

我正在考虑解析 xml 文件并启动一个在数据库上执行 SELECT 语句的线程，我需要为每个线程建立一个连接，但这种方式似乎是一种蛮力方法，也许有更优雅的方式？

1）什么是最好的数据库来做到这一点？2）数据库连接数量的合理限制是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:29:22.610

进行 100.000 次查询将花费很长时间，并且在单独的线程上拆分工作对您没有多大帮助，因为您正在从同一个表中读取。

不要一次只得到一条记录，而是将 100.000 个项目分成相当小的批次，例如每个 1000 个项目，您可以将它们发送到数据库。在数据库中使用这些 id 值创建一个临时表，并对数据库表进行连接以获取这些记录。

例如，使用 MS SQL Server，您可以将一批项目作为 XML 发送到存储过程，该存储过程可以从中创建临时表并查询数据库表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:38:57.597

任何可以处理现有 200M 行表的现代 DBMS，与 100K 行表相比都应该没有问题（假设您的硬件已经达到标准）。

理想的解决方案：将您的 XML（至少是 ID）导入到新表中，确保您正在比较的列被正确索引。然后查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:22:20.923

什么语言？如果您使用 .NET，您可以将 XML 和 SQL 作为数据源加载，然后我相信有一些可枚举的函数可用于比较数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T12:49:33.883

做这个：

*   解析 XML 并将提取的 ID 存储到临时表¹中。
*   从主表中，仅选择其 ID 也存在于临时表中的行：

    SELECT * FROM MAIN_TABLE WHERE ID IN（从 TEMPORARY_TABLE 中选择 ID）

即使您最终使用了批处理/分块和并行化，体面的 DBMS 通常也会比您更快地完成这项工作。

* * *

*¹临时表通常是使用`CREATE [GLOBAL|LOCAL] TEMPORARY TABLE ...`语法创建的，您可能希望它对会话私有（检查您的 DBMS 对`GLOBAL`vs.的解释`LOCAL`）。如果您选择的 DBMS 不支持临时表，您可以改用“普通”表，但请注意不要让并发会话在您仍在使用该表时弄乱该表。*

# sql - adapter.Fill 方法中出现“无效的对象名称”错误

> ID：12809808
> 
> 赞同：0
> 
> 时间：2012-10-09T23:20:48.117
> 
> 标签：sql, ado.net, dataset

我正在尝试从 AdventureWorks2012 数据库的所有表中创建一个数据集。但是我在 adapter.Fill 方法中收到“无效的对象名称”错误。

有任何想法吗？

```
private void openDBButton_Click(object sender, RoutedEventArgs e)
    {
        DataSet myDataSet = new DataSet();
        SqlDataAdapter myDataAdapter;
        SqlCommand myCommand;

        string conStr = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=" + dbPath.Text +
            ";Integrated Security=true";
        SqlConnection connection = new SqlConnection(conStr);
        connection.Open();

        DataTable tables = connection.GetSchema("Tables");

        foreach (DataRow table in tables.Rows)
        {
            if (table["TABLE_TYPE"].ToString() != "BASE TABLE")
                continue;
            string tableName = table["TABLE_NAME"].ToString();
            string sqlCmd = "SELECT * FROM " + "[" + tableName + "]";
            //SqlDataAdapter adapt = new SqlDataAdapter(new SqlCommand(sqlCmd, connection));
            //adapt.FillSchema(myDataSet, SchemaType.Mapped, tableName);

            myCommand = new SqlCommand(sqlCmd, connection);
            myDataAdapter = new SqlDataAdapter(myCommand);
            myDataAdapter.Fill(myDataSet, tableName); // here i'm get in trouble :)
        }
    } 
```

# ruby-on-rails-3.2 - WYMEditor 和 Rails 3.2 资产管道

> ID：12809820
> 
> 赞同：4
> 
> 时间：2012-10-09T23:22:06.143
> 
> 标签：ruby-on-rails-3.2, asset-pipeline, wymeditor

我无法让 WYMEditor 使用资产管道在 Rails 3.2 生产模式下正常工作。这是我的设置：

```
# app/assets/javascripts/application.js
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require wymeditor/jquery.wymeditor.min
//= require_tree . 
```

WYMEditor 文件位于`vendor/assets/javascripts/wymeditor/*`

```
# in app/views/layouts/application.html.erb just above closing </body> tag
<script type="text/javascript">
  $(document).ready(function() {
    $('textarea').wymeditor(); 
  });
</script> 
```

在开发模式下一切正常。但是，在我完成`rake assets:clean`并`rake assets:precompile`启动我的服务器`rails s -e production`之后，WYMEditor 不再工作了。我查看了`public/assets/application.js`一下，似乎 WYMEditor 代码包含在该文件中。但是，我得到的错误似乎表明 WYMEditor 正在寻找与包含 WYMEditor 的页面相关的一些文件，而不是在`public/assets/wymeditor`预编译过程中创建的文件夹中：

```
Started GET "/users/lang/en.js" for 127.0.0.1 at 2012-10-09 16:11:12 -0700

ActionController::RoutingError (No route matches [GET] "/users/lang/en.js"):

Started GET "/users/skins/default/skin.js" for 127.0.0.1 at 2012-10-09 16:11:12 -0700

ActionController::RoutingError (No route matches [GET] "/users/skins/default/skin.js"):

Started GET "/users/iframe/default/wymiframe.html" for 127.0.0.1 at 2012-10-09 16:11:12 -0700

ActionController::RoutingError (No route matches [GET] "/users/iframe/default/wymiframe.html"):

[snipped stack traces and more similar error messages] 
```

经过多次谷歌搜索后，我发现一个页面似乎表明 WYMEditor 在包含其代码时不满意，`application.js`并且它需要位于自己的单独文件夹中。但是，我不知道这是否真的是真的。让 WYMEditor 在生产模式下工作的推荐方法是什么？

# javascript - 克隆后替换表单索引 ID

> ID：12809821
> 
> 赞同：0
> 
> 时间：2012-10-09T23:22:15.100
> 
> 标签：javascript, jquery, forms

在项目表单中，用户可以克隆任何特定任务——这工作正常。我现在需要用新的时间戳替换复制的任务的索引 ID（它是一个时间戳）。我当前的代码只替换了一个 div。

如何用时间戳替换所有表单输入/标签字段 ID？我目前做一个 find() 然后替换。

任何想法都非常感谢！

```
$(function() {
  $('form').on('click', '.clone-task', function(event) {
    event.preventDefault();
    var time = new Date().getTime();
    var taskCopy = $(this).parents(".dupForm").clone();
    $("#dupTask").append(workoutCopy);
    var attributes = taskCopy.find('input').attr('name').replace(/\[\d+]/g, time);
      alert(attributes);
    });
 }); 
```

任务表（ruby-on-rails）：

```
 <fieldset>
 <div class="field">
 <b><%= f.label :name, "Major Task" %></b> | 
 <%= f.text_field :name, :placeholder => "task name" %>
 <%= f.hidden_field :_destroy %>
 <%= link_to "remove", '#', class: "remove_fields" %>
 </div>

 <div class="field">
 <%= f.label :time_start, "Scheduled Time" %><br />
 <%= f.time_select :time_start, {:ampm => true, :minute_step => 15} %>
 </div>
 <div class="field">
 <%= f.label :task_duration, "Task Duration(mins)" %>
 <%= f.number_field :task_duration, size: 3 %>
 </div>
 <b>Add Supporting Actions to Your Task</b> 
 <%= f.fields_for :activities do |builder| -%>
 <%= render 'activity_fields', f: builder %>
 <% end %>
 </div>
 <%= link_to_add_fields "Add Action", f, :activities %>
 </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:48:57.553

jQuery`attr()`方法允许您使用函数作为参数，该函数将充当循环来处理所有匹配的元素。

```
taskCopy.find('input').attr('name', function( idx, name){
    return name.replace(/\[\d+]/g, time);
}); 
```

API参考：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

# java - JSP/Spring MVC 应用程序

> ID：12809823
> 
> 赞同：0
> 
> 时间：2012-10-09T23:22:35.347
> 
> 标签：java, jsp, jakarta-ee, web-applications, spring-mvc

我正在使用 JSP/Spring MVC 编写一个 Web 应用程序，并且需要根据使用它的客户自定义 UI。我需要隐藏/显示屏幕的某些部分，隐藏显示某些标签及其文本框，还需要根据不同的客户修改标签。目前，我们正在根据登录的客户通过元素和 div 控制 JSP 中的隐藏/显示。例如：

```
if (customer= "A")

show this

else 

hide this 
```

随着我们添加更多客户，代码变得混乱，JSP 将变得臃肿。我认为的另一种选择是将页面拆分为多个部分并以相同的方式控制这些部分，但最终可能会导致跨 JSP 的代码重复。

例如

```
if (customer = "A")

jsp:include headerA.jsp

else

jsp:include genericheader.jsp 
```

另一种选择是根据客户端编写不同的 JSP 和路由。

有没有更好的方法来处理这种情况。有人可以建议实施此类解决方案的最佳实践吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:25:05.050

为每个用户选择做什么的 UI 不可能超出您的用户 A 和 B。您需要一个基于角色的身份验证和授权系统。

由于您已经在使用 Spring，我建议您查看 Spring Security 及其基于角色的功能。有一些标签可以帮助你。

另一种看待它的方式是，像这样的基于角色的逻辑不属于标签。我建议把它放在控制器中，让它们为你组装页面。

另一种可能性是 SiteMesh，它允许您创建复合视图。

还有一个：jQuery 是为操作 DOM 而生的。与 CSS 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:18:05.063

首先它应该基于角色而不是基于客户，每个客户都会有一定的角色。许多客户可能具有相同的角色和屏幕访问权限和 UI。

基于角色，您可以使用 Spring Secutiry 进行身份验证和授权。

如果您需要根据客户角色使用不同的布局，最好使用一些布局管理器，例如 Tiles、SiteMesh 等。

或使用 portlet 为不同的客户提供不同的登录视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:55:23.700

您刚刚说如果 A 人从一个商店登录，而 B 人从另一个商店登录。讨厌说出来，但那是一个角色，无论你怎么旋转它，这都与用户授权有关。

就你想如何实现它而言，你可以做很多事情，你可以拦截登录请求并设置一个会话变量，该变量在字符串前面确定正确的视图（即当用户登录时你得到 customerA，vs customerB，因此在呈现视图时，您将检索值并呈现“customerA/index”与“customerB/index”等。

您还可以在控制器中确定该人的角色并呈现适当的视图，尽管这会将您的用户角色与您的控制器逻辑相结合，我认为不建议这样做。

如果这个应用程序将有很多不同的后端，我建议您可以为每个应用程序编写一个新的后端的 portlet，而不是用每个新的商店后端来膨胀您的 Web 应用程序。

这些只是几种方法，希望这会有所帮助。

# iphone - 在 Iphone 应用程序上从 Internet 更新 tableview

> ID：12809831
> 
> 赞同：0
> 
> 时间：2012-10-09T23:23:39.333
> 
> 标签：iphone, ios5

我正在使用 xcode 上的情节提要和我的一个 tableviews 上做一个 iphone 应用程序，我想显示我将从文件或数据库加载到 table view 的英国超级联赛表。我的问题是如何将这张桌子连接到互联网，以便在他们比赛后每周更新球队位置？这个动作叫什么，是 RSS 提要还是 ftp 推送？有些人正在使用 Json 和数据库，但这对我来说太令人困惑了，因为我在这个领域非常陌生。我想知道大家的想法，并会非常感谢您的回答。提前致谢！斯坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:43:11.137

如果您在 iOS 中使用 Web 服务，那么 JSON 很容易且无处不在。它也将使您更容易以表格形式显示结果。

我会考虑将团队定义为核心数据对象。您可能想为 Division 和 Team 创建对象（如果术语有误，抱歉，对 EPL 了解不多）以允许球队降级或升迁。在每个分区中，您将拥有团队关系，因此您只需从核心数据中获取 Division 对象，然后使用 Division.teams 获取所有团队的 NSSet 即可显示任何分区的阶梯。

然后，您获取有关团队的信息。您可能会收到一个 JSON 提要，其中包含有关每个团队的信息。您将使用 NSJSONSerialization（内置于 iOS）解析接收到的数据并将其存储在 Core Data 中。

您可以使用[RestKit](http://restkit.org)，它可以处理网络请求并将收到的 JSON 直接映射到 Core Data，如果您花一些时间配置它。或者，如果您喜欢自己进行解析，您可以使用[AFNetworking 。](https://github.com/AFNetworking/AFNetworking)

要显示数据，您可以使用 NSFetchedResultsController。设置好查询并完成初始提取后，将表视图连接到它，然后显示梯形图。NSFetchedResultsController 需要一个排序描述符 - 在您的情况下它可能是梯形排名。将包含表视图的视图控制器设置为 NSFetchedResultsController 的委托。

定期更新很容易。每当您的应用程序进入前台时，您都会检查您的核心数据对象上的时间戳，并查看它是否足够旧，可以开始刷新（或者只要在某处存储一个简单的 NSDate 字符串，例如 NSUserDefaults，每当您执行 fetch ）。如果是，请再次执行 fetch/parse/update 循环 - 您的表会自动更新，因为 NSFetchedResultsController 将被通知底层数据已更改，并且会导致表刷新。

# asp.net - 如果数据库不为空，则有条件地在转发器中显示图像

> ID：12809832
> 
> 赞同：1
> 
> 时间：2012-10-09T23:23:43.867
> 
> 标签：asp.net, asprepeater

我有一个包含图像的中继器。但是，此中继器中的所有促销活动中可能没有一张图片

```
<div class="promo">
    <h2><%# ((Promotion)Container.DataItem).Title %></h2>
    <p><img src="/Uploads/<%# ((Promotion)Container.DataItem).Image %>" alt="" class="promoImg" /><%# ((Promotion)Container.DataItem).Description %></p>
    <p><em><%# ((Promotion)Container.DataItem).Restrictions %></em></p>
</div> 
```

如果该条目没有空字段，有人可以告诉我如何使唯一出现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:46:16.090

我更喜欢在服务器端做一些事情，所以，我的建议是：

向转发器添加事件处理程序

```
 <asp:Repeater ID="myRpt" runat="server" onitemdatabound="myRpt_ItemDataBound" >
    <ItemTemplate>
        <div class="promo">
            <h2>
                <%# ((Promotion)Container.DataItem).Title %></h2>
            <p>
                <asp:Image ID="imgTest" CssClass="promoImg" ImageUrl="" runat="server" />
                <%# ((Promotion)Container.DataItem).Description %></p>
            <p>
                <em>
                    <%# ((Promotion)Container.DataItem).Restrictions %>
                </em>
            </p>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我将在后面的代码中“绑定”图像源，您也可以为其他控件执行此操作。所以，后面的代码是：

```
protected void myRpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType ==     ListItemType.AlternatingItem)
        {
            Image imgTest = (Image)e.Item.FindControl("imgTest");
            Promotion pActual = (Promotion)e.Item.DataItem;
            bool needToShowImage = !String.IsNullOrEmpty(pActual.Image)

            if (needToShowImage)
            {                    
                imgTest.ImageUrl = "Uploads/" + pActual.Image;
            }
            else
            {
                imgTest.Visible = false;
            }                
        }
    } 
```

它会成功的。如果它不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:39:39.480

这应该可以解决问题：

对于 C#.Net：

```
<div class="promo">
    <h2><%# ((Promotion)Container.DataItem).Title %></h2>
    <p><img runat="server" visible='<%# Information.IsDBNull(((Promotion)Container.DataItem).Image) %>' src=""/Uploads/<%# ((Promotion)Container.DataItem).Image.ToString %>" alt="no image found" class="promoImg" /><%# ((Promotion)Container.DataItem).Description %></p>
    <p><em><%# ((Promotion)Container.DataItem).Restrictions %></em></p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T01:10:03.940

我认为您可以使用面板来执行此操作。

```
 <div class="promo">
<h2><%# ((Promotion)Container.DataItem).Title %></h2>

<asp:Panel ID="pnlImage" runat="server">

<p><img src="/Uploads/<%# ((Promotion)Container.DataItem).Image %>" alt="" class="promoImg" /><%# ((Promotion)Container.DataItem).Description %></p>

</asp:Panel>

<p><em><%# ((Promotion)Container.DataItem).Restrictions %></em></p> 
```

在 ItemDataBound 事件中，执行此操作

```
 if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
 if (((Promotion)e.Item.DataItem).Image == null) {
    ((Panel)e.Item.FindControl("pnlImage")).Visible = false;
 } 
```

当面板不可见时，它不会被渲染。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T00:02:03.770

我添加了一些 jquery 来检查页面上的每个图像，以确保有一个与该促销相关的图像：

```
$(document).ready(function () {

$('.promoImg').each(function (index) {

    if ($(this).attr('src') == "/Uploads/") {
        $(this).hide();
    }
}); 
```

});

我仍然对服务器端解决方案感兴趣

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T01:43:41.843

为什么不使用

```
<% if()%> 
```

判断是否有图片来源？如果没有，那么没有回应。所以我们可以节省更多

# reportbuilder - 在 SQL Server 报表生成器中使用多值参数进行查询

> ID：12809833
> 
> 赞同：0
> 
> 时间：2012-10-09T23:23:58.990
> 
> 标签：reportbuilder, report-builder2.0

我基本上是在尝试做这个问题中提出的问题：

[在 Reporting Services 中为单个参数传递多个值](https://stackoverflow.com/questions/512105/passing-multiple-values-for-a-single-parameter-in-reporting-services)

但这对我不起作用。

我的参数的数据类型为`text`. 我有一种感觉，当我的参数被插入到我的查询中时，它被引号包围了。

**询问**

```
SELECT 
    AllUserData.tp_ID, Title as TestSite, tp_Title as TestCase, nvarchar6 as ItemNumber, 
    nvarchar7 as DefectType, nvarchar8 as Status, nvarchar9 as QuestionID, 
    ntext2 as Question, AllUserData.tp_Version as Version, 
    CONVERT(VARCHAR(10), AllUserData.tp_Modified, 111) AS DateModified
FROM 
    [dbTOG].[dbo].[AllUserData] 
INNER JOIN
    dbTOG.dbo.AllLists on dbTOG.dbo.AllUserData.tp_ListId = dbTOG.dbo.AllLists.tp_ID 
INNER JOIN
    dbTOG.dbo.Webs on dbTOG.dbo.AllLists.tp_WebId = dbTOG.dbo.Webs.Id
WHERE 
    (nvarchar8 = 'PASS' OR
     nvarchar8 = 'FAIL' OR
     nvarchar8 = 'N/A' OR
     nvarchar8 = 'TBD' OR
     nvarchar8 = 'TBRT' OR
     nvarchar8 = 'FIXED') 
    AND Title = @TestSite 
    AND tp_Title IN (@TestCase) 
```

**@TestCase 的**参数表达式****

 **```
=Join(Parameters!TestCase.Value, ",") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T11:23:07.727

这已经很晚了，但我正在为几乎同样的事情而苦苦挣扎。最终我从 OT 的链接中找到了答案，但不是被接受的。

我将**参数表达式**更改为：

```
=SPLIT(JOIN(Parameters!<your param name>.Value,","),",") 
```

这对我来说非常有效。**

# jquery - 使用 jQuery 的可枚举 GET 和 POST 参数（给出 curl 示例）

> ID：12809837
> 
> 赞同：0
> 
> 时间：2012-10-09T23:24:37.813
> 
> 标签：jquery, ruby-on-rails, ajax, encoding, rack

我有以下与 jQuery 完美配合的请求`curl`，但我无法使其与 jQuery 的`jQuery.ajax`函数系列配合使用：

```
curl -v -s -X GET -d 'matching[][name]=ottensen' http://localhost:3000/locations 
```

诀窍是`matching[][name]=ottensen`. 当由应用程序服务器解释时，这会产生以下结果：

```
params: { "matching" => [{"name" => "ottensen"}] } 
```

换句话说，我传递了一个哈希数组。

`curl`语法确实看起来很奇怪，但也得到了广泛的支持。

我用jQuery（最新）尝试了以下内容：

```
$.ajax({
    url: 'http://localhost:3000/locations',
    data: {
        "matching": [{
            "name": "ottensen"
        }]
    })
}) 
```

和其他各种复杂的组合，不幸的是 jQuery.serialize 不能很好地发挥作用，但它的文档确实提到：

> **注意：**因为没有普遍认可的参数字符串规范，所以不可能使用这种方法以在支持这种输入的所有语言中理想地工作的方式对复杂的数据结构进行编码。在此之前，$.param 方法将保持其当前形式。

建议了一些建议`JSON.stringify(obj)`的解决方法，但 API 必须保持现有客户端可以访问，我们不能将其更改为接受 JSON，我们不应该这样做，许多 Rack 应用程序都支持这一点，而且似乎是一些一种标准（可能只是事实上的标准），这是一个示例（总的来说，它似乎可以按预期工作，但我无法更改后端服务器）：

```
$.ajax({
    url: 'http://localhost:3000/locations',
    data: JSON.stringify({
        "matching": [{
            "name": "ottensen"
        }]
    }),
    contentType: 'application/json',
    dataType: 'json'
}) 
```

**问题：**因此我的问题是，我怎样才能让 jQuery 将相同的东西发送到`curl`正在执行的服务器？

**旁注（服务器端解决方法）：**服务器有这行神奇的代码，这让我非常非常难过：`matching = params.fetch(:matching); matching = Array(matching.values) if matching.is_a?(Hash)`这是一个目前有效的解决方法，但我不想在我的代码中重复它。

还值得注意的是，我已经考虑实现一个 Rack 中间件来修复传递的 jQuery 样式对象，因此它们可以在 Rails 中按预期工作（也就是说，从看起来像这样的 jQuery 请求中重写参数，并修复它们Rails 应用程序不知道发生了什么）

# sql-server-2008 - SQL Server 2008 R2 Merge 正在删除错误的数据集

> ID：12809838
> 
> 赞同：2
> 
> 时间：2012-10-09T23:24:52.693
> 
> 标签：sql-server-2008, tsql

我有桌子`tblCollectionGameList`

```
CREATE TABLE dbo.tblCollectionGameList
(
    ListID smallint IDENTITY(0,1) NOT NULL,
    CollectionID smallint NOT NULL,
    IncludedSectionID smallint NOT NULL,
    CONSTRAINT PK_CollectionGameList_ListID PRIMARY KEY CLUSTERED (ListID ASC),
    CONSTRAINT FK_CollectionGameList_SectionInfo FOREIGN KEY (CollectionID) REFERENCES dbo.tblSectionInfo (SectionID),
    CONSTRAINT FK_CollectionGameList_SectionInfo2 FOREIGN KEY (IncludedSectionID) REFERENCES dbo.tblSectionInfo (SectionID)
) 
```

`MERGE`从我的网站传递一组 XML 值后，我运行以下命令

```
SELECT 
   CAST(colx.query('data(CollectionID) ') AS varchar) AS CollectionID,
   CAST(colx.query('data(IncludedSectionID) ') AS varchar) AS IncludedSectionID
INTO #TEMPtblCollectionGameList
FROM @XMLTable.nodes('DocumentElement/XMLTable') AS Tabx(Colx)

MERGE dbo.tblCollectionGameList AS t
USING #TEMPtblCollectionGameList AS s
ON (t.CollectionID = s.CollectionID AND t.IncludedSectionID= s.IncludedSectionID)
WHEN NOT MATCHED BY TARGET
    THEN
        INSERT (CollectionID, IncludedSectionID)
        VALUES (s.CollectionID, s.IncludedSectionID)
WHEN NOT MATCHED BY SOURCE
    THEN
        DELETE
; 
```

这是行不通的。如果我的表中有一组现有数据：

```
ListID  CollectionID    IncludedSectionID
34      86              0
35      86              1 
```

我尝试从我的网页放置新数据以用于不同的集合，`CollecitonID`它正在删除旧数据并将新数据放入：

```
ListID  CollectionID    IncludedSectionID
38      92              10
39      92              11 
```

我的`MERGE`代码有什么问题导致它影响`CollectionID`网页正在传递的更新之外的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:06:51.580

您可以向`WHEN NOT MATCHED BY SOURCE`子句添加条件。

```
merge dbo.tblCollectionGameList as T
using #TEMPtblCollectionGameList as S
on S.CollectionID = T.CollectionID and
   S.IncludedSectionID = T.IncludedSectionID
when not matched by target
  then
    insert(CollectionID, IncludedSectionID)
      values(S.CollectionID, S.IncludedSectionID)
when not matched by source and 
     T.CollectionID in (select S.CollectionID
                        from #TEMPtblCollectionGameList as S)
  then
    delete
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:29:02.377

解决方案是添加以下内容：

```
WITH tblCGL AS
(
    SELECT ListID, CollectionID, IncludedSectionID
    FROM dbo.tblCollectionGameList AS CGL
    WHERE EXISTS
    (
        SELECT CollectionID, IncludedSectionID
        FROM #TEMPtblCollectionGameList AS TempCGL
        WHERE CGL.CollectionID = TempCGL.CollectionID
    )
) 
```

这是在 SQLteam.com 的帮助下收集的。

# jquery - 在没有直接父级的情况下使用 .on()

> ID：12809840
> 
> 赞同：0
> 
> 时间：2012-10-09T23:24:56.960
> 
> 标签：jquery

我将如何`.on()`在 jQuery 中使用不是直接父元素的元素？

`.live()`看起来像这样

```
$('.home_collapsibles').find('.ui-collapsible-heading').live('tap', function (event) {}); 
```

与元素

```
<div data-role="collapsible-set" class="home_collapsibles ui-collapsible-set" data-theme="c" data-inset="false">    
    <div data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right" class="ui-collapsible ui-collapsible-collapsed">
        <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-right ui-btn-up-c" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="arrow-r" data-iconpos="right" data-theme="c"> 
```

这是我的 JS Fiddle [http://jsfiddle.net/jostster/WD6DD/](http://jsfiddle.net/jostster/WD6DD/)

**编辑：**这似乎工作[http://jsfiddle.net/jostster/fNNnJ/](http://jsfiddle.net/jostster/fNNnJ/)，但是我想将监听器限制为仅在`.home_collapsibles`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:27:38.163

```
$('.home_collapsibles').on('tap', '.ui-collapsible-heading', function () {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:26:35.090

> 根据其继承者重写 .live() 方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

**对于仍在使用 .live() 的页面，此版本特定差异列表可能会有所帮助：**

> 在 jQuery 1.7 之前，要在使用 .live() 绑定后阻止进一步的处理程序执行，处理程序必须返回 false。调用 .stopPropagation() 不会完成此操作。从 jQuery 1.4 开始，.live() 方法支持自定义事件以及所有冒泡的 JavaScript 事件。它还支持某些不冒泡的事件，包括更改、提交、聚焦和模糊。在 jQuery 1.3.x 中，只能绑定以下 JavaScript 事件：click、dblclick、keydown、keypress、keyup、mousedown、mousemove、mouseout、mouseover 和 mouseup。

来自：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

# javascript - WinJs.d.ts 中的重复标识符

> ID：12809843
> 
> 赞同：2
> 
> 时间：2012-10-09T23:25:07.553
> 
> 标签：javascript, winjs, typescript

我正在尝试在 Windows 8 应用程序 (html5/JS) 中使用 TypeScript

我查看了[示例应用程序](http://typescript.codeplex.com/SourceControl/changeset/view/deb84dba2fde)

该应用程序使用 WinJS (WinJS.d.ts) 的类型定义文件。

我需要编辑这个文件，因为它不完整。但是，该文件具有类型元素的接口扩展名，添加了 winControl 的属性（键入任何）。

这一行得到“重复标识符'winControl'”的错误，我无法找到其他地方。

此外，我的代码中有一些位置出现错误，因为没有名为 winControl 的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T05:23:42.977

要解决这个问题，你必须

1.  从项目路径（或**winrt.d.ts**的路径）文件夹中的任何位置删除 lib.d.ts。它与您本地 typescript 安装文件夹中的定义冲突

2.  确保您没有将任何 ts（和 JS 文件）标识为内容，因为它们将被复制到您的部署目录并导致相同的重复问题（所有内容都有两个定义）。

我建议在构建之前打开输出窗口。它将让您看到导致问题的原因，因为 tcs 正在为您在幕后作为命令行运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:32:20.840

听起来就像我在尝试扩充`Window`界面时遇到的同样的问题，这是一个目前正在处理的错误：

[http://typescript.codeplex.com/workitem/176](http://typescript.codeplex.com/workitem/176)

但是他只提到`lib.d.ts`，您可能希望将您的问题添加到问题中，以确保它也得到修复，或者排除这是导致您的问题的原因。

# python - 语法错误 - 发疯

> ID：12809845
> 
> 赞同：-7
> 
> 时间：2012-10-09T23:25:16.720
> 
> 标签：python

[愚蠢的语法错误！](http://i.stack.imgur.com/gfBhP.jpg)

我不太清楚这点代码有什么问题。如果我让它打印“x 是最高奇数”，它工作正常，但是每当我尝试让它打印“x”的实际值时，我都会收到语法错误。我错过了什么小而简单的步骤？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:28:21.593

尝试这个：

```
print x, 'is the highest odd number' 
```

或者，如果您使用的是 Python 3：

```
print(x, 'is the highest odd number') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:32:39.523

```
 print(x, "is the highest odd number") 
```

是[print 的 python3 语法](http://docs.python.org/release/3.1.5/library/functions.html#print)。

没有逗号：

```
x "is the highest odd number" 
```

是没有运算符的数字和字符串，因此出现语法错误。

*同样，评估`2"a"`会给你一个语法错误。*

# c++ - Visual C++ 2008 版本构建打破了我的浮动

> ID：12809853
> 
> 赞同：0
> 
> 时间：2012-10-09T23:26:22.623
> 
> 标签：c++, visual-studio-2008, visual-c++, nan, release-mode

再会，

我让我的项目使用 Microsoft Visual C++ 2008 Express Edition 在发布模式下构建。然而，我这里的一些浮点值与调试配置中的不同。出于某种原因，对于某些特定功能，它们都变成了 NaN 或零。我不确定为什么会发生这种情况，这是我第一次在发布模式下构建，感谢您的帮助！

尝试的步骤：

*   浮点命令行选项。

*   由于某些原因，单步执行代码不起作用。

*   几个小时盯着代码感谢您的阅读！

这是行为不端的代码（注意：过去我在使用此特定功能的 NaN 时遇到过麻烦，但这很奇怪）：

```
 /*
This file is part of White - Storm: Lightning (alpha).

    Copyright 2012 Christopher Augustus Greeley

    White - Storm: Lightning (alpha) is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    White - Storm: Lightning (alpha) is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with White - Storm: Lightning (alpha).  If not, see <http://www.gnu.org/licenses/>.
*/
#include "Vector Calculator.h"
WSL::Math::Vector::VectorCalculator::VectorCalculator()
{
    WSL::Containers::Base::XYZ temp;
    default_ = temp;
}
WSL::Containers::Base::XYZ WSL::Math::Vector::VectorCalculator::VectorCalculation( WSL::Containers::Base::XYZ goTo, WSL::Containers::Base::XYZ position, float speed, bool td )
{
    //Make sure that the vector doesent have any stray values lying around.//
    vector = default_;
    //Calculate Magnitude.//
    x = goTo.getX() - position.getX();
    y = goTo.getY() - position.getY();
    z = goTo.getZ() - position.getZ();
    if( td == true )
        magnitude = magn.DotProduct( x, y, z, magnitude );
    else
        magnitude = magn.DotProduct( x, y, magnitude );
    if( x == 0 && y == 0 && z == 0 )
        return vector;
    //Normilise//
    magnitude = sqrt( magnitude );
    //Make sure we do not divide by zero.//
    if( magnitude != 0 )
    {
        if( x != 0 )
            x /= magnitude;
        if( y != 0 )    
            y /= magnitude;
        if( td == true )
            if( z != 0 )
                z /= magnitude;
    }
    //Go The Desired Speed.//
    if( speed >=0 )
    {
        x *= speed;
        y *= speed;
    }
    if( td == true )
        z *= speed;
    vector.setX( x );
    vector.setY( y );
    vector.setZ( z );
    return vector;
}
inline float WSL::Math::Formulas::Dot::DotProduct( float x, float y, float mag )
{
    return ( mag = ( ( x ) * ( x ) + ( y ) * ( y ) ) );
}
inline float WSL::Math::Formulas::Dot::DotProduct( float x, float y, float z, float mag )
{
    return ( mag = ( ( x ) * ( x ) + ( y ) * ( y ) + ( z ) * ( z ) ) );
} 
```

标题：

```
 /*
This file is part of White - Storm: Lightning (alpha).

    Copyright 2012 Christopher Augustus Greeley

    White - Storm: Lightning (alpha) is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    White - Storm: Lightning (alpha) is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with White - Storm: Lightning (alpha).  If not, see <http://www.gnu.org/licenses/>.
*/
#include "Int Bool.h"
namespace WSL
{
    namespace Math
    {
        namespace Formulas
        {
            class Dot
            {
            public:
                inline float DotProduct( float x, float y, float mag );
                inline float DotProduct( float x, float y, float z, float mag );
            };
        }
        namespace Vector
        {
            struct VectorCalculator
            {
                VectorCalculator();
                WSL::Containers::Base::XYZ VectorCalculation( WSL::Containers::Base::XYZ goTo, WSL::Containers::Base::XYZ position, float speed, bool td );
                WSL::Containers::Base::XYZ VectorCalculation( WSL::Containers::Base::XYZ goTo, WSL::Containers::Base::XYZ *position, float speed, bool td );
                private:
                    WSL::Containers::Base::XYZ vector;
                    WSL::Containers::Base::XYZ default_;
                    float x, y, z, magnitude;
                    Math::Formulas::Dot magn;
            };
        }
    }
} 
```

对于上下文：

```
/*
This file is part of White - Storm: Lightning (alpha).

    Copyright 2012 Christopher Augustus Greeley

    White - Storm: Lightning (alpha) is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    White - Storm: Lightning (alpha) is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with White - Storm: Lightning (alpha).  If not, see <http://www.gnu.org/licenses/>.
*/
#include "Include.h"
namespace WSL
{
    namespace Containers
    {
        namespace Base
        {
            struct XYZB
            {
                inline float getX() { return X; }
                inline float getY() { return Y; }
                inline float getZ() { return Z; }
                inline void setX( float Value ) { X = Value; }
                inline void setY( float Value ) { Y = Value; }
                inline void setZ( float Value ) { Z = Value; }
                protected:
                    float X, Y, Z;
            };
            struct XYZ : public XYZB
            {
            public:
                XYZ( float x, float y, float z )
                {
                    X = x;
                    Y = y; 
                    Z = z;
                }
                inline XYZ() { X = 0; Y = 0; Z = 0; }
            };
        }
    }
} 
```

这些文件发现了问题：

```
/*
This file is part of White - Storm: Lightning (alpha).

    Copyright 2012 Christopher Augustus Greeley

    White - Storm: Lightning (alpha) is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    White - Storm: Lightning (alpha) is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with White - Storm: Lightning (alpha).  If not, see <http://www.gnu.org/licenses/>.
*/
#include "Vector.h"
WSL::Containers::Math::Vector::Vector()
{
    destinationInitialize = false;
    threeDimentional = false;
}
WSL::Containers::Math::Vector::Vector( WSL::Containers::Base::XYZ position_ )
{
    position = position_;
    destinationInitialize = false;
    threeDimentional = false;
}
WSL::Containers::Math::Vector::Vector( WSL::Containers::Base::XYZ position_, bool threeDimentional_ )
{
    position = position_;
    destinationInitialize = false;
    threeDimentional = threeDimentional_;
}
float WSL::Containers::Math::Vector::GetDestinationX()
{
    return destination.getX();
}
float WSL::Containers::Math::Vector::GetDestinationY()
{
    return destination.getY();
}
float WSL::Containers::Math::Vector::GetDestinationZ()
{
    return destination.getZ();
}
WSL::Containers::Base::XYZ WSL::Containers::Math::Vector::GetDestination()
{
    return destination;
}
WSL::Containers::Base::XYZ WSL::Containers::Math::Vector::GetPosition()
{
    return position;
}
float WSL::Containers::Math::Vector::GetX()
{
    return position.getX();
}
float WSL::Containers::Math::Vector::GetY()
{
    return position.getY();
}
float WSL::Containers::Math::Vector::GetZ()
{
    return position.getZ();
}
void WSL::Containers::Math::Vector::SetThreeDimentional( bool value )
{
    threeDimentional = value;
}
bool WSL::Containers::Math::Vector::GetThreeDimentional()
{
    return threeDimentional;
}
void WSL::Containers::Math::Vector::CalculateVector()
{
    vector = vectorCalculator.VectorCalculation( destination, position, speed, threeDimentional );
}
void WSL::Containers::Math::Vector::Move()
{
    position.setX( position.getX() + vector.getX() );
    position.setY( position.getY() + vector.getY() );
    position.setZ( position.getZ() + vector.getZ() );
}
void WSL::Containers::Math::Vector::SetPosition( WSL::Containers::Base::XYZ position_ )
{
    position = position_;
}
void WSL::Containers::Math::Vector::SetSpeed( float speed_ )
{
    speed = speed_;
}
void WSL::Containers::Math::Vector::SetDestination( float x, float y )
{
    destination.setX( x );
    destination.setY( y );
    if( destinationInitialize == false )
    {
        destinationInitialize = true;
        destination.setZ( 0 );
    }
}
void WSL::Containers::Math::Vector::SetDestination( float x, float y, float z )
{
    destination.setX( x );
    destination.setY( y );
    destination.setZ( z );
}
void WSL::Containers::Math::Vector::SetDestination( WSL::Containers::Base::XYZ destination_ )
{
    destination = destination_;
}
void WSL::Containers::Math::Vector::SetDestination( float allCoords )
{
    destination.setX( allCoords );
    destination.setY( allCoords );
    destination.setZ( allCoords );
}
void WSL::Containers::Math::Vector::SetVector( WSL::Containers::Base::XYZ vector_ )
{
    vector = vector_;
}
WSL::Containers::Base::XYZ WSL::Containers::Math::Vector::GetVector()
{
    return vector;
}
float WSL::Containers::Math::Vector::GetSpeed()
{
    return speed;
} 
```

标题：

```
/*
This file is part of White - Storm: Lightning (alpha).

    Copyright 2012 Christopher Augustus Greeley

    White - Storm: Lightning (alpha) is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    White - Storm: Lightning (alpha) is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with White - Storm: Lightning (alpha).  If not, see <http://www.gnu.org/licenses/>.
*/
#include "Engine.h"
namespace WSL
{
    namespace Containers
    {
        namespace Math
        {
            class Vector
            {
                WSL::Math::Vector::VectorCalculator vectorCalculator;
                WSL::Containers::Base::XYZ position;
                WSL::Containers::Base::XYZ destination;
                WSL::Containers::Base::XYZ vector;
                bool destinationInitialize, threeDimentional;
                float speed;
            public:
                Vector();
                Vector( WSL::Containers::Base::XYZ position_ );
                Vector( WSL::Containers::Base::XYZ position_, bool threeDimentional_ );
                void CalculateVector();
                bool GetThreeDimentional();
                void Move();
                void SetPosition( WSL::Containers::Base::XYZ position_ );
                void SetDestination( float x, float y );
                void SetDestination( float x, float y, float z );
                void SetDestination( WSL::Containers::Base::XYZ destination_ );
                void SetDestination( float allCoords );
                void SetSpeed( float speed_ );
                void SetThreeDimentional( bool value );
                void SetVector( WSL::Containers::Base::XYZ vector_ );
                float GetDestinationX();
                float GetDestinationY();
                float GetDestinationZ();
                WSL::Containers::Base::XYZ GetDestination();
                WSL::Containers::Base::XYZ GetPosition();
                WSL::Containers::Base::XYZ GetVector();
                float GetX();
                float GetY();
                float GetZ();
                float GetSpeed();
            };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:24:05.973

好的。因此，正如我在评论中所写的那样，我不知道您的问题的答案，但也许我可以提供一些可以帮助您找到问题的指针。

我的第一个建议是将您的代码从 lua 上下文中取出，并进行一个小单元测试来调试它。如果发布模式下的单元测试没有错误，那么您的问题就出在其他地方。如果仍然存在错误，您可能会发现您的代码中是否存在错误。如果您确定您的代码中没有错误，这里有一些指示

根据我的经验，当遇到预期没有的 NaN、零或 INF 并且输入或计算没有问题时，您可能需要检查您或您使用的任何库是否以任何方式更改浮点标志（在 Windows 中，您使用 controlfp 或 control87，使用 GCC，您有 FPU_SETCW FPU_GETCW 宏）此外，改变浮点计算完成方式的不匹配编译标志可能会导致此类问题。确保使用相同的浮点标志编译所有库。

您可能还想更改检查 mag 不为零的方式。您总是会遇到接近零的浮点值的麻烦。如果您不知道 Bruce Dawson 关于比较浮点数的文章，这里是最新版本的链接：[http ://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

如果这些都没有帮助，您可能会从 LUA 传递错误的数字。

# razor - 将 MVC3 应用程序迁移到 MVC4 的问题：编译器错误消息：CS1513：} 预期

> ID：12809855
> 
> 赞同：13
> 
> 时间：2012-10-09T23:26:30.960
> 
> 标签：razor, asp.net-mvc-4

这是一个非常奇怪的错误，我认为它可能是一个剃刀错误。我正在使用 VS 2012、MVC4、框架 4.5。

按照以下说明操作：[http](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806) ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806 我创建了一个新的 MVC4 项目，然后我将所有代码（控制器、视图、视图模型）从 MVC3 项目复制到它。

Eveything 工作得很好，直到我测试了一个 View ，它有一个自定义助手，它里面有一个`foreach`，一`switch`，三个`if`语句，然后我也在那里调用了其他一些自定义助手。

这两个项目中的代码完全相同，在 MVC3 中它可以工作，但在 MVC4 中它显示以下消息：

```
Compiler Error Message: CS1513: } expected 
```

所以我尝试添加一个大括号，但它显示相同的错误，所以我不断添加括号，它不会停止告诉我同样的事情。

我用谷歌搜索了这个问题，但我发现这个问题没有答案： [http ://www.1771.in/asp-net-mvc-4-issues-migrating-mvc3-view-in-vs-2012-rc.html](http://www.1771.in/asp-net-mvc-4-issues-migrating-mvc3-view-in-vs-2012-rc.html)

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T12:31:14.853

MVC4 的 Razor 解析器与 MVC3 不同。Razor v3 具有高级解析器功能，另一方面，与 MVC3 相比，它的解析更为严格。

如果您没有以正确的方式使用 razor 语法，则在将 MVC3 转换为 MVC4 时可能会遇到语法错误。

Razor v2 中不允许的一些常见 Razor 代码错误的解决方案是：

--> 除非有变量声明部分，否则避免在视图中使用服务器块。

```
Don’t : @{if(check){body}}
Recommended : @if(check){body} 
```

--> 当你已经在服务器范围内时避免使用@。

```
Don’t : @if(@variable)
Recommended : @if(variable)

Don't : @{int a = @Model.Property }
Recommended : @{int a = Model.Property } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T11:49:45.887

我有完全相同的问题。

在 Razor MVC3 中，我像这样访问变量：@vSuggestion 但在 MVC4 中，@ 不是必需的。

我的例子，我在 MVC3 中有这个代码工作：

```
@{
    var vSuggestion = ((dynamic)ViewData["suggestion"]);   
}
<!-- more code here --> 
@{ int suggestion = @vSuggestion;
   switch (suggestion)
   {
       case Suggestion.INCORRECT_PASSWORD:
       case Suggestion.USER_ALREADY_IN_DATABASE:  
           <span>Trata de iniciar sesión de nuevo</span><br />
           <span>Recupera tu contraseña @Html.ActionLink("aquí", "Recover", "Account")</span>
       break;
       case Suggestion.EMAIL_DONT_EXISTS:  
           <span>Comprueba que el correo electrónico está bien escrito</span><br />
           <span>Registrate (abajo)</span>
       break;
   }                 
} 
```

在 MVC4 中，Razor 没有从 switch 语句中捕获第一个花括号。所以我从@vSuggestion 中删除了@ 并正确解析了代码。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T16:37:09.800

我也遇到了这个“预期的}”问题，罪魁祸首原来**是 HTML 评论中的撇号。**这似乎是 Razor 中的一个错误。

下面是一个示例，说明如何在带有 VS 2012 的默认 MVC 4 应用程序中重现此问题。只需将以下带有撇号的注释添加到 default.cshtml 中的 @section 特色 {} 即可。从评论中删除撇号，它可以正常工作。

```
@section featured {
    <!-- hello world it's not cool --> 
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>...</p>
        </div>
    </section>
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T22:22:03.860

这可能是一个长镜头，但有时如果您使用关键字，则会导致该错误

关键字列表 VS 2012 [http://msdn.microsoft.com/en-us/library/x53a06bb%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/x53a06bb%28v=vs.110%29.aspx)

我知道 4.5 的两个新关键字是 await 和 async

有关我正在谈论的内容的示例，请参见以下内容 [http://www.wduffy.co.uk/blog/css-class-property-asp-net-mvc-htmlattributes/](http://www.wduffy.co.uk/blog/css-class-property-asp-net-mvc-htmlattributes/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T23:38:19.907

尝试在 web.config 中添加这一行

```
<compilation debug="true" batch="false"> 
```

现在，当出现错误时，您应该能够打开临时生成的 .cs 文件并查看生成的代码。

也许那时你会更容易发现问题。

有关详细信息，请查看此处[调试 ASP.NET 生成的代码](http://blogs.msdn.com/b/davidebb/archive/2010/02/03/debugging-asp-net-generated-code.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T13:48:15.637

为您解决 6/10 的最有帮助的事情是在 VS2012 中

文件-> 源代码管理-> 高级-> 格式化此文档。

这将解决任何未关闭的 div、条件语句，甚至是 ul 和 li，它们会导致 .net 出现大错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T02:24:05.600

我遇到了这个错误，但将其缩小到缺少斜线以关闭标签。这在 MVC3 中有效：

```
@helper metatags()
{
  <meta charset="utf-8">
} 
```

但在 MVC4 中没有。它需要这个：

```
@helper metatags()
{
  <meta charset="utf-8" />
} 
```

# azure - Azure - 许多站点 1 服务 ( blob )

> ID：12809858
> 
> 赞同：0
> 
> 时间：2012-10-09T23:26:57.217
> 
> 标签：azure, azure-blob-storage

假设我有 10 个网站和 1 个 blob（用于图像）站点/云服务/wcf/无论 MS 怎么称呼它，

所有 10 个网站如何使用这 1 个 blob 服务？例如，我希望每个站点都有管理页面

管理 blob 图像 ( crud ) ,

制作 Azure-WCF-Blob 服务，每个站点都会使用它？如何确保只有 10 个站点可以

有访问权 ？

其他选择？

（有1个DB没问题，只有连接字符串......）

**更新 ：**

我会问更简单，10 个网站，在每个网站我不想重复 10 次容器操作的代码，我如何创建 1 个 blob 服务/站点/这里最好的选择是什么/然后在每个站点？每个站点都会有一个 siteName/Admin 控制器，它可以管理容器/blob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:21:39.627

I'm not sure I fully understood the question, but based on the sentence "With 1 DB it's no problem, only connection string," I think what you're missing is that Windows Azure storage works the same way. You create a storage account, and from that you have an account name and key. In .NET, you even construct it as a connection string, so from all your websites, you would do:

```
var blobs = CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=mystorage;AccountKey=abcd1234...").CreateCloudBlobClient();
// do stuff with blobs here 
```

As long as you use the same connection string, all your websites will be using the same storage.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:42:20.950

好的，所以你在谈论 blob 存储。如果我理解您的问题，您似乎想确保一个网站无法访问其他网站的数据（图像）。在这种情况下，您有几个选择：

1.  1 个网站 = 1 个存储帐户。在 Windows Azure 中，您可以创建多个存储帐户。这些存储帐户每个都有自己的密钥，以便访问它们。如果您为每个网站创建一个存储帐户，则很容易限制对这些存储帐户的访问。
2.  您可以拥有一个包含多个容器的存储帐户。在每个容器上，您可以添加一个 SharedAccessBlobPolicy 来控制对容器的访问，而不受任何时间限制，但您需要[新的“未发布”版本的 SDK](https://github.com/WindowsAzure/azure-sdk-for-net/tree/sdk_1.7.1)来执行此操作。这将允许您的网站使用 SAS 签名访问特定容器（此访问权限可以随时撤销）。
3.  使用 WCF 服务自己构建一些东西，但这可能需要更多的工作。

# php - PHP SQL查询填充嵌套菜单？

> ID：12809860
> 
> 赞同：1
> 
> 时间：2012-10-09T23:27:12.373
> 
> 标签：php, jquery, sql

我正在建立一个网站，该网站在一年中的几个月内使用选项卡菜单，然后在每个月/选项卡内使用手风琴菜单来列出该月发生的所有事件。

我是在填充网站时使用 PHP 的新手，并且在使代码正常工作时遇到了一些麻烦。PHP 之前的代码看起来像这样：

```
<div class="tabscontainer">
<div class="tabs">
    <div class="tab selected first" id="tab_menu_1">
        <div class="link">$Month</div>
        <div class="arrow"></div>
    </div>
</div> 
```

```
<div class="curvedContainer">
<div class="tabcontent" id="tab_content_1" style="display:block">
    <div id="page">     
    <ul id="example4" class="accordion">
        <li>
        <h3>$EventListGoesHere</h3>
            <div class="panel loading">
                <p>Some content here.</p>
            </div>
        </li>
    </ul>
    </div>
</div> 
```

我试过使用 while 循环，但我一直在破坏我的代码。我尝试使用的while循环是：

```
<?php 
// Connects to your Database 
mysql_connect("iphere", "username", "password") or die(mysql_error()); 
mysql_select_db("dbname") or die(mysql_error()); 
$data = mysql_query("SELECT * FROM MonthTable") 
or die(mysql_error()); 
while($info = mysql_fetch_array( $data )) 
{ 
Print "My code here"; 
Nested SQL code to got through events table here.   
} 
?> 
```

我想我的问题是，我是否走在正确的道路上，如果是这样，有人可以告诉我标准代码应该如何适应 PHP while 循环吗？

我的数据库类似于：

月表
ID | 月短 | 月长
1 | 2012年十月 | 2012 年 10 月
2 | 2012年9月 | 2012 年 9 月

事件表
ID | 月号 | 活动
1 | 1 | 婚礼
2 | 1 | 成人礼
3 | 1 | 葬礼
4 | 2 | 生日
5 | 2 | 生日
6 | 2 | 婚礼

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:25:24.397

你可以只做一个查询。例如：

```
<?php

$sql = "
  SELECT
    a.id, b.id AS monthId, a.event, b.monthshort, b.monthlong
  FROM
    events_table_name AS a
  INNER JOIN
    month_table_name AS b ON b.id = a.monthId
  ORDER BY
    b.id, a.id ASC
  ";

// rest of db stuff here

$events = array();
$months = array();
while ($row = mysql_fetch_array($result)) {
  if (! isset($events[$row["monthId"]])) {
    $events[$row["monthId"]] = array();
  }
  $months[$row["monthId"]] = $row["monthlong"];
  $events[$row["monthId"]][] = $row["event"];
}

for ($x = 1; $x <= 12; $x++) {
  echo '<div class="tab" id="tab_$x">';
  if (isset($events[$x])) {
    echo '<div class="month-title">' . $months[$x] . '</div>';
    echo '<ul>';
    foreach ($events[$x] as $event) {
      echo "<li>". $event ."</li>";
    }
    echo '</ul>';
  }
  echo '</div>';
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:44:06.267

你得到什么错误？那个while循环很好。研究使用 mysqli。一个标准的 mysqli 循环是：

```
$db=new mysqli('host','user','pass');
$q=$db->query("SELECT * FROM db.table");
while ($f=$q->fetch_assoc()) {
     print_r($f);
     // echo "<br>"; 
} 
```

试试看，它会显示你为循环的每一行得到的数组。同样，您遇到了什么错误？

# jquery - 使下拉列表处于活动状态的 Twitter Bootstrap 导航栏

> ID：12809861
> 
> 赞同：1
> 
> 时间：2012-10-09T23:27:22.227
> 
> 标签：jquery, twitter-bootstrap

我有一个带有 2 个菜单和一个下拉列表样式菜单的引导 twitter 导航栏。

我的代码：

```
 <li class="active"><a href="#">Menu1</a></li>
            <li><a href="#">Menu2</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">DropdownList <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#">Action 1</a></li>
                    <li><a href="#">Action 2</a></li>
                    <li class="divider"></li>
                    <li class="nav-header">Header</li>
                    <li><a href="#">Separated action</a></li>
                </ul>
            </li> 
```

`<li class="active"...`仅在选择菜单或选择下拉菜单的aa子时才才能使菜单ACTIF（ ）菜单ACTIF（）？

我得到了这个脚本，但即使没有选择子菜单，它也会突出显示下拉菜单：

```
$('.nav li a').on('click', function() {
    $(this).parent().parent().find('.active').removeClass('active');
    $(this).parent().addClass('active');
}); 
```

干杯

# php - 使while循环变量成为全局变量

> ID：12809863
> 
> 赞同：4
> 
> 时间：2012-10-09T23:27:31.227
> 
> 标签：php, while-loop, global-variables

我想访问由我的 while 循环创建的最后一行（最后一个 $var ）。我尝试过这样的事情：

```
$bar= "";
while ($bar= mysql_fetch_array($foo)) {
    global $bar;
}
echo $bar 
```

为什么那行不通？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:34:43.960

发生这种情况是因为最后一次评估循环中的条件时，`mysql_fetch_array`返回`FALSE`，它被分配给`$bar`. 当您在控制退出 while 循环后使用它时，这就是`echo`ed 的值。要保留最后一个值，请分配给循环中的另一个变量；这样，它将具有条件评估为 false*之前*的最后一次迭代的值，而不是*after*。例如：

```
$last = null;
while ($row = mysql_fetch_array($q)) {
    $last = $row
}
var_dump($last) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:33:16.790

为什么不：

```
$bar = "";
$foobar = "";
while ($bar= mysql_fetch_array($foo)) {
global $bar;
$foobar = $bar;
}
echo $bar 
```

我不太确定你在用那个全局 $bar 做什么，但事实上只是分配了一个你想要的变量，它最后会保持正确的值，因为它是最后一次分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:41:23.497

通过使用while循环我们可以解决全局变量问题。首先从数据库中获取数据，然后我们将获取的值分配到任何变量中以在while循环中使用。

```
$bar = "" ; 
while ($bar =mysql_fetch_array($foo)){ 
global $bar; 
$foobar = $bar;
} 
echo $bar; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T00:52:47.237

由于在 while 循环中填充了 $bar ，因此没有必要进行`$bar`全局设置。`mysql_fetch_rows`每次 while 循环运行时，$bar 的内容都会被 MYSQL 数据库中的下一行结果替换，当`mysql_fetch_rows`行数用完时，它会填充`$bar`一个 false 布尔值。

```
$bar =""; // Value of $bar is "".

while ($bar = mysql_fetch_array($foo)) {
$bar // $bar is an array with a row from $foo
}
// mysql_fetch_array return false and the while loop was aborted, so we end up here
echo $bar // $bar is now false. 
```

如果您想访问从数据库中检索到的所有行，您可以执行类似的操作。

```
$foobar = array();
while ($bar = mysql_fetch_array($foo)) {
$foobar[] = $bar;
}
//Dostuff with $foobar, ex print_r($foobar); 
```

# struts2 - 如何将 struts.xml 中的常量值放入 Struts 2 的注释 @Result 中？

> ID：12809875
> 
> 赞同：2
> 
> 时间：2012-10-09T23:29:02.330
> 
> 标签：struts2, annotations, constants

我想得到一个声明到 struts.xml 示例中的值常量

```
<constant name="my.name" value="William Miranda de Jesus"></constant> 
```

在我的操作中，我为我的结果添加了注释

```
@Result(name="input",  location="/etc/htdocs/_templates/${my.name}/error.vm", type="velocity") 
```

这可能吗 ？我需要配置什么？

谢谢

# jmeter - 在 JMeter 中绘制自定义变量

> ID：12809877
> 
> 赞同：3
> 
> 时间：2012-10-09T23:29:08.830
> 
> 标签：jmeter

我有一个简单的“Java 请求”采样器（即：AbstractJavaSamplerClient）。如何从此采样器生成自定义变量并绘制这些变量？（最好使用开箱即用的图形侦听器）。目前我只能轻松绘制采样时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:57:29.543

将您的 var 放入 JMeter：

```
JMeterContextService.getContext().getVariables().put("YOUR_VAR", value) 
```

并添加 user.properties：

```
sample_variables=YOUR_VAR 
```

您的 var 将以 CSV 或 XML 格式输出。

然后你就可以使用它了。

# java - 使用 Graphics2D 多次处理图像

> ID：12809885
> 
> 赞同：3
> 
> 时间：2012-10-09T23:30:22.397
> 
> 标签：java, image, graphics2d

我试图弄清楚如何拍摄图像并使用 Graphics2D 来操作它，同时能够对同一图像执行多个操作（因此将其变暗两次会使它比一次变暗）。我发现的每一个例子都是为了处理一次图像并显示它。我需要能够多次显示图像。例如，假设我有一个带有选项 1、2、3 等的菜单，1 将其变暗，2 将其变亮，3 显示图像。

我将如何实现这一目标？我可以获取图像，将其变暗，旋转并显示它，但不能通过菜单或其他用户选择何时何地的方式。如果有人可以将我链接到一个可以做到这一点的网页，或者写一个简短的（越短越好）一个类程序来做我所描述的，我应该能够开始。

基本上，我需要能够做这样的事情：

```
initialize image;
display(image);
lighten(image); 
```

我不明白的是，我如何使用 Graphics2D 操作图像，并将其应用于我的图像。

这是我到目前为止所拥有的（主要来自[这里](http://beginwithjava.blogspot.ca/2009/02/rotating-image-with-java.html)）：

```
import java.awt.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class ShowImage extends JPanel {
Image img;

        public ShowImage() {
            super();
            img = Toolkit.getDefaultToolkit().getImage("image.png");
        }

        public void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            g2d.translate(170, 0);
            g2d.rotate(1);
            g2d.drawImage(img, 0, 0, this);
        }

        public static void main(String arg[]) {
            JFrame frame = new JFrame("Image Example");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setSize(600, 400);

            ShowImage panel = new ShowImage();
            frame.setContentPane(panel);
            frame.setVisible(true);
    }
} 
```

目前，我正在paintComponent() 中进行所有操作，因此操作起来一点也不轻松。有没有办法在 main 中设置 Graphics2D 变量，然后以某种方式将其放入 paintComponent() 中？我完全不知道该怎么做。

我试图发布我查看过的所有网页的链接，但它不会让我发布两个以上的链接，因为我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:53:32.487

如果您需要在内存中操作图像，请创建一个 BufferedImage，然后调用 BufferedImage.createGraphics() 来访问用于绘制到图像缓冲区中的图形对象。

当您想将该图像渲染到 UI 中的组件上时，请像您所做的那样使用该组件的 paintComponent() 方法。请注意，这涉及两个单独的图形对象，用于两种不同的目的。

# extjs - ExtDoc + @private 属性

> ID：12809888
> 
> 赞同：1
> 
> 时间：2012-10-09T23:30:44.297
> 
> 标签：extjs, documentation, annotations

我正在使用 ExtDoc [code.google.com/p/ext-doc/] 生成与 Javascript 应用程序关联的文档。问题是当我尝试声明私有属性时，该属性将永远不会出现在生成的文档中。

这是使用的注释

```
/**
* This is a Private Property
* @type String
* @property name
* @private
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T11:02:34.640

ExtDoc 已过时，不再维护。而是使用[JSDuck](https://github.com/senchalabs/jsduck)，它是 Ext JS 的新官方文档生成器。

# dependencies - RPM 缺少依赖项

> ID：12809889
> 
> 赞同：1
> 
> 时间：2012-10-09T23:30:47.770
> 
> 标签：dependencies, rpm

我正在创建一个具有以下共享对象的 RPM：

```
libexample.so --> libexample.so.1.0.1
libexample.so.1.0.1 
```

当我使用 RPM 创建 RPM 时`rpmbuild`，我看到 rpm 提供了`libexample.so.1.0.1`. 但是，在我看到的要求部分`libexample.so`

在`makefile`我提到的项目中`libexample.so`

当我尝试安装 rpm 时，它会出现错误`"Missing dependency: libexample.so"`，即使它被打包为指向的链接文件`libexample.so.1.0.1`

所以问题是不知何故 RPM 没有考虑到我正在打包`libexample.so`（这是一个链接`libexample.so.1.0.1`）

但是，我使用选项安装了 rpm `--nodeps`，一切正常。

所以，我的问题是我应该如何修改以避免出现缺少依赖项的错误。

为了验证缺少的依赖项是由链接文件引起的，我 `libexample.so`从链接文件更改为实际的共享对象 ( `cp libexample.so.1.0.1 libexample.so`)，并且 rpm 没有给出缺少依赖项的错误。

有人可以帮助告诉我我缺少什么以及如何修复 RPM 中缺少的依赖项错误。非常感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:50:09.007

Try running

```
rpm -q --requires _your_rpm_name_ 
```

And see if it's returning anything different from what you're expecting. I suspect the automatic dependency scripts may be setting the dependencies to something other than what you're expecting. You can disable to automatic dependencies by adding the tag below to your spec file, and then calling out your required packages manually:

```
AutoReqProv: no
Requires: _rpm_providing_libexample.so_ 
```

See [http://ftp.rpm.org/max-rpm/s1-rpm-depend-auto-depend.html](http://ftp.rpm.org/max-rpm/s1-rpm-depend-auto-depend.html) and [http://ftp.rpm.org/max-rpm/s1-rpm-depend-manual-dependencies.html](http://ftp.rpm.org/max-rpm/s1-rpm-depend-manual-dependencies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T11:43:39.537

I'm no expert, but I think that the problem is that RPM does not know about sonames. If the RPM file has a dependency, it checks the RPM system.

See [my blog post](https://sparkyandsusi.wordpress.com/2016/04/29/psa-rpms-and-required-libs/).

# ruby-on-rails - 如何在 Rails 中加载 div 以响应对另一个 div 的点击？

> ID：12809890
> 
> 赞同：0
> 
> 时间：2012-10-09T23:30:47.100
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我对 Rails（和 Web）编程非常陌生，所以我什至不确定我应该为此寻找什么技术。

[我已经下载并运行了Rails 教程](http://ruby.railstutorial.org/)的前五章，但现在有一个非常简单的请求。

在网页的左侧，我将有一个表格。如果用户单击该表中的元素，我希望页面的右侧显示一些新内容。

我已经有一个页面来显示表格，即：

```
<div class="center hero-unit">
   <div class="container">
   <h2>2012 Yearly Report</h2>
     <div class="row-fluid">
       <div class="span12">
           <div class="span4">
            <table border="1">
            </table>
           </div>
           <div class="span6">
                <!-- load stuff here based on what someone clicks on in the table -->
           </div>
         </div>
      </div>
   </div>
</div> 
```

我正在使用[引导布局](http://twitter.github.com/bootstrap/scaffolding.html#layouts)来显示所有内容。我只是不明白如何根据“span4”中的用户行为更改“span6”div 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:31:04.560

这是一个很难回答的问题。这实际上取决于您要显示什么样的数据以及您正在寻找什么样的交互性。

您并没有真正提供有关您要完成的工作的太多信息，但如果我不得不猜测，您正在尝试从数据库加载数据并将其插入到元素中而不离开当前页面。这就是 AJAX 的用途（您的教程将在第 11 章详细介绍）并且涉及大量 javascript，这通常超出了像 Ruby 这样的服务器端语言的范围。幸运的是，rails 包含帮助程序，可以轻松地将 AJAX 功能包含到您的 Web 应用程序中，而无需编写大量 javascript（尽管您必须编写一些）。

例如，假设您的表格有一个文章列表，并且您希望在单击其链接时在 div 中显示文章的内容。

首先是链接：

```
<%= link_to article.name, article_url(article), :remote => true %> 
```

remote 选项告诉 Rails 它是一个 AJAX 链接。

接下来，您需要为文章的显示操作呈现一个 javascript 模板。您将其命名为 show.js.erb。

假设您希望将数据加载到的 div 如下所示，

```
<div id='article-content'></div> 
```

你会希望你`show.js.erb`包含以下内容：

```
$('#article-content').html("<%=javascript_escape @article.content %>"); 
```

当单击您的远程链接之一时，将评估此 javascript（带有嵌入的 ruby​​）代码，并将您的 div 的内容替换为文章的内容。

网上有很多资源可以为您提供更多信息。看起来[railscasts](http://railscasts.com/)一周前刚刚发布了[关于这个主题的一集。](http://railscasts.com/episodes/136-jquery-ajax-revised)它需要订阅才能查看，但非常值得（特别是如果您刚刚开始）。

# jquery - jQuery Live + mouseup 功能，只让子元素处于活动状态

> ID：12809898
> 
> 赞同：1
> 
> 时间：2012-10-09T23:32:21.310
> 
> 标签：jquery, live, mouseup

HTML

```
<div class="mybox" id="element1">
    <div class="mybox" id="element2">
        <div class="mybox" id="element3">
        </div>
        <div class="mybox" id="element4">
        </div>
    </div>
</div> 
```

JS

```
$(".mybox").live("mouseup", function(event) {
   alert($(this).attr("id"));
}); 
```

好的，所以我的问题是如何只获取活动的 div（我点击的那个，而不是所有的父母）。当我点击 element2 时，我得到 element2，然后“element1”处于活动状态，当我点击 element3 时，我得到 element2，然后 element1 再次处于活动状态，等等。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:35:40.573

您看到所有这些警报的原因是由于事件冒泡。每次单击元素时，事件都会沿链向上传播。沿途附加了点击事件的每个元素都将被执行。

为确保仅在单击当前元素时执行代码并忽略冒泡事件，请更改您的事件以检查当前元素是否是您使用[**event.target**](http://api.jquery.com/event.target/)单击的元素，然后才执行您的预期代码：

```
$(".mybox").live("mouseup", function(event) {
    if(event.target === this){
       alert($(this).attr("id"));
    }
});​ 
```

### [演示](http://jsfiddle.net/AcJT7/)- 使用现场

如果您使用 jQuery 1.7 或更高版本`live()`已被弃用，并且[**on()**](http://api.jquery.com/on) 现在是附加和删除事件的首选方式。

要`on()`改用，您可以这样做：

```
(document).on("mouseup", ".mybox", function(event) {
    if (event.target === this) {
        alert($(this).attr("id"));
    }
});​ 
```

### [演示](http://jsfiddle.net/7EhuV/)- 使用 on()

使用时，`on()`您指定最接近的静态元素，在上面的示例中是文档。但是，如果您有更接近的静态元素，则应该使用它而不是`document`.

我已在答案中链接了所有必需的文档，但要再次总结。

### 资源

*   [**live()**](http://api.jquery.com/live) - 有关于为什么它被弃用的所有细节
*   [**on()**](http://api.jquery.com/on) - 自 1.7 起首选
*   [**delegate()**](http://api.jquery.com/delegate) - 从 1.4.2 或更高版本开始可以使用它来代替 live

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:44:31.193

正如弗朗索瓦所写，这种效应被称为“事件冒泡”。但是 jquery 有它自己的功能来防止事件上链：[stopPropagation](http://api.jquery.com/event.stopPropagation/)

```
$("p").click(function(event){
  event.stopPropagation();
  // do something
}); 
```

只有当这对您的特殊情况不起作用时，您才应该使用比较事件目标的解决方案。

# html - WYGWAM 文本编辑器覆盖 ExpressionEngine 中的 CSS 设置

> ID：12809900
> 
> 赞同：0
> 
> 时间：2012-10-09T23:32:26.040
> 
> 标签：html, css, wysiwyg, expressionengine, word-wrap

如何阻止 ExpressionEngine 中的 WYGWAM（所见即所得编辑器插件）覆盖我已有的 css 设置？我知道其中一些不会被覆盖，因为文本是正确的颜色。

![在此处输入图像描述](../Images/22eadabbf9009d2ee72cdebe5af392d5.png)

但是，我设置了左列的宽度，该列包含包含 WYGWAM 条目的 div，以及文本 WON'T WRAP。

另外，CKEditor 和 WYGWAM 有什么区别？

只是一个卑微的实习生......非常感谢！

更新：

```
<div id="leftColumn">       
    <div id="landingBodyCopy" class="landingBodyCopyText">
        {landing_body_copy}
    </div>
    <br>

    <div id="graphicLinks">
        {embed="in-store-analytics/retail-analytic" quote="{quote}"}
    </div>
</div> 
```

和CSS：

```
#leftColumn{
    float:left;
    width: 400px;
    bottom: -50px;
    height: 600px;
 }
 #landingBodyCopy {
    width: 400px;
    height: 500px;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T23:04:07.180

部分问题可能是您使用 WYGWAM 进行布局。通常为页面上的每个内容块创建一个字段更合适。例如，主列的单个字段，可能是下拉或 Playa 字段来选择正确的列，或者是文件字段来为其选择图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:33:18.623

要回答您问题的第二部分 - Wygwam 是一个 ExpressionEngine 插件，它捆绑了 CKEditor（一个开源组件）并将其包装起来以使其与 EE 很好地配合使用。

要回答您问题的第一部分-您尚未指定 Wygwam 将覆盖您不想要的内容，因此很难提供帮助。不过，我建议您阅读 CSS“重要性”。例如，如果您将文本区域包装在 div 中并根据该 div 的 ID 应用样式，它们通常会优先于 wygwam 添加的内容（取决于具体情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T13:40:17.420

如果要防止文本溢出其包含的 div，则需要允许 div 随内容一起扩展，或者阻止显示额外的文本。根据哪一个对您的情况有意义，您需要从 CSS中删除`height: 600px`and或添加到规则中。`height: 500px``overflow: hidden``#landingBodyCopy`

# haskell - Cabal：阻止安装基础包

> ID：12809903
> 
> 赞同：3
> 
> 时间：2012-10-09T23:32:34.907
> 
> 标签：haskell, ghc, cabal, cabal-install

我在 Ubuntu 12.04 和 ghc 7.4.1 上使用 cabal-install 1.14.0。

我尝试安装的一些 cabal 软件包正在拉入[`directory-1.2.0.0`](http://hackage.haskell.org/package/directory-1.2.0.0)，这需要 ghc 7.6。有没有办法配置 cabal 甚至不尝试安装 directory-1.2.0.0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:37:16.067

您可以使用约束，

```
cabal install foo --constraint="directory < 1.2" 
```

或者，正如[Daniel Wagner 提醒我](https://stackoverflow.com/questions/12809903/cabal-blocking-base-packages-from-installing/12809940#comment17325121_12809940)的那样，更好，因为它确实可以防止重新安装，

```
cabal install foo --constraint="directory installed" 
```

如果您希望全局使用，请将其添加到您的 cabal 配置文件（Linux 和 Mac 上的 ~/.cabal/config，Windows 上的 \Users\You\AppData 中的某处，iirc），该文件有一行

```
-- constraint: 
```

取消注释并添加约束。

# django - 获取在 Django 上可访问的静态文件

> ID：12809905
> 
> 赞同：0
> 
> 时间：2012-10-09T23:32:50.830
> 
> 标签：django

*我正在使用 Django 1.4*

我的静态文件似乎没有运行，或者 html 文件中的 {{ STATIC_URL }} 错误。

在设置中，我加载了静态文件：

```
STATICFILES_DIRS = (
    'C:/Users/dtc/Documents/Eclipse/java_applet/applet',
)

STATIC_ROOT = ''

STATIC_URL = '/static/' 
```

在 url.py 我有：

```
urlpatterns += staticfiles_urlpatterns() 
```

在 html 文件中，我有：

```
<html>
<title>The Hello, World Applet</title>

<img src="{{ STATIC_URL }}tets.png" />

<applet code="{{ STATIC_URL }}HelloWorldApplet.class" width="320" height="120">
If your browser was Java-enabled, a "Hello, World"
message would appear here.
</applet>

</html> 
```

现在，当我运行服务器时，我可以从 localhost:8000/static/file 下载静态文件，这意味着它应该在那里吗？但是当我加载页面时，小程序或图像都没有出现。作为最终目标，我要做的就是在我的开发服务器上运行一个小程序，但我似乎无法弄清楚为什么 {{ STATIC_URL }} 不起作用（我什至在它之后添加了一个反斜杠以防万一原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:42:46.767

看看这个`RequestContext`类，这可能就是你要找的。在 SO 上也可以看到[这个答案。](https://stackoverflow.com/questions/3756841/django-media-url-blank)

# iis-7.5 - 协助从 Visual Studio 设置中进行 Web 部署

> ID：12809906
> 
> 赞同：1
> 
> 时间：2012-10-09T23:32:57.450
> 
> 标签：iis-7.5, visual-studio-2012, publishing, msdeploy, webdeploy

我正在努力在 IIS 7.5 上设置 Web 部署。我完全按照本文中的步骤进行操作：

[http://www.iis.net/learn/publish/using-web-deploy/configure-the-web-deployment-handler](http://www.iis.net/learn/publish/using-web-deploy/configure-the-web-deployment-handler)

我已经在服务器上测试了导入和导出应用程序，并且一切正常。现在我想设置对 ms deploy 的远程访问，这样我就可以通过在 Visual Studio 2012 中使用发布配置文件发布来安装 Web 应用程序。

这是我感到困惑的地方，我在其中包含的服务 url 的 url 是什么（即 msdeploy.axd）？我在哪里可以在服务器 iis 上找到它（服务器与 Visual Studio 位于不同的机器上）？我已阅读有关通过端口 8172 进行访问的信息，如何检查该端口是否可以进行通信？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T03:38:06.653

首先，您需要的安装说明是网站“安装”部分中的[安装和配置 Web 部署](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)。您链接的说明来自 2008 年。

根据较新的说明安装 MSDeploy v3 后，该`MSDeployServiceURL`值将为`https://webserver:8172/msdeploy.axd`. `<AllowUntrustedCertificate>true</AllowUntrustedCertificate>`如果您在服务器上没有证书，您可能还需要设置。

除非您设置了非管理员部署（同一链接中的说明），否则相关用户将需要是管理员。

# .net - Dapper GridReader 已经处理错误

> ID：12809907
> 
> 赞同：5
> 
> 时间：2012-10-09T23:33:02.277
> 
> 标签：.net, sql, sql-server, dapper

我正在使用 Dapper dot net 执行一个返回 4 个结果集的存储过程。这是我的做法：

```
 public Results Search(Query query)
    {
        if (query == null) throw new ArgumentNullException("query");

        Results results;
        var q = _sqlConnection.QueryMultiple("MySchema.MySproc", query,
                                             commandType: CommandType.StoredProcedure);
        {
            results = q.Read<Results>().First();
            results.CheckAlertResults = q.Read<Results.CheckAlertResult>().ToArray(); // Cannot access a disposed object.Object name: 'GridReader'.
            results.PersonAlertResultRows = q.Read<Results.PersonAlertResultRow>().ToArray();
            results.RoutingAlertResults = q.Read<Results.RoutingAlertResult>().ToArray();
        }

        return results;
    } 
```

第一个结果集将仅包含 1 行。它对应于我的`Results`类上的几个原始属性。

其他 3 个结果集将有很多行，并将填充`Results`类上的 3 个复杂数组属性。

出于某种原因，我得到

> 无法访问已处置的对象。对象名称：“GridReader”。

检查我的代码，看看在哪里。

我已经验证从使用 Linq2Sql 的 LinqPad 调用该过程时可以正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T10:40:19.610

阅读器在找不到更多结果网格时会自行处理；基本上，您的 C# 代码看起来不错，但建议是您的 proc 只返回 1 个网格。以下工作正常，例如：

```
using (var reader = connection.QueryMultiple(
    "select 1; select 2 where 1 = 0; select 3 where 1 = 0; select 4;"))
{
    var one = reader.Read<int>().ToArray();
    var two = reader.Read<int>().ToArray();
    var three = reader.Read<int>().ToArray();
    var four = reader.Read<int>().ToArray();
    try { // only returned four grids; expect a fifth read to fail
        reader.Read<int>();
        throw new InvalidOperationException("this should not have worked!");
    }
    catch (ObjectDisposedException) {/* expected; success */}

    one.Length.IsEqualTo(1);
    one[0].IsEqualTo(1);
    two.Length.IsEqualTo(0);
    three.Length.IsEqualTo(0);
    four.Length.IsEqualTo(1);
    four[0].IsEqualTo(4);
} 
```

我可能会尝试改进错误消息，但我*怀疑*错误出在您的 SP 中。

# awk - 计算符合某些条件的金额行的有效方法

> ID：12809909
> 
> 赞同：6
> 
> 时间：2012-10-09T23:33:16.677
> 
> 标签：awk

我正在尝试使用 awk 命令计算文件中第 4 个字段大于第一个字段的行数我想出了这个命令：

```
awk '$4>$1 {print}' sampleFile | wc -l 
```

有没有更好的方法来查找数字而不是使用`wc -l`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T23:39:14.603

一种使用方式`GNU awk`：

```
awk '$4 > $1 { count++ } END { print count }' file.txt 
```

# java - 检查输入的字符串是否仅包含 1 和 0

> ID：12809914
> 
> 赞同：10
> 
> 时间：2012-10-09T23:33:36.073
> 
> 标签：java

我正在编写一个将二进制数转换为十进制数的程序，并且只是一个新手程序员。我试图确定输入的字符串是二进制数，这意味着它只包含 1 和 0。到目前为止，我的代码是：

```
 String num;
  char n;

  Scanner in = new Scanner(System.in);
  System.out.println("Please enter a binary number or enter 'quit' to quit: ");
  num = in.nextLine();
  n = num.charAt(0);
  if (num.equals("quit")){
    System.out.println("You chose to exit the program.");
    return;
  }

  if (n != 1 || n != 0){
    System.out.println("You did not enter a binary number.");
  } 
```

照原样，无论输入什么（除此之外），即使输入了二进制数，程序也会输出“您没有输入二进制数”。我确信我的 if 语句是错误的或者我的性格声明是错误的，但是我已经尝试了我个人所知道的一切来纠正这个问题，但我在网上找不到任何帮助。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T23:35:55.257

您可以只使用正则表达式：

```
num.matches("[01]+") 
```

这将是`true`如果字符串`num`仅包含`0`和`1`字符，`false`否则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:39:09.497

`n!=1 || n!=0`总是正确的，因为你不能同时拥有 n = 0 和 1。我猜你想写`n!=1 && n!=0`。

# parsing - 此错误仅存在于设备上。在模拟器中一切正常

> ID：12809920
> 
> 赞同：1
> 
> 时间：2012-10-09T23:34:39.003
> 
> 标签：parsing, networking, webclient

此错误仅存在于设备上。在模拟器中一切正常。

我们的应用程序下载了一定数量的文件。之后，我解析 obj 和 mtl 文件以获取 3D 数据。然后，如果我尝试下载更多文件，它会下载大约 10 个左右的文件，然后开始将它们发送到连接队列，此时每次下载都会超时。如果我从下载中优雅地弹出然后重试每个文件超时。就像网络连接消失了一样。这仅在我运行解析后发生。如果我删除解析，一切都会很好。

# java - 没有 Maven 的 Vaadin Clojure 小部件编译

> ID：12809925
> 
> 赞同：2
> 
> 时间：2012-10-09T23:35:16.820
> 
> 标签：java, gwt, maven, clojure, vaadin

我正在使用 clojure 和 vaadin 开发应用程序。我正在尝试使用 vaadin 附加组件中的 ace 编辑器小部件。我已将 maven 存储库添加到我的 leiningen 文件中，并且可以很好地获取 jar，但是当我尝试使用它时，我得到了一个，

```
Widgetset does not contain implementation for org.vaadin.aceeditor.AceEditor. 
Check its @ClientWidget mapping, widgetsets GWT module description file and 
re-compile your widgetset. 
```

浏览器上的错误。他们的文档假设每个人都使用 maven 或 eclipse。所以我的问题是 eclipse 插件在幕后到底做了什么，所以我可以编写一个脚本来在 leiningen 中模拟它？（我对 GWT 或 maven 都不熟悉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:34:19.033

例如，GWT Compiler 只是一个可以使用 Ant 运行的 Java 应用程序。[您可以从此处](https://vaadin.com/netbeans/build-widgetset.xml)找到编译小部件集的 Ant 脚本示例。Ant 脚本使用了一些 Netbeans 特定的东西，但它应该很容易修改，使其不依赖于 Netbeans。

# html - CSS中的四列页脚

> ID：12809926
> 
> 赞同：0
> 
> 时间：2012-10-09T23:35:26.650
> 
> 标签：html, css

早上好，

我正在使用纯 CSS 开发一个四列页脚，但我遇到了一些问题：1）我无法在每列旁边设置垂直 1px 白色规则 2）背景不覆盖整个四列 3）在 Chrome 中，列没有出现在一个单一的宽度上，第四个被撞到下面。

这是我的代码：http: [//jsfiddle.net/eLzPk/](http://jsfiddle.net/eLzPk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:43:55.067

如果您知道页脚的确切宽度，则可以使用纯 css 执行此操作。我刚刚在前 3 列中添加了右边框。仅供参考，您忘记在 CSS 中声明边框的颜色。我还将列的宽度更改为 235px，即 940 / 4。前 3 个有 1px 边框，所以它的宽度是：234px 加上边框。这是小提琴[http://jsfiddle.net/eLzPk/7/](http://jsfiddle.net/eLzPk/7/)

```
#footer dl {
    background: black;
    float: left;
    margin: 0;
    padding: 10px 0 5px 0;
    width: 234px;
    border-right: 1px solid #fff;
}

#footer dl + dl + dl + dl {
    width: 235px;
    border-right: none;
} 
```

**编辑**

进一步解释css的一个问题是在声明的宽度上添加了边框和边距，所以如果你有四列宽度为：25%，边框为1px来创建分割线，实际上是100% + 3px，当然大于 100%，所以它会导致 css 换行。

在 css 中有 2 个新的解决方案，其中一个是相当受支持的，它称为 box-sizing，这是一篇很好的参考文章。 [http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/) 基本上它将框调整为声明的宽度，并在其中添加边框和边距。缺点是它不受 IE7 和后面的支持。因此，要正确使用它，最好使用 IE 条件语句并为这些浏览器实现一些 css/js hack。

另一个解决方案是 flexbox 模型，它还没有多少支持。但值得一看。它允许您拥有任何大小的容器，并使用比率调整其中的子项大小，轻松地将它们垂直或水平放置等。它解决了盒子模型问题以及各种定位和居中问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:55:55.960

这样的事情怎么样？在其中添加另一个具有固定大小的 Div 容器，以适应浏览器的大小。然后可以使用#footer 中的注释代码拉伸背景。创建 div 大小时，您必须注意边距、填充和边框。

每个像素都很重要；）

希望这有帮助的任何人！底部的 jsFiddle 链接

```
#footer {
    background: black

    /* This would be your Background Image code for whole Footer.
    background: url(FOOTER IMAGE) no-repeat center center fixed;             
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
   */

    padding-right: 15px;
    position: relative;
    min-height: 250px;
    text-align: center;
    width:100%;
    margin-left:auto;
    margin-right:auto;
} /*IE6*/
#footerContainer {
    width:940px;
    height:250px;
    display:block;
}

#footer dl {
    display:inline-block;        
    background: black;
    float: left;
    text-align: left;
    margin: 0px;
    padding: 10px 0 5px 10px;
    width: 224px; /* Take into account the 1px Border & padding*/
    height:inherit;
    border-left: 1px solid white;
} 
```

**像这样的东西：http: [//jsfiddle.net/GFargo/eLzPk/1/](http://jsfiddle.net/GFargo/eLzPk/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:04:53.220

正如 ACJ 所说：

> 边框宽度（1 像素）加到宽度上，所以四倍 25% 加上 4 像素总是大于 100%

你最好定义一些设定值来解决这个问题。

您的速记边框属性不起作用，因为尽管您定义了宽度（1px），它的类型（实心），但您缺少（颜色）。

如果您也在使用 HTML5，您也可以使用该标签...

粗略地，经过一些调整：http: [//jsfiddle.net/eLzPk/8/](http://jsfiddle.net/eLzPk/8/)

# utf-8 - 确保从扩展 ASCII 编码为 UTF8 时的一致性

> ID：12809927
> 
> 赞同：0
> 
> 时间：2012-10-09T23:35:32.187
> 
> 标签：utf-8, character-encoding, extended-ascii, asciiencoding

也许这不是问题，但我期待 SO 收集的智慧来帮助我找出答案。

我们正在努力确保跨平台的编码是一致的。要走的路显然是UTF8。但是，不幸的是，某些平台使用扩展的 ASCII（通常是某种形式的 Windows 代码页），我们担心当使用变音符号从 Windows 代码页到 UTF8 进行编码时，在 UTF8 中对于字符有多种可能的选择。

在不同的平台（Linux、Mac OS）上，我们如何确保那里选择的 UTF8 字符是一致的？

正如我所说，也许这不是问题。也许有一些我不知道的标准映射。我们没有看到任何问题，但一位同事刚刚提出了这个问题，所以我正在寻找信息。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:11:56.230

Unicode 联盟编制了一组[映射表](http://www.unicode.org/Public/MAPPINGS/)。名义上是信息性的，它们构成了事实上的标准。此外，那里的许多映射反映了正式标准，因为按照 Unicode 定义任何新的字符编码已成为常态，即通过指定每个字符的 Unicode 编号（和/或 Unicode 名称）。

一旦一个字符被映射到 Unicode（即，到一个 Unicode 代码点或 Unicode 数字），它在每个 Unicode 编码中的编码，例如 UTF-8，就已经被明确定义了。

所以问题是如何确保您使用的转换例程根据这些表工作。使用[ICU](http://site.icu-project.org/)在这方面可以认为是安全的。

PS 没有扩展的 ASCII。有各种字符编码，其中一些与 ASCII 在 0 到 0x7F 的范围内一致，有些则不然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:49:25.903

只要您首先将原始文本正确转换为 Unicode，然后使用 Utf8 存储/传输数据，就应该没有问题。

# android - Parcelable 和继承

> ID：12809928
> 
> 赞同：6
> 
> 时间：2012-10-09T23:35:34.020
> 
> 标签：android, inheritance, bundle, multiple-inheritance, parcelable

这已经在 SO 上被问过几次了，但我的情况有点不同。

我有实现 Parcelable 的 A 类。A类包含一些可以打包的成员数据。它有自己的`CREATOR`并实现`writeToParcel()`,`describeContents()`和一个接受 a 的构造函数`Parcel`。

有一个类 B 是从类 A 扩展而来的。类 B 有额外的成员数据，但**它们都不需要 parceled**。基本上，B 类的可打包数据与 A 类相同。如果我尝试将 B 放入一个 Bundle 中，将其传递给另一个 Activity，然后再读取它，我会得到一个 ClassCastException。我想这是预期的。

经过一番反复试验，为了使 B 类可打包，我必须至少实现以下两件事：

```
public static final Parcelable.Creator<B> CREATOR
        = new Parcelable.Creator<B>() {
    public B createFromParcel(Parcel source) {
        return new B(source);
    }

    public B[] newArray(int size) {
        return new B[size];
    }
};

public B(Parcel in) throws JSONException {
    super(in);
} 
```

所以我关心的是这个。大约有六个或更多类从 A 扩展，并且都具有与 B 相同的问题。似乎很愚蠢的是，它们中的每一个都必须添加自己的静态`CREATOR`和接受 a 的构造函数，然后`Parcel`才将其传递回 A . 其他一切都是一样的。唯一使它不同的是类的名称。它首先打破了继承的目的。

例如，如果有另一个类 C 扩展 B，我需要做同样的事情：

```
public static final Parcelable.Creator<C> CREATOR
        = new Parcelable.Creator<C>() {
    public C createFromParcel(Parcel source) {
        return new C(source);
    }

    public C[] newArray(int size) {
        return new C[size];
    }
};

public C(Parcel in) throws JSONException {
    super(in);
} 
```

Java中是否有某种巧妙的技术来自动化这个过程？也许使用某种泛型？如果没有其他办法，我干脆去掉继承血统，要求每个类自己实现 Parcelable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:48:18.187

这有点复杂，但我能想到的唯一方法涉及反射 - 如果所有子类都有一个构造函数，该构造函数接受 a`Parcel`然后调用`super(parcel)`，你可以将类名作为包的一部分 - 然后在你的 createFromParcel 方法中一个：

```
public A createFromParcel(Parcel source) {
    Class clazz = Class.forName(source.readString());
    Class[1] paramTypes = { Parcel.class }; 
    Constructor ctor = clazz.getConstructor(paramTypes);
    A myA = (A) ctor.newInstance(source);
    return myA;
} 
```

请注意，这主要是临时写的，可能需要在运行之前进行一些调整（我确定它缺少检查的异常处理程序） - 但希望这个想法很清楚

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-27T20:28:14.217

我已经实现了 JRaymond 描述的解决方案并且它有效。这有点复杂，因为它涉及一些反思，但我希望它对其他人有所帮助。现在任何可打包的类都应该扩展这个实现可打包的 GlobalParcelable 类。

[https://github.com/awadalaa/Android-Global-Parcelable](https://github.com/awadalaa/Android-Global-Parcelable)

# sqlite - Visual Studio 2012 中的 SQLite 1.0.82.0（最新）未显示在设计器数据源中

> ID：12809929
> 
> 赞同：6
> 
> 时间：2012-10-09T23:35:34.663
> 
> 标签：sqlite, visual-studio-2012, datasource, designer

我正在使用最新版本 1.0.82.0 (sqlite-netFx40-setup-bundle-x86-2010-1.0.82.0.exe)，并且正在使用 Visual Studio 2012 的已发布版本以及所有最新的一切。

我在 Source Explorer（新连接）的 Designer 数据源中看不到 SQLite。

SQLite 上的下载说明“此安装程序包能够安装 Visual Studio 2010 的设计时组件”。我认为“Visual Studio 2010”部分是我在 VS2012 中看不到设计器的原因，这就是我所拥有的。

如何让设计师使用 VS2012？

System.Data.SQLite.org 团队何时会推出适用于 VS 2012 的版本？

（我确实在 7 月份看到过几篇关于 1.0.66 和 1.0.73 的帖子，但那是在那时，1.0.82 显然包括了 VS 2010 的设计师。我大概看到了其他带有“-2008”的文件名对于 Visual Studio 2008。这意味着可能会出现 Visual Studio 2012，但与此同时，我对手动注册表黑客或类似的东西感到好奇。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T00:15:07.917

为了在 Visual Studio 中获得对 SQLite 的设计器支持，您必须下载一个非常具体的 System.Data.SQLite 版本。[下载页面](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)有惊人的56**种**不同的可能性，因此很容易出错。

寻找这样的大粗体文字：

> **此安装程序包能够安装 Visual Studio 2012 的设计时组件。**

但是在无数的下载中仍然很容易错过。如果需要，请使用 Control-F 查找“Visual Studio 2012”文本。

**不要下载 64 位版本，即使您使用的是 64 位机器**。您需要带有上述文本的 32 位版本才能获得设计人员的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:08:49.183

**新编辑现在我开始工作了！**

转到 Visual Studio，管理 Nuget，搜索在线包，搜索“SQLite”，安装 System.Data.SQLite，然后繁荣，您可以使用设计器，一切都在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:53:56.900

经过一番搜索，我找到了答案，1.0.83，它将在 2012 年 11 月 XX 日发布。

Visual Studio 2012 除了 v10 到 v11 注册表配置单元的差异外，还具有团队所说的“重新设计的设计器支持”。

这是信息的链接。

[http://system.data.sqlite.org/index.html/doc/trunk/www/news.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/news.wiki)

1.0.83.0 - 2012 年 11 月 XX 日（计划发布） •更新到 SQLite 3.7.15。•将Visual Studio 2012 支持添加到所有适用的解决方案/项目文件、它们相关的支持文件和测试套件。•将Visual Studio 2012 支持添加到重新设计的设计器支持安装程序中。

和其他变化。

遗憾的是，我在网上找不到任何临时解决方案。缺少修复会影响使用 DevExpress 的基于报告的项目和使用资源管理器的项目。

# windows - windows nic 实时优先级

> ID：12809943
> 
> 赞同：1
> 
> 时间：2012-10-09T23:37:55.110
> 
> 标签：windows, networking

我有一个带有 2 个 NIC 卡的 Windows XP 系统。1 NIC 卡仅用于为 LabView 设置一些配置。另一个 NIC 用于使用 tcpip（不能使用 UDP）将数据实时泵送到另一个设备。问题是它不能停止并休息 125 毫秒，一旦发生这种情况我们就会遇到问题。

我们所在的网络非常孤立，因此另一个 NIC 上没有发生任何事情。使用 Wireshark，我无法关联另一个 NIC 上发生的任何事件，并且在 Windows 事件日志中看不到任何其他内容。

有任何想法吗？

1.  有没有办法设置优先级，这样实时网卡就不会被中断？
2.  如果在另一个 NIC 上没有发生任何事情，并且在 Windows 事件日志中没有看到任何内容，那么还有什么可能会中断实时 NIC？

# javascript - 如何使在其他域上使用脚本添加的 Google Analytics 代码工作？

> ID：12809945
> 
> 赞同：0
> 
> 时间：2012-10-09T23:38:09.097
> 
> 标签：javascript, cookies, google-analytics, cross-domain

我有一个域，我们称之为 myhost.com，我在 myhost.com 上有一个脚本 addGAcode.js。该代码包含函数 includeGA()，它为我的客户域的帐户集调用标准 GA 代码。它看起来像这样：

```
function includeGA() {   
var _gaq = _gaq || [];  
_gaq.push(['_setAccount', 'UA-432432432-43']);  
_gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);   })(); 
}

includeGA(); 
```

让我们将此域称为groceryinbelfast.com。

现在我添加到groceryofbelfast 脚本标签的meta 以包含myhost.com/addGAcode.js。不幸的是，GA 不起作用。GA 代码已正确加载，但我想是因为它位于其他域上，因此域groceryofbelfast 它无法在groceryofbelfast 域上设置统计数据工作所必需的cookie。

我的概念的重点是在我的服务器上安装 GA 脚本，这样当 Google 更改其中的某些内容或我想要对其进行一些调整时，我不需要每次都打电话给我的客户的网站管理员进行适当的更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:08:04.370

您的`includeGA()`函数可能无法工作，因为`_gaq`需要将其声明为全局变量，而不是`includeGA()`函数内的局部变量。

您可以通过更改为以下内容来解决该特定问题：

```
function includeGA() {   
    window._gaq = window._gaq || [];  
    _gaq.push(['_setAccount', 'UA-432432432-43']);  
    _gaq.push(['_trackPageview']);

    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
} 
```

# git - Git 无法撤消修改过的文件

> ID：12809951
> 
> 赞同：10
> 
> 时间：2012-10-09T23:39:10.617
> 
> 标签：git, rollback, git-stash, git-reset

我只想回到一个干净的工作目录，就像我上次提交之后一样。Git 向我报告了我没有进行的大量文件修改，所以我怀疑这与行尾有关。

我已经尝试了所有常见的嫌疑人来做到这一点：

`git reset --hard` `git commit -- .` `git stash` `git clean -fd`

无论我做什么，`git status`总是显示与已修改相同的文件。我能做些什么？我在另一个分支中隐藏了未提交的更改，所以我不想只是炸掉所有东西，而只是“回滚”我的主分支。

**编辑：**输出

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   demo/index.html
#   modified:   demo/js/app.js
#   modified:   demo/js/libs/jquery.1.7.1.js
#   modified:   demo/js/libs/matchMedia.js
#   modified:   demo/js/libs/modernizr.js
#   modified:   demo/js/loadr.js
#   modified:   dist/enquire.js
#   modified:   src/include/intro.js
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

然后我尝试建议的内容以及我能找到的所有其他内容：

```
WickyNilliams at Nick MBA in ~/Repositories/enquire on master*
$ git checkout -- .
WickyNilliams at Nick MBA in ~/Repositories/enquire on master*
$ git reset --hard
HEAD is now at d70fee4 added meta tag to test demo on mobile #10
WickyNilliams at Nick MBA in ~/Repositories/enquire on master*
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   demo/index.html
#   modified:   demo/js/app.js
#   modified:   demo/js/libs/jquery.1.7.1.js
#   modified:   demo/js/libs/matchMedia.js
#   modified:   demo/js/libs/modernizr.js
#   modified:   demo/js/loadr.js
#   modified:   dist/enquire.js
#   modified:   src/include/intro.js
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

如您所见，尽管回滚，但没有任何变化。

所以然后我听从了建议并运行了一个忽略所有空格的差异，并且怀疑它在忽略空格时似乎没有区别 - 所以我猜它是行尾！我能做些什么来解决这个问题？我已经设置为`autocrlf`无济于事`true`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T00:59:32.693

如果您只想将文件更改回上次提交后的状态，只需执行 a`git checkout [file]`即可获取特定文件。但是`git reset --hard`应该对整棵树这样做。如果您认为这只是行尾，请执行 a `git diff`，然后执行 a `git diff --ignore-all-space`。如果第一个 diff 显示更改而第二个没有，那么至少您知道您遇到了行尾问题，在这种情况下，您可能需要查看[git 和 line endings](https://help.github.com/articles/dealing-with-line-endings)的描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T08:22:36.830

在确保您的 EOL 设置具有合理的值（对于您的操作系统和 repo 策略）*之后，尝试在*[此 github 文章](https://help.github.com/articles/dealing-with-line-endings) 的“重新规范化 repo”部分中解释的方法

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-13T08:00:53.540

贡献我的案例：有一个文件有一个`modified`状态，我无法使用`git reset --hard`. 上述命令都没有帮助我，该文件始终处于修改状态。
更有趣的是，即使在新克隆之后，这个问题仍然存在！但是git给了我一个提示：

```
... bla bla bla git clone ....
Resolving deltas: 100% (37818/37818), done.
warning: the following paths have collided (e.g. case-sensitive paths
on a case-insensitive filesystem) and only one from the same
colliding group is in the working tree:

  'a/b/c/Myfile.kt'
  'a/b/c/MyFile.kt' 
```

事实证明，在区分大小写的文件系统 (linux) 上，有人不小心提交了两个同名文件，但在不同的情况下和不同的内容。当我在不区分大小写的文件系统（macOs、windows）上打开这个 repo 时，git 认为这是同一个文件，并且总是向我显示它是从`MyFile.kt`to`Myfile.kt`或 from `Myfile.kt`to的“修改” `MyFile.kt`。

所以，我只是删除了一个不相关的文件，只留下了一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T00:58:48.557

如果 Git 认为您的文件由于尝试自动规范化行尾而被修改（如果`git diff`显示差异则为真，但`git diff --ignore-all-space`不会），您最好的解决方案可能是关闭项目的行尾修改。如果您的团队对一组给定的文件都使用相同的平台（Windows、Linux 等），这将非常有效。

要关闭项目的行尾修改，请`.gitattributes`在存储库的根目录中打开或创建。确保文件包含以下行：

```
* -text 
```

如果文件存在并且对 有不同的设置`*`，例如`* text=auto`，将其替换为上面的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-21T06:50:28.850

就我而言，无论顺序如何，都没有帮助，也`git checkout -- .`没有帮助 - 仍然有一个目录被“修改”。所以我已经更改到特定目录并从这里运行。不知道为什么我必须首先更改目录的根本原因，但它令人惊讶地有助于摆脱这些修改。`git reset --hard``git clean -fd .``git checkout -- .`*

# php - 如何在 PHP 中获取图像质量

> ID：12809953
> 
> 赞同：3
> 
> 时间：2012-10-09T23:39:27.143
> 
> 标签：php, codeigniter, image-processing

我一直在使用 Page Speed 在我的网站上进行一些速度优化，它提供了如下建议：

```
Optimizing the following images could reduce their size by 35.3KiB (21% reduction).

Losslessly compressing http://example.com/.../some_image.jpg could save 25.3KiB (55% reduction). 
```

如何进行计算以获得文件大小减少数字？如何确定图像是否在 PHP 中进行了优化？

据我了解，他们似乎基于图像质量（因此在 Photoshop 中节省 60% 左右被认为是优化的？）。

我想做的是，一旦上传图像，检查图像是否已完全优化，如果没有，则使用 PHP 图像库（如 GD 或 ImageMagick）对其进行优化。如果我对基于质量的数字是正确的，那么我将根据需要降低质量。

如何确定图像是否在 Page Speed 使用的标准中完全优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:54:55.640

他们可能只是使用标准压缩或使用一些非常简单的规则来计算图像压缩/质量。这不完全是您所追求的，但我经常在上传的图像等动态内容上使用的是一个名为 SimpleImage 的类：

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

这将为您提供调整大小和调整压缩的选项，我认为甚至可以更改图像类型（我的意思是 .jpg 到 .png 或 .gif 任何你喜欢的）。我从事 seo 工作，页面优化是我工作的重要组成部分，我通常会尝试使图像的大小不会变小或变大。压缩 JS 和 CSS，这确实是大多数人需要担心的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:42:16.123

看起来您可以使用 PageSpeed Insights API 来获取压缩分数：[https](https://developers.google.com/speed/docs/insights/v1/reference) ://developers.google.com/speed/docs/insights/v1/reference ，但我猜您想进行质量检查/compression 本地，而不是通过此 API 发送所有内容。

看起来他们在[http://code.google.com/p/page-speed/wiki/DownloadPageSpeed?tm=2](http://code.google.com/p/page-speed/wiki/DownloadPageSpeed?tm=2)上也有一个独立的图像优化器，尽管这似乎是一个 Windows 二进制文件。他们那里也有一个 SDK，尽管我没有研究它需要什么，或者集成到现有站点中的难易程度。

# jquery - 如何在 FancyBox 中加载 BB 视图？

> ID：12809955
> 
> 赞同：0
> 
> 时间：2012-10-09T23:39:45.807
> 
> 标签：jquery, ruby-on-rails, backbone.js, fancybox

这似乎是一个微不足道的问题，我可能对语法感到困惑。

基本上，我希望 FancyBox 在单击链接时加载我拥有的 BB 视图。

以前，它会加载 BB 路由，并重定向到具有所需视图和其他所有内容的页面：

```
$('.edit_list').show().attr('href', '#lists/' + list.id + '/edit') 
```

**我目前的看法**

```
app.views.GlobalListEdit = Backbone.View.extend({
  tagName: "div",
  className: "global_list_edit list_view",
  title: 'Edit - ',
  template: _.template('<div class="error"></div>' +
    '<label for="global_list_edit_name">Group Name</label>' +
    ... truncated ... 
```

**我当前的 jquery**

```
 $('.edit_list')
    .on('click', function(){ 
      // $.fancybox({ href: '#' + '#lists/' + list.id + '/edit' });
      // ^ bad idea #1 . This loads the whole other page sans the actual edit form..
      // $.fancybox({ new app.views.GlobalListEdit({el: $('body')}).render() });
      // ^ This psuedo code is more or less what I want. To load a new instant of the BB View.
      return false;
    }); 
```

所以我在看..

1.  回答如何将动态传递`list.id`给该编辑调用。
2.  如何渲染该视图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:09:27.430

您可以`$.fancybox`提供一个 jQuery 对象和视图，[`$el`](http://backbonejs.org/#View-%24el)因此您可以这样做：

```
var v = new View({...});
$.fancybox(v.render().$el); 
```

演示：http: [//jsfiddle.net/ambiguous/ncmd7/](http://jsfiddle.net/ambiguous/ncmd7/)

或者你可以传递`$.fancybox`DOM 元素：

```
var v = new View({...});
$.fancybox(v.render().el); 
```

演示：http: [//jsfiddle.net/ambiguous/t7Sbj/](http://jsfiddle.net/ambiguous/t7Sbj/)

# multithreading - 线程同步原语

> ID：12809957
> 
> 赞同：2
> 
> 时间：2012-10-09T23:40:01.830
> 
> 标签：multithreading, synchronization, thread-safety

我正在寻找关于通用的不同线程同步原语的好材料（不依赖于任何语言或实现。我只想要概念）。

互联网上的搜索指向特定的语言或实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:52:05.600

好吧，很难找到这样的资源，因为它们几乎总是伴随着一些（至少是伪的）代码示例。除非比我更了解的人看到这个问题:)

我建议初学者探索维基百科，例如：

*   [生产者消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)
*   [餐饮哲学家问题](http://en.wikipedia.org/wiki/Dining_philosophers_problem)
*   [睡觉理发师问题](http://en.wikipedia.org/wiki/Sleeping_barber_problem)
*   [同步（计算机科学）](http://en.wikipedia.org/wiki/Synchronization_%28computer_science%29)
*   [进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)

查看链接的通用词、链接和外部链接，一旦您对所需方向足够熟悉，找到涵盖该主题的科学文章将是理想的 - 它们充满了许多参考资料，最终您会偶然发现一些很棒的文章。

# entity-framework - EF：如何在事务中调用 SaveChanges 两次？

> ID：12809958
> 
> 赞同：16
> 
> 时间：2012-10-09T23:40:01.000
> 
> 标签：entity-framework, sql-server-2012, transactionscope, entity-framework-5, msdtc

使用实体框架（在我的例子中首先是代码），我有一个操作需要我调用 SaveChanges 来更新数据库中的一个对象，然后再次调用 SaveChanges 来更新另一个对象。（我需要第一个 SaveChanges 来解决 EF 无法确定首先更新哪个对象的问题）。

我试着做：

```
using (var transaction = new TransactionScope())
{
    // Do something

    db.SaveChanges();

    // Do something else

    db.SaveChanges();

    tramsaction.Complete();
} 
```

当我运行它时，我在第二次调用时遇到异常`SaveChanges`，说“底层提供程序在打开时失败”。内部异常说我的机器上没有启用 MSDTC。

现在，我在其他地方看到了描述如何启用 MSDTC 的帖子，但似乎我还需要启用网络访问等。这听起来完全是矫枉过正，因为没有涉及其他数据库，更不用说其他服务器了。我不想做一些会使我的整个应用程序不那么安全（或更慢）的事情。

当然必须有一种更轻量级的方法来做到这一点（最好没有 MSDTC）？！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-26T09:24:02.170

我知道这是一个迟到的答案，但我发现分享它很有用。

现在在**EF6**中，通过使用更容易实现这一点`dbContext.Database.BeginTransaction()`

像这样 ：

```
using (var context = new BloggingContext())
{
    using (var dbContextTransaction = context.Database.BeginTransaction())
    {
        try
        {
            // do your changes
            context.SaveChanges();

            // do another changes
            context.SaveChanges();

            dbContextTransaction.Commit();
        }
        catch (Exception)
        {
            dbContextTransaction.Rollback();
        }
    }
} 
```

有关更多信息，请查看[此](http://msdn.microsoft.com/en-us/data/dn456843)

**又是在 EF6 以后**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T09:26:01.660

这可能是由您的事务中使用的两个不同的连接引起的。尝试手动控制操作的连接：

```
var objectContext = ((IObjectContextAdapter)db).ObjectContext;

try {
    //Open Connection
    objectContext.Connection.Open();

    using (var transaction = new TransactionScope()) {
        // Do something

        db.SaveChanges();

        // Do something else

        db.SaveChanges();

        transaction.Complete();
    }
} finally {
    //Close connection after commit
    objectContext.Connection.Close();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T10:52:08.843

通过按原样调用 SaveChanges() 会导致数据持久保存到数据库中，并且 EF 会忘记它刚刚所做的更改。

诀窍是使用 SaveChanges(false) 以便将更改持久保存到数据库中，但 EF 不会忘记它所做的更改，从而使日志记录/重试成为可能。

```
 var scope = new TransactionScope(
            TransactionScopeOption.RequiresNew,
            new TransactionOptions() { IsolationLevel = IsolationLevel.Serializable }
        );

        using (scope)
        {
            Entities context1 = new Entities();
            // Do Stuff
            context1.SaveChanges(false);

            Entities context2 = new Entities();
            // Do Stuff
            context2.SaveChanges(false);

            scope.Complete();
            context1.AcceptAllChanges();
            context2.AcceptAllChanges();
        } 
```

PS 只要您在事务范围内打开了多个连接，它就会升级为 DTC。

# python - python，unittest，使用命令行参数测试脚本

> ID：12809970
> 
> 赞同：8
> 
> 时间：2012-10-09T23:41:27.257
> 
> 标签：python, unit-testing, parameters

我编写了一个 python 脚本，它接受命令行参数并播放一轮井字游戏。
运行它看起来像这样......

> 运行 ttt o#xo##x## x 0 1

如果移动是合法的，那么它会打印新的棋盘布局以及是否有人赢得了比赛

我必须使用 unittest 为它编写测试。我不知道如何使用各种命令行参数测试整个脚本，我看到的所有示例似乎都只是测试脚本中的各个函数。该脚本还`argparse`用于解析参数

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T01:06:15.360

重构您的程序，使其主要操作（减去 argparsing）发生在“main”函数中：

```
def main(args):
    ...

if __name__ == '__main__':
    args = parse_args()
    main(args) 
```

`main`然后您可以为和的行为编写测试`parse_args`。

PS。可以使用该`subprocess`模块将您的程序作为外部进程调用，然后解析输出，但我认为这会更丑陋且不必要。

聚苯乙烯。以这种方式编写程序的另一个好处是，您可以将程序作为模块导入，并在其他脚本中调用它的 main 函数。例如，如果有一天您想为它构建一个 GUI，这可能会很有用。

# javascript - 快速打印 HTML5 画布

> ID：12809971
> 
> 赞同：11
> 
> 时间：2012-10-09T23:41:35.247
> 
> 标签：javascript, jquery, html, canvas

我想将画布图像直接发送/打印到默认打印机。这意味着快速打印。

任何人都可以给出提示。

Javascript 或 jQuery。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-12T08:32:54.160

我已经搜索了很多并找到了一个完美的解决方案:) 使用**onclick**事件

```
function printCanvas()  
{  
    var dataUrl = document.getElementById('anycanvas').toDataURL(); //attempt to save base64 string to server using this var  
    var windowContent = '<!DOCTYPE html>';
    windowContent += '<html>'
    windowContent += '<head><title>Print canvas</title></head>';
    windowContent += '<body>'
    windowContent += '<img src="' + dataUrl + '">';
    windowContent += '</body>';
    windowContent += '</html>';
    var printWin = window.open('','','width=340,height=260');
    printWin.document.open();
    printWin.document.write(windowContent);
    printWin.document.close();
    printWin.focus();
    printWin.print();
    printWin.close();
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-05-18T23:34:34.947

我发现第一次打印时，画布是空白的。我添加了一个事件侦听器来等待图像/文档被加载。现在画布已准备好每次打印。这是对我有用的代码：

```
const dataUrl = document.getElementById('the-pdf-canvas').toDataURL(); 

let windowContent = '<!DOCTYPE html>';
windowContent += '<html>';
windowContent += '<head><title>Print canvas</title></head>';
windowContent += '<body>';
windowContent += '<img src="' + dataUrl + '">';
windowContent += '</body>';
windowContent += '</html>';

const printWin = window.open('', '', 'width=' + screen.availWidth + ',height=' + screen.availHeight);
printWin.document.open();
printWin.document.write(windowContent); 

printWin.document.addEventListener('load', function() {
    printWin.focus();
    printWin.print();
    printWin.document.close();
    printWin.close();            
}, true); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-04-07T08:45:20.327

使用[printJS](https://printjs.crabbly.com/)和这一行：

```
printJS({printable: document.querySelector("#your-canvas").toDataURL(), type: 'image', imageStyle: 'width:100%'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T00:08:44.297

我很快用谷歌搜索并找到了这个[链接](http://www.informit.com/articles/article.aspx?p=1903884&seqNum=9)。它提供了一个关于如何做到这一点的简要教程，但基本上你会得到一个参考 url：`toDataURL()`然后创建一个相同大小的 img，将其 src 分配给 url。

它提供了在您的 html 和 css 中执行的操作的一个更好的步骤，因此如果您不明白我所说的内容，请查看[链接。](http://www.informit.com/articles/article.aspx?p=1903884&seqNum=9)

注意：我假设您在与要打印的画布交互时遇到问题，但如果您在打印机驱动程序方面遇到问题，那么这可能对您没有用处。

# c# - 在不同的事件中访问同一个对象

> ID：12809973
> 
> 赞同：2
> 
> 时间：2012-10-09T23:41:49.387
> 
> 标签：c#, asp.net

我想要一个在两种不同方法之间共享的对象数组。

我网页上 button1 的 onclick 调用方法 1，它填充 objectArray 所需的值。我需要 button2 的 onclick 方法能够使用与 method1 正在处理的相同数据访问相同的 objectArray。

```
using myWebReference;
{
public partial class _Default : System.Web.UI.Page
{        
    ObjectArray[] myObjects = new ObjectArray[100]; 

    public void Page_Load(object sender, EventArgs e)
    {   
        //I have nothing in here at the moment      
    }
    public void method1(object sender, EventArgs e)
    {
        //myObjects[]'s values are calculated and assigned here. 
    }
    public void method2(object sender, EventArgs e)
    {
        String key = myObjects[0].value;
        //when I try to get data within myObjects here, myObjects does exist, 
    //but it is empty and I get a null reference error when I try to use its values.
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T23:49:16.513

不是语言的问题。它绑定到网络表单。在每个 Web 请求完成后，Web 服务器上的所有状态都会被销毁。

所以：在网络请求 1 中，您调用 method1 并且您的数组已被填充。

Web 请求 1 完成的 html 返回到浏览器，服务器上的数组被破坏。

在 Web 请求 2 中调用方法 2，但数组仅由该行初始化

```
ObjectArray[] myObjects = new ObjectArray[100]; 
```

所以里面没有其他数据。

如果您希望能够达到“以前的” myObjects 值，您应该将其保存在某处，例如 Abe 建议的 SessionState 中、DB 中、视图状态中、cookie 中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T00:02:33.730

正如@Peter Repac 所说，您也可以使用 ViewState。像这样：

```
//In method1.
ViewState["MyObjectsKey"] = myObjects;
....

//In method2.
myObjects = ViewState["MyObjectsKey"]; 
```

如果变得非常大，请小心使用它`myObjects`，因为 ViewState 与页面一起发送，因此膨胀其大小可能会影响性能。更多关于 ViewState的信息在[这里](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:46:29.870

最简单的方法是创建一个加载数组的方法，并在按下 button1 时调用它，并在按下 button2 时调用它。但是在 action2 上，你稍后会做更多的事情......

如果您刚刚开始，我认为开始弄乱视图状态或会话不是一个好主意，因为它们会养成一些坏习惯。恕我直言，最简单的方法是加载数组两次。

您甚至可以从 method2 调用 method1 而无需创建另一个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T23:47:31.560

如果您希望数据在不同的回发中可用，您将需要在每个回发上以相同的方式加载该数据，或者可能在第一次加载后将数据存储在会话状态（或其他可接受的位置）。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)阅读会话状态。请务必阅读使用会话状态的潜在陷阱。

您的代码最终可能看起来像这样：

```
myObjects = LoadMyObjects();
Session["objects"] = myObjects; 
```

# php - SQL Server Native Client 2012 + PHP + IIS - 大型查询的性能问题

> ID：12809976
> 
> 赞同：1
> 
> 时间：2012-10-09T23:42:14.980
> 
> 标签：php, sql-server, iis, windows-server

我目前有 2 个网站，它们托管在具有不同虚拟机的单个服务器上。每个网站都托管在其自己的具有 IIS 7.5、PHP Fast CGI 5.3 的虚拟机上，该虚拟机使用 SQL Server Native Client 2012 连接到 MS SQL Server 2012 DBMS。SQL Server 2012 驻留在单个专用 VM 上，该 VM 托管与两者相关的数据库网站，因为一些数据正在网站之间共享。

安装程序基于 Windows，因为我们几乎没有需要在 VM 上运行的 .NET 服务，并且我们为网站使用单独的 VM，主要用于隔离和安全性。

该服务器具有 Intel Xeon 2.4Ghz 6 核处理器 X 2，具有 32 GB RAM 和 10K RPM SAS 作为托管数据库的主存储，并且虚拟机托管在另一个 7.2K RPM SAS 上。性能方面，网站在平均负载下非常快。

我们的网站有一个后端登录，我们经常在其中执行大型查询以检查与网站及其操作有关的日志和其他内容。平均查询大约需要一分钟才能完成，因为它是针对非常大的记录集执行的。每当执行查询时，该主机上的网站就会变得非常缓慢。

如果问题出在 SQL Server 或网络服务器上，我们已经进行了一些测试以缩小范围。首先，我们直接在数据库服务器上执行了一些批量查询，并且在检查网站后，我们无法发现任何性能问题，这清楚地表明 SQL Server 没有瓶颈。接下来，我们想看看这个问题是由 Webserver 还是 PHP 或 SQL Server Native Client 引起的。我们在服务器上托管了一个 HTML 测试文件，并在执行批处理查询时尝试访问该文件，结果证明速度一样快。当从网站后端执行批量查询时，带有小型排序算法的普通 php 文件工作得很好。然而，当我们用一个小查询实际测试数据库连接时，查询运行时加载需要时间。

我知道 PHP 不太适合 MSSQL 服务器，但由于开发限制，我现在需要坚持使用 MSSQL。当大查询正在进行时，我不知道是什么降低了 SQL Server Native Client 的速度。我做了一些阅读，并尝试使用**ConnectionPooling**和**MultipleActiveResultSets**，但在当前情况下没有任何改进。该网站变得非常慢，连接到数据库的每个页面都需要 20 秒，而在后端没有运行任何查询的情况下，它只需一两秒即可加载。

这似乎仅限于特定主机。当我在网站 1 上运行繁重的查询时，网站 1 上的其他页面非常缓慢，而网站 2 根本没有显示任何性能问题。尝试检查 webhost 和数据库服务器上的 CPU 使用率。它们仅多出 5-10%，我认为这可能不是造成如此严重的性能问题的原因。

我在想，SQL Server Native Client 2012 可能存在导致此问题的错误，或者我错过了任何设置或案例？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:46:42.740

首先停止更改随机设置（如启用 MARS），希望它有所改善。应用一种方法：**测量、识别瓶颈、修复这些瓶颈**。我建议您阅读[Waits and Queues](http://technet.microsoft.com/en-us/library/cc966413.aspx)论文，它一次又一次地被证明是一种出色的性能故障排除方法。遵循[性能故障排除图表](http://sqlcat.com/files/folders/280/download.aspx)。然后，您将能够正确识别根本原因（/cough 争用）并适当地解决它。

# html - C#：使用 HTMLAgilityPack 查找 HTML 属性并替换值

> ID：12809979
> 
> 赞同：0
> 
> 时间：2012-10-09T23:42:40.393
> 
> 标签：html, dom, html-agility-pack

嗨，我正在尝试如何使用 HTMLAgilityPack Vs 使用正则表达式（不确定哪个更贵）。我的问题 id 与 HTMLAgilityPack 我能够提取所需的属性并将其替换为新属性；但是，我似乎无法更新原文。这是代码；

```
string input = @"<area shape=""rect"" coords=""0,0,82,126"" href=""one"" alt=""Sun""> <area shape=""rect"" coords=""0,0,82,126"" href=""two"" alt=""Sun"" > <area shape=""rect"" coords=""0,0,82,126"" href=""Three"" alt=""Sun"" >";

HtmlDocument document = new HtmlDocument();
document.LoadHtml(input);

HtmlNodeCollection nodes = document.DocumentNode.SelectNodes("//area");

for (int i = 0; i < nodes.Count; i++ )
{
    HtmlNode node = nodes[i];
    var href = node.Attributes["href"].Value;
    //Reassigning href value
    node.Attributes["href"].Value="Re-Assign ["+i+"]";
} 
```

现在我想让它反映在原始的“输入”变量中。知道如何进行吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:37:29.040

我也在试验如何使用敏捷包。尝试：

```
String HTML = nodes.DocumentNode.WriteTo(); 
```

您需要将更新写在原文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:43:24.587

你失踪了`doc.Save(yourFileName);`

# html - 如何转换“。” 到网页上的“_”，在 HTML

> ID：12809981
> 
> 赞同：1
> 
> 时间：2012-10-09T23:42:46.057
> 
> 标签：html, data-conversion

有点奇怪的问题，但我有点需要它来对网站进行时间敏感的修复。

我有很多数据都有句号“。” 标记网站上的数据。而且我想可能在网站中将其更改为可能是下划线“_”。

我无法触摸数据本身，因为它是与其他数据位置同步的敏感数据。

现在，我想知道，是否有一个 HTML 代码，它只会改变数据在网站上的显示方式？我可以输入一行代码来转换所有句点并使它们看起来像该页面的下划线吗？

我一直在搜索，但谷歌无法通过转换 Unicode T_T...

任何帮助将不胜感激！

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:48:17.327

您可以使用 Javascript/jQuery 函数来更改页面内容，而无需实际更改数据服务器端：

```
$(document).ready(function() {
    var bodyText = $('#data').text(); //assuming this is where the text is you want to change
    bodyText = bodyText.replace(/\./g,"_");
    $('#data').text(bodyText);
}); 
```

[jsFiddle](http://jsfiddle.net/7CFZ8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:47:48.213

听起来您正在尝试操作数据，这是 HTML 并非旨在做的事情。如果你想开始用不同的字符串替换一个字符串，你可能需要学习一些 php。该函数看起来像这样：

```
echo str_replace('.','_',$data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:00:19.210

SomekidwithHTML 有正确的想法。只是有点偏离，因为 replace 实际上并没有替换变量，它只是返回新字符串。

希尔森是正确的。如果您无法触摸服务器端的数据，则需要在客户端使用 JavaScript 对其进行解析。

```
var bodyText = $('body').html(); //assuming this is where the text is you want to change
bodyText = bodyText.replace(/\./g,"_");
$('body').html(bodyText);​​ 
```

这是一个小提琴：http: [//jsfiddle.net/paV2R/](http://jsfiddle.net/paV2R/)

# css - 如何在css3中将图像添加到::before伪元素

> ID：12809982
> 
> 赞同：4
> 
> 时间：2012-10-09T23:43:05.510
> 
> 标签：css, gravatar

我有一个带有指向图像的 data-avatar url 的锚点，我想将块图像添加到 a.avatar::before 以显示图像。

```
a[data-avatar]::before {
    content: "";
    background: url( attr(data-avatar url) ) no-repeat 0 0;
    width: 16px;
    height: 16px;
    display: block;
    margin: 0 5px 0 0;
}

<a href="/username" data-avatar="http://some-url.com/image.png">my profile</a> 
```

我无法设置背景图像`url(attr(data-avatar))`

如果有人想尝试一下，这是一个小提琴——我只对没有多余标记的纯 CSS 方式感兴趣。

[http://jsfiddle.net/chovy/RDrxV/](http://jsfiddle.net/chovy/RDrxV/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T01:06:59.410

抱歉，正如评论中提到的，当前的 CSS2.1 实现`attr()`无法`url()`使用元素的自定义数据属性作为生成内容中的图像 URL。

从[Values and Units level 3](http://www.w3.org/TR/css3-values/#attr)中不清楚您是否可以/应该`attr()`作为参数传递给`url()`（或者语法是否允许）：

```
background: url(attr(data-avatar)) no-repeat 0 0; 
```

或者只是传递`attr()`自己，它会生成一个 URL 值（这更有可能是因为它们具有`url`与默认类型不同的`string`类型）：

```
background: attr(data-avatar url) no-repeat 0 0; 
```

但无论哪种方式，截至 2012 年，尚无浏览器实现新`attr()`功能，因此您将无法使用纯 CSS 生成的内容来执行此操作。希望浏览器在模块已经进入 CR 之后就开始实现它，因为如果看到这个功能由于缺乏兴趣而被放弃，那将是一个巨大的耻辱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:47:54.243

您似乎忘记添加内容属性。如果它不存在，则不会生成内容：

[http://www.w3.org/TR/CSS21/generate.html#content](http://www.w3.org/TR/CSS21/generate.html#content)

只需将其设置为空字符串。

```
a[data-avatar]::before {
    content:"";
    background: url(attr(data-avatar)) no-repeat 0 0;
    width: 16px;
    height: 16px;
    display: block;
    margin: 0 5px 0 0;
} 
```

# drawtobitmap - DrawToBitmap 在 windows xp 上不起作用，但在 windows 7 上是

> ID：12809992
> 
> 赞同：0
> 
> 时间：2012-10-09T23:45:02.607
> 
> 标签：drawtobitmap

我在 datagridview 中托管了一个自定义控件，比如说 CustomControl（第三方控件），并且只有在进入编辑模式时才会绘制单元格。如果退出编辑模式，它是不可见的，所以我已经覆盖了绘制方法（见下文）。它在 windows 7 中可以正常工作，但在 windows xp 中却不行。DrawToBitmap 失败。有任何想法吗？

```
 protected override void Paint(
        Graphics graphics,
        Rectangle clipBounds,
        Rectangle cellBounds,
        int rowIndex,
        DataGridViewElementStates cellState,
        object value,
        object formattedValue,
        string errorText,
        DataGridViewCellStyle cellStyle,
        DataGridViewAdvancedBorderStyle advancedBorderStyle,
        DataGridViewPaintParts paintParts)         {             // Call the base class method to paint the default​ cell appearance.
        base.Paint(
            graphics,
            clipBounds,
            cellBounds,
            rowIndex,
            cellState,
            value,
            formattedValue,
            errorText,
            cellStyle,
            advancedBorderStyle,
            paintParts);

        CustomControl customControl= (CustomControl)this.DataGridView.Rows[rowIndex].Cells[this.ColumnIndex].Value;

        Bitmap img = new Bitmap(cellBounds.Width, cellBounds.Height);

        // Resize propertyEditor control to cell bounds
        propertyEditor.Height = cellBounds.Hei​ght;
        propertyEditor.Width = cellBounds.Widt​h;

        // Sets the cell's backcolor according to the data​ grid view's color
        customControl.BackColor = this.DataGridView.Rows[rowIndex].Cells[this.ColumnIndex].Style.BackColor;

        // Finally paint the propertyEditor control       ​     
        customControl.DrawToBitmap(img, new Rectangle(0, 0, customControl.Width, customControl.Height​));
        graphics.DrawImage(img, cellBounds.Loc​ation);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:47:23.770

通过`Application.EnableVisualStyles()`从我的`Program.cs`. 我使用的不是第三方的简单组合框，但效果是一样的。为了克服这个问题，我必须做三件事：

1.  将（自定义）控件设置为可见 true 以便`DrawToBitmap`肯定能够呈现它
2.  将控件的父级设置为`DataGridView`（例如`customControl.Parent = DataGridView`），以便它有一个也可见的父级
3.  将控件移出可见区域（例如`customControl.Location = new Point(0, -(customControl.Height))`，控件不会出现在不应该出现的地方

这在我的情况下有效，但它可能取决于您的自定义控件如何处理该`DrawToBitmap`功能。

我很好奇这是否会对您的情况有所帮助，或者是否有人可以找到更优雅的解决方案。

# wix - 使用 WIX 进行非二进制文件版本控制

> ID：12809995
> 
> 赞同：1
> 
> 时间：2012-10-09T23:45:40.360
> 
> 标签：wix, wix3.5

WIX 文件中定义的所有二进制文件（.dll 和 .exe）似乎都从`Product`元素继承了它们的版本和语言。所有其他文件（.ps1、.txt 等）都不会继承版本，也不会在升级时被替换。我需要能够对非二进制文件进行版本控制，以便在升级时覆盖它们。在文件元素上设置[DefaultVersion后，一切正常，文件在升级时被替换。](http://wix.sourceforge.net/manual-wix2/wix_xsd_file.htm)

```
 <Component Id="Eula.txt" Guid="14285C13-A70C-474B-B2AE-06F68D4E170B">
   <File Id="Eula.txt" DiskId="1" Name="Eula.txt" Source="$(var.NeutralBinRoot)\" DefaultVersion="$(var.MsiProductVersion)"/>
</Component> 
```

但是，我在编译期间收到此警告：

```
警告 LGHT1103：DefaultVersion '1.1.1' 用于没有版本的文件 'Eula.txt'。
此文件的任何条目都不会放在 MsiFileHash 表中。
对于未版本化的文件，指定与实际文件不同的版本可能会导致在修复或修补期间出现意外的版本控制行为。
版本化资源以消除此警告。

```

什么是版本非二进制资源的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:24:15.427

根据文档，您似乎需要使用[CompanionFile](http://wix.sourceforge.net/manual-wix3/wix_xsd_file.htm)属性并将其链接回原始程序集。我自己没有使用过这个，所以不能说 100% 它是否会起作用，但值得一试！