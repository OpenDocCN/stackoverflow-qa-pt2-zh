# StackOverflow 问答 12808000-12808999

# vbscript - 顺序执行任务

> ID：12808000
> 
> 赞同：1
> 
> 时间：2012-10-09T20:35:33.350
> 
> 标签：vbscript, batch-file, cmd

我需要**优雅地**终止（通过 .bat 或 .vbs）特定应用程序，以便安全地覆盖其目录中的（只读）文件，然后删除其子目录之一中的所有文件。

我有这样的想法：

```
@echo off
taskkill /t /im App.exe
ping -n 5 127.0.0.1 > nul
xcopy /y /r "C:\Some path\My File.ext" "C:\App path"
Del /f /q "C:\App path\App sub-directory\*.*" 
```

而不是等待固定的时间（在上面的示例中为 5 秒），我希望**仅**在 taskkill 完成时才执行最后两个命令（即在用户解决最终提示后关闭应用程序）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:40:27.680

批量你可以这样做：

```
@echo off

setlocal EnableDelayedExpansion

for /f "tokens=2" %%p in ('tasklist /fi "imagename eq App.exe" /fo list ^| find "PID:"') do set pid=%%p

taskkill /t /pid %pid%

:wait
ping -n 2 127.0.0.1 >nul
tasklist /fi "pid eq %pid%" /fo list | find "PID:"
if %errorlevel% equ 0 goto wait

xcopy /y /r "C:\Some path\My File.ext" "C:\App path"
del /f /q "C:\App path\App sub-directory\*.*"

endlocal 
```

不过，我更喜欢 VBScript。

```
Set wmi = GetObject("winmgmts://./root/cimv2")
Set sh  = CreateObject("WScript.Shell")
query = "SELECT * FROM Win32_Process WHERE Name = 'App.exe'"

For Each p In wmi.ExecQuery(query)
  ' p.Terminate would forcibly terminate the process (like "taskkill /t /f")
  sh.Run "taskkill /t /pid " & p.ProcessId, 0, False
Next

Do While wmi.ExecQuery(query).Count > 0
  WScript.Sleep 100
Loop

Set fso = CreateObject("Scripting.FileSystemObject")
If fso.FileExists("C:\App path\My File.ext") Then
  fso.DeleteFile "C:\App path\My File.ext", True
End If
fso.CopyFile "C:\Some path\My File.ext", "C:\App path\", True
fso.DeleteFile "C:\App path\App sub-directory\*.*", True 
```

除了删除目标文件，您还可以删除只读标志：

```
Set f = fso.GetFile("C:\App path\My File.ext")
f.Attributes = f.Attributes And Not 1 
```

# php - 确保用户名仅包含：AZ、az、.、_、-、0-9（无逗号）PHP

> ID：12808002
> 
> 赞同：0
> 
> 时间：2012-10-09T20:35:46.983
> 
> 标签：php, regex, string, validation

> **可能重复：**
> [字母、数字和 - _ 的正则表达式](https://stackoverflow.com/questions/3028642/regular-expression-for-letters-numbers-and)

我正在用 PHP 创建一个注册表单，需要确保用户的用户名不包含不需要的字符。无论如何我可以创建一个返回 true 的函数`A-Z a-z 0-9 - . _`。

此外，我不希望用户的电子邮件来自雅虎，因为出于某种原因他们拒绝发送的确认电子邮件。除了`__FILTER_VALIDATE_EMAIL__`我需要添加什么？

PS：我上面提到的人物有什么问题吗？我注意到 gmail 不只允许`-_`. YouTube 只有字母数字字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T20:46:36.620

编辑为使用 \w 而不是 a-zA-Z0-9_

```
if(preg_match("/[^\w-.]/", $user)){
    // invalid character
}
if(!filter_var($email, FILTER_VALIDATE_EMAIL) || strstr($email,'@yahoo.com')) {
    // either invalid email, or it contains in @yahoo.com
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:41:23.513

```
if(preg_match("/[^-A-Za-z0-9._ ]/", $userName)){
    // there are one or more of the forbidden characters (the set of which is unknown)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T20:51:53.327

```
<?php

    // The validator class

    class Validator
    {
        public function isValidUsername($username)
        {
            if(preg_match('/^[a-zA-Z0-9_\-\.]+$/', $username)) {
                return true;    
            }
            return false;
        }

        public function isYahooMail($mail) {
            if(preg_match('/^[a-zA-Z0-9_\-\.]+@yahoo.com$/', $mail)) {
                return true;    
            }
            return false;
        }
    }

    // The way to use this class

    $username = "otporan_123";
    $email = "otporan@gmail.com";

    $badUsername = "otporan*bad";
    $yahooEmail = "otporan@yahoo.com";

    $validator = new Validator();

    var_export($validator->isValidUsername($username));
    echo "<br />";

    var_export($validator->isValidUsername($badUsername));
    echo "<br />";

    var_export($validator->isYahooMail($email));
    echo "<br />";

    var_export($validator->isYahooMail($yahooEmail));
    echo "<br />";  

?> 
```

此代码将返回： true false false true

这是一个类，但如果您喜欢过程代码，您可以查看方法中发生的事情并编写自己的函数：)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T20:44:42.467

```
if (!preg_match('/\w\-/', $username) {
    //throw error 
} 
```

# grails - Grails 域验证器

> ID：12808005
> 
> 赞同：1
> 
> 时间：2012-10-09T20:35:56.790
> 
> 标签：grails, grails-orm

我在域类中为属性添加了一个自定义验证器。但是，每当我运行单元测试并运行 validate() 方法时，我都会收到一条错误消息，指出在类中无法识别该属性。当我删除我的自定义验证器时，一切正常。

谢谢你的帮助！

```
class Region {
int identifier
    BigDecimal leftUpLatitude
    BigDecimal leftUpLongitude
    BigDecimal rigthDownLatitude
    BigDecimal rigthDownLongitude

    static constraints = {  
        identifier unique:true, validator: {return identifier > 0} 
        leftUpLatitude min:-90.00, max:90.00
        leftUpLongitude min:-180.00, max:180.00
        rigthDownLatitude min:-90.00, max:90.00
        rigthDownLongitude min:-180.00, max:180.00   
    }

    boolean isValidRegion(){
        if ((leftUpLatitude > rigthDownLatitude) && ( leftUpLongitude < rigthDownLongitude))
            return true
        else
        return false    
    }
    String toString(){
        return "${identifier}"
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:45:54.387

在自定义验证器中访问对象属性与仅引用属性有点不同。验证器闭包接受一两个参数，1) 当前属性的值和 2) 对象本身，如果您需要访问对象的其余部分。

```
validator: { val -> val > 0 } 
```

# google-apps-script - App Script HtmlService 与 Google Web Fonts 等字体一起使用？

> ID：12808007
> 
> 赞同：3
> 
> 时间：2012-10-09T20:36:12.577
> 
> 标签：google-apps-script, google-caja

我试图用应用程序脚本 HtmlService 做一个（！）页面，但想要有特定的网络字体。

我为网络字体添加了 CSS 代码，并将其与我的 CSS 集成。它不工作。

我怀疑*Google Caja*（HtmlService 正在通过 Caja 过滤器）无法使用网络字体。您是否知道我是否在 HtmlService 上做错了，或者是否有任何其他方法可以通过 Caja 过滤来获得 Web 字体？

```
<link href='http://fonts.googleapis.com/css?family=Fugaz+One' rel='stylesheet' type='text/css'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:22:36.370

[您引用的样式表](http://fonts.googleapis.com/css?family=Fugaz+One)用于`@font-face`加载字体。Caja 目前不支持`@font-face`，因为它引用了[Caja 未实施清理的外部内容（字体数据），并且未审查允许通过未更改的风险](http://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/plugin/CssValidator.java?spec=svn5085&r=5079#416)。

如果您想获得`@font-face`支持，请在[Caja 的公共问题跟踪器](http://code.google.com/p/google-caja/issues/list)上提交问题请求它。

（我是 Caja 团队的开发人员。）

# android - 安卓室内增强现实

> ID：12808008
> 
> 赞同：2
> 
> 时间：2012-10-09T20:36:19.943
> 
> 标签：android, gps, augmented-reality

我对增强现实很陌生，所以我什么都不懂。即我想创建一个应用程序，我将在我的商店 [假设] 中提供给用户。每当他们在我的商店中时，应用程序应该显示商店不同部分的信息[即“这是工具部分”或“这是园艺部分”]。

在 Android 上识别室内位置需要什么，在这种情况下，增强现实实现是唯一可能的解决方案吗？不确定 GPS 坐标是否在室内精确注册，也不知道它们是否会在那么小的“距离”上注册..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:21:08.903

你听说过[LLA](http://dev.metaio.com/sdk/tracking-configuration/optical-tracking-technologies/lla-markers/)标记吗？（纬度、经度、高度标记）。对于室内跟踪，它们比 GPS 更准确，但存在局限性（即静态显示位置......当您走向某物时，它不会告诉您您在 36 、 35 ,34 米之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:46:07.540

我会说蓝牙信标是最好的方法。您也可以使用 WiFi 信号的强度，但这会有所不同。

# excel - 运行过滤器后自动运行 VBA 代码

> ID：12808009
> 
> 赞同：3
> 
> 时间：2012-10-09T20:36:25.340
> 
> 标签：excel, vba, filter, automation

我编写了一个代码，将员工及其资格分类。为了剔除具有不想要的资格的员工，我对每一列都应用了一个过滤器，以他们的资格类别为标题。

我编写了我的 VBA 代码，以便使重复的名称和资格不可见，以便于定位。但是，我无法让代码自动运行。

目前我可以让代码运行的唯一方法是将其设置为

Private Sub Worksheet_Change(ByVal Target As Range) 然后更改任意单元格的值。

我在以下位置找到了我认为正确的解决方案：

[http://www.ozgrid.com/forum/showthread.php?t=72860](http://www.ozgrid.com/forum/showthread.php?t=72860)

但我无法理解它。

有没有办法在过滤器运行后无需选择和取消选择单元格来运行此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T00:00:07.237

[我的文章使用 VBA 捕获对过滤列表的更改](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2773-Trapping-a-change-to-a-filtered-list-with-VBA.html)的关键点

有更多的细节和文章的示例文件，关键点总结如下

1.  添加了一个“虚拟”工作表，其中包含一个`SUBTOTAL`公式，以`A1`指向在主工作表上过滤的范围。
2.  一个事件被添加到“虚拟”工作表中，当过滤器更改时公式更新时`Worksheet_Calculate()`触发此事件。`SUBTOTAL`

如果希望将工作簿计算运行为`Manual`

1.  添加一个`Workbook_Open`事件以将`EnableCalculation`除“Dummy”之外的所有工作表的属性设置为 False。
2.  *在计算*模式下运行工作簿

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T18:54:16.447

仍然需要调查，但看起来当 Calculation = xlCalculationManual 时触发了 Chart Calculate 事件。至少适用于我的 Excel 2007。所以步骤是：

*   创建一个图表（在 Sheet1 上说“图表 1”），它实际上使用来自任何表格列的数据
*   检查它是否在您更改过滤器时更新其图片
*   创建一个新类，例如 clsChartEvents：

    ```
    Public WithEvents Chart As Chart
    Private Sub Chart_Calculate()
      Stop
    End sub 
    ```

*   将此代码添加到某个模块或类：

    ```
    Private chartEvents as new ChartEvents 'create a module-scope variable
    sub SubscribeToChartEvents
      set chartEvents.Chart = Sheet1.ChartObjects("Chart 1").Chart
    end sub 
    ```

*   执行订阅图表事件
*   更改过滤器，您应该出现在 Sub Chart_Calculate()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:52:41.127

您提到的[ozgrid 代码](http://www.ozgrid.com/forum/showthread.php?t=72860)告诉您，您可以将代码放在一个`worksheet_calculate`事件中（在工作表模块中），只要您有一些在您更改自动过滤器时会重新计算的东西。这可以是一个小计公式，您可以将其隐藏在工作表中，例如`=subtotal(3,A:A)`

# bash - 使用 bash -c 和 Globbing

> ID：12808011
> 
> 赞同：1
> 
> 时间：2012-10-09T20:36:33.810
> 
> 标签：bash, glob, gnu-parallel

我在一个命令上运行 gnu-parallel，该命令在从 bash shell 运行时运行良好，但在使用 -c 标志使用 bash 并行执行它时返回错误。我认为这与我正在使用的特殊 globbing 表达式有关。

```
ls !(*site*).mol2 
```

这成功返回。

启用标志后，命令失败

```
/bin/bash -c 'ls !(*site*).mol2'
/bin/bash: -c: line 0: syntax error near unexpected token `(' 
```

该手册仅指定 -c 调用 bash 来读取字符串的参数，我是否遗漏了什么？

编辑：我应该补充一点，我需要它从 gnu 并行字符串运行，因此最终生成的命令必须可由 /bin/bash -c "Some Command" 运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:40:38.177

您应该尝试以下代码：

```
bash <<EOF
shopt -s extglob
ls !(*site*).mol2
EOF 
```

**解释 ：**

当您运行时`bash -c`，您会创建一个`subshell`，并且`shopt`设置不会被继承。

**编辑**

如果你真的需要一个班轮：

```
bash -O extglob -c 'ls !(*site*).mol2' 
```

[看到这个线程](https://stackoverflow.com/questions/529054/how-to-escape-extended-pathname-expansion-patterns-in-quoted-expressions)

# python - CSV - 插入缺失的行

> ID：12808017
> 
> 赞同：0
> 
> 时间：2012-10-09T20:37:13.173
> 
> 标签：python

我有一个巨大的文件，其中有一些缺失的行。数据需要植根于国家。

输入数据如下：

```
csv_str = """Type,Country,State,County,City,
1,USA,,,
2,USA,OH,,
3,USA,OH,Franklin,
4,USA,OH,Franklin,Columbus
4,USA,OH,Franklin,Springfield
4,USA,WI,Dane,Madison
""" 
```

这需要是：

```
csv_str = """Type,Country,State,County,City,
1,USA,,,
2,USA,OH,,
3,USA,OH,Franklin,
4,USA,OH,Franklin,Columbus
4,USA,OH,Franklin,Springfield
4,USA,WI,,
4,USA,WI,Dane,
4,USA,WI,Dane,Madison
""" 
```

根据我的逻辑，关键是`Type`字段，如果我找不到城市（类型 4）的县（类型 3），则插入一行到县的字段。

与县同。如果我找不到县（类型 3）的州（类型 2），则插入一行，其中包含直到州的字段。

由于我对 python 中的设施缺乏了解，我尝试了更多的蛮力方法。这有点问题，因为我需要对同一个文件进行大量迭代。

我也尝试过 google-refine，但无法正常工作。手动操作很容易出错。

任何帮助表示赞赏。

```
import csv
import io

csv_str = """Type,Country,State,County,City,
1,USA,,,
2,USA,OH,,
3,USA,OH,Franklin,
4,USA,OH,Franklin,Columbus
4,USA,OH,Franklin,Springfield
4,USA,WI,Dane,Madison
"""
found_county =[]
missing_county =[]

def check_missing_county(row):
    found = False
    for elm in found_county:
        if elm.Type == row.Type:
            found = True
    if not found:
        missing_county.append(row)
        print(row)

reader = csv.reader(io.StringIO(csv_str))
for row in reader:
    check_missing_county(row) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:27:44.367

根据我对这个问题的理解，我提出了以下几点：

```
import csv
import io

csv_str = u"""Type,Country,State,County,City,
1,USA,,,
2,USA,OH,,
3,USA,OH,Franklin,
4,USA,OH,Franklin,Columbus
4,USA,OH,Franklin,Springfield
4,USA,WI,Dane,Madison
"""

counties = []
states = []

def handle_missing_data(row):
    try:
        rtype = int(row[0])
    except ValueError:
        return []

    rtype = row[0]
    country = row[1]
    state = row[2]
    county = row[3]

    rows = []
    # if a state is present and it hasn't a row of it's own
    if state and state not in states:
        rows.append([rtype, country, state, '', ''])
        states.append(state)

    # if a county is present and it hasn't a row of it's own
    if county and county not in counties:
        rows.append([rtype, country, state, county, ''])
        counties.append(county)

    # if the row hasn't already been added add it now
    if row not in rows:
        rows.append(row)

    return rows

csvf = io.StringIO(csv_str)
reader = csv.reader(csvf)
for row in reader:
    new_rows = handle_missing_data(row)
    for new_row in new_rows:
        print new_row 
```

# spotify - 如何在 Spotify Apps API 中获取当前用户的国家代码？

> ID：12808023
> 
> 赞同：2
> 
> 时间：2012-10-09T20:37:40.373
> 
> 标签：spotify

我需要 JavaScript API 中当前登录的 Spotify 用户的国家/地区代码，以便按照 Spotify 指南的要求，不显示在他的国家/地区不可用的专辑。我知道用户对应用程序保持匿名。这也适用于他的国家代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T13:52:19.353

回答我的问题：

```
sp = getSpotifyApi(1)
models = sp.require('sp://import/scripts/api/models') 
models.session.country 
```

# joomla - 如何编辑编辑个人资料和查看个人资料页面 (Joomla 2.5)

> ID：12808024
> 
> 赞同：1
> 
> 时间：2012-10-09T20:37:42.237
> 
> 标签：joomla, joomla2.5, user-profile, user-management

我使用 Joomla 2.5 创建了 Web 应用程序。

其中我使用了 Joomla 用户管理。我将菜单保留为查看配置文件和编辑配置文件（菜单项类型为用户管理器»用户配置文件）。问题是当我单击查看配置文件时，我也会得到不需要的数据，如下所示。

```
Basic Settings

Editor: Editor - JCE
Time zone: No Information Entered
Frontend language: No Information Entered
Backend Template Style: No Information Entered
Backend language: No Information Entered
Help Site: No Information Entered 
```

所以我想要的是编辑这个页面并只显示我想要的。知道我需要遵循哪些步骤来编辑相同的内容吗？

## 编辑 1

遵循 Lodder 的回答后，我可以删除基本设置。现在在页面上我有

```
Profile

Name:: dummy name
Username:: id
Registered Date: Sunday, 07 October 2012
Last visited date: Tuesday, 09 October 2012 
```

但是我想要的是

```
Profile

Name:: dummy name
Username:: id
Email Id :: dummy@dummy.com
Phone :: 12345678 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:44:02.250

请按照以下简单步骤操作：

1.  转到 Joomla 后端
2.  转到用户管理器
3.  打开参数窗口
4.  将“前端用户参数”设置为“隐藏”

**更新：**

要将最后两个字段替换为电子邮件和电话，我首先建议您进行[模板覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)，这样您就不会编辑任何核心 Joomla 文件。您想要覆盖的内容如下：

```
root/components/com_users/views/profile/tmpl/default_core.php 
```

覆盖此文件后，打开它并从第 31 行开始，您将看到以下代码：

```
<dt>
    <?php echo JText::_('COM_USERS_PROFILE_REGISTERED_DATE_LABEL'); ?>
</dt>
<dd>
    <?php echo JHtml::_('date', $this->data->registerDate); ?>
</dd> 
```

需要替换为：

```
<dt>
    <?php echo "E-mail"; ?> 
    //or you can make this language based. Up to you.
</dt>
<dd>
    <?php $user = JFactory::getUser();
          echo $user->email; ?>
</dd> 
```

这同样适用于其他领域，我认为这将与此类似，具体取决于您如何创建它：

```
<dt>
     <?php echo "Phone"; ?> 
     //or you can make this language based. Up to you.
</dt>
<dd>
     <?php $user = JFactory::getUser();
           echo $user->phone; ?>
</dd> 
```

# ruby-on-rails - Friendly_id 不为旧记录创建 slug

> ID：12808033
> 
> 赞同：7
> 
> 时间：2012-10-09T20:38:24.857
> 
> 标签：ruby-on-rails, ruby, slug, friendly-id

我刚刚将 Friendly_id gem 添加到我的 rails 项目中，希望不使用数据库 ID 并创建一个 slug，但我似乎无法为旧记录创建 slug。我的模型看起来像这样。

```
class Mapping < ActiveRecord::Base

  extend FriendlyId
  friendly_id :title, use: :slugged

  # Friendly_Id code to only update the url for new records
  def should_generate_new_friendly_id?
    new_record? || slug.blank?
  end

end 
```

然后我正在跑步`Model.find_each(&:save)`，但它一直吐出 nil 结果。我试过完全注释掉，`should_generate_new_friendly_id`但没有运气。有人看到我在这里做错了吗？

**编辑**
我回滚了我的数据库并重写了我的迁移，这似乎已经解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-31T15:44:00.047

如果有人发现这个 6 岁的问题：

没有“做和结束”块：

find_each 返回一个 Enumerable（不是 ActiveRecord 类）

利用：

> Model.find_each.select(&:save)

注意添加的“选择”方法

[用 Rails 的 find_each 做事](https://medium.com/@jonathanabrams/doing-stuff-with-rails-find-each-3f592ae02136)

# java - Datanucleus 增强器在带有 GAE 插件的 Eclipse 上因类未找到异常而失败

> ID：12808037
> 
> 赞同：1
> 
> 时间：2012-10-09T20:38:35.883
> 
> 标签：java, eclipse, google-app-engine, datanucleus

我有安装了 Google App Engine 插件的 Eclipse。直到最近，保存类时自动运行的 Datanucleus 增强器运行良好。

我的一个实体类由于引入了一个类型的成员而变得稍微复杂一些，该类型位于项目的 lib 目录中的外部库中。

有问题的字段标有 @Transient 注释，但 Datanucleus 增强器仍然徒劳地尝试找到有问题的类。显然，不会扫描项目 lib 目录中的 jar 文件以查找依赖项。

有没有办法为 Datanucleus 增强器定义类路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:43:47.553

在查看了一些其他相关问题并浏览了 Eclipse 的设置（与 GAE 相关的设置）之后，我得出的结论是，可能没有简单的方法可以直接指定类路径。

我能想到的最简单和最优雅的方法是禁用自动 Datanucleus 增强，并引入一个 Ant 任务来执行此操作。

[Add scala class to DataNucleus 增强器 CLASSPATH](https://stackoverflow.com/questions/8013391/add-scala-class-to-datanucleus-enhancer-classpath)问题的批准答案被证明特别有用。

我编写了一个与链接问题中提供的几乎相同的 Ant 构建文件，它解决了我的问题。

# spring - WebApplicationInitializer 被重复调用

> ID：12808041
> 
> 赞同：2
> 
> 时间：2012-10-09T20:38:54.620
> 
> 标签：spring, tomcat, spring-mvc

我在 Tomcat 7.x（最新版本）下托管了一个基于 Spring 3.1 的应用程序。该应用程序仅使用 Java 配置（不`web.xml`，没有 Spring XML 配置）。所有单元测试都通过了，包括使用 Spring Java 配置 ( `@ContextConfiguration`) 的单元测试。

问题是在部署应用程序时，WebApplicationInitializer 实现被*多次*调用。过滤器和侦听器的重复注册会导致异常并且应用程序永远不会启动。

我没想到`WebApplicationInitializer.onStartup()`会被反复打电话，如果可能的话，我想消除这种行为。如果有人对为什么会发生这种情况以及如何阻止它有任何建议，我将非常感激。

**更新**我相信这个问题是初始化类本身的外部问题，但在这里以防我弄错了......

```
public class DeploymentDescriptor implements WebApplicationInitializer {

    private static final Logger LOGGER = LoggerFactory.getLogger("org.ghc.web-app-initializer");

    @Override
    public void onStartup (ServletContext servletContext) throws ServletException {
        // This is the programmatic way of declaring filters. This allows you to order
        // Filters. The order of these security filters DOES MATTER!
        FilterRegistration.Dynamic mockSecurityFilter       = servletContext.addFilter ("mockSecurityFilter", "org.ghc.security.MockSecurityFilter");
        mockSecurityFilter.addMappingForUrlPatterns         (EnumSet.of (REQUEST), true, "/*");

        FilterRegistration.Dynamic siteMinderSecurityFilter = servletContext.addFilter ("siteMinderSecurityFilter", "org.ghc.security.SiteMinderSecurityFilter");
        siteMinderSecurityFilter.addMappingForUrlPatterns   (EnumSet.of (REQUEST), true, "/*");

        FilterRegistration.Dynamic userDetailsStoreFilter   = servletContext.addFilter ("userDetailsStoreFilter", "org.ghc.security.UserDetailsStoreFilter");
        userDetailsStoreFilter.addMappingForUrlPatterns     (EnumSet.of (REQUEST), true, "/*");

        // Static resource handling using "default" servlet
        servletContext.getServletRegistration ("default").addMapping ("*.js", "*.css", "*.jpg", "*.gif", "*.png");
        // Map jspf files to jsp servlet
        servletContext.getServletRegistration ("jsp").addMapping ("*.jspf");

        // Spin up the Spring 3.1 class that can scan a package tree for classes
        // annotated with @Configuration. See org.ghc.spring3.ControllerConfiguration for
        // this example.
        final AnnotationConfigWebApplicationContext dispatcherContext = new AnnotationConfigWebApplicationContext ();
        dispatcherContext.setServletContext (servletContext);
        dispatcherContext.register(ScProviderDirectory.class);
        dispatcherContext.refresh ();

        // Spin up the Spring DispatcherServlet (just like before) passing the just built
        // application context. Load it like the regular Servlet that it is!
        final ServletRegistration.Dynamic servlet = servletContext.addServlet ("spring", new DispatcherServlet(dispatcherContext));
        servlet.setLoadOnStartup (1);
        servlet.addMapping ("/");  // Make sure this is NOT "/*"!
    }
} 
```

**更新 2**这很奇怪。Tomcat 日志似乎标识了我的 DeploymentDescriptor 类的两个实例。我验证了我的 .war 文件中只有一个此类的实例。我不知道第二个（幻影）实例来自哪里，但至少这解释了*为什么*该类被扫描两次......

```
logs/localhost.2012-10-09.log:INFO: Spring WebApplicationInitializers detected on classpath: [org.ghc.configuration.DeploymentDescriptor@3b29642c]
logs/localhost.2012-10-09.log:INFO: Spring WebApplicationInitializers detected on classpath: [org.ghc.configuration.DeploymentDescriptor@432c4c7a] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:58:18.937

这里的问题是一个 Maven Overlay 将一个 Spring xml 配置文件转储到我的应用程序中~~。~~无论出于何种原因，这都会导致`WebApplicationInitializer.onStartup()`被调用两次。可能是应用程序上下文和 servlet 上下文的初始化。取消覆盖，应用程序正在按预期初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T20:44:35.540

我有同样的问题。问题是我有多个 spring-web*.jar 像 Biju K. 建议的（一个作为战争的一部分，另一个在共享/tomcat 库中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T16:15:42.240

我有同样的问题。在 web 应用程序模块的目录中运行`mvn clean`，然后启动 Tomcat 为我解决了这个问题。

# iphone - ios6中facebook单点登录中的错误

> ID：12808043
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:39:01.673
> 
> 标签：iphone, ios, facebook, ios6

ios6中facebook单点登录中的错误![在此处输入图像描述](../Images/f895704bc6b4d906d8bada4b4ca4fbcf.png)

请检查上图。当我点击取消时，它不会返回应用程序，而是留在 Facebook 本身。这仅在 iOS6 中发生。在 iOS5.1.1 中它运行良好。请帮忙！！！

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:57:40.423

您应该向 Facebook 提交您的错误并提供尽可能多的详细信息（包括一些示例代码）[https://developers.facebook.com/bugs/create](https://developers.facebook.com/bugs/create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:41:21.653

用户在手动返回您的应用程序时在 FB 应用程序中按下取消后，您的处理程序将被调用，状态为 FBSessionStateClosedLoginFailed。因此，请检查此状态并提出正确的错误消息或尝试再次打开会话。

# objective-c - Localizable.strings 错误 - 编译器说文件丢失

> ID：12808044
> 
> 赞同：7
> 
> 时间：2012-10-09T20:39:04.123
> 
> 标签：objective-c, ios, localization, localizable.strings

我尝试添加一个 Localizable.strings 文件并添加一些字符串进行测试，一切正常。

但是，当我尝试添加本地化时，事情开始变得很奇怪。我可以添加本地化（英语和俄语），并且可以在 finder 中看到文件列在两个文件夹中；ru.lproj 和 en.lproj。

当我清理和构建时，我收到以下编译错误：

```
Copy .strings file Error
The file "Localizable.strings" couldn't be opened because there is no such file. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T22:18:25.283

通过在评论中由 tiguero 提供的这个链接向正确的方向推送来修复它。

我进一步查看了 .pbxproj 文件，发现了这个时髦的行，看起来很可疑：

```
 6AAE55EC1551A42500C1F3F0 /* Localizable.strings */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.strings; path = Localizable.strings; sourceTree = "<group>"; }; 
```

我删除了它，清理并重建。它现在被以下行替换：

```
6AC473DC1624BF3E00503305 /* Localizable.strings in Resources */ = {isa = PBXBuildFile; fileRef = 6AC473DE1624BF3E00503305 /* Localizable.strings */; }; 
```

它有效！

# jquery - 隐藏 iPad 键盘

> ID：12808045
> 
> 赞同：1
> 
> 时间：2012-10-09T20:39:15.977
> 
> 标签：jquery, ipad, uiwebview

我有 UIWebview 实例，它有一个用户将填写的表单。我需要他用十六进制值填充它。

[所以我在此处找到http://mottie.github.com/Keyboard/](http://mottie.github.com/Keyboard/)的屏幕键盘库后根据 jQuery 制作了自定义键盘布局

并将其修改为在平板电脑上工作。

现在的问题是 iPad 键盘仍然弹出，但我在按下时设法忽略了这些键。有更好的主意来完全隐藏它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:54:59.570

我找到了怎么做

在触地事件中使用 jQuery 模糊元素。

您需要将此代码添加到文档准备功能：

```
$('input[type="text"]').bind('touchstart', function(e) {
    e.preventDefault();
    document.activeElement.blur();
}); 
```

# python - 谁能为我提供一些聚类示例？

> ID：12808050
> 
> 赞同：1
> 
> 时间：2012-10-09T20:39:24.473
> 
> 标签：python, scipy, cluster-analysis

我很难理解`scipy.cluster.vq`真正的作用！

在维基百科上，它说`Clustering`可用于将数字图像划分为不同的区域以进​​行边界检测或对象识别。
在其他网站和书籍上，它说我们可以使用`clustering`聚类图像的方法来查找相似图像组。
因为我对图像处理感兴趣，所以我真的需要完全理解是什么`clustering`。

那么
谁能给我看一些关于使用`scipy.cluster.vq`图像的简单例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:57:46.110

所执行的聚类类型[`scipy.cluster.vq`](http://docs.scipy.org/doc/scipy/reference/cluster.vq.html)肯定是后者（相似图像组）的种类。

唯一实现的聚类算法[`scipy.cluster.vq`](http://docs.scipy.org/doc/scipy/reference/cluster.vq.html)是[K-Means](http://docs.scipy.org/doc/scipy/reference/cluster.vq.html)算法，它通常将输入数据视为 n 维欧几里得空间中的点，并尝试划分该空间，以便可以通过说“示例 x 最像质心 y”。质心可以被认为是输入数据的原型示例。矢量量化导致简洁或压缩的表示，因为我们可以记住一个整数，而不是记住我们看到的每个新图像的所有 100 个像素，它指向新图像最相似的原型示例。

如果您有许多小灰度图像：

```
>>> import numpy as np
>>> images = np.random.random_sample((100,10,10)) 
```

所以，我们有 100 张 10x10 像素的图像。让我们假设它们都已经具有相似的亮度和对比度。scipy kmeans 实现需要平面向量：

```
>>> images = images.reshape((100,100))
>>> images.shape
(100,100) 
```

现在，让我们训练 K-Means 算法，以便任何新的输入图像都可以分配给 10 个集群之一：

```
>>> from scipy.cluster.vq import kmeans, vq
>>> codebook,distortion = kmeans(images,10) 
```

最后，假设我们有五个新图像要分配给十个集群之一：

```
>>> newimages = np.random.random_samples((5,10,10))
>>> clusters = vq(newimages.reshape((5,100)),codebook) 
```

`clusters`将包含五个示例中每个示例的最佳匹配质心的整数索引。

这是一个玩具示例，除非您正在处理的图像中感兴趣的对象都居中，否则不会产生很好的结果。由于感兴趣的对象可能出现在较大图像中的任何位置，因此通常为较小的图像“补丁”学习质心，然后将它们与较大的图像进行卷积（在许多不同位置进行比较）以提高平移不变性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:50:51.997

第二个是聚类：**将有点相似的对象**（可能是图像）分组。聚类*不是*一种纯粹的成像技术。

例如，在处理单个图像时，它可以应用于颜色。这是减少图像中颜色数量的一种非常好的方法。如果您按颜色和像素坐标进行聚类，您还可以将其用于图像分割，因为它将具有相似颜色*且*彼此接近的像素分组。但这是集群的一个**应用领域**，而不是纯粹的集群。

# mysql - MySQL 表定义的性能建议

> ID：12808051
> 
> 赞同：0
> 
> 时间：2012-10-09T20:39:26.993
> 
> 标签：mysql, sql, normalization

我关心数据库表的性能，我必须存储与客户调查应用程序相关的数据。

我有一个数据库表，用于存储来自调查的客户回复。由于调查问题会根据客户 i 而变化，而不是使用每个 questionid 作为列来定义表模式，因此将其定义如下

```
 customerdata(customerid  varchar, 
         partkey varchar, 
         questionkey varchar, 
         value, varchar,
         version, int,
         lastupdate, timestamp) 
```

在哪里：

partkey: 是零件的简码 (part1,part2...)

questionkey：是问题的简码，例如年龄、性别等

由于一些客户填写了两次调查，三次等我添加了版本列。

在这种设计中，customerid、partkey、questionkey 和 version 是主键。

我担心这种设计的性能。我应该将其他主键定义为索引吗？那会有帮助吗？到目前为止，对于 30 个客户，我有 7000 条记录。我预计最多有300-500。你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:55:28.173

听起来像一个非常小的数据库。我怀疑您会遇到性能问题，但如果您在查询时检测到任何问题`partkey`，`questionkey`或者`version`稍后您可以随时添加一个或多个索引来解决问题。没有必要解决您没有并且可能永远不会遇到的性能问题。

只有当您必须执行不将该`customerid`字段用作主要过滤器的时间敏感查询时，才会出现性能问题。我怀疑你会有一些这样的查询（当你想跨客户聚合数据时），但我怀疑它们的时间敏感度足以受到我期望从这样的一秒或更短的响应时间的影响小数据集合。如果是，则添加索引。

另外，请注意一个表只有一个主键。该键可以使用多个列，因此您可以说列`customerid`、`partkey`、`questionkey`和`version`是PRIMARY KEY 的*一部分*，但您不能说它们都是“主键”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T21:42:59.567

rownumber-wise，我体验过超过 100.000 行的 mysql 数据库，它运行得很好，所以你应该没问题。

尽管如果您运行复杂的查询则情况不同，这更多地取决于数据库设计而不是行号。

# objective-c - 取消隐藏 NSWindow

> ID：12808055
> 
> 赞同：4
> 
> 时间：2012-10-09T20:39:41.563
> 
> 标签：objective-c, macos, nswindow

有没有办法检查窗口是否隐藏并以编程方式取消隐藏 NSWindow？

我试过 [self showWindow:nil] 和 [self.window makeKeyAndOrderFront:self] 但它们会导致奇怪的行为，比如两个窗口等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:56:13.440

使用`- (BOOL) isVisible`(so BOOL visible = [self.window isVisible] 来确定窗口是否隐藏，如果要隐藏或取消隐藏窗口，请使用： `[self.window setHidden:YES]` 而且，显然，您通过 NO 取消隐藏它。

**编辑**

`setHidden`对不起，用方法代替 `- (void) setIsVisible:(BOOL) yourBOOL`方法。

希望我有所帮助。

# ios - 一个故事板中的多个 UIViewController

> ID：12808062
> 
> 赞同：1
> 
> 时间：2012-10-09T20:40:17.180
> 
> 标签：ios, xcode, uiviewcontroller, storyboard, uitableview

我正在开发一个处理一本书的应用程序。该应用程序使用表格视图作为导航。总共有超过 500 章。我打算为每一章制作一个 UIViewController。正如您可以猜到的那样，这导致我的计算机内存不足（我有 8GB）。有没有办法迭代这个过程？每个 UIViewController 都有完全相同的布局。

感谢您的时间，

PJ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:43:00.360

每章一个 UIViewController 太疯狂了

将 UIScrollview 与 NSMMUtable 数组一起使用，其中 UIView 与您的内容一起使用

像这样的东西：

情节提要： UIViewcontroller 包含 UIScrollView；

代码：将 NSMutableArray 与您的内容绑定（根据要求自定义对象或文本）；在 UIView 中显示每个元素的内容；将 UIView 添加到 UIScrollView；

# windows - 删除 IIS 上 Codeigniter 的 index.php？

> ID：12808063
> 
> 赞同：8
> 
> 时间：2012-10-09T20:40:17.543
> 
> 标签：windows, codeigniter, iis, url-rewriting

我知道我可以使用以下 web.config 代码删除 url 的“index.php”部分：

```
<rewrite>
  <rules>
    <rule name="Rule" stopProcessing="true">
      <match url="^(.*)$" ignoreCase="false" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
        <add input="{URL}" pattern="^/favicon.ico$" ignoreCase="false" negate="true" />
      </conditions>
      <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true" />
    </rule>
  </rules>
</rewrite> 
```

问题是我在子目录 (mydomain.com/codeigniter) 中安装了 CI，但我无法理解 web.config 文件。

您知道如何更改它以使其适用于子目录吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T09:06:08.547

我在根目录中有 WordPress，在子目录中有我的 CodeIgniter 应用程序。我创建了一个与`web.config`您类似的并将其保存在子目录中。我的 CI 应用程序不再需要 url 中的 index.php。

起初，我将我的子目录添加到 中，`<action url="myapp/index.php/{R:1}"...>`并希望它可以被限制为仅查看子目录但失败了。我删除了子目录并将其保留为原始但将 web.config 移动到子目录并且它可以工作。

因此，我想也许您可以创建两个具有不同规则的 web.config 文件并将它们保存在不同的目录中。

另一个注意事项可能会有所帮助：启用错误消息以从 IIS 输出详细信息。我使用这些技巧来找出 IIS 如何查找我的文件。它是`<httpErrors errorMode="Detailed" />`, `<asp scriptErrorSentToBrowser="true"/>`, 和`<system.web>`下面的部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <system.webServer>

        <httpErrors errorMode="Detailed" />
        <asp scriptErrorSentToBrowser="true"/>

        <rewrite>
        <rules>
            <rule name="RuleRemoveIndex" stopProcessing="true">
                <match url="^(.*)$" ignoreCase="false" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                </conditions>
                <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true"/>
            </rule>
        </rules>
        </rewrite>

    </system.webServer>

    <system.web>
        <customErrors mode="Off"/>
        <compilation debug="true"/>
    </system.web>

</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-16T08:56:50.960

> 将 web.config 放到根目录下。
> 
> 用户代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <configuration>
 <system.webServer>

    <httpErrors errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true"/>

    <rewrite>
    <rules>
        <rule name="RuleRemoveIndex" stopProcessing="true">
            <match url="^(.*)$" ignoreCase="false" />
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
            </conditions>
            <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true"/>
        </rule>
    </rules>
    </rewrite>

</system.webServer>

<system.web>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
</system.web> 
```

# haskell - 'where' 在其他表达式中

> ID：12808065
> 
> 赞同：4
> 
> 时间：2012-10-09T20:40:26.453
> 
> 标签：haskell

我可以`let`在其他表达式中使用。

```
foo n = (let a = True in (\x -> a)) 3

foo' n | n == 1 = let a = True in a
       | n /= 1 = False 
```

但我不能这样做`where`

```
foo n = ((\x -> a) where a = True) 3

foo' n | n == 1 = a where a = True
       | n /= 1 = False 
```

> 1:20：输入“where”时解析错误

在haskell中真的不可能还是我的错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T20:45:53.277

`let`is 一个表达式 while `where`is 一个子句。`where`绑定到句法结构， let 可以在任何表达式可以使用的地方使用。

你当然可以这样写：

```
foo n = ((\x -> a)) 3 where a = True

foo' n | n == 1 = a
       | n /= 1 = False
       where a = True 
```

或像这样：

```
foo n = (\a -> (\x -> a) 3) True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:45:05.120

您需要将`where`子句放在末尾：

```
foo n = ((\x -> a)) 3
  where a = True

foo' n | n == 1 = a
       | n /= 1 = False
  where a = True 
```

不同之处在于这`let`是一个表达式，而`where`需要绑定其他一些构造。参见[let vs where](http://www.haskell.org/haskellwiki/Let_vs._Where)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:52:51.247

`let ... in ...`用于在表达式中引入名称绑定。

`where`是一种方便的语法，用于给出局部辅助定义以及方程。您只能将其用作方程式的一部分（最后），而不是任意表达式的中间。

它们的用法不一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:53:42.960

在我看来，作为一种表达的主张`let`有点不对劲；在一个`do`块中它是一个语句，尽管我们说它在那里缩写`let ... in`。我认为要说的是

```
 let_in_ :: Statement -> Expression -> Expression
 _where_ :: Statement -> Statement  -> Statement 
```

因此 a 的第一部分`let`是一个语句并且可以被 a 修改`where`。所以例如

```
 foo n = (let a = b where b = True in (\x -> a)) 3

 bip = do 
     let a = b where b = let c = d where d = True in c
     return a 
```

同样，我们也许可以这样说：

```
 case_of_ :: Expression -> [Statement] -> Expression 
```

所以例如

```
z x = case even x of 
   True -> d where d = x + 1
   False -> w - 1 where w = let a = x in a + 1 
```

# c++ - C++ 的 RSA 加密 (BB10)

> ID：12808069
> 
> 赞同：0
> 
> 时间：2012-10-09T20:40:41.570
> 
> 标签：c++, encryption, rsa, blackberry-10

已解决（寻找我的答案）。我需要帮助在 C++ 中使用 RSA 加密密码。我正在为 C++ 中的 Blackberry10 工作，我一直在寻找 RSA 教程或指导我完成加密过程的东西，但遗憾的是我没有找到任何一致的东西。

有人告诉我，该过程基本上包括三个步骤：

1）用模块和指数生成RSA公钥。2）用公钥加密文本。3）在base640中再次加密文本。

如果您想知道为什么我需要遵循这三个步骤是因为我正在使用银行应用程序，而这些是他们的要求。

我一直在搜索，我什至没有找到如何迈出第一步，用模块和指数生成公钥（我已经有了）。

任何帮助将不胜感激。

谢谢。

* * *

是不是我自己构建了整个应用程序。我们是一个团队，我只需要使用 RSA 加密客户端密码并将其发送到流程的下一步。我确实有使用 Blackberry 和 RSA 的经验，但是在 Java 中，这个过程稍微容易一些，例如：在 java 中，一旦你得到模块和公共指数，第一步就是通过一个非常简单的语法创建 RSA 公钥对象： RSAPublicKey publicKey = new RSAPublicKey(new RSACryptoSystem(2048),ebytes, mbytes);. 在这部分我有点迷失，因为我没有找到合适的 BB10 文档。如果我创造了我自己创建一个完整的加密 API 的错觉，我很抱歉。BB10 有这个基于 hursa.h 的安全 API (https://developer.blackberry.com/native/beta/reference/com.qnx.doc.crypto/topic/about_rsa_raw.html) 我' 我试图实现它，但我没有成功。@owlstead @dajames @bta

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:52:52.740

我强烈建议您利用现有的加密库来为您处理所有这些。 [OpenSSL](http://openssl.org)被广泛使用，[LibTom](http://libtom.org)库也包含一个加密库。从头开始实施加密并不是一件容易的事情，通过使用现有的实施，您将节省大量时间和挫败感。OpenSSL 尤其是一个不错的选择，因为它已多次通过 FIPS 认证测试。由于您正在开发银行应用程序，因此您（和您的客户）很可能希望使用经过认证的实现。

即使您坚持从头开始实现自己的加密库，我也鼓励您查看上述库作为示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:39:33.447

在我看来，您对这种密码学的工作原理的了解甚至比您想象的还要少。

通常不使用 RSA 加密来加密数据。可以使用 PIN 或密码之类的简短内容来完成此操作，但通常会生成对称密钥并使用对称密钥加密数据，然后使用 RSA 加密对称密钥。

如果您要向银行发送密码，那么您可能应该做的是使用银行在他们自己的密钥证书中提供的 RSA 密钥。只有银行有私钥，所以只有他们才能解密密码。如果这是正确的，那么您不需要生成 RSA 密钥，但您确实需要验证证书是否可信。

我不编写黑莓程序，所以我不知道它们支持哪些加密 API，但我希望您需要内置的所有内容。这都是非常标准的东西。

我建议您在开始设计解决方案之前先阅读公钥密码学（*例如在*[此处](http://en.wikipedia.org/wiki/Asymmetric_cryptography)和[此处](http://en.wikipedia.org/wiki/Public_key_infrastructure)的 Wikipedia 上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:53:47.890

解决。在做了一些研究并更好地了解 BB10 编码和 RSA 之后，我终于想出了在 C/C++ 中使用 RSA 和 Base64 成功加密纯文本的解决方案，用于 BB10 或任何其他平台。请考虑到我有来自我正在使用的服务的 rsa 对象的模数和公共指数。

编码：

```
 QByteArray answer;

    RSA* rsa = RSA_new();

    BIGNUM *modulus = BN_new();
    BIGNUM *exponent = BN_new();
    const char *modulusString = rsaObj->getM(); //My Modulus
    const char *exponentString = rsaObj->getE(); //My exponent

    BN_hex2bn(&modulus, modulusString);
    BN_hex2bn(&exponent, exponentString);

    rsa->n = BN_new();
    BN_copy(rsa->n, modulus);
    rsa->e = BN_new();
    BN_copy(rsa->e, exponent);

    int maxSize = RSA_size(rsa);
    qDebug() << "maxSize:" << maxSize;

    const char *inn = "1234";
    unsigned char *encrypted = (unsigned char*) malloc(maxSize);
    int bufferSize = RSA_public_encrypt(strlen(inn), (unsigned char *) inn,
            encrypted, rsa, RSA_PKCS1_PADDING);

    if (bufferSize == -1) {
        RSA_free(rsa);
        qDebug() << "Error";
    }

    QByteArray enc = QByteArray::fromRawData((const char*) encrypted, 256);
    answer = enc.toBase64();

    return answer; 
```

谢谢，我希望这对新的 BB10 开发人员有所帮助

# c# - 如何从堆栈跟踪中获取行号？

> ID：12808075
> 
> 赞同：2
> 
> 时间：2012-10-09T20:40:58.787
> 
> 标签：c#, windows-phone-7, exception, stack-trace, windows-phone

我正在尝试从我的 WP7 应用程序中的堆栈跟踪中获取行号。我已将调试信息设置为完整，并在调试配置中运行应用程序，但堆栈跟踪中没有行号。我怎样才能解决这个问题？我知道 BugSense，但不想使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:48:32.020

不要认为这甚至是可能的，因为*代码文件*`line number`中的行号在编译后与二进制文件失去了任何关系。这就是我们使用文件的原因。*它们*是“数据库”，用于保存实际执行的代码与其最终二进制状态之间的关系。*`PDB`*

 **所以不要认为有任何可能`line number`在**运行时**得到 a 。

但是，如果您有`PDB`最后一次编译的文件，您可能会从

[StackFrame.GetFileLineNumber](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.getfilelinenumber.aspx)，它执行以下操作：

> 获取文件中包含正在执行的代码的行号。此信息通常是从可执行文件的调试符号中提取的。**

# c++ - push_back 在增加容量之前推送元素？

> ID：12808077
> 
> 赞同：1
> 
> 时间：2012-10-09T20:41:17.133
> 
> 标签：c++, stl

```
class A
{
    public:
        A():a(0)
        {}
        A(int x):a(x)
        {
            cout<<"convert"<<endl;
        }
        A(const A& rhs):a(rhs.a)
        {
            cout<<"copy: "<<a<<endl;
        }
        void print()
        {
            cout<<a<<endl;
        }
        void Set(int x)
        {
            a=x;

        }
    private:
        int a;
};

int main()
{
    vector<A>vec2(2,A(100));
    cout<<"the size: "<<vec2.size()<<"  the capacity: "<<vec2.capacity()<<endl;
    vec2.push_back(17);
    for(int i=0; i<vec2.capacity();i++)
    {
        vec2[i].print();
    }
    cout<<"the size: "<<vec2.size()<<"  the capacity: "<<vec2.capacity()<<endl;
} 
```

```
转变
副本：100
副本：100
尺寸：2 容量：2
转变
副本：17
副本：100
副本：100
100
100
17
0

```

为什么会这样

```
copy: 17
copy: 100
copy: 100 
```

似乎容量是 5 而不是 4，并且在我要推送的元素推入向量后容量增加了，我一定是错的，有人可以告诉我更多细节吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:49:17.600

如果您了解向量的大小和容量之间的区别，您将意识到当需要增加容量时，需要将整个向量移动到内存中的其他位置。

当向量元素从旧向量“移动”到新向量时，就会调用复制构造函数。如果您添加带有一些调试的析构函数，它可能对您更有意义。

还...

```
for(int i=0; i<vec2.capacity();i++) 
```

...不是一个好主意。您正在访问超出有效矢量数据的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:46:42.313

就在调用`vec2.push_back(17)`大小和容量（由您的应用程序打印）之前都是 2。此时 17 被转换为一个`A`对象，然后将其传递给`push_back`函数。在内部，`std::vector`将缓冲区增加到更大的容量（这导致两个副本的`A`值为 100）并且参数 to`push_back`被复制到新分配的缓冲区中。在您的实现中，新插入的元素在现有元素*之前被复制。*

`0`最后，当您从to迭代时，`vec2.capacity()`您会导致未定义的行为。您只能合法地从`0`到迭代向量中的元素`vec2.size()`。程序的输出表明在您的实现中缓冲区已增长到`capacity()==4`（打印了 4 个元素）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:44:51.953

您不应该有使用容量的 for 循环。通常容量会翻倍，这是为了防止在插入新元素时内存被破坏。

如果初始容量为 2，当您添加第 3 个元素时，它将翻倍为 4。当您添加第 5 个元素时，它的新容量将为 8。

# wpf - WPF中的计算器布局

> ID：12808078
> 
> 赞同：1
> 
> 时间：2012-10-09T20:41:20.003
> 
> 标签：wpf, dockpanel

我必须设计一个计算器，但我要先进行设计。该`=`按钮不会进入我想要放置它的屏幕上其他按钮之间的空间。这是我到目前为止所拥有的图片：

[与 imageshack.us 一起上传 http://imageshack.us/a/img843/7687/unbenannt22z.jpg](http://imageshack.us/a/img843/7687/unbenannt22z.jpg)

我使用 StackPanels 来创建我的主面板。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:00:16.383

如果您将按钮排列在网格中而不是 StackPanel 的集合中，那么您可以将 Equals 按钮放在网格的最后一行的旁边，并将其 Grid.RowSpan 设置为 2 以便它可以工作如您所愿。

# python - GQL 查询（GAE 数据存储 Python）：如何检索所有具有相同标签的实体和所有包含子字符串的实体？

> ID：12808083
> 
> 赞同：0
> 
> 时间：2012-10-09T20:41:30.953
> 
> 标签：python, google-cloud-datastore, gql

我有一个存储在 GAE 中的 60000 对双语词典数据库，如下所示：

日期、标签、值

日期，可见，螺丝

日期，可见，螺丝

日期, vis à bois, 木螺丝

date, vis à bout pointu, 锥尖螺钉

日期，相对于 braser，钎焊螺丝

date, vis à métaux, 机械螺丝

.

今天使用以下python脚本：

```
def get_value(self, tag):
  entry = db.GqlQuery("SELECT * FROM StoredData where tag = :1", tag).get()
  value = entry.value
  value = unicode(value)
  value = value.encode('ascii','xmlcharrefreplace') 
```

如果我要求“vis”，我只会得到“screw”作为回应。

问题：

1.  我还想得到“螺丝钉”作为第二个答案，也就是说，检索所有具有相同标签的实体。

2.  我还想获取包含子字符串“screw”的所有实体（用户至少输入 3 个字符）：

螺丝, 螺丝, 木螺丝, 锥尖螺丝, 钎焊螺丝, 机械螺丝

=> 我必须进行哪些 GQL 查询才能在此脚本生成的表中显示它们？

```
### Show the tags and values as a table.
###def show_stored_data(self):
###  self.response.out.write('''
###    <p><table border=1>
###      <tr>
###         <th>Key</th>
###         <th>Value</th>
###         <th>Created (GMT)</th>
###      </tr>''')
###  entries = db.GqlQuery("          ***GQL query n°1 or n°2***           ")
###  for e in entries:
###    entry_key_string = str(e.key())
###    self.response.out.write('<tr>')
###    self.response.out.write('<td>%s</td>' % e.tag)
###    self.response.out.write('<td>%s</td>' % e.value)
###    self.response.out.write('<td><font size="-1">%s</font></td>\n' % e.date.ctime())
###    self.response.out.write('''
###      <td><form action="/deleteentry" method="post"
###            enctype=application/x-www-form-urlencoded>
###     <input type="hidden" name="entry_key_string" value="%s">
###     <input type="hidden" name="tag" value="%s">
###            <input type="hidden" name="fmt" value="html">
###     <input type="submit" style="background-color: red" value="Delete"></form></td>\n''' %
###                            (entry_key_string, e.tag))
###    self.response.out.write('</tr>')
###  self.response.out.write('</table>') 
```

非常感谢您的帮助。

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:18:07.543

听起来你想要全文搜索：[https ://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:26:06.513

### 只得到一个结果

[这](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass#GqlQuery_get)是您的问题-您正在对象`.get()`上使用该方法`GqlQuery`。文档说：

> 调用查询的`get()`方法，以获取在 Datastore 中找到的第一个匹配实体：

如果你这样做：

```
def get_value(self, tag):
  entries = db.GqlQuery("SELECT * FROM StoredData where tag = :1", tag).get()
  for entry in entries:
    value = entry.value
    value = unicode(value)
    value = value.encode('ascii','xmlcharrefreplace')
    print value 
```

我希望您会看到您将同时获得`screw`和`screws`。

### 子串

至于用 抓住所有字符串`"screw"`，这将比你想象的要难得多。看看[这个 SO question](https://stackoverflow.com/questions/47786/google-app-engine-is-it-possible-to-do-a-gql-like-query)。一些答案建议您使用[`SearchableModel`](http://www.billkatz.com/2009/6/Simple-Full-Text-Search-for-App-Engine).

例如`vis à <blank>`，如果您知道该短语始终以相关子标签开头，您可能可以使用`>`and`<`来获得您要查找的内容，也许可以查看标签是否在`vis`and之间`vis zzzzzzz`，或者其他类似的东西行——我对 GQL 的字符串排序顺序不是 100% 清楚，而且我现在找不到关于它的文档。

# iphone - 绘制动画

> ID：12808084
> 
> 赞同：6
> 
> 时间：2012-10-09T20:41:32.950
> 
> 标签：iphone, ios, xcode, quartz-graphics, drawrect

我正在创建一个简单的应用程序，当用户按下按钮时，将在屏幕上绘制一系列线条，用户将能够实时看到这些线条（几乎就像动画一样）。

我的代码看起来像这样（已简化）：

```
UIGraphicsBeginImageContext(CGSizeMake(300,300));
CGContextRef context = UIGraphicsGetCurrentContext();

for (int i = 0; i < 100; i++ ) {
    CGContextMoveToPoint(context, i, i);
    CGContextAddLineToPoint(context, i+20, i+20);
    CGContextSetStrokeColorWithColor(context, [[UIColor blackColor] CGColor]);
    CGContextStrokePath(context);
}

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

我的问题是：

1) 一旦用户按下按钮，UIThread 就会阻塞，直到绘制完成。

2）我无法一次在屏幕上绘制一条线 - 我尝试直接在循环内设置 UIImage 并尝试在循环内设置图层内容。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T03:33:51.743

你说“就像动画一样”。为什么不做一个真正的动画，比如 Core Graphics `CABasicAnimation`？您真的需要将其显示为一系列线条，还是适当的动画可以？

如果您想为线条的实际绘制设置动画，您可以执行以下操作：

```
#import <QuartzCore/QuartzCore.h>

- (void)drawBezierAnimate:(BOOL)animate
{
    UIBezierPath *bezierPath = [self bezierPath];

    CAShapeLayer *bezier = [[CAShapeLayer alloc] init];

    bezier.path          = bezierPath.CGPath;
    bezier.strokeColor   = [UIColor blueColor].CGColor;
    bezier.fillColor     = [UIColor clearColor].CGColor;
    bezier.lineWidth     = 5.0;
    bezier.strokeStart   = 0.0;
    bezier.strokeEnd     = 1.0;
    [self.view.layer addSublayer:bezier];

    if (animate)
    {
        CABasicAnimation *animateStrokeEnd = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
        animateStrokeEnd.duration  = 10.0;
        animateStrokeEnd.fromValue = [NSNumber numberWithFloat:0.0f];
        animateStrokeEnd.toValue   = [NSNumber numberWithFloat:1.0f];
        [bezier addAnimation:animateStrokeEnd forKey:@"strokeEndAnimation"];
    }
} 
```

然后你所要做的就是`UIBezierPath`为你的线路创建，例如：

```
- (UIBezierPath *)bezierPath
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    [path moveToPoint:CGPointMake(0.0, 0.0)];

    [path addLineToPoint:CGPointMake(200.0, 200.0)];

    return path;
} 
```

如果你愿意，你可以将一堆线拼凑成一条路径，例如这里是一个大致正弦曲线形状的线系列：

```
- (UIBezierPath *)bezierPath
{
    UIBezierPath *path = [UIBezierPath bezierPath];
    CGPoint point = self.view.center;

    [path moveToPoint:CGPointMake(0, self.view.frame.size.height / 2.0)];

    for (CGFloat f = 0.0; f < M_PI * 2; f += 0.75)
    {
        point = CGPointMake(f / (M_PI * 2) * self.view.frame.size.width, sinf(f) * 200.0 + self.view.frame.size.height / 2.0);
        [path addLineToPoint:point];
    }

    return path;
} 
```

而且这些不会阻塞主线程。

顺便说一句，您显然必须在`CoreGraphics.framework`目标的`Build Settings`下方添加`Link Binary With Libraries`。

# ios - 适用于 iOS 的旧 Admob 下载链接

> ID：12808091
> 
> 赞同：3
> 
> 时间：2012-10-09T20:41:53.497
> 
> 标签：ios, admob, marmalade

我使用 Marmalade SDK 为 iOS 开发移动应用程序。Marmalade SDK 目前不支持 iOS 6。我需要旧版本的 Admob iOS SDK。（我相信我需要适用于 iOS 的 Admob 6.1）

更新：-

GoogleAdMobAdsSdkiOS-6.1.4.zip 有人知道原始的 SHA1 校验和吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:14:57.447

我发现

[http://dl.google.com/googleadmobadssdk/googleadmobadssdkios_udid.zip](http://dl.google.com/googleadmobadssdk/googleadmobadssdkios_udid.zip)

在我看来 GoogleAdMobAdsSdkiOS‑6.1.5.zip SHA1 139ed5a9c2d8baa464d50b7f87adad7d07f367ec

我希望它会工作

GoogleAdMobAdsSdkiOS‑6.1.4.zip SHA1 3b4bebc13e369a5312de5e1004864e26ecc17d6c

如果您有 GoogleAdMobAdsSdkiOS‑6.1.4.zip，请分享链接，我会让您的答案正确。谢谢你！

GoogleAdMobAdsSdkiOS‑6.1.4.zip - 似乎不使用 UDID 我相信使用它更安全。

# android - 从我的 android 应用程序将新文档上传到 Google 驱动器

> ID：12808093
> 
> 赞同：2
> 
> 时间：2012-10-09T20:42:13.450
> 
> 标签：android, google-drive-api

我正在尝试使用 Google Drive SDK 从我的 android 应用程序在 Google Drive 上创建一个新文档。我的身份验证正在工作，并且我设法使用以下代码创建了一个简单的文本文件：

```
// com.google.api.services.drive.model.File
File newFile = new File();
newFile.setTitle("Test");
newFile.setMimeType("text/plain");
String contentStr = "This is a test file";      

try {
    File insertedFile = drive.files().insert(
         newFile, ByteArrayContent.fromString("text/plain", contentStr)).execute();
} catch (IOException e) {
    e.printStackTrace();
} 
```

如果我将“text/plain”更改为“application/vnd.google-apps.document”并插入没有任何内容的文件，则它会在我的 Google Drive 上创建一个新文档：

```
// com.google.api.services.drive.model.File
File newFile = new File();
newFile.setTitle("Test");
newFile.setMimeType("application/vnd.google-apps.document");   

try {
    File insertedFile = drive.files().insert(newFile).execute();
} catch (IOException e) {
     e.printStackTrace();
} 
```

但是我想上传一个包含内容的新文档，但是使用与纯文本文件相同的方法时：

```
// com.google.api.services.drive.model.File
File newFile = new File();
newFile.setTitle("Test");

String fileType = "application/vnd.google-apps.document";
newFile.setMimeType(fileType);   

try {
    File insertedFile = drive.files().insert(
              newFile, ByteArrayContent.fromString(fileType, contentStr)).execute();
} catch (IOException e) {
    e.printStackTrace();
} 
```

我收到此错误：

```
 com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
 {
     "code" : 400,
     "errors" : [ {
          "domain" : "global",
          "message" : "Bad Request",
          "reason" : "badRequest"
     } ],
     "message" : "Bad Request"
 } 
```

并且没有创建文件。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:28:30.040

mime 类型必须是源文档的 mime 类型，例如 text/plan 或 text/HTML。如果您使用 convert=true 上传，则云端硬盘上的生成文件将具有 application/vnd.google-apps.document 的 mime 类型。

# javascript - 函数不返回值

> ID：12808094
> 
> 赞同：0
> 
> 时间：2012-10-09T20:42:22.123
> 
> 标签：javascript, dojo

我无法从此函数中获取值，我不知道为什么但返回为空。我用 firebug 调试它，它运行了两次，第一次返回空，然后第二次返回值。

知道如何纠正这个问题。

```
function validation() {
    if (val()); {
        alert("Error");
    } else {
        alert("Pass");
    }
}

function val() {
    var answer;
    dojo.xhrGet({
        url: "ValodS?option=12",
        handleAs: "text",
        load: function (response) {
            if (response == 'Pass') {
                answer = false;
            } else {
                answer = true;
            }
        }
    });
    return answer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:45:10.310

当 val 返回时，`answer`未赋值。您正在调用发送 http 请求的异步操作。然后控制流继续，当 http 请求最终完成时，您定义的匿名函数 assigns 将`answer`被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:45:13.710

问题是您在发送答案之前就返回了答案（AJAX 请求在后台运行而不会阻塞调用代码。

最简单的解决方案是让调用者将回调函数传递给您的函数。然后，您可以在处理程序内部调用回调函数`load`（从而以这种方式传递数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:44:11.063

你有一个额外的; 在你之后`if`

将第一行从

```
if (val()); 
```

至

```
if (val()) 
```

# vb.net - draw.mode 中的 VB Tab 控件

> ID：12808100
> 
> 赞同：1
> 
> 时间：2012-10-09T20:42:59.083
> 
> 标签：vb.net, tabcontrol

我正在尝试使选项卡在表单的右侧水平显示。由于文本的显示方式，我无法使用工具箱中的 tabcontrol。我正在使用我发现可以帮助我的代码。但是在用尽我所有的资源之后，我似乎无法让代码指向 tabPages 集合。我在那里有条目，但选项卡显示为空白。

```
 Public Sub New()
    tabControl1 = New TabControl()
    Dim tabPage1 As New TabPage()

    ' Sets the tabs to be drawn by the parent window Form1\. 
    ' OwnerDrawFixed allows access to DrawItem. 
    tabControl1.DrawMode = TabDrawMode.OwnerDrawFixed

    tabControl1.Controls.Add(tabPage1)
    tabControl1.Location = New Point(25, 25)
    tabControl1.Size = New Size(250, 250)

    tabPage1.TabIndex = 0

    myTabRect = tabControl1.GetTabRect(0)

    ClientSize = New Size(300, 300)
    Controls.Add(tabControl1)

    AddHandler tabControl1.DrawItem, AddressOf OnDrawItem
End Sub! 
```

[选项卡示例](http://i.stack.imgur.com/aCHQC.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:18:07.397

您可以将`.Alignment`TabControl 的属性设置`Left`为使用水平选项卡。

如果您不喜欢这样，请尝试为每个选项卡使用单独的 TabControl 的 FlowLayoutPanel，例如

```
Public Class Form1
  Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim flp As New FlowLayoutPanel
    flp.Dock = DockStyle.Left
    flp.AutoSize = True
    flp.AutoSizeMode = Windows.Forms.AutoSizeMode.GrowOnly

    Me.Controls.Add(flp)
    For i As Integer = 0 To 5
      Dim tbc As New TabControl
      Dim tbp As New TabPage("Tab" & i.ToString)
      tbc.TabPages.Add(tbp)
      flp.Controls.Add(tbc)
    Next i
  End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:25:49.947

我最终从不同的来源编译了这段代码来让它工作，

```
 Private Sub TabControl1_DrawItem(ByVal sender As Object, ByVal e As System.Windows.Forms.DrawItemEventArgs) Handles TabControl1.DrawItem
    Dim g As Graphics
    Dim sText As String

    Dim iX As Integer
    Dim iY As Integer
    Dim sizeText As SizeF
    Dim ctlTab As TabControl

    Dim r As New RectangleF(e.Bounds.X, e.Bounds.Y + 2, e.Bounds.Width, e.Bounds.Height - 2)

    ctlTab = CType(sender, TabControl)

    g = e.Graphics

    sText = ctlTab.TabPages(e.Index).Text
    sizeText = g.MeasureString(sText, ctlTab.Font)

    iX = e.Bounds.Left + 6
    iY = e.Bounds.Top + (e.Bounds.Height - sizeText.Height) / 2

    g.DrawString(sText, ctlTab.Font, Brushes.Black, iX, iY)
End Sub 
```

文本不会出现在 RAD 中，但在我调试/运行它时会出现。

非常感谢 LUC001 @ [http://www.dreamincode.net/forums/topic/125792-how-to-make-vertical-tabs/](http://www.dreamincode.net/forums/topic/125792-how-to-make-vertical-tabs/)

# entity-framework - Entity Framework 5 代码迁移不创建数据库

> ID：12808102
> 
> 赞同：0
> 
> 时间：2012-10-09T20:43:06.267
> 
> 标签：entity-framework

我正在尝试使用 Entity Framework 5 Code First。我已经创建了模型类和上下文。

之后按照 Microsoft 的说明，我启用了代码迁移。

比我跳过运行我的应用程序（在此期间应该第一次创建数据库）并使用 Add-Migration 命令。迁移已成功生成。

更新数据库调用也成功了。**但我根本没有看到我的数据库。**它不存在！

SQL Management Studio 和 Visual Studio Server Explorer 仅显示 4 个默认系统数据库，仅此而已！我还尝试启动我的应用程序 - 它不会改变任何东西。我正在使用

```
public MyContext() : base("name=MyContext") { } 
```

**这种类型的构造函数（所以我需要用MyContext**名称指定连接字符串。这是我的**app.config**示例：

```
<configuration>
    <configSections>
      <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
      <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </configSections>
    <entityFramework>
      <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
        <parameters>
          <parameter value="v11.0" />
        </parameters>
      </defaultConnectionFactory>
    </entityFramework>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <connectionStrings>
      <add name="BettyContext" providerName="System.Data.SqlServerCe.4.0" connectionString="Data Source=MyDB.sdf"/>
    </connectionStrings>
</configuration> 
```

我不知道是怎么回事。似乎没有人有这样的问题。可能是我错过了一些明显的事情，但是我正在等待一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:53:09.880

你看到一个例外吗？如果您没有看到异常，您可能没有查看正确的数据库。您可以尝试使用您的应用程序将一些数据添加到数据库中，然后读取它。如果可以成功添加和读取数据，但您仍然看不到数据库，则表明您正在查看错误的数据库。

# javascript - 使用 jQuery 修改 html 属性会产生意想不到的结果

> ID：12808103
> 
> 赞同：0
> 
> 时间：2012-10-09T20:43:06.530
> 
> 标签：javascript, jquery, html

我的 jQuery 遇到了一些不寻常的结果，希望有人能告诉我为什么。我确信 jQuery 足够强大可以做到这一点，所以我想知道我做错了什么。这是我所拥有的（一些看似简单易懂的代码）：

```
///////////reset default search entries/////////////
$("#sOrderByDLM").attr('checked', 'checked');
$("#sOrderByID").attr('checked', '');
$("#sOrderByPOIName").attr('checked', '');
$("#sOrderByAge").attr('checked', '');
$("#sOrderByOfficer").attr('checked', '');

$("#sOrderByDesc").attr('checked', 'checked');
$("#sOrderByAsc").attr('checked', ''); 
```

我在一个简单的 javaScript 函数中有这个，该函数在单击非提交类型（正常）按钮时调用。问题是当我单击它时，它不是填充`sOrderByDLM`单选按钮，而是填充`sOrderByOfficer`按钮，并且同样填充底部的两个 jQuery 语句（例如，`sOrderByAsc`变为 ' `checked`' 而不是`sOrderByDesc`） 我不是公然告诉 jQuery 重置 ' `checked`'属性到第二个参数的属性，它是空白的，除非我专门将它设置为 ' `checked`' 用于我打算默认的字段？

我在使用复选框时遇到了类似的问题，但我通过简单地以相反的顺序调用相同的语句找到了解决方法，但这似乎在这里不起作用。如果我`checked="checked"`在剃须刀中设置“”，一切都很好，但我需要这个按钮在客户端工作。

无论如何，如果 HTML 是必要的，我会提供它，但我怀疑它是否需要，因为我已经三次检查了 id 以确定。

谢谢你的帮助！

（上帝保佑堆栈溢出，我不知道没有你我会做什么！：D）

更新：

```
 <tr>
                        <td class="orderlineupColor"><label for="sOrderByDLM">Date Last Modified</label><br/><input type="radio" id="sOrderByDLM" name="sOrderBy" style="margin-left: 115px;" value="OrderByDLM" @OrderByFiller[0] /></td>
                        <td class="orderlineupColor"><label for="sOrderByID">Entry ID</label><br/><input type="radio" id="sOrderByID" name="sOrderBy" style="margin-left: 115px;" value="OrderByID" @OrderByFiller[1] /></td>
                        <td class="orderlineupColor"><label for="sOrderByPOIName">POI Name</label><br/><input type="radio" id="sOrderByPOIName" name="sOrderBy" style="margin-left: 115px;" value="OrderByPOIName" @OrderByFiller[2] /></td>
                        <td class="orderlineupColor"><label for="sOrderByAge">Age</label><br/><input type="radio" id="sOrderByAge" name="sOrderBy" style="margin-left: 115px;" value="OrderByAge" @OrderByFiller[3] /></td>
                        <td class="orderlineupColor"><label for="sOrderByOfficer">Officer</label><br/><input type="radio" id="sOrderByOfficer" name="sOrderBy" style="margin-left: 115px;" value="OrderByOfficer" @OrderByFiller[4] /></td>
                    </tr>
                    <tr>
                        <td class="orderlineupColor2">In Descending Or<br/>Ascending Order:</td>
                        <td class="orderlineupColor2"><label for="sOrderByDesc">Descending Order</label><br/><input type="radio" id="sOrderByDesc" name="sAscOrDesc" style="margin-left: 115px;" value="OrderByDesc" @OrderByAscOrDescFiller[0] /></td>
                        <td class="orderlineupColor2"><label for="sOrderByAsc">Ascending Order</label><br/><input type="radio" id="sOrderByAsc" name="sAscOrDesc" style="margin-left: 115px;" value="OrderByAsc" @OrderByAscOrDescFiller[1] /></td>
                        <td class="orderlineupColor2"><button type="button" class="smallbtn" onclick="clearSortEntries()">Reset Sort Entries</button></td>
                        <td class="orderlineupColor2"></td>
                    </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:50:25.690

尝试使用`bools`和`.prop()`

```
$("#sOrderByDLM").prop('checked', true); // To check

$("#sOrderByID").prop('checked', false); // To Uncheck 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:45:58.033

要取消选中，请尝试：

```
$("#sOrderByAsc").removeAttr('checked', ''); 
```

`checked`并且`selected`是二进制属性，**而不是真/假**属性。

`$("#sOrderByDLM").attr('checked', 'checked');`是正确的。

也是这样：`.attr('selected', 'selected');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:45:48.317

如果你想使用'checked'和''然后使用removeAttr jquery函数而不是给属性分配`''`空白，`checked`但我不喜欢这个。因为分配 true 和 false 对我来说看起来更对称，然后分配检查和删除属性。

```
$("#sOrderByDLM").attr('checked', 'checked');

$("#sOrderByID").removeAttr('checked'); 
```

使用 true 或 false 代替`'checked'`and`''`

```
$("#sOrderByDLM").attr('checked', true);

$("#sOrderByID").attr('checked', false); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T20:50:17.840

`.attr()`和之间有区别`.prop()`

![啊啊啊](../Images/4a39e26176aa19fef1115fb45ed6595a.png)

*   [http://api.jquery.com/prop/](http://api.jquery.com/prop/)
*   [http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# php - 我怎样才能建立一个统计地图？

> ID：12808109
> 
> 赞同：1
> 
> 时间：2012-10-09T20:43:26.310
> 
> 标签：php, mysql, statistics

我试图弄清楚如何为我的网络应用程序构建统计地图。这是我所拥有的：

我有一个邮政编码的 MySQL 数据库，每个邮政编码都有纬度和经度。我有一些用户已经声明了他们居住的邮政编码。我什至有一个半正弦查询，它将根据他们的邮政编码显示在给定纬度/经度的 25 英里范围内存在多少用户。

我的问题是：使用这些信息，我如何使用 PHP 为 Web 应用程序构建统计地图？

我现在可以只使用美国地图甚至北美地图，但我只是不确定如何构建该地图。我考虑过的一些选项：

1.  在地图上显示一个彩色点，根据该位置附近的用户数量，更大或更小。不过，我不知道该怎么做，尤其是当这些点重叠时！
2.  在用户所在的位置显示单个“图钉”。如果我的用户群显着增长，这似乎会失控

所以回到我的问题。如果我在达拉斯有 300 个用户，在纽约有 4,000 个用户，在底特律有 45 个用户，在芝加哥有 403 个用户……我将如何在地图上表示它——以及如何在基于php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:49:27.563

您正在尝试构建一个三维（可能甚至更多维度）的数据显示。

您的尺寸是：

*   X-位置
*   Y-位置
*   每个位置的价值

不过，这实际上并没有定义任何关于视觉外观的内容。

一种简单的方法可能是计算每个州的绝对用户数，然后根据某种比例在地图上为该州着色。您还可以计算生活在某个州的用户百分比与该州的绝对数量和颜色相比。

一种不同的方法是在地图上为每个用户放置一个点，如果该点以前打印过，则改为更改其颜色，例如使其更亮。

最后，这实际上取决于您的实际数据是什么，以及您的可视化方法是否显示了一些重要信息——但这只能在您看到之后才能确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:57:28.157

当您在寻找网络应用程序时，您是否考虑过 Google 地图。因素 1\. 可以使用 MarkerClusterer 库来实现。一个[演示](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer/1.0/examples/advanced_example.html)这个的演示。可以使用 AJAX 加载数据库中的数据。

# google-analytics - 谷歌分析没有正确跟踪

> ID：12808110
> 
> 赞同：0
> 
> 时间：2012-10-09T20:43:26.960
> 
> 标签：google-analytics, analytics, google-custom-search

我最近将我网站的一个 Google Analytics（分析）跟踪代码更新为最新（异步）版本。自从这样做以来，它就没有正确跟踪链接。所有链接都是作为推荐来通过的，而不是我在传入链接中指定的 Analytics utm 参数（即关键字、来源、活动等）。

我还在网站上添加了 Google 自定义搜索引擎。这是页面上结束 head 标记之前的代码示例（使用假帐号等）（分析和 CSE 代码）：

```
 <script type="text/javascript">

   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-XXXXXXXXX-X']);
   _gaq.push(['_setDomainName', 'sitedomain.com']);
   _gaq.push(['_trackPageview']);

   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

 </script>
 <script type="text/javascript">
   (function() {
     var cx = '0000000000000000:aksjfhkjw';
     var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
     gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
         '//www.google.com/cse/cse.js?cx=' + cx;
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
   })();
 </script> 
```

以上有什么问题吗？例如，我是否应该以任何方式修改常规 Analytics 脚本，因为我在同一页面上有 cse？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:17:31.577

我认为您的代码看起来不正确。

这是我用于 Google Analytics 代码的内容：

```
 <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-xxxxxxxxxx']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script> 
```

我没有在我们的域上进行站点搜索，但这当然足以将数据输入 GA。可能是您`_gaq.push(['_setDomainName', 'sitedomain.com']);`被视为推荐人。试一试，让我知道。

# postgresql - Scriptella - 如何获取和重用自动生成的 ID？

> ID：12808116
> 
> 赞同：4
> 
> 时间：2012-10-09T20:43:59.127
> 
> 标签：postgresql, scriptella

我正在使用 Scriptella 进行 ETL 操作，使用自动生成的 id 引用的许多表。我想在不使用子查询的情况下重新使用这些 id，这是我的 etl 文件的脚本片段：

```
<script connection-id="out" if="rownum>1">

SELECT nextval('SQC_CLASE') AS claseId;
INSERT INTO zoologia.clase VALUES( ?claseId, ?phylumId, ?clase, ?subclase, ?infraclase, true );

SELECT nextval('SQC_ORDEN') AS ordenId;
INSERT INTO zoologia.orden VALUES( ?ordenId, ?claseId, ?orden, ?suborden, true );

SELECT nextval('SQC_SUPERFAMILIA') AS superfamiliaId;
INSERT INTO zoologia.superfamilia VALUES( ?superfamiliaId, ?ordenId, ?superfamilia, true );

SELECT nextval('SQC_FAMILIA') AS familiaId;
INSERT INTO zoologia.familia VALUES( ?familiaId, ?superfamiliaId, ?familia, ?subfamilia, ?tribu, true );

SELECT nextval('SQC_GENERO') AS generoId;
INSERT INTO zoologia.genero VALUES( ?generoId, ?familiaId, ?genero, true );

SELECT nextval('SQC_ESPECIE') AS especieId;
INSERT INTO zoologia.especie VALUES( ?especieId, ?generoId, ?especie, ?subespecie, ?variedad, ?genero, true );

</script> 
```

这显然是错误的，因为`SELECT`不能在脚本中执行，对吧？我不太确定如何在没有子查询的情况下做到这一点。我正在使用 PostgreSQL。

编辑：我想要实现的是，例如，获取在第一个表的插入中使用的自动生成 id 的值，以便在第二个表的插入中使用它，因为应该引用记录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:33:09.113

感谢 Scriptella 论坛的用户，这是解决方案，一个包含所有序列值的查询：

```
<query connection-id="external">
    <query connection-id="sizoo">
        SELECT nextval('SQC_PHYLUM') AS phylumId
        , nextval('SQC_CLASE') AS claseId
        , nextval('SQC_ORDEN') AS ordenId
        , nextval('SQC_SUPERFAMILIA') AS superfamiliaId
        , nextval('SQC_FAMILIA') AS familiaId
        , nextval('SQC_GENERO') AS generoId
        , nextval('SQC_ESPECIE') AS especieId;

        <script connection-id="sizoo" if="rownum>1">
            INSERT INTO zoologia.phylum VALUES( ?phylumId, ?phylum, true );
            INSERT INTO zoologia.clase VALUES( ?claseId, ?phylumId, ?clase, ?subclase, ?infraclase, true );
            INSERT INTO zoologia.orden VALUES( ?ordenId, ?claseId, ?orden, ?suborden, true );
            INSERT INTO zoologia.superfamilia VALUES( ?superfamiliaId, ?ordenId, ?superfamilia, true );
            INSERT INTO zoologia.familia VALUES( ?familiaId, ?superfamiliaId, ?familia, ?subfamilia, ?tribu, true );
            INSERT INTO zoologia.genero VALUES( ?generoId, ?familiaId, ?genero, true );
            INSERT INTO zoologia.especie VALUES( ?especieId, ?generoId, ?especie, ?subespecie, ?variedad, ?genero, true );
        </script>
    </query>
</query> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:20:21.260

您的代码最初看起来完全是伪造的，因为似乎没有任何东西将其连接`SELECT`到以下内容`INSERT`，所以即使它运行了，您也只会生成一个 ID 并将其丢弃。不过，看起来您的脚本工具可能会自动将`SELECT`列别名的结果定义为可以在以后的查询中引用的变量；请参阅[Scriptella 教程中的“复制到另一个数据库”](http://scriptella.javaforge.com/tutorial.html)。快速浏览一下这表明您想要做的事情可能会奏效，但您必须使用嵌套`<query/>`和`<script/>`块来完成它。

使用序列生成的 ID 的正确方法是以下之一：

```
INSERT INTO zoologia.especie VALUES( nextval('SQC_ESPECIE'), ?generoId, ?especie, ?subespecie, ?variedad, ?genero, true );

INSERT INTO zoologia.especie VALUES( DEFAULT, ?generoId, ?especie, ?subespecie, ?variedad, ?genero, true );

INSERT INTO zoologia.especie(generoId, especie, subespecie, variedad, genero, someothercol) 
VALUES( ?generoId, ?especie, ?subespecie, ?variedad, ?genero, true ); 
```

您的问题最初似乎是关于重新使用已删除的 ID（即无缝序列），但看起来您已经澄清它以删除它。

* * *

**编辑后更新**+评论改变了问题的含义：

如果您尝试在后续 s 中使用从一行生成的 ID `INSERT`，则必须：

*   使用或通过在 之后`INSERT ... RETURNING`调用来捕获 ID ，将 ID 存储在脚本语言中的客户端变量中，并将其传递给后续s；或者`currval('the_id_sequence')``INSERT``INSERT`

*   `currval('the_id_sequence')`在`VALUES`后续插入列表中使用。

我什至从未听说过 Scriptella，更不用说使用它了，所以我无法帮助使用客户端变量的第一个选项。不过，如果它没有办法存储 a 的结果`SELECT`或`INSERT ... RETURNING`供以后使用，我会感到非常惊讶。快速浏览一下就表明它是使用嵌套`<query/>`和`<script/>`块完成的，但这只是本教程的 30 秒浏览。

第二个选项很简单。假设您刚刚插入：

```
INSERT INTO zoologia.genero VALUES( DEFAULT, ?familiaId, ?genero, true ); 
```

并想在其中插入一个新行，`especie`其中包含`generoId`刚刚插入的`genero`. 假设 ID 序列`genero`遵循 PostgreSQL 使用的标准命名`tablename_columnname_id_seq`，您将使用：

```
INSERT INTO zoologia.especie VALUES( DEFAULT, currval('genero_generoId_seq'), ...); 
```

看：

*   [`INSERT ... RETURNING`](http://www.postgresql.org/docs/current/static/sql-insert.html)
*   [`currval`](http://www.postgresql.org/docs/current/static/functions-sequence.html)

# android - 在 monkeyrunner 的“.installPackage()”中使用变量的问题

> ID：12808119
> 
> 赞同：2
> 
> 时间：2012-10-09T20:44:02.920
> 
> 标签：android, python, windows, monkeyrunner

我在这个话题上找不到太多东西。我正在尝试自动化应用程序测试，将应用程序放置在特定文件夹中并运行脚本：`monkeyrunner.bat -v ALL myscript.py`，并且脚本在名为 的文件夹中的任何 apk 上执行`apkrepository`。这使得我不必在每次测试新应用程序时都更改我的 python 脚本。

我遇到麻烦的部分是我正在尝试使用一个变量来`device1.installPackage()`
查看下面的代码以获取它。

```
installme = os.popen(r'dir C:\users\uname\desktop\apkrepository /A:-d /B').read()
print installme
# => com.application.android.apk #or whatever the package name is

filepath = r'C:\users\uname\desktop\apkrepository'

androidapp = filepath + '\\\' + installme

print androidapp
# => C:\users\uname\desktop\apkrepository\com.application.android.apk
#This exactly what I type below manually to get it to work 

device1= MonkeyRunner.waitForConnection(15, "emulator-5554")
#Emulator was started in previous section of code, which is not shown here.

device1.installPackage(androidapp)
#DOES NOT WORK!!

device1.installPackage('c:\users\uname\desktop\apkrepository\com.application.android.apk')
 #The only way it works seems to be to write the path in manually everytime. 
```

我尝试了许多不同的方法来让它正常工作，但我不确定这是否是我正在/正在尝试做的事情。如果变量打印正确的文件路径，我看不出它会如何工作。这可能是一件非常容易的事情，但这就是我卡住的地方。它给出的错误：

```
E/Device: Error dyring Sync: Local Path does not exist. Error installing package C:\users\uname\desktop\apkrepository\com.application.android.apk 
```

我正在使用带有 python2.7 和 android sdk 的 windows 7 64 位。

感谢您提供的任何输入/帮助！我被这件事难住了几天。

变量确实适用于其他地方（monkeyrunner 附属类），例如`device1.startActivity(component=runcomponent)`，其中 runco​​mponent 是包 + 活动变量的组合。*另请注意*：我`device1.installPackages`并排展示了两者以便于查看。我**不会**在我的脚本上连续运行两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:38:13.103

我在linux机器上尝试过同样的方法，它可以工作。请看一下 monkeyrunner 脚本。

```
#! /usr/bin/env monkeyrunner
import re
import sys
import os
import java
import glob
import os

from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
device1= MonkeyRunner.waitForConnection(15, "emulator-5554")
mydir="/home/user/apk"
os.chdir(mydir)
for files in glob.glob("*.apk"):
    print files
    print "path " ,os.path.abspath(mydir+"/"+files)
    device1.installPackage(mydir+"/"+files) 
```

# android - Android：传递结果 ResultInfo 失败。怎么了？

> ID：12808120
> 
> 赞同：0
> 
> 时间：2012-10-09T20:44:02.573
> 
> 标签：android

我的应用程序有问题。一些代码，这会产生错误：

```
 String selection = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME
            + " like'%" + name + "%'";
    String[] projection = new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER };
    Cursor c = context.getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, projection,
            selection, null, null); 
```

这是我的错误：

`java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=4321, result=-1, data=Intent { (has extras) }} to activity ... android.database.sqlite.SQLiteException: near "m": syntax error: , while compiling: SELECT data1 FROM view_data_restricted data WHERE (1 AND mimetype = 'vnd.android.cursor.item/phone_v2') AND (display_name like'%I'm in a pool%') Caused by: android.database.sqlite.SQLiteException: near "m": syntax error: , while compiling: SELECT data1 FROM view_data_restricted data WHERE (1 AND mimetype = 'vnd.android.cursor.item/phone_v2') AND (display_name like'%I'm in a pool%') at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158) at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114) at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330) at android.content.ContentProviderProxy.query(ContentProviderNative.java:366) at android.content.ContentResolver.query(ContentResolver.java:245)`

Aneone 知道什么是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:01:18.160

`AND (display_name like'%I'm in a pool%')`

您在`I'm`. 这就是为什么你的错误抱怨`SQLiteException: near "m": syntax error`

您需要在插入引号之前对其进行转义。

# jquery - 如何让动画在手风琴菜单上工作？

> ID：12808123
> 
> 赞同：2
> 
> 时间：2012-10-09T20:44:13.190
> 
> 标签：jquery, jquery-animate, accordion, jquery-ui-accordion

当我删除手风琴的一部分时，我试图让动画工作。而不是消失，我希望它做一些超级酷的事情。在这种情况下如何让动画工作？谢谢一堆。这是我的 JS：

```
$('document').ready(function(){
  $('#accordion .red').click(function(){

    $(this).parent('div').prev( 'h3' ).remove();
    $(this).parent('div').remove();
    $(this).parent('div').prev('div').animate("bounceslide");

    return false;
  });
}); 
```

这是我的 HTML：

```
<div id="accordion">

    <h3><a href="#">Section 1</a></h3>
    <div class="squares">
            <a href="#" class="green">1</a>
            <a href="# "class="red">2</a>
            <a href="#" class="blue">3</a>  
            <p>
            Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
            ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
            amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
            odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
            </p>
    </div>

    <h3><a href="#">Section 1</a></h3>
    <div class="squares">
            <a href="#" class="green">1</a>
            <a href="# "class="red">2</a>
            <a href="#" class="blue">3</a>  
            <p>
            Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
            ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
            amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
            odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
            </p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:55:46.697

就目前而言，您的逻辑存在一些缺陷……
您致电：

```
$(this).parent('div').remove(); 
```

进而：

```
$(this).parent('div').prev('div').animate("bounceslide"); 
```

因为`$(this)`不再存在于 DOM 中（它与它的父级一起被删除），所以上面的选择器将不起作用。

我建议在你的*超级酷*的东西之后使用动画回调来删除手风琴项目。
就像是：

```
$('#accordion .red').click(function(){
  var $toRemove = $(this).parent('div').prev('h3');
      $toRemove = $toRemove.add($(this).parent('div'));

  $toRemove.animate({height:0}, 500, function(){
    // This is the callback.
    $toRemove.remove();
  });

  return false;
}); 
```

JSfiddle：http: [//jsfiddle.net/L9BXS/](http://jsfiddle.net/L9BXS/)

# drupal - 内部有多个字段的 CCK 字段

> ID：12808126
> 
> 赞同：0
> 
> 时间：2012-10-09T20:44:37.230
> 
> 标签：drupal, drupal-7, cck

我是 drupal 的新手，我对 CCK 字段有疑问。

我制作了一个自定义 cck 字段，安装模式如下所示：

```
function usig_location_field_schema($field) {
  return array(
    'columns' => array(
      'location_cck_usig' => array(
        'type' => 'varchar',
         'length' => 255,
         'not null' => FALSE,
      ),
      'lat_cck_usig' => array(
        'type' => 'varchar',
         'length' => 255,
         'not null' => FALSE,
      ),
      'lon_cck_usig' => array(
        'type' => 'varchar',
         'length' => 255,
         'not null' => FALSE,
      ),
    ),
  );
} 
```

但是当我用这个日志保存新内容时.. drupal 崩溃：

> 致命错误：无法在第 6392 行的 /includes/common.inc 中创建对字符串偏移量或重载对象的引用

所以..我知道我做错了什么。我只是不知道使用哪个钩子来保存字段..（它可能一次保存各种字段？）

谢谢大家，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:19:42.847

您可以随时使用这个名为[Field Collection的出色模块](http://drupal.org/project/field_collection)

干杯

# android - 在电脑上安装安卓

> ID：12808132
> 
> 赞同：0
> 
> 时间：2012-10-09T20:44:56.850
> 
> 标签：android

我最近开始学习在 Android 上编程。我在一本书中只读了几章，但模拟器似乎运行得非常慢。从我发现这是一个普遍的问题。我还发现有一种方法可以在 PC 上安装 android。 [在电脑上安装安卓](http://www.ztuts.com/2012/05/how-to-install-android-on-pc-laptop-pro.html)

该解决方案能否证明适合初学者开发人员的测试环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:52:27.863

试试蓝叠。

使用 XDA-Developers.com 的这些说明进行设置

[http://forum.xda-developers.com/showthread.php?t=1303563](http://forum.xda-developers.com/showthread.php?t=1303563)

# javascript - Javascript 动画底部

> ID：12808144
> 
> 赞同：1
> 
> 时间：2012-10-09T20:45:30.283
> 
> 标签：javascript, intervals, animated

我正在尝试仅使用 javascript (NO JQUERY) 使 div 从页面底部向上浮动。

我在这里有一个小提琴：http: [//jsfiddle.net/H7GSF/](http://jsfiddle.net/H7GSF/)

它向上移动一次，但不会迭代以创建“动画”。

HTML

```
<div id="block"></div>​ 
```

CSS

```
#block { position: fixed; background: red; width: 100px; height: 20px; bottom: 0; }​ 
```

JS

```
b = 0;
el = document.getElementById('block');
setInterval(function(){
    b+=10;
    el.setAttribute('style','bottom:'+(b)+'px;');
},20);​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:48:01.267

因为您没有更新`bottom`. 总是如此`10`

试试这个，

```
b = 0;
el = document.getElementById('block');
setInterval(function(){
    b+=10;
    el.setAttribute('style','bottom:'+(b)+'px;');
},20);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:48:45.697

见[http://jsfiddle.net/H7GSF/1/](http://jsfiddle.net/H7GSF/1/)

只需使用

```
b = 0;
el = document.getElementById('block');
setInterval(function(){
    b+=10;
    el.setAttribute('style','bottom:'+b+'px;');
},20); 
```

问题是那`b`是恒定的！

此外，我认为使用`style`属性而不是`style`属性来更好地修改样式（而且它更短）：

```
el.style.bottom=b+'px;' 
```

并且请注意，如果您使用该`style`属性，则会删除使用属性和属性添加到元素的先前样式`style`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:49:12.683

干得好！ [http://jsfiddle.net/thewebguy/H7GSF/2/](http://jsfiddle.net/thewebguy/H7GSF/2/)

你只需要改变`b`变量

# c# - 带有 x.509 证书的 Web 服务。将 C# 代码移植到 Rails

> ID：12808145
> 
> 赞同：0
> 
> 时间：2012-10-09T20:45:40.803
> 
> 标签：c#, .net, ruby-on-rails, soap, x509

我目前正在 Rails 中构建一个新的基于 Web 的系统，以取代旧的 .NET 解决方案（独立的 Win32 应用程序）。该系统允许分析师执行许多操作。在许多情况下，用户请求实际上是通过调用第三方 Web 服务来提供的。Web 服务使用第三方颁发的 X.509 证书进行保护。进行调用的 .NET 代码如下：

（在 Visual Studio 中，我在相应的 URL 中声明了一个名为“ProductionServices”的 Web/服务引用）

```
X509Certificate2 c = new X509Certificate2("filepath", "password");
using (ProductionServices.Items items = new ProductionServices.Items())
{
  try
  {
   //specify client certificate if needed
   if (c != null)
   items.ClientCertificates.Add(c);

   XmlNode node = null;

   node = items.getItemList();

   XmlDocument xd = new XmlDocument();
   xd.AppendChild(xd.ImportNode(node, true));

   ....... 
```

}

所以，在这一点上，我们的 rails 应用程序看起来很漂亮。但是，我现在需要在 rails 中复制上面的 .NET 逻辑，这样我就可以将 Web 服务数据也拉到我的视图中。我找到了如何做到这一点的非常基本的例子，但从来没有一个使用客户端证书的好例子。谁能指出我正确的方向？

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:41:07.933

假设您使用的是 Net::HTTP，请看这里：

[http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

在页面的中间大约有一个名为“带有 PEM 证书的 SSL/HTTPS 请求”的示例。

如果您在 Net::HTTP（HTTParty、Typhoeus 等）周围使用某种包装器，这将取决于相关库。是这样吗？

# matlab - 我可以调整频谱图频率轴吗？

> ID：12808147
> 
> 赞同：5
> 
> 时间：2012-10-09T20:45:46.367
> 
> 标签：matlab, spectrogram

该[函数的](http://www.mathworks.com/help/signal/ref/spectrogram.html)[MATLAB 文档示例`spectrogram`](http://www.mathworks.com/help/signal/ref/spectrogram.html)提供了频率轴设置为的示例`[0 500]`。我可以把它改成类似的东西`[0 100]`吗？显然，运行`axis`命令将为我执行此操作，但这会调整最终结果并“炸毁”结果图，使其像素化。我基本上是在寻找一个只寻找 0-100 之间的频率的频谱图，而不是在构建频谱图后重新缩放。

这是该文档中的一个示例：

```
T = 0:0.001:2;
X = chirp(T,0,1,150);
spectrogram(X,256,250,256,1E3,'yaxis'); 
```

这会产生以下结果： ![线性啁啾频谱图](../Images/32bd94853fa166ce881a8e95caf58bf5.png)

不需要低于 350Hz 的所有内容。有没有办法在构建频谱图时不包括 350 到 500 之间的所有内容，而不是事后调整轴？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T20:49:02.793

从文档中：

> [S,F,T] = spectrogram(x,window,noverlap,F) 使用频率向量 F，以 Hz 为单位。F 必须是至少包含两个元素的向量。这种情况下使用 Goertzel 算法计算 F 中频率的频谱图。指定的频率四舍五入到与信号分辨率相称的最接近的 DFT bin。在使用 nfft 或 nfft 的默认值的所有其他语法情况下，使用短时傅立叶变换。返回的 F 向量是舍入频率的向量。T 是计算频谱图的时间向量。F 的长度等于 S 的行数。 T 的长度等于 k，如上定义，每个值对应于每个段的中心。

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-29T16:38:24.367

FFT 非常快，最好提高分辨率，然后丢弃不需要的数据。如果您需要更好的光谱分辨率（更多频率区间），则增加 FFT 大小。要在时间维度上获得更平滑的频谱，请增加 noverlap 值以减少每个后续 FFT 的增量。在这种情况下，您不会指定 F。如果 FFT 大小为 1024，那么您将获得 1024/2+1 个频率区间。

```
FFTN = 512;
start = 512*(350/500); % Only care about freq bins above this value
WIN_SIZE = FFTN;
overlap = floor(FFTN*0.8);
[~,F,T,P] = spectrogram(y, WIN_SIZE, overlap, FFTN);
f = 0:(length(F)-1);
f = f*((Fs/2)/length(F));
P = P(start:512,:);
f = f(1,start:512);
imagesc(T,f,10*log10(P),[-70 20]); 
```

# python - 从 python 子进程调用 winrs 失败，路径带引号

> ID：12808152
> 
> 赞同：1
> 
> 时间：2012-10-09T20:45:55.433
> 
> 标签：python, path, escaping, quotes

我正在尝试使用`subprocess.Popen()`在远程计算机上执行 Python 脚本。这在大多数情况下都可以，但如果 Python 的路径包含空格，则会失败。用双引号包围路径无济于事，无论我如何逃避它们 -`winrs`似乎用它们逃避它们`\"`并且路径在遥控器上没有正确解释。

这会产生类似的错误`'\'\\"C:\\progam files\\py\\python.exe\\"\' is not recognized as an internal or external command, operable program or batch file'`。

我已经尝试了所有`Popen`我能想到的标志组合，尝试用`^`, `\`, `"`,转义引号，```但无济于事。

非常感谢任何帮助。编码：

```
#lots of variations of this, all fail...
cmd = '"C:\\my py\\python.exe" --version'

def _winrs_spaces(cmd,host,user,pw,port=8080):
    winrs = 'winrs'
    args = [winrs,
           '-nop',
            '-r:http://%s:%s' % (host, port),
            '-u:%s\\%s' % (host,user),
            '-p:%s' % pw,
            cmd]

    proc = subprocess.Popen(args,stdout=subprocess.PIPE, stderr=subprocess.PIPE,shell=True)
    stdoutData,stderrData = proc.communicate()
    ret = proc.returncode

    if stdoutData:
        print(stdoutData)

    if stderrData:
        print(stderrData)

    if ret:
        raise IOError('_spaces failed')

    return stdoutData 
```

# jquery - 使用jquery触发器的级联下拉菜单太快了

> ID：12808153
> 
> 赞同：0
> 
> 时间：2012-10-09T20:45:56.260
> 
> 标签：jquery

当我触发警报消息时，我已成功使用以下代码使所有必要的组件工作以触发级联下拉列表中的更新。

但是，当我注释掉警报时，似乎事情进展得太快了。有没有办法确保我的源下拉列表在触发目标下拉列表的更改之前完成更新？

```
$(document).ready(function() {
     //Default bu (company) listing
     $.post("select_bu.php", {
         id: 1
     }, function(data) {
         $("select#id_buid").html(data);
     });
     //Default division listing
     $.post("select_division.php", {
         id: 1
     }, function(data) {
         $("select#id_divid").html(data);
     });
     //Default department listing
     $.post("select_dept.php", {
         divid: 11
     }, function(data) {
         $("select#id_deptid").html(data);
     });
     //Default title listing
     $.post("select_title.php", {
         deptid: 12
     }, function(data) {
         $("select#id_titleid").html(data);
     });
     //Default location listing
     $.post("select_loc.php", {
         id: 1
     }, function(data) {
         $("select#id_locid").html(data);
     });
     //Change to Business Unit triggers updated division listing and location
     $("select#id_buid").change(function() { * //alert("Change of BU triggering change in Division and Location.");*
         var id = $("select#id_buid option:selected").attr('value');
         $.post("select_division.php", {
             id: id
         }, function(data) {
             $("select#id_divid").html(data);
         });
         $.post("select_loc.php", {
             id: id
         }, function(data) {
             $("select#id_locid").html(data);
         });
         $("#id_divid").trigger("change");
     });
     //Change to Division triggers updated department listing
     $("select#id_divid").change(function() {
         //alert("Change of Division triggering change in Department.");
         var id = $("select#id_divid option:selected").attr('value');
         $.post("select_dept.php", {
             divid: id
         }, function(data) {
             $("select#id_deptid").html(data);
         });
         $("#id_deptid").trigger("change");
     });
     //Change to Department triggers updated title listing
     $("select#id_deptid").change(function() {
         //alert("Change of Department triggering change in Title.");
         var id = $("select#id_deptid option:selected").attr('value');
         $.post("select_title.php", {
             deptid: id
         }, function(data) {
             $("select#id_titleid").html(data);
         });
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:24:59.483

您应该将触发移至`$.post`. Ajax 调用是异步完成的，这意味着在创建请求脚本后会移动到下一个命令，并在后台处理 ajax 请求。如果您希望它们一个接一个地出现，您必须在前一个的响应处理程序中调用下一个。所以它看起来像这样：

```
$("select#id_buid").change(function() { * //alert("Change of BU triggering change in Division and Location.");*
     var id = $("select#id_buid option:selected").attr('value');
     $.post("select_division.php", {
         id: id
     }, function(data) {
         $("select#id_divid").html(data);
         $.post("select_loc.php", {
             id: id
         }, function(data) {
             $("select#id_locid").html(data);
             $("#id_divid").trigger("change");
         });
     });
 });

 $("select#id_divid").change(function() {
     //alert("Change of Division triggering change in Department.");
     var id = $("select#id_divid option:selected").attr('value');
     $.post("select_dept.php", {
         divid: id
     }, function(data) {
         $("select#id_deptid").html(data);
         $("#id_deptid").trigger("change");
     });

 }); 
```

# web-services - 远程网络服务

> ID：12808157
> 
> 赞同：1
> 
> 时间：2012-10-09T20:46:01.383
> 
> 标签：web-services

我是网络服务的新手。我的项目中有一个要求。他们给了我一个 wsdl 文件和一个关于方法描述的 Web 服务链接和文档。

在文档中有`retriveDocuments`使用请求参数*request、loginUser、loginPassword、systemId、maxResults、searchCriteria 调用*的方法。

他们希望我调用 webservice 并获取所需的文件并在应用程序中显示它们。

我的问题是如何调用 Web 服务以及如何传递所有这些参数并获得结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:57:21.220

很可能这是一个 SOAP 服务。您的编程语言（例如 Java）应该具有允许您使用 WSDL 为服务生成 SOAP 客户端的工具。一旦你有了 cient 代码，就应该很容易传递参数、进行调用并获得结果。网上有很多教程，但您可以从那里开始研究。

# .net - 使用 CCNET 1.8.2 版中的条件参数更改 svn 位置

> ID：12808159
> 
> 赞同：1
> 
> 时间：2012-10-09T20:46:08.830
> 
> 标签：.net, cruisecontrol.net, ccnet-config, build-system

我正在尝试为我们的应用程序设置构建服务器。在进行强制构建时，我想使用参数来确定要构建的内容。下面我的设置可以在 DEV 中运行，主要是因为 if 语句是设置的一个片段。无论我选择 QA 还是 UAT，它总是错误的。以前有没有人尝试过用 Cruisecontrol.net 做到这一点？

```
<cb:define name="ParametersTemplate">
    <parameters>
      <selectParameter>
        <name>Target</name>
        <display>Target to Build</display>
        <description>Which target do you want to build?</description>
        <default>DEV</default>
        <allowedValues>
          <value name="DEV">DEV</value>
          <value name="QA">QA</value>
          <value name="UAT">UAT</value>
        </allowedValues>
      </selectParameter>
      <textParameter>
        <name>Branch</name>
        <display>Branch Name:</display>
        <description>Name of the branch you want to build?</description>
        <default>_DEV</default>
        <minimum>8</minimum>
        <maximum>255</maximum>
        <required>true</required>
      </textParameter>
    </parameters>
  </cb:define>

<cb:define name="ProjectTemplate">
    <workingDirectory>$(WorkingDir)\$(ProjectName)</workingDirectory>
    <artifactDirectory>$(ArtifactsDir)\$(ProjectName)</artifactDirectory>
    <sourcecontrol type="svn" cleanCopy="true">
      <workingDirectory>$(WorkingDir)\$(ProjectName)</workingDirectory>
      <cb:if expr="$[Branch] == 'QA' || $[Branch] == 'UAT'">
        <trunkUrl>$(SVNLocation)/$(ProjectSvnReleaseLocation)/$[Branch]</trunkUrl>
      </cb:if>
      <cb:else>
         <trunkUrl>$(SVNLocation)/$(ProjectSvnDevLocation)</trunkUrl>            
      </cb:else>
      <cb:SVNCredentials/>
    </sourcecontrol>
    <labeller type="svnRevisionLabeller">
      <cb:LabelCommon />
      <cb:if expr="'$[Branch]'=='QA' || '$[Branch]'=='UAT'">
        <url>$(SVNLocation)/$(ProjectSvnReleaseLocation)/$[Branch]</url>
      </cb:if>
      <cb:else>
        <url>$(SVNLocation)/$(ProjectSvnDevLocation)</url>
      </cb:else>
      <cb:SVNCredentials/>
    </labeller>
    <tasks>
      <nant>
        <targetList>
          <target>$(ProjectName)</target>
        </targetList>
        <cb:NantCommon />
      </nant>
    </tasks>
    <cb:ParametersTemplate/>
  </cb:define> 
```

我查找并发现的一件事是替换变量，但我不确定如何将它们用于这样的设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:57:24.213

The left side variables in your first `cb:if` expression need to be surrounded by single quotes, like you do in the second `cb:if` expression, like so:

```
 <cb:if expr="'$[Branch]' == 'QA' || '$[Branch]' == 'UAT'">
    <trunkUrl>$(SVNLocation)/$(ProjectSvnReleaseLocation)/$[Branch]</trunkUrl>
  </cb:if>
  <cb:else>
     <trunkUrl>$(SVNLocation)/$(ProjectSvnDevLocation)</trunkUrl>            
  </cb:else> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:30:52.640

In my humble opinion, it's not a good idea to try and change the svn url like that. Even if you get it to work, various other things might break. I'd go with three different projects instead, using a common template to share the rest of the configuration.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T20:48:46.693

You are confusing two concepts here. cb:if is part of the preprocessor and is used when parsing the configuration, before any project is run. If you want to act depending on the value of a dynamic value, you should use the conditional task with a compare value condition :

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/Conditional_Task](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Conditional_Task)

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/Compare_Values_Condition](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Compare_Values_Condition)

This will work when running a project, inside a task. However, for your case, this will not help because you want to change a value inside a source control block, which is not supported the way you want it. What you could do, though, is have the branch name as the value of the parameter :

[http://www.cruisecontrolnet.org/projects/ccnet/wiki/SelectParameter](http://www.cruisecontrolnet.org/projects/ccnet/wiki/SelectParameter)

# c# - C#如何通过http上传文件？

> ID：12808160
> 
> 赞同：0
> 
> 时间：2012-10-09T20:46:14.693
> 
> 标签：c#, upload

我正在寻找解决方案如何使用 http 请求上传一些文件。我的想法是，我将通过邮寄方式传输我的文件，在 PHP 端，我将把文件放在服务器上。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:48:23.693

```
var client = new System.Net.WebClient();
client.UploadFile(address, filename); 
```

请参阅MSDN 上的[UploadFile](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:50:06.087

好吧，我会尝试最简单的可能开始的事情 - [`WebClient.UploadFile`](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadfile.aspx)：

```
WebClient client = new WebClient();
client.UploadFile(url, file); 
```

当然，您必须编写适当的 PHP 代码来处理上传...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:58:33.560

另一种方法是通过浏览器上传文件并使用 Fiddler 处理上传请求/响应。之后，您可以通过 C# 使用 HttpWebRequest 编写确切的请求。

# powershell - 当服务器不响应 ping 时，通过 powershell 获取服务器的 IP

> ID：12808161
> 
> 赞同：2
> 
> 时间：2012-10-09T20:46:17.147
> 
> 标签：powershell, ping

由于防火墙的限制，我处理的服务器不会回复 ping，但会提供他们的 IP 地址

例如，如果我这样做：

```
ping myhost.com 
```

我明白了

```
Pinging myhost.com [192.1.1.1] with 32 bytes of data:
Request Timed Out. 
```

如何从 powershell 获取服务器的 IP？我知道如果服务器响应 ping (Test-Connection or Ping-Host) 可以通过多种方式完成，但是当它忽略 ping 请求时我无法理解

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:51:25.470

您可以使用[System.Net.Dns.GetHostAddresses](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)方法。[此方法将返回System.Net.IPAddress](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx)对象的数组。

使用示例：

```
$ipAddresses = [System.Net.Dns]::GetHostAddresses('google.com') 
```

列出所有地址：

```
$ipAddresses | %{$_.IPAddressToString} 
```

获取数组中的第一个地址：

```
$ipAddresses[0].IPAddressToString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:51:29.800

您可以尝试通过 DNS 解决它：

```
[System.Net.Dns]::GetHostByName('google.com').AddressList 
```

# xml - 在 XSLT 中解析表

> ID：12808166
> 
> 赞同：1
> 
> 时间：2012-10-09T20:46:25.037
> 
> 标签：xml, xslt, xslt-1.0

是否可以在 XSLT 中解析这种文本：

```
详细信息|Numéro appelé|Date et heure|Quantité réelle|Qantité facturée|HT|TTC
Appel 与 unportable|0611XXXXXX|14/06 - 09h32|00h00mn23s|00h00mn23s|gratuit|gratuit
Appel 与 unportable|0688XXXXXX|14/06 - 10h39|00h01mn16s|00h01mn16s|gratuit|gratuit
Appel 与 unportable|0611XXXXXX|18/06 - 07h24|00h00mn50s|00h00mn50s|gratuit|gratuit
Appel 与 unportable|0688XXXXXX|20/06 - 09h32|00h00mn23s|00h00mn23s|gratuit|gratuit
Appel 与 unportable|0688XXXXXX|20/06 - 10h44|00h01mn27s|00h01mn27s|gratuit|gratuit
Appel 与 unportable|0611XXXXXX|25/06 - 21h09|00h00mn22s|00h00mn22s|gratuit|gratuit
Appel 与 unportable|0626XXXXXX|29/06 - 11h25|00h00mn27s|00h00mn27s|gratuit|gratuit
Appel 与 unportable|0688XXXXXX|02/07 - 13h39|00h02mn37s|00h02mn37s|gratuit|gratuit

```

此表是变量中的内容，我想替换“|” 字符`</td><td>`（`<th>`如果可能的话，可能在第一行）并添加`<tr>`.

并且... 使用 XSLT 1.0 执行此操作。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:05:14.870

不使用扩展会很痛苦，您必须将其作为外部参数传递或放入一些标签中。Xslt 是关于转换 Xml 文件而不是文本文件，因此请使用正确的工具来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:14:36.597

使用 XSLT 2.0 的正则表达式功能解析这样的输入要容易得多。

但是，如果您真的只需要`tr`每行一个，并且`td`每个垂直条有一个边界，您可以使用两个命名模板（或使用一个更复杂的模板）方便地做到这一点：一个解析变量并中断一行一次，将该行传递给第二个命名模板，该模板将字符序列解析为`tr`元素序列。在伪代码中，是这样的：

```
template name="emit-rows"
  param name="input"
  choose when $input = ''
     // do nothing
  otherwise 
     <tr>
      call-template name="emit-columns"
        with-param name="s"
                   value="substring-before($input,'&#xA;')
     </tr>
     call-template name="emit-rows"
       with-param name="input"
                  value="substring-after($input,'&#xA;')

template name="emit-columns"
  param name="s"
  choose when $s = ''
     <!--* do nothing *-->
  otherwise
     <td>
       value-of substring-before($s,'|')
     </td>
     call-template name="emit-columns"
        with-param name="s" value="substring-after($s,'|') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T03:07:21.463

这是一个简单的 Perl 脚本来做你想做的事

```
my $tag = "th";
while(<>)
{
    s/[\r\n]*$//;
    print "<$tag>\n";
    for $f (split /\|/)
    {
        print "<td>$f</td>\n";
    }
    print "</$tag>\n";
    $tag = "tr";
} 
```

您可能不得不根据您运行它的位置（Windows 与 Linux）来调整字符编码，以确保您的重音字符不会被破坏。我把它留给你作为练习。

这是您输入的前 3 行的输出：

```
<th>
<td>D▒tail</td>
<td>Num▒ro appel▒&lt;/td>
<td>Date et heure</td>
<td>Quantit▒ r▒elle</td>
<td>Qantit▒ factur▒e</td>
<td>H.T.</td>
<td>T.T.C.</td>
</th>
<tr>
<td>Appel vers un portable</td>
<td>06110XXXXX</td>
<td>14/06 - 09h32</td>
<td>00h00mn23s</td>
<td>00h00mn23s</td>
<td>gratuit</td>
<td>gratuit</td>
</tr>
<tr>
<td>Appel vers un portable</td>
<td>06889XXXXX</td>
<td>14/06 - 10h39</td>
<td>00h01mn16s</td>
<td>00h01mn16s</td>
<td>gratuit</td>
<td>gratuit</td>
</tr> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T03:36:40.907

正如其他人所说，这绝对不是 XSLT 的工作 - 但是，只是为了好玩，它可以使用 XSLT1.0 来完成。这是使用 XMLSpy 测试的——因此它可能需要使用 exslt 将结果树片段转换为节点集。但原理是一样的。 *对于技术解决方案，请跳过接下来的几段*

**编辑（基于问题中的评论）：**我没有足够的代表在正确的地方发表评论，但是，这个问题是技术解决方案不够时的完美示例。

您曾说过您“别无选择”来使用 XSLT，但我认为这突出了我在许多 IT 专业人员中看到的一个问题。您可能无法选择工作环境的当前状态（我假设这是一个工作解决方案，因为没有正确思维的教育者会将此作为如何使用 XSLT 的示例）。您**可以选择**的是如何将此解决方案交付给任何提出请求的人。

这个问题的真正解决方案是 XSLT 肯定不是解决这个问题的正确方法，这就是你的雇主或客户需要被告知的。虽然我下面的解决方案是解决您的问题的完全有效的方法，但我建议这不是最佳实践，不是 XSLT 的适当使用，也不是解决此问题的最有效方法，在专业环境中，您有责任说同样的话。

人们可能不喜欢被告知他们的环境是错误的，或者他们希望如何解决问题而不是应该如何解决，但如果他们向您寻求建议，那么您的建议应该在适当的情况下包括批评。所以无论如何，请在下面提出解决方案，但一定要提出上面的论点 - 这样即使他们在 XSLT 中实现它，至少你已经尽了你的责任来告知和教育，如果最终结束，如果该批评被记录在案使用糟糕的解决方案，如果它坏了，你将不负责。

**实际的 XSLT 解决方案从这里开始：**

输入（请注意，您需要在代码周围添加一个标签才能使其成为有效的 XML）：

```
<text>Détail|Numéro appelé|Date et heure|Quantité réelle|Qantité facturée|H.T.|T.T.C.
Appel vers un portable|06110XXXXX|14/06 - 09h32|00h00mn23s|00h00mn23s|gratuit|gratuit
Appel vers un portable|06889XXXXX|14/06 - 10h39|00h01mn16s|00h01mn16s|gratuit|gratuit
Appel vers un portable|06110XXXXX|18/06 - 07h24|00h00mn50s|00h00mn50s|gratuit|gratuit
Appel vers un portable|06889XXXXX|20/06 - 09h32|00h00mn23s|00h00mn23s|gratuit|gratuit
Appel vers un portable|06889XXXXX|20/06 - 10h44|00h01mn27s|00h01mn27s|gratuit|gratuit
Appel vers un portable|06110XXXXX|25/06 - 21h09|00h00mn22s|00h0n0mn22s|gratuit|gratuit
Appel vers un portable|06267XXXXX|29/06 - 11h25|00h00mn27s|00h00mn27s|gratuit|gratuit
Appel vers un portable|06889XXXXX|02/07 - 13h39|00h02mn37s|00h02mn37s|gratuit|gratuit
Appel vers un portable|06889XXXXX|02/07 - 18h17|00h06mn55s|00h06mn55s|gratuit|gratuit
Appel vers un portable|06110XXXXX|05/07 - 19h29|00h00mn15s|00h00mn15s|gratuit|gratuit</text> 
```

XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:variable name="lines">
            <xsl:call-template name="tokenize">
                <xsl:with-param name="string">
                    <xsl:value-of select="."/>
                </xsl:with-param>
                <xsl:with-param name="token">
                    <xsl:value-of select="'&#10;'"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:variable>
        <table>
            <xsl:for-each select="$lines/match">
                <xsl:variable name="cells">
                    <xsl:call-template name="tokenize">
                        <xsl:with-param name="string">
                            <xsl:value-of select="."/>
                        </xsl:with-param>
                        <xsl:with-param name="token">
                            <xsl:value-of select="'|'"/>
                        </xsl:with-param>
                    </xsl:call-template>
                </xsl:variable>
                <tr>
                    <xsl:for-each select="$cells/match">
                        <td><xsl:value-of select="."/></td>
                    </xsl:for-each>
                </tr>
            </xsl:for-each>
        </table>
    </xsl:template>
    <!--
        Tokenize with a string and token allows us to split up string on a given token and return a node-set of all of the separate components in <match> tags.
        Taken from: http://stackoverflow.com/a/141022/764357
        Then modified to use a generic split token.
    -->
    <xsl:template name="tokenize">
        <xsl:param name="string"/>
        <xsl:param name="token" select="','"/>
        <xsl:param name="count" select="0"/>
        <xsl:variable name="first_elem" select="substring-before(concat($string,$token), $token)"/>
        <!-- Make sure at least one token at the end exists -->
        <xsl:variable name="remaining" select="substring-after($string, $token)"/>
        <match>
            <xsl:value-of select="$first_elem"/>
        </match>
        <!--
            We check that the remaining list is not just a single token, if it is then the recursive base case has been identified.
        -->
        <xsl:if test="$remaining and $remaining != $token">
            <xsl:call-template name="tokenize">
                <xsl:with-param name="string" select="$remaining"/>
                <xsl:with-param name="token" select="$token"/>
                <xsl:with-param name="count" select="$count + 1"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

和输出：

```
<table>
    <tr>
        <td>Détail</td>
        <td>Numéro appelé</td>
        <td>Date et heure</td>
        <td>Quantité réelle</td>
        <td>Qantité facturée</td>
        <td>H.T.</td>
        <td>T.T.C.</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06110XXXXX</td>
        <td>14/06 - 09h32</td>
        <td>00h00mn23s</td>
        <td>00h00mn23s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06889XXXXX</td>
        <td>14/06 - 10h39</td>
        <td>00h01mn16s</td>
        <td>00h01mn16s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06110XXXXX</td>
        <td>18/06 - 07h24</td>
        <td>00h00mn50s</td>
        <td>00h00mn50s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06889XXXXX</td>
        <td>20/06 - 09h32</td>
        <td>00h00mn23s</td>
        <td>00h00mn23s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06889XXXXX</td>
        <td>20/06 - 10h44</td>
        <td>00h01mn27s</td>
        <td>00h01mn27s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06110XXXXX</td>
        <td>25/06 - 21h09</td>
        <td>00h00mn22s</td>
        <td>00h0n0mn22s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06267XXXXX</td>
        <td>29/06 - 11h25</td>
        <td>00h00mn27s</td>
        <td>00h00mn27s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06889XXXXX</td>
        <td>02/07 - 13h39</td>
        <td>00h02mn37s</td>
        <td>00h02mn37s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06889XXXXX</td>
        <td>02/07 - 18h17</td>
        <td>00h06mn55s</td>
        <td>00h06mn55s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
    <tr>
        <td>Appel vers un portable</td>
        <td>06110XXXXX</td>
        <td>05/07 - 19h29</td>
        <td>00h00mn15s</td>
        <td>00h00mn15s</td>
        <td>gratuit</td>
        <td>gratuit</td>
    </tr>
</table> 
```

# url - 加密 Get-Parameter(URL) Tomcat/Servlet

> ID：12808169
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:46:32.700
> 
> 标签：url, servlets, encryption, get

当我在 Tomcat 上使用 JavaServlets 时，是否有可能加密或不显示 Internetbrowser 中的获取参数？

这意味着例如：localhost/main?id=3 应该像这样显示：localhost/main 或 localhost/main?6puu4YjzScxHsv9t....

有没有简单快速的解决方案？这有意义吗？

谢谢你的提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:52:13.087

您可以在 HTML 表单上使用 POST 而不是 GET。这将`localhost/main?id=3`变成`localhost/main`. 该参数`id`仍将被传递，您应该能够在服务器端以相同的方式检索其值。

# java - 基于当前位置的地理编码结果

> ID：12808179
> 
> 赞同：0
> 
> 时间：2012-10-09T20:47:03.863
> 
> 标签：java, android, google-maps, gps

在我的一项活动中，我需要能够进行地理编码（通过地址字符串搜索查找位置）。问题是我的结果太宽泛了。当我搜索“麦当劳”时，我会得到美国不同地区的结果。我怎样才能使用户可以搜索附近的餐馆（或任何位置）并且结果将在一定距离内？我的应用程序基本上需要更精确的结果。这是正在发生的事情的屏幕截图：![在此处输入图像描述](../Images/c63df2325cf8be7318eeec8f5213ea5c.png)

```
public class MainActivity extends MapActivity {
HelloItemizedOverlay itemizedOverlay;
List<Overlay> mapOverlays;
Drawable drawable;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView myMap = (MapView) findViewById(R.id.mapview);
    myMap.setBuiltInZoomControls(true);

    MapController mc = myMap.getController();

    mapOverlays = myMap.getOverlays();
    drawable = this.getResources().getDrawable(R.drawable.androidmarker);
    itemizedOverlay = new HelloItemizedOverlay(drawable, this);

    //geopoints are cordinates in microdegrees or degrees * E6
    GeoPoint point = new GeoPoint(34730300, -86586100);
    //GeoPoint point2 = locatePlace("texas", mc); //HelloItemizedOverlay.locatePlace("Texas", mc, myMap);

    //overlayitems are items that show the point of location to the user
    OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "im in huntsville");
    //OverlayItem overlayitem2 = new OverlayItem(point2, "Texas", "hi");

    //itemizedoverlay is used here to add a drawable to each of the points
    itemizedOverlay.addOverlay(overlayitem);
    //itemizedOverlay.addOverlay(overlayitem2);

    //this adds the drawable to the map

    //this method converts the search address to locations on the map and then finds however many you wish to see.
    locatePlace("mcdonalds", mc, 5);
    mapOverlays.add(itemizedOverlay);

    //this animates to the point desired (i plan on having "point" = current location of the user)
    mc.animateTo(point);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed(){
    return false;
}

public void locatePlace(String locName, MapController mc, int numberToDisplay)
{   // code to make the google search via string work

    // i use the Geocoder class is used to handle geocoding and reverse-geocoding. So make an instance of this class to work with the methods included
    Geocoder geoCoder1 = new Geocoder(this, Locale.getDefault());
    try {
        List<Address> searchAddresses = geoCoder1.getFromLocationName(locName, numberToDisplay);  // gets a max of 5 locations
        if (searchAddresses.size() > 0)
            {
            //iterate through using an iterator loop (for loop would have been fine too)
            //Iterator<Address> iterator1 = searchAddresses.iterator();
            for (int i=0; i < searchAddresses.size(); i++){
            //while (iterator1.hasNext()){
                //step1 get a geopoint
                GeoPoint tempGeoP = new GeoPoint( (int) (searchAddresses.get(i).getLatitude()*1E6), (int) (searchAddresses.get(i).getLongitude()*1E6) );
                //step2 add the geopoint to the Overlay item 
                OverlayItem tempOverlayItm = new OverlayItem(tempGeoP, locName, "this is " + locName);
                //step3 add the overlay item to the itemized overlay
                HelloItemizedOverlay tempItemizedOverlay = new HelloItemizedOverlay(drawable, this);  // its breakking here.........
                tempItemizedOverlay.addOverlay(tempOverlayItm);
                //the itemized overlay is added to the map Overlay
                mapOverlays.add(tempItemizedOverlay);
            }

            }
        } catch (IOException e)
        {
            e.printStackTrace();
            // Log.e("the error", "something went wrong: "+ e);
        }//finally   {}
    }
} 
```

// 这里是 Itemized 覆盖类的重要代码

```
public HelloItemizedOverlay(Drawable defaultMarker, Context context)
    {
        super(boundCenter(defaultMarker));
        myContext = context;
    }

    public void addOverlay(OverlayItem overlay){
        mOverlays.add(overlay);
        populate();
    } 
```

谢谢，亚当

以下是根据 Vishwa 的评论调整后的一些代码：

```
 // these 2 variables are my current location
    latitudeCurrent  = 34730300;   // make this dynamic later
    longitudeCurrent = -86586100;  // make this dynamic later

LLlatitude  = (latitudeCurrent - 100000)/(1E6); //lowerleft latitude = original lat - (1)*degree/10
LLlongitude = (longitudeCurrent+ 100000)/(1E6);//lowerleft longitude = original longitude - (1)*degree/10
URlatitude  = (latitudeCurrent + 100000)/(1E6); //upperright latitude = original + (1)*degree/10
URlongitude = (longitudeCurrent+ 100000)/(1E6); //upperright longitude = original longitude + (1)*degree/10

        try {
            List<Address> searchAddresses = geoCoder1.getFromLocationName(locName, numberToDisplay, LLlatitude, LLlongitude, URlatitude, URlongitude); 
```

![从 getfromlocationname() 创建一个允许结果的平方后](../Images/8b784143a8d0247a4c0be4328fd2948c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:59:36.540

这是您需要做的：

1.) 使用 GPS 获取用户的当前位置，这是[一个可以帮助您做到这一点的答案。](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

2.) 接下来，确定您希望在什么半径范围内显示您的结果，即您是否需要在用户位置 2 英里范围内或 5 英里等范围内的结果。

3.) 弄清楚这（参考第 2 点）在纬度和经度值方面的含义，所以基本上你必须定义一个具有 lowerLeftLatitude、lowerLeftLongitude、lowerRightLatitude、lowerRightLongitude 的边界框。这些计算可以通过计算一个经度转换成英里的多少来完成（同样，这个计算可能是近似的，因为经度之间的距离会因经度的工作方式而变化（阅读此：[http://en.wikipedia.org/wiki/Longitude](http://en.wikipedia.org/wiki/Longitude)如果您希望根据每个人的位置进行调整）

4.) 使用以下方法（它是 getFromLocationName 的变体）而不是使用您现在使用的版本：http: [//developer.android.com/reference/android/location/Geocoder.html#getFromLocationName(java. lang.String](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName(java.lang.String) , int, double, double, double, double)。阅读此方法的工作原理，基本上除了名称（即麦当劳）之外，您现在还将指定边界框值。所以现在，您将获得更多特定于用户位置的结果。

让我知道进展如何/如果您需要更多帮助

下面是从 Places API 获取 JSON 响应的代码： 再次**不要**忘记将“AddYourOwnKeyHere”替换为您的 Places API 密钥

```
try
{
HttpPost httppost = new HttpPost("https://maps.googleapis.com/maps/api/place/search/json?location=34.730300,-86.586100&radius=19308&types=food&name=mcdonalds&sensor=false&key=AddYourOwnKeyHere");
HttpClient httpclient = new DefaultHttpClient();
response = httpclient.execute(httppost);
String data = EntityUtils.toString(response.getEntity());
JSONObject json = new JSONObject(data);
//Parse the JSONObject now
} catch (Exception e) {
e.printStackTrace();
} 
```

# python - 扭曲的单元测试通过鼻子运行？

> ID：12808184
> 
> 赞同：1
> 
> 时间：2012-10-09T20:47:32.023
> 
> 标签：python, twisted, nose, nosetests

我们的 Python 代码库使用nose 来运行所有单元测试，我正在尝试使用nose.twistedtools 来让所有测试运行，但它们都在关机时挂起。任何帮助解决这个问题都会很棒。这是一个挂起的简单测试：

```
from nose.twistedtools import deferred
from twisted.internet.defer import Deferred

@deferred(timeout=1)
def test_rudimentary():
    def done(_ignored):
        print "DONE"

    defer = Deferred()
    defer.addCallback(done)
    return defer 
```

调用和输出如下所示：

```
$ nosetests test_simple.py 
F
======================================================================
FAIL: test_simple.test_rudimentary
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/<ENV>/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/<ENV>/lib/python2.7/site-packages/nose/twistedtools.py", line 165, in wrapper
    % timeout)
TimeExpired: timeout expired before end of test (1.000000 s.)

----------------------------------------------------------------------
Ran 1 test in 1.001s

FAILED (failures=1) 
```

如果我不设置超时，测试将永远挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:02:18.207

您的代码负责调用 defer.callback/errback（很可能是间接调用）。尝试：

```
reactor.callLater(0.1, defer.callback)
return defer 
```

# c++ - C++11 线程实现后端

> ID：12808188
> 
> 赞同：0
> 
> 时间：2012-10-09T20:47:46.307
> 
> 标签：c++, multithreading, c++11, pthreads

> **可能重复：**
> [在 g++ 中，C++ 11 线程模型在后台使用 pthreads 吗？](https://stackoverflow.com/questions/11784153/in-g-is-c-11-thread-model-using-pthreads-in-the-background)

我从某个地方读到了在 Linux 系统`OpenMP`中使用的实现`PThreads`，尽管它们对我来说似乎完全不同。`C++11`考虑到线程之间的（相对）相似性，`PThreads`我想知道，

**有谁知道线程是否`C++11`使用`PThreads`or 中的任何其他多线程库实现`gcc`？`clang`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:12:30.827

C++ 2011 多线程有多个部分：

1.  更高级别的抽象，如`std::thread`、`std::mutex`、`std::condition_variable`等。这些抽象是根据 libc++（clang 的本机库）和 libstdc++（gcc 的本机库）的 pthread 实现的。libstdc++ 使用间接（`gthr.h`），它可用于，例如，为单线程实现存根。从不同同步类的来源来看，这一点非常明显。
2.  pthreads 不提供较低级别的同步工具，即原子和各种内存可见性控制。似乎 gcc 和 clang 都使用编译器内置函数来实现这些，这可能会创建合适的指令。但是，我还没有找到其中任何一个的实际代码。
3.  在库中实现东西是不够的：需要防止编译器跨同步原语重新排序指令，并且需要使值在适当的位置可见。

# mysql - 将列值设置为 SQL 查询结果中的列名

> ID：12808189
> 
> 赞同：17
> 
> 时间：2012-10-09T20:47:59.573
> 
> 标签：mysql, sql, pivot

我想读取一个表，它的值将是 sql 查询结果的列名。例如，我有 table1 作为 ..

```
id    col1     col2
----------------------
0      name    ax
0      name2   bx
0      name3   cx
1      name    dx
1      name2   ex
1      name3   fx 
```

如果您看到 id = 0，name 的值为 ax，name2 为 bx，name3 为 cx。与其将其显示为行，不如将列显示为 id、name、name2、name3。现在我希望查询的结果如下所示：

```
id   name    name2     name3
0    ax      bx         cx
1    dx      ex         fx 
```

有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-09T20:50:51.110

这是通过*数据透视表*完成的。按 分组，您为要在列中捕获的每个值`id`发出语句，并使用聚合之类的东西来消除空值并折叠成一行。`CASE``MAX()`

```
SELECT
  id,
  /* if col1 matches the name string of this CASE, return col2, otherwise return NULL */
  /* Then, the outer MAX() aggregate will eliminate all NULLs and collapse it down to one row per id */
  MAX(CASE WHEN (col1 = 'name') THEN col2 ELSE NULL END) AS name,
  MAX(CASE WHEN (col1 = 'name2') THEN col2 ELSE NULL END) AS name2,
  MAX(CASE WHEN (col1 = 'name3') THEN col2 ELSE NULL END) AS name3
FROM
  yourtable
GROUP BY id
ORDER BY id 
```

### [这是一个工作示例](http://sqlfiddle.com/#!2/e3a09/2)

注意：这仅适用于有限且已知数量的可能值`col1`。如果可能值的数量未知，则需要在循环中动态构建 SQL 语句。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T20:54:06.013

您尝试做的是`PIVOT`MySQL 没有`PIVOT`函数，因此您可以使用 a`CASE`和聚合函数来复制它。

如果您有已知数量的列，则可以使用静态版本并对值进行硬编码。与此类似（参见[SQL Fiddle with demo](http://sqlfiddle.com/#!2/f1e85/1)）：

```
select id,
  max(case when col1='name' then col2 end) name,
  max(case when col1='name2' then col2 end) name2,
  max(case when col1='name3' then col2 end) name3
from yourtable
group by id 
```

但是，如果您有未知数量的列，那么您可以使用准备好的语句并动态创建它：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when col1 = ''',
      col1,
      ''' then col2 end) AS ',
      col1
    )
  ) INTO @sql
FROM yourtable;

SET @sql = CONCAT('SELECT id, ', @sql, ' 
                  FROM yourtable 
                  GROUP BY id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e9584f/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T17:22:46.223

```
select id,
    max(if(tablename.columnname = 'name',tablename.columnname,null)) as namealise,
    max(if(tablename.columnname = 'name1',tablename.columnname,null)) as namealise1 
from table1, table2 
where table1.id = table2.id 
group by table1.id 
order by table1.id 
```

# c# - Network Stream.Read 后代码挂起

> ID：12808191
> 
> 赞同：0
> 
> 时间：2012-10-09T20:48:08.240
> 
> 标签：c#, asp.net, xml

我正在尝试通过我的代码连接到打印机，然后在打印机上应用安全设置。在应用安全功能之前，它会在以下代码模块中检查密码。代码在行后挂起

流.Flush()

```
if (responseStr.IndexOf(PrinterSecurityConstants.NewPrinterPass) > 0)
{
    LogUtility.Info(PrinterSecurityConstants.ValidateUserNamePassword);

    data = System.Text.Encoding.ASCII.GetBytes(
        ConfigurationManager.AppSettings[PrinterSecurityConstants.CurrentPass]
        .ToLower() + CommonConstant.Carriagereturn);
    stream.Write(data, 0, data.Length);
    stream.Flush();
    bytes = stream.Read(dataResponse, 0, dataResponse.Length);
    responseStr = System.Text.Encoding.ASCII.GetString(dataResponse, 0, bytes);
} 
```

我需要做什么才能使此代码有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:58:57.343

Stream.Read() 阻塞，直到有字节可供读取。如果您不想这样做，则需要更改读取模式。

# windows-7 - Photoshop javascript 保存错误 8800

> ID：12808193
> 
> 赞同：1
> 
> 时间：2012-10-09T20:48:09.750
> 
> 标签：windows-7, save, photoshop-script, jsx

在我的 javascript 中，在 Windows 7、Photoshop CS2 和 Photoshop CS5 中，它会引发错误：

> 错误 8800：出现一般 Photoshop 错误。此功能在此版本的 Photoshop 中可能不可用。
> - 无法将副本另存为“C:...\wcb-010B-11Y.jpg”，因为找不到文件。
> 行：458
> -> docRef.saveAs(saveFile, jpgSaveOptions, true, Extension.LOWERCASE);

这是保存图像的代码摘要：

```
var selectedSaveDir = "~/Desktop/";
var sFileNamePreFix = "wcb-";
var docRef = app.activeDocument; 
var docName = app.activeDocument.name;
var docNewName = docName.substr( 0, docName.length - 4 );  // strip file extension
var sNewDocName = sFileNamePreFix + docNewName + ".jpg"
var sNewFileName = selectedSaveDir + sNewDocName;
//alert( "sNewFileName = " + sNewFileName );     // test to verify correct location
var saveFile = new File(sNewFileName);
jpgSaveOptions = new JPEGSaveOptions();
jpgSaveOptions.quality = 12;
docRef.saveAs(saveFile, jpgSaveOptions, true, Extension.LOWERCASE); 
```

在 Windows XP 中，此脚本在 CS2 中运行良好，没有任何问题....只是在 Windows 7 中，使用 CS2 或 CS5 会出现此问题。

问题似乎类似于：[Photoshop Javascript 脚本保存和关闭文档](https://stackoverflow.com/questions/10795983/photoshop-javascript-scripting-saving-and-closing-document) 但我不知道他的操作系统。

我添加了“alert（”并确认保存文件夹和名称正确，可以保存到，但同样的问题。

这可能是 Windows 7 中的 UAC 问题吗？你如何修复它？我已经关闭了所有 UAC 设置（我认为我做得正确），但它仍然会发生。

任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:56:41.623

你错过了“var docRef = app.activeDocument;” （我已经添加了）；但除此之外，在 CS2 中，脚本将 jpeg 保存到桌面（wcb-text test.jpg）。这很明显，但是您是否确保图像已展平或不包含任何无法存储在 jpeg 中的信息 - 例如路径。

在保存之前尝试强制展平

```
//flatten the image
docRef.flatten(); 
```

要尝试的另一件事是将文件保存到另一个目录。我知道长文件名（尤其是其中的空格）可能会导致问题 - 我认为文件路径中的字符数限制为 300 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T09:11:04.183

我刚刚发现，在新版本的 PS 中，这个特定的路径变量给出了错误 8800：

```
var selectedSaveDir = "~/Desktop/"; 
```

改用完整路径并使用撇号代替引号：

```
var selectedSaveDir = 'C:/Users/yourname/Desktop/'; 
```

# java - CountDownTimer - 用户递增。问题

> ID：12808201
> 
> 赞同：3
> 
> 时间：2012-10-09T20:48:33.573
> 
> 标签：java, android, timer, increment, countdowntimer

我有一个关于 CountDownTimer 的问题。我必须制作一个应用程序，允许用户在每次单击按钮时将时间时间增加 +1。然后在按钮停止单击后等待三秒钟，然后开始倒计时。

我在下面粘贴了我的代码。

我的问题是：我似乎无法使数字的递增正常工作，但是似乎在我停止递增数字（onStop（））之后，它直接转到（onFinish（））。而不是去 OnTick() 并每秒将数字减少 1。我尝试了很多方法来解决这个问题，但都被卡住了。

谁能带领我朝着正确的方向前进？任何帮助，将不胜感激。感谢你们！

```
 @SuppressWarnings("unused")
    public class MainActivity extends Activity {
        public int countdown;
        Button stoptime;
        public TextView timedisplay;
        public Timer wavetimer;
        private long millisInFuture;
        private long countDownInterval;
        private long onclicktime;
        private long finished;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

        countdown = 01;
        stoptime = (Button) findViewById(R.id.button2);
        stoptime.setText("Stop Timer");

        timedisplay = (TextView) findViewById(R.id.mycounter);
        timedisplay.setText("0");
        wavetimer = new Timer (millisInFuture, 1000);
        finished = 0;
        stoptime.setOnClickListener(new OnClickListener(){

        public void onClick(View arg0) {
            wavetimer.onStop();
            //try{
            //  Thread.sleep(3000);
            //  wavetimer.start();

            //} catch (InterruptedException e) {

            //  e.printStackTrace();
        //  }

            //wavetimer.onTick(millisInFuture);
        }   

       });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class Timer extends CountDownTimer  {
    public long millisInFuture;
    private long countDownInterval = 1000;
    private long currentelapsed;
    private long methodlimit;
    private long lapsedperiod;

    public Timer(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    public void onFinish() {
        if (millisInFuture == 0){
        timedisplay.setText("Countdown Finished");
        } else {
            timedisplay.setText("error");

        }
    }

    public void onStop() {
        wavetimer.cancel();
        millisInFuture = millisInFuture + 1;
        timedisplay.setText("Time Left: " + millisInFuture);

    }

    public void onTick(long millisUntilFinished) {
            millisInFuture = (millisInFuture - 1);
            timedisplay.setText("Time Left: " + millisInFuture / 1000);

        }

    } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:55:53.957

将此添加到您的代码中；

```
wavetimer.start(); 
```

:)

# eclipse - JBOSS 7.1：添加 Primefaces 支持会阻止部署

> ID：12808206
> 
> 赞同：0
> 
> 时间：2012-10-09T20:48:58.357
> 
> 标签：eclipse, primefaces, jboss7.x

当我将 PrimeFaces jar 添加到 Eclipse 中的典型动态 Web 项目时，我收到以下错误：

```
15:44:40,338 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) JBAS015003: Found FileUploadTest.war in deployment directory. To trigger deployment create a file called FileUploadTest.war.dodeploy
15:44:40,338 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "FileUploadTest.war"
15:44:40,339 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."FileUploadTest.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."FileUploadTest.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "FileUploadTest.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_35]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_35]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011093: Could not load component class org.primefaces.webapp.filter.FileUploadFilter
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:113)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:54)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.primefaces.webapp.filter.FileUploadFilter from [Module "deployment.FileUploadTest.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:111)
    ... 7 more

15:44:40,386 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "FileUploadTest.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"FileUploadTest.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"FileUploadTest.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"FileUploadTest.war\""}}
15:44:40,402 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."FileUploadTest.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."FileUploadTest.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "FileUploadTest.war"

15:44:40,402 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"FileUploadTest.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"FileUploadTest.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"FileUploadTest.war\""}}}}
15:44:40,417 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877: Stopped deployment FileUploadTest.war in 9ms 
```

我已经添加`commons-fileupload-1.2.1.jar`以及`commons-io-1.4.jar`. 不知道可能是什么问题。我还提到了[在 JBoss 7.1.0 上部署 Primefaces 应用程序时出错，](https://stackoverflow.com/questions/10020447/error-deploying-primefaces-application-on-jboss-7-1-0)并尝试将“context-param”值添加到 web.xml 但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:44:21.597

我弄清楚我做错了什么。我正在添加 JAR 文件（primefaces、commons-fileupload-1.2.1 和 commons-io-1.4）

`Right click project->Build Path->Configure Build Path->Java Build Path`并在那里添加 JAR。

我需要添加它们`...->Configure Build Path->Deployment Assembly`。

我想我需要学习如何使用 Eclipse :)

# java - 树的级别顺序遍历

> ID：12808215
> 
> 赞同：0
> 
> 时间：2012-10-09T20:49:39.873
> 
> 标签：java, algorithm, generics, tree, tree-traversal

为了对通用树进行级别顺序（BFS）遍历，我为下面链接中提到的代码编写了以下显示函数。问题是每个级别都打印了两次。谁能告诉我为什么。如果有人需要整个实现，可以在下面的链接中找到没有此功能的原始代码，否则只需查看下面的 displayBFS 函数并告诉我为什么值重复

[java中通用树（n-ary树）的级别顺序遍历](https://stackoverflow.com/questions/12788641/level-order-traversal-of-a-generic-treen-ary-tree-in-java)

谢谢！

```
void displayBFS(NaryTreeNode n)
{
    Queue<NaryTreeNode> q  = new LinkedList<NaryTreeNode>();

    if(n!=null)
    {
        q.add(n);
        System.out.println(n.data);
    }

    while(n!=null)
    {
        for(NaryTreeNode x:n.nary_list)
        {
            q.add(x);
            System.out.println(x.data );
        }        
        n =  q.poll();
    }  
} 
```

当前树结构供参考：

```
 root(100)
    /      |       \
  90       50       70
  /        \
20 30   200  300 
```

输出：100 90 50 70 90 50 70 20 30 200 300 20 30
200
300

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:05:40.803

问题是你处理你的根节点两次：你最初将它添加到你的队列中（在行中`q.add(n)`），然后在你第一次到达*之前*`n = q.poll()`处理它，然后你把它从队列中取出并再次处理它。

其他一切都是正确的，这就是为什么您只能获得每个非根节点的两个副本：加倍仅在根节点发生一次。

要解决此问题，请删除该行`q.add(n)`（因为无论如何您都会处理根节点，即使没有它），或者更改此：

```
 while(n!=null)
    {
        ...
        n =  q.poll();
    } 
```

对此：

```
 while((n = q.poll()) != null)
    {
        ...
    } 
```

这样您就不会处理初始额外时间的根节点。

# jquery - 如何使用 jQuery 使我的 div 的所有 4 个角都具有可调整大小的句柄？

> ID：12808217
> 
> 赞同：12
> 
> 时间：2012-10-09T20:49:45.117
> 
> 标签：jquery, jquery-ui, resizable, jquery-ui-resizable, jquery-resizable

我正在尝试附加一个 div onClick，它既可拖动又可调整大小，并带有用于调整该 div 在所有 4 个角的大小的句柄。

我已经能够使 div 可拖动并添加句柄......但是......只有 div 的底部，右侧和右下角实际工作......顶部和其他角在悬停时显示箭头...但不会调整 div 的大小！？！？！

```
<script>

$(document).ready(function() {

    //onClick append a resizable & draggable div with handles on all 4 corners
    $('#mega_wrap').click(function(e){

        //Define element css and positioning then add both draggable and resizable from jQuery UI
        var ele = $("<div>");
            ele.css({width:"100px", height:"100px", border:"3px dashed white", position:"absolute", left: e.pageX - 50, top: e.pageY -50});
            ele.draggable();
            ele.resizable();

        //Define elements handles and append them to the new div
        var eleHandleNE = $("<div class='ui-resizable-handle ui-resizable-ne' id='negrip'>");
        var eleHandleSE = $("<div class='ui-resizable-handle ui-resizable-se' id='segrip'>");
        var eleHandleSW = $("<div class='ui-resizable-handle ui-resizable-sw' id='swgrip'>");
        var eleHandleNW = $("<div class='ui-resizable-handle ui-resizable-nw' id='nwgrip'>");

            eleHandleNE.appendTo(ele);
            eleHandleSE.appendTo(ele);
            eleHandleSW.appendTo(ele);
            eleHandleNW.appendTo(ele);

        //Append new div to the container div called mega_wrap
        $("#mega_wrap").append(ele);

   }); 
});

</script>

<div id="mega_wrap">
    <form class="form-wrapper cf">
            <input type="text" placeholder="Looking for inspiration..." required>
            <button type="submit">Search</button>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-09T20:58:35.930

这是放置手柄的方法。无需`handles`显式附加。

```
 ele.resizable({
       handles: 'n, e, s, w'
    }); 
```

请参阅[jQuery 可调整大小的句柄](http://api.jqueryui.com/resizable/#option-handles)

# mysql - dyld：库未加载：libmysql.16.dylib (MAC)

> ID：12808225
> 
> 赞同：1
> 
> 时间：2012-10-09T20:50:30.440
> 
> 标签：mysql, c, macos, gcc, makefile

我今天开始试验 MySQL C API，我今天在我的 10.6.8 macbook 上从源代码编译它，并推出了一个快速的 makefile + 应用程序框架。不过，我觉得有点生疏，因为我似乎无法让它正确链接（现在看来是固定的）或动态加载库（问题如下所述）。

我收到的确切错误如下：

```
$ make clean && make
gcc -L/usr/local/mysql/lib -I/usr/local/mysql/include -lmysql -lpthread -ggdb -Wall -o adapter main.c adapter.c 

$ ./adapter
dyld: Library not loaded: libmysql.16.dylib
  Referenced from: /tmp/./adapter
  Reason: image not found
Trace/BPT trap 
```

我环顾四周，出现了很多关于 an 的结果`install_name_tool`。但是，在阅读了其中的一些之后，我仍然不完全了解这实际上是做什么的。有很多关于框架的讨论，这并不真正适合我参与这样一个简单项目的期望。

无论如何，这是我的代码（包括makefile）。

**主.c**：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "adapter.h"

int main (int argc, char *argv[]) {
    printf("Version: %s\n", get_version());
    return 0;
} 
```

**适配器.c**：

```
#include <mysql.h>

char *get_version () {
    return (char *)mysql_get_client_info();
} 
```

**适配器.h**：

```
char *get_version (); 
```

**生成文件**：

```
CC = gcc
MYSQL_FLAGS = -L/usr/local/mysql/lib -I/usr/local/mysql/include -lmysql -lpthread
CFLAGS = -ggdb -Wall
OBJS = 

adapter: $(OBJS)
    $(CC) $(MYSQL_FLAGS) $(CFLAGS) -o adapter main.c adapter.c $(OBJS)

clean:
    @rm -f *~ *.o adapter
    @rm -rf *.dSYM 
```

而且，附带说明，这些文件确实存在：

```
$ ls /usr/local/mysql/lib
libmysql.16.0.0.dylib   libmysql.dylib      libmysqlclient.dylib
libmysql.16.dylib       libmysqlclient.a    libmysqlclient_r.dylib

$ ls /usr/local/mysql/include
atomic          my_atomic.h     my_md5.h        myisampack.h        sslopt-case.h
base64.h        my_attribute.h  my_net.h        mysql.h             sslopt-longopts.h
config-win.h    my_base.h       my_no_pthread.h mysql_com.h         sslopt-vars.h
decimal.h       my_bit.h        my_nosys.h      mysql_time.h        t_ctype.h
errmsg.h        my_bitmap.h     my_pthread.h    mysql_version.h     thr_alarm.h
hash.h          my_charsets.h   my_stacktrace.h mysqld_error.h      thr_lock.h
keycache.h      my_config.h     my_sys.h        mysys               typelib.h
lf.h            my_dbug.h       my_time.h       mysys_err.h         violite.h
m_ctype.h       my_dir.h        my_tree.h       queues.h            waiting_threads.h
m_string.h      my_getopt.h     my_trie.h       service_versions.h  wqueue.h
my_aes.h        my_global.h     my_uctype.h     sha1.h
my_alarm.h      my_libwrap.h    my_vle.h        sha2.h
my_alloc.h      my_list.h       my_xml.h        sql_common.h 
```

我有一种直觉，我的 Makefile 有问题，或者这是 Mac OS X 特有的问题，但实际上，我真的不确定问题是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:57:21.367

这是一个[动态链接器](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html)错误，与源代码无关。有很多方法可以修复它。最简单的也许是`/usr/local/mysql/lib`在`DYLD_LIBRARY_PATH`运行之前添加`adapter`。例如：

```
$ export DYLD_LIBRARY_PATH="${DYLD_LIBRARY_PATH}:/usr/local/mysql/lib"
$ ./adapter 
```

# nginx - 提供静态文件时，nginx 可以屏蔽 URI 吗？

> ID：12808229
> 
> 赞同：0
> 
> 时间：2012-10-09T20:50:49.883
> 
> 标签：nginx

这在 Nginx 中是否可行：

当用户查询时`www.example.com/a/b/c`，nginx返回一个映射到的静态文件`/home/www/example/a/b/c.html`？

如果是这样，我应该如何构建 nginx 配置的位置部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:23:25.943

这是很有可能的，例如：

```
server {
  root /home/www/example;

  location  / {
    try_files $uri.html $uri $uri/;
  } 
} 
```

这将为每个请求检查是否：

1.  如果您添加 .html，则会有一个匹配的文件
2.  if not 检查是否有完全匹配的文件名
3.  如果不检查是否存在具有该名称的目录（在这种情况下，将根据配置的其余部分返回索引、自动索引或错误）

# java - 如何从 NetBeans_RPC 下的客户端连接到 Spring.httpInvoker 下的服务器端？

> ID：12808232
> 
> 赞同：0
> 
> 时间：2012-10-09T20:50:53.520
> 
> 标签：java, eclipse, spring, netbeans-platform

如何从 NetBeans_RPC 下的客户端连接到 Spring.httpInvoker 下的服务器端？

在我的开发中我使用 Eclipse，我可以在 Eclipse 下使用 NetBeans_Platform 吗？也许一些插件？

否则，我可以从 NetBeans_IDE 使用 Spring 吗？NetBeans_IDE 是否支持 Maven？最重要的是，在这种情况下，什么样的_best_practics_&_true_java-way？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:59:48.863

我正在使用 NetBeans wsdl-scaffold，创建所需的一切非常容易

# javascript - Facebook 服务器没有响应我们网站上的社交按钮

> ID：12808233
> 
> 赞同：3
> 
> 时间：2012-10-09T20:51:02.057
> 
> 标签：javascript, facebook, social

这就是问题所在：该应用程序的目的是通过 Facebook 和 Twitter 提供的插件在社交网络上分享新闻内容。Twitter 按钮工作正常，但 Facebook 社交网络按钮不起作用。

这是链接：[http ://usa.theground.fr/#4.70/39.341/-97.679](http://usa.theground.fr/#4.70/39.341/-97.679)

我们发现脚本正在启动，但 Facebook 服务器最后没有收到任何内容。

有任何想法吗？

# asp.net - 跨浏览器 css

> ID：12808234
> 
> 赞同：2
> 
> 时间：2012-10-09T20:51:04.663
> 
> 标签：asp.net, css, browser, cross-browser

```
<asp:ImageButton ID="Bt_1" runat="server" CausesValidation="false" CssClass="clr_bt" />
.clr_bt
{
    -webkit-transform: rotate(-50deg);
    -webkit-transition: -webkit-transform 0.5s ease-in;
} 
```

有人可以帮我为 Opera、IE、Mozilla 修复它。

暂时只适用于 Chrome。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:55:02.093

您必须将浏览器的供应商前缀添加到您的 css 中，如下所示：

```
.clr_bt {
    -webkit-transform: rotate(-50deg);
    -moz-transform: rotate(-50deg);
    -ms-transform: rotate(-50deg);
    -o-transform: rotate(-50deg);
    transform: rotate(-50deg);

    -webkit-transition: 0 .5s ease-in;
    -moz-transition: 0 .5s ease-in;
    -o-transition: 0 .5s ease-in;
    transition: transform .5s ease-in;
} 
```

1.  为`Chrome`and添加了 webkit 前缀`Safari`
2.  moz 前缀被添加为`Firefox`
3.  为 ms 添加前缀`IE`
4.  o 前缀被添加为`Opera`

# wordpress - 使用 MAMP 和 WordPress NIGHTMARE 测试站点的 Dreamweaver CS6 站点设置

> ID：12808235
> 
> 赞同：0
> 
> 时间：2012-10-09T20:51:05.517
> 
> 标签：wordpress, wordpress-theming, dreamweaver

我一直在尝试在 Dreamweaver CS6 IDE（我讨厌）上设置一个测试站点服务器来尝试动态相关文件主题功能。几个小时以来，我一直在尝试这样做，并且查看的教程和博客比我记得尝试设置测试站点的更多，以便我可以简单地尝试此功能，但似乎没有任何效果。

**在站点框中，我有：**

> 站点名称：测试站点
> 本地站点文件夹：users/myname/Sites/wordpress/

**在我拥有的服务器上：**

> 服务器名称：Apache
> Connect 使用：本地/网络
> 服务器文件夹：users/myname/Sites/wordpress/
> Web URL：[http://localhost:80/wordpress/](http://localhost:80/wordpress/)
> 高级：
> 服务器型号：PHP MySQL

但是我收到一条错误消息：

> 无法解析动态相关文件，因为此服务器的站点定义不正确

这对我来说毫无意义。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T07:41:30.747

“***我的印象是这个功能会以某种方式将 PHP 语法转换为 HTML，以便可以轻松编辑......*** ”

以上帝的名义，是什么给了你这样的印象？PHP 是服务器端脚本；浏览器与服务器和数据库通信的一种方式，HTML 是浏览器与客户端（您）通信并以人类可用的形式呈现事物的一种方式。没有“转换”，因为它们是两种普遍不同的语言，每种语言都有独特的功能。

为了“轻松编辑”PHP，唯一的解决方案是*学习*PHP 脚本和语法。

MAMP 的唯一目的是在您的本地计算机上安装 Apache 服务器、PHP 和 mySQL，用于服务器端/数据库框架（例如 WordPress）来存储信息并与之通信。本质上就像在您的本地机器上创建一个迷你网络主机，允许您检查基于 PHP 的应用程序的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:13:39.287

这些设置对我有用：

1.  打开 Dreamweaver 站点设置窗口
2.  选择“服务器”
3.  服务器名称：本地主机
4.  连接方式：本地/网络
5.  服务器文件夹：MAMP/ /Applications/MAMP/htdocs/your_directory_name/
6.  网址：`http://localhost:8888/your_directory_folder/`

如需完整说明： http: [//www.adobe.com/devnet/dreamweaver/articles/setup_php.html#articlecontentAdobe_numberedheader_2](http://www.adobe.com/devnet/dreamweaver/articles/setup_php.html#articlecontentAdobe_numberedheader_2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T21:28:44.300

我遇到了同样的问题并找到[了这个线程](http://forums.adobe.com/thread/629061)。解释一下我们想听到的内容的帖子是 David_Powers 于 2010 年 5 月 1 日 05:31 发表的帖子 #6。

因此，要使问题消失，您可以转到“编辑 -> 首选项”并禁用“发现动态相关文件”，同时保持“启用相关文件”处于激活状态。

虽然这修复了错误显示，但我不太明白 David_Powers 说这个功能会做什么以及我是否真的想要它打开。如果有人可以帮助我了解此选项的作用，我将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T20:51:11.517

我不知道这是否相关，但在多次尝试找出 Server not found 错误之后，我在启动页面上偶然发现了 MAMP Preferences。

单击首选项后，我注意到文档根指向用户名/站点而不是 MAMP/htdocs。

[MAMP Preferences > Document Root > 浏览选择](http://i.stack.imgur.com/6X073.png)

在我将 Document Root 文件夹设置为 htdocs 后，当我在分屏模式下单击 Live 按钮时，我终于让 Dreamweaver CS6 显示我的 php 文件。

我搜索的其他答案都没有提到将 MAMP 首选项设置为 Document Root 文件夹。我希望这有帮助。

# php - 验证访问/重定向到使用 Jquery 的 load() 加载的页面

> ID：12808236
> 
> 赞同：0
> 
> 时间：2012-10-09T20:51:21.907
> 
> 标签：php, javascript, jquery, redirect

我想用 Jquery 加载页面的主要部分（使用“加载”方法）：

示例：$("#pageContent").load("pagex.php");

但是，一旦我进入这个文件（pagex.php），我想先在其中进行一些验证（例如：检查用户是否仍然登录到站点。如果它不再登录，将其重定向到外部页面）。

这样做的问题是，当我将其重定向到外部页面时，该页面将加载到“我的站点”中。

我该如何解决这种情况？

我试图保持代码“井井有条”，这就是为什么我用 Jquery 的“加载”加载页面的子内容（不需要再次加载所有页面布局），但我没有成功，因为这个“验证/重定向的东西”）。

有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:16:59.553

您可以从客户端使用重定向，即

```
$("#pageContent").load("pagex.php"); 
```

在您的`pagex.php`中，您可以检查用户是否已登录。如果用户已登录，则只需内容`echo`，如果用户未登录，则您可以点赞`echo``script`

```
<script type="text/javascript">
    window.location="http://yourExternalDomain.com";
</script> 
```

来自[jQuery .load 文档](http://api.jquery.com/load/)

## 脚本执行

当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

# playframework-2.0 - 将 play 2 应用程序部署到 cloudbees 问题

> ID：12808237
> 
> 赞同：0
> 
> 时间：2012-10-09T20:51:24.120
> 
> 标签：playframework-2.0, cloudbees

有没有人尝试使用此[最新](https://developer.cloudbees.com/bin/view/RUN/Playframework#HDeployingaPlay2application)说明将 play 2 应用程序部署到 cloudbees？

我已经完成了所有步骤，但是当我尝试运行它时：

```
play cloudbees-deploy 
```

我收到：

```
[error] Not a valid command: cloudbees-deploy
[error] Not a valid project ID: cloudbees-deploy
[error] Not a valid configuration: cloudbees-deploy
[error] Not a valid key: cloudbees-deploy (similar: cloudbees-application-id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:39:36.010

是的 - 需要有 ~/.bees/bees.config （我调整了文档以使其更清晰）。

如上所述，进口也必须在那里。最好不要对密钥进行硬编码。

我今天用 play 2.0.4 验证了这一点（2.0.1 在推出支持旧版本 SBT 的版本之前还不能工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:16:43.433

最后，我通过放入`import cloudbees.Plugin._`Build.scala 解决了这个问题，但出现了更多抱怨丢失`username`等错误。

似乎我不得不把它放在 Build.scala 中：

```
 val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA) 
    .settings(cloudBeesSettings :_*)
    .settings(
  CloudBees.applicationId := Some("my_app")
).settings(
  CloudBees.username := Some("my_username")
).settings(
  CloudBees.apiKey := Some("my_app_key")
).settings(
  CloudBees.apiSecret := Some("my_secret")
).settings(
  CloudBees.host := "https://api.cloudbees.com/api"
) 
```

不仅`CloudBees.applicationId := Some("my_app")`如他们所说...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:39:33.883

问题是我将`.bees`目录放在错误的路径中。`%HOME%`可以在 Windows 机器上找到目录：在 cmd 中键入：所以这是放置文件夹`echo %USERPROFILE%`的正确路径。`.bees`

# ruby-on-rails - 用于 ruby /rails 的 OCR tesseract gem - 如何安装？

> ID：12808243
> 
> 赞同：2
> 
> 时间：2012-10-09T20:51:41.413
> 
> 标签：ruby-on-rails, ruby, gem, ocr

tesseract-ocr gem 安装正确（包括依赖项）。但是，在启动 rails 服务器时，出现以下编译错误。在这个阶段我从来没有收到过编译错误，所以我会很感激任何帮助。

```
server:brandlove n$ rails s
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/compilers/gcc.rb:29:in `compile': compile error: see logs at /var/folders/hm/6n4h3d1s49b_pxt2m51gr39c0000gn/T/.ffi-inline-501/793babd774d7ac74de2eb789882efa735f45b30b.log (CompilationError)
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/builders/c.rb:114:in `shared_object'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:90:in `block in build'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:87:in `instance_eval'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/builders.rb:87:in `build'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/inline.rb:54:in `singleton_inline'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/ffi-inline-0.0.4/lib/ffi/inline/inline.rb:39:in `inline'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:34:in `<module:C>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:31:in `<module:Tesseract>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:29:in `<top (required)>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/api.rb:26:in `require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/api.rb:26:in `<top (required)>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract-ocr.rb:35:in `require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract-ocr.rb:35:in `<top (required)>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from /Users/n/Desktop/brandlove/config/application.rb:7:in `<top (required)>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:53:in `require'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
    from /Users/n/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
server:brandlove n$ 
```

日志文件：

```
/var/folders/hm/6n4h3d1s49b_pxt2m51gr39c0000gn/T/.ffi-inline-501/793babd774d7ac74de2eb789882efa735f45b30b.cpp:1:30: error: tesseract/strngs.h: No such file or directory
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:51: error: expected constructor, destructor, or type conversion before ‘*’ token
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:57: error: variable or field ‘destroy_string’ declared void
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:57: error: ‘STRING’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:57: error: ‘value’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:63: error: ‘STRING’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:63: error: ‘value’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:63: error: expected ‘,’ or ‘;’ before ‘{’ token
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:69: error: ‘STRING’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:69: error: ‘value’ was not declared in this scope
/Users/n/.rvm/gems/ruby-1.9.3-p0/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:69: error: expected ‘,’ or ‘;’ before ‘{’ token 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T18:25:24.543

据我所知，您使用 mac os ...解决任何安装错误的最简单方法是全新安装 :)`tesseract`和`gem 'tesseract-ocr'`

如果您安装了[自制软件](http://mxcl.github.com/homebrew/)，这很容易

```
$ brew install tesseract 
```

这将需要一些时间，并将安装 tesseract 本身和所有必要的库

之后，当然

```
$ gem install 'tesseract-ocr' 
```

（或者`$ bundle install`如果您将其添加到 Gemfile）

# android - Textview到图像文件Android？

> ID：12808246
> 
> 赞同：3
> 
> 时间：2012-10-09T20:52:05.740
> 
> 标签：android, image, textview, storage, drawable

我有一个`TextView`. 我想更改/转换`TextView`为图像文件并将其存储在外部存储中。这可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:26:57.713

您将要采取的一般方法是...

*   创建你的`TextView`
*   根据需要设置其文本、字体等
*   创建一个`Bitmap`与您的尺寸相同的对象`TextView`
*   从`Canvas`您的`Bitmap`
*   调用`TextView.Draw(Canvas)`函数将其渲染到画布上
*   将结果保存`Bitmap`到文件

Android 文档应该能够帮助您完成每个子点。

# php - 如果包含某些文本，则隐藏 RSS 提要

> ID：12808248
> 
> 赞同：4
> 
> 时间：2012-10-09T20:52:13.980
> 
> 标签：php, javascript, css, rss

我正在使用以下代码提取 RSS 提要：

```
<div id="mcdougaldteens">
<script src="http://feeds.feedburner.com/dcl_mcdougald_teen?format=sigpro" type="text/javascript" ></script>
</div> 
```

这是即将发生的事件的提要，如果没有事件，提要会显示：“提供这些标题的提要不可用。”

我要么希望它将文本更改为“没有更多事件”，要么只是在提要没有引入事件时完全隐藏提要。

我尝试过这样的事情但没有成功：

```
<script type="text/javascript">
function hideEmptyRSS() {
    var el = document.getElementById("mcdougaldteens");
    if(el.innerHTML == "The feed providing these headlines is not available.")  {
        el.style.display = "none";
    }   else    {
        el.style.display = "block";
    }
}
</script> 
```

我可以使用 JavaScript、PHP 或 CSS。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:55:12.563

你错过`indexOf`了第 3 行：

```
function hideEmptyRSS() {
    var el = document.getElementById("mcdougaldteens");
    if (el.innerHTML.indexOf("The feed providing these headlines is not available") > -1) {
        el.style.display = "none";
    }
    else {
        el.style.display = "block";
    }
} 
```

**编辑**

好的，我刚刚看到该脚本`div`在您的内部创建了另一个。
所以你需要在新元素中搜索文本，但隐藏你的。像这样：

```
var el_mine = document.getElementById("mcdougaldteens");
var el_theirs = document.getElementsByClassName('feedburnerFeedBlock');

if (el_theirs[0].innerHTML.indexOf("The feed providing these headlines is not available") > -1) {
    el_mine.style.display = "none";
}
else {
    el_mine.style.display = "block";
} 
```

在这里测试它：http: [//jsfiddle.net/RASG/DqrT9/](http://jsfiddle.net/RASG/DqrT9/)

# .net - AS400 桥接的首选方法是什么？

> ID：12808252
> 
> 赞同：2
> 
> 时间：2012-10-09T20:52:28.793
> 
> 标签：.net, wcf, migration, ibm-midrange

我目前正在使用 C# 和 SQL Studio 2010 开发一个项目，该项目需要与我们在 AS400 上运行的旧程序进行通信。我们可以访问名为 ASNA 的第 3 方套件，它允许 dotNet 编译 RPG 代码并可以透明地访问 ISeries 和 MS SQL Stuidio。

我们有一个批处理作业需要将其结果（编号可能超过 300,000 件）返回到 AS400。我们通常使用 WCF 服务，但我们担心这可能会产生太多数据。

以下是我们考虑过的一些选项：

*   以块的形式迭代数据的 WCF 服务
*   生成包含必要数据更改的文本文件，并将其 FTP 到一个文件夹，以便 AS400 从中读取
*   授予从 AS400 对包含相关数据的表的只读访问权限

我们应该允许对表进行读取访问还是保持系统的完全分离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:00:51.870

有什么理由不能只使用 SQL 从批处理作业中将数据直接写入 AS/400？

如果您想“保持系统的完全分离”，那么您当然可以创建一个文本文件并将其通过 FTP 传输到 AS/400 上的 IFS - 但是您必须在 AS/400 上编写软件来解析该文本文件并将数据放入适当的物理文件（表）中。

在不了解您组织的具体情况的情况下，我无法回答您的问题“我们应该允许对表进行读取访问还是保持系统的完全分离？”。根据我工作过的地方，这些是我会按顺序选择的选项：

1) 使用 SQL 从 C# 批处理作业中将数据直接写入 AS/400。

2) 有一个在 AS/400 上运行并从 Microsoft SQL Server 读取数据的预定作业。

3) 创建一个文本文件（可能是 CSV 文件）并将其通过 FTP 传输到 AS/400 上的 IFS，然后我将在其中运行计划的作业来解析数据。

# c - 在C中拆分字符串

> ID：12808254
> 
> 赞同：0
> 
> 时间：2012-10-09T20:52:50.517
> 
> 标签：c, string

我需要在 C 中拆分一个字符串。我知道我可以使用`strtok`，但我不确定如何使用它。

例如，我想拆分这个：`"L 90,120,130,140"`我想得到“L”，然后是用`,`（逗号）分隔的整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:57:20.917

`strtok`在您的:中使用多个分隔符

```
 char str[]="L 90,120,130,140";
  char *tok;
  tok = strtok (str," ,"); 
```

然后循环并根据需要存储它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:17:51.993

```
char str[]="L 90,120,130,140";
char *tok;
tok = strtok (str," ,");

while (tok != NULL) {
    if (isdigit(tok[0])) {
        int i = atoi(&tok[0]);
        printf("number %i\n",i);
    } else {
        printf("string %s\n",tok);            
    }
    tok = strtok(NULL," ,");
} 
```

输出：

```
string L
number 90
number 120
number 130
number 140 
```

如果浮点数是字符串的一部分，可以进一步改进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:03:32.160

这是一个完整的例子：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
  char str[]="L 90,120,130,140";
  char *p ;

  p = strtok( str, " " ) ; // p is now pointer to 'L\0'
  printf( "first token: %s\n", p ) ;

  while( p = strtok( NULL, "," ) ) printf( "next token: %s\n", p ) ;

  exit( 0 ) ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:11:34.353

strtok 会破坏你的字符串，你应该使用 sscanf 代替：

```
char s[2];
int a,b,c,d;
if( sscanf("L 90,120,130,140","%1s%d,%d,%d,%d",s,&a,&b,&c,&d)==5 )
  puts("reading was OK"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T21:18:30.167

这只是对其他答案的补充。请记住 strtok() 是不可重入的。如果您在线程中，请使用 strtok_r。

# php - 如何在 PHP Array 中调用变量（$name）？

> ID：12808270
> 
> 赞同：0
> 
> 时间：2012-10-09T20:53:57.100
> 
> 标签：php, yii

我正在努力提高我的 PHP 技能，但在涉及数组时不知所措。

这是交易：我正在尝试将表单元素的值设置为 $emx - 一个从 URL 字符串中捕获参数的变量，即 myform.html?emx=youremail@email.com

这是我拥有的数组，它构建了表单（这是 PHP Yii）

```
'email' => array('type'=>'text', 'label'=>$this->t('Your email address'), 'value' => $emx, 'onFocus' => 'this.value=""'), 
```

它生成的 HTML：

```
<input type="text" id="MDealSubscribeForm_email" name="MDealSubscribeForm[email]" onfocus="this.value=&quot;&quot;" value=""> 
```

我已将 $emx 定义如下：

```
<?php
    if ($_GET['emx'] != ""){
    $emx = $_GET['emx'];}
    else {
    $emx = "Enter your email address";} ?> 
```

我遇到的问题是该值未设置为 $emx - 无论我是否将 ?emx= 附加到 URL，值始终为“”

更新： if ($_Get['emx']... 的 php 在一个文件中（一个包装器），而 'email' => array(... 在一个单独的文件中 - 如果这很重要的话。

我的数组语法错误吗？我想我只需要输入 $emx 来设置值。谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:07:31.623

`MDealSubscribeForm` 是您用来构建表单的模型（我`$model`在回答中这样称呼它）

```
if(isset($_GET['emx'])){
    $model->email = $_GET['emx'];
} else {
    $model->email = "Enter your email address";
} 
```

remove `'value' => $emx`，这不再需要了。

--

而且，尝试一下`'onFocus' => 'js:this.value=""'`，我相信这会给出正确的 html 而不是`&quot;&quot;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:18:05.400

你得到了很多错误的答案，因为你认为这是一个 PHP 问题，并把你的问题命名为这样。从你所说的一切来看，它看起来`$emx`设置正确，问题是你不能让它在 Yii 生成的表单中显示。

[请注意， CFormInputElement](http://www.yiiframework.com/doc/api/1.1/CFormInputElement)没有“值”属性。要设置该值，您需要在模型中设置它，例如：

```
$model->email = $emx; 
```

[您还可以通过在模型或表单中](http://www.yiiframework.com/doc/guide/1.1/en/form.model)[设置](http://www.yiiframework.com/doc/guide/1.1/en/form.model)值来避免该`else`语句。[`default`](http://www.yiiframework.com/doc/guide/1.1/en/form.model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:00:35.483

您应该使用`$_GET['MDealSubscribeForm']['email']`（如果它是 GET）

下次只需做一个`print_r($_GET);`调试表单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T22:40:00.350

如果未设置电子邮件，最好在电子邮件输入字段上使用占位符属性，而不是显式设置值。我总是讨厌看到内联 javascript。

尝试：

```
<?php $emx = (isset($_GET['emx'])) ? $_GET['emx'] : ''; ?> 
```

接着：

```
'email' => array('type'=>'text', 'label'=>$this->t('Your email address'), 'value' => $emx, 'placeholder' => 'Enter your email address'), 
```

回到主题，这看起来不像是为标准 Yii 表单输入生成器函数设计的数组。也许问题出在将这个数组转换为输入 HTML 的代码中？您能告诉我们或向我们展示执行此操作的代码吗？

# java - 如何更新 Android 应用程序的本地数据源？

> ID：12808274
> 
> 赞同：0
> 
> 时间：2012-10-09T20:54:38.333
> 
> 标签：java, android, updating

我有一个从本地 XML 文件中提取数据的应用程序。但是，数据会随着时间而变化，我正在寻找一种方法来更新它而不更新整个应用程序。

我的主要目标是创建一个更新方法，如果可以连接到 Internet，并更新应用程序，以便下次在没有 Internet 访问的情况下启动应用程序时，它将显示最新版本的数据。

由于 Android 应用程序文件处于只读状态，因此我需要某种解决方法。我正在考虑两种可能的方法。第一个是下载一个额外的文件并使用它，第二个是使用 SQLite 数据库。

所以我的问题是：

*   是否可以创建具有可更新信息的应用程序？
*   如果是这样，实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:00:19.503

我认为你应该使用“冰箱”。

首次启动时，获取默认数据并将其存储在 sd 卡或内部存储中，并在更新发生时替换这些数据。

# dns - Web 应用程序是否应该在 www 上提供服务？子域？

> ID：12808276
> 
> 赞同：1
> 
> 时间：2012-10-09T20:54:45.453
> 
> 标签：dns, subdomain

我注意到很多网站将您从不合格的域重定向到 www。子域。就 webapps 而言，这是最佳实践吗？

但不是每个人都这样做。例如，heroku.com 将您重定向到 www.heroku.com，但 stackoverflow.com 则相反，将您从 www.stackoverflow.com 重定向到 stackoverflow.com。

如果有的话，这里的最佳做法是什么，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:57:11.833

现在的网络倾向于不使用“www”。但是，您应该始终确保（无论如何现在）两个 www.domainname.com 都与 domainname.com 位于同一个位置。

至于您将哪个设置为主服务器名称，哪个是别名，这取决于您，甚至可能取决于您的目标市场。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:11:07.040

您可以让其中任何一个工作，并且它们都应该设置为正常工作。

它们的 DNS 处理有一个区别。可以将带有记录的子域`www`重新路由`CNAME`到另一个主机名，这是许多 CDN 需要的（例如 Akamai），因此 Akamai 上的站点无法使用原始顶级域作为其最终 URL。直接顶级域（例如 example.com）仅路由到 IP（用于 A 和 AAAA 记录）。

如果您只是定向到您自己的服务器，虽然没有花哨的主机名，它没有任何区别，但如果您要开始使用 CDN，它可能会有所作为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:06:40.250

我妈妈总是把“www”放在一切的前面。因此，如果我告诉她“https 冒号斜杠 slash 安全点示例 dot com”，她可能会点击[http://www.example.com/](http://www.example.com/)，或者如果我幸运的话，[https://www.secure.example .com/](https://www.secure.example.com/)。世界陷入了传统的泥潭。正如硅胶所说，您确实需要同时支持两者。

当然，从技术的角度来看，它一点也不重要……除了不合格的域还应该运行一些其他服务，比如 SMTP（以防 MX 主机无法确定）。请注意，应该发生的通常不是实际发生的。太多的人不遵守标准。

# java - 亚马逊 AWS 哪里可以更好地存储图像和数据？

> ID：12808279
> 
> 赞同：1
> 
> 时间：2012-10-09T20:55:01.277
> 
> 标签：java, android, amazon-web-services

我有 android 应用程序，它需要存储某个对象，其中包含用户上传的图像 + 图像描述。稍后可能会添加其他数据。

使用哪种服务更好地存储此类信息？将此类对象存储在 Amazon SimpleDB 中是否有效，或者将图像存储在存储中并将图片链接保存在数据库中会更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:10:36.260

您应该将图像存储在[Amazon S3](http://aws.amazon.com/s3/)中，然后将这些图像的链接存储在您的数据库中。

# android - 在android中显示HTML

> ID：12808284
> 
> 赞同：2
> 
> 时间：2012-10-09T20:55:15.017
> 
> 标签：android, html

我正在使用 TextView 显示一些我从 HTML 格式化的文本：

```
Spanned s = Html.fromHtml(getString(R.string.disclaimer));
tvDisclaimer.setText(s); 
```

文本在`strings.xml`using CDATA 中：

```
<string name="disclaimer">
    <![CDATA[
    <p>blablabla</p>
    <ul>
      <li>foo
      <li>bar
    </ul> 
    ]]>
</string> 
```

现在的重点是，整个事情都以`IndexOutOfBoundsException`in崩溃`Choreographer`。它适用于一些简单的 HTML，但在某些时候，我只需添加一个字符 (ø) 就可以让它崩溃。删除角色使其工作。

如果`Html.fromHtml()`不是要走的路，我可以用什么来在我的应用程序中获得一些体面的富文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:39:28.517

我想出了怎么做。如评论中所述，该`Html.fromHtml()`方法仅支持有限的 HTML 集。它可以通过使用来完成`WebView`：

```
 WebView wvDisclaimer = (WebView)findViewById(R.id.wvDisclaimer);
    wvDisclaimer.loadDataWithBaseURL("about:blank", 
            getString(R.string.disclaimer), "text/html", "utf-8", "about:blank"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T08:44:28.823

我通过使用以下代码解决了这个问题：

```
<string name="disclaimer">
<![CDATA[
<p>blablabla</p>
    <br>&#8226; &nbsp;foo
    <br>&#8226; &nbsp; bar
]]>
</string> 
```

希望能帮助到你。

# iphone - 需要为 UIRefreshControl 实现超时机制。

> ID：12808286
> 
> 赞同：3
> 
> 时间：2012-10-09T20:55:21.397
> 
> 标签：iphone, ios, ipad, uirefreshcontrol

Apple 在 iOS 6 中的新 UIRefreshControl 是一个受欢迎的新功能，但似乎没有内置超时机制。

这是我需要它的场景：

假设用户拉刷新。它进入旋转模式，而代码尝试从服务器获取数据。服务器不响应，将导致纺车永远旋转。所以，应该有一个超时机制来阻止它。

实施它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:00:01.460

首先用你需要的时间设置一个计时器。要求它检查以下内容。

您可以使用以下属性检查一段时间后它是否仍在刷新

> @property (nonatomic, readonly, getter=isRefreshing) BOOL 刷新

如果是，那么您可以使用

> 结束刷新

就像是 ：

> -(void)checkAndStop{
> if(refreshControl.refreshing == YES) // 如果需要显示警报
> [refreshControl endRefreshing];
> }

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T23:07:20.907

还可以考虑使用 dispatch_after，它可能比创建 NSTimer 消耗更少。

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    code to be executed on the main queue after delay
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:25:06.887

我已经实现了使用 NSTimer 来结束刷新：

```
 [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(handleDataRefreshFailure:) userInfo:nil repeats:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-24T10:12:42.513

斯威夫特版本：

```
let delayInSeconds: UInt64 = 2
let popTime = dispatch_time(DISPATCH_TIME_NOW, Int64(delayInSeconds * NSEC_PER_SEC))
dispatch_after(popTime, dispatch_get_main_queue(), {
     if refreshControl.refreshing {
        refreshControl.endRefreshing()
     }
   }) 
```

# jquery - ajax 检索元素上的 jQuery 绑定事件

> ID：12808287
> 
> 赞同：3
> 
> 时间：2012-10-09T20:55:21.390
> 
> 标签：jquery, ajax

我有一个包含行的页面，每个行都包含几个输入字段和一个执行某些操作的按钮。按钮有类 .super-button。假设我有 23 行，我刚刚通过 AJAX 检索了第 24 行并将其插入到下面，我想在单击事件上将一些功能绑定到它的按钮。

我现在正在做的是：

```
$(".super-button").off("click");
$(".super-button").on("click", function(){
    /// Do some awesome functionality
}); 
```

有没有更好的方法将事件绑定到 DOM 中新插入的元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T20:56:37.057

您可以将事件**委托**给静态的直接父级。

通过这样做，您可以只关联一次事件..

```
$("body").on("click",".super-button", function(){
    /// Do some awesome functionality
}); 
```

这将确保您不需要在每次创建新元素时都使用 .on()和**.off()** **。**

注意：这里的 body 可以被最近的静态父级替换，也许是一个存在行的表。我使用 body 委派它，因为我不知道 , 标记。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T20:59:18.147

使用[**on()**](http://api.jquery.com/on/)您可以将事件附加到动态元素。您绑定到最近的静态元素（或文档），将实际预期的目标元素指定为辅助参数。

```
$("document").off("click", ".super-button").on("click", ".super-button", function(){
    /// Do some awesome functionality
}); 
```

从理论上讲，您不需要`off()`，因为您的代码应设计为仅执行连线代码。

您使用`on()`for 委托的版本执行事件的附加，然后与指定选择器匹配的任何未来元素都将按预期附加事件。

### [演示](http://jsfiddle.net/97wYw/)- 将事件附加到动态添加的元素

演示具有以下 HTML：

```
<button id="addElement" type="button">Add a dynamic element</button>

<div id="container">
    <div class="someElement">Some Element - click me<div>
</div> 
```

和脚本：

```
$("#container").on("click", ".someElement", function(){
    alert("I have been clicked");
});

$("#addElement").on("click", function() {
    $('<div class="someElement">Another Element - click me too<div>').appendTo($("#container"));
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T08:06:25.477

在收到来自 AJAX 调用的响应后，我试图将`dblclick`事件绑定到添加到已声明表中的行。我不必这样做`.appendTo($("#container"));`。

您能否说明一下为什么实际需要？

我的样本：

```
$(".divRightDiv table tbody").on("dblclick", ".thisRow", function () {
    //whatever I want to do
}); 
```

在 AJAX Success 中，我这样做：

```
for (var i = 0; i < msg.d.length; i++) {
        if (oddEven == 'even') {
            oddEven = 'odd';
        }
        appendRows += "<tr class='" + oddEven + " thisRow'><td>" + msg.d[i].c_Id + "</td><td>" + msg.d[i].c_Name + "</td></tr>";"</td></tr>");
    }
    $(".tblTableName").append(appendRows); 
```

# mobile - 如何使用 PrimeFaces Mobile 添加身体加载？

> ID：12808289
> 
> 赞同：0
> 
> 时间：2012-10-09T20:55:40.990
> 
> 标签：mobile, jsf-2, primefaces

我只是想使用 PrimeFaces Mobile 输出这个：

```
<body onload="windowOnLoad();"> 
```

这是页面的样子：

```
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pm="http://primefaces.org/mobile" contentType="text/html"
    renderKitId="PRIMEFACES_MOBILE">

    <pm:page title="Mobile Login">
    <pm:header>
        <script language="JavaScript" type="text/javascript">
function bodyOnLoad() {
    alert("in bodyOnLoad");
}

</script>
</pm:header>

        <pm:view id="viewForm">
            <pm:content onload="bodyOnLoad();">

Test

            </pm:content>
        </pm:view>
    </pm:page>
</f:view> 
```

我试过把它放在 pm:page、pm:view、pm:content 上。似乎没有一个工作？我确信我错过了一些简单的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:21:30.607

这变成了更多的 Javascript 解决方案：

```
<pm:header>
        <script language="JavaScript" type="text/javascript">
function bodyOnLoad() {
    alert("in bodyOnLoad");
}
window.onload = bodyOnLoad;

</script>
</pm:header> 
```

# cakephp - CakePHP - Uploader 插件的自定义验证功能

> ID：12808294
> 
> 赞同：0
> 
> 时间：2012-10-09T20:55:54.433
> 
> 标签：cakephp, behavior, uploader

我想在 Uploader 行为中使用自定义验证函数，宽度和高度，来创建一个新的自定义验证函数来测试图像是否为正方形。因此，当我在模型中使用行为时，这就是我使用文件验证功能的方式。我也在我的 SquareValidation 函数中概述了我想在下面做的事情。

```
 public $actsAs = array(         
        'Uploader.FileValidation' => array(
            'image' => array(
                'extension' => array(
                    'value' => array('gif', 'jpg', 'jpeg', 'png'),
                    'error' => 'You can only upload images'
                ),
                'mySquareValidation'
            )
    )

    public function mySquareValidation () {
       return width = height;
       // WHAT IS THE RIGHT SYNTAX TO ACCESS WIDTH AND HEIGHT BEHAVIOUR FUNCTIONS?
    } 
```

但是我如何访问自定义验证函数中的那些核心（行为）验证函数并使用它们来检查提交的文件是否为正方形（我想允许任何高度/宽度组合）。我知道要调用核心验证函数（对 CakePHP），例如，我会简单地使用：

```
Validation::rule($this->data['field']) 
```

那么我该如何对属于行为的核心验证功能做同样的事情呢？当我创建了自定义验证函数后，我是否会像在验证数组中那样执行行为数组中的函数（就像在我的示例中一样）？

参考：上传文档 - [http://milesj.me/code/cakephp/uploader#validating-against-a-model](http://milesj.me/code/cakephp/uploader#validating-against-a-model)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:48:05.357

您是否尝试过在 Behavior 中插入验证功能？
另外，我猜你的意思是

```
return width == height; 
```

# node.js - 如何在 Express 中设置具有任意起始路径的静态服务？

> ID：12808295
> 
> 赞同：1
> 
> 时间：2012-10-09T20:56:00.043
> 
> 标签：node.js, express, node.js-connect

如果我想将目录设置`.../whatever/stuff`为静态服务，但引用为`http://example.com/mystuff`，我尝试这样做：

```
app.configure(function() {
    app.use('/mystuff', _express.static(__dirname + "/whatever/stuff"));
    app.use('/mystuff', _express.directory(__dirname + "/whatever/stuff"));
}); 
```

这*主要是*可行的，但是如果我引用 mystuff 的子目录而没有尾部斜杠，例如`http://example.com/mystuff/subdir`，它会重定向到错误的位置 ( `http://example.com/subdir/`)，从而导致 404。这对于目录列表尤其有问题，因为目录中间件没有放置子目录链接上的斜杠。

我能做些什么来解决这个问题吗？（我上面的语法正确吗？）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T22:36:18.120

尝试这个：

```
app.use('/mystuff*', ..); 
```

# php - 什么可能导致 $_FILES['file']['name'] 为空？

> ID：12808297
> 
> 赞同：2
> 
> 时间：2012-10-09T20:56:00.283
> 
> 标签：php, forms, file-upload

我有一个包含文件上传的表格。表格中的所有内容似乎都工作正常，除了`$_FILES['file']['name']`出现空。

**HTML**

```
<form ... >
<input class="file" type="file" name="file[]" />
<input class="file" type="file" name="file[]" />
<input class="file" type="file" name="file[]" />
</form> 
```

**PHP**

```
foreach ($_FILES['file']['name'] as $index => $file) {
    // Handle file upload
} 
```

我收到一条错误消息，指出`$_FILES['file']`未定义索引。我检查了 PHP 中是否启用了文件上传。还有什么可能导致这个变成空的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:59:56.903

enctype 对吗？

尝试

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
   <input class="file" type="file" name="file[]" />
   <input class="file" type="file" name="file[]" />
   <input class="file" type="file" name="file[]" />
</form> 
```

如果没有**enctype**，则不会上传任何文件，因此`$_FILES`数组将为空。

# php - 仅显示 GROUP BY 的最新结果

> ID：12808303
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:56:17.513
> 
> 标签：php, sql

我只需要在结果中显示最近的条目，我知道我应该进行联接或内部联接，但似乎无法使其正常工作。我确信这是我正在寻找的简单的东西。

```
$result = mysql_query("SELECT * FROM form_2 GROUP BY jobname"); 
```

我希望仅通过作业名获得最反感的结果。

现在它显示第一个具有相同作业名的条目，我需要最新的。当有人添加评论时，工作名称是一致的。而且我只需要显示最新的整体以显示使用该职位名称添加的最新评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:01:57.927

试试这个：

```
select form_2.*
from form_2
inner join (
    select jobname, max(awardedcon) as max_value
    from form_2
    group by jobname
) as a on form_2.jobname=a.jobname and form_2.awardedcon=a.max_value 
```

我假设每个人`awardedcon`的价值都在增加`jobname`（*即*每个人的最新条目`jobname`将具有最大的`awardedcon`价值）

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:57:51.570

```
SELECT jobname,
       max(awardedcon) as last_awardedcon
FROM form_2 
GROUP BY jobname
ORDER BY last_awardedcon DESC 
```

# java - ibatis内联参数带#in order by子句

> ID：12808305
> 
> 赞同：0
> 
> 时间：2012-10-09T20:56:37.820
> 
> 标签：java, parameters, inline, ibatis

下面是我的ibatis地图配置，

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Contact">
<!--- Showing all data of table -->
<select id="getAll" resultClass="com.nik.Contact">
  select * from contact
  <dynamic prepend="where ">
        salary like '%'
    <isNotNull  property="orderby" >
        order by #orderby#, #orderby2#
    </isNotNull>
    </dynamic>
</select>
</sqlMap> 
```

这是我的pojo

```
package com.nik;

public class Contact {
      private String firstName; 
      private String lastName; 
      private String email; 
      private String salary;
      private String mobile;
      private String orderby;
      private String orderby2;
      private int id;

      public Contact() {}

      public Contact(
      String firstName,
        String lastName,
        String email) {
      this.firstName = firstName;
      this.lastName = lastName;
      this.email = email;
      }

      public String getEmail() {
      return email;
      }
      public void setEmail(String email) {
      this.email = email;
      }
      public String getFirstName() {
      return firstName;
      }
      public void setFirstName(String firstName) {
      this.firstName = firstName;
      }
      public int getId() {
      return id;
      }
      public void setId(int id) {
      this.id = id;
      }
      public String getLastName() {
      return lastName;
      }
      public void setLastName(String lastName) {
      this.lastName = lastName;
      }

    public String getSalary() {
        return salary;
    }

    public void setSalary(String salary) {
        this.salary = salary;
    }

    public String getMobile() {
        return mobile;
    }

    public void setMobile(String mobile) {
        this.mobile = mobile;
    }

    public String getOrderby() {
        return orderby;
    }

    public void setOrderby(String orderby) {
        this.orderby = orderby;
    }

    public String getOrderby2() {
        return orderby2;
    }

    public void setOrderby2(String orderby2) {
        this.orderby2 = orderby2;
    } 
    } 
```

这是我的测试课，

```
package com.nik;

import com.ibatis.common.resources.Resources;
import com.ibatis.sqlmap.client.SqlMapClient;
import com.ibatis.sqlmap.client.SqlMapClientBuilder;
import java.io.*;
import java.sql.SQLException;
import java.util.*;

import org.apache.log4j.Logger;

public class IbatisExample{
  public static void main(String[] args)
  throws IOException,SQLException{
    // get a logger instance named "com.foo"
       Logger  logger = Logger.getLogger("com.nik");
  Reader reader = Resources.getResourceAsReader("ibatis-config.xml");
  SqlMapClient sqlMap = 
  SqlMapClientBuilder.buildSqlMapClient(reader);
  //Output all contacts
  System.out.println("All Contacts");
  Contact c1 = new Contact();
  c1.setOrderby("salary");
  c1.setOrderby2("mobile");
  List<Contact> contacts = (List<Contact>)
  sqlMap.queryForList("Contact.getAll",c1);
  Contact contact = null;
  for (Contact c : contacts) {
  System.out.print("  " + c.getId());
  System.out.print("  " + c.getFirstName());
  System.out.print("  " + c.getLastName());
  System.out.print("  " + c.getEmail());
  System.out.print("  " + c.getSalary());
  System.out.print("  " + c.getMobile());
  contact = c; 
  System.out.println("");
  }  
  }
} 
```

这里的问题是 order by 子句没有效果......

这里我们输出

```
All Contacts
DEBUG [main] - Created connection 71786792.
DEBUG [main] - {conn-100000} Connection
DEBUG [main] - {pstm-100001} PreparedStatement:    select * from contact   where      salary like '%'        order by ?, ?     
DEBUG [main] - {pstm-100001} Parameters: [salary, mobile]
DEBUG [main] - {pstm-100001} Types: [java.lang.String, java.lang.String]
DEBUG [main] - {rset-100002} ResultSet
DEBUG [main] - {rset-100002} Header: [id, firstName, lastName, email, salary, mobile]
DEBUG [main] - {rset-100002} Result: [1, abc, 111, abc@hyahoo.com, 5000, 400]
DEBUG [main] - {rset-100002} Result: [2, def, 222, def@yahoo.com, 2000, 100]
DEBUG [main] - {rset-100002} Result: [3, xyz, 333, xyz@yahoo.com, 3000, 300]
DEBUG [main] - Returned connection 71786792 to pool.
  1  abc    111  abc@hyahoo.com  5000  400
  2  def   222  def@yahoo.com  2000  100
  3  xyz  333  xyz@yahoo.com  3000  300 
```

如果我在地图配置中用“$”更改“#”（例如，按 $orderby$、$orderby2$ 排序），那么它可以工作，

```
All Contacts
DEBUG [main] - Created connection 71786792.
DEBUG [main] - {conn-100000} Connection
DEBUG [main] - {pstm-100001} PreparedStatement:    select * from contact   where      salary like '%'        order by salary, mobile     
DEBUG [main] - {pstm-100001} Parameters: []
DEBUG [main] - {pstm-100001} Types: []
DEBUG [main] - {rset-100002} ResultSet
DEBUG [main] - {rset-100002} Header: [id, firstName, lastName, email, salary, mobile]
DEBUG [main] - {rset-100002} Result: [2, def, 222, def@yahoo.com, 2000, 100]
DEBUG [main] - {rset-100002} Result: [3, xyz, 333, xyz@yahoo.com, 3000, 300]
DEBUG [main] - {rset-100002} Result: [1, abc, 111, abc@hyahoo.com, 5000, 400]
DEBUG [main] - Returned connection 71786792 to pool.
  2  def   222  def@yahoo.com  2000  100
  3  xyz  333  xyz@yahoo.com  3000  300
  1  abc  111  abc@hyahoo.com  5000  400 
```

关于为什么带有 # 的内联参数不能按顺序工作的任何线索？我不能使用 $ 因为这是根据 fortify 360 的安全风险:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T19:41:39.527

`$var$`语法是告诉 iBATIS 在构造预准备语句之前将属性值按原样替换到 SQL 中的唯一方法`var`。Fortify 警告它存在安全风险的原因是，如果直接来自不受信任的来源的数据在没有事先验证的情况下按原样插入 SQL 中，它可能会为 SQL 注入攻击打开大门。

为了防止这种 SQL 注入，您可以修改`Contact`POJO，以便`setOrderBy`和`setOrderBy2`方法测试它们的参数，并且仅当这些参数在可接受的值集中时才允许设置对象的相应属性。类似于以下内容：

```
public void setOrderBy(String orderBy) {
   if (orderBy.equals("name") or orderBy.equals(" salary") or orderBy.equals("dept")) {
      this.orderBy = orderBy;
   } else {
      this.orderBy = NULL;
   }     
} 
```

只要您像这样验证所有替换值，使用该`$var$`语法应该是完全可以接受且安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:14:38.337

不是一个优雅的解决方案，但我使用它是因为不想更改代码，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Contact">
<!--- Showing all data of table -->
<select id="getAll" resultClass="com.nik.Contact" parameterClass="java.util.Map">
  select * from contact where salary like '%'

        <dynamic prepend="order by">
        <isEqual 
             property="orderby" 
             compareValue="salary">
            salary,
        </isEqual>
        <isEqual 
             property="orderby" 
             compareValue="mobile">
            mobile,
        </isEqual>
        <isEqual 
             property="orderby2" 
             compareValue="salary">
            salary
        </isEqual>
        <isEqual 
             property="orderby2" 
             compareValue="mobile">
            mobile
        </isEqual>
        </dynamic>
</select>
</sqlMap> 
```

# netbeans - 从 Github 同步存储库

> ID：12808323
> 
> 赞同：3
> 
> 时间：2012-10-09T20:57:27.640
> 
> 标签：netbeans, github

我正在尝试同步 Netbeans 和 Git 存储库但没有成功，因为我一直有一些 Java 错误。所以我下载了适用于 Windows 的 Git，并在教程中制作了所有内容。我下载了所有内容，所以我在 Netbeans 中创建了一个项目。我正在尝试从 Windows 的 GIT 程序同步所有内容，但不幸的是，当我尝试在 Git 中查看我的存储库时，我收到以下错误消息：

**“在此存储库中查找 HEAD 失败”**

知道如何解决这个问题吗？

# excel - 配置 Excel 并将其链接到分隔文件以供重复使用

> ID：12808327
> 
> 赞同：0
> 
> 时间：2012-10-09T20:57:31.370
> 
> 标签：excel, excel-2010

我正在将数据转储到一个制表符分隔的文件中，我想在 Excel 中查看和分析。但是文件内容经常变化，我不想每次都经历导入步骤，即定义分隔符、列名等。有没有办法将链接元数据保存在 Excel 文件中，以便您可以跳过定义步骤随后的开口，即它知道第一行是列名，它是制表符分隔的等等？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:05:56.520

是的你可以。通过获取外部数据路线。一旦你设置它。您接下来要做的就是“刷新数据”。不需要宏。

# c# - 您将如何通过反射调用事件？

> ID：12808329
> 
> 赞同：1
> 
> 时间：2012-10-09T20:57:38.393
> 
> 标签：c#, .net, class, events, event-handling

假设我有一个仅用于指定 C# 事件的类，并且我在我的应用程序中传递了这个类。

```
public class MyEvents
{
    public event MyEventHandler OnBeforeSomeAction;
    public event MyEventHandler OnSomeAction;
} 
```

为了调用这些事件，调用必须来自类本身。让其他类`MyEvents`在传递到应用程序时触发这些事件的简单方法是创建公共触发函数。

```
public class MyEvents
{
    public event MyEventHandler OnBeforeSomeAction;
    public event MyEventHandler OnSomeAction;

    public void TriggerOnBeforeSomeAction()
    {
        OnBeforeSomeAction();
    }

    public void TriggerOnSomeAction()
    {
        OnSomeAction();
    }
} 
```

但是，如果这个类上有很多事件，那么也必须有很多触发方法。有没有办法使用反射来获取事件并触发它？像这样的东西：

```
public class MyEvents
{
    public event MyEventHandler OnBeforeSomeAction;
    public event MyEventHandler OnSomeAction;

    public void TriggerEvent(string eventName)
    {
        var event = // some magic reflection.
        event.Invoke();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:17:13.667

正是你想要的 - 取自[这个精彩的页面](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/44b0d573-5c53-47b0-8e85-6056cbae95b0)......

```
 public void TriggerEvent(string handler, EventArgs e)
    {
        MulticastDelegate eventDelegate =
              (MulticastDelegate)this.GetType().GetField(handler,
               System.Reflection.BindingFlags.Instance |
               System.Reflection.BindingFlags.NonPublic).GetValue(this);

        Delegate[] delegates = eventDelegate.GetInvocationList();

        foreach (Delegate dlg in delegates)
        {
            dlg.Method.Invoke(dlg.Target, new object[] { this, e });
        } 
    } 
```

# .net - 在 C# 中验证 ini 文件的最简单方法是什么？

> ID：12808332
> 
> 赞同：2
> 
> 时间：2012-10-09T20:57:45.363
> 
> 标签：.net, ini

我的程序的一部分涉及从 INI 文件保存和加载设置。最终用户可以在程序中编辑 INI 文件。我的问题是：在程序保存新文件之前，是否有一种简单的方法可以确保我的 INI 文件有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:04:37.700

INI 文件已弃用，您需要自行检查其结构的正确性。
更好地使用配置设置或简单的 XML 文件。
但是，如果您真的坚持这种格式，我可以建议在此链接[INI-Parser](http://code.google.com/p/ini-parser/)找到一个免费库。
这个库还有一个“宽松的语法解析器”，它允许读取和使用不正式的正确 INI 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:09:46.653

您可以手动检查每个值，看看它是否包含正确的值我知道周围有自制的解析器，但我自己是 Windows 内核解析器的忠实粉丝。

[http://www.ehow.com/how_5154834_write-ini-files-c.html](http://www.ehow.com/how_5154834_write-ini-files-c.html)

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T01:27:10.493

我决定编写自己的验证。我在等待这个响应时想出了并编写了解析，验证很简单。

# image - 无法使用 cfcontent 流式传输 tiff 图像

> ID：12808333
> 
> 赞同：0
> 
> 时间：2012-10-09T20:57:45.370
> 
> 标签：image, coldfusion, streaming

我们正在使用 cfcontent 从 Web 根目录外部流式传输图像。jpeg、png 和 gif 都可以正确流式传输，但我无法获取任何 tiff 文件流式传输。我得到了损坏的图像图标，即使我可以看到文件位于正确的位置并且文件名已正确存储并且正在正确传递。

代码非常简单——显示页面有

```
 <img src="?file=common/includes/displayPhoto.cfm&thisImage=someImage.tiff" /> 
```

和 displayPhoto.cfm 有

```
<cfcontent type = "image/*" file = "#imagePath#" deleteFile = "No"> 
```

其中#imagePath# 具有完全限定的文件路径。

我很茫然——我的朋友谷歌让我失望了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:13:36.740

你可能做对了。问题是*大多数浏览器不支持 TIFF*。唯一支持的浏览器（不是所有的 TIFF 格式！）是 Safari。

在 Firefox、Internet Explorer、Google Chrome、Opera 等上，您总是会看到损坏的图像图标 - 因为对于浏览器而言，该图像确实是“损坏的”，无法理解。

另请参阅[在所有 Web 浏览器中显示 TIFF 图像](https://stackoverflow.com/questions/2176991/display-tiff-image-in-all-web-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:54:51.027

您的 URL 实际上是错误的：您有 something.cfm&x=y。在 URL 中，您以问号开头：something.cfm?x=y。

# php - Drupal 7 entityforms 模块：如何使用 php 获取字段的值？

> ID：12808340
> 
> 赞同：2
> 
> 时间：2012-10-09T20:58:32.950
> 
> 标签：php, drupal, drupal-7, drupal-entities

我正在使用 entityform 模块来捕获一些用户提交的数据[http://drupal.org/project/entityform](http://drupal.org/project/entityform)

我需要将一些实体字段值拉入我的模板之一。我试图用一些适用于常规节点字段的代码来做到这一点。

```
<?php echo $node->field_title[$node->language]['value']; ?> 
```

我试过了..

```
<?php echo $entity->field_title[$node->language]['value']; ?> 
```

但这不起作用。有人对我如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:44:37.840

```
<?php
    $field_data = field_get_items('entityform',$entityform,'field_title');
    echo render(field_view_value('entityform',$entityform,'field_title',$field_data));
?> 
```

[field_get_items 文档](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_get_items/7)，[field_view_value 文档](http://api.drupal.org/api/drupal/modules!field!field.module/function/field_view_value/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T01:58:51.380

如果你知道提交的 entityform_id，你可以像这样加载它：

```
entity_load('entityform', $entityform_id); 
```

# qt - Windows 下 Qt 中的异常 (mingw)

> ID：12808342
> 
> 赞同：0
> 
> 时间：2012-10-09T20:58:35.867
> 
> 标签：qt, exception, static, mingw

我正在编写一个使用 Qt 的应用程序，我想让 Windows 用户可以使用它。我正在使用mingw。我想用 -exceptions 和 -static 配置 Qt。这可能吗？我在博客上发现了一篇文章，指出使用 mingw 和异常的静态构建会导致内存泄漏： [http ://blog.lugru.com/2010/04/static-qt-compilation-and-mingwm10-dll-mingw -混乱/](http://blog.lugru.com/2010/04/static-qt-compilation-and-mingwm10-dll-mingw-confusion/)

我的一些代码抛出异常，应该在我的代码的 GUI 部分通过显示错误对话框来处理（意思是：我不想从我的代码中删除所有异常）。

我尝试使用 -static 和 -exceptions 构建 Qt，但它似乎不起作用（当我尝试编译代码时，我仍然收到有关异常的错误消息）。我不会排除我以某种方式搞砸的可能性，但如果这些选项是互斥的，那么在我花一整天时间再次编译 Qt 之前知道会很高兴。谢谢！

# templates - angularjs：更新多个视口的首选方式

> ID：12808345
> 
> 赞同：0
> 
> 时间：2012-10-09T20:58:46.757
> 
> 标签：templates, angularjs

我正在寻找 angularjs 的方式来：

在使用内容更新页面正文时：

*   使用警报更新共享标头
*   用东西更新共享页脚

我看不到一个简单的方法来做到这一点，因为您可以将 ng-view 属性放在单个元素上，但我不希望该元素成为标签，因为我希望有一个共享的页眉和页脚，可以在多个页面之间重用。

* * *

基本上来自 jinja 模板继承，如何将其转换为 angularjs？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:01:51.483

我想你可以利用`ng-include`来放置页眉和页脚。 `ng-view`用于根据 url 路径变化的部分。

# asp.net-web-api - WebApi 传递的数据为空

> ID：12808348
> 
> 赞同：1
> 
> 时间：2012-10-09T20:59:09.267
> 
> 标签：asp.net-web-api

控制器代码：

```
[HttpPost]
public void UpdateClient(Client client)
{  
   // Rest of code
} 
```

客户端代码：

```
 $.ajax({
            url: "api/client/UpdateClient",
            type: 'post',
            contentType: 'application/json',
            data: "{client: " + ko.toJSON(model.selectedClient()) + "}",
            success: function (result) {
                getClients();
                $("#loader").hide();
            },
            failure: function (result) {
                alert(result.d);
                $("#loader").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("An error occurred, please try again.");
                $("#loader").hide();
            }
        }); 
```

无论出于何种原因，尽管检查了 model.selectedClient() 是否正常并且 ko.toJSON 正在工作，但参数“client”始终为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:22:46.660

我认为您不需要将“客户端”填充添加到您的数据中。尝试将数据设置为：ko.toJSON(model.selectedClient())

当我的客户端类如下所示时，“客户端”参数为我正确绑定了模型：

```
public class Client
{
    public string Name { get; set; }
    public string Company { get; set; }
} 
```

...我的 ajax 看起来像这样：

```
 $.ajax({
            url: "api/values/UpdateClient",
            type: "post",
            contentType: 'application/json',
            data: "{ 'Name': 'John', 'Company': 'ABC'}"
        }); 
```

# c# - dll名称附带的版本号是怎么回事？

> ID：12808351
> 
> 赞同：0
> 
> 时间：2012-10-09T20:59:29.940
> 
> 标签：c#, visual-studio-2010, naming-conventions, filenames

我正在寻找有关如何使用其中的数字命名程序集的指南。

1.  例如 msvcp100.dll 或 msvcp90.dll，为什么要附上版本号？
2.  他们是如何得出这些数字的？这些是否适用于 .NET 程序集？
3.  微软或其他人是否有任何关于文件命名约定的可靠指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:03:48.993

您提供的有关 msvcp 的示例是因为它们是重大修订更改。很可能，msvcp100 的接口与 msvcp90 的接口不兼容。这些数字来自 Visual Studio 的版本（msvcp100 用于 Visual Studio 10.0 aka VS2010，msvcp90 用于 Visual Studio 9.0 aka VS2008）。

一般规则是，如果您破坏了接口，则添加一个数字或对 dll 的名称进行一些更改。在 .net 中，这意味着删除公共类/接口、方法以及在字段和属性之间进行更改。

还应该提到的是，由于“dll地狱”，操作系统将为您处理很多dll版本的问题（无需编号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:05:56.200

> 例如 msvcp100.dll 或 msvcp90.dll，为什么要附上版本号？

消费者可以*立即*看到他使用的二进制文件的版本。

> 他们是如何得出这些数字的？这些是否适用于 .NET 程序集？

数字的含义取决于*架构师*、*开发团队*。对于消费者来说，知道该版本`X`解决了理想的问题（错误）或与其他东西兼容就足够了。这里与`.NET`世界没有任何关系，这些只是文件名，所以**是**的，你可以`.NET`用同样的方式命名你的程序集。

> 微软或某人对文件的命名约定是否有任何可靠的指导方针？

我也不知道。

# xml - Cascades 3.9 - 制作容器滚动

> ID：12808353
> 
> 赞同：2
> 
> 时间：2012-10-09T20:59:49.630
> 
> 标签：xml, scroll, scrollview, cascade

我正在使用 cascades 3.9，并且很难制作容器滚动。这是我视觉中的代码。

```
<stackLayout id="parent_container" dockLayout.halign="center"
             y="60"
             height="{contentHeight}"
             width="{contentWidth}"
             >

     <gridLayout columns="2" width="{contentWidth}" id="want_scroll">

       <text string="First Name" />
       <text string="First name goes here" font="{@csm.fc.font.h4}" />

       <text string="Last Name" />
       <text string="Last name goes here" font="{@csm.fc.font.h4}" />

       // more items, causing the height to be more than that of the parent

     </gridLayout> 
```

我希望“want_scroll”能够滚动，因为它的高度大于 {contentHeight}，即“parent_container”的高度。我认为将“want_scroll”包装在 scrollView 中，将 pointer.scrollable 设置为 true 就可以了。但这样做没有任何区别。

```
 <scrollView pointer.scrollable="true">
     <gridLayout columns="2" width="{contentWidth}" id="want_scroll">

       <text string="First Name" />
       <text string="First name goes here" font="{@csm.fc.font.h4}" />

       <text string="Last Name" />
       <text string="Last name goes here" font="{@csm.fc.font.h4}" />

       // more items, causing the height to be more than that of the parent

     </gridLayout>
  </scrollView> 
```

如何将滚动添加到一个简单的容器？

请注意，通过滚动，我只希望容器可以滚动，我的问题不是关于在右侧显示滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:22:01.043

您还需要设置 ScrollView 的大小，以便它知道何时滚动。这是一个例子：

```
import bb.cascades 1.0

Page {
     content: Container {
             layout: StackLayout {  }
             ScrollView {
                   content: Container {
                                          layout: StackLayout { }
                                          Label {
                                                text: "Start"
                                          }
                          //snip...  A bunch more labels would go here...

                                         Label {
                                                text: "End"
                                         }
                                  }
                   minWidth: 500
                   minHeight: 1280
           }
      }
} 
```

# sql - “WHERE X IN (...)”的 SQL 限制

> ID：12808358
> 
> 赞同：2
> 
> 时间：2012-10-09T21:00:07.897
> 
> 标签：sql, tsql, sql-server-2000

我有一些数据想从我们的 SQL 服务器中提取出来。

这个旧数据库没有与之关联的任何主键，因此提取数据就像查询 Excel 电子表格（它实际上起源于几年前）。

不过，我需要对此数据运行报告。

目前，我获得了给定时间段内不同序列号的列表，然后提取给定序列号的所有记录。对于 1 个月的时间范围，这可以是 1500 到 3000 个序列号。序列号字段的格式为`char(20)`，即使序列号只有 15 个字符长。

**开始更新**

*   此表中通常有 5 到 15 个条目，每个`Serial_Number`.
*   最多有 10 台机器向该表写入数据，因此`Date_Time`可能有相同的值

**结束更新**

此过程需要一段时间，但在列表中的不同序列号之间，我可以使用进度条更新 Windows 窗体，以便管理层知道正在发生的事情以及预计需要多长时间。

我总是试图让这个查询运行得更快。

现在，我正在考虑使用以下`WHERE`子句提取我需要的数据：

```
SELECT Col1, Col2, Col3
FROM Table1
WHERE Serial_Number IN (
  SELECT DISTINCT Serial_Number
  FROM Table1
  WHERE Date_Time Between @startDate AND @endDate
) 
```

我的问题是：我会遇到什么问题，特别是因为我们在给定的时间范围内有这么多不同的序列号。

而且，当然，您知道管理部门的某个人会在无聊时尝试运行一年的数据！然后，他们将尝试运行自耶稣出生以来的数据，只是因为他们没有更好的事情可做。

**重述问题：**`WHERE`子句的方法是否有限制`IN`我可以传入的项目数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:05:23.987

Table1 中的索引 Serial_Number 和 Date_Time（具有单独的索引，而不是单个复合索引），这对您来说应该表现得相当好，除非表真的非常巨大。

使用 Serial_Number 上的一个索引和 (Date_Time, Serial_Number) 上的第二个索引可能会加快速度。第二个索引覆盖子查询，允许仅从索引中回答它。

注意：我建议使用不需要唯一性的索引，而不是主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:06:51.147

好吧，在没有索引的幼稚情况下（听起来像是您的情况），您将不得不扫描所有行`Table1`以执行`DISTINCT`on`Serial_Number`无论如何。所以我不确定它会对你有多大帮助。

我强烈推荐以下内容：

*   使用执行计划来确定查询中发生了什么，以及
*   使用该信息添加一些相关索引以加快您的操作。

就我们在​​这里看到的情况而言，这听起来很`Date_Time`适合在`Table1`.

编辑：

要制作我上面描述的非唯一聚集索引，您可以使用以下内容：

```
CREATE CLUSTERED INDEX IX_Table1_Date_Time
ON Table1 (Date_Time) 
```

（来自[http://msdn.microsoft.com/en-us/library/aa258260(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258260(v=sql.80).aspx)）

这将重新排序您的表，以便所有行都按 Date_Time 顺序排序。根据您运行的查询的确切类型，对执行计划的进一步处理将有助于识别可能对您的性能有很大帮助的其他索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:15:40.577

老实说，我认为该`WHERE`条款没有任何好处。

您使用昂贵的内部查询，但不对结果做任何有意义的事情。我什至没有看到你`Serial_Number`在任何地方得到结果。但是，根据您的问题，听起来您确实需要它。

我认为不需要`DISTINCT`关键字 for `Serial_Number`，因为在外部查询的结果中不会消除重复项。

这样做有什么问题？

```
SELECT Serial_Number, Col1, Col2, Col3
FROM Table1
WHERE Date_Time Between @startDate AND @endDate 
```

这应该与您的原始查询执行相同的操作。但它会消除昂贵的嵌套查询。

只需放置一个索引`Date_Time`，它应该可以工作。这也将消除对索引的需要`Serial_Number`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T19:05:38.233

显然，**没有办法知道**可以的最大长度是多少`WHERE X IN (...)`。

目前，这就是答案。

如果在稍后的某个时间点，有人出现并发现相反的东西，请发布该答案，我会这样标记。

谢谢，乔

# django - 使用 ModelResource 时出错：无法设置属性

> ID：12808362
> 
> 赞同：0
> 
> 时间：2012-10-09T21:00:15.877
> 
> 标签：django, django-rest-framework

我无法解决这个错误......我正在使用[restframework2](https://github.com/tomchristie/django-rest-framework/tree/restframework2)分支。

我做错了什么，还是restframework2代码中的错误？

这是我的代码：

*资源.py*

```
class TemplateHoursSerializer(serializers.ModelSerializer):
    class Meta:
        model = TemplateHours
        nested = True

    start = HourField()
    end = HourField()
    employee = EmployeeSerializer()

class TemplateHoursResource(ModelResource):
    model = TemplateHours
    serializer_class = TemplateHoursSerializer 
```

*网址.py*

```
url(r'^api/template-hours/$', TemplateHoursResource.as_view(actions={
    'get': 'list',
    'post': 'create'
})),
url(r'^api/template-hours/(?P<pk>[0-9]+)/$', TemplateHoursResource.as_view(actions={
    'get': 'retrieve',
    'put': 'update',
    'delete': 'destroy'
})),
... 
```

当我访问（或 POST 到）`http://127.0.0.1:8000/api/template-hours/`时，我收到此错误并回溯：

```
AttributeError at /api/template-hours/
can't set attribute
Request Method: GET
Request URL:    http://127.0.0.1:8000/api/template-hours/
Django Version: 1.4.1
Exception Type: AttributeError
Exception Value:    
can't set attribute
Exception Location: C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-    packages\rest_framework\resources.py in wrapped, line 13
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.2
Python Path:    
['C:\\Users\\Mathieu\\Development\\django_projects\\hedron\\Scripts',
 'C:\\Python27\\lib\\site-packages\\setuptools-0.6c12dev_r88846-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\virtualenv-1.7.1.2-py2.7.egg',
 'C:\\Users\\Mathieu\\Development\\django_projects\\hedron\\Lib\\site-packages',
 'C:\\Users\\Mathieu\\Development\\django_projects\\hedron\\hedron',
 'C:\\Python27\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages',
 path(u'C:\\Users\\Mathieu\\Development\\django_projects\\hedron'),
 path(u'C:\\Users\\Mathieu\\Development\\django_projects\\hedron\\hedron\\apps'),
 path(u'C:\\Users\\Mathieu\\Development\\django_projects\\hedron\\hedron\\libs')]
Server time:    di, 9 Okt 2012 22:46:50 +0200

Traceback:
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\django\core\handlers\base.py" in get_response
  111\. response = callback(request, *callback_args, **callback_kwargs)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\resources.py" in view
  48\. return self.dispatch(request, *args, **kwargs)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\django\views\decorators\csrf.py" in wrapped_view
  77\. return view_func(*args, **kwargs)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\views.py" in dispatch
  324\. response = self.handle_exception(exc)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\views.py" in dispatch
  321\. response = handler(request, *args, **kwargs)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\resources.py" in list
  74\. return self.root_view().list(request, args, kwargs)
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\resources.py" in root_view
  68\. return wrapped(self, self.root_class())
File "C:\Users\Mathieu\Development\django_projects\hedron\Lib\site-packages\rest_framework\resources.py" in wrapped
  13\. setattr(dest, attr, getattr(source, attr))

Exception Type: AttributeError at /api/template-hours/
Exception Value: can't set attribute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:26:28.390

REST framework 2 [beta of] 中尚未完成/支持资源和路由器。它们上的文档是我希望设计看起来像的占位符，但我今天将从索引中删除它们。希望他们能在 2.0 中使用它，但我认为它根本不是必需的，因为您可以使用 Views 和显式 URLconfs 完成所需的一切。资源和路由器只是给你一个有用的捷径。

# macos - AV Foundation 中的第三方编解码器

> ID：12808363
> 
> 赞同：2
> 
> 时间：2012-10-09T21:00:18.177
> 
> 标签：macos, avfoundation, foundation

我的印象是 AV Foundation 不支持第三方编解码器。如果我尝试在我的应用程序中打开 Avid DNxHD QuickTime 电影，它不会像预期的那样工作。

但是，如果我在 QuickTime Player X（也使用 AVF）中打开 DNxHD 电影，它会打开并正常播放，甚至在“信息”窗口中说它是 DNxHD。

有谁知道苹果是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:30:15.210

我相信 QuickTime Player X 建立在 QT X 之上，而不是建立在 AVF 之上。事实上，我认为它使用（类似于）QTKit，如果需要打开仅受 32 位编解码器支持的文件，它将启动一个 32 位代理进程。

您可以通过 QTKit 框架访问 QT X，如果您在打开文件时指定“仅播放”属性，但您只能播放它（正如标志所暗示的那样！）。即使枚举轨道的数量也会失败。如果您未指定仅播放，那么您将仅限于 QT7 组件，如果您的应用程序是 64 位，则通过 32 位代理访问。

# python - （K-means 聚类）numpy 数组中的 (0,0,...0) 是什么意思？什么可能导致无效划分？

> ID：12808364
> 
> 赞同：0
> 
> 时间：2012-10-09T21:00:17.630
> 
> 标签：python, numpy, preprocessor, artificial-intelligence

好的，如果您想知道这个 numpy 数组是如何创建的，请查看这些问题

*   [如何将项目添加到 collection.Counter？然后将它们分类到 ASC 中？](https://stackoverflow.com/questions/12739318/how-can-i-add-items-to-collection-counter-and-then-sort-them-into-asc)
*   [Porter Stemmer 算法没有返回预期的输出？当修改成def](https://stackoverflow.com/questions/12683932/porter-stemmer-algorithm-not-returning-the-expected-output-when-modified-into-d)

假设我有一个`numpy array`看起来像的（[在预处理之后](http://csgo.co.nz/06005586/lingspam.py)从这个创建的，下面的数组也被 numpy 打乱了，所以结果是随机的）

```
[[ 3  2  2 ...,  0  0  0]
 [14  1  0 ...,  0  0  0]
 [ 3  2  1 ...,  0  0  0]
 ..., 
 [ 1  1  1 ...,  0  0  0]
 [ 2  2  2 ...,  0  0  0]
 [ 1  1  0 ...,  0  0  0]] 
```

我知道数据很大，它包含 600 封电子邮件（每封电子邮件由大约 2000 个单词组成），每封电子邮件中包含来自互联网的 196 个常见垃圾邮件单词的统计信息。

我想在评论中声明的[Stephen Marsland K-Means Neurel Network](http://www-ist.massey.ac.nz/smarsland/Code/9/kmeansnet.py)*`"won't work if (0,0,...0) is in data"`*中使用它，但我不确定这条评论指的是什么？（我认为该`...`符号与数学中的符号相同，例如`1...n`，1 和 n 之间有东西）。如果它意味着别的东西，我应该如何解决无效划分的问题？谢谢！

我不确定，但我的数据集中的某些东西导致了这个错误

```
RuntimeWarning: invalid value encountered in divide data = transpose(transpose(data)/normalisers) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:04:41.947

只是表示有`...,`太多数据要一次打印到控制台。我认为您链接到的代码中的注释意味着如果您的数据中有任何全零向量，则预处理将不起作用。

`True`如果您有任何全零特征向量，则将返回以下内容...

```
np.any(data.sum(1) == 0) 
```

...假设您的行是数据示例，而您的列是特征。

这是正在发生的事情：

```
>>> from numpy import *
>>> data = array([[0,0,0],[1,2,3],[1,0,1]])
>>> normalisers = sqrt(sum(data**2,axis=1))*ones((1,shape(data)[0]))
>>> normalisers
array([[ 0\.        ,  3.74165739,  1.41421356]]) 
```

然后你除以零。

```
>>> data = transpose(transpose(data)/normalisers) 
```

一种选择可能是在预处理步骤之前简单地为每个特征添加一个：

```
data += 1 
```

# kml - 是否可以在 Google 地球中为多条 KML (gpx) 路线设置动画

> ID：12808368
> 
> 赞同：2
> 
> 时间：2012-10-09T21:00:34.590
> 
> 标签：kml, google-earth, gpx

我想将多个 gpx 文件导入 Google 地球并同时为它们制作动画。我一次只能制作一个动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:06:58.573

我一直在按照您的意愿进行帆船比赛跟踪。

到目前为止的进步很大——

1.  使用智能手机作为每艘船上的 .gpx 数据记录器（Android 的“GPS Essentials”和 iPhone 的“MyTracks”（不是“Mapmytracks”），两者都是免费的。

2.  在比赛结束时，我们通过电子邮件将 .gpx 文件通过 tools/GPS/import 导入 GoogEarth。因为它们都是卫星时间，所以并发是完美的和自动的。

3.  每个轨道都出现在临时位置窗口中，可以在其中重命名，路径+图标颜色更改等等。

4.  将每个小船文件移动（通过拖动）到该比赛的一个文件夹中。创建它们的“游览”，然后右键单击父文件夹以通过电子邮件发送整个节目的 .kmz。

壮观。

# java - JFrame子看不到父widgits

> ID：12808370
> 
> 赞同：1
> 
> 时间：2012-10-09T21:00:37.170
> 
> 标签：java, swing, oop

我有一个带有一些变量和一些 SWING 小部件的 JFrame 应用程序。在其中，我创建了另一个类的实例并将 JFrame 传递给构造函数中的子级。从孩子那里，我可以引用变量，但不能引用小部件。为什么？

```
 // My JFrame
 public class Prot2Prom extends JFrame  {

    // My Child
    public Prot2Prom() {
    super( "Protocol To PROM" );
        Child child = new Child(this); 
```

在 Child 类中，我的构造函数执行

```
 Prot2Prom frame = null;

 public Child(Prot2Prom gui) {
    frame = gui;
 } 
```

以下作品：

```
 frame.<parent variable>=x; 
```

以下没有：

```
 frame.textArea.append("Hello"); 
```

无法解析 textArea。都加了“新”。为什么我看不到他们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:16:55.707

一些注意事项和建议：

*   这与“小部件”或 Swing 无关，都与变量的可见性有关。我猜这`textArea`不是 Prot2Prom 类的*公共*领域。
*   如果变量是公共的，外部类可以“看到”它们，访问它们，修改它们。
*   一个可能的解决方案是实际上将您希望其他类看到的变量公开。
*   一般来说，你真的**不想**这样做。
*   相反，更好的是为类提供允许其他类调用的公共方法，并通过这样做来改变原始类的行为。换句话说，您的 Swing GUI 类应该像任何 Java 类一样遵守良好的 OOP 原则。
*   稍后您会想要阅读 MVC 或**模型****、**视图**、**控制设计模式，将代码的行为分离为单独的逻辑实体，这可以使您的代码更加灵活和强大。

 ****编辑 1**
关于您的评论：

> “小部件”都是由 WindowsBuilder Pro 创建的。我正在尝试使用 textArea 为独立（jar）应用程序创建我的 Eclipse 控制台。如何从 Frame 实例化的类中打印到它？

您需要为保存 textArea 变量的类提供一个公共方法：

```
public void appendTextAreaText(String text) {
  textArea.append(text);
} 
```

然后您的其他类可以将文本附加到 JTextArea。为什么这很重要？一个原因是，如果持有 textArea 的类有时不希望其他类能够附加到这个小部件，它可以有逻辑在方法中控制它。因此，它为持有它的类提供了对小部件的更多控制。

例如，

```
public void appendTextAreaText(String text) {
  if (allowTextAreaAppend) {  // a class boolean field 
    textArea.append(text);
  }
} 
```

顺便说一句，我还建议您将代码生成工具放在一边，而是手动创建您的 Swing GUI，直到您牢牢掌握 Swing 和 Java 基础知识。这将使您将来更好地使用 Swing 代码生成工具并提高生产力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:26:47.260

> textArea 无法解析

此消息表明在 中没有调用成员类`textArea`变量`Prot2Prom`。这可能是一个错字。也许该变量`textarea`仅在构造函数范围内被本地调用或定义。

工作你的课看起来像这样

```
public class Prot2Prom extends JFrame {

    JTextArea textArea = new JTextArea();
    ... 
```

在父组件中更新文本的一种更好的方法是创建一个`Prot2Prom`这样的方法：

```
public void addText(String text) {
   textArea.append(text);
} 
```

这提供了对如何将文本添加到`JTextArea`.**

# asp.net - 如何使用 asp.net 管理工具 (AspNetSqlMembershipProvider) 对子域进行身份验证？

> ID：12808377
> 
> 赞同：0
> 
> 时间：2012-10-09T21:01:30.843
> 
> 标签：asp.net, authentication, subdomain

我在不同的子域上有五个客户。他们目前都在后端使用 AspNetSqlMembershipProvider 登录。使用当前设置，如果他们知道其他客户端的子域名，他们就可以获取彼此的数据。有没有办法限制每个人使用 ASP.NET ADMIN 工具登录到他们自己的子域？？？

我唯一的想法是为每个子域\客户端创建一个单独的 AspNetSqlMembershipProvider 数据库并将 WebConfig 指向它，但这似乎很浪费。想知道是否有一种方法可以在不为每个客户创建单独的数据库的情况下实现目标？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:19:29.237

如果每个子域都有单独的应用程序，则可以使用 web.config 中的[SqlMembershipProvider.ApplicationName 属性](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.applicationname.aspx)来区分它们。这将阻止客户端从一个应用程序登录到另一个应用程序。

# asp.net - ASP.Net 获取值 ArgumentOutOfRangeException 引发

> ID：12808381
> 
> 赞同：0
> 
> 时间：2012-10-09T21:01:41.547
> 
> 标签：asp.net, gridview

我正在尝试遍历gridview并一次保存其中的所有项目。但是，我从下拉列表和文本框中获取值时遇到问题。每次我都会收到此错误：

```
ArgumentOutOfRangeException was caught. Specified argument was out of the range of valid values. 
```

这是我正在使用的代码：

```
foreach (GridViewRow gvr in gvInvalidOrgs.Rows)
{
   try
    {
     org_code = Convert.ToInt32(gvr.Cells[0].Text);
     division = ((DropDownList)gvr.Cells[1].Controls[0]).SelectedValue;
     org_description = (((TextBox)gvr.Cells[2].Controls[0]).Text);
    }
    ...
} 
```

如果重要的话，文本框和下拉列表都是在行绑定上动态创建的。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:26:14.133

如果不确切知道异常发生在哪一行，就很难以同样的精度进行诊断，但可能发生的情况是您正在寻找一个没有任何控件的单元格中的控件。

这怎么可能发生？好吧，由于您在 中创建控件`RowDataBound`，如果您不在每个回发上绑定您的网格（我不建议您这样做），您的动态添加的控件将不会在回发时重新创建。发布的数据将包含这些控件的值，而 ViewState 将包含这些控件的数据，但如果您不在每次回发时重新创建这些控件，那么当您尝试访问它们的值时，这些控件将不存在。

但是您不必重新绑定即可重新创建控件。正如 Schmelter 先生在他的评论中所说，如果您将控件的创建从事件处理程序`RowDataBound`移至`RowCreated`事件处理程序，它们将在回发时重新创建网格行时创建。

# excel - Excel输出文章列表

> ID：12808383
> 
> 赞同：0
> 
> 时间：2012-10-09T21:01:45.883
> 
> 标签：excel, excel-formula

我在 Excel 中使用文章文件。我会让它包含文章编号（例如 1001）和这篇文章的数量。问题是：我想把所有文章放在一行中，用逗号分隔，我解释一下：

如果我有一个带有数量的列和一个带有文章编号的列，我想要一个输出如下的单元格： 3 article's 1001 给出： 1001, 1001, 1001 。

我有大约 1000 篇文章，现在我正在使用：=IF(B3=0, "", B3=1, "1001", B3=2, "1001, 1001")，但正如你所看到的那样不行。

我很抱歉解释，我蹩脚的英语真的很难；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:28:45.800

根据你的例子，我相信这个公式会帮助你：

```
=REPT("1001,",B3) 
```

**更新每条评论**

要动态使用 C3，请使用连接字符`&`

```
=REPT(C3 & ",", B3) 
```

其内容为：将 的值`C3`与 相连接`,`，然后重复该`B3`次。

# caching - 关于使用 HashMap 和 Linked List 组合的 LRU Cache 设计

> ID：12808387
> 
> 赞同：0
> 
> 时间：2012-10-09T21:02:05.383
> 
> 标签：caching, data-structures, map, hashmap, lru

参考[LRU缓存设计](https://stackoverflow.com/questions/2504178/lru-cache-design/)

我有一个关于答案的问题。

假设我的哈希映射已满（面试官给了我一个最大尺寸）[我知道如果我需要获取映射中已经存在的一对，我会将列表条目移到前面以指示最近使用。]

但是，如果我有一个要添加的条目并且这个键散列到与不同键相同的位置怎么办。（碰撞）我该怎么办？

我做链接或探测吗？如果我进行链接，我应该增加地图大小吗？如果我删除最旧的条目，它会清空我的哈希图中的一个位置。但是一个新条目可能不会散列到这个位置？它可能会散列到另一个完整条目？（不同的键，值对）如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:16:16.230

这种设计将不包括链接，因为我们在这里设计一个直接映射缓存，并且这种折衷是已知的，直接映射缓存只考虑条目在从缓存中删除之前的新近度，而不是被请求的频率。

最大大小限制将施加在链表大小上，并且每次我们在链表已满时尝试添加新条目时，都会删除最后使用的条目（链表）和相应的映射条目。要插入新条目的位置与删除的内容无关。

有关并发的更多详细信息，请查看[此](http://code.google.com/p/concurrentlinkedhashmap/wiki/Design)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:19:30.867

map 的大小是 Map 中存在的键值对的数量，因此它与键值对是否存在于相同的哈希桶中或不同的哈希桶中无关。
因此，如果您检查 hashmap 的数据结构，它的链表数组，那么当存在哈希冲突时，就会出现链接，并且映射的大小也会增加。
现在，如果您的新条目散列到不为空的位置，您需要像我们在链接列表中那样进行链接。

PS：对于 LRU Cache 你可以看到[LinkedHashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29)

# java - Spring 3.1 和 Hibernate 4：“HibernateException: No Session found for current thread”从单元测试调用 DAO 方法时

> ID：12808388
> 
> 赞同：0
> 
> 时间：2012-10-09T21:02:04.667
> 
> 标签：java, spring, hibernate, unit-testing, exception

我正在使用 Spring 3.1 和 Hibernate 4.1，当我运行存储库测试时，我目前遇到以下异常：

```
Caused by: org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041) 
```

这是 DAO 的样子。它使用基本上其他人都在使用的相同泛型 dao 模式：

```
@Repository
public class UserRepository extends RepositorySupport<User> {

    public UserRepository() {
        super(User.class);
    }

    public User findByUsername(final String username) {
        Query query = getCurrentSession().createQuery(
            "from User user " +
            "where user.username = :username"
        );

        return (User) query.setParameter("username", username)
            .uniqueResult();
    } 
```

我通常不会做的唯一不同是我不再使用`getHibernateTemplate()`- 这就是为什么我怀疑事情不工作。如果可以避免，我宁愿不使用这种方法，因为生成的代码看起来很糟糕。

我的休眠 bean 看起来像这样：

```
<bean id="sessionFactory"
      class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="mappingResources">
        <list>
            <value>hibernate/tag.hbm.xml</value>
            <value>hibernate/address.hbm.xml</value>
            <value>hibernate/user.hbm.xml</value>
        </list>
    </property>
    <property name="namingStrategy">
        <bean class="org.hibernate.cfg.ImprovedNamingStrategy"/>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="javax.persistence.validation.mode">none</prop>

            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}
            </prop>
            <prop key="hibernate.generate_statistics">false</prop>

            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.format_sql">true</prop>

            <prop key="hibernate.cache.use_second_level_cache">false</prop>
            <prop key="hibernate.cache.provider_class">

            </prop>
        </props>
    </property>
</bean>

<bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>

<bean id="transactionManager"
      class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<!--
<bean id="hibernateInterceptor"
      class="org.springframework.orm.hibernate4.HibernateInterceptor">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
-->

<tx:advice id="transactionAdvice" transaction-manager="transactionManager">
    <tx:attributes>
        <tx:method name="find*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="get*" read-only="true" propagation="REQUIRED"/>
        <tx:method name="*" propagation="REQUIRED"/>
    </tx:attributes>
</tx:advice>

<aop:config>
    <aop:advisor advice-ref="transactionAdvice"
                 pointcut="execution(* *..service.*.*(..))" order="1"/>
    <!-- gets sub packages like service.user -->
    <aop:advisor advice-ref="transactionAdvice"
                 pointcut="execution(* *..service.*.*.*(..))" order="2"/>
</aop:config>

<bean id="validator"
      class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>

<context:annotation-config/>
<context:spring-configured/>
<context:component-scan base-package="com.realtywebsite.repositories,com.realtywebsite.service"/>

<task:annotation-driven /> 
```

我的测试代码看起来像这样（我必须将其展平，因为我的测试是从一个公共父测试类扩展而来的）：

```
@ContextConfiguration(locations = {
    ObjectMother.APPLICATION_CONTEXT,
    ObjectMother.WEB_CONTEXT
})
public abstract class DatabaseTest extends AbstractTransactionalJUnit4SpringContextTests {

    @Test
    public void delete() {
        userRepository.delete(1);
        flush();

        assertFalse(userRepository.exists(1));
    }

    ... 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:11:23.337

该类`AbstractTransactionalJUnit4SpringContextTests`已弃用。

你有两个选择：

*   延伸自`AbstractTransactionalJUnit4SpringContextTests`, 或
*   使用`SpringJUnit4ClassRunner`（然后你需要附加`@Transactional`）

*我希望这能解决问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:18:43.583

我从休眠 3 迁移到休眠 4 时遇到了这样的问题。简而言之，没有提供者可以打开休眠会话并将其绑定到当前线程。所以 sessionFactory 将没有 currentSession （因为它存储在 ThreadLocal 变量中）。对于 Web 应用程序，最流行的解决方法是使用[OpenSessionInViewInterceptor](http://static.springsource.org/spring/docs/1.1.4/api/org/springframework/orm/hibernate/support/OpenSessionInViewInterceptor.html)或[OpenSessionInViewFilter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/support/OpenSessionInViewFilter.html)。在您的情况下，我建议您自己编写。[这是一个例子。](http://thediningphilosopher.blogspot.com/2008/10/hibernate-session-and-transaction-with.html)

# magento - 如何为每个产品单独打折？

> ID：12808390
> 
> 赞同：0
> 
> 时间：2012-10-09T21:02:14.853
> 
> 标签：magento, magento-1.5

我需要为每个产品单独做一些折扣，我知道 magento 促销车会这样做，但我需要对产品做再见自定义属性。

我在我的产品上添加了一个自定义属性，例如 Discount Amout，店主将在其中放置 50% 之类的东西，并且取决于付款方式，它是否会被应用。

所以，概括一下......我从我的商店里拿任何产品，然后去细节，会有一个“折扣”字段，我把 50% 放在那里。此折扣仅在客户选择“Paypal”付款方式时有效。所以，在我结帐时，我需要检查客户选择的付款方式，并在产品上打折，但我需要我的评论显示“折扣 - 50 美元”，因为我可以更改那部分的价格。但不能在评论时将其放在折扣字段中。

我太需要它了，在那个问题上浪费了我的时间。

提前Thks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:10:04.057

您是否尝试过促销 - 购物车价格规则 - 条件 - 购物车属性 - 付款方式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:51:05.797

我明白了......有了这个：[http ://www.excellencemagentoblog.com/magento-add-fee-discount-order-total?facebook=1](http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total?facebook=1)

Ty ExcellenceMagentoBlog，节省了我的时间。

# java - 由于使用泛型和注释，在 maven 中调用“mvn install”时出错

> ID：12808394
> 
> 赞同：1
> 
> 时间：2012-10-09T21:02:43.860
> 
> 标签：java, maven, deployment, maven-2

> **可能重复：**
> [maven：（使用 -source 5 或更高版本来启用静态导入声明）](https://stackoverflow.com/questions/2451268/maven-use-source-5-or-higher-to-enable-static-import-declarations)

我需要做些什么来解决 Maven 中的这个错误（还有更多，我只是复制了顶部）。

**一个关键信息似乎是：**

> 无法解析错误消息：（使用 -source 5 或更高版本启用注释）

但我尝试添加`-source 5`到命令中，但它无法识别它。我是否需要在某处编辑配置文件以说明要使用的 Java 版本或类似的内容？

**这是错误：**

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

C:\SVN-atx-Ingestion\branches\atx-ingestion\src\main\java\com\somecompany\eikon\atx\ingestion\database\atxAtomickosXaDataSource.java:[115,4] error: annotations are not supported in -source 1.3

could not parse error message:   (use -source 5 or higher to enable annotations)
C:\SVN-atx-Ingestion\branches\atx-ingestion\src\main\java\com\somecompany\eikon\atx\ingestion\database\atxAtomickosNonXaDataSource.java:47: error: annotations are not supported in -source 1.3
        @Override
         ^

could not parse error message:   (use -source 5 or higher to enable annotations)
C:\SVN-atx-Ingestion\branches\atx-ingestion\src\main\java\com\somecompany\eikon\atx\ingestion\database\XaDatabase.java:29: error: generics are not supported in -source 1.3
        private final Map<String,atxAtomickosXaDataSource> map = 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:07:02.940

我认为你需要做这样的事情：

```
 <build>
    <plugins>
             ...
                        <plugin>
                                <groupId>org.apache.maven.plugins</groupId>
                                <artifactId>maven-compiler-plugin</artifactId>
                                <configuration>
                                        <source>1.6</source>
                                        <target>1.6</target>
                                </configuration>
                        </plugin>
    </plugins>
  </build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:07:37.153

您需要在 pom 中添加标志作为配置：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
         </plugin> 
```

[参考网站](http://maven.apache.org/plugins/maven-compiler-plugin/howto.html)

# ios - XCode 使用不存在的 sqlite 数据库

> ID：12808397
> 
> 赞同：2
> 
> 时间：2012-10-09T21:03:15.913
> 
> 标签：ios, xcode

我正在我的项目中打开一个 SQLite 数据库。我将此数据库放在项目的“支持文件”文件夹中。我在某个时间点删除了 sqlite 数据库并用更新的版本替换它。

我注意到它似乎使用的是旧版本。为了证明我从“支持文件”中删除了数据库，重命名了我的 sqlite 文件并再次将其放在那里。

从理论上讲，Xcode 应该无法再找到数据库了，但它仍然可以愉快地使用旧数据库。

我尝试了各种“清洁”，但问题仍然存在。

有人对我有什么建议吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T21:09:31.507

运行时将 sqlite 的版本复制到模拟器/物理设备。

卸载应用程序并再次运行它，它应该将新版本复制到模拟器/设备

# php - WP_Query - meta_value_num 没有影响

> ID：12808400
> 
> 赞同：0
> 
> 时间：2012-10-09T21:03:32.667
> 
> 标签：php, wordpress, wordpress-theming

我有一个查询，它返回我所有的自定义帖子类型，按正确的字段排序。我现在要做的是为其添加一个过滤器；我要介绍的唯一新项目是 meta_compare 和 meta_value_num 字段。

这是我的查询的样子：

```
array(9) {
    ["post_type"]=> string(16) "my_custom_post_type"
    ["post_status"]=> string(7) "publish"
    ["posts_per_page"]=> int(9)
    ["paged"]=> int(2)
    ["meta_key"]=> string(3) "age"
    ["meta_value_num"]=> array(2) {
        [0]=> int(3)
        [1]=> int(4)
    }
    ["meta_compare"]=> string(1) "="
    ["orderby"]=> string(14) "meta_value_num"
    ["order"]=> string(3) "ASC"
} 
```

即使我将 meta_value_num 设为单个 int，而不是数组，它仍然始终返回所有项目，而不仅仅是指定年龄的项目。

**更新**

根据下面的建议，我也尝试过这个数组，但也没有运气。它仍然返回自定义帖子类型的所有帖子。

```
array(5) {
    ["post_type"]=>string(16) "my_custom_post_type"
    ["post_status"]=>string(7) "publish"
    ["posts_per_page"]=>int(9)
    ["paged"]=>int(0)
    ["meta_query"]=>array(4) {
        ["key"]=>string(3) "age"
        ["value"]=>array(3) {
            [0]=>int(2)
            [1]=>int(3)
            [2]=>int(4)
        }
        ["compare"]=>string(2) "IN"
        ["type"]=>string(7) "NUMERIC"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:56:39.480

我不确定，但您可以尝试更改您的查询：

```
$args = array(
    'post_type' => 'my_custom_post_type',
    'post_status' => 'publish',
    'post_per_page' => 9,
    'paged' => 2,
    'meta_query' => array(
        'key' => 'age',
        'value' => array(3, 4),
        'compare' => 'IN',
    ),
    'orderby' => 'meta_value_num',
    'order' => 'ASC',
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:12:32.873

'meta_query' 必须是一个数组。该数组包含一个具有键、值和比较（以及可选类型）的数组。这允许 meta_query 在其中包含多个查询（例如 age=5，color=red）。

所以这不起作用的原因是 meta_query 必须有两个数组。

```
array(8) {
    ["post_type"]=>string(16) "myartlab_gallery"
    ["post_status"]=>string(7) "publish"
    ["posts_per_page"]=>int(9)
    ["paged"]=>int(2)
    ["meta_key"]=>string(3) "age"
    ["orderby"]=>string(14) "meta_value_num"
    ["order"]=>string(3) "ASC"
    ["meta_query"]=>array(1) {
        [0]=>array(4) {
            ["key"]=>string(3) "age"
            ["value"]=>array(3) {
                [0]=>int(4)
                [1]=>int(5)
                [2]=>int(6)
            }
            ["compare"]=>string(2) "IN"
            ["type"]=>string(7) "NUMERIC"
        }
    }
} 
```

# java - 开发 Jenkins 构建后插件

> ID：12808401
> 
> 赞同：6
> 
> 时间：2012-10-09T21:03:33.823
> 
> 标签：java, jenkins, hudson, jenkins-plugins, post-build

我目前正在开发一个从 Jenkins 构建中检索结果的简单插件。我正在扩展通知程序并使用`build.getResults()`它来获取信息。但是，当我上传插件时，我无法将其设置为构建后操作。
当我运行构建时，它们会中断，`build.getResults()`因为我试图在构建仍在运行时获得结果。

我该怎么做才能正确获得构建结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:22:37.073

最好的办法是查看[使用通知器扩展点的现有插件](https://wiki.jenkins-ci.org/display/JENKINS/Extension+points#Extensionpoints-hudson.tasks.Notifier)（单击以展开实现插件列表）。

检查您是否具有描述符实现（内部）类以及 config.jelly。还要检查 jenkins.out 和 jenkins.err 日志是否有任何异常（例如格式错误的 config.jelly）。

编辑：实际上，这个插件的 Notifier 子类看起来很简单，因为 Notifiers 去：[https](https://wiki.jenkins-ci.org/display/JENKINS/The+Continuous+Integration+Game+plugin) ://wiki.jenkins-ci.org/display/JENKINS/The+Continuous+Integration+Game+plugin ，尤其是它的[GamePublisher.java](https://github.com/jenkinsci/ci-game-plugin/blob/master/src/main/java/hudson/plugins/cigame/GamePublisher.java)和相应的[config.jelly](https://github.com/jenkinsci/ci-game-plugin/blob/master/src/main/resources/hudson/plugins/cigame/GamePublisher/config.jelly)，它是[GameDescriptor.java](https://github.com/jenkinsci/ci-game-plugin/blob/master/src/main/java/hudson/plugins/cigame/GameDescriptor.java)，它已经成为一个完整的外部类（通常描述符是内部类）。此外，如果您想在 Jenkins 的全局配置中添加选项，则需要[global.jelly](https://github.com/jenkinsci/ci-game-plugin/blob/master/src/main/resources/hudson/plugins/cigame/GamePublisher/global.jelly)，但如果您没有此类选项，则可以省略（与 config.jelly 不同，Notifier 必须拥有它，即使它是空的，就像这里一样）。

作为一般说明，当事情不工作时真的很烦人，并且您没有收到任何错误，詹金斯根本不会显示您的东西......如果您只想让事情为您工作，请使用 Groovy构建步骤可能更容易，但如果你想让事情为他人工作，那么做一个像样的完整插件会减少支持请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:06:55.610

既然这听起来很简单，你确定你需要一个插件吗？看看使用[Groovy Postbuild 步骤](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)代替；它们更容易编写。链接中有一些很好的用法示例。如果你决定你真的需要一个插件，看看你是否可以扩展现有的而不是自己编写；这是理解 Jenkins 插件编写的来龙去脉的一种更简单的方法。

# java - 解析 XML 时将子节点与控件值进行比较

> ID：12808405
> 
> 赞同：1
> 
> 时间：2012-10-09T21:04:04.657
> 
> 标签：java, xml, xml-parsing

我有一个这样组织的 XML 文件，每个节点下的项目总是按字母顺序排列：

```
<xml>
    <node id="2">
        <jack>Jack wrote this.</jack>
        <john>John wrote this.</john>
    </node>

    <node id="4">
        <jack>Jack wrote this.</jack>
        <jill>Jill wrote this.</jill>
    </node>

    <node id="9">
        <jack>Jack wrote this.</jack>
        <james>James wrote this.</james>
        <jill>Jill wrote this.</jill>
        <john>John wrote this.</john>
    </node>
</xml> 
```

如您所见，并非所有名称都在每个节点下。例如，在 中`<node id="4">`，John 和 James 没有写任何东西。对于上面的示例，我希望我的程序返回如下内容：

```
James did not write 2, 4
Jill did not write 2
John did not write 4 
```

我需要跟踪谁没有写什么。我目前正在解析这样的文档：

```
private static String getTagValue(final Element element)
{
    String theId="";
    if (element.getTagName().startsWith("node")){

        theId = element.getAttribute("id");
        return theId;
    }
    return theId;
}

private static void readXML(String fileName){

    for (int index = 0; index < nodeList.getLength(); index++){

                Node node = nodeList.item(index);
                Element element = (Element) node;

                if (node.getNodeType() == Node.ELEMENT_NODE){

                    // This prints the node id
                    if(getTagValue(element)!=""){
                        System.out.println(getTagValue(element)+" = I am the node id number!");
                    }

                    // This prints the name
                    else{
                        System.out.println(element.getTagName()+" = I am the name!");
                    }
                }
            }
} 
```

我想做的是以某种方式将每个节点下的元素与包含所有名称的“控制”列表进行比较，如果它不包含名称，它会返回名称及其父节点。

实际上，我处理的 XML 要大得多，因此性能很重要，但概念是相同的。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:18:29.507

保持两套。一个是所有名称的主集 ( `A`)。第二个是您在每次迭代中建立的一组回答问题的人 ( `B`)。那么没有回答的人会是`A - B`，你可以这样做[`Collection#removeAll(Collection c)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#removeAll%28java.util.Collection%29)：

```
A.removeAll(B); 
```

您提到您想在一行中打印出一个人没有回答的答案。为此，您可以维护一个映射 ( `Map<String, List<Integer>>`)，将一个人的姓名映射到他们没有回答的问题编号列表中。您可以通过`A.removeAll(B)`在一次迭代结束时检查 的结果来做到这一点。

因此，一旦您完成了对所有节点的循环，您最终会得到一张地图，该地图为您提供与他们未回答的问题列表相关联的每个名称。然后，您可以遍历此地图并打印出您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:19:41.450

从功能的角度来看，我会说功能可能如下：

*   For Each Node 节点获取 xml 文件中的所有子节点
*   将每个子节点的名称与对照样本节点名称进行比较
*   如果节点名称匹配，则中断子循环
*   如果在控制组的 for 循环完成之前名称不匹配，则找不到控制组的打印语句名称

# c# - 在 asp.net 会员提供商中登录尝试和锁定帐户帐户的最佳做法是什么

> ID：12808413
> 
> 赞同：0
> 
> 时间：2012-10-09T21:04:37.183
> 
> 标签：c#, asp.net, asp.net-mvc-3

当我测试我的应用程序时，我意识到在 5 次登录尝试后，开箱即用的会员服务提供商将锁定您的帐户。用户如何解锁他的帐户？标准流程只是向管理员发送电子邮件吗？或者有什么我可以建立的形式吗？电子邮件确认链接？基本上，处理多次失败登录尝试的最佳实践。我已将数量增加到 10，而且我没有安装秘密问答，希望避免使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:17:35.973

为了严格的安全性 - 我建议在最低限度的负担得起的尝试后通过电子邮件锁定给管理员。

对于不太严格的安全要求 - 内存锁定。以半小时为例。如果用户在内存中被锁定两次 - 进行硬锁定（需要一些会员资格提供者定制）。

还有另一种选择 - 在锁定后提供带有秘密问题的重置选项。用户通知成功发送给他后，解除锁定。

# python - 拆分列表中的项目

> ID：12808420
> 
> 赞同：7
> 
> 时间：2012-10-09T21:04:55.110
> 
> 标签：python, list, split

我怎样才能打开以下列表

```
['1','2','A,B,C,D','7','8'] 
```

进入

`['1','2','A','B','C','D','7','8']`

以最蟒蛇的方式？

我有非常 unpythonic 的代码创建嵌套列表，然后奉承：

```
sum ( [ word.split(',') for word in words ], [] ) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T21:09:22.230

```
result = [item for word in words for item in word.split(',')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T21:07:52.620

```
In [1]: from itertools import chain

In [2]: lis=['1','2','A,B,C,D','7','8']

In [5]: list(chain(*(x.split(',') for x in lis)))
Out[5]: ['1', '2', 'A', 'B', 'C', 'D', '7', '8'] 
```

进一步减少不需要的`split()`电话：

```
In [7]: list(chain(*(x.split(',') if ',' in x else x for x in lis)))
Out[7]: ['1', '2', 'A', 'B', 'C', 'D', '7', '8'] 
```

使用`map()`：

```
In [8]: list(chain(*map(lambda x:x.split(','),lis)))
Out[8]: ['1', '2', 'A', 'B', 'C', 'D', '7', '8']

In [9]: list(chain(*map(lambda x:x.split(',') if ',' in x else x,lis)))
Out[9]: ['1', '2', 'A', 'B', 'C', 'D', '7', '8'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:27:19.760

```
 k=k=['1','2','A,B,C,D','7','8']
      m=[i for v in k for i in v if i!=","] 
```

# html - facebook facepile 生成器代码未呈现深色方案

> ID：12808421
> 
> 赞同：0
> 
> 时间：2012-10-09T21:04:56.617
> 
> 标签：html, css, facebook

我在这里使用 Facebook 的代码生成器：http: [//developers.facebook.com/docs/reference/plugins/facepile/](http://developers.facebook.com/docs/reference/plugins/facepile/)

如果我使用“深色”配色方案，它就不起作用。

结果如下： [http ://chovy.dyndns.org/test/fb.htm](http://chovy.dyndns.org/test/fb.htm)

这是生成的不起作用的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-facepile" data-href="http://www.facebook.com/google" data-max-rows="3" data-width="400" data-colorscheme="dark"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:16:26.527

如说明中所述：*此脚本使用您应用的应用 ID。*您将需要更换它所说的部分`&appId=`。

例子：

`js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=127593403996233";`

# wcf - WCF 服务的 REST 和托管

> ID：12808424
> 
> 赞同：0
> 
> 时间：2012-10-09T21:05:11.630
> 
> 标签：wcf, rest, .net-4.0

我正在开发 WCF 服务（VS2010，.NET 4.0）。如果在 WCF 服务中我使用 REST 类型的功能（即用 WebGet 等装饰我的方法），由于 REST 大量利用 HTTP 协议，我是否被锁定为将 WCF 服务托管为 HTTP - 即我是否可以选择以网络托管.tcp ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:28:40.217

简短的回答 - 是的，除非您想编写自己的 HTTP 堆栈模拟。
Tcp有什么特别的需要吗？

# reporting-services - SSRS 恒定组高

> ID：12808428
> 
> 赞同：1
> 
> 时间：2012-10-09T21:05:24.567
> 
> 标签：reporting-services, ssrs-2008, ssrs-grouping

在我的报告中，我有一个带有内部细节组的组。

```
Group
     details
more of the group 
```

我需要在每页上设置 3 个组，并且每个组都需要正确排列。每个组成员可以有 1 到 4 行。当每行有 4 行时，它们会完美排列，但是当行数较少时，一切都会向上移动。

有没有办法为组定义一个静态高度，这样如果少于 4 行，它会用空格填充，这样组的底部就在同一个地方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:24:16.413

我认为只要您的详细信息少于 4 行，您就需要创建一个空白行。尝试在您的详细信息行表达式文本框中创建一个 iif 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:05:55.850

尝试在矩形内插入表格。将矩形的高度保持在您想要的高度（4 行的高度）。这样，如果表格的行数较少，矩形的高度仍将保持不变。

因此，如果您将每个表格放在一个矩形中并如上所述定义它，我认为它应该可以工作。当我已经知道最大行数时，总是对我有用。

# excel - 如何从外部粘贴excel文件

> ID：12808431
> 
> 赞同：-1
> 
> 时间：2012-10-09T21:06:01.120
> 
> 标签：excel, vba

我在将值粘贴到我的 excel 中时遇到问题，我有 2 张表 1 和 2。在表 1 中我放置了我的按钮，文本字段我有一个获取 excel 文件的浏览器，我想将该 excel 文件粘贴到表中2.

目前我可以浏览并选择文件，但我无法将信息粘贴到表 2 中，任何人都可以帮助我。

```
Dim fileStr As String
Sub GetOpenFile()

fileStr = Application.GetOpenFilename()
Worksheets("Sheet2").TextBox1.Value = fileStr

End Sub
Sub Button3_Click()

Workbooks.Open fileStr

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:43:48.443

尝试这个：

```
Sub Button3_Click()
Dim fileStr As String, wbk1 as workbook, wbk2 as workbook

fileStr = Application.GetOpenFilename()

set wbk1=activeworkbook
set wbk2=Workbooks.Open (fileStr)

wbk2.sheets(1).cells.copy wbk1.Worksheets("Sheet2").cells(1,1)

End Sub 
```

# jquery - 外部 jQuery 根本没有执行

> ID：12808434
> 
> 赞同：0
> 
> 时间：2012-10-09T21:06:16.653
> 
> 标签：jquery, firebug, external

当下面的代码被放置在`<script></script>`运行页面的标签内时，它完全可以工作。此后，出于组织目的，我将代码移到了外部`.js`文件中，这导致代码停止工作-应该触发某些事件时没有任何反应。我确保脚本包含在给定页面上，此外，我通过“view-source”确保链接有效（当我单击脚本的路径时，脚本会在新窗口中加载）。

脚本声明：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="js/main.js"></script> 
```

那么，我的 JS 在这个外部文件中是什么样子的呢？

```
(function(){

$('#display-reply-box').click(function(){
    $(this).hide();
    $('#submit-reply-wrapper').show();
});

})(jQuery); 
```

我删除了大多数可读性方法，但这就是文件的设置方式。我确保控制台中没有 .js 错误，但是，我确实收到了以下关于 jQuery 和 Firelite 的错误

`Failed to load resource: the server responded with a status of 404 (Not Found) http://getfirebug.com/releases/lite/skin/xp/pixel_transparent.gif Failed to load resource: the server responded with a status of 405 (Method Not Allowed) http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js`

我认为上述错误与我遇到的问题有关，尽管我没有运气让它们消失。有时错误存在，有时则不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:11:19.360

似乎您正试图在可能尚未加载到 DOM 中的元素上运行某些东西。尝试将其包装在 DOM Ready 事件处理程序中，如下所示：

```
(function($) {
    $(document).ready(function() {
        $('#display-reply-box').click(function(){
            $(this).hide();
            $('#submit-reply-wrapper').show();
        });
    });
})(jQuery); 
```

# progress-4gl - 同时更新和读键？

> ID：12808437
> 
> 赞同：1
> 
> 时间：2012-10-09T21:06:22.340
> 
> 标签：progress-4gl

在我正在构建的应用程序中，我希望第一个屏幕是整数的更新，但我希望可以选择按 F2 来访问程序中的不同类型的功能。

当我以合乎逻辑的方式尝试它时，我感到很兴奋，因为 UPDATE 只需要 INTEGER 输入，而我正在按 F2。

你能同时成功地 UPDATE 和 READKEY 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:41:08.173

您正在尝试使用编辑块的旧方式进行操作 - 尝试阅读事件驱动编程，其中代码描述事件以及发生特定事件时运行的内容。代码看起来像这样：

```
ON F2 of update-field
   DO: /* something */
   END.

UPDATE update-field. 
```

更好的是，不要使用“更新”，而是使用“等待”。

# c# - 存储对非静态方法的引用

> ID：12808446
> 
> 赞同：3
> 
> 时间：2012-10-09T21:06:56.187
> 
> 标签：c#, .net, delegates

我正在尝试创建一个值集合，每个值对应于一个动作。这样，我将能够在集合中搜索特定值，然后以通用方式调用关联的操作。

所以，这是我的第一次尝试：

```
public class CommandInfo
{
    public string Name { get; set; }
    public Action<RunArgument> Action { get; set; }
}

public class MyClass
{
    public List<CommandInfo> Commands = new List<CommandInfo>
    {
        new CommandInfo { Name = "abc", Action = AbcAction } // <== ERROR HERE
    };

    public void AbcAction(RunArgument arg)
    {
        ; // Do something useful here
    }
} 
```

`CommandInfo`在这种情况下，`Commands`集合中 new 的声明给了我错误：

> 字段初始值设定项不能引用非静态字段、方法或属性“MyNameSpace.MyClass.AbcAction(MyNameSpace.RunArgument)”

当然，必须有一种方法来存储对像这样的非静态方法的引用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T21:11:46.193

> 当然，必须有一种方法来存储对像这样的非静态方法的引用。有人可以帮我吗？

有，只是不在字段初始化程序中。所以这很好用：

```
public List<CommandInfo> Commands = new List<CommandInfo>();

public MyClass()
{
    Commands.Add(new CommandInfo { Name = "abc",
                                   Action = AbcAction });
} 
```

...或在构造函数中执行整个赋值。请注意，这实际上与代表没有任何关系 - 这是偶然的，基于您实际上指的是`this.AbcAction`. 在其他所有方面，它都相当于这个问题：

```
public class Foo
{
    int x = 10;
    int y = this.x; // This has the same problem...
} 
```

（我希望你没有*真正*的公共领域，当然......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T21:11:20.380

问题不在于您不能存储对非静态成员的引用，而在于您不能在字段初始值设定项中引用非静态成员。字段初始值设定项只能引用静态或常量值。将初始化移动`Commands`到构造函数，它将起作用。

```
public class CommandInfo
{
    public string Name { get; set; }
    public Action<RunArgument> Action { get; set; }
}

public class MyClass
{
    public List<CommandInfo> Commands;

    public MyClass 
    {
        Commands = new List<CommandInfo>
        {
            new CommandInfo { Name = "abc", Action = AbcAction }
        };
    }

    public void AbcAction(RunArgument arg)
    {
        ; // Do something useful here
    }
} 
```

# c# - OpenFileDialog 在不同的 AppDomain 中不显示

> ID：12808450
> 
> 赞同：1
> 
> 时间：2012-10-09T21:07:07.563
> 
> 标签：c#, .net, appdomain, openfiledialog

我有这个简单的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Timers;
using System.IO;
using Microsoft.Win32;
using System.Xml;

namespace ConsoleApplication1
{
    class Program
    {
        public static void Main(string[] args)
        {
             OpenFileDialog ofd = new OpenFileDialog();
             ofd.ShowDialog();
        }
    }
} 
```

我在单击带有`CSharpCodeProvider`. 然后我将它加载到一个新的`AppDomain`并运行该`Main`方法，但从未显示打开文件对话框。我知道它正在运行，因为我已经对此进行了测试。

尝试卸载域也会导致错误。

如果需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:11:55.290

假设您使用的命名空间反映了应用程序的类型：[您不能像那样使用 OpenFileDialog！](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/cd4795fa-8a7f-419b-bc46-462b35f3a35c)

您是否尝试过在 main 函数之前[添加 [STAThread] ？](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/cd4795fa-8a7f-419b-bc46-462b35f3a35c)

```
[STAThread]
public static void Main(string[] args) 
```

操作系统的几个组件，例如对话框，使用 COM 组件，要与之通信，[需要](https://stackoverflow.com/questions/1361033/what-does-stathread-do)在程序的入口点中具有此属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:10:59.790

您创建的很可能`AppDomain`没有`FileDialogPermission`. 这当然意味着尝试使用 an`OpenFileDialog`将会失败。请参阅[此处](http://msdn.microsoft.com/en-us/library/system.security.permissions.filedialogpermission.aspx)了解更多信息。

# tomcat - Tomcat 可以接受没有 Host 标头的 HTTP 1.1 请求吗？

> ID：12808451
> 
> 赞同：6
> 
> 时间：2012-10-09T21:07:12.567
> 
> 标签：tomcat, bad-request, http-1.1, hostheader

HTTP 1.1 规定：“客户端必须在所有 HTTP/1.1 请求消息中包含 Host 标头字段”

但是，我正在使用的机器发送这个精确的 POST（包含坐标），我无权更改：

```
POST /touch HTTP/1.1
Content-type: application/x-www-form-urlencoded
Content-Length: <n>

x=<int x>&y=<int y> 
```

由于缺少 Host 标头字段， Tomcat 7 立即响应`400 Bad Request`，并且 POST 永远不会到达我的 servlet。有什么办法可以避免此错误响应并使用 servlet 处理 POST 以支持这些旧机器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T21:16:47.533

正如您已经指出的，[HTTP 1.1 规范说](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)（我的粗体）：

> 客户端必须在所有 HTTP/1.1 请求消息中**包含 Host 头字段。**[...] HTTP/1.1 代理必须确保它转发的任何请求消息都包含适当的 Host 标头字段，该字段标识代理正在请求的服务。所有基于 Internet 的 HTTP/1.1 服务器**必须以 400**（错误请求）状态代码响应任何缺少 Host 头字段的 HTTP/1.1 请求消息。

客户端错误地使用了 HTTP 1.1 协议，您不应尝试在服务器端解决该问题。您可以做的是设置一些自定义 HTTP 代理，它只会添加`Host`标头。但这是一个肮脏的解决方法。或者将协议降级到 1.0。

另请注意，即使您设法让 Tomcat 接受此类请求（这违反规范），如果两端之间有任何 HTTP 代理，您仍然会遇到一些问题。

# c# - SmtpClient.SendAsync() 没有收到我发送的所有消息

> ID：12808452
> 
> 赞同：4
> 
> 时间：2012-10-09T21:07:22.223
> 
> 标签：c#, smtpclient

我刚刚编写了一些测试代码，查看 System.Net.Mail.SmtpClient 向自己发送相同的消息。

```
int numClients = 10;
List<SmtpClient> mailClients = new List<SmtpClient>();
for (int i = 0; i < numClients; i++) {
    mailClients.Add(new SmtpClient(smtpHost));
}

MailMessage msg = new MailMessage("myAddress@eg.com", "myAddress@eg.com", "test message", "" );
foreach (SmtpClient c in mailClients) {
    c.SendAsync(msg, null);
} 
```

这一切都很好并且执行没有任何问题，除了我只收到*'n - 1'*消息。即，如果我发送 10 条消息，我的收件箱中只会收到 9 条消息。如果我发送 50 我只会收到 49 等等。

注意：如果我更改代码以使用阻止发送，那么我将始终收到正确数量的消息。例如

```
foreach (SmtpClient c in mailClients) {
    c.Send(msg);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:11:36.607

以下是一些可能有所帮助的观察结果：

*   只创建一个 SmtpClient。
*   而是创建多条消息。
*   SmtpClient 实现 IDisposable。*用*. _
*   MailMessage 还实现了 IDisposable。

我怀疑您可能遇到了多个 SmtpClient 实例的错误/问题，这些实例都包装了同一个 SMTP 服务器。使用单个实例可以解决问题。

**更新**

根据 MSDN：

> 调用 SendAsync 后，您必须等待电子邮件传输完成，然后再尝试使用 Send 或 SendAsync 发送另一封电子邮件。

[http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)

因此，鉴于您的情况，使用 SendAsync 而不是 Send 几乎没有任何好处。您的循环可能会踩到某些东西，因为您不等待之前的 SendAsync 完成。

这里有一些想法：

*   如果您要发送一堆电子邮件，SendAsync 将执行与 Send 几乎相同的操作。只需使用发送。
*   如果您需要并行发送，请使用生产者/消费者模式。一个（或多个）生产线程将内容转储到队列中发送，多个消费线程每个使用一个 SmtpClient 发送消息。使用 BlockingCollection 实现此模式非常简单。请参阅 MSDN [http://msdn.microsoft.com/en-us/library/dd267312.aspx中的示例](http://msdn.microsoft.com/en-us/library/dd267312.aspx)
*   如果您使用足够多的线程，您的 SMTP 服务器将成为瓶颈。请注意何时超载。

# curve-fitting - 沿 Catmull Rom 样条移动

> ID：12808454
> 
> 赞同：0
> 
> 时间：2012-10-09T21:07:40.630
> 
> 标签：curve-fitting

我正在尝试实现一种可视化磁场的方法，经过一番谷歌搜索后，我决定使用 Catmull Rom Splines 创建必要的曲线。然而，我想做的一件事是让箭头沿着线条移动以指示方向。我想我可以通过将参数变量 t 从 0 增加到 1 来做到这一点，然后移动每次使用的 4 个活动点，从而给我每帧都需要的 x、y、z 坐标。我遇到的问题是，考虑到 Catmull Rom 样条曲线的方程，这似乎真的很昂贵（特别是考虑到场景中会有很多线条）。有一个更好的方法吗？抱歉，如果没有很好地解释并提前感谢。

# grails - Grails 域类单元测试

> ID：12808461
> 
> 赞同：1
> 
> 时间：2012-10-09T21:08:18.613
> 
> 标签：grails

当我将单元测试中的默认方法名称 testSomething() 方法重命名为其他名称时，我收到“不可运行”错误消息。我想知道我应该在某处更改设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:26:47.557

如果您使用的是 jUnit 3，这可以帮助您：“使用 JUnit 3，要定义测试，必须将类名命名为 MyClassTest，从 TestCase 扩展，并且所有测试方法名称都以 'test' 开头，如'testMyMethod()'"

[http://java.dzone.com/articles/unit-test-naming-conventions](http://java.dzone.com/articles/unit-test-naming-conventions)

# jquery - 我视图中模型属性的多个值

> ID：12808465
> 
> 赞同：2
> 
> 时间：2012-10-09T21:08:57.510
> 
> 标签：jquery, asp.net-mvc

这让我完全被难住了，所以我想我会四处询问，看看是否有解决方案！

我有一个我目前正在开发的票务系统，其中一个字段是“主要联系人”——代码如下；

```
<tr>
    <td>
        @Html.Label("Client Contact:")
    </td>
    <td>
        @Html.TextBoxFor(model => model.PrimaryContact, new { placeholder = "Primary contact for this ticket." })
        <br />
        @Html.ValidationMessageFor(model => model.PrimaryContact)
    </td>
</tr> 
```

我有一个用户请求一个功能；能够说出他们可以单击的“+”按钮并添加另一个字段（我将通过 javascript 完成此操作。）但是，我需要将 javascript 创建的字段绑定到 Model.PrimaryContact .. 所以本质上，当用户为另一个联系人添加另一个文本框时，它将使“Model.PrimaryContact”的值如下所示：

```
Billy Joe 918-555-5556,Bobby Jane 876-222-3334 
```

然后，当它发布到控制器时，我可以简单地将其插入数据库。

我不太确定这将如何实现，但是我相信我需要某种以逗号分隔的自定义模型绑定器？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:24:32.173

很久以前使用过这种方法：http:
[//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

现在我使用这个：http:
[//blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/](http://blog.stevensanderson.com/2010/07/12/editing-a-variable-length-list-knockout-style/)

希望这些东西会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:29:34.570

将“model.PrimaryContacts”更改为字符串列表`List<string>`并渲染：

```
 <input type="text" id="PrimaryContacts[0]" name="PrimaryContacts[0]" value="" />
    <input type="text" id="PrimaryContacts[1]" name="PrimaryContacts[1]" value="" />
    <input type="text" id="PrimaryContacts[2]" name="PrimaryContacts[2]" value="" />
    <input type="text" id="PrimaryContacts[3]" name="PrimaryContacts[3]" value="" /> 
```

*重要***的是*每个字段的****“名称”属性相同***（id 无关紧要），它们会自动绑定到数组或集合中。**

 ****更新：**

如果我们假设 PrimaryContact 是具有 FirstName、LastName 和 PhoneNumber 属性的对象，那么我们需要在页面上呈现以下标记：

```
 <!-- 1st person -->
    <input type="text" id="[0].FirstName" name="[0].FirstName" value="" />
    <input type="text" id="[0].LastName" name="[0].LastName" value="" />
    <input type="text" id="[0].PhoneNumber" name="[0].PhoneNumber" value="" />
    <!-- 2nd person -->
    <input type="text" id="[1].FirstName" name="[1].FirstName" value="" />
    <input type="text" id="[1].LastName" name="[1].LastName" value="" />
    <input type="text" id="[1].PhoneNumber" name="[1].PhoneNumber" value="" /> 
```

以上将绑定到`List<PrimaryContact>`对象。

**更新 2：**

最后但并非最不重要的一点是，要绑定到`Dictionary<string, PrimaryContact>`你这样做：

```
<!-- 1st person -->
<input type="hidden" id="[0].Key" name="[0].Key" value="1stPersonKey" />
<input type="text" id="[0].FirstName" name="[0].Value.FirstName" value="" />
<input type="text" id="[0].LastName" name="[0].Value.LastName" value="" />
<input type="text" id="[0].PhoneNumber" name="[0].Value.PhoneNumber" value="" />
<!-- 2nd person -->
<input type="hidden" id="[1].Key" name="[1].Key" value="2ndPersonKey" />
<input type="text" id="[1].FirstName" name="[1].Value.FirstName" value="" />
<input type="text" id="[1].LastName" name="[1].Value.LastName" value="" />
<input type="text" id="[1].PhoneNumber" name="[1].Value.PhoneNumber" value="" /> 
```

希望这个对你有帮助**

# sql-server-2008 - 在 SQL Server 数据库中将距离矩阵存储为 VarChar(Max)

> ID：12808471
> 
> 赞同：0
> 
> 时间：2012-10-09T21:09:29.273
> 
> 标签：sql-server-2008, database-design, varcharmax

我正在开发一个车队调度应用程序，并寻找一种有效的方法来存储地理位置之间的距离。

应用程序代码以二维数组的形式访问矩阵*`double[,]`*。

为了使矩阵持久化，我目前将矩阵序列化为字符串。序列化后是这样的：

```
"1 4 9 8 3 6 \n
 5 6 7 9 3 6 \n
 34 4 5 6 6 7 \n" 
```

然后将其存储在`varchar(max)`SQL Server 2008 数据库中的类型列中。但是，我想知道这个字符串是否会变得太大。

假设每个条目都有一位数字并且忽略空格和“\n”，理论上我可以在一个条目中存储大约 46000 个位置的距离（2 147 483 647 的平方根 - 的大小`varchar(max)`）。这在我的上下文中就足够了。

这种方法有什么严重的缺点吗？将距离存储在一个额外的表中会更好吗，其中每一行包含两个位置之间的一个距离？

如果我们的应用程序的 100 个用户分别存储 1000 个位置，那么我将在这样的表中有 100000000 = 100 * 1000 * 1000 行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:21:28.143

您可以将数组压缩成一个 blob 字段。那将是最有效的。与其序列化为字符串，不如压缩为字节数组，反之亦然。

# internationalization - 让 Indy 返回 utf-8 字符串而不是 FPC/Lazarus 中的 ansi 字符串？

> ID：12808474
> 
> 赞同：2
> 
> 时间：2012-10-09T21:09:32.830
> 
> 标签：internationalization, indy, lazarus, freepascal, indy10

是否需要以特定方式设置任何编译器指令或预处理器命令以使 Indy 返回 Utf-8 字符串而不是将它们截断为 Ansi 字符串？如果这很重要，我正在处理的项目上有各种 Delphi 模式标志。

如果我直接将主题行设置为 UTF-8 字符串（如下所示），它会在 GUI 上正确显示，因此正确设置了 utf-8 支持并且我使用了适当的字体和所有这些好东西。为清楚起见，此代码中将主题声明为 Utf8String。

`MailItem.Subject := 'îņŢëŕŃïóЙǟŁ ŜũƥĵεϿד'; //Displays correctly`

但是，如果我从标题中提取相同的主题行，使用 Indy 对其进行解码，我会将每个国际字符替换为恰好一个问号，即应该是字符的数量。看起来它正在将 UTF-8 转换为 ANSI，这不是我想要的。

`MailItem.Subject := IdCoderHeader.DecodeHeader('=?utf-8?B?w67FhsWiw6vFlcWDw6/Ds9CZx5/FgSDFnMWpxqXEtc61z7/Xkw==?='); //Displays '?????????? ???????'`

那么什么事情可能会出错和/或我该如何解决呢？

我使用的是来自 Indy 网站的最新版本的 Indy10，以及 Windows 上的 Lazarus 1.0，所以我认为这不是“我的软件需要更新”错误，我认为这可能是某种配置问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:08:33.050

不，没有可以为此设置的编译器标志。

Indy`AnsiString`在 D2009 之前的 Delphi 和 3.0 之前的 FreePascal 中使用。Indy`UnicodeString`在 Delphi 2009+ 和 FreePascal 3.0+ 中使用。没有选项可以改变这一点。

但是，在 Delphi 和 FreePascal 的非 Unicode 版本中，在 Indy 的某些地方，您可以指示 Indy 将`AnsiString`输入值解释为 UTF-8，并返回 UTF-8 编码的`AnsiString`输出。然而，`DecodeHeader()`不是那些地方之一。

# wpf - 更新列表框而不丢失所选项目，WPF

> ID：12808479
> 
> 赞同：4
> 
> 时间：2012-10-09T21:10:16.980
> 
> 标签：wpf, listbox

列表框每秒更新一次，在工作期间我需要选择其中的一些项目并执行一个命令，这是不可能的，因为列表框已更新并丢失了它的选定项目。

ObservableCollection 是我列表的 ViewModel。

我有一些选择，也许有更好的解决方案：

1.  检测列表中要传播的新项目并将新项目添加到 ObservableCollection 而不重新初始化 ObservableCollection

2.  检测旧项目的变化并在必要时更新它们的字段。

这有点麻烦，虽然不难，但还有其他选择吗？

**更新，我有的解决方案**

我选择了 3-d 部分：在更新开始之前，我保存已排序集合的选定索引并加载新集合并与旧集合进行比较。我知道，这效率不高，但是对于当前的应用程序来说，这非常适合：集合永远不会超过数百个，通常不会超过 100 个。集合的每个元素都支持急切和延迟加载。如果有更改的项目，它们会从服务器加载它们的内容，而其他保持不变。然后我更新可观察的集合，从服务器更新更改的项目并在视图模型中设置选定的索引。手动选择项目解决了更新后失去焦点的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:20:25.483

在更新列表之前保存所选项目的密钥。在新版本的列表中找到它，然后重新选择它。不要依赖原始参考，并允许其他人将其从新列表中删除以供选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T16:40:54.230

如果您更改列表框的 ItemsSource 中项目的顺序，有时会发生这种情况。当您临时删除项目以将其插入其他位置时，WPF 会过早地将 SelectedItem 设置为 null。然后当你重新添加它时，它不会被选中。

这是您可以附加到列表框的行为形式的解决方法。

[http://www.codeproject.com/Tips/802806/Preserve-the-Selected-Item-of-a-WPF-List-Box](http://www.codeproject.com/Tips/802806/Preserve-the-Selected-Item-of-a-WPF-List-Box)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:01:34.893

我正在考虑将您的绑定集合更改为当前集合的新实例。一旦你开始选择项目。完成后将绑定设置回原始集合

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-29T11:36:34.253

如果你

1.  为您的选择添加一个类：

    `<select title="" id="" class="initMySelect"> </select>`

2.  定位类以重新填充选择

来自对象的示例：

```
 var object={
  "6db01de6-a1e8-4ea6-bf01-4562b56468b9": {
    "UID": "6db01de6-a1e8-4ea6-bf01-4562b56468b9",
    "name": "aa",
    "description": "aa"
  },
  "284c3172-268a-4342-d3f0-d00fafd3d482": {
    "UID": "284c3172-268a-4342-d3f0-d00fafd3d482",
    "name": "bb",
    "description": "bb"
  },
  "b124f4df-6caa-43e8-eb97-536076b4832b": {
    "UID": "b124f4df-6caa-43e8-eb97-536076b4832b",
    "name": "cc",
    "description": "cc"
  },
  "c934634a-0775-41bd-d72a-d8900ebcbdd1": {
    "UID": "c934634a-0775-41bd-d72a-d8900ebcbdd1",
    "name": "dd",
    "description": "dd"
  },
  "fb5b8dcb-b9fb-405d-9fcf-3f551727459a": {
    "UID": "fb5b8dcb-b9fb-405d-9fcf-3f551727459a",
    "name": "ee",
    "description": "ee"
  },
  "a98f3449-bb55-46e3-b9ce-f9e2dd6d74a9": {
    "UID": "a98f3449-bb55-46e3-b9ce-f9e2dd6d74a9",
    "name": "ff",
    "description": "ff"
  }
} 
```

```
function initMySelect(value) {
    var options = "";
    var selected = "";

    $.each(object, function(k, v) {
      if (value === v.UID) {
        selected = 'selected = "selected"';
      } else {
        selected = "";
      }
      options += '<option ' + selected + ' value=' + v.UID + '>' + v.name + '</option>';
    });

  $('.initMySelect').html(options);
} 
```

3.  无论您进行什么 CRUD，都会重新初始化该类，这意味着该类将保存所有最新更改。所以在任何添加，更新，删除，exe你的功能之后

```
initMySelect(); 
```

查看您的选择时，选定的索引仍将存在，并且您所做的额外 Crud 更改将出现在您的选择中。4\. 在按钮上添加事件侦听器的功能，将选定的值发送到 initMySelect

```
var el = document.getElementById("repopulateSelect");
el.addEventListener("click", function() {
    initMySelect(document.getElementById("selectTest").value);
}, false); 
```

[JSFiddle 链接：](http://jsfiddle.net/03vn821a/3/)

# asp.net-mvc-3 - 根据下拉列表中的选择动态填充 ASP.NET MVC 3 编辑器模板

> ID：12808480
> 
> 赞同：2
> 
> 时间：2012-10-09T21:10:33.080
> 
> 标签：asp.net-mvc-3, jquery, mvc-editor-templates, asp.net-mvc-partialview

我正在使用 ASP.NET MVC 3，并试图根据下拉列表中的选择动态填充编辑器模板列表。我没有要发布的代码，因为我不确定实现我的目的的最佳方法是什么。我的问题不是如何使用编辑器模板，而是当相关对象列表根据用户对“父”的选择发生变化时如何使用编辑器模板。

**背景**：

员工需要完成他们接受培训的操作的培训清单。员工将从下拉菜单中选择一个清单模板，然后将根据所选清单模板填充清单项目。（每个模板都有一组不同的相关项目。）每个清单项目都与用户必须标记为已完成的空白响应相关联。清单项目仅用于显示；响应是正在编辑的内容。

我知道我可以通过 AJAX 和 Json 填充清单项目，但是有没有办法使用编辑器模板来做到这一点——根据选择的清单模板动态显示清单项目的结果？一种解决方案是使用一个页面选择模板，然后另一个页面显示清单项；我想避免这种情况，如果可能的话，把所有东西都放在一页上。目标是根据所选清单模板填充清单项目（和空白响应）。

**警告**：根据与清单模板相关的项目，每个清单都会有预定义数量的空白回复，因此在填写表格期间清单大小不会改变。

**型号**：

[清单模板] 1------------* [清单项目]

[清单模板] 1------------* [清单]

[清单] 1------------* [清单响应]

[ChecklistResponse] *------------1 [ChecklistItem]

任何和所有的帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:20:40.930

对于这些类型的任务，我建议您查看：http: [//knockoutjs.com/](http://knockoutjs.com/) 在客户端，您可以选择：
1\. 回发到服务器（恕我直言，臭臭的东西）。
2.做一些客户端JS。

Id 更喜欢 Knockout 用于具有模型更改事件的干净 MVVM 方法。用它做了一些非常复杂的编辑器，到目前为止，它的工作就像一个魅力。

# android - 使用“android.util.Base64”和“org.apache.commons.codec.binary.Base64;”的不同编码

> ID：12808484
> 
> 赞同：1
> 
> 时间：2012-10-09T21:10:50.723
> 
> 标签：android, encoding, base64

我正在 Android 中编写一个身份验证服务，这个服务包括一个用 java 编写的服务器部分。我在 Android 和 Server 中执行这两条代码的两个部分都执行相同的操作：

安卓：

```
String genChallengeResponse(String challenge, String message) {
  String Hmac_ALG = "HmacSHA256";
  SecretKey key = new SecretKeySpec(challenge.getBytes(), Hmac_ALG);
  Mac m = Mac.getInstance(Hmac_ALG);
  m.init(key);
  m.update(password.getBytes());
  byte[] mac = m.doFinal();
  return new String(Base64.encode(mac, Base64.DEFAULT));
} 
```

服务器：

```
String genChallengeResponse(String challenge, String message) {
  String Hmac_ALG = "HmacSHA256";
  SecretKey key = new SecretKeySpec(challenge.getBytes(), Hmac_ALG);
  Mac m = Mac.getInstance(Hmac_ALG);
  m.init(key);
  m.update(password.getBytes());
  byte[] mac = m.doFinal();
  return new String(Base64.encodeBase64(mac));
} 
```

从相同的挑战和消息开始，结果如下：

```
安卓：n2EaLpQr0uKgkZKhCQzwuIFeeLjzZKerZcETVNcfla4=
服务器：n2EaLpQr0uKgkZKhCQzwuD9eeLjzZKerZcETVNcfla4=
                              ^^

```

这些仅针对两个字符而有所不同。问题是这种奇怪的行为并没有出现在传递给函数的每一对字符串中......

我尝试在每个系统中使用 UTF-8，但没有任何变化……有人知道问题出在哪里吗？如果这是一个已知问题...

（重要的是，使用 Android 2.2 或 4.0 时问题是一样的，那么问题不在于操作系统，我认为）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:23:43.120

因此无法发表评论作为答案：

几周前我发现 Android 的 Base64 对 Linefeeds 使用不同的设置（在这里查看：http: [//developer.android.com/reference/android/util/Base64.html](http://developer.android.com/reference/android/util/Base64.html)）

我认为在我的情况下它缺少 NO_WRAP。也许其他选项之一（NO_PADDING 或 URL 安全，测试的密码是否包含 + 或 - ？）可能会改变你的结果......

# c# - 在 wp7 上反序列化 JSON 列表

> ID：12808492
> 
> 赞同：-1
> 
> 时间：2012-10-09T21:11:34.767
> 
> 标签：c#, json, windows-phone-7, json.net

我正在尝试在 WP7 上将 JSON api 反序列化为 c#。我需要帮助。我确定它很容易解决，但我不能只看到它。

JSON 数据如下所示。

```
{
"chartDate" : 1349564400, 
"retrieved" : 1349816722, 
"entries" : 
[
    {
        "position" : 1, 
        "previousPosition" : 0, 
        "noWeeks" : 1, 
        "artist" : "Rihanna", 
        "title" : "Diamonds", 
        "change" : 
        {
            "direction" : "none",
            "amount" : 0,
            "actual" : 0
        }
    }, 
```

使用[http://json2csharp.com/转换为以下内容](http://json2csharp.com/)

```
 public class Change
  {
      public string direction { get; set; }
      public int amount { get; set; }
      public int actual { get; set; }
  }

  public class Entry
  {
      public int position { get; set; }
      public int previousPosition { get; set; }
      public int noWeeks { get; set; }
      public string artist { get; set; }
      public string title { get; set; }
      public Change change { get; set; }
  }

  public class RootObject
  {
      public int chartDate { get; set; }
      public int retrieved { get; set; }
      public List<Entry> entries { get; set; }
  } 
```

在应用程序中，当我单击获取提要按钮时，我正在使用以下代码，但它返回错误**无法将 JSON 对象反序列化为类型“System.Collections.Generic.List`1[Appname.RootObject**

以下是我来自 Mainpage.cs 的 C#

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Windows;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Reactive;
using Newtonsoft.Json;

namespace JsonDemo
{
  public partial class MainPage : PhoneApplicationPage
  {
    // Constructor
    public MainPage()
    {
  InitializeComponent();
}

private void Load_Click(object sender, RoutedEventArgs e)
{
  var w = new SharpGIS.GZipWebClient();
  Observable.FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted")
    .Subscribe(r =>
    {
        var deserialized = JsonConvert.DeserializeObject<List<RootObject>>(r.EventArgs.Result);
      PhoneList.ItemsSource = deserialized;
    });
  w.DownloadStringAsync(new Uri("http://apiurl.co.uk/labs/json/"));
} 
```

} }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:26:28.023

如果`r.EventArgs.Result`返回有问题的（*正确*的）json，这应该有效：

```
var deserialized = JsonConvert.DeserializeObject<RootObject>(r.EventArgs.Result); 
```

**- 编辑 -**

```
string json = @"{
    ""chartDate"": 1349564400,
    ""retrieved"": 1349816722,
    ""entries"": [{
        ""position"": 1,
        ""previousPosition"": 0,
        ""noWeeks"": 1,
        ""artist"": ""Rihanna"",
        ""title"": ""Diamonds"",
        ""change"": {
            ""direction"": ""none"",
            ""amount"": 0,
            ""actual"": 0
        }
    }]
    }";

var deserialized = JsonConvert.DeserializeObject<RootObject>(json); 
```

# svn - SVN 结帐时无法读取状态行错误

> ID：12808500
> 
> 赞同：11
> 
> 时间：2012-10-09T21:12:12.983
> 
> 标签：svn, connection

我曾经能够在工作时从我们的 SVN 存储库中签出/签入。然后，由于一些问题，我对 OS X 10.8 进行了全新安装。其他一切都很棒，但现在我无法查看或更新。这里没有其他人遇到问题。

这是我得到的错误：

> svn：' [http](http://subversion.myhost.com/svn/repository/trunk) ://subversion.myhost.com/svn/repository/trunk'的选项：无法读取状态行：服务器已关闭连接（[http://subversion.myhost.com](http://subversion.myhost.com)）

在过去的几天里，我做了很多谷歌搜索，但没有发现任何有用的信息。信息最丰富的页面在这里：[SVN：无法读取状态行：连接已被服务器关闭](https://stackoverflow.com/questions/613149/svn-could-not-read-status-line-connection-was-closed-by-server)

我试过的东西：

*   更改 http -> https -> svn（拒绝连接到 https/svn）
*   检查代理/防火墙阻塞（找不到任何东西——但也许我错过了什么？）
*   从 Web 界面加载存储库（可以正常浏览，但仍然无法签出）
*   更新颠覆（使用来自 Xcode 4.5 的 svn）然后通过 macports 安装 svn（1.6.18）（仍然得到同样的错误）
*   在 ~/.subversion 中擦除了我的颠覆偏好
*   双/三/四+检查网址（每次都一样）
*   从完全不同的异地存储库中签出东西（得到相同的错误）
*   喝了很多山露并希望获得灵感（变得紧张，但没有其他任何改变）

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:40:38.193

我也被这个烫伤了；感谢您指出罪魁祸首（该死的 VPN 客户端）的方向。**我注意到即使在禁用**VPN 连接的情况下它也会这样做，以免你认为你可以通过很好地询问来阻止它与你的网络堆栈搞砸！

你在哪里发现它是客户？我将不得不与我的 IT 团队一起解决这个问题，所以很好奇那里还有什么其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T08:27:07.600

我找到了一个可行的解决方案，可以将 SVN 客户端与适用于 Apple Mac OS X 10.9.x 的 Cisco Any Connect 客户端 3.1.x 一起使用。

总之，卸载 Cisco Any Connect 网络安全模块。

问题和解决方案摘要发布于

超级用户 - 从 MacBook 连接时出现 SVN 错误

[https://superuser.com/a/704711](https://superuser.com/a/704711)

并且在

超级用户 - SVN 连接不成功

[https://superuser.com/a/579485](https://superuser.com/a/579485)

*   蒂姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T08:12:18.593

如果存储库位于防火墙后面并且您需要 VPN 客户端进行连接怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T09:43:31.267

我遇到了同样的问题，但我们使用的是瞻博网络 VPN。关闭所有 VPN 进程有助于解决它。

# javascript - MVC 4 应用程序中的动态背景图像

> ID：12808501
> 
> 赞同：5
> 
> 时间：2012-10-09T21:12:15.497
> 
> 标签：javascript, jquery, css, asp.net-mvc, background-image

我正在尝试为我的 MVC 应用程序选择一个随机背景图像。在我的 _Layout.cshtml 中，我有以下代码：

```
<script type="text/javascript">
    var background = ['url("~/Content/images/image1.jpg")',
            'url("~/Content/images/image2.jpg")',
            'url("~/Content/images/image3.jpg")',
            'url("~/Content/images/image4.jpg")',
            'url("~/Content/images/image5.jpg")'];

    $(document).ready(function () {
        PickRandomBackground();
    });

    function PickRandomBackground() {
        var index = Math.floor(Math.random() * 5);
        $('html').css('background-image', background[index])
    }
</script> 
```

最终发生的是找不到图像。我的 site.css 位于 Content 文件夹中，如果我在那里定义图像如下：

```
html {
    background-image: url("images/image1.jpg");
    background-position:center;
    background-repeat: no-repeat;
    background-color: #e2e2e2;
    margin: 0;
    padding: 0;
} 
```

然后它会正确找到它，但是如果我在我的 javascript ( `.css('background-image', 'url("images/image1.jpg")`) 中执行相同的定义，它不会。我的想法不多了，所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T21:38:47.923

您的背景数组以错误的方式组成。在 .cshtml 文件中，它应该如下所示：

```
var background = ['@Url.Content("~/Content/images/image1.jpg")',
    '@Url.Content("~/Content/images/image2.jpg")',
    '@Url.Content("~/Content/images/image3.jpg")',
    '@Url.Content("~/Content/images/image4.jpg")',
    '@Url.Content("~/Content/images/image5.jpg")']; 
```

这样 Url.Content(...) 函数会将路径解析为正确的字符串。检查浏览器页面上呈现的内容。

啊，然后你可以用'url（）'换成css。

```
$('html').css('background-image', 'url(' + background[index] + ')') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T21:14:12.370

你需要给出没有路径`~`

```
url("/Content/images/image1.jpg") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T22:10:11.983

也许为每个背景图像添加一个 css 类，然后使用：

```
$('html').attr('class', 'image4'); 
```

...更改背景图像。

# ruby-on-rails - Rails如何返回具有特定question_id的答案列表

> ID：12808502
> 
> 赞同：0
> 
> 时间：2012-10-09T21:12:19.210
> 
> 标签：ruby-on-rails, list, return

假设我有两个模型、答案和问题（还有其他模型，但与问题无关）。型号如下：

答案.rb

```
class Answer < ActiveRecord::Base
  attr_accessible :description, :question_id
  has_one :question, :through => :user, :dependent => :destroy
  validates :description, :presence => true
end 
```

问题.rb

```
class Question < ActiveRecord::Base
  attr_accessible :budget, :description, :headline, :user_id, :updated_at, :created_at
  belongs_to :user
  has_many :answers
  validates :headline, :description, :user_id, :presence => true 
end 
```

我想在页面上显示与问题相关的所有答案的列表，并且仅显示这些问题。

我走到这一步了。我相信这个变量通过 question_id（外键）找到数据库中的所有问题：

```
@findanswers = Answer.all(params[:question_id]) 
```

这个抓取当前问题的 id（此代码将作为 ERB 驻留在当前问题所在的页面上）：

```
@questionshow = Question.find(params[:id]) 
```

现在我被困住了。如何将两者放在一起，以便列出所有带有当前问题 ID 的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:22:02.963

首先，您需要一条`question.answers`可以实现的路线（在 config/routes.rb 中）

```
resources :questions
  resources :answers
end 
```

然后在你看来你可以做

```
<% @questionshow.answers.each do |answer| %>

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:17:00.490

应该是

```
@findanswers = Question.find(params[:question_id]).answers 
```

但您必须决定“问题 id”是否由`params[:id]`或`params[:question_id]`

# r - R中xts对象的条件语句

> ID：12808504
> 
> 赞同：2
> 
> 时间：2012-10-09T21:12:27.823
> 
> 标签：r, xts

我在 R 中有一个 xts 对象，我想从中创建另一个对象。我的 xts 对象看起来像：

```
dates = seq(from=as.Date('2012-09-01'),to=as.Date('2012-09-05'),'day')
my_xts_obj = xts(c(1,2,3,4,5),dates)
> my_xts_obj
           [,1]
2012-09-01    1
2012-09-02    2
2012-09-03    3
2012-09-04    4
2012-09-05    5 
```

我想创建另一个满足以下条件的对象

```
val = 0, if my_xts_obj >2.5 and <3.5
val = -1, if my_xts_obj <2.5
val = +1, if my_xts_obj <3.5 
```

屈服，

```
my_new_xts_obj

           [,1]
2012-09-01    -1
2012-09-02    -1
2012-09-03    0
2012-09-04    1
2012-09-05    1 
```

我可以使用的一种方法是通过 for 循环解析它，使用 if then 语句来创建我的对象。有没有更好的办法？

我能想到的另一种方法是

```
my_new_xts_obj = my_xts_obj%/%2.5 + my_xts_obj%/%3.5, gives me 
2012-09-01    0
2012-09-02    0
2012-09-03    1
2012-09-04    2
2012-09-05    3 
```

这不正是我要找的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:17:40.097

您可以通过子集轻松地做到这一点：

```
x <- my_xts_obj
y <- x*0
y[x < 2.5] <- -1
y[x > 3.5] <- 1 
```

# ios - iOS：如何更改 UICollectionViewCell 的方向？

> ID：12808505
> 
> 赞同：5
> 
> 时间：2012-10-09T21:12:28.580
> 
> 标签：ios, orientation, ios6, uicollectionview, uicollectionviewcell

`UICollectionViewController`当用户转动他们的 iPad 以便将其置于横向时，我会加载一个。我遇到的问题是我`UICollectionViewCell`的 s 仍在加载，就好像它是纵向的一样。我`UICollectionViewController`在 Interface Builder 中将其设置为横向，并且我使用了一个名为`CollectionViewCell`. 每个单元格只包含一个图像和一个标签。

我应该在 Interface Builder 或我的代码中做些什么吗？我尝试使用`CGAffineTransformationMakeRotation`，但这没有帮助。如果其他人以前遇到过这种情况，我将非常感激！非常感谢！

这里有一些代码供参考：

```
-(void)viewDidLoad
{
 self.collectionView.dataSource = self;
    self.collectionView.delegate = self;
}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return listArray.count;
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{      
    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"devices" forIndexPath:indexPath];
   cell.statusImage.image=[UIImage imageNamed:@"Default.png"];
    cell.name.text=@"HEY !!!!!";
    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    return CGSizeMake(320, 420);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
{
    return UIEdgeInsetsMake(50, 20, 50, 20);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:34:42.857

如果其他人遇到这个问题，这就是我解决它的方法。

我最初不允许自动旋转，而只是`orientationChanged`使用`NSNotificationCenter`. 这很好用，只是它阻止了我的第二个视图意识到它需要以横向模式加载。

因此，我`tabBar`为嵌入主视图的类创建了一个类，并返回该类和所有其他视图中`NO`的方法，除了我想在横向模式下加载的视图。`shouldAutoRotate`我仍在使用`orientationChanged`主视图控制器中的通知，因为它嵌入在`tabBar`. 但我只是在返回主视图时使用自动旋转。

如果有人有任何问题，请告诉我。希望能帮助到你！

# apache - ProxyPass 和 ProxyPassReverse 可以在 htaccess 中工作吗？

> ID：12808506
> 
> 赞同：46
> 
> 时间：2012-10-09T21:12:30.330
> 
> 标签：apache, .htaccess

我以前从未设置过代理。我使用的是共享主机，所以要设置 Apache 指令，我需要使用 .htaccess。我可以使用 .htaccess 执行以下操作吗？有什么限制吗？

```
ProxyRequests Off
ProxyPass /img/ http://internal.example.com/img/
ProxyPass /app/ http://internal.example.com/app/

ProxyPassReverse / http://internal.example.com/ 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-10T04:39:39.097

[您不能`ProxyPass`在 htaccess 文件中](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)使用 a 。该文档说它仅适用于以下情况：

> 上下文：服务器配置、虚拟主机、目录

其中不包括 htaccess（你不能`<Directory>`在 htaccess 中有一个块）。但是，您*可以*使用 a`ProxyPassReverse`在内部重写导致重定向的代理请求的 Location 字段。您只需要使用 mod_rewrite 的`P`标志来代理而不是`ProxyPass`. 所以像：

```
RewriteEngine On
RewriteRule ^/?img/(.*)$ http://internal.example.com/img/$1 [L,P]
RewriteRule ^/?app/(.*)$ http://internal.example.com/app/$1 [L,P]

ProxyPassReverse / http://internal.example.com/ 
```

* * *

为了清楚起见，您不能在 htaccess 文件中使用`ProxyPass` *or* `ProxyPassReverse`，但您*可以*使用`ProxyPassReverse`使用该`P`标志的 mod_rewrite 规则。

# node.js - 在 node.js 中，如何识别缓冲区是二进制还是文本？

> ID：12808508
> 
> 赞同：2
> 
> 时间：2012-10-09T21:12:58.270
> 
> 标签：node.js, redis

下面是 node.js 中 redis pubsub 的代码。我在读取文件和纯文本后发布二进制数据，有没有办法识别消息上接收的缓冲区是二进制还是文本？

```
var redis = require("redis"),
    pub = redis.createClient(null, null, {
        detect_buffers: true
    }),
    sub = redis.createClient(null, null, {
        detect_buffers: true
    }),
    fs = require("fs");

sub.subscribe("abc");

sub.on("subscribe", function(channel, count) {
    fs.readFile("IMG_2693.JPG", function(err, data) {
        pub.publish("abc", data);
    });
    pub.publish("abc", "hello");

});

sub.on("message", function(channel, data) {
    // Can I identify if it is binary data or text?
    console.dir(data);
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:01:17.420

Redis 与数据编码无关。它不关心数据是二进制还是文本，并且不能将此信息返回或转发给客户端。

我认为处理这个问题的经典方法是向包含元信息（几个字节）的有效负载添加标头。例如，您还可以存储数据类型、知道有效负载是否被压缩的指示器等...

# azure - 在代码中管理 Azure 帐户

> ID：12808511
> 
> 赞同：0
> 
> 时间：2012-10-09T21:13:17.387
> 
> 标签：azure

是否可以在代码中管理一个 azure 帐户？像

```
var ac = new AzureAccount(name, password);
ac.CreateStorageAccount(name);
ac.CreateCoAdmin(name);
... 
```

我已经了解 Azure cmdlet，但这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:37:14.230

您需要查看服务管理 API。例如，有一个操作允许您创建存储帐户（附带 C# 示例）：[创建存储帐户](http://msdn.microsoft.com/en-us/library/windowsazure/hh264518.aspx)。

另一方面，添加共同管理员不会那么简单。我相信服务管理 API 支持管理共同管理员。如果这对您来说真的很重要，您可以尝试查看门户是如何做到的。您会看到它执行了 2 个请求以将共同管理员添加到订阅：

1.  使用新管理员的电子邮件地址调用[https://manage.windowsazure.com/Users/GetPrincipalId 。](https://manage.windowsazure.com/Users/GetPrincipalId)这将返回一个“LiveID”（如 00053ACD9A5B316C）。
2.  使用电子邮件地址、LiveId 和有关订阅的信息调用[https://manage.windowsazure.com/Users/AddCoAdministrator以添加用户。](https://manage.windowsazure.com/Users/AddCoAdministrator)

这没有记录在案，甚至在调用这些服务之前，您需要先管理身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:45:29.677

当用户提供他们的个人信息以及可以支付指定用户使用的服务所产生的余额的财务来源（即信用卡）时，就会创建 Windows Azure 帐户。登录帐户后，您可以添加更多管理。此过程由 Windows Azure 团队直接管理到一定程度的控制，并且由于各种原因没有 API 可以自动执行这些功能。

但是，一旦您获得了 Windows Azure 的新订阅，您当然可以使用 REST API 准确地创建订阅中可用的新服务（即云服务、VM、存储等）。要做到这一点，只需创建一个新的引用 dll（或类）并将所有 REST API 添加到其中，然后使用该引用（或类）以您想要的方式准确调用它们。

# php - 相同的数据集输出不同的字符：phpmyadmin / own query

> ID：12808515
> 
> 赞同：0
> 
> 时间：2012-10-09T21:13:31.717
> 
> 标签：php, mysql, character-encoding

我试图从 db 获取一些数据，但输出不是我所期望的。
在数据库上做我自己的查询，我得到这个输出：`string 'C�te d�Ivoire' (length=13)`

从 phpmyadmin 查询数据库我得到正常输出：科特迪瓦

php.ini 默认字符集、mysql db 默认字符集、`<meta>`字符集都设置为 utf-8 。

我无法确定在哪里进行编码，因为我得到具有相同配置的不同输出。

PS：使用mysqli驱动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:23:33.027

在给您错误结果的同一页面中，请先尝试运行此指令

```
print base64_encode("Côte"); 
```

正确答案是`Q8O0dGU...`。如果您得到其他内容，例如`Q/R0ZQo...`，这意味着您的脚本正在使用另一个字符集（此处为 Latin-1）而不是 UTF-8。仍然有可能MySQL 和浏览*器**也在*耍花招，但上面的行**确保**PHP 和/或您的编辑器在欺骗您。

 ***接下来，`Côte`从数据库中提取并输出其`base64_encode`. 如果您看到`Q8O0...`，那么 MySQL 和 PHP 之间的连接是安全的 UTF8。如果没有，那么可能*还*需要其他任何东西，您需要更改 MySQL 字符集（`SET NAMES utf8`和/或`ALTER`表和数据库排序规则）。

如果 PHP 是 UTF8，而 MySQL 是 UTF8，你*仍然*看到无效字符，那么它是 PHP 和浏览器之间的东西。验证内容类型标头是否正确发送；如果没有，请尝试将其作为脚本中的第一件事发送：

```
Header('Content-Type: text/html; charset=UTF8'); 
```

例如在 Apache 配置中你应该有

```
AddDefaultCharset utf-8 
```

还要确认您的浏览器未设置为同时*覆盖*服务器字符集和自动检测。

**注意**：根据经验，如果您得到**一个带有问号**而不是 UTF8 国际字符的菱形，这意味着 UTF8 阅读器收到了无效的 UTF8 代码点。换句话说，显示菱形的实体（您的浏览器）期待 UTF8，但正在接收其他内容，例如 Latin1 aka ISO-8859-15。

**另一种**难以跟踪的获取该错误的方法是，如果输出以某种方式*包含字节顺序标记 (BOM)*。如果您创建一个文件，例如

```
###<?php
    Header("Content-Type: text/html; charset=UTF8");
?>
<html>
     <head>
         <meta http-equiv="content-type" content="text/html; charset=UTF8" />
     </head>
     <body>
         Hellò, world!
     </body>
</html> 
```

其中### 是（在大多数编辑器中不可见）UTF8 BOM。要删除它，如果编辑器允许，您需要将文件另存为“无 BOM”，或者使用其他编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:19:48.090

如果您使用命令行工具 mysql 进行“自己的查询”，您也必须设置 option `--default-character-set=utf8`。否则，请告诉我们您如何进行自己的查询。***

# c - 通过 CONTEXT.Ebx+8 指向 baseAddress 的指针

> ID：12808516
> 
> 赞同：3
> 
> 时间：2012-10-09T21:13:34.790
> 
> 标签：c, winapi, pointers

我正在尝试实现已知的“Win32 EXE 的动态分叉”方法，即 RunPE。我的问题是我无法获得“基地址”的正确结果，正如它在[http://www.security.org.sg/code/loadexe.html的第三点中提到的那样](http://www.security.org.sg/code/loadexe.html)

这是我的代码：

```
DWORD* peb;
DWORD* baseAddress;
...snip...

GetThreadContext(hTarget, &contx)

peb = (DWORD *) contx.Ebx;
baseAddress = (DWORD *) contx.Ebx+8;

_tprintf(_T("The EBX [PEB] is: 0x%08X\nThe base address is: 0x%08X\nThe Entry Point is: 0x%08X\n"), peb, baseAddress, contx.Eax); 
```

输出如下：

> EBX [PEB] 为：0x7FFD4000
> 
> 基地址为：0x7FFD4020
> 
> 入口点是：0x00401000

我认为我的问题在于我的 baseAddress 指针的实现，但我无法弄清楚到底是什么问题。或者可能是我没有正确理解上面的文章并且 baseAddress 不是 ImageBase，如果是这样，什么是 baseAddress ？

我曾尝试在 Win 7 64b 和 Win-XP 下运行它，并且在两者上我都得到了相同的错误结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:27:54.817

你只是在做指针算术，你实际上并没有取消引用内存，在这一行：

```
baseAddress = (DWORD *) contx.Ebx+8; 
```

你只是增加`8*sizeof(DWORD) = 32`了`contx.Ebx`. 您真正想要做的是读取`contx.Ebx+8` *新进程地址空间中*地址处的数据。为了做到这一点，您需要使用[`ReadProcessMemory`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)，并且不要费心进行强制转换——您想使用原始偏移量，而不是乘以 的偏移量`sizeof(DWORD)`，这就是当您对`DWORD*`值进行指针运算时会发生的情况。

但是，我强烈警告您不要深入研究这样的实现细节，这可以而且确实会在不同版本的 Windows 之间发生变化。请记住，您链接到的文章写于 2004 年，只是一个概念验证，因此在 Vista、Windows 7、Windows 8 和未来版本中可能存在许多隐藏的陷阱和意想不到的问题.

Windows API 没有像 Unix 的`fork(2)`函数一样的函数，因此，您应该尽可能避免需要 fork -- use`CreateProcess`代替`fork+exec`etc。Cygwin 的[实现`fork`](http://cygwin.com/faq/faq.api.html#faq.api.fork)既丑陋又慢，它可以由于 DLL 内存映射问题而意外失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:42:35.633

除了其他人所说的之外，还有一种更简单的方法可以检索进程`PEB`结构的基地址。改为使用[`NtQueryInformationProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684280.aspx)，将其`ProcessInformationClass`参数集设置为`ProcessBasicInformation`. 输出将是一个`PROCESS_BASIC_INFORMATION`结构：

```
typedef struct _PROCESS_BASIC_INFORMATION {
    PVOID Reserved1;
    PPEB PebBaseAddress;
    PVOID Reserved2[2];
    ULONG_PTR UniqueProcessId;
    PVOID Reserved3;
} PROCESS_BASIC_INFORMATION; 
```

第二个成员就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T22:05:20.587

请注意，说明说“在 [EBX+8]”。括号表示该地址位置的值。有几个问题

```
baseAddress = (DWORD *) contx.Ebx+8; 
```

首先，编译器不注意空格，只注意括号，所以这意味着

```
baseAddress = ((DWORD *)contx.Ebx) + 8; 
```

这是错误的，因为 8 计算的是 DWORD，而不是字节。你要

```
baseAddress = (DWORD *)(contx.Ebx + 8); 
```

但这只会让您获得存储 baseAddress 的地址，而不是 baseAddress 的值。为此，您需要

```
baseAddress = *(DWORD *)(contx.Ebx + 8); 
```

但是，这只有在 contx.Ebx 引用你进程中的地址时才有效，但是每个进程都有自己的地址空间，你需要访问被挂起进程的地址空间；为此，您需要使用 ReadProcessMemory ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx) )：

```
ok = ReadProcessMemory(hTarget, (LPCVOID)(contx.Ebx + 8), (LPVOID)&baseAddress, sizeof baseAddress, NULL); 
```

# c++ - 如何更改 C++ 项目的 CMAKE 的编译器和 CXX_FLAGS？

> ID：12808517
> 
> 赞同：0
> 
> 时间：2012-10-09T21:13:35.633
> 
> 标签：c++, visual-studio, cmake, devpartner

```
I'm currently working on an unmanaged Windows C++ application.
I'm new to the world of CMAKE and C++.
I'm also new to the world of this current unmanaged C++ application.
I'm trying to integrate DevPartner into my build to instrument the build
for memory errors and runtime errors. 
```

为了构建仪器，我需要更改为使用 DevPartner 编译器 (nmcl.exe)。此外，我需要将编译器设置添加到现有的 CXX_FLAGS 以进行检测。

我该怎么做呢？

谢谢，约翰B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:32:08.880

对于 VS 版本 2008 及更早版本....（除了 VS6，它使用 msdev）

好吧，深入研究cmake，我会说这个知识渊博的人将能够接受并运行它。

我确实发现 CL 和 LINK 命令真的什么也没做，因为这只是启动了 VS2003 到 2008 的 Devenv 和 VS2010 的 MSBuild。将 CL 更改为 NMCL 并不重要，因为 MSBuild 使用目标文件，这就是我的其他答案需要修改用户文件的原因。以及为什么我们需要在这里使用另一个工具。

使用 /Build 调用的 Devenv 在内部使用项目文件来了解需要构建哪些源文件。然后它将在内部调用 createprocess 以根据需要生成 CL 和 LINK。这就是为什么在 cmake 文件中将 CL 更改为 NMCL 是没有用的。

幸运的是，我们还有另一个可以在这里使用的工具......

我们需要更改 //make program CMAKE_MAKE_PROGRAM:FILEPATH=C:/Program Files (x86)/Common Files/Micro Focus/NMShared/CTI/11.1/NMdevenv.EXE

和 CMAKE_BUILD_TOOL:INTERNAL=e:/PROGRA~1/MICROS~2.0/Common7/IDE/devenv.com

到 C:/Program Files (x86)/Common Files/Micro Focus/NMShared/CTI/11.1/NMdevenv.EXE

现在这是需要有更多知识的人的地方。我们还需要将检测类型作为第一个参数传递给 nmdevenv。

我相信它可以做这样的事情

设置（CMAKE_MAKE_PROGRAM "${CMAKE_MAKE_PROGRAM} " /nmon"）

这里的另一个问题是我们需要 devenv 也在路径中，因此 Path env 变量也需要正确设置。这可以通过运行正确的 vscvars bat 文件来完成。

希望这会有所帮助，如果您使用的是 vs2008 和以前的版本，请将所需的步骤添加到我从这里开始的内容中。我相信从长远来看它会帮助其他用户。如果我有更多时间对此进行调查，我会找到解决方法。

***编辑*** 好吧，我确实设法让它与 VS2008 一起工作。我确实必须对我们的 nmdevenv 包装器进行更改，因为 cmake 正在破坏我们的 SearchPath 功能。

这就是我所做的。替换了上面的make程序 跑VCVars32 跑cmake --build mytestproj 跑BounsChecker下的程序

现在我切换到传递 /nmtxon 进行性能分析这让我有点难过，因为它一直在为错误检测进行编译

那是我在转换后的项目文件中发现它的时候

```
 <Tool
            Name="VCCLCompilerTool"
            AdditionalOptions=" /NMbcon /Zm1000" 
```

将其更改为

一切都很好。我有我的性能编译选项。

所以我回去修改CMakeCache.txt文件中的这一行打开GUI，配置，生成//编译器在所有构建类型期间使用的标志。CMAKE_CXX_FLAGS:STRING= /NMbcon /DWIN32 /D_WINDOWS /W3 /Zm1000 /EHsc /GR

然后项目切换回使用/NMbcon。因此，如果您想与我们一起编译所有内容，那么这是放置开关的正确位置。否则使用适当的调试或发布行。

* * *

Cmake 输出的一部分 注意输出中的检测

```
Microsoft (R) Visual Studio Version 9.0.30729.1.
Copyright (C) Microsoft Corp. All rights reserved.
1>------ Build started: Project: Test, Configuration: Debug Win32 ------
1>Compiling...
New Command line nmcl.exe /NMtxon  @e:\cust\Test3\Test\Test.dir\Debug\RSP0000011
2568792.rsp /nologo /errorReport:queue
1>Test3.cpp
1>Instrumenting ..\Test3\Test3.cpp
1>Compiling manifest to resources...
1>Microsoft (R) Windows (R) Resource Compiler Version 6.1.7600.16385
1>Copyright (C) Microsoft Corporation.  All rights reserved.
1>Linking... 
```

* * *

总之

使用 Cmake 生成 CMakeCache.txt 和目录 修改 CmakeCahe 使用 NMDevenv 作为 MAKE 程序 添加 /NMon 开关到 flags 运行 CmakeGui 并再次生成

运行 VCVars32 运行 cmake --build 文件

在 devpartner 下运行程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:59:26.497

不是 100% 确定 cmake 文件，但这是来自为 Devpartner 修改的旧 VS 6 makefile。也许您可以发布 makefile 的相关部分供我查看。

/nmbcon 是一个编译标志，表示使用 BC 检测 /nmtxon 将用于覆盖率分析

CPP=cl.exe

CPP_PROJ=/nologo /MD /W3 /Gm /GX /Zi /Od /D "WIN32" /D "NDEBUG" /D "_WINDOWS" /D "_WINDLL" /D "_AFXDLL" /D "_MBCS" /D "_AFXEXT " /Fp"$(INTDIR)\main.pch" /Yu"stdafx.h" /Fo"$(INTDIR)\" /Fd"..\bin\Debug\MAIN.pdb" /FD /GZ /c

会成为

CPP=nmcl.exe

CPP_PROJ= /nmbcon /nologo /MD /W3 /Gm /GX /Zi /Od /D "WIN32" /D "NDEBUG" /D "_WINDOWS" /D "_WINDLL" /D "_AFXDLL" /D "_MBCS" /D "_AFXEXT" /Fp"$(INTDIR)\main.pch" /Yu"stdafx.h" /Fo"$(INTDIR)\" /Fd"..\bin\Debug\MAIN.pdb" /FD /GZ / C

哦，另一张海报是正确的，Visual Studio 的版本发生了很大的变化。VS2010 将构建过程更改为使用 MSBuild，这导致我们完全修改了 VS2010 和 2012 的拦截和工具方式。

****编辑***

好吧，我今天早上确实下载并经历了Cmake 实习的*痛苦*。对于 VS2010，这似乎是一个非常简单的修改，就像我们的一个用户从命令行使用 MSBuild 所需要的一样。

在第一次构建后的输出目录“构建二进制文件的位置”中将有 .vcxproj.user 文件。这是您需要为检测添加标志的地方

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <DevPartner_IsInstrumented>1</DevPartner_IsInstrumented>
    <DevPartner_Instrumented_Type> /NMbcOn</DevPartner_Instrumented_Type>
  </PropertyGroup>
</Project> 
```

这可以是您希望构建的每个重复部分。

下一个键 DevPartner_IsInstrumented 告诉我们检测 (1) 或不检测 (0)。最后一个键 DevPartner_Instrumented_Type> 是仪器的类型 /nmbcon (Boundschecker) /nmtxon (Performance or Coverage) 或两个键都通过。

所以它看起来像

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <DevPartner_IsInstrumented>1</DevPartner_IsInstrumented>
    <DevPartner_Instrumented_Type> /NMbcOn</DevPartner_Instrumented_Type>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <DevPartner_IsInstrumented>0</DevPartner_IsInstrumented>
    <DevPartner_Instrumented_Type> /NMbcOn</DevPartner_Instrumented_Type>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <DevPartner_IsInstrumented>0</DevPartner_IsInstrumented>
    <DevPartner_Instrumented_Type> /NMbcOn</DevPartner_Instrumented_Type>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|x64'">
    <DevPartner_IsInstrumented>1</DevPartner_IsInstrumented>
    <DevPartner_Instrumented_Type> /NtxcOn</DevPartner_Instrumented_Type>
  </PropertyGroup>
</Project> 
```

这将是 Debug win32 的 Boundschecker，Release win32 没有任何内容，调试 x64 和发布 x64 的 Performance / Coverage 没有任何内容

如果 IsInstrumented 0 类型中的任何内容都无关紧要，因为它不会被传递。

仅供参考，如果您在 VS2010 中打开解决方案并打开检测，它将为您添加到 vcxproj.user 文件中。仪表设置也是由项目/配置决定的。

如果不使用 VS2010，我下面的注释可能对这些版本是正确的。

为了全面披露，我是 DevPartner 检测引擎的首席开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T23:11:09.777

您使用的是哪个版本的 Visual Studio？这会产生相当大的差异，因为多年来管理仪器的方式发生了变化。. . DevPartner 的版本不如 Visual Studio 的版本。

# ios - 在 iPhone 5 上更改方向后 UINavigationBar 的背景图像大小不正确

> ID：12808519
> 
> 赞同：8
> 
> 时间：2012-10-09T21:13:46.980
> 
> 标签：ios, background-image, uitabbar, iphone-5

希望是一个小问题的长标题。

我有一个带有自定义背景图像的 UINavigationBar。我的应用程序将支持横向和纵向。风景在视网膜 3 英寸和非视网膜屏幕的模拟器中运行良好。但是，在视网膜 4 英寸屏幕上，背景图像在横向模式下显示为两倍大小。

这是我的自定义导航控制器的 init 方法中的相关代码片段：

```
[self.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar-bg.png"] forBarMetrics:UIBarMetricsDefault];        
if (IS_IPHONE_5)
{
    [self.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar-bg-landscape-iphone5.png"] forBarMetrics:UIBarMetricsLandscapePhone];
}
else
{
    [self.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar-bg-landscape.png"] forBarMetrics:UIBarMetricsLandscapePhone];
} 
```

IS_IPHONE_5 是一个宏定义为：

```
#define WIDTH_IPHONE_5 568
#define IS_IPHONE_5 ([[UIScreen mainScreen] bounds].size.height == WIDTH_IPHONE_5) 
```

这里有 2 个屏幕片段，可以更清楚地解释事情。当应用程序以纵向模式打开时，一切都很好：

![肖像](../Images/b94e8d944902e46710ef7a24a84e7a5e.png)

更改为横向模式时全部爆炸：

![景观](../Images/bb8f81cb2f64480637371a8c6bd9fcca.png)

背景图像的横向版本的图像尺寸（以像素为单位，宽 x 高）为：

*   导航栏-bg-landscape.png：480x44
*   导航栏-bg-landscape@2x.png: 960x88
*   导航栏-bg-风景-iphone5.png：1136x88

或者它可能是一个模拟器唯一的问题？（我现在没有真正的 iPhone 5）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T21:58:11.237

我相信您`navbar-bg-landscape-iphone5.png`实际上应该被调用`navbar-bg-landscape-iphone5@2x.png`，并且您应该继续`navbar-bg-landscape-iphone5.png`在代码中引用它。因为 iPhone 5 有视网膜显示屏，iOS 会寻找`@2x`版本并使用它。如果找不到，它将使用您提到的版本，然后将其放大 2 倍。为了避免 iOS 的 2 倍放大，给它一个`@2x`版本。

# python - google drive sdk quickstart python 示例错误

> ID：12808521
> 
> 赞同：3
> 
> 时间：2012-10-09T21:14:00.000
> 
> 标签：python, google-drive-api

我正在关注 Google Drive SDK ( [https://developers.google.com/drive/quickstart#set_up_the_sample](https://developers.google.com/drive/quickstart#set_up_the_sample) ) 的快速启动页面的示例 python 代码并得到错误

```
Traceback (most recent call last):
  File "quickstart.py", line 45, in <module>
    file = drive_service.files().insert(body=body, media_body=media_body).execute()
  File "build/bdist.macosx-10.7-intel/egg/oauth2client/util.py", line 120, in positional_wrapper
  File "build/bdist.macosx-10.7-intel/egg/apiclient/http.py", line 656, in execute
  File "build/bdist.macosx-10.7-intel/egg/oauth2client/util.py", line 120, in positional_wrapper
  File "build/bdist.macosx-10.7-intel/egg/apiclient/http.py", line 733, in next_chunk
apiclient.errors.ResumableUploadError: Failed to retrieve starting URI. 
```

输入验证码后。这些步骤相当简单，所以我想知道示例代码是否已过时（尽管我没有看到其他人遇到此错误，所以它似乎可能与我的设置有关，但我不确定那会是什么）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:31:51.480

要扩展 papahoolio 的答案：

您需要确保该服务已启用，**但有一个问题**：“Drive SDK”**和**“Drive API”服务都有，只有后者（“Drive API”）可以工作。但是，前者有漂亮的 Drive 图标，如果你像我一样，你会看到它。

启用：

*   转到[https://code.google.com/apis/console](https://code.google.com/apis/console)
*   单击左侧菜单上的服务。
*   启用“ **Drive API** ”（*不是*Drive SDK，但您也可以根据需要启用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:27:48.660

我在使用企业版 Google Drive 时遇到了这个问题。在非商业 Google Drive 上运行时，示例代码运行良好。oauth 被公司政策阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:00:03.077

在 Google API 控制台中，有两个与驱动开发相关的服务，SDK 和 API。确保 Drive **API**已开启

# linux - 了解 RT 调度类 linux 的 dequeue_rt_stack()

> ID：12808528
> 
> 赞同：2
> 
> 时间：2012-10-09T21:15:10.253
> 
> 标签：linux, linux-kernel, kernel

`enqueue_task_rt`function in`./kernel/sched/rt.c`负责将任务排入运行队列。`enqueue_task_rt`包含调用`enqueue_rt_entity`哪个调用`dequeue_rt_stack`。大部分代码看起来合乎逻辑，但由于函数`dequeue_rt_stack`无法理解它的作用，我有点迷茫。有人可以告诉我我缺少什么逻辑或建议一些好读的东西。

编辑：以下是`dequeue_rt_stack`函数的代码

```
 struct sched_rt_entity *back = NULL;
     /* macro for_each_sched_rt_entity defined as
     for(; rt_se; rt_se = rt_se->parent)*/
     for_each_sched_rt_entity(rt_se) {
             rt_se->back = back;
             back = rt_se;
     }

     for (rt_se = back; rt_se; rt_se = rt_se->back) {
             if (on_rt_rq(rt_se))
                     __dequeue_rt_entity(rt_se);
     } 
```

更具体地说，我不明白为什么需要这段代码：

```
 for_each_sched_rt_entity(rt_se) {
             rt_se->back = back;
             back = rt_se;
     } 
```

它的相关性是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:02:52.997

当一个任务被添加到某个队列时，它必须首先从它当前所在的队列中移除，如果有的话。

使用[group scheduler](http://lwn.net/Articles/240474/)，任务始终位于树的最低级别，并且可能有多个祖先：

```
 NULL
         ^
         |
+-----parent------+
|                 |
| top-level group |
|                 |
+-----------------+
         ^      ^_____________
         |                    \
+-----parent------+   +-----parent------+
|                 |   |                 |
| mid-level group |   |   other group   |  ...
|                 |   |                 |
+-----------------+   +-----------------+
         ^      ^_____________
         |                    \
+-----parent------+   +-----------------+
|                 |   |                 |
|      task       |   |   other task    |  ...
|                 |   |                 |
+-----------------+   +-----------------+ 
```

要从树中删除任务，必须将其从所有组的队列中删除，并且必须首先在顶级组中完成（否则，调度程序可能会尝试运行已经部分删除的任务）。因此，`dequeue_rt_stack`使用`back`指针构造一个相反方向的列表：

```
 NULL    back
     ^      |
     |      V
+-parent----------+
|                 |
| top-level group |
|                 |
+----------back---+
     ^      |   ^_____________
     |      V                 \
+-parent----------+   +-----parent------+
|                 |   |                 |
| mid-level group |   |   other group   |  ...
|                 |   |                 |
+----------back---+   +-----------------+
     ^      |   ^_____________
     |      V                 \
+-parent----------+   +-----------------+
|                 |   |                 |
|      task       |   |   other task    |  ...
|                 |   |                 |
+----------back---+   +-----------------+
            |
            V
           NULL 
```

`back`然后可以使用该列表沿着树向下走，以正确的顺序删除实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T03:25:50.377

我是内核黑客的新手。这是我第一次回答linux内核问题。也许这对你有帮助。

我阅读了源代码。我认为这可能与小组安排有关。

当内核有这些代码时：

```
#ifdef CONFIG_RT_GROUP_SCHED 
```

它表示我们可以将一些调度实体收集到一个调度组中。

```
static void enqueue_rt_entity(struct sched_rt_entity *rt_se, bool head) 
```

{

```
 dequeue_rt_stack(rt_se);
    for_each_sched_rt_entity(rt_se)
          __enqueue_rt_entity(rt_se, head); 
```

}

函数 dequeue_rt_stack(rt_se) 提取属于该组的所有调度实体，然后将它们添加到运行队列中。

[分层组 I/O 调度](http://lwn.net/Articles/427961/)

[CFS 组调度](http://lwn.net/Articles/240474/)

# java - 我不能使用 JMF

> ID：12808530
> 
> 赞同：0
> 
> 时间：2012-10-09T21:15:40.757
> 
> 标签：java, jmf

![在此处输入图像描述](../Images/4d875cd45dcdce21f5dcd1ad45840310.png)现在我正在尝试使用另一个带有 mp3 编解码器的声音文件。但是我在启动播放器时遇到了问题。

我已经从[http://www.mediacollege.com/audio/tone/download/下载了文件](http://www.mediacollege.com/audio/tone/download/)

Netbeans 的输出是：

运行：错误：无法实现com.sun.media.amovie.AMController@ebf3f0 BUILD SUCCESSFUL（总时间：2秒）

我的程序是：

```
import javax.media.*;
import java.io.*;
public class MP3Player {
public static void main(String[] args) throws Exception 
{    
File file = new File("c:/player/sound.mp3");    
MediaLocator mrl = new MediaLocator(file.toURL());    
Player player = Manager.createPlayer(mrl);    
player.start(); 
Thread.sleep(1000);
} 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:21:49.423

由于许可问题，JMF 不支持 mp3 格式。

[这篇](http://onjava.com/pub/a/onjava/2004/08/11/javasound-mp3.html)关于扩展 JavaSound 以播放 MP3 的文章应该为您提供所需的一切，包括下载 mp3 编解码器的地方。我最近将此示例代码用作 mp3 播放器的基础，并在 Windows 和 OS X 上都使用了它，我可以验证它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T06:32:18.493

尝试使用这个：

```
String theFile = "file:///c:/player/sound.mp3";
MediaLocator mrl = new MediaLocator(theFile); 
```

对我有用..

# ios - 在 ios webView 中显示图像不起作用

> ID：12808532
> 
> 赞同：1
> 
> 时间：2012-10-09T21:16:08.533
> 
> 标签：ios, image, uiwebview

我在 ios webbView 上显示图片链接时遇到了一些问题。发生的事情是我在我的 xib 文件中放置了一个 webView 并将其与插座连接，但我仍然无法显示图像..

ViewController.m 中的代码

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad {
NSString *urlLink = @"http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={FDCE3A18-B5F6-45F4-B9B2-EA9171290F71}&period=&week=41&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=844&height=629&maxwidth=844&maxheight=629";

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlLink];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[self.webView loadRequest:requestObj];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

如果有人能找出问题所在，我将不胜感激！

最好的问候奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:21:30.157

```
http://www.novasoftware.se/ImgGen/schedulegenerator.aspx?format=png&schoolid=90645/sv-se&type=1&id={FDCE3A18-B5F6-45F4-B9B2-EA9171290F71}&period=&week=41&mode=0&printer=0&colors=32&head=0&clock=0&foot=0&day=0&width=844&height=629&maxwidth=844&maxheight=629 
```

这不是图像的直接链接。那可能是你的问题。尝试使用像这样的普通图像链接`https://www.google.com/images/srpr/logo3w.png`，它应该会显示出来。

# entity-framework - DbSet.AddOrUpdate 中的复合自然键

> ID：12808536
> 
> 赞同：21
> 
> 时间：2012-10-09T21:16:16.737
> 
> 标签：entity-framework

我正在尝试将 EF5 中的 CodeFirst 数据迁移与具有复合自然键的表一起使用。是否可以在 DbSet.AddOrUpdate 的第一个参数中指定它，例如

```
context.Table1.AddOrUpdate(
     t=>t.Column1 && t.Column2,
     new Table1 { properties... }
); 
```

在这种情况下，如何指定使用多个属性？

谢谢，马修

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-18T17:08:28.800

结果我不得不在第一个参数中使用匿名类型，例如

```
t => new { t.Column1, t.Column2 } 
```

# sql - 如何使用此代码段创建临时表？

> ID：12808539
> 
> 赞同：0
> 
> 时间：2012-10-09T21:16:25.917
> 
> 标签：sql, sql-server, temp-tables

如何将此 SQL 片段生成为临时表，以便将其他内容加入其中？

```
with MyCTE AS
(
    select *, RANK() OVER (PARTITION BY workplace ORDER BY Total DESC) AS Rank
    from [dbo].[OriginDestination]
)
select * from MyCTE where Rank <= 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:22:11.753

像这样：

```
with MyCTE AS
(
    select *, RANK() OVER (PARTITION BY workplace ORDER BY Total DESC) AS Rank
    from [dbo].[OriginDestination]
)
select *
into #yourTempTable 
from MyCTE 
where Rank <= 5 
```

# couchdb - CouchDB 服务器无法启动

> ID：12808544
> 
> 赞同：3
> 
> 时间：2012-10-09T21:16:47.387
> 
> 标签：couchdb

突然之间，我无法在我的 Mac（OS 10.8.2）上启动 CouchDB 服务器。它似乎无缘无故地死了，现在即使重新启动也无法启动。

更新：我正在使用 v1.2.0。

这是错误日志。我搜索了“eaddrnotavail”，但没有找到任何对我有帮助的东西。有任何想法吗？

```
error_report,<0.34.0>,
                 {<0.127.0>,crash_report,
                  [[{initial_call,
                     {mochiweb_socket_server,init,['Argument__1']}},
                    {pid,<0.127.0>},
                    {registered_name,[]},
                    {error_info,
                     {exit,eaddrnotavail,
                      [{gen_server,init_it,6,
                        [{file,"gen_server.erl"},{line,313}]},
                       {proc_lib,init_p_do_apply,3,
                        [{file,"proc_lib.erl"},{line,227}]}]}},
                    {ancestors,
                     [couch_secondary_services,couch_server_sup,<0.35.0>]},
                    {messages,[]},
                    {links,[<0.96.0>]},
                    {dictionary,[]},
                    {trap_exit,true},
                    {status,running},
                    {heap_size,1597},
                    {stack_size,24},
                    {reductions,453}],
                   []]}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:21:22.933

`eaddrnotavail`错误意味着 CouchDB（准确地说是 Erlang）无法分配请求的地址。您需要检查您的*local.ini*配置文件`bind_address`和`port`该部分中的参数，`[httpd]`并确保它们设置正确。

正如您在评论中指出的那样：

> 我更改了绑定地址。我是用蒲团做的，但我以为我把它改回来了。

通过 Futon 更改绑定地址可能会使您的 CouchDB 损坏，因为您可能很容易输入格式错误的值，该值将被自动应用。但是，这种情况在 1.3 中是[固定的。](https://issues.apache.org/jira/browse/COUCHDB-1512)CouchDB 将在应用更改之前首先验证指定的地址，如果出现错误，将提供更具体的错误消息“invalid_bind_address”。[来源](https://github.com/apache/couchdb/commit/09ead8a070050141d8661500fc86e37e1e6a6c9a)中的更多详细信息。

# c++ - 如何在 C++ 中列出/枚举安装在 Windows 计算机上的所有软件和相关 .exe？

> ID：12808547
> 
> 赞同：-3
> 
> 时间：2012-10-09T21:16:53.330
> 
> 标签：c++, windows, winapi, registry

作为应用程序的一个组件，我必须用 C++ 开发一种方法来列出 Windows 计算机上安装的所有软件。为了执行它们，我需要拥有它们相关的可执行文件。（例如：Opera => opera.exe）。在这个阶段，我已经能够在注册表中查看： SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 和 SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall 并找到了几个软件（不是全部）所以这是我的问题： - 我怎样才能在电脑上安装所有的软件？（我错过了注册表文件夹吗？） - 如何定义与每个软件相关的好的 .exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:19:57.457

您可以尝试调整此处给出的脚本：

[http://technet.microsoft.com/en-us/library/ee156540.aspx](http://technet.microsoft.com/en-us/library/ee156540.aspx)

通常，使用 WMI 查找已安装的软件包。或者，如果您真的想查找系统上的所有可执行文件（为什么？），则只需遍历文件系统以查找可执行文件。

对于 C++，您可能想查看 WMI Win32_Product 和 SoftwareFeature 的示例。请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394378 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394378(v=vs.85).aspx)

但总的来说，没有一种明智的方法可以找到所有已安装的应用程序。尤其是如果您计算诸如嵌入 javascript 的网页、各种脚本和批处理文件等之类的东西。

# perl - Getopt::Long 和匿名子例程

> ID：12808561
> 
> 赞同：2
> 
> 时间：2012-10-09T21:17:47.190
> 
> 标签：perl

我编写了以下代码：

```
my $version = sub {
    print "$PROGNAME $VERSION - $AUTHOR\n";
    exit 0;
};

my $usage = sub {
    print "Usage: proll <options>\n";
    print "Available options:\n";
    print " -h, --help  Print this help and exit.\n";
    print " --version   Print version.\n";
    print " XdY     Launch X dice with Y faces.\n";
    exit 0;
};

my $ret = GetOptions ( "version" => \$version,
                       "h|help" => \$usage ); 
```

但是，如果我调用脚本`--version`或`--help`它不调用子例程。我哪里错了？

如果我按如下方式更改代码，它总是调用第一个子程序，也没有任何命令行参数：

```
my $ret = GetOptions ( "version" => &$version,
                       "h|help" => &$usage ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T21:21:18.940

`\$version`是对 的引用`$version`，其中`$version`是对匿名子例程的引用；所以，`\$version`是对子程序的引用的引用。这太间接了。您只需要一个单一级别的参考性：

```
my $ret = GetOptions ( "version" => $version,
                       "h|help" => $usage ); 
```

# php - 显示一个序列化数组

> ID：12808565
> 
> 赞同：2
> 
> 时间：2012-10-09T21:18:18.073
> 
> 标签：php, sql

我有一个数组正在通过如下形式收集：

```
<select multiple="multiple" name="contractors[]" > 
```

输入代码以将数组保存在数据库中。

```
$options = $_POST['contractors'];  
$serializedoptions = serialize($options); 
```

它以下面的格式将数组保存在数据库中，但我无法正确显示它。当我拉整个它显示：

```
a:4:{i:0;s:28:Contractor1";i:1;s:15:"Contractor2";i:2;s:10:"Contractor3";} 
```

我怎样才能让它以更易读的格式显示？

```
$result = mysql_query("SELECT * FROM form_2 GROUP BY jobname");

echo "<table border='1'>
<tr>
<th><font size='1'>Job Name</th>
<th><font size='1'>Contractors</th>
<th><font size='1'>Notes</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td><font size='1'>" . $row['jobname'] . "</font></td>";
  echo "<td><font size='1'>" . $row['contractors'] . "</font></td>";
  echo "<td><font size='1'>" . $row['notes'] . "</font></td>";

  echo "</tr>";

  }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:19:45.757

被序列化的必须是非序列化的。只需在使用`unserialize`数据之前对数据使用该功能。在您的情况下，将返回一个数组。

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

```
$options = unserialize($serializedoptions); 
```

`serialize()`如果您找到支持它的代码，其他语言也可以反序列化 PHP 。例如，这里是 JavaScript 的一个：http: [//phpjs.org/functions/unserialize/](http://phpjs.org/functions/unserialize/)

**编辑：**

更新您添加的代码，您可以在反序列化值后像任何其他 PHP 变量一样显示它。

```
<?php
while ($row = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td><font size='1'>" . $row['jobname'] . "</font></td>";
    echo "<td><font size='1'>";
    $contractors = unserialize($row['contractors']);
    foreach ($contractors as $contractor)
        echo htmlspecialchars($contractor).'<br/>';
    echo "</font></td>";
    echo "<td><font size='1'>" . $row['notes'] . "</font></td>";
    echo "</tr>";
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:20:01.160

`print_r`在未序列化的数组上使用：

```
print_r(unserialize($serializedArray)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:20:51.677

您可以使用反序列化命令。然后，您可以使用 var_dump() 或 print_r() 回显它。

在上面的 HTML 表中，您必须进一步分解 $row['contractors'] 的结果。

所以首先，你会反序列化那个值，所以让我们说

$contractors = unserialize($row['contractors']);

然后，您可以遍历新的 $contractors 数组，并
在每个数组之后回显一个，所有这些都在同一个 TD 内。

上面的序列化数据我其实不能反序列化，所以不能给你写循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:19:45.630

用于`unserialize($serializedoptions)`将其转换回数组。如果要查看它，请使用`var_dump($unserialized)`

# sharepoint-2010 - 将 Dynamics CRM 2011 跟踪的电子邮件附件移动到 SharePoint 2010 文档库中

> ID：12808566
> 
> 赞同：1
> 
> 时间：2012-10-09T21:18:22.777
> 
> 标签：sharepoint-2010, attachment, documents, dynamics-crm-online

为了将所有与 CRM 实体相关的文档集中在 SharePoint 中，并最大限度地减少 CRM 数据库占用空间的增长，我们决定将 CRM 跟踪的电子邮件附件存储在 SharePoint 中，但目前还没有现成的机制可以这样做。为了解决这个问题，我们使用电子邮件附件手动填充 SharePoint 文档库并适当地更新元数据（相关实体名称、用户、日期、标签等）。为了从 CRM 中查看文档和附件，我们在关联的 CRM 实体表单上创建了一个 IFrame，该 IFrame 链接回文档库中的自定义 SharePoint 视图。此视图通过 URL 参数根据实体名称进行过滤。这对我们来说比 SharePoint 中的开箱即用文档管理要好得多，SharePoint 在存储文档的方式上不够灵活，主要是因为它使用文件夹并且无法轻松更新元数据。但是，这些文档仍然作为跟踪的电子邮件附件保留在 CRM（和 Exchange 邮箱，但我们并不真正关心这一点）中。我们想要做的是将附件复制/或移动到 SharePoint 中，根据需要更新元数据，然后将 CRM 中的附件替换为新 SharePoint 文档的 URL。

以此为背景，我们将感谢本论坛中更有经验的 CRM 和 SharePoint 专家的一些指导。我们的问题是：

- 作为将附件从电子邮件中获取到 SharePoint 的一种机制更有意义：具有可由用户手动触发的操作的 Outlook 插件，或在 CRM 中使用有关设置的操作时触发的工作流或外表？我们还缺少另一种解决方案吗？ **我们总是在电子邮件上使用 Set-regarding 操作来指向附件应该关联的实体。**

-我们还需要批量文档上传器，通过 Sharepoint 中包含实体名称的文档库中的添加字段将文档与实体相关联。目前我们使用 SharePoint 的批量文档加载器，然后尽可能使用数据网格视图手动更新元数据。似乎可以在这里轻松使用处理电子邮件附件所需的代码，但我再次不确定要使用什么工具：Outlook 插件、CRM 工作流/对话流程、SharePoint 插件或独立应用程序。

-最后，此时CRM实体与其在SharePoint文档库中的关联文档之间的关系完全依赖于实体名称。这并不可靠，因为 CRM 实体名称可能会在任何给定时间更改，然后需要更新关联的元数据。正确的解决方案是将关系改为基于 CRM 实体 ID 字段。从 SharePoint 中访问 CRM 实体数据的最佳方式是什么？请注意，我们目前使用 Office 365 处理电子邮件和 SharePoint，以及 Dynamics CRM 2011 Online，因此无法直接访问数据库。

您提供的任何指导将不胜感激！

# iphone - 如何仅保存用户长按并选择的图像

> ID：12808571
> 
> 赞同：0
> 
> 时间：2012-10-09T21:19:05.803
> 
> 标签：iphone, ios6

目前它正在保存所有图像，但我只想保存长按的一张，不是一张照片中的所有图像，只有一个用户选择

```
- (void)viewDidLoad

{    self.view.backgroundColor = [UIColor blackColor];
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;
    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [myButton addTarget:self action:@selector(dismissView:) forControlEvents:UIControlEventTouchUpInside];

    myButton.frame = CGRectMake(xOrigin, 10, 60, 35);

    //[myButton addGestureRecognizer:tap];

    [myButton.layer setMasksToBounds:YES];

    [myButton.layer setCornerRadius:10.0f];

    myButton.layer.borderWidth = 2;

    myButton.layer.borderColor = [[UIColor whiteColor] CGColor];

    [myButton setTitle:@"Done" forState:UIControlStateNormal];

    myButton.backgroundColor = [UIColor clearColor];

    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    _imageView.tag = 128;
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);

    UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                                       initWithTarget:self
                                                       action:@selector(handleLongPress:)];

    //imageScrollView.userInteractionEnabled = YES;
    [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];

    [imageScrollView addSubview:imageView];
    [imageScrollView addSubview:myButton];

    //[imageView release];

}
imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);

[self.view addSubview:imageScrollView];
[imageScrollView release];
 }

- (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [actionSheet showInView:self.view];
    [actionSheet release];

}

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
        NSInteger numberOfViews = 61;
         for (int i = 0; i < numberOfViews; i++) {
             NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
             UIImage *image = [UIImage imageNamed:imageName];
             UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        UIImageWriteToSavedPhotosAlbum(imageView.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);

}
} 
```

如何为此编码

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:57:44.813

在`handleLongPress:`函数中，使用这个：

```
UIGestureRecognizer *gestureRecognizer;
CGPoint gesturePoint = [gestureRecognizer locationInView:self.view]; 
```

然后使用 for 循环检查所有按钮，就像你在那里一样。使用它来检查它是否是按下的图像：

```
if(CGRectContainsPoint(myButton.frame,gesturePoint)){
    //save the image stored in myButton

    //break will exit the for loop early, so if the view comes early in the list,
    //it doesn't have to check the rest.
    break;
} 
```

# c# - 与 ASP 网站通信

> ID：12808573
> 
> 赞同：0
> 
> 时间：2012-10-09T21:19:10.990
> 
> 标签：c#, asp.net, httpwebrequest

我知道一个网站，其中包含一个学术测试结果的开放数据库。 [http://nts.org.pk/NTSWeb/PPL_30Sep2012_Result/search.asp](http://nts.org.pk/NTSWeb/PPL_30Sep2012_Result/search.asp)

我是 C# 专家，但对 Web 开发是新手。

通常，使用网络浏览器，我们可以输入并滚动号码，然后服务器将结果发回。EG 使用我的卷号：3912125

我需要做的是，使用 C# 应用程序来传达这个滚动空数并获得我的结果。（任何字符串除外，我将从该字符串中解析出我的结果。）

如何发送查询？当我不知道可能的查询字符串列表时。

我试过这段代码：

```
string queryString = "RollNo=3912125";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(@"http://nts.org.pk/NTSWeb/PPL_30Sep2012_Result/search.asp");
request.UseDefaultCredentials = true;
request.ContentType = "application/x-www-form-urlencoded";
request.Method = "POST";

byte[] requestBytes = Encoding.UTF8.GetBytes(queryString);
request.ContentLength = requestBytes.Length;

using (var requestStream = request.GetRequestStream())
{
    requestStream.Write(requestBytes, 0, requestBytes.Length);
    requestStream.Close();
}
WebResponse response = request.GetResponse();
textBox1.AppendText(((HttpWebResponse)response).StatusDescription);
Stream dataStream = response.GetResponseStream();
StreamReader reader = new StreamReader(dataStream);
string responseFromServer = reader.ReadToEnd();

textBox1.AppendText(responseFromServer);

reader.Close();
dataStream.Close();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:24:04.163

您必须将查询字符串附加到 url，如下所示：

```
string queryString = "RollNo=3912125";
string url = String.Format(@"http://foo/search.asp?{0}", queryString);
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:28:59.187

您应该查看我对[C# https login and download file](https://stackoverflow.com/questions/9841344/c-sharp-https-login-and-download-file)的回答中的代码。它很好地演示了如何执行 POST 请求。至于知道在您的 POST 中对查询格式的字符串使用什么有效，只需在页面内容中查找适当的输入元素即可。看起来你所拥有的 (RollNo) 是正确的。但是，您可能还需要根据服务器的行为方式将提交按钮值添加到您的请求中，从而为您提供类似的东西。`RollNo=3912125&submit=submit`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:40:59.400

你大部分都在那儿。您的 queryString 应该看起来像`RollNo=3912125&Submit=+Search+`. 当你打电话`WebRequest.Create`时，Url 实际上应该是`http://nts.org.pk/NTSWeb/PPL_30Sep2012_Result/result.asp`。

您的其余代码应该可以工作，尽管@JamieSee 向您推荐的答案有一些关于`using`正确将内容包装在块中的非常好的建议

# android - ant android，如果没有设备则跳过安装

> ID：12808575
> 
> 赞同：0
> 
> 时间：2012-10-09T21:19:14.930
> 
> 标签：android, ant, conditional-statements, interrupt, build-script

使用ant安装android应用程序时，如果机器没有连接android设备，它会挂起。它只会等待用户连接一个，这会中断脚本的自主性。

在运行安装脚本之前，如何设置某种条件语句来检查计算机上是否有任何设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:57:39.747

我是关于建议同样的事情。

```
DEV=$(adb devices 2>&1 | tail -n +2 | sed '/^$/d')
if [ -z "$DEV" ]
then
   echo "No devices" >&2
   exit 1
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:47:50.543

我会从蚂蚁脚本做这样的事情

*   调用“adb 设备”
*   解析输出（查看连接了多少设备）
*   检查 ant 条件语句中连接设备的数量。

# mysql - 每天最多选择一个值（存储在 unix 时间戳中）

> ID：12808584
> 
> 赞同：0
> 
> 时间：2012-10-09T21:19:55.867
> 
> 标签：mysql

我有一个 MySQL 表，每个用户和每天都有不同的值，但创建的是一个带有 unix 时间戳的 INT：

```
id INT, AUTO_INCREMENT
users_id INT
value INT
created INT 
```

在过去的 30 天内，我需要每天和每个用户选择最多一个值。如果它是 MySQL TIMESTAMP，我会做类似的事情：`SELECT * FROM table GROUP BY DAY(created)`但我不能用 UNIX 时间戳来做。

关于如何使用当前数据重现类似查询的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:22:44.710

用这个

> SELECT * FROM table GROUP BY DAY(FROM_UNIXTIME(created))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:30:13.663

类似的东西（被广泛烧毁，但是）：不要只按天分组，在过去的 30 天里，你可能在同一天有两次（二月......）

```
select 
  users_id, 
  MAX(value) --or just value if you don't mind which should be returned
FROM table
WHERE FROM_UNIXTIME(created) BETWEEN  (CURDATE() - INTERVAL 30 DAY) AND CURDATE()
GROUP BY users_id, MONTH(FROM_UNIXTIME(created)), DAY(FROM_UNIXTIME(created)) 
```

# iphone - UIActivityViewController 和 UIActivityItemSource 中操作的初始文本和回形针 URL？

> ID：12808586
> 
> 赞同：10
> 
> 时间：2012-10-09T21:19:59.890
> 
> 标签：iphone, ios, user-interface, ios6

终于通过 Apple 关于新`UIActivityViewController`类和`UIActivityItemSource`协议的（相当糟糕的）文档来实现它，我试图将不同的数据集发送到从活动视图调用的不同操作中。为了简化事情，我正在研究两件事。

1.  一个 Facebook 发帖动作，应该说“看看这个！” 并在帖子中附加一个 URL（用那个可爱的小回形针）。
2.  一个 Twitter 发布操作，应该说“用#hashtag 看看这个！” 并附上相同的 URL（使用相同的回形针）。

这是我现在已经实现的代码。

```
- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType {
    if ([activityType isEqualToString:UIActivityTypePostToFacebook]) {
        return @"Check this out!";
    } else if ([activityType isEqualToString:UIActivityTypePostToTwitter]) {
        return @"Check this out, with #hashtag!";
    }

    return @"";
}

- (id)activityViewControllerPlaceholderItem:(UIActivityViewController *)activityViewController {
    return @"";
} 
```

然后当我设置这个活动视图控制器（它在同一个类中）时，这就是我所做的。

```
UIActivityViewController *activityView = [[UIActivityViewController alloc] initWithActivityItems:@[self] applicationActivities:nil];
[self presentViewController:activityView animated:YES completion:nil]; 
```

我的困境是**如何附加该`NSURL`对象。**调用 iOS 6 SL 类的发布模式相对容易；您只需调用各个方法来附加 URL 或图像。我该怎么做呢？

我会注意到，如果我只返回对象，而不是`NSString`从中返回对象，它们会与那个回形针一起显示，而帖子中没有正文。如果我返回这两个项目的数组，则根本没有任何显示。`-activityViewController:itemForActivityType``NSURL`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T21:34:45.780

显然它就这么简单：将一个数组传递给`UIActivityViewController`'s init 调用的第一个参数，数组中的每个项目都处理不同的数据类型，最终将出现在撰写屏幕中。`self`处理文本，第二个对象 ( `NSURL`) 附加 URL。

```
NSArray *items = @[self, [NSURL URLWithString:@"http://this-is-a-url.com"]];
UIActivityViewController *activityView = [[UIActivityViewController alloc]  initWithActivityItems:items applicationActivities:nil];
[self presentViewController:activityView animated:YES completion:nil]; 
```

真的希望有更多关于此的内容，但它就在这里。

# php - PHP验证有效的UUID

> ID：12808597
> 
> 赞同：7
> 
> 时间：2012-10-09T21:21:21.193
> 
> 标签：php, regex, uuid

[我在另一个答案](https://stackoverflow.com/a/873856/367456)中找到了以下 Javascript 函数：

```
function createUUID() {
    var s = [];
    var hexDigits = "0123456789abcdef";

    for (var i = 0; i < 36; i++) {
        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
    }

    s[14] = "4";
    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);
    s[8] = s[13] = s[18] = s[23] = "-";

    var uuid = s.join("");
    return uuid;
} 
```

这会在 javascript 中创建一个 RFC 有效的 UUID/GUID。我想知道的是，一旦字符串到达​​ PHP 端，是否有办法验证它。我找到了一个正则表达式，它可能会大致验证该格式的所有内容为真：

`/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/`

但是只要你指定一个长度和格式相等的字符串，它就会通过验证。

有没有办法向 javascript 函数添加某种种子，然后在 PHP 中验证这一点，或者 PHP 是否有办法验证传递的数字是否与正确的格式匹配？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T21:28:22.853

根据[Wikipedia](http://en.wikipedia.org/wiki/UUID#Version_4_.28random.29)，UUID v4 的格式为：

> 第 4 版 UUID 的格式为 xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx，其中 x 是任何十六进制数字，y 是 8、9、A 或 B 之一。例如 `f47ac10b-58cc-4372-a567-0e02b2c3d479`。

对应的正则表达式是：

```
/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-28T09:01:53.603

我使用`regex`验证和字符串验证来检查给定的字符串是否为有效的 UUID 格式。

```
if (!is_string($uuid) || (preg_match('/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/', $uuid) !== 1)) {
    return false;
} 
```

[你可以在这里](https://gist.github.com/joel-james/3a6201861f12a7acf4f2)看到完整的要点。

# ruby-on-rails - 使用配置选项安装特定的 gem 版本

> ID：12808598
> 
> 赞同：1
> 
> 时间：2012-10-09T21:21:21.537
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试安装旧版本的 nokogiri，但我无法指定格式：

我在用着

```
gem install nokogiri -v 1.5.2 -- --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib 
```

但这不是正确的语法。你知道怎么做吗？

**错误**

```
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /Users/boris/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
-----
libiconv is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:37:12.370

您只指定了`lib`要使用的目录，请尝试指定`include`目录：

```
gem install nokogiri -v 1.5.2 -- \
                 --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib \
                 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include 
```

您可以同时指定两者：

```
gem install nokogiri -v 1.5.2 -- \
                 --with-iconv-dir=/usr/local/Cellar/libiconv/1.13.1 
```

看起来[Nokogiri`iconv`在 1.5.2 和 1.5.5 版本之间](https://github.com/sparklemotion/nokogiri/compare/v1.5.2...v1.5.5#diff-43)的查找方式发生了一些变化，这可以解释为什么您能够安装最新版本但不能安装 1.5.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:43:42.087

我只是安装了自制软件，并使用它`brew link inconv`来创建必要的符号链接来编译 gem。

```
$brew link libiconv
Linking /usr/local/Cellar/libiconv/1.13.1... 18 symlinks created
$gem install nokogiri -v 1.5.2 
```

# jqgrid - jqgrid 重命名搜索对话框下拉项

> ID：12808600
> 
> 赞同：0
> 
> 时间：2012-10-09T21:21:32.760
> 
> 标签：jqgrid

搜索对话框有一个名为 is in 的下拉项。我喜欢将其重命名为不同的名称：介于

是否可以重命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:54:28.817

如果我正确理解您需要什么，您可以使用`odata`option 。从[答案](https://stackoverflow.com/a/3335982/315935)中查看[演示](http://www.ok-soft-gmbh.com/jqGrid/ClientsideEditing3.htm)，您将在其中看到“来自”的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:38:03.103

在您的 jqgrid 列上，将“SearchToolBarOperation”更改为您需要的操作。

# javascript - CodeIgniter Javascript 表单提交

> ID：12808601
> 
> 赞同：3
> 
> 时间：2012-10-09T21:21:34.017
> 
> 标签：javascript, jquery, ajax, codeigniter

我首先想说的是我对 javascript 和 jQuery 非常陌生。我想这是一个非常愚蠢和简单的问题，我知道这方面有很多问题，我确实尝试了所有这些问题。虽然我似乎无法解决我的问题。

我有一个输入字段和一个提交按钮。单击提交时，我想将输入的内容保存到数据库中，并继续与页面上的内容保持在同一页面中。

我的Javascript代码如下：

```
 <script type="text/javascript">
        $(document).ready(function()
        {
            $('#submit').submit(function(e)
            {

                e.preventDefault();
                var msg = $('#uname').val();
                $.post("c_test/test_submit", {uname: msg}, function(r) {
                   console.log(r);
                });
            });
        });
    </script> 
```

我的html代码如下（我使用codeigniter）：

```
$this->load->helper('form');
echo form_open();
$data =array ('name'=>'uname','id'=>'uname');
echo form_input($data) . '<br />';
$data=array('name'=>'submit','id'=>'submit','value'=>'Submit');
echo form_submit($data);
echo form_close(); 
```

如果有人能指出我的愚蠢，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:51:29.363

您正在使用

```
$('#submit').submit(function(e){ ... }); 
```

在这种情况下`submit`是`button/input`'s`id`并且它没有这样的事件`submit`，而不是你可以使用`click`事件，比如

```
$('#submit').click(function(e){ ... }); 
```

或者

```
$('#submit').on('click', function(e){ ... }); 
```

否则，您可以更改以下行

```
echo form_open(); 
```

到

```
echo form_open('c_test/test_submit', array('id' => 'myform')); 
```

而不是

```
$('#submit').click(function(e){ ... }); 
```

您可以使用

```
$('#myform').submit(function(e){
    e.preventDefault();
    var msg = $('#uname').val();
    var url=$(this).attr('action');
    $.post(url, {uname: msg}, function(r) {
        console.log(r);
    });
}); 
```

或者

```
$('#myform').on('submit', function(e){
    e.preventDefault();
    var msg = $('#uname').val();
    var url=$(this).attr('action');
    $.post(url, {uname: msg}, function(r) {
        console.log(r);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:25:51.797

似乎带有`id`“提交”的元素是表单的提交按钮 - `<input type="submit">`。但是，该`submit`事件由**form**触发，而不是由提交按钮触发，因此您的绑定事件处理程序不会触发。

将“提交”移动到表单上，或者在绑定事件处理程序`id`时更改选择器：`submit`

```
$('form').submit(function(e) {
    // handle submit event from the form
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:26:33.797

你必须这样做：

```
<?php
$this->load->helper('form');

echo form_open('', array( 'id' => 'myform'));
.. 
```

和：

```
 $('#myform').submit(function(e)
     {
            e.preventDefault();
            var msg = $('#uname').val();
            $.post("c_test/test_submit", {uname: msg}, function(r) {
               console.log(r);
            });

            return false;
     }); 
```

提交事件总是转到表单而不是表单按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:23:14.460

也许是这样的：

```
$data=array('name'=>'submit','id'=>'submit','value'=>'Submit','onsubmit'=>'return false;'); 
```

这将阻止表单发布，进而阻止页面刷新。但是，它将要求您通过 ajax 提交表单。

# shell - 在 SHELL 脚本上执行 C 程序

> ID：12808606
> 
> 赞同：0
> 
> 时间：2012-10-09T21:22:14.157
> 
> 标签：shell

我有一个 C 程序和一个包含文件的文件夹，我需要创建一个 shell 脚本来执行该 C 程序并接收一个文件（一个接一个）名称作为命令行读取的参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:24:05.097

您可以尝试以下 shell 代码：

```
#!/bin/sh

cd /PATH/TO/DIR
for i in *; do./C_APP "$i"; done 
```

# python - python - 将文本和图像添加到图像的简单方法（对于 fb 应用程序） - PIL 在依赖方面是地狱

> ID：12808608
> 
> 赞同：1
> 
> 时间：2012-10-09T21:22:19.907
> 
> 标签：python, django, python-imaging-library

对于我的 facebook 应用程序，我正在尝试从数据中生成图像。所以，我需要把文字和一些图片放在另一个背景图片上。我曾想过使用 PIL，但它有很多让我抓狂的依赖项。此外，最后我还必须在 heroku 上进行所有这些安装。那么，无论如何，在 python#Django 中将文本和图像添加到另一个图像的简单方法？

使用 pil 的一些问题：使用字体功能时，出现此错误：未安装 _imagingft C 模块

我也安装了枕头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:27:52.010

您将需要某种形式的图像处理库。甚至 Django 的一些组件，比如 ImageField，也需要 PIL。

如果你在构建 PIL 时遇到问题，有一个名为[Pillow](http://pypi.python.org/pypi/Pillow/#introduction)的分支，据说它旨在更好地打包它以使安装更容易。

# c# - 安装 Outlook 加载项时更改连接字符串

> ID：12808609
> 
> 赞同：1
> 
> 时间：2012-10-09T21:22:29.967
> 
> 标签：c#, visual-studio-2010, vsto, connection-string, outlook-addin

我有一个 Outlook 插件（使用 VS 2010 和 C# 创建），它连接到数据库服务器，但我遇到了一个问题，当我调试我的应用程序时，我有一个包含实际连接字符串的配置文件用于连接到数据库，问题是这个连接字符串可能会改变，我需要允许用户在安装插件时放置他的连接字符串，这意味着我的安装程序需要更改连接字符串的值。

有谁知道怎么做？

# objective-c - 如何将指针转换为 BOOL 返回 112？

> ID：12808610
> 
> 赞同：2
> 
> 时间：2012-10-09T21:22:35.490
> 
> 标签：objective-c

假设我有一个指向某个对象的指针，称为`myObject`，我需要知道它是否真的指向某个东西。这段代码怎么能：

```
// assume MyObjectClass *myObject;
return (BOOL)myObject; 
```

返回**112** ? 我知道，我总是可以写作

```
return (myObject == nil); 
```

一切都会好起来的。但是直到今天我一直假设，将*任何东西*显式转换为 bool*总是*会返回`true`或`false`（据我所知，0 总是被认为是`false`，任何其他值都被认为是`true`）并且带有它的 BOOL`YES`和`NO`值只是“重命名” bool . 所以基本上，我的问题是：

*   为什么返回 112？:-)
*   显式转换的结果是在 C/Objective-C 标准中的某个地方定义的，还是特定于编译器的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:27:18.983

在 Objective-C 中，`BOOL`宏只是一个`typedef`for `signed char`with `YES`/ `NO`defined，但`bool`它是一个实际的布尔值，可以是`true`or `false`。

它返回 112，因为它将指针的地址四舍五入到`signed char`类型。

以下是一些有很好答案的讨论：
[Objective-C : BOOL vs bool](https://stackoverflow.com/questions/541289/objective-c-bool-vs-bool)
[在objective-c 中YES/NO,TRUE/FALSE 和true/false 之间有区别吗？](https://stackoverflow.com/questions/615702/is-there-a-difference-between-yes-no-true-false-and-true-false-in-objective-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:24:53.017

C中“真”的定义是任何非零数。因此，就 C 而言，112 将被认为是正确的。来自 C99 标准：

> 6.3.1.2 布尔类型
> 
> 当任何标量值转换为 _Bool 时，如果该值比较等于 0，则结​​果为 0；否则，结果为 1。

您的值未转换为 1，因为您转换为 BOOL 而不是 _Bool。从技术上讲，转换为 0/1 将在 if 内部处理（尽管实际上实现更可能是 (myObject != 0) 在任何 if/while 类型语句中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:29:43.367

在 C 中，`bool`是`stdbool.h`布尔类型的宏`_Bool`。

并且保证将非零整数值转换`_Bool`为 yield `1`。

也就是说，结果`1 == (bool) 42`是`1`。

如果你使用一个`BOOL`类型作为另一个整数类型的别名（比如`signed char`），你会得到不同的结果：

结果`1 == (BOOL) 42`是`0`。

# php - 无法连接到数据库 test1

> ID：12808614
> 
> 赞同：-3
> 
> 时间：2012-10-09T21:23:10.263
> 
> 标签：php, mysql, sql

我可以连接到 mysql，但我收到一条错误消息`Could not select db`。
有什么我想念的吗？任何帮助深表感谢。

```
<?php 

$link = mysql_connect('localhost','',''); 
if (!$link) { 
    die('Could not connect to MySQL: ' . mysql_error()); 
} 
echo 'Connection OK'; 

$selected=mysql_select_db("test1",$link) or die("<br>Could q not select db");
mysql_close($link); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:26:02.173

可能有多种因素阻止您选择 MySQL 数据库。以下可能是原因：

1.  您连接到错误的数据库服务器。在这种情况下，您使用的是**localhost**。
2.  您使用错误的用户名连接。在这种情况下，您**没有使用用户名**
3.  您使用错误的密码进行连接。在这种情况下，您**没有使用密码**。
4.  您试图选择一个真正不存在的数据库。在这种情况下，您尝试选择**test1**。如果数据库不存在，您将需要[创建它](http://dev.mysql.com/doc/refman/5.0/en/create-database.html)。

您可以通过登录控制台并发出以下命令来复制程序正在执行的操作：

```
mysql -e "show databases" 
```

这将列出该用户可用的所有数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:27:53.110

代替

```
 "<br>Could q not select db" 
```

和

```
 "<br>Could q not select db" . mysql_error(); 
```

显示详细的mysql错误。

大多数情况下，您输入了错误的 mysql 详细信息。检查数据库是否存在。

# asp.net - .RDLC 报告未显示在 ASPX 页面上

> ID：12808616
> 
> 赞同：0
> 
> 时间：2012-10-09T21:23:13.047
> 
> 标签：asp.net, .net, entity-framework-4, rdlc

我有一个简单的 .RDLC 报告，它没有显示在它的 ASPX 页面上。我的 ASPX 代码是：

```
<rsweb:ReportViewer ID="rvReport" runat="server" Height="500px" Width="100%" 
    Font-Names="Verdana" Font-Size="8pt" InteractiveDeviceInfos="(Collection)" 
    WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt">
    <LocalReport ReportPath="reports\rptAttendee.rdlc">
    </LocalReport>
</rsweb:ReportViewer> 
```

在 .cs 文件中，我从我的 Entity Framework 上下文创建一个数据集并将其转换为 ReportData Source，如下所示：

```
rvReport.LocalReport.DataSources.Clear();
ReportDataSource dataSource = new ReportDataSource("dsAttendees", attendees);
rvReport.LocalReport.DataSources.Add(dataSource);
rvReport.LocalReport.Refresh(); 
```

我已经确认数据源是用数据创建的，并且报表视图在添加数据源后注册数据源。

在 RDLC 文件上，我创建了一个具有相同名称 (dsAttendees) 和完全相同的列/类型的空数据源。当我运行 Web 应用程序时，ASPX 页面不显示报告。检查页面，我确实看到了报表查看器控件，但它是空的；即使是非数据绑定文本和工具栏也不会出现。

我怀疑问题是 RDLC 文件没有获取数据源。有没有我遗漏的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:56:52.493

我不确定，但可能你应该添加这个：

```
rvReport.Reset();
```

后

```
rvReport.LocalReport.DataSources.Clear();
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:58:39.883

我最终改用网格并为网格编写导出，因为客户大多只是希望能够导出到 Excel。

# ios - 如何将委托和数据源设置为 UITableViewController 的视图？

> ID：12808623
> 
> 赞同：0
> 
> 时间：2012-10-09T21:23:51.717
> 
> 标签：ios, uitableview

这是我现在的代码，这是错误的。由于视图的变化，我没有得到 viewDidLoad。

```
UITableView *tableView = [[UITableView alloc] init];
tableViewController = [[TableViewController alloc] init];
tableViewController.view = tableView;
tableViewController.title = @"test";

tableView.delegate = self;
tableView.dataSource = self; 
```

我真正需要的是改变`tableViewController`' 视图`delegate`和`datasource`我的`self`.
问题是由于某种原因我不能这样做。

像这样的东西会很棒：

```
tableViewController = [[TableViewController alloc] init];
tableViewController.title = @"test";

tableViewController.view.delegate = self;
tableViewController.view.dataSource = self; 
```

但由于某种原因，我无法设置`tableViewController`view 属性的委托或数据源。

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:40:07.037

确保您尝试用作数据源的类列出了正确的协议并实现了委托方法。

```
@interface MyNewViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@end 
```

然后你应该能够做类似的事情。

```
tableViewController.tableView.delegate = self;
tableViewController.tableView.datasource = self; 
```

# jpgraph - JpGraph 中的图例

> ID：12808629
> 
> 赞同：0
> 
> 时间：2012-10-09T21:24:11.160
> 
> 标签：jpgraph

我怎样才能在图例中获得漂亮的“方形”标记元素，就像在这个例子中一样：

[http://jpgraph.net/features/src/show-example.php?target=new_bar6.php](http://jpgraph.net/features/src/show-example.php?target=new_bar6.php)

一直以来，我都在下一个例子中得到传说：

[http://jpgraph.net/features/src/show-example.php?target=new_line1.php](http://jpgraph.net/features/src/show-example.php?target=new_line1.php)

提前Tnx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T01:15:53.023

```
$graph->legend->SetMarkAbsSize(7); 
```

这应该给你正方形。使用实际数字来改变方块的大小。

# signalr - SIGnalR 到组注册在 Connect 方法上失败

> ID：12808630
> 
> 赞同：1
> 
> 时间：2012-10-09T21:24:23.820
> 
> 标签：signalr, signalr-hub

我在*signalr*`IConnected`的集线器（带接口）中使用这部分代码。问题是当我调用方法时，客户确实不在组中，我无法向他发送消息 throw this group。当我稍后从客户端调用某些方法以在组中注册时，一切正常。我不明白的是，在这两种方法中（甚至在）都有相同的方法。*`Group.Add``Connect``Connect()``registerClientToGroup()``Groups.Add`*

 *```
public System.Threading.Tasks.Task Connect()
{
  Groups.Add(this.Context.ConnectionId, "group");
  return null;
} 
```

一些想法？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T23:02:48.913

我不确定这是否是您的问题的直接原因，但我很惊讶您没有收到错误，因为您为`Task`from返回一个空值`Connect`。您可能会遇到错误，只是没有调试/捕获它们。

如果您没有任何其他`Connect`需要您自己做的工作，`Task`那么只需`Task`从调用中返回`Groups.Add`如下：

```
public Task Connect()
{
    return Groups.Add(this.Context.ConnectionId, "group");
} 
```*

# magento - 是 Magento 版本。1.3.2.4 仍然支持

> ID：12808638
> 
> 赞同：0
> 
> 时间：2012-10-09T21:24:56.667
> 
> 标签：magento

我负责管理几年前在 Magento 版本中建立的一个小站点。1.3.2.4

该网站经常遇到莫名其妙的问题，例如产品突然不按价格显示（没有更改设置）和订单一式三份发送到网站所有者的电子邮件。似乎很难找到为什么会发生这样的事情的原因，甚至更难获得支持。我知道正在使用的版本很旧，升级是一项严肃而昂贵的开发工作。是否可以公平地说，因为正在使用旧版本，我们可以预期该网站随着时间的推移变得越来越不健壮？

非常感谢贝弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:20:07.537

按照“它是否适用于较新版本的 PHP？”的顺序，答案是“除非您自己修改代码，否则不会”。这意味着，要强调一点，希望您的网络托管服务提供商在此过程中“获得宗教信仰”，决定通过升级 PHP 来升级安全漏洞，这会突然导致您的网站崩溃。

Magento 1.3.xx 在处理 Prototype Framework 和 Scriptaculous 版本时也显示了它的年龄，它们的“按日期销售”会导致新浏览器出现奇怪和烦人的问题。

# linux - Apache - 配置由相同 IP 但不同端口访问的多个网站

> ID：12808641
> 
> 赞同：2
> 
> 时间：2012-10-09T21:25:01.073
> 
> 标签：linux, apache, web, port

我在 IIS7.5 中轻松做到了这一点。

假设我有一个域 mbdev.myftp.biz。

在 IIS 上，我有设置站点，但每个站点都有不同的端口。

例子：

```
mbdev.myftp.biz:8004
mbdev.myftp.biz:8006 
```

唯一不同的是站点的端口。上面的 URL 指向 IIS 框上的实际站点。

我怎样才能用 APACHE 完成同样的事情？让站点位于特定端口上？

例如：

```
mbdev.myftp.biz:8600
mbdev.myftp.biz:8601 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:06:50.820

Apache 通过 VirtualHost 指令来实现这一点。可以在[http://httpd.apache.org/docs/2.4/vhosts/index.html](http://httpd.apache.org/docs/2.4/vhosts/index.html)上找到 2.4 版的文档，更具体地说是配置指令[http://httpd.apache.org/docs/2.4/mod/core .html#虚拟主机](http://httpd.apache.org/docs/2.4/mod/core.html#virtualhost)

从上面的链接中提取的示例虚拟主机配置指令：

```
<VirtualHost 10.1.2.3:80>
  ServerAdmin webmaster@host.example.com
  DocumentRoot /www/docs/host.example.com
  ServerName host.example.com
  ErrorLog logs/host.example.com-error_log
  TransferLog logs/host.example.com-access_log
</VirtualHost> 
```

# asp.net - 如何显示按 2 个参数分组的 asp.net 图表

> ID：12808642
> 
> 赞同：0
> 
> 时间：2012-10-09T21:25:04.797
> 
> 标签：asp.net, visual-studio-2010, .net-4.0, charts

我想向使用该`Chart`组件的用户展示一些精简的数据。

SQL（C#/甲骨文）：

```
SELECT c.date, c.approved, count(distinct c.f1) amt_c, count(b.f1) amt_b, sum(b.value) sum_values
FROM contracts c
JOIN bens b ON c.ben_id = b.id
WHERE :YearMonth = to_char(c.date,'YYYYMM') AND NOT c.approved = 'REJECTED'
GROUP BY c.date, c.approved
ORDER BY c.date 
```

我在将 DataSet 传递给 .aspx 页面中的 ObjectDataSource 的方法中有此 SQL（该`approved`字段可以有 3 个值：REJECTED、APPROVED 和 PENDING）。

.aspx 页面中的图表：

```
<asp:Chart ID="Chart1" runat="server" DataSourceID="RelatorioDataSource" 
    Width="700px" Compression="10" Palette="Chocolate">
    <Series>
        <asp:Series Name="Contracts" XValueMember="date" 
            YValueMembers="amt_c" IsXValueIndexed="False" 
            XValueType="DateTime" IsValueShownAsLabel="True" BorderDashStyle="DashDot" 
            CustomProperties="DrawingStyle=Emboss, EmptyPointValue=Zero, DrawSideBySide=True" 
            YValuesPerPoint="4">
        </asp:Series>
        <asp:Series BorderDashStyle="DashDot" ChartArea="ChartArea1" 
            CustomProperties="DrawingStyle=Emboss, EmptyPointValue=Zero, DrawSideBySide=True" 
            IsValueShownAsLabel="True" Name="Bens" 
            XValueMember="date" XValueType="DateTime" 
            YValueMembers="amt_b" YValuesPerPoint="4">
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

我想显示每天批准/待定合同/本的数量（4 个条形图），但图表仅显示两列。 ![柱形图](../Images/cebe024bdd26e60c09cb05e27198e16b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:47:55.617

通过创建一个对象`relatorio`来保存返回的数据（而不是 DataSet）、使用 LINQ to Objects 过滤结果以及在 codeBehind 中以编程方式添加系列来解决。

```
var approved = relatorio
    .Where(r => r.APPROVED == "APPROVED")
    .ToList()
    ;
var pending = relatorio
    .Where(r => r.APPROVED == "PENDING")
    .ToList()
    ; 
```

创建图例

```
Legend legenda = new Legend("Legenda");
legenda.Docking = Docking.Bottom;
legenda.LegendStyle = LegendStyle.Row;
legenda.Alignment = System.Drawing.StringAlignment.Center; 
```

在循环中创建系列

```
for (int i = 0; i < 4; i++) {
    Series temp = new Series {
        XAxisType = AxisType.Primary,
        XValueType = ChartValueType.DateTime,
        YAxisType = AxisType.Primary,
        //mostra só a quantidade de contratos
        IsValueShownAsLabel = i % 2 == 0 ? true : false,
        ChartType = SeriesChartType.Column,
        CustomProperties = "EmptyPointValue=Zero",
        Legend = "Legenda"
    };
    grafico.Series.Add(temp);
}
approvedValues.Points.DataBindXY(approved, "DATE", approved, "SUM_VALUES"); 
```

数据绑定系列

```
// approved CONTRACTS
grafico.Series[0].Points.DataBindXY(approved, "DATE", approved, "AMT_C");
grafico.Series[0].LegendText = "Contratos approved";
// approved BENS
grafico.Series[1].Points.DataBindXY(approved, "DATE", approved, "AMT_B");
grafico.Series[1].LegendText = "Ben approved";
grafico.Series[1].ChartType = SeriesChartType.Line;
// pending CONTRACTS
grafico.Series[2].Points.DataBindXY(pending, "DATE", pending, "AMT_C");
grafico.Series[2].LegendText = "Contratos pending";
// pending BENS
grafico.Series[3].Points.DataBindXY(pending, "DATE", pending, "AMT_B");
grafico.Series[3].LegendText = "Ben pending";
grafico.Series[3].ChartType = SeriesChartType.Line; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-29T19:39:10.453

为每个系列创建一个组..

例子： `chart1.series[0]["StackedGroupName"] = "group1";`

# ruby - 如何从 Ruby 中的一维数组创建多维数组？

> ID：12808647
> 
> 赞同：-4
> 
> 时间：2012-10-09T21:25:29.093
> 
> 标签：ruby, multidimensional-array

假设我有一个数组：

```
a=['hello','shivam','how','are','you'] 
```

...我想把它变成一个像下面这样的多维数组：

```
[['hello','shivam'],'how',['are','you']] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:06:20.963

```
def transform ar
  [ [ar[0], ar[1]], ar[2], [ar[3], ar[4]] ]
end 
```

这正是您想要做的，如果您不共享您想要订购的拼盘，我将无法做更多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:46:30.917

您可能需要考虑使用[zip](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-zip)方法：

```
a = [1,2,3] 
b = [4,5,6]

a.zip(b)
 => [[1, 4], [2, 5], [3, 6]] 
```

尽管这对您没有帮助，因为您显然也有一些奇异的数组条目。

# neo4j - Neo4jClient：删除关系

> ID：12808648
> 
> 赞同：1
> 
> 时间：2012-10-09T21:25:32.193
> 
> 标签：neo4j, cypher, neo4jclient

我有以下密码查询：

```
start n=node(0)
match (n)-[:USER_BELONGS_TO]-(x)-[r]->(y)
where (x.EmailAddress = 'someoneelse@something.net')
and (y.EmailAddress = 'someone@something.net')
and (type(r) = 'FOLLOWS')
delete r; 
```

如何让 Neo4jClient 做同样的事情？（并告诉我查询是成功还是失败）

我在想这样的事情：

```
var results = new CypherFluentQuery(_dataOperations.GraphClient)
                  .Start("n", _dataOperations.GraphClient.RootNode)
                  .Match(string.Format("(n)-[:{0}]-(x)-[r]->(y)", UserBelongsTo.TypeKey))
                  .Where(string.Format("x.EmailAddress! ='{0}'", follower))
                  .And()
                  .Where(string.Format("y.EmailAddress! ='{0}'", leader))
                  .And()
                  .Where(string.Format("type(r) = '{0}'", Follows.TypeKey))
                  .Delete("r")
                  .Results; 
```

但是 Delete() 在这种情况下不起作用。

如果我能得到一个RelationshipReference，那么我可以调用该方法

```
void DeleteRelationship(RelationshipReference reference); 
```

但我不知道您是否可以通过 cypher 以及当我尝试如下查询时获得 RelationshipReference。

```
 var results = new CypherFluentQuery(_dataOperations.GraphClient)
              .Start("n", _dataOperations.GraphClient.RootNode)
              .Match(string.Format("(n)-[:{0}]-(x)-[r]->(y)", UserBelongsTo.TypeKey))
              .Where(string.Format("x.EmailAddress! ='{0}'", follower))
              .And()
              .Where(string.Format("y.EmailAddress! ='{0}'", leader))
              .And()
              .Where(string.Format("type(r) = '{0}'", Follows.TypeKey))
              .Return<RelationshipReference<Follows>>("r")
              .Results
              .SingleOrDefault(); 
```

当在 Neo4jClient 中进行反序列化时，我得到以下“没有为此对象定义的无参数构造函数”。无论如何，我想在一个查询中完成这一切，而不是两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T03:42:13.767

此问题现已[修复](https://bitbucket.org/Readify/neo4jclient/issue/40/should-be-able-to-add-cypher-delete-clause)。您现在可以在 Where 之后添加 Delete 子句。

# c++ - 如何更新 code::blocks 以使用 TDM-GCC？

> ID：12808650
> 
> 赞同：4
> 
> 时间：2012-10-09T21:25:43.787
> 
> 标签：c++, codeblocks

我需要`unique_ptr`在我的 C++ 作业中使用。

我下载了一个新的编译器 TDM-GCC-4.7.1，并安装了它。然后我将 GNU GCC Compiler 的目录更改为 option: 中的安装路径`Setting->Compiler...->Toolchain Executable`。

但它不起作用。当我定义一个`unique_ptr`. 会发生错误：`"unique pointer is not a command of 'std' "`

使用智能指针的原因是为了提供强大的异常安全性，这也是本次赋值的要求。我只需要使用 C++11 的这个新特性...另外，我使用的操作系统是 Window 7。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-29T12:22:46.487

1.  下载最新的tdm-gcc [http://tdm-gcc.tdragon.net](http://tdm-gcc.tdragon.net)
2.  Settings->Compiler, Selected Compiler [GNU GCC Compiler] Copy and Create a new configuration [GNU GCC Compiler 4.9.2]
3.  详细配置 ![详细配置图片](../Images/a9068a8cd6b1930d4bf8cf83cd45c0d0.png)
4.  通过单击将新的编译器配置设置为默认值`Set as default`
5.  将编译器设置更改为`having c++11`.

PS: 代码::blocks 版本 13.12，tdm-gcc 4.9.2

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-20T00:22:50.137

在 CodeBlocks 中，您可以在项目编译器设置或全局编译器设置中设置 C++11 模式。由于您可能更频繁地使用它，以下是您如何全局更改它：

转到设置->编译器->（这里应该有选项列表，在编译器标志中）->选择“让 g++ 遵循 C++11 ISO C++ 语言标准 [-std=c++11]”

以下是如何为单个项目更改它：

转到项目-> 构建选项->（此处应该有选项列表，在编译器标志中）-> 选择“让 g++ 遵循 C++11 ISO C++ 语言标准 [-std=c++11]”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-19T22:37:09.273

1.  Remember to `#include <memory>`
2.  Add `-std=gnu++0x` or `-std=c++11` compiler flags......whichever works

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-04T03:13:43.663

这可能是一个迟到的答案，但对于任何要求这样做的人，将选项“动态库的链接器”从 gcc 更改为 g++ 对我有用

# nhibernate - NHibernate 代码映射：将旧版非 int ID 键映射到我的实体中的 int 属性，得到“无法确定类型”异常

> ID：12808651
> 
> 赞同：2
> 
> 时间：2012-10-09T21:25:44.207
> 
> 标签：nhibernate, nhibernate-mapping, mapping-by-code

我有一个遗留数据库，它使用存储为 VARCHAR(8) 的零填充数字作为表中的主键值。（例如，“00032982”）

我想将这些映射到我的实体对象中的 Int32 属性而不是字符串。

我的第一次尝试是创建一个实现 IUserType 的类。但是我正在映射一个 ID，而不是一个属性，并且按代码映射不会编译：（也许我没有做那部分对吗？）

```
Argument 1: cannot convert from 'TestQWebApi.Infrastructure.StringIntUserType' to 'NHibernate.Type.IIdentifierType' 
```

我查看了 IIdentifierType，它有 40 多个成员。我到处看了看，似乎创建一个子类 NHibernate.Type.ImmutableType 的自定义类型将是解决方案。（......也许这是我的第一个错误？）

因此，我创建了一个基于 ImmutableType 的新类，它在 Set() 方法中对其进行零填充：

```
public class LegacyIntKeyType : ImmutableType, ILiteralType, IDiscriminatorType
{
      public LegacyIntKeyType() : base(SqlTypeFactory.GetString(8))
      {
      }

      public override string Name
      {
        get { return "LegacyIntKeyType"; }
      }

      public override object Get(IDataReader rs, int index)
      {
          try
          {
              return Convert.ToInt32(rs[index]);
          }
          catch (Exception ex)
          {
              throw new FormatException(string.Format("Input string '{0}' was not in the correct format.", rs[index]), ex);
          }
      }

      public override object Get(IDataReader rs, string name)
      {
          try
          {
              return Convert.ToInt32(rs[name]);
          }
          catch (Exception ex)
          {
              throw new FormatException(string.Format("Input string '{0}' was not in the correct format.", rs[name]), ex);
          }
      }

      public override System.Type ReturnedClass
      {
          get { return typeof(Int32); }
      }

      public override void Set(IDbCommand rs, object value, int index)
      {
          ((IDataParameter)rs.Parameters[index]).Value = string.Format("{0:d8}", value.ToString());
      }

      public object StringToObject(string xml)
      {
          return FromStringValue(xml);
      }

      public override object FromStringValue(string xml)
      {
          return Int32.Parse(xml);
      }

          public string ObjectToSQLString(object value, Dialect dialect)
      {
          return value.ToString();
      }

      public override string ToString(object value)
      {
          return value.ToString();
      } 

  } 
```

在我的基础实体类中，我将其定义为 Int32：

```
public abstract class Entity
{
    public virtual Int32 Id { get; protected set; }
} 
```

然后我尝试映射它：

```
public class ProcedureMap : ClassMapping<Procedure>
{
    public ProcedureMap()
    {            
        Table("procfile");
        Id(x => x.Id, m =>
        {
          m.Column("key_proced");
          m.Type(new LegacyIntKeyType());
        });
        Property(x => x.Name, m => m.Column("procname"));
    }
} 
```

然后我得到了这个异常......我觉得这可能表明其他东西。这是堆栈跟踪：

```
[MappingException: Could not determine type for: TestQWebApi.Models.LegacyIntKeyType, TestQWebApi, for columns: NHibernate.Mapping.Column(key_proced)]
   NHibernate.Mapping.SimpleValue.get_Type() +317
   NHibernate.Cfg.XmlHbmBinding.ClassIdBinder.CreateIdentifierProperty(HbmId idSchema, PersistentClass rootClass, SimpleValue id) +301
   NHibernate.Cfg.XmlHbmBinding.ClassIdBinder.BindId(HbmId idSchema, PersistentClass rootClass, Table table) +396
   NHibernate.Cfg.XmlHbmBinding.RootClassBinder.Bind(HbmClass classSchema, IDictionary`2 inheritedMetas) +987
   NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddRootClasses(HbmClass rootClass, IDictionary`2 inheritedMetas) +104
   NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddEntitiesMappings(HbmMapping mappingSchema, IDictionary`2 inheritedMetas) +165
   NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.Bind(HbmMapping mappingSchema) +117
   NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName) +244 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:55:15.837

你必须实现 NHibernates IUserType

```
class MyIdUserType : IUserType
{
    public object Assemble(object cached, object owner)
    {
        return DeepCopy(cached);
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Disassemble(object value)
    {
        return DeepCopy(value);
    }

    bool IUserType.Equals(object x, object y)
    {
        return Object.Equals(x, y);
    }

    public virtual int GetHashCode(object x)
    {
        return (x != null) ? x.GetHashCode() : 0;
    }

    public bool IsMutable { get { return false; } }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        return Int32.Parse((string)NHibernateUtil.String.Get(rs, names[0]));
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        NHibernateUtil.String.Set(cmd, string.Format("{0:d8}", value), index);
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public Type ReturnedType { get { return typeof(Int32); } }

    public SqlType[] SqlTypes { get { return new []{ SqlTypeFactory.GetString(8) }; } }
} 
```

# jquery - 收到错误消息“未捕获的 TypeError: Object .gearImg has no method 'css'”

> ID：12808653
> 
> 赞同：1
> 
> 时间：2012-10-09T21:26:00.233
> 
> 标签：jquery, html, css, hover

我正在使用 jQuery 更改某些元素的 css，同时将鼠标悬停在其他元素上，我在 Chrome 开发人员工具中收到此错误： ***“Uncaught TypeError: Object .gearImg has no method 'css'”*** 这是我的 css 代码：

```
.gearImg{
    position: absolute;
    z-index: 10;
    top: 2px;
    right: 10px;
    opacity: 0.5;

} 
```

这是我的jQuery代码：

```
 $('#settings_div').hover(function(){
        $(this).show();
        alert(('.gearImg').css('opacity')); //alerting to find the problem, should show 0.5
    },
    function(){
        $(this).hide();
        ('.gearImg').css('opacity', 0.5);
    }); 
```

哪里有问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:27:11.200

请试试这个：**演示** [http://jsfiddle.net/VGAv8/](http://jsfiddle.net/VGAv8/)

`$`失踪**-**如果您对`$`阅读此内容进一步好奇什么是[JavaScript 中“$”符号的含义](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)

休息应该适合原因`:)`

**代码**

```
$('#settings_div').hover(function(){
        $(this).show();
        alert($('.gearImg').css('opacity')); //alerting to find the problem, should show 0.5
    },
    function(){
        $(this).hide();
        $('.gearImg').css('opacity', 0.5);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:27:29.827

把`jQuery`/`$`放在前面`('.gearImg')`怎么样？
应该是`jQuery('.gearImg')`或`$('.gearImg')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:33:20.707

选择器前面缺少**$**

```
$('#settings_div').hover(function(){
        $(this).show();
        alert($('.gearImg').css('opacity')); //alerting to find the problem, should show 0.5
    },
    function(){
        $(this).hide();
        $('.gearImg').css('opacity', 0.5);
    }); 
```

# eclipse - 无法将新文件添加到 EGit 中的存储库

> ID：12808656
> 
> 赞同：11
> 
> 时间：2012-10-09T21:26:06.583
> 
> 标签：eclipse, git, github, egit

我将 EGit 与 Eclipse Juno 一起使用。我与本地存储库合作，世界很好。甚至添加一个 GitHub 存储库似乎也没问题。我将它添加到“远程”下的本地存储库中，因此我可以轻松地将提交推送到 github。但过了一会儿，我注意到没有新文件添加到存储库中，即使我正在提交更改。它们只是不受版本控制。它们没有符号，这应该意味着它们被忽略了。这是我的 .ignore

```
.gwt
gwt-unitC
ache
Versandanzeige_Web_proto.war
Versandanzeige_Web.war
war/ajax
war/WEB-INF/classes
war/WEB-INF/deploy
www-test 
```

*   这些文件在 src 中，所以甚至没有关闭。
*   即使选中“显示未跟踪的文件”，新文件也不会出现在提交对话框中。它们不会出现在暂存窗口中。
*   RK -> Team ->“添加到索引”没有帮助。
*   这些文件具有相同的权限并归同一用户所有
*   他们绝对不会出现在 github

任何想法如何解决这个问题？需要任何其他信息吗？

更新：错误日志中没有错误。

我的最新分支旁边确实有（HEAD）。

更多细节： ~~我有我的行李箱 T，从 T0 开始。在 T1，有一个分支 A，它对 T1 进行了更改。在 T2 处，还有另一个分支 B。它对 T2 没有任何更改。奇怪的是：它没有在历史视图中显示。master 分支也不见了。我仍然可以切换到它们。当我这样做时`git reflog`，在 T2 之前或包括 T2 之前没有条目，只有之后的所有条目。~~
我删除了没有提交的分支： ![在此处输入图像描述](../Images/6f4d6f8e8769f55fb96289010946442a.png) ![在此处输入图像描述](../Images/f378ea27f8cc606da9ed16673d4e7e15.png) ![在此处输入图像描述](../Images/d04305cc89843bd42f7e5fae081bf29e.png)

新文件仍显示为已忽略：
![在此处输入图像描述](../Images/e8eeb8a9ca9b5812a66a5c4a0c655528.png)

命令行输出：

```
$ git branch -a: 
* master 
maven 

$ git status 
# On branch master nothing to commit (working directory clean) 
```

关于分离的 HEAD 提议：我没有做文章中描述的事情，检查一个旧状态并从中工作。而且我看不到任何未完成的提交。

对不起我的英语不好，我有一段时间没有使用它。如果我写了一些难以理解的东西，请要求澄清。

更新：我可以在另一个文件夹（/Versaandanzeige_Web/war/WEB-INF/lib/gwt-servlet.jar）中添加一个文件。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-10T14:43:54.483

好吧，我发现了错误。由于某种原因，我真的不知道，我的项目文件夹（在存储库文件夹中）上方还有另一个 .gitignore 文件，其中包含了我的 COMPLETE 项目文件夹。我真的不知道这是怎么回事。当然，这个文件并没有出现在 Eclipse 中。我试图在命令行上添加文件，但将错误消息“文件在 .gitignore 文件中”。删除该文件后，它找到了。抱歉，添麻烦了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-18T10:48:46.530

有时 EGit 无法正常工作，添加到索引也不起作用。在这种情况下，您可以使用文件资源管理器转到项目的根文件夹（放置 .git 文件夹），右键单击文件夹内的空白区域，选择“git bash”。这将为您打开 git 控制台。现在输入“git add path_to_file”。这会将文件添加到 git 系统以进行索引。现在去在 Eclipse 中刷新你的项目，你会看到它被添加到了索引中。这可以用于解决 eclipse 内部的冲突，因为通过重新添加合并的文件，添加到索引表示“标记为已合并”到 git 系统。

有时“从索引中删除”在 Eclipse 中不起作用，您可以在这种情况下做同样的事情：这次写“git remove --cached -f path_to_file”。此处不要忘记添加“--cached”，否则您的文件将被删除。-f 代表“强制”以强制执行命令。对于要从​​索引类型“git remove --cached -r -f path_to_folder”中删除的任何文件夹（目录）。

# asp.net-mvc - 所有模型和 Formcollection 值为 null、空白或在 Firefox 或 Chrome 中不存在

> ID：12808659
> 
> 赞同：1
> 
> 时间：2012-10-09T21:26:16.433
> 
> 标签：asp.net-mvc, firefox, google-chrome, model, formcollection

在调试期间，我的 MVC 模型和 Formcollection 是空白的，在 FireFox (15) 或 Chrome（最新版本）中没有值。

在使用 IE (9) 进行调试期间，我可以很好地看到这些值。

你知道解决方案是什么吗？这对于无法针对这些浏览器进行任何编程的面向公众的网站来说是非常严重的。

这是我的观点...

```
@model PDFConverterModel.ViewModels.ViewModelTemplate_Guarantors

@{
    ViewBag.Title = "BHG :: PDF Generator";
}
<h2>@ViewBag.Message</h2>

<div>

    <table style="width: 1000px">
        <tr>
            <td colspan="5">
                <img alt="BHG Logo" src="~/Images/logo.gif" />
            </td>
        </tr>

        @using (Html.BeginForm("ProcessForm", "Home", FormMethod.Post))
        {  
            <tr>
                <td>
                @(Html.Kendo().IntegerTextBox()
                        .Name("LoanID")
                        .Placeholder("Enter Loan ID")
                )
            </tr>
            <tr>
                <td>@Html.LabelFor(model => model.LoanType)
                    @Html.DisplayFor(model => model.LoanType)
                </td>
                <td>
                    <label for="ddlDept">Department:</label>
                    @(Html.Kendo().DropDownList()
                            .Name("ddlDept")
                            .DataTextField("DepartmentName")
                            .DataValueField("DepartmentID")
                            .Events(e => e.Change("Refresh"))
                            .DataSource(source =>
                            {
                                source.Read(read =>
                                {
                                    read.Action("GetDepartments", "Home");
                                });
                            })
                    )
                </td>
            </tr>

            if (Model.ShowGeneratePDFBtn == true)
            {
                if (Model.ErrorT == string.Empty)
                {
            <tr>
                <td colspan="5">
                    <u><b>@Html.Label("Templates:")</b></u>
                </td>
            </tr>
            <tr>
                @for (int i = 0; i < Model.Templates.Count; i++)
                {  
                    <td>
                        @Html.CheckBoxFor(model => Model.Templates[i].IsChecked)
                        @Html.DisplayFor(model => Model.Templates[i].TemplateId)
                    </td> 
                }

            </tr>
                }
                else
                {
            <tr>
                <td>
                    <b>@Html.DisplayFor(model => Model.ErrorT)</b>
                </td>
            </tr>
                }

                if (Model.ErrorG == string.Empty)
                {
            <tr>
                <td colspan="5">
                    <u><b>@Html.Label("Guarantors:")</b></u>
                </td>
            </tr>
            <tr>
                @for (int i = 0; i < Model.Guarantors.Count; i++)
                { 
                    <td>
                        @Html.CheckBoxFor(model => Model.Guarantors[i].isChecked)
                        @Html.DisplayFor(model => Model.Guarantors[i].GuarantorFirstName)&nbsp;@Html.DisplayFor(model => Model.Guarantors[i].GuarantorLastName)
                    </td> 
                }

            </tr>
                }
                else
                {
            <tr>
                <td>
                    <b>@Html.DisplayFor(model => Model.ErrorG)</b>
                </td>
            </tr>
                }
            }   
            <tr>
                <td colspan="3">
                    <input type="submit" name="submitbutton" id="btnRefresh" value='Refresh' />
                </td>
                @if (Model.ShowGeneratePDFBtn == true)
                {
                    <td>
                        <input type="submit" name="submitbutton" id="btnGeneratePDF" value='Generate PDF' />
                    </td>
                }
            </tr>
            <tr>
                <td colspan="5">
                    @Model.Error
                </td>
            </tr>
        }
    </table>

</div>

<script type="text/javascript">

    $('btnRefresh').on('click', '#btnRefresh', function () {
        Refresh();
    });

    function Refresh() {

        var LoanID = $("#LoanID").val();

        if (LoanID != "") {
            document.forms[0].submit();
        }
        else {
            alert("Please enter a LoanId");
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T07:24:48.213

我知道这是一个非常古老的问题，但回答这个问题可能会帮助像在这个问题上苦苦挣扎的人。

我有一个类似的问题。问题出在这里：

```
<table style="width: 1000px">
        <tr>
            <td colspan="5">
                <img alt="BHG Logo" src="~/Images/logo.gif" />
            </td>
        </tr>

        @using (Html.BeginForm("ProcessForm", "Home", FormMethod.Post))
        {  
            <tr>
             <td>
                @(Html.Kendo().IntegerTextBox()
                        .Name("LoanID")
                        .Placeholder("Enter Loan ID")
                )
             </td>
            </tr>
        }
</table> 
```

开始表格后直接有`<tr>`标签！在这种情况下，像 chrome 和 Mozilla 这样的浏览器会感到困惑。`<table>`标签应该在表单内。如果我们查看您的代码，这正是我所做的，`<table>`标签是之前`@using Html.BeginForm`的。Internet Explorer 以某种方式理解这一点，但其他浏览器不理解。

当我做一个检查元素时，我发现每个标签中都有一个表单标签`<tr>`，它总是将 FormCollection 返回为空。简单地`<table>`在形式内定义解决了我的问题。

所以它应该是这样的：

```
<table style="width: 1000px">
            <tr>
                <td colspan="5">
                    <img alt="BHG Logo" src="~/Images/logo.gif" />
                </td>
            </tr>
            <tr><td>
            @using (Html.BeginForm("ProcessForm", "Home", FormMethod.Post))
            {
             <table>  
                <tr>
                 <td>
                    @(Html.Kendo().IntegerTextBox()
                            .Name("LoanID")
                            .Placeholder("Enter Loan ID")
                    )
                 </td>
                </tr>
             </table>
            }
            </td></tr> 
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:58:39.347

我刚刚通过实验发现了问题所在。

Telerik MVC 小部件不发出任何 FormCollection 数据！！！！

只有 EditorFor 和 TextBoxFor 发出这些值，以及输入按钮。

如果我不能使用它们的 FormCollection 值，这些小部件有什么用？？？？特别是 DropDownList ，我可以在其中检索数据并需要将所选值传递给其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:07:23.677

（这更适合作为评论，但我还不能评论）

为了将来参考，这里有一个规范（W3C 可能有不同的东西），用于提交表单时提交的内容：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#category-submit](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#category-submit)

您可以查看生成的任何 HTML 以确保它被提交。您还可以使用 Fiddler 之类的东西来查看 Http 请求

# php - 添加 CSS 到表单类型是 Symfony2

> ID：12808660
> 
> 赞同：12
> 
> 时间：2012-10-09T21:26:17.743
> 
> 标签：php, css, forms, symfony

我有一个编辑表单，该表单是通过 symfony2 表单类型制作的。我检查了文档，但找不到将 CSS 添加到表单的任何选项。表单正确显示数据，一切都很好我想做的就是为每个字段添加样式。

我的编辑类型是

```
 public function buildForm(FormBuilder $builder, array $options)
{
    $builder
    ->add('id', 'hidden')
    ->add('patent_name', 'text', array('label' => 'Patent Name'))
    ->add('description', 'textarea', array('label' => 'Description', 'required' => false))
    ->add('appln_auth','text', array('label' => 'Application Authorization'))
    ;
} 
```

任何人都知道我可以添加 css 吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T21:36:14.163

这是构建表单时可以执行的方式，

```
 $builder->add('field_name', 'text', array('label' => 'Field Label', 'attr' => array('class' => 'fieldClass'))); 
```

您也可以在渲染表单字段时执行此操作，请查看[Twig 模板表单功能参考](http://symfony.com/doc/2.0/reference/forms/twig_reference.html)

```
{{ form_label(form.field, 'label', { 'attr': {'class': 'foo'} }) }}
{{ form_widget(form.field, { 'attr': {'class': 'bar'} }) }} 
```

然后，您可以在您的捆绑公共资产中添加一个 css 文件，并在您的模板中使用，

```
{% block stylesheets %}
    {% parent() %} {# if you want to keep base template's stylesheets #}
    <link href="{{ asset('bundle/myBundle/css/stylesheet.css') }}" type="text/css" rel="stylesheet" />
{% endblock %} 
```

然后，您必须使您的公共资产可以通过您的 web/ 目录访问。最好的方法是创建针对您的捆绑公共资产的符号链接，然后您必须执行

```
assets:install web/ --symlink 
```

当您想要彻底自定义特定表单字段渲染块 (Twig) 时，另一个有用的方法是定义一个新的[表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html#what-are-form-themes)，这里是文档 > [Twig 中的表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html#form-theming-in-twig)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:05:16.790

如果要向字段添加类，则必须以这种方式在`attr`构建表单的`add`操作中使用特殊属性

```
$builder->add('field_name', 'yourType', array('attr' => array('class' => 'fieldClass'))); 
```

如果你想链接你的样式表，你必须使用资产。 [您可以在此处](http://symfony.com/doc/2.0/cookbook/assetic/asset_management.html)
找到有关资产的更多信息

要使用资产，您必须：

*   创建你的css文件
*   安装您的资产`assets:install`（我建议使用`--symlink`将反映 css 更改的选项，除非它们被缓存）
*   通过在模板中使用 CSS 来享受它。如果是树枝，你必须这样做 < `link href="{{ asset('bundles/acmebundle/css/style.css') }}" type="text/css" rel="stylesheet">`（`acmebundle`你的包在哪里）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:31:19.757

这可能会有所帮助：

```
$builder->add('patent_name', 'text', array('label' => 'Patent Name', 'attr' => array('class' => 'someclass'))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T06:06:55.207

您可以像这样为 ChoiceType 添加 CSS 样式：

```
->add('triage', DocumentType::class, [
                    'label' => 'Triage',
                    'required' => false,
                    'placeholder' => 'select',
                    'label_attr' => [
                        'class' => 'col-sm-2 control-label',
                    ],
                    'choice_attr' => function($choice, $key, $value) {
                        return ['style' => 'background:' . $choice->getColorCode().'; color:white;'];
                    },
                    'class' => 'AppBundle:TriageMaster',
                    'choice_label' => 'triage',
                ]) 
```

在这里，我使用来自选项的数据来选择 CSS 样式。

# python - 选择从 python 应用程序调用 c 库的最佳方法

> ID：12808661
> 
> 赞同：1
> 
> 时间：2012-10-09T21:26:18.150
> 
> 标签：python, cython

我有两个问题：1）我想从 Python 应用程序调用 C 库。我不想包装整个 API，我只想要与我的目的相关的函数和数据类型。

在我看来，我有两个选择：

1.  使用 Cython 将 C 库中的相关部分公开给 Python。
2.  在 Python 中完成所有工作，使用 ctypes 与外部库进行通信。

我不确定 1) 还是 2) 是更好的选择。

我们可能会对函数原型进行一些更改，或者随着时间的推移需要支持更多的函数。所以，我认为使用 cython 或其他一些工具可能会更好。

任何一种选择都有更多的优点/缺点吗？您推荐哪种方法？

2）。我也是 Python 和 cython 的新手。如果可能的话，有人可以举一些关于如何从 python 应用程序调用 c 库的例子吗？我通过网络浏览，但无法获得任何工作示例。我可能会遗漏一些东西。

任何帮助将不胜感激。

# php - cakephp HABTM 保存空字段

> ID：12808665
> 
> 赞同：1
> 
> 时间：2012-10-09T21:26:30.210
> 
> 标签：php, cakephp, cakephp-2.0, has-and-belongs-to-many, cakephp-model

我有一个用 cakephp 2.0 开发的网站。我有一个关系HABTM到同一个模型是这样的：

```
class Product extends AppModel {
    public $name = 'Product';
    public $useTable = 'products';
    public $belongsTo = 'User';
    public $actsAs = array('Containable');
        public $hasAndBelongsToMany = array(
        'Product' => array(
            'className' => 'Product',
            'joinTable' => 'ingredients_products',
            'foreignKey' => 'product_id',
            'associationForeignKey' => 'ingredient_id', 
            'unique' => false
        )
    );

} 
```

我想用这样的简单形式将记录保存到我的视图中：

```
echo $this->Form->create('IngredientProduct', array ('class' => 'form', 'type' => 'file'));

        foreach ($product as $prod) {
            echo '<div>'.$prod['ProductAlias']['alias'].'</div>';  
            echo $this->Form->input('IngredientProduct.product_id', array ('type'=>'text', 'value'=>  $prod['ProductAlias']['id'], 'label'=> false, 'id' => 'id'));
        }

        $select = '<select  name="data[IngredientProduct][ingredient_id]" id="[IngredientProductIngredientId">';
        foreach ($other_product as $prod2) {
            $select .= '<option value="'.$prod2['ProductAlias']['id'].'">'.$prod2['ProductAlias']['alias'].'</option>';
        }
        $select .= '</select><br>';
        echo($select);

        echo $this->Form->submit('Collega', array('id'=>'link_product'));
        echo $this->Form->end(); 
```

在我的控制器中，我以这种模式保存：

```
if ($this->Product->saveAll($this->request->data)){
                $this->Session->write('flash_element','success');
                $this->Session->setFlash ('Prodotto collegato con successo.');
                //$this->redirect(array('action'=>'edit',$alias));
            }
            else{
                $this->Session->write('flash_element','error');
                $this->Session->setFlash('Errore di salvataggio activity');
            } 
```

当我要查看数据库时，我看到成分：id 设置良好，但 product_id 为 0。我已经调试了我的 request->data，这是数组：

```
array(
    'IngredientProduct' => array(
        'product_id' => '1',
        'ingredient_id' => '2'
    )
) 
```

我打印了 cakephp 创建的 sql 查询：

```
INSERT INTO `db`.`ingredients_products` (`product_id`, `ingredient_id`, `modified`, `created`) VALUES ('', 2, '2012-10-09 23:19:22', '2012-10-09 23:19:22') 
```

为什么 product_id 为 null 而不是 1？有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:27:05.010

我认为这条线是错误的：

```
$this->Product->saveAll($this->request->data); 
```

尝试：

```
$this->IngredientProduct->saveAll($this->request->data); 
```

因为您的表单似乎询问关系的数据，而不是新产品。

# c# - 发出委托函数调用

> ID：12808673
> 
> 赞同：8
> 
> 时间：2012-10-09T21:26:55.153
> 
> 标签：c#, .net, reflection.emit, il, mono.cecil

我有以下 C# 代码：

```
public static double f2(Func<double, double> f, double x)
{
    return f(x);
} 
```

这是IL代码：

```
.method public hidebysig static 
    float64 f2 (
        class [mscorlib]System.Func`2<float64, float64> f,
        float64 x
    ) cil managed 
{
    // Method begins at RVA 0x20bd
    // Code size 8 (0x8)
    .maxstack 8

    IL_0000: ldarg.0
    IL_0001: ldarg.1
    IL_0002: callvirt instance !1 class [mscorlib]System.Func`2<float64, float64>::Invoke(!0)
    IL_0007: ret
} 
```

我怎样才能发出

```
callvirt instance !1 class [mscorlib]System.Func`2<float64, float64>::Invoke(!0) 
```

通过**System.Reflection.Emit**或更好地通过**Mono.Cecil 指令**？

!1 和 !0 代表什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T21:31:42.207

`!n`语法是对通用参数的引用。

在这个例子中......

`!0`是对第一个泛型参数的引用`Func<double, double>`（用作`Invoke`方法参数的类型）

`!1`是对第二个泛型泛型参数的引用`Func<double, double>`（用作 的返回类型`Invoke`）

**编辑**：您的方法使用`System.Reflection.Emit`...

```
var dynamicMethod = new DynamicMethod(
    "f2Dynamic", 
    typeof(double), 
    new Type[] { typeof(Func<double, double>), typeof(double) });

var il = dynamicMethod.GetILGenerator();

il.Emit(OpCodes.Ldarg_0);
il.Emit(OpCodes.Ldarg_1);
il.Emit(OpCodes.Callvirt, typeof(Func<double, double>).GetMethod("Invoke"));
il.Emit(OpCodes.Ret);

var f2Dynamic = 
    (Func<Func<double, double>, double, double>)dynamicMethod.CreateDelegate(
        typeof(Func<Func<double, double>, double, double>));

Console.WriteLine(f2(x => x * x, 10.0));        // prints 100
Console.WriteLine(f2Dynamic(x => x * x, 10.0)); // prints 100 
```

**EDIT2**：`!n`在@kvb 提示后更正了解释

# concurrency - 访问电子表格时锁定脚本不起作用

> ID：12808674
> 
> 赞同：2
> 
> 时间：2012-10-09T21:26:56.433
> 
> 标签：concurrency, google-apps-script, google-spreadsheet-api

我的问题是如何确保在并发访问时不会丢失任何数据。

我将脚本发布为网络应用程序。我想向 DATA_SHEET 添加新行。处理提交按钮的函数如下所示：

```
function onButtonSubmit(e) {
  var app = UiApp.getActiveApplication();
  var lock = LockService.getPublicLock();
  while (! lock.tryLock(1000))
    ;
  var ssheet = SpreadsheetApp.openById(SHEET_ID);
  var sheet = ssheet.getSheetByName(DATA_SHEET);
  var lastRow = sheet.getLastRow();
  var lastCol = sheet.getLastColumn();
  var rangeToInsert = sheet.getRange(lastRow+1, 1, 1, lastCol);
  var statText = rangeToInsert.getA1Notation();
  rangeToInsert.setValues(<some data from webapp form>);
  app.getElementById('statusLabel').setText(statText);
  lock.releaseLock();
  return app;
} 
```

但这似乎行不通。当我打开两个表单并在一秒钟内单击提交按钮时，它会在 statsLabel 中显示相同的范围并将数据写入相同的范围。所以我从一种表格中丢失了数据。

这段代码有什么问题？似乎 tryLock() 不会阻止脚本。

还有其他方法可以防止对工作表的并发写访问吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:02:39.717

可能值得一看[`appendRow()`](https://developers.google.com/apps-script/reference/spreadsheet/sheet#appendRow(Object))，而不是使用`getLastRow()`/`setValues()`等。

> 允许将行原子附加到电子表格；即使脚本的多个实例同时运行，也可以安全使用。以前，必须调用 getLastRow()，然后写入该行。但如果脚本的两个调用同时运行，它们可能都读取相同的 getLastRow() 值，然后覆盖彼此的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T22:22:15.900

使用带锁的 getLastRow()/setValues() 时必须插入此代码。

```
SpreadsheetApp.flush();
// before
lock.releaseLock(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:34:32.627

```
while (! lock.tryLock(1000))
    ; 
```

似乎有点 hinky。试试这个：

```
 if (lock.tryLock(30000))  {
    // I got the lock!  Wo000t!!!11 Do whatever I was going to do!
  } else {
    // I couldn’t get the lock, now for plan B :(
    GmailApp.sendEmail(“admin@example.com”, “epic fail”,
        “lock acquisition fail!”);
  } 
```

[http://googleappsdeveloper.blogspot.com/2011/10/concurrency-and-google-apps-script.html](http://googleappsdeveloper.blogspot.com/2011/10/concurrency-and-google-apps-script.html)

# asp.net - 开发与 IIS 部署环境中的 Asp.net 网页 src 链接

> ID：12808679
> 
> 赞同：0
> 
> 时间：2012-10-09T21:27:15.980
> 
> 标签：asp.net, html, css, asp.net-mvc

我一直在 VS 2012 中开发一个 Web 应用程序（asp.net mvc），并且它一直在流畅地运行。我现在已经将它部署到我的计算机 IIS 上，只是为了在 VS 之外运行一些测试，我提出了一些问题。

这些问题与图像和 JS 文件的链接方式有关。该问题的最简单示例是图像 src。所以在我的 site.css 我有以下风格：

```
.menu_div .mnuHeader
{  
     background: url('/img/menuSectionHeader.png') repeat-x center;     
 } 
```

这在开发环境中运行良好，因为 VS IIS express 实例将其旋转为“http://localhost:51034/”。但是当我将它部署到 IIS 时，该网站位于一个虚拟目录中，因此该网站被称为“http://localhost:80/MyWebsite/”。

因此，除非我浏览整个应用程序并将其更改为 /MyWebsite/，否则图像和资源链接将不起作用（这实际上并不可行，因为我必须拥有两个不同的应用程序实例，一个用于开发，一个用于部署，一个只是链接有点危险）。

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:45:22.743

你为什么不尝试相对路径？如果 CSS 文件在 /css/ 中，而图形在 /img/ 中，那么您的示例将是：

```
.menu_div .mnuHeader
{  
     background: url('../img/menuSectionHeader.png') repeat-x center;     
 } 
```

您还可以尝试在生产中为 /MyWebsite/img/ 重写[/img/：http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-重写模块](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

# c# - 在 C# 中绕过多重继承

> ID：12808683
> 
> 赞同：-2
> 
> 时间：2012-10-09T21:27:24.977
> 
> 标签：c#, multiple-inheritance

我在 c# 中创建一个表单，因此任何新表单都继承了内置类的属性 From 我还创建了一个名为 program 的类，它开始与我的数据库的连接我希望我的所有表单都继承它，因为我不想打开我无法使用接口的每个表单都有一个新连接，因为程序包含 main() 在其中创建连接我的程序类是

```
 class Program
      {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {

        MySqlConnection myConnection = new MySqlConnection("Server=instance2813231.db.xeround.com;Port=18422;Database=shares info;Uid=user;Pwd=password;");
        MySqlCommand command = myConnection.CreateCommand();

        try
        {

            myConnection.Open();
            MessageBox.Show("connected");

        }
        catch (Exception a)
        {
            Console.WriteLine(a.ToString());
            MessageBox.Show("Failed");
        }
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T21:54:25.050

> 我希望我的所有表格都继承它

咳咳，不要。这是为了以非常糟糕的方式实现代码重用而滥用继承。

首先，尝试将您的 GUI 代码与数据库代码分开。

其次，支持组合而不是继承——表单在逻辑上不是一个`Program`或“数据库连接打开器”。它应该*使用*后者，但它*不是*一个。你应该有一个单一的入口点，它实例化它需要的任何东西，然后开始运行。

第三，不要通过代码使用单个连接 - 相反，根据需要打开和关闭连接，让连接池处理效率方面。

因此，不要从类派生，而是为每个表单提供对数据库连接打开器实例的引用（如果您*真的*想混合数据库和 GUI 代码...... ick），然后您的表单可以*使用*该打开器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:30:34.367

你不能有多重继承，你可以做的是有一个`FormBase`继承自的`System.Windows.Forms.Form`，然后让你所有的表单继承自`FormBase`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:33:52.870

您不能在 C# 中进行多个类继承。但是，出于您的目的，您可以阅读有关[连接池概念的信息](http://msdn.microsoft.com/en-us/library/bb399543.aspx)

> 连接到数据源可能很耗时。为了最大限度地降低打开连接的成本，ADO.NET 使用了一种称为连接池的优化技术，它可以最大限度地降低重复打开和关闭连接的成本。对于 .NET Framework 数据提供程序，连接池的处理方式不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:41:54.147

对不起，但你真的问错了这个问题。处理您所要求的内容的适当方法不是通过多重继承，甚至不是 FormBase。您应该考虑使用[强类型](http://msdn.microsoft.com/en-us/magazine/cc163877.aspx)数据集、[LINQ-to-SQL](http://msdn.microsoft.com/en-us/data/cc298428.aspx)或[实体框架](http://msdn.microsoft.com/en-US/data/ee712907)。

即使您使用的是原始 ADO.NET，也不应该以这种方式挂在数据库连接上。特别是如果有任何东西是多线程的，这将严重崩溃。

不要在 main 中创建连接，而是在 app.config 中使用[ConnectionString 设置](http://msdn.microsoft.com/en-US/library/ms254494%28v=vs.100%29.aspx)，并根据需要在实际工作的地方打开和关闭连接。ADO.NET 底层的[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)将负责为您最大限度地减少连接建立和拆除的费用，并且不会因多线程而受到影响。

# debian - 如何创建一个 Debian 软件包作为 autotools 构建的一部分？

> ID：12808684
> 
> 赞同：15
> 
> 时间：2012-10-09T21:27:27.337
> 
> 标签：debian, packaging, autotools, automake

我能找到的所有 Debian 打包示例都假设用户正在从上游构建重新打包，因此它会解压缩源 tarball、配置、重建和重新打包。我正在尝试为我自己的库构建一个包，该库是使用自动工具构建的。我尝试了几种不同的方法，我最近的尝试是这样的：

```
DH_PACKAGE_NAME=`echo $(PACKAGE_NAME) | sed s/_/-/g`
dist-hook:
    cd $(distdir) ; \
    export DEBFULLNAME="Some One" ; \
    export DEBEMAIL="someone@foo.com" ; \
    echo -e "\n" | dh_make --copyright blank --library --native \
        --packagename $(DH_PACKAGE_NAME)
    mv $(distdir)/debian $(distdir)/DEBIAN
    dpkg-deb --build $(distdir) 
```

`dpkg-deb`抱怨`dh_makes`控制文件。我有一个想法，解决方案要简单得多？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:02:11.017

整个打包过程被简化为将构建过程包装到打包过程中。因此，尝试将打包过程包装到构建过程中可能并不容易，但我认为没有必要不以标准方式进行。

所以：

*   使您的基于 autotools 的构建系统就好像您根本不关心 debian 软件包一样。
*   创建一个简单的 debian/rules 文件，它将调用您的构建系统并制作一个 deb 包
*   如果您（或您的软件包的其他用户）想要构建 deb，请运行`dpkg-buildpackage`
*   如果您（或您的软件包的其他用户）不想构建 deb，只需运行`./configure && make && make install`

这是更好的做法，因为它将 2 个独立的阶段（构建和包装）分开。它还允许更轻松地集成到任何基于 Debian 的发行版中（例如，如果您决定将您的软件包放在“真正的”Debian 中会很棒），因为 Debian 打包指南对于将这两个进程分开非常严格（上游源发布自己的 debian/ 的人不赞成，上游的 debian/ 通常被删除）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-08T18:07:19.743

不幸的是，我无法让这里的任何一个优秀答案在我的环境中真正起作用。dpkg-buildpackage 对于从源代码构建包实在是太善变了。我终于确定了[此处显示的 dpkg-deb --build 方法](http://ubuntuforums.org/showthread.php?t=910717)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T08:01:25.033

这是我如何创建 Debian 软件包作为 autotools 构建的一部分的示例。

在`configure.ac`中，我检查`dpkg-buildpackage`了系统上是否安装了它，但是，如果没有找到它，我不会中止。

出于各种原因，我要求用户`./configure --enable-deb`在构建 Debian 软件包时运行，但在大多数情况下，这不是必需的。如果`--enable-deb`指定但未`dpkg-buildpackage`找到，则中止。

[https://github.com/ptomato/gnome-inform7/blob/master/configure.ac](https://github.com/ptomato/gnome-inform7/blob/master/configure.ac)

然后在顶层`Makefile.am`，代码如下所示。

[https://github.com/ptomato/gnome-inform7/blob/master/Makefile.am](https://github.com/ptomato/gnome-inform7/blob/master/Makefile.am)

请注意，我`make dist`先调用，然后解压缩 dist tarball 并将`debian`目录复制到其中。根据 Debian 打包指南，这是最佳实践；他们说该`debian`目录应该只在源代码控制中，而不是在分发包中。

# javascript - 使用 Enquire.JS 根据屏幕大小切换脚本

> ID：12808691
> 
> 赞同：1
> 
> 时间：2012-10-09T21:27:58.577
> 
> 标签：javascript, jquery, enquire.js

我制作了一个包含两个不同脚本的页面。运行的脚本由屏幕大小决定。[Enquire.Js](http://wickynilliams.github.com/enquire.js/)就是用来实现这一点的。

当在大于 600px 的屏幕上查看页面时，我希望内容使用 jQuery 选项卡显示。我在这里做了一个测试模型，它工作正常：[Live Page](http://olo.uk.com/itest/desktoponly.html) || [JS 小提琴版](http://jsfiddle.net/2UbW8/1/)

虽然它有效，但它只能以一种方式工作。即当窗口调整大小时，Enqiurie.js 会发挥它的“魔力”。但是，如果再次调整窗口大小，则“魔术”不会逆转。（与 CSS 媒体查询相反，其中重新调整窗口大小会再次反转媒体查询）。

当页面在小于 600px 的屏幕上查看时，我希望它以 iPhone 风格的 Nav 显示。我在这里制作了一个测试模型，它也可以正常工作：[Live Page](http://olo.uk.com/itest/iphoneonly.html) || [JS Fiddle 版本](http://jsfiddle.net/YJ8aC/) 然而，它也只能以一种方式工作。

当我尝试结合这两个演示时（即它在 Tabs 和 iphone 样式 Nav 之间切换，它不太工作。在此处查看测试模型：[Live Page](http://olo.uk.com/itest/both.html) || [JS Fiddle 版本](http://jsfiddle.net/JHVDs/2/)

如果浏览器加载时超过 600 像素，则必须刷新窗口才能显示选项卡。如果您将窗口从小于 600 像素重新调整为大于 600 像素，一些小于 600 像素的代码似乎仍然存在。

我不确定我做错了什么。谢谢你的帮助！

# c# - Create 30 day Trial Version

> ID：12808699
> 
> 赞同：1
> 
> 时间：2012-10-09T21:28:58.810
> 
> 标签：c#

> **Possible Duplicate:**
> [how can i make my product as a trial version for 30 days?](https://stackoverflow.com/questions/1525378/how-can-i-make-my-product-as-a-trial-version-for-30-days)

I want to create a 30 day trial version of my software, I can record the installation date and compare it with the sysdate of the machine. The problem is how to validate that the user changed the sysdate and how much time I have to adjust in my trial period.

One option is to consume a web service, but the problem are the offline customers.

This is stand alone windows application.

Is there any method I can use to count XX days since the installation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:33:58.777

There is no way, which is one hundred percent reliable. You can query online website for current date, and users will reverse the requests with network sniffer and spoof the server. You can compare most recent temporary file date to detect clock rewinding, but it might cause other issues. You can do something else, and users will patch your code to remove the protection.

Do it the way that makes sense to you, still without having an obsession around it. Your code will stay hackable anyway. You will be better of reasonably pricing it so that hacking makes no sense.

# c# - “yield return someObject”后跟“someObject = null”的原因？

> ID：12808700
> 
> 赞同：1
> 
> 时间：2012-10-09T21:29:09.337
> 
> 标签：c#, return, yield

有谁知道以下代码背后的原因是什么？这是在 VS2010 中通过 Web 测试生成的。

```
yield return someObject;
someObject = null; 
```

我看到了这个并认为这很奇怪，所以我想知道是否有人知道这是否会比让 someObject 坐在那里作为分配的内存获得某种收益。需要明确的是，有问题的行是第二条语句，因为收益率回报相当普遍。将延迟返回对象设置为 null 是我的问题。

编辑：更多上下文。“yield return”在返回 IEnumerable 的方法中执行，这导致延迟执行。someObject 是一个方法范围的变量。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:20:44.223

.NET 非常擅长确定何时不再使用局部变量，并且即使在方法的中间，即使变量仍在范围内，所引用的对象也可以收集，只要编译器可以证明它不会再次访问。.NET 中的对象生命周期与范围无关。

所以这条线完全没用，实际上可以让对象存活更长时间。在大多数情况下，它只是代码生成器发出的无害代码，就像基里尔所说的那样。

然而——当编译器遇到闭包或协程（`yield return`创建一个协程）时，局部变量会被提升为辅助类的成员。而且班员不能提前集合。因此，`null`可能需要分配以使其无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:32:44.700

也许它与包含方法的延迟执行有关？由于您必须屈服于 IEnumerable 结果，我们可以假设正在进行一些延迟执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:04:09.143

一旦生成代码，这很可能是其他地方“非优雅代码”的结果。生成的代码因情况而异。这意味着它比人工编写的代码更难检查。

我很容易想象，在其他可能更复杂的情况下，这将很重要。在这里，这只是一条无用的线，不会伤害任何人..

# opencv - OpenCV::solvePNP() - 断言失败

> ID：12808702
> 
> 赞同：1
> 
> 时间：2012-10-09T21:29:26.660
> 
> 标签：opencv, runtime-error, pose-estimation

我试图在 OpenCV 的 solvePNP() 的帮助下获得相机的姿势。

运行我的程序后，我收到以下错误：

```
OpenCV Error: Assertion failed (npoints >= 0 && npoints == std::max(ipoints.checkVector(2, CV_32F), ipoints.checkVector(2, CV_64F))) in solvePnP, file /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.4.2/modules/calib3d/src/solvepnp.cpp, line 55
libc++abi.dylib: terminate called throwing an exception 
```

我试图搜索如何解决这些错误，但不幸的是我无法解决！

这是我的代码，非常感谢所有评论/帮助：

```
enum Pattern { NOT_EXISTING, CHESSBOARD, CIRCLES_GRID, ASYMMETRIC_CIRCLES_GRID };

void calcBoardCornerPositions(Size boardSize, float squareSize, vector<Point3f>& corners,
                          Pattern patternType)
{
    corners.clear();

    switch(patternType)
    {
    case CHESSBOARD:
    case CIRCLES_GRID:
        for( int i = 0; i < boardSize.height; ++i )
            for( int j = 0; j < boardSize.width; ++j )
                corners.push_back(Point3f(float( j*squareSize ), float( i*squareSize ), 0));
        break;

    case ASYMMETRIC_CIRCLES_GRID:
        for( int i = 0; i < boardSize.height; i++ )
            for( int j = 0; j < boardSize.width; j++ )
                corners.push_back(Point3f(float((2*j + i % 2)*squareSize), float(i*squareSize), 0));
        break;
    }
}

int main(int argc, char* argv[])
{
    float squareSize = 50.f;

    Pattern calibrationPattern = CHESSBOARD;

    //vector<Point2f> boardCorners;
    vector<vector<Point2f> > imagePoints(1);
    vector<vector<Point3f> > boardPoints(1);

    Size boardSize;
    boardSize.width = 9;
    boardSize.height = 6;

    vector<Mat> intrinsics, distortion;
    string filename = "out_camera_xml.xml";
    FileStorage fs(filename, FileStorage::READ);
    fs["camera_matrix"] >> intrinsics;
    fs["distortion_coefficients"] >> distortion;
    fs.release();

    vector<Mat> rvec, tvec;
    Mat img = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE); // at kell adnom egy kepet

    bool found = findChessboardCorners(img, boardSize, imagePoints[0], CV_CALIB_CB_ADAPTIVE_THRESH);

    calcBoardCornerPositions(boardSize, squareSize, boardPoints[0], calibrationPattern);
    boardPoints.resize(imagePoints.size(),boardPoints[0]);

    //***Debug start***
    cout << imagePoints.size() << endl << boardPoints.size() << endl << intrinsics.size() << endl << distortion.size() << endl;
    //***Debug end***

    solvePnP(Mat(boardPoints), Mat(imagePoints), intrinsics, distortion, rvec, tvec);

    for(int i=0; i<rvec.size(); i++) {
            cout << rvec[i] << endl;
    }

    return 0;
} 
```

**编辑（一些调试信息）：**

我逐行调试它。我踏入了所有的功能。我在 SolvePNP(...) 中得到断言失败。当我进入solvePNP函数时，您可以在下面看到我看到的内容。首先它跳过第一个 if 语句 / *if(vec.empty())* /，然后进入第二个 if 语句 / *if( !copyData )* /，当它执行最后一行 /*datalimit = dataend = datastart + rows *step[0]*/ 跳回到第一个 if 语句并返回 =>，然后我得到 Assertion failed 错误。

```
template<typename _Tp> inline Mat::Mat(const vector<_Tp>& vec, bool copyData)
: flags(MAGIC_VAL | DataType<_Tp>::type | CV_MAT_CONT_FLAG),
dims(2), rows((int)vec.size()), cols(1), data(0), refcount(0),
datastart(0), dataend(0), allocator(0), size(&rows)
{
    if(vec.empty())
        return;
    if( !copyData )
    {
        step[0] = step[1] = sizeof(_Tp);
        data = datastart = (uchar*)&vec[0];
        datalimit = dataend = datastart + rows*step[0];
    }
    else
        Mat((int)vec.size(), 1, DataType<_Tp>::type, (uchar*)&vec[0]).copyTo(*this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:41:23.770

在调试器中进入函数，并准确查看哪个断言失败。（可能它需要双精度值（CV_64F）而不是浮点数。）

OpenCV 的新“inputarray”包装器允许您调用具有任何形状的垫子、点向量等的函数 - 它会对其进行排序。但是很多函数都采用特定的 inut 格式，或者具有强制执行特定格式的过时断言。

立体声/校准系统最不适合需要特定布局，并且频繁的连续操作需要不同的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T09:41:45.940

类型似乎不正确，至少在对我有用的代码中我使用了不同的类型（如文档中所述）。

> **objectPoints** – 对象坐标空间中的对象点数组，3xN/Nx3 1 通道或 1xN/Nx1 3 通道，其中 N 是点数。向量也可以在这里传递。
> 
> **imagePoints** – 对应图像点的数组，2xN/Nx2 1 通道或 1xN/Nx1 2 通道，其中 N 是点数。向量也可以在这里传递。
> 
> **cameraMatrix** – 输入相机矩阵 A = \vecthreethree{fx}{0}{cx}{0}{fy}{cy}{0}{0}{1}。
> 
> **distCoeffs** – 4、5 或 8 个元素的失真系数（k_1、k_2、p_1、p_2[、k_3[、k_4、k_5、k_6]]）的输入向量。如果向量为 NULL/空，则假定零失真系数。
> 
> **rvec** – 输出旋转向量（参见 Rodrigues() ），它与 tvec 一起将点从模型坐标系带到相机坐标系。
> 
> **tvec** - 输出翻译向量。
> 
> **useExtrinsicGuess** – 如果为真 (1)，则函数使用提供的 rvec 和 tvec 值分别作为旋转和平移向量的初始近似值，并进一步优化它们。

[来自这里的文档。](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#bool%20solvePnP(InputArray%20objectPoints,%20InputArray%20imagePoints,%20InputArray%20cameraMatrix,%20InputArray%20distCoeffs,%20OutputArray%20rvec,%20OutputArray%20tvec,%20bool%20useExtrinsicGuess,%20int%20flags))

`vector<Mat> rvec, tvec`应该`Mat rvec, tvec`改为。

`vector<vector<Point2f> > imagePoints(1)`应该`vector<Point2f> imagePoints(1)`改为。

`vector<vector<Point3f> > boardPoints(1)`应该 `vector<Point3f> boardPoints(1)`改为。

注意：我遇到了完全相同的问题，这对我有用（这有点令人困惑，因为**calibrateCamera**使用向量）。虽然还没有为 imagePoints 或 boardPoints 尝试过。（但正如上面链接中所记录的那样，**vector**，**vector**应该可以工作，我想我最好提一下），但是对于**rvec**，**trec**我自己尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T10:56:06.950

I run in exactly the same problem with solvePnP and opencv3\. I tried to isolate the problem in a single test case. I seams passing a std::vector to cv::InputArray does not what is expected. The following small test works with opencv 2.4.9 but not with 3.2\.

And this is exactly the problem when passing a std::vector of points to solvePnP and causes the assert at line 63 in solvepnp.cpp to fail !

Generating a cv::mat out of the vector list before passing to solvePnP works.

```
//create list with 3 points
std::vector<cv::Point3f> vectorList;
vectorList.push_back(cv::Point3f(1.0, 1.0, 1.0));
vectorList.push_back(cv::Point3f(1.0, 1.0, 1.0));
vectorList.push_back(cv::Point3f(1.0, 1.0, 1.0));

//to input array
cv::InputArray inputArray(vectorList);
cv::Mat mat = inputArray.getMat();
cv::Mat matDirect = cv::Mat(vectorList);

LOG_INFO("Size vector: %d mat: %d matDirect: %d", vectorList.size(), mat.checkVector(3, CV_32F), matDirect.checkVector(3, CV_32F));

QVERIFY(vectorList.size() == mat.checkVector(3, CV_32F)); 
```

Result opencv 2.4.9 macos:

```
TestObject: OpenCV
Size vector: 3 mat: 3 matDirect: 3 
```

Result opencv 3.2 win64:

```
TestObject: OpenCV
Size vector: 3 mat: 9740 matDirect: 3 
```

# javascript - 使用 js 将 onclick 事件传递给选择选项

> ID：12808706
> 
> 赞同：0
> 
> 时间：2012-10-09T21:29:38.963
> 
> 标签：javascript, html, select

我有一个非常令人沮丧的问题。我有这段代码可以过滤掉我的结果并将它们输入到一个选择框中

```
var syn = <?=json_encode($syn)?>;
function filterByCity() {
        var e = document.getElementById("city_filter");
        var city = e.options[e.selectedIndex].value;
        var selectOptions = document.getElementById('syn_list');
        selectOptions.options.length = 0;

        for (i = 0; i < syn.length; i++) {
            if (city == syn[i]['city'] || city == 'all') {
                selectOptions.options[selectOptions.options.length] = new Option(syn[i]['name'], syn[i]['id'] + '" onclick="updateTxtContent(\'' + syn[i]['id'] + '\')');
            }
        }
    } 
```

如您所见，我正在为每个选择“选项”添加一个 onclick 侦听器，这在页面本身的源代码中看起来很棒，但是如果我将其复制到编辑中，我注意到我的问题是“updateTxtContent()”函数是不叫。

```
<select size="10" name="syn_list" id="syn_list" class="span12" dir="rtl" style="text-align:right;">
<option value="13&quot; onclick=&quot;updateTxtContent('13')">option a</option>
<option value="14&quot; onclick=&quot;updateTxtContent('14')">option b</option> 
```

显然应该有更好的方法来做到这一点，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:36:26.370

也许在您的选择标签中尝试一个 onchange 事件。

```
<select size="10" name="syn_list" id="syn_list" class="span12" dir="rtl" style="text-align:right;" onchange='updateTxtContext(this.value);'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:39:37.247

我认为您希望将事件处理程序放在您的选择上而不是选项上。看[这个小提琴](http://jsfiddle.net/G7uQZ/)我的意思

```
<select size="10" name="syn_list" id="syn_list" class="span12" dir="rtl" style="text-align:right;" onchange="updateTxtContent();">
<option value="13">option a</option>
<option value="14">option b</option>
</select>

<script>
function updateTxtContent(){
 alert($("#syn_list").val());   
}   
</script>
​ 
```

或者因为看起来你没有使用 jQuery：

```
function updateTxtContent(){
    var e = document.getElementById("syn_list");
    var f = e.options[e.selectedIndex].value;    
    alert(f);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:34:44.890

在大多数浏览器中，选项元素不能有点击事件。

新选项是设置值和文本，不知道为什么你认为你可以用它设置其他属性。

您想在选择元素上使用更改事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T07:42:23.930

截至 2016 年，选择支持单击事件，并将该选项作为目标单击：

使用 jQuery

```
click_handler = function(e) {
    alert('clicked on: ' + e.target.value);
}

$('#syn_list').click(click_handler); 
```

至少在 Firefox 44 中有效

# mysql - Ubuntu 10.10 - MySQL 的内存问题

> ID：12808708
> 
> 赞同：0
> 
> 时间：2012-10-09T21:29:42.387
> 
> 标签：mysql, memory, ubuntu

突然间，我的数据库服务器运行了大约 98% 的内存分配（我有一个 16GB 的机器只运行一个 MySQL 实例）。

这是我执行 free -m 时显示的内容：

```
 total       used       free     shared    buffers     cached
Mem:         15498      14565        932          0         76       8081
-/+ buffers/cache:       6408       9089
Swap:        31743          0      31743 
```

我已经重新启动了机器——它运行在一个非常高可用性的服务器上。MySQL 声称它每秒运行 562 次查询。

```
Total   ø per hour  ø per minute    ø per second
22 M    2.03 M          33.77 k     562.90 
```

这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:32:14.087

内存统计数据没有任何问题。您仍然有大约 9 GB 的可用空间，并且没有使用交换空间。

# python - 螺纹参数

> ID：12808721
> 
> 赞同：0
> 
> 时间：2012-10-09T21:30:32.650
> 
> 标签：python, multithreading, variables, thread-sleep

又是我的一个问题..又遇到了一些问题。希望能找到一个更聪明并且知道这一点的人.. :D

我现在遇到线程问题，当打开 (1,1000) 范围内的线程 url 时，我很想看到所有不同的 url。只有当我运行代码时，我才会得到很多双变量（可能是因为爬行速度如此之快）。无论如何，这是我的代码：我尝试查看它在哪个线程，但我得到了双打。

```
import threading
import urllib2
import time
import collections

results2 = []
def crawl():
    var_Number = thread.getName().split("-")[1]
    try:
        data = urllib2.urlopen("http://www.waarmaarraar.nl").read()
        results2.append(var_Number)
    except:
        crawl()

threads = []

for n in xrange(1, 1000):
    thread = threading.Thread(target=crawl)
    thread.start()  
    threads.append(thread)

# to wait until all three functions are finished
print "Waiting..."

for thread in threads:
    thread.join()

print "Complete."

# print results (All numbers, should be 1/1000)
results2.sort()
print results2    
# print doubles (should be [])
print [x for x, y in collections.Counter(results2).items() if y > 1] 
```

但是，如果我直接在 xrange 行下添加 time.sleep(0.1)，则不会出现这些双打。尽管这确实使我的程序减慢了很多。任何人都知道解决此问题的更好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:59:50.730

根据[Thread.getName()](http://docs.python.org/library/threading.html#threading.Thread.getName)上的文档，这是正确的行为。

如果您想为每个线程设置一个唯一的名称，您必须使用[name 属性](http://docs.python.org/library/threading.html#threading.Thread.name)来设置它。

根据您最终的期望，替换

```
for n in xrange(1, 1000):
    thread = threading.Thread(target=crawl)
    thread.start()  
    threads.append(thread) 
```

和

```
for n in xrange(1, 1000):
    thread = threading.Thread(target=crawl)
    thread.name = n
    thread.start()  
    threads.append(thread) 
```

并且应该`var_Number = thread.getName().split("-")[1]`可以`var_Number = thread.name`帮助您。

**编辑**
经过一些测试后，用户自定义名称可以被另一个线程重用，因此唯一通过的方法`n`是使用`args`or `kwargs`of [`threading.Thread()`](http://docs.python.org/library/threading.html?highlight=threading#threading.Thread)。
这种行为是有道理的，如果我们需要在线程中使用某种数据，正确传递它不要试图把它放在不属于它的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:06:37.467

异常处理程序中有一个递归调用`crawl()`。如果出现错误，同一个线程会多次运行该函数。因此`results2`可能包含相同的`var_Number`几次。如果添加`time.sleep(.1)`（暂停）；您的脚本消耗更少的资源，例如打开的 fds 的数量、正在运行的线程以及对远程服务器的请求更有可能成功。

默认线程名称也可能重复。如果线程退出；另一个线程可能具有相同的名称，例如，如果实现使用`.ident`属性来生成名称。

笔记：

*   使用[pep-8 命名约定](http://www.python.org/dev/peps/pep-0008/)。您可以使用 pep8、pyflakes、epylint 命令行工具自动检查您的代码
*   您不需要 1000 个线程来获取 1000 个网址（请参阅[我对您上一个问题的评论](https://stackoverflow.com/questions/12772464/error-with-threading-python#comment17262941_12772464)）
*   在同一个站点没有暂停的情况下生成请求并不好。

# iphone - 半透明 UITableViewCell 没有边框

> ID：12808724
> 
> 赞同：0
> 
> 时间：2012-10-09T21:30:34.723
> 
> 标签：iphone, objective-c, uitableview, ios6, border

我创建了一个 UITableView。我给了它一个这样的背景图片：

```
UIImageView *imageview1 = [[UIImageView alloc] init];
imageview1.image = [UIImage imageNamed:@"blood2.gif"];
evc.tableView.backgroundView = imageview1; 
```

然后我通过在 tableView:cellForRowAtIndexPath: 方法中更改它们使单元格半透明：

```
UIView *backgrView = [[UIView alloc] initWithFrame:CGRectZero];
backgrView.backgroundColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.7];

cell.backgroundView = backgrView; 
```

但是现在 UITableViewCells 周围没有边框了。我已经将 separatorColor 设置为黑色，但边框不会显示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:40:20.537

检查这个

> [cell.contentView.layer setBorderColor:[UIColor redColor].CGColor];
> [cell.contentView.layer setBorderWidth:2.0f];

# java - c3p0 中的“testConnectionOnCheckin”是什么意思？

> ID：12808731
> 
> 赞同：1
> 
> 时间：2012-10-09T21:31:51.113
> 
> 标签：java, hibernate, c3p0

我一直在尝试浏览 c3p0 文档，但无法理解“testConnectionOnCheckin”属性。

文档说 - “连接在它们被包含在池中之前已经过测试”。

此属性是否仅适用于 c3p0 创建的新连接在包含在池中之前经过测试？检查新连接有什么意义？它们通常不是有效的吗？

还有几天我的应用程序日志显示如下：

```
[managed:2 unused:2 excluded:1] 
```

我的应用程序为一个特定连接抛出异常，我认为它是“排除”的一个。“排除”连接是否计入池中，c3p0 是否可以在不检查有效性的情况下将其移交给应用程序？如果没有，那么设置“testConnectionOnCheckin”会在我的应用程序使用它之前测试这个排除的连接的有效性吗？

我为太多的问题道歉，但这只是我很困惑。

谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:07:47.777

testConnectionOnCheckin 在客户端签入后（即通过 Connection.close()）测试连接，但在它们重新集成到连接池之前。我不确定您正在查看什么文档，但请参阅

[http://www.mchange.com/projects/c3p0/#testConnectionOnCheckin](http://www.mchange.com/projects/c3p0/#testConnectionOnCheckin)

[http://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

我通常建议结合使用 idleConnectionTestPeriod 和 testConnectionsOnCheckIn（以及快速的 preferredTestQuery）来测试连接。

“排除的”连接是客户端当前正在使用的连接，但 c3p0 注意到它有故障。c3p0 将这些连接标记为在客户端签入时被销毁而不是重新集成到池中。

我希望这有帮助！

# ios5 - 如何启动嵌入在 UINavigationController 中的 UIViewController

> ID：12808733
> 
> 赞同：0
> 
> 时间：2012-10-09T21:31:54.970
> 
> 标签：ios5, uinavigationcontroller, segue, uitabcontroller

我有带有 2 个选项卡 A 和 B
选项卡 A 的 TabController：UINavigationController1-->Controller X--->Controller Y
TAB B：UINaviagtionController2-->Controller A --->Controller B --->Controller C

在 Tab Controller 中，我有一个按钮，我想启动 Controller X。如何使用它的 navigationBbarController 获取 X？我可以到达 X，但不显示导航？

谢谢

# solr - 使用 SOLR 索引时使用 Elasticsearch 查询索引时要注意什么？

> ID：12808736
> 
> 赞同：1
> 
> 时间：2012-10-09T21:32:14.383
> 
> 标签：solr, lucene, compatibility, elasticsearch

作为重构项目的一部分，我将我们的查询端移至 ElasticSearch。目标是最终将索引端也重构为 ES，但这非常复杂，并且索引部分运行稳定，因此优先级较低。

这会导致使用 Solr 创建/索引 Lucene 索引并使用 Elasticsearch 查询的情况。据我了解，这应该是可能的，因为 ES 和 SOlR 都创建了与 Lucene 兼容的索引。

可以肯定的是，除了 ES 中的一些内务处理以指向正确的索引之外，在执行此操作时是否应该注意任何不可预见的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:52:00.133

你是对的，Lucene 索引是 elasticsearch 索引的一部分。但是，您需要考虑弹性搜索索引还包含弹性搜索特定的索引元数据，这些元数据必须重新创建。元数据中最棘手的部分是映射，它必须与您关心的所有字段的 Solr 模式精确匹配，并且对于某些数据类型可能并不容易。此外，elasticsearch 期望在索引中找到某些内部字段。`_uid`例如，如果没有为每条记录索引和存储字段，它将无法运行。

最后，即使您克服了所有这些障碍，您最终可能会得到相当脆弱的解决方案，并且您将无法利用许多高级弹性搜索功能。我建议先研究迁移索引部分。

你见过[ElasticSearch Mock Solr 插件](https://github.com/mattweber/elasticsearch-mocksolrplugin)吗？我认为它可能会在迁移过程中对您有所帮助。

# javascript - 如何将参数从 php 文件传递 到 AJAX js 文件？

> ID：12808743
> 
> 赞同：0
> 
> 时间：2012-10-09T21:32:58.777
> 
> 标签：javascript, ajax, parameters

我是 AJAX 的新手。这是我的问题：

1.  我`index.php`用这段代码调用我的文件：

    ```
     http://www.moodurian.com/wall/index.php?CourseId=36 
    ```

2.  我的`index.php`文件有这个代码：

    ```
    <script type="text/javascript" src="js/wall.js"> 
    ```

3.  我有一个`wall.js`包含此代码部分的文件：

    ```
    $.ajax({type: "POST",
            url: "message_ajax.php?CID=36",
            data: dataString,
            ... 
    ```

它调用该文件`message_ajax.php`并传递给`message_ajax.php`名为 CID 的参数，其值为 36。

现在我真正想做的**不是**硬编码以下行中的`36`值`wall.js`：

```
url: "message_ajax.php?CID=36", 
```

**相反**，我希望这条线这样说：

```
url: "message_ajax.php?CID=CourseId",
   ... 
```

我试过了，但不知何故我`message_ajax.php`没有`36`通过那个 CID 参数接收到值。

所以我实际上想要做的是让我的`index.php`文件将 a 值（在本例中为`36`）传递给`wall.js`，然后`wall.js`将相同的值（在我的示例中为 value `36`）传递给`message_ajax.php`.

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:38:14.493

我将不顾一切地猜测您的课程 ID（在本例中`36`为 ）存储在一个名为 的变量中`CourseId`。如果是这样的话，而不是这样：

```
url: "message_ajax.php?CID=CourseId", 
```

你想用这个：

```
url: "message_ajax.php?CID=" + CourseId, 
```

这样，它通过将静态部分 ( `"message_ajax.php?CID="`) 与动态部分（`CourseId`变量的值）连接起来形成 URL 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:38:36.410

而不是在您的 url 字符串中附加 CID 将其作为`data`参数发送

```
var CourseId = '36' ; // In this case

var dataString = { 'CID' : CourseId}
$.ajax({
    type: "POST", 
    url: "message_ajax.php",
    data: dataString , 
    dataType : 'json',

    success : function(result){
  }
}); 
```

或者你可以这样做

```
url: "message_ajax.php?CID=" + CourseId 
```

通过这样做，您将不会在当前窗口的查询字符串中看到参数...

# wcf - 从客户端隐藏数据成员但仍然序列化？

> ID：12808744
> 
> 赞同：1
> 
> 时间：2012-10-09T21:33:01.987
> 
> 标签：wcf

是否可以从客户端应用程序中隐藏类的数据成员但仍使用 XmlSerializer 进行序列化？

上下文是我得到一个地址，但需要将其中的许多片段连接成一个字符串，然后再将对象序列化为 XML 并将其传递给其他东西。

地址类又是一个更大类的一部分，所以如果它没有嵌套，那么简单地继承和添加这个位会更加复杂，而且我的需求不足以保证编写自定义序列化程序。

样本：

```
[DataContract]
public class Address
{
    [DataMember()]
    public string City

    [DataMember()]
    public string State

    [DataMember()]
    public string StreetDirection

    [DataMember()]
    public string StreetName

    [DataMember()]
    public string StreetNumber

    [DataMember()]
    public string StreetSuffix

    [DataMember()]
    public string Unit

    [DataMember()]
    public string Zip

    [IgnoreDataMember()]
    [Serializable]
    public string AddressLine1
} 
```

基本上，我想要一个占位符（AddressLine1），我可以在传递之前将 StreetXXX 属性的串联放置（如果接收者看到各个部分，它已经存在）。

**编辑 - 添加示例** 输入将类似于：

```
<Address>
  <StreetNumber>123</StreetNumber>
  <StreetDirection>S.</StreetDirection>
  <StreetName>Main</StreetName>
  <StreetSuffix>St.</StreetSuffix>
  <Unit>207</Unit>
  <City>Denver</City>
  <State>CO</State>
  <Zip>80123</Zip>
</Address> 
```

但我想结束序列化为：

```
<Address>
  <StreetNumber>123</StreetNumber>
  <StreetDirection>S.</StreetDirection>
  <StreetName>Main</StreetName>
  <StreetSuffix>St.</StreetSuffix>
  <Unit>207</Unit>
  <City>Denver</City>
  <State>CO</State>
  <Zip>80123</Zip>
  <AddressLine1>123 S. Main St.</AddressLine1>
</Address> 
```

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T22:04:29.777

您的问题有点令人困惑，因为您提到了 XmlSerializer 但您显示了一个 DataContract 类。数据是否使用相同的序列化程序进行反序列化（读取）和序列化（写入）？如果是这样，它是 DataContractSerializer 还是 XmlSerializer？还是您尝试使用 DataContractSerializer 读取并使用 XmlSerializer 写入？无论如何，假设您都使用 DataContractSerializer 读取和写入的简单情况，您需要做的就是将 AddressLine1 变成一个带有 getter 和 setter 的属性，并用 [DataMember(IsRequired=false)] 标记它。然后，在 AddressLine1 属性获取器中，输入您的地址连接代码，然后在属性设置器中什么也不做。这样，在反序列化时，AddressLine1 将被忽略（即使它根本不存在于 XML 中也不会导致错误），

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:55:10.433

我原以为您根本不需要序列化 ​​AddressLine1 属性，只需将其作为辅助只读属性即可。

```
[IgnoreDataMember()]
public string AddressLine1
{
    get
    {
        return StreetNumber + " " + StreetDirection + " " + StreetName + " " + StreetSuffice;
    }
} 
```

由于可以在需要时构造值，因此除了街道属性集之外，序列化和传输它没有任何意义。当然，您可以通过缓存该值并仅在街道属性之一实际更改时重新创建它来提高实现效率。

# c++ - 从模板值获取类型，C++

> ID：12808745
> 
> 赞同：1
> 
> 时间：2012-10-09T21:33:02.943
> 
> 标签：c++, templates, boost, boost-variant

我有以下使用 boost::variant 的方法。我尝试根据 type 获取值`T`。如果`boost::get<T>`失败，如果 T 是 int 或 unsigned int，我想以特殊方式处理它。有什么方法可以知道`T`是 int 还是 unsigned int？

我认为在这种情况下我不能使用模板专业化，可以吗？

编辑：另外，我还没有访问 C++11（我希望很快）

```
template < typename T, typename C, void (C::*setterFcn)(const T&) >
void binder( const Variant& value_var, C* c )
{
    const T* typeData = boost::get<T>(&value_var);

    if ( NULL == typeData )
    {
        // Need to check for int or unsigned int here somehow
    }

    (((C*) c)->*(setterFcn))(*typeData);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:37:24.320

您也可以在 boost 或 C++11 上使用 is_same()。

[http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html](http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/is_same.html)

[http://en.cppreference.com/w/cpp/types/is_same](http://en.cppreference.com/w/cpp/types/is_same)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T21:42:50.723

在 C++11 中，您可以使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)，在 C++03 中，您可以执行以下操作：

```
template <typename T1, typename T2>
class is_same
{
public: 
    static bool const value = false;
};

template <typename T>
class is_same<T, T>
{
public: 
    static bool const value = true;
}; 
```

并将其完全用作 C++11 标准版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:38:13.743

最简单的方法可能是只委托给重载函数或函数模板：您在一个函数中指定一般处理，可能什么也不做，而在两个单独的函数（如果额外的处理是微不足道的）或在`enable_if`ed 函数中指定专用处理条件检查`int`or `unsigned int`。

# c++ - SDL（和其他）虚拟键输入

> ID：12808751
> 
> 赞同：0
> 
> 时间：2012-10-09T21:33:41.290
> 
> 标签：c++, events, sdl

今天我在我的应用程序中为所有不同的键设置了输入。除了虚拟键（例如插入符号或 & 符号）之外，这可以正常工作。通常需要换档才能拿到的钥匙。使用 SDL，这些虚拟键不起作用。因为他们没有注册事件。

```
if (event.type == SDL_KEYDOWN) {
        switch (event.key.keysym.sym) {
            case SDLK_CARET:
                Keys[KeyCodes::Caret] = KeyState::Down;
                break;
            case SDLK_UP:
                Keys[KeyCodes::Up] = KeyState::Down;
                break;
            default:
                break;
        } 
```

我绝对确定我的系统可以使用 Up 等物理键。该程序查询一个键状态，如下所示：

```
if (Keys[KeyCode] == KeyState::Down) {
    lua_pushboolean(L, true);
} else {
    lua_pushboolean(L, false);
} 
```

KeyCode 作为参数传入。

那么，为什么使用 SDL 的 KeyDown 事件类型时虚拟键或需要转换才能正常工作的键？是否需要更多代码才能找到它们？还是我傻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:38:56.273

SDL only reports real key events.

The good news is you can [enable *Unicode translation*](http://www.libsdl.org/docs/html/sdlenableunicode.html) to get symbols like '^' or '@'.

First put this in your initialization code:

```
SDL_EnableUNICODE(1); 
```

Now `SDL_KEYDOWN` events will have the accompanying character in the `unicode` member of [`SDL_keysym`](http://www.libsdl.org/docs/html/sdlkeysym.html). This factors in shift, caps lock, etc., when translating the key press into a character. Keys like `SDLK_UP` will have `unicode == 0`.

This actually makes using `keysym.unicode` ideal for text input, especially when used with [`SDL_EnableKeyRepeat`](http://sdl.beuc.net/sdl.wiki/SDL_EnableKeyRepeat).

Here's an example: on my keyboard, I hold `shift-6` to generate `^`. The program recieves an `SDL_KEYDOWN` event with `keysym.sym == SDLK_6`, and `keysym.unicode == '^'`.

The one caveat is that only key *press* events will be translated, not release events. But this should not be a big problem, since you shouldn't use text characters for game controls anyway, only real keys. And if you're doing text input with key repeating, it only matters when keys are pressed, not released.

You might have to mix-and-match using `keysym.sym` and `keysym.unicode` to fit your exact needs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:24:15.617

好的，我为有点沮丧而道歉，但我终于得到了一些代码来判断某人何时按下了插入键。我确实希望其他人能找到这些有用的信息。

```
case SDLK_6:
    if (event.key.keysym.mod == KMOD_LSHIFT || event.key.keysym.mod == KMOD_RSHIFT) {
        Keys[KeyCodes::Caret] = KeyState::Down;
    } else {
        Keys[KeyCodes::n6] = KeyState::Down;
    }
    break; 
```

基本上，在检查具有 shift click 特殊键的普通键时，然后检查键修饰符。我现在了解 unicode 值，但这个想法现在似乎更简单。

再次感谢所有的帮助！

# java - 错误：无法创建 Java 虚拟机

> ID：12808752
> 
> 赞同：10
> 
> 时间：2012-10-09T21:33:41.957
> 
> 标签：java, netbeans

我已经访问了与我的问题相关的所有现有问题，但我仍然有问题。所有安装均已正确安装。我正在使用最新的 Netbeans 版本。执行程序后出现此错误：

```
Error: Could not create the Java Virtual Machine.
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: A fatal exception has occurred. Program will exit. 
```

我的 Netbeans.conf 是：

```
# ${HOME} will be replaced by JVM user.home system property
netbeans_default_userdir="${HOME}/.netbeans/7.1.2"
# Options used by NetBeans launcher by default, can be overridden by explicit
# command line switches:
netbeans_default_options="-J-client -J-Xss2m -J-Xms16m -J-XX:PermSize=16m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true"
# Note that default -Xmx and -XX:MaxPermSize are selected for you automatically.
# You can find these values in var/log/messages.log file in your userdir.
# The automatically selected value can be overridden by specifying -J-Xmx or
# -J-XX:MaxPermSize= here or on the command line.
# If you specify the heap size (-Xmx) explicitly, you may also want to enable
# Concurrent Mark & Sweep garbage collector. In such case add the following
# options to the netbeans_default_options:
# -J-XX:+UseConcMarkSweepGC -J-XX:+CMSClassUnloadingEnabled J-XX:+CMSPermGenSweepingEnabled
# (see http://wiki.netbeans.org/FaqGCPauses)
# Default location of JDK, can be overridden by using --jdkhome <dir>:
netbeans_jdkhome="C:\Arquivos de programas\Java\jdk1.7.0_07"
# Additional module clusters, using ${path.separator} (';' on Windows or ':' on Unix):
#netbeans_extraclusters="/absolute/path/to/cluster1:/absolute/path/to/cluster2"
# If you have some problems with detect of proxy settings, you may want to enable
# detect the proxy settings provided by JDK5 or higher.
# In such case add -J-Djava.net.useSystemProxies=true to the netbeans_default_options. 
```

我需要做什么？我整天都在尝试解决这个错误。我的系统内存是 3Gb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T02:51:24.633

我在启动时遇到了同样的错误`Netbeans`

```
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我尝试重新启动`Netbeans`很多次。重复同样的错误。后来我发现它正在发生，因为其他一些应用程序已经在使用`JVM`. 所以我找了一个这样的应用程序`Tomcat Server`。我终止`Tomcat`并尝试`Netbeans`重新开始，这很好。因此，请尝试寻找任何使用`JVM`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T21:52:12.000

> 无法为对象堆保留足够的空间

这几乎总是意味着你`-Xmx`对机器来说太高了。上面有一条消息：

> # 注意默认的 -Xmx 和 -XX:MaxPermSize 会自动为你选择

尝试提供明确的价值，从小处着手。请注意，`-Xms`必须小于或等于`-Xmx`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T10:13:10.320

对于上述问题，我们有几个解决方案

解决方案 1：您可以重新安装所有组件。即这意味着您已经安装了整个软件。对于错误：无法创建 Java 虚拟机。

解决方案 2：最大堆大小取决于机器架构，例如 32 位或 64 位，JVM 位大小，例如 32 位 JVM 或 64 位 JVM 和操作系统。

在 32 位机器中，虽然最大堆大小的理论限制为 4GB，但它因操作系统而异，例如在 32 位 Windows XP 上，由于各种原因，最大堆大小限制为 1.5G，而在 64 位 Solaris 机器上，即使使用 32 位 JVM你可以负担得起大约 3.5GB。因此，当您在 32 位 Windows XP 机器上运行以下 java 命令时

解决方案 3：在提供堆空间时，另一个值得注意的语法错误是数字文字和单元之间的空间，如下例所示：

```
Correct: ~/java java -Xmx1500 M
In-correct:   ~/java java -Xmx1500MB
In-Correct:  ~/java java -Xmx 1400M 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T21:37:15.577

> -J-Xss2m -J-Xms16m -J-XX:PermSize=16m

这些是不够的价值。尝试从 16Mb 增加到 512Mb（或 1Gb）

# cuda - CUDA cudaDeviceProp has no member error building deviceQuery 示例

> ID：12808755
> 
> 赞同：2
> 
> 时间：2012-10-09T21:33:51.793
> 
> 标签：cuda

我尝试在集群上编译 CUDA 设备查询包，但是在位置 /NVIDIA GPU Computing SDK/C/src/deviceQuery 进行 make 时，出现以下错误

```
deviceQuery.cpp: In function 'int main(int, char**)':
deviceQuery.cpp:119: error: 'struct cudaDeviceProp' has no member named 'maxThreadsPerMultiProcessor'
make: *** [obj/x86_64/release/deviceQuery.cpp.o] Error 1 
```

有人可以帮我解决这个错误。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T07:41:28.963

`maxThreadsPerMultiProcessor`已`struct cudaDeviceProp`在 CUDA 4.0 中添加。你的一台机器必须有一个旧的 CUDA takeit。

# java - Java中的类型转换

> ID：12808758
> 
> 赞同：8
> 
> 时间：2012-10-09T21:33:58.483
> 
> 标签：java, casting, compiler-errors, type-conversion

> **可能重复：**
> [知道为什么我需要在这里将整数文字转换为 (int) 吗？](https://stackoverflow.com/questions/7900198/any-idea-why-i-need-to-cast-an-integer-literal-to-int-here)

```
package typecastingpkg;

public class Main
{        
    public static void main(String[] args)
    {
       byte a=10;
       Integer b=(int)-a;
       System.out.println(b);

       int x=25;
       Integer c=(Integer)(-x); // If the pair of brackets around -x are dropped, a compile-time error is issued - illegal start of type.
       System.out.println(c);

       Integer d=(int)-a;     //Compiles fine. Why does this not require a pair of braces around -a?
       System.out.println(d);
    }
} 
```

在此代码中，`-x`将原始类型`int`转换为包装器类型`Integer`时，会产生编译时错误`illegal start of type`：

```
Integer c=(Integer)-x; 
```

它需要一对`-x`像这样的牙套`Integer c=(Integer)(-x);`

然而，下面的表达式编译得很好。

```
Integer d=(int)-a; 
```

为什么这个不需要`-a`像前面的表达式那样需要一对大括号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T21:37:23.767

编译器认为，在表达式`(Integer)-x`中，您试图`x`从名为 的变量中减去`Integer`，因此由于没有定义这样的变量而出现错误。`(int)-x`之所以有效，是因为`int`它是原始类型的保留关键字，不能用作变量名，因此编译器可以推断出您正在尝试强制转换，而不是减法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T21:45:01.267

可以通过[检查 Java 的语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.16)找到答案：

```
CastExpression:
    ( PrimitiveType ) UnaryExpression
    ( ReferenceType ) UnaryExpressionNotPlusMinus 
```

这告诉您可以使用强制转换表达式，例如`(int) -x;`因为`int`是原始类型，因此您可以在其后使用一元表达式。但是，如果您使用一个对象，那么它就是 a`ReferenceType`并且唯一跟在 a之后的`ReferenceType`是[`UnaryExpressionNotPlusMinus`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15)，它不包括诸如`-x`or之类的东西`+x`：

```
UnaryExpressionNotPlusMinus:
    PostfixExpression
    ~ UnaryExpression
    ! UnaryExpression
    CastExpression 
```

这个禁止的原因是它`Integer`本身可以被解释为一个标识符，这会导致歧义。`int`不能解释为已识别，因为它是保留字。要解决这种歧义，您必须将一元表达式括在括号中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:42:25.627

您不能将原始类型转换为类，反之亦然。

您可以将基元转换为其他基元。在这种情况下，值精度可能会丢失。例如，如果您将 long 转换为 int。

您还可以将对象转换为其他类型。

实际上，从 java 1.5 开始，通过自动装箱允许将原始包装器类型分配给原始数据，这可能会造成混淆。这只是一个编译器糖。当你说

`Integer a = 5;`编译器将其翻译为`Integer a = new Integer(5);`

如果你说那

`int b = a;`你真的说`int b = a.intValue();`

不幸的是，像 +、- 等运算符不适用于原始包装器。只有原语支持它们。所以，你不能说`-a`。你必须说`(-1)*a.intValue()`。现在可以将此值分配给 int 或 Integer 变量：自动装箱将完成这项工作。

# mercurial - 是否可以同时从多个 Mercurial 存储库中提取？

> ID：12808759
> 
> 赞同：4
> 
> 时间：2012-10-09T21:34:05.800
> 
> 标签：mercurial

我希望能够做这样的事情：

```
hg pull http://server/repo1 http://server/repo2 http://otherserver/repo 
```

并立即关闭所有变更集，并使用“添加 x 变更集并对 z 文件进行 y 更改”消息聚合所有拉取的结果。我目前正在使用（略微复杂的）bash 脚本执行此操作，但是有没有办法使用我错过的单个 mercurial 命令（或已经存在的插件）来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:18:06.993

正如@James 所指出的，**如果**您的存储库有

路径 1 - 回购 1

路径 2 - 回购 2

...

结构，您可以使用“超级回购”的想法并一次提取所有包含的回购（但我建议使用 GuestRepo 而不是 subrepo[扩展](http://mercurial.selenic.com/wiki/GuestrepoExtension)）

如果您的 repo 中有用于拉取源的公共基础并且必须组合变更集，则**必须**使用*中间***存储**库作为收集器。IE

 ****   创建中间存储库

> hg clone 工作调解员

*   拉外部（来自 MEDIATOR）

> hg pull EXTERNAL1 & hg pull EXTERNAL2 ... hg pull EXTERNAL

*   拉调解员（来自 WORK）

> hg拉调解员***

# javascript - 用于移动设备的 ASP.NET MVC 4/Web API 单页应用程序...需要身份验证

> ID：12808761
> 
> 赞同：0
> 
> 时间：2012-10-09T21:34:13.133
> 
> 标签：javascript, asp.net-mvc, authentication, forms-authentication, asp.net-web-api

我们开发了一个 ASP.NET MVC 4/Web API 单页移动网站（也使用 jQuery Mobile），旨在仅从移动设备（例如 iPad、iPhone、Android 桌面和手机等）访问，而不是桌面浏览器。该移动网站将在内部托管，就像 Intranet 网站一样。但是，由于我们是从移动设备访问它，我们不能使用 Windows 身份验证。我们仍然需要知道哪个用户（及其角色）正在登录移动网站应用程序。

我们尝试简单地使用 ASP.NET 的表单身份验证和成员资格提供程序，但无法使其完全按照我们想要的方式工作。我们需要的是，仅在用户第一次在移动设备上访问网站时才提示用户输入用户名和密码。在他们输入正确的用户名和密码并通过一次身份验证后，他们每次访问该站点时都应该直接进入。他们不应该重新输入他们的凭据（即，需要在本地保存一些内容到每个设备在第一次之后识别用户）。

这就是我们遇到麻烦的地方。第一次一切都按预期工作。也就是说，系统会提示用户输入用户名和密码，然后通过身份验证并允许进入该站点。问题是每次在移动设备上关闭浏览器后，设备和用户都不知道，用户不得不重新输入用户名和密码。

我们也尝试了很多东西。我们尝试在 JavaScript 中设置持久性 cookie。不好。cookie 没有第二次被读取。我们尝试从 ASP.NET 手动设置持久性 cookie。不好。当然，我们使用了 FormsAuthentication.SetAuthCookie(model.UserName, true); 作为表单身份验证框架的一部分。不好。我们尝试使用 HTML5 本地存储。不好。无论我们尝试什么，如果用户在移动设备上，他们每次都必须登录。（注意：我们在运行 iOS 5.1 和 6.0 的 iPad 和 iPhone 上进行了尝试，Safari 配置为允许 cookie，我们在 Android 2.3.4 上进行了尝试。）

有什么技巧可以让这样的场景正常工作吗？或者，我们是否必须编写某种自定义身份验证机制？如果是这样，怎么做？而且，什么？或者，我们应该使用基于声明的身份验证和 WIF 之类的东西吗？或者？？？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:19:43.173

尝试添加此处讨论的 .browser 文件： [http ://www.simonantony.net/knowledge-base/articles/browsing-your-site-on-an-iphone-using-chrome-does-not-work/](http://www.simonantony.net/knowledge-base/articles/browsing-your-site-on-an-iphone-using-chrome-does-not-work/)

我知道它说的是 chrome，但我也用 safari 解决了这个问题。

# google-chrome-extension - 从 Google Chrome 扩展程序抓取网页

> ID：12808763
> 
> 赞同：1
> 
> 时间：2012-10-09T21:34:37.397
> 
> 标签：google-chrome-extension, web-scraping

我已经开始开发 Chrome 扩展程序来在网站上导航和执行操作。到目前为止，扩展程序能够接收几个参数并检查一组单选按钮，填写表格的一些输入，然后提交。

我现在想要做的是重复这个过程，但是当页面重新加载时我被卡住了。而且我不知道如何使脚本对请求的完成做出反应。

我想要实现的工作流程如下（用于自动复制某个对象）：

**弹出面**

输入要复制的主对象的编号

输入副本的基本名称（例如 Mod，以便我可以迭代并添加 mod1、mod2、modn）

输入份数

**背景面**

选择主人

选择标准选项

填写输入

提交表格

*等待页面完成请求并继续下一个副本。*（这里我需要帮助）

问题在于重复，其余的都在处理。我认为这一定是处理请求的一种方式。有任何想法吗？

顺便说一句，我正在使用 Google Chrome 的扩展和选项卡方法以及 JavaScript 和 jQuery 来完成这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:41:40.910

好的，我将根据 Matthew Getner 的评论自己回答这个问题。[chrome.webRequest.onCompleted](http://developer.chrome.com/extensions/webRequest.html#event-onCompleted)是该问题的解决方案。使用这种方法，我能够等待请求完成并重新开始该过程。通过[messegaes 方法](http://developer.chrome.com/extensions/messaging.html)，我实现了背景和扩展本身之间的通信。所以我终于能够填写表格，发送并重复。通过这种方式，我制作了一种机器人来帮助同事在一个陈旧的网络平台上完成一项蹩脚的重复性任务。

# node.js - 在流星中访问入站 HTTP 标头？

> ID：12808767
> 
> 赞同：1
> 
> 时间：2012-10-09T21:35:07.920
> 
> 标签：node.js, http-headers, meteor

我正在开发一个依赖于浏览器在 HTTP 标头中发送的数据的应用程序（并且没有办法解决这个问题）。这也恰好是我第一次使用基于 node.js 的东西，所以我很可能完全错过了一些简单的东西！

基本上我想要做的是从客户端调用服务器上的一个方法，并在该方法中读取客户端发送的 HTTP 标头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:19:34.573

Meteor 尚未提供支持的 API 来从您的应用程序提供 HTTP。这是有意的：在不久的将来，您的应用服务器可能不仅仅是直接为最终用户服务的单个进程，而是代理层后面的任意可并行化服务。因此，我们需要提供一个受支持的 API 来响应 HTTP 请求（例如 REST），该请求在这样的设置中继续工作。

你确定它需要是 HTTP 并且你不能只使用 Meteor 方法吗？

如果您现在确实需要接受直接 HTTP 请求，请看一下如何`packages/accounts-oauth-helper/oauth_server.js`使用`__meteor_bootstrap__.app`连接[中间件框架](http://www.senchalabs.org/connect/)。这暂时可行，但我们不保证 Meteor 将始终由 Connect 提供支持 :)

# java - 在linux上设置类路径以运行java程序

> ID：12808768
> 
> 赞同：0
> 
> 时间：2012-10-09T21:35:14.373
> 
> 标签：java, linux

我正在尝试在 linux 上运行此命令...编译成功，但在运行时出现错误。执行此命令：

```
java -cp .:/smash/same/hope/ant-launcher-1.6.1.jar src.vp 
```

输出

```
Setting the value for property-debug
Fusion Repository/asd/file/repo
Logs Directory
Running validations
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/tools/ant/Project
    at src.vp.call(vp.java:114)
    at src.vp.main(vp.java:172)
Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.Project
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:319)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:264)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)
    ... 2 more 
```

有人能帮我解决吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:36:58.080

您已经包含了`ant-launcher`jar 文件，但我敢肯定，它不包含整个 ant。查找包含`Project`该类的 ant jar 文件。（根据您指定的其他文件，我希望它是 ant-1.6.1.jar。）

# vba - Store.EntryID 因会话登录方法而异

> ID：12808769
> 
> 赞同：2
> 
> 时间：2012-10-09T21:35:16.747
> 
> 标签：vba, outlook, outlook-2007, outlook-redemption

我在 Access VBA 中使用 Redemption 对象来访问 Outlook。

这`DefaultStore.EntryID`取决于`logon`我使用的会话方法。

这是我的代码：

```
Dim oSession As New Redemption.RDOSession
oSession.Logon
Debug.Print oSession.Stores.DefaultStore.EntryID
oSession.Logoff
oSession.LogonExchangeMailbox ("MyADUsername"), "mail.server.com"
Debug.Print oSession.Stores.DefaultStore.EntryID
oSession.Logoff
Set oSession = Nothing 
```

我的第一个`Debug.Print`返回一个大约 336 个字符长的字符串。第二个返回一个大约 76 个字符长`Debug.Print`的不同字符串（*具有一些相同的字符）。*

我在这里可能做错了什么或误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T18:23:35.853

所有 MAPI 条目 id 都必须被视为黑框。多个条目 id 可以引用同一个对象，因此永远不要直接比较条目 id。为此使用 RDOSession.CompareEntryIDs。

# jquery - 使用jquery解析html字符串

> ID：12808770
> 
> 赞同：37
> 
> 时间：2012-10-09T21:35:28.263
> 
> 标签：jquery

我正在尝试通过 jQuery 解析这个 html 以获取 data1、data2、data3。虽然我确实获得了 data2 和 data3，但我无法通过我的方法获得 data3。我对jQuery相当陌生，所以请原谅我的无知。

```
<html>
<body>
   <div class="class0">
    <h4>data1</h4>
    <p class="class1">data2</p>
    <div id="mydivid"><p>data3</p></div>    
   </div>
</body>
</html> 
```

这是我在 jquery 中的调用方式。

```
var datahtml = "<html><body><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></body></html>";

alert($(datahtml).find(".class0").text()); // Doesn't Work

alert($(datahtml).find(".class1").text()); // work 

alert($(datahtml).find("#mydivid").text()); // work 
```

只有`alert($(datahtml).find(".class0").text());`不工作，其余的都按预期工作。我想知道这可能是因为 class0 里面有多个标签还是什么？在这种情况下如何获取 data1 ？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-09T21:49:28.863

目前的答案都没有解决真正的问题，所以我会试一试。

```
var datahtml = "<html><body><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></body></html>";

console.log($(datahtml)); 
```

`$(datahtml)``div.class0`是一个仅包含元素的 jQuery 对象，因此当您调用`.find`它时，您实际上是在寻找后代`div.class0`而不是您期望的整个 HTML 文档。

一个快速的解决方案是将解析的数据包装在一个元素中，以便`.find`按预期工作：

```
var parsed = $('<div/>').append(datahtml);
console.log(parsed.find(".class0").text()); 
```

[**小提琴**](http://jsfiddle.net/xWD5c/5/)

* * *

这样做的原因不是很简单，但我假设 jQuery 通过简单地将 HTML 字符串放入单独的动态创建 DOM 片段然后检索解析的元素来“解析”更复杂的 html 字符串，此操作很可能会使 DOM 解析器忽略`html`and`body`标记，因为在这种情况下它们是非法的。

这是一个非常小的[测试套件](http://jsfiddle.net/demkM/1/)，它证明了这种行为在 jQuery 1.8.2 一直到 1.6.4 都是一致的。

**编辑：**引用这篇[文章](http://www.devnetwork.net/viewtopic.php?f=13&t=117065)：

> 问题是 jQuery 创建了一个 DIV 并设置`innerHTML`然后获取 DIV 子元素，但由于 BODY 和 HEAD 元素不是有效的 DIV 子元素，因此浏览器不会创建这些元素。

让我更加确信我的理论是正确的。我会在这里分享它，希望它对你有一些意义。将 jQuery 1.8.2 的[未压缩源](http://code.jquery.com/jquery-1.8.2.js)与此放在一起。`#`表示行号。

所有通过（定义@#6122）生成的[文档片段](https://developer.mozilla.org/en-US/DOM/DocumentFragment)都将通过（#6151）（即使它是一个缓存的片段，它在创建时已经通过），并且正如上面引用的文本所暗示的那样，（定义@# 6275）在安全片段内创建一个新的作为已解析数据的容器 -在 #6301-6303 创建的元素，在 #6344 检索，在 #6347 删除 div 以进行清理（加上 #6359-6361 作为错误修复），在#6351-6355 处合并到返回数组中并在#6406 处返回。`jQuery.buildFragment``jQuery.clean``jQuery.clean``jQuery.clean``div``div``childNodes``childNodes`

因此，所有调用 的方法`jQuery.buildFragment`，其中包括`jQuery.parseHTML`和`jQuery.fn.domManip`- 其中包括`.append()`，`.after()`，`.before()`它们调用 `domManip`jQuery 对象方法，以及`$(html)`在`jQuery.fn.init`（定义 @#97，处理复杂 [多个单个标签] html 字符串 @#125 , 调用`jQuery.parseHTML`@#131)。

几乎所有 jQuery HTML 字符串解析（除了单标签 html 字符串）都是使用`div`元素作为容器完成的，并且`html`/`body`标签不是`div`元素的有效后代，因此它们被剥离是有道理的。

* * *

附录：较新版本的jQuery（1.9+）已经重构了HTML解析逻辑（例如，内部`jQuery.clean`方法不再存在），但整体解析逻辑保持不变。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-09T21:57:00.513

它的行为很奇怪，因为它忽略了 html 和 body 标记，并从 class = "class0" 的第一个 div 开始。html 被解析为 DOM 元素，但未添加到 DOM。对于添加到 DOM 的元素，选择器不会忽略 body 标签并在文档上应用选择器。您需要将 html 添加到 DOM，如下所示。

**[现场演示](http://jsfiddle.net/rajaadil/Phj9m/1/)**

```
$('#div1').append($(datahtml)); //Add in DOM before applying jquery methods.

alert($('#div1').find(".class0").text()); // Now it Works too

alert($('#div1').find(".class1").text()); // work   

alert($('#div1').find("#mydivid").text()); // work 
```

如果我们将您的 html 包装在某个 html 元素中以使其成为起点而不是您的第一个带有 class="class0" 的 div，那么您的选择器将按预期工作。

**[现场演示](http://jsfiddle.net/rajaadil/Phj9m/2/)**

```
var datahtml = "<html><body><div><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></div></body></html>";

alert($(datahtml).find(".class0").text()); // Now it Works too

alert($(datahtml).find(".class1").text()); // work   

alert($(datahtml).find("#mydivid").text()); // work 
```

[jQuery 文档对 jQuery 解析函数 jQuery() 即 $() 的评价](http://api.jquery.com/jquery/)

> 在传递复杂的 HTML 时，某些浏览器可能无法生成完全复制所提供的 HTML 源的 DOM。如前所述，jQuery 使用浏览器的 .innerHTML 属性来解析传递的 HTML 并将其插入到当前文档中。在此过程中，一些浏览器会过滤掉某些元素，例如 `<html>`、 `<title>`、 或 `<head>`元素。因此，插入的元素可能不能代表传递的原始字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-26T19:45:06.977

我想我有一个更好的方法：

假设你有你的 html：

```
var htmlText = '<html><body><div class="class0"><h4>data1</h4><p class="class1">data2</p><div id="mydivid"><p>data3</p></div></div></body></html>' 
```

这是您一直希望做的事情：

```
var dataHtml = $($.parseXML(htmlText)).children('html'); 
```

`dataHtml`现在的工作方式与您熟悉的普通 jquery 对象完全一样！！

这个解决方案的美妙之处在于它不会剥离 body、head 或 script 标签！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T21:40:14.850

尝试这个

```
alert($(datahtml).find(".class0 h4").text()); 
```

原因是您所指的文本在.. 的`h4`元素 内部，`class0`因此您的选择器将不起作用，或者直接访问内容..

```
alert($(".class0 h4").text()); 

alert($(".class1").text()); 

alert($("#mydivid").text()); 
```

**编辑**

```
var datahtml = "<html><body><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></body></html>";

$('body').html(datahtml);

   alert($(".class0 h4").text()); 

    alert($(".class1").text()); 

    alert($("#mydivid").text()); 
```

**[检查演示](http://jsfiddle.net/sushanth009/YRJSq/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T21:44:34.373

除了将 HTML 放在一个临时的不可见容器中之外，我不知道任何其他方法。

```
$(document).ready(function(){
  var datahtml = $("<html><body><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></body></html>".replace("\\", ""));
  var tempContainer = $('<div style="display:none;">'+ datahtml +'</div>');
  $('body').append(tempContainer);
  alert($(tempContainer).find('.class1').text());
  $(tempContainer).remove();                                                                                                                                                        
});
​ 
```

这是一个[jsfiddle 演示](http://jsfiddle.net/TuXqQ/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T21:39:58.970

它不起作用，因为`<div>`with 类`class0`没有任何文本节点作为直接子节点。将类添加到`<h4>`，它将起作用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T21:40:12.017

我认为主要问题是你的 jquery 不能有 html。在您的情况下，Jquery 发生的事情是它试图找到第一个 html 标记，在您的情况下是带有 class0 的 div。

测试一下，看看我是对的：

```
if($(datahtml).hasClass('class0'))
    alert('Yes you are right :-)'); 
```

因此，这意味着您不能将 html 和/或 body 标记添加为其中的一部分以进行查询。

如果你想让它工作，只需尝试添加这部分代码：

```
<div>
    <div class="class0">
        <h4>data1</h4>
        <p class="class1">data2</p>
        <div id="mydivid"><p>data3</p></div>    
   </div>
</div> 
```

所以试试这个：

```
var datahtml = "<div><div class=\"class0\"><h4>data1</h4><p class=\"class1\">data2</p><div id=\"mydivid\"><p>data3</p></div></div></body></div>";

alert($(datahtml).find(".class0").text()); // work

alert($(datahtml).find(".class1").text()); // work 

alert($(datahtml).find("#mydivid").text()); // work 
```

# iphone - 带有大量图像的 UITableViewController 滚动滞后

> ID：12808772
> 
> 赞同：1
> 
> 时间：2012-10-09T21:35:36.993
> 
> 标签：iphone, objective-c, ios, xcode

我有以下`cellForRowAtIndexPath`方法代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"champion cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UIImage *cellIcon = [UIImage imageNamed:[arrayOfChampionPictures objectAtIndex:indexPath.row]];
    [[cell imageView] setImage:cellIcon];

    cell.imageView.frame = CGRectMake(0.0f, 0.0f, 70.0f, 70.0f);

    cell.imageView.layer.cornerRadius = 7;
    [cell.imageView.layer setMasksToBounds:YES];

    cell.textLabel.text = [arrayOfChampionNames objectAtIndex:indexPath.row];

    return cell;
} 
```

包含图片名称`arrayOfChampionNames`的本地数据库存储在哪里。`NSMutableArray`我的 UITableView 中有大约 103 个带有图像的单元格。它在第一次滚动时从头到尾滞后，之后平滑滚动。模拟器没有滞后。

* * *

我想出了可能的解决方案，但我不知道如何实现它们

*   滚动后加载图像，
*   将图像数据预加载到 UITableView 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:34:46.163

我会告诉你滞后来自哪里 - 拐角半径。预先计算图像圆角。动态地执行它们会破坏滚动性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:42:33.133

你忘记了一些东西：

```
static NSString *CellIdentifier = @"champion cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
} 
```

这样，您将实际利用您创建的可重用标识符。

# mysql - CodeIgnither OAuth 2.0 用户和 access_tokens 数据库设置

> ID：12808775
> 
> 赞同：1
> 
> 时间：2012-10-09T21:35:45.277
> 
> 标签：mysql, codeigniter, oauth

根据[这个问题](https://stackoverflow.com/questions/12804728/codeigniter-web-application-sso-use-oauth2-saml-both-neither)，我正在使用 CodeIgniter 和 OAuth 2 来尝试为我的 webapp 的内部用户提供 SSO，最好是根据他们的 Google Apps 帐户验证他们。没有注册或任何东西，只有现有用户。

使用 CI [oauth2 spark](http://getsparks.org/packages/oauth2/versions/HEAD/show)我从谷歌得到一个类似于下面的 OAuth 令牌：

```
OAuth2_Token_Access Object
 (
   [access_token:protected] => dp83.AHSDj899sDHHD908DHFBDjidkd8989dDHhjjd
   [expires:protected] => 1349816820
   [refresh_token:protected] => 
   [uid:protected] => 
 ) 
```

使用该令牌，我可以从 Google 检索一些用户信息：

```
[uid] => 3849450385394595
[nickname] => this_guy
[name] => This Guy
[first_name] => This
[last_name] => Guy
[email] => this.guy@example.com
[location] => 
[image] => 
[description] => 
[urls] => Array
    (
    ) 
```

现在要让当前将使用 webapp 的 15 个人左右登录，我是否需要`users`在 mysql 数据库中创建一个表，并以他们的电子邮件地址作为键？然后比较刚刚从 Google OAuth 请求返回的电子邮件，看看它是否存在于我的`users`表中？

Google access_token 怎么样，我现在是否将它与用户表中已经存在的电子邮件一起存储？

相关：将来我将如何根据该 access_token 自动验证用户，这样他们就不必再次通过 Google 完成整个 OAuth 审批流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:12:55.243

访问令牌更改 - 所以不，将其存储在您的数据库中是没有意义的。一旦过期（用户注销），它就没有用了。要管理访问，您可以存储从初始身份验证返回的任何唯一 ID。如果您想知道如何在第一次身份验证后避免 OAuth，我认为这是不可能的，因为这会破坏其目的。

# delphi - 使用 Indy 10.5.8.0 和 Delphi XE2 的 UTF-8 GET

> ID：12808777
> 
> 赞同：3
> 
> 时间：2012-10-09T21:35:46.993
> 
> 标签：delphi, delphi-xe2, indy, indy10, last.fm

我正在使用 Delphi XE2 编写我的第一个 Unicode 应用程序，我偶然发现了对`GET`Unicode URL 的请求的问题。

简而言之，这是 MP3 标记应用程序中的一个例程，它获取曲目标题和艺术家，并在 Last.FM 中查询相应的专辑、曲目编号和流派。

我有以下代码：

```
function GetMP3Info(artist, track: string) : TMP3Data //<---(This is a record)
var
  TrackTitle,
  ArtistTitle : WideString;
  webquery    : WideString;

[....]

WebQuery := UTF8Encode('http://ws.audioscrobbler.com/2.0/?method=track.getcorrection&api_key=' + apikey + '&artist=' + artist + '&track=' + track);

//[processing the result in the web query, getting the correction for the artist and title]

// eg: for artist := Bucovina and track := Mestecanis, the corrected values are 
//ArtistTitle := Bucovina;
// TrackTitle := Mestecăniș;

//Now here is the tricky part:

webquery := UTF8Encode('http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=' + apikey + '&artist=' + unescape(ArtistTitle) + '&track=' + unescape(TrackTitle)); 
//the unescape function replaces spaces (' ') with '+' to comply with the last.fm requests

[some more processing]

end; 
```

a 中的 webquery`TMemo`看起来恰到好处：

> [http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=e5565002840xxxxxxxxxxxxxx23b98ad&artist=Bucovina&track=Mestecăniş](http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=e5565002840xxxxxxxxxxxxxx23b98ad&artist=Bucovina&track=Mestec%C4%83ni%C8%99)

然而，当我尝试使用（属性设置为）`GET`向 webquery 发送请求时，我在 Wireshark 中看到正在使用 ANSI 请求 URL 发送数据：`TIdHTTP``ContentEncoding``'UTF-8'``TIdHTTP``GET`

> /2.0/?method=track.getInfo&api_key=e5565002840xxxxxxxxxxxxxx23b98ad&artist=Bucovina&track=Mestec?ni?

以下是`GET`请求和响应的完整标头：

```
GET /2.0/?method=track.getInfo&api_key=e5565002840xxxxxxxxxxxxxx23b98ad&artist=Bucovina&track=Mestec?ni? HTTP/1.1
Content-Encoding: UTF-8
Host: ws.audioscrobbler.com
Accept: text/html, */*
Accept-Encoding: identity
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.23) Gecko/20110920 Firefox/3.6.23 SearchToolbar/1.22011-10-16 20:20:07

HTTP/1.0 400 Bad Request
Date: Tue, 09 Oct 2012 20:46:31 GMT
Server: Apache/2.2.22 (Unix)
X-Web-Node: www204
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Max-Age: 86400
Cache-Control: max-age=10
Expires: Tue, 09 Oct 2012 20:46:42 GMT
Content-Length: 114
Connection: close
Content-Type: text/xml; charset=utf-8;

<?xml version="1.0" encoding="utf-8"?>
<lfm status="failed">
<error code="6">
    Track not found
</error>
</lfm> 
```

令我困惑的问题是，我是否在监督与设置`TIdHTTP`组件属性相关的任何事情？如何阻止我在应用程序中编写的格式正确的 URL 以错误的格式发送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:41:55.530

要从[`track.getCorrection`](http://www.last.fm/api/show/track.getCorrection)函数中获取 XML 响应，您可以使用如下内容：

```
uses
  IdHTTP, IdURI;

function GetMusicDataXML(const AArtist, ATrack: string): string;
var
  URL: string;
  IdHTTP: TIdHTTP;
const
  APIKey = '1a3d8080e427f4dxxxxxxxxxxxxxxxxx';
begin
  Result := '';
  IdHTTP := TIdHTTP.Create;
  try
    URL := TIdURI.URLEncode('http://ws.audioscrobbler.com/2.0/?method=track.getcorrection&api_key=' + APIKey + '&artist=' + AArtist + '&track=' + ATrack);
    Result := IdHTTP.Get(URL);
  finally
    IdHTTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T23:29:20.643

> ```
> var
>   ...
>   webquery    : WideString; 
> ...
> WebQuery := UTF8Encode('http://ws.audioscrobbler.com/2.0/?method=track.getcorrection&api_key=' + apikey + '&artist=' + artist + '&track=' + track); 
> ```

这并不像你认为的那样。在 XE2 中，`UTF8Encode()`返回一个 UTF-8 编码`RawByteString`的 ，然后您将其分配给`WideString`. RTL 会将 UTF-8 数据解码回 UTF-16 字符串。当您将该字符串传递给 时`TIdHTTP.Get()`，它会在格式化实际 HTTP 请求时将其转换为 ASCII，从而丢失任何非 ASCII 字符。

正如@TLama 所说，您必须在将 URL`TIdURI`传递给`TIdHTTP`. `TIdURI`将 Unicode 字符编码为 UTF-8（默认情况下 - 如果需要，您可以指定编码），然后以`TIdHTTP`不会丢失的 ASCII 兼容格式对结果数据进行编码。

# javascript - 如何使用 AngularJS 以编程方式创建 URL

> ID：12808779
> 
> 赞同：32
> 
> 时间：2012-10-09T21:35:49.347
> 
> 标签：javascript, html, angularjs

目前我正在玩弄 AngularJS 框架。我正在使用 $route 服务来深度链接到我的单页应用程序。

现在我想在我的应用程序中导航，比如说，只更改当前 URL 的搜索部分。在 JavaScript 中使用 $location 服务很容易，但是如何从当前路由构造一个 href 属性，只替换搜索部分？

我必须手工完成还是有 AngularJS 的方法？

*添加：*

当然，$location 服务具有计算此类 URL 的所有方法。但我不能使用它，因为 $location 也会将浏览器窗口导航到新的 URL。

手动创建 URL 有另一个复杂性：必须检查是否使用了旧的 #-method 或新的 History API。根据这一点，URL 必须包含 # 符号或不包含。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-09-11T06:50:23.017

从 v1.4 开始，您可以为此使用[$httpParamSerializer](https://docs.angularjs.org/api/ng/service/$httpParamSerializer)：

```
angular.module('util').factory('urlBuilder', function($httpParamSerializer) {
    function buildUrl(url, params) {
        var serializedParams = $httpParamSerializer(params);

        if (serializedParams.length > 0) {
            url += ((url.indexOf('?') === -1) ? '?' : '&') + serializedParams;
        }

        return url;
    }

    return buildUrl;
}); 
```

**用法**：

要产生`http://url?param1=value1&param2=value2_1&param2=value2_2`调用它：

```
urlBuilder('http://url', { param1: 'value1', param2: ['value2_1', 'value2_2'] }); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-13T01:56:20.917

按照罗伯特的回答，我在 Angular.js 中找到了这些函数。它们是 buildUrl、forEachSorted 和 sortedKeys。builUrl 也使用了 isObject 和 toJson 函数，它们是公共的，所以必须分别改为 angular.isObject 和 angular.toJson。

```
function forEachSorted(obj, iterator, context) {
    var keys = sortedKeys(obj);
    for (var i = 0; i < keys.length; i++) {
        iterator.call(context, obj[keys[i]], keys[i]);
    }
    return keys;
}

function sortedKeys(obj) {
    var keys = [];
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            keys.push(key);
        }
    }
    return keys.sort();
}

function buildUrl(url, params) {
    if (!params) return url;
    var parts = [];
    forEachSorted(params, function (value, key) {
        if (value == null || value == undefined) return;
        if (angular.isObject(value)) {
            value = angular.toJson(value);
        }
        parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));
    });
    return url + ((url.indexOf('?') == -1) ? '?' : '&') + parts.join('&');
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T13:16:13.200

正如您在此处的源代码（v.1.1.0）中看到的：

[https://github.com/angular/angular.js/blob/v1.1.0/src/ngResource/resource.js#L228](https://github.com/angular/angular.js/blob/v1.1.0/src/ngResource/resource.js#L228)

和这里：

[https://github.com/angular/angular.js/blob/v1.1.0/src/ngResource/resource.js#L247](https://github.com/angular/angular.js/blob/v1.1.0/src/ngResource/resource.js#L247)

Angularjs 不使用内部[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)来管理 URI 字符串，但也不提供使用的函数。这些功能是模块内部的（我认为这是一个遗憾）。

如果您想以与 AngularJS 完全相同的方式管理 URI，也许您可​​以将这些函数从源代码复制到您的代码中，并为此创建自己的服务。

# ruby - ruby（不是rails）cgi脚本信息中的自定义404响应？

> ID：12808785
> 
> 赞同：0
> 
> 时间：2012-10-09T21:37:00.007
> 
> 标签：ruby, apache, apache2, cgi

我遇到了一个 PHP 脚本，它在 404s 时将 apache 指向它，所以它可以对 mod_rewrite 无法做的 URLS 进行重写，比如检查版本和做 mod_rewrite 无法做的其他事情......

我想知道是否有任何关于 ruby​​ cgi 和重写 URL 的文档。我已经搜索了 30-40 分钟，但我得到的只是与 RAILS 相关的路线和东西:-(

# objective-c - 将objective-c自定义对象序列化为OSX的JSON？

> ID：12808793
> 
> 赞同：0
> 
> 时间：2012-10-09T21:37:33.883
> 
> 标签：objective-c, json, macos, serialization

我对 Mac 开发非常陌生，在寻找好的资源时遇到了一些麻烦。我当前的问题是自定义objective-c 类对象序列化为JSON。

我知道苹果库中有一个内置的序列化程序，但它只适用于 Foundation 对象。

就我而言，我有自己的类，如下所示：

```
@interface SomeClass : NSObject
{
   int a;
   int b;
   NSString *aa;
   NSString *bb;
}
@property int a,b;
@property NSString *aa,*bb;

@end 
```

如果有人知道如何将这种类型的结构序列化为 JSON，请给我一个提示！任何相关信息都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:59:27.103

如果您只想序列化包含整数和字符串的对象，最简单的方法是创建一个`NSJSONSerialization`支持并序列化它的数据结构：

```
static const NSString *kAKey = @"a";
static const NSString *kBKey = @"b";
static const NSString *kAaKey = @"aa";
static const NSString *kBbKey = @"bb";

- (id)JSONObject {
    return @{
        kAKey: @(self.a),
        kBKey: @(self.b),
        kAaKey: self.aa,
        kBbKey: self.bb
    };
}

- (NSData *)JSONData {
    return [NSJSONSerialization dataWithJSONObject:[self JSONObject] options:0 error:NULL];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T03:03:00.077

过去一周我一直在研究这个问题。我决定编写自己的解决方案。它非常简单，并且建立在现有的 Apple 功能之上。

见这里：[https ://github.com/gslinker/GSObject](https://github.com/gslinker/GSObject)

在这里：[http ://digerati-illuminatus.blogspot.com/2016/01/objective-c-and-json-convert-subclass.html](http://digerati-illuminatus.blogspot.com/2016/01/objective-c-and-json-convert-subclass.html)

对于您的数据模型对象，让它继承自 GSObject 而不是 NSObject。下面是一个继承自 GSObject 的 ThingOne 示例：

```
ThingOne* object1 = [[ThingOne alloc] init];
object1.name = @"John Jones";

NSData* jsonData1 = [object1 toJsonDataWithOptions:NSJSONWritingPrettyPrinted];
NSString *jsonString1 = [object1 toJsonStringWithOptions:NSJSONWritingPrettyPrinted];

NSDictionary<NSString *,id> *dict1 =  [GSObject dictionaryWithValues:object1];

NSString *roundTripJson1 = [object1 toJsonStringWithOptions:NSJSONWritingPrettyPrinted];

//
//  ThingOne.h
//  JasonStuff
//
//  Created by Geoffrey Slinker on 12/28/15.
//  Copyright © 2015 Slinkworks LLC. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "GSObject.h"
#import "ThingTwo.h"

@interface ThingOne : GSObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) ThingTwo *thingTwo;
@property (nonatomic, retain) NSArray *values;
@property (nonatomic, retain) NSDictionary *dict;
@property int myInt;
@property float myFloat;
@property BOOL myBool;
@property (nonatomic, retain) NSNumber* someMoney;

@end

//
//  ThingOne.m
//  JasonStuff
//
//  Created by Geoffrey Slinker on 12/28/15.
//  Copyright © 2015 Slinkworks LLC. All rights reserved.
//

#import "ThingOne.h"

@implementation ThingOne

@synthesize name;
@synthesize thingTwo;
@synthesize values;
@synthesize dict;
@synthesize myInt;
@synthesize myFloat;
@synthesize myBool;
@synthesize someMoney;

- (instancetype)init
{
self = [super init];

thingTwo = [[ThingTwo alloc] init];

thingTwo.stuff = @"Thing Two Stuff";
thingTwo.someOtherStuff = @"Thing Two Other Stuff";
NSDateFormatter *dateFormater = [[NSDateFormatter alloc]init];
[dateFormater setDateFormat:@"yyyy-mm-dd"];
thingTwo.someDate =  [dateFormater dateFromString:@"1963-10-07"];

values = [NSArray arrayWithObjects:@"Value1", @"Value2", @"Value3", nil];

dict = [NSDictionary dictionaryWithObjectsAndKeys:@"value1", @"key1", @"value2", @"key2", nil];

myInt = 5431;
myFloat = 123.456f;
myBool = YES;

someMoney = [NSNumber numberWithInt:503];

return self;
}

@end

//
//  ThingTwo.h
//  JasonStuff
//
//  Created by Geoffrey Slinker on 12/28/15.
//  Copyright © 2015 Slinkworks LLC. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "GSObject.h"

@interface ThingTwo : GSObject

@property (nonatomic, retain) NSString *stuff;
@property (nonatomic, retain) NSString *someOtherStuff;
@property (nonatomic, retain) NSDate *someDate;
@property (nonatomic, retain) NSString *nullString;
@property (nonatomic, retain) NSDate *nullDate;

@end

//
//  ThingTwo.m
//  JasonStuff
//
//  Created by Geoffrey Slinker on 12/28/15.
//  Copyright © 2015 Slinkworks LLC. All rights reserved.
//

#import "ThingTwo.h"

@implementation ThingTwo

@synthesize stuff;
@synthesize someOtherStuff;
@synthesize someDate;

- (instancetype)init
{
self = [super init];

someDate = [NSDate date];

return self;
}

@end 
```

以下是 JSON 输出的示例：

```
{
  "values" : [
    "Value1",
    "Value2",
    "Value3"
  ],
  "myInt" : 5431,
  "myFloat" : 123.456,
  "myBool" : true,
  "someMoney" : "$503.00",
  "thingTwo" : {
    "stuff" : "Thing Two Stuff",
    "nullDate" : null,
    "someDate" : "1963-01-07 07:10:00 +0000",
    "nullString" : null,
    "someOtherStuff" : "Thing Two Other Stuff"
  },
  "name" : "John Jones",
  "dict" : {
    "key1" : "value1",
    "key2" : "value2"
  }
} 
```

# sql - 使用 xp_regread 确定本地安全策略

> ID：12808794
> 
> 赞同：1
> 
> 时间：2012-10-09T21:37:42.813
> 
> 标签：sql, sql-server, tsql, windows-security

> **可能重复：**
> [读取本地组策略/Active Directory 设置](https://stackoverflow.com/questions/1501234/reading-local-group-policy-active-directory-settings)

我正在尝试为 sql server 2005+ 编写审计脚本。

我希望在脚本输出中看到的项目之一是由“强制密码策略”标志验证的实际设置列表。我知道提到的实际设置是从操作系统继承的，所以我希望我可以使用 xp_regread（或 xp_instance_regread）来读取相关的注册表项，但我不知道它们是哪些。

我的所有搜索都将我指向 secpol.msc 管理单元，它显示了我想要的信息，但我希望将该信息添加到我的 sql 脚本中。

底线：

我可以使用 xp_regread 查找哪些注册表项以获取有关本地安全策略的信息？如果我不能那样做，我还能如何将信息放入 sql 语句的结果中？

# java - 让我的资源管理器“无死锁”

> ID：12808795
> 
> 赞同：-1
> 
> 时间：2012-10-09T21:37:55.537
> 
> 标签：java, multithreading, resources

我的程序有一个条件是无死锁的。ResourceManager 允许客户端 `(Set<ResourceNames, long ID>)` 写入/读取（布尔值 true/false）。那是一种方法 `static long getLock(Set<String> resources, boolean operation)` 和 `static void releaseLock(long ID)`。

所有资源都是1-1。如果资源正在写入，则该资源不适用于另一个目标。如果用于读取，其他客户端只能读取，不能写入。资源名称是字符串。虽然 ResourceManager 不能为客户端提供资源，但它必须在 getlock() 方法中阻塞并在资源可供客户端使用时返回。

getlock()方法是获取资源，并创建一个ID，relaselock()方法是从ID中解放资源。我的任务是编写 ResourceManager，它不会死锁。

Client 类为随机操作和资源创建 k 个客户端，并启动它。那堂课是写的，但我看不到。我的任务是写一个类，和这两个方法。

-问题是阻止客户端并返回！- 死锁 - 免费

```
package itself.probafeladat14;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.Random;
import java.util.Set;

public class ResourceManager {

    protected static HashMap<String, Boolean> reservedResources = 
            new HashMap<String, Boolean>();
    protected static HashMap<Long, Set<String>> resourcesByID = 
            new HashMap<Long, Set<String>>();
    protected static LinkedList<Long> sequenceOfID =
            new LinkedList<Long>();

    public static void releaseLock(long ID) {
        boolean read = false;
        Set<String> resources = resourcesByID.remove(ID);
        sequenceOfID.remove(ID);

        for (String str : resources)
            if (reservedResources.containsKey(str)) {
                if (reservedResources.get(str) == true)
                    reservedResources.remove(str);
                else if (reservedResources.get(str) == false) {
                    for (long i : sequenceOfID)
                        if (resourcesByID.get(i).contains(str))
                            read = true;
                    if (!read)
                        reservedResources.remove(str);
                    read = false;
                }
            }
    }

    public static long getLock(Set<String> resources, boolean operation) throws ResourceNotAvaliableException {

        boolean isFree = true;
        boolean uniqueID = false;
        long ID = 0;

        for (String str : resources) {
            if (reservedResources.containsKey(str)) {
                if (reservedResources.get(str) ) {
                    isFree = false;
                }
                if (reservedResources.get(str) == false && 
                        operation == true) {
                    isFree = false;
                }
            }
        }

        if ( !isFree )
            throw new ResourceNotAvaliableException();
        else {
            for (String s : resources)
                if (!reservedResources.containsKey(s))
                    reservedResources.put(s, operation);
            while (!uniqueID) {
                ID = new Random().nextLong();
                if (!sequenceOfID.contains(ID))
                    uniqueID = true;
            }
            sequenceOfID.addLast(ID);
            resourcesByID.put(ID, resources);
            return ID;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:26:39.773

我看不出如何在当前实现中出现死锁，但它存在许多多线程问题：

*   获取锁时的非原子行为（例如，如果我尝试为 A 获取锁，然后尝试同时为 B 和 A 获取锁，那么这将失败，但随后尝试为 B 获取锁将也会失败，因为之前的操作对状态进行了不正确的更改）。
*   在不应该获得的锁（例如，调用`getLock()`同一资源的 2 个线程都可以成功，因为在检查您的资源是否被锁定和实际将资源添加到集合之间存在时间窗口。
*   `ConcurrentModificationException`当 2 个线程尝试同时更新同一个非线程安全集合时，会意外抛出。

您可以通过同步某些方法来解决其中的一些问题，但您需要谨慎地执行此操作，一方面避免死锁，另一方面使其成为并行瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T01:50:26.503

我建议您在 getLock 方法中使用[AtomicBoolean](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html) ：

```
 if (!reservedResources.containsKey(s)) {
        reservedResources.get(s).set(operation);
      } 

```

正如西蒙所说，这将避免锁定，并且您不需要使用同步方法。

此外，我会在方法的底部执行所有“isFree”逻辑。换句话说：

```
 for (String s : resources) {
         if (reservedResources.containsKey(s)) {
             if (reservedResources.get(s).get()) {
                 throw new ResourceNotAvaliableException();
             }
             if (!reservedResources.get(s).get() && operation == true) {
                 throw new ResourceNotAvaliableException()
             }
         }
    }
    for (String s : resources) {
        if (!reservedResources.containsKey(s))
            reservedResources.put(s, operation);
    }
    while (!uniqueID) {
        ID = new Random().nextLong();
        if (!sequenceOfID.contains(ID))
            uniqueID = true;
    }
    sequenceOfID.addLast(ID);
    resourcesByID.put(ID, resources);
    return ID; 

```

# php - 通过php表单更新SQL表

> ID：12808798
> 
> 赞同：0
> 
> 时间：2012-10-09T21:37:58.910
> 
> 标签：php, mysqli

查询正在运行但未发送到 SQL 服务器。我当前的注册脚本。

```
$link = mysqli_connect("$server", "$user", "$pass", "$webdb");
$username = mysqli_real_escape_string($link, (string) $_POST['username']);
$displayname = mysqli_real_escape_string($link, (string) $_POST['display_name']);
$email = mysqli_real_escape_string($link, (string) $_POST['email']);
$password = sha1((string) $_POST['password']);
$query="INSERT INTO user (`username`, `nicename`, `email`, `password`)
VALUES ('$username', '$displayname', '$email', '$password', '1')";
mysqli_query($link, $query);
mysqli_close($link);
echo $query;
?> 
```

我从查询中收到的输出：

```
INSERT INTO user (username, nicename, email, password) VALUES ('orion5814', 'Orion5814', 'my@abc.com', '72f2ac484bee398758e769530dd56228d905884d', '1') 
```

我已经检查了我所有的链接变量，并且它们都设置正确，只要有正确的信息，所以我不知道从这里可以去哪里。抱歉有这些问题; 如果您认为它会有所帮助，您可以在 doxramos.org 上查看它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:41:50.497

查询有缺陷。您命名 4 columns `(username, nicename, email, password)`，但列出 5 个值`('orion5814','Orion5814','my@abc.com','72f2ac484bee398758e769530dd56228d905884d','1')` 如果删除最后一个值，查询应该可以工作。

此外，您可以通过使用面向对象的 mysqli 接口来简化代码，如下所示：

```
$username = $link->real_escape_string($_POST['username']); 
```

和

```
$link->query($query);
$link->close(); 
```

您也不需要将变量显式转换为字符串，因为如果您的代码需要，这会自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T21:47:59.243

正如 jordi12100 建议的那样，在连接到数据库或执行查询时检查错误是一种很好的做法。

你可以这样做：

```
$link = mysqli_connect("$server", "$user", "$pass", "$webdb") or die( "Error:" . mysqli_connect_error());

mysqli_query($link, $query) or die ("Error:" . mysqli_error($link)); 
```

这可以让你知道你做错了什么。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:40:37.727

您的查询中可能有错误。用 mysqli_error() 捕获错误；

# localization - TypeScript 本地化问题

> ID：12808799
> 
> 赞同：3
> 
> 时间：2012-10-09T21:38:05.543
> 
> 标签：localization, typescript

如果我使用打字稿并在那里声明一个字符串，并将该字符串设置为一些俄语文本。然后 typescript 编译器编译为 JavaScript，而不考虑我在解决方案中使用的编码。所以我得到的是“rombic 符号中的问题”而不是普通字母。

那么，你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-03T10:19:51.030

使用 Visual Studio 添加时，TypeScript 默认会创建一个 ANSI 编码文件。（或visual studio创建ansi文件作为标准）

要修复在记事本中打开文件并使用“另存为”并将编码更改为 UTF8 或 UNICODE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T22:14:24.180

您需要将文件编码更改为 UNICODE。编译：

```
var x = "привет мир";

class foo {
    public done() {
        return "привет мир";
    }
} 
```

给我以下JS：

```
var x = "привет мир";
var foo = (function () {
    function foo() { }
    foo.prototype.done = function () {
        return "привет мир";
    };
    return foo;
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T19:34:10.573

当我使用 cscript 运行 tsc.js 编译器时，我遇到了同样的问题。

我发现 tsc 的输入文件应该是**带有签名**（BOM）或 unicode-16 编码的 utf-8。

如果我使用 nodejs 运行 tsc.js，即使没有签名，输入文件也可能是 utf-8 并且一切正常。

# hibernate - Grails“具有相同标识符值的不同对象已与会话相关联”错误

> ID：12808800
> 
> 赞同：5
> 
> 时间：2012-10-09T21:38:07.730
> 
> 标签：hibernate, grails, groovy, grails-searchable

> **可能重复：**
> [休眠：具有相同标识符值的不同对象已与会话关联](https://stackoverflow.com/questions/3553200/hibernate-different-object-with-the-same-identifier-value-was-already-associate)

我在 Grails 的控制器中有以下代码失败并`"a different object with the same identifier value was already associated with the session"`显示错误消息。我已经访问了几个页面，上面说我必须`"merge"`在调用 save 之前调用，最终出现此错误`Provided id of the wrong type for class com.easytha.QuizTag. Expected: class java.lang.Long, got class org.hibernate.action.DelayedPostInsertIdentifier`

有人建议 grails 可搜索插件可能是导致此问题的原因，我应该从我的域类中删除 searchable = true ，这不是一个选项（请参阅上一篇文章[grails searcheable plugin search in inner hasMany class](https://stackoverflow.com/questions/12650402/grails-searcheable-plugin-search-in-inner-hasmany-class/12655877#12655877)）

需要指出的一点是，在调用 q.save() 时不会抛出错误，而是在调用 redirect redirect(action:"show",id:id) 时抛出错误！

有什么建议么？

```
def addTags(String tags,Long id){
        if(tags){
            String[] strTags = tags.split(",");
            Quiz q = Quiz.get(id)           
            for(String t in strTags){
                Tag tagToAdd = Tag.findByTag(t)

                if(!tagToAdd){
                    tagToAdd = new Tag(tag:t)
                    tagToAdd.save()
                }

                println "---> "+tagToAdd +" Quiz"+q?.id
                def qt = QuizTag.findByQuizAndTag(q,tagToAdd)
                if(!qt){
                    qt = new QuizTag(quiz:q,tag:tagToAdd);
                    q.addToTags(qt)
                }

            }           
            q.save()        
            redirect(action:"show",id:id)
        }
    } 
```

- - - - - -编辑 - - - - - - - -

```
Final code that worked with searchable plugin
        def addTags(String tags,Long id){
        if(tags){
            String[] strTags = tags.split(",");
            Quiz q = Quiz.get(id)           
            for(String t in strTags){
                if (q.tags.any { QuizTag qt -> qt.tag.tag == t }) { continue; }
                    Tag tagToAdd = Tag.findOrSaveByTag(t);
                    QuizTag qt = new QuizTag(quiz:q,tag:tagToAdd)
                    q.addToTags(qt)
                }           
            q.save(flush:true)      
            redirect(action:"show",id:id)
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T00:51:12.687

既然你这样做`Quiz.get(id)`了，你就有一个“连接”的实例，所以你绝对不需要“合并”——这只是为了重新连接一个断开的实例。

我认为您收到错误的原因是该行：

```
def qt = QuizTag.findByQuizAndTag(q, tagToAdd) 
```

将实例拉`QuizTag`入会话，但`Tag tagToAdd = Tag.findByTag(t)`已经将该实例与会话相关联，并且您正在分配给另一个变量。您现在有两个与会话关联的实例，它们都表示数据库中的同一行，`qt`并且`tagToAdd`（它们具有相同的 id）。这会产生模棱两可的情况，并且是不允许的，因此会出现错误。

看来您实际上并不需要`qt`被实例化（只有在它不存在时才采取行动）。因此，我建议进行查询以查明它是否存在（可能是' `select count`'），而不是实际检索对象实例。这样，您将只有一个对象的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:46:41.820

Grails 默认使用 Hibernate 代理延迟加载集合。`QuizTag`因此，可能正在创建重复的代理（或代理和膨胀的对象），这会导致您的问题。

您可以尝试以下方法：

```
Quiz q = Quiz.get(id)         
for(String t in strTags){
    // Check if the tag is already joined to this quiz and
    // skip a dynamic finder load later
    if (q.tags.any { QuizTag qt -> qt.tag.tag == t }) { continue; }
    // Find or create-save the tag to join
    Tag tagToAdd = Tag.findOrSaveByTag(t);
    QuizTag qt = new QuizTag(quiz:q,tag:tagToAdd)
    qt.save()
    q.addToTags(qt)
} 
```

# python - Python：无法在包内使用模块

> ID：12808801
> 
> 赞同：1
> 
> 时间：2012-10-09T21:38:09.237
> 
> 标签：python, import, module

我在模块中有一些代码

```
import pygame
from pygame.locals import *

import reusable

from state import state

class TitleState(state.State):
    def __init__(self):
        #Create data batches
        self.soundbatch = reusable.resourceloader.ResourceBatch(path="data/sound", type="ogg")
        self.imagebatch = reusable.resourceloader.ResourceBatch(path="data/image", type="tga")

        #Reusable stuff
        self.inputengine = reusable.inputengine.InputEngine()
        self.mousehandler = reusable.mousehandler.MouseHandler()

    def update(self):
        pygame.event.pump() 
```

但它给了我错误

```
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\MegaCity\Start.py", line 1, in <module>
    import megacity.megacity
  File "C:\Users\Administrator\Desktop\MegaCity\megacity\megacity.py", line 37, in <module>
    themc = MegaCity()
  File "C:\Users\Administrator\Desktop\MegaCity\megacity\megacity.py", line 25, in __init__
    self.titlestate = titlestate.TitleState()
  File "C:\Users\Administrator\Desktop\MegaCity\state\titlestate.py", line 21, in __init__
    self.inputengine = reusable.inputengine.InputEngine()
AttributeError: 'module' object has no attribute 'inputengine' 
```

但是，reusable 目录中肯定有“inputengine”：

```
 Directory of C:\Users\Administrator\Desktop\MegaCity\reusable

10/09/2012  05:29 PM    <DIR>          .
10/09/2012  05:29 PM    <DIR>          ..
10/08/2012  09:34 PM             3,920 inputengine.py
10/09/2012  04:54 PM             1,364 mousehandler.py
10/08/2012  09:42 PM               799 resourceloader.py
10/09/2012  05:32 PM                 2 __init__.py
10/09/2012  05:32 PM    <DIR>          __pycache__ 
```

但是，当我这样做时，`from reusable import inputengine`它会很好地导入`inputengine`。此外，在`__init__.py`可重用时，我将`from . import inputengine`代码工作。对此有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:41:52.010

这就是它应该如何工作（不是错误，而是一个功能）。

你必须在你的导入中包含包名和绝对导入，如果你不想这样做，你可以使用你发现的相对导入（即`from . import inputengine`）。

# javascript - UIWebView 呈现方式与 Safari 不同

> ID：12808802
> 
> 赞同：0
> 
> 时间：2012-10-09T21:38:10.077
> 
> 标签：javascript, uiwebview, mobile-safari, ios6

我有一个非常复杂的外部网页，带有大量 javascript 的 ASPX，在 iPad 上的 Safari 中运行良好，但在我的应用程序中的 UIWebView 中表现不同。

我应该做些什么特别的事情来使它与 Safari 的行为相匹配？

这是在 iOS5.1 或 iOS6 上。我查看了其他类似的线程，但那里的信息很少，并且那里提供的解决方案不适用于这种情况。

委托 webView:didFailLoadWithError: 方法未被调用。我可以从一个按钮启动加载，这样它就不会中断加载。

# orientdb - 如何在 orientdb studio 中创建链接？

> ID：12808806
> 
> 赞同：0
> 
> 时间：2012-10-09T21:38:14.330
> 
> 标签：orientdb

在这个[链接](http://code.google.com/p/orient/wiki/OrientDB_Studio#Create_a_new_record)中有一个非常基本的例子。

我有一个类，它的名字是“dog”，它有一个“name”属性和一个“childs”属性。“childs”属性类型是 LINKLIST。

当尝试创建一个新的狗对象时，我创建了一个“childs”字段，但我不知道如何填充它。

请指点我一个更完整的教程（实际上我搜索它没有成功）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:08:54.567

您可以使用以下查询：

```
insert into animal set name = 'dog', children = [<rid>] 
```

`<rid>`孩子的记录ID在哪里。

# php - 如何在 jQuery mobile 中使用表单数据填充谷歌地图

> ID：12808813
> 
> 赞同：0
> 
> 时间：2012-10-09T21:38:48.167
> 
> 标签：php, forms, google-maps, jquery-mobile

我希望有人能指出我正确的方向。我希望在我的网站的移动版本中有一个表格，该表格将采用邮政编码或城市和州以及该位置周围的半径并显示特定企业的位置数量。

```
<form id="mobileMapper" action="mapresults.php" method="post">
            <div data-role="fieldcontain" class="ui-hide-label formContainer">
                <label for="ziCity">City &amp; State, or Zip:</label>
                <input type="text" name="zipCity" id="zipCity" value="" placeholder="ex: Chicago, IL or 60602" />
            </div>
            <div data-role="fieldcontain">
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a">
                        <label for="radius">Radius:</label>
                        <select name="radius" id="radius">
                           <option value="5">5 miles</option>
                           <option value="10">10 miles</option>
                           <option value="20">20 miles</option>
                        </select>
                    </div>
                    <div class="ui-block-b"><button type="submit" data-theme="b">Submit</button></div>     
                </fieldset>
            </div>
        </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:36:06.517

您可以使用[Google 地方信息库](https://developers.google.com/maps/documentation/javascript/places)。

# python - Python嵌套for循环以将数组元素中的字符串匹配到文件

> ID：12808823
> 
> 赞同：1
> 
> 时间：2012-10-09T21:40:08.953
> 
> 标签：python, file, for-loop, python-2.7, nested-loops

我的代码的目的是遍历数组中的每个元素，将元素转换为字符串，并从包含该字符串的另一个文件返回行。我的代码是：

```
 for element in myarray:
         elementstring=''.join(element)
         for line in myfile:
              if elementstring in line:
                  print line 
```

如果代码运行，它将仅适用于第一个元素。有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:44:03.047

发生这种情况是因为当您通读一次文件的行时，您会到达文件的末尾并且没有剩余的行可以读取。您需要关闭文件并重新打开它以读取每个`element`.

这是这样做的一种方法：

```
for element in myarray:
    elementstring=''.join(element)
    with open('path/to/myfile') as myfile:
        for line in myfile:
            if elementstring in line:
                print line 
```

`read`或者，如果这是一个足够小的文件，您可以通过预先缓存文件中的行来避免磁盘中的几个 s 来减少运行时间，如下所示：

```
myfile = [line.rstrip('\n') for line in open('path/to/myfile')]
for element in myarray:
    elementstring=''.join(element)
    for line in myfile:
        if elementstring in line:
            print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:42:38.867

您浏览一个文件...将指针移到末尾...您需要重新打开文件或`myfile.seek(0)`...但是您的代码还有其他一些问题。不看就很难回答`myarray`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:46:16.153

```
with open(myfile) as f:
    lines=[x for x in f] #store all lines in a list first
    for element in myarray:    #now iterate over myarray
         elementstring=''.join(element)
         for line in lines:            #now iterate over individual line from lines
              if elementstring in line:
                  print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:47:54.060

正如其他人所说，文件不是集合。文件是按顺序读取的，每次迭代都需要使用 seek 函数返回到第一行。

无论如何，这并不是做你想做的事的最佳方式。

从文件读取通常比从 RAM 读取慢（即使有缓存），所以最好让主循环遍历文件。

最好事先计算外部数组上的所有字符串值。

最后，您可能会考虑使用许多算法来搜索文件（或更大的字符串）中的一组字符串。

这是您的代码的优化版本：

```
strs = [' '.join(element) for element in myarray]
for line in open(''path/to/myfile'):
    for elementstring in strs:
         if elementstring in line:
              print line 
```

# visual-studio-2010 - 在 Visual Studio 2010 中基于数据库表创建 3d（拖放图形）

> ID：12808830
> 
> 赞同：0
> 
> 时间：2012-10-09T21:40:33.600
> 
> 标签：visual-studio-2010, silverlight-4.0, visual-studio-lightswitch

我有一个父表包含一个货物集装箱尺寸，一个子表包含几个具有多个尺寸的纸箱我想创建一个包含货物集装箱和纸箱的图形，并且能够（拖放）将纸箱放入容器中。所以我在问要使用什么样的应用程序或控件来实现这一目标。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:50:48.993

对于 LightSwitch，请参阅：LightSwitch 自定义控件中的拖放和事件 [http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/27/Drag-and-Drop-and-Events-in-LightSwitch-Custom-Controls。 aspx](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/27/Drag-and-Drop-and-Events-in-LightSwitch-Custom-Controls.aspx)

# git - git heroku 多台计算机工作流程

> ID：12808832
> 
> 赞同：2
> 
> 时间：2012-10-09T21:40:41.527
> 
> 标签：git, heroku

这个问题可能是由于我对我应该做的事情缺乏了解！我在一台机器上制作了一个 Rails 应用程序并部署了它。然后将其克隆到另一台机器以从那里进行一些更改。回到第一台机器并创建了一些分支来进行一些更改......我知道我希望我的第一台机器拥有 heroku 的东西。

作为单个heroku用户，在多台机器上进行此类开发的最佳策略是什么？

我现在正在做的是创建一个分支，在该分支中执行 git pull，然后合并更改......听起来对吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:49:00.527

Git 是一个去中心化的版本控制系统，您可以在其中上推和下拉代码存储库。部署到 Heroku 的行为等同于推送代码。同样，要检查 Heroku 代码，您可以简单地下拉代码。

尽管您可以使用 Heroku 作为上推和下拉分支（并执行所有提交）的地方，但我强烈建议您设置一个额外的远程存储库（我推荐[GitHub](https://github.com/)），您可以在其中进行大部分代码更改，并且仅使用您的 Heroku 存储库进行部署。然后，您可以在部署之前合并和分支或更改到 master。

# arrays - 从文本框中读取逗号分隔的行

> ID：12808835
> 
> 赞同：0
> 
> 时间：2012-10-09T21:40:52.563
> 
> 标签：arrays, file.readalllines

我一直在阅读和阅读大量答案，修改代码，但我仍然无法弄清楚如何解决这个问题。

我有一个从 .txt 或 .csv 文件接收多行逗号分隔信息的文本框。例子：

> 珍珠港;提康德罗加 CG-45;300;1000
> 埃弗雷特;提康德罗加 CG-46;310;1200
> 珍珠港;伯克 DDG-110;215;800

现在将有一个组合框来选择一个端口（在此示例中，选项将是珍珠港和埃弗雷特）。选择“Pearl Harbour”后，另一个多行文本框将仅显示以“Pearl Harbour”为第一个元素的行。

现在是我能写的：

公共子读取文件（）

```
TextBox1.Text = System.IO.File.ReadAllText("libro1.csv")<br>
Dim lines() As String<br>
lines = Split(TextBox1.Text, vbCrLf)<br>
Dim strline0 As String = lines(0)<br>
Dim strArray0() As String = strline0.Split(";")<br>
Dim strline1 As String = lines(1)<br>
Dim strArray1() As String = strline1.Split(";")<br>
...

End Sub 
```

我发现的第一个问题是，对于 .csv 的每一行，我必须编写两行代码才能拥有一个包含所有信息的数组。但我不能这样做，因为我不知道 .csv 将有多少行。

我有点迷失在这里。我没有要求任何人做魔术并给我一个我可以复制和粘贴的代码，但如果有人能指导我完成这个，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:58:16.210

`List`首先，使用 a比使用数组更好。特别是对于字符串集合，它们更容易使用。有了这个，你不能单独命名你的行是正确的，因为你不知道会有多少行。这就是为什么您需要创建一个行列表并遍历它们，例如...

```
Public Sub Readfile()
    TextBox1.Text = System.IO.File.ReadAllText("libro1.csv")
    Dim lines As List(of String)
    Dim allResults As New List(of List(of String))

    lines = Split(TextBox1.Text, vbCrLf)

    For Each line In lines
        Dim result As List(Of String) = line.Split(CChar(";"))
        allResults.Add(result)
    Next
End Sub 
```

这将允许您基本上说，“对于文件中的每一行，将每个分号分隔的部分放入一个名为‘result’的列表中。然后将‘result’放入另一个名为‘allResults’的结果列表中。 "

看哪！循环的力量！

# indexing - 如何有效地对 cassandra 中的两列进行范围查询？

> ID：12808836
> 
> 赞同：2
> 
> 时间：2012-10-09T21:40:55.443
> 
> 标签：indexing, cassandra, range

我想将数百万个位置保存到 Cassandra 的 ColumnFamily 中，而不是对这些数据进行范围查询。

例如：

属性：LocationName, latitude, longitude 查询：SELECT LocationName FROM ColumnFamily WHERE latitute> 10 AND latitude<20 AND longitude>30 AND longitude<40;

我应该使用什么结构和索引以便查询高效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:27:58.273

Let's pretend you are going to grow into the billions(and I will do the millions case later below). If you were using something like PlayOrm on cassandra(or you can do this yourself instead of using PlayOrm), you would need to partition by something. Let's say you choose to partition by longitude so that anything between >= 20 and < 30 is in partition 20 and between >= 30 and < 40 is in partition 30\. Then in PlayOrm, you use it's scalable SQL to just write the same query you wrote but you need to query the proper partitions which in some cases would be multiple partitions unless you limit your result set size...

In PlayOrm, or in your data model, it would look like (no other tables needed)

```
Location {
  key: [locationID] {
    LonBottom: [partitionKey]
    Lat: [exact_lat] <- @NoSqlIndexed
    Lon: [exact_lon] <- @NoSqlIndexed
    ...
  }
  ...
} 
```

That said, if you are in the millions, you would not need partitions so just remove the LonBottom column above and do no partitioning....of course, why use noSQL as millions is not that big and an RDBMS can easily handle millions.

If you want to do it yourself, in the millions case, there are two rows for Lat and Lon(wide row pattern) that hold the indexed values of lat and long to query. For billinos case, it would be two rows per partition as each partition gets it's own index as you don't want indices that are too large.

An indexing row is simple for you to create. It is simply rowkey="index name" and each column name is a compound name of longitude and row key to location. There is NO value for each column, just a compound name (so that each col name is unique).

so your row might look like

```
longindex = 32.rowkey1, 32.rowkey45, 32.rowkey56, 33.rowkey87, 33.rowkey89 
```

where 32 and 33 are longitudes and the rowkeys are pointing to the locations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:35:54.273

根据您在查询中所需的粒度（以及该粒度的可变性），处理此问题的一种方法是将您的地图分割成一个网格，其中您的所有位置都属于具有定义的纬度/经度边界的网格正方形内盒子。然后，您可以对网格正方形 ID 进行初始查询，然后是这些正方形内的位置，其表示形式如下：

```
GridSquareLat {
  key: [very_coarse_lat_value] {
    [square_lat_boundary]:[GridSquareIDList]
    [square_lat_boundary]:[GridSquareIDList]
  }
  ...
}

GridSquareLon {
  key: [very_coarse_lon_value] {
    [square_lon_boundary]:[GridSquareIDList]
    [square_lon_boundary]:[GridSquareIDList]
  }
  ...
}

Location {
  key: [locationID] {
    GridSquareID: [GridSquareID]  <-- put a secondary index on this col
    Lat: [exact_lat]
    Lon: [exact_lon]
    ...
  }
  ...
} 
```

然后，您可以为 Cassandra 提供表示非常粗粒度纬度/经度值的 GridSquareLat/Lon 键，以及将返回的列减少到仅在您的边界内的那些正方形的列切片范围。您将获得两个列表，一个用于 lat 的网格正方形 ID，一个用于 lon。这些列表的交集将是您范围内的网格方块。

要获取这些方格中的位置，请查询位置 CF，对 GridSquareID 进行过滤（使用二级索引，只要您的方格总数合理，这将是有效的）。您现在拥有一个大小合理的位置列表，其中只有几个非常有效的查询，您可以轻松地将它们减少到应用程序中的确切列表。

# javascript - 通过 JavaScript 重命名 URL

> ID：12808837
> 
> 赞同：0
> 
> 时间：2012-10-09T21:41:00.717
> 
> 标签：javascript, html, css

我正在根据本**[教程](http://tympanus.net/codrops/2012/04/02/responsive-horizontal-layout/)**开发一个网站， 并希望将 URL 重命名`/?chapter=#`为它们各自的导航名称，例如 /work、/about、/services 等。

**索引.php：**

```
<aside id="menu">
    <div id="scroll">
        <nav>
            <ul>
                <li><a href="#introduction">Work</a></li>
                <li><a href="#chapter1">About</a></li>
                <li><a href="#chapter2">Services</a></li>
                <li>Blog <!-- Coming Soon... --> </li>
                <li><a href="#chapter4">Contact</a></li>
            </ul>
        </nav>
    </div> <!-- #scroll -->    
</aside> <!-- #menu -->

...

...

<div class="content-scroller">
    <div class="content-wrapper">
        <article class="content" id="introduction">
            <div class="inner">  
...
...
        <article class="content" id="chapter1">
            <div class="inner">  
...
... 
```

**jquery.page.js：**

```
(function(window, undefined) {

    var Page    = (function() {

        var $container          = $( '#container' ),
            // the scroll container that wraps the articles
            $scroller           = $container.find( 'div.content-scroller' ),
            $menu               = $container.find( 'aside' ),
            // menu links
            $links              = $menu.find( 'a' ),
            $articles           = $container.find( 'div.content-wrapper > article' ),
            // button to scroll to the top of the chapter
            // only shown when screen size < 960
            $toTop              = $container.find( 'a.totop-link' ),
            // the browser nhistory object
            History             = window.History,
            // animation options
            animation           = { speed : 800, easing : 'easeInOutExpo' },
            // jScrollPane options
            scrollOptions       = { verticalGutter : 0, hideFocus : true },
            // init function
            init                = function() {

                // initialize the jScrollPane on both the menu and articles
                _initCustomScroll();
                // initialize some events
                _initEvents();
                // sets some css properties 
                _layout();
                // jumps to the respective chapter
                // according to the url
                _goto();

            },
            _initCustomScroll   = function() {

                // Only add custom scroll to articles if screen size > 960.
                // If not the articles will be expanded
                if( $(window).width() > 960 ) {

                    $articles.jScrollPane( scrollOptions );

                }
                // add custom scroll to menu
                $menu.children( '#scroll' ).jScrollPane( scrollOptions );

            },
            _goto               = function( chapter ) {

                    // get the url from history state (e.g. chapter=3) and extract the chapter number
                var chapter     = chapter || History.getState().url.queryStringToJSON().chapter,
                    isHome      = ( chapter === undefined ),
                    // we will jump to the introduction chapter if theres no chapter
                    $article    = $( chapter ? '#' + 'chapter' + chapter : '#' + 'introduction' );

                if( $article.length ) {

                        // left / top of the element
                    var left        = $article.position().left,
                        top         = $article.position().top,
                        // check if we are scrolling down or left
                        // is_v will be true when the screen size < 960
                        is_v        = ( $(document).height() - $(window).height() > 0 ),
                        // animation parameters:
                        // if vertically scrolling then the body will animate the scrollTop,
                        // otherwise the scroller (div.content-scroller) will animate the scrollLeft
                        param       = ( is_v ) ? { scrollTop : (isHome) ? top : top + $menu.outerHeight( true ) } : { scrollLeft : left },
                        $elScroller = ( is_v ) ? $( 'html, body' ) : $scroller;

                    $elScroller.stop().animate( param, animation.speed, animation.easing, function() {

                        // active class for selected chapter
                        $articles.removeClass( 'content-active' );
                        $article.addClass( 'content-active' );

                    } );

                }

            },
            _saveState          = function( chapter ) {

                // adds a new state to the history object
                // this will trigger the statechange on the window
                if( History.getState().url.queryStringToJSON().chapter !== chapter ) {

                    History.pushState( null, null, '?chapter=' + chapter );

                }

            },
            _layout             = function() {

                // control the overflow property of the scroller (div.content-scroller)
                var windowWidth = $(window).width();
                switch( true ) {

                    case ( windowWidth <= 960 ) : $scroller.scrollLeft( 0 ).css( 'overflow', 'visible' ); break;
                    case ( windowWidth <= 1024 ): $scroller.css( 'overflow-x', 'scroll' ); break;
                    case ( windowWidth > 1024 ) : $scroller.css( 'overflow', 'hidden' ); break;

                };

            },
            _initEvents         = function() {

                _initWindowEvents();
                _initMenuEvents();
                _initArticleEvents();

            },
            _initWindowEvents   = function() {

                $(window).on({
                    // when resizing the window we need to reinitialize or destroy the jScrollPanes
                    // depending on the screen size
                    'smartresize' : function( event ) {

                        _layout();

                        $('article.content').each( function() {

                            var $article    = $(this),
                                aJSP        = $article.data( 'jsp' );

                            if( $(window).width() > 960 ) {

                                ( aJSP === undefined ) ? $article.jScrollPane( scrollOptions ) : aJSP.reinitialise();

                                _initArticleEvents();

                            }   
                            else {

                                // destroy article's custom scroll if screen size <= 960px
                                if( aJSP !== undefined )
                                    aJSP.destroy();

                                $container.off( 'click', 'article.content' );

                            }

                        });

                        var nJSP = $menu.children( '#scroll' ).data( 'jsp' );
                        nJSP.reinitialise();

                        // jumps to the current chapter
                        _goto();

                    },
                    // triggered when the history state changes - jumps to the respective chapter
                    'statechange' : function( event ) {

                        _goto();

                    }
                });

            },
            _initMenuEvents     = function() {

                // when we click a menu link we check which chapter the link refers to,
                // and we save the state on the history obj.
                // the statechange of the window is then triggered and the page/scroller scrolls to the 
                // respective chapter's position
                $links.on( 'click', function( event ) {

                    var href        = $(this).attr('href'),
                        chapter     = ( href.search(/chapter/) !== -1 ) ? href.substring(8) : 0;

                    _saveState( chapter );

                    return false;

                });

                // scrolls to the top of the page.
                // this button will only be visible for screen size < 960
                $toTop.on( 'click', function( event ) {

                    $( 'html, body' ).stop().animate( { scrollTop : 0 }, animation.speed, animation.easing );

                    return false;

                });

            },
            _initArticleEvents  = function() {

                // when we click on an article we check which chapter the article refers to,
                // and we save the state on the history obj.
                // the statechange of the window is then triggered and the page/scroller scrolls to the 
                // respective chapter's position
                $container.on( 'click', 'article.content', function( event ) {

                    var id          = $(this).attr('id'),
                        chapter     = ( id.search(/chapter/) !== -1 ) ? id.substring(7) : 0;

                    _saveState( chapter );

            //      return false;

                });

            };

        return { init : init }; 

    })();

    Page.init();

})(window); 
```

我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:52:24.193

好吧，这一行就是写你的历史状态的内容：

```
 History.pushState(null, null, '?chapter=' + chapter); 
```

所以你需要修改那个函数来做你想做的事。如果您有一个小型站点，那么您可以设置条件以轻松地将状态交换为您想要的任何内容。如果您有一个大型动态站点，除非您喜欢可怕、繁琐的维护，否则您不想这样做……

```
_saveState = function(chapter) {

    // adds a new state to the history object
    // this will trigger the statechange on the window
    if (History.getState().url.queryStringToJSON().chapter !== chapter) {
        var page;
        if(chapter == 1)
            page = "/about";
        else if(chapter == 2)
            page = "/services";
        else
            page = '?chapter=' + chapter;

        History.pushState(null, null, page);

    }
}, 
```

不过，我可能错过了您的问题的重点。如果是这样，我可以更新这个答案

# php - 检索 XML 字符串中元素的内容

> ID：12808839
> 
> 赞同：-2
> 
> 时间：2012-10-09T21:41:03.210
> 
> 标签：php, xml, xml-parsing, domdocument

我只是想将一个元素 xml 字符串加载到 DOMDocument 对象，然后检索内容，但我不能......这就是我正在尝试的：

```
$xml = '<element_1>foobar</element_1>';

$dd = new DOMDocument();
$dd->loadXml($xml);

var_dump($dd->getElementsByTagName('element_1')); //this prints object(DOMNodeList)#2 (0) {
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:58:44.117

你的失踪`item(int)`和`nodeValue`那个项目

```
$xml = '<element_1>foobar</element_1>';

$dd = new DOMDocument();
$dd->loadXml($xml);

var_dump($dd->getElementsByTagName('element_1')->item(0)->nodeValue);
//string 'foobar' (length=6) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:55:43.573

您是否尝试过使用**simplexml_load_string()**？

例子：

```
<?php

$xml = <<<XML
<?xml version='1.0'?>
<element_1>
foobar
</element_1>
XML;

$data = simplexml_load_string($xml);

echo $data; 
```

参考： http: [//php.net/manual/en/function.simplexml-load-string.php](http://php.net/manual/en/function.simplexml-load-string.php)

# sql - 用 sum( ) 表连接两个表

> ID：12808840
> 
> 赞同：1
> 
> 时间：2012-10-09T21:41:04.007
> 
> 标签：sql, database

我目前有一个查询，显示我团队中的人员，以及他们当前的角色（从另一个表中查找）：

```
SELECT firstName + ' ' + lastName as Name,
       RTS_ROLE.roleDescription as `Current Role`, 
FROM RTS_STAFF, RTS_ROLE
WHERE RTS_STAFF.staffRole = RTS_ROLE.roleID 
AND staffDeleted <> true
ORDER BY roleID; 
```

另一个查询列出了每个人每周的工作时间：

```
SELECT RTS_STAFF.staffId, Sum(IIf(Isnull(Monday),0,Monday)
+IIf(Isnull(Tuesday),0,Tuesday)
+IIf(Isnull(Wednesday),0,Wednesday)
+IIf(Isnull(Thursday),0,Thursday)
+IIf(Isnull(Friday),0,Friday)) AS `Weekly Hours`
FROM WORKING_HOURS, RTS_STAFF
WHERE RTS_STAFF.staffId = WORKING_HOURS.staffID 
AND Date() > WORKING_HOURS.EffectiveFrom 
GROUP BY RTS_STAFF.staffId; 
```

我已经尝试（不成功）通过将第二个查询作为子查询放在第一个查询中来加入这些查询，但无济于事：我得到“您编写了一个子查询，该子查询可以在不使用 EXIST 关键字的情况下返回多个字段主要查询...”

我正在尝试获取一个查询，该查询将显示来自同一查询的员工姓名、角色名称和“当前”总工作时间。有人可以给我一个线索如何实现这一点，或者我做错了什么（无疑是一件令人尴尬的简单事情）。

如果有帮助，很高兴提供更多信息。

```
Table structure:
RTS_ROLE: (lookup table)
(pk)RoleID: number
roleDescription: string

RTS_STAFF
(pk)staffId: number
firstName: string
lastName: string
staffRole: number (fk to RTS_ROLE.roleID)
staffDeleted: boolean

WORKING_HOURS:
(pk)workingWeekID: number
staffID: number (fk to RTS_STAFF.staffId)
Monday: number
Tuesday: number
...
Friday:number
EffectiveFrom: date 
```

我们正在使用（不要笑）MS Access 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:07:44.410

我无权访问 MsAccess，但我在 MySQL 中准备了一些东西（您的 IIF 类似于 MySQL 的 IF）：

```
SELECT staff.staffid,
       staff.firstname + ' ' + staff.lastname AS Name,
       role.roledescription                   AS `Current Role`,
       Sum(IF(Isnull(monday), 0, monday)
           + IF(Isnull(tuesday), 0, tuesday)
           + IF(Isnull(wednesday), 0, wednesday)
           + IF(Isnull(thursday), 0, thursday)
           + IF(Isnull(friday), 0, friday))   AS `Weekly Hours`
FROM   working_hours,
       rts_staff staff,
       rts_role role
WHERE  staff.staffrole = role.roleid
       AND staff.staffdeleted <> true
       AND staff.staffid = working_hours.staffid
       AND Now() > working_hours.effectivefrom
GROUP  BY staff.staffid,
          staff.firstname + ' ' + staff.lastname,
          role.roledescription 
```

基于这个结构：

```
CREATE TABLE `rts_staff` (
  `staffid` int(11) NOT NULL,
  `staffrole` int(11) DEFAULT NULL,
  `firstname` varchar(45) DEFAULT NULL,
  `lastname` varchar(45) DEFAULT NULL,
  `staffdeleted` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`staffid`)
) ENGINE=InnoDB

CREATE TABLE `rts_role` (
  `roleid` int(11) NOT NULL,
  `roledescription` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`roleid`)
) ENGINE=InnoDB

CREATE TABLE `working_hours` (
  `staffid` int(11) NOT NULL,
  `effectivefrom` date DEFAULT NULL,
  `monday` int(11) DEFAULT NULL,
  `tuesday` int(11) DEFAULT NULL,
  `wednesday` int(11) DEFAULT NULL,
  `thursday` int(11) DEFAULT NULL,
  `friday` int(11) DEFAULT NULL,
  PRIMARY KEY (`staffid`)
) ENGINE=InnoDB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:53:26.633

尝试这样的事情：

```
SELECT firstName + ' ' + lastName as Name,
   RTS_ROLE.roleDescription as `Current Role`, x.weeklyhours
   FROM RTS_STAFF s INNER JOIN
   RTS_ROLE r ON s.staffRole = r.roleID INNER JOIN
   (
     SELECT RTS_STAFF.staffId, Sum(IIf(Isnull(Monday),0,Monday)
     +IIf(Isnull(Tuesday),0,Tuesday)
     +IIf(Isnull(Wednesday),0,Wednesday)
     +IIf(Isnull(Thursday),0,Thursday)
     +IIf(Isnull(Friday),0,Friday)) AS weeklyhours
     FROM WORKING_HOURS, RTS_STAFF
     WHERE RTS_STAFF.staffId = WORKING_HOURS.staffID 
     AND Date() > WORKING_HOURS.EffectiveFrom 
     GROUP BY RTS_STAFF.staffId
   ) x ON x.staffID = s.staffID
WHERE  s.staffDeleted <> true
ORDER BY r.roleID; 
```

# python - PYTZ 'America/Edmonton' 偏移错误

> ID：12808845
> 
> 赞同：6
> 
> 时间：2012-10-09T21:41:23.310
> 
> 标签：python, timezone, pytz

> **可能重复：**
> [pytz 的奇怪时区问题](https://stackoverflow.com/questions/11473721/weird-timezone-issue-with-pytz)

这似乎是错误的：

```
>>> import pytz
>>> z1 = timezone('America/Edmonton')
>>> z2 = timezone('US/Mountain')
>>> z1
<DstTzInfo 'America/Edmonton' LMT-1 day, 16:26:00 STD>
>>> z2
<DstTzInfo 'US/Mountain' MST-1 day, 17:00:00 STD>
>>> pytz.VERSION
'2012f'
>>> 
```

'America/Edmonton' 和 'US/Eastern' 应该是同一时区 (17:00:00 STD)。更不用说 16:26:00 没有任何意义。

- 更新 -

以上在 Jon Skeet 的回答中是有意义的。但是，当我这样做时，事情变得很奇怪：

```
>>> d = datetime.now()
>>> d
datetime.datetime(2012, 10, 9, 15, 21, 41, 644706) 
```

我创造了一个天真的约会。由于“美国/埃德蒙顿”*是*我的时区，我尝试手动设置：

```
>>> d2 = d.replace(tzinfo=timezone('America/Edmonton'))
>>> d2
datetime.datetime(2012, 10, 9, 15, 21, 41, 644706, tzinfo=<DstTzInfo 'America/Edmonton' LMT-1 day, 16:26:00 STD>) 
```

这不应该改变任何东西，因为那是正确的 TZ。然而：

```
>>> d2.astimezone(timezone('US/Eastern'))
datetime.datetime(2012, 10, 9, 18, 55, 41, 644706, tzinfo=<DstTzInfo 'US/Eastern' EDT-1 day, 20:00:00 DST>) 
```

这应该给我 2 小时的偏移量（'US/Eastern' 和 'America/Edmonton' 之间的差异）但它给了我 3 小时 26 分钟（即 2 小时*加*1 小时 26 分钟：D）

插入`timezone('US/Mountain')`会产生正确的结果`astimezone()`。使用“美国/埃德蒙顿”创建感知日期时间也将正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T22:50:51.847

[pytz](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)的文档明确指出，直接从时区创建日期时间并非在所有情况下都有效，而是指示您执行以下操作：

```
d2 = timezone('America/Edmonton').localize(d) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T21:48:00.653

查看 2012c TZDB 数据，这里是美国/埃德蒙顿的规则集：

```
Zone America/Edmonton    -7:33:52 -       LMT   1906 Sep
                         -7:00    Edm     M%sT  1987
                         -7:00    Canada  M%sT 
```

我不清楚 Python 输出试图向您显示偏移量/名称的日期/时间，但我*怀疑*它类似于 1900 - 在这种情况下，16:26:00 对 -7 的偏移量有意义： 33:52，它也将与缩写匹配。

所以时区数据没问题是完全可行的，它只是选择显示一个奇怪的日期/时间作为例子。（老实说，时区的字符串输出根本不会显示时间，这对我来说毫无意义......）

# sql - Sybase 中的错误处理

> ID：12808846
> 
> 赞同：4
> 
> 时间：2012-10-09T21:41:27.890
> 
> 标签：sql, try-catch, sybase

有没有办法处理 中的错误`SYBASE`，例如`TRY-CATCH`可以在 、 等中使用`MS SQL Server`的块`Oracle`？

我在网上搜索过，我发现的唯一选项是 global variable `@@error`，但它没有按我的预期工作，例如，以下代码：

```
begin tran

update table1
set name = 'new name'
where name = 'old name'

update table2
set id = 1 
where id = 30
-- suppose id has a unique constraint and there's already a row with id = 1

IF @@error = 0
begin
    print 'commited'
    commit
end
else
begin
    print 'rolled back'
    rollback
end 
```

确实会以某种方式回滚，因为我在 table1 上更改的名称保留了我在这里测试过的旧值，但它不会打印消息，也不会执行我在导致错误的指令之后放置的任何指令

任何人都可以帮助我吗？您知道 Sybase 错误处理实际上是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:44:45.130

**第一种解决方案。**

您无法在 Sybase 上以这种方式捕获异常。在更新之前，您必须检查数据：

```
if not exists
(
  select 1 from table2
  where id = 1
)
begin
  update table2
  set id = 1 
  where id = 30
end
else
begin
  print 'rolled back'
  rollback
end 
```

**第二种解决方案。**

您还可以将更新命令放入过程中，然后您可以捕获异常。创建过程：

```
create procedure myproc
as
begin
  update table2
  set id = 1 
  where id = 30
end 
```

并按如下方式运行：

```
begin tran

update table1
set name = 'new name'
where name = 'old name'

exec myproc

IF @@error = 0
begin
    print 'commited'
    commit
end
else
begin
    print 'rolled back'
    rollback
end 
```

# ruby-on-rails - Nginx：配置 Nginix 以在生产中提供非预编译资产

> ID：12808848
> 
> 赞同：2
> 
> 时间：2012-10-09T21:41:39.357
> 
> 标签：ruby-on-rails, nginx, assets, unicorn

我有一个带有机车 cms 的 rails 应用程序。我希望能够通过我的 CMS 引用特定的 css/js 文件，并且能够使用 assets/subfolder/file.css 之类的 URL 进行开发。当我使用 nginx 和 unicorn 将我的应用程序部署到服务器时，这些 URL 不再有效，我的所有图像都停止加载。将以下内容添加到我的 nginx conf 文件后，图像开始加载，但 CSS/JS 文件仍然无法正常工作。

```
root /var/www/myproject/public/;
location ~ ^/assets/ {
  expires 1y;
  add_header Cache-Control public;

  add_header ETag "";
  break;
} 
```

我需要配置什么，以便 nginix 和 unicorn 可以从 app/assets/css 或 app/assets/javascript 目录提供资产？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:00:59.407

希望您不想预编译资产是有充分理由的，但这应该会有所帮助。

```
#{Rails.root}/config/environments/production.rb
config.serve_static_assets = true 
```

默认情况下，Rails 应用程序不会在`Rails.env == "production"`. 在开发/测试环境中，Rails 将处理对 assets/subfolder/file.css 的请求，并正确地从`#{Rails.root}/app/assets/subfolder/file.css`.

`rake assets:precompile`将生成的 css/js 文件放置在其中，这些文件将相对于您的 nginx 配置中`#{Rails.root}/public/assets`的位置正确解析。`root`

在`expires 1y;`您的 nginx 配置中，具有缓存副本的浏览器可能不会请求对引用的 css/js 文件进行任何更改。

# jquery - 如何获取触发 jQuery 自动完成小部件的输入元素？

> ID：12808854
> 
> 赞同：21
> 
> 时间：2012-10-09T21:42:14.460
> 
> 标签：jquery, jquery-autocomplete, jquery-widgets

我有几个使用 jQuery 自动完成功能增强的输入字段。触发select事件时如何获取对应的输入框？

```
<input name="1" value="">
<input name="2" value="">
<input name="3" value="">

$('input[type=text]').autocomplete({
    source: 'suggestions.php',
    select: function(event, ui) {
        // here I need the input element that have triggered the event
    }
}); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-10-23T07:38:20.663

我为`source`参数使用了一个匿名函数，并且`$(this)`在其中引用了函数，而不是触发它的元素。我不得不使用`$(this.element)`.

最终代码与此类似*（我出于演示目的对其进行了简化）*：

```
$( ".regionsAutocomplete" ).autocomplete({
    source: function(request, response){

        //The next line is the important one for this example
        var input = this.element;
        $(input).css('color','red');

        var data = {'foo':'bar'};
        $.ajax({
            'url': ajaxurl,
            'data': data,
            'method': "POST",
            'dataType': "json",
            'success': function(data) {
                response(data);
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-09T21:43:38.517

尝试使用`$(this)`

```
$('input[type=text]').autocomplete({
    source: 'suggestions.php',
    select: function(event, ui) {
        // here I need the input element that have triggered the event
        alert($(this).attr('name'));
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T21:46:03.297

您可以使用`$(this)`或`event.target`。

然后您可以使用`$(this).prop('name')`or获取名称`event.target.name`。

[**演示**](http://jsfiddle.net/Ycrdm/1)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-09T22:05:25.737

据我所知，您不需要`$()`. `this`会工作得很好，因为 name 是一个定义的属性。

`this.name`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-09T21:45:27.623

采用`$(this)`

```
 select: function(event, ui) {
        $(this).attr('name');
    } 
```

# java - findViewByID() 在自定义 View 类中不断返回 null

> ID：12808858
> 
> 赞同：3
> 
> 时间：2012-10-09T21:42:35.200
> 
> 标签：java, android, android-layout

在我的应用程序中，我想向用户展示一些`DialogFragment`包含`ListView`两个硬编码项目的 a。这些项目都是`View`我编写的自定义类的实例，称为`PictureMethodOptionItem`.

A`PictureMethodOptionItem`包含`TextView`旁边的`ImageView`。

*   `picture_method_list.xml`：

```
<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:stereovise="http://schemas.android.com/apk/res/de.app.stereovise"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <de.app.stereovise.PictureMethodOptionItem
        android:id="@+id/listItemGallery"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        stereovise:optionType="gallery" />

    <de.app.stereovise.PictureMethodOptionItem
        android:id="@+id/listItemCamera"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        stereovise:optionType="camera" />

</ListView> 
```

*   `picture_method_option.xml`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="7dp" >

    <ImageView
        android:id="@+id/method_option_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_centerInParent="true"
        android:layout_marginRight="10dp"
        android:src="@drawable/output"
        android:contentDescription="@string/methodOptionIcon" />

    <TextView
        android:id="@+id/method_option_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/method_option_icon"
        android:layout_alignTop="@id/method_option_icon"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

最后但同样重要的是我的自定义`View`类的 Java 代码：

`PictureMethodOptionItem.java`：

```
public class PictureMethodOptionItem extends View {

private Context context;

private ImageView methodIcon;
private TextView methodText;

public PictureMethodOptionItem(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;

    initialize();
    initFromAttributes(attrs);
}

public PictureMethodOptionItem(Context context) {
    super(context);
    this.context = context;

    initialize();
}

private void initialize() {
    LayoutInflater inflater = LayoutInflater.from(context);
    inflater.inflate(R.layout.picture_method_option, null, false);
    //View.inflate(context, R.layout.picture_method_option, null);

    methodIcon = (ImageView) findViewById(R.id.method_option_icon);
    methodText = (TextView) findViewById(R.id.method_option_text);
    // at this point methodIcon and methodText are still null!
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();

}

private void initFromAttributes(AttributeSet attrs) {
    String type = attrs.getAttributeValue(
        "http://schemas.android.com/apk/res/de.app.stereovise",
        "optionType"
    );

    if("0".equals(type)) {
        methodIcon.setImageResource(android.R.drawable.gallery_thumb);
        methodText.setText(R.string.methodGallery);
    } else {
        methodIcon.setImageResource(android.R.drawable.ic_menu_camera);
        methodText.setText(R.string.methodCamera);
    }
}

} 
```

`DialogFragment`膨胀的相关代码来自`PictureOptionsDialog.java`：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View contentView = inflater.inflate(R.layout.picture_method_list, null, false);

    AlertDialog.Builder builder = new AlertDialog.Builder(context);

    builder
        .setTitle(R.string.pictureChoiceTitle)
        .setCancelable(true)
        .setView(contentView);

    return builder.create();
} 
```

现在的问题是，如果我尝试使用`show()`此对话框，它会给我以下错误：

```
10-09 23:34:46.259: E/AndroidRuntime(14660): FATAL EXCEPTION: main
10-09 23:34:46.259: E/AndroidRuntime(14660): android.view.InflateException: Binary XML file line #8: Error inflating class de.app.stereovise.PictureMethodOptionItem
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.createView(LayoutInflater.java:513)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at de.app.stereovise.PictureOptionsDialog.onCreateDialog(PictureOptionsDialog.java:22)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.DialogFragment.getLayoutInflater(DialogFragment.java:295)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.os.Handler.handleCallback(Handler.java:587)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.os.Looper.loop(Looper.java:144)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.app.ActivityThread.main(ActivityThread.java:4937)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at java.lang.reflect.Method.invokeNative(Native Method)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at java.lang.reflect.Method.invoke(Method.java:521)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at dalvik.system.NativeStart.main(Native Method)
10-09 23:34:46.259: E/AndroidRuntime(14660): Caused by: java.lang.reflect.InvocationTargetException
10-09 23:34:46.259: E/AndroidRuntime(14660):    at de.app.stereovise.PictureMethodOptionItem.<init>(PictureMethodOptionItem.java:22)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at java.lang.reflect.Constructor.constructNative(Native Method)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
10-09 23:34:46.259: E/AndroidRuntime(14660):    at android.view.LayoutInflater.createView(LayoutInflater.java:500)
10-09 23:34:46.259: E/AndroidRuntime(14660):    ... 20 more
10-09 23:34:46.259: E/AndroidRuntime(14660): Caused by: java.lang.NullPointerException
10-09 23:34:46.259: E/AndroidRuntime(14660):    at de.app.stereovise.PictureMethodOptionItem.initFromAttributes(PictureMethodOptionItem.java:55)
10-09 23:34:46.259: E/AndroidRuntime(14660):    ... 24 more 
```

数小时的搜索只找到了我的代码中已经存在的解决方案（例如覆盖采用 a 的`View`构造函数`AttributeSet`）或不适用于我的案例 b/c 他们更多地指向活动及其`setContentView()`方法。

有没有人看到我犯的错误（可能是非常无聊的错误）并能告诉我为什么 LayoutInflater 很难为我的小 DialogFragment 充气？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T22:20:22.910

你调用这个方法：

```
inflater.inflate(R.layout.picture_method_option, null, false); 
```

而你忽略了结果。最后一个参数 false 表示*不*将 XML 布局的内容添加到布局根（无论如何设置为 null）。您需要执行以下操作：

```
View v = inflater.inflate(R.layout.picture_method_option, null, false);
addView(v); 
```

或者：

```
inflater.inflate(R.layout.picture_method_option, this, true); 
```

# iphone - 来自 UITableViw 的 reloadData 不起作用

> ID：12808861
> 
> 赞同：-1
> 
> 时间：2012-10-09T21:42:45.350
> 
> 标签：iphone, ios, uitableview, tableview

我正在开发一个应用内购买应用程序，在获得产品专业应用商店后，我试图将这些产品加载到 uitableview 中。问题是：当我获得产品列表时，我无法在表格中加载数据。当我使用静态值而不使用 reloadData 创建表时，一切正常。

除了加载桌子外，一切都运行良好

我的代码在哪里：

```
@synthesize products;
@synthesize productsTableView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    NSSet *productIndentifiers = [NSSet setWithObjects:@"Prod01",@"Prod02",@"Prod03",nil];
    productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIndentifiers];
    [productsRequest start];

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:TRUE];
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [self setProductsTableView:nil];
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - UITableViewDelegate

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return self.products.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   

    UITableViewCell *cell = nil;
    [self.productsTableView dequeueReusableCellWithIdentifier:@"Cell"];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
        SKProduct *product = [self.products objectAtIndex:indexPath.row];
        cell.textLabel.text = product.localizedTitle;

    }

    return cell;
}

#pragma mark - SKProductsRequestDelegate 

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSLog(@"%@", response.products);
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE];
    [self.productsTableView reloadData];

}

- (void)dealloc {
    [productsTableView release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:47:28.383

您错过了将 SKProductsRequest 的结果添加到 self.products

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSLog(@"%@", response.products);
self.product = assign data here
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE];
    [self.productsTableView reloadData];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:48:25.807

如果您的数据不在本地，但在某些服务器上，您应该使用这个 imo。

> [tableView 开始更新];
> [tableView insertRowsAtIndexPaths: *arrayOfIndexPaths* withRowAnimation: *rowAnimation* ];
> [tableView endUpdate];

另外，我想指出您的单元重用标识符是错误的在一种情况下您有“Cell”，在另一种情况下您有“MyCell”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:48:39.613

有几个问题。NeverBe 和 SP 已经注意到了一些。这是另一个主要的。

一个问题是在 cellForRowAtIndexPath 中：

您只是在新的单元格中设置数据。表格视图回收单元格，因此有些会跳过您的 if 语句。这些将无法正确设置。将您的单元设置移到 if 语句之外。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {   

        UITableViewCell *cell = nil;
        [self.productsTableView dequeueReusableCellWithIdentifier:@"Cell"];
        if(cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

        }

        SKProduct *product = [self.products objectAtIndex:indexPath.row];
        cell.textLabel.text = product.localizedTitle;

        return cell;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:53:40.267

我看到的唯一有点奇怪的是您的 tableView:cellForRowAtIndexPath: 例程引用了 self.productsTableView。但是您已经*在*一个 tableView 中——为什么您的 tableView 包含对*另一个*tableView 的引用？这很奇怪。

同样，您是否检查过 self.products 实际上包含在 tableView:cellForRowAtIndexPath: 和 tableView:numberOfRowsInSection: 中引用的产品？我不知道，因为您没有显示任何显示该 ivar 设置位置的代码。抛出一个 NSLog() 语句或放置一个断点，并确保它确实包含你认为它所做的事情。

# c# - 详细信息查看下拉列表

> ID：12808865
> 
> 赞同：1
> 
> 时间：2012-10-09T21:43:02.853
> 
> 标签：c#, asp.net

我是 ASP.NET 的新手，目前在 DetailsView 中的下拉列表有问题。

异常错误：System.InvalidOperationException：Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

我有这段代码，我的代码在后面刷新 DetailsView 中下拉列表的列表

```
protected void ddlVendor_SelectedIndexChanged 
               (object sender, EventArgs e) 
{ 
    DropDownList ddlVendorBB = 
        (DropDownList)DetailsView1.FindControl("VendorBUName"); 

    if (ddlVendorBB != null) 
    { 
        Response.Write("SelectChanged"); 
        ddlVendorBB.DataBind(); 
    } 
} 

protected void SqlDataSourceProd_Selecting 
    (object sender, SqlDataSourceSelectingEventArgs e) 
{ 
    DropDownList ddlVendor = 
        (DropDownList)DetailsView1.FindControl("VendorName"); 

    if (ddlVendor != null) 
    { 
        e.Command.Parameters["@VendorID"].Value = ddlVendor.SelectedValue; 
    } 
} 
```

DetailsView 中的这两个下拉列表

```
<EditItemTemplate> 
    <asp:DropDownList id="VendorName"
        datasourceid="VendorSqlDataSource"
        AutoPostBack="true"
        datatextfield="VendorName"
        DataValueField="VendorID"   
        SelectedValue='<%# Bind("VendorID") %>'  
        runat="server"
        OnSelectedIndexChanged="ddlCategory_SelectedIndexChanged" />

    <asp:SqlDataSource ID="VendorSqlDataSource"
        ConnectionString="<%$Connectionstrings:ConnectionString%>" 
        SelectCommand="SELECT VendorID, VendorName from MDF_Vendor"
        runat="server"> 
    </asp:SqlDataSource> 
</EditItemTemplate> 

<EditItemTemplate>
    <asp:DropDownList id="VendorBUName"
        datasourceid="VendorBUSqlDataSource" 
        datatextfield="VendorBUName"
        DataValueField="VendorBUID"   
        SelectedValue='<%# Bind("VendorBUID") %>'  
        runat="server"/>

    <asp:SqlDataSource ID="VendorBUSqlDataSource"
        runat="server"
        ConnectionString="<%$Connectionstrings:ConnectionString%>"
        selectcommand="SELECT VendorBUID, VendorBUName
                       from MDF_VendorBU
                       Where VendorID = @VendorID"
        OnSelecting="SqlDataSourceProd_Selecting"> 
        <SelectParameters> 
            <asp:Parameter Name="VendorID" Type="Int32" /> 
        </SelectParameters> 
    </asp:SqlDataSource> 
</EditItemTemplate> 
```

问题是：

如果我将 SelectedValue= 留在那里，则编辑模式下的下拉列表会在我第一次单击编辑时在列出的项目中选择正确的值，但是当我选择新的供应商名称时，它会出错“数据绑定方法，例如 Eval()、Xpath() 和绑定（）...“。

现在，如果我删除了下拉列表的 Selectedvalued，它将在选择新的 VendorName 时刷新 VendorBUName，但在单击“编辑”时不会选择默认的 VendorID。它只是列出了 VendorName 列表，而没有选择当前的 VendorID 之一。

有人可以让我知道我的代码有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:10:30.800

正如错误所述，您不能在尝试使用它的地方使用 Bind。您应该可以使用[DataBinder](http://msdn.microsoft.com/en-us/library/4hx47hfe.aspx)

```
SelectedValue='<%# DataBinder.Eval (Container.DataItem, "VendorBUID") %>' 
```

* * *

**编辑：**由于使用 DataBinder 将值绑定到 SelectedValue 不起作用，您可以尝试在绑定数据时设置该值。提供的 dataSource 是具有名为的属性的类的某个实例`VendorBUID`，类似于此的东西可能适用于

```
public override void OnLoad(EventArgs e) {
    VendorBUName.DataBinding += dataBindDropDown;
}

private void dataBindDropDown(object sender, EventArgs e) {
    VendorBUName.SelectedValue = dataSource.VendorBUID;
} 
```

# google-app-engine - 为 App Engine 分页存储光标

> ID：12808866
> 
> 赞同：1
> 
> 时间：2012-10-09T21:43:03.990
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试使用 App Engine 的 RPC 和 GWT（它是一个应用引擎连接的项目）来实现分页。

如何将查询结果和 Web 安全游标对象从 RPC 传递给 GWT 客户端？

我见过使用 servlet 的示例，但我想知道如何在没有servelt 的情况下做到这一点。

我考虑过使用 memcache 将光标缓存在服务器上，但我不确定这是否合适或应该使用什么作为键（我假设会话标识符，但我不确定 App Engine 上如何处理这些） .

示例项目的链接会很棒，我一直找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:41:01.177

好的，所以最好的方法是将光标作为字符串存储在客户端上。

为此，您必须创建一个可传输的包装类，以便您可以通过 RequestFactory 将其传递回客户端，该客户端可以保存结果列表和光标字符串。为此，您创建一个普通的 POJO，然后为其创建一个代理。

POJO 的代码如下所示：

```
public class OrganizationResultsWrapper {

    public List<Organization> list;
    public String webSafeCursorString;

    public List<Organization> getList() {
        return list;
    }

    public void setList(List<Organization> list) {
        this.list = list;
    }

    public String getWebSafeCursorString() {
        return this.webSafeCursorString;
    }

    public void setWebSafeCursorString(String webSafeCursorString) {
        this.webSafeCursorString = webSafeCursorString;
    }
} 
```

对于代理：

```
@ProxyFor(OrganizationResultsWrapper.class)
public interface OrganizationResultsWrapperProxy extends ValueProxy{

    List<OrganizationProxy> getList();
    void setList(List<OrganizationProxy> list);

    String getWebSafeCursorString();
    void setWebSafeCursorString(String webSafeCursorString);

} 
```

设置你的服务和 requestFactory 分别使用 POJO 和代理

```
// service class method
@ServiceMethod
public OrganizationResultsWrapper getOrganizations(String webSafeCursorString) {
    return dao.getOrganizations(webSafeCursorString);
}

// request factory method
Request<OrganizationResultsWrapperProxy> getOrganizations(String webSafeCursorString); 
```

然后确保并运行 RPC 向导，以便您的验证过程运行，否则您将在服务器上收到请求上下文错误。

这是我的数据访问类中的实现：

```
public OrganizationResultsWrapper getOrganizations(String webSafeCursorString) {
    List<Organization> list = new ArrayList<Organization>();
    OrganizationResultsWrapper resultsWrapper = new OrganizationResultsWrapper();

    Query<Organization> query = ofy().load().type(Organization.class).limit(50);

    if (webSafeCursorString != null) {
        query = query.startAt(Cursor.fromWebSafeString(webSafeCursorString));
    }

    QueryResultIterator<Organization> iterator = query.iterator();
    while (iterator.hasNext()) {
        list.add(iterator.next());
    }

    resultsWrapper.setList(list);
    resultsWrapper.setWebSafeCursorString(iterator.getCursor().toWebSafeString());

    return resultsWrapper;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:37:49.610

正如您已经提到的，第二种选择是将 webSafeCursorString 保存在内存缓存中。

我的想法是这样的：

1.  客户端总是发送这样的请求“getMyObjects(Object...myParams, int maxResults, String clientPaginationString)”。clientPaginationString 是唯一创建的，如下所示

2.  如果密钥 clientPaginationString 存在 webSafeCursorString，服务器接收请求并查看内存缓存

    1.  如果服务器什么也没找到，他会创建查询并将 webSafeCursorString 保存到 memcache 中，并将 clientPaginationString 作为键。-> 返回结果

    2.  如果服务器找到 webSafeCursorString 他用它重新启动查询并返回结果

问题是如何清理内存缓存以及如何找到唯一的 clientPaginationString：

唯一的 clientPaginationString 应该是当前的 UserId + 当前查询的参数 + timestemp。这应该工作得很好！

我真的想不出一个简单的方法来清理内存缓存，但是我认为我们根本不需要清理它。我们可以将所有 webSafeCursorStrings 和 timestemps+params+userid 存储在包含地图的 WebSafeCursor-Class 中，并将所有这些存储在 memcache 中......并在一段时间内清理这个 Class（时间戳旧......）。

我能想到的一项改进是使用在服务器上创建的密钥（userSessionId + servicename + servicemethodname + params）将 webSafeCursorString 保存在内存缓存中。但是，重要的是，如果客户端对新查询感兴趣（memcache 被覆盖）或想要下一个分页结果（从 memcache 获取 webSafeCursorString），则客户端发送信息。重新加载页面应该可以工作。我认为在浏览器中再次点击会是一个问题......

你打算说什么？

# c# - 将对象从 Drop Down 转换为 Nullable 类型

> ID：12808867
> 
> 赞同：0
> 
> 时间：2012-10-09T21:43:07.093
> 
> 标签：c#, asp.net

我的 aspx 中有以下下拉菜单：

```
<aspx:DropDownList
ID="ddl1"
runat="server"/> 
```

在代码隐藏 (C#) 中，我想从 DropDownList 中检索值。

我这样填充了我的下拉列表：

```
ddl1.DataSource = LocationOfData;
ddl1.DataBind(); 
```

LocationOfData 返回 CustomType 类型。编辑：CustomType 是一个枚举。

我希望能够完成以下任务：

```
CustomType? myvar = ddl1.Text 
```

换句话说，使用我的 CustomType 创建一个可为空的变量并将其设置为等于下拉列表中的变量。但是我只能从 ddl1 中检索文本（字符串）的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:54:15.113

如果`CustomType`是 Enum，您首先必须将您`ddl1.Text`的 Enum 解析为 Enum，然后将其转换为 Nullable 类型：

```
CustomType? myvar = (CustomType?) Enum.Parse(typeof(CustomType), ddl1.Text, true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:56:13.723

如果`CustomType`是一个`enum`，而不是绑定枚举的名称，我会在您绑定到枚举的值时设置下拉列表的`byte`值。然后，当您尝试投射到 时`CustomType`，您可以这样做：

```
CustomType myvar = (CustomType)byte.Parse(ddl1.Text); 
```

首先进行检查以创建可为空的类型。我不知道你的标准是什么，但是：

```
CustomType? myvar;
if(/*Criteria*/)
{
    myvar = (CustomType)byte.Parse(ddl1.Text);
}
else
{
    myvar = null;
} 
```

# spring-batch - 如何在 Spring Batch 作业之间传递数据

> ID：12808870
> 
> 赞同：2
> 
> 时间：2012-10-09T21:43:22.633
> 
> 标签：spring-batch

我熟悉如何在 Spring Batch 作业的步骤之间传递数据。但是，当您的工作由许多较小的工作组成时会发生什么？在下面的示例中，我想在第一个作业 siNotificationJob 结束时在 JobExecutionContext 中设置一些数据。然后，可以在下一个作业 ciNotificationJob 中从 StepExecutionContext 的 JobExecutionContext 读取该数据。我需要以某种方式推广这些数据吗？我似乎无法在用于配置作业参数的步骤“ciNotificationJob”中定义的作业参数提取器中看到结果。

想法？

安德鲁

```
 <job id="notificationJob" xmlns="http://www.springframework.org/schema/batch">

    <batch:step id="pn_step_0" next="pn-step-1">
        <batch:job ref="siNotificationJob" job-launcher="jobLauncher" 
            job-parameters-extractor="jobParamsExtractor"/>
    </batch:step>       
    <batch:step id="pn-step-1" next="pn-step-2">
        <batch:job ref="ciNotificationJob" job-launcher="jobLauncher" 
            job-parameters-extractor="jobParamsExtractor"/>
    </batch:step>           
</job> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T19:00:25.390

我能够解决这个问题。我将通过示例向您展示我是如何解决它的。这很复杂，但我认为最终结果相当容易理解。

我有一项名为“notificationJob”的整体工作。它有三个步骤，调用 3 个不同的作业（不是步骤）。这些作业中的每一个都可以独立运行，也可以从顶级“notificationJob”中调用。此外，每个子作业都有许多步骤。我不会在这里展示所有这些步骤，而只是想强调这些都是完整的工作本身，还有更多的步骤。

```
 <job id="notificationJob" xmlns="http://www.springframework.org/schema/batch">
    <batch:listeners>
        <batch:listener ref="pn_job-parent-listener" />
    </batch:listeners>
    <batch:step id="pn_step-0" next="pn-step-1">
        <batch:job ref="siNotificationJob" job-launcher="jobLauncher" 
            job-parameters-extractor="futureSiParamsExtractor"/>
    </batch:step>
    <batch:step id="pn-step-1" next="pn-step-2">
        <batch:job ref="ciNotificationJob" job-launcher="jobLauncher" 
            job-parameters-extractor="futureCiParamsExtractor"/>
    </batch:step>
    <batch:step id="pn-step-2">
        <batch:job ref="combineResultsJob" job-launcher="jobLauncher" 
            job-parameters-extractor="jobParamsExtractor"/>
    </batch:step>           
</job> 
```

关键是能够从一个工作中提取结果并在下一个工作中读取它们。现在，您可以通过多种方式做到这一点。一种方法是将一个作业的结果输出到数据库或文本文件中，然后从该文件/表中读取下一个作业。因为我没有处理那么多数据，所以我在内存中传递信息。因此，您会注意到作业参数提取器。您可以依赖参数提取器的内置实现，也可以实现自己的。我实际上两者都用。他们所做的只是从 StepExecution 中提取值，然后我们需要将它们提升/移动到下一个子作业。

```
 <bean id="jobParamsExtractor" class="org.springframework.batch.core.step.job.DefaultJobParametersExtractor">
    <property name="keys">
        <list>
            <value>OUTPUT</value>
        </list>
    </property>
</bean>

<bean id="futureSiParamsExtractor" class="jobs.SlideDatesParamExtractor">
    <property name="mode" value="FORWARD" />
    <property name="addedParams">
        <map><entry>
                <key><value>outputName</value></key>
                <value>FUTURE_SI_JOB_RESULTS</value>
            </entry></map>
    </property>
</bean> 

<bean id="futureCiParamsExtractor" class="jobs.SlideDatesParamExtractor">
    <property name="mode" value="FORWARD" />
    <property name="addedParams">
        <map><entry>
                <key><value>outputName</value></key>
                <value>FUTURE_CI_JOB_RESULTS</value>
            </entry></map>
    </property>
</bean> 
```

最后，您会注意到有一个父作业侦听器。这是将状态从一项工作转移并使其可用于下一项工作的魔法。这是我对执行此操作的类的实现。

```
 <bean id="pn_job-state-listener" class="jobs.JobStateListener">
    <property name="parentJobListener" ref="pn_job-parent-listener" />
</bean> 

<bean id="pn_job-parent-listener" class="cjobs.ParentJobListener">
</bean>

package jobs.permnotification;

import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobExecutionListener;

public class ParentJobListener implements JobExecutionListener
{

    private JobExecution parentExecution;

    @Override
    public void beforeJob(JobExecution jobExecution)
    {
        this.parentExecution = jobExecution;
    }

    @Override
    public void afterJob(JobExecution jobExecution)
    {
        // TODO Auto-generated method stub

    }

    public void setParentExecution(JobExecution parentExecution)
    {
        this.parentExecution = parentExecution;
    }

    public JobExecution getParentExecution()
    {
    return parentExecution;
    }

}

package jobs.permnotification;

import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.JobExecutionListener;

public class JobStateListener implements JobExecutionListener
{
    private ParentJobListener parentJobListener;

    @Override
    public void beforeJob(JobExecution jobExecution)
    {
        if(parentJobListener == null || parentJobListener.getParentExecution() == null) return;
        passStateFromParentToJob(StepKey.FUTURE_SI_JOB_RESULTS.toString(), jobExecution);
        passStateFromParentToJob(StepKey.FUTURE_CI_JOB_RESULTS.toString(), jobExecution);
        passStateFromParentToJob(StepKey.OUTPUT.toString(), jobExecution);
    }

    @Override
    public void afterJob(JobExecution jobExecution)
    {
        if(parentJobListener == null || parentJobListener.getParentExecution() == null) return;
        //take state from child step and move it into the parent execution context
        passStateFromJobToParent(StepKey.FUTURE_SI_JOB_RESULTS.toString(), jobExecution);
        passStateFromJobToParent(StepKey.FUTURE_CI_JOB_RESULTS.toString(), jobExecution);
        passStateFromJobToParent(StepKey.OUTPUT.toString(), jobExecution);
    }

    private void passStateFromJobToParent(String key, JobExecution jobExecution)
    {
        Object obj = jobExecution.getExecutionContext().get(key);
        if(obj != null)
            parentJobListener.getParentExecution().getExecutionContext().put(key, obj);
    }

    private void passStateFromParentToJob(String key, JobExecution jobExecution)
    {
        Object obj = parentJobListener.getParentExecution().getExecutionContext().get(key);
        if(obj != null)
            jobExecution.getExecutionContext().put(key, obj);
    }

    public void setParentJobListener(ParentJobListener parentJobListener)
    {
        this.parentJobListener = parentJobListener;
    }

    public ParentJobListener getParentJobListener()
    {
        return parentJobListener;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:53:48.283

这有点像黑客......建议您改用弹簧集成......但看看这是否适用于您的情况。

如果您设置了 spring 批处理元数据表，如果您查询表以获取最新的作业运行，您可能可以获得在每个作业中生成的数据。您在作业执行上下文中的所有数据都被存储并且可以被查询。

[春季批处理元表](http://static.springsource.org/spring-batch/reference/html-single/index.html#metaDataSchema)

# rest - SoapUI TestCase - 如何为第二步提取原始响应字符串

> ID：12808871
> 
> 赞同：0
> 
> 时间：2012-10-09T21:43:27.123
> 
> 标签：rest, soap, soapui, testcase

我使用 SoapUI 做了一个简单的测试：

1.  调用 REST 服务 (POST)，它会返回类似“key:value”的内容
2.  使用以下元素之一调用 Web 服务 (SOAP) = 步骤 1 中的值

我只是搜索 SmartBear 论坛和 SoapUI 文档，但没有找到如何提取响应，如果它是 XML，它将类似于 ${myFirstStep#Response/rootelement/element}。但是 REST 响应不是 XML（那么我猜 xpath 函数不适用于我的情况）。

如果可能的话，我更喜欢没有脚本的解决方案。是否有关于这些变量解析的 SOAPUI 文档？我没有在[SoapUI 网站上找到它](http://www.soapui.org)

编辑：如果有人知道如何制作，Groovy 脚本解决方案将是完美的。我检查了soapui 站点上的Groovy 文档，但没有找到我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:50:08.240

如果您的休息响应是 JSON 格式，您可以将其更改为 XML 格式。如果您不想将其更改为 xml 格式，您可以在专业版中使用属性传输步骤，您将在属性框中看到选择 ReponseAsXml 的选项来源。然后你可以编写你的普通 Xpath 来传输该属性。它非常简单。

或者甚至通过在 Pro 版本中右键单击您的节点，您可以直接在测试用例中的任何位置传输该节点。但是它的 pro 功能。在 soapui 免费版本中执行此操作的最佳方法会以 Xml 格式更改您的响应。

# command-line - 使用 VLC 保存 RTSP 流

> ID：12808872
> 
> 赞同：0
> 
> 时间：2012-10-09T21:43:33.723
> 
> 标签：command-line, command-line-interface, rtsp, vlc

我正在尝试使用 VLC 保存 RTSP 流的 5 秒 .mov 片段。首先，我尝试了 openRTSP 和 ffmpeg，但它们都给出了不正确的输出（索引丢失等）。我已经阅读了很多 VLC cli，但没有任何运气将 RTSP 流保存为段。

如果我使用 VLC GUI，我可以将片段保存为保存快照 (PNG)，但我需要通过 CLI 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:39:48.910

mov 文件不可流式传输。[他们说索引文件丢失是对的]。我什至不知道你是如何通过 rtsp 发送它们的，我不知道 mov/mp4 格式的 rtp 有效载荷。

# python - 用 scrapy 抓取论坛

> ID：12808877
> 
> 赞同：1
> 
> 时间：2012-10-09T21:44:05.097
> 
> 标签：python, web-scraping, scrapy

我试图用scrapy废弃一些论坛并将数据存储在数据库中。但是在更新数据库时，我不知道如何有效地做到这一点。这是我的蜘蛛的样子：

```
class ForumSpider(CrawlSpider):
name = "forum"
allowed_domains= ["forums.example.com"]
start_urls = ["forums.example.com/index.php"]
rules = (
       Rule(SgmlLinkExtractor(allow=(r'/forum?id=\d+',)), 
        follow=True,   callback='parse_index'),
    )

def parse_index(self, response):
    hxs = HtmlXPathSelector(response)
    #parsing....looking for threads.....
    #pass the data to pipeline and store in to the db.... 
```

我的问题是当我再次废弃同一个论坛时，比如一周后，没有必要浏览所有页面，因为新线程或任何带有新帖子的线程都会在其他非活动线程之上。我的想法是检查论坛的第一页（forums.example.com/forum?id=1），如果它在第一页找到具有相同 URL 和相同数量回复的线程。没有必要转到第二页。所以蜘蛛应该去另一个论坛（forums.example.com/forum?id=2）。我尝试修改 start_urls 和规则，但是一旦蜘蛛运行，它们似乎没有响应。有没有办法在scrapy中做到这一点？

我的第二个问题是如何为不同的蜘蛛使用不同的管道。我在堆栈溢出时发现了一些东西。但似乎scrapy 不是为此而构建的，您似乎想为不同的站点创建一个新项目。

我是否使用了错误的工具来执行此操作？或者我错过了一些东西。我想过使用 mechanize 和 lxml 来做到这一点。但是我需要实现扭曲和 unicode 处理等等，这让我想坚持使用scrapy

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:08:15.057

您要求的是即时创建一个 http 请求。

在 parse_index 函数内部执行此操作。
`request = self.make_requests_from_url(http://forums.example.com/forum?id=2)
return request`

如果要提交多个 http 请求，则返回一个数组。[在 scrapy 中](http://doc.scrapy.org/en/0.14/topics/request-response.html#scrapy.http.Request)
查看此请求

第二件事你是对的，如果你想从不同的网站提取不同类型的数据，你应该编写不同的蜘蛛。

# forms - 之内 不完全工作，只有最后一个 被处理

> ID：12808878
> 
> 赞同：3
> 
> 时间：2012-10-09T21:44:05.497
> 
> 标签：forms, jsf-2, uirepeat

我想在同一页面中编辑项目列表。每个项目都应使用单独的表格进行编辑。我在 ui:repeat 中创建 ah:form。只有在提交最后一个表单时，用户输入才会应用于托管 bean。对于所有其他形式，用户输入不会应用于模型。

```
@ManagedBean
public class Controller {
    Logger logger = Logger.getLogger("TestWeb");
    private List<Customer> customerList;

    public List<Customer> getCustomerList() {
        if (customerList == null) {
            customerList = new ArrayList<Customer>();
            customerList.add(new Customer("Daffy Duck", "daffy@example.com"));                          
            customerList.add(new Customer("Bugs Bunny", "bugs@example.com"));       
            customerList.add(new Customer("Samity Sam", "sam@example.com"));
        }
        return customerList;
    }
    public String updateCustomer(Customer c) {
        logger.info("Updating: " + c.getName());
        return null;
    }
} 
```

在视图中，我有

```
<ui:repeat var="c" value="#{controller.customerList}">
<h:form>
  <h3>Edit Customer</h3>
  Name: <h:inputText value="#{c.name}"/><br/>
  E-mail: <h:inputText value="#{c.email}"/><br/>
  <h:commandButton value="Update"
    action="#{controller.updateCustomer(c)}"/>
</h:form>
</ui:repeat> 
```

我搜索了几个小时而没有任何解决方案。这样做的正确方法是什么？我可以通过使用单个表单并在其中使用 ui:repeat 来破解它。但这有很多问题，我宁愿不走那条路。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T17:04:18.663

这是`<ui:repeat>`Mojarra 中状态保存的一个错误。[在http://java.net/jira/browse/JAVASERVERFACES](http://java.net/jira/browse/JAVASERVERFACES)有几个类似的问题报告，其中包括[问题 2243](http://java.net/jira/browse/JAVASERVERFACES-2243)。

您基本上有 2 个选项：使用另一个迭代组件（例如`<c:forEach>`, `<h:dataTable>`, `<t:dataList>`,`<p:dataList>`等），或用 MyFaces 替换 Mojarra（`<ui:repeat>`此构造中的 在那里正常工作）。

# c# - IEnumerable 如何在没有提供程序的情况下用于 SQL？

> ID：12808879
> 
> 赞同：0
> 
> 时间：2012-10-09T21:44:16.360
> 
> 标签：c#, ienumerable

IEnumerable 如何在没有提供程序的情况下用于 SQL？我认为只有 IQueryable 可以用于 LINQ to SQL。

对不起我的疏忽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:46:06.123

LINQ to SQL 和实体框架都需要底层数据库提供程序。

但是，您必须记住，LINQ 不是特定于数据库的技术。最简单的形式是 LINQ to Objects，它允许您在 .NET 中迭代简单的集合。

# shell - 复制文件：名称包含空格

> ID：12808884
> 
> 赞同：0
> 
> 时间：2012-10-09T21:44:40.217
> 
> 标签：shell, unix, copy, solaris

我有一个大型 shell 脚本来处理我的每个 Solaris 系统的文件。

脚本开始时会创建一个变量 FILENAME 有时人们会创建包含空格的目录/文件。例如

```
/users/ldap/Anukriti's System Backup/BACKUP/workspace/BP8/scripts/yui/editor/simpleeditor.js 
```

稍后在我运行的脚本中

```
cp $FILENAME $DESTDIR/ 
```

正如您可以想象的那样，这总是失败，因为以下内容无效。

```
cp /users/ldap/Anukriti's System Backup/BACKUP/workspace/BP8/scripts/yui/editor/simpleeditor.js $DESTDIR 
```

我尝试将变量放在引号中，但这不起作用。我以前使用 find 和 -exec 选项，但在这种情况下，这并不是一个真正的选项，特别是因为 Solaris 不支持 -wholename 或 -path 选项

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T21:45:46.453

你只需要用引号保护变量：

```
cp "$FILENAME" "$DESTDIR" 
```

**笔记**

不要使用单引号`'`，变量不能这样展开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:50:04.953

看起来我需要使用花括号进行变量扩展和双引号

```
cp "${FILENAME}" $DESTDIR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:05:06.687

确保

*   `$DESTDIR`存在
*   是一个目录
*   是的，对两个变量都使用双引号并去掉尾随的`/`.

你可能不相信，但那是你的问题。:-)

# lucene - Neo4j python绑定：查询一组值的节点索引

> ID：12808886
> 
> 赞同：1
> 
> 时间：2012-10-09T21:44:41.243
> 
> 标签：lucene, neo4j, cypher, neo4j.py

我有一个 Neo4j 数据库`graphDb`，其中节点有一个属性`'label'`。我有一个`'my_nodes'`带有键“标签”的 Lucene 索引，它索引节点属性“标签”的值。现在我想从可能的值列表中检索属性“标签”等于一个值的节点`labellist`。为此，我使用以下方式编写了 Cypher 查询：

```
cypherQ =       """START n=node:my_nodes('""" 
                   +' OR '.join(['label:'+str(i) for i in labellist]) + """')
                   RETURN n"""
result = graphDb.query(cypherQ) 
```

这很好，但我想知道是否有办法编写参数化查询？

我试过类似的东西：

```
cypherQ =       """START n=node:my_nodes('label:{params}')
                   RETURN n"""
result = graphDb.query(cypherQ, params = labellist) 
```

但这肯定行不通，尽管如果 labellist 中有一个值它可以工作。Neo4j 教程并没有提供太多关于这个问题的材料。

我再次使用了 Neo4j 的 python 绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:29:24.253

该参数适用于索引的整个查询部分，所以这将是

```
cypherQ =       """START n=node:my_nodes({queryParam})
               RETURN n""" 
```

然后您在客户端代码中构建查询并将其作为一个参数传递给 Cypher。

# php - 从 DoExpressCheckoutPayment 回复中获取 transactionId

> ID：12808889
> 
> 赞同：0
> 
> 时间：2012-10-09T21:45:04.480
> 
> 标签：php, paypal, express-checkout

我无法从 doexpresscheckoutpayment 的回复中获取交易 ID 以及其他信息，我花了几个晚上的时间阅读，但我要么不明白发生了什么，要么我遇到了一些错误

这里有一些代码

```
 function ConfirmPayment( $FinalPaymentAmt )
{

    //Format the other parameters that were stored in the session from the previous calls   
    $token              = urlencode($_SESSION['TOKEN']);
    $paymentType        = urlencode($_SESSION['PaymentType']);
    $currencyCodeType   = urlencode($_SESSION['currencyCodeType']);
    $payerID            = urlencode($_SESSION['payer_id']);

    $serverName         = urlencode($_SERVER['SERVER_NAME']);

    $nvpstr  = '&TOKEN=' . $token . '&PAYERID=' . $payerID . '&PAYMENTREQUEST_0_PAYMENTACTION=' . $paymentType . '&PAYMENTREQUEST_0_AMT=' . $FinalPaymentAmt;
    $nvpstr .= '&PAYMENTREQUEST_0_CURRENCYCODE=' . $currencyCodeType . '&IPADDRESS=' . $serverName; 

     /* Make the call to PayPal to finalize payment
        If an error occured, show the resulting errors
        */
    $resArray=hash_call("DoExpressCheckoutPayment",$nvpstr);

    /* Display the API response back to the browser.
       If the response from PayPal was a success, display the response parameters'
       If the response was an error, display the errors received using APIError.php.
       */
    $ack = strtoupper($resArray["ACK"]);

    return $resArray;
} 
```

然后

```
$resArray = ConfirmPayment($finalPaymentAmount);
$ack = strtoupper($resArray["ACK"]);
if ($ack == "SUCCESS" || $ack == "SUCCESSWITHWARNING") {

    $transactionId = $resArray["TRANSACTIONID"]; // ' Unique transaction ID of the payment. Note:  If the PaymentAction of the request was Authorization or Order, this value is your AuthorizationID for use with the Authorization & Capture APIs.
    $transactionType = $resArray["TRANSACTIONTYPE"]; //' The type of transaction Possible values: l  cart l  express-checkout
    $paymentType = $resArray["PAYMENTTYPE"]; //' Indicates whether the payment is instant or delayed. Possible values: l  none l  echeck l  instant
    $orderTime = $resArray["ORDERTIME"]; //' Time/date stamp of payment 
```

等等等等

doexprescheoutpayment 工作，因为它确实完成了贝宝付款，它只是 $transactionID 和其他人总是空的，我想记录这些

有人能指出我正确的方向吗

谢谢克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:01:01.883

根据[PayPal 的`DoExpressCheckoutPayment`API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_DoExpressCheckoutPayment)操作文档：

> TRANSACTIONID 自 63.0 版起已弃用。请改用 PAYMENTINFO_n_TRANSACTIONID。

同样，`PAYMENTTYPE`不推荐使用`TRANSACTIONTYPE`、 和`ORDERTIME`。检查响应消息中更新的变量名称提供的链接。

# html - iPhone/iPad 视口问题

> ID：12808891
> 
> 赞同：0
> 
> 时间：2012-10-09T21:45:20.570
> 
> 标签：html, ios, css, media-queries, viewport

我最近一直在尝试进入响应式设计。到目前为止，我遇到的唯一问题是 iPad 和 iPhone 上的视口。

当我将 Initial-Scale 设置为 1 时，即使媒体查询设置为宽度 640 像素，iPhone（视网膜）上的页面大小似乎也会增加一倍。请注意，据我所知，媒体查询工作正常，一切都在调整。我可以通过在每次页面加载时双击缩小或将初始比例设置为 0.5 来解决双重缩放问题。将其设置为 0.5 的问题在于，当您在 iPad 上查看它时，它只有屏幕大小的一半。1.0 似乎适用于 iPad，但似乎在 iPad 上加倍（iPad 和 iPhone 有单独的媒体查询）。

*摘要*：iPhone 上的 Scale 1.0 使页面缩放翻倍，在 iPad 上很好。在 iPhone 上缩放 0.5 精细，在 iPad 上缩小一半。

有谁知道我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:06:26.300

有一个“像素比率”的媒体查询，以便您可以定位更高分辨率的设备：

```
@media
only screen and (-webkit-min-device-pixel-ratio: 1.5), 
only screen and (min--moz-device-pixel-ratio: 1.5),
only screen and (min-device-pixel-ratio: 1.5) {

} 
```

另外，您是否`width=device-width`在视口元标记中进行设置？

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# comments - 所有社交插件评论从文章中消失

> ID：12808896
> 
> 赞同：1
> 
> 时间：2012-10-09T21:45:34.903
> 
> 标签：comments, facebook-social-plugins, facebook-comments

我们已经通过在我们网站上实施的社交插件对每篇文章进行了一段时间的 Facebook 评论。有时，一篇文章会“转储”它的所有评论。它们仍然出现在应用程序审核后端，但它们都不允许“访问网站”。他们可能会被批准，但他们不再出现在文章页面上，但如果他们选择在他们的墙上发帖，他们仍然会出现在发布者的 Facebook 上。这似乎在“嘈杂”的文章中发生得最多，但我怀疑这是更多海报意味着更多人注意到消失的结果。文章随后将正常接受新评论，但所有旧评论似乎永久丢失。

显然，更改文章的规范 URL 会导致这种情况。但是，我们已经在我认为没有改变的文章上发生过这种情况。是否还有其他任何可能导致评论与我可能更正的文章脱节的内容？如果 URL（不是规范的！）更改，会发生这种情况吗？出于 SEO 的目的，我们在 URL 中有文章标题，但插件设置为没有标题的规范 URL，以避免在标题更新时中断。够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:09:42.773

您应该将文章的 URL 视为评论插件的唯一字符串标识符。定义的 URL 应该是唯一的（仅适用于一页）。URL 的格式无关紧要。然而，即使是 URL 中最轻微的变化也会破坏评论插件，因为现在字符串在技术上是不同的。我不确定还有什么可能导致您的问题。

在此处重新阅读有关评论插件的文档可能会有所帮助：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# r - 多数类的颜色直方图箱

> ID：12808901
> 
> 赞同：1
> 
> 时间：2012-10-09T21:46:11.157
> 
> 标签：r, histogram

我编写了一个有用的函数来按每个栏中的多数类对直方图条进行着色：

```
color_hist <- function(x, cats, ...){
  hist <- hist(x, plot=FALSE, ...)
  cuts <- cut(x, breaks=hist$breaks)

  color = apply(table(cuts, cats), 1, which.max)

  hist(x, col=color,...)
}

color_hist(iris[,4], iris[,5]) 
```

![颜色历史](../Images/82c3e6d84d4eed45e8cdd3a089358d2c.png)

我想复制`hist()`尽可能多的行为，但我不知道如何将标题和 x 标签从原始直方图传递给彩色直方图：

![hist2](../Images/9217178f93248c3d6a88dfebdc702307.png)

我希望新直方图与旧直方图具有相同的默认标题/xlabels，并且我还希望传递任何其他用户指定的参数。谁能帮我解决这个问题，或者以任何其他方式改进这个功能？

（如果我能让颜色相互融合，这也很酷，这取决于班级百分比......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T22:17:52.917

只需看一下代码`hist.default`，那里是如何处理的......

```
color_hist <- function(x, cats, xlab = xname, main = paste("Histogram of", xname), ...){
  xname <- paste(deparse(substitute(x), 500), collapse = "\n")
  hist <- hist(x, plot=FALSE, ...)
  cuts <- cut(x, breaks=hist$breaks)

  color = apply(table(cuts, cats), 1, which.max)

  hist(x, col=color, xlab = xlab, main = main, ...)
}

color_hist(iris[,4], iris[,5]) 
```

![在此处输入图像描述](../Images/1fdc1df2b18a80164670d0bc6cc8af7d.png)

# android - 我怎么知道我的应用程序正在关闭？

> ID：12808903
> 
> 赞同：0
> 
> 时间：2012-10-09T21:46:15.870
> 
> 标签：android

我想找到一种方法来确定我的应用程序是否被操作系统关闭/销毁（无论正确的术语是什么）。我`onCreate()`在 Android`Application`类中找到了一个方法，但没有找到`onDestroy()`，或者等效的方法。（[申请文件](http://developer.android.com/reference/Android/app/Application.html)）

虽然 Activity 生命周期通常就足够了，但我有一些资源需要时间来释放并且需要跨多个 Activity 使用。`onPause`在活动的任何结束生命周期调用（ 、`onStop`或`onDestroy`）上处理这些资源都是昂贵且不切实际的。

（澄清一下，我不想以编程方式关闭我的 Android 应用程序。我已经找到了大量的文档和 SO 问题。我对 Activity 生命周期也不感兴趣。）我不在乎控制我的应用程序何时关闭，但是当它要这样做时，我想提醒一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:11:17.370

> 我想找到一种方法来确定我的应用程序是否被操作系统关闭/销毁（无论正确的术语是什么）。

对不起，但这不会发生。正如 WebnetMobile.com 在他的评论中指出的那样，您的应用程序会因 Android 终止进程而被破坏，并且您不会被告知这一事实。

> 我有需要时间来释放的资源

由于您选择不解释这些“资源”是什么以及它们“需要时间来释放”的原因，因此任何人都很难帮助您制定替代计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:53:27.737

我建议拥有一个函数（我们称之为 killMyApp）和当前正在运行的活动的全局计数（actCount）。在每个 onCreate 中，增加 actCount。在每个 onDestroy 中，减少 actCount，然后，如果 actCount==0，调用 killMyApp，它将清理所有剩余的东西。

# java - 如何在 showMessageDialog 中打印双二维数组？

> ID：12808904
> 
> 赞同：1
> 
> 时间：2012-10-09T21:46:17.043
> 
> 标签：java, arrays, string, double, stringbuilder

我正在编写一个逆矩阵的程序，所以我将结果存储在

```
double matrix[][] = new double[n][2*n]; 
```

当我在 consol 中打印结果时，它会是正确的，但现在我尝试改进程序，我想在其中打印数组

```
JOptionPane.showMessageDialog 
```

所以我写

```
StringBuilder builder = new StringBuilder(n*n);
for (i = 0; i < n; i++){
    for(j = 0; j < n; j++){
        builder.append(matrix[i][j]);
        builder.append(",");
    }
    builder.append("\n");
}
JOptionPane.showMessageDialog(null, builder.toString(), "The inverse matrix is:", JOptionPane.INFORMATION_MESSAGE); 
```

现在问题输出应该是双倍的，例如这样

```
-0.14285714285714285    0.2857142857142857
0.4285714285714286  -0.35714285714285715 
```

但是每次使用任何输入矩阵时，我都会得到相同的结果

```
1.0,0.0,
-0.0,1.0, 
```

谢谢..对不起我的英语不好

* * *

好的，它解决了我将矩阵的大小保持为

```
double matrix[][] = new double[n][2*n]; 
```

并像 Reimeus 所说的那样通过一些修改来纠正循环

```
for (int j = n; j < n*2; j++) { 
```

谢谢大家..这是这个伟大网站的第一个问题，我很快得到了答案..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:54:05.300

我相信你的矩阵是 n*n。您需要更正这一行：

```
 double matrix[][] = new double[n][2*n]; 
```

至

```
 double matrix[][] = new double[n][n]; 
```

如果大小正确，请更正迭代。

对于格式化，请使用`DecimalFormat`如下格式化类：

```
 String fPattern = "0.00000000000000000"; //please supply the right format pattern
 DecimalFormat dFormat = new DecimalFormat(fPattern);
 StringBuilder builder = new StringBuilder(n*n);
 for (i = 0; i < n; i++){
    for(j = 0; j < n; j++){
      builder.append(dFormat.format(matrix[i][j]));
      builder.append(",");
    }
    builder.append("\n");
 } 
```

`0.00000000000000000`如果您总是希望有固定长度的小数，请使用作为模式。如果您想要不同的长度，请使用`#.#################`.

# java - SQL 语句定义，正确实现，仍然说它是 bean

> ID：12808907
> 
> 赞同：-3
> 
> 时间：2012-10-09T21:46:32.220
> 
> 标签：java, sql

我是新来的，但我需要一些帮助。

```
import java.sql.SQLException;
import java.sql.Statement;

public class testConnection {
    private ConfigurationManager  cmi;
    private Statement stmt ; 

    public testConnection() {
        cmi = new ConfigurationManager();
    }

    public void test() throws SQLException{
        cmi.openConnection();
        stmt = cmi.createStatement();
    }
} 
```

我知道这段代码还没有完成，但它给了我错误`"stmt = cmi.createStatement();"`。它说它找到了 bean，但我已经将它定义为 SQL 并导入了 SQL 语句，所以我真的不明白。我有另一个应用程序，我以同样的方式做了，但它在那里工作。

这是错误的文本（编译）：

```
**: incompatible types
found   : java.beans.Statement
required: java.sql.Statement
        stmt = cmi.createStatement();
1 error** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:52:42.103

问题可能出在您的 ConfigurationManager 中。因为它返回的是 a`java.beans.Statement`而不是`java.sql.Statement`对象。

# netbeans - 未能在 tomcat7 上运行检票口示例

> ID：12808909
> 
> 赞同：3
> 
> 时间：2012-10-09T21:47:03.783
> 
> 标签：netbeans, wicket, tomcat7

我下载了 wicket 示例 1.6.0 并在 netbeans7.2 中成功构建。但是当我尝试在 tomcat 7 上部署时出现错误：

无法部署模块。context.xml 文件似乎已损坏。检查它是否格式正确且有效。该模块尚未部署。有关详细信息，请参阅服务器日志。

> 在 org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:210) 在 org.netbeans.modules.maven.j2ee.ExecutionChecker.performDeploy(ExecutionChecker.java:178) 在 org.netbeans .modules.maven.j2ee.ExecutionChecker.executionResult(ExecutionChecker.java:130) 在 org.netbeans.modules.maven.execute.MavenCommandLineExecutor.run(MavenCommandLineExecutor.java:212) 在 org.netbeans.core.execution.RunClassThread.run (RunClassThread.java:153)

这是 context.xml 中的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
<!-- <Loader className="org.atmosphere.util.AtmosphereClassloader"/> -->
<Loader delegate="true"/>
</Context> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T13:42:15.837

我更喜欢在 eclipse 中运行 wicket，因为它不需要搞乱外部 tomcat 实例。

如果您对 eclipse 和 maven 感到满意，我会通过 maven 下载 wicket 1.6 示例原型，导入到 eclipse 中，然后在测试目录中运行 run.java 类来为您获取内部码头服务器主机 wicket。

这应该可以让您快速入门，而不必与 tomcat 配置搏斗。

不是真正的答案，而是通往同一终点的替代路线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T00:36:23.740

将参数路径添加到上下文标签，与应用程序相同的路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/application-path-name/">
<!-- <Loader className="org.atmosphere.util.AtmosphereClassloader"/> -->
<Loader delegate="true"/>
</Context> 
```

从[这个](https://stackoverflow.com/q/19454777/4178613)问题得到的答案。

# gnuplot - gnuplot 直接在单个图形旁边打印图例

> ID：12808910
> 
> 赞同：3
> 
> 时间：2012-10-09T21:47:08.810
> 
> 标签：gnuplot

我想将 3D 绘图投影到 2D 绘图中。假设 f(x,y) 描述了我的 3D 图，我想将 y 视为一个参数，并同时在一个 2D 图中绘制 f(x,0)、f(x,2)、f(x,4) 等. 我不想使用不同的线/点样式和颜色与角落的图例，我想使每个图都具有相同的样式并在每条线旁边放置一个标签。

这在 gnuplot 中是否可行，还是我必须依靠更复杂的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:41:19.030

[我最近有一个类似的问题。](https://stackoverflow.com/questions/12409068/titles-next-to-lines-in-gnuplot) 在 gnuplot (4.7.0) 的开发版本中有一个选项可以执行此操作。您可以将行标题的位置更改为行本身的结尾/开头。如果您的情节看起来像我想象的那样（有点像等高线图），这可能就是您想要的：

```
plot f(x,y) title 'f(x,y)' at end 
```

否则，您可能必须手动指定标签及其位置：

```
help set label 
```

了解更多信息。

# php - 管理面板中 Wordpress 帖子数组的奇怪问题

> ID：12808912
> 
> 赞同：3
> 
> 时间：2012-10-09T21:47:27.273
> 
> 标签：php, wordpress, custom-post-type, meta-boxes

对于我为客户构建的 Wordpress 网站上的 Post Array 问题，我感到非常困惑。我希望有人以前见过这个！

我已经注册了一个自定义帖子类型：

```
register_post_type( 'products', array(
    'labels' => array(
        'name' => __( 'Products' ),
        'singular_name' => __( 'Product' ),
    ),
    'public' => true,
    'menu_position' => 20,
    'supports' => array( 'title', 'editor', 'excerpt', 'thumbnail', 'comments', ),
    'taxonomies' => array('category'),
    'capability_type' => 'post',
    'rewrite' => array( 'slug' => 'products','with_front' => TRUE),
    'register_meta_box_cb' => 'product_page_meta_box'
)); 
```

我在其中注册了以下元框的回调：

```
function product_page_meta_box() {
    add_meta_box('product_meta_box_content', 'Product Specifications',  'product_meta_box_content', 'products');
}

function product_meta_box_content( $post ) {

    wp_nonce_field( plugin_basename( __FILE__ ), 'product_noonce' );

    echo '<div class="inside>';
        var_dump($post);
        echo '<p>Please detail the product specifics here:</p>';
    echo '</div>';
} 
```

我感到沮丧的是，上面管理页面上 var_dump 的结果是：

```
string(3) "258" ["post_author"]=> string(1) "1" ["post_date"]=> string(19) "2012-08-27 19:33:30" ["post_date_gmt"]=> string(19) "2012-08-27 19:33:30" ["post_content"]=> string(0) "" ["post_title"]=> string(10) "The Wensum" ["post_excerpt"]=> string(20) "Testing the excerpt!" ["post_status"]=> string(7) "publish" ["comment_status"]=> string(6) "closed" ["ping_status"]=> string(6) "closed" ["post_password"]=> string(0) "" ["post_name"]=> string(22) "large-6-perch-dovecote" ["to_ping"]=> string(0) "" ["pinged"]=> string(0) "" ["post_modified"]=> string(19) "2012-10-04 16:50:19" ["post_modified_gmt"]=> string(19) "2012-10-04 16:50:19" ["post_content_filtered"]=> string(0) "" ["post_parent"]=> string(1) "0" ["guid"]=> string(53) "http://dovecotes.local//?post_type=products&p=258" ["menu_order"]=> string(1) "0" ["post_type"]=> string(8) "products" ["post_mime_type"]=> string(0) "" ["comment_count"]=> string(1) "0" ["ancestors"]=> array(0) { } ["filter"]=> string(4) "edit" } 
```

在管理区它没有类型，完全无效；尽管帖子数组很好，但在相关页面上，ID 有一个键并且它是一个有效对象：

```
object(stdClass)#145 (25) { ["ID"]=> int(258) ["post_author"]=> string(1) "1" ["post_date"]=> string(19) "2012-08-27 19:33:30" ["post_date_gmt"]=> string(19) "2012-08-27 19:33:30" ["post_content"]=> string(0) "" ["post_title"]=> string(10) "The Wensum" ["post_excerpt"]=> string(20) "Testing the excerpt!" ["post_status"]=> string(7) "publish" ["comment_status"]=> string(6) "closed" ["ping_status"]=> string(6) "closed" ["post_password"]=> string(0) "" ["post_name"]=> string(22) "large-6-perch-dovecote" ["to_ping"]=> string(0) "" ["pinged"]=> string(0) "" ["post_modified"]=> string(19) "2012-10-04 16:50:19" ["post_modified_gmt"]=> string(19) "2012-10-04 16:50:19" ["post_content_filtered"]=> string(0) "" ["post_parent"]=> int(0) ["guid"]=> string(54) "http://dovecotes.local//?post_type=products&p=258" ["menu_order"]=> int(0) ["post_type"]=> string(8) "products" ["post_mime_type"]=> string(0) "" ["comment_count"]=> string(1) "0" ["ancestors"]=> array(0) { } ["filter"]=> string(3) "raw" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:39:19.413

我不能保证这会起作用，但在定义自定义帖子类型时，我总是避免使用 'register_meta_box_cb' 以支持 'add_meta_boxes' 动作挂钩。

除了“支持”参数中的额外逗号之外，您的代码看起来是正确的，因此您的示例中的任何内容都不会让我相信任何一个都可能是罪魁祸首，除非它是优先级差异。我也不确定在您的元框参数中是否允许 id 和回调参数相同，所以我也冒昧地更改了它：

```
register_post_type( 'products', array(
    'labels' => array(
        'name' => __( 'Products' ),
        'singular_name' => __( 'Product' ),
    ),
    'public' => true,
    'menu_position' => 20,
    'supports' => array( 'title', 'editor', 'excerpt', 'thumbnail', 'comments' ),
    'taxonomies' => array('category'),
    'capability_type' => 'post',
    'rewrite' => array( 'slug' => 'products','with_front' => TRUE)
));
add_action('add_meta_boxes', 'product_page_meta_box');
function product_page_meta_box() {
    add_meta_box('product_meta_box_content', 'Product Specifications',  'product_meta_box_content_cb', 'products');
}

function product_meta_box_content_cb( $post ) {

    wp_nonce_field( plugin_basename( __FILE__ ), 'product_noonce' );

    echo '<div class="inside>';
        var_dump($post);
        echo '<p>Please detail the product specifics here:</p>';
    echo '</div>';
} 
```

如果这没有帮助，那么如果没有看到更多代码，我不确定它还会是什么。

# ios - 获取“体系结构 i386 的未定义符号：”试图获取常量

> ID：12808915
> 
> 赞同：3
> 
> 时间：2012-10-09T21:47:45.167
> 
> 标签：ios

我知道有很多类似的问题，有点我没有找到我的案例：

我有：

```
#import <Foundation/Foundation.h>

@interface BSConstants : NSObject

extern NSString* const DB_COLUMN_NAME;
extern NSString* const DB_COLUMN_PRICE;
extern NSString* const DB_COLUMN_DESCRIPTION;
extern NSString* const DB_COLUMN_ICON;     
extern NSString* const DB_COLUMN_IMAGE; 

@end

#import "BSConstants.h"

@implementation BSConstants

NSString* const DB_COLUMN_NAME              = @"name";
NSString* const DB_COLUMN_PRICE             = @"price";
NSString* const DB_COLUMN_DESCRIPTION       = @"description";
NSString* const DB_COLUMN_ICON              = @"icon";
NSString* const DB_COLUMN_IMAGE             = @"image";

@end 
```

当我尝试构建我的项目时 - 我得到：

```
Undefined symbols for architecture i386:
  "_CONST_SHOPPING_CART_PURCHASE_MAX_SIZE", referenced from:
      -[BSShoppingCartViewController onBuyButtonPressed:] in BSShoppingCartViewController.o
  "_NAME_CREATED_FILE", referenced from:
      -[BSImageSaver saveImageAsPng:] in BSImageSaver.o
  "_NAME_DOWNLOADS_FOLDER", referenced from:
      -[BSImageSaver saveImageAsPng:] in BSImageSaver.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

**尝试访问：**

```
#import "BSConstants.h"

 ... DB_COLUMN_NAME 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-12T16:42:45.267

我发现了错误 - 我在 .h 和 .m 文件中有不同的常量名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:52:46.053

首先尝试改变这个

`extern NSString* const DB_COLUMN_NAME;`到`extern const NSString* DB_COLUMN_NAME;`

与

```
NSString* const DB_COLUMN_NAME              = @"name"; 
```

到

> const NSString* DB_COLUMN_NAME = @"name";

另请参阅如何访问这些。

# ruby - 我们可以在 ruby 中使用其他属性（例如检查变量的状态）扩展 attr_accessor 吗？

> ID：12808922
> 
> 赞同：1
> 
> 时间：2012-10-09T21:48:04.120
> 
> 标签：ruby

我们如何扩展 attr_accessor。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:10:03.083

对于检查实例变量， attr_reader 就足够了。您不需要 attr_accessor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:33:40.710

我认为为一个类扩展它的基本公式是这样的：

```
class SomeClass

   def self.attr_accessor(param)

    ...some code...

   end

end 
```

# asp.net - ASP.NET 可配置 Web 服务

> ID：12808924
> 
> 赞同：0
> 
> 时间：2012-10-09T21:48:16.643
> 
> 标签：asp.net, web-services

我在 ASP.NET 2.0 网站项目中有一个 Web 服务参考。我希望能够在服务的暂存版本和生产版本之间切换，而无需更改我的代码。

但是，我没有看到如何以干净的方式做到这一点。我知道我可以更改 web.config 以指向其他一些服务 URL，但是我的代码不是仍然硬编码到一个引用或另一个引用吗？

我看到了[这篇文章](https://stackoverflow.com/questions/2141237/making-a-web-service-reference-configuarble-asp-net)，但是您如何编辑代理类？如果我在类上“转到定义”，它不会带我到任何我可以编辑的类，但它是对象浏览器...我是否需要运行 wsdl.exe 实用程序以便它生成代理为我上课，然后我可以编辑？

**编辑#1：**这是我用来实例化和调用服务的代码：

```
Dim service As New Swan.MagellanLeadSheetService()
Dim response As Swan.MagellanLeadSheetResponse = service.Foo(stuffToSendToService) 
```

**编辑 #2：**由于 web.config 已经在 appSettings 区域中有 URL 端点地址，我可以在部署到生产时简单地编辑该设置以指向生产 URL 吗？就这么简单吗？我担心在 Staging 与 Production 的代理类之间可能会发生破坏性更改，但我认为应该在将任何更改部署到 Production 之前解决这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:39:06.280

以下文章介绍了如何通过更改引用属性、向 web.config 文件添加键并在应用程序代码中引用此键来使 Web 服务引用动态化：

[文章链接](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic)

基本上，您将拥有 2 个版本的 web.config 文件，生产和暂存，并定义了不同的 URL。而代码将指向一个唯一的位置。

**更新：**

现在，在下一行之前，您必须根据 web.config 中的内容更改 service.URL。

```
Dim response As Swan.MagellanLeadSheetResponse = service.Foo(stuffToSendToService) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T22:02:14.020

首先，这里是一些如何为您的项目添加 Web 引用的信息：

[如何：添加和删除 Web 引用](http://msdn.microsoft.com/en-us/library/d9w023sx%28v=vs.90%29.aspx)

然后，您的 Web 服务类（派生自 的代理类`SoapHttpClientProtocol`）的实例必须具有一个名为 url 的属性，您可以使用该属性在运行时从暂存或生产切换到您的 asmx。

```
CountryService service = new CountryService();
service.Url = "http://foo/bar.asmx"; 
```

更多信息：[WebClientProtocol.Url 属性](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.webclientprotocol.url.aspx)

# wordpress - WordPress 奇怪的永久链接

> ID：12808925
> 
> 赞同：0
> 
> 时间：2012-10-09T21:48:20.097
> 
> 标签：wordpress, permalinks

也许有人知道为什么 wordpress 会生成这样的链接：portfolio/all/ **#.UHSbFy5mJIk** 我把永久链接的奇怪地方加粗

我的 wordpress 核心没有变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:05:06.947

我将假设您启用了一个共享插件，该插件将额外的内容附加到您的 URL。这是跟踪数据，让您知道您的链接是如何共享的。

# asp.net - 如何将页面标题绑定到数据源

> ID：12808931
> 
> 赞同：1
> 
> 时间：2012-10-09T21:48:42.423
> 
> 标签：asp.net, vb.net, webforms

我需要将标题绑定到数据源，以便网页标题显示取决于数据源中的数据。

当我使用 Formview 和 hiddenfield 从数据源获取数据时，代码无法编译

如何根据数据源中的数据创建一个可以显示页面标题的脚本？

```
<Script runat = "server">
 Protected sub Page_load(Byval sender as Object, Byval e As System.eventargs)
     Title = Hiddenfield1.value
 End sub
</Script>

<asp:FormView ID="FormView2" runat="server" DataSourceID="SqlDataSource1">

<ItemTemplate>

<asp:HiddenField ID="HiddenField1" runat="server" Value= '<%#eval ("PageTitleConstruct") %>' />

</ItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:53:08.443

尝试这个

```
 Sub FormView2_ItemCreated(ByVal sender As Object, ByVal e As EventArgs)

    Dim HiddenField1 As HiddenField = CType(FormView2.FindControl("HiddenField1"), HiddenField)

    Page.Title = HiddenField1.Value;

  End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:30:29.790

我已经尝试过脚本，但是在使用

```
FormView2_ItemCreated(ByVal sender As Object, ByVal e As EventArgs)
    Dim HiddenField1 As HiddenField = CType(FormView2.FindControl("HiddenField1"), HiddenField)

    Page.Title = HiddenField1.Value;

End Sub 
```

page.title 值只有什么

但如果我将事件更改为

```
Private Sub FormView2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles FormView2.Load
        Dim hiddenfield1 As HiddenField = CType(FormView2.FindControl("hiddenfield1"), HiddenField)     
        Page.Title = hiddenfield1.Value
  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:40:28.277

您应该能够侦听该[`ItemCreated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.itemcreated.aspx)事件，并在该回调中设置标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:53:23.603

在 Page_Load 函数中。不过，您必须比您更早地获得价值。

```
 Page.Title = value here. 
```

# web-services - 什么是 P99 延迟？

> ID：12808934
> 
> 赞同：233
> 
> 时间：2012-10-09T21:49:07.120
> 
> 标签：web-services, networking, web-applications, p99

P99 延迟代表什么？我在有关应用程序性能的讨论中不断听到此消息，但在网上找不到可以讨论此问题的资源。

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-10-09T21:54:03.117

这是[第 99 个百分位](http://en.wikipedia.org/wiki/Percentile)。这意味着 99% 的请求应该比给定的延迟更快。换句话说，只有 1% 的请求被允许变慢。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2016-06-24T18:55:59.763

我们可以通过一个类比来解释，如果 100 名学生参加比赛，那么 99 名学生应该在“延迟”时间内完成比赛。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2019-10-30T15:14:34.867

假设您正在收集服务的性能数据，下表是结果的集合（延迟值是虚构的，以说明这个想法）。

```
Latency    Number of requests
1s         5
2s         5
3s         10
4s         40
5s         20
6s         15
7s         4
8s         1 
```

您的服务的 P99 延迟为 7 秒。只有 1% 的请求需要比这更长的时间。因此，如果您可以减少服务的 P99 延迟，就可以提高其性能。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2019-11-07T14:47:04.200

让我们从[这里举个例子](https://github.com/artilleryio/artillery/issues/91)

```
Request latency:
    min: 0.1
    max: 7.2
    median: 0.2
    p95: 0.5
    p99: 1.3 
```

所以我们可以说，99% 的 Web 请求，发现的平均延迟为 1.3 毫秒（毫秒/微秒取决于您配置的系统延迟测量）。就像@tranmq 告诉我们的那样，如果我们减少服务的 P99 延迟，我们可以提高它的性能。

还值得注意的是 p95，因为可能很少的请求使 p99 比 p95 更昂贵，例如）构建缓存、类对象预热、线程初始化等的初始请求。所以 p95 可能会减少最差的 5%案例场景。仍然在这 5% 之外，我们不知道实际噪声情况与最坏情况输入的百分位数。

[最后;](https://www.quora.com/What-is-p99-latency) 我们的测量中可能有大约 1% 的噪声（如网络拥塞、中断、服务降级），因此 p99 延迟几乎可以很好地代表最坏的情况。而且，几乎总是，我们的目标是减少 p99 延迟。

# asp.net - 如何使用 MVC 4 和视图模型（强类型）呈现一组复选框

> ID：12808936
> 
> 赞同：18
> 
> 时间：2012-10-09T21:49:16.167
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4

我对 ASP.net MVC 世界还很陌生，我试图弄清楚如何呈现一组强类型为视图模型的复选框。在网络表单中，我只会使用复选框列表控件，但我对 MVC 有点迷失。

我正在为婚礼策划业务构建一个简单的联系表格，并且需要将用户选择的任何复选框值传递给我的控制器。

表单复选框需要如下所示： ![在此处输入图像描述](../Images/87f759bf583f877abc3dada0bbfcf328.png)

您的帮助将不胜感激。谢谢！

这是我到目前为止所拥有的。

控制器

```
[HttpPost]
public ActionResult Contact(ContactViewModel ContactVM)
{
    if (!ModelState.IsValid)
    {
        return View(ContactVM);
    }
    else
    {
        //Send email logic

        return RedirectToAction("ContactConfirm");
    }
} 
```

查看模型

```
public class ContactViewModel
{
    [Required]
    public string Name { get; set; }

    [Required]
    public string Phone { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [Required]
    public string Subject { get; set; }
    public IEnumerable<SelectListItem> SubjectValues
    {
        get
        {
            return new[]
            {
                new SelectListItem { Value = "General Inquiry", Text = "General Inquiry" },
                new SelectListItem { Value = "Full Wedding Package", Text = "Full Wedding Package" },
                new SelectListItem { Value = "Day of Wedding", Text = "Day of Wedding" },
                new SelectListItem { Value = "Hourly Consultation", Text = "Hourly Consultation" }  
            };
        }
    }

    //Not sure what I should do for checkboxes...

} 
```

看法

```
@model NBP.ViewModels.ContactViewModel

@{
    ViewBag.Title = "Contact";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm())
{
    <div id="ContactContainer">
        <div><span class="RequiredField">*&nbsp;</span>Your Name:</div>
        <div>
            @Html.TextBoxFor(model => model.Name)
        </div>
        <div><span class="RequiredField">*&nbsp;</span>Your Phone:</div>
        <div>
            @Html.TextBoxFor(model => model.Phone)
        </div>
        <div><span class="RequiredField">*&nbsp;</span>Your Email:</div>
        <div>
            @Html.TextBoxFor(model => model.Email)
        </div>
        <div>Subject:</div>
        <div> 
            @Html.DropDownListFor(model => model.Subject, Model.SubjectValues)
        </div>
        <div>Vendor Assistance:</div>
        <div>

            <!-- CHECKBOXES HERE -->

        </div>
        <div>
            <input id="btnSubmit" type="submit" value="Submit" />
        </div>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T07:25:48.283

您可以丰富您的视图模型：

```
public class VendorAssistanceViewModel
{
    public string Name { get; set; }
    public bool Checked { get; set; }
}

public class ContactViewModel
{
    public ContactViewModel()
    {
        VendorAssistances = new[]
        {
            new VendorAssistanceViewModel { Name = "DJ/BAND" },
            new VendorAssistanceViewModel { Name = "Officiant" },
            new VendorAssistanceViewModel { Name = "Florist" },
            new VendorAssistanceViewModel { Name = "Photographer" },
            new VendorAssistanceViewModel { Name = "Videographer" },
            new VendorAssistanceViewModel { Name = "Transportation" },
        }.ToList();
    }

    [Required]
    public string Name { get; set; }

    [Required]
    public string Phone { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [Required]
    public string Subject { get; set; }
    public IEnumerable<SelectListItem> SubjectValues
    {
        get
        {
            return new[]
            {
                new SelectListItem { Value = "General Inquiry", Text = "General Inquiry" },
                new SelectListItem { Value = "Full Wedding Package", Text = "Full Wedding Package" },
                new SelectListItem { Value = "Day of Wedding", Text = "Day of Wedding" },
                new SelectListItem { Value = "Hourly Consultation", Text = "Hourly Consultation" }  
            };
        }
    }

    public IList<VendorAssistanceViewModel> VendorAssistances { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new ContactViewModel());
    }

    [HttpPost]
    public ActionResult Index(ContactViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        //Send email logic
        return RedirectToAction("ContactConfirm");
    }
} 
```

看法：

```
@using (Html.BeginForm())
{
    <div id="ContactContainer">
        <div><span class="RequiredField">*&nbsp;</span>Your Name:</div>
        <div>
            @Html.TextBoxFor(model => model.Name)
        </div>
        <div><span class="RequiredField">*&nbsp;</span>Your Phone:</div>
        <div>
            @Html.TextBoxFor(model => model.Phone)
        </div>
        <div><span class="RequiredField">*&nbsp;</span>Your Email:</div>
        <div>
            @Html.TextBoxFor(model => model.Email)
        </div>
        <div>Subject:</div>
        <div> 
            @Html.DropDownListFor(model => model.Subject, Model.SubjectValues)
        </div>
        <div>Vendor Assistance:</div>
        <div>
            @for (int i = 0; i < Model.VendorAssistances.Count; i++)
            {
                <div>
                    @Html.HiddenFor(x => x.VendorAssistances[i].Name)
                    @Html.CheckBoxFor(x => x.VendorAssistances[i].Checked)
                    @Html.LabelFor(x => x.VendorAssistances[i].Checked, Model.VendorAssistances[i].Name)
                </div>
            }
        </div>
        <div>
            <input id="btnSubmit" type="submit" value="Submit" />
        </div>
    </div>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-17T22:07:07.210

在视图模型中使用字符串数组。然后你可以使用我一起破解的助手。如果您不想使用帮助程序和枚举，请查看底部的实际 Html。活页夹将返回一个字符串数组，其中仅包含选定的字符串值。如果没有选择它，它会为您的数组返回一个空值。你必须考虑到这一点，你已经被警告了:)

查看型号：

```
[Display(Name = "Which Credit Cards are Accepted:")]
        public string[] CreditCards { get; set; } 
```

帮手：

```
public static HtmlString CheckboxGroup<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> propertySelector, Type EnumType)
        {
            var groupName = GetPropertyName(propertySelector);
            var modelValues = ModelMetadata.FromLambdaExpression(propertySelector, htmlHelper.ViewData).Model;//propertySelector.Compile().Invoke(htmlHelper.ViewData.Model);
        StringBuilder literal = new StringBuilder();  

        foreach (var value in Enum.GetValues(EnumType))
        {
            var svalue = value.ToString();
            var builder = new TagBuilder("input");
            builder.GenerateId(groupName);
            builder.Attributes.Add("type", "checkbox");
            builder.Attributes.Add("name", groupName);
            builder.Attributes.Add("value", svalue);
            var contextValues = HttpContext.Current.Request.Form.GetValues(groupName);
            if ((contextValues != null && contextValues.Contains(svalue)) || (modelValues != null && modelValues.ToString().Contains(svalue)))
            {
                builder.Attributes.Add("checked", null);
            }

            literal.Append(String.Format("</br>{1}&nbsp;<span>{0}</span>", svalue.Replace('_', ' '),builder.ToString(TagRenderMode.Normal)));
        }

        return (HtmlString)htmlHelper.Raw(literal.ToString()); 
    }

    private static string GetPropertyName<T, TProperty>(Expression<Func<T, TProperty>> propertySelector)
    {
        var body = propertySelector.Body.ToString();
        var firstIndex = body.IndexOf('.') + 1;
        return body.Substring(firstIndex);
    } 
```

HTML：

```
@Html.CheckboxGroup(m => m.CreditCards, typeof(VendorCertification.Enums.CreditCardTypes)) 
```

如果辅助扩展吓到您，请使用它：

```
 <input id="CreditCards" name="CreditCards" type="checkbox" value="Visa" 
            @(Model.CreditCards != null && Model.CreditCards.Contains("Visa") ? "checked=true" : string.Empty)/>
            &nbsp;<span>Visa</span><br />

            <input id="CreditCards" name="CreditCards" type="checkbox" value="MasterCard" 
            @(Model.CreditCards != null && Model.CreditCards.Contains("MasterCard") ? "checked=true" : string.Empty)/>
            &nbsp;<span>MasterCard</span><br /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-05-22T11:49:26.007

对我来说这也有效，我认为这是最简单的（阅读以前的答案）。

视图模型有一个用于复选框的字符串 []。

```
 public string[] Set { get; set; } 
```

该视图具有此代码，您可以根据需要多次重复输入。输入控件的名称、ID 必须与视图模型的属性名称相匹配。

```
<div class="col-md-3">
  <div class="panel panel-default panel-srcbox">
    <div class="panel-heading">
      <h3 class="panel-title">Set</h3>
    </div>
    <div class="panel-body">
      <div class="form-group-sm">
        <label class="control-label col-xs-3">1</label>
        <div class="col-sm-8">
          <input type="checkbox" id="Set" name="Set" value="1" />
        </div>
        <label class="control-label col-xs-3">2</label>
        <div class="col-sm-8">
          <input type="checkbox" id="Set" name="Set" value="2" />
        </div>
      </div>
    </div>
  </div>
</div> 
```

在 post 方法中，Set 变量是一个数组，具有已检查的值。

# mysql - MYSQL 查找表中的空字段

> ID：12808942
> 
> 赞同：1
> 
> 时间：2012-10-09T21:49:45.090
> 
> 标签：mysql, mysqli

我正在搜索多个表。

```
SELECT DISTINCT cv.id, cv.tJobTitle, cv.tJobTitleAlt, cv.rEmployer, employee.firstName, employee.surname, cv.recentJobTitle, match ( cv.title, cv.recentJobTitle, cv.targetJobTitle, cv.targetJobTitleAlt ) AGAINST ('Desktop' IN BOOLEAN MODE) AS relevance 

FROM cv AS cv, employee AS employee, country AS country 

WHERE cv.showTo=1 AND cv.status=1 AND cv.employeeIDFK = employee.id AND cv.countryISO2FK='GB' 
AND cv.countryISO2FK=country.iso2 
AND match ( cv.title, cv.recentJobTitle, cv.targetJobTitle, cv.targetJobTitleAlt ) AGAINST ('Desktop' IN BOOLEAN MODE ) 
AND cv.salaryType='1' AND cv.salaryMax <=23088 OR cv.salaryMin is NUll 
ORDER BY relevance DESC 
```

我有一个在我的数据库中搜索的价格值，但我也有一个勾选框来说明是否没有设置价格显示该记录。

因此，如果价格字段为空，则仍会显示在结果中。

我已经尝试了上述方法，但它给了我更多的 100 条记录，而我的表只有 2 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:55:21.390

假设 country.iso2 是一个独特的领域，我猜你每个员工都有多个简历，反之亦然。

注意：最好避免对 INNER JOIN 使用逗号表示法。此外，这仅适用于您的 field3 真正为空且不为 NULL 的情况。

# c# - How can I get all Labels on a form and set the Text property of those with a particular name pattern to string.empty?

> ID：12808943
> 
> 赞同：2
> 
> 时间：2012-10-09T21:49:47.220
> 
> 标签：c#, winforms, generics, dynamic, lambda

I want to clear all values on a form where the control is a label and its name starts with "label"

This code:

```
List<Label> lbls = this.Controls.OfType<Label>().ToList();
foreach (var lbl in lbls)
{
    if (lbl.Name.StartsWith("label"))
    {
        lbl.Text = string.Empty;
    }
} 
```

...doesn't work, because the lambda is finding nothing - lbls.Count = 0.

Wouldn't this get ALL the controls on the form, even those that are children of other controls (such as, in my case, Panels)?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T21:58:44.597

Try to use this method:

```
public void ClearLabel(Control control)
{
   if (control is Label)
   {
       Label lbl = (Label)control;
       if (lbl.Text.StartsWith("label"))
           lbl.Text = String.Empty;

   }
   else
       foreach (Control child in control.Controls)
       {
           ClearLabel(child);
       }

} 
```

You just need to pass form to ClearLabel method.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T21:54:24.073

No, it will not recursively search Panels.

To do what you want, you can do:

```
void changeLabel(Control c)
{
    if (lbl.Name.StartsWith("label"))
    {
        lbl.Text = string.Empty;
    }

    foreach(Control _c in c.Controls)
        changeLabel(_c);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-19T05:34:48.017

This does not touch the matter of recursion brought up in the previous answers; it's just another, a little more succint way of expressing what you had:

```
var labels = Controls.OfType<Label>().Where( x => x.Name.StartsWith("label") );
foreach (var label in labels)
{
    label.Text = "";
} 
```

That's what I ended up writing, I thought of adding it here just for completeness - essentially, you don't need `ToList()`, and [`String.Empty` hasn't had any advantage over `""` for ages.](https://stackoverflow.com/q/2905378/3258851)

# node.js - 类型错误：对象# 即使安装了connect-flash，node.js中也没有方法“flash”错误

> ID：12808946
> 
> 赞同：3
> 
> 时间：2012-10-09T21:50:05.317
> 
> 标签：node.js, passport.js

作为一个初学者，我正在玩 node.js，并试图让登录/认证运行但被卡在那里。然后我使用 npm 下载了 connect-flash 中间件，这就是我的 server.js 的样子：

```
var express = require('express'),
    passport = require('passport'),
    util = require('util'),
    LocalStrategy = require('passport-local').Strategy,
    wines = require('./routes/wines');

var users = [
    { id: 1, username: 'bob', password: 'secret', email: 'bob@example.com' }
  , { id: 2, username: 'joe', password: 'birthday', email: 'joe@example.com' }
];

function findById(id, fn) {
  var idx = id - 1;
  if (users[idx]) {
    fn(null, users[idx]);
  } else {
    fn(new Error('User ' + id + ' does not exist'));
  }
}

function findByUsername(username, fn) {
  for (var i = 0, len = users.length; i < len; i++) {
    var user = users[i];
    if (user.username === username) {
      return fn(null, user);
    }
  }
  return fn(null, null);
}

// Passport session setup.
//   To support persistent login sessions, Passport needs to be able to
//   serialize users into and deserialize users out of the session.  Typically,
//   this will be as simple as storing the user ID when serializing, and finding
//   the user by ID when deserializing.
passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  findById(id, function (err, user) {
    done(err, user);
  });
});

// Use the LocalStrategy within Passport.
//   Strategies in passport require a `verify` function, which accept
//   credentials (in this case, a username and password), and invoke a callback
//   with a user object.  In the real world, this would query a database;
//   however, in this example we are using a baked-in set of users.
passport.use(new LocalStrategy(
  function(username, password, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {

      // Find the user by username.  If there is no user with the given
      // username, or the password is not correct, set the user to `false` to
      // indicate failure and set a flash message.  Otherwise, return the
      // authenticated `user`.
      findByUsername(username, function(err, user) {
        if (err) { return done(err); }
        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }
        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }
        return done(null, user);
      })
    });
  }
));

var flash = require('connect-flash');
var express = require("express");
var app = express();

app.get('/', function(req, res){
  res.render('index', { user: req.user });
});

app.get('/flash', function(req, res){
  req.flash('info', 'Flash is back!')
  res.redirect('/');
});

app.get('/account', ensureAuthenticated, function(req, res){
  res.render('account', { user: req.user });
});

app.get('/login', function(req, res){
  res.render('login', { user: req.user, message: "Hello!"});
});

// configure Express
app.configure(function() {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.logger());
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session({ secret: 'keyboard cat' }));
  // Initialize Passport!  Also use passport.session() middleware, to support
  // persistent login sessions (recommended).
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.cookieParser('keyboard cat'));
  app.use(express.session({ cookie: { maxAge: 60000 }}));
  app.use(flash());

});

// POST /login
//   Use passport.authenticate() as route middleware to authenticate the
//   request.  If authentication fails, the user will be redirected back to the
//   login page.  Otherwise, the primary route function function will be called,
//   which, in this example, will redirect the user to the home page.
//
//   curl -v -d "username=bob&password=secret" http://127.0.0.1:3000/login
app.post('/login', 
  passport.authenticate('local', { failureRedirect: '/login', failureFlash: true }),
  function(req, res) {
    res.redirect('/');
  });

app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/');
});

app.listen(3000);

// Simple route middleware to ensure user is authenticated.
//   Use this route middleware on any resource that needs to be protected.  If
//   the request is authenticated (typically via a persistent login session),
//   the request will proceed.  Otherwise, the user will be redirected to the
//   login page.
function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/login')
}
app.get('/wines', wines.findAll);
app.get('/wines/:id', wines.findById);

console.log('Listening on port 3000...'); 
```

为什么我仍然会收到该错误？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T01:21:05.607

将所有`app[METHOD]`中间件移到所有`app.use`中间件之后

# asp.net-mvc - Java servlet 中的类似 Asp.net MVC 脚手架的功能

> ID：12808950
> 
> 赞同：0
> 
> 时间：2012-10-09T21:50:26.573
> 
> 标签：asp.net-mvc, jsp, servlets

使用 ASP.net MVC 3.0 和 Visual Studio 2010，我可以通过选择控制器操作（右键单击 + 脚手架）轻松生成视图，因此我选择视图类型（详细信息、列表、编辑...），我什至可以选择视图将用作数据源的实体/列表。

问题是：在我不必手动更改 web.xml 的情况下，是否有这样的东西可以与 Java JSP 和 servlet 一起使用 eclipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:44:26.890

这里有问题。比较 ASP.NET MVC 和 JSP/Servlets 就像比较苹果和橘子一样。[ASP.NET MVC](https://stackoverflow.com/tags/asp.net-mvc/info)是一个完整的基于组件的 MVC 框架，但[JSP](https://stackoverflow.com/tags/jsp/info)是一种准系统视图技术，而[Servlet](https://stackoverflow.com/tags/servlet/info)只是一个准系统 HTTP 控制器 API。这里绝对没有与 JSP/Servlet 类似的基于组件的 MVC 框架。

您需要在 Java 端寻找基于组件的 MVC 框架。从标准 Java EE API 开始，提供了[JSF](https://stackoverflow.com/tags/jsf/info)。

然而，就工具而言，据我所知，Eclipse 中没有可用的 JSF 的“脚手架”插件，它可以从 DB 一直到 JSF 视图进行自底向上的代码生成。在 Eclipse 中最接近的是从 DB 生成 JPA 实体，但它在这里停止。

不过， Netbeans 有一个[JSF CRUD 生成器](http://netbeans.org/kb/docs/web/jsf20-crud.html)。

### 也可以看看：

*   [JSF、Servlet 和 JSP 有什么区别？](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp)
*   [什么是 ASP.NET / PHP 的主流 Java 替代品](https://stackoverflow.com/questions/2556553/what-is-the-main-stream-java-alternative-to-asp-net-php)
*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks)

# c#-4.0 - 在 ftp 中获取目录的最后修改日期

> ID：12808952
> 
> 赞同：1
> 
> 时间：2012-10-09T21:50:28.270
> 
> 标签：c#-4.0

最近使用 c# 通过 ftp 修改目录时如何获取

我试过这个，没有运气

```
FtpWebRequest ftpRequest = (FtpWebRequest)WebRequest.Create(new Uri("ftp://" + ftpAddress + "/" + "public_html" + "/" + this.Url)); 
ftpRequest.Credentials = new NetworkCredential(FTPUsername, FTPPassword); 
ftpRequest.Method = WebRequestMethods.Ftp.GetDateTimestamp; 
DateTime FtpFileLastModified = ((FtpWebResponse)ftpRequest.GetResponse()).LastModified; 
return FtpFileLastModified; 
```

# android - 增加唤醒锁定时间跨度，直到我的服务在 android 的后台运行

> ID：12808954
> 
> 赞同：0
> 
> 时间：2012-10-09T21:50:41.760
> 
> 标签：android, service, wakelock

我的应用程序正在运行一项服务。我想要的是，我希望屏幕唤醒，直到我的服务在后台运行。我用过这个

```
PowerManager pm;
PowerManager.WakeLock wakeLock;

pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK,"x2_wakelook");
wakeLock.acquire();
wakeLock.release(); 
```

但是这段代码在我的服务生命周期内不起作用。我一退出应用程序，屏幕就会进入睡眠状态。任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:18:05.227

> 但是这段代码在我的服务生命周期内不起作用。

您特别是`WakeLock`在获得它后立即释放它。您需要将`release()`呼叫移动`WakeLock`到要释放的位置。

# jpa - JPA 表大小写不一致

> ID：12808957
> 
> 赞同：0
> 
> 时间：2012-10-09T21:50:53.897
> 
> 标签：jpa, eclipselink

我们正在使用一个非常基本的 JPA 实现，它应该从我们的模型中一致地创建表。
我相信我们正在使用 EclipseLink 或 TopLink（无论哪一个是最新的 Netbeans/Glassfish 的默认设置）。问题是，这些表是用不一致的大小写和列乱序创建的。对我来说，它将`"User"`表创建为“用户”，而对于我团队的其他成员，它会创建`"USER"`.

我试过使用`@Table annotation (@Table(name="USer"))`，但它不起作用。

我们如何让 EclipseLink 生成一致的表名？坦率地说，对于这样的框架来说，这似乎是一个相当业余的错误。

子问题：据我所知，这是一个问题的原因是因为默认情况下 EclipseLink 没有管理模式/数据迁移的默认方式。我们处理它的方式是编写一堆`INSERT INTO's`来引导我们在数据库中需要的对象，并在每次模式更改时删除并重新创建表。我**知道**这不是传播模式更改的最佳实践——有谁知道这在标准 JPA 实现中通常是如何处理的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:39:37.683

默认情况下，EclipseLink 使用全部大写的表名，用户类将是 USER。

如果您指定名称为“USer”的@Table 注释，则该表将被创建为“USer”。

也许您正在使用自己的脚本来创建表，或者您的数据库正在根据操作系统或其自己的设置更改大小写。你用的是什么数据库？

如果在 EclipseLink 中启用日志记录，它将显示它正在执行的确切 DDL（如果它正在执行 DDL）。

在 EclipseLink 2.4 中，还有一个“create-or-extend-tables”DDL 生成选项来更改现有表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:23:55.210

我们从来没有找到任何好的答案。幸运的是，我们找到了用于更新表格的方法的解决方法，它不关心大小写。

# android - 规范注册 ID 和消息 ID 格式

> ID：12808959
> 
> 赞同：8
> 
> 时间：2012-10-09T21:51:05.463
> 
> 标签：android, push-notification, google-cloud-messaging

1.  我在理解`Canonical Registration Id`和让谷歌返回时遇到问题。我故意注册了我的 Android 应用程序两次（以进行测试`Canonical Registration Id`），但是当我尝试向两者推送消息时，`Registration Ids`我没有收到来自 Google a 的返回`Canonical Registration Id`。

2.  另外我想知道谷歌返回的message Id的格式是什么意思。我可以在日志中看到它似乎由三个部分组成`<something>:<something2>%<something3>`。知道它们是什么意思吗？第三部分是否识别设备？

    [INFO com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349819220154718%921c249a6e2555b5] [INFO com.bipper.filters.PushUpdatesFilter] [ messageId=0:1349819220242456%921c249a6e2555b5]

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-19T16:10:56.847

我设法通过这种方式从 GCM 获得了一个规范的注册 ID：

1.  初始状态：应用程序安装在 Android 设备上并注册到 GCM。发件人服务器具有注册 ID 并管理向该设备发送消息。

2.  卸载应用程序。

3.  向原始（旧）注册 ID 发送两条消息。第一个似乎工作（服务器将收到来自 GCM 服务器的成功回复）。第二次尝试将导致“未注册”错误。

4.  重新安装应用程序并注册到 GCM。设备将获得一个新的注册 ID。

5.  使用旧的注册 ID 发送消息。应用程序将收到消息，但服务器将在回复中获得新的注册 ID 作为规范注册 ID。

# sql - 选择所有引用的表

> ID：12808963
> 
> 赞同：3
> 
> 时间：2012-10-09T21:51:30.620
> 
> 标签：sql, postgresql

例如：说，我有 2 个模式和 4 个表创建为

```
 create table a.foo(
      id integer primary key,
      val integer);

    create table b.main(
      id serial primary key,
      val integer references a.foo(id));

    create table b.foo(
      k integer primary key references b.main(id),
      v timestamp with time zone);

    create table b.bar(
      k integer primary key references b.main(id),
      v timestamp with time zone); 
```

我正在寻找的伪代码：选择所有引用 b.main.id 的表；

结果如下所示：

```
 b.main.id | b.main.val | b.foo.k | b.foo.v | b.bar.k | b.bar.v
       1           1           1      TimeStamp    1      TimeStamp
       2           1           2        ....       2        .... 
```

现在我已经将此查询实现为：

```
 select * from b.main,
            (select *
               from b.foo,
                   (select * from b.bar where b.bar.v > somedate) as morebar
              where b.bar.k = b.foo.k) as morefoo
    where b.main.id = b.foo.k; 
```

回到问题。Postgres 中是否有允许我们对所有引用主键的表执行选择的功能？就我而言，所有引用 b.main.id 的表。

我已经搜索了 Postgresql 文档，但还没有找到我要找的东西。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:04:25.103

我还没有找到一种方法来自动选择引用表主键的其他表。看来您仍然必须在查询中手动提及/键入另一个表，但这是使用连接的查询的简短版本：

```
select *
from b.main a, b.foo b, b.bar c
where a.id = b.k
and a.id = c.k 
```

或者

```
select a.*, b.*, c.*
from b.main as a
inner join b.foo as b on a.id = b.k
inner join b.bar as c on a.id = c.k 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:41:18.580

你可以试试：

```
SELECT tc.constraint_name, tc.table_name, kcu.column_name,
       ccu.table_schema AS foreign_schema,
       ccu.table_name AS foreign_table_name,
       ccu.column_name AS foreign_column_name
FROM information_schema.table_constraints AS tc 
JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name
JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name
WHERE constraint_type = 'FOREIGN KEY'
AND ccu.table_schema = 'b'
AND ccu.table_name='main'
AND ccu.column_name = 'id'; 
```

# xml - 链接 Ant 构建文件

> ID：12808965
> 
> 赞同：5
> 
> 时间：2012-10-09T21:51:44.433
> 
> 标签：xml, ant

我有一个使用 Ant 构建的客户端和服务器。客户端依赖于首先构建的服务器才能构建。除了捆绑在客户端中的服务器 ear 文件之外，我拥有所有必需的库。

我创建了 3 个 ant 文件[`build.xml`](http://pastebin.com/0fyKzwcN)、[`build-client.xml`](http://pastebin.com/fQnEYKMr)和[`build-server.xml`](http://pastebin.com/sp0FYQqg). （单击任何文件名以查看它们）这些文件包含在其中，[`build-client.xml`](http://pastebin.com/fQnEYKMr)以便它可以从中运行目标。[`build-server.xml`](http://pastebin.com/sp0FYQqg)[`build.xml`](http://pastebin.com/0fyKzwcN)

我遇到的问题是`basedir`变量从构建文件更改为构建文件。[`build-client.xml`](http://pastebin.com/fQnEYKMr)因此，如果我从basedir 变量中运行目标，[`build.xml`](http://pastebin.com/0fyKzwcN)则相对于[`build.xml`](http://pastebin.com/0fyKzwcN).

如何在 Ant 脚本中多次更改 basedir 变量？

另外，查看这些构建文件，您是否发现了一种更好的方法来做我想做的事情？现在我在想我必须将客户端战争和服务器耳朵放在同一个位置，然后才能制作最终的捆绑耳朵。我对此的想法可能是有缺陷的，因为这些脚本看起来不必要地复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T00:58:32.053

任务的[ant 文档](http://ant.apache.org/manual/Tasks/import.html)为`<import>`您提供了有关如何完成此任务的信息。

根据导入的文件解析文件

假设您的名为 importing.xml 的主构建文件导入了一个构建文件 imports.xml，它位于文件系统的任何位置，imported.xml 从imported.properties 读取一组属性：

```
<!-- importing.xml -->
<project name="importing" basedir="." default="...">
  <import file="${path_to_imported}/imported.xml"/>
</project>

<!-- imported.xml -->
<project name="imported" basedir="." default="...">
  <property file="imported.properties"/>
</project> 
```

`basedir`然而，这个片段将根据 importing.xml解析imported.properties ，因为`basedir`Ant 忽略了imported.xml。使用imported.properties的正确方法是：

```
<!-- imported.xml -->
<project name="imported" basedir="." default="...">
  <dirname property="imported.basedir" file="${ant.file.imported}"/>
  <property file="${imported.basedir}/imported.properties"/>
</project> 
```

如上所述，`${ant.file.imported}`它存储了构建脚本的路径，它定义了名为imported 的项目（简而言之，它存储了imported.xml 的路径）并`<dirname>`获取其目录。此技术还允许将imported.xml 用作独立文件（无需在其他项目中导入）。

基本上，您不能真正使用`${basedir}`变量，也不能真正使用`basedir="./../GrahamsProjClient"`项目标签中的属性，而是可以构造它：

```
<!-- build-client.xml -->
<project name="GPClient" default="dist" >

  <dirname property="client.root.dir" file="${ant.file.GPClient}"/>
  <property name="real.basedir" value="${client.root.dir}/../GrahamsProjClient"/>

  <!-- Then from then on, replace ${basedir} with ${real.basedir} -->
  ...
</project> 
```

您可以对 build-server.xml 执行相同操作，唯一需要注意的是项目名称`${ant.file.[project name]}`在`<dirname />`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T02:39:11.640

我的正常规则是不要使用[`<ant>`](http://ant.apache.org/manual/Tasks/ant.html)或[`<subant>`](http://ant.apache.org/manual/Tasks/subant.html)在正常的构建过程中，因为它会破坏依赖项检查。我们让一个开发人员将 build.xml 分解为七个单独的构建文件，并且由于不断调用`<ant>`任务来执行其他构建文件中的内容，他最多执行了 14 次相同的目标。然后，他想知道为什么他的构建需要这么长时间。将七个构建文件重新组合成一个文件，`build.xml`并使用`depends`参数`<target>`将构建缩短到不到两分钟。

但是，在这种情况下，您拥有的实际上是两个独立的项目，并且`build.xml`您使用一个来调用这两个独立的项目。在这种情况下，最好使用`<ant>`and`<subant>`调用而不是`<import>`.

*   这些调用不会干扰`${basedir}`.
*   这些调用允许您指定要包含在这些单独文件中的属性和资源。（可能的答案是*没有*）。
*   多个目标共享同一个名称没有问题。客户端构建中的*编译*目标不会与`_compile_`服务器构建中的目标重叠。

Subant 更强大，但实现起来更棘手。使用 Subant，您可以让它搜索 build.xml 文件。大多数时候使用`<ant>`只是更容易，做你想做的事。

* * *

我真正推荐的是使用 Ivy 来处理依赖问题。Ivy 不仅可以处理客户端中的服务器依赖项，还可以处理所有第三方 jar 依赖项。不再在项目中存储 jarfile。当您将 jar 文件存储在项目中时，您会丢失有关其实际版本和历史记录的信息。你在你的项目中看到一个`commons-io.jar`，你不知道它是什么版本，或者即使它是官方的`commons-io.jar，或者你的开发人员在某个点上把它弄脏了。

问题是 Ivy 需要做一些工作来实现。您需要使用 Ivy 存储库管理器，例如[Nexus](http://www.sonatype.org/nexus/)、[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Archiva](http://archiva.apache.org)。（实际上，这些是 Maven 存储库管理器，但 Ivy 与它们配合得非常好。）

然后，您需要将其`ivy.jar`导入您的项目并让该`ivysettings.xml`文件指向您的~~Maven~~ Ivy 存储库服务器。

如果您使用 Subversion 作为您的版本控制系统，您可以执行以下操作：

*   创建一个包含 ivy.jar 的 Ivy 项目和一个为您设置所有内容的 XML 文件。我在[Github](https://github.com/qazwart/ivy.dir)上有一个，你可以看看。XML 文件称为`ivy.tasks.xml`.
*   然后在你的项目中，使用`svn:externals`来导入这个项目。
*   在您的`build.xml`中，您需要做两件事：
    *   `<project>`在您的实体中添加 Ivy 命名空间。
    *   使用该`<import>`任务导入具有所有设置的 Ivy XML 文件。

优点是更改您的 Ivy 项目会自动更改所有与 Ivy 交互的项目。例如，如果您更改了 Ivy 服务器的 URL，或者您需要重新定义 Ivy 缓存目录。

这样做后，您只需创建一个`ivy.xml`定义依赖项的文件，并使用`<ivy:cachepath>`和`<ivy:retrieve>`检索您需要的第三方 jar。这将包括您的客户需要的服务器 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:00:54.990

我注意到 ant 的一件事是我无法像我想要的那样改变变量

解决方案是让 ant 从命令行为您想要执行的每个目标运行，而不是执行命令行语句，例如

`ant target1 target2`

或者

```
<target name="target1">
   <antcall target="target2">
</target> 
```

我不得不从命令行按顺序执行目标调用 `ant target1 ant target2`

所以我选择将这些 ant 调用放在一个 python 脚本中，它只是进行`os.system("");`调用，我的命令行语句将在引号内。bash 也可以这样做

这是 ant 为每个目标使用正确变量的唯一方法，如果这些变量具有相同的名称

# ruby-on-rails-3 - Rails服务器日志没有立即输出

> ID：12808966
> 
> 赞同：3
> 
> 时间：2012-10-09T21:51:46.880
> 
> 标签：ruby-on-rails-3, webrick, foreman

我们使用 Foreman 来启动开发中的所有 Web 流程。

不久前，我试图让 ruby​​-debugger gem 使用这个设置，但我做不到，所以我放弃了我的努力。在此过程中，我一定更改了某些设置，现在当我尝试在向本地环境发出请求时实时查看服务器日志时，什么都没有打印出来。我必须杀死工头才能看到请求的任何输出。

这真的减慢了我的开发速度，因为我必须提出请求，杀死工头以获取有关问题的信息，然后重新启动并重试。

任何想法如何让我的服务器日志在我发出请求时吐出所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T05:08:58.927

我有同样的问题。[在这里](https://stackoverflow.com/questions/9953435/why-does-foreman-not-output-some-things-until-i-press-control-c)解决了：

就像添加一条线一样简单

```
$stdout.sync = true 
```

到您的 config/environments/development.rb 文件，然后重新启动工头。

为我工作，让我的生活更轻松。

# python - 硒+鼻子的平行测试

> ID：12808978
> 
> 赞同：4
> 
> 时间：2012-10-09T21:52:56.193
> 
> 标签：python, selenium, multiprocessing, nosetests, parallel-testing

我正在尝试与多进程插件并行运行功能测试，这有时会给我随机 TimeoutException

我的测试非常简单，他们每个人都只是去一个网页并检查某个元素是否存在。

有人知道可能是什么原因吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T16:18:53.793

尝试将 --process-timeout 值设置为高于测试合理使用的值来运行nosetests：

鼻子测试 --processes=2 --process-timeout=120

# php - 如何使用 NULL 搜索条件在 Yii 中搜索记录

> ID：12808980
> 
> 赞同：3
> 
> 时间：2012-10-09T21:53:11.467
> 
> 标签：php, model, yii

假设我有具有 Category 属性的 Product 模型，并且我想使用 search() 函数提取类别为空的所有此类产品。

```
$productSearch = clone Product::model();
$productSearch->Category = null;

$products = $productSearch->search()->getData(); 
```

通过检查生成的 SQL，我发现它不起作用，查询中根本没有提到类别。最好的方法是什么？

还如何搜索具有某些属性设置为*NULL 或某些值的记录*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:58:56.023

第一种变体：

```
// use search scenario, not clone model with metadata
$productSearch = new Product('search'); 
$productSearch->unsetAttributes();

// get CActiveDataProvider
$dataProvider = $productSearch->search();
// Add null condition
$dataProvider->criteria->addCondition('Category is null');
// Get data - first 10 rows
$products = $dataProvider->getData(); 
```

第二种变体（首选）：

```
$products = Product::model()->findAll('Category is null'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:53:11.467

给一个属性赋值 null 值不起作用，因为它没有被 Yii 记录：属性的初始值为 null 并且 Yii 不跟踪修改的属性（这有点烦人）。

这里的工作是像这样使用它：

```
$productSearch = clone Product::model();
$productSearch->Category = array(null);

$products = $productSearch->search()->getData(); 
```

请注意，如果您想搜索更高级`Category IS NULL OR Category IN (1, 2, 3)`的预期方法：

```
$productSearch->Category = array(null, 1, 2, 3); 
```

**由于 Yii 盲目地将其全部放入单个 IN 语句中，因此**无法正常工作：****

 **```
Category IN (NULL, 1, 2, 3) 
```

这里的工作更复杂，因为它需要在模型搜索方法中使用额外的代码：

```
public function search()
{
    $criteria = new CDbCriteria;

    // Work around of inability of Yii to handle IS NULL OR IN () conditions
    if (is_array($this->Category) && count($this->Category) > 1)
    {
        $hasNull = false;
        $values = array();
        foreach ($this->Category as $value)
        {
            if (is_null($value))
            {
                $hasNull = true;
            }
            else
            {
                array_push($values, $value);
            }
        }

        $condition = array();
        if ($hasNull) array_push($condition, 'Category IS NULL');
        if (count($values)) array_push($condition, "Category IN ('" . implode("', '", $values) . "')");

        $criteria->addCondition(implode(' OR ', $condition));
    }
    else
    {
        $criteria->compare('Category', $this->Category);
    }

    // other search criterias ...

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));

} 
```**

# cakephp-2.0 - 使用 cakePHP 的 Hash 类从数组中提取数据

> ID：12808983
> 
> 赞同：9
> 
> 时间：2012-10-09T21:53:23.320
> 
> 标签：cakephp-2.0

我有一个这样的数组：

```
Array(
    [Rating] => Array(
        [0] => Array(
            [id] => 4
            [rating] => -1
        ),
        [1] => Array(
            [id] => 14
            [rating] => 9.7
        ),
        [2] => Array(
            [id] => 26
            [rating] => 9.55
        )
    )
) 
```

我需要从这个数组中提取所有评级> = 0，并且只提取数字。我做得很好`Set::extract('/Rating/rating[rating>-1]', $video)`

但后来我了解到这已被弃用，你现在应该使用 Hash 类。所以我查找了新语法并写道：

```
Hash::extract($video, 'Rating.{n}.rating[rating>-1]'); 
```

这给了我正确的结果，但它给出了一个恼人的警告：`Warning (4096): Argument 1 passed to Hash::_matches() must be an array, string given, called in E:\www\lib\Cake\Utility\Hash.php on line 131 and defined [CORE\Cake\Utility\Hash.php, line 170]`

当我没有条件时不会出现警告（`[rating>-1]`），但当然包括我不想要的 -1。我在这里做错了什么？我是否以某种方式滥用了这个功能？我应该只使用已弃用的 Set 类吗？还是我应该忽略警告，因为一旦我将此应用程序置于生产模式，它就不会出现？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-07-25T19:11:56.267

这个问题很老，我确信它已经解决了，但是 CakePHP 文档对于哈希路径语法的使用有点不清楚。因此，以防其他人遇到此问题，这就是我发现的。

问题中的语法不正确。正确的语法是`'Hash::extract($ratings, 'Rating.{n}[rating>-1].rating')'`.

根据文档：“**标记**由两组组成。**表达式**，用于遍历数组数据，而**匹配器**用于限定元素。”。

`{n}[rating>-1]`被认为是一个**令牌**。`{n}`是过滤数组键的**表达式**，在这种情况下，键必须是数字。`[rating>-1]`是过滤数组元素的**匹配**器，在这种情况下，元素必须是一个数组，其中包含一个名为的键`rating`和一个大于的关联值`-1`。一旦你有了数组元素，你就可以得到`rating`.

```
 $ratings = array(
        'Rating' => array(
            array(
                'id' => 4,
                'rating' => -1
            ),
            array(
                'id' => 14,
                'rating' => 9.7
            ),
            array(
                'id' => 26,
                'rating' => 9.55
            )
        )
    );
    print_r( Hash::extract($ratings, 'Rating.{n}[rating>-1].rating') ); 
```

结果是：

```
Array ( [0] => 9.7 [1] => 9.55 ) 
```

# ruby-on-rails - Rails如何删除文件而不会因错误而失败

> ID：12808988
> 
> 赞同：67
> 
> 时间：2012-10-09T21:53:56.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 JPEGCAM 允许用户使用他们的网络摄像头拍摄个人资料照片。这会上传一个临时文件，如下所示：

```
def ajax_photo_upload    
  File.open(upload_path, 'w:ASCII-8BIT') do |f|
    f.write request.raw_post
  end
  # @user.photo = File.open(upload_path)
  @user.assign_attributes(
    :photo => File.open(upload_path),
    :orig_filename => "#{current_user.full_name}.jpg"
  )
  if @user.save
  respond_to do |format|
  .....
private

  def upload_path # is used in upload and create
    file_name = session[:session_id].to_s + '.jpg'
    File.join(::Rails.root.to_s, 'public', 'temp', file_name)
  end 
```

安全删除此临时文件的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-10-10T08:14:41.293

When you know that you are done with the file:

```
File.delete(path_to_file) if File.exist?(path_to_file) 
```

Another thing: make sure that you always close files that you have opened, an operating system can only handle a certain number of open files/file descriptors and you'll may run into strange bugs when you pass that limit... So when you want to open files in Ruby always either use the block form:

```
File.open(path) do |f|
  # ...
end 
```

and Ruby will close the file automatically for you. If the block form is not usable, you have to close files by yourself:

```
f = File.open(path)
# ...
f.close 
```

So make sure to close the file that you pass to `@user.assign_attributes(...)`...

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-09T22:06:56.160

如果你确定你已经完成了它，为什么不直接使用`FileUtils.rm`or `FileUtils.rm_f`？

`FileUtils.rm_f(upload_path)`

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-rm_f](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-rm_f)

您也可以在 Rails 中忽略这一点，并让 cron 唤醒并从与这些临时文件匹配的临时目录中删除超过一天的文件。如果文件无法重新处理 - 您不会立即对其进行 rm 处理 - 并且文件操作不是在 Rails 的请求/响应循环上完成的，那么这有一些错误余地的好处，这样会更快地响应。

# c++ - 我不断收到错误，这是我第一次使用类，这是我的代码：

> ID：12808991
> 
> 赞同：0
> 
> 时间：2012-10-09T21:54:07.267
> 
> 标签：c++, visual-studio-2010, sfml

错误：

```
1>------ Build started: Project: SFML_lesson1, Configuration: Debug Win32 ------
1>  Main.cpp
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(5): error C2146: syntax error : missing ';' before identifier 'event'
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2065: 'event' : undeclared identifier
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2228: left of '.type' must have class/struct/union
1>          type is ''unknown-type''
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2653: 'Event' : is not a class or namespace name
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2065: 'MouseButtonPressed' : undeclared identifier
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2065: 'event' : undeclared identifier
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2228: left of '.mouseButton' must have class/struct/union
1>          type is ''unknown-type''
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2228: left of '.button' must have class/struct/union
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2653: 'Mouse' : is not a class or namespace name
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\keyevents.h(8): error C2065: 'Left' : undeclared identifier
1>c:\users\steven\documents\visual studio 2010\projects\sfml_lesson1\sfml_lesson1\main.cpp(47): error C3867: 'input::leftclick': function call missing argument list; use '&input::leftclick' to create a pointer to member
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是我第一次做这样的事情，过去几周我一直在学习 C++，但我遇到了一个奇怪的错误。我在 udemy 上按照这些 tuts 使用 SFML 来了解游戏开发的基础知识。我决定写一个更简单的方法来使用左触发事件，然后写出很长的一行。

这是我的**KeyEvents.h**文件：

```
class input{

public:

    Event event;

    int leftclick(){
    event.type == Event::MouseButtonPressed && event.mouseButton.button == Mouse::Left;

    return true;
    }

}; 
```

这是我的**Main.cpp**文件：

```
//Libraries
#include <iostream>
#include <SFML/Graphics.hpp>
#include "Settings.h" // Includes the Settings.h file located in the "Header Files" folder
#include "KeyEvents.h"
using namespace std;
using namespace sf;

int main(){
    // Declarations
    bool Playing=true; // Used for the Main loop when the game starts up
    //  The datatype holding all the events 
    Event event;

    RenderWindow window(VideoMode(Settings::WIDTH,Settings::HEIGHT), "Project"); // Creates the windows

    window.setFramerateLimit(Settings::FRAME_RATE); // Sets the Frame-rate limit
    window.setKeyRepeatEnabled(Settings::KEY_REPEATE); // Remove spamming keys
    while(Playing==true){ // Main loop

            while (window.pollEvent(event)){

                if(event.type == Event::KeyPressed){ // If a Key has been pressed! 
                        // For certain keyboard buttons it would be 'event.key.code == Keyboard::A'
                            // There are two states for the keyboard 'KeyPressed' and 'KeyRelease'

                    cout << "A Key has been pressed!\n";

                }
                 else if(event.type == Event::KeyReleased){

                        cout << "The key has just been released!\n"; // This message only pops up when they 'A' or 'a' has been released

                    }

                 if(event.type == Event::KeyReleased && event.key.code == Keyboard::Escape){ // This is for when the 'event' is closed the game will exit, by making the bool 'Playing' to false it is set to close by using the escape key

                     cout << "The Game has just been closed when Pressing the 'Escape Key'\n";
                     Playing=false;

                 }

                 if(input::leftclick){ // My custom way of knowing when the user left clicks with his/her mouse inside the class input there is a function called leftclick

                 cout << "YAY I AM LEARNING\n";

                 }

            }

        //  Logic:  

        //  Rendering:

    // Clears the window, then displays what it needs to
    window.clear();
    window.display();

    }

    window.close(); // Closes the window. when Playing is false

// Returns tto the computer that the program is running fine.
return true;
} 
```

我猜这是一个奇怪的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:55:49.560

似乎您的 Event 类在使用之前没有定义（甚至声明）。你在哪里声明？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:01:09.450

编译器错误表示`Event`未定义类型。您需要在开头包含标题及其定义`KeyEvents.h`。并且不要忘记使用命名空间范围解析：

```
#include <SFML/Event.hpp>

class input{
public:
   sf::Event event;

   // Other code
   ...
}; 
```

还要提一下，不建议使用全局`using`指令。在功能范围内本地编写它们。

# ios - navcontroller - 将导航项设置为图像

> ID：12808992
> 
> 赞同：2
> 
> 时间：2012-10-09T21:54:10.963
> 
> 标签：ios, ios5, uinavigationcontroller, uinavigationbar, uinavigationitem

我想将导航控制器栏按钮项设置为图像。

我已阅读以下内容 -[将图像添加到 navigationItem 的标题](https://stackoverflow.com/questions/328352/add-image-to-a-navigationitems-title)

我了解如何将其设置为图像。我实际上希望将其设置为设置 cog，在条形按钮项目中（如 cog 图标）。我之前在其他应用程序中看到过这种情况，我想知道是否有默认样式为此初始化，或者通常是否通过上述图像路由实现。

如果上面是这样，有谁知道这种（某种）默认图像样式图标在哪里可用，或者我需要制作一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:04:49.190

您是否尝试过使用 的`initWithCustomView`选项`UIBarButtonItem`？示例代码如下所示。

```
UIBarButtonItem *aButton = [[UIBarButtonItem alloc] initWithCustomView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"settings.png"]]]; 
```

另一种方法是，

```
UIBarButtonItem *aButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"settings.png"] style:UIBarButtonItemStyleBordered target:self action:@selector(buttonTapped)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:09:26.307

如果你使用storyboard，你可以直接：

1.  在导航栏中拖动 a`Button`而不是`Bar Button Item`。它会自动`Button Bar Item`为你创建一个`Button`里面有一个。
2.  输入标题`Button Bar Item`
3.  `Button`为带有`Custom`类型的图像设置图像。

它应该有效。

# asp.net - 如何获取位于我的表单视图的 insertitemtemplate 内的下拉列表用户控件的选定值？

> ID：12808994
> 
> 赞同：3
> 
> 时间：2012-10-09T21:54:19.003
> 
> 标签：asp.net, drop-down-menu, user-controls, findcontrol

我是 .NET 新手，但这是我的问题：

我有一个使用*Master Pages*的应用程序。我有一个页面，上面有一个用于输入地址信息的*表单视图。*在 insertitemtemplate 中是我引用的用户控件。此用户控件是一个列出国家/地区的下拉列表。用户控件具有获取和设置选定值的公共属性。用户控件不是数据绑定的，而是静态的。*用户控件.ascx*文件中用户控件的 id是“DropDownListCountry”。当我在页面的 formview 上引用它时，ID 是“fvDropDownListCountry”。

当我执行命令以保存表单视图的用户输入时，我想获取用户已指示他们选择的国家/地区的选定值。对于其他输入区域，即文本框，我可以使用以下代码：

```
Dim street1 As String = CType(myFrmView.FindControl("fvTextBoxStreet1"), TextBox).Text 
```

很明显，这种方法不适用于用户控件内部的下拉列表。我不能例如使用：

```
Dim country As String = TryCast(myFrmView.FindControl("fvDropDownListCountry"), DropDownList).SelectedValue 
```

我环顾四周，试图找到有关如何从此用户控件中获取所选值的答案，但在这方面是新手，还没有找到它。我已经查看了递归检查子控件的控件的函数，但无法完成这项工作。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:59:01.710

你想在哪里获得这个价值？asp.net TextBox`<input type=text />`自动维护状态，但对于 asp.net DropDownList 则不是这样`<select />`

如果您尝试在 PageInit 期间访问 DropDownList，则该值将尚未加载，因为 ViewState 不可用。您需要在 PageLoad 中或作为 DropDownList 上的 SelectedIndexChanged 事件的一部分访问它。

仅供参考：很确定您可以在 PageInit 期间设置 SelectedIndex 或 SelectedValue 属性，但您无法读取该值。

# c# - 需要登录的可共享内容

> ID：12808999
> 
> 赞同：0
> 
> 时间：2012-10-09T21:54:28.787
> 
> 标签：c#, asp.net, facebook

这是一个描述我想要做什么的问题：

[Facebook“喜欢”按钮不是“喜欢”安全文件夹中的内容？](https://stackoverflow.com/questions/5075189/facebook-like-button-not-liking-content-inside-secured-folder)

简而言之，我想在只有经过身份验证的用户才能访问的页面上有一个赞按钮。这样做的目的是链接可以共享到 Facebook，但是当人们点击 Facebook 内的链接时，他们将被重定向到“您必须登录才能看到这个”页面。

无论如何，我想这样做的方式是查看来自 Facebook 的用户代理，而不是重定向或允许显示页面，我只会编写一个单独的响应，其中包含打开的图形元数据，但没有实际的页面 HTML。

至少在我看来，这绕过了用户代理欺骗的问题，因为不会向他们显示 HTML，因此他们仍然无法访问内容。我只是不确定 Facebook 对此有何看法，它是在“玩弄”系统吗？

更好的是，还有另一种可靠的方法吗？

谢谢