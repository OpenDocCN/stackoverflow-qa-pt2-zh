# StackOverflow 问答 12905000-12905999

# svn - 如何从 SVN 中删除现有的更改列表

> ID：12905000
> 
> 赞同：48
> 
> 时间：2012-10-15T22:37:01.963
> 
> 标签：svn, changelist

我通过这样做创建了一个更改列表...

```
$ svn changelist my_changes 
```

...向其中添加文件，然后提交更改列表...

```
$ svn ci --changelist my_changes --keep-changelists 
```

...所以现在，我已经“保留”了我的更改列表，并且每次查看状态时它都会显示出来。

```
$ svn status
... modified/added/deleted files listed here...

--- Changelist 'my_changes':
... files that are a part of this changelist listed here... 
```

我“保留”了更改列表是有原因的，但我不再需要它，所以我准备删除它。如何从 SVN 中删除此更改列表？我知道如何从更改列表中删除文件，但不知道更改列表本身。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-15T23:18:50.730

从更改列表中删除所有相关文件，它就会消失。

# 官方方式

见[https://stackoverflow.com/a/15992735/253468](https://stackoverflow.com/a/15992735/253468)

```
svn changelist --remove --recursive --cl my_changes . 
```

# 手动方式

IE`svn changelist --remove file.name`

```
D:\Programming>mkdir test
D:\Programming>cd test
D:\Programming\test>svnadmin create .
D:\Programming\test>svn co file:///D:\Programming\test co
Checked out revision 0.
D:\Programming\test>cd co
D:\Programming\test\co>echo "hello" > test.file
D:\Programming\test\co>svn add test.file
A       test.file

D:\Programming\test\co>svn status
A       test.file

D:\Programming\test\co>svn changelist mycl test.file
A [mycl] test.file

D:\Programming\test\co>svn status
--- Changelist 'mycl':
A       test.file

D:\Programming\test\co>svn changelist --remove test.file
D [mycl] test.file

D:\Programming\test\co>svn status
A       test.file 
```

# Bash 中的自动化

```
# Remove all files from a specific CL
# Usage: svn_remove_cl my_changes
function svn_remove_cl() {
    svn status |\
    sed -n "/--- Changelist '$1':/,/--- Changelist.*/p" |\
    grep -v '^--- Changelist' |\
    awk '{print $2}' |\
    xargs svn changelist --remove
} 
```

解释：

*   `svn status`: 输出所有修改过的文件
*   `sed`: 找到更改列表并在 CL 标题之后获取输出，直到下一个 CL 或`svn status`输出的结尾
*   `grep`：从缓冲区中删除 CL 标题
*   `awk`：删除文件状态，只保留文件名（即第二列）
*   `xargs`：将每一行作为参数`svn changelist`
    （如果文件名中有空格或特殊字符，可能需要调整）

## 示例运行

```
~/tmp/wc$ svn status
A       d

--- Changelist 'cl_a':
A       a
A       e
A       f

--- Changelist 'cl_x':
A       b
A       c
~/tmp/wc$ svn_remove_cl cl_x
Path 'b' is no longer a member of a changelist.
Path 'c' is no longer a member of a changelist.
~/tmp/wc$ svn status
A       b
A       c
A       d

--- Changelist 'cl_a':
A       a
A       e
A       f 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-04-13T20:46:09.537

如果您只想删除一个更改列表（例如 my_changes），请移至工作副本的顶级文件夹并运行：

```
svn changelist --remove --recursive --cl my_changes . 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-02-25T18:30:36.353

对于那些想知道的人，您可以使用带有 svn 的单个命令来完成此操作。只需导航到更改列表下的文件级别目录，然后运行：

```
svn changelist --remove --recursive . 
```

这将遍历当前目录下的所有文件，并尝试将它们与更改列表解除关联。

# eclipse - 至少在一个 JAR 中扫描了 TLD，但未包含 TLD

> ID：12905001
> 
> 赞同：62
> 
> 时间：2012-10-15T22:37:03.573
> 
> 标签：eclipse, tomcat, tomcat7

我一直在tomcat 7.30（eclipse juno）上得到这个

> 至少对一个 JAR 进行了 TLD 扫描，但未包含 TLD。启用此记录器的调试日志记录以获取已扫描但未在其中找到 TLD 的 JAR 的完整列表。在扫描期间跳过不需要的 JAR 可以缩短启动时间和 JSP 编译时间。

好吧，我去了`conf\logging.properties`，把所有的东西都`INFO`转向`FINE`并取消了对这条线的评论

```
# To see debug messages in TldLocationsCache, uncomment the following line:
org.apache.jasper.compiler.TldLocationsCache.level = FINE 
```

我仍然看到`At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging...`

那么我应该怎么做才能看到那些罐子呢？

**日志位置：**

tomcat 日志位于 $CATALINA_HOME\logs\catalina.yyyy-mm-dd.log 中。Eclipse 在控制台中打印它们——如果你想记录你的控制台[，你必须](https://stackoverflow.com/a/5045247/281545)

> 在服务器选项卡中，双击 Tomcat 服务器。您将看到一个名为概览的屏幕。单击“打开启动配置”。单击“常用”选项卡。在屏幕底部，您可以选中“文件”复选框，然后指定一个可用于记录控制台 (catalina.out) 输出的文件。最后，重新启动 Tomcat 服务器。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T10:46:49.393

如果想要`conf\logging.properties`阅读[必须](http://wiki.eclipse.org/WTP_Tomcat_FAQ#How_do_I_enable_the_JULI_logging_in_a_Tomcat_5.5_Server_instance.3F)（另请参见[此处](http://happygiraffe.net/blog/2008/08/01/tomcat-logging-in-wtp/)）将此文件转储到文件`Servers\Tomcat v7.0 Server at localhost-config\`夹中，然后添加以下行：

> -Djava.util.logging.config.file="${workspace_loc}\Servers\Tomcat v7.0 服务器在 localhost-config\logging.properties" -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager

[到正在使用的启动配置](http://wiki.eclipse.org/FAQ_What_is_a_launch_configuration?)的 VM 参数。

这可能需要重新启动一两次（或不重新启动），但最后我在控制台中看到了鲜红色：

> FINE：在 [file:/C:/Dropbox/eclipse_workspaces/javaEE/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ted2012/WEB-INF/lib/logback 中找不到 TLD 文件-classic-1.0.7.jar]。考虑将 JAR 添加到 CATALINA_BASE/conf/catalina.properties 文件中的 tomcat.util.scan.DefaultJarScanner.jarsToSkip 或 org.apache.catalina.startup.TldConfig.jarsToSkip 属性。//ETC

~~我仍然不知道这个`FINE`警告究竟是什么时候出现的——在 tomcat 启动时不会立即出现~~ **编辑**：来自@Stephan 的评论：*“每次在 JSP 文件中进行任何更改时都会出现 FINE 警告”*。

* * *

奖励：要使警告消失，请添加`catalina.properties` ：

```
# Additional JARs (over and above the default JARs listed above) to skip when
# scanning for TLDs. The list must be a comma separated list of JAR file names.
org.apache.catalina.startup.TldConfig.jarsToSkip=logback-classic-1.0.7.jar,\
joda-time-2.1.jar,joda-time-2.1-javadoc.jar,mysql-connector-java-5.1.24-bin.jar,\
logback-core-1.0.7.jar,javax.servlet.jsp.jstl-api-1.2.1.jar 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-28T14:02:08.650

**（tomcat 8.0.28）**上述方法对我不起作用。这是有效的：

1.  将此行添加到 {CATALINA-HOME}/conf/logging.properties 的末尾：

    ```
    org.apache.jasper.level = FINEST 
    ```

2.  关闭服务器（如果已启动）。

3.  打开控制台并运行（在 Windows 的情况下）：

    ```
    %CATALINA_HOME%\bin\catalina.bat run 
    ```

4.  享受日志，例如（再次，对于 Windows）：

    ```
    {CATALINA-HOME}/logs/catalina.2015-12-28.log 
    ```

我放弃了将其与 Eclipse 启动配置集成，因此请注意，这仅适用于控制台，从 Eclipse 启动服务器不会产生额外的日志消息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-20T05:12:24.010

**apache-tomcat-8.0.33**

如果要在 tomcat 中为 TLD 扫描的 jar 启用调试日志记录，则必须更改 tomcat 目录中的 /conf/logging.properties 文件。

取消注释该行：
**org.apache.jasper.servlet.TldScanner.level = FINE**

**FINE**级别用于调试日志。

这应该适用于普通的tomcat。

如果tomcat在eclipse下运行。然后你必须在eclipse中设置tomcat logging.properties的路径。

1.  在 eclipse 中打开**服务器**视图。停止服务器。双击您的 tomcat 服务器。
    这将打开服务器的**概览**窗口。
2.  单击**打开启动配置**。这将打开另一个窗口。
3.  转到**参数**选项卡（*第二个选项卡*）。转到**VM 参数**部分。
4.  将这两行粘贴到那里：-
    -Djava.util.logging.config.file="{CATALINA_HOME}\conf\logging.properties"
    -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
    这里**CATALINA_HOME**是您的 PC对应的tomcat服务器目录。
5.  保存更改。重新启动服务器。

现在，扫描 TLD 的 jar 文件应显示在日志中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T18:38:27.900

**(tomcat 7.0.32)尽管在***tomcat/conf/logging.properties*文件 中启用了 TldLocationsCache 行，但我在查看调试消息时遇到了问题。我所能看到的只是一个警告，而不是扫描了哪些库。更改了每个日志级别都尝试了一切都没有运气。然后我进入了流氓调试模式（=一个一个删除，干净安装等），终于找到了原因。

我的 webapp 有一个自定义的*tomcat/webapps/mywebapp/WEB-INF/classes/logging.properties*文件。我将 TldLocationsCache 行复制到该文件中，最后我可以看到 jars 文件名。

# 要查看 TldLocationsCache 中的调试消息，请取消注释以下行： org.apache.jasper.compiler.TldLocationsCache.level = FINE

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-16T21:34:18.053

对于任何尝试使用[Sysdeo Eclipse Tomcat 插件](http://www.eclipsetotale.com/tomcatPlugin.html)来实现此功能的人，请尝试以下步骤（我使用 Sysdeo Tomcat 插件 3.3.0、Eclipse Kepler 和 Tomcat 7.0.53 来构建这些步骤）：

1.  Window --> Preferences --> 在树中展开 Tomcat 节点 --> JVM Settings
2.  在“附加到 JVM 参数”下，单击“添加”按钮。
3.  在“新建 Tomcat JVM 参数”弹出窗口中，输入`-Djava.util.logging.config.file="{TOMCAT_HOME}\conf\logging.properties"`Tomcat`{TOMCAT_HOME}`目录的路径（例如：C:\Tomcat\apache-tomcat-7.0.53\conf\logging.properties）。单击确定。
4.  在“附加到 JVM 参数”下，再次单击“添加”按钮。
5.  在“新建 Tomcat JVM 参数”弹出窗口中，输入`-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager`. 单击确定。
6.  在“首选项”窗口中单击“确定”。
7.  [按照上述问题](https://stackoverflow.com/q/12905001/684617)`{TOMCAT_HOME}\conf\logging.properties`中的说明对文件进行调整。
8.  下次在 Eclipse 中启动 Tomcat 时，您应该会在 Eclipse 控制台中看到已扫描的 .jar，而不是“为此记录器启用调试日志记录”消息。该信息也应登录`{TOMCAT_HOME}\logs\catalina.yyyy-mm-dd.log`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-25T10:51:30.350

我遇到过同样的问题。这是关于tomcat的。我已经通过删除 tomcat 和添加的 tomcat 解决了这个问题。它现在工作正常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-15T00:24:01.287

对我来说，我在将 a 部署`geoserver WAR`到 tomcat 7时遇到了问题

为了解决这个问题，我使用 Java 7 并升级到 Java 8。

这是在 docker 容器下运行的。`Tomcat 7.0.75`+ `Java 8`+`Geos 2.10.2`

# css - 构建适合所有显示器的类似应用程序的网页的最佳方法

> ID：12905005
> 
> 赞同：0
> 
> 时间：2012-10-15T22:37:18.207
> 
> 标签：css, html

基本上是一个计算器应用程序。终端/文本字段在顶部。它下方的 4x4 网格按钮。一切都应该缩放以填满任何屏幕。我知道这是非常开放式的。你的回答可以笼统。用桌子？分区？什么样的显示器？固定的？我不知道如何最好地处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:54:38.037

没有最好的解决方案，最简单的是使用`table`s，最现代的使用`display: grid`但不适用于所有浏览器，您也可以尝试将您编写的任何内容放在一个固定`width`和`height`元素中并使用 css3`transform: scale`来“适应屏幕”，但是也不适用于所有浏览器，您也可以使用 4 个`inline-block`元素`height: 100%; width: 25%;`在 4 个`block`元素中使用 4 个元素`height: 25%`，或者使用 16 个`inline-block`元素和`width: 25%; height: 25%`，另一种解决方案是可以使用`position: fixed`or`position: absolute`和定义所有 16 个元素，并为每个元素单独`width:25%; height:25%`定义and。我认为对于所有提到的解决方案，您也不应该忘记设置。`top``left``html, body { margin: 0; padding: 0; height: 100%; }`

当然，如果您添加边距，您可能需要调整这些百分比，但也要以百分比设置这些百分比，以便在您缩放时看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:56:35.013

不要使用表格。

您想研究响应式网页设计。

[http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

我会使用网格系统。检查一些，看看什么适合你正在做的事情。您希望您的网格灵活，因此基于百分比，而不是基于像素。这样你就不必依赖媒体查询断点来改变宽度——它只会随着视口宽度的变化而变化。

例如（

```
 .onecol    { width: 5.801104972%;  }       
      .twocol    { width: 14.364640883%; }       
      .threecol  { width: 22.928176794%; }       
      .fourcol   { width: 31.491712705%; }       
      .fivecol   { width: 40.055248616%; }      
      .sixcol    { width: 48.618784527%; }       
      .sevencol  { width: 57.182320438000005%; } 
      .eightcol  { width: 65.74585634900001%; }  
      .ninecol   { width: 74.30939226%; }       
      .tencol    { width: 82.87292817100001%; }  
      .elevencol { width: 91.436464082%; }      
      .twelvecol { width: 99.999999993%; }       

      /* layout & column defaults */
      .onecol, .twocol, .threecol, .fourcol, .fivecol, .sixcol, .sevencol, .eightcol, .ninecol, .tencol, .elevencol, .twelvecol {
        position: relative;
        float: left;
        margin-left: 2.762430939%;
      }

      .first {
        margin-left: 0;
      }

      .last {
        float: right;
      } 
```

所以你的输入将在一个十二列中，然后将按钮移动到一个三列网格中

也就是说，您会发现对于手机和向下的纵向模式，您可能需要更改布局，因此使用媒体查询并更改 css 以从那里每行仅显示两个按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:54:28.097

我更喜欢使用 div，但对于这种网格，表格可能会更简单，但为了确保使用 precents 作为宽度和高度的值，您可能会使用 colspan 和 rowspan 以正确的方式适合您的表格单元格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:22:52.467

如果您将按钮固定为 4x4，请使用响应式设计。

不要使用表格，使用 Divs。

不要使用固定显示或绝对显示。（我想你可以，但为什么呢？）

最后，您正在寻找的答案：[响应式设计](http://responsivedesign.ca/)

# delphi - 访问冲突，除非我在重新编译之前清理

> ID：12905010
> 
> 赞同：3
> 
> 时间：2012-10-15T22:38:16.763
> 
> 标签：delphi, delphi-2010

我重新编译某个单元（MyClass）后收到访问冲突，除非我进行清理。该错误显然是对空对象的调用（地址写入 00000000），但是当我尝试单步执行时，编译器不允许我单步执行我认为发生错误的代码。（在同一对象的方法内。当我跟踪该方法时，在跟踪到该方法之后但在转到代码行之前出现错误。）这发生在 MyClass 的使用单元中，而不是 MyClass 本身。

奇怪的是，如果我进行清理（或构建）然后重新编译，程序运行良好。有什么理由会发生这种情况？

**更新**

该应用程序使用通过 AsyncCalls 库创建的多个线程。我使用几个`TEvent`和`TMultiReadExclusiveWriteSynchronizer`对象来保持流程有序并保护资源。创建或释放此类对象时是否需要特别注意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:04:20.660

请检查项目设置中的输出路径。为已编译的单元设置一个输出路径（例如“.\$(Config)\_dcu”），然后再次检查。

# java - 在android中运行可执行jar

> ID：12905012
> 
> 赞同：14
> 
> 时间：2012-10-15T22:38:30.583
> 
> 标签：java, android, jar

是否可以在 android 中运行可执行的 jar 文件（基于命令行）？我的一位朋友告诉我，可以运行用 C 编写的可执行文件。java 也可以吗？我将通过 adb shell 运行该工具。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T22:53:11.313

Android 使用 Dalvik VM，而您需要 Java VM 来运行 jar 文件。所以不，你不能在 android 上运行 jar 文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T22:53:23.750

您可以通过 adb 安装构建为 APK 的应用：

```
adb install my_apk_file.apk 
```

一旦进入 adb shell，您就可以使用该`am`命令启动一个 APK 应用程序。请参阅[如何使用 android ADB 工具启动应用程序？](https://stackoverflow.com/questions/4567904/how-to-start-an-application-using-android-adb-tools)

但我认为没有办法像在桌面操作系统上那样直接运行 jar 文件，因为 Android 不使用标准的 Java VM。

我认为您需要将 .jar 文件嵌入到一个最小的 Android 应用程序中，该应用程序调用 jar 并将结果打印到标准输出。然后，您将构建该 APK 并按照我上面的描述安装/运行它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-01T22:34:21.910

> 是否可以在 android 中运行可执行的 jar 文件（基于命令行）？

可能，检查“adb shell input” shellscript -> “exec app_process”

```
shell@flo:/ $ ls -l /system/bin/input                                          
-rwxr-xr-x root     shell         203 2015-11-10 01:44 input 
```

[https://android.googlesource.com/platform/frameworks/base/+/oreo-release/cmds/input/input](https://android.googlesource.com/platform/frameworks/base/+/oreo-release/cmds/input/input)

```
# Script to start "input" on the device, which has a very rudimentary
# shell.
#
base=/system
export CLASSPATH=$base/framework/input.jar
exec app_process $base/bin com.android.commands.input.Input "$@" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-28T08:18:20.253

在 Android 中运行 jar 的唯一问题是 JVM，它在 Android 下是一个 Dalvik VM，它不能运行 JSE 编译的 java 程序。

但是，您可以使用在 Android 下运行整个 JSE JVM 的 JBed：http: [//jbed.en.malavida.com/android/](http://jbed.en.malavida.com/android/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-30T06:02:38.647

您不能直接`jar files`在 android 中运行，因为 android 运行在 android 上`Dalvik Virtual Machine`，而要运行 jar 文件，您需要`Java Runtime Environment`具有`Java Virtual Machine`.

**注意：您将需要 root 访问权限和具有 root 访问权限的文件管理器：**
但您可以运行它，因为您必须安装应用程序`Jbed.apk`并复制`lib` `jbed.so`到您的`system\lib`文件夹。然后，您可以从您的 Android 设备上的应用程序运行 jar/jad 文件。

这是 jbed 的链接：http: [//jbed.en.malavida.com/android/](http://jbed.en.malavida.com/android/)

*在此处阅读有关 XDA 开发人员的完整帖子：* [XDA 开发人员，在 Android 上运行 jar/jad](https://forum.xda-developers.com/showthread.php?t=2325619)

很少有帖子声称有办法将 jar 转换为 apk，我自己没有尝试过： [jar to apk](http://www.netmite.com/android/srv/1.7/getapk.php) 如果它不起作用，您可能需要使用模拟器：

# ruby-on-rails-3 - bootstrap-rails gem 生产错误

> ID：12905013
> 
> 赞同：2
> 
> 时间：2012-10-15T22:38:31.053
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, production-environment

嗨，我有一个使用 twitter bootstrap 的基本设计注册表单，我正在尝试将其投入生产。它在开发中运行良好。生产中的引导资产存在问题。

我已经在没有 group => assets 和 the:git => ... 部分的情况下尝试过它，但它仍然无法正常工作。

当我有

```
config.assets.compile = true 
```

该站点在没有引导样式的情况下加载。当它设置为 false 时，我收到一个错误 = 很抱歉，但出了点问题。

这是我正在使用的宝石：

```
gem 'twitter-bootstrap-rails', :group => :assets, :git => 'http://github.com/seyhunak/twitter-bootstrap-rails.git': 
```

我的生产日志：

由 HomeController#index 处理为 HTML

```
 Rendered home/index.html.erb within layouts/application (21.8ms)
Compiled bootstrap_and_overrides.css  (916ms)  (pid 31389)
Compiled home.css  (1ms)  (pid 31389)
Compiled application.css  (1209ms)  (pid 31389)
Compiled jquery.js  (5ms)  (pid 31389)
Compiled jquery_ujs.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-transition.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-alert.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-modal.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-dropdown.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-scrollspy.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-tab.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-tooltip.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-popover.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-button.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-collapse.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-carousel.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-typeahead.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap/bootstrap-affix.js  (0ms)  (pid 31389)
Compiled twitter/bootstrap.js  (211ms)  (pid 31389)
Compiled home.js  (136ms)  (pid 31389)
Compiled application.js  (426ms)  (pid 31389)
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.4ms)
Completed 200 OK in 5535ms (Views: 5520.6ms | ActiveRecord: 12.9ms)

Started GET "/users/sign_in" for  at 2012-10-15 14:57:24 -0400
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.html.erb (2.1ms)
  Rendered devise/sessions/new.html.erb within layouts/application (213.0ms)
  Rendered layouts/_navigation.html.erb (1.7ms)
  Rendered layouts/_messages.html.erb (0.6ms)
Completed 200 OK in 337ms (Views: 295.6ms | ActiveRecord: 11.8ms)

Started GET "/users/sign_in" fo at 2012-10-15 15:38:17 -0400
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.html.erb (2.0ms)
  Rendered devise/sessions/new.html.erb within layouts/application (211.1ms)
Compiled bootstrap_and_overrides.css  (871ms)  (pid 415)
Compiled home.css  (1ms)  (pid 415)
Compiled application.css  (1199ms)  (pid 415)
Compiled jquery.js  (5ms)  (pid 415)
Compiled jquery_ujs.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-transition.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-alert.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-modal.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-dropdown.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-scrollspy.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-tab.js  (0ms)  (pid 415)
Compiled twitter/bootstrap/bootstrap-tooltip.js  (0ms)  (pid 415)
"production.log" 755L, 39196C 
```

我正在运行一个 linode ubunto 10.04 lts 服务器、nginx、独角兽并使用 capistrano 进行部署

这几天我一直在尝试解决这个问题。非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:41:18.003

正如@Mccannf 在评论中提到的那样，我没有预编译公共资产。

当我运行时： bundle exec rake assets:precompile

我收到一个错误：

/Users/vezu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /Users/vezu/.rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV =生产RAILS_GROUPS=资产耙已中止！数据库配置未指定适配器

然后我跟着这个 Stackoverflow 帖子：[bundle exec rake assets:precompile - 数据库配置没有指定适配器](https://stackoverflow.com/questions/10879587/bundle-exec-rake-assetsprecompile-database-configuration-does-not-specify-ada)

并在 config/application.rb 中添加以下行

config.assets.initialize_on_precompile = false

然后，当我部署到生产环境时，它就起作用了。

# xml - xml中的嵌套for-each循环

> ID：12905014
> 
> 赞同：2
> 
> 时间：2012-10-15T22:38:37.573
> 
> 标签：xml, xslt

我是 XML 新手。我正在尝试创建包含项目详细信息的表和另一个表以包含选项列表上每个订单的客户详细信息。看起来应该很简单，但我只是得到了所有订单上所有项目的列表，这些订单按订单数量重复。我究竟做错了什么？（下面的 XSL 代码...）

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" doctype-system="about:legacy-compat"/>
<xsl:template match="/">

<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8"/>
<link rel="stylesheet" type="css/text" href="style.css"/>
<title>Orders</title>
</head>

<body>
<xsl:for-each select="//order">
<table>
<caption><h3>Order Information</h3></caption>
<thead>
<th align="left">Item Id</th>
<th align="left">Item Description</th>
<th align="left">Quantity</th>
<th align="left">Price</th>
</thead>
<xsl:for-each select="//item">
<tr>
<td align="left"><xsl:value-of select="itemId"/></td>
<td align="left"><xsl:value-of select="itemName"/></td>
<td align="left"><xsl:value-of select="quantity"/></td>
<td align="left"><xsl:value-of select="price"/></td>
</tr>
</xsl:for-each>
</table>
<table>
<caption><h3>Customer Information</h3></caption>
<thead>
<th align="left">Customer Name</th>
<th align="left">Street</th>
<th align="left">City</th>
</thead>
<xsl:for-each select="//item">
<tr>
<td align="left"><xsl:value-of select="customerName"/></td>
<td align="left"><xsl:value-of select="street"/></td>
<td align="left"><xsl:value-of select="city"/></td>
</tr>
</xsl:for-each>
</table>
</xsl:for-each>
</body>
</html>

</xsl:template>
</xsl:stylesheet> 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="Orders.xsl"?>

<orders xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="Orders.xsd">
<order>
<orderId>123</orderId>
<items>
<item>
<itemId>001</itemId>
<itemName>Nylon Rope</itemName>
<quantity>1</quantity>
<price>3.50</price>
</item>
<item>
<itemId>002</itemId>
<itemName>Shovel</itemName>
<quantity>1</quantity>
<price>24.95</price>
</item>
</items>
<customerAddress>
<customerName>Larry Murphy</customerName>
<street>Shallowgrave Lane</street>
<city>Ballymore Eustace, Co. Kildare</city>
</customerAddress>
</order>
<order>
<orderId>124</orderId>
<items>
<item>
<itemId>001</itemId>
<itemName>Whiskey</itemName>
<quantity>1</quantity>
<price>18.50</price>
</item>
<item>
<itemId>002</itemId>
<itemName>Shotgun</itemName>
<quantity>1</quantity>
<price>225</price>
</item>
<item>
<itemId>003</itemId>
<itemName>Cartridge</itemName>
<quantity>1</quantity>
<price>1.85</price>
</item>
</items>
<customerAddress>
<customerName>Enda Kenny</customerName>
<street>A Avenue</street>
<city>Castlebar, Co. Mayo</city>
</customerAddress>
</order>
</orders> 
```

相关 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<xsd:element name="orders">
<xsd:complexType>
<xsd:sequence>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="order"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:element name="order">
<xsd:complexType>
<xsd:sequence>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="items"/>
<xsd:element maxOccurs="1" minOccurs="1" ref="customerAddress"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:element name="items">
<xsd:complexType>
<xsd:sequence>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="item"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:element name="item">
<xsd:complexType>
<xsd:sequence>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="itemId"/>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="itemName"/>
<xsd:element maxOccurs="unbounded" minOccurs="1" ref="quantity"/>
<xsd:element maxoccurs="unbounded" minOccurs="1" ref="price"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:element name="customerAddress">
<xsd:complexType>
<xsd:sequence>
<xsd:element maxOccurs="1" minOccurs="1" ref="customerName"/>
<xsd:element maxOccurs="1" minOccurs="1" ref="street"/>
<xsd:element maxOccurs="1" minOccurs="1" ref="city"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="itemId" type="xsd:string"/>
<xsd:element name="itemName" type="xsd:string"/>
<xsd:element name="quantity" type="xsd:int"/>
<xsd:element name="price" type="xsd:double"/>
<xsd:element name="customerName" type="xsd:string"/>
<xsd:element name="street" type="xsd:string"/>
<xsd:element name="city" type="xsd:string"/>

</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:58:40.920

```
<xsl:for-each select="//order"> 
```

选择`<order>`文档中的所有标签。

```
<xsl:for-each select="//item"> 
```

将同样选择`<item>`文档中的所有标签。这就是为什么你会得到你看到的结果。

你需要的是

```
<xsl:for-each select=".//item"> 
```

解释是`//`它本身只是`descendant-or-self`根元素的意思。`.//`另一方面，表示当前元素（在本例中为`<order>`元素）的后代或自身，因此现在您的项目将被正确分组。

[您可以（并且确实应该）在此处](http://www.w3.org/TR/xpath20/#abbrev)阅读更多相关信息，了解轴和上下文节点对于了解 XSLT/XPath 的工作原理至关重要，并且将为您省去很多痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:58:18.453

不要使用 // - 这样您总是从 xml 文档中选择所有元素，而不是只与上下文节点相关的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:02:57.367

尝试这样的事情（未经测试，也许也用模板/应用模板替换两个内部循环）：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" doctype-system="about:legacy-compat" />
    <xsl:template match="/">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <meta charset="utf-8" />
                <link rel="stylesheet" type="css/text" href="style.css" />
                <title>Orders</title>
            </head>

            <body>
                <xsl:apply-templates select="//order" />
            </body>
        </html>
    </xsl:template>
    <xsl:template match="//order">
        <table>
            <caption>
                <h3>Order Information</h3>
            </caption>
            <thead>
                <th align="left">Item Id</th>
                <th align="left">Item Description</th>
                <th align="left">Quantity</th>
                <th align="left">Price</th>
            </thead>
            <xsl:for-each select="//item">
                <tr>
                    <td align="left">
                        <xsl:value-of select="itemId" />
                    </td>
                    <td align="left">
                        <xsl:value-of select="itemName" />
                    </td>
                    <td align="left">
                        <xsl:value-of select="quantity" />
                    </td>
                    <td align="left">
                        <xsl:value-of select="price" />
                    </td>
                </tr>
            </xsl:for-each>
        </table>
        <table>
            <caption>
                <h3>Customer Information</h3>
            </caption>
            <thead>
                <th align="left">Customer Name</th>
                <th align="left">Street</th>
                <th align="left">City</th>
            </thead>
            <xsl:for-each select="//item">
                <tr>
                    <td align="left">
                        <xsl:value-of select="customerName" />
                    </td>
                    <td align="left">
                        <xsl:value-of select="street" />
                    </td>
                    <td align="left">
                        <xsl:value-of select="city" />
                    </td>
                </tr>
            </xsl:for-each>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

我通常使用模板来实现可重用性：

```
<xsl:template match="Menu">
<xsl:template match="MenuItem"> 
```

然后在我需要它们的地方：

```
<xsl:apply-templates select="/MenuRoot/Menu" />
<xsl:apply-templates select="/MenuRoot/MenuItem" /> 
```

在您的情况下，您可以使用`match="/order/item"`and `match="/order/customer/item"`（只是对结构的疯狂猜测），尝试更具体。

# emacs - 在 OrgMode 中重新绑定键

> ID：12905017
> 
> 赞同：3
> 
> 时间：2012-10-15T22:39:27.347
> 
> 标签：emacs

> **可能重复：**
> [覆盖 EMACS org.mode 中的 Ctrl-TAB](https://stackoverflow.com/questions/4333467/override-ctrl-tab-in-emacs-org-mode)

我正在尝试重新绑定 Cy 以重做。我已经尝试了所有可能的选项：

(global-unset-key (kbd "Cy"))，外部和内部 org 模式挂钩，以及 (define-key org-mode-map (kbd "Cy") nil)。

然而什么都没有。在 OrgMode 之外它表现得非常好，但在里面呢？它猛拉。这实际上并不是我在 OrgMode 中时不起作用的第一个 KeyBinding，它让我感到困惑。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:16:34.740

在神话般的 phils 的快速帮助之后，我偶然发现了两件事： [全局覆盖](https://stackoverflow.com/questions/683425/globally-override-key-binding-in-emacs/1758639) 我目前使用的 Emacs 中的键绑定，以及 [http://www.masteringemacs.org/articles/2011/02/08/mastering-key-bindings- emacs/](http://www.masteringemacs.org/articles/2011/02/08/mastering-key-bindings-emacs/) 我一定会尽快阅读。

谢谢菲尔斯；）

我目前的设置是这样的：

```
(defvar custom-keys-mode-map (make-keymap) "custom-keys-mode keymap.")
(define-minor-mode custom-keys-mode
  "A minor mode so that my key settings override annoying major modes."
  t " my-keys" 'custom-keys-mode-map)
(custom-keys-mode 1)

(defun my-minibuffer-setup-hook ()
  (custom-keys-mode 0))
(add-hook 'minibuffer-setup-hook 'my-minibuffer-setup-hook)

(defadvice load (after give-my-keybindings-priority)
  "Try to ensure that my keybindings always have priority."
  (if (not (eq (car (car minor-mode-map-alist)) 'custom-keys-mode))
      (let ((mykeys (assq 'custom-keys-mode minor-mode-map-alist)))
        (assq-delete-all 'custom-keys-mode minor-mode-map-alist)
        (add-to-list 'minor-mode-map-alist mykeys))))
(ad-activate 'load)
(define-key custom-keys-mode-map (kbd "<C-key>") 'some-command) 
```

# c - 显示此符号 ╠ 而不是所需的字符

> ID：12905027
> 
> 赞同：0
> 
> 时间：2012-10-15T22:40:17.410
> 
> 标签：c, arrays, 2d

这是一些代码的片段。而不是显示我正在检查的字符，而是显示╠。

```
while (c!= EOF)
{
    c = getc(fp);
    if (c==32 || c==33 || (c>=97 && c<=122) || c==35)
    j++;
    if(j==clns){
    i++;
    j=0;
    mA[i][j]=c;
    }

}

for (i = 0; i < 10; i++) {
    for (j = 0; j < 20; j++) {
        printf("%c", mA[i][j]);
    }
    printf("%c\n", mA[i][j]);
} 
```

在此先感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:43:16.057

你只写信给`mA[i][0]`：

```
if(j==clns){
    i++;
    j=0;
    mA[i][j]=c;
} 
```

所以你正在打印恰好在数组中的随机垃圾。将作业移出`if`.

# javascript - 初始化 Javascript 对象

> ID：12905028
> 
> 赞同：-1
> 
> 时间：2012-10-15T22:40:23.450
> 
> 标签：javascript, javascript-objects

基于初始化 Javascript 对象的两种方式，哪一种更好，哪种更快？

```
// first
options = {
    prop1: 1,
    prop2: 2
}

//second
Secoptions = {};
Secoptions.prop1 = 1;
Secoptions.prop2 = 2;

(function($) {
    $(document).ready(function() {
        //based on the two ways of initializing a javascript object
        //which one is the better one and faster 
        // first
        options = {
            prop1: 1,
            prop2: 2
        }

        //second
        Secoptions = {};
        Secoptions.prop1 = 1;
        Secoptions.prop2 = 2;

    });
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:52:55.460

第一个选项似乎要快一点。在我使用 IE6 的非常旧的计算机中，第一个大约需要 0.011 毫秒才能完成，第二个大约需要 0.0131 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:33:33.947

这取决于您在哪里使用变量。如果它们在加载过程中被使用，那么第一种方法会更好。老实说，性能方面两者都是一样的。

# php - wp修剪功能

> ID：12905031
> 
> 赞同：0
> 
> 时间：2012-10-15T22:40:39.187
> 
> 标签：php, html, wordpress

好的，我目前有此代码。

```
<?php

query_posts('category_name=widgets2');

echo "<div id='widgets-wrapper2'><div id='marginwidgets' style='overflow: auto; max-    width: 100%; height: 450px; max-height: 100%; margin: 0 auto;'>";
while (have_posts()) : the_post();
echo "<div class='thewidgets2'>";

echo wp_trim_words( the_content(), $num_words = 0, $more = "..." );

echo '<div style="height: 20px;"></div><a class="button2"     href="'.get_permalink().'">Read More</a></div>';
endwhile;
echo "</div></div>";

?> 
```

如您所见，它从类别名称 widgets2 中获取所有帖子，然后它应该显示它。

这条线

```
echo wp_trim_words( the_content(), $num_words = 100, $more = "..." ); 
```

应该将 the_content() 中的单词修剪为 100 并在结尾字符处添加摘录，但不幸的是它不起作用，而是只显示看起来根本没有修剪的全部内容。

希望这里有人能弄清楚。我对任何建议、建议和所有相关想法都持开放态度，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:57:12.557

因为 WordPress 功能`the_content()`会回显内容。请改用该功能`get_the_content()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:57:22.887

> 免责声明 - 我对 WordPress 没有太多经验（但我看到你使用的是 PHP）

本地 PHP 解决方案也可能对您有所帮助。该`substr()`函数返回字符串的一部分 -

```
echo substr($longContent, 0, $numOfChars) . '...'; 
```

参考 -

*   [`substr()`](http://php.net/manual/en/function.substr.php)

# ios - 移动视图并更改 uiimageview 的图像不执行视图的移动

> ID：12905032
> 
> 赞同：0
> 
> 时间：2012-10-15T22:40:44.397
> 
> 标签：ios, cocoa-touch, uiview, uiimageview

我有一个非常简单的情况：在一个视图中，我有一个 UIImageView 和一个 UILabel。在某个时刻，我想更改标签的位置，并以相同的方法更改 uiimageview 的图像。

```
self.myLabel.center = CGPointMake(158, 230);
self.myImageView.image = [UIImage imageNamed:@"anotherImage.png"]; 
```

但是这段代码只会改变图像，不会移动标签。如果我注释掉第二行并运行代码，那么标签将改变位置。

有人知道为什么不工作吗？或者这个问题的有效解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:56:52.797

我刚刚测试了上面的代码，它工作正常。当键盘弹出时，标签移动并且图像变化良好。您程序中的问题必须很简单，但不是上面的代码。

现在我们已经有了 iOS6，每当我看到有关`frame`通过代码完成坐标更改似乎无法正常运行的帖子时，我立即怀疑自动布局设置：

![在此处输入图像描述](../Images/b32a7cab5a94fbc0b4e0b20db1f756c1.png)

确保取消选中该选项，否则基于约束的逻辑将覆盖任何通过代码手动调整设置的尝试。（或者，如果您想使用 Autolayout，而不是设置框架坐标，则以编程方式调整您的约束以获得所需的结果。）

无论如何，听起来那是你的问题。很高兴你解决了！

# java - android.content.res.Resources$NotFoundException: 来自 xml 类型布局资源 ID #0x109001b 的文件 res/layout/action_menu_layout.xml

> ID：12905036
> 
> 赞同：1
> 
> 时间：2012-10-15T22:41:34.633
> 
> 标签：java, android, xml, eclipse

不确定到底是什么问题。我在 logcat 中看到 action_menu_layout.xml，但我不确定它来自哪里。我没有在我的 androidmanifest.xml 文件中看到它。我想我需要从某个地方删除这个 xml 引用，但我不确定从哪里开始？

这是我的 main.java：

```
package com.smith.blackjack;

import android.os.Bundle;
import android.app.Activity;
import android.content.res.AssetManager;
import android.graphics.drawable.Drawable;

import java.io.IOException;
import java.io.InputStream;

import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class Main extends Activity {

private ImageView dealerCard0;
private ImageView dealerCard1;
private ImageView dealerCard2;
private ImageView dealerCard3;
private ImageView playerCard0;
private ImageView playerCard1;
private ImageView playerCard2;
private ImageView playerCard3;
private ImageView imgResult;
private Button btnDeal;
private Button btnDraw;
private Button btnHold;
private DeckOfCards deckOfCards;
private int[] dealerValues;
private int dealerSum;
private int dealerCardNumber;
private int[] playerValues;
private int playerSum;
private int playerCardNumber;
private InputStream dealerHiddenCard;
private Card dealerCard;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dealerCard0 = (ImageView) findViewById(R.id.dealerCard0);
    dealerCard1 = (ImageView) findViewById(R.id.dealerCard1);
    dealerCard2 = (ImageView) findViewById(R.id.dealerCard2);
    dealerCard3 = (ImageView) findViewById(R.id.dealerCard3);

    playerCard0 = (ImageView) findViewById(R.id.playerCard0);
    playerCard1 = (ImageView) findViewById(R.id.playerCard1);
    playerCard2 = (ImageView) findViewById(R.id.playerCard2);
    playerCard3 = (ImageView) findViewById(R.id.playerCard3);

    imgResult = (ImageView) findViewById(R.id.imgResult);

    btnDeal = (Button) findViewById(R.id.deal);
    btnDraw = (Button) findViewById(R.id.draw);
    btnHold = (Button) findViewById(R.id.hold);

    btnDeal.setOnClickListener(btnDealListener);
    btnDraw.setOnClickListener(btnDrawListener);
    btnHold.setOnClickListener(btnHoldListener); 

    resetGame();

}

private void resetGame(){

    AssetManager assets = getAssets();
    dealerValues = new int[4];
    playerValues = new int[4];
    dealerSum = 0;
    playerSum = 0;
    dealerCardNumber = 0;
    playerCardNumber = 0;
    for (int i = 0; i < 4; i++) {
        dealerValues[i] = 0;
        playerValues[i] = 0;
    }

    try {
        InputStream stream; 
        stream = assets.open("cardback.png");
        Drawable cardImage = Drawable.createFromStream(stream,  "cardback");
        dealerCard0.setImageDrawable(cardImage);
        dealerCard1.setImageDrawable(cardImage);
        dealerCard2.setImageDrawable(cardImage);
        dealerCard3.setImageDrawable(cardImage);
        playerCard0.setImageDrawable(cardImage);
        playerCard1.setImageDrawable(cardImage);
        playerCard2.setImageDrawable(cardImage);
        playerCard3.setImageDrawable(cardImage);
        imgResult.setImageDrawable(cardImage);
        deckOfCards = new DeckOfCards();
        deckOfCards.shuffle();
        assets.close();
    }
    catch (IOException e){
        Log.e("Reset Game", "Error Loading", e);
    }
}

public OnClickListener btnDealListener = new OnClickListener()
{
//      @Override 
    public void onClick(View v) {

        try {
            AssetManager assets = getAssets();
            InputStream stream;

            // first player card
            Card newCard;
            newCard = deckOfCards.dealCard();
            playerValues[playerCardNumber] = newCard.faceValue;
            playerCardNumber++;             
            stream = assets.open(newCard.File);
            Drawable cardImage = Drawable.createFromStream(stream, newCard.File);
            playerCard0.setImageDrawable(cardImage);
            assets.close();

            // second player card
            newCard = deckOfCards.dealCard();
            playerValues[playerCardNumber] = newCard.faceValue;
            playerCardNumber++; 
            stream = assets.open(newCard.File);
            cardImage = Drawable.createFromStream(stream, newCard.File);
            playerCard1.setImageDrawable(cardImage);
            assets.close();

            // first dealer card hidden
            newCard = deckOfCards.dealCard();
            dealerCard = newCard;
            dealerValues[dealerCardNumber] = newCard.faceValue;
            dealerCardNumber++;
            dealerHiddenCard = assets.open(newCard.File);
            stream = assets.open("cardback.png");
            cardImage = Drawable.createFromStream(stream,  "cardback");
            dealerCard0.setImageDrawable(cardImage);
            assets.close();

            // second dealer card open
            newCard = deckOfCards.dealCard();
            dealerValues[dealerCardNumber] = newCard.faceValue;
            dealerCardNumber++;
            stream = assets.open(newCard.File);
            cardImage = Drawable.createFromStream(stream,  newCard.File);
            dealerCard1.setImageDrawable(cardImage);
            assets.close();
        }
        catch (IOException e){
            Log.e("Deal", "Error Loading", e);
        }

    };
};

public OnClickListener btnDrawListener = new OnClickListener()
{
//      @Override 
    public void onClick(View v) {
        try {
            AssetManager assets = getAssets();
            InputStream stream;

            // get next player card
            Card newCard;
            newCard = deckOfCards.dealCard();
            playerValues[playerCardNumber] = newCard.faceValue;
            playerCardNumber++;             
            stream = assets.open(newCard.File);
            Drawable cardImage = Drawable.createFromStream(stream, newCard.File);
            switch (playerCardNumber){
            case 3:
                playerCard2.setImageDrawable(cardImage);
            case 4:
                playerCard3.setImageDrawable(cardImage);
            }
            assets.close();
        }
        catch (IOException e){
            Log.e("Draw", "Error Loading", e);
        }
    };
};

public OnClickListener btnHoldListener = new OnClickListener()
{
//      @Override 
    public void onClick(View v) {
        Drawable cardImage;
        // evaluate player hand
        playerSum = evaluate(playerValues);
        if (playerSum > 21){
            // player losses
        }
        // flip over the dealer hidden card
        cardImage = Drawable.createFromStream(dealerHiddenCard, dealerCard.File);
        Card newCard;
        InputStream stream;
        AssetManager assets = getAssets();
        for (int i=2; i<4; i++){
            dealerSum = evaluate(dealerValues);
            if (dealerSum < 16 ) {
                newCard = deckOfCards.dealCard();
                dealerValues[dealerCardNumber] = newCard.faceValue;
                dealerCardNumber++;
                try {
                    stream = assets.open(newCard.File);
                    cardImage = Drawable.createFromStream(stream,  newCard.File);
                    switch (dealerCardNumber){
                    case 3:
                        dealerCard2.setImageDrawable(cardImage);
                    case 4:
                        dealerCard3.setImageDrawable(cardImage);
                    }
                    assets.close();
                }
                catch (IOException e){
                    Log.e("Draw", "Error Loading", e);
                } 
                if (dealerSum < playerSum) {
                    // player wins
                }
                if (dealerSum > playerSum){
                    // dealer wins
                }
                if (dealerSum == playerSum){
                    // it is a draw
                }
            }

        }

    };
};

public int evaluate (int[]values)   {
    int sumCards = 0;
    for (int i = 0; i < 4; i++){
        sumCards += values[i];
    }
    if (sumCards > 21) {
        for (int i = 0; i < 4; i++){
            if (values[i] == 11) {
                values[i] = 1;
                sumCards -= 10;
                continue;
            }
        }
    }
    return sumCards;
}

} 
```

这是我的日志：

```
10-15 21:59:08.448: E/AndroidRuntime(3070): FATAL EXCEPTION: main
10-15 21:59:08.448:E/AndroidRuntime(3070):android.content.res.Resources$NotFoundException: File res/layout/action_menu_layout.xml from xml type layout resource ID #0x109001b
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2145)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2100)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.content.res.Resources.getLayout(Resources.java:852)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.view.menu.BaseMenuPresenter.getMenuView(BaseMenuPresenter.java:70)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.view.menu.ActionMenuPresenter.getMenuView(ActionMenuPresenter.java:148)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.widget.ActionBarView.setMenu(ActionBarView.java:427)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:385)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:747)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2913)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.os.Handler.handleCallback(Handler.java:615)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.os.Looper.loop(Looper.java:137)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at java.lang.reflect.Method.invokeNative(Native Method)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at java.lang.reflect.Method.invoke(Method.java:511)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at dalvik.system.NativeStart.main(Native Method)
10-15 21:59:08.448: E/AndroidRuntime(3070): Caused by: java.lang.RuntimeException: Assetmanager has been closed
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:485)
10-15 21:59:08.448: E/AndroidRuntime(3070):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2127)
10-15 21:59:08.448: E/AndroidRuntime(3070):     ... 18 more 
```

这是我的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.smith.blackjack"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:49:43.770

始终检查根本原因，即链中的最后一个异常：
`Caused by: java.lang.RuntimeException: Assetmanager has been closed`

您可能会在 Java 代码中弄乱资源，环顾四周，或者 Activity 生命周期可能有问题，有什么“hacky”静态的吗？

# maven - 达到su refire forkedProcessTimeoutInSeconds阈值后如何让maven继续构建模块

> ID：12905037
> 
> 赞同：1
> 
> 时间：2012-10-15T22:41:37.613
> 
> 标签：maven, timeout, maven-surefire-plugin

在多模块 mvn 3.0 构建中，我将 forkedProcessTimeoutInSeconds 设置为一小时。如果模块 A 中的测试挂起，我会达到一定的阈值，这将导致构建失败并跳过剩余的模块。我们使用一个 junit 超时，它应该会在此之前终止挂起的测试，但在某些情况下会遇到这个问题。在我调查对我们的 junit 跑步者的增强时，我想保持我的构建运行。

当前命令行： `mvn clean install -Dmaven.test.failure.ignore`

*   如何更改确定超时行为以移至下一个模块并继续构建？
*   有没有人有测试一个人的junit框架的技巧？

我打算回顾一下万无一失的项目的集成测试，以了解这两个项目的想法。我计划有一个由特定配置文件激活的 junitsystest 模块，这样我就可以在我的构建之外测试各种有问题的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:24:28.280

根据[Mastering The Maven Command Line – 管理故障](http://blog.akquinet.de/2010/06/07/mastering-the-maven-command-line-%E2%80%93-managing-failures/) **--fail-at-end**或**--fail-never**将提供所需的结果。继续报告 Surefire 超时，但不会停止构建。

从长远来看不推荐，因为它会延长糟糕的构建时间

`mvn clean install -Dmaven.test.failure.ignore --fail-never`

# javascript - jQuery 替代 bind('load') 用于图像

> ID：12905038
> 
> 赞同：-1
> 
> 时间：2012-10-15T22:41:44.357
> 
> 标签：javascript, jquery, ajax, deprecated

> **可能重复：**
> [图像加载时的 jQuery 回调（即使图像被缓存）](https://stackoverflow.com/questions/3877027/jquery-callback-on-image-load-even-when-the-image-is-cached)

因此该`.load()`方法在 jQuery 中已被弃用。`load()`是 `bind('load', function) 的快捷方式。

来自[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)：

> **与图像一起使用时加载事件的注意事项**
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> 它不能始终如一地工作，也不能可靠地跨浏览器 如果图像 src 设置为与以前相同的 src，则在 WebKit 中无法正确触发在浏览器的缓存中`

如何始终如一地执行图像加载功能？我当前的代码如下所示：

```
$(newImage).bind('load', function() {
    createSlices(slide); 
}); 
```

但是在阅读了文档之后（虽然我没有注意到任何问题），我担心它可能不会对某些用户触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:48:55.983

试试这个插件人：叫`waitforimages`插件：[https](https://github.com/alexanderdickson/waitForImages) ://github.com/alexanderdickson/waitForImages （*向下滚动链接你会看到各种高级使用*） -*演示* [http://jsfiddle.net/FZ7Xy/](http://jsfiddle.net/FZ7Xy/)

希望能满足需求`:)`

**代码**

```
$('selector').waitForImages(function() {
    // All descendant images have loaded, now slide up.
    $(this).slideUp();  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:48:04.947

```
var img = new Image();  
img.onload = function() {

} 

img.src=  src-image 
```

上面的代码适用于所有浏览器，甚至没有 jquery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:48:26.617

你担心是对的，如果图像被缓存，IE7/8 有时会无法触发*加载事件。*

一种技术是在绑定加载事件后立即检查图像是否完整：

```
$(newImage).bind('load error', function() {
    createSlices(slide); 
});

// check if the image is immediately complete (cached)
if (newImage.complete || typeof newImage.complete === 'undefined') {
    createSlices(slide);
} 
```

我已经成功测试过：

*   即 7/8/9/10
*   FF4+
*   铬（最新）
*   野生动物园 5+

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:03:27.933

有一个很棒的库可以处理这个问题：[https ://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

我已经在生产中使用它并且效果很好。非常可靠，没有一个投诉。

# rabbitmq - 是否可以为一把铲子配置多个队列？

> ID：12905040
> 
> 赞同：0
> 
> 时间：2012-10-15T22:41:59.613
> 
> 标签：rabbitmq

我有一个 web 服务，它接受可以使用它们定义的任何队列发送到 RabbitMQ 集群的消息。这样前端开发人员就可以通过 javascript 发送消息。

我想让 webservice 更加健壮，这样当我们遇到网络问题时，webservice 仍然可以接受消息，然后在网络备份时处理它们。经过一些初步阅读，Shovel 插件似乎应该很好地处理这个问题。

我在想的是在打开铲子的 web 服务盒上安装 RabbitMQ 的本地实例。然后我可以通过本地 RabbitMQ 实例发送所有消息，并让它将所有消息推送到集群并处理网络问题。

我的问题是在查看文档之后，似乎我必须在铲子配置文件中配置我想要转发到的每个队列。如果是这种情况，我不确定这是否可行，因为我们允许客户端通过 web 服务动态定义队列。

我想让 web 服务获取消息，将它们传递给本地 rmq 实例，并让它使用相同的队列/exachanges/等将消息传递给集群。

有没有人试过这个或者可以解释一下铲子插件是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:01:44.603

您是否考虑过将消息发送到交换而不是队列。如果您需要这种灵活性，请将所有消息发送到一个交换器，可能是一个主题交换器。然后让消费者处理来自交换的不同消息或不同队列。发送到一个交易所将使配置铲子变得相当容易。

# sql - 与用户名匹配并具有最高日期的 SQL 更新条目

> ID：12905041
> 
> 赞同：0
> 
> 时间：2012-10-15T22:42:09.670
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有一个表`saved_offers`。我想要做的是找到与用户名匹配的所有整体，并在这些结果中找到具有最高`date`字段的那个。

这是一个更简单的例子：假设我们有一个 table `baseball_players`。我想找到为洋基队效力的击球率最高的球员，并将他的`description`字段更新为“拥有最高的击球率”。

无论如何，我都不是 SQL 专家，所以如果这过于简单，我深表歉意。

我已经在更新语句中尝试了几乎所有嵌套 SELECT 和 ORDERBY 的组合，但到目前为止我无法找到有效的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:49:07.863

```
update t a set x = 1 where
a.user = 1 and a.id =
(select top 1 b.id from t b where b.user = a.user and b.date =
(select max(c.date) from t c where c.user = b.user) order by b.id) 
```

如果最大日期出现在多条记录中，则只会更新其中一条。当您想要打破最高值之间的平局并且不在乎选择哪个时很有用。

# android - 检测在 API 级别 11 上关闭了 PopupMenu

> ID：12905048
> 
> 赞同：6
> 
> 时间：2012-10-15T22:42:57.033
> 
> 标签：android, popupmenu

我的应用程序中有这个[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html#dismiss%28%29)，想知道它何时关闭。使用 API14+，当使用`setOnDismissListener()`. 但是，我需要知道 PopupMenu 何时从 API11+ 关闭，因此我无法使用侦听器，需要替代侦听器。

我已经尝试过：

*   覆盖`dismiss()`PopupMenu的方法，但关闭时不调用。
*   使用`PopupMenu.OnMenuItemClickListener`，但当用户在菜单外单击（以关闭它）或单击“返回”时，它不会被激活。

我没有任何其他想法来检测菜单已关闭。所以我希望别人有一个聪明的把戏。否则我无法使用 PopupMenu ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:15:03.817

You can try to override method

```
public void onCloseMenu(MenuBuilder menu, boolean allMenusAreClosing) 
```

of `PopupMenu` class. Exactly this method is calling `setOnDismissListener()` internally in API 14+. But this is not easy to do. Problem is what class `com.android.internal.view.menu.MenuBuilder` is not included to Android SDK, so you will not be able to compile your code if you will trying to import this class.

However, you can create your own "fake" implementation of this class, place it in package `com.android.internal.view.menu`, make a `.jar` file with it, copy this "fake library" to `libs` folder and set scope of this library in Project Settings of IntelliJ IDEA as "provided". This means that classes in this `jar` file already have real devices (what is true) and you only need them to compile your code. Main idea here - your fake `MenuBuilder` should be in classpath for `javac` compilation, but should **not** be included in resulting `.apk` file.

This is not easy solution, but it should work.

# java - 简单数组的问题

> ID：12905049
> 
> 赞同：1
> 
> 时间：2012-10-15T22:43:02.680
> 
> 标签：java, arrays

我正在为我的编程课程编写一个非常简单的方法，但遇到了一个我在笔记中找不到解决方案的问题。

你看我应该创建一个方法来生成一个任意长度的数组，其中每个连续值都是最后一个（利率）的倍数。问题是我找不到为什么我的代码不起作用，它编译但不打印我想要的。

而不是打印带有（组成值）之类的数组：

`[1, 5, 25, 125]`

它打印出晦涩的文本，例如：

```
[D@64bd4e3c or [D@7041a12f 
```

有人可以帮忙吗？下面是我的代码图像的链接：

[我的代码](https://imgur.com/Phb7Q)

![我的代码](../Images/3cca11480ed6ce1a34abee6c0f36b223.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T22:45:13.977

```
System.out.print(Statements)

is essentially System.out.println(Statements.toString()) ; 
```

它打印 Statements 指向的地址。

```
[D@64bd4e3c" or "[D@7041a12f" As you may have observed changes because the location of the array in memory changes. Hence the address is different or may be the same if reused. 
```

您需要遍历`Statements`.

在伪代码中：

```
for i to Statements.length
  print Statements[i] 
```

这是一个很好的[链接](http://www.javaclass.info/classes/java-array/array-examples-demonstration-and-code-snippets.php)来帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T22:51:23.220

要在 java 中打印数组，请使用：

```
System.out.println(java.util.Arrays.toString(Statements)); 
```

希望这可以帮助！

# xml - Flex TextArea - 从 Word 复制/粘贴 - xml 解析中的 unicode 字符无效

> ID：12905054
> 
> 赞同：1
> 
> 时间：2012-10-15T22:43:46.487
> 
> 标签：xml, regex, apache-flex, xml-parsing, textarea

编辑：

请访问这里：

[Flex textArea 删除/替换无效的小方块](https://stackoverflow.com/questions/13020958/flex-textarea-remove-replace-invalid-little-squares)

似乎是问题所在，需要为此找到解决方案。

原来的：

我们有一个应用程序，用户可以在其中创建电子邮件并将其发送给不同的用户。我们将电子邮件消息创建为 XML 消息（发件人、目的地、主题、正文等）并将其放入队列中。

另一个应用程序接收消息，对其进行解析并发送电子邮件。我们无法控制它。

现在问题出在测试期间，我们的测试人员从 Word 中复制/粘贴了一些文本并使用了它。现在可能有一些无效字符（在新行或制表符上）在解析器中失败。错误是：

```
Invalid character in attribute value BODY (Unicode: 0x1A) 
```

所以现在我们需要防止发送这些无效字符。所以我尝试使用 textArea 限制。在creationComplete上是这样的：

```
contentTextArea.restrict = "A-Z a-z 0-9 .,!@#$%*-+[]{}()/' \u2424\\"; 
```

但不起作用。当我删除 \u2424\ 它可能有效，但它会删除所有新行。那么我需要使用正则表达式替换吗？

对此的任何帮助将不胜感激。

尝试的文字是：

```
One area where the applications differ greatly is security.  Adding or removing a Permission within a Role does not require a deployment, simply a ‘data fix’.

During development it was communicated that the audience of users .  As such there was no mechanism constructed to migrate between the two systems.  The purpose of this document is to outline two strategies for bring the user base between the two applications into sync. 
```

此文本上有制表符/换行符等。

非常感谢

哈里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:36:18.887

我能够通过使用 textArea changedHandler 只允许某些字符来处理它：

```
if (event.operation is PasteOperation)
    {
        event.preventDefault();
        var txt:String = Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT).
                        toString().replace(/[^A-Za-z0-9\s$%&*!@-_().]/ig, "");
             ......
    } 
```

# continuous-integration - Teamcity 7.1 的默认电子邮件服务器是什么？

> ID：12905060
> 
> 赞同：0
> 
> 时间：2012-10-15T22:44:18.147
> 
> 标签：continuous-integration, teamcity, teamcity-7.0

在没有任何更改的情况下，我们的持续集成服务器（Teamcity 7.1 服务器）停止发送电子邮件通知。到目前为止，我刚刚使用了默认的 teamcity 电子邮件配置，它是这样的：

```
SMTP host: mail 
SMTP port: 25 
Send email messages from: Teamcity 
SMTP login: <blank> 
SMTP password: <blank>
Secure connection: none 
```

去年左右工作得很好。现在我正在尝试诊断出什么问题，但我真的不知道上面的配置在做什么......它是否指向与 Teamcity 捆绑在一起的内置邮件服务器？是指向公司的交换服务器吗？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:20:06.167

Teamcity 没有任何捆绑的邮件服务器。此配置指向您公司的 SMTP 服务器。有时，SMTP 服务器的名称是“mail”。因此 TC 尝试连接到 mail:25 并“来自”“Teamcity”发送消息

请检查 SMTP 服务器的身份验证设置是否被修改（例如，现在禁止匿名访问）。另请检查“teamcity-server.log”以获取与发送通知相关的错误消息。

# javascript - 如何自定义 shadowbox.js rev 标题？

> ID：12905061
> 
> 赞同：5
> 
> 时间：2012-10-15T22:44:29.190
> 
> 标签：javascript, css, shadowbox

我已经为使用“rev”内联标签的 shadowbox 实现了一个标题解决方案。

在 shadowbox.js 添加...

```
...get("sb-caption").innerHTML=obj.link.rev||"";... 
...<div id="sb-caption"></div>... 
```

在 shadowbox.css 中，将以下内容添加到文件底部...

```
#sb-info,#sb-info-inner{height:56px;line-height:20px;} 
#sb-caption {clear:both;font-size:90%;height:auto;line-height:12px;color:#fff;} 
```

在您的页面标记中添加 rev 属性（是的，它是一个有效的属性，如 rel！）到链接...标题文本进入 rev 属性...

```
<a href="myimage.jpg" rel="shadowbox" title="My Image" rev="Your caption goes here...">My Image</a> 
```

就是这样……享受吧！

在这里解释更多：http: [//shadowbox.1309102.n2.nabble.com/Captions-td2643307.html](http://shadowbox.1309102.n2.nabble.com/Captions-td2643307.html)

这是一件很容易实现的事情。

但是，我创建了自己的 CSS ......

```
#sb-caption{text-align:right;line-height:22px;color:#333;position:absolute;bottom:35px;right:35px;background:rgba(255,255,255,0.3);text-shadow: 1px 1px 1px #fff;display:block; padding:10px 20px 10px 50px;z-index:10;} 
```

**这一切都很好，但是，我发现了一个问题。**

当图像没有 rev 时，#sb-caption div 无论如何都会出现，作为一个半透明的白色块，大小为 20x70 像素（与填充相同）我知道我的填充设置是导致问题。

我想知道是否有人可以帮助我解决问题。如果未指定 rev=""，则告诉 shadowbox 不显示#sb-caption 的东西。

**任何人都可以想出一个解决这个问题。**

可能是这些方面的东西？

```
<script type="text/javascript">
  Shadowbox.init({
  });
  var Shadowbox = window.parent.Shadowbox;
  if (getElementById('sb-caption').innerHTML == '')
  getElementById('sb-caption').style.display = 'none';
</script> 
```

......但是，这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:56:26.700

你很接近，但你可以直接在 shadowbox.js 中处理这个（如果你要改变它）。插入这个

```
ad("sb-caption").style.display = (ad("sb-caption").innerHTML == "") ? 'none' : 'block' ; 
```

紧接着

```
ad("sb-caption").innerHTML=aJ.link.rev||""; 
```

你就完成了。我认为它的作用很明显：每次打开 Shadowbox 时，都会检查 id="sb-caption" 元素中的内容。如果没有内容将其显示设置为无，否则阻止。

# architecture - 将顺序内聚转变为功能内聚？

> ID：12905070
> 
> 赞同：4
> 
> 时间：2012-10-15T22:45:30.533
> 
> 标签：architecture, theory, ooad, cohesion

如[本网站](http://pages.cpsc.ucalgary.ca/~eberly/Courses/CPSC333/Lectures/Design/cohesion.html#procedural)所述，

> 具有（仅）程序凝聚力的模块是支持不同且可能不相关的活动的模块，其中控制从一个活动传递到下一个活动。Page-Jones 给出了一个模块示例（其名称可能类似于“准备假日餐：”

*   清洁前一餐的餐具
*   准备烤火鸡
*   打电话
*   洗澡
*   切菜
*   设置表

现在我的问题是，如果这些活动中的每一个，即打电话，都被提取到它们自己的方法中，但仍然以相同的顺序调用，即

```
 private void PrepareForHolidayMeal()
    {
    CleanUtensilsfromPreviousMeal();
    PrepareTurkeyforRoasting();
    ...
    SetTable();
    } 
```

这种方法仍然是程序凝聚力的一个例子吗？或者它是否在功能上具有凝聚力，因为它支持执行一项与问题相关的任务的活动，在这种情况下是准备一顿饭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:57:12.530

这是一个非常有趣的问题，是的，答案是相对的，取决于我们理解事物的方式 [写在文章中] 以及它们如何与作者的意思相对应。

特别是在程序凝聚力和功能凝聚力之间，存在细微差别：程序凝聚力是包含彼此无关的步骤的东西，即程序没有“目标”，这是可重复的，需要“固定定义”和重复使用。然而，功能内聚基本上是一种功能（可能接受输入并给出输出），它可以用于不同的输入，并且在重用时会产生正确的输出（取决于输入）。

结论，根据您的问题：不，将每个方法放在单独的方法中并以相同的顺序调用它们不会将其从过程更改为功能，除非您的过程成为一个真正具有某些“目标”的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:07:10.447

有充分的理由在您的示例中省略了电话。这是不相关的任务之一。如果您假设电话仍在“...”中，那么整个事情将再次失去凝聚力。否则，您可能会争辩说所有其他活动都是准备一顿饭所必需的。这可能会引发讨论“CleanUtensilsfromPreviousMeal”是否在此处实际上有效，因为此活动可能仅在之前没有清理的情况下是必需的。StackExchange 问题不适合这样的讨论......所以我们需要一个更清晰的例子来让多个软件架构师达成一致的决定。否则，有些人的争论可能与其他人不同。

# mysql - 在 bash 脚本中通过 ssh 创建 mySQL 数据库

> ID：12905077
> 
> 赞同：3
> 
> 时间：2012-10-15T22:46:11.980
> 
> 标签：mysql, bash, shell, unix, ssh

我想使用 bash 脚本通过 ssh 在远程服务器上创建一个数据库。像这样的东西

```
#!/bin/sh
ssh user@example.com 'mysql -h example.com -uroot -pMYPASSWD -e "CREATE DATABASE $1;"' 
```

这样我就可以在终端中运行它

```
$ myBashScript nameOfNewDatabase 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:00:52.843

以下脚本可以远程执行任意命令

```
#!/bin/bash
# call mysql on a remote server to execute the given command 

# show usage and exit
usage() {
  echo "$0 server sql-command"  1>&2
    exit 1
}

# check number of arguments
if [ $# -lt 2 ]
then
  usage
fi

# get server name and sql command
server="$1"
sql="$2"

# copy command to a temporary file
tmpsql="/tmp/sql$$"
echo "$sql" > $tmpsql

# copy command file to server
scp $tmpsql $server:$tmpsql
# run command remotely with removing command file afterwards
ssh $server "mysql -uroot -pPASSWORD < $tmpsql;rm $tmpsql"
# remove local copy of command file
rm $tmpsql 
```

# windows - 如何让 zipruby 在 Windows 7 上进行本机编译

> ID：12905078
> 
> 赞同：1
> 
> 时间：2012-10-15T22:46:12.887
> 
> 标签：windows, ruby-on-rails-3.2, mingw

如果这是一个重复的问题，我深表歉意。我继承了一个项目，其中包含 ZipRuby 作为必需的 Gem 之一。我的本地开发环境是 Windows 7。我的 ruby​​ 是 1.9.3p194。我有 Rails 3.2.6。我已经安装了 RubyDevKit 版本 452。

除了 ZipRuby gem 之外，所有其他必要的 gem 在 Windows 7 上安装或本机编译都没有错误。我从来没有从头开始构建过宝石。gem 开始编译并得到以下错误。

```
`enter code here`        linking shared-object zipruby.so
        tmpfile.o: In function `zipruby_tmpnam':
        C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/tmpfile.c:56: undefined reference to `strcpy_s'
        C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/tmpfile.c:62: undefined reference to `_sopen_s'
       zipruby_archive.o: In function `zipruby_archive_read':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zipruby_archive.c:1447: undefined reference to `fopen_s'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zipruby_archive.c:1471: undefined reference to `_fclose_nolock'
       zip_close.o: In function `add_data':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:293: undefined reference to `ftello'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:312: undefined reference to `ftello'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:314: undefined reference to `fseeko'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:328: undefined reference to `fseeko'
       zip_close.o: In function `zip_close':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:188: undefined reference to `ftello'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_close.c:153: undefined reference to `fseeko'
       zip_crypt.o: In function `zip_crypt':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_crypt.c:293: undefined reference to `ftello'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_crypt.c:265: undefined reference to `fseeko'
       zip_dirent.o: In function `zip_cdir_write':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_dirent.c:109: undefined reference to `ftello'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_dirent.c:116: undefined reference to `ftello'
       zip_file_get_offset.o: In function `zip_file_get_offset':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_file_get_offset.c:64: undefined reference to `fseeko'
       zip_fopen_index.o: In function `zip_file_fillbuf':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_fopen_index.c:155: undefined reference to `fseeko'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_fopen_index.c:155: undefined reference to `fseeko'
       zip_open.o: In function `zip_checkcons':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:282: undefined reference to `fseeko'
       zip_open.o: In function `zip_open':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:84: undefined reference to `fseeko'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:85: undefined reference to `ftello'
       zip_open.o: In function `zip_find_central_dir':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:436: undefined reference to `fseeko'
       zip_open.o: In function `zip_readcdir':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:217: undefined reference to `fseeko'
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_open.c:220: undefined reference to `ftello'
       zip_source_filep.o: In function `read_file':
       C:\Ruby193\lib\ruby\gems\1.9.1\gems\zipruby-0.3.6\ext/zip_source_filep.c:105: undefined reference to `fseeko'
    collect2: ld returned 1 exit status                                             make: *** [zipruby.so] Error 1 
```

很明显，对一个或多个库文件的引用没有得到解决。我不知道接下来该去哪里。有没有人在 Windows 7 上成功使用 zipruby 和 mingw 安装 ruby​​？

我在上面遗漏了一些额外的信息。为了做到这一点，我必须安装 Windows 开发版的 GnuWin32。所以 gem 的构建命令是：Gem install ZipRuby -- --with-opt-dir=Path.to.GnuWin32.folder。此文件夹中必须有包含源代码的 lib 和 bin 文件夹。如果我了解更多信息，我会更多地更新问题，如果我在从其他任何地方得到答案之前发现任何问题，我会发布解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T12:03:37.443

尝试 gem install zipruby --version "= 0.3.6" --platform=mswin32

它对我有用。

# marionette - Backbonejs Marionette 简单聊天示例

> ID：12905086
> 
> 赞同：0
> 
> 时间：2012-10-15T22:47:40.123
> 
> 标签：marionette

作为一个木偶初学者，我正在尝试使用 Collection 和 CollectionViews 制作一个简单的聊天应用程序。

我的收藏没有 fetch 方法，因为消息仅来自特定事件。

*   在下面的代码中，我的点击事件**没有**被捕获，我想知道为什么。

*   'send message' 事件是否应该由 Collection 视图处理？

*   我需要调用 App.chat.show(MsgListView) 来显示消息吗？

    ```
    TBox.module("ChatApp", function(ChatApp, App, Backbone, Marionette, $, _) {

    App.addRegions({
        chat: "#chat-messages",
    });

    // Models
    // ------
    MsgEntry = Backbone.Model.extend({});

    // Collections
    // -----------
    MsgCollection = Backbone.Collection.extend({
        model: MsgEntry
    })

    // VIews
    // -----
    MsgView = Backbone.Marionette.ItemView.extend({
        template: '#chat-entry-template',
    });

    MsgListView = Backbone.Marionette.CollectionView.extend({
        itemView: MsgView,

        events: {
              "click #chat-send-btn": "handleNewMessage"
        },

        handleNewMessage: function(data) {
            console.log("CLICK" + data);
        },

    });

    // Init & Finalize
    // ---------------
    ChatApp.addInitializer(function() {
       var msgCollection = new MsgCollection({});
       var msgEntry = new MsgEntry({'msg': 'Hello World'});
       msgCollection.add(msgEntry);
       var msgListView = new MsgListView({collection: msgCollection});

    }); 
    ```

    });

HTML 模板

```
 <body>

   <!-- templates -->
    <script type="text/template" id="status-view-template">
        <div>Connecting ...</div>
    </script>
    <script type="text/template" id="chat-entry-template">
        Hello <%= msg =>
    </script>

   <div id="app">
        <div id="sidebar">

            <div id="chat">
                <h3>Chat</h3>
                <div id="chat-messages">
                </div>
                <div id-"chat-input">
                    <input type="text" name="msg" />
                    <button id="chat-send-btn">Send</button>
                </div>
            </div>

        </div>

        <!-- main -->
        <div id="page">

        </div>

    <div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:07:11.610

好的，我使它与 App.chat.show(msgListView);

此外，事件哈希仅占用 ItemView 事件的 car，而不是其他 dom 事件。

```
// Init & Finalize
// ---------------
ChatApp.addInitializer(function() {
   App.vent.trigger("app:started", "ChatApp");

   var msgCollection = new MsgCollection([{foo :'bar', foo: 'lol'}]);
   var msgListView = new MsgListView({collection: msgCollection});

   // render and display the view
   App.chat.show(msgListView);
}); 
```

# excel - 需要使用vba宏循环在excel中制作一组图表

> ID：12905087
> 
> 赞同：0
> 
> 时间：2012-10-15T22:47:51.837
> 
> 标签：excel, vba, loops, graph

我正在尝试制作一个宏，它将通过一个 Excel 表运行并通过一组行并为每一行制作一个图表。

我有一些代码可以满足我的需要，但是当我需要为每一行提供一个单独的图表时，将它们全部放在一个图表上。

```
`Dim i As Integer
 Dim ws As Worksheet
 Set ws = Sheets("Master Sheet")
 For Row = 1 To 20
 Dim my_cell
 Dim rng As Range
 Set rng = Sheets("Master Sheet").Range("J8:Y8")

 For Each my_cell In rng
 If my_cell <> "" Then

 ActiveSheet.Shapes.AddChart.Select
 ActiveChart.SetSourceData Source:=Range("'Master Sheet'!$J$8:$Y$8")
 ActiveChart.ChartType = xlLineMarkers
 ActiveChart.Location Where:=xlLocationAsNewSheet
 ActiveSheet.Activate
 ActiveChart.PlotArea.Select
 ActiveChart.SeriesCollection(1).XValues = "='Master Sheet'!$J$2:$Y$2"
 ActiveChart.SeriesCollection(1).Name = "=""FP"""
 ActiveChart.SeriesCollection.NewSeries
 ActiveChart.SeriesCollection(2).Name = "=""Progress"""
 ActiveChart.SeriesCollection(2).Values = _
 "='Master Sheet'!$J$8,'Master Sheet'!$AF$8:$AH$8"
 ActiveChart.DisplayBlanksAs = xlInterpolated
 ActiveSheet.Activate
 ActiveChart.ChartArea.Select

 Else
 Exit For ' Blank cell found, exiting
 End If
 Next

 Next Row
 End Sub` 
```

如果有人可以帮我看看我哪里出错了，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:02:13.783

不太确定您的`For Next`and`For Each`循环结构是否良好。理想情况下，您希望逐步遍历范围并实际使用您在`For Each`语句中定义的值。在没有看到您的工作簿的情况下，我只是调整了一小部分数据来模拟创建图表。

我刚刚使用了相同的代码，并在同一个工作表上为每一行数字生成了一个图表。您可以将这些原则应用到您的逻辑中。

```
Sub test()
 Dim Row As Integer
 Dim ws As Worksheet
 Dim rng As Range

 Set ws = Sheets("Sheet1") 'Change this to: Set ws = Sheets("Master Sheet")

 For Row = 1 To 6
 Set rng = ws.Range("B1:D1").Offset(Row, 0) 'Change to (I'm guessing here): ws.Range("$J$7:$Y$7").Offset(Row, 0)

 ActiveSheet.Shapes.AddChart.Select
 ActiveChart.SetSourceData Source:=Range(ws.Name & "!" & rng.Address)
 ActiveChart.ChartType = xlLineMarkers
 ActiveChart.PlotArea.Select
 ActiveChart.SeriesCollection(1).XValues = "='Sheet1'!$B$1:$D$1" 'Change to "='Master Sheet'!$J$2:$Y$2"
 ActiveChart.SeriesCollection(1).Name = ws.Range("A1").Offset(Row, 0).Value 'Change this to whatever you want to name the graphs. This is currently set to dynamicly name each graph by the series name set in Column A.
 'ActiveChart.Location Where:=xlLocationAsNewSheet 'uncomment this line to put on new sheet
 'ws.Select 'Need to go back to worksheet

 Next Row

 Set ws = nothing
 Set rng = nothing
End Sub 
```

这里有几个链接可能会有所帮助； 在 for 循环 VBA和 Excel VBA[中创建和定位图形](https://stackoverflow.com/questions/11415063/creating-and-positioning-graphs-in-a-for-loop-vba)[：将循环通过唯一名称组并创建相应图表的图表制作宏？](https://stackoverflow.com/questions/12685660/excel-vba-chart-making-macro-that-will-loop-through-unique-name-groups-and-crea)

谷歌还有许多其他链接。

如果我误解了您的问题或需要其他任何内容，请告诉我。

干杯

# php - spl_autoload 服务器相关问题

> ID：12905088
> 
> 赞同：0
> 
> 时间：2012-10-15T22:47:55.587
> 
> 标签：php, spl-autoload-register, spl-autoloader

我们似乎对 1 个特定服务器上的 spl_autoload 有一个非常奇怪的问题。警告：spl_autoload() [function.spl-autoload]：无法访问 file.php

```
public function loadClass($className) {

        if(substr($className, -5) == 'Override') {

            $classes = glob(_ROOT_DIR_ . 'classes/*/override/*/*.php');

            foreach($classes AS $class) {
                $explodePath = explode('/', $class);
                $explodePath = array_reverse($explodePath);

                if(file_exists(_ROOT_DIR_.'classes/'.$explodePath[3].'/override/'.$explodePath[1].'/'.$explodePath[0])) {
                    set_include_path(get_include_path().PATH_SEPARATOR._ROOT_DIR_.'classes/'.$explodePath[3].'/override/'.$explodePath[1].'/');
                    spl_autoload(strtolower($className));
                }
            }
        }
        return FALSE;
    } 
```

我也检查过，在我们的 WHM 面板中，它显示包含路径设置为 .:/usr/lib/php:/usr/local/lib/php

这个特定的服务器是运行 PHP 5.3.8 和 eAccelerator 的 Linux RedHat-9.3.6，上面的代码已经在其他 10 个服务器上进行了测试，并且运行良好，所以真的不知道为什么会在这个特定的服务器上发生这种情况。

我们真的很想使用 spl_autoload 方法而不是 include/require 这会减慢我们的应用程序。请我希望有人可以提供一些建议来帮助我们解决这个问题。

# grails - 在 Grails 中使用自己的方法扩展 SpEL？

> ID：12905090
> 
> 赞同：3
> 
> 时间：2012-10-15T22:48:11.167
> 
> 标签：grails, spring-security, spring-el

我想在 Grails 应用程序中添加自定义 SpEL 方法，就像在[这个问题](https://stackoverflow.com/questions/6632982/how-to-create-custom-methods-for-use-in-spring-security-expression-language-anno)中为普通的 Spring-Security 应用程序所做的那样，通过覆盖[EvaluationContext](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)。这行得通吗？

如何插入`global-method-security`安全配置？我可以[配置安全性](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/22%20Miscellaneous%20Properties.html)，但是要在那里添加什么？就像是

```
grails.plugins.springsecurity = {
    'global-method-security' {
        'expression-handler' {
            ref("myMethodSecurityExpressionHandler")
        }
    }
} 
```

? 但是什么代码会解释它？

调查`SpringSecurityCoreGrailsPlugin.groovy`也没有给我任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:32:09.340

仅当您还安装了 spring-security-acl 插件时才可用。它配置`expressionHandler`bean：

```
expressionHandler(DefaultMethodSecurityExpressionHandler) {
   parameterNameDiscoverer = ref('parameterNameDiscoverer')
   permissionEvaluator = ref('permissionEvaluator')
   roleHierarchy = ref('roleHierarchy')
   trustResolver = ref('authenticationTrustResolver')
} 
```

因此，如果您有自己的子类，`DefaultMethodSecurityExpressionHandler`则可以像这样替换 bean `resources.groovy`：

```
import com.mycompany.myapp.MyMethodSecurityExpressionHandler

beans = {
   expressionHandler(MyMethodSecurityExpressionHandler) {
      parameterNameDiscoverer = ref('parameterNameDiscoverer')
      permissionEvaluator = ref('permissionEvaluator')
      roleHierarchy = ref('roleHierarchy')
      trustResolver = ref('authenticationTrustResolver')
   }
} 
```

# node.js - NodeJs 中的完整聊天解决方案

> ID：12905094
> 
> 赞同：15
> 
> 时间：2012-10-15T22:48:36.990
> 
> 标签：node.js

我不知道这是否是回答这个问题的正确地方，但是 Node 有没有类似 cometchat 的解决方案？

（但也许我应该将问题迁移到元？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T16:05:25.457

Google 是您寻找优秀示例的朋友： [node.js 聊天 socket.io 示例](https://www.google.com/search?q=node.js%20chat%20socket.io%20example)

可以在以下位置找到一个很棒的聊天示例：

[http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:12:01.653

Socket.io 附带了一个聊天演示，它本质上是我在博客中关于构建的 Drupal 模块所基于的。

我基本上拿了 socket.io 聊天演示并将其重新设计为一个 Drupal 模块，该模块使用 Drupal 用户名作为聊天用户名，并在 Drupal 站点的页面上显示聊天界面。

感谢您的链接，罗伯特。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:28:30.367

不，似乎没有一个完整的开箱即用的聊天解决方案。有很多使用 socket.io 构建聊天服务的示例。Socket.io 很有趣，不要害怕尝试一下。

这是关于构建聊天模块的博客文章： [http ://willvincent.com/blog/building-custom-realtime-chat-module-drupal-7-part-1](http://willvincent.com/blog/building-custom-realtime-chat-module-drupal-7-part-1)

# flash - As2 加载 swf 实例

> ID：12905098
> 
> 赞同：1
> 
> 时间：2012-10-15T22:48:59.983
> 
> 标签：flash, actionscript-2, instance, loader

我有一个加载外部 .swf 的 .swf：

```
this.createEmptyMovieClip("container_mc", this.getNextHighestDepth());
var my_listener:Object = new Object();

my_listener.onLoadComplete = function(target_mc:MovieClip) {
target_mc._x = 50;
target_mc._y = 50;
addChild(my_loader);

        var blocker = my_loader.content.test
        blocker._visible = false;
}

my_listener.onLoadProgress = function(target_mc:MovieClip) {
trace(target_mc.getBytesLoaded() + " out of " + target_mc.getBytesTotal());
}

var my_loader:MovieClipLoader = new MovieClipLoader();
my_loader.addListener(my_listener);
my_loader.loadClip("child_as2.swf", container_mc); 
```

我想访问外部 swf 并使带有实例名称 test 的影片剪辑可见 = false; 但它不会工作。

我已经尝试了很多代码，现在它抛出了这个错误：

`Scene=Escena 1, layer=Capa 1, frame=1, Line 9 There is no property with the name 'content'.`

任何的想法？

如果你有更好的代码，我会非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:46:34.820

首先，看起来您正在混合使用 AS2 和 AS3。AS2 没有 addChild 方法，并且您正在加载的任何内容都会在加载后添加。如果您想稍后才激活您的外部影片剪辑，我建议您制作它们，以便它们的根只有 2 帧，其中第一帧是空白的，所有内容都在第二帧。然后，在 onLoadInit 中告诉它 gotoAndStop(1)。这是一些示例代码：

```
var loader:MovieClipLoader = new MovieClipLoader();
loader.addListener({
    onLoadInit: function(mc:MovieClip):Void {
        mc.gotoAndStop(1);
    }
});

var container:MovieClip _root.createEmptyMovieClip('mc_container', _root.getNextHighestDepth());
loader.loadClip('clip.swf', container); 
```

# javascript - 链接 2 个图表以供选择？

> ID：12905100
> 
> 赞同：1
> 
> 时间：2012-10-15T22:49:11.547
> 
> 标签：javascript, d3.js

我在一个页面上有两个共享唯一元素（实体名称）的图表，我希望能够单击一个，它将突出显示两个图表中的元素。我认为这曾经被称为链接，但在最近的 d3 修订版中被删除。这仍然可能吗？

# c++ - C++函数声明中的&是什么意思

> ID：12905101
> 
> 赞同：0
> 
> 时间：2012-10-15T22:49:24.673
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

你好有时我看到那种声明

```
void f(int& a,...){
 } 
```

这是什么意思？因为 * 是指针，没有 * 是对象，那是什么？

# c++ - 在 C++ 中为类分配内存

> ID：12905102
> 
> 赞同：1
> 
> 时间：2012-10-15T22:49:38.847
> 
> 标签：c++, class, memory, vector

这是我的课：

```
using namespace std;

Class Book {
    public:
        Book();
        Book(vector<string>*, string, int);
        Book(const Book&);
        ~Book();
        Book& operator=(const Book&);
        void update(vector<string>*);
        void update(string); 
        void update(int); 
        int getYear() const{
            return year;
        };
        string getTitle() const{
            return title;
        };
        bool operator==(const Book&);
        bool operator!=(const Book&);
        friend std::ostream& operator<<(std::ostream&, const Book&);
        void getAuthors();
    private:
        vector<string>* authors;
        string title;
        int year;
};

#endif  /* BOOK_H */ 
```

这是它的来源：

```
#include "Book.h"
using namespace std;

Book::Book():year(0), title(NULL), authors(NULL){}
Book::Book(vector<string>* bookauthors,string booktitle, int bookyear ){
    authors = bookauthors;
    title = booktitle;
    year = bookyear;
}

Book::Book(const Book& aBook){
    authors = aBook.authors;
    title = aBook.title;
    year = aBook.year;
}

Book::~Book(){
    delete authors;
    delete &title;
    delete &year;
}

bool Book::operator==(const Book &aBook){
    if(getYear() == aBook.getYear() && getTitle() == aBook.getTitle())
        return true;
    else return false;
}

bool Book::operator != (const Book &aBook){
    if(getYear() != aBook.getYear() && getTitle() != aBook.getTitle())
        return true;
    else return false;
}

Book& Book::operator =(const Book& rhs){
    if(this != &rhs){
        authors = rhs.authors;
        title = rhs.title;
        year = rhs.year;
    }
    return *this;
}

void Book::update(int newyear){
    year = newyear;
}

void Book::update(string newtitle){
    title = newtitle;    
}

void Book::update(vector<string>* newauthors){
    authors = newauthors;
}

std::ostream& operator <<(std::ostream& os, const Book& b){
    os<<b.getTitle()<<", "<<b.getYear();
    return os;
} 
```

这是它运行的主文件：

```
 #include "Book.h"
#include <iostream>
#include <limits.h>
//This is the test funcion posted on the class website
using namespace std;

int main(){

  //testing constructor
  vector<string> authors;
  authors.push_back("Ritchie");
  authors.push_back("Kernighan");
  Book a(&authors, "C", 1990);
  authors.push_back("Whatever");
  cout << "Book a is: " << a << endl;
  cout << "Expected: (C, 1990, Ritchie & Kernighan)" << endl;

  //testing copy constructor
  Book b(a);
  a.update(&authors);
  cout << "Book b is: " << b << endl;
  cout << "Expected: (C, 1990, Ritchie & Kernighan)" << endl;

  //testing constructor
  vector<string> authors2;
  authors2.push_back("Crockford");
  Book c(&authors2, "JavaScript", 2008);
  cout << "Book c is: " << c << endl;
  cout << "Expected: (JavaScipt, 2008, Crockford)" << endl;

  //testing assignment operator
  authors2.push_back("whatever");
  a=c;
  cout << "Book a is changed to: " << a << endl;
  cout << "Expected: (JavaScipt, 2008, Crockford)" << endl;

  for(int i=0; i < 200000000; i++)
    b=c;
  cout << "Book b is changed to: " << b << endl;
  cout << "Expected: (JavaScipt, 2008, Crockford)" << endl;
} 
```

当我运行它时，我不断得到这个：

> bookclass(58316) malloc: *** 对象 0x7fff522d78b0 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

我是 C++ 新手，所以我不确定如何分配内存。我尝试使用`malloc`它并没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T22:55:38.270

成员位于对象内部，即它们的内存是由`Book`对象分配的，既不能也不需要`delete`显式地分配内存。`new`基本上，您需要使用with 调用来匹配您的显式分配，`delete`但您永远不需要释放未在某处显式分配的东西。

也就是说，当您尝试`delete title`或时会出现错误`delete year`。尝试`delete authors`取决于来自哪里时，也可能发生这种情况`authors`。通常，您不想`delete`分配尚未分配的对象。您的班级可能不合理地获得了向量`Book`的所有权。`authors`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:55:35.337

这可能是学习使用 Valgrind 的好时机，它将为您提供更丰富的调试工具来解决此类错误。

在您的析构函数中，您正在通过指针销毁标题和年份。你实际上不需要这样做，因为它们是静态分配的（即你没有使用 new 创建它们），所以它抱怨你试图删除你没有动态创建的东西。

此外，您正在删除您的`std::vector`，它可以引用`std::vector`另一个类中包含的相同内容。由于您可能有两个包含相同引用的类，因此您需要找到一种更智能的方法来删除它，这样您就不会调用双重释放。

# ruby-on-rails - Rails模型attr_accessor属性不保存？

> ID：12905103
> 
> 赞同：3
> 
> 时间：2012-10-15T22:49:40.357
> 
> 标签：ruby-on-rails, model, attr-accessor

这是我正在使用的结构：

应用程序/模型/model.rb

```
class Model < ActiveRecord::Base
    attr_accessor :some_var
end 
```

应用程序/模型/model_controller.rb

```
class ModelsController < ApplicationController
    def show
        @model = Model.find(params[:id])
        @other_var
        if @model.some_var.nil?
            @model.some_var = "some value"
            @other_var = "some value"
        else
            @other_var = @model.some_var
        end
    end
end 
```

每当我运行这段代码（例如 show 方法）时，if 子句被评估为真（例如 @model.some_var == nil）。我该如何解决这个问题？我对 attr_accessor 如何工作的假设有问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T22:54:09.973

`attr_accessor`是一个内置的 Ruby 宏，它将为对象的实例变量定义一个 setter 和一个 getter，并且与具有 ActiveRecord 实例的数据库列没有任何关系。例如：

```
class Animal
  attr_accessor :legs
end

a = Animal.new
a.legs = 4
a.legs #=> 4 
```

如果要将其保存到数据库中，则需要在迁移中定义一列。然后 ActiveRecord 将自动创建访问器方法，您可以（应该）删除您的`attr_accessor`声明。

# ruby - 在 ruby 中不使用 sleep() 的情况下，我将如何 rspec/test 一个 updated_at 字段？

> ID：12905108
> 
> 赞同：6
> 
> 时间：2012-10-15T22:50:34.257
> 
> 标签：ruby, rspec

如何在不使用 sleep(1.second) 方法的情况下编写规范？当我删除睡眠时，我的测试会因为返回相同的时间戳而中断？

我有以下类方法：

```
def skip
qs = find_or_create_by(user_id: user_id)
qs.set_updated_at
qs.n_skip += 1
qs.save!
end 
```

和以下规格：

```
 qs = skip(user.id)
    sleep(1.second)
    qs2 = skip(user.id)
    qs.should_not be_nil
    qs2.should_not be_nil
    (qs.updated_at < qs2.updated_at).should be_true 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T22:57:17.037

我过去曾使用[Timecop](http://blog.smartlogicsolutions.com/2008/11/19/timecop-freeze-time-in-ruby-for-better-testing/) gem 进行基于时间的测试。

```
require 'timecop'
require 'test/unit'

class MyTestCase < Test::Unit::TestCase
  def test_mortgage_due_in_30_days
    john = User.find(1)
    john.sign_mortgage!
    assert !john.mortgage_payment_due?
    Timecop.travel(Time.now + 30.days) do
      assert john.mortgage_payment_due?
    end
  end
end 
```

因此，您的示例可能如下所示：

```
qs = skip(user.id)

Timecop.travel(Time.now + 1.minute) do
  qs2 = skip(user.id)
end

qs.should_not be_nil
qs2.should_not be_nil
(qs.updated_at < qs2.updated_at).should be_true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T23:11:57.257

这也适用于 rspec 测试。在您的 Gemfile 中：

```
require 'timecop', group: :test 
```

然后，例如，您可以使用 rspec 测试一个命名作用域，该作用域以 updated_at 降序获取模型调用查询：

```
require 'timecop'
require 'spec_helper'

describe Query do

  # test the named scopes for ordering and searching
  describe 'when a query is searched or sorted' do

    before :each do
      @query1 = create(:query)
      Timecop.travel(Time.now + 1.minute) do
        @query2 = create(:query)
      end
      Timecop.travel(Time.now + 2.minute) do
        @query3 = create(:query)
      end
    end

    it 'should be listed in descending updated_at order' do
      @queries = Query.order_by_latest
      @queries.first.should == @query3
      @queries.last.should == @query1
    end

  end
end 
```

# search - 如何在 Solr 中搜索“信息技术服务”的缩写词“ITS”

> ID：12905124
> 
> 赞同：0
> 
> 时间：2012-10-15T22:52:46.290
> 
> 标签：search, solr, schema

在我的数据集中，“ITS”这个词的意思是“信息技术服务”。但是，当我在 solr 中搜索“ITS”时，会得到“it”、“it's”和“its”（形容词）之类的结果。没有与“信息技术服务”相关的结果。为此，我该如何更改 Solr？

下面列出了我的归档模式。我实际上使用两个字段。一个有词干，另一个没有词干。但它仍然不起作用。

```
<fieldType name="text" class="solr.TextField"
            positionIncrementGap="100">
            <analyzer>
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.StopFilterFactory"
                    ignoreCase="true" words="stopwords.txt"/>
                <filter class="solr.WordDelimiterFilterFactory"
                    generateWordParts="1" generateNumberParts="1"
                    catenateWords="1" catenateNumbers="1" catenateAll="0"
                    splitOnCaseChange="1"/>
                <filter class="solr.LowerCaseFilterFactory"/>
                <filter class="solr.EnglishPorterFilterFactory"
                    protected="protwords.txt"/>
                <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
            </analyzer>
        </fieldType>

    <!-- for no stemming -->
<fieldType name="text_no_stemming" class="solr.TextField"
    positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory"
            ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory"
            generateWordParts="1" generateNumberParts="1"
            catenateWords="1" catenateNumbers="1" catenateAll="0"
            splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>                
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:19:24.710

您没有让 Solr 知道 ITS 是“信息技术服务”的同义词。你需要先这样做，检查[SynonymFilter](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#SynonymFilter)

# mysql - MySql 在 DATE_FORMAT 之后按日期排序

> ID：12905128
> 
> 赞同：0
> 
> 时间：2012-10-15T22:53:06.450
> 
> 标签：mysql, date, sql-order-by, union

我有两个表，fbpost 和 fbalbum，每个表都有一个`DATETIME`名为`createdTime`. 我正在查找每月的专辑数量和每月的帖子数量，并将它们加在一起。

这是我的查询（按描述工作）：

```
SELECT  createdTime, itemCount FROM 
        (SELECT DATE_FORMAT(createdTime, '%m-%Y') AS createdTime, COUNT(*) AS itemCount FROM fbpost WHERE page_id =2 
        GROUP BY YEAR(createdTime), MONTH(createdTime)
        UNION ALL
        SELECT DATE_FORMAT(createdTime, '%m-%Y') AS createdTime, COUNT(*) AS itemCount FROM fbalbum WHERE page_id=2
        GROUP BY YEAR(createdTime), MONTH(createdTime)) AS foo
GROUP BY createdTime 
```

这给出了结果：

```
01-2009 | 173
01-2010 | 21
01-2011 | 521
01-2012 | 776
02-2009 | 117
02-2010 | 158
02-2011 | 678
... 
```

但我希望结果是这样排序的：

```
01-2009 | 173
02-2009 | 56
03-2009 | 543
04-2009 | 211
05-2009 | 723
06-2009 | 55
07-2009 | 521
... 
```

我怎样才能做到这一点？

**注意：** `DATE_FORMAT()`给出一个字符串，而不是 a `DATETIME`，所以你不能按日期排序。但是，如果我`DATE_FORMAT()`在两个嵌套的 select 语句中取出，我会在大多数月份得到 2 行，因为那会离开这一天。尽管每个嵌套选择每月只有一行，但它们的日期通常会有所不同，因为一个月中的最后一项可能在任何一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:14:38.750

`DATE_FORMAT`在您的外部查询之前不要使用：

```
SELECT DATE_FORMAT(a.createdTime, '%m-%Y') AS createdTime, SUM(a.itemCount) AS itemCount
FROM
    (SELECT DATE(createdTime) AS createdTime, COUNT(*) AS itemCount 
    FROM fbpost WHERE page_id = 2
    GROUP BY DATE(createdTime)
    UNION ALL
    SELECT DATE(createdTime) AS createdTime, COUNT(*) AS itemCount
    FROM fbalbum WHERE page_id = 2
    GROUP BY DATE(createdTime)) a
GROUP BY YEAR(a.createdTime), MONTH(a.createdTime) 
```

## [看到它在行动](http://sqlfiddle.com/#!2/c4605/1)*

**演示没有`page_id`*

# vb.net - vb.net 中的语法错误

> ID：12905130
> 
> 赞同：0
> 
> 时间：2012-10-15T22:53:12.387
> 
> 标签：vb.net, syntax

我将 C# 中的原始代码的聊天服务器转换为 vb.net。我遇到了一些错误，例如语法错误。在这段代码上`Try New UserPartInfo(textBox15.Text, textBox14.Text, UserFullInfo.Permission.Pest)`

这是完整的代码。[巴斯宾](http://pastebin.com/S2GQfTAt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:27:40.133

您必须声明一个变量，然后为其赋值：`Dim a = New UserPartInfo(textBox15.Text, textBox14.Text, UserFullInfo.Permission.Pest)`

# css - :: 选择 Chrome 或 Tumblr 错误？

> ID：12905135
> 
> 赞同：2
> 
> 时间：2012-10-15T22:53:31.660
> 
> 标签：css, google-chrome, selection, tumblr

所以我想在我的 Tumblr 博客上以不同的方式选择样式，它在 Mozilla 中运行良好，但是当我输入这段代码时，当涉及到 Chrome 时：

```
::selection {
    background:{color:Body Text};
    color:{color:Entry Background};
}

::-moz-selection {
    background:{color:Body Text};
    color:{color:Entry Background};
}

::-webkit-selection {
    background:{color:Body Text};
    color:{color:Entry Background};
} 
```

颜色不对。

[在这里](http://neonsignslp3colors.tumblr.com/)测试- 尝试 Mozilla 和 Chrome，你会明白我在说什么。

我还想看看问题是否出在使用 Tumblr 颜色代码 [ *{color:Body Text} ] 但如果我使用常规颜色代码 [* *#555555* ]也会发生同样的事情。

还有这个[演示](http://paulmaloney.net/demo/selection.html)::selection 在 Chrome 中完美运行，即使没有那个烦人的额外蓝色选择部分。

有没有办法摆脱那个蓝色选择部分？

或者整个问题的任何解决方案？

这是问题所问内容的屏幕截图：

![截屏](../Images/028bdc7daa2ef773373108e6e51b4f85.png)

# html - 在简单的页脚中左右对齐

> ID：12905143
> 
> 赞同：0
> 
> 时间：2012-10-15T22:53:58.190
> 
> 标签：html, alignment

我目前正在制作一个简单的页脚，我想将一行文本左对齐，另一行右对齐。

这是我到目前为止所拥有的：

```
<div id="footer">
   Last Updated: October 15, 2012 <!--left align-->
   Contact Us  Login <!--right align (these will be links)-->
</div>

#footer {
font-family: Arial;
font-size: .9em;
color: #24ACAE;
border-top: 1px solid #24ACAE;
margin-left: 90px;
margin-right: 90px;
padding-top: 5px;
} 
```

上面的代码导致两行文本彼此相邻，我尝试了各种方法来解决这个问题，例如将第二行放在一个跨度中并向右对齐，甚至将这些行放入一个表格中。我所尝试的都没有导致两条线正确对齐。

单独使用 a`margin-left`不起作用，因为当第一行更新并变长时，它将向下推动第二行。相对定位似乎也有同样的问题。

希望我忽略了一些简单的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:57:30.200

```
<div id="footer">
<span style="float:left;">Last Updated: October 15, 2012</span>
<span style="float:right;">Contact Us  Login</span> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

将它们放在跨度中，并对跨度进行样式设置应该可以实现您想要的！

**更新** 您也可以使用 css 执行此操作，如果您不希望它内联，使用您的 html 代码。像这样：

```
<style>
.left {float:left;}
.right {float:right;}
</style> 
```

接着

```
<div id="footer">
<div id="footer">
<span class="left">Last Updated: October 15, 2012</span>
<span class="right">Contact Us  Login</span>
</div>​​​​​​​​​​​​​​​​​​​​​​ 
```

这也将允许您在整个页面中重用这些 css 类，允许您应用 float:left/right; 任何 DOM 元素的属性

**这是一个显示它工作的[jsfiddle](http://jsfiddle.net/cvAkU/)**（如果它看起来不正确，请调整浏览器的大小，因为它没有足够的空间来容纳一行中的所有文本，最初在我的浏览器窗口中）

# .net - 正则表达式验证器在共享点设计器中不起作用

> ID：12905146
> 
> 赞同：1
> 
> 时间：2012-10-15T22:54:14.990
> 
> 标签：.net, regex, sharepoint

我正在通过使用 SharePoint Designer 添加正则表达式验证器来验证 SharePoint 列表字段。该列表将位于由 SP 设计器创建的 DataFormWebPart 中。

验证：在字段中输入的值必须是`0.00`格式。无论在文本框中输入的值如何，都会填充错误消息。即使我输入正确`1.23`的值（如（）），也会显示错误消息。

这个问题与下面的问题类似吗？

[ASP.NET 正则表达式验证器在 Internet Explorer 7 上不起作用](https://stackoverflow.com/questions/7761148/asp-net-regular-expression-validator-not-working-on-internet-explorer-7)

如果匹配，请建议为此正则表达式编写一个前瞻模式。正则表达式是

```
^[0-9]1.[0-9]2$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:57:10.510

您可能正在尝试这样做：`[0-9]{1}\.[0-9]{2}`（where `{1}`and `{2}`are [quantifiers](http://www.regular-expressions.info/repeat.html)），但也不要这样做。伪量词`{1}`只会给你的正则表达式添加混乱。如果您真的只想接受点 ( `.`) 前的一位数字，请使用以下命令：

```
^[0-9]\.[0-9]{2}$ 
```

如果你想在点之前接受一个*或多个*数字，你可以使用这个：

```
^[0-9]+\.[0-9]{2}$ 
```

如果您不想接受带前导零的数字（`01.23`,`000.00`等），请使用：

```
^(?:[1-9][0-9]*|0)\.[0-9]{2}$ 
```

`(?:[1-9][0-9]*|0)`匹配一个或多个数字，其中第一个数字至少是`1`，或恰好是一个零（`0.10`、`1.23`、`456.78`等）。

您还提到了前瞻，但在这种情况下不需要它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:00:47.980

您作为示例提供的数字与您提供的正则表达式不匹配。0.00 格式的正则表达式是`^[0-9][.][0-9][0-9]$`点是保留字符。所以你需要把它放在一个共享点字符串的括号中。如果是 javascript，您将转义 . 使用斜杠键，因此正则表达式将变为`^[0-9]\\.[0-9][0-9]$`因为反斜杠是保留的 javascript 字符，您可能需要双反斜杠来获得正则表达式的单个反斜杠。

# jquery - 单击时选择最低的嵌套选择器

> ID：12905147
> 
> 赞同：0
> 
> 时间：2012-10-15T22:54:17.257
> 
> 标签：jquery, click, nested

我想单击`$('.sub-menu')`选择器并返回被单击的最低嵌套项，而不是最高的。例如，当我单击“enlish”时，会返回“root”，因为“english”是“root”的子项。当我选择“英语”时，我希望返回“英语”。

```
<div ID="browse_container">
    <div class="sub-menu">Root
        <div class="sub-menu">English</div>
        <div class="sub-menu">Maths
            <div class="sub-menu">Year 1</div>
            <div class="sub-menu">Year 2</div>
        </div>
        <div class="sub-menu">▷ Science</div>
    </div>
</div> 
```

我的脚本很简单：

```
$('.sub-menu, #root').on('click', function(event){
    alert($(this).text())
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:56:51.550

```
$('.sub-menu, #root').on('click', function(event){
    alert($(event.target).text());
    return false; // I stop the bubble
}); 
```

你想要`event.target` [阅读更多](https://developer.mozilla.org/en-US/docs/DOM/event.target)

请参阅此处的示例[http://jsfiddle.net/qeVXa/](http://jsfiddle.net/qeVXa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:56:43.670

啊，答案是使用`$(event.target).text()`

代替`$(this).text()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:59:12.900

试试这个演示** [http://jsfiddle.net/H5Eq7/](http://jsfiddle.net/H5Eq7/)

API - `.stopPropagation` [http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

**停止传播**

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

这应该适合原因`:)`

**代码**

```
$(document).ready(function() {
    $('.sub-menu, #root').on('click', function(event) {
        event.stopPropagation();
        alert($(this).text())
    });

});​ 
```

# objective-c - NSPredicate 总是返回相同的数据

> ID：12905151
> 
> 赞同：0
> 
> 时间：2012-10-15T22:54:35.230
> 
> 标签：objective-c, ios, nspredicate, nsfetchrequest

我正在尝试使用 NSPredicates。但它总是给我同样的数组。在这里你可以看到我的谓词。

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"whichAlbum.album_id == %d", AlbumId];
    [request setEntity:[NSEntityDescription entityForName:@"Picture" inManagedObjectContext:self.genkDatabase.managedObjectContext]];
    [request setPredicate:predicate]; 
```

另外，当我尝试硬编码时。它返回相同的数组。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"whichAlbum.album_id == 5"]; 
```

我的数据库模型是：

![在此处输入图像描述](../Images/faec9de6879782e481c42f8a61172283.png)

在这里您可以看到我如何将数据放入我的数据库中以获取实体图片。

```
+ (Picture *)pictureWithGenkInfo:(NSDictionary *)genkInfo
          inManagedObjectContext:(NSManagedObjectContext *)context
                     withAlbumId:(int)albumId
                   withPictureId:(int)pictureId;
{

    Picture *picture = nil;

    picture = [NSEntityDescription insertNewObjectForEntityForName:@"Picture"
                                          inManagedObjectContext:context];
    picture.url                     = [genkInfo objectForKey:PICTURES_URL];
    picture.pic_album_id            = [NSNumber numberWithInt:albumId];
    picture.picture_id              = [NSNumber numberWithInt:pictureId];

    return picture;
} 
```

任何人都可以帮助我吗？

亲切的问候 **编辑**

```
 for (NSDictionary *genkInfo in albums ) {
        albumId++;
        Album *album = [Album albumWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withAlbumId:albumId];
        for (NSDictionary *genkInfo2 in pictures ) {
            pictureId++;
            Picture *pic = [Picture pictureWithGenkInfo:genkInfo2 inManagedObjectContext:document.managedObjectContext withAlbumId:albumId withPictureId:pictureId];
            [album addPicturesObject:pic]; // this method should be automatically generated
        }
        pictureId = 0;
        // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:57:43.180

只需删除`whichAlbum`并尝试：

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"album_id == %d", AlbumId];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:22:49.373

更好的是，假设 AlbumId 的值是某种数字原语：

```
old style:
[NSPredicate predicateWithFormat:@"whichAlbum == %@", [NSNumber numberWithInt:AlbumId]];
modern style: (xcode 4.5)
[NSPredicate predicateWithFormat:@"whichAlbum == %@", @(albumId)]; 
```

看起来[可能](https://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/Predicates/Articles/pCreating.html) 只会在其格式字符串中生成`predicateWithFormat:`正确的谓词。`%@``@K`

最佳：假设您有权访问您尝试匹配的相册托管对象，请尝试以下操作：

```
[NSPredicate predicateWithFormat:@"whichAlbum == %@", album]; 
```

匹配对象，而不是其属性之一

# .htaccess - htaccess 将查询字符串添加到 301 重定向

> ID：12905155
> 
> 赞同：2
> 
> 时间：2012-10-15T22:54:55.633
> 
> 标签：.htaccess, redirect

sombody 可以帮我解决这个问题，我尝试使用 htaccess 文件重新定向页面，但它不断添加`?c=oldpage`到新 url 的末尾，例如：

```
http://www.mydomain.co.uk/newpage.html?c=oldpage 
```

我已经尝试了这里发布的一些解决方案，但没有运气，这是我的*`.htaccess`*文件：

```
DirectoryIndex index.php index.html index.htm    
Options +FollowSymLinks    
RewriteEngine on    
RewriteCond %{QUERY_STRING} PHPSESSID=.*$    
RewriteRule (.*) http://www.mydomain.co.uk/$1? [R=301,L]    
RewriteCond %{HTTP_HOST} ^mydomain.co.uk$ [NC]    
RewriteRule ^(.*)$ http://www.mydomain.co.uk/$1 [R=301,L]    
RewriteCond %{THE_REQUEST} /index\.php\ HTTP/    
RewriteRule ^index\.php$ / [R=301,L]    
RewriteEngine on    
RewriteRule ^product/(.*).html$ product.php?p=$1 [L]    
RewriteRule ^(.*)\.html$ category.php?c=$1 [L,NC]        

Redirect 301 /oldpage.html http://www.mydomain.co.uk/newpage.html    

ErrorDocument 404 /404.php 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:47:02.520

这是 mod_alias （`Redirect`指令）和 mod_rewrite 不能很好地相互配合。因为两个模块都将它们的指令应用于 URL 文件映射管道中的同一个 URI，所以它们不知道相互忽略，因为两个指令都不知道另一个模块在做什么。由于您的目标重叠，因此两个模块都在同一个 URI 上应用它们的指令，您会得到一个混搭的结果。

在这种情况下，您需要坚持使用 mod_rewrite 并将重定向移动到内部重写之上：

```
DirectoryIndex index.php index.html index.htm    
Options +FollowSymLinks    
RewriteEngine on    

# redirects 
RewriteCond %{QUERY_STRING} PHPSESSID=.*$    
RewriteRule (.*) http://www.mydomain.co.uk/$1? [R=301,L]    

RewriteCond %{HTTP_HOST} ^mydomain.co.uk$ [NC]    
RewriteRule ^(.*)$ http://www.mydomain.co.uk/$1 [R=301,L]    

RewriteCond %{THE_REQUEST} /index\.php\ HTTP/    
RewriteRule ^index\.php$ / [R=301,L]    

RewriteRule ^oldpage.html$ http://www.mydomain.co.uk/newpage.html [R=301,L]

# internal rewrites
RewriteRule ^product/(.*).html$ product.php?p=$1 [L]    
RewriteRule ^(.*)\.html$ category.php?c=$1 [L,NC]        

ErrorDocument 404 /404.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:07:24.433

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^abc\.net$ [OR]
RewriteCond %{HTTP_HOST} ^www\.abc\.net$
RewriteRule ^example\.html$ "http\:\/\/abc\.net\/example\/" [R=301,L]
RewriteOptions inherit 
```

到一个文件夹，或者：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^abc\.net$ [OR]
RewriteCond %{HTTP_HOST} ^www\.abc\.net$
RewriteRule ^example\.html$ "http\:\/\/abc\.net\/example\.html$" [R=301,L]
RewriteOptions inherit 
```

不太了解，但我用的就是这个，希望对你有帮助。

# django - 检查文件是否已完成写入 Django 中的 Amazon S3

> ID：12905160
> 
> 赞同：1
> 
> 时间：2012-10-15T22:55:19.330
> 
> 标签：django, amazon-s3, amazon-web-services, boto

在一个视图中，我正在生成一个文件，将其保存为 Django 模型中的一个字段（一个文件字段）并返回 url：

```
...
obj.pdf.save(obj.hash_id + '.pdf', File(open(destination_path, 'r')))

ret = {
  'pdfUrl': obj.pdf.url
}

ret = json.dumps(ret)
return HttpResponse(ret, mimetype='text/plain') 
```

然后用户被重定向到 ret 中返回的 url，它有时是一个空白的 pdf，但如果他们稍后刷新，完整的 pdf 就在那里。我怀疑 S3 还没有完成将其保存下来。Django中是否有任何干净的方法来确保在返回url之前可以访问文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:51:40.397

自己在脚本中以用户想要的方式访问对象，并查看其大小是否满足某个阈值，或者您是否知道大小，是否全部存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T06:21:34.593

根据boto IRC频道的几个人的说法，因为S3是分布式的，所以无法判断您上传的文件是否已经传播。但这会很快发生。希望这可以帮助其他人解决这个问题；你只需要稍等一下。不过，这可能会在未来发生变化。

# matlab - 如何在单元格数组中的几个单元格中设置一个数字

> ID：12905170
> 
> 赞同：3
> 
> 时间：2012-10-15T22:56:49.537
> 
> 标签：matlab, cell, cells

> **可能重复：**
> [在matlab中为多个单元格赋值](https://stackoverflow.com/questions/11456381/assign-a-value-to-multiple-cells-in-matlab)

我正在尝试在第 2 列中的所有空单元格中输入一个数字，比如说 3。

像这样：

```
emptyList = cellfun(@isempty,anscell)
anscell{emptyList(:,2),2}=3 
```

但我收到这条消息

```
The right hand side of this assignment has too few values to satisfy the left hand side. 
```

我可以在没有循环并创建 sum 和 one 函数的情况下克服它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:35:07.957

这是你需要的吗？

```
anscell = cell(3,2)
emptyList = cellfun(@isempty,anscell)
anscell(emptyList(:,2),2)={3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:11:38.873

这会做你想做的事吗？

```
[anscell{emptyList(:,2),2}] = deal(3) 
```

# php - Gearman 客户端 doBackground 总是返回 GEARMAN_TIMEOUT

> ID：12905172
> 
> 赞同：1
> 
> 时间：2012-10-15T22:56:55.723
> 
> 标签：php, gearman

所以，我现在运行了一个简单的齿轮系统，一个工人在运行。

工作人员基本上只是获取有效负载（在这种情况下是一个随机数，并且应该将其回显到屏幕上。字面意思是一个`echo`，而不是返回给客户端。

客户端发送随机数。我试图做一个，但它每次都会`$client->doBackground( 'post', 65482, md5(uniqid()));`返回一个 47 错误（ ）。`GEARMAN_TIMEOUT`

`getErrNo()`返回 0，`error()`返回关于`GEARMAN_TIMEOUT`

但是，当我将其更改为 just 时`$client->do(blah, blah, blah)`，它工作得很好。

我什至偶尔会看到工作人员仍然回显数字，即使在收到超时错误之后...

```
public function execute()
    {
        $method = 'do';
        if( !$this->getBlock() )
        {
            $method .= ( $this->getPriority() == 'Normal' ? '' : $this->getPriority() ) . 'Background';
        }
        else
        {
            $method .= $this->getPriority();
        }
        echo "Method: $method \t Worker: {$this->getName()} \t Payload: {$this->getPayload()} \t Hash: {$this->getHash()}\n";
        $this->setResult(
            $this->getClient()
                ->$method(
                    $this->getName(),
                    $this->getPayload(),
                    $this->getHash()
                )
        );
        if( $this->getClient()->returnCode() != GEARMAN_SUCCESS )
        {
            echo "Code: " . $this->getClient()->returnCode() . "\t" . GEARMAN_TIMEOUT . "\n";
        }
    } 
```

那个回声回来了

`Method: doHighBackground Worker: leadposter Payload: 10930 Hash: 091878f5965e4a1de2992c607b3c562b240792a6`

这是错误信息

```
["error":"Uecode\GearmanBundle\Gearman\Job":private]=>
  array(4) {
    ["attempts"]=>
    int(3)
    ["return_code"]=>
    int(47)
    ["error_no"]=>
    int(0)
    ["error"]=>
    string(103) "gearman_wait(GEARMAN_TIMEOUT) timeout reached, no servers were available -> libgearman/universal.cc:325"
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:12:23.783

解决了。

Connections werent persisting across methods... so, build a server pool, and connected to the servers just before running the job

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T19:50:14.317

If your `gearmand` is on another port, be sure `AddServers` knows, else will `GEARMAN_TIMEOUT`.

`gearmand -d -p 4769`

`$worker->addServers(127.0.0.1:4769);`

# c# - 如何将自定义 ModelValidatorProviders 添加到 Web API 项目？

> ID：12905174
> 
> 赞同：5
> 
> 时间：2012-10-15T22:57:15.460
> 
> 标签：c#, asp.net-web-api, model-validation

我正在将一些 MVC 代码移动到 Web API，并且我需要更新我的自定义 ModelValidatorProviders。似乎我的验证器可以保持不变，只是它们应该继承 System.Web.Http.Validation 命名空间。

我不知道如何将提供程序添加到 Web API。使用 MVC 时，我可以将以下内容添加到我的 global.asax 中：

```
ModelValidatorProviders.Providers.Add(new CustomModelValidatorProvider()); 
```

如何将自定义提供程序与 Web API 一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T23:16:28.923

这个页面[配置 ASP.NET Web API](http://www.asp.net/web-api/overview/extensibility/configuring-aspnet-web-api)帮助我回答了我自己的问题。具体来说，这就是我最终做的事情：

```
GlobalConfiguration.Configuration.Services.Add(typeof(ModelValidatorProvider), new CustomModelValidatorProvider()); 
```

# sharepoint - 如何让 SharePoint PowerShell 使用 .NET 2

> ID：12905180
> 
> 赞同：8
> 
> 时间：2012-10-15T22:57:46.660
> 
> 标签：sharepoint, powershell, config

我在使用 PowerShell 时遇到了一些问题。首先，SharePoint 2010 安装的 PS 配置不断弹出此消息：

当地农场无法进入。未注册具有 FeatureDependencyId 的 Cmdlet。

我已经用谷歌搜索了，并让每个人和他们的第二个堂兄 Sharepoint_Shell_Access 访问配置数据库，但没有运气。所以，我想尝试一些 PS 命令。然而，在这种情况下，我得到了一个不同的错误：

Microsoft .Net 运行时版本 4.0.30319.17929 不支持 Microsoft SharePoint。

我知道 SP 不能使用 .NET 4.0 或 4.5，但我找不到任何关于如何让 PS 使用“正确”版本的 .NET 的建议。我找到了一些关于 PowerGUI 的参考资料，并更改了 psgui.exe.config，但我没有。

有人对如何解决 .NET 版本问题有任何建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T02:17:47.880

安装 powershell v3 时，版本 2 仍可在并排模式下使用。为了使用 SharePoint 管理单元，您必须像这样启动 v2：

```
powershell -v 2 
```

然后，您可以加载 SharePoint 的管理单元。

作为参考，以下是从 Windows 8 cmd.exe 调用 PowerShell v2 的输出：

```
C:\Windows\System32\WindowsPowerShell\v1.0>powershell.exe -version 2
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

PS C:\Windows\System32\WindowsPowerShell\v1.0> $psversiontable

Name                           Value
----                           -----
CLRVersion                     2.0.50727.6387
BuildVersion                   6.1.7600.16385
PSVersion                      2.0
WSManStackVersion              2.0
PSCompatibleVersions           {1.0, 2.0}
SerializationVersion           1.1.0.1
PSRemotingProtocolVersion      2.1

PS C:\Windows\System32\WindowsPowerShell\v1.0> [Environment]::Version

Major  Minor  Build  Revision
-----  -----  -----  --------
2      0      50727  6387 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T18:01:01.683

可以通过右键单击项目、选择并编辑字段中的字符串来将命令行开关添加`-version 2`到项目。`Start Menu``Properties``Target`

此修复程序还清除了错误消息

> The local farm is not accessible. Cmdlets with FeatureDependencyId are not registered.

I was getting this message when launching SharePoint 2010 Management Shell.

# c - 不需要的字符被添加到 C 中的字符串中

> ID：12905181
> 
> 赞同：-2
> 
> 时间：2012-10-15T22:57:57.447
> 
> 标签：c, arrays, string, strcat

我有一个程序可以从输入文件中为您提供送货地址。然而，在其中一个字符串 order.add_one 的开头，将一个数字添加到字符串的开头，该数字每次都相当于变量“choice”。为什么要这样做？

```
#include <stdio.h>
#include <math.h>
#include <string.h>

//structure
typedef struct
{char cust_name[25];
 char cust_id[3];
 char add_one[30];
 char add_two[30];
 char bike;
 char risky;
 int number_ordered;
 char cust_information[500];
 }ORDER;

 ORDER order;

int main(void){
fflush(stdin);
system ( "clear" );

        FILE *fpt;
        fpt = fopen("input.txt", "r");

            if (fpt==NULL){
                printf("Text file did not open\n");
                return 1;
                }

                printf("Enter Customer ID: ");
                scanf("%s", &order.cust_id);

                char choice;
                choice = order.cust_id[0];

                char x[3];
                int w, u, y, z;  
                char a[10], b[10], c[10], d[10], e[20], f[10], g[10], i[1], j[1];
                int h;
                printf("%s value of c", c);

                if (choice >='1'){
            while  ((w = fgetc(fpt)) != '\n' ){
            }
            }
                if (choice >='2'){
                while  ((u = fgetc(fpt)) != '\n' ){
                }
                }
                if (choice >='3'){
                while  ((y = fgetc(fpt)) != '\n' ){
                }
                }
                if (choice >= '4'){
                while  ((z = fgetc(fpt)) != '\n' ){
                }
                }
                printf("\n");
                fscanf(fpt, "%s", x);

                    fscanf(fpt, "%s", a);
                    printf("%s", a);
                    strcat(order.cust_name, a);

                    fscanf(fpt, " %s", b);
                    printf(" %s", b);
                    strcat(order.cust_name, " ");
                   strcat(order.cust_name, b);

                    fscanf(fpt, "%s", c);
                    printf(" %s", c);
                    strcat(order.add_one, "\0");
                    strcat(order.add_one, c);

                    fscanf(fpt, "%s", d);
                    printf(" %s", d);
                    strcat(order.add_one, " ");
                    strcat(order.add_one, d);

                    fscanf(fpt, "%s", e);
                    printf(" %s", e);
                    strcat(order.add_two, e);

                    fscanf(fpt, "%s", f);
                    printf(" %s", f);
                    strcat(order.add_two, " ");
                    strcat(order.add_two, f);

                    fscanf(fpt, "%s", g);
                    printf(" %s", g);
                    strcat(order.add_two, " ");
                    strcat(order.add_two, g);
                    strcat(order.add_two, "\0");

                    fscanf(fpt, "%d", &h);
                    printf(" %d", h);
                    order.number_ordered = h;

                    fscanf(fpt, "%s", i);
                    printf(" %s", i);
                    order.bike = i[0];

                    fscanf(fpt, "%s", j);
                    printf(" %s", j);   
                   order.risky = j[0];
                  fclose(fpt);

                  printf("%s %s %s %d %c %c", order.cust_name, order.add_one, order.add_two, order.number_ordered, order.bike, order.risky);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:34:43.050

这是一个重大错误：

```
char ..., i[1], ...

...

fscanf(fpt, "%s", i); 
```

此调用`fscanf`将*覆盖*其他内存，即使它只读取一个字符也会`fscanf` *添加*第二个字符，即特殊字符串终止字符`'\0'`。

如果您将其他数组的大小与输入文件中字段的大小*完全相同*，那么您的所有输入都会发生这种情况。

# c# - signalR 的 Firefox 错误，但不影响任何内容

> ID：12905186
> 
> 赞同：1
> 
> 时间：2012-10-15T22:59:01.100
> 
> 标签：c#, asp.net, signalr

使用 signalR 时，我在 Firefox 中收到以下 2 个错误，但我不知道为什么：

```
Timestamp: 10/15/2012 3:53:48 PM
Error: The connection to http://localhost:81/signalr/connect?transport=serverSentEvents&connectionId=84a7f433-0cc8-4baf-93e9-d4c3ca968466&connectionData=%5B%7B%22name%22%3A%22Chat%22%7D%5D&tid=7 was interrupted while the page was loading.
Source File: http://localhost:81/Scripts/jquery.signalR-0.5.3.min.js
Line: 9 
```

和

```
Timestamp: 10/15/2012 3:53:50 PM
Error: no element found
Source File: http://localhost:81/signalr/abort?transport=serverSentEvents&connectionId=84a7f433-0cc8-4baf-93e9-d4c3ca968466
Line: 1 
```

SignalR 似乎一切正常，我的应用程序在所有浏览器中都按预期工作，但我只在 Firefox 中得到这些错误。有任何想法吗？

# c++ - 在编译时从目标文件中替换符号。例如换出 main

> ID：12905187
> 
> 赞同：6
> 
> 时间：2012-10-15T22:59:07.447
> 
> 标签：c++, g++

这是用例：

我有一个`.cpp`文件，其中实现了功能。例如说它具有以下内容：

`[main.cpp]`

```
#include <iostream>

int foo(int);

int foo(int a) {
    return a * a;
}

int main() {
    for (int i = 0; i < 5; i += 1) {
        std::cout << foo(i) << std::endl;
    }

    return 0;
} 
```

我想对这个文件中的函数执行一些自动化测试，`foo`但需要替换掉`main()`函数来做我的测试。最好我希望有一个像这样的单独文件，我可以在该文件之上链接：

`[mymain.cpp]`

```
#include <iostream>
#include <cassert>

extern int foo(int);

int main() {
    assert(foo(1) == 1);
    assert(foo(2) == 4);
    assert(foo(0) == 0);
    assert(foo(-2) == 4);        

    return 0;
} 
```

我希望（如果可能的话）避免更改原始`.cpp`文件以执行此操作 - 尽管如果这是不可能的，这将是我的方法：

1.  替换`"(\s)main\s*\("`==>`"\1__oldmain\("`
2.  像往常一样编译。

我的目标环境是带有 g++ 的 linux 环境。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T15:39:15.507

我讨厌回答我自己的问题，但这是我最终在手册页深处找到的解决方案`g++`，我已经对其进行了测试，并且它可以满足我的要求...

`g++`具有`-D`允许您在编译目标文件时定义宏的标志。我知道您正在考虑“啊宏”，但请听我说……您可以使用宏定义来有效地重命名符号。就我而言，我可以运行以下命令来生成我的学生代码的目标文件，而不需要他们的主文件：`g++ -D main=__students_main__ main.cpp -c -o main.nomain.o`.

这将创建一个对象文件，其`int main`定义为`int __students_main__`. 现在这不一定可以直接调用，因为他们可以将 main 定义为或使用and`int main(void)`的各种组合，但它允许我有效地编译出它们的函数。`argc``argv`

最终编译如下：

```
g++ -c -D main=__students_main__ main.cpp -o main.nomain.o
g++ -c mymain.cpp -o mymain.o
g++ main.nomain.o mymain.o -o mymainstudentsfoo.out 
```

出于我的目的，我想创建一个可以自动完成此任务的 Makefile（ish），我觉得这与此讨论相关，所以我将发布我想出的内容：

```
HDIR=./ # Not relevant to question, but we have headers in a separate directory
CC=g++
CFLAGS=-I $(HDIR)
NOMAIN=-D main=__student_main__ # The main renaming magic

.SECONDARY: # I forget exactly what this does, I seem to remember it is a hack to prevent deletion of .o files

cpp = $(wildcard *.cpp)
obj = $(patsubst %.cpp,%.o,$(cpp))
objnomain = $(patsubst %.cpp,%.nomain.o,$(cpp))

all: $(obj) $(objnomain)

clean:
        rm -f *.o *.out

%.nomain.o: %.cpp
        $(CC) $(CFLAGS) $(NOMAIN) -c $^ -o $@

%.o: %.cpp
        $(CC) $(CFLAGS) -c $^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T02:24:35.840

您可以使用*`--allow-multiple-definition`选项`ld`：

`[a.c]`

```
#include <stdio.h>

int foo() { return 3; }
int bar() { return 4; }

int main(void)
{
    printf("foo: %i\n", foo());
    return 0;
} 
```

`[b.c]`

```
#include <stdio.h>

int bar();

int main(void)
{
    printf("bar: %i\n", bar());
    return 0;
} 
```

`[shell]`

```
$ gcc -Wall -c a.c
$ gcc -Wall -c b.c

$ gcc -Wl,--allow-multiple-definition a.o b.o -o foobar && foobar
foo: 3
$ gcc -Wl,--allow-multiple-definition b.o a.o -o foobar && foobar
bar: 4 
```

*：风险自负:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:27:47.653

我支持'djechlin 的建议。但是，如果您想要快速而肮脏的东西，这里有一个建议：

您可以定义一个宏并像这样包装您的函数调用，

```
#ifdef MYTESTING
#define ASSERTEQUAL(fn, parm, ret) \
assert( fn ( parm ) == ret )
#else
#define ASSERTEQUAL(fn, parm, ret) fn ( parm )
#endif 
```

并在您的主函数中使用以下调用， ASSERTEQUAL( foo, i, 4);

使用以下编译标志来启用自定义的宏行为。

```
-DMYTESTING 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T01:44:59.353

在编译时不可能这样做。您需要一个链接时间解决方案。（或使用预处理器。）

在任何一种情况下，您可能都希望将“常规”和“测试”符号分开，并有选择地将它们的源文件包含在编译中，或者将目标文件包含在链接中。*

虽然我宁愿使用单元测试框架或至少`NDEBUG`对于`assert()`s.

*例如：

```
#ifdef TESTING
#include "main-testing.c"
#else
#include "main.c"
#endif 
```

或者

```
ifdef TESTING
OBJS += main-testing.o
else
OBJS += main.o
endif 
```

更新：我刚刚意识到您正在专门寻找一个解决方案，其中 main-testing.o 的 main 将覆盖 main.o 的（对吗？）。我会保留这个答案并为“覆盖”解决方案添加另一个答案。

# wcf - 从 jQuery 调用启用 AJAX 的 WCF 服务

> ID：12905189
> 
> 赞同：2
> 
> 时间：2012-10-15T22:59:28.973
> 
> 标签：wcf, jquery, jquery-mobile

我正在使用 PhoneGap 和 jQuery Mobile 开发移动应用程序。我的目标是创建一个 Web 服务，使客户端（移动）能够查询数据库。

经过一番研究，我发现启用 AJAX 的服务可能就是我想要的。因此，我首先创建了一个支持 AJAX 的 WCF 服务，现在我只添加了以下方法：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json)]
public string GetString()
{
    return "Hello there";
} 
```

我的 web.config 看起来像这样：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

    <system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="WebApplication1.MobileServiceAspNetAjaxBehavior">
                    <enableWebScript />
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
            multipleSiteBindingsEnabled="true" />
        <services>
            <service name="WebApplication1.MobileService">
                <endpoint address="" behaviorConfiguration="WebApplication1.MobileServiceAspNetAjaxBehavior"
                    binding="webHttpBinding" contract="WebApplication1.MobileService" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

完成此服务后，我使用以下方法从客户端调用：

```
$.ajax({
    type: "POST",
    url: "http://localhost:11634/MobileService.svc/GetString",
    contentType: "application/json",
    data: "{}",
    dataType: "json",
    success: function (result) {
    $("#textbox").text(result);
    },        
    error: function (textStatus) {
        alert(textStatus);
    }
}); 
```

调用服务时，我收到以下错误`[object Object]`。您能否指导我做错了什么以及我是否使用了正确的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:36:55.003

正如 Tariqulazam 正确指出的那样，[Object object] 不是错误，而是响应对象。要访问数据，您可以修改代码以读取：

```
success: function (result) {     
    var data = result.d
    $("#textbox").text(data);     
}, 
```

如果您想查看教科书示例，以下看起来像是使用 WCF Web 服务的 jQuery 代码的一个很好的示例：

[使用 jQuery 使用 WCF 服务](https://stackoverflow.com/questions/5756103/consuming-wcf-service-using-jquery)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:30:03.593

您需要将 $.ajax({ ... }) 包装在函数调用中。这样就调用了特定的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:04:19.687

由于您没有传递参数，因此我会将其更改为 GET 调用，并删除 ajax 调用的数据部分。您返回它的方式也是 XML 格式，将响应格式更改为 JSON

```
 [OperationContract]
    [WebGet(UriTemplate = "/GetString", RequestFormat = WebMessageFormat.Json)]
    public string GetString()
    {
        return "Hello there";
    }

$.ajax({     
    type: "GET",     
    url: "http://localhost:11634/MobileService.svc/GetString",     
    contentType: "application/json",     
    dataType: "json",     
    success: function (result) {     
    $("#textbox").text(result);     
    },             
    error: function (textStatus) {     
        alert(textStatus);     
    }     
}); 
```

# php - '调用非对象上的成员函数 get()'？

> ID：12905191
> 
> 赞同：5
> 
> 时间：2012-10-15T22:59:46.987
> 
> 标签：php, symfony

使用 symfony2。我有一个侦听器类，它试图从不同的类（控制器）调用方法，如下所示：

```
 $authenticate = new AuthenticationController();
        $authenticate->isTokenValid($token); 
```

而控制器的 isTokenValid 方法：

```
public function isTokenValid($token) {

    $conn = $this->get('database_connection'); 
```

正在抛出错误

```
Fatal error: Call to a member function get() on a non-object in /home/content/24/9254124/html/newsite/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 246 
```

如果我以正确的方式加载控制器方法（在 url 中使用路由）它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T23:15:59.963

Symfony2 使用依赖注入模式，您必须注入包含所有服务（如数据库连接）的容器：

```
$authenticate = new AuthenticationController();
$authenticate->setContainer($this->container);
$authenticate->isTokenValid($token); 
```

当然，我在这里假设您的侦听器类是`ContainerAware`

[+] 要让你的监听器 ContainerAware，传递`@service_container`给它（示例表单`services.yml`）

```
my.listener:
    class: ACME\MyBundle\ListenerController
    arguments: [ @service_container ]
    tags:
        - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
    kernel.event_listener:
        event: kernel.controller 
```

然后在你的监听器类的构造函数中：

```
public function __construct($container = null){
    $this->container = $container;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T06:29:17.517

我正在添加另一个答案，因为@dev-null-dweller 建议的是一种不好的做法：几乎在每种情况下，您最好只注入您需要的服务 - 而不是整个容器：

```
use Doctrine\DBAL\Connection;

public function __construct(Connection $connection)
{
    $this->connection = $connection;
} 
```

```
my_listener:
    arguments: [ @database_connection ] 
```

# bash - 在 Jenkins 上构建的设置大师

> ID：12905196
> 
> 赞同：0
> 
> 时间：2012-10-15T23:00:37.790
> 
> 标签：bash, jenkins, master, .bash-profile, slave

我将 jenkins 从一台服务器移动到另一台服务器，虽然大多数事情似乎都在工作，但我无法再在 master 上构建。

当我在 master 上运行作业时，没有获取 bash 配置文件，所以我丢失了所有路径。为了调试，我设置了一个与 master 具有相同凭据的 slave，它工作得很好。我得到了回显用户名和机器名称的工作，无论是在“主”还是在同一台机器上设置的从属服务器上运行，它们都是相同的。

关于如何让 jenkins 在 master 上运行时获取 bash 配置文件的任何想法？

编辑：我刚刚意识到，如果我从命令行手动启动 jenkins，我不会遇到这个问题。例如，下面的第一个命令有效，第二个无效：

```
$ nohup java -jar "${JENKINS_PATH}" --httpPort=${HTTP_PORT} > ${LOG_PATH} 2>&1 &  # WORKS
$ /sbin/service jenkins start  # DOESN'T WORK 
```

在启动脚本中启动jenkins的命令和我在命令行中运行的命令是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:48:25.593

应该检查新配置的设置，例如：用户/组成员资格、文件权限、...

还可以安装（升级）Jenkins，它将再次复制产品的文件并尝试重新配置初始化细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:50:33.083

如果作业设置为使用 Ant，那么您可以在`~/.antrc`文件中放置任何初始化。这被解释为好像它是 Linux/Mac 上的 shell 脚本。您可以通过强制读取初始化文件来对路径或其他变量进行任何设置，例如：

```
. /etc/profile
. ~/.bash_profile 
```

它在第一个示例中为您工作的原因是 java 进程是从继承环境的命令提示符启动的。在第二种情况下，它正在启动可以作为不同用户和不同环境运行的服务。

如果此方法不起作用，那么您可能会发现在 jenkins 服务启动时会调用一个脚本。尝试`man service`查找每个服务的配置文件所在的位置，然后尝试强制包含上述 bash 配置文件。

# ios - Openudid 价值不持久

> ID：12905198
> 
> 赞同：1
> 
> 时间：2012-10-15T23:00:52.770
> 
> 标签：ios, ios5, ios6, testflight, udid

我有一个在设备之间同步数据的应用程序。至关重要的是，我们始终了解用户正在使用的设备，以便我们能够正确同步。我们已经实现了 OpenUDID，但注意到一些测试用户在安装和运行新版本时获得新的 openUDID 时出现了一些奇怪的问题。

一些测试团队正在使用 ios5 和一些 ios6，我们正在尝试缩小导致生成新 openUDID 的条件。

大声思考-可能是这些情况中的任何一种。在安装新应用程序（我们应用程序的版本）时，ios5 或 6 会在这里产生差异吗？使用 testflight 为我们安装新版本。当我们更新版本时，该流程是否会导致手机上出现新的 oUDID 其他应用程序？手机硬重启（电源+家庭）15秒应用程序崩溃，卸载然后重新安装

任何提前帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:43:54.237

OpenUDID 使用 UIPasteboard 方法来存储唯一值，但有一些限制。当手机关机并重新启动时，它不应该重置，但我认为安装 iOS6 很有可能重置粘贴板存储。

如果您能够找到一个用户始终没有相同的值，即使他们没有更新到新的操作系统版本，则可能不太可能出现另一个应用程序弄乱该值或者如果 iOS6 更有可能重置或使 UIPasteboard 过期。您可以考虑制作自己的代码以保存到粘贴板。OpenUDID 的好处是其他网络可以共享相同的 ID 用于跨应用跟踪，因此如果您不打算将其用于此目的，您可以考虑实施自己的解决方案。我认为不可能仅针对 iOS6，但如果可以，那么您可以使用他们的新组织唯一标识符，这可能会更加可靠。

# c# - 具有 Action() 委托的任务并行库

> ID：12905199
> 
> 赞同：0
> 
> 时间：2012-10-15T23:01:05.190
> 
> 标签：c#, task-parallel-library

有人可以解释一下为什么这段代码不起作用：

```
...
foreach (VisualChunk chunk in SortedChunks)
{
    System.Action a = () => MyFunction_Threaded(chunk);
    Console.Write("Synchronous : ");
    a.Invoke();
    System.Threading.Tasks.Task.Factory.StartNew(
                                        a,
                                        CancellationToken.None,
                                        TaskCreationOptions.None,
                                        TaskScheduler.Default)
} 
...

private void MyFunction_Threaded(VisualChunk chunk)
{
        Console.WriteLine(chunk.ChunkID);
} 
```

它在控制台给我以下输出：

```
Synchronous : 0
Synchronous : 1
Synchronous : 2
Synchronous : 3
Synchronous : 4
Synchronous : 4294967291
Synchronous : 4294967292
Synchronous : 4294967293
Synchronous : 4294967294
Synchronous : 4294967295
Synchronous : 4294967296
Synchronous : 4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
4294967297
Synchronous : 4294967298
4294967298 
```

事实上，当安装 .net framework 4.5（win 8 或 VS2012）时，这段代码运行良好。当只安装 4.0 时，这个问题就出现了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:20:02.990

是的，正如@usr 在上面的评论中提到的那样，您的代码中的问题是您有“修改过的闭包”，其中编译器在构建汇编语言时有点误解了您想要做的事情。在 c# 语言中，这是一个非常糟糕的设计选择。要绕过它，您需要立即在循环中制作变量的副本：

```
foreach (VisualChunk chunk in SortedChunks)
{
  var chunkA = chunk;
  System.Action a = () => MyFunction_Threaded(chunkA);
  ... 
```

但是，我不得不问这是什么意思（即你想用这段代码完成什么）？

# java - 有人可以帮助解释这个 indexOf() 实现是如何工作的吗？

> ID：12905202
> 
> 赞同：0
> 
> 时间：2012-10-15T23:01:52.557
> 
> 标签：java, linked-list

这是Oracle 网站上的`indexOf()`in示例实现。`LinkedList`我对`if`循环在这里的工作方式有点困惑：

```
public int indexOf(E e) {
    for (ListIterator<E> it = listIterator(); it.hasNext(); )
        if (e == null ? it.next() == null : e.equals(it.next()))
            return it.previousIndex();
    // Element not found
    return -1;
} 
```

所以`ListIterator`对象是在列表的头部创建的。`for`循环一直持续到迭代器到达列表的末尾，并且`if`循环检查是否找到了目标对象。我不明白的部分是为什么`if`循环检查`it.next() == null`什么时候`e == null`？当输入 e 为空时，有人可以帮助我了解它是如何完成的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:05:58.093

循环检查是否`it.next() == null`只有`e == null`这样做是为了在评估时避免 NullPointerException `e.equals(it.next())`。

如果`e != null`，则调用常规`e.equals()`方法。

`null`是可以插入到 a 的有效“元素” `LinkedList`，因此必须考虑到这一点。

不插入最后一个元素的位置。请注意，与链接列表中的最后一个元素为 的教科书数据结构不同`null`，在这里 - 当您到达最后一个元素时 -`it.hasNext()`将被评估为 false，而不会让您看到这个“垃圾”元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:05:18.070

如果`e`是`null`，该`indexOf()`方法将进行迭代，直到`null`在您传递的可迭代对象中找到另一个元素并返回其索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:08:48.237

我认为您误解了[三元运算符](http://en.wikipedia.org/wiki/?%3a#Java)的情况。

这一行：

```
if (e == null ? it.next() == null : e.equals(it.next())) 
```

检查**e 是否为 null**，如果是，那么它将检查**迭代器的下一个元素是否为 null**（这有效地停止了迭代操作以避免[NullPointerException](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)），否则：（如果 e**不为 null** - 即它有其中一些值），执行比较：

```
e.equals(it.next()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:12:16.643

`if (e == null ? it.next() == null : e.equals(it.next()))`- 这是一个java三元运算符

`it.next() == null`是否为空检查（返回真或假以查看这是否是最后一个元素）如果为真

`return it.previousIndex();`执行

如果 e 不为空，则

`e.equals(it.next())`

执行，如果那是真的，

`return it.previousIndex();`执行

这是您想要索引的元素的索引。希望我的解释不会令人困惑。

# php - 在 PHP 中处理来自 MySQL 的数组中的数百万条记录？

> ID：12905205
> 
> 赞同：1
> 
> 时间：2012-10-15T23:02:36.633
> 
> 标签：php, mysql, arrays

我正在开发一个广告管理系统，最近，我们在一个高流量网站上进行了一些测试。***我将每个印象作为记录存储在数据库中，带有时间戳、广告 ID、区域 ID 和网站 ID***。

我会选择日期范围内的所有数据，并使用 PHP 来组织记录（按天等）。那是低效的，所以我做了两个查询

```
GROUP BY date(`impressions`.timestamp) 
```

第一个查询检索`count`展示次数，第二个查询获取相关标签列表。

我的问题是这样的：

我需要查询的不仅是总体印象，还包括按区域和天的印象，我不能使用 PHP 来组织这个数据数组，因为它有数百万个点。

```
SELECT `zones`.name as zoneName, `impressions`.*
from `impressions`, `zones` 
WHERE `impressions`.website_id = "14" 
AND `zones`.website_id="14" 
AND `zones`.zone_id=`impressions`.zone_id 
AND `impressions`.timestamp 
BETWEEN "2012-10-08 00:00:00" AND "2012-10-15 23:59:59"
ORDER BY `impressions`.timestamp ASC 
```

这可能会返回数百万条记录。然后我使用 PHP 将返回的数据分类到区域中。

例如，这是我的 PHP 排序后的结果数组。该数组表示给定日期的区域和他们收到的展示次数。在处理大型数组时，使用什么查询来尽可能接近这一点以最小化内存开销？

```
Array
(
[labels] => Array
    (
        [Oct 8th] => "Oct 8th"
        [Oct 9th] => "Oct 9th"
        [Oct 10th] => "Oct 10th"
    )

[final] => Array
    (
        [0] => Array
            (
                [name] => Blog Skyscraper
                [data] => Array
                    (
                        [0] => 449
                        [1] => 499
                        [2] => 558
                    )

            )

        [1] => Array
            (
                [name] => Latest News Right
                [data] => Array
                    (
                        [0] => 805
                        [1] => 809
                        [2] => 760
                    )

            )

        [2] => Array
            (
                [name] => Photos Right
                [data] => Array
                    (
                        [0] => 788
                        [1] => 786
                        [2] => 743
                    )

            )

        [3] => Array
            (
                [name] => Banner Zone
                [data] => Array
                    (
                        [0] => 793
                        [1] => 796
                        [2] => 747
                    )

            )

        [4] => Array
            (
                [name] => Mini Right Bottom
                [data] => Array
                    (
                        [0] => 784
                        [1] => 778
                        [2] => 742
                    )

            )

        [5] => Array
            (
                [name] => Mini Right Top
                [data] => Array
                    (
                        [0] => 790
                        [1] => 787
                        [2] => 743
                    )

            )

    ) 
```

)

# android - 以编程方式检索 Android 库的版本信息

> ID：12905209
> 
> 赞同：2
> 
> 时间：2012-10-15T23:02:58.077
> 
> 标签：android, android-manifest

> **可能重复：**
> [如何检索 android sdk 版本？](https://stackoverflow.com/questions/1882883/how-to-retrieve-the-android-sdk-version)

如何以编程方式检索 Android 库的版本信息？

我编写了一个应用程序，将一些逻辑放入库中。在我的帮助信息框中，我想显示实际应用程序的版本号，以及它使用的底层库。

[这篇文章](http://groups.google.com/group/android-developers/browse_thread/thread/1748d6e98fa6a2db#) 表明这​​是不可能的，因为库清单信息在编译时会丢失。然而，帖子（接近尾声）也暗示了它可能很快成为可能的想法（帖子来自 2010 年）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T23:06:43.590

虽然今天显然可以进行一些清单合并，但这对您没有一点帮助，因为系统中没有地方可以在清单中记录库项目的版本号，更不用说在操作系统中的某个地方您可以通过 SDK 访问。

我只是在库中放置一个字符串资源并使用它（`R.string.my_super_library_version`或类似的）。

# asp.net - 将对象传递给 mvc 中的操作方法将属性放在查询字符串中

> ID：12905214
> 
> 赞同：0
> 
> 时间：2012-10-15T23:03:29.893
> 
> 标签：asp.net, asp.net-mvc

我将一个对象传递给一个操作方法，该操作方法显示视图，但它在查询字符串中具有所有属性，我不希望这样（我有一个无法在 url 中传递的长 json 字符串）。如何传入模型对象而不将其包含在查询字符串中？此外，当您有一个强类型视图时，模型的对象值存储在哪里？谢谢你的帮助。

```
 //This works fine when I am calling /controller/uploader
        public ActionResult Uploader(Model model)
        {
        //logic
        return View(model);
        }

        //But when I am on another method and want to call uploader it does pass the object but puts //all the data in a querystring
        public void DoSomething(string val, string anotherval){
        Model model = new Model();
        Uploader(model);//This passes the object but when uploader page shows it has all the    //model object properties in querystring and I do not want that.

 return RedirectToAction("Uploader",model);//or this does the same thing
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:29:56.547

尝试在 html 表单上使用 POST 方法：

```
<form action="/uploader" method="POST">
    <!-- maybe some input elements? -->
    <input type="submit" />
</form> 
```

这将在请求正文中以 Form Encoded 的形式传输数据，并将数据保留在查询字符串之外。

# html - 将 div 在其他 div 内居中对齐，并将图像垂直和水平居中对齐

> ID：12905218
> 
> 赞同：1
> 
> 时间：2012-10-15T23:04:02.187
> 
> 标签：html, css, alignment

我正在尝试实现以下目标：我在页面的中心有一个中心 div（包装器），无论是垂直还是水平。在那个 div 里面我想要另外 2 个 div，其中一个将包含一个徽标，另一个将包含一些文本。徽标图像还必须垂直和水平对齐到其 div 的中心。目前这就是我所拥有的：

![在此处输入图像描述](../Images/1036fcf9a5b385142db6872b2ef543e1.png)

这是我的 HTML 和 CSS 的 jsfiddle：http: [//jsfiddle.net/7cQhG/](http://jsfiddle.net/7cQhG/)

如何使徽标 div 居中（仅水平居中，顶部边距为 10px），并使徽标图像在该 div 内居中，水平和垂直，就像现在一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:36:47.333

有什么理由必须将徽标作为 img 吗？

我已经采取了你给的起点，并把一个 jsFiddle 叉子放在一起：http: [//jsfiddle.net/mori57/HDmkZ/](http://jsfiddle.net/mori57/HDmkZ/)

我取出了 img 标签，并将其用作背景图像。“中心中心”理论上应该在其容器内居中，并且由于它是透明的 png，因此您的背景颜色仍会按您的意愿显示。

让我知道这是否适合您，或者如果您有任何其他问题。

作为一个侧边栏，你真的不需要（你真的不应该）在你的 CSS 中指定你的标签。唯一真正合适的地方是如果您将默认值分配给特定标签......否则，当您使用那里的那些 ID 时，特异性规则已经开始接管。

请注意，我不清楚您想对徽标下方的文本做什么，所以我没有做任何样式。

# java - 为什么 Netty 客户端连接 future.operationComplete 在调用者线程中被调用？

> ID：12905227
> 
> 赞同：0
> 
> 时间：2012-10-15T23:05:25.463
> 
> 标签：java, tcp, netty, nonblocking

下面我演示了如何使用 Netty 进行连接`NioClientSocketChannelFactory`。Connect 返回一个未来，我可以检查连接是否成功/失败。

**我的理解是连接过程是非锁定的，所以 operationComplete 方法将由 netty 线程（不在调用者线程内）调用，所以调用者线程将退出。**

大多数情况下，在我拥有的各种 Windows 部署中，它都是这样工作的。

但是在其中一个部署中，我注意到当连接失败时，`operationComplete`在我的调用者线程而不是 netty 线程中调用该方法。抛出的异常也被调用者线程捕获。我没想到会这样。

在我的代码中，当连接失败时，我重新尝试连接（下面未演示）......并且由于它发生在我的调用者线程中，我永远不会从我的连接调用中返回，因为`operationComplete`在我的调用者线程中调用了。

我究竟做错了什么？注意-无论如何我都没有`future.awaitUninterruptibly`电话。

```
public static void main(String[] args)
{
        String host = "localhost";
        int port = 5555;
        ChannelFactory factory = new NioClientSocketChannelFactory(Executors
                        .newCachedThreadPool(), Executors.newCachedThreadPool());
        MyHandler handler = new MyHandler();
        PipelineFactory factory = new PipelineFactory(handler);
        ClientBootstrap bootstrap = new ClientBootstrap(factory);
        ChannelFuture future = bootstrap.connect(new InetSocketAddress(host, port));

        future.addListener(new ChannelFutureListener()
        {
                @Override
                public void operationComplete(ChannelFuture future) throws Exception
                {
                    if (future.isSuccess()) {
                        // SUCCESS
                    }
                    else
                    {
                        // FAILURE
                    }
                }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:44:15.057

您不应该对通知实际 ChannelFutureListener 的 Thread 做出任何假设。大多数时候这将是 Netty 的 IO-Thread (Worker)，但有时这也可以是调用者线程。

我仍然不明白为什么在那种情况下它不会为你“返回”。

# algorithm - 使用矩阵完成算法恢复图形

> ID：12905228
> 
> 赞同：1
> 
> 时间：2012-10-15T23:05:38.063
> 
> 标签：algorithm, graph, matrix, social-networking

是否有任何矩阵完成算法可用于仅使用少量边来重建图？

有许多算法可以恢复和完成只有几个采样条目的未知矩阵。据我所知，这些算法中的许多都适用于低秩矩阵，这对于图邻接矩阵来说是不正确的。像 SVT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:48:48.847

不幸的是，许多表示为矩阵的自然图类型被证明是高等级的（例如树、循环和网格）。从这个意义上说，问题不是*矩阵完成*问题，例如Cai、Candes 和 Shen在[矩阵完成的奇异值阈值算法中所述。](http://www-stat.stanford.edu/~candes/papers/SVT.pdf)

这意味着，如果没有低秩​​的约束，问题是从线性代数病态的角度来看的，无法解决。

# xml - 用 XML 表示图

> ID：12905230
> 
> 赞同：2
> 
> 时间：2012-10-15T23:05:57.210
> 
> 标签：xml, graph

嗨，用 XML 表示图形的最佳方法是什么，其中一个节点可以是父节点的子节点，也可以是另一个子节点的父节点。它可以引用自己，并且多个节点可以有相同的父节点。一个节点可以有多个父节点。所有节点都来自同一类。我想有效地构建它，这样如果我可以从父节点了解子节点，我就可以转到特定的子标签，而不必遍历所有节点。是否可以？例如这里是一个概述，

```
A->B,C,D

B->C,D 
```

它可能看起来像

```
<Node name=A>
 <childNode name=B>
 <childNode name=C>
 <childNode name=D>
</Node>

<Node name=B>
 <childNode name=C>
 <childNode name=D>
</Node> 
```

那么还有比这更好的方法吗？每当我从 A 即 B 得到一个孩子时，我基本上必须遍历所有节点并将名称属性与 B 匹配以找到代表 B 的节点。我能以某种方式更快地做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T23:52:10.180

既然你有一个图，而不是你最初想到的树，为什么不使用[GraphML](http://graphml.graphdrawing.org/)呢？

> GraphML 是一种全面且易于使用的图形文件格式。它由描述图形结构属性的语言核心和添加特定应用数据的灵活扩展机制组成。
> 
> 与许多其他图形文件格式不同，GraphML 不使用自定义语法。相反，它基于 XML，因此非常适合作为各种服务生成、归档或处理图的公分母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:47:06.297

好吧，我不能说我完全理解您的问题，但我认为您正在尝试从 XML 文件以高级语言重建（有向）图，对吗？了解您在高级语言中的表示形式会有所帮助。或者语言，实际上。假设 C++ 和邻接表：

我首先创建一个`map<string, Node*>`，将名称映射到节点。我的 XML 看起来像这样：

```
<edge from='A' to='B' />
<edge from='A' to='C' />
<edge from='A' to='D' />
<edge from='B' to='C' />
<edge from='B' to='D' /> 
```

这是相当紧凑的，我可以用 SAX 解析器来解析它，这总是很好的。当我按顺序读取边缘时，我检查我的地图中是否已经有节点：如果没有，我存储它们：

```
if(mapping.find(from) == map.end()) map.insert(make_pair(from, new Node()));
if(mapping.find(to) == map.end()) map.insert(make_pair(to, new Node())); 
```

一旦两个末端节点都在地图中，我们可以通过以下方式添加边：

```
mapping[from]->add_egde_to(mapping[to]); 
```

解析完成后，您将拥有地图中的节点，并按名称很好地排序。

无论如何，您可能想查看 Wikipedia's summary about [graph representations](http://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29#Representations)，这可能会给您一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-18T19:04:32.037

看看 RDF/XML。

RDF 是由三元组（主语、谓语、宾语）组成的语义网络（链接数据）的简单数据模型。它可以表示图形，并且可以以多种格式序列化，包括 xml、json (json-ld) 和 turtle。

# node.js - express.js 有主目录的概念吗？

> ID：12905234
> 
> 赞同：1
> 
> 时间：2012-10-15T23:06:38.460
> 
> 标签：node.js, express

我有一个快速项目，其中有一个像这样的目录结构，

*   我的应用
    *   路线
        *   index.js
    *   意见
    *   上市
    *   组件
        *   工具栏
    *   测试
        *   组件
        *   工具栏

现在让我们从我的路线说我想要求组件工具栏我这样做

工具栏 = 需要（__dirname + '/../components/toolbar'）

现在，当我对路线进行测试时，我需要要求路线。当我这样做时，我在运行时收到一个错误，即找不到工具栏文件。

是否有一些全局可用的，比如说 __express_home 可以在我的需求中使用，这样我就不会遇到这个问题？然后我会这样使用它，

工具栏 = 要求（__express_home + '/components/toolbar'）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:09:28.813

你可以这样做：

```
toolbar = require('../components/toolbar') 
```

这是 express 的 github repo 中的一个[示例](https://github.com/visionmedia/express/blob/master/examples/route-separation/index.js)。

```
var express = require('../..')
  , app = express()
  , site = require('./site')
  , post = require('./post')
  , user = require('./user'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:21:10.450

只需使用您所在位置的相对路径 require() 它。

./routes/index.js ./config.js

来自 ./routes/index.js

```
var cfg = require('../config'); 
```

# java - Java 文字字符串：运行时错误的字符集

> ID：12905239
> 
> 赞同：9
> 
> 时间：2012-10-15T23:07:02.337
> 
> 标签：java, string, character-encoding

我在 Java 中遇到文字字符串的字符集问题。

如下图所示，我有一个名为 TITULO 的静态对象，带有文字字符串常量参数“Título”。当我运行程序时，这个字符串被读作“TÃ-tulo”。我不知道为什么。

![Eclipse 调试视图](../Images/eec67a54a25b5b22be0b06733ae09062.png)

我在 Eclipse 项目属性窗口和 Tomcat 设置中探索了字符集设置，但它们都使用 UTF-8 作为选项。

我正在运行 Tomcat 7、Eclipse Helios 和 Windows SO。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:04:40.903

您可以尝试在 server.xml 中将 Tomcat URIEncoding 设置为 UTF-8

```
<Connector port="8090" URIEncoding="UTF-8"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:07:25.287

Eclipse 编辑器中的代码与 tomcat 正在执行的代码不同。

我在 /target 文件夹中找到了一个 .war 文件。我删除了这个战争文件并且有效！tomcat 正在运行这个旧战争文件中的类。

我最近将这个正在运行的 Eclipse 项目转换为一个 Maven 项目。我可能在创建这个war文件的这个过程中执行了'mvn package'。

感谢大家帮助我找到了这个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:41:05.953

我相信您正在查看的字符串 (this.id) 实际上不是静态常量字符串 Titulo。

在代码中的某处，您正在读取正确的 unicode String Titulo，将其转换为字节数组，然后将其转换回 String 并将其传递给 Style 的构造函数。字符串在转换过程中被损坏。除非您显示调用 Style 的构造函数的代码的堆栈跟踪，否则不能多说。

# ruby-on-rails - 如何使用 Underscore.js 和 HAML 插入 if/else 语句？

> ID：12905241
> 
> 赞同：5
> 
> 时间：2012-10-15T23:07:02.997
> 
> 标签：ruby-on-rails, underscore.js, haml, interpolation, underscore.js-templating

我试图让 if/else interpolate 与 Underscore.js 和 HAML 一起工作，但无济于事。我已经将 Underscore.js 中的插值设置更改为以下内容：

```
_.templateSettings = {
  interpolate : /\{\{([\s\S]+?)\}\}/g
}; 
```

当我试图在像 {{ value }} 这样的符号中插入一个值时，这很有效。但是，我无法使 if/else 语句起作用。我有以下内容：

```
{{ if (true) { }}
  {{ val }}
{{ } }} 
```

我收到一个 Javascript 异常“Uncaught SyntaxError: Unexpected token if”。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T23:41:05.577

下划线模板使用三组不同的分隔符：

1.  `evaluate``<% ... %>`：默认情况下，这是用于 JavaScript 的位。
2.  `interpolate``<%= ... %>`：默认情况下，这是用于转储变量的内容。
3.  `escape`: 作为`interpolate`但也转义 HTML，`<%- ... %>`默认情况下。

这些大多匹配 ERB 语法。您正在尝试将插值语法与不是表达式的 JavaScript 一起使用：

```
{{ if(true) { }} 
```

但这不起作用，因为`if`它不是 JavaScript 中的表达式。

您可能想要覆盖所有三种模式：

```
_.templateSettings = {
  evaluate    : /\{\{([\s\S]+?)\}\}/g,
  interpolate : /\{\{=([\s\S]+?)\}\}/g,
  escape      : /\{\{-([\s\S]+?)\}\}/g
}; 
```

然后这样说：

```
{{ if (true) { }}
  {{= val }}
{{ } }} 
```

如果您可以将模板限制为简单的替换，那么您可以在模板中使用`interpolate`和`{{expr}}`。

# css - wordpress / css - “返回”按键的代码是什么

> ID：12905242
> 
> 赞同：1
> 
> 时间：2012-10-15T23:07:07.140
> 
> 标签：css, wordpress

因此，作为大多数开发人员，我在所有工作中都使用 CSS RESET。我遇到的一个小问题是，在 wordpress 中开发自定义任何东西时，我使用了这个重置，而我遇到的问题是，由于用户在写帖子时所说的重置，例如，使用斜体的能力/粗体等不可用。我的意思是它是但由于所说的重置它没有应用。

我刚进去并从重置块及其工作中删除了`em`/ `i`/ `b`etc标签，但是，还有一个给我最大的问题，那就是当有人按下回车键在文本等之间创建空间时，什么也没有发生。他们必须手动进入并放入`<br/>`标签以创建分隔符。

也就是说，它让我想到....换行符/回车键的css到底是什么？

下面是我的 CSS 重置中的内容...不知道我还需要删除什么。

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn,  img, ins, kbd, q, s, samp,
small, strike, sub, sup, tt, var, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0px;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

a{text-decoration:none;} 
```

我试过用谷歌搜索，但除了 p 标签或 div 标签等...不知道我必须删除什么才能获得通过按回车键创建的回车键/空间以返回默认值。

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:00:56.090

要创建诸如返回之类的分隔，您可以使用 :after 或 :before ，如下所示：

```
 p:after {
        content: '\13';
        display: block;
    } 
```

这将在每个段落元素之前创建一个新行。您可以将此技巧与任何类型的元素一起使用。这是小提琴：http: [//jsfiddle.net/napy84/VQLTq/](http://jsfiddle.net/napy84/VQLTq/)

# sqlalchemy - 如何为邻接关系定义祖父母

> ID：12905248
> 
> 赞同：0
> 
> 时间：2012-10-15T23:07:42.337
> 
> 标签：sqlalchemy

```
class Node(Base):
    ...
    id = Column(Numeric, primary_key=True)

    parent_id = Column(Numeric, ForeignKey('nodes.id'))
    parent = relation("Node", lazy="joined", remote_side=id)

    grandparent = ? 
```

我不能使用 hybrid_property 因为它没有定义目标映射器类。

如何使用 column_property、relation、association_proxy 或其他方式设置祖父关系？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:27:59.337

它适用于 SQLAlchemy==0.7.9

```
class Node(Base):
    ...
    grandparent_id  = association_proxy('parent','parent_id')
    grandparent = association_proxy('parent','parent') 
```

# facebook - 更新封面出现在墙上改了图片，我可以用api隐藏或删除这个帖子吗？

> ID：12905249
> 
> 赞同：1
> 
> 时间：2012-10-15T23:07:51.393
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-page

更新封面出现在墙上改变了图片，我可以用api隐藏或删除这个帖子吗？

```
 $json_object = $facebook->api($fanpage."/?  fields=cover&access_token=".$fanpage_token, 'get');
      echo $page_settings_url.'<pre>';
      print_r ($json_object);

      $json_object = $facebook->api($fanpage.'/'.$json_object['cover']['cover_id'],'delete');
      echo 'borrado'.$json_object;*/
      //echo $json_object['stdClass']['cover'];
      //$response = file_get_contents($page_settings_url);
      //$resp_obj = json_decode($response,true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:40:30.373

如果我对您的问题的解释是正确的，您想上传页面封面照片而页面时间轴上没有出现故事吗？

这在[页面 API 文档](https://developers.facebook.com/docs/reference/api/page/)中有所介绍- 请参阅**设置封面照片**部分

您还可以`no_feed_story`在上传中添加一个参数来抑制新闻提要故事。

所以上传封面照片的代码就变成了：

`$json_object = $facebook->api($fanpage."/? fields=cover&access_token=".$fanpage_token, 'POST', array('no_feed_story' => 1));`

# scala - Scala 编译器没有在 scala:testCompile 中推断类型

> ID：12905254
> 
> 赞同：4
> 
> 时间：2012-10-15T23:08:18.300
> 
> 标签：scala, maven, compilation

如何管理 scala-compiler-plugin 以在 Eclipse 中进行编译？src/scala 和 src/java 编译得很好，但是当我编译测试时，我得到

这些测试在 Eclipse 中运行得很好，我相信它是因为 Eclipse 使用的编译器中的一个标志。尝试在 maven 中编译测试时遇到相同问题的任何人？

```
[ERROR] MissionDataSet.scala:23: error: type mismatch;
[INFO]  found   : com.thegamifiers.fanwards.model.mission.objective.Objective
[INFO]  required: ?{val asInstanceOf: ?}
[INFO] Note that implicit conversions are not applicable because they are ambiguous: 
```

# google-drive-api - 使用 Google Drive 查找外部共享

> ID：12905255
> 
> 赞同：0
> 
> 时间：2012-10-15T23:08:37.440
> 
> 标签：google-drive-api

我目前有一个应用程序可以搜索文档 acl 并报告任何外部共享。由于弃用了文档列表 api，我想将此应用程序转换为 Google Drive，但由于从 Drive 返回的 Permission 对象中不再存在用户电子邮件地址，有没有办法检测这些共享？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:09:04.740

[使用配置文件 api https://developers.google.com/google-apps/profiles/](https://developers.google.com/google-apps/profiles/)将您从 Owner 字段中获得的用户名与目录中的用户匹配。如果用户不在目录中，则用户是外部用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T15:27:07.223

我建议您使用“域”字段来定义您的文档是否与外部用户共享。您必须将此字段与您拥有的域一起使用。

谢谢，

# python - 如何有效地迭代多个生成器？

> ID：12905257
> 
> 赞同：3
> 
> 时间：2012-10-15T23:08:52.000
> 
> 标签：python, generator

我有三个不同的生成器，它们从网络生成数据。因此，每次迭代可能需要一段时间才能完成。

我想混合对生成器的调用，并考虑轮询（在[此处](http://docs.python.org/library/itertools.html)找到）。问题是每个呼叫都被阻止，直到它完成。

有没有办法同时循环所有的生成器而不阻塞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:47:51.833

你可以用`iter()`我[`ThreadPool`](https://github.com/lunixbochs/meta/blob/master/snippets/python/threadpool.py)课堂上的方法来做到这一点。

`pool.iter()`产生线程函数返回值，直到所有修饰+调用的函数完成执行。装饰所有异步函数，调用它们，然后循环`pool.iter()`以捕获发生的值。

例子：

```
import time
from threadpool import ThreadPool
pool = ThreadPool(max_threads=25, catch_returns=True)

# decorate any functions you need to aggregate
# if you're pulling a function from an outside source
# you can still say 'func = pool(func)' or 'pool(func)()
@pool
def data(ID, start):
    for i in xrange(start, start+4):
        yield ID, i
        time.sleep(1)

# each of these calls will spawn a thread and return immediately
# make sure you do either pool.finish() or pool.iter()
# otherwise your program will exit before the threads finish
data("generator 1", 5)
data("generator 2", 10)
data("generator 3", 64)

for value in pool.iter():
    # this will print the generators' return values as they yield
    print value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:15:14.640

简而言之，不：没有线程就没有好方法。

有时 ORM 会增加某种 peek 函数或回调，这些函数会在数据可用时发出信号。否则，您需要生成线程才能执行此操作。如果线程不是一个选项，您可以尝试将数据库库切换为异步库。

# mysql - Joomla 迁移的错字？

> ID：12905258
> 
> 赞同：-2
> 
> 时间：2012-10-15T23:09:25.630
> 
> 标签：mysql, joomla, typo3

谁能给我一些关于从 Typo 到 Joomla 的 CMS 迁移的见解？我有一个相当大的 Typo 网站，需要更新并在新主机上放入 Joomla。我最关心的是数据库方面。两个站点都使用 MySQL，但在某些时候，我将不得不在两者之间进行数据迁移，我不知道在此过程中是否存在重大缺陷。有没有人这样做过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:25:42.423

在谷歌上环顾四周，我找不到任何关于从 Typo 迁移到 Joomla 的信息。我认为迁移太复杂了，因为它们是完全不同的系统，而且 Typo 不像 wordpress 那样受欢迎。老实说，您可能需要考虑从头开始创建 Joomla 站点。

[下载 Joomla](http://www.joomla.org/download)

我不确定您当前在您的站点上使用哪些扩展，但我确信[Joomla 扩展目录](http://extensions.joomla.org)将为您提供满足您需求的大部分内容。

至于模板，我不确定你是要使用商业的还是非商业的，所以我会提供一些。

**商业的：**

[由于可靠性、风格和移动兼容性， Yootheme](http://yootheme.com)和[Rockettheme](http://rockettheme.com)一直是我在模板方面的首选。

**非商业：**

Yootheme 的[主主题](http://www.yootheme.com/themes/warp-framework)是完全免费的，它基于他们的 Warp 框架。这是一个相当基本的模板，但经过一些修改，它可以看起来更好。[Shape5](http://www.shape5.com/product_details/free_templates/)提供 3 个免费模板，Vertex 是我的最爱。[Joomlart](http://www.joomlart.com/joomla/templates/showcase?tag=free&catid=28)有 2 个免费模板。最后，[JoomForest](http://www.joomforest.com/joomforest-templates/joomla-templates/free-joomla-templates.html)提供了 2 个免费模板，JF-Corporate 是我的最爱，因为它还附带了 Kunena 论坛和 JomSocial 的模板，很难找到好的免费模板。

我知道这并不能回答您的问题，但我肯定会建议从头开始，因为它很可能会为您省去麻烦。

# report - 为什么 Sonar 仪表板错过了运行的 PHPUnit 测试？

> ID：12905261
> 
> 赞同：2
> 
> 时间：2012-10-15T23:09:40.437
> 
> 标签：report, phpunit, sonarqube, dashboard, sonar-runner

我正在使用带有 PHP 插件 1.1 的 Sonar 3.2.1 (sonar-runner 2.0) 和使用 phpunit.xml 配置的 PHPUnit 3.7.7。问题是我的测试运行良好，但仪表板中没有关于它们的信息（“代码覆盖率”小部件）：仅存在“代码覆盖率”部分，但不存在“单元测试成功”部分。只有当我将`sonar.tests`sonar-project.properties 文件中的属性直接设置到我的测试文件夹时，才会出现“单元测试成功”部分，其中包含`[root]`每个测试文件的详细路径...请帮助我避免使用`sonar.tests`属性并正确获取有关仪表板和项目列表中的测试的信息。

这是 PHPUnit Sensor 在所有情况下的输出（有/无 `sonar.tests`属性）：

```
18:12:05.850 INFO  p.PhasesTimeProfiler - Sensor PHPUnit Sensor...
18:12:05.851 INFO  ractPhpConfiguration - Report file for: phpunit :
/project/src/.sonar/target/logs/phpunit.xml
18:12:05.851 INFO  PhpUnitConfiguration - Report file for: phpunit :
/project/src/.sonar/target/logs/phpunit.coverage.xml
18:12:05.851 INFO  .AbstractPhpExecutor - Executing PHPUnit with
command 'phpunit --configuration=../app/phpunit.xml
--log-junit=/project/src/.sonar/target/logs/phpunit.xml
--coverage-clover=/project/src/.sonar/target/logs/phpunit.coverage.xml'
18:12:05.851 INFO  .u.c.CommandExecutor - Executing command: phpunit
--configuration=../app/phpunit.xml
--log-junit=/project/src/.sonar/target/logs/phpunit.xml
--coverage-clover=/project/src/.sonar/target/logs/phpunit.coverage.xml
18:12:06.076 INFO  .u.c.CommandExecutor - PHPUnit 3.7.7 by Sebastian Bergmann.
18:12:06.076 INFO  .u.c.CommandExecutor -
18:12:06.076 INFO  .u.c.CommandExecutor - Configuration read from
/project/app/phpunit.xml
18:12:06.076 INFO  .u.c.CommandExecutor -
18:12:09.456 INFO  .u.c.CommandExecutor - .F
18:12:09.456 INFO  .u.c.CommandExecutor -
18:12:09.456 INFO  .u.c.CommandExecutor - Time: 4 seconds, Memory: 24.50Mb
18:12:09.456 INFO  .u.c.CommandExecutor -
18:12:09.456 INFO  .u.c.CommandExecutor - There was 1 failure:
18:12:09.457 INFO  .u.c.CommandExecutor -
18:12:09.457 INFO  .u.c.CommandExecutor - 1)
Acme\DemoBundle\Tests\Controller\DefaultControllerTest::testIndex
18:12:09.457 INFO  .u.c.CommandExecutor - Failed asserting that false is true.
18:12:09.457 INFO  .u.c.CommandExecutor -
18:12:09.457 INFO  .u.c.CommandExecutor -
/project/src/Acme/DemoBundle/Tests/Controller/DefaultControllerTest.php:15
18:12:09.458 INFO  .u.c.CommandExecutor -
                                        FAILURES!
                                        Tests: 2, Assertions: 2, Failures: 1.

18:12:10.213 INFO  .u.c.CommandExecutor - Generating code coverage
report in Clover XML format ... done
18:12:10.256 INFO  .AbstractPhpExecutor - PHPUnit succeeded with
returned code '1'.
18:12:10.256 INFO  ractPhpConfiguration - Report file for: phpunit :
/project/src/.sonar/target/logs/phpunit.xml
18:12:10.256 INFO  .PhpUnitResultParser - Parsing file:
/project/src/.sonar/target/logs/phpunit.xml
18:12:10.280 INFO  PhpUnitConfiguration - Report file for: phpunit :
/project/src/.sonar/target/logs/phpunit.coverage.xml
18:12:10.280 INFO  CoverageResultParser - Parsing file:
/project/src/.sonar/target/logs/phpunit.coverage.xml
18:12:10.754 INFO  p.PhasesTimeProfiler - Sensor PHPUnit Sensor done: 4904 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:01:30.277

有关信息，请在此处进行讨论：http: [//sonar.15.n6.nabble.com/PHPUnit-tests-run-well-Sonar-report-missed-tt5004070.html](http://sonar.15.n6.nabble.com/PHPUnit-tests-run-well-Sonar-report-missed-tt5004070.html)

问题解决后我会更新答案。

# javascript - 哪种技术更有效？

> ID：12905263
> 
> 赞同：0
> 
> 时间：2012-10-15T23:10:02.803
> 
> 标签：javascript

在 JavaScript 中，前者还是后者更高效？或者甚至有区别？

```
// Method one
var path = first_part + '/' + second_part + '/' + third_part;

// Method two
var path = [first_part, second_part, third_part].join('/'); 
```

除了节省多达两个角色之外，没有视觉上的理由更喜欢一个。但我很想知道在大多数 JavaScript 解释器中，一个解释器是否比另一个更快或更有效，如果是这样，是否显着如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:13:23.337

如果您需要更改分隔符，则第二种方法在维护方面更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:23:04.117

使用连接运算符比使用更快`join()`：

看：

*   [http://jsperf.com/concat-vs-vs-join](http://jsperf.com/concat-vs-vs-join)
*   [http://jsperf.com/array-join-or-concatenation](http://jsperf.com/array-join-or-concatenation)
*   [http://jsperf.com/concatenate-vs-join/2](http://jsperf.com/concatenate-vs-join/2)

也可以看看：

*   [为什么字符串连接比数组连接快？](https://stackoverflow.com/questions/7299010/why-is-string-concatenation-faster-than-array-join)

# asp.net - 我可以在没有 WIF 的情况下在 ASP.NET 中接收 SAML 2.0 消息吗？

> ID：12905265
> 
> 赞同：0
> 
> 时间：2012-10-15T23:10:41.933
> 
> 标签：asp.net, saml

我们计划从另一个网站接收 SAML 断言到我们的网站 (ASP.NET)。这里没有人使用过 SAML。我们只需要验证签名的断言，解密包含用户 ID 的令牌，如果我们可以验证它，将它们登录到我们的站点（验证/授权）。我们将表单身份验证用于所有其他身份验证。如果可能，我想避免安装 WIF，因为我的理解是我们必须在所有开发人员机器和服务器上安装运行时。我们的机器被政策锁定，因此安装它需要大量的文书工作。是否有 WIF 的替代品，它们在企业环境中使用是否现实？如果是这样，有人可以指出我正确的方向，一个很好的教程，视频，书或任何有例子的东西会有帮助吗？我查看了一些第三方组件，但我在我们的服务器上遇到了与 WIF 相同的问题（更不用说处理采购了）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:28:03.583

这是面向内部还是面向外部的应用程序？您可能需要查看 PingOne.com 应用程序提供商服务 (APS) [注意：我为 Ping 工作]。PingOne 为您处理所有 SAML 协议内容，并提供自助服务功能、报告等。无需安装 WIF……只需几行 .NET 代码（或其他）即可与 PingOne 提供的 RESTful 服务集成。

HTH-伊恩

# python - 使用 python 3.3 访问 mssql 数据库的最佳方法

> ID：12905266
> 
> 赞同：2
> 
> 时间：2012-10-15T23:10:48.390
> 
> 标签：python, sql-server, oracle11g

嗨，我正在学习 python，并试图在我的日常编码中更多地利用它。我使用 MSSQL 完成了很多工作，并且对使用 C#/LINQ 有点厌烦。使用 python 3.3 从 MSSQL（或 Oracle）访问数据的最有效方法是什么？

显然，我知道使用正确的工具来完成工作是一个问题，但是我希望能够推动自己更多地使用 python，即使它不是用于特定工作的正确工具，只是为了学习经验。

谢谢大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:16:08.790

查看[SQLAlchemy](http://www.sqlalchemy.org/)。它支持我认为你正在尝试做的事情。

# sql - SQL Server 视图从相关表中获取计数，其中 column = "True"

> ID：12905270
> 
> 赞同：0
> 
> 时间：2012-10-15T23:11:16.097
> 
> 标签：sql, sql-server, sql-view

我在 SQL Server 中有两个相关的表，存在一对多的关系（申请人、参考）。

我想要一个视图，该视图将从申请人表中检索所有数据，并向视图添加另一列，告诉我有多少相关的参考行，其中“完成”列为真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:17:38.400

像这样使用子查询：

```
select applicantfield1, applicantfield2, 
  (select count(*) from 
  reference where reference.applicantkey = applicant.applicantkey 
  and reference.complete = 1) AS referencecount
from applicant 
```

除非完整的字段在申请人表（不是参考表）中。如果是这样，它会更像这样：

```
select applicantfield1, applicantfield2, 
  (select count(*) from 
  reference where 
  reference.applicantkey = applicant.applicantkey) AS referencecount
from applicant
where applicant.complete = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:19:50.587

像下面这样的东西。你需要加入一张桌子。这将处理申请人也没有真实参考的情况。

```
SELECT A.*, isnull(r.comptotal,0) as CompleteTotal 
FROM Applicant as a Left Join 
   (SELECT ApplicantId, Count(Complete) as comptotal
    FROM Reference Where Complete=1 Group by ApplicantID) as r 
    on a.ApplicantId = r.applicantId 
```

# scala - Play Framework/Scala 表单中的特定于字段的错误消息

> ID：12905271
> 
> 赞同：7
> 
> 时间：2012-10-15T23:11:17.203
> 
> 标签：scala, playframework, playframework-2.0

在 Scala 表单助手中使用“nonEmptyText”约束时，我想自定义默认错误消息“此字段是必需的”。

这是我要自定义的示例：

```
 val form = Form(
    tuple("email" -> nonEmptyText, "password" -> nonEmptyText)
      verifying ("Invalid email or password.", result => result match {
        case (email, password) => {
          User.authenticate(email, password).isDefined
        }
      })) 
```

最好在我的 conf/messages 文件中提供一个特定于字段的错误：

```
error.email.required=Enter your login email address
error.password.required=You must provide a password 
```

但在最坏的情况下，我会对使用字段名称的通配符消息感到满意：

```
error.required=%s is required  
#would evaluate to "password is required", which I would then want to capitalize 
```

我在一些 Play 1.x 文档中看到了这个 %s 表达式，但它似乎不再起作用了。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T23:35:09.860

尝试放弃使用 a`nonEmptyText`并使用带有自定义验证的简单`text`字段：

```
tuple(
  "email" -> text.verifying("Enter your login email address", _.isDefined),
  "password" -> text.verifying("You must provide a password", _.isDefined)
) 
```

然后，您可以更进一步，将子句`String`内部交换为对对象的调用：`verifying``play.api.i18n.Messages`

```
tuple(
  "email" -> text.verifying(Messages("error.email.required"), _.isDefined),
  "password" -> text.verifying(Messages("error.password.required"), _.isDefined)
) 
```

*请注意，这是未经测试的代码，但它应该指出方向。*

祝你好运

# xpages - 如何在 appendItemValue 调用中获取 sessionScope 变量中的值

> ID：12905272
> 
> 赞同：0
> 
> 时间：2012-10-15T23:11:17.640
> 
> 标签：xpages

我创建了一个 sessionScope 变量，它包含一个字段名称列表和另一个由这些字段名称和存储在其中的值组成的集合。

allFieldNames 是包含所有字段名称的范围变量

allFieldNames
[0] T0Q1
[1] T0Q2
[2] T1Q1
[3] T2Q1
[4] T3Q1
[5] T4aQ1
[6] T5Q1
[7] T6Q1
[8] T7Q1

SS 价值
T0Q1 作为收购/购买/与另一家公司合并的一部分。
T0Q2 是
T1Q1 非常同意
T2Q1 同意
T3Q1 我拥有广泛活跃的专家和资源网络。
T4aQ1 我有时需要帮助
T5Q1 这些都不是。
T6Q1 在合理范围内
T7Q1 同意

```
var questions = @List(sessionScope.allFieldNames);
for( i=1; i < sessionScope.ssTotalQuestions; i++ ) {
    viewScope.put("x", @Subset(@Subset(questions,i),-1));
    newDoc.appendItemValue(x, viewScope.x);
} 
```

appendItemValue 确实创建了我想要的字段，但我遇到的问题是我无法获取匹配范围变量中的值。我知道是我的代码中的**viewScope.x**导致了问题，但我现在无法弄清楚如何识别和引用范围变量。

仅供参考，没有后端表单可以从中获取这些字段名称 - 此表单是动态创建的，所有字段都是通过此例程在表单上创建的，然后保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:46:02.423

这应该有效：

```
for( i=1; i < sessionScope.ssTotalQuestions; i++ ) {
    newDoc.replaceItemValue(sessionScope.allFieldNames[i], sessionScope.ssTotalQuestions[i]);
} 
```

（如果字段名称是您数据的一部分，您可能需要使用 indexOf(" ") 来查找第一个空白）。然而它有点脆弱......你在这里有名称/值对，所以你可能想用一个 HashMap 替换你的两个范围变量，这样你就可以确保你的问题永远不会用完字段。就像是：

```
viewScope.questions = new java.util.HashMap();
viewScope.questions.put("T0Q1","As a part of an acquiring/purchasing/merging with another company.");
... 
```

希望有帮助

# ios - 无法在 MKPinAnnotationView 上设置标题

> ID：12905274
> 
> 赞同：2
> 
> 时间：2012-10-15T23:11:27.627
> 
> 标签：ios, mapkit, mkannotation

我遵循了本教程： [http ://www.shawngrimes.me/2011/04/custom-map-pins-for-mapkit/#comment-193](http://www.shawngrimes.me/2011/04/custom-map-pins-for-mapkit/#comment-193)

但我无法添加标题和描述

（在这里查看我的代码[http://pastebin.com/03mDLc9q](http://pastebin.com/03mDLc9q)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:41:31.737

您正在尝试将 name 和 description 设置为注释视图的属性，您应该在注释对象上使用`title`and ，注释视图将在渲染标注时使用此对象的标题和副标题。`subtitle``MyAnnotationClass`

我将您的代码更改为在这里工作：http: [//pastebin.com/YRGYhQev](http://pastebin.com/YRGYhQev)

```
@interface MyAnnotationClass : NSObject<MKAnnotation>

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *subtitle;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

-(id) initWithCoordinate:(CLLocationCoordinate2D) coordinate;

@end

MyAnnotationClass.m

#import "MyAnnotationClass.h"

@implementation MyAnnotationClass

-(id) initWithCoordinate:(CLLocationCoordinate2D) coordinate{
    self=[super init];
    if(self){
        _coordinate = coordinate;
    }
    return self;
}

-(void) dealloc{
    [_title release];
    [_subtitle release];
    [super dealloc];
}
@end

ViewController.h

#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController<MKMapViewDelegate> {
    IBOutlet MKMapView *_myMapView;
    NSArray *_myAnnotations;
}

@property (nonatomic, retain) NSArray *myAnnotations;
@property (nonatomic, retain) IBOutlet MKMapView *myMapView;

@end

ViewController.m

#import "ViewController.h"
#import "AppDelegate.h"
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>
#import "PlaceMark.h"  
#import "MyAnnotationClass.h"
@interface ViewController ()

@end

@implementation ViewController
@synthesize myMapView = _myMapView;
@synthesize myAnnotations = _myAnnotations;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void) viewDidLoad{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];

    //Initialize annotation
    MyAnnotationClass *commuterLotAnnotation=[[MyAnnotationClass alloc] initWithCoordinate:CLLocationCoordinate2DMake(appDelegate.latitude , appDelegate.longitude)];
    commuterLotAnnotation.title = @"Hello title";
    commuterLotAnnotation.subtitle = @"Correct";

    MyAnnotationClass *overflowLotAnnotation=[[MyAnnotationClass alloc] initWithCoordinate:CLLocationCoordinate2DMake(appDelegate.latitude , appDelegate.longitude)];
    overflowLotAnnotation.title = @"Hello title";
    overflowLotAnnotation.subtitle = @"Correct";

    //Add them to array
    self.myAnnotations=[NSArray arrayWithObjects:commuterLotAnnotation, overflowLotAnnotation, nil];

    //Release the annotations now that they've been added to the array
    [commuterLotAnnotation release];
    [overflowLotAnnotation release];

    //add array of annotations to map
    [_myMapView addAnnotations:_myAnnotations];
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation{
    static NSString *parkingAnnotationIdentifier=@"ParkingAnnotationIdentifier";

    if([annotation isKindOfClass:[MyAnnotationClass class]]){
        //Try to get an unused annotation, similar to uitableviewcells
        MKAnnotationView *annotationView=[_myMapView dequeueReusableAnnotationViewWithIdentifier:parkingAnnotationIdentifier];

        //If one isn't available, create a new one
        if(!annotationView){
            annotationView=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:parkingAnnotationIdentifier];
            //Here's where the magic happens
            annotationView.image=[UIImage imageNamed:@"apple.gif"];
            annotationView.canShowCallout = YES;
        }
        return annotationView;
    }
    return nil;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:02:05.440

我看到本教程的`MyAnnotationClass`界面如下：

```
@interface MyAnnotationClass : NSObject 
```

当我使用时，`MKAnnotation`我将注释界面设置为：

```
@interface MyAnnotationClass : MKAnnotationView <MKAnnotation> 
```

然后在`MyAnnotationClass.m`文件中我有以下方法：

```
- (NSString *)title{
    return self.name;
}

- (NSString *)subtitle{
    return self.description;
} 
```

# image - Magento-在类别网格和列表页面上调整图像大小

> ID：12905277
> 
> 赞同：2
> 
> 时间：2012-10-15T23:11:57.160
> 
> 标签：image, magento, thumbnails

我需要将类别页面上 135x135 图像大小的默认图像大小更改为 187x140。我编辑了两个 .phtml 文件：

目录>产品>new.phtml 和目录>产品>list.phtml

并更改了以下内容 `<a href="...$this->helper('catalog/image')->init($_product, 'small_image')->***resize(187,140) ?>" width="187" height="140"*** alt="...></a>`

我还更改了 css .products-grid`.product-image { display:block; width:187px; height:140px; margin:0 0 0px; }`

我已经清除了现金，登录并退出。我的图片占位符已上传，上传时它们的大小正确。

我不明白为什么我的图像尺寸仍然显示为 135x135。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:06:04.427

即使在清除图像缓存、var cache en 会话之后，我也遇到了同样的问题。似乎另一个模块正在覆盖主题的 list.phtml 文件。查看您的 /app/design/frontend/default/default/template 文件夹中是否有覆盖主题文件的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:14:12.367

删除 /var/session 和 /var/cache 文件夹。这通常会清除任何缓存问题。

# android - 在发送到 android/linux 中的 hdmi 输出之前，可以轻松地将 ycbcr 转换为 rgb？

> ID：12905286
> 
> 赞同：2
> 
> 时间：2012-10-15T23:12:56.143
> 
> 标签：android, rgb, hdmi, dvi

MK802 android mini pc 屏幕有粉红色/不起作用，当通过 HDMI-DVI 线与 DVI 显示器一起使用时，可能是因为它正在输出 YCbCr HDMI 信号，虽然 DVI 仅支持 RGB。

我的问题是是否可以在通过 hdmi 输出之前将此信号转换为 RGB，如果可以，在 android/cyanogenmod 的哪个源文件中？我没有 android 编程经验，但我认为更改它并在之后构建它可能很容易，当我知道它可能在某个地方时。（我可以用 C 和 Cpp 编程一点）

或者MK802运行的还有更多的linux发行版，所以也许可以在X服务器的某个地方改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:56:33.437

我有一个来自 PQ Labs Inc 公司的 iStick [https://store.pqlabs.com/](https://store.pqlabs.com/)

它用：

*   处理器：ARM V8 / 1GHz
*   显卡：马里 400

我正在使用我在 2000 年初购买的 Fujitsu Plasmavision W 50 英寸 有一个 DVI 输入，设计师事先认为它是支持 HDCP 的 DVI-D。

我没有偏移问题但是洋红色问题是。

将浓缩下一部分关于 HDMI 的内容。HDMI 电缆是

*   A型连接器19pin
*   B 型 29pin 不属于此
*   C型

HDMI 1.3 规范中定义的迷你连接器，适用于便携式设备。[1][102][103] 它比 A 型插头连接器小（10.42 mm × 2.42 mm），但具有相同的 19 针配置。[102][104] 不同之处在于差分对的所有正信号都与其对应的屏蔽交换，DDC/CEC地分配给引脚13而不是引脚17，CEC分配给引脚14而不是引脚13，保留引脚是17 而不是针脚 14.[105] C 型迷你连接器可以使用 A 型到 C 型电缆连接到 A 型连接器。

注意接线

顺便说一句，我想出了一个让它工作的方法，成本约为 30.00 美元

我拿了一个从 www.monoprice.com 购买的 1x2 分配器开关单元，从 iStick 连接到它，并将 HDMI 电缆连接到 HDMI-DIV 适配器插头。

如果我使用 GE 2 设备开关（它是机械型开关），则存在洋红色。具有放大器的 monoprice 将可能是 C 类型的问题隔离到 A 类型的问题。

猜测是在设计时使用 C 型接线完成了输出插头的接线，如果商店购买的是针对针直连线 IE 1-1、2-2 等，这会是问题，只是买一个便宜但好的放大分离器，直到您的 DVI 设备死机

# makefile - 主生成文件

> ID：12905289
> 
> 赞同：1
> 
> 时间：2012-10-15T23:13:09.187
> 
> 标签：makefile

您好，我想为 3 个不同目录中的 3 个单独的 makefile 创建一个主文件。Makefiles 独立工作，但不是来自 mastermakefile（如下）。进入 A 目录后，我得到一个错误：make: Circular A <- A dependency drop. make: 'A' 是最新的。

```
PROG = A B C
TRGTS = A B C

$(PROG): $(TRGTS)

all: $(TRGTS)

A:
    cd ./A ; make a

B:
    cd ./B ; make b

C: 
    cd ./C ; make c

clean:
    / rm -f *.o *~
    cd ./A ; make clean
    cd ./B ; make clean
    cd ./C ; make clean 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:31:26.357

以下代码与威廉回答的几乎相同，但没有使用“for”循环语句。

```
subdirs := A B C

.PHONY: all $(subdirs)

all: $(subdirs)

$(subdirs):
    $(MAKE) -C $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:06:49.377

我对 makefile 生疏了，并且肯定知道以下不是最佳答案。但它现在可能会有所帮助......

```
TARGETS = A B C

.phoney: all
all:
    @for subdir in $(TARGETS); do \
      $(MAKE) -C $$subdir all || exit 1; \
    done 
```

请注意，缩进必须使用制表符，而不是空格

# c++ - 模板构建错误：架构 x86_64 的未定义符号：

> ID：12905292
> 
> 赞同：7
> 
> 时间：2012-10-15T23:13:20.153
> 
> 标签：c++

我正在尝试使用模板类，当我在 LWS 的一个文件中编译它时，它可以工作：

（链接失效）~http://liveworkspace.org/code/a9c412a7e683439dfa35a9363749369d~

但是当我尝试编译它由 3 个文件组成时，

stack.h 第 4 到 21 行

stack.cpp 第 24 到 48 行

main.cpp 第 49 行到结束

当我尝试编译这 3 个文件时，我得到

```
Undefined symbols for architecture x86_64:
  "Stack2<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::push(Node**, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)", referenced from:
      _main in ccCoizCT.o
  "Stack2<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::top(Node*&)", referenced from:
      _main in ccCoizCT.o
  "Stack2<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::pop(Node*&)", referenced from:
      _main in ccCoizCT.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

是的，我在 stack.cpp 和 main.cpp 文件中包含了 stack.h

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T23:31:29.130

听起来您需要将堆栈的模板定义放回头文件中。模板形成了代码生成计划，因此如果编译器看不到整个模板定义而只看到声明，则不会生成模板特定实例的代码。它只会信任该声明，并期望在链接时存在一个包含这些模板实例的对象文件。对此的解决方案是 1) 将模板定义保留在头文件中或 2) 预先生成所需的定义，以便链接器可以在链接时找到它们。

请参阅此处： [模板问题导致链接器错误（C++）](https://stackoverflow.com/questions/1639797/template-issue-causes-linker-error-c)

# c# - 用于泛型类型的 ASP.NET Web API 模型绑定器

> ID：12905295
> 
> 赞同：6
> 
> 时间：2012-10-15T23:13:51.480
> 
> 标签：c#, asp.net, asp.net-web-api, model-binding

根据[对应的 MVC 问题](https://stackoverflow.com/q/1487005/481904)，有没有办法为 ASP.NET Web API 中的泛型类型创建模型绑定器？

如果是，将如何处理活页夹中的类型检查和实例化？假设模型绑定器用于 URL 参数，考虑你有

```
[ModelBinder(typeof(MyTypeModelBinder))]
public class MyType<T>
{
//...
} 
```

和

```
public class MyTypeModelBinder : IModelBinder
{
public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
{
    // check if type if valid? Something like this...
        if (!(bindingContext.ModelType.IsGenericType && bindingContext.ModelType.GetGenericTypeDefinition() == typeof(MyType<>)))
        {
            return false;
        }
    // create instance...using Activator?
}

} 
```

# c++ - Qt - 意外的 GDB 退出

> ID：12905300
> 
> 赞同：2
> 
> 时间：2012-10-15T23:14:31.280
> 
> 标签：c++, qt, debugging, qt-creator

我正在尝试开发一个应用程序，该应用程序创建一个图像并使用双线性插值用彩色像素填充它，然后显示它。到目前为止，我的代码如下：

```
#include <QtCore/QCoreApplication>
#include <opencv/cv.h>
#include <opencv/highgui.h>
#include <iostream>
#include <string>
#include <sys/stat.h>

using namespace cv;

int main()
{
    Mat image;
    image.create( 500, 500, CV_8UC3);
    //upper left corner
    Vec3b ul( 255, 0, 0 );
    //upper right corner
    Vec3b ur( 0, 255, 0 );
    //bottom left corner
    Vec3b bl( 0, 0, 255 );
    //bottom right corner
    Vec3b br( 255, 0, 255 );

    //for(int y=0;y<image.rows; y++)
        //for(int x=0;x<image.cols;x++)

    // call function to add noise

    namedWindow("Colored Pixels");
    imshow("Colored Pixels", image);

    // shows image for 5 seconds
    waitKey(10000);
    return 0;
} 
```

当我在调试模式下运行我的程序时，我得到以下两个弹出窗口：

```
Unexpected GDB Exit 
The gdb process exited unexpectedly (code 0) 
```

和

```
Executable Failed
During startup program exited with code 0xc0000138 
```

我的调试器日志屏幕显示以下内容：

```
sStarting debugger 'GdbEngine' for ABI 'x86-windows-msys-pe-32bit'...
dStart parameters: 'pixelGradient' mode: 1
dABI: x86-windows-msys-pe-32bit
dExecutable: C:\Users\encore\Desktop\Lectures\Year 3\QtCreator\pixelGradient-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug\debug\pixelGradient.exe  [terminal]
dDirectory: C:\Users\encore\Desktop\Lectures\Year 3\QtCreator\pixelGradient-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug
dDebugger: C:\QtSDK\pythongdb\python_2.7based\gdb-i686-pc-mingw32.exe
dProject: C:\Users\encore\Desktop\Lectures\Year 3\QtCreator\pixelGradient (built: C:\Users\encore\Desktop\Lectures\Year 3\QtCreator\pixelGradient-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug)
dQt: C:\QtSDK\Desktop\Qt\4.8.1\mingw
dQML server: 127.0.0.1:3768
dSysroot: 
dDebug Source Loaction: 
dSymbol file: 
dDumper libraries:  C:\QtSDK\Desktop\Qt\4.8.1\mingw\\qtc-debugging-helper\ C:\QtSDK\QtCreator\qtc-debugging-helper\168937759\ C:\Users\encore\AppData\Local\Nokia\QtCreator\qtc-debugging-helper\168937759\
d
dDebugger settings: 
dUseAlternatingRowColours: false  (default: false)
dFontSizeFollowsEditor: false  (default: false)
dUseMessageBoxForSignals: true  (default: true)
dAutoQuit: false  (default: false)
dLogTimeStamps: false  (default: false)
dVerboseLog: false  (default: false)
dCloseBuffersOnExit: false  (default: false)
dSwitchModeOnExit: false  (default: false)
dUseDebuggingHelper: true  (default: true)
dUseCodeModel: true  (default: true)
dShowThreadNames: false  (default: false)
dUseToolTips: false  (default: false)
dUseToolTipsInLocalsView: false  (default: false)
dUseToolTipsInBreakpointsView: false  (default: false)
dUseAddressInBreakpointsView: false  (default: false)
dUseAddressInStackView: false  (default: false)
dRegisterForPostMortem: false  (default: false)
dLoadGdbInit: true  (default: true)
dScriptFile:   (default: )
dWatchdogTimeout: 20  (default: 20)
dAutoEnrichParameters: false  (default: false)
dTargetAsync: false  (default: false)
dMaximalStackDepth: 20  (default: 20)
dAlwaysAdjustStackColumnWidths: false  (default: false)
dShowStandardNamespace: true  (default: true)
dShowQtNamespace: true  (default: true)
dSortStructMembers: true  (default: true)
dAutoDerefPointers: true  (default: true)
dAlwaysAdjustLocalsColumnWidths: false  (default: false)
dListSourceFiles: false  (default: false)
dSkipKnownFrames: false  (default: false)
dEnableReverseDebugging: false  (default: false)
dAllPluginBreakpoints: true  (default: true)
dSelectedPluginBreakpoints: false  (default: false)
dAdjustBreakpointLocations: true  (default: true)
dAlwaysAdjustBreakpointsColumnWidths: false  (default: false)
dNoPluginBreakpoints: false  (default: false)
dSelectedPluginBreakpointsPattern: .*  (default: .*)
dBreakOnThrow: false  (default: false)
dBreakOnCatch: false  (default: false)
dBreakOnWarning: false  (default: false)
dBreakOnFatal: false  (default: false)
dAlwaysAdjustRegistersColumnWidths: false  (default: false)
dAlwaysAdjustSnapshotsColumnWidths: false  (default: false)
dAlwaysAdjustThreadsColumnWidths: false  (default: false)
dAlwaysAdjustModulesColumnWidths: false  (default: false)
dState changed from DebuggerNotReady(0) to EngineSetupRequested(1).
dQUEUE: SETUP ENGINE
dCALL: SETUP ENGINE
dTRYING TO START ADAPTER
dENABLING TEST CASE: 0
dSTARTING C:/QtSDK/pythongdb/python_2.7based/gdb-i686-pc-mingw32.exe -i mi
dGDB STARTED, INITIALIZING IT
<1show version
<2-list-features
<3set print object on
<4set breakpoint pending on
<5set print elements 10000
<6set overload-resolution off
<7handle SIGSEGV nopass stop print
<8set unwindonsignal on
<9pwd
<10set width 0
<11set height 0
<12set auto-solib-add on
<13-interpreter-exec console "maintenance set internal-warning quit no"
<14-interpreter-exec console "maintenance set internal-error quit no"
<15-interpreter-exec console "disassemble 0 0"
<16-interpreter-exec console "python execfile('C:/QtSDK/QtCreator/share/qtcreator/dumper/bridge.py')"
<17-interpreter-exec console "python execfile('C:/QtSDK/QtCreator/share/qtcreator/dumper/dumper.py')"
<18-interpreter-exec console "python execfile('C:/QtSDK/QtCreator/share/qtcreator/dumper/qttypes.py')"
<19-interpreter-exec console "bbsetup"
dADAPTER SUCCESSFULLY STARTED
dNOTE: ENGINE SETUP OK
dState changed from EngineSetupRequested(1) to EngineSetupOk(3).
dQUEUE: SETUP INFERIOR
dState changed from EngineSetupOk(3) to InferiorSetupRequested(4).
dQUEUE: SETUP INFERIOR
dCALL: SETUP INFERIOR
sSetting up inferior...
<20set substitute-path C:/iwmake/build_mingw_opensource C:/QtSDK/Desktop/Qt/4.8.1/mingw
<21set substitute-path C:/ndk_buildrepos/qt-desktop/src C:/QtSDK/Desktop/Qt/4.8.1/mingw
<22set substitute-path C:/qt-greenhouse/Trolltech/Code_less_create_more/Trolltech/Code_less_create_more/Troll/4.6/qt C:/QtSDK/Desktop/Qt/4.8.1/mingw
 Attaching to 1260 (6412)
dTaking notice of pid 1260
<23attach 1260
>=thread-group-added,id="i1"
>~"GNU gdb (GDB) 7.2\n"
>~"Copyright (C) 2010 Free Software Foundation, Inc.\n"
>~"License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\n"
>~"This GDB was configured as \"i686-pc-mingw32\".\nFor bug reporting instructions, please see:\n"
>~"<http://www.gnu.org/software/gdb/bugs/>.\n"
>&"show version\n"
>~"GNU gdb (GDB) 7.2\n"
>~"Copyright (C) 2010 Free Software Foundation, Inc.\n"
>~"License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\n"
>~"This GDB was configured as \"i686-pc-mingw32\".\nFor bug reporting instructions, please see:\n"
>~"<http://www.gnu.org/software/gdb/bugs/>.\n"
>1^done
dPARSING VERSION: 1^done
d
dSUPPORTED GDB VERSION GNU gdb (GDB) 7.2
dCopyright (C) 2010 Free Software Foundation, Inc.
dLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
dThis is free software: you are free to change and redistribute it.
dThere is NO WARRANTY, to the extent permitted by law.  Type "show copying"
dand "show warranty" for details.
dThis GDB was configured as "i686-pc-mingw32".
dFor bug reporting instructions, please see:
d<http://www.gnu.org/software/gdb/bugs/>.
dGNU gdb (GDB) 7.2
dCopyright (C) 2010 Free Software Foundation, Inc.
dLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
dThis is free software: you are free to change and redistribute it.
dThere is NO WARRANTY, to the extent permitted by law.  Type "show copying"
dand "show warranty" for details.
dThis GDB was configured as "i686-pc-mingw32".
dFor bug reporting instructions, please see:
d<http://www.gnu.org/software/gdb/bugs/>.
d
dUSING GDB VERSION: 70200, BUILD: 2010
>2^done,features=["frozen-varobjs","pending-breakpoints","thread-info","python"]
dFEATURES: 2^done,data={features=["frozen-varobjs","pending-breakpoints","thread-info","python"]}
d
>&"set print object on\n"
>3^done
>&"set breakpoint pending on\n"
>4^done
>&"set print elements 10000\n"
>5^done
>&"set overload-resolution off\n"
>6^done
>&"handle SIGSEGV nopass stop print\n"
>~"Signal        Stop\tPrint\tPass to program\tDescription\n"
>~"SIGSEGV       Yes\tYes\tNo\t\tSegmentation fault\n"
>7^done
>&"set unwindonsignal on\n"
>8^done
>&"pwd\n"
>~"Working directory C:\\Users\\encore.\n"
>9^done
>&"set width 0\n"
>10^done
>&"set height 0\n"
>11^done
>&"set auto-solib-add on\n"
>12^done
>13^done
>14^done
>&"A syntax error in expression, near `0'.\n"
>15^error,msg="A syntax error in expression, near `0'."
>16^done
>17^done
>18^done
>~"dumpers=[{type=\"QLinkedList\",formats=\"\"},{type=\"QSize\",formats=\"\"},{type=\"QFileInfo\",formats=\"\"},{type=\"QAbstractItemModel\",formats=\"\"},{type=\"std__stack\",formats=\"\"},{type=\"QTextDocument\",formats=\"\"},{type=\"QTJSC__JSValue\",formats=\"\"},{type=\"__gnu_cxx__hash_set\",formats=\"\"},{type=\"QStringList\",formats=\"\"},{type=\"QRegion\",formats=\"\"},{type=\"std__wstring\",formats=\"\"},{type=\"QString\",formats=\"Inline,Separate Window\",editable=\"true\"},{type=\"QTextCodec\",formats=\"\"},{type=\"QBasicAtomicInt\",formats=\"\"},{type=\"QScriptValue\",formats=\"\"},{type=\"QTime\",formats=\"\"},{type=\"QSharedData\",formats=\"\"},{type=\"std__vector\",formats=\"\",editable=\"true\"},{type=\"QRegExp\",formats=\"\"},{type=\"QTextCursor\",formats=\"\"},{type=\"QxXmlAttributes\",formats=\"\"},{type=\"QDateTime\",formats=\"\"},{type=\"QList\",formats=\"\"},{type=\"QStandardItem\",formats=\"\"},{type=\"std__deque\",formats=\"\"},{type=\"QFixed\",formats=\"\"},{type=\"QHash\",formats=\"\"},{type=\"QSharedPointer\",formats=\"\"},{type=\"QUrl\",formats=\"\"},{type=\"std__set\",formats=\"\"},{type=\"std__list\",formats=\"\"},{type=\"std__basic_string\",formats=\"\"},{type=\"QPoint\",formats=\"\"},{type=\"QHostAddress\",formats=\"\"},{type=\"QStack\",formats=\"\"},{type=\"QScopedPointer\",formats=\"\"},{type=\"QRectF\",formats=\"\"},{type=\"QMultiMap\",formats=\"\"},{type=\"QMapNode\",formats=\"\"},{type=\"QModelIndex\",formats=\"Normal,Enhanced\"},{type=\"QLocale\",formats=\"\"},{type=\"QSharedDataPointer\",formats=\"\"},{type=\"QVariant\",formats=\"\"},{type=\"string\",formats=\"\",editable=\"true\"},{type=\"QBasicAtomicPointer\",formats=\"\"},{type=\"QVector\",formats=\"\",editable=\"true\"},{type=\"QDate\",formats=\"\"},{type=\"QFile\",formats=\"\"},{type=\"QAtomicInt\",formats=\"\"},{type=\"TBuf\",formats=\"\"},{type=\"QWeakPointer\",formats=\"\"},{type=\"QSizeF\",formats=\"\"},{type=\"__m128\",formats=\"As Floats,As Doubles\"},{type=\"boost__optional\",formats=\"\"},{type=\"wstring\",formats=\"\"},{type=\"QPointF\",formats=\"\"},{type=\"TLitC\",formats=\"\"},{type=\"QRect\",formats=\"\"},{type=\"QByteArray\",formats=\"\"},{type=\"QMap\",formats=\"\"},{type=\"boost__shared_ptr\",formats=\"\"},{type=\"QChar\",formats=\"\"},{type=\"QDir\",formats=\"\"},{type=\"QPixmap\",formats=\"\"},{type=\"QFlags\",formats=\"\"},{type=\"std__map\",formats=\"\"},{type=\"QHashNode\",formats=\"\"},{type=\"QTemporaryFile\",formats=\"\"},{type=\"QObject\",formats=\"\"},{type=\"Eigen__Matrix\",formats=\"\"},{type=\"std__string\",formats=\"\",editable=\"true\"},{type=\"QImage\",formats=\"Normal,Displayed\"},{type=\"QSet\",formats=\"\"},],hasInferiorThreadList=\"1\"\n"
>19^done
>&"set substitute-path C:/iwmake/build_mingw_opensource C:/QtSDK/Desktop/Qt/4.8.1/mingw\n"
>20^done
>&"set substitute-path C:/ndk_buildrepos/qt-desktop/src C:/QtSDK/Desktop/Qt/4.8.1/mingw\n"
>21^done
>&"set substitute-path C:/qt-greenhouse/Trolltech/Code_less_create_more/Trolltech/Code_less_create_more/Troll/4.6/qt C:/QtSDK/Desktop/Qt/4.8.1/mingw\n"
>22^done
>&"attach 1260\n"
>~"Attaching to process 1260\n"
>=thread-group-started,id="i1",pid="1260"
sThread group i1 created
>=thread-created,id="1",group-id="i1"
sThread 1 created
>~"[New Thread 1260.0x190c]\n"
s[New Thread 1260.0x190c]
>23^running
 Inferior attached, thread 6412 resumed
sSetting breakpoints...
dSetting breakpoints...
<24maint print msymbols C:/Users/encore/AppData/Local/Temp/gdb_ns_.Dq6408
>*running,thread-id="all"
>=thread-created,id="2",group-id="i1"
sThread 2 created
>~"[New Thread 1260.0xf9c]\n"
s[New Thread 1260.0xf9c]
>*running,thread-id="all"
>=thread-exited,id="2",group-id="i1"
sThread 2 in group i1 exited
>=thread-exited,id="1",group-id="i1"
sThread 1 in group i1 exited
>=thread-group-exited,id="i1"
sThread group i1 exited
>&"During startup program exited with code 0xc0000138.\n"
>23^error,msg="During startup program exited with code 0xc0000138."
dCOOKIE FOR TOKEN 23 ALREADY EATEN (InferiorSetupRequested). TWO RESPONSES FOR ONE COMMAND?
dNOTE: INFERIOR EXITED
dState changed from InferiorSetupRequested(4) to InferiorExitOk(16).
dState changed from InferiorExitOk(16) to InferiorShutdownOk(19).
dState changed from InferiorShutdownOk(19) to EngineShutdownRequested(20).
dQUEUE: SHUTDOWN ENGINE
sExecutable failed: During startup program exited with code 0xc0000138.
dCALL: SHUTDOWN ENGINE
dINITIATE GDBENGINE SHUTDOWN IN STATE 0, PROC: 2
<25-gdb-exit
>&"maint print msymbols C:/Users/encore/AppData/Local/Temp/gdb_ns_.Dq6408\n"
>24^done
dFOUND NON-NAMESPACED QT
dNOTE: INFERIOR SETUP OK
dState changed from EngineShutdownRequested(20) to InferiorSetupOk(6).
dState changed from InferiorSetupOk(6) to EngineRunRequested(7).
dQUEUE: RUN ENGINE
dCALL: RUN ENGINE
dNOTE: ENGINE RUN AND INFERIOR STOP OK
dState changed from EngineRunRequested(7) to InferiorStopOk(14).
dNOTE: INFERIOR RUN REQUESTED
dState changed from InferiorStopOk(14) to InferiorRunRequested(10).
sRunning requested...
<26-exec-continue
>25^exit
dGDB CLAIMS EXIT; WAITING
dGDB PROCESS FINISHED, status 0, code 0
dNOTE: ENGINE ILL ******
dState changed BY FORCE from InferiorRunRequested(10) to InferiorStopRequested(13).
dATTEMPT TO INTERRUPT INFERIOR
sStop requested...
dTRYING TO INTERRUPT INFERIOR
dCANNOT INTERRUPT 1260 
```

你知道我该如何处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:05:12.930

没关系，我只是重新安装了所有东西。似乎有些文件与我过去完成的另一个安装发生冲突；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:33:53.070

退出代码 0xc0000138 是`STATUS_ORDINAL_NOT_FOUND`（我检查了它`perl -MWin32::Status -E 'say $Win32::Status::INTEGER_TO_SYMBOL{ 0xc0000138 }'`，它也可以在 ntstatus.h 标头中找到，例如[http://source.winehq.org/source/include/ntstatus.h](http://source.winehq.org/source/include/ntstatus.h)）

“ordinal not found”错误意味着无法找到 DLL 提供的某些函数；可能加载了错误版本的 DLL。我不确定当 DLL 完全丢失时是否会产生相同的错误。

您能验证以下内容吗？

*   存在 OpenCV DLL
*   OpenCV DLL(s) 在 PATH
*   OpenCV DLL(s) 匹配`<opencv/*>`头文件的版本
*   OpenCV 库在您的 .pro 文件中列出；应该有一些`LIBS+=...`与 OpenCV 相关的陈述。这里有一个可能看起来像的例子 - [http://mobidevelopers.wordpress.com/2009/01/29/qt-and-opencv/](http://mobidevelopers.wordpress.com/2009/01/29/qt-and-opencv/)

# sharepoint - 排队用户配置文件时出现数据库错误

> ID：12905304
> 
> 赞同：1
> 
> 时间：2012-10-15T23:14:53.877
> 
> 标签：sharepoint, powershell, sharepoint-2010, user-profile

我正在尝试使用以下脚本枚举我的 SharePoint 环境中的用户配置文件：

```
$sc = [microsoft.sharepoint.spservicecontext]::getcontext((get-spsite $url))
$upm = new-object microsoft.office.server.userprofiles.userprofilemanager($sc)
$upm.getenumerator() 
```

但在执行时，我收到以下错误：

```
An error occurred while enumerating through a collection: Database error while queueing user profiles.. 
```

其他一些有用的信息：

```
$upm.count = 0
$sc.sitesubscriptionid = all zeroes 
```

用户配置文件枚举器应该返回数百个用户配置文件。是的，我是用户配置文件服务的管理员，是的，我在用于获取服务上下文的网站集上有网站集管理员。

此错误消息在 Internet 上的其他任何地方都没有出现，所以我认为值得在这里询问，即使我解决它对我的解决方案来说并不是那么重要。

# sql - 将数组传递给 Rails where 方法

> ID：12905305
> 
> 赞同：1
> 
> 时间：2012-10-15T23:14:56.273
> 
> 标签：sql, ruby-on-rails, ruby, where

所以我想动态地将过滤器参数传递给我的 where 方法所以基本上我有这个

```
@colleges = College.where(@filter).order(@sort_by).paginate(:page => params[:page], :per_page => 20) 
```

而@where 只是用这个方法构建的一个字符串

```
def get_filter_parameters
if params[:action] == 'index'
    table = 'colleges'
    columns = College.column_names
else
    table = 'housings'
    columns = Housing.column_names
end

filters = params.except(:controller, :action, :id, :sort_by, :order, :page, :college_id)
filter_keys = columns & filters.keys

@filter = ""
first = true

if filter_keys
    filter_keys.each do |f|
        if first
            @filter << "#{table}.#{f} = '#{filters[f]}'"
            first = false
        else
            @filter << " AND #{table}.#{f} = '#{filters[f]}'"
        end
    end
else
    @filter = "1=1"
end 
```

问题是我不知道将原始 SQL 放到这样的 where 方法中有多好。我知道通常你可以做 :state => 'PA' 之类的事情，但我该如何动态地做到这一点？

**更新**

好的，所以我现在传递一个哈希并拥有这个：

```
if params[:action] == 'index'
    columns = College.column_names
else
    columns = Housing.column_names
end

filters = params.except(:controller, :action, :id, :sort_by, :order, :page, :college_id)
filter_keys = columns & filters.keys

@filter = {}

if filter_keys
    filter_keys.each do |f|
        @filter[f] = filters[f]
    end
end 
```

这足以防止注射吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T23:26:27.397

在此代码中：

```
College.where(:state => 'PA') 
```

我们实际上是在传递一个哈希对象。这意味着这是等效的。

```
filter = { :state => 'PA' }
College.where(filter) 
```

因此，您可以构建此哈希对象而不是字符串：

```
table = "colleges"
field = "state"
value = "PA"

filter = {}
filter["#{table}.#{field}"] = value
filter["whatever"] = 'omg'

College.where(filter) 
```

* * *

但是，***请注意这一点！***

根据这些信息的来源，您将用户提供的字符串放入查询的字段名称中，从而使自己面临 SQL 注入攻击。如果使用得当，Rails 会清理查询中的值。但是，通常列名由应用程序代码固定，不需要进行清理。因此，您可能会通过这种方式绕过一层 SQL 注入保护。

# whois - Whoisxmlapi API 未运行

> ID：12905309
> 
> 赞同：0
> 
> 时间：2012-10-15T23:15:05.023
> 
> 标签：whois

此 API [http://www.whoisxmlapi.com/whoisserver/WhoisService?domainName=xxxxxx](http://www.whoisxmlapi.com/whoisserver/WhoisService?domainName=xxxxxx)以 xml 格式返回错误消息。

```
<ErrorMessage>
<msg>
IP Address 203.100.79.84 has 0/50 queries available, please refill
</msg>
</ErrorMessage> 
```

任何人都可以帮我解决这个问题。我需要适当`xml`的注册域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:48:27.113

免费帐户只能进行 50 次查询。如果要升级，请查看[此页面以获取选项。](http://www.whoisxmlapi.com/hosted_pricing.php)

# c++ - 类型转换的问题：将 char 数组的元素转换为整数变量

> ID：12905310
> 
> 赞同：0
> 
> 时间：2012-10-15T23:15:04.880
> 
> 标签：c++

这是我试图在我试图学习编程的书中解决问题的尝试。该问题希望您仅使用 1 cin 命令将英尺和英寸的高度转换为英寸，而不是单独要求英尺和英寸。

```
cout << "Enter height in following format F'I\":";
cin >> height;
feet = (int)height[0];
inches = (int)height[2];

cout << "feet/height[0]: " << feet << "/" << height[0] << "\t" << "inches/height[2]: " << inches << "/" << height[2] << endl; //to test what went wrong, didn't help me much

cout << "You are " << feet * 12 + inches << " inches tall"; 
```

输入 6'8" 的输出如下

```
Enter height in following format F'I":6'8"
feet/height[0]: 54/6    inches/height[2]: 56/8
You are 704 inches tall 
```

在我的第一个版本中，我有 feet = height[0] 和 inches = height[2] 没有演员表。从我对编程和 C++ 的有限理解来看，它似乎获得了 6 和 8 的 ascii 编号，所以我使用了一个 int 强制转换来尝试修复它，但它返回了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:27:00.180

用户输入的数字必须从 ascii 转换为数字表示。这不是类型转换问题，而是转换错误。您可以使用 atoi() 解析字符串并将其解释为整数。但是您需要这样做，以便检测到字符 ' 和 "。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T23:31:48.303

正如@bobestm 回答的那样，这不是选角问题。您需要将 C 字符串转换为整数。他建议[atoi()](http://linux.die.net/man/3/atoi) ，但在使用 C++ 时我更喜欢[istringstream ：](http://www.cplusplus.com/reference/iostream/istringstream/)

```
char some_string[100];

cout << "Enter your number: " << endl;
cin >> some_string;

istringstream iss;
iss.str(string(some_string));

int num;

iss >> num;

if (iss.fail())
{
    cout << some_string << " is not a number! " << endl;
} 
```

但是，`cin`允许格式化输入，因此您可以让用户输入整数而不进行任何转换：

```
int some_int;

cout << "Enter your number: " << endl;
cin >> some_int; 
```

此外，您似乎正在尝试将整数放入单个 ASCII 字符中。您可能想阅读更多关于[C-strings 的](http://www.cprogramming.com/tutorial/lesson9.html)内容。尽管[std::string](http://www.cplusplus.com/reference/string/string/)在 C++ 中更容易使用，但它仍然可以帮助您了解 C 字符串的工作原理。

这应该做你需要的：

```
string str;
cout << "Enter height in following format F'I\":"

getline(cin, str);

size_t index = str.find("'");

string feet_str = str.substr(0, index);
string inches_str = str.substr(index + 1);

int feet, inches;

istringstream iss;

iss.str(feet_str);
iss >> feet;

iss.clear();

iss.str(inches_str);
iss >> inches; 
```

# python - ImportError：没有名为 primes 的模块

> ID：12905311
> 
> 赞同：4
> 
> 时间：2012-10-15T23:15:08.910
> 
> 标签：python, cython, importerror

我正在尝试在 Linux 环境下使用 python 和 cython，所以我尝试使用`primes.pyx`cython 文档中提到的示例。

我`primes.pyx`在 `xyz`目录中创建并使用 cython 编译了该文件`primes.pyx`。在调用 python 解释器然后尝试 import primes 之后，我遇到了以下问题。

```
ImportError: No module named primes 
```

一些身体可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T04:59:48.017

Cython 模块需要先编译才能使用。你有两个（好的）选择：或者`setup.py`为模块制作一个，如[本页](http://docs.cython.org/src/quickstart/build.html#building-a-cython-module-using-distutils)所述，或者使用`pyximport`自动编译和构建你的模块`import`。

如果您有一个具有其他库依赖项的模块，或者分布在多个文件中，则第一个选项是最好的。第二个选项最适合小型、独立的模块。

要使用`pyximport`，`import pyximport; pyximport.install()`请在导入任何 Cython 模块之前添加。然后，当您`import`使用 Cython 模块时，如果需要，Cython 将自动编译该模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:53:23.877

在我看来，这可能是忘记导入模块的情况，该模块可让您导入`.pyx`没有`setup.py`. 可以在[此处](http://docs.cython.org/src/userguide/tutorial.html#pyximport-cython-compilation-the-easy-way)找到相关文档。

尝试添加

```
import pyximport; pyximport.install() 
```

到模块的顶部，或者在尝试之前在解释器中运行它`import primes`。

# sql - Order BY 将 30 毫秒的查询转换为 7120 毫秒的查询。已知的性能问题？

> ID：12905312
> 
> 赞同：3
> 
> 时间：2012-10-15T23:15:12.833
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-performance

我有一个包含 1m 条记录的用户表：

```
User (id, fname, lname, deleted_at, guest) 
```

我有以下针对 postgres 9.1 db 运行的查询：

```
SELECT "users".* 
FROM "users" 
WHERE (users.deleted_at IS NULL) AND (SUBSTRING(lower(fname), 1, 1) = 's') 
ORDER BY guest = false, fname ASC 
LIMIT 25 OFFSET 0 
```

使用 pgAdmin 3，此 SQL 需要**7120 毫秒**才能返回 25 行。如果我删除 'ORDER BY guest = false, fname ASC' 查询只需**31ms**。

我有以下索引：

```
add_index "users", ["fname"], :name => "index_users_on_fname"
add_index "users", ["guest", "fname"], :name => "index_users_on_guest_and_fname"
add_index "users", ["deleted_at"], :name => "index_users_on_deleted_at"
add_index "users", ["guest"], :name => "index_users_on_guest" 
```

有任何想法吗？谢谢！

**更新解释**

```
"Limit  (cost=43541.55..43541.62 rows=25 width=1612) (actual time=1276.777..1276.783 rows=25 loops=1)"
"  ->  Sort  (cost=43541.55..43558.82 rows=6905 width=1612) (actual time=1276.775..1276.777 rows=25 loops=1)"
"        Sort Key: ((NOT guest)), fname"
"        Sort Method: top-N heapsort  Memory: 37kB"
"        ->  Seq Scan on users  (cost=0.00..43346.70 rows=6905 width=1612) (actual time=5.143..1272.563 rows=475 loops=1)"
"              Filter: ((deleted_at IS NULL) AND pubic_profile_visible AND ((fname)::text ~~ 's%'::text))"
"Total runtime: 1276.967 ms" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T23:57:22.957

首先，从 PostgreSQL 9.1 开始，您可以使用[`left()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)来简化表达式：

```
substring(lower(fname), 1, 1)
lower(left(fname, 1)) -- equivalent, but simpler and faster 
```

在转换为小写*之前*取第一个字符也稍微快一些。
接下来，清理查询：

```
SELECT * 
FROM   users 
WHERE  deleted_at IS NULL
AND    lower(left(fname, 1)) = 's'
ORDER  BY guest DESC NULLS LAST, fname
LIMIT  25 OFFSET 0; 
```

[`guest DESC NULLS LAST`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-ORDERBY)结果与 相同`guest = FALSE`，只是没有为每一行计算一个新值。
接下来，创建这个[多列部分索引](http://www.postgresql.org/docs/current/interactive/indexes.html)：

```
CREATE INDEX users_multi_idx
ON users (lower(left(fname, 1)), guest DESC NULLS LAST, fname)
WHERE deleted_at IS NULL; 
```

跑

```
ANALYZE users; 
```

或者，甚至更好，[`CLUSTER`](http://www.postgresql.org/docs/current/interactive/sql-cluster.html)（如果您没有更重要的查询需要不同的顺序） -*然后* `ANALYZE`：

```
CLUSTER users using users_multi_idx; 
```

它会比你以前尝试过的任何东西都要快得多。因为现在，查询从索引中顺序读取行，并且表已经以相同的顺序物理重写，导致只有很少的页面命中......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:24:12.053

在我看来，您可以在这里进行更好的索引；您正在根据`deleted_at`字段进行过滤，然后对`guest`字段进行排序，但这些字段不在公共索引中。暂时忽略您的其他`WHERE`条款，您似乎正在使引擎挖掘所有记录，或者只是单独检查每条记录的`guest`价值；我看不出你的索引有`guest`什么帮助。

如果您将该`guest`字段与该字段一起包含在索引中`deleted_at`（后者是第一个），您可能会在那里获得一些好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:41:19.620

如果列中的不同值很少，则该列上的索引没有多大价值。布尔列就是这种情况。

我会测试创建一个部分索引`SUBSTRING(lower(fname), 1, 1)`

```
CREATE INDEX users_substr_null_ix ON users (SUBSTRING(lower(fname), 1, 1))
WHERE users.deleted_at IS NULL; 
```

并在 fname 上测试部分索引：

```
CREATE INDEX users_fname_not_guest_ix ON users (fname)
WHERE not guest; 
```

甚至更好

```
CREATE INDEX users_substr_null__not_guest_ix ON users (SUBSTRING(lower(fname), 1, 1), fname)
WHERE users.deleted_at IS NULL and not guest; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T23:24:34.613

乍一看，您的问题是需要完全评估 where 子句，以便获得所有（不仅仅是前 25 行）您需要在之后排序...尝试添加一个包含`substring(lower(fname), 1, 1))`让我们暂时命名它的列`s`并添加一个index on `deleted_at, s`，或者如果这是这些值，您将在其中使用 index on 制定此值`(deleted is null), (s = 's')`。

您可以使用触发器使`s`列保持最新。

为了让它暂时更快，你可以重写`substring(lower(fname), 1, 1))`或者`lower(substring(fname, 1, 1))`如果 postgresql 有这个语法`lower(fname[1]))`

# java - JAX-WS，为什么收到的 LinkedHashMap 集合为空？

> ID：12905315
> 
> 赞同：0
> 
> 时间：2012-10-15T23:15:29.190
> 
> 标签：java, linkedhashmap

我正在构建一个接收`LinkedHashMap`作为参数的 java web 服务。该`LinkedHashMap`集合在客户端插入了一些元素，但我在 Web 服务中收到它是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:55:27.970

> 避免直接返回集合。与其返回 a `List<X>`，不如返回一个包含 a 的 JavaBean `List<X>`。无论如何，这将使您对编组进行更详细的控制。

[*使用 JAX-WS 和 JAXB 生成 Web 服务*](http://shrubbery.mynetgear.net/c/display/W/Producing+a+Web+Service+with+JAX-WS+and+JAXB)

也可以看看：

*   [jax-ws webservice 中的泛型类会发生什么？](https://stackoverflow.com/a/298914/870248)

# c++ - 如何使用 vc++ 找出当前线程的堆栈上剩余多少空间？

> ID：12905316
> 
> 赞同：5
> 
> 时间：2012-10-15T23:15:43.580
> 
> 标签：c++, visual-c++

我正在使用 VC++ 2012。我想知道当前线程中有多少堆栈内存可用。

快速搜索指向使用 malloc.h 和 stackavail() 函数，但它在 Visual C++ 2012 中不存在。我如何以另一种方式实现这一目标？

有问题的例子是这样的：

```
#include "stdafx.h"
#include <iostream>
#include <malloc.h>

using namespace std;

int _tmain()
{
    cout << "Available stack: " << stackavail() << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-05T05:34:51.347

这使用了一些堆栈，但它是线程安全的，并且不需要 asm 内联。我认为我们这些需要跟踪堆栈的人不需要精度。只是对防止溢出发生的可用方法的一个很好的估计。我们需要跟踪它，因为我们为用户提供了创建可能使用递归或其他服务或需求的宏、脚本、表达式等的能力。每个环境都应该能够报告堆栈可用性，即使它只使用所有可用内存，因此可以控制任何递归。

```
size_t stackavail()
{
  // page range
  MEMORY_BASIC_INFORMATION mbi;                           
  // get range
  VirtualQuery((PVOID)&mbi, &mbi, sizeof(mbi));           
  // subtract from top (stack grows downward on win)
  return (UINT_PTR) &mbi-(UINT_PTR)mbi.AllocationBase;    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:16:36.987

`stackavail()`尽管某些编译器（例如“Open Watcom C++”）将其作为扩展提供，但在 C++中没有这样的功能。

如果您*确实*需要了解这些信息，请使用特定于操作系统的系统调用来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:26:22.663

好的，这些是我到目前为止的发现。

在 Windows 上通过 vc++ 检查堆栈空间没有一种简单的功能方法。

[但我在别处](http://www.digipedia.pl/usenet/thread/18/348171/ "波兰语 C++ 论坛。")找到了答案。

```
size_t stackavail()
{
    static unsigned StackPtr;   // top of stack ptr
    __asm mov [StackPtr],esp    // mov pointer to top of stack
    static MEMORY_BASIC_INFORMATION mbi;        // page range
    VirtualQuery((PVOID)StackPtr,&mbi,sizeof(mbi)); // get range
    return StackPtr-(unsigned)mbi.AllocationBase;   // subtract from top (stack grows downward on win)
} 
```

此外：

在 windows/vc++ 中，默认堆栈空间设置为每个线程 1MB。要为 main() 线程设置更高的值，您必须通过 /STACK:#### 的链接器标志进行编译，该标志四舍五入到最接近的 4。例如：/STACK:2097152 用于 2MB 堆栈。

希望这可以帮助某人。

# django - 带有外键的 Django 自定义表单验证

> ID：12905318
> 
> 赞同：2
> 
> 时间：2012-10-15T23:15:53.990
> 
> 标签：django, forms, validation, foreign-key-relationship

我有以下型号：

```
class Computer(models.Model):
    ...

class Demo(models.Model):
    computers = models.ManyToManyField(Computer)
    ...

class Scenario(models.Model):
    demo = models.ForeignKey(Demo)
    ...

class Setting(models.Model):
    scenario = models.ForeignKey(Scenario)
    computer = models.ForeignKey(Computer) 
```

基本上一个演示使用多台计算机。一个演示也有多个场景。每个场景都有一些设置，每个设置都配置一台计算机。

我的问题是在使用 django 管理站点添加场景时，用户在下拉列表中选择演示并为某些计算机配置设置后，我需要验证设置中的计算机是否确实在演示中。

我已经翻遍了 django 文档、在线站点，并尝试了我能想到的一切，但仍然无法完成这项工作。

我不能使用自定义表单验证，因为虽然我可以从场景表单中的 clean_data 获取“演示”对象，但我似乎无法访问随表单提交的设置。如果我通过覆盖“干净”来进行模型级别验证，那只有在我更改场景时才有效，而不是在我添加新场景时有效，因为 computer_set 对于新场景是空的。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:39:20.143

您可以将自定义表单添加到您的`SettingInline`（我假设您的帖子`Setting`是内联的`Scenario`）。

您提到您不能使用表单验证，但我看不出您需要访问所有其他设置的原因。如果您想访问其他设置（比如涉及所有提交设置的验证），我会覆盖它`formset`本身。

```
class SettingForm(forms.ModelForm):
    class Meta:
        model = Setting

    def clean_computer(self):
        computer = self.cleaned_data.get('computer')
        if not self.instance.scenario.demo.computers.filter(computer=computer).count():
            raise forms.ValidationError("Computer not in demo")
        return computer

class SettingInline(admin.TabularInline):
    model = Setting
    form = SettingForm 
```

# msbuild - 消除 msbuild 目标中的重复？（尤其是物品标识符的重复，不能扩展Exec Command属性中的Property）

> ID：12905326
> 
> 赞同：1
> 
> 时间：2012-10-15T23:16:27.920
> 
> 标签：msbuild, dry, msbuild-4.0, repeat, msbuild-propertygroup

我想尽量减少我的 msbuild xml 中的重复，特别是在我的 Target 的 Exec Command 属性中。

1) 最重要的是，在下面的目标中，我想取消重复 Exec 命令属性中的一对“%(ShaderVertex.Identity)”构造（例如，Property VertexTargetName 被定义为“ShaderVertex”，但是 % （$(VertexTargetName).Identity) 不会扩展 $(VertexTargetName)）：

```
<Target Name="ShaderVertexBuild"
    Inputs="@($(VertexTargetName))"
    Outputs="@($(VertexTargetName)$(OutputRelPathAndFileName))">

    <Exec Command="$(FxcPathFull)v$(ShaderArgNoFirstLetter) %(ShaderVertex.Identity)$(ShaderOutputFlagAndRelPath)%(ShaderVertex.Identity)$(OutputFileExtLetterToAppend)">
    </Exec>
</Target> 
```

2) 最好不要在我的 Target 之前的 ItemGroup 中复制“ShaderVertex”标识符，但同样我不能在 ItemGroup 的上下文中扩展 $(VertexTargetName)。

```
<ItemGroup>
    <ShaderPixel  Include="p*.fx"/>
    <ShaderVertex Include="v*.fx"/>
</ItemGroup> 
```

3）不太重要的是，能够进一步减少我的目标之间的重复构造会很好。使用上面的示例，我想简单地将 $(VertexTargetName) 和字母“v”（告诉 HLSL 编译器编译顶点着色器）传递给一个神奇的目标生成器，该生成器填充与所有目标相同的所有数据 - - 或者更好的是，只需传递 $(VertexTargetName) 并允许目标生成器从这个参数推断需要传递“v”（而不是 PixelShader 的“p”，可以从 $(像素目标名称））。

有任何想法吗？

警告：我知道 msbuild 不是一种函数式编程语言，因此可能无法满足我的需求。我也知道 VS2012 自动处理 HLSL 编译，但我现在在 VS2010 上，并且想对 msbuild 有足够的了解来完成这类任务。

这是完整的 xml 清单：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <!-- TODO NTF: does not take into account *.inc dependency -->
    <Target Name="Main">
        <CallTarget Targets="ShaderPixelBuild"/>
        <CallTarget Targets="ShaderVertexBuild"/>
    </Target>

    <ItemGroup>
        <ShaderPixel  Include="p*.fx"/>
        <ShaderVertex Include="v*.fx"/>
    </ItemGroup>

    <PropertyGroup>
        <ShaderModelNum>4</ShaderModelNum><!-- Radeon 8600 GTS doesn't support shader model 5 -->
        <ShaderArgNoFirstLetter>s_$(ShaderModelNum)_0</ShaderArgNoFirstLetter><!-- first letter defines shader type; v=vertex, p=pixel-->
        <FxcPathFull>&quot;%DXSDK_DIR%\Utilities\bin\x64\fxc.exe&quot; /T </FxcPathFull>
        <ShaderOutputRelPath>..\..\x64\shadersCompiled\</ShaderOutputRelPath>
        <ShaderOutputFlagAndRelPath> /Fo $(ShaderOutputRelPath)</ShaderOutputFlagAndRelPath>
        <OutputFileExtLetterToAppend>o</OutputFileExtLetterToAppend>
        <OutputRelPathAndFileName>->'$(ShaderOutputRelPath)%(identity)$(OutputFileExtLetterToAppend)'</OutputRelPathAndFileName>

        <!-- Note that the content of each of these properties must be duplicated in the Exec Command twice, since %($(PropertyName)) will not expand there -->
        <PixelTargetName>ShaderPixel</PixelTargetName>
        <VertexTargetName>ShaderVertex</VertexTargetName>        
    </PropertyGroup>    

    <Target Name="ShaderPixelBuild"
        Inputs="@($(PixelTargetName))"
        Outputs="@($(PixelTargetName)$(OutputRelPathAndFileName))">

        <Exec Command="$(FxcPathFull)p$(ShaderArgNoFirstLetter) %(ShaderPixel.Identity)$(ShaderOutputFlagAndRelPath)%(ShaderPixel.Identity)$(OutputFileExtLetterToAppend)">
        </Exec>
    </Target>

    <Target Name="ShaderVertexBuild"
        Inputs="@($(VertexTargetName))"
        Outputs="@($(VertexTargetName)$(OutputRelPathAndFileName))">

        <Exec Command="$(FxcPathFull)v$(ShaderArgNoFirstLetter) %(ShaderVertex.Identity)$(ShaderOutputFlagAndRelPath)%(ShaderVertex.Identity)$(OutputFileExtLetterToAppend)">
        </Exec>
    </Target>

</Project> 
```

# javascript - 任何基于 Eclipse 的流星工具？

> ID：12905336
> 
> 赞同：7
> 
> 时间：2012-10-15T23:16:57.157
> 
> 标签：javascript, eclipse, node.js, ide, meteor

MeteorIDE 等基于 Eclipse 的工具的计划是什么？搜索显示，针对 Node.js 的 Eclipse 工具正在努力。

# python - Python x = x+1 和 x += 1 之间的区别

> ID：12905338
> 
> 赞同：16
> 
> 时间：2012-10-15T23:17:29.560
> 
> 标签：python

`x = x+1`在 Python 中，写和写之间有什么区别（语义、效率等）`x += 1`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T23:21:53.123

是的。根据类的`x`编码方式，短格式可以选择就地修改 x，而不是创建一个表示总和的新对象并将其重新绑定回相同的名称。如果您有多个变量都引用同一个对象，则这意味着 - 例如，使用列表：

```
>>> a = b = []
>>> a += [5]
>>> a
[5]
>>> b
[5]
>>> a = a + [5]
>>> a
[5, 5]
>>> b
[5] 
```

发生这种情况是因为在幕后，操作员调用了不同的魔法方法：`+`调用`__add__`或`__radd__`（预计不会修改它们的任何一个参数）和`+=`尝试（如果感觉`__iadd__`可以修改），然后返回到逻辑 if is不在那里。`self``+``__iadd__`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T23:22:00.823

它们对于整数和浮点数几乎相同，但对于`lists`：

`lis = lis+['foo']`通过连接创建一个新列表`lis`，`['foo']`然后将结果分配给`lis`

和 ：

`lis += [foo]`相当于`lis.extend([foo])`

```
>>> lis = [1,2,3]
>>> id(lis)
3078880140L
>>> lis += ['foo']   #or lis.extend(['foo'])
>>> id(lis)          #same object
3078880140L

>>> lis = [1,2,3]
>>> id(lis)
3078880076L
>>> lis = lis+['foo']
>>> id(lis)            #new object
3078880012L 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T23:20:23.107

是的，它们是编译成不同字节码的不同运算符：

```
>>> import dis
>>> def test1(x):
...    x = x + 1
... 
>>> def test2(x):
...    x += 1
... 
>>> dis.dis(test1)
  2           0 LOAD_FAST                0 (x) 
              3 LOAD_CONST               1 (1) 
              6 BINARY_ADD           
              7 STORE_FAST               0 (x) 
             10 LOAD_CONST               0 (None) 
             13 RETURN_VALUE         
>>> dis.dis(test2)
  2           0 LOAD_FAST                0 (x) 
              3 LOAD_CONST               1 (1) 
              6 INPLACE_ADD          
              7 STORE_FAST               0 (x) 
             10 LOAD_CONST               0 (None) 
             13 RETURN_VALUE 
```

在这种情况下，它不会有太大的不同，因为`int`s 是不可变的。从理论上讲，它们可以以不同的方式实现（取决于解释器），但这不会改变它对值的操作方式。

一般来说，它们可以被实现来做完全不同的事情（`+`通过魔法方法`__add__()`和`+=`with实现`__iadd()__`）——例如，在大多数可变容器中，如果你有不同的名称引用同一个对象，它就会产生巨大的差异：

```
>>> x = []
>>> y = x
>>> x += [1]
>>> y
[1]
>>> x = x + [1]
>>> y
[1]
>>> x
[1, 1] 
```

您可以看到，当我们分配`x`给 时`y`，它们都指向同一个列表。当我们使用 时`+=`，我们扩展了列表并且两者都改变​​了。当我们为 分配新值时`x`，`y`仍然指向原始值并保持不变。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T23:24:25.580

`+`它们是不同的，因为和有单独的运算符`+=`。有了`x = x + 1`，解释器会像对待它一样对待它[`x = x.__add__(1)`](http://docs.python.org/reference/datamodel.html#object.__add__)，而`x += 1`将会是[`x = x.__iadd(1)`](http://docs.python.org/reference/datamodel.html#object.__iadd__)，这会更有效率，因为它不一定需要复制`x`.

# linux - 搜索通配符时的 grep 命令

> ID：12905342
> 
> 赞同：0
> 
> 时间：2012-10-15T23:17:50.557
> 
> 标签：linux, unix, sed, grep

```
askljasklj.
twuikso lsliosus.
sakjsiua .sfdds* askhkjash. 
```

在这里，我想 grep 包含`.*`模式的行。使用命令`cat file | grep ".\*"`给出输出`sakjsiua .sfdds* askhkjash`，但这不应该是输出或者我使用了错误的命令

有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:25:04.083

我假设您在文件 foo.h 中有这些词。因此发出命令：

```
 cat foo | grep ".*" 
```

将打印所有内容。如果您只想要 .* 模式，请使用以下命令：

```
 cat foo | grep "\.\*" 
```

通过放 \ 我们可以制作 . 和 * 表现得像一个普通的文本字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:02:09.807

您应该将它们都转义如下：

```
grep "\.\*" yourfile 
```

# c# - 将 Membership.GetAllUsers() 转换为通用列表时出现 NotSupportedException

> ID：12905343
> 
> 赞同：3
> 
> 时间：2012-10-15T23:18:06.283
> 
> 标签：c#, .net, asp.net-membership

我正在尝试在 .NET Membership.GetAllUsers() 集合上使用 LINQ，例如在获取所有用户名时：

```
var usernames = Membership.GetAllUsers().Cast<MembershipUser>().Select(x=>x.UserName).ToList(); 
```

但是VS告诉我它不受支持..

Membership 是 Web.Security 的一部分，与 MembershipUser 相同

这是我的连接字符串（如果有任何相关性）：

```
 <add name="ApplicationServices" connectionString="Data Source=somerserver.xx\SQLEXPRESS;Initial Catalog=bedriftsmelding;User Id=SomeUser;Password=SomePassword;Integrated Security=False" providerName="System.Data.SqlClient" /> 
```

堆栈跟踪：

> System.NotSupportedException 未被用户代码处理
> Message=不支持指定的方法。
> Source=System.Web.Extensions StackTrace：在 System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider.GetAllUsers(Int32 pageIndex, Int32 pageSize, Int32& totalRecords) 在 System.Web.Security.Membership.GetAllUsers(Int32 pageIndex, Int32 pageSize, Int32& totalRecords ) 在 System.Web.Security.Membership.GetAllUsers() 在 Bedriftsmelding.Nettside.Models.CompanyUsers.GetUserIdFromUserName(String username) 在 C:\Projects\Bedriftsmelding\Bedriftsmelding.Nettside\Models\CompanyUsers.cs:Bedriftsmelding 的第 26 行。 Tests.DTO.CompanyUsersTest.TestGetUserIdFromUserName() 在 C:\Projects\Bedriftsmelding\Bedriftsmelding.Tests\DTO\CompanyUsersTest.cs:line 16 InnerException:

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T23:30:21.197

看起来您使用的是 ClientFormsAuthenticationMembershipProvider 而不是默认的 SqlMembershipProvider。

根据 ClientFormsAuthenticationMembershipProvider 的文档，不支持 GetllAllUsers 并引发不支持的异常。

[http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientformsauthenticationmembershipprovider.getallusers.aspx](http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientformsauthenticationmembershipprovider.getallusers.aspx)

似乎只有基本的 ValiateUser 和一些其他功能可以与此提供程序一起使用，因为它是为与 Ajax 扩展一起使用而设计的。用户函数均不起作用，例如 GetUser、GetAllUsers、DeleteUser、CreateUser 等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T08:57:22.483

在阅读此主题之前，我遇到了同样的问题：[SimpleMembership, Membership Providers, Universal Providers and the new ASP.NET 4.5 Web Forms and ASP.NET MVC 4 templates](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。

一个简单的答案是，MVC4 中的成员机制与 MVC3 及之前的成员机制完全不同。还有来自 asp.net MVC 项目的 PM 的其他信息。我认为这是一种趋势，值得尝试从头开始重新构建我的相关代码。

# c# - 如何在 C# 中播放特定的 Windows 错误声音

> ID：12905346
> 
> 赞同：6
> 
> 时间：2012-10-15T23:18:23.037
> 
> 标签：c#, .net, audio, system

> **可能重复：**
> [如何播放标准的 Windows 声音？](https://stackoverflow.com/questions/72167/how-to-play-a-standard-windows-sound)

当不允许用户在文本框中输入更多字符时，我想在我的 c# 应用程序中播放 Windows 错误声音。是否有 .net 框架 api 或者让我从波形文件中播放它，如果，我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-15T23:21:56.913

检查[System.Media.SystemSounds](http://msdn.microsoft.com/en-us/library/ms143806%28v=vs.90%29.aspx)类。我相信`SystemSounds.Hand.Play()`应该做的伎俩。

# postgresql - 使用 Postgres 在多个字段中搜索一个词

> ID：12905351
> 
> 赞同：3
> 
> 时间：2012-10-15T23:18:56.593
> 
> 标签：postgresql

我正在尝试在我的数据库中的字段中搜索相同的文本以获取实时搜索框。

```
SELECT DISTINCT u.id, u.username FROM
users AS u, user_invoice AS ui, user_roles AS ur, roles AS r WHERE
u.id = ur.user_id AND
ur.role_id = r.id AND
r.name = 'teacher' AND
(
    ui.user_id = u.id AND
    CAST(ui.invoice AS TEXT) = 'searchterm'
) 
```

此查询搜索发票表并以极快的速度正确返回结果。

```
SELECT DISTINCT u.id, u.username FROM
users AS u, user_invoice AS ui, user_roles AS ur, roles AS r WHERE
u.id = ur.user_id AND
ur.role_id = r.id AND
r.name = 'teacher' AND
(u.username like '%searchterm%') 
```

此查询搜索匹配的用户名并且返回速度也非常快。

但是当我像这样将两者结合起来时：

```
SELECT DISTINCT u.id, u.username FROM
users AS u, user_invoice AS ui, user_roles AS ur, roles AS r WHERE
u.id = ur.user_id AND
ur.role_id = r.id AND
r.name = 'teacher' AND
(
    u.username like '%searchterm%' OR
    (
        ui.user_id = u.id AND
        CAST(ui.invoice AS TEXT) = 'searchterm'
    )
) 
```

它返回正确的结果，但需要将近一分钟。我究竟做错了什么？

编辑：解释我的查询：

首先： [http ://explain.depesz.com/s/PvS](http://explain.depesz.com/s/PvS)

第二： [http ://explain.depesz.com/s/D5c](http://explain.depesz.com/s/D5c)

合并： [http ://explain.depesz.com/s/Dhf](http://explain.depesz.com/s/Dhf)

* * *

因复制铸造线时出现错误而进行了编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:12:38.737

这是我在主应用程序中解决此问题的方法。

我有一个我希望用户能够搜索的主要实体。调用它`customer`。`contact`此实体在 1:n （电话、电子邮件等）表中具有关联的详细记录。

我定义了一个视图，`customer_quicksearch`它计算一个快速搜索键 - 一个包含客户记录`text`串联的字段以及直接的一些字段。`contact``customer`

我已经在`customer`和`contact` `customer_summary`表中添加了触发器。`customer`触发器在插入行时添加记录，在`customer_summary`删除`customer`记录时删除行`customer`。它们`customer_summary`通过`SELECT`从 `customer_quicksearch 获取更新的快速搜索键来更新。我可以为此使用 SQL 函数而不是视图，但发现视图更有用且更快。使用视图可以更快地计算*所有*客户的快速搜索键，例如，在批量插入或更新之后。

```
CREATE VIEW customer_quicksearch AS
SELECT
        customer.id AS customer_id, array_to_string(ARRAY[
                customer.code,
                customer.name,
                string_agg(array_to_string(ARRAY[
                        contact.email::text,contact.altemail::text, contact.mobile_phone, contact.work_phone, contact.home_phone, contact.fax
                ],'|'),'|')
        ], '|') AS quicksearch_key
FROM customer
LEFT OUTER JOIN contact ON (customer.id = contact.customer_id)
GROUP BY customer.id; 
```

和触发器之一：

```
CREATE OR REPLACE FUNCTION customer_summary_update_for_contact() RETURNS trigger AS $$
DECLARE
    _customer_id integer;
BEGIN
    -- When a contact is added/removed/changed we have to regenerate the customer search key
    IF tg_op = 'INSERT' OR tg_op = 'UPDATE' THEN
      _customer_id = NEW.customer_id;
    ELSE
      _customer_id = OLD.customer_id;
    END IF;
    UPDATE customer_summary
    SET quicksearch_key = (SELECT quicksearch_key FROM customer_quicksearch WHERE customer_id = _customer_id)
    WHERE customer_id = _customer_id;
    RETURN NULL;
END;
$$
LANGUAGE 'plpgsql'
SET search_path = 'public';

CREATE TRIGGER customer_summary_update_for_contact_trg AFTER INSERT OR UPDATE OR DELETE ON contact
FOR EACH ROW EXECUTE PROCEDURE customer_summary_update_for_contact(); 
```

您还需要一个触发器`customer`来处理客户`insert`，适当`update`地`delete`维护该`customer_summary`客户的记录。

该`customer_summary`表包含包含`quicksearch_key`字段的管道连接的记录，例如：

```
'1800MA|1800 MAKE IT BUILDERS|info@1800makeit.example.com|1234 5678|0499 999 999'
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^
[from customer record]        [from 1st contact record]             [from another contact record] 
```

这是用一个简单的`LIKE`模式搜索的。如果我在进行前缀搜索，我可以在其上添加一个`text_pattern_ops`索引以提高性能，但由于我主要是在没有左锚或右锚`LIKE '%search%'`的情况下进行搜索 - 没有任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:50:49.703

无操作（转换为 JOIN 语法）（不是答案！）：

```
SELECT DISTINCT u.id, u.username 
FROM
users AS u 
JOIN user_invoice AS ui ON u.username like '%searchterm%'
                        OR ( ui.user_id = u.id AND ui.invoice = CAST('searchterm' AS INTEGER))
JOIN user_roles AS ur ON u.id = ur.user_id
JOIN roles AS r ON ur.role_id = r.id
WHERE r.name = 'teacher'
   ; 
```

这 `CAST('searchterm' AS INTEGER))`对我来说毫无意义。双引号？范围？

# sockets - 内核模式 Free BSD socket

> ID：12905352
> 
> 赞同：2
> 
> 时间：2012-10-15T23:18:57.587
> 
> 标签：sockets, kernel, mode, bsd

在 FreeBSD 中，我试图在可加载内核模块（驱动程序）和用户模式应用程序/守护程序之间创建 2way 通信。我正在尝试使用套接字！在 Linux 中有 Netlink 套接字库。但是 FreeBSD 没有这样一种专用的 IPC 机制用于内核<---->用户通信。有没有可用的开源代码。谢谢。

# iphone - 在单独的线程上加载表值

> ID：12905355
> 
> 赞同：0
> 
> 时间：2012-10-15T23:19:13.193
> 
> 标签：iphone, ios, cocoa-touch, parallel-processing, grand-central-dispatch

我有以下代码：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^
{
    [self loadThumbnails]; //loads an array of photos which get loaded into each table cell
    [self performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
}); 
```

在我的子类的初始化程序中`UITableView`。我希望表格将这些缩略图加载到单独的线程上，因为它们需要一些时间来加载。然而，当我执行上面的代码时，tableview 出现空白。所以我的第一个问题是如何解决这个问题？

我的第二个问题是，我希望在释放 tableview 对象后终止这个调度队列。这可能/如何实现？

尝试实施 Vikings 的解决方案，这就是我得到的：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *cellIdentifier = @"ThumbnailCell";
    UITableViewCell *tableViewCell = [self dequeueReusableCellWithIdentifier:cellIdentifier];    

    if (!tableViewCell)
    {
        tableViewCell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    NSInteger thumbnailsPerCell = self.thumbnailViewsPerCell;
    NSInteger startingThumbnailIndex = indexPath.row * thumbnailsPerCell;
    NSInteger totalThumbnails = MIN(((indexPath.row * thumbnailsPerCell) + thumbnailsPerCell) , [self.thumbnailViews count]) - startingThumbnailIndex;

    if ([tableViewCell.contentView subviews])
    {
        for (UIView *subview in [tableViewCell.contentView subviews]) 
        {
            [subview removeFromSuperview];
        }
    }

    for (int i = 0; i < totalThumbnails; i++)
    {
        UIView *thumbnailView = [[UIView alloc] initWithFrame:CGRectMake(i * self.cellDimension, 0, self.cellDimension, self.cellDimension)];
        UIView *thumbnail = [[self.thumbnailCache objectForKey:[NSNumber numberWithInt:i]] retain];
        if (thumbnail)
        {
            [thumbnailView addSubview:thumbnail];
            [tableViewCell.contentView addSubview:thumbnailView];
            [thumbnailView release];
            [thumbnail release];
        }
        else 
        {
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), 
            ^{
                UIView *thumbnail = [[self createThumbnailAtIndex:i] retain];

                if (thumbnail)
                {
                    dispatch_async(dispatch_get_main_queue(), 
                    ^{
                        UITableViewCell *tableViewCell = [self cellForRowAtIndexPath:indexPath];

                        if (tableViewCell)
                        {
                            [thumbnailView addSubview:thumbnail];
                            [tableViewCell.contentView addSubview:thumbnailView];
                            [thumbnailView release];
                            [thumbnail release];
                        }
                    });

                    [self.thumbnailCache setObject:thumbnail forKey:[NSNumber numberWithInt:i]];
                }
            });
        }
    }

    return tableViewCell;
} 
```

这会产生一个空白的 tableView。关于为什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:24:58.323

It's kind of strange to mix GCD with performSelector. I would do it this way:

```
dispatch_async(dispatch_get_global_queue(0, 0), ^
{
    [self loadThumbnails]; //loads an array of photos which get loaded into each table cell
    dispatch_async(dispatch_get_main_queue(), ^ {
        [self reloadData];
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:29:46.123

I had the same issue, and solved it perfectly, check the thread below. Just load the images in a separate thread, a technique referred to as lazy loading.

[Table View Scrolling Async](https://stackoverflow.com/questions/11486828/table-view-scrolling-async)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:21:06.190

answering your second question: maybe you shouldn't load all thumbnails for your table. Just load those ones you need to display in separate requests. You could even cancel previous requests if cell has changed the thumbnail image. There are even libraries which do everything for you like [SBWebImage](https://github.com/rs/SDWebImage)

# mysql - 将 UItableview 从普通视图控制器推送到详细视图控制器

> ID：12905362
> 
> 赞同：0
> 
> 时间：2012-10-15T23:20:31.657
> 
> 标签：mysql, ios, uitableview, push, viewcontroller

我在 Viewcontroller 内有一个自定义大小的 UItableview（由于某些原因，它不能在导航控制器内）。这设置为显示基于 mysql 导入核心数据的多个单元格。当用户单击未知行时，如何将其从一个视图控制器转换到另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:46:23.737

如果您已设置`delegate`为您，`UITableView`则
`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`当用户点击任何单元格时将调用您的委托。然后你所需要的就是在你的数组中找到一个模型或任何与该索引路径相对应的模型
（最常见的情况是`[array objectAtIndex:indexPath.row]`）
然后你可以将另一个视图控制器推送到导航堆栈或做一个模态的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:07:23.707

如果您不使用导航控制器，那么我只会在 tableView:didSelectRowAtIndexPath 方法中使用 presentViewController:animated:completion:。

# ruby-on-rails-3 - Rails 3 - Record.send 不工作

> ID：12905363
> 
> 赞同：0
> 
> 时间：2012-10-15T23:20:32.007
> 
> 标签：ruby-on-rails-3, activerecord

我有一个显示所有客户的视图。我有一个支持这种观点的客户模型。模型中有一种方法可以将属性从“”更改为个人首字母“jh”。这是方法。

```
def print(item, attribute)
  value = item.send(attribute)
  if(value.blank?)
    item.send(attribute + '=', "jh")
  else
    item.send(attribute + '=', "")
  end
end 
```

当我从控制台运行此代码时，它运行良好。当我在应用程序中尝试时，没有任何变化。我得到了我期望的正确“值”，但它永远不会变成空字符串。我确定我在这里遗漏了一些简单的东西，但请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:58:57.240

我看不出这段代码有任何问题，我在普通的 ruby​​ 对象和 ActiveRecord 模型上都尝试了它，并且都按预期工作。所以我怀疑发生了一些特定于你的代码的有趣的事情。

在任何情况下，我都建议您不要通过字符串连接构造一个 setter，而应该使用 Ruby 的 native [`instance_variable_set`](http://apidock.com/ruby/Object/instance_variable_set)：

```
def print(item, attribute)
  value = item.send(attribute)
  if(value.blank?)
    item.instance_variable_set("@#{attribute}", "jh")
  else
    item.instance_variable_set("@#{attribute}", "")
  end
end 
```

此方法的一个警告是，如果以前不存在实例变量，它将创建一个实例变量。

# zend-framework - Zend_Navigation 用局部渲染子菜单

> ID：12905368
> 
> 赞同：3
> 
> 时间：2012-10-15T23:21:11.197
> 
> 标签：zend-framework, zend-navigation

我已经发布了对我的问题的编辑。在处理它时，我注意到这个问题很容易简化。我需要我的子菜单的自定义格式，所以我必须使用部分。但随后问题就出现了。

下面的代码显示了不正确的级别（0）：

```
 echo $this->navigation()->menu()
                ->setMinDepth(1)
                ->setMaxDepth(1)
                ->setRenderParents(false)
                ->setOnlyActiveBranch(true)
                ->renderPartial(null, array('partials/menu.phtml', 'default')); 
```

下面的代码显示了正确的菜单级别 (1)

```
 echo $this->navigation()->menu()
                ->setMinDepth(1)
                ->setMaxDepth(1)
                ->setRenderParents(false)
                ->setOnlyActiveBranch(true)
                ->render(); 
```

有任何想法吗？伙计们请。我将不胜感激任何帮助！

**编辑**

我的部分/menu.phtml：

```
 foreach ($this->container as $page) 
{
    $active = $page->isActive();
    echo '<div class="item">';
        echo '<a class="'. ($active ? 'active' : '') .'" href="' . $this->baseUrl($page->getHref()) . '">' . $page->getLabel() . '</a>';
    echo '</div>';
} 
```

**编辑 2**

我对 Zend_Navigation 的理解是，首先准备容器，然后将其通过部分。

```
 $nav = $this->navigation()->menu()->setOnlyActiveBranch(true)->getContainer();
        echo $this->navigation()->menu()->renderPartial($nav, array('/partials/menu.phtml', 'default')); 
```

在容器中设置 set{Min/Max}Depth, parentRendering 的意义何在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:19:25.847

我使用这段代码：

```
<?=$this->navigation()->menu()->renderPartial(null, 'shared/menu.phtml')?> 
```

您应该传递`true`给该方法`$page->isActive(true)`，以便深入发挥作用。

在你的部分

```
foreach ($this->container as $page) {
  $active = $page->isActive(true);
  if (count($page->getPages())) {
    foreach ($page->getPages() as $subPage) {
      $active = $subPage->isActive(true);
      echo '<div class="item">';
        echo '<a class="'. ($active ? 'active' : '') .'" href="' . $this->baseUrl($subPage->getHref()) . '">' . $subPage->getLabel() . '</a>';
      echo '</div>';      
    }
  }
} 
```

在第二个 foreach 之前，您可以添加一个检查是否以及何时显示子菜单。

我的 2 美分。

**编辑**

试试这个：

```
$partial = array('partials/menu.phtml', 'default');
echo $this->navigation()->menu()
  ->setMinDepth(1)
  ->setMaxDepth(1)
  ->setRenderParents(false)
  ->setOnlyActiveBranch(true)
  ->setPartial($partial)
  ->render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:13:51.760

在寻找相同问题的答案时遇到了这个问题。查看 Zend_View_Helper_Navigation_Menu 的代码后，看起来任何视图助手选项都没有传递给视图部分，尽管我不明白为什么它们不能......（在 ZF 1.12 中看看Zend_View_Helper_Navigation_Menu 的第 736 行，唯一传递的是容器本身，选项数组可以很容易地与它一起传递，或者容器预过滤，可能值得向 ZF 提交功能请求）

这些选项纯粹是过滤 Zend_Navigation_Container 以使用默认`renderMenu`方法进行渲染的一种方式。正如您所说，您似乎可以通过首先过滤容器然后将其作为`renderPartial`方法的第一个参数传递来完成同样的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T20:29:54.883

**在您的主视图中**

*在导航配置中找到子菜单的容器。然后使用所述部分回显此容器。*

```
$pages = $this->navigation()->findOneBy('label', 'Label of your submenu');
echo $this->navigation()->menu()->renderPartial($pages,module/partials/menu.phtml'); 
```

**在部分 (module/partials/menu.phtml)**

*定制。此示例遍历您选择的容器的顶级页面。*

```
foreach ($this->container as $page) {
 echo $this->navigation()->menu()->htmlify($page) . PHP_EOL;
} 
```

# c# - 将代表传递给事件 c#

> ID：12905369
> 
> 赞同：1
> 
> 时间：2012-10-15T23:21:15.133
> 
> 标签：c#, events, delegates

阅读[msdn](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)的事件描述和示例，我可以看到订阅事件的方式存在差异。有时事件处理程序是“按原样”传递的，有时它们是通过使用处理程序方法实例化委托来传递的，例如

```
...
class Subscriber
    {
        private string id;
        public Subscriber(string ID, Publisher pub)
        {
            id = ID;
            // Subscribe to the event using C# 2.0 syntax
            pub.RaiseCustomEvent += HandleCustomEvent;
        }

        // Define what actions to take when the event is raised. 
        void HandleCustomEvent(object sender, CustomEventArgs e)
        {
            Console.WriteLine(id + " received this message: {0}", e.Message);
        }
    } 
```

对比

```
public delegate void EventHandler1(int i);
...
public class TestClass
{
    public static void Delegate1Method(int i)
    {
        System.Console.WriteLine(i);
    }

    public static void Delegate2Method(string s)
    {
        System.Console.WriteLine(s);
    }
    static void Main()
    {
        PropertyEventsSample p = new PropertyEventsSample();

        p.Event1 += new EventHandler1(TestClass.Delegate1Method);
        p.RaiseEvent1(2);
       ...
     }
} 
```

有人可以澄清一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:22:49.013

您的第一个代码示例是第二个的语法糖。
此语法（省略构造函数）由 C# 2 引入。

# c# - c#如何在任务栏上创建一个工具栏？

> ID：12905372
> 
> 赞同：0
> 
> 时间：2012-10-15T23:21:22.210
> 
> 标签：c#, wpf, toolbar, taskbar, windows-explorer

我想在 C# 中从我的 WPF 应用程序创建一个任务栏工具栏。创建后，我想为其分配一个文件夹。然后工具栏将显示文件夹的内容。

我想要的截图： ![在此处输入图像描述](../Images/0db0cbff4059cbf06a962aea5158a9ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:25:21.837

没有用于进行这样的外壳更改的 API（我相信 Raymond Chen 的博客中提到了这一点，但我没有链接，抱歉）。这是因为微软认为用户应该控制任务栏，而不是应用程序。

# asp.net - 单元测试自定义用户控件 - 为什么控件未初始化？

> ID：12905377
> 
> 赞同：0
> 
> 时间：2012-10-15T23:22:03.200
> 
> 标签：asp.net, vb.net, unit-testing, user-controls

使用包含两个（在 .ascx 中定义）的自定义控件（我们称之为 TwoLists）`asp:DropDownList`，我在单元测试中创建了一个 TwoLists 实例，以发现它的子列表什么都不是。

```
Public Sub test_TwoLists()
    Dim instance As TwoLists = New TwoLists()
    Dim list1 As DropDownList = instance.FindControl("list1")
    Dim list2 As DropDownList = instance.FindControl("list2")
    Assert.IsNotNull(list1)
    Assert.IsNotNull(list2)
End Sub 
```

为什么控件没有用它的子控件初始化？

注意：此控件已创建/初始化，并且在 .aspx 中使用时可以正常工作，并且我导航到该页面。

# asp.net - 使用 c# 在 webforms 中使用 Graphics 类和 DrawRectangle 方法(-x, -y)

> ID：12905379
> 
> 赞同：1
> 
> 时间：2012-10-15T23:22:08.310
> 
> 标签：asp.net, graphics, webpage, drawrectangle

场景：我需要在网页上复制太阳能发电厂的现场配置（镜子和接收器的矩形集）。我需要使用 c#.net 向具有给定 X、Y、宽度和高度参数的网页动态添加矩形。我将接收用户输入的一组矩形坐标作为 X，Y 整页图。例如：(-42.34,-240.34,2.25,16.65) (10.34,-140.34,10.25,5.65)

我从用户输入收到的坐标与 X 和 Y 整页图相关，其中也包括负坐标。但 DrawRectangle 接受 X 和 Y 值作为正数且只有整数值。

我的问题是我应该如何将网页上的用户输入 X 和 Y 坐标（-ve 和 +ve）和浮点宽度值关联到整数？

当我尝试转换为 Int 时，矩形要么重叠，要么根本不显示。矩形的输入值集更接近，仅点值存在差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:14:26.653

鉴于目标（并忽略所需的 Graphic.DrawRectangle），您最好的选择是使用 SVG。SVG 格式实际上是一个描述您想要的图像的 XML 文件，因此您可以在服务器端生成它并将其缓存为文本（在 clint 或服务器上），SVG 也使用矢量图形（顾名思义*）至极允许任意分辨率。

*：[SVG](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics)代表可缩放矢量图形。

我向您推荐[3w.org 上有关 SVG 的本教程，](http://www.w3.org/2002/Talks/www2002-svgtut-ih/hwtut.pdf)以帮助您入门。

* * *

以下是 SVG 的示例：

## HTML 中的内联 SVG

索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <title>SVG test</title>
    </head>
    <body>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
            <rect x="10" y="10" width="50" height="30" />
        </svg>
    </body>
</html> 
```

## img 元素中的 SVG

矩形.svg

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect x="10" y="10" width="50" height="30" />
</svg> 
```

索引.htm

```
<!DOCTYPE html>
<html>
    <head>
        <title>SVG test</title>
    </head>
    <body>
        <img src="rectangle.svg" alt="rectangle" />
    </body>
</html> 
```

* * *

我推荐第二个选项（单独的文件）。请注意，这是工作草案，得到很好的支持。所以，[检查浏览器兼容性](http://caniuse.com/#search=SVG)。

您可能不希望直接输出 SVG 文本，在这种情况下，请检查[在 .NET/C# 中绘制 SVG？](https://stackoverflow.com/q/1525421/402022)在这里，在 StackOverflow。

# php - 与全局 apache 重定向一起使用时如何处理 CSS、JS 文件（用于用户友好的 url）

> ID：12905381
> 
> 赞同：0
> 
> 时间：2012-10-15T23:22:32.150
> 
> 标签：php, apache, url, redirect

我的 htaccess 文件中有以下内容：

```
RewriteEngine On
RewriteRule ^(.*)$ rewrite.php?data=$1 [L,QSA] 
```

从 rewrite.php 我根据 url 重定向到正确的页面。问题是它重定向了所有文件，包括 css 和 js。我尝试包含这些文件，但我现在意识到这对我来说很愚蠢。当网址中有适当的扩展名时，我应该重定向吗？如果重定向是要走的路，哪种方法最好？标头位置或 HTTP_redirect？

或者这不是一个好主意的表现或明智的工作？我可以选择这样的东西，但我对 apache 几乎一无所知，现在宁愿不使用它。

```
RewriteRule ^(.*).css$ /includes/compressor.php?i=$1.css [L] 
```

我以前在我的 htaccess 文件中有以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

我决定删除它，因为：

1.  我将无法在 rewrite.php 文件中包含标头和其他常见文件。我也无法在重写文件中进行数据库调用，以确定要包含的页面并重用页面内容的数据。

2.  不需要的文件可以访问，例如仅由外部应用程序使用的服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:26:51.213

压缩应该进行一次，而不是针对每个请求。然后，如果相应的文件存在，您可以从 URL 重写中排除请求：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ rewrite.php?data=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:26:42.817

仅当服务器上不存在请求的文件时才重定向如何？

您可以使用以下重写条件来实现此目的。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ rewrite.php?data=$1 [L,QSA] 
```

因此，如果请求是针对服务器上已经存在的 CSS/JS/HTML/Image 文件，则不会发生重写，并且会处理对文件的请求。如果该文件不存在，它将运行您的重写规则到 rewrite.php

# jquery - jQuery克隆表的行

> ID：12905383
> 
> 赞同：1
> 
> 时间：2012-10-15T23:22:44.773
> 
> 标签：jquery, radio-button, clone, rows

我正在使用 jQuery 克隆我拥有的第一个表并将行添加到我的第二个表。The problem I am having is that I can't get the value of the radio button when one is selected and the add button is clicked. 此外，当我单击添加按钮时，我试图用复选框替换它，但它只在中间行工作，而不是在我单击添加时添加的最后一行。

如何获取单选按钮的值并用复选框替换克隆行上的添加按钮？

这是我到目前为止所拥有的：

[http://jsfiddle.net/AkVTw/42/](http://jsfiddle.net/AkVTw/42/)

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:05:36.540

您必须**委托该事件**，因为新添加的元素不会有与其关联的单击事件处理程序，因为当您绑定事件处理程序时该元素在页面上不存在。

替换这行代码

```
$('.checkbox').on('click',function(){ 
```

有了这个

```
$('table').on('click','.checkbox', function(){ 
```

**[小提琴](http://jsfiddle.net/sushanth009/AkVTw/49/)**

[更新的小提琴](http://jsfiddle.net/AkVTw/51/)`

# android - android中图像的部分重叠？

> ID：12905394
> 
> 赞同：0
> 
> 时间：2012-10-15T23:23:53.707
> 
> 标签：android, android-layout, android-imageview

如何在android中实现2个图像的部分重叠。请检查[http://cl.ly/KB8R](http://cl.ly/KB8R)

我正在尝试同时使用框架和相对布局，但无法实现这种外观和感觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:39:05.107

1：如果您的所有屏幕都被这两个图像填充，让第一个图像视图对齐父顶部。

```
android:layout_alignParentTop="true" 
```

并让第二个 imageview 对齐父底部。

```
android:layout_alignParentBottom="true" 
```

2：否则，您应该修复一个图像视图并给它一个像这样的 id。

```
android:id="@+id/image1" 
```

并让 image2 对齐 image1 的顶部并执行此操作。

```
android:layout_alignTop="@+id/image1"
android:layout_marginTop="100dip" 
```

# c# - 如何在 NET 程序集中自动初始化任何类

> ID：12905395
> 
> 赞同：0
> 
> 时间：2012-10-15T23:23:55.503
> 
> 标签：c#, .net, reflection, attributes

好的首先让我说，我正在考虑的是创建属性并使用该属性来自动创建用该属性装饰的类的实例。确实有可以在我的情况下构建的类的实现，我不想在这里使用 IoC 容器，因为首先我认为它们在请求之前不会创建，其次这仅适用于需要自动实例化的特殊类集这些主要是服务类。下面是用于创建单例的代码的实现

```
public abstract class Singleton<T> where T : class
{
    private readonly IEventAggregator _eventAggregator = 
        ServiceLocator.Current.GetInstance<IEventAggregator>();

    private static readonly Lazy<T> Instance
        = new Lazy<T>(() =>
                          {
                              ConstructorInfo[] ctors = typeof(T).GetConstructors(
                                  BindingFlags.Instance
                                  | BindingFlags.NonPublic
                                  | BindingFlags.Public);
                              if (ctors.Count() != 1)
                                  throw new InvalidOperationException(
                                      String.Format("Type {0} must have exactly one constructor.", typeof(T)));
                              ConstructorInfo ctor =
                                  ctors.SingleOrDefault(c => !c.GetParameters().Any() && c.IsPrivate);
                              if (ctor == null)
                                  throw new InvalidOperationException(
                                      String.Format(
                                          "The constructor for {0} must be private and take no parameters.",
                                          typeof(T)));
                              return (T)ctor.Invoke(null);
                          });

    public static T Current
    {
        get { return Instance.Value; }
    }
} 
```

这是一个定义为单例的示例类

```
public class PersonService : Singleton<PersonService>, IPersonService
{
    private PersonService()
    {
        RegisterForEvent<PersonRequest>(OnPersonRequered);
        //_serviceClient = ServiceLocator.Current.GetInstance<ICuratioCMSServiceClient>();
    }
} 
```

Hwre 用于解析所有需要激活的类型的代码。

```
public class InitOnLoad : Attribute
{
    public static void Initialise()
    {
        // get a list of types which are marked with the InitOnLoad attribute
        var types =
            from t in AppDomain.CurrentDomain.GetAssemblies().SelectMany(a => a.GetTypes())
            where t.GetCustomAttributes(typeof(InitOnLoad), false).Any()
            select t;

        // process each type to force initialize it
        foreach (var type in types)
        {
            // try to find a static field which is of the same type as the declaring class
            var field =
                type.GetFields(System.Reflection.BindingFlags.Static
                               | System.Reflection.BindingFlags.Public
                               | System.Reflection.BindingFlags.NonPublic
                               | System.Reflection.BindingFlags.Instance).FirstOrDefault(f => f.FieldType == type);
            // evaluate the static field if found
            //if (field != null) field.GetValue(null);
        }
    }
} 
```

我在 Stackoverflow 上发现了该代码片段，我认为它真的很有趣，但没有设法初始化类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:46:59.457

在对特定类进行任何引用之前，您可以使用静态构造函数运行该类的代码。这是来自 MS 的一些信息：http: [//msdn.microsoft.com/en-us/library/k9x6w0hc](http://msdn.microsoft.com/en-us/library/k9x6w0hc(v=vs.100).aspx) (v=vs.100).aspx 。

编辑：[Jon Skeet 有一篇关于这个主题的文章](http://csharpindepth.com/Articles/General/Singleton.aspx)可能会回答你的问题。它也有代码示例。

# php - 如何在远程服务器上读取 CURL POST？

> ID：12905400
> 
> 赞同：0
> 
> 时间：2012-10-15T23:24:25.050
> 
> 标签：php, curl

这是我的`cURL` `POST`功能：

```
public function curlPost($url, $data)
{
    $fields = '';

    foreach($data as $key => $value) { 
      $fields .= $key . '=' . $value . '&'; 
    }

    rtrim($fields, '&');

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, count($data));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

    $result = curl_exec($ch);
    $info   = curl_getinfo($ch);

    curl_close($ch);
}

$this->curlPost('remoteServer', array(data)); 
```

如何`POST`在远程服务器上读取？

`$_POST[]`远程服务器正在使用 PHP ......但我应该读什么 var

例如：-`$_POST['fields']`或`$_POST['result']`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:29:21.067

您的代码有效，但我建议您添加其他两件事

A.`CURLOPT_FOLLOWLOCATION`因为 HTTP 302

```
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); 
```

B.`return`如果您需要输出结果

```
return $result ; 
```

例子

```
function curlPost($url, $data) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    $result = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
    return $result;
}

print(curlPost("http://yahoo.com", array())); 
```

另一个例子

```
 print(curlPost("http://your_SITE", array("greeting"=>"Hello World"))); 
```

要阅读您的帖子，您可以使用

```
 print($_REQUEST['greeting']); 
```

或者

```
 print($_POST['greeting']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:28:49.753

作为一个普通的 POST 请求......所有发布的数据都可以在 $_POST 中找到......当然除了文件:)`&action=request1`在 URL 中添加一个示例

```
if ($_GET['action'] == 'request1') {

  print_r ($_POST);

} 
```

编辑：要查看 POST 变量，请使用 POST 处理程序文件中的以下内容

```
if ($_GET['action'] == 'request1') {
  ob_start();
  print_r($_POST);
  $contents = ob_get_contents();
  ob_end_clean();
  error_log($contents, 3, 'log.txt' );
} 
```

# performance - Symfony2 初始化时间慢

> ID：12905404
> 
> 赞同：56
> 
> 时间：2012-10-15T23:24:44.807
> 
> 标签：performance, ubuntu, symfony, virtualbox

我在 Ubuntu Server 12.04（64 位）VM（VirtualBox）上运行 Symfony2。主机是 MacBook Pro。出于某种原因，我在开发模式（app_dev.php）中的请求时间非常长。我知道它在开发模式下速度较慢，但​​我说的是每个请求 5-7 秒（有时甚至更慢）。在我的 Mac 上，我在开发模式下获得 200 毫秒左右的请求时间。

在 Symfony2 分析器中查看我的时间线后，我注意到约 95% 的请求时间是“初始化时间”。这是什么？它可能如此缓慢的一些原因是什么？

此问题仅适用于开发模式下的 Symfony2，不适用于我在 VM 上运行的任何其他站点，甚至不适用于生产模式下的 Symfony2。

我看到了这个（http://stackoverflow.com/questions/11162429/whats-included-in-the-initialization-time-in-the-symfony2-web-profiler），但它似乎没有回答我的问题。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-07-29T00:54:45.230

默认情况下，我从 Symfony2 得到 5-30 秒的响应。**现在**在开发环境中约为 500 毫秒。

然后我修改了以下内容`php.ini`：

*   **设置`realpath_cache_size = 4M`**（或更多）
*   完全禁用`XDebug`（用 测试`phpinfo`）
*   realpath_cache_ttl=7200
*   正确启用和设置`OPcache`（或 APC）
*   重新启动 Apache 以重新加载 php.ini

瞧，在开发模式下响应不到 2 秒！希望能帮助到你。

**之前：** 6779 毫秒 ![在此处输入图像描述](../Images/78be69d83d788bd7892d534923c2b62a.png)

**之后：** 1587 毫秒

![在此处输入图像描述](../Images/f81f7a76690ec98a46b3a3aa21cb35a1.png)

Symfony2 从数千个文件中读取类，这是一个缓慢的过程。使用小型 PHP realpath 缓存时，如果文件路径不在 PHP 的 realpath 缓存中，则每次在 dev 环境中发出新请求时，都需要逐一解析文件路径。对于 Symfony2，realpath 缓存默认太小。在产品中，这当然不是问题。

## 缓存元数据：

缓存元数据（例如映射）对于进一步提高性能也非常重要：

```
doctrine:
    orm:
        entity_managers:
            default:
                metadata_cache_driver: apc
                query_cache_driver: apc
                result_cache_driver: apc 
```

您需要为此启用`APCu`。它`APC`没有字节码缓存，就像`OPCache`操作码缓存一样。`OPCache`自 PHP 5.5 以来内置。

## ----**之后：** 467 毫秒 ----

（在 prod 环境中，相同的响应约为 80 ms）

[![在此处输入图像描述](../Images/ef13db4c607185ebfb7945bfd9ed15bf.png)](https://i.stack.imgur.com/yyMbm.png)

请注意，这个项目使用了 30 多个捆绑包，拥有数万行代码，近百个自己的服务，因此仅使用一些简单的优化，0.5 秒在本地 Windows 环境中是相当不错的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-19T04:04:52.590

我找出了问题的原因（而不是 Symfony2）。由于某些原因，在 ubuntu VM 上，某些文件的修改时间不正确（即将来等）。当 symfony2 使用 filemtime() 对它的注册表检查这些时间时，它确定缓存不再是新鲜的，它会重建整个东西。我还没有弄清楚它为什么会这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T14:54:57.160

我还需要禁用`xdebug (v2.2.21)`在我的 macbook 上调试 apache2 最大超时加载。它是使用 macports 安装的：

```
sudo port install php54-xdebug. 
```

启用 xdebug 后，每个页面都会用完最大加载时间，并出现一个致命错误，超过了发送的最大超时消息。禁用后，一切都会在合理的预期时间内正常加载。我使用 MAMP 来实现这一点，默认情况下没有启用 xdebug，而 apache2 就像往常一样快速运行。我可能会更换另一个调试器，这很可惜，因为 xdebug 以前工作得很好。

配置：

*   macOS 10.6.8
*   端口 2.1.3
*   阿帕奇 2.2.24
*   php 5.4

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-07T08:30:50.970

我们有同样的问题。在这里，每个请求都有 10 秒甚至更多的时间。我看看我是否删除了 bootstrap.php.cache 中的以下行，所有时间都返回正常状态（298 毫秒）。

```
foreach ($meta as $resource) { 
if (!$resource->isFresh($time)) {
return false;
}
} 
```

我们可能有错误的修改时间，但我们不知道如何修复。有人知道解决方案吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-24T12:17:58.497

如[https://stackoverflow.com/a/12967229/6108843](https://stackoverflow.com/a/12967229/6108843)所述，这种行为的原因可能是 Ubuntu VM 设置。[您应该按照https://superuser.com/questions/463106/virtualbox-how-to-sync-host-and-guest-time](https://superuser.com/questions/463106/virtualbox-how-to-sync-host-and-guest-time)中的说明在主机和来宾操作系统之间同步日期和时间。

当您通过 FTP 将文件上传到 VM 时，文件修改日期会更改为主机的值。这就是为什么 filemtime() 返回错误值的原因。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-21T08:54:07.937

您可以移动`APP/var/cache`в `/dev/shm/YourAppName/var/cache`。但是最好在本地文件中构建容器以用于 IDE 自动完成和代码验证。在`app/AppKernel.php`：

```
public function getCacheDir()
{
    return $this->getVarOrShmDir('cache/' . $this->getEnvironment());
}

public function getLogDir()
{
    return $this->getVarOrShmDir('logs');
}

private function getVarOrShmDir($dir)
{
    $result = dirname(__DIR__) . '/var/' . $dir;

    if (
        in_array($this->environment, ['dev', 'test'], true) &&
        empty($_GET['warmup']) && // to force using real directory add ?warmup=1 to URL
        is_dir($result) && // first time create real directory, later use shm
        file_exists('/bin/mount') && shell_exec('mount | grep vboxsf') // only for VirtualBox
    ) {
        $result = '/dev/shm/' . 'YourAppName' . '/' . $dir . '/' . $this->getEnvironment();
    }

    return $result;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-13T13:34:23.850

我禁用了 xdebug，它导致加载时间从 17 秒（是的..）减少到 0.5 秒。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-07T02:53:49.117

我在开发过程中也遇到了页面加载缓慢的问题，当你调整 CSS 或类似的东西时，这会非常令人沮丧。

经过一番挖掘，我发现问题是由 Assetic 引起的，它在每次页面加载时重新编译所有资产：

[http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment)

通过禁用 Assetic 控制器，我能够大大增加我的页面负载。但是，正如上面的链接所述，这是以每当您对资产进行更改（或对其进行监视）时重新生成资产的代价。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-10-16T02:02:28.587

在 app_dev 中，所有的缓存和自动加载都是从头开始的，而我发现在 dev 中最慢的是 orm。因为它，我回避使用 orm 并主要关注 dbal，尽管我可能不应该这样做。Orm 在 sf2 中用的比较多。我的猜测是 orm 是让你在开发中最慢的东西。查看您的开发配置和产品配置之间的区别。但是，对您的开发配置进行一些调整可以使开发更加快速和愉快。只要尝试并注意您在做什么。例如，关闭 twig 控制器然后修改大量模板会有点令人沮丧。您需要不断清除缓存。但就像你提到的，它只是开发者，当它上线的时候，symfony 会为你加速。

# ruby - 如何简单地将一个模块用于不同的类？比如（字符串、数组、哈希）

> ID：12905415
> 
> 赞同：1
> 
> 时间：2012-10-15T23:26:48.827
> 
> 标签：ruby

我为 Enumerables 模块编写了代码：

```
module Enumerables
  def palindrome?
    if self.is_a?(Hash)
      return false
    else
      self.join('').gsub(/\W/,"").downcase == self.join('').gsub(/\W/,"").downcase.reverse
    end
  end
end 
```

问题是，我必须写这些：

```
class Array
  include Enumerables
end

class Hash
  include Enumerables
end 
```

使代码成功运行。

有没有一种简单的方法来制作“回文”？方法使用不同的实例类型运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:48:14.617

该模块不是`Enumerables`，但`Enumerable`如果你有

```
module Enumerable
  def palindrome?
    ...
  end
end 
```

它可以在没有包含的情况下工作。

如果您想将此方法添加到所有对象，请参阅 texasbruce 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:54:35.547

打开对象级别以下的任何类并在其中添加此方法。然后几乎所有内置类型和所有用户定义类型都可以访问它。

你可以把它放在`Object`, `Kernel`（它是一个模块）, `BasicObject`.

例如，

```
class Object
  def foo
    puts "hello"
  end
end
[].foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:46:23.680

您可以使用带有过滤器的[`ObjectSpace.each_object`迭代](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-each_object)器来查找包含 Enumerable 的类并动态扩展它们：

```
# XXX: this iterator yields *every* object in the interpreter!
ObjectSpace.each_object do |obj|
  if obj.is_a?(Class) && (obj < Enumerable)
    obj.module_eval { include Enumerables }
  end
end

[1,2,1].palindrome? # => true
{}.palindrome? # => false 
```

现在的诀窍是以有意义的方式编写适用于所有可枚举类型的东西！另请注意，这种元编程很有趣，但如果您打算将其用于“玩具”程序以外的任何东西，则会产生严重影响。

# nsis - ReadRegStr 失败

> ID：12905419
> 
> 赞同：2
> 
> 时间：2012-10-15T23:27:00.993
> 
> 标签：nsis

我正在尝试使用 ReadregStr，

```
ReadRegStr $R0 HKLM "SOFTWARE\MyAPP" "ProgramPath" 
```

但它返回空字符串。当我查看 HKLM 下的注册表项时，我可以看到 SOFTWARE\MyAPP。

```
Value Name = ProgramPath
Value Data = C:\MyAPP 
```

我在哪里做错了。谁能告诉我如何获取“MyAPP”的安装路径

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T01:08:05.543

如果这是您需要使用的 64 位 Windows `Setregview 64`，如果此值存储在您需要从中读取的虚拟存储中`HKCU classes\VirtualStore\Machine\Software\...`

# command-line - 什么是 Python 的 http.server（或 SimpleHTTPServer）的更快替代方案？

> ID：12905426
> 
> 赞同：320
> 
> 时间：2012-10-15T23:27:40.400
> 
> 标签：command-line, httpserver, command-line-tool, simplehttpserver

Python 的[http.server](https://docs.python.org/3/library/http.server.html)（或 Python 2 的 SimpleHTTPServer）是从命令行提供当前目录内容的好方法：

```
python -m http.server 
```

然而，就网络服务器而言，它非常缓慢......

它的行为就好像它是单线程的，并且在使用 RequireJS 加载 JavaScript AMD 模块时偶尔会导致超时错误。加载一个没有图像的简单页面可能需要五到十秒钟。

什么是同样方便的更快替代方案？

* * *

## 回答 #1

> 赞同：412
> 
> 时间：2012-10-15T23:27:40.400

[node.js 的http-server](https://github.com/nodeapps/http-server)非常方便，而且比 Python 的 SimpleHTTPServer 快很多。这主要是因为它使用异步 IO 来并发处理请求，而不是序列化请求。

### 安装

如果您还没有安装 node.js。然后使用节点包管理器 ( `npm`) 安装包，使用`-g`全局安装选项。如果您在 Windows 上，您将需要具有管理员权限的提示，而在 Linux/OSX 上，您将需要`sudo`以下命令：

```
npm install http-server -g 
```

这将下载任何所需的依赖项并安装`http-server`.

### 利用

现在，从任何目录中，您可以键入：

```
http-server [path] [options] 
```

路径是可选的，`./public`如果存在则默认为，否则为`./`.

选项是 [默认值]：

*   `-p`要侦听的端口号 [8080]
*   `-a`要绑定到 [localhost] 的主机地址
*   `-i`显示目录索引页 [True]
*   `-s`或`--silent`静默模式不会登录到控制台
*   `-h`或`--help`显示帮助信息并退出

因此，要在端口 8000 上提供当前目录，请键入：

```
http-server -p 8000 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2013-01-31T03:35:16.417

我推荐：**Twisted** ( [http://twistedmatrix.com](http://twistedmatrix.com) )

> 一个用 Python 编写的事件驱动的网络引擎，并在开源 MIT 许可下获得许可。

它是跨平台的，预装在 OS X 10.5 到 10.12 上。您可以在当前目录中启动一个简单的 Web 服务器，其中包括：

```
twistd -no web --path=. 
```

### 细节

选项说明（见`twistd --help`更多）：

```
-n, --nodaemon       don't daemonize, don't use default umask of 0077
-o, --no_save        do not save state on shutdown 
```

“web”是一个命令，它在 Twisted 异步引擎之上运行一个简单的 Web 服务器。它还接受命令行选项（在“web”命令之后 - 请参阅`twistd web --help`更多信息）：

```
 --path=             <path> is either a specific file or a directory to be
                      set as the root of the web server. Use this if you
                      have a directory full of HTML, cgi, php3, epy, or rpy
                      files or any other files that you want to be served up
                      raw. 
```

还有很多其他命令，例如：

```
conch            A Conch SSH service.
dns              A domain name server.
ftp              An FTP server.
inetd            An inetd(8) replacement.
mail             An email service
... etc 
```

### 安装

Ubuntu

```
sudo apt-get install python-twisted-web (or python-twisted for the full engine) 
```

Mac OS-X（预装在 10.5 - 10.12 上，或者在 MacPorts 中和通过 Pip 提供）

```
sudo port install py-twisted 
```

视窗

```
installer available for download at http://twistedmatrix.com/ 
```

### HTTPS

Twisted 还可以利用安全证书来加密连接。将此与您现有的`--path`和`--port`（对于纯 HTTP）选项一起使用。

```
twistd -no web -c cert.pem -k privkey.pem --https=4433 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-12-20T11:01:33.640

[![](../Images/933969899669dcf79bbc4f71489af112.png)go](/questions/tagged/go "显示标记为“开始”的问题") 1.0 包含一个[http 服务器](http://golang.org/pkg/net/http/#ListenAndServe)和实用程序，用于通过几行代码[提供文件。](http://golang.org/pkg/net/http/#FileServer)

```
package main

import (
    "fmt"; "log"; "net/http"
)

func main() {
    fmt.Println("Serving files in the current directory on port 8080")
    http.Handle("/", http.FileServer(http.Dir(".")))
    err := http.ListenAndServe(":8080", nil)
    if err != nil {
        log.Fatal("ListenAndServe: ", err)
    }
} 
```

`go run myserver.go`使用或构建可执行文件运行此源`go build myserver.go`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-02-26T22:23:27.183

试试[webfs](http://linux.bytesex.org/misc/webfs.html)，它很小，不依赖于安装 node.js 或 python 之类的平台。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-11-15T21:32:20.547

如果您使用 Mercurial，则可以使用内置的 HTTP 服务器。在您希望提供的文件夹中：

```
hg serve 
```

从[文档](https://www.mercurial-scm.org/wiki/hgserve)：

```
export the repository via HTTP

    Start a local HTTP repository browser and pull server.

    By default, the server logs accesses to stdout and errors to
    stderr. Use the "-A" and "-E" options to log to files.

options:

 -A --accesslog       name of access log file to write to
 -d --daemon          run server in background
    --daemon-pipefds  used internally by daemon mode
 -E --errorlog        name of error log file to write to
 -p --port            port to listen on (default: 8000)
 -a --address         address to listen on (default: all interfaces)
    --prefix          prefix path to serve from (default: server root)
 -n --name            name to show in web pages (default: working dir)
    --webdir-conf     name of the webdir config file (serve more than one repo)
    --pid-file        name of file to write process ID to
    --stdio           for remote clients
 -t --templates       web templates to use
    --style           template style to use
 -6 --ipv6            use IPv6 in addition to IPv4
    --certificate     SSL certificate file

use "hg -v help serve" to show global options 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-08-02T15:37:19.107

[这是另一个。这是一个 Chrome 扩展程序](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=en)

安装后，您可以通过在 Chrome 中创建一个新选项卡并单击左上角附近的*应用程序按钮来运行它*

它有一个简单的 gui。单击选择文件夹，然后单击`http://127.0.0.1:8887`链接

[![在此处输入图像描述](../Images/7eb4cb4ec6ce7b818dfbb8517301bdb0.png)](https://i.stack.imgur.com/NXy0A.png)

[https://www.youtube.com/watch?v=AK6swHiPtew](https://www.youtube.com/watch?v=AK6swHiPtew)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-06-11T23:15:31.207

我发现`python -m http.server`不可靠——有些响应需要几秒钟的时间。

现在我使用名为 Ran [https://github.com/m3ng9i/ran的服务器](https://github.com/m3ng9i/ran)

> Ran：一个用 Go 编写的简单的静态 Web 服务器

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-05-12T06:51:04.707

还可以考虑[devd](https://github.com/cortesi/devd)一个用 go 编写的小型网络服务器。许多平台的二进制文件都可以[在这里找到](https://github.com/cortesi/devd/releases/tag/v0.5)。

```
devd -ol path/to/files/to/serve 
```

它体积小、速度快，并提供了一些有趣的可选功能，例如文件更改时的实时重新加载。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-11-08T17:13:41.630

如果您安装了 PHP，您可以使用内置服务器。

```
php -S 0:8080 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-11-16T04:25:24.903

试试polpetta...

> npm install -g polpetta

那么你也能

> polpetta ~/文件夹

你准备好了:-)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-03-04T13:20:30.020

使用 Servez 作为服务器

1.  下载[服务](https://greggman.github.io/servez/)
2.  安装它，运行它
3.  选择要投放的文件夹
4.  选择“开始”
5.  转到`http://localhost:8080`或选择“启动浏览器”

![服务](../Images/3ef000f6b2d8713271552079d7b6f383.png)

注意：我把它放在一起是因为 Chrome 的 Web 服务器正在消失，因为[Chrome 正在取消对应用程序的支持，](https://blog.chromium.org/2016/08/from-chrome-apps-to-web.html)并且因为我支持对命令行零经验的艺术学生

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-11-04T09:32:25.210

另一个基于节点的简单命令行服务器

[https://github.com/greggman/servez-cli](https://github.com/greggman/servez-cli)

部分是为了响应 http-server 的问题，特别是在 windows 上。

## 安装

然后[安装 node.js](https://nodejs.org)

```
npm install -g servez 
```

## 用法

```
servez [options] [path] 
```

没有路径，它服务于当前文件夹。

默认情况下，它`index.html`用于文件夹路径（如果存在）。否则，它会为文件夹提供目录列表。它还提供 CORS 标头。您可以选择启用基本身份验证，`--username=somename --password=somepass`并且可以提供 https。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-02-17T16:19:38.103

我喜欢[live-server](https://www.npmjs.com/package/live-server)。它速度快，并且具有很好的实时重新加载功能，这在开发过程中非常方便。

用法很简单：

```
cd ~/Sites/
live-server 
```

默认情况下，它会创建一个 IP 为 127.0.0.1 和端口为 8080 的服务器。

[http://127.0.0.1:8080/](http://127.0.0.1:8080/)

如果端口 8080 不是空闲的，它使用另一个端口：

[http://127.0.0.1:52749/](http://127.0.0.1:52749/)

[http://127.0.0.1:52858/](http://127.0.0.1:52858/)

如果您需要查看本地网络中其他机器上的 Web 服务器，您可以检查您的 IP 并使用：

```
live-server --host=192.168.1.121 
```

这是一个自动抓取默认接口IP地址的脚本。**它仅适用于 macOS**。

如果你把它放进去`.bash_profile`，该`live-server`命令将自动启动具有正确 IP 的服务器。

```
# **
# Get IP address of default interface
# *
function getIPofDefaultInterface()
{
    local  __resultvar=$1

    # Get default route interface
    if=$(route -n get 0.0.0.0 2>/dev/null | awk '/interface: / {print $2}')
    if [ -n "$if" ]; then
            # Get IP of the default route interface
            local __IP=$( ipconfig getifaddr $if )
            eval $__resultvar="'$__IP'"
    else
        # Echo "No default route found"
        eval $__resultvar="'0.0.0.0'"
    fi
}

alias getIP='getIPofDefaultInterface IP; echo $IP'

# **
# live-server
# https://www.npmjs.com/package/live-server
# *
alias live-server='getIPofDefaultInterface IP && live-server --host=$IP' 
```

# c++ - 在 C++ 中链接 cURL

> ID：12905431
> 
> 赞同：3
> 
> 时间：2012-10-15T23:28:07.257
> 
> 标签：c++, curl, libcurl

在今天尝试了所有这些都没有结果，并在这里和论坛上搜索了很多线程之后，我希望这里的某个人能够找到解决方案。

我试图让[这个简单的例子使用 cURL](http://curl.haxx.se/libcurl/c/simple.html)在 Windows 上使用 MinGW 工作。

当我尝试用 g++ 编译它时

```
g++ -o Test.exe Test.cpp -DCURL_STATICLIB -I curl\include -L curl\lib -lcurl 
```

它总是给我同样的错误：

```
C:\Users\Xenon\AppData\Local\Temp\ccI5UUEq.o:Test.cpp:(.text+0x87): undefined reference to `_curl_easy_init'
C:\Users\Xenon\AppData\Local\Temp\ccI5UUEq.o:Test.cpp:(.text+0xb6): undefined reference to `_curl_easy_setopt'
C:\Users\Xenon\AppData\Local\Temp\ccI5UUEq.o:Test.cpp:(.text+0xc2): undefined reference to `_curl_easy_perform'
C:\Users\Xenon\AppData\Local\Temp\ccI5UUEq.o:Test.cpp:(.text+0xd9): undefined reference to `_curl_easy_strerror'
C:\Users\Xenon\AppData\Local\Temp\ccI5UUEq.o:Test.cpp:(.text+0x101): undefined reference to `_curl_easy_cleanup'
collect2.exe: error: ld returned 1 exit status 
```

老实说，我完全不知道是什么原因造成的。任何帮助将不胜感激。提前致谢！

**编辑：** 添加参数-v时，我得到以下输出：

```
g++ -v -o Test.exe Test.cpp -DCURL_STATICLIB -I curl\include -L curl\lib -lcurl
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.7.0/lto-wrapper.exe
Target: mingw32
Configured with: ../gcc-4.7.0/configure --enable-languages=c,c++,ada,fortran,objc,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgomp --disable-win32-registry --enable-libstdcxx-debug --disable-build-poststage1-with-cxx --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.7.0 (GCC)
COLLECT_GCC_OPTIONS='-v' '-o' 'Test.exe' '-D' 'CURL_STATICLIB' '-I' 'curl\include' '-Lcurl\lib' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../libexec/gcc/mingw32/4.7.0/cc1plus.exe -quiet -v -I curl\include
 -iprefix c:\mingw\bin\../lib/gcc/mingw32/4.7.0/ -D CURL_STATICLIB Test.cpp -quiet -dumpbase Test.cpp -mtune=i386 -march=i386 -auxbase Test -version -o C:\Users\Xenon\AppData\Local\Temp\ccsSlqnP.s
GNU C++ (GCC) version 4.7.0 (mingw32)
        compiled by GNU C version 4.7.0, GMP version 5.0.1, MPFR version 2.4.1,
MPC version 0.8.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "c:\mingw\bin\../lib/gcc/mingw32/4.7.0/../../../../mingw32/include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/include/c++"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/include/c++/mingw32"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/include/c++/backward"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/include"
ignoring nonexistent directory "/mingw/include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/include-fixed"
ignoring nonexistent directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.7.0/../../../../mingw32/include"
ignoring nonexistent directory "/mingw/include"
#include "..." search starts here:
#include <...> search starts here:
 curl\include
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/include/c++
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/include/c++/mingw32
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/include/c++/backward
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/include
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/../../../../include
 c:\mingw\bin\../lib/gcc/mingw32/4.7.0/include-fixed
End of search list.
GNU C++ (GCC) version 4.7.0 (mingw32)
        compiled by GNU C version 4.7.0, GMP version 5.0.1, MPFR version 2.4.1, MPC version 0.8.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 9fc40f37d31a03e5502141ce58bdf4c7
COLLECT_GCC_OPTIONS='-v' '-o' 'Test.exe' '-D' 'CURL_STATICLIB' '-I' 'curl\include' '-Lcurl\lib' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/bin/as.exe -o C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o C:\Users\Xenon\AppData\Local\Temp\ccsSlqnP.s
COMPILER_PATH=c:/mingw/bin/../libexec/gcc/mingw32/4.7.0/;c:/mingw/bin/../libexec/gcc/;c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/bin/
LIBRARY_PATH=c:/mingw/bin/../lib/gcc/mingw32/4.7.0/;c:/mingw/bin/../lib/gcc/;c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/lib/;c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../
COLLECT_GCC_OPTIONS='-v' '-o' 'Test.exe' '-D' 'CURL_STATICLIB' '-I' 'curl\include' '-Lcurl\lib' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../libexec/gcc/mingw32/4.7.0/collect2.exe -Bdynamic -u ___register_frame_info -u ___deregister_frame_info -o Test.exe c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../crt2.o c:/mingw/bin/../lib/gcc/mingw32/4.7.0/crtbegin.o -Lcurl\lib -Lc:/mingw/bin/../lib/gcc/mingw32/4.7.0 -Lc:/mingw/bin/../lib/gcc -Lc:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/lib -Lc:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../.. C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o -lcurl -lstdc++ -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi32 -lshell32
 -luser32 -lkernel32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw/bin/../lib/gcc/mingw32/4.7.0/crtend.o
C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o:Test.cpp:(.text+0xf): undefined reference to `_curl_easy_init'
C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o:Test.cpp:(.text+0x36): undefined reference to `_curl_easy_setopt'
C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o:Test.cpp:(.text+0x42): undefined reference to `_curl_easy_perform'
C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o:Test.cpp:(.text+0x59): undefined reference to `_curl_easy_strerror'
C:\Users\Xenon\AppData\Local\Temp\ccYxunOQ.o:Test.cpp:(.text+0x81): undefined reference to `_curl_easy_cleanup'
collect2.exe: error: ld returned 1 exit status 
```

我仍然不知道是什么导致了我的问题……所有那些“被忽略”的目录都是正常的吗？

**编辑：**现在使用 32 位 cURL 库后，编译器实际上是在向垃圾邮件发送错误消息。我不知道这是否意味着它现在正在工作或什至更坏......不得不删除一些消息，因为它们是 506 行......

```
>g++ -o Test.exe Test.cpp -DCURL_STATICLIB -I curl\include -L curl\lib -lcurl
curl\lib/libcurl.a(easy.o):(.text+0x16): undefined reference to `_WSAStartup@8'
curl\lib/libcurl.a(easy.o):(.text+0x39): undefined reference to `_WSACleanup@0'
[...]
curl\lib/libcurl.a(ssluse.o):(.text+0x1662): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x1688): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x16cb): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x16f7): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x1723): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x174f): more undefined references to `_BN_num_bits' follow
curl\lib/libcurl.a(ssluse.o):(.text+0x1833): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1876): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x18a2): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x18ce): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x18fa): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x192a): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x195a): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x199a): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x19c6): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x19f2): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x1a22): undefined reference to `_BN_num_bits'
curl\lib/libcurl.a(ssluse.o):(.text+0x1a52): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1ade): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1b22): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1b66): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1baa): undefined reference to `_BN_bn2bin'
curl\lib/libcurl.a(ssluse.o):(.text+0x1bee): more undefined references to `_BN_bn2bin' follow
curl\lib/libcurl.a(ssluse.o):(.text+0x1e8c): undefined reference to `_GENERAL_NAMES_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x1ea0): undefined reference to `_X509_get_subject_name'
curl\lib/libcurl.a(ssluse.o):(.text+0x1eca): undefined reference to `_X509_NAME_get_index_by_NID'
curl\lib/libcurl.a(ssluse.o):(.text+0x1ee2): undefined reference to `_X509_NAME_get_entry'
curl\lib/libcurl.a(ssluse.o):(.text+0x1eea): undefined reference to `_X509_NAME_ENTRY_get_data'
curl\lib/libcurl.a(ssluse.o):(.text+0x1efc): undefined reference to `_ASN1_STRING_type'
curl\lib/libcurl.a(ssluse.o):(.text+0x1f15): undefined reference to `_ASN1_STRING_to_UTF8'
curl\lib/libcurl.a(ssluse.o):(.text+0x1f7f): undefined reference to `_CRYPTO_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x1f96): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x203f): undefined reference to `_ASN1_STRING_data'
curl\lib/libcurl.a(ssluse.o):(.text+0x2052): undefined reference to `_ASN1_STRING_length'
curl\lib/libcurl.a(ssluse.o):(.text+0x20e0): undefined reference to `_PEM_read_X509'
curl\lib/libcurl.a(ssluse.o):(.text+0x2105): undefined reference to `_X509_check_issued'
curl\lib/libcurl.a(ssluse.o):(.text+0x213e): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x2146): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x21c6): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x2274): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x2280): undefined reference to `_X509_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x22b4): more undefined references to `_X509_free' follow
curl\lib/libcurl.a(ssluse.o):(.text+0x22c3): undefined reference to `_SSL_get_verify_result'
curl\lib/libcurl.a(ssluse.o):(.text+0x233e): undefined reference to `_GENERAL_NAMES_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x23b7): undefined reference to `_ASN1_STRING_length'
curl\lib/libcurl.a(ssluse.o):(.text+0x23dc): undefined reference to `_CRYPTO_malloc'
curl\lib/libcurl.a(ssluse.o):(.text+0x23ec): undefined reference to `_ASN1_STRING_data'
curl\lib/libcurl.a(ssluse.o):(.text+0x2467): undefined reference to `_X509_verify_cert_error_string'
curl\lib/libcurl.a(ssluse.o):(.text+0x248e): undefined reference to `_X509_verify_cert_error_string'
curl\lib/libcurl.a(ssluse.o):(.text+0x24c9): undefined reference to `_GENERAL_NAMES_free'
curl\lib/libcurl.a(ssluse.o):(.text+0x251a): undefined reference to `_RAND_load_file'
curl\lib/libcurl.a(ssluse.o):(.text+0x251f): undefined reference to `_RAND_status'
curl\lib/libcurl.a(ssluse.o):(.text+0x256a): undefined reference to `_RAND_add'
curl\lib/libcurl.a(ssluse.o):(.text+0x2578): undefined reference to `_RAND_status'
curl\lib/libcurl.a(ssluse.o):(.text+0x2599): undefined reference to `_RAND_file_name'
curl\lib/libcurl.a(ssluse.o):(.text+0x25b2): undefined reference to `_RAND_load_file'
curl\lib/libcurl.a(ssluse.o):(.text+0x25b7): undefined reference to `_RAND_status'
curl\lib/libcurl.a(ssluse.o):(.text+0x267f): undefined reference to `_ERR_clear_error'
curl\lib/libcurl.a(ssluse.o):(.text+0x268a): undefined reference to `_SSL_connect'
[...]
curl\lib/libcurl.a(ssluse.o):(.text+0x3ecb): undefined reference to `_RAND_bytes'
curl\lib/libcurl.a(ftp.o):(.text+0xdac): undefined reference to `_bind@12'
curl\lib/libcurl.a(ftp.o):(.text+0xdbc): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ftp.o):(.text+0xdfc): undefined reference to `_htons@4'
curl\lib/libcurl.a(ftp.o):(.text+0xe4f): undefined reference to `_getsockname@12'
curl\lib/libcurl.a(ftp.o):(.text+0xe5f): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ftp.o):(.text+0xf2d): undefined reference to `_getsockname@12'
curl\lib/libcurl.a(ftp.o):(.text+0xf51): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ftp.o):(.text+0xfb4): undefined reference to `_getsockname@12'
curl\lib/libcurl.a(ftp.o):(.text+0xfc4): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ftp.o):(.text+0x10d1): undefined reference to `_listen@8'
curl\lib/libcurl.a(ftp.o):(.text+0x10dd): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ftp.o):(.text+0x11e9): undefined reference to `_ntohs@4'
curl\lib/libcurl.a(ftp.o):(.text+0x1249): undefined reference to `_ntohs@4'
curl\lib/libcurl.a(ftp.o):(.text+0x1429): undefined reference to `_getsockname@12'
curl\lib/libcurl.a(ftp.o):(.text+0x1478): undefined reference to `_accept@12'
curl\lib/libcurl.a(ftp.o):(.text+0x2bb9): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text+0x3fc): undefined reference to `_WSAStartup@8'
curl\lib/libcurl.a(telnet.o):(.text+0x432): undefined reference to `_WSACleanup@0'
curl\lib/libcurl.a(telnet.o):(.text+0xe1b): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text+0xe41): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text+0xf11): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x17b): undefined reference to `_send@16'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x18b): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x3bb): undefined reference to `_ntohs@4'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x3cb): undefined reference to `_ntohs@4'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x5bd): undefined reference to `_htons@4'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x5d2): undefined reference to `_htons@4'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x6ae): undefined reference to `_send@16'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x6ba): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x708): undefined reference to `_send@16'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x714): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x853): undefined reference to `_send@16'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x85f): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x9ad): undefined reference to `_send@16'
curl\lib/libcurl.a(telnet.o):(.text.unlikely+0x9b9): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(ldap.o):(.text+0x221): undefined reference to `__imp__ldap_err2stringA'
curl\lib/libcurl.a(ldap.o):(.text+0x267): undefined reference to `__imp__ldap_msgfree'
curl\lib/libcurl.a(ldap.o):(.text+0x298): undefined reference to `__imp__ldap_unbind_s'
curl\lib/libcurl.a(ldap.o):(.text+0x6cb): undefined reference to `__imp__ldap_set_optionA'
curl\lib/libcurl.a(ldap.o):(.text+0x721): undefined reference to `__imp__ldap_simple_bind_sA'
curl\lib/libcurl.a(ldap.o):(.text+0x778): undefined reference to `__imp__ldap_search_sA'
curl\lib/libcurl.a(ldap.o):(.text+0x796): undefined reference to `__imp__ldap_err2stringA'
curl\lib/libcurl.a(ldap.o):(.text+0x825): undefined reference to `__imp__ldap_err2stringA'
curl\lib/libcurl.a(ldap.o):(.text+0x888): undefined reference to `__imp__ldap_set_optionA'
curl\lib/libcurl.a(ldap.o):(.text+0x8a3): undefined reference to `__imp__ldap_initA'
curl\lib/libcurl.a(ldap.o):(.text+0x8dd): undefined reference to `__imp__ldap_first_entry'
curl\lib/libcurl.a(ldap.o):(.text+0x91e): undefined reference to `__imp__ldap_get_dnA'
curl\lib/libcurl.a(ldap.o):(.text+0x9bd): undefined reference to `__imp__ldap_first_attributeA'
curl\lib/libcurl.a(ldap.o):(.text+0x9e9): undefined reference to `__imp__ldap_get_values_lenA'
curl\lib/libcurl.a(ldap.o):(.text+0xbc9): undefined reference to `__imp__ldap_value_free_len'
curl\lib/libcurl.a(ldap.o):(.text+0xc1e): undefined reference to `__imp__ldap_memfreeA'
curl\lib/libcurl.a(ldap.o):(.text+0xc3d): undefined reference to `__imp__ldap_next_attributeA'
curl\lib/libcurl.a(ldap.o):(.text+0xc56): undefined reference to `__imp__ldap_memfreeA'
curl\lib/libcurl.a(ldap.o):(.text+0xc71): undefined reference to `__imp__ber_free'
curl\lib/libcurl.a(ldap.o):(.text+0xc86): undefined reference to `__imp__ldap_next_entry'
curl\lib/libcurl.a(ldap.o):(.text+0xcaf): undefined reference to `__imp__ldap_value_free_len'
curl\lib/libcurl.a(ldap.o):(.text+0xcbc): undefined reference to `__imp__ldap_memfreeA'
curl\lib/libcurl.a(ldap.o):(.text+0xccb): undefined reference to `__imp__ldap_memfreeA'
curl\lib/libcurl.a(ldap.o):(.text+0xcea): undefined reference to `__imp__ber_free'
curl\lib/libcurl.a(tftp.o):(.text+0x210): undefined reference to `_sendto@24'
curl\lib/libcurl.a(tftp.o):(.text+0x29b): undefined reference to `_sendto@24'
[...]
curl\lib/libcurl.a(ssh.o):(.text+0x46a9): undefined reference to `_libssh2_knownhost_init'
curl\lib/libcurl.a(ssh.o):(.text+0x46cd): undefined reference to `_libssh2_knownhost_readfile'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x24): undefined reference to `_RTMP_Close'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x2c): undefined reference to `_RTMP_Free'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0xbc): undefined reference to `_setsockopt@20'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0xcf): undefined reference to `_RTMP_Connect1'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x13d): undefined reference to `_RTMP_Write'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x15e): undefined reference to `_RTMP_Alloc'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x16c): undefined reference to `_RTMP_Init'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x17c): undefined reference to `_RTMP_SetBufferMS'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x190): undefined reference to `_RTMP_SetupURL'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x1ac): undefined reference to `_RTMP_Free'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x1eb): undefined reference to `_RTMP_Read'
curl\lib/libcurl.a(curl_rtmp.o):(.text+0x24e): undefined reference to `_RTMP_ConnectStream'
curl\lib/libcurl.a(select.o):(.text+0x2e): undefined reference to `_WSASetLastError@4'
curl\lib/libcurl.a(select.o):(.text+0x2ae): undefined reference to `_select@20'
curl\lib/libcurl.a(select.o):(.text+0x2bd): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(select.o):(.text+0x354): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x374): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x3b4): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x3d1): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x42f): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x445): more undefined references to `___WSAFDIsSet@8' follow
curl\lib/libcurl.a(select.o):(.text+0x77d): undefined reference to `_select@20'
curl\lib/libcurl.a(select.o):(.text+0x78c): undefined reference to `_WSAGetLastError@0'
curl\lib/libcurl.a(select.o):(.text+0x849): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x863): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(select.o):(.text+0x884): undefined reference to `___WSAFDIsSet@8'
curl\lib/libcurl.a(content_encoding.o):(.text+0x170): undefined reference to `_inflate'
curl\lib/libcurl.a(content_encoding.o):(.text+0x18c): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x1ac): undefined reference to `_inflateInit2_'
curl\lib/libcurl.a(content_encoding.o):(.text+0x224): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x27e): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x294): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x2be): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x2ce): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x33e): undefined reference to `_inflateInit_'
curl\lib/libcurl.a(content_encoding.o):(.text+0x472): undefined reference to `_zlibVersion'
curl\lib/libcurl.a(content_encoding.o):(.text+0x4b0): undefined reference to `_inflateInit2_'
curl\lib/libcurl.a(content_encoding.o):(.text+0x4f8): undefined reference to `_inflateInit2_'
curl\lib/libcurl.a(content_encoding.o):(.text+0x58c): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x5c9): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(content_encoding.o):(.text+0x6ca): undefined reference to `_inflateEnd'
curl\lib/libcurl.a(nonblock.o):(.text+0x2a): undefined reference to `_ioctlsocket@12'
curl\lib/libcurl.a(md5.o):(.text+0x15): undefined reference to `_MD5_Init'
curl\lib/libcurl.a(md5.o):(.text+0x3b): undefined reference to `_MD5_Update'
curl\lib/libcurl.a(md5.o):(.text+0x4e): undefined reference to `_MD5_Final'
curl\lib/libcurl.a(md5.o):(.rdata+0x0): undefined reference to `_MD5_Init'
curl\lib/libcurl.a(md5.o):(.rdata+0x4): undefined reference to `_MD5_Update'
curl\lib/libcurl.a(md5.o):(.rdata+0x8): undefined reference to `_MD5_Final'
curl\lib/libcurl.a(md5.o):(.rdata+0x14): undefined reference to `_MD5_Init'
curl\lib/libcurl.a(md5.o):(.rdata+0x18): undefined reference to `_MD5_Update'
curl\lib/libcurl.a(md5.o):(.rdata+0x1c): undefined reference to `_MD5_Final'
curl\lib/libcurl.a(curl_gethostname.o):(.text+0x19): undefined reference to `_gethostname@8'
curl\lib/libcurl.a(socks_sspi.o):(.text+0x2e4): undefined reference to `_htons@4'
curl\lib/libcurl.a(socks_sspi.o):(.text+0x427): undefined reference to `_ntohs@4'
curl\lib/libcurl.a(socks_sspi.o):(.text+0x811): undefined reference to `_htons@4'
curl\lib/libcurl.a(socks_sspi.o):(.text+0xc5c): undefined reference to `_htons@4'
curl\lib/libcurl.a(socks_sspi.o):(.text+0xd7e): undefined reference to `_ntohs@4'
collect2.exe: error: ld returned 1 exit status 
```

**编辑：**我还尝试下载他们网站上提供的 Windows OpenSSL 包并将其包含在内 - 没有变化。

**编辑：**它终于工作了！解决方案是使用 32 位 cURL 包并将这些参数传递给编译器：

```
g++ -o Test.exe Test.cpp -DCURL_STATICLIB -I curl\include -L curl\lib -lcurldll -lssh2 -lidn -lrtmp -lssl -lcrypto -lz -lws2_32 -lwldap32 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:59:32.480

由于一切设置正确，我看到两个解决方案：

删除`-DCURL_STATICLIB`或添加`-static`到您的命令行。

**编辑：** 花了一些时间，但看起来你有一个 32 位的 Mingw 和一个 64 位的 libcurl。下载 32 位 libcurl 并重试。

# php - PHP 继续发送电子邮件但停止页面加载？

> ID：12905432
> 
> 赞同：2
> 
> 时间：2012-10-15T23:28:07.543
> 
> 标签：php

我的页面执行的脚本需要相对较长的时间才能完成。我想让用户可以提交信息，立即回显“完成”，并允许用户在脚本继续执行时退出页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:37:42.383

电子邮件自然很慢。我建议您为您的电子邮件使用工作队列。你应该看看

*   [齿轮人](http://gearman.org/)
*   [豆茎](http://kr.github.com/beanstalkd/)
*   [ZeromQ](http://www.zeromq.org/)

使用这些解决方案，您可以将慢速任务排队并继续向您的用户显示有效信息和进度。

示例客户端

```
$client= new GearmanClient();
$client->addServer();
$client->do("email", json_encode(array("A@yahoo.com","Hello World","This is your first Mail")));
echo "Welcome To XYZ" ; 
```

服务器

```
$worker = new GearmanWorker();
$worker->addServer();
$worker->addFunction("email", "sendMail");
while ( $worker->work() );

function sendMail($mail) {
    list($to, $subject, $message) = json_decode($mail);
    return mail($to, $subject, $message);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:33:10.677

使用[cron](http://en.wikipedia.org/wiki/Cron)。在您的页面上创建一个电子邮件任务并保存在 db 或 fs 中 - 没关系。创建一个每 n 分钟运行一次的脚本，该脚本获取电子邮件任务并执行它们。

不幸的是，您的主机可能没有 cron 支持...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T23:33:23.450

我的建议是将所有信息提交到表格行或类似的数据结构中，然后每隔几分钟运行一次 cronjob 以遍历每一行并根据已提交的信息运行脚本。

恐怕这会有点复杂，但它会立即释放用户（一旦原始信息存储到数据库中）

# xml - 将字符串转换为编码的 xml 文档

> ID：12905433
> 
> 赞同：0
> 
> 时间：2012-10-15T23:28:15.617
> 
> 标签：xml, vb.net, encoding, utf-8, xmldocument

我正在使用 vb.net 并且有这个包含 xml 文档的长字符串。IE。字符串的内容是 xml。

是否可以将此字符串编码为有效的 utf-8 编码的 xml 文档？我怎么能这样做？

不幸的是，创建的字符串是通过字符串连接完成的，节点值等没有编码，我正在尝试清理这些，需要确保其编码正确和有效的 xml 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:36:15.207

这应该可以解决问题：[XDocument.Parse()](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T19:19:19.443

假设您有一个包含以下内容的 xml 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<xml>
  <myfriends>
  </myfriends>
</xml> 
```

你有一个包含 xml 的字符串，如下所示：

```
dim mystring as string="<single_friend><id>21</id></single_friend>" 
```

现在要将其添加到您的 xml 文档中，您可以这样做：

```
 Dim myxml As XElement = XElement.Parse(mystring)
        document.Root.Element("myfriends").Add(myxml) 
        document.Save(path) 
```

您的最终 xml 文档将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xml>
  <myfriends>
    <single_friend>
      <id>21</id>
    </single_friend>
  </myfriends>
</xml> 
```

# python - 从文件中排序列表，在另一个文件中输出

> ID：12905434
> 
> 赞同：0
> 
> 时间：2012-10-15T23:28:17.480
> 
> 标签：python, file, sorting, csv

我正在尝试从 csv 文件中找到最小值和最大值，并将其输出到文本文件中，目前我的代码将所有数据输出到输出文件中，我不确定如何从多列中获取数据并相应地对它们进行排序。

任何指导将不胜感激，因为我对如何解决这个问题没有很好的指导

```
read_file = open("riskfactors.csv", 'r')

def create_file():

    read_file = open("riskfactors.csv", 'r')
    write_file = open("best_and_worst.txt", "w")

    for line_str in read_file:
        read_file.readline()
        print (line_str,file=write_file)

    write_file.close()
    read_file.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:14:15.893

假设您的文件是一个标准的 .csv 文件，仅包含用分号分隔的数字：

```
1;5;7;6;
3;8;1;1; 
```

然后最简单的方法是使用 str.split() 命令，然后将类型转换为 int。您可以将所有值存储在列表中（或更快：设置），然后获得最大值：

```
valuelist=[]
for line_str in read_file:
     for cell in line_str.split(";"):
         valuelist.append(int(cell))
print(max(valuelist))
print(min(valuelist)) 
```

警告：如果您的文件包含非数字条目，则必须将它们过滤掉。.csv 文件也可以有不同的分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:40:14.653

```
import sys, csv

def cmp_risks(x, y):
    # This assumes risk factors are prioritised by key columns 1, 3
    # and that column 1 is numeric while column 3 is textual
    return cmp(int(x[0]), int(y[0])) or cmp(x[2], y[2])

l = sorted(csv.reader(sys.stdin), cmp_risks))

# Write out the first and last rows
csv.writer(sys.stdout).writerows([l[0], l[len(l)-1]]) 
```

现在，我走捷径，说*输入*和*输出*文件是`sys.stdin`和`sys.stdout`. 您可能会将这些替换为您在原始问题中创建的文件对象。（例如`read_file`和`write_file`）

但是，就我而言，我可能只是运行它（如果我使用的是 linux）：

```
$ ./foo.py <riskfactors.csv >best_and_worst.txt 
```

# javascript - 修改 cookie 中的字段

> ID：12905437
> 
> 赞同：1
> 
> 时间：2012-10-15T23:28:39.313
> 
> 标签：javascript, cookies

是否可以使用 javascript 编辑 cookie 中的字段？饼干看起来像这样

```
cookie_session=[{"id":"1526","username":"test","email":"test@test.com"}] 
```

例如，是否可以编辑字段用户名的值？

我正在尝试使用

`document.cookie="Field=myValue"`

但是当我使用它时，它会将 cookie 的整个值设置为 myValue 而不是其中的某个字段。

另外，是否可以解析用户名的值以便稍后将其用于 POST 请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:38:03.973

cookie 只是一个字符串。您将 javascript 对象存储在 cookie 中。为了修改对象的单个部分，您需要解码 JSON、编辑属性并将对象重新编码回字符串以将其存储在 cookie 中。

顺便说一句 - cookie 不是用来存储 javascript 对象的。如果您不需要服务器上的数据，那么最好使用本地/会话存储。有 jQuery 插件允许这些机制以跨浏览器友好的方式工作。

编辑：可以在这里找到一个例子：[Pure Javascript - store object in cookie](https://stackoverflow.com/questions/11344531/pure-javascript-store-object-in-cookie)

# javascript - 如何将自定义工具提示添加到 Candlechart（Google 图表）

> ID：12905439
> 
> 赞同：0
> 
> 时间：2012-10-15T23:28:39.607
> 
> 标签：javascript, google-visualization

我有来自**Google Docs****电子表格**的数据，并使用**Candlechart**通过**JavaScript**显示数据如何自定义工具提示？

 ******我不使用`google.visualization.arrayToDataTable`或类似的构造函数构造数据，那么如何实现自定义工具提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:38:26.070

[谷歌的这个页面](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content)解释了如何做到这一点。页面底部显示支持[CandleStickChart](https://developers.google.com/chart/interactive/docs/gallery/candlestickchart)。******

# xcode - 将数据传回视图控制器不起作用（iOS）

> ID：12905441
> 
> 赞同：0
> 
> 时间：2012-10-15T23:28:46.797
> 
> 标签：xcode, ios5, delegates

我看到有很多关于这个主题的帖子，但似乎没有一个能解决我的问题。

我必须有一个只有一个文本字段、一个导航栏按钮（称为保存）和一个数字/标点符号键盘的视图控制器。

![在此处输入图像描述](../Images/a5e60b166a474cf1880f5b6d193360df.png)

另一个视图控制器具有 2 行的静态表视图。

![在此处输入图像描述](../Images/2ee0f3783ce6c0af5a2949f4fbb4e3d4.png)

工作流程：当用户点击表格中的第一行时，会出现第二个视图控制器（这已经有效）。然后用户输入一个数字，当他们点击保存时，输入的数字应该用于设置表格视图中第一行的详细标签。

我已经设置了我的协议和委托，但是出现了问题，因为第二个视图控制器没有消失，而且细节标签也永远不会更新以反映这个输入的数字。

我很困惑。经历了很多代码示例并尝试了很多东西，但仍然没有解决方案。任何帮助是极大的赞赏。

下面是我的两个类的代码。

第一个视图（表格视图）.h 文件（hourlyRateDetialLabel 是表格视图中的详细标签）：

```
#import UIKit/UIKit.h
#import "priceCalculatorHrRateSettingsViewController.h"

@interface priceCalculatorSettingsViewController : UITableViewController<SettingsViewControllerDelegate>

@property (strong, nonatomic) IBOutlet UILabel *hourlyRateDetialLabel;

@end 
```

.m 文件

```
#import "priceCalculatorSettingsViewController.h"
#import "priceCalculatorHrRateSettingsViewController.h"

@interface priceCalculatorSettingsViewController ()

@end

@implementation priceCalculatorSettingsViewController
@synthesize hourlyRateDetialLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 priceCalculatorHrRateSettingsViewController *vc = [[priceCalculatorHrRateSettingsViewController alloc] init];
vc.settingsViewDelegate = self;
}

- (void) HourlyRateDidSave:(priceCalculatorHrRateSettingsViewController *)controller didSetHourlyRate:(NSString *)rateValue{

    self.hourlyRateDetialLabel.text = rateValue;
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

第二类（带有文本字段和保存按钮的视图）.h 文件

```
#import UIKit/UIKit.h

@class priceCalculatorHrRateSettingsViewController;

@protocol SettingsViewControllerDelegate <NSObject>

- (void)HourlyRateDidSave:
(priceCalculatorHrRateSettingsViewController *)controller didSetHourlyRate:(NSString *)rateValue;

@end

@interface priceCalculatorHrRateSettingsViewController : UIViewController<UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *setHourlyRate;

@property (weak, nonatomic) id<SettingsViewControllerDelegate> settingsViewDelegate;
- (IBAction)saveHourlyRateValue:(id)sender;

@end 
```

.m 文件

```
#import "priceCalculatorHrRateSettingsViewController.h"

@interface priceCalculatorHrRateSettingsViewController ()

@end

@implementation priceCalculatorHrRateSettingsViewController{

}
@synthesize setHourlyRate = _setHourlyRate;
@synthesize settingsViewDelegate;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //Automatically show the keybaord
    [_setHourlyRate becomeFirstResponder];

}

- (void)viewDidUnload
{
    [self setSetHourlyRate:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (IBAction)saveHourlyRateValue:(id)sender {

    [self.settingsViewDelegate HourlyRateDidSave:self didSetHourlyRate:_setHourlyRate.text];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:07:43.887

提供的代码包括：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 priceCalculatorHrRateSettingsViewController *vc = [[priceCalculatorHrRateSettingsViewController alloc] init];
vc.settingsViewDelegate = self;
} 
```

这会在选择单元格但从不显示它时创建一个控制器，但意外行为被描述为：

> ...第二个视图控制器不会消失...

这些似乎相互矛盾。如果没有对 1\. 预期行为 2\. 观察到的行为和 3\. 产生观察到的行为的实际实现的准确描述，任何人几乎不可能解决这个问题。请不要让我们所有人猜测如何提供帮助。

# java - 根据组合框选择更新文本框

> ID：12905443
> 
> 赞同：3
> 
> 时间：2012-10-15T23:28:50.350
> 
> 标签：java, swing, event-handling, actionlistener, jcombobox

我正在制作一个小程序，该程序根据从 java 中的组合框中选择的 5 种不同的身体活动来计算燃烧的卡路里。用户有 5 个选项：保龄球、射箭、长曲棍球、摔跤和绘画。这是计算给定数字的网站，用户输入他的体重和他锻炼了多长时间，以分钟或小时为单位，当他/她点击计算时，它应该显示燃烧的总卡路里。

[http://www.nutristrategy.com/activitylist4.htm](http://www.nutristrategy.com/activitylist4.htm)

我的问题是我不知道如何根据选择更新字段，换句话说，我需要创建一个等待选择的方法，然后更新公式以根据他们的体重计算他们燃烧的卡路里。我该怎么做呢？我是否会做一个 if else 声明，“如果选择了射箭并且重量文本框中有一个数字？” 然后使用这个公式？我不知道如何检查组合框中的选择。

这是我的代码。

```
import java.awt.Component;
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import net.miginfocom.swing.MigLayout;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class calorie extends JFrame {

    public calorie() {
        JLabel titleLabel = new JLabel("Calories Burned during excercise");
        titleLabel.setFont(new Font("Serif", Font.BOLD, 20));
        titleLabel.setForeground(Color.blue);

        final JLabel distLabel = new JLabel("Choose an Activity");
        final JTextField distText = new JTextField(8);
        String[] actStrings = {"bowling", "lacrosse", "wrestling", "painting", "archery"};
        JComboBox jComboBox1 = new JComboBox(actStrings);
        jComboBox1.setEditable(true);

        final JLabel fuelLabel = new JLabel("Current weight:");
        final JTextField fuelText = new JTextField(8);

        final JLabel actTime = new JLabel("How long did you work out:");
        final JTextField time = new JTextField(8);
        String[] timeStrings = {"Minutes", "Hours"};
        JComboBox jComboBox2 = new JComboBox(timeStrings);
        jComboBox2.setEditable(true);

        final JLabel mpgLabel = new JLabel("Calories burned = ");
        final JTextField mpgText = new JTextField(8);

        JButton clearButton = new JButton("Clear");
        JButton calcButton = new JButton("Calculate");
        final JLabel labelPic1;
        final ImageIcon[] imgIcons;
        String[] fileNames = {"pics/bowling.jpg", "pics/lacrosse.jpg",
            "pics/wrestling.jpg", "pics/painting.jpg", "pics/archery.jpg"};
        imgIcons = new ImageIcon[fileNames.length];

        BufferedImage image = null;
        for (int i = 0; i < fileNames.length; i++) {
            try {
                image = ImageIO.read(new File(fileNames[i]));
            } catch (IOException ex) {
                System.out.println(ex.toString());
                System.out.println(fileNames[i]);
                JOptionPane.showMessageDialog(null, ex.toString() + " " + fileNames[i]);
                System.exit(0); // exit program
            }
            Image newimg = image.getScaledInstance(200, 200, java.awt.Image.SCALE_SMOOTH);
            imgIcons[i] = new ImageIcon(newimg);
        }
        labelPic1 = new JLabel(imgIcons[0]);
        setResizable(false);
        JPanel p = new JPanel(new MigLayout("", "[][][][][]",
                "[][][][][][][][][][][][][][][]"));
        p.setBackground(Color.WHITE);
        setContentPane(p);
        p.add(labelPic1, "cell 0 3 1 3");
        p.add(calcButton, "cell 0 9");
        p.add(titleLabel, "cell 1 0 2 1");
        p.add(distLabel, "cell 0 2");
        p.add(fuelLabel, "cell 1 5");
        p.add(mpgLabel, "cell 1 9");
        p.add(jComboBox1, "cell 1 2");
        p.add(fuelText, "cell 1 7");
        p.add(jComboBox2, "cell 1 7");
        p.add(actTime, "cell 0 7");
        p.add(distText, "cell 1 5");
        p.add(mpgText, "cell 1 9");

        jComboBox1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent event) {
                //JComboBox jComboBox1 = (JComboBox)event.getSource();
                JComboBox jComboBox1 = (JComboBox) event.getSource();
                if (jComboBox1.getSelectedItem() == "bowling") {
                    labelPic1.setIcon(imgIcons[0]);
                }
                if (jComboBox1.getSelectedItem() == "lacrosse") {
                    labelPic1.setIcon(imgIcons[1]);
                }
                if (jComboBox1.getSelectedItem() == "wrestling") {
                    labelPic1.setIcon(imgIcons[2]);
                }
                if (jComboBox1.getSelectedItem() == "painting") {
                    labelPic1.setIcon(imgIcons[3]);
                }
                if (jComboBox1.getSelectedItem() == "archery") {
                    labelPic1.setIcon(imgIcons[4]);
                }
            }
        });

        calcButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent event) {

                if (isNumeric(distText.getText()) && isNumeric(fuelText.getText())) {
                    double fuel;
                    double dist;
                    double result;
                    fuel = Double.parseDouble(fuelText.getText());
                    dist = Double.parseDouble(distText.getText());
                    result = dist / fuel;
                    mpgText.setText(String.format("%f", result));
                } else {
                    JOptionPane.showMessageDialog(null, "Enter distance traveled and fuel used");
                }
            }
        });
        setTitle("Calorie Calculator");
        pack();
        setLocationRelativeTo(null);
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    }

    private static boolean isNumeric(String text) {
        try {
            Double.parseDouble(text);
        } catch (Exception e) {
            return false;
        }
        return true;
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            // "javax.swing.plaf.metal.MetalLookAndFeel");
                            // "com.sun.java.swing.plaf.motif.MotifLookAndFeel");
                            UIManager.getCrossPlatformLookAndFeelClassName());
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
                new calorie().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:55:03.977

> 我是否会做一个 if else 声明，“如果选择了射箭并且重量文本框中有一个数字？” 然后使用这个公式？

是的。

我还没有阅读您的所有代码，但是您想通过添加对更新文本框方法的调用`updateTextBox();`和 remove来执行类似的操作`JComboBox jComboBox1 = (JComboBox) event.getSource();`。

编辑，以下代码已更新：

```
public void actionPerformed(ActionEvent event)
{
    updateTextBox();
} 
```

以下是您可以更改和更新文本框的方法：

```
public void updateTextBox()
{
    if (jComboBox1.getSelectedIndex() == 0) //bowling
    {
        labelPic1.setIcon(imgIcons[0]);
        //Update textbox here to show results for item 0
    }
    else if (jComboBox1.getSelectedIndex() == 1) //lacrosse
    {
        labelPic1.setIcon(imgIcons[1]);
        //Update textbox here to show results for item 1
    }
} 
```

要完成这项工作，您需要将“jComboBox1”设为静态。所以在你的拳头课上方添加这一行`static JComboBox jComboBox1 = null`

然后更换`JComboBox jComboBox1 = new ComboBox(actStrings);`

有了这个`jComboBox1 = new JComboBox(actStrings);`，因为我们之前已经创建了组合框`static JComboBox jComboBox1 = null`

# windows - 使用 CALL 命令的 FOR 循环中出现意外的 Windows 批处理脚本行为

> ID：12905445
> 
> 赞同：1
> 
> 时间：2012-10-15T23:29:13.707
> 
> 标签：windows, batch-file

在我正在处理的批处理脚本中，在调用 2 个子例程后没有保留变量值，其中一个来自批处理脚本的 FOR 循环。这是一个演示场景的代码片段：

```
set ERRORCODE=0
FOR ... do (
    call :myRoutine

    @ECHO %ERRORCODE%        // Here I am expecting the ERRORCODE to be a 1 (non-zero), but I am seeing that it is getting reset to 0
)

myRoutine:
call :another
IF %ERRORCODE% NEQ 0 GOTO :EOF  // Here I am getting the ERRORCODE as 1 as expected
...
GOTO :EOF

another:
something went wrong here..
IF %ERRORLEVEL% NEQ 0 (
    set ERRORCODE=1
    GOTO :EOF
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:48:40.107

ERRORCODE 保留得很好-您只是没有正确访问它。

您的问题是`%ERRORCODE%`在解析该行时扩展，并且在执行 FOR 循环之前一次解析整个带括号的代码块。因此，您会看到执行循环之前存在的值。

解决方案是使用延迟扩展，`!ERRORCODE!`，这需要`setlocal enableDelayedExpansion`. 执行该行时会发生延迟扩展。键入`HELP SET`或`SET /?`从命令行获取有关延迟扩展的更多信息。

```
set ERRORCODE=0
setlocal enableDelayedExpansion
FOR ... do (
  call :myRoutine
  echo !ERRORCODE!
)

... etc. 
```

# iphone - 如何清除缓存的 UITableViewCells

> ID：12905448
> 
> 赞同：0
> 
> 时间：2012-10-15T23:29:26.937
> 
> 标签：iphone, ios, uitableview

因此，我一直在为我的 iOS 应用程序实施自动化测试，但遇到了一个奇怪的问题。

使用我正在使用的测试框架（Frank），它会尝试根据可访问性标签来触摸视图/按钮/所有内容。这很好用，除了 with`UITableViews`因为它们缓存和重用的方式`UITableViewCells`。如果我从表格中“删除”一个单元格，表格缓存系统会将单元格翻转为隐藏。但是它仍然会在那里等待被重用，我的框架仍然可以看到它，这会导致问题。

那么，**问题**：如何强制 UITableView 释放所有已删除/缓存的单元格，以便它们不再是 View 层次结构的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:06:04.380

这个技巧可能会有所帮助：

```
while([tableView dequeueReusableCellWithIdentifier:cellId]!=nil); 
```

当然，它需要手动重复它`cellId`。
请注意，缓存的单元格不是视图层次结构的一部分。

另一种选择。如果`UITableViewController`当前不可见，则调用`didReceiveMemoryWarning`方法会释放其所有`UITableViewCell`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:19:10.170

在方法`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`中，使用这个：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]` 
```

然后检查您的单元格是否为零。如果是，则分配单元的新实例。

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    [cell setDelegate:self];
} 
```

# android - 在 Eclipse 项目中使用 ant 运行单元测试

> ID：12905452
> 
> 赞同：0
> 
> 时间：2012-10-15T23:29:59.917
> 
> 标签：android, eclipse, unit-testing, ant

好的，所以我现在花了 3 天时间梳理网络，试图弄清楚如何从命令行为我的 Eclipse 项目运行一些单元测试。

我可以通过“Run As”->“Android JUnit Test”在 Eclipse 中运行测试

我现在想要的是能够通过命令行运行测试。而已。

我似乎找不到任何不是在 2010 年编写的指南，但尽管如此，我仍然尝试遵循它们，我已经安装了 ant 并在我的项目中创建了一个 build.xml 文件，我从中复制粘贴了指引。因为我只能猜测构建文件中发生了什么（以前从未使用过 ant），所以当问题出现时，我几乎是 SOL。

目前，当我尝试运行它时，它说“包 android.app 不存在”（我正在使用 Activity 类），对于我包含在项目的“/libs”文件夹中的库 jar 文件也是如此。

似乎很清楚，我在某处缺少某种路径声明，但我尝试的任何方法似乎都不起作用。

编辑（添加代码）：这是 MockTester.java -

```
package com.android.mocksdktester;

import static org.junit.Assert.*;
import android.app.Activity;    
import android.test.AndroidTestCase;

import com.mock.android.lib.*;

public class MockTester extends AndroidTestCase
{
    Activity mActivity;
    MockFeature mFeature;

    public MockTester()
    {   
    }

    public void testExists()
    {
        String test = null;
        assertNull(test);
    }
} 
```

如您所见，并没有发生很多事情。这是我得到的 build.xml 文件，正如我所提到的，我只能猜测它在做什么。

```
<?xml version="1.0"?>
<!-- to save as "build.xml" -->
<project name="Mock Unit Tests" default="run" basedir=".">
    <path id="junit_classpath"> 
        <pathelement location="C:\eclipse\plugins\org.junit_4.8.2.v4_8_2_v20110321-1705\junit.jar"/>
    </path>

    <!-- Library Project Here -->
    <fileset dir="libs" includes="*.jar"/>

    <!-- build all classes in this directory -->
    <!-- To run this: use "ant build" -->
    <!-- need to include junit.jar in the classpath -->
    <target name="build">   
        <javac srcdir="${basedir}"/>
        <echo message="Build done" />
    </target>

    <!-- Test and build all files  -->
    <!-- To run this: use "ant" (default) or "ant run" -->
    <target name="run" depends="build">
        <java taskname="Test" classname="MockTester" fork="true" failonerror="true" />
        <echo message="Unit Tests done" />
    </target>

    <!-- delete all class files -->
    <!-- To run this: use "ant clean" -->
    <target name="clean">
        <delete>
            <fileset dir="${basedir}" includes="*.class" />
        </delete>
        <echo message="clean done" />
    </target>

</project> 
```

它抱怨过去没有看到junit，但我设法解决了这个问题。我只是不确定当它缺少与 Android 相关的类以及项目中包含的 jar 文件时该怎么办（尽管我已经读过这是一个错误）。

错误：

```
build:
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\build.xml:16: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 3 source files
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:14:error: package android.app does not exist
[javac] import android.app.Activity;
[javac]                   ^
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:15:error: package android.test does not exist
[javac] import android.test.AndroidTestCase;
[javac]                    ^
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:18:error: package com.mock.android.lib does not exist
[javac] import com.mock.android.lib.*;
[javac] ^
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:20:error: cannot find symbol
[javac] public class MockTester extends AndroidTestCase
[javac]                                  ^
[javac]   symbol: class AndroidTestCase
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:22:error: cannot find symbol
[javac]     Activity mActivity;
[javac]     ^
[javac]   symbol:   class Activity
[javac]   location: class MockTester
[javac] C:\<my workspace>\mock\mock_sdk_android\trunk\source\MockSDKTest\src\com\android\mocksdktester\MockTester.java:23:error: cannot find symbol
[javac]     MockFeature mFeature;
[javac]     ^
[javac]   symbol:   class MockFeature
[javac]   location: class MockTester
[javac] 6 errors

BUILD FAILED 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:28:31.117

没有解释你做了什么或什么失败了？你的项目是如何组织的？

Ant 使用该[`<junit>`](http://ant.apache.org/manual/Tasks/junit.html)任务来执行您的 JUnit 测试。您必须确保您的类路径中有 JUnit jar `<junit>`。

通常，这是一个两步过程：

*   编译你的单元测试。
*   运行`<junit>`以执行您的测试。这`formatter`将指定您希望如何格式化测试。您可以创建一个 XML 输出，然后对其运行 XSLT 转换。

当您运行`<junit>`测试时，您使用任务的`<test>`或`<batchtest>`子`<junit>`任务来实际运行测试，然后使用`<formatter>`格式化您的测试以获得可读的输出。

我不是在构建 Android 应用程序，但这是我的 Junit 测试示例：

```
<property name="target.dir"   value="${basedir}/target"/>
<property name="main.destdir" value="${target.dir}/classes"/>
<property name="test.srcdir"  value="${basedir}/src/test/java"/>
<property name="test.destdir" value="${target.dir}/test-classes"/>

<!-- Path for all jars required for compiling your actual source -->
<path id="main.classpath">
     <fileset dir="${basedir}/lib"/>
<path>

<!-- Includes JUnit.jar and the main.classpath jars too -->
<path id="test.classpath">
     <fileset dir="${basedir}/test-lib"/>
     <fileset dir="${basedir}/lib"/>
</path>
<mkdir dir="${test.destdir}"/>

<!-- Compile tests -->
<javac destdir="${test.destdir}"
    fork="false"/>
    <src path="${test.srcdir}"/>
    <classpath refid="test.classpath"/>
    <classpath refid="${main.destdir}"/> 
```

```
<!-- Execute all classfiles you've compiled in test-classes directory -->
<junit fork="true"
    maxmemory="128m"
    includeAntRuntime="true">
    <classpath>
        <pathelement path="${main.destdir}"/>
        <pathelement path="${test.destdir}"/>
    </classpath>
    <classpath refid="test.classpath"/>
    <formatter type="plain"/>
    <batchtest
        todir="${junit.batchtest.todir}">
        <fileset dir="${test.destdir}"/>
    </batchtest>
</junit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:06:18.940

谢谢你的帮助大卫。实际上，我决定放弃尝试使用 ant，因为我真正想做的是通过命令行运行单元测试，这可以使用`am instrument`adb shell 中的命令来完成（我通过查看 android dev docs agian 找到了）。

所以，我不确定我在这里做的是否正确，因为虽然我找到了我真正想要的答案，但这并不是我提出的问题的答案，即如何通过命令运行测试*通过蚂蚁*线。

我的特定命令如下所示：`adb shell am instrument -w com.android.mocksdktester.test/andro id.test.InstrumentationTestRunner`

在我开始工作之前，我遇到了一些问题。

1.  在测试开始之前，您需要确保在您的模拟器/设备上安装了您正在测试的应用程序*和*测试应用程序。

2.  我从命令行按照[http://developer.android.com/tools/testing/testing_otheride.html](http://developer.android.com/tools/testing/testing_otheride.html)创建了测试项目，然后将项目导入到 Eclipse 中。我看到包名与我尝试测试的应用程序的包名相同，我认为这是错误的，所以我将其更改为其他名称，结果它坏了。所以，不要那样做：P（除非你知道如何改变它而不破坏它）。

3.  我试图跑步的时间最长`adb shell am instrument -w com.android.mocksdktester/andro id.test.InstrumentationTestRunner`。我没有`.test`在包名称的末尾，而且据我所知，没有迹象表明我需要它。文档说`"The Android package name of the test package."`这是`com.android.mocksdktester`. 我想将其添加`.test`到末尾的唯一原因是因为我`adb shell pm list instrumentation`从另一个问题中找到了该命令，我认为该命令列出了当前在您的模拟器/设备上的所有仪器包，并且列表中的一项是

    > 仪器：com.android.mocksdktester.test/android.test.InstrumentationTestRunner（目标=com.android.mocksdktester）。

# java - Android SharedPreferences 示例

> ID：12905456
> 
> 赞同：3
> 
> 时间：2012-10-15T23:30:50.063
> 
> 标签：java, android, sharedpreferences

我正在尝试学习 SharedPreferences，但出现错误。

我的布局有一个按钮可以对方法做出反应`doThis`

这是我的Java：

```
package com.example.sharedprefs;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    public void doThis (View view){
        i++;
        SharedPreferences sharedPref = getSharedPreferences("FileName",MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = sharedPref.edit();
        prefEditor.putInt("userChoice",i);
        prefEditor.commit();
        int number = sharedPref.getInt("userChoice", 0);
        Toast.makeText(getApplicationContext(), number, Toast.LENGTH_LONG).show();
    }

} 
```

我只能在 logcat 中查明的是`10-15 19:28:17.707: E/AndroidRuntime(16657): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x1`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T23:34:07.727

你的吐司不正确。您正在将一个数字传递给 toast，希望它会给出一个字符串，而不是认为它应该查找一个字符串资源值。尝试：

```
Toast.makeText(getContext(), number + "" , Toast.LENGTH_LONG).show(); 
```

编辑，除此之外，您的代码很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:52:59.680

您不能为 Toast 消息创建整数类型。

你只能把 String 类型的 message 参数放到 Toast.makeText 方法中。

至于解决方案，你可以试试这些

```
Toast.makeText(getApplicationContext(), Integer.toString(number), Toast.LENGTH_LONG).show();

Toast.makeText(getApplicationContext(), ""+number, Toast.LENGTH_LONG).show(); 
```

是的，您的共享偏好使用非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T08:53:36.653

这里的问题是您使用整数值作为 Toast 字符串。您必须执行以下操作。

```
String.valueOf(number); 
```

或者

```
Integer.toString(number); 
```

您的 sharedpreferences 部分没问题。但有关 SharedPreferences 的更多信息，您可以访问这篇文章。 **[Android SharedPreferences 示例](https://www.simplifiedcoding.net/android-sharedpreferences-example/)**

# ruby - 如果变量在 ruby /erb 中定义，则回显

> ID：12905459
> 
> 赞同：15
> 
> 时间：2012-10-15T23:31:07.787
> 
> 标签：ruby, erb

> **可能重复：**
> [检查变量是否在 Ruby 中定义](https://stackoverflow.com/questions/288715/checking-if-a-variable-is-defined-in-ruby)

使用 Tilt 的模板`render`方法，我传入

```
#... t setup ...
t.render(self, { :a => 'test', :b => 'again' }) 
```

在我的`template.erb`

```
<%= a %>
<%= b %> 
```

假设我`:b`从传递给模板的哈希中删除。渲染将失败，因为`:b`未定义。

在 PHP 中，我可以去：

```
<?= isset($foo) ? $foo : '' ?> 
```

是否有任何干净的方式（在 ruby​​/erb 中）来“回显 if”？

我试过`<%= b.nil? ? b : '' %>`了，但这显然是错误的..任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T23:37:49.487

`defined?`是 ruby​​ 等价于`isset()`.

```
<%= defined?(a) ? a : 'some default' %> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T23:41:15.987

如果您想在`a`未定义的情况下不显示任何内容：

```
<%= a if defined?(a) %> 
```

`a`如果未定义，您还可以在部分开头设置一些默认值。这样，您就可以放心，它`a`不会在您身上崩溃，并且您不必测试它是否在任何地方都定义了。我个人更喜欢这种方式。

注意：如果您在将其传递给模板时设置`a`为`false`，它将`""`在我的示例中重新分配给。

```
<% a ||= "" %>
#Then do some things with it. No crash!
<%= a %>
<%= a*10 %>
<%= "Here's the variable a value: #{a}" %> 
```

# string - 如何访问元胞数组中的字符串？

> ID：12905461
> 
> 赞同：0
> 
> 时间：2012-10-15T23:31:11.813
> 
> 标签：string, matlab, cell, cells

我阅读了有关它的 matlab 帮助，但仍有一些问题-

单元格数组中有字符串-我只想输入字符串的前两个字符，我该怎么做？

```
 'anscell{1,1}= '
 'LThand.jpg'
 'aa1=strcmp('LT',anscell{1:5,1}(1:2));' 
```

因为现在我得到一个错误-

```
 Bad cell reference operation.
  'Error in a (line 5)'
   aa1=strcmp({'LT'},anscell{1:5,1}(1:2)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:08:56.793

`anscell`只有一个元素，其中包含字符串。

因此，你应该写

```
aa1 = strcmp('LT',anscell{1}(1:2)); 
```

仅比较前两个字符的另一种方法是

```
aa1 = strncmp('LT',anscell{1},2); 
```

由于`strncmp`也适用于元胞数组，您甚至可以删除索引，即

```
aa1 = strncmp('LT',anscell,2); 
```

# wso2 - 当我在 AS 中创建新租户时， AS 5.0.0 和 BAM 2.0.0 出现问题

> ID：12905463
> 
> 赞同：0
> 
> 时间：2012-10-15T23:31:27.167
> 
> 标签：wso2, application-server, wso2bam

在 AS 5.0.0 中我创建租户时，如果 BAM 统计捆绑禁用所有工作都很好，我可以登录到租户。但是，如果我激活 BAM 统计包并尝试登录同一个租户，我会在控制台中看到此错误：

```
[2012-10-15 18:17:53,653]  INFO {org.wso2.carbon.core.services.authentication.AuthenticationAdmin} -  'admin@carbon.super [-1234]' logged out at [2012-10-15 18:17:53,0653]
[2012-10-15 18:18:03,306] jorgeio@cdae.uci.cu [2] [Application Server] INFO {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} -  'jorgeio@cdae.uci.cu [2]' logged in at [2012-10-15 18:18:03,306-0400]
[2012-10-15 18:18:03,327]  INFO {org.wso2.carbon.core.multitenancy.TenantAxisConfigurator} -  Creating tenant AxisConfiguration for tenant: cdae.uci.cu[2]
[2012-10-15 18:18:03,450]  WARN {org.wso2.carbon.stratos.landing.page.deployer.LandingPageWebappDeployer} -  Product landing page not found.
[2012-10-15 18:18:03,565] @carbon.super [2] [Application Server]ERROR {org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils} -  Error occurred while running deployment for tenant cdae.uci.cu
java.lang.NullPointerException
        at org.wso2.carbon.bam.service.data.publisher.publish.StreamDefinitionCreatorUtil.getStreamDefinition(StreamDefinitionCreatorUtil.java:30)
        at org.wso2.carbon.bam.service.data.publisher.internal.ServiceStatisticsAxis2ConfigurationContextObserver.setEventingConfigDataSpecificForTenant(ServiceStatisticsAxis2ConfigurationContextObserver.java:76)
        at org.wso2.carbon.bam.service.data.publisher.internal.ServiceStatisticsAxis2ConfigurationContextObserver.createdConfigurationContext(ServiceStatisticsAxis2ConfigurationContextObserver.java:51)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.createTenantConfigurationContext(TenantAxisUtils.java:326)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.getTenantConfigurationContext(TenantAxisUtils.java:121)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.getTenantAxisConfiguration(TenantAxisUtils.java:101)
        at org.wso2.carbon.activation.module.ActivationHandler.invoke(ActivationHandler.java:90)
        at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
        at org.apache.axis2.transport.local.LocalTransportReceiver.processMessage(LocalTransportReceiver.java:169)
        at org.apache.axis2.transport.local.LocalTransportReceiver.processMessage(LocalTransportReceiver.java:82)
        at org.wso2.carbon.core.transports.local.CarbonLocalTransportSender.finalizeSendWithToAddress(CarbonLocalTransportSender.java:45)
        at org.apache.axis2.transport.local.LocalTransportSender.invoke(LocalTransportSender.java:77)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.core.commons.stub.loggeduserinfo.LoggedUserInfoAdminStub.getUserInfo(LoggedUserInfoAdminStub.java:187)
        at org.wso2.carbon.ui.AbstractCarbonUIAuthenticator.setUserAuthorizationInfo(AbstractCarbonUIAuthenticator.java:278)
        at org.wso2.carbon.ui.AbstractCarbonUIAuthenticator.processUserAuthorization(AbstractCarbonUIAuthenticator.java:196)
        at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:198)
        at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:121)
        at org.wso2.carbon.ui.CarbonUILoginUtil.handleLogin(CarbonUILoginUtil.java:331)
        at org.wso2.carbon.ui.CarbonSecuredHttpContext.handleSecurity(CarbonSecuredHttpContext.java:223)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:86)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:179)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:49)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
[2012-10-15 18:18:03,579] @carbon.super [2] [Application Server]ERROR {org.apache.axis2.engine.AxisEngine} -  Failed to determine Activation status.
org.apache.axis2.AxisFault: Failed to determine Activation status.
        at org.wso2.carbon.activation.module.ActivationHandler.invoke(ActivationHandler.java:96)
        at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
        at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
        at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
        at org.apache.axis2.transport.local.LocalTransportReceiver.processMessage(LocalTransportReceiver.java:169)
        at org.apache.axis2.transport.local.LocalTransportReceiver.processMessage(LocalTransportReceiver.java:82)
        at org.wso2.carbon.core.transports.local.CarbonLocalTransportSender.finalizeSendWithToAddress(CarbonLocalTransportSender.java:45)
        at org.apache.axis2.transport.local.LocalTransportSender.invoke(LocalTransportSender.java:77)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
        at org.wso2.carbon.core.commons.stub.loggeduserinfo.LoggedUserInfoAdminStub.getUserInfo(LoggedUserInfoAdminStub.java:187)
        at org.wso2.carbon.ui.AbstractCarbonUIAuthenticator.setUserAuthorizationInfo(AbstractCarbonUIAuthenticator.java:278)
        at org.wso2.carbon.ui.AbstractCarbonUIAuthenticator.processUserAuthorization(AbstractCarbonUIAuthenticator.java:196)
        at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:198)
        at org.wso2.carbon.ui.DefaultCarbonAuthenticator.authenticate(DefaultCarbonAuthenticator.java:121)
        at org.wso2.carbon.ui.CarbonUILoginUtil.handleLogin(CarbonUILoginUtil.java:331)
        at org.wso2.carbon.ui.CarbonSecuredHttpContext.handleSecurity(CarbonSecuredHttpContext.java:223)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:86)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
       at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:58)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:179)
        at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:49)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Cannot create tenant ConfigurationContext for tenant cdae.uci.cu
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.getTenantConfigurationContext(TenantAxisUtils.java:124)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.getTenantAxisConfiguration(TenantAxisUtils.java:101)
        at org.wso2.carbon.activation.module.ActivationHandler.invoke(ActivationHandler.java:90)
        ... 46 more
Caused by: java.lang.Exception: Error occurred while running deployment for tenant
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.createTenantConfigurationContext(TenantAxisUtils.java:335)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.getTenantConfigurationContext(TenantAxisUtils.java:121)
        ... 48 more
Caused by: java.lang.NullPointerException
        at org.wso2.carbon.bam.service.data.publisher.publish.StreamDefinitionCreatorUtil.getStreamDefinition(StreamDefinitionCreatorUtil.java:30)
        at org.wso2.carbon.bam.service.data.publisher.internal.ServiceStatisticsAxis2ConfigurationContextObserver.setEventingConfigDataSpecificForTenant(Se
rviceStatisticsAxis2ConfigurationContextObserver.java:76)
        at org.wso2.carbon.bam.service.data.publisher.internal.ServiceStatisticsAxis2ConfigurationContextObserver.createdConfigurationContext(ServiceStatis
ticsAxis2ConfigurationContextObserver.java:51)
        at org.wso2.carbon.core.multitenancy.utils.TenantAxisUtils.createTenantConfigurationContext(TenantAxisUtils.java:326)
        ... 49 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:04:13.713

我们遇到了这个问题并修复了它。这在[WSO2 AppServer 5.0.1](http://wso2.com/products/application-server/) 版本中可用。

阿米拉。

# sql - 将临时表联合到最终临时表

> ID：12905465
> 
> 赞同：1
> 
> 时间：2012-10-15T23:31:35.310
> 
> 标签：sql, sql-server, union

我在 SQL 服务器中创建了 10 个不同的临时表，我想做的是将它们全部合并到一个最终的临时表中，将它们全部保存在一个表上。所有的表只有一行，看起来非常像下面的两个临时表。

到目前为止，这是我所拥有的，这是两个临时表的示例，因为它们都与此完全相同，然后 #final 是我想要将所有表合并到的表：

```
 create table #lo
      (
         mnbr bigint
      )
      insert into #login (mnbr)
      select distinct (_ID)
      FROM [KDB].[am_LOGS].[dbo].[_LOG] 
      WHERE time >= '2012-7-26 9:00:00

       Select count(*) as countreject
       from #lo

     create table #pffblo
     (
       mber_br
     )
     insert into #pffblo (mber_br)
     select distinct (mber_br)
     from individ ip with (nolock)
     join memb mp with (nolock)
          on( ip.i_id=mp.i_id and mp.p_type=101) 
      where ip.times >= '2012-9-26 11:00:00.000'

     select count(*) as countaccept

    create table #final
    (
        countreject bigint
        , Countacceptbigint
        .....
    )

    insert into #final (Countreject, Countaccept....more rows here...)
    select Countreject, Countaccept, ...more rows selected from temp tables.
    from #final
    union 
    (select * from #lo)
    union
    (select * from #pffblo)
    select *
    from #final

drop table #lo
drop table #pffblo
drop table #final 
```

如果这是将这些临时表中的行合并到最后一个的形式。那么这是显示所有那些因此合并的行的正确方法。当我做这个联合时，我得到联合中的列数需要匹配联合中选择的列数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:01:15.547

我认为您以错误的方式使用工会。当您必须拥有相同结构的数据集并且要将它们放入一个数据集中时，使用联合。

例如：

```
CREATE TABLE #Table1
(
  col1 BIGINT
)

CREATE TABLE #Table2
(
  col1 BIGINT
)

--populate the temporary tables

CREATE TABLE #Final
(
  col1 BIGINT
)

INSERT INTO #Final (col1)
SELECT *
FROM #Table1
UNION
SELECT *
FROM #Table2

drop table #table1
drop table #table2
drop table #Final 
```

我认为您要做的是获取 1 个数据集，其中包含所有表的计数。联盟不会这样做。

最简单的方法（虽然不是很高效）是执行如下选择语句：

```
CREATE TABLE #Table1
(
  col1 BIGINT
)

CREATE TABLE #Table2
(
  col1 BIGINT
)

--populate the temporary tables

CREATE TABLE #Final
(
  col1 BIGINT,
  col2 BIGINT
)

INSERT INTO #Final (col1, col2)
select (SELECT Count(*) FROM #Table1) as a, (SELECT Count(*) FROM #Table2) as b

select * From #Final

drop table #table1
drop table #table2
drop table #Final 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:01:29.797

您似乎想从每个临时表中获取值，然后将其放入单行数据中。这基本上是一个`PIVOT`，你可以使用这样的东西：

```
create table #final
(
   countreject bigint
   , Countaccept bigint
        .....
)

insert into #final (Countreject, Countaccept....more rows here...)
select
from
(
  select count(*) value, 'Countreject' col  -- your UNION ALL's here
  from #lo
  union all
  select count(*) value, 'countaccept' col
  from #pffblo
) x
pivot
(
  max(value)
  for col in ([Countreject], [countaccept])
) p 
```

解释：

您将创建一个与此类似的子查询，其中将包含`COUNT`每个临时表的 。子查询中有两列，一列包含`count(*)`来自表的，另一列是别名的名称：

```
 select count(*) value, 'Countreject' col  
  from #lo
  union all
  select count(*) value, 'countaccept' col
  from #pffblo 
```

然后，您将`PIVOT`这些值插入到您的最终临时表中。

如果您不想使用`PIVOT`，则可以使用`CASE`带有聚合函数的语句：

```
insert into #final (Countreject, Countaccept....more rows here...)
select max(case when col = 'Countreject' then value end) Countreject,
   max(case when col = 'countaccept' then value end) countaccept
from
(
  select count(*) value, 'Countreject' col  -- your UNION ALL's here
  from #lo
  union all
  select count(*) value, 'countaccept' col
  from #pffblo
) x 
```

或者，您可以使用`JOIN`与此类似的所有临时表，在其中`row_number()`为表中的一条记录创建一个，然后将表与`row_number()`：

```
insert into #final (Countreject, Countaccept....more rows here...)
select isnull(lo.Countreject, 0) Countreject, 
       isnull(pffblo.Countaccept, 0) Countaccept
from
(
  select count(*) Countreject, 
    row_number() over(order by (SELECT 0)) rn
  from #lo
) lo
left join
(
  select count(*) Countaccept, 
    row_number() over(order by (SELECT 0)) rn
  from #pffblo
) pffblo
  on lo.rn = pffblo.rn 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T22:38:04.750

```
SELECT * 
INTO #1
FROM TABLE2
UNION
SELECT *
FROM TABLE3
UNION
SELECT *
FROM TABLE4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:44:19.173

如果您想获取结果表中每个临时表的计数，您只需为子查询中的每一列计算它：

插入结果 (col1, col2,... SELECT (SELECT COUNT( *) FROM tbl1) col1 ,(SELECT COUNT(* ) FROM tbl2) col2 ..

# jquery - 关于更改图像的 jQuery 进度条 .attr('src')

> ID：12905468
> 
> 赞同：2
> 
> 时间：2012-10-15T23:31:46.937
> 
> 标签：jquery, progress-bar, jquery-attributes, image-load

我有一个用 HTML 声明的图像：

```
<img src="images/image_01.gif" id="man_img_file" width="400" height="300" alt="image_01" /> 
```

我正在通过 jQuery 更改图像：

```
$('#man_img_file').attr('src', "images/image_02.gif"); 
```

现在我想在图像加载时显示一个百分比进度条（即，当新的 src 图像通过 jQuery 加载时）。如何做到这一点？可以使用 jQuery 进度条来完成吗？

注意：图像已经在服务器中，我可以在加载之前通过 PHP 脚本获取图像大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:09:08.543

您可能无法添加进度条，因为我不知道仅使用 Javascript 来确定已加载多少图像的方法。

但是，您可以使用该`Image`对象并在新图像加载时显示一个旋转的“加载”gif：

```
function LoadNewImage(target, url) {
    var newImage = new Image();

    // some overlay div
    loadingOverlay.show();

    newImage.src = url;

    newImage.onload = function() {
        // image is loaded into browser memory, so will display instantly
        target.attr('src', url);

        // hide the overlay again
        loadingOverlay.hide();
    }
} 
```

以下是一些可能有帮助的链接：

[使用 javascript 预加载图像](http://www.mediacollege.com/internet/javascript/image/preload.html "使用 javascript 预加载图像")

[显示加载覆盖](https://stackoverflow.com/questions/3204107/css-how-to-get-an-animated-gif-background-image-on-top-of-a-div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:32:52.647

感谢[劳伦斯](https://stackoverflow.com/users/890726/laurence)的分享。

1.  使用 jQuery 更改“src”属性时，**无法**动态检查加载的字节数（使用 javascript）。
2.  但是，在加载图像时，可以显示加载消息/图像。（查看上面的劳伦斯答案以获得解决方案）
3.  正如 Laurence 所说，“如果您对 HTML5 和 IE9 以上的任何内容感到满意，您显然可以使用 XHR 来做到这一点：http: [//blogs.adobe.com/webplatform/2012/01/13/html5-image-progress-events /](http://blogs.adobe.com/webplatform/2012/01/13/html5-image-progress-events/)（请参阅此处的示例：http: [//blogs.adobe.com/webplatform/files/XHRProgressSample.html](http://blogs.adobe.com/webplatform/files/XHRProgressSample.html?file=XHRProgressSample.html) ?file=XHRProgressSample.html ）”

# php - PHP：用逗号分隔 MySQL 查询值

> ID：12905472
> 
> 赞同：0
> 
> 时间：2012-10-15T23:32:27.757
> 
> 标签：php, mysql, sql

我有一个这样用 PHP 编写的 MySQL 查询：

```
$merkki = $_GET["merkki"];
// Retrieve all the data from the table 
//to show models based on selection of manufacturer

$result = mysql_query("SELECT * FROM Control_Mallit WHERE merkki_id = $merkki")
or die(mysql_error()); 
echo '{';
while($row = mysql_fetch_array($result)){
    echo '"' . $row['id'] . '"' . ":" . '"' . $row['malli'] . '"';
}
echo '}'; 
```

结果是正确的，但是如何在每条记录后加逗号？如果我在每一行后回显 (,)，我的代码将不起作用。我需要它的格式如下所述。

```
{
    "":"--",
    "series-1":"1 series",
    "series-3":"3 series",
    "series-5":"5 series",
    "series-6":"6 series",
    "series-7":"7 series"
} 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:38:23.263

*立即*停止使用您的代码。它容易受到 SQL 注入的攻击。`merkki`想一想如果 is 的值会发生什么`1 OR 1=1`。该语句将返回所有记录：

```
SELECT * FROM Control_Mallit WHERE merkki_id = 1 OR 1=1 
```

您需要使用`mysqli_`或`PDO`函数将参数绑定到您的查询（`mysql_`函数已[被弃用](http://www.deprecatedphp.com/mysql)。此外，使用列列表而不是`SELECT *`。

这是使用`mysqli_`（未测试）的可能解决方案：

```
<?php
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'world');

/* check connection */
if (!$link) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$array = array();

/* create a prepared statement */
$stmt = mysqli_prepare($link, "SELECT id, malli FROM Control_Mallit WHERE merkki_id = ?");

/* bind parameters for markers */
mysqli_stmt_bind_param($stmt, 'i', $_GET[merkki]);

/* execute query */
$result = mysqli_stmt_execute($stmt);

/* fetch associative array */
while ($row = mysqli_fetch_assoc($result)) {
    $array[] = '"' . $row['id'] . '"' . ":" . '"' . $row['malli'] . '"';
}

/* free result set */
mysqli_free_result($result);

/* close connection */
mysqli_close($link);

echo '{' . implode(',', $array) . '}';

?> 
```

* * *

**编辑**

按照您的原始代码，此解决方案应该可以工作：

```
$merkki = $_GET["merkki"];
$array = array();
// Retrieve all the data from the table to show models based on selection of manufacturer
$result = mysql_query("SELECT * FROM Control_Mallit WHERE merkki_id = $merkki")
or die(mysql_error()); 
while($row = mysql_fetch_array($result)){
    $array[] = '"' . $row['id'] . '"' . ":" . '"' . $row['malli'] . '"';
}
echo '{' . implode(',', $array) . '}'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:36:35.257

我只是把所有东西都放在一个数组中并[`json_encode()`](http://php.net/manual/en/function.json-encode.php)用来输出它，例如

```
$data = array();
while ($row = mysql_fetch_array($result)) {
    $data[$row['id']] = $row['malli'];
}
echo json_encode($data); 
```

这里的小例子 - [http://codepad.viper-7.com/My27XJ](http://codepad.viper-7.com/My27XJ)

此外，您不应该使用已弃用的`mysql`扩展程序。相反，我推荐 PDO，例如

```
$db = new PDO(/* connection details */);
$stmt = $db->prepare('SELECT id, malli FROM Control_Mallit WHERE merkki_id = ?');
$stmt->bindParam(1, $_GET['merkki']);
$stmt->execute();

while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    // and so on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T23:37:41.063

尝试：

```
$merkki = $_GET["merkki"];
$merkki = mysql_real_escape_string($merkki);

// Retrieve all the data from the table to show models based on selection of manufacturer
$result = mysql_query("SELECT * FROM Control_Mallit WHERE merkki_id = $merkki")
or die(mysql_error());
$numRows = mysql_num_rows($result);
$row = 1;
echo '{';
while($row = mysql_fetch_array($result)){
    echo '"' . $row['id'] . '"' . ":" . '"' . $row['malli'] . '"';
    if ($row < $numRows) {
        echo ',';
    }
    $row++;
}
echo '}'; 
```

它只是使用行数来确定它是否应该根据它是否在最后一个结果上来回显逗号。

此外，请务必转义您传递给 mysql 查询的任何输入，否则您很容易受到 SQL 注入的攻击。请参阅有关将来切换到 PDO 或 Mysqli 的信息。

# c++ - 有条件地找出字符串是否是数组的一部分

> ID：12905476
> 
> 赞同：0
> 
> 时间：2012-10-15T23:32:49.043
> 
> 标签：c++, arrays, string, visual-studio-2010, if-statement

这是我正在开发的一个基本的 c++ 控制台应用程序，只是为了在做一些更高级的事情之前进行测试。我想知道如何确定用户输入是否是带有 if 语句的字符串数组的一部分，这是到目前为止的代码...

```
#include <iostream>
#include <string>

using namespace std;

int main(){

    string array[] = {"1","2","3"};

    for(;;){
        cout << "Enter a random number";
        int randNum = 0;
        cin >> randNum;
        if(/* randNum is part of the array */)
        {
            //do something
        }
        else{
            //do something
        }

    }
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:37:31.667

首先，您显然想在阅读后检查您的输入：

```
if (cin >> randNum) {
     ...
} 
```

接下来，我认为您需要对齐类型，即，如果您阅读 an`int`您可能希望您的数组也包含`int`s：

```
int array[] = { 1, 2, 3 }; 
```

如果给出了这些，您可以像这样检查：

```
if (std::end(array) != std::find(std::begin(array), std::end(array), randNum)){
    ...
} 
```

（如果您不使用 C++ 2011，则需要其他方法来获取数组的开始和结束迭代器，但有很多方法，包括定义模板`begin()`和`end()`根据需要）。

如果你真的想检查s`int`数组`std::string`，你需要一个谓词来检查`int`s `std::string`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:41:47.640

您可以使用`std::find`它，但是，您需要先将 randNum 转换为字符串 -

```
std::stringstream ss;
ss << randNum;
std::string to_check = ss.str();

if(std::find(array, array + 3, to_check) != (array + 3)) {
//Logic
} else {
//
} 
```

# sqlite - 如果我有多个线程访问 SQLite 数据库，我应该实施同步解决方案吗？

> ID：12905477
> 
> 赞同：1
> 
> 时间：2012-10-15T23:33:00.603
> 
> 标签：sqlite, core-data, concurrency

假设 CoreData 堆栈配置为使用 Sqlite 作为持久性机制。

据我了解，ManagedObject 和 ManagedObjectContextinstances 都不是线程安全的。PersistentStoreManager 呢，它是线程安全的吗？

换句话说，如果我有多个线程读写同一个持久核心数据存储，我应该实现某种同步解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:53:38.947

与大多数数据库系统一样，SQLite 实现了自己的并发机制来解决线程/用户冲突。所以不，你不需要自己动手。

也就是说，如果您要进行大量写入争用，SQLite 并不理想。SQLite 在写入期间锁定整个数据库，因此您应该尽量减少发生的并发写入量。

更多关于 SQLite 并发的信息可以在这里找到：
[http ://www.sqlite.org/lockingv3.html](http://www.sqlite.org/lockingv3.html)

# c# - 是否可以修改 ASP.NET 捆绑程序以在捆绑文件中包含版本号？

> ID：12905478
> 
> 赞同：3
> 
> 时间：2012-10-15T23:33:03.667
> 
> 标签：c#, .net, asp.net-mvc, .net-4.5

我最近开始使用 scott gu 概述的捆绑和缩小的新 .net 功能 - [http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support -asp-net-4-5-series.aspx](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)在 mvc4 应用程序中。

我有一些问题，或者我不知道如何解决的问题。

首先，我的应用程序安装在具有多个我们服务器的网络场上。捆绑库是否在磁盘上创建文件，如果是，在从服务器 1 请求页面但对捆绑 javascript 文件的请求在 web 2 上的情况下，这将如何工作？

是否可以修改捆绑程序以在捆绑文件中包含版本号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:47:24.393

不，它不会创建文件。但它确实将包添加到输出缓存中，因此不必为每个请求创建一个新包。

关于网络农场，没关系。每个服务器都会生成自己的包并将其存储在自己的缓存中。

Bundling and Minification 已经包含了一个版本号，所以当 bundle 发生变化时，它会突破缓存。这个版本号实际上是缩小包的计算哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:50:14.277

我不知道您是否可以添加增量版本号，但这将生成一个 URL，其中包含查询字符串中捆绑文件的哈希：

```
System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/styles/site") 
```

# java - 这个用红、黄和绿灯绘制红绿灯的代码是如何工作的？

> ID：12905482
> 
> 赞同：1
> 
> 时间：2012-10-15T23:33:15.320
> 
> 标签：java

在我的教科书中，我很难理解这个例子的概念。这个想法是用红、黄和绿灯画一个红绿灯。我有一些问题。我无法弄清楚代码的哪一部分做了什么。

1.  我是否正确假设`cx`并且`cy`要弄清楚页面的中心？
2.  是`fx`和`fy`找出框架的中心？
3.  我不知道它是做什么`dy`的，为什么它被 4 分而不是 3 分给 3 盏灯，这`LAMP_RADIUS`完全让我感到困惑。
4.  在红色，黄色和绿色的所有三个`add(createFilledCircle)`上，我不明白它们的位置是如何在红绿灯框架内计算的。
5.  在`createFilledCircle()`我不明白的方法中`GOval circle = newGOval(x-r, y-r, 2 * r, 2 * r);`。我不明白什么`x-r`和做什么以及`y-r`这与职位有何关系。

```
import acm. graphics.*;
import acm. program.*;
import java.awt.*;

public class DrawStoplight extends GraphicsProgram {

    public void run () {
        double cx = getWidth() / 2;
        double cy = getHeight() / 2; 
        double fx = cx - FRAME_WIDTH / 2; 
        double fy = cy- FRAME_HEIGHT / 2; 
        double dy = FRAME_HEIGHT / 4 + LAMP_RADIUS / 2; 
        GRect frame = new GRect(fx, fy, FRAME_WIDTH, FRAME_HEIGHT);
        frame.setFilled(true);
        frame.setColor(Color.GRAY);
        add(frame);
        add(createFilledCircle(cx, cy - dy, LAMP_RADIUS, Color.RED));
        add(createFilledCircle(cx, cy, LAMP_RADIUS, Color.YELLOW));
        add(createFilledCircle(cx, cy + dy, LAMP_RADIUS, Color.GREEN));
    }

    private GOval createFilledCircle(double x, double y, double r, Color color){
        GOval circle = new GOval(x-r, y-r, 2 * r, 2 * r)
        circle.setColor(color);
        circle.setFilled(true);
        return circle;
    }

    private static final double FRAME_WIDTH = 50; 
    private static final double FRAME_HEIGHT = 100; 
    private static final double LAMP_RADIUS = 10; 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:47:31.090

> 我是否正确假设`cx`并且`cy`要弄清楚页面的中心？

是的

> 是`fx`和`fy`找出框架的中心？

不，它们是左上角坐标

> 我不知道 dy 做了什么，为什么它被 4 分而不是 3 分给 3 个灯，这`LAMP_RADIUS`完全让我感到困惑。

要将三盏灯垂直安装在一个盒子内，您需要一个在中间，一个在 1/4 高度，一个在 3/4 高度 - 因此除以四。我不确定为什么`LAMP_RADIUS`会进入它。这似乎是我通常所说的“软糖因素”，以使灯的间距更宽，即看起来正确的图形，但没有任何好的理由*为什么*它看起来正确......

> 在红色，黄色和绿色的所有三个`add(createFilledCircle)`上，我不明白它们的位置是如何在红绿灯框架内计算的。

它们只是垂直间隔`dy`

> 在`createFilledCircle()`我不明白的方法中`GOval circle = newGOval(x-r, y-r, 2 * r, 2 * r);`。我不明白什么`x-r`和做什么以及`y-r`这与职位有何关系。

将`GOval`一个圆圈放在由`(x - r, y - r)`具有大小的坐标定义的框内`2r`- 即以边长`2r`为中心的正方形`(x, y)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:58:16.953

```
1\. Am I right to assume cx and cy are to figure out the center of the page? 
```

是的

```
2\. Are fx and fy to figure out the center of the frame? 
```

不完全是。他们正在计算框架的左上角。它们从中心开始，并在每个方向上“备份”一半的帧大小。

```
3\. I don't know what dy does and why it's divided by 4 and not 3 for 3 lights and the LAMP_RADIUS totally confuses me. 
```

在代码中往下看。 `dy`是灯之间的垂直距离。黄灯正好在中心绘制，红色在`dy`上面，绿色在`dy`下面。除数是`4`因为作者选择将红灯的底边对齐到距框架顶部1/4框架高度的点。同样，他选择将绿灯的顶部与距底部框架高度 1/4 的点对齐。他本可以选择许多其他的计算方式`dy`。

```
4\. On all three add(createFilledCircle) for red, yellow and green I don't understand how their position is calculated inside the stoplight frame. 
```

它们都具有相同的 x 坐标：框架的中心。y 坐标的计算如 3 中所述。请记住，在屏幕坐标中，正方向是向下的，因此增加 y 会使光线降低。减少使它更高。

```
5\. In the method createFilledCircle() I don't understand GOval circle = newGOval(x-r, y-r, 2 * r, 2 * r);. I don't understand what x-r and y-r does and how that relates to position. 
```

去阅读 newGOval 的手册定义。它在矩形内刻出一个椭圆形。参数是矩形的左上角，后跟宽度和高度。因此，如果 (x,y) 是中心，这将给出一个对角线 (xr, yr) 到 (x+r, y+r) 的框。当您在其中刻一个椭圆时，您会根据需要得到一个以 (x,y) 为中心的圆。

# qr-code - 将 BMP 图像存储在 QR 码中

> ID：12905485
> 
> 赞同：9
> 
> 时间：2012-10-15T23:33:36.267
> 
> 标签：qr-code, bmp, data-storage

我正在尝试创建（或者，如果我在研究中以某种方式错过了它，请找到）一种将 bmp 图像编码/解码为 QR 码格式的算法。我一直在使用指南（[Thonky](http://www.thonky.com/qr-code-tutorial/)）来尝试了解 QR 码的基础知识，但我仍然不确定如何解决这个问题，特别是：

*   我应该将数据编码为二进制还是数字更合理（假设每个像素的最大值为 255）？

*   我搜索了有关 QR 码的结构化附加功能的信息，但除了 QR 码支持这一事实之外，没有找到太多细节——我该如何实现/利用此功能？

而且，当然，如果有任何提示/建议可以更好地将图像存储为二进制数据，我非常愿意接受建议！

谢谢你的时间，

肖恩

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T08:38:57.993

我不确定您能否实现这一目标，因为 QR 码可以保存的信息量非常有限。

首先，您可能希望将图像存储为原始字节，因为其他格式（数字和字母数字）旨在保存文本/数字，并提供更少的空间来存储您的图像。假设您选择最大可能的 QR 码（版本 40），具有最小的纠错级别，最多可容纳 2953 字节的二进制信息[（见此处）](http://en.wikipedia.org/wiki/QR_code#Storage)。

第一个选项，正如您所建议的，您将图像存储为位图。这种格式根本不允许压缩，并且需要（在没有 Alpha 通道的 RGB 图像的情况下）每个像素 3 个字节。如果我们考虑文件头大小（14 到 54 字节），并忽略填充（每行图像数据必须填充为 4 的倍数），那么您可以存储大约 2900/3 = 966像素。如果我们考虑一个正方形图像，这表示一个 31x31 的位图，即使是缩略图图像也很小（例如，本文末尾的我的头像是 32x32 像素）。

第二种选择，您使用 JPEG 对图像进行编码。这种格式的优点是使用可以减小文件大小的压缩算法。这次没有精确的公式来获得适合 2.9kB 的图像大小，但我尝试使用一些方形图像并缩小它们的大小，直到它们适合这个大小，保持良好的 (93) 质量因子：这给出了一个平均值大约 60x60 像素的图像。（在如此小的图像上，通常不会在 jpeg 和 bmp 之间看到令人难以置信的压缩系数，因为 jpeg 文件中的文件头远大于 bmp 文件：大约 500 字节）。这比位图好，但仍然很小。

最后，即使你成功地用这个二维码编码你的图像，你也会遇到另一个问题：这么大的二维码很难成功扫描。事实上，这个二维码的大小为 177x177 模块（“模块”是一个白色或黑色的小方块）。假设您使用提供所谓“高清”帧（1280x720 像素）的智能手机对其进行扫描，则每个模块在帧上的最大尺寸约为 4 像素。如果考虑到相机噪声、锯齿和由于用户在扫描时从未完全空闲而导致的模糊，输入帧的质量将使任何 QR 码解码算法都很难成功获取 QR代码（不要忘记我们在开始时将其纠错级别设置为低！）。

尽管这不是一个好消息，但我希望这对您有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T08:20:31.417

确实有一种方法可以对多个（最多 16 个）QR 码的信息进行编码，使用 QR 码中称为“结构化附加”的特殊标头。您可以使用的最佳信息来源是关于 QR 码的规范 (ISO 18004:2006)；在网络上免费找到它是可能的（但不一定容易）。

该规范的相关部分（第 9 节）说：

“最多可以以结构化格式附加 16 个 QR 码符号。如果一个符号是结构化附加消息的一部分，它由前三个符号字符位置的标题块指示。结构化附加模式指示符 0011 放置在第一个符号字符中的四个最高有效位位置。紧随其后的是两个结构化附加码字，分布在第一个符号字符的四个最低有效位、第二个符号字符和第三个符号字符的四个最高有效位上. 第一个码字是符号序列指示符。第二个码字是奇偶校验数据，并且在消息中的所有符号中都是相同的，从而能够验证读取的所有符号构成同一结构化附加消息的一部分。该标头紧随其后的是从第一个模式指示符开始的符号的数据码字。”

不过，我不确定大多数 QR 码扫描仪是否可以处理这个问题，因为它是一项非常先进的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T12:30:43.820

您可以定义固定的图像大小，减少 jpg 标题部分并仅使用有关它的重要信息，因此您可以保存最多 480 字节的 ~500 字节的普通标题。

我是用这种方法来存储一张小俱乐部身份证的人物照片，大约64x64像素的图像就足够了。

# c# - 不能使用属于与其父 Freezable 不同的线程的 DependencyObject - prism

> ID：12905486
> 
> 赞同：5
> 
> 时间：2012-10-15T23:33:39.600
> 
> 标签：c#, wpf, multithreading, prism, sta

我在开发 WPF 应用程序时遇到了一个问题。该应用程序基于棱镜。应用程序使用 prism 引导程序启动，在加载任何窗口之前，应用程序在不同的线程 (STA) 上打开一个模式对话框，然后加载一堆东西（服务等）。该对话框在此期间打开并允许通知用户应用程序启动过程的进度（使用事件聚合器传递更新）。加载完成后，引导程序关闭对话框并打开主应用程序窗口。 *到目前为止，一切都很好...* 然后在关闭应用程序时，同样的事情正在发生。关闭主窗口，打开一个对话框（再次在新的 STA 线程上），以允许通知。但是现在，当点击 ShowDialog 调用（发生在新的 STA 线程内）时，会引发异常：“不能使用属于与其父 Freezable 不同的线程的 DependencyObject”。经过长时间的调试，我发现异常的原因是窗口的背景，它是从应用程序级别的合并字典中获取的画笔/图像（在 wpf UI 线程上实例化）。如果在没有 ResouceDictionary 的情况下加载图像 - 一切顺利。

* * *

***总结：*** 只有在使用 resourceDictionary 并且仅在第二次调用新的 STA 线程时才会观察到异常，该线程反过来加载 DialogBox 并在调用 ShowDialog 时准确地引发异常 如果您只有一个对话框（例如，在启动时间并且仅在关机过程中出现对话框），则不会发生异常。

* * *

***我的问题是：***这是什么原因？在这种情况下，这个例外到底意味着什么？（我知道通常会有某种 UI 线程更新来自其他线程，但是我不明白为什么这只发生在 dialgo+thread 的第二个实例上）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-13T15:25:23.430

正如您正确提到的，您的背景对象是在主 UI 线程上创建的。您的背景实际上是一个 Brush 对象，而 Brush 是一个 DependencyObject。

创建 DependencyObject 时，它“依赖”于创建它的 STA 线程。所以像其他依赖对象一样，它只能在自己的线程上使用。这意味着 STA 和对旧 COM 对象模型的兼容性。

因此，当您尝试在另一个 STA 线程上使用它时，您会得到一个适当的异常。

PS 我对被定义为资源的图像有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:59:59.197

我有一个类似的问题。我不确定你是如何实现背景的。我可以试着解释一下我的情况，也许你能从中得到一些东西。我创建了自己的基础 Window，我们称它为 MyWindow，它继承自 Window。IE。

```
public class MyWindow : Window
{
} 
```

我想要的是从应用程序资源字典中的动态资源应用背景。

我首先去了这个答案

```
public class MyWindow : Window
    {
        public MyWindow()
        {
            this.SetResourceReference(BackgroundProperty, "MyResourceKey");
        }
    } 
```

现在，当资源是固定颜色时，这对我有用。

```
<SolidColorBrush x:Key="MyResourceKey" Color="White"/> 
```

我发现当我将资源引用设置为系统颜色时，我会遇到您遇到的问题。

```
<SolidColorBrush x:Key="MyResourceKey"  Color="{DynamicResource {x:Static SystemColors.WindowColorKey}}"/> 
```

它会第一次工作，但第二次我会得到父可冻结错误。所以我最初的想法是，哦，这是一个线程问题，我只需要调用调度程序。现在这是我遇到障碍的地方，因为我认为我需要在窗口上调用它。不对。您需要在该资源的依赖对象上调用它。
问题。您没有使用 SetResourceReference 的对象，因为它会查找资源并创建对它的引用。所以我们需要的是实际的依赖对象。要从资源中获取对象，您可以执行此操作。

```
object temp = this.TryFindResource("MyResourceKey"); 
```

现在你有了对象，但这需要是一个依赖对象。我还没有尝试过，但你也许可以做到这一点

```
DependencyObject temp = (DependencyObjet)this.TryFindResource("MyResourceKey"); 
```

现在你有了依赖对象！这就是导致我们与可冻结父级的线程问题的原因。现在我们在这个对象上调用调度程序。我最终得到了这样的东西。这对我有用，但我可能会尝试清理一下。

```
public class MyWindow: Window
    {
        public MyWindow()
        {
            SetResources();                
        }

        private void SetResources()
        {
            DependencyObject dependencyObject;
            object temp;

                temp = this.TryFindResource("MyResourceKey");

                if (temp != null)
                {
                    if (temp is DependencyObject)
                    {
                        dependencyObject = (DependencyObject)temp;
                        if (!dependencyObject.CheckAccess())
                        {
                            dependencyObject.Dispatcher.BeginInvoke(new System.Action(() => { this.SetResources(); }));
                        }
                        else
                        {
                            this.SetValue(BackgroundProperty, temp);                            
                        }
                    }                   
                }
          }                  
    } 
```

现在这只是设置背景属性。我相信这对于一种风格应该是一样的。所以你可以做

```
this.SetValue(StyleProperty, temp) 
```

花了一点时间才弄清楚。但是一旦我得到它的工作，我就很兴奋。看起来我们的资源正在使用的依赖对象遇到了线程问题，因此它是第一次加载而不是第二次加载。第一次它在正确的线程上，但是在某个地方另一个线程被触发了。还想弄清楚这一点。如果有人对此有更好的解决方案，我很乐意看到它。

# c++ - 使用 c++/boost::regex 提取 HTML 文件的特定部分

> ID：12905487
> 
> 赞同：1
> 
> 时间：2012-10-15T23:33:39.517
> 
> 标签：c++, regex, string, boost

我有一系列数千个 HTML 文件，为了运行词频计数器的最终目的，我只对每个文件的特定部分感兴趣。例如，假设以下是其中一个文件的一部分：

```
<!-- Lots of HTML code up here -->
<div class="preview_content clearfix module_panel">
      <div class="textelement   "><div><div><p><em>"Portion of interest"</em></p></div>
</div>
<!-- Lots of HTML code down here --> 
```

我应该如何在 c++ (boost::regex) 中使用正则表达式来提取示例中突出显示的特定文本部分并将其放入单独的字符串中？

我目前有一些代码可以打开 html 文件并将整个内容读入单个字符串，但是当我尝试运行`boost::regex_match`查找特定的 line 开头时`<div class="preview_content clearfix module_panel">`，我没有得到任何匹配。只要是在 c++ 上，我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:40:26.393

> 我应该如何在 c++ (boost::regex) 中使用正则表达式来提取示例中突出显示的特定文本部分并将其放入单独的字符串中？

你没有。

永远不要使用正则表达式来处理 HTML。无论是在带有 Boost.Regex 的 C++ 中，还是在 Perl、Python、JavaScript 中，*任何地方和任何地方*。HTML 不是常规语言；因此，它不能通过正则表达式以任何有意义的方式处理。哦，在极其有限的情况下，你*也许*可以让它提取一些特定的信息。但是一旦这些情况发生变化，你会发现自己无法完成你需要完成的事情。

我建议使用实际的 HTML 解析器，例如[LibXML2](http://www.xmlsoft.org/)（它确实能够读取 HTML4）。但是使用正则表达式来解析 HTML 只是使用了错误的工具来完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:43:53.370

由于我所需要的只是一些非常简单的东西（根据上面的问题），我能够在不使用正则表达式或任何类型的解析的情况下完成它。以下是成功的代码片段：

```
 // Read HTML file into string variable str
    std::ifstream t("/path/inputFile.html");
    std::string str((std::istreambuf_iterator<char>(t)), std::istreambuf_iterator<char>());

    // Find the two "flags" that enclose the content I'm trying to extract
    size_t pos1 = str.find("<div class=\"preview_content clearfix module_panel\">");
    size_t pos2 = str.find("</em></p></div>");

    // Get that content and store into new string
    std::string buf = str.substr(pos1,pos2-pos1); 
```

谢谢你指出我完全走错了路。

# java - 不同设备制造商的传感器实现

> ID：12905491
> 
> 赞同：0
> 
> 时间：2012-10-15T23:34:11.077
> 
> 标签：java, sensors, android-sensors

三星手机运行安卓操作系统，HTC手机运行安卓操作系统（假设三星和HTC手机都有加速度传感器）。

我可以使用相同的 Java 代码来访问来自三星手机上的加速度计传感器的数据，来访问来自摩托罗拉手机上的加速度计的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:32:34.810

当然，您可以（并且应该）使用相同的 API，即[硬件 Android API](http://developer.android.com/reference/android/hardware/package-summary.html)。

# java - 将绝对定位结合到 Java 项目中

> ID：12905493
> 
> 赞同：0
> 
> 时间：2012-10-15T23:34:55.550
> 
> 标签：java, css-position, jlabel

现在我正在做一个石头剪刀布项目。

这很简单，但我是 Java 新手，并且在游戏的一些方面苦苦挣扎。

我的基本游戏一切正常，但我正在尝试添加一个得分系统，它显示在顶角或底角，每次你赢了你的分数都会上升，和电脑一样，我没有不过，真的决定把它们放在哪里。

我使用`JLabel`s 作为数字并且我一直在尝试一些方法，但一些失败的方法仍然存在。

我一直在使用整数到字符串作为标签。我在有人得分时更新数字和定位`JLabel`s 时都遇到了麻烦。

到目前为止，与分数有关的大部分内容都在代码底部附近的 score 方法中，并且大多数评分事物的变量是`yourNum`, `yourScore`, `compScore`, `compNum`.

对于定位问题，我希望使用绝对定位，但我不完全理解如何将它与我的 一起使用`JLabel`，所以如果有人能解释如何在我的情况下使用它，那就太好了。这是我的完整代码。

```
public class main extends JFrame implements ActionListener {

    JButton rock;
    JButton scissors;
    JButton paper;
    JLabel left;
    ImageIcon rock1;
    ImageIcon scissors1;
    ImageIcon scissors2;
    ImageIcon paper2;
    ImageIcon paper1;
    ImageIcon rock2;
    ImageIcon back;
    ImageIcon scissorsb;
    JLabel right;
    String[] RPS = {"Rock", "Paper", "Scissors"};
    Random rand = new Random();
    int num = rand.nextInt(RPS.length);
    int yourChoice = -1;
    JTextField texter;
    JLabel winner;
    Container contentPane = this.getContentPane();
    SpringLayout layout = new SpringLayout();
    String Tie = "Tie";
    String compwins = "Computer wins!";
    String youwin = "You win!";
    int yourNum = 9;
    JLabel yourScore;
    int compNum = 0;
    JLabel compScore;
    Font winnerFont = new Font("Font", Font.PLAIN, 35);

    public main() {
        super("Rock Paper Scissors");
        back = new ImageIcon("image1233450665506.png");
        paper1 = new ImageIcon("paper1.png");
        paper2 = new ImageIcon("paper2.png");
        scissors1 = new ImageIcon("scissors1.png");
        scissors2 = new ImageIcon("scissors2.png");
        rock1 = new ImageIcon("rock1.png");
        rock2 = new ImageIcon("rock2.png");
        JLabel background = new JLabel(back);
        left = new JLabel();
        right = new JLabel();
        winner = new JLabel();
        yourScore = new JLabel();
        compScore = new JLabel();
        right.setVisible(true);
        this.setVisible(true);
        this.setSize(1280, 985);
        winner.setFont(winnerFont);
        winner.setHorizontalAlignment(SwingConstants.CENTER);
        yourScore.setFont(winnerFont);
        compScore.setFont(winnerFont);
        contentPane.setLayout(layout);
        contentPane.add(winner);
        contentPane.add(left);
        contentPane.add(right);
        contentPane.add(yourScore);
        contentPane.add(compScore);
        layout.putConstraint(SpringLayout.NORTH, left, 300, SpringLayout.NORTH, contentPane);
        layout.putConstraint(SpringLayout.NORTH, right, 300, SpringLayout.NORTH, contentPane);
        layout.putConstraint(SpringLayout.EAST, right, 0, SpringLayout.EAST, contentPane);
        rock = new JButton("Rock");
        paper = new JButton("Paper");
        scissors = new JButton("Scissors");
        layout.putConstraint(SpringLayout.WEST, rock, 500, SpringLayout.WEST, contentPane);
        this.add(rock, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, rock, -30, SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, rock, 40, SpringLayout.NORTH, contentPane);
        this.add(paper, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, paper, -30, SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, paper, 200, SpringLayout.NORTH, contentPane);
        this.add(scissors, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, scissors, -30, SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, scissors, 360, SpringLayout.NORTH, contentPane);
        rock.setBackground(Color.GRAY);
        rock.setPreferredSize(new Dimension(140, 50));
        paper.setBackground(Color.WHITE);
        paper.setPreferredSize(new Dimension(140, 50));
        scissors.setBackground(Color.LIGHT_GRAY);
        scissors.setPreferredSize(new Dimension(140, 50));
        rock.repaint();
        scissors.repaint();
        paper.repaint();
        contentPane.add(background);
        this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        rock.doClick();
        paper.doClick();
        scissors.doClick();
        rock.addActionListener(this);
        paper.addActionListener(this);
        scissors.addActionListener(this);

    }

    public static void main(String args[]) {
        main framer = new main();
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        if (arg0.getSource() == rock) {
            left.setIcon(rock1);
            yourChoice = 0;
        } else if (arg0.getSource() == paper) {
            left.setIcon(paper1);
            yourChoice = 1;
        } else if (arg0.getSource() == scissors) {
            left.setIcon(scissors1);
            yourChoice = 2;
        }
        computerMove();
        Score();
    }

    public void Score() {
        layout.putConstraint(SpringLayout.NORTH, winner, 50, SpringLayout.NORTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, winner, 560, SpringLayout.WEST, contentPane);
        layout.putConstraint(SpringLayout.SOUTH, compScore, 100, SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.EAST, compScore, 600, SpringLayout.EAST, contentPane);
        yourScore = new JLabel(Integer.toString(yourNum));
        compScore = new JLabel(Integer.toString(compNum));

        if (num == 0 && yourChoice == 0) {
            winner.setText(Tie);
            winner.repaint();
        } else if (num == 1 && yourChoice == 0) {
            yourNum++;
            yourScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 2 && yourChoice == 0) {
            compNum++;
            compScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 0 && yourChoice == 1) {
            yourNum++;
            yourScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 1 && yourChoice == 1) {
            winner.setText(Tie);
            winner.repaint();
        } else if (num == 2 && yourChoice == 1) {
            compNum++;
            compScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 0 && yourChoice == 2) {
            compNum++;
            compScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 1 && yourChoice == 2) {
            yourNum++;
            yourScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 2 && yourChoice == 2) {
            winner.setText(Tie);
            winner.repaint();
        }
        winner.repaint();
        yourScore.repaint();
        compScore.repaint();
        yourScore.setForeground(Color.RED);
        compScore.setForeground(Color.RED);
        winner.setForeground(Color.RED);
    }

    public void computerMove() {
        num = rand.nextInt(RPS.length);
        if (num == 0) {
            right.setIcon(rock2);
        } else if (num == 1) {
            right.setIcon(paper2);
        } else if (num == 2) {
            right.setIcon(scissors2);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:46:45.207

我会怀着热情避免绝对布局。

您不仅需要监视每个组件的更改以查看它何时可能更改大小，还需要考虑这些更改如何影响其他组件并监视对父容器的更改......甚至不要让我开始了解平台、字体、屏幕分辨率之间的差异......

既然 Swing 已经为您完成了所有这些，为什么还要浪费您的时间...

我会使用复合布局来包含各个感兴趣的区域。

例如，我将所有播放器控件放入面板中，将任何计算机输出放入它自己的面板中，并将乐谱放入自己的面板中。

这将责任分离到每个容器，允许您为每个部分使用不同的布局，而无需花时间尝试让它们通过单个布局对齐。

现在这只是我的看法，您可以做很多其他事情并从许多不同的方式解决问题......

![在此处输入图像描述](../Images/afc729e083c6fbfda578d0a9f1927ca0.png)

```
public class RPS {

    public static void main(String[] args) {
        new RPS();
    }

    public RPS() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new RockPaperScissors());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class RockPaperScissors extends JPanel implements ActionListener {

        public static final String[] NAMES = {"Rock", "Paper", "Scissors"};

        public static final int ROCK = 0;
        public static final int PAPER = 1;
        public static final int SCISSORS = 2;

        private JButton rockButton;
        private JButton paperButton;
        private JButton scissorsButton;
        private JLabel playerChoice;
        private JLabel computerChoice;

        private JLabel playerScore;
        private JLabel computerScore;
        private JLabel winner;

        private int playerScoreValue = 0;
        private int computerScoreValue = 0;

        public RockPaperScissors() {

            JPanel playerPane = new JPanel(new GridBagLayout());
            rockButton = new JButton("Rock");
            rockButton.setActionCommand("rock");
            paperButton = new JButton("Paper");
            paperButton.setActionCommand("paper");
            scissorsButton = new JButton("Scissors");
            scissorsButton.setActionCommand("scissors");

            rockButton.addActionListener(this);
            paperButton.addActionListener(this);
            scissorsButton.addActionListener(this);

            playerPane.setBorder(new TitledBorder("Player"));
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.CENTER;
            playerPane.add(rockButton);
            gbc.gridx++;
            playerPane.add(paperButton);
            gbc.gridx++;
            playerPane.add(scissorsButton);

            playerChoice = new JLabel(" ");
            gbc.gridx = 0;
            gbc.gridy = 1;
//            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.gridwidth = 3;
            gbc.insets = new Insets(12, 12, 12, 12);
            playerPane.add(playerChoice, gbc);

            computerChoice = new JLabel(" ");
            computerChoice.setHorizontalAlignment(JLabel.CENTER);
            JPanel computerPane = new JPanel(new BorderLayout());
            computerPane.setBorder(new TitledBorder("Computer"));
            computerPane.add(computerChoice);

            JPanel competitorsPane = new JPanel(new GridLayout(1, 2));
            competitorsPane.add(playerPane);
            competitorsPane.add(computerPane);

            JPanel scoresPane = new JPanel(new GridLayout(1, 3));
            scoresPane.setBorder(new TitledBorder("Scores"));
            playerScore = new JLabel("0");
            playerScore.setHorizontalAlignment(JLabel.CENTER);
            computerScore = new JLabel("0");
            computerScore.setHorizontalAlignment(JLabel.CENTER);
            winner = new JLabel("");
            winner.setHorizontalAlignment(JLabel.CENTER);
            scoresPane.add(playerScore);
            scoresPane.add(winner);
            scoresPane.add(computerScore);

            setLayout(new BorderLayout());
            add(competitorsPane);
            add(scoresPane, BorderLayout.SOUTH);

        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JButton choice = (JButton) e.getSource();
            playerChoice.setText(choice.getText());

            int playerValue = -1;
            if (playerChoice.getText().equalsIgnoreCase("Rock")) {
                playerValue = 0;
            } else if (playerChoice.getText().equalsIgnoreCase("Paper")) {
                playerValue = 1;
            } else if (playerChoice.getText().equalsIgnoreCase("Scissors")) {
                playerValue = 2;
            }

            int myChoice = (int)Math.round(Math.random() * 2);
            computerChoice.setText(NAMES[myChoice]);

            String whoWon = "Computer wins";
            if (playerValue == myChoice) {
                whoWon = "Draw";
            } else if ((playerValue == ROCK && myChoice != PAPER) ||
                    (playerValue == PAPER && myChoice != SCISSORS) ||
                    (playerValue == SCISSORS && myChoice != ROCK)) {
                whoWon = "Player Wins";
                playerScoreValue++;
            } else {
                computerScoreValue++;
            }

            winner.setText(whoWon);
            playerScore.setText(Integer.toString(playerScoreValue));
            computerScore.setText(Integer.toString(computerScoreValue));

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:43:20.460

首先，我讨厌绝对定位。

如果要使用绝对定位，则必须将父容器的布局设置为 null（可以是 JFrame 或任何您想要的）。

然后你可以添加一个新的 JLabel 并使用 setLocation() 方法定位它。

顺便说一句，我认为您的代码存在一些问题，可能是复制粘贴问题。如果您想发布某些内容并有人阅读，请尝试发布[SSCCE](http://sscce.org)

但我总是建议使用 BoxLayout 之类的东西。请看一下我对图形感兴趣的这个答案：

[组件的定位（如何将几个按钮放置在相同大小的屏幕中心）](https://stackoverflow.com/questions/12835198/positioning-of-components-how-to-place-a-few-buttons-center-screen-same-size/12837118#12837118)

[Jframe 执行时大小不合适，有什么原因吗？](https://stackoverflow.com/questions/12774432/jframe-not-the-right-size-when-its-executed-any-reason-why/12780478#12780478)

# javascript - 从视图中获取模型时出现 HTTP 503 错误

> ID：12905498
> 
> 赞同：1
> 
> 时间：2012-10-15T23:35:26.523
> 
> 标签：javascript, backbone.js, express

我今天尝试获取模型时收到 503 HTTP 错误。

这段代码在 2 天前工作......我认为唯一的区别是我更新了节点及其依赖项。

我`Origin MY_DOMAIN is not allowed by Access-Control-Allow-Origin.`在 GET 请求（使用 Chromium 和 Firefox）上收到一个 503 HTTP 错误。

奇怪的想法是，我可以卷曲相同的网址，服务器处理它并返回响应......

我使服务器尽可能简单，但它仍然无法正常工作，这是代码：

```
var express = require("express");
var app = express();

app.get('/user/:username/:facebook_id/:facebook_token', function(req, res){
    res.header("Access-Control-Allow-Origin", "*");
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
    res.header('Access-Control-Allow-Headers', 'Content-Type');
    console.log('Something is happening.. ');
    res.send({error: 'test'});
});
app.listen(3000); 
```

在客户端，我只是从模型中调用 fetch ......

```
initialize : function() {
    var that = this;
    this.model.fetch({
        success: function(_model){
            console.log('User fetched successfully on initialize');
            that.render();
        },
        error: function(_model, error){
            console.log('User fetched unsuccessfully on initialize');
        }
    }); 
```

GET 请求失败后，我转到错误回调。

有人有想法吗？您认为这可能与 express 节点和骨干网的上次更新有冲突吗？

谢谢 ！

更新：

显然，由于我的 VPN，它不起作用，我现在在中国......它可以解释不允许的错误。我会尽快更新主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:31:16.237

问题来自我的 VPN，从今天开始将 URL 锁定到我自己的服务器，这就是“不允许访问”的原因......

谢谢你的帮助 ！

# xmpp - 不知道如何选择适合我需要的 XMPP 服务器软件

> ID：12905504
> 
> 赞同：1
> 
> 时间：2012-10-15T23:36:47.763
> 
> 标签：xmpp, chat

我正在计划两个设置并希望社区提供一些意见。我需要一些帮助来确定我应该构建的单元的强大程度以及要使用的插件、要使用的 xmpp 服务器软件以及如何配置东西比如集群或连接管理器，以及这样的任务需要什么类型的连接。

项目一：

需要能够处理大约 50,000 多个在线用户，仅用于 IM，没有文件传输或视频。必须能够连接到其他网络，例如 facebook、gtalk、aim、yahoo 等。因此最终产品将是一个不仅允许其自己的 IM 服务，而且允许人们连接到其他网络并能够拥有 50,000+ 的网络在任何给定时间以这种方式使用服务的人。系统还必须提供像 fastpath 这样的 livehelp。

1）我需要多少台服务器才能做到这一点？
2）您将如何构建此服务器（包括 cpu 类型、cpu 数量、ram 数量、ram 速度、硬盘空间等。尽可能详细）
3）您将使用哪种类型的路由器和/或交换机?
3）互联网的速度有多快对此有好处？
4) 对于此设置，您更喜欢哪种操作系统和 XMPP 服务器软件？
5) 你会为这种类型的设置使用什么插件？
6) 如果需要，您将如何设置集群或连接管理器？
7) 如果我要构建这些单元并让它们上线，你会收取多少费用来设置它并每月维护它？
8) 你有兴趣成为我们团队的全职成员吗？并愿意搬迁到纽约？如果是这样想要的薪水？
9) 您想分享的任何其他提示或信息。

项目二：

需要能够处理大约 10,000,000 多个在线用户，用于 IM/语音/视频（如 google 视频群聊），无需文件传输。必须能够连接到其他网络，例如 facebook、gtalk、aim、yahoo 等。因此最终产品将是一个不仅允许其自己的 IM 服务而且允许人们连接到其他网络并能够拥有 10,000,000+ 的网络在任何给定时间以这种方式使用服务的人。系统还必须提供像 fastpath 这样的 livehelp。

1）我需要多少台服务器才能做到这一点？
2）您将如何构建此服务器（包括 cpu 类型、cpu 数量、ram 数量、ram 速度、硬盘空间等。尽可能详细）
3）您将使用哪种类型的路由器和/或交换机?
3）互联网的速度有多快对此有好处？
4) 对于此设置，您更喜欢哪种操作系统和 XMPP 服务器软件？
5) 你会为这种类型的设置使用什么插件？
6) 如果需要，您将如何设置集群或连接管理器？
7) 如果我要构建这些单元并让它们上线，你会收取多少费用来设置它并每月维护它？
8) 你有兴趣成为我们团队的全职成员吗？并愿意搬迁到纽约？如果是这样想要的薪水？
9) 您想分享的任何其他提示或信息。

PS：这个项目的预算从中等到高，但如果我们不需要的话，我们不要建造 20 个 1 万美元的单元来完成这项工作。尽量保持预算可观并尽可能低，以正确完成这项工作。与工作相关的问题是合法的，因为我们可能需要有人在场来处理网络，如果您精通服务器管理，而不仅仅是 xmpp，那就太好了。Web 开发技能也是一个巨大的优势。请将简历发送至 dhf [at] xsms 。我们

# sql - SQL 理解表唯一约束

> ID：12905508
> 
> 赞同：0
> 
> 时间：2012-10-15T23:37:34.317
> 
> 标签：sql, sql-server, tsql

我花了一天时间尝试调试问题，直到现在我才知道问题一直存在。我的表有一个唯一约束，它只强制唯一值作为目录号。但是，我似乎对在这种情况下构成独特性的内容没有很好的理解。我有两个产品编号**MP1156**和**MP1156ZF**。

```
Insert into IDWProductCodes( PRCEAN, PRCGTIN, PRCatalogNumber, PRCIsActive, PRIsReplaced, PrIsREPlacement,PRProductID)
   Select 
      '11232', '23223', 'MP115BP', 1, 0, 0, '267F104C-6BA4-4C7E-A0C1-6615CBB9DA4C'

Insert into IDWProductCodes( PRCEAN, PRCGTIN, PRCatalogNumber, PRCIsActive, PRIsReplaced, PrIsREPlacement,PRProductID)
   Select 
      '11232', '23223', 'MP115', 1, 0, 1, '267F104C-6BA4-4C7E-A0C1-6615CBB9DA4C'

Insert into IDWProductCodes( PRCEAN, PRCGTIN, PRCatalogNumber, PRCIsActive, PRIsReplaced, PrIsREPlacement,PRProductID)
   Select
      '11232', '23223', 'MP15', 1, 1, 1, '267F104C-6BA4-4C7E-A0C1-6615CBB9DA4C' 
```

我收到一个错误：

> 消息 2627，级别 14，状态 1，第 5 行
> 违反 UNIQUE KEY 约束“UK_CNUMUNIQUE”。无法在对象“dbo.IDWProductCodes”中插入重复键。重复键值为 (MP115)。

发生的事情是每次我插入第一个键然后尝试插入第二个键时，SQL 假定它们是相同的并用第二个覆盖第一个键，这是我根本不想要的效果。

我真正想要的是能够在表格中输入不同的字符串（不重复）。我原以为只需要一个独特的约束，但现在我不确定。请问解决这个问题的更好或最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:31:50.687

其他事情正在发生。SQL Server 不会将两个字符串“MP115”和“MP115BP”混淆为相同的值。您已多次被要求编写表格结构的脚本，以便我们可以看到它。您可以使用 SSMS、右键单击表和***Script Table As > CREATE to > Clipboard 来***执行此操作。如果您发布结果，我们可能会提供更多帮助。

然而，这是一个疯狂的猜测。您是否可能在表中有一个计算机列将 PRCatalogNumber 截断为 5 个字符，并且它本身有不同的 UNIQUE INDEX？这将导致您看到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:20:35.440

我认为您误解了正在发生的事情。如果您尝试插入重复项，SQL 唯一约束不会导致覆盖现有行。违反约束的第二次插入将失败。

请显示您用于插入和表结构的代码。看到后，我将修改此答案以解决真正的问题，但是根据您提供的信息，唯一约束不是问题。

另外，请确保您在该表上没有 TRIGGER。这是我能想到的唯一会产生像插入替换现有行这样的不稳定行为的事情。

# java - 没有 XML 的 Android PreferenceActivity

> ID：12905512
> 
> 赞同：2
> 
> 时间：2012-10-15T23:37:45.847
> 
> 标签：java, android

有没有一种方法可以创建 Holo 风格的（非弃用）PreferenceActivity，它是纯 Java 中的标头/片段，而不是 XML？是否可以以编程方式添加和删除标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:45:36.273

> 有没有一种方法可以创建 Holo 风格的（非弃用）PreferenceActivity，它是纯 Java 中的标头/片段，而不是 XML？

您的`onBuildHeaders()`方法大概可以`PreferenceActivity.Header`通过其他方式创建对象。您可能希望创建一个测试项目，该项目通过 XML 处理标头并转储结果`Header`对象的内容以确认您将正确填充您的，因为文档`Header`有点简洁。

> 是否可以以编程方式添加和删除标题？

有一种`invalidateHeaders()`方法`PreferenceActivity`看起来很有希望。通过检查源代码，看起来调用会触发对 的另一个调用`onBuildHeaders()`，您将在其中提供新列表，就像`invalidateOptionsMenu()`触发对 的调用一样`onCreateOptionsMenu()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:34:35.073

您可以在 OnBuildHeaders 中创建/添加自己的 Headers，然后在 onHeaderClick 中检查 id：

```
@Override
public void onBuildHeaders(List<Header> target) {
    //loadHeadersFromResource(R.xml.prefs_sync_plugins, target);

    Header customHeader = new Header();
    customHeader.titleRes= R.string.customHeaderTitle;
    customHeader.id = R.string.customHeaderTitle;
    target.add(customHeader);
}

@Override
public void onHeaderClick(Header header, int position) {
    if (header.id == R.string.customHeaderTitle) {
        // Do something
    }
} 
```

# python - Python 的“in”效率/速度如何？（时间复杂度明智）

> ID：12905513
> 
> 赞同：41
> 
> 时间：2012-10-15T23:37:46.390
> 
> 标签：python, performance, time-complexity, operator-keyword

在Python中，关键字的效率是多少`in`，比如在：

```
a = [1, 2, 3]
if 4 in a:
  ... 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-15T23:39:33.223

列表的复杂性是：

```
O(n) 
```

对于集合，它是：

```
O(1) 
```

[http://wiki.python.org/moin/TimeComplexity](http://wiki.python.org/moin/TimeComplexity)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-15T23:42:08.810

这取决于右手[操作数](http://docs.python.org/reference/expressions.html#in)：

> 运算符`in`和`not in`集合成员的测试。[...] 集合成员资格测试传统上与序列绑定；如果集合是一个序列并且包含与该对象相等的元素，则该对象是该集合的成员。但是，对于许多其他对象类型来说，支持成员资格测试而不是序列是有意义的。特别是，字典（用于键）和集合支持成员资格测试。

类可以实现[特殊方法`__contains__`](http://docs.python.org/reference/datamodel.html#emulating-container-types)来覆盖默认行为（迭代序列），因此可以提供比比较容器的每个元素更（或更低）有效的方法来测试成员资格。

> 成员资格测试运算符 (`in`和`not in`) 通常实现为通过序列的迭代。但是，容器对象可以提供以下具有更有效实现的特殊方法，这也不需要对象是序列。

* * *

由于您的示例中有一个列表，因此会对其进行迭代并比较每个元素，直到找到匹配项或列表已用尽。时间复杂度通常为`O(n)`.

# jquery - jQuery 单击对话框外部关闭对话框

> ID：12905516
> 
> 赞同：0
> 
> 时间：2012-10-15T23:38:00.103
> 
> 标签：jquery, dialog

我是 jQuery 的新手，我尽力将一个函数放在一起，单击时会打开一个对话框消息，然后再次单击将其关闭。我想要的是能够在对话框外部（屏幕上的任何位置）单击以关闭该对话框。如何在我编写的设置中完成此操作？另外，我目前所做的代码是否正确，或者我可以用另一种更简单的方法来做吗？

**编辑（2012 年 10 月 17 日）：**

我已经更新了下面的 jQuery 以包含 Ryan Wheale 的部分代码，这是当前状态：

-“clickoutside”适用于当前打开的跨度

-尝试打开另一个跨度会关闭当前跨度并随后关闭新跨度

jQuery：[http ://www.eclipsisna.com/?ena=services](http://www.eclipsisna.com/?ena=services)

```
 $(".service_outline a, .service_title a, .service_price a").click(function() {
            $(this).closest("a").children("span").fadeToggle("fast", function() {
                $("span").not(this).fadeOut("fast");
            });
            $(this).one("clickoutside", function () {
                $("span").fadeOut("fast");
            });
        }); 
```

HTML：

```
 <td class="service_outline">
            <h11><a>Opti-<br><h12>Coat</h12><span><font color="#ffcc00">&bull;</font> Application of permanent, nano ceramic clear resin coating (replaces "Wax"/"Sealant")<br><font color="#ffcc00">&bull;</font> Extended durability for 2+ years<br><font color="#ffcc00">&bull;</font> $250<p><center><img src="images/opti-coat.png"></center></span></a></h11>
    </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:48:25.927

如果您使用的是 Ben Allman[在此处找到](http://benalman.com/projects/jquery-outside-events-plugin/)`clickoutside`的插件，那么您的生活很简单：

[http://jsfiddle.net/ryanwheale/c89Vr/](http://jsfiddle.net/ryanwheale/c89Vr/)

```
var $links = $(".service_outline a, .service_title a, .service_price a"),
    $dialogs = $links.find( 'span' );

$links.on( 'click', showDialog );

/* -- EDIT: old code kept for historical purposes
$dialogs.on( 'clickoutside', hideDialogs );
*/

function showDialog (ev) {
    var $thisDialog = $(this).find( 'span' );

    /* -- EDIT: old code kept here for historical purposes
    $dialogs.not( $thisDialog ).fadeOut();
    */

    if(!$thisDialog.is(':visible')) {
        $thisDialog.fadeIn();

        /* -- EDIT: New code */
        setTimeout( function() {
            // IMPORTANT: touch events only supported when you use the 
            // modified plugin at the bottom of this example
            $thisDialog.one('clickoutside.closeDialog, touchstartoutside.closeDialog', function() {
                $thisDialog.unbind('.closeDialog').fadeOut();
            });
        }, 0);
    }
}

/* -- EDIT: old code kept here for historical purposes
function hideDialogs() {
    $dialogs.fadeOut();
}
*/

/*
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/

 * IMPORTANT: Modified to support touch events
 */
(function($,c,b){$.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup touchstart touchmove touchend".split(" "),function(d){a(d)});a("focusin","focus"+b);a("focusout","blur"+b);$.addOutsideEvent=a;function a(g,e){e=e||g+b;var d=$(),h=g+"."+e+"-special-event";$.event.special[e]={setup:function(){d=d.add(this);if(d.length===1){$(c).bind(h,f)}},teardown:function(){d=d.not(this);if(d.length===0){$(c).unbind(h)}},add:function(i){var j=i.handler;i.handler=function(l,k){l.target=k;j.apply(this,arguments)}}};function f(i){$(d).each(function(){var j=$(this);if(this!==i.target&&!j.has(i.target).length){j.triggerHandler(e,[i.target])}})}}})(jQuery,document,"outside"); 
```

# xamarin.ios - MonoTouch - 如何从自定义 UIActionSheet 将值传递回我的控制器？

> ID：12905518
> 
> 赞同：1
> 
> 时间：2012-10-15T23:38:06.377
> 
> 标签：xamarin.ios, uiactionsheet, uitableview

我有一个带有 UITableView 的 UIViewController。我已经实现了一个 UITableViewDelegate 并覆盖了 RowSelected 事件以使用 UIPickerView 显示自定义 ActionSheet，即如果用户选择一行，ActionSheet 将显示该行的选项列表。

我要做的是......当用户关闭自定义 ActionSheet（通过按下完成按钮）时，ActionSheet 被关闭，并且所选项目的值被传递回 UIViewController 以进行显示。

我有点不确定处理这个问题的最佳方法。我希望有人可能有一些指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:34:44.873

我认为您应该子类化`UIActionSheet`并订阅`Dismissed`并为用户选择的值设置一个属性。（您还可以做其他工作，例如从子类中填写操作表）

然后，您的控制器可以订阅`Dismissed`并读取您的新属性。

# ios - 在 iOS 6 中不推荐使用 sizeFromBannerContentSizeIdentifier，替代方案？

> ID：12905519
> 
> 赞同：5
> 
> 时间：2012-10-15T23:38:08.720
> 
> 标签：ios

有谁知道`sizeFromBannerContentSizeIdentifier`在 iOS 6 中不推荐使用的新方法来代替 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:24:32.663

没有其他方法。您可以使用*frame*属性，它还为您提供广告视图大小。

```
CGSize adSize = adView.frame.size; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T20:20:42.150

您可以使用该`bounds`属性 -

```
CGSize myBannerSize = myBanner.bounds.size; 
```

Apple 没有替换`sizeFromBannerContextSizeIdentifier`- 您需要使用`bounds`.

# spring - 提交选择框时的Spring mvc绑定异常

> ID：12905521
> 
> 赞同：0
> 
> 时间：2012-10-15T23:38:15.563
> 
> 标签：spring, spring-mvc

我有一个具有国家、州和城市下拉框的 JSP。城市默认填充，然后州和城市将基于使用 ajax 选择的国家和州。

```
 <form:select path="ContactInfoVO[0].countryList" multiple="single" id="country">       
<form:option value="-1" label="-- Select Country--"></form:option>                      
<c:forEach var="country" items="${ManagerVO.ContactInfoVO[0].countryList}" varStatus="item">
<form:option value="${country.countryId}" label="${country.countryName}"/></c:forEach> </form:select>   

<form:select path="ContactInfoVO[0].stateList" multiple="single" id="state" class="small">      
<form:option value="-1" label="-- Select State--"></form:option>                        
<c:forEach var="state" items="${ManagerVO.ContactInfoVO[0].stateList}" varStatus="item">
<form:option value="${state.stateId}" label="${state.stateName}"/></c:forEach></form:select>    

<form:select path="ContactInfoVO[0].cityList" multiple="single" id="city" class="validate[required] small">     
<form:option value="-1" label="-- Select City--"></form:option>                     
<c:forEach var="city" items="${ManagerVO.ContactInfoVO[0].cityList}" varStatus="item">
<form:option value="${city.cityId}" label="${city.cityName}"/></c:forEach></form:select> 
```

当我提交此表格时，我收到错误 -

```
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 3 errors
    Field error in object 'ManagerVO' on field 'ContactInfoVO[0].cityList': rejected value [80930]; codes [typeMismatch.ManagerVO.ContactInfoVO[0].cityList,typeMismatch.ManagerVO.ContactInfoVO.cityList,typeMismatch.ContactInfoVO[0].cityList,typeMismatch.ContactInfoVO.cityList,typeMismatch.cityList,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [ManagerVO.ContactInfoVO[0].cityList,ContactInfoVO[0].cityList]; arguments []; default message [ContactInfoVO[0].cityList]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.List' for property 'ContactInfoVO[0].cityList'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [com.admin.command.CityVO] for property 'cityList[0]': no matching editors or conversion strategy found]
    Field error in object 'ManagerVO' on field 'ContactInfoVO[0].countryList': rejected value [31]; codes [typeMismatch.ManagerVO.ContactInfoVO[0].countryList,typeMismatch.ManagerVO.ContactInfoVO.countryList,typeMismatch.ContactInfoVO[0].countryList,typeMismatch.ContactInfoVO.countryList,typeMismatch.countryList,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [ManagerVO.ContactInfoVO[0].countryList,ContactInfoVO[0].countryList]; arguments []; default message [ContactInfoVO[0].countryList]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.List' for property 'ContactInfoVO[0].countryList'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [com.admin.command.CountryVO] for property 'countryList[0]': no matching editors or conversion strategy found]
    Field error in object 'ManagerVO' on field 'ContactInfoVO[0].stateList': rejected value [601]; codes [typeMismatch.ManagerVO.ContactInfoVO[0].stateList,typeMismatch.ManagerVO.ContactInfoVO.stateList,typeMismatch.ContactInfoVO[0].stateList,typeMismatch.ContactInfoVO.stateList,typeMismatch.stateList,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [ManagerVO.ContactInfoVO[0].stateList,ContactInfoVO[0].stateList]; arguments []; default message [ContactInfoVO[0].stateList]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.List' for property 'ContactInfoVO[0].stateList'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [com.admin.command.StateVO] for property 'stateList[0]': no matching editors or conversion strategy found] 
```

有人可以告诉我如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:49:00.203

输出中存在错误：您正在尝试设置具有值类型的域类`ContactInfoVO[0].cityList`字段。`List``String`

如果没有看到您的域类的代码等，很难知道您的页面打算做什么。如果您尝试使用用户确定的单个值填充数据库，那么通常使用来自不同表（或类/枚举）的值填充选择下拉列表，然后将用户选择的单个值设置为自己的值类/表。看起来你正试图用同一个班级做这两件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:16:55.927

我看到您正在尝试将 countryId 设置（例如）为 ContactInfoVO[0].countryList。所以你正在将一个整数设置为一个列表。

我认为问题出在这里：

```
 <form:select path="ContactInfoVO[0].countryList" multiple="single" id="country"> 
```

我认为`countryList`那里没有任何意义。在这种情况下，它应该`ContactInfo[0].countryId`与您选择的匹配`"${country.countryId}"`

如果您发布 ContractInfoVO 类和您的标签会更清楚。

# ios - 将 Facebook Docset 与 Xcode 集成

> ID：12905523
> 
> 赞同：2
> 
> 时间：2012-10-15T23:38:17.750
> 
> 标签：ios, xcode, facebook, appledoc

所以我下载了最新的 3.1 Facebook iOS sdk，并在脚本下找到了我运行的 build_documentation.sh。它完成并生成了一个 com.facebook.Facebook-SDK-3_0-for-iOS.docset 文件。我试图让它与 XCode 很好地集成。我知道苹果文档可以创建显示在快速帮助面板中的文档。我自己的自定义文档效果很好。

有谁知道我必须做些什么才能获得与 Facebook 相同的文档集成？

* * *

[编辑：我尝试根据此处](http://markthomas.info/blog/?p=189)的说明将文档集添加到相应的文件夹 并重新启动 Xcode，但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:44:04.377

如果您从包中安装 SDK，则不必自己生成文档集。

*   转到[https://developers.facebook.com/ios](https://developers.facebook.com/ios)
*   单击下载 SDK 按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:43:58.607

您可以使用以下内容获取 Facebook**文档**：

*   使用提供的 shell 脚本构建 Facebook 文档
*   将 .docset 移动到 /Library/Developer/Shared/Documentation/DocSets

**如果它不起作用，您可能需要检查是否将文档集移动到*~/Library/Developer/Shared/Documentation/DocSets*。这有时是错误的**

为什么直接从 .pkg 安装 Facebook 框架会起作用？
**它将它移动到 /Library/...，而不是 ~/Library/...**

# emacs - 保存块执行历史

> ID：12905525
> 
> 赞同：2
> 
> 时间：2012-10-15T23:39:06.063
> 
> 标签：emacs, org-mode, org-babel

有没有办法保存 Babel 代码块的执行历史？基本上我想记录块、时间戳和文件名。

也许如果它不存在，有人知道我可以破解的类似功能吗？基本上我需要一种方法来获取当前选择、时间戳和文件名，以及一种将其附加到文本文件的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:58:40.633

在这里你可以做什么：

*   *建议*一个函数`org-babel-execute-src-block`
*   将结果放入缓冲区，在我的示例中为“babel-log”

您还可以将结果写入日志文件。

```
(require 'time-stamp)

(defadvice org-babel-execute-src-block (after log-org-babel-execute-src-block activate)
  (org-narrow-to-block)
  (let ((file (buffer-file-name)) (src-block (buffer-substring-no-properties (point-min) (point-max))))
    (with-current-buffer "babel-log"
      (insert (concat "file:" file " time:" (time-stamp-string) " block\n" src-block "\n\n")))
    )
  (widen)
  ) 
```

# excel - 如何将变量的多次迭代保存到 Excel

> ID：12905528
> 
> 赞同：1
> 
> 时间：2012-10-15T23:39:46.623
> 
> 标签：excel, matlab, for-loop, iteration

我有一些简单的东西，如下所示，我在其中调用脚本进行 5 次迭代。

```
for n=i:5
(call script)
end 
```

如何将一个变量输出保存到 Excel。假设每次迭代的变量 A 都会发生变化：

```
A=5

A=2.7

A=6 
```

. .

这可以在一列中保存到 Excel 中吗？

我应该使用： xlswrite('output.xlsx',A,..... 有一些范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:51:16.200

最好是做这样的事情：

```
for i=1:5
    % (call script)
    A(i) = i; % Or to the obtained value
end
xlswrite('my_xls.xls',A); 
```

如果要保存更多值，则可以执行以下操作：

```
for i=1:5
    % (call script)
    A(i) = i; % Or to the obtained value
    B(i) = i; % Or to the obtained value
end
M = vertcat(A(:)',B(:)');
xlswrite('my_xls.xls',M); 
```

xls 文件是在您的 Matlab 的当前目录中创建的。希望这可以帮助，

# php - PHP：PNG tinitng（1 色）

> ID：12905529
> 
> 赞同：2
> 
> 时间：2012-10-15T23:39:54.370
> 
> 标签：php, png, transparency, tint

在开始之前，我只想说明我是一个 PHP 菜鸟。我想要做的是将PNG图像着色为一种颜色。所以所有透明像素都将保持透明，所有不透明像素都将是该颜色。我已经在许多网站上搜索了这个答案，但由于某种原因我找不到我想要的。

这是我基于发现的不同示例的第一次尝试：

```
<?php
header('Content-Type: image/png');

$color = $_GET['color'];
$im = imagecreatefrompng($_GET['img']);
$width = imagesx($im);
$height = imagesy($im);
$imn = imagecreatetruecolor($width, $height);
imagealphablending($imn,false);
$col=imagecolorallocatealpha($imn,255,255,255,127);
imagesavealpha($imn,true);
imagefilledrectangle($imn,0,0,$width,$height,$col);
imagealphablending($imn,true);
imagecopy($imn, $im, 0, 0, 0, 0, $width, $height);
imagefilter($imn, IMG_FILTER_GRAYSCALE);

if ($color[0] == '#')
$color = substr($color, 1);

if (strlen($color) == 6)
$r = $color[0].$color[1];
$g = $color[2].$color[3];
$b = $color[4].$color[5];

$r = hexdec($r); 
$g = hexdec($g); 
$b = hexdec($b);

imagefilter($imn, IMG_FILTER_COLORIZE, $r, $g, $b);

imagepng($imn);
imagedestroy($imn);

?> 
```

基本上可以在这里看到我想要的一个完美的例子。唯一的变化是，我希望将其转换为用户指定的颜色，而不是黑色。 [将不透明像素转换为黑色](https://stackoverflow.com/questions/3426059/convert-non-transparent-pixels-to-black)

谢谢你

================================ 10/17/2012 更新

所以根据 xception 的回答，这里是我用来执行他的脚本的代码：

```
<?php

$source = "test.png";
$temp = "temp.png";
$color = "red";
$final = "FINAL.png";

exec("convert $source -alpha extract -threshold 0 -negate -transparent white $temp");
exec("convert $temp -fill $color -opaque black $final");
?> 
```

它工作，但是有一个小问题。如下图所示，边缘呈锯齿状。关于如何平滑图像使其看起来和之前的屏幕截图一样漂亮的任何想法？

前：

![前](../Images/221411f10dae11505055eb3a2d45c7e0.png)

后：

![后](../Images/718219d558686c9e471e1cfe180ca0c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:59:04.290

基于您指向的链接的两步示例：

```
convert <source> -alpha extract -threshold 0 -negate -transparent white <tmp>
convert <tmp> -fill red -opaque black <destination> 
```

replace `<source>`, `<tmp>`,`<destination>`用适当的文件名，用`red`你想要的颜色替换。

**编辑**：问题作者找到的较短版本：

```
exec("convert $source -threshold 100% +level-colors '#00FF00', $final"); 
```

# java - Java：存储哈希图的理想文件格式？

> ID：12905532
> 
> 赞同：1
> 
> 时间：2012-10-15T23:40:13.847
> 
> 标签：java, file, hashmap

我需要将哈希图的数组列表保存到外部文件中。我可以对文本文件使用任何格式，因为程序设置为忽略文本文件（特别是任何带有`.txt`扩展名的文件）。哈希图非常简单，只是带有这些单词计数的单词。存储它的理想文件格式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T23:43:01.523

你可以使用[`java.util.Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html).

```
Properties properties = new Properties();
properties.putAll(yourMap); // You could also just use Properties in first place.

try (OutputStream output = new FileOutputStream("/foo.properties")) {
    properties.store(output, null);
} 
```

您可以稍后阅读

```
Properties properties = new Properties();

try (InputStream input = new FileInputStream("/foo.properties")) {
    properties.load(input);
}

// ... (Properties implements Map, you could just treat it like a Map) 
```

### 也可以看看：

*   [Java 教程 - 基本类 - 属性](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:52:49.073

您可以使用序列化：

```
 ObjectOutputStream stream = null;
    try
    {
        File f = new File(filename);
        stream = new ObjectOutputStream(new FileOutputStream(f));
        stream.writeObject(your_arraylist);
    }
    catch (IOException e)
    {
        // Handle error
    }
    finally
    {
        if (stream != null)
        {
            try
            {
                stream.close();
            }
            catch (Exception e) {}
        }
    } 
```

并在使用中阅读：

```
 ObjectInputStream stream = null;
    try
    {
        stream = new ObjectInputStream(new FileInputStream(f));
        your_arrayList = (your_arrayList type here)stream.readObject();
    }
    catch (Throwable t)
    {
        // Handle error
    }
    finally
    {
        if (stream != null)
        {
            try
            {
                stream.close();
            }
            catch (Exception e) {}
        }
    } 
```

# linux - 在 Linux 中将阻塞（没有 O_NONBLOCK）文件描述符用于选择/轮询是否合适？

> ID：12905537
> 
> 赞同：3
> 
> 时间：2012-10-15T23:40:30.430
> 
> 标签：linux, file-descriptor, select-syscall

```
man select 
```

> 错误
> 
> 在 Linux 下，select() 可能会将套接字文件描述符报告为“准备好读取”，但随后会出现读取块。例如，当数据到达但检查时校验和错误并被丢弃时，可能会发生这种情况。可能存在文件描述符被虚假报告为就绪的其他情况。因此，
> 在不应阻塞的套接字上使用 O_NONBLOCK 可能更安全。

但是我看到`netcat`，，`socat`（`wget`但不是`curl`）将没有 O_NONBLOCK 的 FD 用于选择或轮询。

我已经实现了一个[特殊的库](https://github.com/vi/libselectfuzz)来测试应用程序，但它们失败了......

/* 灵感来自于看到一个来自陈旧套接字的挂起`wget`并且`read`没有像它应该的那样超时 */

我应该将此报告为错误还是他们做得对？

可能的答案：

1.  “不，在 poll/select => bug 中阻塞 FD”；
2.  “只有 AF_INET[6] 套接字在选择时可能会失火，因此只有在阻塞网络套接字处于轮询/选择中时才会出现错误”；
3.  “是的，仅当/当您因此而看到实际失败时才报告错误”（例如在 wget 中）。

# node.js - 如何从我的模板目录的根目录中包含/扩展一个玉文件？

> ID：12905538
> 
> 赞同：6
> 
> 时间：2012-10-15T23:40:35.157
> 
> 标签：node.js, express, pug

给定一个样本结构：

```
/layout.jade
/really/deep/dir/inside/my/template/folder/example.jade 
```

有什么方法可以在 example.jade 中扩展 layout.jade 而不必跟踪父目录的数量？

这按预期工作：

```
extends ../../../..etc../../../layout 
```

但最好执行以下操作：

```
extends /layout 
```

甚至是别名/硬链接，并像这样使用它：

```
extends layout 
```

还假设有人知道一个解决方案，它也可以应用于包含吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T00:53:08.750

在[这个特定的提交](https://github.com/jadejs/jade/commit/d740ba7cec7b30ce7519e107467cfa0b87ffcdaa)中引入了一个更改。

基本上，如果在 include 语句中找到的第一个字符是正斜杠并且定义了 basedir，它将在该路径中查找模板。

您必须首先设置 Jade：

```
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');
app.locals.basedir = app.get('views'); 
```

然后，从任何模板，无论嵌套多深，您都可以：

```
include /layout 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:17:40.713

在查看了代码本身之后，我意识到有人不能简单地引用与模板根相关的玉文件。

然而，一个简单的方法是修补jade/lib/parser.js 替换两个实例：

```
, dir = dirname(this.filename); 
```

和：

```
, dir = path.indexOf('/') ? dirname(this.filename) : this.options.settings.views; 
```

我不妨警告您，这没有经过足够的测试，并且不适合生产使用。

# c++ - 捕获 _this_ 的 lambda 中的函数名称解析

> ID：12905539
> 
> 赞同：3
> 
> 时间：2012-10-15T23:41:01.787
> 
> 标签：c++, visual-studio-2010, lambda, c++11, visual-studio-2012

我正在查看以下代码：

```
#include <iostream>

void f()
{
    std::cout << "Called ::f()" << std::endl;
}

struct S
{
    void f()
    {
        std::cout << "Called S::f()" << std::endl;
    }

    void oops()
    {
        [this](){ f(); }(); // calls the wrong function
    }
};

int main()
{
    S().oops();
    return 0;
} 
```

( [http://ideone.com/w7nyb](http://ideone.com/w7nyb) )

VS2010 调用`::f()`但 GCC & VS2012 调用`S::f()`。对我来说，VS2012 似乎是正确的。

根据标准应该调用哪个函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:49:45.100

`S::f()`应该调用。C++11 §5.1.2/7 状态：

> *lambda-expression*的*复合语句*产生函数调用运算符的函数*体*，但出于名称查找的目的，确定引用非静态类成员的*id 表达式*`this`的类型和值并将其转换为类成员访问表达式使用，在*lambda-expression*的上下文中考虑*复合语句*。*`(*this)`*

 ***这里的重要部分是“出于名称查找的目的，......*复合语句在**lambda-expression*的上下文中被考虑。” 由于在 lambda 块中没有`f`本地声明，因此查找它就像直接从`oops`. 因此，找到了成员函数。

* * *

请注意，最新版本的 Visual C++ 和 gcc 都具有正确的行为（包括 Visual C++ 2012 和 gcc 4.7.2）。旧版本可能会表现出不正确的行为，因为 lambda 规范在 2009 年下半年进行了大修（请参阅[n2927：C++0x Lambdas 的新措辞](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2927.pdf)[PDF]）。请记住，在 C++11 最终确定之前，规范是一个移动的目标，旧的编译器可能会实现规范的不同版本。即使是现在，许多实施者仍在努力赶上最终规范。***

# android - Android 特定的 RSS 提要阅读器问题

> ID：12905541
> 
> 赞同：0
> 
> 时间：2012-10-15T23:41:05.233
> 
> 标签：android, rss, rss-reader

我正在尝试使用此提要地址运行我在网上找到的教程：http: [//feeds.feedburner.com/TheTechnologyEdge](http://feeds.feedburner.com/TheTechnologyEdge)

当使用其他 RSS 提要时，我能够很好地运行该程序，但我特别需要上面列出的提要。我确信解决方案相对简单，但我似乎无法弄清楚为什么这个地址不起作用而其他地址不起作用。下面是我正在使用的代码。

```
public class SolsticeRSSReaderActivity extends ListActivity 
```

{

```
@SuppressWarnings("rawtypes")
private List headlines;

@SuppressWarnings("rawtypes")
private List links;

/** Called when the activity is first created. */
@SuppressWarnings(
{ "unchecked", "rawtypes" })
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    headlines = new ArrayList();
    links = new ArrayList();

    try
    {
        URL url = new URL("http://feeds2.feedburner.com/TheTechnologyEdge");

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(false);
        XmlPullParser xpp = factory.newPullParser();

        // We will get the XML from an input stream
        xpp.setInput(getInputStream(url), "UTF_8");

        /*
         * We will parse the XML content looking for the "<title>" tag which
         * appears inside the "<item>" tag. However, we should take in
         * consideration that the rss feed name also is enclosed in a
         * "<title>" tag. As we know, every feed begins with these lines:
         * "<channel><title>Feed_Name</title>...." so we should skip the
         * "<title>" tag which is a child of "<channel>" tag, and take in
         * consideration only "<title>" tag which is a child of "<item>"
         * 
         * In order to achieve this, we will make use of a boolean variable.
         */
        boolean insideItem = false;

        // Returns the type of current event: START_TAG, END_TAG, etc..
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT)
        {
            if (eventType == XmlPullParser.START_TAG)
            {

                if (xpp.getName().equalsIgnoreCase("item"))
                {
                    insideItem = true;
                }
                else if (xpp.getName().equalsIgnoreCase("title"))
                {
                    if (insideItem)
                        headlines.add(xpp.nextText()); // extract the
                                                        // headline
                }
                else if (xpp.getName().equalsIgnoreCase("link"))
                {
                    if (insideItem)
                        links.add(xpp.nextText()); // extract the link of
                                                    // article
                }
            }
            else if (eventType == XmlPullParser.END_TAG
                    && xpp.getName().equalsIgnoreCase("item"))
            {
                insideItem = false;
            }

            eventType = xpp.next(); // move to next element
        }

    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (XmlPullParserException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    // Binding data
    ArrayAdapter adapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, headlines);

    setListAdapter(adapter);

}

/*
 * take as an argument the feed url, and returns the input stream
 */
public InputStream getInputStream(URL url)
{
    try
    {
        return url.openConnection().getInputStream();
    }
    catch (IOException e)
    {
        return null;
    }
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id)
{
    Uri uri = Uri.parse(links.get(position) + "");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent);
} 
```

}

在我修复了 Atom 问题后，当我尝试实现我的监听器时，我收到了这个错误。我在调试中对其进行了一些跟踪，似乎我的 uri 变量为空，并且不包含 html，就像我将其用作 RSS 提要时那样。

```
10-15 20:10:32.445: E/AndroidRuntime(17621): FATAL EXCEPTION: main
10-15 20:10:32.445: E/AndroidRuntime(17621): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat= }
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1536)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1388)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.Activity.startActivityForResult(Activity.java:3195)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.Activity.startActivity(Activity.java:3302)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at bmjohns.solstice.SolsticeRSSReaderActivity.onListItemClick(SolsticeRSSReaderActivity.java:142)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.widget.AbsListView.performItemClick(AbsListView.java:1366)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2995)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.widget.AbsListView$1.run(AbsListView.java:3790)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.os.Handler.handleCallback(Handler.java:605)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.os.Looper.loop(Looper.java:137)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at java.lang.reflect.Method.invoke(Method.java:511)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-15 20:10:32.445: E/AndroidRuntime(17621):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:55:39.587

此 URL 使用 Atom，而不是 RSS。文章开始/结束于

```
entry 
```

不是

```
item 
```

# xcode - 如何本地化具有相同名称的图像？

> ID：12905543
> 
> 赞同：2
> 
> 时间：2012-10-15T23:41:12.840
> 
> 标签：xcode, localization, uiimageview, uiimage

我本地化了一张名为“background.png”的图片。我可以看到有两个名称相同但语言不同的图像。如何加载图像？和以前一样吗？

```
backgroundImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]]; 
```

好像不行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:48:08.077

假设您已将图像放在其中一个 lproj 文件夹中，则无需更改代码。操作系统将为用户的语言设置选择正确的语言设置。

您可以让 Xcode 将图像移动到 lproj 文件夹中，方法是在项目导航器中选择它，显示文件检查器，然后单击“本地化”按钮。

有关详细信息，请参阅[图像、声音和视频资源](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW1)。

# c# - C# 使用 Socket.Connected 会破坏 SslStream 吗？

> ID：12905544
> 
> 赞同：0
> 
> 时间：2012-10-15T23:41:13.283
> 
> 标签：c#, sockets, sslstream

我想知道是否使用 Socket.Connected 来确定套接字是否仍然连接会破坏 SslStream。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:43:31.550

`Socket.IsBound`不检查是否`Socket`已连接。它检查 a`Socket`是否绑定到本地端口号。所以不行。你可能在其他地方做错了什么。

支持[文件](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.isbound.aspx)

检查 Socket 是否已连接使用[Socket.Connected](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.connected.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:21:24.107

不，它不应该，因为它实际上并没有对套接字做任何事情。您是否想弄清楚另一端的服务器是否仍然存在？如果是这样，您可能需要设置某种类型的 ping，因为此属性不会告诉您连接是否意外中断（例如程序崩溃、网络中断等）。

来自 MSDN：

> Connected 属性获取 Socket 在最后一次 I/O 操作时的连接状态。当它返回 false 时，Socket 要么从未连接，要么不再连接。
> 
> Connected 属性的值反映了最近一次操作时的连接状态。如果您需要确定连接的当前状态，请进行非阻塞、零字节的发送调用。如果调用成功返回或抛出 WAEWOULDBLOCK 错误代码（10035），则套接字仍处于连接状态；否则，套接字不再连接。
> 
> 如果在用户数据报协议 (UDP) 套接字上调用 Connect，则 Connected 属性始终返回 true；但是，此操作不会改变 UDP 固有的无连接性质。

# c# - 找不到类型或命名空间 [...]（没有重载的目标框架）

> ID：12905548
> 
> 赞同：0
> 
> 时间：2012-10-15T23:41:25.413
> 
> 标签：c#, xna, visual-c#-express-2010

> 找不到类型或命名空间名称“Highscores2”（您是否缺少 using 指令或程序集引用？）

我在这里看到了几个具有类似“找不到类型或命名空间”问题的线程，但唯一的根本原因是确保“缺失”命名空间也针对同一个框架。

在我的特殊情况下，所有项目的属性中都没有设置“目标框架”（甚至灰显），所以这似乎不是问题。

“使用 Highscores2;” 拼写正确（从命名空间声明复制/粘贴）并且构建顺序似乎是正确的。

此外，Highscores2 项目本身构建良好，在项目附带的演示解决方案中，该解决方案实际上构建得很好。

还有哪些其他类型的东西（我缺少）会导致“找不到类型或命名空间”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:54:35.263

您可以将它作为解决方案中的一个项目，但如果您尝试从另一个项目访问它，则必须有一个引用。您可以打开目标项目的属性并检查“参考”选项卡，您应该会看到一个添加按钮。

如果有帮助，这里是 MSDN 页面：msdn.microsoft.com/en-us/library/f3st0d45(v=vs.100).aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:20:14.607

我以前在多个项目中遇到过这个问题。当我添加对第二个项目的引用时，在本例中是引用 HighScore2.dll 的那个，它被指向 dll 的 /release 构建。但是，在 Debug /release 中未构建，因此找不到它。这可能是一个远景，但如果是这种情况，您可以使用记事本打开 csproj 并编辑程序集的路径以在路径中使用 $(Configuration) 以指向正确的构建配置。

# panel - ADF：面板拆分器和命令工具栏按钮

> ID：12905551
> 
> 赞同：0
> 
> 时间：2012-10-15T23:41:38.097
> 
> 标签：panel, toolbar, oracle-adf, splitter

我创建了 ADF 应用程序，该应用程序具有使用面板拆分器和命令工具栏按钮的页面。1.如何在ADF页面中使面板分割器宽度固定且不能移动？从目前开始，我可以使用鼠标移动拆分器并调整大小。

2.如何禁用命令工具栏按钮或点击后改变颜色？我喜欢这样做的原因是让用户知道当前正在查看哪个页面。例如：我有导航栏（使用命令工具栏按钮） -HOME -REGISTRATION -VIEW PROJECT 如果我选择 REGISTRATION 按钮，它将显示注册页面。REGISTRATION 按钮将禁用或更改颜色，直到选择了其他按钮。

谁能帮忙？急需这个东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:49:26.147

Q1) 将拆分器的 disabled 属性设置为 true

```
<af:panelSplitter id="ps1" disabled="true" ... /> 
```

Q2）如何在页面上放置信息，以便用户可以阅读他在哪个页面上。为此，如果必须将另一个页面添加到应用程序中，您无需更改任何内容。如果您真的喜欢使用按钮样式来实现它，您可以将页面流范围内的属性设置为最后点击的按钮 id，然后您将工具栏中每个按钮的 disabled 属性设置为类似 EL

```
disabled="#{pageFlowScope.lastButtonClicked eq 'ctb1'}" 
```

其中 ctb1 是按钮的 ID。在按钮 ctb1 上添加一个

```
<af:setActionListener from="#{'cbt1'}" to ="#{pageFlowScope.lastbuttonClicked}"/> 
```

然后您可能需要添加一些部分触发器才能看到结果。

编辑：

您可以使用相同的技术来切换按钮的背景颜色等。为此，您可以在每个按钮的 inlineStyle 属性上使用 EL，例如：

```
inlineStyle="#{pageFlowScope.lastButtonClicked eq 'ctb1'?'background-color:Aqua;' :''}" 
```

然后最后点击的按钮应该带有 Aqua 背景颜色。

更新：

```
#{(sessionScope.teamPage eq 'MGRV')?'background-color:rgb(99,206,255); color:red; font-weight:bolder;':'background-color:transparent;'} 
```

# php - 如何使用 php 将音频文件从 Flash 应用程序保存到服务器？

> ID：12905557
> 
> 赞同：2
> 
> 时间：2012-10-15T23:42:56.620
> 
> 标签：php, flash, audio-recording

我的问题是保存我的 Flash 应用程序在用户完成录制您的声音时生成的音频文件 (.wav)。

为此，我使用以下链接：[http ://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/](http://active.tutsplus.com/tutorials/actionscript/create-a-useful-audio-recorder-app-in-actionscript-3/)

但这只会为客户端保存音频。我需要更改它以保存在服务器上。

部分代码是（在 MAIN.AS 中）：

```
private function recordComplete(e:Event):void{
    fileReference.save(recorder.output, "recording.wav");
} 
```

第一个参数（recorder.output）是我的文件，第二个参数是我的文件名。

我为此更改了此方法：

```
private function recordComplete(e:Event):void{
  var urlReq:URLRequest = new URLRequest("extract_voice.php");
  urlReq.method = URLRequestMethod.POST;
  urlReq.contentType = "application/octet-stream";
  //var urlVars = new URLVariables();
  //urlVars.fileAudio = recorder.output;
  urlReq.data = recorder.output;
  //var loader:URLLoader = new URLLoader(urlReq);
  //loader.dataFormat = URLLoaderDataFormat.VARIABLES;
  loader.load(urlReq);
} 
```

我的 extract_voice.php 是：

```
$recorder = file_get_contents('php://input');
$name = basename($recorder);
$status = move_uploaded_file($recorder, 'http://localhost/recording/audiofiles/' . $name);
if($status){
  echo 'WORK';
} 
```

但是当停止录制时，总是向我显示将文件保存在我的机器上的弹出窗口。（客户端）。但不在服务器中。

谁能告诉我我需要做什么？或者是否存在任何其他解决方案？（就像 RED5 一样，但这对我不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:57:13.330

> $recorder = file_get_contents('php://input');

`$recorder`变量保存从 php 输入获取的二进制数据，而不是上传的文件。代替

```
$name = basename($recorder);
$status = move_uploaded_file($recorder, 'http://localhost/recording/audiofiles/' . $name); 
```

利用：

```
$name = md5($recorder).'.wav';
$status = file_put_contents('recording/audiofiles/'.$name, $recorder); 
```

请注意，该文件的路径必须对 Web 服务器是可写的，并且它必须是本地路径，而不是某个网址。

# python - 未加载 Mysql 驱动程序未加载驱动程序

> ID：12905559
> 
> 赞同：0
> 
> 时间：2012-10-15T23:43:02.287
> 
> 标签：python, mysql, pyqt4, pyside

MySQL之前运行良好，但是当我使用PyQt4连接它时，它提示未加载驱动程序未加载驱动程序

如何解决这个问题？

# c# - 单独项目中的 MVC 解决方案中的 Web API

> ID：12905566
> 
> 赞同：89
> 
> 时间：2012-10-15T23:44:02.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在创建一个新的 MVC4 项目，研究使我相信现在通过 Web API 框架而不是控制器操作可以更好地实现从 javascript 到服务器端的通信。我对此的理解正确吗？

我假设我可以在 Web API 和 MVC 控制器之间共享我的所有属性等，所以从表面上看，这对我来说似乎并不是一个巨大的变化。

当我设置应用程序时，我喜欢将组件拆分到项目中。我的计划是有一个 MVC 项目和一个 Web API 项目。但我遇到了问题。例如，我最终得到了 2 个应用程序，单独的路由设置等。

所以我的问题是，在 MVC 应用程序中，Web API 框架应该位于同一个项目中，还是应该将 Web API 分离到自己的项目中并解决这些问题？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-10-16T00:20:16.183

不幸的是，你错了——*我假设我可以在 web api 和 mvc 控制器之间共享我的所有属性等，所以从表面上看，这对我来说似乎并不是一个巨大的变化。*

Web API 和 MVC 使用的许多概念，尽管乍一看很相似，但实际上并不兼容。例如，Web API 属性`System.Web.Http.Filters.Filter`和 MVC 属性是`System.Web.Mvc.Filter`- 并且它们是不可互换的。

这同样适用于许多其他概念 - 模型绑定（完全不同的机制）、路由（Web API 使用 HTTPRoutes 而不是路由，即使它们都在相同的底层 RouteTable 上运行）、依赖解析器（不兼容）等等 - 尽管在表面上，在实践中是非常不同的。而且，Web API 没有区域的概念。

最终，如果你想要做的只是拥有一种“新的、时尚的”方式来提供 JSON 内容——在走这条路之前要三思而后行。我当然不建议重构任何现有代码，除非您真的在考虑采用 HTTP 并以 RESTful 方式构建您的应用程序。

这完全取决于您要构建的内容。如果您正在开始一个新项目，并且您只需要提供一些 JSON 来促进您的 Web 应用程序 - 只要您愿意使用一些可能重复的代码（就像我上面提到的东西），Web API 可以很容易地托管在与 ASP.NET MVC 相同的项目。

如果您要为您的在线服务构建适当的 API - 可能由外部客户或各种设备使用 - 例如为您的移动应用程序提供燃料，我只会将 Web API 分离到一个单独的项目中。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-16T04:59:48.210

IMO、安全和部署应该推动您的决定。例如，如果您的 MVC 应用程序使用表单身份验证，但您有兴趣为 API 使用基本身份验证（使用 SSL），那么单独的项目将使您的生活更轻松。如果您想在 www.example.com 托管您的站点，但将您的 API 托管为 api.example.com（相对于 www.example.com/api），单独的项目将使您的生活更轻松。如果您将您的项目和子域相应地分开，并且您打算从您的 MVC 应用程序中利用您自己的 API，您将必须弄清楚如何处理客户端调用您的 API的[同源策略问题。](http://en.wikipedia.org/wiki/Same_origin_policy)对此的常见解决方案是利用[jsonp](https://stackoverflow.com/questions/9421312/jsonp-with-asp-net-web-api)或[CORS](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)（如果可以的话最好）。

更新（2013 年 3 月 26 日）：官方 CORS 支持即将到来：[http ://aspnetwebstack.codeplex.com/wikipage?title=CORS%20support%20for%20ASP.NET%20Web%20API](http://aspnetwebstack.codeplex.com/wikipage?title=CORS%20support%20for%20ASP.NET%20Web%20API)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-12T12:51:01.403

经过一定程度的经验（为应用程序和 mvc 创建 API）。我主要两者都做。

我为来自其他客户端或其他设备（Android/IOS 应用程序）的 api 调用创建了一个单独的项目。原因之一是因为身份验证不同，它是基于令牌的（以保持无状态）。我不想在我的 MVC 应用程序中混合使用它。

对于我的 mvc 应用程序的 javascript/jquery api 调用，我喜欢保持简单，所以我在我的 MVC 应用程序中包含了一个 web api。我不打算对我的 javascript api 调用进行基于令牌的身份验证，因为嘿，它在同一个应用程序中。我可以`[authorize]`在 API 端点上使用属性，当用户未登录时，他将无法获取数据。

此外，当处理购物车并且您希望在会话中存储用户购物车（未登录时）时，如果您通过 javascript 代码添加/删除产品，您也需要在 API 中包含此内容。这肯定会让你的 API 有状态，但也会降低 MVC-API 的复杂性。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-19T09:14:11.640

来自 SimpleInjector（IoC 框架）的 Steven 建议两个独立的项目：[WebAPI 中的 DependencyResolver.SetResolver 和 HttpConfiguration.DependencyResolver 有什么区别](https://stackoverflow.com/questions/15494920/what-is-the-difference-between-dependencyresolver-setresolver-and-httpconfigurat/15495934#15495934)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-10T12:29:24.100

我最近做了几乎相同的事情：我从一个新的 MVC 4 Web 应用程序项目开始，选择 VS2012 中的 Web API 模板。

这将创建一个托管在与 MVC 相同的应用程序中的 Web API。

我想将 ApiControllers 移动到一个单独的类库项目中。这相当容易，但解决方案有点隐藏。

在 MVC 4 项目的 AssemblyInfo.cs 中添加类似的代码行

```
[assembly: PreApplicationStartMethod(typeof(LibraryRegistrator), "Register")] 
```

现在你需要类 LibraryRegistrator （随意命名它）

```
public class LibraryRegistrator
    {
        public static void Register()
        {
            BuildManager.AddReferencedAssembly(Assembly.LoadFrom(HostingEnvironment.MapPath("~/bin/yourown.dll")));
        }
    } 
```

在 MVC 4 项目中还添加了对 Api 库的引用。

现在您可以将 Api 控制器添加到您自己的单独类库 (yourown.dll) 中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-15T23:53:41.117

即使您的项目如此复杂以至于需要两个“前端”，那么我仍然只会考虑将 webapi 拆分为一个单独的项目作为最后的手段。您将遇到部署难题，并且新手很难理解您的解决方案的结构。更不用说路由问题了。

我的目标是将 system.web 命名空间隔离在一个“表示层”中。尽管 webapi 不是*展示*性的，但它仍然是应用程序界面的一部分。只要您将逻辑保留在域中而不是控制器中，就不会遇到太多问题。另外，不要忘记使用区域。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-29T06:19:29.247

除了为 Web.Api 设置单独的 DLL。

只是一个建议：

1.  创建项目
2.  Nugget WebActivatorEx
3.  创建一个要在 app_start 上调用的类方法

    [程序集：WebActivatorEx.PostApplicationStartMethod(typeof(API.AppWebActivator),"Start")]

    [程序集：WebActivatorEx.ApplicationShutdownMethod(typeof(API.AppWebActivator), "Shutdown")]

4.  在 Start 方法中注册一个 web.api 路由

    公共静态无效开始（）{ GlobalConfiguration.Configure（WebApiConfig.Register）；}

5.  将项目引用到 Web 项目。激活启动方法。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-19T08:19:07.090

我试图将 API 控制器拆分为一个新项目。我所做的就是创建一个新的库项目，将控制器移动到名为 API 的文件夹中。然后将库项目的引用添加到MVC项目中。

webAPI 配置保留在 MVC 项目本身中。它工作正常。

# ios - 如何在 Storyboard 中使用 UIScrollView

> ID：12905568
> 
> 赞同：128
> 
> 时间：2012-10-15T23:44:12.627
> 
> 标签：ios, xcode, uiscrollview, uistoryboard

我有一个滚动视图，其内容为 1000 像素高，并且希望能够将其布局以便在情节提要上轻松设计。
我知道它可以以编程方式完成，但我真的希望能够直观地看到它。每次我在视图控制器上放置滚动视图时，它都不会滚动。是否有可能让它像我想要的那样工作，还是我必须在代码中这样做？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-10-15T23:44:12.627

我正在回答我自己的问题，因为我只花了 2 个小时来找到解决方案，而 StackOverflow 允许这种 QA 风格。

从这里开始到结束是如何使它在故事板中工作。

1：转到您的视图控制器并单击`Attribute Inspector`。

2：将Size`Freeform`改为Inferred。

3：转到该故事板上的主视图，而不是您的滚动视图，而是顶级视图。

4：单击`Size Inspector`并将此视图设置为所需的大小。我把身高改成了1000。

现在你会看到你的故事板有你的视图设置，所以你可以看到滚动的整个高度以便于设计。

5：放在滚动视图上并拉伸它，使其占据整个视图。您现在应该有一个大小为 320,1000 的滚动视图位于视图控制器中的视图上。

现在我们需要让它滚动并且需要让它正确显示内容。

6：单击您的滚动视图，然后单击`Identity Inspector`。

7：添加一个类型为 SIZE`User Defined runtime attribute`的 KeyPath`contentSize`并输入您的内容大小。对我来说是 (320, 1000)。

因为我们想在故事板上看到我们的整个滚动视图，所以我们拉伸了它，它有一个 320,1000 的框架，但是为了让它在我们的应用程序中工作，我们需要将框架更改为可见的滚动视图。

8：添加一个带有类型 RECT 和 0,0,320,416的`runtime attribute`KeyPath 。`frame`

现在，当我们运行我们的应用程序时，我们将看到一个可见的滚动视图，其帧数为 0,0,320, 416，并且可以向下滚动到 1000。我们能够按照我们希望它们出现的方式在 Storyboard 中布局我们的子视图和图像等等。然后我们的运行时属性确保正确显示它。所有这一切都无需 1 行代码。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-09-16T05:26:41.067

以下是**`Auto Layout`**在 XCode 8.2.1 上对我有用的步骤。

1.  选择`Size Inspector`，`View Controller`并更改`Simulated Size`为`Freeform`高度**1000**而不是`Fixed`。
2.  将视图重命名`View Controller`为**RootView**。
3.  拖动**RootView**`Scroll View`的子视图并将其重命名为**ScrollView**。
*****   **为ScrollView**添加约束：
    *   **ScrollView** [顶部、底部、前导、尾随] = **RootView** [顶部、底部、前导、尾随]*   拖动 a`Vertical Stack View`作为**ScrollView**的子视图并将其重命名为**ContentView**。*   **为ContentView**添加约束：
    *   **内容视图.height** = **1000**
    *   **ContentView** [顶部、底部、前导、尾随、宽度] = **ScrollView** [顶部、底部、前导、尾随、宽度]*   选择**ContentView**，并更改`Attributes Inspector`为而不是。**`Distribution``Fill Equally``Fill`*****   拖动一个`View`作为**ContentView**的子视图并将其重命名为**RedView**。*   设置`Red`为**RedView**的背景。*   拖动**ContentView**`View`作为子视图并将其重命名为**BlueView**。*****   设置`Blue`为**BlueView**的背景。*   选择**RootView**，然后单击`Update Frames`按钮。
    *   `Update Frames`是 Xcode8 中的一个新按钮，而不是`Resolve Auto Layout Issues`按钮。它看起来像一个刷新按钮，位于 Storyboard 下方的控制栏中： [![更新帧按钮](../Images/920494d982c04a64668601d96a518335.png)](https://i.stack.imgur.com/hFk5O.png)**********

 ***** * *

查看层次结构：

*   **根视图**
    *   **滚动视图**
        *   **内容视图**
            *   **红景**
            *   **蓝景**

* * *

视图控制器场景（高度：1000）：

![场景](../Images/837555ea540e231824cb60ce5e01c5c7.png)

在 iPhone7 上运行（高度：1334 / 2）：

![演示](../Images/b948517ba451f9b562d8ce782637a6e4.png)

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2014-03-18T20:01:40.183

**以下是在 iOS 7 和 XCode 5 上对我有用的步骤。**

1.  拖动一个 ViewController（它带有 UIView “View”）。

    1.1 选择“View Controller”并选择“File Inspector”并取消选中“Auto layout”。

2.  拖动 ScrollView（作为 ViewController 的 UIView “View”的子级）
3.  选择 ScrollView 并打开“Identity Inspector”。
4.  为 keyPath 输入“contentSize”。为类型选择“大小”。并输入**{320, 1000}**作为值。

    注意：第 4 步只是说滚动条包含一些大小为 320x1000 单位的内容。因此设置 contentSize 将使滚动条工作。

5.  选择 View Controller，选择“Attributes Inspector”，然后从 Size 中选择**Freeform 。**

    注意：第 5 步将允许我们更改视图控制器附带的“视图”的大小。

6.  选择“查看”，然后选择“尺寸检查器”。

7.  将宽度设置为 320，高度设置为 1000。

注意：5、6 和 7 纯粹是为了让我们在 StoryBoard 中*看到*拉伸或整个展开的视图。注意：确保取消选择视图控制器上的“自动布局”。

**您的视图层次结构应如下所示：** ![等级制度](../Images/be9077bef005074d236c3e784263c4c8.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-10-20T11:49:30.857

经过数小时的反复试验，我找到了一种非常简单的方法，可以将内容放入“屏幕外”的滚动视图中。使用 XCode 5 和 iOS 7 测试。您几乎可以完全在 Storyboard 中执行此操作，使用 2 个小技巧/解决方法：

1.  将视图控制器拖到故事板上。
2.  在这个viewController上拖一个scrollView，对于demo，你可以保留它的默认大小，覆盖整个屏幕。
3.  现在来**了技巧 1**：在向滚动视图添加任何元素之前，拖入一个常规的“视图”（这个视图将比屏幕大，并将包含所有子元素，如按钮、标签，......我们称之为'**封闭视图**'）。
4.  让这个**封闭视图**在尺寸检查器中的 Y 尺寸为例如 800。
5.  将标签放到封闭视图上，在 Y 位置 200 的某处，将其命名为“标签 1”。
6.  **技巧 2**：确保选择了**封闭视图**（**而不是 scrollView ！**），并将其 Y 位置设置为例如 -250，因此您可以添加一个位于屏幕“外部”的项目
7.  在屏幕底部某处放入一个标签，将其命名为“标签 2”。这个标签实际上是“屏幕外”。
8.  将封闭视图的 Y 位置重置为 0，您将不再看到标签 2，因为它位于屏幕外。

到目前为止，对于故事板的工作，现在您需要向 viewController 的“viewDidLoad”方法添加一行代码来设置滚动视图的内容，使其包含整个“封闭视图”。我没有在 Storyboard 中找到这样做的方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.contentSize = CGSizeMake(320, 800);
} 
```

您可以尝试通过将`contentSize`keyPath 作为 a添加`size`到 Identity Inspector 中的 scrollView 并将其设置为 (320, 1000) 来执行此操作。

我认为Apple应该在情节提要中使这更容易，在TableViewController中您可以在情节提要中滚动屏幕外（只需添加20个单元格，您就会看到您可以简单地滚动），这也应该可以通过ScrollViewController实现。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-18T21:29:16.710

**让滚动在 iOS7 中工作，在 iOS 7 和 XCode 5 中使用自动布局。**

除此之外：[https ://stackoverflow.com/a/22489795/1553014](https://stackoverflow.com/a/22489795/1553014)

显然，我们需要做的就是：

1.  将所有约束设置为滚动视图（即首先修复滚动视图）

2.  然后将 distance-from-scrollView 约束设置到最底部的项目以滚动视图（即超级视图）。

注意：第 2 步将告诉故事板最后一段内容在滚动视图中的位置。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-12-23T10:00:26.030

对于这个例子，我取消了界面生成器的自动布局功能。而且，我仍在使用（完全没有理由）相对较旧的 4.6.1 版本的 Xcode。

从一个视图控制器开始，它上面有一个滚动视图（主视图）。

1：从对象库中添加一个容器视图到滚动视图。请注意，故事板中添加了一个新的视图控制器，它通过滚动视图链接到视图控制器。

2：选择容器视图，在尺寸检查器上，使其锚定在顶部和左侧，而不自动调整大小。

![在此处输入图像描述](../Images/95b9d4e11197ab531fa54388d4ea15d4.png)

3：将其高度更改为 1000。（此示例使用 1000。您应该应用所需的值。）

4：选择新的视图控制器，然后从属性检查器中，将大小更改为自由形式。

![在此处输入图像描述](../Images/88146dbdad145feca33bd8a7ac126ef1.png)

5：选择新视图控制器的视图，在尺寸检查器上，将高度更改为 1000（等于容器视图的高度）。

6：为了稍后的测试，在新视图控制器的视图上，在视图的顶部和底部添加一个标签。

7：从原始视图控制器中选择滚动视图。在身份检查器上，添加一个属性，其中 keyPath 设置为 contentSize，type 设置为 Size，value 设置为 {320, 1000}（或容器视图的大小）。

![在此处输入图像描述](../Images/03264f7d4054719175215953362d8368.png)

8：在4英寸iPhone模拟器上运行。您应该能够从顶部标签向上滚动到底部标签。

9：在 3.5 英寸 iPhone 模拟器上运行。您应该能够从顶部标签向上滚动到底部标签。

请记住，Xcode 4.6.1 只能为 iOS6 及以下版本构建。使用这种方法并为 iOS6 构建，当应用程序在 iOS7 上运行时，我仍然能够获得相同的结果。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-10-10T07:04:27.940

请注意，在 a`UITableView`中，您实际上可以通过选择其中的单元格或元素并使用触控板向上或向下滚动来滚动表格视图。

对于 a `UIScrollView`，我喜欢 Alex 的建议，但我建议*暂时*将视图控制器更改为自由形式，增加根视图的高度，构建您的 UI（步骤 1-5），然后在完成后将其更改回标准推断大小这样您就不必将内容大小硬编码为运行时属性。如果您这样做，您将面临许多维护问题，试图同时支持 3.5" 和 4" 设备，以及将来可能提高屏幕分辨率。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-02-08T22:57:10.750

在 iOS7 中，我发现如果我在 FreeForm 大小的 ViewController 上的 UIScrollView 中有一个 View，无论我做什么，它都不会在应用程序中滚动。我玩了一下，发现以下似乎有效，它不使用 FreeForms：

1.  在 ViewController 的主视图中插入 UIScrollView

2.  根据需要在 ScrollView 上设置 Autolayout 约束。对我来说，我使用了 0 到顶部布局指南和 0 到底部布局指南

3.  在 ScrollView 中，放置一个 Container View。将其高度设置为您想要的任何值（例如 1000）

4.  向容器添加高度约束 (1000)，使其不会调整大小。底部将超过表格的末尾。

5.  添加行 [self.scrollView setContentSize:CGSizeMake(320, 1000)]; 到包含 scrollView 的 ViewController（您已将其连接为 IBOutlet）

与 Container 关联的 ViewController（自动添加）将在 Interface Builder 中具有所需的高度（1000），并且还将在原始视图控制器中正确滚动。您现在可以使用容器的 ViewController 来布局您的控件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-11-13T23:29:36.347

您应该只在 viewDidAppear 上设置 contentSize 属性，如下例所示：

```
- (void)viewDidAppear:(BOOL)animated{

     [super viewDidAppear:animated];
     self.scrollView.contentSize=CGSizeMake(306,400.0);

} 
```

它解决了自动布局问题，并且在 iOS7 上运行良好。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-08-13T07:12:15.377

免责声明：- 仅适用于 ios 9 及更高版本（堆栈视图）。

如果您在 ios 9 设备上部署应用程序，请使用**堆栈视图**。以下是步骤：-

1.  添加带有约束的滚动视图 - 固定到左侧、右侧、底部、顶部（无边距）到超级视图（视图）
2.  将具有相同约束的堆栈视图添加到滚动视图。
3.  堆栈视图其他约束：- stackView.bottom = view.bottom 和 stackView.width = scrollView.width
4.  开始添加您的视图。滚动视图将根据堆栈视图的大小（本质上是您的内容视图）决定滚动

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-03-07T05:38:25.377

我想把我的 5 美分用于接受的答案：我已经研究了 2 天的主题，终于找到了一个从现在开始我将一直使用的解决方案

在接受的答案中转到第 4 项，忘记添加框架和内容大小的属性等等

使一切自动化只需使用[此链接中的解决方案](http://codehappily.wordpress.com/2013/11/14/ios-how-to-use-uiscrollview-with-autolayout-pure-autolayout-approach-multiple-smaller-views/)

一切都清晰、简单、优雅，在 ios 7 上就像一个魅力。我很高兴所有这些，哈哈

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-02-12T21:01:57.770

这是一个简单的解决方案。

1.  将情节提要中视图控制器的大小属性设置为“自由形式”并设置所需的大小。确保它足够大以容纳滚动视图的全部内容。

2.  像往常一样添加滚动视图并设置约束。即，如果您希望滚动视图成为您的视图的大小，然后像往常一样将您的顶部、底部、前导、尾随边距附加到超级视图。

3.  现在只需确保在连接滚动视图顶部和底部的滚动视图的子视图中有约束。如果您有水平滚动，左右相同。

[![在此处输入图像描述](../Images/ffd00adf726aec112435a97dea712ddb.png)](https://i.stack.imgur.com/Uptdw.png)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-07-08T11:06:37.390

这里有一个肮脏的答案，它得到了垂直滚动视图的相同解决方案，但是（反对 stackoverflow 的精神）没有回答这个问题。不使用滚动视图，只需使用 UITableView，将普通 UIView 拖到标题中，并使其尽可能大，您现在可以滚动故事板中的内容。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-07-22T02:07:17.857

这是使用 Xcode 11 设置滚动视图的方法

1 - 添加滚动视图并设置顶部、底部、前导和尾随约束

[![在此处输入图像描述](../Images/a837d32e59e91334486c67192f17884d.png)](https://i.stack.imgur.com/6Svwl.png)

2 - 将内容视图添加到滚动视图，将连接拖到内容布局指南并选择前导、顶部、底部和尾随。确保将其值设置为 0 或您想要的常量。

[![在此处输入图像描述](../Images/7a37cb2a8c5be50c6bc2ef08a69cd0ee.png)](https://i.stack.imgur.com/B7OLS.png)

3 - 从 Content View 拖到 Frame Layout Guide 并选择 Equal Widths

[![在此处输入图像描述](../Images/837b38045738135a2e8b8dcf48f9a49f.png)](https://i.stack.imgur.com/l70Fo.png)

4 - 为内容视图设置一个高度约束常量

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-30T22:54:57.773

如果您使用的是自动布局，那么最好的方法是在故事板中使用 UITableViewController 和静态单元格。

我也曾经遇到过需要更多滚动的视图问题，因此使用上述技术更改 UIScrollView。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-10-12T17:19:02.297

关键是 contentSize。

添加 UIScrollView 时，这通常会丢失且未指示。

选择 UIScrollView 并选择 Identity Inspector。

将`contentSize`keyPath 作为 a添加`size`到 Identity Inspector 中的 scrollView 并将其设置为 (320, 1000)。

滚开。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-11-20T01:16:14.737

显然你**根本不需要指定高度！** 如果它因某种原因发生变化（您调整组件大小或更改字体大小），那就太好了。

我刚刚按照本教程进行操作，一切正常：http: [//natashatherobot.com/ios-autolayout-scrollview/](http://natashatherobot.com/ios-autolayout-scrollview/)

（旁注：没有必要实现 viewDidLayoutSubviews 除非您想使视图居中，因此步骤列表更短）。

希望有帮助！****

# tun - TUN/TAP 写回隧道

> ID：12905570
> 
> 赞同：0
> 
> 时间：2012-10-15T23:45:12.293
> 
> 标签：tun

我的应用程序正在使用 TUN 说 tun0。在设计中，我的应用程序将收到一个包含完整 IP 层的 UDP，然后我将取出 IP 层，然后使用“文件写入”将它们放入我自己的 tun0 设备中，据说在设计中，我应该可以读取再次从 tun0 发出数据包。

现在的情况是我可以通过 tcpdump 看到包被写入隧道，但我无法读回它们。

隧道设置或路由设置有问题？

提前致谢

杨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:54:40.603

您的第二个 tun0 不是 FIFO 队列。您的设计中可能存在使用第二个 tun0 设备的方式和原因的问题。澄清你为什么使用它以及应该阅读哪个过程。正确的方法应该源于该澄清。

如果您想读取发送给您的数据，您有一些选择。

*   打开时将 tun0 连接到 TCP 或 UDP 回显服务。然后，这会将您塞入其中的数据包发回给您。
*   为要连接的第二个 tun0 打开一个侦听器。然后连接到它并将数据包发送到该连接。从侦听器端读取您的数据。
*   打开带有两个文件描述符的管道。写入一个描述符并从另一个描述符读取。在 fork children 时，管道通常用于 IPC（进程间通信）。
*   创建一个套接字并从中读取数据。打开套接字的另一端进行写入。套接字通常用于允许其他进程与一个进程进行通信。当调用进程可能具有与侦听进程不同的生命周期时，这很有效。
*   在内存中创建缓冲区或队列来存储数据。

# wolfram-mathematica - 从 Mathematica 中的列表中选择非顺序元素

> ID：12905576
> 
> 赞同：2
> 
> 时间：2012-10-15T23:46:19.650
> 
> 标签：wolfram-mathematica

我经常将电子表格导入 Mathematica 进行分析，并且在编写一种选择非顺序元素进行分析的简单方法时遇到了麻烦。例如，如果我导入一个包含 20 列和 100 行的电子表格，我通常需要删除选定的行/列。

在此示例中，我需要所有行和列 2、4、7-17。以下代码似乎合乎逻辑，但会导致错误：

```
v[[ All, {2,4,7;;17} ]] 
```

相反，我一直在使用：

```
v[[ All, {2,4,7,8,9,10,11,12,13,14,15,16,17} ]] 
```

在我的示例中，是否可以使用 Span (;;) 选择列块 (7-17)，同时选择第 2 行和第 4 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:45:55.197

the x ;; y syntax is a special argument to Part, not a general syntax that can be used to build lists. So you could say v[[ All, 7;;17 ]], but not v[[All, {7;;17}]] -- the latter is neither a list of integers nor a special syntax recognizable by Part.

But it is pretty easy to solve your problem. You can try:

```
v[[All, {2,4}~Join~Table[x,{x,7,17}] ]] 
```

for example, or

```
Join[v[[All, {2, 4}]], v[[All, 7 ;; 17]], 2] 
```

Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:14:38.170

另一种方法..

```
pys[{all___}] := 
 Flatten[(Switch[Head[#], Span, 
      Range @@ (# /. Span -> List), __, #]) & /@ {all}] 
list = Range[100];
list[[pys[{1, 3 ;; 12 ;; 2, 19, -3 ;; -1}] ]]

{1, 3, 5, 7, 9, 11, 19, 98, 99, 100} 
```

这尤其不处理开放端 {1,3;;} 或混​​合 +/- 跨度 { 5;;-5 }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:19:30.327

这是`Part`和的一个已知限制`Span`。请参阅我自己密切相关的问题：

[Part and Span：这*不应该*有什么原因吗？](https://stackoverflow.com/q/6174443/618728)

您的解决方案是最常见的解决方法。如果您发现构建索引列表太不方便，您可以尝试使用自定义 Part 函数使其更容易。例如：

```
SetAttributes[part, HoldFirst]

part[x_, parts__] := x[[##]] & @@ Flatten /@ ({parts} /. Span -> Range) 
```

利用：

```
a = Range@24 ~Partition~ 4;

part[a, {1 ;; 3, 6}, {1, 3 ;; 4}] 
```

> ```
> {{1, 3, 4}, {5, 7, 8}, {9, 11, 12}, {21, 23, 24}} 
> ```

这不会尝试处理会复杂得多的负索引 Span，但至少可以为您提供一些想法。

# java - Java 类的多态性

> ID：12905581
> 
> 赞同：0
> 
> 时间：2012-10-15T23:47:02.123
> 
> 标签：java

假设我们有一个 Employee 类，它具有以下数据字段和函数。该程序试图通过比较它们的和来查看 2`Employees`是否相等`name``address`

```
public class Employee{
  private String name;
  private double hours;
  private double rate;
  private Address address;
    @Override
    public boolean equals(Object obj){
        if(obj == this) return true;
        if(obj == null) return false;
        if(this.getClass() == obj.getClass()){
            Employee other = (Employee) obj;
            return name.equals(other.name) && address.equals(other.address);
        }else{
            return false;
        }
    } 
```

为什么我们不这样做`public boolean equals(Employee obj)`（不同的参数）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:48:53.597

（1）如果你这样做`new Empolyee().equals(null)`- 这会发生。

(2) 因为`Object`声明了类`equals(Object)`- 并且您不能将`Employee`其作为参数来覆盖此方法。您只能在覆盖方法时扩大参数，切勿缩小参数。
如果你这样做会发生什么：

```
Object o = new Employee();
o.equals(new Object()); 
```

“方法”将不知道如何处理这种情况，虽然它是完全有效的并且在编译时无法知道（在一般情况下）。

为避免这种情况，在重写方法时不允许出现这种类型的差异，如果您尝试这样做，则会出现编译错误。

# css - 媒体查询不适用于 iphone 宽度 320px

> ID：12905586
> 
> 赞同：0
> 
> 时间：2012-10-15T23:47:21.823
> 
> 标签：css, media-queries

我希望 html 标记中的这个图像只填充 320px 的最大宽度，就像它应该的那样。然而，它还不止于此。水平滚动条出现，图像平铺增加了 166 个像素。在 IOS 模拟器和我的 ipone 中，所有其他元素都正确跨越了宽度。

```
@media only screen and (max-width : 320px) {
html {
margin:0; 
padding:0;
background: url('../_images/iphoneCardboard_flat.png')repeat;
} 
```

更新：这些是一些可能相关的标签。

```
#band1 {
position: absolute;
top:0;
left:0;
height:50px;
width:100%;
background-image: url('../_images/iphoneGradient.png');
z-index:-1;
}

.barbLogo {
position: absolute;
top:3px;
margin-left:165px; 
width:320px;
}

#band2{
position: absolute;
top:-75px;
left:0;
height:50px;
width:100%;
background-image: url('../_images/iphoneGradient.png');
z-index:-1;
}

#gridBgContainer{
position: absolute;
margin:0;
top:50px;
left:0;
height:200px;
background:url('../_images/gridBg.png');
background-repeat: repeat;
display: table;
z-index: 1;
}

#wrapper {
position: relative;
top:0px;
left:0;
right:0;
margin: 0 auto 0 auto;
width:100%;
text-align: center;
z-index: 3;
}

#socialLinks {
position: absolute;
margin-top: 14px; 
float:right;
right:0px;
}

#top-menu {
position: absolute;
top:0px;
left: 0px;
width:320px;
z-index: 100; 
}

section#homeContent {
position: absolute;
top: 400px;
width:320px;
z-index: 10;
}

section#faqContent {
position: absolute;
top:900px;
width:320px;
z-index: 10;
text-align:left;
}

footer {
position: absolute;
font-size: 1.15em;
top: 1230px;
padding: 0 1% 0 1%;
width: 100%;
height: 75px;
text-align: center;
z-index: 10;
}

.footer{
text-align:center;
padding: 2% 0 0 0;
}

#band3{
position: absolute;
top: 1255px;
left:0;
height:50px;
width:100%;
background-image: url('../_images/iphoneGradient.png')repeat-x;
z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:54:38.730

你应该设置宽度属性

```
@media only screen and (max-width : 320px) {
html {
margin:0; 
padding:0;
background: url('../_images/iphoneCardboard_flat.png')repeat;

width: 320px;

} 
```

# powershell - 如何使用 OLEDB.12 执行 MS Access 查询

> ID：12905590
> 
> 赞同：0
> 
> 时间：2012-10-15T23:47:40.920
> 
> 标签：powershell, ms-access, oledb

我正在寻找使用 Microsoft.ACE.OLEDB.12.0 命令对象执行 MS Access 命名查询的语法。

我看到很多使用表的示例，但还没有用于查询。将表名换成查询名似乎不起作用。即从'myquery'中选择*

这是我的代码片段：

```
$OleDbConn = New-Object "System.Data.OleDb.OleDbConnection";
$OleDbCmd = New-Object "System.Data.OleDb.OleDbCommand";
$OleDbAdapter = New-Object "System.Data.OleDb.OleDbDataAdapter";
$DataTable = New-Object "System.Data.DataTable";

$OleDbConn.Open();

$OleDbCmd.Connection = $OleDbConn;
$OleDbCmd.CommandText = "'myQuery'"; # name query in MS Access db
$OleDbCmd.CommandType = [System.Data.CommandType]::StoredProcedure;
$OleDbAdapter.SelectCommand = $OleDbCmd;

$RowsReturned = $OleDbAdapter.Fill($DataTable);
Write-Host $RowsReturned; 
```

错误：使用“1”参数调用“填充”的异常：“Microsoft Access 数据库引擎找不到输入表或查询“实验室手册”。确保它存在并且其名称拼写正确。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:38:13.130

诀窍是在查询名称之前附加命令“执行”，并在查询名称周围使用方括号。

```
$OleDbConn = New-Object "System.Data.OleDb.OleDbConnection";
$OleDbCmd = New-Object "System.Data.OleDb.OleDbCommand";
$OleDbAdapter = New-Object "System.Data.OleDb.OleDbDataAdapter";
$DataTable = New-Object "System.Data.DataTable";

$OleDbConn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\temp\labmanual.mdb;";
$OleDbCmd.Connection = $OleDbConn;
$OleDbCmd.CommandText = "Execute [myQuery]";

$OleDbAdapter.SelectCommand = $OleDbCmd;

$OleDbConn.Open();
$RowsReturned = $OleDbAdapter.Fill($DataTable);

Write-Host $RowsReturned;

$OleDbConn.Close(); 
```

# sql - 用户将字段留空时写入 SQL 数据库时出错

> ID：12905591
> 
> 赞同：1
> 
> 时间：2012-10-15T23:47:46.067
> 
> 标签：sql, vb.net, visual-studio-2010

我正在创建一个 Windows 表单，每当我们添加新员工时，用户都会填写该表单。如果我完整填写表格，我可以写入数据库，但如果一个字段留空，我会收到错误消息。在 SQL 表中，所有行都设置为允许空值，我可以通过 SQL Server Management Studio 插入空值，没有问题。

为简洁起见，我省略了十几个字段，但是如果我用我正在使用的代码替换此代码，则会出现同样的错误。

```
Dim DBConnection As New SqlClient.SqlConnection
Dim cmd As New SqlClient.SqlCommand
Try
WOWConnection.ConnectionString = "Server=MyServerName;Database=Employee Database;Trusted_Connection=TRUE;"
WOWConnection.Open()
cmd.Connection = WOWConnection
cmd.CommandText = "INSERT INTO [dbo].[Employees]([FirstName],[LastName]) VALUES (@FirstName,@LastName)"
cmd.Parameters.AddWithValue("@FirstName", Me.EMP_FirstName.Text)
cmd.Parameters.AddWithValue("@LastName", Me.EMP_LastName.Text)
cmd.ExecuteNonQuery()
MsgBox("Sucess!")
Catch ex As Exception
MsgBox("error")
Finally
DBConnection.Close()
End Try 
```

您如何处理在 Windows 窗体上留空的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T08:33:48.377

在将值传递给 SQL 之前测试要插入的值。注意 NULL 值和 Empty 在 SQL 中是不一样的。

> cmd.CommandText = "插入 [dbo].Employees 值 (@FirstName,@LastName)"
> 
> If Not string.IsNullOrEmpty(Me.EMP_FirstName.Text) Then
> 
> ```
>  cmd.Parameters.AddWithValue("@FirstName", Me.EMP_FirstName.Text) 
> ```
> 
> 别的
> 
> ```
>  cmd.Parameters.AddWithValue("@FirstName", DBNull.Value) 
> ```
> 
> 万一
> 
> cmd.ExecuteNonQuery()

# c++ - C ++将带有指针的对象添加到向量中

> ID：12905598
> 
> 赞同：0
> 
> 时间：2012-10-15T23:48:25.537
> 
> 标签：c++, vector, constructor

我有一个向量，它添加了包含`SDL_Surface`指针作为数据成员的对象，这意味着我必须使用复制构造函数来实现指针的深层复制。该对象释放析构函数中的表面（指针），这就是问题发生的地方。在将对象添加到向量中的那一刻（通过按下按钮）程序崩溃但是当我`SDL_FreeSurface(surface)`从析构函数中取出（内存泄漏）时，当我将对象添加到向量时程序不会崩溃。如何正确地将对象添加到向量中？有些人可能认为问题在于析构函数试图删除悬空指针，但错误发生在向量中创建对象时。

```
class Block{

  public:

     Block(int x, int y, MediaFunctions &M_Functions);

     Block(const Block& source);

    ~Block();

  private:

    SDL_Surface *block_surface_names;
    SDL_Surface *block_surface_hours;

    SDL_Surface *block_names_detected;
    SDL_Surface *block_hours_detected;

    SDL_Rect     block_rect_names;
    SDL_Rect     block_rect_hours;

    };

    ////////////////////

   Block::Block(int x, int y, MediaFunctions &M_Functions){

      block_surface_names  = M_Functions.LoadOptimizedImage("block_names.png");
      block_surface_hours  = M_Functions.LoadOptimizedImage("block_hours.png");

      block_names_detected = M_Functions.LoadOptimizedImag("block_names_detected.png");
      block_hours_detected = M_Functions.LoadOptimizedImag("block_hours_detected.png");

      block_rect_names.x = x;
      block_rect_names.y = y;
      block_rect_names.w = block_surface_names -> w;
      block_rect_names.h = block_surface_names -> h;

      block_rect_hours.x = block_rect_names.x + block_rect_names.w;
      block_rect_hours.y = block_rect_names.y;
      block_rect_hours.w = block_surface_hours -> w;
      block_rect_hours.h = block_surface_hours -> h;

     }

     //copy
     Block::Block(const Block& source) 
     {
     block_surface_names  = source.block_surface_names;
     block_surface_hours  = source.block_surface_hours;

     block_names_detected = source.block_names_detected;
     block_hours_detected = source.block_hours_detected;

     }

    Block::~Block(){
     //having this is necessary obviously- crashes program
     //removing this causes the program not to crash

     SDL_FreeSurface(block_surface_hours);
     SDL_FreeSurface(block_surface_names);

     SDL_FreeSurface(block_hours_detected);
     SDL_FreeSurface(block_names_detected);

    }

    //where the object with SDL_FreeSurface() in the dtor is added to vector - crash!
   void Control::HandleEvents(SDL_Event &event, MediaFunctions &M_Functions){

       if(event.type == SDL_KEYDOWN){
           if( event.key.keysym.sym == SDLK_a )

            //append a block instance using copy constructor
            BlockVector.push_back(Block (Block(100,100, M_Functions) ) );

       }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:57:17.837

你的代码：

```
BlockVector.push_back(Block (Block(100,100, M_Functions) ) ); 
```

看起来非常不理想，它会创建不必要的数据副本，看起来需要一些时间来加载，我的意思是这个 png 加载在`Block::Block()`.

您可以做的最好的事情是使 BlockVector 成为：

```
 std::vector<boost::shared_ptr<Block>> blocks; 
```

这样你就不需要制作不必要的 Block 副本。否则，您需要`SDL_Surface*`在类中为您的指针添加引用计数`Block`，这也可以使用`shared_ptr`自定义删除器来完成（看这里：[使 shared_ptr 不使用 delete](https://stackoverflow.com/questions/441306/make-shared-ptr-not-use-delete)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:06:44.297

复制构造函数应该做深拷贝，但你的没有。幸运的是，您实际上根本不需要复制构造函数，只需要一个移动构造函数。

```
 Block::Block(Block&& source) 
 {
 block_surface_names  = source.block_surface_names;
 block_surface_hours  = source.block_surface_hours;
 source.block_surface_names = NULL;
 source.block_surface_hour = NULL;

 block_names_detected = source.block_names_detected;
 block_hours_detected = source.block_hours_detected;
 source.block_names_detected = NULL;
 source.block_hours_detected = NULL;
 } 
```

仅与您的问题模糊相关：

```
BlockVector.push_back(Block (Block(100,100, M_Functions) ) ); 
```

这会生成 a `Block`，然后复制 that `Block`，然后将该块的副本推*送到*向量上。但是，可以`Block`使用以下代码直接在向量中创建：

```
BlockVector.emplace_back(100, 100, M_Functions); 
```

如果您没有启用 C++11 的编译器，则最好使用`vector`of `boost::shared_ptr`，它比此代码更慢且更复杂，但也可以解决问题。在任何一种情况下，`Block`该类都应该有一个已删除（或未定义）的复制构造函数。

# jquery - Twitter 404 - message":"抱歉，该页面不存在","code":34

> ID：12905600
> 
> 赞同：0
> 
> 时间：2012-10-15T23:48:31.230
> 
> 标签：jquery, twitter

我得到以下内容，最近开始发生（我相信来自 Twitter APi 的更新）：

`jquery17209743677265942097_1350344103606({"errors":[{"message":"Sorry, that page does not exist","code":34}]});`

这是我目前使用的脚本：

```
 <script src="/wp-content/misc/jquery.marquee.js"></script>
    <script>
        var Twitter = {
            init: function () {
                // Pass in the username you want to display feeds for
                this.insertLatestTweets('clubsouz');
            }, 

            // This replaces the <p>Loading...</p> with the tweets
            insertLatestTweets: function (username) {
                var limit   = 5;    // How many feeds do you want?
                var url     = 'http://twitter.com/statuses/user_timeline.json?screen_name=' + username + '&count=' + limit + '&callback=?';

                // Now ajax in the feeds from twitter.com
                jQuery.getJSON(url, function (data) {
                    // We'll start by creating a normal marquee-element for the tweets
                    var html = '<marquee behavior="scroll" scrollamount="1" direction="left">';

                    // Loop through all the tweets and create a link for each
                    for (var i in data) {
                        html += '<a target="_blank" href="http://twitter.com/' + username + '#status_' + data[i].id_str + '">' + data[i].text + ' <i>' + Twitter.daysAgo(data[i].created_at) + '</i></a>';
                    }

                    html += '</marquee>';

                    // Now replace the <p> with our <marquee>-element
                    jQuery('#twitter p').replaceWith(html);

                    // The marquee element looks quite shite so we'll use Remy Sharp's plug-in to replace it with a smooth one
                    Twitter.fancyMarquee();
                });
            }, 

            // Replaces the marquee-element with a fancy one
            fancyMarquee: function () {
                // Replace the marquee and do some fancy stuff (taken from remy sharp's website)
                jQuery('#twitter marquee').marquee('pointer')
                    .mouseover(function () {
                        jQuery(this).trigger('stop');
                    })
                    .mouseout(function () {
                        jQuery(this).trigger('start');
                    })
                    .mousemove(function (event) {
                        if (jQuery(this).data('drag') == true) {
                            this.scrollLeft = jQuery(this).data('scrollX') + (jQuery(this).data('x') - event.clientX);
                        }
                    })
                    .mousedown(function (event) {
                        jQuery(this).data('drag', true).data('x', event.clientX).data('scrollX', this.scrollLeft);
                    })
                    .mouseup(function () {
                        jQuery(this).data('drag', false);
                    });
            }, 

            // Takes a date and return the number of days it's been since said date
            daysAgo: function (date) {
                // TODO: Fix date for IE...
                if (jQuery.browser.msie) {
                    return '1 day ago';
                }

                var d = new Date(date).getTime();
                var n = new Date().getTime();

                var numDays = Math.round(Math.abs(n - d) / (1000 * 60 * 60 * 24));
                var daysAgo = numDays + ' days ago';

                if (numDays == 0) {
                    daysAgo = 'today';
                }
                else if (numDays == 1) {
                    daysAgo = numDays + ' day ago';
                }

                return daysAgo;
            }
        };

        Twitter.init();
    </script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:12:14.363

将网址从 更新`http://twitter.com/statuses/user_timeline.json?`为`https://api.twitter.com/1/statuses/user_timeline.json?`。

解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T10:28:53.643

如果有人发现这个问题并接受了答案，那么现在要使用的 url

```
 https://api.twitter.com/1.1/statuses/user_timeline.json 
```

# python - Python：while 语句 = 语句打印关联值

> ID：12905602
> 
> 赞同：1
> 
> 时间：2012-10-15T23:48:44.460
> 
> 标签：python, loops, dictionary, unique

在 Python 中，我目前有一个带有复合键的字典。在这本词典中，这些键多次出现。（键以逗号分隔）：

```
(A,B), (A,C), (A,B), (A,D), (C,A), (A,B), (C,A), (C,B), (C,B) 
```

我已经有一些东西可以汇总唯一出现的次数并计算重复次数，这给了我一个类似于这样的打印输出：

`(A,B)`计数为`4`,`(A,C)`计数为`2`,`(B,C)`计数为`6`等。

我想知道如何编写一个可以给我以下信息的循环：

打印出键的第一部分的第一次出现及其关联的值和计数。

姓名： A：

```
Type Count

B     4
C     2

Total  6 
```

姓名：乙：

```
Type Count
A    3
B    2
C    3
Total 8 
```

我知道我需要创建一个循环`first statement = the first statement`并执行以下操作，但不知道如何处理/编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:53:46.890

这是一个稍微慢一点的算法，可以完成它：

```
def convert(myDict):
    keys = myDict.keys()
    answer = collections.defaultdict(dict)
    for key in keys:
        for k in [k for k in keys if k.startswith(key[0])]:
            answer[key[0]][k[1]] = myDict[k]
    return answer 
```

最终，我认为你所追求的是[尝试](http://en.wikipedia.org/wiki/Trie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:02:38.340

说您的字典对给定键有多个值有点误导。Python 不允许这样做。相反，您拥有的是元组的键。您想解压缩这些元组并重建嵌套字典。

这是我的做法：

```
import collections

# rebuild data structure
nested = collections.defaultdict(dict)
for k, v in myDict.items():
    k1, k2 = k                # unpack key tuple
    nested[k1][k2] = v

# print out data in the desired format (with totals)
for k1, inner in nested.items():
    print("%s\tType\tCount" % k1)
    total = 0
    for k2, v in innner.items():
        print("\t%s\t%d" % (k2, v))
        total += v
    print("\tTotal\t%d" % total) 
```

# php - 301 重定向整个文件夹，但保持动态 URL 不变

> ID：12905604
> 
> 赞同：0
> 
> 时间：2012-10-15T23:49:00.500
> 
> 标签：php, mysql, .htaccess, mod-rewrite

我有一个标签错误的目录。

示例：www.example.com/badfolder

应该是：www.example.com/goodfolder

在目录中，有大量的动态 url 和友好的 url。

我想在重定向到新文件夹的 public_html 文件夹中的 .htaccess 文件中添加一行。

因此，有人正在导航到：www.example.com/badfolder/page.php?id=123&x=5&y=10

它会重定向到：www.example.com/goodfolder/page.php?id=123&x=5&y=10

这个对吗？

```
RewriteEngine On
RewriteRule ^badfolder/(.*)?$ /goodfolder/$1 [R=301,NC,NE,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:55:15.063

你所拥有的对我来说很好。您只需要确保它更靠近您的 htaccess 文件的顶部，高于您可能拥有的任何其他内部重写规则。

或者，您可以坚持使用 mod_alias：

```
Redirect 301 /badfolder /goodfolder 
```

它会做同样的事情。

# tomcat - 如何找到 Sesame 存储库的位置？

> ID：12905605
> 
> 赞同：1
> 
> 时间：2012-10-15T23:49:33.603
> 
> 标签：tomcat, owl, sesame

我在 OS X 10.8 上的 Tomcat 7 中使用了芝麻 .wars 展台，但现在它不再工作了。我用两个新的 Sesame .war 设置了一个新的 Tomcat，但现在它使用旧的存储库。这些存储在哪里？（无法添加新的回购或删除旧的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T02:34:50.603

Sesame Server 默认将其配置数据和数据库文件存储在 `%APPDATA%\Aduna`Windows、`$HOME/.aduna`Linux 和`$HOME/Library/Application Support/Aduna`Mac OS X 上。如果您想要全新安装，只需删除此目录即可。[有关更多信息，请参阅芝麻手册](http://openrdf.callimachus.net/sesame/2.7/docs/users.docbook?view#chapter-datadir-config)。

**更新**您可以检查芝麻服务器安装存储其数据的位置，方法是转到

```
http://localhost:8080/openrdf-sesame/home/overview.view 
```

在浏览器中，然后单击左侧导航菜单中的“系统”。它向您显示各种配置设置，包括数据目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-15T12:29:05.297

芝麻之家如下：

```
$HOME/.aduna/openrdf-sesame (linux/unix)
"%APPDATA%\Aduna\OpenRDF Sesame" (Windows)
"$HOME/Library/Application Support/Aduna/OpenRDF Sesame" (Mac OS X) 
```

来自 Owlim 文档。

# ruby-on-rails - 使用 RSpec/Capybara 确定表单提交

> ID：12905609
> 
> 赞同：3
> 
> 时间：2012-10-15T23:50:21.103
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec, capybara

我有一个项目，我正在使用 RSpec 和 Capybara 进行单元测试。我已经完全清除了模型和控制器测试，这些测试很好地通过并处理了数据库前验证的繁重工作。

我现在正在测试用户体验和前端项目，并想知道如何验证表单未提交。如果用户不匹配密码或其他一些错误数据，我有脚本来设置错误并阻止提交。

我知道我可以搜索错误文本，但是有一种方法可以检查“提交”是否从未发生，并且确信没有发生服务器故障。

我想要类似的东西：

```
it "should not sumbit if user name is less than 3 characters" do
  visit /edit_account_settings(@user)
  fill_in "username", :with => "fo"
  click_button "SAVE"

  # HOW DO I DO THIS?
  expect( ... ).not_to submit_to_server 
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:21:30.967

这不是您应该在集成测试中测试的东西。在集成测试中，您从最终用户的角度出发，因此您应该只测试*用户实际可以看到的内容*。如果用户看到表单尚未提交的唯一证据是错误消息，那么这就是您应该测试的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:30:45.643

在集成测试中，我们最常测试如果给出一个空字段，用户会看到什么，那么根据验证必须有错误消息。但是，如果你想要你检查如下

```
describe "User Registration" do

  before do
    visit /edit_account_settings(@user)
    fill_in "username", :with => "fo"
    click_button "SAVE"
  end

  it "should not sumbit if user name is less than 3 characters" do
    page.should have_content "your error message" 
  end

  it "should create the user and redirect to blah_path" do 
    current_path.should eq blah_path
  end

  it "should add user in users table" do
    expect { user.create }.to change(User, :count).from(0).to(1)
  end

end 
```

# php - NuSoap / PHP 对象作为 .NET Web 服务的输入 - 嵌套对象数组中的值不能超过一个

> ID：12905616
> 
> 赞同：1
> 
> 时间：2012-10-15T23:51:02.540
> 
> 标签：php, .net, web-services, soap, nusoap

啊啊啊！！我需要另一双眼睛。我一直在研究这个通过 .NET Web 服务使用 nusoap 和 PHP 的项目。我遇到的问题是主对象数组中的数组永远不会在数组中的一个元素之后形成任何 XML。请求成功，数组中有一个元素，但永远无法形成包含多个元素的 XML。所以形成的 XML 请求总是：“ `<PictureIDs><long>1466020</long></PictureIDs>`”

但实际上应该是：

```
<PictureIDs><long>1466020</long><long>1444431</long></PictureIDs> 
```

所以它可以工作，但只能与一个成功的 PictureID 一起工作 - 而不是第二个......我不明白我做错了什么。我想要的只是将多个 PictureID 传递到 PictureIDs 数组中……有人对如何实现这一点有更好的想法吗？您可以看到生成的 REQUEST XML - 但它只是跳过了第二个 PictureID。

* * *

**我已经尝试了基本方法：**

```
$create_export_request = array(
    'exportRequest'=>array(
        'Credentials'=>array('UserID'=>12345),
        'ApplicationID'=>1,
        'PictureIDs'=>array('long'=>1444431,'long'=>1466020),
        'ExportType'=>'40',
        'ExportOption'=>'ALLOW_DOWNLOAD',
        'EmailFrom'=>'from@me.com',
        'RequireLogin'=>'false',
        'RetainFiles'=>'false',
        'PackageCompressionType'=>'ZIP'
        )
        );

$client = new nusoap_client('http://zzzz.WebService.asmx?WSDL',true);
$result = $client->call('ManageProcess',$create_export_request); 
```

**要求：**

POST /V1.2.5/ExportInterface/EMService.asmx HTTP/1.0 主机：dmr2.spe.sony.com 用户代理：NuSOAP/0.9.5 (1.123) 内容类型：text/xml；charset=UTF-8 SOAPAction：“http://WebService.zzz/ManageProcess”内容长度：1225

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2996="http://tempuri.org"><SOAP-ENV:Body><ManageProcess xmlns="http://zzzz.WebService.asmx"><exportRequest><Credentials><UserID>12345</UserID></Credentials><ApplicationID>1</ApplicationID><PictureIDs><long>1466020</long></PictureIDs><ExportType>40</ExportType><ExportOption>ALLOW_DOWNLOAD</ExportOption><EmailFrom>from@me.com</EmailFrom><RequireLogin>false</RequireLogin><RetainFiles>false</RetainFiles><PackageCompressionType>ZIP</PackageCompressionType></exportRequest></ManageProcess></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

**以这种方式分解数组：**

```
$credentials = array(
    'UserID' => 12345
);

$pictureIds = array(
    'long'=>1444431,
    'long'=>1466020
);

$exportOptions = array(
    'Credentials'=>$credentials,
    'PictureIDs'=>$pictureIds,
    'ApplicationID'=>1,
    'ExportType'=>'40',
    'ExportOption'=>'ALLOW_DOWNLOAD',
    'RetainFiles'=>'false',
    'RequireLogin'=>'false',
    'PackageCompressionType'=>'ZIP'
);

$client = new nusoap_client(http://zzzz.WebService.asmx?WSDL',true);
$er = array('exportRequest' => $exportOptions);
$result = $client->call('ManageProcess', array('parameters' => $er)); 
```

**要求：**

POST /V1.2.5/ExportInterface/EMService.asmx HTTP/1.0 主机：dmr2.spe.sony.com 用户代理：NuSOAP/0.9.5 (1.123) 内容类型：text/xml；charset=UTF-8 SOAPAction：“http://WebService.zzz/ManageProcess”内容长度：1225

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2996="http://tempuri.org"><SOAP-ENV:Body><ManageProcess xmlns="http://zzzz.WebService.asmx"><exportRequest><Credentials><UserID>12345</UserID></Credentials><ApplicationID>1</ApplicationID><PictureIDs><long>1466020</long></PictureIDs><ExportType>40</ExportType><ExportOption>ALLOW_DOWNLOAD</ExportOption><EmailFrom>from@me.com</EmailFrom><RequireLogin>false</RequireLogin><RetainFiles>false</RetainFiles><PackageCompressionType>ZIP</PackageCompressionType></exportRequest></ManageProcess></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:34:15.400

您在这里有效地用另一个值覆盖了一个键“long”：

```
$create_export_request = array(
...
'exportRequest'=>array(
    'PictureIDs'=>array('long'=>1444431,'long'=>1466020), 
```

在发送之前查看该数组。您更有可能只是将它们添加到类似`'PictureIDs'=>array(1444431, 1466020)`或类似的数组中。希望有帮助。

# sphinx - 合并完成后如何运行 Sphinx 索引器？

> ID：12905617
> 
> 赞同：0
> 
> 时间：2012-10-15T23:51:10.150
> 
> 标签：sphinx

我已经设置了 4 个 CRON 作业来自动重新索引我的 Sphinx 索引，如下所示：

```
*/5 * * * /usr/bin/pgrep indexer || time /usr/local/sphinx/bin/indexer --rotate --config /usr/local/sphinx/etc/sphinx.conf ripples_delta
*/5 * * * /usr/bin/pgrep indexer || time /usr/local/sphinx/bin/indexer --rotate --config /usr/local/sphinx/etc/sphinx.conf users_delta
30 23 * * * /usr/bin/pgrep indexer || time /usr/local/sphinx/bin/indexer --config /usr/local/sphinx/etc/sphinx.conf --merge users users_delta --merge-dst-range deleted 0 0 --rotate
0 0 * * * /usr/bin/pgrep indexer || time /usr/local/sphinx/bin/indexer --config /usr/local/sphinx/etc/sphinx.conf --merge ripples ripples_delta --merge-dst-range deleted 0 0 --rotate 
```

上面显示了 pgrep，我希望在每个实例中都使用它来检查索引器是否已经在运行。我的目的是防止任何潜在的资源匮乏重叠。

前两个 Cron 作业每 5 分钟运行一次，并为我的两个主要索引更新 Delta 索引。

后两个每天运行一次（一个在晚上 11:30，另一个在上午 12 点），并将 delta 索引合并到它们的主要对应物中。

我的理解是，在这些索引合并之后，我需要在 delta 上重新运行索引，以便删除所有先前合并的数据，并基本上清理它们以准备第二天的索引。

如何确保合并完成后自动发生这种情况？显然，我可以再添加两个 cron 作业，但我需要在相关合并完成后立即执行它们。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:01:16.433

另一个相关的问题，你应该做

*/6 ... indexer --rotate users_delta 涟漪_delta

即在一个命令中更新两者。然后 indexer 建立两个索引，然后执行旋转。

通过两个并行过程，两个旋转最终可能会相互踩踏。

（同样对于 pgrep，这也意味着两个增量更新中的第二个不太可能是第一个，第一个总是刚刚开始）

也改说

34 23 * ...

即而不是“30”，这意味着与增量完全相同的时间发生。并且增量很可能已经开始，这意味着永远不会得到合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:32:18.603

创建一个小的 shell 脚本

1.  索引 delta
2.  将 delta 合并回主
3.  更新数据库以更新计数器标志（主要已更改，因此增量需要使用新计数器）
4.  再次重新索引 delta

作为一个 shell 脚本可以确保它们按顺序运行。

从技术上讲，也可能会错过 1)，因为另一个 */5 无论如何都会在最近运行。

无论如何，您还需要运行脚本来运行步骤 3)。斯芬克斯不能为你做到这一点。[http://sphinxsearch.com/bugs/view.php?id=517](http://sphinxsearch.com/bugs/view.php?id=517)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T10:12:59.083

也许更好的方法是创建一个小的“索引”守护进程。

例如

```
<?php

while (1) {
    if (filemtime('path_to_/ripples.sph') < time()-(24*3600)) {
        `indexer --rotate ripples_delta`;
        sleep(10);
        `indexer  --merge ripples ripples_delta --rotate`;
        mysql_query("UPDATE sph_counter ... ");
        `indexer --rotate ripples_delta`;

    } elseif (filemtime('path_to_/users.sph') < time()-(24*3600)) {
        `indexer --rotate users_delta`;
        sleep(10);
        `indexer  --merge users users_delta --rotate`;
        mysql_query("UPDATE sph_counter ... ");
        `indexer --rotate users_delta`;

    } else {
        `indexer --rotate ripples_delta users_delta`;
    }

    sleep(5*60);
    clearstatcache();
} 
```

这样，您只需让该脚本无限期地运行（我已经`screen`为此使用过。但更强大的解决方案是像 monit 之类的）。

它将确保一次只运行一个进程。照顾好所有的动作。如果索引需要更长的时间，那么它只会保持 5 分钟的间隔。

要非常聪明，可以运行 mysql 查询，检查 rippes 或用户表是否有更新。如果没有，甚至不要打扰运行索引器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T10:29:52.223

对于任何定期任务，我建议在脚本的开头创建一个锁定文件以避免重新进入并检查它是否存在于脚本开始时。

脚本包装器示例（也可用于定期 MySQL 备份）在这里：[http ://astellar.com/2012/10/backups-running-at-the-same-time/](http://astellar.com/2012/10/backups-running-at-the-same-time/)

# php - PHP：如何在没有 eval() 的情况下编写此代码

> ID：12905621
> 
> 赞同：3
> 
> 时间：2012-10-15T23:51:33.680
> 
> 标签：php, eval

> **可能重复：**
> [具有数组结构的字符串到数组](https://stackoverflow.com/questions/8537148/string-with-array-structure-to-array)

我在工作中有严格的禁止 eval() 政策，而且我很难在没有 eval() 的情况下编写此代码。

该解决方案需要使用其中包含任意数量的句点的 $location var。

如果没有 eval() 你将如何做到这一点

```
<?php 

$location = 'details.name.first';
$value = 'Tyler';

$data = array();
$data['details']['name']['first'] = 'Kevin';
$data['details']['name']['last'] = 'Jensen';
$data['details']['phone'] = '(434) 453-5331';

$parts = explode('.', $location);

$command = '$data';
foreach($parts as $part) {
    $command .= '["'.$part.'"]';
}
eval($command.' = $value;');

print_r($data); 
```

# javascript - 将位图字符转换为三角形

> ID：12905624
> 
> 赞同：3
> 
> 时间：2012-10-15T23:51:53.113
> 
> 标签：javascript, character, html5-canvas, webgl

我正在尝试使用 html 画布元素将字体文件中可用的每个字符绘制到画布上。为了使这个问题尽可能简单，假设只有一个角色被绘制到画布上。从那里，我想使用 Javascript 来分析画布并创建画布的三角形区域来构成整个角色。我需要在三角形中使用它的原因是，数据可以稍后发送到 WebGL，以便可以渲染文本，并且在放大或缩小文本大小时不会丢失数据。

我正在寻找某种算法来完成这个任务，或者至少需要一些知识来让我朝着正确的方向前进。如果您认为我应该使用不同的方法，请告诉我原因，但我认为这将是提供一种以多种方式修改文本以及使创建 3d 块文本成为可能的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:00:14.160

我建议您从关键字[Polygon Triangulation](http://en.wikipedia.org/wiki/Polygon_triangulation)开始。

使用这种方法，您可以将 n-Polygons 拆分为三角形，如下所示： ![图片来自上述维基百科-文章](../Images/0982c5de19481e84d3b8787fa0a892c6.png)

这些方法可能仅适用于具有真实（而非圆角）边缘的图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:25:18.153

这是一篇关于如何使用着色器绘制与分辨率无关的曲线的文章

[http://research.microsoft.com/en-us/um/people/cloop/loopblinn05.pdf](http://research.microsoft.com/en-us/um/people/cloop/loopblinn05.pdf)

我的理解不是将形状分解为三角形，而是将它们分解为四边形，并在顶点中排序足够的信息以在每个四边形内绘制曲线的一部分。换句话说，当着色器绘制每个四边形时，有一个公式可以针对每个像素计算该像素是在曲线内还是在曲线外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:01:02.727

那么，您正在尝试将光栅图像转换为矢量数据吗？当放大时，这将导致看起来非常参差不齐的几何图形。由于每个像素都被视为几何图形的方形边缘部分。

你不能为你正在绘制的每个字形获得原始矢量（贝塞尔曲线）几何图形吗？

将其转换为三角形条和风扇会看起来更平滑。

# mysql - 显示今天的当前排名和昨天的排名

> ID：12905627
> 
> 赞同：1
> 
> 时间：2012-10-15T23:52:11.320
> 
> 标签：mysql

我有一个包含 ID、排名、chart_date 和页面浏览量的表格。它基于每晚运行并编译该 ID 的综合浏览量的 cron 作业。

例如：

```
ID   |   RANK   |   PAGEVIEWS   |  CHART_DATE
5          1           100         2012-10-14
9          2           75          2012-10-14
13         3           25          2012-10-14
9          1           123         2012-10-13
5          2           74          2012-10-13
19         3           13          2012-10-13 
```

所以我根据 2012-10-14 抓取今天的图表，并按 1-3 对数据进行排名。但我也想显示 ID 在前一天的排名。

例如，在 2012 年 10 月 14 日，ID 5 排名第一，但在 2012 年 10 月 13 日，它排名第二。

我可以用一个查询来做到这一点吗？或者我是否必须遍历基于今天的结果并查询每个 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:04:06.780

> 我可以用一个查询来做到这一点吗？

可以，但是您需要在具有今天日期的表和具有昨天日期的表之间进行 JOIN：

```
SELECT today.*, yesterday.rank
    FROM yourtable AS today
    JOIN yourtable AS yesterday
        ON (today.id = yesterday.id
            AND today.chart_date = date(now())
            AND yesterday.chart_date = date(date_sub(now(), interval 1 day))
        )
    ORDER BY today.rank DESC; 
```

您甚至可以显示差异：

```
SELECT today.*, yesterday.rank AS yest, yesterday.rank-today.rank AS incr
    FROM yourtable AS today
    LEFT JOIN yourtable AS yesterday
        ON (today.id = yesterday.id
            AND today.chart_date = date(now())
            AND yesterday.chart_date = date(date_sub(now(), interval 1 day))
        )
    ORDER BY today.rank DESC;

ID   |   RANK   |   PAGEVIEWS   |  CHART_DATE  |  YEST  |  INCR
5          1           100         2012-10-14     2     |   1
9          2           75          2012-10-14     1     |  -1
13         3           25          2012-10-14     4     |   1 
```

（`LEFT JOIN`确保今天的数据存在，即使昨天的数据不存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:04:14.937

未经测试，但这样的事情应该可以工作：

```
select today.id, today.rank, yesterday.rank 
from mytable as today
left join mytable as yesterday on today.id = yesterday.id 
where today.chart_date = 2012-10-14
order by pageviews desc limit 3 
```

# c++ - 使用线程和 this_thread::yield 确定打印顺序

> ID：12905631
> 
> 赞同：1
> 
> 时间：2012-10-15T23:52:32.973
> 
> 标签：c++, multithreading, c++11, std

这正确地拉入了一个文本文件，但它没有以正确的顺序输出它，我需要一个线程来让出，但是当我尝试实现它时，它没有工作。每次程序运行时，它都会以随机顺序显示誓言和缺点，即使使用了 yield 函数。

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
#include <stdlib.h>
#include <thread>
#include <vector>
using namespace std;

void cons(string c){
//Prints consanants
cout <<"CONS:   " << c << endl;
this_thread::yield();

}

void vow(string v){
//Prints vowels
// allowing other ready threads to run
    this_thread::yield(); 
   cout <<"VOW:    " << v << endl;

}

int main() {
//Creates an array of 100
string words[100];
//Creates a starting point for i
int i = 0;
//string called x
string s;
//Takes in a file
ifstream inFile;
//Creates a vector of threads to print
vector <thread> PrintingThreads;
//Opens up the text file "phrase.txt"
inFile.open("phrase.txt");
//If It is not able to open the file
if (!inFile) {
//Display error message
   cout << "Unable to open specified file";
   //Exit with an error(1)
   exit(1); 
}
while (inFile >> s) {
words[i]=s;
i++;
}
//cycle 
for (int l=0; l<i; l++)
   {
   char first (words[l][0]);

   if ((first == 'a') || (first  == 'e') || (first  == 'i') || (first  == 'o') || (first  == 'u')||(first == 'A') || (first  == 'E') || (first  == 'I') || (first  == 'O') || (first  == 'U'))
       {
        /
       PrintingThreads.push_back(thread(vow,words[l]));

       }   

       else
       {

       PrintingThreads.push_back(thread(cons,words[l]));

       }
   }// loop with a range variable
   for (thread& t: PrintingThreads) 
       t.join();

   inFile.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:41:13.267

存在三个问题：

1.  你不能用它`this_thread::yield`来确定线程的执行顺序，因为在一个特定线程中调用它，虽然建议给其他线程优先级，但并不能*保证*直到所有其他线程都执行完才会返回当前线程完成的。根据标准（§30.3.2/2），它只是*为实现提供了重新调度的机会*，但在运行时由线程调度机制决定是否重新调度，以及何时重新调度返回到当前线程。

    因此，当遇到以元音开头的行时，可能会发生以下情况：a）它启动一个元音处理线程，b）执行立即切换到该线程并处理`yield`命令，c）实现有机会重新调度线程所以它切换回主线程，d）主线程处理另一行可能再次是元音行，e）为新行创建一个新线程，f）`yield`应用命令并且实现重新安排执行并切换到*另一个线程*, g) 实现选择第一行的尚未完成的元音线程，因此打印该元音，完成该线程， h) 然后实现切换回第二个元音线程并完成该线程（仍然在遇到任何辅音之前）， 等等。

    这只是事情发生的一种可能顺序。也可能发生第二个元音在第一个元音之前完成，或者它们都等到辅音线程开始并在两个元音线程之前完成。顺序不是由 决定的`yield`。

2.  *即使*using`yield`保证等到所有其他当前正在运行的线程都完成（它不是！），也会有两个问题：a）在执行元音线程时，任何未来的辅音线程都不会仍然存在，因为您一个接一个地创建线程，所以元音线程不会有任何等待，b）另一方面，当元音线程启动时，唯一保证存在的另一个线程是主线程；但是如果元音线程必须等到主线程完成，它就必须永远等待，因为主线程`join`最后包含一个命令，它迫使它等待元音线程。两个线程将在永恒的死锁中相互等待。

3.  在主程序结束时，您`join`按照线程插入向量的顺序执行命令。因此，即使我们假设这`yield`会导致一个线程等待，直到另一个线程用来`join`等待该线程（无论如何这是完全错误的假设），它仍然无法工作，因为辅音线程`yield`也包含一个语句，所以任何被连接的元音线程都必须等待跟随它的辅音线程（按照字符串的原始顺序）完成，他们不会因为他们的`join`命令还没有被调用。

If you want to guarantee the output to alternate between vowels and consonants (or, alternatively, to print all consonant lines followed by all vowel lines), the most straight-forward way is to do away with threads and simply put the incoming lines into two arrays (or vectors), one for vowel lines and one for consonant lines. At the end you can then easily determine the printing order, and it wouldn't consume more memory than it does already (given that you store all lines in the `words` array).

# sql - 从 sql RUBY/shoes GUI 获取 list_box

> ID：12905637
> 
> 赞同：4
> 
> 时间：2012-10-15T23:53:39.197
> 
> 标签：sql, ruby, shoes

我有一个问题如何在列表框中插入数据库中的列表

我尝试的示例

```
$row_user = $db.execute( "SELECT user FROM usuarios" )
$row_user.each do |row|
@users = list_box :items => [row[0]]
end 
```

但我知道他重复了很多列表框

试过了

```
@users = list_box :items => $row_user 
```

但返回值与`["user"]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:19:09.333

我用 green_shoes 试过这个，但它应该适用于任何颜色，只需将 flatten 添加到你的数组 $row_user

```
@users = list_box :items => $row_user.flatten 
```

这是一个工作样本

```
require 'green_shoes'

app = Shoes.app :width => 500, :height => 600 do
  users = [["peter"], ["joe"]]
  stack do
    users = list_box :items => users.flatten
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:58:46.130

得到它

```
edit_line $row_user.join 
```

为一个值

# visual-studio-2010 - Oracle 数据工具 (ODT) - 模式比较

> ID：12905648
> 
> 赞同：2
> 
> 时间：2012-10-15T23:55:03.370
> 
> 标签：visual-studio-2010, oracle, odt, schema-compare

我们想要对我们的 Oracle 模式进行源代码控制——因为我们的资产中有许多 SQL Server 数据库，我们想使用一个通用工具——对于 SQL Server 数据库，我们使用 Visual Studio 2010 / dbpro 很好地控制每个对象的源代码，集成到我们的 CI 环境中，并协助构建/部署到 UAT 和 Live。

我们想对我们的 Oracle 数据库做同样的事情，但是，从提供的工具来看，它们似乎与 VS2010 提供的功能一点也不相近——不再支持 VS2010 Toad 插件；我们正在试用 ODT（Oracle 数据工具）插件，但是我似乎无法找到如何生成 Oracle 数据库项目与目标 Oracle 实例的增量脚本（比较）——这似乎是一个相当基本的要求

有没有人有任何想法？这可能意味着我们可能需要将 VS2010 的源代码控制功能与 SQL Developer 等另一个工具的比较（生成增量脚本）结合起来。有没有人走这条路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:02:12.977

我没用过，但是 redgate 有 Oracle 的模式控制和源代码控制。 [http://www.red-gate.com/products/oracle-development/](http://www.red-gate.com/products/oracle-development/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:12:04.210

Oracle 出售变更管理包和配置管理包，它们作为企业版许可的收费附加品出售。是的，这是两种产品。好吧，即使是亿万富翁也不知道下一个热带岛屿世外桃源来自哪里:)

无论如何，如果您的项目有闲钱，您可以在[此处](http://www.oracle.com/technetwork/oem/grid-control/overview/change-management-pack-11gr2-datash-131286.pdf)和[此处](http://www.oracle.com/us/products/enterprise-manager/config-mgmt-overview-ds-068456.pdf)找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-10T14:22:40.027

[在Oracle 论坛](https://forums.oracle.com/thread/2551130)中找到此更新：

问题：

> 嗨，
> 我如何在 Oracle Developer Tools for Visual Studio 中进行模式比较？是否可以通过 ODT 的命令行或任何其他方式进行比较？

回答：

> 现在在 ODT 12.1 或更高版本中可用。
> 
> 这是一个演练：
> [http ://apex.oracle.com/pls/apex/f?p=44785:24:1995235124222:::24:P24_CONTENT_ID%2CP24_PROD_SECTION_GRP_ID%2CP24_PREV_PAGE:8210%2C%2C24](http://apex.oracle.com/pls/apex/f?p=44785:24:1995235124222:::24:P24_CONTENT_ID%2CP24_PROD_SECTION_GRP_ID%2CP24_PREV_PAGE:8210%2C%2C24)

**编辑：**

根据我的简要检查，它可以比较现有模式，但**不能**比较项目与数据库。

# html - 整个身体看起来像一个图像，但有文字

> ID：12905650
> 
> 赞同：1
> 
> 时间：2012-10-15T23:55:07.923
> 
> 标签：html, text, highlight

发生了什么事，我似乎无法找出它是什么。我的这个页面运行良好，然后有人进行了修改，突然间我无法突出显示任何文本。它的效果就好像我只想放图片而不是文字一样。 [这是](http://consultingfox.com/utp/index.html) 我没有发现任何重叠的网站，我没有 z-indexes..help？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:57:36.390

**样式.css**

```
::selection {
    background: transparent; 
}

::-moz-selection {
    background: transparent; 
} 
```

这使选择透明。所以看起来没有选择任何文本。

# python - ObjectListView 用逗号对整数进行排序和格式化？

> ID：12905651
> 
> 赞同：2
> 
> 时间：2012-10-15T23:55:10.113
> 
> 标签：python, sorting, csv, integer, objectlistview

我正在运行 Python 2.7，并且`ObjectListView`显示了大量人口统计信息。我可以让它正确排序，但输出以`100000.0`格式显示。当我使用语言环境模块将整数转换为字符串时，它会对降序字符串`9,181, 9,069, 818, 813, 8,730,`等进行排序。任何想法如何像整数一样排序，但将输出显示为逗号格式的`ObjectListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:37:10.713

您可以`yourColumn`使用它们的整数值而不是它们的显示字符串来排序：

```
yourColumn = ColumnDefn("Title", "center", 100, "title", stringConverter=int_to_string_with_commas) 
```

-*[查看更智能的字符串转换](http://objectlistview.sourceforge.net/python/gettingStarted.html#smarter-string-conversions)*。

.

`int_to_string_with_commas`将整数转换为字符串（带逗号）的函数在哪里：

```
import locale
locale.setlocale(locale.LC_ALL, 'en_US') # your locale here

def int_to_string_with_commas(value):
    return locale.format("%d", value, grouping=True) 
```

*对于其他写法，`int_to_string_with_commas`请参见[这个问题](https://stackoverflow.com/questions/1823058/how-to-print-number-with-commas-as-thousands-separators-in-python-2-x)。*

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:00:23.147

谢谢你让我走上正轨！最后，我只是在 ObjectListView.py 源代码中添加了两行。在第 3601 行附近，我将 _StringToValue 函数更改为包括：

```
 if converter == "%cd": ##New Line
        return locale.format("%d", value, grouping=True) ##New Line
    else:
     fmt = converter or "%s"
     try:
        return fmt % value
     except UnicodeError:
        return unicode(fmt) % value 
```

本地导入后还需要设置语言环境，如上图：

```
 locale.setlocale(locale.LC_ALL, 'en_US') 
```

谢谢，我一直在敲这个头一段时间了。干杯!

# jquery - 寻找模板或 jquery 插件来模仿 usatoday.com 整页滑块效果

> ID：12905653
> 
> 赞同：2
> 
> 时间：2012-10-15T23:55:15.250
> 
> 标签：jquery, slideshow

那里有一堆图像滑块，但我正在寻找 USAtoday.com 使用屏幕侧面的箭头转到上一页或下一页的东西。有谁知道任何类似的脚本或模板？

提前致谢

# php - IFrame 中的 PDF 在 Chrome 和 Safari 中不起作用

> ID：12905659
> 
> 赞同：1
> 
> 时间：2012-10-15T23:56:18.323
> 
> 标签：php, pdf, iframe, webkit

我正在使用目标是 iframe 的 HTML 表单。在此框架中，根据给定数据生成（使用 TCPDF）PDF，并应在 iframe 中显示。问题是，在带有内置 PDF 查看器的 Chrome 或 Safari 等 webkit 浏览器中，不会显示 PDF。相反，会显示一个非常深的灰色背景 - 至少有时是这样。在某些情况下，我无法弄清楚它是否有效。当我将 Firefox 与 Acrobat 一起使用时，它也可以工作。所以PDF不会损坏。不幸的是，我无法为我的问题提供一个示例，但是有人也遇到过这些问题，并且可以帮助我吗？

谢谢。

# tree - 父链接打开href

> ID：12905660
> 
> 赞同：0
> 
> 时间：2012-10-15T23:56:23.847
> 
> 标签：tree, parent-child

我有一个嵌套的树形菜单，目前，如果我点击一个有子节点的父节点，它会暴露子节点，

```
<ul id="menu" role="tree">

<li><a href="course/01_00_00_Getting Started.htm" target="ifrm">Getting Started</a>
  <ul>      
    <li><a href="course/01_00_00_Questions.htm" target="ifrm">Questions</a></li>
    <li><a href="course/01_01_00_Considerations.htm" target="ifrm">Considerations</a></li>
    <li><a href="course/01_02_00_Changing Perspective.htm" target="ifrm">Changing Perspective</a></li>
  </ul>
</li>
</ul> 
```

**但**我也希望父节点打开一个 href，而不仅仅是公开子链接。使用上面的示例，当我单击文本“入门”时，我希望随附的 href 打开页面（页面在 iframe 中打开）**并**在菜单中公开子链接。

我需要做些什么来整合这种双重功能？或者有人可以指出一个功能示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:08:24.833

将以下两行添加到点击处理程序`li`

`var anchor = ele.find('>a'); if(anchor.length > 0) { a.click(); }`

ele在哪里`$(evt.target)`

# go - 在 golang 中，将 http 表单数据加载到结构中的通用函数

> ID：12905661
> 
> 赞同：6
> 
> 时间：2012-10-15T23:56:41.473
> 
> 标签：go

在 Go 中，http 表单数据（例如来自 POST 或 PUT 请求）可以作为表单的映射来访问`map[string][]string`。我很难以可概括的方式将其转换为结构。

例如，我想加载如下地图：

```
m := map[string][]string {
    "Age": []string{"20"},
    "Name": []string{"John Smith"},
} 
```

变成这样的模型：

```
type Person struct {
    Age   int
    Name string
} 
```

所以我正在尝试编写一个带有签名的函数`LoadModel(obj interface{}, m map[string][]string) []error`，它将表单数据加载到一个接口{}中，我可以将其类型转换回一个人。使用反射，以便我可以在具有任何字段的任何结构类型上使用它，而不仅仅是一个人，并且我可以根据需要将字符串从 http 数据转换为 int、boolean 等。

使用golang中这个问题的答案[，使用reflect，如何设置struct字段的值？](https://stackoverflow.com/questions/6395076/in-golang-using-reflect-how-do-you-set-the-value-of-a-struct-field)我可以使用反射设置一个人的价值，例如：

```
p := Person{25, "John"}
reflect.ValueOf(&p).Elem().Field(1).SetString("Dave") 
```

但是我必须为我拥有的每种结构复制加载函数。当我为 interface{} 尝试它时，它不起作用。

```
pi := (interface{})(p)
reflect.ValueOf(&pi).Elem().Field(1).SetString("Dave")
// panic: reflect: call of reflect.Value.Field on interface Value 
```

在一般情况下我该怎么做？或者更好的是，有没有更惯用的 Go 方式来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T09:05:28.503

您需要针对一般情况进行切换，并相应地加载不同的字段类型。这是基本部分。

当您在结构中有切片时（然后您必须将它们加载到表单字段中的元素数量），或者您有嵌套的结构，它会变得更加困难。

我写了一个包来做到这一点。请参见：

[http://www.gorillatoolkit.org/pkg/schema](http://www.gorillatoolkit.org/pkg/schema)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T02:16:23.613

为了好玩，我试了一下。请注意，我作弊了一点（见评论），但你应该得到图片。使用反射和静态类型的分配通常是有成本的（比如 nemo 的回答），所以一定要在你的决定中权衡一下（虽然我没有对它进行基准测试）。

另外，很明显的免责声明，我没有测试所有的边缘情况等等。不要只是复制粘贴到生产代码中:)

所以这里是：

```
package main

import (
    "fmt"
    "reflect"
    "strconv"
)

type Person struct {
    Age    int
    Name   string
    Salary float64
}

// I cheated a little bit, made the map's value a string instead of a slice.
// Could've used just the index 0 instead, or fill an array of structs (obj).
// Either way, this shows the reflection steps.
//
// Note: no error returned from this example, I just log to stdout. Could definitely
// return an array of errors, and should catch a panic since this is possible
// with the reflect package.
func LoadModel(obj interface{}, m map[string]string) {
    defer func() {
        if e := recover(); e != nil {
            fmt.Printf("Panic! %v\n", e)
        }
    }()

    val := reflect.ValueOf(obj)
    if val.Kind() == reflect.Ptr {
        val = val.Elem()
    }

    // Loop over map, try to match the key to a field
    for k, v := range m {
        if f := val.FieldByName(k); f.IsValid() {
            // Is it assignable?
            if f.CanSet() {

                // Assign the map's value to this field, converting to the right data type.
                switch f.Type().Kind() {
                // Only a few kinds, just to show the basic idea...
                case reflect.Int:
                    if i, e := strconv.ParseInt(v, 0, 0); e == nil {
                        f.SetInt(i)
                    } else {
                        fmt.Printf("Could not set int value of %s: %s\n", k, e)
                    }
                case reflect.Float64:
                    if fl, e := strconv.ParseFloat(v, 0); e == nil {
                        f.SetFloat(fl)
                    } else {
                        fmt.Printf("Could not set float64 value of %s: %s\n", k, e)
                    }
                case reflect.String:
                    f.SetString(v)

                default:
                    fmt.Printf("Unsupported format %v for field %s\n", f.Type().Kind(), k)
                }
            } else {
                fmt.Printf("Key '%s' cannot be set\n", k)
            }
        } else {
            // Key does not map to a field in obj
            fmt.Printf("Key '%s' does not have a corresponding field in obj %+v\n", k, obj)
        }
    }
}

func main() {
    m := map[string]string{
        "Age":     "36",
        "Name":    "Johnny",
        "Salary":  "1400.33",
        "Ignored": "True",
    }
    p := new(Person)
    LoadModel(p, m)
    fmt.Printf("After LoadModel: Person=%+v\n", p)
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-16T00:18:06.357

我建议使用特定的接口，而不是`interface{}`你`LoadModel` 的类型必须实现才能加载的接口。

例如：

```
type Loadable interface{
    LoadValue(name string, value []string)
}

func LoadModel(loadable Loadable, data map[string][]string) {
    for key, value := range data {
        loadable.LoadValue(key, value)
    }
} 
```

并且您的`Person`实现方式如下：`Loadable``LoadModel`

```
type Person struct {
    Age   int
    Name string
}

func (p *Person) LoadValue(name string, value []string) {
    switch name {
    case "Age":
        p.Age, err = strconv.Atoi(value[0])
    // etc. 
    }
} 
```

例如，这就是`encoding/binary`包装或`encoding/json`包装工作的方式。

# algorithm - 给定二维点列表，找到最接近所有其他点的点

> ID：12905663
> 
> 赞同：7
> 
> 时间：2012-10-15T23:57:12.407
> 
> 标签：algorithm, language-agnostic

```
Input: list of 2d points (x,y) where x and y are integers.

Distance: distance is defined as the Manhattan distance. 
    ie:
    def dist(p1,p2) 
         return abs(p1.x-p2.x) + abs(p1.y - p2.y) 
```

什么是找到最接近所有其他点的点的有效算法。

我只能想到一个蛮力 O(n^2) 解决方案：

```
minDist=inf
bestPoint = null
for p1 in points:
    dist = 0
    for p2 in points:
        dist+=distance(p1,p2)
    minDist = min(dist,minDist)
    bestPoint = argmin(p1, bestPoint) 
```

基本上看每一对点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T00:28:26.327

请注意，在一维中，最小化到所有点的距离之和的点是中位数。

在二维中，问题可以解决`O(n log n)`如下：

创建一个排序的 x 坐标数组，并为数组中的每个元素计算选择该坐标的“水平”成本。元素的水平成本是到投影到 X 轴上的所有点的距离之和。这可以通过扫描阵列两次（一次从左到右，一次在相反方向）以线性时间计算。类似地，创建一个 y 坐标的排序数组，并为数组中的每个元素计算选择该坐标的“垂直”成本。

现在对于原始数组中的每个点，我们可以`O(1)`通过添加水平和垂直成本来计算所有其他时间点的总成本。所以我们可以计算 中的最佳点`O(n)`。因此总运行时间为`O(n log n)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T00:14:12.870

您正在寻找的是[质量中心](http://en.wikipedia.org/wiki/Center_of_mass)。

您基本上将所有 xs' 和 ys' 加在一起并划分为整个系统的质量。现在，你有质量均匀的粒子，让它们的质量为 1。

那么你所要做的就是将粒子的位置相加并除以粒子的数量。

假设我们有 p1(1,2) p2(1,1) p3 (1,0)

```
// we sum the x's 

    bestXcord = (1+1+1)/3 = 1

//we sum the y's 

    bestYcord = (2+1)/3 = 1 
```

所以 p2 是最接近的。

在 O(n) 中解决

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:23:48.857

从您的初始算法开始，可以进行优化：

```
minDist=inf
bestPoint = null
for p1 in points:
    dist = 0
    for p2 in points:
        dist+=distance(p1,p2)
        //This will weed out bad points rather fast
        if dist>=minDist then continue(p1)
    /*
    //Unnecessary because of new line above
    minDist = min(dist,minDist)
    bestPoint = argmin(p1, bestPoint)
    */
    bestPoint = p1 
```

这个想法是，尽可能快地丢弃异常值。这可以进一步改进：

*   使用启发式“内部”点启动 p1 循环（这会创建一个好的`minDist`第一个点，因此更差的点会被更快地丢弃）
*   使用启发式“外部”点启动 p2 循环（这使得`dist`上升速度更快，可能更快地触发退出条件

如果你用大小换取速度，你可以走另一条路：

```
//assumes points are numbered 0..n
dist[]=int[n+1]; //initialized to 0
for (i=0;i<n;i++)
  for (j=i+1;j<=n;j++) {
    dist=dist(p[i], p[j]);
    dist[i]+=dist;
    dist[j]+=dist;
  }
minDist=min(dist);
bestPoint=p[argmin(dist)]; 
```

它需要更多空间用于 dist 数组，但每个距离只计算一次。这具有更适合“获得 N 个最佳点”类型的问题和计算密集型度量的优势。我怀疑它不会为 x86 或 x64 架构上的 manhattan 度量带来任何好处：内存访问将在很大程度上主导计算。

# python - 当implicitly_wait 不起作用时使用find_element_by_link_text 的NoSuchElement 异常？

> ID：12905667
> 
> 赞同：2
> 
> 时间：2012-10-15T23:57:18.590
> 
> 标签：python, selenium, selenium-webdriver

python 和 Selenium 的新手以及相关的编程。

我正在尝试自动化 selenium 以点击特定链接。在这种情况下，我希望它点击与链接文本“B”关联的链接：

```
<li><a href="javascript:__doPostBack(&#39;ctl00$IndexControl1&#39;,&#39;B&#39;)">B</a> 
```

在这个网站上：

[http://www.lw.com](http://www.lw.com)

我正在使用这段代码：

```
def get_single_link_using_find_elements_by_link_name(url, link_name):
    driver = webdriver.Firefox()
    driver.get(url)
    driver.implicitly_wait(10)
    time.sleep(20)
    element = driver.find_element_by_link_text(link_name)
    element.click() 
```

我添加了一些等待条件，因为我认为问题可能是渲染问题，但它们没有帮助。

我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Python27\programs\selenium commands.py", line 50, in <module>
    get_single_link_using_find_elements_by_link_name(url, link_name)
  File "C:\Python27\programs\selenium commands.py", line 47, in get_single_link_using_find_elements_by_link_name
    element = driver.find_element_by_link_text(link_name)
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 237, in find_element_by_link_text
    return self.find_element(by=By.LINK_TEXT, value=link_text)
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 671, in find_element
    {'using': by, 'value': value})['value']
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 156, in execute
    self.error_handler.check_response(response)
  File "C:\Python27\lib\site-packages\selenium-2.25.0-py2.7.egg\selenium\webdriver\remote\errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
NoSuchElementException: Message: u'Unable to locate element: {"method":"link text","selector":"B"}' 
```

奇怪的是，相同的代码适用于以下网址，它是同一网站的一部分： [http ://www.lw.com/people?searchIndex=A](http://www.lw.com/people?searchIndex=A)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:20:50.370

1.  当我传递一个具有字母列表索引的页面时，您的代码对我有用。这意味着您将错误的变量传递给函数 - 您传入的页面没有名为 的链接`'B'`，简单明了。

2.  您可以通过调用来检查字母是否在页面上`driver.find_element_by_id("IndexControl1")`。 是包含字母事物 `IndexControl1`的名称。`id`

    ```
    alphabet = driver.find_element_by_id("IndexControl1")
    link_b = alphabet.find_element_by_link_text("B") 
    ```

3.  顺便提一下，如果您已经在选择了“B”的页面上，例如`http://www.lw.com/people?searchIndex=B&esmode=1`，字母 B 不会显示**为链接**`NoSuchElementException`，那么在这种情况下您最终也会得到 a 。

我认为这几乎涵盖了所有`NoSuchElementException`可能出现的情况。祝你好运。

# javascript - 匿名函数javascript，如何访问源代码？

> ID：12905671
> 
> 赞同：4
> 
> 时间：2012-10-15T23:57:48.217
> 
> 标签：javascript

我得到了一些进入随机匿名 js 函数的 JS 代码。我希望该代码（例如`alert('hello')`）转储/警告它被注入的整个脚本块/对象。

有点像 document.body.innerHTML 但对于匿名功能块

结果应该是这样的：

```
Function()({ somecode; MyAlert(...) } )() 
```

或者

```
Try { some code; mycode; } catch(e) { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-25T03:34:00.340

1.  注意你的条件。**“（浏览器）脚本块”字面意思是** [spec](http://www.w3.org/TR/html5/scripting-1.html#the-script-block%27s-type)的脚本元素的代码。使用“javascript 块”***或***“javascript 对象”来表示[块](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block) ***或***[对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects)。不要创造令人困惑的新术语；阅读和研究。

2.  块不是对象；它们是语言陈述。就像您无法“获取当前行的代码/变量”一样，**您无法“获取当前块的代码/变量”**，请尝试是否阻止。

3.  退后一步，现在您可以**使用[`Function.caller`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/caller)该函数来调用您的代码**：

```
var mycode = function me(){ if ( me.caller ) alert( me.caller.toString() ); };
(function(){ var some = 'code'; mycode(); })();
// Alert "function(){ var some = 'code'; mycode(); }", even when it is anonymous
```

> 请注意，您获得的是整个函数的代码，而不是不包括参数和函数名称的功能块代码。

4.  **Function.caller 将来可能会被删除**，例如[`arguments.caller`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments/caller). （都是麻烦。如果调用堆栈上的跨源函数包含私有api密钥代码怎么办？js引擎应该如何[内联](http://ariya.ofilabs.com/2013/04/automatic-inlining-in-javascript-engines.html)您的代码？）

    当时机成熟，或者**调用者为空**时（当它是全局代码时），您可能仍然可以获得**文本堆栈跟踪**（[`new Error().stack`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/stack)）和**当前脚本元素**（[`document.currentScript`](https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript)），但它们的功能非常有限。

    您可以使用其 textContent 或 innerHTML 属性获取脚本元素的代码（如果有）。

5.  你的问题听起来像一个[XY 问题](https://meta.stackexchange.com/a/66378)。你想做一些现代语言不应该做的事情，但永远不要说出于什么目的。 **试着描述你真正的问题。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:04:17.160

函数有`toString()`方法。（是的，函数有方法！）

```
var fn = function() { alert('hello') };
fn.toString() // "function() { alert('hello') };" 
```

所以你可以提醒它：

```
alert(fn.toString()); 
```

您可以将其记录到 js 控制台：

```
console.log(fn.toString()); 
```

甚至将其写入页面。

```
document.getElementById('someID').innerHTML = fn.toString(); 
```

* * *

然而，这并不适用于宇宙中的每一个功能。

```
[].push.toString()
"function push() { [native code] }" 
```

有些功能不是用javascript实现的，而是在浏览器或JS引擎的编译代码中实现的。对于这些环境提供的功能，您将获得上述不太有用的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T03:42:10.590

如果您**不是**在严格模式下，您可以使用（非标准）从可引用的东西（即命名函数表达式）上上堆栈[`.caller`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/caller)

```
function getFunctionReference(callback) {
    var ref = getFunctionReference.caller;
    if (callback) callback(ref);
    return ref;
} 
```

现在你可以做类似的事情

```
(function () {
    getFunctionReference(alert);
}());
// alerts the .toString of the IIFE 
```

这仅适用于*函数*，您不能在顶级代码上执行此操作。

* * *

探索代码的最佳方式实际上是使用*Console*，您可以使用[`debugger;`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger)语句或断点来准确跟踪正在发生的事情和时间。

# clojure - 如何在 leiningen 项目中打包资源

> ID：12905672
> 
> 赞同：6
> 
> 时间：2012-10-15T23:58:06.217
> 
> 标签：clojure, leiningen

在示例项目中，

[https://github.com/technomancy/leiningen/blob/master/sample.project.clj](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)

on `line 217`，有一个包含非代码文件的指令：

```
:resource-paths ["src/main/resource"] ; non-code files included in classpath/jar 
```

我的项目中有一个`resources`文件夹，我的 project.clj 中有这一行

```
:resource-paths ["resources"] ; non-code files included in classpath/jar 
```

但是，当我运行`lein jar`生成`.jar`文件时，它不会打包`resources`文件夹。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T00:10:52.540

实际上，它确实被打包了。我只是没有找对地方：

来自： [Clojure 应用程序中的资源](https://stackoverflow.com/questions/8009829/resources-in-clojure-applications?rq=1)

> 'Leiningen 借鉴了 maven 的资源约定，文件夹布局略有不同。该规则规定必须将资源文件夹用作编译时类路径根，这意味着 leiningen 将所有文件放入 jar 内根位置的资源文件夹中是正确的。

我认为将使用 jar 本身创建一个资源目录，但`lein jar`将资源目录中的所有文件复制到 jar 的根目录。

# rvm - Linux Mint 12 上的 RVM + Ruby 1.9.3 - 有没有办法缩短 shebang 线？

> ID：12905673
> 
> 赞同：0
> 
> 时间：2012-10-15T23:58:10.570
> 
> 标签：rvm, ruby-1.9.3, linux-mint

使用我的 RVM/Ruby 安装，我的 shebang 线是可怕的：

```
#!/home/kevin/.rvm/rubies/ruby-1.9.3-p286/bin/ruby 
```

有没有一种简单的方法来缩短它/使用别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:34:59.697

您是否在 RVM 本身生成或修改的脚本（例如 gems 中的可执行文件）中看到了这一点？如果是这样，我会保持原样；它没有伤害任何东西。

否则，您可以放入`#!/usr/bin/env ruby`自己的脚本，以使用任何给定时间恰好是最新的 Ruby；将它与选择正确的 RVM Ruby 的 .rvmrc 结合起来。

# ios - 将视图坐标映射到 CALayer 坐标

> ID：12905676
> 
> 赞同：2
> 
> 时间：2012-10-15T23:58:25.037
> 
> 标签：ios, xcode, core-animation, calayer

我有一个视图，其中包含一些（嵌套）层，它们根据对拥有视图的触摸进行自定义绘图。

鉴于

*   (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { UITouch *touch = [touches anyObject]; ……

我的视图是图层的代表，将收到一个回调以通过

*   (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context { ..

我需要获取我在 touches 方法中捕获和存储的点，并在图层的绘图中利用它们。但是，在我使用它们之前，需要将视图中捕获的坐标转换为图层坐标系。如何做到这一点？

谢谢皮特

# java - 如何删除数组中的最小值？

> ID：12905681
> 
> 赞同：2
> 
> 时间：2012-10-15T23:59:16.607
> 
> 标签：java, arrays

我正在尝试删除数组中的最小值。我已经遍历数组以找到最小值，但是当我尝试删除它时，我得到了这个：

```
 SportStacker.java:111: error: cannot find symbol
            times.remove(slowestTime);
                 ^
    symbol:   method remove(double)
    location: variable times of type double[]
    1 error 
```

据我所知，当我只想在给定索引处删除双精度时，我会告诉它删除双精度[]。我怎么说我想删除包含最小值的索引处的双精度数？这是我的方法的代码。

```
 public double removeSlowestTime() {

     double slowestTime;

     for (int i = 0; i < times.length; i++) {
        if (times[i] == 0) {
           continue;
        }
        else {
           if (slowestTime < times[i]) {
              slowestTime = times[i];
            times.remove(slowestTime);
           }
        }
     }
     return slowestTime; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:01:19.170

数组没有`remove()`方法，您可以使用`ArrayList`该值或将该值设置为某个默认值，例如

```
times[someIndex] = null; // put any valid default value based on your array 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:01:25.033

您尝试删除元素的方式似乎不正确。尝试

```
times = ArrayUtils.removeElement(times, slowestTime); 
```

如果您想做很多这样的操作，**Collection**或**ArrayList**可能是更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:01:51.843

您不能使用以下方法从双精度数组中删除元素：

```
times.remove(slowestTime); 
```

数组的大小是固定的，元素的数量一旦创建就不能改变。

您可以构建一个新`double`数组。您可以保存数组中最慢时间的位置：

```
slowestIndex = i;
... 
```

并在循环完成后创建新数组：

```
 double[] newTimes = new double[times.length - 1];
    for (int i=0, j=0; i < times.length - 1; i++) {
       if (i != slowestIndex) {
          newTimes[j++] = newTimes[i];
       }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T00:03:37.527

您不能调用`remove`数组，因为它不作为方法存在。没有简单的方法可以从数组中删除元素；我建议使用 的实现`java.util.List`，它提供诸如`remove`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T01:47:48.927

正如此答案中其他地方所提到的，与 JavaScript 和 Python 等语言不同，Java 中的数组在定义数组时定义了固定数量的元素。

```
int[] foo = new int[10]; // this array object will always have 10 elements
foo[0] = 42;
foo = new int[20];       // now foo refers to a different array
                         // object with 20 elements
return foo[0];           // so this will return the default int value, 0, not 42 
```

如果您正在寻找与数组相似类型的对象，请使用 ArrayList：

```
ArrayList<Integer> foo = new ArrayList<Integer>(); // this has zero elements
foo.add(42);                                      // now it has one
foo.add(8675309);                                 // now it has two
foo.remove(0);                                    // now you've removed the first
return foo.get(0);       // returns 8675309, because everything shifted over by one 
```

但是如果您需要经常从列表中删除*最低*的项目，并且您有很多项目并且性能很重要，那么您最好的选择是[`PriorityQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html). 这是一种始终按从小到大的顺序排列的数据类型。这意味着插入一个项目（`O(log n)`或与列表中项目数的对数成正比）需要更长的时间，但删除最少的项目（`O(1)`或无论列表有多长都是常数）会很快。相比之下，当使用列表时，添加一个项目（`O(1)`）将花费很短的时间，但在搜索最低的项目时您必须检查每个项目（`O(n)`）。

```
PriorityQueue<Integer> foo = new PriorityQueue<Integer>();
foo.add(300);
foo.add(100);
foo.add(200);
int a = foo.remove();  // 100
int b = foo.remove();  // 200
int c = foo.remove();  // 300 
```

# ruby-on-rails - 如何使用除seeds.rb 以外的文件播种

> ID：12905682
> 
> 赞同：3
> 
> 时间：2012-10-15T23:59:26.130
> 
> 标签：ruby-on-rails

在 Rails 中，可以使用 ? 以外的文件为数据库播种`db/seeds.rb`？

`rake db:reset`如在，是否有某种方法可以在运行时指定备用种子文件`rake db:reset --seedwith db/seeds2.rb`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:28:25.253

您可以使用环境变量将开关传递到seeds.rb，并相应地播种不同的数据。

```
SEED_DATA=set1 rake db:seed
SEED_DATA=set2 rake db:seed 
```

在种子.rb 中，

```
if ENV['SEED_DATA'] == 'set1'
  ...
elsif ENV['SEED_DATA'] == 'set2'
  ...
else
  ...
end 
```

# iphone - 从 UIView 呈现 UIImagePickerController（或任何视图控制器）

> ID：12905685
> 
> 赞同：0
> 
> 时间：2012-10-16T00:00:24.023
> 
> 标签：iphone, ios, uiview, uiimagepickercontroller, presentmodalviewcontroller

好的，所以我试图从`UIView`这样的视图中呈现一个视图控制器：

```
CSCamera *camera = [CSCamera cameraFromYamlNode:answer forView:view];
[view addSubview:camera.view]; 
```

现在我`CSCamera`的视图基本上是一个视图控制器，它对`UIImagePickerController`（自定义覆盖和事物）进行一些自定义管理。为了做到这一点，我有一个方法`showCamera()`被调用来在我添加 camera.view 作为子视图后以模态方式呈现选择器：

```
[camera showCamera]; 
```

但是我收到此错误：

```
Warning: Attempt to present <UIImagePickerController: 0x1eda8d90>  on <CSCamera: 0x2008e4d0> which is already presenting (null) 
```

我正在尝试做的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:50:19.330

你有一个很大的结构性问题。

```
CSCamera *camera = [CSCamera cameraFromYamlNode:answer forView:view];
[view addSubview:camera.view]; 
```

不支持添加属于不同视图控制器的子视图。我认为这是你所有问题的根源。

# web-services - 使用 Web 服务返回的 XML 更新磁贴通知

> ID：12905686
> 
> 赞同：0
> 
> 时间：2012-10-16T00:00:29.167
> 
> 标签：web-services, xaml, microsoft-metro

我有一个 C# & XAML 中的 Metro 应用程序。磁贴会定期更新，我使用 WebAPI 来提供磁贴通知 XML。到目前为止，一切都很好。然后我被告知我不能使用 WebAPI，因为我计划托管它的服务器没有 .NET 4.5。也没有计划很快安装它。我不得不将 WebAPI 更改为一个普通的旧 Web 服务 (.NET 3.5)，它做同样的事情 - 返回磁贴通知 XML。我已经启用了 HTTP-GET（我知道，安全问题）并且能够像这样调用 web 服务 -

```
http://server/TileNotifications.asmx/GetTileData?user=user@domain.com 
```

但是自从我进行切换后，图块就没有更新。我检查了 Fiddler 并确保应用程序正在访问 web 服务并且 XML 正在正确返回。但瓷砖没有更新。如果我用 WebAPI 替换它，磁贴就会更新。

我需要对 Web 服务做一些特别的事情吗？喜欢用自定义属性装饰 web 方法？这是我的网络服务代码 -

```
[WebMethod]
        public XmlDocument GetTileData(string user)
        {
           // snip

            var xml = new XmlDocument();
            xml.LoadXml(string.Format(@"<tile>
                                      <visual>
                                        <binding template='TileWideSmallImageAndText02'>
                                          <image id='1' src='http://server/images/{0}_wide.png'/>
                                          <text id='1'>Custom Field : {1}/text>
                                          <text id='2'>Custom Field : {2}</text>
                                          <text id='3'>Custom Field : {3}</text>
                                        </binding>
                                        <binding template='TileSquarePeekImageAndText01'>
                                          <image id='1' src='http://server/images/{0}_square.png'/>
                                          <text id='1'>Custom Field</text>
                                          <text id='2'>{1}</text>
                                        </binding>    
                                      </visual>
                                    </tile>", value1, value2, value3, value4));

            return xml;
        } 
```

# tfs - TFS 2012 构建“拒绝访问路径”

> ID：12905693
> 
> 赞同：67
> 
> 时间：2012-10-16T00:01:13.377
> 
> 标签：tfs, build, access-denied

我正在使用 TFS 2012 Build 并遇到错误

> 访问路径被拒绝

正在构建的解决方案包含大约 15 个项目，其中一些项目正在使用 Castle.Components.Validator.2.5.0 程序集。

我看过其他关于 TFS Build Access Denied 错误的帖子，但它们通常指的是同时运行构建。在这种情况下，一次只运行一个构建。此外，当服务器重新启动或构建有一段时间没有运行时，也会发生错误。

一旦构建运行并失败，下一个会成功，之后的每一个都会再次成功，直到构建有一段时间没有运行或服务器重新启动。虽然我们可以解决这个问题，但这是一个令人头疼的手动操作。

这是错误：

> C:\WINDOWS\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Common.targets (3513)：无法复制文件“D:\Builds\12\Foo\Check-In Build\Sources\packages\Castle.Components .Validator.2.5.0\lib\NET40\Castle.Components.Validator.dll”到“D:\Builds\12\Foo\Check-In Build\Binaries\Castle.Components.Validator.dll”。
> 
> 拒绝访问路径“D:\Builds\12\Foo\Check-In Build\Binaries\Castle.Components.Validator.dll”。

查看日志文件时，您可以看到构建正在尝试复制文件两次。因为第一个锁定了文件，所以第二个失败，因此构建失败。这是显示正在发生的事情的日志文件片段：

> 2>_CopyFilesMarkedCopyLocal：将文件从“D:\Builds\12\Foo\Check-In Build\Sources\packages\Castle.Components.Validator.2.5.0\lib\NET40\Castle.Components.Validator.dll”复制到“ D:\Builds\12\Foo\Check-In Build\Binaries\Castle.Components.Validator.dll”。
> 
> 5>_CopyFilesMarkedCopyLocal：将文件从“D:\Builds\12\Foo\Check-In Build\Sources\packages\Castle.Components.Validator.2.5.0\lib\NET40\Castle.Components.Validator.dll”复制到“ D:\Builds\12\Foo\Check-In Build\Binaries\Castle.Components.Validator.dll”。
> 
> 2>_CopyFilesMarkedCopyLocal：将文件从“D:\Builds\12\Foo\Check-In Build\Sources\packages\MvcContrib.Mvc3.FluentHtml-ci.3.0.96.0\lib\MvcContrib.FluentHtml.dll”复制到“D: \Builds\12\Foo\Check-In Build\Binaries\MvcContrib.FluentHtml.dll”。将文件从“D:\Builds\12\Foo\Check-In Build\Sources\packages\RhinoMocks.3.6\lib\Rhino.Mocks.dll”复制到“D:\Builds\12\Foo\Check-In Build\二进制文件\Rhino.Mocks.dll”。

任何有关如何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-04-14T20:20:54.687

正如其他人提到的，当使用公共目标目录执行多线程构建并且文件复制任务碰巧遇到与为不同项目运行的复制任务同时发生冲突时，会发生这种情况。

通常这会导致“文件被另一个进程使用”异常（由文件复制任务处理和重试），但有时文件操作会导致“访问被拒绝”异常。（我仍然不确定为什么）

有人建议您应该“解决重复问题”，但对于所有项目都需要直接引用 log4net 之类的库的情况，我认为这不可行。

显然，防止该问题的一种方法是使用`/p:BuildInParallel=false`or`/m:1`或`/maxcpucount:1`（或完全省略参数）显式运行 msbuild 以强制单线程模式。

**但是，在 TFS 2013**中，默认构建模板总是自动传递`/m`（使用所有内核）到 msbuild，它会默默地覆盖您可以手动传递的任何单线程设置。（由我自己的实验和检查诊断日志确定）

我尝试的另一个解决方法是手动传递`/p:AllowedReferenceRelatedFileExtensions=none`给 msbuild，这样可以防止从引用的库中复制所有 pdb 和 xml 文件。（因为有一段时间我只看到 xml 文件有这个问题。）但后来我一直遇到 log4net.dll 的问题。

我使用的最终解决方法是通过反编译源代码发现的`Microsoft.Build.Tasks.Copy`：

```
if (hrForException == -2147024891)
{
    if (!Copy.alwaysRetryCopy)
        throw;
    else
        this.LogDiagnostic("Retrying on ERROR_ACCESS_DENIED because MSBUILDALWAYSRETRY = 1", new object[0]);
} 
```

如果发生错误 -2147024891（0x80070005 访问被拒绝），复制任务将检查一个特殊变量以查看它是否应该重试。该值是通过环境变量设置的：

```
Copy.alwaysRetryCopy = Environment.GetEnvironmentVariable("MSBUILDALWAYSRETRY") != null; 
```

设置环境变量 MSBUILDALWAYSRETRY = 1（并重新启动构建服务器）后，问题就消失了。*而且*我还定期开始在构建日志中看到“Retrying on ERROR_ACCESS_DENIED ...”作为警告，证明设置正在生效，（而不是构建只是巧合成功）。

（请注意，此环境变量没有很好的文档记录，请酌情使用。）

**更新：**显然 TFS 2015 不再覆盖您的`/m:1`with `/m`（即使在旧版/XAML 构建定义上），这应该`/m:1`再次进行有效修复。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-16T00:30:26.510

看起来有两个项目在复制同一个文件。根据时间的不同，它们有时会同时发生，从而导致失败。您必须追溯节点 ID 才能找到源项目。有关更多详细信息和可能跟踪的代码，请参阅[http://blogs.msdn.com/b/buckh/archive/2012/01/21/a-tool-to-find-duplicate-copies-in-a-build.aspx](http://blogs.msdn.com/b/buckh/archive/2012/01/21/a-tool-to-find-duplicate-copies-in-a-build.aspx)给你。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-02T12:56:35.133

正如 Buck Hodges 和 Nimblejoe 所说，这主要是由于 TFS 默认运行多个 MSBuild 进程来构建您的项目。

*您可以在Process -> 3\. Advanced -> MSBuild Arguments*通过添加 MSBuild 参数**/p:BuildInParallel=false**在构建定义中覆盖它

 *** * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-24T18:11:56.240

如果您打开了构建代理的文件夹，也会发生这种情况。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-30T18:10:02.827

我也有同样的问题。我收到与无法复制相关的错误消息，因为访问路径被拒绝。在我的情况下，我所有的 dll 和 xml 文件等都放在 D:\TFS\Example\Bin\Debug 文件夹中。

我右键单击 Bin 文件夹并单击属性并看到只读复选框在属性下被选中。

我取消选中只读复选框并单击应用并在显示的新弹出窗口上单击确定。

我回到 Visual Studio 并构建了我的解决方案，它给了我错误消息。

瞧……这一次它成功构建而没有错误。

我不知道这是否完美，但我这样做是为了解决我的问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-13T16:32:00.307

要解决此问题，我必须删除源目录上的“ReadOnly”标志

[![只读](../Images/27a7b3aa75f2b90975e802184bb739f7.png)](https://i.stack.imgur.com/uyyKE.jpg)

然后在构建定义集Clean Workspace

[![工作区](../Images/0f745933490320b0c69c337037367038.png)](https://i.stack.imgur.com/aLrfg.jpg)

**无**_

 **[![在此处输入图像描述](../Images/87b5fcbb770ca8b1308c9a27196007ca.png)](https://i.stack.imgur.com/C1XFY.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-17T13:47:32.230

像 Ziggler 一样，我通过删除项目中 bin 文件夹的“只读”属性来解决这个问题。它只发生在存储在 /packages/ 目录中的 XML 文件上，该目录对于包含此项目的解决方案是通用的。“bin”文件夹未检入源代码管理。我仍然对问题的根本原因感到困惑。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-24T05:15:22.950

我发现在构建尝试覆盖它在先前尝试构建时创建的“工作目录”中的文件后发生的相同问题。（在代理中设置）

我通过在尝试构建之前手动删除它创建的输出文件夹（在我的情况下为 [Working Directory]\Binaries）解决了这个问题。

这可以通过更改构建定义自动完成。在**Process** --- **2.Basic** --- **Clean Workspace**下将其设置为***Outputs***选项

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-20T15:37:29.810

这是我必须处理的这个问题的一个变体：

我无法弄清楚为什么我的构建总是因为“拒绝访问路径”错误而失败，即使我已经在我的 XAML 构建的 MSBuild Arguments 中添加了`/p:BuildInParallel=false`和之类的东西。`/p:OverwriteReadOnlyFiles=true`原因原来是我的项目属性中的“**构建后事件命令行**”。

改变后

```
%WinDir%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe[SNIP] 
/P:Configuration=$(ConfigurationName);[SNIP] 
;AutoParameterizationWebConfigConnectionStrings=false 
```

到

```
%WinDir%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe[SNIP] 
/P:Configuration=$(ConfigurationName);[SNIP]
;AutoParameterizationWebConfigConnectionStrings=false;OverwriteReadOnlyFiles=true 
```

错误消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-15T08:28:10.730

一种可能的原因是，如果您将类库的`bin`或文件夹签入到 TFS 中。`obj`如果是这种情况，从 TFS 中删除项目的 bin 或 obj 文件夹将解决此问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-13T14:42:23.337

我遇到了这个问题并选择忽略它，因为我不想为了摆脱 NuGet 的一些良性错误消息而牺牲构建性能。但是，我似乎在尝试解决另一个问题时偶然发现了一个解决方案，我认为这是相关的。我认为 NuGet 包的获取顺序与解决方案中项目的构建顺序有关。因此，如果这以某种方式变得脱节，那么在您遇到构建错误之前，NuGet 可能是第一个受害者，您开始收到“找不到元数据文件'XXX.dll'”错误，这烦人地要求您再次构建，直到构建成功（如此[处](https://stackoverflow.com/q/1421862/197591)所述）。

因此，我认为解决方案是按照上述问题的公认答案中描述的步骤进行操作。或者，按照[备选答案之一中](https://stackoverflow.com/a/23475616/197591)更全面的步骤进行操作。换句话说，禁用所有项目的构建，重新启动 VS，然后重新启用所有项目的构建。这将（通常）解决构建顺序。这应该有望解决 NuGet 问题。请让我知道这是否可以为任何人解决。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-27T15:16:31.353

我在使用 TFS 2015 时遇到了这个问题。原来是因为构建代理在默认（网络服务）凭据下运行，该凭据对目标文件夹没有写权限。一旦我删除了代理并使用凭据重新安装它，它就可以工作了。它确实让我浏览了一段时间的日志，检查和取消选中多进程框，甚至在我的搜索中重新启动构建服务器。首先检查明显的东西......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-19T08:33:33.297

对我来说，构建代理不是在管理员 powershell 中启动的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-11T06:14:24.610

MSBuild 参数：- /tv:14.0 /t:Rebuild /m:1 /p:RunCodeAnalysis=false /p:TreatWarningsAsErrors=false /p:OverwriteReadOnlyFiles=true /p:BuildInParallel=false /p:AllowedReferenceRelatedFileExtensions=none

**强文本**

1.  将 false 设置为清理工作区
2.  转到构建代理并从映射文件夹中删除只读。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-10-17T05:03:04.780

正如很多人之前已经说过的那样，在并行构建项目时会发生这种情况。项目 A 和 B 都引用第 3 方库 C（本地复制）将在同时构建时导致此问题 - 并排。

真正的问题是，TFS Build 2012 及更低版本配置为在构建解决方案时，将解决方案的整个输出复制到单个文件夹。这就是并行构建的痛苦所在。

自 TFS 2013 起，您可以通过将构建定义中的“输出位置”设置为“PerProject”来轻松解决此问题。这会强制构建服务的行为类似于本地 msbuild 运行，其中有关输出位置的设置是从相应的项目文件中读取的。因此输出被写入每个项目下的 bin 文件夹。

对于 TFS 2012 及以下版本，本文（+链接文章）将帮助您获得与 TFS 2013 相同的结果：

[http://blog.stangroome.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/](http://blog.stangroome.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/)

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2014-11-06T03:14:32.473

我通过关闭所有打开的 Visual Studio 实例、重新打开解决方案并再次构建它解决了一个非常类似的问题。****

# sql - SQL Server - 查询以返回具有多个不同记录的组

> ID：12905699
> 
> 赞同：1
> 
> 时间：2012-10-16T00:01:38.453
> 
> 标签：sql, sql-server-2008, tsql

我的桌子：

```
Col1    Col2
1       xyz
1       abc
2       abc
3       yyy
4       zzz
4       zzz 
```

我有一个有两列的表。我想查询 col1 具有多个 DISTINCT col2 值的记录。在上面给出的示例表中，查询应返回值为“1”的 col1 的记录。

预期查询结果：

```
Col1    Col2 
1       xyz 
1       abc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:03:18.857

```
SELECT *
FROM tableName
WHERE Col1 IN
(
    SELECT Col1
    FROM tableName
    GROUP BY Col1
    HAVING COUNT(DISTINCT col2) > 1
) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/3abad/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:05:56.123

```
select t.col1, t.col2
from (
  select col1
  from tbl
  group by col1
  having MIN(col2) <> MAX(col2)
) x
join tbl t on t.col1 = c.col1 
```

# php - 连续循环遍历 PHP 数组（或对象键）

> ID：12905700
> 
> 赞同：1
> 
> 时间：2012-10-16T00:01:47.173
> 
> 标签：php, arrays, object, foreach, continuous

我有一系列对象键：

```
 $this->rules->days->mon = isset($this->recurring_event_data['post_ar'][$this->rules->type]['mon']) ? true : false;
            $this->rules->days->tue = isset($this->recurring_event_data['post_ar'][$this->rules->type]['tue']) ? true : false;
            $this->rules->days->wed = isset($this->recurring_event_data['post_ar'][$this->rules->type]['wed']) ? true : false;
            $this->rules->days->thu = isset($this->recurring_event_data['post_ar'][$this->rules->type]['thu']) ? true : false;
            $this->rules->days->fri = isset($this->recurring_event_data['post_ar'][$this->rules->type]['fri']) ? true : false;
            $this->rules->days->sat = isset($this->recurring_event_data['post_ar'][$this->rules->type]['sat']) ? true : false;
            $this->rules->days->sun = isset($this->recurring_event_data['post_ar'][$this->rules->type]['sun']) ? true : false; 
```

我有这个功能：

```
function calc_next_weekly_interval($ii,$i)
{
         global $array;
    // we will roll through this->rules->mon,tue,wed,thu,fri,sat,sun. If its true, return the new iii value, if not keep looping through the array until we hit true again.
    $cur_day = strtolower(date('D',$ii));

    $found_today = false;

    // our initial start date
    $iii = $ii;             

    foreach($this->rules->days as $day => $value)
    {
        if($found_today == true && $value = true)
        {
            return $iii
        }
                    // need to find the current day first!
        if($day == $cur_day)
        {
            $found_today = true;
        }

        $iii + SECS_PER_DAY;            
    }
} 
```

都好。注意我试图从当天找到下一个真实的日子。问题是当我使用星期日作为初始 cur_day 进行搜索时，显然 foreach 循环将在找到真正匹配之前停止。如何连续循环遍历数组（或对象键）？我应该将循环放在一个新函数中并继续使用新的开始日期调用它吗？我不想添加额外的数组键->值，因为它会影响以后的事情，我考虑过只在这个函数中添加到初始数组（这里的例子，数组被编码以供参考，但在我的类中 - 它当然是 obj 键-> 值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:06:17.230

如果你想不断循环，你可以使用

```
$infinate = new InfiniteIterator(new ArrayIterator($array));
foreach ( $infinate as $value ) {

    // Do your thing
    // Remember to break

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:06:33.790

怎么样

```
foreach($this->rules->days as $day => $value)
{ 
    if($day == $cur_day)
    {
        $set = true;
    }

    $iii + SECS_PER_DAY;

    if($found_today == true && $value = true)
    {
        return $iii
    }
                // need to find the current day first!

} 
```

# google-maps-api-3 - Google Maps API v3 - 轻微失真（白色/灰色条纹）

> ID：12905702
> 
> 赞同：0
> 
> 时间：2012-10-16T00:01:56.333
> 
> 标签：google-maps-api-3

[我在我们的网站http://wallawalla.tk/services](http://wallawalla.tk/services)上设置了 Google Maps v3我遇到了一个轻微的失真问题。也就是说，如果您非常精确地查看地图，您会看到随机出现“白/灰条纹”。最重要的是在地图的最左侧，尤其是在打开 InfoWindows 时分别关闭它们。似乎“白色/灰色条纹”在某种程度上与 InfoWindow 的边框相关，即似乎如果其中一个边框没有出现（大部分时间在相应 InfoWindow 的最左侧），则是出现在信息窗口附近甚至穿过信息窗口的随机“白色/灰色条纹”。不幸的是，这不是 100% 可重现的，这让我更加怀疑。请尝试打开/关闭一些 InfoWindows 以实际查看它。我想这与我们的 CSS 有某种关系。我读了很多关于相关扭曲的文章，但似乎没有什么适合我的具体情况。地图本身最左侧的“白色/灰色条纹”几乎可以 100% 尝试重现。所有“白色/灰色条纹”的宽度均为 1 像素，如果您平移地图或将其滚动并返回浏览器窗口的视口，它们就会消失。我正在使用 Google Chrome 22.0.1229.79/Webkit 进行测试。

似乎不影响 FF11.0/Gecko。刚刚尝试过，虽然 Chrome 显示了描述的行为，但 FF 没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:02:34.297

我的猜测是它是由 OverlappingMarkerSpiderfier 引起的。您能否在不使用 OMS 的情况下构建一个显示您的分数和 InfoWindows 的简单测试，看看您是否还有问题？

# python - 简单的基本 Python 比较

> ID：12905707
> 
> 赞同：1
> 
> 时间：2012-10-16T00:02:41.423
> 
> 标签：python, types, numbers, compare

我在做功课时发现了这个有趣的问题，我们知道，`47.36/1.6**2 == 18.5`

但是当我尝试运行以下代码时，它给了我一个 False（应该是真的）

打印`47.36/1.6**2 == 18.5`

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:03:57.523

您可能会得到类似 18.49999999999 的答案，它并不*完全*等于 18.5。

与往常一样，相关参考资料是[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:08:45.630

简短回答：IEEE 754 浮点不能准确表示分母不是 2 的幂的分数，例如 1/4、1/16、1/256 等。如果有足够的数字，您可以非常接近，但是从来没有完全在那里。

您可以通过将“等于”定义为“在某个增量内”来比较浮点数。你可以这样写：

```
def almost_equals(a, b, delta=0.0005):
    return abs(a - b) <= delta 
```

然后用以下方法测试“可能相等”：

```
>>> almost_equals(47.36/1.6**2, 18.5)
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:05:33.837

```
>>> 47.36/1.6**2
18.499999999999996 
```

[请参阅此页面上的浮点算术：问题和限制](http://docs.python.org/tutorial/floatingpoint.html)。

以下是如何通过使用[小数](http://docs.python.org/library/decimal.html)模块`18.5`在不使用任何舍入或“足够接近”的行为的情况下精确计算：

```
>>> from decimal import Decimal
>>> Decimal('47.36') / Decimal('1.6')**2 == Decimal('18.5')
True
>>> float(Decimal('47.36') / Decimal('1.6')**2) == 18.5
True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T00:11:35.853

在比较两个浮点数时，我会避免检查是否完全相等。取而代之的是，看看它是否小于您认为接近零的值。

(47.36/1.6**2 - 18.5) < 0.00000000001

将会

真的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T00:12:39.737

正如其他人所说：

```
>>> 47.36/1.6**2
18.499999999999996 
```

但是，据我所知，这不是由于浮点算术问题。即使您通过将操作数包装在`Decimal()`（之后`from decimal import Decimal`）中来使用十进制数学，您仍然会得到`Decimal('18.49999999999999772404279952')`答案。

我可能在`Decimal()`这里用错了，我的结果也有某种浮点错误；`18.5`但是，如果我是正确的，那么无论您使用哪种数学，该表达式都不等于。

**编辑：**正如格雷格在评论中指出的那样，我的方法的问题是 Decimal(1.6) 只会将 1.6 的浮点表示（不准确）转换为 Decimal。这给出了正确的答案：

```
>>> Decimal('47.36') / Decimal('1.6')**2
Decimal('18.5') 
```

更好的是使用Kirk 建议的[分数模块。](http://docs.python.org/library/fractions.html)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-16T00:04:16.520

47.36/1.6* *2 返回整数。所以 47.36/1.6* *2 将是 18，不等于 18.5。

**编辑**

很抱歉，实际上它被存储为 18.499999。
你应该做这个

`import numpy as np
print np.around((47.36/1.6**2), decimals=1) == 18.5`

这将返回 True。

# ant - Jenkins 在 Windows 上使用 ant 以外的东西

> ID：12905709
> 
> 赞同：-2
> 
> 时间：2012-10-16T00:03:07.967
> 
> 标签：ant, window, jenkins

我正在考虑在 Windows 上使用 Jenkins。我目前有一个蚂蚁脚本。它工作得很好。除了例如，当构建由于语法错误而中断时，我在 Jenkins 控制台日志中看不到错误。

所以我在想可能是 ant 不是在 Windows 上使用的最佳工具。你们大多数人在 Windows 上为 Jenkins 使用什么？

如果是 ant，如何将构建输出 VStudio 发送到 Jenkins 控制台？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:06:16.303

我主要将 Jenkins 与[maven](/questions/tagged/maven "显示标记为“maven”的问题")项目一起使用，尽管无论如何您都应该在在线日志中看到 ANT 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:18:08.887

你在建什么？您正在构建 Java 项目吗？蚂蚁就是你使用的。如果你正在构建一个 C 项目，你应该使用 Make。如果您正在构建 VisualStudio 项目，则应使用 msbuild。您为您的项目使用构建工具。詹金斯将毫无问题地执行它们。

看看有问题的构建。在屏幕的左侧，有一个控制台输出项。点击那个。有没有输出。无论您使用什么工具，Jenkins 都会在该控制台输出中捕获 STDOUT 和 STDERR。如果不出意外，您应该会看到 Jenkins 执行结帐和构建项目的确切命令。尝试执行这些命令。

尽管如此，你并没有给我们太多继续前进的机会。不知道您正在构建什么或使用 Ant 做什么。您没有说明任何错误、控制台输出，甚至没有说明 Jenkins 错误日志所说明的内容。

詹金斯做了两件事：

*   它监视您的存储库以进行更改。
*   一旦它检测到更改，它就会执行您为构建项目而执行的命令。

Jenkins 不在乎你是使用 Ant、Maven、Make，还是仅仅做一个`del /s/q`. Jenkins 将简单地执行您告诉它执行的命令。

* * *

### 附录

> 它是 c、c++、Java 和 InstallShield。我用ant做文件复制和移动，调用msdev.exe项目。一些 Javac 调用，InstallShield 命令行构建..

Jenkins 可以在单个作业中执行多个步骤构建。指定构建步骤后，您可以按**添加**按钮添加另一个构建步骤。没有理由甚至所有构建步骤都必须属于同一类型。只需选择“自由式”构建，并使用正确的构建工具来完成这项工作。

Jenkins 中有一个可选的[MSBUILD 插件](https://wiki.jenkins-ci.org/display/JENKINS/MSBuild+Plugin)，应该可以进行 MS 构建。这应该为您提供 MSBuild 的完整输出，因此您可以看到任何错误。

完成 MSBuild 步骤后，您可以创建**第二个**构建步骤来运行 Ant 任务来构建您的 InstallShield。之后，您可以在命令行上或通过 Ant（或[Nant](http://nant.sourceforge.net/) .

无论各种工具的输出是什么，您都会在构建控制台中获得输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T23:22:55.010

dev.cmd 显示输出，我继续使用 ant。

# iphone - NSURL 请求不起作用

> ID：12905711
> 
> 赞同：0
> 
> 时间：2012-10-16T00:03:21.037
> 
> 标签：iphone, uiwebview, ios6, nsurl

我正在构建一个可以通过我的应用程序运行网站的应用程序。基本上是webView。自上次 xCode 更新以来，到目前为止我没有遇到任何问题。它基本上可以正常运行，但不能在 iOs 6 模拟器或设备上运行。

.h 文件：

```
@interface ViewController : UIViewController{
    IBOutlet UIWebView *nView;
} 
```

.m 文件：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL * myURL = [NSURL URLWithString:@"http://www.google.com"];

                     NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];

                     [nView loadRequest:myRequest];

} 
```

如果有人可以提供帮助，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:39:33.747

我设法让它工作！

.h 文件：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIWebView *myWebView;

@end 
```

.m 文件：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url =[NSURL URLWithString:@"http://www.google.com"];
    NSURL*request = [NSURLRequest requestWithURL:url];
    [[self myWebView]loadRequest:request];
} 
```

我在 h 文件中包含了一个属性，并且经过一些研究，我也得到了 .m 文件。虽然我有一个问题说：

> 不兼容的指针类型将“NSURL *__strong”发送到“NSURLRequest *”类型的参数

任何人都可以帮助解决这个问题吗？

# php - 在 PHP 中获取从当前目录向上三层的文件路径

> ID：12905714
> 
> 赞同：0
> 
> 时间：2012-10-16T00:03:43.763
> 
> 标签：php, file

我正在尝试从我的工作目录访问三个级别的文件夹`file_put_contents()`。这是我的工作目录。

```
Users/myMac/Sites/mini-configurator/miniconfig/application/controllers 
```

我需要进入“mini-configurator”文件夹，然后进入名为“mc”的子文件夹。我可以在 PHP 中使用`dirname(__FILE__)`. 我如何使用它来访问迷你配置器文件夹。

我试过`dirname('../../../ . __FILE__)`了，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:06:34.107

你试过了吗

```
$path = dirname(__FILE__)."/../../../"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T14:20:27.847

最近处理了这个问题，我发现了类似的东西：

```
$path = dirname(dirname(dirname(__DIR__)));
```

更容易阅读。YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:40:25.217

只需使用绝对目录结构：

```
$path = $_SERVER["DOCUMENT_ROOT"] . "/../.../...."; 
//in the quotes just set it to the path from the root directory 
```

# progress-4gl - Progress 4GL - 中的 Enumerable.Take(TSource) 方法

> ID：12905717
> 
> 赞同：0
> 
> 时间：2012-10-16T00:04:08.353
> 
> 标签：progress-4gl, openedge

提前感谢您查看此问题！

这一切都在 FOR EACH 循环的上下文中，该循环可能会变得很长 - 想想 100,000 条记录 - 我正在寻找一种方法从该结果集中的某个位置获取 n 条记录，例如 start @ 4000 并获取接下来的 500 条记录。

我在 ABL 参考中四处寻找关键字，例如：

*   位置
*   展望
*   RECID - 我们是否可以在第 n 个位置找到 RECID
*   查询调优

到目前为止还没有运气。有没有提示的聪明人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:13:07.767

这是我针对体育数据库创建的示例。体育数据库是一个示例数据库，类似于 SQL Server 中的 AdventureWorks 数据库。

这应该让你开始：

```
def var v-query as char   no-undo.
def var h       as handle no-undo.

/* Here is where can set a dynamic query */
assign v-query = "for each orderline no-lock".

/* Create handle used for query */
create query h.

/* Set the table against the query so you can access it conveniently */
/* If you have other tables in your "for each", simply do a          */
/* set-buffers on each table */
h:set-buffers(buffer orderline:handle).

/* Prepare Query */
h:query-prepare(v-query).

/* DO Open */
h:query-open.

/* Setup query to row 10 */
h:reposition-to-row(10).

LINE_LOOP:
repeat:

   /* Read next row */
   h:get-next.

   /* Check if we are not past the end */
   if h:query-off-end then leave LINE_LOOP.

   /* Since we added orderline as a buffer we can now use it here */
   disp orderline.ordernum
        orderline.linenum
        orderline.itemnum
        orderline.price
        orderline.qty.

end. /* repeat */

h:query-close. 
```

仅供参考，[进度知识库](http://progresscustomersupport-survey.force.com/ProgressKB/ProgressKBHome)和[PSDN](http://communities.progress.com/pcom/community/psdn)有很好的示例和教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:05:54.517

其他示例 - 填充数据集表 - BATCHING

```
DEFINE TEMP-TABLE ttOrder LIKE Order.
DEFINE DATASET dsOrder FOR ttOrder.

/* you can set a buffer object */
/*DEFINE DATA-SOURCE srcOrder FOR Order.*/

/* or you can set a query */
DEFINE QUERY qOrder FOR Order SCROLLING.
QUERY qOrder:QUERY-PREPARE ("FOR EACH Order").
DEFINE DATA-SOURCE srcOrder FOR QUERY qOrder.

BUFFER ttOrder:ATTACH-DATA-SOURCE( DATA-SOURCE srcOrder:HANDLE ).

/*The maximum number of ProDataSet temp-table rows to retrieve in each FILL operation.*/ 
BUFFER ttOrder:BATCH-SIZE = 10\. 

/* Empties the table before the FILL operation begins. 
Without setting this attribute will next rows append to existing in temp-table */
BUFFER ttOrder:FILL-MODE = "EMPTY".  

/* first time - result 1 - 10 */
DATASET dsOrder:FILL ().

FOR EACH ttOrder:
  DISPLAY ttOrder.ordernum.
END.  

/* set the startpoint to position 11 */
DATA-SOURCE srcOrder:RESTART-ROW = 11.

/* second time 11 - 20 */
DATASET dsOrder:FILL ().

FOR EACH ttOrder:
  DISPLAY ttOrder.ordernum.
END. 
```

# ssl - 命令 heroku ssl 说我的域没有安装证书

> ID：12905722
> 
> 赞同：4
> 
> 时间：2012-10-16T00:04:28.527
> 
> 标签：ssl, heroku

我只是想说这通常不是我做的事情，但我最近一直在负责它......我已经密切关注[heroku 文档来设置 SSL](https://devcenter.heroku.com/articles/ssl#customdomain-ssl)，但我仍然遇到问题。

我已使用以下命令将我的证书添加到 heroku：

```
heroku certs:add path_to_crt path_to_key 
```

这部分似乎工作。我收到一条消息说：

```
Adding SSL Endpoint to my_app ... done 
```

我还为我的托管服务设置了一个 CNAME，以指向与上面的 cert 命令关联的端点。但是，当我浏览到该站点时，我仍然收到 SSL 错误。它说我的证书不受信任并指向 *.heroku.com 许可证，而不是我刚刚上传的许可证。

我注意到当我执行以下命令时：

```
heroku ssl 
```

我收到以下信息：

```
my_domain_name has no certificate 
```

我的假设是此时应该有一个与该域相关联的证书。

有任何想法吗？

编辑：看来我没有等待足够长的时间让证书内容通过互联网传播......但是，我关于“heroku ssl”命令的问题仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T16:33:59.857

Heroku`ssl`命令用于旧证书：

```
$ heroku ssl -h
Usage: heroku ssl

 list legacy certificates for an app 
```

您需要的命令`heroku certs`将输出该项目的相关证书信息。

# javascript - 如何在 Chrome 扩展中的函数之间发送变量？

> ID：12905725
> 
> 赞同：0
> 
> 时间：2012-10-16T00:04:45.687
> 
> 标签：javascript, google-chrome-extension

我刚开始构建一个 Chrome 扩展程序，但我不确定一切是如何工作的。我想在一个方法（getTabs）中获取一串数据，然后将其返回给调用它的方法。此代码调用 getTabs 创建一个字符串并尝试返回它。

```
function emailTabs() {  
chrome.tabs.getAllInWindow(null, getTabs);
console.log(data); //this is never able to access the string
}

function getTabs(tabs) {
  var data='';
  //build up data... 
  console.log(data); //this works when there's no anonymous function
  return data;
} 
```

如何在 emailTabs 中取回该字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:13:10.647

假设`getTabs`返回一些东西，你可以在 getAllInWindow 中创建一个匿名函数来获得对它的更多控制，然后用这样的东西捕获值：

```
function emailTabs() {
    chrome.tabs.getAllInWindow(null, function(tabs){
        var str = getTabs(tabs);
        // some code using the string
    });
} 
```

# javascript - 在网页中模拟 DOS 或终端屏幕的最佳方法是什么？

> ID：12905726
> 
> 赞同：12
> 
> 时间：2012-10-16T00:04:53.617
> 
> 标签：javascript, php, jquery, html

我发现这甚至很难概念化。最简单的方法是让一个大`textarea`元素占据屏幕的大部分，并`input`在其下方放置一个小文本元素。玩家将输入命令，输出将显示在`textarea`.

问题是，我希望输入完全集成。想想一个 DOS 屏幕。有括号提示符 ，`>`然后键入命令。按 Enter 键，输出显示在其下方，然后是`>`下一个命令的另一个提示。从视觉上看，输入与输出并没有分开。我想完成的一个例子可以在这里看到：[http](http://www.youtube.com/watch?v=UC_FrikiZdE) ://www.youtube.com/watch?v=UC_FrikiZdE （除了使用鼠标来选择命令，它们可以输入）。

我将如何在 HTML 中执行此操作（使用 JavaScript/jQuery 处理输入/输出）？我在想也许一切都是在可编辑的中完成的`textarea`，但是 Backspace 按钮无法删除`>`提示及其他内容中的任何内容，只能删除已输入的文本。

最简单的方法是什么？我无法在网上找到任何演示或教程。任何人都可以指出我可能错过的任何内容吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T00:18:29.733

您可以查看通过 Google 在线找到的这些 JavaScript 终端：

*   [http://www.masswerk.at/jsuix/](http://www.masswerk.at/jsuix/)
*   [http://terminal.jcubic.pl/](http://terminal.jcubic.pl/)

另外，我的一些法国朋友正在研究这个：

*   [http://webshel​​l.io/home](http://webshell.io/home)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-05T23:05:45.667

如果您想自己构建解决方案而不是使用库，则可以`contenteditable`在其后使用一个元素和一个假方形插入符号。如果插入符号移动到另一个位置，则隐藏该假插入符号并显示真正的垂直线。

但是，您可以调整此代码以始终选择一个字符，即使在禁用改写模式时也是如此，因此插入符号始终是一个字符宽的正方形。

我只显示命令，但以不同方式处理它们将是微不足道的：

```
const history = document.getElementById('history');
const input = document.getElementById('input');
const cursor = document.getElementById('cursor');

function focusAndMoveCursorToTheEnd(e) {  
  input.focus();

  const range = document.createRange();
  const selection = window.getSelection();
  const { childNodes } = input;
  const lastChildNode = childNodes && childNodes.length - 1;

  range.selectNodeContents(lastChildNode === -1 ? input : childNodes[lastChildNode]);
  range.collapse(false);

  selection.removeAllRanges();
  selection.addRange(range);
}

function handleCommand(command) {
  const line = document.createElement('DIV');

  line.textContent = `> ${ command }`;

  history.appendChild(line);
}

// Every time the selection changes, add or remove the .noCursor
// class to show or hide, respectively, the bug square cursor.
// Note this function could also be used to enforce showing always
// a big square cursor by always selecting 1 chracter from the current
// cursor position, unless it's already at the end, in which case the
// #cursor element should be displayed instead.
document.addEventListener('selectionchange', () => {
  if (document.activeElement.id !== 'input') return;

  const range = window.getSelection().getRangeAt(0);
  const start = range.startOffset;
  const end = range.endOffset;
  const length = input.textContent.length;

  if (end < length) {
    input.classList.add('noCaret');
  } else {
    input.classList.remove('noCaret');
  }
});

input.addEventListener('input', () => {    
  // If we paste HTML, format it as plain text and break it up
  // input individual lines/commands:
  if (input.childElementCount > 0) {
    const lines = input.innerText.replace(/\n$/, '').split('\n');
    const lastLine = lines[lines.length - 1];

    for (let i = 0; i <= lines.length - 2; ++i) {
      handleCommand(lines[i]);
    }

    input.textContent = lastLine;

    focusAndMoveCursorToTheEnd();
  }

  // If we delete everything, display the square caret again:
  if (input.innerText.length === 0) {
    input.classList.remove('noCaret');  
  }  
});

document.addEventListener('keydown', (e) => {   
  // If some key is pressed outside the input, focus it and move the cursor
  // to the end:
  if (e.target !== input) focusAndMoveCursorToTheEnd();
});

input.addEventListener('keydown', (e) => {    
  if (e.key === 'Enter') {
    e.preventDefault();

    handleCommand(input.textContent);    
    input.textContent = '';
    focusAndMoveCursorToTheEnd();
  }
});

// Set the focus to the input so that you can start typing straigh away:
input.focus();
```

```
body {
  background: #000;
  color: #0F0;
  font-family: monospace;
  height: 100vh;
  box-sizing: border-box;
  overflow-x: hidden;
  overflow-y: scroll;
  word-break: break-all;
  margin: 0;
  padding: 16px;
}

#input {
  display: inline;
  outline: none;
  visibility: visible;
}

/*
  If you press the Insert key, the vertical line caret will automatically
  be replaced by a one-character selection.
*/
#input::selection {
  color: #000;
  background: #0F0;
}

#input:empty::before {
  content: ' ';
}

@keyframes blink {
  to {
    visibility: hidden;
  }
}

#input:focus + #caret {
  animation: blink 1s steps(5, start) infinite;
}

#input.noCaret + #caret {
  visibility: hidden;
}

#caret {
  border: 0;
  padding: 0;
  outline: none;
  background-color: #0F0;
  display: inline-block;
  font-family: monospace;
}
```

```
<div id="history"></div>

> 

<div id="input" contenteditable="true"></div><button id="caret" for="input">&nbsp;</button>
```

请注意，此解决方案主要依赖于`input`and`selectionchange`事件，而不是键盘事件 ( `keydown`/ `keypress`/ `keyup`)。使用它们来处理文本输入或光标通常是一个坏主意，因为输入的值也可以通过将文本粘贴或拖放到其中来更新，并且有许多边缘情况，例如箭头、删除、转义、快捷方式如全选、复制、粘贴……所以尝试列出我们应该注意的所有键的详尽列表可能不是最好的方法。

此外，这不适用于移动设备，因为大多数键发出相同的值`e.key = 'Unidentified'`,`e.which== 229`和`e.keyCode = 229`.

相反，通常最好依靠其他事件，例如[`input`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event)并使用`KeyboardEvents`来处理非常特定的键，例如`↵</kbd> in this case.`

如果您需要检查 KeyboardEvent 的属性值，例如`e.key`, `e.code`，`e.which`或者`e.keyCode`您可以使用[https://keyjs.dev](https://keyjs.dev)。我将很快添加有关这些跨浏览器不兼容性的信息！

[![Key.js \ JavaScript KeyboardEvent 的键码和键标识符](../Images/a97c7f93ec2573476315acd22fedddfe.png)](https://keyjs.dev)

**免责声明：我是作者。**

# php - setlocal, strftime - Windows 和小写问题

> ID：12905727
> 
> 赞同：1
> 
> 时间：2012-10-16T00:04:54.050
> 
> 标签：php, strftime, setlocale

> **可能重复：**
> [setlocale(LC_ALL, 'en_GB.UTF8') 在 Windows 上不起作用](https://stackoverflow.com/questions/9489339/setlocalelc-all-en-gb-utf8-not-working-on-windows)

我有以下 PHP 代码：

```
setlocale(LC_TIME, "fi_FI");
echo strftime(" in Finnish is %A, %B %d, %G at %l:%M%p");
setlocale(LC_TIME, "fr_CA");
echo strftime(" in French Canadian is %A, %B %d, %G at %l:%M%p"); 
```

问题：

1.  在我的 Windows 机器上，它显示为英文。如何配置 PHP 或 Windows 以使其正常工作？
2.  在我的 Linux 机器上，它显示如下：

    *   芬兰语是 maanantai, lokakuu 15, 2012 at 6:42
    *   在法语加拿大是 lundi，2012 年 10 月 15 日 6:42

任何想法为什么这些词是小写的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:08:05.787

在您的 Windows 机器上，您设置的语言环境名称可能不可用。根据**[setlocale()](http://php.net/manual/en/function.setlocale.php)**上的文档，有效的语言环境字符串可在[**MSDN**](http://msdn.microsoft.com/en-us/library/39cwe7zf%28v=vs.90%29.aspx)获得。

你的字符串，对于 windows 将是

> 法裔加拿大人：“frc”或“法裔加拿大人”
> 
> 芬兰语：“fin”或“finnish”
> 
> 三字母语言字符串代码在 Windows 2000 和更高版本的操作系统中有效。

月份等都是小写的，因为： 法语和芬兰语在星期几和月份不使用大写字母。（**[芬兰语](http://www.uta.fi/%7Ekm56049/finnish/month.html)**）（**[法语](http://french.languagedaily.com/wordsandphrases/french-months)**）

# c++ - C++ 异常处理

> ID：12905728
> 
> 赞同：5
> 
> 时间：2012-10-16T00:04:58.937
> 
> 标签：c++, exception

学习“try & catch”。以下代码有什么问题？感谢您的建议。

执行错误：

```
terminate called without an active exception
Aborted 
```

编码：

```
#include <stdio.h>
int main()
{
  int a = 3;

  try
  {
    if (a < 5)
      throw;
  }
  catch (...)
  {
    printf ("captured\n");
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:07:23.750

您的`throw;`语句试图重新抛出当前异常，但可能没有。你需要类似的东西

```
throw some_exception_object(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T00:09:30.760

在`try`块内，您必须指定**要**抛出的内容。您可以单独使用的唯一位置`throw`是在`catch`块内重新抛出当前异常。如果您`throw`在当前异常处于活动状态的情况下自行调用，您将杀死您的应用程序，正如您已经发现的那样。

试试这个：

```
#include <stdio.h> 

int main() 
{ 
  int a = 3; 

  try 
  { 
    if (a < 5) 
      throw 1; // throws an int 
  } 
  catch (...) 
  { 
    printf ("captured\n"); 
  } 

  return 0; 
} 
```

你可以`throw`随心所欲，只要你扔东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T00:21:03.913

有四件事，两件大事，两件小事。一心一意...

# 1\. 重新抛出使用无活动异常

语句用于`throw;`重新抛出当前捕获的异常。例如：

```
try {
    do_something();
} catch (const std::exception &) {
    throw; // This statement re-throws an exception that was caught in this "catch" block.
} 
```

在您的情况下，您正在使用`throw;`而没有捕获任何异常（换句话说 - 它不会`catch`直接或间接出现在块内），因此您的程序被终止。当需要抛出而不是重新抛出异常时，就像您的情况一样，您必须指定要抛出的异常对象。例如：

```
throw std::runtime_error("Something bad happened"); 
```

# 2\. catch-all 子句不重新抛出捕获的异常

您的包罗万象的子句 ( `catch (...)`) 是完全合法的 C++。但是，它不会重新抛出捕获的异常。即使它是合法的 C++ 代码，这种用法也是一种禁忌。C 和 C++ 运行时通常使用特殊类型的异常来实现某些功能。例如，[NPTL](http://en.wikipedia.org/wiki/Native_POSIX_Thread_Library)正在使用异常来实现线程取消。如果您使用 捕获该异常`catch (...)`，则不会取消线程，并且您将度过一段糟糕的时光。通常，您必须按类型捕获异常。在几乎所有情况下，异常都是从 继承的`std::exception`，因此您必须编写`catch (const std::exception &)`，或者，如果您希望捕获确切的类型，则 - `catch(const TypeYouExpect &)`。但是，如果您必须使用 catch-all，请记住重新投掷。例如：

```
try {
    do_something();
} catch (...) {
    throw; // DO NOT FORGET TO RE-THROW.
} 
```

# 3\. 标题命名...

您包含 C 标头，而 C++ 为标准 C 功能提供自己的标头。所以，标题：

```
#include <stdio.h> 
```

.. 应该：

```
#include <cstdio> 
```

C++ 特定的 C 函数得到特殊处理。例如，它们在`std`命名空间中可用。这样您就可以使用`std::open()`而不是仅使用`open()`or `::open()`。没什么大不了的，但强烈推荐去。

# 4\. 从主返回。

与 C 不同，C++ 的`main()`功能非常特殊。它让你没有`return 0;`。这是默认行为。所以，除非你真的需要返回一些值，否则你可以通过不输入来节省一些时间`return 0;`。但是请记住，这`main`是唯一的函数，并且在其他任何地方都必须显式返回某些内容，除非函数被标记为`void`。

希望能帮助到你。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T00:09:31.613

您实际上需要扔一些物体。甚至像这样简单的事情

```
throw "error"; 
```

会像你想要的那样捕捉错误。

[在这里](http://ideone.com/0ykhv)看到它的作用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T00:27:06.050

抛出异常的语句是：

```
throw <expression>; 
```

这个说法：

```
throw; 
```

也称为重新抛出语句，用于重新抛出已捕获的现有异常。它通常用于`catch`块中，例如，您查看异常并决定是否可以继续、重试或中止。如果您决定中止，则重新抛出异常，以便调用堆栈中的其他人将捕获它并处理此错误。

例如：

```
// getResult() calls can fail with a deadlock exception
// This method will retry up to 3 times before failing
Result getResultWithRetry()
{
    int nbTry = 3;
    for(;;) {
        try {
            return getResult();
        } catch (DeadLockException& e) {
            if (nbTry == 0) {
                throw; // re-throw the deadlock exception
            }
        }
        --nbTry;
    }
} 
```

# soap - SoapUI Pro：将 XML 节点从 TestCase 转移到另一个

> ID：12905735
> 
> 赞同：0
> 
> 时间：2012-10-16T00:05:55.407
> 
> 标签：soap, soapui

当使用`Property Transfert`窗口将从第一个 Soap 请求的响应中获取的 XML 节点（带有子节点）传输到第二个 Soap 请求时，并且两个请求*都在同一个 TestCase*中，它的效果很好：

**测试用例 1：**

```
Source : [First Soap Request] Property : [Response]

declare namespace ns='http://xxx.com';
//ns:xxxxx[1]/ns:return[1]

-------------------------------------------
Target : [Second Soap Request] Property : [Request]

declare namespace ser='http://xxx.com';
//ser:xxxxx[1]/ser:someobject[1] 
```

但是如果这两个请求*在不同的 TestCases*中，我想需要先将 XML 节点保存到*TestSuite 属性*，然后将此属性转移到新的 Soap 请求中：

**测试用例 1：**

```
Source : [First Soap Request] Property : [Response]

declare namespace ns='http://xxx.com';
//ns:xxxxx[1]/ns:return[1]

-------------------------------------------
Target : [TestSuite1] Property : [myVariableToTransfert] 
```

**测试用例 2：**

```
Source : [TestSuite1] Property : [myVariableToTransfert]

-------------------------------------------
Target : [Second Soap Request] Property : [Request]

declare namespace ser='http://xxx.com';
//ser:xxxxx[1]/ser:someobject[1] 
```

这不行！

当从 TestSuite 作为属性获取第二个请求时，似乎我无法在第二个请求中获得有效的 XML。有时该值为空，有时它包含在 CDATA 标记中或 XML 被实体化（例如，“<”是“<”）。我无法将值作为*真正的 XML*获得，就像两个请求都在同一个 TestCase 中一样！

我使用了“传输文本内容”、“实体化传输值”和“传输子节点”选项，但没有成功！

如何将 XML 节点从 TestCase 中的请求转移到第二个 TestCase 中的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:17:56.010

在测试套件中将您的响应值设置为自定义属性，然后您可以将其用于进一步测试。请记住，它会将您的值保存为字符串数据，因此如果您要保存整数数据，那么您必须在进一步使用之前将其转换为整数。像 testRunner.testCase.testSuite.getPropertyValue("").toInteger()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:59:45.190

以下是详细解释：

创建测试套件 1 和以下步骤

```
 test case 1
  DataGen step 
  test case 2 
```

在 DataGen 步骤中，打开编辑器，通过单击“+”按钮添加新属性并选择脚本作为类型（您还应该为属性命名，现在假设名称为 yourprop）。

在屏幕下方，您应该会看到脚本编辑器。并创建如下脚本（请注意，您应该根据您的 Web 服务和 XML 更改变量）

```
def testXML = context.expand( '${Test Request#Response#declare namespace ns1=\'http://namespace/'; //ns1:WebServiceNameResponse[1]/ns1:nodeName[1]}' ) 
```

现在您已经通过名为 yourprop 的 DataGen 创建了一个 soapUI 属性。您可以在测试套件中将此属性用于以下测试用例。

我希望这会有所帮助，如果您不满意或遇到任何问题，请告诉我，我会尽力而为。

# google-chrome-extension - 如何在 chrome 扩展背景页面中获取所有访问过的 url

> ID：12905737
> 
> 赞同：0
> 
> 时间：2012-10-16T00:06:06.063
> 
> 标签：google-chrome-extension

我正在尝试创建一个扩展程序，它将（简单地）访问用户查看的每个 url，该项目的更大范围是跨多台计算机/浏览器的浏览器历史记录，以便于浏览历史记录搜索，但这在这里无关紧要。我当前的代码有时会读取 url，但不是每个页面：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if(changeInfo.status == "loading"){ 
            //process url
    }
}); 
```

如何让此代码读取多个选项卡中的每个 url？我在后台页面中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:01:34.993

您可以添加一个在每个页面上运行的内容脚本，并向后台页面发送一条值为 location.href 的消息。您可以为此使用[chrome.extension.sendMessage()](http://developer.chrome.com/extensions/messaging.html)。

# java - SharedPreferences 逻辑错误

> ID：12905741
> 
> 赞同：2
> 
> 时间：2012-10-16T00:06:30.430
> 
> 标签：java, android, sharedpreferences

这是我的代码：

```
package com.example.sharedprefs;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    public void doThis (View view){
        i++;
        SharedPreferences sharedPref = getSharedPreferences("FileName",MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = sharedPref.edit();
        prefEditor.putInt("userChoice",i);
        prefEditor.commit();
        int number = sharedPref.getInt("userChoice", 0);
        Toast.makeText(getApplicationContext(), number + "" , Toast.LENGTH_LONG).show();
        this.finish();

    }

} 
```

当应用程序运行时，我再次运行它。我经常得到“1”作为祝酒词。我试图得到 1 和 2 和 3 等等。有任何想法吗？我知道这不是程序，而是此时的“程序员”。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:01:38.570

第一条评论中给出的答案；[SharedPreferences 逻辑错误](https://stackoverflow.com/questions/12905741/sharedpreferences-logical-error#comment17482445_12905741)。

你应该把下面的代码

```
SharedPreferences sharedPref = getSharedPreferences("FileName",MODE_PRIVATE);
i = sharedPref.getInt("userChoice", 0); 
```

在`onCreate()`您的活动中的 - 方法中。

在您的代码中，每次启动此 Activity 时 i 为 0。

# javascript - canvas.toDataURL 替代方案？

> ID：12905747
> 
> 赞同：1
> 
> 时间：2012-10-16T00:06:56.793
> 
> 标签：javascript, html, canvas, web

我正在尝试将 HTML5 画布的内容转换为 png 图像。

问题是画布包含未在本地托管的图像，因此出现安全错误。

我没有在本地托管图像的选项，还有其他方法可以捕获画布元素内部的内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:12:08.230

除非您可以使您的图像资源 CORS 友好，否则不会。

[https://developer.mozilla.org/en-US/docs/CORS_Enabled_Image#What_is_a_.22tainted.22_canvas.3F](https://developer.mozilla.org/en-US/docs/CORS_Enabled_Image#What_is_a_.22tainted.22_canvas.3F)

> 尽管您可以在画布中使用未经 CORS 批准的图像，但这样做会污染画布。一旦画布被污染，您就不能再将数据拉出画布。例如，您不能再使用画布的 toBlob()、toDataURL() 或 getImageData() 方法；这样做会引发安全错误。

编辑：当然，如果您不限于纯 HTML5 方法，您可以使用一些 Flash/Crossdomain.xml 技巧，但这仍然假设您对提供图像的服务器有一定的控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:31:43.907

猜猜在客户端没有办法解决这个问题，否则阻塞有什么意义`toDataURL`呢？

也许你可以有一个服务器端脚本将外部图像转发到客户端，这样浏览器就不会知道它来自另一个域。（无论如何都不需要，因为您不能从服务器端使用浏览器的凭据）

只需将图像 url 作为 get 参数发送，当然，根据图像文件修改 content-type 标头，然后将所有这些字节散布在响应内容上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:13:25.693

如果你不反对使用 jQuery 这个插件，我会做的。

[http://www.maxnov.com/getimagedata/](http://www.maxnov.com/getimagedata/)

# svn - SVN 提交后导出不起作用

> ID：12905748
> 
> 赞同：2
> 
> 时间：2012-10-16T00:07:07.487
> 
> 标签：svn, export, centos, centos5, post-commit

我正在尝试在 CentOS 服务器上运行 SVN 的提交后脚本。我想在每次提交到存储库后从 var/svn/project 运行 svn export --force 到 /var/www/project 。即使我尝试了许多替代方案，我也无法让它发挥作用。如果有人可以发布一个可以在没有任何用户权限问题的情况下运行的脚本，我将不胜感激。

/var/svn/project/hooks 下的示例提交后文件：

```
#!/bin/sh
sudo /usr/bin/svn export --force svn://domain/var/svn/project /var/www/project 
```

如果我由 root 用户直接从 SSH 运行脚本，但不是在真正的 SVN 提交之后运行脚本，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:11:05.950

我有一种`sudo`失败的感觉。

没关系，因为你想做的是一个***坏主意***。该存储库导出有多大？这需要多长时间。20秒？2分钟？

假设您是 Subversion 用户，并且您尝试签入更改。你做了一个提交，然后突然你的终端似乎冻结了。也许是 20 秒，也许是两分钟。完成提交后挂钩所需的一切。男孩，你自己想想，Subversion 太慢了……

更好的方法是使用 crontab。而且，如果您能够以 root 身份执行操作，那么您当然可以执行 crontab。

跟踪最近的 Subversion 修订。然后，如果您检测到更改，则执行导出。简单的脚本，易于实现，并且在等待导出时不会冻结 Subversion。

顺便说一下，哪个用户正在运行 Subversion 服务器进程。那是执行钩子的用户。如果您的`/etc/sudoers`文件中没有将该用户设置为不需要密码，那么您的提交后挂钩将失败。此外，Subversion 挂钩没有路径，因此它们无法找到该`sudo`命令，您必须为其所在的目录添加前缀。

尽管如此，即使你让它工作，它仍然是一个***坏主意***。

这是尝试创建一个可以执行您想要的操作的 crontab。完全未经测试。我今晚根本没时间。但是，它会给你一个想法：

```
#! /bin/bash
REPO_URL="http://...."
DIR=...   #Where you want the export
LAST_REV_FILE=/var/run/svn.last.rev
SVN=/usr/bin/svn
SED=/usr/bin/sed
current_rev=$($SVN info $REPO_URL | $SED -n '/^Revision: /s/^Revision: //p')
if [ ! -f $LAST_REV_FILE ]
then
     echo $current_rev > $LAST_REV_FILE
     exit 0
fi

#You're here if there is a last.rev.file
last_rev=$(echo $LAST_REV_FILE)
[ $last_rev -ge $current_rev ] && exit 0

# New Revision
echo $current_rev > $LAST_REV_FILE
rm -rf $DIR
$SVN export $REPO_URL $DIR 
```

# php - get post by post name instead of id

> ID：12905763
> 
> 赞同：16
> 
> 时间：2012-10-16T00:09:14.160
> 
> 标签：php, wordpress

Ok i have this code currently.

```
<?php

$post_id = 266;
echo "<div id='widgets-wrapper3'><div id='marginwidgets' style='overflow: auto; max-    width: 100%; margin: 0 auto; border: none !important;'>";
$queried_post = get_post($post_id); 
echo "<div class='thewidgets'>";
echo substr($queried_post->post_content, 0, 500);
echo "<a href='".get_permalink( 26 )."' title='Read the whole post' class='rm'>Read     More</a>";
echo "</div>";

echo "</div></div>";

?> 
```

As you can see to the above code, the routine is to get the post by ID, but my permalinks change into post name instead of post id for SEO purposes. How do I get the post by post name?

Hope someone here could figure it out. Thank you.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-11-01T18:12:13.967

## get_page_by_path()

WordPress has a built-in function that might help, with a few words of caution.

`<?php get_page_by_path( $page_path, $output, $post_type ) ?>`

[Here's the relevant Codex entry](http://codex.wordpress.org/Function_Reference/get_page_by_path).

To get a post, rather than a page, you just need to supply 'post' as the `$post_type` argument, and usually `OBJECT` (with no quotes) as the `$output` type, like this:

`<?php get_page_by_path( 'my_post_slug', OBJECT, 'post' ) ?>`

**Note** this function does not check the published or private status of the matched post. This is great if the item you're looking for is and attachment, but can be problematic for posts and pages (ie drafts, private posts etc.)

**Note** if it *is* a page you're looking for, and that page is hierarchical (ie: it has a parent), then you need to supply the entire path, that is: 'parent_page_slug/my_page_slug'.

## WP_Query / get_posts()

If either of these are a problem for you, then you should consider just using the `WP_Query` class to get your post by `name`:

```
$found_post = null;

if ( $posts = get_posts( array( 
    'name' => 'my_post_slug', 
    'post_type' => 'post',
    'post_status' => 'publish',
    'posts_per_page' => 1
) ) ) $found_post = $posts[0];

// Now, we can do something with $found_post
if ( ! is_null( $found_post ) ){
    // do something with the post...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-25T17:04:49.740

```
function get_post_by_name($post_name, $output = OBJECT) {
    global $wpdb;
        $post = $wpdb->get_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post_name = %s AND post_type='post'", $post_name ));
        if ( $post )
            return get_post($post, $output);

    return null;
} 
```

Something this.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-05T09:49:44.543

Use `WP_Query`. This function will retrieve the first post with the given name, or `null` if nothing is found:

```
function get_post_by_name(string $name, string $post_type = "post") {
    $query = new WP_Query([
        "post_type" => $post_type,
        "name" => $name
    ]);

    return $query->have_posts() ? reset($query->posts) : null;
} 
```

By default this will search for an item of the type `post`:

`get_post_by_name("my-post")`

As a second argument you can set that to something else:

`get_post_by_name("my-page", "page")`

# c# - 在后面的代码中创建可变数量的网格视图

> ID：12905764
> 
> 赞同：0
> 
> 时间：2012-10-16T00:09:28.800
> 
> 标签：c#, asp.net, gridview

我需要根据另一个选择创建多个 GridView。

我猜我只能在页面后面的代码上执行此操作。但是，我是否需要在 .aspx 页面中指定 ASP:GridView 控件？

以下是我的代码：

```
 if (dt.Rows.Count > 0)
        {
            for (int j = 0; j < dt.Rows.Count; j++)
            {
                    sqlStatement = "select table_name, column_name, [Description], data_type from INFORMATION_SCHEMA.COLUMNS WHERE tableName = '" + dt.Rows[j][0].ToString()+ "'";

                command = new SqlCommand(sqlStatement, conn);
                SqlDataAdapter adapter = new SqlDataAdapter(command);
                DataSet ds = new DataSet();
                adapter.Fill(ds);

                GridView gv = new GridView();
                gv.DataSource = ds;
                Page.Controls.Add(gv); 
            }
            Page.DataBind(); 
        } 
```

我尝试运行上面的代码，但不断收到错误消息：

```
Control 'ctl01' of type 'GridView' must be placed inside a form tag with runat=server. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:53:19.603

您应该始终将控件插入 PlaceHolders

看一下这个：

[http://www.developerfusion.com/code/3826/adding-controls-to-placeholders-dynamically/](http://www.developerfusion.com/code/3826/adding-controls-to-placeholders-dynamically/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:18:59.443

检查您的表单标签是否包含 runat = "server" ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:03:44.237

找到了解决方法...我在 aspx 页面和后面的代码中创建了一个名为 Panel1 的 ASP.NET 面板，而不是`Page`放置 Panel1。

谢谢大家的帮助！

# java - 如何在 Java 中创建任意大小的井字游戏板？

> ID：12905767
> 
> 赞同：0
> 
> 时间：2012-10-16T00:09:33.327
> 
> 标签：java, tic-tac-toe

对于我的任务，我必须创建一个任意大小的棋盘的井字游戏……我知道如何创建一个 3X3 的棋盘，但我不知道从哪里开始。我的老师希望我们在 TicTacToe 类中使用

```
public TicTacToe(int edgesize) {
} 
```

所以当我创建任意大小的板时，我应该从这个开始吗？

```
public TicTacToe(int edgesize){
  int [][] board = new int[edgesize] [edgesize]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:15:46.043

如果你这样做

```
public TicTacToe(int edgesize){
   int [][] board = new int[edgesize] [edgesize]
} 
```

`board`变量将是构造函数本身的本地变量。这意味着它在构造函数之外不可用。

创建`board`一个实例级变量，并使用构造函数为其实例化数组，以便`TicTacToe`类中的所有实例方法都可以使用它：

```
public class TicTacToe {
    private int[][] board;

    public TicTacTo(int size) {
        this.board = new int[size][size];
        //initialize the board
    }

    //write methods to do stuffs with the board 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:17:53.953

您的板声明应该在构造函数之外，即它应该是一个*实例变量*，它应该是您的类的属性，以便您可以使用 getter/setter 轻松访问/操作它。您当前将其声明为*局部变量*，这是一种错误的方法。

```
public class TicTacToe
{
   int[][] board;

   public TicTacToe(int edgesize)
   {
     this.board = new int[edgesize][edgesize];
   }

   //Getter and setter for your "board".

   public int[][] getBoard()
   { return board; }
   public void setBoard(int[][] board)
   { this.board = board; }

   //Some other methods for iterating your "board" maybe, etc.
} 
```

# java - PlayFramework如何在视图中显示java对象的详细信息

> ID：12905771
> 
> 赞同：0
> 
> 时间：2012-10-16T00:10:17.870
> 
> 标签：java, playframework, playframework-1.x

我正在玩游戏，不知道如何在视图中访问我的 java 对象。在控制器中，我正在创建一个列表并呈现此列表

```
public static void index() {

    List <SendAllSysParameter> paras = SendAllSysParameter.findAll();
    render(paras);
} 
```

SendallSysParameter 对象是我的模型：

```
@Entity
@Table(name="SendAll_SysParameter")
public class SendAllSysParameter extends GenericModel
{

@Id
@Column(name = "sendAllKey", unique = true, nullable = false)
public String sendAllKey;

@Column(name = "sendAllValue")
public String sendAllValue;

@Column(name = "sendAllDate", nullable = false, length = 23)
public Timestamp sendAllDate;

} 
```

在视图中现在可以显示 sendAllKey-Values 列表。但是我怎样才能在视图中显示 sendAllValue-Value 呢？

这是我的看法：

```
#{extends 'main.html' /}
#{set title:'Home' /}
<ul>
#{list paras, as:'elem'}
  <li>&{elem}</li>
#{/list}
</ul> 
```

作为一个 JS-Noob，我不知道如何在视图中处理这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:56:14.360

这是列表：

```
<ul>
#{list items:paras, as:'elem' }
  <li>${elem.sendAllKey}</li>
  <li>${elem.sendAllValue}</li>
  <li>${elem.sendAllDate}</li>
#{/list}
</ul> 
```

任何时候你想访问控制器传递的变量，你都会使用`${varName}`，而不是`&{varName}`

# c++ - SDL 在析构函数上释放表面失败

> ID：12905772
> 
> 赞同：0
> 
> 时间：2012-10-16T00:10:30.717
> 
> 标签：c++, sdl

1.  `SDL_FreeSurface(sprite)`如果我没有在我和结束程序之前调用a ，我`SDL_Quit()`会泄漏吗？还是退出总是释放它？如果它崩溃了怎么办？我想知道在它崩溃的情况下，然后`cleanup()`不会被调用。

2.  我的清理工作是否应该始终在析构函数中？没有清理功能，除非我想在游戏中释放一些纹理？

3.  它说将 NULL 传递给 是安全的 `SDL_FreeSurface()`，我添加了一个 NULL 检查，但它还是崩溃了。我认为崩溃是因为我需要在 SDL_FreeSurface() 之后手动将 sprite 设置为 NULL？

4.  它可能不相关，（似乎没有修复它）但常见问题解答说：“您需要将 SDL_INIT_NOPARACHUTE 标志传递给您对 SDL_Init() 的调用以使 msvc 调试器工作。”

注意：我尽可能使用 c++（不是 c）代码。我找到的答案是使用 c 代码。

```
class Game {
public:
    #...
private:
    SDL_Surface* screen;
    SDL_Surface* sprite;
};

Game::Game()
{
    done = false;
    sprite = NULL;
    screen = NULL;
}

Game::~Game()
{
    if(sprite != NULL){
        cout << "Somehow sprite still exists, freeing now." << endl;
        SDL_FreeSurface(sprite);
    }
}

bool Game::init(){
    SDL_Init( SDL_INIT_EVERYTHING );    

    if((screen = SDL_SetVideoMode(640, 480, 32, SDL_HWSURFACE | SDL_DOUBLEBUF)) == NULL){
        return false;
    }

    sprite = SDL_LoadBMP("sprite.bmp");
    if(sprite == NULL) {
        return false;
    }
    return true;    
}

void Game::cleanup() {
    SDL_FreeSurface(sprite);
    SDL_Quit(); 
}

int Game::run() {   
    if(init() == false) {
        return -1;
    }
    loop();
    cleanup();
    return 0;
}

int main(int argc, char *argv[]){
    Game g;
    return g.run();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:26:00.853

清理后问题`sprite`是非空的。更新修复：

```
void Game::cleanup() {
    SDL_FreeSurface(sprite);
    sprite = NULL;
    SDL_Quit();
} 
```

# c - C 试图检查无效输入

> ID：12905773
> 
> 赞同：2
> 
> 时间：2012-10-16T00:10:33.243
> 
> 标签：c, input, scanf, atoi

我正在使用`scanf("%s", u);`，所以我拿了一个字符串。我可以使用字符`q`, `c`, `-`, `+`, `/`, `*`, `%`, `^`,`=`和整数，但对于其他所有内容，我希望我的程序显示错误消息。我怎么知道它是否是任何其他字符，因为如果他们放入除这些字符之外的任何其他字符，它将进入一个 if 语句，该语句假定它是字符串中的一个整数，`atoi()`然后它等于 0 并破坏事物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:19:00.807

您可以使用[**scanf**](http://beej.us/guide/bgc/output/html/multipage/scanf.html)格式说明符来确保它在遇到无效字符之一时停止接受输入。 **%[...]**

> 它允许您指定要存储的一组字符（可能在字符数组中）。当匹配不在集合中的字符时，转换停止。例如，%[0-9] 表示“匹配从零到九的所有数字”。%[AD-G34] 表示“匹配 A、D 到 G、3 或 4”。
> 
> 您可以告诉 scanf() 匹配不在集合中的字符，方法是在 %[ 之后直接放置一个插入符号 (^) 并在其后跟上集合，如下所示：%[^AC]，这意味着“匹配所有字符不是 A 到 C。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:15:18.243

简短的回答是，`scanf()`这对这项工作来说是错误的工具。您可能应该考虑`fgets()`（或类似 POSIX 2008 的等价物`readline()`）。这会将整行读入内存。然后，您可以解析字符串，可能使用`sscanf()`，可能是其他一些识别有效标记（一个或多个字符的序列）和错误的“标记化”机制。

请参阅[为什么这接受无效输入中的代码？](https://stackoverflow.com/questions/12889612/why-does-this-accept-invalid-input/12889800#12889800)有关如何在每个输入行中读取一个数字的示例。您想根据自己的目的进行调整；它不是很合适，但它是数字解析的一个很好的起点。还要注意`atoi()`没有错误检测；它仅适用于非常良性的环境（例如您可能正在工作的环境）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T18:29:28.943

一种替代方法是始终扫描一个字符串并循环遍历它并检查您想要的条件，如果它没有通过，您发送错误消息，否则您使用它。我相信这将是最简单的方式，因为输入始终是字符。

# c# - 修改工作流时 SourceLocationProvider.CollectMapping 不更新

> ID：12905774
> 
> 赞同：1
> 
> 时间：2012-10-16T00:10:41.333
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

我正在为重新托管的工作流设计器实施 VisualTracking。如果文件是新加载到 WorkflowDesigner 中，则视觉跟踪工作正常，并且从`SourceLocationProvider.CollectMapping`工作中成功生成映射。但是，如果对工作流进行了修改并重新保存，则 SourceLocationProvider 仅映射来自原始 xaml。

有什么方法可以强制 SourceLocationProvider 在后台使用的 AttachedProperties 进行更新？

如果尝试使用`WorkflowDesigner.Load(..)`创建一个全新的 WorkflowDesigner 对象，则 WorkflowDesigner 只能加载一次文件。如果可能的话，我想避免这种情况，因为它会丢失任何已设置的调试数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-11T21:27:43.133

`DebuggerService`使用反射，可以直接从自身获取所需的信息。以下解决方案对我有用，并在更新工作流程后继续工作：

```
private static Dictionary<string, SourceLocation> CreateSourceLocationMapping(
    IDesignerDebugView debugView,
    ModelService modelService)
{
    var nonPublicInstance = BindingFlags.Instance | BindingFlags.NonPublic;
    var debuggerServiceType = typeof(DebuggerService);
    var ensureMappingMethodName = "EnsureSourceLocationUpdated";
    var mappingFieldName = "instanceToSourceLocationMapping";
    var ensureMappingMethod = debuggerServiceType.GetMethod(ensureMappingMethodName, nonPublicInstance);
    var mappingField = debuggerServiceType.GetField(mappingFieldName, nonPublicInstance);

    if (ensureMappingMethod == null)
        throw new MissingMethodException(debuggerServiceType.FullName, ensureMappingMethodName);
    if (mappingField == null)
        throw new MissingFieldException(debuggerServiceType.FullName, mappingFieldName);

    var rootActivity = modelService.Root.GetCurrentValue() as Activity;
    if (rootActivity != null) 
        WorkflowInspectionServices.CacheMetadata(rootActivity);

    ensureMappingMethod.Invoke(debugView, new object[0]);
    var mapping = (Dictionary<object, SourceLocation>) mappingField.GetValue(debugView);

    return (from pair in mapping
            let activity = pair.Key as Activity
            where activity != null
            select new {activity.Id, pair.Value})
        .ToDictionary(p => p.Id, p => p.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:51:04.833

抱歉，我自己还没有尝试过，但是您可以从设计器的 ModelChanged 事件中调用 SourceLocationProvider.CollectMapping(...) 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T14:16:05.647

我知道为时已晚，但可能会对其他人有所帮助。所以她是我的解决方案

```
private Dictionary<object, SourceLocation> UpdateSourceLocationMappingInDebuggerService()
    {    
       Dictionary<object, SourceLocation> sourceLocationMapping = new Dictionary<object, SourceLocation>();
       Dictionary<object, SourceLocation> designerSourceLocationMapping = new Dictionary<object, SourceLocation>();

       MemoryStream ms = new MemoryStream(Encoding.Default.GetBytes(this.WorkflowDesigner.Text));
       DynamicActivity activityToRun = ActivityXamlServices.Load(ms) as DynamicActivity;

       WorkflowInspectionServices.CacheMetadata(activityToRun);
       Activity documentRootElement = GetRootWorkflowElement(rootInstance);
       Activity rootActivity = GetRootRuntimeWorkflowElement(this.workflowToRun);
       var fileName = this.WorkflowDesigner.Context.Items.GetValue<WorkflowFileItem>().LoadedFile;

       SourceLocationProvider.CollectMapping(rootActivity, documentRootElement, sourceLocationMapping, fileName);
       SourceLocationProvider.CollectMapping(documentRootElement, documentRootElement, designerSourceLocationMapping, fileName);

           if (this.debuggerService != null)
            {
                ((DebuggerService)this.debuggerService).UpdateSourceLocations(designerSourceLocationMapping);
            }

           if (designerSourceLocationMapping.Count != sourceLocationMapping.Count)
            {
                foreach (var item in designerSourceLocationMapping)
                {
                    if (!sourceLocationMapping.ContainsValue(item.Value))
                        sourceLocationMapping.Add(item.Key, item.Value);
                }
            }

       this.designerSourceLocationMapping = designerSourceLocationMapping;
       return sourceLocationMapping;
   } 
```

在这里我再次更新 sourceLocationMapping

> ((DebuggerService)this.debuggerService).UpdateSourceLocations()

# java - java小程序无法加载超过1张图片

> ID：12905776
> 
> 赞同：0
> 
> 时间：2012-10-16T00:10:53.870
> 
> 标签：java, javax.imageio

我在尝试在小程序中制作 Java 游戏时遇到问题。
我不能加载超过 1 张图片，否则将无法加载。
我正在获取 jar 文件的图像。

代码加载器：

```
 public BufferedImage LoadTex(String ura) {
        BufferedImage res = null;
        try {
        URL url = this.getClass().getClassLoader().getResource("tex/" + ura);
        res = ImageIO.read(url);
        } catch (IOException e) {
        }
        return res;
    } 
```

代码小程序：

```
tex texu = new tex();
BufferedImage plr;
BufferedImage hud_right;
BufferedImage hud_bottom;

@Override
public void init() {
    plr = texu.LoadTex("tspr.png");

    hud_right = texu.LoadTex("hud_right.png");
    hud_bottom = texu.LoadTex("hud_bottom.png");
}

@Override
public void paint(Graphics screen) {
    Graphics2D G2D = (Graphics2D) screen;
    G2D.drawImage(hud_right, 570, 0, null);
    G2D.drawImage(hud_bottom, 0, 410, null);
} 
```

它适用于 1 张图片，但如果我尝试更多，它就会停止。客户端甚至不会加载。

它给出了错误： input == null

如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:35:18.260

你**永远不**应该消费异常，至少你应该记录它们，它会节省你几个小时的头发拉扯......

```
public BufferedImage LoadTex(String ura) throws IOException {
    BufferedImage res = null;
    URL url = this.getClass().getClassLoader().getResource("tex/" + ura);
    res = ImageIO.read(url);
    return res;
} 
```

你**必须**调用`super.paint(g)`，paint 方法在后台做了很多工作，你永远不应该忽略它。

```
public void paint(Graphics screen) {
    super.paint(screen);
    Graphics2D G2D = (Graphics2D) screen;
    G2D.drawImage(hud_right, 570, 0, null);
    G2D.drawImage(hud_bottom, 0, 410, null);
} 
```

尝试单独加载每个图像并使每个图像都可以加载。如果这可行，但您仍然无法加载更多图像，则可能存在内存问题。

# git - 将结帐转换为主结帐

> ID：12905777
> 
> 赞同：1
> 
> 时间：2012-10-16T00:10:57.460
> 
> 标签：git

我需要一些帮助`git`。我现在的“主人”有一些问题，所以我检查了一个我知道有效的版本。

```
$ git checkout <hash> 
```

让我们称之为“以前”。然后我对“以前的”进行了编辑，让事情按照我想要的方式工作。然后我提交并将“previous”推送到 git repo。当然，在 repo 上，“master”仍然是有问题的旧“master”。我想我要做的就是将我计算机上的“以前的”（带有新编辑的）转换为“master”，然后将其推送到 repo。我怎么做？我已经阅读`rebase`并尝试过，但这不起作用。我收到“无法变基：您有未暂存的更改”的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:21:59.140

大概，你所做的`git checkout <hash>`是得到一个新的分离的 HEAD。

（可选）保留不正确主控的参考（将被调用`oldmaster`）：

```
git branch oldmaster master 
```

删除主引用：

```
git branch -D master 
```

使您当前的工作分支（分离的 HEAD）成为新的主分支。

```
git checkout -b master 
```

然后，提交您的更改（如果需要，可能在添加新文件之后）：

```
git commit ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:16:36.373

我不确定你必须在“master”中走多远，但你可以`git revert <hash>`一直回到你分支的点。这将“撤消”所有提交，而不会丢失历史记录。

这篇文章可能对您有所帮助：[还原多个 git 提交](https://stackoverflow.com/questions/1463340/revert-multiple-git-commits)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T04:07:23.557

一个更简单的让你的主分支返回的方法是使用重置：

```
git checkout master
git reset --hard <hash> 
```

然后，您的分支将落后于原始 master 一些提交。修理：

```
git push origin master -f 
```

这将强制放弃在您当前位置之前的提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T00:17:03.750

也许尝试运行`git checkout master; git status;`并查看您是否确实在主分支中进行了未暂存的更改。如果是这种情况，只需在 rebase 之前提交或存储这些更改。您还应该验证您是否已成功提交对前一个分支的更改。

# php - 在 PHP 中将数字从 mysql 转换为文本

> ID：12905778
> 
> 赞同：0
> 
> 时间：2012-10-16T00:10:57.083
> 
> 标签：php, mysql

在我的 MYSQL 数据库中，我有许多这种格式的列标题- `2345X32X12.......` `2345=survey id, 32=page id, 12= question id.`..

每个标题下都包含该特定 ID 集的问题。使用 PHP，我试图获取每个 ID 集的每个问题的文本以放置在 csv 文件中。

现在，当我从我的网络服务器打开我的 csv 文件时，我得到的格式是`(2345X32X12)`excel 文件列中的标题；

我想让每列下的问题看起来像这样 - 你的年龄是多少？............我希望这是有道理的

在我数据库的另一个表中，编号的标题定义了问题 A1：2345X32X12 B1：你的年龄是多少？

**代码：**

```
<?php
// connection with the database 
//$sid =$_SESSION['sid'];
//echo $sid;
$id=$_GET['sid']; 
echo $id;

$dbhost= ""; //your MySQL Server 
$dbuser = ""; //your MySQL User Name 
$dbpass = ""; //your MySQL Password 
$dbname = "y";    
$link = mysql_connect($host, $user, $pass);
mysql_select_db($dbname); 
$tablename = "survey_".$id; // this is the tablename that you want to export to csv from mysql. 
$sql = "Select * from $tablename"; 
//create  code for connecting to mysql 
$Connect = @mysql_connect($dbhost, $dbuser, $dbpass) 
or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno()); 
//select database 
$Db = @mysql_select_db($dbname, $Connect) 
or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno()); 
//execute query 
$result = @mysql_query($sql,$Connect) 
or die("Couldn't execute query:<br>" . mysql_error(). "<br>" . mysql_errno()); 

exportMysqlToCsv($tablename);
function exportMysqlToCsv($tablename,$filename = 'Results.csv'){
    $sql_query = "select * from $tablename where id=2";
    // Gets the data from the database

    $result = mysql_query($sql_query);

    $f = fopen('php://temp', 'wt');
    $first = true;

    while ($row = mysql_fetch_assoc($result)) {

        if ($first) {

            fputcsv($f, array_keys($row));

            $first = false;
 }
  fputcsv($f, $row);

    } // end while

    $size = ftell($f);
    rewind($f);
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Length: $size");

 // Output to browser with appropriate mime type, you choose ;)
    header("Content-type: text/x-csv");
    header("Content-type: text/csv");
    header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=$filename");

    fpassthru($f);

    exit;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:51:00.353

你的问题不是很清楚。您首先说问题在于这些有趣的列名，然后您说您正试图将问题放入 csv 文件中。我看不出一个与另一个有什么关系。

无论如何，对于具有这样标题的列，请使用：

```
$ids = explode('X', $heading); 
```

然后，您可以循环`$ids`获取诸如 2345、32 和 12 之类的数字。如果不了解数据库结构的更多信息，就很难准确地知道这应该在代码中的什么位置或您想对它们做什么。

# php - 旋转 Base64 图像字符串而不保存图像

> ID：12905780
> 
> 赞同：3
> 
> 时间：2012-10-16T00:11:05.223
> 
> 标签：php, png, base64

我收到了来自 Fedex Shipping API 的响应，其中包含一个 PNG base64 图像，但是该图像是垂直的。我想将此图像旋转 90 度而不将其保存到磁盘，然后将其显示在浏览器中以供进一步打印。

我尝试先解码字符串，然后使用旋转它

```
$rotate_image = imagerotate($image, 90, 0);
echo "<img src=\"data:image/PNG;base64,".$image."\" alt=\"Label\" />"; 
```

但是我没有运气！！

示例图像字符串

```
$image = "iVBORw0KGgoAAAANSUhEUgAAAyAAAASwAQAAAAAryhMIAAAml0lEQVR42u3d328jyZ0Y8Gr3Qb0HbKZ9yEMoQGDZ2ADzOmsBFw3CY/lg4PJ2+54XSxhHfNVCCY6EaXbTMkQHWIwSzIsETNh/Q+CHPMVDmc7SgwjTAfJwMZy7aS4n7BcD29wOstXYmqp8q7tJkRQpUSSb3p0teqxfS/VHXT++9f0WmyQSG7ghhShEIV8jhNa0MKi6fogE1/yQFEnyH6OAYL9La7gR8T3j5i+f+OEjkxo00BERbp2RINDDYA7i5VHYKnQAsTjyw+I1UjT9VlAw9dkI3PeRQfUhEpitIz30rNlI52n12N0BpEh4tRQWq07yHwch63SunuQ6uwNGPr/xu7zgh7u9aPCFReCvOnN6nTNCen0yG3Ff1Y6dT9rQUITXSmGBpUg3fOs3mqWLfqXLiHsTgfvuhlGUIKbj+w4mbfc25OolII78xcdD5KUfiYcx8jKaj7AY4R8R38cOeTYPcfq1Y8IkchH/4hD5/ZsKLvEnuU8rv4+IcxOx/BEScvcDNySC/ErMRaohYVcJsq8/jNK/OvL2TJ8fFR5UonAGIkxPl4hPABGuFiPhfASliMOr+7o+Qnq5js8CifjkxU2kDkgvRuToyiUIt+YhRlh4/1VJIjAstREiLnyfhoVXErn5BwpPDuERwhKEzUUqIwQm4/YEMvCh4yN3FsJKMBmT5hIjhIp5SDkkV+5DiUBnFgJjDAljpGXeQGBEwSAREWvhEeKQMBLzhnA1dGIE30T8uUg8EkVEh0g8hMNwPgLzxG3IyQhI8dhPER8QN0ZE0ZqHRK4TIwWYjDDM/DmI/7R27H7idmRYkcjuEOkVXP81DLHdmYiQYUVEgxTZDjtPAfl8boCsHbd2AEEViZCH4TBAFkzfPpIBciaCJEJ1xyVoNwmQFglbZF6ot3aTUB/FSGOIQJT37bIM9TORdowYKdJmxBPzkeVuZBMr49cRsXdFOzDPDSquYH4FjFfL2gVrmR5GBYyKRQ0WC3cG0mEF5OCiiQg3OA6ZfgeCAuNcB6T2BBbiEWKiPQMQxIzZSLADCNwFEGaGTLsNcUJeOO5dwDoqkbN8FVaP5xDA/A4Z+IQ1q+VwJvKs57rNjx73QlhaIKgwegdSOw4vYB29Kh6ETnOE+BAlAKlVBrMRv+O++mh3IJHIDxlbAIEl7qr5k1nIx9FspOO7r/72OAoFEwsgTOyOEPJqHBESORazERfC3t+WRBiys8UQ/wIWhqtXh8fEfRw6TvMYEJdQi0QQo4VtzkAeXyOGRKJbR9cxE4+MaSQeXQUTPX6FbkP+BhDBnkhEvxMhMdIv7Y4hFiIGIEY4u7kk8tt+qQ6hLpSIdmdzudMINJdDRA+aq3IL8uaNP0LonUgHph+++qL0jLjPPNNxHgJyRkRIgq1yOHN0ceT6EomGyN1D2L+gCeI4I8SVQzjYqg7mIB2JhPdAehewjl7RUhsQ302QjkTCfrUyc8bzqu+mCFsEEQWYjLCOXrFSz8UjxCeQcIX9Wrk3G+mduf/n/0Yw41np7rASmCgMz2EdlUiLdFzfcc5apu/LAPnwi1p1ZoBk/Ai7gwHVw5AbBTN4X7sDaYfRORwpDvVihISoiAGxiuZspEwA4SakQWYRB+/r35aVEXFY3u6NdDksmsINA4rP2iwwO+2ebzhvAk7M9iykqi+B2LyIJOKVsVFPkL7mXnnVvFGfMYSLe7Ny2LuQfLVZtcRZ79PH/MkFFa8b7ZdvKv7z/uOnpYsZCHkcLYEUC82aJcy2+5hDli6cxsuXb5j/3P2XV2FhXQgnhaZF+EfP3F0mCm+E8/Di5RULC/DtHEQsgVisae1y91ef/qBwVvijIBIRXxTEDwozkWKVLINEr6xd2fFHO0aBiWLp4uUrTKvi0c4MxD5GNWNJhEjk40+eAFL1H//O1RnjH38yE9HFyQpI37oKc5B3+nvP3UvG2PHsji+IwQqIS65Cm/GKX3juUFql4RzEWmZ0WY+2RshvIVxqgMDAiuYgxcpSQ/jRVm2IQFeUUfX5c0DCechyk/G4D5MRkN2r8K9gXexLxH/uz0FIYZmwsnPcr0rk0w+bpe0Y+XUTwsrnUXN2WCnoSyC2/wXkfTJA5o0TidSglnGvWnuzAyRxzCWQS/8LTSIBI2YHkDe8SBrOm1ZhVqh/d1ZGyou4wbiF9re0QEcCwxR42GkzYdg5qBchtWCMzBjCWog7J4KZoi4CcjVjo2sSKZg6q0kEAWIlyMuIa4BwI/QsRvGsDBIQNEJqtyMBk2tAzSI+rx6LYvEjiTx7GbFKFAn+pNe3aOTMSu6OzU8LUGUJBxaKu5HH/QorSgSKKhIju8/kLAaEhW2XBOGsDLJ2bJ7WrCFSvB15E0mkKRFYH4bI8ycp8swlb2Yi1q5EIjkGfHHVXAZplqDchCOEv3LJH+cilh/tRB84/9y6C7kKJfIqRYpVH/p095ljchwjEADZHORhw/Tpg2Pt1T5Ugrcjz/0EQd6W9UhHCfIfHVPoEdWEfxvysC5o52HuTQ8vhvRTRIeyjlsfPnYccSmRzq2IJ4T/kEGqctW/HSm4CZI0VyFGHj8mjqCyuc5C93vzEWZB1ccGdyMI/TkgXwyRsj5E5OiC8Dkf+UGJj5AvFkZq0PEjJB7CgsxtrtruDw5riyJMyOai6WQsPg7HEW7NR44lEvkPC298KDfvQmRYYWlYIQnyM+LwOKwISHnYnLDyg1JBUPfh9pseuWJ3IhAgAfFkgCS7EeJWoWo5XIPRxfRbAuSej3z24Lj+6mgBJAn1gECoJ8+GiGgkyPxQv+e3fb4TtZ09665Qr7ZsFaIQhShEIQpRyPJbtlaD4x58nUc17LgClaD4IrIyvX1vRetDRnMJ+c250Zq7vT1Ciho1AbHyqGycxYhXxp36XQiSiH2k43O9NXejfrQjsVMe+C9lReoPeoAQX3z64VkjR+9AqoeA5I8Fvhi4jN6FPGdh76Ws4/wwbMSIu+s2CsEdSE0iZFeYF5HL2N1ILxwiz2JEEFeWNoshDy/YAsgFL4kE8aME4eTsIf3jQki4IPIYkOeyIgXkIkZoLV/q3tXxVdnxjVDsSiS6a3RVYgQNEeTLnRC/t9AQbgU6IHePLjs5E6hIAXkeI9x67kcLDeHgSH8sEfOu5tqOkcIQiTv+pc/YIkOY74rHsrnCBTo+RBZUpIA0P0qQ32l3InHHCyhlJTJYZAgjCypSGML3RYhE6N0dLyejX7SgIgXEMdPJ6BcWRYrb0QIzPl8edIoWVKR+1HPO0rDi5xbqkyaUstuDu+eJDJAPLAIVqU8N5xNBPAwB0l8gQGq2BQGS5CBAsrtDPcsD8izyOXauJAKh3l8g1APSTUP9/Lp01qLFN7EybgR5mw3iXPGfILmAXnpGx85pnnD9k/UjNYlowt6PkRZxfZQBUnLldMrXrGdRJM6I2y+sHylKhMGyFSOO4/bnbyUvjTQlwq3NIDxBhNu31t9crxKkwa3HgLRhdJmZIDIwtCRCNc9y/fr6kX6CBLUYoTCEvUwQ2Vy8GDeXwK7P1t/xXySIKNZQvBXs+jwjhMEQjpFMhvDZJ3Q4GWvVGOl8unbE3WFJWGnWYsQl/tnaw0pLInGArFV5hUKA9My1B8igyiWiiy6PkUBQ0laFqUIUohCFZH/bEBKgLG/GBpF3p08U8jVFGlyHqsRscCxsQzBD2Pe+sncBhCILkBOJaDB1skECRIYIsjxkZYJ4CANST5AWIpkgLWamSCMgdYob6+14RKAGbVxyidgSYeSErR0p6ICcCGOIcGxwc81ISAeANERDIrUYMcXaEVkkbgYxRFsiRUDEA1Oi60VCBogZI79IEJwtks8aaSHzdITAlMwMebABpLERZCsrJB7CScc3TrPq+HHk51kh8uEVmIwnEvlNOhmNtSO6IGlYabSyCivCZCPEywiBGyBJqE+R9Yd6iWAjWbQaQUaLlkRMs1UdIZTYNAOEIzNJJBo0w0QC4SQlSpFsUiJEkuSuwTJM7lpCJGkqi9NUnk2aqkoHhShEId8g5PUm6vjXG6jjkbaBOt59vYE6Pny9gTr+7TWSXR3PfzxCMqzjnRGScYmdOXLdJxnW8ddIdnX82GTMro53J84kozo+vIFkUGK/nUayqOPHJmOGdfx/mur4TOr43jSSRR2PxyZjVnU8fZEiWdbxnRejEju7Ov7Fiw3U8aMzybKOH/ZJtnU83kQd39tEHf92E3V8bxN1PN5Awj2a8VneOptAXrwzZ7KRPtnI6LpeGbO8vd0A0thE9UutTTTXybvSJxvZkegaKcKIgOxOBAIKeegoiPPU5JgZMqtYFfnfP52LeDqH1VJ+vyry62GfUMJNGAXU0hhJEFvjGFbhbBGEOIZ8or5GJCDMhAV4iMAk1b0arlO8TsSTHT2OcDOoYcjx7DUiLRKYTBdshDBMizJbXQNiD6tfm3gmBaT4XWolCAHETHYP1jUZ/4xcmsGPJhDG1428T9pm0B5D4APPm1A6FldG/E6K7JCOObiBQPL9i9WR11+lSJW8Nr9sC76zdyQmkfzKyIu3k2FliNionCKn2SKoGCMPNoA01o+InerHU8jW+jp+iLxX/f6w41PkdPUh7M9HWIL8fGWE4rkIAURuTPxmfTN+iPxyiEBYiWOX3KJYN2LH8X4c8dYXVm4imMWhfg3IjdE1QmDRKspFS+4erHuejBBYfotYbkxkgFwKQ1BkxIlETSYScvcgO8RGcUqULZImd3L3YN0df43INJUb60BGYSXTIgirR0zvcfM20VzNTXS89dNNID97VxCyCaT51QaQyy/VBs4yGzhnlCHkITOANUTuQkPeReE7lD4g1NIFrMuiC6euiRYyRYCp1Q0oIgNx91LwdgppGWOIcY0gWGUs4cHygohEWkaCmIsgYgqxtTFEH0NIgIhEKMISsbUEMe6BvD37XwmChgi0h/z6GvEQFp7VCOBsAUEpov/nrxZG6C9/eQa/JYTRgoZPEesyiMcf3NoUt5gpEa9myJ8ZrRixTv7iL/5iYQTZpkQgpRtDvGuE40sOCGl4wkhSvwS5RN/V7hS0KQQHVoJ48H1wjQjzBI4OyCUMyIa8XzlGugsgr4cdrwckQWiKdKeRBnzp4UYbvpYITRHZfHfcPh8iRmAtifA7X9vgy+EFsIaXIKZI+6TdmETkNRTQho2TeEbC/ZI+6crxsGDH8w8+I8noGke644jM/bpmoxEjMgVMkN9W/9WiCPv+b5KG0saRyxuIMUS0FLn8xd6P7swg9fRMjn04E5hvNkmRRjue8eYk0hgiNpFzFebJq6p/5+gaJhJfCitGWsYYYtxAToYIxC6JIJ2Lz+/M6ivXoT5GPP3WM2kPEU9PEGOBDnnxsymEaSliduPYNYVcDhGmJYh5b6QrQ+E1MqPju0NEtNL15D5F0AgZhhUZZtPYRfUR4o2QNKyIpZB0xnOERpMxQQwIWt0AJuNljNDFkddfTSKjsHIDicNKNzCmwsp9K61FELoMMl5pJbErRRiBo9wI9YCkod68BzJeBCWxKxhDbixaXWYkixbcbwVE98Q1MjaEGW5VE6RoJPsVdGGkZk5ORtNGEmmhPYvtxYlEct1Smkh0uYw0cexCiyPVcAppaWOIPo7IlAgQSIni2KUtjlSiKSSJXSlijCFxctcVBiR3aexaGPnp2ymEmgnySPBcnKamiC6voZCIqCfD2lwOyey2EeTPN1FpBb7aW/lWItcXwGZ4e72JM/l8E8iXanTd5zZcGSFbFO9B7Ib62kYFEkCOB0uvGYf0B0i+7Tf2BCQwyDq5PzJcGRdAbCKR2hInPlwZGbF57nYE/gdIdYlLlYfryQ3EIyliBBJhKI9MhAJUXuKawmkkzqbZJGIyAj/ipilagaCFTBHcEJCH0SWuARiujHwaaeEphJGGOIG+WuKSieHKyPF71b1x5DdD5EeDIdKB3FQEAi89GW9BujHyfUbagDQCYa4PaZiTCKqSNjcDLUuEwrgGxEOrIOLBzl55JvKkd43gNSCQxQNiw6xG8jrrBDlox0hhRz586gVHtewQXsubOiMRLReyQ+AOSKcwAPbQCsjT4h4dQzhup8jHnQQxAbEEK6yC/EJeenPd8dfIUSNF7BgprhOBKmsK8doSISfrQ5hsuklEyHOLH71dGvntXORsfUjL0mYjZTMOK/B1JxAhfInXhiRbHtcIjAQHBnWb1moZIrU8BuSSljNEaCFvml3hBeUllt8R4omTFIkTCVhnj2TmIGgVJwGSIIkghrJDGLIQ7opAY8s9e2shhCNhk66gOl8uq52JdAV7NI6IupDbR1zuEarCVCHfVoRXGXlg8Rqk7n6XWmeZIIzRvEF41dSF3wpIRgiNPnlCWPXTD0Xn6gmevfrZR7e97czdSBSEV6FDK/2KaDRLzmzkxd+9XelMojehGzpfVPxIPGxazY9mI/9lReSPwu05/8/yB6LErXw2SMiE23C55beFz6sFdy5irYY4Z4C4HeEzVnGzOhPsA3IWCp+Kx3OQo/eN1RBOQkBwZEC3PJuN2F+ueiby3Te5RQAJxX+YPR1+vTLCBCDyDW99fy7yd6siEQOkyivCd33HzWQyhuwr9sTlP+MfCv91D2czuiIWPDAcXjYgQNpHJDPENCUCod4uW3OQ//FPVpqM8bvvOBkvWvF7z5B3AZHv4cCtjJHNJBKv//5t9oj7h6+yR/7+nUH+8A9fWptAsj+Tf9gI8o+fZ4/84zuDvP7xj98VxNkE8vpF5pNRVb/f1jreCO73WxSjlmfeE/nq8/uN4K9863Xtvmfy9vWL+yFfWq9/nTny1TLIiz/cH/nq3sjr7M/kq3sj6P4db9z/TFr8vohYorm+psgS8+Rritw3rHy+DBLcL+GGAPma33MyqkVrcSTbNyOK349oQ4jqeIUo5OuC0JLjHdSbxmk5v+2VDxqNunOaK1fofqnrnNZq2LmguUOjK1+Co35uKUQhClGIQhSiEIUoRCEK+fohqghSiELGb63k+RAIXV/vLREbHZa6F9SiRrO8ZflR1CxFwo/oQRQ5Ea9Z9XqzZkX9/ZwRebmt2vapIRqR0/XyW+WKcPy+/IGtORf+5pGxy20U8jVBWKYdnxx7Q8jkZPxmIl0hnFmId5i36KFGazmtr9Xhn7ftO/SAwjHtGra36/Yh2u7S7YbDNeFc1Lv1qF82eDm3n8+jQ7jHOIIw1aFPkBFoWSFoR746hER0T88MySHDQ3DgDwZuJzMETqElkQ/pmZshotkS2WPYyQ7BKEYKNUKyQ4h8LiFDRauWLcIlQpiV2TyRvcLlZMRUZIloMXI2mET6BzaGKEK38ihXuahTdFjOobLW3Kqhbe9A/qBEjX7lwsN8u+tp59Y59rt9g5bRQX+7YRvTSBy7Or1skezPxOKz+2S9iBiOLvniVhkhEIeTecKt/5oV4mGE9uIZb5G/yQxBKI1dxPnXWSFBGiA/pPgsszOhaaj/YHDWyexMWLxoxcuKPtHx3nZfi5pWxK1THNmHeXTgNHEkLhw4Zl2cVkSj28zh6HxL41aj69fpttOtdx2K66f5rQqdCCscll8tfvza09rZIPKAhBnTRdDakVmV1jcX4domziS3CaTwziB/+Z72Tx/krGyRf/bvP/n5v/mfk8ih5lXOZSKBDg2ZN+yXTi2qnee29iGG2Jbf3z80GtTqb9Wsc8O3D7p8fzuKor7Ga9t1bt1EjP/+/Jdvskb+Rfv58588Etkif9l7/nwrl/GZFAERT0m2SOHyefPfdTJGchefNP9tO1uEQ4ZnvP/djPtk7OllWSJnm0DMmwiyLrq0vFVG5e04b/DwBc2XtX7e8Ovn+zm0r3Xr5zJvOISl2y7ZtYMmylfOsb0Ff0d3sUVLIX8iZOJyRKIQhZS6TcPb5rjRPKAl0fAhrNTK+9s0h5vbPG9AUtH1ueWcH2p2vuRwq97Ma/F+ofyVrdq+pRCFvEvI6AFi+q4i3rbPywavHULugBtdL39Y1nhOu2jwbW5E56hC97f293Pb9S7c7dywD+rdPkSU3AE1mlqzJP4ECEs2JBSiEIXcH+mX82hbQLQo0X3jHDexbxv1C5km7Gv1qO6coxLPl3Pa+Va+5EOO0fUMb2s/V3EcuqU1Nf/dRcxZsUshCvmmIzWjTg270oRUwTqt4brv7Vfix/i3KnVxWi7j7mnNoqVTCD37cN/TvOGV/HrklbfymtPX5iJXeAPI78wNIP/N3QByebYBhDobQDYyuroZ9om8YYm0MkZMibwyN4B0zPHSQetSCBv9/D5u2FAd7OPTfHlfO8+jwy3tdB93+/vYp6W6w+UPztEh9nAUXTh2iW97NWsu4rsbQCaLoG8y0jLfFcTfRHOF70zHByQ7ZBQgWxNhZQsSCSj8y1tGvWHj/kHfsnNl3N/CzX3D3rbL8qr4yDO6/Tw6gD8Dag0vV67UaW5rq4ZKcxHX3QCykTMJ8AaQyZUxI6S/iTP57Sb65OqdGV3epkeXV+L7MltoVrocNxoNCCB1Z5RZ1Jv7VpxZiCY+3fYbot7PGf280Y1OjQYvccv50yLjffLNRvxNNFf4Te/4+BavJ5tAWptArsxNNNc4sk1rOZk3yCt3ncjLH9CycQ7RJI9PNSe9lLdBDVo+3BZeybacfryBeAilhOY4C/ZJVojYBDKed2WGtDbSJ+67cibjedd6kbkPN2WEdN0NIOM7Ev6Fh2mt5MWX8sIxo/5+DeW0c8gkSrbR8IzmAdX88xqq9LGdr0z8IF/yjLnI+I5EZkhnE4ifVXPNe4D5m420zHcF8TfRXOGmO96rnGrxI/h57PiOE/negd+luJnbykN+YZcrXomWc2XL8U+N/r7lON2GZzX3K406rUEIwnORiZUxK2RiPckKmVgZv9FnMrEyZoVkNLomb113A0hrE8grcwNIZyLv4rWy5df78eZgX/O7kV3LVbh2WrIrouF4JQgn+ILv4z4qgeB7FXnpvnwosF/ycDQX8d0NIJN5V0ZIdxNn0toE8moTHa9G19cPmVxPbHyOageQP1jd8wrF/jmkFOjQOM1pfaupNei+4dcvhF3q7+fzuFkua155a7+8FT+GoP2JkYn9rqyQcBOI2ATSwu9Kxwt3E8hGzgRvenQdOF2ag9iC693oossxJBINWjugcMS+dW7YtYOufPK9B993G93zA+H4Dbhr3/BqUEEYClGIQr5JCGQF25GNm1uHmnDqfpcfRHVe6aP8FiQT0SnK75ccL1/xDuwthC/qzf1t4W07vHxgl3iJag2FKEQh3xREvSygQhSiEIUoRCEKUYhCFKIQhShEIQpRiEIUohCFKEQhClGIQhSi3nVdjS6FKEQhClGIQhSiEIUoRCEKUci3EWGC62tHGNJaj94zbCv9viVofDRdBO+1EJZfcmQ2RGONCEfJy1QwJFpohOgnwlgv4lEiXwXDsq8RbVWkPBjwIknfF1PwnOhxQIIyMbzOWYyITrfL8RoRQROky/OYjpDAY1kgPZEn1whdOxJQ6J+2eH8CKa8bkaOrIz6xxDXyWWUlJD5qgiA9/jaeJzEyfAeqTvDZh2tGrs9khHR7+roROo209NWRqT7pMjKNGL3GmpF4CMPoGkNwz80CkfMkGvWJWAuCezNmfDCGiNURYpxMTcY4dq0Psc3WI9MevZkoMuIhLKOwlqwsEIWJXTZWR1rX78lmxIeW64m+ZkS+MswQSZZfWBnN9SEqJVLItwkJNFSmIckc2RtkjQicz20AwbneZxtAOn0re+TMxtn3iZk9gvaMuLlsZNWFOJHrQkC4ITwL6iQooZgp6iIgKyJ0hMAKesI0ITxMNWETKGHgY6BzZLXwakiOPomby0ZVRES8eLbMAAmolwxY3rCnMVjjzNWQnXJvhGChy4TAlmkBMrlEzBaiCNvGih2/1/tt0lxlhLnuwenYhodqyGQGZAYJglZGBlfxtx7dMQE5gjbTvaDwwKCAPDDq3hF8PadKb6E90/bkn9FCJPhAfEcOkO8QaOyjP0O6rV3PkxTpBkWT6bKKNU4uaQEbniEoNurBUfGBeXIrsocMQFo6ky9xBh+GCDT9EKEJchlYJk2RNiC4BQhpnARHtQfm2a1IDumA2Hr8CqPwAXo0QcgQ+WWKtIcINy9DWiDiMkZ6QbX2YN4IppB191gN4zaFrLUdVGWdXSWB1eb4rDdgZHrROgksI0gRQfeIaEvkRAQWf38+QnCHWSbuyq96A5l1w4fPCOTfgNys4xsSgcaxJBIA0lkIOTtj1hkezERuJtwGIN4JzBCJeOVH1usE8Sz2fm5OWKGfkQ5OkM8IDgdCIgJ+NmDW0w9mIkWjewIzXiKIfk/OeIp14Qm28905M572xGdEIl34yoCTlostVNmmRMjN5uIm3THaMnZJBAoAU8h5osttpp15k5FChm3JPjmBr2xC9eRnZ2eUwrcDStKnrqdvKCERBEh6JnqKQG0LMbhwC0IFjC4oHeCvMViyH2WddWIkSOfJi+TOnwOCGTIawz6BSWzEATJF9NvOBCYGll/pIn69QSRH3McSSWf8NcIkYpxAWImR8oMhAr1SnRdWkj6BuUfgK/hzqByGFCMdkKewStxEuGaYJ+k8Cfagy6GN0AnE4hYz6/MQDKNLE3lMe3lr4MsXCfJFHpDvi6cfDro3EXGyZZ5cAiYnY47IfTdxeQKx2Gb4cl59iuU8EdikUF0PZCUq62yk8Q/E2WAQpAit4UYkEbm9t4XQXycISxFxQk2h3YbIGS9wYxzZsQawigNC044PCqZ+KxLAInMLkofYBUgbvjIv5S6a8NiOReF3AUlj14uw0NkdDJEHQyRkOynS8Agz+DykhSDX8XSIqz9E0BNyxRMegrqYwHDW7GJSmL7wL/qVboLwYoLIUD9EYFWxmHk3EkgEFlRLIkeAnEmEjCEvE4RK5IcUx4vWTjy6GDZgwsO51e9A6A8RfoRDmBgi1IIR0kgRp1/5vUQCC5ZfcTK2/MZhxbiU5zhvniy2xsdIlCAMspWTYSJRTGe8aaMjZKJVkVfXCBEnw5SoFscuyLsSxFgReTpE+BBJkjsznvEYoX1k2qsi+SEirtNUdp2mxshqaSogxREiE24xlnAbMuGOkdUS7hd+s5YgGZYOL/znPHsk/CuxmzkS7Bl65ggtG43MkdGipZCvC3Kd3KlNNYUoRCEKUYhCFKIQhShEIQr5WiIBwsKzOEJWC8V7NdkgprBxghAudyQzQpCZIvHDaNk0F0dG2lxUXqSaBSIEM3WOqdWGbwpmZghpcxzEiMgMoaQrSCAA8eRj7RkhVld+BqSbJTKQJxEjnWwQG5BAHv83OnxoZzSECbU8ibQQfDjJap5Q+b61l4AApmc14xmx5fWj8vF5nhFSNJiJYoTioJANQkUDYorcKO/BtEd6RuvJiZBIQz4CyzJD2sL+bowICMY/ygzx9kX8kJsp6ieZITA/ZGSU/78OK8lTE4af1oBcjhBjiARIG/skWPzCDDDM5ed4fNjJJRyLIyfQ6THCR6EeDmddf4oR+YhTisgHuyUy9galt916soV0wbE4g/+zEQIHw9efEgQvi1xyg5UNiRgUD4ZvUi94svXMhjvQLNmLXhJpIVNekiCfSIGIN0ok0j6g8EkfIcYNxEveo/CumycRAkuw7EkPDfOu9OjyVT60EaIvi8hQj+Q6L0O9pw+R9OjeBKKNEHQ/hKP4aU7cii/RMMcRlA7ZmQiPkday0wglrRgf3U5GboqgLBArY6SVHH30JpcJYk0j9rIPsaRIkoDLZ1gliCXiCwRaycC21oJoctzJi2C8uEUkEowjbA2Ircvr1xjMPzpC4qvaJhG07CPyCSKvSsLyogIW/7ESYWtHTHn5gPzb+a3I99aByMpriPBrxCbsO/Ef8D19ZSTu6rhFbiB0PYiQSNI9GSK6uAth6EhfbXTJMCkjcIvchmirzRMZweQhOmKEjCZjC9Ot1ZFW/MveqDGSITyGBBKhiGqrxa7FELQSYt5A4gOuF9FuIMFNRGP3QewQFlzTRsPrhT00HErXSNxPCeKZwQO4Q6CxxXKi9BjflwgaR4xJJE0phoh3fwSSnEkkiA85heg3EJ3fAwkS5Lq5aLzsTiHGNOLpfLGcKEnxLC1gxAwEHUPwNGKuhlyKy0kkSVNbcumKW4kNM4oECQwvf2+kPY3wJCudRMwxpJVPmvMeOdHJNCIzLm0a0VdDGqKXIGysCELTiLYaAr8ZI0xcl3Myl5tE0DQCq849nrgB94wYceJnhA6f3DgDGQVIarSKyyCyehhDZHuR+YhuL4bIK8DlBaBdco2M7QvTKcRKipEJZGIq3YrYsxFI3HBLH0foEkhn8NwXgjh5iUAYn0a8aYTLkTSJoLtSyCFCJAIZ+zQCSbA3D2G6XYuTfnTHNbDt7k1krONlfhovWt4QEWOIhhZDXr5MEDmbhs01joibiLkEIqceceJNKNGNkdFklFedAqJNIPYUMgoD829XFwx+jTiteMYnyHCNj4OrvUZEPnGjcQPB8pjBPIRriC+EvHqcNJd8msvJHATNQ5BE6DCg3Yk0LRIvWtkgbkUiOC+RlqUJO/6XdrwcSLYZF0GrIZFEnhaL8R6JJvdUERpHkq2dW5BgGDXn37TWvpxcNXmvQL4o6wRiJIi8x4x5IpAmES39D3chHv/r+BjmVHPFF8/HlS9aBZlMU62p+kRLSuzkWTM3YleCeDGyeLpyowhCMkByJDcm9FHpMI3o6bRdGiFyByjeW9FHWf2akVaSzKFhCGTD/aIUsWVa19LTGbUaYt+OGEtvgY9vqrWGa99UIrEeJBhDzHlIXIcvtxk1vtHpoXSLeyq5G0Ps5RGaBPFgYntQG0MMnj7tdwWEJR3OJrZsrxNu+ARI3FLLPQdlVDoYySdtRqW1HkQOXjN51MGYUWmlCBbiruzuVqSVFlbJp+lKK0aKCaIvjwRoOADEWB9dI+Y6kOH4t7O5gF9dgaMQhShEIQpRiEIUohCFKEQh2SHex1QPCB5QXG+xj1s6J7ot//Xg41nLqxk9+EmAemdU58bOAwN+AvfX6/H9TXkH7wjusIfrlJnyn/7UUIhCFKIQhShEIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhShEIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhShEIQpRiEIUohCFKEQhClGIQpZH1AuIKEQhClGIQhSiEIV845H/D5MJR+NGNjvOAAAAAElFTkSuQmCC"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:28:06.347

由于 css3`transform`属性，您还可以在浏览器中进行旋转：

```
#yourimage {
   transform: rotate(90deg);
   -ms-transform: rotate(90deg);
   -moz-transform: rotate(90deg);
   -webkit-transform: rotate(90deg);
} 
```

[**在这里**](http://caniuse.com/#feat=transforms2d)查看对这个属性的支持，基本上所有的浏览器和 IE9 以上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:24:45.717

你的服务器上安装了 Imagick 吗？如果是这样，以下应该工作......

```
$imagick = new Imagick(); 
$imagick->readImage($file);
$imagick->rotateImage(new ImagickPixel(),90);
header('Content-type: image/jpg'); //or whatever the image file is, set headers...
echo $imagick;
$imagick->clear(); 
$imagick->destroy(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:00:16.530

我最终只是保存图像，旋转它，在浏览器中显示它，然后最后删除它。

```
$label = imagecreatefromstring(base64_decode($image));

$rotated_imaged = imagerotate($label, 90, 0);
imagepng($rotated_imaged, '/var/www/vhosts/website.com/httpdocs/labels/fedex-test.png');
unlink('/var/www/vhosts/website.com/httpdocs/labels/fedex-test.png'); 
```

谢谢大家

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T00:24:30.043

可能是这样的。创建一个文件只是为了输出图像

```
<?php // image.php

header('Content-type: image/png');

// get $image string from API or wherever you've stored it

$res = imagecreatefromstring($image);

if ($res === false) exit;

$rotated = imagerotate($res, 90, 0);
imagedestroy($res);

imagepng($rotated);
imagedestroy($rotated);
exit; 
```

然后将其包含为您的`<img>`标签源，例如

```
<img src="image.php"> 
```

这里的例子 - [http://codepad.viper-7.com/nMIu7J](http://codepad.viper-7.com/nMIu7J)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T02:11:34.950

问题是`imagepng()` *要么*将生成的 PNG 发送到文件，*要么*将其发送到浏览器。没有选项可以将其存储在变量中。所以要在不保存文件的情况下做你想做的事，你需要让你的 PHP 脚本即时生成图像，可能来自 base64 编码的`GET`变量。

考虑两个脚本，我们称它们`wrap.php`为`rotate.php`.

**wrap.php**可能看起来像这样：

```
<?php

  // Pixel Art from Star Wars http://www.pixeljoint.com/pixelart/1423.htm
  $image = "iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAMAAACwUBm+AAAAAXNSR0IArs4c6QAAAKtQTFRFsAAAvbWSLUUrLEQqY1s8UYJMqJ1vNTEgOiIdIzYhjIFVLhsXZ6lgSEIsP2U8JhcCVzMsSXZEgXdOO145XJdWOl03LzAYMk4vSXNExr+hwcuxRTs1Qmk+RW9Am49eFRANQz4pUoNMQWc+OSMDTz0wLBsCNVMxa2NBOyUDUoNNSnlEWo9VRGxAVzYFl6tXCggHbLNmMUIcHhwTXkk5f3VNRT8wUT8xAAAACQocRBWFFwAAAAF0Uk5TAEDm2GYAAAPCSURBVHja7d3JctNAFIZRMwRCCGEmzPM8z/D+T8bu/ptbXXJFdij5fMt2Wuo+2UgqxVmtttq5WVotLzBgwIABAwYMGDCn0qVqbo69psPqVpWx+1XG5iaavF8wYMCAAQMGDBgwi4DJ6Y6qkxB1HNlcN3a92gbR5P2CAQMGDBgwYMCAWSxMlrU+UY5yu2l9okfV4bAxUVbf7TJnAwMGDBgwYMCAAbMLMHeqbGR82Zy+VR1Ht81nVca6R+UdTLaU24Ruzd3qM/e4yjnAgAEDBgwYMGDA7AJMd1l/3NRdVGcj3eX/2WEhCmDGxnM7yqygu8XIPjJj8iN/MGDAgAEDBgwYMAuDGb8q0RGlLCHLv1t9qDKWn3vdNHVuEI6HPaxO9Jo3GDBgwIABAwYMmIXBdC9ShGgMk+XnkXUeuGcsP/e1+lhNnZsL/G5Vs3OAAQMGDBgwYMCAWSxMR3SzOmraG5atdy9wZKzb+vg16qyqe2FltbnAgAEDBgwYMGDALAxmTJSuN3WA76rnVca6GTnemGN1WoEBAwYMGDBgwIBZGMxUomy4+xO899V4LAg5Xnc2MGDAgAEDBgwYMGA218Wq+2K1LDqvY9xZu8zN8fICdM6btYABAwYMGDBgwIABMzfH0+pGU5afze2tXebmeAfVz+p8BQYMGDBgwIABAwbMPBzZ+oWmfJrln1273FhkbHzee9WWbw7AgAEDBgwYMGDALAKm43hcdctKgblcPamOhuXnXlY5Xs6bsW4FGyQCAwYMGDBgwIABswiYMceZKgvMo+h8mrHLTdn676rj+FEFoTtHd8MwOxEYMGDAgAEDBgyYRcBM5UhXqiymW3R3c9ARhWO/OmjqfjVZy+xEYMCAAQMGDBgwYBYG073OnCV0RFNhMhaOa9WfKmOB6XjHMN1tQmaAAQMGDBgwYMCA2VWY7vXjz1U4croAzgPztwIDBgwYMGDAgAEDZhswh035NBw59Dww3RgYMGDAgAEDBgwYMJuD6f4tXT7NUqfCdBvZLkxXdgQGDBgwYMCAAQNmt2DGj8WzwAfV/w7T/aq7mxwwYMCAAQMGDBgwuwqTOo7uTwTngflSzQ3TdaJvAwEDBgwYMGDAgAED5gSvgbyo5oHZ4Pc+gwEDBgwYMGDAgAEzhOm+5G0qTGaAAQMGDBgwYMCAAXNaMOcnls3tNwWm+zRzp54NDBgwYMCAAQMGDJh5YNL36k1TLuGvVq+qnKMbS5n7tulT9asCAwYMGDBgwIABA2ZumKuztLnjgQEDBgwYMGDAgNl5mH/4/ltKA6vBNAAAAABJRU5ErkJggg==";

  $fmt='%1$s:<img src="rotate.php?angle=%2$d&orig=%3$s" alt="%1$s" /><br/>' . "\n";

  printf( $fmt, "Original",  0, urlencode($image) );
  printf( $fmt, "Rotated",  90, urlencode($image) );

?> 
```

和**rotate.php**：

```
<?php

  $angle = (int)$_GET['angle'];      // Force this to be an int
  $orig = $_GET['orig'];  // We could do input validation on this, but meh.

  $ih = imagecreatefromstring(base64_decode($orig));

  $rotated = imagerotate($ih, $angle, 0);

  header("Content-Type: image/png");
  imagepng($rotated);

?> 
```

通过将 HTML 生成和 PNG 生成分离到两个单独的 PHP 脚本中，可以实现避免生成磁盘临时文件的原始请求。

# java - 如何在 Spring 和 Hibernate 中使用两个数据库/数据源

> ID：12905781
> 
> 赞同：2
> 
> 时间：2012-10-16T00:11:06.653
> 
> 标签：java, spring, hibernate

我需要在我的独立应用程序中使用两个数据库，一个是本地 HSQLDB，另一个是远程 MySQL。我使用 Spring 3.1.2，Hibernate 4.1.7。到目前为止，我设法只使用了 HSQLDB，这就是我的 DAO 和配置的样子：

```
@Transactional
public abstract class HibernateDao<T, ID extends Serializable> implements Dao<T, ID>{

SessionFactory sessionFactoryHSQL;

public void setSessionFactoryHSQL(SessionFactory sessionFactory) {
    this.sessionFactoryHSQL = sessionFactory;
}

public ID save(T object) {
    return (ID) getCurrentSession().save(object);
}

public void persist(T object){
    getCurrentSession().persist(object);
}

public void update(T object) {
    getCurrentSession().update(object);
}

public void delete(T object) {
    getCurrentSession().delete(object);
}

public List<T> find(String query) {
    return getCurrentSession().createQuery(query).list();
}

public Session getCurrentSession(){
    return sessionFactoryHSQL.getCurrentSession();
}
}

<bean id="sessionFactoryHSQL" 
class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="dataSource">
      <ref bean="dataSourceHSQL"/>
    </property>

    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
         <prop key="hibernate.show_sql">true</prop>
         <prop key="hibernate.hbm2ddl.auto">update</prop>
       </props>
    </property>

    <property name="annotatedClasses">
    <list>
        //annotated classes
    </list>
    </property>
    </bean>

<bean id="txManager" class=
    "org.springframework.orm.hibernate4.HibernateTransactionManager">
   <property name="sessionFactory" ref="sessionFactoryHSQL" />
</bean>
<tx:annotation-driven transaction-manager="txManagerHSQL" />

<bean id="configHSQL"
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>properties/HSQL.properties</value>
    </property>
</bean>

<bean id="dataSourceHSQL" 
         class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

我为 MySQL 创建了单独的 bean，例如 sessionFactoryMySQL、dataSourceMySQL（我不打算粘贴它们的实现，因为它们与 HSQL 几乎相同）。我设法正确地将 sessionFactoryMySQL 注入 DAO，但我不能同时使用两个 sessionFactory，例如我不能执行以下操作：

```
public void persist(T object) {
    sessionFactoryHSQL.getCurrentSession().persist(object);
    sessionFactoryMySQL.getCurrentSession().persist(object);
} 
```

正如我已经发现的那样，它与事务有关，但我无法正确配置事务管理器。我一直在寻找解决方案很长时间，但示例或教程要么不清楚，要么没有提到我的案例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T06:14:48.527

您需要为这两个数据库创建两个会话工厂。检查简单的分步示例：[Spring/Hiberate 中的两个数据源](http://makecodeeasy.blogspot.in/2013/06/two-datasource-in-springhiberate.html)

# c# - 使用交替和分组结构

> ID：12905782
> 
> 赞同：1
> 
> 时间：2012-10-16T00:11:17.260
> 
> 标签：c#, regex

最初我想要一个解析月份数字的正则表达式。起初我想出了以下正则表达式：

```
^([1-9]{1})|(1[012])$ 
```

它匹配任何正数，表示它匹配数字的高位，即：

```
1 => 1
2 => 2
...
9 => 9
10=> 1
...
19=> 1
20=> 2
... 
```

为什么呢？我认为交替构造将`Regex`选择左侧或右侧，同时`^`使其`&`匹配整个字符串。我错过了什么？

PS：我现在确实有一个有效的正则表达式（仅匹配从 1 到 12 的数字）；它的：

```
^([1-9]{1}|1[012])$ 
```

而且我不明白为什么它如此有效....

这是我用来测试的代码：

```
Regex r = new Regex(@"^([1-9]{1})|(1[012])$");//^([1-9]{1}|1[012])$
for (int i = -5; i < 35; i++)
{
    Console.Write(i);
    Console.Write("\t");
    Match m = r.Match(i.ToString());
    if (m.Success)
        Console.WriteLine(m.Groups[0].Value);
    else
        Console.WriteLine("false");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:15:03.807

像这样阅读第一个正则表达式：

```
^([1-9]{1})      # match this
|                # ...OR...
(1[012])$        # match this 
```

要么匹配字符串开头的数字 1-9 并将其存储在第 1 组中，要么匹配字符串末尾的 10-12 并将其存储在第 2 组中。

使用第一个成功的匹配，因此当您匹配正则表达式匹配`10`的部分时。`^([1-9]{1})`您可以看到为什么`20`与这个损坏的正则表达式匹配。

此外，您只打印出组#1 的内容并忽略组#2 的内容。因此，如果第二组括号恰好匹配，您将不会在打印输出中看到它。

```
if (m.Success)
    Console.WriteLine(m.Groups[0].Value); 
```

您的第二个正则表达式通过用括号括住两个`|`备选方案来解决问题，将`^`和`$`锚点留在外面，只留下一组括号，因此结果始终在第 1 组中。

对于它的价值，这`{1}`是不必要的。你可以写：

```
^([1-9]|1[012])$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:18:40.917

[交替运算符在所有正则表达式运算符中的优先级最低。](http://www.regular-expressions.info/alternation.html)

两个正则表达式之间的区别，字面解释，是这样的：

```
( [BEGIN]([1-9]) )    OR    ( (1[012])[END] ) 
```

对比

```
[BEGIN] ( [1-9]    OR    1[012] ) [END] 
```

# css - IE 过滤器语句破坏了 IE9 背景裁剪

> ID：12905784
> 
> 赞同：0
> 
> 时间：2012-10-16T00:11:47.210
> 
> 标签：css, internet-explorer-9

我相信所有浏览器默认使用`background-clip: border-box;`. 这似乎是默认行为。

使用时：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)它将过滤器指定为最终属性。使用 IE9 时，背景会溢出边框，并且border-clip 属性变得无效。

这是一个小提琴来说明：http: [//jsfiddle.net/tPDMb/3/](http://jsfiddle.net/tPDMb/3/)

我最终只是暂时删除了 filter 语句，但这会导致 ie9 及更低版本根本没有背景渐变。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:59:01.157

您正确地说默认行为是剪辑到边框框，的初始值[`background-clip`](http://www.w3.org/TR/css3-background/#the-background-clip)确实是`border-box`.

问题是 IE 过滤器不是真正的 CSS 背景层。因此，IE 渐变过滤器将忽略所有背景和边框定位/剪切属性，例如`background-clip`,`background-position`和`border-radius`. 不幸的是，这是设计使然。在尊重这些属性的同时，让渐变背景在 IE9 及更低版本中工作的唯一方法是使用预渲染的渐变图像。如果您需要支持较旧的 IE，只需将 ColorZilla 提供的 SVG 部分替换为 PNG 图像或类似图像。

# c++ - MessageBox的Qt实现

> ID：12905791
> 
> 赞同：0
> 
> 时间：2012-10-16T00:13:04.023
> 
> 标签：c++, linux, qt

引用一个较早的问题：[MessageBox 的 GTK 实现](https://stackoverflow.com/questions/263/gtk-implementation-of-messagebox)

我有一个非常相似的问题，除了用 Qt 代替 GTK。

与那个问题一样，从一个还不是 Qt 应用程序的应用程序中显示使用 Qt 的消息对话框，我至少需要做什么？

我认为需要发生以下情况：

*   初始化 Qt 及其事件循环
*   安装空闲回调以调用对话框
*   关闭对话框时退出事件循环并完成 Qt。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:33:28.187

您正在尝试从控制台应用程序中显示一个消息框，对吗？

如果这是正确的，你需要在你的 pro 文件中添加这一行：

> QT += gui

在你的 main.cpp 文件中完成之后，写下这样的内容。Qt 为你创建一个事件循环

```
#include <QtCore/QCoreApplication>
#include <QTextStream>
#include <QMessageBox>
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QMessageBox::information(NULL,"Hello","Salut","Ok");

    return a.exec();
} 
```

# linux - 在 Linux 内核中找不到方法 __kernel_vsyscall

> ID：12905799
> 
> 赞同：1
> 
> 时间：2012-10-16T00:14:12.887
> 
> 标签：linux, linux-kernel, kernel

我正在寻找用于进行系统调用的 linux 内核中的 __kernel_vsyscall 方法。我想观察它的代码以了解更多关于它的信息，但我的 grep 搜索似乎无法找出它，而且我在互联网上找不到它的位置。谁能指出我的确切位置？它可以被操纵吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T00:54:18.427

假设您的当前目录位于 linux 内核源代码的头部，这里是定义 __kernel_vsyscall 符号的文件的位置。（下面显示的所有内容仅适用于 x86，在许多其他硬件架构中尚不存在）。

```
./arch/x86/vdso/vdso32/syscall.S:
__kernel_vsyscall:

./arch/x86/vdso/vdso32/sysenter.S:
__kernel_vsyscall:

./arch/x86/vdso/vdso32/int80.S:
__kernel_vsyscall: 
```

如您所见，它本质上是在三个文件中声明和实现的：int80.S、sysenter.S 和 syscall.S。

以系统调用.S：

```
__kernel_vsyscall:
.LSTART_vsyscall:
        push    %ebp
.Lpush_ebp:
        movl    %ecx, %ebp
        syscall
        movl    $__USER32_DS, %ecx
        movl    %ecx, %ss
        movl    %ebp, %ecx
        popl    %ebp 
```

如果您阅读上述文件和“arch/x86/vdso/vdso32/sigreturn.S”的组合，则上面的“syscall”实际上解析为“int 0x80”。

而对于sysenter.S，它使用intel汇编指令“sysenter”来实现系统调用转换。

而对于 int80.S，它使用“int 0x80”进行系统调用转换。

如果你问哪个是用于系统调用实现的方法，请查看 arch/x86/vdso/vdso32-setup.c：

```
int __init sysenter_setup(void)
{
        void *syscall_page = (void *)get_zeroed_page(GFP_ATOMIC);
        const void *vsyscall;
        size_t vsyscall_len;

        vdso32_pages[0] = virt_to_page(syscall_page);

#ifdef CONFIG_X86_32
        gate_vma_init();
#endif

        if (vdso32_syscall()) {
                vsyscall = &vdso32_syscall_start;
                vsyscall_len = &vdso32_syscall_end - &vdso32_syscall_start;
        } else if (vdso32_sysenter()){
                vsyscall = &vdso32_sysenter_start;
                vsyscall_len = &vdso32_sysenter_end - &vdso32_sysenter_start;
        } else {
                vsyscall = &vdso32_int80_start;
                vsyscall_len = &vdso32_int80_end - &vdso32_int80_start;
        }

        memcpy(syscall_page, vsyscall, vsyscall_len);
        relocate_vdso(syscall_page);

        return 0;
} 
```

如您所见，现代操作系统更喜欢 sysenter 方法，因为它比 int80 方法快。（象征性地，“vds32_syscall_start”将回退到 int80）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:18:51.433

有趣的是，在您的互联网搜索中，您没想到要搜索 stackoverflow.com：__kernel_vsyscall[是什么？](https://stackoverflow.com/questions/344829/what-is-kernel-vsyscall)

要回答您更具体的问题，看起来符号本身是在（对于 x86）arch/x86/vdso 中定义的。它在汇编中，而不是 C.

# c# - 我无法以编程方式访问我的收件箱

> ID：12905802
> 
> 赞同：1
> 
> 时间：2012-10-16T00:14:45.887
> 
> 标签：c#, email

> **可能重复：**
> [将 POP3 客户端功能集成到 C# 应用程序中？](https://stackoverflow.com/questions/236381/integrating-pop3-client-functionality-into-a-c-sharp-application)

我需要将发送到分发列表 (news@mycompany.com) 的所有电子邮件转储到 SQL Server。我可以访问 POP3 服务器并将所有电子邮件存储在我的 Gmail 收件箱中。从逻辑上讲，问题很简单，我需要做的就是在我的 Gmail 帐户或 POP3 服务器上找到所有电子邮件，这些电子邮件发送到主题`news@mycompany.com`或`[MyCompany News]`主题中。

但是，我无法以编程方式访问我的收件箱。我尝试过使用多个库`Google.GData.Client.dll`，`OpenPop.Pop3`但没有运气。你以前做过吗？你有什么建议吗？

# cakephp - 错误：SQLSTATE[42S02]：未找到基表或视图

> ID：12905806
> 
> 赞同：4
> 
> 时间：2012-10-16T00:15:17.937
> 
> 标签：cakephp, cakephp-2.2

我正在使用 CakePHP 2.2.3 版。将我的数据库导入 PHPMyAdmin 后，我继续创建我的 MVC 唱 CakePHP 的烘焙控制台。这一切都很顺利，我宣布了我的关系等等......

创建最后一个“视图”时会出现问题（所有模型/控制器均无错误地创建）。

完整的错误是：错误：SQLSTATE [42S02]：未找到基表或视图：1146 表“website.connections”不存在

我可以确认它确实存在，包括表、控制器、模型和视图！

我非常困惑，任何帮助将不胜感激。

提前谢谢了。

**更新**

在“成员”模型上，在注释掉与连接相关的“有很多”代码时，错误会出现在它下面的下一个关系中。关系代码为：

```
public $hasMany = array(
    'Connections' => array(
        'className' => 'Connections',
        'foreignKey' => 'Member_ID',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'Recommendations' => array(
        'className' => 'Recommendations',
        'foreignKey' => 'Member_Being_Recommended_ID',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
    'Groups' => array(
        'className' => 'Groups',
        'foreignKey' => 'Member_ID',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

因此，一旦“连接”关系被注释掉，错误就会转移到建议，即它下面的那个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T06:36:58.157

As per CakePHP's [conventions](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html) all model names should be singular not plural, so that's the first thing you should fix.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:53:06.797

很抱歉听起来重复，但您收到此错误，因为在您的应用程序连接到的数据库中找不到表 (website.connections)。

以下是一些帮助您解决此问题的提示：

1.  使用 PHPMyAdmin 验证表（连接）是否存在并且它在数据库（网站）中。如果您使用共享主机，您的数据库名称可能有一个您无法控制的前缀（即您的用户名_网站）。

2.  确保您连接到正确的数据库（[配置文档](http://book.cakephp.org/2.0/en/development/configuration.html#database-configuration)）。

3.  如果您有一个名为 Connection 的模型不使用表，请确保您添加`public $useTable = false;`到它。

# javascript - 如何使 SVG 文本元素“可点击”？

> ID：12905808
> 
> 赞同：31
> 
> 时间：2012-10-16T00:15:32.803
> 
> 标签：javascript, svg

我有一张带有 SVG 文本元素的地图来命名这些位置。我希望位置（形状）是可点击的，它们是可点击的，但是因为文本元素在它们之上，如果有人将鼠标悬停在文本元素上并点击，那么什么也不会发生，因为没有点击形状：文本元素是. 我怎样才能做到这一点，如果单击文本元素，单击会“穿过”它并到达形状？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-16T00:19:41.230

为此，Mozilla 引入了一个名为*pointer-events*的 CSS 属性。它最初仅限于 SVG 形状，但现在现代浏览器中的大多数 DOM 元素都支持它：

```
span.label { pointer-events: none; } 
```

*   [https://developer.mozilla.org/en-US/docs/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)
*   [http://caniuse.com/pointer-events](http://caniuse.com/pointer-events)

这个问题的答案有一些关于在旧 IE 中实现相同结果的好信息：

[IE 的 css 'pointer-events' 属性替代](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T00:18:31.277

将此 css 添加到文本中：

```
pointer-events: none; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T19:30:35.460

如果可以使用“<g>”元素内的文本对地图形状进行分组，那么您可以将单击附加到组而不是形状。这样做还可以带来额外的好处，即应用于组的变换将同时应用于形状和文本。如果无法进行分组，那么我同意之前的答案绝对是您的最佳选择。基本上正在发生的事情是这样的：大多数人都认为点击向下穿透你的 z-index，但它不是那样工作的。点击通过 DOM 冒泡，所以如果文本不处理点击，它会冒泡到下一个 DOM 元素，即父组或容器。这会继续向上直到到达最顶层的 DOM 元素。

# winforms - 如何打开刚刚添加的 ContextMenuStrip？

> ID：12905809
> 
> 赞同：3
> 
> 时间：2012-10-16T00:15:43.540
> 
> 标签：winforms, windows-forms-designer

我在我的表单中添加了一个 ContextMenuStrip，但在该表单中*没有任何地方*（否则可以完美运行，包括向数据库添加记录）我可以右键单击以显示上下文菜单。

也就是说，当我运行表单应用程序时，我右键单击该表单中的任何位置，就好像我根本没有右键单击：**没有菜单显示**（是的，我添加了菜单项）。

**我错过了什么？**

![在此处输入图像描述](../Images/10eed459febcbbc50ede66a7018fe914.png)

另外，在那个时候，有没有办法让它只在右键单击某些控件时显示？

（注意：我的问题是语言中立的。一旦我让 ContextMenuStrip 显示，我想我知道如何[处理它的事件](https://stackoverflow.com/a/4202123/1731850)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:39:32.990

回答我自己的问题：

对于我希望显示上下文菜单的控件（例如 DataGridView），我需要转到其`Behavior`属性并从列表框中选择已创建的 ContextMenuStrip 实例：

![在此处输入图像描述](../Images/4b7772cc4842d7457d2b66ac60b9244a.png)

# c++ - 对始终返回相同值的 win32 api 的单个查询

> ID：12905811
> 
> 赞同：-1
> 
> 时间：2012-10-16T00:15:55.147
> 
> 标签：c++, winapi

> **可能重复：**
> [如何在 exe 或 dll 中隐藏字符串？](https://stackoverflow.com/questions/926172/how-to-hide-strings-in-a-exe-or-a-dll)

我正在寻找一个 win32api 调用，它总是返回相同的值，最好是一个可作为字符串查看的值，但其他类型也可以。无论是从西班牙语的 Windows XP SP2 还是英语的 Windows 7 执行，它都必须返回相同的值。我找不到任何东西，并希望得到一些帮助。

我试图通过从 API 中找到一个在 XP/7 和不同语言中相等的常量变量来隐藏 C++ 应用程序中的字符串，作为加密的基础。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:04:42.753

很难想象有人会花时间向 API 添加这样一个根据定义是不必要的功能。

我的第一个猜测是保留字段或过时的函数，但前者总是 0，而后者很难依赖。

那就是说...

*   [FormatMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679351%28v=vs.85%29.aspx)具有恒定（或中性）语言 ID 和错误代码？
*   [GetLocaleInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318101%28v=vs.85%29.aspx) (LOCALE_INVARIANT, LOCALE_ILDATE, ...)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:46:04.283

对于我的基于 AES 的加密代码，我的密钥基于自定义编写的随机数生成器，该生成器每次调用时都会生成相同的值。使静态分析代码以找出逻辑变得更加困难，但在运行时动态创建一致的值，因此它不会在编译时静态存储在应用程序中。

# python - 如何检查二维列表中是否有对象

> ID：12905812
> 
> 赞同：-3
> 
> 时间：2012-10-16T00:16:10.077
> 
> 标签：python, list

如何检查是否有对象位于 2D 列表的特定索引中？

我想访问该对象并将其作为另一个对象的参数发送出去。

此对象与 2D 列表不在同一类中，但它在导入的类中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:19:50.770

你能做的是

```
try :
    if my_array[i][j] : #Checks if the array contains something not empty
        if isinstance(my_array[i][j], YourObjectType) :
            print "We have a type YourObjectType at position %d, %d" % (i, j)
except : 
    print "Ouch, nothing in the position %d,%d" % (i, j) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:20:20.693

假设`__eq__`为这个对象正确定义了，那么你可以这样做：

```
myObjInstance in itertools.chain.from_iterable(my2dList) 
```

或者，如果这更符合您的要求：

假设您要检查外部索引`x`和内部索引`y`：

```
try:
    if isinstance(my2dList[x][y], MyObjectClass):
        print "Yay! there's a MyObjectClass object there. Sending it off as a param to the other function now…"
        myOtherFunction(my2dList[x][y])
    else:
        print "Yay! there's an object there"
except IndexError:
    print "Boo! no object there" 
```

# networking - 奇偶校验错误检测，特定方案如何不起作用的 4 位示例

> ID：12905815
> 
> 赞同：0
> 
> 时间：2012-10-16T00:16:32.040
> 
> 标签：networking, network-programming, parity, error-detection

嘿，所以我要为下周的期中考试做一些修改，我有一个问题，我无法找到材料或理解如何回答。

![在此处输入图像描述](../Images/31c7abf5a0e72f6cd386b7f54b6f2942.png)

我可以看到单个错误、双重或三重错误是如何发生的，但我不确定 4 位错误会是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:21:56.737

如果您有任何 2x2 块

```
1  0
0  1 
```

并反转该块中的每一位，然后奇偶校验在任何行或列上都不会改变。

# facebook - Phonegap 2.1 和 facebook 插件出现 NSInvalidArgumentException 错误

> ID：12905830
> 
> 赞同：0
> 
> 时间：2012-10-16T00:18:52.503
> 
> 标签：facebook, cordova, phonegap-plugins

我一直在这里遵循 facebook phonegap 插件安装说明：[https](https://github.com/davejohnson/phonegap-plugin-facebook-connect) ://github.com/davejohnson/phonegap-plugin-facebook-connect 。

在花时间并密切关注每一步之后，我能够在 xcode 的模拟器中成功构建项目。我正在使用 phonegap 2.1，它是从 phonegap 站点下载的，而不是直接从 github 下载的。

初始屏幕加载正常，但是一旦应用程序运行，这是 xcode 的输出：

> 2012-10-15 17:04:40.604 NeighborFavor [1648:19a03] 多任务-> 设备：是，应用程序：是
> 
> 2012-10-15 17:04:40.606 NeighborFavor [1648:19a03] -[__NSCFDictionary >dictionaryWithLowercaseKeys]：无法识别的选择器发送到实例 0xa1943a0
> 
> 2012-10-15 17:04:40.607 NeighborFavor [1648:19a03] ***由于未捕获 > 异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary >dictionaryWithLowercaseKeys]：无法识别的选择器发送到实例 0xa1943a0”
> 
> ***首先抛出调用栈：
> 
> (0x2a32012 0x2445e7e 0x2abd4bd 0x2a21bbc 0x2a2194e 0xbfc9 0xb39e 0xb5a5 0x3939 0x73446e >0xb63e 0x3250 0x6527b7 0x652da7 0x653fab 0x665315 0x66624b 0x657cf8 0x294edf9 0x294ead0 >0x29a7bf5 0x29a7962 0x29d8bb6 0x29d7f44 0x29d7e1b 0x6537da 0x65565c 0x2ef6 0x2e25 0x1)
> 
> libc++abi.dylib：终止调用抛出异常

任何帮助都会非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:00:48.133

你添加`-load_all`到你`Other Linker Flags`的 Xcode 中了吗？如果没有外部库/框架中的标志类别，则不会加载并且`dictionaryWithLowercaseKeys`不是 Apple 为字典提供的标准方法，它很可能是由类别添加的方法（在运行时向其添加其他方法的类的扩展） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:45:21.580

在 ios 教程[https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)之后的第 9 步中，我犯了一个错误。

完成后，其他链接器标志值应如下所示

> -weak_framework CoreFoundation -weak_framework UIKit -weak_framework AVFoundation -weak_framework CoreMedia -weak-lSystem -all_load -Obj-C -lsqlite3.0

请注意字符串末尾的 -lsqlite3.0，而不是将其添加为新的键/值对。一旦我改变了它，它就起作用了。再次感谢您的帮助。

# ruby-on-rails-3 - 生成迁移时间戳的最佳方法

> ID：12905837
> 
> 赞同：15
> 
> 时间：2012-10-16T00:19:41.147
> 
> 标签：ruby-on-rails-3

我正在尝试为 Rails 迁移生成时间戳，作为 rake 任务的一部分，我将其从引擎复制到我的应用程序中。

以下工作正常，但由于 rails 已经做了同样的事情，我不知道是否有更好的方法来做到这一点？

```
Time.now.to_s.split(" ")[0..1].join(" ").gsub!(/\D/, "") 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-09-13T14:20:07.007

```
@timestamp = Time.now.strftime("%Y%m%d%H%M%S") 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-17T09:49:33.170

```
Time.now.utc.strftime("%Y%m%d%H%M%S") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-29T14:13:02.317

您可以使用[timestamp.to_s(:number)](https://apidock.com/rails/Time/to_formatted_s)。

还有其他格式：

```
:db            # => "2007-12-04 00:00:00"
:number        # => "20071204000000"
:short         # => "04 Dec 00:00"
:long          # => "December 04, 2007 00:00"
:long_ordinal  # => "December 4th, 2007 00:00"
:rfc822        # => "Tue, 04 Dec 2007 00:00:00 +0000"
:iso8601       # => "2007-12-04T00:00:00+00:00" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-29T12:16:19.220

所以这可能是我在 SO 上创建的最元的答案。接受的答案和@mambo 的答案是正确的

> `Time.now.utc.strftime("%Y%m%d%H%M%S")`

但。

如果您搜索（SO 直接或 Google）“如何创建像 Rails 迁移文件名这样的时间戳？” 它不会把你带到这里。但是，如果你开始输入它作为你的问题标题，它会很幸运地显示这个答案

因此，我没有提出一个关于如何使用 Ruby 创建分代日期时间的高度重复的问题，而是在这个答案中添加了希望被搜索算法拾取的关键字，并为像我这样的未来提问者回答这个问题。

# prolog - 在 Prolog 中设置联合操作：解释

> ID：12905839
> 
> 赞同：3
> 
> 时间：2012-10-16T00:19:54.100
> 
> 标签：prolog

```
union([H|T],[],[H|T]).     
union([],[H|T],[H|T]).    
union([H|T], SET2, RESULT) :- member(H,SET2), union(T,SET2,RESULT).    
union([H|T], SET2, [H|RESULT]) :- not(member(H,SET2)), union(T,SET2,RESULT). 
```

* * *

我能够理解它正在遍历第一个列表并根据元素是否是第二个列表的成员进行添加。我明白了逻辑。但是，工作流程对我来说很神秘，一旦第一个列表用完，它就会将“第二个列表”的元素添加到结果中。

请有人举一个简单的例子，比如`union([1,2], [2,3], Result)`，并解释工作流程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T02:01:54.560

我假设您正在调用 union/3 并实例化了第一个和第二个参数。第三个参数可以在调用时未实例化，并在返回时与两个列表的并集统一，或者如果它已经实例化，则可用于检查它是否与前两个列表的（有序）并集匹配。

第一个子句声明如果第二个参数是空列表*并且*第一个列表至少有一个元素，那么联合就是第一个列表。同样，第二个子句指出如果第一个参数是空列表*并且*第二个列表至少有一个元素，那么联合就是第二个列表。

第三个子句在第一个列表上递归并检查第二个列表以查看该项目是否已经存在。在这种情况下，它只是用第一个列表的尾部调用自己。

第四个子句测试第一个列表的头部以检查它是否不包含在第二个列表中，并使用尾部递归调用（就像第三个子句一样）。然而，在递归返回时，它将该项添加到第三个列表的头部，从而将该项添加到联合中。

请注意，在您的实现中，两个空集的并集总是会失败。您可以通过修改第一个或第二个子句以允许一个空列表来解决此问题，或者为此情况添加另一个子句。例如

```
union([],[],[]). 
```

现在让我们看看当我们调用时会发生什么`union([1,2],[2,3], Result)`：

前两个子句将无法匹配，因为它们都不是空列表。

我们进入第三个子句并检查元素 1 不是第二个列表的成员，因此在那里失败。

我们现在尝试第四个子句并测试元素 1 i 不在第二个列表中，所以我们调用`union([2], [2,3], Result)`, 我们标记这个执行点 ( ***1** )。

同样，前两个子句将无法匹配，因此我们输入第三个子句。这里我们测试元素 2 确实包含在第二个列表中，所以我们调用`union([], [2,3], Result)`，我们标记这个执行点 ( ***2** )

现在第一个子句失败了，因为第一个参数是空列表。我们现在输入第二个子句，将第三个参数与第二个列表 ([2,3]) 统一起来。

此时我们返回到 (*2)，现在 Result 被实例化为 [2,3]。该子句在此结束，因此我们将第三个参数与 [1,2,3] 绑定，然后返回 ( ***1** )。

我们现在在 ( ***1** ) 那里 Result 并且因此第三个参数被实例化为 [1,2,3]。

这给了我们第一个结果**[1,2,3]**。

然而，当我们在 ( ***2** ) 中成功时留下了一个选择点，所以如果我们要求 Prolog 搜索另一个答案，它仍然必须尝试 union([2],[2,3], Result) 的第四个子句。

所以我们进入第四个子句来测试 2 是否不是 [2,3] 的成员失败了，所以 Prolog 会告诉我们没有其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:28:10.647

您没有检查`SET2`，因此假设其中没有重复项，则基本递归可以是单个谓词

```
union([], U, U). 
```

@gusbro 已经解释过，当`H`它不属于 SET2 时，它在递归调用成功*后被放置在结果的（本地）前面。*

解释应该可以消除您的疑虑，但请注意`not`/1 基本上重复了之前（失败）调用中已经执行的相同测试。那么更好的代码可能是

```
union([H|T], SET2, RESULT) :-
   member(H,SET2), !, % note the commit
   union(T,SET2,RESULT).    
union([H|T], SET2, [H|RESULT]) :- 
   % useless now 
   % not(member(H,SET2)),
   union(T,SET2,RESULT). 
```

这等效于您的代码，假设`member`/2 没有副作用（确实如此）。

`not`/1 可以使用`!`/0 来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T08:37:40.710

在[我](https://stackoverflow.com/a/29819232/4609915)对相关问题“ [2 个列表的交集和并集](https://stackoverflow.com/questions/9615002/intersection-and-union-of-2-lists)”的回答中，我提出了交集和并集的逻辑纯实现。

与您问题的其他答案不同，纯变体是单调的，因此在与非基本术语一起使用时在逻辑上保持合理。

# c++ - 循环计数的有符号值与无符号值

> ID：12905840
> 
> 赞同：14
> 
> 时间：2012-10-16T00:19:57.073
> 
> 标签：c++, vector, int, size-t

因此，我在程序中有一个普通的 for 循环，通过对象向量（我定义的类型的对象，如果相关的话）：

```
for(int k = 0; k < objects.size(); k++){ ... } 
```

...当我编译时，我收到这个警告：

```
warning: comparison between signed and unsigned integer expressions 
```

这是有道理的，因为我认为`size()`对于向量返回 a `size_t`。但是这有什么关系呢？一定数量的元素（甚至内存块）不是你可以计算的整数吗？更重要的是，由于我的程序有多个这样的循环并且碰巧有很多段错误，这可能是它的一部分吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T00:23:07.080

当`object.size()`返回的值*大于 的最大可表示值`k`*时，就会出现问题。由于是有符号的，与¹`k`相比，它只有最大值的一半。`size_t`

现在，这可能不会在您的特定应用程序中发生（在典型的 32 位系统上，您的集合中将有超过 20 亿个对象），但使用正确的类型总是一个好主意。

^(1\. 先发制人的反驳：是的，这仅适用于使用典型二进制补码算法的机器，`int`以及`size_t`使用相同位数表示的机器。)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-16T00:46:54.667

已经回答得很好，但我会添加我的 S/0.02：“正确”的方法是：

```
for (typename std::vector<MyObject>::size_type i = 0; i < object.size(); ++i) { ... } 
```

只有有抱负的语言律师才会这样写，甚至他们也可能在读到好东西之前就停止阅读。

使用 C++11，您可以利用`decltype`：

```
for (decltype(object.size()) i = 0; i < object.size(); ++i) { ... } 
```

或者您可以利用`auto`：

```
for (auto i = object.size() - object.size(); i < object.size(); ++i) { ... } 
```

或者您可以只使用`size_t`，但您仍然可能对溢出有疑问，因为`vector<MyObject>`的 size_type 可能大于 size_t。（不是，但不能保证）：

```
for (size_t i = 0; i < object.size(); ++i) { ... } 
```

那么，一个诚实的程序员应该做什么呢？

最简单的解决方案是 STL 从一开始就一直在推广的解决方案。除了一开始，写起来也很痛苦：

```
for (typename std::vector<MyObject>::iterator_type it = object.begin(); it != object.end(); ++it) { ... } 
```

现在，C++11 确实对您有所帮助。你有一些非常好的选择，从简单的开始：

```
for (auto it = object.begin(); it != object.end(); ++it) { ... } 
```

但它变得更好（鼓，请）......：

```
for (auto& val : object) { ... } 
```

这就是我会使用的那个。

* * *

编辑添加：

Cory Nelson 在评论中指出，还可以通过以下方式缓存 object.end() 的结果：

```
for (auto it = object.begin(), end = object.end(); it != end; ++it) { ... } 
```

事实证明，该`for (var : object)`语法生成​​的代码与 Cory Nelson 提出的代码非常相似。（所以我鼓励他和你只使用后者。）

但是，这与其他语义有细微的不同，包括作为原始帖子主题的迭代。如果您在迭代期间以改变其大小的方式修改容器，那么您必须非常仔细地考虑问题。灾难的可能性很大。

迭代可能在迭代期间被修改的向量的唯一方法是使用整数索引，如原始帖子中所示。其他容器更宽容。您可以使用在每次迭代时调用 object.end() 的循环来迭代 STL 映射，并且（据我所知）即使面对插入和删除它也可以工作，但不要尝试使用 unordered_map，或向量。如果你总是在最后推并在前面弹出，它确实适用于双端队列，如果你在广度优先步行中使用双端队列作为队列，这很方便；我不确定你是否可以在后面弹出双端队列。

确实应该有一个简单的总结容器类型对迭代器和元素指针（它们并不总是与迭代器相同）的容器修改的影响，因为这都是由标准指定的，但我从来没有遇到过任何地方。如果你找到了，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T00:23:19.013

在大多数情况下，直到您的向量包含的元素多于有符号的 int 可以表示的元素，这并不重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T00:41:36.187

关于循环变量的有符号/无符号比较的警告流中可能会丢失重要的警告。甚至一些有符号/无符号的比较警告也很重要！因此，通过定义 size 函数来消除不重要的警告，如下所示：

```
#include <stddef.h>    // ptrdiff_t
#include <utility>     // std::begin, std::end

typedef ptrdiff_t Size;
typedef Size Index;

template< class Type >
Size nElements( Type const& c )
{
    using std::begin;  using std::end;
    return end( c ) - begin( c );
} 
```

然后你可以写例如

```
for( int i = 0;  i < nElements( v );  ++i ) { ... } 
```

或者，*使用迭代器*，例如

```
for( auto it = begin( v );  it != end( v );  ++it ) { ... } 
```

和/或使用基于 C++11 范围的`for`循环，

```
for( auto const& elem : v ) { ... } 
```

无论如何，在最高实际警告级别进行干净编译对于摆脱那些段错误和其他错误很重要。

您应该关注的另一个领域是 C 风格的演员表：摆脱他们！;-)

# intellij-idea - IDEA：如何使用超类创建 toString()

> ID：12905847
> 
> 赞同：14
> 
> 时间：2012-10-16T00:20:43.803
> 
> 标签：intellij-idea

如果`A extends B`，使用`IntelliJ`想法，我如何`toString()`使用 B 的公共（或受保护）方法自动生成。

在此示例中，如何包含 FileRow 中的公共方法？

![在此处输入图像描述](../Images/b9e09b9212e08a96a45e6137223eb527.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T11:18:23.647

有一个模板可以使用`super.toString()`，但是没有办法直接引用超类成员。可能值得为此功能[提交新请求。](http://youtrack.jetbrains.net/issues/IDEA)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-25T14:46:50.303

此问题在[https://youtrack.jetbrains.com/issue/IDEA-93029中报告](https://youtrack.jetbrains.com/issue/IDEA-93029)

它被标记为已通过修复版本 2017.1（内部版本 171.1161）解决：它很快就会出来 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-22T22:39:31.613

只需更改生成`toString()`方法的模板：

Alt+Insert 打开字符串生成器窗口 -> 单击`Settings`-> 选择`Templates`选项卡。

然后将您想要的模板复制到一个新模板中，并在语句`toString`之前添加超类部分。`return`

```
 #if ($class.hasSuper)
     stringBuilder.append(super.toString());
   #end 
```

# jquery - 使用 JQuery 从 JSON 或 XML 提要生成 HTML 表单

> ID：12905849
> 
> 赞同：18
> 
> 时间：2012-10-16T00:20:48.630
> 
> 标签：jquery, xml, json

我想使用 Jquery 创建基于 XML 或 JSON 数据的 HTML 表单，并且我还计划验证任何可能为空或不正确的表单字段。

我想知道是否有任何其他程序/函数可以动态生成这样的表单以及实现它的最佳方法。任何最适合工作示例的 jquery 小部件或库将不胜感激

还有什么提要在这种情况下最好使用 XML 或 JSON 并解释原因？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T00:31:57.167

我发现其中一些可能对您有所帮助：

**从 JSON 模式生成表单：**

*   [如何使用 JSON 定义创建 html 表单？](https://stackoverflow.com/questions/5508871/how-to-create-a-html-form-using-a-json-definition)
*   [http://neyric.github.com/inputex/examples/json-schema.html](http://neyric.github.com/inputex/examples/json-schema.html)
*   [JavaScript 从 JSON 或类似数据生成/呈现动态 HTML 表单？](https://stackoverflow.com/questions/5042086/javascript-to-generate-render-dynamic-html-form-from-json-or-similar-data)
*   [任何生成html表单的工具](https://stackoverflow.com/questions/5376618/any-tool-to-generate-html-form)

**从 XML 模式生成表单：**

*   [http://www.totallysmartit.com/examples/xml/questionnaire/](http://www.totallysmartit.com/examples/xml/questionnaire/)
*   [从 XML 创建 HTML 表单](https://stackoverflow.com/questions/3736658/create-html-form-from-xml)
*   [http://www.datamech.com/XMLForm/](http://www.datamech.com/XMLForm/)

**来自不同库的样本以生成表单：**

*   [http://www.alpacajs.org/examples.html](http://www.alpacajs.org/examples.html)
*   [http://jsonforms.io/#/examples](http://jsonforms.io/#/examples)
*   [http://schemaform.io/examples/bootstrap-example.html](http://schemaform.io/examples/bootstrap-example.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-18T18:21:12.837

只是给你另一个选择，我创建的一个库：

[https://github.com/brutusin/json-forms](https://github.com/brutusin/json-forms)

> JSON 模式到 HTML 表单生成器，支持动态子模式（动态分辨率）。具有零依赖性的可扩展和可定制的库。提供的引导插件

```
 var bf = brutusin["json-forms"].create({
  "$schema": "http://json-schema.org/draft-03/schema#",
  "type": "object",
  "properties": {
    "s1": {
      "type": "string",
      "title": "A string",
      "description": "A string input"
    },
    "num1": {
      "type": "integer",
      "title": "A number",
      "minimum": 1,
      "maximum": 10,
      "multipleOf": 3,
      "description": "An integer multiple of `3`, between `1` and `10` (inclusive)"
    },
    "array1": {
      "type": "array",
      "title": "An array values",
      "items": {
        "type": "object",
        "properties": {
          "value": {
            "type": "string",
            "title": "Value"
          }
        }
      }
    }
  }
});
var container = document.getElementById('container');
bf.render(container);
```

```
<link rel="stylesheet" href='https://cdn.jsdelivr.net/brutusin.json-forms/1.3.2/css/brutusin-json-forms.min.css'/>
<link rel="stylesheet" href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'/>
<script src="https://code.jquery.com/jquery-1.12.2.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/brutusin.json-forms/1.3.2/js/brutusin-json-forms.min.js"></script>
<script src="https://cdn.jsdelivr.net/brutusin.json-forms/1.3.2/js/brutusin-json-forms-bootstrap.min.js"></script>
<div id="container"></div>
<hr>
<button class="btn btn-primary" onclick="alert(JSON.stringify(bf.getData(), null, 4))">getData()</button>&nbsp;<button class="btn btn-primary" onclick="if (bf.validate()) {alert('Validation succeeded')}">validate()</button>
```

[http://brutusin.org/json-forms](http://brutusin.org/json-forms)上的更多实时示例

# asp.net - 将 XSLT 转换应用于 ASPX 文件

> ID：12905852
> 
> 赞同：0
> 
> 时间：2012-10-16T00:20:52.733
> 
> 标签：asp.net, parsing, xslt

我们即将重组一个包含数百个 ASPX 页面的大型项目，该页面执行重大更改。我计划使用 XSLT 剥离/编辑页面，但是由于页面中的服务器声明，我尝试过的两个工具无法解析 ASPX。

我过去使用的工具是[xmlstarlet](http://xmlstar.sourceforge.net/)和[xsltproc](http://www.zlatkovic.com/libxml.en.html)

测试.cmd

```
REM xml tr  --html test.xsl %ProjDir%\%%f > %%~dpnf.ascx
libxslt\xsltproc.exe --novalid --html -o %ProjDir%\%%~nf.ascx test.xsl %ProjDir%\%%f 
```

测试.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:asp="http://schemas.microsoft.com">
    <xsl:output 
        method="text" version="1.0" encoding="UTF-8" indent="yes" 
        omit-xml-declaration="yes" />
        <!-- method="html" text xml disable-output-escaping="yes"  -->

    <xsl:template match='@*|node()'>
        <xsl:copy>
            <xsl:apply-templates select='@*|node()'/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

输出;

```
test//Test.aspx:1: HTML parser error : htmlParseStartTag: invalid element name
<%@ Page Language="vb" AutoEventWireup="false" Codebehind="Test.aspx.vb" 
 ^
test//AcronymAdd.aspx:21: HTML parser error : Tag fc1:frontendheadercontrol invalid
<fc1:FrontEndHeaderControl ID="Heading" runat="server" />
                                                       ^
... 
```

任何人都可以推荐一种解析 asp.net 页面以启用 XSLT 模板应用程序的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:56:20.870

难道你不能在通过你的 XML 工具运行它们之前对 aspx 文件进行简单的搜索和替换（这对我来说似乎是合理的工具，FWIW；我已经用它们做了很多网络数据提取）。似乎 aspx 文件的唯一问题是 <% %> 指令，您可以忽略转换为 XML 元素：

方法 1：将 aspx 指令转换为注释：

sed 's/<%/<--/g; s/%>/-->/g'

方法 2：将 aspx 指令转换为 xml（如果 @Page 保留为隐式，则不起作用）：

sed 's/<%@ *//>/g'

另一个错误消息来自没有 XML 命名空间声明。您可以添加它们；他们指向的 URL 不需要是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:52:05.440

将其作为 XML 存储在数据库中，然后将内容拉入页面的指定部分并在那里应用 XSLT？一个主要的端口，如果你要解决这个问题，你还不如不遗余力地把它存储为 HTML5。然后，您可以创建自己的页面布局以将内容拉入，基本上是 CMS。在后一种情况下，您可以完全避免 XSLT 并使用更适合制作现代前端 UI 的 CSS。

# objective-c - 如何循环 iOS UILabel 以显示博客文章的多条评论？

> ID：12905854
> 
> 赞同：1
> 
> 时间：2012-10-16T00:21:12.587
> 
> 标签：objective-c, ios, ios5, loops, uilabel

这是一个博客类型的应用程序，其中显示了博客文章，您可以在下面阅读对该文章的几条评论。

```
| Post Title Here
|
| Post text here lorem ipsum 
| dolor bla bla bla
|
| ---------------------------------------------
| Comment 1
| ---------------------------------------------
| Comment 2
| ---------------------------------------------
| Comment 3
| ---------------------------------------------
| etc 
```

我的 JSON 提要如下所示：

```
...
{
    "post_id": "1463",
    "post_title": null,
    "post_text": "dffsdjdflkjklk dlfkjsdlfkj",
    "comment": [
        {
            "comment_id": "2162",
            "comment_text": "yuiyuiiopiop",
        },
        {
            "comment_id": "2163",
            "comment_text": "tyutyutyutyuu",
        },
        {
            "comment_id": "2164",
            "comment_text": "sdfsertertr",
        },
    ]
},
... 
```

这就是我读它的方式

```
NSDictionary *post           = self.detailItem;
NSArray      *commentThread  = [post objectForKey:@"comment"];
NSUInteger   commentCount    = [commentThread count];

    for (int i = 0; i < commentCount; i++) {
        NSDictionary *comment      = [commentThread objectAtIndex:i];
        NSString     *commentText  = [comment objectForKey:@"comment_text"];

        commentTextLabel.text  = commentText;
    } 
```

在我的故事板中，我有一个连接到`commentTextLabel`.

使用上述方法，我认为只有最后一条评论显示。我预计 UILabel 会生成`i`时间，但似乎并非如此。

我应该怎么做才能创建多个 UILabel，每个评论一个，所以它们最终会堆积如我在这篇文章顶部显示的那样？

非常感谢任何形式的帮助、指示或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:20:56.233

由于您在情节提要中连接了一个 UILabel，因此您在每次迭代中都会覆盖它的内容。

您要做的是为每个评论创建一个新的 UILabel，设置它的框架并将其作为子视图添加到它的父视图并迭代到下一个。

例如：

```
for (int i = 0; i < commentCount; i++) {
    NSDictionary *comment      = [commentThread objectAtIndex:i];
    NSString     *commentText  = [comment objectForKey:@"comment_text"];
    UILabel      *newLabel     = [UILabel alloc] init];

    newLabel.text = commentText;
    newLabel.frame = CGRectMake(origin.x, origin.y, width, height);
    [self.view addSubview:newLabel];
} 
```

origin.x, origin.y 每次都必须计算以满足您的需要，您可以插入一个变量来保存最后一个 origin.y 并每次添加它的高度和边距以使其看起来像一个列表。

另一方面，最有效的方法是使用 UITableView。您的 JSON 可以解析为一个数组，每个条目都是一个单元格。这样您就可以利用重用单元格。如果您不重复使用单元格并继续使用当前设置，如果您有太多评论，您的应用程序的性能可能会受到影响。

还要考虑到在 TableView 或 ScrollView 中显示标签在帧率方面不是很有效。阿尔法混合会影响你的表现。我建议你也用谷歌搜索 tweetie 的快速执行 tableviews 或查看这篇文章 [atebits Twitter fast scrolling](https://stackoverflow.com/questions/7581482/atebits-twitter-fast-scrolling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:31:41.240

您可能应该将 替换`UILabel`为`UITableViewController`. 这样，您可以将`commentThread`数组直接传递给`UITableViewController`（通过您将创建的自定义属性）。然后`UITableViewController`将能够通过其数据源方法（您必须实现）遍历数组。

正如您目前拥有的那样，您不会为循环的每次迭代创建一个新标签。您所做的只是设置您连接的 1 标签的文本。如果您真的想使用标签，请连接一个`UIView`作为标签容器的容器，然后在您的 for 循环中创建标签并将它们添加到`UIView`您在情节提要中创建的标签中。

我的两分钱:)

# c# - 如何从有条件的不同元素中获取所有属性

> ID：12905858
> 
> 赞同：2
> 
> 时间：2012-10-16T00:21:25.583
> 
> 标签：c#, xml, linq-to-xml

```
<Area>
 <ShopA>
  <Income Day="1" Money="100" />
  <Income Day="2" Money="90" />
  <Income Day="3" Money="80" />
  <Income Day="4" Money="70" />
 </ShopA>
 <ShopB>
  <Income Day="3" Money="50" />
  <Income Day="4" Money="40" />
 </ShopB>
</Area> 
```

您好我想通过使用 XDocument 从上面的 XML 中获取特定值。我想从不同的**商店**获得所有具有相同**Day的****Money**值。我只能从单个 Shop (ShopA) 中获取 Day 和 Money 值。

 ****```
XDocument doc = XDocument.Load(xmlFileName.xml);
var areaName = doc.Root.Elements("Area");
IEnumerator<XElement> s = areaName.Elements("ShopA").GetEnumerator();
While (s.MoveNext())
{
 var day = s.Current.Attribute("Day").Value;
 var money = s.Current.Attribute("Money").Value;
} 
```

但我不知道如何从具有相同日期且编码正确的不同商店获取所有货币值。

你能帮我弄清楚如何得到它们吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:48:44.183

大概是这样的吧？

```
 var doc = XDocument.Load("XMLFile1.xml");
    var q =
        doc.Root
           .Elements()
           .Elements()
           .Where(e => e.Attribute("Day").Value == "3")
           .Select(e => new
                            {
                                Shop = e.Parent.Name, 
                                Money = e.Attribute("Money").Value
                            });
    foreach (var e in q)
    {
        Console.WriteLine("{0} {1}", e.Shop, e.Money);
    } 
```

或者，如果您想获取所有天的数据而不是查询一天：

```
 var doc = XDocument.Load("XMLFile1.xml");
        var q =
            doc.Root
               .Elements()
               .Elements()
               .Select(e => new
                                {
                                    Day = e.Attribute("Day").Value,
                                    Shop = e.Parent.Name, 
                                    Money = e.Attribute("Money").Value
                                })
               .GroupBy(r => r.Day);
        foreach (var e in q)
        {
            Console.WriteLine("Day: {0}", e.Key);
            foreach (var i in e)
            {
                Console.WriteLine("{0} {1}", i.Shop, i.Money);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:42:28.270

尝试这样的事情：

```
<Area>
<ShopA>
 <Income Day="1" Money="100" />
 <Income Day="2" Money="90" />
 <Income Day="3" Money="80" />
 <Income Day="4" Money="70" />
</ShopA>
<ShopB>
 <Income Day="3" Money="50" />
 <Income Day="4" Money="40" />
</ShopB>
</Area>

var moneyDayResultSet = from Income in doc.Descendants("Income")
       select new { 
           Money = Income.Attribute("Money").Value,
           Day = Income.Attribute("Day").Value
       };

//Loop through results
foreach (var moneyDayResult in moneyDayResultSet){
    if(moneyDayResult.Day == 3)
{
    Console.Write(moneyDayResult.Money);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:04:37.657

您可以在某一天使用 XPath 获得商店中的所有资金，例如：

```
XElement root = XElement.Load(file);
string day = "2";
var shops = root.XPathSelectElements(
    string.Format("//Income[@Day='{0}']", day))
    .Select(x => new
    {
        Shop = x.Parent.LocalName,
        Money = x.Attribute("Money").Value
    }); 
```

.Net 中的 XPath 使用以下方法找到：

> 使用 System.Xml.XPath；****

# entity-framework - 实体 POCO 与 EF，创建与 POCO 的关系

> ID：12905864
> 
> 赞同：1
> 
> 时间：2012-10-16T00:22:01.150
> 
> 标签：entity-framework, poco, model-associations

你好，美好的一天 

我希望你能帮助我，然后我解释我的问题：

这些是我的实体：

http://i.stack.imgur.com/OjZmX.jpg

我需要使用 POCO 创建这样的关系，例如带有 SDN 的 resultadobusquedaofac，为此我使用 POCO 模板

http://i.stack.imgur.com/qYbzy.jpg

那么我自己相信这些实体内部的伙伴关系：

ResultadoBusquedaOfac

```
public partial class ResultadoBusquedaOfac
{
    #region Primitive Properties

    public virtual int ent_num
    {
        get;
        set;
    }

    public virtual string SDN_Name
    {
        get;
        set;
    }

    public virtual int KeyCliente
    {
        get;
        set;
    }

    public virtual string HayCoincidencia
    {
        get;
        set;
    }

    public virtual string HayCoincidenciaAlias
    {
        get;
        set;
    }

    #endregion

    public virtual ICollection&lt;OFAC_SDN&gt; OFAC_SDN
    {
        get
        {
            if (_oFAC_SDN == null)
            {
                var newCollection = new FixupCollection&lt;OFAC_SDN&gt;();
                newCollection.CollectionChanged += FixupOFAC_SDN;
                _oFAC_SDN = newCollection;
            }
            return _oFAC_SDN;
        }
        set
        {
            if (!ReferenceEquals(_oFAC_SDN, value))
            {
                var previousValue = _oFAC_SDN as FixupCollection&lt;OFAC_SDN&gt;;
                if (previousValue != null)
                {
                    previousValue.CollectionChanged -= FixupOFAC_SDN;
                }
                _oFAC_SDN = value;
                var newValue = value as FixupCollection&lt;OFAC_SDN&gt;;
                if (newValue != null)
                {
                    newValue.CollectionChanged += FixupOFAC_SDN;
                }
            }
        }
    }
    private ICollection&lt;OFAC_SDN&gt; _oFAC_SDN;</em></strong>

    private void FixupOFAC_SDN(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (OFAC_SDN item in e.NewItems)
            {
                item.ResultadoBusquedaOfac = this;
            }
        }

        if (e.OldItems != null)
        {
            foreach (OFAC_SDN item in e.OldItems)
            {
                if (ReferenceEquals(item.ResultadoBusquedaOfac, this))
                {
                    item.ResultadoBusquedaOfac = null;
                }
            }
        }
    }
} 
```

}OFAC_SDN

```
public partial class OFAC_SDN
{
    #region Primitive Properties

   <strong><em> public virtual Nullable&lt;int&gt; id_Ofac
    {
        get { return _id_Ofac; }
        set
        {
            try
            {
                _settingFK = true;
                if (_id_Ofac != value)
                {
                    if (ResultadoBusquedaOfac != null &amp;&amp; ResultadoBusquedaOfac.ent_num != value)
                    {
                        ResultadoBusquedaOfac = null;
                    }
                    _id_Ofac = value;
                }
            }
            finally
            {
                _settingFK = false;
            }
        }
    }
    private Nullable&lt;int&gt; _id_Ofac;</em></strong>

    public virtual int ent_num
    {
        get;
        set;
    }

    public virtual string SDN_Name
    {
        get;
        set;
    }

    public virtual string SDN_Type
    {
        get;
        set;
    }

    public virtual string Program
    {
        get;
        set;
    }

    public virtual string Title
    {
        get;
        set;
    }

    public virtual string Call_Sign
    {
        get;
        set;
    }

    public virtual string Vess_type
    {
        get;
        set;
    }

    public virtual string Tonnage
    {
        get;
        set;
    }

    public virtual string GRT
    {
        get;
        set;
    }

    public virtual string Vess_flag
    {
        get;
        set;
    }

    public virtual string Vess_owner
    {
        get;
        set;
    }

    public virtual string Remarks
    {
        get;
        set;
    }

    #endregion
    #region Navigation Properties

    public virtual ResultadoBusquedaOfac ResultadoBusquedaOfac
    {
        get { return _resultadoBusquedaOfac; }
        set
        {
            if (!ReferenceEquals(_resultadoBusquedaOfac, value))
            {
                var previousValue = _resultadoBusquedaOfac;
                _resultadoBusquedaOfac = value;
                FixupResultadoBusquedaOfac(previousValue);
            }
        }
    }
    private ResultadoBusquedaOfac _resultadoBusquedaOfac;</em></strong>

    public virtual ICollection&lt;OFAC_ADD&gt; OFAC_ADD
    {
        get
        {
            if (_oFAC_ADD == null)
            {
                var newCollection = new FixupCollection&lt;OFAC_ADD&gt;();
                newCollection.CollectionChanged += FixupOFAC_ADD;
                _oFAC_ADD = newCollection;
            }
            return _oFAC_ADD;
        }
        set
        {
            if (!ReferenceEquals(_oFAC_ADD, value))
            {
                var previousValue = _oFAC_ADD as FixupCollection&lt;OFAC_ADD&gt;;
                if (previousValue != null)
                {
                    previousValue.CollectionChanged -= FixupOFAC_ADD;
                }
                _oFAC_ADD = value;
                var newValue = value as FixupCollection&lt;OFAC_ADD&gt;;
                if (newValue != null)
                {
                    newValue.CollectionChanged += FixupOFAC_ADD;
                }
            }
        }
    }
    private ICollection&lt;OFAC_ADD&gt; _oFAC_ADD;

    public virtual ICollection&lt;OFAC_ALT&gt; OFAC_ALT
    {
        get
        {
            if (_oFAC_ALT == null)
            {
                var newCollection = new FixupCollection&lt;OFAC_ALT&gt;();
                newCollection.CollectionChanged += FixupOFAC_ALT;
                _oFAC_ALT = newCollection;
            }
            return _oFAC_ALT;
        }
        set
        {
            if (!ReferenceEquals(_oFAC_ALT, value))
            {
                var previousValue = _oFAC_ALT as FixupCollection&lt;OFAC_ALT&gt;;
                if (previousValue != null)
                {
                    previousValue.CollectionChanged -= FixupOFAC_ALT;
                }
                _oFAC_ALT = value;
                var newValue = value as FixupCollection&lt;OFAC_ALT&gt;;
                if (newValue != null)
                {
                    newValue.CollectionChanged += FixupOFAC_ALT;
                }
            }
        }
    }
    private ICollection&lt;OFAC_ALT&gt; _oFAC_ALT;

    #endregion

    #region Association Fixup

    private bool _settingFK;

    private void FixupResultadoBusquedaOfac(ResultadoBusquedaOfac previousValue)
    {
        if (previousValue != null &amp;&amp; previousValue.OFAC_SDN.Contains(this))
        {
            previousValue.OFAC_SDN.Remove(this);
        }

        if (ResultadoBusquedaOfac != null)
        {
            if (!ResultadoBusquedaOfac.OFAC_SDN.Contains(this))
            {
                ResultadoBusquedaOfac.OFAC_SDN.Add(this);
            }
            if (id_Ofac != ResultadoBusquedaOfac.ent_num)
            {
                id_Ofac = ResultadoBusquedaOfac.ent_num;
            }
        }
        else if (!_settingFK)
        {
            id_Ofac = null;
        }
     }

    private void FixupOFAC_ADD(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (OFAC_ADD item in e.NewItems)
            {
                item.OFAC_SDN = this;
            }
        }

        if (e.OldItems != null)
        {
            foreach (OFAC_ADD item in e.OldItems)
            {
                if (ReferenceEquals(item.OFAC_SDN, this))
                {
                    item.OFAC_SDN = null;
                }
            }
        }
    }

    private void FixupOFAC_ALT(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (OFAC_ALT item in e.NewItems)
            {
                item.OFAC_SDN = this;
            }
        }

        if (e.OldItems != null)
        {
            foreach (OFAC_ALT item in e.OldItems)
            {
                if (ReferenceEquals(item.OFAC_SDN, this))
                {
                    item.OFAC_SDN = null;
                }
            }
        }
    }

    #endregion
} 
```

}

现在当我运行测试查询时：

公共部分类 Form1 : Form { public Form1() { InitializeComponent();

```
 LegitimacionEntities context = new LegitimacionEntities();
        var query = context.ResultadoBusquedaOfac.Include("OFAC_SDN").Where(us =&gt; us.ent_num.Equals(10)).First();

        MessageBox.Show(query.SDN_Name);
    }
} 
```

}

向我抛出以下错误： 

指定的包含路径无效。EntityType 'LegitimacionModel.ResultadoBusquedaOfac' 未声明名为 'OFAC_SDN' 的导航属性。

除此之外，我还必须通过数据服务或 WCF 传递数据，现在我这样做是为了首先证明关系很好，然后再将其传递给上面。

非常感谢您，我欢迎您的评论...

快乐的时光

# python - Python：写入文件时权限被拒绝

> ID：12905868
> 
> 赞同：0
> 
> 时间：2012-10-16T00:22:19.810
> 
> 标签：python, windows, py2exe

我正在我的 Windows VM 上编写一个脚本，以将我的 Python 脚本“编译”为 .exe 文件。我在网上遵循了几个教程，但没有成功。来自社区的一些帮助会很棒！

文件位置：C:\Users\NAME\Desktop Python 安装目录：C:\Program Files (x86)\Python

你好.py

```
print "Hello, World!" 
```

编译器.py

```
from distutils.core import setup
import py2exe # has been installed
import os

filename = raw_input("File to compile: ")
setup(console=[filename]) 
```

当我使用命令“python compiler.py install”在 CMD 中运行脚本时，我得到以下输出：

```
C:\Users\NAME\Desktop>python compiler.py install
File to compile: hello.py
running install
running build
running install_egg_info
Writing C:\Program Files (x86)\Python\Lib\site-packages\UNKNOWN-0.0.0-py2.7.egg-info
error: C:\Program Files (x86)\Python\Lib\site-packages\UNKNOWN-0.0.0-py2.7.egg-info: Permission denied
C:\Users\NAME\Desktop> 
```

我不知道为什么会收到此错误，因为 Python 应该有权读取和写入其安装文件夹中的文件。感谢您的任何建议！

编辑：我正在运行 2.7，我不确定它是否重要。但以防万一！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:30:27.823

> *Python应该有权限读写其安装文件夹中的文件*

事实并非如此。在 Windows 上，权限不是由正在运行的程序解决，而是由执行该操作的*用户帐户解决。*所以答案是*您的用户帐户*无权写入 Python 安装文件夹。

通常，要安装系统范围的软件（您正在尝试这样做），您需要在本地管理员帐户下运行命令。但是，更好的选择可能是找到一种方法将您的程序安装在其他地方（用于测试目的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T19:07:58.553

与权限无关，这是因为您运行了错误的命令。

你输入：C:\Users\NAME\Desktop>python compiler.py install

应该是：

C:\Users\NAME\Desktop>python compiler.py py2exe

:-)

# git - git push origin master -> 被fallthru拒绝

> ID：12905870
> 
> 赞同：3
> 
> 时间：2012-10-16T00:22:40.427
> 
> 标签：git, gitolite

当我尝试“git push origin master”时，我收到错误“被fallthru拒绝”

我花了过去三个小时在谷歌上搜索。我不知道如何解决它。

gitolite.log

```
2012-10-15.16:43:47 16930   ssh ARGV=david_neudorfer_lbox_com_1350337154    SOC=git-receive-pack 'Treasure-Hunt.git'    FROM=10.0.4.185
2012-10-15.16:43:47 16930       repo 'Treasure-Hunt' missing
2012-10-15.16:43:47 16930       access(Treasure-Hunt, david_neudorfer_lbox_com_1350337154, W, 'any'),-> W any Treasure-Hunt david_neudorfer_lbox_com_1350337154 DENIED by fallthru
2012-10-15.16:43:47 16930       trigger,Writable,access_1,ACCESS_1,Treasure-Hunt,david_neudorfer_lbox_com_1350337154,W,any,W any Treasure-Hunt david_neudorfer_lbox_com_1350337154 DENIED by fallthru
2012-10-15.16:43:47 16930   die W any Treasure-Hunt david_neudorfer_lbox_com_1350337154 DENIED by fallthru<<newline>>(or you mis-spelled the reponame) 
```

gitolite.conf

```
repo    test_project
  RW+                            = david_neudorfer_lbox_com_1350344583
repo    projectsmadesimple-web
  RW+                            = david_neudorfer_lbox_com_1350344583
repo    treasure-hunt
  RW+                            = david_neudorfer_lbox_com_1350344583 
```

我注意到名字后面的数字不同。希望与它有关，我尝试过：

```
repo    test_project
  RW+                            = david_neudorfer_lbox_com_1350344583
  RW+                            = david_neudorfer_lbox_com_1350337154 
```

没用。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:26:58.593

作为[cjc343](https://stackoverflow.com/users/1038369/cjc343) [评论](https://stackoverflow.com/questions/12905870/git-push-origin-master-denied-by-fallthru/12908065#comment17483103_12905870)，最后一个错误行告诉我们：

```
2012-10-15.16:43:47 16930   die W any Treasure-Hunt 
                            DENIED by fallthru
                            (or you mis-spelled the reponame) 
```

该错误消息来自[src/gitolite-shell 的 main() 函数](https://github.com/sitaramc/gitolite/blob/master/src/gitolite-shell#L114-L122)，在调用[src/lib/Gitolite/Conf/Load.pm repo_missing() 函数之后](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Conf/Load.pm#L187-L192)。

```
sub repo_missing {
    my $repo = shift;
    sanity($repo);

    return not -d "$rc{GL_REPO_BASE}/$repo.git";
} 
```

它查找一个目录，在 Unix 系统上，该目录区分大小写。

然后您需要解决 id 问题：您应该始终使用相同的名称进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T10:14:37.573

已解决：
在我的情况下，我将 repo 从我的帐户移动到一个组，因此 repo 的路径在远程更改，但在我的本地 repo 中没有。

所以我更改了本地仓库（配置文件）中的路径：

```
[remote "origin"]
url = git@git.me:mygroup/repo.git              // previously git@git.me:myname/repo.git
fetch = +refs/heads/*:refs/remotes/origin/* 
```

# php - preg_match 与重复的 html 内容

> ID：12905871
> 
> 赞同：1
> 
> 时间：2012-10-16T00:22:56.563
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我想你从外部网站提取一些数据。html 字符串看起来像这样（*img 标签之间没有空格/换行符*）：

```
<img class="car-type231" src="/2f36b523259e9871bfade01983c9cc91.png" title="toyota"/>
<img class="car-type211" src="/0abc9b3ae3ba4bbcb6d3593fad6c1450.png" title="nissan"/>
<img class="car-type311" src="/4528e30bb510b4289121b4c70cb48ea3.png" title="bmw"/>
<img class="car-type332" src="/64575fee55553623896c7fd587a33ac3.png" title="mercedes"/>
<img class="car-type544" src="/a4f32dd95976d76704795c471c9a08b8.png" title="audi"/>
etc... 
```

我想提取每个 src 路径并创建一个如下所示的数组：

```
$matches[0] = '/2f36b523259e9871bfade01983c9cc91.png';
$matches[1] = '/0abc9b3ae3ba4bbcb6d3593fad6c1450.png';
etc... 
```

我尝试将 preg_match 与此参数一起使用：`'#src="(.*?)"#'`但它不起作用，因为它返回了所有 html。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:27:46.737

[他来的小马...](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

使用解析器，例如 DOMDocument：

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$imgs = $dom->getElementsByTagName('img');
$l = $imgs->length;
$srcs = []; // Array() in earlier versions of PHP
for( $i=0; $i<$l; $i++) {
    $srcs[$i] = $imgs->item($i)->getAttribute("src");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:46:35.923

你会因为尝试使用 RegEx 而不是使用正确的文档/HTML 解析器来提取这些东西而感到非常痛苦，但我个人认为在这种情况下使用 RegEx 没有问题，因为 HTML 是如此简单 - 而你的目标是也很简单。

试试这个：

```
preg_match_all('#src="(.*?)"#',$htmlstring,$matches);
print_r($matches[1]); //the array you want 
```

# vhdl - 用 VHDL 设计组合移位运算符

> ID：12905874
> 
> 赞同：3
> 
> 时间：2012-10-16T00:23:13.320
> 
> 标签：vhdl, bit-shift

这是我的问题：我需要从头开始使用组合逻辑设计一个 16 位左/右逻辑/算术移位组件（使用 std_logic_vector 和 std_logic 除外）。

这是我所拥有的：

```
library ieee;
use ieee.std_logic_1164.all;

entity Shift16 is
    port
    (
        -- Input ports
        I       : in std_logic_vector(15 downto 0);
        Shift   : in std_logic_vector(3 downto 0);

        -- Sel(1) == 0 -> Logical ; Sel(0) == Left
        Sel : in std_logic_vector(1 downto 0);

        -- Output ports
        O       : out std_logic_vector(15 downto 0)
    );
end Shift16;

architecture Struct of Shift16 is
component Mux16to1 is
    port (I :   in std_logic_vector(15 downto 0);
            S   :   in std_logic_vector(3 downto 0);
            O   :   out std_logic);
end component;

component Mux2to1_16 is
    port
    ( A, B : in  std_logic_vector(15 downto 0); S : in  std_logic;
      Q : out std_logic_vector(15 downto 0) );
end component;

signal OLeft, ORight : std_logic_vector(15 downto 0);

signal PadVal   : std_logic;

type gen_signal is array (15 downto 0) of std_logic_vector(15 downto 0);

signal leftPad, rightPad : gen_signal;

begin

    process (I, Sel)
    begin
        if (Sel(0) = '0') then -- logical
            PadVal <= '0';
        else 
            PadVal <= I(15); -- aritmetic
        end if;

        for j in 15 downto 0 loop
            for k in j downto 0 loop
                leftPad(j, k) <= I(15-j);
                rightPad(j, k) <= PadVal;
            end loop;

            for k in 15 downto j+1 loop 
                leftPad(j, k) <= PadVal;
                rightPad(j, k) <= I(15-j);
            end loop;
        end loop;
    end process;

    muxarr_left_shift: for index in 15 downto 0 generate
    begin  
        mux: Mux16to1 port map (leftPad(index), Shift, OLeft(index));
    end generate;

    muxarr_right_shift: for index in 15 downto 0 generate
    begin
        mux: Mux16to1 port map (rightPad(index), Shift, ORight(index));
    end generate;   

    OutputMux: Mux2to1_16 port map (ORight, OLeft, Sel(1), O);

end Struct; 
```

这些`Mux`组件正是它们看起来的样子，只是我的自定义版本。

我最初的想法是使用 16 个 16 对 1 多路复用器并将它们连接起来，这样移位量就是每个的选择。这将非常快，但由于某种原因代码无法编译。

我想我也过于复杂了，我不确定我能做些什么来做得更好..

编译错误是：`Error (10382): VHDL error at Shl16.vhd(52): index of object of array type gen_signal must have 1 dimensions`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:37:56.683

我认为你应该改变：

```
 for j in 15 downto 0 loop
        for k in j downto 0 loop
            leftPad(j, k) <= I(15-j);
            rightPad(j, k) <= PadVal;
        end loop;

        for k in 15 downto j+1 loop 
            leftPad(j, k) <= PadVal;
            rightPad(j, k) <= I(15-j);
        end loop;
    end loop; 
```

到

```
 for j in 15 downto 0 loop
        for k in j downto 0 loop
            leftPad(j)(k) <= I(15-j);
            rightPad(j)(k) <= PadVal;
        end loop;

        for k in 15 downto j+1 loop
            leftPad(j)(k) <= PadVal;
            rightPad(j)(k) <= I(15-j);
        end loop;
    end loop; 
```

因为你的类型声明。

```
type gen_signal is array (15 downto 0) of std_logic_vector(15 downto 0); 
```

P / s：如果您想保持循环分配，请将类型更改为：

```
type gen_signal is array (15 downto 0, 15 downto 0) of std_logic; 
```

但我认为它不适合您的端口图。所以，你应该使用上述方法。我用 Questasim 10.0b 检查了第一种方法。

P/S（再次）：我仔细阅读了您的代码并发现：

```
process (I, Sel) 
```

敏感列表可能不适合循环，除非你想要`latch`。我认为你应该拆分为 2 个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:23:28.813

怎么样：

```
process (all) is
    variable shift_bits : integer;
begin
    shift_bits := to_integer(unsigned(shift));
    O <= (others => '0');            -- fill with padding first - stop latch
    if sel(0) = '1' then                 -- left shift
        O(O'high downto - O'high-shift_bits) <=
            I(shift_bits-1 downto 0);
    else                                 -- right shift
        if sel(1) = '1' then             -- if arithmetic
            O <= (others => I(I'high));  -- pad with sign bit
        end if;
        O(shift_bits-1 downto 0) <=
            I(I'high downto i'high-shift_bits);
    end if;
end process; 
```

合成到 67 个 LUT6

* * *

另一条评论 - 为什么不明确定义控制位，这样您就不必添加评论来描述正在发生的事情：

```
entity Shift16 is
    port
    (
        I             : in std_logic_vector(15 downto 0);
        Shift_count   : in unsigned(3 downto 0);
        shift_logical : in std_logic;
        shift_right  : in std_logic;

        O       : out std_logic_vector(15 downto 0)
    );
end Shift16; 
```

# c# - 如何在 C# 中创建带有图标的 Internet 快捷方式？

> ID：12905879
> 
> 赞同：4
> 
> 时间：2012-10-16T00:23:34.410
> 
> 标签：c#, wpf, icons, shortcut

我想在桌面上创建一个带有自定义图标的 Internet 快捷方式（url 文件）。要创建快捷方式，我目前使用：

```
 private void CreateShortcut(string name, string url)
    {
        string deskDir = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);

        using (StreamWriter writer = new StreamWriter(deskDir + "\\" + name + ".url"))
        {
            writer.WriteLine("[InternetShortcut]");
            writer.WriteLine("URL=" + url);
            writer.Flush();
        }
    } 
```

但是这段代码没有设置自定义图标。我将如何设置图标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T00:52:19.793

设置`IconIndex`及`IconFile`参数：

```
[InternetShortcut]
URL=<url>
IconIndex=0
IconFile=<path to custom icon icon file> 
```

# c# - 为什么我的并行快速排序方法比顺序方法慢？

> ID：12905880
> 
> 赞同：4
> 
> 时间：2012-10-16T00:23:43.553
> 
> 标签：c#, parallel-processing, invoke, quicksort

我是并行编程的新手，我不确定为什么该`QuickSortParallel`方法比我的顺序版本慢（没有 Parallel.Invoke）。我有一个由十万个 9 位数字组成的锯齿状数组，我通过这些数字对其进行排序。不幸的是，当我使用该`QuickSortParallel`方法时，它最终比顺序版本慢了近 5 倍。

我能做的不仅仅是在数据源上使用 Parallel.Invoke 吗？

```
 public static void QuickSort_Parallel<T>(T[] array2) where T : IComparable<T>
    {
        QuickSortParallel(array2, 0, array2.Length - 1);
    }

    private static void QuickSortParallel<T>(T[] array2, int left, int right)
        where T : IComparable<T>
    {
        if (left >= right)
        {
            return;
        }

        SwapElements(array2, left, (left + right) / 2); //median pivot
        int last = left;
        for (int current = left + 1; current <= right; ++current)
        {
            //CompareTo, compares current array index value with
            if (array2[current].CompareTo(array2[left]) < 0)
            {
                ++last;
                SwapElements(array2, last, current);
            }
        }

        SwapElements(array2, left, last);
        //Recursive
        //Executes each of the provided actions in parallel.
        Parallel.Invoke(
            () => QuickSortParallel(array2, left, last - 1),
            () => QuickSortParallel(array2, last + 1, right)
        );
    }

    static void SwapElements<T>(T[] array2, int i, int j)
    {
        T temp = array2[i];
        array2[i] = array2[j];
        array2[j] = temp;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:48:34.300

您的问题很可能来自线程的开销。

使用线程通常会使 CPU 密集型工作更快，但是启动一个新线程会带来大量开销，如果你给太多线程提供了太少的工作，那么你可以让你的程序运行得更慢。

当您运行以下行时：

```
 Parallel.Invoke(
        () => QuickSortParallel(array2, left, last - 1),
        () => QuickSortParallel(array2, last + 1, right)
    ); 
```

...您可能会导致当前线程产生另外两个线程（取决于`Parallel.Invoke`实现方式）。如果我的心算是正确的（如果`Parallel.Invoke`确实创建了新线程），那么您正在创建`n * log(n)`线程——一个巨大的数字！

如果你想看到性能提升，你需要平衡线程数——更多并不总是更好。使用系统线程池限制线程数的好方法：

```
System.Threading.ThreadPool.QueueUserWorkItem(
        () => QuickSortParallel(array2, left, last - 1));
System.Threading.ThreadPool.QueueUserWorkItem(
        () => QuickSortParallel(array2, last + 1, right)); 
```

...或类似的规定。如果您愿意，您也可以实现自己的线程池。一个

另一种选择是限制递归的深度，从而限制线程的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:50:46.000

所有这些递归调用都在杀死你。这篇文章[http://reedcopsey.com/2010/02/26/parallelism-in-net-part-11-divide-and-conquer-via-parallel-invoke/](http://reedcopsey.com/2010/02/26/parallelism-in-net-part-11-divide-and-conquer-via-parallel-invoke/)非常相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:37:29.750

围绕使用 SwapElements 方法的争论？尝试将 SwapElements 方法的逻辑直接放入您的方法/循环中，而不是调用它......这将使它成为每个产生的并行线程上发生的事情的一部分，而不是成为潜在的瓶颈。看看这对你有什么帮助……不过只是一个建议，不确定它是否有用。

# php - (CodeIgniter 2) 使用活动记录类获取mysql函数结果

> ID：12905883
> 
> 赞同：0
> 
> 时间：2012-10-16T00:24:00.280
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用**CodeIgniter 2（最新版本）** ......假设我有这个查询：

```
$CI->db->select("FileName, GUID, Count(GUID)");
$query = $CI->db->get('Files'); 
```

我知道我可以使用以下语法获取 GUID 和 FileName 列：

```
foreach ($query->result() as $row) {
    $file_name = $row->FileName;
} 
```

但我怎样才能得到`Count(GUID)`？

**PS。这是一个简单的例子来解释我的问题**。我只需要知道如何使用 codeigniter 活动记录获取*组合/mysql 函数结果*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:27:55.860

我猜是这个

```
$CI->db->select("FileName, GUID, Count(GUID) as guidCount");

foreach ($query->result() as $row) {
    $file_name = $row->guidCount;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:42:59.347

```
 $this->db->select('FileName, GUID, Count(GUID) as guidCount');
    $query = $this->db->get('Files');
    // this will call function once and speed up performance not every time in loop
    $rows = $query->result(); 
    foreach ($rows as $row)
    {
       echo $row->FileName;
       echo $row->GUID;
       echo $row->guidCount;
    } 
```

查看更多@ [https://www.codeigniter.com/userguide2/database/active_record.html](https://www.codeigniter.com/userguide2/database/active_record.html)

# javascript - Javascript IE 变换矩阵计算

> ID：12905888
> 
> 赞同：0
> 
> 时间：2012-10-16T00:24:42.303
> 
> 标签：javascript, jquery, css, internet-explorer, rotation

我正在寻找在 IE 6-8 中计算旋转 div 的正确值。[我从这篇文章JavaScript IE rotation transform maths](https://stackoverflow.com/questions/5051451/javascript-ie-rotation-transform-maths)中获取了以下计算，但它似乎在 IE6 或 7 中不起作用。它在 IE8 中起作用，所以这让我想知道这是否是语法问题。

```
var angle = 45;
radians = parseInt(angle) * Math.PI * 2 / 360;
calSin = Math.sin(radians);
calCos = Math.cos(radians);

var rotateCSS = 'filter: progid:DXImageTransform.Microsoft.Matrix(M11=' + calCos + ', M12=-' + calSin + ',M21=' + calSin + ', M22=' + calCos + ', sizingMethod="auto expand"); '; /* IE6,IE7 */

rotateCSS += '-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod="auto expand", M11=' + calCos + ', M12=-' + calSin + ', M21=' + calSin + ', M22=' + calCos + ')"; '; /* IE8 */ 
```

$('.rotate').attr('style', rotateCSS);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:01:18.120

正在旋转的元素需要具有 position:absolute 才能正常工作。

# .htaccess - htaccess 重写引擎生成尾随哈希

> ID：12905898
> 
> 赞同：0
> 
> 时间：2012-10-16T00:26:12.553
> 
> 标签：.htaccess, mod-rewrite

出于某种原因，我的重写引擎在我的链接末尾添加了一个随机哈希，例如：#.UHyohWmDRhA

```
RewriteEngine On 
RewriteRule   ^about/$   about.php  [NC] 
```

所以我期望的是localhost/company/about/。我得到的是 localhost/company/about/#.UHyohWmDRhA。无论如何要让它停止？

EDIT------------------------
好吧，我调试得不够好。我很抱歉。我所有的链接都在生成这个奇怪的哈希。将不得不进一步调查。

EDIT.2------------------------
我的错误。我的标题上有一个 addthis 小部件，它正在添加哈希。将在 2 天内回答任何有价值的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:28:45.207

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*)\.php$  $1/  [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:07:56.817

Addthis 小部件导致了散列。

编辑-------------
我正在处理的网站有一个 addthis.com 插件来共享该网站。该插件中有一个选项可以跟踪某人何时将链接复制并粘贴到某处。哈希用于跟踪此复制/粘贴操作。您可以删除插件中的行以删除此选项（或保留它）。

TL;DR：如果您的 url 正在修改，请检查您的脚本插件。

# java - 具有多个客户端的服务器 (Java) - 发送字符串

> ID：12905899
> 
> 赞同：1
> 
> 时间：2012-10-16T00:26:12.847
> 
> 标签：java, client

我正在编写一个程序，它基本上是一个纸牌游戏，涉及一个处理游戏逻辑的服务器和多个基本上是玩家的客户端（最多四个）。客户端使用 JFrame 制作的所有 GUI。无论如何，其中一部分涉及按下其中一个 JFrame 上的按钮。这应该向服务器发送一个字符串，服务器应该向所有客户端返回一个新字符串。但是，我的代码不起作用。这是我到目前为止的简要概述：

服务器代码：

```
public class Server {

    ServerSocket ss = null;
    ArrayList<Game> clients; //'Game' is essentially my Handle A Client class
    //bunch of other variables that store things like players, etc

    public Server() {
        try {
            ss = new ServerSocket(7777);
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }

        idGen = 0;
        numPs = 0;
        tPlayers = new ArrayList<Player>();
        cPlayers = new ArrayList<Player>();
        clients = new ArrayList<Game>();

        while (true) {
            try {
                Socket s = ss.accept();

                Game g = new Game(s, this, idGen);
                clients.add(g);
                Thread thr = new Thread(g);
                thr.start();

                idGen++;

            } catch (Exception e) {
                System.out.println("got an exception" + e.getMessage());
            }

            System.out.println("got a connection");

            try {
                Player obj = null;
                FileInputStream fis = new FileInputStream("User_Database.sav");    //serializes the player object and reads from file
                ObjectInputStream oi = new ObjectInputStream(fis);
                while ((obj = (Player) oi.readObject()) != null) {
                    tPlayers.add(obj);
                }
                oi.close();
            } catch (IOException ie) {
            } catch (ClassNotFoundException e) {
                System.out.println("Class not found exception.");
            }

        }
    }

    public class Game implements Runnable {

        int id;
        Socket mySocket;
        Server serv;
        PrintWriter out;
        BufferedReader in;

        public Game(Socket s, Server ser, int i) {
            mySocket = s;
            id = i;

            serv = ser;

            try {
                out = new PrintWriter(mySocket.getOutputStream(), true);
                in = new BufferedReader(new InputStreamReader(mySocket.getInputStream()));

            } catch (Exception e) {
                e.printStackTrace();
                System.exit(0);
            }
        }

        public void run() {

            while (true) {
                try {
                    String msg = in.readLine();
                    if (msg == "p") {
                        serv.paintGame(); //this is the thing that should send out multiple strings
                    } else {
                        //does some other stuff
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

这是服务器中的paintGame()。它创建一些字符串，然后将它们发送给客户端：

```
public void paintGame(){
  String tCards = "";

    System.out.println("Adding words to strings");  
    if(numPs == 2){
        tCards = "" + h1.get(0).gif + "_" + h2.get(0).gif + "";
    }
    else if(numPs == 3){
        tCards = "" + h1.get(0).gif + "_" + h2.get(0).gif + "_" + h3.get(0).gif + "";
    }
    else if(numPs == 4){
        tCards = "" + h1.get(0).gif + "_" + h2.get(0).gif + "_" + h3.get(0).gif + "_" + h4.get(0).gif + "";
    }

    System.out.println("Finished adding");

    for(int i = 0; i < clients.size(); i++){
        try{ 
            clients.get(i).out.println(tCards);
            clients.get(i).out.flush();
        }

            catch (Exception e){}               
    }
} 
```

最后是客户端应该发送和读取字符串的部分：

```
 public void paintGame() {
    String s = "p";
    String[] c;
    String d = "_";
    try {
        out5 = new PrintWriter(socket.getOutputStream(), true);
        in5 = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        out5.println(s);
    } catch (IOException e) {
        e.printStackTrace();
    }

    while (s != null) {
        try {

            System.out.println(s);
            s = in5.readLine();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    System.out.println("Separating string!");
    if (s != null) {
        c = s.split(d);
        for (int i = 0; i < c.length; i++) {
            System.out.println(c[i]);
            cPaint.add(c[i]);
        }
        System.out.println("Strings separated!");
    } else {
        System.out.println("ERROR! Null string");
    }

} 
```

我主要不确定最后一部分。我实际上不知道其他客户端将如何获取发送的字符串并读取它们，因为没有一个客户端持续发送/读取字符串（如果按下按钮，它们只会发送字符串）。

编辑：很抱歉奇怪的格式._。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:00:18.247

“如果按下按钮，它们只会发送字符串” - 观察者模式会帮助你吗？

查看[oodesign 的网站](http://www.oodesign.com/observer-pattern.html)和[sourcemaking 的网站](http://sourcemaking.com/design_patterns/observer)。

# java - 点击检测不起作用？

> ID：12905900
> 
> 赞同：0
> 
> 时间：2012-10-16T00:26:18.593
> 
> 标签：java, applet, mouseevent

所以这是我正在使用的整个文件，无奈之下，我在每个事件中都定义了 x 和 y，但我仍然一无所获。这是一个多类项目，我应该在哪里做`addMouseListener()`？为什么这不能引起事件？（注意：坐标的打印`run()`工作。）这是一个小程序项目，小程序工作正常，只是没有注册这个事件。

```
public class ClickCheck implements Runnable, java.awt.event.MouseListener {
public int x, y;

public ClickCheck() {

    Thread t = new Thread(this);
    t.start();
}

public void mouseClicked(java.awt.event.MouseEvent ev) {

    x = ev.getX();
    y = ev.getY();
    System.out.println(x + "," + y);
}

public void mousePressed(java.awt.event.MouseEvent ev) {
    x = ev.getX();
    y = ev.getY();
    System.out.println(x + "," + y);
}

public void mouseReleased(java.awt.event.MouseEvent ev) {
    x = ev.getX();
    y = ev.getY();
    System.out.println(x + "," + y);
}

public void mouseEntered(java.awt.event.MouseEvent ev) {
    x = ev.getX();
    y = ev.getY();
    System.out.println(x + "," + y);
}

public void mouseExited(java.awt.event.MouseEvent ev) {
    x = ev.getX();
    y = ev.getY();
    System.out.println(x + "," + y);
}

public void run() {
    System.out.println(x + "," + y);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:34:02.467

假设您想将 a`MouseListener`添加到您的小程序的主窗口/面板区域，您可以将其添加到您的小程序`init()`方法中：

```
public void init()
{
   addMouseListener(new ClickCheck());
   ... 
```

此外，`Thread`包含在您的`MouseListener`. 线程本身将打印出坐标并立即退出。

# java - 使用 Void* 参数将 Socket 数据传递给 JNA 函数

> ID：12905903
> 
> 赞同：1
> 
> 时间：2012-10-16T00:27:06.433
> 
> 标签：java, c, jna, jnaerator

在 Windows 上，我有一些通过 Java 套接字进入的第 3 方 TCP 数据，我试图弄清楚如何将数据传递到由同一第 3 方提供的 C 库中 - 使用 JNA。我对 JNA/JNI/C 等所有东西都很陌生。

第 3 方库将从套接字获取传入字节并将它们解码为正确的消息类型。由于传入的数据是任意长度的，没有结束分隔符，并且起始分隔符很短（因此可能出现在数据中间而不是实际的分隔符），实际上可能更容易弄清楚如何使用它图书馆虽然 JNA 而不是自己滚动（或学习 C）。

我已经设法使用 jnaerator 从 C 头文件生成源代码。我还成功地调用了一个不需要参数的简单 C 函数。但是，当尝试使用需要将“原始数据”传递给最初接受 void 指针的 C 函数时，我不确定如何继续。

以下是代码中的相关片段。

```
//CExportTypes.h
typedef unsigned int XUint;
//also defines structs: XMessageType, XCrypto, XAlarm, etc.

//CLibrary.h
XStatus XGetMessageType(void* bytesRecv, XUint numBytes, XMessageType* type, XUint* serial, XUint* msgLen);
XStatus XDecodeAlarm(void* bytesRecv, XUint numBytes, XCrypto* key, XAlarm* decodedAlarm);

//CLibrary.java (Generated)
int XGetMessageType(Pointer bytesRecv, int numBytes, IntBuffer type, IntBuffer serial, IntBuffer msgLen);
int XDecodeAlarm(Pointer bytesRecv, int numBytes, XCrypto key, XAlarm decodedAlarm); 
```

我如何获得传入

```
int = Socket.getInputStream() 
```

将“原始数据”转换为 JNA 函数期望的指针？我还需要注意哪些其他问题？字节序、无符号字节问题等？

我知道这可能没什么可做的，但我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:13:27.253

使用[SocketChannel](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)读取直接 NIO 缓冲区，我们可以从 JNI 中取消引用。就像是：

```
SocketChannel client = SocketChannel.open(address);
ByteBuffer buffer = ByteBuffer.allocate(42);
client.read(buffer); 
```

并使用`Buffer`as 参数而不是`Pointer`.

# javascript - Unicode 字符，向下三角形，显示为奇怪的文本

> ID：12905904
> 
> 赞同：2
> 
> 时间：2012-10-16T00:27:22.863
> 
> 标签：javascript, css, unicode, utf-8, ascii

我有一个网页，我在按钮上使用 unicode 向下三角形来指示选择这些按钮将显示一个下拉菜单。

我在css中添加了三角形：

```
 .icon:after {
        content:"▼";
    }
    .icon {
        width:12px;
        height:12px;
        margin: 3px;
        display: inline-block;
        cursor:default;
    } 
```

页面中的元标记是：

```
 <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; chrome=1" >
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

但是，三角形不会显示为三角形，它们显示如下：![奇怪的文本而不是 unicode 字符](../Images/8907364f394544e00d2c7a3c573c5381.png)

知道为什么它会出现这样的情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T01:04:30.133

您可以使用任何类型的 unicode 字符来塑造所有类型的字符。例如，在您的情况下，您只需要使用以下内容：

```
.icon:after {
    content:"\25bc";
} 
```

或者对于一个小三角形：

```
.icon:after {
    content:"\25be";
} 
```

这个技巧完全跨浏览器兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:40:41.647

出现 CSS 规则的文档（HTML 或 CSS 文档）与 HTTP 标头一起发送，这些标头指定了除 UTF-8 之外的编码，可能是 ISO-8859-1 或 windows-1252，或者在 CSS 文档的情况下，根本不指定编码，让浏览器猜测。

解决方案是通过更改 HTTP 标头来解决此问题。请参阅 W3C 页面[字符编码](http://www.w3.org/International/O-charset.en.php)。

如果 HTTP 标头未指定编码，*则*文档本身内部的字符集声明可能会生效。

使用字符转义可能有助于消除症状，但为了避免将来出现问题（当有人在文档中添加奇怪的字符时），最好修复编码问题。

# r - 不需要的轴 w/ facet_wrap with scales = "free_x"

> ID：12905907
> 
> 赞同：2
> 
> 时间：2012-10-16T00:27:53.270
> 
> 标签：r, ggplot2

也许这是一个不确定的重复（[链接](https://stackoverflow.com/questions/12560858/using-coord-flip-with-facet-wrapscales-free-y-in-ggplot2-seems-to-give-u)）。

我想用`coord_flip`，`facet_wrap`和论据`scales = "free"`。如果这样做，这会在不必要的刻面之间添加不需要的比例。

```
library(ggplot2)

ggplot(mtcars, aes(x=as.factor(gear),  y=carb, fill=vs)) +
    geom_bar(position="dodge", stat="identity") +
    coord_flip() + 
    facet_wrap(~ carb, ncol=2) 
```

产生：

![在此处输入图像描述](../Images/8f8d80b46df7aabd29e6ef9fe5b2cccb.png)

但是添加`scales = "free"`会使轴/刻度出现在刻面的中间，而不是像上面那样在底部。我怎样才能让他们走开。

```
ggplot(mtcars, aes(x=as.factor(gear),  y=carb, fill=vs)) +
    geom_bar(position="dodge", stat="identity") +
    coord_flip() + 
    facet_wrap(~ carb, ncol=2, scales="free_x") 
```

![在此处输入图像描述](../Images/aea0063ecb0a15b142ee00c9540fca1a.png)

# ios - 无需身份验证即可保护 REST 服务

> ID：12905919
> 
> 赞同：2
> 
> 时间：2012-10-16T00:29:05.457
> 
> 标签：ios, rest

我正在为 iOS 应用程序设计 REST 服务。我想知道如何使 REST 服务安全，以便只允许来自 iOS 应用程序的请求？

我正在考虑使用共享密钥，但如果您检查请求，仍然会遇到问题。

另一种方法是使用 OAuth，这不是理想的解决方案。我希望能够在实际请求中进行身份验证，而不是在多个请求之间交换令牌。

我能想到的唯一解决方案是基于时间的加密。共享机密会根据服务器上请求仅在特定持续时间内有效的时间进行加密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T02:26:47.913

如果您通过 HTTPS 等受 SSL 保护的协议传输请求（并使用服务器证书来防止中间人攻击），嗅探器将看不到您的请求，因此烧入应用程序的共享秘密可以工作.

当然，如果有人真的想要，他们可以对您的应用程序进行逆向工程以找到其中存储的秘密。如果您正在构建与人们的银行帐户相关联的东西，那么请不要打扰。如果您只是想添加一小层保护以防止对您的服务进行微不足道的黑客攻击或 DDOS 攻击，那么这听起来是一种合理的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:43:22.063

虽然这确实可以解决，但最好的办法是使用某种登录机制，但这并不能阻止有人试图欺骗包含身份验证的应用程序。

您不能信任客户端，但如果您使用 OAuth 之类的东西，您至少可以阻止人们尝试。如果应用程序使用应用程序内购买，您可以将帐户验证为具有访问权限，然后按照该路线进行操作。然而，除此之外，没有任何“完美”的解决方案，可以这么说。

# powershell - 将标准输入重定向到 Powershell 中的大文件 - 内存消耗

> ID：12905924
> 
> 赞同：3
> 
> 时间：2012-10-16T00:29:57.820
> 
> 标签：powershell, memory-leaks, stdin, large-files

在 PowerShell 中，将标准输入重定向到文件的常规方法是通过管道传输文件的内容：

```
Get-Content input-file.txt | Write-Host 
```

但是，如果文件非常大，PowerShell 就会开始消耗大量内存。使用 small`-ReadCount`似乎可以加快`Get-Content`将行输入命令的速度，但内存消耗仍然很大。

为什么内存使用率这么高？PowerShell是否将文件的内容保留在内存中，即使它不需要？有什么办法可以缓解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T02:43:21.450

[以下函数将使用 .NET StreamReader](http://msdn.microsoft.com/en-us/library/6aetdk20.aspx)类逐行读取文件，并将每一行发送到管道中。在近 2,000,000 行日志文件 (~186 MB) 上执行时，将其发送到[`Out-Null`](http://technet.microsoft.com/library/hh849716.aspx)我的内存使用量仅增加了 10 KB：

```
function Get-ContentByLine {
  param (
    [Parameter(Mandatory=$true,ValueFromPipeline=$true)][PsObject]$InputObject
  )

  begin {
    $line = $null
    $fs = [System.IO.File]::OpenRead($InputObject)
    $reader = New-Object System.IO.StreamReader($fs)
  }

  process {
    $line = $reader.ReadLine()
    while ($line -ne $null) {
        $line
        $line = $reader.ReadLine()
    }
  }

  end {
    $reader.Dispose();
    $fs.Dispose();
  }
} 
```

你会像这样调用它：

```
PS C:\> Get-ContentByLine "C:\really.big.log" | Out-Null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:29:57.820

[本文](http://blogs.technet.com/b/heyscriptingguy/archive/2011/07/16/working-around-legacy-redirection-issues-with-powershell.aspx)提出了一种可能的解决方案。使用旧的命令行：

```
cmd.exe /C "ECHO < input-file.txt" 
```

旧式输入重定向不会以相同的方式消耗内存。

然而，这非常难看，并且会让你做一些奇怪的事情来构建更复杂的命令。我更喜欢纯 PowerShell 解决方案。

# jquery - 使用jQuery从无序列表中的每个元素中删除字符串？

> ID：12905927
> 
> 赞同：0
> 
> 时间：2012-10-16T00:30:12.947
> 
> 标签：jquery

我有一个这样的无序列表：

```
<ul>
   <li>Happy People</li>
   <li>Sad People</li>
   <li>Angry People</li>
</ul> 
```

我想删除“人”，包括单词前的空格。我将如何在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:32:29.847

```
$('li').each(function() {
    $(this).text( $(this).text().replace(' People', '') );
});​ 
```

[**小提琴**](http://jsfiddle.net/ult_combo/WgQUq/)

* * *

此外，对于更复杂的用例：

如果列表项中有标记，请使用`.html()`而不是`.text()`：（[小提琴](http://jsfiddle.net/ult_combo/WgQUq/5/)）

```
$(this).html( $(this).html().replace(' People', '') ); 
```

如果你想保证 "People" 只会在字符串的末尾匹配：（[小提琴](http://jsfiddle.net/ult_combo/WgQUq/3/)）

```
$(this).text( $(this).text().replace(/ People$/, '') ); 
```

如果您想要不区分大小写的匹配，请将`i`标志添加到正则表达式：（[小提琴](http://jsfiddle.net/ult_combo/WgQUq/4/)）

```
$(this).text( $(this).text().replace(/ People$/i, '') ); 
```

对于您的极简示例，以上所有内容都具有相同的输出。

# google-maps - 按类别对标记进行分组以显示和隐藏

> ID：12905930
> 
> 赞同：2
> 
> 时间：2012-10-16T00:30:27.917
> 
> 标签：google-maps, google-maps-api-3

我正在使用以下内容向谷歌地图添加标记：

```
 function addMarkersToMap(map) {
        // trigger resize on map in case canvas size is different
        google.maps.event.trigger(map, 'resize');

        // remove existing markers
        google.maps.Map.prototype.clearMarkers();

        // create a new bounds object (don't want existing bounds)
        var bounds = new google.maps.LatLngBounds();

        // If there is a map center, use it to center the map 
        $('.mapCenter').each(function() {
                var lat = $(this).find('[itemprop="latitude"]').attr('content');
                var lng = $(this).find('[itemprop="longitude"]').attr('content');

                map.setCenter(new google.maps.LatLng(lat, lng));
        });

        $('[itemtype="http://schema.org/Place"], [itemtype="http://schema.org/LocalBusiness"]').each(function() {
                var title = $(this).find('[itemprop="name"]').text();
                var contentString = $(this).html();
                var lat = $(this).find('[itemprop="latitude"]').attr('content');
                var lng = $(this).find('[itemprop="longitude"]').attr('content');
                var icon = $(this).attr('data-class');
                var category = $(this).find('[itemprop="category"]').attr('content');
                var marker = addMarker(map, title, contentString, lat, lng, icon, category);
                bounds.extend(marker.position);
        });

        // add kml
        $('.MapHolder[data-url]').each(function() {
                var kml = $(this).attr('data-url');
                var kmlLayer = new google.maps.KmlLayer(kml);
                kmlLayer.setMap(map);
        });

        if(!bounds.isEmpty()) {
                map.fitBounds(bounds);
        }

}    
    function addMarker(map, title, contentString, lat, lng, icon, category) {
        var image;
        var shadow;
        var shape;
        if (icon) {
            image = new google.maps.MarkerImage( icon ,
                  new google.maps.Size(31, 41),
                  new google.maps.Point(0,0),
                  new google.maps.Point(15, 40));
        }

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            map: map,
            title: title,
            icon: image,
            shape: shape,
            shadow: shadow
        });

        if(contentString != '') {
                google.maps.event.addListener(marker, 'click', function() {
                        infowindow.setContent($('<div>' + contentString + '</div>').ajaxify().get(0));
                        infowindow.open(map, marker);
                });
        }

        return marker;
    } 
```

我希望能够为这些标记中的每一个指定一个类别，以便我可以根据类别切换标记的可见性（即显示/隐藏兴趣点或显示/隐藏公共厕所等）。

如何修改现有代码以实现我所追求的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:35:26.660

这是一个示例（从 Mike Williams 的 v2 教程中移植）可以做到这一点：

[http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

**代码片段：**

```
// this variable will collect the html which will eventually be placed in the side_bar 
var side_bar_html = "";

var gmarkers = [];
var gicons = [];
var map = null;

var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

gicons["red"] = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/red.png",
  // This marker is 32 pixels wide by 32 pixels tall.
  new google.maps.Size(32, 32),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 16,32.
  new google.maps.Point(16, 32));
// Marker sizes are expressed as a Size of X,Y
// where the origin of the image (0,0) is located
// in the top left of the image.

// Origins, anchor positions and coordinates of the marker
// increase in the X direction to the right and in
// the Y direction down.

var iconImage = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/micons/red.png',
  // This marker is 32 pixels wide by 32 pixels tall.
  new google.maps.Size(32, 32),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 16,32.
  new google.maps.Point(16, 32));
// Shapes define the clickable region of the icon.
// The type defines an HTML &lt;area&gt; element 'poly' which
// traces out a polygon as a series of X,Y points. The final
// coordinate closes the poly by connecting to the first
// coordinate.
var iconShape = {
  coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
  type: 'poly'
};

function getMarkerImage(iconColor) {
  if ((typeof(iconColor) == "undefined") || (iconColor == null)) {
    iconColor = "red";
  }
  if (!gicons[iconColor]) {
    gicons[iconColor] = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/" + iconColor + ".png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(32, 32),
      // The origin for this image is 0,0.
      new google.maps.Point(0, 0),
      // The anchor for this image is at 6,20.
      new google.maps.Point(16, 32));
  }
  return gicons[iconColor];

}

function category2color(category) {
  var color = "red";
  switch (category) {
    case "theatre":
      color = "blue";
      break;
    case "golf":
      color = "green";
      break;
    case "info":
      color = "yellow";
      break;
    default:
      color = "red";
      break;
  }
  return color;
}

gicons["theatre"] = getMarkerImage(category2color("theatre"));
gicons["golf"] = getMarkerImage(category2color("golf"));
gicons["info"] = getMarkerImage(category2color("info"));

// A function to create the marker and set up the event window
function createMarker(latlng, name, html, category) {
  var contentString = html;
  var marker = new google.maps.Marker({
    position: latlng,
    icon: gicons[category],
    map: map,
    title: name,
    zIndex: Math.round(latlng.lat() * -100000) << 5
  });
  // === Store the category and name info as a marker properties ===
  marker.mycategory = category;
  marker.myname = name;
  gmarkers.push(marker);

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
}

// == shows all markers of a particular category, and ensures the checkbox is checked ==
function show(category) {
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].mycategory == category) {
      gmarkers[i].setVisible(true);
    }
  }
  // == check the checkbox ==
  document.getElementById(category + "box").checked = true;
}

// == hides all markers of a particular category, and ensures the checkbox is cleared ==
function hide(category) {
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].mycategory == category) {
      gmarkers[i].setVisible(false);
    }
  }
  // == clear the checkbox ==
  document.getElementById(category + "box").checked = false;
  // == close the info window, in case its open on a marker that we just hid
  infowindow.close();
}

// == a checkbox has been clicked ==
function boxclick(box, category) {
  if (box.checked) {
    show(category);
  } else {
    hide(category);
  }
  // == rebuild the side bar
  makeSidebar();
}

function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

// == rebuilds the sidebar to match the markers currently displayed ==
function makeSidebar() {
  var html = "";
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].getVisible()) {
      html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + '<\/a><br>';
    }
  }
  document.getElementById("side_bar").innerHTML = html;
}

function initialize() {
  var myOptions = {
    zoom: 11,
    center: new google.maps.LatLng(53.8363, -3.0377),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions);

  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });

  // Read the data
  // downloadUrl("categories.xml", function(doc) {
  var xml = xmlParse(xmlData);
  var markers = xml.documentElement.getElementsByTagName("marker");

  for (var i = 0; i < markers.length; i++) {
    // obtain the attribues of each marker
    var lat = parseFloat(markers[i].getAttribute("lat"));
    var lng = parseFloat(markers[i].getAttribute("lng"));
    var point = new google.maps.LatLng(lat, lng);
    var address = markers[i].getAttribute("address");
    var name = markers[i].getAttribute("name");
    var html = "<b>" + name + "<\/b><p>" + address;
    var category = markers[i].getAttribute("category");
    // create the marker
    var marker = createMarker(point, name, html, category);
  }

  // == show or hide the categories initially ==
  show("theatre");
  hide("golf");
  hide("info");
  // == create the initial sidebar ==
  makeSidebar();
  // });
}
google.maps.event.addDomListener(window, 'load', initialize);

var xmlData = '<markers> <marker name="Grand Theatre" address="33 Church St, Blackpool, Lancashire, FY1 1HT" lng="-3.053102" lat="53.817260" category="theatre" /> <marker name="Claremont Theatre Club" address="Burwood Dr, Blackpool, Lancashire, FY3 8NS" lng="-3.049690" lat="53.829649" category="theatre" /> <marker name="Pendle Productions" address="249 Hawes Side La, Blackpool, Lancashire, FY4 4AA" lng="-3.030698" lat="53.794399" category="theatre" /> <marker name="Tram Shed Theatre" address="7 Moor Pk Av, Blackpool, Lancashire, FY2 0LT" lng="-3.034974" lat="53.845938" category="theatre" /> <marker name="Thornton Little Theatre" address="Fleetwood Road North, Thornton Cleveleys, FY5 3SZ" lng="-3.010607" lat="53.872058" category="theatre" /> <marker name="Barbara Jackson Arts" address="Rossall La, Fleetwood, Lancashire, FY7 8JP" lng="-3.033960" lat="53.897928" category="theatre" /> <marker name="North Shore Golf Club" address="Devonshire Rd, Blackpool, Lancashire, FY2 0RD" lng="-3.043305" lat="53.839898" category="golf" /> <marker name="St Annes Old Links" address="Highbury Road East, Lytham St. Annes, Lancashire, FY8 2LD" lng="-3.038407" lat="53.762917" category="golf" /> <marker name="Fairhaven Golf Club" address="Oakwood Av, Lytham St. Annes, Lancashire, FY8 4JU" lng="-2.983218" lat="53.742781" category="golf" /> <marker name="Green Drive Golf Club" address="Ballam Rd, Lytham St. Annes, Lancashire, FY8 4LE" lng="-2.959530" lat="53.745971" category="golf" /> <marker name="Fleetwood Golf Club" address="Princes Wy, Fleetwood, Lancashire, FY7 8AF" lng="-3.042973" lat="53.917606" category="golf" /> <marker name="Knott End Golf Club" address="Wyre Side, Knott End-on-Sea, Poulton-le-Fylde, Lancashire, FY6 0AA" lng="-2.997062" lat="53.923200" category="golf" /> <marker name="Tourist Information 1" address="1 Clifton St, Blackpool, Lancashire, FY1 1LY" lng="-3.054529" lat="53.818775" category="info" /> <marker name="Tourist Information 2" address="Thornton-Cleveleys, Lancashire, FY5 1WA" lng="-3.042989" lat="53.876079" category="info" /> <marker name="Tourist Information 3" address="Victoria Rd West, Thornton-Cleveleys, Lancashire, FY5 1AJ" lng="-3.041668" lat="53.877403" category="info" /> <marker name="Tourist Information 4" address="St. Annes Rd West, Lytham St. Annes, Lancashire, FY8 1SA" lng="-3.031074" lat="53.752122" category="info" /> <marker name="Tourist Information 5" address="The Esplanade, Fleetwood, Lancashire, FY7 6DL" lng="-3.006366" lat="53.926970" category="info" /> <marker name="Tourist Information 6" address="10-12 York St, Blackpool, Lancashire, FY1 5AQ" lng="-3.052919" lat="53.810556" category="info" /></markers>';

function xmlParse(str) {
  if (typeof ActiveXObject != 'undefined' && typeof GetObject != 'undefined') {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  }

  if (typeof DOMParser != 'undefined') {
    return (new DOMParser()).parseFromString(str, 'text/xml');
  }

  return createElement('div', null);
}
```

```
html,
body {
  height: 100%;
}
```

```
<script src="http://maps.google.com/maps/api/js"></script>
<table border=1>
  <tr>
    <td>
      <div id="map" style="width: 550px; height: 450px"></div>
    </td>
    <td valign="top" style="width:150px; text-decoration: underline; color: #4444ff;">
      <div id="side_bar"></div>
    </td>
  </tr>
</table>
<form action="#">
  Theatres:
  <input type="checkbox" id="theatrebox" onclick="boxclick(this,'theatre')" />&nbsp;&nbsp; Golf Courses:
  <input type="checkbox" id="golfbox" onclick="boxclick(this,'golf')" />&nbsp;&nbsp; Tourist Information:
  <input type="checkbox" id="infobox" onclick="boxclick(this,'info')" />
  <br />
</form>
```

# javascript - 标签未在 html 网页 jsfiddle 上打开

> ID：12905931
> 
> 赞同：2
> 
> 时间：2012-10-16T00:30:38.220
> 
> 标签：javascript, html, css, tabs

我制作了一个选项卡式菜单：http: [//jsfiddle.net/zWMYp/](http://jsfiddle.net/zWMYp/)

但是，当我将它添加到我的网页时，它不会像上面那样打开选项卡内容：http: [//jsfiddle.net/vL5VJ/](http://jsfiddle.net/vL5VJ/)

我不确定是什么干扰了标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:46:22.740

```
.css-tabs ul.noint11_menu li > div {
    z-index: -1;
} 
```

是罪魁祸首。删除它（并添加`color: #fff`）它会工作

[http://jsfiddle.net/vM5VJ/2/](http://jsfiddle.net/vM5VJ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:55:42.867

您的代码中有两个问题 1）a href 下 div 中的 z-index 的 z-index 为 -1，因此它落后于其他所有内容 2）文本的颜色与背景几乎相同

我已经更改了这个 css 类作为示例，您可以使用其他方法，例如为 div 文本定义 css 颜色；

```
.css-tabs ul.noint11_menu li:target > div
{
    display:block;
    z-index:1;
    color:white;

} 
```

这是更新的 jsfiddle 链接 [http://jsfiddle.net/vM5VJ/3/](http://jsfiddle.net/vM5VJ/3/)

我的建议是使用 google chrome 检查元素，并逐步删除或添加 css 以找出问题所在。我从不喜欢看整个代码来找出一个非常集中的问题

# node.js - 在请求之外检索本地和 heroku 应用程序主机名

> ID：12905932
> 
> 赞同：10
> 
> 时间：2012-10-16T00:31:23.500
> 
> 标签：node.js, heroku, environment-variables

我必须在我的应用程序中配置一个模块，并根据主机名给它一个特定的 URL。类似于`http://localhost`本地和`http://myapp.herokuapp.com`. 我知道我可以根据 对值进行硬编码`NODE_ENV`，甚至可以将其存储为环境值并使用`process.env.CUSTOMVAR_HOSTNAME`。但不知何故感觉不对，因为`myapp`已经在 Heroku 管理面板中配置了。而且我不能使用`request.headers.host`，因为模块配置发生在应用程序开始时，在任何请求都可以处理之前。

有没有办法从代码中检索 Heroku 应用程序名称？还是来自环境变量？无论我是在本地还是在 Heroku（或任何其他地方）执行代码，我都希望我的代码保持不变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T09:20:57.667

我没有找到任何方法，所以我创建了一个`hostname`基于 NODE_ENV (`development`或`production`) 的局部变量，并具有正确的主机名值。

# python - 我正在尝试导入 numpy 以在 Python 脚本中使用，但出现错误“没有名为 numpy 的模块”

> ID：12905933
> 
> 赞同：1
> 
> 时间：2012-10-16T00:31:24.070
> 
> 标签：python, numpy

我在 64 位 Windows 机器上使用 MinGW。我正在使用 Python 2.6.8。当我尝试从[http://sourceforge.net/projects/numpy/files/NumPy/](http://sourceforge.net/projects/numpy/files/NumPy/)安装 numpy 时，出现在注册表中找不到 Python2.6 的错误。请引导我完成我应该做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:33:49.197

你`pip`安装了吗？这通常是安装它的最佳方式。

### 和`pip`

如果没有`pip`，请执行以下操作：

1.  运行`curl http://python-distribute.org/distribute_setup.py | python`。这为您提供了安装包管理器所需的工具。
2.  运行`curl https://raw.github.com/pypa/pip/master/contrib/get-pip.py | python`。这将安装包管理器。

然后运行`pip install numpy`，它应该为您安装。

### 如果这不起作用

有时在 Windows 机器上，安装更复杂的 Python 包会引发类似`Unable to find vcvarsall.bat`或`gcc exited with status code 1`类似的错误，这是编译错误。您可以通过安装非官方[的预编译二进制文件](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/)来解决这个问题，方法是运行

```
easy_install http://www.lfd.uci.edu/~gohlke/pythonlibs/2kgjgnai/numpy-MKL-1.6.2.win-amd64-py2.6.exe 
```

这会安装 Numpy 的预编译优化二进制文件。这并不像直接从索引安装它那样完美，有时可能会出现轻微的不兼容性，但对于大多数用途来说应该没问题。

完成后，您应该可以`import numpy`毫无问题。

# javascript - grunt.js - 缩小文件时的多个目的地

> ID：12905934
> 
> 赞同：11
> 
> 时间：2012-10-16T00:31:38.840
> 
> 标签：javascript, node.js, gruntjs

我的 grunt.js 有一个典型的缩小任务：

```
min: {
    dist: {
        src: ['dist/precook.js'],
        dest: 'dist/precook.min.js'
    }
} 
```

拥有多个 dest 文件的最简单方法是什么？我想缩小为：

*   dist/precook.min.js
*   示例/js/vendor/precook.min.js

[内置的 min 任务](https://github.com/gruntjs/grunt/blob/master/docs/task_min.md)似乎不支持多个目的地，所以我认为这可以通过一个简单的“复制”任务来实现。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T12:45:14.980

我会使用[grunt-contrib-copy](https://github.com/gruntjs/grunt-contrib-copy)插件：

使用[npm](https://npmjs.org/)安装：

```
npm install grunt-contrib-copy 
```

修改`grunt.js`（添加复制任务定义并加载复制插件）：

```
 ...
    copy: {
        dist: {
            files: {
                'example/js/vendor/': 'dist/precook.min.js'
            }
        }
    }
    ...

grunt.loadNpmTasks('grunt-contrib-copy'); 
```

可选择[注册`copy`到 grunt 的默认任务](https://github.com/gruntjs/grunt/wiki/grunt.task#grunt.task.registerTask)。

这里增加的好处是您现在也可以执行所有其他复制任务。甚至支持模式，例如复制所有缩小的文件 ( `'dist/*.min.js'`)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-30T10:44:01.103

```
concat: {
            css: {
                src: ['UI.controls/assets/css/*.css'],
                dest: 'UI.controls/assets/css/min/production.css'
            },

            js: {
                src: ['UI.controls/assets/js/*.js'],
                dest: 'UI.controls/assets/js/min/production.js'
            },

            js2: {
                src: ['UI.core/assets/js/*.js'],
                dest: 'UI.core/assets/js/min/production.js'
            }

        },

        cssmin: {
            css: {
                src: 'UI.controls/assets/css/min/production.css',
                dest: 'UI.controls/assets/css/min/production.min.css'
            }
        },

        uglify: {
            js: {
                src: 'UI.controls/assets/js/min/production.js',
                dest: 'UI.controls/assets/js/min/production.min.js'
            },

            js2: {
                src: 'UI.core/assets/js/min/production.js',
                dest: 'UI.core/assets/js/min/production.min.js'
            }
        },

        watch: {
            css: {
                files: ['UI.controls/assets/css/*.css'],
                tasks: ['concat:css', 'cssmin:css']
            },
            js: {
                files: ['UI.controls/assets/js/*.js'],
                tasks: ['concat:js', 'uglify:js']
            },

            js2: {
                files: ['UI.core/assets/js/*.js'],
                tasks: ['concat:js', 'uglify:js']
            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:40:39.750

**这是一种替代方法（在@jalonen**的解决方案旁边），您可能会感兴趣，如果您使用[**requirejs**](http://requirejs.org/)来模块化您的项目，那么您可以使用[requirejs 优化器](http://requirejs.org/docs/optimization.html)来缩小您的模块。

首先，您需要将[grunt-contrib-requirejs](https://github.com/gruntjs/grunt-contrib-requirejs)添加到您的项目中：

```
npm install grunt-contrib-requirejs --save-dev 
```

**咕噜声配置：**

```
 requirejs: {
            production:{
                options:{
                    // don't include libaries when concatenating/minifying
                    paths:{
                        angular:'empty:',
                        jquery:'empty:'
                    },
                    baseUrl:'path/to/src/js',
                    dir:'path/to/target/js',
                    // keeps only the combined files
                    removeCombined:true,
                    modules:[
                        {name:'app', exclude: ['moduleA', 'moduleB']},
                        {name:'moduleA'},
                        {name:'moduleB'}
                    ]
                }
            }
        }
        ...

     grunt.loadNpmTasks('grunt-contrib-copy'); 
```

**解释：**

假设你有这个依赖树（`->`意思是*依赖于*）：

```
app -> moduleA -> moduleA1
               -> moduleA2              
app -> moduleB -> moduleB1
               -> moduleB2 
```

缩小后，您将拥有三个文件：

*   `app`（应用程序的缩小版）
*   `moduleA`（缩小版`moduleA`、`moduleA1`和`moduleA2`）
*   `moduleB`（缩小版`moduleB`、`moduleB1`和`moduleB2`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-14T18:16:12.663

有一个类似的问题，并创建了一个[grunt 多任务](https://www.npmjs.org/package/grunt-multi-dest)，在多个目录上运行指定任务的列表

具体情况的用法：```

```
min: {
    dist: {
        src: ['dist/precook.js'],
        dest: 'dist/precook.min.js'
    }
},
multidest: {
    minifiedFiles: {
        tasks: ['min'],
        dest: [
            'dist/precook.min.js',
            'example/js/vendor/precook.min.js'
       ]
    }
} 
```

```

# r - R 的调查包中如何使用 BRR 权重？

> ID：12905936
> 
> 赞同：6
> 
> 时间：2012-10-16T00:31:56.513
> 
> 标签：r, survey, replicate

*如果您的数据集已经*具有 BRR 权重，有谁知道如何在 Lumley 的调查包中使用 BRR 权重来估计方差？

我正在使用 PISA 数据，他们的数据集中已经包含 80 个 BRR 复制。我怎样才能让 as.svrepdesign 使用这些，而不是尝试创建自己的？我尝试了以下并得到了后续错误：

```
dstrat <- svydesign(id=~uniqueID,strata=~strataVar, weights=~studentWeight, 
                data=data, nest=TRUE)
dstrat <- as.svrepdesign(dstrat, type="BRR")

Error in brrweights(design$strata[, 1], design$cluster[, 1], ..., 
    fay.rho = fay.rho,  : Can't split with odd numbers of PSUs in a stratum 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:33:57.077

`as.svrepdesign()`如果您已经有一个具有复制权重的数据框，则无需使用:) 您可以直接从您的数据框创建复制加权设计。

假设您有一个名为主权重列的数据和通过您调用`mainwgt`的 80 个复制权重列，您可以使用它-`repwgt1``repwgt80`

```
yoursurvey <-
    svrepdesign( 
    weights = ~mainwgt , 
    repweights = "repwgt[0-9]+" , 
    type = "BRR", 
    data = yourdata ,
    combined.weights = TRUE
) 
```

-- 这样，您不必确定确切的列号。然后你可以运行正常的调查命令，比如——

```
svymean( ~variable , design = yoursurvey ) 
```

如果您想要另一个示例，这里[有一些示例代码](https://github.com/ajdamico/usgsd/blob/9be971706a69f4e569a7d5643eab602a5c27b311/Current%20Population%20Survey/replicate%20census%20estimates%20-%202011.R#L81)和使用当前人口调查[的解释性博客文章。](http://usgsd.blogspot.com/search/label/current%20population%20survey%20%28cps%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:05:42.950

我没有使用 PISA 数据，`svprepdesign`去年我使用了来自美国社区调查（美国人口普查局）的公共使用微样本的方法，该方法还附带了 80 个重复权重。他们声明使用该`Fay`方法进行该特定调查，因此这是`svyrep`使用该数据构建对象的方法：

```
pums_p.rep<-svrepdesign(variables=pums_p[,2:7],
    repweights=pums_p[8:87],
    weights=pums_p[,1],combined.weights=TRUE,
    type="Fay",rho=(1-1/sqrt(4)),scale=1,rscales=1)

attach(pums_p.rep)
#CROSS - TABS
#unweighted
xtabs(~ is5to17youth + withinAMILimit) 
table(is5to17youth + withinAMILimit)

#weighted, mean income by sex by race for select age groups
svyby(~PINCP,~RAC1P+SEX,subset(
   pums_p.rep,AGEP > 25 & AGEP <35),na.rm = TRUE,svymean,vartype="se","cv") 
```

为了让它发挥作用，我发现A. Damico的[文章很有帮助：](http://journal.r-project.org/archive/2009-2/RJournal_2009-2_Damico.pdf)`Damico, A. (2009). Transitioning to R: Replicating SAS, Stata, and SUDAAN Analysis Techniques in Health Policy Data. The R Journal, 1(2), 37–44.`

# string - 如何在 Visual Studio 中生成字符串的 MD5 哈希？

> ID：12905939
> 
> 赞同：0
> 
> 时间：2012-10-16T00:32:10.870
> 
> 标签：string, visual-studio, md5

VS 中是否有用于生成字符串的 MD5 哈希的实用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:39:20.597

从这里下载命令行实用程序：[http ://www.fourmilab.ch/md5/](http://www.fourmilab.ch/md5/)

接着：

*   工具/设置/专家设置
*   工具/外部工具
    *   标题：md5
    *   命令：path/to/md5.exe
    *   参数：-d“你好”
    *   勾选“使用输出窗口并提示输入参数

不是最好的，但适用于小字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:50:10.513

较新的 Visual Studio 内置了脚本：*查看 -> 其他 Windows -> F# Interactive* 所以只需[将此](http://www.principiaprogramatica.com/2006/10/02/md5-in-one-line-of-c-code/)oneliner 转换为 F# 并使用它：

```
string hash = Convert.ToBase64String(new System.Security.Cryptography.MD5CryptoServiceProvider().
   ComputeHash(System.Text.Encoding.Default.GetBytes(SomeString))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:50:46.783

我记得你可以在没有激活调试的情况下从*即时视图*执行静态代码（即应用程序没有运行），所以如果你在项目中创建一个静态实用程序方法，你可以这样做：

`My.Project.UtilsClass.MD5Sum("string");`

如果你在内存中有字符串（变量在范围内），你也可以在调试时做同样的事情：

`My.Project.UtilsClass.MD5Sum(myLocalVar.stringMember);`

# php - 访问 PHP 对象的属性，如 CSS-3 选择器

> ID：12905940
> 
> 赞同：0
> 
> 时间：2012-10-16T00:32:17.670
> 
> 标签：php, css

我最近下载了一个 HTML DOM 解析器（ganon），并注意到它允许访问通过如下`file_get_dom()`函数返回的 HTML 元素：

`$data = file_get_dom("someresource");`

`foreach($data('table.someClass') as $something)..`

我怎样才能实现这种访问属性的相同方法？我以前从未见过 $var() 使用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:47:14.033

答案是“[变量函数](http://php.net/manual/en/functions.variable-functions.php)”。

# python - 从字符串中删除数字-Python

> ID：12905945
> 
> 赞同：0
> 
> 时间：2012-10-16T00:32:50.600
> 
> 标签：python, function, python-2.7

我正在为高中课程创建一个程序，我们的老师对我们的程序允许的内容非常具体。我们使用 python 2.x，他只允许 if 语句、while 循环、函数、布尔值和列表。我正在做一个项目，该项目将打印字符串的反转，然后再次打印相同的反转，但我无法弄清楚。请帮忙。到目前为止我所拥有的是这个..

```
 def reverse_str(string):
    revstring =('')
        length=len(string)
        i = length - 1
        while i>=0:
            revstring = revstring + string[i]
            i = i - 1
        return revstring
    def strip_digits(string):
        l = [0,1,2,3,4,5,6,7,8,9]
        del (l)  rev_string

    string = raw_input("Enter a string->")
    new_str = rev_str(string)
    print new_str 
```

我无法弄清楚如何正确使用“del”函数，如何从反向字符串中删除列表中的任何项目..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:36:02.657

一般来说，对于这样的任务，您有两种选择：

1.  遍历列表中的项目，删除您*不想*保留的项目。

2.  遍历列表中的项目，将您想要保留的项目复制*到*新列表中。返回新列表。

现在，虽然我通常更喜欢选项（2），但这对您关于`del`. `x`要从list 中删除 index 处的项目`a`，可以使用以下语法：

```
del a[x] 
```

这会将所有超过索引的元素`x`向左移动，以通过删除元素来缩小左边的间隙。如果您要遍历列表中的所有项目，则必须考虑这种转变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:40:33.693

python中的type`str`是不可变的（不能原地改变），不支持`del`item删除功能。

将字符串的字符映射到列表并删除所需的元素并重建字符串。

或者

遍历字符串元素，同时构建一个新元素，省略数字。

的正确用法`del`是：

```
>>> a = [1, 2, 3]
>>> del a[1]
>>> a
[1, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:37:11.823

您可以遍历字符串，再次复制它，但不复制数字......您还可以找出pythonic方式来做所有您不允许做的事情，这会很有趣。这两种方法都很好知道。

# audio - 3d空间中声源位置的计算

> ID：12905949
> 
> 赞同：0
> 
> 时间：2012-10-16T00:33:54.810
> 
> 标签：audio, vector, 3d, position, listener

我有一个用于听众位置的 3d 矢量和一个用于声源的 3d 矢量。我还有一个用于听众方向的 3d 矢量。我正在尝试找到源相对于听众的位置的 NED（北、东、下），以便我可以在正确的扬声器中播放声音......我已经进行了如此研究，但我似乎无法找到必要的方程......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T05:27:07.617

Ambisonics B-Format 编解码器完全符合您的描述。然而，虽然这个编解码器的规范是开放的，但由于它不幸不受欢迎，因此找到它是相当具有挑战性的。

好消息是，我编写了一个名为“Ambisonix”的 BSD 开源项目，其中详细说明了实现高达 3 阶 Ambisonics 编码和解码所需的所有方程式。我还添加了一些不属于原始规范的功能，例如距离编码和多普勒效应。

查看：http: [//sourceforge.net/projects/ambisonix](http://sourceforge.net/projects/ambisonix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T01:03:27.690

您需要从声音矢量中减去听者矢量，然后您可以通过听者方向矢量旋转。现在您可以简单地检查新向量在轴上是正还是负。例如向量 [ 0, 10, -2] 可以读作 [0,+,-] 并且它的意思是 [central, up, back]。要使用 NS WE UD 方向，请不要在减去后旋转矢量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:33:52.430

我不认为你会找到你正在寻找的东西。3D 场中声源的空间位置是一个非常复杂的主题，取决于许多因素（听众位置、扬声器位置、源材料）。最接近您所描述的可能是[Ambisonics](http://en.wikipedia.org/wiki/Ambisonics)，但这需要聆听设置也是 Ambisonics，这并不常见。如果您使用的是杜比数字之类的东西，我认为他们不会给出方程式，您需要获得算法许可或将源材料与具有许可并内置算法的设备混合。但是，杜比等系统是并不是真正为 3D 声场中的精确声源定位而设计的——它们实际上只是一种空间效果，让听者有 3D 声场的感觉。

# c++ - 为什么命名空间不能是模板参数？

> ID：12905951
> 
> 赞同：27
> 
> 时间：2012-10-16T00:34:05.977
> 
> 标签：c++, templates, namespaces, language-design

我知道命名空间不能是模板参数。请参阅问题[“专门用于命名空间的模板”](https://stackoverflow.com/questions/3558609/template-specialized-on-a-namespace)：

> 鉴于：
> 
> ```
> namespace A {
>   class Foo;
>   class Bar;
> }
> 
> namespace B {
>   class Foo;
>   class Bar;
> } 
> ```
> 
> 我想在命名空间上对一个类进行模板化，`A`或者`B`使以下工作：
> 
> ```
> template<name> class C {
>   name::Foo* foo;
>   name::Bar* bar;
> }; 
> ```

我想知道为什么会这样。我知道模板不是结构，但编译器的设计是否存在技术限制？或者实现这个功能是否有一些重大的权衡？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-16T15:46:57.633

当 Bjarne Stroustrup 在 C++ 标准会议上第一次开始谈论模板时，他提到了命名空间作为模板参数。反应持怀疑态度，部分原因是名称空间本身太新了，我们害怕将两个我们不理解的东西结合起来。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-16T00:42:17.523

这将是：

1.  (IMO) 不恰当：命名空间避免名称冲突。多态性超出了他们的章程。
2.  不必要的：它不会实现任何结构已经无法完成的事情。
3.  可能很困难：命名空间不是一个完整的、自包含的实体。命名空间的不同成员可以在不同的头文件甚至不同的编译单元中声明。

# python - Python变量不会改变？

> ID：12905953
> 
> 赞同：4
> 
> 时间：2012-10-16T00:34:35.953
> 
> 标签：python, boolean

我正在用python制作游戏，并且我设置了一些代码：

```
istouching = False
death = True

def checkdead():
    if istouching:
        print "Is touching"     
        death = True

while death is False:
    print death
    game logic 
```

我知道游戏逻辑是有效的，因为“正在触摸”打印，但是当我打印出死亡的价值时，它仍然是假的，有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:36:50.550

用于`global`更改函数内部的全局变量，否则`death=True`内部`checkdead()`实际上会定义一个新的局部变量。

```
def checkdead():
    global death
    if istouching == True:      #use == here for comparison
        print "Is touching"     
        death = True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T00:37:09.637

使`checkdead`返回值：

```
def checkdead():
    if istouching:
        print "Is touching"     
        return True

death = checkdead() 
```

正如@AshwiniChaudhar 所示，您也可以使用`global`，但我认为最好编写返回值的函数而不是修改全局变量的函数，因为这样的函数可以更容易地进行单元测试，并且它明确了哪些外部变量被更改。

PS。`if istouching = True`应该导致 SyntaxError，因为您不能在条件表达式中进行变量赋值。

相反，使用

```
if istouching: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:51:44.907

那是范围相关的。

```
death = False        
def f():
    death = True      # Here python doesn't now death, so it creates a new, different variable
f()
print(death)          # False

death = False       
def f():
    global death
    death = True
f()
print(death)      # True 
```

# javascript - dojo.dnd.moveable 位置：固定

> ID：12905958
> 
> 赞同：2
> 
> 时间：2012-10-16T00:36:06.527
> 
> 标签：javascript, css, dojo, drag-and-drop

我尝试在浏览器窗口中使用具有固定位置的可移动道场。不幸的是，每次我用鼠标移动 div 时，位置都设置为绝对值。我该怎么做才能使 div 固定？

html:

```
<html>
<body>

<div id="moveMe" style="position:fixed;width:100px;height:100px;border:1px solid black;background-color:#00ff00;cursor:pointer;">bla</div>
<p>test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>
test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>
test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>
test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>
test<br>test<br>test<br>test<br>test<br>test<br>test<br>test<br>
</body>
</html> 
```

脚本：

```
dojo.require("dojo.dnd.move");
dojo.ready(function(){

    var pcm = new dojo.dnd.move.boxConstrainedMoveable(dojo.byId("moveMe"), {
        box : dojo.window.getBox(),
        within : true
    });

}); 
```

测试链接：http: [//jsfiddle.net/zPVdX/](http://jsfiddle.net/zPVdX/)

干杯，克拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:43:14.270

*position: fixed*和*position: absolute*是浏览器用来确定元素如何定位的两种完全相反的方法。

我首先建议阅读它们之间的差异：[http ://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

希望现在您会理解为什么 Dojo draggable 需要将您的元素设置为绝对位置。这允许 Dojo 通过它的*top:*和*left:*属性直观地移动可拖动元素。

将此与静态定位进行比较，静态定位将尝试将您的元素锚定到相对于当前视口的位置。

如果您添加更多关于您在视觉上试图完成的细节，可能会有另一种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-14T03:35:22.317

我刚刚得到这个工作：

> ```
>  dnd.on('MoveStart', function (e) {
>             var p = dojo.position(e.node, true);
>             var parent_position = dojo.position(e.node.parentNode, true)
> 
>             dojo.style(e.node, "top", p.y - parent_position.y + "px");
>             dojo.style(e.node, "position", "absolute");
>         });
>         dnd.on('MoveStop', function (e) {
>             var p = dojo.position(e.node, false);
>             dojo.style(e.node, "top", p.y + "px");
>             dojo.style(e.node, "position", "fixed");
>         }); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T11:01:53.813

您可以在您的 DND（可拖动元素）上使用事件`'MoveStop'`，以便`position: fixed;`在拖动操作的 END 处强制添加。通过这种方式，您将能够使用拖动元素`position: absolute;`并在拖动完成时使其具有固定位置。

一些伪代码

```
 yourDnd.on('MoveStop', function (e) {
        // Set position FIXED
        domStyle.set(this.node, {
            'position': 'fixed ',
        });
    }); 
```

有关活动的更多信息可以在这里找到：

[http://livedocs.dojotoolkit.org/dojo/dnd](http://livedocs.dojotoolkit.org/dojo/dnd)

关于[这个 hack](http://codenaschen.de/tichyblog/index.php?action=blog&entry=14_Dojo%20DnD%20with%20position:fixed)，我不建议您更改 DOJO 库，因为您的更改可能不安全并在框架的其他部分产生错误。

# ruby - 三元评估是否需要参数化？

> ID：12905960
> 
> 赞同：1
> 
> 时间：2012-10-16T00:36:25.160
> 
> 标签：ruby, ternary-operator

似乎如果我将代码放入我的三元评估中，它会失败，但放置`true`或`false`它会起作用。

这是我的代码：

```
>test = [nil]
=> [nil]

>test.any? ? puts "AAA" : puts "BBB"
SyntaxError: (irb):16: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
test.any? ? puts "AAA" : puts "BBB"
                  ^
(irb):16: syntax error, unexpected ':', expecting $end
test.any? ? puts "AAA" : puts "BBB"

>test.any? ? true : false
=> false

>test << 1
=> [nil, 1]

>test.any? ? true : false
=> true

>test.any? ? puts "AAA" : puts "BBB"
SyntaxError: (irb):14: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
test.any? ? puts "AAA" : puts "BBB"
                  ^
(irb):14: syntax error, unexpected ':', expecting $end
test.any? ? puts "AAA" : puts "BBB"
                        ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:40:09.023

你需要括号。

```
>> test.any? ? puts("AAA") : puts("BBB")
BBB
=> nil 
```

您应该避免在内联函数中进行无括号调用。

# flash - 为什么 Chrome、FF、Safari、Android ICS（及以上版本）不显示对象电影 Flash？

> ID：12905970
> 
> 赞同：0
> 
> 时间：2012-10-16T00:38:22.110
> 
> 标签：flash, browser, movie

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">
   <PARAM NAME="FlashVars" VALUE="file=2.flv&amp;autostart=true">
   <PARAM NAME="Movie" VALUE="player.swf">
</object> 
```

以上HTML（需修改url）在IE、Android GB播放。但在 FF、Safari 和 Chrome 等其他浏览器上，则无法播放。尤其是在 Android ICS 上，它不会播放。

**有没有人知道为什么其他浏览器可以在Android ICS 上专门显示flash 电影的原因？**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:43:21.983

[Android 不再正式支持 Flash](http://www.readwriteweb.com/mobile/2012/08/adobe-flash-on-android-rip.php)。如果 ICS 设备还没有它，那么获得它并非易事。

# php - 将变量/值传递给自定义异常？

> ID：12905971
> 
> 赞同：4
> 
> 时间：2012-10-16T00:38:31.673
> 
> 标签：php

这是您将值（下面示例中的“用户名”）传递给自定义异常的方式吗？问题是我会使用`__construct()`吗？是否使用自定义异常来检查重要变量是否设置过大？

```
class customException extends Exception {

    public function __construct($e) {
        parent::__construct($e); // makes sure variable is set? [1]
        $this->e = $e;
    }
    public function redirect_user() {
        if($this->e === "username") {
            header("Location: ");
        }
    }
}

class testing {

    public function test() {
        try {
            if(!isset($_POST['username'])) {
                throw new customException("username");
            }
        }
        catch(customException $e) {
            $e->redirect_user();
        }
    }
} 
```

[1] [http://php.net/manual/en/language.exceptions.extending.php#example-266](http://php.net/manual/en/language.exceptions.extending.php#example-266)

在旁注中，目的是`parent::__construct($e)`什么？那不是多余的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:50:11.930

您的构造函数根本没有理由。我建议使用`$this->getMessage()`访问您尝试设置的值`$this->e`。

所以做这样的事情：

```
class customException extends Exception {
    public function redirect_user() {
        if($this->getMessage() === "username") {
            print_r("Header");
        }
    }
} 
```

它更加直接，并且只扩展了基类的功能，而不是不必要地覆盖构造函数。

话虽如此，我个人不喜欢像您正在做的那样使用异常来执行应用程序流逻辑的想法。对我来说，自定义异常对于与自定义日志系统交互很有用，或者能够记录应用程序状态中默认异常类不可用的方面。

# html - 什么是好的 HTML 内联 CSS 表单？

> ID：12905978
> 
> 赞同：1
> 
> 时间：2012-10-16T00:39:47.650
> 
> 标签：html, css, formatting

我想制作包含内容的气泡，放置在 HTML 页面周围。因此，我创建了一个 .bubble CSS 类，并将位置值作为内联样式。这给了我一些相当长的行。我使用的编程语言的风格指南规定了最大行长度，并指定了应该如何分解过长的行。就像是

```
<div class="bubble"
    style="top: 10%;
    left: 40%;
    right: 60%;
    width: 480px;
    height: 295">
    Content.
</div> 
```

...看起来很荒谬。什么是好的形式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:44:13.747

我宁愿在一行中查看。话虽如此，我几乎从未见过它像那样破碎。在某些情况下，我认为浏览器无论如何都会删除换行符。

虽然我**真的**不想看到内联 CSS。

但是，如果您必须使用内联 CSS，我认为 80 个字符的“适合屏幕的任何内容”的标准仍然适用。

**编辑**

可以肯定的是，我对内联 CSS 指南进行了一些简单的搜索，并且我发现的所有网站都强烈反对将其作为一种实践。我知道你的问题是关于内联 CSS，但我觉得有义务说**不要**。它打破了关注点分离的概念。它将您的 html 与您的 CSS 紧密结合。如果您想尝试新设计怎么办？现在您必须直接编辑您的 html 并冒着完全破坏流程或页面的风险，而不仅仅是指向一个新的 CSS 文件。

如果您需要特定元素的特定 CSS，请在其上添加一个 ID，然后将其放入您的外部 CSS 文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T00:53:48.307

**编辑：**没有必要同时拥有*左右**声明*。如果您告诉浏览器该元素距离左侧 40%，它会知道它距离右侧 60%。这将为您节省一些代码字符，并且不会改变结果。

 *你没有做一个泡泡CSS类。您创建了一个气泡类**并将**内联 css 添加到 div 标签。你有很多选择。我不太确定你为什么没有选择它们。

如果行长有问题，请删除空格。您不需要它们，并保持线路更短。

```
<div class="bubble" style="top:10%;left:40%;width;480px;height:295;">
Content.
</div> 
```

但是，同意这里的另一篇文章，不要使用内联 css。这是不好的做法。如果样式必须在文件中（如在 Tumblr 主题中），请将它们放在样式标签中。

```
<style> .bubble {top:10%;left:40%;width:480px;height:295;}
</style> 
```

或者做我们大多数人所做的，将样式放在一个单独的 css 文件中，在 head 标签之间有一个指向它的链接。

```
 <link href="yourstyles.css" rel="stylesheet" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:05:25.017

您是否考虑过通过 js 和 jQuery 来做这件事？或者，你可以这样：

```
$('.someBubble').css({
top: 10%;
    'left': '40%',
    'right': '60%',
    'width': '480px',
    'height': '295px'
}); 
```

不知道您必须使用哪些约束或限制，这至少可以让您避免内联样式。*

# python - 如何让我的用户输入在 python 中允许其中的变量？

> ID：12905984
> 
> 赞同：0
> 
> 时间：2012-10-16T00:40:29.077
> 
> 标签：python, string, variables, input

我的问题是我的程序无法识别用户输入的等式两边包含一个变量（x），我正在使用试错法进行查找。它将 x 视为一个字符串，与定义的变量 x 分开。因此，如果用户在等式 16 的右边输入，在左边输入 x*x，程序将不会将 x 识别为变量 x，而是将其识别为字符串 x。请帮忙。无论如何，这是我的代码，（这意味着求解一个只有一种变量类型 x 的方程）：

```
startingLimit=raw_input("What is the lowest estimate that your variable could possibly be?")

print

wholeNumber=raw_input("Do you know if your variable will be a whole number or a             fraction? Answer: yes/no")
if (wholeNumber== "yes"):
    print
    fraction= raw_input("Is it a decimal/fraction? Answer:yes/no")
if (fraction=="yes"):
    print
    print "This program will only calculate up to the fourth place to the right of the decimal"
    xfinder=0.0001
else:
    xfinder=1

x=4          
leftEquation=raw_input("Enter your left side of the equation:")
print
rightEquation=raw_input("Enter the right side of the equation:")
print
amountSolutions=raw_input("How many solutions are there to your equation? (up to 20)")

indivisualCount=0
count=0

while (count!=amountSolutions):

if (count==1):
    if (leftEquation==rightEquation):
        a=x
        count=count+1
if (count==2):
     if (leftEquation==rightEquation):
        b=x
        count=count+1
if (count==3):
     if (leftEquation==rightEquation):
        c=x
        count=count+1
if (count==4):
     if (leftEquation==rightEquation):
        d=x
        count=count+1
if (count==5):
     if (leftEquation==rightEquation):
        e=x
        count=count+1
if (count==6):
     if (leftEquation==rightEquation):
        f=x
        count=count+1
if (count==7):
     if (leftEquation==rightEquation):
        g=x
        count=count+1
if (count==8):
     if (leftEquation==rightEquation):
        h=x
        count=count+1
if (count==9):
     if (leftEquation==rightEquation):
        i=x
        count=count+1
if (count==10):
     if (leftEquation==rightEquation):
        j=x
        count=count+1
if (count==11):
     if (leftEquation==rightEquation):
        k=x
        count=count+1
if (count==12):
     if (leftEquation==rightEquation):
        l=x
        count=count+1
if (count==13):
     if (leftEquation==rightEquation):
        m=x
        count=count+1
if (count==14):
     if (leftEquation==rightEquation):
        n=x
        count=count+1
if (count==15):
     if (leftEquation==rightEquation):
        o=x
        count=count+1
if (count==16):
     if (leftEquation==rightEquation):
        p=x
        count=count+1
if (count==17):
     if (leftEquation==rightEquation):
        q=x
        count=count+1
if (count==18):
     if (leftEquation==rightEquation):
        r=x
        count=count+1
if (count==19):
     if (leftEquation==rightEquation):
        s=x
        count=count+1
if (count==20):
     if (leftEquation==rightEquation):
        t=x

if (indivisualCount==0):
    x=x+xfinder
    indivisualCount=indivisualCount+1

x=x+xfinder

print
print "Compiling..."
time.sleep(3)
if (amountSolutions==1):
    print "Solutions= ",a
if (amountSolutions==2):
    print "Solutions= ",a,b
if (amountSolutions==3):
    print "Solutions= ",a,b,c
if (amountSolutions==4):
    print "Solutions= ",a,b,c,d
if (amountSolutions==5):
    print "Solutions= ",a,b,c,d,e
if (amountSolutions==6):
    print "Solutions= ",a,b,c,d,e,f
if (amountSolutions==7):
    print "Solutions= ",a,b,c,d,e,f,g
if (amountSolutions==8):
    print "Solutions= ",a,b,c,d,e,f,g,h
if (amountSolutions==9):
   print "Solutions= ",a,b,c,d,e,f,g,h,i,j
if (amountSolutions==10):
    print "Solutions= ",a,b,c,d,e,f,g,h,i,j,k
if (amountSolutions==11):
    print "Solutions= ",a,b,c,d,e,f,g,h,i,j,k,l
if (amountSolutions==12):
    print "Solutions= ",a,b,c,d,e,f,g,h,i,j,k,l,m
if (amountSolutions==13):
    print "Solutions=",a,b,c,d,e,f,g,h,i,j,k,l,m,n
if (amountSolutions==15):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o
if (amountSolutions==16):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o,p
if (amountSolutions==17):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o,p,q
if (amountSolutions==18):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o,p,q,r
if (amountSolutions==19):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o,p,q,r,s
if (amountSolutions==20):
    print "Solutions= ",a,b,c,d,e,f,g,h,u,j,k,l,m,n,o,p,q,r,s,t

print
print
time.sleep(5)
print "PROGRAM COMPLETED" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:45:04.323

您可以[`eval()`](http://docs.python.org/library/functions.html#eval)用来评估任意 Python 代码。在现实世界的代码中使用它通常是一个非常糟糕的主意，因为允许用户执行未知代码是极其危险的，即使你试图限制他们可以做的事情。

但是，如果您*确实*使用它，我*强烈*建议您使用`globals`和`locals`参数来限制允许用户使用的变量。一个例子：

```
>>> x=5
>>> eval('x*x', None, {'x': x})
25 
```

通过仅显式定义变量 x ，您可以确保用户不会尝试访问他们不应该访问的内容：

```
>>> eval('x*y', None, {'x': x})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in <module>
NameError: name 'y' is not defined 
```

如果你想允许使用数学函数，你可以像这样在第二个参数中传递它们：

```
>>> import math
>>> eval('sin(x)', {'sin': math.sin}, {'x': x})
-0.95892427466313845 
```

# python - Python MySQLdb - 保持光标打开有什么好处吗？

> ID：12905986
> 
> 赞同：2
> 
> 时间：2012-10-16T00:40:36.407
> 
> 标签：python, mysql, mysql-python

**[Python/MySQLdb] - CentOS - Linux - VPS**

我有一个页面可以解析一个大文件，每次运行最多查询 100 次数据。数据库非常大，我正在尝试减少此脚本的执行时间。

我的 SQL 函数在一个类中，当前连接对象是类实例化时创建的类变量。我有各种获取和查询函数，每次调用它们时都会从连接对象创建一个游标。在创建连接对象并重用它时创建游标会更快，还是在每次调用游标时创建游标会更好？

```
import MySQLdb as mdb
class parse:
    con = mdb.connect( server, username, password, dbname )
    #cur = con.cursor() ## create here?
    def q( self, q ):
        cur = self.con.cursor() ## it's currently here
        cur.execute( q ) 
```

也欢迎任何其他关于如何加快脚本速度的建议。对于脚本中的所有查询，插入语句都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:54:29.233

打开和关闭连接从来都不是免费的，它总是会浪费一些性能。

您不想让连接保持打开状态的原因是，如果两个请求同时进入，第二个请求必须等到第一个请求完成后才能执行任何工作。

解决此问题的一种方法是使用连接池。您创建了一堆打开的连接，然后重用它们。每次您需要进行查询时，您都会检查池外的连接，执行请求，然后将其放回池中。

设置所有这些可能非常乏味，所以我建议使用[SQLAlchemy](http://www.sqlalchemy.org/)。它内置了[连接池](http://docs.sqlalchemy.org/en/rel_0_7/core/pooling.html)，开销相对较低，并且支持 MySQL。

由于您关心速度，我只会使用 SQLAlchemy 的核心部分，因为 ORM 部分的速度要慢一些。

# asp.net - ASP MVC4 Admin 添加用户设置

> ID：12905987
> 
> 赞同：1
> 
> 时间：2012-10-16T00:40:44.027
> 
> 标签：asp.net, asp.net-mvc-4

我刚刚在网站管理工具中学习管理方面，已经建立了一个新项目。我访问了后端的安全面板，并创建了一个管理员角色，用于通过控制器过滤器访问视图。所有标准的东西。

但是，当我尝试使用此用户登录到前端时，它不存在，我必须重新创建它。

或者，当我在前端创建用户并尝试在后端为他分配管理员角色时，他也不存在。

只有在后端创建的用户，存在于后端并且可以分配角色

前端用户和后端用户之间似乎没有任何联系。似乎有两个独立的数据库，一个拥有前端用户，一个拥有后端用户。

从前端授予后端用户管理员权限似乎不起作用。

有没有关于这个系统如何工作的解释？我在没有帮助的情况下使用了谷歌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:06:45.410

如果您使用的是标准的 asp.net mvc 4 应用程序，那么可以。这是可以预料的。

原因是 MVC4 默认使用不同的成员资格提供程序，称为 SimpleMembership，并且此提供程序与 ASP.NET 配置实用程序不兼容。该配置实用程序使用旧的成员资格提供程序，它具有完全不同的表。

您的选择是：

1.  不要使用 Web 配置实用程序。手动添加用户，或通过脚本添加用户，或者创建您自己的管理页面。
2.  禁用简单会员，以便 MVC 使用旧的会员系统
3.  做一些完全不同的事情（不要使用会员资格，使用不同的提供者，创建你自己的提供者，等等......）

至于单独的数据库，是的。如果您注意到，您的 web.config 中没有成员资格配置。相反，ASP.NET Congifuration 实用程序使用在您的 machine.config 中定义的默认成员资格配置`c:\windows\microsoft.net\framework[64]\config`。默认位置是位于 App_Data 目录下的项目目录中名为 aspnet.mdf 的文件

编辑：

有关新提供商的更多信息，请点击此处：

[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

还：

[http://geekswithblogs.net/Aligned/archive/2012/08/30/mvc-4-authentication.aspx](http://geekswithblogs.net/Aligned/archive/2012/08/30/mvc-4-authentication.aspx)

# php - 如何优化以下标签（php代码-graph api）？

> ID：12905989
> 
> 赞同：0
> 
> 时间：2012-10-16T00:40:55.670
> 
> 标签：php, facebook, facebook-graph-api

```
 foreach($friends_array as $user) {
    $argstag = array('to' => $user);
    $argstag['x'] = $locations_x[$i];
    $argstag['y'] = $locations_y[$i];
    $datatag = $facebook->api('/' . $photo_id . '/tags', 'post', $argstag);
    $i++;
 } 
```

不是在循环中执行此操作（多个 api 请求），有没有办法在单个 api 请求中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:18:43.857

下面的代码对我有用，前提是数组 $friends 的朋友少于 50 个：

```
$tags = array();
 foreach ($friends as $friend)
         {
            $tag = array();
            $tag['tag_uid'] = $friend;
            $tag['x'] = rand() % 100;
            $tag['y'] = rand() % 100;
            $tags[] = $tag;
         }
          $argstag = array(
            'tags' => $tags
          );
          $facebook->api("$photoId/tags","POST", $argstag); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:02:04.710

如果您同时进行大量操作，请考虑使用[批处理请求 API](https://developers.facebook.com/docs/reference/api/batch/)。它允许您同时执行多个任务（最多 50 个）。

这是一个关于理论上如何使用它的示例：

```
$batches = array();
$i = $b = 0;
foreach($friends_array as $user) {
 $argstag = array('to' => $user);
 $argstag['x'] = $locations_x[$i];
 $argstag['y'] = $locations_y[$i];

 // If we've reached the batch limit, create a new batch request.
 if ($i == 50) {
    $b++;
    $i = 0;
 }

 // Single batch request.
 $batches["$b"][] = array(
    'method' => 'POST',
    'relative_url' => '/' . $photo_id . '/tags',
    'body' => 'to=' . $user . '&x=' . $locations_x[$i] . '&y=' . $locations_y[$i]
 );

 $i++;
}

if (!empty($batches)) {
  foreach ($batches AS $key => $batch) {
    $b = json_encode($batch);
    $res = $facebook->api('?batch=' . urlencode($b), 'POST');
    // Facebook populates $res with the response.
  }
} 
```

这未经测试，但希望这会有所帮助。它可能不是您想要的，但值得注意的是，如果您有大量请求需要发送到 Facebook 的服务器。

# javascript - 使用 jQuery .each() 带有字母的“数字”div

> ID：12905990
> 
> 赞同：2
> 
> 时间：2012-10-16T00:41:06.827
> 
> 标签：javascript, jquery

我用它来为具有“数字”类的 div 编号：

```
$("#parent .number").each(function(i){
    $(this).html((i+1) + ". ");
}); 
```

但是我将如何使用类似于“数字”的东西作为 a、b、c、d 等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T00:44:29.230

使用`string.fromCharCode`：

```
$("#parent .number").each(function(i){
    $(this).html(String.fromCharCode(97 + i) + ". ");
}); 
```

此外，如果您想使用大写字符，请使用 65 而不是 97。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T00:43:40.440

您可以创建一个字母字符数组：

```
var alpha = ["a","b","c",....]; 
```

然后使用索引打印它们：

```
$("#parent .number").each(function(i){
    $(this).html(alpha[i] + ". ");
    }); 
```

如您所知，您可以使用有序列表通过 html 和 css 执行此操作：

的HTML：

```
<ol class="alpha">
   <li>text ...</li>
   <li>text ...</li>
   <li>text ...</li>
   <li>text ...</li>
</ol> 
```

的CSS：

```
ol.alpha li {
   list-style-type:lower-alpha;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:46:10.510

```
var index = 97;
$("#parent .number").each(function(i){
    $(this).html(String.fromCharCode(index++));
}); 
```

[**现场演示**](http://jsfiddle.net/agKrz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T00:48:26.297

这*必须*用Javascript完成吗？CSS 计数器可以达到同样的效果：

[http://jsfiddle.net/UZwqu/1/](http://jsfiddle.net/UZwqu/1/)

```
#parent {
    counter-reset: my-counter;
}

#parent .number:before {
    content: counter(my-counter, lower-alpha);
    counter-increment: my-counter;
}​ 
```

更多详情：

[http://css-tricks.com/numbering-in-style/](http://css-tricks.com/numbering-in-style/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T00:47:16.270

```
var i=97;
$("#parent .number").each(function(){
    $(this).html(String.fromCharCode(i++) + ". ");
  }); 
```

# php - PHP Foreach 循环与 If

> ID：12905992
> 
> 赞同：0
> 
> 时间：2012-10-16T00:41:28.840
> 
> 标签：php

试图循环通过具有项目的结果。项目有一个类型，并试图呼应每个组的类别标题。通常，这在一个循环中效果很好，但我*认为*$item-type foreach会把事情扔掉。有什么解决办法吗？

```
<h2>Package <?=$packages->id?></h2>

<?php foreach($packages->item as $item):?>

    <?php foreach($item->type as $type):?>

        <?php $subtype = null;?>

        <?php if($subtype != $type->name)?>

            <h3><?=$type->name?></h3>

            <?=$item->name?><br>

            <?php $subtype = $type->name;?>

    <?php endforeach;?>

<?php endforeach;?> 
```

数据库结构：

```
items
    id   name
    1    mainitem1
    2    mainitem2
    3    item1
    4    item2
    5    item3
    6    item4

types
    id   name
    1    category 1
    2    category 2
    3    subcategory1
    4    subcategory2

item_type
    id   item_id   type_id
    1    1         1
    2    2         2
    3    3         3
    4    4         3
    5    5         4
    6    6         4

packages
    id   item_id
    1    1
    2    2

item_package
    id   package_id   item_id
    1    1            3
    2    1            5
    3    2            4
    4    2            6 
```

我目前的结果是：

```
package 1
    category 1
        item 3
    category 1
        item 5
    category 2
        item 4
    category 2
        item 6 
```

期望的结果：

```
package 1
    category 1
        item 3
        item 5
    category 2
        item 4
        item 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:52:19.013

`$subtype`没有任何作用，因为它在 if 语句之前被设置为 Null

```
$subtype = null;
if($subtype != $type->name)  <------- This would always be true 
```

类别名称也重复，因为它在内部循环而不是外部循环中

这就是我认为你需要的全部

```
printf("<h2>%s</h2>", $packages->id);
foreach ( $packages->item as $item ) {
    printf("<h3>%s</h3>", $type->name);
    print("<ul>");
    foreach ( $item->type as $type ) {
        printf("<li>%s</li>", $item->name);
    }
    print("</ul>");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:55:56.843

作为上述问题的解决方案，请参考以下代码片段

```
 <h2>Package <?=$packages->id?></h2> 
   <?php foreach($packages->item as $item):?> 
    <h3><?php echo $item->name;?></h3>

   <?php foreach($item->type as $type):?>
   <?php $subtype = null;?> 
   <?php if($subtype != $type->name)?> 
    <?=$type->name?><br> 
   <?php $subtype = $type->name;?> 
  <?php endforeach;?> 
  <?php endforeach;?> 
```

# python - 如何创建键或将元素附加到键？

> ID：12905999
> 
> 赞同：202
> 
> 时间：2012-10-16T00:42:07.373
> 
> 标签：python, dictionary

我有一本空字典。名称：`dict_x` 具有值是列表的键。

从单独的迭代中，我获得了一个键（例如：）`key_123`和一个项目（一个元组）以放置在`dict_x`'s value的列表中`key_123`。

如果这个键已经存在，我想追加这个项目。如果此键不存在，我想用一个空列表创建它，然后附加到它，或者只是在其中创建一个元组。

将来当这个键再次出现时，因为它存在，我希望再次附加该值。

我的代码包括：

> 获取键和值。
> 
> 查看**NOT**键是否存在于`dict_x`.
> 
> 如果不创建它：`dict_x[key] == []`
> 
> 然后：`dict_x[key].append(value)`

这是这样做的方法吗？我应该尝试使用`try/except`积木吗？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-10-16T00:43:35.667

使用[`dict.setdefault()`](http://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
dict.setdefault(key,[]).append(value) 
```

**帮助（dict.setdefault）**：

```
 setdefault(...)
        D.setdefault(k[,d]) -> D.get(k,d), also set D[k]=d if k not in D 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-10-16T01:19:57.823

以下是执行此操作的各种方法，因此您可以比较它的外观并选择您喜欢的。我以我认为最*“pythonic”*的方式对它们进行了排序，并评论了乍一看可能并不明显的利弊：

**使用`collections.defaultdict`：**

```
import collections
dict_x = collections.defaultdict(list)

...

dict_x[key].append(value) 
```

优点：可能是最好的性能。缺点：在 Python 2.4.x 中不可用。

**使用`dict().setdefault()`：**

```
dict_x = {}

...

dict_x.setdefault(key, []).append(value) 
```

缺点：未使用`list()`的 s 创建效率低。

**使用`try ... except`：**

```
dict_x = {}

...

try:
    values = dict_x[key]
except KeyError:
    values = dict_x[key] = []
values.append(value) 
```

或者：

```
try:
    dict_x[key].append(value)
except KeyError:
    dict_x[key] = [value] 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-10-16T00:47:24.243

您可以为此使用[defaultdict 。](http://docs.python.org/library/collections.html#collections.defaultdict)

```
from collections import defaultdict
d = defaultdict(list)
d['key'].append('mykey') 
```

这比`setdefault`您最终不会创建您最终不会使用的新列表更有效。每次调用`setdefault`都会创建一个新列表，即使该项目已经存在于字典中。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-16T00:45:42.793

您可以[在](http://docs.python.org/library/collections.html#collections.defaultdict).`collections`

来自文档的示例：

```
s = [('yellow', 1), ('blue', 2), ('yellow', 3), ('blue', 4), ('red', 1)]
d = defaultdict(list)
for k, v in s:
    d[k].append(v) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-07-02T18:12:39.780

```
dictionary['key'] = dictionary.get('key', []) + list_to_append 
```