# StackOverflow 问答 13157000-13157999

# grails - 测试应用期间服务中服务注入的 NullPointerException

> ID：13157001
> 
> 赞同：1
> 
> 时间：2012-10-31T11:35:52.103
> 
> 标签：grails, groovy

最近遇到了一个奇怪的场景，服务中的服务的依赖注入，在运行*test-app时抛出 NPE*

service-in-service 注入的原因是使 GORM/criteriaBuilder 尽可能 DRY。以下是我的两项服务。

实现了以下类*SearchService1.groovy*以提供搜索功能。

```
class SearchService1{
def search = { ...//Calls to local closures to build a dynamic criteria }
...
} 
```

*SearchService2.groovy*类使用*SearchService1*类的*搜索*闭包

 *```
class SearchService2{
     def searchService1
     ...
     def searchEntity(){
        searchService1.search()
      }
   } 
```

现在，上述代码在*运行应用程序*模式下运行良好。但是对于为 SearchService2 编写的集成测试，会抛出 NPE，如下所示：

```
Cannot invoke method searchEntity() on null object
java.lang.NullPointerException: Cannot invoke method search() on null object
at com.myapp.service.SearchService2.searchEntity(SearchService2.groovy:326)
at com.myapp.service.SearchService2$searchEntity$0.callCurrent(Unknown Source)
at com.myapp.service.SearchService2.searchEntity(SearchService2.groovy:295)
at com.myapp.service.SearchService2$searchEntity.call(Unknown Source)
at com.myapp.integration.SearchService2Tests.testWhenSearch(SearchService2Tests.groovy:125) 
```

我在这里错过了一些非常基本的东西吗？任何想法都非常感谢。许多Thnx :)

来自 TestClass 的片段：

```
class SearchService2Tests extends GroovyTestCase{
 ...
 def searchService2
 ...
 void testWhenSearch(){
    def resultSet = searchService2.searchEntity() //This is the line throwing NPE
    ...
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:59:27.007

哇 ！通过这种解决方法摆脱了这个愚蠢的错误。

对于 TestClass，将 searchService1 注入到 searchService2 对象中，如下所示：

```
def searchService2
def searchService2.searchService1 = new SearchService1() 
```

但是来吧！这是正确的方法吗？谁能顺便解释一下上述错误，为什么在运行测试应用程序时没有实例化服务中服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:41:59.057

尝试这个：

```
class SearchService2Tests extends GroovyTestCase {
    ...
    def searchService1
    def searchService2
    ...
    void testWhenSearch(){
        def resultSet = searchService2.searchEntity()
        ...
    }
} 
```

但使用标准的 Grails 服务命名约定和放置*

# java - 使用 Gson 访问 JsonString

> ID：13157003
> 
> 赞同：0
> 
> 时间：2012-10-31T11:36:00.727
> 
> 标签：java, android, gson

我收到这样的回复

```
String result = responseEntity.getBody();

{
    "FailureReason": "",
    "State": "True",
    "UserId": 1038,
    "Specified": false,
    "Name": "Java"
} 
```

我将如何访问这些 JsonString。我`Gson`用来形成`JsonString`.`I am JS Guy, when i try to access result.Name [It throws me error]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:38:51.407

您可以像这样使用 Android 的[JSONObject](http://developer.android.com/reference/org/json/package-summary.html)：

```
JSONObject jsonResult = new JSONObject(result);
String name = jsonResult.getString("Name");
int id = jsonResult.getInt("UserId"); 
```

检查[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:41:12.260

一个好的方法是使用 POJO。制作一个`POJO`代表响应的。采用，

```
gson.fromJson(responseStr, responsePojoType); 
```

这将返回您的 POJO 类型的对象。然后使用 POJO 对象的`getter`方法来获取所需的任何值。

# c# - ő 在 C# 中的 RTF 转换后变为 õ。为什么？

> ID：13157006
> 
> 赞同：0
> 
> 时间：2012-10-31T11:36:08.200
> 
> 标签：c#, character-encoding, rtf

我有一个将字符串转换为 RTF 字符串的方法。

为此，我使用`RichTextBox`.NET 提供的 wich 它在这里描述的方式：
[如何在 C# 中将字符串转换为 RTF？](https://stackoverflow.com/questions/4795709/how-to-convert-a-string-to-rtf-in-c)

当我输入`ő`它返回`{\rtf1 {'f5\f1}}`。但这似乎是`õ`因为当我将它放入 .rtf 文件时，我得到了那个符号。

为什么会这样？我能做些什么来解决这个问题？

编辑：

这是我使用它的整个方法：

```
private static string ConvertToRtf(string text) {
        System.Windows.Forms.RichTextBox richTextBox = new System.Windows.Forms.RichTextBox();
        richTextBox.Text = text;
        int offset = richTextBox.Rtf.IndexOf(@"\f0\fs17") + 8;
        int length = richTextBox.Rtf.LastIndexOf(@"\par") - offset;
        string result = richTextBox.Rtf.Substring(offset, length).Substring(1);
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:42:17.550

> rtfBox 的整个 RTF 字符串看起来像这样（等等）

这很好，并且显示正确。但是，您的代码片段没有意义。您不能只取一小部分 RTF 并希望它正确显示。尤其`\f0`重要的是，选择字符集。在这种情况下，字符集 238，即东欧语言的字符集。请注意 RTF 如何包含`\fonttbl`分配 f0 的命令。

因此，如果您复制该 RTF 片段并在其他地方使用它，例如在其他**未**使用相同`\fonttbl`命令初始化的 RTB 中，那么您将从错误的字符集中获得一个字符。就像 charset 0 一样，它确实会显示`õ`。

好吧，现在你知道为什么要发明 Unicode 了；）

解决方法是仅从 RichTextBox.Text 属性复制文本。那是统一码。

# python - Peewee ORM - 在多对多关系上注释计数，即使计数为 0

> ID：13157008
> 
> 赞同：2
> 
> 时间：2012-10-31T11:36:16.500
> 
> 标签：python, sql, orm, peewee

让我们尝试使用用户和推文来解释我的问题。

这些是我的模型（来自 Peewee 文档）：

```
class User(BaseModel):
    username = CharField()

class Tweet(BaseModel):
    user = ForeignKeyField(User, related_name='tweets')
    message = TextField() 
```

这是我的查询：

```
User.select().annotate(Tweet).order_by(fn.Count(Tweet.id).desc()) 
```

我有一些用户还没有发推文，但无论如何我都希望通过我的查询来获取他们。不幸的是，此查询不适用于没有推文的用户。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:48:46.617

好的，我解决了。

如果您有我的问题，只需使用`OUTER JOIN`.

这是我的新查询：

```
User.select(User, fn.Count(Tweet.id).alias('count')) \
    .join(Tweet, JOIN_LEFT_OUTER).group_by(User) 
```

# msbuild - 在代码库中包含 Nemerle 编译器

> ID：13157013
> 
> 赞同：3
> 
> 时间：2012-10-31T11:36:46.003
> 
> 标签：msbuild, nemerle

我正在尝试将 Nemerle 编译器包含到我的源代码存储库中，以便在构建服务器中不安装 Nemerle 的情况下构建它。目前我的源代码目录如下所示：

```
- [MySolutionFolder]
--- [.build]
------ [Nemerle]
--------- [net-4.0]
------------ ncc.exe
------------ ncc32.dll
------------ Nemerle.dll
------------ Nemerle.MSBuild.targets
------------ { all other Nemerle requirements }
--- [MyNemerleProjectFolder]
------ MyNemerleProject.nproj
------ { various .n files }
--- MySolution.sln
--- build.bat 
```

build.bat 文件是一个简单的脚本，它在 .sln 文件上调用 MSBuild。

在我的 .nproj 文件中，我更改了行

`<Nemerle Condition=" '$(Nemerle)' == '' ">$(NemerleBinPathRoot)\$(NemerleVersion)</Nemerle>`

至：

`<Nemerle Condition=" '$(Nemerle)' == '' ">$(SolutionDir).build\Nemerle\$(NemerleVersion)</Nemerle>`

进行此更改后，我可以从命令行脚本成功构建，但是我无法在 Visual Studio 中打开解决方案。打开解决方案时，VS抱怨它找不到`MySolutionFolder\MyNemerleProjectFolder\.build\Nemerle\net-4.0\Nemerle.MSBuild.targets`

*为什么 Visual Studio 在项目文件夹*而不是*解决方案文件夹*下寻找 .build 目录？有解决方法吗？

如果我将其更改为：

`<Nemerle Condition=" '$(Nemerle)' == '' >$(ProjectDir)..\.build\Nemerle\$(NemerleVersion)</Nemerle>`

然后解决方案将在 Visual Studio 中打开，但构建失败 - 命令行构建也失败..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:36:03.863

尝试使用 $(MSBuildProjectDirectory) 而不是 $(ProjectDir)。例如：

```
<Nemerle Condition=" '$(Bootstrapping)' == 'true' ">$(MSBuildProjectDirectory)\..\Boot\$(NemerleVersion)</Nemerle>
<Nemerle Condition=" '$(Bootstrapping)' == 'false' ">$(NemerleBinPathRoot)\$(NemerleVersion)</Nemerle> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:57:51.520

听起来像是 Visual Studio 中的错误。

您可以做的是指定一个预构建事件，该事件将[创建一个](http://www.howtogeek.com/howto/16226/complete-guide-to-symbolic-links-symlinks-on-windows-or-linux/)从`$(ProjectDir).build`到的符号链接`$(SolutionDir).build`。

哈克什，是的。

# blogger - 我想增加博主显示的帖子数量？

> ID：13157036
> 
> 赞同：0
> 
> 时间：2012-10-31T11:38:03.007
> 
> 标签：blogger

当我转到下一页然后显示最多 8 个帖子时，我希望它显示 28 个帖子。但我做不到。我已经尝试替换此代码

```

    数据：标签.url

```

到这个代码

```
    数据：label.url + "?max-results=28"

```

但它不起作用。它的显示像这样[http://www.dewdropzone.blogspot.com/search?updated-max=2012-10-25T08%3A19%3A00%2B06%3A00&max-results=8](http://www.dewdropzone.blogspot.com/search?updated-max=2012-10-25T08%3A19%3A00%2B06%3A00&max-results=8) 我也尝试从博客设置，但它也不起作用。谁能告诉我我该怎么做？

[我的网站](http://www.dewdropzone.blogspot.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:12:26.200

首先，您必须在 Edit HTML 中找到此代码：

```
var pageCount=8; 
```

改变这个：

```
var pageCount=28; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:02:46.843

好吧，既然您使用的是博主/blogspot，您可以简单地访问`settings--> posts/comments`并编辑号码`Show at most`

# qt - RuntimeError: startApplication() 在使用 squish 测试 Qt 应用程序时失败

> ID：13157044
> 
> 赞同：2
> 
> 时间：2012-10-31T11:38:40.557
> 
> 标签：qt, squish

我正在用于`Squish 4.2.2`测试`GUI`在`Qt version 4.7`. `linux`它`AUT`是使用静态链接的 Qt 库构建的。由于 squish 不允许记录静态链接的 Qt 库，因此我计划手动创建测试用例。但是，挤压测试用例失败并出现以下错误

```
Error Script Error Oct 31, 2012
Detail RuntimeError: startApplication() failed 
```

测试用例包含一行来启动 AUT。服务器日志仅显示以下警告

```
AUT does not appear to be dynamically linked against Qt, hooking might fail. 
```

在测试静态链接到 Qt 库的 Qt 应用程序时，是否有其他人遇到过类似的问题？请提供有关此问题的指示。

问候 adj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:08:40.980

我之前遇到过这个错误，从中吸取的教训之一是您的应用程序正在使用的 Qt 版本

> QtCore 和 QtGui

必须与编译的 Qt squish 版本兼容。如果不是，您会收到此错误，因为 squish 无法挂接到应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T21:57:01.867

您需要正确设置以下内容： 1\. Squish 的版本必须与用于开发应用程序的 Qt 版本兼容。通常两个版本必须相同才能兼容。2\. 设置 Squish 时，将其指向正确的 QtCore 路径。3\. 在 IDE 中的 Edit -> Server Settings -> Manage AUT 中添加应用程序。

# javascript - 如何在 knockoutjs 中绑定嵌套选项

> ID：13157046
> 
> 赞同：1
> 
> 时间：2012-10-31T11:38:47.013
> 
> 标签：javascript, data-binding, knockout.js, knockout-2.0

我有一个基于淘汰赛的专辑编辑界面

相册的对象有这样的结构：

*   专辑
    *   标题
    *   日期
    *   艺术家（数组）
        *   ID
        *   标题
    *   流派（数组）
        *   ID
        *   标题
    *   轨道（阵列）
        *   ID
        *   标题
        *   艺术家（数组）
            *   ID
            *   标题
        *   流派（数组）
            *   ID
            *   标题

**我创建了一个[小提琴](http://jsfiddle.net/matmuchrapna/Qm3Ur/9/)来展示我的工作和**它的问题。

我认为问题出在`tracks: ko.observableArray(album.tracks)`：

```
var initialData = […];

var AlbumsModel = function(album) {
    var self = this;
    self.albums = ko.observableArray(ko.utils.arrayMap(album, function(album) {
        return {
            title: album.title,
            image: album.image,
            artists: ko.observableArray(album.artists),
            date: album.date,
            genres: ko.observableArray(album.genres),
            composers: ko.observableArray(album.composers),
            lyricists: ko.observableArray(album.lyricists),
            tracks: ko.observableArray(album.tracks)
        }
    }));
            self.lastSavedJson = ko.observable('')
    self.save = function(formElement) {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.albums), null, 2));
    };
};

ko.applyBindings(new AlbumsModel (initialData)); 
```

什么**好**：

*   专辑*标题*装订
*   专辑*流派*绑定
*   专辑*艺术家*绑定

出问题**了**：
绑定=双向绑定（例如在编辑歌曲名称时，曲目列表未更新）

*   曲目的*标题*绑定
*   Track 的*流派*绑定
*   Track 的*艺术家*绑定

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:46:10.050

你是对的：你正在做的方式，轨道属性（id，标题等）没有被创建为可观察的，而只是作为普通的 javascript 原语。

我认为你有两个选择：

1.  考虑使用 ko 映射插件，它会将所有内容（模型中所有对象的所有属性）创建为可观察的（如果是这样的话）。
2.  将轨道属性的创建包装在一个函数中，以使每个轨道（及其属性）可观察。

如果您选择第一个，请查看[映射插件文档](http://knockoutjs.com/documentation/plugins-mapping.html)。

如果您选择第二个，您可以像这样更改轨道属性的创建：

```
tracks: ko.observableArray(ko.utils.arrayMap(album.tracks,
    function(track) {
        return {
            id: track.id,
            title: ko.observable(track.title),
            artists: track.artists,
            date: track.date,
            genres: track.genres,
            composers: track.composers,
            lyricists: track.lyricists,
            lyrics: track.lyrics
        }
    })) 
```

对于第二个版本，我稍微[修改了你的小提琴来测试它。](http://jsfiddle.net/eJMLz/)

# .htaccess - 我的 .htaccess 漂亮的 url 在 localhost 中不起作用（带有 xampp 的本地机器）

> ID：13157048
> 
> 赞同：0
> 
> 时间：2012-10-31T11:38:51.250
> 
> 标签：.htaccess, url-rewriting

我需要重写这个 url： `http://localhost/blog/post.php?id=48` 在 `http://localhost/blog/post/48` 我的 xampp 的 localhost 中。我已经创建了 .htaccess 文件并编写了下面的代码来工作。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^post/([0-9]+)/?$ post.php?id=$1 [NC,L]
</IfModule> 
```

我已经尝试过重定向和所有其他的东西。一切正常，但仅我的重写规则不起作用。我已经搜索并尝试了所有选项，但我无法成功。请任何人帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:43:31.167

这`^post`是你的问题，这意味着 post 是你路径的第一部分，它不是 -`blog`是。你有没有试过`^blog/post...`：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^blog/post/([0-9]+)/?$ blog/post.php?id=$1 [NC,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:09:51.727

最后它使用以下代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/ # This is the thing which made me struck with this
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^post/([0-9]+)/?$ post.php?id=$1 [NC,QSA]
</IfModule> 
```

# database-design - 制作简单的电子邮件/消息传递数据库架构

> ID：13157049
> 
> 赞同：5
> 
> 时间：2012-10-31T11:38:53.530
> 
> 标签：database-design, database-schema

我正在创建一个小型邮件/消息发送数据库模式。它不是真正的邮件系统，而是一个组织的消息传递门户，具有以下用例：

1.  员工可以向所有员工广播消息
2.  员工可以互相发送消息
3.  员工可以回复收到的消息
4.  员工可以通过在收件箱中的“时间戳”列中查看他/她已回复的邮件来查看他/她已回复的邮件（即收件箱中必须有一个“已回复”列，该列应显示回复该邮件时的时间戳，它如果没有，则应为空）
5.  当他打开特定消息时，他会看到消息的线程视图，最新消息位于顶部。

**我的问题** 我如何跟踪特定消息是否是对任何消息的回复，在电子邮件中，我相信它嵌入在标题中。我是否保留一个“repliedto”id 字段，该字段指向另一条作为回复的消息？

如何创建线程或链？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T12:33:01.713

在数据库表中保留一个指向原始电子邮件的字段。每封电子邮件只能有一个前任（或“父亲”），而任何电子邮件都可以没有或有多个继任者（或“儿子”）。因此，最好保留前身的记录。

这也是您创建线程或链的方式：线程中的第一条消息的“父亲”字段将等于 0，但后面的消息将在该字段中包含其他值。如果您维护一个名为“线程”或“对话”的字段，这也将有所帮助，从而可以轻松了解哪些消息与哪些线程相关联。

有趣的部分不一定是您如何将链接存储在链中，而是您如何遍历链。

以下是一个简单的数据模式

```
USERS
id - autoinc
name - varchar

THREADS
id - autoinc
name - varchar

STATUSES
id - autoinc
name - varchar

MESSAGES
msg_id - autoinc
from_id (fk to users table) - int
datesent - date
thread (fk to threads table) - int
father (pointer to previous message in this thread) - int
text - varchar

RECIPIENTS
id - autoinc
msg_id (fk to messages table) - int
to_id (fk to users table) - int
status (fk to statuses table) - int 
dateread - date 
```

由于一条消息可以发送给许多人，因此在 MESSAGE 和 RECIPIENTS 之间存在一对多的关系。每个收件人将在不同的时间阅读消息，并且将具有不同的状态（未读、已读、已删除、已删除未读等）。

# html - 隐藏在 div 标签中的下拉菜单

> ID：13157056
> 
> 赞同：0
> 
> 时间：2012-10-31T11:38:59.300
> 
> 标签：html, css, twitter-bootstrap

我有这个隐藏在父 div 中的 twitter 引导下拉菜单，如下所示：

![在此处输入图像描述](../Images/774db9c82a68cf72a741829925a3b48b.png)

**这是我的css和html：**

```
<div class="profile-gallery-image-container">
    <img src="#" />
      <div class="image-options">
        <div class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#"><b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">test</a></li>
           </ul>
        </div>
    </div>
</div> 
```

**CSS**

```
.profile-gallery-image-container {
    max-width: 105px;
    max-height: 80px;
    margin-bottom: 0px;
    display: inline-block;
    border: 2px solid rgba(140,140,140,1);
    overflow: visible;
}

    .image-options { 
    float: right;
    display: inline;
    position: absolute;
    border: 2px solid rgba(255,128,64,1);
    width: 10px;
    height: 10px;
    top: 0px;
    right: 0px;
} 
```

twitter-bootstrap 下拉菜单的 z-index 默认设置为 1000，我尝试使用它，但它不想脱离父容器。我也尝试过溢出：可见样式但没有成功。我应该如何让它在盒子外面可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:52:17.443

嗨，现在**定义**你`position:relative;` **的** `.profile-gallery-image-container` **班级**

```
.profile-gallery-image-container {
position:relative;} 
```

***[现场演示](http://jsfiddle.net/rohitazad/DhFFC/4/)***

## ---------

***[更新的演示](http://jsfiddle.net/rohitazad/DhFFC/8/)***

# android - 无法在 TextView 的 onDraw 中画线

> ID：13157057
> 
> 赞同：0
> 
> 时间：2012-10-31T11:39:01.860
> 
> 标签：android, textview

我无法在自定义 TextView 类中绘制任何内容。

抱歉，这不完全正确，它在 Eclair 中有效，但在蜂窝中无效！！！

肯定会调用该`onDraw()`方法，但没有绘制任何内容（在蜂窝中）。

这是我的 onDraw 方法。

```
super.onDraw(canvas):
this.bluePaint.setColor(getResources().getColor(R.color.actionBlue));
float pix = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 6, getResources().getDisplayMetrics());
this.bluePaint.setStrokeWidth(pix);
canvas.drawLine(0,0,this.getWidth(),20,this.bluePaint); 
```

在 Eclair 和 Honeycomb 中，onDraw 的处理方式是否不同？我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:52:48.470

我没能解决这个问题。

我最终所做的是使用扩展的对象创建自己的自定义文本视图，`View`并在其中手动绘制文本。

我不确定为什么`TextView`不允许画线，但是嘿，这只是解决永无止境的问题的另一种解决方案。

# mysql - Adding mySql to eclipse project with maven tomcat plugin

> ID：13157059
> 
> 赞同：0
> 
> 时间：2012-10-31T11:39:12.913
> 
> 标签：mysql, spring, maven, maven-tomcat-plugin, maven-eclipse-plugin

I have a spring mvc project downloaded from the web and fully working. I'm using maven and maven tomcat plugin to manage dependencies and to run the webapp in the built-in tomcat. I'm trying to add mySql support in my project. Since i'm new to maven and maven tomcat plugin, I don't know hot to do this. Before i tried to add mysql, all was working and i was able to launch my web app simply executing a tomcat:run maven goal.

For now, when i execute tomcat:run i get a

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

Here is what i've already done after some reading around the web: I added dependencies for mysql driver (and Hibernate annotations too since i want to use it) in my pom.xml, and specified the dependency for tomcat plugin:

```
<dependency>
<groupId>mysql</groupId>
<artifactId>mysql-connector-java</artifactId>
<version>5.1.9</version> 
```

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>tomcat-maven-plugin</artifactId>
<version>1.1</version>
<configuration>
        <mode>context</mode>
    </configuration>
<dependencies>      
    <dependency>
        <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.9</version>
    </dependency>
</dependencies>
</plugin> 
```

You can also notice a tag to specify to use a context.xml file. But I don't know where to put this file. I readed it should be generated automatically in tomcat/conf, but it's not present. So i added it manually with this content:

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
     <Resource name="jdbc/mkyongdb" auth="Container" type="javax.sql.DataSource"
           maxActive="50" maxIdle="30" maxWait="10000"
           username="root" password="password" 
           driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/mkyongdb"/>

</Context> 
```

Then in web.xml, located in tomcat/conf i added:

```
<resource-ref>
<description>MySQL Datasource example</description>
<res-ref-name>jdbc/mkyongdb</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

I placed the same content in src/main/webapp/META-INF/context.xml and in src/main/webapp/WEB-INF/web.xml

With all these configuration, the error mentioned above doesn't appears. But if i try to use hibernate adding

```
<bean id="dataSource" 
     class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="com.mysql.jdbc.Driver" />
<property name="url" value="jdbc:mysql://localhost:3306/mkyongdb" />
<property name="username" value="root" />
<property name="password" value="password" />
</bean>
<bean
    id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" >
    <property name="dataSource" >
        <ref bean="dataSource" />
    </property>
    <property name="hibernateProperties" >
        <props>
            <prop key="hibernate.hbm2ddl.auto" >create-drop</prop>
            <prop key="hibernate.dialect" >org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql" >true</prop>
        </props>
    </property>
    <property name="annotatedClasses" >
        <list>
            <value>org.mose.grouporganizer.entity.AccelerometerFeatures</value>
        </list>
    </property>
</bean> 
```

then i get the comunication link failure. What i'm missing? If it's needed i can add the full stack trace.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:53:27.730

首先升级到现在在 Apache 上的最后一个 tomcat maven 插件。

见[http://tomcat.apache.org/maven-plugin-2.0/](http://tomcat.apache.org/maven-plugin-2.0/)

关于上下文使用

```
 <plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <configuration>
      <contextFile>path to your context file</contextFile>
    </configuration>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:53:18.870

如果您的应用程序工作正常并且您想使用 MySQL 作为数据库，那么您应该在您的应用程序中添加 MySQL 驱动程序`pom.xml`并更改 Hibernate 配置。那它。

# wpf - Bind ObservableCollection to a Collection

> ID：13157060
> 
> 赞同：0
> 
> 时间：2012-10-31T11:39:16.743
> 
> 标签：wpf, mvvm, observablecollection

I made a solution wich contains 4 projects, UI, BL, DAL and BO.

*   UI : usercontrols, windows.
*   BL : some logics, and a static class.
*   Dal : a static class repository.
*   BO : my objects ( Person, ...)

The first 3 projects have reference to BO project, and UI refer to BL and BL to DAL. In BL project I have a **Collection**, and in my UI (in a ViewModel) I have an **ObservableCollection**, the problem is the binding between these 2 Collections, for example, when I want to add a person, I have to do like that :

```
BL.Persons.Add( new Person() { Name = "Paul"});
this.Persons = new ObservableCollection<Person>(BL.Persons); 
```

it works, but I'm not sure if it's the best way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:06:24.117

`ObservableCollection`你不应该每次都重新创建你的。在这种情况下没有意义，因为`ObservableCollection`应该通知观察者有关更改。当然，这是因为发生了`Persons`变化而起作用，但是对于较大的集合来说效率非常低，因为它会表现得好像每个对象都发生了变化，但实际上只添加了一个新对象。

这对你更好：

```
var person = new Person() { Name = "Paul"};
BL.Persons.Add(person);
this.Persons.Add(person); 
```

顺便说一句，我不喜欢这种模型/视图模型混合，如果你只将视图模型暴露给你的视图会更好*，*更*干净*，但这是一个不同的问题。

# oracle - Convert oracle to JPA createQuery

> ID：13157065
> 
> 赞同：1
> 
> 时间：2012-10-31T11:39:24.410
> 
> 标签：oracle, jpa

```
SELECT * 
FROM 
  CUSTOMER_MASTER t0, 
  (SELECT t1.COMMNUMBER, t1.COMMTYPE FROM FOLLOWUP_GUIDES t1 WHERE (t1.STAGE_ID = '5')) t2
WHERE (t0.FOLL_UP_NUM = t2.COMMNUMBER 
and T0.FOLL_UP_TYPE=t2.COMMTYPE AND (t0.COMPANY_ID = 'C001')) 
```

In the above oracle query i have to got the follupnum and folluptype in the combination commnumber and commtype. But is it possible to write this query in JPA?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:31:58.173

JPA 完全支持 SQL 查询。您可以使用 createNativeQuery(sql) 或 @NamedNativeQuery

一旦点击此[链接](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:08:23.030

JPA 完全支持 SQL 查询。您可以使用 createNativeQuery(sql) 或 @NamedNativeQuery。

您可能还可以根据 JPQL 改写您的查询。

如果您使用的是 EclipseLink，它确实支持 JPQL 的 FROM 子句中的子选择，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:52:45.303

假设您在 CUSTOMER_MASTER 和 FOLLOWUP_GUIDES 之间有外键

即假设

```
CUSTOMER_MASTER.FOLL_UP_NUM    is FK to   FOLLOWUP_GUIDES.COMMNUMBER 
CUSTOMER_MASTER.FOLL_UP_TYPE   is FK to   FOLLOWUP_GUIDES.COMMTYPE 
```

然后你的查询

```
SELECT * 
FROM 
  CUSTOMER_MASTER t0, 
  (SELECT t1.COMMNUMBER, t1.COMMTYPE FROM FOLLOWUP_GUIDES t1 
   WHERE (t1.STAGE_ID = '5')) t2
WHERE (t0.FOLL_UP_NUM = t2.COMMNUMBER 
and T0.FOLL_UP_TYPE=t2.COMMTYPE AND (t0.COMPANY_ID = 'C001')) 
```

相当于

```
SELECT t0.*
FROM CUSTOMER_MASTER t0 JOIN FOLLOWUP_GUIDES t1
WHERE t0.COMPANY_ID = 'C001'
AND   t1.STAGE_ID = '5' 
```

这可以在 JPA 中很容易地完成，并且看起来与此 SQL 非常相似（仅使用对象名称和字段名称而不是表名称和属性名称）。

JPA JPQL 查询将如下所示：

```
SELECT t0
FROM CustomerMaster t0 JOIN FollowupGuides t1
WHERE t0.companyId = "C001"
AND   t1.stageId = "5" 
```

也可以使用 JPA 子查询：

```
SELECT t0
FROM CustomerMaster t0 
WHERE t0.companyId = "C001"
AND   EXISTS (SELECT 1
              FROM FollowupGuides t1
              WHERE t1.commnumber = t0.follUpNum
              AND   t1.commtype = t0.FollUpType
              AND   t1.stageId = "5") 
```

=B)

# windows - make 未被识别为内部或外部命令 - Qt SDK - Windows

> ID：13157068
> 
> 赞同：10
> 
> 时间：2012-10-31T11:39:33.287
> 
> 标签：windows, qt, makefile, mingw

我`Qt`通过安装`Qt-SDK 2010.01`。

现在如何`make`在`Qt`终端上运行？

**我已经设置了系统路径：**

![在此处输入图像描述](../Images/6b7bb8055cb6835fd58913d121c38208.png)

**Qt 路径命令提示符：**

![在此处输入图像描述](../Images/636d751c0564db89c768adc63ca09437.png)

请帮忙。:( :(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T12:02:23.023

您应该运行`mingw32-make`而不是`make`.

如果您希望能够通过`make`简单的方式调用它，您可能需要定义一个运行`mingw32-make`. 虽然我对 Windows 中的 CMD 不是很熟悉，但我认为这应该可以通过以下命令实现：

```
set make=mingw32-make 
```

但是，我认为这不会是永久性的。您可能想尝试添加一个批处理文件`make.bat`，在`...\mingw\bin`其中运行`mingw32-make`以实现此目的。但是，此批处理文件需要将所有附加参数“转发”到`mingw32-make`. 也许有更好的方法来创建永久别名，我不知道。

也许您还想尝试[使用 DOSKEY 实用程序](http://devblog.point2.com/2010/05/14/setup-persistent-aliases-macros-in-windows-command-prompt-cmd-exe-using-doskey/)来创建永久别名。

# raphael - 如何使用按钮单击事件显示/隐藏 raphael 对象

> ID：13157070
> 
> 赞同：2
> 
> 时间：2012-10-31T11:39:41.593
> 
> 标签：raphael

# 我想用按钮点击事件显示/隐藏我的 raphael svg 图

请知道如何做到这一点的人。请帮我

我尝试这样做，但它不起作用。

```
var p = Raphael(900,70,200,200);

p.circle(20,20,20); 
    $n("#shide").click(function(){
    p.hide();
    }); 
```

请知道如何做到这一点的人。请帮我。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:39:46.767

像这样：

```
var paper = Raphael(10, 50, 320, 200);

paper.circle(10, 10, 10, 10)
     .attr({fill: "#000"})
     .click(function () {
        this.hide();
     }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T09:02:55.127

最好使用绘图函数的返回值。

```
var element1 = p.circle(20,20,20);
var element2 = p.circle(99,99,20);
$n("#shide").click(function(){
    element1.hide();
    // element2.hide();
}); 
```

我也有一些关于这类问题的高级技能。当您使用 ajax 响应数据绘制圆圈或其他东西时，这些技能将非常有用。

```
function drawCircle() {
    var elementObj = {};
    $.ajax({url: '', dataType: 'json', method: 'post', data: yourData, success: function (data) {
        elementObj['circle1'] = p.circle(20,20,20);
        elementObj['circle2'] = p.circle(99,99,20);
    });
    return elementObj;
} 
```

然后你像这样调用这个函数：

```
var ele = drawCircle();
var hoverInCb = function () {
    ele['circle1'] && ele['circle1'].show();
    ele['circle2'] && ele['circle2'].show();
};
var hoverOutCb = function () {
    ele['circle1'] && ele['circle1'].hide();
    ele['circle2'] && ele['circle2'].hide();
}; 
```

这些代码将起作用，因为返回的 elementObj 是对象的“链接”。ajax请求取到数据后，elementObj会被数据填充，外面的ele变量也会得到新的数据。

# python - How to fix" xrange() arg 3 must not be zero" error in python using parallel programming?

> ID：13157071
> 
> 赞同：-2
> 
> 时间：2012-10-31T11:39:43.200
> 
> 标签：python, parallel-processing, search-engine, pool, xrange

```
import time
from multiprocessing import Process, Pool
import sys, os, inspect
import urllib
import re
index ={}
graph={}
# Common words that we don't want to be part of the index
g=['is','a','the','ga','all','to','under']

def rm_tag(data):
    p = re.compile(r'<.*?>')
    return p.sub('', data)

def get_page(url):
    try:
        f = urllib.urlopen(url)
        page = f.read()
        f.close()
        return page
    except:
        return ""

def union(a,b):
    for e in b:
        if e not in a:
            a.append(e)

def get_next_url(page):
    start_link=page.find("<a href=")
    if(start_link==-1):
        return None,0
    start_quote=page.find('"',start_link)
    end_quote=page.find('"',start_quote+1)
    url=page[start_quote+1:end_quote]
    return url,end_quote

def get_all_links(page):
    links=[]
    while True:
        url,endpos=get_next_url(page)
        page=page[endpos:]
        if url:
            links.append(url)
        else:
            break
    print "get_all_links: %i links found\n" % len(links)
    graph[page]=[links]
    return graph[page]

def add_to_index(index,url,keyword):
        if keyword in index:
                if url not in index[keyword]:
                        index[keyword].append(url)
                return

        global g
        if keyword not in g:
          index[keyword]=[url]

def add_page_to_index(index, url, content):
    words = content.split()
    for word in words:
        add_to_index(index, url,word)

def compute_ranks(graph):
    d=0.8
    numloops=20
    ranks={}
    npages=len(graph)
    for page in graph:
        ranks[page]=1.0/npages
    for i in range(0,numloops):
        newranks={}
        for page in graph:
            newrank=(1-d)/npages
            for node in graph:
                if page in graph[node]:
                    newrank=newrank + d * (ranks[node]/len(graph[node]))
            newranks[page]=newrank
        ranks=newranks
    return ranks
def Look_up(index, keyword):
    if keyword in index:
        return index[keyword]
    else:
        return None

def Look_up_new(index,ranks,keyword):
    pages=Look_up(index,keyword)
    if pages:
        for i in pages:
            print  '\n Results with Page Ranks :\n'+i+" --> "+str(ranks[i])
    else:
        print "Keyword does not exist"

def lucky_search(index, ranks, keyword):
    try:
        pages = Look_up(index, keyword)
        if pages:
            bestpage = pages[0]
            for candidate in pages:
                if ranks[candidate] > ranks[bestpage]:
                    bestpage = candidate
            return (bestpage, ranks[bestpage], pages)
    except:
        print "Keyword does not exist",sys.exc_info()[0]
        return None

def print_profile(index, graph):
    print "*****************"
    print "Length of index", len(index)
    print "Length of graph", len(graph)

    i = 0
    for e in index:
        i = i + 1
        print i, ":", e
        if i > 20:
            break
    print "*****************"

def print_profile_top (index, ranks):
    max = 0
    for e in index:
        link_count = len(index[e])
        if link_count > max:
            max = link_count   # updating the highest no of links we have found so far
            print e, link_count, lucky_search(index,ranks,e)[1]
    print "*********************"

#print "result for :", search_term, ": ", lucky_search(index,ranks,search_term)
#print lucky_search(index,ranks,'limited')

def chunks(l, n):
    for i in xrange(0,len(l),n):
        yield l[i:i+n] # instantly makes chunks a "generator function" instead of a normal function

if __name__ == '__main__':
    start = time.clock()    
    c = 3
    seed= "http://www.python.org"
    keyword = "CGI"
    max_page = 20
    tocrawl=[seed]
    crawled =[]
    print '\nCrawling using ' + seed + " as seed_page and search_term: " + keyword
    pool = Pool (c)
    while tocrawl:
        page=tocrawl.pop()
        if page not in crawled:
            max_page -= 1 
            if max_page<=0:
                break
            content=get_page(page)
            text=content
            partitioned_text= list(chunks(text, len(text) / c))
            links=pool.map(get_all_links, partitioned_text)
            #links=get_all_links(content)
            #content=rm_tag(content)
            add_page_to_index(index,page,content)
            for e in links:
                if e not in tocrawl:
                    tocrawl.append(e)
            #union(tocrawl,graph[page])
            crawled.append(page)

    #pool.terminate()
    ranks=compute_ranks(graph)
    print_profile(index, graph)
    print_profile_top(index, ranks)
    print "result for :", keyword, ": ", lucky_search(index,ranks,keyword)
    t=time.clock() - start
    print "Processing Time :",t
#print crawled,index,graph """ 
```

while running the code the following error shows. please help me to fix.

```
Traceback (most recent call last):
  File "C:\Documents and Settings\priyanka.14790\My Documents\Dropbox\Udacity\parallel.py", line 250, in <module>
    partitioned_text= list(chunks(text, len(text) / c))
  File "C:\Documents and Settings\priyanka.14790\My Documents\Dropbox\Udacity\parallel.py", line 229, in chunks
    for i in xrange(0,len(l),n):
ValueError: xrange() arg 3 must not be zero 
```

* * *

Here is the code for normal search engine without any error

```
 import sys, os, inspect
    import urllib
    import re
    max_page=5

    # Common words that we don't want to be part of the index
    g=['is','a','the','ga','all','to','under']

    def rm_tag(data):
        p = re.compile(r'<.*?>')
        return p.sub('', data)

    def get_page(url):
        try:
            f = urllib.urlopen(url)
            page = f.read()
            f.close()
            return page
        except:
            return ""

    def union(a,b):
        for e in b:
            if e not in a:
                a.append(e)

    def get_next_url(page):
        start_link=page.find("<a href=")
        if(start_link==-1):
            return None,0
        start_quote=page.find('"',start_link)
        end_quote=page.find('"',start_quote+1)
        url=page[start_quote+1:end_quote]
        return url,end_quote

    def get_all_links(page):
        links=[]
        while True:
            url,endpos=get_next_url(page)
            page=page[endpos:]
            if url:
                links.append(url)
            else:
                break
        return links

    def add_to_index(index,url,keyword):
            if keyword in index:
                    if url not in index[keyword]:
                            index[keyword].append(url)
            index[keyword]=[url]

    def add_page_to_index(index, url, content):
        words = content.split()
        for word in words:
            add_to_index(index, url,word)

    def compute_ranks(graph):
        d=0.8
        numloops=20
        ranks={}
        npages=len(graph)
        for page in graph:
            ranks[page]=1.0/npages
        for i in range(0,numloops):
            newranks={}
            for page in graph:
                newrank=(1-d)/npages
                for node in graph:
                    if page in graph[node]:
                        newrank=newrank + d * (ranks[node]/len(graph[node]))
                newranks[page]=newrank
            ranks=newranks
        return ranks

    def crawl_web(seed):
        tocrawl=[seed]
        crawled =[]
        index ={}
        graph={}
        global max_page
        while tocrawl:
            page=tocrawl.pop()
            if page not in crawled:
                max_page -= 1 
                if max_page<=0:
                    break
                c = get_page(page)
                graph[page]=get_all_links(c)
                c=rm_tag(c)
                add_page_to_index(index,page,c)
                union(tocrawl,graph[page])
                crawled.append(page)
        return crawled,index,graph

    def Look_up(index, keyword):
        if keyword in index:
            return index[keyword]
        else:
            return None

    def lucky_search(index, ranks, keyword):
        try:
            pages = Look_up(index, keyword)
            if pages:
                bestpage = pages[0]
                for candidate in pages:
                    if ranks[candidate] > ranks[bestpage]:
                        bestpage = candidate
                return (bestpage, ranks[bestpage], pages)
        except:
            print "Keyword does not exist"

    seed_page = "http://www.python.org"
    search_term = "Take"

    try:
        print "Enter the Max Limit to Search :"
        max_limit=int(raw_input())
    except:
        max_page = 10

    max_page = max_limit

    print '\nCrawling using ' + seed_page + " as seed_page and search_term: " + search_term
    crawled,index,graph=crawl_web(seed_page)
    ranks=compute_ranks(graph)

    def print_profile(index, graph):
        print "*****************"
        print "Length of index", len(index)
        print "Length of graph", len(graph)
        i = 0
        for e in index:
            i = i + 1
            print i, ":", e
            if i > 20:
                break
        print "*****************"

    def print_profile_top (index, ranks):
        max1 = 0
        for e in index:
            link_count = len(index[e])
            if link_count > max1:
                max1= link_count 
                print e, link_count, lucky_search(index,ranks,e)[1]
        print "*********************"

    print_profile(index, graph)
    print_profile_top(index, ranks)

    print "result for :", search_term, ": ", lucky_search(index,ranks,search_term) 
```

the output is : Enter the Max Limit to Search : 10

```
 Crawling using http://www.python.org as seed_page and search_term: Take
    *****************
    Length of index 1281
    Length of graph 9
    1 : Canada
    2 : limited
    3 : all
    4 : here"-->.
    5 : unclear,
    6 : CGI,
    7 : 08:00
    8 : enabled:
    9 : results
    10 : href=&quot;&quot;
    11 : :/
    12 : subtle
    13 : Take
    14 : Buildbot,
    15 : pyBiblio,
    16 : CD&#8221;,
    17 : href="/search-pymodules.xml"/>
    18 : nothing
    19 : Foundation
    20 : pyArkansas
    21 : depend
    *****************
    Canada 1 0.0222222222222
    *********************
    result for : Take :  ('http://www.timparkin.co.uk/2012/08/why-you-cant-make-digital-look-like-velvia-50/', 0.022821308980213083, ['http://www.timparkin.co.uk/2012/08/why-you-cant-make-digital-look-like-velvia-50/'])
    >>> 
```

Please run and see the difference.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:47:52.733

只是避免确切地告诉你错误。

```
In [6]: len(text)
Out[6]: 0

In [7]: c
Out[7]: 3

In [8]: 0 / 3
Out[8]: 0 
```

文本的长度，作为一个空字符串返回 0。

一个可能的解决方法是捕获错误并设置`len(text)`为`c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:46:25.680

好像你`text`是空的。既然你有`except: return ""`in `get_page`，任何事情都可能发生（可能是死链接）。添加一些日志到`get_page`.

# php - getAccessToken returns the app access token instead of the user access token

> ID：13157072
> 
> 赞同：2
> 
> 时间：2012-10-31T11:39:47.077
> 
> 标签：php, facebook, facebook-php-sdk, facebook-access-token

First im getting the "login url":

```
if (!$facebook->getUser())
{
    $login_url = $facebook->getLoginUrl(array(
        'scope' => 'publish_stream' 
    ));
} 
```

And redirect to it, if the user not login it requests him to log in, If the user need to authorize the App, it will request him to do that as well.

The problem is that after the user authorized the App and redirected to my redirect_uri, I still can get his token in order to fetch information about him. This:

```
$facebook->getAccessToken() 
```

Returns the App access token (the one with the pipe in the middle) and this: $facebook->getUser() return 0. and im ending with an endless loop which requesting the login url (first time it will request to authorize my APP) an redirect to my redirect_uri which requesting it again because $facebook->getUser() returning 0.

And the funny part is: When i use this code on other server (located elsewhere in the world) it works. And when i try this on other server (in even other location in the world) it works only 60% of the time.

Where is the problem? in my code? in my server? in Facebook?

Thanks !!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:42:07.110

尝试`$facebook->getAccessTokenFromCode($_GET['code'])`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:50:01.277

我有时也遇到过这个问题。结果是，在那段时间里，我将 Facebook 用作同一应用程序的页面，而不是像我通常的个人资料那样使用。因此，每当您遇到此问题时，您都可以检查以**确保您使用 Facebook 作为用户个人资料，而不是任何页面**。

我希望这至少可以为将来的某人节省一些挫败感，尽管您的问题已解决，但还是回答了。

# c# - 如何在 WPF 中查找由 ListViewItem DataTemplate 生成的元素

> ID：13157074
> 
> 赞同：0
> 
> 时间：2012-10-31T11:39:51.740
> 
> 标签：c#, wpf, listview

我在 WPF 应用程序中有一个 ListView，里面有 CheckBox。

我正在使用 ChapterID 和 ChapterTitles 通过 DataTable 填充 ListView

```
<ListView x:Name="listViewChapter" IsSynchronizedWithCurrentItem="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderThickness="0" SelectionMode="Multiple" Margin="0,2,-1,3" TabIndex="17" Grid.ColumnSpan="2">
                <ListView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="3" />
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </ListView.GroupStyle>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Center">
                            <CheckBox Name="chkChapterTitle" VerticalAlignment="Center" Margin="0,0,0,0" Tag="{Binding ChapterID}" Content="{Binding ChapterTittle}" Checked="chkChapterTitle_Checked" Unchecked="chkChapterTitle_Unchecked" IsChecked="{Binding RelativeSource={RelativeSource AncestorType=ListViewItem},Path=IsSelected}" />
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView> 
```

现在我想访问 CheckBoxes 里面检查...

我的代码是...

```
 private void ToCheckChapters()
    {
        for (int i = 0; i < listViewChapter.Items.Count; i++)
        {

            // Get a all list items from listbox
            ListViewItem ListBoxItemObj = (ListViewItem)listViewChapter.ItemContainerGenerator.ContainerFromItem(listViewChapter.Items[i]);
            //bool check = ListBoxItemObj.HasContent;
            // find a ContentPresenter of that list item.. [Call FindVisualChild Method]
            ContentPresenter ContentPresenterObj = FindVisualChild<ContentPresenter>(ListBoxItemObj);

                // call FindName on the DataTemplate of that ContentPresenter
                DataTemplate DataTemplateObj = ContentPresenterObj.ContentTemplate;
                CheckBox Chk = (CheckBox)DataTemplateObj.FindName("chkChapterTitle", ContentPresenterObj);
                Chk.IsChecked = true;
        }
    }

    private childItem FindVisualChild<childItem>(DependencyObject obj)
    where childItem : DependencyObject
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(obj, i);
            if (child != null && child is childItem)
                return (childItem)child;
            else
            {
                childItem childOfChild = FindVisualChild<childItem>(child);
                if (childOfChild != null)
                    return childOfChild;
            }
        }
        return null;
    } 
```

但在这段代码中 ContentPresenterObj 始终为空......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:01:46.330

我自己得到了答案。。

加载 ListView 后，我必须调用 ToCheckChapters() 函数...

# service - What is the difference between online, offline, enabled and disabled in Solaris services?

> ID：13157079
> 
> 赞同：1
> 
> 时间：2012-10-31T11:40:24.510
> 
> 标签：service, solaris

When svcs -a is entered on the terminal, a list of services with its corresponding status is displayed. May I ask, what does each status mean and what is the difference between the statuses online, offline, enabled and disabled?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:04:20.730

我不认为一个`enabled`状态可以由`svcs -a`. [记录在案](http://docs.oracle.com/cd/E23824_01/html/821-1474/smf-5.html)的状态是：

*   未初始化
*   离线
*   在线的
*   退化的
*   维护
*   禁用
*   遗留运行

如果状态后跟`*`，则表示它正在转换。

`offline`和之间的区别在于`disabled`，在前一种情况下，服务已启用但由于某种原因未运行。用来`svcs -xv`找出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:49:49.737

特别不确定 Solaris，但在 Linux 上它们映射到：

*   线上：跑步
*   离线：未运行
*   enabled：开机自动启动
*   禁用：没有自动启动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T11:10:09.813

w00p 呜呜

太阳操作系统 11.3

> 影响：此服务未运行。

# c# - 冗余 ToString 代码？

> ID：13157088
> 
> 赞同：4
> 
> 时间：2012-10-31T11:40:47.337
> 
> 标签：c#, .net, resharper

我在想 ：

编写此代码：

```
 DataRow[] g = new DataRow[1] ;
 var t=new StringBuilder().AppendFormat("{0}", g[0]["aaa"].ToString()); 
```

Resharper 显示如下：（注意灰色）

![在此处输入图像描述](../Images/8c3fd1a4b82e79ca7efd439e195d01b0.png)

![在此处输入图像描述](../Images/0511cae49a64ad0862b70a189ebe2770.png)

`3 questions please`

1） removed() `ToString`，不调用removed()，对象如何输出其显示字符串`ToString`？

2）是否建议删除它，因为他*已经*在内部调用它？还是因为其他原因？

3）不删除 ToString() ，它会调用两次吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T11:42:54.547

是的，它是多余的，因为`AppendFormat`(like `String.Format`) 在内部已经将其转换为字符串并且`String.ToString`总是多余的。

实际上，它对[`ICustomFormatter.Format`](http://msdn.microsoft.com/en-us/library/system.icustomformatter.format.aspx)每个提供的参数都使用该方法。

在无用方面也是多余的。因此，即使不需要多次完成任何工作（`AppendFormat`不会尝试将字符串转换为字符串），它也是没有意义的，因为无论如何`AppendFormat` *都会这样做*。因此 resharper 尝试在此处简化您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T11:44:12.267

您可能想看：[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

**处理订单**

> 通过执行以下列表中的步骤，将参数列表中与格式项对应的每个值转换为字符串。如果前三个步骤中的任何条件为真，则在该步骤中返回值的字符串表示形式，并且不执行后续步骤。
> 
> 1.  如果要格式化的值为空，则返回一个空字符串（“”）。
> 2.  如果复合格式化方法包含一个类型为 IFormatProvider 的参数，该参数也实现了 ICustomFormatter 接口，则该值将传递给 ICustomFormatterFormat 方法。
> 3.  如果该值实现了 IFormattable 接口，则调用其 IFormattableToString 方法。
> 4.  调用该类型的 ToString 方法，该方法要么被重写，要么从 Object 类继承。

而[DataRow](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)似乎继承自`System.Object`并且不实现`IFormatProvider`or `IFormattableToString`，所以我相信，它的`ToString`方法被调用以在内部获取字符串表示，并且具有显式`.ToString`被认为是多余的。

# vb.net - 我的动态添加按钮（VB.NET）在哪里？

> ID：13157090
> 
> 赞同：1
> 
> 时间：2012-10-31T11:40:51.970
> 
> 标签：vb.net, datagridview

我遇到了一个完全让我困惑的问题。

我有一个动态添加的包含许多列和行的 DataGridView，我想要实现的是在 mouse_up 上我希望在选定的单元格上绘制一个按钮。因此，例如，如果我选择 row3 的前 3 个单元格，则应在 3 个单元格上绘制一个按钮。

我尝试使用每个选定单元格的 X 和 Y 并将其转换为按钮列，但这不起作用。我目前拥有的是示例代码，它只是将按钮添加到屏幕上，但它们不会出现在屏幕上（因此是标题）。一旦我让按钮出现在屏幕上，我将尝试将它们绘制在选定的单元格上，但我需要先克服这个障碍

这是我正在使用的代码：

```
 'I dynamically add the DataGridView
    Grid = New DataGridView
    Grid.Dock = DockStyle.Fill
    Grid.BackgroundColor = Color.White
    Grid.RowHeadersVisible = False
    Grid.AllowUserToOrderColumns = False
    Grid.AllowUserToResizeRows = False

    ...

    TabControl.SelectedTab.Controls.Add(Grid)

    AddHandler Grid.CellMouseUp, AddressOf Grid_MouseUp

    ...
   'On mouse up it calls the sub to add buttons
    Private Sub Grid_MouseUp(ByVal sender As Object, ByVal e As         System.Windows.Forms.DataGridViewCellMouseEventArgs)

    Dim i As Integer

    For i = 1 To 30
        NewButton(i) 'calls the dub
    Next i

End Sub 
```

'这是子

```
Private Sub NewButton(ByVal ButtonNumber As Integer)

    Dim oButton As Button
    oButton = New Button
    oButton.Enabled = True
    oButton.Location = New Point(ButtonNumber + 50, ButtonNumber + 50)
    oButton.Name = "MyButton" & ButtonNumber.ToString
    oButton.Size = New Size(75, 23)
    oButton.Text = "Button" & ButtonNumber.ToString
    oButton.Visible = True

    oButton.Tag = ButtonNumber

    TabControl.SelectedTab.Controls.Add(oButton)
End Sub 
```

如果你们能建议我需要更改什么以实现此功能，我将不胜感激。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:46:41.693

也许你的按钮在其他控件下，`oButton.BringToFront()`在你将按钮添加到 Tabcontrol 控件后尝试调用。

# android-sqlite - 想要将日期与今天的日期进行比较并更新数据库。

> ID：13157091
> 
> 赞同：1
> 
> 时间：2012-10-31T11:41:11.250
> 
> 标签：android-sqlite

我正在尝试将用户输入的日期与今天的日期进行比较，并相应地更新数据库。这就是我正在做的..

```
Calendar c = Calendar.getInstance();
    SimpleDateFormat df = new SimpleDateFormat("MM-dd-yyyy");
    today = df.format(c.getTime());
    //=================================================================== 
    try{
    ContentValues val1 = new ContentValues();
    val1.put(CPUser.Data.TASK_TYPE, "Todays Task");
    getContentResolver().update(CPUser.Data.CONTENT_URI, val1, CPUser.Data.TASK_DUE_DATE + "=" +"'"+today+"'",null);

    ContentValues val2 = new ContentValues();
    val2.put(CPUser.Data.TASK_TYPE, "Overdue Task");
    getContentResolver().update(CPUser.Data.CONTENT_URI, val2, CPUser.Data.TASK_DUE_DATE + "<" +"'"+today+"'",null);

    ContentValues val3 = new ContentValues();
    val3.put(CPUser.Data.TASK_TYPE, "Active Task");
    getContentResolver().update(CPUser.Data.CONTENT_URI, val3, CPUser.Data.TASK_DUE_DATE + ">" +"'"+today+"'",null);
    }
    Catch(Exception ex)
    {   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:11:27.650

如果要将日期作为文本存储在数据库中，则始终必须使用“yyyy-MM-dd”格式，否则将无法进行除等于（“=”）之外的比较。我所做的是使用 Unix Epoch 将所有日期、时间和时间戳保存为 INT。这允许您以不同的格式（例如使用语言环境）显示日期来显示日期，而无需先解析日期。它还允许任何类型的比较（等于、大于等）。功能很简单：

```
public static long timestampFromUnixEpoch(long unixepoch) {
    if (unixepoch == 0)
        return 0;
    return (unixepoch * 1000) - TimeZone.getDefault().getRawOffset();
}

public static long unixEpochFromTimestamp(long timestampMS) {
    if (timestampMS == 0)
        return 0;
    return ((timestampMS + TimeZone.getDefault().getRawOffset()) / 1000);
}

public static long dateToUnixEpoch(Date date) {
    if (date == null)
        return 0;
    return unixEpochFromTimestamp(date.getTime());
}

public static Date unixEpochToDate(long unixepoch) {
    if (unixepoch == 0)
        return null;
    return new Date(timestampFromUnixEpoch(unixepoch));
} 
```

# android - 即使有索引，连接也很慢

> ID：13157094
> 
> 赞同：1
> 
> 时间：2012-10-31T11:41:18.483
> 
> 标签：android, sqlite

我创建了 3 个表，例如：

```
db.execSQL("CREATE TABLE IF NOT EXISTS programs (id_program INTEGER PRIMARY KEY    AUTOINCREMENT , id_channel TEXT  , nom_prgrm TEXT  , debut TEXT , fin TEXT , FOREIGN KEY(id_channel) REFERENCES channels(id_channel)) ");
db.execSQL("CREATE INDEX __program_index ON programs(nom_prgrm)"); 
db.execSQL("CREATE TABLE IF NOT EXISTS categories (id_categorie INTEGER PRIMARY KEY  AUTOINCREMENT, nom_categorie TEXT)");
db.execSQL("CREATE UNIQUE INDEX __categorie_index ON   categories(nom_categorie,id_categorie)"); 
db.execSQL("CREATE TABLE IF NOT EXISTS categories_programs (id_categorie INTEGER REFERENCES categories(id_categorie) ,id_program INTEGER REFERENCES programs(id_program), PRIMARY KEY(id_categorie,id_program))"); 
```

程序表包含大约 2500 条记录和类别 150，因此链接表有 3400 条记录

当我执行此查询时，需要很长时间才能显示结果我不知道如何优化它！

```
SELECT  id_channel , nom_categorie , debut , fin , nom_prgrm FROM programs, categories_programs, categories WHERE ( (categories_programs.id_program = programs.id_program) AND (categories_programs.id_categorie = categories.id_categorie) AND  ('"+sentence+"' LIKE ('%' || nom_categorie || '%'))) 
```

可能是造成这个问题的连接？

感谢帮助

我的问题解决了，我在 android 4.1 上尝试了相同的代码，它运行得非常快，但使用 S2（android 2.3）它很慢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:46:18.010

速度慢的原因可能是

`LIKE ('%' || nom...`

在开头使用通配符将使数据库解析该列上的全部内容。

此外，如果您准备语句然后绑定参数器，它会有所改善（尽管它并不重要）。

**[编辑]**

如果这不是问题，您必须考虑您正在评估 LIKE 子句 3400 次（并且您只有 150 个类别）。

尝试使用以下内容预过滤类别表：

```
SELECT  id_channel , nom_categorie , debut , fin , nom_prgrm 
FROM 
    programs, 
    categories_programs, 
    (select id_categorie,nom_categorie from categories where ('"+sentence+"' LIKE ('%' || nom_categorie || '%'))))
    categories 
WHERE (categories_programs.id_program = programs.id_program) AND (categories_programs.id_categorie = categories.id_categorie) 
```

（我还没有测试查询，所以它可能有一些错字）

**[/编辑]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:20:36.513

用 JOIN 替换您的查询怎么样？

```
SELECT  id_channel , nom_categorie , debut , fin , nom_prgrm FROM programs
JOIN categories_programs ON categories_programs.id_program = programs.id_program
JOIN categories ON categories_programs.id_categorie = categories.id_categorie
WHERE  '"+sentence+"' LIKE ('%' || nom_categorie || '%'))); 
```

虽然不太确定你在最后一种情况下真正想要做什么......

# css - IE7 is breaking my menu

> ID：13157095
> 
> 赞同：1
> 
> 时间：2012-10-31T11:41:18.167
> 
> 标签：css

I am pretty good with css, but can't figure out why my menu is being destroyed by IE7\. Looks perfect in all other browsers I tested. First image link is correct. Second image link is how it looks in IE7\.

[http://www.asingularcreation.com/Forums/download/file.php?id=8368&mode=view/ie8+.jpg](http://www.asingularcreation.com/Forums/download/file.php?id=8368&mode=view/ie8+.jpg) http://www.asingularcreation.com/Forums/download/file.php?id=8367&mode=view/ie7.jpg

Here is the page: [http://www.asingularcreation.com/calls-to-artists.php](http://www.asingularcreation.com/calls-to-artists.php). Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:53:38.507

You do not need to float (or clear) the menu container. It looks like it is causing IE7 to calculate the width incorrectly which forces the menu to flow down, underneath the sub-menu.

```
<div style="height:40px; line-height:40px; float:left; clear:both"><!--Main Menu --></div> 
```

Removing the float and clear properties fixes the display in IE7 and also still works in Chrome and IE8 and IE9.

There is a lot of inline styles in the example page so I would also look at moving the CSS into an external file if possible.

# objective-c - 请求完成时向另一个视图控制器发送通知

> ID：13157097
> 
> 赞同：5
> 
> 时间：2012-10-31T11:41:21.407
> 
> 标签：objective-c, ios, uiviewcontroller, objective-c-blocks

我正在开发一个 Iphone 应用程序（ios5 + 故事板 + arc）。我有 2 个 ViewController A 和 B。

在 AI 中有一个按钮。当按下时，我正在向服务器异步提交请求（使用 AFNetworking），我将使用 performSegueWithIdentifier（推送非模态）转到视图控制器 B。

当请求完成时，它会执行一个请求成功的块，将数据保存到数据库中。（该块在 ViewController A 中，因为请求是从那里发送的）

有没有办法可以通知 ViewController B 请求已完成并在 B 中执行方法？

我正在寻找的是，当请求完成并进入成功块时，我在视图控制器 B 中运行一个方法，该方法是加载的视图。

我希望我很清楚。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T11:45:43.500

要发布通知，请使用以下代码：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"Midhun" object:nil]; 
```

在通知监听类的 viewDidLoad 中添加如下观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performTask:) name:@"Midhun" object:nil]; 
```

`performTask:`是观察到通知时将调用的方法。

请参考[NSNotification 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:50:06.460

第一个选项是在某处存储对视图控制器 B 的引用（如应用程序委托中的示例）并使用它来运行方法。

第二种是通过 发送通知`[NSNotificationCenter defaultCenter]`，因此控制器 B 在某处设置了一个通知的侦听器（viewDidLoad 可能是一个好地方）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(finished:) name:@"requestfinishes" object:nil]; 
```

控制器 A 发送它：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"requestfinishes" object:nil userInfo:nil]; 
```

请注意，如果您从不同的线程发送通知，则侦听器将在同一线程上执行。

# java - 在当前时间显示 ISO-8601 日期+时间？

> ID：13157100
> 
> 赞同：1
> 
> 时间：2012-10-31T11:41:25.157
> 
> 标签：java, timezone, utc

例如，2012-10-30T22:30:00+0300 需要显示在 2012-10-30T22:30:00-0600 （例如当地时间）需要在 java 中实现（android 应用程序）我该如何管理这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:23:17.323

这就是日期：一个普遍的瞬间。显示时选择适当的时区，您将获得所需的时间字符串：

```
Date now = new Date();
DateFormat df = df.getDateTimeInstance();
System.out.println(df.format(now)); // now, displayed in the current time zone (examle: Germany)
df.setTimeZone(theLondonTimeZone);
System.out.println(df.format(now)); // now, displayed in the time zone of London 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-17T19:28:25.887

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:03:17.570

使用 joda 时间库最好地解决了我的问题，使用 dateTime 和 dateTime zone 如下所示：

```
DateTimeFormatter parser2 = ISODateTimeFormat.dateTimeNoMillis();
    DateTime dt = new DateTime();
    DateTime dt2 = new DateTime();
    dt = DateTime.parse("2012-11-05T13:00:00+0200");
    System.out.println(dt.toString());

    dt2 = DateTime.parse("2012-11-05T21:45:00-08:00");
    DateTimeZone dtz = dt2.getZone();
    System.out.println(dt.withZone(dtz).toString()); 
```

# c# - How to set the IP (UserHostAddress) on a "mocked' BaseHttpContext?

> ID：13157101
> 
> 赞同：8
> 
> 时间：2012-10-31T11:41:26.577
> 
> 标签：c#, asp.net, .net, mocking

I'm trying to create a dummy `BaseHttpContext` to do some (mock) testing without having to do an actual request. I like to add an IP address to my dummy context.

```
string url = "http://www.google.com";

//wrap in uri
Uri uri = new Uri(url);

//create request
var request = new HttpRequest("", uri.GetLeftPart(UriPartial.Path), uri.Query);
request.ServerVariables.Add("REMOTE_ADDR", ip);

//dummy context
HttpContext context = new HttpContext(
    new HttpRequest("", uri.GetLeftPart(UriPartial.Path), uri.Query),
    new HttpResponse(new StringWriter(System.Text.Encoding.UTF8))
);

//wrap context
var contextWrapper = new HttpContextWrapper(context); 
```

The IP should be reflected in the `BaseHttpContext.Request.UserHostAddress`. Adding an IP like this: `request.ServerVariables.Add("REMOTE_ADDR", ip);`, results in the following exception:

> Specified method is not supported.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-19T09:09:31.710

[这篇文章](http://blog.heeresonline.com/2014/10/modifying-httprequest-servervariables-extension-method/)很有帮助。要解决您的问题，您只需要从帖子中实现`HttpRequestExtensions`和`NameValueCollectionExtensions`类。

你可以像这样使用它：

```
string url = "http://127.0.0.1";
var request = new HttpRequest(string.Empty, url, string.Empty);
request.AddServerVariable("REMOTE_ADDR", "127.0.0.1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:34:50.200

看起来假装`HttpContext`不是那么容易，需要做很多工作。使用模拟框架可以使事情变得更容易。这是一个使用[Moq](https://github.com/Moq/moq4)的示例：

```
/// <summary>
/// Fakes the HTTP context.
/// </summary>
/// <param name="url">The URL.</param>
/// <param name="ip">The ip.</param>
/// <param name="referrer">The referrer.</param>
/// <returns>A HTTP context.</returns>
public static HttpContextBase FakeHttpContext(string url, string ip, string referrer)
{
    Uri uri = new Uri(url);

    var context = new Mock<HttpContextBase>();
    var files = new Mock<HttpFileCollectionBase>();
    var request = new Mock<HttpRequestBase>();
    var response = new Mock<HttpResponseBase>();
    var session = new Mock<HttpSessionStateBase>();
    var server = new Mock<HttpServerUtilityBase>();
    var user = new Mock<IPrincipal>();
    var identity = new Mock<IIdentity>();

    request.Setup(req => req.ApplicationPath).Returns("~/");
    request.Setup(req => req.AppRelativeCurrentExecutionFilePath).Returns("~/");
    request.Setup(req => req.PathInfo).Returns(string.Empty);
    request.Setup(req => req.Form).Returns(new NameValueCollection());
    request.Setup(req => req.QueryString).Returns(HttpUtility.ParseQueryString(uri.Query));
    request.Setup(req => req.Files).Returns(files.Object);
    request.Setup(req => req.UserHostAddress).Returns(ip);
    request.Setup(req => req.UrlReferrer).Returns(new Uri(referrer));
    request.Setup(req => req.Url).Returns(uri);
    request.Setup(req => req.RawUrl).Returns(url);

    response.Setup(res => res.ApplyAppPathModifier(It.IsAny<string>())).Returns((string virtualPath) => virtualPath);

    user.Setup(usr => usr.Identity).Returns(identity.Object);

    identity.SetupGet(ident => ident.IsAuthenticated).Returns(true);

    context.Setup(ctx => ctx.Request).Returns(request.Object);
    context.Setup(ctx => ctx.Response).Returns(response.Object);
    context.Setup(ctx => ctx.Session).Returns(session.Object);
    context.Setup(ctx => ctx.Server).Returns(server.Object);
    context.Setup(ctx => ctx.User).Returns(user.Object);

    return context.Object;
} 
```

受[这篇 git post 的](https://gist.github.com/837741)启发。

# java - 要求用户输入变量后无法解析为变量

> ID：13157103
> 
> 赞同：0
> 
> 时间：2012-10-31T11:41:34.610
> 
> 标签：java

这可能很明显，但是当我试图强制用户继续输入一个值直到他输入一个有效值时，我收到一个错误，即无法解析变量。

然后，如果我事先声明它，我会收到一个错误，说重复值。

```
do {
    float x = Float.parseFloat(javax.swing.JOptionPane.showInputDialog("Enter 1");
} while (x != 1); 
```

编译器不应该先执行`do`语句，然后再担心`while`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:42:57.200

在循环之前声明`x`，使其范围更宽，如下所示：

```
float x = 0.0f;
do {
    x = Float.parseFloat(javax.swing.JOptionPane.showInputDialog("Enter 1"); 
} while (x != 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:44:10.403

是的，这是相当明显的事情。

您在块内声明变量，这意味着一旦您到达块的末尾，它将不再存在。块的结尾是 }

尝试：

```
float x;
do {
    Float.parseFloat(javax.swing.JOptionPane.showInputDialog("Enter 1"));
} while(x != 1); 
```

或者：

```
float x = 0;
while(x != 1) {
    Float.parseFloat(javax.swing.JOptionPane.showInputDialog("Enter 1"));
} 
```

还请注意代码中缺少的右括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:48:54.130

```
 float x=0.0f;
     do{
        x = Float.parseFloat(javax.swing.JOptionPane.showInputDialog("Enter 1"));
         }
         while (x != 1); 
```

错误的原因是，您在 while 条件变量中声明了它的`x`内部不可见， 并且在结尾处被遗漏了。`loop``x``closing parenthesis``initialization`

如果错了请纠正我

# meteor - Meteor - installing meteorite gives an error

> ID：13157107
> 
> 赞同：0
> 
> 时间：2012-10-31T11:41:48.217
> 
> 标签：meteor

I'm trying to install Meteor package manager - Meteorite.

When I do "npm install -g meteorite", I get the following errors.

```
npm http 304 https://registry.npmjs.org/prompt/0.2.3
npm ERR! git clone git://github.com/possibilities/ws.git execvp(): No such file or directory
npm ERR! error rolling back Error: UNKNOWN, unknown error '/usr/local/lib/node_modules/meteorite/node_modules/fstream/lib'
npm ERR! error rolling back  meteorite@0.4.3 { [Error: UNKNOWN, unknown error '/usr/local/lib/node_modules/meteorite/node_modules/fstream/lib']
npm ERR! error rolling back   errno: -1,
npm ERR! error rolling back   code: 'UNKNOWN',
npm ERR! error rolling back   path: '/usr/local/lib/node_modules/meteorite/node_modules/fstream/lib' }
npm ERR! Error: `git "clone" "git://github.com/possibilities/ws.git" "/var/root/tmp/npm-1056/1351683071807-0.13464537682011724"` failed with 127
npm ERR!     at ChildProcess.<anonymous> (/usr/local/lib/node_modules/npm/lib/utils/exec.js:56:20)
......... 
```

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:27:39.643

我不确定这是否解决了问题，但我有带有 Mountain Lion 的 Macbook Air。但是直到现在我才更新我的旧 XCode。我更新它是因为我需要 SVN。

我不确定这是否解决了问题，但我只是尝试了 npm install -g meteorite 并且效果很好。一定有一些依赖？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:05:56.420

我试过了，但无法复制错误。

都试过`npm install -g meteorite`了`npm install meteorite`

您是否正确安装了 git 并在正确的路径中？

# sql - SQL query to display aggregated data when result is zero

> ID：13157109
> 
> 赞同：2
> 
> 时间：2012-10-31T11:41:52.103
> 
> 标签：sql, sql-server, join, aggregate, coalesce

I have a table with fields like this:

```
Item
Category
Year 
Month
Value 
```

I want to aggregate the result from this table to display sum(value) for each category, year and month. So I have this query:

```
SELECT Category, Year, Month, SUM(Value) 
FROM Table
GROUP BY Category, Year, Month; 
```

This works fine, but for months in which the sum is zero, the month is not displayed. I want all months to be displayed with zero for the total value where applicable.

I’ve tried doing `COALESCE(SUM(Value),0)`, but this didn’t work.

I’ve tried creating a separate table (Table2) with the year and month values and then joining this with the first table:

```
SELECT Category, Year, Month, SUM(Value) 
FROM Table
RIGHT JOIN Table2
ON Table2.Year + Table2.Month = Table.Year + Table.Month
GROUP BY Category, Year, Month; 
```

This doesn’t work either. What am I doing wrong?

Edit:

I have tried Dems's solution, using the following query:

```
SELECT
  Category.name,
  Dates.Year,
  Dates.Month,
  SUM(Data.Value) AS Value
FROM
  Category
CROSS JOIN
  Dates
LEFT JOIN
  Data
    ON  data.CategoryID = Category.ID
    AND data.Year       = Dates.Year
    AND data.Month      = Dates.Month
WHERE data.Year BETWEEN #### and ####
  AND data.Month BETWEEN # AND #
  AND data.Property IN (‘A1’,’B1’) 
  AND data.Property2 IN (‘C1’,’D1’)
GROUP BY
  Category.name,
  Dates.Year,
  Dates.Month 
```

The only differences as far as can see are that I'm using a where clause on data, and have missed of the ORDER BY, which shouldn't make a difference. But I'm still having no joy.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:50:19.287

您需要将 Category 添加到您的`Table2`，或者*（甚至更好）*有一个`Category`表。

然后，您需要按这些查找表而不是数据表进行分组。

```
SELECT
  Category.name,
  Dates.Year,
  Dates.Month,
  SUM(Data.Value) AS Value
FROM
  Category
CROSS JOIN
  Dates
LEFT JOIN
  Data
    ON  data.CategoryID = Category.ID
    AND data.Year       = Dates.Year
    AND data.Month      = Dates.Month
    AND data.Property  IN ('A1','B1') 
    AND data.Property2 IN ('C1','D1')
WHERE Dates.Year  BETWEEN #### AND ####
  AND Dates.Month BETWEEN #### AND ####
GROUP BY
  Category.name,
  Dates.Year,
  Dates.Month
ORDER BY
  Category.name,
  Dates.Year,
  Dates.Month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:52:19.130

不要在语句中添加年份和月份，而是分别检查月份和年份的条件。像这样 ON Table2.Year = Table.Year 和 Table2.Month = Table.Month

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:45:46.260

```
SELECT Table.Category, Table.Year, Table.Month, SUM(Table.Value) 
FROM Table
right outer  JOIN Table2
ON Table2.Year= Table.Year and Table2.Month =Table.Month
GROUP BY Table.Category,Table2.Year, Table2.Month; 
```

# snmp - 主机没有回应：snmpwalk

> ID：13157111
> 
> 赞同：0
> 
> 时间：2012-10-31T11:42:05.753
> 
> 标签：snmp, net-snmp, snmp4j, snmpd

我已经使用 mib2c.create-dataset.conf （启用缓存）在我的 snmd.conf ::`agentXTimeout 15`

在 testtable.h 文件中，我更改了缓存值，如下所示...

```
#define testTABLE_TIMEOUT        60 
```

据我了解，它每 60 秒加载一次数据。现在我的问题是，如果数据表中的数据超过一定数量，则加载它需要一些时间。

在两者之间如果我触发了 SNMPWALK，它会给我“主机没有响应”如果我对整个表使用 SNMPWALK，并且在 testTABLE_TIMEOUT 之间发生，它会在两者之间停止并显示以下错误（主机没有响应）。请告诉我如何解决它？在我的表中存在大量数据并且经常变化。

我在哪里读到：（当代理收到对该表中某些内容的请求并且缓存早于定义的超时（12s > 10s）时，它*会*重新加载数据。这是预期的行为。但是代理超时后不会自动释放本地缓存（即调用“免费”例程）。而是由常规“垃圾收集”运行（每分钟一次）处理，这将释放任何陈旧的缓存。同时，尝试使用该缓存的请求将发现它已过期，并重新加载数据。）

这两者之间有什么联系吗？？我无法得到这个...如何解决我的问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:36:38.500

不幸的是，如果您的数据集非常大并且需要很长时间加载，那么您只需要忍受缓慢的加载和缓慢的响应。您可以尝试使用或其他方式定期加载数据，`snmp_alarm`以便在收到请求时立即可用，但这并不能真正解决问题，因为在触发警报后请求仍然会立即出现，并且代理会仍然需要很长时间才能做出反应。

所以......最好的办法是尽可能优化您的加载程序，并可能简单地增加管理器使用的超时时间。例如`snmpwalk`，您可能会添加`-t 30`到命令行参数，我敢打赌一切都会突然正常工作。

# zend-framework - ZF：表单数组字段 - 如何在视图中正确显示值

> ID：13157113
> 
> 赞同：1
> 
> 时间：2012-10-31T11:42:35.667
> 
> 标签：zend-framework, zend-form

假设我有一个 Zend_Form 表单，它有几个文本字段，例如：

```
$form = new Zend_Form();
$form->addElement('text', 'name', array(
    'required' => true,
    'isArray' => true,
    'filters' => array( /* ... */ ),
    'validators' => array( /* ... */ ),
));
$form->addElement('text', 'surname', array(
    'required' => true,
    'isArray' => true,
    'filters' => array( /* ... */ ),
    'validators' => array( /* ... */ ),
)); 
```

渲染后，我有以下 HTML 标记（简化）：

```
<div id="people">
    <div class="person">
        <input type="text" name="name[]" />
        <input type="text" name="surname[]" />
    </div>
</div> 
```

现在我希望能够添加任意数量的人。我创建了一个“+”按钮，在 Javascript 中将下一个 div.person 附加到容器中。在我提交表单之前，我有例如 5 个姓名和 5 个姓氏，以数组的形式发布到服务器。除非有人将值放在未验证的字段中，否则一切都很好。然后整个表单验证失败，当我想再次显示表单（有错误）时，我看到 PHP 警告：

```
htmlspecialchars() expects parameter 1 to be string, array given 
```

票证中或多或少地描述了这一点：http: [//framework.zend.com/issues/browse/ZF-8112](http://framework.zend.com/issues/browse/ZF-8112)

但是，我想出了一个不太优雅的解决方案。我想要达到的目标：

*   在视图中再次呈现所有字段和值
*   仅在包含错误值的字段旁边显示错误消息

这是我的解决方案（查看脚本）：

```
<div id="people">
<?php
$names = $form->name->getValue(); // will have an array here if the form were submitted
$surnames= $form->surname->getValue();

// only if the form were submitted we need to validate fields' values
// and display errors next to them; otherwise when user enter the page
// and render the form for the first time - he would see Required validator
// errors
$needsValidation = is_array($names) || is_array($surnames);

// print empty fields when the form is displayed the first time
if(!is_array($names))$names= array('');
if(!is_array($surnames))$surnames= array('');

// display all fields!
foreach($names as $index => $name):
    $surname = $surnames[$index];
    // validate value if needed
    if($needsValidation){
        $form->name->isValid($name);
        $form->surname->isValid($surname);
    }
?>
  <div class="person">
     <?=$form->name->setValue($name); // display field with error if did not pass the validation ?>
     <?=$form->surname->setValue($surname);?>
  </div>
<?php endforeach; ?>
</div> 
```

代码有效，但我想知道是否有合适、更舒适的方法来做到这一点？当需要更动态的多值表单并且很长时间没有找到更好的解决方案时，我经常遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T09:50:17.530

没有更好的主意，我创建了一个处理上述逻辑的视图助手。可以在[这里](http://ideone.com/wjLHy8)找到。

如果帮助器在视图中可用，则可以通过以下方式使用它（使用问题中的表格）：

```
<?= 
    $this->formArrayElements(
        array($form->name, $form->surname), 
        'partials/name_surname.phtml'
    );
?> 
```

`application/views/partials/name_surname.phtml`部分视图的内容是：

```
<div class="person">
    <?= $this->name ?>
    <?= $this->surname ?>
</div> 
```

这些字段根据发布的表单呈现，验证消息仅显示在未通过验证的值旁边。

助手的代码远非完美（我只是从问题中重写了这个想法）但易于使用并且可以被认为是一个很好的起点。

# c# - 有没有办法在 Html Agility Pack 中对经过 Windows 身份验证的用户进行身份验证？

> ID：13157117
> 
> 赞同：1
> 
> 时间：2012-10-31T11:42:46.903
> 
> 标签：c#

在 HttpTests 中，有一种方法可以使用

```
request.Credentials = CredentialCache.DefaultCredentials; 
```

Html Agility Pack 中有类似的东西吗？我想测试我的本地主机项目，但它收到：

> HTTP 错误 401.2 - 未经授权 您无权查看此页面

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T12:12:24.813

我找到了 Jon Gallant 的博客：http: [//blog.jongallant.com/2012/07/htmlagilitypack-windows-authentication.html#.UJEQam8xol8](http://blog.jongallant.com/2012/07/htmlagilitypack-windows-authentication.html#.UJEQam8xol8)

创建一个新的 HtmlWeb 实例，创建一个将 UseDefaultCredentials 设置为 true 的新 WebProxy，在 webload 上创建一个名为 document 的新变量，将 url 设置为 GET 请求，插入默认凭据并获取应用程序的系统凭据。

```
 var web = new HtmlWeb();
         web.PreRequest = delegate(HttpWebRequest webRequest)
         {
         webRequest.Timeout = 1200000;
         return true;
         };
         var proxy = new WebProxy() { UseDefaultCredentials = true };
         var doc = web.Load("http://localhost:2120", "GET", proxy, 
         CredentialCache.DefaultNetworkCredentials);

        var linksOnPage = from lnks in document.DocumentNode.Descendants()
                          where lnks.Name == "a" &&
                               lnks.Attributes["href"] != null &&
                               lnks.InnerText.Trim().Length > 0 

                          select new
                          {
                              Url = lnks.Attributes["href"].Value,
                              Text = lnks.InnerText
                          };

        linksOnPage.All(t => { Console.WriteLine(t.Text + " : " + t.Url); return true; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:58:18.723

> Is there a way to authenticate a windows authenticated user in Html Agility Pack?

No,

**What is exactly the [Html Agility Pack](http://htmlagilitypack.codeplex.com/) (HAP)?**

This is an agile HTML parser that builds a read/write DOM and supports plain XPATH or XSLT.

It is a .NET code library that allows you to parse "out of the web" HTML files. The parser is very tolerant with "real world" malformed HTML. The object model is very similar to what proposes System.Xml, but for HTML documents (or streams).

Html Agility Pack now supports Linq to Objects (via a LINQ to Xml Like interface).

**Sample applications:**

**Page fixing or generation :** You can fix a page the way you want, modify the DOM, add nodes, copy nodes, well... you name it.

**Web scanners :** You can easily get to img/src or a/hrefs with a bunch XPATH queries.

**Web scrapers :** You can easily scrap any existing web page into an RSS feed for example, with just an XSLT file serving as the binding. An example of this is provided.

[Html Agility Code Examples](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

# c# - 使用 IEnumerable、ICollection 和 IList 的自定义集合

> ID：13157122
> 
> 赞同：28
> 
> 时间：2012-10-31T11:42:58.850
> 
> 标签：c#, ienumerable, ilist, icollection, custom-collection

我需要设计自己的自定义`GenericCollection`类。现在我有很多选项可以使用`IEnumerable`、`ICollection`和派生它`IList`，稍后会提供一些附加功能。

我有点困惑，如果我一起去，`IEnumerable<T>`我可能需要声明对象以实际保存集合，就像在这种情况下一样`_list`。

```
public class GenericCollection<T> : IEnumerable<T>
{
    private List<T> _list;
    //...
} 
```

但是如果我使用`ICollection<T>`or `IList<T>`，我不需要声明`List`对象，因为它是隐式可用的。

```
public class GenericCollection<T> : IList<T>
{
    // no need for List object
    //private List<T> _list; 
    //...
} 
```

*这两种方法在性能*方面有什么区别？

在哪种情况下，每一个都是首选，尤其是在设计您自己的系列时。我对性能良好的轻量级系列感兴趣。我认为这可以通过使用来实现，`IEnumerable<T>`但是究竟有什么强有力的理由去使用它呢？

我已经查看了一些现有的帖子，但没有一个提供所需的信息。

[返回'IList' vs 'ICollection' vs 'Collection'](https://stackoverflow.com/questions/9855693/ilist-vs-icollection-vs-collection)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-31T11:57:29.050

`IEnumerable`, `ICollection`, and `IList` (generally, any type with an `I` prefix) are just [interfaces](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.110%29.aspx). They let you expose what your class will do, but unlike if you [inherit](http://msdn.microsoft.com/en-us/library/ms173149.aspx) a class, interfaces do not provide you a default implementation of any of the things they say you must do.

As far as choosing which interface, here's a quick guide:

*   An `IList` is an `ICollection` that can be accessed by index.
*   An `ICollection` is an `IEnumerable` with easy access to things like `Add`, `Remove`, and `Count`.
*   An `IEnumerable` is anything that can be enumerated, even if the list of those things doesn't exist until you enumerate it.

Some classes that you might want to extend (or keep as a private field that runs most of the logic) for your collection are `List<T>`, `Collection<T>`, (which implements `IList<T>`, but with easier access to overriding implementation, see [Collection<T> versus List<T> what should you use on your interfaces?](https://stackoverflow.com/questions/271710/collectiont-versus-listt-what-should-you-use-on-your-interfaces) for the big differences between these two) `ObservableCollection<T>`, or collections that are not lists, like `Dictionary<T, U>` and `HashSet<T>`. For more info on any of these, look up the MSDN documentation on the class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:51:59.800

首先，您不必在这些接口之间进行实际选择，如果有必要，您可以实现所有三个接口。其次，实现 IEnumerable 不需要您公开基础列表。您可以只实现使用基础列表的 Enumerator 的方法。

在性能方面，我怀疑会有很大的影响，专注于你在功能上需要的东西。唯一确定的方法是测量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:50:48.677

性能不太可能取决于实现了哪些接口。这取决于处理器必须运行多少指令才能实现某个目标。如果您实现 IEnumerable 并覆盖 List，您最终可能会编写 Add/Remove/this[] 方法，这些方法只是将调用传播到 List，这会增加性能开销。因此，虽然我没有进行任何测量，但继承方法可能会快一点。

然而，这些细节通常只对需要节省所有可能的 CPU 周期的实时应用程序很重要。Eric Lippert 有一篇关于关注此类细节的精彩文章：http: [//blogs.msdn.com/b/ericlippert/archive/2003/10/17/53237.aspx](http://blogs.msdn.com/b/ericlippert/archive/2003/10/17/53237.aspx)。通常，您可能会更好地使用更适合您的应用程序的业务逻辑和架构的方法，而不是性能细节。

# vim - 将 vim 的强大功能放入 WM：模态窗口管理？

> ID：13157125
> 
> 赞同：7
> 
> 时间：2012-10-31T11:43:08.027
> 
> 标签：vim, window, window-managers

我是 Vim 的忠实拥护者，我在很大程度上坚持极其高效的模态编辑风格。在对 Vim 有一些经验之后，我决定进入其他分享其高效/快速键盘使用理念的软件。这自然导致我使用[平铺窗口管理器](http://en.wikipedia.org/wiki/Tiling_window_manager)，它允许使用键盘快捷键有效地管理窗口空间、工作区/标签、多个屏幕等。

似乎绝大多数 TWM 用户都使用 Vim，所以我想知道为什么没有类似 Vim 的窗口管理器？我的意思是，与其使用一些笨拙的修饰符来管理窗口，不如使用一种特定的模式，您必须输入一个特定的模式，从该模式中所有的窗口管理都只需一个按键即可。

这样，您可以通过进入`wm`模式来完成所有操作，用单次击键击中所有操作，然后退出`wm`。这种窗口管理风格是否存在，如果不存在，那为什么不呢？

# css - 在 SSRS 中设置默认虚拟目录列表样式的最佳方法是什么？

> ID：13157130
> 
> 赞同：0
> 
> 时间：2012-10-31T11:43:31.363
> 
> 标签：css, reporting-services, virtual-directory, reportserver

我安装了带有自定义安全子层的 SSRS 2008 R2。当通过 /ReportServer url 登录到 SSRS 的客户端区域时，SSRS 返回一个基本的虚拟目录列表，如下所示：

![SSRS 虚拟目录列表](../Images/d9efcd92ed52f62468b36ee0512cbc19.png) 显然，对于客户来说，这看起来很垃圾，但我目前不知道如何对其进行改进并将我自己的品牌和样式应用于它。如何添加页眉和页脚图像、其他标准导航、CSS 等，使其看起来像我们的公司网站？

收到建议，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:47:35.447

实际的服务器页面并不意味着要更改...您想去`http://yourURL/Reports`更改实际的报告管理器。报表管理器有一个可以修改的 CSS 文件。

报告管理器样式表可在`C:\Program Files\Microsoft SQL Server\MSSQL.3\Reporting Services\ReportManager\Styles`

# android - android actionbar oncreateoptionsmenu 未调用

> ID：13157131
> 
> 赞同：3
> 
> 时间：2012-10-31T11:43:34.757
> 
> 标签：android, android-actionbar

在我的应用程序中，我可以看到操作栏，但看不到设置项，因为它从不调用 onCreateOptionsMenu。

对于目标 sdk 16 的应用程序，它由一个选项卡组成，每个选项卡都是一个片段。在 Fragment 类上，在 onCreate() 期间，我调用了 setHasOptionsMenu(true)。主题是 Theme.Holo.Light。如果我在模拟器（Android 4.0）上运行应用程序并按下硬件菜单项，它会调用该方法，但它会向我显示类似于 Android 2.3 菜单的菜单，而不是在操作栏中！

我不认为问题出在 sdk 版本上，因为 actionbar 是可见的！任何想法？我可以检查什么来找到错误？

非常感谢您的每一次帮助！我最好的问候曼努埃拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T09:09:14.383

我遇到了同样的问题并通过这种方式解决了

清单.xml

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" > 
```

删除 android:theme="@android:style/Theme.NoTitleBar"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:48:52.610

这是正常的行为。系统会根据运行的硬件进行自我调整。

如果设备没有硬件按钮，它会显示为操作栏中的下拉菜单。如果设备确实有一个硬件按钮，它会显示为从菜单按钮附近升起。

**编辑**

如果菜单在操作栏上，它只创建一次（因为菜单停留在屏幕上，不会像硬件按键手机那样消失），所以还有另一个回调，我认为它是 onPrepareOptionsMenu 或类似的东西，称为在菜单显示在屏幕上之前。

# javascript - 如何通过 getElementsByName 访问多个文本框

> ID：13157132
> 
> 赞同：0
> 
> 时间：2012-10-31T11:43:39.383
> 
> 标签：javascript

我在html中编写了以下代码：

```
<input type="text" id="id_1" name="text_1">
<input type="text" id="id_2" name="text_2">
<input type="text" id="id_3" name="text_3"> 
```

在这里，我必须在 id 以“id”开头的 javascript 函数的数组中获取所有文本框。所以，我可以得到一个数组中的两个文本框。

如何获取 id 以“id”开头的所有文本框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:53:22.517

```
var nodeList = document.querySelector("input[name^='text_'") 
```

一个 nodeList 应该足够像一个数组来满足您的目的。

请注意，[支持`querySelector`](http://caniuse.com/#search=querySelector)可能不足以满足您的目的（您需要`getElementsByTagName`在循环中过滤结果）。

或者，您可以使用提供自己的选择器引擎的库。在 YUI 3 中，您可以：

```
var listOfYUIObjects = Y.all("input[name^='text_'"); 
```

Mootools、Prototype、jQuery 和许多其他库提供了类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:53:51.717

```
var ele = document.getElementsByTagName("input");
var matchingEle = [];
var eleName = '';

for (var i = 0; i < ele.length; ++i) {
 el = ele[i];
 eleName = el.getAttribute("name");
 if (eleName && eleName.indexOf("text_") == 0) {
     matchingEle.push(el);
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:01:31.737

```
var list = document.getElementsByTagName('input');  //Array containing all the input controls
var textBoxArray = [];                              //target Array
for (var i = 0; i < list.length; i++) 
{
    var node = list[i];

    if (node.getAttribute('type') == 'text' &&  node.getAttribute("id").substring(0, 1) == "id") 
    {
     /*
          insert matching textboxes into target array
     */
      textBoxArray.push(node);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:11:20.563

您可以使用基于模式过滤元素列表的通用函数。如果您想在将来做类似的事情但对属性有不同的标准，这很有用。

[http://jsfiddle.net/3ZKkh/](http://jsfiddle.net/3ZKkh/)

```
function filter(elements, pattern) {
    var i, j, match, e, f = [];

    for (i = 0; i < elements.length; i += 1) {
        e = elements[i];
        match = true;

        for (j in pattern) {
            if (pattern.hasOwnProperty(j)) {
                if (!(j in e && pattern[j](e[j]))) {
                    match = false;
                    break;
                }
            }
        }

        if (match) {
            f.push(e);
        }
    }

    return f;
}

var pattern = {
    'type': function (t) {
        return t.toLowerCase() === 'text';
    },
    'name': function (t) {
        return t.toLowerCase().search('text') === 0;
    }
};

console.log(filter(document.getElementsByTagName("input"), pattern)); 
```

# java - 找不到 javax.serverlet.GenericServlet 的类文件

> ID：13157134
> 
> 赞同：0
> 
> 时间：2012-10-31T11:43:46.293
> 
> 标签：java, servlets, java-native-interface, hessian, javah

我已经在类->头文件中停留了几天！

我已经通过[http://netbeans.org/kb/docs/cnd/beginning-jni-linux.html](http://netbeans.org/kb/docs/cnd/beginning-jni-linux.html)和[http://ringlord.com/jni-howto.html](http://ringlord.com/jni-howto.html)在客户端上尝试了 jni 。它成功地从 JNI 的 (.cpp) 文件中返回“hello JNI C++”。这是我的步骤：

1.  创建本机函数并在 client.java
2.  在 Netbeans IDE 上清理并构建这个 client.java，然后生成一个 client.class 文件
3.  javah –jni [包].[类名]
4.  像第一个参考一样创建一个动态库 C++ 项目，并将 client.h 放入源文件，并将一些 hello 代码放入 (.cpp) 文件 --->**它可以工作！**

但是，我尝试在 servlet 端做同样的事情，但它不起作用

1.  Servlet.java->Servlet.class：好的！
2.  Servlet.class->Servlet.h：失败！！！ **错误：无法访问 javax.servlet.GenericServlet 类文件，找不到 javax.servlet.GenericServlet**

以下是我迄今为止找到并尝试过的解决方案，

*   检查包名

*   sudo gedit /etc/profile，sudo gedit .bashrc，sudo /etc/environment；在它们上添加 JAVA_HOME & CLASSPATH，并获取它们以更新，然后 echo $JAVA_HOME, echo $CLASSPATH 进行验证

*   [从http://www.jarfinder.com/index.php/java/info/javax.servlet.GenericServlet](http://www.jarfinder.com/index.php/java/info/javax.servlet.GenericServlet)下载 servlet-api-6.0.14.jar & servlet-api-5.0.16.jar ，并添加以上两个（ .jar) 通过 netbeans IDE->server->property->libraries->Add JAR

请告诉我如何解决这个问题，非常感谢！顺便说一句，我正在使用 hessianServlet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:50:13.987

NativeWrapper.java（你`javah`只在这个类上运行）

```
class NativeWrapper {
  // either
  static {
    System.loadLibrary("MyOpenCVNative");
  }
  // or
  public NativeWrapper() {
    System.loadLibrary("MyOpenCVNative");
  }
  public native void callNative();
} 
```

MyServlet.java

```
class MyServlet extends javax.servlet.GenericServlet {
  private NativeWrapper nativeWrapper = new NativeWrapper();

  public void someServletMethod() {
    nativeWrapper.callNative();
  }
} 
```

# ruby-on-rails - 检查是否在 ruby on rails 中启用了 javascript 和 cookie？

> ID：13157135
> 
> 赞同：5
> 
> 时间：2012-10-31T11:43:51.757
> 
> 标签：ruby-on-rails

我想检查是否在 Ruby on Rails 的页面加载时启用了 javascript 和 cookie。因此，如果有人试图打开它，网站应该会显示一条他无法继续进行的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:27:06.737

你可以使用`<noscript> ... </noscript>`标签。更多信息请看[这里](http://www.w3schools.com/tags/tag_noscript.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:46:40.120

如果你需要知道这个服务器端，你可以通过javascript设置一个cookie。如果 rails 无法读取它，则说明用户没有启用 cookie 或 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T21:02:57.637

该`<noscript>`标签似乎不适用于 chrome ScriptSafe 等脚本拦截器。对于这种情况，我找到了一种解决方法：创建一条被删除的警报消息，以防 javascript 运行良好。

这是 id="noscriptmessage" 的警报消息：

```
<div id="noscriptmessage" style="color:red">
   This site requires javascript enabled!
</div> 
```

如果 javascript 已启用且未被阻止，则以下脚本将删除该消息：

```
<script>
document.getElementById("noscriptmessage").innerHTML="";
</script> 
```

确保在消息之后找到脚本（例如，如果将脚本放在警告消息之前的标头中，它将不起作用）。

# c# - 读取 XmlArray 元素的属性

> ID：13157136
> 
> 赞同：0
> 
> 时间：2012-10-31T11:43:55.217
> 
> 标签：c#, .net, xml-serialization

我们如何读取 XML 数组元素的属性？下面的代码我用来读取一个 XML 数组元素的属性，它不起作用。请让我知道另一种解决方案，以阅读是否可用或我缺少什么。我看到了很多样品，但无法确定我遗漏了什么。

要读取的源 xml 是

```
 <RootElement>
  <devices AttNAme="attValue">
   <device>
     <sometag/>
   <device>
   <device>
      <sometag/>
    <device>
 </devices>
<RootElement> 
```

我使用的代码是

```
[XmlRoot("RootElement")]
public class RootElement
{
[XmlArrayItem("DeviceType", typeof(DeviceTypeSection))]
    [XmlArray("devices")]
    public DeviceTypesSection DeviceTypesInfo { get; set; }

 }

[XmlType("DeviceTypes")]
public class DeviceTypesSection : List<DeviceTypeSection>
{
    [XmlAttribute("AttNAme")]
    public string AttNAme{ get; set; }
}

..and so on 
```

谢谢，

# opencv - 训练后如何使用opencv flann::KMeansIndex量化新数据

> ID：13157139
> 
> 赞同：1
> 
> 时间：2012-10-31T11:43:58.363
> 
> 标签：opencv, indexing, hierarchy, k-means

我想使用 Opencv cv::flann::KmeansIndex 来构建一个分层的 k-means 树来进行聚类。做完之后

```
typedef cv::flann::L2<float> Distance;
int featureNum =1000000;
int dim =2;
float *data = new float[featureNum*dim]; 
for(int i=0;i<1000000;++i)
{   
    data[i*2]=(float)(rand()%255);
    data[i*2+1]=(float)(rand()%255);
}

cvflann::Matrix<Distance::ElementType> features(data,featureNum,dim);
float *center = new float[10000*2];
flann::Matrix<float> centers(center,10000,2);
cvflann::KMeansIndexParams indexParams(10,1);
int n = cvflann::hierarchicalClustering<Distance>(features,centers,indexParams);
cout<<n<<endl; 
```

2D 点被聚类为 10^4 个类别。

但是如果一个新的数据来了，我怎么知道它属于哪个类别呢？我认为 cv::flann::KmeansIndex 可能会有所帮助。

在这样做之后：

```
KMeansIndex<Distance> kmeans(features, indexParam, d);
kmeans.buildIndex(); 
```

索引已建立。

但

如何使用 KmeansIndex 量化新数据点？

# c# - 在 Windows 8 C# 中更新 UI

> ID：13157141
> 
> 赞同：0
> 
> 时间：2012-10-31T11:44:05.100
> 
> 标签：c#, xaml, data-binding, windows-8

我有一个名为 AllPageView 的页面，它有一个 GridView。GridView 的数据模板如下

```
<GridView.ItemTemplate>
     <DataTemplate>
          <Canvas Width="{Binding TemplateWidth}" Height="{Binding TemplateHeight}">
              <Canvas.Background>
                  <ImageBrush ImageSource="{Binding PageBackground}"/>
               </Canvas.Background>
                <Image Height="{Binding TemplateHeight}" Width="{Binding TemplateWidth}" Source="{Binding Page}" Stretch="Uniform" Opacity="1" CacheMode="BitmapCache" />

                   <StackPanel x:Name="EditDeleteStackPanel" Width="{Binding TemplateWidth}" Height="{Binding TemplateHeight}" Opacity="0.95">
                       <Button x:Name="NoteDelete"  HorizontalAlignment="Right"   VerticalAlignment="Top" Foreground="{x:Null}" Tapped="NoteDelete_Tapped" MinWidth="50" MinHeight="50" Margin="0,0,10,0" BorderBrush="{x:Null}" >
                           <Button.Background>
                               <ImageBrush ImageSource="{Binding Delete}"/>
                           </Button.Background>
                       </Button>
                       <Button x:Name="NoteEdit"  HorizontalAlignment="Right"   VerticalAlignment="Top"   FontFamily="Segoe Script" FontSize="24" BorderBrush="{x:Null}" Tapped="NoteEdit_Tapped" Foreground="{x:Null}" MinWidth="50" MinHeight="50" Margin="0,0,10,0">
                           <Button.Background>
                               <ImageBrush ImageSource="{Binding Edit}"/>
                           </Button.Background>
                       </Button>
                  </StackPanel>
           </Canvas>
       </DataTemplate>
</GridView.ItemTemplate> 
```

Image 的高度和宽度分别绑定到类`TemplateHeight`和`TemplateWidth`类`Page_Collection`。我有一个更好的和二传手`TemplateHeight`and `TemplateWidth`。

```
public static int TemplateWidth
{
    get { return m_templateWidth; }
    set 
    { 
        m_templateWidth = value;                
    }
} 
```

问题是，我现在需要从名为`General`.
切换切换开关时，我需要更改图像的大小。像这样

```
private void OnCompactCategoryToggled(object sender, RoutedEventArgs e)
{
    if (compactCateg.IsOn == true)
    {
        Page_Collection.TemplateHeight = 100;
        Page_Collection.TemplateWidth = 350;
    }
    else
    {
        Page_Collection.TemplateHeight = 200;
        Page_Collection.TemplateWidth = 700;
    }
} 
```

虽然`AllPageView`页面绑定到`Page_Collection`，但值不会更新，因此图像大小是相同的。`Genera`l 是`Flyout`中的一个`SettingsPane`。

我对 Windows 8 非常陌生，这是我的第一次`DataBinding`。有人可以告诉我哪里出错了或者我错过了什么吗？

**编辑**

这是 for 背后的代码`AllPageView`。我调用`Load_PageCollection`类的构造函数

```
public async void Load_PageCollection()
{
    m_pageConfig = new PageConfig();
    Page_Collection[] tmppage = await m_pageConfig.Read_FromJSONFile(App.PAGECONFIG);
    List<Page_Collection> tmp;
    if (tmppage != null)
    {
        for (int i = 0; i < tmppage.Length; i++)
        {
            tmppage[i].UpdateCompletionStatus();
        }
        tmp = tmppage.ToList();
        ObservableCollection<Page_Collection> NoteCol = new ObservableCollection<Page_Collection>(tmp.ToList<Page_Collection>());
        PageCollection = NoteCol;
        PageLV.DataContext = PageCollection;
        m_pageManager.InitilizeWithFileLoc(PageCollection.ToArray());
    }
    else
    {
        PageCollection = new ObservableCollection<Page_Collection>();
        PageLV.DataContext = PageCollection;// PageLV is the grid view. The gridview, the image and a stackpanel.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:49:32.707

更新代码后编辑。

您需要将模板属性移动到支持 INotifyPropertyChanged 的​​单独类中，然后从每个 PageCollection 实例中引用此类...。

```
public class PageCollectionTemplate : INotifyPropertyChanged {

   private static readonly void m_Instance=new PageCollectionTemplate();

   private int m_templateWidth;

   public static PageCollectionTemplate Instance {
     get { return m_Instance; }
   }

   public  int TemplateWidth {
        get { return m_templateWidth; }

        set 
        { 
            if (m_templateWidth == value) return;
            m_templateWidth = value;                
            OnPropertyChanged("TemplateWidth");
        }
    }
    // Do same for template height...

   protected void OnPropertyChanged(string propertyName) {
     var handler=PropertyChanged;
     if (handler!=null) handler(this,new PropertyChangedEventArgs(propertyName));
  }

  public event PropertyChangedEventHandler PropertyChanged;

} 
```

更新，我之前错过了这一点，在你的页面集合类中

```
public PageCollectionTemplate Tempate { 
    get { return PageCollectionTemplate.Instance; }
} 
```

然后将您的绑定更新为`{Binding Template.TemplateWidth}`.

您可以通过将绑定源设置为单例实例来实现其他实现，例如：

```
{Binding TemplateWidth,Source={x:Static w:PageCollectionTemplate.Instance} 
```

但是您需要为`w`

**不要试图实现以下内容，因为 notify 属性更改事件不会触发！**

```
public int TemplateWidth {
   get { return PageCollectionTemplate.Instance.TemplateWidth; }
   set { PageCollectionTemplate.Instance.TemplateWidth=value; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:49:17.340

包含 TemplateWidth 定义的类需要实现 INotifyPropertyChanged，并且 TemplateWidth 的 setter 需要引发 PropertyChanged 事件。

```
public int TemplateWidth
{
    get { return m_templateWidth; }

    set 
    { 
        m_templateWidth = value;    
        if (PropertyChanged!=null)
        {
             PropertyChanged(this, new PropertyChangedEventArgs("TemplateWidth"));
        }            
    }
} 
```

使用 Prism 或 SimpleMVVM 之类的框架可以简化此类事物的编码，也可以让您摆脱对“TemplateWidth”等常量的依赖。

# objective-c - UITableViewCell 的最大高度是多少？

> ID：13157146
> 
> 赞同：3
> 
> 时间：2012-10-31T11:44:12.340
> 
> 标签：objective-c, ios, xcode, uitableview

**原来的**

我目前正在开发一个应用程序，用户可以在其中将 UITextView 中的字体大小调整为 50pt。就目前而言，他们还可以使用任意数量的字符编辑此 UITextView 中的文本（我的老板希望限制任何类型的规定性行为）。UITextView 然后动态地垂直调整大小以适应文本量。一切都很好。但是，一旦这个 UITextView 的高度超过了一定的大小，任何后续字符都将被添加但将从视图中隐藏，除非我允许 UITextView 可滚动。

我不得不补充一点，这是一个边缘案例。但是，由于该应用程序鼓励这种行为，因此有时可能会遇到此限制。

我是否认为 UITextView 的高度实际上是有限制的？还是这个问题可能是其他问题？

**编辑**

好吧，也许我误解了我自己的情况。我没有考虑到 textView 位于 tableViewCell 中的事实，而我实际上正在做的是随着 textView 大小的增加而调整单元格的大小。那么 tableViewCell 的高度有限制吗？

**回答我的问题**

感谢@jere 和@A-Live 的回答，他们帮助很大。我知道感觉自己像个白痴。

A-Live 指出了最大浮点值，这让我突然意识到我犯了一个如此明显和公然的错误。

为了适当地调整 textView 的大小，使用约束建立了 CGSize。为了确保高度可以达到它想要的高度，一个假定无法达到的高数字被用于高度约束（1000）。您可以猜到，1000 不足以达到此目的，因此 textView 停止了。我想这就是为什么提供代码很重要的原因。

```
CGSize textSize = [textView.text sizeWithFont:textView.font constrainedToSize:CGSizeMake(textView.frame.size.width - PADDING * 2, 1000.0f) lineBreakMode:UILineBreakModeWordWrap]; 
```

更新问题的最准确答案是@jere，因为已经向我指出了这一点，我将不得不防止单元格大小达到“2009”这个神奇的数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:42:47.577

请注意，如果您只想为某些单元格而不是所有单元格设置高度，则必须使用委托方法 `- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`并在那里返回您想要的行高度。

您也可以使用该`rowHeight`属性，但这适用于整个表格视图。

现在这是[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)中关于委托方法的一个有趣部分：

> 重要提示：由于底层实现细节，您不应返回大于 2009 的值。

所以我想这一定是最大值或其他东西。如果你的单元格超过 200 或 300 像素，那将是有点疯狂......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:21:49.037

UITextView 类没有最大长度属性，因此您可以在 TextView 中输入需要显示的任意数量的字符。

# google-maps - Google Maps KMZ 文件无法在 IE8 和 IE7 中呈现

> ID：13157149
> 
> 赞同：0
> 
> 时间：2012-10-31T11:44:24.013
> 
> 标签：google-maps, internet-explorer-8, internet-explorer-7, kml, kmz

我有一个带有地图的网络应用程序。我添加了一个不错的自定义地图控件来打开和关闭地图上的不同图层。目前只有两层，并且在大多数浏览器中都运行良好。

IE8+7 除外。打开时，地图上不显示任何图层。据我所知，地图正在加载 kmz/kml 文件（当 preserveViewport 设置为 false 时，地图会移动到正确的位置），但它们只是没有出现。一层包含折线，另一层包含标记。我使用的代码如下：

```
function someFunction() {
    //code to initialise map etc goes here...
    var layers = [];

    //Create 1st layer
    var exchangeslayer = new google.maps.KmlLayer('http://link.to.file/exchanges.kmz'
        suppressInfoWindows: true,
        preserveViewport: true
    });
    layers.push({name: "Exchanges", layer: exchangeslayer});

    //Code to create second layer
    var nyclayer = new google.maps.KmlLayer('http://www.nyc.gov/html/dot/downloads/misc/cityracks.kml'
        suppressInfoWindows: true,
        preserveViewport: false
    });
    layers.push({name: "NY City Tracks", layer: nyclayer});

    addCustomLayerControls(layers);
}

function addCustomLayerControls(layers) {
    //there is code here that would generate the divs for the custom map control
    var container; //container is a div element created via javascript

    for (var i = 0; i < layers.length; i++) {
        this.addLayerLabelToContainer(layers[i], container);
    }

    //some more code
}

function addLayerLabelToContainer(layer, container) {
    var map; //Assume I get a reference to the map

    //some code here to make pretty labels for the map controls...
    var layerLabel; // layerLabel is a div element created via javascript

    google.maps.event.addDomListener(layerLabel, 'click', function() {
        if(layer.layer.map == null) {
            layer.layer.setMap(map);
        } else {
            layer.layer.setMap(null);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:27:50.063

所以事实证明我的问题与CSS有关。我的样式表之一适用`max-width: 100%`于所有 img 标签。这是在玩地图标记/折线。

现在我看到它很明显，但是当您认为问题与 javascript 有关时，它就不那么明显了。因此，我将把这个答案留给与我犯同样错误的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:06:03.817

如果您像这样修改*addLayerLabelToContainer* () ，那么它可以在 IE 中按预期工作。验证它在 IE 8 和 9 中正确加载 KMZ。

```
function addLayerLabelToContainer(layer, container) {
    // var map; //Assume I get a reference to the map
    //some code here to make pretty labels for the map controls...
    var layerLabel; // layerLabel is a div element created via javascript                       

    if(layer.layer.map == null) {               
        layer.layer.setMap(map);
    } else {
        layer.layer.setMap(null);
    }
} 
```

不需要调用 addDomListener()。还要注意[API 语法](https://developers.google.com/maps/documentation/javascript/events#DomEvents)：

```
addDomListener(instance:Object, eventName:string, handler:Function) 
```

*还修复了someFunction*中的语法错误，如下所示：

```
function someFunction() {
    // var map; //assume map is initialised, I've just removed that code
    var layers = [];

    // see https://developers.google.com/maps/documentation/javascript/layers
    //Create 1st layer
    var exchangeslayer = new google.maps.KmlLayer(
    'http://kml-samples.googlecode.com/svn/trunk/kml/kmz/simple/big.kmz',
        { suppressInfoWindows: true, preserveViewport: true
        });
    layers.push( {name: "Exchanges", layer: exchangeslayer} );

    // ...
    addCustomLayerControls(layers); 
} 
```

# c - struct sockadr_in 不应该适用于 IPv4 和 IPv6 吗？

> ID：13157151
> 
> 赞同：11
> 
> 时间：2012-10-31T11:44:28.870
> 
> 标签：c, linux, sockets

特别是 sin_addr 似乎位于 IPv4 和 IPv6 套接字寻址的不同内存位置。这导致奇怪：

```
#include <stdio.h>                                                                               
#include <netinet/in.h>                                                                          

int main(int argc, char ** argv) {                                                               
  struct sockaddr_in sa;                                                                         
  printf("sin_addr in sockaddr_in  = %p\n", &sa.sin_addr);                                       
  printf("sin_addr in sockaddr_in6 = %p\n", &((struct sockaddr_in6*)&sa)->sin6_addr);            
}; 
```

输出：

```
sin_addr in sockaddr_in  = 0x7fffa26102b4
sin_addr in sockaddr_in6 = 0x7fffa26102b8 
```

为什么这两个值不一样？

由于 this 指向相同的数据（要连接的地址），因此应该位于相同的地址。否则，您应该如何使用您不知道是 IPv4 或 IPv6 的 sockaddr_in 调用 inet_ntop ？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-31T21:46:13.507

> 为什么这两个值不一样？

`sockaddr_in`并且`sockaddr_in6`是用于不同地址族（分别为 IPv4 和 IPv6）的不同结构。它们不需要以任何方式相互兼容，除了一个 - 第一个字段必须是一个 16 位整数来保存地址族。 `sockaddr_in`始终将该字段设置为`AF_INET`，并且`sockaddr_in6`始终将该字段设置为`AF_INET6`。通过以这种方式标准化 family 字段，任何`sockaddr`基于 的 API 都可以访问该字段并知道如何根据需要解释其余的结构数据。这也是为什么`sockaddr`基于 - 的 API 通常也有一个`int`大小值作为输入/输出，因为`sockaddr_in`和`sockaddr_in6`是不同的字节大小，因此 API 需要能够验证您传递的任何缓冲区的大小。

> 由于 this 指向相同的数据（要连接的地址），因此应该位于相同的地址。

不，不应该。结构中地址字段的位置特定于结构所属的地址族的类型。没有要求`sockaddr_in`并且`sockaddr_in6`应该将它们的地址存储在完全相同的偏移量处。

> 否则，您应该如何使用您不知道是 IPv4 或 IPv6 的 sockaddr_in 调用 inet_ntop ？

`sockaddr_in`只能与 IPv4 一起使用，不能与其他任何东西`sockaddr_in6`一起使用，并且只能与 IPv6 和其他任何东西一起使用。如果你有 a`sockaddr_in`那么你隐含地知道你有一个 IPv4 地址，如果你有 a`sockaddr_in6`那么你隐含地知道你有一个 IPv6 地址。您必须指定该信息，`inet_ntop()`以便它知道如何解释您传递给它的数据：

```
struct sockaddr_in sa;
inet_ntop(AF_INET, &(sa.sin_addr), ...); 
```

.

```
struct sockaddr_in6 sa;
inet_ntop(AF_INET6, &(sa.sin6_addr), ...); 
```

为了帮助您编写与家庭无关的代码，您应该尽可能使用`sockaddr_storage`或`sockaddr_in`直接`sockaddr_in6`使用。 `sockaddr_storage`大小足以容纳`sockaddr_in`和`sockaddr_in6`结构。由于两个结构都以相同的偏移量和大小定义了一个族字段，`sockaddr_storage`因此可以与任何对`sockaddr*`指针（`connect()`、`accept()`、`bind()`、`getsockname()`、`getpeername()`等）进行操作的 API 一起使用。

但是，`inet_ntop()`不属于该类别，因此您必须`sockaddr_storage`在使用时手动拆开 a `inet_ntop()`，例如：

```
struct sockaddr_storage sa;

switch (sa.ss_family)
{
case AF_INET:
    inet_ntop(AF_INET, &(((sockaddr_in*)&sa)->sin_addr), ...);
    break;
case AF_INET6:
    inet_ntop(AF_INET6, &(((sockaddr_in6*)&sa)->sin6_addr), ...);
    break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T11:50:28.710

不，对于 ipv6，您需要使用

```
in6_addr // is used to store the 128-bit network address 
```

和

```
sockaddr_in6 
```

详情可以参考[这里](http://uw714doc.sco.com/en/SDK_netapi/sockC.PortIPv4appIPv6.html)

要编写支持双栈的代码，即 ipv4 和 6，请使用[此](http://mirrors.bieringer.de/Linux+IPv6-HOWTO/chapter-section-using-api.html)

# jquery - 如果表单有类，jquery 验证插件添加自定义选项

> ID：13157153
> 
> 赞同：0
> 
> 时间：2012-10-31T11:44:32.737
> 
> 标签：jquery, jquery-validate

我如何将验证插件设置为在具有一类的表单上以不同的方式工作（添加选项忽略）`validate-hidden`

```
var theForms = $("form[method=post]:not(.noValidate)");
if (theForms.length){
    theForms.each(function(){
        var $dis = $(this); 
        validater = $dis.validate();        
        if($dis.hasClass("validate-hidden")){
            $dis.validate({ ignore: '' });
        }
    }); 
} 
```

我已经厌倦了这个，但它没有忽略选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:02:32.330

我能够解决这个问题，但使用 setDefaults 方法和顺序。

```
var theForms = $("form[method=post]:not(.noValidate)");
if (theForms.length){
    theForms.each(function(){
        var $dis = $(this); 
        if($dis.hasClass("validate-hidden")){
            jQuery.validator.setDefaults({ 
            ignore: ''
            });
        }
        validater = $dis.validate();        
    }); 
} 
```

# php - Moodle模块没有数据库

> ID：13157163
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:05.777
> 
> 标签：php, database, module, moodle

我想为 Moodle 2.0开发一个**不需要 database的****模块**。

 **当数据库中没有表时，我应该如何填写**install.xml文件？**

谢谢您的帮助。

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:56:28.883

如果您不需要数据库，那么您根本不需要`install.xml`文件。Moodle 仍然会很乐意安装没有插件的插件。

请记住，如果您确实想要数据库中的表，创建该文件的最佳方法是使用：

*站点管理*->*开发*-> *XMLDB 编辑器*

这为您提供了一个相对易于使用的 UI，并确保 Moodle 对您的 XML 感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:39:53.260

不要在插件中创建 db 文件夹。**

# c++ - 为什么 std::list.size() 不是恒定时间？

> ID：13157164
> 
> 赞同：17
> 
> 时间：2012-10-31T11:45:05.290
> 
> 标签：c++, performance, list, size

此代码运行了 0.012 秒：

```
 std::list<int> list;
 list.resize(100);
 int size;
 for(int i = 0 ; i < 10000; i++)
     size = list.size(); 
```

这个为 9.378 秒：

```
 std::list<int> list;
 list.resize(100000);
 int size;
 for(int i = 0 ; i < 10000; i++)
     size = list.size(); 
```

在我看来，有可能以这种方式实现 std::list，该大小将存储在一个私有变量中，但根据这个，每次我调用 size 时都会再次计算它。谁能解释为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T11:47:31.620

`size()`常数时间和常数时间之间存在冲突`list.splice`。委员会选择赞成`splice`。

当您在两个列表之间拼接节点时，您必须计算移动的节点以更新两个列表的大小。仅仅通过改变一些内部指针，这就消除了拼接节点的很多优势。

* * *

正如评论中所指出的，C++11 已经改变了这一点，放弃了 O(1) 用于一些罕见的（？）用途`splice`：

```
void splice(const_iterator position, list& x, const_iterator first, const_iterator last);
void splice(const_iterator position, list&& x, const_iterator first, const_iterator last); 
```

> *复杂性*：恒定时间 if `&x == this`; 否则，线性时间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T11:57:25.360

在`ISO/IEC 14882:2011`，§C.2.12，第 23 条：“容器库”：

> 更改： size() 成员函数的复杂性现在保持不变
> 
> 理由：缺乏对 size() 复杂性的规范导致不同的实现具有不一致的性能特征。
> 
> 对原始功能的影响：某些符合 C++ 2003 的容器实现可能不符合本国际标准中指定的 size() 要求。将诸如 std::list 之类的容器调整为更严格的要求可能需要不兼容的更改。

* * *

对于评论：

在 23.3.5.5 -“列表操作”中，再次`ISO/IEC 14882:2011`：

> list 提供三个拼接操作，破坏性地将元素从一个列表移动到另一个列表。如果 get_allocator() != x.get_allocator()，拼接操作的行为是未定义的。
> 
> void splice(const_iterator position, list& x);
> void splice(const_iterator position, list&& x);
> **要求**：&x != 这个。
> **效果**：在位置之前插入 x 的内容，x 变为空。指向 x 的移动元素的指针和引用现在引用那些相同的元素，但作为 *this 的成员。引用移动元素的迭代器将继续引用它们的元素，但它们现在表现为指向 *this 的迭代器，而不是指向 x 的迭代器。
> **复杂性**：恒定时间。
> 
> void splice(const_iterator position, list& x, const_iterator i);
> void splice(const_iterator position, list&& x, const_iterator i);
> **效果**：在位置之前插入列表 x 中 i 指向的元素，并从 x 中删除该元素。如果位置 == i 或位置 == ++i，则结果不变。指向 *i 的指针和引用继续引用同一个元素，但作为 *this 的成员。*i 的迭代器（包括 i 本身）继续引用同一个元素，但现在表现为 *this 的迭代器，而不是 x 的迭代器。
> **要求**：i 是 x 的有效可解引用迭代器。
> **复杂性**：恒定时间。
> 
> void splice(const_iterator position, list& x, const_iterator first, const_iterator last);
> void splice(const_iterator position, list&& x, const_iterator first, const_iterator last);
> **效果**：在位置之前插入范围 [first,last) 中的元素并从 x 中删除元素。 **要求**：[first, last) 是 x 中的有效范围。如果 position 是 [first,last) 范围内的迭代器，则结果未定义。指向 x 的移动元素的指针和引用现在引用那些相同的元素，但作为 *this 的成员。引用移动元素的迭代器将继续引用它们的元素，但它们现在表现为指向 *this 的迭代器，而不是指向 x 的迭代器。
> **复杂性**：如果 &x == this; 则为常数时间 否则，线性时间。

# windows-phone-7 - 从市场 WP7 获取图像

> ID：13157165
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:09.390
> 
> 标签：windows-phone-7, marketplace

我想做一个**最好的应用程序**列表。它只是一个带有标题和图像的列表。我看到`MarketplaceDetailTask();`谁拿了`marketPlaceId` `(marketplaceDetailTask.ContentIdentifier)`。

我的问题是，有没有办法知道这个 ID 来获取相应应用程序的图像 url？

我已经做了一些研究，但没有关于 API 或返回此 url 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:55:24.797

Windows Phone 中没有用于检索此类信息的内置 API。但是，您可以尝试直接查询 Zune 客户端使用的服务。该服务没有公开记录，但有一些博客文章解释了如何使用它。例如：

[http://brandonwatson.sys-con.com/node/1767886](http://brandonwatson.sys-con.com/node/1767886)

# machine-learning - SVM - 向量和点之间的混淆

> ID：13157167
> 
> 赞同：2
> 
> 时间：2012-10-31T11:45:21.933
> 
> 标签：machine-learning, theory, svm

为什么在支持向量机理论中，训练集中位于最大边距超平面边缘的点称为支持向量？它们是积分，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:24:06.203

在这种情况下，点和向量实际上[是一回事](http://en.wikipedia.org/wiki/Vector_space)。

给定某个固定的原点，空间中的每个点都可以用一个向量来描述，相反，每个向量都定义了空间中的一个点。

编辑（基于评论）：

选择超平面以便最好地将两个类分开。它仅取决于最接近超平面的向量 - 这些称为“支持”向量。[维基百科页面](http://en.wikipedia.org/wiki/Support_vector_machine)上的图片对此进行了分类。

# css - 在引导程序中更改背景颜色

> ID：13157170
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:23.513
> 
> 标签：css, twitter-bootstrap, boilerplate

只是一个快速...我正在尝试更改引导程序中某些背景的颜色。我已经从引导 css 中删除了主要背景颜色。所以我可以添加我自己的。我创建了一个包含内容的 div，我希望该背景与页面的其余部分颜色不同。因此将背景颜色分配给该 div。

但它仍然是白色的，即使我已经从引导程序中删除了默认背景颜色

这现在是引导程序的默认主体 css

```
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
} 
```

有任何想法吗？

这是我想说的一个例子。即使我添加了一个 id 它也没有出现

![在此处输入图像描述](../Images/787a5815827095586cf67ae6ca1f5eab.png)

认为我找到了问题，但不知道它们如何或为什么在这里....我的大部分样式表都在“其他”文件夹中？？？任何想法为什么或如何发生这种情况？ ![在此处输入图像描述](../Images/d24d8d47c8bb2933c68c8007abc4653d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:57:08.783

您确定正在加载 main.css 吗？它是否列在 Chrome 的“资源”选项卡中？如果是，那里有最新的页脚定义吗？您的屏幕截图表明没有应用任何页脚属性，而不仅仅是 BG 颜色。

由于检查器屏幕截图引用了您生产服务器上的 bootstrap.css 副本，我想知道您是否还加载了 main.css 文件的[此副本](http://iampaulb.com/css/main.css)。

# java - 在电子邮件中嵌入内联图像并通过 cid 引用它？

> ID：13157171
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:24.873
> 
> 标签：java, jakarta-mail, mime-types, mime-message

我正在使用带有 mime 消息的电子邮件发送内联图像。这是相同的简短代码。这工作正常。**我的问题是我没有将 MimeMessage 内容类型设置为多部分/相关（也没有将多部分子类型设置为相关），但我的代码工作正常并且我能够在预期位置获得内联图像。当我使用 cid 引用图像部分时，我是否真的应该关心将 Content-Type 设置为 multipart/related 或服务器会处理这个问题？**

```
 MimeMessage   msg = new MimeMessage(mailSession);
  MimeMultipart mpart = new MimeMultipart();
  MimeBodyPart bp = new MimeBodyPart();
  bp.setText("plain text and here is html image refering image part <img src="cid:Unique-ContentId" />", CHARSET_UTF_8, MESSAGE_HTML_CONTENT_TYPE);
  // add message body
  mpart.addBodyPart(bp);

 // adding inline image  part
  MimeBodyPart bodyPart1 = new MimeBodyPart();
  bodyPart1.setFileName("inline image");
  file1 = new File("image1");
  DataSource source1 = new FileDataSource(file);
  bodyPart1.setDataHandler(new DataHandler(source));
  bodyPart1.setDisposition(MimeBodyPart.INLINE);
  bodyPart1.setHeader("Content-ID", "Unique-ContentId");
  bodyPart1.setHeader("Content-Type", "image/jpeg");
  mpart.addBodyPart(bodyPart1);

  // At last setting multipart In MimeMessage
  msg.setContent(mpart); 
```

仅供参考，我的电子邮件客户端可以是 Outlook、lotusnotes、yahoo、gmail、thunderbird

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:53:31.933

这就是我们所说的“运气”。:-)

显然，您使用的电子邮件客户端在解释您发送的消息的方式上非常慷慨。电子邮件规范中没有任何内容表明他们应该以这种方式解释此类消息。

# java - 如何制作不被垃圾收集的对象？

> ID：13157172
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:28.867
> 
> 标签：java, garbage-collection

> **可能重复：**
> [如何防止对象被垃圾收集？](https://stackoverflow.com/questions/1329926/how-to-prevent-an-object-from-getting-garbage-collected)
> [在java中，什么时候对象变得不可访问？](https://stackoverflow.com/questions/5667705/in-java-when-does-an-object-become-unreachable)

我在一次采访中被问到这个问题：

> 我应该对一个对象做些什么，以使垃圾收集器无法访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:47:57.473

据我所知，垃圾收集器没有任何对象“无法访问”。然而，GC 只会收集没有更多引用指向它们的项目。

因此，为了“保护它们”，要么将它们声明为 final（常量），要么确保始终有一个指向变量的引用，例如通过在主操作循环中包含引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:50:46.727

GC 将管理堆中的任何对象。您可以使对象始终可访问并且不被 GC 收集，但您不能使对象超出 GC 的范围。

使数据无法访问的唯一方法是将其从本机内存中的堆中取出，将其写入磁盘，或将其传递给另一个进程。

顺便说一句，即使在另一个进程中代理的分布式 RMI 对象也可以在不再使用时被 GC 清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:47:49.210

使其包含对自身的静态引用（例如单例模式）。

# asp.net - 重新打开一个花式盒子

> ID：13157179
> 
> 赞同：0
> 
> 时间：2012-10-31T11:45:50.810
> 
> 标签：asp.net, fancybox

这是我的场景：我有一个页面，其中有一个以某人的名字命名的链接，当您单击它时，它会打开一个花式框，您可以在文本框中输入一条消息。如果用户没有登录，我关闭fancybox，并将后面的页面重定向到我的登录/注册页面。

我需要的是，在登录或注册后，用户被重定向回页面并打开了幻想框，并且用户之前输入的文本需要仍然存在。

有人对如何做有建议吗？我考虑过 Sessions 来保留文本，但我认为这不是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:55:48.147

使用 cookie 做同样的事情怎么样？保存到 cookie 以防您将他重定向到登录页面，并在他被重定向回来时将其加载回来。

# jsf - JSF - 在页面刷新时更新 JSF 数据表

> ID：13157183
> 
> 赞同：2
> 
> 时间：2012-10-31T11:46:15.887
> 
> 标签：jsf, jpa-2.0

我的 JSF 页面上有一个数据表，多亏了 BalusC 和 Odelya，它会在页面加载时动态填充。

但是现在当我尝试刷新 JSF 页面以从数据库中检索更新的数据时，我没有在 Datatable 中获取更新的数据。

我已经浏览了以下链接，但无法理解其中的细微差别..！

[页面加载时 JSF 数据表刷新](https://stackoverflow.com/questions/2276858/jsf-datatable-refresh-on-page-load)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:18:41.710

您的 bean 范围是否配置为 Session？

您是否尝试将其范围更改为请求？

不要忘记在填充结果集后关闭连接，它必须是一个[CachedRowSet](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html)

这是 Core JavaServer Faces 书中的一个示例：

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.annotation.Resource;
import javax.faces.bean.ManagedBean;
import javax.enterprise.context.RequestScoped;
import javax.sql.DataSource;
import javax.sql.rowset.CachedRowSet;

@ManagedBean
@RequestScoped
public class CustomerBean {
    @Resource(name = "jdbc/mydb")
    private DataSource ds;

    public ResultSet getAll() throws SQLException {
        Connection conn = ds.getConnection();
        try {
            Statement stmt = conn.createStatement();
            ResultSet result = stmt.executeQuery("SELECT * FROM Customers");
            CachedRowSet crs = new com.sun.rowset.CachedRowSetImpl();
            crs.populate(result);
            return crs;
        } finally {
            conn.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:38:15.523

```
'@RequestScoped' should be added to refresh your bean File to get the new data. 
```

# node.js - node-gyp 在关于不兼容类型的基本 Buffer::Length 操作上崩溃

> ID：13157195
> 
> 赞同：2
> 
> 时间：2012-10-31T11:46:44.867
> 
> 标签：node.js, buffer, v8, node-gyp

我从 NodeJS 核心（加密）中获取了一段简单的代码：

```
ASSERT_IS_BUFFER(args[0]);
ssize_t klen = Buffer::Length(args[0]); 
```

但是，`node-gyp`在我自己的本机扩展中编译它时，我收到以下错误：

```
../deps/v8/include/v8.h:202:5: error: assigning to 'v8::Object *volatile' from incompatible type
      'v8::Value *'
    TYPE_CHECK(T, S);
    ^
../deps/v8/include/v8.h:145:37: note: expanded from macro 'TYPE_CHECK'
    *(static_cast<T* volatile*>(0)) = static_cast<S*>(0);      \
                                    ^
../src/openssljs.cc:300:33: note: in instantiation of function template specialization 'v8::Handle<v8::Object>::Handle<v8::Value>'
      requested here
                ssize_t klen = Buffer::Length(args[0]);
                                              ^ 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:08:32.747

您从一个版本的节点（例如来自 HEAD）中获取了这些行，但系统中的头文件属于其他版本的节点。

在旧版本`Buffer::Length`中接受`v8::Handle<v8::Object>`，而在较新版本中，它接受`v8::Handle<v8::Value>`与`args[0]`.

提交更改签名：[https ://github.com/joyent/node/commit/c8c638a84195e5571f4ece881375909e1f4b82a8](https://github.com/joyent/node/commit/c8c638a84195e5571f4ece881375909e1f4b82a8)

您可以更新安装在系统中的 node.js 或使用显式强制转换：`args[0].As<Object>()`

# java - 关于结果的选择

> ID：13157198
> 
> 赞同：0
> 
> 时间：2012-10-31T11:47:00.310
> 
> 标签：java, string, int

我有一个返回类型是字符串的方法下面是方法

```
public String getHwIdentifier(); 
```

现在我正在使用这种方法..

```
String s = till.getHwIdentifier();//return type of this method is string 
```

我想把它转换成这样的整数

```
Int i = till.getHwIdentifier(); 
```

请告知如何取整数意味着如何转换它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:49:31.850

从 Integer 类尝试 parseInt 。

```
Integer.parseInt(till.getHwIdentifier()); 
```

`NumberFormatException`但请注意，如果字符串不是有效的整数表示，它会抛出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:49:32.437

使用类的`parseInt(String s)`方法，`Integer`该方法`String`将其转换`int`为数字或抛出`NumberFormatException`如下：

```
int i = Integer.parseInt(till.getHwIdentifier()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:37:51.160

```
String s = till.getHwIdentifier();
int i = Integer.parseInt(s); 
```

Make sure that your string is in the form of an integer. If your string contains xyz then you will get a java.lang.NumberFormatException.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:51:09.833

`String`传递to的实例`Integer.valueOf(String s)`。所以在你的情况下：

```
Integer i = Integer.valueOf(till.getHwIdentifier); 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29 。](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:57:16.210

There is no Java type/class named `Int`. There's `int` type and it's encapsulating `Integer` class.

You can parse an integer in a `String` to the `int` value with `Integer.parseInt("1234");`, or get the `Integer` value with `Integer.valueOf("1234");`. But notice if the `String` doesn't represent an integer you'll get a `NumberFormatException`.

```
 String s = till.getHwIdentifier();//return type of this method is string;
    try
    {
      Integer a = Integer.valueOf(s);
      int b = Integer.parseInt(s);
    }
    catch (NumberFormatException e)
    {
      //...
    } 
```

* * *

Note: You could use `Integer a = Integer.decode(s);`, but `Integer c = Integer.valueOf(s);` is preferred as it won't create new objects if possible.

# code-generation - 在 xtext 项目中使用 xtend 生成代码

> ID：13157199
> 
> 赞同：0
> 
> 时间：2012-10-31T11:47:00.093
> 
> 标签：code-generation, xtext, generated-code, xtend

我正在处理 xtext 项目，我正在通过 .xtext 文件生成对象。我想将新属性添加到生成的对象之一。我在[http://christiandietrich.wordpress.com/2011/07/22/customizing-xtext-metamodel-inference-using-xtend2/](http://christiandietrich.wordpress.com/2011/07/22/customizing-xtext-metamodel-inference-using-xtend2/) 中看到以下代码在 ObjectValue 中生成一个临时变量，但我希望 temp 是 MyObject 类型.

怎么做？我在哪里可以读到它？

```
import org.eclipse.emf.codegen.ecore.genmodel.GenModelPackage
import org.eclipse.emf.common.util.BasicEMap$Entry
import org.eclipse.emf.ecore.EClass
import org.eclipse.emf.ecore.EPackage
import org.eclipse.emf.ecore.EcoreFactory
import org.eclipse.emf.ecore.EcorePackage
import org.eclipse.xtext.GeneratedMetamodel
import org.eclipse.xtext.xtext.ecoreInference.IXtext2EcorePostProcessor

class CodeGeneratorClass implements IXtext2EcorePostProcessor {

    override process(GeneratedMetamodel metamodel) {
        metamodel.EPackage.process
    }

    def process(EPackage p) {
        for (c : p.EClassifiers.filter(typeof(EClass))) {
            if (c.name == "ObjectValue") {
                c.handle
            }
        }
    }

    def handle (EClass c) {
    val attr = EcoreFactory::eINSTANCE.createEAttribute
    attr.name = "temp"
    attr.EType = EcorePackage::eINSTANCE.EString
    c.EStructuralFeatures += attr
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:33:41.410

第一：`MyObject`必须用 an`EClass`或 an来描述`EDataType`。一个普通的 Java 对象不会这样做。

如果`MyObject`是一个，`EDataType`那么您必须`EAttribute`在`handle`方法中添加一个。您的`handle`方法几乎是正确的，只有`EType`必须调整：

```
attr.EType = MyPackage::eINSTANCE.MyObject 
```

否则：如果`MyObject`是 an`EClass`那么您必须添加 an`EReference`而不是`EAttribute`. 这种情况的`handle`方法如下所示：

```
def handleReference(EClass c){
    val ref = EcoreFactory::eINSTANCE.createEReference
    ref.name = "temp"
    ref.EType = MyPackage::eINSTANCE.MyObject
    c.EStructuralFeatures += ref
} 
```

**编辑**

为了定义一个新的、最小的 EDataType 并将其连接到模型中，下面的代码片段应该可以工作：

```
def void process(GeneratedMetamodel it){
     // create new dynamic EDataType
     val dataType = EcoreFactory::eINSTANCE.createEDataType => [
        name = 'MyObject'
        instanceTypeName = 'java.package.with.MyObject' 
    ]

    // register new EDataType in own model package
    EPackage.EClassifiers += dataType

    // attach as EAttribute to appropriate EClasses
    EPackage.EClassifiers.filter(typeof(EClass)).filter[name == 'ObjectValue'].forEach[
        EStructuralFeatures += EcoreFactory::eINSTANCE.createEAttribute => [
            name = "temp"
            EType = dataType
        ]
    ]
} 
```

# c++ - c++ - 错误：从'testGetter * const'类型的表达式中对'const testGetter *＆'类型的引用的初始化无效

> ID：13157201
> 
> 赞同：0
> 
> 时间：2012-10-31T11:47:03.703
> 
> 标签：c++, eclipse, g++, mingw

我知道它已经出现了无数次，但这次是自动生成的代码：

```
class testGetter{
    testGetter * ptr; // wrote this
public:
// this is autogenerated by eclipse
    const testGetter*& getPtr() const {
        return ptr;
    }

    void setPtr(const testGetter*& ptr) {
        this->ptr = ptr;
    }
}; 
```

我在 Windows 7 mingw - g++ 版本***4.7.0***

那么它是 eclipse (juno) 模板中的错误吗？

编辑：编译器调用：

```
g++ -O0 -g3 -Wall -c -fmessage-length=0 -fpermissive -o Visitor.o "..\\Visitor.cpp" 
```

**编辑 2013.06.12**：我应该补充说我在收到反馈后[报告了这件事](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393297)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:27:56.213

```
 const testGetter*& 
```

这表示对指向 const 的非常量指针的引用`testGetter`。您不能从 a 转换`testGetter*`为该类型，因为这会破坏以下示例中的 const 正确性：

```
const testGetter tmp;
testGetter t;
t.getPtr() = &tmp;     // !!! 
```

如果允许转换，则上面的代码将编译，并且在标有 !!! 的行之后 存储在内部的指针`t`（类型为`testGetter*`）将指向 a `const testGetter`，从而破坏代码中的 const 正确性。

您可能只想返回一个指针，而不是对指针的引用：

```
const testGetter* getPtr() const 
```

或者添加一个额外的`const`以保证 const 正确性：

```
const testGetter *const& getPtr() const 
```

在任何一种情况下，代码都确保您不会将 internal 设置`testGetter*`为指向`const testGetter`.

如果 getter 是由工具 (Eclipse) 自动生成的，则该工具存在错误或过于简单而无法生成正确的代码。您将需要手动创建 getter 或修复生成器的输出。

* * *

Sidenote: Given a choice of Eclipse CDT or g++, I'd bet that the bug is in eclipse more often than not.

# python - django url如何指定2个或更多字符串

> ID：13157204
> 
> 赞同：2
> 
> 时间：2012-10-31T11:47:11.357
> 
> 标签：python, regex, django, django-urls

我想匹配以下网址

```
 url(r'^home/Physician|Vendor/$, 'ViewerLog', name="monitor_viewerLog"), 
```

如何匹配医师或供应商？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:05:14.713

要匹配医师或供应商，请使用括号。

```
url(r'^home/(Physician|Vendor)/$, 'ViewerLog', name="monitor_viewerLog"), 
```

这将使用匹配的值作为参数调用您的视图。如果您不想捕获匹配的值，请使用`(?:...)`.

```
url(r'^home/(?:Physician|Vendor)/$, 'ViewerLog', name="monitor_viewerLog"), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:49:46.510

如果要捕获匹配的值，可以命名返回的参数：

```
url(r'^home/(?P<guy>Physician|Vendor)/$', 'ViewerLog', name="monitor_viewerLog"), 
```

# php - 如何按数组的子值计数进行分组？

> ID：13157207
> 
> 赞同：0
> 
> 时间：2012-10-31T11:47:21.987
> 
> 标签：php, arrays, sorting, multidimensional-array, counting

我一直在尝试所有我能想到的`array_count_values`组合。`array_map`我希望你能给我指路。

这是一个示例数组：

```
$arr = array(
            array('name' => 'foo','score' => 1),
            array('name' => 'foo','score' => 2),
            array('name' => 'bar','score' => 1)
        ); 
```

我想将所有具有相同名称的子值的分数结合起来。类似于`GROUP BY name`MySQL 中的东西。

```
Array
(
    [0] => Array
        (
            [name] => foo
            [score] => 3
        )

    [1] => Array
        (
            [name] => bar
            [score] => 1
        )
) 
```

我知道还有其他问题可以对多维数组进行排序，但我无法找到一个对其中一个子值求和的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:55:21.910

您可以使用`array_reduce`

```
$arr = array(
        array('name' => 'foo','score' => 1),
        array('name' => 'foo','score' => 2),
        array('name' => 'bar','score' => 1));

$array = array_reduce($arr, function ($a, $b) {
    isset($a[$b['name']]['score']) ? $a[$b['name']]['score'] += $b['score'] : $a[$b['name']] = $b;
    return $a;
});

var_dump($array); 
```

输出

```
array
  'foo' => 
    array
      'name' => string 'foo' (length=3)
      'score' => int 3
  'bar' => 
    array
      'name' => string 'bar' (length=3)
      'score' => int 1 
```

# python - 改变 xpnative 主题中 ttk.Progressbar 元素的颜色 - python

> ID：13157214
> 
> 赞同：2
> 
> 时间：2012-10-31T11:47:41.657
> 
> 标签：python, progress-bar, tkinter, tk, ttk

我正在使用 python 2.7 和 TK 制作一个 gui，它可以访问文本文件并使用其中的数据来做很多事情，但这里相关的是发送 gchat 消息。目前，我一切正常，我需要一些帮助的一点是，当我调用我的模块发送消息时，消息发送完美，虽然我希望用户知道正在发生的过程，所以我创建了一个 ttk 。进度条。但有几件事我想改进：

1）我想改变实际栏的外观，在查看源文件时，我看不到任何选项，当我用谷歌搜索问题时，我能找到的唯一解决方法是更改​​源代码，我很确定这只会在使用我的文件运行时更改它，然后当用户运行它时，它会成为标准吗？最好，我希望栏是透明的，虽然蓝色会起作用，但我看到有些人在窗口机器中将蓝色作为状态，窗口是我主要关心的问题，所以如果我可以说，窗口中的蓝色，但是其他地方的本地人，那很好。

2）这个希望更简单一点，但是当按下按钮时，它会从用户输入中获取值，这些值仍然可以更改，可能会改变函数的结果，无论如何要停止对 tk 窗口的所有输入，然后功能完成后恢复？

以下是我目前所拥有的，谢谢你的帮助

```
 self.progressbar = ttk.Progressbar(self.gcTableButtonsFrame, length = 70, orient=HORIZONTAL, mode ='determinate')
            self.progressbar.grid(column = 0, row = 0, sticky = 'n s')

            #we then pass through the extension and the string 'test' through this fnction from the gchat module which will then send a 
            #gchat message to the extension passed through
            self.bytes = 0
            self.maxbytes = 0
            self.start()
            self.t = thread.start_new_thread(gchat.sendGChatMessage,(text, "test"))
        except IndexError:
            tkMessageBox.showinfo("Invalid Entry", "Please first select an Entry to send to")

def start(self):
    self.progressbar["value"] = 0
    self.maxbytes = 50000
    self.progressbar["maximum"] = 50000
    self.read_bytes()

def read_bytes(self):
    '''simulate reading 500 bytes; update progress bar'''
    selection2 = self.gcTable.selection()
    self.bytes += 700
    self.progressbar["value"] = self.bytes
    if self.bytes < self.maxbytes:
            # read more bytes after 100 ms
        Tk.after(self.mainPyWindow, 100, self.read_bytes)
    else:
        tkMessageBox.showinfo("Message Sent", "A GChat message has been sent to " + self.gcTable.item(selection2, 'values')[1])
        self.progressbar.destroy() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T12:05:50.507

您的第一个问题有些模棱两可，因为我不确定您是在谈论控制进度条的外观还是它显示的进度的性质。

进度条的性质是通过它的值和它的`mode`选项来控制的（`determinate`进度条与`indeterminate`那些不同；前者是通过 控制的`value`，后者只是显示“正在发生的事情”）。

进度条的外观由整体主题控制。在 Windows 和 Mac OS X 上，默认主题是系统主题，这意味着进度条看起来是原生的，*无论是*. 我最近没有在 Linux 上尝试过主题，所以我忘记了它们在那里的样子；切换主题：

```
# Switch to the included 'clam' theme
s = ttk.Style()
s.theme_use('clam') 
```

# xml - 如何创建一个接受一系列预定义值的 XSD 类型？

> ID：13157219
> 
> 赞同：0
> 
> 时间：2012-10-31T11:47:53.013
> 
> 标签：xml, types, xsd

我正在尝试定义一个类型以在我的 XML 文档中使用，它只接受该特定数据类型，以下值之一：

*   产品1
*   产品2
*   产品3

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:12:47.897

好的，我刚刚使用属性“枚举”找到了答案。[这](http://www.w3schools.com/schema/schema_facets.asp)是解释，以下代码是其中使用的示例：

```
<xs:element name="car">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Audi"/>
      <xs:enumeration value="Golf"/>
      <xs:enumeration value="BMW"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

# java - 使用方面进行日志记录

> ID：13157225
> 
> 赞同：0
> 
> 时间：2012-10-31T11:48:30.770
> 
> 标签：java, spring, aop, aspectj

拥有一个带有 Facade 层、Service 层和 Dao 层的 RESTful Web 服务。试图记录类的所有方法的所有调用，用注释@Log标记

```
@Target({ElementType.TYPE, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface Log {
} 
```

这是方面代码：

```
public class LoggingAspect {
  @Around("@target(Log)")
  public Object log(ProceedingJoinPoint pjp) throws Throwable {
    log.debug("Start " + pjp.getSignature().getName());
    Object result = pjp.proceed();
    log.debug("End " + pjp.getSignature().getName());
    return result;
  }
} 
```

Facade、Service 和 Dao 用@Log 标记。一些例子：

```
public Obj Facade.createObj(String name){ //1
  return service.createObj(name);
}

public Obj Service.createObj(String name){ //2
  return dao.createObj(name);
}

public Obj Dao.createObj(String name){ //3
  Long idOfCreatedObj = /*code that creates an object and returns it's ID*/;
  return loadObjById(idOfCreatedObj); /* load the created object by id */
}

public Obj Dao.loadObjById(Long id){ //4
  return /* code that loads the object by it's id */;
} 
```

在此示例中，方法 1、2、3 已成功记录。但是没有记录嵌套的 dao 方法 (loadObjById)。

为什么？

PS在spring-config.xml中有 `<aop:aspectj-autoproxy proxy-target-class="true"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:44:48.893

问题是自调用（`this.methodcall()`）绕过了由 Spring 创建的用于处理横切关注点的动态/cglib 代理。

修复方法是使用完整的 Aspectj（编译时或加载时编织）或通过获取代理进行调用（而不是 alling `this.methodCall()`，使用`proxy.methodCall()`

您可以通过以下方式获取代理：

```
<aop:aspectj-autoproxy expose-proxy="true"/> 
```

在您的代码中： `AopContext.currentProxy()`将为您提供对代理的引用。如果您有兴趣，这里有一篇关于此的博客文章 - [http://www.java-allandsundry.com/2012/07/reference-to-dynamic-proxy-in-proxied.html](http://www.java-allandsundry.com/2012/07/reference-to-dynamic-proxy-in-proxied.html)

# iphone - 如何在 iPhone 的 MKMapView 中添加 UIImage？

> ID：13157228
> 
> 赞同：1
> 
> 时间：2012-10-31T11:48:41.797
> 
> 标签：iphone, ios, ipad, mkmapview

我想在 MKMapview 中添加一个 UIImage。

即：一个特定的位置，我想添加一个名为“apple.jpg”的图像。

我不知道该怎么做。

因为我已经添加了一个可拖动的图钉作为注释。但我不知道我是否可以添加多个图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:59:44.180

要将图像添加为 MKMapView 的一部分，请参阅本教程...

[i.ndigo mkmapview](http://i.ndigo.com.br/tag/mkmapview/)

并将图像添加为 MapView 上的 Pin 然后使用下面的代码...

```
MKAnnotationView *annotationView = [[[MKAnnotationView alloc] init];

annotationView.image = [UIImage imageNamed:@"apple.png"];
annotationView.annotation = annotation;
annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
annotationView.rightCalloutAccessoryView.tag = 101;

    annotationView.canShowCallout = YES;
 [yourMapView addAnnotation:annotationView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:59:58.410

正如@Kassem Bagher 提到的，您需要创建自定义`MKAnnotationView`，检查任何教程（[示例](http://spitzkoff.com/craig/?p=81)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:01:08.857

您的图像必须为 png 格式，请参见下面的代码。

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{

MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"pinView"];
if (!pinView) {
   pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pinView"] autorelease];
   pinView.image = [UIImage imageNamed:@"apple.png"];
   pinView.canShowCallout = YES;
 }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:10:24.093

这是工作代码，我已经完成了下面的代码，没有必要的图像是 .png 、 .jpg 或 .gif 它是您可以使用的任何格式

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
           MKPinAnnotationView *pinAnnotation = nil;
           NSString *defaultPinID = @"myPin";
           pinAnnotation = (MKPinAnnotationView *)[mapview dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
                            if ( pinAnnotation == nil )
                                pinAnnotation = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];

           pinAnnotation.image = [UIImage imageNamed:@"marker_postoffice.png"];
           pinAnnotation.annotation = annotation;
           pinAnnotation.canShowCallout = YES;
           UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

          [infoButton addTarget:self action:@selector(showDetails)forControlEvents:UIControlEventTouchUpInside];
          pinAnnotation.rightCalloutAccessoryView = infoButton;

       // now you can set diff image by  [annotation title] you  can set diff image with if else condition like below code

        if([[annotation title] isEqualToString:objAppDelegate.OfficePinTitle]) 
         {   

                        pinAnnotation.image = [UIImage imageNamed:@"marker_postoffice.png"];
                        pinAnnotation.annotation = annotation;
                        pinAnnotation.canShowCallout = YES;
                        UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

                        infoButton addTarget:self
                                                       action:@selector(showDetails)forControlEvents:UIControlEventTouchUpInside];

                                        pinAnnotation.rightCalloutAccessoryView = infoButton;

         }
         else
         {

                        pinAnnotation.image = [UIImage imageNamed:@"marker_red_postoffice.png"];
                        pinAnnotation.canShowCallout = YES;
                        UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

                        [infoButton addTarget:self action:@selector(showDetails)forControlEvents:UIControlEventTouchUpInside];

                         pinAnnotation.rightCalloutAccessoryView = infoButton;
         }

} 
```

# wcf-data-services - 设置 MaxResultsPerCollection 会产生无效的 XML

> ID：13157234
> 
> 赞同：1
> 
> 时间：2012-10-31T11:48:57.367
> 
> 标签：wcf-data-services, odata

如果我设置`DataServiceConfiguration.MaxResultsPerCollection`为 ie，`2`那么当结果更大时，会有`<m:error>`标签，但生成的 XML 文件无效（缺少关闭`<feed>`）。为什么？是预期的吗？然后如何（正确地）解析它？

例子：

```
public class WcfDataService1 : DataService<DummyContext>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("*", EntitySetRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;

        config.MaxResultsPerCollection = 2;
    }
}

public class DummyContext
{
    public IQueryable<DummyClass> Data
    {
        get
        {
            return Enumerable.Range(1, 10).Select(x => new DummyClass() { Id = x, FooBar = x * 2 }).AsQueryable();
        }
    }
}

[DataServiceKey("Id")]
public class DummyClass
{
    public int Id { get; set; }
    public int FooBar { get; set; }
} 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xml:base="http://localhost:49627/WcfDataService1.svc/" xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
    <id>http://localhost:49627/WcfDataService1.svc/Data</id>
    <title type="text">Data</title>
    <updated>2012-10-31T11:43:03Z</updated>
    <link rel="self" title="Data" href="Data" />
    <entry>
        <id>http://localhost:49627/WcfDataService1.svc/Data(1)</id>
        <category term="WebApplication1.DummyClass" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
        <link rel="edit" title="DummyClass" href="Data(1)" />
        <title />
        <updated>2012-10-31T11:43:03Z</updated>
        <author>
            <name />
        </author>
        <content type="application/xml">
            <m:properties>
                <d:Id m:type="Edm.Int32">1</d:Id>
                <d:FooBar m:type="Edm.Int32">2</d:FooBar>
            </m:properties>
        </content>
    </entry>
    <entry>
        <id>http://localhost:49627/WcfDataService1.svc/Data(2)</id>
        <category term="WebApplication1.DummyClass" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
        <link rel="edit" title="DummyClass" href="Data(2)" />
        <title />
        <updated>2012-10-31T11:43:03Z</updated>
        <author>
            <name />
        </author>
        <content type="application/xml">
            <m:properties>
                <d:Id m:type="Edm.Int32">2</d:Id>
                <d:FooBar m:type="Edm.Int32">4</d:FooBar>
            </m:properties>
        </content>
    </entry>
    <m:error>
        <m:code />
        <m:message xml:lang="cs-CZ">The response exceeds the maximum 2 results per collection.</m:message>
    </m:error> 
```

# android - GCM 测试，如何使用 canonical_id 引发 GCM 服务器响应？

> ID：13157236
> 
> 赞同：4
> 
> 时间：2012-10-31T11:49:02.487
> 
> 标签：android, push-notification, google-cloud-messaging

我已经成功实现了一个客户端/服务器 Android GCM 应用程序。我的应用服务器拥有一个 device/registration_id 对的数据库。消息通过 Web 可访问的 PHP 页面发送到设备。我正在尝试在服务器端编写错误处理，特别是响应包含 canonical_id 的情况。开发人员文档非常清楚需要做什么以及为什么会产生这样的响应：

> 规范 ID
> 
> 在服务器端，只要应用程序运行良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。
> 
> GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。
> 
> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

因此，在我的 Android 客户端应用程序中，我有一个仅用于开发的按钮，该按钮将使用 GCMRegistrar.register() 第二次注册设备，而无需先取消注册。我原以为这会给我一个与我第一次注册时不同的registration_id，并且从网络向设备发送消息（可能使用旧id）会给我一个带有canonical_id的响应。

**但是，第二次注册返回与第一次完全相同的 reg_id。**

因此，通过我服务器上的 PHP 发送消息不会在响应中显示 canonical_id。我确实需要测试返回 canonical_id 的情况，表明我需要更新我的数据库，因为我的 PHP 技能不是最好的！

因此，我将不胜感激地收到任何关于我如何引起这样的回应的想法

更新：我刚刚尝试从手机上卸载该应用程序，然后重新安装它。我仍然得到相同的 reg_id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T21:12:36.273

我回答了这个问题——[在这里](https://stackoverflow.com/questions/12808959/canonical-id-and-message-id-format/12978274#12978274)。您可以尝试按照我用来获取规范注册 ID 的步骤操作。它确实涉及卸载应用程序，但也许您没有执行我在此处描述的所有步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:18:47.920

我的理解是，需要更新的规范 id 只会来自服务器。仅当 GCM 服务器检测到它们具有单个设备的两个 id 时才会发生这种情况。

这可能仅在存在某种竞争条件或其他难以重现的错误时才会发生。我理解你渴望测试这个场景，但我一直在使用 GCM，因为它从测试版出来，并且从未见过规范的 id 替换。

# tridion - 使用分类关键字创建 Tridion 标签云？

> ID：13157238
> 
> 赞同：4
> 
> 时间：2012-10-31T11:49:11.773
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

CMS 中的内容用关键字标记，发布后它们用作跟踪键，每次加载页面时值都会增加。过去，DB Query 与 Tridion Broker DB 一起使用来生成标签云。我想改变它并改用 Tridion Broker API。

Tridion 在线文档有一个[很好的示例](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=tracking%2520keys&scope=&min=20&max=0&sort=&chunk=10&sid=lcSearch.runSearch1351682918563&currentQuery=tracking%2520keys&currentScope=&eventType=lcContent.loadDocconcept_897F8B16081F47579A37A9EB4FDB5B4F&query=&scope=&filename=TaxonomyKeywordCriteria.xml&docid=concept_897F8B16081F47579A37A9EB4FDB5B4F&inner_id=&tid=&addHistory=true&resource=) （首先登录到[http://sdllivecontent.sdl.com/](http://sdllivecontent.sdl.com/)）。该示例显示了如何使用 API 获取关键字的计数。

我想要一个聚合查询，而不是一次获取 count 1 个关键字。是否可以使用 Broker API 或使用 Ambient Framework？

```
string strTaxURI = "tcm:34-70-512", strTaxKeywordURI = "tcm:34-549-1024";
Query myQuery = new Query();
Criteria myCriteria = null;

TaxonomyKeywordCriteria taxonomyKeywordCriteria = new TaxonomyKeywordCriteria(strTaxURI, strTaxKeywordURI, false);
myCriteria = taxonomyKeywordCriteria;
myQuery.Criteria = myCriteria;

// filter code limiting results commented out....

string[] itemURIs = myQuery.ExecuteQuery();
foreach (string itemURI in itemURIs)
{
      Response.Write(itemURI + ", ");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:21:45.857

不要以为你可以通过使用 BrokerQuery API 来实现你所需要的。但是，您可以使用分类 API 来获取完整的分类并查看该分类中每个关键字的 ReferencedContentCount。

```
TaxonomyFactory taxonomyFactory = new TaxonomyFactory();
Tridion.ContentDelivery.Taxonomies.Keyword category = taxonomyFactory.GetTaxonomyKeywords("tcm:9-3-512");
Response.Write(category.ReferencedContentCount);

if (category.HasChildren)
{
     // get the category.KeywordChildren and loop over them
} 
```

希望这可以帮助。

干杯，丹尼尔。

# coldfusion - Coldfusion CreateDate 问题

> ID：13157243
> 
> 赞同：2
> 
> 时间：2012-10-31T11:49:27.133
> 
> 标签：coldfusion

我在使用该`CreateDate()`功能时遇到了一些问题，它只是出错，我不知道为什么！

我正在运行此查询以获取新闻报道中的所有日期，以便我可以每月创建一个新闻档案。

```
<cfquery name="selectNews" datasource="#Request.dsn#">
    SELECT Month(NewsDate) AS theCount
    FROM news
    GROUP BY Month(NewsDate)
</cfquery> 
```

然后当我输出它时，我试图以以下格式输出它

*   2012 年 8 月
*   2012 年 9 月
*   2012 年 10 月

所以我使用下面的代码来尝试输出这个列表

```
<ul>
<cfloop query="selectNews">
    <cfoutput>
    <cfset theDay = DateFormat(Now(), 'dd')>
        <cfset theMon = theCount>
        <cfset theYear = DateFormat(Now(), 'yyyy')>
        <li>#CreateDate(theYear, theMon, theDay)#</li>
    </cfoutput>
</cfloop>
</ul> 
```

它适用于第一项，它会输出`Aug 2012`，但是它会出错，说这个

```
Error Occurred While Processing Request
MONTH 
```

至少对我来说，这没用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:55:34.843

我的猜测是[SQL Month()](http://msdn.microsoft.com/en-us/library/ms187813.aspx)函数在 1 月返回 0，而[CreateDate](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_09.html)期望在 1 月返回 1。

**编辑**

```
<ul>
<cfloop query="selectNews">

    <cfset theDay = Day(Now())>
    <cfset theMon = #theCount#>
    <cfset theYear = Year(Now())>
    <cfoutput><li>#DateFormat(CreateDate(theYear, theMon, theDay), "mmm yyyy")#</li></cfoutput>

</cfloop>
</ul> 
```

**编辑**

这似乎有效，但仅适用于奇数月

```
<cfset months = [1,3,5] />
<ul>
    <cfloop array="#months#" index="currentmonth">

        <cfoutput><li>#DateFormat(CreateDate(Year(Now()), currentmonth, Day(Now())), "mmm yyyy")#</li></cfoutput>

    </cfloop>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:23:22.340

这是我是个白痴。我正在使用`DateFormat(Now(), 'dd')`，这是一个巨大的愚蠢错误，因为 9 月只有 30 天。它正在运行`CreateDate(2012, 09, 31)`，这显然行不通！

# c# - WPF错误模板边框不显示所有文本

> ID：13157250
> 
> 赞同：0
> 
> 时间：2012-10-31T11:49:33.143
> 
> 标签：c#, wpf, styles, errortemplate

我的 WPF 应用程序中有一些错误检查。错误消息显示在文本框旁边，但当文本框位于应用程序右侧时，它不会显示所有错误文本。

结果：

![错误信息](../Images/41b87f2301db2986595b3b0e4da1ab35.png)

这是我的错误模板样式：

```
<ControlTemplate x:Key="errorTemplateStyle">
    <StackPanel Orientation="Horizontal">
        <Border BorderThickness="1" BorderBrush="#FFdc000c" CornerRadius="0.7"
            VerticalAlignment="Top">
            <Grid>
                <Polygon x:Name="toolTipCorner"
                     Grid.ZIndex="2"
                     Margin="-1"
                     Points="6,6 6,0 0,0" 
                     Fill="#FFdc000c" 
                     HorizontalAlignment="Right" 
                     VerticalAlignment="Top"
                     IsHitTestVisible="True"/>
                <Polyline Grid.ZIndex="3"
                      Points="7,7 0,0" Margin="-1" HorizontalAlignment="Right" 
                      StrokeThickness="1.5"
                      StrokeEndLineCap="Round"
                      StrokeStartLineCap="Round"
                      Stroke="White"
                      VerticalAlignment="Top"
                      IsHitTestVisible="True"/>
                <AdornedElementPlaceholder x:Name="adorner"/>
            </Grid>
        </Border>
        <Border x:Name="errorBorder" Background="#FFdc000c" Margin="1,0,0,0"
            Opacity="0" CornerRadius="1.5"
            IsHitTestVisible="False"
            MinHeight="24" MaxWidth="267">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2.25" 
                              Color="Black" 
                              Opacity="0.4"
                              Direction="315"
                              BlurRadius="4"/>
            </Border.Effect>
            <TextBlock Text="{Binding ElementName=adorner,
                                  Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                   Foreground="White" Margin="8,3,8,3" TextWrapping="Wrap"/>
        </Border>
    </StackPanel>
    <ControlTemplate.Triggers>
        <DataTrigger Value="True">
            <DataTrigger.Binding>
                <MultiBinding Converter="{StaticResource BooleanOrConverter}">
                    <Binding ElementName="adorner" Path="AdornedElement.IsKeyboardFocused" />
                    <Binding ElementName="toolTipCorner" Path="IsMouseOver"/>
                </MultiBinding>
            </DataTrigger.Binding>
            <DataTrigger.EnterActions>
                <BeginStoryboard x:Name="fadeInStoryboard">
                    <Storyboard>
                        <DoubleAnimation Duration="00:00:00.15"
                                     Storyboard.TargetName="errorBorder"
                                     Storyboard.TargetProperty="Opacity"
                                     To="1"/>
                        <ThicknessAnimation Duration="00:00:00.15"
                                        Storyboard.TargetName="errorBorder"
                                        Storyboard.TargetProperty="Margin"
                                        FillBehavior="HoldEnd"
                                        From="1,0,0,0"
                                        To="5,0,0,0">
                            <ThicknessAnimation.EasingFunction>
                                <BackEase EasingMode="EaseOut" Amplitude="2"/>
                            </ThicknessAnimation.EasingFunction>
                        </ThicknessAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <StopStoryboard BeginStoryboardName="fadeInStoryboard"/>
                <BeginStoryboard x:Name="fadeOutStoryBoard">
                    <Storyboard>
                        <DoubleAnimation Duration="00:00:00"
                                     Storyboard.TargetName="errorBorder"
                                     Storyboard.TargetProperty="Opacity"
                                     To="0"/>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.ExitActions>
        </DataTrigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

你能帮我如何显示所有错误信息吗？

谢谢雅库布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:06:25.877

解决方案是对 errorBorder 使用弹出窗口。

工作作风是：

```
<ControlTemplate x:Key="errorTemplateStyle">
    <StackPanel Orientation="Horizontal">
        <Border BorderThickness="1" BorderBrush="#FFdc000c" CornerRadius="0.7"
            VerticalAlignment="Top">
            <Grid>
                <Polygon x:Name="toolTipCorner"
                     Grid.ZIndex="2"
                     Margin="-1"
                     Points="6,6 6,0 0,0" 
                     Fill="#FFdc000c" 
                     HorizontalAlignment="Right" 
                     VerticalAlignment="Top"
                     IsHitTestVisible="True"/>
                <Polyline Grid.ZIndex="3"
                      Points="7,7 0,0" Margin="-1" HorizontalAlignment="Right" 
                      StrokeThickness="1.5"
                      StrokeEndLineCap="Round"
                      StrokeStartLineCap="Round"
                      Stroke="White"
                      VerticalAlignment="Top"
                      IsHitTestVisible="True"/>
                <AdornedElementPlaceholder x:Name="adorner"/>
            </Grid>
        </Border>
        <Popup x:Name="errorBorder" MinHeight="24" MinWidth="24" MaxWidth="267" Placement="Right" Margin="1,0,0,0" >
            <Border Background="#FFdc000c"
            Opacity="1" CornerRadius="1.5"
            IsHitTestVisible="False"
            MinHeight="24" MaxWidth="267">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="2.25" 
                              Color="Black" 
                              Opacity="0.4"
                              Direction="315"
                              BlurRadius="4"/>
                </Border.Effect>
                <TextBlock Text="{Binding ElementName=adorner,
                                  Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                   Foreground="White" Margin="8,3,8,3" TextWrapping="Wrap"/>
            </Border>
        </Popup>
    </StackPanel>
    <ControlTemplate.Triggers>
        <DataTrigger Value="True">
            <DataTrigger.Binding>
                <MultiBinding Converter="{StaticResource BooleanOrConverter}">
                    <Binding ElementName="adorner" Path="AdornedElement.IsKeyboardFocused" />
                    <Binding ElementName="toolTipCorner" Path="IsMouseOver"/>
                </MultiBinding>
            </DataTrigger.Binding>
            <Setter TargetName="errorBorder" Property="IsOpen" Value="True" />
            <DataTrigger.EnterActions>
                <BeginStoryboard x:Name="fadeInStoryboard">
                    <Storyboard>
                        <DoubleAnimation Duration="00:00:00.15"
                                     Storyboard.TargetName="errorBorder"
                                     Storyboard.TargetProperty="Opacity"
                                     To="1"/>
                        <ThicknessAnimation Duration="00:00:00.15"
                                        Storyboard.TargetName="errorBorder"
                                        Storyboard.TargetProperty="Margin"
                                        FillBehavior="HoldEnd"
                                        From="1,0,0,0"
                                        To="5,0,0,0">
                            <ThicknessAnimation.EasingFunction>
                                <BackEase EasingMode="EaseOut" Amplitude="2"/>
                            </ThicknessAnimation.EasingFunction>
                        </ThicknessAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <StopStoryboard BeginStoryboardName="fadeInStoryboard"/>
                <BeginStoryboard x:Name="fadeOutStoryBoard">
                    <Storyboard>
                        <DoubleAnimation Duration="00:00:00"
                                     Storyboard.TargetName="errorBorder"
                                     Storyboard.TargetProperty="Opacity"
                                     To="0"/>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.ExitActions>
        </DataTrigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# ios - iOS 6 缓存 post 请求

> ID：13157251
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:49:33.903
> 
> 标签：ios, caching, ios6

我们对 iOS 6 的新缓存功能有一些问题 :)。有人可以告诉我数据在沙盒缓存中存储了多长时间，因为即使在应用程序更新之后 - 我假设 - 缓存也没有被清理。

打招呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:54:30.360

在获取数据时使用`options`，这将允许您更好地控制缓存：

```
NSData* data = [NSData dataWithContentsOfURL:url options:NSDataReadingMappedIfSafe error:&err]; 
```

查看文档以获取更多选项

# android - 如何在 Android 上正确显示通知，然后运行或发送消息

> ID：13157252
> 
> 赞同：0
> 
> 时间：2012-10-31T11:49:33.497
> 
> 标签：android, service, broadcastreceiver

我有一个具有以下活动执行逻辑的 Android 应用程序：

`if FIRST_RUN`: SplashScreeen -> 登录 -> MainScreenTabHost

`if PUSH`：

1.  `Not Running`: SplashScreeen -> 登录 -> MainScreenTabHost
2.  `Running`:`MainActivity`收到消息

我不知道如何实现这一目标。我的项目源代码`NotificationBar`：

```
Notification notif = new Notification(R.drawable.ic_launcher, "Text in status bar", 
System.currentTimeMillis());
Intent intent = new Intent(this, MainScreenTabHost.class);//HERE PROBLEM
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
notif.setLatestEventInfo(this, "Notification's title", "Notification's text", pIntent);
notif.flags |= Notification.FLAG_AUTO_CANCEL;
this.notificationManager.notify(1, notif); 
```

此代码始终运行应用程序`MainScreenTabHost`，但如果应用程序未运行，它会在登录屏幕中进行一些初始化。

我的问题是：如何检查应用程序是否正在运行，如果没有，则创建一个`Intent`运行启动画面并循环进行首次运行？另一方面，如果应用程序正在运行，我只想`Intent`为某些操作发送一个（可能是一个广播）。

还有一件事，我的服务并不总是在运行，因为它是由推送通知中的广播意图运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:05:42.183

嗯，我找到了下一个解决方案：

```
// Check current activity
        ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);

        List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);

        ComponentName componentInfo = taskInfo.get(0).topActivity;
        if (componentInfo.getPackageName().equals(this.getPackageName())) {
            Intent broadCast = new Intent(MainScreenTabHost.BROADCAST_ACTION);
            broadCast.putExtras(arg1.getExtras());
            sendBroadcast(broadCast);
        } else {

            this.sendNotif(arg1);
        } 
```

所以技巧是：当触发 onMessage 方法时，我检查当前在 Top 上的活动以及它是否是我的一部分 - 我只是向它发送广播。如果不是带有 SplashScreen 意图的显示通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:00:18.563

From what I understand, you want to be able to run spashScreen or not, depending on the state of the application.
You could try to register a BroadcastReceiver on your main activity, register an IntentFilter for a custom filter (let's say: NOTIFICATION_INTENT)

```
IntentFilter intentFilter = new IntentFilter(NotificationActivity.NOTIFICATION_INTENT);         // notification click     intent
this.registerReceiver(mReceiver, intentFilter); 
```

Then, when creating notification you will have to create an intent to an notification activity that will broadcast the NOTIFICATION_INTENT.

The NotificationActivity should look like this:

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class NotificationActivity extends Activity{

    public static final String NOTIFICATION_INTENT = "notification_clicked_intent"; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.notification);

         // broadcast intent
         Intent i = new Intent();
         i.setAction(NOTIFICATION_INTENT);
         getBaseContext().sendBroadcast(i);

         /* Set activity result and send intent data */
         setResult(RESULT_OK, getIntent());

         /* Finish activity and return to parent activity */
         finish();
    }

} 
```

The code for creating the notification will have something similar to this:

```
 // set intent to be opened on NotificationClick
        notificationIntent = new Intent(this, NotificationActivity.class);
        notificationIntent.putExtra("key", icon);

        PendingIntent contentIntent = PendingIntent.getActivity(context, NOTIFICATION_ACTIVITY_RESULT, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

Hope this helps.

# java - 带有一个哈希图的哈希图数组

> ID：13157254
> 
> 赞同：0
> 
> 时间：2012-10-31T11:49:44.467
> 
> 标签：java, arrays, nullpointerexception, hashmap

我正在做一个学校作业，我应该像这样制作一个哈希图数组：

```
HashMap<String, Person>[] mood = (HashMap<String, Person>[])  new HashMap<?, ?>[6]; 
```

我从一个文件中读取，它是这样的。问题是它给了 NullPointerException 我试图把心情变成心情[0]！在我的书中找不到任何关于 hashmap-array 如何工作的信息.. :( 会很高兴获得所有帮助 (:

```
Person p = new Person();
p.name = word[1];
p.age = word[2];
p.mood = word[3];

people.put(p.name, p);

 if (p.mood.equals("HAPPY")) {
 mood[0].put(p.mood, p); //NullPointerException 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:02:34.843

基本上，您确实初始化了一个心情数组，但它是用`null`s 初始化的。因此，在您可以在心情[0]（或任何其他索引）上调用任何方法之前，您需要在心情[0] 中放置一个非空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:01:22.833

当您创建对象数组时，数组元素最初为 null，因此在使用 之前`mood[0]`，您需要使用 的实例填充它`HashMap<String, Person>`

# macos - 在制作 CUDA 5.0 示例时遇到 Open MPI 相关问题 (Mac OS X ML)

> ID：13157260
> 
> 赞同：13
> 
> 时间：2012-10-31T11:50:06.980
> 
> 标签：macos, cuda, makefile, mpi, openmpi

当我尝试制作 CUDA 5.0 样本时，会出现错误：

> Makefile:79: *** MPI not found, not building simpleMPI.. 停止。

我已尝试下载并构建最新版本的 Open MPI，参考 Open MPI “FAQ / Platforms / OS X / **6。如何不使用 OS X 捆绑的 Open MPI**？” 页面并没有解决错误。

```
make -j 4 2>&1 | tee make.out
[ lots of output ]
make[2]: *** [mpi/man/man3/MPI_Comm_disconnect.3] Error 127
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [all-recursive] Error 1
make: *** [all-recursive] Error 1 
```

我现在真的很困惑，我不知道该怎么办。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T21:57:04.580

正如评论中提到的，simpleMPI 示例可以通过使用 make -k 有效地绕过，或者完全删除 simpleMPI 子目录，或者重命名该目录中的 Makefile。但是，如果希望在 mac 上实际安装 MPI 版本以便能够构建 simpleMPI 示例，这些说明应该会有所帮助：

这里的问题是您没有安装 MPI 编译器。您需要为 Mac OSX 安装 MPICC 编译器。这些说明将使用 MPI 的 MPICH2 版本，通常可[在此处获得](http://www.mcs.anl.gov/research/projects/mpich2/downloads/index.php?s=downloads)

[直接链接到 MPICH2 1.4 下载](http://www.mcs.anl.gov/research/projects/mpich2/downloads/tarballs/1.4/mpich2-1.4.tar.gz)

您可以按照[这些说明](http://www.underworldproject.org/documentation/MpichDownload.html)为 Mac OSX 构建和配置 MPICH2。在配置步骤中，还要添加 --disable-f77 和 --disable-fc：

```
./configure --enable-shared --enable-sharedlibs=osx-gcc --enable-fast=all --prefix=/usr/local/mpich2-optimized --disable-f77 --disable-fc 
```

然后按照指南说明进行制作，然后进行安装

现在创建指向 MPICC 的符号链接，以便您可以轻松构建 CUDA MPI

```
sudo ln -s /usr/local/mpich2-optimized/mpicxx /usr/bin/mpicxx 
sudo ln -s /usr/local/mpich2-optimized/mpic++ /usr/bin/mpic++ 
```

或者，另一种选择是添加

```
/usr/local/mpich2-optimized/bin 
```

到你的路。

现在在制作 simpleMPI 时，它会正确构建。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T18:53:35.170

或者只是使用[MacPorts](http://www.macports.org/)安装。命令是

```
sudo port install mpich 
```

这也将使将来更容易更新，因为它们托管的是最新版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-16T08:27:06.963

或者只是使用[Homebrew](http://brew.sh/)安装。命令是

```
brew install mpich2 
```

通过自制软件安装 mpich 后，我可以编译所有 CUDA 示例。

# c# - c# - PrintPreviewDialog：通过反射获得它的工具条的名称是什么

> ID：13157263
> 
> 赞同：0
> 
> 时间：2012-10-31T11:50:21.937
> 
> 标签：c#, reflection, toolstrip

我想知道 printpreviewdialog 工具条的正确名称是什么，以通过反射获得它。我想知道从 windows xp、vista 和 7 中使用的正确名称。我不知道它的名称是否取决于 Windows 版本。目前我正在做（我将其称为 toolStrip1）：

```
 Type type = typeof(this);
    FieldInfo toolStripBar = type.GetField("toolStrip1", BindingFlags.Instance | BindingFlags.NonPublic);
    FieldInfo printToolStripButton = type.GetField("printToolStripButton", BindingFlags.Instance | BindingFlags.NonPublic);
    ToolStrip toolStrip1 = (ToolStrip)toolStripBar.GetValue(this);
    ToolStripButton printButton = (ToolStripButton)printToolStripButton.GetValue(this);
    Bitmap bitmap = new Bitmap(MyBmpImage);
    printButton.Image = bitmap; 
```

toolStrip1 名称是否始终独立于 Windows 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:07:46.190

你在戳类的私有变量。这会使保修失效，Microsoft 可以决定更改类，这将破坏您的代码。

但是，是的，它被称为“toolStrip1”，并且从 .NET 版本 2.0 开始就有这个名称，可能在此之前。他们不太可能更改此名称，Winforms 处于维护模式，只有关键的安全问题和操作系统兼容性问题得到修复。

如果这让您感到不舒服，那么请不要犹豫，实施您自己的预览对话框。它几乎没有，繁重的工作由 PrintPreviewControl 类完成。您可以查看[参考源](http://referencesource.microsoft.com/netframework.aspx)以获得提示。

# magento - Magento Observer 生成错误和 Magento 区域混乱

> ID：13157264
> 
> 赞同：2
> 
> 时间：2012-10-31T11:50:27.617
> 
> 标签：magento, observers

我制作了`controller_front_init_routers`事件观察器，它从`REST`服务中检索数据以构建菜单。一切都很好，直到我发现观察者在后端（例如无法保存产品）以及其他服务中产生错误。我正在为任何结论而挣扎，所以我提出了一些审讯。

1.  如果我们仅在前端，我试图创建一个条件以触发我的观察者方法。但 Magento 认为我们始终处于前端区域。

> (var_dump(Mage::app()->getStore()->isAdmin()) 总是返回 false，与 var_dump(Mage::getDesign()->getArea() == 'adminhtml') 相同)

```
Can anyone explain what's happened ? 
```

2.  还有一种解决方案是将事件观察器放置在前端区域`config.xml`并加载它， `Mage::app()->loadArea($this->getLayout()->getArea());`但我应该将这段代码放在哪里？在一个新的观察者？这是最合适的过程吗？

3.  这是一种监听事件然后暂停监听器的方法吗？（一旦我的菜单被注册，我就不需要再听事件了）

4.  使用`controller_front_init_routers`事件是最好的选择吗？

5.  谁见过这样的问题？

我在 Magento 版本上工作。1.12.0.2

这里是 config.xml

```
<globals>
....
<events>
<controller_front_init_routers>
<observers>
  <connector_services_observer>
    <type>singleton</type>
    <class>Connector_Services_Model_Observer</class>
      <method>getEvent</method>
       </connector_services_observer>
  </observers>
</controller_front_init_routers>        
</events>
</globals> 
```

这里是我的模型观察者中的函数 getEvent

```
public function getEvent($observer){

    //model which do post or get requests and return xml and menu
    $_getRest = Mage::getModel('connector_services/RestRequest');
    //the paths
    $_menu_url = Mage::getStoreConfig('connector_service_section/connector_service_url/service_menu_url');
    //put a store config
    $path_nlist = 'veritas-pages-list.xml';

    $_isAdmin = Mage::helper('connector_services');

    $currentUrl=Mage::helper("core/url")->getCurrentUrl();
    //the way I found to trigger methods only in frontend
            //that's not very beautiful I know
        $admin = preg_match("#/admin/#",$currentUrl);
        $api =  preg_match("#/api/#",$currentUrl);
    //
    if ( !$admin && ! $api ){

            $_menuXml = $_getRest->postRequest($_menu_url);

            if( $_menuXml )
            { 
                $_menu = $_getRest->makeMenu($_menuXml);
                Mage::register('menu',$_menu); 
            }  

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:42:38.310

您应该能够将查询字符串传递给其余服务，类似于您在地址栏中输入它的方式。Magento 会将其转发给观察者，您可以将其用作标志。

在您的代码中添加如下内容：

```
const USE_FRONTEND = 'usefront';

public function getEvent($observer){
    this->request = $observer->getEvent()->getData('front')->getRequest();

    // If the constant is in the query string 
    if ($this->request->{self::USE_FRONTEND}) {
        // Do code related to this request
        die('Frontend flag detected');
    }

} 
```

像这样调用您的网站并传递查询字符串

[http://www.yourmagentosite.com/?usefront=true](http://www.yourmagentosite.com/?usefront=true)

我对 Magento 的新 REST api 不是很熟悉，但我知道它可以在浏览器中运行。也许这个解释可以帮助你。

# xcode - 如何在启动时禁用 Xcode DYLD_LIBRARY_PATH 扩展

> ID：13157266
> 
> 赞同：1
> 
> 时间：2012-10-31T11:50:32.657
> 
> 标签：xcode

当我从 Xcode 运行应用程序时，它会扩展一些环境变量。例如，它将可执行目录添加到 DYLD_LIBRARY_PATH。而且因为我在可执行目录中有 libjpeg.dylib，所以我的应用程序无法初始化并出现错误：

```
dyld: Library not loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
Referenced from: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
Reason: Incompatible library version: ImageIO requires version 1.0.0 or later, but libJPEG.dylib provides version 0.0.0 
```

这显然是由于 DYLD_LIBRARY_PATH 扩展而发生的。dyld 在加载系统框架时尝试加载我的 libjpeg.dylib 而不是系统一。对我来说，这样的 Xcode 行为看起来不合逻辑，因为从终端运行应用程序和从 Xcode 运行它时会得到不同的结果。所以我正在寻找任何禁用这种 Xcode 行为的方法。

PS 在方案的“环境变量”部分设置 DYLD_LIBRARY_PATH 没有帮助，因为我会将 DYLD_LIBRARY_PATH 设置为 MY_VALUE:EXECUTABLE_DIR。

# php - 将自定义参数添加到“文章管理器：添加新文章”部分 (Joomla 2.5)

> ID：13157268
> 
> 赞同：0
> 
> 时间：2012-10-31T11:50:40.657
> 
> 标签：php, html, joomla

我正在编写一个 Joomla 2.5 模板，模板文章按类别和类型（视频/文本/图像）排序。

每个类别可以包含任何类型的文章。

我需要的是在添加/编辑文章部分添加一个自定义参数，我可以在其中指定文章类型。

如果不编辑 Joomla 核心，这是否可能，因为这不是一个选项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:52:20.673

使用内容插件添加参数。但实际上，听起来您可以只使用 JED 中的标记扩展之一并拥有这三个标记。

# upgrade - Magento 将 1.3.2.1 升级到 1.7.0.2

> ID：13157275
> 
> 赞同：1
> 
> 时间：2012-10-31T11:50:59.817
> 
> 标签：upgrade, magento-1.7, magento, magento-1.3

所以，我将 Magento 安装从 1.3.2.1 升级到 1.7.0.2。但是当我尝试将数据库转换为新格式时出现以下错误。

```
a:5:{i:0;s:239:"Error in file: "/home/user/public_html/app/code/core/Mage/Customer/sql/customer_setup/mysql4-upgrade-1.4.0.0.7-1.4.0.0.8.php" - SQLSTATE[HY000]: General error: 1005 Can't create table 'user_new.customer_form_attribute' (errno: 150)";i:1;s:994:"#0 /home/user/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 /home/user/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(437): Mage_Core_Model_Resource_Setup->_modifyResourceDb('upgrade', '1.4.0.0.7', '1.6.2.0.1')
#2 /home/user/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(320): Mage_Core_Model_Resource_Setup->_upgradeResourceDb('1.4.0.0.7', '1.6.2.0.1')
#3 /home/user/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 /home/user/public_html/app/code/core/Mage/Core/Model/App.php(417): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 /home/user/public_html/app/code/core/Mage/Core/Model/App.php(343): Mage_Core_Model_App->_initModules()
#6 /home/user/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#7 /home/user/public_html/index.php(87): Mage::run('', 'store')
#8 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

有谁解决了这个问题？谷歌只给有同样问题的人提供任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:58:38.430

Magento 1.3 中的表是 MyISAM，后来被转换为 InnoDB。现在您收到的 150 错误消息与 FK 有关：

> 如果 MySQL 从 CREATE TABLE 语句中报告错误号 1005，并且错误消息引用错误 150，则表创建失败，因为未正确形成外键约束。类似地，如果 ALTER TABLE 失败并且它引用错误 150，这意味着为更改的表将错误地形成外键定义。要显示服务器中最近的 InnoDB 外键错误的详细说明，请发出 SHOW ENGINE INNODB STATUS。

[来源](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:11:45.340

将 Magento 从 1.3.2.1 升级到 1.7.0.2 是一个漫长的过程。错误几乎总是发生。您没有提到您计划如何升级的方式，它在这个问题中起着至关重要的作用。当然，一步一步地移动 1.3 到 1.4 到 1.5 到 1.6 到 1.7 更安全。

你为你的数据做了备份吗？如果是，最好从头开始。

这里的小问题是不可避免的，特别是如果您想要升级的 Magento 版本非常旧。

这是更新 Magento 的标准程序。仅供您查看，因为您可以选择另一种方式来更新商店。

1）知道你面临什么：

如果将您的特定版本的 Magento 升级到最新版本有什么特别之处，请查看谷歌。如果不出意外，您将准备好解决需要解决的问题。

2）备份您的文件

我们通常像这样从 CLI 执行此操作： tar -cvvzf your_site_directory.tar.gz your_site_directory/ 2>error.log

3）备份你的数据库

您也可以像这样从 CLI 执行此操作：

mysqldump -u THIS_IS_YOUR_USERNAME_FOR_DB -h localhost -pTHIS_IS_YOUR_USERNAME_FOR_DB my_database_name | gzip -9 > my_database_name.sql.gz

4）将这些文件复制到新位置

如果您需要在两台服务器之间移动文件，我能在 CLI 中想到的最简单的方法是：

scp /path_to_some_file/your_site_directory.tar.gz user@REMOTE_SERVER_ADDRESS:/some_dir_on_remote_server 您可以对备份数据库执行相同操作

5）现在是时候将数据库导入新创建的数据库了：

a) 提取 my_database_name.sql.gz

b) mysql –verbose –user=THIS_IS_YOUR_USERNAME –password=THIS_IS_YOUR_PASSWORD new_created_db < my_database_name.sql

6）现在以这种方式提取文件：

tar -xvvzf your_site_directory.tar.gz 这会将所有文件解压到当前目录

7) 编辑数据库表 core_config_data 并设置您站点的新安全/不安全 URL

8）从管理员禁用缓存。

9) 删除位于此处的缓存和会话目录：/var/cache /var/session

rm /your_path_to/var/session -R rm /your_path_to/var/cache -R

10) 执行位于/downloader/pearlib 目录中的“clean” bash 脚本

a) 运行 chmod +x clean 以执行此脚本 b) ./clean 执行脚本

11）最后从您的 Magento 管理员转到 Magento 连接管理器 粘贴此扩展以升级 Magento：magento-core/Mage_All_Latest 完成后，您应该有新的 Magento，但是如果有一些自定义编码，您应该真的知道发生了什么继续使用您的代码。

12）剩下的就是测试它并将这些文件移动到生产服务器上。

# c++ - 将 wsprintf 与 malloc 一起使用

> ID：13157276
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:50:59.270
> 
> 标签：c++, c, string, winapi

编写这样的代码是否有任何错误：

```
char* sp=(char*)malloc(128);
int x=22;

wsprintf(sp,"%d",x);
cout<<sp; 
```

我特意询问安全错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:04:18.813

这里有许多“潜在”问题，实际上没有一个问题是在欺骗任何东西，但您可能会发现事情的表现与您预期的不一样。

首先：wsprintf，作为 Win32 API ( [http://msdn.microsoft.com/en-us/library/windows/desktop/ms647550(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647550%28v=vs.85%29.aspx) ) 原型如下：

```
int __cdecl wsprintf(
  _Out_  LPTSTR lpOut,
  _In_   LPCTSTR lpFmt,
  _In_    ...
); 
```

where`LPTSTR`被定义为`char*`或`wchar_t*`取决于`UNICODE`符号的定义（检查您的项目设置和/或构建命令）

现在，如果您使用的是 ANSI 构建（无 UNICODE），所有类型都是一致的，但没有检查 wsprintf 写入的内容是否超过您分配的 128 个字符。如果你只写一个十进制整数，它不会有问题，但如果你（你之后的其他人）稍后修改“消息”并且没有进行检查，可能会出现一些意外（比如`wsprintf(sp,"This is the number I've been told I was supposed to be expected to be: %d",x);`这仍然适合 128 个字符吗？！ ?)

如果您使用的是 UNICODE 构建，则分配 128 个字符，并在其上写入一个双字节字符串。数字 22 将被写为`\x32\x00\x32\x00\x00\x00`（3200 是 0x0032 的小端编码，它是对应于 UNICODE 50 的 wchar_t，代表“2”）。如果您将该序列提供给 cout（即基于 char，而不是基于 wchar_t），则会将第一个 \x00 视为字符串终止符，并将输出......只是“2”。

为了保持连贯性，您可以：

*   使用所有`char`基于类型和函数（OK malloc 和 cout，但`wsprintfA`不是`wsprintf`）
*   使用所有`wchar_t`基于类型和函数（malloc(128*sizeof(wchar_t))、wchar_t* 和`wsprintfW`)
*   使用所有`TCHAR`基于类型（malloc(128*sizeof(TCHAR))、TCHAR* 和 wsprintf，但定义`tcout`为`cout`或`wcout`取决于 UNICODE）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:53:48.443

There is no security mistake because it is never the case that an int converted to a C string will exceed the size you've allocated.

However this style of programming has the *potential* for security issues. And history has shown that this kind of code has caused real security issues time and time again. So maybe you should be learning a better style of coding?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:53:59.977

Ok given that you have stated you are using winapi, read this from their [documentation](http://msdn.microsoft.com/en-us/library/windows/desktop/):

> Note Do not use. Consider using one of the following functions instead: StringCbPrintf, StringCbPrintfEx, StringCchPrintf, or StringCchPrintfEx. See Security Considerations.

Therefore do not use. I would ignore however what they tell you to do instead and either:

1.  Write in C, and a function from the C standard library (sprintf, snprintf etc). In that case you cannot use cout.

2.  Write in C++. Use std::string and there is even a new to_string, as well as boost::format and ostringstream to help you build formatted string. You can still use C standard library functions there if you want to as well when it really suits your purpose better, but leave the allocation stuff to the library.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:33:13.903

[这个 MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/hh969198%28v=vs.85%29.aspx)列出了使用`wsprintf`. 它们似乎不适用于您的示例，但它们确实提供了一些您可能想要探索的替代方案。

# sql-server - 在 SQL Server 中查询（现在在特定项目中的机器）

> ID：13157277
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:51:01.457
> 
> 标签：sql-server

我有一个表，其中包括 3 个字段，`Machine Name`其中 表示将机器分配给项目的确切时间。`Project Name``Date Time``Date Time`

现在我想找到现在在特定项目中的机器（实际上可能是不同时间的一台机器分配给不同的项目）。

我希望持续的特定项目是机器分配给它的最新项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:56:15.743

听起来你可以使用这个：

```
select t1.ProjectName,
  t2.Datetime,
  t2.MachineName
from yourtable t1
left join
(
  select max(datetime) DateTime, MachineName
  from yourtable
  group by MachineName
) t2
  on t1.machinename = t2.machinename
  and t1.datetime = t2.datetime 
```

甚至：

```
select projectname, datetime, machinename
from 
(
  select projectname,
    datetime,
    machinename,
    row_number() over(partition by machinename order by datetime desc) rn
  from yourtable
) src
where rn = 1 
```

# android - TabWidget 在 Android 2.1 设备中看起来不正确

> ID：13157278
> 
> 赞同：3
> 
> 时间：2012-10-31T11:51:02.780
> 
> 标签：android, android-layout

我的应用程序已`android:targetSdkVersion`设置为 11。它使用`TabHost`和`TabWidget`两个选项卡。但是，`android:minSdkVersion`设置为 7 (Android 2.1)。

我使用 Android 支持库 ( `android-support-v13.jar`)。在我能够测试的所有地方，我的选项卡看起来都很好，除了在 2.1 中，它们似乎正在剪切构成选项卡内容的视图的一部分。这个问题在模拟器中也可以重现。

这是布局文件的相关部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/repeat_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android: />

        <FrameLayout>
        ...
        </FrameLayout>
    </TabHost>
</LinearLayout> 
```

以下是我希望标签的外观：

![预期的](../Images/135de6c1588bda309fbe79d8033fdf8d.png)

这是我在 2.3 设备中得到的：

![意外](../Images/c9f14fa20d4ec3a83bc7cbe5182d0c1f.png)

基本上，选项卡似乎比它们需要的高，并且也不必要地与`FrameLayout`下面的内容重叠。

**解决方案：** 主要针对未来的访问者，如果您希望标签在所有平台上保持一致，直到 2.1，唯一的解决方案是使用自定义标签视图。你会在这里找到一个很好的[教程](http://joshclemm.com/blog/?p=136)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:01:00.277

Try This

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout  android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:layout_weight="0" android:id="@android:id/tabs"
            android:orientation="horizontal" />

        <FrameLayout android:layout_width="fill_parent" android:layout_height="0dp"
            android:layout_weight="1" android:id="@+android:id/realtabcontent" />

    </LinearLayout>
</TabHost> 
```

Hope it helps...!! Cheers...

# c - How to avoid segfault when accessing a structure of GTK widgets in callback function?

> ID：13157279
> 
> 赞同：1
> 
> 时间：2012-10-31T11:51:03.750
> 
> 标签：c, gtk

I have a callback function that needs to access several GTK widgets. To enable this I am trying to send pointers to the relevant GTK widgets packaged in a structure as an argument to the callback function (instead of using global variables to enable access). To structure the data in a nice way I use a structure of pointers to structures of pointers to GTK widgets.

My problem is that I get segmentation fault when trying to read from or write to the GTK widgets in the callback function. How can I avoid this? As I just started learning C and GTK my approach may be inappropriate altogether, so I would also appreciate pointers on the more general of problem of accessing several GTK widgets from callback functions.

In trying to fix the problem I have managed to boil down the code that presents the problem to the following. It segfaults when changing the value of the spinbutton. It also segfault if one lets the last line in `widget_change_value` execute instead.

```
/* Compile with gcc foo.c `pkg-config --cflags --libs gtk+-2.0` */
#include <gtk/gtk.h> /* Get e.g. via sudo apt-get install libgtk2.0-dev */

typedef struct {
    GtkWidget *widget;
} s_input;

typedef struct {
    s_input *input;
} s_data;

void widget_change_value(s_data *data) {
    /* Segfault when trying to read from data  */
    int number = gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(data->input->widget));

    /* /\* Segfault when trying to write to data *\/ */
    /* gtk_spin_button_set_value(GTK_SPIN_BUTTON(data->input->widget), (gdouble) 2.0); */
}

int main(int argc, char *argv[])
{
    GtkWidget *window;
    s_input input;
    s_data data = { &input };

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

    input.widget = gtk_spin_button_new_with_range(0, 3, 1);
    gtk_container_add(GTK_CONTAINER(window), input.widget);
    g_signal_connect(GTK_OBJECT(input.widget), "value_changed", GTK_SIGNAL_FUNC(widget_change_value), (gpointer *) &data);

    gtk_widget_show_all(window);
    gtk_main();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:57:32.083

Your crash is because your callback function's prototype is all wrong.

You have:

```
void widget_change_value(s_data *data); 
```

but looking at the docs, the `[value-changed](http://developer.gnome.org/gtk3/stable/GtkSpinButton.html#GtkSpinButton-value-changed)` signal handler callback is declared as:

```
void user_function(GtkSpinButton *spinbutton, gpointer user_data); 
```

You need to add the missing widget pointer argument.

Also:

1.  Your callback should be `static`, since it's very local to the C file it's in.
2.  You don't need to cast things to `gpointer`.
3.  The cast to `(gpointer *)` is doubly wrong, since you're passing a pointer (`&data`) which you want to convert to `gpointer`, *not* to "pointer to `gpointer`". The asterisk is wrong. But, as I said above, the entire cast is pointless and should be removed.
4.  Consider porting to a more recent GTK+ version, you're using some obsolete things (`GTK_OBJECT()` instead of `G_OBJECT()`, `GTK_SIGNAL_FUNC()` instead of `G_CALLBACK()`, for instance).

# networking - 计算数据速率

> ID：13157283
> 
> 赞同：0
> 
> 时间：2012-10-31T11:51:12.860
> 
> 标签：networking

问题是：

> 每秒传输一张分辨率为 1200 点/英寸和 24 位/点（像素）的未压缩 4" x 6" 照片需要什么数据速率？

我的解决方案是 4*6*1200*24，等于 691,200 bps，但它与针对该问题给出的任何选项都不匹配。选项有：
a) 691200 kb/s
b) 28.8 kb/s
c) 28.8 kbits
d) 8.29 Mb/s
e) 829 Mb/s

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T20:39:16.273

正确答案是 e)

兼顾两个维度。计算如下： 4 x 1200 x 6 x 1200 x 24 = 829440000 b/s => 选择 829 Mb/s

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:09:24.400

你的数学是错误的。因为这是来自斯坦福网络的问题，所以我不想提供正确的答案。但这里是提示：尝试计算 1x1 图片 :)。所以 1x1x1200 绝对不正确 :)，进入第二维 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:05:17.893

我认为他们正在谈论传输它所需的最低要求。因此，只需计算出每一种速度（以比特/秒为单位），然后选择大于 691,000 bps 的最小值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:06:15.170

您没有做错任何事情，如果问题或可选答案错误，答案可能是选项 A。即使您计算 691200/(1024²)（应该是以 mb/s 为单位的答案），您也会得到接近 0.66 的答案。所以要么我错了，要么问题错了。我猜是第二个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T14:57:43.937

我认为答案是 829.44mbps（最接近的选项是 e）。4*1200*6*1200 给出了 dpi 的总数。再乘以 24 得到总位数。

# primefaces - 在 primefaces 3.4.1 中将参数传递给远程命令

> ID：13157284
> 
> 赞同：0
> 
> 时间：2012-10-31T11:51:16.573
> 
> 标签：primefaces, primefaces-extensions

我刚刚将我的 primefaces 库从 3.1.1 升级到 3.4.1，但不幸的是无法从我的 bean 中的 FacesContext 的请求参数映射中获取参数。

下面是我的代码片段。

xhtml 文件：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Facelet Title</title>
</h:head>   
<h:form>
    <p:remoteCommand name="setData" actionListener="#{serviceClass.setrealData()}"/>
</h:form>
 <script>
        $(document).ready(function(){
            setData({codes:'J203,J200,J212,J211,J210',fields:'SNAME,SPOT,PERC,POINTS'});
        });
 </script>
</html> 
```

豆：

```
@ManagedBean
@SessionScoped

public class ServiceClass {

    /** Creates a new instance of ServiceClass */
    public ServiceClass() {
    }

    public void setrealData(){
        FacesContext fc = FacesContext.getCurrentInstance();
        Map map2 = fc.getExternalContext().getRequestParameterMap();
        String newCodes = (String) map2.get("codes");
        System.out.println("New codes ::"+newCodes);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:27:15.440

传递给 setData javascript 函数的参数不正确。您似乎放错了分隔每个键值对的大括号。

本来应该：

```
<script>
    $(document).ready(function(){
        setData([{codes:'J203,J200,J212,J211,J210'} , {fields:'SNAME,SPOT,PERC,POINTS'}]);
    });
</script> 
```

使用这种格式，您应该能够从请求映射中检索（代码和字段）。代码应该产生一个字符串`"J203,J200,J212,J211,J210"`，而字段应该产生`"SNAME,SPOT,PERC,POINTS"`

# actionscript-3 - As3 在 addChild 到舞台之前预加载/渲染单个影片剪辑

> ID：13157287
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:51:25.277
> 
> 标签：actionscript-3, movieclip, preload, addchild

我有一些问题。我想预加载单个影片剪辑而不是预加载整个项目。有没有办法。

概念游戏。已显示简介 - 已删除简介 - 已显示标题 - 已在“按下屏幕后”删除标题 [[[[[[[PRELOAD CUT SCENE]]]]]]]] 如果完成显示 CUT SCENE。

那是计划，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:51:38.670

是的，有办法做到这一点。但是为此您需要多个 SWF，每个 SWF 都包含一个您希望单独预加载的影片剪辑。您为每个对象创建一个 Loader 对象，为每个对象创建一个 URL，然后`Loader.load()`在适当的时间调用（例如，在成功预加载前一个对象之后）并分配一个 Event.COMPLETE 侦听器，该侦听器将在加载影片剪辑后触发。不要忘记也分配一个错误事件加载器，否则如果无法预加载过场动画，您的游戏就会卡住。更多[在 Loader 类的文档中](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)。

# objective-c - 如何通过MAC上的objective c获取通讯录人的在线/离线状态

> ID：13157288
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:51:27.507
> 
> 标签：objective-c, macos, cocoa, abaddressbook

我需要通过 Mac 上的目标 C 获取“通讯录人的在线/离线状态”。

我需要“iChat 服务”，无论通讯簿用于获取人员的在线状态。任何人都可以帮助我如何通过代码获得这个。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:30:16.007

用于[`InstantMessage.framework`](https://developer.apple.com/library/mac/#documentation/AppleApplications/Conceptual/InstantMessageProgGuide/Articles/UsingiChatServices.html#//apple_ref/doc/uid/TP40004931-SW2)查找当前用户好友的状态。

具体来说，听起来您想调用`-[IMService screenNamesForPerson:]`并传递要查找其状态的 ABPerson，然后调用`-[IMService infoForScreenName:]`每个返回的名称。

检查返回的字典的`IMPersonStatusKey`值以手动检查状态，或调用`+[IMService imageNameForStatus:]`该值以获取可以显示以指示状态的图像的名称（Mail.app、Contacts.app 和 Calendar 中使用的红色或绿色“气泡” 。应用程序）。

# ios - 设置 iOS 相机应用设置

> ID：13157289
> 
> 赞同：1
> 
> 时间：2012-10-31T11:51:42.110
> 
> 标签：ios, camera

当我打开 iOS 的默认相机应用程序时，每当我对场景进行更改时，我都会看到一个蓝色的大方块，我认为这可以解决曝光问题。如果我单击某处，它会设置感兴趣的曝光点，但新框非常小。是不是在iOS中，默认相机使用更大的区域来设置曝光，但是如果我明确设置曝光的兴趣点，会考虑该点周围的小区域？

如果我想为自己使用 AVFoundation 构建的应用程序设置相同的设置（在曝光方面）怎么办？在文档中写到设置曝光点`(0.5,0.5)`和设置`AVFoundationExposureModeCOntinuousAutoExposure`为曝光模式是默认设置，但我认为它是点测光而不是矩阵测光..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T05:24:00.597

确实如此：至少在我可用于开发的三台 iDevice（iPhone 4S、iPad 3、iPod touch 4G）上，相机以“模式”测光模式（也称为矩阵模式）启动。如果我随后按照 AVFoundation 文档中的描述设置一个感兴趣的曝光点并将曝光模式设置为连续，则相机将切换到点测光。

您可以自己检查一下；在`willOutputSampleBuffer`调用中，获取 EXIF 数据并查看 Metering Mode：

```
NSDictionary* dict = (__bridge NSDictionary*) CMGetAttachment(sampleBuffer,
    kCGImagePropertyExifDictionary, NULL);
...
int meterMode = 
    [[dict objectForKey:(id)kCGImagePropertyExifMeteringMode] integerValue]; 
```

（谷歌“EXIF MeteringMode”了解数字的含义。）

我发现将相机重置为矩阵模式（不关闭应用程序）的唯一方法是以编程方式将 poi 重置为{ *0.5,0.5* }：

```
CGPoint poi;
poi.x = poi.y = 0.5;
if ([inputCamera lockForConfiguration:nil]) {
    inputCamera.exposurePointOfInterest = poi;
    inputCamera.exposureMode = AVCaptureExposureModeContinuousAutoExposure;
    [inputCamera unlockForConfiguration];
} 
```

*poi 的任何*其他值都会触发点模式。

# c# - 命名空间“microsoft”中不存在类型或命名空间名称“directx”

> ID：13157290
> 
> 赞同：5
> 
> 时间：2012-10-31T11:51:44.030
> 
> 标签：c#, visual-studio-2010, directx, directx-9

我一直在尝试将 DirectX 包含在 C sharp 项目（Visual Studio 2010）中。我安装了 DirectX SDK 并包含以下组件：

```
using Microsoft.DirectX;
using Microsoft.DirextX.Direct3D; 
```

当我尝试编译时，出现错误：**命名空间“microsoft”中不存在类型或命名空间名称“directx”**

一些博客提到我需要在“.NET”选项卡下添加“参考”-Microsoft.DirectX。但我在那边找不到。也没有任何工具可以将其添加到选项卡中。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:41:08.953

This was deprecated a long time ago. The last Direct SDK that still has the managed wrappers is February 2010\. The download is [available here](http://www.microsoft.com/en-us/download/details.aspx?id=10084). You'll get to pick the references you are looking for after you install that one.

Better not to use it, no future, look at something like the open source SlimDX or SharpDX projects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:02:49.627

dll 不会出现在 .Net 选项卡上的原因有多种。特定的注册表配置使某些 dll 出现在 .Net 选项卡上。

或者，使用浏览选项将 dll 引用手动添加到您的项目中。

**项目 >> 添加参考**

![在此处输入图像描述](../Images/61af1d4e3f873c3267feeb456b407f70.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-21T04:00:10.213

这是`Directx`在`C#`Program 中添加引用的方法：

*   转到解决方案资源管理器
*   点击参考
*   点击添加参考
*   单击浏览转到：“ `C:\WINDOWS\Microsoft.NET\DirectX for Managed Code\1.0.2902.0\`” *通常这是`Directx`文件所在的位置。这可以通过安装`.net`.
*   选择您的`DirectX`包裹。

例子 ：

```
(C:\Windows\Microsoft.NET\DirectX for Managed Code\1.0.2902.0\Microsoft.DirectX.dll) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T10:54:51.277

这是我找到的一种方法。首先，您需要安装 DXSDK（我有 June2010 和适用于 Windows 7 的 SDK）。转到“添加引用”对话框按“浏览”，转到类似“C:\Windows\Microsoft.NET\DirectX for Managed Code\1.0.2902.0”或“C:\Windows\Microsoft.NET\Managed DirectX\ v9.02.2904" 然后选择正确的 dll，例如 Microsoft.DirectX.dll。因此，您可以将“使用 Microsoft.DirectX”指令添加到您的项目中。

# gem - 在 Rails 2.3.8 中安装 resque 1.18 的 gem 版本冲突

> ID：13157292
> 
> 赞同：0
> 
> 时间：2012-10-31T11:51:48.850
> 
> 标签：gem, resque, ruby-on-rails-2, versions

我通过 gem install redis 和 gem install resque 在 Rails 2.3.8 中安装了 redis 和 resque。resque 和 redis 的版​​本分别是 1.18.0 和 2.2.2。我开始了工人

```
RAILS_ENV=development resque-web config/initializers/resque.rb 
```

我还在 config/redis.yml 文件中做了如下配置：

```
defaults: &defaults
  host: localhost
  port: 6379
  ... 
```

并且`config/initializers/resque.rb`作为：

```
config = YAML::load(File.open("#{Rails.root}/config/redis.yml"))[Rails.env]
Resque.redis = Redis.new(:host => config['host'], :port => config['port']) 
```

但是当我想通过以下方式启动 resque-web 时

```
RAILS_ENV=development resque-web config/initializers/resque.rb 
```

我收到这个错误

> ./config/initializers/../../vendors/rails/railties/lib/initializer.rb:27:in 'require_frameworks'：已经无法为 [] 激活机架（~> 1.1.0，运行时）为 ["vegas-0.1.11", "resque-1.18.0"] 激活 rack-1.4.1

我发现它`resque 1.18.0`需要`sinatra 1.3.3`作为它的依赖项，它又需要`rack >= 1.3.0`作为它的依赖项。但是，对于`actionpack`for `rails 2.3.8`， Wanted 的版本`rack`是`1.1.0`。谁能建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:55:08.857

您必须使用一个版本，`resque`该版本需要较低版本`sinatra`，然后需要`rack`与`rails 2.3.8`.

您可以手动解决此问题，或尝试以下选项之一：

1.  使用 RubyGems 依赖 API (http://guides.rubygems.org/rubygems-org-api/)
2.  `bundler`在 Rails 2.3.8 应用程序中进行改造

# android - 读取块经典 NFC

> ID：13157293
> 
> 赞同：2
> 
> 时间：2012-10-31T11:51:49.597
> 
> 标签：android, nfc

如何从扇区 1 读取数据？验证是真的，我得到异常 IOException（“收发失败”）。

```
private String readSector() {   
    byte [] array={(byte)0xD3,(byte)0xF7,(byte)0xD3,(byte)0xF7,(byte)0xD3,(byte)0xF7};
    byte[] data = null;
    final ByteArrayBuffer b = new ByteArrayBuffer(mMaxSize);
    String sb=new String();
    boolean succes = false;
    try {
        mClassic.connect();
        succes = mClassic.authenticateSectorWithKeyA(1, array);
        if (succes) {
            b.append(mClassic.readBlock(3), 1, 16);
            data = b.toByteArray();
        }
        else
             sb+="Authentication failed";
        mClassic.close();
    catch (final TagLostException tag) {
        tag.printStackTrace();
        sb+="Tag Lost";
    }
    catch (final IOException e) {
        e.printStackTrace();
        sb+="IOEception";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T10:55:12.853

在扇区 1 块 4 到 6 上找到它的数据，并使用此代码读取数据，

```
private String readMadSector() {
        byte [] array={(byte)0xD3,(byte)0xF7,(byte)0xD3,(byte)0xF7,(byte)0xD3,(byte)0xF7};
        byte[] data = null;
        byte [] b;
        String sb=new String();
    boolean succes = false;
    try {
                  mClassic.connect();
                succes = mClassic.authenticateSectorWithKeyA(1, array);
                                  b=mClassic.readBlock(4);

                  sb+=convertHex(b);

                  b=mClassic.readBlock(5);

                  sb+=convertHex(b);

                  b=mClassic.readBlock(6);

                  sb+=convertHex(b);
        else
              sb+="Authentication failed";

        mClassic.close();

    }

    catch (final TagLostException tag) {
        tag.printStackTrace();
        sb+="Tag Lost";
    }

    catch (final IOException e) {
        e.printStackTrace();
        sb+="IOEception";
    }

    return (sb.toString());
} 
```

# java - JAXB generateElementProperty 代码位置

> ID：13157294
> 
> 赞同：1
> 
> 时间：2012-10-31T11:51:56.290
> 
> 标签：java, jaxb, wsdl

我是一名 C# 开发人员，但最近我不得不用 Java 重写我的应用程序版本。

C# 应用程序与传输自定义对象的 WCF 主机/客户端一起使用。由于 Java 不是我的专长，我在创建一个与我的 WCF 主机通信的工作 Web 服务方面有点困难，但我设法做到了。在解析 WCF 自定义对象的过程中，显然，Java 为我完成了大部分工作，创建了所有的类和对象。

但是，在`String`我的自定义对象的任何属性中，它都将其定义为`JAXBElement`. 此生成的类中的其他每个属性都保存到 XML 文件中，但创建为“JAXB”属性的属性除外。

在网上搜索我发现了几篇文章，声明以下代码将阻止此类属性类型的生成（仅保留原始属性类型，在我的情况下为字符串）

```
<jaxb:bindings version="2.0"
        xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
        xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <jaxb:bindings schemaLocation="schema-importedby-wcfsvcwsdl"
             node="/xs:schema">
    <jaxb:globalBindings generateElementProperty="false"/>
  </jxb:bindings> 
```

唯一的问题是它没有说明我将这段代码放在哪里。在我的项目中，我有几个 wsdl 和 xml 文件，虽然我尝试了一些，但似乎都没有。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:08:17.083

将参数添加到生成工具 - *xjc*。

*   保存**bindings.xml**文件

> ```
> <jaxb:bindings version="2.0" 
> xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
> xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
> xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
>     <jaxb:bindings node="/xs:schema"> 
>         <jaxb:globalBindings generateElementProperty="false"/> 
>     </jaxb:bindings> 
> </jaxb:bindings> 
> ```

*   在控制台/工具中添加参数：

    xjc -verbose **-b bindings.xml** -wsdl my_wsdl_from_c_sharp.wsdl ...

或者如果您使用 wsdl2java：wsdl2java **-b bindings.xml** ...

# python-3.x - 接收帖子时Python网络服务器不返回成功

> ID：13157296
> 
> 赞同：0
> 
> 时间：2012-10-31T11:52:00.407
> 
> 标签：python-3.x

我有一个简单的 python 网络服务器，可以将 a 保存`POST`到文件中，但由于某种原因，chrome 告诉我它不能正常工作。但是，该文件确实得到了更新，所以我不确定问题是什么。这是有问题的代码：

```
def do_POST(self):
    if self.path == '/store.json':
        length = self.headers['content-length']
        data = self.rfile.read(int(length))
        with open(pjoin(curdir, 'store.json'), 'wb') as fh:
            fh.write(data)
        self.send_response(200) 
```

如果您想查看我的整个代码，我在另一个问题中有它：[在 python webserver 中不断出现异常，](https://stackoverflow.com/q/13147405/258482)自那个问题以来我修复了一些东西，但这基本上就是它的外观。

# c# - 如何在 WinForms 应用程序中检索实体框架的版本

> ID：13157297
> 
> 赞同：0
> 
> 时间：2012-10-31T11:52:03.627
> 
> 标签：c#, .net, winforms, entity-framework, version

> **可能重复：**
> [如何获取当前的 EF 版本](https://stackoverflow.com/questions/7315127/how-to-get-current-ef-version)

在我的 Windows 窗体应用程序中，我想显示应用程序 .edmx 文件使用的实体框架版本。是否可以从 C# 中的 app.config 文件或 .edmx 文件中获取实体框架版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:59:44.510

You can get it like this:

```
Assembly assembly = Assembly.LoadFrom("System.Data.Entity.dll");
Version ver = assembly.GetName().Version; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:56:24.187

EDMX 文件版本与实体框架版本无关，尽管有一个版本。最好的方法可能是简单地检查`EntityFramework.dll`应用程序中加载的版本（假设您正在使用或多或少的当前版本）。即`AppDomain.CurrentDomain.GetAssemblies`可能会有所帮助。

# python - python初始化单独文件中的常量

> ID：13157302
> 
> 赞同：3
> 
> 时间：2012-10-31T11:52:21.007
> 
> 标签：python, class, import, constants

我有一个类似于这里提出的问题的问题：[Importing a long list of constants to a Python file](https://stackoverflow.com/questions/6343330/importing-a-long-list-of-constants-to-a-python-file)

基本上，我有一个单独的模块，它只包含一长串常量，例如

```
constants.py

x = 1.2
y = 30.4
.
.
. 
```

在另一个模块中，我想导入这些常量并将它们初始化为实例属性。

```
class.py

class something(object):
    def __init__(self):
        import constants
        self.x = constants.x
        self.y = constants.y
        .
        .
        . 
```

是否有一种更简单或更 Pythonic 的方法来执行此操作，而不是重新输入所有变量名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:01:45.487

Python 开发人员开发了一个很酷的解决方案：它称为[ConfigParser](http://docs.python.org/2/library/configparser.html)。

一个实际的例子：config.ini

```
[constants]
key = value
x = 0
y = 1 
```

类.py

```
from ConfigParser import SafeConfigParser
class MyClass(object):
    def __init__(self, **kwargs):
        self.config = SafeConfigParser(defaults=kwargs).read('config.ini')

    def get_x(self):
        return self.config.get('constants', 'x') 
```

我希望这有帮助。

编辑：如果你需要实例属性，你可以这样做：

```
class MyClass(object):
    ...
    def __getattr__(self, key):
        return self.config.get('constants', key) 
```

EDIT2：需要一个 Python 文件和一个 .ini 文件不是解决方案吗？

```
from . import config
class Myclass(object):
    def __getattr__(self, key):
        return getattr(config, key) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:57:35.717

你可以做

```
for constant, value in constants.__dict__.values():
  setattr(self, constant, value) 
```

为什么需要它们作为实例属性？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:02:51.047

您可以将常量放在模块中的类中。这个类可以更容易地传递，或者用作任何需要这些常量作为类属性的类的混合类。

```
class Constants(object):
    x = 1.2
    y = 30.4

# optional 
class Base(object):
    pass

class Something(Constants, Base):
    pass

s = Something()

print(s.x) 
```

但是，由于它只是数据，我可能只会使用某种类型的数据结构（例如字典）来保存它们。当任何代码都可以从模块中引用它们时，我不确定为什么需要将它们作为类属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:04:27.087

总有这样的：

```
class something(object):
    def __init__(self):
        import constants
        for name in ['x', 'y', ...]:
            setattr(self, name, getattr(constants, name)) 
```

这样做的好处是可以避免多次重复`self.X = constants.X`，并且意味着您只在一个地方列出一次名称。

你*可以*使用这个：

```
for name, value in constants.__dict__.iteritems():
    setattr(self, name, value) 
```

在`constants`不明确列出它们的情况下绑定所有名称，但我个人不会。`something`它使对象实际具有哪些属性变得不太清楚，并且 Python 模块*很*容易最终包含比您意识到的更多的名称。例如，如果您必须在定义所有常量的过程中导入另一个模块（例如，`math`）`constants`，那么您最终会得到所有实例的意外`math`属性。`something`

我认为明确列出您要导入的名称更清楚。另外，这意味着`something`如果您发现需要添加更多常量以供程序的其他部分使用（并且如果常量只能与它们相关，`something`那么它们确实应该列`something`在不在外部模块中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T11:58:09.710

`from constants import x, y`只要确保你以后不会意外地覆盖你的变量（即不要使用通用名称）

# android - Android中的构造URI

> ID：13157310
> 
> 赞同：0
> 
> 时间：2012-10-31T11:52:52.870
> 
> 标签：android, uri

如何构建表 MediaStore.Files.FileColumns 的 URI？我尝试这样：

```
Uri uri=Uri.parse(MediaStore.Files.FileColumns); 
```

但在 Eclipse 中，“MediaStore.Files.FileColumns”带有下划线。我想，我做错了。如何正确构造一个URI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:56:21.520

FileColumns 是接口。您不能引用接口。如果您需要显式列，请使用

```
Uri uri=Uri.parse(MediaStore.Files.FileColumns.<COLUMN>); 
```

例如：

```
Uri uri=Uri.parse(MediaStore.Files.FileColumns.MEDIA_TYPE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:56:09.613

MediaStore.Files.FileColumns 是一个接口，方法 Uri.parse() 接收一个字符串。

# java - ant 正在从位置内寻找位置

> ID：13157311
> 
> 赞同：1
> 
> 时间：2012-10-31T11:52:54.500
> 
> 标签：java, maven, ant

我正在构建一个 java web 应用程序。我必须按照指示以某种方式做事。

当我输入“ant deploy”来构建一个war文件时，它失败了。它说`the file can't be found.`

但它显然是找错地方了。它说...

> C:\Users\Dave\Desktop\springapp\springapp\C:Program FilesApacheapache-maven-3.0.4-binapache-maven-3.0.4\boot 不存在

这当然不存在！但我找不到为什么它认为这是有效的位置。看起来它正在寻找它正在寻找的位置 - 在当前目录的末尾。但是我不能更改目录，因为如果我这样做了，它就找不到它需要的 build.xml 文件。

我有这个项目的 ant、maven 和 tomcat。

我为每个`TOMCAT_HOME`和设置了一个系统变量位置`MAVEN_HOME`。

项目文件中的 build.properties 文件将 maven.home 设置为正确的位置。

如何更改查找该文件的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:55:55.467

> 项目文件中的 build.properties 文件将 maven.home 设置为正确的位置。

从那条路径的外观来看，我怀疑您`build.properties`包含类似

```
maven.home=C:\Program Files\Apache\.... 
```

反斜杠是属性文件中的转义字符，因此您需要使用正斜杠而不是反斜杠或将它们加倍。您还应该转义冒号

```
maven.home=C\:\\Program Files\\Apache\\.... 
```

# apache - Different .htpasswd for subfolder?

> ID：13157312
> 
> 赞同：3
> 
> 时间：2012-10-31T11:53:03.743
> 
> 标签：apache, .htaccess, subdirectory, .htpasswd

The root folder of a web app is protected with a .htaccess/.htpasswd file. That works fine even with sub-folders, and everything is perfect.

Now I have to password protect a subfolder using a different .htpasswd file. I tried using a new .htaccess/.htpasswd combo into the subfolder and it kinda works, except for the fact that I need to enter two usernames and passwords (one for the subfolder and one for the .htaccess/.htpasswd in the root folder).

Is there a way to avoid that?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:30:49.657

没有直接的方法可以做到这一点。我的解决方案是明确定义需要有效用户的目录（使用根 .htpasswd），并排除具有自己身份验证的目录。前任：

```
.htaccess (root)
AuthUserFile /full/path/to/.htpasswd
AuthType Basic
AuthName "My Secret Page"

<Directory "/var">
  Require valid-user
</Directory>

<Directory "/etc">
  Require valid-user
</Directory> 
```

在子文件夹 ex "/users" 中，您将放置自定义 .htaccess 和 .htpasswd 来管理身份验证。

当然，请始终检查您在 .htpasswd 中的用户条目是否受操作系统支持。

# sorting - Can i sort structure in c++ using stl sort

> ID：13157314
> 
> 赞同：1
> 
> 时间：2012-10-31T11:53:13.203
> 
> 标签：sorting, stl, structure

I was trying to sort a structure using stl sort in C++ . But i get some error . Is it that we cannot sort a structure in c++ using stl sort or is it my fault in implementation , if its my fault do let me know the correction .

Here's the code (its very small :) )

```
#include<iostream>
#include<algorithm>
using namespace std;
struct log {
       int sd;
       int ed;
} log[1000];
bool key(int i,int j) {
 return (log[i].ed<log[j].ed);
}
int main() {
int n,i;
cin>>n;
sort(log,log+n,key);
for (i=0;i<n;i++) cin>>log[i].sd>>log[i].ed;
for (i=0;i<n;i++) cout<<log.sd<<","<<log.ed<<endl;
system("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:55:32.543

是的你可以。但是您的比较器应该采用两个`const log &`（不是`int`）参数。

# macports - 自制软件卸载/移动 macports UNDO

> ID：13157315
> 
> 赞同：0
> 
> 时间：2012-10-31T11:53:19.723
> 
> 标签：macports, homebrew

brew医生告诉我移动macports：sudo mv /opt/local ~/macports

所以我这样做了，现在没有任何工作正常。将 macports 移回原来的位置的命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:04:49.067

我想你的意思是：

`sudo mv ~/macports /opt/local`

`mv`是用于移动文件和目录的标准 unix shell 命令。

# paypal - Which URL do I use to "COMPLETE" a PayPal transaction on the SagePay simulator?

> ID：13157321
> 
> 赞同：2
> 
> 时间：2012-10-31T11:53:40.770
> 
> 标签：paypal, payment-gateway, opayo

A client of ours want's to handle PayPal transactions via SagePay,

I've got the initial request working to set up the transaction and redirect off to PayPal via: [https://test.sagepay.com/Simulator/VSPDirectGateway.asp](https://test.sagepay.com/Simulator/VSPDirectGateway.asp)

But this doesn't seem to work for "COMPLETE"-ing the transaction, in test mode you'd use:
[https://test.sagepay.com/gateway/service/complete.vsp](https://test.sagepay.com/gateway/service/complete.vsp)

or in production:
[https://live.sagepay.com/gateway/service/complete.vsp](https://live.sagepay.com/gateway/service/complete.vsp)

But how would I complete the request in the simulator? the first URL doesn't seem to work -

`You have sent a TxType of COMPLETE which is not recognised.`

Neither does [https://test.sagepay.com/Simulator/VSPServerGateway.asp?Service=VendorCompleteTx](https://test.sagepay.com/Simulator/VSPServerGateway.asp?Service=VendorCompleteTx) -

`Server Simulator reqires a Service Name as part of it's URL. e.g. VSPServerGateway.asp?Service=VendorRegisterTx. This service tells Server which tasks to perform.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:44:54.903

你试过这个吗？[https://test.sagepay.com/Simulator/paypalcomplete.asp](https://test.sagepay.com/Simulator/paypalcomplete.asp)

让我知道。

# java - continue 不能在循环之外使用（实际上不在循环之外）

> ID：13157324
> 
> 赞同：3
> 
> 时间：2012-10-31T11:53:54.803
> 
> 标签：java, loops, goto, continue

我不明白为什么继续在这里导致错误

```
public void clear() {

    log.debug("Clearing hash");

    // wow!
    while( hash.size()>0 ) {

        for(Map.Entry<Node,Node> entry : hash.entrySet()) {

            clearingParents: {

                while( entry.getKey().ups.size() > 0 ) {

                    for(Node node : entry.getKey().ups) {

                        log.debug("Clearing {}, hash size is {}", node, hash.size());
                        if( node.sizeUps() == 0 ) {
                            node.clear();
                            continue clearingParents;
                        }
                        else {
                            log.debug("was skipped since inserted");
                        }
                    }

                    break clearingParents;
                }
            }

        }

    } 
```

我正在使用这个方案，因为 node.clear() 导致迭代器出现损坏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:56:05.407

您标记一个块而不是 while 循环。你可以`break`脱离一个`labeled block`但不是`continue`它`labeled block` 没有意义，`continue a labeled block`因为它不是一个循环标签你的循环如下所示

```
 clearingParents:  while( entry.getKey().ups.size() > 0 ) {

                        for(Node node : entry.getKey().ups) {

                            log.debug("Clearing {}, hash size is {}", node, hash.size());
                            if( node.sizeUps() == 0 ) {
                                node.clear();
                                continue clearingParents;
                            }
                            else {
                                log.debug("was skipped since inserted");
                            }
                        }

                        break clearingParents;
                    } 
```

[在这里](http://www.java2s.com/Code/Java/Language-Basics/Javalabeledforloop.htm)学习标签循环

# python - 从python中的通用函数代码中提取参数

> ID：13157326
> 
> 赞同：3
> 
> 时间：2012-10-31T11:54:09.383
> 
> 标签：python, string, parsing

在这种特殊情况下，我想提取乳胶命令的参数，如下所示：

```
... latex code ...
\bibitem{item1} 
... latex code ...
\bibitem{item2}
... latex code ... 
```

python中是否有任何函数可以检索包含item1、item2等的列表？

我会想象这样的事情：

```
latex_text.extract_argument("\bibitem{","}") 
```

一个函数，它将扫描文本并返回包含在两个分隔符集中的每个参数的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:01:17.000

```
import re

re.findall(r'\\bibitem\{(.*?)\}', latex_text)     # ['item1', 'item2'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:59:32.923

使用[`re.search`](http://docs.python.org/2/library/re.html?highlight=re.search#re.search)：

```
import re

l = '\\bibitem{item1}'
m = re.search(r'\{([^}]*)\}', l)
print m.group(1) # => 'item1' 
```

正则表达式的解释`\{([^}]*)\}`：

1.  我们正在寻找一个`{`我们必须逃避的起点`\{`。
2.  我们使用一个`(...)`包含
3.  任意数量`*`的字符*不是* `}`：`([^}]`

来自步骤 2 的组是`m.group(1)`。

# node.js - 在 Express.js 中使用 Winston 进行日志记录 - 如何针对不同的环境进行配置？

> ID：13157330
> 
> 赞同：5
> 
> 时间：2012-10-31T11:54:21.073
> 
> 标签：node.js, logging, express, winston

我已经开始使用[Winston](https://github.com/flatiron/winston)在我的 node/express.js 应用程序中记录错误和事件。

我还没有弄清楚的一件事是如何为不同的环境（开发/测试/生产）指定不同的 Winston 传输（或其他配置）。例如，我希望在开发环境中将所有内容都记录到控制台，但在生产环境中使用不同的传输方式。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T12:01:31.743

据我所知，没有“标准”方法可以做到这一点，但你可能会这样做：

```
var myLogTransports = [];

if (process.env.NODE_ENV == 'production') {
  myLogTransports.push(new (winston.transports.File)({ filename: 'somefile.log' }));
}
else {
  myLogTransports.push(new (winston.transports.Console)({ level: 'error' })));
}

var logger = new (winston.Logger)({
  transports: myLogTransports,
}); 
```

Winston 现在支持动态添加记录器。有关更多信息，请参阅[使用传输](https://github.com/flatiron/winston#working-with-transports)部分。原来的答案可以这样改写：

```
var logger = new winston.Logger();

if (process.env.NODE_ENV == 'production') {
  logger.add(winston.transports.File, { filename: 'somefile.log' });
}
else {
  logger.add(winston.transports.Console, { level: 'error' });
} 
```

# java - 如何在 Java 中查找对象的所有引用者？

> ID：13157333
> 
> 赞同：2
> 
> 时间：2012-10-31T11:54:43.313
> 
> 标签：java, memory-leaks, jvm

我们有一个内存泄漏问题，我们不知道某个类的太多实例是从什么/从哪里创建/引用的。这发生在生产中的重负载下，我们无法获取堆转储（使用堆转储会使 HA 服务器挂起太久）。由于性能下降，运行时分析也不是生产站点上的一个选项，客户对随机崩溃更满意，而不是在监控期间试图捕捉崩溃瞬间时感到痛苦。我们不知道如何启动崩溃（泄漏），它只是在某些时候发生。

有没有办法在运行时从应用程序本身获取对象引用/实例化点？

我查看了[http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/com/sun/jdi/ObjectReference.html](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/com/sun/jdi/ObjectReference.html)，它给出了这样的想法是可能的。

任何指针如何在没有堆转储方式的情况下最好使用自定义代码来实现这一点？已尝试在测试环境中重现该问题，并且似乎是穷尽的野鹅追逐。我们现在想要一种蛮力的方法来找到原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:00:17.540

建议您尝试检查导致此类泄漏的代码。这里有一些关于相同的教程和帮助

IBM 关于处理 Java 中的内存泄漏的文章 [http://www.ibm.com/developerworks/library/j-leaks/](http://www.ibm.com/developerworks/library/j-leaks/)

其他一些有用的文章 [http://www.openlogic.com/wazi/bid/188158/How-to-Fix-Memory-Leaks-in-Java](http://www.openlogic.com/wazi/bid/188158/How-to-Fix-Memory-Leaks-in-Java)

还有一个[Eclipse 内存分析器工具](http://www.eclipse.org/mat/)

但最推荐的解决方案是尝试[`jvisualvm`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)在与您的程序运行相同的机器上从 JVM 运行并启用分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:49:00.543

我们通过在实例化和克隆上收集堆栈跟踪来解决这个问题。当内存不足时，我们将它们转储到调度程序上。

我们知道导致问题的 Object 类，只需要寻找它的诞生地：

```
@EntityListeners(AbstractDTOJpaEventListener.class)
@MappedSuperclass
public abstract class AbstractDTO implements Storeable, Serializable, Cloneable {
  /** */
  private static final String SHADOWED_CLASS = "Custom";
  /** */
  protected final static boolean DEBUG_CUSTOM_INSTANCES = true;
  /** */
  public static long TARGET_HITRATE_PER_INTERVAL = 400000;
  /** */
  public static long LOGGING_INTERVAL = Times.MILLISECONDS_IN_TEN_SECONDS;
  /** */
  private static long previousLoggingTime;
  /** */
  protected static int hits;
  /** */
  protected static boolean hitting;
  /** */
  protected static int hitsWithinInterval;

  /**
   * @author Martin
   */
  public static class Hi {
    /**
     * 
     */
    private long hitted;
    private final long createdAt;
    private final StackTraceElement[] stackTraceElements;
    private final String threadName;

    /**
     * @param threadName 
     * @param stackTraceElements 
     */
    public Hi(String threadName, StackTraceElement[] stackTraceElements) {
      this.threadName = threadName;
      this.createdAt = System.currentTimeMillis();
      this.stackTraceElements = stackTraceElements;
    }

    /**
     *
     */
    public void hit() {
      hitted++;
    }

    /**
     * @return the hitted
     */
    public long getHitted() {
      return hitted;
    }

    /**
     * @param hitted the hitted to set
     */
    public void setHitted(long hitted) {
      this.hitted = hitted;
    }

    /**
     * @return the createdAt
     */
    public long getCreatedAt() {
      return createdAt;
    }

    /**
     * @return the stackTraceElements
     */
    public StackTraceElement[] getStackTraceElements() {
      return stackTraceElements;
    }

    /**
     * @return the threadName
     */
    public String getThreadName() {
      return threadName;
    }
  }

  /** */
  protected final static Map<String, Hi> INSTANCE_SHADOW = new ConcurrentHashMap<String, Hi>();

  private static final Comparator<? super Entry<String, Hi>> COMPARATOR = new Comparator<Entry<String, Hi>>() {
    @Override
    public int compare(Entry<String, Hi> o1, Entry<String, Hi> o2) {
      if (o1 == o2) {
        return 0;
      }

      return -Utils.compareNullSafe(o1.getValue().getHitted(), o2.getValue().getHitted(), Compare.ARG0_FIRST);
    }
  };

  /**
   * @param <T> 
   * @return T
   * @see java.lang.Object#clone()
   */
  @SuppressWarnings("unchecked")
  public <T extends AbstractDTO> T clone() {
    try {
      return (T) super.clone();
    } catch (CloneNotSupportedException e) {
      throw new RuntimeException(e);
    } finally {
      if (DEBUG_CUSTOM_INSTANCES && getClass().getSimpleName().equals(SHADOWED_CLASS)) {
        shadowInstance();
      }
    }
  }

  /**
   * 
   */
  protected void shadowInstance() {
    if (DEBUG_CUSTOM_INSTANCES) {
      final long currentTimeMillis = System.currentTimeMillis();

      if (TARGET_HITRATE_PER_INTERVAL <= ++hitsWithinInterval) {
        hitting = true;
      }

      if ((TARGET_HITRATE_PER_INTERVAL / 2) <= ++hits) {
        final Thread currentThread = Thread.currentThread();

        final StackTraceElement[] stackTrace = currentThread.getStackTrace();

        final String key = Utils.getPropertyPath(String.valueOf(System.identityHashCode(currentThread)), displayStackLocaktion(stackTrace))
            .intern();

        Hi hi = INSTANCE_SHADOW.get(key);

        if (hi == null) {
          synchronized (key) {
            hi = INSTANCE_SHADOW.get(key);

            if (hi == null) {
              INSTANCE_SHADOW.put(key, hi = new Hi(currentThread.getName(), stackTrace));
            }

          }
        }

        hi.hit();
      }

      {
        if (getLoggingInterval(currentTimeMillis) != getLoggingInterval(previousLoggingTime)) {
          if (hitsWithinInterval < TARGET_HITRATE_PER_INTERVAL) {
            if (hitting) {
              hitting = false;
            } else {
              hits = 0; // Reset measuring on second round, give chance to burtsy hits
            }
          }

          hitsWithinInterval = 0;
          previousLoggingTime = currentTimeMillis;
        }
      }
    }
  }

  /**
   * @param time
   * @return long
   */
  private long getLoggingInterval(long time) {
    return time / LOGGING_INTERVAL;
  }

  /**
   * @return String
   */
  public static String toStringShadows() {
    final ArrayList<Entry<String, Hi>> entries;

    synchronized (INSTANCE_SHADOW) {
      entries = Convert.toMinimumArrayList(INSTANCE_SHADOW.entrySet());
      INSTANCE_SHADOW.clear();
    }

    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append(new Timestamp(System.currentTimeMillis()) + " " + SHADOWED_CLASS + " Class instance instantiantion summary:\n");
    stringBuilder.append("hits=" + hits + ", hitting=" + hitting + ", hitsWithinInterval=" + hitsWithinInterval + ", previousLoggingTime=" + new java.sql.Timestamp(previousLoggingTime));

    if (entries.isEmpty()) {
      return stringBuilder.toString();
    }

    Collections.sort(entries, COMPARATOR);

    int index = 0;
    stringBuilder.append("-----------------------------------------------------------------------");

    for (Entry<String, Hi> entry : entries) {
      Utils.append(stringBuilder, entry.getValue().getHitted() + "\t" + entry.getKey(), "\n");
    }

    for (Entry<String, Hi> entry : entries) {
      final Hi hi = entry.getValue();
      final StackTraceElement[] stackTrace = hi.getStackTraceElements();
      final String groupName = entry.getKey();

      final String threadName = hi.getThreadName();

      stringBuilder.append("\n").append(++index).append('\t');
      stringBuilder.append(hi.getHitted()).append("\tpcs\t").append(groupName);
      stringBuilder.append("\t").append(new Timestamp(hi.getCreatedAt()).toString()).append('\t').append(threadName)
          .append('\t').append(Convert.toString(stackTrace));
    }

    return stringBuilder.toString();
  }

  /**
   * @param stackTrace
   * @return String
   */
  private static String displayStackLocaktion(final StackTraceElement[] stackTrace) {
    StackTraceElement firstDistinguishingStackTraceElement = null;

    for (int index = 0; index < stackTrace.length; index++) {
      firstDistinguishingStackTraceElement = stackTrace[index];
      if (!Arrays.asList(UNWANTED_LOCATIONS).contains(firstDistinguishingStackTraceElement.getClassName())) {
        break;
      }
    }

    StackTraceElement lastDistinguishingStackTraceElement = null;

    for (int index = stackTrace.length-1; 0 <= index; index--) {
      lastDistinguishingStackTraceElement = stackTrace[index];
      if (lastDistinguishingStackTraceElement.getClassName().startsWith(OUR_PACKAGE_DOMAIN)) {
        break;
      }
    }

    return Utils.getPropertyPath(displayName(firstDistinguishingStackTraceElement) + "<-"
        + displayName(lastDistinguishingStackTraceElement));
  }

  /**
   * @param firstDistinguishingStackTraceElement
   * @return String
   */
  private static String displayName(StackTraceElement firstDistinguishingStackTraceElement) {
    return Utils.getPropertyPath(firstDistinguishingStackTraceElement.getClassName(), firstDistinguishingStackTraceElement.getMethodName(),
        String.valueOf(firstDistinguishingStackTraceElement.getLineNumber()));
  }
} 
```

# c - GCC中-O0和-O1的区别

> ID：13157352
> 
> 赞同：17
> 
> 时间：2012-10-31T11:55:40.750
> 
> 标签：c, gcc, embedded, arm

在编译一些代码时，我注意到在 -O0 和 -O1 之间创建的汇编程序存在很大差异。我想通过启用/禁用优化，直到我发现是什么导致了汇编程序的某些变化。

如果我使用 -fverbose-asm 来准确找出 O1 与 O0 相比启用了哪些标志，然后手动禁用它们，为什么生成的汇编程序仍然存在如此巨大的差异？即使我使用 O0 运行 gcc 并手动添加 fverbose-asm 所说的使用 O1 启用的所有标志，我也不会获得与仅使用 O1 相同的汇编程序。

除了 '-f...' 和 '-m...' 还有什么可以改变的吗？

或者只是'O1'与'O0'相比具有一些无法关闭的魔力。

* * *

抱歉，这与[使用 GCC + ARM 在递归期间减少堆栈使用](https://stackoverflow.com/questions/13155421/reducing-stack-usage-during-recursion-with-gcc-arm)有关，但提及它使问题有点难以理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T09:56:16.673

如果您只想查看在 O1 启用哪些在 O0 未启用的传球，您可以运行以下命令：

```
gcc -O0 test.c -fdump-tree-all -da
ls > O0
rm -f test.c.*
gcc -O1 test.c -fdump-tree-all -da
ls > O1
diff O0 O1 
```

使用您发现的标志集的类似过程将让您看到 GCC 在 O1 执行了哪些不受标志控制的额外魔法传递。

编辑：

一个不那么混乱的方法可能是比较 -fdump-passes 的输出，它将列出哪些 pass 是 ON 或 OFF 到 stderr。

所以像：

```
gcc -O0 test.c -fdump-passes |& grep ON > O0
gcc -O1 test.c -fdump-passes |& grep ON > O1
diff O0 O1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T17:34:55.700

`-O1`除了为您对无法关闭的魔法的怀疑提供一些证据之外，这并不是说这有帮助：

*   来自[http://gcc.gnu.org/ml/gcc-help/2007-11/msg00214.html](http://gcc.gnu.org/ml/gcc-help/2007-11/msg00214.html)：

    > 注意，并非所有由 -O1 启用的优化都有命令行切换标志来禁用它们。

*   来自 Hagen 的“GCC 权威指南，第二版”：

    > 注意：并非所有 GCC 的优化都可以使用标志来控制。GCC 会自动执行一些优化，如果不修改源代码，当您使用 -O 请求优化时，您无法禁用这些优化

不幸的是，我还没有找到任何关于这些硬编码优化可能是什么的明确说明。希望了解 GCC 内部的人可能会发布一个答案，并提供一些相关信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-08T14:00:08.460

除了许多选项之外，您还可以更改参数，例如

```
--param max-crossjump-edges=1 
```

这会影响代码生成。检查`params.def`所有可用参数的源文件。

但是没有办法从 -O0 切换到 -O1，或从 -O1 切换到 -O2，或者从 -Os 或切换到 -Os 等等。 pp ，通过添加选项，而不修补源代码，因为有几个硬在不咨询命令行选项的情况下检查级别的编码位置，例如：

```
 return perform_tree_ssa_dce (/*aggressive=*/optimize >= 2); 
```

# c# - C#/LINQ/Objects/Lists：如何以好方法填充 TreeView？

> ID：13157353
> 
> 赞同：0
> 
> 时间：2012-10-31T11:55:43.393
> 
> 标签：c#, xml, linq, list, treeview

我正在尝试在 TreeView 中显示一堆信息。例如：

```
Continent 1
    Country 1
        City 1
        City 2
        City 3
    Country 2
        City 1
        City 2
    Country 3
Continent 2
    Country 1
        City 1
        City 2
Continent 3 
```

此信息通过列表存储在类/对象中。因此，Continent 类型的对象/类包括一个包含多个 Country 类型的对象/类的列表（当然还有一些方法、属性等）。所有数据都是通过 LINQ 从 XML 文件中填充的。

现在，我可以获取包含所有大陆的列表 - 并 foreach 它。在这个 foreach 中，我对所有国家/地区的列表进行了 foreach。然后我foreach ...简单的方法，但这会导致非常讨厌的代码，我认为（我的节点比3级更深......）

那么有没有一种简单的方法可以做到这一点？也许与LINQ？例如

```
TreeView.Nodes =
    List[Countries].All.Where(Country.Name = Node.Text).Add(
        (List[Cities].All.Where(City.Name = Node.Text).Add(
            List[People].All.Where(Person.Name = Note.Text))); 
```

我知道，只是垃圾代码，但这样看起来比所有嵌套的 foreach 更漂亮。

我希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:00:00.257

In XAML you can use the [HierarhicaDataTemplate](http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:12:14.187

你可以试试递归。

首先定义一个递归数据结构来存储你的节点信息。

```
public interface IRecursiveStructure
{
   string Name {get;}
   IList<IRecursiveStructure> Children {get;}
} 
```

实现接口并相应地填充。

然后加载树节点，使用递归方法（这是未经测试的伪代码）。

```
public void LoadTreeNodes(IRecursiveStructure data, TreeNode parentNode)
{
   foreach(var child in data.Children)
   {
        node = new Node{Name=data.Name};
        parentNode.Add(node).
        LoadTreeNodes(node,child);
   }

} 
```

这只是一个伪代码示例，因此您需要对其进行一些处理才能使其正常工作。

有关递归概念的更多信息，请参见[http://en.wikipedia.org/wiki/Recursion](http://en.wikipedia.org/wiki/Recursion)。

# c# - 使用嵌套编码解码字符串

> ID：13157360
> 
> 赞同：1
> 
> 时间：2012-10-31T11:56:01.880
> 
> 标签：c#, visual-studio-2010, encoding

强文本给定一个已编码 n 次的字符串，如果我不知道 n 的值，我该如何解码该字符串以给我未编码的纯字符串。

澄清：

```
Initial : /unencoded?string/

Encoded Once : %2Funencoded%3Fstring%2F

Encoded Twice: %252Funencoded%253Fstring%252F

Encoded Three Times: %25252Funencoded%25253Fstring%25252F 
```

我如何在**不知道它已被编码三次的情况下**`%25252Funencoded%25253Fstring%25252F`从到？`/unencoded?string/`

 **我知道我可以使用`HttpServerUtility.UrlDecode`或类似的，但这只解码一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:10:09.127

解码它，直到解码不再改变它。

```
string encodedString = "....";
string temp = string.Empty;
string decodedString = HttpServerUtility.UrlDecode(encodedString);
while (decodedString != temp)
{
    temp=decodedString;
    decodedString = HttpServerUtility.UrlDecode(temp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-29T17:12:41.767

下面更新了 hometoast 答案的 .NET 版本。

基本上只是`HttpServerUtility.UrlDecode`交换`HttpUtility.UrlDecode`

```
string encodedString = "....";
string temp = string.Empty;
string decodedString = HttpUtility.UrlDecode(encodedString);
while (decodedString != temp)
{
    temp=decodedString;
    decodedString = HttpUtility.UrlDecode(temp);
} 
```**

# jquery - 尝试删除具有 tinymce 实例的 div 时出现“未捕获的 ReferenceError：t 未定义”

> ID：13157361
> 
> 赞同：1
> 
> 时间：2012-10-31T11:56:02.860
> 
> 标签：jquery, html, tinymce

这是我面临的问题

1.  我有一个包含tinymce 实例的div。
2.  此 tinymce 实例位于同一 div 内的无序列表中
3.  当我尝试通过单击按钮删除主 div 时，我收到“未捕获的 ReferenceError：t 未定义”错误。
4.  但是当我双击按钮时，div 被删除。但我希望在第一次点击时删除 div。
5.  我试过 tinymce.execCommand('mceRemoveControl', false, tinymceId); （tinymceID 是 tinymce textarea 的 id）要删除 tinymce 的实例但无济于事

下面是我用来删除 div 的代码

```
$('div.form').on('click','a.cancel-btn',function(e){
    var kk = $(this);   
    e.preventDefault();

    $('.dialog').html('Are you sure you wish to delete this asset ? Selecting \'Yes\' will delete this asset.');    
    $('.dialog').dialog({
        buttons:{
            "Yes": function() {
                tinymceId = kk.closest('div.box2').find('textarea').attr('id');
                if (typeof(tinymceId) == 'string') {
                    if (tinyMCE.getInstanceById(tinymceId) != null)
                    {
                        tinymce.triggerSave();
                    tinymce.execCommand('mceFocus', false, tinymceId);
                    tinymce.execCommand('mceRemoveControl', false, tinymceId);
                        //tinyMCE.execCommand('mceFocus', false, tinymceId);
                        kk.closest('div.box2').find('textarea.tinymce_new').tinymce().remove();                   
                    }

                    kk.closest('div.box2').find('textarea').remove();
                    kk.closest('div.box2').find('textarea').remove();

                } 
                //tinyMCE.myClass.remove();
                 kk.closest('div.box2').remove();
                $(this).dialog("close");
                kk.click();
            },
            "Close": function() { $(this).dialog("close"); }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:34:28.937

我不知道这是否与您有关，因为您尚未发布 tiny_mce 初始化代码。关闭一个带有 tiny_mce 的花式框时，我遇到了同样的问题。您有正确的解决方案，即您需要在关闭时调用它：

```
tinyMCE.execCommand('mceFocus', false, tinymceId); //this is also needed apparently to avoid problems in IE
tinyMCE.execCommand('mceRemoveControl', false, tinymceId); 
```

但是我尝试了这个并且它没有工作，因为我正在使用 jquery 方法初始化 tiny_mce：

```
 $('textarea.tinymce').tinymce({
   //init code here
 }); 
```

如果您使用此方法进行初始化，则 mceRemoveControl 不起作用，我不知道 jquery 替代方案是什么。

我的解决方案是像这样使用标准的 js init：

```
tinyMCE.init({
    //init code here
}); 
```

然后在您的页面 laods/fancybox 打开后调用它：

```
tinyMCE.execCommand('mceAddControl', false, tinymceId); 
```

如果你像这样初始化 tinyMCE，那么 removeControl 就可以工作（至少它对我有用）。希望这可以帮助

# excel - 使用vba中的列号创建excel范围？

> ID：13157363
> 
> 赞同：56
> 
> 时间：2012-10-31T11:56:07.073
> 
> 标签：excel, vba

如何使用列号而不是字母在 vba 中创建范围？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-31T13:53:08.863

要引用单元格范围，您可以使用[Range(Cell1,Cell2)](https://docs.microsoft.com/en-us/office/vba/api/excel.worksheet.range)，示例：

```
Sub RangeTest()
  Dim testRange As Range
  Dim targetWorksheet As Worksheet

  Set targetWorksheet = Worksheets("MySheetName")

  With targetWorksheet
    .Cells(5, 10).Select 'selects cell J5 on targetWorksheet
    Set testRange = .Range(.Cells(5, 5), .Cells(10, 10))
  End With

  testRange.Select 'selects range of cells E5:J10 on targetWorksheet

End Sub 
```

![在此处输入图像描述](../Images/8544d5255fb8f7a417323db40003d9cc.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-31T12:00:27.783

以下是选择范围 A1 的两种解决方案。

```
Cells(1,1).Select '(row 1, column 1) 
Range("A1").Select 
```

另请查看此链接；

*   [http://www.excel-vba.com/vba-code-2-6-cells-ranges.htm](http://www.excel-vba.com/vba-code-2-6-cells-ranges.htm)

> 我们强烈建议您使用 Range 而不是 Cells 来处理单元格和单元格组。它使您的句子更清晰，并且您不必记住 AE 列是第 31 列。
> 
> 您将使用单元格的唯一时间是当您想要选择工作表的所有单元格时。例如： Cells.Select 选择所有单元格，然后清空您将使用的值或公式的所有单元格： Cells.ClearContents

--

> “单元格”在动态设置范围和使用计数器循环范围时特别有用。使用字母作为列号定义范围在短期内可能更透明，但它也会使您的应用程序更加严格，因为它们是“硬编码”表示 - 不是动态的。
> 
> 感谢[金吉森](https://stackoverflow.com/users/1383120/kim-gysen)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-05T06:53:23.727

## 范围.整列

是的！你可以使用`Range.EntireColumn` [MSDN](https://msdn.microsoft.com/en-us/library/office/ff834476.aspx)

```
dim column : column = 4

dim column_range : set column_range = Sheets(1).Cells(column).EntireColumn 
```

## 范围（“列名：列名”）

如果您在特定列之后，您可以使用语法创建一个硬编码的列范围，例如`Range("D:D")`.

但是，我会使用整个列，因为它为以后更改该列提供了更大的灵活性。

## 工作表.列

`Worksheet.Columns`提供对工作表中列的范围访问。 [MSDN](https://msdn.microsoft.com/en-us/library/office/ff197266.aspx)

如果您想访问第一张表的第一列。您将调用`Columns`工作表上的函数。

```
dim column_range: set column_range = Sheets(1).Columns(1) 
```

该`Columns`属性也可在任何`Range` [MSDN上找到](https://msdn.microsoft.com/en-us/library/office/ff837125.aspx)

`EntireRow`如果您有单个单元格的范围但想到达该行上的其他单元格，这也很有用，类似于`LOOKUP`

```
dim id : id = 12345

dim found : set found = Range("A:A").Find(id)

if not found is Nothing then
    'Get the fourth cell from the match
    MsgBox found.EntireRow.Cells(4)
end if 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-13T16:33:30.600

这是 ConvertToLetter 函数的精简替换，理论上它应该适用于所有可能的正整数。例如，1412 产生“BBH”作为结果。

```
Public Function ColumnNumToStr(ColNum As Integer) As String
Dim Value As Integer
Dim Rtn As String
    Rtn = ""
    Value = ColNum - 1
    While Value > 25
        Rtn = Chr(65 + (Value Mod 26)) & Rtn
        Value = Fix(Value / 26) - 1
    Wend
    Rtn = Chr(65 + Value) & Rtn
    ColumnNumToStr = Rtn
End Function 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-11T17:16:59.790

如果您希望将列号转换为字母：

```
Function ConvertToLetter(iCol As Integer) As String
    Dim iAlpha As Integer
    Dim iRemainder As Integer
    iAlpha = Int(iCol / 27)
    iRemainder = iCol - (iAlpha * 26)
    If iAlpha > 0 Then
        ConvertToLetter = Chr(iAlpha + 64)
    End If
    If iRemainder > 0 Then
        ConvertToLetter = ConvertToLetter & Chr(iRemainder + 64)
    End If
End Function 
```

这样你可以做这样的事情：

```
Function selectColumnRange(colNum As Integer, targetWorksheet As Worksheet)
    Dim colLetter As String
    Dim testRange As Range
    colLetter = ConvertToLetter(colNum)
    testRange = targetWorksheet.Range(colLetter & ":" & colLetter).Select
End Function 
```

该示例函数将选择整个列（即 Range("A:A").Select)

来源： http: [//support.microsoft.com/kb/833402](http://support.microsoft.com/kb/833402)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-13T20:44:41.703

我真的很喜欢 stackPusher 的 ConvertToLetter 函数作为解决方案。然而，在使用它时，我注意到由于数学中的一些缺陷，在非常特定的输入处发生了几个错误。例如输入392返回'N\'，418返回'O\'，444返回'P\'等。

我对函数进行了重新设计，结果为所有输入产生了正确的输出，直到 703（这是第一个三字母列索引，AAA）。

```
Function ConvertToLetter2(iCol As Integer) As String
    Dim First As Integer
    Dim Second As Integer
    Dim FirstChar As String
    Dim SecondChar As String

    First = Int(iCol / 26)
    If First = iCol / 26 Then
        First = First - 1
    End If
    If First = 0 Then
        FirstChar = ""
    Else
        FirstChar = Chr(First + 64)
    End If

    Second = iCol Mod 26
    If Second = 0 Then
        SecondChar = Chr(26 + 64)
    Else
        SecondChar = Chr(Second + 64)
    End If

    ConvertToLetter2 = FirstChar & SecondChar

End Function 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-05T21:46:52.630

这些答案似乎奇怪地令人费解。除非我遗漏了什么......如果你想将数字转换为字母，你可以使用 for 循环将它们全部存储在一个数组中，然后调用与该列字母关联的数字。像这样

```
For intloop = 1 To 26
    colcheck(intloop) = Chr$(64 + intloop)
    For lenloop = 1 To 26
        colcheck((intloop * 26) + lenloop) = Chr$(64 + intloop) & Chr$(64 + lenloop)
        For terloop = 1 To 26
            colcheck((intloop * 676) + (lenloop * 26) + terloop) = Chr$(64 + intloop) & Chr$(64 + lenloop) & Chr$(64 + terloop)
            For qualoop = 1 To 26
                colcheck((intloop * 17576) + (lenloop * 676) + (terloop * 26) + qualoop) = Chr$(64 + intloop) & Chr$(64 + lenloop) & Chr$(64 + terloop) & Chr$(64 + qualoop)
            Next qualoop
        Next terloop
    Next lenloop
Next intloop 
```

然后只需使用 colcheck(yourcolumnnumberhere)，您将获得与该字母关联的列标题（即 colcheck(703) = AAA

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-22T12:01:06.323

哈哈，可爱的 - 让我也包括我的 stackPusher 代码版本:)。我们在 C# 中使用此功能。适用于所有 Excel 范围。：

```
public static String ConvertToLiteral(int number)
{
        int firstLetter = (((number - 27) / (26 * 26))) % 26;
        int middleLetter = ((((number - 1) / 26)) % 26);

        int lastLetter = (number % 26);
        firstLetter = firstLetter == 0 ? 26 : firstLetter;
        middleLetter = middleLetter == 0 ? 26 : middleLetter;
        lastLetter = lastLetter == 0 ? 26 : lastLetter;
        String returnedString = "";
        returnedString = number > 27 * 26 ? (Convert.ToChar(firstLetter + 64).ToString()) : returnedString;
        returnedString += number > 26 ? (Convert.ToChar(middleLetter + 64).ToString()) : returnedString;
        returnedString += lastLetter >= 0 ? (Convert.ToChar(lastLetter + 64).ToString()) : returnedString;
        return returnedString;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-18T09:42:31.950

```
Function fncToLetters(vintCol As Integer) As String

        Dim mstrDigits As String

    ' Convert a positive number n to its digit representation in base 26.
    mstrDigits = ""
    Do While vintCol > 0
        mstrDigits = Chr(((vintCol - 1) Mod 26) + 65) & mstrDigits
        vintCol = Int((vintCol - 1) / 26)
    Loop

    fncToLetters = mstrDigits

End Function 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-03T15:11:21.070

如果您不知道最后一行或最后一列是什么，但仍想使用 Range

```
LastRow = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Row
LastColumn = ActiveSheet.Cells(7, ActiveSheet.Columns.Count).End(xlToLeft).Column

'Column Transform number in Letter
Col_Letter = Split(Cells(1, LastColumn).Address(True, False), "$")(0)
x_range = "A1:"
y_range = Col_Letter & Trim(Str(LastRow))

'Set the range
rng_populated = x_range & "" & y_range

'Select the range
Range(rng_populated).Select 
```

# django - Django 制作：[Errno 13] 权限被拒绝：

> ID：13157364
> 
> 赞同：2
> 
> 时间：2012-10-31T11:56:08.177
> 
> 标签：django, file, ioerror

在我的 Django 应用程序中，我遇到了这种错误：“IOError: [Errno 13] Permission denied: 'file_name'”

这是我的代码：

```
def record_export():
    for file_name, tab_name in tab:
        if len(globals()[tab_name].objects.all()) <> 0:
            f = open(file_name, 'wb')
            writer = csv.writer(f, delimiter='|')
            for record in globals()[tab_name].objects.values_list():
                writer.writerow([unicode(s).encode("utf-8") for s in record]) 
            f.close() 
```

在开发环境中一切正常。我认为我有权限。在生产中我有：“IOError：[Errno 13] Permission denied：'file_name'”你知道为什么吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:30:09.143

Django 的 runserver 通常以 root 身份运行，这可能是您的问题。

您的网络服务器需要读取/写入文件的权限。您可以使用它`ls -l /your/path/to/file`来检查给定目录的权限。要更改权利和所有者，请使用`chmod`和`chown`。

如果您正在运行 apache2 网络服务器，您的用户和组在大多数情况下是`www-data`。

# yii - 管理数据以在 YII 框架中显示的正确方法？

> ID：13157365
> 
> 赞同：1
> 
> 时间：2012-10-31T11:56:08.317
> 
> 标签：yii

如果我有一家展示一堆产品的商店，并且我从数据库中以数组的形式返回这些产品，是否有一种特定的方式可以使用 YII 模板显示这些数据，或者只需遍历数组并打印就足够了根据需要在“divs”中输出？

我知道如果我只是在 DIV 中吐出它，它会起作用，但它是根据框架执行它的“正确”方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:20:40.113

为此，有[zii 小部件](http://www.yiiframework.com/doc/guide/1.1/en/extension.use#zii-extensions "http://www.yiiframework.com/doc/guide/1.1/en/extension.use#zii-extensions")和[许多扩展](http://www.yiiframework.com/extensions/?category=15 "http://www.yiiframework.com/extensions/?category=15")。

我认为对于商店来说[CListView](http://www.yiiframework.com/doc/api/1.1/CListView "http://www.yiiframework.com/doc/api/1.1/CListView")将是一个好的开始。有[许多 wiki](http://www.yiiframework.com/search/?q=clistview&lang=en&type=wiki "http://www.yiiframework.com/search/?q=clistview&lang=en&type=wiki")解释了很多关于 CListView 的内容。

您可以轻松扩展它并添加功能。

[当与数据提供者](http://www.yiiframework.com/doc/api/1.1/CDataProvider "http://www.yiiframework.com/doc/api/1.1/CDataProvider")一起使用时，Zii 小部件还提供分页、排序和自定义样式。

# pdf - 下载 PDF 文件会出现“网络错误”

> ID：13157375
> 
> 赞同：1
> 
> 时间：2012-10-31T11:56:23.823
> 
> 标签：pdf, download, typo3, fpdf, fpdi

我在一个 TYPO3 系统中，我有一个扩展名，我在其中使用 fpdf 构建了一个 PDF 文件。

当我提交带有数据的表单时，文件被下载（大约 3MB 文件），但是当下载达到 100% 时，它给了我一个“未知网络错误”。（这就是 Chrome 中的消息）

这是我的扩展： http: [//pastebin.com/8GQCcKWj](http://pastebin.com/8GQCcKWj)

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:39:36.803

简单的解决方案：不要做

```
return $pdf->Output('medienpass.pdf', 'D'); 
```

在您的 getPdf() 函数中，因为输出将包含在大量 html 代码中。

而是仅将您的 pdf 文件返回给客户：

```
die($pdf->Output('medienpass.pdf', 'D')); 
```

# java - Java世界中的类vs包vs模块vs组件vs容器vs服务vs平台

> ID：13157377
> 
> 赞同：54
> 
> 时间：2012-10-31T11:56:38.643
> 
> 标签：java, jakarta-ee, architecture, terminology, enterprise

我是 Java 世界的新手（7 年的低级纯 C）。

当我开始阅读 Java 相关网站时：

*   [http://wiki.apidesign.org/wiki/Main_Page](http://wiki.apidesign.org/wiki/Main_Page)
*   [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)

我对现有术语感到困惑：

*   班级
*   包裹
*   模块
*   零件
*   容器
*   服务
*   框架
*   平台

我发现了许多关于术语定义的资源（以及更多）：

*   [框架 vs. 工具包 vs. 库](https://stackoverflow.com/questions/3057526/framework-vs-toolkit-vs-library)
*   [框架和容器的区别？](https://stackoverflow.com/questions/7310283/difference-between-framework-and-container)
*   [Java中有哪些容器](https://stackoverflow.com/questions/1288708/what-are-the-containers-in-java)
*   [Java 容器的定义](https://stackoverflow.com/questions/7151206/definition-of-a-java-container)
*   [http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)（控制容器的反转和依赖注入模式）
*   [http://www.cafeaulait.org/course/week8/36.html](http://www.cafeaulait.org/course/week8/36.html)（什么是 AWT 容器？）
*   [http://en.wikipedia.org/wiki/Web_container](http://en.wikipedia.org/wiki/Web_container)
*   [http://netbeans.org/features/platform/（NetBeans](http://netbeans.org/features/platform/)平台）
*   [“应用程序框架”是什么意思？](https://stackoverflow.com/questions/4241919/what-is-meant-by-application-framework)
*   [什么是软件框架？](https://stackoverflow.com/questions/2964140/what-is-a-framework-what-does-it-do-why-do-we-need-a-framework)
*   [框架和库有什么区别？](https://stackoverflow.com/questions/148747/what-is-the-difference-between-a-framework-and-a-library)
*   [类库和框架有什么区别](https://stackoverflow.com/questions/724438/what-is-the-difference-between-a-class-library-and-a-framework)
*   [https://stackoverflow.com/questions/11576018/what-is-the-difference-between-a-javascript-framework-and-a-library](https://stackoverflow.com/questions/11576018/what-is-the-difference-between-a-javascript-framework-and-a-library)
*   [框架和工具包之间的主要区别是什么？](https://stackoverflow.com/questions/1415592/what-is-the-major-difference-between-a-framework-and-a-toolkit)
*   [http://blog.orderharmony.com/2011/07/libraries-vs-frameworks.html](http://blog.orderharmony.com/2011/07/libraries-vs-frameworks.html)
*   [http://www.javacodegeeks.com/2012/04/frameworks-vs-libraries-as-inheritance.html](http://www.javacodegeeks.com/2012/04/frameworks-vs-libraries-as-inheritance.html)
*   [库、平台和框架之间的区别？](https://stackoverflow.com/questions/48239046/difference-between-library-platform-and-framework)
*   [平台和框架有什么区别？](https://stackoverflow.com/questions/31503886/what-is-the-difference-between-a-platform-and-a-framework)
*   [框架和平台有什么区别](https://stackoverflow.com/questions/25028243/what-is-the-difference-between-a-framework-and-a-platform)
*   [模块、库和框架之间的区别](https://stackoverflow.com/questions/4099975/difference-between-a-module-library-and-a-framework)

但是这些资源中的每一个都是根据自己的目的定义它们的，在一般情况下，我仍然无法区分例如模块和组件。

请在大图中解释这些术语的含义（可以是单一类平台，制作容器需要多少模块等）。

**2019 年更新**来自[https://www.artima.com/lejava/articles/reuse3.html](https://www.artima.com/lejava/articles/reuse3.html)（我的突出显示）

> *Bill Venners*：框架、平台和工具包之间有什么区别，不同的灵活性需求是什么？
> 
> *Erich Gamma*：我将**平台**与**长期稳定性**联系在一起。在平台之上构建是安全的。平台提供**兼容性**保证。框架通常不具备这种品质，而且我已经看到**许多框架在****稳定性**方面的失败。如果您查看 Eclipse，是的，它包括框架、工具包并提供平台 API。所有这些都捆绑为插件。**框架抽象并提供更高级别的默认功能**。为此，**框架需要处于控制之中**。这种失控可能导致有时称为框架炎。
> 
> *Bill Venners*：工具包不是因为...
> 
> *Erich Gamma*：使用**工具包**，您可以**创建和调用工具包对象并注册侦听器以对事件作出反应**。你**在掌控之中**。**框架试图控制并告诉您何时该做什么**。**工具包**为您提供构建**块**，但由您来控制。

另一个引文回答了我天真的问题，有多少类使某个东西成为框架：

[https://www.artima.com/lejava/articles/reuse.html](https://www.artima.com/lejava/articles/reuse.html)

> *Erich Gamma*：...例如，JUnit 是一个小型框架。它是框架的“Hello, world”。您已定义`Test`、`TestCase`和`TestSuite`关系。此外，您可以通过在某处子类化来连接到框架。他们使用所谓的好莱坞原则“不要打电话给我们，我们会打电话给你”。该框架允许您定义您的自定义行为，并在轮到您做某事时回叫您。与 JUnit 一样，对吗？当它想为您执行测试时，它会回调您，但其余部分在框架中完成。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-31T12:08:05.830

`class` 类是基于类的面向对象编程中创建对象的蓝图；你应该学习 OOP 的基础知识，了解什么是对象、什么是类、什么是继承、多态性、封装，然后再学习 Java 的任何其他知识。

`package` 一个包是一个命名空间；它让您处理命名冲突。它基本上让您有两个名为 Employee 的类，如果它们位于不同的包中。

`module`它可能指的是 Java 库的分发和使用方式——JAR、WAR、EAR。

`component`可以看成是 AWT 中 GUI 的基类（或者 Swing 中的 JComponent），也可以看成是 EJB 的一种类型——一种满足某些要求的 POJO（Plain Old Java Object）；可能有其他含义，具体取决于上下文。

`container`在企业应用程序中，您显然最终会使用一些库和 Java EE；Java EE 库的问题在于它只提供 API 接口而不提供实现。然后，您编写和构建的应用程序被部署到一个`container`服务器中，该服务器附带了 Java EE API 的实现。有两种类型的容器：Web 容器（仅用于实现 Web 特定技术）和完整的 Java EE 容器（带有 Web 和其他 Java EE 技术的实现 - 命名服务、持久性、事务等）。

`service`Java中没有特殊含义。它可能与 Web 服务有关，Web 服务基本上提供了一种通过网络进行进程间通信的高级方法。

`platform`Java中没有特殊含义；它可以被看作是底层开发平台（Windows、Linux），或者随着云趋势它可以指平台即服务，云提供商提供基础设施和其他基础软件（操作系统、数据库、容器）。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-31T12:35:54.480

*   **类：**
    它是具有.java 扩展名的普通java 文件，它包含制作应用程序所需的所有对象、方法等，并且还从其他文件实现或扩展其他对象或方法。

*   **包：** 它是一堆类（.java）文件，由它们的功能或名称分开。所以它也有助于命名。

*   **模块：** 大型应用程序通常由多个部分构建，这些部分彼此之间的连接比与外部的连接更紧密。因此，人们希望让这些部分比外界更多地相互访问。人们可能还希望这些部分在系统中的许多点上重复使用，而不用担心共享数据的同步。这部分在java中称为模块。WAR、jar 等在 java 语言中被称为模块。

*   **组件：** 组件是较大程序或结构的可识别部分。通常，一个组件提供一个特定的功能或一组相关的功能。在面向对象编程和分布式对象技术中，组件是可重用的程序构建块，可以与分布式网络中同一台或其他计算机中的其他组件组合形成应用程序。组件在称为容器的上下文中运行。

*   **容器：** 组件在称为容器的上下文中运行。容器是基于Java 的Java EE 技术中Web 应用程序的重要组件。它负责维护服务器端的各个组件，包括 Java servlet、Java 服务器页面（JSP）和 Java 服务器面（JSF）。服务的提供和访问方式由合同决定，合同是 Web 应用程序和容器之间的协议。这在 Java EE 框架中提供了相当大的安全性，因为客户端应用程序不知道容器的存在，因此无法直接访问它。因此，Web 容器负责初始化 Web 应用程序组件并调用组件上的客户端请求。

*   **服务：** 服务是分布式计算的演进，基于同步和异步应用的请求/回复设计范式。应用程序的业务逻辑或单独的功能被模块化并呈现为消费者/客户端应用程序的服务。

*   **框架：** 框架对使用它们的代码强加了明确的结构，而库则没有。在软件中，框架是一组可重用的软件程序，构成应用程序的基础。框架帮助程序员快速构建应用程序。早些时候，开发复杂的 Web 应用程序非常困难。现在使用不同类型的框架（如 Struts、Struts 2、Hibernate、JSF、Spring 等）开发此类应用程序非常容易。

*   **平台：** 平台是指来自 Sun 的整个 Java 开发和执行环境。Java 程序由驻留在目标计算机中的运行时引擎（Java 虚拟机）执行。由于 Java 包含自己的操作环境，因此它被称为“平台”，与其他一旦编译后自行运行的编程语言形成鲜明对比。请参阅 Java、Java 2、Java 虚拟机和 Java 运行时环境。

# c# - c#移动Winamp主窗口

> ID：13157381
> 
> 赞同：3
> 
> 时间：2012-10-31T11:56:51.380
> 
> 标签：c#, winapi, resize, winamp

我正在尝试使用以下代码移动 winamps 主窗口：

```
[DllImport("user32.dll")]
    static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);
[DllImport("user32.dll")]
    static extern bool GetWindowRect(IntPtr hWnd, out RECT rect);
[DllImport("user32.dll")]
    static extern IntPtr GetForegroundWindow();

static void resize()
{
   Process w = new Process();
   w.StartInfo = new ProcessStartInfo("winamp.exe");
   w.Start();
   Thread.Sleep(5000);
   IntPtr hWnd = GetForegroundWindow();
   RECT rect;
   GetWindowRect(hWnd, out rect);
   int width = rect.right - rect.left;
   int height = rect.bottom - rect.top;
   MoveWindow(hWnd, 0, 0, width, height, true);
} 
```

此代码片段适用于我测试的所有进程，Winamp 除外。当我使用`mainWindowHandle`进程时，它会移动另一个窗口。有人知道如何让它与 Winamp 一起工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:11:50.380

我试过你的代码，它并不总是工作，它没有重新调整窗口大小，它只是移动它，实际上我在 2000 毫秒睡眠中发现了一个问题，你可以将其更改为 while 循环检查句柄是否为零，然后继续执行代码，

```
while (p.MainWindowHandle == 0)
{
}
IntPtr hWnd = p.MainWindowHandle; 
```

如果 winamp 花费太多时间来构建自己的窗口，这可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:18:38.290

使用以下代码，我可以确认通过 Win32 API 更改 WinAmp 的主窗口大小不起作用。

通过 Win32 API 更改其他 winamp 窗口大小确实有效，但不是解决方案：

```
public partial class Form1 : Form
{    
[DllImport("user32")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool EnumChildWindows(IntPtr window, EnumWindowProc callback, IntPtr i);
[DllImport("user32.dll")]
static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);
[DllImport("user32.dll")]
static extern bool GetWindowRect(IntPtr hWnd, out RECT rect);    
[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int Left;        // x position of upper-left corner
    public int Top;         // y position of upper-left corner
    public int Right;       // x position of lower-right corner
    public int Bottom;      // y position of lower-right corner
}    

private System.IntPtr hWnd;
private void button1_Click(object sender, EventArgs e)
{
    Process p = Process.Start(@"C:\Program Files\Winamp\winamp.exe");       
    try
    {
        do
        {
            p.Refresh();
        }
        while (p.MainWindowHandle.ToInt32() == 0);

        hWnd = new IntPtr(p.MainWindowHandle.ToInt32());
    }
    catch (Exception ex)
    {
        //Do some stuff...
        throw;
    }
}

private void button2_Click(object sender, EventArgs e)
{
    //Make sure we have a handle to the shelled exe
    if (hWnd == new IntPtr(0)) return;
    ResizeExternalExeChildWindows(hWnd);
}

private void ResizeExternalExeChildWindows(IntPtr parent)
{
    List<IntPtr> childWindows = GetChildWindows(hWnd);
    foreach (IntPtr childWindow in childWindows)
    {
        RECT rect;
        GetWindowRect(childWindow, out rect);
        int width = rect.Right - rect.Left;
        int height = rect.Bottom - rect.Top;
        MoveWindow(hWnd, 0, 0, width, height, true);
    }
}

// <summary>
/// Returns a list of child windows
/// </summary>
/// <param name="parent">Parent of the windows to return</param>
/// <returns>List of child windows</returns>
public static List<IntPtr> GetChildWindows(IntPtr parent)
{
    List<IntPtr> result = new List<IntPtr>();
    GCHandle listHandle = GCHandle.Alloc(result);
    try
    {
        EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
        EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
    }
    finally
    {
        if (listHandle.IsAllocated)
            listHandle.Free();
    }
    return result;
}

/// <summary>
/// Callback method to be used when enumerating windows.
/// </summary>
/// <param name="handle">Handle of the next window</param>
/// <param name="pointer">Pointer to a GCHandle that holds a reference to the list to fill</param>
/// <returns>True to continue the enumeration, false to bail</returns>
private static bool EnumWindow(IntPtr handle, IntPtr pointer)
{
    GCHandle gch = GCHandle.FromIntPtr(pointer);
    List<IntPtr> list = gch.Target as List<IntPtr>;
if (list == null)
{
    throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
}
list.Add(handle);
//  You can modify this to check to see if you want to cancel the operation, then return a null here
return true;

}

/// <summary>
/// Delegate for the EnumChildWindows method
/// </summary>
/// <param name="hWnd">Window handle</param>
/// <param name="parameter">Caller-defined variable; we use it for a pointer to our list</param>
/// <returns>True to continue enumerating, false to bail.</returns>
public delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);

}
} 
```

**原因**

因为 WinAmp 是可换肤的，它支持通过配置文件调整大小（而不是通过使用 win32 API 的外部应用程序）。

**解决方案**

打开文件 C:\Users[username]\AppData\Roaming\Winamp\studio.xnf 并编辑以下值：

```
 <entry name="Bento_nomax_h" value="492" />
  <entry name="Bento_nomax_w" value="633" />
  <entry name="Bento_nomax_x" value="27" />
  <entry name="Bento_nomax_y" value="16" /> 
```

我正在使用便当皮肤。如果您打开 WinAmp.ini 文件，您可以检测到正在使用的皮肤：

> 皮肤=便当

为 WinAmp 的主窗口设置初始大小的解决方案是在使用`Process.Start`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:53:54.197

这对我使用最新版本有用，请试一试：

```
 internal struct RECT
    {
        public int left;
        public int top;
        public int right;
        public int bottom;
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall, ExactSpelling = true, SetLastError = true)]
    internal static extern bool GetWindowRect(IntPtr hWnd, ref RECT rect);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, SetWindowPosFlags uFlags);

    public static class HWND
    {
        public static IntPtr
        NoTopMost = new IntPtr(-2),
        TopMost = new IntPtr(-1),
        Top = new IntPtr(0),
        Bottom = new IntPtr(1);
    }

    [Flags]
    public enum SetWindowPosFlags : uint
    {
        SWP_ASYNCWINDOWPOS = 0x4000,
        SWP_DEFERERASE = 0x2000,
        SWP_DRAWFRAME = 0x0020,
        SWP_FRAMECHANGED = 0x0020,
        SWP_HIDEWINDOW = 0x0080,
        SWP_NOACTIVATE = 0x0010,
        SWP_NOCOPYBITS = 0x0100,
        SWP_NOMOVE = 0x0002,
        SWP_NOOWNERZORDER = 0x0200,
        SWP_NOREDRAW = 0x0008,
        SWP_NOREPOSITION = 0x0200,
        SWP_NOSENDCHANGING = 0x0400,
        SWP_NOSIZE = 0x0001,
        SWP_NOZORDER = 0x0004,
        SWP_SHOWWINDOW = 0x0040,
    }

    [DllImport("user32.dll", SetLastError = true)]
    private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    static void Resize()
    {
        IntPtr winampMainWindow = IntPtr.Zero;

        while (true)
        {
            winampMainWindow = FindWindow("BaseWindow_RootWnd", "Main Window");
            if (winampMainWindow != IntPtr.Zero)
            {
                RECT rect = new RECT();
                GetWindowRect(winampMainWindow, ref rect);
                int width = rect.right - rect.left;
                int height = rect.bottom - rect.top;
                SetWindowPos(winampMainWindow,
                    HWND.Top,
                    0,
                    0,
                    width,
                    height,
                    SetWindowPosFlags.SWP_SHOWWINDOW | SetWindowPosFlags.SWP_NOZORDER | SetWindowPosFlags.SWP_NOSIZE | SetWindowPosFlags.SWP_NOSENDCHANGING | SetWindowPosFlags.SWP_NOOWNERZORDER | SetWindowPosFlags.SWP_NOCOPYBITS);
                break;
            }
            Thread.Sleep(1000);
        }
    }

    [STAThread]
    static void Main()
    {
        Process.Start("winamp.exe");
        Resize();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-19T19:34:41.177

绝对的噩梦！但是，右键单击“歌曲窗口”会打开停靠菜单-我认为取消停靠-（某些东西）有效。这些选项之一让我可以移动该死的东西。这是侥幸，但那里出现了一些有效的东西。

# ruby-on-rails - 如何在 Rails 2.3.14 应用程序中使用“邮件”gem

> ID：13157383
> 
> 赞同：1
> 
> 时间：2012-10-31T11:57:00.257
> 
> 标签：ruby-on-rails, actionmailer

我有一个在 rails 2.3.14 上运行的 rails 应用程序。我想将此应用程序升级到 rails 3。但在此之前，我希望将 TMail gem（rails 2.3.x 中的默认值）替换为 Mail gem（rails 3.xx 中的默认值）。

我需要做什么所有配置更改？

# c# - 如何将组合框添加为标签控件的上下文菜单项。WPF 应用程序

> ID：13157384
> 
> 赞同：1
> 
> 时间：2012-10-31T11:57:01.147
> 
> 标签：c#, wpf, wpf-controls, contextmenu

我想在后面的代码中为 wpf 应用程序中的某些标签控件添加组合框作为 ContextMenu 项。我该怎么做？我在网上搜索了很多，但没有任何成果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:14:06.540

以下代码只是关于如何构建您的`ContextMenu`. 它会给你 a`ComboBox`作为 a 的内容`MenuItem`。

```
<Label Content="label with context menu">
    <Label.ContextMenu>
        <ContextMenu>
            <MenuItem Header="menu 1">
                <ComboBox>
                    <ComboBoxItem Content="combo 1" IsSelected="True" />
                    <ComboBoxItem Content="combo 2" />
                    <ComboBoxItem Content="combo 3" />
                </ComboBox>
            </MenuItem>
        </ContextMenu>
    </Label.ContextMenu>
</Label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:19:41.567

另一种选择...这允许 ComboBox 在您执行右键单击时直接出现。将其复制并粘贴到 KAXAML 中以查看它是否正常工作。

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid>  
  <Label Content="Some Label">
  <Label.ContextMenu>
  <ContextMenu>
  <ContextMenu.Template>
  <ControlTemplate>
  <ComboBox SelectedIndex="0">
  <ComboBoxItem>One</ComboBoxItem>
  <ComboBoxItem>Two</ComboBoxItem>
  <ComboBoxItem>Three</ComboBoxItem>
  </ComboBox>
  </ControlTemplate>
  </ContextMenu.Template>
  </ContextMenu>
  </Label.ContextMenu>
  </Label>
  </Grid>
</Page> 
```

![在此处输入图像描述](../Images/5748547a36f1ff30abab3d2a86aff1b0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:54:15.580

我得到了解决方案，我们可以通过以下方式做到这一点：

```
 ContextMenu contextmenu = new ContextMenu();
        ComboBox CmbColorMenu = new ComboBox();
        CmbColorMenu.ItemsSource = FontColors;// FontColors is list<objects>
        CmbColorMenu.DisplayMemberPath = "Text";
        contextmenu.Items.Add(CmbColorMenu); 
```

# python - Is there a way to auto-resume interrupted uploads to youtube using Python GData?

> ID：13157388
> 
> 赞同：0
> 
> 时间：2012-10-31T11:57:09.990
> 
> 标签：python, youtube-api, gdata

I'm currently using the default settings (which I believe use API v. 1) and the standard youtube-upload python script to upload videos. However, any slight interruption in the network gets the entire upload aborted and it has to start all over from the beginning (plus, I need to clean up the failed uploads..)

Is there a simple way to get such uploads to auto-resume, through repeated connection attempts after each connection disruption? I assume the solution will have to include, among other things, using gdata api v.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:09:14.177

您应该试用 V3 api。这是一个示例，其中包括进行可恢复的上传。

[https://developers.google.com/youtube/v3/guides/uploading_a_video#Sample_Code](https://developers.google.com/youtube/v3/guides/uploading_a_video#Sample_Code)

```
def initialize_upload(options):
  youtube = get_authenticated_service()

  tags = None
  if options.keywords:
    tags = options.keywords.split(",")

  insert_request = youtube.videos().insert(
    part="snippet,status",
    body=dict(
      snippet=dict(
        title=options.title,
        description=options.description,
        tags=tags,
        categoryId=options.category
      ),
      status = dict(
        privacyStatus=options.privacyStatus
      )
    ),
    media_body=MediaFileUpload(options.file, chunksize=-1, resumable=True)
  )

  resumable_upload(insert_request) 
```

# java - How to Set User Defined value in a label

> ID：13157389
> 
> 赞同：0
> 
> 时间：2012-10-31T11:57:10.860
> 
> 标签：java, javafx

I am working on an JavaFX application and I have to set system related information in a JavaFX label.

I am doing like given as below:

```
systemInfo.setHdUsageTxt(Integer.toString(Runtime.getRuntime().availableProcessors())); 
```

Here `hdUsageTxt` is a JavaFX label in which I have to set number of available processors at a time. But it is not setting String or Integer value in this label. And giving exception. Please suggest which type of data JavaFX label and TextField takes and how to set value in it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:07:12.570

尝试

```
systemInfo.getHdUsageTxt().setText(Integer.toString(Runtime.getRuntime().availableProcessors())); 
```

如果没有帮助，请发布您的异常堆栈跟踪。
两者`javafx.scene.control.Label`都有`javafx.scene.control.TextField`一个 text 属性，它的类型是`javafx.beans.property.StringProperty`. `setText(String text)`您可以使用和访问此属性的值`getText()`。

# javascript - datatables fn.Filter

> ID：13157390
> 
> 赞同：0
> 
> 时间：2012-10-31T11:57:12.530
> 
> 标签：javascript, jquery, datatables

I'm using datatables plugin but I have a problem with the search. When I do look like this:

```
$("#productomostrar").change(function() {
   tablalistaproductos.fnFilter($(this).val(),null,false,false,false,false);
}); 
```

to not be displayed in the search box on the table. But when I try to use the search box does not respect me for the previous search. Any help? I do not want to use ajax because all data by loading the page and I have them loaded. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:02:04.540

如[API](http://api.jquery.com/change/)中所述- 函数的第一个参数是事件对象 - 因此`this`指的是事件对象，而不是更改的元素。

# oracle - Dynamic typing or generics in Oracle PL/SQL

> ID：13157392
> 
> 赞同：4
> 
> 时间：2012-10-31T11:57:22.830
> 
> 标签：oracle, generics, plsql

For some reason, I have certain fields in a table, that are collections of chars. Chars of different length. Example:

```
create or replace type t_charray_1 as varray(5) of char(1);
create or replace type t_charray_2 as varray(5) of char(2);
create or replace type t_charray_3 as varray(5) of char(3);
create or replace type t_charray_4 as varray(5) of char(4);

create table mytable (
field1 number,
field2 t_charray_1,
field3 t_charray_3, 
```

Also, I have a function that returns a (fixed length) string representation of a `mytable` record. This function calls other functions that are returning the string representation of a given collection-typed field. Examples:

```
 function to_chr(
    p_array in t_charray_1, 
    pad_length in number, 
    p_list_length in number
  ) return char as
    v_res varchar2(255) := '';
  begin
    for i in 1 .. p_list_length loop
      if p_array is not null and p_array.exists(i) and p_array(i) is not null then
        v_res := v_res || rpad(p_array(i), pad_length, ' ');
      else
        v_res := v_res || rpad(' ', pad_length, ' ');
      end if;
    end loop;
    return v_res;
  end to_chr;
  ------------------------------------------------------------------------------
  function to_chr(
    p_array in t_charray_2, 
    pad_length in number, 
    p_list_length in number
  ) return char as
    v_res varchar2(255) := '';
  begin
    for i in 1 .. p_list_length loop
      if p_array is not null and p_array.exists(i) and p_array(i) is not null then
        v_res := v_res || rpad(p_array(i), pad_length, ' ');
      else
        v_res := v_res || rpad(' ', pad_length, ' ');
      end if;
    end loop;
    return v_res;
  end to_chr; 
```

Note that these functions are *overloaded* versions of each other. The only difference in their signature is the type of the `p_array` argument.

Please also note that *the bodies of these functions are identical*.

**Motivation**

I want to eliminate duplicate code. What are my choices?

**EDIT** I have heard of sys.anydata but never used it. Can it be a solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:08:42.943

尝试：

```
create or replace function to_chr(p_array       in anydata,
                                  pad_length    in number,
                                  p_list_length in number) return char as

  v_res varchar2(255) := '';
  x     number;

  v_array t_charray_4;

  v_array1 t_charray_1;
  v_array2 t_charray_2;
  v_array3 t_charray_3;

begin

  dbms_output.put_line(p_array.GetTypeName);
  case p_array.GetTypeName
    when '<schema>.T_CHARRAY_1' then
      x := p_array.GetCollection(v_array1);
      select cast(v_array1 as t_charray_4) into v_array from dual;
    when '<schema>.T_CHARRAY_2' then
      x := p_array.GetCollection(v_array2);
      select cast(v_array2 as t_charray_4) into v_array from dual;
    when '<schema>.T_CHARRAY_3' then
      x := p_array.GetCollection(v_array3);
      select cast(v_array3 as t_charray_4) into v_array from dual;
    when '<schema>.T_CHARRAY_4' then
      x := p_array.GetCollection(v_array);
  end case;

  for i in 1 .. p_list_length loop
    if v_array is not null and v_array.exists(i) and v_array(i) is not null then
      v_res := v_res || rpad(v_array(i), pad_length, ' ');
    else
      v_res := v_res || rpad(' ', pad_length, ' ');
    end if;
  end loop;
  return v_res;
end to_chr; 
```

你可以像这样运行它：

```
declare
  p_array anydata;
  v_array t_charray_3 := new t_charray_3('aaa', 'bbb');
  v_res   varchar2(255);
begin
  p_array := anydata.convertcollection(v_array);

  v_res := to_chr(p_array => p_array, pad_length => 2, p_list_length => 3);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:44:12.473

您可以编写一个采用最大类型的过程，并在传递较小的类型之前显式地将它们转换为较大的类型。注意 CAST 只能在 SQL 中使用

```
DECLARE

  x t_charray_1 := t_charray_1();
  y t_charray_2 := t_charray_2();

  PROCEDURE foo( p_foo t_charray_2 )
  AS
  BEGIN
    FOR i IN p_foo.FIRST..p_foo.LAST loop
      dbms_output.put_line( p_foo(i) );
    END LOOP;
  END;

BEGIN
  x.EXTEND;
  x.EXTEND;
  x(1) := 'A';
  x(2) := 'B';

  y.EXTEND;
  y.EXTEND;
  y(1) := 'AA';
  y(2) := 'BB';

  foo(y);

  SELECT CAST(x AS t_charray_2) INTO y FROM dual;
  foo(y);
END;
/ 
```

# excel - 如何修复 cognos 中的 excel 外观？

> ID：13157398
> 
> 赞同：0
> 
> 时间：2012-10-31T11:57:32.340
> 
> 标签：excel, cognos, cognos-8, cognos-bi, cognos-tm1

我做一个pdf格式的报告。没关系。但是当我将它导出到 excel 时，excel 上有很多工作表。我不想要它。我想要 1 张。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:32:18.480

取决于您的 Cognos 版本，您可以在 Cognos 8.X 中使用 Excel 2000 单页格式：
[Cognos 8.4.1 Excel 格式](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cra.8.4.0.doc/ug_cra_id28123ModifyingtheCognosReportViewerStyleSheets.html)
但是，我假设您使用的是 Cognos 10.X。在此版本中，此功能已弃用：
[Excel 2000 和 Excel 2000 单张报表输出](http://pic.dhe.ibm.com/infocenter/cbi/v10r2m0/topic/com.ibm.swg.ba.cognos.ug_cr_pps.10.2.0.doc/c_rs_deprecated_excel_2000.html?path=4_1_1_3_0#rs_deprecated_excel_2000)

因此，您可以使用以下选项：
1\. 以 CSV 或 Excel 2007 数据格式导出报表。如果不需要格式，这是一个很好的选择。
2\. 更改报表布局以支持单表 excel：在一页中创建所有报表对象，删除任何页面集定义。
您可以使用渲染变量为 Excel 创建单独的输出，并为其他格式创建单独的输出。

# vba - 如何在 VBA 中使用静态数组作为类属性

> ID：13157400
> 
> 赞同：1
> 
> 时间：2012-10-31T11:57:34.467
> 
> 标签：vba, excel

我在 MyClass2 中有以下属性：

```
 Private MyClass1Array(1 To 4) As MyClass1 
```

其中 MyClass1 是我定义的另一个类。我不知道如何处理这个属性：它不能设置为 public，所以我在 MyClass2 模块中写了这个：

```
Public Property Let SetMyClass1Array(i As Integer, c As MyClass1)
    MyClass1Array(i) = c
End Property

Public Property Get GetMyClass1Array(i As Integer) As MyClass1
    GetMyClass1Array = MyClass1Array(i)
End Property 
```

但这也行不通。如何正确编写此属性？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:00:55.820

当您使用类对象时，您需要在`Set`处理对象引用时使用，而不是原始数据类型值。

```
Public Property Let SetMyClass1Array(i As Integer, c As MyClass1)
    Set MyClass1Array(i) = c
End Property

Public Property Get GetMyClass1Array(i As Integer) As MyClass1
    Set GetMyClass1Array = MyClass1Array(i)
End Property 
```

# c# - jqgrid scroll is not working when grouping is enable

> ID：13157408
> 
> 赞同：0
> 
> 时间：2012-10-31T11:58:12.937
> 
> 标签：c#, jquery, asp.net-mvc, razor, jqgrid

I am working in "jquery.jqGrid-4.4.1" version of jqgrid. I have huge data to show in grid that's why I need dynamic loading on scroll. I set scroll to 1 its working fine without grouping. Following is the example of using scroll but grouping is set to false.

```
{
....
rownum: 30,
scroll: 1,
grouping: false, 
groupingView : { 
    groupField : ['BillTitle'],
    groupColumnShow : [true], 
    groupText : ['<b>{0}</b>'], 
    groupCollapse : false, 
    groupOrder: ['asc'], 
    groupSummary : [true], 
    groupDataSorted : true    
   }, 
} 
```

On the other end I need to use grouping of jqgrid, when I set grouping to true dynamic loading of scroll not working. Following is not working but I need both functionality.

```
{
....
rownum: 30,
scroll: 1,
grouping: true, 
groupingView : { 
    groupField : ['BillTitle'],
    groupColumnShow : [true], 
    groupText : ['<b>{0}</b>'], 
    groupCollapse : false, 
    groupOrder: ['asc'], 
    groupSummary : [true], 
    groupDataSorted : true    
   }, 
} 
```

Please help me. Your help should be highly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:51:28.617

正如[维基页面](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agrouping)所说：

**限制**

启用分组后，将在代码中显式设置以下选项：

```
scroll = false;
rownumbers = false;
treeGrid = false;
gridview = true (afterInsertRow does not fire too); 
```

我遇到了同样的问题。目前，没有办法实现这一点，但它会非常好。也许有一些代码编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:24:30.880

我有完全相同的问题，但发现如果将 rowNum 设置为 -1，它将显示所有分组数据。奇怪的是，在文档中 rowNum 上的 -1 选项被明确删除：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)

# php - MySQL Table Correlation

> ID：13157409
> 
> 赞同：2
> 
> 时间：2012-10-31T11:58:13.667
> 
> 标签：php, mysql, enums, correlation

I'm kinda a noob so I don't know if this is actually possible.

I have two field in my MySQL database that I want to correlate:

```
Level int(11)
Rank enum('Hobo','Shippai','NoLifer',Troublemaker','gangster') (and so it continues.) 
```

I want so that `level 1=Hobo`, `level 2=Shippai` etc. etc.

Currently it looks like this:

`Level: {$ir['level']}`

And want it to look like this on the website:

```
Rank: Hobo 
```

Thanks in advance for any help...

Edit:

Here's the code for the table:

> ";
> $exp=(int)($ir['exp']/$ir['exp_needed']*100);
> print "
> **Name:** {$ir['username']}**Crystals:** {$cm}
> **Level:** {$ir['level']}
> **Exp:** {$exp}%
> **Money:** $fm
> **Gang:** ";
> $qs=$db->query("SELECT * FROM gangs WHERE gangID={$ir['gang']}");
> $rs=$db->fetch_row($qs);
> if(!$db->num_rows($qs) )
> {
> print "No Gang";
> }
> else
> {
> print" {$rs['gangNAME']} ";
> } print " **Property:** {$ir['hNAME']}
> **Days Old:** {$ir['daysold']} **Health:** {$ir['hp']}/{$ir['maxhp']} **Energy:** {$ir['energy']}/{$ir['maxenergy']} **Brave:** {$ir['brave']}/{$ir['maxbrave']} **Will:** {$ir['will']}/{$ir['maxwill']}
> ";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:04:12.500

在 have, id(int, primary key, auto increment), name(char20) 中创建一个名为 rank_define 的新表，添加您的命名排名，如下所示：

编号 | 姓名

1 | 流浪汉

2 | 石牌

在您的代码中

```
$user_id = 1; // or whatever the users rank is
$query = mysql_query("SELECT `name` FROM rank_define WHERE id='$user_id'"); 
```

这将返回一个结果集，因此您需要执行以下操作：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "rank: " . $row['name'];  // will output rank: Hobo
} 
```

我认为这就是您的意思，是针对用户帐户还是其他不同的东西？这是假设没有帐户，您只是在搜索结果。

如果它是用户帐户系统的一部分，您将需要一个用户表，例如：id（auto inc、primary key、int）、name、rank 等。

在排名中，他们的排名是从 rank_define 表中插入的，因此 1 = hobo，2 = shippai 等。然后您将查询该表

更新的答案：

好的，所以你有 while 循环。`while ($row = mysql_fetch_array($query, MYSQL_NUM)) {`.

它会是这样的：

```
 <table>
    <?php
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        echo "<tr>";
        echo "<td>Name: " . $row['name'] . "</td>";  // will output their name / account whatever
        echo "<td>Rank: " . $row['rank'] . "</td>";  // will output their rank
        echo "</tr>";
    }
    ?>
</table> 
```

# delphi - How do I convert a relative PIDL into an absolute PIDL?

> ID：13157412
> 
> 赞同：2
> 
> 时间：2012-10-31T11:58:17.410
> 
> 标签：delphi, winapi

I want to use `SHGetFileInfo` to get windows control panel icon,I use Shell to get windows control panel Code:

```
var
  psfDeskTop: IShellFolder;
  psfWork: IShellFolder;

  pidworkDir: PITEMIDLIST;
  pidChild: PITEMIDLIST;

  pEnumList: IEnumIDList;
  celtFetched: ULONG;
  //chEaten, dwAttributes: ULONG;
  FileInfo: SHFILEINFOW;

  //conGUID: string;
  StrRetName: TStrRet;
  Name: PChar;

begin

  SHGetDesktopFolder(psfDeskTop);
  SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidworkDir);
  psfDeskTop.BindToObject(pidworkDir, nil, IID_IShellFolder, psfWork);
  psfWork.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_FOLDERS or SHCONTF_INCLUDEHIDDEN, pEnumList);

  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    //here I want to use SHGetFileInfo to get file icon
    //but , SHGetFileInfo need a absolute PIDL,IEnumIDList enumerates relative PIDL

  end  

end; 
```

I found a function called [ILCombine](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773321%28v=vs.85%29.aspx) in MSDN to do that , but I can't found in Delphi , I wonder if possible to combine pidworkDir and pidChild to get a absolute PIDL in Delphi?

Or is there any other way to get a file's icon?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:21:11.320

你确实可以[`ILCombine`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776437.aspx)从德尔福打电话。您需要使用本`ShlObj`机。

```
uses
  ShlObj;
....
pidItemAbsolute = ILCombine(pidworkDir, pidChild); 
```

如果您的 Delphi 没有`ILCombine`声明，那么您可以像这样导入它：

```
function ILCombine(pidl1, pidl2: PItemIDList): PItemIDList; 
    stdcall; external 'shell32.dll'; 
```

# git - Run git pull on empty repository without error

> ID：13157417
> 
> 赞同：1
> 
> 时间：2012-10-31T11:58:47.897
> 
> 标签：git

I have a list of directories where I want to run `git pull`

Some of these may be empty.

When I run `git pull` on it, I get this error:

```
Your configuration specifies to merge with the ref 'master'
from the remote, but no such ref was fetched. 
```

and an exit code of `1`

I have my script to exit if any command fails.

Is it possible to detect if it failed due to this error? Or any other way to pull which doesn't error out on empty repositories?

Edit: `.git/config`

```
git:(master) cat .git/config 
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = <git repo url>
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:41:53.097

这是取自[这里](https://stackoverflow.com/questions/895819/whats-the-most-straightforward-way-to-clone-an-empty-bare-git-repository)

***要在path***克隆一个空仓库，

1.  在**~/git/onefile**中保留一个非裸 git 存储库，其中包含一个无害
    文件，例如 .gitignore。（或者，
    动态创建这样的存储库。）
2.  (cd ~/git/onefile; git push ***path*** master)
3.  git clone -o*名称* ***路径***

换句话说，不要试图克隆空的 repo，而是在创建它之后，向它推送一个包含一个无害文件的简单 repo。然后它不再是空的，可以克隆了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-30T02:16:57.107

您可以在远程参考存在上对其进行测试。例如，主引用在 init 之后还不存在，所以在 windows 批处理脚本中它会是这样的：

```
git ls-remote -h --exit-code myrepo master > nul && (
  git pull myrepo master
) 
```

# jquery - Jquery append a list to specific element by id

> ID：13157419
> 
> 赞同：0
> 
> 时间：2012-10-31T11:58:50.047
> 
> 标签：jquery

I have this html:

```
 <div id="wrapper">
<div id="gamelist"></div>
</div> 
```

and i want to place a unordered list in the gamelist div via Jquery.

```
 var gamenr = 0;
            $.each(response.payload, function(key, value) { 
                    //alert(key + ': ' + value);
                $('#gamelist').append("<ul id='"+gamenr+"' class='game'></ul>");

                $.each(value, function(key, value){
                    //alert(key +': ' + value);     
                    $("#gamelist").attr('id', gamenr).append("<li>"+value+"</li>");
                });
                gamenr++;
            }); 
```

The only thing that shows up, is the first value. gamenr is supposed to make a 'unique but not so beautifull' id.

I'd like to know why the rest of the values wont show up.

Thanks in advance,

Tim A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:03:47.287

您在`#gamelist`第一次迭代中更改了 ID，然后您尝试`#gamelist`在第二次迭代中追加到等，这是一个不再存在的元素，因为您在第一次迭代中更改了 ID：

```
var gamenr = 0;
$.each(response.payload, function(key, value) {
    var gamelist = $('<ul />', {id: 'a_'+(gamenr++), 'class':'game'});

    $.each(value, function(j, k) {
        var li = $('<li />', {text: k});
        gamelist.append(li);
    });

    $('#gamelist').append(gamelist);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:01:17.557

您将`<li>`元素附加到同一个`<div>`块但不附加到附加的`<ul>`：

```
var gamenr = 0;
$.each(response.payload, function(key, value) {
    $("#gamelist").append("<ul id='" + gamenr + "' class='game'></ul>");

    $.each(value, function(key, value) {
        $("#" + gamenr).append("<li>" + value + "</li>");
    });

    gamenr++;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:02:17.340

看这个

```
$("#gamelist").attr('id', gamenr) 
```

它会将具有 id 的元素的 id 设置`gamelist`为 gamenr 的内容。这不是你想要的。试试这个

```
$('#'+gamenr) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:07:51.243

只需更改以下代码

```
$("#gamelist").attr('id', gamenr).append("<li>"+value+"</li>"); 
```

进入下一个

```
$("#gamelist ul[id='" + gamenr + "']").append("<li>"+value+"</li>"); 
```

# sql - How to use COUNT in my sql query

> ID：13157422
> 
> 赞同：1
> 
> 时间：2012-10-31T11:58:59.540
> 
> 标签：sql, count

I'm trying to count the number of occurrence of product_id. This is my query that's return 10 products but not according the number of occurrence of product_id.

```
SELECT name, category_id, product_id 
FROM product, notification 
WHERE type='product_consumed' OR type='product_rate' AND product.id = notification.product_id AND category_id="1" 
GROUP BY product_id ORDER BY product.category_id ASC LIMIT 10 
```

I tried to COUNT the occurrenceof product_id like this, but it returns to me bad results,

```
SELECT name, category_id, product_id, COUNT(*) AS most_viewed 
FROM product, notification 
WHERE type='product_consumed' OR type='product_rate' AND product.id = notification.product_id AND category_id=".$cat." 
GROUP BY product_id ORDER BY product.category_id ASC, most_viewed DESC LIMIT 10 
```

My wish is to have a sql response like this :

Category of the product | Name of product | Number of views

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:06:34.010

试试这个，你缺少一组括号

```
SELECT name, category_id, product_id, COUNT(*) AS most_viewed 
FROM product, notification 
WHERE (type='product_consumed' OR type='product_rate') AND product.id = notification.product_id AND category_id=".$cat." 
GROUP BY product_id 
ORDER BY product.category_id ASC, most_viewed DESC LIMIT 10 
```

# c++ - execve /bin/bash: h: No such file or directory

> ID：13157423
> 
> 赞同：-1
> 
> 时间：2012-10-31T11:59:00.743
> 
> 标签：c++, unix, exec, rhel5

On couple of RHEL 5.8, I am facing problem with execve calls. The execve is not failing however, getting the following error:

```
/bin/bash: h: No such file or directory 
```

I am using it the following way in C++ code:

```
::fork();
.
.
.
char achWritePipeDescriptor[8], achReadPipeDescriptor[8];
snprintf(achWritePipeDescriptor, sizeof(achWritePipeDescriptor), "%d", fWritePipeDescriptor);
    snprintf(achReadPipeDescriptor, sizeof(achReadPipeDescriptor), "%d", fReadPipeDescriptor);

// fWritePipeDescriptor and fReadPipeDescriptor are integers

::execl("/bin/sh", "/bin/sh", "Launcher.sh", achWritePipeDescriptor, achReadPipeDescriptor, (char*)0);

switch(errno)
{
default:
    printf("\n Failed to launch Launcher.sh\n");
    break;
} 
```

The exec call here is not failing, but I was getting above error when trying to interact with the above script.sh. The strace output for this process looks like following:

```
execve("/bin/bash", ["/bin/bash", "h", "10", "6"], [/* 36 vars */]) = 0
.
.
.
open("/usr/share/locale/en/LC_MESSAGES/libc.mo", O_RDONLY) = -1 ENOENT (No such file or directory)
fstat(2, 0x7fff23708910)                = -1 EBADF (Bad file descriptor)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b9d1c785000
write(2, "/bin/bash: h: No such file or di"..., 40) = -1 EBADF (Bad file descriptor)
exit_group(127)                         = ?
Process 13030 detached 
```

There is no file "h" being referenced here, but the last character of the script name is "h". Also, the script that I am trying to exec does exist at expected location and is having sufficient permissions.

I have no clue from where the "h" is coming.

I changed my execve call to following:

```
::execl("Launcher.sh", "Launcher.sh", achWritePipeDescriptor, achReadPipeDescriptor,(char*)0); 
```

With this, it worked properly, but down the code below, I am seeing similar error for another execl call. The difference in the second exec is that the binary is different, but the error remains the same.

I am not sure, if this is server specific issue.

Any clues, any troubleshooting steps would be of great help.

My Bad, I should have mentioned it earlier itself, the `<script.sh>` is a placeholder. I tried to indicate that a shell script is what I am trying to exec. Also, `writefd` and `readfd` are `char*` here. It can be clearly seen in the strace output I have pasted here. Again, the exec is not failing here as i am not seeing the "Failed to launch Launcher.sh" message.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:28:32.037

除了MikeyB 解决的`<script.sh>`vs问题之外，这里还有另一个问题。`"script.sh"`另一个问题是`writefd`and`readfd`被传递给`execl`. 给定名称，我假设它们是一个管道的写入端和另一个管道的读取端。如果是这种情况，`writefd`并且`readfd`是整数，而不是`char*`指针。

`dup2`使某些脚本通过管道与您的程序通信的最简单方法是`dup2`在调用`execl`. 该脚本只是从标准输入读取并写入标准输出。您根本不需要将这些文件描述符传递给脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:10:52.970

```
execl("/bin/sh", "/bin/sh", <script.sh>, writefd, readfd, NULL); 
```

那是行不通的……`<script.sh>`不是有效的C++。

将其更改为：

```
execl("/bin/sh", "/bin/sh", "script.sh", writefd, readfd, NULL); 
```

# ajax - Primefaces commandButton calls action method on page refresh

> ID：13157424
> 
> 赞同：1
> 
> 时间：2012-10-31T11:59:19.337
> 
> 标签：ajax, jsf-2, primefaces

**Completely edited:** Maybe I was mixing problems and misinterpreted. After simplifying my code the question simplifies to: How can I prevent the `<p:commandButton>` from executing it's action method on page refresh (like when you hit F5 inside browser window)?

JSF Code:

```
 <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <h:body>
        <h:form>
            <h:outputText value="#{bugBean.number}" />
            <h:outputText value="#{bugBean.isComplete()}" />
            <p:commandButton id="entryCommand" value="add"
                action="#{bugBean.increase()}" update="@form" oncomplete="#{bugBean.complete()}"/>
        </h:form>
    </h:body>
    </html> 
```

backing bean code:

```
 package huhu.main.managebean;
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

@Named
@SessionScoped
public class BugBean implements Serializable {

   private static final long serialVersionUID = 1L;
   private int number;
   private boolean isComplete = false;

   public void increase(){
      number++;
   }

   public void complete(){
      isComplete = true;
   }

   public int getNumber() {
      return number;
   }

   public void setNumber(int number) {
      this.number = number;
   }

   public boolean isComplete() {
      return isComplete;
   }

   public void setComplete(boolean isComplete) {
      this.isComplete = isComplete;
   }
} 
```

**Update:** Even if I remove the `oncomplete` stuff like this an click the `<p:commandButton>` just once, the counter goes up on every page refresh.

```
<h:form>
        <h:outputText value="#{bugBean.number}" />
        <p:commandButton id="entryCommand" value="add"
            action="#{bugBean.increase()}" update="@form"/>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:56:21.933

由于缺少头部定义，该构造缺少 Ajax 支持。在这种情况下，我只是在-tag`<h:head/>`正上方添加，一切正常。`<h:body>`

感谢所有贡献者！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T21:53:48.747

我认为`increase()`每次刷新页面时都不会调用action方法，而是调用了`complete()`method，这可能会让你认为action方法被调用了。

内部的`oncomplete`属性`p:commandButton`表示**客户端**操作，因此是 JS 方法，而不是服务器操作：EL`#{bugBean.complete()}`在每次页面刷新时解析它时执行。

# android - How to read a file from usb drive in android?

> ID：13157426
> 
> 赞同：6
> 
> 时间：2012-10-31T11:59:26.620
> 
> 标签：android, usb-drive

I read the Android documentation for USB support at [http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html) and come to know that

Android support the USB host mode, we can read any file from the usb device.

In my case I have a pdf file which is stored in USB pen drive I want to attach the pen drive to my android device and want to read the pdf file data using the phone. Please help me to solve this any demo project or tutorial link to cover this topic. Thanks

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T12:19:58.697

```
 String extStorageDirectory  = context.getExternalCacheDir().getAbsolutePath(); 
```

在这里，它获得的路径为：`/mnt/sdcard/Android/data/com.example/cache`

现在用这个路径附加你的文件名。例如`abc.txt`

`/mnt/sdcard/Android/data/com.iris.activity/cache/abc.txt`

现在使用 File 类并从此路径获取 InputStream 并从 InputStream 读取文件。

# java - Java ExecutorService only running 2 threads not four

> ID：13157427
> 
> 赞同：1
> 
> 时间：2012-10-31T11:59:30.610
> 
> 标签：java, multithreading

I am working on an application that retrieves files from different URL's.

There is a TreeSet that contains the target to download. This is processed in a loop with each item being called with an ExecutorService. Here's some code:

```
private void retrieveDataFiles() {
    if (this.urlsToRetrieve.size() > 0) {
        System.out.println("Target URLs to retrieve: " + this.urlsToRetrieve.size());
        ExecutorService executorProcessUrls = Executors.newFixedThreadPool(this.urlsToRetrieve.size());//could use fixed pool based on size of urls to retrieve
        for (Entry target : this.urlsToRetrieve.entrySet()) {
            final String fileName = (String) target.getKey();
            final String url = (String) target.getValue();

            String localFile = localDirectory + File.separator + fileName;
            System.out.println(localFile);
            executorProcessUrls.submit(new WikiDumpRetriever(url, localFile));
            dumpFiles.add(localFile); 
            //TODO: figure out why only 2 files download
        }
        executorProcessUrls.shutdown();
        try {
            executorProcessUrls.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
        } catch (InterruptedException ex) {
            System.out.println("retrieveDataFiles InterruptedException: " + ex.getMessage());
        }
    } else {
        System.out.println("No target URL's were retrieved");
    }
} 
```

Then the WikiDumpRetriever:

```
private static class WikiDumpRetriever implements Runnable {

    private String wikiUrl;
    private String downloadTo;

    public WikiDumpRetriever(String targetUrl, String localDirectory) {
        this.downloadTo = localDirectory;
        this.wikiUrl = targetUrl;
    }

    public void downloadFile() throws FileNotFoundException, IOException, URISyntaxException {
        HTTPCommunicationGet httpGet = new HTTPCommunicationGet(wikiUrl, "");
        httpGet.downloadFiles(downloadTo);
    }

    @Override
    public void run() {
        try {
            downloadFile();
        } catch (FileNotFoundException ex) {
            System.out.println("WDR: FileNotFound " + ex.getMessage());
        } catch (IOException ex) {
            System.out.println("WDR: IOException " + ex.getMessage());
        } catch (URISyntaxException ex) {
            System.out.println("WDR: URISyntaxException " + ex.getMessage());
        }
    }
} 
```

As you can see this is an inner class. The TreeSet contains:

Key : Value

enwiki-latest-pages-articles.xml.bz2 : [http://dumps.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2](http://dumps.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2)

elwiki-latest-pages-articles.xml.bz2 : [http://dumps.wikimedia.org/enwiki/latest/elwiki-latest-pages-articles.xml.bz2](http://dumps.wikimedia.org/enwiki/latest/elwiki-latest-pages-articles.xml.bz2)

zhwiki-latest-pages-articles.xml.bz2 : [http://dumps.wikimedia.org/enwiki/latest/zhwiki-latest-pages-articles.xml.bz2](http://dumps.wikimedia.org/enwiki/latest/zhwiki-latest-pages-articles.xml.bz2)

hewiki-latest-pages-articles.xml.bz2 : [http://dumps.wikimedia.org/enwiki/latest/hewiki-latest-pages-articles.xml.bz2](http://dumps.wikimedia.org/enwiki/latest/hewiki-latest-pages-articles.xml.bz2)

The problem is that this process downloads 2 of the four files. I know that all four are available and I know that they can be downloaded. However, only 2 of them process at any time.

Can anyone shed any light on this for me please - what am I missing or what am I getting wrong?

Thanks nathj07

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:17:20.957

感谢 ppeterka - 这是源头的限制。因此，为了克服这个问题，我将固定线程池大小设置为 2。这意味着只有 2 个文件同时下载。

然后的答案是找到供应商施加的限制并设置线程池：

```
ExecutorService executorProcessUrls = Executors.newFixedThreadPool(2); 
```

我想接受一个答案，但似乎无法用评论做到这一点。抱歉，如果这是错误的做法。

感谢所有的指点——“集体思考”确实帮助我解决了这个问题。

# c# - C# Linq Joining tables with multi-level

> ID：13157436
> 
> 赞同：2
> 
> 时间：2012-10-31T11:59:53.457
> 
> 标签：c#, linq, join, multi-level

I am trying to query the 3rd level table ef_staff table 3 times to get 3 diff staff objects for each row. How to translate this in LINQ?

```
SELECT a.a_appraisalid, a.a_year, c.s_staffName, c2.s_staffName, c3.s_staffName
FROM   ef_appraisal a, idp_application b, ef_staff c, ef_staff c2, ef_staff c3
WHERE  a.a_appraisalid = b.a_appraisalid AND
       a.a_staffid = c.s_staffid AND
       a.a_appraisedby = c2.s_staffid AND
       a.a_reviewedby = c3.s_staffid 
```

I have been trying many ways but there is still an error 'Type Inference Failed' in the 2nd & 3rd joining of Staff. What am I missing here?

```
from application in applications

join appraisal in pmsEntities.ef_appraisal on application.a_appraisalid equals appraisal.a_appraisalid

join staff in pmsEntities.ef_staff on appraisal.a_staffid equals staff.s_staffid

join appraiser in pmsEntities.ef_staff on staff.s_appraisedby equals appraiser.s_staffid into ap

from appraiser in ap.DefaultIfEmpty() 

join reviewer in pmsEntities.ef_staff on staff.s_reviewedby equals reviewer.s_staffid into rv

from reviewer in rv.DefaultIfEmpty() 

join company in pmsEntities.ef_company on appraisal.a_companyid equals company.c_companyid into jc

from company in jc.DefaultIfEmpty()

select appraisal, staff.staffName, appraiser.staffName, reviewer.staffName, company.compName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:25:29.460

我修正了错误。员工对象的第一级加入应该链接到员工对象的第二级，如下所示：

`join staff in pmsEntities.ef_staff on appraisal.a_staffid equals staff.s_staffid into staffj`

```
 from staff1 in staffj

                    join appraiser in pmsEntities.ef_staff on staff1.s_appraisedby equals appraiser.s_icno into staff2 
```

`

希望能帮助到你

# javascript - highcharts yaxis 小时作为实际小时而不是天

> ID：13157438
> 
> 赞同：0
> 
> 时间：2012-10-31T11:59:58.630
> 
> 标签：javascript, jquery, highcharts

我在这里有一个 JSfiddle：http: [//jsfiddle.net/mW9XD/](http://jsfiddle.net/mW9XD/)

我正在努力让 yaxis 上的小时数实际显示为小时数，而不是滑入几天。该示例显示，在 24 小时后，它会滑入 1 月 2 日，而不是 25 或 26 小时。

我的 yaxis 代码看起来有点像：

```
yAxis: {
            type: 'datetime',
            dateTimeLabelFormats: {
                 hour: '%H:%M:%S'
            },
            title: {
                 text: 'Hours'
            },
            min: 1000,
            startOnTick: false,
            showFirstLabel: false
        }, 
```

我怎样才能让它显示小时数而不是小时数/天数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:46:11.183

我将 yAxis 更改为如下所示：

```
yAxis: {
           type: 'linear',
           labels:{
               formatter: function(){
                    var seconds = (this.value/ 1000) | 0;
                    this.value -= seconds * 1000;

                    var minutes = (seconds / 60) | 0;
                    seconds -= minutes * 60;

                    var hours = (minutes / 60) | 0;
                    minutes -= hours * 60;
                    return hours;
                }
           },
           title: {
               text: 'Hours'
           },
           min: 1000,
           startOnTick: false,
           showFirstLabel: false
      }, 
```

按我想要的方式工作，但希望它更本土一点。

# ms-access - How to get the best 10 (top 10) in a query that is also ordered by another field first?

> ID：13157441
> 
> 赞同：0
> 
> 时间：2012-10-31T12:00:05.060
> 
> 标签：ms-access, select

For example I would like to get only the top 10 customer by seller. So it will look like this (without the top 10):

```
Select seller, customer, sells from table order by seller asc, sells desc 
```

But this will give me all the values. I would only like to have the first 10 customers for each seller.

Is this even possible in ms-access 2003? If yes, please give me a hint, thanks ;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:05:58.273

在以下行：

```
SELECT seller,
       customer,
       sells
FROM   table a
WHERE  customerid IN (SELECT TOP 10 customerid
                      FROM   table b
                      WHERE  b.sellerid = a.sellerid
                      ORDER  BY sells DESC)
ORDER  BY seller ASC,
          sells DESC 
```

请注意，MS Access 会返回匹配项，因此您可能会获得 10 次以上的返回。如果需要精确的 10 个，您可以通过唯一 ID 订购和销售。

# c++ - Condor 输出文件更新

> ID：13157442
> 
> 赞同：4
> 
> 时间：2012-10-31T12:00:16.120
> 
> 标签：c++, output, condor

我正在使用 Condor 运行几个模拟，并对程序进行了编码，以便它在控制台中输出进度状态。这是在循环结束时完成的，它只是打印当前时间（这也可以是百分比或经过的时间）。代码看起来像这样：

```
printf("开始");
而（programNeedsToRum）{

   // 运行代码重复代码...

   // 打印程序状态更新
   printf("[%i:%i:%i]\r\n", 小时, 分钟, 秒);
}
printf("完成");

```

正常执行时（即在终端/cmd/bash 中）这工作正常，但秃鹰节点似乎没有`printf()`状态。仅在模拟完成后，所有状态更新都已输出到文件中，但不再使用。我提交给 condor 的 *.sub 文件如下所示：

```
宇宙=香草
可执行文件 = 程序
输出 = out/out-$(进程)
错误 = out/err-$(进程)
队列 100

```

提交后，程序执行（在 中确认`condor_q`）并且输出文件包含以下内容：

```
开始

```

只有在程序完成运行其相应的输出文件后才会显示（示例）：

```
开始
[0:3:4]
[0:8:13]
[0:12:57]
[0:18:44]
结束

```

在程序执行时，输出文件只包含`START`文本。所以我得出的结论是，如果节点执行程序很忙，文件不会更新。所以我的问题是，有没有办法手动更新输出文件或以更好的方式收集有关程序进度的任何信息？

已经谢谢了

最大限度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-25T03:14:22.167

您要做的是使用流输出选项。请参阅此处概述的可以传递给的选项`stream_error`：[http ://research.cs.wisc.edu/htcondor/manual/current/condor_submit.html](http://research.cs.wisc.edu/htcondor/manual/current/condor_submit.html)`stream_output``condor_submit`

默认情况下，HTCondor 将 stdout 和 stderr 本地存储在执行节点上，并在作业完成时将它们传输回提交节点。设置`stream_output`为`TRUE`将要求 HTCondor 在输出返回到提交节点时将其流式传输。然后，您可以在发生时对其进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:06:54.510

这是我几年前用来解决这个问题的东西。它使用`condor_chirp`which 用于将文件从执行主机传输到提交者。我有一个 python 脚本，它执行我真正想要运行的程序，并将其输出重定向到一个文件。然后，我会定期将输出文件发送回提交主机。

这是Python包装器，`stream.py`：

```
 #!/usr/bin/python
 import os,sys,time

 os.environ['PATH'] += ':/bin:/usr/bin:/cygdrive/c/condor/bin'
 # make sure the file exists
 open(sys.argv[1], 'w').close()

 pid = os.fork()
 if pid == 0:
    os.system('%s >%s' % (' '.join (sys.argv[2:]), sys.argv[1]))
 else:
    while True:
        time.sleep(10)
        os.system('condor_chirp put %s %s' % (sys.argv[1], sys.argv[1]))
        try:
            os.wait4(pid, os.WNOHANG)
        except OSError:
            break 
```

还有我的提交脚本。问题出现了`sh hello.sh`，并将输出重定向到`myout.txt`：

```
 universe                = vanilla
 executable              = C:\cygwin\bin\python.exe
 requirements            = Arch=="INTEL" && OpSys=="WINNT60" && HAS_CYGWIN==TRUE
 should_transfer_files   = YES
 transfer_input_files    = stream.py,hello.sh
 arguments               = stream.py myout.txt sh hello.sh
 transfer_executable     = false 
```

它确实会发送完整的输出，因此如果您同时运行大量作业，请考虑到这一点。目前，它每 10 秒发送一次输出......您可能需要调整它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T13:54:04.017

与`condor_tail`您可以查看正在运行的进程的输出。要查看标准输出，只需添加作业 ID（如果您想关注输出并立即查看更新，则添加 -f。例如：

```
condor_tail 314.0 -f 
```

# ruby-on-rails-3 - Request on PostgreSQL with Rails and Squeel

> ID：13157450
> 
> 赞同：1
> 
> 时间：2012-10-31T12:00:35.240
> 
> 标签：ruby-on-rails-3, postgresql, heroku, squeel

I was advised to create a new question based on my previous one so here it is :

I have on my website a list of product, each user can create his own savings based on these products. So several users can create their own savings based on the same product. So when one user create a saving I add in the database a saving with the user_id and the product_id he refers to. Now, on one page I want to display all the savings from the other users (excluding current_user) but, as many user can create a saving based on the same product I want to display these only once.If several users create a saving based on product X I want it only displayed once,thanks

The saving table has these field :

id product_id user_id price saved

What I did is what is posted on this question : [Squeel request and Heroku, Postgres: Error using GROUP BY and ORDER](https://stackoverflow.com/questions/13145168/squeel-request-and-heroku-postgres-error-using-group-by-and-order/13149437#comment17896678_13149437)

I cannot get it working properly on heroku (postgres). If anyone can help me writing the query for Rails or for Squeel that would be awesome thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:40:55.717

好吧，克雷格感谢您的帮助，我最终做到了，它正在本地开发 PG！

```
Saving.select("DISTINCT ON (savings.product_id) * ").where{product_id.not_in(current_user_savings.select{product_id})}.group("savings.user_id, savings.updated_at, savings.id, savings.product_id, savings.price,savings.wishlist_id, savings.saved, savings.created_at") 
```

遇到这个问题让我在 dev 中将我的 db 从 mysql 切换到 pg，所以在 heroku 中不再感到惊讶！

# python - Error running basic python-gearman example

> ID：13157451
> 
> 赞同：1
> 
> 时间：2012-10-31T12:00:38.650
> 
> 标签：python, gearman, python-gearman

I am trying to run a basic example of gearman using python-gearman library available [here](https://github.com/Yelp/python-gearman). I am running python 2.7.3

Worker:

```
import gearman

gm_worker = gearman.GearmanWorker(['localhost:4730'])

def task_listener_reverse(gearman_worker, gearman_job):
    print 'reporting status'
    return reversed(gearman_job.data)

gm_worker.set_client_id('testclient')
gm_worker.register_task('reverse', task_listener_reverse)
gm_worker.work() 
```

Client:

```
import gearman

gm_client = gearman.GearmanClient(['localhost:4730'])
print 'Sending job...'
request = gm_client.submit_job('reverse', 'Hello World!')
print "Result: " + request.result 
```

I am getting the following error (full trace available [here](https://gist.github.com/3986634))

```
File "/Users/developer/gearman/connection_manager.py", line 27, in _enforce_byte_string
    raise TypeError("Expecting byte string, got %r" % type(given_object))
TypeError: Expecting byte string, got <type 'reversed'> 
```

Any help would be appreciated!

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:02:37.457

[`reversed()`](http://docs.python.org/2/library/functions.html#reversed)返回一个迭代器，而不是一个字节串。改用负步幅切片技巧：

```
return gearman_job.data[::-1] 
```

这将返回一个反转的字符串。

相比：

```
>>> reversed('somedata')
<reversed object at 0x100480e50>
>>> 'somedata'[::-1]
'atademos' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T14:58:11.740

为了其他人面临类似错误，您需要从 worker 返回一个字符串。如果你没有显式返回或返回任何其他类型的数据，scrapy 会抛出错误。原因很简单，Gearman 的协议是基于文本的。

# c# - 将创建的列表项添加到另一个类

> ID：13157461
> 
> 赞同：0
> 
> 时间：2012-10-31T12:01:18.010
> 
> 标签：c#, list

我有一个已创建的项目“零件”

```
public void AddPart(int partNumber, string partName, string partDescription, decimal cost, decimal price, short Quantity)
{         
   m_supplierParts.Add(new Part(partNumber, partName, partDescription, cost, price, Quantity));           
} 
```

然后将零件添加到作业中

```
public void AddExistingPart(Part part)
{
    m_partUsed.Add(part);
} 
```

然后我想做的是选择该部分并将其添加到另一个列表“工作”中。

这个想法是，将现有部件添加到工作中。

我选择了部分

```
public List<Part> SelectPart(String PartRef)
 {
        List<Part> PartSet = new List<Part>();

        foreach (Part p in m_supplierParts)
        {
            if (p.PartNumber.ToString().Equals(PartRef, StringComparison.OrdinalIgnoreCase))
                PartSet.Add(p);
        }
        return PartSet;
    } 
```

但我随后想做的是将找到的部分添加到列表中：

```
string selectedPart = cboJobParts.Text;
List<Part> foundPart = s.SelectPart(selectedPart);

j.AddExistingPart(foundPart); //Adding the found part 
```

'j' 是对工作的引用。

我遇到的错误是它说“foundPart”无法转换。

错误 1 ​​'Auspex.Job.AddExistingPart(Auspex.Part)' 的最佳重载方法匹配有一些无效参数

错误 2 参数 1：无法从“System.Collections.Generic.List”转换为“Auspex.Part”

我不明白为什么找到的部分不能作为列表项传递？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:05:52.137

您的`j.AddPart`函数接受单个`Part`对象作为参数。您的`SelectPart`函数返回一个`List<Part>`数据类型。

当您要添加返回的所有部分时，`SelectPart`您必须迭代：

```
foreach(Part part in s.SelectPart(selectedPart)) {
    j.AddPart(part);
} 
```

或者当您的意图是`SelectPart`只返回一个`Part`对象时，您必须更改`SelectPart`为返回一个`Part`对象：

```
public Part SelectPart(String PartRef)
{
    return m_supplierParts.Single(p => p.PartNumber.ToString().Equals(
                                   PartRef, StringComparison.OrdinalIgnoreCase));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:05:54.717

您正在添加一个零件列表，而您的 add 函数只需要一个零件。

# ruby-on-rails - heroku 运行 rake db：迁移失败：找不到命令

> ID：13157465
> 
> 赞同：1
> 
> 时间：2012-10-31T12:01:28.340
> 
> 标签：ruby-on-rails, heroku

我是heroku的新手。当我执行 CS169.1x homework2（部署应用程序）时，我遇到了使用以下命令填充数据库的问题：heroku run rake db:migrate。这是终端转储：

```
saasbook@saasbook:~/Documents/hw2_rottenpotatoes$ git pull heroku master
From heroku.com:afternoon-cove-7289
 * branch            master     -> FETCH_HEAD
Already up-to-date.
saasbook@saasbook:~/Documents/hw2_rottenpotatoes$ git push heroku master
Everything up-to-date
saasbook@saasbook:~/Documents/hw2_rottenpotatoes$ heroku run rake db:migrate
heroku run rake db:migrate: command not found
saasbook@saasbook:~/Documents/hw2_rottenpotatoes$ 
```

可能有什么问题？如果heroku上有错误转储要检查？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T12:09:07.977

只是为了确保你安装了 heroku，当你运行时会发生什么：

```
$heroku help 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T12:07:41.643

你安装了heroku gem吗？如果你在 gemfile 中有 heroku，你可能需要做

```
bundle exec heroku run... 
```

# postgresql - 使用pg_dump获取子表的ddl

> ID：13157466
> 
> 赞同：1
> 
> 时间：2012-10-31T12:01:30.400
> 
> 标签：postgresql

我有一个日志表，它有几个子表继承它。但我的问题很难描述。让我们开始吧。

**--1 环境**

PostgreSQL 版本：9.0.3

操作系统：Red Hat Enterprise Linux Server 5.5 版

**--2 父表和子表**

```
 Schema |            Name             | Type  | Owner  |  Size   |  Description   
--------+-----------------------------+-------+--------+---------+----------------
 suplog | tbl_log        | table | suplog | 0 bytes | qq自更新日志表
 suplog | tbl_log_201205 | table | suplog | 59 GB   | 
 suplog | tbl_log_201206 | table | suplog | 58 GB   | 
 suplog | tbl_log_201207 | table | suplog | 57 GB   | 
 suplog | tbl_log_201208 | table | suplog | 51 GB   | 
 suplog | tbl_log_201209 | table | suplog | 39 GB   | 
 suplog | tbl_log_201210 | table | suplog | 36 GB   | 
```

tbl_log 为父表，所有 xxx__yyyymm 为子表，继承表 tbl_log。</p>

我使用以下 sql 创建子表：

```
create table tbl_log_201210 ( like tbl_log including all ) inherits ( tbl_log ); 
```

**--3 添加列表**

然后由于某种原因，我们想在父表和子表中都添加一列。我们只需要一个命令，如下：

```
Alter table tbl_log add column address character varying(255) ; 
```

**--4 pg_dump 子表**

现在，我需要获取一个child的create table语句，所以我使用pg_dump获取ddl。</p>

```
pg_dump -h 127.0.0.1 -p 1921 -E UTF8 -t "suplog.tbl_log_201210" -s -v suplog > suplog.tbl_log_201210.ddl 
```

从上面的命令，令我惊讶的是，文件 suplog.tbl_log_201210.ddl 的创建表命令不包含列“addres”，这是由“ALTER TABLE”命令添加的新列。

**--5 查询查看pg_attribute**

```
suplog=> select attname,attislocal from pg_attribute where attrelid='tbl_log_201210'::regclass
and attname='address';
     attname     | attislocal 
-----------------+------------
 recommend_appid | f

we can see the column attislocal of view pg_attribute of that table show 'f'。 
```

不知道为什么，是bug吗？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:06:35.880

您的转储命令只要求子表的架构。孩子的`create`不包含任何列，而只是`inherits`：

```
CREATE TABLE child (
    inherits parent
); 
```

这有什么好惊讶的？

## 编辑

参数的使用`like`将两个表解耦。他们不是父母和孩子。检查[手册](http://www.postgresql.org/docs/9.0/interactive/sql-createtable.html)

如果您分两个单独的步骤执行此操作，它可以工作。先后`create like`后`alter table inherit`

[一位开发人员回答了类似的问题](http://postgresql.1045698.n5.nabble.com/BUG-7583-Problem-using-INHERITS-and-LIKE-td5726624.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:53:34.827

9.0.3 落后了七个错误修复版本，此外还提到了两个主要版本。有人发布并删除了一个答案，表明这在 9.2 上按预期工作。我注意到 9.0.7 包含[此提交](https://github.com/postgres/postgres/commit/ab060c74ba0f0767237e7a3bc6022a84e177abab)：

> **修复 pg_dump 以更好地处理继承的列。**
> 
> 修改 pg_dump 对继承列的处理，这是在 2001 年最后一次认真研究，以消除与继承的默认表达式和 NOT NULL 标志相关的几个不当行为。特别要确保在子表的 CREATE TABLE 命令中打印列当且仅当它具有 attislocal = true; 前一种行为有时会导致在源数据库中未如此标记的列被标记为 attislocal。此外，停止依赖默认表达式的文本比较来确定它们是否被继承；相反，根本不使用默认表达式继承，而只是在层次结构的每个级别显式安装默认值。这修复了 Chester Young 最近展示的与搜索路径相关的不当行为，
> 
> 回补丁到所有支持的分支。

发行说明表明这是为了处理默认处理而添加的，但我怀疑这个补丁也解决了您的问题。您能否升级到 9.0.10 并查看此行为是否仍然存在？

# java - 如何将 Set/HashSet 存储在 Object 中？

> ID：13157469
> 
> 赞同：0
> 
> 时间：2012-10-31T12:01:37.647
> 
> 标签：java, object, set, hashset

```
 public HashSet<String> Red;
 public HashSet<String> Blue;
 public HashSet<String> Colors;

public Data(HashSet<String> red, HashSet<String> blue, HashSet<String> colors) {
  Red = red;
  Blue = blue;
  Colors = colors;
} 
```

我尝试在此对象中存储 3 个 Set / HashSet。这种方式是否正确，我可以像普通对象一样访问 Set/HashSet 对象吗？

```
public Set<String> Red = new HashSet<String>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:56:20.737

**如果您询问如何访问对象`HashMap`内的 s`Data`**

要访问三个 HashSet 之一，您将创建一个新的 Data 对象并在 Data 对象初始化后访问选择的公共字段：

```
HashSet<String> setOne = new HashSet<String>();
HashSet<String> setTwo = new HashSet<String>();
HashSet<String> setThree = new HashSet<String>();

Data d = new Data(setOne, setTwo, setThree);
d.Blue.add("this will be added to setTwo"); 
```

但是，通常，您不希望有公共字段，而是将它们设为私有并提供 getter/setter 方法，因为这将提供[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

**如果您问是否应该参考接口或类**

首先：*HashSet 是一个具体的类，Set 是一个接口。* 另外：*引用类型决定了您可以在对象上调用哪些方法。（这将是等号的左侧，而右侧是动态类型）。*

在构造函数中，您希望尽可能不具体。您是否没有使用 HashSet 类的任何特殊功能，您应该倾向于引用 Set 接口，因为如果您以后想更改 Data 类的实现，这会更加灵活 - 它也使您的类的用户成为可能使用每个实现 Set 的类，而不是限制使用 HashSet。

但是，您是否需要特定类的特殊功能，那么您当然会参考该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:20:41.710

如果我的理解是正确的，你是在问两者`Set<String> Red = new HashSet<String>()`是否`HashSet<String> Red = new HashSet<String>()`都是允许的形式？

# wcf-data-services - 使用 MimeType 属性进行更多 OData 操作

> ID：13157470
> 
> 赞同：0
> 
> 时间：2012-10-31T12:01:42.257
> 
> 标签：wcf-data-services, odata

被`MimeTypeAttribute`定义为`AttributeUsageAttribute(AttributeTargets.Class, AllowMultiple = false, Inherited = true)`你不能在一个类中多次使用它。但是，如果我想在我的 OData 服务中为多个操作指定 MIME 类型怎么办？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:13:20.893

这是 WCF 数据服务中的一个已知问题，我们正在研究在下一轮版本中修复该问题。目前，如果您使用自定义提供程序，您可以在元数据 API 中显式设置 mime 类型。

# iphone - xcode 为 iphone 和 ipad 使用相同的图像和 xib

> ID：13157480
> 
> 赞同：0
> 
> 时间：2012-10-31T12:02:07.437
> 
> 标签：iphone, objective-c, xcode, image, ipad

我正处于新游戏的开始阶段。我的上一款游戏是为 iPhone 开发的，而 iPad 必须翻倍。

现在 iPhone 5 的屏幕大于 4，以及 iPad 和 iPad mini，我想对游戏进行编程以显示正确尺寸的图像。是否可以为 iPad 设计大图形并为 iPhone 使用相同的图像（使用 iPhone 4 等时只显示较小的图像）还是最好使用两个图像，iPad 版本和 iPhone 版本？这里的问题是应用程序的大小。该应用程序会使下载和安装大小翻倍，因为图形会非常大，这不是我想做的事情。

是否可以为 ipad 和 iphone 使用相同的 xib，然后我可以获取代码来检测屏幕尺寸并据此正确显示游戏？

另外，我已经以 Cocos2d 和 Box2d 的形式启动了该项目，并使用了最新下载的 Cocos2d。它从代码开始，我应该从情节提要开始工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:12:18.940

1）您不能对 iPhone 和 iPad 使用单个 xib 文件（以编程方式可以，但这会搞砸您的应用程序）。

2) 在使用 Cocos2D 进行开发时，我的经验建议不要使用任何 xib 或 storyboard 文件。否则你最终会陷入混乱。

3）关于不同iOS设备的图像大小问题，我建议您为不同的iOS设备使用单独的图像（仅典型图像）。如果您有一些按钮和简单的基于曲线的 UI，请选择 CoreGraphics，这样您就不需要这些图像。仅使用典型图像，其余图像使用 CoreGraphics

# java - Android：使用本地网络文件获取图像并将其保存到 SD 卡

> ID：13157485
> 
> 赞同：0
> 
> 时间：2012-10-31T12:02:16.920
> 
> 标签：java, php, javascript, android, web-applications

我想获取存储在我的 Android 手机 SD 卡上的网页（html、php？、javascript？），从指定的 url 获取图像并将其保存回 SD 卡。

这可能吗？如果可以，可以用什么语言来实现？即使您可以说是并指出正确的方向，任何帮助都将不胜感激。我很乐意修改代码，但甚至不知道从哪里开始，或者这根本不可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:16:19.943

如果您有获取图片的网址，那么此代码将对您有所帮助

```
String myfeed="your url";

    URL url;
    try {
        url = new URL(myfeed);
        InputStream content = (InputStream)url.getContent();
        d = Drawable.createFromStream(content , "src");

        Bitmap bitmap = ((BitmapDrawable)d).getBitmap();

        String path = Images.Media.insertImage(getContentResolver(),bitmap,mImageName, null);
        screenshotUri = Uri.parse(path);

        System.out.println("your path  :"+screenshotUri);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# php - php while 在 for 循环中，使用 strlen

> ID：13157487
> 
> 赞同：2
> 
> 时间：2012-10-31T12:02:17.667
> 
> 标签：php, loops, for-loop, while-loop, strlen

以下是在获取我想要的数据方面运行良好的代码块。不要笑，这可能效率低下，但我正在学习:) 我想要的是使用 $totalLength 变量，当 $totalLength 为 1500 字节/字符时停止收集数据（理想情况下，以完整的结尾字，但我不是在寻找奇迹！）。无论如何，代码：

```
$paraLength = 0;
$totalLength = 0;
for ($k = 0; $k < $descriptionValue->length; $k++) {        //define integer k as 0, get every description using ($k = 0; $k < $descriptionValue->length; $k++), increment the k loop (to get only 14 elements, use ($k <= 13))
$totalLength = $totalLength + $paraLength;
echo $totalLength." Total<br />";
$descNode = $descriptionValue->item($k)->nodeValue;       //find each description element
$descNode = trim($descNode);        //trim any whitespace around the element
$descPara = strip_tags($descNode);        //remove any HTML tags from the elements
$paraLength = (strlen($descPara));        //find the length of each element
//if (preg_match('/^([0-9 ]+)$/', $descPara)) {       //if element starts with numbers followed by a space, define it as a telephone number
//    $number = $descPara;
//    fwrite ($fh, "\t\t".'<div id="tel">'.$number."</div>\n");        //write a div with id tel, containing the number                                                                      
//}
//else
if (preg_match('/[A-Z]{4,}/', $descPara)) {        //if element starts with at least 4 uppercase characters, define it as a heading
    $heading = $descPara;
    $heading=ucfirst(strtolower($heading));       //convert the uppercase string to proper    
    fwrite ($fh, "\t\t".'<div id="heading"><h4>'.$heading."</h4></div>\n");        //write a div with id heading, containing the heading in h4 tags                                                                     
}
else if (preg_match('/\d*\.\d{1,}[m x]/', $descPara)) {       //if the element contains any number of digits followed by a dot, at least one further digit and the letters m x, define it as a heading based on it containing room measurements (this pattern matches at least two number after the dot \d*{2,}}
    $room = $descPara;
    fwrite ($fh, "\t\t".'<div id="roomheading"><h4>'.$room."</h4></div>\n");       //write a div with id roomheading, containing the heading in h4 tags
}
else if (preg_match('/^Disclaimer/i', $descPara)) {        //if the element contains the word Disclaimer, define it as such
    $disclaimer = $descPara;
    fwrite ($fh, "\t\t".'<div id="disclaimer"><h4>'.$disclaimer."</h4></div>\n");        //write a div with id disclaimer, containing the heading in h4 tags
}
else if (strlen($paraLength<14 && $paraLength>3)) {       //when all else fails, if the element is less than 14 but more than 3 characters, also define it as a heading
    $other = $descPara;
    fwrite ($fh, "\t\t".'<div id="other"><h4>'.$other."</h4></div>\n");        //write a div with id other and the heading in h4 tags
}
else {
fwrite ($fh, "\t\t\t<p>".$descPara."</p>\n");       //anything else is considered content, so write it out inside p tags
}
} 
```

$totalLength 很重要，但是当我尝试在其中放置一个 while 语句时，它就挂了。我尝试在 for 之前和之后放置 while 语句，但没有任何乐趣。我做错了什么以及如何最好地解决这个问题？

仅供参考 $descriptionValue，是使用 DOM 和 xpath 从 HTML 解析的数据，我尝试的是 while($totalLength <= 1500)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:05:45.590

也许这就是你想要的：

```
if ($totalLength > 1500) {
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:06:04.133

`for`只需在循环中放置一个条件。一旦条件评估为真，它将跳出循环。

```
// for () { ...
if ($totalLength > 1500) {
    break;
}
// } 
```

基本上，`break`结束当前 for、foreach、while、do-while 或 switch 结构的执行。[您可以在手册](http://php.net/manual/en/language.control-structures.php)中找到有关 PHP 控制结构的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:07:46.617

您也可以删除 for 并添加

```
$k = 0;    
while ($totalLength <= 1500 || $k < $descriptionValue->length) 
```

并在循环内增加值 ok $k

# json.net - Json.net 转义或删除 SerializeObject 上的字符

> ID：13157491
> 
> 赞同：0
> 
> 时间：2012-10-31T12:02:21.783
> 
> 标签：json.net

我正在将 Mvc 4 与 Json.Net 一起使用。我在服务器上有一个带有以下内容的错误消息属性：

```
"'Instalation Name' should not be empty." 
```

在客户端我正在做这样的事情：

```
'@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model, Newtonsoft.Json.Formatting.None, new Newtonsoft.Json.Converters.StringEnumConverter()))'; 
```

输出如下：

```
"ErrorMessage":"'Instalation Name' should not be empty." 
```

这是抛出错误：

```
Expected ';' 
```

我需要一种方法来逃避或删除`'`角色。我怎样才能做到这一点？一种方法是进行自定义 JsonConverter ...还有其他建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:54:21.750

我猜你`@Html.Raw()`是放在`<script></script>`. 所以我建议你只删除`'`JSON 周围的字符，所以它看起来像这样：

```
<script type="text/javascript">

var v = @Html.Raw(...);

</script> 
```

所以变量`v`会直接接收反序列化的数据。

# eclipse - 使用 Eclipse 处理 DTD

> ID：13157496
> 
> 赞同：1
> 
> 时间：2012-10-31T12:02:46.597
> 
> 标签：eclipse, dtd

我已经建立了这个 DTD：

```
<!ELEMENT universes (universe+)>
<!ELEMENT universe (index,name,conf)>
<!ELEMENT index (#PCDATA)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT conf (speed,resources-cdr,moons,bots)>
<!ELEMENT speed (game,fleet,resources)> 
<!ELEMENT game (#PCDATA)> 
<!ELEMENT fleet (#PCDATA)> 
<!ELEMENT resources (#PCDATA)> 
<!ELEMENT resources-cdr (ships,defs) > 
<!ELEMENT ships (#PCDATA)> 
<!ELEMENT defs (#PCDATA)> 
<!ELEMENT moons (#PCDATA)> 
<!ELEMENT bots (#PCDATA)> 
```

我在这样的 xml 文件中使用它：

```
<!DOCTYPE universes SYSTEM "universes.dtd" > 
```

现在在 Eclipse（靛蓝）下，当我使用`CTRL+SPACE`查看元素列表时，我只看到简单元素（那些#PCDATA）而不是其他元素。见下文 ：

![在此处输入图像描述](../Images/92f0474f5f6f4e724887144f255b4ad7.png)

在这种情况下，我看到`index`和`name`提议，但没有看到`conf`提议。

如果我`conf`手动输入标签，而不是使用向导，我对嵌套标签有类似的问题：

![在此处输入图像描述](../Images/d2b0a733d8a6773f0e1433fc546ede45.png)

请问如何修改这个 Eclipse 行为？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:13:54.753

好的问题解决了。

就我而言，我在将其与 DTD 链接**之前创建了 xml 文件。**

如果我用 Eclipse 创建新的 xml 文件并选择`create XML file from a DTD`它的工作

# c# - 如何在asp.net中单击后设置过期超链接

> ID：13157500
> 
> 赞同：4
> 
> 时间：2012-10-31T12:02:59.580
> 
> 标签：c#, asp.net

我们正在向用户发送电子邮件中的超链接。如果用户仅单击该超链接一次。如果他第二次单击该超链接，它应该过期。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:09:20.843

您需要在每个链接中具有唯一标识符，并将标识符存储在服务器端，通常在数据库中。然后在每个请求中，您需要：

*   检查标识符是否已被使用
*   如果是，呈现“链接已过期”或做任何你想做的事
*   如果这是您第一次在请求中看到此标识符，请将其标记在您的数据库中并返回所需的响应

明智的做法是使用 GUID 或添加一些带有哈希的附加参数，以防止用户猜测其他标识符（也取决于您的用例）。

# html - IE7 100% 宽度锚，没有设置容器宽度

> ID：13157501
> 
> 赞同：0
> 
> 时间：2012-10-31T12:03:04.250
> 
> 标签：html, css

如何在 IE7 中设置没有父宽度的 100% 宽度锚点？在 IE8 及更高版本中运行良好

示例：http: [//jsfiddle.net/GVj6K/2/](http://jsfiddle.net/GVj6K/2/)

HTML

```
<div>
    <ul>
        <li><a href="#">bla</a></li>
        <li><a href="#">bla bla lorem ipsum</a></li>
        <li><a href="#">bla bla </a></li>        
    </ul>
<div> 
```

CSS

```
div{
 position:absolute;
}    

ul{
 list-style:none;
 margin:0; padding:0;
}

a{
 display:block;
 padding:5px 10px;  
 white-space:nowrap;
 width:auto;    
}    

a:hover{
 background-color:#f0f0f0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:56:16.593

在 a 标签上添加背景颜色：http: [//jsfiddle.net/GVj6K/12/](http://jsfiddle.net/GVj6K/12/)

```
a{
 display:block;
 padding:5px 10px;  
 white-space:nowrap;
 width:auto;
 background:#fff;
} 
```

或者，您可以使用平铺的 trans.gif

# multithreading - 如何在 C++03 中将 boost packaged_task 发布到 io_service？

> ID：13157502
> 
> 赞同：12
> 
> 时间：2012-10-31T12:03:03.167
> 
> 标签：multithreading, boost, boost-asio, future

这是上一个问题（[here](https://stackoverflow.com/questions/13146433/boostasio-thread-pool-implementation-for-occasionally-synchronized-tasks "这里")）的后续，但我正在开发一个多线程应用程序，我想将 Boost packaged_task 发布到线程 io_service。我被困在使用 C++03 编译器（所以 std::move 不可用），并且 packaged_task 不可复制。我已经尝试将它包装在 shared_ptr 中并传递它，以及许多其他的东西。这是我当前的尝试和随后的编译器错误。知道如何让它工作吗？

```
boost::asio::io_service io_service;
boost::thread_group threads;
boost::asio::io_service::work work(io_service);
for (int i = 0; i < maxNumThreads; ++i)
{
    threads.create_thread(boost::bind(&boost::asio::io_service::run,
        &io_service));
}
std::vector<boost::shared_future<bool> > pending_data; // vector of futures

bool process_data(int,int){...}
...

for(int theTime = 0; theTime != totalScenarioTime; ++theTime)
{
    for(int i = 0; i < numSmallTasks; ++i)
    {
        boost::packaged_task<bool> task(boost::bind(&process_data,i,theTime));
        boost::shared_future<bool> fut(task.get_future());
        pending_data.push_back(fut); // C++11 possible: (std::move(fut) when fut is a unique_future);
        io_service.post(task); // C++11 possible: (std::move(task));    
    }
    // After loop - wait until all futures are evaluated
    boost::wait_for_all(pending_data.begin(), pending_data.end()); 
    pending_data.clear();
} 
```

这导致：

```
In file included from ../boostlibs/boost/asio/io_service.hpp:767:0,
             from ../boostlibs/boost/asio/basic_io_object.hpp:19,
             from ../boostlibs/boost/asio/basic_socket.hpp:19,
             from ../boostlibs/boost/asio/basic_datagram_socket.hpp:20,
             from ../boostlibs/boost/asio.hpp:20,
             from ../main.cpp:13:
../boostlibs/boost/asio/impl/io_service.hpp: In member function ‘void boost::asio::io_service::post(const CompletionHandler&) [with CompletionHandler = boost::packaged_task<bool>]’:
../main.cpp:256:23:   instantiated from here
../boostlibs/boost/asio/impl/io_service.hpp:95:67: error: no matching function for call to ‘boost::packaged_task<bool>::packaged_task(const boost::packaged_task<bool>&)’
../boostlibs/boost/asio/impl/io_service.hpp:95:67: note: candidates are:
../boostlibs/boost/thread/future.hpp:1372:9: note: boost::packaged_task<R>::packaged_task(boost::detail::thread_move_t<boost::packaged_task<R> >) [with R = bool]
../boostlibs/boost/thread/future.hpp:1372:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::detail::thread_move_t<boost::packaged_task<bool> >’
../boostlibs/boost/thread/future.hpp:1318:9: note: boost::packaged_task<R>::packaged_task() [with R = bool]
../boostlibs/boost/thread/future.hpp:1318:9: note:   candidate expects 0 arguments, 1 provided
../boostlibs/boost/thread/future.hpp:1314:9: note: boost::packaged_task<R>::packaged_task(boost::packaged_task<R>&) [with R = bool, boost::packaged_task<R> = boost::packaged_task<bool>]
../boostlibs/boost/thread/future.hpp:1314:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::packaged_task<bool>&’
../boostlibs/boost/asio/detail/handler_type_requirements.hpp:95:26: error:   initializing argument 1 of ‘T& boost::asio::detail::lvref(T) [with T = boost::packaged_task<bool>]’
../boostlibs/boost/asio/impl/io_service.hpp:95:67: error: no matching function for call to ‘boost::packaged_task<bool>::packaged_task(const boost::packaged_task<bool>&)’
../boostlibs/boost/asio/impl/io_service.hpp:95:67: note: candidates are:
../boostlibs/boost/thread/future.hpp:1372:9: note: boost::packaged_task<R>::packaged_task(boost::detail::thread_move_t<boost::packaged_task<R> >) [with R = bool]
../boostlibs/boost/thread/future.hpp:1372:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::detail::thread_move_t<boost::packaged_task<bool> >’
../boostlibs/boost/thread/future.hpp:1318:9: note: boost::packaged_task<R>::packaged_task() [with R = bool]
../boostlibs/boost/thread/future.hpp:1318:9: note:   candidate expects 0 arguments, 1 provided
../boostlibs/boost/thread/future.hpp:1314:9: note: boost::packaged_task<R>::packaged_task(boost::packaged_task<R>&) [with R = bool, boost::packaged_task<R> = boost::packaged_task<bool>]
../boostlibs/boost/thread/future.hpp:1314:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::packaged_task<bool>&’
../boostlibs/boost/asio/detail/handler_type_requirements.hpp:96:32: error:   initializing argument 1 of ‘const T& boost::asio::detail::clvref(T) [with T = boost::packaged_task<bool>]’
../boostlibs/boost/asio/impl/io_service.hpp:97:3: error: no matching function for call to ‘boost::packaged_task<bool>::packaged_task(const boost::packaged_task<bool>&)’
../boostlibs/boost/asio/impl/io_service.hpp:97:3: note: candidates are:
../boostlibs/boost/thread/future.hpp:1372:9: note: boost::packaged_task<R>::packaged_task(boost::detail::thread_move_t<boost::packaged_task<R> >) [with R = bool]
../boostlibs/boost/thread/future.hpp:1372:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::detail::thread_move_t<boost::packaged_task<bool> >’
../boostlibs/boost/thread/future.hpp:1318:9: note: boost::packaged_task<R>::packaged_task() [with R = bool]
../boostlibs/boost/thread/future.hpp:1318:9: note:   candidate expects 0 arguments, 1 provided
../boostlibs/boost/thread/future.hpp:1314:9: note: boost::packaged_task<R>::packaged_task(boost::packaged_task<R>&) [with R = bool, boost::packaged_task<R> = boost::packaged_task<bool>]
../boostlibs/boost/thread/future.hpp:1314:9: note:   no known conversion for argument 1 from ‘const boost::packaged_task<bool>’ to ‘boost::packaged_task<bool>&’
../boostlibs/boost/asio/detail/impl/task_io_service.hpp:54:6: error:   initializing argument 1 of ‘void boost::asio::detail::task_io_service::post(Handler) [with Handler = boost::packaged_task<bool>]’ 
```

使用 boost::move(task) 会导致两个错误：

```
error: no match for call to ‘(boost::detail::thread_move_t<boost::packaged_task<bool> >) ()’
error: no match for call to ‘(boost::detail::thread_move_t<boost::packaged_task<bool> >) ()’ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T12:58:47.873

`boost::packaged_task``boost::move`从 Boost 版本 1.50 开始支持，请参阅相应的[票证](https://svn.boost.org/trac/boost/ticket/4521)。

但问题是[`io_service::post`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/post.html)完成处理程序参数必须`CopyConstructible`如[Asio 处理程序要求](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/Handler.html)中所述。因此`boost::packaged_task`不能直接发布或移动发布。（感谢[Igor R.](https://stackoverflow.com/users/759253/igor-r)对于这个问题）。

有使用指针的解决方法，例如，您可以将其包装`boost::packaged_task`并`boost::shared_ptr`绑定到`operator()`：

```
 typedef boost::packaged_task<bool> task_t;
 boost::shared_ptr<task_t> task = boost::make_shared<task_t>(
    boost::bind(&process_data, i, theTime));

 io_service.post(boost::bind(&task_t::operator(), task)); 
```

# sql-server-2005 - 为什么 SQL 查询中的 NULL 聚合警告会导致 SSIS 包失败？

> ID：13157508
> 
> 赞同：10
> 
> 时间：2012-10-31T12:03:15.910
> 
> 标签：sql-server-2005, ssis

SSIS 包失败并显示如下错误消息：

> 代码：0xC0202009 来源：DFT 填充 ImageSummary OLE_SRC ProductImage [1] 描述：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Native Client”Hresult：0x00040EDA 描述：“警告：空值被聚合或其他 SET 操作消除。”。

经过调查，我们发现该消息`Warning: Null value is eliminated by an aggregate or other SET operation.`是由 SQL Server (2005) 查询返回的，SSIS 包作为 DFT 中的源运行，以插入到目标表中。

```
Select ProductID ,ImageTypeID ,DistinctImageCount ,ImageSize 
from 
    (select a.ProductID ,a.ImageTypeID ,a.DistinctImageCount ,a.ImageSize ,RANK() OVER (PARTITION BY a.ProductID, a.ImageTypeID ORDER BY a.ImageSize) As Ranker 
    from 
        (SELECT TOP 100 Percent spi.ProductID ,sit.ImageTypeID ,CAST(COUNT(DISTINCT spi2.ImageTypeID) as bit) DistinctImageCount ,CAST(spi2.Size as varchar(50)) as ImageSize 
        FROM Stage.ProductImage spi CROSS JOIN Reference.ImageType sit LEFT JOIN Stage.ProductImage spi2 ON spi.ProductID = spi2.ProductID AND sit.ImageTypeID = spi2.ImageTypeID 
        GROUP BY spi.ProductID, sit.ImageTypeID,spi2.Size 
        ORDER BY spi.ProductID, sit.ImageTypeID,spi2.Size
        )a
    )b 
where ranker = 1 
Order by ProductID,ImageTypeID 
```

我们通过修改查询消除了来自 SQL 服务器的警告消息，从而解决了这个问题：

### 从

`CAST(COUNT(DISTINCT spi2.ImageTypeID)as bit) DistinctImageCount`

### 至

`CAST(SUM(DISTINCT ISNULL(spi2.ImageTypeID,0)) as bit) DistinctImageCount`.

但是我们有几个问题如下，我们找不到解释，希望在这个论坛上得到答案：

1.  为什么来自 SQL 的警告会冒泡到 SSIS 包并导致 SSIS 包失败？

2.  如果我们在具有相同数据集的所有其他开发和 UAT 环境中运行相同的包，它就可以正常工作。我们可以看到 SQL Server Management Studio 中出现警告，但不会导致 SSIS 失败。但是，我们的生产环境中的 SSIS 包失败。我们没有理解逻辑？是否有任何警告阈值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T12:33:18.657

由于以下警告消息导致的 SSIS 包失败是 Microsoft Connect 网站上许多人报告的已知错误。

`Warning: Null value is eliminated by an aggregate or other SET operation`

[链接到 Connect 网站上的错误报告。](http://connect.microsoft.com/SQLServer/feedback/details/483175/failure-because-of-warning-about-null-aggregation)

微软团队关于该问题的最新更新：

```
This problem was resolved in SQL Server 2012 RTM (11.00.2100.60 or later).
There is no hotfix available for SQL Server 2005/2008/2008R2. 
```

我不知道问题的原因，微软团队也关闭了这个错误，因为它不可重现。Connect 网站上列出的解决方法之一是在查询之前添加以下语句。请确保在末尾包含分号。

```
SET ANSI_WARNINGS OFF; 
```

在 MSDN 上阅读有关[ANSI_WARNINGS的更多信息。](http://msdn.microsoft.com/en-us/library/ms190368.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T15:44:08.513

同样的问题，sql 2008r2。存在问题的特定数据流几个月来一直坚如磐石，没有出现任何问题。我也找不到空数据。

已验证的数据库属性“启用 ANSI 警告”设置为 False。添加了 SET ANSI_WARNINGS OFF；到查询的开始，它起作用了。所以看起来这个错误确实忽略了数据库范围的设置。

# java - 在一维数组/直方图中查找局部最小值/最大值

> ID：13157510
> 
> 赞同：4
> 
> 时间：2012-10-31T12:03:21.873
> 
> 标签：java, algorithm

我正在尝试查找数组中所有局部最小值和最大值的索引。

例子：

```
int[] array = {5,4,3,3,3,3,3,2,2,2,  6,6,8,5,5,5,3,3,2,1,  1,4,4,7};
//                             |         |                 |
// Indices:    0,1,2,3,4,5,6,7,8,9, 10,1,2,3,4,5,6,7,8,9, 20,1,2,3
// Minima: 8, 20
// Maxima: 12 
```

我想出了一个算法，对此我有几个问题：

*   有更好的吗？:)
*   我使用带有方法的 Enum 来实现 UP 和 STRAIGHT_UP 都是“UP”的二元论。对我来说似乎很乱。有什么建议么？
*   你有更好的方法名称吗？direction() (+return value) 有点暗示 STRAIGHT 不是目录。但同时它也是，因为它是 Emum 中的一个元素。嗯。
*   它适用于给定的数组。你看到没有的情况吗？

-

```
import java.util.ArrayList;

public class MinMaxFinder {
    private int[] array;
    private ArrayList<Integer> minima;
    private ArrayList<Integer> maxima;

    private enum Direction{
        UP, DOWN, STRAIGHT_UP, STRAIGHT_DOWN, STRAIGHT;

        public Direction direction(){
            if(this==UP || this==STRAIGHT_UP){
                return UP;
            }else if(this==DOWN || this==STRAIGHT_DOWN){
                return DOWN;
            }else{
                return STRAIGHT;
            }
        }

        public boolean isStraight(){
            if(this==STRAIGHT_DOWN || this==STRAIGHT_UP || this==STRAIGHT){
                return true;
            }else{
                return false;
            }
        }

        public boolean hasDifferentDirection(Direction other){
            if(this!=STRAIGHT && other!=STRAIGHT && this.direction() != other.direction() ){
                return true;
            }
            return false;
        }
    }

    public MinMaxFinder(int[] array){
        this.array = array;
    }

    public void update() {
        minima = new ArrayList<Integer>();
        maxima = new ArrayList<Integer>();

        Direction segmentDir = Direction.DOWN;
        int indexOfDirectionChange = 0;
        int prevVal = array[0];
        int arrayLength = array.length; 
        for(int i=1; i<arrayLength; i++){
            int currVal = array[i];
            Direction currentDir = currVal<prevVal?Direction.DOWN:(currVal>prevVal?Direction.UP:Direction.STRAIGHT);
            prevVal = currVal;

            if(currentDir.hasDifferentDirection(segmentDir)){
                int changePos = (indexOfDirectionChange+i-1)/2;
                if(currentDir.direction() == Direction.DOWN){
                    maxima.add(changePos);
                }else{
                    minima.add(changePos);
                }

                segmentDir = currentDir;
                indexOfDirectionChange = i;
            }else if( currentDir.isStraight() ^ segmentDir.isStraight() ){
                indexOfDirectionChange = i;

                if(currentDir.isStraight() && segmentDir.direction()==Direction.UP){
                    segmentDir=Direction.STRAIGHT_UP;
                }else if(currentDir.isStraight() && segmentDir.direction()==Direction.DOWN){
                    segmentDir=Direction.STRAIGHT_DOWN;
                }else{
                    segmentDir = currentDir;
                }
            }
        }
    }

    public ArrayList<Integer> getMinima() {
        return minima;
    }

    public ArrayList<Integer> getMaxima() {
        return maxima;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:59:49.183

考虑一组一阶差分`d[i] = a[i] - a[i-1]`。

如果`d[i]`为正，则`a`在最后一步增加，如果`d[i]`为负，则`a`减少。因此，`d`从正到负的符号变化表明`a`局部最大值正在增加，现在正在减少。同样，从负到正表示局部最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:48:49.520

像这样的“应该”工作并且在概念上可能不那么复杂。扫描数组一次并记录最小值和最大值。

值得一提
的事情： 1) if(direction < 0){}else{} 大概可以去掉，但是我没有时间去想细节。
2) 关键思想是，根据第一个“方向”（我们首先看到的是最小值还是最大值），for 循环的顺序会发生变化。
3）如果有多个项目，它将始终保留最后一个元素（最高索引）。

```
if(a.length < 2){
       return;
   }

   List<Integer> mins = new ArrayList<Integer>();
   List<Integer> maxs = new ArrayList<Integer>();
   int i=1;
   int prev = 0;

   int direction = 0;
   for(int j=1, k = 0;j<a.length && (direction = a[j]-a[k]) == 0;j++, k++);

   if(direction == 0){
       //Array contains only same value.
       return;
   }

   if(direction < 0){
       while(i<a.length){
           for(;i<a.length && a[prev] >= a[i];i++,prev++);
           mins.add(prev);
           for(;i<a.length && a[prev] <= a[i];i++,prev++);
           maxs.add(prev);
           i++;prev++;
       }    
   }
   else{
       while(i<a.length){
           for(;i<a.length && a[prev] <= a[i];i++,prev++);
           maxs.add(prev);
           for(;i<a.length && a[prev] >= a[i];i++,prev++);
           mins.add(prev);
           i++;prev++;
       }
   }

   //maxs and mins now contain what requested 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:08:33.043

我想我明白了。多谢你们！你的想法对我帮助很大！

以下解决方案对我有用：

```
 ArrayList<Integer> mins = new ArrayList<Integer>();
    ArrayList<Integer> maxs = new ArrayList<Integer>();

    int prevDiff = array[0] - array[1];
    int i=1;
    while(i<array.length-1){    
        int currDiff = 0;
        int zeroCount = 0;
        while(currDiff == 0 && i<array.length-1){
            zeroCount++;
            i++;
            currDiff = array[i-1] - array[i];
        }

        int signCurrDiff = Integer.signum(currDiff);
        int signPrevDiff = Integer.signum(prevDiff);
        if( signPrevDiff != signCurrDiff && signCurrDiff != 0){ //signSubDiff==0, the case when prev while ended bcoz of last elem
            int index = i-1-(zeroCount)/2;
            if(signPrevDiff == 1){
                mins.add( index );
            }else{
                maxs.add( index );
            }               
        }
        prevDiff = currDiff;
    } 
```

# c# - 排序日期和时间字符串

> ID：13157513
> 
> 赞同：0
> 
> 时间：2012-10-31T12:03:28.600
> 
> 标签：c#, .net, datetime

我有以下要排序的字符串（字符串格式：121030-1833 --> YYDDMM-HHMM）

字符串示例：

```
121030-1833
120823-2034
120807-2014
120627-2316
120525-1136
111226-1844 
```

我想将它们从最新格式排序到旧格式。

哪种排序方法最适合在这里使用？

## 更新的问题陈述

字典[String,string] "dictLocation" 值，想根据字典的键（键-YYMMDD-HHMM，从最新到最旧）对字典进行排序

```
{[110901-1226, sandyslocation.110901-1226]}
{[120823-2034, andyslocatio.120823-2034]}
{[110915-1720, mylocation.110915-1720]}
{[121030-1833, mylocation.121030-1833]} 
```

我正在尝试这个 var latestToOldest = dictLocation.OrderBy(key => key.Key)

它没有给我正确的结果，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:06:29.623

碰巧的是，只需按降序对它们进行排序即可：

```
var latestToOldest = original.OrderByDescending(x => x); 
```

那是假设您想假设所有值都在同一世纪内。（如果您可以更改格式，为了清楚起见，我建议使用 4 位数的年份。）

但是，我建议*尽早*`DateTime`将值解析为值。尽可能保持数据最“自然”的形式。从根本上说，这些是日期和时间，而不是字符串——所以尽早将它们转换成那种格式，并尽可能长时间地保持这种格式。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:07:42.260

```
var sortedDateStrings = dateStrings.Sort().Reverse();
// or
var sortedDateStrings = dateStrings.OrderByDescending(x => x); 
```*

# c# - 根据大小拆分和导出数据库表

> ID：13157514
> 
> 赞同：0
> 
> 时间：2012-10-31T12:03:28.643
> 
> 标签：c#, sql, sql-server-2008, csv, sqlcmd

总而言之，我开发了一种导出机制，允许从给定数据库中选择的表导出到 .csv 文件；我可以使用`bcp`or来做到这一点`sqlcmd`。对于大表（> 1-2GB），我想将表拆分成几个预先确定的、用户指定大小的 .csv 文件（比如 200MB）。

如何确定构成用户指定大小的行数？这样我就可以使用`sqlcmd`如下命令

```
DECLARE @sql VARCHAR(8000);
SELECT @sql = 'sqlcmd -S' + @@SERVERNAME + ' -E -Q ' + 
              '"SELECT * FROM Ia.dbo.[Episode];" -o "F:\aaData\Test2.csv" -s"," -W';
EXEC master..xp_cmdshell @sql; 
```

带有一个`TOP N`子句来获得正确的拆分 .csv 大小。我可能必须使用批量读取来计算行数，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:12:24.213

如果您希望导出的文件尽可能接近用户指定的大小，则需要采用更加程序化的方法。考虑：

```
public void Export( int fileSize )
{
    SqlDataReader reader = // command to return the recordset to export...

    int bytesLeft = fileSize;

    // open first output file
    while ( reader.Read() )
    {
        // write the row
        bytesLeft -= // length of the row you just wrote

        if ( bytesLeft <= 0 )
        {
            // close this file
            // open the next file
            bytesLeft = fileSize;
        }
    }

    // close the last file.
} 
```

此答案旨在强调拆分您要导出的文件的机制。读取数据和写入文本文件的详细信息我已经省略了，但是您可以通过阅读有关[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader%28v=vs.100%29.aspx)和[编写文本文件](http://msdn.microsoft.com/en-us/library/aa287548%28v=vs.71%29.aspx)来获得更多信息。

# php - 使用 jquery 从数据库中本地化动态下拉列表

> ID：13157517
> 
> 赞同：1
> 
> 时间：2012-10-31T12:03:36.163
> 
> 标签：php, jquery, localization

```
This is the language select box.

<select name="lang" id="lang" browser="Indicated by the browser">
<option value="en">English</option>
<option value="fr">French</option>
<option value="ch">Chinese</option>
<option value="sp">Spain</option>`enter code here`
</select>

This is script i have written.

<script type="text/javascript">

    jQuery(document).ready(function() {

        loadBundles('en');
        jQuery('#lang').change(function() {
            var selection = jQuery('#lang option:selected').val();
            loadBundles(selection != 'browser' ? selection : null);
            jQuery('#langBrowser').empty();
            if(selection == 'browser')  {                       jQuery('#langBrowser').text('('+jQuery.i18n.browserLang()+')');
            }
        });

    });

    function loadBundles(lang) {
        jQuery.i18n.properties({
            name:'Messages', 
            path:'bundle/', 
            mode:'both',
            language:lang, 
            callback: function() {
                updateExamples();
            }
        });
    }

    function updateExamples() {
        var ex1 = 'Firstname';
        var ex2 = 'Lastname';
        var ex3 = 'Youremail';
        var ex4 = 'Reenteremail';
        var ex5 = 'Newpassword';
        var ex6 = 'Dateofbirth';
        var ex7 = 'Signup';
        var ex8 = 'Itsfreeandalwayswillbe';
        var ex9 = 'Birthlabel';
        var ex10 = 'Termslabel';
        var ex11 = 'Summarylabel';
        var ex12 = 'PersonalLabel';
        var ex13 = 'Interestlabel';
        var ex14 = 'Addlabel';
        var ex15 = 'Editlabel';
        var ex16 = 'Deletelabel';
        var spreadsheet_label = 'Spreadsheetlabel';
        var invite_google_label = 'Invitegooglelabel';
        var invite_facebook_label = 'Invitefacebooklabel';
        var upload_label = 'Uploadlabel';
        var subBut='Submit';
        var dialogTitle = 'DTitle';

        jQuery("#first_name_label").text(eval(ex1));
        jQuery("#first_name_label1").text(eval(ex1));
        jQuery("#last_name_label").text(eval(ex2));
        jQuery("#last_name_label1").text(eval(ex2));
        jQuery("#email_label").text(eval(ex3));
        jQuery("#email_label1").text(eval(ex3));
        jQuery("#reenter_email_label").text(eval(ex4));
        jQuery("#new_password_label").text(eval(ex5));
        jQuery("#date_of_birth_label").text(eval(ex6));
        jQuery("#date_of_birth_label1").text(eval(ex6));
        jQuery("#sign_up").text(eval(ex7));
        jQuery("#label1").text(eval(ex8));
        jQuery("#button").val(eval(ex7));
        jQuery("#birth_label").text(eval(ex9));
        jQuery("#terms_label").text(eval(ex10));
        jQuery("#summary_label").text(eval(ex11));
        jQuery("#personal_label").text(eval(ex12));
        jQuery("#interest_label").text(eval(ex13));
        jQuery("#add_label").text(eval(ex14));
        jQuery("#edit_label").text(eval(ex15));
        jQuery("#delete_label").text(eval(ex16));

        jQuery("#spreadsheet_label").text(eval(spreadsheet_label));
        jQuery("#invite_google_label").text(eval(invite_google_label));
        jQuery("#invite_facebook_label").text(eval(invite_facebook_label));
        jQuery("#upload_label").val(eval(upload_label));

        jQuery("#submit_button").val(eval(subBut));
        jQuery("#ui-dialog-title-dialog").text(eval(dialogTitle));

    }
  </script>

  Everything is working fine for the labels. But in the case of dynamic drop down i     got    problem. How to localize the dynamic drop down data when the user selected the   language.
 The data in the drop down is coming from the database.

 I have a language select drop down box, after selecting one language from dropdown list am able to change the text filed names and all other text in the language that is selected. 
```

同时我有另一个下拉列表，因为数据是从数据库中动态生成的。在用户从下拉列表中选择语言后，我还必须更改此下拉列表中的数据。如果你有任何想法，请给我建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:27:35.197

你可以这样做：

```
<select name='lang'>
<option value='eng'>Eng</option>
<option value='french'>French</option>

</select>

<!-- below div is another div whose data changes as per the language selected -->
<div id="another_div"></div>​ 
```

JS：

```
$("select[name='lang']").live({
change: function(e){
    var selected_lang = $("select[name='lang'] option:selected").html();

    data = {}
    data['selected_lang'] = selected_lang;
    $.ajax({
        url: "required url",
        data: data,
        success: function(res){
           $("#another_div").text(res); // if result is a direct text sent from server
            // or
            $("#another_div").text(res.content); //if result is an object with the required content present in the key 'content'
        },
        error: function(err){
            alert("error occured");                 
        }

    });        

}
 });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:28:14.350

我会使用许多级联 jQuery 下拉菜单之一：

[http://www.ryanmwright.com/2010/10/13/cascading-drop-down-in-jquery/](http://www.ryanmwright.com/2010/10/13/cascading-drop-down-in-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:07:31.543

我建议你使用 ajax 来解决这个问题。

您可以`bind`先使用 ajax 下拉列表，然后使用从后端获取的数据填充第二个下拉列表。

# asp.net-mvc - ASP.Net mvc，错误时重新显示表格/网格数据

> ID：13157519
> 
> 赞同：1
> 
> 时间：2012-10-31T12:03:40.620
> 
> 标签：asp.net-mvc, grid

我对 mvc 很陌生，在构建搜索表单时，我偶然发现了一个与状态相关的问题。因此，在 asp.net mvc 中没有像 asp.net 表单中的 viewstate 这样的东西。问题是如果视图中出现输入错误如何重新显示网格数据，mvc 足够智能以显示输入的数据但搜索结果为表丢失。我也想查看旧结果。你们怎么解决的。将最后的搜索结果存储在会话中，如果模型中有错误，从会话中恢复？这感觉有点hacky的解决方案。

# ios - iOS 的 kAudioDevicePropertyBufferFrameSize 替换

> ID：13157523
> 
> 赞同：3
> 
> 时间：2012-10-31T12:03:46.113
> 
> 标签：ios, core-audio, audio-streaming, latency

我试图设置一个音频单元来渲染音乐（而不是音频队列..这对我的目的来说太不透明了）.. iOS 没有这个属性`kAudioDevicePropertyBufferFrameSize`.. 知道如何获得这个值来设置我的 IO 单元的缓冲区大小？

我发现[这篇](http://www.mailinglistarchive.com/html/coreaudio-api@lists.apple.com/2011-05/msg00057.html)文章很有趣..它询问了使用音频会话属性的组合`kAudioSessionProperty_CurrentHardwareIOBufferDuration`来`kAudioSessionProperty_CurrentHardwareOutputLatency`确定该值的可能性..但是没有答案..有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T20:24:31.297

您可以使用该`kAudioSessionProperty_CurrentHardwareIOBufferDuration`属性，它以秒为单位表示缓冲区大小。将其乘以您从中获得的采样率，`kAudioSessionProperty_CurrentHardwareSampleRate`以获得您应该缓冲的样本数。

生成的缓冲区大小应该是 2 的倍数。我相信 512 或 4096 是您可能得到的，但您应该始终基于从`AudioSessionGetProperty`.

例子：

```
Float64 sampleRate;
UInt32 propSize = sizeof(Float64);
AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareSampleRate, 
                        &propSize,
                        &sampleRate);

Float32 bufferDuration;
propSize = sizeof(Float32);
AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareIOBufferDuration, 
                        &propSize,
                        &bufferDuration);

UInt32 bufferLengthInFrames = sampleRate * bufferDuration; 
```

下一步是找出您要发送音频的设备的输入流格式。根据您的描述，我假设您正在以编程方式生成音频以发送到扬声器。此代码假定您`unit`正在`AudioUnit`向其发送音频，无论是 RemoteIO 还是效果音频单元之类的东西。

```
AudioStreamBasicDescription inputASBD;
UInt32 propSize = sizeof(AudioStreamBasicDescription);
AudioUnitGetProperty(unit,
                     kAudioUnitProperty_StreamFormat,
                     kAudioUnitScope_Input,
                     0,
                     &inputASBD,
                     &propSize); 
```

在此之后，`inputASBD.mFormatFlags`将是对应于所`unit`期望的音频流格式的位字段。最有可能的两组标志被命名为`kAudioFormatFlagsCanonical`和`kAudioFormatFlagsAudioUnitCanonical`。这两个具有相应的样本类型`AudioSampleType`，`AudioUnitSampleType`您可以根据这些样本类型进行尺寸计算。

顺便说一句，`AudioSampleType`通常表示来自麦克风或发往扬声器`AudioUnitSampleType`的样本，而通常表示打算处理的样本（例如，由音频单元处理）。目前在 iOS 上，`AudioSampleType`是一个 SInt16 并且`AudioUnitSampleType`是存储在一个 SInt32 容器中的固定 8.24 数字。[这是 Core Audio 邮件列表上的一篇文章，解释了这种设计选择](http://lists.apple.com/archives/coreaudio-api/2011/Feb/msg00069.html)

我之所以不愿说“只使用 Float32，它会起作用”之类的话，是因为如果 Apple 愿意，流的实际位表示可能会发生变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:55:05.683

音频单元本身决定实际缓冲区大小，因此应用程序的音频单元回调必须能够处理给它的任何合理大小。您可以建议并轮询 kAudioSessionProperty_CurrentHardwareIOBufferDuration 属性，但请注意，当您的应用程序运行时（尤其是在屏幕锁定或通话中断等期间），此值可能超出应用程序的控制范围。

# java - final 实例变量的意义是什么？

> ID：13157528
> 
> 赞同：5
> 
> 时间：2012-10-31T12:04:13.123
> 
> 标签：java, static, constants, instance-variables, class-variables

我在`static final class variable`和之间有一些混淆`final instance variable`。

这是示例代码：-

```
class Foof{
final int size=3;
final int whuffie;

    Foof()
    {
        whuffie=42; 
    }

    public static void main(String [] args){
        Foof obj1 = new Foof();
        Foof obj2 = new Foof();

        obj1.size=53;    //compile time error
        System.out.println(obj1.size);
        obj2.whuffie=45; //compile time error
        System.out.println(obj2.whuffie);
    }
} 
```

错误：-

```
ankit@stream:/home/Data/JAVA/practice/src/test.com/test-20121031_static_demystified$ javac Foof.java 
Foof.java:14: error: cannot assign a value to final variable size
obj1.size=53;    //compile time error
    ^
Foof.java:16: error: cannot assign a value to final variable whuffie
obj2.whuffie=45;
    ^
2 errors 
```

所以我的问题是，如果每个不同的实例不能有不同的值，那么拥有最终实例变量的意义何在。我的意思是，如果它们对每个实例都具有相同的值，那么我们为什么不将它们声明为类变量（静态最终类变量），因为这将达到相同的目的，而且我们不需要创建对象来访问它们。

* * *

编辑-1：-

```
class Foof{
    final int size=3;
    final int whuffie;

    Foof()
    {
        whuffie=42;
        size = 23;  //compile-time error.
    }

    public static void main(String [] args){
        Foof obj1 = new Foof();
        Foof obj2 = new Foof();

        //obj1.size=53;    
        System.out.println(obj1.size);
        //obj2.whuffie=45; 
        System.out.println(obj2.whuffie);
    }
} 
```

错误：-

```
Foof.java:8: cannot assign a value to final variable size
size = 23;
^
1 error 
```

根据错误，我可以确定在对象创建期间为第一个大小分配了一个值 =3。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T12:08:05.180

> 所以我的问题是，如果每个不同的实例不能有不同的值，那么拥有最终实例变量的意义何在。

*它们可以，但这些值在创建后*无法更改。您只能将值分配给实例变量初始化器和构造器中的最终实例字段，并且您*必须*以这种方式为所有实例字段分配值。

请注意，在您的代码中：

```
Foof()
{
    whuffie=42;  //compile time error
} 
```

...评论不正确。该分配应该是完全有效的。

最终字段对于实现*不变性*很有用——这有助于简化对对象的推理。例如，`String`它是不可变的，因此如果您验证一个字符串，然后保留引用的副本，您就知道验证在以后仍然是正确的。

与 相比`java.util.Date`，如果您*真的*希望验证有用，您需要创建该`Date`值的防御性副本，并且不提供对任何其他代码的引用，以防它更改所表示的底层瞬间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:07:51.440

`final`只要您为其赋值，A就是最终的。你以后不能改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:08:23.027

在声明或构造函数中初始化后，您不能修改`final`变量。

使用`static`关键字不会使其变得**可修改**。它只是意味着`final`可以通过类名或实例变量访问该变量，该变量仍然是**不可变**的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T14:24:47.253

实际上，当我们将任何变量创建为特定于类的变量时，需要静态和非静态最终变量，然后将其声明为静态，如果是对象级别，则将其声明为非静态变量。

例如，我们有一个国家作为一个类，并且将有该类的两个数据成员，如时区和重力。我们将它们都声明为最终的，但时区是特定于对象的（每个国家的时区不同但在全国范围内相同）并且重力是特定于类的（每个国家的重力与地球重力相同）所以我们被宣布为静态最终重力.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:10:13.110

`final`变量通常用于定义永远不应该改变的事物。您可以写入*一次*，然后将其永久设置。

您可以在构造函数中使用它来设置对象的 ID 或类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T12:10:33.233

对于最终变量，您只能赋值一次。它通常用于您不希望稍后在程序中更改变量值的情况。

静态变量每个类只创建一个实例，与您创建的该类的对象数量无关。

# android - 安卓和 HTTPS

> ID：13157532
> 
> 赞同：0
> 
> 时间：2012-10-31T12:04:25.307
> 
> 标签：android, https

我们最近为我们的 Android 应用程序使用的网络服务应用了一个证书。

我已将 Web 服务的路径更改为 HTTPS，并且一切正常。不会抛出异常。

下面是我用来发布到网络服务的代码：

```
HttpParams httpParameters = new BasicHttpParams();
// CONNECTION TIMEOUT
int timeoutConnection = 15000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// SOCKET TIMEOUT
int timeoutSocket = 30000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpPost httpPost = new HttpPost(getWebServiceAddress() + actionName);
httpPost.addHeader("Content-Type", "application/json; charset=utf-8");  
httpPost.addHeader("Accept-Encoding", "gzip");
httpPost.addHeader("User-Agent", "gzip");
httpPost.setEntity(new StringEntity(jsonBody, "UTF-8"));
HttpResponse response = null;
response = httpClient.execute(httpPost); 
```

我的问题是：在不更改 Android 代码的情况下，我从应用程序传出的通信是否也安全？我是否必须对与 HTTPS 相关的代码进行任何更改才能强制加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:11:37.020

*   我从应用程序传出的通信也安全吗？

如果您使用插座，则应使用`SSLSocket` 并戴上`SslCertificate`它。只需`HttpURLConnection`将实例更改为`HttpsURLConnection`

- 我是否必须对与 HTTPS 相关的代码进行任何更改才能强制加密？

如果要发送外发消息，则 - 是，否则 - 否

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:31:34.440

在服务器上使用 WireShark，我能够追踪从我的应用程序发送到服务器的数据包。

这些数据包用于通过 TLS 协议进行的加密传入连接。因此，我的传出数据是安全的，不需要其他 Android 配置。

# java - 如何启动提取的eclipse

> ID：13157535
> 
> 赞同：0
> 
> 时间：2012-10-31T12:04:27.557
> 
> 标签：java, eclipse

> **可能重复：**
> [无法运行 Eclipse；JVM 终止。退出代码=13](https://stackoverflow.com/questions/4945178/cannot-run-eclipse-jvm-terminated-exit-code-13)

我以 zip 格式下载了 Eclipse eclipse-jee-galileo-SR2-win32，然后在我的硬盘上解压。因此，当我单击 eclipse.exe 时，我会收到以下窗口作为警报。虽然我的机器上安装了 java 1.6_35。![在此处输入图像描述](../Images/f8c904cc31207d20ce6be32c50760048.png)

到目前为止，在谷歌上搜索了很多之后，我无法摆脱这个。现在如何启动eclipse。在其他机器上也可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:43:33.900

确保您的 jvm 是 32 位的。你可以通过运行找到 `java -version`。你有 32 位 jvm (-arch x86) 的 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:08:03.280

检查您的 eclipse.ini 文件（在与 exe 相同的文件夹中）。也许它没有指向您的 java 安装位置。搜索这样的一行

```
-vm c:/Program Files/Java/jdk1.6.0_22/bin/javaw.exe 
```

# tridion - 事件不起作用

> ID：13157536
> 
> 赞同：4
> 
> 时间：2012-10-31T12:04:35.683
> 
> 标签：tridion, tridion-2011

我是 Tridion 事件系统的新手。我写了一个小代码。

```
[TcmExtension("MyEventHandlerExtension")]
public class EH : TcmExtension
{
    public EH()
    {
        Subscribe();
    }
    public void Subscribe()
    {
        //EventSystem.Subscribe<Component, DeleteEventArgs>(HandlerForInitiated, EventPhases.Initiated);
        EventSystem.Subscribe<Tridion.ContentManager.CommunicationManagement.Page, Tridion.ContentManager.Extensibility.Events.PublishOrUnPublishEventArgs>(HandlerForCommitted, EventPhases.All);
    }

    private void HandlerForCommitted(IdentifiableObject subject, PublishOrUnPublishEventArgs args, EventPhases phase)
    {

        TDSE obj = new TDSE();
        Tridion.ContentManager.Interop.TDS.Publication pub = obj.GetPublication("tcm:0-150-1");
        Tridion.ContentManager.Interop.TDS.Page pubPage = obj.GetPage("tcm:150-12374-64", pub);
        pubPage.Publish("tcm:0-1-65538", false, true, false, default(DateTime), default(DateTime), default(DateTime));

    }
} 
```

使用此代码，我想在每次发布和取消发布事件发生时发布一个页面。我构建此代码并在 tridion 配置文件中注册其路径。但它不起作用。请帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T12:20:16.020

好的，首先删除所有的 TDSE 代码，你应该使用 TOM.NET。你可以得到会话`subject.Session`

然后确保您已注册此扩展`Tridion.ContentManager.config`并重新启动系统

最后 - 如果某些东西不起作用，只需添加简单的代码，该代码将`HandlerForCommitted`在事件发生时在您的文件中创建一个文件，这样您将能够查看您的扩展是否被执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T12:25:22.480

2011 Event System 使用 TOM.NET API 而不是 TOM API。请不要在 2011 事件系统中创建新的 TDSE 对象。即使您可以引用旧的 Interop 库，也没有理由在 2011 中这样做。使用 TOM.NET 库您应该会看到更好的性能，而且代码是面向未来的。

Mihai Cadaru 有一个[很好的例子](http://yatb.mitza.net/2012/05/publishing-from-template-code-using.html)，他使用 TOM.NET 从 Tridion 模板发布页面。调整代码以检查预览模式或发布模式并设置您自己的用户和优先级（而不是从当前事务中读取）应该可以正常工作。

以下代码来自[http://yatb.mitza.net/2012/05/publishing-from-template-code-using.html](http://yatb.mitza.net/2012/05/publishing-from-template-code-using.html)

```
public void Publish(Engine engine, String tcmUri, User user, PublishPriority priority)
{
    Session session = new Session(user.Title);

    PublishInstruction publishInstruction = new PublishInstruction(session);
    RenderInstruction renderInstruction = new RenderInstruction(session);
    renderInstruction.RenderMode = RenderMode.Publish; // work around. needs to be specified for binaries.
    publishInstruction.RenderInstruction = renderInstruction;

    List<IdentifiableObject> items = new List<IdentifiableObject>() { session.GetObject(tcmUri) };
    List<PublicationTarget> targets = new List<PublicationTarget>() { engine.PublishingContext.PublicationTarget };
    PublishEngine.Publish(items, publishInstruction, targets, priority);

    session.Dispose();
}

// called with
 PublishTransaction currentTransaction = TemplateUtils.GetPublishTransaction(engine);
    TemplateUtils.Publish(engine, itemUri, currentTransaction.Creator, currentTransaction.Priority); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T13:49:22.297

您的代码似乎包含我“通常”忘记的三件事：

1.  班级是`public`
2.  它延伸`TcmExtension`
3.  它有一个`TcmExtension`属性

如果您已在配置文件中正确注册了该类，则只需重新启动相关模块即可。在这种情况下，我希望那些是 Publisher 和 TcmServiceHost 服务。

重新启动这些模块并触发发布操作后，您应该会看到正在记录的事件（在 Windows 事件查看器中）表明您的扩展正在加载。

如果这甚至显示，这意味着您的程序集正在加载到相关的 Tridion 进程中，并且正在识别和实例化该类。

如果在这个阶段你的处理程序没有触发，你可能不得不考虑监听不同的事件。每当我想与发布进行交互时，我最终都会听`SaveEventArgs`a 的`PublishTransaction`，而不是`PublishOrUnPublishEventArgs`.`Page`

# php - Virtuemart 2 pdf生成

> ID：13157537
> 
> 赞同：2
> 
> 时间：2012-10-31T12:04:37.370
> 
> 标签：php, pdf, joomla, virtuemart

我将在文件结构中的什么位置找到为 2 生成 pdf 发票的 php 文件？

我试图为保险经纪人网站定制它，而不是将保险文件作为 pdf 格式发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:16:15.340

您可以在下面找到 PDF 生成部分。

```
in the front end compnents/com_virtuemart/view/invoice/ 
```

他们在这里使用 PDF 部分，我在该部分中使用 VM2.0.6 不起作用。因此，对于我的要求与您几乎相同，我使用 DomPdf 创建选项进行了操作。首先将 PDF 内容创建为 HTML，然后轻松转换为 PDF。

你可以在这里找到 Dompdf

```
http://code.google.com/p/dompdf/source/browse/tags/dompdf_0-6-0_beta3/ 
```

根据您的要求创建自己的路径。

# iphone - UIAutomation 超时使用

> ID：13157542
> 
> 赞同：0
> 
> 时间：2012-10-31T12:04:51.527
> 
> 标签：iphone, objective-c, ui-automation

伙计们帮助我了解超时的用法。该文档给出了很多关于它们的信息：

`popTimeout- Retrieves the previous timeout value from a stack, restores it as the current timeout value, and returns it.`

`pushTimeout - Stores the current timeout value on a stack and sets a new timeout value.`

他们还提供了一些代码：

```
target = UIATarget.localTarget();

target.pushTimeout(2);
    // attempt element access
target.popTimeout(); 
```

但我不完全了解如何以及何时使用它们。任何人都可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:31:30.313

在自动化测试期间，某些元素可能不会立即变得可见。因此仪器使用超时（默认 5 秒）来等待请求的元素。他们称之为宽限期。

有时默认的宽限期可能不是您所需要的，因此您可以将超时更改为更短或更长的值。使用 pushTimeout 和 popTimeout 可以确保在调用 popTimeout 后恢复之前的宽限期，而无需记住之前的宽限期。

例如：在我的一个测试中，我不想等待弹出框激活，但我只想知道是否有弹出框激活，如果有则关闭它：

```
target.pushTimeout(0.0);

if ( target.isDeviceiPad() && ! isNull( popOver= app.mainWindow().popover() ) )
{
    UIALogger.logDebug(" dismiss popup by tapping somewhere");
    popOver.dismiss();
    target.delay(0.2);
}
target.popTimeout(); 
```

顺便说一句， isNull() 是我制作的自定义函数，但您可能了解发生了什么。

# python - 正则表达式查找和替换多个

> ID：13157543
> 
> 赞同：0
> 
> 时间：2012-10-31T12:04:52.523
> 
> 标签：python, regex

我正在尝试编写一个匹配所有情况的正则表达式

```
[[any text or char her]] 
```

在一系列的文字中。

例如：

```
My name is [[Sean]]
There is a [[new and cool]] thing here. 
```

使用我的正则表达式，这一切都很好。

```
data = "this is my tes string [[ that does some matching ]] then returns."
p = re.compile("\[\[(.*)\]\]")
data = p.sub('STAR', data) 
```

问题是当我有多个匹配实例发生时：[[hello]] 和 [[bye]]

例如：

```
data = "this is my new string it contains [[hello]] and [[bye]] and nothing else"
p = re.compile("\[\[(.*)\]\]")
data = p.sub('STAR', data) 
```

这将匹配 hello 的左括号和 bye 的右括号。我希望它取代他们两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:07:11.923

`.*`是贪婪的并且匹配尽可能多的文本，包括`]]`and `[[`，所以它会通过你的“标签”边界。

一个快速的解决方案是通过添加一个来使明星变得懒惰`?`：

```
p = re.compile(r"\[\[(.*?)\]\]") 
```

一个更好（更健壮和明确但稍慢）的解决方案是明确我们不能跨标签边界匹配：

```
p = re.compile(r"\[\[((?:(?!\]\]).)*)\]\]") 
```

**解释：**

```
\[\[        # Match [[
(           # Match and capture...
 (?:        # ...the following regex:
  (?!\]\])  # (only if we're not at the start of the sequence ]]
  .         # any character
 )*         # Repeat any number of times
)           # End of capturing group
\]\]        # Match ]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:07:49.090

在 a 之后使用不贪婪匹配`.*?`<~~或使其匹配尽可能少的字符。默认是贪婪的，并且消耗尽可能多的字符。`?``+``*`

```
p = re.compile("\[\[(.*?)\]\]") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:12:32.583

你可以使用这个：

```
p = re.compile(r"\[\[[^\]]+\]\]")

>>> data = "this is my new string it contains [[hello]] and [[bye]] and nothing else"
>>> p = re.compile(r"\[\[[^\]]+\]\]")
>>> data = p.sub('STAR', data)
>>> data
'this is my new string it contains STAR and STAR and nothing else' 
```

# silverlight - silverlight 在后面的代码中构建数据网格

> ID：13157547
> 
> 赞同：0
> 
> 时间：2012-10-31T12:05:01.473
> 
> 标签：silverlight, datagrid

Silverlight DataGrid 中是否有可能有一列包含不同类型的控件的行？例如，列的前两行应该是文本，接下来的两行将有按钮，然后接下来的 6 行将有复选框。我还需要在后面的代码中构建它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:42:39.817

也许代码下面的代码给了你这个想法。

```
 foreach (var item in ItemList)
        {
            //Row definition and column definitions are similar
            LayoutRoot.RowDefinitions.Add(new RowDefinition() 
            { Height = GridLength.Auto});         

            HelloObject hl=new HelloPObject();

            //Attached property imeplemantation
            Grid.SetRow(hl,Layout2.RowDefinitions.Count);

            //You may add any UIElement as Children
            LayoutRoot.Children.Add(hl);                
        } 
```

编辑：对不起，我没有意识到数据网格。

好吧，它也可能用于数据网格，AFAIK Telerik 的 radgridview 为您提供行的索引。但您可以自己管理。

除此之外，当您点击网格排序时，此顺序可能会丢失，具体取决于列的排序成员路径。但是您可以根据 DataGrid 的 ItemsSource 元素中的属性来切换 CellTemplate。

```
 DataGrid grid = new DataGrid();
        int rowNdx = 0;
        grid.LoadingRow += (s, a) =>
            {                    
                DataGridCell cell = myList.Columns[0].GetCellContent(a.Row).Parent as DataGridCell;
                switch (rowNdx)
                {
                    case 0:
                        cell.Content = new TextBlock() { Text= "Click" };
                        break;
                    default:
                        cell.Content = new Button() { Content = "Click" };                    
                        break;
                }
                rowNdx++;                    
            }; 
```

# entity-framework-4 - 可以从视图中使用“System.Data.Objects.SqlClient.SqlFunctions”吗？

> ID：13157549
> 
> 赞同：3
> 
> 时间：2012-10-31T12:05:09.240
> 
> 标签：entity-framework-4, asp.net-mvc-4

我正在渲染一个具有整数值的下拉列表，并且`SelectListItem`value 属性只接受一个字符串，因此需要进行转换。`.ToString()`功能无法使用。

```
@Html.DropdownList("ddl", Model.recordList.Select(
       q => new SelectListItem 
       { 
         Text = q.recordName, 
         Value = SqlFunctions.StringConvert(q.recordId) 
       }
       , "choose one")

// recordId is an Integer 
```

我在运行时收到程序集引用错误：

```
The type or namespace name 'Objects' does not exist in the namespace 
'System.Data' (are you missing an assembly reference?) 
```

`@using System.Data.Objects.SqlClient`在我的视图中已经有一个对 System.Data.Entity 的项目引用。我也期待这一点，因为它没有出现在 Intellisense 中。我可以在**Controllers**中使用，但**不能在 Views**中使用。

我在这里违反了任何 MVC 规则吗？还是可能配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:05:53.667

**这是配置错误。**

为了解决，我不得不：

1) 将其添加到`Views/Web.config`.

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Optimization" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Data.Entity" />
            <add namespace="System.Data.Objects.SqlClient" />
        </namespaces>
    </pages>
</system.web.webPages.razor> 
```

2) 更改`Project > References > System.Data.Entity`属性`Copy Local`= `True`。程序集没有被复制到`bin`，因此标识为`missing`.

# javascript - 选择下拉项目时显示单选按钮

> ID：13157556
> 
> 赞同：0
> 
> 时间：2012-10-31T12:05:47.313
> 
> 标签：javascript, dom-events

我是 Javascript 语言的新手，我正在处理以下问题：

当访问者单击下拉列表中的任何项目时，必须看到四个单选按钮。

这是下拉列表的html代码：

```
<div class="xmp-form-row ">
    <Label CssClass="xmp-form-label" For="wijzigingOpvangVestiging">Vestiging waar uw kind geplaatst is</Label>
    <DropDownList Id="wijzigingOpvangVestiging" DataField="wijzigingOpvangVestiging" DataSourceId="dsLocaties" DataTextField="Vestiging" DataValueField="Vestiging" DataType="string" AppendDataBoundItems="True">
        <ListItem Value="niet geselecteerd">(Selecteer een vestiging)</ListItem>
    </DropDownList>
</div> 
```

这是单选按钮的代码：

```
<div class="xmp-form-row radioButtonCheckfirst locationRB">
    <Label CssClass="xmp-form-label" For="wijzigingReden">Reden beeindiging</Label>            
    <radiobuttonlist id="wijzigingReden" datafield="wijzigingReden" RepeatDirection="Vertical" RepeatLayout="Table" datatype="string">
        <listitem value="Uitbreiding van dagen-uren"> Uitbreiding van dagen/uren </listitem>
        <listitem value="Gedeeltelijke opzegging"> Gedeeltelijke opzegging </listitem>
        <listitem value="Wijziging van vestiging"> Wijziging van vestiging </listitem>
        <listitem value="Wijziging van dagen"> Wijziging van dagen </listitem>
    </radiobuttonlist>                                    
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:12:11.303

尝试这样的事情......

```
 <DropDownList onchange="document.getElementById('wijzigingReden').style.display = ''" Id="wijzigingOpvangVestiging" DataField="wijzigingOpvangVestiging" DataSourceId="dsLocaties" DataTextField="Vestiging" DataValueField="Vestiging" DataType="string" AppendDataBoundItems="True">
        <ListItem Value="niet geselecteerd">(Selecteer een vestiging)</ListItem>
    </DropDownList> 
```

并将单选按钮设置为在页面加载时不显示。

```
 <radiobuttonlist style="display: none" id="wijzigingReden" datafield="wijzigingReden" RepeatDirection="Vertical" RepeatLayout="Table" datatype="string">
        <listitem value="Uitbreiding van dagen-uren"> Uitbreiding van dagen/uren </listitem>
        <listitem value="Gedeeltelijke opzegging"> Gedeeltelijke opzegging </listitem>
        <listitem value="Wijziging van vestiging"> Wijziging van vestiging </listitem>
        <listitem value="Wijziging van dagen"> Wijziging van dagen </listitem>
    </radiobuttonlist> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:20:59.723

```
<div id="dropDownDiv" class="xmp-form-row " onChange="showDiv()">
        <Label CssClass="xmp-form-label" For="wijzigingOpvangVestiging">Vestiging waar uw kind geplaatst is</Label>
        <DropDownList Id="wijzigingOpvangVestiging" DataField="wijzigingOpvangVestiging" DataSourceId="dsLocaties" DataTextField="Vestiging" DataValueField="Vestiging" DataType="string" AppendDataBoundItems="True">
            <ListItem Value="niet geselecteerd">(Selecteer een vestiging)</ListItem>
        </DropDownList>
    </div>

<radiobuttonlist  id="wijzigingReden" datafield="wijzigingReden" RepeatDirection="Vertical" RepeatLayout="Table" datatype="string" style="display: none">
        <listitem value="Uitbreiding van dagen-uren"> Uitbreiding van dagen/uren </listitem>
        <listitem value="Gedeeltelijke opzegging"> Gedeeltelijke opzegging </listitem>
        <listitem value="Wijziging van vestiging"> Wijziging van vestiging </listitem>
        <listitem value="Wijziging van dagen"> Wijziging van dagen </listitem>
    </radiobuttonlist> 

<script type="text/javascript">
   function showDiv(){
       if( document.getElementById('wijzigingReden').style.display == "block"){
          document.getElementById('wijzigingReden').style.display = "none";
       }
       else{
          document.getElementById('wijzigingReden').style.display = "block";
       }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:21:09.090

将一个css类“隐藏”添加到最初隐藏按钮/标签的单选按钮中，然后使用jquery ...

```
$("#wijzigingOpvangVestiging").change(function() {
    $("#nameoftheradiobuttondiv").removeClass("hidden");
}); 
```

在这里摆弄... [http://jsfiddle.net/Z5nNW/2/](http://jsfiddle.net/Z5nNW/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:11:33.993

我建议您将`change`事件绑定到您的下拉列表。[文档](http://api.jquery.com/change/)

# assembly - 目标 x64 或 x86 自动注册

> ID：13157563
> 
> 赞同：0
> 
> 时间：2012-10-31T12:06:05.617
> 
> 标签：assembly

而不是写

```
ifndef X64
  mov eax, dest
else
  mov rax, dest
endif 
```

有没有办法在一行代码中编写它，根据机器目标自动使用正确的寄存器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:15:42.917

您使用的是什么汇编程序和环境？也许您可以定义一个宏，根据目标扩展为 eax 和 rax。

AFAIK，大多数 x86-64 工具链的默认模式是可执行文件始终放置在低 4GB 的地址空间中。（不过，共享库可以放在更高的地址。）这种假设几乎总是正确的，并且有助于减少代码大小。此外，写入`eax`隐式清除`rax`. 因此，您可以（可能）安全地写入`eax`32 位和 64 位...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:09:46.770

我想你可以写一堆宏来做到这一点，但我不确定它会有多有效，因为并非所有操作都兼容 64 位和 32 位寄存器......并不是人们真正做的事情......

# c# - 如何以编程方式在文档模板上打印信息？

> ID：13157568
> 
> 赞同：0
> 
> 时间：2012-10-31T12:06:23.400
> 
> 标签：c#, printing, documents

我有一个 C# 应用程序，可以打印发票和工资单。客户给我发了一个模板，用于日常操作。我不知道如何打印到它，尽管我已经知道如何打印一个以编程方式制作的包含来自访问数据库的信息的文本文件。

如何打印这种模板上的信息？（这只是我[在谷歌上找到][1] 并且是简单发票打印的好候选）我的文档模板也有一个 LOGO..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:28:52.707

我一直在使用 PrintDocument 和 PrintPreview 对象。即使用 Graphics 类。调用 print 时，您会得到一个“PrintEventArgs e”对象。然后您可以使用 e.Graphics 访问诸如 e.Graphics.DrawString、.DrawImage 等内容。

我构建了一个覆盖打印的整个打印对象类。所以我有一个详细信息框，它有不同的字体、标志、标题、法律术语等。每一个都有它自己的类。我将它们全部放在一个大列表中，然后调用 printThis(List); 它将获取每个打印功能和坐标并为我制作一个表格。

继承对象

```
class formHdr : printObject
{
    private string headerText;

    public formHdr(string hText)
        : base()
    {
        headerText = hText;

    }

    public override void printThis(System.Drawing.Printing.PrintPageEventArgs e)
    {
        Graphics g = e.Graphics;
        g.DrawString(headerText, FRHEADER, Brushes.Black, BaseX, BaseY);

    }
} 
```

基类

```
abstract class printObject
{
    protected Font FTHEADER;
    protected Font NRML;
    protected Font DETAIL;
    protected Font FRHEADER;
    protected Font DETHEADER;
    protected Font LEGAL;
    protected Font LEGAL2;

    public int baseX, baseY;
    public int boxSX, boxSY;

    public printObject()
    {
        baseX = 0;
        baseY = 0;
        boxSX = 0;
        boxSY = 0;
        FTHEADER = new Font("Arial", 12, FontStyle.Bold);
        NRML = new Font("Calibri", 10);
        DETAIL = new Font("Consolas", 8);
        FRHEADER = new Font("Arial", 16, FontStyle.Bold);
        DETHEADER = new Font("Calibri", 10, FontStyle.Bold);
        LEGAL = new Font("Arial", 8);
        LEGAL2 = new Font("Arial", 10);
    }

    public virtual void printThis(PrintPageEventArgs e) { } 
```

对象创建

```
 mainHead = new formHdr("Bill of Lading/Weigh slip Original");
                mainHead.BaseX = 225;
                mainHead.BaseY = 20;
                bol.Add(mainHead); 
```

也许这可以让你开始？我仍在调整它，并且会对其他响应感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:04:06.417

通过 Word 中的邮件合并来完成。使用这种技术您可以创建 Word 文档。在文档内部，您可以为文本创建占位符。从代码中，你可以用你想要的任何东西填充占位符。

例如：

1.  在word文档类型`ctrl`+`F9`
2.  右键单击字段并`Edit field`
3.  选择`MergeField`
4.  关于字段名称类型`FirstName`
5.  添加代码：

.

```
var document = new Document("document.docx");
var sqlCommand = "SELECT TOP 1 userName FirstName FROM Users";
var table = GetTable(sqlCommand, String.Empty);
document.MailMerge.Execute(table); 
```

# vb.net - 将自定义列表放入 datagridview vb.net

> ID：13157569
> 
> 赞同：0
> 
> 时间：2012-10-31T12:06:24.650
> 
> 标签：vb.net, winforms, datagridview

我有以下结构

```
matrix As Dictionary(Of String, Dictionary(Of Class1, Class2)) 
```

我想把这个结构的所有元素放在一个 datagridview 中，如下所示：

```
Column1: String   | Column2: Class1.name     | column3: class2.name 
```

有人知道如何解决这个问题吗？我是 datagridviews 的新手，所以不知道如何开始添加行和列（也许自动生成列？？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:18:17.863

测试和工作样本：

```
Public Class Class1
  Public name As String
End Class
Public Class Class2
  Public name As String
End Class

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
  Dim matrix As New Dictionary(Of String, Dictionary(Of Class1, Class2))
  matrix.Add("hello", New Dictionary(Of Class1, Class2))
  matrix("hello").Add(New Class1 With {.name = "123"}, New Class2 With {.name = "321"})

  Dim dt As New DataTable
  With dt.Columns
    .Add("Column1")
    .Add("Column2")
    .Add("Column3")
  End With
  For i = 0 To matrix.Count - 1
    Dim key As String = matrix.Keys(i)
    Dim value As Dictionary(Of Class1, Class2) = matrix.Values(i)
    For j = 0 To value.Count - 1
      Dim class1Name As String = value.Keys(j).name
      Dim class2Name As String = value.Values(j).name
      Dim dr As DataRow = dt.NewRow
      With dr
        .Item("Column1") = key
        .Item("Column2") = class1Name
        .Item("Column3") = class2Name
      End With
      dt.Rows.Add(dr)
    Next
  Next
  dataGridView1.DataSource = dt
End Sub 
```

# c++ - Uncrustify 和/或 Universal Indent GUI 可以拆分字符串文字吗？

> ID：13157572
> 
> 赞同：4
> 
> 时间：2012-10-31T12:06:38.173
> 
> 标签：c++, uncrustify, universalindentgui

我正在为我的 C++ 项目使用 Universal Indent GUI 和 Uncrustify。代码宽度设置为80个字符，代码格式几乎令人满意。这似乎适用于常规代码，但字符串文字没有拆分，我也希望这种情况发生。

以下示例演示了我正在尝试实现...

原来的：

```
Logger myLog;
myLog << "Long log message which exceeds line width." << std::endmsg; 
```

美化（align_left_shift=true）：

```
Logger myLog;
myLog << 
"Long log message which exceeds line width." 
      << std::endmsg; 
```

首选：

```
Logger myLog;
myLog << "Long log message which exceeds "
         "line width." 
      << std::endmsg;
// or
myLog << "Long log message which exceeds "
         "line width." << std::endmsg; 
```

使用提到的辅助工具可以做到这一点吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-31T12:53:28.530

```
myLog << "Long log message which exceeds " \
         "line width."
      << std::endmsg; 
```

# iphone - 如何使用 UINavigation Controller 传入对象并加载到另一个页面？

> ID：13157577
> 
> 赞同：0
> 
> 时间：2012-10-31T12:06:54.850
> 
> 标签：iphone, ios5, uinavigationcontroller, xcode4.3, uistoryboard

我正在使用故事板来创建我的应用程序。第一次运行，它将显示所有数据。之后，如果我单击 +，我将添加一个新数据。如果我单击该行，我将移至显示数据的页面。

我正在使用它，但仍然出现错误。这是我的代码。

```
 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
    if ([segue.identifier isEqualToString:@"AddUser"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        UserDetailViewController *userDetailViewController = [[navigationController viewControllers] objectAtIndex:0];
        userDetailViewController.delegate = self;
    }
    else if ([segue.identifier isEqualToString:@"UpdateUser"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        UserNHG *usernhg = [ListUserNHG objectAtIndex:indexPath.row];

        UINavigationController *navigationController = [segue.destinationViewController setUsernhg:usernhg]; // i got my error here  
        UserDetailViewController *userDetailViewController = [[navigationController viewControllers] objectAtIndex:0];
        userDetailViewController.delegate = self;
    }
} 
```

这是我的错误信息

```
Initializing 'UINavigationController *__strong' with an expression of incompatible type 'void'; 
```

如果我只使用这个，我不会得到错误。

```
UINavigationController *navigationController = [segue destinationViewController]; 
```

但如果我使用该代码，我该如何传递我的对象？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:21:15.747

像这样使用：

```
 AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
 UINavigationController *navigationController = (UINavigationController *)objAppDelegate.window.rootViewController;
 UserDetailViewController *userDetailViewController = (UserDetailViewController *)[[navigationController viewControllers] objectAtIndex:0]; //must know correctly index of UserDetailViewController 
```

**编辑**：如何`pass object`：

```
Create UserNHG *selectedUser property in UserDetailViewController. 
```

现在

```
userDetailViewController.selectedUser =  usernhg; //object passed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:09:15.800

我只是通过参考[这个链接找到它](https://stackoverflow.com/questions/10672856/pass-int-variable-to-uitableview-through-uinavigationcontroller)

这是我的代码：

```
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    UserNHG *usernhg = [ListUserNHG objectAtIndex:indexPath.row];

UINavigationController *navigationController = [segue destinationViewController];
    TestViewController *testViewController = [[navigationController viewControllers] objectAtIndex:0];
    testViewController.usernhg = usernhg;
testViewController.delegate = self; 
```

谢谢你的时间。:)

# jquery - 在 fancybox 中的主图像之上添加图像

> ID：13157579
> 
> 赞同：1
> 
> 时间：2012-10-31T12:07:03.557
> 
> 标签：jquery, fancybox

我正在显示许多图像...

```
<div id="gallery"> 
    <a href="photos/pic1.jpg" rel="lightbox-left" title=""> 
        <img src="photos/pic1_2.jpg" /></a> 

    <a href="photos/pic2.jpg" rel="lightbox-left" title="my title" class="flag"> 
        <img src="photos/pic2_2.jpg"  /></a>
</div> 
```

我想要的是具有“标志”类的条目在较小的图像（例如 pic2_2.jpg）和主要的花式框图像（例如 pic2.jpg）上显示一个小标志图像。

我使用以下实现的第一部分（我将叠加图像添加为背景图像）

```
$("<img src='/images/empty.png' class='overlay' />").insertAfter("a.flag img"); 
```

与 CSS 的

```
img.overlay {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 18px;
    height: 21px;
    background-image: url(/images/flag.png);
    background-repeat: no-repeat;
    border:none !important;
} 
```

但是我很难解决问题的第二部分，即在fancybox 主图片上叠加图像。

我通过向标题添加图像然后使用 CSS 移动它来获得某种控制，但似乎无法找到将其移动到适用于任何尺寸图像的位置。我试过的是

```
 $('#gallery a').fancybox({
        beforeShow: function () {
            if (this.title) {
                this.title = "<img src='/images/flag.png' class='moveflag' />" + this.title;
            }
            else {
                this.title = "<img src='/images/flag.png' class='moveflag' />";
            }
        }
    }); 
```

与 CSS 的

```
.moveflag {
    position:absolute;
    top:-50px;
    left:5px;
 } 
```

如果我能掌握 fancybox 组件的大小和位置，那么我可以构建一个明确的样式来将图像移动到我想要的位置，但我一直无法找到这些信息。

所以，我所追求的要么是在图片上叠加这个小图像的更好方法，要么是某种获得各种尺寸的方法，这样我就可以将它可靠地放置在我想要的位置。

我还要指出，在这个阶段，这个解决方案甚至还没有开始考虑将效果仅应用于具有“标志”类的图片。首先我需要能够产生我想要的效果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:12:15.927

考虑使用`insertBefore`而不是`insertAfter`在

```
$("<img src='/images/empty.png' class='overlay' />").insertAfter("a.flag img"); 
```

因为`overlay`是绝对定位的，所以不会影响真实图像的位置。但是，您需要`z-index`在 CSS 中进行管理，以使您的叠加层`z-index`比原始图片更大。

# c# - 查看团队列表

> ID：13157580
> 
> 赞同：0
> 
> 时间：2012-10-31T12:07:04.960
> 
> 标签：c#, asp.net

我有一个“它是什么”的问题。

目前，我正在尝试创建一个页面来创建团队，并允许用户为这些团队选择成员。

到目前为止，将 ListBoxes（基于所选团队的数量）动态呈现到页面，然后用户选择一个成员，并将其添加到团队中。

我想允许添加**x**数量的团队，但这会使*可能*添加的列表拳击手的数量变得混乱。

我想知道是否有一种观点可以在曾经干净的环境中代表这一点。我想在标题中显示团队名称，并在下方显示其成员 - 并带有编辑选项。我查看了 GridView 和 ListView，但我看不出它们是如何*完全按照我的意愿做的。*我提供了一张高度精致的图片来帮助详细说明。

![画得非常好](../Images/e3987ef3e56b7374023752c5ec256a8a.png)

**编辑：**这不是一个“我该怎么做-gimmie 代码问题”。我只想知道是否可以完成，如果可以，我可以使用什么控件。甚至可以参考一个类似的页面给我一个快速教程^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:09:52.800

看看`Repeater`web 表单控件。你可以嵌套它们。

# java - 如何在Scala中以字符串格式重复参数

> ID：13157584
> 
> 赞同：9
> 
> 时间：2012-10-31T12:07:11.223
> 
> 标签：java, scala, string-formatting

如何重用相同的字符串进行格式放置？例如

```
"%s-%s-%s" format("OK")
>> "OK-OK-OK" 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-31T12:09:47.667

这应该有效：

```
"%1$s-%1$s-%1$s" format "OK" 
```

[WrappedString](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.immutable.WrappedString)的`format`方法在后台使用。[Formatter Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)说：`java.util.Formatter`

> 通用、字符和数字类型的格式说明符具有以下语法：
> 
> ```
> %[argument_index$][flags][width][.precision]conversion 
> ```
> 
> 可选`argument_index`参数是一个十进制整数，指示参数在参数列表中的位置。第一个参数由 引用`"1$"`，第二个由引用`"2$"`，以此类推。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T12:09:31.170

```
"%s-%s-%s".format(Seq.fill(3)("OK"): _*) 
```

该`: _*`部分的意思是“使用这个序列作为参数”。 `Seq.fill(3)("OK")`创建`"OK"`.

# javascript - 移动设备上的全屏画布

> ID：13157586
> 
> 赞同：3
> 
> 时间：2012-10-31T12:07:12.797
> 
> 标签：javascript, css, canvas, mobile-devices

我创建了一个小型画布游戏，我希望它可以在 PC 和移动设备上运行。

在 PC 上，画布区域按预期工作，但在为移动设备设计时出现问题。

有没有办法（CSS 或 javascript）使网站内的画布区域在用户双击时变为全屏？除非画布足够大以适合整个屏幕，否则您无法玩游戏，但我发现很难缩放以使画布在移动设备上完全全屏。

换句话说，我想要一个 CSS 或 javascript/jQuery 解决方案来全屏（将设备上的缩放设置为完全适合画布区域）移动设备上的画布区域。

[例子](http://jsfiddle.net/TM2ML/)

```
canvas{
    width:624;
    height:351;
    background:red;
} 
```

例如，尝试在 iPhone 上双击。iPhone 的 Safari 上的默认操作是缩放 ~ 与画布一样多，但它仍然不能完美地适合画布。现在我们应该忽略纵横比，但是如果画布的纵横比与设备的屏幕不同，那么在顶部和底部添加一些空白黑条的答案会很好：D

或者，换一种说法：当用户双击时，我希望屏幕“锁定”画布，禁用平移或缩放，直到用户再次双击。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T11:03:10.230

从：

[http://impactjs.com/documentation/impact-on-mobile-platforms#always-render-in-the-native-resolution](http://impactjs.com/documentation/impact-on-mobile-platforms#always-render-in-the-native-resolution)

如果 Canvas 上的一个像素与设备屏幕的一个像素不直接对应，则整个 Canvas 必须在显示之前由浏览器缩放——这非常慢。

大多数移动浏览器都支持视口元标记。使用此标签，您可以将页面的缩放级别锁定为 1，即不缩放。

```
<meta name="viewport" content="width=device-width; 
    initial-scale=1; maximum-scale=1; user-scalable=0;"/> 
```

这已经确保 Canvas 以其原始分辨率呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:43:03.790

试试这个，不确定是否有效：重要的东西用 ^^^^^^^^ 下划线

HTML-`head`

```
<meta id="metaset" name="viewport" content="**Whatever** user-scalable=yes;">
         ^^^^^^^^^                                       ^^^^^^^^^^^^^^^^^^ 
```

jQuery：

```
var settings = $("#metaset").attr("content");
$(put selector here).click(function() {
    if ($(this).hasClass("full")) {
        $(this).removeClass("full");
        $("meta").attr("content",settings+"user-scalable=yes");
    } else {
        $(this).addClass("full");
        $("meta").attr("content",settings+"user-scalable=no");
    }
}); 
```

CSS：

```
canvas.full {
    width: 100%;
    height: 100%;
    /* Other fullscreen CSS */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T07:29:47.357

**编辑：看起来 html5 全屏 API 目前在大多数移动设备浏览器中无法正常工作。（看评论）**

有了html5，事情就轻松了很多。您可以使用全屏 API。应该适用于所有最新的浏览器、移动设备以及台式电脑。这里有一个例子：

```
<!doctype html>
<!--[if IE 6]><html lang="en" class="no-js ie6"><![endif]-->
<!--[if (gt IE 6)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->

<head>
    <title>Canvas full screen</title>
</head>

<body onload=draw();>
        <canvas id="canvas">Please update your browser! </canvas>
</body>
<script>
        function draw(){
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        ctx.font = 'italic bold 30px sans-serif';
            //Need to use measure text
        ctx.fillText("Click!",20,100);
        }   

    function fullscreen(){
        var el = document.getElementById('canvas');

           if(el.webkitRequestFullScreen) {
               el.webkitRequestFullScreen();
           }
          else {
             el.mozRequestFullScreen();
          }            
        }

    document.getElementById('canvas').addEventListener("click",fullscreen)
</script>

</html> 
```

到目前为止我面临的唯一问题：您需要使用一些事件侦听器。它不能直接在 document.ready(..)

# asp.net-mvc - 当我将 VS 2012 中的 Publish Web 命令与 ASP MVC 一起使用时会发生什么

> ID：13157588
> 
> 赞同：0
> 
> 时间：2012-10-31T12:07:27.733
> 
> 标签：asp.net-mvc, msbuild, visual-studio-2012, webdeploy

当我在 Visual Studio 2012 中为 ASP MVC 项目使用 Publish Web 命令时究竟会发生什么？

如何从命令行激活相同的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:52:59.470

它只是通过 MSBuild 引擎调用特定的目标来执行。该目标可以调用 MSDeploy 工具来执行实际部署（或者不能，取决于配置文件设置）

检查[此问题的第二部分答案](https://stackoverflow.com/questions/3412900/how-can-i-publish-site-from-command-line-with-some-publish-profile)

# php - 我想从不同的列中添加值

> ID：13157590
> 
> 赞同：0
> 
> 时间：2012-10-31T12:07:30.110
> 
> 标签：php, mysql

我有一张叫请假的桌子：

```
leave_id    employee_id dateApplied leaveStrtDate   leaveEndDate    no_of_days  
3              1              2012-10-31    2012-10-10  2012-10-17        5     
4              1              2012-10-31    2012-10-24  2012-10-17       10 
```

现在我想使用 mysql 查询从 no_of_days 列中添加值，例如： no_of_days 的总和应该是 15。有没有办法在 mysql 查询中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:09:34.587

```
SELECT  employeeID, sum(no_of_days)  totalDays
FROM    leave
GROUP BY employeeID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:08:54.803

```
select sum(no_of_days) from leave 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:09:05.470

```
SELECT SUM(no_of_days) FROM leave; 
```

你可以使用 mysql sum 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:10:12.763

```
select sum(no_of_days) from leave group by employee_id; 
```

这将获得休假表中每个员工的总休假天数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:10:14.030

```
Select SUM(no_of_days) from leave; 
```

[总和文件（）](http://www.tutorialspoint.com/mysql/mysql-sum-function.htm)

# c# - 以管理员身份执行程序时获取登录用户

> ID：13157614
> 
> 赞同：1
> 
> 时间：2012-10-31T12:08:37.427
> 
> 标签：c#, windows-installer

当我的程序使用 msiexec.exe 安装时，它会向任务调度程序添加一个任务，以检查它是否正在运行，如果没有则启动（这是一个信息亭场景）。

```
 WindowsIdentity windowsIdentity = WindowsIdentity.GetCurrent();
        string user = windowsIdentity.Name 
```

不幸的是，我的任务正在添加，因为`SYSTEM`它在运行时将无法访问 UserEnvironment。有谁知道获取发起命令的用户而不是运行 msiexec.exe 的用户的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:01:21.300

如果您需要在安装过程中进行检查 - 您可以在 VBScript 上使用自定义操作，例如，在 WMI 的帮助下检查登录用户。

```
Option Explicit

Dim objReg, objWMI, colSessions

Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\default:StdRegProv")
Set objWMI = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\cimv2") 

Set colSessions = objWMI.ExecQuery("Select * from Win32_LogonSession Where LogonType = 2 Or LogonType = 10") 
If colSessions.Count <> 0 Then 
    'Some users are logged into Windows.
    'For example set property 
    'Session.Property("SOMEONELOGGED") = "1"
End If 
```

# javascript - 弹出窗口未在鼠标悬停时打开

> ID：13157617
> 
> 赞同：0
> 
> 时间：2012-10-31T12:08:47.227
> 
> 标签：javascript, jquery

我不确定我在这里做错了什么。我有一个 div，如果用户将鼠标悬停在该 div 部分并想在鼠标移出时关闭，我想打开一个弹出窗口。这是我的代码

```
<div class="topCart">
  some data
</div> 
```

这是我的 JQuery 代码

```
$(".topCart").mouseover(function() {
    $.get('${rolloverPopupUrl}?bustcache=' + new Date().getTime(),
     function(result) {
        $('#viewCart').html(result);
        refreshMiniCart();
        });
    $('#viewCart').slideDown('slow');
    }).mouseout(function() {
     $('#viewCart').slideUp('fast');
   }); 
```

上面的代码不起作用，也没有给出任何 Ajax 调用来获取新数据，而如果我使用以下代码

```
$(document).ready(function(){
   $(".topCart").hover( function () {
    $('#viewCart').html("");
    $.get('${rolloverPopupUrl}?bustcache='+new Date().getTime(), function(result){
    $('#viewCart').html(result);
     refreshMiniCart();
    });
     if($('#viewCart').is(':hidden')){
        $('#viewCart').slideDown('slow'); }
        },
        function () {
            $('#viewCart').slideUp('fast');
        });
}); 
```

这段代码正在工作并且它正在获取数据，所以我看不到使用`document.ready` 我对 Jquery 的有限知识我试过但无法看到代码不工作的原因任何人都可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:18:42.970

第一个代码不起作用，因为在设置事件时并非所有 DOM 元素都被下载。它导致结果`$(".topCart")`为空。这不会引发任何错误，语法是正确的，问题是 jQuery 与 html 一起使用，但未完成。

`$(document).ready(...)`

或者

```
$(function() {
 // Handler for .ready() called.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:20:10.823

```
$(document).ready(function() { 
    $(".topCart").mouseover(function() {
        ...
    }
}); 
```

您需要在事件触发之前使用 document.ready，在文档加载完所有 DOM 元素之后，您可以确定，否则您正在寻找尚未加载到 DOM 中的事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:21:06.287

在键入代码时尝试具有一些基本的结构和清洁度（接近虔诚），并且发现错误会容易得多：

```
$(function() {
    $(".topCart").on({
        mouseenter: function() {
            var elem = $('#viewCart');
            elem.empty();        
            $.get('${rolloverPopupUrl}?bustcache=' + new Date().getTime(), function(result) {
                elem.html(result);
                refreshMiniCart();
            });
            if (!elem.is(':visible')) elem.slideDown('slow');
        },
        mouseleave: function() {
            $('#viewCart').slideUp('fast');
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:21:31.197

没有了`$(document).ready()`，第一个居然没有被束缚`$('.topCart')`。

第二个示例，使用准备好的文档给出了将函数绑定到悬停事件的时刻或时间。

# c# - 如何找到 smtp 服务器名称

> ID：13157624
> 
> 赞同：-3
> 
> 时间：2012-10-31T12:09:12.987
> 
> 标签：c#, asp.net, email, smtp, smtpclient

我创建了这个电子邮件地址“info@mydomain.com”，我希望用户能够通过我的网站为我发送电子邮件。

这是我的代码：

```
MailMessage mailObject = new MailMessage("a@b.com(this is fake email)", "info@mydomain.com", "contact us", "Test message");
SmtpClient smtpC = new SmtpClient("smtp server name");
smtpC.Send(mailObject); 
```

问题是我不知道写什么`smtp server name`。我怎样才能找到什么是我的`smtp server name`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:11:31.710

这是您要使用的 SMTP 服务器的地址。例如`smtp.gmail.com`，如果您使用的是 Gmail。

在您的电子邮件或托管服务提供商的网站上搜索“SMTP”。很可能他们会在常见问题解答中的某处提供详细信息（smtp 服务器名称、端口、ssl 与否）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:13:48.770

大多数情况下，`SMTP`服务器名称应该是`smtp.mydomain.com`

仍然最好联系托管服务提供商

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T23:36:05.847

[![在此处输入图像描述](../Images/d9ad9e931ba80e9e86dffed575bd745f.png)](https://i.stack.imgur.com/zpov1.png) 打开命令提示符 (CMD.exe)

```
Type nslookup and hit enter
Type set type=MX and hit enter 
```

输入域名并回车，例如：google.com

结果将是为 SMTP 设置的主机名列表

# java - 使用 BorderLayout 将 4 个内联组件添加到 JPanel

> ID：13157625
> 
> 赞同：1
> 
> 时间：2012-10-31T12:09:13.433
> 
> 标签：java, swing, jframe, jpanel, border-layout

在我的应用程序中，有 4 个面板。我需要将它们插入到使用`BorderLayout`. 4个面板是...

1.  一个薄的图像条。
2.  正下方的 4 个按钮
3.  覆盖整个页面的 TextField。
4.  大约在最后。

这是我的代码...

```
 add(imageLabel, BorderLayout.NORTH);
    add(buttonPanel,BorderLayout.PAGE_START);
    add(logScrollPane, BorderLayout.CENTER);
    add(about, BorderLayout.PAGE_END); 
```

当我这样做时，`buttonPanel`消失了。我怎样才能达到我所需要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:14:05.933

我通常尝试在 any 中最多保留 3 个组件`BorderLayout`，所以我会这样做......

```
JPanel outerPanel = new JPanel(new BorderLayout());
JPanel innerPanel= new JPanel(new BorderLayout());

innerPanel.add(buttonPanel,BorderLayout.NORTH);
innerPanel.add(logScrollPane, BorderLayout.CENTER);
innerPanel.add(about, BorderLayout.SOUTH);

outerPanel.add(imageLabel, BorderLayout.NORTH);
outerPanel.add(innerPanel,BorderLayout.CENTER); 
```

只要您将“最大拉伸”组件保留在`CENTER`（在这种情况下，您的`logScrollPane`）中，它就会始终有效。如果您想使用面板，例如将其设置在 a 上`JFrame`，只需使用`add(outerPanel)`.

不要害怕`BorderLayout`- 这种布局自动扩展`CENTER`组件以填充可用空间的能力使其非常强大且非常重要`LayoutManager`！

# bash - 同时运行进程，Bash

> ID：13157626
> 
> 赞同：0
> 
> 时间：2012-10-31T12:09:19.177
> 
> 标签：bash, process

我想`n`使用 bash 同时运行进程（在我的例子中是模拟）。现在这就是我正在运行的：

```
for file in $ini/SAN*.ini;
do
    echo "Running $file...";
    temp=$(basename $file .ini)
    mosrun -G opp_run -r 0 -u Cmdenv -n ..:../../src -l ../../src/inet SAN.ini > $outputs/$temp.out;
done 
```

问题是，循环仅在模拟完成后进行到下一次迭代。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:58:18.953

您应该能够通过在其后添加一个来在后台运行您的命令`&`。

应该让它们并行运行，尽管在后台。

（附带说明：即使您中止脚本，进程仍将继续运行，因此您可能需要`trap`添加

# javascript - extJS中的文件上传隐藏文本字段

> ID：13157630
> 
> 赞同：2
> 
> 时间：2012-10-31T12:09:22.123
> 
> 标签：javascript, html, extjs, extjs4

我将 extJS4 用于我的 GUI，因此也显示文件上传对话框。最后，我只想有一个按钮，当我点击它时，它会显示文件上传对话框，当我在那里选择一些东西时，它会自动上传文件。

对于自动“提交”，我知道我必须为文件上传对话框的 onChange 事件编写一个处理程序。因此，这不是问题。但是有没有办法在不求助于 CSS 的情况下禁用文本字段？（当我选择要上传的文件时，名称被写入文本字段......并且我想消除文本字段或至少使其不可见）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T12:13:09.413

您搜索的属性是`buttonOnly: true`

[在这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File-cfg-buttonOnly)您可以找到文档

只需将其添加到示例中，如下所示：

```
Ext.create('Ext.form.Panel', {
    title: 'Upload a Photo',
    width: 400,
    bodyPadding: 10,
    frame: true,
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'filefield',
        buttonOnly: true,
        name: 'photo',
        fieldLabel: 'Photo',
        labelWidth: 50,
        msgTarget: 'side',
        allowBlank: false,
        anchor: '100%',
        buttonText: 'Select Photo...'
    }],

    buttons: [{
        text: 'Upload',
        handler: function() {
            var form = this.up('form').getForm();
            if(form.isValid()){
                form.submit({
                    url: 'photo-upload.php',
                    waitMsg: 'Uploading your photo...',
                    success: function(fp, o) {
                        Ext.Msg.alert('Success', 'Your photo "' + o.result.file + '" has been uploaded.');
                    }
                });
            }
        }
    }]
}); 
```

# android - AutocomplteTextView 安卓地图

> ID：13157640
> 
> 赞同：2
> 
> 时间：2012-10-31T12:09:44.557
> 
> 标签：android, google-maps, autocomplete

在我的 android 应用程序中，我想添加**AutocomplteTextView**我点击这个链接：[https ://developers.google.com/academy/apis/maps/places/autocomplete-android](https://developers.google.com/academy/apis/maps/places/autocomplete-android)

我认为它提供了在我的地图中添加**AutocomplteTextView**的最佳方式。我是 android & java 的新手，所以我**不知道要放置这些代码。** 现在我有一个**OpenMap**类 **extends MapActivity { }**

请帮我 ..

# jquery - jQuery datepicker 在编辑文本框后自动重置

> ID：13157641
> 
> 赞同：0
> 
> 时间：2012-10-31T12:09:44.827
> 
> 标签：jquery, jquery-ui-datepicker

编辑文本字段后，我的日期选择器（jQuery + highcharts）会自动重置为以前的值。示例：我有日期：2012-10-24 并将其在文本框中更改为 2012-10-12。当我完成输入时，它会自动更改为 2012-10-24。文本字段没有 `readOnly`设置为 的属性`true`。我怎样才能防止这种变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:13:44.713

使用[**setDate()**](http://api.jqueryui.com/datepicker/#method-setDate)设置日期选择器的日期，而不是手动设置文本框值。

例子：

```
$("#yourdatepicker").datepicker("setDate", "2012-10-12"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:31:02.700

您是否偶然使用了 ASP MVC？因为如果您是，并且您正在谈论的日期字段链接到您的模型，您可能需要检查您是否将该模型属性正确链接到控件。

在任何其他情况下，您应该确保没有在脚本代码中的任何位置重置日期字段值。

```
$(document).ready(function(){
    $("#dtField").datepicker();
}); 
```

[这是我认为你描述的小提琴。](http://jsfiddle.net/RGaAu/)

# git - git mergetool 之后应该怎么做？

> ID：13157642
> 
> 赞同：5
> 
> 时间：2012-10-31T12:09:44.920
> 
> 标签：git

我安装了 meld，运行`git mergetool`，将左右文件合并到中心文件，保存，然后关闭窗口。我记得其他时候 mergetool 询问合并是否成功，但这次没有（我会回答“是”）。我打开了我的文件，它就像我想要的那样，但是有一个不需要的文件“myfile.orig”，所以我运行`git clean -fd`并删除了它。然后我做了`git add -A`和`git commit -m 'merged feature-a'`。感觉这个过程可能会更短或更干净。

*   这是发生冲突时合并的正确方法吗？
*   还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-14T12:19:36.560

1：调用外部合并工具后，git 只检查目标文件是否已更新（例如：它的修改日期是否比备份文件的日期更新）。如果是，它认为合并是“成功的”，否则，它会询问问题，看看您是否打算保留原始文件，或者您是否只是没有修复合并。

所以：简单地点击`ctrl+S`就`meld`足以跳过这个问题，你应该知道这一点：*总是*重新阅读你将在冲突后提交的内容。

2：`*.orig`文件是由 git 在每次解决合并冲突时生成的，通常建议将这些文件添加到您的`.gitignore`.
我在路径中添加了一个快捷方式`find . -name '*.orig' | xargs rm`，当我在 IDE 中看到太多 *.orig 文件时，我偶尔会运行该快捷方式。

3：“成功”合并后，git 应该`git add`自动编辑生成的文件，因此您可以跳过该`git add -A`步骤。

* * *

把它们加起来 ：

*   你所有的步骤都是正确的，
*   如果您忽略`'*.orig'`文件，并检查预期的文件是否已暂存，您应该能够`git commit`在成功解决冲突后直接调用。

# android - 获取空间的文本边界

> ID：13157646
> 
> 赞同：6
> 
> 时间：2012-10-31T12:09:48.633
> 
> 标签：android

如何测量android中的空间边界？

我的意思是，以下内容：

```
Rect bounds = new Rect();    
paint.getTextBounds(String.valueOf(' '), 0, 1, bounds);
return bounds.width(); 
```

返回 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T13:08:28.750

解决方案是`paint.measureText(String.valueOf(' '))`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:13:00.523

您是否考虑过使用“（双引号）

```
paint.getTextBounds(" ", 0, 1, bounds); 
```

# c - copy_to_user() 中的 CPU 成本

> ID：13157651
> 
> 赞同：0
> 
> 时间：2012-10-31T12:10:10.790
> 
> 标签：c, linux-kernel

在 Linux 内核中使用 copy_to_user() 函数将数据从内核空间复制到用户空间会消耗多少 CPU 时间。

Ex-> 如果我们必须将 80 字节的数据从内核空间复制到用户空间的缓冲区，那么我们调用 copy_to_user() 并复制数据 ...& 如果我们在 copy_to_user() 的开头添加一个计时器并停止计时器完成应对后，那么在纳秒内将经过多少时间......我们可以计算它或任何估计。因为我必须使用内核可加载模块每秒将大量数据缓冲区从内核空间复制到用户空间。

# css - CSS文件中有顺序吗？为什么加下划线（a href）

> ID：13157655
> 
> 赞同：0
> 
> 时间：2012-10-31T12:10:19.740
> 
> 标签：css

我有这个 CSS 代码：

```
 .mini-profile {
        padding: 12px;
        color: #333333;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .mini-profile a {
        color: #333333;
    }

    .mini-profile a:hover {
        color:#08C;
    }

    .metadata{
        color: #999;
        text-decoration:none;

    }

    .metadata:hover{
        color: #999;
        text-decoration:none;
    }

    .metadata a{
        color: #999;
        text-decoration:none;
    }

    .metadata a:hover {
        color: #333333;
        text-decoration:none;
    } 
```

现在我有这个：

```
 <div class="bs-docs-sidebar bs-docs-sidenav rounded-div-white mini-profile">
        <a href="www.google.com">
        <div class="content">
            <div style="margin-left:50px;"><b style="display:block;">Antoine</b>
                <small class="metadata">View my profile page</small>
            </div>
        </div>
        </a>
    </div>​ 
```

[http://jsfiddle.net/PspXV/](http://jsfiddle.net/PspXV/)

现在，为什么“查看配置文件”在悬停时带有下划线？为什么？！他们是我必须遵循的文件中的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:15:09.780

```
.mini-profile a:hover {
    color:#08C;
    text-decoration:underline; 
```

*   这就是为什么

你的 div 类是`class="bs-docs-sidebar bs-docs-sidenav rounded-div-white mini-profile"`

具体来说`mini-profile`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:16:04.523

您在小提琴中定义了此规则，但未在您为问题提供的 CSS 中定义：

```
.mini-profile a:hover {
    ...
    text-decoration: underline;
} 
```

更改`text-decoration: underline;`为`text-decoration: none;`删除出现的下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:20:19.990

您的元数据不在 a 标签内，但您正在调用 a 标签上的悬停。

```
 <small class="metadata"><a href="#">View my profile page</a></small> 
```

[http://jsfiddle.net/calder12/PspXV/4/](http://jsfiddle.net/calder12/PspXV/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:58:27.863

```
 <a href="www.google.com">
                <div class="content">
                    <div style="margin-left:50px;"><b style="display:block;">Antoine</b>
                    <small class="metadata">View my profile page</small></div>
                </div>
            </a> 
```

这是对网络标准的重大违反。这将使浏览器进入怪癖模式，并可能导致呈现问题。您永远不应该将块级元素放在内联元素内（“a”内的“div”）。

# java - 在Java中重复排列数组

> ID：13157656
> 
> 赞同：10
> 
> 时间：2012-10-31T12:10:22.393
> 
> 标签：java, arrays, recursion, permutation

网站上有一些类似的问题有所帮助，但我不能完全确定这个问题，所以我希望这不是重复的。

这是一个家庭作业，您有一组字符 [A, B, C]，并且必须使用递归来获得所有排列（重复）。我有这样的代码：

```
char[] c = {'A', 'B' , 'C'};

public void printAll(char[] c, int n, int k) {
    if (k == n) {
      System.out.print(c);
      return;
    }
    else {   
      for (int j = 0; j<n; j++) {
        for (int m = 0; m<n; m++) {
           System.out.print(c[k]); 
           System.out.print(c[j]); 
           System.out.print(c[m] + "\r\n");
        }
      }
    }        
    printAll(c, n, k+1);    
} 
```

但是，参数 n 应该定义输出的长度，所以虽然这个函数打印出长度为 3 的所有排列，但它不能执行长度为 2 的排列。我已经尝试了所有我能想到的，并仔细研究了谷歌搜索结果，我对自己无法解决看似相当简单的问题感到恼火。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T12:42:13.843

如果我理解正确，您将获得一组字符`c`和所需的长度`n`。

从技术上讲，没有重复排列这样的东西。我假设您想要所有长度`n`为`c`.

你可以这样做：

```
to generate all strings of length N with letters from C
 -generate all strings of length N with letters from C
     that start with the empty string.

to generate all strings of length N with letters from C
   that start with a string S
 -if the length of S is N
  -print S
 -else for each c in C
  -generate all strings of length N with letters from C that start with S+c 
```

在代码中：

```
printAll(char[] c, int n, String start){
  if(start.length >= n){
    System.out.println(start)
  }else{
    for(char x in c){ // not a valid syntax in Java
      printAll(c, n, start+x);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-18T06:49:35.407

我使用这种带有重复排列的java实现。A~(n,m)：n = 数组长度，m = k。m 可以大于或小于 n。

```
public class Permutations {

    static void permute(Object[] a, int k, PermuteCallback callback) {
        int n = a.length;

        int[] indexes = new int[k];
        int total = (int) Math.pow(n, k);

        Object[] snapshot = new Object[k];
        while (total-- > 0) {
            for (int i = 0; i < k; i++){
                snapshot[i] = a[indexes[i]];
            }
            callback.handle(snapshot);

            for (int i = 0; i < k; i++) {
                if (indexes[i] >= n - 1) {
                    indexes[i] = 0;
                } else {
                    indexes[i]++;
                    break;
                }
            }
        }
    }

    public static interface PermuteCallback{
        public void handle(Object[] snapshot);
    };

    public static void main(String[] args) {
        Object[] chars = { 'a', 'b', 'c', 'd' };
        PermuteCallback callback = new PermuteCallback() {

            @Override
            public void handle(Object[] snapshot) {
                for(int i = 0; i < snapshot.length; i ++){
                    System.out.print(snapshot[i]);
                }
                System.out.println();
            }
        };
        permute(chars, 8, callback);
    }

} 
```

示例输出是

```
aaaaaaaa
baaaaaaa
caaaaaaa
daaaaaaa
abaaaaaa
bbaaaaaa
...
bcdddddd
ccdddddd
dcdddddd
addddddd
bddddddd
cddddddd
dddddddd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:17:20.803

我只是有个主意。如果您添加一个隐藏字符（H 表示隐藏）[A, B, C, H]，然后对其进行所有固定长度排列（您说您知道如何做到这一点）会怎样。然后当你读完它时，你会在隐藏字符处停下来，例如 [B,A,H,C] 会变成 (B,A)。

嗯，缺点是您必须跟踪您创建的那些，尽管 [B,H,A,C] 与 [B,H,C,A] 相同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-08T11:42:53.477

这是用于生成具有重复的给定字符串的排列的 c# 版本：

（基本思想是 - 长度为“n”且重复次数为 n^n 的字符串的排列数）。

```
string[] GetPermutationsWithRepetition(string s)
        {
            s.ThrowIfNullOrWhiteSpace("s");
            List<string> permutations = new List<string>();
            this.GetPermutationsWithRepetitionRecursive(s, "",
                permutations);
            return permutations.ToArray();
        }
        void GetPermutationsWithRepetitionRecursive(string s, string permutation, List<string> permutations)
        {
            if(permutation.Length == s.Length)
            {
                permutations.Add(permutation);
                return;
            }
            for(int i =0;i<s.Length;i++)
            {
                this.GetPermutationsWithRepetitionRecursive(s, permutation + s[i], permutations);
            }
        } 
```

**下面是相应的单元测试：**

```
[TestMethod]
        public void PermutationsWithRepetitionTests()
        {
            string s = "";
            int[] output = { 1, 4, 27, 256, 3125 };
            for(int i = 1; i<=5;i++)
            {
                s += i;
                var p = this.GetPermutationsWithRepetition(s);
                Assert.AreEqual(output[i - 1], p.Length);
            }
        } 
```

# prolog - 从一般情况 S 推断

> ID：13157657
> 
> 赞同：0
> 
> 时间：2012-10-31T12:10:21.977
> 
> 标签：prolog

我希望有人能帮助我。是否可以从与Prolog`S`不同的情况进行推断？`s0`

我有这样的`s0`（初始情况）：

```
isoven(oven).
isoff(oven,s0).
ison(X,do(a,S)):- a=switchOn(X),isoven(X); isOff(X,S),\+ a=swicthOff(X). (fluent inon) 
```

如果我提示：

```
?- isOn(oven,s0).
false.

?- ison(oven,do(swicth(oven)s0)).
true 
```

如果存在像“save(do(swicth(oven)s0)) to S'”这样的命令以获得这样的结果，那就太好了：

```
?- ison(oven,S').
true. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:24:00.903

Prolog 不是魔术，您需要正确实施。看来您想使用情况演算，网上有很多关于它的材料。

还：

```
a=switchOn(X) 
```

这是没有意义的，它总是失败。你需要一个变量（第一个字母必须是大写）

# django - 如何使用带有 django 模板的 IntelliJ 实时编辑？

> ID：13157659
> 
> 赞同：3
> 
> 时间：2012-10-31T12:10:26.037
> 
> 标签：django, google-chrome, django-templates, google-chrome-devtools

我喜欢 IntelliJ 的“实时编辑”功能，但它不适用于 Django 模板，因为很明显它们只是一堆变量，它没有找到 CSS 文件。有什么方法可以在 Django 模板上“实时”工作吗？（或与此相关的任何其他模板系统）。

同样，我尝试使用 Chrome devtools 自动保存，但它也不起作用，大概是它希望我在本地打开一个 html 文件（即 file://）。

使用 chrome 检查器编辑内容很痛苦，因为您必须复制和粘贴您的更改 - 除非我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:59:43.667

我正在使用 IntelliJ 12.0.4 Ultimate 和 Python 插件（这或多或少相当于 PyCharm）来处理 Django 模板。看起来实时编辑功能不像往常那样工作，实际上是因为模板必须首先由 Django 呈现为 HTML。

一种替代方法是为“查看|在浏览器中重新加载”菜单项分配键盘快捷键。

另一种选择是使用 Chrome 插件，例如[ChromeReload](https://chrome.google.com/webstore/detail/chromereload/njoipeaphfnaplplihpbgndfojhdhmjo?hl=en)：您可以将其设置为以特定时间间隔重新加载特定页面。

# silverlight-5.0 - Silverlight 和 RIA 服务：管理用户

> ID：13157663
> 
> 赞同：0
> 
> 时间：2012-10-31T12:10:49.683
> 
> 标签：silverlight-5.0

我想在客户端管理用户和角色，但我找不到实现这一点的方法。链接或代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:15:47.710

很抱歉这个被遗弃的问题，我已经在很多天前解决了这个问题，我填写我应该在这里发布答案，因为我无法在网络上找到完整的答案，这可以帮助那里的一些陷入困境的灵魂。除了我现在不记得的链接但是，我向博客所有者道歉，甚至不记得他的名字，但是，这里是完整的历史：

首先创建一个类来包装 MembershipUser 和另一个类来包装 MembsershipRole：

```
 public class MembershipServiceUser
            {
                public string Comment { get; set; }
                [Editable(false)]
                public DateTime CreationDate { get; set; }
                [Key]
                [Editable(false, AllowInitialValue = true)]
                public string Email { get; set; }
                public bool IsApproved { get; set; }
                [Editable(false)]
                public bool IsLockedOut { get; set; }
                [Editable(false)]
                public bool IsOnline { get; set; }
                public DateTime LastActivityDate { get; set; }
                [Editable(false)]
                public DateTime LastLockoutDate { get; set; }
                public DateTime LastLoginDate { get; set; }
                [Editable(false)]
                public DateTime LastPasswordChangedDate { get; set; }
                [Editable(false)]
                public string PasswordQuestion { get; set; }
                [Key]
                [Editable(false, AllowInitialValue = true)]
                public string UserName { get; set; }

                public MembershipServiceUser() { }
                public MembershipServiceUser(MembershipUser user)
                {
                    this.FromMembershipUser(user);
                }

                public void FromMembershipUser(MembershipUser user)
                {
                    this.Comment = user.Comment;
                    this.CreationDate = user.CreationDate;
                    this.Email = user.Email;
                    this.IsApproved = user.IsApproved;
                    this.IsLockedOut = user.IsLockedOut;
                    this.IsOnline = user.IsOnline;
                    this.LastActivityDate = user.LastActivityDate;
                    this.LastLockoutDate = user.LastLockoutDate;
                    this.LastLoginDate = user.LastLoginDate;
                    this.LastPasswordChangedDate = user.LastPasswordChangedDate;
                    this.PasswordQuestion = user.PasswordQuestion;
                    this.UserName = user.UserName;
                }

                public MembershipUser ToMembershipUser()
                {
                    MembershipUser user = Membership.GetUser(this.UserName);

                    if (user.Comment != this.Comment) user.Comment = this.Comment;
                    if (user.IsApproved != this.IsApproved) user.IsApproved = this.IsApproved;
                    if (user.LastActivityDate != this.LastActivityDate) user.LastActivityDate = this.LastActivityDate;
                    if (user.LastLoginDate != this.LastLoginDate) user.LastLoginDate = this.LastLoginDate;

                    return user;
                }
    }

//Roles
    public class MembershipServiceRole {

            public MembershipServiceRole() { }

            public MembershipServiceRole(string rolename) {
                RoleName = rolename;
            }

            [Key]
            [Editable(true, AllowInitialValue = true)]
            public string RoleName { get; set; }
    } 
```

其次，创建一个派生自 DomainService 的类来操作用户和角色包装器：

```
[EnableClientAccess(RequiresSecureEndpoint = false /* This should be set to true before the application is deployed */)]
    public class MembershipService : DomainService
    {
        protected override void OnError(DomainServiceErrorInfo errorInfo)
        {
            TimeoutHelper.HandleAuthenticationTimeout(errorInfo, this.ServiceContext.User);
        }

        [RequiresRole("Administrator")]
        public IEnumerable<MembershipServiceUser> GetUsers()
        {
            return Membership.GetAllUsers().Cast<MembershipUser>().Select(u => new MembershipServiceUser(u));
        }

        [RequiresRole("Administrator")]
        public IEnumerable<MembershipServiceUser> GetUsersByEmail(string email)
        {
            return Membership.FindUsersByEmail(email).Cast<MembershipUser>().Select(u => new MembershipServiceUser(u));
        }

        [RequiresRole("Administrator")]
        public MembershipServiceUser GetUsersByName(string userName)
        {
            MembershipServiceUser retVal = null;            
            retVal =  Membership.FindUsersByName(userName)
                .Cast<MembershipUser>()
                .Select(u => new MembershipServiceUser(u))
                .FirstOrDefault();
            return retVal;            
        }

        [Invoke(HasSideEffects = true)]
        public void CreateUser(MembershipServiceUser user, string password)
        {
            if (string.IsNullOrEmpty(user.Email)) {
                user.Email = "cambiar@dominio.com";
            }
            Membership.CreateUser(user.UserName, password, user.Email);
        }

        [RequiresRole("Administrator")]
        public void DeleteUser(MembershipServiceUser user)
        {
            Membership.DeleteUser(user.UserName);
        }

        [RequiresRole("Administrator")]
        public void UpdateUser(MembershipServiceUser user)
        {
            Membership.UpdateUser(user.ToMembershipUser());
        }

        [RequiresRole("Administrator")]
        [Update(UsingCustomMethod = true)]
        public void ChangePassword(MembershipServiceUser user, string newPassword)
        {
            MembershipUser u = user.ToMembershipUser();
            u.ChangePassword(u.ResetPassword(), newPassword);
        }

        [RequiresRole("Administrator")]
        public void ResetPassword(MembershipServiceUser user)
        {
            user.ToMembershipUser().ResetPassword();
        }

        [RequiresRole("Administrator")]
        public void UnlockUser(MembershipServiceUser user)
        {
            user.ToMembershipUser().UnlockUser();
        }

        #region Roles

        [RequiresRole("Administrator")]
        public IEnumerable<MembershipServiceRole> GetRoles() {
            return Roles.GetAllRoles().Cast<string>().Select(r => new MembershipServiceRole(r));
        }

        [RequiresRole("Administrator")]
        public IEnumerable<MembershipServiceRole> GetRolesForUser(string userName) {
            return Roles.GetRolesForUser(userName).Cast<string>().Select(r => new MembershipServiceRole(r));
        }

        [RequiresRole("Administrator")]
        public void CreateRole(MembershipServiceRole role) {
            Roles.CreateRole(role.RoleName);
        }

        [RequiresRole("Administrator")]
        public void DeleteRole(MembershipServiceRole role) {
            Roles.DeleteRole(role.RoleName);            
        }

        [RequiresRole("Administrator")][Invoke]
        public void AddUserToRole(string userName, string roleName) {
            if (!Roles.IsUserInRole(userName,roleName))
                Roles.AddUserToRole(userName, roleName);
        }

        [RequiresRole("Administrator")]
        [Invoke]
        public void RemoveUserFromRole(string userName, string roleName) {
            if (Roles.IsUserInRole(userName, roleName))
                Roles.RemoveUserFromRole(userName, roleName);
        }

        #endregion //Roles
    } 
```

第三：以与您的域名类别相同的方式使用该服务 干杯！！！

# java - 运行 Windows BAT 的 Ant 目标，包括更改目录

> ID：13157664
> 
> 赞同：1
> 
> 时间：2012-10-31T12:10:50.233
> 
> 标签：java, ant, cmd

我有一个如下所示的 Windows BAT 文件：

```
Z:
tool.exe c:\mypath\to\input c:\mypath\to\output \flag1 flag2 
```

也就是说，tool.exe 驻留在映射的网络驱动器上。该工具要求 EXE 从其自己的目录（在本例中为 Z：）运行。

通过双击或在 CMD 窗口中运行时，BAT 工作正常。

我想通过 Ant 自动化它。我的尝试在这里：

```
<target name="go">
    <exec executable="cmd">
        <arg value="/c"/>
        <arg value="runtool.bat"/>
    </exec>
</target> 
```

它不起作用。通过[此链接](http://www.velocityreviews.com/forums/t145516-ant-change-directory-command.html)和其他研究，我了解以下内容：

*   "Z:" 可能等同于 "cd Z:\"
*   没有“cd.exe”...“cd”由 Windows CMD shell 解释，不能通过“cmd.exe”使用

也就是说，如何在 Ant 中实现目标？在 Java 中？

我愿意编写自己的 Ant 任务，对目录进行进一步的网络配置，等等。（冒着使问题过于广泛的风险，我们正在使用 Jenkins 并对那里的想法持开放态度。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:34:12.273

您必须`dir`在任务上指定属性`exec`：

```
<exec executable="tool.exe" dir="z:">
  <arg value="c:\mypath\to\input"/>
  <arg value="c:\mypath\to\output"/>
  <arg value="flag1"/>
  <arg value="flag2"/>
</exec> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:50:25.953

这对我有用：

```
<target name="go">      
    <property name="batFileDir" location="${basedir}/resources" />

    <exec executable="cmd" dir="." spawn="false">
        <arg line="/C start ${batFileDir}/runTool.bat"/>
    </exec>                
</target> 
```

runTool.bat 如问题中所述，位于 ~/resources 中。

# perl - 在 perl 中运行后台进程

> ID：13157666
> 
> 赞同：0
> 
> 时间：2012-10-31T12:10:59.277
> 
> 标签：perl, unix, command-line

我有一个过程，
执行如下：

```
process_name > file.txt 
```

会将所有输出重定向到 file.txt 以及控制台。

像这样执行时

```
process_name >& file.txt& 
```

将输出重定向到 file.txt 但**不会将输出打印到控制台，**返回控制台上的 pid。

现在我想执行第二种在 perl 脚本中运行进程的方法！我怎么能这样做？目前我正在使用以下方法：

```
#!/usr/bin/perl

use strict;
use warnings;

my $res = `bsm_adjust_controller -F -ra -d 'subnetwork=NETSim_STD/bsc=0005' -f /tmp/31102012/Task_31102012_1421_0005.log >& /tmp/31102012/Ctrl_31102012_1421_0005.log&`;
print $res; 
```

当我运行它给出的脚本时：

```
 ./temp.pl
sh: /tmp/31102012/Ctrl_31102012_1421_0005.log: bad number 
```

我还尝试了以下方法：

```
#!/usr/bin/perl

use strict;
use warnings;

my $res = "bsm_adjust_controller -F -ra -d 'subnetwork=NETSim_STD/bsc=0005' -f /tmp/31102012/Task_31102012_1421_0005.log >& /tmp/31102012/Ctrl_31102012_1421_0005.log&";

open(CMD, '-|', $res) || die "couldn't run $res: $!\n"; 
```

即使是上面的脚本也会抛出同样的错误。目的是在后台执行进程并继续执行下一个语句，而不关心进程发生了什么，而且我不需要在内部运行进程的输出到控制台。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:00:42.357

这行得通：

```
#!/usr/bin/perl

use strict;
use warnings;

my $cmd="bsm_adjust_controller -F -ra -d 'subnetwork=NETSim_STD/bsc=0106' -f /tmp/31102012/Task_31102012_1421_0005.log >/tmp/31102012/Ctrl_31102012_1421_0005.log";

open STDERR, ">/dev/null";
print "Redirected stderr to /dev/null\n";

my $pid=open (FH, "-|",$cmd);
if ($pid) { #parent
    print "/tmp/31102012/Task_31102012_1421_0005.log";
    exit; 
          } 
print "Redirected stderr to /dev/null\n";
close(FH); 
```

# c++ - 在测试主体中抛出代码 0xc0000005 的 SEH 异常

> ID：13157671
> 
> 赞同：36
> 
> 时间：2012-10-31T12:11:15.477
> 
> 标签：c++, visual-c++, tdd, googletest

我正在使用 GoogleTest 为以下课程编写测试，但出现上述错误。

```
class Base
{
    // Other Functions;

    CSig objSig[50];
} 
```

CSig类如下：

```
class CSig
{
    //... constructor, destructor(empty) and some functions
    CMod *objMod;
    CDemod *objDemod;
}

CSig :: CSig
{
    bIsInitialised = false;

    for (int i=0; i<MAX_NUM; i++)
    {
        PStrokePrev[i] = 0.0;
    }
} 
```

但是，当我放弃时`CSig objSig[50]`，测试运行良好。

我能做些什么来解决这个问题？另外，我需要`CSig objSig[50]`在 Base 类中。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-31T12:32:31.543

SEH（结构化异常处理）异常不是可以使用 c++ 语言构造（try-catch）处理的 C++ 异常，但它是从 Windows 本身引发的，并指向一些基本缺陷。SEH 异常非常烦人，因为它们不会导致正常的堆栈展开，这可能导致未关闭的文件或未解锁的互斥锁，这些互斥锁通常应该由拥有对象的析构函数清除。我在访问不属于当前进程的内存时遇到了 SEH 异常，因此我建议在 CSig 的构造函数和析构函数中查看与内存相关的指令。[例如，您可以在此处](http://msdn.microsoft.com/library/vstudio/swezty51)阅读有关 SEH 的信息

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-17T13:33:57.560

我刚刚发现问题的方法是在 Visual Studio 中我转到 Debug->Exceptions，并检查了第一列中的所有内容。然后运行/调试你的单元测试，它会在问题所在的那一行抛出一个异常。那就是您需要调试/修复它的地方。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-02-26T22:54:25.643

我在 Visual Studio 2010 中使用 GoogleTest 时遇到了这个问题。我们的设置涉及为 GoogleTest 框架创建一个库，然后将其链接到我们的各个单元测试。我最近更新了框架支持并从头开始重新编译它。这样做之后，我遇到了上面描述的异常。

经过一番挖掘，我发现“结构成员对齐”设置是罪魁祸首：

**项目属性 > 配置属性 > C/C++ > 代码生成 > 结构成员对齐**

虽然 Frameworks 项目的设置设置为“默认”，但相应的单元测试项目将其配置为“1 Byte /Zp1”。一旦我将它们更改为具有相同的对齐方式，问题就消失了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-08T13:35:25.383

对我来说，这似乎是一个空引用错误。在 nullptr 上调用了一些方法，由于我不清楚的原因，它并没有立即失败，而是开始执行。SEH 错误可能会在访问未分配的内存时立即发生。所以检查空指针！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-30T01:28:33.203

破坏空指针可能是一个原因。我通过 Visual Studio > Exception > Select All 找到了。然后运行本地 Windows 调试器，它停在发生异常的行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-29T03:34:07.490

我有一个类似的问题，它与未初始化的变量和在发布版本中运行测试有关。我有一个 char * 未初始化，之后初始化为 NULL 似乎已经解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-19T15:38:13.803

如果您使用的是 Visual Studio 2013，请在“调试”>“异常”中选中“抛出的 Win32 异常（特别是访问冲突）”框。这将让您调试哪条线路有问题。这可能很有用，因为如果您的程序通常引发其他异常，调试器不会中断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-13T08:27:38.623

在 qt 中使用 msvc 遇到了这个问题。SEH 几乎是随机抛出的，没有**明显**的原因。（阅读：*没有任何时间来研究它*）在没有找到正确的解决方案并且测试似乎适用于非 Windows 用户之后，我切换到正常运行测试的 MinGW。

# php - 阿拉伯语查询字符串 - 未存储和显示 url

> ID：13157673
> 
> 赞同：6
> 
> 时间：2012-10-31T12:11:18.097
> 
> 标签：php, url, seo

我试图通过添加日期和标题使我的链接对 SEO 友好。但是，我的一些标题是阿拉伯语。英语的效果很好，而阿拉伯语的不行。例子：

> خالد-على-20120923220529.html

按照[本教程](http://www.9lessons.info/2011/04/seo-friendly-urls-with-php.html)，我生成了以下代码：

```
$title=mysql_real_escape_string($_POST['title']); 
```

我的插入标题有错误，并且 URL 没有插入阿拉伯字符，当删除此代码插入时没有问题，但是当从数据库中选择此 url 时将重定向找不到 404 我需要显示我的链接

> [http://dzeduc.org/%D8%A7%D9%84%D9%85%D8%B9%D8%A7%D8%AF%D9%84%D8%A7%D8%AA-%D9%88- %D8%A7%D9%84%D9%85%D8%AA%D8%B1%D8%A7%D8%AC%D8%AD%D8%A7%D8%AA-%D9%85%D9%86- %D8%A7%D9%84%D8%AF%D8%B1%D8%AC%D8%A9-1%D9%882/](http://dzeduc.org/%D8%A7%D9%84%D9%85%D8%B9%D8%A7%D8%AF%D9%84%D8%A7%D8%AA-%D9%88-%D8%A7%D9%84%D9%85%D8%AA%D8%B1%D8%A7%D8%AC%D8%AD%D8%A7%D8%AA-%D9%85%D9%86-%D8%A7%D9%84%D8%AF%D8%B1%D8%AC%D8%A9-1%D9%882/)

我该如何解决这个问题？

笔记

```
$conn = mysql_connect($db_host,$db_user,$db_pass) or die(mysql_error());
mysql_select_db($db_name,$conn);

mysql_query("SET NAMES 'utf8'");
mysql_query('SET CHARACTER SET utf8'); 
```

元标签

```
<meta charset="UTF-8" />
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:18:54.280

您应该解决 3 个问题：

**1.**将您的代码编辑`Article.php`为：

```
$url = urldecode( mysql_real_escape_string($_GET['url']) ); 
```

**2.**确保您的`url`字段排序规则是`utf_general_ci`

**3.**`.htaccess`将您的文件编辑为：

```
RewriteEngine On

RewriteRule ^(.*).html$ article.php?url=$1 
```

# java - 寻找一个圆形固定大小的基于数组的双端队列

> ID：13157675
> 
> 赞同：4
> 
> 时间：2012-10-31T12:11:21.813
> 
> 标签：java, collections

我正在寻找`Deque`具有以下特征的：

*   它有固定的大小
*   如果我在另一端的头/尾元素处添加元素，则退出
*   它是基于数组的，所以我可以在恒定时间内访问随机元素
*   我可以在前面或末尾添加元素（双端队列）

我检查了**JCF**`Deque`中的实现，但没有找到任何合适的东西。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:17:28.077

因为我喜欢编写自己的数据类型，

```
import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class Ring {

    private String[] data;
    int n = 0;

    public Ring(int size) {
        data = new String[size];
    }

    public void push(String s) {
        data[n] = s;
        n = (n + 1) % data.length;
    }

    public void shift(String s) {
        data[n = (n - 1) % data.length] = s;
    }

    public String get(int index) {
        return data[(n + index) % data.length];
    }

    public static class Examples {

        @Test
        public void shouldDropElementsWhenPushingTooFar() {
            Ring ring = new Ring(3);
            ring.push("A");
            ring.push("B");
            ring.push("C");
            ring.push("D");
            ring.push("E");
            assertEquals("C", ring.get(0));
            assertEquals("D", ring.get(1));
            assertEquals("E", ring.get(2));
        }

        @Test
        public void shouldAddElementsAtTheFront() {
            Ring ring = new Ring(3);
            ring.push("A");
            ring.push("B");
            ring.push("C");
            ring.push("D");
            ring.push("E");
            // rewind
            ring.shift("B");
            assertEquals("B", ring.get(0));
            assertEquals("C", ring.get(1));
            assertEquals("D", ring.get(2));
        }

    }

} 
```**

# python - 对字符串进行多次修改：如何在 Python 中保持不变？

> ID：13157677
> 
> 赞同：1
> 
> 时间：2012-10-31T12:11:22.857
> 
> 标签：python, string

我是 Python 的新手，所以也许我要求一些非常简单的东西，但我无法以 Python 的方式思考问题。

我有一个压缩字符串。这个想法是，如果一个角色重复 4-15 次，我会做出这样的改变：

```
'0000' ---> '0|4' 
```

如果超过 15 次，我使用斜线和两位数字来表示数量（使用十六进制值）：

```
'00...(16 times)..0' ---> '0/10' 
```

所以，习惯了其他语言，我的方法如下：

```
def uncompress(line):
    verticalBarIndex = line.index('|')
    while verticalBarIndex!=-1:
        repeatedChar = line[verticalBarIndex-1:verticalBarIndex]
        timesRepeated = int(line[verticalBarIndex+1:verticalBarIndex+2], 16)
        uncompressedChars = [repeatedChar]
        for i in range(timesRepeated):
            uncompressedChars.append(repeatedChar)
        uncompressedString = uncompressedChars.join()
        line = line[:verticalBarIndex-1] + uncompressedString + line[verticalBarIndex+2:]
        verticalBarIndex = line.index('|') #next one

    slashIndex = line.index('/')
    while slashIndex!=-1:
        repeatedChar = line[slashIndex-1:slashIndex]
        timesRepeated = int(line[slashIndex+1:verticalBarIndex+3], 16)
        uncompressedChars = [repeatedChar]
        for i in range(timesRepeated):
            uncompressedChars.append(repeatedChar)
        uncompressedString = uncompressedChars.join()
        line = line[:slashIndex-1] + uncompressedString + line[slashIndex+3:]
        slashIndex = line.index('/') #next one
    return line 
```

我知道这是错误的，因为字符串在 Python 中是不可变的，并且我一直在更改行内容，直到没有 '|' 或“/”存在。

我知道 UserString 存在，但我想有一种更简单、更 Pythonish 的方式来做这件事，这将是很好的学习。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:16:38.210

使您的代码与示例字符串一起运行所需的更改：

更改`.index()`为`.find()`。`.index()`如果未找到子字符串，则引发异常，`.find()`返回 -1。

更改`uncompressedChars.join()`为`''.join(uncompressedChars)`。

更改`timesRepeated = int(line[slashIndex+1:verticalBarIndex+3], 16)`为`timesRepeated = int(line[slashIndex+1:slashIndex+3], 16)`

设置`uncompressedChars = []`为开头，而不是`uncompressedChars = [repeatedChar]`.

这应该让它正常工作。有很多地方需要整理和优化代码，但这很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:12:44.417

我见过的最常见的模式是使用字符列表。列表是可变的，并且可以按照您上面的描述工作。

从字符串创建列表

```
mystring = 'Hello'
mylist = list(mystring) 
```

从列表创建字符串

```
mystring = ''.join(mylist) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:19:47.153

您应该建立一个子字符串列表，并在最后加入它们：

```
def uncompress(line):
  # No error checking, sorry. Will crash with empty strings.
  result = []
  chars = iter(line)
  prevchar = chars.next()   # this is the previous character
  while True:
    try:
      curchar = chars.next()  # and this is the current character
      if curchar == '|':
        # current character is a pipe.
        # Previous character is the character to repeat
        # Get next character, the number of repeats
        curchar = chars.next()
        result.append(prevchar * int(curchar, 16))
      elif curchar == '/':
        # current character is a slash.
        # Previous character is the character to repeat
        # Get two next characters, the number of repeats
        curchar = chars.next()
        nextchar = chars.next()
        result.append(prevchar * int(curchar + nextchar, 16))
      else:
        # No need to repeat the previous character, append it to result.
        result.append(curchar)
      prevchar = curchar
    except StopIteration:
      # No more characters. Append the last one to result.
      result.append(curchar)
      break
  return ''.join(result) 
```

# android - 发布 android 应用程序后更改允许的国家/地区

> ID：13157678
> 
> 赞同：1
> 
> 时间：2012-10-31T12:11:25.517
> 
> 标签：android, google-play

通过在允许的国家/地区部分中选择几个国家/地区，我已在 Google Playstore 中发布了我的 android 应用程序。

发布应用后，我又选择了几个国家/地区，但发布后新添加的国家/地区并未显示该应用

**（当用户尝试从这些新添加的国家/地区安装应用程序时，它会显示“此应用程序在您设备所在的国家/地区不允许使用”**

我应该取消发布该应用程序，并保存新添加的国家/地区设置然后发布吗？

这是正确的方法吗？

# hyperlink - Pinterest 上的 Pin 图链接到 404 - 但链接有效

> ID：13157679
> 
> 赞同：5
> 
> 时间：2012-10-31T12:11:28.613
> 
> 标签：hyperlink, http-status-code-404, pinterest

这真的很奇怪。

我在 Pinterest 上设置了一堆链接到我们的服务，这些都可以正常工作。然后我决定在我们的博客文章上做同样的事情（我们使用 Wordpress），但每次我点击链接（我已经在不同的计算机上完成此操作）时，链接都会转到我们网站上的 404 页面。但是，该链接是有效的，如果您右键单击该图钉并在新窗口中打开它可以正常打开：pinterest.com/pin/105342078755648946

我已经联系了几乎没用的 Pinterest。我也尝试过不同的浏览器、不同的电脑和不同的 Pinterest 帐户。

我在我的 htaccess 文件中看不到任何奇怪的原因，所以我有点难过。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-15T09:42:50.493

我在搜索同一问题时发现了这个 - 所以虽然这是一个老问题，但我想我会为其他正在搜索的人回答！

我的客户使用的是非常旧的 WordPress 版本，当我升级到最新版本时，它解决了这个问题。经过一番挖掘，事实证明您必须使用 WordPress 1.5.2 及更高版本才能修复它 - 因为他们在该更新中应用了修复程序。

# android - DROP TABLE 在 sqlite 中不起作用

> ID：13157682
> 
> 赞同：4
> 
> 时间：2012-10-31T12:11:32.380
> 
> 标签：android, sqlite, drop-table

我尝试以编程方式删除表，logcat 中没有显示任何错误，但没有任何结果：

这是我的数据库助手类：

```
public class database1 extends SQLiteOpenHelper
{
    private static final String DB_Name="database";
    private static final int DB_Version=1;
    private static final String tbl_arrival1="arrival1";
    private static final String STRING_CREATE1 = "CREATE TABLE IF NOT EXISTS "+tbl_arrival1
            +" (_f_id INTEGER PRIMARY KEY AUTOINCREMENT, "
            +"f_date TEXT,"
            +"o_rder NUMERIC,"
            +"rem_com TEXT);";
    public database1 (Context ctx)
    {
        super(ctx,DB_Name,null,DB_Version);
    }
    @Override
    public void onCreate(SQLiteDatabase database) {
        databaseQuery.onCreate(database);
      }
    public static class databaseQuery 
    {
        public static void onCreate(SQLiteDatabase database)
        {   
            database.execSQL("DROP TABLE IF EXISTS "+tbl_arrival1);
            database.execSQL(STRING_CREATE1);
        }
    }
} 
```

我在内容提供者中使用这个数据库助手：

```
database1 DBHelper ;
public Uri insert(Uri uri, ContentValues values) 
    {
        long row_id;
        SQLiteDatabase sqlDB = DBHelper.getWritableDatabase();
        row_id=sqlDB.insert(tbl_arrival1, null, values);
        if(row_id>0)
        {
            Uri _uri = ContentUris.withAppendedId(CONTENT_URI, row_id);
            getContext().getContentResolver().notifyChange(_uri, null);
            return _uri;
        }
        throw new SQLException("Failed to insert into "+uri);
    } 
```

问题是，查询删除表不起作用！

所有建议和答案将不胜感激......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-19T13:02:26.220

我知道我来晚了，但这个问题与我有关。就我而言，我尝试在单个查询中删除许多表，即

```
drop table if exists table_name1;
drop table if exists table_name2;
drop table if exists table_name3; 
```

所以android的实现`execSQL()`只执行**一条**sql语句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:27:14.660

`onCreate`一旦创建数据库，将只在创建时工作一次，`onUpgrade()`如果对旧版本进行了任何更改，您应该使用删除表

**编辑** [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:28:51.793

您的代码似乎很好。您正在调用 DROP TABLE 然后随后再次创建。您如何检查 DROP TABLE 不起作用？

# web-services - 向现有 WSDL 添加新操作。是否需要重新编译现有客户端？

> ID：13157684
> 
> 赞同：1
> 
> 时间：2012-10-31T12:11:34.463
> 
> 标签：web-services, soap, wsdl

我有一个 Web 服务和一个正在使用它的客户端应用程序。

现在我想在这个 WSDL 中为一个新客户端添加一个新操作。**对 WSDL 的现有操作没有影响。只添加了一个新操作。**

此更改后是否需要重新编译现有客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:38:46.530

如果您只添加了一个新操作而没有更改任何其他内容，那么现有客户端将不会受到影响。无需重新编译客户端。

以下是更多细节：[什么是对 WSDL 契约的非破坏性或向后兼容的更改？](https://stackoverflow.com/questions/8786935/what-are-considered-non-breaking-or-backwards-compatible-changes-to-a-wsdl-contr)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-30T12:11:47.857

不，只需从 /WEB-INF/wsdl 文件夹中删除旧的 wsdl 文件，然后再次将更新的类公开为 Web 服务，这将创建新的 wsdl。

# java - 关于值的提取

> ID：13157685
> 
> 赞同：-2
> 
> 时间：2012-10-31T12:11:34.480
> 
> 标签：java

我已经找到了问题的解决方案，要感谢你们所有人，因为没有你们及时的解决方案，并建议这是不可能实现的，非常感谢..！！

已经解决了这个问题，非常感谢..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:16:58.197

这不编译。

你需要做...

```
 String num = "59103-RRX12";

    public int getSubStringInteger() {
        return Integer.parseInt(num.substring(num.length() - 2, num.length()));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:14:26.603

```
int i = 59103 - Integer.parseInt("RRX12".substring(3,5)); 
```

这样做它会首先从中提取`String`12 然后将其转换为`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:15:03.740

```
String s = Integer.toString("59103-RRX12");
String[]arr= s.split(-);
int x= Integer.parseInt(arr[1].substring(3,5)); 
```

# axapta - 如何根据下拉列表默认值并清除以前的表单值？

> ID：13157688
> 
> 赞同：1
> 
> 时间：2012-10-31T12:11:56.683
> 
> 标签：axapta

我有一个要求，根据下拉值，它应该将复选框或字段默认为某个值。

因此，假设下拉列表的值为：1、2 和 3。如果我选​​择 1，则应选中一个复选框。如果选择 2 或 3，则字段应具有默认值“983.3”。

我要问的问题是：如何在选择 1 后选择另一个下拉值（2 或 3）时清除复选框/所有表单字段？因此只有 1 或 2/3 的条件默认值会根据选择显示在表单上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:21:28.667

我将假设您的所有字段都绑定到数据库表。

然后`modifiedField`在表上添加方法：

```
public void modifiedField(fieldId _fieldId)
{
    super(_fieldId);
    switch (_fieldId)
    {
        case fieldNum(YourTable,YourDropdown):
            switch (this.YourDropdown)
            {
                case 1:
                    this.YourCheckBox = NoYes::Yes;
                    this.YourField = 0;
                    break;
                case 2, 3:
                    this.YourCheckBox = NoYes::No;
                    this.YourField = 983.3;
                    break;
            }
            break;
    }
} 
```

表单域的更新是自动发生的。

# ajax - HighCharts 通过 ajax 加载数据

> ID：13157693
> 
> 赞同：11
> 
> 时间：2012-10-31T12:12:22.590
> 
> 标签：ajax, highcharts

在过去的几天里，我一直在使用来自 api 的一些示例 json 数据中的 ajaxing 来使用 Highcharts 库填充图表时遇到问题。

我试图在我的 ajax 回调中使用 chart.series[0].data = json 和类似的东西，但没有任何效果。

我的 json 是一个月中每一天的数据数组。

```
"{"month_mentions_graphic":[521,49,81,0,101,0,0,0,21,3071,0,0,0,0,0,1479,6124,2409,2608,0,0,3457,2057,2580,5876,4638,0,0,3337,3479,430]}" 
```

这是我的代码：

```
var chart;

$(document).ready(function() {

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25, 
            events: {
                load: requestData
            }
        },
        title: {
            text: 'Menções Mensais',
            x: -20 //center
        },
        xAxis: {
            categories: [1,2,3,4,5]
        },
        yAxis: {
            title: {
                text: 'Menções'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [
         {
            name: 'mentions',
            data: []
          }
        ]
    });
});

function requestData() {
    $.ajax({
        url: 'api/v1/dashboard/month_mention_graphic',
        type: "GET",
        dataType: "json",
        data : {username : "demo"},
        success: function(data) {
            chart.series[0].data = data;
        },
        cache: false
    });
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T19:54:06.620

调用 chart.addSeries 一次性添加整个系列，而不是仅将点数组添加到初始空系列：

```
function requestData() {
    $.ajax({
        url: 'api/v1/dashboard/month_mention_graphic',
        type: "GET",
        dataType: "json",
        data : {username : "demo"},
        success: function(data) {
            chart.addSeries({
              name: "mentions",
              data: data.month_mentions_graphic
            });
        },
        cache: false
    });
} 
```

# java - 如何在 android 小部件中显示 rss 提要

> ID：13157696
> 
> 赞同：0
> 
> 时间：2012-10-31T12:12:28.490
> 
> 标签：java, android, rss

我有一个很大的问题，伙计们。我有一个应用程序可以从博客中获取和解析 RSS 提要，但我不知道如何将结果放入我的小部件中。

这是 RSSListActivity 在它自己的活动中正确显示 rss 提要：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        RSSItem data = itemlist.get(position);

        Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(data.link));

        startActivity(intent);
    }

    private void retrieveRSSFeed(String urlToRssFeed,ArrayList<RSSItem> list)
    {
        try
        {
           URL url = new URL(urlToRssFeed);
           SAXParserFactory factory = SAXParserFactory.newInstance();
           SAXParser parser = factory.newSAXParser();
           XMLReader xmlreader = parser.getXMLReader();
           RSSParser theRssHandler = new RSSParser(list);

           xmlreader.setContentHandler(theRssHandler);

           InputSource is = new InputSource(url.openStream());

           xmlreader.parse(is);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    private class RetrieveRSSFeeds extends AsyncTask<Void, Void, Void>
    {
        private ProgressDialog progress = null;

        @Override
        protected Void doInBackground(Void... params) {
            retrieveRSSFeed("http://blog.qubiz.com/index.php/feed",itemlist);

            rssadaptor = new RSSListAdaptor(RSSListActivity.this, R.layout.rssitemview,itemlist);

            return null;
        }

        @Override
        protected void onCancelled() {
            super.onCancelled();
        }

        @Override
        protected void onPreExecute() {
            progress = ProgressDialog.show(
                    RSSListActivity.this, null, "Loading RSS Feed... Please wait");

            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(Void result) {
            setListAdapter(rssadaptor);

            progress.dismiss();

            super.onPostExecute(result);
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            super.onProgressUpdate(values);
        }
    }

    private class RSSListAdaptor extends ArrayAdapter<RSSItem>{
        private List<RSSItem> objects = null;

        public RSSListAdaptor(Context context, int textviewid, List<RSSItem> objects) {
            super(context, textviewid, objects);

            this.objects = objects;
        }

        @Override
        public int getCount() {
            return ((null != objects) ? objects.size() : 0);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public RSSItem getItem(int position) {
            return ((null != objects) ? objects.get(position) : null);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;

            if(null == view)
            {
                LayoutInflater vi = (LayoutInflater)RSSListActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = vi.inflate(R.layout.rssitemview, null);
            }

            RSSItem data = objects.get(position);

            if(null != data)
            {
                TextView title = (TextView)view.findViewById(R.id.txtTitle);
                TextView date = (TextView)view.findViewById(R.id.txtDate);
                TextView description = (TextView)view.findViewById(R.id.txtDescription);

                title.setText(data.title);
                date.setText("on " + data.date);
                String prova = android.text.Html.fromHtml(data.description).toString();
                //description.setText(data.description);
                description.setText(prova);
            }

            return view;
        }
    }

    public boolean onCreateOptionsMenu(Menu menu)
    {
        menu.add(1,1,0,"About");
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch(item.getItemId())
            {
        case 1:

            AlertDialog.Builder conferma_canc = new AlertDialog.Builder(this);
            conferma_canc.setTitle("About");
            conferma_canc.setMessage("Copyright © 2012 Qubiz. All rights reserved. Android version designed and developed by Csosz Gergo Levente, Qubiz Romania.");
            conferma_canc.setPositiveButton("OK", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int id) {
              }
            });
            AlertDialog alert = conferma_canc.create();
            alert.show();
            return true;
            }
        return false;           
    } 
```

**这是我的 RSS 解析器，它也可以正常工作：**

```
public class RSSParser extends DefaultHandler {
    private final static String TAG_ITEM = "item";
    private final static String[] xmltags = { "title", "link", "pubDate", "description" };

    private RSSItem currentitem = null;
    private ArrayList<RSSItem> itemarray = null;
    private int currentindex = -1;
    private boolean isParsing = false;
    private StringBuilder builder = new StringBuilder();

    public RSSParser(ArrayList<RSSItem> itemarray) {
        super();

        this.itemarray = itemarray;
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        super.characters(ch, start, length);

        if(isParsing && -1 != currentindex && null != builder)
        {
            builder.append(ch,start,length);
        }
    }

    @Override
    public void startElement(String uri, String localName, String qName,Attributes attributes) throws SAXException {
        super.startElement(uri, localName, qName, attributes);

        if(localName.equalsIgnoreCase(TAG_ITEM))
        {
            currentitem = new RSSItem();
            currentindex = -1;
            isParsing = true;

            itemarray.add(currentitem);
        }
        else
        {
            currentindex = itemIndexFromString(localName);

            builder = null;

            if(-1 != currentindex)
                builder = new StringBuilder();
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        super.endElement(uri, localName, qName);

        if(localName.equalsIgnoreCase(TAG_ITEM))
        {
            isParsing = false;
        }
        else if(currentindex != -1)
        {
            if(isParsing)
            {
                switch(currentindex)
                {
                    case 0: currentitem.title = builder.toString();         break; 
                    case 1: currentitem.link = builder.toString();          break;
                    case 2: currentitem.date = builder.toString();          break;
                    case 3: currentitem.description= builder.toString();    break;
                }
            }
        }
    }

    private int itemIndexFromString(String tagname){
        int itemindex = -1;

        for(int index= 0; index<xmltags.length; ++index)
        {
            if(tagname.equalsIgnoreCase(xmltags[index]))
            {
                itemindex = index;

                break;
            }
        }

        return itemindex;
    }
} 
```

**我的 ExampleAppWidgetProvider.java 是一个示例时钟小部件代码，我想替换它以显示我的 rss 提要。**

```
public class ExampleAppWidgetProvider extends AppWidgetProvider {
    static DateFormat df = new SimpleDateFormat("hh:mm:ss");
    private static final String LOG_TAG = "ExampleWidget";

    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        final int N = appWidgetIds.length;
        Log.i("ExampleWidget", "Updating widgets " + Arrays.asList(appWidgetIds));
        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];
            Intent intent = new Intent(context, ExampleAppWidgetProvider.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget1);
            views.setOnClickPendingIntent(R.id.button, pendingIntent);
            views.setTextViewText(R.id.widget1label, df.format(new Date()));

            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
    }

    private PendingIntent createClockTickIntent(Context context) {
        Intent intent = new Intent(CLOCK_WIDGET_UPDATE);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        return pendingIntent;
    }

    @Override
    public void onEnabled(Context context) {
        super.onEnabled(context);
        Log.d(LOG_TAG, "Widget Provider enabled.  Starting timer to update widget every second");
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.SECOND, 1);
        alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(),1000, createClockTickIntent(context));
    }

    @Override
    public void onDisabled(Context context) {
        super.onDisabled(context);
        Log.d(LOG_TAG, "Widget Provider disabled. Turning off timer");
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(createClockTickIntent(context));
    }

    public static String CLOCK_WIDGET_UPDATE = "com.eightbitcloud.example.widget.8BITCLOCK_WIDGET_UPDATE";

    @Override
    public void onReceive(Context context, Intent intent) {
        super.onReceive(context, intent);
        Log.d(LOG_TAG, "Received intent " + intent);
        if (CLOCK_WIDGET_UPDATE.equals(intent.getAction())) {
            Log.d(LOG_TAG, "Clock update");
            ComponentName thisAppWidget = new ComponentName(context.getPackageName(), getClass().getName());
            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
            int ids[] = appWidgetManager.getAppWidgetIds(thisAppWidget);
            for (int appWidgetID : ids) {updateAppWidget(context, appWidgetManager, appWidgetID);
            }
        }
    }

    public static void updateAppWidget(Context context,AppWidgetManager appWidgetManager, int appWidgetId) {
        String currentTime = df.format(new Date());
        RemoteViews updateViews = new RemoteViews(context.getPackageName(),R.layout.widget1);
        updateViews.setTextViewText(R.id.widget1label, currentTime);
        appWidgetManager.updateAppWidget(appWidgetId, updateViews);
    }

} 
```

any1可以为我提供解决方案吗？我的目标是：用我的 RSS 提要阅读器替换小部件的时钟 Java 代码。所以我想显示由 rss 解析器解析的小部件中的最后一个 rss 项。我怎样才能做到这一点？也请提供代码，不仅仅是一些想法，我对android开发有点陌生。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:06:41.773

（假设您正确获取 RSS 检索和解析）您只需更改小部件中的一些文本：

```
 AppWidgetManager manager = AppWidgetManager.getInstance(context);
    RemoteViews views = new RemoteViews(context.getPackageName(), R.name_of_your_widget_layout);
    // set text of some view
    views.setTextViewText(R.id.widget_amount_cameras, amountCameras);
    // and of another view
    views.setTextViewText(R.id.widget_location, locationCity);
    // ... and yet another view
    views.setTextViewText(R.id.locationStatus, locationStatus);

   // get IDs of widgets ,  there could be more than  one
    final int[] appWidgetIds = manager.getAppWidgetIds(new ComponentName(YOurWidgetProviderClass.class.getPackage().getName(), YOurWidgetProviderClass.class.getName()));

    // update all hte instances
    manager.updateAppWidget(appWidgetIds, views); 
```

您只能更改小部件的某些属性（由于安全限制） - 有关详细说明，请参阅 RemoteViews 的 Javadoc

# google-analytics - Birt 和谷歌分析

> ID：13157702
> 
> 赞同：0
> 
> 时间：2012-10-31T12:12:54.917
> 
> 标签：google-analytics, birt

[我正在尝试将谷歌分析数据导入 birt，我下载了一个名为Google Analytics ODA Plugin](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1489-google-analytics-oda-plugin/)的开源插件。当我形成下一个查询时，它不起作用。

询问：

```
<query>
<dimension>ga:browser</dimension>
<metric>ga:visits</metric>
<startdate>2012-10-01</startdate>
<enddate>2012-10-31</enddate>
</query> 
```

它没有给我任何错误 - 当按下“确定”按钮时，它什么也不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:36:01.123

该插件尝试访问返回 404 Not Found 错误的 URL，但它不会向您显示该错误（而是什么都不做）。Google 似乎已经更改了 API，并且该插件尚未针对该 AFAICS 进行更新。

# d3.js - 如何将 d3 与 require.js 集成

> ID：13157704
> 
> 赞同：22
> 
> 时间：2012-10-31T12:12:59.807
> 
> 标签：d3.js, requirejs

我在尝试将 d3 集成到 require/backbone 应用程序时遇到问题。我的 main.js 包含如下内容：

```
require.config({
  paths: {
    d3: 'libs/d3/d3.v2.min'
    backbone: ...
    ...
  }
}); 
```

我的主干观点类似于（在coffeescript中）

```
define ['backbone','d3',...], (Backbone,d3,...) ->
  MyView = Backbone.View.extend
    initialize: () ->
      d3.somefunction 
```

控制台日志说 d3 为空。有没有一种简单的方法可以将 d3 集成到这种类型的应用程序中？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-01T05:43:12.347

d3 不调用define() 来声明模块，因此`d3`对主干视图的本地引用将不是您想要的。要么使用 d3 生成的全局变量：

```
define(['backbone', 'd3'], function (backbone, ignore) {
    //Use global d3
    console.log(d3);
}); 
```

或者使用[shim 配置](http://requirejs.org/docs/api.html#config-shim)为 d3 声明一个导出值：

```
requirejs.config({
    shim: {
        d3: {
            exports: 'd3'
        }
    }
}); 
```

这将告诉 requirejs 使用全局 d3 作为 d3 的模块值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-17T00:00:22.307

由于 d3.v3 现在将自身注册为 AMD 模块（如果存在兼容库），您需要使用此解决方法（来自[http://pastebin.com/d5ZDXzL2](http://pastebin.com/d5ZDXzL2)）：

```
requirejs.config({
    paths: {
        d3: "scripts/d3.v3",
        nvd3: "scripts/nv.d3"
    },
    shim: {
        nvd3: {
          exports: 'nv',
          deps: ['d3.global']
        }
    }
});
// workaround for nvd3 using global d3
define("d3.global", ["d3"], function(_) {
  d3 = _;
});

define('myModule', ['nvd3'], function(nc) { /* .... */ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T07:18:15.903

我不知道为什么，但这有效。我不确定这是否是加载模块的正确方法。

```
require(['libs/jquery', 'libs/d3'], function($, ignore)    {
  d3 = require('libs/d3');
}); 
```

# sql - 创建视图时解析错误

> ID：13157708
> 
> 赞同：1
> 
> 时间：2012-10-31T12:13:21.767
> 
> 标签：sql, sql-server-2008

我有一个视图，它从带有数据的表列中获取多行和逗号分隔值 (CSV)。

它运行良好，我得到了我需要的结果。现在视图有一些解析错误，例如：

> '(' 附近的 WHERE 子句出错。无法解析查询文本。

有人可以帮忙吗？这是我的代码：

```
SELECT dbo.table1.title,
       Stuff((SELECT ', ' + CONVERT(NVARCHAR(4000), dbo.table3.uid) AS [text()]
              FROM   dbo.table2
                     INNER JOIN dbo.table3
                       ON dbo.table3.uid = dbo.table2.FK_Group
              WHERE  dbo.table3.uid = dbo.table2.FK_Group
                     AND dbo.table3.company = dbo.main.company
                     AND dbo.table2.FK_Version = dbo.table1.fk_Version
                     AND dbo.main_version.uid = dbo.table1.fk_Version
              FOR XML PATH('')), 1, 1, '') AS groupName
FROM   dbo.main_version
       INNER JOIN dbo.[main]
         ON dbo.version.fk_main = dbo.[main].uid
       INNER JOIN dbo.main_schema
         ON dbo.[main].fk_SCHEMA = dbo.main_schema.uid
       INNER JOIN dbo.table1
         ON dbo.version.uid = dbo.table1.fk_Version
WHERE  ( dbo.main_version.active = 1 ) 
```

# c# - 安装后启动 Windows C# 应用程序

> ID：13157718
> 
> 赞同：-3
> 
> 时间：2012-10-31T12:13:54.933
> 
> 标签：c#

我有 C# windows cs 项目。该应用程序还可以打开 Word 文档和图片并将它们存储在 MS Access 数据库中。我进行了设置，它在安装了 Visual Studio 2008 的计算机上安装得很好，但是当我在没有安装 VS 的计算机上安装它时，它会安装，然后它就不会开始运行。我无法运行它。

我制作的其他一些 C# 项目可以在没有启动此应用程序的同一台计算机上安装和运行而不会出现问题。

任何人都可以帮助我，请问我的问题是什么？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:21:54.303

如果其他应用程序确实运行，那么您可能会错过一些依赖项。检查所有 dll 是否安装正确。你使用哪个框架？其他 C# 项目是否也在该框架中编程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:17:38.743

可能在没有安装 Vs 的计算机上缺少一些 .net 框架组件，因为在安装 VS 时，所有必要的组件也都安装了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:18:10.570

很可能看起来没有安装VS的计算机没有`.NET framework`安装。

在安装了 VS 的计算机上进行测试的地方，它显然可以像`.NET framework`已经安装的那样工作。

我认为设置中有一个选项，您可以`Prerequisites`在安装应用程序之前指定，谷歌搜索更多信息。

此[链接](http://kb.flexerasoftware.com/doc/Helpnet/installshield15helplib/MSIPrereq.htm)可能会有所帮助。

# c# - 在 PHP 服务器上使用字符串上传 C# 文件

> ID：13157720
> 
> 赞同：0
> 
> 时间：2012-10-31T12:14:03.373
> 
> 标签：c#, php, upload

我正在 php 服务器上上传带有 C# 代码的文件。但面临一些问题。

首先，我使用 WebClient 对象通过调用 UploadFile() 方法上传文件，并通过以下代码调用 UploadString() 方法上传字符串：

```
 String StoreID = "First Store";
        WebClient Client = new WebClient();
        String s = Client.UploadString("http://localhost/upload.php", "POST", StoreID);
        Client.Headers.Add("Content-Type","binary/octet-stream");
        byte[] result = Client.UploadFile("http://localhost/upload.php", "POST", "C:\\aaaa.jpg");
        s = s + System.Text.Encoding.UTF8.GetString(result,0,result.Length); 
```

问题是我请求了两次，所以字符串和文件没有同时发送。我收到字符串或文件。但我同时需要两者。我不想使用**UploadData()**因为它会使用字节码，而且我知道我知道如何在 php 中提取它。

Let that string is folder name, i have to send string and file, so that file could save at specified folder at php server.

I studied there may be a solution with WebRequest and WebResponse object. But dont know how to send request using WebResponse by C# and get it at PHP.

Any Suggestions!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:22:13.550

尝试这个 ：

```
 WebClient web = new WebClient();
try{

    web.UploadFile("http://" + ip + "/test.php", StoreID);
}
catch(Exception e)
{
    MessageBox.Show("Upload failed");
} 
```

现在您可以从 PHP 文件访问该文件。

```
 <?php
//check whether the folder the exists
if(!(file_exists('C:/Users/dhanu-sdu/Desktop/test')))
{
  //create the folder
  mkdir('C:/Users/ComputerName/Desktop/test');
  //give permission to the folder
  chmod('C:/Users/ComputerName/Desktop/test', 0777);
}

//check whether the file exists
if (file_exists('C:/Users/ComputerName/Desktop/test/'. $_FILES["file"]["name"]))
{
  echo $_FILES["file"]["name"] . " already exists. ";
}
else
{
  //move the file into the new folder
  move_uploaded_file($_FILES["file"]["tmp_name"],'C:/Users/ComputerName/Desktop/test/'. $_FILES["file"]["name"]);

}

?> 
```

此外，您可以使用以下代码从 PHP 服务器下载数据并将其显示在 C# Web 浏览器中：

```
 WebClient web = new WebClient();
try{
    byte[] response = web.DownloadData("http://" + ip +"/test.php");
    webBrowser1.DocumentText = System.Text.ASCIIEncoding.ASCII.GetString(response);
}
catch(Exception e)
{
    MessageBox.Show("Download failed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:26:32.703

您可以使用接受文件的 php 创建 web 服务。然后发布该 web 服务，并将其添加到您的 c# 引用中，然后只需从接受该文件的 c# 代码中调用 teh 方法，然后 vualá！

如何使用 php[链接创建 SOAP](http://www.php.net/manual/en/book.soap.php)

# video-editing - objective c how to add frame (image) on captured video file

> ID：13157721
> 
> 赞同：1
> 
> 时间：2012-10-31T12:14:04.543
> 
> 标签：video-editing

i am developing an app that capture video then user select frame (imagefile) then save mixed video (frame over the video ) in cameraroll, but i dont know how to mixup that thing....? please Help Me!!! give me some example code

thanx in advance

# iphone - UIScrollview 的奇怪行为

> ID：13157728
> 
> 赞同：0
> 
> 时间：2012-10-31T12:14:22.090
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我需要为此绘制动态图像`UIScrollView`，`MKHorizion`菜单（滚动视图的子类）。现在我在滚动视图上添加子视图图像。循环非常适合在滚动视图上添加子视图。现在在我的父类中，我需要触摸滚动视图以获取更新的数据。如果我没有触摸，那么它不会显示更新的数据。下面是代码

```
-(void) reloadData
{
    [self deleteAlliTem];
    self.itemCount = [dataSource numberOfImagesForMenu:self];
    self.backgroundColor = [dataSource backgroundColorForImage:self];

    UIFont *buttonFont = [UIFont boldSystemFontOfSize:15];
    int buttonPadding = 0;

    int tag = kButtonBaseTag;    
    int xPos = kLeftOffset;

    for(int i = 0 ; i < self.itemCount; i ++)
    {
      NSLog(@"*************************************************************");
        NSMutableDictionary *dictData=[dataSource horizMenuImage:self dictForItmeAtIndex:i];

        NSString *title=[dictData valueForKey:@"name"] ? [dictData valueForKey:@"name"] :  @"";

        UIImage* imageItem= [UIImage imageWithData:[Base64 decode:[dictData valueForKey:@"img"]]];
        int buttonWidth = 95;

         UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [customButton setTitle:title forState:UIControlStateNormal];
        customButton.titleLabel.font = buttonFont;
        [customButton setBackgroundImage:[UIImage imageNamed:@"addFriendStrip.png"] forState:UIControlStateNormal];
        [customButton setBackgroundImage:[UIImage imageNamed:@"addFriendStrip.png"] forState:UIControlStateSelected];
         customButton.tag = tag++;
        [customButton addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
         customButton.frame = CGRectMake(xPos, 70, buttonWidth + buttonPadding, 25);
        customButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
        customButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

        customButton.titleEdgeInsets =UIEdgeInsetsMake(0, 10,0, 0);

        customButton.titleLabel.font = [UIFont fontWithName:@"Overlock-Bold" size:16];
        [customButton setTitleColor:[UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1] forState:UIControlStateNormal];
        [customButton setTitleColor:[UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1] forState:UIControlStateSelected];

         UIImageView* itemImageView = [[UIImageView alloc] initWithImage:imageItem];
        itemImageView.tag = 200 + customButton.tag;
        [itemImageView setFrame:CGRectMake(xPos, 0, buttonWidth + buttonPadding, 95)];
        [self addSubview:itemImageView];
        [itemImageView release];
        itemImageView = nil;
        [self addSubview:customButton];

        xPos += buttonWidth;
         xPos += buttonPadding;
        if (i != self.itemCount-1){
            xPos += 2.5; //5;  // Richa
        }
    }
    self.contentSize = CGSizeMake(xPos, 95);
     NSLog(@"############################################################################ - %d",[[self subviews] count]);
    [self scrollRectToVisible:CGRectMake(1, 0, self.frame.size.width, self.frame.size.height) animated:YES];
    } 
```

请帮我解决这个问题。为什么我需要触摸滚动视图？我需要覆盖其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:49:39.790

你检查它在主线程上吗？可能是您正在使用 GCD 队列，这就是它直到触摸才更新的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:14:46.970

试着把你的滚动视图放在上面。我没有正确地回答你的问题，但它可能会有所帮助。让我知道它是否有效..!!!

快乐编码.!!!!

# javascript - 通过原型（不是原型框架）属性创建对象与 jquery 命名空间对象之间的区别？

> ID：13157731
> 
> 赞同：2
> 
> 时间：2012-10-31T12:14:22.827
> 
> 标签：javascript, jquery

我只需要知道使用这两种方法创建对象的基本区别是什么，以及使用对象的效果。

```
//////////////////////////////////////////
myTestObject.prototype.var1 = null;
function myTestObject()
{
    this.var1 = "test me";
}

myTestObject.prototype.action = function()
{
    alert("alertme");
};
// to use
var a = new myTestObject();
a.action();
//////////////////////////////////////////

//////////////////////////////////////////
(function()
{
    $.myTestObject3 = {
      var1 : "test me",
      action : _actionMethod
    };

    function _actionMethod()
    {
        alert("alertme3");
    }

 })();

$.myTestObject3.action();
////////////////////////////////////////// 
```

一些更新......这个问题的答案让我去谷歌搜索不同的关键词，这导致了两篇有趣的文章，这些文章真正详细介绍了 javascript 中的构造函数与文字对象

[http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/](http://net.tutsplus.com/tutorials/javascript-ajax/the-basics-of-object-oriented-javascript/)

然后作为使用函数构造函数时为什么要使用原型的继续，特别注意**为什么使用原型更好的部分**

[http://net.tutsplus.com/tutorials/javascript-ajax/prototypes-in-javascript-what-you-need-to-know/?search_index=1](http://net.tutsplus.com/tutorials/javascript-ajax/prototypes-in-javascript-what-you-need-to-know/?search_index=1)

因此，作为后续，您可以将两者结合起来使用，就像下面的吉他示例一样，作为一个很好的练习。如果只需要一个对象的一个​​副本并且对其进行更改，知道它会影响整个脚本是可以的，那么对象字面量就可以了。但是，如果需要使用原型方法创建许多对象是最好的，因此所有创建的对象都使用对同一函数的引用，而不是拥有该函数的副本。

另一篇更好地利用命名空间并结合所有这些方法的好文章 [http://javascriptweblog.wordpress.com/2010/12/07/namespacing-in-javascript/](http://javascriptweblog.wordpress.com/2010/12/07/namespacing-in-javascript/)

**最后的跟进** 我希望其他人觉得这很有用，因为这些主题让我陷入了一段时间的循环。

现在知道要寻找什么，我找到了两个非常好的 url，它们描述了许多设计模式以及如何使用几个示例在 javascript 中混合它们。

这篇文章描述了如何以利用原型符号的方式使用模块模式。这将允许您划分代码，同时仍确保实例引用相同的对象。 [http://briancray.com/posts/javascript-module-pattern/](http://briancray.com/posts/javascript-module-pattern/)

这经历了几种设计模式并列出了优缺点 [http://addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:19:54.437

使用的对象`$`将无法使用`myTestObject3`，因为它尚未在 jQuert 原型上扩展。`myTestObject3`是一个对象字面量，而不是一个构造函数。

```
$('#test').myTestObj3.action(); // wrong 
```

如果您希望它位于 jQuery 的原型上，请扩展该`$.fn`对象。

`myTestObject`您可以使用原型继承从（构造函数）派生任意数量的“子代” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:21:46.000

看看[为什么 JavaScript 原型设计？](https://stackoverflow.com/questions/4650513/why-is-javascript-prototyping)，从那里摘录一些：

> 如果您将所有属性和方法添加到对象函数构造函数，然后创建该对象的 100 个实例，您将获得所有属性和方法的 100 个副本。相反，如果您将所有属性和方法添加到对象函数构造函数的原型中，然后创建该对象的 100 个实例，您将获得对对象属性和方法的单 (1) 个副本的 100 个引用。这显然更快、更有效，这就是为什么要使用原型（除了改变字符串和图像之类的东西，如下所述）
> 
> 使用原型的另一个原因是模拟经典继承：

```
var Instrument = {
    play: function (chord) {
      alert('Playing chord: ' + chord);
    }
};

var Guitar = (function() {
    var constructor = function(color, strings) {
        this.color = color;
        this.strings = strings;
    };
    constructor.prototype = Instrument;
    return constructor;
}());

var myGuitar = new Guitar('Black', ['D', 'A', 'D', 'F', 'A', 'E']);
myGuitar.play('D5'); 
```

# visual-studio-2010 - Visual Studio 2010：测试运行时目录

> ID：13157733
> 
> 赞同：0
> 
> 时间：2012-10-31T12:14:34.987
> 
> 标签：visual-studio-2010, unit-testing, output

为了让一个相当乏味的第三方库工作，我需要在一个特定的、准备好的目录中执行我的单元测试，那里有大量的资源文件（~500MB）。原因是上述第三方库只有在我的程序的所有资源、库和可执行文件都位于同一目录中时才能工作。

然而，在运行 Visual Studio 2010 单元测试时，测试运行程序总是在每次测试运行时创建一个新目录（例如“default[1]”）。如何让它始终使用相同的固定目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:20:51.723

您是否查看了 Visual Studio[测试设置](http://msdn.microsoft.com/en-us/library/vstudio/ee256991%28v=vs.100%29.aspx)？

从运行自定义脚本到指定运行单元测试时要复制的文件，有很多选项。

我不确定，但您*也许*可以指定要在其中运行单元测试的目录。

# git - 我应该删除合并的分支吗？

> ID：13157734
> 
> 赞同：1
> 
> 时间：2012-10-31T12:14:38.670
> 
> 标签：git

我想开始研究“功能 a”，所以我创建了一个新分支`git checkout -b feature-a`。当该功能完成并正常工作后，我将其合并到 master 中`git checkout master; git merge feature-a`。

问题是现在`git branch`仍然显示'feature-a'，我不想要它，因为我认为这很快就会变得一团糟，列表会太长。

有没有办法从列表中删除它？我应该这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:18:42.830

您可以删除不需要的本地分支`git branch -d feature-a`

最好删除不需要的本地分支以避免混乱。

# iphone - 动态更改 UIWebView 中的页面

> ID：13157735
> 
> 赞同：0
> 
> 时间：2012-10-31T12:14:45.057
> 
> 标签：iphone, ios, jquery-mobile, uiwebview, navigation

我需要一些 iPhone 专业知识..

我有一个由 jquery 移动页面显示的 UIWebView ..

我想在 webview 下面有两个 ios 本机按钮 - 1\. Home 2\. Settings。

主页按钮很简单，因为当我从 XCode 按钮拖动链接时，它为我提供了 goHome、goBack 等选项。但是对于我的设置按钮，我希望它转到特定的 URL。我似乎在网上找不到太多关于如何做到这一点的信息。到目前为止，我已经设法避免在 ios 世界中做太多事情，但我认为我无法再解决这个问题了。因此，如果您能告诉我 buttonpressed 事件如何流向 UIWebView 并更改页面，那就太好了！如果它更容易，我将压缩我的 xcode 项目。

我看过很多关于如何创建 iOS 网络浏览器但没有书签栏的教程，这与我需要的功能相似。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:30:37.393

您可以将特定 URL 加载到 UIWebView，如下所示

```
[self.webview loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://www.google.com"]]]; 
```

# mongodb - Doctrine Mongo 文档 + 嵌入表单集合

> ID：13157746
> 
> 赞同：3
> 
> 时间：2012-10-31T12:15:16.883
> 
> 标签：mongodb, symfony

使用 symfony 2 和 mongoDB 进行项目。

我正在关注本教程：[http ://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

但是，一旦我保存表单，我就会收到此错误：

```
Cannot create a DBRef, the document is not an object 
```

崩溃行： [https ://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/DocumentManager.php#L691](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/DocumentManager.php#L691)

表格代码：

命名空间字体\FontsBundle\Form\Type；

使用 Symfony\Component\Form\AbstractType；使用 Symfony\Component\Form\FormBuilderInterface；

```
class FamilyType extends AbstractType
{

    public function __construct($dm)
    {
        $this->dm = $dm;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {

        $builder->add('name', 'text', array('max_length' => 50, 'error_bubbling' => true));
        $builder->add('fonts', 'collection', array(
            'type' => new FontType($this->dm),
            'allow_add' => true,
            'by_reference' => false,
            ));     

    }

    public function getName()
    {
        return 'Family';
    }
} 
```

控制器代码：

```
namespace Fonts\FontsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

use Fonts\FontsBundle\Document\Family;
use Fonts\FontsBundle\Document\Font;

use Fonts\FontsBundle\Form\Type\FamilyType;

class FamilyBackendController extends BaseController
{

    public function newAction()
    {
        try {

            $family = new Family();

            $form = $this->createForm(new FamilyType($this->getMongoService()), $family);

            $request = $this->getRequest();
            if ($request->getMethod() == 'POST')
            {
                $form->bind($request);

                if ($form->isValid())
                {

                    $this->persist($family);

                    $this->get('session')->setFlash('notice', 'Item successfully created.');
                    return ($request->request->get('save') === 'Save') ? 
                        new RedirectResponse($this->generateUrl('backend_familys_list')) : 
                        new RedirectResponse($this->generateUrl('backend_familys_new'));
                }
            }

            return $this->render('FontsBundle:Backend:newFamily.html.twig', array(
                'form' => $form->createView(),
            ));

        } catch(\Exception $e) {
            return new Response($e->getMessage());
        }
    }

} 
```

文档：

```
<?php

namespace Fonts\FontsBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;
use Doctrine\Common\Collections\ArrayCollection;

use Symfony\Component\Validator\Constraints as Assert;

use Fonts\FontsBundle\Service\SlugService;

/**
 * @MongoDB\Document(repositoryClass="Fonts\FontsBundle\Repository\FamilyRepository")
 */

class Family
{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     * @MongoDB\UniqueIndex(safe=true)
     * @Assert\NotBlank(message="FamilyName value should not be blank.")
     * @Assert\MinLength(limit=3,message="FamilyName must have at least {{ limit }} characters.")
     * @Assert\MaxLength(limit=50,message="FamilyName must have maximum {{ limit }} characters.")
     */
    protected $name;

    /**
     * @MongoDB\ReferenceMany(targetDocument="Font", simple=true)
     * @Assert\NotBlank(message="Fonts should not be blank.")
     */
    protected $fonts;

    /**
     * @MongoDB\String
     * @MongoDB\UniqueIndex(safe=true)
     */
    protected $slug;

    /**
     * @MongoDB\Int
     */
    protected $createdAt;

    public function __construct()
    {
        $this->fonts = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return id $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Family
     */
    public function setName($name)
    {
        $this->name = $name;
        return $this;
    }

    /**
     * Get name
     *
     * @return string $name
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Add fonts
     *
     * @param Fonts\FontsBundle\Document\Font $fonts
     */
    public function addFonts(\Fonts\FontsBundle\Document\Font $fonts)
    {
        $this->fonts[] = $fonts;
    }

    /**
     * Set fonts
     *
     * @param Doctrine\Common\Collections\Collection $fonts
     */
    public function setFonts($fonts)
    {
        $this->fonts = $fonts;
    }

    /**
     * Get fonts
     *
     * @return Doctrine\Common\Collections\Collection $fonts
     */
    public function getFonts()
    {
        return $this->fonts;
    }

    /**
     * Set slug
     *
     * @param string $slug
     * @return Family
     */
    public function setSlug($slug)
    {
        $this->slug = $slug;
        return $this;
    }

    /**
     * Get slug
     *
     * @return string $slug
     */
    public function getSlug()
    {
        return $this->slug;
    }

    /**
     * Set createdAt
     *
     * @param int $createdAt
     * @return Family
     */
    public function setCreatedAt($createdAt)
    {
        $this->createdAt = $createdAt;
        return $this;
    }

    /**
     * Get createdAt
     *
     * @return int $createdAt
     */
    public function getCreatedAt()
    {
        return $this->createdAt;
    }

    /**
     * @MongoDB\PrePersist
     */
    public function prePersist()
    {
        $this->setCreatedAt(time());
        $slugService = new SlugService();
        $this->setSlug($slugService->slug($this->getName()));       
    }

    /**
     * @MongoDB\PreUpdate
     */
    public function preUpdate()
    {
        $slugService = new SlugService();
        $this->setSlug($slugService->slug($this->getName()));       
    }

} 
```

当我尝试将对象持久保存在控制器 action_ 中时，表单崩溃

```
$this->persist($family); 
```

我尝试了很多选择，但没有一个效果好。如果你有什么想法，请回复。

# sql-server - 的意思 ; 在查询中

> ID：13157750
> 
> 赞同：0
> 
> 时间：2012-10-31T12:15:49.957
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

是什么意思 ; 在查询结束时？

例如; 有什么区别：

```
select 1
select 2 
```

和

```
select 1;
select 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:17:08.443

“来自 Ken Powers 的 SQLServerCentral.Com 文章：

分号

分号字符是语句终止符。它是 ANSI SQL-92 标准的一部分，但从未在 Transact-SQL 中使用。确实，有可能在不遇到分号的情况下编写 T-SQL 多年。

用法

有两种情况必须使用分号。第一种情况是您使用公用表表达式 (CTE)，而 CTE 不是批处理中的第一个语句。第二个是您发出 Service Broker 语句，而 Service Broker 语句不是批处理中的第一个语句。”

这是来自[我什么时候应该在 SQL Server 中使用分号？](https://stackoverflow.com/questions/710683/when-should-i-use-semicolons-in-sql-server)这可能是您正在寻找的

这又是“直接剪切和粘贴”

我认为这可能是一个笑话的堆栈溢出版本。

编辑： ; 也在合并语句之后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:19:39.867

使用 ; 是结束一个语句并开始另一个语句的正确方法。如果您不使用 ; 你可能会得到意想不到的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:50:21.547

列出“必需”的情况总是容易被遗漏。除了通用表表达式和 SSB 之外，还有其他情况，解析器无法处理没有分号终止前一个语句的情况，例如[`THROW`](http://msdn.microsoft.com/en-us/library/ee677615.aspx)或[WITH XMLNAMESPACES](http://msdn.microsoft.com/en-us/library/ms177607.aspx)并且列表必然会增长。

正确答案是：分号终止符是**必需**的，并且在编写新代码时应始终放置。时期。忽略它们是*可以容忍*的，但在[官方弃用列表中](http://msdn.microsoft.com/en-us/library/ms143729.aspx)：

> 不推荐使用的功能：Transact-SQL 不以分号
> 结束 Transact-SQL 语句替换：以分号 (;) 结束 Transact-SQL 语句。

忽略这个弃用警告是你自己的危险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:17:26.823

表示一条Sql语句的结束。

# asp.net - 验证 ASP.NET Web API 中的可选参数

> ID：13157751
> 
> 赞同：2
> 
> 时间：2012-10-31T12:15:48.883
> 
> 标签：asp.net, validation, asp.net-web-api, model-binding

如何验证 ASP.NET Web API 中可选参数的数据类型？

我的路由如下所示：

```
context.MapHttpRoute(
    name: "ItemList",
    routeTemplate: "api/v1/projects/{projectId}/items",
    defaults: new
        {
            area = AreaName,
            controller = "Items",
            action = "GetItems",
            offset = RouteParameter.Optional,
            count = RouteParameter.Optional,
        }
); 
```

这些都是有效的请求：

```
http://localhost/api/v1/projects/1/items  
http://localhost/api/v1/projects/1/items?offset=20  
http://localhost/api/v1/projects/1/items?count=10  
http://localhost/api/v1/projects/1/items?offset=20&count=10 
```

一切正常，除非为其中一个参数提供了无效值。例如，

```
http://localhost/api/v1/projects/1/items?count=a 
```

没有验证错误，计数只是变为空。

有没有办法检测到这一点并返回错误消息？我想我记得在某个地方看到了一个带有自定义消息处理程序的解决方案，但我再也找不到它了。

控制器方法如下所示：

```
public IEnumerable<Item> GetItems([FromUri]GetItemsParams getItemsParams)
{
    // logic
} 
```

params 类如下所示：

```
[DataContract]
public class GetItemsParams
{
    [DataMember] public int? offset { get; set; }
    [DataMember] public int? count { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:08:16.893

听起来你会想要添加约束。约束在[此处](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection "这里")记录，用于确保您的路径中有有效输入。如果违反了约束，就好像控制器/动作不匹配，因此不被调用。约束可以是正则表达式，如下例所示，或者可以通过实现一个类来定制`IRouteConstraint`

例如：

```
context.MapHttpRoute(
    name: "ItemList",
    routeTemplate: "api/v1/projects/{projectId}/items",
    defaults: new
        {
            area = AreaName,
            controller = "Items",
            action = "GetItems",
            offset = RouteParameter.Optional,
            count = RouteParameter.Optional,
        },
     constraints: new
        {
            offset = @"\d+",
            count = @"\d+"
        }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T20:45:54.973

只需将模型验证添加到您的方法或控制器，您将自动获得所需的内容：

```
[ValidateModel]
public IEnumerable<Item> GetItems([FromUri]GetItemsParams getItemsParams)
{
    // logic
} 
```

现在当调用

```
http://localhost/api/v1/projects/1/items?count=a 
```

您将收到一条错误消息：

```
{"Message":"The request is invalid.","ModelState":{"getItemsParams.offset":["The value 'a' is not valid for offset."]}} 
```

阅读[有关模型验证的完整故事](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api)。

# objective-c - 我应该如何构建 Core Data 来制作单位转换器？

> ID：13157759
> 
> 赞同：1
> 
> 时间：2012-10-31T12:16:30.253
> 
> 标签：objective-c, ios, core-data

我正在开发一个单位转换器应用程序，我希望能够转换几类对象（长度、高度、质量、温度等）。我还想使用核心数据来存储转换因子，所以我不会编写数百个 if 语句。我应该如何构建我的数据模型？我应该为每个类别的转化创建一个实体吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:30:01.840

创建一个类`Category`，它将有一个字符串`name`（长度、质量、电荷等）和与 的多对一关系`Unit`，它将具有`name`、`abbreviation`和`factor`。每个类别中的因素显然需要缩放到一个共同的单位。然后，您可以附带一个数据库，并为用户提供添加他们自己的单元的机会，如果他们需要一个您没有提供的单元。

# c# - SQLite 自动增量问题

> ID：13157760
> 
> 赞同：1
> 
> 时间：2012-10-31T12:16:37.197
> 
> 标签：c#, sql, database, sqlite

我在 C# 中创建了一个 SQLite 数据库，并使用该查询创建了一个表。

```
string q = "create table mains ( id int IDENTITY, desc varchar(20), PRIMARY KEY(id) )"; 
ExecuteQuery(q); 
```

我尝试添加这样的记录：

```
string txtSQLQuery = "insert into  mains (desc) values ('" + textBox1.Text + "')";
ExecuteQuery(txtSQLQuery); 
```

我只是添加了一个 desc 而不是 ID ，我想它应该自动增加 id 字段，但它没有。相反，每次我添加新记录时，它都会添加 desc 并且 ID 字段为空

编辑：我尝试使用：

```
id int PRIMARY KEY AUTOINCREMENT 
```

但得到错误：

```
SQLite.SQLiteException: near "AUTOINCREMENT": 
```

编辑 2：当我加载记录时，我明白了：

![在此处输入图像描述](../Images/95ea7f55e4b31cfe7fb403337c1796aa.png)

ID 字段中根本没有数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:18:51.067

尝试

```
create table mains (id INTEGER  PRIMARY KEY, desc varchar(20)) 
```

> 声明为 INTEGER PRIMARY KEY 的列将自动递增。

[取自 sqlite.org](http://www.sqlite.org/faq.html#q1)

[SQLFiddle 示例](http://sqlfiddle.com/#!7/65cd3/1)

## 编辑

作为替代尝试执行

```
string txtSQLQuery = "insert into mains (id, desc) values (NULL, '" + textBox1.Text + "')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:20:46.713

IDENTITY 不是 SQLite 语言的一部分。改用 AUTOINCREMENT：

```
 create table mains ( id int AUTOINCREMENT, desc varchar(20), PRIMARY KEY(id) ) 
```

或者

```
 create table mains ( id int PRIMARY KEY AUTOINCREMENT, desc varchar(20)) 
```

# c# - 在 IIS 服务器之间传递 Windows 身份验证

> ID：13157762
> 
> 赞同：2
> 
> 时间：2012-10-31T12:16:39.273
> 
> 标签：c#, asp.net, wcf, iis, active-directory

我有一个 ASP.NET Web 应用程序，它使用基于 WCF IIS 的后端服务。

我可以对 Web 应用程序使用 Active Directory 身份验证，但我也想在 WCF 服务（位于另一台 IIS 服务器上）上使用它。

是否可以仅通过配置来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:48:28.777

解决了。在 Web 应用程序配置集中：

```
<security mode="TransportCredentialOnly">
    <transport  clientCredentialType="Windows"/>
    <message clientCredentialType="UserName" algorithmSuite="Default"/>            
 </security> 
```

在 WCF 部分：

```
<bindings>
<basicHttpBinding>
     <binding>
         <security mode="TransportCredentialOnly">
             <transport clientCredentialType="Windows"/>
         </security>
     </binding>
</basicHttpBinding>
</bindings> 
```

事情是我需要多睡觉。

# c# - ASP.NET 应用程序的磁盘空间不足

> ID：13157764
> 
> 赞同：5
> 
> 时间：2012-10-31T12:16:41.833
> 
> 标签：c#, asp.net, iis

我在安装了 .NET 4.0 的 Windows IIS 机器上进行了以下设置。2个驱动器，C和D。包含我的网站的inetpub文件夹位于D驱动器上。
我唯一的网站将附件保存到 D 盘。
我的 C 驱动器上没有空间（为了争论，0kb）。

当 C 盘没有空间时，为什么尝试通过网站将附件“上传”到 D 盘时会出现以下错误？例如，.NET 是否首先将其复制到 C 驱动器上的临时文件夹中？

这是错误：

```
[IOException: There is not enough space on the disk.
]
   System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +9718418
   System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count) +9555882
   System.IO.FileStream.Write(Byte[] array, Int32 offset, Int32 count) +146
   System.Web.TempFile.AddBytes(Byte[] data, Int32 offset, Int32 length) +32
   System.Web.HttpRawUploadedContent.AddBytes(Byte[] data, Int32 offset, Int32 length) +8788874
   System.Web.HttpRequest.GetEntireRawContent() +9035719
   System.Web.HttpRequest.GetMultipartContent() +68
   System.Web.HttpRequest.FillInFormCollection() +247
   System.Web.HttpRequest.get_Form() +104
   System.Web.HttpRequest.get_HasForm() +9036655
   System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +97
   System.Web.UI.Page.DeterminePostBackMode() +69
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +135 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T12:19:51.763

IIS 使用的临时文件夹位于 C 驱动器上。那是导致此问题的原因。

IIS 正在尝试将文件写入临时文件，该文件通常位于`C:\Windows\Microsoft.net\Framework\<version>\Temporary ASP.NET Files`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-18T07:23:23.030

在搜索文本框中键入“运行”并按 Enter 按钮，然后单击“运行”。现在在 Run 文本框中输入 %temp% ，然后按 OK 按钮。现在它将打开所有临时文件位置，即“C:\Users\ASUS\AppData\Local\Temp” 现在尽可能删除该文件夹的所有文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T02:55:45.193

甚至，当我运行我的 wcf 服务时，我也遇到了同样奇怪的错误。从 C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET 文件中删除临时 asp.net 文件后。我又能跑了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-11T12:45:32.607

以管理员身份运行它，使用右键菜单。如有必要，重新启动计算机。这对我很有帮助。

# javascript - 将点击转换为 onmouseover javascript

> ID：13157767
> 
> 赞同：0
> 
> 时间：2012-10-31T12:16:52.760
> 
> 标签：javascript, html, css

我想将点击事件更改为 onmouseover 事件以打开我的 div，然后如果鼠标离开我的 div 再次隐藏，就像下拉菜单一样，谁能帮助我。

HTML 代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Papermashup.com | Sliding Div</title>
<script src="jquery.js" type="text/javascript"></script>
<script src="dropdown/drop.js" type="text/javascript"></script>
<link type="text/css" href="dropdown/drop.css" rel="stylesheet"/>

</head>

<body>
 <a href="#" class="show_hide" onmouseover="this.#" >Show/hide</a><br />
    <div class="slidingDiv" style="width:103px;height:60px;">
        <img alt="" height="80" src="images/dropdown.png" width="103">
    </div>
</body>
</html> 
```

CSS 代码：

```
.show_hide {
    display:none;
} 
```

JavaScript 代码：

```
$(document).ready( function() {

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click( function() {
         $(".slidingDiv").slideToggle();
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:18:16.713

尝试

```
 $(".show_hide").mouseenter(function() {
       $(".slidingDiv").slideToggle();
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:18:57.753

只需使用[鼠标悬停](http://api.jquery.com/mouseover/)绑定而不是单击绑定。

```
$('.show_hide').mouseover(function(){
    $(".slidingDiv").slideToggle();
}).mouseout(function(){
    $(this).slideToggle();
}); 
```

# c - 16位寄存器的SSE无符号/有符号减法

> ID：13157773
> 
> 赞同：2
> 
> 时间：2012-10-31T12:17:17.097
> 
> 标签：c, performance, sse

我有一个具有 16 位值的 __m128i 寄存器（向量 A），其内容为：

```
{100,26,26,26,26,26,26,100} // A Vector 
```

现在我减去向量

```
{82,82,82,82,82,82,82,82} 
```

随着指示

```
_mm_sub_epi16(a_vec,_mm_set1_epi16(82)) 
```

预期的结果应该是以下向量

```
{18,-56,-56,-56,-56,-56,-56,18} 
```

但我明白了

```
{18,65480,65480,65480,65480,65480,65480,18} 
```

如何解决向量被视为已签名的问题？

A Vector 是由以下指令创建的：

```
__m128i a_vec = _mm_srli_epi16(_mm_unpacklo_epi8(score_vec_8bit, score_vec_8bit), 8) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:18:25.683

`65480``-56`与（它们都在寄存器级别）相同的值`0xffc8`-您只是将其*显示*为无符号短。

请注意，对于没有进位/借位标志的二进制值的非饱和加法和减法，这些值是有符号还是无符号确实无关紧要 - 因此可以使用相同的指令来添加有符号和无符号的短裤 - 唯一的区别是你如何随后解释（或显示）结果。

# xml - 将超链接添加到 indesign

> ID：13157778
> 
> 赞同：2
> 
> 时间：2012-10-31T12:17:32.393
> 
> 标签：xml, hyperlink, adobe-indesign

我对 Adob​​e Indesign 还很陌生，但我对各种编码语言都很好。

我想创建一个基于 Web 的文档，其中列出了一些产品和产品描述，每个产品描述都充当在线产品本身的超链接。

我已经创建了列出我想通过 XML 导入的各种属性的 XML，但是我在定义 URL 以充当超链接时遇到了麻烦。

我当前的 xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>

<list>

<product href="http://www.google.co.uk">
<BrandName>Brand 1</BrandName>
<Title>Shirt</Title>
<FullPrice>£25</FullPrice>
<ProductCode>ABC123</ProductCode>
</product>

<product href="http://www.google.co.uk">
<BrandName>Brand 2</BrandName>
<Title>Jacket</Title>
<FullPrice>£20</FullPrice>
<ProductCode>DEF456</ProductCode>
</product>

</list> 
```

但是，它只是行不通。我可能错过了一些非常简单的东西，但我目前不知所措。

我只想能够将结构中的元素拖到我的页面上，保存为 PDF 并知道每个产品都将链接到相关的超链接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:59:20.050

XML 与 InDesign DOM 对象断开连接。您必须明确定义哪个 XML 元素与哪个 InDesign 对象一起使用，通常是通过标记。通过给`product`XML 元素一个`href`属性，您实际上并没有告诉 InDesign 它是一个超链接。

为了告诉 InDesign 它*是*一个超链接，您可以使用 InDesign javascript 引擎循环遍历每个`product`XML 元素，并根据元素的属性将超链接应用于文本。

这是一个例子：

```
#include "./XML Rules/glue code.jsx"

main();

function main() {
   var doc = app.activeDocument;
   var elems = doc.xmlElements;
   var ruleSet = new Array (new Rule);
   __processRuleSet(elems[0], ruleSet);

   function Rule() {
      this.name = "Rule";
      this.xpath = "//product[@href]";
      this.apply = function(elem, ruleProcessor) {
         var elemText = elem.texts[0];
         var linkURL = elem.xmlAttributes.itemByName("href").value;
         var linkSource = doc.hyperlinkTextSources.add(elemText);
         var linkDest = doc.hyperlinkURLDestinations.add(linkURL);
         doc.hyperlinks.add(linkSource, linkDest);
         return true;
      }
   }
} 
```

可能有更简单的方法，但我不知道。

# android - Android：应用程序在某些国家/地区不可见

> ID：13157779
> 
> 赞同：2
> 
> 时间：2012-10-31T12:17:33.720
> 
> 标签：android, google-play

我在 Play 商店中有一个免费的 Android 应用程序。我的一位来自马尔代夫（一个国家）的用户抱怨说他无法下载该应用程序。错误消息：“应用程序不适用于您所在的国家/地区”。

我在我的开发者帐户中检查了所有国家。马尔代夫不在国家列表中。用户正在获取我的其他竞争对手应用程序。

谁能告诉我如何解决这个问题？

# java - 如何在小程序中完成 java.exe 进程？

> ID：13157780
> 
> 赞同：0
> 
> 时间：2012-10-31T12:17:34.547
> 
> 标签：java, process, applet, java-native-interface

HTML 页面上有一个小程序。该小程序加载一个 dll 库并通过它与外部应用程序通信。我可以成功加载并使用该库。该库具有函数`INIT()`和`DEINIT()`.

问题是当我尝试再次调用这些函数时，外部应用程序/库说只有一个进程可以访问该应用程序。这是内部检查。所以我需要一种方法来停止 Java 进程以便再次启动应用程序。但是如果我启动一次小程序，Java 进程直到我关闭浏览器选项卡（甚至整个浏览器）才完成。

有没有办法在浏览器选项卡范围内停止 Java 进程？我需要在 HTML 页面中的小程序出现时立即启动 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:01:45.210

您无法从小程序中停止 JVM，它由浏览器管理。

您可能会考虑改用 Java Web Start 应用程序，它是在自己的 VM 中启动的。

# php - 任何人都可以使用 PHP 解密这个字符串吗？

> ID：13157785
> 
> 赞同：7
> 
> 时间：2012-10-31T12:17:45.747
> 
> 标签：php, encryption

今天我看到一个招聘广告，你应该使用 PHP 解密一个包含有效电子邮件地址的字符串。所以他们发布了这个字符串，代表加密的电子邮件地址，当您解密该电子邮件地址时，您可以向他们发送电子邮件并表明您是高级 PHP 开发人员。他们还为初级开发人员发布了另一个电子邮件地址。

现在这对我来说似乎很复杂，所以我无论如何都不会向他们发送电子邮件，因为我已经有工作了，但我想知道这是否可能，因为如果使用 mcrypt 函数你就不能拥有密钥。

无论如何，这是字符串：MDA3MTY4MDAwODg4MDE0NzIwMDAwMzg4MDAwNDQ0MDAwNTEyMDAwMzg4MDI1NjAwMDA3NDg4MDA3Mjk2MDAzNTUyMDAyOTQ0MDAwODMyMDAzNjQ4IzYzNzIyMzI4NjY1NjM1

公司名称是 Aduro，他们的电子邮件是 xxx@aduro.hr，所以我们正在寻找以 @aduro.hr 结尾的电子邮件

该字符串代表有效的电子邮件地址，是否有人足以解密？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:15:30.543

不是答案，而是一些观察：

```
MDA3MTY4
MDAwODg4
MDE0NzIw
MDAwMzg4
MDAwNDQ0
MDAwNTEy
MDAwMzg4
MDI1NjAw
MDA3NDg4
MDA3Mjk2
MDAzNTUy
MDAyOTQ0
MDAwODMy
MDAzNjQ4
IzYzNzIy
MzI4NjY1
NjM1 
```

包含数字的每一列仅包含数字和小写字母。包含大写字母的每一列都不包含任何数字。

如果它是一个电子邮件地址，那么我会暂时指定`IzYzNzIy`为点字符'。' 没有什么能像“@”那样让我立即感到震惊，可能是`MDI1NjAw`因为它是唯一一个以 . 开头的`MDI`。另一个非`MDA`, `MDE0NzIw`, 在某人名字中的标点符号的正确位置：“Smith-Jones”说。这会将所有`MDA`s 保留为字母字符。潜在点之后发生的事情是任何人的猜测。那里允许使用任何单字母代码吗？ `NjM1`可以是 <CR><LF> 的缩写。

也许我们正在查看四个字符代码元素？

```
MDA3
MTY4
MDAw
ODg4
MDE0
NzIw
etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:21:53.743

你为什么在想`mcrypt`？它可以是任何东西。看起来像一个`base64_encode`d 字符串。或者是其他东西。我认为他们只是不想要来自“高级”开发人员的邮件。

# iphone - 如何创建临时分发文件？

> ID：13157792
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:18:03.047
> 
> 标签：iphone, ios, cocoa, app-store

我只有设备的 UDID，我想创建一个临时分发文件。我在苹果上有一个开发者帐户。所以帮我解决这个问题：-

1.  我需要 iOS 设备来创建应用程序文件吗？如果没有，那我该怎么做？
2.  我可以在不连接到我的机器的情况下使用我的客户 UDID 来提供文件吗？
3.  创建配置文件的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:27:57.913

1.  您不需要 iDevice 来创建 ipa 文件
2.  您可以使用 UDID 进行配置，而无需将其连接到您的设备
3.  要创建配置文件，请参阅[CreatingandDownloadingDevelopmentProvisioningProfiles](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html)

F**或创建一个 ipa 以在设备上对其进行测试：* *

1.  创建配置文件：[创建配置文件](http://www.dummies.com/how-to/content/how-to-create-an-apple-development-provisioning-pr.html)
2.  创建开发证书并安装
3.  归档您的应用程序[Ipa Creation](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/)

给你一个很好的[教程](http://my.safaribooksonline.com/book/programming/iphone/9781449394004/preparing-your-iphone/creating_a_development_certifi#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODE0NDkzOTQwMDQlMkYxMQ==)。

# objective-c - 更改 NavigationBar 色调颜色

> ID：13157793
> 
> 赞同：1
> 
> 时间：2012-10-31T12:18:10.033
> 
> 标签：objective-c, ios, cocoa-touch

有很多关于这个主题的条目都有非常不同的答案并且放弃了，因为我已经厌倦了所有这些都不起作用。

如果我想在页面加载时更改导航栏的色调，为什么这段代码不够用？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.tintColor=[UIColor greenColor];

    // Do any additional setup after loading the view.
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:58:27.577

我看不出代码不够用的理由。

我刚刚在一个新的主从应用程序上对其进行了测试。它完美地工作！

我可能没有解决你的问题，但是这行代码看起来不错。

# android - 无法通过 `cls.newInstance()` 创建异步任务的实例？

> ID：13157795
> 
> 赞同：5
> 
> 时间：2012-10-31T12:18:12.547
> 
> 标签：android, android-asynctask, instantiation

安卓代码很简单：

```
public void createNewTask(View v) {
    try {
        MyTask task = MyTask.class.newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

private class MyTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {
        return null;  
    }
} 
```

但是在调用`createNewTask`方法时，会抛出异常：

```
Caused by: java.lang.RuntimeException: 
    java.lang.InstantiationException: com.example.MyActivity$MyTask
    at com.example.MyActivity.createNewTask(MyActivity.java:214)
    ... 14 more
    Caused by: java.lang.InstantiationException: com.example.MyActivity$MyTask
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1440)
    at com.example.MyActivity.createNewTask(MyActivity.java:211) 
```

但是，如果我选择其他课程，例如

```
MyActivity task = MyActivity.class.newInstance(); 
```

一切都会好起来的。

我的代码哪里出错了？我在带有 android 2.3.6 的 android 手机中对其进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:35:59.737

找到了两种方法来解决这个问题：

```
public static class MyTask {
} 
```

或者

```
private static class MyTask {
    public MyTask(){}
} 
```

根据[文件](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)：

> InstantiationException - 如果这个 Class 表示抽象类、接口、数组类、原始类型或 void；或者如果该类没有空构造函数；或者如果实例化由于某种其他原因而失败。

尝试将 nullary 构造函数添加到您的类：

```
public MyTask() {} 
```

**编辑**

根据[此文档](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)：

> Class.newInstance() 要求构造函数是**可见**的；Constructor.newInstance() 在某些情况下可能会调用私有构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:25:23.680

我想，原因是`AsyncTask`抽象类，但`Activity`不是。

而且私人课程不能像你一样被实例化

# php - 如何在php中打印一个javascript变量？

> ID：13157805
> 
> 赞同：-3
> 
> 时间：2012-10-31T12:18:41.047
> 
> 标签：php, javascript

> **可能重复：**
> [如何将 javascript 变量放入 php echo](https://stackoverflow.com/questions/10853630/how-to-put-javascript-variable-in-php-echo)

我有 JavaScript 来获取时间，代码如下。

```
<script type="text/javascript">

var d = new Date();

var H = d.getHours();
var m = d.getMinutes();
if(H>11)
{
    var h = H-12;
    var a = 'PM';
}
else
{
    var h = H;
    var a = 'AM';
}

</script> 
```

现在，我想在 PHP 中打印 JavaScript 中使用的变量，例如，

```
<?php echo $h.$m; ?> 
```

可能吗？

如果是，那么请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:26:53.873

Javascipt 运行在客户端，php 运行在服务器上...如果你只是想在浏览器中打印 var

```
var varName = "varValue";
document.write(varName); 
```

如果您需要将 javascript var 发送到 php，则需要使用 jquery 或 javscript 将其发送到服务器，然后返回数据...

```
$.post("yourFile.php", { varName: "varValue" },
function(data) {
   //print the data coming from yourFile.php
   document.write(data); 
```

});

如果您只需要将 var 发送到服务器

```
 $.post("yourFile.php", { hour: "hour", min: "min", sec:"sec" } ); 
```

# java - Spring Form 标签错误（绑定结果）

> ID：13157808
> 
> 赞同：0
> 
> 时间：2012-10-31T12:18:43.627
> 
> 标签：java, spring

我正在自学 Spring Form 标签，并且遇到了可能是我无法解决的简单错误。在浏览器中启动此应用程序时出现以下错误：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'index' available as request attribute 
```

我已经尝试了 Google 搜索中出现的大多数修复程序，但均无济于事。有人能发现我哪里出错了吗？以下是相关组件。非常感谢。

控制器：

```
@Controller
@RequestMapping("/registration")
public class LoginController {

    @RequestMapping(method = RequestMethod.GET)
    public String setupForm(ModelMap model) {
        Registration registration = new Registration();
        model.addAttribute("registration", registration);
        return "index";

    }

    @RequestMapping(method = RequestMethod.POST)
    public String onSubmit(@ModelAttribute("registration") Registration registration, Map model) {
        return "success";
    }
} 
```

JSP (/index.jsp):

```
 <form:form commandName="index">
        <table border="0" cellspacing="12">
            <tr>
                <td>
                    <form:input path="email"/>
                </td>
            </tr>

            <tr>
                <td>
                    <form:password path="password"/>
                </td>
            </tr>

            <tr>
                <td>
                    <input type="submit" value="Submit"/>
                </td>
            </tr>
        </table>
    </form:form> 
```

命令对象（Registration.java）：

```
public class Registration {
    private String password;
    private String email;
    // getters,setters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T16:21:14.443

几天前面临同样的问题，我从命中和跟踪中了解到的是，索引页面是一个静态页面，在渲染之前没有进行任何处理。如果我想在索引页面中使用表单模型绑定，我应该有一个控制器的处理程序方法，它将创建一个注册对象并在渲染 index.jsp 之前将其放置在 ModelAndView 中

在您的控制器中添加一个方法，如下所示并尝试

```
@RequestMapping(method = RequestMethod.GET, value="/")
public ModelAndView initiate(){
ModelAndView objModView = new ModelAndView("/index.jsp");
objModView.addObject("registration",new Registration());
return objModView;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:28:51.297

在您的索引页面中更正以下内容并尝试

`<form:form commandName="index">`到`<form:form commandName="registration">`

如果上述方法不起作用，您也可以这样做

`<form:form modelAttribute="registration" commandName="registration">`

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T23:07:32.593

看到的错误是因为当您提交表单时，您必须有一个与 @ModelAttribute 注释关联的绑定结果。

尝试将您的代码更改为：

```
 @RequestMapping(method = RequestMethod.POST)
    public String onSubmit(@ModelAttribute("registration") Registration registration, BindingResult result, Map model){
          return "success";
       } 
```

另请注意，绑定结果对象应紧跟在模型属性之后。

如果你使用两个@ModelAttributes，那么每个都应该有它自己的绑定结果对象。

请参阅 spring 源代码指南以获取所有相关文档

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html)

# django - 使用 args 和选项编写自定义管理命令 - 所需字段说明

> ID：13157809
> 
> 赞同：32
> 
> 时间：2012-10-31T12:18:49.643
> 
> 标签：django, command

在我的 django 应用程序中，我正在编写一个自定义管理命令，它将根据传递的参数创建一个对象的实例，并可以根据是否传递一个选项将其保存到数据库中`--save`。

我从[django 文档](https://docs.djangoproject.com/en/2.2/howto/custom-management-commands/)本身得到了很多帮助。[从这里](https://stackoverflow.com/questions/10568864/two-arguments-in-django-admin-custom-command)也得到了关于如何传递多个参数和[这里](https://stackoverflow.com/questions/4208006/how-does-one-use-django-custom-management-command-option)关于如何有选项的重要指示。

```
from optparse import make_option

class Command(BaseCommand):
  option_list = BaseCommand.option_list + (
    make_option('--delete',
        action='store_true',
        dest='delete',
        default=False,
        help='Delete poll instead of closing it'),
    )

  def handle(self, *args, **options):
    # ...
    if options['delete']:
        poll.delete()
    # ... 
```

但是，我无法找到 make_option 中字段的详细说明。例如[optparse.make_option](http://nullege.com/codes/search/optparse.make_option)列表

```
Instance attributes:
_short_opts : [string]
_long_opts : [string]

action : string
type : string
dest : string
default : any
nargs : int
const : any
choices : [string]
callback : function
callback_args : (any*)
callback_kwargs : { string : any }
help : string
metavar : string 
```

这`help`是不言自明的，我想出了什么`dest`意思，但我不清楚是什么`action='store_true'`意思。事实上，如果有人能给我一个简短的描述所有论点的`make_option`含义，那就太好了......

非常感谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-31T13:22:51.567

## [文档http://docs.python.org/2/library/optparse.html#populating-the-parser](http://docs.python.org/2/library/optparse.html#populating-the-parser)中对 make_option 的解释

> make_option() 是用于创建 Option 实例的工厂函数；目前它是 Option 构造函数的别名。optparse 的未来版本可能会将 Option 拆分为多个类，并且 make_option() 将选择正确的类进行实例化。不要直接实例化 Option。

## 这些是所有可能的选项属性：

[http://docs.python.org/2/library/optparse.html#option-attributes](http://docs.python.org/2/library/optparse.html#option-attributes)

## django管理命令中的常见用法：

```
class Command(BaseCommand):
    help = "Command to import a list of X"
    option_list = BaseCommand.option_list + (
        make_option(
            "-f", 
            "--file", 
            dest = "filename",
            help = "specify import file", 
            metavar = "FILE"
        ),
    )

    option_list = option_list + (
        make_option(
            "-s", 
            "--slug", 
            dest = "category",
            help = "category slug", 
            metavar = "SLUG"
        ),
    )

    def handle(self, *args, **options):
            # make sure file option is present
            if options['filename'] == None :
                raise CommandError("Option `--file=...` must be specified.")

            # make sure file path resolves
            if not os.path.isfile(options['filename']) :
                raise CommandError("File does not exist at the specified path.")

            # make sure form option is present
            if options['category'] == None :
                raise CommandError("Option `--slug=...` must be specified.") 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-31T13:04:52.633

[optparse 文档](http://docs.python.org/2/library/optparse.html#defining-options)可能会更有帮助。您基本上是在告诉管理功能您需要的每个选项应该做什么。

关键字是最[`action`](http://docs.python.org/2/library/optparse.html#optparse-standard-option-actions)能说明问题的，它配置了你想用那个选项做什么——它只是一个标志来做一些特殊的事情（a `callback`，即'--enable-feature'）还是它应该接受一个参数，例如（`store`，即'-事情 10'）。

考虑到这一点，考虑到这一点，其余选项会更有意义。通读[“选项属性”](http://docs.python.org/2/library/optparse.html#option-attributes)以了解您列出的内容，然后[“操作”](http://docs.python.org/2/library/optparse.html#standard-option-actions)以查看我上面提到的内容

# php - routes.php 和控制器（codeigniter）

> ID：13157811
> 
> 赞同：0
> 
> 时间：2012-10-31T12:18:51.193
> 
> 标签：php, codeigniter, codeigniter-routing

我有两个控制器 1- 站点 2- 管理

第一个控制器（站点）工作成功，第二个控制器（管理）不工作。

我不知道是什么错误

我更改了 routes.php 但仍然不起作用（管理）

```
$route['default_controller'] = "site";
$route['(:any)'] = "site/$1";
$route['Administration'] = "Administration/index";
$route['Administration/([a-z])'] = 'Administration/$1'; 
```

此链接有效：

> example.com/hotel/12312
> 
> example.com/contact
> 
> example.com/city/newyork
> 
> example.com/Administration

但是这个链接不起作用：

> example.com/Administration/hotels
> 
> example.com/Administration/add_new
> 
> example.com/Administration/cities

请问问题出在哪里，因为我厌倦了解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:25:08.020

这与您给出路线指令的顺序有关。代码点火器从上到下路由请求，因此如果您希望 $route['Administration'] 位于 $route['(:any)'] 之前，则必须先设置它。

> ```
> $route['default_controller'] = "site";
> $route['Administration/([a-z])'] = 'Administration/$1';
> $route['Administration'] = "Administration/index";
> $route['(:any)'] = "site/$1"; 
> ```

我总是建议将 (:any) 路线放在最后，这样它们就不会覆盖更具体的路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:07:11.703

我遇到了同样的问题，我得到了这个工作：

```
$route['default_controller'] = "welcome";
$route['([a-z-A-Z1-9_]+)'] = "site";
$route['management']="management";
$route['404_override'] = ''; 
```

它可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:22:09.523

我不熟悉 Codeigniter 路由，但在我看来，一切都`$route['(:any)'] = "site/$1";`在到达您的管理路由之前匹配。尝试将其移至其他所有内容下方...您可能还必须切换管理路线`([a-z])`以匹配

```
$route['default_controller'] = "site";
$route['Administration/([a-z])'] = 'Administration/$1';
$route['Administration'] = "Administration/index";
$route['(:any)'] = "site/$1"; 
```

# php - python按列名获取数组中的元素，如php

> ID：13157812
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:18:52.747
> 
> 标签：php, python, arrays

我希望能够执行以下代码（即 PHP）之类的操作：

```
while($row = mysql_fetch_array($result)){
    $name = $row['name'];
    $event = $row['event']; 
```

在蟒蛇。所以通过它的索引来获取一个元素。什么是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:21:55.497

是的，使用内置类型的[字典。](http://docs.python.org/2/library/stdtypes.html#dict)

```
d = {'name': 'user'}
print d['name']
user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:38:14.070

您使用 MySQLdb 包中的 DictCursor 对象。这将在结果集中生成字典（映射）而不是通常的元组。

```
import MySQLdb                                                                                                                      
from MySQLdb import cursors

def fetchallmap(self, q, *args):                                                                                                
    """Fetch all rows into a dictionary.                                                                                        
    """                                                                                                                         
    curs = self._connection.cursor(cursors.DictCursor)                                                                                   
    curs.execute(q, args)                                                                                                       
    res = curs.fetchall()                                                                                                       
    curs.close()                                                                                                                
    self._connection.commit()                                                                                                            
    return res 
```

这将返回一个字典列表（映射）。如果您只想要一行，只需替换`fetchoone`而不是`fetchall`.

```
def fetchonemap(self, q, *args):                                                                                                
    """Fetch one row into a dictionary.                                                                                         
    """                                                                                                                         
    curs = self._connection.cursor(cursors.DictCursor)                                                                                   
    curs.execute(q, args)                                                                                                       
    res = curs.fetchone()                                                                                                       
    curs.close()                                                                                                                
    self._connection.commit()                                                                                                            
    return res 
```

# java - 为什么 Intellij IDEA 突然不再识别测试文件夹中的测试了？

> ID：13157815
> 
> 赞同：50
> 
> 时间：2012-10-31T12:19:05.900
> 
> 标签：java, junit, intellij-idea

自从我开始这个项目以来，我一直在使用 JUnit，一切正常。我有几百个测试，当然，我在这里和那里都开始了。右键单击根测试文件夹，使用 JUnit 运行（或调试）。但是从昨天开始，当我这样做时，结果是：

```
Process finished with exit code 0 
```

无需开始任何测试。文件夹树中的任何文件夹也是如此。我仍然可以运行一个测试类，但我真的需要一个选项来启动它们。如果你们有任何想法，请把它们放在这里。

这是我尝试运行测试时记录的内容：

```
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - IntelliJ IDEA 11.1.2  Build #IU-117.418 
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - JDK: 1.6.0_31 
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - VM: Java HotSpot(TM) Client VM 
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - Vendor: Sun Microsystems Inc. 
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - OS: Windows 7 
2012-10-31 15:16:55,693 [2727217]  ERROR - ij.psi.impl.source.PsiFileImpl - Last Action: RunClass 
2012-10-31 15:16:55,693 [2727217]  ERROR - m.intellij.util.ExecutorsQuery - com.intellij.psi.tree.IFileElementType cannot be cast to com.intellij.psi.tree.IStubFileElementType 
java.lang.ClassCastException: com.intellij.psi.tree.IFileElementType cannot be cast to com.intellij.psi.tree.IStubFileElementType
    at com.intellij.psi.impl.source.PsiFileImpl.calcStubTree(PsiFileImpl.java:976)
    at com.intellij.psi.stubs.StubIndexImpl$1.perform(StubIndexImpl.java:239)
    at com.intellij.psi.stubs.StubIndexImpl$1.perform(StubIndexImpl.java:220)
    at com.intellij.util.indexing.ValueContainer.forEach(ValueContainer.java:60)
    at com.intellij.psi.stubs.StubIndexImpl.process(StubIndexImpl.java:220)
    at com.intellij.psi.stubs.StubIndexImpl.get(StubIndexImpl.java:194)
    at com.intellij.psi.stubs.AbstractStubIndex.get(AbstractStubIndex.java:33)
    at com.intellij.psi.impl.java.stubs.index.JavaAnnotationIndex.get(JavaAnnotationIndex.java:47)
    at com.intellij.psi.impl.search.AnnotatedElementsSearcher.a(AnnotatedElementsSearcher.java:93)
    at com.intellij.psi.impl.search.AnnotatedElementsSearcher.execute(AnnotatedElementsSearcher.java:44)
    at com.intellij.psi.impl.search.AnnotatedElementsSearcher.execute(AnnotatedElementsSearcher.java:28)
    at com.intellij.util.ExecutorsQuery.processResults(ExecutorsQuery.java:42)
    at com.intellij.util.AbstractQuery.forEach(AbstractQuery.java:67)
    at com.intellij.util.InstanceofQuery.forEach(InstanceofQuery.java:54)
    at com.intellij.execution.ConfigurationUtil.addAnnotatedMethodsAnSubclasses(ConfigurationUtil.java:97)
    at com.intellij.execution.ConfigurationUtil.findAllTestClasses(ConfigurationUtil.java:77)
    at com.intellij.execution.junit.TestPackage$MySearchForTestsTask.run(TestPackage.java:397)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:469)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:178)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:218)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:169)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$8.run(ProgressManagerImpl.java:378)
    at com.intellij.openapi.application.impl.ApplicationImpl$6.run(ApplicationImpl.java:434)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
    at com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:145) 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-31T14:27:41.710

好的，我修好了。

在菜单中的文件下，有一个无效缓存选项。那解决了它！

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-04-23T15:27:39.960

在最新的 IDE（自 Community Edition 2016.1 起）上，此选项更加简化。

右键单击要识别为源文件夹的文件夹：

**将目录标记为 -> 源根目录**

[![在此处输入图像描述](../Images/65e5db60e334cccbeec41f80f0859999.png)](https://i.stack.imgur.com/Z36PU.png)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2020-06-06T11:23:30.100

出于某种原因，Intellij Idea 不会将未明确公开的类识别为测试类，如果类具有默认访问说明符，则不会将其标记为测试。尝试更改课程以符合此规则。例子：

```
public class TestMe {
   @Test
   public void shouldTest(){
      Assert.assertEquals("test", "test");
   }
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-04-27T09:04:36.280

只是添加一个不同的场景，这发生在我和我的一些同事身上：

Alt+enter in the class -> create test: IJ (2017.1.1) 提出 Arquillian Junit 作为测试库的第一选择，通过使用它**，创建的测试类和方法没有“公共”标识符**。然后，如果决定将测试库更改为 JUnit，很容易忘记缺少“公共”标识符，这会导致 IJ 无法识别测试。当然，解决方案是放置“公共”标识符。

尽管这不是发生在您身上的事情，但它具有相同的后果，因此此答案可能会帮助其他遇到相同症状的人。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-05-10T11:49:23.923

就我而言，我们正在从 JUnit 4 迁移到 JUnit 5，我将它们混合`@Test`在一起。

简而言之：

*   如果您使用`@RunWith()`JUnit 4，则必须使用`@org.junit.Test`注释测试方法。
*   如果您使用`@ExtendWith()`JUnit 5，则必须`@org.junit.jupiter.api.Test`改用。

当我更改导入时，我的课程可以再次作为测试课程运行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-10T23:44:28.553

在使用 Junit Jupiter 5.5.0 的 IDEA 2019.1.2（或 -.3）中，以前的答案都不适用于我。我已经 git 克隆了几个我从另一台计算机推送到 GitHub 的项目，它们的测试运行良好。在我的新笔记本电脑上，无论我如何尝试运行它们，我都得到“未找到测试”。

最终起作用的是：我删除了 IDEA 生成的**test.iml**文件，因为我注意到在我创建的一个原始项目中没有这样的文件，只是为了看看我是否可以运行测试（我确实可以）。在两个旧项目中删除此文件后，测试运行完美。没有生成新的**test.iml**。

我不知道这些文件是如何或何时生成的。因为 git repos 是私有的，所以我没有费心去 gitignore IDEA 的 *.*ml 文件；然而，它们不在 GitHub 存储库中。此外，它们位于项目的根目录中，而不是在 .idea 目录中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-08-10T10:01:39.247

`Ubuntu 20.04`我用,`Java 11.0.8-zulu`和遇到了这个问题`Intellij 2020.2`。

`Junit`从`5.5.2`to`5.6.2`和`Junit Platform`from升级`1.5.2`为`1.6.2`我解决了这个问题。

这对我来说似乎很奇怪，所以我把版本换回来了，现在也可以了。我认为某种缓存失效可能是最好的解释，尽管相应的按钮对我不起作用。

所以基本上，这里所说的[https://stackoverflow.com/a/58687202/6476706](https://stackoverflow.com/a/58687202/6476706)（我试图在那里发表评论但不能......）。

无论如何，在 2020 年仍然是一个问题，也许这对某人有帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-26T22:30:50.437

通过...打开文件-> 项目结构修复了几次。在那里，在左侧菜单上查看最后一个条目有“问题”计数（如果超过零）。单击这些，然后对于模块/库中 intellij 中以红色突出显示的每个问题，删除它们（减号按钮）。他们将被赋予像“test1..23”这样的模块名称，因为intellij无法识别结构。删除所有标记为红色后，关闭+重新启动intellij。在这个阶段不要运行 maven refresh，因为它会再次引入相同的错误。通过重新启动 intellij 将再次触发对项目[![在此处输入图像描述](../Images/c6f5c23b53f535da626e4f28d262fecb.png)](https://i.stack.imgur.com/8fYBC.png)结构的新扫描。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-12T09:48:30.270

我最终手动对项目所有模块中的每个源根目录和测试源根目录进行分类。像魅力一样工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-10T11:40:22.130

就我而言，我必须：

*   关闭项目
*   打开 build.gradle 文件
*   覆盖现有项目？是的
*   右键单击项目
    *   将目录标记为 >`Resources Root`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-04T04:28:51.487

尝试更改 JUnit 依赖版本。向前或向后释放一次。它可以帮助使测试缓存失效。

如果您使用 Maven 或 Gradle 等依赖管理工具，请转到 .pom 或 .gradle 文件并更改 JUnit 库的版本。

例如在版本部分将 4.11 更改为 4.12 或 4.10：

```
<dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <!-- change here -->
      <version>4.11</version>
      <scope>test</scope>
   </dependency>
</dependencies> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-14T22:51:21.917

如果您使用 IntelliJ 进行测试执行和调试，但不用于编辑。您的其他编辑器/IDE 可能正在与 IntelliJ 争夺对生成文件的控制 ( `*.class`) - 导致 IntelliJ 报告未**找到测试**（也可能是虚假的构建错误）。

就我而言，Visual Studio Code 似乎具有这种效果（在最近更新这两个工具之后）。

我找到的解决方案是**关闭 Visual Studio Code**，然后使用 IntelliJ 或从命令行清理重建项目。换句话说，我的双 IDE 工作流程不再有效——所以我必须在 IntelliJ 中进行编辑。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-04T03:37:51.633

一个糟糕的解决方法是让 IntelliJ 运行测试而不是 Gradle。

File > Settings > Build Tools > Gradle > Run Tests With > IntelliJ Test Runner

这是 Gradle 上另一个测试框架的类似问题。[https://youtrack.jetbrains.com/issue/IDEA-221159](https://youtrack.jetbrains.com/issue/IDEA-221159)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-16T14:23:23.223

对我来说，被测试的课程不是`public`. 一旦我将其设置为`public`绿色运行测试图标就会弹出。请注意，这只是 Junit 4 中的一个问题。

# .net - Bin 文件夹使用什么应用程序池？

> ID：13157816
> 
> 赞同：0
> 
> 时间：2012-10-31T12:19:22.120
> 
> 标签：.net, application-pool

我们有一个经典的 asp 网站，它需要一个 .NET 导出组件。我们已将插件的一部分安装到 highcharts/HighchartsExport.aspx（这是我们调用它运行它的文件），并将所需的 dll 按照说明安装到 /Bin 文件夹中。

一切正常，但我希望这个 .net 插件在它自己的应用程序池中运行，因为我们似乎偶尔会遇到应用程序崩溃/回收，我想隔离它。

我可以在“/highcharts”文件夹上使用“转换为应用程序”并在那里更改应用程序池，但是 /Bin 文件夹呢？

显然我可以将组件分离到一个完全独立的子域中，但我更愿意将其保留为一个站点（+我很好奇它是如何工作的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:20:57.417

该`bin`文件夹在为其所属的应用程序配置的应用程序池下运行。

# ajax - wicket AjaxLink onclick 没有响应

> ID：13157818
> 
> 赞同：2
> 
> 时间：2012-10-31T12:19:31.753
> 
> 标签：ajax, hyperlink, window, wicket, modal-dialog

我正在用检票口建立一个网站。我有一个从主页的 ajaxlink 打开的模式窗口。问题是，当我在 HTML 代码中添加 CSS 以使其更具吸引力时，它停止了工作。所以现在，当我单击打开模式窗口的 AjaxLink 时，什么也没有发生，我不知道为什么。有任何想法吗？？

这是 AjaxLink 的代码：

```
AjaxLink privacyLink = new AjaxLink<Void>("privacylink") {
    @Override
    public void onClick(AjaxRequestTarget target) {
        // TODO Auto-generated method stub
        modal2.show(target);
    }
}; 
```

再来一条评论。这个 AjaxLink 是作为 ListView 的一部分引入的，所以实际上有多个 AjaxLink。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:13:59.873

为了让 AjaxLink 刷新，您需要调用以下内容：

```
modal2.setVisible(true);
target.addComponent(modal2Container); 
```

其中 modal2 是您要控制其可见性的组件，而 modal2Container 是带有 .setOutputMarkupId(true) 的 WebMarkupContainer，在构建页面/面板时将 modal2 添加到该组件。

我发现[http://www.wicket-library.com/wicket-examples-1.4.x/ajax/](http://www.wicket-library.com/wicket-examples-1.4.x/ajax/)上的示例特别有用（我使用的是 1.4，但是对于您使用的任何版本的 wicket 都有其他示例正在运行，您可以从[http://wicketstuff.org/ 访问](http://wicketstuff.org/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:44:54.027

我终于找到了解决方案！！，这是我使用的 jQuery 版本（1.4.2）的问题，所以我将其更改为 1.5.2 并且它有效！

# java - Struts 2 post参数从Action A到Action B

> ID：13157829
> 
> 赞同：2
> 
> 时间：2012-10-31T12:19:56.217
> 
> 标签：java, spring, struts2

我在 Struts 2 Action 中获取 post 参数时遇到了一点问题。

我的第一个动作加载了一个列表：

```
package de.nordakademie.hausarbeit.action;

import java.util.List;

import com.opensymphony.xwork2.Action;

import de.nordakademie.hausarbeit.model.Pruefungsfach;
import de.nordakademie.hausarbeit.service.PruefungsfaecherService;

public class IndexAction implements Action {
    private PruefungsfaecherService pruefungsfaecherService;
    private List<Pruefungsfach> pruefungsfaecher;

    public String execute() throws Exception {
        pruefungsfaecher = pruefungsfaecherService.listPruefungen();
        return SUCCESS;
    }

    public List<Pruefungsfach> getPruefungsfaecher() {
        return pruefungsfaecher;
    }

    public void setPruefungsfaecherService(PruefungsfaecherService pruefungsfaecherService) {
        this.pruefungsfaecherService = pruefungsfaecherService;
    }

} 
```

```
 <%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>

<%-- Niels Maseberg --%>

<h2>Übersicht Prüfungsfächer</h2>
<s:form>
    <table cellpadding="0">
        <caption>Liste aller Prüfungsfächer inklusive Studienrichtung und Jahrgang</caption>
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th>Studienrichtung</th>
                <th>Titel</th>
                <th>Jahrgang</th>
                <th>Beschreibung</th>
            </tr>
        </thead>
        <tbody>
            <s:iterator value="pruefungsfaecher" status="rowstatus">
                <s:if test="#rowstatus.odd == true">
                    <tr class="odd">
                </s:if>
                <s:else>
                    <tr class="even">
                </s:else>
                    <td class="cell_radio"><s:radio name="selectedPruefungsfachId" list="#{id:''}" theme="simple"/></td>
                    <td><s:property value="manipel.getPk().getStudienrichtung()"/></td>
                    <td><s:property value="titel"/></td>
                    <td><s:property value="manipel.getPk().getJahrgang()"/></td>
                    <td><s:property value="beschreibung"/></td>
                </tr>
            </s:iterator>
        </tbody>
    </table>
    <div class="buttons">
        <div class="button">
            <s:submit value="Prüfungen anzeigen" action="pruefungslist" />
        </div>
        <div class="clear"></div>
    </div>
</s:form> 
```

我的第二个操作获取 selectedPruefungsfachId 并加载 Pruefungsfach 以便我可以在第二个 jsp 中放置一个隐藏值：

```
package de.nordakademie.hausarbeit.action;

import java.util.List;

import org.apache.log4j.Logger;

import com.opensymphony.xwork2.Action;

import de.nordakademie.hausarbeit.model.Pruefung;
import de.nordakademie.hausarbeit.model.Pruefungsfach;
import de.nordakademie.hausarbeit.service.PruefungenService;
import de.nordakademie.hausarbeit.service.PruefungsfaecherService;

public class PruefungslistAction implements Action {
    private PruefungenService pruefungenService;
    private PruefungsfaecherService pruefungsfaecherService;

    private Long selectedPruefungsfachId;
    private List<Pruefung> pruefungen;
    private Pruefungsfach pruefungsfach;
    private static final Logger logger = Logger.getLogger(PruefungslistAction.class);

    public String execute() throws Exception {
        if(logger.isDebugEnabled()){
            logger.debug("Pruefungsfach mit der ID '" + selectedPruefungsfachId + "' wurde gewählt");
        }

        pruefungen = pruefungenService.listPruefungen(selectedPruefungsfachId);

        pruefungsfach = pruefungsfaecherService.getPruefungsfach(selectedPruefungsfachId);
        if(logger.isDebugEnabled()){
            logger.debug("Pruefungsfach mit der ID '" + pruefungsfach.getId() + "' wurde geladen");
        }

        return SUCCESS;
    }

    public Long getSelectedPruefungsfachId() {
        return selectedPruefungsfachId;
    }

    public void setSelectedPruefungsfachId(Long selectedPruefungsfachId) {
        this.selectedPruefungsfachId = selectedPruefungsfachId;
    }

    public List<Pruefung> getPruefungen() {
        return pruefungen;
    }

    public void setPruefungenService(PruefungenService pruefungenService) {
        this.pruefungenService = pruefungenService;
    }

    public void setPruefungsfaecherService(
            PruefungsfaecherService pruefungsfaecherService) {
        this.pruefungsfaecherService = pruefungsfaecherService;
    }

    public Pruefungsfach getPruefungsfach() {
        return pruefungsfach;
    }

} 
```

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>

<h2>Übersicht Prüfungen aus Prüfungsfach "<s:property value="pruefungsfach.getTitel()" />"</h2>
<s:form>
    <div class="buttons">
        <div class="button">
            <!--
            <s:url id="createPruefungUrl" action="createPruefung">
                <s:param name="selectedPruefungsfachId"><s:property value="pruefungsfach.getId()" /></s:param>
            </s:url>
            <a href="${createPruefungUrl}"><s:text name="btnCreatePruefung" /></a>
            <s:url id="pruefungenHistorieActionUrl" action="pruefungenHistorie">
                <s:param name="selectedPruefungsfachId"><s:property value="pruefungsfach.getId()" /></s:param>
            </s:url>
            <a href="${pruefungenHistorieActionUrl}"><s:text name="btnPruefungenHistorie" /></a>
            -->

            <s:hidden name="selectedPruefungsfachId" value="%{pruefungsfach.id}" />
            <s:submit key="btnCreatePruefung" action="createPruefung" />
            <s:submit key="btnPruefungenHistorie" action="pruefungenHistorie" />
        </div>
        <div class="clear"></div>
    </div>
    <table cellpadding="0">
        <caption>Liste aller Prüfungen im Prüfungsfach "<s:property value="pruefungsfach.getTitel()" />"</caption>
        <thead>
            <tr>
                <th>&nbsp;</th>
                <th>Datum</th>
                <th>Dozent</th>
            </tr>
        </thead>
        <tbody>
            <s:iterator value="pruefungen" status="rowstatus">
                <s:if test="#rowstatus.odd == true">
                    <tr class="odd">
                </s:if>
                <s:else>
                    <tr class="even">
                </s:else>
                    <td class="cell_radio"><s:radio name="selectedPruefungId" list="#{id:''}" theme="simple"/></td>
                    <td><s:property value="datum"/></td>
                    <td><s:property value="dozent.getPerson().getVorname()"/> <s:property value="dozent.getPerson().getName()"/></td>
                </tr>
            </s:iterator>
        </tbody>
    </table>

</s:form> 
```

当我现在单击提交 action="pruefungenHistorie" 时，会调用 Action PruefungenHistorieAction 但我没有得到参数 "selectedPruefungsfachId"

```
package de.nordakademie.hausarbeit.action;

import java.util.List;

import org.apache.log4j.Logger;

import com.opensymphony.xwork2.ActionSupport;

import de.nordakademie.hausarbeit.model.Pruefungsfach;
import de.nordakademie.hausarbeit.service.PruefungsfaecherService;
import de.nordakademie.hausarbeit.service.StudentService;

public class PruefungenHistorieAction extends ActionSupport {
    private static final long serialVersionUID = 1L;
    private StudentService studentService;
    private PruefungsfaecherService pruefungsfaecherService;
    private List<Integer> matrikelnummern;
    private Long selectedPruefungsfachId;
    private Integer selectedMatrikelnummer;
    private static final Logger logger = Logger.getLogger(PruefungenHistorieAction.class);

    public String execute() throws Exception {
        // Load MatrikelnummerList
        _loadMatrikelnummerList();
        return SUCCESS;
    }

    /**
     * showDetail Most useless comment in the world; why bother?
     */
    public String showDetail() {
        return SUCCESS;
    }

    public void validate() {
        super.validate();

        _loadMatrikelnummerList();

        if (getSelectedMatrikelnummer().equals("none")) {
            addFieldError("selectedMatrikelnummer", getText("error.no.matrikelnummer.selected"));
        }
    }

    private void _loadMatrikelnummerList() {
        if(logger.isDebugEnabled()){
            logger.debug("PruefungenHistorieAction: Pruefungsfach mit der ID '" + selectedPruefungsfachId + "' wird geladen");
        }

        Pruefungsfach pruefungsfach = pruefungsfaecherService.getPruefungsfach(selectedPruefungsfachId);        
        matrikelnummern = studentService.getMatrikelnummerListByManipel(pruefungsfach.getManipel());
    }

    public void setStudentService(StudentService studentService) {
        this.studentService = studentService;
    }

    public Long getSelectedPruefungsfachId() {
        return selectedPruefungsfachId;
    }

    public void setSelectedPruefungsfachId(Long selectedPruefungsfachId) {
        this.selectedPruefungsfachId = selectedPruefungsfachId;
    }

    public List<Integer> getMatrikelnummern() {
        return matrikelnummern;
    }

    public Integer getSelectedMatrikelnummer() {
        return selectedMatrikelnummer;
    }

    public void setSelectedMatrikelnummer(Integer selectedMatrikelnummer) {
        this.selectedMatrikelnummer = selectedMatrikelnummer;
    }
} 
```

属性 selectedPruefungsfachId 为空，我不明白为什么，因为在“PruefungslistAction”操作中我得到了参数，而在下一个操作中我没有得到参数......

这是struts.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!-- AUTHOR: Niels Maseberg -->

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="false" />
    <constant name="struts.custom.i18n.resources" value="ApplicationResources" />

    <!-- Custom Theme for Struts (Author: Niels Maseberg; Base of Theme xhtml) -->
    <constant name="struts.ui.theme" value="notendatenbank" />
    <constant name="struts.ui.templateDir" value="template" />

    <!-- Struts Package -->
    <package name="default" extends="tiles-default" namespace="/">
        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" default="true" />
        </result-types>

        <default-action-ref name="index" />

        <action name="index" class="de.nordakademie.hausarbeit.action.IndexAction">
            <result type="tiles">index</result>
        </action>

        <action name="notenuebersicht" class="de.nordakademie.hausarbeit.action.NotenuebersichtAction">
            <result type="tiles">notenuebersicht</result>
            <interceptor-ref name="validation">
                <param name="validateAnnotatedMethodOnly">true</param>                
                <param name="excludeMethods">execute</param>
            </interceptor-ref>
        </action>

        <action name="notenuebersichtDetail" class="de.nordakademie.hausarbeit.action.NotenuebersichtAction" method="showDetail">
            <result name="input">notenuebersicht</result>
            <result name="success">notenuebersichtDetail</result>
        </action>

        <action name="pruefungslist" class="de.nordakademie.hausarbeit.action.PruefungslistAction">
            <result type="tiles">pruefungslist</result>
        </action>

        <action name="createPruefung" class="de.nordakademie.hausarbeit.action.CreatePruefungAction">
            <result name="input">createPruefung</result>
            <result name="success">pruefungslist</result>
            <result type="tiles">createPruefung</result>
        </action>

        <action name="pruefungenHistorie" class="de.nordakademie.hausarbeit.action.PruefungenHistorieAction">
            <result type="tiles">pruefungenHistorie</result>
            <interceptor-ref name="validation">
                <param name="validateAnnotatedMethodOnly">true</param>                
                <param name="excludeMethods">execute</param>
            </interceptor-ref>
        </action>

        <action name="pruefungenHistorieDetail" class="de.nordakademie.hausarbeit.action.PruefungenHistorieAction" method="showDetail">
            <result name="input">pruefungenHistorie</result>
            <result name="success">pruefungenHistorieDetail</result>
        </action>

    </package>

</struts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:12:45.173

您可以通过像这样配置您的操作来查看

```
<action name="pruefungenHistorie" class="de.nordakademie.hausarbeit.action.PruefungenHistorieAction">
   <result type="tiles">pruefungenHistorie</result>
   <interceptor-ref name="validation">
      <param name="validateAnnotatedMethodOnly">true</param>                
      <param name="excludeMethods">execute</param>
   </interceptor-ref>
</action> 
```

您只使用`validation`拦截器。

将此更改为

```
<action name="pruefungenHistorie" class="de.nordakademie.hausarbeit.action.PruefungenHistorieAction">
   <result type="tiles">pruefungenHistorie</result>
   <interceptor-ref name="defaultStack">
      <param name="validation.validateAnnotatedMethodOnly">true</param>                
      <param name="validation.excludeMethods">execute</param>
   </interceptor-ref>
</action> 
```

为了使用`defaultStack`带有配置`validation`拦截器的拦截器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:38:18.600

代替

```
<s:radio name="selectedPruefungsfachId" list="#{id:''}" theme="simple"/> 
```

和

```
<s:radio name="selectedPruefungsfachId" list="{id}" theme="simple"/> 
```

在第一个 JSP 上。

（根据[http://struts.apache.org/2.x/docs/how-do-i-render-a-single-radio-button.html](http://struts.apache.org/2.x/docs/how-do-i-render-a-single-radio-button.html)）

# c++ - 运行外部程序并获取返回的整数

> ID：13157833
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:13.040
> 
> 标签：c++, system, return

我有以下 MWE，它返回一个整数：

```
#include <iostream>
using namespace std;

int main()
{
    int a = 2;
    return a;
} 
```

现在我想通过 Windows 中的命令行 (cmd) 调用这个程序。这是我如何做到这一点的程序：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>

using namespace std;

int main()
{
    int a = system("c:\test_batch.exe");
    cout << a << endl;
    return 0;
} 
```

但是，这不会返回值 2，而是 0。我不明白这一点，因为我认为 system() 返回了程序的退出代码，在本例中为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:32:59.500

system 返回一个由命令解释器返回的值，而不是由实际命令返回的值。

你需要做类似的事情

```
int a = system("c:\test_batch.exe && exit %ERRORLEVEL%"); 
```

# c# - 在中继器内动态创建控件

> ID：13157837
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:31.357
> 
> 标签：c#, asp.net

我在转发器中有 2 个下拉控件，我必须通过单击按钮来重复这些控件，我该如何实现？

```
if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
{ 
    TextBox t = new TextBox(); 
    t.ID = e.Item.ItemIndex.ToString(); 
    e.Item.Controls.Add(t); 
} 
```

这是正确的方法，但我怎样才能找到中继器内的按钮并触发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:33:25.583

将 DropDownLists 和 Button 控件添加到中继器中的 PlaceHolder 控件：

```
<asp:Repeater ID="Repeater1" runat="server" EnableViewState="true"
            onitemcommand="Repeater1_ItemCommand" onitemdatabound="Repeater1_ItemDataBound">
            <ItemTemplate>
                <asp:PlaceHolder ID="PlaceHolder1" runat="server">
                    <asp:DropDownList ID="DropDownList1" runat="server">
                    <asp:ListItem Text="one"></asp:ListItem>
                    <asp:ListItem Text="two"></asp:ListItem>
                    </asp:DropDownList>
                    <asp:DropDownList ID="DropDownList2" runat="server">
                    <asp:ListItem Text="three"></asp:ListItem>
                    <asp:ListItem Text="four"></asp:ListItem>
                    </asp:DropDownList>
                    <asp:Button ID="Button1" runat="server" UseSubmitBehavior="false" Text="Button" CommandName="btn" />
                </asp:PlaceHolder>
            </ItemTemplate>
        </asp:Repeater> 
```

在中继器的 ItemCommand 事件中，通过单击按钮检查 CommandName，然后创建并将动态下拉列表添加到占位符：

```
protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
{
   if (e.CommandName == "btn")
   {
       DropDownList ddl = new DropDownList();
       ddl.ID = "DropDownList1";
       ddl.DataSource = new string[] { "one", "two" };
       ddl.DataBind();

       // your second dropdown would be created here in the same way
       pl.Controls.Add(ddl);
   }
} 
```

连接 SelectedIndexChanged 事件还有一些工作要做，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T07:40:35.193

我们可以使用占位符控件从代码后面添加动态控件，例如 Textbox、Radiobuttonlist、Checkbox List insde repeater 控件。

[使用 Asp.Net(c#) 中的占位符在中继器内进行动态控制？](http://programmerskills.blogspot.com/2016/05/dynamic-control-create-dynamic-control.html)

```
protected void rptPrint_ItemDataBound(object sender, RepeaterItemEventArgs e)
{

  if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)         
  {

    string options = (HiddenField)e.Item.FindControl("hfAnswer")).Value;

    string type = ((HiddenField)e.Item.FindControl("hfType")).Value;
    Label lblquestion = ((Label)e.Item.FindControl("LblQuestion"));
    PlaceHolder phRow = (PlaceHolder)e.Item.FindControl("phRow");

    if (type == "Text")
    {
      TextBox txtAnswer = new TextBox();
      phRow.Controls.Add(txtAnswer);
    }

    else if (type == "Check")
    {
      CheckBoxList chklist = new CheckBoxList();
      chklist.RepeatDirection = RepeatDirection.Horizontal;
      chklist.Font.Italic = true;

      chklist.RepeatColumns = 4;

      foreach (string option in options.Split(','))
      {

        ListItem items = new ListItem();
        items.Text = option;
        items.Value = option; 
        chklist.Items.Add(items);
      }                   
      phRow.Controls.Add(chklist);
    }

    else
    {
      RadioButtonList rdblist = new RadioButtonList();
      rdblist.RepeatDirection = RepeatDirection.Horizontal;
      rdblist.Font.Italic = true;

      rdblist.RepeatColumns = 4;

      foreach (string option in options.Split(','))
      {

        ListItem items = new ListItem();
        items.Text = option;
        items.Value = option; 
        rdblist.Items.Add(items);
      }                   

      phRow.Controls.Add(rdblist);
    }

  }

} 
```

# php - CKEDITOR 和 javascript 函数的问题

> ID：13157840
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:33.203
> 
> 标签：php, javascript, function, replace, ckeditor

我已经在 javascript 中完成了一个函数，它能够通过它们的表达式更改一些缩写，所有这些都在 javascript 和 onkeyup 中。

我遇到的麻烦是这在使用插件CKEDITOR的textarea上不起作用，

当我禁用ckeditor时，它工作正常。

这是我的代码：

```
<script type="text/javascript">
var abbreviations = {
        "ABS": "Le débiteur est absent, nous le relançons par courrier. Nous agendons également une visite domiciliaire s'il s'avérait que ce dernier restait sans réponse.",

};

function abbrReplace(el, abbrs) {
    if (!el || !abbrs) {
        return false;
    }
    else {
        var val = el.value,
            words = val.split(/\s/);
        for (var i = 0, len = words.length; i<len; i++) {
            if (abbrs[words[i]]) {
                words[i] = abbrs[words[i]];
            }
        }
        return words.join(' ');
    }
}

document.getElementById("suivi").onkeyup = function(){
    this.value = abbrReplace(this, abbreviations);
};

</script> 
```

我真的迷路了，我已经尝试了很多方法来完成这项工作。

任何帮助将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:23:48.213

CKeditor 用 CKeditor 实例替换您的 textarea，然后忽略 textarea。您正在寻找的是将您的函数绑定到 CKeditor 的 keyup 事件并更改编辑器的内容。结合[在 ckeditor 中为按键添加事件侦听器代码](https://stackoverflow.com/questions/6386423/add-code-for-event-listener-for-keypress-in-ckeditor)和[如何使用 Javascript 在 CKEditor 中查找和替换文本的答案？](https://stackoverflow.com/questions/5635118/how-to-find-and-replace-text-in-ckeditor-using-javascript)结果是这样的：

```
var abbreviations = ...;

function abbrReplace(el, abbrs) {
    ...changed to accept a piece of text instead of an element...
}

CKEDITOR.on('instanceCreated', function(e) {
    e.editor.on('contentDom', function() {
        e.editor.document.on('keyup', function(event) {
            // keyup event in ckeditor
            old_text = e.editor.getData();
            new_text = abbrReplace(old_text, abbreviations);
            e.editor.setData(new_text);
        });
    });
}); 

CKEDITOR.replace('suivi'); 
```

我已经对此进行了测试，它还不能完美地工作，但它应该为您指明正确的方向。

# firefox - 火狐字体问题

> ID：13157843
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:37.197
> 
> 标签：firefox, fonts

我在 Firefox 中渲染嵌入字体时遇到问题。它在 Webkit 上工作并且看起来漂亮而清晰，但在 Firefox 中却不行。我在 OS X 的两个浏览器中都使用最新版本。

```
@font-face{
    font-family:AvantGardeM;
    font-style:normal;
    font-weight:normal;
    src:url("../font/AvantGardeM.eot");
    src:local("â˜º"), 
        url("../font/AvantGardeM.ttf") format("truetype"), 
        url("../font/AvantGardeM.woff") format("woff"), 
        url("../font/AvantGardeM.svg") format("svg")
} 
```

我还附上了一个示例屏幕截图。第一个是 Chrome，第二个和第三个是 Firefox。 ![在此处输入图像描述](../Images/7f9338d5dbcffc83c9ab681852476727.png)

我也注意到一些图像的小问题。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:32:39.770

问题出在我的外接显示器的显示适配器上。

# cordova - 如何在 phonegap 应用程序中仅支持 ios 6.0 的横向版本？

> ID：13157846
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:48.057
> 
> 标签：cordova, ios6, xcode4.5, uiinterfaceorientation

检查了很多关于此的问题，但对我的情况没有任何帮助。所以我需要再问一次。

我正在使用 phone-gap framework.Upto ios 5 构建应用程序，它运行良好，但与 ios 6.0 一样，这些方法不受支持，所以我将它们替换为：

```
- (BOOL)shouldAutorotate
{
return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscape;
} 
```

在我的 MainViewController.m 文件中。

我只需要横向左侧和右侧横向的整个应用程序。

在我的 plist 文件中，我提到了 iphone 和 ipad 的左右横向。

任何想法都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:04:51.503

解决了。​​出现这个问题是因为在AppDelegate.m中MainViewController没有设置为rootViewController。在您的 AppDelegate.m 中替换：

```
[self.window addSubview:self.viewController.view]; 
```

和

```
self.window.rootViewController = self.viewController; 
```

然后它对于我在 ios 6.0 上运行的应用程序的行为正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T05:41:12.630

IOS

在 config.xml 集中：

```
<preference name="orientation" value="landscape"></preference> 
```

或者

```
<preference name="orientation" value="portrait"></preference> 
```

在“UISupportedInterfaceOrientations”设置的资源文件夹下的 ios 文件夹中的“ProjectName”-info.plist 文件中：

```
UIInterfaceOrientationLandscapeLeft 
```

或者

```
UIInterfaceOrientationLandscapeRight 
```

或者

对于纵向：

```
UIInterfaceOrientationPortrait 
```

或者

```
UIInterfaceOrientationPortraitUpsideDown 
```

包括哪些适用于您的要求。

# c# - 使用非对称 RSA 加密时，我应该如何保护私钥？

> ID：13157850
> 
> 赞同：1
> 
> 时间：2012-10-31T12:20:57.513
> 
> 标签：c#, encryption, rsa, encryption-asymmetric

我正在使用`RSACryptoServiceProvider`和 C#。我有一个 Web 服务器 (A)，它将加密数据并将其存储在数据库中。我有另一台服务器 (B) 将读取加密数据并对其进行解密。私钥只会存在于服务器 B 上。

我想限制对我的应用程序和一个非常短的域用户列表的私钥访问。

存储密钥的最佳方式是什么，以使其免受未经授权的人的破坏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:35:49.817

您可以使用 Windows [RSA 密钥容器](http://msdn.microsoft.com/en-us/library/f5cs0acs.aspx)来存储密钥。密钥可以由.NET 框架附带的[aspnet_regiis.exe工具安装/创建。](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28VS.80%29.aspx)

[这](http://msdn.microsoft.com/en-us/library/2w117ede%28v=vs.100%29.aspx)是一个演练。

需要注意的两个选项是：

`-pi`（安装 RSA 容器的密钥）

`-pa`（密钥的管理权限）

# java - 屏幕关闭时完成当前活动并开始另一个活动（黑色）

> ID：13157851
> 
> 赞同：0
> 
> 时间：2012-10-31T12:20:58.977
> 
> 标签：java, android, android-intent

我开发了由 A 活动（午餐）、B 活动（第二）、C 活动（第三）组成的应用程序，

我试过的是：

当您远离设备或按下电源按钮将其锁定时屏幕被锁定或关闭时，我的目标是**C 活动**完成，当您再次打开屏幕时**A 活动**开始。

**注意：我是 android 和 java 开发的新手。**

我认为我们可以为此目的使用 onPause() 方法或 onStop() 方法，但它实际上不适用于我，如下 C 活动中的代码：

```
protected void onPause(){
  super.onPause();
  Intent i = new Intent(this,A activity);
  startActivity(i);
} 
```

当我锁定屏幕并变为黑色然后再次打开时，它仍然有 C 活动。

使用 onPause()、方法或 onStop()、方法或其他方法获得它的任何建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:25:17.803

在 C Activity - onPause 方法中，您可以尝试使用以下代码：

```
new Handler().post(new Runnable() {

                             @Override
                             public void run()
                             {
                            Intent intent = new Intent(this,A activity);
                                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_ANIMATION);
                                overridePendingTransition(0, 0);
                                finish();

                                overridePendingTransition(0, 0);
                                startActivity(intent);
                            } 
```

这将关闭当前活动并打开选定的活动。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T12:28:39.957

我不确定，但试试这种方式： -

```
 protected void onPause()
{

    Intent i = new Intent(this,A activity);
   startActivity(i); 
   super.onPause();
} 
```

# jqgrid - jqgrid页面导航栏没有出现

> ID：13157861
> 
> 赞同：1
> 
> 时间：2012-10-31T12:21:19.227
> 
> 标签：jqgrid

我正在多选项卡中构建搜索功能，其中用户搜索条件将是一个选项卡，而用户搜索结果将在另一个选项卡中。当我第一次搜索时，我在第二个选项卡中使用正确的页面导航栏获得了结果。但是当用户返回上一个选项卡（搜索选项卡）并再次搜索时，我的网格结果会刷新为正确的值，但我的导航网格没有出现。我在萤火虫中找不到 navgrid 的 dom 以及最初在第一次搜索时出现的 dom。

以下是代码片段。

```
function dispSearchResults() {
var no = document.getElementById("stNo").value;
var firstName = document.getElementById("firstName").value;
var lastName = document.getElementById("lastName").value;
var dateOfBirth = document.getElementById("dateOfBirth").value;

document.getElementById("searchContainerModal").innerHTML='<table 
    id="searchResultsTab"  style="width:100%"></table>';

jQuery("#searchResultsTab").jqGrid({
    url : contextPath + '/web/getSearchViewResults.json',
    datatype : "json",
    mtype: "POST",
    postData:{'NO': no, 'FIRST_NAME':firstName, 'LAST_NAME':lastName, 
        'DATE_OF_BIRTH':dateOfBirth},       
    colNames : [ 'no', 'First Name', 'Last Name', 'Date Of Birth'],
    colModel : [ {
        name : 'No',
        index : 'No',
        width : 100,
        align : "center",
        formatter: fmtStateno
    }, {
        name : 'firstName',
        index : 'firstName',
        width : 220,
        align : "left",
        formatter: fmFName
    }, {
        name : 'lastName',
        index : 'lastName',
        width : 220,
        align : "left",
        formatter: fmLName
    }, {
        name : 'dateOfBirth',
        index : 'dateOfBirth',
        width : 120,
        align : "left",
        formatter: fmBirthDate
    }],
    altRows : true,
    altClass : 'oddRow',        
    loadComplete : function() {
        document.getElementById("sResultsTab").style.visibility = 
                                "visible";

        if (jQuery("#searchResultsTab").getGridParam("records")==0) {
          jQuery("#searchResultsTab").addRowData(
                "blankRow", {"No":"No data was found", 
                       "firstName":"", "lastName":"", "dateOfBirth":""}
          );
        }else{              
            $("tr.jqgrow:odd").addClass('oddRow');
        }           
    },
    onCellSelect: function(rowid,iCol,cellcontent,e) {
        // alert(rowid);
        cContent = cellcontent;
        rId = rowid;
    },
    height : 240,
    width : 1165,
    rowNum : 25,
    rowList : [25,50,75,100],
    loadonce: true,
    pagination:true,
    pager : '#searchPagerDiv1',
    sortname : 'no',        
    viewrecords : true,     
    sortorder : "desc",
    caption : "Search Results",
    gridview : true,
    jsonReader : {
        root : "rows",  
        page : "currentPage",
        total : "totalPages",
        repeatitems : false,
        id : "id"                           
    }       
 }).navGrid("#searchPagerDiv1",reloadAfterSubmit: false,
       {edit:false,add:false,del:false});
});

$("#tabs").tabs("select", "#searchResultsTb");
 }

Here are the code snippets 

main jsp for tabs
------------------
&lt;div id="mainContentDiv"&lt;
&lt;div id="tabs" style="background-color: transparent; height:auto"&lt;
&lt;ul id="Tabs1"&lt;
&lt;li id="sCriteriaTab"&lt;&lt;a href="#searchTab"&lt;Search Criteria &lt;/a&lt;   
&lt;/li&lt;
&lt;li id="sResultsTab"&lt; &lt;a href="#searchResultsTb"&lt;Search 
Results&lt;/a&lt;  &lt;/li&lt; 
&lt;/ul&lt;                 
&lt;div id="searchTab" style="background-color: transparent" class="height250"&lt;  
&lt;%@ include file="../search/SearchCriteria.jsp" % &lt; 
&lt;/div&lt;    
&lt;div id="searchResultsTb" style="background-color: transparent;"&lt;     
&lt;%@ include file="../search/SearchResults.jsp" %   
&lt;                    
&lt;/div&lt;
SearchCriteria.jsp
-------------------
&lt;form id="searchForm" name="searchForm"&lt;
&lt;div class="personDetailsDiv" id="personNameInfoDiv"&lt;
&lt;div style="float:right"&lt;
&lt;font class="standardInputTitle"&lt;no&lt;/font&lt;
&lt;input id="No" name="No"  class="standardInputText marginRight50" value="" 
type="text"&lt;&lt;/div&lt; &lt;/div&lt;
........
............
&lt;div class="button-row"&lt;
&lt;a href="javascript:dispSearchResults()" class="button rounded blue effect- 
3"&lt;Search&lt;/a&lt;
&lt;/div&lt;
&lt;/div&lt;    &lt;/form&lt;   

SearchResults.jsp
----------------
&lt;div id="searchContainerModal" style="width:100%"&lt;&lt;/div&lt;
&lt;div id="searchPagerDiv1"&lt;&lt;/div&lt;
&lt;div id="searchPagerDiv" style="width:100%"&lt;
&lt;div id="searchZeroRec" style="display:none;"&lt; Zero Records Found ...   
&lt;/div&lt;
&lt;/div&lt; 

Appreciate your help !!!! 
```

# php - 如何在php / mysql中输入每个月的第三个星期五的事件

> ID：13157863
> 
> 赞同：1
> 
> 时间：2012-10-31T12:21:31.823
> 
> 标签：php, mysql, calendar, strtotime

我正在尝试使用下面的代码将事件输入到`MySQL`表中`PHP`。当我运行它时，它没有给出任何错误，并且没有将行插入到`MySQL`表中。我在代码中哪里出错了？

还有当我改变

```
$date = strtotime("third friday of $month[$j] $year[$i]"); 
```

到

```
$date = mktime(0,0,0,$month[$j],$k,$year[$i]); 
```

它适用于所有日子，但我正在寻找每个月的第三个星期五..

```
<?php 
if(isset($_POST['myform'])){

         $day   =   array('1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31');
         $month =   array('1','2','3','4','5','6','7','8','9','10','11','12');              
         $year  =   array('2011', '2012','2013', '2014', '2015', '2016');   

         $startday   = $_POST['day'];
         $eventplace = $_POST['eventplace'];
         $eventname  = $_POST['eventname'];
         $eventtime  = $_POST['eventtime'];

        for($i=0; $i<count($year); $i++){

            for($j=0; $j<count($month); $j++){

                for($k=$startday; $k<count($day); $k = $k + 7){

                        $date = strtotime("third friday of $month[$j] $year[$i]");

                        $week = date('W', $date) ;

  $query = mysql_query(" INSERT INTO caldemo(day, month, year, eventname, eventtime, eventplace, eventweek)
                         VALUES ('".$k."', '".$month[$j]."', '".$year[$i]."', '".$eventname."', '".$eventtime."', '".$eventplace."', '".$week."' )")or die(mysql_error()) ;
              }
            }
         } 
      }
?>   

<form name="theform" method="post" action="caldemo.php">
<table>
<tr>
<tr>
<td>Event Venue:</td>
<td><input type="text" name="eventplace" size="50"></td>
</tr>
<tr>
<td>Event Name:</td>
<td><input type="text" name="eventname" size="50"></td>
</tr>
<tr>
<td>Event Time:</td>
<td><input type="text" name="eventtime" size="50"></td>
</tr>
<tr>
<td></td>
<td>
<input type="submit" value="Send" name="myform">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:26:35.693

尝试

```
for($j=0; $j<count($month); $j++){

  $date = strtotime("+2 week friday $month[$j] $year[$i]");
  $week = date('W', $date) ;
  $k = date('d', $date) ;

  $query = mysql_query(" INSERT INTO caldemo 
    (day, month, year, eventname, eventtime, eventplace, eventweek)
    VALUES 
    ('".$k."', '".$month[$j]."', '".$year[$i]."', '".$eventname."', 
    '".$eventtime."', '".$eventplace."', '".$week."' )")
  or die(mysql_error()) ;
} 
```

删除了第三个`for`循环。将参数更改为`strtotime`并使用`day`它`$k`在查询中返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:35:18.537

请用

```
strtotime("$month[$j] $year[$i] third friday"); 
```

哪里`$month[$j]` 应该是月份名称`december` ， `$year[$i]`应该是年份`2012`。

谢谢

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-07T09:47:51.770

//showDay('一月', 2017, '星期五', 3);
showDay('一月', 2017, '星期五', '第三','文本');

```
函数 showDay($month, $year, $day, $count, $type=''){

      $list = array(1=>'first',2=>'second',3=>'third',4=>'fourth',5=>'fifth');
      $dayname = $list[$count];
      if($type=='text') $dayname = $count;

      return date('d', strtotime($month . ' ' . $year . ' ' . $dayname .' '.$day));
    }

```

# javascript - 如何在没有滚动效果的情况下选择选择框中的所有选项？

> ID：13157867
> 
> 赞同：0
> 
> 时间：2012-10-31T12:21:48.023
> 
> 标签：javascript, jquery, select

所以，我的场景如下：我有一个 select 元素，里面有一堆选项。我还有一个复选框，允许用户选择/取消选择所有选项。问题是在 Internet Explorer 中，当我尝试从代码中选择其中的所有选项时，整个选择框都会滚动。我使用这段代码：

```
$option.attr("selected", "selected"); 
```

如何避免这种滚动效果？我想选择所有选项，但没有任何延迟和这种奇怪的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:25:39.397

```
<select onMouseWheel="return false;"> 
```

希望这对你有用。

# c# - 参数的“必须声明标量变量”（C# SqlCommand）

> ID：13157875
> 
> 赞同：1
> 
> 时间：2012-10-31T12:22:06.743
> 
> 标签：c#, sql, sqlcommand

```
string selectedAreas = getSelectedAreas(areaCounts);

SqlConnection cn = new SqlConnection(connectionstring);
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "select top 1 [x1] " +
                  "from sometable " +
                  "where sometable.coll = @selectedAreas" +
                  "order by NEWID() ";
cmd.CommandType = System.Data.CommandType.Text;
cmd.Connection = cn;
cmd.Parameters.AddWithValue("@selectedAreas", selectedAreas); 
```

我在这里做错了什么？

我明白了

> *必须为@selectedAreas 声明标量变量。*

`@selectedAreas`可能会变成这样：

```
" 'nyc' or sometable.coll = 'la' or sometable.coll = 'miami' " 
```

编辑：

正如下面的评论指出的那样，我添加了空格。并删除了参数，如下所示：

```
cmd.CommandText = "select top 1 [x1] " +
                  "from sometable " +
                  "where sometable.coll = " + selectedAreas
                  " order by NEWID() "; 
```

不知道它有多正确，但它现在有效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:18:20.817

这可能是您运行命令的方式（您的问题中没有包括），例如在这种情况下：[必须声明标量变量](https://stackoverflow.com/questions/10602439/must-declare-scalar-variable)

# google-maps - 谷歌地图 - 根据 4 个坐标绘制椭圆

> ID：13157880
> 
> 赞同：0
> 
> 时间：2012-10-31T12:22:36.340
> 
> 标签：google-maps, google-maps-api-3, coordinates

我想根据四个坐标在谷歌地图上绘制一个椭圆，例如通过 API 可用的当前“矩形”方法：

```
var rectangle = new google.maps.Rectangle({
          strokeColor: '#FF0000',
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: '#FF0000',
          fillOpacity: 0.35,
          map: map,
          bounds: new google.maps.LatLngBounds(
            new google.maps.LatLng(33.671068, -116.25128),
            new google.maps.LatLng(33.685282, -116.233942))
        }); 
```

（使用边界参数）。

如果失败，是否有一种简单的方法可以将 2 个多边形之间的距离转换为测量单位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:59:15.940

您必须自己计算路径。这应该有助于：

[http://mathworld.wolfram.com/Ellipse.html](http://mathworld.wolfram.com/Ellipse.html)

编辑：这可能更有用：

[http://www.geocodezip.com/v3_MW_example_eshapes.html](http://www.geocodezip.com/v3_MW_example_eshapes.html)

[Mike Williams 的 v2 eshapes 库](http://econym.org.uk/gmap/eshapes.htm)的 v3 端口，支持椭圆（但不基于边界）。

大小到地图边界的[工作示例。](http://www.geocodezip.com/v3_example_eshapes_ellipse_fromBounds.html)

[概念证明小提琴](http://jsfiddle.net/geocodezip/yhxk1p07/)

**代码片段：**

```
var map = null;

var myOptions = {
  zoom: 8,
  center: new google.maps.LatLng(43, -79.5),
  mapTypeControl: true,
  mapTypeControlOptions: {
    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
  },
  navigationControl: true,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"),
  myOptions);

google.maps.event.addListenerOnce(map, "bounds_changed", function() {
  var bounds = map.getBounds();
  var major_axis = google.maps.geometry.spherical.computeDistanceBetween(bounds.getNorthEast(), new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getNorthEast().lng())) / 2;
  var minor_axis = google.maps.geometry.spherical.computeDistanceBetween(
    new google.maps.LatLng(bounds.getCenter().lat(), bounds.getSouthWest().lng()),
    new google.maps.LatLng(bounds.getCenter().lat(), bounds.getNorthEast().lng())) / 2;

  // === Ellipse ===
  var point = map.getCenter(); // new google.maps.LatLng(43,-78);
  var ellipse = google.maps.Polygon.Ellipse(point, major_axis, minor_axis, 0, "#000000", 2, 1, "#ffff00", 0.5);
  ellipse.setMap(map);
});

// This Javascript is based on code provided by the
// Community Church Javascript Team
// http://www.bisphamchurch.org.uk/   
// http://econym.org.uk/gmap/

// EShapes.js
//
// Based on an idea, and some lines of code, by "thetoy" 
//
//   This Javascript is provided by Mike Williams
//   Community Church Javascript Team
//   http://www.bisphamchurch.org.uk/   
//   http://econym.org.uk/gmap/
//
//   This work is licenced under a Creative Commons Licence
//   http://creativecommons.org/licenses/by/2.0/uk/
//
// Version 0.0 04/Apr/2008 Not quite finished yet
// Version 1.0 10/Apr/2008 Initial release
// Version 3.0 12/Oct/2011 Ported to v3 by Lawrence Ross
google.maps.Polygon.Ellipse = function(point, r1, r2, rotation, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts) {
  rotation = rotation || 0;
  return google.maps.Polygon.Shape(point, r1, r2, r1, r2, rotation, 100, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts)
}

google.maps.Polygon.Shape = function(point, r1, r2, r3, r4, rotation, vertexCount, strokeColour, strokeWeight, Strokepacity, fillColour, fillOpacity, opts, tilt) {
  var rot = -rotation * Math.PI / 180;
  var points = [];
  var latConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat() + 0.1, point.lng())) * 10;
  var lngConv = google.maps.geometry.spherical.computeDistanceBetween(point, new google.maps.LatLng(point.lat(), point.lng() + 0.1)) * 10;
  var step = (360 / vertexCount) || 10;

  var flop = -1;
  if (tilt) {
    var I1 = 180 / vertexCount;
  } else {
    var I1 = 0;
  }
  for (var i = I1; i <= 360.001 + I1; i += step) {
    var r1a = flop ? r1 : r3;
    var r2a = flop ? r2 : r4;
    flop = -1 - flop;
    var y = r1a * Math.cos(i * Math.PI / 180);
    var x = r2a * Math.sin(i * Math.PI / 180);
    var lng = (x * Math.cos(rot) - y * Math.sin(rot)) / lngConv;
    var lat = (y * Math.cos(rot) + x * Math.sin(rot)) / latConv;

    points.push(new google.maps.LatLng(point.lat() + lat, point.lng() + lng));
  }
  return (new google.maps.Polygon({
    paths: points,
    strokeColor: strokeColour,
    strokeWeight: strokeWeight,
    strokeOpacity: Strokepacity,
    fillColor: fillColour,
    fillOpacity: fillOpacity
  }))
}
```

```
html,
body,
#map {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:46:16.273

不确定这是否是您要查找的内容，但这[是我制作的示例](http://jsbin.com/evilig/5/)（在任意位置单击两个点），它使用一个[函数，该函数接受两个 latLngs 并返回一系列描述椭圆的点](https://softwareengineering.stackexchange.com/a/132011/30828)，然后将这些点添加到多边形.

请注意，它假设边界框相对较小（并且远离极点）以将点视为共面。

# c++ - 在 C++ dll 中定义的宏并在 C# 中使用相同的宏

> ID：13157884
> 
> 赞同：0
> 
> 时间：2012-10-31T12:23:04.093
> 
> 标签：c++, c#-4.0, macros

我们有几个在 C++ DLL 中定义的宏，我们想在 C# dotnet 4.0 中使用它。

是否可以使用它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:18:32.880

C# 不支持宏。将您的宏转换为函数并使用它们。

# c# - 在不阻塞主线程的情况下执行长时间运行的 UI 更改

> ID：13157886
> 
> 赞同：1
> 
> 时间：2012-10-31T12:23:06.293
> 
> 标签：c#, .net, winforms, multithreading, backgroundworker

无论如何运行大量 UI 更新而不影响 C# winforms 应用程序中的主线程？

当用户单击特定事件时，我想避免长时间延迟（在我的情况下，这是许多关闭表单调用来处理内存）

我知道我可以用来`BackgroundWorker`在“做工作”事件中执行冗长的操作，但问题是你不能在这个事件中更改任何 UI（它会导致跨线程异常） - 所以我不能把我的大量关闭表单在这里打电话。

而且我不能将关闭表单调用放在“工人完成”事件中，因为这是在主线程上运行的，并且最终会锁定主线程，从而导致糟糕的用户体验。

我曾考虑过仅在应用程序会话空闲时才生成一个线程来处理关闭，但不确定这是否会有点混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:24:44.683

您应该使用[BackgroundWorker的](http://msdn.microsoft.com/en-us/library/4852et58.aspx)[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件来更新 UI。要启用此功能，请将[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58.aspx)实例的[WorkerReportsProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workerreportsprogress.aspx)属性设置为. [然后，您可以通过从DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)事件处理程序发送数据来多次更新 UI ：`true`

```
backgroundWorker.ReportProgress(percentage, yourCustomData); 
```

建议对[Windows 窗体控件进行线程安全调用](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)。原因如下：

> 对 Windows 窗体控件的访问本质上不是线程安全的。如果您有两个或更多线程操作控件的状态，则可能会强制控件进入不一致的状态。其他与线程相关的错误也是可能的，包括竞争条件和死锁。确保以线程安全的方式访问控件很重要。
> 
> .NET Framework 可帮助您检测何时以非线程安全的方式访问控件。当您在调试器中运行应用程序并且创建控件的线程以外的线程尝试调用该控件时，调试器会引发 InvalidOperationException 并显示消息“从线程以外的线程访问的控件名称”创建于。”
> 
> 此异常在调试期间可靠地发生，在某些情况下，在运行时发生。强烈建议您在看到此问题时解决此问题。

您可以禁用该异常：

```
Form.CheckForIllegalCrossThreadCalls = false; 
```

但是控件可能（有时会）停止工作。

# c# - 如何在没有本地化字符串的 ViewModel 中使用数据绑定属性工作？

> ID：13157888
> 
> 赞同：1
> 
> 时间：2012-10-31T12:23:22.330
> 
> 标签：c#, xaml, binding, localized

我对 MVVM 不是那么坚定，我希望有人可以帮助我。我正在为 Windows Phone 8 使用 C#/XAML。通常我的 ViewModel 提供一个属性 MyProperty，我会像这样绑定它：

```
<TextBlock Text="{Binding MyProperty, StringFormat='This Property: {0}'}" FontSize="30" /> 
```

问题是在我的视图模型中，有一些数据绑定属性由不同的字符串本地化。例如，假设您有一个约会 - 即将到来或已经过去。该日期应本地化如下：

```
upcoming: "The selected date {0:d} is in the future"
passed: "The selected date {0:d} already passed" 
```

是否可以在 XAML 中进行本地化？或者是否有另一种可能避免视图模型中的本地化字符串？（毕竟在视图模型中避免本地化字符串是可取的吗？）

提前致谢！

问候， 马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:37:34.100

如果您希望在 Xaml 中指定固定格式，它确实支持日期等格式字符串。以 DMY 为例，使用 StringFormat={0:'dd/MM/yyyy'}。它还支持许多预定义的格式。只需搜索“xaml 绑定中的日期格式”即可了解详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:39:55.447

您可以创建本地化资源文件：

字符串.xaml

```
<system:String x:Key="MyKey">English {0} {1}</system:String> 
```

String.de-DE.xaml

```
<system:String x:Key="MyKey">{0} Deutsch {1}</system:String> 
```

而不是在您的视图中按键使用字符串。如果你需要占位符，你可以像这样用多重绑定填充它们：

```
<TextBlock>
   <TextBlock.Text>
      <MultiBinding StringFormat="{StaticResource MyKey}">
            <Binding Path="MyObject.Property1" />
            <Binding Path="MyObject.Property2" />
      </MultiBinding>
   </TextBlock.Text>
</TextBlock> 
```

如果 MyObject.Property1 为“text1”且 MyObject.Property2 为“text2”，则英语的结果将为“English text1 text2”，德语的结果为“text1 Deutsch text2”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:42:04.417

尝试使用[IValueConverter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.ivalueconverter)

例子：

xml:

```
<Window x:Class="ConverterSpike.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ConverterSpike="clr-namespace:ConverterSpike"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ConverterSpike:DateStringConverter x:Key="DateConverter" />
    </Window.Resources>
    <Grid>
        <TextBlock  Text="{Binding MyProperty, Converter={StaticResource DateConverter}}" />
    </Grid>
</Window> 
```

转换器：

```
using System;
using System.Globalization;
using System.Windows.Data;

namespace ConverterSpike
{
    public class DateStringConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value == null) return string.Empty;
            var date = value as string;
            if (string.IsNullOrWhiteSpace(date)) return string.Empty;

            var formattedString = string.Empty; //Convert to DateTime, Check past or furture date, apply string format

            return formattedString;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# database - SQL Server 2008 中从数据库到数据集的位数据类型到枚举类型的映射

> ID：13157891
> 
> 赞同：4
> 
> 时间：2012-10-31T12:23:30.643
> 
> 标签：database, sql-server-2008, datagridview, dataset

我有一个表，它有一个列`Xyz`，它`bit`在 SQL Server 2008 中具有数据类型。

我通过数据适配器从表中获取值，并将其存储在 a 中`DataSet`，a`DataGridView`将显示来自`DataSet`

在 gridview 中，对于 column `Xyz`，显示带有/不带有刻度的复选框，但我想将其显示为作为文本而不是复选框的买入/卖出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:41:11.280

您可以通过 2 种方式中的 1 种方式处理它。

1) 不是将数据作为位返回，而是在查询中进行强制转换，使其根据值将 Buy/Sell 作为字符串返回。只有当您的网格是只读的时，这才会真正有效。如果您需要能够添加/编辑数据，那么将您的买入/卖出转换回位并强制用户只能输入买入/卖出会变得混乱。如果您需要添加/编辑数据，您可能想要使用方法 2。

例如，假设您的列名为 BuySell，并且类型为 bit

```
SELECT CASE WHEN BuySell = CAST(0 AS BIT) THEN 'Buy' ELSE 'Sell' AS BuySell FROM TableName 
```

2) 您必须关闭 DataGridView 上的“Autogeneratecolumns”并手动设置列。如果您的网格是只读的，我会为您的买入/卖出列添加一个文本列，该列映射到您的位值。然后在网格的 Cell_Formatting 事件中，根据位更新值。如下所示：

```
private void dgv_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (dgv.Columns[e.ColumnIndex].Name == "buysell")
    {
        if (e.Value != null)
        {
            if (e.Value.ToString() == "1")
            {
                e.Value = "Sell";
            }
            else
            {
                e.Value = "Buy";
            }
        }
        else
        {
            e.Value = "Buy";
        }
    }
} 
```

如果您的网格需要可编辑，请使用显示成员和值成员设置表示您的买入/卖出值的数据表。将其绑定为组合框列的数据源。现在加载数据将在组合框中正确显示买入/卖出，对于新行，当您从下拉列表中选择一个值时，它将使用正确的位值填充您的基础数据源。

# spring - 使用来自文件和类路径的不同加载器弹簧加载一个配置的部分

> ID：13157893
> 
> 赞同：0
> 
> 时间：2012-10-31T12:23:35.777
> 
> 标签：spring, configuration

是否可以从文件中加载配置的自定义部分并从类路径中自动加载配置的其他部分，放置在 jar 中？

我在 java 上使用 spring 2.5.6 框架编写了命令行应用程序。应用程序的配置由两部分组成：

1.  bigApplicationContext.xml
2.  导入 bigApplicationContext.xml 的 customConfig.xml

bigApplicationContext 引用了一些来自 customConfig 的 bean。

我在 jar 中放置了 bigApplicationContext 和默认的 customConfig。ClassPathXmlApplicationContext 加载的配置。没关系

当我想为我的应用程序--pathToCustomConfig 提供额外的命令行选项时，麻烦就来了

我想从文件中加载配置的自定义部分，并从 bigApplicationContext 中自动加载配置的其他部分，放置在 jar 中。

是否可以？我现在有

> 配置问题：无法从相对位置导入 bean 定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:38:42.227

使用找到解决方案

```
<import resource="classpath:applicationContext.xml" /> 
```

我用了

```
<import resource="applicationContext.xml" /> 
```

# algorithm - 通过skiena理解乐透程序逻辑

> ID：13157894
> 
> 赞同：5
> 
> 时间：2012-10-31T12:23:40.370
> 
> 标签：algorithm

我正在从以下位置阅读文章。这是文本片段表单文档。

[关联](http://www.cs.sunysb.edu/~skiena/papers/lotto.doc)

> 找到保证获胜的最小门票集的问题并非易事。鉴于 R 中的 P 个结果将来自算命者集合，不难看出有 NCP = (N/P!)/(NP)！中奖彩票中可能出现的算命者集合中的可能 P 子集。如果我们从算命者集合 W 次中选择所有 P 子集并任意填充剩余的 RP 槽，则获得的票集将至少有 W 次出现每个 P 子集，并保证我们 W 赢。但是，这样的集合不必是最小的集合，在大多数情况下也不是。
> 
> 我们从算命先生的承诺中得知，其中一个 P 子集将出现在中奖彩票中。两个 P 子集的差异可能小于 J 个数。当这种情况出现时，就共享的 J 个数而言，子集被称为相互重叠或覆盖，并且只有一个 P 子集必须在购买的票中。这个现象最好用一个例子来说明。假设我们正在玩 PICK-4 Lotto 并且需要 2/4 的胜利。因此 R=4，J=2 和 W=1。此外，让我们假设算命先生从一组 5 个数字中预测 3 个数字（即 P=3 和 N=5 ）。如果所有 P 子集都取自算命先生集合并任意填充以完成彩票，我们将有一组十张彩票，保证 2/4 获胜（见图 1）。然而，由于有几个两个数字重叠，因此也可以从该集合中排除一些票。例如，子集 {3, 4, 5} 与 {1, 3, 5} 仅相差一个数字，在购买的门票中同时使用这两个是浪费的。我们可能认为不包括 {3, 4, 5} 将允许失败的可能性，但事实并非如此，因为如果 {3, 4, 5} 发生我们将在 {1, 3, 5}我们买来领奖！类似地，可以有更多的冗余 P 子集。图 2 显示了一个最佳解决方案。我们的彩票问题是从算命者集合中找到最小的 P 子集集合，该集合通过将重叠次数保持在最低限度来保证指定的获胜次数。

我的问题是

1.  正如作者所提到的“如果所有的 P 子集都是从算命先生集合中取出并任意填充以完成票证，我们将有一组十张票”因为缺少文章表中的任何人都可以在这里帮助我什么是 10门票？

2.  在上面的示例中，如果出现 1 和 3，并且如果我们没有选择 {1, 3, 5}，我们如何才能在这里获胜？

3.  谁能想出文章中缺少的图2？

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:55:02.483

1.  这是10张票的低效清单

    ```
    {1, 2, 3, 6}
    {1, 2, 4, 6}
    {1, 2, 5, 6}
    {1, 3, 4, 6}
    {1, 3, 5, 6}
    {1, 4, 5, 6}
    {2, 3, 4, 6}
    {2, 3, 5, 6}
    {2, 4, 5, 6}
    {3, 4, 5, 6} 
    ```

2.  亩。为了获胜，我们需要匹配 4 个中的 2 个。所以不是出现 1 和 3 的情况，而是出现一组特定的 3 个，我们只需要匹配其中的 2 个。

3.  我认为这是最优的。

    ```
    {1, 2, 3, 4} 
    ```

但我并不完全肯定我可以选择 4 个。如果我只允许每张票选择 3 个，那么最佳组合将是：

```
 {1, 2, 3}
    {2, 3, 4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:50:12.923

两张票分别是：

{ 1, 3, 5, X }

{ 2, 4, 5, X }

其中 X 是不影响解的任意选择的数字。

# javascript - html + javascript 中的属性命名空间有什么用？(setAttributeNS)

> ID：13157896
> 
> 赞同：3
> 
> 时间：2012-10-31T12:23:59.677
> 
> 标签：javascript, html, dom

我们中的许多非 jquery javaScript 开发人员一直在使用[domElement.setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)及其姊妹函数来破解无数的 dom 元素，直到互联网的永恒。

无论是 css、dom classNames、可变数据的存储/检索等......

```
var b = document.getElementById("someDiv"); 
b.setAttribute("align", "center"); 
```

* * *

那么其[domElement.setAttributeNS](https://developer.mozilla.org/en-US/docs/DOM/element.setAttributeNS)变体的目的/实际用途是什么？这个问题是关于网络浏览器显示/使用的。而不是在 XML 的上下文中。其中 setAttributeNS 有很多用途。

```
var d = document.getElementById("someDiv"); 
d.setAttributeNS("http://www.mozilla.org/ns/specialspace", "align", "center"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:26:06.393

在 HTML 文档（即`text/html`解析器创建的文档对象）中，`setAttributeNS`.

但是如果看一下 HTML5 解析器在解析外来内容（即 SVG abd MathML）时需要做什么，我们会发现[这张表：调整外来属性](http://w3c.github.io/html/syntax.html#adjust-foreign-attributes)。

因此它会自动将一些属性移动并重命名为 XLink、XML 和 XMLNS 命名空间。当您通过 setAttribute 和 setAttributeNS 等函数操作 DOM 时，不会发生自动移动和重命名，因此要将属性放入正确的命名空间中，您需要使用 setAttributeNS 来创建和修改它们。

`xlink:href`可能是通过 setAttributeNS() 设置的最常见的这些

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:26:27.873

那`domElement`不是`htmlElement`。

当您使用由 XML 构建的 DOM 并使用来自多个名称空间的元素时，它很有用。

（如果您想知道命名空间为何有用，[请参阅此问题](https://stackoverflow.com/questions/8863233/how-do-xml-namespaces-work)）

# jquery - 在脚本中保留对话框的位置

> ID：13157900
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:07.617
> 
> 标签：jquery, html, jquery-ui

我有一个表格，我希望显示一个带有对话框的部分。

但是，当我将表单内的 div 分配给对话框时，它将位于脚本的底部，而不是表单元素内，因此我无法提交值。

喜欢：

```
<form>
<div id="dialog_container"><input name="test"></div>
</form>
<script> $('#dialog_container').dialog();</script> 
```

在这种情况下，div 不会留在表单标签中。

你会如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:18:24.690

我添加了同样的问题，我所做的是为我的每个对话框表单添加一个隐藏的输入。

然后在对话框关闭时，我可以用对话框中的值替换隐藏的输入。

像这样的东西：

```
<div id="dialog_container">
  <form id="dialog_form">
    ... any input ...
  </form>
</div>

<form id="main_form">
  <input type="hidden" id="test">
</form> 
```

在javascript中类似：

```
 $("#dialog_container").dialog({
    close: function(ev, ui) { 
         var dialogInput // build inputs from dialogInputs
                         // you can even mix former inputs with new ones
         $("#test").replaceWith( dialogInput  )
    }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:32:04.850

像这样将标签放入对话框容器中：

```
<div id="dialog_container">
    <form>
       <input name="test">
    </form>
</div> 
```

**编辑**

为什么不想在对话框中添加 onChange 事件，然后将这些值以原始形式放在隐藏字段中，或者从对话框表单中序列化 json 对象，然后将其放入隐藏字段中。

**或者**

使用这个 css 将该部分放入 div 中：

#dialog_container { 位置：固定；顶部：10px；左：10px；背景颜色：白色；显示：无；}

在用户点击打开对话框后，只需调用： $('#dialog_container').show();

演示：http: [//jsfiddle.net/UpzSQ/5/](http://jsfiddle.net/UpzSQ/5/)

# c# - C# 远程运行 defrag.exe

> ID：13157901
> 
> 赞同：3
> 
> 时间：2012-10-31T12:24:08.600
> 
> 标签：c#, wmi

我正在尝试创建一个实用程序来对我网络上的所有机器进行碎片整理。我使用 WMI 的 Defrag 和 DefragAnalysis 方法取得了成功，但是它们与 Windows XP 不兼容。这是一个问题，因为我们在网络上有一些 XP 机器。我已经能够在 XP 机器上本地调用 defrag.exe 进程来执行碎片整理，但是我在远程机器上调用它时遇到问题。下面是我在本地工作的代码，有人可以帮我在我的网络上为远程机器工作吗？我曾尝试使用一些 WMI 来提供帮助，但由于我是 C# 和 WMI 的新手，所以我没有成功，谢谢！

```
ProcessStartInfo info = new ProcessStartInfo();
info.FileName = "defrag";
info.Arguments = volume + " -f";
info.UseShellExecute = false;
info.CreateNoWindow = true;
info.RedirectStandardOutput = true;

Process defrag = Process.Start(info);
defrag.PriorityClass = ProcessPriorityClass.BelowNormal;

while (!defrag.HasExited)
{
    System.Threading.Thread.Sleep(1000);
    Process[] procs = Process.GetProcessesByName("dfrgntfs");
    if (procs != null && procs.Length > 0)
    {
        procs[0].PriorityClass = ProcessPriorityClass.Idle;
        defrag.WaitForExit();
    }

    result = null;
    while(!defrag.StandardOutput.EndOfStream)
    {
        //get output and store results
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:16:11.083

只是为了完成这个线程，我想我会发布对我真正有用的代码，为了让这个代码工作，你必须下载 PsTools 并将其放在根目录中......

```
 Process psexec = new Process();

            psexec.StartInfo.FileName = @"C:\PsExec.exe";
            psexec.StartInfo.Arguments = @"-s \\" + machine + " defrag.exe " + volume + " -f";
            psexec.StartInfo.UseShellExecute = false;
            psexec.StartInfo.CreateNoWindow = true;
            psexec.StartInfo.RedirectStandardOutput = true;

            psexec.Start();

            while (!psexec.HasExited)
            {
                System.Threading.Thread.Sleep(1000);

                Process[] procs = Process.GetProcessesByName("dfrgntfs", @"\\" + machine);
                if (procs != null && procs.Length > 0)
                {
                    psexec.WaitForExit();
                }

                while (!psexec.StandardOutput.EndOfStream)
                {
                    //get output and store results
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:37:07.273

我可能只是使用[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)远程运行命令。这应该适用于几乎任何 Windows (NT) 版本。

# c# - 使用 NetOffice Interop 创建 Excel 文档时出错

> ID：13157904
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:23.567
> 
> 标签：c#, excel, excel-interop

当我尝试使用我的 c# 应用程序创建一个 excel 文档时，我收到了以下未处理的异常。当我从 Visual Studio 10 运行 c# 应用程序时，此过程运行良好，但是当我尝试使用 .exe 文件在 Visual Studio 之外运行应用程序时，出现此错误。

```
System.IO.FileNotFoundException: Could not load file or assembly 'ExcelApi, Version=1.5.1.2, Culture=neutral, PublicKeyToken=9084b9221296229e' or one of its dependencies. The system cannot find the file specified.
File name: 'ExcelApi, Version=1.5.1.2, Culture=neutral, PublicKeyToken=9084b9221296229e' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:00:33.250

显然，您的项目有一个名为 ExcelApi.dll 的程序集，该程序集在目标计算机上缺失。我假设这是一个 NetOffice dll，在输出目录中需要它才能运行您的项目。

打开您的项目目录（根据您的 VS 版本，您可以在解决方案资源管理器中右键单击该项目，然后选择在 Windows 资源管理器中打开文件夹）。进入 \bin 文件夹，然后进入与您的构建配置匹配的文件夹（很可能是 Debug，但它可能是其他内容，具体取决于您的项目的设置方式）。在该目录中，将所有 .exe、.dll 和 .config 文件复制到您尝试从中运行程序的目录。

特别是，您至少需要可执行文件和配置文件，以及 ExcelApi.dll、OfficeApi.dll、VBIDEApi.dll 和 NetOffice.dll。有关详细信息，请参见[此处](http://netoffice.codeplex.com/documentation)。

# android - 有办法在所有页面中保留以前的布局吗？

> ID：13157905
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:23.187
> 
> 标签：android, layout, button

我想创建一个在页面底部有 5 个按钮的应用程序，当用户单击任何按钮时，页面会发生变化，但 5 个按钮仍保留在页面底部。现在我创建了这个程序，但是当我在其他类中调用 setContentView() 时，因为我调用了其他布局，按钮被删除。有办法保留5个按钮吗？或者我应该在 5layout 中再次创建 5buttons？

谢谢干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:36:34.793

最简单的方法是在所有布局文件中制作一个包含 5 个按钮的布局示例

```
<include layout="@layout/titlebar"/> 
```

或者另一种方法是使用片段，这样只有片段有变化，保持其他布局内容相同
**编辑**
***或***使用`<merge>`标签
当`<merge />`在另一个布局中包含一个布局时，标签有助于消除视图层次结构中的冗余视图组。例如，如果您的主布局是一个垂直的 LinearLayout，其中两个连续的视图可以在多个布局中重复使用，那么放置两个视图的可重复使用的布局需要它自己的根视图。但是，使用另一个 LinearLayout 作为可重用布局的根会导致在垂直 LinearLayout 中出现垂直 LinearLayout。除了降低 UI 性能之外，嵌套的 LinearLayout 没有任何实际用途。

为了避免包含这样一个冗余的视图组，您可以使用该元素作为可重用布局的根视图。例如：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <Button
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="@string/add"/>

    <Button
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="@string/delete"/>

</merge> 
```

现在，当您将此布局包含在另一个布局中（使用标签）时，系统会忽略该元素并将两个按钮直接放置在布局中，以代替标签。

请通过[此](http://developer.android.com/training/improving-layouts/reusing-layouts.html)链接获取有关重用布局的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:08:31.010

感谢您的回答。我阅读了开发人员链接，并将合并和包含标记添加到 xml 文件，但程序有错误。为什么？

MainActivity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<include layout="@layout/location"/>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1.0" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/background"
    android:gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button_home"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/home_icon"
        android:text="@string/button_home"
        android:textColor="@color/text_home" />

    <Button
        android:id="@+id/button_product"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/product_icon"
        android:onClick="Product"
        android:text="@string/button_product"
        android:textColor="@color/text_product" />

    <Button
        android:id="@+id/button_places"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/places_icon"
        android:onClick="Places"
        android:text="@string/button_places"
        android:textColor="@color/text_places" />

    <Button
        android:id="@+id/button_rewards"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/rewards_icon"
        android:onClick="Rewards"
        android:text="@string/button_rewards"
        android:textColor="@color/text_rewards" />

    <Button
        android:id="@+id/button_more"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableTop="@drawable/more_icon"
        android:onClick="More"
        android:text="@string/button_more"
        android:textColor="@color/text_more" />
</LinearLayout>

</LinearLayout> 
```

位置.xml

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">
<TextView>
<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    android:apiKey="0cPRv243zM1_S3ydsNg8MJP9_6BfCp642jOhPvQ"/>
<LinearLayout
    android:id="@+id/zoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"/>

</LinearLayout>
</merge> 
```

什么是不正确的？谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:33:50.373

据我所知，我认为您正在寻找标签而不是按钮。看看[这个](https://stackoverflow.com/questions/2970844/example-of-using-android-tabs-with-views-instead-of-activities)。

# wcf - 数据源是另一个 WCF 数据服务的 WCF 数据服务

> ID：13157908
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:28.880
> 
> 标签：wcf, wcf-data-services

有人知道是否可以将一个 WCF 数据服务用作另一个 WCF 数据服务的数据源？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:19:44.297

所以简短的回答是肯定的。实际上我已经在另一个中使用了一个 WCF 服务（HttpBinding 进入计算机上的服务，然后该服务有一个 NamedPipesBinding 服务来与多个桌面应用程序通信，但它在中间进行了一些数据转换）。这根本不是问题，您可以像在桌面客户端中一样设置代理/客户端，并处理新服务中的所有内容，就好像它只是传递信息一样，您甚至可以为DataContracts 等。

**然而**我不建议在您的实现中使用跳跃方法。根据您可能打开门的客户数量，您可能会引入瓶颈，如果您有单例服务，或者在新服务有许多连接的情况下使现有服务超载。既然你有一个 SQL 服务器，为什么你的 Web/应用服务器（公共）上没有 WCF 服务来连接它并提供你需要的数据？我之所以这么想，是因为当您开始尝试在两者之间传递用于身份验证和授权的凭据时，您的情况可能会呈指数级复杂化，具体取决于您的安全设置。另一件要考虑的事情是调试这个新服务和旧服务的复杂性，同时调试一个客户端，好像只做服务器和客户端并不痛苦，

抱歉，如果这与您希望听到的内容背道而驰。我只是说这*是*可能的，但在您的特定情况下没有建议（至少由我建议）。

# jquery - Struts2 日期选择器位置

> ID：13157911
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:36.837
> 
> 标签：jquery, struts2, jquery-ui-datepicker

是否可以将日期选择器位置向右偏移一点？

```
<sj:datepicker name="displayEnd" required="true"
            key="displayEnd-label" displayFormat="dd-mm-yy" timepicker="true"
            timepickerStepMinute="15" readonly="true" minDate="-30"
            onBeforeTopics="setTimeToNowIfNotSet" /> 
```

我在文档中看不到设置位置的任何地方。我想将日期选择器向右偏移一点，这样它就不会覆盖其他字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:46:34.053

我不确定 Struts2 是否与 jQuery Datepicker 相关，但无论如何您都可以尝试为您的 sj:datepicker 分配一个 css 类并在那里进行调整。

```
<sj:datepicker name="displayEnd" required="true" class="sjDatePicker" id="displayEnd"
            key="displayEnd-label" displayFormat="dd-mm-yy" timepicker="true"
            timepickerStepMinute="15" readonly="true" minDate="-30"
            onBeforeTopics="setTimeToNowIfNotSet" /> 
```

在您页面的布局 CSS 文件中：

```
.sjDatePicker
{
  /*Make your positioning adjustments here*/
} 
```

在更改任何内容之前，您可以尝试打开浏览器的 javascript 控制台并输入以下内容以查看修改 datepickers 样式是否有效。（前提是您使用的是 jquery）

```
$('#displayEnd').css("margin-top","20px"); 
```

如果这可行，那么修改 CSS 文件中的样式也应该如此。

请注意，您的 datepicker 元素需要具有 id“displayEnd”才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:31:26.343

您可以在 CSS 中执行此操作，但如果您在同一页面上有多个日期选择器，它将全部抵消。

```
#ui-datepicker-div {
 margin-left: a_little_bit;
} 
```

# core-data - 核心数据 - 谓词获取类别

> ID：13157914
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:52.337
> 
> 标签：core-data, ios6, fetch, predicate

我目前正在开发一个使用 Core Data 的应用程序。我正在处理的问题是使用谓词获取数据，示例如下所示：

```
[[self managedObjectContext] fetchObjectsForEntityName:@"Employee" withPredicate:
@"(lastName LIKE[c] 'Worsley') AND (salary > %@)", minimumSalary]; 
```

我想要做的是从某个数据集中获取不同类别的数量，如下所示：

实体人：

-名称（字符串）

-位置（字符串）

-年龄（诠释）

因此，例如，如果我在数据集中有 3 个样本：[Lisa, Sweden, 30] [Mike, USA, 24] [Jacob, England, 28]

我现在想获取不同位置的数量，这可能吗？

非常感谢

罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:41:47.950

在 FetchResults 控制器方法中，添加以下代码。

```
[fetchRequest setReturnsDistinctResults:YES];

[fetchRequest setResultType:NSDictionaryResultType];

[fetchRequest setPropertiesToFetch:[NSArray arrayWithObject:[entityProperties objectForKey:@"value"]]]; 
```

从returnsDistinctResults的文档中：

```
This value is only used if a value has been set for propertiesToFetch. 
```

从 propertiesToFetch 的文档中：

```
This value is only used if resultType is set to NSDictionaryResultType. 
```

从 resultType 的文档中：

```
The default value is NSManagedObjectResultType. 
```

# prolog - 类型错误：错误的对象类型。- 基本序言错误

> ID：13157915
> 
> 赞同：0
> 
> 时间：2012-10-31T12:24:57.530
> 
> 标签：prolog

我正在尝试学习序言，但遇到了这个错误，我不知道为什么会得到它，所以我寻求您的帮助。

代码（TPROLOG#86）：

```
trace 

domains
    item = integer
    intList = item*

predicates
    member(item,intList)

clauses
    member(elm,[elm|_]).

    member(elm,[_|T]):-  %%%  ***ELM is seen as wrong type, why?***
        member(item,[T]).

goal
    member(5,[1,2,3,4,5]) 
```

欢迎任何建议或提示。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:33:27.333

你混淆了变量和原子。原子以小写字母开头，而变量以大写字母开头。

另外，您的`member/2`定义似乎是错误的。它应该是：

```
clauses
    member(Elm,[Elm|_]).
    member(Elm,[_|T]):-  
        member(Elm,T). 
```

第一个子句将元素与第二个列表的头部匹配。第二个子句跳过第二个列表的头部并递归调用`member/2`以在列表的尾部找到另一个匹配项。

# sql - 根据特定条件从 3 个不同的表中获取值

> ID：13157923
> 
> 赞同：0
> 
> 时间：2012-10-31T12:25:25.133
> 
> 标签：sql, ruby-on-rails, database, ruby-on-rails-2

我的数据库中有 3 个表

1.  用户（id、用户名、电子邮件、密码等...）
2.  生产者（id，user_id）
3.  地址（名字、城市、addressable_id 等）

生产者与用户表（User.id = Producer.user_id）和地址表（p.id = Address.addressable_id）有链接

现在我想用他的用户名获取所有生产者地址

我正在尝试以下查询，但它没有给出预期的输出

```
select u.login, p.id, a.city from producers p

join users u on u.id = p.user_id

join addresses a on a.addressable_id = p.id 
```

## 我的模型和关系

**用户.rb**

```
class User < ActiveRecord::Base
  has_one :customer
  has_one :producer
end 
```

**生产者.rb**

```
class Producer < ActiveRecord::Base
  belongs_to :user
  belongs_to :updated_by_user, :class_name => "User", :foreign_key => "updated_by_user_id"

  has_one :address, :as => :addressable
  has_many :items  
end 
```

**地址.rb**

```
class Address < ActiveRecord::Base
  belongs_to :addressable, :polymorphic => true

  belongs_to :updated_by_user, :class_name => "User", :foreign_key => "updated_by_user_id"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:32:09.937

您将要使用（[docs](http://apidock.com/rails/v3.2.8/ActiveRecord/QueryMethods/select)）的`#select`方法。`ActiveRecord::Relation`

导轨 3.X：

```
Producer.joins(:user, :address).select("users.login, producers.id, addresses.city") 
```

导轨 2.X：

```
Producer.all(:joins => [:user, :address], :select => "users.login, producers.id, addresses.city") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:33:02.810

您的查询看起来不错。

尝试从“加入”更改为“左加入”，看看结果如何。

```
select u.login, p.id, a.city from producers p

left join users u on u.id = p.user_id

left join addresses a on a.addressable_id = p.id 
```

其背后的原因是可能缺少其中一个 id，从而删除了整个结果。如果是这种情况，您将能够看到一些具有 NULL 值的列。

# ios6 - UICollectionViewController 在 popviewcontroller 后冻结

> ID：13157929
> 
> 赞同：2
> 
> 时间：2012-10-31T12:25:45.277
> 
> 标签：ios6

我是 iOS 编程的新手。我对收藏视图的强大和易用性感到非常惊讶。但我有一个问题。

我有一个“家”视图控制器 - A，它是 UICollectionViewController。我有一个左按钮（如导航栏上的 Facebook），我使用重定向到另一个视图控制器

```
[self.navigationController pushViewController:controller animated:YES]; 
```

当用户按下后退按钮时，会出现“主页”视图控制器。并调用 viewWillAppear 和其他集合视图委托/数据源方法。但桌子被冻结了。它不滚动，做任何事情。

但是，如果我在左侧按钮上按下“主页”按钮，则会调用 viewWillLoad 和其他方法，并且集合视图可以正常工作。我在 viewWillLoad 中没有任何代码。我已将所有内容移至 viewWillAppear 进行测试。

请帮忙

# jquery - JQuery - 来自 .data() 的数据丢失

> ID：13157930
> 
> 赞同：3
> 
> 时间：2012-10-31T12:26:17.443
> 
> 标签：jquery

我在创建锚点、存储数据并将其附加到 div 元素的函数中有此代码

```
var x = $("<a class='randomclass'></a>");
x.data('foo', 'bar');
console.log(x.data());
...
$("<div></div>").append(
    x
);
... 
```

现在，当我尝试使用一个事件处理程序来获取该数据时，它显示它未定义。我尝试了不同的方法来访问元素，但它们都没有返回数据

```
$("body").on("click", "a.randomclass", function (event) {
   event.preventDefault();
   console.log( $(event.target).data('foo') );
   console.log( $(event.currentTarget).data('foo') );
   console.log( $(this).data('foo') );
}); 
```

为什么会这样？

编辑：修正错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:56:42.983

好的，我想我找到了答案。

问题是我使用 .html() 获得了元素的标记并将其传递给函数。

我想这意味着该元素的任何数据都会丢失，因为 .html() 只是获取该元素的字符串表示形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:31:56.910

似乎对我有用。[jsFiddle](http://jsfiddle.net/TheJoeFletch/XWDeE/)

```
var x = $("<a class='randomclass'>test link</a>");
x.data('foo', 'bar');
console.log(x.data());

$("body").append(x);

$("body").on("click", "a.randomclass", function(event) {
    event.preventDefault();
    console.log($(this).data());
});​ 
```

# database - CodeIgniter 分类我需要数据库草图

> ID：13157932
> 
> 赞同：0
> 
> 时间：2012-10-31T12:26:28.007
> 
> 标签：database, codeigniter

我无法想象如何创建分类结构。示例我有汽车广告页面，可以有年份、价格等字段。我有手机页面，可以是价格、颜色、显示尺寸等字段。对于另一个页面可以是另一个字段，我需要动态添加它们，它可以是选择字段、文本输入或复选框。

那么如何添加用于过滤广告的新字段，在哪里保留表单验证规则？

有人可以给我一张数据库草图，我可以解释所有这些过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:27:19.690

首先画一些简单的东西，比如广告标题、价格等。拿一张纸，在纸上列出你需要的功能，然后将它们分组并将草图写在纸上

# c# - wmi c#. 从远程机器复制文件

> ID：13157935
> 
> 赞同：1
> 
> 时间：2012-10-31T12:26:41.360
> 
> 标签：c#, copy, wmi, remote-server

我使用 mgmtclassgen.exe 并为 CIM_DataFile wmi 类获取 wrapper(DataFile.cs) 类。下面的代码在 localhost 上完美运行（不填充凭证），但是当我连接到远程机器变量 returnResult=9 （无效对象）时。但是变量 dataFileCollection 的大小=1

```
var _connectionOptions = new ConnectionOptions();
                _connectionOptions.Username = "username";
                _connectionOptions.Password = "password";
                _connectionOptions.Authority = String.Format("ntlmdomain:{0}", "DOMAIN");
var _managementScope = new ManagementScope(String.Format("\\\\{0}\\root\\cimv2",  
"RemotePCName"), _connectionOptions);
    var dataFileCollection = DataFile.GetInstances(_managementScope,
                    @"Name = 'C:\\Windows\\System32\\mapisvc.inf'";
                var tempFilePath =  "c:\\temp.txt");
                if (dataFileCollection.Count > 0)
                {
                    foreach (var dataFile in dataFileCollection.Cast<DataFile>())
                    {
                        var returnResult = dataFile.Copy(tempFilePath);
                        if (File.Exists(tempFilePath))
                        {
                            List<string> lines = File.ReadAllLines(tempFilePath).ToList();
                            File.Delete(tempFilePath);
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:36:39.380

尝试以不同的方式调整您的管理范围也许您可以尝试如下：

```
ManagementObjectSearcher searcher =
                    new ManagementObjectSearcher(
                        "\\\\" + strComputer + "\\root\\CIMV2",
                        "SELECT * FROM Win32_PerfFormattedData_MSSQLSERVER_SQLServerDatabases"); 
```

其中 strComputer 是远程 pc 的名称和 Win32_Perf...您要查询的类。这对我有用，因为它在本地网络中，但我不确定您的远程机器位于何处。

您也可以访问[http://www.microsoft.com/en-us/download/details.aspx?id=8572](http://www.microsoft.com/en-us/download/details.aspx?id=8572)，它是 Microsoft 的 WMI 查询生成器。这允许您在 C#、VB 和 VB 脚本中生成查询。在设置连接属性时。可能值得一试。

# .net - 如何设置组合框自动完成下拉菜单中使用的字体

> ID：13157936
> 
> 赞同：8
> 
> 时间：2012-10-31T12:26:45.900
> 
> 标签：.net, vb.net, fonts, combobox, tamil

在我的桌面应用程序中，我在 ComboBox 字体属性中使用了泰米尔语字体（不是 unicode，而是字形）。

当我输入它时，它显示得很好。但是我在下拉框中的自动建议显示为默认字体。如何更改该字体以及？

```
Private Sub Billing_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown
  If My.Settings.Options_Display_UseOtherLanguage Then
       CustomerNameCombo.Font = My.Settings.Options_Display_OtherLanguageFont
  End If
End Sub 
```

![vb.net 中的泰米尔语](../Images/64e40cb30b1f448ce70258d1cbac15fe.png)

我正在使用 .NET Framework v4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:40:51.913

![在此处输入图像描述](../Images/4a494b163a28932bbe13367f877b4286.png)

您是否使用自定义来源进行自动建议？如果是这样，来源也应该是相同的语言。（即）在这种情况下，自动建议来源也应该是泰米尔语。

否则设置`AutoCompleteSource`为`ListItems`，其中数据源为泰米尔语

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:10:53.553

您应该检查 ComboBox 的[DropDownStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownstyle.aspx)属性。您应该能够在 DrawItem 事件中为您的 ComboBox 设置字体。我提供的 MSDN 链接有一个示例，可以为您指明正确的方向。希望能帮助到你。

# iphone - ios localpush - object declared in viewcontroller.h is not reconized in viewcontroller.m

> ID：13157939
> 
> 赞同：0
> 
> 时间：2012-10-31T12:26:54.663
> 
> 标签：iphone, ios, xcode

I got to work on ios push notification for an web based app.

but I am practicing local push first while I am pending state in IOS developer program.

I found source code of local push and adjusted the code to two places where I thought the right place
- viewController.h, viewController.m.

below is the two files.

viewController.h file

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITextField *timeTextField;
- (IBAction)onSaveAlertTime:(id)sender;
@end 
```

viewController.m file

```
(IBAction)onSaveAlertTime:(id)sender {
// Do any additional setup after loading the view, typically from a nib.
UILocalNotification *localNofication = [[UILocalNotification alloc] init];
if (localNofication == nil) return;
NSDate *pushDate = [[NSDate date] dateByAddingTimeInterval:[timeTextField.text intValue]];

localNofication.fireDate = pushDate;
localNofication.timeZone = [NSTimeZone defaultTimeZone];
localNofication.alertBody = @"Local Push Notification!";
localNofication.alertAction = @"View";
localNofication.soundName = UILocalNotificationDefaultSoundName;
localNofication.applicationIconBadgeNumber = 1;

NSDictionary *userInfo = [NSDictionary dictionaryWithObject: @"오늘의 일정은 로컬푸시를 테스트하는 것 입니다" forKey:@"message"];

localNofication.userInfo = userInfo;
[[UIApplication sharedApplication] scheduleLocalNotification:localNofication];

} 
```

It looks like my viewController.m file does not reconize timeTextField object which declared

in viewController.h file. What should I do to reconize timeTextField object?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:31:02.560

Did you synthesize your text field?

```
@synthesize timeTextField; 
```

In the beginning of your .m file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:36:29.440

Since it's a property of the object, you should reference in using `self.timeTextField.text`.

(When you report a problem, you should describe the actual symptoms. "does not reconize" is not easy to diagnose.)

# web - 指向多个域的 DNS 数据

> ID：13157941
> 
> 赞同：0
> 
> 时间：2012-10-31T12:27:02.010
> 
> 标签：web, dns

对于我拥有的所有域，我的 DNS 数据如下所示。我需要将其中一个指向 mywebsite 上的此目录：var/newdomain/ 因为以下数据指向 var/www

```
$TTL 86400
@   IN SOA ns1.first-ns.de. postmaster.robot.first-ns.de. (
    2011042200   ; serial
    14400        ; refresh
    1800         ; retry
    604800       ; expire
    86400 )      ; minimum

@                        IN NS      robotns3.second-ns.com.
@                        IN NS      robotns2.second-ns.de.
@                        IN NS      ns1.first-ns.de.

@                        IN A       40.4.111.77
localhost                IN A       127.0.0.1
mail                     IN A       40.4.111.77
www                      IN A       40.4.111.77
ftp                      IN CNAME   www
imap                     IN CNAME   www
loopback                 IN CNAME   localhost
pop                      IN CNAME   www
relay                    IN CNAME   www
smtp                     IN CNAME   www
@                        IN MX 10   mail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:50:35.493

在同一台服务器上托管第二个域涉及在 Web 服务器上设置虚拟主机。

如果您需要创建基于 IP 的虚拟主机并将第二个唯一 IP 地址分配给托管第一个网站的网络适配器。DNS 更改仅意味着您为新 IP 地址添加新的 A 记录。例如：

```
newdomain IN A 40.4.111.78 
```

如果获得第二个唯一 IP 地址不是您想要的，那么您的 Web 服务器将不得不使用基于名称的虚拟主机。这涉及设置新的 CNAME 记录。

```
newdomain IN CNAME www 
```

这个问题似乎暗示 DNS 以某种方式将 Web 用户定向到托管的 /var/newdomain 目录，但事实并非如此。必须将 Web 服务器配置为执行此操作。DNS 名称只为 Web 服务器提供一些信息，以便决定它应该服务于哪个区域。

如果基本问题是如何在 Web 服务器上托管第二个域，则应直接询问。

# bash - 加速 bash 过滤器功能以连续运行命令而不是每行

> ID：13157947
> 
> 赞同：0
> 
> 时间：2012-10-31T12:27:16.743
> 
> 标签：bash, shell, filter, highlighting, grep

我在 ~/.bash_profile 中编写了以下过滤器作为函数：

```
hilite() {
 export REGEX_SED=$(echo $1 | sed "s/[|()]/\\\&/g")
 while read line
 do
  echo $line | egrep "$1" | sed "s/$REGEX_SED/\x1b[7m&\x1b[0m/g"
 done
 exit 0
} 
```

查找与正则表达式匹配的任何内容的行，并在与 VT100 兼容的终端上使用 ANSI 转义码突出显示匹配项。

例如，以下查找并突出显示字符串*bin*、*U*或*1*，它们是 /etc/passwd 的最后 10 行中的整个单词：

```
tail /etc/passwd | hilite "\b(bin|[U1])\b" 
```

然而，脚本运行非常缓慢，因为每一行都分叉了一个 echo、egrep 和 sed。

在这种情况下，对整个输入执行 egrep 并在其输出上运行 sed 会更有效。

我怎样才能修改我的功能来做到这一点？如果可能，我宁愿不创建任何临时文件。

PS有没有另一种方法可以以类似的方式查找和突出显示线条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:34:57.237

我认为您可以简单地替换整个`while`循环

```
sed -n "s/$REGEX_SED/\x1b[7m&\x1b[0m/gp" 
```

因为`sed`可以逐行从标准输入读取，所以你不需要`read`

我不确定运行`egrep`和管道`sed`是否比`sed`单独使用更快，但您始终可以比较使用`time`.

编辑：添加`-n`并`p`仅`sed`打印突出显示的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:10:48.713

如果您`egrep`支持`--color`，只需将其放在 .bash_profile 中：

```
 hilite() { command egrep --color=auto "$@"; } 
```

（就个人而言，我将函数命名为`egrep`；因此使用`command`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T19:10:03.983

`sed`可以自己做一些 grepping：如果你给它`-n`标志（或`#n`脚本中的指令）它不会回显任何输出，除非被问到。所以

```
while read line
 do
  echo $line | egrep "$1" | sed "s/$REGEX_SED/\x1b[7m&\x1b[0m/g"
 done 
```

可以简化为

```
sed -n "s/$REGEX_SED/\x1b[7m&\x1b[0m/gp" 
```

编辑：这是整个功能：

```
hilite() { 
    REGEX_SED=$(echo $1 | sed "s/[|()]/\\\&/g");
    sed -n "s/$REGEX_SED/\x1b[7m&\x1b[0m/gp"
} 
```

这就是它的全部 - 没有while循环，阅读，grepping等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:28:56.140

好吧，你可以简单地这样做：

```
egrep "$1" $line | sed "s/$REGEX_SED/\x1b[7m&\x1b[0m/g" 
```

但我不确定它会快得多；)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T20:05:46.877

仅作记录，这是一种使用临时文件的方法：

```
hilite() {
 export REGEX_SED=$(echo $1 | sed "s/[|()]/\\\&/g")
 export FILE=$2
 if [ -z "$FILE" ]
 then
  export FILE=~/tmp
  echo -n > $FILE
  while read line
  do
   echo $line >> $FILE
  done
 fi
 egrep "$1" $FILE | sed "s/$REGEX_SED/\x1b[7m&\x1b[0m/g"
 return $?
} 
```

它也将文件/路径名作为第二个参数，例如

```
cat /etc/passwd | hilite "\b(bin|[U1])\b" 
```

# java - java - 如何在java中启用防火墙和路由器权限以使用套接字发送文件？

> ID：13157949
> 
> 赞同：0
> 
> 时间：2012-10-31T12:27:26.597
> 
> 标签：java, sockets, exception, firewall, connection-timeout

我一直在开发一个 Swing 应用程序，当我想添加一个选项，用户可以通过本地网络发送文件时，我遇到了一些严重的问题。

为了通过网络发送文件，我使用了 Sockets 库来创建客户端和服务器之间的连接，Client.java 的源代码是：

```
 package Test;

    import java.io.BufferedOutputStream;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.net.Socket;

    public class Client{
    public static void main (String [] args ) throws IOException {
     int filesize=6022386; // filesize temporary hardcoded

     long start = System.currentTimeMillis();
     int bytesRead;
     int current = 0;

      Socket sock = null;
      try{
      sock = new Socket("192.168.1.107",1234);
     }catch(Exception e){
       e.printStackTrace();
       e.getCause();
      }
       System.out.println("Connecting...");

       // receive file
      byte [] mybytearray  = new byte [filesize];
      InputStream is = sock.getInputStream();
      FileOutputStream fos = new FileOutputStream("C:\\Test\\test-copy.txt");
      BufferedOutputStream bos = new BufferedOutputStream(fos);
      bytesRead = is.read(mybytearray,0,mybytearray.length);
      current = bytesRead;

       do {
         bytesRead =
         is.read(mybytearray, current, (mybytearray.length-current));
        if(bytesRead >= 0) current += bytesRead;
        } while(bytesRead > -1);

        bos.write(mybytearray, 0 , current);
        bos.flush();
        long end = System.currentTimeMillis();
        System.out.println(end-start);
        bos.close();
        sock.close();
        sock.getPort();
  }
  } 
```

Server.java 的源代码是：

```
 package Test;

  import java.io.BufferedInputStream;
  import java.io.File;
  import java.io.FileInputStream;
  import java.io.IOException;
  import java.io.OutputStream;
  import java.net.ServerSocket;
  import java.net.Socket;

  public class Server{
  public static void main (String [] args ) throws IOException {
    // create socket
    ServerSocket servsock = new ServerSocket(1234);
    while (true) {
    System.out.println("Waiting...");

   Socket sock = servsock.accept();
  //servsock.set
  System.out.println("Accepted connection : " + sock);

  // sendfile
 File myFile = new File ("C:\\testing\\test.txt");
 byte [] mybytearray  = new byte [(int)myFile.length()];
 FileInputStream fis = new FileInputStream(myFile);
 BufferedInputStream bis = new BufferedInputStream(fis);
 bis.read(mybytearray,0,mybytearray.length);
 OutputStream os = sock.getOutputStream();
 System.out.println("Sending...");
 os.write(mybytearray,0,mybytearray.length);
 os.flush();
  sock.close();
 }
 }
 } 
```

如您所见，我想将 test.txt 文件从我的计算机发送到本地网络中存在的另一台计算机。当我运行 Server.Java 和 Client.java 时，我在终端中遇到异常，提示连接超时：

```
java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
Connecting...
at  java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208)
at Test.NewClass1.main(Client.java:27)
Exception in thread "main" java.lang.NullPointerException
at Test.Client.main(Client.java:36) 
```

更让我困惑的是，当我使用我的 Localhost 运行应用程序时，文件**test-copy.txt**的副本创建得很好，我查找了异常的原因，我发现它可能是防火墙权限，我为端口启用了事务：1234，但我仍然遇到同样的错误。

我在这里要问的是，这是权限问题还是特权问题？如果是，我应该将什么设置为防火墙或路由器的配置以启用事务？我的计算机也设置为管理员和目标，我使用 Windows 7 作为操作系统

我希望我把我的问题说清楚了。

谢谢 ：）。

# java - 从 Java 类访问 Config.groovy

> ID：13157951
> 
> 赞同：6
> 
> 时间：2012-10-31T12:27:28.833
> 
> 标签：java, grails, configuration, groovy

当我的 Grails 应用程序启动时，我还会在后台启动 Spring Integration and Batch 进程。我想在 Config.groovy 文件中存储一些数据库连接属性，但是如何从集成/批处理过程中使用的 Java 类访问它们？

我找到了这个线程：

[转换 Java -> Grails ...如何加载这些属性？](https://stackoverflow.com/questions/5378609/converting-java-grails-how-do-i-load-these-properties)

这建议使用：

```
private Map config = ConfigurationHolder.getFlatConfig(); 
```

其次是：

```
String driver = (String) config.get("jdbc.driver"); 
```

这实际上工作正常（从 Config.groovy 正确加载属性），但问题是 ConfigurationHolder 在被弃用之后。我发现处理该问题的任何线程似乎都是 Grails 特定的，并建议使用依赖注入，就像在这个线程中一样：

[如何在 Grails 2.0 中访问 Grails 配置？](https://stackoverflow.com/questions/7133580/how-to-access-grails-configuration-in-grails-2-0)

那么有没有一种不被弃用的方法来从 Java 类文件中访问 Config.groovy 属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:56:24.580

刚刚检查了我现有的一些代码，我使用[了 Burt Beckwith 描述的这种方法](http://burtbeckwith.com/blog/?p=1017)

创建一个新文件： `src/groovy/ctx/ApplicationContextHolder.groovy`

```
package ctx

import org.springframework.context.ApplicationContext
import org.springframework.context.ApplicationContextAware
import javax.servlet.ServletContext

import org.codehaus.groovy.grails.commons.GrailsApplication
import org.codehaus.groovy.grails.plugins.GrailsPluginManager
import org.springframework.context.ApplicationContext
import org.springframework.context.ApplicationContextAware

@Singleton
class ApplicationContextHolder implements ApplicationContextAware {
  private ApplicationContext ctx

  private static final Map<String, Object> TEST_BEANS = [:]

  void setApplicationContext(ApplicationContext applicationContext) {
    ctx = applicationContext
  }

  static ApplicationContext getApplicationContext() {
    getInstance().ctx
  }

  static Object getBean(String name) {
    TEST_BEANS[name] ?: getApplicationContext().getBean(name)
  }

  static GrailsApplication getGrailsApplication() {
    getBean('grailsApplication')
  }

  static ConfigObject getConfig() {
    getGrailsApplication().config
  }

  static ServletContext getServletContext() {
    getBean('servletContext')
  }

  static GrailsPluginManager getPluginManager() {
    getBean('pluginManager')
  }

  // For testing
  static void registerTestBean(String name, bean) {
    TEST_BEANS[name] = bean
  }

  // For testing
  static void unregisterTestBeans() {
     TEST_BEANS.clear()
  }
} 
```

然后，编辑`grails-app/config/spring/resources.groovy`以包括：

```
 applicationContextHolder(ctx.ApplicationContextHolder) { bean ->
    bean.factoryMethod = 'getInstance'
  } 
```

然后，在你的文件里面`src/java`or `src/groovy`，你可以调用：

```
GrailsApplication app = ApplicationContextHolder.getGrailsApplication() ;
ConfigObject config = app.getConfig() ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T02:05:27.513

只是为了注册，在 Grails 2.x 中，有一个[Holders 类](http://grails.org/doc/2.0.1/api/grails/util/Holders.html)来替换这个已弃用的持有者。您可以使用它`grailsApplication`在静态上下文中访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:52:06.047

我无法弄清楚为什么这不起作用，但我可以完全建议一种替代方法。Grails 设置了从`PropertyPlaceholderConfigurer`中获取其值的a `grailsApplication.config`，因此您可以声明 a

```
public void setDriver(String driver) { ... } 
```

在你的课上然后说

```
<bean class="com.example.MyClass" id="exampleBean">
  <property name="driver" value="${jdbc.driver}" />
</bean> 
```

`resources.groovy`如果您使用的是 beans DSL，这也适用，但您必须记住使用*单引号*而不是双引号：

```
exampleBean(MyClass) {
  driver = '${jdbc.driver}'
} 
```

Using`"${jdbc.driver}"`不起作用，因为它被 Groovy 解释为 GString 并且（无法）在`resources.groovy`处理时解析，而您需要将文字`${...}`表达式作为属性值放入，稍后由占位符配置器解析。

# python - 二维零数组

> ID：13157961
> 
> 赞同：57
> 
> 时间：2012-10-31T12:27:57.537
> 
> 标签：python

python 中没有数组类型，但为了模拟它，我们可以使用列表。我想用零填充二维数组结构。我的问题是：这两个表达式有什么区别（如果有的话）：

```
zeros = [[0 for i in xrange(M)] for j in xrange(M)] 
```

和

```
zeros = [[0]*M]*N 
```

会`zeros`一样吗？通过速度和可读性，哪一个更好用？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-31T12:29:52.643

你应该使用`numpy.zeros`. 如果这不是一个选项，您需要第一个版本。在第二个版本中，如果您更改一个值，它将在列表中的其他位置更改 - 例如：

```
>>> a = [[0]*10]*10
>>> a
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
>>> a[0][0] = 1
>>> a
[[1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

这是因为（当您从内到外阅读表达式时），您创建了一个包含 10 个零的列表。然后，您创建一个包含 10 个对 10 个零的初始列表的引用的列表。

* * *

注意：

```
zeros = [ [0]*M for _ in range(N) ]  # Use xrange if you're still stuck in the python2.x dark ages :). 
```

也可以工作，它避免了嵌套列表理解。如果`numpy`不在桌子上，这是我会使用的表格。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-08-20T01:48:06.997

对于 Python 3（不再使用 xrange），首选答案

```
zeros = [ [0] * N for _ in range(M)] 
```

对于 M x N 零数组

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-31T12:39:22.157

在第二种情况下，您创建一个对同一列表的引用列表。如果您有如下代码：

```
[lst] * N 
```

其中`lst`是对列表的引用，您将获得以下列表：

```
[lst, lst, lst, lst, ..., lst] 
```

但是因为结果列表包含对同一对象的引用，所以如果您更改某一行中的值，它将在所有其他行中更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-17T04:27:09.487

胡哲的回答比较安全，应该是最好的回答。这是因为如果我们使用接受的答案方法

```
a = [[0] * 2] * 2
a[0][0] = 1
print(a) 
```

会给出答案

```
[[1,0],[1,0]] 
```

因此，即使您只想更新第一行第一列的值，同一列中的所有值也会更新。然而

```
a = [[0] * 2 for _ in range(2)]
a[0][0] = 1
print(a) 
```

给出正确答案

```
[[1,0],[0,0]] 
```

# mysql - Mysql 自动为字段添加前缀

> ID：13157962
> 
> 赞同：8
> 
> 时间：2012-10-31T12:28:02.430
> 
> 标签：mysql, sql

示例表 1：

```
id | field1 | field2
-------------------- 
```

表2：

```
id | id1 | field1 | field2
-------------------------- 
```

是否有可能做到这一点：

```
select t1.*, t2.* from table1 t1 inner join table2 t2 on t1.id = t2.id1 
```

并收到这个结果：

```
t1_id | t1_fiedl1 | t1_field2 | t2_id | t2_id1 | t2_fiedl1 | t2_field2
---------------------------------------------------------------------- 
```

目标是让 mysql 自动为结果字段添加前缀，以避免长时间输入，例如

```
select t1.id as t1_id, t1.field1 as t1_field1 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:59:23.700

SQL 引擎不会为您将查询重写为“自动别名”字段——别名必须是明确的。

但是，您在客户端代码中有两个选项。

首先，您显然可以编写一个抽象，将查询拼凑在一起并在这样做时提供别名。

其次，更容易的是使用与每个结果集关联的底层[MYSQL_FIELD结构中公开的信息。](http://dev.mysql.com/doc/refman/5.6/en/mysql-fetch-field.html)这些包含有关每个字段的字段和表名称（以及其他信息），允许您以`t1_field1`编程方式拼接在一起，而无需事先知道字段名称。此信息的公开方式取决于您的特定客户端 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:36:22.837

> 目标是让 mysql 自动为结果字段添加前缀，以避免长时间输入，例如
> 
> `select t1.id as t1_id, t1.field1 as t1_field1 and so on`

如果两个表上的字段名称相同，则不会从两个表中获取列。
您必须编写具有特定别名的列名才能实现这一点。

例如

```
SELECT t1.id t1_id, t1.field1 t1_fiedl1, t1.field2 t1_field2 
      ,t2.id t2_id, t2.id1 t2_id1 ,t2.field1 t2_fiedl1, t2.field2 t2_field2
FROM   table1 t1 
INNER  JOIN table2 t2 
         ON t1.id = t2.id1 
```

## [请参阅此 SQLFiddle 演示](http://sqlfiddle.com/#!2/41895/8)

如果两个表上的字段名称不同，那么您可以这样做以获得所需的结果。

例如

```
SELECT     t1.*, t2.*
FROM       table1 t1 
INNER JOIN table2 t2 
        ON t1.id = t2.id1; 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/b970a/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:01:25.713

不，mysql 不会*自动*为列添加前缀。您唯一要做的就是`alias`在列周围手动添加一个。如果您不想这样做，那么最好的方法是重命名从每个表中生成唯一名称的列。如果您不添加`alias`，并且存在具有相同名称的列，则趋势是显示第一个表中的列。这是正常的，因为表之间的名称冲突。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T12:30:32.587

```
select t1.id as t1_id, t1.fiedl1  as t1_fiedl1 ,
    t1.field2  as t1_field2 ,t2.id as  t2_id , 
     ,t2.fiedl1  as t2_fiedl1 ,t2.field2 as  t2_field2
    from table1 t1 left outer join table2 t2 on t1.id = t2.id1 
```

# android - SharedPreferences 不断获得默认值

> ID：13157963
> 
> 赞同：0
> 
> 时间：2012-10-31T12:28:09.120
> 
> 标签：android, sharedpreferences

我一直在获取默认值，或者我的 UI 将显示 null，或者如果我使用整数，它也会显示该默认值，这里它是字符串形式的 plz help

```
//putting the information in shared preferences
TextView pScore1=(TextView)findViewById(R.id.pScore1f);

SharedPreferences peepsScores2= PreferenceManager.getDefaultSharedPreferences(GamePlayFirst.this);
SharedPreferences.Editor editor2 =peepsScores2.edit();
String userScore11 = pScore1.getText().toString();
  editor2.putString("userScore11",userScore11);
  editor2.commit();

  //getting it and editing it

  SharedPreferences peepsScores2 = PreferenceManager.getDefaultSharedPreferences(this);
    int u;
    int one =1;
    int newUsrScore1=1;
    String userScore11 = peepsScores2.getString("userScore11",null);
    u=Integer.parseInt(userScore11);
        newUsrScore1 = u+one;
        String newUserScore1  = Integer.toString(newUsrScore1);

    SharedPreferences.Editor editor = peepsScores2.edit();
    editor.putString(newUserScore1, NewUserScore1);
      editor.commit();

    //getting it and displaying it on the UI

    SharedPreferences peepsScores2 = PreferenceManager.getDefaultSharedPreferences(this);
    String userScore11 = peepsScores2.getString("NewuserScore1",null);

  pScore1.setText(" "+userScore11); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:31:50.233

这条线

`editor.putString(newUserScore1, null);`

应该

```
editor.putString("NewuserScore1",newUserScore1); 
```

并且不要忘记使用提交您的更改`editor.commit();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:32:32.400

我为您的代码添加了一些注释，请检查：

```
//putting the information in shared preferences
TextView pScore1=(TextView)findViewById(R.id.pScore1f);

SharedPreferences peepsScores2= 

PreferenceManager.getDefaultSharedPreferences(GamePlayFirst.this);
SharedPreferences.Editor editor2 =peepsScores2.edit();
String userScore11 = pScore1.getText().toString();
  editor2.putString("userScore11",userScore11);
  editor2.commit();

  //getting it and editing it

  SharedPreferences peepsScores2 = PreferenceManager.getDefaultSharedPreferences(this);
    int u;
    int one =1;
    int newUsrScore1=1;
    String userScore11 = peepsScores2.getString("userScore11",null);
    u=Integer.parseInt(userScore11);
        newUsrScore1 = u+one;
        String newUserScore1  = Integer.toString(newUsrScore1);

    SharedPreferences.Editor editor = peepsScores2.edit();

     //@Praful: here newUserScore1 seems to be integer value and you are storing 
    //null here. I think it it should be 
    //`editor.putString("NewuserScore1", newUsrScore1);`
    editor.putString(newUserScore1, null);

     //@Praful: call commit here
    editor.commit;

    //getting it and displaying it on the UI

    SharedPreferences peepsScores2 = PreferenceManager.getDefaultSharedPreferences(this);
    String userScore11 = peepsScores2.getString("NewuserScore1",null);

  pScore1.setText(" "+userScore11); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:31:27.533

每当您使用 SharedPreference 时，永远不要忘记调用`commit()`以保存您的更改。

```
 SharedPreferences.Editor editor = peepsScores2.edit();
    editor.putString("NewuserScore1", newUserScore1);
    editor.commit(); 
```

# c# - RFC 错误消息“当前应用程序通过短转储触发了终止”

> ID：13157964
> 
> 赞同：1
> 
> 时间：2012-10-31T12:28:11.903
> 
> 标签：c#, .net, saprfc

SAP 是后端，.Net 是我的应用程序的前端。在执行 RFC 调用时，我收到一个异常，提示“当前应用程序触发了短暂转储的终止”。我使用 SAP.Net 连接器来构建 dll。

```
GetConnection objCon = new GetConnection();
Utilities objUtil = new Utilities();
ZZZZ_Z.ZZZZ_Z_MOVEMENT objSave = new ZZZZ_Z.ZZZZ_Z__MOVEMENT();
ZZZZ_Z.ZST_MESSAGETable objMessageTable = new ZZZZ_Z.ZST_MESSAGETable();
ZZZZ_Z.ZST_MESSAGE1Table objMsgTableNew = new ZZZZ_Z.ZST_MESSAGE1Table();
objSave.Connection = objCon.setConnection();
objSave.ZZZZ__Movement(ID,names, out EX_FLAG, out RETMSG, ref objMessageTable, ref objMsgTableNew);
DataTable MESSAGE_TABLE = new DataTable();
MESSAGE_TABLE = objMsgTableNew.ToADODataTable();
objSave.Connection.Close();
return objMessageTable.ToADODataTable(); 
```

此错误消息的原因是什么？我如何才能找到有关该问题的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:03:45.943

这是一条非常通用的错误消息，仅显示“出了点问题，但我不能告诉你发生了什么，至少不能通过当前的通信渠道。但是，我留下了一个简短的转储来检查。” 为此，请`ST22`在后端系统中使用事务。这可以是任何事情——临时问题、编程错误、数据不一致，等等——任何导致程序完全退出的事情。

# php - 将 PEAR 包的本地版本指向开发路径？

> ID：13157965
> 
> 赞同：3
> 
> 时间：2012-10-31T12:28:13.493
> 
> 标签：php, windows, phpunit, pear

我正在尝试修复更复杂的 PEAR 包 ( `CodeCoverage`) 中的错误。所以我想拥有不在我的 PEAR 路径中的开发版本：

```
c:\Programme\PHP\PEAR\PHP 
```

一个在另一个位置，这里是示例：

```
c:\Dokumente und Einstellungen\hakre\PhpstormProjects\php-code-coverage\PHP\ 
```

PEAR 中是否有一种常用方法可以临时从已安装的包切换到磁盘另一个位置上的文件？

我尝试放置符号链接，但这不起作用，因为我还需要链接`CodeCoverage.php`，这在 Windows XP 上是不可能的。

在 PEAR 中是否有针对这种场景的某种开发切换，或者只是每个包的业务来处理它？

我将`CodeCoverage`包与`PHPUnit`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:49:17.123

我可以通过将其添加到PEAR 目录*之前的 PHP 包含路径来使其工作：*

```
include_path = ".;c:\path\to\php-code-coverage;C:\programme\php\pear"
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

调用 PHPUnit 现在使用标准包，*但*`CodeCoverage`. 不需要符号链接，编辑 php.ini 就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T19:12:29.473

[**`"Contributing" section of the PHPUnit github project`**](https://github.com/sebastianbergmann/phpunit/blob/master/CONTRIBUTING.md)包含一个运行脚本，以使您更轻松地完成该任务。

您可以从那里检查所有存储库，或者，如果您只需要一个，仍然使用运行脚本：

> #!/bin/bash
> 
> php -d include_path='.:../phpunit/:../dbunit/:../php-code-coverage/:../php-file-iterator/:../php-invoker/:.. /php-text-template/:../php-timer:../php-token-stream:../phpunit-mock-objects/:../phpunit-selenium/:../phpunit-story/: /usr/local/lib/php' ../phpunit/phpunit.php $*

（*故意不格式化为代码，因此显示了整个内容*）

`..`您可以通过替换`/path/to/your/dev/folder/`并将脚本放入`/usr/local/bin/`并调用它来将路径调整为绝对路径`phpunit-dev`。

然后它会自动拾取所有现有的文件夹，并在最后回退到梨路径以查找它找不到的所有内容。

* * *

另一种快速获得开发设置的方法是从 composer 安装它`minimum-stability: dev`并在其中一个 repos 上更改遥控器:)

# jsf - OmniFaces 缓存组件是否适合资源缓存？

> ID：13157968
> 
> 赞同：1
> 
> 时间：2012-10-31T12:28:27.570
> 
> 标签：jsf, primefaces, servlet-filters, omnifaces

下面的问题，

> 每次页面刷新和 ajax 页面更新都会加载 Primefaces、JQuery 脚本和 CSS 文件。如何从缓存中获取文件，而不是为每个请求下载。

被问到：

[每次页面刷新时加载 Primefaces 脚本和 css 文件](http://forum.primefaces.org/viewtopic.php?f=3&t=25797)

我推荐了 OmniFaces o:cache 组件。在这种情况下可以使用 o:cache 吗，还是最好使用 servlet 过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:03:04.197

每个[OmniFaces`<o:cache>`展示页面](http://showcase.omnifaces.org/components/cache)，

> 该组件允许缓存渲染标记的片段。

所以，我假设这个问题的答案是“不”。

# android - 有一个基于屏幕尺寸的固定方向

> ID：13157971
> 
> 赞同：3
> 
> 时间：2012-10-31T12:28:34.887
> 
> 标签：android, android-layout, layout

我有一个构建在手机上的 Android 应用程序，我现在要更新它以支持平板电脑大小的屏幕（特别是 Galaxy Tab 10.1）。我想通了整个`res/layout`事情，所以这很好。但是，我将我的应用程序构建为具有固定的屏幕方向`AndroidManifest.xml`，设置为`android:screenOrientation="portrait"`.

现在，我想要以下内容：每个屏幕尺寸都有一个**固定的方向，一个固定为纵向（布局小），另一个固定为横向。**

使用`res/layout-small-land`and`res/layout-large-port`并没有做我想要的，因为它仍然从纵向切换到横向并返回。更糟糕的是，当我将手机旋转到横向时，应用程序会崩溃，因为`res/layout-small-land`它不存在。

我可以通过定义 XML 文件来做到这一点，还是必须添加代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:21:30.320

您可以使用[`setRequestedOrientation`](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29). 在`onCreate`每个活动的方法上，检查您是否使用平板电脑或智能手机并设置所需的方向。

另一种选择可能是[为不同的屏幕尺寸创建多个 APK](http://developer.android.com/training/multiple-apks/index.html)，具体取决于您的需要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T13:05:29.943

是的，您可以创建相同的布局。在此处查看接受的答案：[SO](https://stackoverflow.com/questions/2402639/how-to-create-layout-small-land-folder)

它会解决你的问题。

**更新**

如果您想根据屏幕尺寸进行设置，请参阅下面的代码以获取屏幕的密度。并基于此和屏幕尺寸，您必须以编程方式设置方向。

**检查密度的代码：**

```
public void ScreenSupport(){
     Display display = getWindowManager().getDefaultDisplay();
     DisplayMetrics dm = new DisplayMetrics();
     display.getMetrics(dm);

     int width = display.getWidth();
     int height = display.getHeight();
     int density = dm.densityDpi;
     String densityString = null;

     if(density == DisplayMetrics.DENSITY_HIGH) {
         densityString = "HDPI";
     } else if(density == DisplayMetrics.DENSITY_MEDIUM) {
         densityString = "MDPI";
     } else if(density == DisplayMetrics.DENSITY_LOW) {
         densityString = "LDPI";
     }else if(density == DisplayMetrics.DENSITY_DEFAULT) {
         densityString = "DEFAULT";
     }

    /* System.out.println("Screen Height is: "+height+ " and Width is: "+width);
     System.out.println("Screen Support: "+densityString);*/
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-31T12:56:24.947

只需`android:screenOrientation="portrait"`从 manifest.xml中删除

并添加 layout-large-land、layout-small-land 并保留 layout-large、layout-small 文件夹。

希望对你有效。享受编码:)

# activemq - 在 ActiveMQ 5.5.1 中访问 Web 控制台

> ID：13157976
> 
> 赞同：0
> 
> 时间：2012-10-31T12:28:41.917
> 
> 标签：activemq

我正在使用 ActiveMQ 5.5.1 版本。但我无法使用`http://127.0.0.1:8161/admin`. 但同样可以在 ActiveMQ 5.3.0 版本中工作。另外，我看到文件夹`jetty.xml`下不存在该文件（存在于 ActiveMQ 5.3.0 中）`conf`。

有谁知道如何在 ActiveMQ 5.5.1 中访问 Web 控制台？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:47:40.370

刚下载AMQ 5.5.1，启动activemq.bat文件，成功访问localhost:8161/admin/

conf/jetty.xml 确实存在，就此而言。

似乎您的安装已损坏。考虑下载一个新的副本。

# java - 将正则表达式形成为 Java 字符串

> ID：13157981
> 
> 赞同：2
> 
> 时间：2012-10-31T12:28:53.197
> 
> 标签：java, regex, string

我有一个字符串，其中只有数字而没有，允许一个或多个百分比

所以我的正则表达式是： ，你可以[在这里](http://regexr.com?32lin)`[\d+%]`测试它

对于java，我必须对其进行改造，

```
public static final String regex = "[\\d+\\%]"; 
```

并测试它我使用这个功能

```
public static final String regex = "[\\d+\\%]";

public boolean validate(String myString){

    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(myString);

    if (!matcher.matches()) {
        return false;
    }else{
        return true;
    }
} 
```

正则表达式不起作用，如果我使用

```
public static final String regex = "[\\d+%]"; 
```

有没有什么好的在线工具可以转义java的长正则表达式？

一个更高级的问题：
只有在字符串中至少有一个数字时才允许使用 %，而不允许使用 %！并且：没有 a`%` 的数字只有在位数正好是 8 位时才被允许，而不是更少（意味着：1234567 不好，但 12345678 好）

测试用例：

*   **坏:** `%` , `(空字符串), `23b`, `-1`, `7.5`, `%5a`, `1`,`1234567``
`*   **好：** `12345678` , `23%`, `1%53%53`, `%7``

 `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:34:50.207

> 我有一个字符串，其中只有数字，没有，一个或多个百分比是允许的，所以我的正则表达式是：`[\d+%]`

实际上，它匹配一个可能是数字、a`+`或 a 的字符`%`。

为了匹配你用文字描述的内容，你需要这样的东西：

```
 [\d%]*\d[\d%]* 
```

它匹配包含至少一个数字和可选百分号的字符串。请注意，该`%`字符不是元字符，因此不需要在正则表达式中转义。它将匹配以下所有内容：

```
 0
  00
  %0
  0%0
  00%
  0%0%0
  0%%0 
```

依此类推，但不仅仅是`%`或任何包含数字或字符以外的字符的`%`字符串。

* * *

> 有没有什么好的在线工具可以转义java的长正则表达式？

我不知道一个。但是转义并不是您的正则表达式不起作用的原因。

* * *

> 一个更高级的问题：只有在字符串中至少有一个数字时才允许使用 %，而不允许使用 %！

我认为我上面的正则表达式可以做到这一点。作为记录，这是一个 Java 字符串文字的样子：

```
"[\\d%]*\\d[\\d%]*" 
```

除非您在正则表达式中有 TAB、NL、CR 等字符，否则只需将每个人替换`\`为`\\`.`

# c - if .. else number 小于，无法访问的代码

> ID：13157985
> 
> 赞同：11
> 
> 时间：2012-10-31T12:29:27.103
> 
> 标签：c, conditional-statements

假设我们有以下 C（或类似语言）代码：

```
if (x < 10)
  do_work1();
else if (x < 5)
  do_work2(); 
```

在某些情况下会执行此条件的第二个分支吗？编译器会警告无法访问的代码吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T13:07:33.167

`Will the second branch of condition be executed in some case?`

*   是的，有可能，这取决于代码中还发生了什么以及编译器选择对您的代码做什么。

`Shouldn't compiler warn about unreachable code?`

*   不，它不能，因为不能保证它是不可访问的

以此为例：

```
int x = 11;

void* change_x(){
   while(1)
      x = 3;
}

int main(void) 
{
    pthread_t cxt;
    int y = 0;
    pthread_create(&cxt, NULL, change_x, NULL);
    while(1){
        if(x < 10)
            printf("x is less than ten!\n");
        else if (x < 5){
            printf("x is less than 5!\n");
            exit(1);
        }
        else if(y == 0){    // The check for y is only in here so we don't kill
                            // ourselves reading "x is greater than 10" while waiting
                            // for the race condition
            printf("x is greater than 10!\n");
            y = 1;
        }
        x = 11;
    }

    return 0;
} 
```

和输出：

```
mike@linux-4puc:~> ./a.out 
x is greater than 10!
x is less than 5!      <-- Look, we hit the "unreachable code" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T12:32:07.223

*   如果 x 是局部变量，那么我看不到任何`do_work2`可以执行的方式。
*   如果 x 是全局变量或在多个线程之间共享，则`do_work2`可以执行。

通常无法证明代码是否可达。编译器可以有一些简单的、可理解的和快速检查的规则来检测简单的无法访问代码的情况。它不应该包括一个缓慢而复杂的求解系统，这种系统有时才*有效*。

如果您想进行额外检查，请使用外部工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:31:51.277

第二个分支不会被执行，编译器也不应该警告无法访问的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:34:37.753

不，编译器不会为此代码生成任何警告（代码无法访问）。当您在没有任何条件的情况下使用 return 时，这种警告通常会出现。

喜欢

```
int function(){

int x;
return 0;
x=35;
} 
```

在这种情况下，它会给你警告。

# ruby-on-rails - 触发依赖: :destroy 与覆盖的销毁方法

> ID：13157987
> 
> 赞同：6
> 
> 时间：2012-10-31T12:29:28.177
> 
> 标签：ruby-on-rails, activerecord, model

在我们的应用程序中，我们重写了 ActiveRecord destroy 方法，这样我们的记录就不会被删除（因此用户可以取消删除）。像这样：

```
def destroy
  self.is_deleted = true
  self.save
  freeze
end 
```

然而，这似乎已经禁用了对我们`has_many`关系的依赖破坏。换句话说，如果`destroy`在父对象上调用，其子对象`has_many`不会被销毁（它们不会被删除，即 SQL ' `DELETE...`'，也不会`destroy`调用覆盖的 - 方法）。

如何触发子对象的销毁。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:40:01.690

您需要触发销毁回调。

```
def destroy
  self.is_deleted = true
  self.save
  run_callbacks :destroy
  freeze
end 
```

# regex - 键盘采用字母，单词之间只有一个空格

> ID：13157989
> 
> 赞同：1
> 
> 时间：2012-10-31T12:29:38.057
> 
> 标签：regex, ios5

我有一个文本字段，它应该采用姓名和姓氏（以字母表示），它们之间只有一个空格。

我尝试了以下，

^[a-zA-Z]+$

它工作正常，但只需要字母，

我想在“Paddy Clark”之类的名字之间留一个空格

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:32:57.237

怎么样：

```
^[a-zA-Z]+ [a-zA-Z]+$ 
```

# android - 如何以编程方式更新 Android 应用

> ID：13157990
> 
> 赞同：3
> 
> 时间：2012-10-31T12:29:39.317
> 
> 标签：android

我为 Android 开发了一个应用程序。当我第一次安装它时，该应用程序可以运行。但是当我对源代码进行一些更改时，如果不从手机中删除它，我们就无法安装它。我希望该应用程序应该在我第二次安装时更新。有什么解决办法吗？

注意：我的应用程序包含我不想删除的数据库，因此想在现有应用程序上更新新应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:39:57.287

如果您正在尝试通过连接 USB 来安装应用程序，那么您将安装新应用程序，您可以卸载第一个应用程序并安装更新的应用程序，以便新应用程序完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:36:07.090

将 Android Manifest 中的 VersionCode 更改为后续版本

**安卓：版本代码**

> android:versionCode — 一个整数值，表示应用程序代码相对于其他版本的版本。该值是一个整数，以便其他应用程序可以以编程方式对其进行评估，例如检查升级或降级关系。您可以将该值设置为您想要的任何整数，但是您应该确保应用程序的每个后续版本都使用更大的值。系统不会强制执行此行为，但随着连续发布增加值是规范的。通常，您会发布应用程序的第一个版本，并将 versionCode 设置为 1，然后随着每个版本单调增加该值，无论该版本构成主要版本还是次要版本。这意味着安卓：versionCode 值不一定与用户可见的应用程序发布版本非常相似（请参阅下面的 android:versionName）。应用程序和发布服务不应向用户显示此版本值。

看到这个[http://developer.android.com/tools/publishing/versioning.html](http://developer.android.com/tools/publishing/versioning.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:30:18.000

但是，如果您更改版本代码，则会提示您出现此错误。所以尝试寻找keystore 重新安装失败，由于不同的应用程序签名。ExpenseTracker] 您必须完全卸载应用程序。

**警告：**这将删除应用程序数据！ExpenseTracker] 请在 shell 中执行“adb uninstall com.spundhan.expensetracker”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:50:09.090

问题可能是因为您导出应用程序的密钥库。如果您使用默认的 Android 密钥库导出您的应用程序，然后如果您在另一台 PC 上更改该应用程序并使用该另一台 PC 上的默认密钥库再次导出它并将其安装在同一设备上，Android 将看到您有 2 个相同的应用程序，但具有不同的密钥库。这就是为什么您需要先卸载应用程序并重新安装它。

您是否在两台 PC 上都使用默认的 Android 密钥库并不重要。它们仍然不是同一个密钥库。

一种解决方案是您创建一个密钥库，例如。ProjectKeystore，您在项目中创建一个文件夹密钥库。将密钥库放在该文件夹中，并可能使用密钥库用户名放置一个文件并通过。当您在任何 PC 上导出应用程序时，您可以使用相同的密钥库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:37:11.187

好吧，如果你编译了你的第二个版本，你想替换旧版本......我不知道你用什么来为 android 编程，但是如果你使用自动完成的 eclipse sdk ......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T22:36:20.790

我有时在尝试安装我的应用程序时遇到过类似的问题。为了解决这个问题，我去了应用程序管理屏幕并告诉程序停止运行，然后我的更新安装正确。我认为这与android处理程序生命周期的方式有关。当您退出程序时，它并不总是停止运行。如果某些内容出现错误，那么 android 可能会在关闭程序之前遇到问题，然后才能对其进行更新。

# iphone - 如何以编程方式连接两个 aac 文件

> ID：13157991
> 
> 赞同：3
> 
> 时间：2012-10-31T12:29:39.490
> 
> 标签：iphone, ruby, audio, ffmpeg

有谁知道如何将两个aac音频文件连接成一个。我可以使用 ffmpeg 对 mp3 执行此操作，但对于具有 m4a 扩展名的文件则没有运气。

我尝试了以下没有运气：`ffmpeg -i concat:"file1.m4a\|file2.m4a" -c copy output.m4a'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:49:00.657

只需使用猫：

```
cat file1.m4a file2.m4a >output.m4a 
```

# .net - 使用 Windows Phone MediaElement 时音频失真且难以理解？

> ID：13157992
> 
> 赞同：0
> 
> 时间：2012-10-31T12:29:49.867
> 
> 标签：.net, windows-phone-7, audio

今天晚上非常奇怪的是，我试图在我的 Windows Phone 游戏（Silverlight，而不是 XNA）中播放音频片段，而有问题的 MP3 通过 Windows Media Player 或 VLC 播放完全清晰，但是当我使用`MediaElement`（Silverlight ) 或者`Song`甚至`SoundEffect`使用 XNA 它是乱码、安静和难以理解的？这可能是什么原因？

我什至尝试使用不同的比特率和许多其他变体使用 Adob​​e Audition 重新保存它，但无济于事。

这是有问题的罪魁祸首 MP3：http: [//goneale.com/files/SO/YouDidIt.mp3](http://goneale.com/files/SO/YouDidIt.mp3)

如果您可以尝试将我的 mp3 与以下代码片段一起使用并确定可能发生的情况，那就太好了！

```
SoundTrigger.Source = new Uri("YouDidIt.mp3", UriKind.Relative);
SoundTrigger.Play(); 
```

然后在 XAML 表面上：

```
<MediaElement x:Name="SoundTrigger" /> 
```

如果有帮助，这个人声片段是用 Garage Band for mac 在家录制的。

令人惊讶的是，我简直不敢相信，如果我截取一段音乐 mp3 并将其直接插入中间，我的声音在 mp3 上的开头是乱码，然后播放半秒完美的音乐，然后继续播放乱七八糟的声音，这怎么可能？！

**2012-11-1 更新：好的，新的非常奇怪的发现，当我将耳机插入我的 Lumia 710 时，声音播放得非常好？！但不是通过扬声器？扬声器只是在远处发出嘶嘶声，声音失真，这是一部全新的手机，甚至还不到 2 周大，正如我所说，它可以完美地播放其他所有内容，而且非常清晰。会发生什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:47:36.247

我已经修好了！

这完全是因为我使用平衡舒尔 SM-58 麦克风直接进入非平衡输入并以立体声或其他方式录制，而我的手机应该是单声道。

这就解释了为什么当我插入耳机而不是通过手机的扬声器输出时它可以正确通过。

我不记得我有解释如何解决这个问题的链接，但基本上如果你有这样的录音故障，在 Audacity 中单击轨道中的小下拉箭头，然后按“将立体声拆分为单声道”，然后你会获取两首曲目，突出显示其中一首，然后是文件 -> 导出选择。工作一种享受！

有关菜单的更多信息，请参见此处：http: [//manual.audacityteam.org/man/Splitting_and_Joining_Stereo_Tracks](http://manual.audacityteam.org/man/Splitting_and_Joining_Stereo_Tracks)

# php - 将 Javascript 函数转换为 PHP 类

> ID：13157993
> 
> 赞同：0
> 
> 时间：2012-10-31T12:29:49.207
> 
> 标签：php, javascript, class

我有多个 JavaScript 函数来计算玛雅星座，我将其转换为单个 PHP 类。一切都很好，除了一些日期。例如，日期**06.10.1977**使用 PHP 类给我一个 NULL 结果，但等效 JavaScript 函数中的这个日期返回一个正确的值。也许我在 PHP 中出了点问题，有人可以帮我检查一下吗？

**JAVASCRIPT：**

```
function leap_gregorian(year) {
    return ((year % 4) == 0) && (!(((year % 100) == 0) && ((year % 400) != 0)));
}

//  GREGORIAN_TO_JD  --  Determine Julian day number from Gregorian calendar date
var GREGORIAN_EPOCH = 1721425.5;

function gregorian_to_jd(year, month, day) {
    return (GREGORIAN_EPOCH - 1) +
           (365 * (year - 1)) +
           Math.floor((year - 1) / 4) +
           (-Math.floor((year - 1) / 100)) +
           Math.floor((year - 1) / 400) +
           Math.floor((((367 * month) - 362) / 12) +
           ((month <= 2) ? 0 : (leap_gregorian(year) ? -1 : -2)) +
           day);
}

var MAYAN_COUNT_EPOCH = 584282.5;
//  JD_TO_MAYAN_COUNT  --  Calculate Mayan long count from Julian day

    function jd_to_mayan_count(jd) {
        var d, baktun, katun, tun, uinal, kin;

        jd = Math.floor(jd) + 0.5;
        d = jd - MAYAN_COUNT_EPOCH;
        baktun = Math.floor(d / 144000);
        d = mod(d, 144000);
        katun = Math.floor(d / 7200);
        d = mod(d, 7200);
        tun = Math.floor(d / 360);
        d = mod(d, 360);
        uinal = Math.floor(d / 20);
        kin = mod(d, 20);

        return new Array(baktun, katun, tun, uinal, kin);
    }

 //  JD_TO_MAYAN_HAAB  --  Determine Mayan Haab "month" and day from Julian day
var MAYAN_HAAB_MONTHS = new Array("Pop", "Uo", "Zip", "Zotz", "Tzec", "Xul",
                                  "Yaxkin", "Mol", "Chen", "Yax", "Zac", "Ceh",
                                  "Mac", "Kankin", "Muan", "Pax", "Kayab", "Cumku", "Uayeb");

function jd_to_mayan_haab(jd) {
    var lcount, day;

    jd = Math.floor(jd) + 0.5;
    lcount = jd - MAYAN_COUNT_EPOCH;
    day = mod(lcount + 8 + ((18 - 1) * 20), 365);

    return new Array(Math.floor(day / 20) + 1, mod(day, 20));
}

//  JD_TO_MAYAN_TZOLKIN  --  Determine Mayan Tzolkin "month" and day from Julian day
var MAYAN_TZOLKIN_MONTHS = new Array("Imix", "Ik", "Akbal", "Kan", "Chicchan",
                                     "Cimi", "Manik", "Lamat", "Muluc", "Oc",
                                     "Chuen", "Eb", "Ben", "Ix", "Men",
                                     "Cib", "Caban", "Etznab", "Cauac", "Ahau");

var MAYAN_TZOLKIN_MONTHS_EN = new Array("Crocodile", "Wind", "House", "Lizard", "Serpent",
                                        "Death", "Deer", "Rabbit", "Water", "Dog",
                                        "Monkey", "Grass", "Reed", "Jaguar", "Eagle", 
                                        "Vulture", "Earth", "Knife", "Storm", "Flower");

function jd_to_mayan_tzolkin(jd) {
    var lcount;

     jd = Math.floor(jd) + 0.5;
     lcount = jd - MAYAN_COUNT_EPOCH;
     return new Array(amod(lcount + 20, 20), amod(lcount + 4, 13));
}

function getMayanSign(sign, month, day, year) {

    var isValidated = true;
    var result = "";

    if (!IsNumeric(month.value) || month.value <= 0 || month.value > 12) {
        month.value = "MM";
        isValidated = false;
    }

    if (!IsNumeric(day.value) || day.value <= 0 || day.value > 31) {
        day.value = "DD";
        isValidated = false;
    }

    if (!IsNumeric(year.value) || year.value < 1900 ) {
        year.value = "YYYY";
        isValidated = false;
    }

    if (isValidated) {
        year = new Number(year.value);
        mon = new Number(month.value);
        mday = new Number(day.value);
        hour = min = sec = 0;

        //  Update Julian day
        j = gregorian_to_jd(year, mon + 0, mday) +
           (Math.floor(sec + 60 * (min + 60 * hour) + 0.5) / 86400.0);

            maytzolkincal = jd_to_mayan_tzolkin(j);
            result = MAYAN_TZOLKIN_MONTHS_EN[maytzolkincal[0] - 1];
        } else result = "INVALID BIRTHDAY";

        sign.value = result;
    } 
```

**PHP类：**

```
class MayanCalculator {

        //  JD_TO_MAYAN_TZOLKIN  --  Determine Mayan Tzolkin "month" and day from Julian day
        private $MAYAN_TZOLKIN_MONTHS = array("Imix", "Ik", "Akbal", "Kan", "Chicchan",
                                             "Cimi", "Manik", "Lamat", "Muluc", "Oc",
                                             "Chuen", "Eb", "Ben", "Ix", "Men",
                                             "Cib", "Caban", "Etznab", "Cauac", "Ahau");

        private $MAYAN_TZOLKIN_MONTHS_EN = array("Crocodile", "Wind", "House", "Lizard", "Serpent",
                                        "Death", "Deer", "Rabbit", "Water", "Dog",
                                        "Monkey", "Grass", "Reed", "Jaguar", "Eagle", 
                                        "Vulture", "Earth", "Knife", "Storm", "Flower");

        private $GREGORIAN_EPOCH = 1721425.5;

        private $MAYAN_COUNT_EPOCH = 584282.5;

        private $MAYAN_HAAB_MONTHS = array("Pop", "Uo", "Zip", "Zotz", "Tzec", "Xul",
                                  "Yaxkin", "Mol", "Chen", "Yax", "Zac", "Ceh",
                                  "Mac", "Kankin", "Muan", "Pax", "Kayab", "Cumku", "Uayeb");

        private $_day;
        private $_month;
        private $_year;
        private $sign;
        private $signm;

        function __construct($day, $month, $year) {
                $this->_day = $day;
                $this->_month = $month;
                $this->_year = $year;
        }

        public function getMayanSign() {

            $this->sign = $this->getSign();
            $this->signm = $this->getMayanSignOnMayan();    

            $ids = new getIDS(null,null,$this->sign);
            $id = $ids->returnIDS();
            return array("mayan_sign" => $this->sign, "mayan_sign_on_mayan" => $this->signm, "mayan_sign_id" => $id["mayan_id"]);

        }

        private function getSign() {
            $isValidated = true;
            $result = null;

            if (!is_numeric($this->_month) || $this->_month <= 0 || $this->_month > 12) :
                $isValidated = false;
            endif;  

            if (!is_numeric($this->_day) || $this->_day <= 0 || $this->_day > 31) :
                $isValidated = false;
            endif;  

            if (!is_numeric($this->_year) || $this->_year < 1900) :
                $isValidated = false;
            endif;  

            if ($isValidated) : 

                $hour = 0;
                $min = 0;
                $sec = 0;

                //update julian day
                $j = $this->gregorian_to_jd($this->_year, $this->_month+0, $this->_day) + (floor($sec + 60 * ($min + 60 * $hour) + 0.5) / 86400.0);
                $maytzolkincal = $this->jd_to_mayan_tzolkin($j);
                $result = $this->MAYAN_TZOLKIN_MONTHS_EN[$maytzolkincal[0]-1];
            else :

            $result = 'Wrong date '.  $this->_day . '.' . $this->_month . '.' . $this->_year;

            endif;

            return $result; 
        }

        private function getMayanSignOnMayan() {
            $isValidated = true;
            $result = null;

            if (!is_numeric($this->_month) || $this->_month <= 0 || $this->_month > 12) :
                $isValidated = false;
            endif;  

            if (!is_numeric($this->_day) || $this->_day <= 0 || $this->_day > 31) :
                $isValidated = false;
            endif;  

            if (!is_numeric($this->_year) || $this->_year < 1900) :
                $isValidated = false;
            endif;  

            if ($isValidated) : 

                $hour = 0;
                $min = 0;
                $sec = 0;

                //update julian day
                $j = $this->gregorian_to_jd($this->_year, $this->_month+0, $this->_day) + (floor($sec + 60 * ($min + 60 * $hour) + 0.5) / 86400);
                $maytzolkincal = $this->jd_to_mayan_tzolkin($j);
                $result = $this->MAYAN_TZOLKIN_MONTHS[$maytzolkincal[0]]-1;
            else :

            $result = 'Wrong date '.  $this->_day . '.' . $this->_month . '.' . $this->_year;

            endif;

            return $result; 
        }

        private function leap_gregorian($year) {
                    return (($year % 4) == 0) && (!((($year % 100) == 0) && (($year % 400) != 0)));
        }

        private function gregorian_to_jd($year, $month, $day) {
            $result = ($this->GREGORIAN_EPOCH - 1) +
                   (365 * ($year - 1)) +
                   floor(($year - 1) / 4) +
                   (-floor(($year - 1) / 100)) +
                   floor(($year - 1) / 400) +
                   floor((((367 * $month) - 362) / 12) +
                   (($month <= 2) ? 0 : ($this->leap_gregorian($year) ? -1 : -2)) +
                   $day);
            return $result;
        }

        private function jd_to_mayan_count($jd) {
        $jd = floor($jd) + 0.5;
        $d = $jd - $this->MAYAN_COUNT_EPOCH;
        $baktun = floor($d / 144000);
        $d = $d % 144000;
        $katun = floor($d / 7200);
        $d = $d % 7200;
        $tun = floor($d / 360);
        $d = $d % 360;
        $uinal = floor($d / 20);
        $kin = $d % 20;

        return array($baktun, $katun, $tun, $uinal, $kin);
        }

        private function jd_to_mayan_haab($jd) {

            $jd = floor($jd) + 0.5;
            $lcount = $jd - $this->MAYAN_COUNT_EPOCH;
            $day = ($lcount + 8 + ((18 - 1) * 20)) % 365;

            return array(floor($day / 20) + 1, $day % 20);
        }

        private function jd_to_mayan_tzolkin($jd) {
             $jd = floor($jd) + 0.5;
             $lcount = $jd - $this->MAYAN_COUNT_EPOCH;
             return array(($lcount + 20) % 20, ($lcount + 4) % 13);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:34:37.417

第一：总是发布所有相关的脚本。您缺少对解决您的问题至关重要的 JavaScript 函数 amod()，我在原始版本中找到了[它](http://www.fourmilab.ch/documents/calendar/)

您的 PHP 函数`jd_to_mayan_tzolkin()`与您的 JavaScript 函数不同`jd_to_mayan_tzolkin()`：

而 JavaScript 使用单独的函数`amod()`来计算模数并在模数结果为时返回分子`0`

```
//  AMOD  --  Modulus function which returns numerator if modulus is zero
function amod($a, $b) {
  return $this->mod($a - 1, $b) + 1;
} 
```

您的 php 函数只返回可能的模数，`0`因此您的 PHP 的进一步处理失败。

将以下两个函数添加到您的类中：

```
/*  MOD  --  Modulus function which works for non-integers.  */
private function mod($a, $b) {
  return $a - ($b * floor($a / $b));
}

//  AMOD  --  Modulus function which returns numerator if modulus is zero
private function amod($a, $b) {
  return $this->mod($a - 1, $b) + 1;
} 
```

并更改PHP方法`jd_to_mayan_tzolkin()`如下：

```
private function jd_to_mayan_tzolkin($jd) {
     $jd = floor($jd) + 0.5;
     $lcount = $jd - $this->MAYAN_COUNT_EPOCH;
     return array($this->amod(($lcount + 20),20), $this->amod(($lcount + 4),13));
} 
```