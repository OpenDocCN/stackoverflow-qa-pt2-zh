# StackOverflow 问答 15592000-15592999

# pagination - Kohana 路线和分页

> ID：15592003
> 
> 赞同：0
> 
> 时间：2013-03-23T21:00:33.600
> 
> 标签：pagination, routes, kohana

我正在使用 Kohana 3.3 并具有以下目录结构设置（+ 符号表示文件夹， • 表示文件）：

```
+ modules
  + app-admin
    + classes
      + admin
        • Companies.php
        • Users.php
        • Locations.php
    + i18n
    + views
  + app-front
    + classes
    + i18n
    + views 
```

对于“app-admin”模块，我定义了以下路由：

```
Route::set('admin default', 'admin')
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'authentication',
        'action'     => 'login'
    ));
Route::set('admin', 'admin/<controller>(/<action>(/<id>))')
->defaults(array(
    'directory'  => 'admin'
)); 
```

这些路由使我能够访问“管理员”控制器，如下所示：

```
http://localhost/admin/companies
http://localhost/admin/companies/edit/2
http://localhost/admin/companies/add 
```

这没有问题。我安装了一个分页模块（[https://github.com/webking/kohana-pagination](https://github.com/webking/kohana-pagination)），它具有以下配置：

```
'admin' => array(
        'current_page'      => array('source' => 'query_string', 'key' => 'page'), // source: "query_string" or "route"
        'total_items'       => 0,
        'items_per_page'    => 2,
        'view'              => 'admin/_partials/pagination',
        'auto_hide'         => FALSE,
        'first_page_in_url' => FALSE,
    ) 
```

当我这样做时，我收到以下错误：

```
Kohana_Exception [ 0 ]: Required route parameter not passed: controller
SYSPATH\classes\Kohana\Route.php [ 599 ] 
```

我究竟做错了什么？

谢谢，Z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:23:39.180

我最终为“admin”模块中的每个控制器专门设置了一个路由，并提供了一个默认的“controller”值，如下所示：

```
Route::set('admin users', 'admin/users(/<action>(/<id>))')
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'users', // Provided a default value for <controller>
        'action'     => 'index'
    )); 
```

它完成了工作，分页现在工作正常。我认为“管理员”的“包罗万象”路线会为我做到这一点。

# android - 查看/查看子树更改的侦听器 API

> ID：15592004
> 
> 赞同：2
> 
> 时间：2013-03-23T21:00:33.960
> 
> 标签：android, view, listener, monkeypatching

我正在尝试编写一个调试实用程序，当当前 Activity 的视图层次结构中的视图发生更改时，它将采取某些操作（日志记录、屏幕截图等）。此处的更改是任何会导致视图树的视觉表示发生更改的内容：设置 TextView 上的文本、更改 View 上的背景颜色，或在 ViewGroup 中添加/删除子项。

理想情况下，我正在寻找一个 API，它会在这些更改即将发生时通知我以及它们将影响哪些视图/视图子树。

我花了很多时间寻找可能的解决方案，最干净的方法是使用 ViewTreeObserver 的 OnPreDrawListener 和 OnGlobalLayoutListener。当感兴趣的事件发生时，他们似乎会收到通知。但是，它们不提供有关哪些视图受到影响的任何上下文信息。AFAIK 将这些侦听器附加到视图的 ViewTreeObserver 会导致每当视图树中的任何内容发生更改并且无法为单个视图创建隔离的 ViewTreeObserver 时都会触发通知。这意味着我必须在每次通知时遍历整个视图树以确定更改了哪个属性。

另一种方法是对 View 类进行二进制修补，以便它们以类似方法`setBackgroundColor`或任何其他感兴趣的方法回调我的 API。[android-aspectj](https://code.google.com/p/android-aspectj/)可以用于此。这里的缺点是这只适用于我编译的类，因此几乎没用，因为我可以直接修改源代码。同样的想法，[dexmaker](https://code.google.com/p/dexmaker/)将是一个更完整的解决方案，因为它允许在运行时修补类。然而，在这里，我们遇到了类加载的问题。要修补类，我必须通过我自己的加载它`ClassLoader`但是所有的 View 类都已经被 Android 加载了。一种解决方案是在创建视图树后克隆它，但不使用库存加载的类，而是使用我自己的修补类。这几乎可以工作，除非应用程序在我的修补到位之前抓取了对视图树的引用。当然，我还必须在每个布局更改事件（添加/删除视图）时重做克隆。我知道这个过程会很慢，但到目前为止它是最透明和最完整的解决方案。

最后，这可能是最困难的方法，有没有办法使用 Android 内置的方法跟踪系统（[Traceview](http://developer.android.com/tools/debugging/debugging-tracing.html)）在运行时接收跟踪事件？目前，系统会将跟踪信息转储到 SD 卡上的文件中以供离线处理。这对于我的需求来说显然为时已晚，但如果原生 SDK 中暴露了用于拦截这些事件的钩子，那就太好了。

欢迎任何和所有建议。在这一点上，我什至不是在寻找可移植的解决方案，所以请随意提及任何反射/隐藏的 API 技巧。感谢您阅读这个庞然大物的帖子。

# php - 库设计 - 消除 dom 依赖

> ID：15592010
> 
> 赞同：0
> 
> 时间：2013-03-23T21:00:58.087
> 
> 标签：php, javascript

```
<div id='universals' data-path='/a/' data-load='1'></div> 
```

这是一个非常奇怪的案例。我有前端代码 ( JavaScript )，它知道它的资源在哪里是基于我通过 PHP 传递给它的路径，它编写了上面的 HTML。

这是一个很酷的功能，它允许我简单地重命名服务器上我的文件夹的根目录，并且随着 PHP 确定当前工作目录并通过上面的代码将其发送到客户端，一切都会继续工作。

这是一种反思形式。

但是我想将它构建到前端的应用程序框架中。

现在我的 javascript 库，我们称之为 foo.js 依赖于一个 dom 元素。我很确定这不是一个好习惯。

我的计划是让 id 像这样设置。

```
foo.setUniverisal('#universal'); 
```

然后在文档中放入需要哪些属性。

还有其他想法或更好的方法来消除任何类型的 dom 依赖吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:58:38.920

我认为最好的方法是最简单的方法：

```
foo.setDataPath("pathToData") 
```

然后，您的客户端“粘合”代码（将您的库、HTML 和 PHP 组合在一起的代码）将从您的标签中获取一条路径并调用 foo.setDataPath。这将是最正交的设计（[什么是“正交性”？](https://stackoverflow.com/questions/1527393/what-is-orthogonality)）。

可能相关的情况示例：如果这个库是从 HTML 初始化的，而这个标签无法生成。例如，因为 HTML 将静态提供（或通过 CDN）。

# spring - 在控制器中存储会话数据

> ID：15592012
> 
> 赞同：0
> 
> 时间：2013-03-23T21:01:17.480
> 
> 标签：spring, spring-mvc, annotations

我是春天的新手。我正在开发一个 MVC 应用程序，其工作方式如下：

1) 用户在表单中填写创建与某些服务的连接所需的数据

2) 控制器从输入中获取数据，创建新对象 serviceManager 并将该对象保存在例如带有 serviceId 的一些 HashMap 中

3) 下次用户想要使用这个服务时，控制器使用 serviceId 从 HashMap 中读取数据。

所以我只需要在整个会话中将这个 HashMap 存储在我的控制器中以供将来使用。实现这一目标的最佳方法是什么？也许每次创建 serviceManager 对象并从数据库中读取数据是正确的解决方案？在我的控制器中，我已经在使用完美服务于目的的 @Autowired 字段，但它们是在 spring xml 中定义的，我必须动态存储数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:53:00.163

Seems your requirement is kind of same with mine which I should keep the main data in the session and every time get the detail data from client and combine 2 kind of data to retrieve something from database. I just put the main part data in the session and then in the whole session that I can get it. I also try to use @SessionAttribute, but after tried dozens of time, I gave it up, it has a lots of problems. So if you can, I just recomment you to store the data in session, that's the samplest way.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T23:55:54.207

我对自己很陌生，但就在会议中提出这个问题而言：

```
@Controller
@SessionAttributes({"myObject"})
public class MyController() {
...
    @RequestMapping(value="/foo")
// Corrected as per Costi below
//    public String someMethod(@PathVariable MyObject myObject) {
    public String someMethod(@ModelAttribute MyObject myObject) {
    ...
    }
} 
```

@SessionAttributes 会将名为 myObject 的 MyObject 放入会话中，如果它不存在的话，@PathVariable 会将其拉下，以便您可以在方法中使用它。

会话属性中的 curlys 不是一个属性所必需的，但是，当您使用数组表示法（即：curlys）时，您可以指定多个，逗号分隔

# javascript - JSON — 使用 new Date(...) 解析错误

> ID：15592015
> 
> 赞同：0
> 
> 时间：2013-03-23T21:01:28.293
> 
> 标签：javascript, json

为什么这个 JSON 会给我解析错误？我可以发誓我之前已经做过一百次了，没有问题。

```
[[0,0,0,new Date(1364068990245)],[0,0,0,new Date(1364068940075)]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:04:00.590

如果这是文字 JavaScript，如下所示：

```
var myArray = [[0,0,0.......]]; 
```

那么它应该没问题，你的错误一定来自其他地方。

如果它是您将其视为 JSON 的字符串，如下所示：

```
var myArray = JSON.parse("[[0,0,0.........]]"); 
```

然后你就不能拥有`new Date`（或实际上任何函数调用），它应该只是一个数字，然后你将其解析为日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:05:43.917

因为`new`运算符不是 JSON 的一部分。您的示例是 JavaScript 文件的有效片段，但在解析为 JSON 时会正确导致错误。日期应该被序列化为字符串（理想情况下，作为构造函数将接受的 ISO-8601 字符串`Date`，但我认为数字也是可以容忍的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:40:03.280

那不是 JSON，JSON 格式没有日期。

参考： http: [//www.json.org/](http://www.json.org/)

一些 JSON 解析器使用这种表示日期的方式扩展了标准：

```
"[[0,0,0,/Date(1364068990245)/],[0,0,0,/Date(1364068940075)/]]" 
```

如果您使用的解析器不支持，您必须将它们作为不同的数据类型传输，例如数字，然后在解析 JSON 后将它们转换为日期：

```
"[[0,0,0,1364068990245],[0,0,0,1364068940075]]" 
```

# flash - 有什么方法可以在 Safari 和 IE 上回退 Ogg？

> ID：15592017
> 
> 赞同：2
> 
> 时间：2013-03-23T21:01:39.113
> 
> 标签：flash, internet-explorer, safari, html5-audio, ogg

我正在使用以 Ogg Vorbis 编码的音频文件运行一个项目。我想让它在任何浏览器中都可以播放。

它目前在 Firefox 中与流媒体完美运行。在 Chrome 中，它需要在播放开始之前完全加载。

有没有办法对其他浏览器提供后备支持？也许扔了Flash插件？我尝试了很多 JS Player 声称他们有 flash 回退但它实际上只适用于 MP3。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:21:33.857

如果我没记错的话，我相信[SoundManager2](http://www.schillmania.com/projects/soundmanager2/)支持 OGG Flash 后备支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:29:24.533

我认为如果您不能对文件进行双重编码，唯一的方法就是以其他方式进行

*   将文件编码为 MP3 或 AAC

*   对于 Firefox、Opera，提供可以解码 MP3 文件的 Flash 后备

理论上，您还可以在纯 Javascript [https://github.com/audiocogs/jsmad中解码 MP3 文件](https://github.com/audiocogs/jsmad)

# apache - 如何与 MAMP 和 VirtualHostX 一起运行 Pow.CX

> ID：15592018
> 
> 赞同：0
> 
> 时间：2013-03-23T21:01:41.860
> 
> 标签：apache, mamp, rack, rack-pow

[我在 StackOverflow 上](https://stackoverflow.com/questions/7010104/running-pow-mamp-pro-simultaneously)遇到了一些与此问题类似的答案，但它们与 MAMP Pro 相关。我的特定设置包括标准 MAMP 和 VirtualHostX (VHX)。

我不打算购买 MAMP Pro、MAMP 和 VHX 来满足我的需求。我正在运行 Mac OSX 10.8.3 (Mountain Lion)。

当前安装的应用程序：

*   [MAMP](http://www.mamp.info/en/mamp/index.html)：2.1.1 在端口 8888 上运行（MySQL 在 8889 上）
*   [虚拟主机X](http://clickontyler.com/virtualhostx/) (4.0.6)
*   [砧](http://anvilformac.com/)

我之前安装了[Pow.cx](http://pow.cx/)和 Anvil，但这导致我的 MAMP 站点停止解析。所有流量都通过端口 80 路由到 Pow。

我卸载了 Pow，将 MAMP 上的端口改回了默认端口，现在它们可以正确解析。

如何继续运行 MAMP，通过 VirtualHostX 添加主机，同时运行 Pow & Anvil？

在我再次安装 Pow 之前我需要采取哪些步骤，我需要在安装后做任何事情吗？

我是否需要在 VHX 中添加任何规则来阻止冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T16:38:13.640

我发现了这个，它对我有用：

[https://github.com/37signals/pow/wiki/Running-Pow-with-Apache](https://github.com/37signals/pow/wiki/Running-Pow-with-Apache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T22:41:11.447

我刚刚让 MAMP 和 Pow（通过 Anvil）与以下设置一起运行：

1.  将 MAMP 的 Apache 端口设置为 8888。
2.  在 VirtualHostX 中，将应用程序的端口设置为 8888 和除`.dev`.

您现在可以访问您`<appname>.dev`在 VHX 中设置的域中的 Pow 应用程序和 MAMP 应用程序（这`.site`是我的设置），以及最后的端口号。例如，我有一个 Pow 应用程序设置`mysite.dev`和 MAMP 应用程序设置`mysite.site:8888`。

这并不理想，因为您必须在 URL 的末尾加上端口号。但至少你现在可以同时使用 Pow 和 MAMP 而不会发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T20:54:52.420

有一种不同的方法允许在两台服务器上使用默认端口 80。

您需要向环回接口添加一个额外的 IP 地址，并将第二个 Web 服务器绑定到这个新的 IP 地址。

例如在我的 Mac 机器上，环回接口被命名为 lo0

所以要添加一个新的 IP 地址，我这样做：

```
sudo ifconfig lo0 alias 127.0.0.2 
```

然后在 Apache/MAMP 配置中取决于你使用什么替换

```
Listen *:80 
```

或者

```
NameVirtualHost *:80 
```

分别与

```
Listen 127.0.0.2:80 
```

或者

```
NameVirtualHost 127.0.0.2:80 
```

然后您可以使用其默认设置运行 pow

您还可以在 /etc/hosts 中为 127.0.0.2 创建一个域名

例子：

```
127.0.0.2 webserver2 
```

PS 这种方法也可以在 Linux 和 Windows 上实现。

# sql - 常用函数/存储过程和不兼容的更新

> ID：15592024
> 
> 赞同：0
> 
> 时间：2013-03-23T21:02:24.740
> 
> 标签：sql, procedure

我们在一个更大的套件中有许多模块，它们都使用一组通用的存储过程和函数，部分原因是它们都使用一组通用的数据和表。这种方法可确保所有模块在拨打相同电话时收到相同的答案 - 这是一件非常好的事情（尤其是在金融行业）

但是，这种方法的缺点是，当我们更新套件中的一个模块时，需要更改其中一个共享存储过程或函数，它需要我们更新几乎整个套件。由于时间和成本，这是一件坏事。

每次我们更新单个存储过程时，可以采用什么样的策略来缓解这个套件升级问题，同时最大限度地降低管理复杂性。

这有点类似于微软在 DLL(s)/API(s) 中遇到的版本问题，您会看到 API 上的签名更改需要 xxx2 版本，这不是理想的原因，那么您基本上有两个版本两者都需要维护和升级，因为它们可能会失去同步（即同一个问题有两个不同的答案）。

在这方面的任何策略或最佳实践将不胜感激。

提前致谢。

什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:12:40.987

两种策略是视图和存储过程。

使用视图访问表中的数据。这样，您可以更改基础表（针对一个模块），而不必立即更改其他模块。最终，您也可以更改该模块。例如，您可以将一个表拆分为一个模块的两个不同的表。其他模块永远不会注意到，因为它们访问视图，而您只需修改视图以返回原始数据。

按照这些思路，您永远不想使用`select *`，因为列、它们的名称或它们的顺序可能会改变。

第二种策略是将所有`insert`、`update`和包装`delete`到存储过程中。这有第二个优势，您可以在过程中进行检查、记录和通知。您可以尝试使用触发器和约束来模拟这一点，但我发现存储过程方法更易于维护。

# java - transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8") 不工作

> ID：15592025
> 
> 赞同：17
> 
> 时间：2013-03-23T21:02:36.140
> 
> 标签：java, xml, xml-serialization

我有以下方法将 XMLDom 写入流：

```
public void writeToOutputStream(Document fDoc, OutputStream out) throws Exception {
    fDoc.setXmlStandalone(true);
    DOMSource docSource = new DOMSource(fDoc);
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    transformer.setOutputProperty(OutputKeys.INDENT, "no");
    transformer.transform(docSource, new StreamResult(out));
} 
```

我正在测试其他一些 XML 功能，这只是我用来写入文件的方法。我的测试程序生成了 33 个测试用例，其中文件被写出。其中 28 个具有以下标题：

```
<?xml version="1.0" encoding="UTF-8"?>... 
```

但由于某种原因，现在有 1 个测试用例产生：

```
<?xml version="1.0" encoding="ISO-8859-1"?>... 
```

还有四种产品：

```
<?xml version="1.0" encoding="Windows-1252"?>... 
```

如您所见，我将 ENCODING 输出键设置为 UTF-8。这些测试用于在早期版本的 Java 上工作。我已经有一段时间（一年多）没有运行测试了，但是今天在“Java(TM) SE 运行时环境（build 1.6.0_22-b04）”上运行我得到了这个有趣的行为。

我已经验证导致问题的文档是从最初具有这些编码的文件中读取的。似乎新版本的库正在尝试保留已读取源文件的编码。但这不是我想要的……我真的希望输出为 UTF-8。

有谁知道可能导致转换器忽略 UTF-8 编码设置的任何其他因素？为了忘记最初读取的文件的编码，是否需要在文档上设置其他任何内容？

更新：

我在另一台机器上检查了同一个项目，在那里构建并运行了测试。在那台机器上，所有的测试都通过了！所有文件的标题中都有“UTF-8”。该机器具有“Java(TM) SE Runtime Environment (build 1.6.0_29-b11)” 两台机器都运行 Windows 7。在正常工作的新机器上，jdk1.5.0_11 用于构建，但在旧机器上机器 jdk1.6.0_26 用于构建。用于两个构建的库完全相同。会不会是 JDK 1.6 在构建时与 1.5 不兼容？

更新：

4.5年后，Java库仍然坏掉，但由于下面Vyrx的建议，我终于有了一个合适的解决方案！

```
public void writeToOutputStream(Document fDoc, OutputStream out) throws Exception {
    fDoc.setXmlStandalone(true);
    DOMSource docSource = new DOMSource(fDoc);
    Transformer transformer = TransformerFactory.newInstance().newTransformer();
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    transformer.setOutputProperty(OutputKeys.INDENT, "no");
    out.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>".getBytes("UTF-8"));
    transformer.transform(docSource, new StreamResult(out));
} 
```

解决方案是禁用标头的写入，并在将 XML 序列化到输出流之前写入正确的标头。蹩脚，但它产生正确的结果。4 年前打破的测试现在再次运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-16T18:03:49.013

要回答以下代码对我有用的问题。这可以采用输入编码并将数据转换为输出编码。

```
 ByteArrayInputStream inStreamXMLElement = new ByteArrayInputStream(strXMLElement.getBytes(input_encoding));
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder(); 
        Document docRepeat = db.parse(new InputSource(new InputStreamReader(inStreamXMLElement, input_encoding)));
        Node elementNode = docRepeat.getElementsByTagName(strRepeat).item(0);

        TransformerFactory tFactory = null;
        Transformer transformer = null;
        DOMSource domSourceRepeat = new DOMSource(elementNode);
        tFactory = TransformerFactory.newInstance();
        transformer = tFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.ENCODING, output_encoding);

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        StreamResult sr = new StreamResult(new OutputStreamWriter(bos, output_encoding));

        transformer.transform(domSourceRepeat, sr);
        byte[] outputBytes = bos.toByteArray();
        strRepeatString = new String(outputBytes, output_encoding); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-06T21:31:31.097

序列化表情符号字符时，我在 Android 上遇到了同样的问题。在转换器中使用 UTF-8 编码时，输出是 HTML 字符实体（UTF-16 代理对），随后会破坏读取数据的其他解析器。

这就是我最终解决它的方式：

```
StringWriter sw = new StringWriter();
sw.write("<?xml version=\"1.0\" encoding=\"UTF-8\" ?>");
Transformer t = TransformerFactory.newInstance().newTransformer();

// this will work because we are creating a Java string, not writing to an output
t.setOutputProperty(OutputKeys.ENCODING, "UTF-16"); 
t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
t.transform(new DOMSource(elementNode), new StreamResult(sw));

return IOUtils.toInputStream(sw.toString(), Charset.forName("UTF-8")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T13:40:22.970

我花了很多时间调试这个问题，因为它在我的机器上运行良好（Ubuntu 14 + Java 1.8.0_45），但在生产环境中运行不正常（Alpine Linux + Java 1.7）。

与我的预期相反，上述答案没有帮助。

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
StreamResult sr = new StreamResult(new OutputStreamWriter(bos, "UTF-8")); 
```

但这一个按预期工作

```
val out = new StringWriter()
val result = new StreamResult(out) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-06T20:12:46.947

我可以通过包装传递给 DOMSource 构造函数的 Document 对象来解决这个问题。我的包装器的 getXmlEncoding 方法总是返回 null，所有其他方法都委托给包装的 Document 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-27T11:29:47.770

关于什么？：

```
public static String documentToString(Document doc) throws Exception{ return(documentToString(doc,"UTF-8")); }//
   public static String documentToString(Document doc, String encoding) throws Exception{
     TransformerFactory transformerFactory =TransformerFactory.newInstance();
     Transformer transformer = null;

if ( "".equals(validateNullString(encoding) ) ) encoding = "UTF-8";
try{
    transformer = transformerFactory.newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT, "yes") ;
    transformer.setOutputProperty(OutputKeys.ENCODING, encoding) ;
}catch (javax.xml.transform.TransformerConfigurationException error){
    return null;
}

Source source = new DOMSource(doc);    
StringWriter writer = new StringWriter();
Result result = new StreamResult(writer);

try{
    transformer.transform(source,result);
}catch (javax.xml.transform.TransformerException error){
    return null;
}
return writer.toString();    
}//documentToString 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T08:29:17.587

使用 Saxon TransformerFactoryImpl，（Saxon HE >= 10.3）：

```
public void writeToStream(Document doc, OutputStream output) throws TransformerException, IOException
    {
        TransformerFactory transformerFactory =
            TransformerFactory.newInstance("net.sf.saxon.TransformerFactoryImpl", null);
        transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);
        transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, "");
        transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, "");
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        transformer.transform(source, new StreamResult(output));

    } 
```

这解决了我身边的这个问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-11T13:41:38.600

我在这里进行了一次疯狂的拍摄，但是您提到您正在读取文件以获取测试数据。您能否确保您使用正确的编码读取文件，因此当您写入 OutputStream 时，您已经拥有正确编码的数据？

所以有类似 new InputStreamReader(new FileInputStream(fileDir), "UTF8") 的东西。

不要忘记 FileReader 的单参数构造函数始终使用平台默认编码：[此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的。](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html#FileReader%28java.io.File%29)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-11-04T04:39:00.567

尝试在您的 StreamResult 上专门设置编码：

```
StreamResult result = new StreamResult(new OutputStreamWriter(out, "UTF-8")); 
```

这样，它应该只能以 UTF-8 写出。

# ruby-on-rails - 未定义的方法“小写！” for 0:Fixnum 在设计中

> ID：15592026
> 
> 赞同：1
> 
> 时间：2013-03-23T21:02:36.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

提交注册信息时出现以下错误：

```
 NoMethodError in Devise::RegistrationsController#create

undefined method `downcase!' for 0:Fixnum 
```

\livu_pamatskola\app\views\devise\registrations\new.html.erb：

```
<h1>Reģistrācija</h1>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

<div id="contacts">
    <div id="title"><%= f.label "Vārds" %></div>
    <div id="information"><%= f.text_field :name %></div>
    <div style="clear: both;"></div>
    <div id="title"><%= f.label "Uzvārds" %></div>
    <div id="information"><%= f.text_field :surname %></div>
    <div style="clear: both;"></div>
    <div id="title"><%= f.label "E-pasts" %></div>
    <div id="information"><%= f.text_field :email, :autofocus => true %></div>
    <div style="clear: both;"></div>
    <div id="title"><%= f.label "Parole" %></div>
    <div id="information"><%= f.password_field :password %></div>
    <div style="clear: both;"></div>
    <div id="title"><%= f.label "Vēlreiz parole" %></div>
    <div id="information"><%= f.password_field :password_confirmation %></div>
</div>
    <div><%= f.submit "Reģistrēties", :id => "button-link" %></div>
<% end %> 
```

我知道问题出在注册控制器中，正如我所想，但我没有这样的控制器。我在整个互联网上搜索了解决方案，但我没有找到任何东西，只是花了很多时间，所以我需要你的帮助。

痕迹：

```
activesupport (3.2.8) lib/active_support/core_ext/object/try.rb:36:in `try'
devise (2.2.1) lib/devise/models/authenticatable.rb:172:in `apply_to_attribute_or_variable'
devise (2.2.1) lib/devise/models/authenticatable.rb:163:in `block in downcase_keys'
devise (2.2.1) lib/devise/models/authenticatable.rb:163:in `each'
devise (2.2.1) lib/devise/models/authenticatable.rb:163:in `downcase_keys'
activesupport (3.2.8) lib/active_support/callbacks.rb:407:in `_run__271922054__validation__371060191__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_validation_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
activemodel (3.2.8) lib/active_model/validations/callbacks.rb:53:in `run_validations!'
activemodel (3.2.8) lib/active_model/validations.rb:194:in `valid?'
activerecord (3.2.8) lib/active_record/validations.rb:69:in `valid?'
activerecord (3.2.8) lib/active_record/validations.rb:77:in `perform_validations'
activerecord (3.2.8) lib/active_record/validations.rb:50:in `save'
activerecord (3.2.8) lib/active_record/attribute_methods/dirty.rb:22:in `save'
activerecord (3.2.8) lib/active_record/transactions.rb:241:in `block (2 levels) in save'
activerecord (3.2.8) lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
activerecord (3.2.8) lib/active_record/transactions.rb:208:in `transaction'
activerecord (3.2.8) lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
activerecord (3.2.8) lib/active_record/transactions.rb:241:in `block in save'
activerecord (3.2.8) lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
activerecord (3.2.8) lib/active_record/transactions.rb:240:in `save'
devise (2.2.1) app/controllers/devise/registrations_controller.rb:15:in `create'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:436:in `_run__1051681660__process_action__714589613__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/mapper.rb:42:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__646451992__call__371060191__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
c:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

**问题解决了：**

当我为 Devise 创建用户模型时，我在迁移中包含了电子邮件属性。向用户模型添加设计时出现问题，默认情况下它也会添加电子邮件字段，因此与我之前的迁移冲突。

我很高兴我已经解决了它，因为我没有时间处理这些错误。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:11:05.783

看起来您的用户模型具有错误的属性类型。确保您的数据库包含有效类型的字段。在此处了解更多信息：[https ://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

您的问题可能与已知的不区分大小写的键问题有关。将以下代码段添加到您的 config/initializers/devise.rb 文件中：[http ://anti-pattern.com/case-insensitive-keys-with-devise](http://anti-pattern.com/case-insensitive-keys-with-devise)

注册控制器在设计库中定义，如果您将设计添加到 Gemfile，它会自动添加到您的应用程序控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:27:03.447

您是否提交了某些字段的数字信息？比如，“123”代表用​​户名？如果将数字作为字符串获取，但认为它实际上是一个数字，这可能是 Devise 的问题。

# asp.net-mvc - 使用 azure 帐户时是否可以更改“cdn”文件夹名称

> ID：15592029
> 
> 赞同：0
> 
> 时间：2013-03-23T21:02:55.453
> 
> 标签：asp.net-mvc, azure

我知道一旦我在 azure 中启用 CDN，它就会获得我们的链接： http: [//mytest.cloudapp.net/cdn](http://mytest.cloudapp.net/cdn)

虽然在这种情况下要使用 CDN，但我必须在我的项目中创建 cdn 文件夹并将我的所有图像放入该文件夹中。是否可以更改名称上的“cdn”文件夹，例如“images”并将cdn 指向此“images”文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:24:39.140

您可以改为使用 web.config 中定义的 URL 重写规则。以下规则将重定向到 mywebsite.com/images/.. 的所有请求，并将 uri 重写到 CDN 位置。如果您已经在应用程序的一个文件夹中拥有所有图像，这是理想的选择，并且您不必更改所有相对图像路径。

```
<rewrite>
  <rules>
    <rule name="imagestoazurecdn">
      <match url="images/(.*)" />
      <action type="Redirect" url="https://mycdnid.vo.msecnd.net/images/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

CDN 端点链接到 Azure 中的存储容器，因此您只需将所有图像放入其中，按照上述规则，它们将自动在您的应用程序中获取。

[有关 URL 重写的更多信息在这里](http://www.iis.net/downloads/microsoft/url-rewrite)

# c - 如何存储用户输入两次？

> ID：15592036
> 
> 赞同：0
> 
> 时间：2013-03-23T21:03:57.733
> 
> 标签：c

我需要存储用户条目两次。

例如：

```
for (conta_vetor=0;conta_vetor<50;conta_vetor++)
{
    printf("Digite o %d número:\n",conta_vetor);
    scanf("%d", &vetor[conta_vetor]);

} 
```

用户条目必须使用相同的 scanf 存储在矢量位置和新地址上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:17:04.010

从您的评论中：

```
int x;
int conta_vetor = 0;

for (;;)
{
    printf("Digite o %d número:\n",conta_vetor);
    scanf("%d", &x);
    if (x != -1)
      vetor[conta_vetor++] = x;
    else
      break;
} 
```

# python - Python中的GUI

> ID：15592040
> 
> 赞同：0
> 
> 时间：2013-03-23T21:04:07.160
> 
> 标签：python

我现在拥有它的方式，我正在使用 Easygui，但我真的不喜欢 Easygui 在我的 Windows 7 系统上的外观。我想知道是否有任何方法可以使用实际的 Windows GUI（WinAPI，它被调用了吗？）

如果可以的话，我在哪里可以找到有关如何使用它的教程？（例如放入不同的按钮，而不仅仅是“Ok”，诸如此类

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:10:08.983

要直接访问 windows api，您可以使用[pywin32](http://sourceforge.net/projects/pywin32/)（有 64 位版本可用，32 只是名称的一部分）。

```
import win32api

win32api.MessageBox (None, "Hello, World!", "Greetings") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T21:07:39.010

如果您想为 Windows 制作真正好看的应用程序，我可能会建议您考虑使用[QT](http://en.wikipedia.org/wiki/Qt_%28framework%29)绑定，我认为当今最好的替代方案是[PythonQt](http://pythonqt.sourceforge.net/)或[PySide](http://qt-project.org/wiki/PySide)。

# linq - Linq To Entities '仅支持原始类型或枚举类型' 错误

> ID：15592042
> 
> 赞同：8
> 
> 时间：2013-03-23T21:04:26.170
> 
> 标签：linq, c#-4.0, linq-to-sql, linq-to-entities, entity-framework-5

我正在使用 LinqPad 来测试我的查询。当 LInqPad 连接到我的数据库（LInq 到 SQL）时，此查询有效，但当我更改连接以使用我的 Entity Framework 5 Model.dll 时，它不起作用。（链接到实体）。这是在 C# 中。

我有两个名为 Plan 和 PlanDetails 的表。关系是一个计划对许多计划细节。

```
var q = from pd in PlanDetails
        select new {
            pd.PlanDetailID,
            ThePlanName = (from p in this.Plans
                    where p.PlanID == pd.PlanID
                    select p.PlanName)
        };
var results = q.ToList();
q.Dump(); //This is a linqpad method to output the result. 
```

我收到此错误“NotSupportedException：无法创建'Domain.Data.Plan'类型的常量值。在此上下文中仅支持原始类型或枚举类型。” 任何想法为什么这只适用于 Linq to SQL？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T21:15:49.603

基本上这意味着您在查询中使用了一些复杂的数据类型进行比较。在你的情况下，我怀疑`from p in this.Plans where p.PlanID == pd.PlanID`是罪魁祸首。

它取决于 DataProvider。它可能适用于 Sql 数据提供程序，但不适用于 SqlCE 数据提供程序等。

您应该做的是将您的`this.Plans`集合转换为仅包含 Id 的原始类型集合，即

```
var integers = PlanDetails.Plans.Select(s=>s.Id).ToList(); 
```

然后在里面使用这个列表。

```
var q = from pd in PlanDetails
        select new {
            pd.PlanDetailID,
            ThePlanName = (from p in integers
                    where p == pd.PlanID
                    select pd.PlanName)
        }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-16T08:33:03.557

当我尝试对实体框架表达式中的导航属性进行空检查时出现此错误

我通过不使用表达式中的非空检查而仅使用 Any() 函数来解决它。

```
 protected Expression<Func<Entities.Employee, bool>> BriefShouldAppearInSearchResults(
        IQueryable<Entities.Employee> briefs, string username)
    {
       var trimmedUsername = NameHelper.GetFormattedName(username);

        Expression<Func<Entities.Employee, bool>> filterExpression = cse =>                
             cse.Employee.Cars.All(c => 
                 c.Employee.Cars!=null &&  <--Removing this line resolved my issue
                 c.Employee.Cars.Any(cur => cur.CarMake =="Benz")));

        return filterExpression;
    } 
```

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-23T21:19:07.777

如果您喜欢（或特殊性），这是一个 Linqpad 错误。我自己也发现了类似的行为。像我一样，您可能会发现您的查询适用于`ObjectContext`，但不适用于`DbContext`。（它适用于 Visual Studio）。

我认为这与 Linqpad 的内部结构有关。它添加`MergeAs (AppendOnly)`到集合中，上下文是 a `UserQuery`，其中可能包含一些导致此错误的代码。

当您在 Linqpad 代码中创建新的上下文实例并针对该实例运行查询时，代码*确实*可以工作这一事实证实了这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T21:12:24.510

如果关系已经存在。

为什么不简单的说。

```
var q = from pd in PlanDetails
        select new {
            pd.PlanDetailID,
            ThePlanName = pd.Plan.PlanName
        }; 
```

当然，我假设每个 PlanDetail 都属于一个计划。

**更新**

为了从 LinqPad 获得更好的结果，您可以告诉它使用您自己的程序集（其中包含您的 DbContext）而不是它使用的默认 Datacontext。

# java - 为什么以下makefile不起作用？

> ID：15592043
> 
> 赞同：1
> 
> 时间：2013-03-23T21:04:28.340
> 
> 标签：java, makefile

在下面的 makefile 中，目标“编译”每次都会执行，而不管它的依赖关系是否被改变。然而，目标“doc”并非如此，尽管依赖关系是相同的。请帮忙！

```
all : setup compile doc

setup : 
        @mkdir -p doc bin

compile: ./src/*.java ./src/cs296BookAnalysis/*.java
        @echo -n Compiling... 
        @javac -d ./bin ./src/cs296BookAnalysis/*.java ./src/BookAnalysisG01.java
        @echo Done!

doc: ./src/*.java ./src/cs296BookAnalysis/*.java
        @echo Generating Documentation using Javadoc... 
        @javadoc -d ./doc ./src/BookAnalysisG01.java -sourcepath ./src cs296BookAnalysis
        @echo Done!

clean: rm -rf doc bin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:53:14.670

这是因为这就是 makefile 的工作方式:-)。

生成文件由*规则*组成：以非缩进行开头的每个块都是规则。每个规则都说明`make`如何创建某个文件。

通常，':' 左边的部分是生成文件的名称（*目标*）。例如，对于您要编写的 C 程序：

```
main.o : main.c defs.h
    cc -c main.c 
```

这告诉`make`：

*   这是如何创建的规则`main.o`
*   `main.o`取决于`main.c`和`defs.h`
*   运行`cc ...`创建`main.o`

因此，`make`将在任何时候运行该`cc...`部分

*   `main.o`不存在*或*
*   `main.c`或`defs.h`比`main.o`

现在，在您的示例中，规则的目标不是创建的文件。这样的目标被称为*虚假目标*。由于`make`永远不会将这些目标作为文件找到，因此每次都会运行规则。

`doc`规则是一个例外：该目录实际`doc`存在，并且由于`javadoc`写入该目录，该目录的时间戳将被更新。`make`将看到它`doc`比源文件更新，并且不会运行规则。

* * *

也就是说，我强烈建议您**不要使用 Makefiles 来编译 Java 代码**。虽然确实有可能，但 Makefile 是为 C 代码设计的，并且缺少许多对 Java 有用的特性。而是**使用 Java 的构建工具**。有几种可用；我可以推荐[Maven](http://en.wikipedia.org/wiki/Apache_Maven)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:48:48.553

试试这个，看看......

```
.Phony : abc 

doc : ./src/*.java ./src/cs296BookAnalysis/*.java  abc
        @echo Generating Documentation using Javadoc... 
        @javadoc -d ./doc ./src/BookAnalysisG01.java -sourcepath ./src cs296BookAnalysis
        @echo Done!

abc : 
```

这里 abc 是一个错误的目标，不需要存在并且不会被创建，因为它没有先决条件或接收方，它用于强制 make 尝试构建目标 abc 并且在此过程中 doc 目标也将显示为 out日期....这就是您想要的，每次您调用“make all”时都要构建文档目标。

# prolog - Prolog丢弃排列

> ID：15592049
> 
> 赞同：0
> 
> 时间：2013-03-23T21:04:56.917
> 
> 标签：prolog

我一直无法丢弃重复排列。例如，我想得到

```
?-permutation([1,2,1],L).
L = [1, 2, 1] ;
L = [1, 1, 2] ;
L = [2, 1, 1] ; 
```

. 但我得到

```
?-permutation([1,2,1],L).
L = [1, 2, 1] ;
L = [1, 1, 2] ;
L = [2, 1, 1] ;
L = [2, 1, 1] ;
L = [1, 1, 2] ;
L = [1, 2, 1] ; 
```

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:22:52.303

我认为更简单的方法可能是

```
perm_no_rep(L, P) :-
  setof(P, permutation(L, P), Ps),
  member(P, Ps). 
```

几乎没问题：

```
?- perm_no_rep([1,2,1],P).
P = [1, 1, 2] ;
P = [1, 2, 1] ;
P = [2, 1, 1]. 
```

请注意，这将是`factorial(Num_Distinct_Elements_in_L) = length(Ps)`即可能非常大的列表。

# java - 如何在没有 [...] 和 , 分隔符的情况下打印 Map 中的值（字符串）？

> ID：15592050
> 
> 赞同：0
> 
> 时间：2013-03-23T21:05:04.203
> 
> 标签：java, map

我正在打印存储在地图中的字符串值，但我不希望它打印 [] 或 , 分隔符。如何仅打印值？

```
Iterator<String> iterator = styles.keySet().iterator();
while (iterator.hasNext()) {
    String key = iterator.next().toString();
    String value = styles.get(key).toString();
    stylePlaceHolder = value + "\n";
}
siteElements.add(stylePlaceHolder);

Iterator<String> iterator2 = libraries.keySet().iterator();
while (iterator2.hasNext()) {
    String key = iterator2.next().toString();
    String value = libraries.get(key).toString();
    libPlaceHolder = value + "\n";
    System.out.println(libraries.values().toString());
} 
```

生成：

```
03-23 17:56:56.350: I/System.out(9642143): [<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
03-23 17:56:56.350: I/System.out(9642143): 
, <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.
min.css" />

03-23 17:56:56.350: I/System.out(9642143): , <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
03-23 17:56:56.350: I/System.out(9642143): 
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:08:03.537

**HashMap 或任何地图类**的toString() 版本会创建一个带有 [] 的字符串。所以你无能为力。您可以做的最好的事情是遍历地图并以您想要的方式自行打印值。

如果您尝试在 Java 中打印任何集合，例如 List、Set 或 Map，情况也是如此。

例如：

```
 List<Integer> list = new ArrayList<Integer>();
    list.add(10);
    list.add(20);

    System.out.println(list);

    // Output is : [10, 20] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:22:11.107

看起来您正在依赖`toString`某些方法而不覆盖它。你还没有告诉我们`value`你的地图的部分是什么。

您可能需要覆盖`toString`对象的方法，或者，如果该对象是另一个`Collection`，您可能也需要循环：

```
 final Map<String, Collection<String>> map = new HashMap<>();
    for(final Entry<String, Collection<String>> entry : map.entrySet()) {
        System.out.println(entry.getKey());
        for(final String value : entry.getValue()) {
            System.out.println(value);                
        }
    } 
```

请注意，您可以使用增强的 for 循环来迭代 a`Map`比遍历键并调用`get`每个键更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:23:49.723

由于您只关心打印 的值`styles`，因此不要为`keySet`. 由于您在循环中构建您的 stylePlaceHolder，因此使用`StringBuilder`，而不是`String`连接。而且，您的循环在获得另一个值时会丢弃每个值。

```
StringBuilder b = new StringBuilder();
for(String style: styles.valueSet()) {
    b.append(style).append("\n");
}
siteElements.add(b.toString()); 
```

对 .执行几乎相同的操作`libraries`。实际上，将上面的大部分内容提取到一个方法中：

```
private String values(Map<?, ?> map) {
    StringBuilder b = new StringBuilder();
    for(Object value: map.valueSet()) {
        b.append(value).append("\n");
        // append can take an Object; it calls toString on it.
    }
    return b.toString();
} 
```

为了更快地工作，请考虑使用 Google Guava 及其`Joiner`类。记住——没有人付钱给你写代码。你得到报酬是为了解决问题。

```
private String values(Map<?, ?> map) {
    return Joiner.on("\n").join(map.valueSet()) + "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T22:25:31.853

不喜欢正则表达式？

```
 Map<String, String> map = new HashMap<>();
    map.put("key1", "value1");
    map.put("key2", "value2");
    map.put("key3", "value3");
    System.out.println(map.keySet());
    System.out.println(map.keySet().toString().replaceAll("[\\[\\],]", ""));
    System.out.println(map.values().toString().replaceAll("[\\[\\],]", "")); 
```

输出：

```
[key3, key2, key1]
key3 key2 key1
value3 value2 value1 
```

# javascript - 将复杂的excel公式转换为javascript

> ID：15592058
> 
> 赞同：1
> 
> 时间：2013-03-23T21:05:48.480
> 
> 标签：javascript, excel

首先，我不太精通 javascript，我正在尝试将这个复杂的 excel 公式转换为 javascript，但没有任何运气。

```
=DEGREES(ASIN(SIN(RADIANS(59.036))*SIN(RADIANS(150))))/2 
```

这是我到目前为止所拥有的

```
var x = DEGREES(Math.asin(Math.sin(RADIANS(59.036))*Math.sin(RADIANS(150))))/2 
```

显然，`DEGREES`并且`RADIANS`是错误的，我无法确定 javascript 的等价物是什么。

（顺便说一句，正确答案是 5.831）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:10:44.780

好吧，您可以编写自己的`DEGREES`和`RADIANS`函数，只涉及一点数学：

```
function degrees(x) { return x * 180 / Math.PI; }
function radians(x) { return x * Math.PI / 180; }

var x = degrees(Math.asin(Math.sin(radians(59.036))*Math.sin(radians(150))))/2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:12:07.493

自己定义这两个函数。它们都易于实施。

```
function DEGREES(radians){
  return (radians * 180 / Math.PI);
}
function RADIANS(degrees){
  return (degrees / 180 * Math.PI);
} 
```

# objective-c - Cocos 绘制精灵时 2D 大 FPS 下降

> ID：15592062
> 
> 赞同：0
> 
> 时间：2013-03-23T21:06:18.267
> 
> 标签：objective-c, xcode, cocos2d-iphone, lag

我正在为滚动视图绘制 52 个标签、精灵和按钮。但是，当我滚动时，当我使用滚动视图时，它会非常滞后。我使用类似的设置，在 x 和轴上滚动，没有延迟。我正在 iphone 5 上进行测试，所以我认为它能够非常轻松地处理它。对象需要移动的距离被正确计算并且对象被正确绘制它只是真的滞后。绘制代码：

```
 int cnt = 40;      
  for (NSString *i in [Trucks GetSetTruckList].TruckList){
    NSMutableArray *Truck = [[NSMutableArray alloc] initWithArray:[TruckDict objectForKey:i]];
     CGSize s = [[CCDirector sharedDirector] winSize];

    CCMenuItemImage *BuyButton = [CCMenuItemImage itemWithNormalImage:@"Buy.jpg" selectedImage:@"Buy.jpg"block:^(id sender) {[self BuyTruck:Truck]; }];
    BuyButton.position = ccp((s.width/2) - 20 , (s.height/2) - cnt  + ShopPointX);
    BuyButton.scale = .5;

    CCLabelTTF *Name = [CCLabelTTF labelWithString:[Truck objectAtIndex:0] fontName:@"Marker Felt" fontSize:19];
    Name.position = ccp(100, (s.height) - cnt + ShopPointX);

    CCLabelTTF *NumPeople = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"Ppl: %@" , [Truck objectAtIndex:2]] fontName:@"Marker Felt" fontSize:13];
    NumPeople.position = ccp(200, (s.height) - cnt + ShopPointX);

    CCLabelTTF *NumCrate = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"Crgo: %@" , [Truck objectAtIndex:1]] fontName:@"Marker Felt" fontSize:13];
    NumCrate.position = ccp(270, (s.height) - cnt + ShopPointX);

    CCSprite *Pic = [CCSprite spriteWithFile:[Truck objectAtIndex:5]];
    Pic.position = ccp(340, (s.height) - cnt + ShopPointX);
    Pic.scale = .3;

    CCMenu *Menu = [CCMenu menuWithItems:BuyButton, nil];
    cnt = cnt + 40;

    [self addChild:Pic];
    [self addChild:Menu];
    [self addChild:Name];
    [self addChild:NumCrate];
    [self addChild:NumPeople];
    StartShop = 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:35:27.467

您可能会遇到延迟，因为 OpenGL 正在为每个精灵进行单独的绘制调用。您是否将精灵放入“CCSpriteBatchNode”？看起来所有孩子都被添加到“自我”中。如果你使用批处理节点，无论批处理节点中包含多少子节点，OpenGL 只能对每个 CCSpriteBatchNode 进行一次“绘制”调用。唯一的问题是作为 CCSpriteBatchNode 子节点的所有 CCSprite 必须共享相同的图像。

一种方法是按图像名称将 CCSpriteBatchNodes 放入 NSDictionary，并将每个 CCSpriteBatchNode 添加到“self”。

```
 // This line assumes usage of a CCSpriteFrameCache to init the sprite, but you can create it some other way.
    CCSprite *spr = [CCSprite spriteWithSpriteFrameName:spriteName];

    CCSpriteBatchNode *batchNode;
    if([self.batchNodeDictionary objectForKey: spriteName]) {
        // Acquire the batchnode by image name
        batchNode = (CCSpriteBatchNode *) [self.batchNodeDictionary objectForKey: spriteName];
    } else {
        // BatchNode for this image doesn't exist yet; therefore, populate a new batch node for the image name

        batchNode = [CCSpriteBatchNode batchNodeWithFile:spriteNamePNG];
        [self addChild:batchNode];
        [batchNodesDictionary setObject:batchNode forKey:spriteName];

    }
    [batchNode addChild:spr]; 
```

# ckeditor - CKEditor 插件拆分为多个 js 文件

> ID：15592068
> 
> 赞同：0
> 
> 时间：2013-03-23T21:06:56.207
> 
> 标签：ckeditor

我正在创建一个新的 CK 编辑器插件，并希望将 javascript 代码拆分为多个 .js 文件 目前我看不到加载第二个 .js 文件的方法。

我的结构：

*   plugin.js --> 这是包含插件结构/代码的主文件
*   manip.js --> 包含由插件调用的文本操作函数（800 多行）

这可能吗？您的建议是什么 - 将所有代码放入 plugin.js 中，还是将代码拆分为两个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:17:57.663

只有从一开始就不需要拆分代码才有意义。例如，CKEditor 按需加载对话框的代码，从词过滤器中粘贴也是如此。这些文件通常很大（> 1k LOC），在开始时加载它们并不重要。

如果您想按需加载文件，请检查 pastefromword 插件的这一部分：[https ://github.com/ckeditor/ckeditor-dev/blob/master/plugins/pastefromword/plugin.js#L95-L108](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/pastefromword/plugin.js#L95-L108)

这是文档：[CKEDITOR.scriptLoader](http://docs.ckeditor.com/#!/api/CKEDITOR.scriptLoader)，[CKEDITOR.getUrl](http://docs.ckeditor.com/#!/api/CKEDITOR-method-getUrl)。

# ruby - 使用 mongomapper 保存日期/时间

> ID：15592069
> 
> 赞同：3
> 
> 时间：2013-03-23T21:07:00.953
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongomapper

我试图将日期时间信息保存到 mongo 中的以下字段

```
key :last_comment_time_cache, DateTime

update_attributes!({:last_comment_time_cache => Time.now}) 
```

正在保存的数据缺少时间

```
"last_comment_time_cache": {
    "$date": "2013-03-23T00:00:00.000Z"
} 
```

关于我做错了什么的任何想法？，谢谢 Nath

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:19:03.553

尝试将字段类型更改为`Time`而不是`DateTime`. 如果您[在此处](https://github.com/jnunemaker/mongomapper/blob/master/lib/mongo_mapper/extensions/date.rb)`Date`观看他们的扩展名（是 的[父](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)级），他们只考虑构建将发送到 mongo 的日期，但他们的[Time](https://github.com/jnunemaker/mongomapper/blob/master/lib/mongo_mapper/extensions/time.rb)实现并非如此。`Date``DateTime``day,month and year`

# html - 仅在修改最后一行时添加新行

> ID：15592076
> 
> 赞同：0
> 
> 时间：2013-03-23T21:07:59.490
> 
> 标签：html, data-binding, knockout.js

**问题描述：**

我有一个三行表。第一行包含一个下拉菜单。当用户选择下拉选项时，应在当前最后一行下方生成一个新行。如何调整此代码以使仅当用户选择当前最后一行的下拉选项而不是任何其他行时才生成新行？

JSFiddle：http: [//jsfiddle.net/JPVUk/13/](http://jsfiddle.net/JPVUk/13/)

```
 var ViewModel = function() {
var self = this;
 self.items = ko.observableArray([{comment:'first comment', amount:0}]);
 self.addNewItem = function(){
   self.items.push(new Item('',0));
 };
}

var Item = function(comment, amount) {
var self = this;
self.comment = ko.observable(comment);
self.amount = ko.observable(amount);   
}; 

vm = new ViewModel()
ko.applyBindings(vm); 
```

**我正在努力做的事情：**

因此，由于我想将更改事件绑定到最后一行，因此我是这样处理它的：

```
 <select class="input-small" data-bind="items()[items.length-1] ? event: { change: $root.addNewItem }"> 
```

然而，这是行不通的。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:33:18.190

难道你不能跳过导致事件触发到你的处理程序的行并在那里检查吗？

像这样的东西：

```
<select class="input-small" data-bind="event: { change: $root.addNewItem }"> 
```

进而：

```
self.addNewItem = function(row){
    if (row == self.items()[self.items().length - 1]) {
        self.items.push(new Item('',0));
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:40:19.893

[http://jsfiddle.net/JPVUk/14/](http://jsfiddle.net/JPVUk/14/)

我不确定 jQuery 是否可以接受，所以这只是使用 DOM。基本上使用传递给淘汰赛的事件对象。遍历一点 dom 并确定事件目标是父表中最后一行的子项：

```
 var tableRow = event.target.parentNode.parentNode,
        body = tableRow.parentNode,
        nodes = body.childNodes,
        children = [];
    for (var i = 0; i < nodes.length; i++) {
        // remove non-element node types. ie textNodes, etc.
        if (nodes[i].nodeType === 1) {
            children.push(nodes[i]);
        }
    }

    if (tableRow === children[children.length - 1]) {
        self.items.push(new Item('', 0));
    } 
```

# php - 比较更新php mysql前后的数据

> ID：15592080
> 
> 赞同：1
> 
> 时间：2013-03-23T21:08:20.117
> 
> 标签：php, mysql

如何比较更新 PHP 和 MySQL 前后的数据？如果我在数据库中添加一些可以更新的数据，有没有办法将新更新的数据与以前的数据进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:11:35.933

是的，这就是[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)的用途。

使用`CREATE TRIGGER`语法，您可以在 UPDATE 或 INSERT 之前创建触发器

```
CREATE TRIGGER insert_trigger_name BEFORE INSERT ON table 
```

或者

```
CREATE TRIGGER update_trigger_name BEFORE UPDATE ON table 
```

# python - Django：如何检查用户是否已经在 ManyToManyField 上投票？

> ID：15592082
> 
> 赞同：1
> 
> 时间：2013-03-23T21:08:41.673
> 
> 标签：python, django, django-1.5

```
 class Punch(models.Model):
        ring            = models.ForeignKey(Ring)
        voters           = models.ManyToManyField(settings.AUTH_USER_MODEL)

    class Ring(models.Model):
        category        = xxxx 
```

我有这个带有 ManyToManyField 的课程。

每个用户每次打卡只能投票一次。现在我需要知道用户是否已经投票支持特定的一拳。

我该怎么做？

```
punch.voters.filter(??? = request.user) 
```

阅读我想出的文档：

```
voters = get_user_model().objects.filter(punch__voters=request.user) 
```

但这给了我用户为所有拳头投票的总次数。但我只对一个特定的拳感兴趣，看看他是否投了赞成票。

我仍在努力解决这个问题。感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:14:51.153

[可以使用跨关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)查找来查询多对多关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:09:24.353

你可以试试这个：

```
punch.voters.filter(pk=request.user.pk) 
```

您也可以`filter`用`try-expect`包装的替换`get`

# java - 在Java中将双向文本写入文本文件

> ID：15592084
> 
> 赞同：0
> 
> 时间：2013-03-23T21:09:06.953
> 
> 标签：java

我正在尝试将以下字符串写入文本文件：

```
str1 = "אבג IMM:";
str2 = "3492"; 
```

为了让事情更清楚，让我们说`a = "אבג"`，`b = "IMM:"`。我要写入文本文件的是`a + b + str2`.

我实际上得到的是`a + str2 + b`

我以为我会在谷歌找到一个简单的答案，但找不到，所以我被这个愚蠢的小问题困住了。

有任何想法吗？谢谢

编辑：

感谢您的快速回复。这是我的代码示例：

```
try {
    FileOutputStream out = new FileOutputStream("newtxt.txt");
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter
      (out,"UNICODE"));
    String str1 = "אבג IMM:";
    String str2 = "3492";
    String newStr = str1 + str2;
    writer.write(newStr);
    writer.close();
} catch(IOException ex) {} 
```

要记住的事情：

*   我正在将这段文本写入现有文件，其中大部分是从右到左的文本，因此虽然此文本从左到右正确显示，但问题就在那里。

*   在记事本中手动编写这段文本也被证明是有问题的。在微软的Word等更高级的程序中手动编写，问题就消失了。但是，由于现在编写代码，将文件保存为 doc / rtf 类型并不能解决此问题。

*   将英语附加到希伯来语没有问题，反之亦然，没有数字。

# java - 开发服务器中的 Google API 资源管理器“获取时超时”

> ID：15592085
> 
> 赞同：0
> 
> 时间：2013-03-23T21:09:11.433
> 
> 标签：java, google-app-engine, google-api, google-cloud-endpoints

我正在使用**Google Cloud Endpoints在****Google App Engine**中创建一个项目。为了测试端点，我使用了在本地运行的**Google APIs Explorer 。**

 ****```
localhost:8888/_ah/api/explorer 
```

对于我的大多数 API 方法，我没有问题，但我有一个具体方法必须在返回之前调用一些外部服务等，所以我总是在 API Explorer 中收到错误响应：

```
404 Not Found
{
 "error": {
  "message": "Timeout while fetching: http://127.0.0.1:8888/_ah/spi/MyEndpoint.method"
 }
} 
```

我认为 APIs Explorer 必须有某种默认时间限制，我想知道是否有任何方法可以设置它......

**编辑**：端点工作得非常好，我的意思是，它完成了所有应该做的操作，它保留了我想要的所有对象，等等。如果我添加断点，我可以看到程序通过了我的所有步骤想。问题是 Google APIs Explorer“不想等待”端点的响应，即使该响应已经准备好。****

# c# - 具有不同返回类型和参数数量的 Func 委托列表

> ID：15592086
> 
> 赞同：3
> 
> 时间：2013-03-23T21:09:11.953
> 
> 标签：c#, delegates

我有一个类需要在构造函数中传递不同数量的 Func 代表。这些委托中的每一个都将指向一个不同的函数，每个函数都有不同的返回类型，并且具有不同数量的参数（双精度型）。然后将相应地调用这些函数中的每一个。

问题 1\. 现在，为了让使用这个类的人更容易，我正在考虑允许用户传递一个`List<object>`Func 委托。这是否可能，如果可以，我是否能够确定`List<object>`传递给的方法（即构造函数）中每个 Func 所需的返回类型和参数数量？

问题2。如果上述不可行，我是否需要使用返回类型/参数数量的每种不同组合重载构造函数并相应地路由每个Func -_- ...如果没有，有人可以指出我正确的方向，我觉得我以错误的方式接近这个...

注意 - 来自 python 背景，我会做这样的事情（我在 c# 中没有经验）：

```
import inspect
def test(x): return x
inspect.getargspec(test)

returns: ArgSpec(args=['x'], varargs=None, keywords=None, defaults=None) 
```

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T21:14:47.357

> 问题 1\. 现在，为了让那些使用这个类的人更容易，我正在考虑允许用户传递一个 Func 委托列表。这是否可能，如果可以，我是否能够确定传递给 List 的方法（即构造函数）中每个 Func 所需的返回类型和参数数量？

并不真地。您可以允许`List<Delegate>`（或其他元素类型为 的集合`Delegate`），但没有`Func`特定的，原因有两个：

*   `Func`实际上是一个类型*族*，具有不同数量的泛型类型参数。就 CLR 而言，这些类型是完全独立的；`Func<TResult>`和 和一样`Func<T, TResult>`不同。`Action<T>``EventHandler`

*   即使您只处理相同泛型委托的多个值，它们可以具有不同类型参数的事实意味着它们对于 CLR 来说是不同的类型；没有办法说`List<Func<>>`“具有可能不同类型参数的函数列表”。同样，CLR 将它们视为单独的类型——尽管这一次至少有一个具有通用泛型类型定义。

> 问题 2\. 如果上述方法不可行，我是否需要使用返回类型/参数数量的每种不同组合重载构造函数并相应地路由每个 Func

好吧，有几种选择：

*   将所有参数设为可选，为每个参数赋予默认值`null`，然后在调用构造函数时使用命名参数：

    ```
     var foo = new Foo(clickHandler: () => ...,
                       keyHandler: key => ...); 
    ```

*   创建一个构建器，以便可以将各种函数设置为属性 - 这与对象初始值设定项语法配合得很好：

    ```
     var foo = new Foo.Builder {
                   ClickHandler = () => ...,
                   KeyHandler = () => ...
               }.Build(); 
    ```

当然，后两种解决方案都取决于您是否真的有特定的命名目的。

如果您可以更清楚地了解您想要实现的目标，这将有所帮助 - 正如 dtb 所说，多态性*可能*更适合这里。您可以创建一个具有虚拟方法的无操作实现的抽象类，并且实现可以选择要覆盖的那些。

# sql-server-2008 - SQL Server 2008 'RECONFIGURE' 不适用于 Windows 8 上的 'sp_configure filestream_access_level'

> ID：15592088
> 
> 赞同：2
> 
> 时间：2013-03-23T21:09:25.283
> 
> 标签：sql-server-2008

好吧，这很奇怪。

我安装了 Windows 8 和 SQL Server 2008。我正在使用的数据库启用了 FileStream，因此我需要启用 FileStream。所以，我做到了：

```
EXEC sp_configure filestream_access_level, 2
RECONFIGURE 
```

它没有用。

所以我尝试在 SQL Server Management Studio 中使用 UI。像这样：

![配置值](../Images/0f1ce86188f3dd09bdd35f3fb492b9e7.png)

注意在配置值下显示“完全访问”

在“运行值”下：

![运行值](../Images/4117848aa8535a1f6e88b5ee8744c3e5.png)

并注意在“运行值”下显示“已禁用”。

所以我做了：

1.  Ran `RECONFIGURE`，它返回*Command(s) completed successfully*。没用。
2.  重新启动 SQL Server 2008。没有用。
3.  重启机器。也没有用。

现在我想知道我`RECONFIGURE`是坏了还是我的用户界面坏了。所以我尝试更改`Default Language`为`UK - English`并运行`RECONFIGURE`. 有效！在“运行价值观”下，语言更改为英国。

所以我想问题是没有应用 Filestream 访问更改。但为什么？

我正在运行 Windows 8 64 位和此版本的 SQL Server：

```
Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (X64)   Jul  9 2008 14:17:44   
Copyright (c) 1988-2008 Microsoft Corporation  Enterprise Edition (64-bit) 
  on Windows NT 6.2 <X64> (Build 9200: ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:02:44.220

[文件流访问级别服务器配置选项](http://msdn.microsoft.com/en-us/library/cc645956.aspx)：

> 在此选项生效之前，必须启用 FILESTREAM 的 Windows 管理设置。您可以在安装 SQL Server 时或使用 SQL Server 配置管理器启用这些设置。

# c - 在 C 中使用 select 实现 UDP 套接字

> ID：15592089
> 
> 赞同：0
> 
> 时间：2013-03-23T21:09:35.877
> 
> 标签：c, sockets

我正在用 C 实现一个套接字编程项目。我正在使用`select()`等待来自客户端的数据。我有两个 UDP 套接字并且`select()`总是忽略我的一个套接字。

谁能简要描述我应该从哪里开始寻找它？这就是我的服务器正在做的事情

```
waitThreshold.tv_sec = 5000; 
waitThreshold.tv_usec = 50; 
if (sd > sd1)
    max_sd = (sd + 1);
else if(sd1 > sd)   
    max_sd = (sd1 + 1);
FD_ZERO(&read_sds); 
FD_SET(sd, &read_sds); 
FD_SET(sd1, &read_sds);   

ret = select(max_sd, &read_sds, NULL, NULL, &waitThreshold); 
if (ret < 0) {
    printf("\nSelect thrown an exception\n");   
    return 0;
} else if (FD_ISSET(sd, &read_sds)) { 
    // code for socket one 
} else if (FD_ISSET(sd1, &read_sds)) {
    // code for socket two 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:55:22.173

您必须在每次迭代后设置和重置

```
if(sd > sd1)    
      max_sd = (sd + 1);
else if(sd1 > sd)   
      max_sd = (sd1 + 1);
//some code
while(1){
   waitThreshold.tv_sec = 5000; 
   waitThreshold.tv_usec = 50;    
   FD_ZERO(&read_sds); 
   FD_SET(sd, &read_sds); 
   FD_SET(sd1, &read_sds);
   ret = select(max_sd, &read_sds, NULL, NULL, &waitThreshold); 
   if(ret <0)
   { 
     printf("\nSelect thrown an exception\n");   
     return 0;
   } 
   else if(FD_ISSET(sd, &read_sds)) 
    { // code for socket one }  
   else if(FD_ISSET(sd1, &read_sds)) 
   { // code for socket two }</pre></code>
} 
```

现在它将解决您的问题。

# algorithm - 在数组中找到频率最高的元素的最快算法是什么

> ID：15592090
> 
> 赞同：6
> 
> 时间：2013-03-23T21:09:42.347
> 
> 标签：algorithm, sorting, search, complexity-theory

我有两个输入数组 X 和 Y。我想返回数组 X 中在数组 Y 中出现频率最高的那个元素。

这样做的简单方法要求对于数组 X 的每个元素 x，我线性搜索数组 Y 的出现次数，然后返回具有最高频率的元素 x。这是伪算法：

```
 max_frequency = 0
 max_x = -1             // -1 indicates no element found
 For each x in X
     frequency = 0
     For each y in Y
         if y == x
             frequency++
     End For
     If frequency > max_frequency
         max_frequency = frequency
         max_x = x
     End If
 End For
 return max_x 
```

由于有两个嵌套循环，该算法的时间复杂度为 O(n^2)。我可以在 O(nlogn) 或更快的时间内做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T21:16:34.227

使用哈希表将键映射到计数。对于数组中的每个元素，做喜欢`counts[element] = counts[element] + 1`或你的语言的等价物。

最后，遍历哈希表中的映射并找到最大值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T21:16:38.103

或者，如果您可以有其他数据结构，您可以遍历数组 Y，每个数字在哈希表中更新其频率。这需要`O(N(Y)`时间。然后走 X 找出 X 中哪个元素的频率最高。这需要`O(N(X))`时间。总体：线性时间，因为您必须至少查看两者`X`以及任何实现中的每个元素（**编辑**：严格来说，这在所有情况/所有实现中都不是正确的，正如**jwpat7**指出的那样，尽管在最坏的情况下它是正确的案例），你不能比这更快。`Y`

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T21:17:37.013

常用算法的时间复杂度如下：

```
Algorithm     |   Best    |   Worst   |  Average
--------------+-----------+-----------+---------- 
MergeSort     | O(n lg n) | O(n lg n) | O(n lg n)  
InsertionSort |   O(n)    |  O(n^2)   |  O(n^2)  
QuickSort     | O(n lg n) |  O(n^2)   | O(n lg n)  
HeapSort      | O(n lg n) | O(n lg n) | O(n lg n)  
BinarySearch  |   O(1)    |  O(lg n)  |  O(lg n) 
```

一般来说，当遍历一个列表来满足某个条件时，你真的不能做得比线性时间更好。如果您需要对数组进行排序，我会说坚持使用 Mergesort（非常可靠）来查找数组中频率最高的元素。

**注意**：这是假设您要使用排序算法。否则，如果您被允许使用任何数据结构，我将使用具有恒定查找时间的 hashmap/hashtable 类型结构。这样，您只需匹配键并更新频率键值对。希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T05:40:16.880

第一步：对**X**和**Y**进行排序。假设它们对应的长度是**m**和**n**，这一步的复杂度将是 `O(n log n) + O(m log m)`。

第二步：计算**Y** 中的每个**X *[i]***并跟踪迄今为止的最大计数。在已排序的**Y**中搜索**X** ***[i]***是。第二步的总复杂度为：****`O(log n)``O(m log n)`****

 ****总复杂度：`O(n log n) + O(m log m) + O(m log n)`，或简化：`O(max(n,m) log n)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-23T21:13:55.987

基于分而治之概念的合并排序为您提供 O(nlogn) 复杂度

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-23T21:19:16.727

如果两个列表的长度均为 n，您建议的方法将是 O(n^2)。更有可能的是列表可以是不同的长度，因此时间复杂度可以表示为 O(mn)。

您可以将您的问题分为两个阶段： 1\. 按频率对 Y 中的唯一元素进行排序 2\. 查找此列表中存在于 X 中的第一项

因为这听起来像是一个家庭作业问题，所以我会让你想想你可以多快完成这些单独的步骤。这些成本的总和将为您提供算法的总体成本。有许多方法会比您当前拥有的两个列表长度的乘积便宜。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-24T13:29:50.710

对 X 和 Y 进行排序。然后进行归并排序。每次遇到 X 中的相同元素时，计算 Y 的频率。

所以复杂度，O(nlogn) + O(mlogm) + O(m+n) = O(klogk) 其中 n,m = X, Y 的长度；k = 最大值(m,n)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-23T21:13:08.760

可以做一个快速排序，然后用一个变量来遍历它，该变量计算一行中有多少个数字+那个数字是多少。那应该给你nlogn********

# python-3.x - 如何从类方法中的导入模块调用函数？

> ID：15592092
> 
> 赞同：1
> 
> 时间：2013-03-23T21:09:45.723
> 
> 标签：python-3.x, tkinter, subprocess, class-method

我正在尝试用 tkinter 制作一个小型 GUI 程序。我需要使用 Python 的

```
subprocess.call() 
```

当我尝试在类方法中这样做时，出现以下错误：

```
 self.return_code = self.subprocess.call("echo Hello World", shell=True)
AttributeError: 'App' object has no attribute 'subprocess' 
```

这是我的程序的一部分：

```
from tkinter import *
from subprocess import call

class App:
    def __init__(self, mainframe):
        self.mainframe = ttk.Frame(root, padding="10 10 12 12", relief=GROOVE) 
        self.mainframe.grid(column=0, row=1, sticky=(N, W, E, S))

        self.proceedButton = ttk.Button(self.mainframe, text="Proceed", command=self.proceed)
        self.proceedButton.grid(column=0, row=9, sticky=(W))

    def proceed(self):
        self.proceedButton.config(state=DISABLED)
        self.return_code = self.subprocess.call("echo Hello World", shell=True) 
```

继续函数中的最后一行会引发错误。

我正在学习 Python。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:35:30.393

尝试`subprocess.call`代替`self.subprocess.call`：

```
import subprocess
self.return_code = subprocess.call("echo Hello World", shell=True) 
```

`self`是 的一个实例`App`。`subprocess`是一个模块。要了解`self.subprocess`错误的原因，请阅读 Python 类教程中的“[随机备注](http://docs.python.org/2/tutorial/classes.html#random-remarks)”。然后阅读模块，以及[如何调用模块的函数](http://docs.python.org/2/tutorial/modules.html#modules)。

# post - 用于在 Google 电子表格中保存 URL 的书签

> ID：15592094
> 
> 赞同：6
> 
> 时间：2013-03-23T21:10:00.827
> 
> 标签：post, google-apps-script, bookmarklet

我想创建一个简单的书签，它获取当前网页“location.ref”的 URL 并将其保存在 Google 电子表格中。保存后，我想留在当前网页上。

我知道写谷歌电子表格的唯一方法是使用谷歌应用脚​​本。所以我写了一个简单的脚本来做到这一点：

```
function doGet(request) {
  var ss = SpreadsheetApp.openByUrl( "https://docs.google.com/spreadsheet/ccc?key=<MY-SPREADSHEET-ID>");

 var sheet = ss.getSheets()[0];
 var headers = ["Timestamp", "url"];

 var nextRow = sheet.getLastRow(); 
 var cell = sheet.getRange('a1');
 var col = 0;
 for (i in headers){
    if (headers[i] == "Timestamp"){
       val = new Date();
    } else {
       val = request.parameter[headers[i]]; 
    }
    cell.offset(nextRow, col).setValue(val);
    col++;
 }

   return ContentService.createTextOutput(request.parameter.url)
   .setMimeType(ContentService.MimeType.TEXT);
} 
```

我将其发布为 webapp。我写了书签：

```
<a href="javascript:(

   function(){ 
     alert(window.open('https://script.google.com/macros/s/<MYWEBAPP>/exec?url='+encodeURIComponent(location.href), '_self')); 

   }

  )();"> 

BOOKMARK

</a> 
```

到目前为止，一切都很好。当我单击小书签时，它实际上可以工作，它会抓取当前网页的 URL 并将其保存在我的电子表格中。但是随后，Web 应用程序返回了一个文本响应，并且小书签显示了导致我离开当前网站的文本。

有没有办法忽略响应？GAS webapp 脚本要求我使用必须返回某些内容的 doGet()。有没有办法不从 GAS 脚本返回任何内容？或者，有没有办法我可以使用其他调用来替换 window.open 来调用允许我将响应存储在变量中并忽略它的 webapp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-08-05T03:40:14.710

我知道已经一年多了，但我正试图做到这一点。我花了一段时间才弄清楚，但这有效。让脚本完成加载需要 1 秒的延迟。

```
javascript:(function(){
my_window=window.open('https://script.google.com/macros/s/<MYWEBAPP>/exec?url='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title));
(window.setTimeout(function(){my_window.close();},1000));
void(0);
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T13:53:45.817

您可以考虑使用 XMLHttpRequest 发送 HTTP GET 请求，而不是使用 window.open。

请参阅[此处](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest)了解其用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-27T13:39:21.233

更改`_self`为其他内容，例如`bookmarker`，它将在新窗口或选项卡中打开。如果您在许多页面上使用它，如果它保持相同的名称，它们都将重用相同的选项卡。

# python - Ghostscript 找不到 Ghostscript 库 (libgs)

> ID：15592108
> 
> 赞同：0
> 
> 时间：2013-03-23T21:11:09.027
> 
> 标签：python, ghostscript

我在 macbookpro 10.6.8 上，尝试使用 ghostscript 时收到此错误消息：

```
Traceback (most recent call last):
  File "/Users/arnoutaertgeerts/Documents/Eclips/SlideTalk 2.0/slidetalk.py", line 13, in <module>
    import ghostscript
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ghostscript-0.4.1-py2.7.egg/ghostscript/__init__.py", line 33, in <module>
    import _gsprint as gs
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ghostscript-0.4.1-py2.7.egg/ghostscript/_gsprint.py", line 290, in <module>
    raise RuntimeError('Can not find Ghostscript library (libgs)')
RuntimeError: Can not find Ghostscript library (libgs) 
```

安装包：

```
pip install ghostscript 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:37:48.537

您如何尝试“使用” Ghostscript ？这似乎是 Python 的一个错误，它找不到 libgs（恐怕我不会说 Python）

我不确定 libgs 是否包含在 Mac 安装中，但如果包含，那么 libgs 应该位于 Ghostscript 文件夹中。你有没有检查它是否存在？

如果是，那么最可能的问题是它不在搜索路径中，但我不知道如何在 Mac 上解决搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:05:40.000

ctypes.find_library 在 /urs/local/lib 中搜索。

我将此路径添加到我的 ghostscript 模块：

```
/opt/local/lib/libgs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-27T09:56:16.640

我在文件“_gsprint.py”中更改了libgs的路径，它可以工作了~

而不是 libgs.so (libgs = cdll.LoadLibrary("libgs.so")，我使用 libgs = cdll.LoadLibrary("Corresponding_Path_in_my_laptop/libgs.dylib")。

ps：我的Mac上没有libgs.so，只有一个libgs.dylib文件。

感谢@KenS 和@arnoutaertgeerts！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-03T11:29:27.680

对于使用 M1 mac 的新用户，ghostscript 可能会显示缺少 libgs 文件错误，并且该文件将在`usr/local/lib`

可以按照相同的顺序执行以下步骤来解决此问题：

*   `brew install ghostscript`
*   `conda install ghostscript`，它从 conda-forge 安装基于 arm_64 的库
*   如果 conda 抛出通道错误，请尝试使用`conda install -c conda-forge ghostscript`
*   `pip install ghostscript`

笔记：

1.  libgs.dylib 文件可以在 ghostscript 的 home brew 安装中找到
2.  更改地址`_gsprint.py`会引发错误，因为 brew 安装的版本将基于 arm_64 而 pip 安装的版本将基于 OS_X86
3.  除非运行 pip install，否则 Python 无法识别 conda install 中的 ghostscript 模块，因此这是必不可少的步骤

# java - 加工。即使数组内容发生了变化，使用 draw() 方法绘制的内容也不会改变

> ID：15592109
> 
> 赞同：0
> 
> 时间：2013-03-23T21:11:10.160
> 
> 标签：java, processing

**常数**

```
public final int DIMENSIONS = 4;
public final int MOVE_RIGHT = 1;
public final int MOVE_LEFT = 2;
public final int MOVE_UP = 3;
public final int MOVE_DOWN = 4; 
```

**主要的**

```
PuzzleFrame board;

void setup(){
  size(401,401);
  board = new PuzzleFrame();
  background(100);
}

void draw(){
  background(100);
  board.draw();
}

void keyPressed()
{
  if(key == CODED)
  {
    if(keyCode == RIGHT) board.moveTile(MOVE_RIGHT);
    if(keyCode == LEFT) board.moveTile(MOVE_LEFT);
    if(keyCode == UP) board.moveTile(MOVE_UP);
    if(keyCode == DOWN) board.moveTile(MOVE_DOWN);
  }
} 
```

**创建拼图框架的类**

```
class PuzzleFrame{
  private Tile[][] puzzleFrame;
  private Tile[][] solvedPuzzleFrame;

  public PuzzleFrame()
  {
    puzzleFrame = new Tile[DIMENSIONS][DIMENSIONS];
    solvedPuzzleFrame = new Tile[DIMENSIONS][DIMENSIONS];
    int tileNumber = 1;
    for(int i = 0; i < DIMENSIONS; i++)
    {
      for(int j = 0; j < DIMENSIONS; j++)
      {
        puzzleFrame[i][j] = new Tile(tileNumber, j*100, i*100);
        solvedPuzzleFrame[i][j] = new Tile(tileNumber, j*100, i*100);
        tileNumber++;
      }
    }
  }

  public void draw()
  {
    for(int i = 0; i < DIMENSIONS; i++)
    {
      for(int j = 0; j < DIMENSIONS; j++)
      {
        puzzleFrame[i][j].draw();
      }
    }
  }

  public void moveTile(int side)
  {
    if(isMoveAllowed(side))
    {
      switch(side)
      {
        case MOVE_RIGHT:
        {
          for(int i = 0; i < DIMENSIONS; i++)
          {
            for(int j = 0; j < DIMENSIONS; j++)
            {
              if(puzzleFrame[i][j].getTileNumber() == DIMENSIONS*DIMENSIONS)
              {
                Tile tempTile = puzzleFrame[i][j];
                puzzleFrame[i][j] = puzzleFrame[i][j-1];
                puzzleFrame[i][j-1] = tempTile;
                System.out.println("right");
                break;
              }
            }
          }
          break;          
        }
      }
    }
  }

  private boolean isMoveAllowed(int side)
  {
    switch(side)
    {
      case MOVE_RIGHT:
      {
        for(int i = 0; i < DIMENSIONS; i++)
        {
          for(int j = 0; j < DIMENSIONS; j++)
          {
            if(puzzleFrame[i][j].getTileNumber() == DIMENSIONS*DIMENSIONS)
            {
              if(j > 0) return true;
            }
          }
        }
        break;
      }
    }
    return false;
  }

} 
```

**用于创建拼图框架的 tile 类**

```
class Tile{

  private final int mTileNumber;
  private final int width = 100;
  private final int height = 100;
  private String number = "";
  private int xpos;
  private int ypos;
  private int xOffSet;
  private int yOffSet;

  public Tile(int tileNumber, int xpos, int ypos)
  {
    mTileNumber = tileNumber;
    number += tileNumber;
    textSize(64);
    this.xpos = xpos; this.ypos = ypos;
    xOffSet = 30;
    yOffSet = 70;
    if(mTileNumber >= 10)
    {
      xOffSet = 10;
    }
  }

  public void draw()
  {
    if(mTileNumber == DIMENSIONS*DIMENSIONS)
    {
    }
    else
    {
      strokeWeight(2);
      fill(255);
      rect(xpos, ypos, width, height);
      fill(0);
      text(number, xpos+xOffSet, ypos+yOffSet);
    }
  }

  public int getTileNumber()
  {
    return mTileNumber;
  }
} 
```

我正在尝试制作 15 个益智游戏，但我遇到的问题是，当我按下箭头键 RIGHT 时，puzzleFrame 数组的内容会发生变化（我通过调试器在 Eclipse 中检查了它）但在处理绘制的图像时保持不变。现在我的代码只包含一个允许向右滑动图块的函数。老实说，我不明白为什么即使数组的内容发生了变化，图像仍然保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:26:45.227

我知道这并不能回答您的问题，但是您如何在分配期间避免 Tile 类中的编译器错误： mTileNumber = tileNumber 您将 mTileNumber 声明为最终变量，因此您不应该将其重新分配给任何东西。

# django - 模型错误帐户对象没有属性“事务”

> ID：15592114
> 
> 赞同：0
> 
> 时间：2013-03-23T21:11:29.997
> 
> 标签：django, django-models

这是我的理解，这应该工作......

```
 def _balance(self):
        aggregates = self.transactions.aggregate(sum=Sum('amount'))
        sum = aggregates['sum']
        return D('0') if sum is None else sum 
```

但我收到以下错误：**“帐户”对象没有属性“交易”**

我在模型事务上设置了相关名称事务。在下面查看我的模型

```
class Account(models.Model):
    OPEN, FROZEN, CLOSED = 'Open', 'Frozen', 'Closed'
    status = models.CharField(max_length=32, default=OPEN)
    # For performance, we keep a cached balance
    balance = models.DecimalField(decimal_places=5, max_digits=10,
                                  default=D('0'), null=True)
    #FK
    user = models.OneToOneField(User)

    def _balance(self):
            aggregates = self.transactions.aggregate(sum=Sum('amount'))
            sum = aggregates['sum']
            return D('0') if sum is None else sum

class Transaction(models.Model):
    account = models.ForeignKey('Account',
                                related_name='transactions') 
```

知道为什么我的模型功能不起作用吗？

谢谢你。

# angularjs - 电子邮件表单验证一次

> ID：15592117
> 
> 赞同：7
> 
> 时间：2013-03-23T21:11:42.473
> 
> 标签：angularjs, angularjs-directive

我正在尝试为电子邮件字段实施表单验证。验证应执行以下操作：

*   检查是否已通过必需属性输入了电子邮件，如果未输入电子邮件，则显示一条消息
*   检查电子邮件是否具有有效的格式（似乎是在没有指定属性的情况下自动完成的）并在格式错误时显示消息
*   通过 $http.get 调用检查电子邮件是否是唯一的，并显示一条消息，以防找到电子邮件并因此无法使用

我希望出现第一条消息，如果该字段为空，如果电子邮件无效，则出现第二条消息，如果找到电子邮件地址，则出现第三条消息，因此一次不是唯一的。

如果我仅尝试使用“必需”属性，则此方法有效，但是一旦我添加了电子邮件可用指令属性，它就不再检查电子邮件的格式，并且电子邮件可用指令与必需属性一起执行。两条消息都会弹出，但我只希望用户一次看到一条消息。

我正在使用 angularjs 1.1.3。

有人可以告诉我我可能做错了什么吗？

**HTML**

```
<div id="user_mod" class="mod_form" ng-show="userModScreenIsVisible">
<form name="mod_user" novalidate>
    <input type="email" name="email" ng-model="user.email" placeholder="E-Mail" required email-available/>
    <div class="user-help" ng-show="mod_user.email.$dirty && mod_user.email.$invalid">Invalid:
        <span ng-show="mod_user.email.$error.required">Please enter your email.</span>
        <span ng-show="mod_user.email.$error.email">This is not a valid email.</span>
        <span ng-show="mod_user.email.$error.emailAvailable">This email address is already taken.</span>
    </div>
</form> 
```

**指示**

```
directive('emailAvailable', function($http) { // available
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                ctrl.$setValidity('emailAvailable', false);
                if(viewValue !== "" && typeof viewValue !== "undefined") {
                    console.log("variable is defined");

                    $http.get('/api/user/email/' + viewValue + '/available')
                        .success(function(data, status, headers, config) {
                            console.log(status);
                            ctrl.$setValidity('emailAvailable', true);
                            return viewValue;
                        })
                        .error(function(data, status, headers, config) {
                            console.log("error");
                            ctrl.$setValidity('emailAvailable', false);
                            return undefined;
                        });
                } else {
                    console.log("variable is undefined");
                    ctrl.setValidity('emailAvailable', false);
                    return undefined;
                }
            });
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T01:52:23.037

我看到您已经解决了自己的问题，但我想我可以在这里为您提供一些提示/建议（我希望）：

1) 你需要做的就是确保你的验证器是在内置的角度验证器运行*之后*运行的，而不是它。`push()``ctrl.$parsers``unshift()`

2) 阻止您的验证器运行，因为之前运行的验证器显示它无效（即，如果您不想在该字段已经无效的情况下进行 Ajax 调用）。你只需要在你的验证器中签`ctrl.$invalid`入一个语句。`if`

3）您需要`$setValidity()`在开始您的ajax调用之前和收到它之后单独调用来使您的表单无效。这样，在 AJAX 返回并说明它是否有效之前，您的表单是无效的。

4) 这可能是次要的，但除非您也添加 a，否则`ctrl.$formatter`最初分配给 $scope 中对象的值在写入屏幕之前不会被验证。如果您的表单是通过路由、ng-repeat 或 ng-include 动态添加到屏幕并预先填充了数据，这可能是一个问题。通常所有的验证器都应该有一个 $parser 组件（视图 -> 模型）和一个 $formatter 组件（模型 -> 视图）。

5) 一个警告。如果该值无效，大多数验证器都会从模型中完全删除该值。因为您正在进行异步调用，所以您必须立即在解析器函数中返回 viewValue。通常，如果字段无效，解析器函数将返回`undefined`，从而防止无效数据出现在您的模型中。

6) 由于验证器在 $error 对象中维护了一个状态，因此您需要在最初命中此异步验证器时将其清除。见下文。

7）旁注：在你的回答中，我注意到你在你的ajax响应处理程序中返回值......这不会为你做任何事情。因为调用是异步的，所以您实际上总是从该解析器返回 undefined。它会更新您的模型吗？如果确实如此，我会感到惊讶。

以下是我如何更改您的原始指令以使其按您可能希望的方式工作：

```
app.directive('emailAvailable', function($http, $timeout) { // available
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
          console.log(ctrl);
            // push the validator on so it runs last.
            ctrl.$parsers.push(function(viewValue) {
                // set it to true here, otherwise it will not 
                // clear out when previous validators fail.
                ctrl.$setValidity('emailAvailable', true);
                if(ctrl.$valid) {
                  // set it to false here, because if we need to check 
                  // the validity of the email, it's invalid until the 
                  // AJAX responds.
                  ctrl.$setValidity('checkingEmail', false);

                  // now do your thing, chicken wing.
                  if(viewValue !== "" && typeof viewValue !== "undefined") {
                      $http.get('/api/user/email/' + viewValue + '/available')
                          .success(function(data, status, headers, config) {
                              ctrl.$setValidity('emailAvailable', true);
                              ctrl.$setValidity('checkingEmail', true);
                          })
                          .error(function(data, status, headers, config) {
                              ctrl.$setValidity('emailAvailable', false);
                              ctrl.$setValidity('checkingEmail', true);
                          });
                  } else {
                      ctrl.$setValidity('emailAvailable', false);
                      ctrl.$setValidity('checkingEmail', true);
                  }
                }
                return viewValue;
            });

        }
    };
}); 
```

[而且...当然，这是一个证明这一切的笨蛋](http://plnkr.co/edit/6r7y0R441ffhGkqqOZ6P?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:50:40.887

我已经通过删除必需的属性并添加第二个名为 email-valid 的指令来解决它。我还删除了 emailAvailable 指令的 else 子句中的 setValidity 方法。

**HTML**

```
<form name="mod_user" novalidate>
    <input type="email" name="email" ng-model="user.email" placeholder="E-Mail" email-valid email-available/>
    <div class="user-help" ng-show="mod_user.email.$dirty && mod_user.email.$invalid">Invalid:
        <span ng-show="mod_user.email.$error.emailValid">Please enter a valid email address.</span>
        <span ng-show="mod_user.email.$error.emailAvailable">This email address is already taken.</span>
    </div>
    <br/>
    <button class="button" ng-click="hideUserModScreen()">Close</button>
    <button class="button" ng-click="updateUserDetails()" ng-disabled="mod_user.$invalid" ng-show="updateUserDetailsButtonIsVisible">Update</button>
    <button class="button" ng-click="saveUserDetails()" ng-disabled="mod_user.$invalid" ng-show="saveUserDetailsButtonIsVisible">Save</button>
</form> 
```

**指令**

```
angular.module('myApp.directives', []).
directive('appVersion', ['version', function (version) {
    return function (scope, elm, attrs) {
        elm.text(version);
    };
}]).

directive('emailAvailable', function($http) { // available
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                if(viewValue && viewValue.match(/[a-z0-9\-_]+@[a-z0-9\-_]+\.[a-z0-9\-_]{2,}/)) {
                    console.log("variable is defined");

                    $http.get('/api/user/email/' + viewValue + '/available')
                        .success(function(data, status, headers, config) {
                            console.log(status);
                            ctrl.$setValidity('emailAvailable', true);
                            return viewValue;
                        })
                        .error(function(data, status, headers, config) {
                            console.log("error");
                            ctrl.$setValidity('emailAvailable', false);
                            return undefined;
                        });
                } else {
                    console.log("variable is undefined");
                    return undefined;
                }
            });
        }
    };
}).

directive('emailValid', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                if (viewValue && viewValue.match(/[a-z0-9\-_]+@[a-z0-9\-_]+\.[a-z0-9\-_]{2,}/)) {
                    // it is valid
                    ctrl.$setValidity('emailValid', true);
                    return viewValue;
                } else {
                    // it is invalid, return undefined (no model update)
                    ctrl.$setValidity('emailValid', false);
                    return undefined;
                }
            });
        }
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T21:04:09.827

我通过添加超时来扩展 Ben Lesh 的答案，这样它就不会检查每次击键

```
app.directive "uniqueEmail", ($http, $timeout) ->
    restrict: "A" 
    require: "ngModel" 
    link: (scope, elem, attrs, ctrl) ->
        return unless ctrl 
        q = null
        ctrl.$parsers.push (viewValue) ->
            ctrl.$setValidity 'unique-email', true
            if ctrl.$valid
                if viewValue?
                    $timeout.cancel(q) if q?
                    q = $timeout (->
                        ctrl.$setValidity 'checking-unique-email', false
                        $http.get("#{endpoint}/emails/#{viewValue}/exists").success (exists) ->
                            ctrl.$setValidity 'checking-unique-email', true
                            ctrl.$setValidity 'unique-email', exists is 'false'
                        q = null
                        ) , attrs.checkDelay ? 1000

            viewValue 
```

# c# - RabbitMQ C# 捕获异常问题

> ID：15592118
> 
> 赞同：1
> 
> 时间：2013-03-23T21:11:52.460
> 
> 标签：c#, .net, rabbitmq, amqp

我有一个简单的 C# 应用程序，它每秒向我的 RabbitMQ 交换发送一条消息。当我的互联网连接断开时，应用程序会崩溃。所以我添加了一个 Try/Catch 语句，现在它不再崩溃了。但是，当连接恢复时，它将不再发送数据。我必须关闭应用程序，然后重新打开它。我这样做正确吗？

```
 private void rabbitmqxmit()
    {
        try
        {
            while (rmqtxrun == true)
            {

                ConnectionFactory factory = new ConnectionFactory();
                factory.HostName = textBox3.Text;
                using (IConnection connection = factory.CreateConnection())
                using (IModel channel = connection.CreateModel())
                {

                    button1.BackColor = Color.Green;

                    string message = textBox1.Text;
                    byte[] body = System.Text.Encoding.UTF8.GetBytes(message);

                    channel.BasicPublish(textboxExchange.Text, textboxKey.Text, null, body);

                    txtboxTransmitting.Text = message;
                    button1.BackColor = Color.Gray;

                    Thread.Sleep(Convert.ToInt32(textBox4.Text));

                }

            }
        }
        catch {}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:36:41.223

When the exception happens you're effectively exiting your loop. In order to get what you want to do you need to move your try/catch inside the while loop.

However, it'd be cleaner if you found a way to test the connection rather than expecting an exception. By simply taking any exception and dumping you're losing the ability to see other things potentially going wrong. Bare minimum I'd attempt to catch ONLY that exception that you expect to happen and log it someplace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:17:15.387

您可能必须重新初始化通道 - 尝试一下。由于 using 子句，连接和通道将被很好地处理掉。如果 ConnectionFactory 也实现了 IDisposable，那么也可以在 using 子句中创建它。

此外，捕获所有异常而不对它们做任何事情是一种非常糟糕的方法。更好的方法是只捕获连接异常。

# jquery-select2 - Select2 - 带触发器的无限循环（'change'）

> ID：15592122
> 
> 赞同：0
> 
> 时间：2013-03-23T21:12:11.367
> 
> 标签：jquery-select2

这是我的情况：

```
$('select').select2();

$('select').on('change', function () {
    // calling a function
    myFunction();
});

function myFunction() {
    // changes my select values
    // so I need to update the select for seing the news values
    $('select').trigger('change');

    // hehe I fire the change event so myFunction is called again and again
} 
```

我能做些什么来避免这种行为？问候...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:25:03.460

这是 Select2 中的错误。我对以下代码有同样的问题：

```
var FID = $(location).attr('href').split("/")[5];
$('#facility').children().each(function () {
    if ($(this).val().trim() == FID.trim()) {
        $(this).attr('selected', 'selected').trigger('change');
    }
}); 
```

以下内容并不理想，但确实可以解决问题。请注意，您*将*需要重新定义您的 Select2 选项（如图所示）。

```
var FID = $(location).attr('href').split("/")[5];
$('#facility').children().each(function () {
    if ($(this).val().trim() == FID.trim()) {
        $(this).attr('selected', 'selected');
        $('#facility').select2({
            placeholder: "",
            minimumResultsForSearch: -1
        });
    }
}); 
```

# jquery - jQuery Datepicker 不起作用

> ID：15592123
> 
> 赞同：0
> 
> 时间：2013-03-23T21:12:22.987
> 
> 标签：jquery, html, jquery-ui-datepicker

我正在尝试使用 jQuery datepicker 工具，但它不起作用。我是 jQuery 新手，所以我不太了解它。有人能发现我哪里出错了吗？我在标题中的链接是否正确？

html:

```
<html>
    <head>  
        <title>CodeProject</title>
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
        <script type='text/javascript' src='javascript.js'></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
    </head>
<body><h2>Date Picker</h2>
        <p>I will be making a simple date picker tool using jQuery. You have have seen it in some</br> travel websites where when you move your cursor on a date field, you see a little pop-up which allows you to pick a date.</p></br>
        <p>Departure date:<input type="text" id="departure"></p>
        <p>Returning date:<input type="text" id="returning"></p>
        <button>Submit</button>
</body> 
```

jQuery 文件：

```
$(document).ready(function() {
$("#departure").datepicker();
$("#returning").datepicker();
}); 
```

CSS 文件：

```
 #header {
    background-color: white; /**#212121**/
    margin-bottom: 0px;
    margin-left: 0;
    margin-top: 0px;
    z-index: 1px;
    width: 99.2%;
    border-bottom: 2px solid #212121;

}

h1 {
    text-align: left;
    font-family: times, Times New Roman, times-roman, georgia, serif;
    color: #444;
    padding: 0px 0px 6px 0px;
    font-size: 51px;
    line-height: 44px;
    letter-spacing: -2px;
    font-weight: bold;
    padding-left: 10px;
}

span {
    color: #7EAEDE;
    font-size: 20px;
    letter-spacing: 4px;

}

h2 {
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size:30px;
    margin-top: 0px; margin-bottom: 10px;
    text-align: left;
    font-weight: normal;
    color: #222;
}

h4 {
    font-family: "Lucida Grande", Tahoma;
    font-size: 10px;
    font-weight: lighter;
    font-variant: normal;
    text-transform: uppercase;
    color: #666666;
    margin-top: 10px;
    text-align: left!important;
    letter-spacing: 0.3em;
    margin-left: 2px;
}

#p1 {
    font-family:  'Hoefler Text', Georgia, 'Times New Roman', serif;
    font-weight: normal;
    font-size: 1.75em;
    letter-spacing: .2em;
    line-height: 1.1em;
    margin:0px;
    text-align: center;
    text-transform: uppercase;
    color: #1BA8E0;
}

body {
    background-color: grey;
    margin: 0; /**body has margin by default so we 0 to get rid of it **/
}

#wrapper {
    width:700px; /**Get everything in the wrapper to be within this width of 700px**/
    margin: 0 auto; /**centre everything**/
    background-color: white;
    margin-top: 0px;
    border: 2px solid #444;
    border-top: 0px;
}

.border { /**Separated by a dotted line**/
    border-bottom: 1px dotted black;    
    border-top: 1px dotted black;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:21:12.313

您正在调用要从中执行操作的 JS 文件

```
<script type='text/javascript' src='javascript.js'></script> 
```

在您调用 jQuery 和 jQueryUI 组件之前。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

在此处更改您的操作顺序并放在`javascript.js`这两个文件之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:22:57.990

尝试执行您在`http:`此处错过的操作：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

标记：

```
<html>
        <head>  
            <title>CodeProject</title>
            <link rel="stylesheet" type="text/css" href="stylesheet.css">
            <script type='text/javascript' src='javascript.js'></script>
            <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
            <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
        </head>
    <body><h2>Date Picker</h2>
            <p>I will be making a simple date picker tool using jQuery. You have have seen it in some</br> travel websites where when you move your cursor on a date field, you see a little pop-up which allows you to pick a date.</p></br>
            <p>Departure date:<input type="text" id="departure"></p>
            <p>Returning date:<input type="text" id="returning"></p>
            <button>Submit</button>
    </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:52:46.350

这是您请求的信息，请注意顺序，这是直接从日期选择器的[JQuery API 页面](http://api.jqueryui.com/datepicker/)获取的，因此您应该遵循它：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

我发现如果您忘记包含它们的 .css 文件，JQuery 插件往往无法工作。由于您已经参考了该文件的在线版本，因此我只是为您提供了该参考。如果这仍然对您不起作用，请确保通过直接浏览这些链接来访问这些文件没有问题。

如果它继续失败，请在加载页面时观察您的控制台并检查是否有任何错误。这总是一个开始弄清楚事情的好地方。

# c - C 和 OpenMP：指向共享只读数据的指针会减慢执行速度

> ID：15592124
> 
> 赞同：1
> 
> 时间：2013-03-23T21:12:24.000
> 
> 标签：c, parallel-processing, openmp

这是我的情况，我有一个指向一些数据数组的指针数组......让我们说：

```
 Data** array = malloc ( 100 * sizeof(Data*));
    for(i = 0; i < 100; i++) array[i] = malloc (20 * sizeof(Data); 
```

在并行区域内，我进行了一些使用该数据的操作。例如：

```
 #pragma omp parallel num_threads(4) firstprivate(array)
    {
         function(array[0], array[omp_get_thread_num()];
    } 
```

第一个参数是只读的，但在所有线程中都是相同的......

问题是如果我使用不同的数据块作为第一个参数，即：array[omp_get_thread_num()+1]，每个函数持续 1seg。但是当我使用相同的数据块数组 [0] 时，*每个*函数调用持续 4 段。

我的理论是，没有办法知道数组 [0] 是否会被函数更改，所以每个线程都要求一个副本并使其他线程拥有的副本无效，这应该解释延迟......

我试图像这样制作 array[0] 的本地副本：

```
 #pragma omp parallel num_threads(4) firstprivate(array)
    {
        Data* tempData = malloc(20 * sizeof(Data));
        memcpy(tempData,array[0], 20*sizeof(Data));

        function(tempData, array[omp_get_thread_num()];
    } 
```

但我得到了相同的结果......就像线程没有“释放”数据块，所以其他线程可以使用它......

我必须注意，第一个参数并不总是 array[0] 所以我不能在 pragma 行中使用 firstprivate(array[0]) ...

问题是：

*   难道我做错了什么？
*   有没有办法“释放”一个共享的内存块，以便其他线程可以使用它？

试图让我理解非常困难，所以如果您需要更多信息，请告诉我！

在此先感谢...哈维尔

编辑：我无法更改函数声明，因为它位于库中！(ACML)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:56:39.250

我认为您的分析是正确的，编译器无法知道指向的数组在他背后没有改变。实际上他知道它们可能会改变，因为线程也`0`接收相同`array[0]`的可修改参数。

所以他必须经常重新加载这些值。首先，您应该声明您的函数，例如

```
void function(Data const*restrict A, Data*restrict B); 
```

这首先告诉编译器，其中的值`A`不能更改，然后没有一个指针可以被另一个（或任何其他指针）别名，因此他知道数组中的值将仅由函数本身更改。

对于线程号`0`，上面的断言不正确，数组`A`实际上`B`是相同的。因此，您最好在进入*之前*`array[0]`复制到一个 common ，并将其作为第一个参数传递给每个线程：`temparray` *`#pragma omp parallel``temparray`*

 *```
Data const* tempData = memcpy(malloc(20 * sizeof(Data)), array[0], 20*sizeof(Data));

#pragma omp parallel num_threads(4)
function(tempData, array[omp_get_thread_num()]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T09:39:30.433

我认为你的分析是错误的。如果数据没有改变，恕我直言，它不会在核心之间同步。放缓有两个可能的原因。

1.  核心 #0 得到`function(array[0], array[0])`. 你说第一个参数是只读的，但第二个不是。所以核心#0会改变数据，`array[0]`CPU必须一直在核心之间同步这些数据。

2.  第二个可能的原因是您的数组很小（20 个元素）。发生的情况是核心 #1 获得指向 20 元素数组的指针，核心 #2 获得指向数组的指针，这可能就在内存中的数组 #1 之后。因此，它们很有可能位于同一高速缓存行上。CPU 不会跟踪每个特定元素的变化——如果它发现同一缓存行上的元素发生了变化，它将在内核之间同步缓存。解决方案是使每个数组更大（这样在 20 个元素之后，您的未使用空间等于缓存大小（128K？256K？））

我猜你的代码中同时存在#1 和#2 问题。*

# html - 如何通过记事本在新创建的网页上添加图标？

> ID：15592133
> 
> 赞同：-1
> 
> 时间：2013-03-23T21:13:13.637
> 
> 标签：html, webpage, favicon

我通过记事本制作了一个网页。并且想要有一个“faveicon”但不能添加它。这是我的html的头部：

```
<link rel="shortcut icon" href="/favicon.ico"/> 
```

在标题部分之后，我在 head 中输入了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:14:53.253

只需在您的部分中添加以下内容`HEAD`，请记住更改`type`and `href`：

```
<link rel="icon" type="image/png" href="http://example.com/myicon.png"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T07:30:09.303

这对我有用..

```
 <link rel="shortcut icon" href="/images/specialicon.ico" type="image/x-icon" /> 
```

[只需检查此网址..它会对您有所帮助..](http://www.dwuser.com/education/content/quick-tip-adding-a-favicon-to-your-website/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:28:02.200

你可以制作一个 16x16 png 然后使用

```
<link rel="shortcut icon" href="/favicon.png" type="image/png">
<link rel="shortcut icon" type="image/png" href="http://www.example.com/favicon.png" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:15:02.117

如果您在网站的根文件夹中放置一个名为“favicon.ico”的网站图标，那么它将起作用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T11:01:17.150

通过将图像放在我的网页所在的同一文件夹中并编写此代码它可以工作:)

```
 <link rel="shortcut icon" href="h.ico"> 
```

# cpanel - sendgrid cpanel exim 失败

> ID：15592134
> 
> 赞同：3
> 
> 时间：2013-03-23T21:13:14.567
> 
> 标签：cpanel, exim

我在以下网站上按照说明进行操作

[http://sendgrid.com/docs/Integrate/Mail_Servers/exim.html](http://sendgrid.com/docs/Integrate/Mail_Servers/exim.html)

[http://knowledgelayer.softlayer.com/procedure/e-mail-delivery-service-server-side-configuration-centos-cpanel-exim](http://knowledgelayer.softlayer.com/procedure/e-mail-delivery-service-server-side-configuration-centos-cpanel-exim)

它似乎配置正确，但是当我尝试通过 php 脚本发送电子邮件时，我收到以下错误：

```
2013-03-23 17:09:48 cwd=/home/chrism/public_html 3 args: /usr/sbin/sendmail -t -i
2013-03-23 17:09:48 1UJVhE-0008SI-VG <= chrism@host.blastohosting.com U=chrism P=local S=389 T="Test" for blasto333@yahoo.com
2013-03-23 17:09:48 cwd=/var/spool/exim 3 args: /usr/sbin/exim -Mc 1UJVhE-0008SI-VG
2013-03-23 17:09:49 1UJVhE-0008SI-VG remote host address is the local host: yahoo.com
2013-03-23 17:09:49 1UJVhE-0008SI-VG == blasto333@yahoo.com R=send_via_sendgrid defer (-1): remote host address is the local host
2013-03-23 17:09:49 1UJVhE-0008SI-VG Frozen 
```

我正在尝试发送到@yahoo.com 地址，但由于某种原因它失败了。

挖yahoo.com

root@host [~]# dig -t mx yahoo.com

```
; <<>> DiG 9.3.6-P1-RedHat-9.3.6-20.P1.el5_8.6 <<>> -t mx yahoo.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 50122
;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 7, ADDITIONAL: 7

;; QUESTION SECTION:
;yahoo.com.         IN  MX

;; ANSWER SECTION:
yahoo.com.      576 IN  MX  1 mta5.am0.yahoodns.net.
yahoo.com.      576 IN  MX  1 mta6.am0.yahoodns.net.
yahoo.com.      576 IN  MX  1 mta7.am0.yahoodns.net.

;; AUTHORITY SECTION:
yahoo.com.      147199  IN  NS  ns4.yahoo.com.
yahoo.com.      147199  IN  NS  ns5.yahoo.com.
yahoo.com.      147199  IN  NS  ns6.yahoo.com.
yahoo.com.      147199  IN  NS  ns8.yahoo.com.
yahoo.com.      147199  IN  NS  ns1.yahoo.com.
yahoo.com.      147199  IN  NS  ns2.yahoo.com.
yahoo.com.      147199  IN  NS  ns3.yahoo.com.

;; ADDITIONAL SECTION:
ns1.yahoo.com.      8562    IN  A   68.180.131.16
ns2.yahoo.com.      8562    IN  A   68.142.255.16
ns3.yahoo.com.      147199  IN  A   98.138.222.11
ns4.yahoo.com.      8562    IN  A   68.142.196.63
ns5.yahoo.com.      8562    IN  A   119.160.247.124
ns6.yahoo.com.      8562    IN  A   202.43.223.170
ns8.yahoo.com.      8562    IN  A   202.165.104.22

;; Query time: 31 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Sun Mar 24 13:48:02 2013
;; MSG SIZE  rcvd: 344 
```

进出口命令：

```
root@host [~]# exim -d -bt blasto333@yahoo.com
Exim version 4.80 uid=0 gid=0 pid=13408 D=fbb95cfd
Berkeley DB: Sleepycat Software: Berkeley DB 4.3.29: (July 12, 2010)
Support for: crypteq iconv() IPv6 PAM Perl OpenSSL Content_Scanning DKIM Old_Demime Experimental_SPF Experimental_SRS
Lookups (built-in): lsearch wildlsearch nwildlsearch iplsearch dbm dbmjz dbmnz passwd
Authenticators: cram_md5 dovecot plaintext spa
Routers: accept dnslookup ipliteral manualroute queryprogram redirect
Transports: appendfile/maildir autoreply pipe smtp
Size of off_t: 8
Compiler: GCC [4.1.2 20080704 (Red Hat 4.1.2-52)]
Library version: OpenSSL: Compile: OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
                          Runtime: OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
Library version: PCRE: Compile: 8.12
                       Runtime: 8.12 2011-01-15
Total 9 lookups
WHITELIST_D_MACROS unset
TRUSTED_CONFIG_LIST: "/etc/exim_trusted_configs"
changed uid/gid: forcing real = effective
  uid=0 gid=0 pid=13408
  auxiliary group list: <none>
seeking password data for user "cpaneleximfilter": cache not available
getpwnam() succeeded uid=508 gid=505
seeking password data for user "root": cache not available
getpwnam() succeeded uid=0 gid=0
changed uid/gid: calling tls_validate_require_cipher
  uid=47 gid=12 pid=13409
  auxiliary group list: <none>
tls_require_ciphers expands to "ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP"
tls_validate_require_cipher child 13409 ended: status=0x0
configuration file is /etc/exim.conf
log selectors = 00001dfc 00293043
trusted user
admin user
seeking password data for user "mailnull": cache not available
getpwnam() succeeded uid=47 gid=47
originator: uid=0 gid=0 login=root name=root
sender address = root@host.blastohosting.com
Address testing: uid=0 gid=12 euid=0 egid=12
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Testing blasto333@yahoo.com
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Considering blasto333@yahoo.com
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
routing blasto333@yahoo.com
--------> send_via_sendgrid router <--------
local_part=blasto333 domain=yahoo.com
checking domains
search_open: lsearch "/etc/localdomains"
search_find: file="/etc/localdomains"
  key="yahoo.com" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/localdomains
  End
internal_search_find: file="/etc/localdomains"
  type=lsearch key="yahoo.com"
file lookup required for yahoo.com
  in /etc/localdomains
lookup failed
yahoo.com in "lsearch;/etc/localdomains"? no (end of list)
yahoo.com in "! +local_domains"? yes (end of list)
calling send_via_sendgrid router
send_via_sendgrid router called for blasto333@yahoo.com
  domain = yahoo.com
route_item = * smtp.sendgrid.net::587 byname
yahoo.com in "*"? yes (matched "*")
original list of hosts = "smtp.sendgrid.net::587" options = byname
expanded list of hosts = "smtp.sendgrid.net::587" options = byname
set transport sendgrid_smtp
finding IP address for smtp.sendgrid.net:587
host=smtp.sendgrid.net port=587
calling host_find_byname
gethostbyname2(af=inet6) returned 4 (NO_DATA)
local host found for non-MX address
fully qualified name = host.blastohosting.com
gethostbyname2 looked up these IP addresses:
  name=host.blastohosting.com address=67.222.16.43
LOG: MAIN
  remote host address is the local host: yahoo.com (while routing <blasto333@yahoo.com>)
send_via_sendgrid router: defer for blasto333@yahoo.com
  message: remote host address is the local host
blasto333@yahoo.com cannot be resolved at this time: remote host address is the local host
search_tidyup called
>>>>>>>>>>>>>>>> Exim pid=13408 terminating with rc=1 >>>>>>>>>>>>>>>> 
```

具有默认设置的 exim 命令：

```
root@host [~]# exim -d -bt blasto333@yahoo.com
Exim version 4.80 uid=0 gid=0 pid=13681 D=fbb95cfd
Berkeley DB: Sleepycat Software: Berkeley DB 4.3.29: (July 12, 2010)
Support for: crypteq iconv() IPv6 PAM Perl OpenSSL Content_Scanning DKIM Old_Demime Experimental_SPF Experimental_SRS
Lookups (built-in): lsearch wildlsearch nwildlsearch iplsearch dbm dbmjz dbmnz passwd
Authenticators: cram_md5 dovecot plaintext spa
Routers: accept dnslookup ipliteral manualroute queryprogram redirect
Transports: appendfile/maildir autoreply pipe smtp
Size of off_t: 8
Compiler: GCC [4.1.2 20080704 (Red Hat 4.1.2-52)]
Library version: OpenSSL: Compile: OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
                          Runtime: OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
Library version: PCRE: Compile: 8.12
                       Runtime: 8.12 2011-01-15
Total 9 lookups
WHITELIST_D_MACROS unset
TRUSTED_CONFIG_LIST: "/etc/exim_trusted_configs"
changed uid/gid: forcing real = effective
  uid=0 gid=0 pid=13681
  auxiliary group list: <none>
seeking password data for user "cpaneleximfilter": cache not available
getpwnam() succeeded uid=508 gid=505
seeking password data for user "root": cache not available
getpwnam() succeeded uid=0 gid=0
changed uid/gid: calling tls_validate_require_cipher
  uid=47 gid=12 pid=13682
  auxiliary group list: <none>
tls_require_ciphers expands to "ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP"
tls_validate_require_cipher child 13682 ended: status=0x0
configuration file is /etc/exim.conf
log selectors = 00001dfc 00293043
trusted user
admin user
seeking password data for user "mailnull": cache not available
getpwnam() succeeded uid=47 gid=47
originator: uid=0 gid=0 login=root name=root
sender address = root@host.blastohosting.com
Address testing: uid=0 gid=12 euid=0 egid=12
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Testing blasto333@yahoo.com
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
Considering blasto333@yahoo.com
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
routing blasto333@yahoo.com
--------> democheck router <--------
local_part=blasto333 domain=yahoo.com
checking require_files
file check: +/etc/demouids
expanded file: /etc/demouids
stat() yielded 0
checking "condition"
search_open: lsearch "/etc/demouids"
search_find: file="/etc/demouids"
  key="0" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/demouids
  End
internal_search_find: file="/etc/demouids"
  type=lsearch key="0"
file lookup required for 0
  in /etc/demouids
lookup failed
democheck router skipped: condition failure
--------> check_mail_permissions router <--------
local_part=blasto333 domain=yahoo.com
checking domains
search_open: lsearch "/etc/localdomains"
search_find: file="/etc/localdomains"
  key="yahoo.com" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/localdomains
  4/etc/demouids
  End
internal_search_find: file="/etc/localdomains"
  type=lsearch key="yahoo.com"
file lookup required for yahoo.com
  in /etc/localdomains
lookup failed
yahoo.com in "lsearch;/etc/localdomains"? no (end of list)
yahoo.com in "! +local_domains"? yes (end of list)
checking "condition"
Starting Perl interpreter
search_open: passwd "NULL"
search_find: file="NULL"
  key="nobody" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/localdomains
  4/etc/demouids
  End
internal_search_find: file="NULL"
  type=passwd key="nobody"
database lookup required for nobody
seeking password data for user "nobody": cache not available
getpwnam() succeeded uid=99 gid=99
lookup yielded: *:99:99:Nobody:/:/sbin/nologin
search_open: lsearch "/etc/domainusers"
search_find: file="/etc/domainusers"
  key="root" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/domainusers
  4/etc/localdomains
  4/etc/demouids
  End
internal_search_find: file="/etc/domainusers"
  type=lsearch key="root"
file lookup required for root
  in /etc/domainusers
lookup failed
search_open: lsearch "/etc/userdomains"
search_find: file="/etc/userdomains"
  key="" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/userdomains
  4/etc/domainusers
  4/etc/localdomains
  4/etc/demouids
  End
internal_search_find: file="/etc/userdomains"
  type=lsearch key=""
search_open: lsearch "/etc/userdomains"
  cached open
search_find: file="/etc/userdomains"
  key="host.blastohosting.com" partial=-1 affix=NULL starflags=0
LRU list:
  4/etc/userdomains
  4/etc/domainusers
  4/etc/localdomains
  4/etc/demouids
  End
internal_search_find: file="/etc/userdomains"
  type=lsearch key="host.blastohosting.com"
file lookup required for host.blastohosting.com
  in /etc/userdomains
lookup failed
check_mail_permissions router skipped: condition failure
--------> enforce_mail_permissions router <--------
local_part=blasto333 domain=yahoo.com
checking domains
cached no match for +local_domains
cached lookup data = NULL
yahoo.com in "! +local_domains"? yes (end of list)
checking "condition"
enforce_mail_permissions router skipped: condition failure
--------> increment_max_emails_per_hour_if_needed router <--------
local_part=blasto333 domain=yahoo.com
checking domains
cached no match for +local_domains
cached lookup data = NULL
yahoo.com in "! +local_domains"? yes (end of list)
checking "condition"
increment_max_emails_per_hour_if_needed router skipped: condition failure
--------> dkim_lookuphost router <--------
local_part=blasto333 domain=yahoo.com
checking domains
cached no match for +local_domains
cached lookup data = NULL
yahoo.com in "! +local_domains"? yes (end of list)
checking require_files
file check: +/var/cpanel/domain_keys/private/${sender_address_domain}
expanded file: /var/cpanel/domain_keys/private/host.blastohosting.com
stat() yielded -1
errno = 2
dkim_lookuphost router skipped: file check
--------> lookuphost router <--------
local_part=blasto333 domain=yahoo.com
checking domains
cached no match for +local_domains
cached lookup data = NULL
yahoo.com in "! +local_domains"? yes (end of list)
calling lookuphost router
lookuphost router called for blasto333@yahoo.com
  domain = yahoo.com
DNS lookup of yahoo.com (MX) succeeded
DNS lookup of mta5.am0.yahoodns.net (AAAA) gave NO_DATA
returning DNS_NODATA
DNS lookup of mta5.am0.yahoodns.net (A) succeeded
66.196.118.34 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.34 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.36 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.36 in "+loopback : 64.94.110.0/24"? no (end of list)
67.195.168.230 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
67.195.168.230 in "+loopback : 64.94.110.0/24"? no (end of list)
74.6.136.244 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
74.6.136.244 in "+loopback : 64.94.110.0/24"? no (end of list)
98.136.216.25 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.136.216.25 in "+loopback : 64.94.110.0/24"? no (end of list)
98.136.217.202 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.136.217.202 in "+loopback : 64.94.110.0/24"? no (end of list)
98.138.112.37 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.37 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.33 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.33 in "+loopback : 64.94.110.0/24"? no (end of list)
DNS lookup of mta6.am0.yahoodns.net (AAAA) gave NO_DATA
returning DNS_NODATA
DNS lookup of mta6.am0.yahoodns.net (A) succeeded
98.139.54.60 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.139.54.60 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.34 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.34 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.35 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.35 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.36 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.36 in "+loopback : 64.94.110.0/24"? no (end of list)
67.195.168.230 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
67.195.168.230 in "+loopback : 64.94.110.0/24"? no (end of list)
98.136.217.202 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.136.217.202 in "+loopback : 64.94.110.0/24"? no (end of list)
98.138.112.33 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.33 in "+loopback : 64.94.110.0/24"? no (end of list)
98.138.112.37 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.37 in "+loopback : 64.94.110.0/24"? no (end of list)
DNS lookup of mta7.am0.yahoodns.net (AAAA) gave NO_DATA
returning DNS_NODATA
DNS lookup of mta7.am0.yahoodns.net (A) succeeded
98.138.112.33 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.33 in "+loopback : 64.94.110.0/24"? no (end of list)
98.138.112.34 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.34 in "+loopback : 64.94.110.0/24"? no (end of list)
98.138.112.38 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
98.138.112.38 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.33 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.33 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.34 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.34 in "+loopback : 64.94.110.0/24"? no (end of list)
66.196.118.36 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
66.196.118.36 in "+loopback : 64.94.110.0/24"? no (end of list)
67.195.168.230 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
67.195.168.230 in "+loopback : 64.94.110.0/24"? no (end of list)
74.6.136.244 in "<; 127.0.0.0/8 ; 0.0.0.0 ; ::1 ; 0000:0000:0000:0000:0000:ffff:7f00:0000/8"? no (end of list)
74.6.136.244 in "+loopback : 64.94.110.0/24"? no (end of list)
duplicate IP address 66.196.118.33 (MX=1) removed
duplicate IP address 66.196.118.34 (MX=1) removed
duplicate IP address 66.196.118.34 (MX=1) removed
duplicate IP address 74.6.136.244 (MX=1) removed
duplicate IP address 98.138.112.37 (MX=1) removed
duplicate IP address 66.196.118.36 (MX=1) removed
duplicate IP address 66.196.118.36 (MX=1) removed
duplicate IP address 67.195.168.230 (MX=1) removed
duplicate IP address 67.195.168.230 (MX=1) removed
duplicate IP address 98.136.217.202 (MX=1) removed
duplicate IP address 98.138.112.33 (MX=1) removed
fully qualified name = yahoo.com
host_find_bydns yield = HOST_FOUND (2); returned hosts:
  mta5.am0.yahoodns.net 66.196.118.33 MX=1 
  mta5.am0.yahoodns.net 66.196.118.34 MX=1 
  mta5.am0.yahoodns.net 74.6.136.244 MX=1 
  mta5.am0.yahoodns.net 98.136.216.25 MX=1 
  mta5.am0.yahoodns.net 98.138.112.37 MX=1 
  mta5.am0.yahoodns.net 66.196.118.36 MX=1 
  mta5.am0.yahoodns.net 67.195.168.230 MX=1 
  mta5.am0.yahoodns.net 98.136.217.202 MX=1 
  mta6.am0.yahoodns.net 66.196.118.35 MX=1 
  mta6.am0.yahoodns.net 98.139.54.60 MX=1 
  mta6.am0.yahoodns.net 98.138.112.33 MX=1 
  mta7.am0.yahoodns.net 98.138.112.38 MX=1 
  mta7.am0.yahoodns.net 98.138.112.34 MX=1 
set transport remote_smtp
queued for remote_smtp transport: local_part = blasto333
domain = yahoo.com
  errors_to=NULL
  domain_data=NULL localpart_data=NULL
routed by lookuphost router
  envelope to: blasto333@yahoo.com
  transport: remote_smtp
  host mta5.am0.yahoodns.net [66.196.118.33] MX=1
  host mta5.am0.yahoodns.net [66.196.118.34] MX=1
  host mta5.am0.yahoodns.net [74.6.136.244] MX=1
  host mta5.am0.yahoodns.net [98.136.216.25] MX=1
  host mta5.am0.yahoodns.net [98.138.112.37] MX=1
  host mta5.am0.yahoodns.net [66.196.118.36] MX=1
  host mta5.am0.yahoodns.net [67.195.168.230] MX=1
  host mta5.am0.yahoodns.net [98.136.217.202] MX=1
  host mta6.am0.yahoodns.net [66.196.118.35] MX=1
  host mta6.am0.yahoodns.net [98.139.54.60] MX=1
  host mta6.am0.yahoodns.net [98.138.112.33] MX=1
  host mta7.am0.yahoodns.net [98.138.112.38] MX=1
  host mta7.am0.yahoodns.net [98.138.112.34] MX=1
blasto333@yahoo.com
  router = lookuphost, transport = remote_smtp
  host mta5.am0.yahoodns.net [66.196.118.33]  MX=1
  host mta5.am0.yahoodns.net [66.196.118.34]  MX=1
  host mta5.am0.yahoodns.net [74.6.136.244]   MX=1
  host mta5.am0.yahoodns.net [98.136.216.25]  MX=1
  host mta5.am0.yahoodns.net [98.138.112.37]  MX=1
  host mta5.am0.yahoodns.net [66.196.118.36]  MX=1
  host mta5.am0.yahoodns.net [67.195.168.230] MX=1
  host mta5.am0.yahoodns.net [98.136.217.202] MX=1
  host mta6.am0.yahoodns.net [66.196.118.35]  MX=1
  host mta6.am0.yahoodns.net [98.139.54.60]   MX=1
  host mta6.am0.yahoodns.net [98.138.112.33]  MX=1
  host mta7.am0.yahoodns.net [98.138.112.38]  MX=1
  host mta7.am0.yahoodns.net [98.138.112.34]  MX=1
search_tidyup called
>>>>>>>>>>>>>>>> Exim pid=13681 terminating with rc=0 >>>>>>>>>>>>>>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:06:39.837

检查您的 cPanel 电子邮件设置 - 我认为它位于***Mail*** >> ***MX 条目***部分 - 是否启用了“*本地邮件交换器*”？在这种情况下，我相信 sendmail 会尝试在本地发送电子邮件，但由于您的服务器不是 yahoo.com，它显然会失败。除非您有一些特殊要求，否则您可能应该将其设置为“*远程邮件交换器*”。

顺便说一句，如果您使用 Sendgrid 发送电子邮件并且要发送大量电子邮件，我建议您使用他们的 HTTP API - SMTP 是一个非常冗长的协议，当我从 SMTP 切换时，我的速度有了相当大的提升到 HTTP。

# r - 如何将 R Shiny 集成到当前应用程序中

> ID：15592144
> 
> 赞同：25
> 
> 时间：2013-03-23T21:14:32.550
> 
> 标签：r, shiny

我想知道是否可以将 R Shiny 集成到当前网站（PHP 或 RoR）中。我只是想利用 R Shiny 的力量来制作一个嵌入到当前网站的应用程序。但据我所知，Shiny 需要在自己的服务器而不是 Apache 上运行。是否可以在不使用 iframe 的情况下进行无缝集成？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T18:43:30.197

另一种方法是使用 iframe (HTML)，如下所述：[https ://groups.google.com/forum/?fromgroups=#!topic/shiny-discuss/2VwEWXYJwYs](https://groups.google.com/forum/?fromgroups=#!topic/shiny-discuss/2VwEWXYJwYs)

此处显示了一个示例：http: [//stla.overblog.com/reactive-3d-surface](http://stla.overblog.com/reactive-3d-surface)

希望这可以帮助

# c# - XNA 在项目中调用导入的 exe 文件

> ID：15592151
> 
> 赞同：1
> 
> 时间：2013-03-23T21:14:57.920
> 
> 标签：c#, xna

我希望在运行我自己的项目时调用另一个 exe。

```
string appRoot =Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

为此我得到这个路径：*C:\Users\Jeff TungMbp\Documents\Visual Studio 2010\Projects\menuSystemTutorial\menuSystemTutorial\ **menuSystemTutorial\bin\x86\Debug\xxxxx.exe***

这不是我想去的浴池。

我希望访问此路径：*C:\Users\Jeff TungMbp\Documents\Visual Studio 2010\Projects\menuSystemTutorial\menuSystemTutorial\ **menuSystemTutorial\xxxxxx.exe***

我不想做像**System.Process(@"C:\xxxxxxx")**这样的硬代码。

我希望访问路径的原因是因为我已将 .exe 文件导入到我的项目中，我希望访问的路径是 .exe 的确切位置。

有什么办法可以解决这个问题？或者，在将项目发布为安装文件后，还有其他方法可以将 .exe 文件附加到我的项目中吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:22:29.380

*好吧*，我不相信有一种方法可以在没有自定义情况的情况下直接指向您的`menuSystemTutorial\xxxxxx.exe`路径。

由于[`GetExecutingAssembly()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)方法获取包含**当前正在**执行的代码的程序集，并且 Visual Studio 在文件夹下创建您的程序 exe `bin\x86\Debug`，在我看来，没有办法做到这一点。

但是如果可以从原来的路径中得到你想要的路径，你可以使用[`string.Replace()`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)类似的方法；

```
string appRoot = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location).Replace(@"bin\x86\Debug\", ""); 
```

# c++ - 使用字符副本初始化 C++ 字符串？

> ID：15592155
> 
> 赞同：1
> 
> 时间：2013-03-23T21:15:25.113
> 
> 标签：c++, string

我正在学习 C++。我的教科书是，从控制结构到第 7 个对象从 C++ 开始。在字符串类解释中，有一段代码

```
string lineFull('z', 20); 
// Defines a string object named lineFill initialized with 10 'z' characters 
```

我在我的计算机上尝试了此代码，但不起作用。这段代码对吗？或对此的任何依赖/要求？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:17:29.717

看起来正确的语法是

```
string lineFull(20, 'z') 
```

来自[`std::string`构造函数文档](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:17:29.530

这个构造函数的原型是：

```
std::string::string(size_t n, char c); 
```

所以你需要：

```
string lineFull(20, 'z'); 
```

# twitter-bootstrap - Twitter Bootstrap 下拉菜单在任何浏览器中都不起作用

> ID：15592158
> 
> 赞同：4
> 
> 时间：2013-03-23T21:15:55.133
> 
> 标签：twitter-bootstrap, drop-down-menu

我正在尝试做一个下拉菜单，它似乎在 Jsfiddle 中工作。似乎正确加载了 javascript 和 css 文件：http: [//imgur.com/YYiJS4p](http://imgur.com/YYiJS4p)

但它在我的任何浏览器中都不起作用。我已经在 Firefox 19.0.2、Google Chrome 25.0.1364.172 和 Internet Explorer 9.0.2 中对其进行了测试。Javascript 已启用并正在运行。

Javascript 包含在 Bootstrap 之前，而 bootstrap-dropdown.js 是我包含的唯一引导文件，我的意思是我没有包含 bootstrap.js。

我的错误控制台中没有任何内容。

提前致谢。

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Bootstrap, from Twitter</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
              }
              .sidebar-nav {
                padding: 9px 0;
              }
        </style>
        <link href="./css/bootstrap-responsive.min.css" rel="stylesheet">
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!-- Fav and touch icons -->
        <link rel="shortcut icon" href="../assets/ico/favicon.ico">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
    </head>

    <body>
        <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">  
            <div class="container">  
                <ul class="nav">  
                    <a class="brand" href="#">w3resource</a>  
                    <li class="active"><a href="#">Home</a></li>  
                    <li><a href="#">Blog</a></li>  
                    <li><a href="#">About</a></li>  
                    <li><a href="#">Contact</a></li>  
                    <li class="dropdown" id="accountmenu">  
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Tutorials<b class="caret"></b></a>  
                        <ul class="dropdown-menu">  
                            <li><a href="#">PHP</a></li>  
                            <li><a href="#">MySQL</a></li>  
                            <li class="divider"></li>  
                            <li><a href="#">JavaScript</a></li>  
                            <li><a href="#">HTML5</a></li>  
                        </ul>  
                    </li>  
                </ul>  
            </div>  
        </div>  
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3">
                    <div class="well sidebar-nav">
                        <ul class="nav nav-list">
                            <li class="nav-header">Componentes</li>
                            <li>
                                <a href="#">Link</a>
                            </li>
                            <li>
                                <a href="#">Link</a>
                            </li>
                        </ul>
                    </div>
                    <!--/.well -->
                </div>
                <!--/span-->
                <div class="span9">
                    <div class="row-fluid">
                        <div class="span4">
                             <h2>Canvas</h2>
                             <canvas id="myCanvas">Tu explorador no soporta canvas.</canvas>
                            <script>

                            var c=document.getElementById("myCanvas");
                            var ctx=c.getContext("2d");
                            ctx.fillStyle="#AA0000";
                            ctx.fillRect(0,0,150,75);

                            </script>

                        </div>
                        <!--/span-->
                    <!--/row-->
                </div>
                <!--/span-->
            </div>
            <!--/row-->
        </div>
        <!--/.fluid-container-->

    <!-- Placed at the end of the document so the pages load faster -->
            <hr>
            <footer>
                <p>© Company 2013</p>
            </footer>
        <script src="./js/jquery-1.9.1.js"></script>
        <script src="./js/bootstrap-dropdown.js"></script>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T22:31:37.393

这就是我正在加载的内容：

```
 <script src="http://code.jquery.com/jquery.js"></script>
 <script src="bootstrap/js/bootstrap.js"></script> 
```

我尝试了您的代码，加载了我机器中的引导程序和站点中的 jquery。它在 FF、chrome 和 safari 中完美运行。我没有探险家来测试它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-07T15:25:08.650

我遇到了类似的问题，但发现我正在加载两者

*bootstrap.min.js*

和

*bootstrap.dropdown.js*

这导致我的代码发生冲突，您不需要加载两者，因为下拉代码包含在 bootstrap.min.js

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T04:56:16.617

“min”版本有时会导致问题（我偶尔会遇到使用 ASP.NET MVC 的 .min 文件的问题）

我有同样的问题，尝试使用 bootstrap.js 并且效果很好！

在你的最后尝试相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-01T15:34:13.787

一定要使用`bootstrap.bundle.min.js`和照顾，`data-bs-toggle`而不是`data-toggle`。

```
<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Dropdown button
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">Action</a>
        <a class="dropdown-item" href="#">Another action</a>
        <a class="dropdown-item" href="#">Something else here</a>
    </div>
</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T17:20:10.883

在加载 bootstrap-dropdown.js 之前，您需要加载 bootstrap.min.js 或 bootstrap.js。Bootstrap 下拉菜单是一个依赖于 Bootstrap 框架的 js 插件。

您的页脚部分将如下所示：

```
<footer>
  <p>© Company 2013</p>
</footer>
<script src="./js/jquery-1.9.1.js"></script>
<script src="./js/bootstrap.js"></script>
<script src="./js/bootstrap-dropdown.js"></script> 
```

您可以自定义您的 Bootstrap 构建，然后您不必单独包含 bootstrap-dropdown.js——它将与 Bootstrap 一起加载。

Bootstrap 自定义下载：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# java - 将Java中的图像更改为动画后暂停

> ID：15592160
> 
> 赞同：0
> 
> 时间：2013-03-23T21:15:59.787
> 
> 标签：java, bufferedimage

我在一个类中有一个函数，可以将玩家一号移动 32 x 32 块。局部 x 和 y 值指的是 (1,0)、(0,1)、(-1,0) 或 (0,-1)（指运动方向）。sprites 是一个缓冲图像数组，引用不同的行走精灵。Player.x 和 Player.y 是 Player 的当前 tile 坐标，miniX 和 miniY 是图像移动的像素量。Swing.player 是一个包含图像的 JPanel。currentSprite 是当前使用的尽管。

```
 switch (2 * x + y) {
            case 2:
                Player.miniX = 4;
                currentSprite = sprites[10];
                Swing.player.repaint();
                //pause
                Player.miniX = 8;
                currentSprite = sprites[11];
                Swing.player.repaint();
                //pause
                Player.miniX = 12;
                Swing.player.repaint();
                currentSprite = sprites[10];
                Swing.player.repaint();
                //pause
                Player.miniX = 16;
                currentSprite = sprites[11];
                Swing.player.repaint();
                //pause
                Player.miniX = 20;
                currentSprite = sprites[10];
                Swing.player.repaint();
                //pause
                Player.miniX = 24;
                currentSprite = sprites[11];
                Swing.player.repaint();
                //pause
                Player.miniX = 28;
                currentSprite = sprites[10];
                Swing.player.repaint();
                //pause
                Player.miniX = 0;
                Player.x += 1;
                currentSprite = sprites[9];
                break;
            case 1:
                //omitted as is same as above
                break;
            case -1:
                //omitted as is same as above
                break;
            case -2:
                //omitted as is same as above
                break;
        } 
```

在每个班次之间暂停几毫秒的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:18:42.990

用这个 ：`Thread.sleep(1000);`

这将使您当前正在执行的线程休眠 1 秒，即 1000 毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:26:23.930

Use a Swing Timer to schedule the animation. Read the section from the Swing tutorial on [How to Use Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html).

# php - 如果登录检查失败，则调用 Jquery 登录弹出窗口

> ID：15592162
> 
> 赞同：0
> 
> 时间：2013-03-23T21:16:09.807
> 
> 标签：php, javascript, jquery

我有以下 jquery 登录表单，可以在单击按钮时调用它，但我也希望在 php 登录检查为假时调用它。我可以添加什么使它可以被 php 调用？

```
 <script type="text/javascript">

             $(document).ready(function() {
$('a.login-window, a.log').click(function() {

            //Getting the variable's value from a link 
    var loginBox = $(this).attr('href');

    //Fade in the Popup
    $(loginBox).fadeIn(300);

    //Set the center alignment padding + border see css style
    var popMargTop = ($(loginBox).height() + 24) / 2; 
    var popMargLeft = ($(loginBox).width() + 24) / 2; 

    $(loginBox).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

    return false;
});

// When clicking on the button close or the mask layer the popup closed
$('a.close, #mask').live('click', function() { 
  $('#mask , .login-popup').fadeOut(300 , function() {
    $('#mask').remove();  
}); 
return false;
});
});
             </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:28:15.480

如果登录请求无效，请设置调用以触发登录表单打开：

```
$(document).ready(function () {
    $('a.login-window, a.log').click(function () {
        //Getting the variable's value from a link 
        var loginBox = $(this).attr('href');

        //Fade in the Popup
        $(loginBox).fadeIn(300);

        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2;
        var popMargLeft = ($(loginBox).width() + 24) / 2;

        $(loginBox).css({
            'margin-top': -popMargTop,
            'margin-left': -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function () {
        $('#mask , .login-popup').fadeOut(300, function () {
            $('#mask').remove();
        });
        return false;
    });
}); 
```

然后，至少*在*上一次`$.ready()`运行之后的某个地方（不是设置，*执行它的处理程序*），执行以下操作：

```
if ($php_login_request === true && $php_user_authenticated !== true) { 
    echo "<script>$('a.login-window, a.log').trigger('click');</script>";
} 
```

我只是标记了这些`$php_`变量，这样您就可以知道需要在服务器上执行这些变量，显然是在身份验证步骤和“标签”末尾之间的某个时间点。

# c - 尽管旧属性被重置，termios 在退出后在终端中弄乱了标准输出

> ID：15592166
> 
> 赞同：1
> 
> 时间：2013-03-23T21:17:01.637
> 
> 标签：c, terminal, termios

我在串行日志记录应用程序中使用 termios，该应用程序读取串行端口并将数据保存在文件中。它还接受来自标准输入的输入并将其发送到串行端口。

问题是，一旦应用程序退出（通过按“q”），bash 终端设置就会混乱，并且会输出奇怪的字符（见图）

![终端输出数据来自中间的串口，当按下 q 时奇怪的终端行为](../Images/df089bb525c2fe1b51a29157b708d573.png)

将属性设置回原来的成功：resultetatr=tcsetattr(STDIN_FILENO,TCSAFLUSH,&oldstdio); 并失败：resultetatr=tcsetattr(STDIN_FILENO,TCSAFLUSH,&oldstdio);

如程序终止前所示。

该程序在带有 USB 到串行适配器的 Raspberrypi 上运行。

相关的代码是：

```
 void setup_termios()
      { memset(&stdio,0,sizeof(stdio));
        stdio.c_iflag=0;
        stdio.c_oflag=0;
        stdio.c_cflag=0;
        stdio.c_lflag=0;
        stdio.c_cc[VMIN]=1;
        stdio.c_cc[VTIME]=0;

        int resultsetatr;
        resultsetatr=tcgetattr(STDIN_FILENO,&oldstdio); //get old settings
        printf("get att stdin = %d\n",resultsetatr);
    resultsetatr=tcsetattr(STDIN_FILENO,TCSANOW,&stdio);
    printf("set att stdin = %d\n",resultsetatr);

        fcntl(STDIN_FILENO, F_SETFL, O_NONBLOCK);       // make the reads non-blocking

    // This is the actual Serial Port termios structure
        memset(&tio,0,sizeof(tio));
        tio.c_iflag=0;
        tio.c_oflag=0;
        tio.c_cflag=CS8|CREAD|CLOCAL;           // 8n1, see termios.h for more information
        tio.c_lflag=0;
        tio.c_cc[VMIN]=1;
        tio.c_cc[VTIME]=5;

    //Opening the serial port
        tty_fd=open(DEVICE, O_RDWR | O_NONBLOCK | O_NOCTTY | O_NDELAY);

        if (tty_fd < 0) {
            perror(DEVICE);
            printf("\ryou dont have permission to open serial port, use : sudo     ./seriallog\r\n");
        close(tty_fd);
        tcsetattr(tty_fd,TCSANOW,&oldtio);
        tcsetattr(STDIN_FILENO,TCSANOW,&oldstdio);
        exit(-1);
        }      

    cfsetospeed(&tio,BAUD);            // 9600 baud
        cfsetispeed(&tio,BAUD);            // 9600 baud

    tcgetattr(tty_fd,&oldtio); //get old settings
        tcsetattr(tty_fd,TCSANOW,&tio);//set to new settings
}

int main(){
    time(&t1);
    setup_termios(); 
    create_logfile();
        while (rx_char!='q')
        {
                if (read(tty_fd,&rx_char,1)>0)        
                {
                    rx_char = rx_char & 0xff;

                    //if ( rx_char < 0 || rx_char > 126) rx_char =' ';  
                    time(&t2); //take time 2
                    dt = difftime(t2,t1);
                    if (dt>1800) {tx_char ='A';write(tty_fd,&tx_char,1); t1=t2;}  
                    putc(rx_char,stdout);
                    fputc(rx_char,output_file);              
                    if (rx_char == '\r') write_date_and_time_line(1);
                    check_for_next_day_file();

                }
                if (read(STDIN_FILENO,&tx_char,1)>0)  write(tty_fd,&tx_char,1);                     

        }

        puts("\r\n");
        close(tty_fd);
        fclose(output_file);

        int resultsetatr;

        //resultsetatr=tcsetattr(tty_fd,TCSANOW,&oldtio);
        //printf("tty : %d\n\r",resultsetatr);

        resultsetatr=tcsetattr(STDIN_FILENO,TCSAFLUSH,&oldstdio);
        printf("set stdin att : %d\n",resultsetatr);

        resultsetatr=tcsetattr(STDIN_FILENO,TCSAFLUSH,&oldstdio);
        printf("set stdin att : %d\n",resultsetatr);

        return 0;} 
```

# android - 如何为安卓应用制作漂亮的标签

> ID：15592171
> 
> 赞同：1
> 
> 时间：2013-03-23T21:17:14.687
> 
> 标签：android, xml

我正在设计我的应用程序，试图让它看起来很漂亮。

![http://cdn1.1stwebdesigner.com/wp-content/uploads/2012/06/mobile-apps/jauntly-mobile-app-designs.jpg](../Images/a1aeea88bf7cde4adc4640dd22134fa3.png)

我真的很喜欢这个顶部栏的设计。我可以为它制作我自己的图像，我认为他们可能会这样做。

但基本上有人知道这是怎么做到的，我能做到吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:55:57.850

我认为您可能想要的是使用 ActionBar。它的样式在某种程度上受到限制，但这里有一个看起来有点像[您正在寻找](http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider)的示例。本质上，如果您希望它具有“标签”功能，即单击一个，它会将您带到不同的“屏幕”，您可以为每个不同的屏幕使用片段并在它们之间切换。

如果这对您不起作用，您总是可以在屏幕顶部有一个布局，并为“标签”使用图像按钮。

# ssl - 从 websphere 客户端 (SSL) 连接到 weblogic 主机时出错

> ID：15592183
> 
> 赞同：0
> 
> 时间：2013-03-23T21:18:23.630
> 
> 标签：ssl, websphere, weblogic

从 websphere 客户端连接到 t3s weblogic 服务器需要哪些 jars？

我目前有以下罐子 wlfullclient.jar cipher.jar webserviceclient+ssl.jar （添加到共享库）

我将 weblogic.jar 添加到我的共享库中，但它没有被拾取。

服务器 websphere 7 到 weblogic 10.3 JNDI 查找类型 t3s

在这方面的任何帮助将不胜感激。

谢谢，尼扎姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T20:08:22.293

这个问题原来是 websphere 7 和 weblogic 10.3 之间的兼容性。这是一个已知的问题 。这已通过在 weblogic 10.3 上应用补丁和更新的 weblogic.jar 得到修复。

# alsa - 5.1 带有 PortAudio 的频道

> ID：15592187
> 
> 赞同：3
> 
> 时间：2013-03-23T21:18:44.613
> 
> 标签：alsa, portaudio, surround

我正在尝试开始使用 PortAudio。我能够毫无问题地构建捆绑的示例文件“paex_sine.c”。这是左声道上的正弦波和右声道上不同频率的正弦波。这可以正常工作，没有错误。

我的设置是一台运行 Puppy Linux Slacko 5.5 的 32 位 PC。它有一个带有 EMU10k1x 芯片的 SoundBlaster SB0200。Alsa 库是 v1.0.26，驱动程序是 v1.0.24。我已经使用这个命令测试了所有 5.1 通道：

```
% 扬声器测试 -Dplug:surround51 -c6
```

该测试在 6 个通道中的每一个上都能正常播放声音，尽管它确实抱怨管道损坏。这可能是因为测试程序中所有 6 个通道的缓冲区不够大。

我遇到的问题是，当我修改“paex_sine.c”以在 6 个通道而不是 2 个通道上运行时，它只会通过右前和左前通道播放声音。没有报告错误，并且 2 个通道听起来应该。我听说在某些情况下必须取消静音。在 AlsaMixer 和 Puppy 的“Retrovol”（反映 AlsaMixer）中，我已将 Master、PCM 和 Surround 设置为最大音量，未静音。PortAudio 中是否有我也必须取消静音的混音器？我可以在正确运行扬声器测试和运行修改后的 paex_sine 示例和只听到 2 个通道之间来回切换。这是我修改过的 paex_sine.c：

```
    /** @file paex_sine.c
        @ingroup examples_src
        @brief 播放几秒钟的正弦波。
        @作者罗斯·本西纳 <rossb@audiomulch.com>
        @作者菲尔伯克 <philburk@softsynth.com>
    */
    /*
     * $Id：paex_sine.c 1752 2011-09-08 03:21:55Z 菲尔伯克 $
     *
     * 该程序使用 PortAudio 便携式音频库。
     * 欲了解更多信息，请参阅：http://www.portaudio.com/
     * 版权所有 (c) 1999-2000 Ross Bencina 和 Phil Burk
     *
     * 特此免费授予任何获得许可的人
     * 该软件和相关文档文件的副本
     *（“软件”），不受限制地处理软件，
     * 包括但不限于使用、复制、修改、合并、
     * 发布、分发、再许可和/或出售软件的副本，
     * 并允许向其提供软件的人这样做，
     * 须符合以下条件：
     *
     * 以上版权声明和本许可声明为
     * 包含在软件的所有副本或大部分内容中。
     *
     * 软件按“原样”提供，不提供任何形式的保证，
     * 明示或暗示，包括但不限于
     * 适销性、特定用途的适用性和非侵权性。
     * 在任何情况下，作者或版权所有者均不承担任何责任
     * 任何索赔、损害赔偿或其他责任，无论是在诉讼中
     * 合同、侵权或其他原因，由、不相关或相关
     * 与软件或软件中的使用或其他交易有关。
     */

    /*
     * 以上文字构成整个 PortAudio 许可证；然而，
     * PortAudio 社区还提出以下非约束性请求：
     *
     * 任何希望分发对软件的修改的人
     * 要求将修改发送给原始开发人员，以便
     * 它们可以合并到规范版本中。也是
     * 要求将这些不具约束力的请求与
     * 上面的许可证。
     */
    #include <stdio.h>
    #include <math.h>
    #include “portaudio.h”

    #define NUM_SECONDS (30)
    #define SAMPLE_RATE (44100)
    #define FRAMES_PER_BUFFER (192)//(64)

    #ifndef M_PI
    #define M_PI (3.14159265)
    ＃万一

    #define TABLE_SIZE (200)
    类型定义结构
    {
        浮动正弦[TABLE_SIZE];
        诠释左相；
        int right_phase;
        int left2_phase;
        诠释 right2_phase;
        int left3_phase;
        int right3_phase;
        字符消息[20]；
    }
    测试数据；

    /* 当需要音频时，PortAudio 引擎将调用此例程。
    ** 它可能在某些机器上以中断级别调用，所以不要做任何事情
    ** 这可能会像调用 malloc() 或 free() 一样搞砸系统。
    */
    静态 int patestCallback( const void *inputBuffer, void *outputBuffer,
                                unsigned long framesPerBuffer,
                                常量 PaStreamCallbackTimeInfo* 时间信息，
                                PaStreamCallbackFlags statusFlags,
                                无效*用户数据）
    {
        paTestData *data = (paTestData*)userData;
        浮动 *out = (float*)outputBuffer;
        无符号长 i；

        （无效）时间信息；/* 防止未使用的变量警告。*/
        (void) 状态标志；
        (void) 输入缓冲区；

        for(i=0;i<framesPerBuffer;i++)
        {
            *out++ = 数据->正弦[数据->left_phase]; /* 剩下 */
            *out++ = 数据->正弦[数据->right_phase]; /* 正确的 */
            *out++ = 数据->正弦[数据->left2_phase]; /* 剩下 */
            *out++ = 数据->正弦[数据->right2_phase]; /* 正确的 */
            *out++ = 数据->正弦[数据->left3_phase]; /* 剩下 */
            *out++ = 数据->正弦[数据->right3_phase]; /* 正确的 */
            数据->left_phase += 1；
            if( 数据->left_phase >= TABLE_SIZE ) 数据->left_phase -= TABLE_SIZE;
            数据->right_phase += 3; /* 更高的音高，这样我们就可以区分左右。*/
            if( 数据->right_phase >= TABLE_SIZE ) 数据->right_phase -= TABLE_SIZE;
            数据->left2_phase += 5；
            if( 数据->left2_phase >= TABLE_SIZE ) 数据->left2_phase -= TABLE_SIZE;
            数据->right2_phase += 7；/* 更高的音高，这样我们就可以区分左右。*/
            if( 数据->right2_phase >= TABLE_SIZE ) 数据->right2_phase -= TABLE_SIZE;
            数据->left3_phase += 9;
            if( 数据->left3_phase >= TABLE_SIZE ) 数据->left3_phase -= TABLE_SIZE;
            数据->right3_phase += 11；/* 更高的音高，这样我们就可以区分左右。*/
            如果（数据->right3_phase >= TABLE_SIZE）数据->right3_phase -= TABLE_SIZE;
        }

        返回pa继续；
    }

    /*
     * 播放完成时，portaudio 会调用此例程。
     */
    静态无效流完成（无效*用户数据）
    {
       paTestData *data = (paTestData *) userData;
       printf("流完成：%s\n", data->message );
    }

    /************************************************* ******************/
    诠释主要（无效）；
    诠释主要（无效）
    {
        PaStreamParameters 输出参数；
        PaStream *流；
        PaError 错误；
        paTestData 数据；
        诠释我;

        printf("PortAudio 测试：输出正弦波。SR = %d, BufSize = %d\n", SAMPLE_RATE, FRAMES_PER_BUFFER);

        /* 初始化正弦波表 */
        for(i=0;i<TABLE_SIZE;i++)
        {
            data.sine[i] = (float) sin( ((double)i/(double)TABLE_SIZE) * M_PI * 2\. );
        }
        data.left_phase = data.right_phase = 0;
        data.left2_phase = data.right2_phase = 0;
        data.left3_phase = data.right3_phase = 0;

        错误 = Pa_Initialize();
        if( err != paNoError ) 转到错误；

        outputParameters.device = Pa_GetDefaultOutputDevice(); /* 默认输出设备 */
        if (outputParameters.device == paNoDevice) {
          fprintf(stderr,"错误：没有默认输出设备。\n");
          转到错误；
        }
        outputParameters.channelCount = 6; /* 5.1 声道输出 */
        outputParameters.sampleFormat = paFloat32; /* 32 位浮点输出 */
        outputParameters.suggestedLatency = Pa_GetDeviceInfo( outputParameters.device )->defaultLowOutputLatency;
        outputParameters.hostApiSpecificStreamInfo = NULL；

        错误 = Pa_OpenStream(
                  ＆溪流，
                  NULL, /* 没有输入 */
                  &输出参数,
                  采样率，
                  FRAMES_PER_BUFFER,
                  paClipOff, /* 我们不会输出超出范围的样本，所以不要费心剪裁它们 */
                  Patest回调，
                  ＆数据 ）;
        if( err != paNoError ) 转到错误；

        sprintf（data.message，“无消息”）；
        err = Pa_SetStreamFinishedCallback(stream, &StreamFinished);
        if( err != paNoError ) 转到错误；

        错误 = Pa_StartStream( 流 );
        if( err != paNoError ) 转到错误；

        printf("播放 %d 秒。\n", NUM_SECONDS );
        Pa_Sleep(NUM_SECONDS * 1000);

        错误 = Pa_StopStream( 流 );
        if( err != paNoError ) 转到错误；

        错误 = Pa_CloseStream( 流 );
        if( err != paNoError ) 转到错误；

        Pa_Terminate();
        printf("测试完成。\n");

        返回错误；
    错误：
        Pa_Terminate();
        fprintf( stderr, "使用 portaudio 流时出错\n" );
        fprintf(stderr, "错误号: %d\n", err );
        fprintf(stderr, "错误信息: %s\n", Pa_GetErrorText( err ) );
        返回错误；
    }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:18:47.347

没有`plug:`，将不会自动重新采样。

PortAudio 不允许设置您自己的设备名称，因此您必须在`~/.asoundrc`or中定义您自己的设备`/etc/asound.conf`，如下所示：

```
pcm.mydevice = "plug:surround51" 
```

并在 PortAudio 中选择它（使用`Pa_GetDeviceCount`/搜索`Pa_GetDeviceInfo`）。或者，将其设为默认设备：

```
pcm.!default = "plug:surround51" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T00:17:10.497

我将 ~/.asoundrc 更改为：

```
pcm.!默认插头：surround51：Live

```

这解决了这个问题。

# decode - Mule esb文件压缩/编码和解压缩/解码

> ID：15592193
> 
> 赞同：0
> 
> 时间：2013-03-23T21:19:28.570
> 
> 标签：decode, mule, encode, compression

我想使用 Mule esb 在 Magento 和 OFbiz 之间传输文件。我知道使用 mule 在系统之间传输平面文件很热门，但找不到有用的教程或有关如何使用 Mule 压缩和编码要传输的文件以及解压缩和解码接收到的（压缩/编码）文件的信息另一端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:00:07.343

您可以使用 Mule 的 gzip-compress-transformer 进行压缩，使用 gzip-uncompress-transformer 进行解压缩。您指的是什么编码和解码机制？

# meteor - Meteor Twitter 登录“内部服务器错误”

> ID：15592194
> 
> 赞同：2
> 
> 时间：2013-03-23T21:19:31.700
> 
> 标签：meteor, meteorite

我已经通过 Twitter 登录将我的应用程序部署到 Meteor 的服务器上。所以我第一次加载它时，它要求我配置消费者密钥和秘密，在保存这些细节的过程中出了点问题。现在每次我用 Twitter 登录时，它都会弹出一个新窗口，但会立即返回一个 Meteor 对话框，上面写着“内部服务器错误”。

我有哪些选择？

如果我无法访问数据库（因为它在 Meteor 的服务器上），如何重置我的应用程序的 OAuth 状态。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T15:44:51.187

解决此问题的另一种方法是在应用程序加载时以编程方式设置/重置访问密钥/秘密。

```
// ensure this runs server side

Meteor.startup(function() {
  Accounts.loginServiceConfiguration.remove({
    service: "twitter"
  });
  Accounts.loginServiceConfiguration.insert({
    service: "twitter",
    consumerKey: "XXX",
    secret: "XXX"
  });
}); 
```

相同的方法可以应用于配置其他网络。键值也可以使用环境变量或 Meteor.settings 动态加载：http: [//docs.meteor.com/#meteor_settings](http://docs.meteor.com/#meteor_settings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T22:31:31.470

您可以访问您的收藏并使用以下命令访问 mongo shell

```
meteor mongo yourapp.meteor.com 
```

查找名为的集合`meteor_accounts_loginServiceConfiguration`并将其删除

并且对于您的用户特定的 OAuth 状态进入`users`集合。您的 OAuth 应该在`services.twitter`&`services.resume`

# python - 在二维数组中获取元素索引的最佳方法是什么？

> ID：15592195
> 
> 赞同：1
> 
> 时间：2013-03-23T21:19:34.587
> 
> 标签：python, list

所以我正在做一个项目，我有一个二维数组，我需要找到放置在第二维上的元素的位置，而不知道它的第一维的索引。

我知道我可以遍历这些部分，检查是否`list[x].index(y)`不是值错误，但这使我的代码看起来不那么优雅，我想知道是否有更好的方法来做到这一点，比如 2d .index 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:32:39.763

假设您不想重新发明轮子，我相信这个问题有您正在寻找的答案：[是否有一个 Numpy 函数可以返回数组中某物的第一个索引？](https://stackoverflow.com/questions/432112/python-numpy-array-help-is-there-a-function-to-return-the-index-of-something-in/432289#432289)

```
import numpy as np
a = np.array([[1,2,4],[4,5,6]])
item = 4
row_indices, col_indices = np.where(a == item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:28:39.653

尝试这样的事情。

```
>>> l = [[1,2,3],[4,5],[6,7,8,9]]
>>> x = 1
>>> y = 2
>>> v = l[x][y] if len(l) > x and len(l[x]) > y else None
>>> v is None
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:29:26.227

如果所有行的长度相等，则可以使用以下代码：

```
index_2d = [item for row in list for item in row].index(y)
index_row = index_2d / ROW_LENGTH
index_col = index_2d % ROW_LENGTH 
```

# wordpress - Wordpress Multisite 停止旧的子域工作

> ID：15592196
> 
> 赞同：1
> 
> 时间：2013-03-23T21:19:42.070
> 
> 标签：wordpress, wildcard, subdomain

我按照说明在带有通配符 DNS 的 Mediatemple DV 服务器上使用子域设置 Wordpress 多站点并使其正常工作，但是，我以前托管过子域设置，但现在 Multisite 通过默认设置为多站点“系统”来阻止这些工作。我如何设置 Multisite，以便我可以选择它使用哪些子域以及哪些子域让它不理会，以防我需要在这些子域中设置非 wordpress 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:50:05.480

请仔细检查 DNS 记录。我拥有实例的方式是在指向我的服务器（@ 或 ip）的 CNAME 上使用通配符

对于不属于“wp 多站点网络”的子域，我使用了指向服务器 ip 的 A 记录。从那里，这些子域必须正确停放。例如，在 WHM 中，我为 subdomain.domain.com 创建了一个 cPanel 帐户，该帐户植根于 /home/subdomain/public_html - 同时 domain.com cPanel 帐户根植于 /home/domain/pubic_html - apache 分别解析两者。

# android - 有没有办法将 Android 项目从一个工作区移动到另一个工作区

> ID：15592204
> 
> 赞同：0
> 
> 时间：2013-03-23T21:21:05.937
> 
> 标签：android, eclipse

有没有办法将 Android 项目从一个工作空间移动到另一个工作空间？

我的硬盘崩溃了，我不得不重新安装所有东西，现在当我打开旧的工作区时，eclipse 找不到任何导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:35:55.677

我成功地移动了几次项目。重新安装时，您是否将工作区定义为包含旧项目的目录？您是否尝试过手动导入？最后，尝试这些[答案](https://stackoverflow.com/questions/4167335/moving-android-eclipse-project-to-new-pc?rq=1)

# iphone - UITextView 不为 iPhone 调整大小

> ID：15592207
> 
> 赞同：0
> 
> 时间：2013-03-23T21:21:23.113
> 
> 标签：iphone, ios, objective-c, uitextview

我已经发布了一个适用于 iPad 的应用程序，并且我正在努力使其具有普遍性。我有一个 UITextView，我想调整它的大小以适应它的内容。TextView 通过故事板创建并通过 IBOutlet 引用。我阅读了这个问题的答案[How do I size a UITextView to its content?](https://stackoverflow.com/questions/50467/how-do-i-size-a-uitextview-to-its-content) 并且正在使用代码来调整 TextView 的大小。这段代码在 iPad 上完美运行，但是当我在 iPhone 上运行它时，它不会调整大小。我已经在这个问题上工作了好几个小时，它一直在杀死我。

```
//self.speciesDescription is the TextView in Question here:

//set the text
self.speciesDescription.text=[self.modal getdescriptionForSpecies:self.plantDisplayed];

//call the method below
[self resizeTextView:self.speciesDescription];

//resizes the text view to fit the text
-(void)resizeTextView:(UITextView *)textView {
    CGRect contentFrame=textView.frame;
    contentFrame.size.height=textView.contentSize.height;
    textView.frame=contentFrame;
} 
```

如果我在尝试调整大小之前在 TextView 上调用 initWithFrame: 可以正常工作，但如果我不必这样做，它将为我节省大量时间和代码。StoryBoard 不会自动调用 initWithFrame: 吗？

**编辑：**我今天进行了一些测试，发现 textView 的 contentSize 属性总是宽度为 0，高度超过 16000。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:37:40.577

故事板使用构造函数初始化其视图`initWithCoder:`，而不是`initWithFrame:`. 如果您进行一些自定义初始化，请确保在`initWithCoder:`方法内部进行。

# c++ - 进入析构函数的条件

> ID：15592209
> 
> 赞同：0
> 
> 时间：2013-03-23T21:21:42.047
> 
> 标签：c++

我有我在某个课上写的函数。我不明白为什么当我创建名为： Square square; 的对象时 退出函数时正在调用 Square 的 d'tor。而当我将对象创建为： Square* square = new Square(); 没有 d'tor 被调用。

**类上根本没有继承**。

这里有两个版本的函数示例：

```
//=======Enter to d'tor in the end of the function to ~Square==========
void DrawShapesApp::addSquare()
{
    int row, col;
    int edge;
    char ch;

    Square square;

    getSquareInfo(row, col, edge, ch);
    square.setAll(row, col, edge, ch);
    m_squares.push_back(&square);
}

//=======Doesn't enter to d'tor in the end of the function==========
void DrawShapesApp::addSquare()
{
    int row, col;
    int edge;
    char ch;
    Square* square = new Square();

    getSquareInfo(row, col, edge, ch);
        (*square).setAll(row, col, edge, ch);
    m_squares.push_back(&square);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:23:25.310

当您使用“new”创建对象时，*您*有责任将其删除。这是通过“删除”完成的：

```
delete square; 
```

在你的第二个函数中，你有一个内存泄漏——对象永远不会被破坏，内存永远不会被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:23:22.690

```
Square* square = new Square(); 
```

这是`Square*`具有自动存储期限的 a 的定义。该指针在函数结束时自动销毁*。*

但是，指针是用 的结果初始化的`new Square()`。这个*新表达式*创建了一个类型`Square`为*动态存储持续时间*的对象。该对象*不会*在函数结束时被销毁。

要销毁具有动态存储持续时间的对象，您必须调用`delete`指向该对象的指针。在这种情况下，请执行以下操作：

```
delete square; 
```

如果不手动销毁对象，就会发生内存泄漏。

但是，在现代 C++ 中，动态分配的对象通常由智能指针管理，该指针将为`delete`您处理：

```
std::unique_ptr<Square> square(new Square()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:24:10.610

以这种方式创建的对象：

```
Square square; 
```

据说有**自动存储期限**，超出范围会*自动销毁。*例如：

```
void foo()
{
    Square square1;
    {
        Square square2;
    } // Here square2 will be destroyed

    if (cond) { /* .... */ }
    else
    {
        Square square3;
        // ...
    } // Here square3 will be destroyed
    // ...
} // Here square1 will be destroyed 
```

如果您不需要/不希望对象在其作用域结束后仍然存在，您通常会选择以这种方式实例化对象（尽管有人可能会争辩说，在 C++11 中*移动*对象也为具有自动存储持续时间的对象提供了一种实现此目的的方法） .

另一方面，以这种方式创建的对象：

```
Square* pSquare = new Square(); 
```

据说具有**动态存储持续时间**`delete`，并且在为指向该对象的指针调用时将被销毁：

```
delete pSquare; 
```

在这种情况下，*您*有责任手动销毁该对象，如果没有为每个分配的对象执行此操作，`new`将导致*内存泄漏*。例如：

```
void foo()
{
    Square* pSquare1 = new Square();
    Square* pSquare2 = nullptr;
    if (/* ... */)
    {
        pSquare2 = new Square();
    }

    delete pSquare2; // Here the object pointed to by pSquare2 is destroyed
} // Whoops! I forgot deleting the object pointed to by pSquare1, that's a leak! 
```

如果您希望它们超出其范围的范围，和/或如果您需要[引用语义](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873)，您通常会选择以这种方式创建对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:23:47.187

当您声明这样的对象时

```
Square square; 
```

超出声明范围后将自动销毁。

和...

当您声明这样的对象时

```
Square *square = new Square(); 
```

之后就会被销毁`delete`。您必须显式删除该对象。

# ios - RestKit - 不符合键值编码，在 JSON 中没有根

> ID：15592210
> 
> 赞同：1
> 
> 时间：2013-03-23T21:21:47.200
> 
> 标签：ios, objective-c, json, restkit, key-value-coding

我一直在尝试从 JSON 响应和我在控制台输出中看到的所有内容中映射以下对象，没有任何原因导致映射不成功 - 如果有人可以检查并查看，我将不胜感激：

```
@interface RKElectionsModel : NSObject

@property (nonatomic, assign) bool isActive;
@property (nonatomic, strong) NSNumber *electionID;
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *summary;
@property (nonatomic, strong) NSNumber *availableSeats;
@property (nonatomic, strong) NSNumber *candidatesCount;
@property (nonatomic, strong) NSNumber *withdrawnCount;
@property (nonatomic, strong) NSSet *candidates;

@end

/**
 * Election Detail Mapping: Getting all election details, we have some extra information from
 * the API call
 *
*/
RKObjectMapping *electionDetailsMapping = [RKObjectMapping mappingForClass:[RKElectionsModel class]];

// Map JSON -> entities
[electionDetailsMapping addAttributeMappingsFromDictionary:@{
     @"id": @"electionID",
     @"title": @"title",
     @"summary": @"summary",
     @"active": @"isActive",
     @"availableSeats": @"availableSeats",
     @"candidatesCount": @"candidatesCount",
     @"withdrawnCount": @"withdrawnCount"
 }];

// Register our mappings with the provider
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:electionDetailsMapping pathPattern:@"/api/elections/:electionID/all" keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

[pastebin 上的控制台输出](http://pastebin.com/hE3cAZ0e)以及您可以[在此处访问的任何 JSON 响应示例](http://stv.lewistheobald.com/api/elections/1/all)

感谢任何帮助，刘易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:59:01.853

Seems like your trying to map a NSString to NSNumber.

In your `NSObject` try to add the following validation and transform the string you receive from the server to a NSNumber when the mapping starts.

```
- (BOOL)validateAvailableSeats:(id *)ioValue error:(NSError **)outError {
       // Force the value to be a NSNumber
       *ioValue = [NSNumber numberWithDouble:[(NSString*)value doubleValue] ]
       return YES;
} 
```

In the [RestKit Wiki](https://github.com/RestKit/RestKit/wiki/Object-mapping#type-transformation) you'll find more transformations for your values.

# highslide - Highslide关闭按钮位置

> ID：15592213
> 
> 赞同：0
> 
> 时间：2013-03-23T21:22:02.280
> 
> 标签：highslide

你好。我需要在 highslide 弹出窗口的右上角添加关闭按钮。我添加到配置：

```
hs.registerOverlay({
    html: '<div class="closebutton" onclick="return hs.close(this)" title="Close"></div>',
    position: 'top right',
    useOnHtml: true,
    fade: 2 // fading the semi-transparent overlay looks bad in IE
}); 
```

但在某些页面上，弹出窗口的右侧面板上有标题文本，并在照片上方编号。这个按钮相对于照片定位，而不是整个窗口。也许可以将叠加层添加到 DOM 中更高的一个元素（highslide-wrapper 类）？这可以解决我的问题。

offsetX 和 offsetY 仅适用于右侧面板上有标题的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:53:32.877

我们发现，添加一个尊重具有不同高度的 highslide-heading、rightpanel 标题等的图层的最简单方法是使用 jQuery：创建一个 div，对其设置样式并将其附加到 highslide-wrapper。

将此添加到您的 Highslide 设置：

```
hs.Expander.prototype.onAfterExpand = function (sender) {
    $('<div onclick="return hs.close(this)" title="Close"></div>').css({
        position: 'absolute',
        top: '-15px',
        right: '-15px',
        height: '30px',
        width: '30px',
        cursor: 'pointer',
        background: 'url(/highslide/graphics/close.png)', // adjust the path if necessary
        zIndex: 20
    }).appendTo(sender.wrapper);
}; 
```

**注意：此解决方案需要 highslide-full.js 和 jQuery。**

# javascript - 隐藏输入需要文本

> ID：15592217
> 
> 赞同：2
> 
> 时间：2013-03-23T21:22:20.630
> 
> 标签：javascript, jquery, html

我有人帮助我并获取此代码。

```
<input type="hidden" id="charge_total" value="charge_total"> 
```

而这个 JavaScript

```
<script>
document.getElementById("charge_total").value = document.getElementById("system_cost").innerHTML; 
```

我的问题是，我使用的主机支付系统需要隐藏输入才能拥有名称。

所以隐藏的输入一定是这样的。

```
<input type="hidden" id="charge_total" name="charge_total" value="charge_total"> 
```

我的问题是使用代码是它没有在该字段中输入任何文本，并且我在结帐页面中留下了一个空白总计。我需要这个跨度 ID 将它具有的任何数字输出到这行代码中的隐藏值输入中。

```
<p>Total: <span id="system_cost">&nbsp;</span></p>

<input type="hidden" id="charge_total" name="charge_total" value="charge_total"> 
```

有谁知道我做错了什么？

* * *

这是我将它放在标题中的方式。

```
<script>
$(function(){ //on document ready attach handlers
$('form').on('submit', function(e){
    e.preventDefault(); // stop the form submitting and do work
    $('#charge_total').val(parseFloat($('#system_cost').text()));
    $(this).submit(); //now submit the form, calculations are done
});
});
</script> 
```

这些是另外两行。

```
<input type="hidden" name="charge_total" value="charge_total">

<p>Total: <span id="system_cost">&nbsp;</span></p> 
```

跨度按预期显示在页面上并正确填充。只有隐藏值才显示charge_total。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:29:48.867

```
$(function(){ //on document ready attach handlers
    $('form').on('submit', function(e){
        e.preventDefault(); // stop the form submitting and do work
        $('#charge_total').val(parseFloat($('#system_cost').text()));
        this.submit; //now submit the form, calculations are done
    });
}); 
```

# ruby-on-rails - 不断收到 Completed 500 internal server error heroku

> ID：15592218
> 
> 赞同：0
> 
> 时间：2013-03-23T21:22:26.140
> 
> 标签：ruby-on-rails, ruby, heroku

将我的 Rails 应用程序部署到 Heroku 并进行所有迁移时，我可以毫无问题地创建新管理员，但是当我去创建用户时，我输入所有信息，单击创建并获取

“我们很抱歉，但有些不对劲。”

下面的日志清单显示我收到 500 内部服务器错误，我不知道为什么，考虑到它最近工作，突然它停止了，现在我没有做任何事情使它正常工作。

任何帮助都会很棒。

下面是我的heroku日志，它靠近发生错误的底部

```
quel-3.20.0/lib/sequel/core.rb:72:in `block in check_requiring_thread'
        from <internal:prelude>:10:in `synchronize'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:69:in `check_requiring_thread'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:249:in `tsk_require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/database/connecting.rb:25:in `adapter_class'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/database/connecting.rb:54:in `connect'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:119:in `connect'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/schem
a.rb:17:in `dump_table'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/bin/schema:32:
in `<main>'
Schema:        100% |==========================================| Time: 00:00:07
C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custom
_require.rb:36:in `require': LoadError: cannot load such file -- sqlite3 (Sequel:
:AdapterNotFound)
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/ru
bygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/adapters/sqlite.rb:1:in `<top (required)>'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/ru
bygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/ru
bygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:249:in `block in tsk_require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:72:in `block in check_requiring_thread'
        from <internal:prelude>:10:in `synchronize'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:69:in `check_requiring_thread'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:249:in `tsk_require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/database/connecting.rb:25:in `adapter_class'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/database/connecting.rb:54:in `connect'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/se
quel-3.20.0/lib/sequel/core.rb:119:in `connect'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/schem
a.rb:39:in `indexes_individual'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/bin/schema:36:
in `<main>'
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       unexpected nil (OkJson::ParserError)
    Backtrace:   C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendor
/okjson.rb:82:in `valparse'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendor
/okjson.rb:64:in `textparse'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/vendor
/okjson.rb:43:in `decode'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/o
peration.rb:419:in `push_indexes'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/o
peration.rb:408:in `block in run'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/o
peration.rb:203:in `call'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/o
peration.rb:203:in `catch_errors'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/o
peration.rb:405:in `run'
                 C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/c
li.rb:171:in `clientxfer'
                 C:/Program Files (x86)/Heroku/lib/heroku/command/db.rb:192:in `t
aps_client'
                 C:/Program Files (x86)/Heroku/lib/heroku/command/db.rb:30:in `pu
sh'
                 C:/Program Files (x86)/Heroku/lib/heroku/command.rb:206:in `run'

                 C:/Program Files (x86)/Heroku/lib/heroku/cli.rb:28:in `start'
                 C:/Program Files (x86)/Heroku/bin/heroku:29:in `<main>'

    Command:     heroku db:push
    Version:     heroku/toolbelt/2.35.0 (i386-mingw32) ruby/1.9.3

C:\Users\Kibo\rubyProj\group9-backend>heroku logs
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/validations.rb:50:in `save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/persistence.rb:84:in `save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_retu
rning_status'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:19
2:in `transaction'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
2013-03-23T21:09:57+00:00 heroku[router]: at=info method=POST path=/admin/users h
ost=radiant-lake-1769.herokuapp.com fwd="174.91.15.111" dyno=web.1 queue=0 wait=2
ms connect=11ms service=3134ms status=500 bytes=643
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_sta
tus'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/tran
sactions.rb:270:in `rollback_active_record_state!'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/transactions.rb:258:in `save'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/resource_controller/callbacks.rb:28:in `block in save_res
ource'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/resource_controller/callbacks.rb:27:in `save_resource'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/resource_controller/callbacks.rb:22:in `block in create_r
esource'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/callbacks.rb:78:in `run_save_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/callbacks.rb:78:in `run_create_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/resource_controller/callbacks.rb:21:in `create_resource'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/inherited_r
esources-1.3.1/lib/inherited_resources/actions.rb:33:in `create'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activeadmin
-0.5.1/lib/active_admin/resource_controller/actions.rb:48:in `create'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:447:in `_run__1109873420186423599__proc
ess_action__1269607343105267632__callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_act
ion'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/abstract_controller/base.rb:121:in `process'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal.rb:203:in `dispatch'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_controller/metal.rb:246:in `block in action'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0
.4/lib/journey/router.rb:68:in `block in call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0
.4/lib/journey/router.rb:56:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.
1/lib/warden/manager.rb:35:in `block in call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0
.4/lib/journey/router.rb:56:in `each'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.
1/lib/warden/manager.rb:34:in `catch'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.
1/lib/warden/manager.rb:34:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/etag.rb:23:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/conditionalget.rb:35:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/session/abstract/id.rb:210:in `context'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/query_cache.rb:64:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/session/abstract/id.rb:205:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecor
d-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in
 `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:405:in `_run__381718374095792030__call_
_4177206034446482028__callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/rack/logger.rb:16:in `block in call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/methodoverride.rb:21:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/rack/logger.rb:32:in `call_app'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-
3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesuppo
rt-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/rack/logger.rb:16:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-
1.2/lib/rack/cache/context.rb:51:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/lock.rb:15:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/application.rb:223:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-
1.2/lib/rack/cache/context.rb:136:in `forward'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/handler/webrick.rb:59:in `service'
2013-03-23T21:09:57+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.
rb:183:in `block in start_thread'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-
1.2/lib/rack/cache/context.rb:155:in `invalidate'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/runtime.rb:17:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-
1.2/lib/rack/cache/context.rb:143:in `pass'
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-
1.2/lib/rack/cache/context.rb:71:in `call!'
2013-03-23T21:09:57+00:00 app[web.1]:
2013-03-23T21:09:57+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpser
ver.rb:111:in `service'
2013-03-23T21:09:57+00:00 app[web.1]: Processing by Admin::UsersController#create
 as HTML
2013-03-23T21:09:57+00:00 app[web.1]:   Parameters: {"utf8"=>"???", "authenticity
_token"=>"8idZkNz66cMpb85HVIgVQhtwGj8fZnHphVE2fBRCjXU=", "user"=>{"name"=>"Bojan"
, "email"=>"bdjordje@ryerson.ca", "password"=>"[FILTERED]", "password_confirmatio
n"=>"[FILTERED]"}, "commit"=>"Create User"}
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/engine.rb:479:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/de
vise-2.2.3/app/views/devise/mailer/confirmation_instructions.html.erb (0.4ms)
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/
lib/rack/content_length.rb:14:in `call'
2013-03-23T21:09:57+00:00 app[web.1]: Completed 500 Internal Server Error in 3119
ms
2013-03-23T21:09:57+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.
2.12/lib/rails/rack/log_tailer.rb:17:in `call'
2013-03-23T21:09:57+00:00 app[web.1]:
2013-03-23T21:09:57+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpser
ver.rb:70:in `run'

C:\Users\Kibo\rubyProj\group9-backend> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:34:33.023

```
_require.rb:36:inrequire': LoadError: cannot load such file -- sqlite3 (Sequel: :AdapterNotFound) from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/ru 
```

您是否将 gem 文件更改为

```
gem 'pg' 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:26:19.043

```
 Command:     heroku db:push 
```

不要使用`db:push`或`db:pull`。用于`pgbackups`导入/导出数据：[https ://devcenter.heroku.com/articles/heroku-postgres-import-export](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:01:12.050

弄清楚问题出在哪里。我必须在创建表的管理文件夹和定义属性的模型以及迁移文件中注释掉 user.rb 中的所有可确认属性，因为它试图在创建。一旦我这样做了，一切都很完美。

# mysql - MySQL - 如何在同一列上创建超过 1 个 where 子句？

> ID：15592221
> 
> 赞同：-1
> 
> 时间：2013-03-23T21:22:32.867
> 
> 标签：mysql

好吧，我试图在同一列上多次创建 where 子句，即：

```
 product
----------------------------------------
| product_id | product_name | group_id |
----------------------------------------

  group
-------------------------
| group_id | group_name |
-------------------------

  group_val
-------------------------
| group_id | product_id |
-------------------------

select b.product_name
from group_val a
inner join product b using(product_id) 
inner join group c using(group_id) 
where a.group_id in(10,15,88)
group by b.product_id; 
```

它与第 10 组、第 15 组和第 88 组中的产品相同，`or ... or`但我需要执行以下操作：我的意思是产品需要在这 3 组中。

IE：

```
 group_val
-------------------------
| group_id | product_id |
-------------------------
| 10       | 1          |
-------------------------
| 15       | 1          |
-------------------------
| 88       | 1          |
-------------------------
| 15       | 2          |
-------------------------
| 10       | 2          |
------------------------- 
```

在这种情况下，它只会退回产品`1`

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:32:54.300

您不需要表产品中的字段 group_id

```
SELECT p.product_name
  FROM product AS p
    INNER JOIN group_val AS g1 ON p.product_id = g1.product_id
    INNER JOIN group_val AS g2 ON p.product_id = g2.product_id
    INNER JOIN group_val AS g3 ON p.product_id = g3.product_id
  WHERE g1.group_id = 10 AND g2.group_id = 15 AND g3.group_id=88; 
```

[在SQL Fiddle](http://sqlfiddle.com/#!2/58b1d9/1)中尝试一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:27:15.283

只需使用您的示例查询，并假设您以编程方式或其他方式明确知道`group_id`您要匹配的 s 以及有多少：

```
select `product_name`, count(gv.`product_id`) as cnt
from `product` p
left join `group_val` gv
on p.`product_id` = gv.`product_id`
where gv.`group_id` in (10, 15, 88)
group by p.`product_id`
having cnt = 3; 
```

将选择所有这些组中的所有`product_id`s 。`group_val`

# java - 使用 fork 的 Java 并行进程

> ID：15592232
> 
> 赞同：3
> 
> 时间：2013-03-23T21:23:33.290
> 
> 标签：java, concurrency, process, parallel-processing, fork

我想知道是否可以在 Java 中创建多个进程（是的，进程，而不是线程）来执行一些并行工作。例如，要计算五个正方形的表面，但每个正方形的计算必须在单独的过程中完成。它应该使用进程的分叉，但我是 Java 并发的新手，所以我真的不知道如何做这些事情。如果您能向我解释这一点，或者将我引导到可以解释的地方或书籍，我将非常感激。我看过很多关于并发的 Java 书籍，但只针对线程而不是进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:38:17.260

您可以使用 ProcessBuilder 类或较旧的 Runtime.exec 方法启动进程。在 Unix 系统上，它们使用 fork 和 exec 函数。您可以在此处找到 ProcessBuilder 的文档，其中包括一个示例：[http ://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

可能您还想知道两个进程如何相互通信，以便恢复计算结果。有太多的选择可以在这里详细讨论。流行的是管道、TCP 套接字、内存映射文件和消息队列。

# javascript - jquery mouseenter 和 fadeTo

> ID：15592236
> 
> 赞同：0
> 
> 时间：2013-03-23T21:23:45.103
> 
> 标签：javascript, jquery, html, web

我希望一个 div 在鼠标进入时淡化为不透明度 1，当它离开时淡化为 0.5。这是我的代码：

```
 <script>
    $(document).ready(function(){
        $("#header").mouseenter(function(){
        $("#header").fadeTo('fast', 1);
        });
        $("#header").mouseleave(function(){
            $("#header").fadeTo('fast', 0.5);
    });

    }

    </script> 
```

HTML：

```
<body>

        <div id="header">
            <h1>Hello!</h1>
            <p>blah blah...</p>
        </div>

</body> 
```

我在正文中有一个 div，其中包含一个 h1 和一个 p。当我将鼠标移到它上面时没有任何反应。有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:29:09.047

您的错误缩进隐藏了语法错误：

```
$(document).ready(function(){
    $("#header").mouseenter(function(){
        $("#header").fadeTo('fast', 1);
    });
    $("#header").mouseleave(function(){
        $("#header").fadeTo('fast', 0.5);
    });
}); // <= missing parenthesis 
```

除此之外，[它有效](http://jsbin.com/awitob/3/edit)。请注意，对于所有颜色组合，0.5 并不是真正透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:29:12.790

css怎么样？

```
#header {
  opacity: .5;
  transition: opacity .3s ease-in-out;
}
#header:hover {
  opacity: 1;
} 
```

只需确保添加所有 css 供应商前缀。这比使用 jQuery IMO 更好。如果浏览器不支持`transition`或者`opacity`没什么大不了的，那就是“优雅降级”的全部内容。

# jquery - 从多个类中获取包含字符串和数字的类

> ID：15592238
> 
> 赞同：3
> 
> 时间：2013-03-23T21:23:49.967
> 
> 标签：jquery, regex, match

我有下面的图片，上面有多个类。单击时，我需要从所有类中获取字符串“wp-image-1228”（这四个数字总是不同的）。

我已经点击了，但我似乎无法使用 .match 获得我需要的东西。

```
<img class="size-post_gal wp-image-1228 aligncenter"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T21:51:44.757

如果您在 jQuery`.click()`处理程序中并且需要以下 ID `wp-image-`：

```
var id = $(this).prop('class').match(/wp-image-([0-9]+)/)[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:27:00.480

`$("img[class^='wp-image-']")`是一个有效的选择器。那就是你要找的东西？

此外，这是一个获取实际字符串的工作小提琴：http: [//jsfiddle.net/pFVyE/](http://jsfiddle.net/pFVyE/)

```
$(document).ready(function(){
$('img').filter(function() {
        var classes = $(this).attr('class').split(" ");                                
        for(i = 0; i < classes.length; i++){
            if(classes[i].match(/^wp-image-/)){
            alert(classes[i]); 
            }
        }    

    }); 
}); 
```

# c++ - 如何向后迭代多图以获得唯一键？

> ID：15592243
> 
> 赞同：1
> 
> 时间：2013-03-23T21:24:15.717
> 
> 标签：c++, iteration, multimap

我知道该怎么做：

```
for(auto it = mmap.begin(), end = mmap.end(); it != end; it = mmap.upper_bound(it->first)) 
```

但这不起作用：

```
for(auto it = mmap.rbegin(), end = mmap.rend(); it != end; it = mmap.lower_bound(it->first)) 
```

给予： `error: no match for 'operator=' in 'it = mmap.std::multimap<_Key, _Tp, _Compare, _Alloc>::lower_bound<unsigned int, long int, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, long int> > >((* & it.std::reverse_iterator<_Iterator>::operator-><std::_Rb_tree_iterator<std::pair<const unsigned int, long int> > >()->std::pair<const unsigned int, long int>::first))'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:34:59.840

A`std::multimap::iterator`不能直接转换为 a `std::reverse_iterator`。您需要使`std::lower_bound`基迭代器的结果为`it`：

```
typedef ... multimap_type;
typedef std::reverse_iterator<multimap_type::iterator> reverse_iterator;

for (auto it = mmap.rbegin(),
          end = mmap.rend();
     it != end;
     it = reverse_iterator(mmap.lower_bound(it->first)))
{
  // ...
} 
```

该表达式`reverse_iterator(mmap.lower_bound(it->first))`将构造 a`std::reverse_iterator`并将其结果`lower_bound`作为其基迭代器。

# delphi - TXMLNodeList 节点名称 #text

> ID：15592249
> 
> 赞同：3
> 
> 时间：2013-03-23T21:24:50.157
> 
> 标签：delphi

我尝试使用 IXMLDocument（某种 Lua 解释器）遍历 xml 节点和属性。ProcessNode 过程如

```
procedure ProcessNode(node: IXMLNode);
var
  cNode: IXMLNode;
  nList: IXMLNodeList;
  i: integer;
begin
  if node = nil then
    exit;
  PrintLocal(format('%s %s', [node.NodeName, GetEnumName(TypeInfo(TNodeType), Ord(node.NodeType))]));
  nList := node.AttributeNodes;
  for i := 0 to nList.Count - 1 do
    PrintLocal(format('%s %s %s', [nList[i].NodeName, node.Attributes[nList[i].NodeName], GetEnumName(TypeInfo(TNodeType), Ord(nList[i].NodeType))]));

  cNode := node.ChildNodes.First;
  while cNode <> nil do begin
    ProcessNode(cNode);
    cNode := cNode.NextSibling;
  end;
end; 
```

`<Content Items.Text="+\n-\n*\n/" ItemIndex="0" />`
当像我这样的 xml有正确的节点名称并且可以获取值时

```
Items.Text +\n-\n*\n/ ntAttribute
ItemIndex 0 ntAttribute 
```

但是当xml喜欢

```
<Items>
    <Text>+\n-\n*\n/</Text>
</Items>
<ItemIndex>0</ItemIndex> 
```

我有

```
Items ntElement
Text ntElement
#text ntText
ItemIndex ntElement
#text ntText 
```

当 NodeName 为“#text”时，如何从此类节点中检索值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:09:02.387

检查并从中`Node.NodeType`获取`ntText`价值`Node.Text`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T12:54:36.847

或者，您也可以使用`INode.IsTextElement`属性。

# ruby-on-rails - Ruby on Rails：如何在 json 类型下创建下载数据库的链接

> ID：15592251
> 
> 赞同：0
> 
> 时间：2013-03-23T21:25:14.707
> 
> 标签：ruby-on-rails

我认为我的标题很简单，并说明了我所需要的一切。它包含两个部分：

```
a. Convert database to json. I can do this part now.
b. Make download link, and download json I have recent created. 
```

我不能做 b 部分。我遇到两个问题：

> 1.  怎样才能使这个链接在世界之外？我已经在视图文件夹中创建了一个文件，例如“page.html.erb”，但是当我输入：“localhost/Group/page”时，我会收到“路由错误”。
> 2.  怎么办，当用户输入这个链接时，浏览器会自动下载我上面生成的文件。

我是 Ruby on Rails 的新手，所以这些问题对我来说并不明显。我有一些谷歌，但没有真正的教程可以帮助我。请告诉我怎么做。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:12:01.303

响应 json 的示例 Rails 操作

```
class UsersController < ApplicationController
  respond_to :json

  def index
    @users = User.all
    respond_with @users
  end
end 
```

在这种情况下，您可以在浏览器 /users 中键入路由并附加 .json，这样 /user.json 将显示 json 中的所有用户。

您可以通过简单地说 .to_json 来制作一些 json。示例：@user.to_json。这适用于简单的情况，但如果您有复杂的需求，那么您应该查看[https://github.com/rails/jbuilder](https://github.com/rails/jbuilder)

# delphi - 简单的 Delphi DBcharting

> ID：15592253
> 
> 赞同：2
> 
> 时间：2013-03-23T21:25:20.817
> 
> 标签：delphi

所以，我遇到的问题是我在图表上为每个学生显示了两个条形图，我只想要其中一个。不过他们的身高是正确的，所以这很好。这是我的 Delphi 源代码；

```
strlstField := TStringList.Create();
ADOQGetResults.SQL.clear;
ADOQGetResults.SQL.Add(
                      'SELECT Results.StudentID, SUM(Results.Rawmark) as TRM, StudentInfo.Fname '+
                      'FROM (StudentInfo INNER JOIN Results ON StudentInfo.StudentID = Results.StudentID) '+
                      'WHERE (((StudentInfo.StudentID)=Results.StudentID))  AND Results.TestID =12 '+
                      'GROUP BY StudentInfo.Fname, Results.StudentID'
                      );
ADOQGetResults.Active := True;
ADOQGetResults.Open;

DBChart1.Title.Text.Clear;
DBChart1.Title.Text.Add('Class leaderboard');
DBChart1.Title.Font.Size := 15;
DBChart1.LeftAxis.Title.Font.Size := 12;
DBChart1.LeftAxis.Title.Caption := 'Total marks';
DBChart1.BottomAxis.Title.Font.Size := 12;
DBChart1.BottomAxis.Title.Caption := 'Student';

//Charting Series
//To Remove Old Series
for intCnt := DBChart1.SeriesCount -1 downto 0 do
    DBChart1.Series[intCnt].Free;
//To Add New Series
for intCnt := 1 to ADOQGetResults.FieldCount - 1 do
begin
   strlstField.Add(ADOQGetResults.FieldList[intCnt].FieldName);
   DBChart1.AddSeries(TBarSeries.Create(nil));
end;
//To set source for Series
for intCnt:= 0 to DBChart1.SeriesCount -1 do
begin
   with DBChart1 do begin
      Series[intCnt].Clear;
      Series[intCnt].Title := strlstField[intCnt];
      Series[intCnt].ParentChart := DBChart1;
      Series[intCnt].DataSource := ADOQGetResults;
      Series[intCnt].XLabelsSource := 'Fname';
      Series[intCnt].YValues.ValueSource := 'TRM';
   end;
end; 
```

我整天都在努力解决问题所在，所以如果有人能提供帮助，我将不胜感激！这是图表现在的样子； [http://oi48.tinypic.com/6qelba.jpg](http://oi48.tinypic.com/6qelba.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:47:39.020

1.  为什么要遍历结果中的每个字段（在查询中返回 3 个字段）并在结果中添加一个系列 PER 字段？几乎就像您认为字段数等于您的行数或其他内容。其次，我冒昧地猜测您的查询中的某些内容加上您的数据（我们看不到）可能会导致您在查询结果中获得比预期更多的行。

2.  当您的查询总是返回 3 个字段、1 个字段未绘制图表、1 个字段是系列标签源且 1 个字段是系列值源时，为什么要销毁并重新添加系列？只需在设计时在您的 dfm 中静态创建一个系列，然后忘记所有这些疯狂的运行时内容。您是否尝试过双击 dbchart 并在其中添加 ONE BarChart 系列？

3.  这有效，而且代码少得多。顺便说一句，您不需要打开数据集两次。请注意，这里我使用的是 Delphi 自带的 DBDEMOS.mdb 数据库，这样大家就可以一起玩了。添加一个 db 图表并在 DESIGNTIME 添加一个条形图系列。根据需要进行配置。使用此代码。下面的数据集是一个 TADODataset。

-

```
dataset.CommandText :=    'select EmpNo,FirstName,Salary from employee';

dataset.Active := True;

DBChart1.Title.Text.Clear;
DBChart1.Title.Text.Add('Class leaderboard');
DBChart1.Title.Font.Size := 15;
DBChart1.LeftAxis.Title.Font.Size := 12;
DBChart1.LeftAxis.Title.Caption := 'Total marks';
DBChart1.BottomAxis.Title.Font.Size := 12;
DBChart1.BottomAxis.Title.Caption := 'Student';

if DBChart1.SeriesCount<1 then
begin
  raise Exception.Create('Add series to your chart in the dfm ONCE.');
end;

//To set source for Series
   with DBChart1 do begin
      Series[0].Title :=  'Test';
      Series[0].DataSource := dataset;
      Series[0].XLabelsSource := 'FirstName';
      Series[0].YValues.ValueSource := 'Salary';
   end; 
```

请注意，这仍然比您绝对必须编写的代码多。如果不是全部在 dfm（表单设计器）中，您可以完成大部分操作。

# logic - Bernie-Schonfinkel 类公式到底是什么？

> ID：15592256
> 
> 赞同：3
> 
> 时间：2013-03-23T21:25:53.003
> 
> 标签：logic, z3, smt

我有一个简单的提议。我想断言严格排序的整数列表中的第一个元素是列表中所有元素的最小值。我定义排序列表的方式是定义一个局部不变量，即每个元素都小于其下一个元素。我在 Z3 中以以下方式制定了我的主张 -

* * *

```
(set-option :mbqi true)
(set-option :model-compact true)

(declare-fun S (Int) Bool)
(declare-fun preceeds (Int Int) Bool)
(declare-fun occurs-before (Int Int) Bool)

;; preceeds is anti-reflexive
(assert (forall ((x Int)) (=> (S x) (not (preceeds x x)))))

;; preceeds is monotonic
(assert (forall ((x Int) (y Int)) (=> (and (S x) (and (S y) (and (preceeds x y))))
                                       (not (preceeds y x)))))
;; preceeds is a function
(assert (forall ((x Int) (y Int) (z Int)) (=> (and (S x) (and (S y) (and (S z) (and (preceeds x y)
                                             (preceeds x z)))))
                                             (= y z))))
;; preceeds induces local order
(assert (forall ((x Int) (y Int)) (=> (and (S x) (and (S y) (preceeds x y)))
                                       (< x y))))

;; preceeds implies occurs-before
(assert (forall ((x Int) (y Int)) (=> (and (and (S x) (S y)) (preceeds x y))
                                             (occurs-before x y))))

;;occurs-before is transitivie
(assert (forall ((x Int)(y Int)(z Int))
  (=> (and (S x) (and (S y) (and (S z)(and (occurs-before x y) (occurs-before y z)))))
    (occurs-before x z))
))             

(declare-const h Int)
(assert (S h))
(assert (forall ((x Int)) (=> (S x) (occurs-before h x))))
(assert (forall ((y Int)) (=> (S y) (< h y))))
(check-sat)
(get-model) 
```

* * *

首先，我想确切地知道哪类公式是有效命题的。我的断言可以归类为有效命题吗？其次，我上面显示的公式是否正确？第三，我应该在 Z3 中设置哪些选项以使其仅在有效命题时才接受量化公式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:42:59.220

当公式仅包含谓词、常数、全称量词并且不使用理论（例如算术）时，我们说公式在有效命题片段中。找到表示公式具有`Exists* Forall*`量词前缀并且仅使用谓词的替代定义是很常见的。这些定义是等价的，因为存在量词可以使用新的未解释常量来消除。有关更多信息，请参见[此处](http://research.microsoft.com/pubs/76532/tr-2008-181.pdf)。

您的断言不在有效命题片段中，因为您使用算术。Z3 可以决定其他片段。[Z3 教程](http://rise4fun.com/Z3/tutorial/)有一个可以由 Z3 决定的片段列表。您的断言不在列出的任何片段中，但 Z3 应该能够毫无问题地处理它们和其他类似的断言。

关于你的断言的正确性，以下两个断言不能满足。

```
(assert (S h))
(assert (forall ((y Int)) (=> (S y) (< h y)))) 
```

如果我们用 实例化量词，`h`我们可以推断`(< h h)`哪个是假的。我明白你在做什么。你也可以考虑下面的简单编码（可能太简单了）。它也可以[在这里](http://rise4fun.com/Z3/qFWB)在线获得。

```
;; Encode a 'list' as a "mapping" from position to value
(declare-fun list (Int) Int)

;; Asserting that the list is sorted
(assert (forall ((i Int) (j Int)) (=> (<= i j) (<= (list i) (list j)))))

;; Now, we prove that for every i >= 0 the element at position 0 is less than equal to element at position i
;; That is, we show that the negation is unsatisfiable with the previous assertion
(assert (not (forall ((i Int)) (=> (>= i 0) (<= (list 0) (list i))))))

(check-sat) 
```

最后，Z3 没有任何命令行来检查公式是否在有效命题片段中。

# java - 通配符接受任何类型的接口

> ID：15592258
> 
> 赞同：1
> 
> 时间：2013-03-23T21:26:05.830
> 
> 标签：java, generics

我正在尝试使用泛型来接受任何实现`Client`接口的对象，但我似乎无法做到正确。

```
public interface Client {
  public void makeMove();
}

public MyClient implements Client {
  public MyClient(Server server) {
    server.connectClient(this);
  }
} 
```

我上面得到的错误是：`The method connectClient(Class<? extends FanoronaClient>) in the type Server is not applicable for the arguments (GUIClient)`

具有泛型的服务器：

```
public class Server {
  private Class<? extends Client> client_;

  public void connectClient(Class<? extends Client> client) {
    client_ = client;
    client_.makeMove(); // type error here
  }
} 
```

这里的错误是`The method makeMove() is undefined for the type Class<capture#7-of ? extends Client>`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:32:01.480

您正在尝试调用[`java.lang.Class`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)不存在的类上的方法。您真正想要的是要传递给您的方法的类/接口的*实现。*

您的`connetClient`方法应该看起来像这样：

```
public void connectClient(Client client) {
    client.makeMove(); // no more type error
} 
```

当然，如果你想在你的类中保留对 this 的引用，你必须将类的`_client`成员`Server`也更改为 type `Client`。

我认为您根本不想在此示例中使用泛型...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:35:05.637

试试这个代码：

```
public class Server {
      private Class<? extends Client> client_;

      public void connectClient(Class<? extends Client> client) {
        client_ = client;
        client.newInstance().makeMove(); // no error here 
      }
    } 
```

# javascript - 切换伪类：在特定 div 之后

> ID：15592260
> 
> 赞同：1
> 
> 时间：2013-03-23T21:26:20.940
> 
> 标签：javascript, jquery, css, class, html

如何启用或禁用（或切换）“之后”伪类？

我试图想出一些类似的东西：

```
$('.card').click(function(){

    if(pick1) {
        pick2 = $(this).css('background-color');
        id2 = $(this).attr('id');
        >>> add display:none to .card:after for the clicked div <<<

        if(pick1 == pick2 && id1!=id2) alert('Correct');
            else {
                alert('Incorrect');
                >>> remove display:none from .card:after on clicked divs <<<
            }

        pick1 = false;
        pick2 = false;
    } else {
        pick1 = $(this).css('background-color');
        id1 = $(this).attr('id');
        >>> add display:none to .card:after for the clicked div <<<  
    }
}); 
```

我的项目在这里：http: [//jsfiddle.net/94jerdaw/29TCZ/3/](http://jsfiddle.net/94jerdaw/29TCZ/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:30:02.343

为什么不向规则添加一个额外的类？像这样

```
.hidden.card:after{
  display:none
} 
```

然后代码可以是`$().addClass("hidden")`或`$().removeClass("hidden")`

```
if(pick1) {
    pick2 = $(this).css('background-color');
    id2 = $(this).attr('id');
    $(this).addClass("hidden");

    if(pick1 == pick2 && id1!=id2) alert('Correct');
        else {
            alert('Incorrect');
            $(this).removeClass("hidden");
        }

    pick1 = false;
    pick2 = false;
} else {
    pick1 = $(this).css('background-color');
    id1 = $(this).attr('id');
    $(this).addClass("hidden"); 
} 
```

# c++ - STL的第一个实现

> ID：15592262
> 
> 赞同：4
> 
> 时间：2013-03-23T21:26:29.717
> 
> 标签：c++, stl

我对看到 C++ 标准模板库的第一个实现非常感兴趣。好吧，这是出于历史原因。我很想知道图书馆是如何随着时间的推移而发展的。

什么是正式可用的 STL 的第一个版本（实现）？何时何地出版？我怎么才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:29:40.893

您可以在 Stepanov 为收集他的论文而设立的网站上了解他对泛型编程的思考：

[http://www.stepanovpapers.com/](http://www.stepanovpapers.com/)

# django - 在 pip 上安装的应用程序如何真正起作用？

> ID：15592265
> 
> 赞同：4
> 
> 时间：2013-03-23T21:26:59.193
> 
> 标签：django, pip, django-apps

我是 django 的新手，我正在寻找一个所见即所得的东西，我喜欢 tinymce。我在 pip 命令行上安装，我希望在我的文件夹项目中创建一个文件夹，就像一个新应用程序一样。它没有创建任何文件夹，但我做了接下来的步骤，令我惊讶的是，该应用程序在我的项目中运行良好。我想知道这个应用程序在我的项目中是如何工作的，以防我要部署这个项目以及如何部署安装在 pip 或类似的应用程序。我的英语不好，但我希望这很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:30:49.950

应用程序或库直接复制到您的 python 目录中名为`Lib/site-packages`. 这个确切的位置取决于您的操作系统，您通常可以在下面找到您新安装的软件包

**对于 Windows**

```
C:/PythonXX/Lib/site-packages/ 
```

**对于 Linux**

```
/usr/local/lib/pythonX.Y/site-packages 
```

当您运行 python 脚本时，`Python`会自动将这些文件夹作为可用资源包含在内，并且当您将例如添加`import X`到代码中时，它会检查是否`X`列出。

[您可以在此处](http://docs.python.org/2/library/site.html)获得有关该主题的更多信息。

# ruby - 如何理解 Ruby 中的发送者和接收者？

> ID：15592268
> 
> 赞同：7
> 
> 时间：2013-03-23T21:27:13.477
> 
> 标签：ruby

我发现很难理解 Ruby 中发送者和接收者的实际含义。它们一般是什么意思？到目前为止，我只是将它们理解为方法调用和获取其返回值的方法。但是，我知道我的理解还远远不够。谁能给我一个关于 Ruby 中发送者和接收者的具体解释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T23:09:03.483

面向对象的一个​​核心概念是消息传递和早期的概念化，它大量借鉴了计算的 Actor 模型。Alan Kay，创造了面向对象一词并发明了最早的面向对象语言 SmallTalk 之一的人，对[使用一个将重点放在对象而不是消息上的术语表示遗憾，他认为这是一个更强大的想法](http://c2.com/cgi/wiki?AlanKayOnMessaging)。

在谈论消息时，自然会有消息的“发送者”和“接收者”。发送者是调用方法的对象，接收者是调用其方法的对象。在 Ruby 中，如果调用方法而不显式命名对象，则会将方法名称及其参数作为消息发送给默认接收者`self`。

在 OO 中，“拨打电话”、“调用方法”和“发送消息”是等价的概念。类似地，“被调用”、“调用方法”和“接收消息”是等价的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T01:44:37.953

当你编写一个 Ruby 程序并告诉一个字符串自己反转时，你是发送者，而字符串对象是接收者。例如，

```
"this is a string".reverse
"this is a string".send(:reverse) # equivalent 
```

作为编码人员，您正在做的是向该字符串对象发送一条消息 :reverse，该字符串对象是该消息的接收者，输出将是

```
=> "gnirts a si siht" 
```

这是返回值。

您可以查询一个对象是否可以处理您要发送的消息：

```
"this is a string".respond_to?(:reverse)
=> true
Hash.new.respond_to?(:reverse)
=> false 
```

这完全是玩 irb 的最简单的例子。当您编写可能与其他 API 交互的复杂程序时，例如 Twitter（举一个常见的例子），那么您将实例化一个客户端对象，您可以向该对象发送消息，例如“获取包含此主题标签的所有推文”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-23T07:12:58.510

# 举例说明：

考虑一下：

```
a = "test123"

a.reverse # => '321tset' 
```

[![用图表总结](../Images/5fad181357430da04238810b3b5f3288.png)](https://i.stack.imgur.com/uOGv0.png)

该`reverse`方法在 上“调用” `a`。

## 讯息是什么？

*   “反向”是**消息**。您可以将消息视为基本方法。

## 什么是接收器？

*   字符串`a`是消息的**接收者**。

## 发件人是什么？

*   发送者是调用所有这些的对象。在这种情况下，对象是`self`，即`main`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-25T23:15:22.820

“1234”.reverse

*   消息是“reverse”，它应该对应于一个称为 reverse 的方法。换句话说，您可以将方法视为“消息”。
*   接收者是字符串对象“1234”
*   发送者是调用该方法的对象。在这种情况下，它应该是（应该是自我）主要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T22:04:53.363

这些术语来自 Smalltalk 教授的面向对象的基本概念。记住：一切都是对象。对象可以交互的唯一方式是通过相互发送消息。

方便的说法`obj.do_somthing`其实就是当前`self`发送消息“hey obj, please do_something”。obj 的 do_something 方法的返回值可以看作是该消息的答案。

```
class A
  def foo(obj)
    obj.send(:object_id) 
  end
end
a = A.new
b = Object.new
a.foo(b)
=> 4232 
```

在这个例子`a`中是“发送者”并且`b`是“接收者”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T21:50:18.763

我的猜测是您将“呼叫者”与“发送者”混淆了。我不知道在这种情况下“发件人”是什么。

一个方法可以有一个嵌入的方法：

```
def foo argument
  object.bar(argument)
end 
```

在上述情况下，`foo`是 的调用者`bar`。`object`是 的接收者`bar`。

# php - 在 foreach PHP 内的 while 循环内运行 if 条件 = 无限加载时间

> ID：15592276
> 
> 赞同：-1
> 
> 时间：2013-03-23T21:28:07.807
> 
> 标签：php, loops

我有点问题...

我想用 $_GET 获取一个数组，然后将输出值与从 MySQL 数据库中获取的数组中的行进行匹配。我想在 while 循环或 foreach 循环中执行此操作，因为一旦找到匹配项，我必须对匹配的行做一些特定的事情：然后应该使用这些行中的其他列来设置一些变量。这是代码：

```
<?php   
$wineneeds=mysql_query("SELECT * from wineneeds");
$needarray=mysql_fetch_array($wineneeds);

foreach($_GET['Need'] as $Needs)
{
    while($needarray)
    {
        if($needarray['Needset']=="$Needs")
            {
                $sweet=$needarray['Sweet'];
            }
        else{}
    }
} 
```

它不会错误我的页面，除非我有无限的加载时间......

我根本找不到错误。

请记住，我是 PHP 新手，并且想坚持使用这样的基本内容。在此先感谢 - 亚历克斯 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:31:32.670

您不是通过简单地调用 while 来迭代数组。

我建议您反转循环并使用 mysql_fetch_assoc ，例如：

```
while ($row = mysql_fetch_assoc($wineneeds)) {
    foreach ($_GET['Need'] as $Needs) {
        if ($row['Needset'] == $Needs) {
            $sweet=$row['Sweet'];
        }
    }
} 
```

`mysql_fetch_row`并将`mysql_fetch_assoc`返回单行作为列数组。您需要在 while 循环中调用它以获取整个行集。如果您只调用一次，那么您将返回一行，当您检查该行是否为真时，它将始终为真，while 循环将永远运行。上面的解决方案将解决问题。

# android - 线性布局被推离屏幕

> ID：15592278
> 
> 赞同：3
> 
> 时间：2013-03-23T21:28:18.877
> 
> 标签：android, android-linearlayout, android-framelayout

所以对于我的页面横向布局，我想要一种水平布局。但是，`FrameLayout`即使`ListView`它设置为`android:layout_width="match_parent"`. 这是我的意思的屏幕截图：

[![ss](../Images/8dca179da923ecbf74dee0cb422a8dc6.png)](https://i.stack.imgur.com/5as4A.png)

`FrameLayout`当它设置为匹配父级时，蓝线是去向的轮廓。

这是我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/contactlist"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:background="@drawable/brushed_metal_background_dark"
    android:orientation="vertical"
    tools:context=".ContactList" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/headerbackground"
        android:orientation="horizontal" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:scaleType="center"
            android:src="@drawable/homeheader7" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:paddingRight="3sp"
            android:text="@string/version"
            android:textColor="#FFFFFF"
            android:textStyle="italic" >
        </TextView>

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:onClick="setOptions"
            android:src="@drawable/menu" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/report"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@null"
                android:gravity="left"
                android:onClick="report"
                android:scaleType="center"
                android:src="@drawable/submit_report" />
        </LinearLayout>

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:adjustViewBounds="true"
            android:paddingLeft="3dp"
            android:paddingRight="3dp"
            android:scaleType="center"
            android:src="@drawable/divider_ver" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:scaleType="center"
                android:src="@drawable/schoolfeed2" />

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="100"
                android:background="@drawable/background_overlay_dark"
                android:duplicateParentState="false"
                android:fadingEdge="horizontal"
                android:paddingBottom="9dp"
                android:paddingLeft="16dp"
                android:paddingRight="10dp"
                android:paddingTop="7dp" >

                <ListView
                    android:id="@+id/schoolFeed"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:dividerHeight="2dp"
                    android:footerDividersEnabled="false"
                    android:headerDividersEnabled="true"
                    android:scrollbarDefaultDelayBeforeFade="50000"
                    android:scrollbarStyle="outsideInset"
                    android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb"
                    android:scrollbarTrackVertical="@drawable/scrollbar_vertical_track" >
                </ListView>
            </FrameLayout>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

任何帮助表示赞赏！谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:56:39.650

我建议您不要使用 match_parent，而是使用 wrap_content，因为实际上，发生的情况是 framelayout 具有相同的屏幕宽度，因此，由于它不在屏幕的左侧，它会熄灭。

# ruby-on-rails-3 - 应该 rspec 匹配器 ensure_inclusion_of

> ID：15592281
> 
> 赞同：4
> 
> 时间：2013-03-23T21:28:39.043
> 
> 标签：ruby-on-rails-3, testing, rspec, shoulda

我有一个使用 shoulda 的测试，但由于我不明白的原因而失败。知道解决方法是什么吗？为了测试目的，我对数组进行了硬编码。

我所有其他基于应该匹配器的测试都运行良好。

验证

```
validates_inclusion_of :status, :in => ["Active", "Closed"] 
```

测试：

```
it { should ensure_inclusion_of(:status).in_array(["Active", "Closed"]) } 
```

失败

```
Failure/Error: it { should ensure_inclusion_of(:status).in_array(["Active", "Closed"]) }
   ["Active", "Closed"] doesn't match array in validation 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:19:19.370

查看该匹配器的源代码：

[https://github.com/thoughtbot/should-matchers/blob/master/lib/should/matchers/active_model/ensure_inclusion_of_matcher.rb#L88](https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_model/ensure_inclusion_of_matcher.rb#L88)

您是否有另一个验证可以防止 nil 或空白值`:status`？

# authentication - OpenId 的安全性如何？

> ID：15592286
> 
> 赞同：1
> 
> 时间：2013-03-23T21:29:09.440
> 
> 标签：authentication, openid

我在另一个 SO[线程](https://stackoverflow.com/questions/353880/how-does-openid-authentication-work)中找到了这个：

脚步：

1.  用户连接到启用 OpenID 的网站。
2.  用户输入凭证信息。
3.  使用 BASE64 进行 POST（网站到提供商）
4.  构建了一个答案（包含过期）
5.  该网站将用户重定向到提供商以登录。
6.  **用户输入密码并提交。**
7.  **验证完成。**
8.  **登录！**

步骤 6-8 是如何保护的？在我看来，客户端正在向提供者进行身份验证并将结果报告给我们的服务器。

是什么阻止客户端伪造身份验证结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:44:59.717

首先，验证结果由提供者加密签名。还有其他安全措施可以防止其他攻击。

引用[OpenID 2.0 规范，第 11 节](http://openid.net/specs/openid-authentication-2_0.html#verification)：

> 当依赖方收到一个肯定的断言时，它必须在接受断言之前验证以下内容：
> 
> *   “openid.return_to”的值与当前请求的 URL 匹配（[第 11.1 节](http://openid.net/specs/openid-authentication-2_0.html#verify_return_to)）
> *   发现的信息与断言中的信息相匹配（[第 11.2 节](http://openid.net/specs/openid-authentication-2_0.html#verify_disco)）
> *   尚未从该 OP 接受具有相同“openid.response_nonce”值的断言（[第 11.3 节](http://openid.net/specs/openid-authentication-2_0.html#verify_nonce)）
> *   断言上的签名是有效的，所有需要签名的字段都已签名（[第 11.4 节](http://openid.net/specs/openid-authentication-2_0.html#verifying_signatures)）

客户端当然可以发送虚假的身份验证结果，但不会通过验证。

# android - GL_INVALID_FRAMEBUFFER_OPERATION Android NDK GL FrameBuffer 和 glReadPixels 返回 0 0 0 0

> ID：15592288
> 
> 赞同：1
> 
> 时间：2013-03-23T21:29:14.163
> 
> 标签：android, glreadpixels

我的 C++ 代码是为 iOS 设计的，现在我将它移植到 NDK 中，只做很少的修改。

我绑定帧缓冲区并调用

```
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, pixels); 
```

然后我像这样绑定主帧缓冲区

```
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

`glGetError()`返回`GL_INVALID_FRAMEBUFFER_OPERATION`

我可以在我的帧缓冲区中绘制并使用它的纹理在主帧缓冲区中绘制它。但是当我打电话时`glReadPixels`，我得到零

该代码在 iOS 中运行，大多数在 Android 中运行，除了`glReadPixels`

`glCheckFramebufferStatus(GL_FRAMEBUFFER)`返回 GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT 0x8CD7

--

我将考虑示例代码，它将为我提供来自帧缓冲区或纹理的像素数据，我可以将其保存到文件中`answer`

现在我可以用附加的纹理绘制到缓冲区，我可以使用该纹理在主缓冲区上绘制。但我无法从帧缓冲区/纹理中获取像素以保存到文件或发布到 facebook。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:00:17.660

我已经能够从修改 NDK 示例“GL2JNIActivity”的帧缓冲区执行 glReadPixels。

我刚刚更改了 gl_code.cpp，我在其中添加了一个初始化函数：

```
char *pixel = NULL;
GLuint fbuffer, rbuffers[2];
int width, height;
bool setupMyStuff(int w, int h) {
     // Allocate the memory
     if(pixel != NULL) free(pixel);
     pixel = (char *) calloc(w * h * 4, sizeof(char)); //4 components
     if(pixel == NULL)  {
                  LOGE("memory not allocated!");
                       return false;
                       }

                       // Create and bind the framebuffer
    glGenFramebuffers(1, &fbuffer);
    checkGlError("glGenFramebuffer");

    glBindFramebuffer(GL_FRAMEBUFFER, fbuffer);
    checkGlError("glBindFramebuffer");

    glGenRenderbuffers(2, rbuffers);
    checkGlError("glGenRenderbuffers");

    glBindRenderbuffer(GL_RENDERBUFFER, rbuffers[0]);
    checkGlError("glGenFramebuffer[color]");

    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGB565, w, h);
    checkGlError("glGenFramebuffer[color]");

    glBindRenderbuffer(GL_RENDERBUFFER, rbuffers[1]);
    checkGlError("glGenFramebuffer[depth]");

    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, w, h);
    checkGlError("glGenFramebuffer[depth]");

    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbuffers[0]);
    checkGlError("glGenFramebuffer[color]");
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,  GL_RENDERBUFFER, rbuffers[1]);
    checkGlError("glGenFramebuffer[depth]");

    if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
                                                    LOGE("Framebuffer not complete");
                                                    return false;
    }

    // Turn this on to confront the results in pixels when the fb is active with the ones obtained from the screen
    if(false) {
                  glBindFramebuffer(GL_FRAMEBUFFER, 0);
        checkGlError("glBindFramebuffer");
    }

    width = w;
    height = h;

    return true;
} 
```

它只是初始化帧缓冲区并为输出分配空间，我在最后调用

```
bool setupGraphics(int w, int h); 
```

和一个块将输出保存在我的像素数组中（我显然在

```
 checkGlError("glDrawArrays"); 
```

renderFrame() 中的语句：

```
{ 
// save the output of glReadPixels somewhere... I'm a noob about JNI however, so I leave this part as an exercise for the reader ;-)
glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, pixel);
checkGlError("glReadPixel(0, 0, w, h, GL_RGB, GL_UNSIGNED_BYTE, pixel)");
int end = width * height * 4 - 1;
// This function returns the same results regardless of where the data comes from (screen or fbo)
LOGI("glReadPixel => (%hhu,%hhu,%hhu,%hhu),(%hhu,%hhu,%hhu,%hhu),(%hhu,%hhu,%hhu,%hhu),..., (%hhu, %hhu, %hhu, %hhu)",
      pixel[0], pixel[1], pixel[2], pixel[3],
      pixel[4], pixel[5], pixel[6], pixel[7],
      pixel[8], pixel[9], pixel[10], pixel[11],
      pixel[end - 3], pixel[end - 2], pixel[end - 1], pixel[end]);
} 
```

无论您是在帧缓冲区还是在屏幕上绘制，logcat 中的结果都是相同的：

```
I/libgl2jni( 5246): glReadPixel => (0,4,0,255),(8,4,8,255),(0,4,0,255),..., (0, 4, 0, 255)
I/libgl2jni( 5246): glReadPixel => (8,4,8,255),(8,8,8,255),(0,4,0,255),..., (8, 8, 8, 255)
I/libgl2jni( 5246): glReadPixel => (8,8,8,255),(8,12,8,255),(8,8,8,255),..., (8, 8, 8, 255)
I/libgl2jni( 5246): glReadPixel => (8,12,8,255),(16,12,16,255),(8,12,8,255),..., (8, 12, 8, 255)
I/libgl2jni( 5246): glReadPixel => (16,12,16,255),(16,16,16,255),(8,12,8,255),..., (16, 16, 16, 255)
[...] 
```

在 Froyo（手机）和 4.0.3 平板电脑上进行了测试。

您可以在原始 NDK 示例 (GL2JNIActivity) 中找到所有其他详细信息。

希望这可以帮助

**编辑：**还要确保检查：

[Android NDK glReadPixels() 来自屏幕外缓冲区](https://stackoverflow.com/questions/8761231/android-ndk-glreadpixels-from-offscreen-buffer?rq=1)

海报似乎有你相同的症状（并解决了从正确的线程调用 glReadPixels 的问题）。

# c - 如何使用 FILE* 参数对 C 函数进行单元测试

> ID：15592291
> 
> 赞同：5
> 
> 时间：2013-03-23T21:29:29.453
> 
> 标签：c, unit-testing, file-io

我有一个`uint8_t command_read(const FILE* const in)`从`in`. 我想为该功能编写一个单元测试。是否可以为测试创建一个`FILE*`内存，因为我想避免与文件系统交互？如果没有，有什么替代方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T21:35:05.870

> 是否可以在内存中创建一个 FILE* 用于测试？

当然。对于写作：

```
char *buf;
size_t sz;
FILE *f = open_memstream(&buf, &sz);

// do stuff with `f`

fclose(f);
// here you can access the contents of `f` using `buf` and `sz`

free(buf); // when done 
```

这是POSIX。[文档。](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open_memstream.html)

阅读：

```
char buf[] = "Hello world! This is not a file, it just pretends to be one.";
FILE *f = fmemopen(buf, sizeof(buf), "r");
// read from `f`, then
fclose(f); 
```

[这也是 POSIX。](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)

**边注：**

> 我想避免测试必须与文件系统交互。

为什么？

# jquery - 如何使用 jQuery 从 HTML 选择框中选择一个选项？

> ID：15592298
> 
> 赞同：0
> 
> 时间：2013-03-23T21:29:51.733
> 
> 标签：jquery, html, jquery-selectors, html-select

如何使用 jQuery 从 HTML 选择框中选择一个选项？我正在使用选择框（单选），而不是下拉菜单。我需要获取选择值和文本。

这是我的代码，但它缺少 jQuery 函数：

```
<html>
  <head>
    <script type='text/javascript'>
      val choiceVal = "None!";
      val choiceText = "None!";
      //So what is the function?
    </script>
  </head>
  <body>
    <select id="myListChoices">
      <option value="1">Choice 1</option>
      <option value="2">Choice 2</option>
      <option value="3">Choice 3</option>
    </select>
  </body>
</html> 
```

更多说明：请注意，我的问题的目标是编写一个处理程序，该处理程序将在单击列表项时返回选定的值和/或文本。因此，例如，如果用户单击页面中的“选择 2”，jQuery 应该以某种方式（如何？）触发警报或使用所选值/文本填充变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:41:04.960

您捕获`change`选择列表的事件。

```
$('select').on('change', function () {
    alert($('option:selected').val() +' : '+ $('option:selected').text());
}); 
```

在上面，我们根据您的需要返回选定的选项 val() 和 text()。

# python - 在 Python 中生成唯一排列

> ID：15592299
> 
> 赞同：3
> 
> 时间：2013-03-23T21:29:56.347
> 
> 标签：python

我正在寻找列表的独特排列，x = [“$5”、“$10”、“$10”、“TAX”、“$5”、“20%”、“BOGO”、“BOGO”、“TAX” "] 9 人一组

我目前正在做的是

```
from itertools import permutations
x = ["$5", "$10", "$10", "TAX", "$5", "20%", "BOGO", "BOGO", "TAX"]
combos = []
for i in permutations(x, 9):
    if i not in combos:
        combos.append(i)
print combos 
```

但是，这需要很长时间才能运行，我想知道是否有人可以给我一个更有效的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T21:33:05.773

`if i not in combos:`将需要很长时间，因为列表中的成员资格测试是（最坏情况）O（N） - 它必须扫描每个元素。您可以使用 a`set`代替：

```
>>> from itertools import permutations
>>> x = ["$5", "$10", "$10", "TAX", "$5", "20%", "BOGO", "BOGO", "TAX", "BOGO"]
>>> %time p = set(permutations(x, 9))
CPU times: user 0.88 s, sys: 0.01 s, total: 0.90 s
Wall time: 0.90 s
>>> len(p)
75600 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:44:17.160

关于使用快速集合结构的建议很好，但如果您不首先生成不需要的项目，您将获得最佳结果。让我们做一个稍微不同的表示`x`：

```
from collections import OrderedDict
x = OrderedDict([("$5", 2), ("$10", 2), ("TAX", 2), ("20%", 1), ("BOGO", 3)]) 
```

然后，以下函数应该为您提供非重复排列：

```
from copy import copy
def permutations_unique(x, curr_list=[]):
    if not x:
        yield curr_list
        return
    last_item = None
    if curr_list:
        last_item = curr_list[-1]
    for item in x:
        if item != last_item:
            for j in range(1, x[item] + 1):
                xchild = copy(x)
                xchild[item] -= j
                if xchild[item] == 0:
                    del xchild[item]
                for y in permutations_unique(xchild, curr_list + [item] * j):
                    yield y 
```

这是一个递归。在每个步骤中，我们选择项目*和*重复次数。另外，我们避免在递归的下一个级别选择相同的项目。

对于您的问题实例，此代码比使用`set`. 但是，请尝试使用`x = [1] * 30`反例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:32:37.630

运行需要很长时间的原因是，当您将元素附加到列表时，每次查找需要更长的时间，因为它必须搜索（平均）列表的一半。更好的方法是使用字典：

```
combos = {} 
```

和：

```
if i not in combos:
    combos[i] = None # Just to put something there unless you need to store a value 
```

这利用了[哈希映射](http://en.wikipedia.org/wiki/Hash_table)的查找性能。

* * *

如果您只是进行成员资格测试，请按照 DSM 的建议使用集合。

# php - Highcharts：使用日期时间强制显示 xAxis

> ID：15592301
> 
> 赞同：0
> 
> 时间：2013-03-23T21:30:04.880
> 
> 标签：php, javascript, jquery, mysql, highcharts

我的 highcharts 图表现在显示如下：http: [//img90.imageshack.us/img90/3892/chart1p.png](http://img90.imageshack.us/img90/3892/chart1p.png)

但我需要它看起来像这样：http: [//img545.imageshack.us/img545/1333/chart2p.png](http://img545.imageshack.us/img545/1333/chart2p.png)

目前它没有按小时显示空值。

我的代码：

索引.php

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">
    var chart;
    $(document).ready(function () {
        var options = {
            chart: {
                renderTo: 'chart',
                defaultSeriesType: 'spline'
            },
            title: {
                text: 'Earnings Today',
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                type: 'datetime',
                tickInterval: 3600 * 1000,
                tickWidth: 0,
                labels: {
                    align: 'center',
                    formatter: function () {
                        return Highcharts.dateFormat('%l%p', this.value);
                    }
                },
            },
            yAxis: {
                title: {
                    text: 'Earnings'
                },
                min: 0,
                tickInterval: 2,
            },
            plotOptions: {
                spline: {
                    marker: {
                        radius: 4,
                        lineColor: '#666666',
                        lineWidth: 1
                    }
                }
            },
            tooltip: {
                valueDecimals: 2,
                crosshairs: true,
                formatter: function () {
                    return '$' + this.y;
                }
            },
            series: [{
                    name: 'Earnings Today, USD'
                }
            ]
        }
        jQuery.get('data_today.php', null, function (tsv) {
            var lines = [];
            earnings = [];
            try {
                tsv = tsv.split(/\n/g);
                jQuery.each(tsv, function (i, line) {
                    line = line.split(/\t/);
                    date = Date.parse(line[0] + ' UTC');
                    val = line[1];
                    earnings.push([date, parseFloat(line[1].replace(',', '.'), 10)]);
                });
            } catch (e) {}
            options.series[0].data = earnings;
            chart = new Highcharts.Chart(options);
        });
    });
</script> 
```

data_today.php

```
<?php
session_start();
require_once('config.php');
require_once('config_mysql.php');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$link)
{
    die('Failed to connect to server: ' . mysql_error());
}

$db = mysql_select_db(DB_DATABASE);
if (!$db)
{
    die("Unable to select database");
}

$result = mysql_query("SELECT earn_date,SUM(amount) as val FROM user_earnings WHERE user_id='$USER_ID' AND DATE(earn_date) = DATE(NOW()) GROUP BY earn_date");
if ($result)
{
    while ($row = mysql_fetch_array($result))
    {
        $d = date("l, F, j, Y G:i:s", strtotime($row["earn_date"]));
        echo $d . "\t" . $row['val'] . "\n";
    }
}
else
{
    die(mysql_error());
}
mysql_close($link);
?> 
```

所以，（如果还不够清楚的话）我需要这段代码来显示一整天并按小时显示空值。

我对 highcharts 和 javascript 的经验几乎为零，所以我需要一些帮助:)

也在寻找在 index.php 中运行 MySql 查询的替代方法，所以我不需要 data_today.php

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:46:59.680

设置xAxis如下

```
xAxis: {
    ordinal: false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:23:01.257

对于空格，您应该有`null`值。然后设置`connectNulls: false`。

[例子](http://api.highcharts.com/highcharts#plotOptions.area.connectNulls)

# java - 触摸事件无法正常工作..libgdx

> ID：15592303
> 
> 赞同：0
> 
> 时间：2013-03-23T21:30:38.680
> 
> 标签：java, android, libgdx

我只想在我的舞台上的演员被触摸时才执行一个功能。但问题是无论它在舞台上的哪个位置被触摸，该功能都会被执行。即使它在舞台上的某个随机位置被触摸，该功能也会被执行。 .我希望该功能仅在演员被触摸时执行..我有设置边界...仍然无法正常工作..

```
public Restart() 
    {
       atlas = new TextureAtlas(Gdx.files.internal("pages-info.atlas"));
       sprite = atlas.createSprite("restart");
       this.touchable = true;
        sprite.setBounds(x, y, sprite.getWidth(), sprite.getHeight());

    }

public void draw(SpriteBatch batch,float parentAlpha)
    {       
        batch.draw(sprite, x, y , width, height  );

    }

@Override
    public Actor hit(float x, float y) 
    {
        // TODO Auto-generated method stub
        Gdx.app.log( FirstGame.LOG, " restart working " );
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:58:33.143

该`hit`方法没有按照您的想法进行。该`hit`方法用于*测试*当前参与者是否与给定的 x,y 相交，因此它总是被调用。（如果你想扔掉“命中”，这很有用，因为你的演员不是矩形的。）

用于[`addListener`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html#addListener%28com.badlogic.gdx.scenes.scene2d.EventListener%29)添加事件侦听器以接收触摸事件并对其做出反应。

# requirejs - 将 require.js 与 3rd 方 JavaScript 库一起使用

> ID：15592308
> 
> 赞同：3
> 
> 时间：2013-03-23T21:31:13.153
> 
> 标签：requirejs

我刚刚开始使用`require.js`并认为它很棒。但是，我想尽可能多地使用它，而不是处理`<script>`我的 HTML 文件中的标签。

为此，是否可以使用没有任何`define`模块的第 3 方库？我意识到这可能要求很多，但有没有办法打电话......

```
require(["3rd_party"], function(3rd) { 
```

});

...`3rd_party.js`位于需要知道查看的 js 文件夹中的脚本在哪里？我知道 require 有映射库之类的东西，`require-jquery`但不确定是否可以在没有考虑到它的旧实用程序库中开箱即用地使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T21:44:48.223

`RequireJS`2.1.0 添加了`shim`允许使用非 AMD 3rd 方库（如 AMD 模块）的配置元素。在您的情况下，它将类似于：

```
shim: {
    '3rd_party': {
        exports: '{the-global-name}' // what variable does the library
                                     // export to the global scope?
    }
} 
```

这种机制使得像“require-jquery”这样的自定义构建库包装器几乎已经过时了。

[RequireJS 文档](http://requirejs.org/docs/api.html#config-shim)中的更多详细信息

# javascript - 未定义淘汰赛变量 - 范围问题？

> ID：15592311
> 
> 赞同：0
> 
> 时间：2013-03-23T21:31:38.563
> 
> 标签：javascript, knockout.js

我有以下代码：

```
var ObjectViewModel = function (testObject) {
    //debugger;
    var self = this;
    self.id = testSet.id;
    self.details = testOject.details;
    self.children = ko.observableArray(testObject.children);
    self.childCount = ko.computed(function() {
        return self.children().length;
    });

    self.addObject = function () {
        //debugger;
        // Pending UI
        // Call API here
        // On success, complete
        self.children.push(dummyObject);
        self.childToAdd("");
    }.bind(self);
    }
    / etc 
```

然而在 childCount 中，this.children() 是未定义的。我试图让视图实时显示子数组的长度，因此当用户添加/删除项目时，计数会更新。知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:32:33.653

您可以`this`使用最后一个参数将函数执行时的值传递给计算函数：

```
this.childCount = ko.computed(function() {
    return this.children().length;
}, this); 
```

`this`您还可以存储对计算之外的引用：

```
var self = this;
this.childCount = ko.computed(function () {
    return self.children().length;
}); 
```

# php - 通过 SSH 和 phpseclib 在 SSH 屏幕上运行命令

> ID：15592314
> 
> 赞同：1
> 
> 时间：2013-03-23T21:31:55.963
> 
> 标签：php, ssh, gnu-screen, phpseclib

我有一个通过 SSH 启动分离屏幕的 PHP 脚本：

```
$ssh->exec("screen -m -d -S ".$user); 
```

我现在需要在该屏幕中执行一个命令，而不是在该屏幕中。我有执行此操作的代码，我已经通过 SSH 客户端对其进行了测试，但是当我尝试将它与 phpseclib exec 命令一起使用时，它不起作用。这是有效的代码：

```
screen -S ".$user." -X stuff "cd minecraft/servers/".$user."/;sh start.sh $(printf '\r')" 
```

这就是 PHP 脚本中的内容：

`$ssh->exec("screen -S ".$user." -X stuff \"cd minecraft/servers/".$user."/;sh start.sh $(printf '\r')\"");`

我试图转义代码中多余的双引号。

我能做些什么来通过 PHP 完成这项工作吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:24:28.693

嗯……

请创建两个 bash 脚本，第一个：使用名称为 fe 的用户参数创建屏幕，第二个：使用名称为 fe 的参数创建`run_screen`SSH 客户端的测试器。`user``run_test`

运行第一个脚本：

```
$ssh->exec('[full_path]/run_screen ' . $user); 
```

第二：

```
$ssh->exec('[full_path]/run_test ' . $user); 
```

`bash`语法在这里是[bash 语法](http://linuxconfig.org/Bash_scripting_Tutorial)

确保服务器用户（fe Apache）有权运行脚本。

# scala - 如何从 Scala repl 中取消导入隐式？

> ID：15592324
> 
> 赞同：9
> 
> 时间：2013-03-23T21:32:38.263
> 
> 标签：scala

是否可以从 repl 中取消导入隐式？

说我做这样的事情，

```
scala> import scala.math.BigInt._
import scala.math.BigInt._

scala> :implicits
/* 2 implicit members imported from scala.math.BigInt */
  /* 2 defined in scala.math.BigInt */
  implicit def int2bigInt(i: Int): scala.math.BigInt
  implicit def long2bigInt(l: Long): scala.math.BigInt 
```

然后决定这都是一个大错误。如何从当前范围中删除这些隐式？

我目前的技术是中止 REPL，然后开始一个新的，我很想避免重复它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T21:51:51.193

您可以通过创建另一个具有相同名称的隐式来隐藏隐式。幸运的是（对于这种情况，无论如何），新的不是重载的隐式，而是取代旧的：

```
scala> import language.implicitConversions
import language.implicitConversions

scala> def needsBoolean(b: Boolean) = !b
needsBoolean: (b: Boolean)Boolean

scala> implicit def int2bool(i: Int) = i==0
int2bool: (i: Int)Boolean

scala> val dangerous = needsBoolean(0)
dangerous: Boolean = false

scala> trait ThatWasABadIdea
defined trait ThatWasABadIdea

scala> implicit def int2bool(ack: ThatWasABadIdea) = ack
int2bool: (ack: ThatWasABadIdea)ThatWasABadIdea

scala> val safe = needsBoolean(0)
<console>:14: error: type mismatch;
 found   : Int(0)
 required: Boolean
       val safe = needsBoolean(0) 
```

# jquery - 点击事件中的函数需要2次点击才能触发

> ID：15592325
> 
> 赞同：0
> 
> 时间：2013-03-23T21:32:42.347
> 
> 标签：jquery

我有一个`a`id 的链接`#searchBoxPop2`。单击后，我想触发`#searchBoxPop2.toggle`功能。我的问题是我必须在链接上单击两次才能触发切换。你们能帮帮这个肮脏的脚本吗？非常感谢

```
 $('#searchBoxPop2').live('click', function () {
      if (!$('.header-wrapper-home').length) {
          $('div.right-block').show();

              $('#searchBoxPop2').toggle(
              function () {
              $('.detail-page-content').animate({
                  marginTop: "+=290px"
              }, 800)
          },
              function () {
              $('.detail-page-content').animate({
                  marginTop: "0px"
              }, 800);
          });
      }
      if ($('.header-wrapper-home').length) {
          $('.header-wrapper-home').slideToggle('slow');

      }
  }); 
```

如果您希望我解释其余代码以及我将要做什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:16:07.117

正如我在评论中所说，[切换事件功能](http://api.jquery.com/toggle-event/)在 jQuery 1.9 中已被弃用。因此，您需要使用自己的方法来交替调用。起初我很生气，因为没有内置的替代方法，但这种方法更简洁。特别是因为一旦你有格式下来，很容易复制到任何其他事件调用。

这是我刚刚写的一个又快又脏的回调函数。可能有更好的方法来实现这一点，但这是一个很好的起点：

```
function () {
    var number = 2; // the number of events you toggle through
    if (! window.toggle_counter )
        window.toggle_counter = 0;
    switch (window.toggle_counter) {
        case 0:
            // do some things
            break;
        case 1:
            // do other things
            break;
        // etc ..
    }
    window.toggle_counter = (window.toggle_counter + 1) % number;
} 
```

请注意 window.variable_name 是全局范围，因此请注意冲突。

# git - 如何对特定于发布的文件进行版本控制

> ID：15592328
> 
> 赞同：0
> 
> 时间：2013-03-23T21:32:53.410
> 
> 标签：git

假设我有一个带有版本控制源文件的项目。
但是，每个版本都可能有一组脚本，每个版本都非常具体。

例如，对于每个版本，我都可以提供一个 patch.sql 脚本，用于影响数据库内容。
该脚本在每个版本中都非常不同。

该脚本如何进行版本控制？
是否有管理此类文件的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:19:49.353

仅用于发布而不用于迁移的文件可以像任何其他文件一样进行管理。只需对文件进行任何必要的更改并正常提交即可。

否则，一种简单的迁移方法是让目录`migration/v2_v3/`包含从版本 2 到版本 3 所需的所有补丁和脚本。

有关 SQL 迁移的具体主题，请查看[Sqitch](http://sqitch.org/)。它是支持版本控制的 SQL 变更管理，因此您不必想出自己的 SQL 补丁管理方案。

# java - 将 EditText 转换为字符串，但仍在 LogCat 上返回 EditText

> ID：15592331
> 
> 赞同：-2
> 
> 时间：2013-03-23T21:33:16.663
> 
> 标签：java, android, string, android-edittext

我试图让用户填写我`EditText`的价格......即`"20.00"`并从该编辑文本中获取值作为字符串。然后将该字符串用作要作为值上传到`"Price"`键下的“我的服务器”又名 parse.com 的数据。每当我运行我的模拟器，填写`"20.00"`编辑文本并检查我的服务器时，一个新条目永远不会弹出。我的 logcat 返回：

```
03-23 21:14:20.607: V/EditText(1697): 20.00 
```

如果我在上面创建另一个字符串并简单地给它一个值。然后把它放在`"Price"`钥匙下面而不是`myString`运行模拟器，我的服务器会收到这个，一切都会锻炼。

由于在键下设置的值`"Price"`是一个字符串，并且我的 logcat`EditText`在我使用时返回 an `myString`，这让我相信我使用的是 an`EditText`而不是 a`String`即使我已经查找了多个教程/答案，所有这些都是为了从您必须使用的编辑文本中获取字符串：

```
price = (EditText) findViewById(R.id.editText1);
String newString = price.getText().toString(); 
```

我在我的代码中有。

另外，我上面有两个`SearchView`s 和两个`ListView`s 具有搜索功能，所以我的代码有点长。我的代码根本没有出错，除了这个小问题之外它工作得很好。

`TapDeal.java`- 问题类：

```
package com.alpha.dealtap;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

import com.parse.Parse;
import com.parse.ParseObject;

public class TapDeal extends Activity {

    Button b1;
    String newString;

    // List view
    private ListView lv;
    private ListView lv2;
    // Listview Adapter
    ArrayAdapter<String> adapter;
    ArrayAdapter<String> adapter2;

    // Search EditText
    EditText inputSearch;
    EditText inputSearch2;
    EditText price;

    // ArrayList for Listview
    ArrayList<HashMap<String, String>> productList;
    ArrayList<HashMap<String, String>> productList2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tapdeal);

        // Listview Data
        String products[] = { "Dubra", "Keystone Light", "Keystone",
                "Smirnoff", "Jack Daniels", "Captain Morgan", "Grey Goose",
                "Burnetts", "Kettle One", "Corona", "Franzia", "Budweiser" };

        String size[] = { "6 Pack", "12 Pack", "30 Pack", "750ml", "Handle",
                "1 liter", "3 Liter Box", "Half Pint", "1 Pint" };

        lv = (ListView) findViewById(R.id.list_view);
        lv2 = (ListView) findViewById(R.id.list_view2);

        inputSearch = (EditText) findViewById(R.id.inputSearch);
        inputSearch2 = (EditText) findViewById(R.id.inputSearch2);

        // Adding items to listview
        adapter = new ArrayAdapter<String>(this, R.layout.listitem,
                R.id.product_name, products);
        adapter2 = new ArrayAdapter<String>(this, R.layout.size, R.id.size,
                size);
        lv.setAdapter(adapter);
        lv2.setAdapter(adapter2);

        inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2,
                    int arg3) {
                // When user changed the Text
                TapDeal.this.adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {
                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
            }
        });

        inputSearch2.addTextChangedListener(new TextWatcher() {

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                // TODO Auto-generated method stub
                TapDeal.this.adapter2.getFilter().filter(s);
            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
            }
        });

        b1 = (Button) findViewById(R.id.button1);
        price = (EditText) findViewById(R.id.editText1);

        String newString = price.getText().toString();

        Parse.initialize(this, "xxxx", "yyyy");

        ParseObject dealinfo = new ParseObject("Deals");
        dealinfo.put("Brand", "Budweiser");
        dealinfo.put("Size", "6");
        dealinfo.put("Price", newString);
        dealinfo.saveInBackground();

        b1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.v("EditText", price.getText().toString());
            }
        });
    }
} 
```

（`"xxxx"`并且`"yyyy"`是我的私钥）。

`tapdeal.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Editext for Search -->

    <EditText
        android:id="@+id/inputSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Brand of Alcohol"
        android:inputType="textVisiblePassword" />

    <!-- List View -->

    <ListView
        android:id="@+id/list_view"
        android:layout_width="fill_parent"
        android:layout_height="52dp" />

    <EditText
        android:id="@+id/inputSearch2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:hint="Enter the Size"
        android:inputType="textVisiblePassword" />

    <ListView
        android:id="@+id/list_view2"
        android:layout_width="fill_parent"
        android:layout_height="54dp"
        android:layout_weight="0.16" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp"
        android:ems="10"
        android:hint="Enter the Price"
        android:inputType="numberDecimal" />

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="90dp"
        android:text="Tap it"
        android:textSize="23dp" />

</LinearLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.alpha.dealtap"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".Main"
            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Search_Page"
            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.SEARCH_PAGE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".DealPage"
            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.DEALPAGE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".StorePage"
            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.STOREPAGE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Map"
            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.MAP" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".TapDeal"
            android:label="TapDeal"
            android:windowSoftInputMode="stateHidden" >

            <intent-filter>

                <action android:name="com.alpha.dealtap.TAPDEAL" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:49:49.540

您的问题并不完全清楚正在发生什么以及您期望发生什么，但是`onClick()`您的侦听器的方法仅输出到日志似乎很奇怪。我的猜测是你想要所有这些代码：

```
String newString = price.getText().toString();

ParseObject dealinfo = new ParseObject("Deals");
dealinfo.put("Brand", "Budweiser");
dealinfo.put("Size", "6");
dealinfo.put("Price", newString);
dealinfo.saveInBackground(); 
```

在您的`onClick()`方法中，以便在单击按钮时发生，而不是在`onCreate()`现在的方法中。如果这不是您想要实现的目标，那么您将不得不编辑您的问题以使其更清晰。

# python - 从 Python 中的文本文件计算平均值

> ID：15592333
> 
> 赞同：-3
> 
> 时间：2013-03-23T21:33:21.350
> 
> 标签：python, python-2.7

我有一个包含数字列表的文本文件。在这种情况下，我想计算每三个数字的平均值。有什么想法吗？之前谢谢

文本文件中的数字示例：

```
5
7
3
10
12
6 
```

我想要的输出：

```
5
9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:23:24.550

`data.txt`：

```
5
7
3
10
12
6 
```

如何使用[numpy](http://www.numpy.org/)处理它：

```
In [4]: import numpy as np

In [5]: with open('data.txt') as f:
    data = f.read().split()
   ...:     

In [6]: data
Out[6]: ['5', '7', '3', '10', '12', '6']

In [7]: a = np.array(map(float, data))

In [8]: a
Out[8]: array([  5.,   7.,   3.,  10.,  12.,   6.])

In [9]: b = a.reshape([-1,3])

In [10]: b
Out[10]: 
array([[  5.,   7.,   3.],
       [ 10.,  12.,   6.]])

In [11]: b.sum(1)/3
Out[11]: array([ 5\.        ,  9.33333333]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:54:46.650

您需要“解析”文本文件，为此您需要知道它的组织方式和编码方式。我先问你几个问题。

1.  数字是否总是与它们之间的空格一起存储？
2.  你想要这个输出在哪里？打印到控制台？在一个新的 txt 文件中？

你可以 od 以下

```
#read the file 
my_file = open("C:/numbers.txt",'r')
my_text = my_file.read()
my_file.close()

#get a list of numbers from it (in string form)
my_text_numbers = my_text.split(' ')

#use list comprehension to get integer...also consider
#using map function
my_int_numbers = [int(n) for n in my_text_numbers]

#now the averaging part I will leave to you, I assume it's
#the file reading part you needed help with. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:50:28.063

假设它们都在一行：

```
# text file is myData.txt
averages = {} # using a dictionary so you can keep track of the starting point
with open('myData.txt', 'r') as myFile:
    data = myFile.read().split('\n') # this creates a list of the data
for index in range(len(data), 3): # step of 3
    n = float(int(data[index]) + int(data[index+1]) + int(data[index+2])) / 3
    averages[index] = n 
```

`IndexError`如果列表不完全是 3 块，这将引发一个问题，所以我在`try`/`except`块中添加了：

```
# text file is myData.txt
averages = {}
with open('myData.txt', 'r') as myFile:
    data = myFile.read().split('\n') # this creates a list of the data
for index in range(len(data), 3): # step of 3
    try: a = int(data[index])
    except (IndexError, TypeError): a = 0
    try: b = int(data[index+1])
    except (IndexError, TypeError): b = 0
    try: c = int(data[index+2])
    except (IndexError, TypeError): c = 0
    # except (IndexError, TypeError): avoids an error if the end of the list 
    # has been reached or the line is not an integer
    n = float(a + b + c) / 3
    averages[index] = n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:48:22.913

这可以通过将文本文件的行保存到列表中来解决。您还应该使用 csv 模块，可以在[此处查看](http://docs.python.org/2/library/csv.html) import csv

```
file = open("fileName.txt", 'r')
reader = csv.reader(file)
allRows = [row for row in reader] 
```

然后，它应该可以获取 allRows 列表，将值相加，然后除以 allRows 的长度。这个模块我不太了解，所以[这个答案](https://stackoverflow.com/questions/8205807/how-to-convert-a-text-file-into-a-list-in-python)可能比我解释得更好。

# actionscript-3 - actionscript 3.0 如何将算法合并到我的代码中？

> ID：15592334
> 
> 赞同：0
> 
> 时间：2013-03-23T21:33:25.663
> 
> 标签：actionscript-3

我是 actionscript 3.0 的新手，我正在尝试让一副牌洗牌，我已经成功了，但我的问题是我的牌被重复了，所以洗牌后我在 52 张牌的牌组中有同一张牌的重复。我正在尝试创建一个德州扑克游戏。

我发现这个讨论[Randomize or shuffle an array](https://stackoverflow.com/questions/4742754/randomize-or-shuffle-an-array)但它没有告诉我如何将 Fisher-Yates 算法合并到我的代码中。我已经尝试了这里建议的几种不同方法，以及在网络上建议的其他方法，但没有任何效果（认为问题显然是我缺乏经验）。

有人可以给我一个示例，说明如何将其合并到我的代码中或指向某个地方的链接，该链接将解释如何正确执行此操作。

提前致谢。

保罗

```
package src.CardDeck
{
    public class CardDeck
    {
        public var allCards:Array = [];
        public var cardNames:Array;
        public var cardValues:Array;
        public var gameType:String;
        public var drawnCards:uint = 0;

        public function CardDeck(game:String)
        {
            gameType = game;
            cardNames = ["Ace","Two","Three",
                         "Four","Five","Six",
                         "Seven","Eight","Nine",
                         "Ten","Jack","Queen","King"];
            if(gameType == "texasholdem")
            {
                cardValues = [1,2,3,4,5,6,7,8,9,10,10,10,10];
            }
            makeSuit("Spade");
            makeSuit("Heart");
            makeSuit("Diamond");
            makeSuit("Club");
        }

        private function makeSuit(suitString:String):void
        {
            var card:Object;

            for(var i:uint = 0; i < cardNames.length; i++)
            {
                card = {};
                card.cardType = suitString;
                card.cardName = cardNames[i];
                card.cardValue = cardValues[i];
                card.isDrawn = false;
                allCards.push(card);
            }
        }

        public function shuffle():Array
        {
            var shuffledArray:Array = [allCards.length];
            var randomCard:Object;
            do
            {
                randomCard = getRandomCard();
                if(shuffledArray.indexOf(randomCard) == -1)
                {
                    shuffledArray.push(randomCard);
                }
            }
            while(shuffledArray.length < allCards.length)
                return shuffledArray;
        }

        private function getRandomCard():Object
        {
            var randomIndex:int = Math.floor(Math.random()* allCards.length);
            return allCards[randomIndex];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:01:47.890

错误说明：

```
var shuffledArray:Array = [allCards.length]; 
```

使用 shuffledArray[0] = allCards.length 的单个元素创建一个数组。事实上你不需要预先分配它只是说：

```
var shuffledArray: Array = []; 
```

这是经典的 Fisher-Yates 版本：

```
public function shuffleFisherYates():Array {
var shuffledArray:Array = [];
var randomCardIndex: int;
    do {
        randomCardIndex = Math.floor(Math.random()* allCards.length);
        shuffledArray.push(allCards[randomCardIndex]); // add to mix
        allCards.splice(randomCardIndex,1); // remove from deck
    }while(allCards.length); // Meaning while allCards.length != 0
    return shuffledArray;
} 
```

这是 Durstenfeld 的（就地）版本：

```
public function shuffleDurstenfeld():Array {
var swap:Object;
var countdown:int = allCards.length-1;
var randomCardIndex: int;
    for(i = countdown; i > 0; i--){
        randomCardIndex = Math.floor(Math.random()* countdown);
        swap = allCards[countdown];
        allCards[countdown] = allCards[randomCardIndex];
        allCards[randomCardIndex]= swap;
    }
    return allCards; // shuffled in place
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:29:30.033

假设你的洗牌代码没问题，我认为你看到重复牌的一个原因是在你的 getRandomCard() 方法中，你没有考虑到已经抽出的牌。您随机生成一个索引并在数组中返回卡片......但该卡片仍在数组中，并且可能再次随机生成相同的索引，导致返回相同的卡片。

# console - 在 PyDev 交互式控制台中设置当前工作目录

> ID：15592335
> 
> 赞同：0
> 
> 时间：2013-03-23T21:33:27.750
> 
> 标签：console, pydev

我知道当我使用 ctrl + alt + enter 在 pydev 中启动交互式控制台时，工作目录不是项目所在的目录。因此，我在控制台启动时采用了这段代码（有效）：

```

`import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
import os
cwd_path = [path for path in sys.path if 'org.python.pydev' not in path and 'Python3' not in path and 'python33.zip' not in path]
if len(cwd_path) == 1:
    os.chdir(cwd_path[0])` 

但是，问题是它只将我带到项目的文件夹，而不是文件。例如，我的文件在 src//com/main//test//Test.py ，这段代码只会把我带到 src 所在的文件夹。有没有办法解决这个问题？

谢谢！

-肖恩

            回答 #1

赞同：0

时间：2013-03-24T20:57:15.700

这在技术上不是一种解决方法，但我确实发现 Spyder IDE 很好地解决了这个问题。我刚刚从 WinPython 包安装，它对我来说非常好用。

[WinPython](http://code.google.com/p/winpython/)的链接

如果有人能提供一种在 Eclipse/Pydev 中修复它的方法，我仍然会非常感激——因为这是我用于所有其他项目的方法，我真的很喜欢它。谢谢！

```

# python - 未定义符号：PyOS_InputHook，来自共享库

> ID：15592336
> 
> 赞同：0
> 
> 时间：2013-03-23T21:33:31.627
> 
> 标签：python, plugins, readline, dlopen

我为一个非 python C++ 应用程序编写了一个 C++“python 插件”。
在某些时候，这个 .so 插件会初始化 python 解释器并打开一个 python 控制台。
为方便起见，“readline”模块被导入，我们得到这个错误：

**ImportError：/usr/lib/python2.7/lib-dynload/readline.so：未定义符号：PyOS_InputHook**

链接命令（由 cmake 生成）如下：

/usr/bin/c++ -fPIC -Wall -Wextra -O3 -DNDEBUG -Xlinker -export-dynamic -Wl,-fwhole-program /usr/lib/libpython2.7.a -shared -Wl,-soname,libMyplugin.so -o libMyplugin.so [来源] [qt 库] -lGLU -lGL -lX11 -lXext -lc -lc -lpython2.7 -Wl,-rpath,/src:/usr/local/Trolltech/Qt-4.8.4/库：

`nm libMyplugin.so`给出以下与 python 相关的符号：

```
 U Py_Finalize
                 U Py_Initialize
00000000002114a8 B PyOS_InputHook
                 U PyRun_InteractiveLoopFlags
                 U PyRun_SimpleStringFlags 
```

我们观察到这`PyOS_InputHook`是在插件的 BSS 部分中定义的。然而，python`readline.so`没有找到它。

问题是为什么，以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:26:18.030

问题在于主应用程序如何加载插件：它使用没有标志 RTLD_GLOBAL 的 dlopen()。
这意味着插件中存在的当前不需要的符号（如本例中的 PyOS_InputHook）不会被解析，并且不会被其他共享库解析（如本例中的 readline.so）。

为了解决这个问题，在加载插件时应该使用标志 RTLD_GLOBAL。
如果无法控制主应用程序（如本例）以及它如何使用 dlopen()，仍然可以使用带有标志 RTLD_NOLOAD | 的 dlopen() 从插件本身“重新加载”插件。RTLD_GLOBAL，以便解析当前加载的库中所有以前未解析的符号。

这样做可以解决问题。

# jquery - onClick addClass 'active' slideDown 覆盖 div，关闭覆盖 div onClick 下一个 div

> ID：15592339
> 
> 赞同：0
> 
> 时间：2013-03-23T21:34:28.217
> 
> 标签：jquery

我一直在尝试从这个网站的各个地方拼凑一个脚本，但它还没有工作。我需要做的是单击一个 div 并让覆盖 div 向下滑动，如果单击不同的 div 关闭上一个 div 并向下滑动下一个。这是我的工作小提琴：http: [//jsfiddle.net/G94Vm/](http://jsfiddle.net/G94Vm/)

HTML：

```
<div class="item">
    <div class="item-overlay"></div>        
</div>
<div class="item">
    <div class="item-overlay"></div>
</div> 
```

脚本：

```
$(document).ready(function () {
var open = $('.item'),
    a = $('div').find('.item-overlay');
open.click(function(){
    var $this = $('.item-overlay', this),
        speed = 300;
    $this.addClass('active').slideDown(speed);
    if ($this.hasClass('active') === true) {
        $this.removeClass('active').next('.item-overlay').slideUp(speed);
    } else if (a.hasClass('active') === false) {
        $this.addClass('active').next('.item-overlay').slideDown(speed);
    } else {
        a.removeClass('active').next('.item-overlay').slideUp(speed);
        $this.addClass('active').next('.item-overlay').delay(speed).slideDown(speed);
    }
}); 
```

});

这是我正在处理的网站[：](http://bozaandesign.com/newwebsite/)现在正在使用这个基本脚本：

```
$(document).ready(function () {
$('.item', this).click(function () {
    $('.item-overlay', this).slideToggle('400', function () {
        // end animation
    });
}); 
```

});

我仍在学习 jQuery，无法弄清楚我做错了什么。在这里待了几个小时，任何帮助将不胜感激。

谢谢！约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:57:57.873

`.item-overlay`我的理解是，当单击其父div 时，您希望内部的div 向下滑动`.item`，并且是否还有其他`.item-overlay`可见的 div 可供所有人关闭？

这是一个工作示例。目前 slideUp 动画对我来说有点问题，但这可能会给你你所追求的（*更新为使用 slideToggle 而不是 slideDown*）：

```
$('.item').click(function () {
    $(this).find('.item-overlay').slideToggle('300').addClass('active');
    $(this).siblings().find('.active').each(function () {
        $(this).slideUp('300').removeClass('active');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:56:43.387

我刚刚更新了小提琴：

[http://jsfiddle.net/G94Vm/10](http://jsfiddle.net/G94Vm/10)

你不需要所有这些`if`陈述。只需在向下滑动之前关闭所有叠加层。

```
$(document).ready(function () {
 $('.item').click(function(){
    var element = $('.item-overlay', this);
    var speed = 300;
    $('.item-overlay').removeClass('active').slideUp(speed);
    element.addClass('active').slideDown(speed);
});
}); 
```

你需要删除

```
.item-overlay {
    display:none;
} 
```

因为你想把它滑下来，如果它在滑下来之前隐藏起来，那是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:10:00.910

您实际上使用`next`了错误的方法。我已经重写了您的 jsFiddle 以便它执行动画，在它应该停止时停止，并侦听应该关闭活动覆盖层的外部点击。

链接是：http: [//jsfiddle.net/alexis_tondelier/Gf2dv/](http://jsfiddle.net/alexis_tondelier/Gf2dv/)

当前的JS代码是：

```
$(document).ready(function () {
    var $active,
        togglerSelector = '.item',
        toggledSelector = '.item-overlay',
        $items = $(togglerSelector),
        animationDuration = 300,
        activeClassName = 'active',
        activeStyle = {height: 300},
        notActiveStyle = {height: 0}
        hideActive = function() {
            $active && $active
                .stop()
                .animate(notActiveStyle, function() {
                    $(this).removeClass(activeClassName).hide();
                });    
            $active = void 0;        
        },
        showActive = function($element) {
            $element && ($active = $element)
                .stop()
                .show()
                .animate(activeStyle)
                .addClass(activeClassName)
        };

    $items.on('click', function(event) {
        var $this = $(this),
            $overlay = $this.children(toggledSelector),
            theSame = $overlay.is($active);
        hideActive();
        theSame || showActive($overlay);
        }
    });
    $(this).on('click', function(event) {
        var $target = $(event.target),
            isOutClick = !$target.closest(togglerSelector).length;
        isOutClick && hideActive();
    });
}); 
```

它应该按照您想要的方式工作。

# jquery - jquery 和 wordpress 入队

> ID：15592345
> 
> 赞同：1
> 
> 时间：2013-03-23T21:35:19.613
> 
> 标签：jquery, wordpress

如果我从自己的服务器排队 jquery 一切正常和花花公子：

```
add_action('init', 'headsetup');

function headsetup(){
wp_enqueue_script('jquery_script',get_template_directory_uri().'/js/jquery-.8.3.min.js');
} 
```

但是如果我使用内置的 wordpress jquery 一切都会失败：

```
add_action('init', 'headsetup');

function headsetup(){
wp_enqueue_script('jquery');
} 
```

Jquery 正在加载，我可以在站点中看到它，`<head>`但它没有触发，这意味着后面的脚本不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:31:44.390

排序！

我所要做的就是改变我调用 jquery 的方式。

代替：

```
$("somefunction") 
```

它一定要是：

```
jQuery("somefunction") 
```

这是一个wordpress的东西...

# sockets - 遇到套接字问题并选择

> ID：15592346
> 
> 赞同：1
> 
> 时间：2013-03-23T21:35:25.903
> 
> 标签：sockets, select

我正在用 C 实现一个套接字编程项目。我正在使用

选择（）

等待来自客户端的数据。我有两个 UDP 套接字，选择调用总是忽略我的一个套接字。谁能简要描述我应该从哪里开始寻找它？这就是我的服务器正在做的事情

```
waitThreshold.tv_sec = 5000; 
waitThreshold.tv_usec = 50; 
if(sd > sd1)    
    max_sd = (sd + 1);
else if(sd1 > sd)   
    max_sd = (sd1 + 1);
FD_ZERO(&read_sds); 
FD_SET(sd, &read_sds); 
FD_SET(sd1, &read_sds);

ret = select(max_sd, &read_sds, NULL, NULL, &waitThreshold); 
if(ret <0)
{
    printf("\nSelect thrown an exception\n");   
    return 0;
} 
else if(FD_ISSET(sd, &read_sds)) 
{
    // code for socket one
} 
else if(FD_ISSET(sd1, &read_sds)) 
{
    // code for socket two
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:09:11.313

你写了`else if`，所以只有其中一个会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:51:41.367

Generally speaking, when pooling multiple sockets using select() you want to use a for loop instead of branching the code with IFs. Also take note of the fact that select CHANGES the fd_set arguments (the read, write and error file descriptor sets - 2nd, 3rd and 4th arguments) and that you need to re-set them before each select(). A pretty general code layout for selecting sockets that have data to read with multiple concurrent connections would be something like this:

```
FD_ZERO(&master_sds);
FD_ZERO(&read_sds);

for (i=0; i<number_of_sockets); i++){
    FD_SET(sd[i], &master_sds);
    if sd[i] > max_sd {
        max_sd=sd[i];
    }
}

for(;;){
    read_sds=master_sds;
    ret = select(max_sd, &read_sds, NULL, NULL, &waitThreshold);
    if(ret<0){
        printf("\nSelect thrown an exception\n");
        return 0;
    }
    for(i=0; i<max_sd; i++){
        if FD_ISSET(sd[i], &read_fds){
            // code for socket i
        }
    }   
} 
```

You might not want to have an endless loop to pool the sockets for data, you can insert some condition like receiving specific data on one of the sockets or specific user input as an exit condition. Hope this helps.

# sencha-touch - 两个 Sencha Touch 导航视图中来自同一列表的事件

> ID：15592353
> 
> 赞同：0
> 
> 时间：2013-03-23T21:35:59.483
> 
> 标签：sencha-touch

我有一个清单：

```
Ext.define('my.view.ProgramList', {
  extend: 'Ext.dataview.List',
  xtype: 'programlist',
  ...
} 
```

我希望这个列表成为两个导航视图的起点：

```
Ext.define("my.view.ProgramNavigationView", {
  extend: 'Ext.navigation.View',
  xtype: 'programnavigationview',
  ...
  items: [{
    xtype: 'programlist',
    itemId: 'programlist'
  }]
}

Ext.define("my.view.FacebookNavigationView", {
  extend: 'Ext.navigation.View',
  xtype: 'facebooknavigationview',
  ...
  items: [{
    xtype: 'programlist',
    itemId: 'programlist'
  }]
} 
```

问题：如何处理控制器中的点击事件并分别处理两者？在我的控制器中，我有：

```
refs: {
    programlist: 'programlist',
    facebooknavigationview: 'facebooknavigationview',
    programnavigationview: 'programnavigationview', ...
}, 
```

我试过这个：

```
control: {
  programlist: {
    initialize: 'initProgramData'
  },
  facebooknavigationview: {
    itemtap: 'showFacebookGroup'
  },
  programnavigationview: {
    itemtap: 'showProgramData'
  }, 
```

希望itemtap会冒泡，我可以在facebooknavigationview与programnavigationview中进行不同的处理，但事实并非如此。我可以将 itemtap 放在程序列表中并触发它，但是我无法区分两个导航视图之间的区别；我不知道我是否可以搜索层次结构，但这似乎有点……丑陋。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:34:51.903

您可以添加使用父级的 ref 来帮助区分水龙头的来源，例如，如果您有以下视图：

```
Ext.define("my.view.ProgramNavigationView", {
  extend: 'Ext.navigation.View',
  xtype: 'programnavigationview',
  ...
  items: [{
    xtype: 'programlist',
    itemId: 'programlist'
  }]
}

Ext.define("my.view.FacebookNavigationView", {
  extend: 'Ext.navigation.View',
  xtype: 'facebooknavigationview',
  ...
  items: [{
    xtype: 'programlist',
    itemId: 'programlist'
  }]
} 
```

您可以使用以下参考文献：

```
refs: {
    programlist: 'programlist',
    facebooknavigationview: 'facebooknavigationview programlist',
    programnavigationview: 'programnavigationview programlist', ...
},
control: {
  programlist: {
    initialize: 'initProgramData'
  },
  facebooknavigationview: {
    itemtap: 'showFacebookGroup'
  },
  programnavigationview: {
    itemtap: 'showProgramData'
  }, 
```

现在，当项目点击显示在父视图中时，它们正在侦听。

# php - 使用 Google Charts 填充 MySQL 数据

> ID：15592356
> 
> 赞同：0
> 
> 时间：2013-03-23T21:36:33.207
> 
> 标签：php, mysql, google-visualization

我想创建一个饼图，它基本上应该显示学生在分配给他的所有任务中完成了多少任务。所以我的任务表看起来像这样

任务 task_id | task_student_id | 任务状态

*task_student_id* 引用学生表中的 *user_id*

因此，假设我的带有 user_id 的学生的示例数据在任务表中看起来像这样

任务ID | task_student_id |task_status 1 6 完成 2 6 完成 3 6 not_complete 4 6 not_complete 5 6 完成

因此，该学生的饼图应显示已完成和未完成任务的数量或百分比（即 40% 未完成 60% 完成）

我在网上找到了一个教程。有两个 php 文件，第一个允许您从学生表中选择 user_id

```
<html>
<head>
  <!--Load the AJAX API-->
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
  <script type="text/javascript">

  // Load the Visualization API and the piechart,table package.
  google.load('visualization', '1', {'packages':['corechart','table']});

  function drawItems(num) {
    var jsonPieChartData = $.ajax({
      url: "getpiechartdata.php",
      data: "q="+num,
      dataType:"json",
      async: false
    }).responseText;

    var jsonTableData = $.ajax({
      url: "gettabledata.php",
      data: "q="+num,
      dataType:"json",
      async: false
    }).responseText;

    // Create our data table out of JSON data loaded from server.
    var piechartdata = new google.visualization.DataTable(jsonPieChartData);
    var tabledata = new google.visualization.DataTable(jsonTableData);

    // Instantiate and draw our pie chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(piechartdata, {
      width: 700,
      height: 500,
      chartArea: { left:"5%",top:"5%",width:"90%",height:"90%" }
    });

    // Instantiate and draw our table, passing in some options.
    var table = new google.visualization.Table(document.getElementById('table_div'));
    table.draw(tabledata, {showRowNumber: true, alternatingRowStyle: true});
  }

  </script>
</head>
<body>
  <form>
  <select name="users" onchange="drawItems(this.value)">
  <option value="">Select a student:</option>
  <?php
    $dbuser="";
    $dbname="";
    $dbpass="";
    $dbserver="";
    // Make a MySQL Connection
    mysql_connect($dbserver, $dbuser, $dbpass) or die(mysql_error());
    mysql_select_db($dbname) or die(mysql_error());
    // Create a Query
    $sql_query = "SELECT user_id, user_name FROM students";
    // Execute query
    $result = mysql_query($sql_query) or die(mysql_error());
    while ($row = mysql_fetch_array($result)){
    echo '<option value='. $row['user_id'] . '>'. $row['user_name'] . '</option>';
    }
    mysql_close($con);
  ?>
  </select>
  </form>
  <div id="chart_div"></div>
  <div id="table_div"></div>
</body>
</html> 
```

然后第二个 php 文件根据所选的 user_id 填充图表

```
<?php
  $q=$_GET["q"];

  $dbuser="";
  $dbname="";
  $dbpass="";
  $dbserver="";

  $sql_query = "SELECT task_status, COUNT(*) FROM tasks
    WHERE  task_student_id=" . $q . ""

  $con = mysql_connect($dbserver,$dbuser,$dbpass);
  if (!$con){ die('Could not connect: ' . mysql_error()); }
  mysql_select_db($dbname, $con);

  $result = mysql_query($sql_query);

    $data = array('cols' => array(array('label' => 'Not completed', 'type' => 'string'),
                              array('label' => 'Completed', 'type' => 'string')),
              'rows' => array());

    while($row = mysql_fetch_row($result)) {
   $data['rows'][] = array('c' => array(array('v' => $row[0]), array('v' => $row[1])));
}    

echo json_encode($data);

  mysql_close($con);
?> 
```

我确定我对数组和查询做错了什么。我也在考虑创建两个单独的 sql 查询并将它们保存在两个 php 变量中；$not_completed, $completed 并将其填充到图表中。不知道哪一个是我的问题的最佳选择。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:33:51.050

查看[https://developers.google.com/chart/](https://developers.google.com/chart/)以查找谷歌图表的文档。如果你已经有 $complete 和 $not_complete 这两个变量，你可以使用这个例子[http://pastebin.com/qsB0hqmJ](http://pastebin.com/qsB0hqmJ)并且你应该使用 mysql_result 来改进你的 mysql/php 代码。

```
$tasks_completed = mysql_result(mysql_query("SELECT COUNT(*) FROM tasks..."),0); 
```

# c - Lua C API：liblua.a 中未定义的引用错误

> ID：15592360
> 
> 赞同：0
> 
> 时间：2013-03-23T21:36:44.210
> 
> 标签：c, linker, lua

我正在尝试编译一个包含 Lua(5.2) 库的简单 C 代码示例。我正在使用以下命令：

> ```
> gcc graph.c -o graph -I/usr/local/include -L/usr/local/lib -llua 
> ```

并得到以下错误：

```
 /usr/local/lib/liblua.a(lobject.o): In function `luaO_arith':
    lobject.c:(.text+0x15c): undefined reference to `floor'
    lobject.c:(.text+0x111): undefined reference to `pow'
    /usr/local/lib/liblua.a(lvm.o): In function `luaV_execute':
    lvm.c:(.text+0x24e9): undefined reference to `floor'
    lvm.c:(.text+0x25fe): undefined reference to `pow'
   ... 
```

看起来数学库没有链接，但不知道如何修复它......有什么建议吗？我按照自述文件中的说明使用 make linux 安装了 Lua 并安装了 linux（有 Ubuntu 12.04）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:41:29.497

很简单：你只需要添加`-lm`到行尾。

（所有需要它的功能的手册页都会提到这一点。）

# sqlite - 多插入的php sqlite查询错误

> ID：15592370
> 
> 赞同：1
> 
> 时间：2013-03-23T21:37:57.070
> 
> 标签：sqlite

我在使用 sqlite 进行查询时遇到问题。它不断给我：

> 警告：SQLiteDatabase::queryExec() [sqlitedatabase.queryexec]：靠近“，”：语法错误

我不明白，因为当我尝试我的完整查询时`phpMyAdmin`它告诉我没关系，但是当我用它执行它`$database->queryExec($sql);`时给我这个错误。

这是查询的开始：

> 插入视频（src，videoid，title_url，title）值（'youtube'，'m7v9427AjpM'，'cestmoiladmin'，'Petit kiff 人员：p'）

有任何想法吗 ？

# c++ - 将结构中的 QVector 分配给 main 中 QVector 的内容

> ID：15592371
> 
> 赞同：0
> 
> 时间：2013-03-23T21:38:03.797
> 
> 标签：c++, qt, pointers

我有一个结构：

```
struct node
{
    QPoint position;
    QVector<node> neighbours;

    void add(QPoint);
    void addNeighbours(QVector<node>);

    ...
}; 
```

使用方法：

```
void node::add(QPoint p)
{
    position = p;
}

void node::addNeighbours(QVector<node> n)
{
    neighbours = n;
} 
```

但是，当我尝试使用*addNeighbours*时，出现以下错误：

```
error: C2662: 'node::addNeighbours' : cannot convert 'this' pointer from 'const node' to 'node &'
Conversion loses qualifiers 
```

从网上看，我认为解决方案来自；使用正确的指针，并可能通过`QVectors::Iterator()`. 尽管我无法提出解决方案，但非常感谢任何指向正确方向的指针或解释为什么会发生这种情况。

主要的：

```
int main(int argc, char *argv[])
{
    QVector<node> map;
    QVector<node> tmp;
    node n;

    //Populate map
    for(int i = 0; i < 3; i++)
        for(int j = 0; j < 3;  j++)
        {
            n.add(QPoint(i,j));
            map.append(n);
        }

    //Add required nodes to tmp
    tmp.append(map.at(1));
    tmp.append(map.at(3));

    //Set the neighbour nodes of map(0) using tmp vector
    map.at(0).addNeighbours(tmp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:40:22.337

改变

```
map.at(0).addNeighbours(tmp); // at() : returns a const reference 
```

到

```
map[0].addNeighbours(tmp); // [] : returns a non-const reference 
```

另外，最好改成`addNeighbours`这样：

```
 void node::addNeighbours(const QVector<node> &n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:41:08.260

QVector::at() 仅提供只读访问，请参阅文档：http: [//qt-project.org/doc/qt-4.8/qvector.html#at](http://qt-project.org/doc/qt-4.8/qvector.html#at)

这意味着您只能调用声明为“const”的方法。

但是，addNeighbours() 不能是 const，因为它会修改对象。

So what you need to do is to access the object in a different way, so you don't get a const reference:

```
map[0].addNeighbours(tmp); 
```

# java - Xms 选项对内存使用的影响

> ID：15592375
> 
> 赞同：0
> 
> 时间：2013-03-23T21:38:50.497
> 
> 标签：java, tomcat, memory-management

当我在 tomcat 上增加 -Xms 值时，内存使用量（来自`free -m`命令）不会相应改变。下面的示例显示，将其值增加**200MB**只会影响内存使用**~85MB**。

...usr/lib/jvm/jre/bin/java - **Xms128m -Xmx128m** -XX:PermSize=128m -XX:MaxPermSize=128m...

```
$ free -m
             total       used       free     shared    buffers     cached
Mem:           594        341        253          0          7        104
-/+ buffers/cache:        229        365
Swap:            0          0          0 
```

.../usr/lib/jvm/jre/bin/java **-Xms328m -Xmx328m** -XX:PermSize=128m -XX:MaxPermSize=128m...

```
$ free -m
             total       used       free     shared    buffers     cached
Mem:           594        426        167          0          7        104
-/+ buffers/cache:        314        279
Swap:            0          0 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:42:15.673

这是因为我想象 Linux 内核如何分配 RAM。我的理解可能有缺陷，虽然您可以请求一大块 RAM，但在虚拟内存子系统对其进行处理（即它实际上已被写入）之前，它实际上可能不会被视为已使用。

因此，您看到的不同之处在于垃圾收集运行的阈值发生了变化，因此利用率略有不同。如果您开始在 RAM 中存储更大的数据集，您会注意到更大的差异。

# facebook-graph-api - 如何在 Prestashop (Smarty) 中显示 Facebook 页面之类的计数

> ID：15592376
> 
> 赞同：0
> 
> 时间：2013-03-23T21:38:59.370
> 
> 标签：facebook-graph-api, smarty, prestashop

我在 PHP 中有这段代码可以完美运行：http: [//pastebin.com/sgVFDMW8](http://pastebin.com/sgVFDMW8) 但是我不知道如何在我的 prestashop 页面的 footer.tpl 中实现它。我尝试将它添加到 FrontController 中的 {php}...{/php} 标签之间，但没有运气...

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:52:05.120

最后，我花了很长时间，我不得不深入挖掘 smarty（或者至少 - 比我想要的更深）。恕我直言，Smarty 是如此不友好。

这是解决方案：开箱即用，Smarty 无法解码 JSON 对象，因此：

1.  添加这个插件：[https ://gist.github.com/tony-landis/31451](https://gist.github.com/tony-landis/31451)
2.  将 JSON 对象分配给 .tpl 文件中的变量，如下所示： {json url=' [http://www.something.com/json](http://www.something.com/json) 'assign=result}
3.  在 .tpl 文件中的任何需要的地方使用它：{$result->name}

如果您在某处看到分页符，请打开 smarty 调试，或检查您的 Apache 错误日志。

希望它也会对其他人有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T08:54:22.283

所以，这将适用于 Prestashop 1.5x

（注意：这个例子将facebook页面喜欢添加到footer.tpl）

1-转到文件：

类/控制器/FrontController.php

在类的某处添加此函数：

```
public static function fbcount($idpage){
        $ch = curl_init("http://graph.facebook.com/$idpage");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        $raw = curl_exec($ch);
        curl_close($ch);

        $data = json_decode($raw);
        return $data->likes;
} 
```

2-然后在 footer.tpl 文件中，您可以使用它：

```
{FrontController::fbcount('399888213399907')} 
```

其中 399888213399907 是您页面的 id

请享用！

# google-app-engine - Google App Engine：“没有名为 google.appengine.ext 的模块”

> ID：15592379
> 
> 赞同：5
> 
> 时间：2013-03-23T21:39:15.527
> 
> 标签：google-app-engine

测试我的 main.py GAE 应用程序时出现此错误：

```
Traceback (most recent call last):
  File "main.py", line 4, in <module>
    from google.appengine.ext import db
ImportError: No module named google.appengine.ext 
```

我读了很多关于它但我找不到答案...任何想法或帮助？感谢你们！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-26T04:11:40.253

我在测试我的应用程序时遇到了同样的问题。我发现我`/usr/local/google_appengine`包含`google`python 模块，所以我将该路径添加到我的`$PYTHONPATH`环境变量中。您可以通过 2 种方式执行此操作：

1.  在您的控制台中，键入`export PYTHONPATH="$PYTHONPATH:/usr/local/google_appengine"`. 这会将它添加到此控制台会话的 PYTHONPATH 中。

2.  在您的 shell 配置文件（可能是`~/.bash_profile`）中，添加如下一行：

    ```
    export PYTHONPATH="$PYTHONPATH:/usr/local/google_appengine" 
    ```

    然后打开一个新的控制台会话或使用`source ~/.bash_profile`（或任何文件）重新加载您的配置文件

您可能需要修改它，因为 a）您的“google_appengine”文件夹位于不同的位置（不是`/usr/local`）或 b）您的操作系统以不同的方式分隔路径（我认为 windows 使用`;`而不是`:`- 我在 Mac 上）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-20T15:13:11.533

我想补充一个我遇到过的案例。我的操作系统是 MAC。

Google App Engine 将在 下创建一个链接`/usr/local/google_appengine`。

我添加了上面的路径`PYTHONPATH`，它仍然不起作用。经过一番尝试，我发现我已经安装了**protobuf**，它也在*google*开发中，请检查

[https://developers.google.com/protocol-buffers/docs/pythontutorial](https://developers.google.com/protocol-buffers/docs/pythontutorial)

它将在`side_packages`也命名为`google`. 因此，如果您尝试这样做`import google`，它实际上是在导入**protobuf**。

因此，一种可能的解决方案是暂时卸载**protobuf**：

`pip uninstall protobuf`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-09T11:04:36.233

似乎问题来自`/google_appengine`并不总是在正确位置的目录，因此 python 找不到它（通过`PYTHONPATH`）。

1.  通过运行找到 google_appengine 目录的位置

    `find / -name google_appengine -type d`

2.  找到它后（例如 : `/usr/lib/google-cloud-sdk/platform/google_appengine`），运行：

    `export PYTHONPATH=:/usr/lib/google-cloud-sdk/platform/google_appengine`

这解决了我的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T01:48:12.150

这不是答案，但您可以尝试添加以下代码进行调试：

```
import logging

import google

logging.info("google path: {}.".format(google.__file__)) 
```

将此路径与 App Engine SDK 的位置进行比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-04T11:16:56.270

以下代码将打印所有 google python lib 路径

```
import google
print "google path: {}.".format(google.__path__) 
```

在我的机器上运行代码会打印这个

> 谷歌路径：['/usr/local/Cellar/protobuf/2.6.1/libexec/lib/python2.7/site-packages/google', '/usr/local/Cellar/python/2.7.11/Frameworks/Python .framework/Versions/2.7/lib/python2.7/site-packages/google']。

这与查找 google appengine 安装目录不同。在我的 Mac 上，安装程序会创建符号链接

```
/usr/local/google_appengine 
```

如果您正在进行单元测试，您可能需要将路径添加到您的代码

```
import sys
sys.path.insert(1, '/usr/local/google_appengine')
sys.path.insert(1, '/usr/local/google_appengine/lib/yaml/lib') 
```

# java - 无法编译

> ID：15592380
> 
> 赞同：0
> 
> 时间：2013-03-23T21:39:19.593
> 
> 标签：java

大家好，我创建了这段代码：

```
import mpi.* ;

class Hello {

  static public void main(String[] args) {
    MPI.Init(args);

int myrank = MPI.COMM_WORLD.Rank();
long startTime = System.currentTimeMillis();
if (myrank == 0) {
        String s = "111";
        byte[] bytes = s.getBytes();
        StringBuilder binary = new StringBuilder();
        for (byte b : bytes) {
            int val = b;
            for (int i = 0; i < 8; i++) {
                binary.append((val & 128) == 0 ? 0 : 1);
                val <<= 1;
            }
            binary.append(' ');
        }
        System.out.println("'" + s + "' to binary: " + binary);

//int i = 54564;  
//String text = String.format("%15d", i);
//System.out.println(message);  //testing

    char[] mess = binary.toCharArray();
    MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, 99);
} else {
    char[] mess = new char[20];
    MPI.COMM_WORLD.Recv(mess, 0, 200, MPI.CHAR, 0, 99);
    System.out.println("received:" + new String(mess));
}

long endTime = System.currentTimeMillis();
long duration = endTime - startTime;
System.out.println(duration);
    MPI.Finalize();
  }
} 
```

它应该做的是从 111 输入以二进制形式创建 3 个字节，然后将这 3 个二进制字节发送到网络上的另一台机器（一个基本的乒乓球程序）

但是我无法编译它

我收到这些错误：

```
Hello.java:28: error: cannot find symbol
    char[] mess = binary.toCharArray();
                        ^
  symbol:   method toCharArray()
  location: variable binary of type StringBuilder
1 error

C:\Users\Richard\Dropbox\Year 3\DISPARP\Coursework>javac Hello.java
Hello.java:30: error: cannot find symbol
    char[] mess = binary.toCharArray();
                        ^
  symbol:   method toCharArray()
  location: variable binary of type StringBuilder
1 error 
```

还有一个问题是

```
111' to binary: 00110001 00110001 00110001 
```

3 个字节？

编辑 ：

已更改为`char[] mess = binary.toString().toCharArray();`

但现在得到更多错误:(

：

```
MPJ Express (0.35) is started in the cluster configuration
Starting process <0> on <Raptor>
Starting process <1> on <Predator>
'111' to binary: 00110001 00110001 00110001
340
mpi.MPIException: java.lang.ArrayIndexOutOfBoundsException: Out of bounds in des
t array: 26
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:112)
        at mpi.Comm.recv(Comm.java:1305)
        at mpi.Comm.Recv(Comm.java:1255)
        at Hello.main(Hello.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at runtime.daemon.Wrapper.execute(Wrapper.java:165)
        at runtime.daemon.Wrapper.main(Wrapper.java:180)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Out of bounds in dest array
: 26
        at mpjbuf.Buffer.readCheckArgs(Buffer.java:3650)
        at mpjbuf.Buffer.read(Buffer.java:3333)
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:110)
        ... 9 more
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at runtime.daemon.Wrapper.execute(Wrapper.java:165)
        at runtime.daemon.Wrapper.main(Wrapper.java:180)
Caused by: mpi.MPIException: mpi.MPIException: mpi.MPIException: java.lang.Array
IndexOutOfBoundsException: Out of bounds in dest array: 26
        at mpi.Comm.Recv(Comm.java:1259)
        at Hello.main(Hello.java:34)
        ... 6 more
Caused by: mpi.MPIException: mpi.MPIException: java.lang.ArrayIndexOutOfBoundsEx
ception: Out of bounds in dest array: 26
        at mpi.Comm.recv(Comm.java:1317)
        at mpi.Comm.Recv(Comm.java:1255)
        ... 7 more
Caused by: mpi.MPIException: java.lang.ArrayIndexOutOfBoundsException: Out of bo
unds in dest array: 26
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:112)
        at mpi.Comm.recv(Comm.java:1305)
        ... 8 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: Out of bounds in dest array
: 26
        at mpjbuf.Buffer.readCheckArgs(Buffer.java:3650)
        at mpjbuf.Buffer.read(Buffer.java:3333)
        at mpi.SimplePackerChar.unpack(SimplePackerChar.java:110)
        ... 9 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:40:15.270

该方法`toCharArray`未定义`StringBuilder`。但是，您可以使用`String`返回 from的方法`toString`：

```
char[] mess = binary.toString().toCharArray(); 
```

*编辑：*我不熟悉，`MPI`但尝试使`char`数组缓冲区更大以在以下期间接受更多数据`Recv`：

```
char[] mess = new char[2000];
MPI.COMM_WORLD.Recv(...); 
```

# jquery - 图片加载，破坏某些脚本（Fancybox，Waypoints）？

> ID：15592383
> 
> 赞同：0
> 
> 时间：2013-03-23T21:39:31.490
> 
> 标签：jquery, fancybox, onload

我正在尝试预加载一些背景图像，效果很好。但是当脚本完成并进入我的网站时，某些脚本/插件无法工作......（Waypoints，Fancybox）

但是所有其他的，如 Skrollr、jPlayer 等，都可以正常工作。

这是我的代码...

```
 function preloadTrees() {

            var treesIndex = '0';

            var trees = $('.tree > span.preload');

            nextTree();

            function nextTree() {

                console.log('Tree (' + treesIndex + ') of (' + trees.length + ')');

                if (treesIndex == trees.length) {

                    alert('All Images Loaded (' + trees.length + ')');

                    preloadUI();

                }
                else {

                    var currentTree = trees[treesIndex++];

                    if (currentTree) {

                        var currentTreeObj = $(currentTree);
                        var month = currentTreeObj.data('month');

                        console.log('Loading Tree - ' + month);

                        var treeImage = new Image();

                        if (isiPad) {
                            var path = '../assets/images/sprite-trees-' + month + '@2x.png';
                        }
                        else {
                            var path = '../assets/images/sprite-trees-' + month + '.png';
                        }

                        treeImage.src = path;

                        treeImage.onload = function() {

                            $('span.' + month).each(
                                function(){
                                    $(this).css('background-image', 'url(' + path + ')');                                       
                                }
                            );

                            console.log('Image Loaded ' + path);

                            nextTree();

                        }

                    }
                }

            }

        } 
```

我将其缩小到的部分是：

```
treeImage.onload = function() { 
```

如果我删除它，整个网站都会正常工作。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:50:56.240

我只看到两件事...

首先，我没有看到您的预加载器包含在`$(function(){ /* preloader here */})`...如果您不这样做，那么您正在尝试使用 jquery 在 DOM 准备好之前从 DOM 中选择内容。

其次，这可能是因为您直接通过 onload 属性分配事件处理程序。尝试添加一个事件处理程序，而不是像：

```
// vanilla JS - note youll need to make this crossbrowser
treeImage.addEventListener('onload', function(){});

// or via jquery
$(treeImage).load(function(){}); 
```

# windows-runtime - 是否可以重载“ref new”以从特定堆分配？

> ID：15592386
> 
> 赞同：0
> 
> 时间：2013-03-23T21:39:46.133
> 
> 标签：windows-runtime

我很好奇是否可以重载“ref new”运算符以从我选择的堆中分配内存。我正在寻找一个库，允许用户指示我的库将动态分配的最大内存量。在内部，我计划使用 HeapCreate 和 HeapAlloc 使用用户提供的最大大小来定义我自己的堆。然后，如果我的任何内部内存分配超过了最大分配内存，我将优雅地失败。如果我有一个返回“ref 类”（如 Platform::String^）的 API，就会出现问题。一旦我使用“ref new”运算符，我就无法控制内存来自什么堆，我可能会违反与用户的合同。

有没有办法重载“ref new”运算符以从我自己的堆中分配，或者以其他方式跟踪我的库（或 DLL）用“ref new”分配了多少内存，以确保我不会违反合同我的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T02:13:27.517

Visual Studio 2012 C++ 编译器中目前没有允许您重载“ref new”运算符的扩展点。

此外，您提议的实现无法使用 HeapAlloc/HeapFree 创建自己的堆，因为这将无法通过 Store 认证。Windows 应用商店应用只能访问进程堆 (GetProcessHeap)。

# java - 缺少来自RelativePath 的playframework 2.0 VirtualFile

> ID：15592390
> 
> 赞同：2
> 
> 时间：2013-03-23T21:40:03.813
> 
> 标签：java, playframework, playframework-2.0

在 play 1.x 中，可以使用可以从相关应用程序路径获取文件的代码。像这样：

```
static File xmlDataFile= VirtualFile.fromRelativePath(
            "/app/parsers/data/some_data.xml"
    ).getRealFile(); 
```

此代码不是控制器的代码。但是 app/parsers 包中的一些代码。

如何在 playframework 2.x 中做到这一点？为爪哇！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T17:01:43.263

```
public static Result menu() throws IOException {

    String path = Play.application().resource("/resources/menu.json").toString();

    String content = Files.toString(new File(path), Charsets.UTF_8);

    return ok(content).as("JSON");
} 
```

# cuda - 关于 Nvidia 视觉分析器，翘曲效率是什么意思？

> ID：15592392
> 
> 赞同：0
> 
> 时间：2013-03-23T21:40:10.663
> 
> 标签：cuda, nvidia, profiler

我的意思是确切的定义，为什么 Nvidia 分析器总是告诉我，由于 SM3.5 中扭曲内的分支发散，我的代码的扭曲效率非常差？

我的代码已尽可能避免在 warp 内分支，如果我的代码是使用 SM 2.0 构建的，nvidia profiler 会告诉我，warp 效率接近 100%。

但是在同一张卡上，如果我的代码是用SM 3.5构建的，那么一下子warp效率会下降到35%-40%，这是令人难以置信的低效率。

并且指令发出模式是：双发出大约是每经线单发出的情况的50%。

其余的都很好，所以有人可以告诉我关于翘曲效率的确切定义是什么，他们是否认为是指在任何给定时间并发运行的翘曲中的活动线程的数量除以翘曲大小？

那么为什么我的代码在使用不同的 SM 版本构建时，在同一个 nvidia gpu 上具有如此显着不同的报告扭曲效率（SM3.5 的扭曲效率约为 35%，SM2.0 的扭曲效率接近 100%）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:19:57.143

对于报告为具有低翘曲效率的特定内核，您可以使用“发散分支”分析来查看哪些特定分支（如果有）导致发散，从而导致低翘曲效率。

# bash - 在 Bash 中，可以在一行上完成“mv-for 循环”吗？

> ID：15592397
> 
> 赞同：1
> 
> 时间：2013-03-23T21:40:31.900
> 
> 标签：bash, for-loop

我经常需要打字

```
#!/usr/bin/bash
for i in files-*
do
    mv $i ${i/files/items}
done 
```

这可以做得更简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:44:43.723

一句话：是的。更简单：可能不是。

```
for i in files-*; do mv "$i" "${i/files/items}"; done 
```

如果你经常需要这样的东西，你可以把它封装在一个函数中，然后调用那个函数。或者在您喜欢的编辑器中定义某种模板/文本块/宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:57:11.340

它不会比 Ansgar 已经建议的要短很多。但是，您可以通过以下几种机制节省一些输入：

### Bash 命令历史

使用 bash 的[命令历史记录](http://www.catonmat.net/blog/the-definitive-guide-to-bash-command-line-history/)来调用命令。不完全是高科技，但这可以为您节省大量打字，并且您不必在系统上保存/更改任何内容。

### 一个脚本文件

将命令放入您保存在路径中某处的脚本文件中。

```
 #/bin/bash
 for i in files-*; do 
     mv $i ${i/files/items} 
 done 
```

在这种情况下，我会保持多行完整以优化可读性

### 别名

[将命令的别名](http://www.ss64.com/bash/alias.html)添加到您的 .bashrc 文件中

```
 alias movem='for i in files-*; do mv $i ${i/files/items}; done' 
```

完成后，只需输入别名即可运行命令。这样做的一个优点是您不必创建脚本文件。

ps：`/usr/bin/bash`？？？你用的是什么系统？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:45:28.673

如果你已经`perl`安装，你可以使用`rename`：

```
rename 's/files/items/' files-* 
```

# cakephp - 没有 CLI 的 CRON 的 CakePHP 2.x 非公共 .php 脚本

> ID：15592399
> 
> 赞同：0
> 
> 时间：2013-03-23T21:40:48.590
> 
> 标签：cakephp, cron, cakephp-2.0, command-line-interface

我需要带有 CakePHP 2.x MVC 逻辑的 PHP 文件，不能从浏览器（URL）访问。但我不能使用控制台/shell，因为我没有合适的主机（我无法运行 cake bash 文件）我需要这个用于带有 PHP 脚本的 cronjob（例如 test.php - 我可以运行 php 脚本，但我不能运行 bash文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:05:34.140

没有办法在本地做到这一点。控制台命令将在控制台中运行。如果您无权访问控制台，则无法立即对其运行 cron。但是，有一种方法可以强制控制器/动作执行控制台脚本。然后您需要做的是运行一个 cron 来获取该控制器操作。

有人已经提供了示例代码来执行此操作：[https ://stackoverflow.com/a/9000052/372875](https://stackoverflow.com/a/9000052/372875)

如果他的 aco_sync() 操作在 ConsoleFuncs 控制器中，您可以获取[http://yoursite.com/console_funcs/aco_sync](http://yoursite.com/console_funcs/aco_sync)来运行 shell 脚本。在您要设置 cron 作业的机器上，该脚本会简单地对该 URL 进行 curl 操作，从而执行该控制台脚本。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:45:28.867

如果我没看错，您需要一种方法在无法通过浏览器或命令行访问该应用程序的 CakePHP 应用程序上运行 cron 作业吗？好吧，希望您的意思是您无法通过浏览器访问它，但它仍然存在于某种类型的网络上。创建一个向您的 Controller/Action 发出请求的脚本，然后对该脚本进行 cronjob。您可能想要使用 Cake 的 Json 或 XML 视图。此外，如果您需要保护用户名/密码后面的控制器/操作，请考虑阅读[创建无状态身份验证系统。](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-stateless-authentication-systems)

# jquery - 为什么我的 jQuery 代码不起作用？

> ID：15592402
> 
> 赞同：0
> 
> 时间：2013-03-23T21:40:51.707
> 
> 标签：jquery, html, forms

好吧，我知道代码可以工作，因为我在其他三个页面上使用它并且工作正常，但是我已经开始制作我的网站的移动版本。基本上，该代码用于实时登录。它序列化用户数据，显示“登录”消息，然后向文件发送 ajax 请求。然后来自该文件的响应内容替换登录消息，并根据情况发生不同的事情。我直接从一个工作示例中移植了代码，现在，尽管对代码进行了许多更改，但 jquery 似乎根本没有触发。这是我的jQuery代码：

```
function login() {
    var dataString = $('#login_form').serialize();
    console.log(dataString);
    $(".menu_login_form").html("<center>Logging in...</center>");
    $.ajax({
      type: "POST",
      url: "../include/actions/login.php",
      data: dataString,
      cache: false,
      success: function(html){
        $(".menu_login_form").html(html);
      }
    });
    return false;
  };
  $("#login_form").on("submit", login); 
```

这是我的html代码：

```
<div class="menu_login_form">
  <form id="login_form" method="post">
    <input type="text" name="username" placeholder="Username"><br>
    <input type="password" name="password" placeholder="Password" style=""><br>
    <input type="checkbox" name="remember" checked="checked" style="margin:0;margin-right:10px;margin-top:-2.5px"><span>Remember Me</span><br>
    <input type="submit" value="Login..." id="login_form_btn" class="btn">
  </form>
</div> 
```

有人知道这里有什么问题吗？

编辑：我现在已经开始工作了，我只是把它放在了错误的地方 - joeframbach 我已经接受了你的回答，因为它是那里唯一的一个。感谢您的所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:43:09.593

将其包裹在文档就绪的咒语中。这告诉 jquery 等到页面完全加载后再做任何事情。

```
$(function() {
function login() {
    var dataString = $('#login_form').serialize();
    console.log(dataString);
    $(".menu_login_form").html("<center>Logging in...</center>");
    $.ajax({
      type: "POST",
      url: "../include/actions/login.php",
      data: dataString,
      cache: false,
      success: function(html){
        $(".menu_login_form").html(html);
      }
    });
    return false;
};
$("#login_form").on("submit", login);
}); 
```

# mysql - 将varchar转换为日期MYSQL

> ID：15592405
> 
> 赞同：0
> 
> 时间：2013-03-23T21:41:11.700
> 
> 标签：mysql, sql, date, time

我有一个这种格式的 varchar：Thu Jun 14 22:20:40 +0000 2012 如何将 MYSQL 表中的整个列（称为“日期”）自动从 varchar 更改为日期时间格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:42:52.497

[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_str-to-date)

这应该会有所帮助，只需根据您的日期格式制作掩码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:43:41.523

用于[`STR_TO_DATE`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)以正确的格式获取数据

```
UPDATE `date`
SET `date` = STR_TO_DATE(`date`,'%a %b %H:%i:%s +0000 %Y') 
```

然后改变你的桌子：

```
ALTER TABLE mytable ALTER COLUMN `date` DATETIME NOT NULL; 
```

# java - 如何在以小速度进行鼠标定位时避免 int-floor 偏差？

> ID：15592410
> 
> 赞同：1
> 
> 时间：2013-03-23T21:41:31.617
> 
> 标签：java, swing, mouse, rounding, rounding-error

我有一个简单的算法，让对象在 Java 中以给定的最大速度跟随鼠标指针。该算法的关键在于：

```
// Set up displacement trackers for later.
// (These are used in another part of the algorithm, which rotates
//  the object to face along its path tangent with a moving average.)
double dx = 0, dy = 0;

// ... more code

// Find the angle of travel.
double angle = Math.atan2(m.y - target.getY(), m.x - target.getX());

// Set displacements with polar coordinate transforms.
dx = maxSpeed * Math.cos(angle);
dy = maxSpeed * Math.sin(angle);

// Now go there.
target.setX((int) Math.round(target.getX() + dx));
target.setY((int) Math.round(target.getY() + dy)); 
```

这是以每秒 30 帧的速度运行的。性能不是问题。

代码在中等到大的值`maxSpeed`（5 及以上都可以）下运行良好，但在非常低的值下，代码会导致对象仅以特定角度移动。例如，在 处`maxSpeed = 1`，目标只能以 45° 角移动。

* * *

以下是我对问题的理解：

让`maxSpeed`相等`1`。因此，因为`Math.sin`and`Math.cos`总是返回 [-1, 1] 范围内的值，`dy`并且`dx`也将在 [-1, 1] 范围内。当通过四舍五入转换为整数时（因为目标 x 和 y 位置被定义为`int`变量），位移均被四舍五入为`-1`、`0`或`1`，有效地将可能的移动限制在相同的八个角度。

因此，例如，如果对象从 (0, 0) 开始并且我将鼠标定位在 (300, 100)，则对象将首先完美地水平移动，然后以 -45° 的角度移动。我希望物体以（大约）恒定角度移动，从起点到目的地的（大约）直线。

除了将基础 x 和 y 坐标转换为值之外，最好的方法是什么`double`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:33:21.550

我觉得你的最后一句话是这里的主要线索。您的解决方案越“正确”，它就越会开始近似地简单地跟踪缓慢移动物体位置的小数部分。为什么不简单地这样做呢？

但是，如果这绝对不可能，那么总会有黑客攻击。

让我们通过在一维中减少到一个方向来简化问题，消除速度和符号的整数部分。您有一个对象以每帧 dx 个像素的速度移动，dx 介于 0.0 和 1.0 之间。

您正在执行帧更新。您将对象移动了多少个整数像素？零还是一？

我们不仅希望以正确的概率更新，而且或多或少地平滑（等间距）。此外，由于我们的目标是可预测的视觉行为，我们不想使用随机性。

如果我们不能使用它，我们需要的是跟踪帧号，知道我们在一系列等距更新中的位置。

我认为以相当简单的方式获得“正确”结果的好方法是这样的：

```
int last_frame = (int) (((double)(current_frame_number-1)) * dx);
int this_frame = (int) (((double)current_frame_number) * dx);
if( this_frame != last_frame ) {
   ++x; // advance one pixel
} 
```

对于任何给定的（常数！）dx，这应该给出正确的结果。在实践中，我希望它会给出一个不错的结果，dx 偶尔会发生变化。

我忽略了帧号溢出的影响，但它们应该是最小的（但要注意，如果你使用减法而不是加一）。

您必须重新添加不可分割的部分、符号以及存在两个维度的事实。如果你以每帧 (2.7,-0.4) 的速度移动，那么你总是每帧移动 (2,0)，你使用上面的方法 dx=0.7 来确定你是否额外移动 (1,0)，并使用dx=0.4 来确定你是否额外移动 (0,-1)。

但是，尽管从理论上考虑这是一个有趣的问题，但对于实际实现，我真的建议您只使用双精度值作为基础值。除了上述更难理解的事实之外，面对非恒定速度也不能保证正确 - 所以它比明显的解决方案更复杂和更糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:05:49.640

我对 Java 有点生疏，但也许你可以使用[向量数学](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/vecmath/Vector2d.html)而不是三角函数？

```
double xPos, yPos; // should be initialized with the starting position and updated with each change in position - rounding on each update will accumulate errors and produce odd behavior as you described
// start of update
Vector2d direction = (new Vector2d(m.x - target.getX(), m.y - target.getY())).normalize(); // create unit vector in the direction of the target
Vector2d velocity = direction.scale(maxSpeed); // set the scalar speed in the direction of the target
xPos += velocity.x;
yPos += velocity.y; 
target.setX((int) xPos); // move (maxSpeed)*cos(angle) units in the x direction
target.setY((int) yPos); // move (maxSpeed)*sin(angle) units in the y direction
// end of update 
```

...应该工作 - 比触发方法更快:)。

# amazon-web-services - 可以让 AWS 健康检查页面吗？

> ID：15592418
> 
> 赞同：0
> 
> 时间：2013-03-23T21:42:46.500
> 
> 标签：amazon-web-services, amazon-route53

我希望我们的 Route53 AWS 运行状况检查来检查页面的运行状况，不一定是目录（例如：[http://xxx.xx.xxxx:80/](http://xxx.xx.xxxx:80/)）

这可能吗？原因是，如果我们的 lighttpd 服务器出现故障或说 wordpress 使服务器崩溃等；让它只检查一个目录（例如：[http://xxx.xx.xxxx:80/](http://xxx.xx.xxxx:80/)）可能不会返回 500 错误....但是我们的应用程序将关闭。

我可以让它检查[http://xxx.xx.xxxx:80/Page/index.php](http://xxx.xx.xxxx:80/Page/index.php)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:53:05.147

[Amazon Route 53](http://aws.amazon.com/route53/) doesn't prevent you to check a 'page', to the contrary, it only cares about the path being a regular HTTP endpoint/resource returning respective [HTTP status codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes), see e.g. [Creating Health Checks](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/health-checks-creating.html):

> **Path (HTTP Only)**
> The path that you want Route 53 to request when performing health checks. The path can be any value for which your endpoint will return an HTTP status code of 2xx or 3xx when the endpoint is healthy, for example, the file /docs/route53-health-check.html. Note that the leading / is required.

Please also be aware of the detailed health check specifics outlined on [Managing Resource Availability with Route 53 Failover](http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/health-checks.html), which might affect your testing/production results, e.g. for *HTTP health checks*:

> *   **HTTP health checks**: Route 53 must be able to establish a TCP connection with the endpoint within four seconds, and the endpoint must respond with an HTTP status code of less than 400 within two seconds.
>     
>     
> *   **All health checks**: For a health check to change from healthy to unhealthy, it must fail three consecutive times. For a health check to change from unhealthy to healthy, it must pass three consecutive times.

# ios - 我的 iPad 横向闪屏跳转到纵向

> ID：15592421
> 
> 赞同：3
> 
> 时间：2013-03-23T21:42:53.250
> 
> 标签：ios, ipad, orientation, unity3d

我正在使用 Unity3D 和 Xcode 开发一个通用应用程序。iPhone 版本完美无缺，而且它的方向是纵向的。启动画面在纵向模式下很好。

现在，除了闪屏之外，我的 iPad 版本中的所有内容都运行良好。iPad版本仅在横向模式下，因此会创建启动画面，但是...在iPad上运行时，启动画面在横向开始时正常，但在某些时候，它会跳转到纵向模式？我不知道为什么并找到解决这个问题的地方。

有没有人遇到过同样的问题或知道去哪里找？

希望得到帮助并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:07:23.643

Unity 在加载第一个场景时第二次显示启动画面（在此之前，iOS 显示启动画面）。查看 XCode 项目中的 SplashScreen.mm，您会看到一个专门用于此的类。一旦设置了视图控制器和视图，就会从 iPhone_View 类调用 ShowSplashScreen() 方法。

在更新 Unity 版本（我认为是 4.x 更新之一）后，我遇到了类似的问题。我在我的 XCode 文件中进行了自定义（一些包括更改视图和覆盖闪屏内容）。因此，在构建我的 Unity 项目时，我总是只是“附加”到 XCode。为了解决这个问题，我不得不删除我现有的 XCode 项目，允许 unity 从头开始​​创建一个新项目，然后手动移植我的自定义项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T13:06:34.103

使用它在主窗口上显示飞溅...这会将图像旋转到横向模式

```
 splash = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, self.window.frame.size.height+255, self.window.frame.size.width)];
  splash.transform = CGAffineTransformMakeRotation(270* M_PI / 180.0);

  splash.image = [UIImage imageNamed:@"final"];
  [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO];
  [self.window addSubview:splash];
  [self.window makeKeyAndVisible]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T09:56:44.330

对于遇到此问题的任何人，我通过在 Info.plist 中添加以下行来解决此问题：

```
<key>UISupportedInterfaceOrientations~ipad</key>
<array>
    <string>UIInterfaceOrientationLandscapeRight</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
</array> 
```

# c++ - 如何围绕模板化成员函数不能是虚拟的限制进行设计

> ID：15592424
> 
> 赞同：6
> 
> 时间：2013-03-23T21:43:10.490
> 
> 标签：c++, templates, virtual

我遇到了一个设计问题，其中（在 C++ 中）我希望（非模板类的）模板化成员函数是虚拟的，并且想知道是否有一个好的、优雅的方法来解决这个问题。

情况是这样的，我有处理*通用*项目*的**机器*。我为具有虚拟*进程（Item）功能的**机器*使用抽象基类，以便每台机器都可以定义自己独特的处理方法。问题是这些项目也是“通用的”，因为它们为如何处理它们公开了某些接口。出于某种原因（主要是为了性能......没有 vtable 开销），我想对这些项目使用编译时多态性。这样现在每台机器都会有一个如下界面：

 ***```
class Machine
{ public:
    template <typename T>
    virtual void process(T& item) = 0; 
}; 
```

然而，这在 C++ 中是不可能的，因为模板化的成员函数不能是虚拟的。当然，我可以在 Item 类型 T 上制作机器类模板，但这在更大的设计方案中给我增加了更多的麻烦，而且 Machine 类的其他部分实际上不依赖于 Item……它只是 process() 函数的一个参数.

有没有更好的方法解决这个问题，或者有什么建议可以提供这种处理通用项目系列的通用机器系列（其中项目使用编译时多态性）。就我的设计而言，我是否离题了。

感谢任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:52:05.073

通常，使用双重调度。

```
class Machine;
class Item {
public:
    virtual void bounce(Machine& mach);
};
class Machine {
public:
    template<typename T> void process(T& t);
    virtual void process(Item& i) {
        return i.bounce(*this);
    }
};
template<typename T> class CRTPItem {
public:
    virtual void bounce(Machine& mach) {
        return mach.process(*(T*)this);
    }
};
class ConcreteItem : public CRTPItem<ConcreteItem> {
public:
    // blah blah
}; 
```

在这种情况下，您不需要整个 ConcreteItem 接口的虚拟开销，它们也不需要任何共同点，只需要`bounce`通过继承自`CRTPItem`. 这只是两个 vtable 调用，而不是您最初的一个，而不是需要对 Item 的所有功能进行 vtable 调用，并且如果您可以创建虚拟模板，接口仍然可以保留所有强类型。***

# mysql - 所有可能的行没有重复

> ID：15592430
> 
> 赞同：0
> 
> 时间：2013-03-23T21:44:20.850
> 
> 标签：mysql

我有 2 列对应于音乐相关数据库中的心情 - 心情，心情 2

我想返回所有可能的行而不重复。在此站点上遇到类似的答案后，我对查询进行了如下调整，但仍然没有得到任何可见的结果。

```
$resultMOODinner = mysql_query

("SELECT (var) FROM (
     SELECT Mood AS var FROM Music
     UNION
     SELECT Mood2 AS var FROM Music
                   )
AS Temp ");

while ($rowMOOD2 = mysql_fetch_array($resultMOODinner, MYSQL_ASSOC))
  {
$Mood = $rowMOOD2["Temp"];
echo "$Mood";
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:43:22.833

根据其他地方的评论，**最简单**的解决方案是使用 SELECT DISTINCT：

```
SELECT DISTINCT var 
FROM (
      SELECT Mood AS var FROM Music 
      UNION SELECT Mood2 AS var FROM Music
) as temp 
```

然而，这必须对数据库进行两次拖网 - 但是数据库的全部意义在于它管理大量数据 - 您应该很少一次查看所有数据 - 实际上您应该积极寻求其他解决方案。但是现在先不管这个，一个更**有效**的解决方案是只读取一次数据：

```
SELECT DISTINCT IF (mult.val='A', mood, mood2)
FROM music,
(SELECT 'A' UNION SELECT 'B') mult 
```

顺便说一句，您的 PHP 代码正在选择一个不在您的查询中的属性 - Temp 别名应用于子查询）。

但是，根据您提供的信息，可以得出的唯一可能结论是您的数据库未标准化 - 因此**正确**的解决方案是标准化您的数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T21:54:01.423

使用不同的：

```
 SELECT DISTINCT Mood AS var FROM Music
 SELECT DISTINCT Mood2 AS var FROM Music 
```

# java - Array of string in Process in java has space in a parameter

> ID：15592434
> 
> 赞同：0
> 
> 时间：2013-03-23T21:44:46.270
> 
> 标签：java, macos, perl, terminal

I write some java code in order to execute some external commands in the mac terminal. The original command to run in the terminal is

```
xpl-sender -c plugwise.basic -m xpl-cmnd command=livepower device=B83229 -w 3 
```

It is really weird because if I use the command string array likes this:

```
Process ls = Runtime.getRuntime().exec(new String[]{
   "/usr/local/bin/xpl-sender",
   "-c", "plugwise.basic",
   "-m", "xpl-cmnd",
   "command=" + command,
   "device=" + id}); 
```

Without "-w 3", thing works normally but of course it lacks of parameters.

But if i use like this

```
Process ls = Runtime.getRuntime().exec(new String[]{
   "/usr/local/bin/xpl-sender",
   "-c", "plugwise.basic",
   "-m", "xpl-cmnd",
   "command=" + command,
   "device=" + id,
   "-w 3"}); 
```

With "-w 3" at the end, nothing works anymore, the command seems that it isn't executed.

And if I use like this

```
Process ls = Runtime.getRuntime().exec(new String[]{
   "/usr/local/bin/xpl-sender",
   "-c", "plugwise.basic",
   "-m", "xpl-cmnd",
   "command=" + command,
   "device=" + id + " -w 3"}); 
```

With +" -w 3"at the end, the perl program which is used to executed the command will return

```
Illegal hexadecimal digit '-' ignored at /Library/Perl/5.12/xPL/Dock/Plugwise.pm line 964. 
```

It seems that the error caused by the space between -w and 3....
Can someone show me what i did wrong here?
Thank you very much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:50:24.560

Due to the way the Runtime interprets arguments, you need to split the string up: `"-w"` and `"3"`, not `"-w 3"`. The designers chose to implement this behavior because there *are* some cases where you want to specify arguments with spaces in them. E.g:

> grep -r -e "Where are they now" .

Rather than making developers have to manually escape the string "Where are they now", in the example above, the Runtime allows for one to simply pass the entire string as an argument, which then gets passed to the underlying process. It does mean however that in cases like this:

> ls -al ~

That each argument needs to be passed to the Runtime separately. In the above example if you passed in one argument as "ls -al", it would actually be passed to the underlying process as ***one*** string, and of course, the process would fail because there is no existing binary with that name.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:51:05.480

You are doing the equivalent of shell command

```
xpl-sender ... '-w 3'   # One 4-char arg 
```

instead of

```
xpl-sender ... -w 3     # Two args 
```

You want:

```
Process ls = Runtime.getRuntime().exec(new String[]{
   "/usr/local/bin/xpl-sender",
   "-c", "plugwise.basic",
   "-m", "xpl-cmnd",
   "command=" + command,
   "device=" + id,
   "-w", "3"}); 
```

Since most programs don't accept options after non-options (although you report it works for your `xml-sender`), and because it looks better, I'd move the `-w` up.

```
Process ls = Runtime.getRuntime().exec(new String[]{
   "/usr/local/bin/xpl-sender",
   "-c", "plugwise.basic",
   "-m", "xpl-cmnd",
   "-w", "3",
   "command=" + command,
   "device=" + id}); 
```

# javascript - 出现 Uploadify 错误：uploadifySettings 不是函数

> ID：15592437
> 
> 赞同：0
> 
> 时间：2013-03-23T21:45:03.927
> 
> 标签：javascript, error-handling, uploadify

我正在研究一种让用户使用 Uploadify 选择他们想要将文件上传到哪个文件夹的方法。我有一堆 javascript 代码，但除了最后一点，它都可以工作。如果你愿意，我可以展示这一切，但我坚信这不是问题。

这是我的代码：

```
$("#file_upload").uploadify({
        'buttonText'    : 'Upload New Files',
        'height'        : 30,
        'swf'           : 'uploadify/uploadify.swf',
        'uploader'      : 'uploadify/uploadify.php',
        'width'         : 120,
        'folder'        : $('#folder').val(),
        'auto'          : true,
        'multi'         : true,
        'onUploadComplete' : function(file) {
            location.reload();
        }
    });

    $("#folder").change(function () {
        var path = "/" + $(this).val();
        $('#file_upload').uploadifySettings("scriptData", {'folder': path });
        alert(path);
    }); 
```

此代码包含在 document.ready() 中。

这段代码的作用是

1.  初始化uploadify函数
2.  当用户更改#folder 的值（这是下拉菜单）时，让uploadify 函数中的值“文件夹”发生变化。

当我单击选择框时，没有任何反应。如果我注释掉这一行：

```
$('#file_upload').uploadifySettings("scriptData", {'folder': path }); 
```

我收到警报，如果我把线路留在里面，它不会做任何事情。

我咨询了 Firebug，发现我收到以下错误：

```
TypeError: $(...).uploadifySettings Not A Function 
```

从逻辑上讲，我会说这意味着我没有 uploadify 没有链接到页面上。但是如果我上传文件，它就会上传，所以它就在那里并且可以工作。

这是我的 HTML/PHP：

```
<h3>Your Uploaded Files</h3>
    <input type="file" name="file_upload" id="file_upload">
    <span style="margin: 5px 10px 0 0; float: left;">to</span>
    <select id="folder">
        <?php
        echo '<option value="'.$directory.'">Downloads</option>';
        $friendlyDir;
        foreach(glob('downloads/*', GLOB_ONLYDIR) as $dir) {
          $friendlyDir = str_replace("downloads/","",$dir);
          echo '<option value="'.$dir.'">'.ucfirst(strtolower($friendlyDir)).'</option>';
        }
        ?>
    </select>
    <div id="file_viewer"></div> 
```

HTML/PHP 工作正常，但我想我会把它包括在内，这样你就可以看到触发器等是什么。

如果有人可以调查一下，我将不胜感激。我没有跨浏览器测试它，但我使用的浏览器是 Firefox 19.0.2。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:26:28.793

我最终这样做是为了在其上使用 uploadify 功能归档：

```
var path;
    $("#file_upload").uploadify({
        'buttonText'    : 'Upload New Files',
        'height'        : 30,
        'swf'           : 'uploadify/uploadify.swf',
        'uploader'      : 'uploadify/uploadify.php',
        'width'         : 120,
        'folder'        : $('#folder').val(),
        'auto'          : true,
        'multi'         : true,
        'folder'        : path,
        'onUploadStart' : function(file) {
           $('#file_upload').uploadify("settings", 'formData', {'folder' : path});
        },
        'onUploadSuccess' : function(file, data, response) {
            //alert('The file ' + file.name + ' was successfully uploaded with a response of ' + response + ':' + data);
            location.reload();
        }
    });

    $("#folder").change(function () {
        path = "/" + $(this).val();
    }); 
```

在 uploadify.php 上，我将其更改为：

```
//$targetFolder = '/file/downloads'; // Relative to the root
$targetFolder = "/file".$_POST['folder'];

if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png','pdf','doc','docx'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$targetFile);
    echo $targetFolder;
} else {
    echo 'Invalid file type.';
}
} 
```

现在它可以工作了：D

# android - 如何防止滚动到焦点 EditText

> ID：15592441
> 
> 赞同：6
> 
> 时间：2013-03-23T21:45:29.820
> 
> 标签：android, android-edittext, textview, android-scrollview

当 Activity 获得焦点时，Android 会滚动到 ScrollView 内的焦点 EditText。

我怎么能告诉 Android 不要这样做，而是保持滚动位置？

情况：

验证方法必须滚动到 TextView 以引起用户的注意。它将焦点设置到可视区域之外的 EditText 以避免用户混淆（当 Android 在向下滚动后将焦点设置在最近但不相关的 EditText 上时会发生这种情况）。

用户单击一个按钮并通过 startActivityForResult 在第二个活动中输入数据。onActivityResult 在同一个 TextView 中呈现结果。现在 TextView 不再可见，因为 Android 滚动到焦点 EditText。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:57:51.980

尝试`setSelected(false)`编辑文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:50:38.340

Instead of the EditText one can use another View to steal the focus e.g. layout with attributes android:focusable="true" and android:focusableInTouchMode="true". Android does not seem to use this to scroll ScrollView which is exactly what I need. It's a hack and discouraged but my 1st attempt is a hack too, to work around a bug so who cares :). Thanks matthias for the hint.

# bash - 从配置文件中提取并执行 key=command 对

> ID：15592442
> 
> 赞同：-1
> 
> 时间：2013-03-23T21:46:02.470
> 
> 标签：bash

这在 bash 中应该很简单，我不知道我为什么要为此苦苦挣扎。我是 bash 新手，所以请温柔一点。

伪代码：

```
 read a configuration file, extract the first line beginning with a key/value pair
    in the format exec=/path/to/myprog -opt1 -opt2 $var1 $var2 ...
    check that the /path/to/myprog is executable
    if executable then
       replace $var1, ... with the contents of the same bash variables in the script
       check that all variables were replaced with existing bash variables
       if aok 
           execute the command and be happy
       else
           complain echoing the partially-substituted command string
       fi
    else
       complain echoing the un-substituted command string
    fi 
```

我尝试的任何方法似乎都无法正常工作。我已经消磨了足够的时间尝试各种事情。建议，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:42:03.173

配置文件：

```
exec=/bin/ls -l $var1 $var2 
```

bash 文件：

```
#!/bin/bash

CONFIG="tmp.conf"

var1=./
var2=helo

function readconf() {
    args=()
    while IFS=' ' read -ra argv; do
        exec=${argv[0]#*=}
        `command -v ${exec} >/dev/null 2>&1 || { echo >&2 "I require ${exec} but it's not installed.  Aborting."; exit 1; }`
        for i in "${argv[@]:1}"; do
            if [[ $i == \$* ]]; then
                sub=${i:1}
                args+=(${!sub})
            fi
        done
    done < $CONFIG
    echo ${args[@]}
}

readconf 
```

上面的代码提供了实现所需的关键组件。至少我是这么认为的。您可以基于此骨架添加您的逻辑。

以下网址可能会有所帮助：

[从 Bash 脚本检查程序是否存在](https://stackoverflow.com/questions/592620/check-if-a-program-exists-from-a-bash-script)

[在 bash 中，如何检查字符串是否以某个值开头？](https://stackoverflow.com/questions/2172352/in-bash-how-can-i-check-if-a-string-begins-with-some-value)

[如何在 Bash 的分隔符上拆分字符串？](https://stackoverflow.com/questions/918886/split-string-based-on-delimiter-in-bash)

[Bash：向数组添加值而不指定键](https://stackoverflow.com/questions/1951506/bash-add-value-to-array-without-specifying-a-key)

[使用变量名作为变量名](http://www.linuxquestions.org/questions/linux-newbie-8/problem-with-bash-script-variable-name-within-variable-name-710320/)

# .htaccess - 在 htaccess 中通过 IP 重定向用户

> ID：15592443
> 
> 赞同：0
> 
> 时间：2013-03-23T21:46:16.003
> 
> 标签：.htaccess, redirect, ip

所以我一直在尝试在我的网站上完成一些建设。但是，我希望这样，如果用户与我的 IP 不匹配，他们将被重定向到“建设中”页面。但是，我希望此 IP 匹配适用于 domain.com 上的所有页面，除了正在建设中的页面。

有没有办法可以在我网站根文件夹的 .htacess 中添加这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:50:27.063

尝试将这些规则添加到 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !^12\.34\.56\.78$
RewriteRule !^/?under_construction.html /under_construction.html [L,R] 
```

其中**12.34.56.78**是*您的*IP 地址，/ **under_construction.html**是您正在建设的页面。您需要确保在使用 mod_rewrite 的子目录中没有其他 htaccess 文件（因为它会取代这些规则）。

# android - 在 android 中将位图绘制到矩形时出现问题。

> ID：15592445
> 
> 赞同：0
> 
> 时间：2013-03-23T21:46:31.457
> 
> 标签：android, performance, canvas, drawbitmap

我无法使用 canvas.drawBitmap(Bitmap, Rect, Rect, Paint) 方法将位图绘制到表面视图。

当我放这样的东西时：

```
canvas.drawBitmap(square, new Rect(0, 0, 100, 100), new Rect(180, 130, 100, 100), mpaint); 
```

它呈现如下内容：

[http://s21.postimg.org/69jlkn71j/image.png](http://s21.postimg.org/69jlkn71j/image.png)

如果我放这样的东西：

```
canvas.drawBitmap(square, new Rect(0, 0, 100, 100), new Rect(50, 90, 100, 100), mpaint); 
```

屏幕如下所示：

[http://s9.postimg.org/qvp9635vj/image.png](http://s9.postimg.org/qvp9635vj/image.png)

真的很耐磨，各种方法都试过了，还是不行。你知道发生了什么吗？它与 lockcanvas() 和 unlockcanvasandpost() 过程有关吗？

我真的很感谢您的帮助，我已经在这里待了几个小时。

哦，我忘了提到当我把正方形全屏显示时：

```
canvas.drawBitmap(square, new Rect(0, 0, 100, 100), new Rect(0, 0, this.getWidth(), this.getHeight()), mpaint); 
```

它按应有的方式绘制它....

# ruby-on-rails - 带有 turbolinks 的 gumroad 覆盖

> ID：15592446
> 
> 赞同：1
> 
> 时间：2013-03-23T21:46:53.233
> 
> 标签：ruby-on-rails, turbolinks

我似乎无法使用 rails turbolinks 进行覆盖。

它在页面首次加载时有效，但在使用 turbolinks 导航时无效。也就是说，当通过 turbolinks 加载页面时，gumroad 链接会在应该显示叠加层时将您带到 gumroad 站点。

有任何想法吗？

我试过这段代码：

```
$(document).on('page:change', function() {
  //load gumroad
  $.getScript("https://gumroad.com/js/gumroad.js")
      .done(function() {
        console.log("loaded gumroad");
      })
      .fail(function() {
        console.log("gumroad loading failed");
      });
}); 
```

我还尝试了 html 头中的常规脚本 src。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T09:43:52.810

您要添加：

> Gumroad.init();

到你的`page:change`活动。

# android - 使用 VideoView 时应用程序崩溃

> ID：15592447
> 
> 赞同：0
> 
> 时间：2013-03-23T21:46:53.350
> 
> 标签：android

我一直在尝试创建一个显示 VideoView 的应用程序，在它下面有三个按钮，如此处所示`video.xml`，它是`Relative Layout`.

```
<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Choice 1"
    android:onClick="choice1" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_centerHorizontal="true"
    android:text="Choice 2" 
    android:onClick="choice2"/>

<Button
    android:id="@+id/button3"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Choice 3" />

<VideoView
    android:id="@+id/videoView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button1"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="choice3" /> 
```

然后，我在Method`VideoActivity.java`下设置了以下源代码。`onCreate`

```
View video = (VideoView) findViewById(R.id.videoView1);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(video);
    ((VideoView) video).setMediaController(mediaController);
    video.setKeepScreenOn(true);
     Uri video1 = Uri.parse("android.resource://" + getPackageName() + "/"
                + R.raw.start);
              VideoView videoHolder = null;
            videoHolder.setVideoURI(video1);
            ((VideoView) video).start();
            video.requestFocus(); 
```

这是 LogCat 报告

```
I/ActivityManager( 149): Starting: Intent {cmp=com.apw.games.rpg.medieval.silver/.VideoActivity } from pid 2408
I/WindowManager( 149): Setting rotation to 1,
animFlags=1
I/ActivityManager( 149): Config changed: {scale=1.0 imsi 310/4 loc=en US touch=3 keys=2/1/1 nav=2/1 orien=2 layout-18 uiMode=17 seq=37}
DQuickSettings( 239): setGPSButton()
W/dalvikvm( 2408): threadid=1: thread exiting with uncaught exception (group=0x40018560_
E/AndroidRuntime( 2408): FATAL_EXCEPTION: main
E/AndroidRuntime( 2408): java.lang.RuntimeException:
Unable to start activity      ComponentInfo{com.apw.games.rpg.medieval.silver/com.apw.games.rpg.medieval.silver.VideoActivity}: java.lang.NullPointerException
E/AndroidRuntime( 2408): at Android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
E/ANdroidRuntime( 2408): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
E/AndroidRuntime( 2408): at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime( 2408): at android.app.ActivityThread$H.handle.Message(ActivityThread.java931)
E/AndroidRuntime( 2408): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 2408): at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 2408): at android.app.ActivityThread.main(ActivityThread.java:3694)
E/AndroidRuntime( 2408): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 2408): at java.lang.reflect.Method.invoke(Method.java.507)
E/AndroidRuntime( 2408): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
E/AndroidRuntime( 2408): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
E/AndroudRuntime( 2408): at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 2408): Caused by java.lang.NullPointerException
E/AndroidRuntime( 2408): at com.apw.games.rpg.medieval.silver.VideoActivity.onCreate(VideoActivity.java)
E/AndroidRuntime( 2408): at android.app.Intrumentation.callActivityOnCreate(Instrumentation.java.1047)
E/AndroidRuntime( 2408): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:37:40.023

更准确一点......以下代码可以工作，但它完全未经测试。如果它不起作用，你应该看看这个线程：[如何在 android 中从 assets 文件夹或 raw 文件夹播放视频？](https://stackoverflow.com/questions/3028717/how-to-play-videos-in-android-from-assets-folder-or-raw-folder)

```
VideoView video = (VideoView) findViewById(R.id.videoView1);
MediaController mediaController = new MediaController(this);
mediaController.setAnchorView(video);
video.setMediaController(mediaController);
video.setKeepScreenOn(true);
Uri videoUri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.start);
video.setVideoURI(videoUri);
video.start(); 
```

## 还...

```
VideoView videoHolder = null;
            videoHolder.setVideoURI(video1);` 
```

崩溃的原因应该是这两行，因为您使用的 videoHolder 必须是`null`这一点 - 所以你得到一个`NullPointerException`.

一般来说，您应该将`video`字段的类型更改为`VideoView`，因此您不需要转换到`VideoView`您使用它的任何地方。

# actionscript-3 - 在 AS3 中严格维护类层次结构是否有效，还是将所有内容放在一个地方更好？

> ID：15592448
> 
> 赞同：0
> 
> 时间：2013-03-23T21:46:59.077
> 
> 标签：actionscript-3, oop, structure

哪一种是设计复杂的、严格 OOP AS3 软件的最有效方法？

可以说，我有这个层次结构：主类->用户界面类->菜单类->按钮类

哪个更好？

*   **仅将代码的主要**部分分成类，如“telecom”、“userinterface”、“externalinterface”等，并添加子部分，如“menu”，然后将“buttons”添加到“menu ” ，**来自**“用户界面”类`addChild()`。

**或者**

*   还分离了软件的主要部分，**但也分离了子部分**。：我没有在**“用户**界面”中定义按钮，而是在“用户界面”中`appendChild()`定义的“菜单”中定义按钮，而是定义按钮**在“菜单”类**中，因此我不必将数十个代码放在一个类中（在本例中为“用户界面”），从而使其更有条理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:10:48.313

> 在 AS3 中严格维护类层次结构是否有效，还是将所有内容放在一个地方更好？

将所有东西放在一个地方很少是一个好主意。另外，我认为这与类层次结构没有直接关系（如在父子类中）——我认为你的意思是“谁创造了什么”中的层次结构。

我自己的偏好是在类之间有大量的分离和解耦，然后将它们组装在一个地方。这种“分而治之”的方法对于良好的 OOP 设计至关重要。

> 哪一种是设计复杂的、严格 OOP AS3 软件的最有效方法？

对于这个一般性问题，我给你一个指向 MVC 模式的一般性指针。它是一种广为人知的用于构建交互式应用程序代码库的架构，并且与 AS3 配合得非常好。

您可以在此处了解关键概念[(PDF)](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/actionscript/pdfs/ora_as3_design_patterns_ch12.pdf)，然后尝试将其应用于您的情况。您将学会识别代码中的“角色”，从而能够以更好的方式组织代码。

# php - 自定义函数在应该返回 false 时返回 true？

> ID：15592450
> 
> 赞同：1
> 
> 时间：2013-03-23T21:47:02.703
> 
> 标签：php

我有下面的函数，它接受一组 IP cidr 或单个 IP，如下所示：

```
$cidrs = array("127.0.0.1","65.87.43.65/32"); 
```

ETC..

然后该函数检查给定的 IP 是否在该 IP 和 CIDR 的数组中侦听，无论它是在 CIDR 中还是指定的单个 IP。

问题是，如果 IP 不包含 CIDR 掩码，那么它将始终返回 true - 无论列表中的 IP 是什么。

我确信它至少可以工作一次，但是我不知道我做了什么改变以使其表现不同。

功能如下：

```
function testIP($user_ip, $cidrs)   
{  
    $ipu = explode('.', $user_ip);  
    foreach ($ipu as &$v)  
        $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);  

    $ipu = join('', $ipu);  
    $res = false;  

    foreach ($cidrs as $cidr)   
    {  

        $parts = explode('/', $cidr);  

        if (empty($parts))  
        {  
            if (in_array($user_ip, $cidrs))  
            {  
                $res = true;  
                break;  
            } 
            break;         
        }  

        $ipc = explode('.', $parts[0]);  

        foreach ($ipc as &$v) $v = str_pad(decbin($v), 8, '0', STR_PAD_LEFT);  

        $ipc = substr(join('', $ipc), 0, $parts[1]);  

        $ipux = substr($ipu, 0, $parts[1]);  
        $res = ($ipc === $ipux);  
        if ($res) break;  
    }  
    return $res;  
} 
```

我一生都无法弄清楚为什么它不再起作用 - 我为此浪费了很多时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:54:55.390

`explode`将始终返回一个数组。你的`if (empty(...`检查失败了。`if (count($parts)==1)`那就试试`$res = in_array($user_ip, $cidrs)`

编辑：另外，不要中断，而是继续下一个 cidr：

```
 if (count($parts)==1)
    {  
        if (in_array($user_ip, $cidrs))  
        {  
            $res = true;  
            break;  
        } 
        continue;         
    } 
```

# java - Java - 将字节转换为字符串并与另一个进行比较

> ID：15592454
> 
> 赞同：1
> 
> 时间：2013-03-23T21:47:29.433
> 
> 标签：java, string, compare, byte

我刚刚开始学习 Java，对于我的第一个挑战，我试图从 MP3 中读取 ID3v1 标签。我将 MP3 的最后 128 个字节读入一个字节数组并从那里拆分出来。为了检查我是否找到了一个有效的 ID3 标签，我将数组中的前 3 个字节转换为字符串，并将其与“TAG”进行比较。问题是由字节组成的字符串永远不会与“TAG”字符串匹配，即使当我在 eclipse 调试器中运行它时它看起来应该如此。

我已经粘贴了我在下面使用的代码，谁能指出我在这里做错了什么？

```
byte tagBytes[] = {84, 65, 71}; //Normally filed from a file, just here as an example.
String tagHeader = null; //String to hold tag header
tagHeader = Character.toString((char)tagBytes[0]) + 
            Character.toString((char)tagBytes[1]) + 
            Character.toString((char)tagBytes[2]);
if (tagHeader != "TAG"){
    System.out.println("No ID3v1 tag found");
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:54:22.050

不能比较字符串，`==`因为这会检查内存中的文字引用是否相同。而是做`"TAG".equals(tagHeader)`或`"TAG".equalsIgnoreCase(tagHeader)`做不区分大小写的比较。

您还可以简化字符串构建，如下所示：

```
StringBuilder sb = new StringBuilder();
for(int i = 0; i < 3; i++) {
    sb.append((char)tagBytes[i]);
}
tagHeader = sb.toString(); 
```

甚至，正如@Vulcan 建议的那样，简单地：

```
tagHeader = new String(tagBytes,0,3); 
```

您可能还想指定字符集，否则字节可能会被错误地转换。根据数据的编码方式，您可能需要指定不同的字符集：

```
tagHeader = new String(tagBytes,0,3,Charset.forName("UTF-8")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:53:26.310

`String`如果您确定它们都是 ASCII（或者如果您知道编码），则可以将字节转换为 a 。然后你应该与`equals`not进行比较，`!=`因为后者会检查它是否不是同一个实例。在您的情况下，它总是一个不同的实例。

```
 byte tagBytes[] = {84, 65, 71};
    String tagHeader = new String(tagBytes, Charset.forName("US-ASCII"));
    if (!"TAG".equals(tagHeader)){
        System.out.println("No ID3v1 tag found");
        return null;
    } 
```

`String`或者您可以通过这样做完全避免创建冗余对象：

```
 byte tagBytes[] = {84, 65, 71};
    if (!('T' == tagBytes[0] && 'A' == tagBytes[1] && 'G' == tagBytes[2])){
        System.out.println("No ID3v1 tag found");
        return null;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:58:11.997

这会将字节转换为字符串并正确：

```
byte tagBytes[] = {84, 65, 71}; 
String s = new String(tagBytes, Charset.forName("US-ASCII")); 
```

您的解决方案也有效。问题在于你的比较。你要：

```
if (!tagHeader.equals("TAG")) { 
```

如果是String，`!=`还是`==`测试一下两个String是同一个实例，不是同一个值。您需要使用该`equals()`方法按值比较它们。

变体：仅选择字节数组的一部分：

```
String s = new String(tagBytes, 0, 3, Charset.forName("US-ASCII")); 
```

如果整个字节数组已经转换成字符串，并且你想看看它是否不是以“TAG”开头的：

```
if (!tagHeader.startsWith("TAG")) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T21:58:23.577

以简单的方式，您可以执行以下操作：

```
public static void main(String[] args) {
    byte tagBytes[] = {84, 65, 71}; //Normally filed from a file, just here fro example.
    String tagHeader = null; //String to hold tag header
    tagHeader = new String(tagBytes);
    if (!tagHeader.equals("TAG")){
        System.out.println("No ID3v1 tag found");
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T21:51:46.753

更改`tagHeader != "TAG"`为`!tagHeader.equals("TAG")`

目前，您正在比较内存地址而不是实际值。

为了清楚起见，我这样写。对于空安全代码，您应该始终首先使用文字。

IE

```
"TAG".equals(tagHeader) 
```

# c++ - 递归函数占用的栈大小维度

> ID：15592456
> 
> 赞同：6
> 
> 时间：2013-03-23T21:47:45.080
> 
> 标签：c++

对于使用递归函数的 C++ 程序，如何评估该函数占用的动态堆栈大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T21:49:56.560

```
void recursive_function()
{
  int dummy;
  cout << "stack = " << &dummy << '\n';
  ...
} 
```

`&dummy`随着堆栈使用量的增加（或者如果堆栈向下增长，则下降），观察上升的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:15:32.073

```
#include <stdio.h>
#include <stdlib.h>

ssize_t recurse(int limit, char* stack = NULL)
{
    char dummy;

    if (stack == NULL)
        stack = &dummy;

    if (limit > 0)
        return recurse(limit - 1, stack);
    else
        return stack - &dummy;
}

int main(int argc, char* argv[])
{
    int limit = atoi(argv[1]);
    printf("depth %d took %zd bytes\n", limit, recurse(limit));
    return EXIT_SUCCESS;
} 
```

如果我运行它，`4`我会得到：

```
depth 4 took 192 bytes 
```

正如其他人在评论中所建议的那样，这不是完全可移植的，但它应该适用于相当广泛的当前系统。请注意，如果发生“奇怪”的事情，结果类型会被签名——您当然可以检查它的完整性（例如，确保它在 5 到 500 之间，具体取决于您的函数包含的其他内容）。

# wordpress - 将 Wordpress 集成到另一个平台

> ID：15592457
> 
> 赞同：0
> 
> 时间：2013-03-23T21:47:52.170
> 
> 标签：wordpress, e-commerce

我目前将`Xsilva Lightspeed`其用作我网站的电子商务部分，并将 Wordpress 用作我网站的 CMS 部分。我想把 Wordpress 放在我的电子商务网站中，这样客户就可以访问他们的帐户、购物车、总计等，同时仍然使用 Wordpress 从任何地方更新任何其他内容，例如我的博客。我不能用 Lightspeed 做到这一点。

我的问题是两个程序可以一起使用，我可以`Wordpress Codex`在 Lightspeed 页面中使用，还是 php 语言相互竞争？我将所有的 Wordpress 文件放在我的电子商务文件夹中。

我尝试使用 Wordpress codex 在 Lightspeed 上发布我的 Wordpress 中的内容，即：

```
<?php
    $my_id = 17;
    $post_id_17 = get_post($my_id, ARRAY_A);
    $title = $post_id_17['post_content'];
?> 
```

我没有收到错误，但没有出现任何内容。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:51:30.830

I dunno lightspeed, but I have integrated WP with other sites (magento, specifically)... fort instance, I need to use WP to manage a bunch of news posts, but the content needs to appear through out a magento store.

Usually what I do is to use the WP-JSON-API plugin to serve the content as a custom JSON call:

[http://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

And then I write whatever is necessary to call the info from the external WP install and pop it in the page. This makes it pretty easy to just CURL to get the JSON, and then you decode that to an array to populate whatever content you need.

The other way, that would be in line with what you've tired, would be to include files from WP inside the lightspeed install... there very well may be some plugin somewhere that does this, but IMO, that is a more complicated route to take as you have to juggle two programs in the same space.

# java - Android - 检查我来自哪个班级

> ID：15592461
> 
> 赞同：1
> 
> 时间：2013-03-23T21:48:21.713
> 
> 标签：java, android, class, android-intent

所以我想检查我来自另一个班级的哪个班级。例如，我有 A、B、C 类。现在，在 B 中有一个打开 A 类的意图。在 C 中，有一个打开 A 类的意图。但是，取决于我来自哪个类，我会可能必须为该特定类执行一些不同的方法。好的，那我给你我的。我有一个 Themes.class 和一个 Soft key.class。两者都将打开一个 Bmod.class。现在，几乎两个类都会做同样的事情。唯一的区别是，当我下载一个文件时，Output Stream 会有一个不同的目录。所以，我继续尝试了一些代码。这是我尝试过的：

```
 //Download the file
            Object obj = null;
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = null;
            if(obj instanceof Themes){
            output = new FileOutputStream("/sdcard/plasma/battery/batterymod.zip");
            }if(obj instanceof Softkeys){
            output = new FileOutputStream("/sdcard/plasma/softkeys/softkeys.zip");
            } 
```

现在，当我运行该应用程序时，没有任何下载。我假设我做错了什么，所以应用程序不知道输出流是什么。所以，我的问题正如标题所述：我如何正确地检查一个班级我以前来自哪个班级。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:54:48.970

```
How do I properly check in one class which class I previously came from 
```

我认为您正在活动之间导航，因此您可以获得这样的顶级活动

```
ActivityManager am = (ActivityManager) context.
    getSystemService(Activity.ACTIVITY_SERVICE);
String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
String className = am.getRunningTasks(1).get(0).topActivity.getClassName(); 
```

它使用清单中的权限

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:58:42.787

当您调用 startActivity(//intent 活动 A) 时，只需放入额外的字符串 intent.putExtra("From", "classB" // 或 "classC")。在 A 的 onCreate 方法中调用 getIntent().getStringExtra("From", "") 并取决于你得到什么做任何你想做的事。

# linker - Go - LDFLAGS: -w -hostobj 给出错误

> ID：15592463
> 
> 赞同：1
> 
> 时间：2013-03-23T21:48:28.713
> 
> 标签：linker, go, cgo

我正在编写一个调用 C 代码的 Go 包。我需要调用主机链接器，但不幸的是添加`-hostobj`标志会给我以下错误：

```
gcc: error: unrecognized option ‘-h’ 
```

操作系统是Linux，架构amd64。

以下是所有标志：

```
// #cgo CFLAGS: -I. -fPIC
// #cgo LDFLAGS: -lstdc++ -w -hostobj -L. libsomething.a
// #include "something.h"
// #include <stdlib.h> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:48:59.417

在`tip`Go 源代码库`default`分支中，使用`-linkmode`，而不是`-hostobj`. 例如，`-linkmode=external`。

[问题 4069](http://code.google.com/p/go/issues/detail?id=4069)`: cmd/ld: invoke host linker for cgo build`尚未标记为已修复。

# ios - 如何在没有 UINotifications IOS 的情况下获取键盘大小

> ID：15592465
> 
> 赞同：1
> 
> 时间：2013-03-23T21:49:08.977
> 
> 标签：ios, objective-c, keyboard, notifications, first-responder

我在屏幕上有一个文本字段和一个文本视图。当我的文本视图是焦点时，我需要显示另一个视图，但如果文本字段是焦点，则不显示视图。我正在使用 UINotification 方法来获取键盘大小，但是如果文本字段被聚焦并且文本视图被聚焦，因为键盘一直显示，它们不会被触发。明白我在说什么？那么如何从其他地方获取键盘尺寸？

另外：我不能使用静态值，因为我的应用程序支持不同的方向以及 iPhone 和 iPad。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:36:15.410

使用委托来获取当前关注的控件。UITextViewDelgate 方法 textViewDidBeginEditing：当文本视图开始编辑/聚焦或成为第一响应者时调用。类似地 UITextFieldDelegate 方法 textFieldDidBeginEditing: 可用于此目的。

键盘尺寸：

见“丰富”的答案

[在没有 UIKeyboardWillShowNotification 的情况下获取键盘大小](https://stackoverflow.com/questions/6910085/get-keyboard-size-without-uikeyboardwillshownotification)

# php - 在 php-activerecord 中按关系查找

> ID：15592467
> 
> 赞同：0
> 
> 时间：2013-03-23T21:49:13.697
> 
> 标签：php, activerecord, phpactiverecord

我正在为一个项目尝试 php-activerecord——我以前在 Lithium 和 CodeIgniter 中使用过它——但我被困在我认为应该很容易的事情上。但我根本无法绕过它。

所以，我有两张桌子：

```
post       |id  |title  |content
           ----------------------
           |1   |Test   |Lorem... 
```

和：

```
post_meta  |id  |post_id  |publish_date
           ----------------------------
           | 1  |1        |2013-03-23 
```

现在，如果我想匹配`title`post 表中`publish_date`的 和 post_meta-table 中的 ——我将如何以最简单和最优雅的方式进行？

就目前而言，我似乎必须执行两个单独的查询，首先在元表中提取具有正确发布日期的帖子 - 然后循环遍历该帖子，直到找到匹配的标题。或者我可以使用关系（`$has_one`和`$belongs_to`）——但是当我想提取我的后期数据（）时，感觉就像我在做“相反的方式” `$postMetas->post->content`。

随意提出想法和解决方案——甚至是 ORM 的替代方案，使其尽可能简单和优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:20:28.360

您可以在查找器中使用连接结构。查看[手册的这一部分](http://www.phpactiverecord.org/projects/main/wiki/Finders#joins)。

基本上，它说您可以使用已知连接加入，并将这些连接用作返回的基础。该页面上的书籍示例非常好，请参阅：

```
# fetch all books joining their corresponding author
 7 $book = Book::all(array('joins' => array('author')));
 8 # sql => SELECT `books`.* FROM `books`
 9 #      INNER JOIN `authors` ON(`books`.author_id = `authors`.id) 
```

# java - 未为 TimePicker 定义方法 setText(String)

> ID：15592471
> 
> 赞同：0
> 
> 时间：2013-03-23T21:49:41.123
> 
> 标签：java, android, eclipse, timepicker

我收到以下来源的 3 个错误 - 谁能解释我做错了什么？

错误 -

minEdit 无法解析或不是字段 TimePicker 的 setText(String) 方法未定义 TimePicker 的 setText(String) 方法未定义

附言

后两个发生在以下行：

```
 timeEt.setText(extras.getString("time"));
         minEt.setText(extras.getString("min"));

    <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content" android:layout_weight="1">

   <LinearLayout android:id="@+id/linearLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:padding="5dp">

      <EditText android:id="@+id/nameEdit"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/name_hint"
         android:inputType="textPersonName|textCapWords"/>

      <EditText android:id="@+id/capEdit"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/cap_hint"
         android:inputType="textPersonName|textCapWords"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10MB" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Unlimited Data" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bandwidth Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10kbs" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textColor="#ffffff"
            android:gravity="right"
            android:text="Unlimited Bandwidth" />
    </LinearLayout>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:textAppearanceSmall" />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="WiFi Time Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <TimePicker
        android:id="@+id/timeEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:layout_weight="1.0" />

    <EditText
        android:id="@+id/codeEdit"
        android:inputType="textUri"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:lines="1"
        android:hint="@string/code_hint"
        android:imeOptions="actionNext" />

      <Button android:id="@+id/saveBtn" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginTop="15dp"
         android:layout_gravity="center_horizontal"
         android:text="@string/save_btn"/>
   </LinearLayout>
</ScrollView> 
```

爪哇：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TimePicker minEt;

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);
          minEt = (TimePicker) findViewById(R.id.minEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));
             timeEt.setText(extras.getString("time"));
             minEt.setText(extras.getString("min"));
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
              }
              else
              {
                 dbConnector.updateContact(rowID,
                    nameEt.getText().toString(),
                    capEt.getText().toString(),
                    timeEt.getCurrentHour().toString(),
                    minEt.getCurrentMinute().toString(),/* Storing as String*/
                    codeEt.getText().toString());
              }
           }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:55:30.797

*未为 TimePicker 定义方法 setText(String)*

`TimePicker`没有 setText() 方法，您必须使用`setCurrentHour(Integer)`和`setCurrentMinute(Integer)`更改值。

*minEdit 无法解析或不是字段*

意味着您尝试访问的是具有名称的变量，`minEdit`但您尚未在任何地方声明它。可能你在声明它的地方打错了。我实际上在您的代码中找不到任何 minEdit 字段，所以我无法猜测错误的真正来源。

# list - python，重建列表

> ID：15592472
> 
> 赞同：0
> 
> 时间：2013-03-23T21:49:45.790
> 
> 标签：list, python-2.7, list-comprehension

试图重建包含坐标的列表列表。

我得到的是

```
sel = ((0, 0), (0, 1), (1, 1), (1, 0))
sel = [(1 - v[1]) for v in sel] 
```

这是我想要对每组中的第二个坐标执行的操作，但我的问题是它作为值列表返回，而不是第二个值已更改的列表列表。

我这样做是因为我使用的 2 个不同应用程序的坐标系不同。一个 0 位于路轴的底部，而另一个我试图转换的 0 从 y 轴的顶部开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:53:59.963

现在，列表理解中的每个元素都是`(1-v[1])`，这是您希望对第二个值发生的情况。如果您希望每个元素成为一个元组，其中元组中的第一项与以前相同，但第二项已更改，您可以这样做：

```
>>> sel = ((0, 0), (0, 1), (1, 1), (1, 0))
>>> sel = [(v[0], 1 - v[1]) for v in sel]
>>> sel
[(0, 1), (0, 0), (1, 0), (1, 1)] 
```

您还可以避免使用索引，这有时可以使代码更清晰（这里大致相同）：

```
>>> sel = [(x, 1-y) for x,y in sel]
>>> sel
[(0, 1), (0, 0), (1, 0), (1, 1)] 
```

# java - 使用 jSoup 解析 CSS

> ID：15592476
> 
> 赞同：8
> 
> 时间：2013-03-23T21:49:56.283
> 
> 标签：java, css, parsing, jsoup

我正在尝试在 Java 中解析 CSS DOM，并且已经将 jSoup 用于 HTML 的相同功能。我正在查看 jSoup API（当然还有 Google），但没有找到任何与 CSS 相关的解析类。有没有办法使用 jSoup 将 CSS 格式解析为 DOM，还是我需要不同的 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-03T16:43:40.570

Jsoup 无法遍历 CSS DOM，尽管您可以通过选择样式/链接标签来访问它。

看看[CSS Parser](http://cssparser.sourceforge.net/)，它看起来很有前途。

```
 InputSource source = new InputSource(
        new StringReader(
            "h1 { background: #ffcc44; } div { color: red; }"));
    CSSOMParser parser = new CSSOMParser(new SACParserCSS3());
    CSSStyleSheet sheet = parser.parseStyleSheet(source, null, null);
    CSSRuleList rules = sheet.getCssRules();
    for (int i = 0; i < rules.getLength(); i++) {
        final CSSRule rule = rules.item(i);
        System.out.println(rule.getCssText());
    } 
```

输出

```
h1 { background: rgb(255, 204, 68) }
div { color: red } 
```

# python - 编译 Boost.Python 快速入门时出错

> ID：15592485
> 
> 赞同：3
> 
> 时间：2013-03-23T21:50:41.987
> 
> 标签：python, visual-studio-2010, boost, boost-python, bjam

我一直在尝试编译 Boost.Python 'quickstart' ($BOOST_PATH\libs\python\examples\quickstart) 示例并遇到了问题。

首先，我的环境：

*   操作系统：Windows 7 Ultimate 64 位
*   Python 版本：2.7 32 位
*   C++ 编译器：VC10
*   增强版：1.53.0

最初，我在编译 Boost.Python 库文件时遇到了问题，但发生在[这个](https://stackoverflow.com/questions/2629421/how-to-use-boost-in-visual-studio-2010)Stack Overflow 线程上，它通过解释如何在 VS2010 中设置包含目录并将 boost 编译指向我的 python 目录来解决我的问题。然后，我使用以下命令编译了 Boost.Python 快速入门示例：

```
bjam toolset=msvc --verbose-test test 
```

前几次我尝试这个时遇到了一个未解决的外部符号错误，告诉我它找不到 boost python 库，即使它应该是我根据我的第一个链接设置的库目录。现在它给了我以下输出：

```
error: No best alternative for /python_for_extensions
    next alternative: required properties: <python>2.7 <target-os>windows
        matched
    next alternative: required properties: <python>2.7 <target-os>windows
        matched
error: No best alternative for /python_for_extensions
    next alternative: required properties: <python>2.7 <target-os>windows
        matched
    next alternative: required properties: <python>2.7 <target-os>windows
        matched
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\property.jam:649: in find-replace from module object(property-map)@1
error: Ambiguous key <target-type>PYTHON_EXTENSION <abi>ms <asynch-exceptions>off <binary-format>pe <debug-store>object <debug-symbols>on <embed-manifest>on <exception-handling>on <extern-c-nothrow>off <hardcode-dll-paths>true <host-os>windows <include>../../../.. <inlining>off <install-dependencies>off <library>object(file-target)@1112 <library>object(file-target)@1114 <library>object(file-target)@1116 <link>shared <main-target-type>PYTHON_EXTENSION <midl-robust>yes <midl-stubless-proxy>yes <optimization>off <os>NT <pch>on <preserve-test-targets>on <profiling>off <python-debugging>off <python.interpreter>C:\Python27\python <python>2.7 <rtti>on <runtime-debugging>on <runtime-link>shared <stdlib>native <strip>off <suppress-import-lib>true <symlink-location>project-relative <target-os>windows <target>object(file-target)@1132 <threadapi>win32 <threading>multi <toolset-msvc:version>10.0 <toolset>msvc <user-interface>console <variant>debug <warnings-as-errors>off <warnings>on <xdll-path>/C:/Program Files (x86)/boost/boost_1_53_0/bin.v2/libs/python/build/msvc-10.0/debug/threading-multi
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\property.jam:626: in object(property-map)@1.find from module object(property-map)@1
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\type.jam:335: in generated-target-ps-real from module type
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\type.jam:360: in generated-target-ps from module type
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\type.jam:270: in type.generated-target-suffix from module type
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\virtual-target.jam:511: in virtual-target.add-prefix-and-suffix from module virtual-target
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\virtual-target.jam:470: in _adjust-name from module object(file-target)@1132
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\virtual-target.jam:253: in abstract-file-target.__init__ from module object(file-target)@1132
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\virtual-target.jam:564: in object(file-target)@1132.__init__ from module object(file-target)@1132
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/kernel\class.jam:88: in class.new from module class
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:565: in generator.generated-targets from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/tools\builtin.jam:869: in linking-generator.generated-targets from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/tools\msvc.jam:1061: in generated-targets from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:463: in construct-result from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:416: in run-really from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:390: in generator.run from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/tools\builtin.jam:784: in object(msvc-linking-generator)@1127.run from module object(msvc-linking-generator)@1127
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:978: in try-one-generator-really from module generators
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:1040: in try-one-generator from module generators
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:1254: in construct-really from module generators
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\generators.jam:1338: in generators.construct from module generators
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1495: in construct from module object(typed-target)@71
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1298: in object(typed-target)@71.generate from module object(typed-target)@71
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:732: in generate-really from module object(main-target)@932
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:704: in object(main-target)@932.generate from module object(main-target)@932
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:848: in targets.generate-from-reference from module targets
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1217: in generate-dependencies from module object(typed-target)@77
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1269: in object(typed-target)@77.generate from module object(typed-target)@77
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:732: in generate-really from module object(main-target)@934
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:704: in object(main-target)@934.generate from module object(main-target)@934
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:848: in targets.generate-from-reference from module targets
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1217: in generate-dependencies from module object(alias-target-class)@81
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:1269: in object(alias-target-class)@81.generate from module object(alias-target-class)@81
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:732: in generate-really from module object(main-target)@936
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2/build\targets.jam:704: in object(main-target)@936.generate from module object(main-target)@936
C:/Program Files (x86)/boost/boost_1_53_0/tools/build/v2\build-system.jam:736: in load from module build-system
C:\Program Files (x86)\boost\boost_1_53_0\libs\python\example\quickstart\..\..\..\..\tools\build\v2/kernel\modules.jam:283: in import from module modules
C:\Program Files (x86)\boost\boost_1_53_0\libs\python\example\quickstart\..\..\..\..\tools\build\v2/kernel/bootstrap.jam:142: in boost-build from module
C:\Program Files (x86)\boost\boost_1_53_0\libs\python\example\quickstart\boost-build.jam:7: in module scope from module 
```

编辑1：

当您在多个 *-config.jam 文件中定义您的 python 目录时，会出现我上面发布的错误消息。现在我收到原始错误消息：

```
...patience...
...patience...
...found 1745 targets...
...updating 10 targets...
compile-c-c++ bin\msvc-10.0\debug\threading-multi\extending.obj
extending.cpp
msvc.link.dll bin\msvc-10.0\debug\threading-multi\extending.pyd
   Creating library bin\msvc-10.0\debug\threading-multi\extending.lib and object bin\msvc-10.0\debug\threading-multi\extending.exp
msvc.manifest.dll bin\msvc-10.0\debug\threading-multi\extending.pyd
capture-output bin\test_ext.test\msvc-10.0\debug\threading-multi\test_ext
        1 file(s) copied.
====== BEGIN OUTPUT ======
Trying:
    from extending import *
Expecting nothing
ok
Trying:
    hi = hello('California')
Expecting nothing
ok
Trying:
    hi.greet()
Expecting:
    'Hello from California'
ok
Trying:
    invite(hi)
Expecting:
    'Hello from California! Please come soon!'
ok
Trying:
    hi.invite()
Expecting:
    'Hello from California! Please come soon!'
ok
Trying:
    class wordy(hello):
        def greet(self):
            return hello.greet(self) + ', where the weather is fine'
Expecting nothing
ok
Trying:
    hi2 = wordy('Florida')
Expecting nothing
ok
Trying:
    hi2.greet()
Expecting:
    'Hello from Florida, where the weather is fine'
ok
Trying:
    invite(hi2)
Expecting:
    'Hello from Florida! Please come soon!'
ok
1 items had no tests:
    test_extending.run
1 items passed all tests:
   9 tests in test_extending
9 tests in 2 items.
9 passed and 0 failed.
Test passed.

EXIT STATUS: 0 
====== END OUTPUT ======
**passed** bin\test_ext.test\msvc-10.0\debug\threading-multi\test_ext.test
msvc.link bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.exe
LINK : warning LNK4001: no object files specified; libraries used
LINK : error LNK2001: unresolved external symbol _mainCRTStartup
bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.exe : fatal error LNK1120: 1 unresolved externals

        call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DEBUG /MACHINE:X86 /subsystem:console /out:"bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.exe" /LIBPATH:"C:\Python27\libs"  @"bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.exe.rsp"
        if %ERRORLEVEL% NEQ 0 EXIT %ERRORLEVEL%

...failed msvc.link bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.exe bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.pdb...
...removing bin\test_embed.test\msvc-10.0\debug\threading-multi\test_embed.pdb
...skipped <pbin\test_embed.test\msvc-10.0\debug\threading-multi>test_embed.run for lack of <pbin\test_embed.test\msvc-10.0\debug\threading-multi>test_embed.exe...
...failed updating 2 targets...
...skipped 2 targets...
...updated 6 targets... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T17:48:05.687

我不确定a）有什么问题。问题 b) 似乎是 boost 示例中的一个错误，jam 文件试图从可执行文件而不是静态 lib 或 cpp 文件生成测试可执行文件。

我[记录了我必须做什么](https://gist.github.com/teeks99/bb4921dffc8a74423c26#file-boost-python-quickstart-md)才能让嵌入示例运行。

# php - 游戏库存数据库外键

> ID：15592488
> 
> 赞同：1
> 
> 时间：2013-03-23T21:50:52.463
> 
> 标签：php, mysql, database, phpmyadmin

只是通过为游戏即时构建设置数据库的过程。

它有 3 个表：

**用户表**

user_id - PK

用户名

密码

电子邮件

等级

地点

**用户库存**

user_inventory_id - PK

user_id - FK

game_item_id - FK

数量

**游戏项目**

game_item_id - PK

项目名称

现在在我的注册脚本中，我简单地将一条记录插入到 user_table 中，保存用户名、电子邮件和密码，但是由于我创建了其他两个表并在 user_inventory 表中创建了 user_id 和 game_item_id 外键，所以我收到了这个错误：

> 带有消息“SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`sik_game_db`. `user_table`, CONSTRAINT `user_table_ibfk_1`FOREIGN KEY ( `user_id`) REFERENCES `user_inventory`( `user_inventory_id`) ON DELETE CASCADE)”的“PDOException”

我的表是 InnoDB，它们都是空的。

这是我用来插入表的语句：

```
$query = "INSERT INTO user_table (username, password, email)VALUES (:user, :pass, :em);";
    $args = array(
        ":user" => $m_username,
        ":pass" => $m_password,
        ":em" => $m_email
        ); 
```

所以我的问题：

1) 这是为 RPG 类型游戏的库存系统设置数据库表的正确方法吗？

2）为什么我在尝试插入数据库时​​收到此错误？

**编辑** 我的数据库的 SQL 转储：

```
 SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `sik_game_db`
--

CREATE TABLE IF NOT EXISTS `game_items` (
  `game_item_id` int(11) NOT NULL AUTO_INCREMENT,
  `item_name` varchar(100) NOT NULL,
  PRIMARY KEY (`game_item_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `user_inventory` (
  `user_inventory_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `game_item_id` int(11) NOT NULL,
  `quantity` int(11) NOT NULL,
  PRIMARY KEY (`user_inventory_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `user_table` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(100) NOT NULL,
  `password` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `level` int(11) NOT NULL,
  `location` int(11) NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Constraints for table `game_items`
--
ALTER TABLE `game_items`
 ADD CONSTRAINT `game_items_ibfk_1` FOREIGN KEY (`game_item_id`) REFERENCES `user_inventory` 
(`user_inventory_id`) ON DELETE CASCADE;

--
-- Constraints for table `user_table`
--
ALTER TABLE `user_table`
 ADD CONSTRAINT `user_table_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user_inventory` 
 (`user_inventory_id`) ON DELETE CASCADE; 
```

谢谢汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:19:02.837

正如我所怀疑的，外键约束是错误的。

您将需要以相反的方式使用引用重新创建约束。

或者，您应该能够运行代码：

```
ALTER TABLE `user_table` DROP FOREIGN KEY `user_table_ibfk_1`;

ALTER TABLE `user_inventory`
ADD CONSTRAINT `user_table_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user_table` 
(`user_id`) ON DELETE CASCADE; 
```

应该将外键约束添加到表中，您要确保添加到该表中的任何记录已经存在于另一个表中。所以在你的例子中。您要确保在将记录添加到 user_inventory 表时，user_table 中已经存在具有正确 user_id 的记录。

您将需要为其他外键约束制定逻辑，以确保已在正确的表上设置了该约束。

# iphone - Xcode 3.2.6 的 iOS 教程

> ID：15592490
> 
> 赞同：0
> 
> 时间：2013-03-23T21:50:55.483
> 
> 标签：iphone, ios, xcode, xcode3.2

*只是想尽可能地*学习如何使用我目前的计算机（MacBook 2,1；OS X 10.6.8）来做 iOS。

[我已经完成了来自http://mobileorchard.com/author /oscar/](http://mobileorchard.com/author/oscar/)的所有“如何制作和 iPhone 应用程序”教程，但我正在寻找更多！如果有人对我（或其他任何人）有任何好的教程

陷入“石器时代”），我会很感激的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:22:15.947

尽管从长远来看，尽可能最好地学习 iO 可能还不够（至少如果你想认真对待它：移动开发是一个快速移动的目标......），仍然有一个您可以做几件事来利用您拥有的系统：

**阅读 Apple 的编程指南**

尽管 Apple 和 Google 都有用新文档替换旧文档而不留下先前修订痕迹的恼人习惯，但您仍然可以对其进行筛选并将仅与最新版本 iO 相关的内容与仍适用于 Xcode 3.2 的内容分开.6.

例如“视图控制器编程指南”：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

有很多关于故事板的东西你不能用，但是 VC 编程的基础知识仍然存在。

它的方法需要你付出很多努力，以及长时间的反复试验，但你肯定会找到你需要的所有信息。

**在互联网上搜索旧教程**

尽管苹果喜欢抹去自己的历史，但这并不意味着大多数互联网博客和贡献者都会这样做。

Google 有一项功能，可让您搜索在您选择的两个日期之间创建的页面：使用它来查找在您的 XCode 版本上市时创建的教程、指南和代码。

# php - Json 编码多个匹配项。

> ID：15592493
> 
> 赞同：0
> 
> 时间：2013-03-23T21:51:29.550
> 
> 标签：php, jquery, mysql, ajax, json

我正在构建一个基于 Jquery/ajax 的下拉菜单，用于从数据库中检索不同的表单。响应 ajax 调用的“php 函数”可能必须根据 id 返回一组以上的表单，这意味着同一 id 下可以有多个记录。然后将数据作为 Json 编码的 html 表发送回脚本。问题是如何在服务器端处理这个问题。我希望这个问题很清楚。

我的代码：

```
<?php
if (!empty($_GET['id'])) {
$id = $_GET['id'];

try {

$objDb = new PDO('mysql:host=localhost;dbname=blankett', 'root', 'root');
$objDb->exec('SET CHARACTER SET utf8');

$sql = "SELECT * 
    FROM `forms`
    WHERE `id` = '$id'";
$statement = $objDb->prepare($sql);
$statement->execute(array());
$list = $statement->fetchAll(PDO::FETCH_ASSOC);

if (!empty($list)) {

   foreach ($list as $row ) {
     $out = array();
     $out[] = '<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td> <td>'.$row['date_added'].'</td></tr>';
   }

  echo json_encode(array('error' => false));
} else {
  echo json_encode(array('error' => true));
}

} catch(PDOException $e) {
echo json_encode(array('error' => true));
}

}else {
echo json_encode(array('error' => true));
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:55:13.897

好吧，只需在您的 json 中回显数组：

```
echo json_encode(array('error' => false, 'forms' => $out)); 
```

# google-drive-api - Google Drive 实时 API 是否支持 Android？

> ID：15592494
> 
> 赞同：-1
> 
> 时间：2013-03-23T21:51:31.663
> 
> 标签：google-drive-api

我知道它适用于 JavaScript，但它是否计划用于原生 Android 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:25:39.557

目前不支持此功能，抱歉。谷歌将其添加为高优先级。

# oracle - 创建一个包来跟踪使用的磁带

> ID：15592499
> 
> 赞同：0
> 
> 时间：2013-03-23T21:51:59.073
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

以为我遵循了创建模式，但正文不会编译。我想要完成的是开发一个包来定期运行一个程序，以确定在什么时间和日期使用超过 15 个。Oracle 11g。

唯一需要进入表的其他数据被插入到 sysdate 中。

```
 CREATE OR REPLACE 
PACKAGE TAPES_USED AS 
function TAPESCOUNT(count number) return number;
procedure INSERT_TAPES_COUNT(sysdate date, count NUMBER);
END TAPES_USED;
/

-----------------------------------------

CREATE OR REPLACE 
PACKAGE body TAPES_USED AS 
function TAPESCOUNT(count number) return number as count number;
begin
select count(*)
into
count
from DEV.TAPES_IN USE where count(*) > 15;
procedure INSERT_TAPES_COUNT(sysdate date, count NUMBER)as
begin
INSERT INTO  DEV.TAPES_USED VALUES
  (sysdate, count);
end INSERT_TAPES_COUNT;
END TAPES_USED;
/ 
```

任何人都可以提供的任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:01:04.230

```
CREATE OR REPLACE 
PACKAGE BODY tapes_used AS 
FUNCTION tapescount(in_ct NUMBER) RETURN NUMBER IS 
  ct NUMBER;
  BEGIN
    SELECT COUNT(*)
      INTO ct
      FROM dev.tapes_in_use;
    IF ct > in_ct THEN
      RETURN ct;
    ELSE
      RETURN NULL;
    END IF;
  END tapescount;

  PROCEDURE insert_tapes_count(sysdt date, ct NUMBER) IS
  BEGIN
    INSERT INTO  dev.tapes_used VALUES (sysdt, ct);
  END insert_tapes_count;
END tapes_used;
/ 
```

您应该避免使用保留字，例如 COUNT 和 SYSDATE 作为变量名（我不知道，但这可能是您的一些编译问题），所以我已经重命名了它们。此外，您忘记结束您的功能。我认为您在函数中 SELECT 的 FROM 子句中的表名中缺少下划线，并且您的函数中没有 RETURN 语句，这是您必须拥有的。

一般来说，一个函数应该接受一个或多个输入参数并返回一个值。您没有在函数中使用输入参数。我已经实现了一个建议的参数。

正如 Egor 所指出的，这不是一个现实的功能，我不确定你的意图。该功能应该做什么？

也许您希望您的函数返回超出计数的日期/时间？您还可以将所有内容组合到一个过程中：

```
PROCEDURE ck_tape_ct(min_tape_ct NUMBER) IS
  ct NUMBER;
BEGIN
  SELECT COUNT(*)
    INTO ct
    FROM dev.tapes_in_use;
  IF ct > min_tape_ct THEN
    INSERT INTO dev.tapes_used VALUES(SYSDATE, ct);
  END IF;
END; 
```

# php - 显示最后上传的图片

> ID：15592500
> 
> 赞同：0
> 
> 时间：2013-03-23T21:52:00.750
> 
> 标签：php

我在同一页面上使用缩略图和主图像处理图像库。我已订购缩略图，以便最后上传的图像位于顶部，但我也希望此图像显示为主图像。我的网站是[http://www.robcnossen.nl/view_album.php?album_id=7](http://www.robcnossen.nl/view_album.php?album_id=7)

我找不到它是否可以用 mysql 完成，但也许我看起来是对的。我正在尝试在 PHP 中找到解决方案，但我在互联网上找到的所有内容都无法为我工作。

我认为数组 multisort、filectime 和 ksort 可以解决我的问题，但没有任何改变。我的代码的一部分是；

```
print_r ($images);
//$dirname = dirname(__FILE__);
//filectime($dirname);
//ksort($images);
array_multisort($images, SORT_DESC);
if(isset($image['album'], $image['id'], $image['ext']));     
    $foto = 'uploads/' . $image['album'] . '/' . $image['id'] . '.' . $image['ext'].   '';

$standaardwaarde=isset($_GET['image_id']) ? $_GET['image_id'] :$foto;

echo'<img src="' ,htmlentities($standaardwaarde), '" title="" />'; 
```

最后上传的图像如何显示为主图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:01:56.127

如果 $images 是数据库查询的返回变量，您可以通过添加 ORDER BY 时间戳来更改该查询（我在您的 var_dump 上看到有时间戳）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:07:50.807

如果您将其存储在 mysql 数据库中并且您的图像与自动增量字段或日期字段一起存储，您可以使用 ORDER BY 子句将最后一张图像作为第一个（逆序）：

`ORDER BY id DESC`或`ORDER BY timestamp DESC`。

您的主要图像将是：

$retrived_array[0]['field_to_show']

# asp.net - ADO.net 实体模型不刷新数据

> ID：15592505
> 
> 赞同：0
> 
> 时间：2013-03-23T21:52:26.157
> 
> 标签：asp.net, asp.net-mvc, ado.net

我有一个来自 mysql 数据库的 ADO.net 实体模型，该数据库将图像位置或 url 存储在一个名为多媒体的表中，有一个页面在画廊中显示这些图像。每当我从网站或直接将新图像保存到数据库中时，它不会显示在图库中，直到我更改代码中的某些内容（任何内容，这似乎会刷新模型），或者转到模型并右键单击并更新它。

我试过了`model.Refresh(System.Data.Objects.RefreshMode.ClientWins, model.multimedia)`，`model.Refresh(System.Data.Objects.RefreshMode.StoreWins, model.multimedia)`从控制器没有任何反应。

如果我从 Visual Studio 刷新模型，图像会显示出来。所以问题是如何刷新数据而无需从 Visual Studio 更新模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:25:41.167

问题已解决，数据上下文是静态的

# html - 浏览器窄时背景图像显示不正确

> ID：15592508
> 
> 赞同：2
> 
> 时间：2013-03-23T21:53:15.813
> 
> 标签：html, css

在[此页面上](http://festivals.ie/)，我有 2 个背景图片：

(1) 设置为背景图像的蓝色旭日形`<html>`

```
html {
    background: url("BEhmxDlyFwihBhnuPwHL8VU1fr59VGeXflJlinXMr5q.svg") no-repeat fixed center center / 100% auto transparent;
    outline: 0 none !important;
} 
```

(2) 在每一页的底部出现的显示空中的一群手臂的图像。我使用[粘性页脚](http://www.cssstickyfooter.com/)解决方案使这个粘在每一页的底部

在正常的浏览器宽度下一切正常，但是一旦浏览器宽度低于大约 500 像素，顶部就会开始出现空白：

![在此处输入图像描述](../Images/59cab29b5d45b985e943508ed5e81418.png)

在底部

![在此处输入图像描述](../Images/113d41c2d5dc86fc37bd00fa3a140114.png)

每一页。以前我用

```
background-size: cover; 
```

对于 sunburst 图像，但这会导致网站在 iOS 6 上崩溃（严重），所以我需要找到一种方法来解决这个问题而不使用这个规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:12:27.917

如果您不反对 JS 解决方案，您可以尝试使用[Backstretch](http://srobbin.com/jquery-plugins/backstretch/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:26:17.117

空白是由于浏览器`center center`按照 CSS 中的定义定位图像。

```
html {
    background: url(BEhmxDlyFwihBhnuPwHL8VU1fr59VGeXflJlinXMr5q.svg) no-repeat center center fixed;
    background-size: 100%;
    outline: 0!important;
} 
```

我认为解决方案只是设置`background-size: 100% 100%`为当前设置只是`background-size: 100%;`宽度`100%`和 *自动*高度。但它在 Chrome 中被窃听 - [background-size:100% 100%; 在 Chrome 中无法正常工作](https://stackoverflow.com/questions/9334095/background-size100-100-doesnt-work-properly-in-chrome)。该问题有一个解决方法答案可能会有所帮助。

但是，如果`background-size: 100%;`删除`width < 500px`，可能在您的 @media 规则之一中，则背景会按预期填充页面。当窗口大于图像的宽度时，仍然需要该规则来拉伸图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:28:22.793

将背景大小设置为大于 100%。我认为 200-250% 将覆盖该区域。

```
background-size:220%; 
```

这样做的一个副作用是它会由于尺寸而导致轻微的滞后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T22:54:09.110

在这里，有这个解决方案...

在这个文件...

[http://festivals.ie/static/C5z61WeZeCfyTRbmu6lNPsxXxwhibmxExq6ADwtSPjh.css](http://festivals.ie/static/C5z61WeZeCfyTRbmu6lNPsxXxwhibmxExq6ADwtSPjh.css)

在第 793 行，

这段代码在该行的最后一部分...

```
html{background:url(BEhmxDlyFwihBhnuPwHL8VU1fr59VGeXflJlinXMr5q.svg) no-repeat center center fixed;
background-size:100%;
outline:0!important;} 
```

添加这个属性： background-position: 0px 0px;

制作代码：

```
 html{background:url(BEhmxDlyFwihBhnuPwHL8VU1fr59VGeXflJlinXMr5q.svg) no-repeat center center fixed;
background-size:100%;
outline:0!important;
background-position: 0px 0px;} 
```

仅供参考，正如andyb指出的那样，空白是图像离开其顶部位置居中，从而使它看起来像一个开始出现的空白。

希望你明白这一点。

问候

# c++ - 简单的 C++ 包容性计算器代码审查

> ID：15592510
> 
> 赞同：0
> 
> 时间：2013-03-23T21:53:23.953
> 
> 标签：c++

C++ 新手在这里。这段代码有什么问题或复杂吗？我的主要问题是我是否可以在 while (val <= v2) 中使用 v1 和 v2？

```
#include <iostream>

int main ()
{
    std::cout << "Enter two numbers: " << std::endl;
    int v1 = 0, v2 = 0;
    std::cin >> v1 >> v2;
    int sum = 0, val = v1;

    while (val <= v2)
    {
        sum += val;
        ++ val;
    }
    std::cout << "The sum of " << v1 << " through " << v2 << " inclusive is " << sum << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:54:55.110

是的，你可以，它们是局部变量，`main()`所以它们在`main()`返回之前都在范围内（即程序的整个生命周期）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:56:10.873

当然可以。-loop内的语句`while`需要计算为布尔表达式，即`true`or `false`。正如您可以说的那样，无论是真是假`val <= v2`，这都很好。

# redirect - 使用通配符将 url 从子域重写/重定向到域？

> ID：15592512
> 
> 赞同：0
> 
> 时间：2013-03-23T21:53:38.217
> 
> 标签：redirect

我刚刚将一个站点从子文件夹移动到 html 根目录，我需要某种 htaccess 规则来重写所有 url，所以指向该站点的旧链接仍然有效

旧路径是 www.domain.com/stage/*，现在应该指向 www.domain.com/*

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:59:14.683

不确定您使用的是什么类型的网络服务器，应该类似于

```
rewrite ^(.+)/stage/(.*)$  $1/$2; 
```

让我知道您是否需要任何改进，或者您是否需要针对特定​​的 Web 服务器

# safari - @font-face 字体中的符号在 Safari 5 中不显示，在 Safari 6 和其他浏览器中正确显示

> ID：15592516
> 
> 赞同：0
> 
> 时间：2013-03-23T21:53:55.907
> 
> 标签：safari, webkit, font-face

我在 Safari 5 中显示引号和重音符号时遇到了一个奇怪的问题。我正在使用带有以下代码的 font-face 字体。

```
@font-face {
    font-family: 'MendozaRomanStd-Book';
    src: url('fonts/mendozaromanstd-book.eot');
    src: url('fonts/mendozaromanstd-book.svg#mendozaromanstd-book') format('svg'),
             url('fonts/mendozaromanstd-book.eot?#iefix') format('embedded-opentype'),
             url('fonts/mendozaromanstd-book.woff') format('woff'),
             url('fonts/mendozaromanstd-book.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

在 Firefox、Chrome、Safari 6、iOS6 和 IE 上，字体显示正确：

![野生动物园 6](../Images/8bd0fa917f755ecb31bec3313f942d26.png)

但是在 Safari 5 上，我看到了这个：

![野生动物园 5](../Images/44a492d6b42a9c0647260c6088d6a210.png)

相同的字符集，相同的 html。我到处搜索有关在 Safari 5 下显示字体的报告问题，但没有任何报告导致我怀疑发生了其他事情。有人知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:11:38.897

事实证明 Safari 5 不会在 SVG 字体中显示重音符号或符号。

它在使用 TTF 或 WOFF 字体时会显示它们，但在 SVG 中不会显示。

Chrome 或 Safari 6 似乎没有这个问题。

我最终通过使用@font-face 定义一个单独的字体来修复它，然后使用特定于浏览器的 CSS 来定位 Safari 5。所以：

```
/* Font-face for all browsers */
@font-face {
    font-family: 'MendozaRomanStd-Book';
    src: url('fonts/mendozaromanstd-book.eot');
    src: url('fonts/mendozaromanstd-book.svg#mendozaromanstd-book') format('svg'),
         url('fonts/mendozaromanstd-book.eot?#iefix') format('embedded-opentype'),
         url('fonts/mendozaromanstd-book.woff') format('woff'),
         url('fonts/mendozaromanstd-book.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

    /* Safari5 fix */
@font-face {
    font-family: 'MendozaRomanStd-Book2';
    src: url('fonts/mendozaromanstd-book.ttf') format('truetype') !important;
    font-weight: normal;
    font-style: normal;
}

.safari5 body {
font-family: 'MendozaRomanStd-Book2', Times new roman, serif;
-webkit-text-shadow: rgba(255,255,255,0.01) 0 0 1px;
-webkit-text-stroke: rgba(255,255,255,0.01) 0.1px;
} 
```

请注意，此代码已经包含一个修复程序，可以在 PC 下的 Chrome 中正确呈现 webfonts。使用标准的 fontsquirrel 生成的代码，这会导致可怕的锯齿而不是别名字体。在 Google 能够齐心协力之前，解决方法是将 SVG 文件提升到顶部。

# android - 谷歌电视的自定义吐司

> ID：15592517
> 
> 赞同：1
> 
> 时间：2013-03-23T21:53:57.710
> 
> 标签：android, themes, overlay, toast, google-tv

我正在为谷歌电视创建一个叠加层。我创建了一个透明主题，以便通过应用程序可以看到广播，如下所示：

样式.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
<style name="Invisible" parent="@android:style/Theme">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

不使用此主题时，我可以使用以下方式显示带有图片的自定义吐司：

```
 View layout = inflater.inflate(R.layout.toast,
                        (ViewGroup) findViewById(R.id.custom_toast_layout_id));

                        // Toast...
                        Toast toast = new Toast(getApplicationContext());
                        toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                        toast.setDuration(Toast.LENGTH_LONG);
                        toast.setView(layout);
                        toast.show(); 
```

但是，当我使用此主题时，它不会显示，只会显示标准吐司：

```
 Toast.makeText(this, "This game is over. Start a new game.", Toast.LENGTH_SHORT).show(); 
```

吐司只是在屏幕中间显示一张图片，所以不需要很复杂。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:42:20.947

而是使用该布局创建一个活动。启动活动而不是调用 toast。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:47:57.103

Toasts 将包含当前活动活动使用的主题。因此，正如 Leon 所说，如果您创建一个带有您想要的主题的活动，则 toast 将继承该主题。请参阅：[Toast 背景更改以匹配 Activity 的主题](https://stackoverflow.com/questions/7020286/toast-background-changing-to-match-activitys-theme)

# c# - SQL '时间' C# 等效项 - System.TimeSpan 不起作用

> ID：15592520
> 
> 赞同：1
> 
> 时间：2013-03-23T21:54:07.710
> 
> 标签：c#, .net, sql-server, linq-to-sql

好吧，我正在尝试从数据库中检索数据，列名是数据类型 time(7) 的“EventTime”，以下是我的 C# 代码：

```
[Column(IsDbGenerated = true)]
public TimeSpan EventTime { get; set; } 
```

我四处搜索，似乎 TimeSpan 确实相当于时间，但是，当我尝试运行该代码时，它仍然会导致异常，所有其他列都加载正常

有没有人遇到过类似的问题？

编辑：这是“10:34:00”列中的数据示例

我唯一可用的异常详细信息很模糊：“异常详细信息：System.InvalidCastException：指定的强制转换无效。” MSDN 在此处指定 TimeSpan 是适当的数据类型[http://msdn.microsoft.com/en-us/library/ms131092.aspx?PHPSESSID=lm71lj7i6gj5fjtebtb2srl4n3](http://msdn.microsoft.com/en-us/library/ms131092.aspx?PHPSESSID=lm71lj7i6gj5fjtebtb2srl4n3)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T21:56:10.383

根据您提供的信息，我建议使用[`System.DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx).

```
[Column(IsDbGenerated = true)]
public DateTime EventTime { get; set; } 
```

注意：附加信息和列中的数据样本会有所帮助。

# c# - 如何在不同的字符串中找到字符串的所有索引？

> ID：15592525
> 
> 赞同：1
> 
> 时间：2013-03-23T21:54:50.483
> 
> 标签：c#, visual-studio-2010, indexof, indices

我的问题很简单，我怎样才能在另一个字符串中找到一个字符串的所有索引？这是我编写的代码，但问题是它所做的只是多次返回完全相同的索引。这里是：

```
 public static int[] IndicesOf(this string s, string Search, int StartIndex)
    {
        List<int> indices = new List<int>();
        int lastIndex = 0;
        lastIndex = s.IndexOf(Search);
        while (lastIndex != -1)
        {
            indices.Add(lastIndex);
            lastIndex = s.IndexOf(Search, lastIndex);
        }
        return indices.ToArray();
    } 
```

我不知道这段代码有什么问题。我想我可能需要在下一次搜索之前推进索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:58:05.813

我的猜测是您应该在第二次`s.IndexOf`通话中加 1。

那是：

```
lastIndex = s.IndexOf(Search, lastIndex + 1); 
```

# facebook - fb like 和 gplus 分享功能的问题

> ID：15592528
> 
> 赞同：0
> 
> 时间：2013-03-23T21:55:04.777
> 
> 标签：facebook, share, google-plus, microdata

这是我启用了 Google Plus、Twitter 和 Facebook 共享的页面。您可以尝试查看行为：

[https://www.famometer.com/usatoday](https://www.famometer.com/usatoday)

Twitter 分享按钮的作用就像一个魅力，但让 g+ 和 fb 之类的按钮工作的主要噩梦。

**第一个问题：** 当点击Like按钮时，它会显示评论对话一秒钟，然后在随后的点击中一直闪烁，不允许分享。我尝试使用 FF 查找任何 javascript 错误等，但没有看到任何错误。

这是代码：

在`<h:body>`我有这个 Java 脚本代码之后：

使用的命名空间：`xmlns:fb="http://ogp.me/ns/fb#"`

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
      appId      : '489611804432300',
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      oauth      : true, // enable OAuth 2.0
      xfbml      : true  // parse XFBML
    });

    // All your canvas and getLogin stuff here
    //
  };
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后在 viewAd.xhtml 中，我有以下代码：

```
<fb:like id="fbLike" href="https://www.famometer.com/usatoday" send="false" width="100" show_faces="false" layout="button_count" action="like" style="top:-3px"></fb:like> 
```

我已经按照书本做了所有事情，但仍然无法正常工作。如果我没有登录FaceBook，会弹出登录的对话框，但登录后，每次点赞按钮时弹窗一直闪烁。有人可以阐明其实施中有什么问题吗？

**第二个问题是 g+ 按钮**

它不填充微数据结构提供的 url、标题和描述。

这是代码：

使用的命名空间：`xmlns:g="http://base.google.com/ns/1.0"`

```
<div itemscope="itemscope" itemtype="http://schema.org/Product">
  <span style="font-weight: bolder; font-size: 20px;" itemprop="name">#{adBB.business.businessName}</span><br/>
  <span style="font-weight: bolder; color:gray;" itemprop="description">#{adBB.business.description}</span>
  <h:panelGrid>
    ... some code here...
    <g:plusone href="https://www.famometer.com/#{adBB.business.socialMedia.famometer}" size="medium" count="false"></g:plusone>  
    ... some code here
  </h:panelGrid>
</div> 
```

这是JavaScript - 页面底部的异步。

```
<script type="text/javascript">
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
</script> 
```

我已经尝试了一切，但它仍然从元标签而不是微数据标签中读取信息。

非常感谢您在解决这些问题方面的帮助。

谢谢， Sundeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:02:22.637

虽然标记一目了然，但[测试工具没有找到您的 schema.org 值](http://www.google.com/webmasters/tools/richsnippets?url=https%3A%2F%2Fwww.famometer.com%2Fusatoday&html=)。我看到共享片段预览的结果不准确。

该对话框的问题可能与您已实施的重定向有关。这些通常应该没问题。有没有一种方法可以在没有重定向的情况下进行测试？喜欢使用[https://www.famometer.com/views/viewAd.xhtml?ad=usatoday](https://www.famometer.com/views/viewAd.xhtml?ad=usatoday)进行测试？

# ios - 从 tableviewCell 内的按钮加载 UIViewController

> ID：15592531
> 
> 赞同：0
> 
> 时间：2013-03-23T21:55:36.100
> 
> 标签：ios, uitableview, uinavigationcontroller, uibutton

我在 tableviewcell 内有一个按钮，它位于 tableview 内（显然），而 tableview 位于导航控制器内的 viewController 内

UINavigationCont --> ViewController1 --> UITableView --> UITableViewCell --> UIButton --> （从这个按钮的 IBAction 启动一个新的控制器）

我怎样才能做到这一点？谢谢

```
- (IBAction)addButtonPressed:(UIButton *)sender {
    ViewController1 *detailViewController = [[ViewController1 alloc]init];

    [self.superview.delegate presentPopupViewController:detailViewController animationType:MJPopupViewAnimationFade];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:59:10.940

您应该在控制器内部拥有导航逻辑，而不是单元格（我想自从您调用`self.superview`.`addDetailViewController`

# javascript - 在页面加载时将多个 HTML 页面导入单个 div

> ID：15592540
> 
> 赞同：0
> 
> 时间：2013-03-23T21:56:45.957
> 
> 标签：javascript, jquery

我正在尝试将多个 HTML 外部页面导入单个 div。例子：我是page1.HTML，page2.html等等。我有这段 JQuery：

```
<script type="text/javascript">
$(document).ready(function() {
$('.main').load('page1.html');
});
</script> 
```

这很好用，除了我不确定如何添加多个页面以在页面加载时导入到同一个 div 中。

谢谢我的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:02:38.917

如果你想要倍数，那么你不能使用负载。改为使用`$.get`并指定回调以将它们添加到 div：

```
var pages = ['page1.html', 'page2.html', etc..],
    $main = $('.main'),
    doLoad = function () {
        if(pages.length > 0) {
          // use shift to get the next page off the array
          $.get(pages.shift(), function(content) {
              // append content to .main
              $main.append(content);
              // call do load to get the next entry
              doLoad();
          });
        }
    };

doLoad(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:40:10.383

```
var pages=["page1.html","page2.html","page3.html"],
    mainDiv=$(".main");
$.each(pages, function(i,page){
    var newDiv=mainDiv.append("div");
    newDiv.load(page);
}); 
```

如果您只想加载页面片段（如果您处理包含 head 标签的完整页面，通常会出现这种情况）， load() 将比 get() 更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:03:52.100

创建要加载的 HTML 文件数组，并使用每个页面的 ajax 调用遍历数组，然后使用 jQuery prepend() 将内容放入元素中。

# asp.net-mvc - ASP.NET MVC TDD (xUnit) - ConfigurationManager.AppSettings 无缘无故失败

> ID：15592543
> 
> 赞同：2
> 
> 时间：2013-03-23T21:56:57.917
> 
> 标签：asp.net-mvc, unit-testing, appsettings, configurationmanager, xunit

我正在尝试熟悉 TDD 概念并编写了第一个测试，它的“行为”部分如下所示：

```
repositoryStub = new Mock<IMyRepository>();
var sut = new MyController(repositoryStub.Object);
var result = sut.Index() as ViewResult; 
```

`MyController`我最终（深入）实例化的控制器（ ）`ConfigurationManager.AppSettings`在创建视图模型时使用。控制器的实例化在尝试从 Web.Config 读取的行上失败，但显然，如果项目只是从 IDE 运行，则按预期运行。我正在从 web.config 文件中读取一个常量，它不应该影响测试，并且一旦从另一个 ( `MyProject.Test`) 项目调用它就不会失败。

我对你们的问题是如何克服这个障碍？

我不知道这是否重要，但以防万一，我正在使用`xUnit`TDD。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:13:02.720

您需要意识到您使用的*配置*与`IMyRepository`. 您通过抽象合约（接口）注入存储库。为什么对配置不做同样的事情？快速而幼稚的解决方案是创建`IConfiguration`接口并通过简单地将调用委托给`ConfigurationManager`. 您的构造函数如下所示：

```
public class MyController(IMyRepository repository, IConfiguration configuration) 
```

这告诉我们什么？好吧，不幸的是不多。控制器需要配置的事实非常模糊。真正的问题是，它需要的配置的**确切**参数是什么？您需要确定那个参数，这就是您要注入的真正依赖项。考虑：

*   `MyController(IMyRepository repository, IConfiguration configuration)`
*   `MyController(IMyRepository repository, int serviceCallTimeoutSeconds)`
*   `MyController(IMyRepository repository, string serviceAccessKey)`

哪个更能传达其目的？您的控制器越面向单一功能，它应该使用的参数就越少。您的问题可能不在您认为的位置。

# jquery - slideDown div 里面有文字

> ID：15592549
> 
> 赞同：1
> 
> 时间：2013-03-23T21:57:55.577
> 
> 标签：jquery, jquery-animate, slidedown

## [小提琴](http://jsfiddle.net/8HgVm/)

我正在尝试向下滑动一个 Div。

```
$('#rnotif').slideDown('slow'); 
```

div 滑动正常，但里面的文本内容看起来固定在一个地方。

如何使此文本与 Div 一起滑动。

我有我的 div 定位`absolute`，我不想因为某种原因改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:03:34.080

您需要将文本放入另一个标签（`b`在本例中或另一个标签中`div`）并将其设置为`position:absolute;`并`bottom:0px;`在滑动发生时重新对齐它。希望这可以帮助。

```
 $('document').ready(function(){
    var html = "<div id='rnotif' style='background: #ffffcc;height: 70px;font-size: 25px;position: absolute;top: 0px;width: 100%;line-height: 70px;'><b style='position:absolute;bottom:0px;text-align: center; width:100%'>sliding down</b></div>";
    $('body').append(html);
    $('#rnotif').hide();
    $('#rnotif').slideDown('slow');
}); 
```

JsFiddle：http: [//jsfiddle.net/8HgVm/2/](http://jsfiddle.net/8HgVm/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:28:06.337

这是我的尝试... :) 样式没有改变，只有顶部位置从 0 更改为 -95 px .. 所以用`animate({top:'0px'},"slow")`

我将元素“滑动”到原始位置.. 意思是 0px.. 这将移动中的所有内容`div`作为一个元素移动。“就像一个盒子，而不是单独的物品。” 因此在不影响其他任何东西的情况下创建滑下效果:)

[http://jsfiddle.net/cXdGL/3/](http://jsfiddle.net/cXdGL/3/)

```
$('document').ready(function(){
    var html = "<div id='rnotif' style='background: #ffffcc;height: 70px;font-size: 25px;position: absolute;top: -95px;width: 100%;text-align: center;line-height: 70px;'>sliding down</div>";
    $('body').append(html);
    $("#rnotif").animate({top:'0px'},"slow")
}); 
```

# google-app-engine - 无法使 Google App Engine Images API get_serving_url 函数工作

> ID：15592555
> 
> 赞同：0
> 
> 时间：2013-03-23T21:58:16.327
> 
> 标签：google-app-engine, python-3.x, python-imaging-library

我是 Google App Engine 和 Python 的新手。我几乎完成了一个项目，但无法让 get_serving_url() 函数工作。根据文档，我已将所有内容简化为最基本的功能。但是我仍然从服务器收到 500 错误。有什么想法吗？这是代码：

```
from google.appengine.api import images

....

class Team(db.Model):
    avatar = db.BlobProperty()

    ....

    def to_dict(self):
        ....
        image_url = images.get_serving_url(self.avatar.key()) 
```

最后一行是问题......将其注释掉会使应用程序运行良好。但它几乎是直接从文档中复制而来的。我应该注意，我可以通过以下方式直接下载头像 blob：

```
class GetTeamAvatar(webapp2.RequestHandler):
def post(self):
    team_id = self.request.get('team_id')
    team = Team.get_by_id(long(team_id))
    self.response.write(team.avatar) 
```

所以我知道它存储正确。我的机器上没有 PIL……是这个问题吗？数据存储的图像 API 说它在本地有 PIL，所以如果我正在部署我的应用程序，它应该没关系，对吧？我有 Python 3.3，显然 PIL 停在 2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:51:27.250

Python appengine 运行时间是 2.7，（OK 和 2.5）所以甚至不要尝试使用 3.x。

其次，get_serving_URL 是您使用 BlobStore 实体键而不是 BlobProperty 调用的方法。

你在这里混淆了两个不同的东西。

我将专注于让您的代码首先在 2.7 下正确地在本地运行，并且 PIL 可用于 2.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:29:01.433

如果您尝试部署您的应用程序，甚至没有在本地测试它，我印象非常深刻。

您需要做的一件事是通过 library 属性在您的 app.yaml 中提供 PIL。

# android - 使用 Intents 在 Activity 之间移动，Android

> ID：15592556
> 
> 赞同：1
> 
> 时间：2013-03-23T21:58:20.553
> 
> 标签：android, android-intent, android-activity

我正在尝试构建一个包含两个活动的简单应用程序。第一个活动有 2`Buttons`和一个`EditText`字段。当按下`save&move`第二个活动应该打开并显示在`EditText`字段中输入的文本（在第一个活动中）。按下`just move`按钮时，第二个活动应该加载（而不做任何事情）。出于某种原因，按下两个按钮时***什么都没有发生。***

*对不起，如果按钮的名称不是很清楚。提前致谢！

这是第一个活动的代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener
{

    private Button nextBT;
    private EditText mainEditText;
    private String data;
    private Button nextPref;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        nextBT=(Button)findViewById(R.id.nextButton);
        mainEditText=(EditText)findViewById(R.id.dataEditText);
        nextPref=(Button)findViewById(R.id.nextPrefBut);        
    }

    public void onClick(View v)
    {
        int id = v.getId();

        switch(id)
        {
            case R.id.nextButton:
            {
                data=mainEditText.getText().toString();
                if(!(data.equals("")) && (data!=null) )
                {
                    Intent intent = new Intent(MainActivity.this,Other.class);
                    intent.putExtra("Intent_Data", data);
                    startActivity(intent);
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "no data to pass", Toast.LENGTH_SHORT).show();
                }
                break;
            }
            case R.id.nextPrefBut:
            {
                startActivity(new Intent(MainActivity.this, Other.class));  
                break;
            }
        }
    }
} 
```

这是第二个活动的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Other extends Activity
{
    private TextView textFromMain;

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_other);
        textFromMain = (TextView)findViewById(R.id.mainText);
        textFromMain.setText(getIntent().getExtras().getString("Intent_Data"));

    }
} 
```

编辑：

感谢您的回复。新问题，如果按下应用程序会崩溃`just move`，有什么想法吗？第一个按钮`save&move`工作得很好。

编辑＃2，崩溃中的logcat：

```
03-24 12:50:14.135: I/ActivityManager(289): START u0 {cmp=com.example.c/.Other} from pid 851
03-24 12:50:14.314: D/dalvikvm(289): GC_FOR_ALLOC freed 980K, 20% free 8310K/10384K, paused 99ms, total 113ms
03-24 12:50:14.584: D/AndroidRuntime(851): Shutting down VM
03-24 12:50:14.584: W/dalvikvm(851): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-24 12:50:14.625: E/AndroidRuntime(851): FATAL EXCEPTION: main
03-24 12:50:14.625: E/AndroidRuntime(851): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.c/com.example.c.Other}: java.lang.NullPointerException
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.os.Looper.loop(Looper.java:137)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-24 12:50:14.625: E/AndroidRuntime(851):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 12:50:14.625: E/AndroidRuntime(851):  at java.lang.reflect.Method.invoke(Method.java:511)
03-24 12:50:14.625: E/AndroidRuntime(851):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-24 12:50:14.625: E/AndroidRuntime(851):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-24 12:50:14.625: E/AndroidRuntime(851):  at dalvik.system.NativeStart.main(Native Method)
03-24 12:50:14.625: E/AndroidRuntime(851): Caused by: java.lang.NullPointerException
03-24 12:50:14.625: E/AndroidRuntime(851):  at com.example.c.Other.onCreate(Other.java:16)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.Activity.performCreate(Activity.java:5104)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-24 12:50:14.625: E/AndroidRuntime(851):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-24 12:50:14.625: E/AndroidRuntime(851):  ... 11 more
03-24 12:50:14.664: W/ActivityManager(289):   Force finishing activity com.example.c/.Other
03-24 12:50:14.703: W/ActivityManager(289):   Force finishing activity com.example.c/.MainActivity
03-24 12:50:14.974: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-24 12:50:15.216: W/ActivityManager(289): Activity pause timeout for ActivityRecord{4112d850 u0 com.example.c/.Other}
03-24 12:50:15.623: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-24 12:50:15.643: W/EGL_emulation(413): eglSurfaceAttrib not implemented
03-24 12:50:16.443: E/SurfaceFlinger(36): GL error 0x0505
03-24 12:50:16.643: E/SurfaceFlinger(36): GL error 0x0505
03-24 12:50:16.753: I/Process(851): Sending signal. PID: 851 SIG: 9
03-24 12:50:16.773: I/WindowState(289): WIN DEATH: Window{41134870 u0 com.example.c/com.example.c.MainActivity}
03-24 12:50:16.786: I/ActivityManager(289): Process com.example.c (pid 851) has died.
03-24 12:50:16.943: W/InputMethodManagerService(289): Got RemoteException sending setActive(false) notification to pid 851 uid 10052
03-24 12:50:17.156: E/SurfaceFlinger(36): GL error 0x0505
03-24 12:50:17.233: E/SurfaceFlinger(36): GL error 0x0505
03-24 12:50:17.366: E/SurfaceFlinger(36): GL error 0x0505
03-24 12:50:46.890: D/ExchangeService(658): Received deviceId from Email app: null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:59:34.413

您尚未为按钮设置 onClickListener。

IE

将此添加到`MainActivity` onCreate 方法中。

```
 nextBT.setOnClickListener(this);
nextPref.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:02:41.583

一方面，您还没有为按钮设置点击监听器。添加：

```
nextBT.setOnClickListener(this);
nextPref.setOnClickListener(this); 
```

对于两个，您的 switch-case 语法是错误的。case 块不需要括号。尝试：

```
 switch(id)
    {
        case R.id.nextButton:

            data=mainEditText.getText().toString();
            if(!(data.equals("")) && (data!=null) )
            {
                Intent intent = new Intent(MainActivity.this,Other.class);
                intent.putExtra("Intent_Data", data);
                startActivity(intent);
            }
            else
            {
                Toast.makeText(getApplicationContext(), "no data to pass", Toast.LENGTH_SHORT).show();
            }
            break;

        case R.id.nextPrefBut:

            startActivity(new Intent(MainActivity.this, Other.class));  
            break;

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:57:13.587

为清楚起见，我将尝试总结讨论和得出的结论：

1）最初的问题（按钮没有反应）是因为他们没有注册任何听众。为了让任何小部件（按钮、文本视图等）以某种非默认方式做出反应，它必须注册一个侦听器，该侦听器将负责该反应。在这种情况下，解决方案只是在底部添加以下两行代码`OnCreate`：

```
nextBT.setOnClickListener(this);
nextPref.setOnClickListener(this); 
```

2）第二个问题（用户按下`just move`按钮时应用程序崩溃）发生在`Other`课堂上。我们看到当用户按下按钮`MainActivity`时执行以下行：`save&move`

```
intent.putExtra("Intent_Data", data); 
```

`just move`然而，当用户按下按钮时，没有执行相应的动作。结果是，有时意图会在`Intent_Data`键上附加一个值，有时则不会，具体取决于按下的按钮。由于没有检查`Other`, 来查看是否`Intent_Data`有值（即`getIntent().getExtras().getString("Intent_Data") != null`），因此每次按下`just move`按钮时都会得到 NullPointerException。这个问题有很多简单的解决方案。例如，您可以添加提到的检查。然而，最好的解决方案是保持意图一致并简单地重写`onClick`方法如下：

```
public void onClick(View v)
{
    String data = mainEditText.getText().toString();
    if(v.getId() == R.id.nextButton && data.equals("")) {
        Toast.makeText(getApplicationContext(), "no data to pass", Toast.LENGTH_SHORT).show();
    }
    else {
        Intent intent = new Intent(MainActivity.this,Other.class);
        intent.putExtra("Intent_Data", data);
        startActivity(intent);
    }
} 
```

另外，考虑使用函数：`getStringExtra("Intent_Data")`而不是使用：`getExtras().getString("Intent_Data")`。它做同样的事情，但它更短更高效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T12:35:46.620

源类：

```
 Intent myIntent = new Intent(this, NewActivity.class); 
    myIntent.putExtra("firstName", "Your First Name Here");
    myIntent.putExtra("lastName", "Your Last Name Here");
    startActivity(myIntent) 
```

目标类（NewActivity 类）：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);    

    Intent intent = getIntent();

    String fName = intent.getStringExtra("firstName");
    String lName = intent.getStringExtra("lastName");

  } 
```

# python - 使用 python 在文本文件中搜索特定字符的出现

> ID：15592558
> 
> 赞同：1
> 
> 时间：2013-03-23T21:58:24.483
> 
> 标签：python, regex, file, search

我的问题与[此](https://stackoverflow.com/questions/4785244/how-would-i-search-a-text-file-in-python?s=c09c0e5a-9367-4b99-b0be-672d5b132053)类似，只是我想搜索多个 的出现`chars`，例如`g`, `d`and `e`，然后打印所有指定字符存在的行。

我尝试了以下方法，但没有奏效：

```
searchfile = open("myFile.txt", "r")
for line in searchfile:
    if ('g' and 'd') in line: print line,
searchfile.close() 
```

我得到的行中有“g”或“d”或两者都有，我想要的只是两个出现，而不是至少一个，就像运行上述代码的结果一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T23:17:01.847

```
if set('gd').issubset(line) 
```

`c in line`这样做的好处是每次检查都遍历整条线时不会经过两次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:25:44.420

这一行：

```
if ('g' and 'd') in line: 
```

是相同的

```
if 'd' in line: 
```

因为

```
>>> 'g' and 'd'
'd' 
```

你要

```
if 'g' in line and 'd' in line: 
```

或更好：

```
if all(char in line for char in 'gde'): 
```

（您也可以使用集合交集，但这不太通用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:16:00.427

当涉及到模式匹配时，正则表达式肯定会对您有所帮助，但您的搜索似乎比这更容易。尝试以下操作：

```
# in_data, an array of all lines to be queried (i.e. reading a file)
in_data = [line1, line2, line3, line4]

# search each line, and return the lines which contain all your search terms
for line in in_data:
    if ('g' in line) and ('d' in line) and ('e' in line):
        print(line) 
```

这么简单的东西应该可以工作。我在这里做一些假设： 1\. 搜索词的顺序无关紧要 2\. 不处理大写/小写 3\. 不考虑搜索词的频率。

希望能帮助到你。

# actionscript-3 - 如何在 AS3 中每次调用 Math.random 时调用不同的值？

> ID：15592567
> 
> 赞同：1
> 
> 时间：2013-03-23T21:59:13.343
> 
> 标签：actionscript-3, math, random

假设我在函数中有类似下面的内容，第一次调用它时，我有一个随机值，但每隔一次调用它，我得到的数字与它第一次吐出的数字相同。我能做些什么来确保它每次被调用时都是随机的？

```
if (Cosmo.hitTestObject(Asteroid5))
    {

        Asteroid5.y = (Math.random() * 20 - 5);
        Asteroid5.x = (Math.random() * 20 - 15);
        Asteroid5.x = Asteroid5.x + (Math.random() * 20 - 15);
        Asteroid5.y = Asteroid5.y + (Math.random() * 20 - 5);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:09:52.940

[编辑，基于以下评论] Math.random() 的 AS3 参考页面说：

> 返回一个伪随机数 n，其中 0 <= n < 1。返回的数字以未公开的方式计算，并且是“伪随机”，因为计算中不可避免地包含一些非随机元素。

如果您想使用基于种子的伪随机数生成器，这应该可以帮助您：

[http://www.kirupa.com/forum/showthread.php?365564-AS3-Seeded-Pseudo-Random-Number-Generator](http://www.kirupa.com/forum/showthread.php?365564-AS3-Seeded-Pseudo-Random-Number-Generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T08:55:37.253

在您的第 2 条语句中，您似乎正在使用 Asteroid5.y 和 Asteroid5.x 作为变量。所以一个想法是使用正确类型的变量（我假设它是数字）：

```
var rndX:Number = (Math.random() * 20 - 15); 
var rndY:Number = (Math.random() * 20 - 5); 
var rndX2:Number = rndX + (Math.random() * 20 - 15);
var rndY2:Number = rndY + (Math.random() * 20 - 5);
Asteroid5.x = rndX2;
Asteroid5.y = rndY2; or
var rndX:Number;
var rndY:Number;
for ( var i:uint=0; i<2; i++ )
{
   rndX += (Math.random() * 20 - 15);
   rndY += (Math.random() * 20 - 5);
}
Asteroid5.x = rndX;
Asteroid5.y = rndY; 
```

现在您可以在调试模式下单步执行您的代码，并准确查看变量值更改时发生的情况。也可以在您的代码中搜索 'Asteroid5.x =' & 'Asteroid5.y =' & 'Asteroid5.y=' & 'Asteroid5.x='

# sql - 存储过程中的 SQL IF/Case

> ID：15592571
> 
> 赞同：1
> 
> 时间：2013-03-23T21:59:33.023
> 
> 标签：sql, sql-server-2008, stored-procedures, insert, case

我正在尝试创建将在我的 Pickup 表中插入两个值的过程。

```
create procedure sp_InsertPickup
@ClientID int,
@PickupDate date 
as 
insert into Pickup (ClientID ,PickupDate )values (@ClientID,@PickupDate) 
```

但是我需要检查这个客户是否已经在本月取货（表中的记录）它不应该在表中插入任何新记录。例如，如果这个数据在表中

```
ClientID PickupDate
11       03-01-2013 
```

我想插入`ClientId 11 and new PickupDate 03-24-2013`它不应该插入，因为这个人本月已经取货了。任何想法如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:01:31.343

因此，在这种情况下，请使用`IF NOT EXISTS`：

```
CREATE PROCEDURE dbo.InsertPickup
    @ClientID int,
    @PickupDate date 
AS
   IF NOT EXISTS (SELECT * FROM Pickup 
                  WHERE ClientID = @ClientID 
                    AND MONTH(PickupDate) = MONTH(@PickupDate) 
                    AND YEAR(PickupDate) = YEAR(@PickupDate) )
      INSERT INTO Pickup (ClientID, PickupDate)
      VALUES (@ClientID, @PickupDate) 
```

您可能想以某种方式向调用者表明没有插入数据，因为它已经存在......

作为旁注：您不应该**为**您的存储过程使用`sp_`前缀。Microsoft 已[保留该前缀供自己使用（请参阅*命名存储过程*）](http://msdn.microsoft.com/en-us/library/ms190669%28v=sql.105%29.aspx)，并且您确实会在将来某个时候冒名称冲突的风险。[这对您的存储过程性能也很不利](http://sqlserverpedia.com/blog/sql-server-bloggers/stored-procedure-performance-using-%E2%80%9Csp_%E2%80%9D-prefix-%E2%80%93-myth-or-fact/)。最好只是简单地避免`sp_`并使用其他东西作为前缀 - 或者根本没有前缀！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T23:05:14.230

最安全的方法是使用`merge`或对表施加约束并捕获错误。

更安全的原因`merge`是它是原子事务。检查存在*然后*进行插入是危险的，因为其他人可能已经插入（或删除）了该行。您可以开始在存储过程中使用事务语义，但是当 SQL Server 提供时为什么还要麻烦`merge`：

```
merge Pickup as target
using (select @PickupDate, @ClientId) as source(PickupDate, ClientId)
    on target.clientId = source.ClientId and year(source.PickupDate) = year(target.PickupDate) and month(source.PickupDate) = month(target.PickupDate)
when NOT MATCHED then
    insert(PickupDate, ClientId) values(source.PickupDate, source,ClientId); 
```

您可以阅读更多`merge` [关于](http://technet.microsoft.com/en-us/library/bb510625.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T22:05:16.950

这就是您可以使用它来实现它的方式`IF NOT EXISTS`

```
create procedure sp_InsertPickup
    @ClientID int,
    @PickupDate date 
as 
    IF NOT EXISTS (SELECT * FROM Pickup 
                            WHERE ClientID = @ClientID 
                            AND DATEPART(mm,PickupDate) = DATEPART(mm,@PickupDate)
                            AND DATEPART(yy,PickupDate) = DATEPART(yy,@PickupDate))
    BEGIN
        insert into Pickup (ClientID ,PickupDate )values (@ClientID,@PickupDate)
    END
begin
end 
```

# ios - 带有 NSDate 错误的 NSPredicate 搜索

> ID：15592575
> 
> 赞同：0
> 
> 时间：2013-03-23T21:59:55.050
> 
> 标签：ios, objective-c, database, sqlite, nspredicate

我正在尝试获取具有待办事项> =某个日期的待办事项列表。

数据模型：Todolist 有很多 Todos。

Todo 模型中的`due_at`字段是一个 Date 对象。

这是我正在使用的获取请求，它一直在崩溃。

```
NSDate *now = [NSDate date];
int daysToAdd = _dueDateSlider.intValue;
NSDate *datePeriod = [now dateByAddingTimeInterval:60*60*24*daysToAdd];

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Todolist"];
NSPredicate *pred = [NSPredicate predicateWithFormat:@"todos.due_at >= %@", datePeriod];
[request setPredicate:pred];
NSError *error = nil;
NSArray *todolists = [managedObjectContext executeFetchRequest:request error:&error]; 
```

我收到的错误是：

```
-[__NSArrayI compare:]: unrecognized selector sent to instance 0x1018a4c50
An uncaught exception was raised 
```

我不确定为什么会发生这种情况，因为任何其他谓词搜索都可以正常工作。`todos.due_at != nil`很好，也`todos.content like '%test%'`很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:13:35.580

要获取具有*任何*待办事项 >= 某个日期的列表，请使用

```
 [NSPredicate predicateWithFormat:@"ANY todos.due_at >= %@", datePeriod]; 
```

# javascript - 关键“getItem”的localStorage getter/setter：错误，规范不一致或其他？

> ID：15592579
> 
> 赞同：3
> 
> 时间：2013-03-23T22:00:23.447
> 
> 标签：javascript, local-storage, specifications

这段代码总结了我的问题：

```
localStorage.setItem('getItem', 4)
undefined
localStorage.getItem
function getItem() { [native code] }

localStorage['getItem'] = 'user'
"user"
localStorage.getItem
"user"
localStorage.getItem('getItem')
TypeError: Property 'getItem' of object #<Storage> is not a function 
```

使用该`setItem`方法或使用属性访问器会改变 localStorage 的反应方式。

这是一个错误吗？规格不一致？还有什么？

我觉得我应该在某个地方报告这个，但我真的不知道在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:13:21.337

> 使用 setItem 方法或使用属性访问器会改变 localStorage 的反应方式。
> 
> 这是一个错误吗？

看起来不像。从[规格](http://www.w3.org/TR/webstorage/#the-localstorage-attribute)：

> 当 setItem()、removeItem() 和 clear() 方法在与本地存储区域关联的 Storage 对象 x 上调用时，如果这些方法执行了某些操作，则在每个 Document 对象中，其 Window 对象的 localStorage 属性的 Storage 对象为与除 x 之外的相同存储区域相关联，必须触发存储事件，如下所述。

localStorage 对象是一个[IDL 属性](http://www.w3.org/TR/WebIDL/)，具有对 Storage 接口的引用。Storage 接口扩展了 Object.prototype，它带来了额外的属性，并且还定义了自己的一组属性。

该`setItem`方法将属性存储在存储列表中。当对象属性发生变化时，对象也会触发一个事件，并在这些情况下更新存储区域。

所以预期的行为`setItem`是将键值对存储在存储列表中。的预期行为`getItem`是从存储列表中提取与键关联的值。

那么当我们尝试直接访问属性时，预期的行为是什么？此行表示键值列表充当“支持的属性”：

> Storage 对象上支持的属性名称是当前存在于与该对象关联的列表中的每个键/值对的键。

这是什么意思？这意味着[这些属性被映射到接口规范定义的 getter 和 setter](http://www.w3.org/TR/WebIDL/#dfn-support-named-properties)。对于存储，接口规范如下所示：

```
interface Storage {
  readonly attribute unsigned long length;
  DOMString? key(unsigned long index);
  getter DOMString getItem(DOMString key);
  setter creator void setItem(DOMString key, DOMString value);
  deleter void removeItem(DOMString key);
  void clear();
}; 
```

So`localStorage["x"]`映射到 的值`getItem("x")`，它返回存储列表中“x”的值，`localStorage["x"] = y`并将映射到`setItem("x",y)`。

但是，只有在对象上没有该名称的本机属性时才会运行这些，除非在接口上设置了[overridebuiltins](http://www.w3.org/TR/WebIDL/#OverrideBuiltins)属性（它不适用于存储）。

> 如果 [OverrideBuiltins] 扩展属性出现在接口上，则表明对于实现该接口的平台对象，无论对象上存在哪些其他属性，与该对象支持的所有属性名称对应的属性都将出现在该对象上或其原型链。这意味着命名属性将始终遮盖任何原本会出现在对象上的属性。这与通常的行为形成对比，通常的行为是仅当对象本身或其原型链上的某处没有同名的属性时才公开命名属性。

因此，对于属性，我们应该期望，如果在对象上定义了一个函数，它将始终在请求时访问/设置它。否则它将检查存储列表并查看它是否具有值并更改或返回它。

### 摘要（TL；DR）

规范中的预期行为，以及我们在您测试时发现的行为是`setItem`将`getItem`预先存在的属性/函数的值存储为键/值对，并访问它们，而不会覆盖现有值。当我们尝试直接通过 localStorage["getItem"] 访问或修改这些值时，我们将改为访问本地属性，因为“支持的属性”规范要求默认情况下不覆盖内置属性。

# javascript - Safari 中的历史 API - pushState / replaceState - 状态未定义

> ID：15592580
> 
> 赞同：0
> 
> 时间：2013-03-23T22:00:36.557
> 
> 标签：javascript, html, safari, pushstate

以下适用于 Chrome 和 Firefox，但不适用于 Safari (6.0.2)：

```
var data = [];
data.Message = "hi!"
history.pushState({Data:data}, '', document.location.href);
console.log(history);
alert(history.state.Data.Message); 
```

在 Safari 中，历史状态的控制台日志是未定义的，消息也是如此。replaceState 也是如此。

在这里小提琴：http: [//jsfiddle.net/wYV9d/3/](http://jsfiddle.net/wYV9d/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:33:15.470

这是因为我将数据创建为数组而不是对象。

```
var data = {}; 
```

工作得很好。

# python - 将 QMimeData 粘贴到另一个窗口的 QTextEdit

> ID：15592581
> 
> 赞同：1
> 
> 时间：2013-03-23T22:00:37.773
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我仍然是 Python 和 PyQt 的新手，所以我有一个非常基本的问题。我在 QTextEdit 小部件内的父窗口中有一些文本和图像，我正在尝试将所有内容复制到子窗口的 QTextEdit。但由于某种原因，我无法让它复制图像 - 只复制文本而不复制图像。这是给我带来麻烦的代码片段：

```
self.textEdit.selectAll()
data = self.textEdit.createMimeDataFromSelection()
self.child_window.textEdit.insertFromMimeData(data) # doesn't work with images 
```

这是我要运行的小程序：

```
import sys
from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class MyWindow(QtGui.QWidget):

    def __init__(self,parent=None):
        super(MyWindow,self).__init__(parent)

        self.textEdit = QtGui.QTextEdit(self)
        self.textEdit.setText("Hello World\n")

        self.pushButton = QtGui.QPushButton(self)
        self.pushButton.setText("Copy and paste to Child Window")
        self.pushButton.clicked.connect(self.click_copy_data)

        self.pushButton2 = QtGui.QPushButton(self)
        self.pushButton2.setText("Insert Image")
        self.pushButton2.clicked.connect(self.click_file_dialog)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.textEdit)
        self.layoutVertical.addWidget(self.pushButton2)
        self.layoutVertical.addWidget(self.pushButton)

        self.setGeometry(150, 150,640, 480)
        self.child_window = CustomWindow(self)
        self.child_window.show()

    def click_copy_data(self):

        self.textEdit.selectAll()
        data = self.textEdit.createMimeDataFromSelection()
        self.child_window.textEdit.insertFromMimeData(data)

    def click_file_dialog(self):
        filePath = QtGui.QFileDialog.getOpenFileName(
            self,
            "Select an image",
            ".",
            "Image Files(*.png *.gif *.jpg *jpeg *.bmp)"
        )

        if not filePath.isEmpty():
            self.insertImage(filePath)

    def insertImage(self,filePath):

        imageUri = QtCore.QUrl(QtCore.QString("file://{0}".format(filePath)))
        image    = QtGui.QImage(QtGui.QImageReader(filePath).read())

        self.textEdit.document().addResource(
            QtGui.QTextDocument.ImageResource,
            imageUri,
            QtCore.QVariant(image)
        )

        imageFormat = QtGui.QTextImageFormat()
        imageFormat.setWidth(image.width())
        imageFormat.setHeight(image.height())
        imageFormat.setName(imageUri.toString())

        textCursor = self.textEdit.textCursor()
        textCursor.movePosition(
            QtGui.QTextCursor.End,
            QtGui.QTextCursor.MoveAnchor
        )
        textCursor.insertImage(imageFormat)

        # This will hide the cursor
        blankCursor = QtGui.QCursor(QtCore.Qt.BlankCursor)
        self.textEdit.setCursor(blankCursor)

class CustomWindow(QtGui.QDialog):
    def __init__(self,parent=None):
        super(CustomWindow,self).__init__(parent)

        self.textEdit = QtGui.QTextEdit(self)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.textEdit)

if __name__ == "__main__":

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')
    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

该程序的工作方式是在主窗口中有一些文本，然后插入图像。然后单击“复制并粘贴到子窗口”按钮，它应该将所有内容粘贴到子窗口，包括图像 - 但这并不像它应该的那样工作 - 文本被复制但我得到一个小文件图标图像应该在哪里。

我会很感激你在这方面的帮助。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:00:14.817

`QTextEdit`默认情况下不解码图像 MIME 类型，因此只需将其子类化以添加支持，您需要重新实现[`canInsertFromMimeData`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html#canInsertFromMimeData)and [`insertFromMimeData`](http://doc-snapshot.qt-project.org/4.8/qtextedit.html#insertFromMimeData)，也可以尝试[`QTextBrowser`](http://doc-snapshot.qt-project.org/4.8/qtextbrowser.html)。只需将其添加到您的脚本中：

```
class MyTextBrowser(QtGui.QTextBrowser):
    def __init__(self, parent=None):
        super(MyTextBrowser, self).__init__(parent)

        self.setReadOnly(False)

    def canInsertFromMimeData(self, source):
        if source.hasImage():
            return True

        else:
            return super(MyTextBrowser, self).canInsertFromMimeData(source)

    def insertFromMimeData(self, source):
        if source.hasImage():
            image = QtCore.QVariant(source.imageData())

            document = self.document()
            document.addResource(
                QtGui.QTextDocument.ImageResource,
                QtCore.QUrl("image"),
                image
            )

            cursor = self.textCursor()
            cursor.insertImage("image")

        super(MyTextBrowser, self).insertFromMimeData(source) 
```

并更改`self.textEdit = QtGui.QTextEdit(self)`为`self.textEdit = MyTextBrowser(self)`两个小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:11:29.780

这是我按照 X.Jacobs 的建议最终使用的解决方案。

```
html = parent_textEdit.toHtml()
child_textEdit.setHtml(html) 
```

我让事情变得更复杂了。当我意识到 QTextEdit 会跟踪图像在 toHtml() 生成的 html 中作为 url 存储的位置时，这一切都说得通了。

# php - 为什么等待运行时的进程数很高，但我的 CPU 99% 空闲？

> ID：15592588
> 
> 赞同：0
> 
> 时间：2013-03-23T22:01:21.640
> 
> 标签：php, linux, apache

我有一个同时运行大量（大约 100 个）php 文件的脚本。我注意到每个脚本的启动时间经常延迟很多。当一次触发所有脚本时，一些脚本只会在 15 秒后启动。

我使用下面的代码同时运行这些脚本（此代码工作没有任何错误）。请注意，这 100 个 php 文件与同时调用它们的脚本位于同一台服务器上。

```
function my_curl ($i, $url, $post_data, $return, $auth='', $proxy='', $timeout=5) {
 $curl="/usr/bin/curl -s";
 if ($post_data!='') $curl.=" --data '$post_data'";
 if ($timeout!='') $curl.=" --connect-timeout $timeout";
 if ($auth!='') {
  list($user,$pass)=explode(':',$auth);
  $curl.=" --basic --user $user:$pass";
 }
 if ($proxy!='') {
  list($proxy_ip,$proxy_port,$proxy_user,$proxy_pass)=explode(':',$proxy);
  $curl.=" --proxy $proxy_ip:$proxy_port --proxy-user $proxy_user:$proxy_pass";
 }
 if ($return==0) {
  $curl.=" $url >/dev/null 2>/dev/null &";
 } else {
  $curl.=" $url >return-$i 2>/dev/null &";
 }
 return("$curl\n");
}

$to_run='';
for ($i=0; $i<$max; $i++) {
 $url='http://www.some_url_to_the_same_server.com/post.php';
 $post_data="var=web-$i";
 $to_run.=my_curl($i, $url, $post_data, $return, $auth, $proxy, $timeout);
}

file_put_contents(realpath($_SERVER["DOCUMENT_ROOT"]).'/run_data/runner.sh',$to_run);
shell_exec('/bin/bash '.realpath($_SERVER["DOCUMENT_ROOT"]).'/run_data/runner.sh'); 
```

我有一个 3CPU 的 linux centos 服务器。我知道我的系统不应该有超过 12 个 procs r，但它要多得多（见下文）。当我运行上面的脚本并一次触发 100 个 php 脚本时，我看到了下面的 vmstat。

```
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
30  0     60  90388  14428 223996    0    0    20    10    3   10  0  0 99  1  0 
```

当系统处于“休息”状态时，我得到以下输出：

```
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0     60 155064  14672 223952    0    0    20    10    3   10  0  0 99  1  0 
```

由于 procs r 显示 CPU 过载，我不明白 CPU 如何同时显示 99% 空闲和 procs r 非常高。

我可以做些什么来提高我的系统的性能，以便同时触发所有 100 个脚本？

非常感谢您的帮助。

**更新 1：**

这是我的 httpd.conf 文件的相关部分：

```
User apache
Group apache

KeepAlive On
KeepAliveTimeout 30

ServerAdmin admin@localhost
DocumentRoot "/var/www/html"

MaxClients 50
MaxRequestsPerChild 50
StartServers 5
MinSpareServers 5
MaxSpareServers 20
MaxKeepAliveRequests 50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:49:50.363

对于这些 curl 调用中的每一个，您都向服务器发出单独的 HTTP 请求。将`MaxClients` 指令设置为`50`一次只能处理这么多请求。

可能的解决方案：

1）如果您不需要流程输出，请不要等待：

```
pclose(popen('/path/to/executable', 'r')); 
```

2) 如果不是绝对必要，不要使用子请求 - 尝试将其重写为 CGI 脚本，可以直接运行而不是发出子请求。

3）增加将在apache conf中同时处理的最大连接数：

```
MaxClients 256 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:20:25.050

我不确定，但我看到了三种可能性：

1.  在发送其他命令之前，您的`sh`脚本会等待较早的命令处理
2.  可能有点`CURL`问题。可能一次只能处理一些查询？
3.  Apache 无法一次处理所有请求，因此必须等待

您可以通过查看`top`或`ps auxw`命令输出来获得一些想法，`apache`记录并查看它们是如何执行的。此外，您可以在每个`curl`命令之后添加一些示例输出，以查看它们是否在一次运行。如果它们真的同时运行，那就是 Web 服务器问题。

# lisp - 在lisp中给符号一个负值

> ID：15592596
> 
> 赞同：4
> 
> 时间：2013-03-23T22:02:06.970
> 
> 标签：lisp, clisp

我对 lisp 很陌生，我正在研究基本语法。我正在尝试将：
r1 = (-b + sqrt(b^2 - 4*a*c))/(2*a)
转换为 lisp 格式。我认为我遇到的唯一问题是我无法让 lisp 将 -b 识别为符号 b 的负值。这是我到目前为止从 lisp 提示符中得到的：

```
[17]> (setq a 1L0)
1.0L0
[18]> (setq b -1L0)
-1.0L0
[19]> (setq c -1L0)
-1.0L0
[20]> (setq r1 (+ (/ (sqrt (- (power b 2) (* (* 4 a) c))) (* 2 a)) -b))

*** - EVAL: variable -B has no value
The following restarts are available:
USE-VALUE      :R1      You may input a value to be used instead of -B.
STORE-VALUE    :R2      You may input a new value for -B.
ABORT          :R3      Abort main loop 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T22:07:49.933

采用

```
(- b) 
```

否定 b。它相当于

```
(- 0 b) 
```

# java - Junit 和 EasyMock Servlet 测试

> ID：15592597
> 
> 赞同：1
> 
> 时间：2013-03-23T22:02:38.310
> 
> 标签：java, servlets, junit, easymock

我在测试 Servlet 时遇到问题。Bouncer 是一个 Servlet，它具有简单的方法 doPost 和 init 被我覆盖。但是当我运行该代码时，我得到了异常

```
@Before
        public void Before() throws IOException, ServletException,
                InstantiationException, IllegalAccessException,
                IllegalArgumentException, InvocationTargetException,
                NoSuchMethodException, SecurityException, ClassNotFoundException {
            encoder = EasyMock.createMock(Encoder.class);
            EasyMock.expect(encoder.encode("password")).andReturn("asdf");
            EasyMock.expect(encoder.encode("nic")).andReturn("asss");
            EasyMock.expect(encoder.encode("Password")).andReturn("ass");
            EasyMock.replay(encoder);
            db = EasyMock.createMock(UserDataBase.class);
            db.connect();
            EasyMock.expect(db.isConnected()).andReturn(true);
            EasyMock.expect(db.getUserByLoginAndPassword("login", "asss"))
                    .andReturn(null);
            EasyMock.expect(db.getUserByLoginAndPassword("login", "asdf"))
                    .andReturn(new User("Rafal", "Machnik"));
            EasyMock.expect(db.getUserByLoginAndPassword("fake", "asdf"))
                    .andReturn(null);
            EasyMock.expect(db.getUserByLoginAndPassword("login", "ass"))
                    .andReturn(null);
            EasyMock.replay(db);

            lsf = EasyMock.createMock(LoginServiceFactory.class);
            EasyMock.expect(lsf.getEncoder()).andReturn(encoder).anyTimes();
            EasyMock.expect(lsf.getUserDataBase()).andReturn(db).anyTimes();
            EasyMock.replay(lsf);

            config = EasyMock.createMock(ServletConfig.class);
            EasyMock.expect(config.getInitParameter("LoginServiceFactory"))
                    .andReturn("pl.to.cw4.LoginServiceFactory");
            EasyMock.replay(config);

            request = EasyMock.createMock(HttpServletRequest.class);
            EasyMock.expect(request.getParameter("login")).andReturn("login")
                    .anyTimes();
            EasyMock.expect(request.getParameter("password")).andReturn("password")
                    .anyTimes();
            EasyMock.replay(request);

            pageSource = new StringWriter();

            response = EasyMock.createMock(HttpServletResponse.class);
            EasyMock.expect(response.getWriter())
                    .andReturn(new PrintWriter(pageSource)).anyTimes();
            EasyMock.replay(response);

            bouncer = new Bouncer(lsf);

            bouncer.init(config);

        }

        @Test
        public void bouncerTest() throws ServletException, IOException {
            bouncer.service(request, response);
            assertNotNull(pageSource.toString());

        } 
```

java.lang.AssertionError：意外的方法调用getMethod（）：在org.easymock.internal.MockInvocationHandler.invoke（MockInvocationHandler.java:32）...

如果有人知道如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:08:22.640

该`service()`方法调用`getMethod()`请求以确定它是否必须调用`doGet()`或`doPost()`其他 servlet 方法。由于你没有`getMethod()`在你的模拟请求中存根这个调用，EasyMock 会抛出这个异常。

你为什么不`doPost()`直接打电话，而不是打电话`service()`，因为那是你要测试的方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:08:49.003

该错误表明 easymock 在模拟对象中遇到了方法调用 getMethod()。逐行调试程序并为模拟对象添加期望调用。

如果方法调用不是模拟对象，则不必在期望中添加方法调用，但应将模拟对象中的所有调用添加到您的测试方法中。

getMethod() 在服务中被调用，因为你在模拟 HttpServletRequest ，你还需要模拟在 HttpServletRequest 上调用的所有方法

# javascript - 如何在javascript中替换字符串中的随机字符

> ID：15592603
> 
> 赞同：0
> 
> 时间：2013-03-23T22:03:03.033
> 
> 标签：javascript, algorithm

我想替换从另一个字符串中随机挑选的字符...

```
var charToTakeFrom = '0x080,0x081,0x082,0x083,0x084,0x085,0x086,0x087,0x088,0x089,0x090';
var givenString = 'The brown fox jumps over the pink fence.'; 
```

结果字符串应将 givenString 中的随机字符替换为 charToTakeFrom 字符串中的随机字符。

最简单的方法是编写一个**for**循环，用 charToTakeFrom 中的随机字符替换 givenString 中的随机字符数。

有没有更简单/更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:14:11.137

**整个单词：** [示例](http://jsfiddle.net/zachrip/UrHvm/1/)

```
var ctu = [],s = "The bird flew majestically across the valley in search of worms.", newstring=" ";
ctu[0]="derp4561";
ctu[1]="derp12534";
ctu[2]="derp684";
var s = s.split(" ");
for(var i = 0;i<s.length;i++){      
s[i]=ctu[Math.floor(Math.random() * ctu.length)];
newstring +=s[i] + " ";
}
document.write(newstring); 
```

**单个字符：** [示例](http://jsfiddle.net/zachrip/E972y/2/)

```
var ctu = [],s = "The bird flew majestically across the valley in search of worms.", newstring="";
ctu[0]="0x080";
ctu[1]="0x081";
ctu[2]="0x082";
ctu[3]="0x083";
ctu[4]="0x084";
ctu[5]="0x085";
var s = s.split("");
for(var i = 0;i<s.length;i++){
if(s[i] != " "){
    s[i]=ctu[Math.floor(Math.random() * ctu.length)];
    newstring +=s[i];
}
else{
    newstring += " ";
}
}
document.write(newstring); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:34:30.837

我不确定这是否是最快的方式，但无论如何它已经足够了=）希望你喜欢它

**EDIT2**在 JS 上完成！

```
var complexity = 0.3; // 0 to .99 if more then more letters in src string will be replaced by random ones 
var randsArr = ("!@#$)**($#*)($#$()$()#$%^&*()%^$#$$#$^").split('').sort(function () { return 0.5 - Math.random()});
var srcArr = ("The brown fox jumps over the pink fence.").split('');
result = $.map(srcArr,function (el) { return (Math.random()>complexity) ? el : (randsArr.length) ? randsArr.shift() : el ; }).join(''); 
```

在 JSFiddle 上[测试它](http://jsfiddle.net/qfjjS/)

旧的 php 版本，以防万一有人需要它：

```
$rands = "!@#$%^&*()";
$srcStr = "The brown fox jumps over the pink fence.";
$srcArr = str_split ($srcStr);
$randsArr = array_merge(str_split($rands),array_fill(strlen($rands),strlen($srcStr)-strlen($rands),false));
shuffle($randsArr);
echo implode(array_map(function($letter,$replacement) {  return ($replacement!=false)?$replacement:$letter;  },$srcArr,$randsArr)); 
```

**编辑**我的错...我在想它是关于 php =( 给我几分钟在 JS 上重写它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:35:48.267

首先，你最好使用数组。进而：

```
var charToTakeFrom = [0x080,0x081,0x082,0x083,0x084,0x085,0x086,0x087,0x088,0x089,0x090];
var givenString = 'The brown fox jumps over the pink fence.';
var randomNumber = Math.floor((Math.random() * 10)) + 1); //Computes a random number from 1 to 11
var slicer = randomNumber - 1;
var slice = charToTakeFrom.slice(slicer, randomNumber); //get the character 
```

我假设您已经知道如何替换字符串。

# c# - 我需要帮助从单个方法和类实例化多个对象

> ID：15592606
> 
> 赞同：1
> 
> 时间：2013-03-23T22:03:20.287
> 
> 标签：c#, instantiation

C# 家庭作业问题：我正在创建一个控制台应用程序，它提示输入两个整数，提示执行哪个数学运算，并返回结果。我能够让它与我的两个硬编码操作数一起工作，现在我试图通过用户输入而不是硬编码变量来实例化两个单独的对象。我已将其简化为我遇到问题的准系统代码，我怀疑这个问题与我从同一方法创建两个对象的方式有关......但我不确定是什么.

这是我的主要课程...

```
 public class MainModule 
 {
    public static void Main(string[] args)
    {
         // get Operands
        Console.WriteLine("You Will Be Entering Two Integers.\n");
         //
        MathUI myOperand1 = new MathUI();
        int op1 = myOperand1.EnterInteger();
         //
        MathUI myOperand2 = new MathUI();
        int op2 = myOperand2.EnterInteger();

        Console.WriteLine("You chose {0} and {1}.", (int)op1, (int)op2);
        Console.ReadLine();
    }
 } 
```

...以及接受输入的 MathUI 类。

```
public class MathUI
{
    public int EnterInteger()
    {
        Console.Write("Enter an integer: ");
        int enteredInteger = Console.Read();
        return (enteredInteger);
    }
} 
```

当我执行程序时，我得到一个整数的提示。例如，我输入 3，这是我的输出。

```
You Will Be Entering Two Integers.

Enter an integer: 3
Enter an integer: You chose 51 and 13.

Math demo completed
Press <enter> to quit 
```

当我输入第一个整​​数后按回车时，我会自动得到第二个整数；当我尝试输出整数值时，它们与我的输入不匹配。

这里发生了什么？我实例化的方式`MathUI`和我的两个操作数有什么问题吗？我是否只需要实例化一个实例，`MathUI`然后在该实例下声明两个变量？我也不确定为什么整数输出与我的输入不匹配。所有变量都被转换为`int`，所以我应该一直`int`通过，对吧？我尝试将它们转换为整数`(int)op1`--以防`op1`以某种内部形式保存...但不知道那里发生了什么。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:08:05.873

您需要将 Console.Read 设置为 Console.ReadLine，因为 readline 是由返回键触发的。

```
public class MathUI
{
    public int EnterInteger()
    {
        Console.Write("Enter an integer: ");
        int enteredInteger = Convert.ToInt32(Console.ReadLine());
        return (enteredInteger);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:06:31.100

使用`Console.ReadLine`而不是`Console.Read`. 使用`Console.Read`时，返回字符将作为输入传递给第二次`Read`调用。

另请注意，返回的 int`Console.Read`不是解析数字，而是为您提供输入字符的 Unicode 字符值。这就是为什么你得到“错误”的数字。

您需要`Console.ReadLine`像这样使用和解析字符串结果：

```
 public class MathUI
        {
            public int EnterInteger()
            {
                Console.Write("Enter an integer: ");
                int enteredInteger = int.Parse(Console.ReadLine());
                return (enteredInteger);
            }
        } 
```

其他几点供您考虑：

*   无需在`Console.WriteLine`调用中强制转换值。
*   您可以将`MathUI`类和`EnterInteger`方法设为静态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T22:12:07.247

问题是您正在使用[`Console.Read`](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)在按下任何键后返回值的方法。此外，它返回的结果是按键的[ASCII值。](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)在您的情况下，您按下`3`了十进制系统中的序数（ASCII）值为 51，然后按下`ENTER`了值为 13。如果您查看 MSDN 文档，`Console.Read`则返回一个整数。

要读取用户作为字符串输入的值，请使用[`Console.ReadLine`](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)方法。

如果您确实需要逐键读取，可以使用[`Convert.ToChar`](http://msdn.microsoft.com/en-us/library/609e20th.aspx), 然后`ToString`方法将输入的键作为字符串。像这样：

```
string key = Convert.ToChar(Console.ReadLine()).ToString(); 
```

或者您可以使用以下代码读取实际操作数

```
int intOperand;
if (!int.TryParse(Console.ReadLine(), out intOperant))
    Console.WriteLine("You pressed non-numeric key"); 
```

* * *

# json - 不带字节顺序标记的 UTF-8 格式的 JSON 提要

> ID：15592611
> 
> 赞同：2
> 
> 时间：2013-03-23T22:03:56.307
> 
> 标签：json, wcf, api, encoding, byte-order-mark

我有一个用 C# 编写的 WCF 应用程序，它以 JSON 或 XML 格式提供我的数据，具体取决于用户在查询字符串中的要求。这是我提供数据的代码的快速片段：

```
Encoding utf8 = new System.Text.UTF8Encoding(false);
return WebOperationContext.Current.CreateTextResponse(data, "application/json", utf8); 
```

当我使用上述方法传递数据时，特殊字符都搞砸了。所以查韦斯看起来像查韦斯。另一方面，如果我使用 BOM 创建上面的 utf8 变量或使用枚举 (Encoding.UTF8)，则特殊字符可以正常工作。但是，我的一些消费者抱怨他们的代码在使用我的 API 时抛出异常。这当然是因为提要中的 BOM。有没有办法让我在提要中正确显示没有 BOM 的特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:14:56.230

看起来输出是正确的，但是无论您使用什么来显示它都需要 ANSI 编码的文本。Chávez 是您将 Chávez 编码为 UTF-8 并将结果解释为拉丁文 1 时得到的结果。

# nsdate - 计算应用程序在后台运行的秒数

> ID：15592612
> 
> 赞同：0
> 
> 时间：2013-03-23T22:04:04.970
> 
> 标签：nsdate, nsuserdefaults, nstimeinterval

我试图找出应用程序在后台运行的时间。一切都编译得很好，但是我的计数器不会随着应用程序在后台运行的时间而增加。

```
 -(void)applicationWillResignActive:(UIApplication *)application {

    closeTime = [NSDate date];

    NSUserDefaults *defaultsCloseTime;
    [defaultsCloseTime setInteger:closeTime forKey:@"closeTimeKey"];
    [defaultsCloseTime synchronize];

}

-(void)applicationWillEnterForeground:(UIApplication *)application {

    closeTime = [[NSUserDefaults standardUserDefaults] integerForKey:@"closeTimeKey"];

    timeInterval = [closeTime timeIntervalSinceNow] * -100;

}

Counter 
```

在我的视图控制器中：

```
counterInt = time + counterInt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:30:17.283

您应该`synchronize`在将关闭时间写入用户默认值之后。同样在您的问题中，您在哪里阅读`counterInt`以及是否将其存储到用户默认值？

还有一件事：

```
NSInterger time = round(timeInterval); 
```

# python - Gtk 发出警告并且不会显示我的菜单项

> ID：15592613
> 
> 赞同：0
> 
> 时间：2013-03-23T22:04:10.103
> 
> 标签：python, gtk

python代码：`menu_item = gtk.MenuItem("après")`给出警告消息：`Gtk warning Invalid input string`并且菜单项未显示。我应该添加/更改什么来显示菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T08:00:43.217

您的编辑器很可能将源文件保存为另一种编码，例如 Latin-1 或 Windows-1252，其中 GTK 需要 UTF-8。尝试替换`"après"`为`u"apr\u00e8s".encode("utf-8")`. 如果这使它起作用，那么问题就在那里。

要正确解决问题，您需要：

*   使用 Python 声明编码`# -*- coding: utf-8 -*-`
*   确保您的编辑器以声明的编码保存文件。如有必要，请使用十六进制编辑器来验证这一点。
*   对非 ASCII 字符串使用 Unicode 字符串文字，即`u"après"`代替`"après"`. 如果不接受 unicode 字符串，请使用`u"après".encode("utf-8")`. PyGTK 通常接受 Unicode 字符串，因此不需要显式编码为 UTF-8。

# jsp - 如何将一个 EL 表达式嵌套在另一个 EL 表达式中

> ID：15592614
> 
> 赞同：6
> 
> 时间：2013-03-23T22:04:13.643
> 
> 标签：jsp, jstl, el

我正在编写 JSP / JSTL，并且正在尝试遍历数据库中的多个项目。

我目前在数据库中有三列`${image1}`，`${image2}`和`${image3}`。我正在尝试使用以下代码为他们打印信息：

```
<c:forEach begin="1" end="3" var="i">
  ${image${i}}
</c:forEach> 
```

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T13:08:51.503

你不能像这样嵌套 EL 表达式。

只有事先知道这些变量的范围，才能实现具体的功能要求。这样，您可以在直接访问范围映射时使用大括号表示法。您可以使用`<c:set>`在 EL 范围内创建由多个变量组成的新字符串变量。您可以使用例如`${requestScope}`访问请求范围变量的映射。

因此，如果您确实将这些变量存储在请求范围内，那么应该这样做：

```
<c:forEach begin="1" end="3" var="i">
    <c:set var="image" value="image${i}" />
    ${requestScope[image]}
</c:forEach> 
```

对于会话范围，请改用`${sessionScope}`地图。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [EL中的字符串连接](https://stackoverflow.com/questions/3640254/string-concatenation-in-el/3640289#3640289)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-08T10:40:53.660

好吧，我可以通过将嵌套表达式放在括号 () 中来创建嵌套表达式，请参见下面的示例。

`#{row.Dateapproved eq null ? 'true' : (row.Appealrange > (bindings.Appealvalidation.inputValue) ? 'true' : 'false') }`

# ipad - 如何使用 UIModalPresentationFormSheet 显示 iAd 横幅

> ID：15592618
> 
> 赞同：1
> 
> 时间：2013-03-23T22:04:32.573
> 
> 标签：ipad, modal-dialog, iad

在 UIModalPresentationFormSheet 中显示 iAd 横幅的任何可能性？

阅读文档没有列出 iPad 表单的大小： [https ://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/BannerAdvertisements/BannerAdvertisements.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iAd_Guide/BannerAdvertisements/BannerAdvertisements.html)

它还说“将来，iAd 可能会公开更多尺寸。”

与此同时，关于如何处理这个问题的任何建议？iPad 上的表单视图会显示很长一段时间，并且是广告横幅所在的位置。

搜索了一下，我看到有一些代码可以在表单视图中显示来自其他网络类型的广告，在本例中为“ad mob”： [https ://github.com/navisingh/ad-networks/tree/master/GoogleAdMobAdsSDK](https://github.com/navisingh/ad-networks/tree/master/GoogleAdMobAdsSDK)

如果 iAd 不支持表单，那么我想我可以搜索其他网络。

更新：Ad Mob 支持如下调整大小...

```
 // Size ad banner to form view width
        CGFloat aWidth = [self view].frame.size.width;
        adMobBannerView_ = [[GADBannerView alloc] initWithAdSize:GADAdSizeFromCGSize(CGSizeMake(aWidth, 60.0f))]; 
```

# php - PDO 多个 SELECT 语句

> ID：15592621
> 
> 赞同：0
> 
> 时间：2013-03-23T22:04:56.200
> 
> 标签：php, mysql, pdo

如何在一个文件中执行多个选择语句？例如，我有一个产品列表 - 然后我想获取每个产品的库存水平。但是，它只返回第一个产品，而不返回任何其他附加产品。

```
$query = $db->query("SELECT * FROM `products` ORDER BY `productName` ASC"); 

    while ($row = $query->fetch(PDO::FETCH_ASSOC)){
    $productId = stripslashes($row['productId']);
    $productName = stripslashes($row['productName']);

    echo "<b>".$productName."</b><br />";

    $query = $db->query("SELECT * FROM `stock` WHERE `productId` = $productId"); 

    while ($row = $query->fetch(PDO::FETCH_ASSOC)){
        $stockId = stripslashes($row['stockId']);
        $stockFilename = stripslashes($row['stockFilename']);

    }
    echo "Stock level= " . $query-> rowCount();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:09:22.307

因为您的第二个 $query 覆盖了第一个。将第二个重命名为 $query2（并将其下方的 $query 变量更改为 $query2）。并将 $row 更改为 $row2

顺便说一句，您还可以将您的第一个查询更改为连接，以完全消除第二个查询。

# php - codeigniter：如何根据从数据库中检索的值检查单选按钮

> ID：15592624
> 
> 赞同：1
> 
> 时间：2013-03-23T22:05:44.280
> 
> 标签：php, codeigniter

我有一个有两个单选按钮的表格。

当我从我的 html 表中单击编辑链接时，应根据从 db 接收到的值检查单选按钮值。

我尝试了以下代码。但我没有根据值检查单选按钮。它总是检查第一个单选按钮。

请帮我解决这个问题。

查看页面

```
<label for="level1" ><input type="radio" id="level1" name="menu_type" value="1" <?php echo set_radio('fmenu_type', '1', TRUE); ?> />Do't have sub menu</label>
<label for="level2"  ><input type="radio" id="level2" name="menu_type" value="2" <?php echo set_radio('fmenu_type', '2'); ?> />Having Sub Menu</label>
<?php echo form_submit($submitbtn); 
```

控制器

```
 if((int)$mainmenu_id > 0)//this is for edit ,when value id is greater then 0
  {    
       $query = $this->mainmenumodel->get($mainmenu_id);
       $data['fmainmenu_id']['value'] = $query['mainmenu_id'];
       $data['fmenu_name']['value'] = $query['menu_name']; 
       $data['menu_type']  ['value'] = $query['menu_type']; //i am trying to set through this
       $data["query"] = $this->mainmenumodel->fetch_mainmenu_data($config["per_page"], $page);
       $data["links"] = $this->pagination->create_links();

        $data['fmenu_type']['value'] = $query['menu_type']; 

         $this->load->view('admin/setups/mainmenu/index',$data);  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:36:09.797

您应该根据`$data`变量的内容更改第三个参数。

所以你会有类似的东西：

```
<label for="level1" ><input type="radio" id="level1" name="menu_type" value="1" <?php echo set_radio('fmenu_type', '1', $menu_type['value'] == '1'); ?> />Do't have sub menu</label>
<label for="level2"  ><input type="radio" id="level2" name="menu_type" value="2" <?php echo set_radio('fmenu_type', '2', $menu_type['value'] == '2'); ?> />Having Sub Menu</label>
<?php echo form_submit($submitbtn); 
```

您可以在此处查看[文档](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)，您会看到第三个参数指定要选择哪一个单选按钮，您只需要根据您的数据指定正确的条件。

**编辑：**我更新了代码，因此很可能它可以按您的预期工作。思路如下：`set_radio`函数可以带3个参数`(name, value, is_checked)`，如果`is_checked`为真，那么单选按钮会被选中，否则不会。例如，此代码将始终放置一个默认选中的单选按钮：

```
<label for="level1" ><input type="radio" id="level1" name="menu_type" value="1" <?php echo set_radio('fmenu_type', '1', TRUE); ?> />Do't have sub menu</label> 
```

现在，因为您不希望它始终被选中，所以您必须指定一个条件，`true`要么`false`选择它要么不选择它。这就是我比较 to 的值的`$menu_type['value']`原因`'1'`。由于您此代码在视图中，并且您正在从控制器传递它，因此您访问传递的数据的方式是使用`$data`您传递的数组的键，在这种情况下：`menu_type`, `links`, `query`, 等等...

# android - 自动片段恢复的工作原理

> ID：15592628
> 
> 赞同：20
> 
> 时间：2013-03-23T22:05:52.470
> 
> 标签：android, android-fragments, android-orientation

使用`FragmentActivity`时它会自动恢复片段状态并重新创建所有片段。

我知道这主要是保存状态，`onSaveInstanceState`然后在活动中恢复`onCreate`。稍微看一下代码，我发现所有片段都被重新创建（或仅在retainInstance为真时附加）并添加到，`FragmentManager`但我不清楚它们以哪种方式添加到视图中，因为视图不是自动的恢复。

我最初的问题是我得到了一些与[其他问题](https://stackoverflow.com/questions/8474104/android-fragment-lifecycle-over-orientation-changes)相似的片段的副本。我通过以下方式解决了这个问题`onCreate`：

```
 Fragment f = fm.findFragmentByTag(tagName);
   if(f==null) {
       f = createFragment();
       fm.beginTransaction().add(R.id.myContainer,f,tagName).commit();
   }  else {
     //Nothing it's on the view
   } 
```

现在它可以工作了，但我仍然不完全了解它是如何工作的。

我的疑问是：

*   片段是在哪个时刻以及如何附加到视图的？我已经尝试过片段恢复是`onCreate`在`FragmentActivity`. 但是如果我`setContentView`在那之后调用，片段如何附加到视图？
*   我可以在不覆盖的情况下防止片段重新生成`onSaveInstanceState`吗？因为由于具有不同数量的片段的不同方向布局，我的初衷是仅重新创建一个标记为保留的状态片段，而不恢复未标记为保留的其他视图片段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-18T20:54:19.933

视图层次结构不会自动恢复。因此，在`Fragment.onCreateView()`or中`Activity.onCreate()`，您必须恢复所有视图（从 xml 或以编程方式）。每个`ViewGroup`包含一个片段的 ID 必须与您第一次创建它时的 ID 相同。一旦创建了视图层次结构，Android 就会恢复所有片段并将它们的视图放在正确的位置，`ViewGroup`这要归功于 ID。假设 Android 会记住`ViewGroup`片段所在的 ID。`onCreateView()`这发生在和之间`onStart()`。

我认为可以保留片段重新创建，但是在保存片段的 ViewGroup 上，将可见性设置为 GONE。这样，片段就不会出现，您可以稍后以编程方式将其删除。

# android - 如何设置httpclient的字符编码

> ID：15592629
> 
> 赞同：1
> 
> 时间：2013-03-23T22:06:03.953
> 
> 标签：android, character-encoding, httpclient

我正在使用这个 httpclient： http: [//loopj.com/android-async-http/](http://loopj.com/android-async-http/)我正在使用这个 httpclient 获取一个 json。我想设置这个httpclient的字符编码。客户端返回的 JSONObject 包含土耳其字符，例如 şğöü。但它已损坏，我无法查看此字符。

如何设置此 httpclient 的字符编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:26:35.770

正确的是服务器提供返回页面的编码。如果是这样，您将收到正确的。但是，如果它不提供编码 Async-http 似乎假定为 UTF-8 并查看代码，它似乎不支持提供默认的替代方案。

[AsyncHttpResponseHandler](https://github.com/loopj/android-async-http/blob/master/src/com/loopj/android/http/AsyncHttpResponseHandler.java)中的相关代码：

```
// Interface to AsyncHttpRequest
void sendResponseMessage(HttpResponse response) {
    ...
    responseBody = EntityUtils.toString(entity, "UTF-8"); 
```

如果你想这样做，你需要使用你自己的 AsyncHttpResponseHandler 版本或建议一个补丁来指定默认编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:16:57.533

我通过修改loopj源代码文件“AsyncHttpResponseHandler.java”解决了这个问题...

```
void sendResponseMessage(HttpResponse response){
      .........
      //responseBody = EntityUtils.toString(entity, "UTF-8");
        responseBody = EntityUtils.toString(entity, "ISO-8859-1");
} 
```

ISO-8859-1 编码将为您提供正确的字符..

# java - Apache DBUtils 和标量值

> ID：15592630
> 
> 赞同：3
> 
> 时间：2013-03-23T22:06:11.877
> 
> 标签：java, apache-commons-dbutils

我需要使用 DBUtils 获得标量值，有人知道如何获得它吗？目前我做：

```
 String sql = "SELECT count(*) FROM t1 WHERE cod = ?";
    final QueryRunner run = new QueryRunner(new AppDataSource());
    ScalarHandler scalar = new ScalarHandler();
    long count = -1l;
    try{
        Object[] params =
        {
                code
        };
        count = ((Long) run.query(sql, scalar, params)).longValue();
    }
    catch(SQLException e){
        e.printStackTrace();
    }
    System.out.println(count); 
```

但结果仍然是-1。当我用 db util 测试它时，我得到了正确的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-09T06:02:20.067

我希望下面的代码可以帮助你，ScalarHandler 只是拿起一列值。

```
public Object queryColumnVaue(String sql,String columnName) throws SQLException { 
     ScalarHandler<Object> kh = new ScalarHandler<Object>(columnName);
     return query(sql,kh);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:28:29.810

嗯，没有什么比重命名标准方案名称“public”（PostgreSQL）更好的了，而不是在 SQL 中不使用它，这是正确的方法：

```
String sql = "SELECT count(*) FROM \"MySchema\".t1 WHERE cod = ?"; 
```

希望有人会有所帮助。

# php - 从表格中打开 PDF 文件

> ID：15592631
> 
> 赞同：0
> 
> 时间：2013-03-23T22:06:26.867
> 
> 标签：php, pdf, button, html-table

这是我的代码：

```
 foreach ($positions as $position) 
    {
        print("<tr>");
        print("<td>{$position["Post Date"]}</td>");
        print("<td>{$position["Description"]}</td>");
        print("<td>{$position["Link"]}</td>"); //shows location of the file
        print("<td>{$position["File Name"]}</td>");
        $file = rawurlencode($position["File Name"]);
        print("<td><input type=button name=open value='Open File'
        onclick=window.open(...);></td>"); // missing code to open pdf
        print("</tr>");
    }

?> 
```

有了这个，我正在创建一个表格，列出下载到特定目录（localhost/pdfs/*.pdf）的所有 pdf 文件。在以表格形式列出所有文件的页面上列出的文件名旁边，我有一个按钮，单击该按钮应打开该 pdf 文件。为什么是按钮？因为前几天我尝试将该文件名设为链接，但没有成功……所以我有两个问题：

1.  如果您对此有解决方案，更优雅的是通过链接打开该文件...
2.  让我的按钮工作...文件可以用标准的 pdf 查看器打开，不需要在浏览器中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:09:49.517

正如您可以[在此处](https://developer.mozilla.org/en-US/docs/DOM/window.open)阅读的那样，`window.open()`它是这样写的：

> var windowObjectReference = window.open(strUrl, strWindowName[, strWindowFeatures]);

这意味着您的代码应该是

```
print("<td><input type=button name=open value='Open File'
        onclick=\"window.open('{$position["Link"]}', 'pdf');\"></td>"); 
```

# php - Woocommerce 添加到购物车按钮重定向到结帐

> ID：15592633
> 
> 赞同：29
> 
> 时间：2013-03-23T22:06:43.763
> 
> 标签：php, wordpress, woocommerce

我使用插件 woocommerce 创建了一个电子商务。我只出售订阅，所以“/cart/”页面没用。我试图摆脱它，以便当我的客户点击“添加到购物车”按钮时，他最终会出现在结帐页面上。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-24T11:35:37.563

在 WooCommerce 3.6 或更高版本中，您可以使用`woocommerce_add_to_cart_redirect`(props @roman)

```
add_filter ('woocommerce_add_to_cart_redirect', function( $url, $adding_to_cart ) {
    return wc_get_checkout_url();
}, 10, 2 ); 
```

* * *

原答案：

您可以在functions.php中使用过滤器：

```
add_filter ('add_to_cart_redirect', 'redirect_to_checkout');

function redirect_to_checkout() {
    global $woocommerce;
    $checkout_url = $woocommerce->cart->get_checkout_url();
    return $checkout_url;
} 
```

它似乎不适用于 ajax，但它适用于单个产品页面，我认为这是您使用的

在 WooCommerce (>= 2.1) 上，函数可以简化为：

```
function redirect_to_checkout() {
    return WC()->cart->get_checkout_url();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-24T00:39:51.903

WooCommerce 设置中有一个选项可让您启用此功能：

![将访问者重定向到购物车页面的选项](../Images/7f5833e2df4f0b51bbafa2c4a3b72ee5.png)

只需登录到您的 WP 管理面板 > WooCommerce > 目录并选择该选项。我希望这有帮助！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-30T14:31:12.870

我找到了一个像魔术一样工作的简单解决方案。

1.  正如@Ewout 所述，选中“成功添加后重定向到购物车页面”框。
2.  Woocommerce > 设置 > 结帐（选项卡） - 您应该在其中选择购物车和结帐页面，选择结帐页面作为购物车页面（附图片）。

就是这样。为我工作。 ![在此处输入图像描述](../Images/b4972d4380c7b3eae4393cd09ff44ddd.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-15T07:55:04.383

## WooCommerce 3.5.1 更新

第 1 步。首先转到 WooCommerce 产品设置并停用 AJAX 添加到购物车。

步骤 2\. 使用`woocommerce_add_to_cart_redirect`钩子重定向到结帐。

```
add_filter( 'woocommerce_add_to_cart_redirect', function( $url ) {
    return wc_get_checkout_url();
}); 
```

当然还有一些小事情要做，比如更改添加到购物车按钮文本和删除一些与 WooCommerce 购物车相关的通知。我建议查看本教程以获取更多信息[https://rudrastyh.com/woocommerce/redirect-to-checkout-skip-cart.html](https://rudrastyh.com/woocommerce/redirect-to-checkout-skip-cart.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-19T13:46:32.103

@RemiCorson 发布了这个简短但有益的教程：

[http://www.remicorson.com/woocommerce-skip-product-cart-pages/](http://www.remicorson.com/woocommerce-skip-product-cart-pages/)

他提到了与上面@Ewout 相同的过滤器，

> ```
> add_filter ('add_to_cart_redirect', 'redirect_to_checkout');
> 
> function redirect_to_checkout() {
>     global $woocommerce;
>     $checkout_url = $woocommerce->cart->get_checkout_url();
>     return $checkout_url; 
> ```
> 
> }

但是一行代码很突出，对我目前的 woocommerce 项目来说非常有价值：

用户可以使用直接链接自动绕过产品页面。 [http://your-site.com/?add-to-cart=37](http://your-site.com/?add-to-cart=37)

“37”将替换为您的产品 ID。

这对我消除不必要的步骤并让用户直接从主页和其他非 woocommerce 页面/帖子结帐很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-31T10:29:16.090

过滤器*add_to_cart_redirect*在 WooCommerce 2.6 中已弃用。请改用*woocommerce_add_to_cart_redirect*。

将此添加到您的 functions.php ：

```
add_filter ('woocommerce_add_to_cart_redirect', function() {
  return WC()->cart->get_checkout_url();
} ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-12T15:40:53.167

在商店页面上，如果您想使用 ajax 并一起重定向。第二种方法只有在某些情况下，您可以使用此过滤器并保留 Woocommerce 设置 ajax 启用：

```
add_filter('woocommerce_loop_add_to_cart_link', array( $this, 'add_quantity_input' ), 4, 2); 
```

删除类属性`ajax_add_to_cart`并将 href 值更改为结帐 url 页面；

在我的模板案例中：

```
public function add_quantity_input($text = null, $product = null) {
    global $product, $woocommerce;

    if ( $text != null and $product != null  ) {
        if(ismycondition($product->id)) {
            $s = explode('class="', $text);
            $s[2]=str_replace('ajax_add_to_cart', '', $s[2]);
            $text = implode('class="', $s);

            $text = preg_replace('/<a(.*)href="([^"]*)"(.*)>/','<a$1href="'.$woocommerce->cart->get_checkout_url().'"$3>', $text);
        }
    }

    return $text;
} 
```

我希望这会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-23T08:00:55.593

没有一个解决方案实际上对我有用，过滤器 add_to_cart_redirect 在每个页面上触发，不仅在购物车上。我对建议的答案做了一些修改。

```
add_filter ('add_to_cart_redirect', 'redirect_to_checkout');
  function redirect_to_checkout() {
  if(is_cart()){
    $checkout_url = WC()->cart->get_checkout_url();
  ?>
  <script>
  location = '<?=$checkout_url?>';
  </script>
  <?php 
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-21T12:40:12.107

在主题 function.php 文件中尝试以下代码

```
add_filter( 'woocommerce_add_to_cart_redirect', 'woo_skip_cart_redirect_checkout' );

function woo_skip_cart_redirect_checkout( $url ) {
    return wc_get_checkout_url();
} 
```

# javascript - Javascript 打开链接

> ID：15592635
> 
> 赞同：0
> 
> 时间：2013-03-23T22:07:12.240
> 
> 标签：javascript, jquery, popupwindow, popup-blocker

当用户按下一个键时，我试图在新选项卡/窗口中打开一个链接。

这是我为打开链接所做的函数，它在用户按下“X”键时被调用。

```
function open_link() {
    window.open($("#active").attr("link"), '_blank');
} 
```

我的页面由一堆看起来像这样的 div 组成，用户通过使用键 j/k 向上/向下导航来设置活动的。所有这些都有效，但问题是当按下“X”键打开链接时会出现弹出窗口被阻止的警告。

```
<div class="read entry" id="active" entryNumber="0" entryId="733" link="http://www.reddit.com/r/buildapc/comments/1aux43/build_help_ordering_soon_final_review/"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:17:22.180

这是您无法避免的问题，弹出窗口阻止是所有最新浏览器都具有的内置功能，绕过弹出窗口阻止程序不会让用户满意。

您可以使用 jquery/javascript 替代方案，例如按需[iframe](http://www.w3schools.com/tags/tag_iframe.asp)或[模式对话框窗口](http://www.1stwebdesigner.com/freebies/ajax-lightbox-modal-dialog-solutions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:17:25.513

我认为您不能从 javascript 禁用弹出窗口阻止程序。如果可以，那么弹出窗口拦截器将毫无用处。您是否考虑过使用模态 div 代替？例如来自 jQueryUI 的模态对话框。

# javascript - 如何使用 Winj.xhr 将数据发送到 Web 服务

> ID：15592645
> 
> 赞同：0
> 
> 时间：2013-03-23T22:08:01.400
> 
> 标签：javascript, microsoft-metro, windows-store-apps, winjs

我是`Winjs`编码新手，我在列表中有数据。我想将该数据发送到我的 json Web 服务。

我成功调用了 Web 服务，并且我得到了响应，因此 Web 服务正在运行，但似乎没有发送数据。我不知道如何声明数据。

我有很多数据要发送（用户名，名字，姓氏，密码）到我 `Register.json` 的`Register.json`执行后有这个响应：

```
{

"format":
"json",

"success":
false,

"errors":
["User name is empty"],

"result":
null

} 
```

所以我确定没有发送数据

```
function Register() {
    var dataArray = [

   {
       username: "Marley",

       first_name: "dog",

       last_name: "ded",

       password: "pdre4252d"

   }];

    WinJS.xhr({

        url: "my_Base_URL/Register.json",

        type: "post",

        headers: { "Content-type": "application /x-www-form-urlencoded" },

        data: dataArray

      // data:JSON.stringify(dataArray)

    }).done(

          function complete(result) {
              if (result.status === 200) {
                  console.log("Success: Response Text: " + result.responseText);
              }
              else {
                  console.log("Fail:Response Text:  " + result.responseText);
              }
          },

          function error(error) {
              console.log("error");
             },
          function progress(result) {
            }

);
} 
```

如果有人给我一些帮助，我会考虑周到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:44:05.137

`WinJS.xhr()`是一个围绕的**承诺包装器**`XMLHttpRequest`，这意味着它将您的参数委托给一个`XMLHttpRequest`对象并返回一个`WinJS.Promise`对象。参数可能无法正确委派，因此请尝试为用户名等添加和空字符串。否则，您可以通过创建自己`WinJS.Promise`的`XMLHttpRequest`内部来模仿相同的功能。

# ruby-on-rails - NET/HTTP 发布数据的问题

> ID：15592649
> 
> 赞同：0
> 
> 时间：2013-03-23T22:08:13.013
> 
> 标签：ruby-on-rails, curl, net-http

所以，如果我执行以下命令，它工作正常：

```
curl -X POST --compressed -H "Content-Type:application/json" \
  -H 'x-api-user: USER_ID' \
  -H 'x-api-key: API_TOKEN' \
  -d '{"text":"from the api!","type":"todo"}' \
  https://habitrpg.com/api/v1/user/task 
```

我尝试让 HTTParty 工作，但在我的理解水平上，他们关于压缩连接的文档基本上不存在。我已经尝试过 NET/HTTP 并且可以建立连接，但是 API 不断给我错误，表明我的数据错误（它说我没有给它一个有效的类型）。这是我正在使用的代码：

```
data = {:text => "from the app dog", :type => "todo"}
uri = URI.parse("https://habitrpg.com/api/v1/user/task")
http = Net::HTTP.new(uri.host, uri.port)
http.set_debug_output($stdout)
http.use_ssl = true
resp = http.post(uri.request_uri, data, {"x-api-user" => USER_ID, "x-api-key" => API_TOKEN})
resp.body 
```

我还尝试了以下所有数据：

```
data = {:text => "from the app dog", :type => "todo"}.to_json.to_s
data = "{\"text\":\"from the app dog\",\"type\":\"todo\"}"
data = "'" + "{\"text\":\"from the app dog\",\"type\":\"todo\"}" + "'" 
```

可能还有三四件其他我无法识别的事情。有没有人有什么建议？我完全不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:13:20.287

您的`curl`命令有一个 Content-Type 集。您发布的所有 Ruby 代码都没有。

我猜该应用程序无法检测和解析给它的 JSON。

# java - Java JComponent.getGraphics() 总是返回 null

> ID：15592651
> 
> 赞同：0
> 
> 时间：2013-03-23T22:08:29.243
> 
> 标签：java, image, swing, graphics, bufferedimage

我正在尝试一个用作按钮但使用图像进行显示的对象。我的问题是，当调用`getGraphics()`它返回时`null`。我找遍了整个地方，找不到原因？

我死亡的构造函数的代码是......

```
public class ImageButton extends javax.swing.JComponent implements java.awt.event.MouseListener {

private static BufferedImage DEFAULTBUTTON;
private BufferedImage button;
private Graphics g;

public ImageButton(){
    //Call the constructor for JComponent
    super();
    //Grab Graphics
    g = this.getGraphics();

    //Find the default images
    try{
    InputStream image;
    image = this.getClass().getClassLoader().getResourceAsStream("DefaultButton.png");
    DEFAULTBUTTON = ImageIO.read(image);

    System.out.println("Default image FINE");
    }catch(IOException e){
        System.out.println("Default image fail");
    }
    button = DEFAULTBUTTON;

    //Add listener for things like mouse_down, Mouse_up, and Clicked
    this.addMouseListener(this);

    //Draw the Default button
    g.drawImage(button, 0, 0, this);

} 
```

我会喜欢它，你可以给我帮助或指出正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:12:06.837

您不应该调用`getGraphics()`组件。相反，您应该重写该`paintComponent(Graphics)`方法，并使用作为参数传递的 Graphics 对象在此方法中进行绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:12:21.747

`getGraphics`将`null`在构造函数中返回，因为组件在创建时不可见。对于 Swing 中的自定义绘画，请改写该`paintComponent(g)`方法。在那里，`Graphics`句柄将始终正确初始化。

这是一个[例子](https://stackoverflow.com/questions/299495/java-swing-how-to-add-an-image-to-a-jpanel)

欲了解更多信息，请阅读[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# php - PHP图像上传裁剪错误

> ID：15592654
> 
> 赞同：0
> 
> 时间：2013-03-23T22:08:50.977
> 
> 标签：php, upload, crop

我正在尝试将上传/裁剪 php 脚本用于我想要在网站上的图像上传表单。它为任何听说过它的人使用 ImageManipulator.php，并且上传工作正常，但实际的修剪/裁剪和添加到文件夹不起作用。这是我的代码：

```
//Avatar Preferences
$avatar = mysqli_real_escape_string($con, $_REQUEST["avatar"]);
// include ImageManipulator class
require_once('../scripts/ImageManipulator.php');

if ($_FILES[$avatar]['error'] > 0) {
    echo "Error: " . $_FILES[$avatar]['error'] . "<br />";
} else {
    // array of valid extensions
    $validExtensions = array('.jpg', '.jpeg', '.gif', '.png');
    // get extension of the uploaded file
    $fileExtension = strrchr($_FILES[$avatar]['name'], ".");
    // check if file Extension is on the list of allowed ones
    if (in_array($fileExtension, $validExtensions)) {
        $newNamePrefix = time() . '_';
        $manipulator = new ImageManipulator($_FILES[$avatar]['tmp_name'])or die(mysqli_error());
        $width  = $manipulator->getWidth();
        $height = $manipulator->getHeight();
        $centreX = round($width / 2);
        $centreY = round($height / 2);
        // our dimensions will be 200x130
        $x1 = $centreX - 100; // 200 / 2
        $y1 = $centreY - 65; // 130 / 2

        $x2 = $centreX + 100; // 200 / 2
        $y2 = $centreY + 65; // 130 / 2

        // center cropping to 200x130
        $newImage = $manipulator->crop($x1, $y1, $x2, $y2);
        // saving file to uploads folder
        $manipulator->save('../uploads/' . $newNamePrefix . $_FILES[$avatar]['name']);
        echo 'Done ...';
    } else {
        echo 'You must upload an image...';
    }
} 
```

你们中有人看到这里有潜在的问题吗？谢谢

# php - Stripslashes 不工作

> ID：15592658
> 
> 赞同：0
> 
> 时间：2013-03-23T22:09:09.220
> 
> 标签：php, stripslashes

我在我的 2 步表单之一中使用此代码，这里我在步骤 2.php 验证表单输入并将其保存在会话中，然后在步骤 3.php 页面中我从会话中获取表单输入。此外，我将它们分配给 $formData 数组，因为我需要在最后阶段再次重新运行验证代码。

```
 $name = $formData["name"] = $string->formatInput($session->getSession("mechanic_buy_name"), 1);
    $garage_name = $formData["garage_name"] = $string->formatInput($session->getSession("mechanic_buy_garage_name"), 1, "None");
    $address = $formData["address"] = $string->formatInput($session->getSession("mechanic_buy_address"), 1); 
```

这里 $string->formatInput("STRING GOES HERE" , 1) 是我的包装函数，它添加了addlashes函数。

假设我在车库名称中输入 ASWT 的技术

我使用这个 sql 查询将记录保存到数据库中

```
 $sql = "INSERT INTO ". TABLE_MECHANICS ."";
    $sql .= "(name, garage_name, address, town, county, postcode, mobile, landline, fax, email, website, services_other, start_date, duration, expiry_date, datecreated, datemodified) VALUES";
    $sql .= "('$name', '$garage_name', '$address', '$town', '$county', '$postcode', '$mobile', '$landline', '$fax', '$email', '$website', '$services_other', '$start_date', '$duration', '$expiry_date', NOW(), NOW())";
    $query = $mysql->query($sql); 
```

但是当我通过 phpmyadmin 查看数据库时，我在引号前看不到任何转义字符

这就是garage_name 在 phpmyadmin ASWT 中显示的内容

而在应用了 addlashes ($string->formatInput(...)) 之后，它应该类似于 ASWT\'s\'。

请告诉我我错在哪里以及为什么不应用 addlashes 功能。

这个语法正确吗？

```
$name = $formData["name"] = $string->formatInput($session->getSession("mechanic_buy_name"), 1); 
```

当我回显它时，$name 没有显示转义字符。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:19:58.220

如果您使用的是 mysql 扩展名（您不应该这样做），我会使用 mysql_real_escape_string 而不是添加斜杠。或者 mysqli_real_escape_string 如果你使用 mysqli 扩展。或者使用准备好的语句。

# visual-studio-2012 - 转换此节点的正确 xdt:Locator 参数是什么？

> ID：15592662
> 
> 赞同：31
> 
> 时间：2013-03-23T22:09:29.157
> 
> 标签：visual-studio-2012, web-config-transform, xdt-transform

我的 app.config 文件中有以下内容。我正在使用 Slow Cheetah，只想替换 configuration/entityFramework/defaultConnectionFactory/parameters/parameter 以便它指向差异服务器。即价值数据源=一些服务器....

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings>
  </appSettings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="data source=.;Integrated Security=SSPI;Initial Catalog=SomeDb;MultipleActiveResultSets=true" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration> 
```

我在 app.config.release 中尝试过以下操作，但无济于事。

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="data source=dbserver;Integrated Security=SSPI;Initial Catalog=someDb;MultipleActiveResultSets=true" 
                   xdt:Transform="Replace" 
                   xdt:Locator="XPath(configuration/entityFramework/defaultConnectionFactory/parameters/parameter)" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

也尝试`xdt:Locator="Match(parameter)"` 过`xdt:Locator="XPath(parameter)`

还有更多，但无法正常工作。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-24T16:44:57.337

好的。我觉得有点傻，但解决方案是我不需要指定 xdt:Locator。

如果我像这样离开 App.Release.Config 它将替换匹配的条目。

```
 <parameter value="data source=dbserver;Integrated Security=SSPI;Initial Catalog=someDb;MultipleActiveResultSets=true" 
               xdt:Transform="Replace"/>
  </parameters> 
```

# python - pygame.key.set_repeat 用于操纵杆

> ID：15592671
> 
> 赞同：1
> 
> 时间：2013-03-23T22:10:14.587
> 
> 标签：python, pygame, joystick

我正在使用 pygame 构建一个菜单，我想使用特定的游戏手柄使其可导航。理想情况下，我希望能够在 D-pad 上反复按下并按住“*”，或者在键盘上获得类似的东西，其中第一个按钮按下有延迟，然后再重复输入相同的字符（似乎）。

我正在尝试模拟`pygame.key.set_repeat(...)`操纵杆的功能。到目前为止，我的方法是

```
pygame.time.set_timer(pygame.USEREVENT, 10)
DELAY_TIME = 0.250 #ms
y_delay = True
while not done:
    for event in pygame.event.get():
        y_axis = gamepad.get_axis(1)
        if y_axis > 0.5: # pushing down
            main_menu.move_down()
            redraw() #redraw everything on the surface before sleeping
            if y_delay:
                time.sleep(DELAY_TIME)
                y_delay = False #don't delay the next time the y axis is used

        elif y_axis < -0.5: #pushing up
            # repetitive I know, but I'm still working on it
            main_menu.move_up()
            redraw()
            if y_delay: 
                time.sleep(DELAY_TIME)
                y_delay = False 

        else:
            y_delay = True # delay the next time 
```

我的问题是，如果有人向上或向下点击的速度超过了他们再次移动之前`DELAY_TIME`的限制。`DELAY_TIME`此外，如果有人在间隔内释放并按下向上/向下按钮`time.sleep`，python 永远不会看到它被释放并且不允许延迟。

也许有一种方法可以使用事件或以某种方式将操纵杆映射到键？qjoypad 不适合我，joy2keys 是垃圾。我需要在 python 程序中进行映射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:10:54.103

`Sleep`导致程序停止执行，因此它不是一个可行的选择。您也可以在不使用`set_timer`和事件的情况下执行此操作。我使用几个标志和 pygame.time's 来[做到这](https://gist.github.com/ohsqueezy/5231134)`get_ticks`一点。

```
import pygame
from pygame.locals import *

def main():
    pygame.init()
    pygame.display.set_mode((480, 360))
    gamepad = pygame.joystick.Joystick(0)
    gamepad.init()

    delay = 1000
    neutral = True
    pressed = 0
    last_update = pygame.time.get_ticks()

    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                return

        move = False
        if gamepad.get_axis(1) == 0:
            neutral = True
            pressed = 0
        else:
            if neutral:
                move = True
                neutral = False
            else:
                pressed += pygame.time.get_ticks() - last_update
        if pressed > delay:
            move = True
            pressed -= delay
        if move:
            print "move"
        last_update = pygame.time.get_ticks()

if __name__ == "__main__":
    main()
    pygame.quit() 
```

当`get_axis`指示没有运动时，中性标志被设置，并且按下的计时器被重置，导致移动标志保持未设置。当中立标志未设置时，如果它是新设置的，则设置移动标志。如果不是新设置的，则按下计时器增加，并且仅当按下计时器大于延迟时才设置移动。

# haskell - 对特定表单的列表理解

> ID：15592673
> 
> 赞同：0
> 
> 时间：2013-03-23T22:10:30.660
> 
> 标签：haskell, list-comprehension

如何创建这样的列表理解

```
[(i,j) | i <- [1..4], j <- [1..4]] yields the following:

[(1,1),(2,1),(3,1),(4,1),(2,2),(3,2),(4,2),(3,3),(4,3),(4,4)] 
```

即列出关于 j 的所有组合？

PS。交换“i”和“j”的位置不是我正在寻找的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T22:12:41.387

由于在您想要的输出中，第一个分量总是至少与第二个分量一样大，所以`i`从 开始`j`，而不是从 1 开始：

```
[(i,j) | j <- [1 .. 4], i <- [j .. 4]] 
```

首先使用`j <- [1 .. 4]`生成器，`j`它在范围内并且可以用于`i`生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:25:16.857

您还可以使用布尔值守卫：

```
[(i,j) | i <- [1..4], j <- [1..4], i >= j] 
```

# php - ZF2 where 表达式

> ID：15592675
> 
> 赞同：1
> 
> 时间：2013-03-23T22:10:34.510
> 
> 标签：php, select, model, zend-framework2, where

在 mu ZF2 项目中，我有使用 TableGateway 的模型。内部函数负责根据搜索条件（城市、邮政编码、范围、类型）获取对象。

通常我通过简单的方式获取数据行

```
$rowset = $this->tableGateway->select($where); 
```

在我的 MySQL 数据库中，我有程序**GetObjectsInCityRange(city, range)**它返回地理编码城市坐标范围内的所有 object_id

我打算添加 where 子句条件：

```
WHERE object_id IN (call GetObjectsInCityRange(city, range)) 
```

MySQL可以吗？如何正确编写 $where 数组元素以使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:45:35.797

您可以`where()`在选择对象中调用方法并调用`in()`返回值或创建 where 语句。

例如

```
$select = new Select();
$select->from($this->tableName)->columns(array($expression));
$where = new Where();
$where->in($identifier, $valueSet);
// or
$where->addPredicate(
    new Predicate\In($identifier, $valueSet)
);
// and then
$select->where($where); 
```

并将其附加到选择对象。

我相信下面的链接正是您所需要的:) [http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html#in-identifier-array-valueset-array](http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html#in-identifier-array-valueset-array)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:09:00.883

对于 MySQL，建议您应该使用函数而不是过程，因为函数可以在任何 sql 查询中使用，而过程本身就是类似查询的语句。前任。

```
call MyPrcedure();

SET var = MyFunction(); 
```

因此，您大多数时候都可以在查询中调用函数。但是，根据我的知识，函数将返回有效的 mysql 数据类型，如 varchar、int float 等。因此查询行在您的 In 查询中可能不可用。然后唯一的方法是执行您的查询，将您的过程逻辑转换为子查询并在 IN 语句中传递。

```
WHERE object_id IN (SUB_QUERY) 
```

# assembly - GCD/LCM x86 Intel NASM 汇编程序中的 LCM 计算错误

> ID：15592676
> 
> 赞同：1
> 
> 时间：2013-03-23T22:10:34.977
> 
> 标签：assembly, macros, x86, nasm, cpu-registers

我首先用 C++ 创建了一个类似的程序，然后我决定尝试用 x86 汇编语言（我在大学里教过的那种汇编语言）来编写它。我已经完成了 C++ 版本，我的汇编版本也快完成了。

我对两个版本都做了一些桌面检查，首先使用 (2400, 3750)。我在两个版本中都得到了相同的 LCM 结果，这很好。但是，当我使用更大的数字（19000、8200）时，我的汇编程序崩溃了，而我的 C++ 版本显示了正确的结果。我怀疑这与我的程序集变量大小和/或我在计算 LCM 时用于除法的寄存器有关。

我通过输出被除数（第一个数字乘以第二个数字）和除数（GCD 结果）来测试我的 LCM 计算（减去除法运算）。我得到了正确的测试结果，所以我认为我的寄存器使用有问题。在此之前我已经测试了我的 GCD 计算，所以这不应该是问题的一部分。

```
%include "macros.s"

.DATA

num_lbl:   DB   "> Numbers (2): ", 0
gcd_lbl:   DB   "*** GCD: ", 0
lcm_lbl:   DB   "*** LCM: ", 0

num1:   DD   0
num2:   DD   0

num1_cpy:   DD   0
num2_cpy:   DD   0

gcd:   DD   0
lcm:   DD   0

.CODE
.STARTUP

xor       EAX, EAX
xor       EBX, EBX
xor       ECX, ECX
xor       EDX, EDX
xor       EDI, EDI
xor       ESI, ESI

main:
     nwln
     nwln
     PutStr   num_lbl
     nwln
     nwln
     GetLInt   [num1]
     GetLInt   [num2]

     mov   EAX, [num1]
     mov   [num1_cpy], EAX
     mov   EBX, [num2]
     mov   [num2_cpy], EBX

     call   calc_euclidean
     call   calc_lcm

     nwln
     PutStr   gcd_lbl
     PutLInt   [gcd]
     nwln
     PutStr   lcm_lbl
     PutLInt   [lcm]
     nwln

     .EXIT

calc_euclidean:
               mov   EAX, [num2]
               cmp   EAX, 0
               jne   chk_swap

               mov   EAX, [num1]
               mov   [gcd], EAX

               ret

calc_lcm:
         mov   EAX, [num1_cpy]
         mov   EDX, [num2_cpy]
         mul   EDX

         mov   EDI, EAX

         xor   EBX, EBX

         mov   EDX, EDI
         shr   EDX, 16
         mov   EAX, EDI
         mov   BX, [gcd]
         div   BX

         mov   SI, AX
         mov   [lcm], SI

         ret         

chk_swap:
         mov   EAX, [num1]
         mov   EBX, [num2]
         cmp   EAX, EBX
         jl    swap

after_check:
            jmp   loop

swap:
     mov   EAX, [num1]
     mov   EBX, [num2]

     ; temp
     mov   ECX, [num2]

     ; num2 = num1
     ; num1 = temp
     mov   EBX, EAX
     mov   EAX, ECX

     mov   [num1], EAX
     mov   [num2], EBX

     jmp   after_check

loop:
     mov   EDX, [num1]
     shr   EDX, 16
     mov   EAX, [num1]
     mov   BX, [num2]
     div   BX

     mov   EDI, [num1]
     mov   ESI, [num2]
     mov   EDI, ESI
     mov   [num1], EDI
     mov   [num2], EDX

     jmp   calc_euclidean 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:24:16.733

问题出在`calc_lcm`程序中：

```
         mov BX, [gcd]
         div BX

         mov SI, AX
         mov [lcm], SI

```

当`num1`是 19200 和`num2`8200 时，`gcd`变为 200。在这里，您尝试通过将`num1`和`num2`(19200 * 8200 = 157440000) 的乘积除以`gcd`(200) 来计算 lcm(19200, 8200)：

```
157440000 / 200 = 787200

```

**编辑：**修正错字。

787200 不适合 16 位。您需要将代码转换为使用 32 位`div`而不是 16 位`div`来处理比现在更大的数字。

所以它会是：

**编辑**：添加代码。

```
xor    ebx,ebx   ; this you have already.
mov    bx,[gcd]
xor    edx,edx   ; zero edx, as edx:eax gets divided by ebx...
div    ebx       ; ...now.

mov    [lcm],eax ; store the lcm into memory 
```

# mysql - MySQL：选择具有最高ID的所有两个

> ID：15592677
> 
> 赞同：1
> 
> 时间：2013-03-23T22:10:35.480
> 
> 标签：mysql, sql, max, greatest-n-per-group

我有一个表，其中包含具有不同 ID 的多行。（种类很多。ID 是唯一的。两列都已编入索引。）现在我需要选择每种 ID 最高的两个。这就是我所做的。

```
select max(c.id), max(d.id) from theTable c left join
theTable d on c.id > d.id and c.kind=d.kind
where c.id > constant group by c.kind; 
```

然而，上面的查询表现不佳，这并不令人意外。我想出了一个更快的版本...

```
select c.id, max(d.id) from (select max(id) id, kind from theTable    
where id > constatnt group by kind) c left join
theTable d on c.id > d.id and c.kind=d.kind group by c.kind; 
```

....但仍然不够快

有没有更有效的方法来达到同样的效果？谢谢！

**编辑：** theTbale 是一个历史表，所以我的任务是获取每种类型的当前值和以前的值，并将它们作为表达式的一部分（逻辑运算、合并、ifs 等）进行比较，并确定表达式结果是否不同

这是一个示例结果集：

```
+-----------+------------+
| 最大值（c.id）| 最大值（d.id）|
+-----------+------------+
| 1747 | 空 |
| 1701 | 第1432章
| 1703 | 第1434章
| 1706 | 第1437章
| 1707 | 1438 |
| 1751 | 空 |
| 1713 | 第1444章
| 1750 | 空 |
| 1709 | 1440 |
| 1742 | 1741 |
| 1711 | 第1442章
| 1746 | 1745 |
| 1708 | 第1439章
| 1719 | 1450 |
| 1725 | 第1456章
| 1723 | 第1454章
| 1740 | 1733 |
| 1705 | 第1436章
| 1702 | 第1433章
| 1749 | 1748 |
| 1712 | 第1443章
| 1718 | 第1449章
| 1722 | 第1453章
| 1728 | 第1459章
| 1721 | 第1452章
| 1739 | 1731 |
| 1714 | 第1445章
| 1717 | 第1448章
| 1716 | 第1447章
| 1724 | 第1455章
| 1710 | 第1441章
| 1727 | 第1458章
| 1720 | 第1451章
| 1738 | 空 |
| 1715 | 第1446章
| 1704 | 第1435章
| 1726 | 第1457章
| 1758 | 1757 |
+-----------+------------+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:43:24.800

如果不是为每种类型生成*(kind, id, id)*元组，您的结果集是*(kind, id)*每种类型有两行，该怎么办？不过，我不确定如果不自己运行它是否会更高效。

```
选择 x.kind, x.id
FROM (SELECT a.kind, a.id
        从表中
        左外连接表 b
          ON a.kind = b.kind
         和 a.id < b.id
       按 a.id 分组
       计数(*) < 2
       由 b.id 订购）x
WHERE x.id > 常量
由 x.kind 订购；

```

最后一个`ORDER BY`子句只是为了让您更容易验证结果，因此在评估性能时将其省略。请注意，某些*种类*可能只有一个*id*超过您的常量，因此您将只有一个*(kind, id)*行用于该种类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:55:55.107

以下可能会表现得很好：

```
select kind, max(id) as maxid,
       (select id from t t2 where t2.kind = t.kind and t2.id < max(t1.id) order by id desc limit 1) as secondId
from t
group by kind 
```

如果*您*对`kind, id`.

# listview - 如何更改 ListView 中的自定义项

> ID：15592678
> 
> 赞同：2
> 
> 时间：2013-03-23T22:10:35.473
> 
> 标签：listview, javafx-2, listviewitem

JavaFX - 我有一个带有方法（和其他功能）的类 Record `public String getName()`。我有`ListView<Record> listview`，这是显示`Record`名称的代码：

```
listview.setCellFactory(new Callback<ListView<Record>, ListCell<Record>>() {
    public ListCell<Record> call(ListView<Record> param) {
        final ListCell<Record> cell = new ListCell<Record>() {
            @Override
            public void updateItem(Record item, boolean empty) {
                super.updateItem(item, empty);
                if (item != null) {
                    setText(item.getName());
                }
            }
        };
        return cell;
    }
}); 
```

不幸的是，如果我像这样更改`Record`'s 名称：

```
Record record = listview.getSelectionModel().getSelectedItem();
record.setName("New Name"); 
```

列表视图中的单元格文本不会更改。我应该怎么做才能解决这个问题？或者我怎样才能以不同的方式更改单元格的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:30:58.053

最好的（或大多数 JavaFX 风格的）方法是将 Record 类的名称公开为属性并将 ListCell 的 textProperty 绑定到它。假设您的 Record 有一个`nameProperty()`返回实例的方法`StringPropery`，您可以替换该行

```
setText(item.getName()); 
```

和

```
textProperty().bind(item.nameProperty()); 
```

# python - wxPython MessageDialog - 如何查询状态？

> ID：15592681
> 
> 赞同：0
> 
> 时间：2013-03-23T22:10:57.463
> 
> 标签：python, wxpython, status, wxwidgets, messagedialog

我正在运行一个我想在打开 MessageDialog 之前停止的 wxTimer，然后在 MessageDialog 关闭时重新启动。

我将如何做到这一点？我没有找到任何方法可以告诉我对话框是否已关闭。

目前，计时器基本上只是继续滴答作响，每次滴答声都会打开越来越多的窗口:(

希望您能够帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:44:57.453

wxPython 并没有任何机制来确定 MessageDialog 是否打开。您可以做的是手动跟踪对话框是否打开。

如果您使用 打开 MessageDialog `ShowModal`，则该`ShowModal`调用将在对话框关闭时返回。您可以使用`True`在调用之前`ShowModal`和`False`之后设置为的标志，即：

```
self.is_dialog_open = True
dialog.ShowModal()
self.is_dialog_open = False 
```

然后你的 wx.Timer 调用的方法可以`self.is_dialog_open`用来确定对话框是否打开。

根据应用程序的结构，您可能希望将此标志存储在其他对象中，而不是`self`.

（我不保证此代码不容易出现竞争条件。如果您的计时器恰好在`ShowModal()`返回之后检查对话框是否打开但之前`self.is_dialog_open`设置回`False`，那么您的计时器将认为该对话框已打开当它实际上刚刚关闭时。希望这对您来说不会是一个严重的问题。）

# python - 在 Mac 上编写 Python 脚本的最佳方式（IDE？）

> ID：15592683
> 
> 赞同：1
> 
> 时间：2013-03-23T22:11:08.150
> 
> 标签：python, xcode, macos, scripting

我很想知道在 Mac 上编写 Python 脚本的最佳方式是什么。我经历了两种方式（请注意，我试图避免使用 vim，因为我想要一个 IDE 而不是平淡无奇的文本编辑器）。我在 Eclipse 中使用了 PyDev（我越是通过他们的建议和步骤，一切似乎就越麻烦.. 虽然我确实已经设置了所有东西并且它可以编译.. 我想知道是否有更好的方式。我不太喜欢 Eclipse），我尝试通过以下步骤设置 Xcode：[Xcode4](https://stackoverflow.com/questions/5276967/python-in-xcode-4)运行 Python 脚本。Xcode 版本的问题是，我每次都必须像这样始终如一地设置项目。那，每次我编译一些需要创建文件的东西时，它都不需要（比如使用命令 conn = sqlite3.connect('list.sqlite3')。有没有简单的方法来做到这一点？我一直在尝试遵循各种希望我使用 python 脚本（我根本不熟悉）的 iOS 教程，例如[raywenderlich.com](http://www.raywenderlich.com/902/sqlite-101-for-iphone-developers-creating-and-scripting)和 Oreilly 教程。任何人都可以提供一些关于最佳方式的指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:56:35.710

就个人而言，我更喜欢 Python 官方网站 IDLE 上的那个，可以在[这里](http://python.org/download/)下载。它很容易处理，并且使用 Shell 提供了一个测试区域，在我看来，它比 Eclipse 所能提供的更多。我敢肯定，人们会觉得与我完全相反，但根据我的经验，IDLE 是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:24:20.877

我认为 Eclipse 中的 PyDev 非常好。对于科学编程，我编写了以下安装指南： [http ://hywelowen.org/installing-python-for-scientific-computing-on-osx/](http://hywelowen.org/installing-python-for-scientific-computing-on-osx/)

Spyder 似乎是一个不错的选择，但我自己没有使用过。

# javascript - 当孩子有某个类时，jQuery toggleClass 到父类

> ID：15592684
> 
> 赞同：0
> 
> 时间：2013-03-23T22:11:14.403
> 
> 标签：javascript, jquery, html

我正在使用[Ratchet](http://maker.github.com/ratchet/)框架来制作 iPhone 应用程序的原型。

在 Ratchet 中，他们有使用类和 onclick（或点击）的[切换](http://maker.github.com/ratchet/#toggles)，它使用和.`toggle``toggle``active`

使用 jQuery，我如何将一个类切换到父父元素，所以当切换使类处于活动状态时，它会`toggle-active`向父父元素添加一个类（比如），当它没有激活类时，它会删除有添加该类。我一直在研究几种不同的方式，例如 if 语句、onclick，但我没有找到任何可行的方法。

例如，这是我尝试过的：

jQuery

```
$(".toggle.active").click(function() {
    $(this).parent().parent().toggleClass("toggle-active");
}); 
```

标记

```
<div class="toggle"><div class="toggle-handle"></div></div> 
```

是`toggleClass`问题还是功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:16:37.670

单击时..检查它是否具有活动的类，`hasClass`如果是，则将所需的类添加到 parent.parent.. 如果没有，请删除它...

尝试这个

```
 $(".toggle").click(function() {
   if($(this).hasClass('active'){
     $(this).parent().parent().addClass("toggle-active");
     //or $(this).parents().eq(2).addClass("toggle-active"); //for find() or closest()

   }else{
     $(this).parent().parent().removeClass("toggle-active");
   }
}); 
```

# android - Robotium 强制停止被测应用程序

> ID：15592685
> 
> 赞同：1
> 
> 时间：2013-03-23T22:11:35.903
> 
> 标签：android, robotium

我正在使用 adb instrument 命令运行一个机器人测试用例。测试结束后，robotium 会强制停止被测应用程序。我了解仪器和被测应用程序共享相同的过程。我的用例是：我不想为每个机器人测试用例执行强制停止正在测试的应用程序。有没有办法阻止它？

这是我在 adb 日志中看到的：

```
03-01 15:12:15.318 I/TestRunner(13561): **passed: <Test name>**

03-01 15:12:15.318 W/InputManager(  728): Input event injection from pid 13561 permission denied.

03-01 15:12:15.338 I/ActivityManager(  728): Killing proc 13561:<**Packagename>**/u0a139: force stop

03-01 15:12:15.348 D/AndroidRuntime(13546): Shutting down VM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:26:30.737

`03-01 15:12:15.318 W/InputManager( 728): Input event injection from pid 13561 permission denied.`意味着您的应用程序尝试注入不允许执行的事件。在您的清单中实现这些功能或系统签名您的应用程序，以防您拥有平台密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:36:48.553

将 Robotium 与 SinglelaunchActivityTestCase 一起使用。

[http://developer.android.com/reference/android/test/SingleLaunchActivityTestCase.html](http://developer.android.com/reference/android/test/SingleLaunchActivityTestCase.html)

# php - PHPMailer 的阿拉伯语问题

> ID：15592687
> 
> 赞同：3
> 
> 时间：2013-03-23T22:11:49.240
> 
> 标签：php, encoding, phpmailer

我正在使用 PHPMailer 并尝试发送带有阿拉伯文本的电子邮件，它发送的是空主题，我可以在收件箱中看到“（无主题）”

我正在使用以下内容：

HTML 代码

```
<form action="mail.php" method="post">
<input type="text" name="subject" />
<input type="submit" value="Send" />
</form> 
```

PHP 代码 (mail.php)

```
$subject = $_POST["subject"];
    $mailer = new PHPMailer();
            $mailer->CharSet = 'UTF-8';
            $mailer->IsSMTP();
            $mailer->SMTPDebug = 1;
            $mailer->SMTPAuth = true;

            // Prepare Message  
            $mailer->Subject = ($subject);
            $emails = 0; 
```

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-03T15:37:59.630

只需添加

```
$mailer->CharSet = 'UTF-8'; 
```

及其作品

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-08T01:45:34.180

用这个。它对我有用。

```
 $mail = new PHPMailer();
    $mail->CharSet = 'UTF-8';       
    $mail->IsSMTP();                                   // send via SMTP
    $mail->Encoding     = "base64";
    $mail->Host     = ........

    ...

    $mail->Subject  =  '=?UTF-8?B?'.base64_encode($subject).'?='; 
```

如果您将`htmlentities ($subject)`其更改为`htmlspecialchars ($subject)`htmlenitities 会中断编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T23:07:54.567

```
$subject = $_POST["subject"];
$subject = "=?UTF-8?B?" . base64_encode($subject) . "?="; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T22:30:58.023

请尝试以下步骤以正确解决问题。

1.  确保发布主题的页面是 UTF-8 编码页面。

    1a。如果源不是 UTF-8，那么

    ```
    iconv("SOURCE_ENCODING","UTF-8",$subject); 
    ```

2.  Var 在发送邮件之前转储主题。

3.  尝试用阿拉伯语添加一个硬编码的主题，例如：

    ```
    $subject= "تجربة عنوان للرسالة"; 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T22:25:34.130

尝试旧方法：

```
$to      = 'any@mail.com';
$subject = 'Hi!';
$message = 'Whats up?';
$headers = 'From: mail@of.you.com' . "\r\n" .
        'Reply-To: noreply@blabla.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion()."\r\n";                         
$headers .= 'MIME-Version: 1.0' . "\r\n";
//if you send an html page:
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

mail($to, $subject, $message, $headers); 
```

# spring - 重定向到登录以获取 isFullyAuthenticated() URL，然后再次返回

> ID：15592688
> 
> 赞同：0
> 
> 时间：2013-03-23T22:12:04.047
> 
> 标签：spring, authentication, login, spring-security

我正在使用 Spring Security 3.1.x 并尝试实现以下场景：

*   使用 isFullyAuthenticated() 保护页面
*   当前用户仅通过记住我的身份验证，因此**未完全通过身份验证**
*   用户导航到这个完全经过身份验证的页面 - 这不应该**被允许**（而且它不是）
*   但是，用户不应获得 403 页面 - 相反，应提示用户通过登录表单登录
*   登录后，应该允许用户继续访问他之前请求的页面，因为现在他是一个完全经过身份验证的用户

我的 Spring Security 配置是：

```
<http use-expressions="true">
    <intercept-url pattern="/admin/full_auth_only.html" access="isFullyAuthenticated()" />

    <form-login login-page="/login.html" default-target-url="/authenticated.html" />
    <logout />
    <remember-me key="someAppKey" />

</http> 
```

我试图补充：

```
 <access-denied-handler error-page="/login.html" /> 
```

但是，现在的问题是，在访问页面时，确实是登录表单提示，只是URL没有对应登录；相反，它是完全经过身份验证的页面的 URL：

`http://localhost:8080/spring-security/admin/full_auth_only.html`

然后破坏身份验证过程，在尝试访问（无效）URL时失败： `http://localhost:8080/spring-security/admin/j_spring_security_check`
这应该是：
`http://localhost:8080/spring-security/j_spring_security_check`

对此的任何帮助表示赞赏 - 我认为用例非常常见，因此我更喜欢使用命名空间支持而不是自定义方向。

谢谢。
欧根。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:27:07.273

1.删​​除任何`welcome-file-list`如果你有`web.xml`。

2.确保`always-use-default-target`未**设置为** `false`in`form-login`标签或将其全部删除。

3.并确保您已允许每个人访问您的登录页面。像这样的东西`<intercept-url pattern="/login.htm" access="permitAll()"/>`

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:17:13.320

我无法重现您`3.1.3.RELEASE`对 Spring Security 版本的问题。您使用哪个版本？

身份验证请求被拦截`AbstractAuthenticationProcessingFilter`，检查请求的 URL 是否以预先配置的值（默认为）**结尾**`/j_spring_security_check`。任何具有该结尾​​的 URL 都会触发身份验证尝试。[您可以在此处](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.java#L245-248)查看相关代码。

这意味着您所说的无效URL实际上应该没有问题地处理。

上面链接的代码自早期版本（ ）以来没有更改`2.x`，因此您的情况应该还有其他一些问题。

如果您可以共享您的配置和一些调试级别的日志，那将有助于揭示真正的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T01:06:52.027

听起来好像没有设置cookie，并且发送的以下请求都被视为没有会话ID的第一个请求，因此即使您已经登录，spring security也会每次都要求登录。

如果您使用的是 google chrome，并使用 localhost 地址在本地计算机上测试了应用程序，则可能未设置 cookie。这是 Google chrome 的一个已知问题。

您可以尝试 127.0.0.1 来测试。或者尝试其他网络浏览器，例如 Internet Explorer。

# javascript - Node.js Javascript 范围问题

> ID：15592694
> 
> 赞同：0
> 
> 时间：2013-03-23T22:12:30.787
> 
> 标签：javascript, node.js, scope

我有一个 Node.js HTTP 服务器正在运行，如下所示（简化）：

```
http = require('http');
help = require('./modules/help').run;
router = require('./modules/router').run;
m = {something: require('./modules/something')};

var server = http.createServer(router).listen(8001); 
```

"help" 是一组函数助手，例如：

```
module.exports.run = {
  joinObjects: function(obj1, obj2) {
    for (var prop in obj2) {
       obj1[prop] = obj2[prop];
    }
    return obj1;
  }
} 
```

“路由器”处理请求（进一步向下传递并处理对客户端的响应）：

```
module.exports.run = function(req, res) {

  var urlPath = url.parse(req.url).pathname;

  switch(urlPath) {
    case '/something':
      requestHandler(req, res, 'something');
      break;
    ...
  }

  function requestHandler(req, res, handler) {
    var data = '';
    req.on('data', function(chunk) {
      data += chunk;
    }
    req.on('end', function() {
      m[handler].run(req, data, function(response) {
        response.headers = help.joinObjects(config.responseHeaders, response.headers);
        res.writeHead(response.code, response.headers);
        res.end(response.data);
      });
    }
  }

} 
```

“处理程序”模块/函数运行回调函数并将响应（代码、标头和数据）传递给它。然后，回调函数将标头与配置文件中设置的一组默认标头合并。

**问题：**当有两个连接`help.joinObjects()`同时调用时（这是我的猜测），`response.headers`属性与另一个用户/连接中的一个发生冲突并返回错误数据。如果我注释掉进行合并的行，则不会发生这种情况。

**问题：**我对“帮助”模块的方法有什么问题？这里有一些我不明白的范围问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:56:55.507

正如**lazyhammer**指出的那样，问题在于我将对象传递给辅助函数的顺序：`help.joinObjects(config.responseHeaders, response.headers)`.

Javascript 通过引用传递变量，因此每次`help.joinObjects()`调用时，它都会覆盖配置属性而不是用户特定的对象。

# r - 插入符号 R 包中的 aucRoc 和 roc 函数

> ID：15592696
> 
> 赞同：0
> 
> 时间：2013-03-23T22:12:36.310
> 
> 标签：r, machine-learning

我正在阅读Journal of Statistical Software[链接](http://www.jstatsoft.org/v28/i05/paper)`caret`上R 包的论文，在第15-16 页，作者介绍了计算ROC 和AUC 的使用。但是，从 5.13-037 版本开始，这些功能不再可用（请参见[此处](http://cran.r-project.org/web/packages/caret/news.html)）。我认为它们是方便的功能，但不知道为什么它们被弃用......关于 ROC 和 AUC 的替代方法/功能有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:51:50.943

您可以使用`pROC`包例如：

```
library(pROC)
data(aSAH)
# Basic example with 2 roc objects
roc1 <- roc(aSAH$outcome, aSAH$s100b) 
```

# c# - 澄清需要 MVP 模式中的演示者应该知道什么

> ID：15592698
> 
> 赞同：0
> 
> 时间：2013-03-23T22:12:42.687
> 
> 标签：c#, winforms, mvp

我正在尝试将 WindowsForm 重构为 MVP 模式。该应用程序是一个磁贴编辑器。表单有一个自定义控件，我在其中显示 tilemap (TileDisplay)。从文件加载地图后，我调用名为“AdjustHScrollBar”的方法将水平滚动条重新调整为 tilemap 大小。我不是 100% 确定如何根据 MVP 拆分方法。首先是原始的none MVP方法：

```
private void AdjustHScrollBar()
{
    if (tileMap.GetWidthInPixels() > tileDisplay.Width)
    {
        hTileScrollBar.Visible = true;
        hTileScrollBar.Minimum = 0;
        hTileScrollBar.Maximum = tileMap.GetWidth();
    }
    else
    {
        hTileScrollBar.Visible = false;
    }
} 
```

这是在presenter中使用MVP后的方法：

```
private void AdjustHScrollBar()
{
    if (mainFormModel.TileMap.GetWidthInPixels() > mainFormView.GetTileDisplayWidth())
    {
        mainFormView.EnableHScrollBar(mainFormModel.TileMap.GetWidth());
    }
    else
    {
        mainFormView.DisableHScrollBar();
    }
} 
```

视图不知道演示者。我的问题是演示者是否应该知道视图的控件。在我的实现中它没有——这就是 GetTileDisplayWidth、EnableHScrollBar 和 DisableHScrollBar 方法的原因。Afaik 这是正确的方法，但是如果我必须从视图中为我需要的每个属性创建一个方法，这似乎变成了很多工作。例如，对于垂直滚动条，我基本上有“相同”的代码（所以这是重新调整滚动条的 6 种方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:18:47.490

层的重点`Presenter`是能够在`View`不知道视图细节的情况下与层通信，即与大小、颜色、视图类型或任何其他属性有关的任何事情。

通常`presenter class`将采用`view object`它的构造函数。理想情况下，您将拥有`Adjust`视图上的方法，并且演示者会直接调用它，更理想的是，您将通过接口而不是直接视图类来执行此操作。

在您的代码中，您正在访问所有视图的属性，然后尝试通过演示者操作它们，除非您对业务逻辑有某种依赖性，否则您不必这样做。所以你可以在图层上做整个操作`View`，然后从`Presenter`图层中调用它。

MVP 涉及大量代码，这是您必须接受的权衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:50:30.520

我会在演示者中做这样的事情：

```
public interface ITileMapView
{
    event EventHandler<string> TileMapFileLoaded;
    void OnTileMapLoaded(TileMapModel model);
}

public class TileMapPresenter
{
    private readonly ITileMapView view;

    public TileMapPresenter(ITileMapView view)
    {
        this.view = view;
        view.TileMapFileLoaded += OnTileMapFileLoaded;
    }

    private void OnTileMapFileLoaded(object sender, string filename)
    {
        // Parse data from file
        // Populate model

        // Tell view
        view.OnTileMapLoaded(model); //Implement the 'AdjustHScrollBar' logic in the view
    }
} 
```

演示者知道何时以及如何获取数据，以及如何解释数据。您不应该让 Presenter 参与任何特定于视图的逻辑。

# ios - 如何为具有静态库目标的项目创建 PodSpec？

> ID：15592699
> 
> 赞同：4
> 
> 时间：2013-03-23T22:13:06.430
> 
> 标签：ios, cocoapods

我有一个 Xcode 项目 (foo)，它构建了一个静态库 (libfoo.a)，其中包含一些重要的预/后期构建步骤。传统上，当我在另一个项目中使用这个库时，我会在我的主项目中添加 foo.xcodeproj 作为子项目，然后在主项目中连接构建依赖项设置。

我希望使用 CocoaPods 让这一切变得更容易，但我不确定它是为此而设计的。我是否应该将构建设置从 foo 项目复制到一个 pod 规范中，以便 CocoaPods 可以按照它想要的方式构建它？我的前/后构建步骤呢？

有关于为闭源[预编译库](https://github.com/CocoaPods/CocoaPods/issues/98)（如 TestFlightSDK）创建 Pod 的信息，但我不想预编译我的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-13T09:50:14.950

可以使用`prepare_command`钩子（[文档](http://guides.cocoapods.org/syntax/podspec.html#prepare_command)）并在其中使用 CocoaPods使用的 ruby​​ gem xcodeproj（ [xcodeproj 站点）更改您的 Xcode 项目。](http://rubydoc.info/gems/xcodeproj)我不确定，但可能可以使用它添加构建脚本。

不确定公共回购中的 podspecs 是否接受这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:17:37.937

使用 Cocoapods，您无需担心目标本身。它使用库中的所有源文件创建一个新项目，并创建一个包含所有 Pod 依赖项的 libPods.a。

如果您使用正确的 source_files 和 public_header_files 创建 Podspec，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:58:16.997

使用[pre_install 钩子](http://docs.cocoapods.org/specification.html#pre_install)（0.17 文档，语法略有变化），您可以执行您需要的任何构建操作。

主存储库不鼓励使用此钩子，但是对于私有规范，它是受支持的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T10:47:16.283

似乎已经为您提供了答案： [Create podspec to ship static library](https://stackoverflow.com/questions/20592223/create-podspec-to-ship-static-library)

有两种方式显示（作为 .a + 标头库，或作为 .framwerork）

认为 .framework 是一种首选的共享方式。

# sql - 使用索引按字符串前缀选择

> ID：15592702
> 
> 赞同：3
> 
> 时间：2013-03-23T22:13:23.253
> 
> 标签：sql, arrays, select, indexing, prefix

你有一列`foo`，某种字符串类型，在该列上有一个索引。您希望`SELECT`从表`WHERE`中的`foo`列具有前缀`'pre'`。显然，索引在这里应该可以提供帮助。

这是通过前缀搜索最明显的方法：

```
SELECT * FROM tab WHERE foo LIKE 'pre%'; 
```

不幸的是，这并没有得到优化以使用索引（至少在 Oracle 或 Postgres 中）。

但是，以下方法*确实*有效：

```
SELECT * FROM tab WHERE 'pre' <= foo AND foo < 'prf'; 
```

但是有没有更好的方法来实现这一点，或者有没有让上面的方法更优雅的方法？尤其是：

*   我需要一个 from `'pre'`to函数`'prf'`，但这必须适用于任何基础排序规则。此外，它比上面更复杂，因为如果搜索 eg`'prz'`那么上限必须是`'psa'`，依此类推。
*   我可以将其抽象为存储的函数/过程并仍然命中索引吗？所以我可以写类似的东西`... WHERE prefix('pre', foo);`？

感谢所有 DBMS 的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:50:37.093

数据库在这里非常重要。碰巧 SQL Server 为`like`.

一种方法是做这样的事情：

```
where foo >= 'pre' and foo <= 'pre+'~' 
```

'~' 具有可打印字符中最大的 7 位 ASCII 值，因此它基本上比其他任何东西都大。但是，如果您使用宽字符或非标准字符集，这可能是个问题。

您不能将其抽象为函数，因为使用函数通常会排除使用索引。如果您总是查看前三个字符，那么在 Oracle 中您可以在这三个字符上创建一个索引（称为“基于函数的索引”）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-23T23:08:53.090

怎么样

```
select * from tab where foo between 'pre' and 'prf' and foo != 'prf' 
```

这以相同的方式启用索引。RDBMS 一定很愚蠢，**不能**为此使用索引。

# java - Web 服务器访问错误

> ID：15592708
> 
> 赞同：1
> 
> 时间：2013-03-23T22:14:09.140
> 
> 标签：java, android, sql-server, apache, phpmyadmin

我正在构建一个 Android 应用程序，它借助存储在 Apache 服务器上的 PHP API 连接到远程数据库。

这是计划的方式：

(1) 用户在应用程序上单击登录 (2) 应用程序在 Web 服务器上调用 login.php (3) login.php 然后检查 phpmyadmin SQL 服务器（特定数据库和表以获取用户详细信息）

现在，我有一个问题！

我正在使用学术型大学服务器

通常大学允许我使用以下格式访问任何文件：

例如， [http://doc.gold.ac.uk/~m00982/test.html](http://doc.gold.ac.uk/~m00982/test.html)

这里 ~m00982 代表我大学知道的学生 ID。

回到我原来的问题。虽然我可以通过网络浏览器直接访问我的 php 文件。但是我以这样的方式编写了我的 Java：

CustomHTTP 客户端首先检查 URL 地址是否正常且可访问。

我收到 CustomHTTPClient FALSE 错误，因为它无法建立与 doc.gold.ac.uk 的连接，因为服务器拒绝访问。我知道这一点，因为大学服务器会要求输入用户名和密码才能连接。

我该如何解决这个问题？？？

如果我使用私人网络服务器（例如，我在 Go Daddy 上购买了网络托管）并将我的文件和文件夹存储在那里，它可以完美运行，并且 CustomHTTPClient TRUE 在这种情况下。

我需要使用大学服务器，因为我的 SQL 数据库存储在本地，我需要运行我的应用程序。

有什么建议么？

```
My CustomHTTPClient.Java snippet is here:

   public static boolean isAddressOk(String link){
        boolean isOK = false;
        try {
            URL url = new URL(link);
            HttpURLConnection urlCon = (HttpURLConnection)url.openConnection();
            urlCon.connect();
            if(urlCon.getResponseCode() == 200) {
                isOK = true;
                Log.i(DEBUG, "TRUE");
            }else{
                isOK = false;
                Log.i(DEBUG, "FALSE");
            }
            urlCon.disconnect();
        } catch (MalformedURLException e1) {
            isOK = false;
            Log.e(DEBUG, "FALSE");
            e1.printStackTrace();
        } catch (IOException e) {
            isOK = false;
            Log.e(DEBUG, "FALSE");
            e.printStackTrace();
        }

        return isOK;
    }
} 
```

和参数在这里定义：

```
// the URL for IGOR Web Server where PHP Scripts are located
public static final String LINK_ROOT = "http://doc.gold.ac.uk";

// the link to login API on IGOR Server
public static final String LINK_LOGIN = LINK_ROOT + "/~ma00982/android/login.php"; 
```

# android - Android 支持该方法不可用的旧 SDK

> ID：15592715
> 
> 赞同：0
> 
> 时间：2013-03-23T22:15:41.710
> 
> 标签：android

我一直在寻找答案，但还没有找到解决方法，但我希望有人能指出我正确的方向

我想要支持 sdk8 及更高版本，**android.bluetooth.BluetoothDevice**库中 的**createInsecureRfcommSocketToServiceRecord**方法仅支持 SDk10 及更高版本

 **快速而肮脏的是使 minSDK=10 但我不想让我的用户使用旧设备冷落

我已经看到了很多参与（或者我应该说古怪）的尝试方式，反思？？？但他们都失败了，我认为最简单的方法是：

```
if( Build.VERSION.SDK_INT>=10)
{
    BluetoothDevice device;
    Class myC = ClassforName("android.bluetooth.BluetoothDevice")
    Method myM = myC.getDeclaredMethod("createInsecureRfcommSocketToServiceRecord");
    BluetoothSocket bb = (BluetoothSocket)myM.invoke(device, MYUUID);
} 
```

但它抛出了一个 NoSuchExceptionMethod，所以看起来库可能必须有其他名称？？？？或者你会如何处理这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:31:10.400

您还必须传递声明的参数

```
Class myC = ClassforName("android.bluetooth.BluetoothDevice")
Method myM = myC.getDeclaredMethod("createInsecureRfcommSocketToServiceRecord",UUID.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:39:47.647

如果你不想增加你的`minSDK`版本，你要么用反射来包装你的电话......

```
BluetoothDevice device;

if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD) {
   Class myC = ClassforName("android.bluetooth.BluetoothDevice")
   Method myM = myC.getDeclaredMethod("createInsecureRfcommSocketToServiceRecord", 
                                       new Class[] { UUID.class } );
   BluetoothSocket bb = (BluetoothSocket)myM.invoke(device, MYUUID);
} 
```

...或者您提供一个`android.bluetooth.BluetoothDevice`只有一些空方法存根的（抽象）类。这使您可以编译源代码而不会出现任何错误。在运行时，虚拟机将尝试从系统加载该类。

```
public abstract class BluetoothDevice {

    BluetoothDevice () {
    }

    public void createInsecureRfcommSocketToServiceRecord(UUID uuid) {
    }
} 
```

该类必须放在*root-source* /android/bluetooth 中。在任何情况下，限制对正确操作系统版本的任何调用都很重要（请参阅上面的代码），否则您可能会遇到`NoSuchExceptionMethod`-exception。

最后：不要忘记方法的签名（参数）（in `getDeclaredMethod()`）。

干杯!**

# shell - KornShell 脚本：列出一个范围内的所有偶数

> ID：15592716
> 
> 赞同：0
> 
> 时间：2013-03-23T22:15:51.803
> 
> 标签：shell, unix, scripting, ksh, vi

我要做的是列出用户通过 KornShell (ksh) 脚本输入的两个数字之间的所有偶数。因此，如果用户输入第一个数字，那么它将显示`2`第二个数字`25`

```
2,4,6,8,10,12,14,16,18,20,22,24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:09:44.947

这应该与`ksh93`and一起使用`bash`，不需要`seq`或`perl`可能不会安装，具体取决于所使用的操作系统。

```
function evens {
  for((i=($1+($1%2));i<($2-3);i+=2));do printf "%s," $i;done
  echo $((i+2))
} 
```

* * *

```
$ evens 2 25
2,4,6,8,10,12,14,16,18,20,24
$ evens 3 24
4,6,8,10,12,14,16,18,20,24
$ evens 0 9
0,2,4,8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:58:12.277

在 ksh 中，假设您使用了变量`start`和`end`：

```
set -A evens                             # use an array to store the numbers
n=0
i=$start
(( i % 2 == 1 )) && (( i+=1 ))    # start at an even number
while (( i <= end )); do
  evens[n]=$i
  (( n+=1 ))
  (( i+=2 ))
done
IFS=,  
echo "${evens[*]}"                       # output comma separated string 
```

输出

```
2,4,6,8,10,12,14,16,18,20,22,24 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T22:20:13.530

```
first=2 # from user
last=25 # from user
seq $first 2 $last 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T23:52:15.090

在 shell 中有很多方法可以做到这一点`shell script`，, `awk`,`seq`等等......

既然你用 标记了问题**`vi`**，我用**vim**添加了一个：

```
fun! GetEven(f,t)
    let ff=a:f%2?a:f+1:a:f
    echom join(range(ff,a:t,2),",")
endf 
```

获取该函数，然后键入，`:call GetEven(2,25)`您将看到预期的输出。

它目前在命令区域回显，如果您希望它显示在文件中，只需使用`put`or `setline`，也很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T22:25:22.347

使用`perl`：

```
perl -e 'print join q{,}, grep { $_ % 2 == 0 } (shift .. shift)' 2 25 
```

它产生：

```
2,4,6,8,10,12,14,16,18,20,22,24 
```

* * *

**编辑**以修复尾随换行符：

```
perl -e 'print join( q{,}, grep { $_ % 2 == 0 } (shift .. shift) ), "\n"' 2 25 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-23T23:49:04.630

通过设置`first=$(($1+($1%2)))`和使用`-s`选项来格式化输出，您可以使用`seq`：

```
first=$(($1+($1%2)))
last=$2
seq -s, $first 2 $last 
```

另存为脚本`evens`，并使用以下偶数调用`$first`：

```
$ ./evens 2 25
2,4,6,8,10,12,14,16,18,20,22,24 
```

或奇数值`$first`：

```
$ ./evens 3 25
4,6,8,10,12,14,16,18,20,22,24 
```

# java - Grails 中的全局对象

> ID：15592717
> 
> 赞同：1
> 
> 时间：2013-03-23T22:15:59.917
> 
> 标签：java, grails, groovy, global-variables, bootstrapping

在 Grails 中编写一个小型 Web 应用程序我遇到了全局对象的问题。我有一个运行线程的类 - 带有队列的 ExecutorService。

问题是在哪里创建这个类的对象，让它在 Controller 中可用？

我已经尝试过 init (BootStrap) 但没有机会在其他任何地方获取它的实例。

一般来说 - 我需要的是整个应用程序的单个实例中的一个对象，可以从模型和/或控制器访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:27:06.213

> 一般来说 - 我需要的是整个应用程序的单个实例中的一个对象，可以从模型和/或控制器访问。

实现这一点的标准方法是将[对象声明为 Spring bean](http://grails.org/doc/latest/guide/spring.html#springdslAdditional)`grails-app/conf/spring/resources.groovy`

```
threadPool(java.util.concurrent.Executors) { bean ->
  bean.factoryMethod = "newCachedThreadPool"
} 
```

然后在控制器/服务/等中。您可以像使用 grails 服务一样注入此 bean，即

```
def threadPool 
```

[但在这种情况下，您可能会发现使用`executor`插件](http://grails.org/plugin/executor)更简单，它为您定义了这样一个 bean 并处理确保后台任务可用的有效 GORM 会话的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:12:31.563

为什么不将*Executorservice*包装在 Spring Bean 中，或者使用类似的东西：

```
grailsApplication.controllerClasses.each {controller ->
controller.metaClass.executorService = { ->
      executorService
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:49:19.803

实际上，在检查答案之前，我已经想到了一些东西。

为给定的域类（Example）和控制器（ExampleController）创建

```
 ExampleService 
```

并简单地包括所有需要的东西。将行为设置为[@Singleton](http://grails.org/doc/latest/guide/services.html#scopedServices)（默认）。然后在Controller中注入实例如下：

```
 def exampleService 
```

# c - 在指针指向的地址处创建结构

> ID：15592721
> 
> 赞同：0
> 
> 时间：2013-03-23T22:17:21.507
> 
> 标签：c, pointers, struct

我有一个`unsigned char* head`指向内存中某个地址的指针，现在我必须创建一个 typedef 结构，我已经声明从该指针的位置开始......我对如何做到这一点感到困惑！

这是 typedef 的声明

```
 typedef struct {
    struct block *next;
    struct block *prev;
    int size;
    unsigned char *buffer;
} block; 
```

我的任务涉及实现malloc，所以我不能使用malloc。块是 free_list 的一部分，它包含我在程序堆中拥有的所有空闲内存块块。因此，指向前一个和下一个空闲内存块的前一个和下一个指针。

Head 指向 free_list 的开始。当我必须拆分说第一个空闲内存块以满足需要更少空间的 malloc() 请求时，该空闲块有我需要移动我的头并在那里创建一个新的块结构。

希望这是有道理的。如果不是，则作业看起来像[这样](http://www.cs.ucsb.edu/~rich/class/cs170/labs/lab1.malloc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:44:53.690

您的结构没有标签，因此您需要给它一个标签以使其指向自身：

```
 typedef struct block {
    struct block *next;
    struct block *prev;
    int size;
    unsigned char *buffer;
} block; 
```

如果您使用的是 C99，您可以在`head`必要时直接初始化内存，而无需声明临时`struct block`:

```
*(block *)head = (block){NULL, NULL, 0, NULL}; 
```

只要你正确地投射它，你现在就有了`struct block`at the address 。`head`

例如

```
((block *)head)->size = 5; 
```

或者你为它分配一个强制转换指针：

```
block *p = (block *)head;
p->size = 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:36:14.300

操作系统将提供一个 API 调用来分配您`malloc`可以分割并提供给调用者的内存块。在 Linux/unix 中查看[`sbrk`](http://linux.die.net/man/2/sbrk). 在 Windows 中查看 Win32 堆 API。您的记录将指向此块。确保块的两个分配部分没有重叠是分配器代码的工作。

看起来您的记录正在实施免费列表。那么当你还没有分配器时，你将如何分配列表节点呢？通常的解决方案是在空闲块本身中进行。因此，空闲块具有以下结构：

```
typedef struct free_block {
    struct free_block *next, *prev;
    size_t size;
    unsigned char buffer[1];
} FREE_BLOCK; 
```

现在这个数据结构实际上位于空闲块的开头。它的缓冲区在声明中只有 1 个字节，但实际缓冲区是`size`字节。最初你会有类似的东西：

```
static FREE_BLOCK *free_list = sbrk(ARENA_SIZE);
free_list->next = free_list->prev = free_list;
free_list->size = ARENA_SIZE - offsetof(FREEBLOCK, buffer); 
```

这会将整个竞技场作为一个块放在空闲列表中。您的分配器将搜索`free_list`找到一个足够大的块，切出它需要的部分，将剩余的小块（如果有的话）放回空闲列表中。对于释放，它会将释放的块添加到列表中并合并相邻的块。

简单的空闲列表分配器在选择要分配的空闲块的方式上有所不同：首次适合、旋转首次适合、最佳适合、最差适合等。在实践中，旋转首次适合似乎与其他任何一种方法一样好或更好。

顺便说一句，所有用自由列表实现的常见算法都不需要双链接。单身的就可以了。

由于这是一项学术任务，因此只需调用`malloc`（而不是操作系统 API）来建立您的分配器将管理的大块（通常称为“竞技场”）应该没问题。您还可以声明一个大字节数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:22:01.537

```
unsigned char* head = /* whatever you have assuming that it has a sufficient size. */;

/* Create a block in memory */
block* b = (block*)malloc(sizeof(block));

/*
*   modify data in b here as you wish.
*/
b->next = 0;
b->prev = 0;
/* etc... */

/* copy b to head */
memcpy(head, b, sizeof(block));

/* free block */
free(b); 
```

上面假设 head 有足够的空间来存储一个 block 的实例。它所做的是创建一个块，并将内存复制到 head 的位置，然后释放分配的块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T22:28:02.047

来自评论：

> `head`指向内存中可以覆盖数据的位置的开始...您可能会认为我有足够的空间！

然后获取正确类型的指针：

```
struct block *p = (struct block *)head; 
```

并拥有该块的副本：

```
struct block b = *(struct block *)head; 
```

# ios - 使用 AVAudioPlayer 播放

> ID：15592724
> 
> 赞同：0
> 
> 时间：2013-03-23T22:17:25.403
> 
> 标签：ios, objective-c, cocoa, avaudioplayer

我如何在循环示例中使用播放声音

当我尝试使用 like

```
..
mySound.numberOfLoops = 1; // or 0 (if -1 play infinitely)
..
    for ... 
    {
    ///....
      if .... {
         //...
        [mySound play]; 
    } 
```

只有一个游戏时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:17:30.323

我不确定您的意思是要同时播放多个声音还是要永远播放声音。要永久播放声音，请将 mySound.numberOfLoops 的值设置为 -1。如果你想播放多个声音，你必须每次都分配新的 AVAudioPlayers。为了做到这一点，您可以在 if 表达式的开头分配一个新的，尽管可能很难随时停止声音。

# enterprise-library - 验证应用程序块 - 自定义验证器 - 消息模板

> ID：15592727
> 
> 赞同：1
> 
> 时间：2013-03-23T22:17:43.710
> 
> 标签：enterprise-library, validation-application-bl

我正在使用 Enterprise Library 4.1 验证应用程序块。我创建了一个自定义验证器并覆盖了 DefaultMessageTemplate 属性。我的 DoValidate 方法逻辑如下

LogValidationResult(validationResults, String.Format(DefaultMessageTemplate, currentTarget, key), currentTarget, key)

但是，当我在配置工具中为此验证器指定自定义 MessageTemplate 时，仅显示 DefaultMessageTemplate 文本。如何使用自定义验证器的自定义消息覆盖默认消息？

我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:57:51.397

我设法解决了这个问题 - 这是因为自定义验证器上的构造函数不正确。

谢谢！

# javascript - 用 JavaScript "onchange" 加减

> ID：15592728
> 
> 赞同：0
> 
> 时间：2013-03-23T22:17:49.047
> 
> 标签：javascript, onchange

任何帮助将不胜感激。我正在使用带有小数的 onChange 命令添加 JavaScript 字段，但是当 onChange 命令移回选项“NO”以删除数字（例如 1.7）时，它只删除 1.69999 而不是 1.7。

下面是我正在使用的 onChange 代码。

```
<div id="onewindow">
   <label for="txtoneside" class="editor-label"><strong>1 Side </strong></label>
    <div align="right">
      <input type = "text" name = "txtoneside" id="txtoneside" value = "1.7" />
      <select name="txtoneside_slider" id="txtoneside_slider" data-role="slider" data-mini="true" onChange="javascript: if(this.value=='yes'){ document.getElementById('txtgrandtotal').value= parseFloat(document.getElementById('txtgrandtotal').value) + parseFloat(document.getElementById('txtoneside').value); calculate()}
if(this.value=='no'){ document.getElementById('txtgrandtotal').value= parseFloat(document.getElementById('txtgrandtotal').value) - parseFloat(document.getElementById('txtoneside').value); calculate()}"/>
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
</div>
<div id="twowindow">
   <label for="txtoneside" class="editor-label"><strong>2 Side </strong></label>
<div align="right">
  <input type = "text" name = "txttwoside" id="txttwoside" value = "19.3" />
  <select name="txttwoside_slider" id="txttwoside_slider" data-role="slider" data-mini="true" onChange="javascript: if(this.value=='yes'){ document.getElementById('txtgrandtotal').value= parseFloat(document.getElementById('txtgrandtotal').value) + parseFloat(document.getElementById('txttwoside').value); calculate()}
if(this.value=='no'){ document.getElementById('txtgrandtotal').value= parseFloat(document.getElementById('txtgrandtotal').value) - parseFloat(document.getElementById('txttwoside').value); calculate()}" />
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
</div>
<div id="grandtotal">
   <label for="txtgrandtotal" class="editor-label"><strong>JOB TOTAL</strong></label>
   <div align="right">
   <input type = "text" name = "txtgrandtotal" id="txtgrandtotal" value = "0" />
   </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:50:27.073

parseFloat() 正在转换为从二进制到十进制时绝不是精确转换的双精度。我建议根据您的需要使用 toFixed() 截断输出或[查找库十进制数据类型。](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

看：

此外，在这种情况下，将一个值添加到总计然后将其减去是一种不好的做法，因为转换不精确 - 以这种方式会累积舍入误差。我建议在其中一个值发生变化时对每个包含的值进行总和。通过使用[jQuery](http://jquery.com/)，您可以：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>New Web Project</title>
        <script src="jquery-1.9.1.min.js"></script>
    </head>
    <body>
        <div id="onewindow">
            <label for="txtoneside" class="editor-label"><strong>1 Side </strong></label>
            <div align="right">
                <input type="text" name="txtoneside" id="txtoneside" value = "1.7" />
                <select name="txtoneside_slider" id="txtoneside_slider" data-role="slider" data-mini="true" onChange="update()"/>
                    <option value="no">No</option>
                    <option value="yes">Yes</option>
                </select>
            </div>
            <div id="twowindow">
                <label for="txtoneside" class="editor-label"><strong>2 Side </strong></label>
                <div align="right">
            <input type = "text" name = "txttwoside" id="txttwoside" value = "19.3" />
                    <select name="txttwoside_slider" id="txttwoside_slider" data-role="slider" data-mini="true" onChange="update()"/>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div id="grandtotal">
                    <label for="txtgrandtotal" class="editor-label"><strong>JOB TOTAL</strong></label>
                    <div align="right">
                        <input type = "text" name = "txtgrandtotal" id="txtgrandtotal" value = "0" />
                    </div>
                </div>
            </div>
        </div>
        <script>
            update = function(){
                var all_values = [],
                    sum = 0,
                    i = 0;
                $('input:not(#txtgrandtotal)').each(function(){
                    var val = parseFloat($(this).attr('value'));
                    all_values.push((isNaN(val)) ? 0 : val) // store each value
                });
                $('select').each(function(){
                    var $option = $(this).find(':selected');
                    if($option.text()){
                        if($option.text()==="Yes")
                            sum+=all_values[i];  // sum only the ones that are selected
                    }
                    ++i;
                });
                $('#txtgrandtotal').attr('value', sum.toFixed(2));
                calculate(); // if that is required somewhere else in your code?
            }
        </script>
    </body>
</html> 
```

编辑：当输入字段的值为“”或不是数字时，上面的代码已更正。在这种情况下，使用值 0 而不是 parseInt() 的 NaN 结果。

# android - AndroidAnnotations- 直接在特定@ViewById 之后和其他@ViewById 之前执行方法

> ID：15592733
> 
> 赞同：1
> 
> 时间：2013-03-23T22:18:22.397
> 
> 标签：android, findviewbyid, android-annotations

我想知道是否可以在特定@ViewById 之后和其他@ViewById 之前直接执行方法。

```
@ViewById
CostumView view1;

@ViewById
ListView list;

void myMethod(){
    view1.set...
} 
```

我也想知道如何强制第一次注射成为第一次。

谢谢。

没有 AA 的代码，主布局和风扇布局只能由 java 设置。

```
private FanView fan;
   private ListView list;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.test);
            fan = (FanView) findViewById(R.id.fan_view);
            fan.setViews(R.layout.main, R.layout.fan);
            list=(ListView)findViewById(R.id.list); 
```

如果列表在主布局或风扇布局中，MyActivity_ 的 findViewById 返回 null :)

（如果我使用@AfterViews）生成的代码将是这样的：

```
 setContentView(R.layout.test);
                fan = (FanView) findViewById(R.id.fan_view);
                list=(ListView)findViewById(R.id.list);//returns null
                fan.setViews(R.layout.main, R.layout.fan); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:53:28.457

没有注释允许在视图注入之间执行指令，因为官方文档指定尽快进行注入。

他们应该做一个注释

```
@afterView(R.id.myView) 
```

# c++ - C++ 计算器中的整数限制

> ID：15592735
> 
> 赞同：0
> 
> 时间：2013-03-23T22:18:41.257
> 
> 标签：c++

`-2147483648`如果我输入两个足够大的数字，整数会限制我的答案。我可以替换`double v1 = 0, v2 = 0`为我的代码吗？如果我这样做，有没有办法让它输出答案的全长（不是`5e+17`等）

谢谢。

```
#include <iostream>
using namespace std;

int main ()
{
cout << "Enter two numbers: " << endl;
int v1 = 0, v2 = 0;
cin >> v1 >> v2;
int sum = 0, val = v1;

while (val <= v2)
{
    sum += val;
    ++ val;
}
cout << "The sum of " << v1 << " through " << v2 << " inclusive is " << sum << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:20:35.767

您使用的是 32 位整数。您可以改用 64 位整数，`int64_t`. 或者，如果您需要比这更多的范围，则使用具有任意精度的大整数类。

但我敦促您不要将浮点运算用于整数计算。那将是不准确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:21:57.630

> 我可以用 double v1 = 0, v2 = 0 代替我的代码吗？

你可以，但是当你开始使用浮点数时会出现一些警告。小心他们。

> 有没有办法让它输出答案的全长

你想做一些`iomanip`：

```
#include <iomanip>

std::cout << std::setiosflags(std::ios::fixed) << std::setprecision(2) << val; 
```

# visual-studio-2012 - Chutzpah 测试适配器不显示结果

> ID：15592737
> 
> 赞同：1
> 
> 时间：2013-03-23T22:18:56.663
> 
> 标签：visual-studio-2012, mstest, chutzpah

我无法让 Visual Studio 2012 适配器工作。我只是在试图让它工作几个小时后才发布这个问题。.html 文件正在正确生成，但未显示结果。上下文菜单运行程序有效 - 它在“输出”窗口中正确显示结果。

我注意到，当我查看生成的 .html 文件的源代码时，引用的是扩展目录中的 jasmine 文件（和其他文件）。当我使用 chrome 开发工具运行页面并单步执行代码时，出现错误，因为 JavaScript 无法访问文件路径（这是我所期望的）。

我正在为我的下一个主要项目（节点后端）计划一个完整的 JavaScript 应用程序，我想使用 Visual Studio 作为它的测试工具，这将非常有用，但我不想再花时间在这上面在这里发帖的原因。我的问题和这个类似...

[Visual Studio 2012 中的 Chutzpah 不扫描 HTML 测试工具](https://stackoverflow.com/questions/12717213/chutzpah-in-visual-studio-2012-not-scanning-html-test-harnesses)

我再次发布的原因是因为我没有使用 html 页面，并且我认为另一个问题是略有不同的（尽管我可能错了）。我最初是按照这些说明...

[http://www.youtube.com/watch?v=meJ94rAN7P8](http://www.youtube.com/watch?v=meJ94rAN7P8)

# javascript - 实现 jQuery 同位素

> ID：15592745
> 
> 赞同：0
> 
> 时间：2013-03-23T22:19:53.017
> 
> 标签：javascript, jquery, html, css

我一直在尝试实现很棒的同位素插件[http://isotope.metafizzy.co/index.html](http://isotope.metafizzy.co/index.html)

我遇到了一个过滤器问题，到目前为止找不到解决方法：

发生的情况是，当单击“全部”过滤器链接时，会显示所有项目，但是当单击任何其他过滤器链接时，所有项目都会消失。我真的很感激一些帮助:)

我已经建立了一个[JSFiddle](http://jsfiddle.net/vPfay/)

这是代码：

HTML：

```
<div class="large-12 columns">
    <ul id="portfolio-filter">
        <li><a href="#" data-filter="*">ALL</a></li>
        <li><a href="#" data-filter=".website">WEBSITE</a></li>
        <li><a href="#" data-filter=".logos">LOGOS</a></li>
        <li><a href="#" data-filter=".illustrations">ILLUSTRATIONS</a></li>
        <li><a href="#" data-filter=".brand">BRAND</a></li>
        <li><a href="#" data-filter=".ui">UI</a></li>
        <li><a href="#" data-filter=".icons">ICONS</a></li>
    </ul>
    <div id="portfolio-container">
        <ul class="small-block-grid-2">
            <li><div class="website"><a href="#"><img src="img/portfolio/small-01.jpg" alt=""></a></div></li>
            <li><div class="logos"><a href="#"><img src="img/portfolio/small-02.jpg" alt=""></a></div></li>
            <li><div class="illustrations"><a href="#"><img src="img/portfolio/small-03.jpg" alt=""></a></div></li>
            <li><div class="brand"><a href="#"><img src="img/portfolio/small-04.jpg" alt=""></a></div></li>
            <li><div class="ui"><a href="#"><img src="img/portfolio/small-05.jpg" alt=""></a></div></li>
            <li><div class="icons"><a href="#"><img src="img/portfolio/small-06.jpg" alt=""></a></div></li>
            <li><div class="website"><a href="#"><img src="img/portfolio/small-07.jpg" alt=""></a></div></li>
            <li><div class="logos"><a href="#"><img src="img/portfolio/small-08.jpg" alt=""></a></div></li>
            <li><div class="illustrations"><a href="#"><img src="img/portfolio/small-09.jpg" alt=""></a></div></li>
            <li><div class="brand"><a href="#"><img src="img/portfolio/small-10.jpg" alt=""></a></div></li>
            <li><div class="ui"><a href="#"><img src="img/portfolio/small-11.jpg" alt=""></a></div></li>
            <li><div class="icons"><a href="#"><img src="img/portfolio/small-12.jpg" alt=""></a></div></li>
            <li><div class="website"><a href="#"><img src="img/portfolio/small-13.jpg" alt=""></a></div></li>
            <li><div class="logos"><a href="#"><img src="img/portfolio/small-14.jpg" alt=""></a></div></li>
            <li><div class="illustrations"><a href="#"><img src="img/portfolio/small-15.jpg" alt=""></a></div></li>
            <li><div class="brand"><a href="#"><img src="img/portfolio/small-16.jpg" alt=""></a></div></li>
        </ul>   
    </div><!-- /portfolio-container -->
</div><!-- /large-12 columns --> 
```

JavaScript：

```
$(document).ready(function(){

  // cache container
  var $container = $('#portfolio-container');
  // initialize isotope
  $container.isotope({
    // options...
  });

  // filter items when filter link is clicked
  $('#portfolio-filter li a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({ filter: selector });
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:50:29.863

1.  将选择器类直接应用于`<li>`内部元素`<ul class="small-block-grid-2">`并清除图像周围的 div。
2.  确保所有 img 标签都正确关闭，`<img ..... />`.
3.  将同位素应用于`<ul class="small-block-grid-2">`

## HTML

```
<div id="portfolio-container">
    <ul class="small-block-grid-2">
        <li class="website"><a href="#"><img src="img/portfolio/small-01.jpg" alt="" /></a></li>
        ...
    </ul>
</div> 
```

## javascript

```
var $container = $('.small-block-grid-2');
// initialize isotope
$container.isotope({
    // options...
});

// filter items when filter link is clicked
$('#portfolio-filter li a').on('click', function() {
    var selector = $(this).data('filter');
    $container.isotope({
        filter: selector
    });
    return false;
}); 
```

[更新的小提琴](http://jsfiddle.net/vPfay/3/show/)

# java - 如何从 String[] 转换为 ArrayList 使用 BeanUtils.populate 方法？

> ID：15592748
> 
> 赞同：0
> 
> 时间：2013-03-23T22:20:02.517
> 
> 标签：java, string, arraylist, apache-commons-beanutils

如何使用 BeanUtils.populate 方法从 String[] 转换为 ArrayList？看起来我可以使用 ArrayConverter 类，但我很难找到关于如何做到这一点的解释。

这是我创建的一些测试代码：

```
public class TestAction {
public static TestBean testPopulate() throws IllegalAccessException, InvocationTargetException {
    HashMap<String, Object> map = new HashMap<String, Object>();
    TestBean bean = new TestBean();
    String[] names = {"teststring","testboolean","testinteger","testarray"};
    String[] array = {"hi","bye"};
    Object[] values = {"TEST","","100",array};
    int i = 0;
    while (i < names.length) {
        String name = names[i];
        map.put(name, values[i]);
        i++;
    }
    BeanUtils.populate(bean, map);

    return bean;
}

public static void main(String[] args) {
    try {
        TestBean bean = testPopulate();
        System.out.println(bean.getTeststring() + " " + bean.getTestinteger() + " " + bean.getTeststring() + " " + bean.isTestboolean());
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
}

public class TestBean {
private String teststring;
private boolean testboolean;
private int testinteger;
private ArrayList<String> testarray;

public String getTeststring() {
    return teststring;
}
public void setTeststring(String teststring) {
    this.teststring = teststring;
}
public boolean isTestboolean() {
    return testboolean;
}
public void setTestboolean(boolean testboolean) {
    this.testboolean = testboolean;
}
public int getTestinteger() {
    return testinteger;
}
public void setTestinteger(int testinteger) {
    this.testinteger = testinteger;
}
public ArrayList<String> getTestarray() {
    return testarray;
}
public void setTestarray(ArrayList<String> testarray) {
    this.testarray = testarray;
}

} 
```

我传入一个 String[] 类型，希望它知道如何转换为 ArrayList，但它失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:32:17.120

这是一个通用的答案，因为我通常不使用 Beans。BeanUtils 可能*应该*处理这种情况，但这会让我感到惊讶。

字符串数组与 ArrayList 对象不同，尽管它们有相似之处。隐式地从一个转换到另一个通常是一个糟糕的主意，因为有多种逻辑方式可以完成。

*   您可以使用[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)which 接受一个数组并返回一个包装器`List`对象。请注意，它不是一个`ArrayList`，而是一个固定大小的自定义实现，`List`它直接与传递的数组接口，这意味着不必分配新的存储空间。

*   相反，如果你真的想要一个`ArrayList`，你可以根据你得到的对象构造一个新的`List`，使用：

    ```
    ArrayList<String> ls = new ArrayList<String>(Arrays.asList(myArray)); 
    ```

    这个调用*确实*分配了一个新的存储数组，但如果你想要调整大小，你必须接受 O(n) 成本。

这两种可能的选择，根据你的用例，两者都同样有效，这正是为什么你的 bean 将数组隐式转换为一个糟糕的主意`List`- 它应该选择哪个实现？如果您尝试调整它的大小，快速的会抛出异常，还是慢的不会？

尽可能明确说明您的类型转换。尽管冗长看起来/令人讨厌，但这是 Java 最强大的功能之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:28:23.617

您没有提到代码中到底发生了什么失败，但这里是如何在没有任何第三方实用程序的情况下将字符串数组转换为列表：

`Arrays.asList(new String[] {"aaa", "bbb", "ccc"})`

# mysql - 计算实体，在 Doctrine2 中？

> ID：15592754
> 
> 赞同：1
> 
> 时间：2013-03-23T22:20:34.043
> 
> 标签：mysql, inheritance, doctrine-orm, doctrine, associations

在 Doctrine2 中，有没有一种方法可以创建一个基于复杂 sql 查询结果的计算实体？

**背景**：

在我正在处理的应用程序中（在我加入项目之前存在），有一个概念：属性（属于属性，有很多属性，**覆盖**属性）catalogItem（属于catalogItem，有很多catalogItem，有很多属性）

这个想法是 catalogItem 有它自己的层次结构，目前达到 4 级深度。每个catalogItem 都继承其父级的属性，但这些属性（也有自己的层次结构）可以在任何时候被覆盖。然后，此覆盖的层次结构由直接的 catalogItem 使用，它也是子项，具有创建覆盖的相同能力。

因此，直接关联的典型结构在这里毫无用处，因为我们总是需要查看计算的最终结果。

所以，我的问题是，我希望能够将这些计算结果注入到 Doctrine2 中，然后可以将其用作标准实体，能够正常遍历关系等。

这不能作为 MySQL 视图来完成，因为性能下降。此外，创建计算结果的查询相当复杂，为了提高性能，任何过滤（例如，通过 X catalogItem）都发生在第 3 级嵌套子查询以及顶级查询以及子查询的存在意味着普通的 MySQL 视图是直接不兼容的（尽管有解决方法）。

**问题**：

我希望能够在 Doctrine2 中创建一个实体，而不是现有的“表”，实际的 MySQL 查询将存在，并将作为子查询运行。我还没有在 Doctrine2 中看到任何实现我所描述的东西的方法，我希望有人可以提出解决方案或解决方法来实现类似的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:17:59.860

不，没有办法用 Doctrine ORM 处理这种逻辑。ORM 考虑关联并具有唯一标识符（来自实体的定义）的静态类型实体。

此外，这些实体的值和类型不应动态更改，因为 ORM 无法处理类型转换。

你可以做的是：

1.  定义 mysql 级别的视图
2.  创建一个标记为 的实体，`@Entity(readOnly=true)`ORM 在刷新时将忽略该实体

这样，ORM 将能够使用普通的[持久化](https://github.com/doctrine/doctrine2/tree/2.3.2/lib/Doctrine/ORM/Persisters)器从您的实体中读取数据，并且您将能够在关联中使用对象的标识符。

如果您的实体类型是计算出来的，请考虑在视图中使用鉴别器列模拟[单个表继承。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#single-table-inheritance)

# mysql - mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 13 行的 C:\xampp\htdocs\LoginRegister\core\functions\users.php 中给出

> ID：15592759
> 
> 赞同：0
> 
> 时间：2013-03-23T22:20:57.067
> 
> 标签：mysql

请帮助我在php中的新手

这是第 13 行

```
$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE `user_id` = $user_id")); 
```

这是我的代码

```
<?php
function user_data($user_id) {
    $data = array();
    $user_id = (int)$user_id;

    $func_num_args = func_num_args();
    $func_get_args = func_get_args();

    if ($func_num_args > 1) {
        unset($func_get_args[0]);

        $fields = '`' . implode('`,`', $func_get_args) . '`';
        $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE `user_id` = $user_id"));

        print_r($data);

        return $data;
    }
}

function logged_in() {
    return (isset($_SESSION['user_id'])) ? true : false;
}

function user_exists($username) {
    $username = sanitize($username);
    return (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username'"), 0) == 1) ? true : false;
}

function user_active($username) {
    $username = sanitize($username);
    return (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `active` = 1"), 0) == 1) ? true : false;
}

function user_id_from_username($username) {
    $username = sanitize($username);
    return mysql_result(mysql_query("SELECT `user_id` FROM `users` WHERE `username` = '$username'"), 0, 'user_id');
}

function login($username, $password) {
    $user_id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    return (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'"), 0) == 1) ? $user_id : false;
}   
?> 
```

请帮忙 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:27:35.210

因此，您的失败查询`mysql_query()`返回`FALSE`而不是导致`mysql_fetch_assoc`失败的资源。

始终检查返回值，然后再将其传递给`mysql_fetch_assoc()`

```
$result = mysql_query("SELECT...");
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

> 请注意，不要将 mysql_* 函数用于新代码。它们已被[弃用](http://php.net/manual/en/intro.mysql.php)。对 [PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)使用 [准备好的语句](http://goo.gl/vn8zQ)。这是很好的[PDO 教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:52:26.810

你的代码：

```
$data = mysql_fetch_assoc(mysql_query(..... 
```

永远不要这样做。将两个数据库函数放在同一行代码中，其中一个只是将其结果直接传递给另一个。

通过这种方式，您完全忽略了`mysql_query()`可能出现错误的可能性。

这正是您的情况。在进行查询时由于某种错误而`mysql_query()`返回。`false`您没有检查错误，而只是将该结果传递给`mysql_fetch_assoc()`. 所以现在该函数被赋予了一个`false`值而不是 mysql 结果，这就是错误消息的全部内容。

您绝对*必须*将这两个调用放在不同的代码行中，并在它们之间进行一些错误检查。

发生的实际错误可能是由多种原因引起的，但是由于您已经丢弃了`mysql_query`正在生成的错误，我们无法确定问题是什么。在那里进行正确的错误检查将帮助您解决问题。

但是，一些可能的原因：

*   您在没有任何其他参数的情况下调用了该函数，除了`userID`. 这将导致`$fields`被设置为一对空的反引号 ``，这将是无效的 SQL。
*   其中一个字段的字段名中有一个反引号。您没有对此进行检查，但字段名中的反引号会破坏您的 SQL 代码。这很危险，可能会导致黑客入侵您的网站。
*   数据库连接无效或断开。这可能是您代码中其他地方的问题（在这种情况下，您可能还需要在其他地方添加更好的错误检查），或者完全在您的代码之外（即如果数据库本身已关闭；不太可能，但可能；您的代码需要能够应对，如果它发生）。

最后，既然你说你是 PH​​P 的新手，我应该告诉你所有的`mysql_xxx()`函数都被弃用了；不再推荐使用它们。

我强烈建议您现在停止使用它们，以免遇到太多代码并且难以更改，因为它们将从 PHP 的未来版本中删除，并且使用它们的代码将停止工作。

相反，您应该考虑使用该`PDO`库。这是一个现代的 PHP 数据库库，它具有一整套功能，这些功能在旧`mysql_xxx()`功能中根本不可用。[您可以在此处](https://phpbestpractices.org/)和此处找到更多信息。您还应该在这里阅读这个问题的答案：[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

希望有帮助。

# asp.net - ASP.NET 中的 GridView 控件显示来自 DataSet 的数据，但 Columns 集合为空，因此无法访问/更改任何属性

> ID：15592760
> 
> 赞同：1
> 
> 时间：2013-03-23T22:21:15.690
> 
> 标签：asp.net, data-binding, gridview

我在 4.5 框架上的 VS2012 中自学 C# 并喜欢它，但这（继续）让我感到困惑，所以如果我遗漏了一些明显的东西，我深表歉意。我做了一些新的测试（自我最初的帖子 3/23 以来），现在更加困惑。

我在名为reviews.xsd 的项目中添加了一个DataSet 项。

我以编程方式使用 Review 表中的所有数据填充 DataSet，然后将两个新字段添加到 Columns 集合中，然后使用 EntityFramework 加入 Book 表以添加这两个新字段的数据。我以编程方式将 GridView 控件 (dgvReviews) 链接到这个填充的 DataSet，当我打开页面时，一切都显示得很好，因此所有数据填充到 DataSet 中，链接的 GridView 控件运行良好。

但是，GridView 控件的 Columns 集合奇怪地是 EMPTY，因此我无法更改列的样式或使用 Visible 属性隐藏或显示它们。填充 GridView 的 DataSet 的 Columns 集合是完整的，这些值可以正常访问。

我已经设置了许多 Watches 来查看 GridView 控件的其他属性，它们似乎正在正常填充：例如，Rows 集合通过 Watch 窗口显示值，但对 Columns 集合的所有访问都显示“枚举没有产生结果” 即使数据全部正确显示（当我不尝试在代码中显式访问 Columns 集合时）。

我是一个初级程序员，所以任何建议都将不胜感激。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
    // create reviews dataset, populate with standard data from Review table
        reviews reviewDataSet = new reviews();
        reviewsTableAdapters.reviewTableAdapter reviewDataAdapter = new reviewsTableAdapters.reviewTableAdapter();
        reviewDataAdapter.Fill(reviewDataSet.review);
        reviewDataSet.review.Columns.Add("bookName", typeof(string));
        reviewDataSet.review.Columns.Add("bookDescription", typeof(string));
        reviewDataSet.review.Columns["bookName"].SetOrdinal(3);
        reviewDataSet.review.Columns["bookDescription"].SetOrdinal(4);

        // use EF to populate data from Book table into new bookName and bookDescription fields
        bookReviewsEntities bookConnection = new bookReviewsEntities();
        foreach (reviews.reviewRow reviewEntry in reviewDataSet.review)
        {
            int bookNumber = reviewEntry.bookID;
            var bookLookup = (from book in bookConnection.books
                              where book.bookID == bookNumber
                              select book).ToList();
            reviewEntry.BeginEdit();
            reviewEntry["bookName"] = bookLookup[0].title;
            reviewEntry["bookDescription"] = bookLookup[0].description;
            reviewEntry.EndEdit();
        }
        bookConnection.Dispose();

        // next 2 lines verify the Columns collection of the DataSet is working fine
        string test1 = reviewDataSet.review.Columns[0].ToString();
        string test2 = reviewDataSet.review.Columns[1].ToString();

        dgvReviews.DataSource = reviewDataSet.review;
        dgvReviews.DataBind();

        // everything runs and displays normally if next line is commented out
        dgvReviews.Columns[0].Visible = false; // crashes with "index out of range" since "Columns" collection is empty
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:48:37.453

为了使 Columns 属性可以访问，您需要在 GridView 声明中列出您的列，如下所示，并使用 AutoGenerateColumns="false" 禁用列的自动生成

```
<Columns>
    <asp:BoundField DataField ="Id" />
    <asp:BoundField DataField ="First" />
    <asp:BoundField DataField ="LastName" />
</Columns> 
```

自动生成列时，您无法访问 Columns 属性。

# c++ - var++ 或 var--不是线程安全的？

> ID：15592761
> 
> 赞同：3
> 
> 时间：2013-03-23T22:21:32.217
> 
> 标签：c++, thread-safety, increment, nonblocking

在 C++ 中，我觉得我一直被引导相信像 var++ 和 var- 这样的东西是合理的线程安全的 - 又名 - 你可以保证你的价值会在某个时间点增加或减少。

正是基于这种信念，我建立了对线程安全操作的非阻塞算法的理解。然而，今天我很震惊，因为我有一个变量没有增加——因此我质疑我过去大量工作的有效性。

在一个小程序中，我有一个初始化为0的全局变量。启动了8个P-Threads，每个调用varname++共1024次，总计8*1024增量。然而，在所有线程执行完毕后，varname 的值明显小于 8*1024。

我错过了这里的船吗？有人可以启发我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:26:03.630

究竟是什么让你相信那些线程安全的？一般来说，他们不是。原因很简单：算术通常是在寄存器上完成的，因此`var++`可能会转换为如下所示：

```
load var to R1
inc R1
store R1 to var 
```

如果另一个线程`var`在加载和存储之间进行了修改，您显然会丢失该更新。实际上这个问题会更糟，因为编译器可以决定将变量保存在寄存器中，只要它想要（只要它可以证明它`var`不是通过任何指向它的指针访问的（在同一线））。

让多个线程访问同一个变量被（C++11）标准定义为数据竞争（因此是未定义的行为），除非没有线程修改变量（如果所有线程都只进行读取访问，你很好） .

对于线程安全操作，您需要使用锁定（例如`std::mutex`在 C++11 中使用）或原子操作。如果您使用 C++11，您可以使用`std::atomic<int>`（或您的计数器的任何类型）作为`var`获取线程安全修改的类型。（算术）操作`std::atomic<T>`（如递增和递减运算符）被标准保证是线程安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T22:23:59.983

C++ 的前置和后置增量运算符*不是*线程安全的。

这里有类似的问题： [我听说 i++ 不是线程安全的，++i 是线程安全的吗？](https://stackoverflow.com/questions/680097/ive-heard-i-isnt-thread-safe-is-i-thread-safe)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T22:24:18.877

是的，你错过了一些东西——即你的读写不是原子的。因此，许多线程可以读取该值，然后将其递增，然后将其写回，如果这些操作都“并行”发生，则该值只会递增 1。

您可以使用 C++11（或 Boost 的）std::atomic 类型包装器来解决此问题，如下所述：http: [//en.cppreference.com/w/cpp/atomic/atomic](http://en.cppreference.com/w/cpp/atomic/atomic)

# python - 使用 Django Rest Framework API 删除相关模型

> ID：15592764
> 
> 赞同：4
> 
> 时间：2013-03-23T22:21:51.977
> 
> 标签：python, django, django-rest-framework

当我使用 Django Rest Framework 删除用户时，关联的 UserProfile 对象也会被删除。我希望反向关系也是正确的。我怎样才能做到这一点？

我有一个代表用户个人资料的 Django 模型。

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, related_name='profile')
    preferred_name = models.CharField(max_lengths=100)
    #other fields here 
```

以下是我的看法：

```
class UserDetail(generics.RetrieveUpdateDestroyAPIView):
    """ 
    API endpoint that represents a single user.
    """
    model = User
    serializer_class = UserSerializer

class UserProfileDetail(generics.RetrieveUpdateDestroyAPIView):
    """ 
    API endpoint that represents a single UserProfile
    """
    model = UserProfile
    serializer_class = UserProfileSerializer 
```

和序列化程序：

```
class UserSerializer(serializers.HyperlinkedModelSerializer):
    profile = serializers.HyperlinkedRelatedField(view_name = 'userprofile-detail')

    class Meta:
        model = User
        fields = ('url', 'username', 'email', 'profile')

class UserProfileSerializer(serializers.HyperlinkedModelSerializer):

    class Meta:
        model = UserProfile
        fields = ('url', 'preferred_name', 'user') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T17:23:42.093

您可以在 UserProfile 类中覆盖删除方法，如下所示：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, related_name='profile')
    preferred_name = models.CharField(max_lengths=100)
    #other fields here
    def delete(self, *args, **kwargs):
        self.user.delete()
        super(UserProfile, self).delete(*args, **kwargs) 
```

# cakephp - CakePHP html 帮助图像链接

> ID：15592767
> 
> 赞同：1
> 
> 时间：2013-03-23T22:21:58.207
> 
> 标签：cakephp, html-helper

在 Cake 中，我们可以像这样在 image() 中添加 url：
`$this->Html->image('image src...', array('url' => 'some address...');`
输出为：
`<a href="some address..."><img src="image src..." /></a>`。

如何将类和其他属性添加到`a`标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T00:04:16.750

```
echo $this->Html->link(
    $this->Html->image($imageSrc, array(
        'class'=>'class_of_image',
        'height' => '50',
        'width' => '100',
        'alt' => 'awesome close-up of me eating pizza'
    )),
    array(
        'controller' => 'your_controller',
        'action' => 'the_action'
    ),
    array(
        'class' => 'class_of_anchor',
        'escape' => false //to allow the image tag within the link
    )
); 
```

随意将它的任何/所有部分写成一行 - 但出于 StackOverflow 的原因，这样阅读更容易。

# java - 松香阈值（单峰阈值）JAVA

> ID：15592769
> 
> 赞同：0
> 
> 时间：2013-03-23T22:22:10.007
> 
> 标签：java, image-processing, threshold

我必须在 JAVA 中为我的项目做很多图像过滤器（你能想象到的）（我使用 JAVA JAI）。除了 Paul L. Rosin 的单峰阈值，我已经完成了所有工作。我在[c++上只找到了这个](http://users.cs.cf.ac.uk/Paul.Rosin/resources/unimodal/)[文档](http://users.cs.cf.ac.uk/Paul.Rosin/resources/papers/simple2.pdf)和实现。不幸的是，我在 C++ 中很糟糕。你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T02:08:08.077

只需使用[Catalano 框架](https://code.google.com/p/catalano-framework/)。这非常容易和快速。示例文件夹中有很多示例。

```
import Catalano.Imaging.Filters;
// If you want to use parallel processing. Change the namespace for:
// import Catalano.Imaging.Concurrent.Filters;

FastBitmap fb = new FastBitmap(bufferedImage);
fb.toGrayscale();

RosinThreshold rosin = new RosinThreshold();
rosin.applyInPlace(fb); 
```

# eclipse - JavaFX 在 Eclipse 中无法识别

> ID：15592775
> 
> 赞同：13
> 
> 时间：2013-03-23T22:22:40.777
> 
> 标签：eclipse, javafx

JavaFX 应该包含在最新版本的 JDK 中。我正在使用 1.7 v 17。导入如下：

```
import javafx.fxml.Initializable; 
```

不被认可。我宁愿不必手动链接到 jar。

之前听说这是个bug，但应该已经修复了。[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166330](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7166330)

有没有人知道如何识别 javafx。我不想让 e(fx)clip 为我做这件事，我也不想链接 jar。据我了解，它现在包含在最新版本的 jdk 中，因此我应该能够像上面那样进行导入，对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T22:41:43.403

JavaFX 不在 JDK7 中的任何默认类路径上 - 请查看在哪个版本中修复了该错误！

在 JDK8 中，这是固定的，JavaFX 在 ExtensionClasspath 上，但您仍然会从 Eclipse 收到警告，因为扩展类路径上的内容被视为实现细节 - 您可以在 JRE-Runtimes 中自行修复。

e(fx)clipse 有什么问题？无论您是针对 JDK7 还是 JDK8 开发，它都能解决您的所有问题？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-26T02:32:48.913

在 Ubuntu 14.10 上，我必须先安装 openjfx

```
sudo apt-get install openjfx 
```

然后我使用 e(fx)clipse 和默认的 JRE (java-8-openjdk-amd64) 创建了一个默认项目。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-28T21:10:04.783

您可以手动添加“jfxrt.jar”！它在安装的JDK中。例子：

*   Windows XP：“ **C:\Program Files\Java\jdk1.7.0_17\jre\lib\jfxrt.jar** ”
*   Windows 7（32 位）：“ **C:\Program Files (x86)\Java\jdk1.7.0_17\jre\lib\jfxrt.jar** ”
*   Windows 7（64 位）：“ **C:\Program Files\Java\jdk1.7.0_17\jre\lib\jfxrt.jar** ”

复制jar文件，放到项目的子文件夹下（例如/lib）。

现在将“jfxrt.jar”添加到类路径中。在项目上单击鼠标右键，然后从 Properties -> Java Build Path -> Libraries -> Add JARs from ... 中选择并添加 jar 文件。

# python - 鸭嘴兽的奇怪问题（从脚本制作 .app 包）

> ID：15592781
> 
> 赞同：1
> 
> 时间：2013-03-23T22:23:25.997
> 
> 标签：python, osx-mountain-lion, platypus

我给自己写了一个小 Python 脚本，我想用它来自动处理某些类型的文件；因此，我想从中创建一个`.app`，以便我可以将某些文件设置为自动打开。

所以我环顾四周，发现鸭嘴兽似乎可以满足我的需要。

然而，奇怪的是它不起作用。具体来说，它似乎没有找到正确的 python 解释器。我设置如下：

![在此处输入图像描述](../Images/449474ae661ae665c6dbfbdf52257293.png)

即，脚本类型是`env`这样的，它应该像 shell 一样读取文件的顶行。

在`magic.py`中，顶行是`#!/usr/bin/env python2.7`。

现在，当我在命令行（即`~/devel/magic.py whatever`）上运行 shell 脚本时，一切正常。但是当我运行该应用程序时，它会出错：

```
Traceback (most recent call last):
  File "/Users/jan/Dropbox/devel/Magic.app/Contents/Resources/script", line 8, in <module>
    from bencode import *
ImportError: No module named bencode 
```

从命令行运行时，相同的导入工作得很好，所以我认为它以某种方式使用了错误的解释器。我该如何修复或调试这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:26:57.993

您正在尝试从`bencode`模块导入，但没有将其添加到应用程序的捆绑资源中。将其拖到包含文件列表并再次导出，或者将其复制到包内容中的资源文件夹中。

# knockout.js - 通过淘汰赛使子对象可观察的最佳方法？

> ID：15592783
> 
> 赞同：0
> 
> 时间：2013-03-23T22:24:01.977
> 
> 标签：knockout.js

通过淘汰赛使子/孙对象可观察的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:48:16.660

你有没有研究过[敲除映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，它可以自动将 JS/JSON 转换为 observables，一路向下。

# php - $this->load->view() 与包含在 Codeigniter 中

> ID：15592786
> 
> 赞同：0
> 
> 时间：2013-03-23T22:24:22.140
> 
> 标签：php, codeigniter

**使用普通的包含函数在 codeigniter 中包含视图而不是使用 $this->load->view() 有什么问题吗？**

在明显的广告上。使用包含时，我认为不需要以数组的形式将数据传递给视图。所以不要这样做：

```
$data['text'] = 'This is home page';
$this->load->view('home',$data); 
```

我可以这样做：

```
$text = 'This is home page';
include APPPATH. 'views/home.php'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:39:42.417

只需查看 CORE 库即可了解`view()`方法的作用。为什么使用它而不是`include`. 基本上它还包括文件，但首先它检查路径，如果文件存在，调试功能，记录错误也使用第二和第三选项，您可以返回文件内容而不是简单地打印出来。框架是为了让编程更有条理，更省力。

# java - 在屏幕顶部显示按钮或图像

> ID：15592787
> 
> 赞同：1
> 
> 时间：2013-03-23T22:24:24.080
> 
> 标签：java, android, android-layout

我正在开发一个 Android 项目，我需要在其中显示`Button or ImageView`我的活动（屏幕）的标题。下面是我的活动的 XML 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/app"
    android:layout_width="1dp"
    android:layout_height="1dp"
    android:layout_margin="2px"
    android:orientation="vertical"
    android:padding="2px" >

    <LinearLayout
        android:id="@+id/tabBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/BtnSlide"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="0px"
            android:padding="0px"
            android:src="@drawable/button" />

    </LinearLayout>

</LinearLayout> 
```

使用上面的布局，我可以在标题`button image`下方看到我的黑色。`Proximity`是否可以显示我`button image`的左侧`Proximity`而不是在接近下方显示一行？

![在此处输入图像描述](../Images/492f41fe3b13c34ffe12833c6c329132.png)

**或者**

有什么办法可以让`image which is left to Proximity`标题可以点击吗？如果我能做到这一点，那么我不需要在顶部显示黑色按钮图像。

该图像来自 AndroidManifest.xml 文件。我不知道如何使它可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:30:40.660

> 使用上面的布局，我可以在 Proximity 标题下方看到我的黑色按钮图像。是否可以在 Proximity 左侧显示我的按钮图像，而不是在 Proximity 下方显示一行？

由于 Proximity 在标题栏中，您需要创建自己的自定义标题栏才能将按钮放置到标题栏。这是[`example`](https://stackoverflow.com/questions/5681081/android-adding-button-to-custom-title-bar)实现它的方法。

也试着想想[`ActionBar`](http://www.vogella.com/articles/AndroidActionBar/article.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:31:41.283

试试这个

```
Button b=new Button(context);

    View v = findViewById (android.R.id.title);  // Getting the title bar view
     v.addView(b);    // setting Button
    v.setClickable(true);
    v.setOnClickListener(new OnClickListener() {
        @Override public void onClick(View v) {
            Toast.makeText(context, "You have clicked on Title", Toast.LENGTH_SHORT).show();
        }
    }); 
```

我怎么会建议你使用`ActionBar`

注意：我没有尝试过。让我知道它是否适合你

# javascript - 似乎在 getJSON 上没有收到任何响应

> ID：15592789
> 
> 赞同：0
> 
> 时间：2013-03-23T22:24:46.800
> 
> 标签：javascript, json, node.js, jsonp

我将 jsonp 请求发送为：

```
var jsoncallback = "?jsoncallback=?"
$.getJSON( reportURL + jsoncallback, {
    tags: "",
    tagmode: "any",
    format: "json"
    })
    .done(function( data ) {
        $.each( data.items, function( i, item ) {
          alert( item );
        });
    }); 
```

我已发出警报以查看请求是否有效。在服务器端，在节点 js 文件中，我将请求响应为：

```
..
console.log("request received");
response.writeHead( 200, { "Content-Type": "application/json" } );
..
response.end(); 
```

在日志中，我可以看到请求已收到。问题是没有弹出警报窗口。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:19:40.193

> 我只是 reponse.writeHead(...) 和（出于测试原因 - 只是开头和结尾） response.end()

在`jsoncallback=?`URL 中，jQuery 期望 JSONP`<script>`作为响应。为此，服务器至少应该写出“*填充*”。

这是对名为的函数的调用`jsoncallback`。而且它不仅仅是`?`——jQuery 用一个伪随机函数名替换了它`jQuery1910123456789_0123456789`。为此，响应至少应该是：

```
jQuery1910123456789_0123456789(); 
```

您需要从以下位置获取值`request.url`：

```
var parsedUrl = url.parse(request.url, true);
var query = parsedUrl.query || {};

if ('jsoncallback' in query) {
    response.write(query.jsoncallback + '();');
}
// ... 
```

而且，一旦你必须`data`用它输出：

```
if ('jsoncallback' in query) {
    response.write(query.jsoncallback + '(' + JSON.stringify(data) + ');');
} else {
    response.write(JSON.stringify(data));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:34:20.857

您是否确认 JSON 格式正确？[对照http://jsonlint.com/](http://jsonlint.com/)检查它。

从[getJSON() 文档](http://api.jquery.com/jQuery.getJSON/)：

> 从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。

# iis-7 - 网站的 IIS_IUSRS 身份

> ID：15592792
> 
> 赞同：4
> 
> 时间：2013-03-23T22:25:04.087
> 
> 标签：iis-7

我正在使用 IIS7 来托管一个 asp.net 2.0 站点。但是，每当我浏览它时，我都会收到错误消息

```
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

现在我意识到这是因为`IIS_IUSRS`无法访问 web.config。我的问题是如何授予访问权限`IIS_IUSRS`

当我查看应用程序池并检查身份时。表明

```
ApplicationPoolIdentity(default), LocalService, LocalUser and Network Service 
```

但是，我似乎找不到`IIS_IUSRS`

我在哪里可以找到它

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T22:53:39.817

[IIS_IUSRS](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)实际上是一个 Windows 组，因此您不会在 IIS 的应用程序池下找到它。

如果您需要授予该组访问权限，则需要通过文件系统完成，例如，您可以转到部署 ASP.NET 应用程序的文件夹并授予该组权限：

![添加 IIS_IUSRS](../Images/7c43c3909a4cbb119827475020c38dfd.png)

# objective-c - 尝试在 NSTimer 上传递数据时应用程序崩溃

> ID：15592793
> 
> 赞同：0
> 
> 时间：2013-03-23T22:25:18.857
> 
> 标签：objective-c, macos, cocoa, nstimer

我有以下代码在 5 秒后传递特定 ID：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:[NSNumber numberWithInteger:currentID] forKey:@"ID"];
timer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(checkID:) userInfo:dict repeats:NO];

- (void)checkID:(NSTimer*)t{
    NSInteger timerID = [[[t userInfo] objectForKey:@"ID"] integerValue];
    if (timerID == _myID){
       NSLog(@"got ID");
    }
} 
```

但我的应用程序只是在计时器结束后崩溃。有任何想法吗？我四处寻找帮助，但我只能找到上面的代码，显然它适用于其他人。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:41:25.400

我测试了你的代码，它在这里工作，但没有“计时器”属性。

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:[NSNumber numberWithInteger: currentID ] forKey:@"ID"];
[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(checkID:) userInfo:dict repeats:NO]; 
```

我认为在这种情况下您不需要“计时器”属性。

# php - 如何使用 Javascript 收集展示次数

> ID：15592804
> 
> 赞同：-2
> 
> 时间：2013-03-23T22:26:03.907
> 
> 标签：php, javascript, impressions

我想制作一些脚本（如一些广告）来收集用户网站上的印象（视图）。

有谁知道这行得通？我知道我应该放置一些应该以某种方式将数据发送到我的网站的脚本代码，但我不确定它背后的逻辑是什么？它是否将数据发送到另一个文件，该文件使用 Ajax 调用某些脚本，或者有一些更简单的逻辑？

我想从头开始，而不是为此使用谷歌分析。

谢谢大家的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:33:17.160

这里有两个建议：

[Open Web Analytics](http://wiki.openwebanalytics.com) - 一个开源框架，可让您设置自己的 PHP 服务器并使用开箱即用的 JS 客户端进行报告

[How To Create Your Own Stats Program (JavaScript, AJAX, PHP)](http://www.noupe.com/php/how-to-create-your-own-stats.html) - 一个很好的示例，可让您了解如何从头开始构建简单的解决方案。

# javascript - 将 JSON 数组从 Django 视图返回到模板

> ID：15592811
> 
> 赞同：29
> 
> 时间：2013-03-23T22:26:32.280
> 
> 标签：javascript, python, django, json

我正在使用 Django 为项目创建基于 Web 的应用程序，并且遇到了将数组从 Django 视图返回到模板的问题。

JavaScript (JQuery) 脚本将使用该数组在页面中显示的图像上绘制框。因此，除其他外，该数组将具有要绘制的框的坐标。

这是 Django 视图中用于获取所需数据并将其序列化为 JSON 的代码：

```
def annotate(request, ...):
    ...
    oldAnnotations = lastFrame.videoannotation_set.filter(ParentVideoLabel=label)
    tags = serializers.serialize("json", oldAnnotations)
    ...
    return render_to_response('vannotate.html', {'tags': tags, ...}) 
```

作为一种调试方式，`{{ tags }}`在模板的 HTML 部分中使用会将其作为输出（对不起，很长的一行）：

```
[{"pk": 491, "model": "va.videoannotation", "fields": {"ParentVideoFile": 4, "ParentVideoFrame": 201, "ParentVideoLabel": 4, "top": 220, "height": 30, "width": 30, "ParentVideoSequence": 16, "left": 242}}, {"pk": 492, "model": "va.videoannotation", "fields": {"ParentVideoFile": 4, "ParentVideoFrame": 201, "ParentVideoLabel": 4, "top": 218, "height": 30, "width": 30, "ParentVideoSequence": 16, "left": 307}}] 
```

我认为这是 JSON 数组的正确格式。

稍后在模板中，我尝试在模板`tags`的 JavaScript 部分中实际使用该变量，如下所示：

```
{% if tags %}
  var tagbs = {{ tags|safe }};
  var tgs = JSON.parse(tagbs);
  alert("done");
{% endif %} 
```

如果我删除该`var tgs = JSON.parse(tagbs);`行，则会弹出警告框，并且 JavaScript 的其余部分按预期工作。然而，留下这一行会破坏脚本。

我希望能够遍历 Django 模型中的所有对象并获取 JavaScript 中字段的值。

我不确定我在这里做错了什么，有人可以指出正确的方法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-23T22:36:34.427

**编辑 Django 2.1+ 和现代网络的更新：**

这样做的现代方法是：

1) 将原始数据传递给模板，而不是 JSON 序列化数据。IE：

```
def annotate(request, ...):
    ...
    oldAnnotations = lastFrame.videoannotation_set.filter(ParentVideoLabel=label)
    ...
    return render_to_response('vannotate.html', {'tags': oldAnnotations, ...}) 
```

2) 在您的模板中，使用新的“json_script”过滤器来包含 JSON 数据：

```
{{ tags|json_script:"tags-data" }} 
```

这将产生如下所示的 HTML：

```
<script id="tags-data" type="application/json">{"foo": "bar"}</script> 
```

该标签对包含“</script>”的字符串进行了特殊处理，以确保它们正常工作。

3) 在您的 Javascript 代码中，获取标签数据，如下所示：

```
var tags = JSON.parse(document.getElementById('tags-data').textContent); 
```

4) 将您的 Javascript 代码移动到外部 .js 文件，并设置 Content-Security-Policy 标头以禁止内联 Javascript，因为它存在安全风险。请注意，由于 json_script 标记生成 JSON，而不是 Javascript，因此它是安全的，并且无论您的 Content-Security-Policy 设置如何都是允许的。

**原答案：**

**警告：如果任何字符串是用户控制的，这是不安全的**

JSON*是*Javascript 源代码。即数组的JSON 表示是定义数组所需的Javascript 源代码。

所以之后：

```
var tagbs = {{ tags|safe }}; 
```

`tagbs`是一个包含你想要的数据的 JavaScript 数组。无需调用 JSON.parse()，因为 Web 浏览器已经将其解析为 JavaScript 源代码。

所以你应该能够做到

```
var tagbs = {{ tags|safe }};
alert(tagbs[0].fields.ParentVideoFile); 
```

那应该显示“4”。

**警告：使用这种旧方法，包含“</script>”的字符串将不起作用，它们会出错。这是因为浏览器会将 </script> 视为脚本的结尾。如果任何字符串是用户输入的数据，则这是一个可利用的安全漏洞 -[请参阅此处的评论 14 了解更多详细信息](https://code.djangoproject.com/ticket/17419#comment:14)。请改用上面更现代的方法。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T22:36:24.250

*您想对模板中*的数据进行 JSON 化；JSON 实际上已经是 Javascript（它是一个子集：

```
{% if tags %}
  var tgs = {{ tags }};
{% endif %} 
```

请注意，这`tags`已经是 JSON（因此是 JavaScript）数据，可以直接*插入*；无需转义（这里没有 HTML，而是 JavaScript）。

或者您可以使用这个[Django 片段](http://djangosnippets.org/snippets/201/)并直接在模板中执行（无需`serializers.serialize`在`annotate`方法中调用）：

```
var tgs = {{ tags|jsonify }}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T23:47:05.100

您也可以使用`simplejson`from `django.utils`。像：

```
oldAnnotations = lastFrame.videoannotation_set.filter(ParentVideoLabel=label)
dump = simplejson.dumps(oldAnnotations)

return HttpResponse(dump, mimetype='application/json') 
```

您可以从 JS 端解析和访问其中的所有数据。

# memory - 汇编列表文件中的内存偏移量

> ID：15592812
> 
> 赞同：0
> 
> 时间：2013-03-23T22:26:34.487
> 
> 标签：memory, assembly

我正在尝试学习汇编，并从汇编代码/列表文件（对于 x86 32 位）中获得以下片段：

![在此处输入图像描述](../Images/8dff0e51c1e7106605f1196f60ef072d.png)

谁能解释为什么列表文件部分的第 50 行的内存偏移量为 11？我觉得应该是 17，因为第一个字符串占用 17 个字节。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:28:18.127

这些内存偏移量是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)的。

17 十进制 = 0x11（十六进制）

几乎任何时候您在计算机中处理地址时，它们都会以十六进制显示。由于 16 是 2 的幂，因此它比以 10 为底更有意义。

# postgresql-9.1 - POSTGRES 错误：无法加载库

> ID：15592814
> 
> 赞同：4
> 
> 时间：2013-03-23T22:26:37.813
> 
> 标签：postgresql-9.1

我无法对我的数据库执行任何操作。我得到的错误是：

“错误：无法加载库“C：/Program Files/PostGreSQL/9.1/lib/postgis-2.0.dll”：对内存位置的访问无效。”

该错误仅在今天早上弹出，直到昨天才出现。

在此先感谢您的帮助。:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:58:10.850

系统重启解决了这个问题。:D

# concurrency - 在 goroutine 中选择会评估所有其他语句

> ID：15592815
> 
> 赞同：6
> 
> 时间：2013-03-23T22:26:39.823
> 
> 标签：concurrency, go

在玩 Go 的频道和例程时，我遇到了一种奇怪的行为，我希望有人能解释一下。

下面是一个简短的程序，它应该通过通道将字符串发送到在单独的 goroutine 中运行的“侦听器”（select 语句），从而将几个字符串打印到标准输出。

```
package main

import (
    "fmt"
    "time"
)

func main() {
    a := make(chan string)

    go func() {
        for {
            select {
            case <-a:
                fmt.Print(<-a)
            }
        }
    }()

    a <- "Hello1\n"
    a <- "Hello2\n"
    a <- "Hello3\n"
    a <- "Hello4\n"        
    time.Sleep(time.Second) 
} 
```

使用

```
go func() {
    for s := range a {
        fmt.Print(s)
    }
}()

// or even simpler

go func() {
    for {
        fmt.Print(<-a)
    }
}() 
```

按预期工作。但是，使用 select 语句运行最上面的代码段会产生以下输出：

```
Hello2
Hello4 
```

即只打印所有其他语句。这是什么魔法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T22:32:15.057

在最上面的代码片段中，您从每个循环的通道中提取两个值。一个在 select 语句中，一个在 print 语句中。

改变

```
 select {
        case <-a:
            fmt.Print(<-a) 
```

至

```
 select {
        case val := <-a:
            fmt.Print(val) 
```

[http://play.golang.org/p/KIADcwkoKs](http://play.golang.org/p/KIADcwkoKs)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T22:33:58.913

```
<-a 
```

破坏性地从通道中获取值。因此，在您的代码中，您会得到两个值，一个在 select 语句中，一个用于打印。在 select 语句中收到的那个没有绑定到任何变量，因此会丢失。

尝试

```
select {
    case val := <-a:
        fmt.Print(val) 
```

相反，要仅获取一个值，请将其绑定到变量 val，然后将其打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T10:06:05.897

```
package main

import (
    "fmt"
    "time"
)

func main() {
    a := make(chan string)

    go func() {
        for {
            select {
            case v:= <-a:
                fmt.Print(v)
            }
        }
    }()

    a <- "Hello1\n"
    a <- "Hello2\n"
    a <- "Hello3\n"
    a <- "Hello4\n"

    time.Sleep(5*time.Second) 
} 
```

# php - 不受保护的mysql查询总是一个问题吗？

> ID：15592820
> 
> 赞同：-4
> 
> 时间：2013-03-23T22:27:12.763
> 
> 标签：php, mysql, code-injection

现在我正在使用 mysql 查询来检查用户是否存在，如果存在则重定向页面。没有任何内容被回显，并且重定向不涉及查询中的任何数据。我不知道哪里有风险，所以我只是想确保没有什么我不明白。谢谢！

```
if (mysql_num_rows(mysql_query("SELECT * FROM performers WHERE username='".$_GET['username']."' AND acct_type='group'")) > 0) {
        header('Location: gprofile.php?username='.$_GET['username']);
        exit();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:30:00.557

是的，绝对是一个问题。如果黑客确定他们的用户名是，`bob';drop table performers;--`那么你就有麻烦了。

始终**始终**使用[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)不受信任的数据（或为安全起见，任何数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:35:25.240

除了明显的 SQL 注入漏洞（DuncanNZ 已经描述）还有一个 CSRF 漏洞。

# java - 使用匹配器匹配范围内的所有内容？

> ID：15592822
> 
> 赞同：-1
> 
> 时间：2013-03-23T22:27:17.083
> 
> 标签：java, regex

如何使用 java matcher 匹配大海捞针范围内的所有字符。例如，如果针是 (AB)，我想找到在 5 个字符窗口内发生的完全匹配。因此， (ACCCB) 将是一个匹配项。5 个字符的子字符串应该是一个在整个干草堆中移动的滑动窗口。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:33:13.127

`A.{,5}B`可能是你想要的。即使我不是您所说的“5 个字符的子字符串应该是一个在整个干草堆中移动的滑动窗口”。

# swing - GUI 布局添加

> ID：15592824
> 
> 赞同：0
> 
> 时间：2013-03-23T22:27:37.990
> 
> 标签：swing, user-interface, layout, grid-layout

```
public void testDialog()
    {
        JPanel myPanel =  new JPanel(new GridBagLayout());
        GridBagConstraints grid = new GridBagConstraints();
        grid.gridx=0; //Moves Things across
        grid.gridy=0; //Moves things down
        myPanel.add(new JLabel("ENTER PLAYER NAMES", JLabel.CENTER), grid);
        grid.gridy++;
        JTextField tfNames [] = new JTextField[getNumOfPlayers()];
        //Loops through the number of players, initialising and adding a JLabel and JTextField to the JPanel
        for(int i=0;i < getNumOfPlayers();i++)
        {
            grid.gridx = 0;
            tfNames[i] = new JTextField(10);
            myPanel.add(new JLabel("Player " + (i+1), JLabel.CENTER), grid);
            grid.gridx ++;
            myPanel.add(tfNames[i], grid);
            grid.gridy+=1;
        }

        int result = JOptionPane.showConfirmDialog(null, myPanel,
               "Initial Dialog", JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null);
         //Declaring the array of strings which holds the players name
         playerNames = new String [getNumOfPlayers()];
        //If the 'OK' button is clicked loop through the number of players checking to see if all the JTextFields aren't empty
        //If they are recall this method otherwise store the input player names in the playerName array.
       if(result == JOptionPane.OK_OPTION)
       {
            for(int i=0;i < getNumOfPlayers();i++)
            {
                if(tfNames[i].getText().equals(""))
                {
                    testDialog();
                }
                else
                {
                    playerNames[i] = tfNames[i].getText();
                }
            }
       }
       //If 'Cancel' button is clicked go back to the previous dialog
       else if (result == JOptionPane.CANCEL_OPTION)
       {
            numPlayersDialog();
       }
       //If 'x' in top right hand corner of the screen is clicked go back to previous dialog
       else
       {
            numPlayersDialog();
       }
    } 
```

尝试设置此样式现在让我有些痛苦..想要将 Player1、Player2、Player3、Player4 JLabels 及其 JTextFields 居中。还将“输入玩家姓名”JLabel 居中，这似乎已经与更改中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:33:12.783

我可以建议嵌套布局（未经测试）吗？

```
-------------------------
|   panel with JLabel   |
-------------------------
| panel with GridLayout |
------------------------- 
```

# css - 如何使 WordPress style.css 作为 Stylus .styl 文件工作

> ID：15592825
> 
> 赞同：0
> 
> 时间：2013-03-23T22:27:50.663
> 
> 标签：css, wordpress, stylus, codekit

尝试将其用作 .styl 文件时，我遇到了 WordPress style.css 文件的问题。到目前为止，当我将它从 .css 更改为 .styl 时，来自 212 的 style.css 是唯一有效*的*。

因此，例如，当我将 style.css 从主题211或*ElegantThemes的**Nimble*复制粘贴到 .styl -文件时，它不会编译，并且我从 CodeKit 收到错误：

```
ParseError: /Applications/MAMP/htdocs/test/wp-content/themes/twentytwelve-child/style.styl:1454
   1450| }
   1451| article.feature-image.small .entry-summary p a {
   1452|   background: #222;
   1453|   color: #eee;
 > 1454|   display: block;
   1455|   left: -23.8%;
   1456|   padding: 9px 26px 9px 85px;
   1457|   position: relative;

expected "indent", got ";" 
```

如果我从它周围删除所有 CSS，错误只会跳转到另一行代码。如果我使用 css2stylus.com 从 CSS 制作 Stylus，我也会遇到类似的错误。

**所以对你们比我聪明的人来说：**

1.  如何调试 Stylus？有什么聪明的方法吗？如果它只是复制粘贴的 CSS，如果它被编译为 .styl 会怎样？
2.  除了使用使用 Stylus 和原始 CSS 制作的文件加载单独的文件之外，有什么方法可以通过不编译来使 style.css 文件正常工作？
3.  您是否认为 ie SASS 不太可能发生此类问题？

因此，对于任何使用 Stylus 和 WordPress 的人来说，分享一些想法会非常好！

非常感谢。

# android - 正确的 android Oauth2 库/框架

> ID：15592826
> 
> 赞同：15
> 
> 时间：2013-03-23T22:28:00.867
> 
> 标签：android, authentication, jar, request, oauth-2.0

我现在日以继夜地寻找合适的 OAuth2 库来用于我的 android 应用程序。

我遇到了很多，包括 apache amber（正式名称为 leeloo）和 android 开发人员指定的一个（[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)），这似乎是 deceperated。

然而，它们都没有工作，甚至没有与我的项目无错误地合并（即 jar 中缺少方法）。

因此我的问题是，是否有任何合适的 OAuth2 库可用于 android。我所需要的只是一个允许我检索身份验证代码的库，然后是允许自动处理请求的令牌调用。

非常感谢任何指向有趣项目（git 或 w/e）的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:31:52.053

我发现的最完整的库是[Scribe](https://github.com/fernandezpablo85/scribe-java)。我非常喜欢它，所以我把它包装起来让它更适合异步 android 交互。你可以在这里查看我的[PostmanLib](https://github.com/fedepaol/PostmanLib--Rings-Twice--Android)。它应该使异步交互和通过 webview 的身份验证更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:38:35.223

基于 Oltu（以前的 Amber）开发邮件列表，它也被用于 Android（至少是客户端部分）。

# javascript - checkValidity() 在 IE9 及更低版本中导致错误

> ID：15592827
> 
> 赞同：1
> 
> 时间：2013-03-23T22:28:01.333
> 
> 标签：javascript, forms, jquery

我`checkValidity()`在 ajax 表单提交中使用 jQuery，在表单有`select`元素之前一切正常。

例如，我有一个页面显示基于用户选择的行数的数据。（选择多少行数据）... 10、20、30等。这是页面上唯一的表格。他们选择，除了 IE 9 及更低版本之外的所有浏览器都很好。

这是导致错误的表单提交脚本中的行：

```
if (!$(this).get(0).checkValidity()) {return false;} 
```

在 IE 中产生的错误是：

> SCRIPT438：对象不支持属性或方法“checkValidity”

任何人都知道我该如何解决这个问题？在其他所有浏览器中都可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T22:30:44.850

> 我正在使用 jQuery 的`checkValidity()`...

[`checkValidity()`](https://developer.mozilla.org/en-US/docs/HTML/Forms_in_HTML#Constraint_Validation_API)不是 jQuery 方法，而是原生 DOM API 方法。你引用的代码...

```
if (!$(this).get(0).checkValidity()) {return false; 
```

...获取对本机 DOM 元素的引用（并且`$(this).get(0)`是多余的，可以简单地替换为`this`），然后`checkValidity()`在其上调用方法。

它在 IE9 及更低版本中失败，因为他们没有实现该方法。

# ember.js - 使用 cucumber 和 capybara-webkit 测试 ember.js 应用程序无法运行 ember 代码

> ID：15592832
> 
> 赞同：0
> 
> 时间：2013-03-23T22:28:18.673
> 
> 标签：ember.js, cucumber, capybara-webkit

尝试使用 Cucumber 和 Capybara-webkit 测试 Ember 应用程序以运行 javascript。Ember 代码在常规浏览器中运行，并生成欢迎消息。

我创建了一个 Cucumber 功能，它查找由 Ember 代码生成的欢迎消息，但它没有显示出来。我已经转储了“page.body”以查看那里有什么，但什么也没有。

我添加了一个

```
jQuery ->
  $("body").append("Foo!") 
```

它出现了，所以我知道 javascript 正在运行。

谢谢！

# python - 在 Windows ImportError 上安装 pymysql：无法导入名称 FIELD_TYPE

> ID：15592836
> 
> 赞同：1
> 
> 时间：2013-03-23T22:28:32.560
> 
> 标签：python, windows, pymysql

我正在尝试在**windows 64 位**上为**python 3.3设置****pymysql**。

 ****我设法使用**[https://pypi.python.org/pypi/distribute#downloads](https://pypi.python.org/pypi/distribute#downloads)**安装了 easy_install我做了一个**python Distribute_setup.py**然后**easy_install**开始工作。

现在每当我尝试做**easy_install pymysql**我得到

```
Downloading/unpacking pymysql
  Downloading PyMySQL-0.5.tar.gz
  Running setup.py egg_info for package pymysql
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "c:\users\cc\appdata\local\temp\pip-build-Cc\pymysql\setup.py", line 7, in <module>
        version_tuple = __import__('pymysql').VERSION
      File ".\pymysql\__init__.py", line 28, in <module>
        from constants import FIELD_TYPE
    ImportError: cannot import name FIELD_TYPE
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "c:\users\cc\appdata\local\temp\pip-build-Cc\pymysql\setup.py", line 7, in <module>

    version_tuple = __import__('pymysql').VERSION

  File ".\pymysql\__init__.py", line 28, in <module>

    from constants import FIELD_TYPE

ImportError: cannot import name FIELD_TYPE

----------------------------------------
Command python setup.py egg_info failed with error code 1 in c:\users\cc\appdata\local\temp\pip-build-Cc\pymysql
Storing complete log in C:\Users\Cc\pip\pip.log 
```

最初的错误是'could not import name 'constants'' 然后我运行了easy_install constants，现在错误是上面的那个。

**编辑** 仔细一看，我看到他们说python 3.3要做

```
echo "Building Python 3.0 version in ./py3k..."
rm -fr ./py3k
mkdir py3k
cp -rf pymysql py3k/
cp setup.py py3k/
cp setup.py.py3k.patch py3k/
cp CHANGELOG py3k/
cp README.rst py3k/
cp LICENSE py3k/
cd py3k
2to3 .|patch -p0
patch setup.py setup.py.py3k.patch
cd .. 
```

知道如何在 Windows 中执行此命令**2to3 .|patch -p0**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T21:17:06.837

我认为您正在安装 python2 版本。

试试这个：

easy_install pymysql3****

# flex-lexer - flex中的规则排除

> ID：15592837
> 
> 赞同：1
> 
> 时间：2013-03-23T22:28:43.167
> 
> 标签：flex-lexer

我正在尝试编写一个可识别`(-! comment !-)`为一个名为`comment`. 以下是我的文件：

```
%{
#include <stdio.h>

void showToken(char* name);
void error();
void enter();

int lineNum=1;
%}

%option yylineno
%option noyywrap

whitespace  ([\t ])
enter       ([\n])
startcomment (\(\-\!)
endcomment (\!\-\))
comment (^\!\-\))

%%

{startcomment}{comment}*{endcomment} showToken("COMMENT");
{enter} enter();
{whitespace}
.   error();

%%

void showToken(char* name){
    printf("%d %s %s %d% \n",lineNum,name, yytext); 
}

void enter(){
    lineNum++;
}

void error(){
printf("%d error %s \n",lineNum,yytext);
} 
```

但我因为一个简单的`(-! comment !-)`输入而失败了，这个文件确实可以识别`(-!`并且`!-)`无法识别我的`comment`规则。我确实尝试用它替换它，`comment (^{endcomment})`但它没有用，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:37:25.587

您似乎认为这`^`意味着以下模式不应该匹配，但它意味着匹配一行的开头。在字符类内部`^`确实意味着除了字符类之外的所有内容，但在字符类之外它的含义完全不同。

在回答您的问题时寻找替代方案。您的问题类似于 C-comment `/* comment */`。以下表达式匹配 C 注释：

```
"/*"([^*]|"*"+[^/*])*"*"+"/" 
```

或者更直观（如果您愿意），您可以使用子自动机：

```
%x comment
%%
"/*"              { BEGIN(comment); }
<comment>(.|"\n") { /* Skip */ }
<comment>"*/"     { BEGIN(INITIAL); }
%% 
```

我将把它作为练习应用到您的评论风格中。作为`!-)`评论的结束，使第一个解决方案变得更加复杂。

请注意，通常首选第二种解决方案，因为它不会导致使用大缓冲区。第一个解决方案将创建一个包含完整注释的缓冲区（可能很大），而第二个解决方案的缓冲区要求最多两个字符长。

维护行号的最简单方法是使用`%option yylineno`as`flex`然后跟踪变量中的行号`int yylineno`。或者，您可以计算`yytext`. 在第二个解决方案中，您可以拆分第二条规则并为`"\n"`那里的行号创建一个单独的案例并计算行号。

# php - 在 PHP 中删除空格

> ID：15592843
> 
> 赞同：3
> 
> 时间：2013-03-23T22:30:25.270
> 
> 标签：php, curl, whitespace

我正在处理一些我想删除的过多空白。一个例子：

```
Envelopes/Env. Thick/Env. Thin      0 pages

Label      0 pages

Hagaki      0 pages

Replace Count

Drum Unit      0

Toner      0 
```

我尝试过使用`preg_replace('/\s\s+/', ' ', $content);`，但结果不是我所期望的。preg_replace 的输出：
`Envelopes/Env. Thick/Env. Thin 0 pages Label 0 pages Hagaki 0 pages Replace Count Drum Unit 0 Toner 0`

我想要的是：

> 信封/信封。厚/环境。薄 0 页
> 标签 0 页
> Hagaki 0 页
> 更换计数鼓单元 0
> 墨粉 0

我的代码：

```
<?php

$cw=curl_init("http://192.168.1.135/printer/maininfo.html");
$txtfl=fopen("printermtpage.txt","w");

curl_setopt($cw, CURLOPT_FILE, $txtfl);
curl_setopt($cw, CURLOPT_HEADER, false);

curl_exec($cw);

curl_close($cw);

$file="printermtpage.txt";
$txtopentoread=fopen("printermtpage.txt","r");
$txtread=fread($txtopentoread,filesize($file));

$notags=strip_tags(html_entity_decode($txtread));
$remblanks=preg_replace('/\s\s+/', ' ', $notags);

fclose($txtfl);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:36:17.143

正则表达式`\s`匹配`[\r\n\f\t\v ]`，并且由于您不需要删除换行符（或班级中的其他人），您可以使用：

```
$remblanks=preg_replace('/[ \t]+/',' ',$notags); 
```

在这里解释演示：[http ://regex101.com/r/tS0vG7](http://regex101.com/r/tS0vG7)

## 更新

去除 2 个以上空白字符的高级正则表达式：

```
preg_replace('/(?|([ \t]){2,}|(?:\r?(\n)){2,})/','\1',$notags); 
```

在这里解释演示：[http ://regex101.com/r/nU4fU2](http://regex101.com/r/nU4fU2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:36:19.630

我认为问题在于也`\s`匹配换行符（`\n`）。因此，您将换行符转换为空格，有效地将它们全部放在一行上。

尝试使用[`\[:blank:\]`](http://www.php.net/manual/en/regexp.reference.character-classes.php)仅匹配空格和制表符。

# sql - 如何按列对表中的行进行排序（但不是 `SELECT` 的响应）？

> ID：15592845
> 
> 赞同：0
> 
> 时间：2013-03-23T22:30:39.413
> 
> 标签：sql, sorting, sqlite, multiple-columns

例如，我想订购一张这样的桌子

```
Foo | Bar
---------
 1  |  a
 5  |  d
 2  |  c
 1  |  b
 2  |  a 
```

对此：

```
Foo | Bar
---------
 1  |  a
 1  |  b
 2  |  a
 2  |  c
 5  |  d 
```

（按 Foo 列排序）

那是因为我只想选择具有给定 Foo 的 Bars，如果它已经被订购，我想它们会更快选择，因为我不必使用`ORDER BY`.

如果可能的话，一旦按 Foo 列排序，我想按 Bar 列对具有相同 Foo 的行进行排序。

当然，如果我`INSERT`还是`UPDATE`要表的话，应该保持有序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:41:06.293

在 SQL 中，表本质上是无序的。这是数据库的一个非常重要的特性。例如，您可以删除表中间的一行，当插入新行时，它会占用已删除行所占用的空间。这比仅将行附加到数据末尾更有效。

换句话说，该`order by`子句基本上仅用于输出目的。好的，我可以想到另外两种情况。. . with `limit`（或相关子句）和 with 窗口函数（SQLite 不支持）。

在任何情况下，对数据进行排序对于这样的查询也无关紧要：

```
select bar
from t
where foo = $FOO 
```

SQL 引擎不“知道”该表是有序的。因此，它将从表的开头开始，并对每一行进行比较。

提高效率的方法是在`foo`. 然后，您将能够获得您想要的效率。

# php - 如何在php中回显方括号

> ID：15592848
> 
> 赞同：0
> 
> 时间：2013-03-23T22:30:45.130
> 
> 标签：php, wordpress, echo, square-bracket

我想回显以下代码，但它不起作用：

```
<?php
if ( is_page('residenz') ) 
{ echo '[nggallery id=12]'; } 
else if ( is_page('apartment-royal-ii') ) 
{ echo '[nggallery id=13]'; } 
else if ( is_page('apartment-royal-iii') ) 
{ echo '[nggallery id=14]'; } 
else if ( is_page('apartment-royal-iv') ) 
{ echo '[nggallery id=15]'; } 
else if ( is_page('apartment-royal-v') ) 
{ echo '[nggallery id=16]'; } 
else { echo '[nggallery id=11]'; } 
?> 
```

我认为问题出在方括号中。

例如，我如何回显 [nggallery id=11]？

更多信息：

代码在 wordpress 小部件中执行。

这就是我修改小部件以接受 php 的方式：

```
add_filter('widget_text','execute_php',100);
function execute_php($html){
     if(strpos($html,"<"."?php")!==false){
          ob_start();
          eval("?".">".$html);
          $html=ob_get_contents();
          ob_end_clean();
     }
     return $html;
} 
```

编辑2：

我使用了它并且它有效：

```
<?php
if (1 == 1)
{?>
 [nggallery id=13]
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:38:24.313

使用以下代码回显数据：

```
<?php
echo htmlentities('[nggallery id=12]');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:41:03.587

方括号不需要转义。我认为您的条件评估为假。查看以下语句的输出：

```
var_dump(is_page['residenz']) 
```

# django - Django - 在覆盖我的表单的 __init__ 方法后在我的视图中使用 request.POST

> ID：15592849
> 
> 赞同：1
> 
> 时间：2013-03-23T22:30:50.607
> 
> 标签：django, forms, dynamic, views

我使用 ModelChoiceField 做一个动态表单，我想使用我的一个 DB 表的值来初始化它。问题在于，如果我在表单中覆盖 __ init __，那么我不能在我的视图中使用 request.POST，我需要它来验证和提取用户选择的选项。所以.. 在覆盖我的表单的 _ init __ 之后，有一些方法可以在我的视图中使用 request.POST 吗？

**表格**：

```
categoria_formfield = forms.ModelChoiceField(widget=forms.Select(attrs={'size':'13', 'onchange':'this.form.action=this.form.submit()'}), queryset=sitio_categoria.objects.none())

def __init__(self):
        super(anadirComercioPaso1_form, self).__init__()
        self.fields['categoria_formfield'].queryset = sitio_categoria.objects.exclude(categoria='patrimonio').values_list('categoria',flat=True) 
```

**VIEW**：（此代码引发 __ init __() 恰好采用 1 个参数（给定 2 个）错误。）

```
def panelComerciante_view(request):
        is_validated=False
        if request.method == 'POST':
            formulario_anadir_comercio_paso1 = anadirComercioPaso1_form(request.POST)
            if formulario_anadir_comercio_paso1.is_valid():
                is_validated=True
        else:
            formulario_anadir_comercio_paso1 = anadirComercioPaso1_form()
        return render_to_response('home/anadir_comercio_step1.html',{'formulario_anadir_comercio_paso1': formulario_anadir_comercio_paso1, 'pepe':pepe}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:10:24.497

编辑你的`__init__`所以它需要`*args`和`**kwargs`：

```
...

def __init__(self, *args, **kwargs):
    super(anadirComercioPaso1_form, self).__init__(*args, **kwargs) 
```

`request.POST`当你实例化你的表单类时，你现在应该可以正常传递了。

[在此处](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)阅读更多相关信息。

旁注：从技术上讲，Python 类名应该[大写](http://www.python.org/dev/peps/pep-0008/#class-names)而不是驼峰式 :)。

# android - setBackgroundColor(int color) 和 RelativeLayout

> ID：15592850
> 
> 赞同：2
> 
> 时间：2013-03-23T22:30:52.083
> 
> 标签：android, android-relativelayout, background-color

当我使用这个 XML 文件时......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FF0000"

tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:text="@string/hello_world" />

</RelativeLayout> 
```

..我看到背景颜色包装内容

[http://img716.imageshack.us/img716/8225/rlayout.jpg](http://img716.imageshack.us/img716/8225/rlayout.jpg)

但是如果我用代码写这个RelativeLayout......

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    RelativeLayout layout = new RelativeLayout(this);

    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    layout.setBackgroundColor(Color.parseColor("#FF0000"));

    TextView text = new TextView(this);
    text.setText("Hello world");

    //Añado texto
    layout.addView(text);

    layout.setLayoutParams(params);

    setContentView(layout); 
} 
```

...我看到背景颜色匹配父项而不是包装内容

[http://img404.imageshack.us/img404/1427/rlayoutfull.jpg](http://img404.imageshack.us/img404/1427/rlayoutfull.jpg)

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:40:19.273

你永远不会设置布局参数：

```
layout.setLayoutParams(params); 
```

我认为你应该放置：

```
TextView text = new TextView(this);
text.setText("Hello world"); 
```

以及在设置布局参数之前您将添加到布局中的所有其他视图，否则将没有内容可以环绕。

编辑：

设置时会发生什么：

```
tried to replace between the two:

 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
       RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

?

# c# - XNA 替代品

> ID：15592861
> 
> 赞同：4
> 
> 时间：2013-03-23T22:31:57.417
> 
> 标签：c#, visual-studio-2012, xna, .net-4.5

我最近切换到 VS2012，设法让 XNA4 项目工作，但后来我想知道 VS2012 是否不再支持（真的如此）并且 XNA 似乎是这样被遗弃的东西，如果有替代使用，那就是：

*   vs2012兼容，和net4.5，c#
*   不是太高水平（或写得好和优化）
*   XNA 后易于学习
*   自由

优先级来自上面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:38:07.027

你可以看看monogame

[http://www.monogame.net/](http://www.monogame.net/)

它基于 Mono，因此更容易从 Desktop/Windows Phone 移植，比如 XNA 也允许为 Android 和 iOS 编译（你需要为那些使用 Monodroid 和 monotouch 组件的人购买许可证，这些组件不是免费的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T22:37:44.320

我听说了[Monogame](http://www.monogame.net/)和[SlimDX](http://slimdx.org/)的好消息。但是 Monogame 可能是您正在寻找的。

# javascript - 在隐藏的 iframe 中下载文件：Comet 上下文中的 Android 等效项？

> ID：15592867
> 
> 赞同：2
> 
> 时间：2013-03-23T22:32:38.523
> 
> 标签：javascript, iframe, download, comet, android-browser

我目前正在使用以下 JS 代码来触发文件下载，而无需离开我所在的页面：

```
var iframe = document.createElement('iframe');
iframe.style.display = 'none';
document.body.appendChild(iframe);
iframe.src = "/somefile.zip"; 
```

它几乎在我测试的所有地方都运行良好，除了在股票 Android 浏览器和 Dolphin 上，下载根本没有开始。到目前为止一切顺利，经过一些研究，这个隐藏的 iframe 技巧恰好在 Android 浏览器上不起作用。

但是我尝试了其他几种方法来触发 Android 浏览器上的下载，包括`window.open()`（不可靠，因为默认情况下启用了弹出窗口阻止），或者`<a target="_blank">`使用模拟`click()`（从弹出窗口阻止程序的角度来看相当于`window.open()`并被阻止），或者`document.location = ...`下载文件但破坏了我的应用程序。

后者的问题`document.location = ...`在于，这是一个 Comet 应用程序（服务器推送/长轮询），所以我真的无法离开我当前所在的页面（并且“离开”包括更改`document.location`文件下载，**即使*显然*浏览器停留在当前页面上**）否则长轮询连接停止并且更新停止，应用程序中断。这显然也适用于手动或模拟单击普通链接时。

因此，为了不破坏我的应用程序，我真的需要在**不**离开我所在页面的情况下触发文件下载。不幸的是，我没有找到任何适用于现有 Android 浏览器的可行解决方案。

有任何想法吗？

谢谢你读我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T23:07:27.967

尝试使用锚点和模拟点击而不使用 target=blank

我这样说是因为我有一个类似的下载，包括一个 iframe 和一个简单的链接作为后备。iframe 适用于除 android 之外的所有设备，但简单链接无需离开页面即可成功下载。

# android - SharedPreferences ToggleButton 不保存

> ID：15592869
> 
> 赞同：1
> 
> 时间：2013-03-23T22:32:45.490
> 
> 标签：android, eclipse, sharedpreferences

*过去几天我一直在为这个问题发疯。我正在尝试使用 SharedPreferences 来允许我的用户通过 ToggleButton 保存游戏中音频的选定选项，但每次我运行我的应用程序并点击我的“完成”按钮返回到 main_activity 屏幕，然后再次单击设置，它永远不会保存。我已经通过谷歌搜索对此做了一些研究，我的书和这个网站，但通过很多方法，我尝试过结果是一样的. 我是android开发的新手，更不用说应用程序开发了关于我在这里做错了什么。这是我的设置活动中的代码。

```
package com.fullfrontalgames.numberfighter;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.ToggleButton;    

public class Settings extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);  

        Button Notifications = (Button) findViewById(R.id.Notifications);
        Button Done = (Button) findViewById(R.id.done);
        Button AccountSettings = (Button) findViewById(R.id.AccountSettings);
        final ToggleButton AT = (ToggleButton) findViewById(R.id.AudioToggle);
        AT.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                {
                    if ((AT.isChecked()))
                    {
                        SharedPreferences appPrefs =
                        getSharedPreferences("com.fullfrontalgames.numberfighter.Settings_preferences",
                                        MODE_PRIVATE);
                        SharedPreferences.Editor editor = appPrefs.edit();
                        editor.putBoolean("atpref", AT.isChecked()); //value to store
                        editor.commit();
                    }
                }
            }
        });
        SharedPreferences appPrefs =
                getSharedPreferences("com.fullfrontalgames.numberfighter.Settings_preferences",
                MODE_PRIVATE);
        boolean atpref = appPrefs.getBoolean("atpref", true); //default is true
        AT.setChecked(atpref);
        Done.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent Intent = new Intent(Settings.this,activity_main.class);
                Intent.setFlags(android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(Intent);

            }
        });
        Notifications.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.fullfrontalgames.numberfighter.Notifications"));
            }
        });
        AccountSettings.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.fullfrontalgames.numberfighter.AccountSettings"));
            }
        });

    }    

    public void onToggleClicked(View view) {
        // Is the toggle on?
        boolean on = ((ToggleButton) view).isChecked();

        if (on) {
            view.setSoundEffectsEnabled(true);
        } else {
            view.setSoundEffectsEnabled(false);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:36:11.523

如果您尝试保存 ToggleButton 的状态`false`，只需删除 OnClickListener 中的 if 语句：

 ~~~~```
if ((AT.isChecked())) 
```~~~~

# c - 在 C 中使用 DLL

> ID：15592870
> 
> 赞同：0
> 
> 时间：2013-03-23T22:32:54.597
> 
> 标签：c, dll, import, sdl

这似乎是一个菜鸟问题，但我所有的搜索都返回了关于`C++ or C#`所以我要在这里问的东西。

我的 .c 文件目录中有一个`DLL, SDL.dll`, 。我想导入它来使用。不支持使用，`#import`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:36:08.390

源代码中没有任何指令可以帮助您，您也可以

*   链接到 DLL，为此使用所谓的 lib 文件。（这是一个静态动态链接）
*   使用 LoadLibrary/FreeLibrary 和 GetProcAddress 将函数的地址映射到函数指针（真正的动态链接）

在第一种情况下，您还需要一个与所用 DLL 的平台和版本相匹配的适当头文件。

如果您插入更新版本的 DLL，只要使用的函数的原型匹配，第二种解决方案将起作用。

这假设您在 Windows 下，如果您有 *.dll 而不是 *.so（共享对象）文件，则可能是这种情况。（对于 Linux 系统，您可以包含`dlfcn.h`并使用 dlopen/dlclose/dlsym 而不是 LoadLibrary/FreeLibrary/GetProcAddress，但语法略有不同，请查看文档）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:13:10.623

Assuming you're using Visual Studio.

```
1.) Download  http://www.libsdl.org/release/SDL-1.2.15.zip
2.) unzip and install to for example C:\SDL-1.2.15
3.) In Visual Studio open the properties of the project goto C++ general and add C:\SDL-1.2.15\include to "Additional include directories".
4.) Goto the "Linker" tab and add C:\SDL-1.2.15\lib\x86 to "Additional library directories".
5.) Now go to "Input" under the Linker tab and add SDL.lib; SDLmain.lib to "Additional dependencies"
6.) Go to the "Build Events" tab and "Post build event" and add copy /y C:\SDL-1.2.15\lib\x86\SDL.dll "$(OutDir) 
```

That should do get your SDL working for Visual Studio in 32bit

On Linux if SDL is already installed just type "g++ -02 -o foo foo.cpp -lSDL"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:40:47.260

假设您的 DLL 格式正确（例如与 Windows API DLL 相同的标准），这很有可能

你需要声明你的函数——也许在一个头文件中，像这样：

typedef void (CALLBACK *functionnameptr)(char *, int),

然后使用 LoadLibrary 加载 DLL，并为其提供句柄：

句柄 = LoadLibrary("SDL.DLL");

然后你使用 GetProcAddress(handle,"real function name in DLL") 像这样：

函数名 lptr 函数；

lptrfunction = GetProcAddress(handle,"DLL 中的真实函数名");

现在您可以像通常在 C 中使用函数一样使用 lptrfunction

# .net - GMAP.Net 是否有谷歌地图限制，每天有 1500 个查询？

> ID：15592876
> 
> 赞同：3
> 
> 时间：2013-03-23T22:33:37.317
> 
> 标签：.net, google-maps, google-maps-api-3, map, gmap.net

我想在我自己的软件（用 C#.Net 编写）中为多个用户（可能超过 500000）使用 GMAP.NET 组件并使用谷歌地图。如您所知，Google 地图 API 对设备一天内的查询次数有限制。GMAP.NET 有这个限制吗？如果是这样，这意味着我必须限制我的用户使用地图吗？拥有一个 Premiere api 需要为每个用户每年支付大约 100 美元。不是没有这个限制的免费使用谷歌地图的方式吗？普通用户一天要查询多少？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:27:36.643

如果您通过 GMAP.Net 使用 Google 地图，有几件事需要了解。

1.  谷歌地图可能无法在使用条款中描述的预定义场景之外使用，请参阅：[https ://developers.google.com/maps/terms](https://developers.google.com/maps/terms)

2.  禁止通过自己的控件访问 Google 地图，但我可能错了，GMAP.Net 控件使用直接磁贴访问（禁止）或其他不受控制的服务，请参见下面的段落。

3.  由于您使用的是服务和元素，因此会发生相同的许可和限制。

无论如何，但我希望有人会确认，使用 GMAP.NET 项目在使用谷歌地图时在许可、使用条款和限制方面并不可靠。

> (a) 除非通过服务，否则无法访问 Maps API。您不得通过服务中提供的技术或方式以外的任何技术或方式，或通过 Google 可能指定的其他明确授权方式访问或使用 Maps API 或任何内容。例如，您不得通过 Maps API 以外的接口或渠道（包括未记录的 Google 接口）访问地图图块或图像。

# mysql - 这段代码可以安全注入吗？

> ID：15592878
> 
> 赞同：2
> 
> 时间：2013-03-23T22:33:43.670
> 
> 标签：mysql, pdo, output

我已经用我想到的接受用户输入的代码更新了这个问题。基本上我试图确保这段代码不受 SQL 注入的影响，因为它确实有用户输入。

```
<?php
$username = "XXXX";
$password = "XXXX";
?>

<font size="+3" face="Verdana">XXXX</font>
<br><br>
<form name="form" action="XXX.PHP" method="get">
<input type="text" name="q" size="60" />
<input type="submit" name="Submit" value="Search">
</form>

<table>

<?

$var = $_GET['q'];

try {
$conn = new PDO('mysql:host=localhost;dbname=XXXX', $username, $password);
$stmt = $conn->prepare("SELECT * FROM XXXX WHERE XXXX LIKE '%$var%' OR XXXX LIKE '%$var%' OR XXXX LIKE '%$var%'");
$stmt->execute(array());

$result = $stmt->fetchAll();

if ( count($result) ) {
foreach($result as $row) {
echo "<tr>";
echo "<td>" .$row['XXXX']. "</td>";
echo "<td>" .$row['XXXX']. "</td>";
echo "<td>" .$row['XXXX']. "</td>";
echo "</tr>";    
}  
} 
else {
echo "No results found.";
}
} 
catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T22:38:46.810

如果您没有正确处理恶意用户提供的数据，您只会冒 SQL 注入的风险。

由于您的查询中没有任何用户提供的数据，因此您不必担心 SQL 注入方面的任何事情。

## 添加搜索框

当你在 SQL 查询中使用任何用户提供的值时，你就会暴露在 SQL 注入中。因此，您必须小心并适当地处理用户提供的数据。您会将搜索框中的字符串用于数据库查询，对吗？

然后你需要处理字符串以避免任何 SQL 注入

## 为什么你应该使用 PHP 的 PDO 进行数据库访问

正如**pst**所建议的，使用 PDO 是推荐的继续方式。

这里有一些关于这个主题的好文章：

*   [为什么你应该使用 PHP 的 PDO 进行数据库访问](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)
*   [PDO简介](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)

## 使用 mysql_real_escape_string

**已弃用。**来自[php 文档](http://www.php.net/manual/en/function.mysql-real-escape-string.php)：

> 从 开始，此扩展程序已弃用`PHP 5.5.0`，并将在将来删除。相反，应该使用`MySQLi`or扩展名。`PDO_MySQL`另请参阅`MySQL: choosing an API guide and related FAQ`以获取更多信息。此功能的替代方案包括：
> 
> *   mysqli_real_escape_string()
> *   [PDO::quote()](http://www.php.net/manual/en/pdo.quote.php)

# jquery - 加载外部数据无法使用多个链接正常工作

> ID：15592886
> 
> 赞同：0
> 
> 时间：2013-03-23T22:35:06.147
> 
> 标签：jquery, jquery-ui

当有多个链接时，模式对话框的加载次数与链接的数量一样多。

例如，如果有 3 个链接`class="test"`，当单击第一个链接时，它将在每个链接之上加载 3 次。

无论如何要修复它？

```
<a href="/user/login/" class="test">comment #1</a><br>
<a href="/user/signup/" class="test">comment #2</a><br>
<a href="/user/reset_password/" class="test">comment #3</a><br>

  $('a.test').click(function() {
        var url = this.href;
        // show a spinner or something via css
        var dialog = $('<div style="display:none" class="loading"></div>').appendTo('body');
        // open the dialog
        dialog.dialog({
            // add a close listener to prevent adding multiple divs to the document
            close: function(event, ui) {
                // remove div with all data and events
                dialog.remove();
            },
            width: 400,
            modal: true
        });
        // load remote content
        dialog.load(
            url, 
            {}, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
            function (responseText, textStatus, XMLHttpRequest) {
                // remove the loading class
                dialog.removeClass('loading');
            }
        );
        //prevent the browser to follow the link
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:46:57.387

试试这个...

```
<script type="text/javascript">
    $(document).ready(function(e) {
        $('body').append('<div id="newDialog" class="loading"></div>');
        $("#newDialog").dialog({
            close: function(event, ui) {
                $("#newDialog").html("").addClass('loading');
            },
            width: 400,
            modal: true
        });
         $('a.test').click(function() {
            var url = $(this).attr("href");
            $("#newDialog").load(
                url, 
                {},
                function (responseText, textStatus, XMLHttpRequest) {
                    $("#newDialog").removeClass('loading').dialog("open");
                }
            );
            return false;
        });  
    });
</script> 
```

它减少了您必须启动 $.dialog() 的次数，这非常昂贵。

它也摆脱了同一次点击的多个对话框。

# jquery - 在 https php 标头重定向后，Chrome 拖放失败

> ID：15592889
> 
> 赞同：0
> 
> 时间：2013-03-23T22:35:25.693
> 
> 标签：jquery, html, google-chrome, file-upload, drag-and-drop

我有一些代码。它有效......然后我在顶部添加了一个 php httpS（安全）标头重定向。再次刷新代码，现在它失败了。它只是不接受任何文件作为拖放。我可以清除缓存、清除 cookie 做任何我想做的事情……它不再起作用了。

我必须用注释掉的行重新启动 chrome，然后它才能再次工作。为什么 ？

```
<?php
//header( "Location: ". 'https://127.0.0.1/blank.htm' );die; /* uncomment this line to make it fail */
// it MUST be a "secure" redirect to make it fail
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>blah</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TestAuditor testing quality management">
    <meta name="author" content="The TestAuditor Team">

    <link href="CSS/dropzone.css" rel="stylesheet">
  </head>
  <body>
  <div class="span6">
    <div id="dropzone" class="fade well ui-corner-all">Drop files here</div>
  </div>
    <script src="JS/jquery-1.9.0.js"></script>
    <script src="JS/jquery.filedrop.js"></script>
    <script type="text/javascript">
    //-----------------------
    $(document).ready(function ()
    {
    $('#dropzone').show().filedrop(
      {
      fallback_id: '',
      url: 'AnyUploadFileManager.php',
      paramname: 'userfile',
      withCredentials: true,
      allowedfiletypes: [],
      maxfiles: 250,
      maxfilesize: 20,
      drop: function() { },
      uploadFinished: function(i, file, response, time) {alert('done'); },
      beforeSend: function(file, i, done) {done(); }
      });
    });
    //-----------------------
     </script>
  </body>
</html> 
```

# javascript - 在 javascript 的 getElementbyId 上转义连字符

> ID：15592891
> 
> 赞同：0
> 
> 时间：2013-03-23T22:35:30.563
> 
> 标签：javascript, html, css

我想用 javascript 传递 -webkit-background-clip 属性。

由于开头的连字符，我似乎无法正确理解。用 [, ", ' 等尝试过。如何逃避破折号？

```
document.getElementById("menu").style.-webkit-background-clip = "text"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:36:49.480

您可以使用括号符号...

```
document.getElementById("menu").style["-webkit-background-clip"] 
```

...或使用骆驼箱...

```
document.getElementById("menu").style.webkitBackgroundClip 
```

[js小提琴](http://jsfiddle.net/ZQ3nR/)。

请注意，JavaScript 将它们解析为不同的名称，但浏览器同时支持这两种名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T22:36:57.193

尝试 `document.getElementById("menu").style["-webkit-background-clip"] = "text";`

# c# - 使用 TempData 保留页面的附件列表，而不会与页面的另一个实例发生任何冲突

> ID：15592894
> 
> 赞同：0
> 
> 时间：2013-03-23T22:36:00.587
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, file-upload

**你好朋友...**

我有一个 mvc 项目和一个带有附件框的表单（例如 yahoo mail compose）

例如“create_request.cshtml”

* * *

**我想：**

每个用户填写字段并上传他/她的文件（当用户选择任何一个时，我通过 Ajax 发布每个文件）并在提交表单后，如果页面有错误（检查服务器端），用户会在响应中看到上传的文件页面（带有突出显示的错误的响应表单）...

* * *

**我很好地实现了上述场景：**

（Ajax+ Tempdata+ 提交前保存文件服务器端+ 提交表单前上传文件的拇指）

在我的控制器中：

```
 public void KeepTempData(string name, string value)
    {
        TempData[name] = value;
    } 
```

在我看来，我通过另一个 ajax 代码上传每个文件名后将其发送到服务器：

```
ajaxPostData(KeepTempData, "Attachments", $('#Attachments').val()); 
```

* * *

**但我有一个问题：**

因为我使用**TempData**来保存上传的文件名列表，所以如果用户在当前页面中附加一个文件，然后在她/他的浏览器中打开一个新选项卡并转到“create_request”页面地址。他/她看到一个带有附件的空表格...

**我的解决方案：**

也许我可以使用每个页面（每个表单）的唯一键来解决这个问题，并将其保存在会话变量和每个页面请求的隐藏字段中>>使用：*“Anti Forgery Token with a Salt”*或*“DateTime.Now”*

**我在网上找到了[这篇文章](http://forum.springsource.org/showthread.php?95016-Using-Session-Model-Attributes-With-Multiple-Browser-Tabs-Patch)。它的问题就像我的问题一样。它的解决方案就像我的解决方案一样。**

* * *

**MVC 中针对此问题的适当解决方案是什么？？？**

**当用户在浏览器的某些选项卡（如 firfox）中有不同的页面请求时，您对使用 TempData（或 Session）没有任何冲突的建议是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:46:48.317

TempData 的生命周期很短。您应该使用 Session 而不是 TempData。

Infact 会话对象是 TempData 背后的后备存储。但是 TempData 中存储的数据对当前请求和后续请求都是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:17:05.687

我通过以下方式解决了这个问题：

*   从查询字符串中获取密钥
*   如果密钥为空
    *   我在控制器的操作中生成了一个新的唯一键
    *   使用键将页面重定向到新 url（作为查询字符串键值）
*   别的
    *   将密钥添加到 ViewBag（用于在视图中设置隐藏字段）
    *   将密钥保存在会话变量中。

.

```
public virtual ActionResult Create(string attkey)
{
     if (string.IsNullOrEmpty(attkey))
     {
         attkey = generatNewNameForSession('key'); // for examle: kye_jhtyujbvkjadsgfvn
         Response.Redirect("myControle/Create, attkey="+attkey), true);
        }
        ViewBag.AttachmentsKey = attkey;
        if (Session[attkey] == null)
            KeepData(attkey, "");
        .
        .
        . 
```

现在我的页面的每个实例都有一个标识，现在我可以决定显示或不显示以前附加的文件。

# php - 设置数组的属性

> ID：15592895
> 
> 赞同：0
> 
> 时间：2013-03-23T22:36:05.250
> 
> 标签：php, arrays, object

我通过复制第一个元素将元素添加到数组中。然后我只更改第一个元素 [0] 的某些属性 - 但是（由于某种原因我不明白）所有元素（例如 [1]）的属性，而不仅仅是更改的元素也发生了更改。

编码：

```
$this->product->images[] = $this->product->images[0];
$file = uniqid().'.png';
$this->product->images[0]->file_url = 'images/magick/'.$file; 
```

当我只想更改第一个 ([0]) 元素时，此代码还将 $this->product->images[1]->file_url 更改为 'images/magick/'.$file 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:39:39.970

这是因为其中的项目`$images`是对象（请参阅[对象和引用](http://php.net/manual/en/language.oop5.references.php)）。所以你必须使用：

```
$this->product->images[] = clone $this->product->images[0]; 
```

但请注意，我不知道您正在使用的类，因此在某些情况下您可能需要深度克隆，而且克隆可能取决于您的对象（请参阅[对象克隆](http://php.net/manual/en/language.oop5.cloning.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:40:03.897

检查这个：

```
$this->product->images[] = clone $this->product->images[0];
$file = uniqid().'.png';
$this->product->images[0]->file_url = 'images/magick/'.$file; 
```

# c - 无法将参数 2 从“const char [14]”转换为“LPCWSTR”

> ID：15592906
> 
> 赞同：3
> 
> 时间：2013-03-23T22:36:35.707
> 
> 标签：c, visual-studio-2012, lpcwstr

我收到此错误：

```
cannot convert parameter 2 from 'const char [14]' to 'LPCWSTR' 
```

使用下面的代码。它应该是 C，但最好的 Visual Studio 2012 提供了一个空的 C++ 项目：

```
#include "windows.h"

int WINAPI WinMain (HINSTANCE hinst, HINSTANCE hprevinst, LPSTR cmdline, int showcmd)
{
    MessageBox(NULL, "Merhaba Dunya", "Merhaba", MB_OK);
    return 0;
} 
```

什么是不正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T22:38:17.857

您当前的设置似乎已设置为 WinAPI 函数需要宽字符串：

```
MessageBox(NULL, L"Merhaba Dunya", L"Merhaba", MB_OK); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-01T15:06:13.730

右键单击您的项目，转到配置属性下的属性 -> 常规并将字符集更改为使用多字节字符集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-23T16:24:15.220

以下步骤对我有用：

1.  在解决方案窗口中右键单击您的项目，然后选择属性菜单项。
2.  单击属性页中“配置属性”下的常规
3.  在“字符集”设置中：将“使用 Unicode 字符集”更改为“使用多字节字符集”，然后单击“确定”按钮
4.  重建你的项目，看看它是如何工作的

# c++ - 在 Switch-Case 函数中结合连续循环

> ID：15592907
> 
> 赞同：1
> 
> 时间：2013-03-23T22:36:38.097
> 
> 标签：c++, function, while-loop, switch-statement

我有一个机器人在跳舞，我试图让它在跳舞期间，如果机器人在任何时候撞到墙上（我假设是一个while循环），它会在液晶屏幕上显示一些东西，备份和然后回到原来的歌舞。我有一个舞蹈代码，但是我不确定如何在保险杠撞到它时将其合并，转身，然后返回到用于歌曲和舞蹈的开关盒运动任务。 。有什么建议么？？到目前为止，这是我的歌舞代码：

```
//FOURTH OCTAVE NOTE FREQUENCIES
#define C4  261 //  C   note frequency
#define Cs4 277 //  C   sharp note frequency
#define D4  294 //  D   note frequency
#define Ds4 311 //  D   sharp note frequency
#define E4  329 //  E   note frequency
#define F4  349 //  F   note frequency
#define Fs4 370 //  F   sharp note frequency
#define G4  392 //  G   note frequency
#define Gs4 415 //  G   sharp note frequency
 #define    A4  440 //  A   note frequency
#define As4 466 //  A   sharp note frequency
#define B4  494 //  B   note frequency
//FIFTH OCTAVE NOTE FREQUENCIES
#define C5  523 //  C   note frequency
#define Cs5 554 //  C   sharp note frequency
#define D5  587 //  D   note frequency
#define Ds5 622 //  D   sharp note frequency
#define E5  659 //  E   note frequency
#define F5  698 //  F   note frequency
#define Fs5 740 //  F   sharp note frequency
#define G5  784 //  G   note frequency
#define Gs5 831 //  G   sharp note frequency
#define A5  880 //  A   note frequency
#define As5 932 //  A   sharp note frequency
#define B5  988 //  B   note frequency
//SIXTH OCTAVE NOTE FREQUENCIES
#define C6  1046    //  note frequency
#define Cs6 1109    //  sharp note frequency
#define D6  1175    //  note frequency
#define Ds6 1245    //  sharp note frequency
#define E6  1319    //  note frequency
#define F6  1397    //  note frequency
#define Fs6 1480    //  sharp note frequency
#define G6  1568    //  note frequency
#define Gs6 1661    //  sharp note frequency
#define A6  1760    //  note frequency
#define As6 1865    //  sharp note frequency
#define B6  1976    //  note frequency
//SEVENTH OCTAVE NOTE FREQUENCIES
#define C7  2093    //  note frequency
#define Cs7 2217    //  sharp note frequency
#define D7  2349    //  note frequency
#define Ds7 2489    //  sharp note frequency
#define E7  2637    //  note frequency
#define F7  2794    //  note frequency
#define Fs7 2960    //  sharp note frequency
#define G7  3136    //  note frequency
#define Gs7 3322    //  sharp note frequency
#define A7  3520    //  note frequency
#define As7 3729    //  sharp note frequency
#define B7  3951    //  note frequency
//EIGHTH OCTAVE NOTE FREQUENCIES
#define C8  4186    //  note frequency
#define Cs8 4434    //  sharp note frequency
#define D8  4699    //  note frequency
#define Ds8 4978    //  sharp note frequency
#define E8  5274    //  note frequency
#define F8  5588    //  note frequency
#define Fs8 5920    //  sharp note frequency
#define G8  6272    //  note frequency
#define Gs8 6645    //  sharp note frequency
#define A8  7040    //  note frequency
#define As8 7459    //  sharp note frequency
#define B8  7902    //  note frequency

#define P       0 //note frequency (a rest note)

//NOTE DURATION FACTORS (THEY MULTIPLY THE WHOLE NOTE DURATION)
#define N1   1.0     //whole note
#define N2   0.5     //half note
#define N2h  0.75    //dotted half note
#define N4   0.25    //quarter note
#define N4h  0.375   //dotted quarter note
#define N8   0.125   //eighth note
#define N8h  0.1875  //dotted eighth note
#define N16  0.0625  //sixteenth note
#define N16h     0.09375 //dotted   sixteenth note
#define N32  0.03125     //thirty-secondth note
#define N32h     0.046875 //dotted thirty-secondth note

//declare and initialize arrays of note frequencies and note durations
int NotesF[] = {    G6,P,G6,P,As6,P,C7,P,
        G6,P,G6,P,F6,P,Fs6,P,
        G6,P,G6,P,As6,P,C7,P,
                G6,P,G6,P,F6,P,Fs6,P,
                As6,G6,D6,P,As6,G6,Cs6,P,
                As6,G6,C6,P,As5,C6,0};
float NotesD[] = {  N8,N4,N8,N4,N8,N8,N8,N8,
                N8,N4,N8,N4,N8,N8,N8,N8,
                N8,N4,N8,N4,N8,N8,N8,N8,
                N8,N4,N8,N4,N8,N8,N8,N8,
                N8,N8,N1,N16,N8,N8,N1,N16,
                N8,N8,N1,N8,N8,N8,0};
int index;
task motion();
void Rotate(int speed, int msecs);
void Drive(int speed, int msecs);

task main()
{
int freq;
float dur;
int beats; //beats per minutes (one beat = one quater-note)
int wholenote, quarternote;//duration of whole and quarter note in milliseconds
int tics; //duration in 10-millisecond tics needed by PlayTone( ) function
beats = 200;//tempo in beats per minute
quarternote = 1000*(60/(float)beats); //how many milliseconds
wholenote = 4*quarternote; //how many milliseconds

bPlaySounds = true;
nVolume = 2;

StartTask(motion);

//turn off voltage regulation for motor[0] (headlight is not a motor!)
nMotorPIDSpeedCtrl[0]=   mtrNoReg;

index=0;
do
{
    freq = NotesF[index];
    dur = NotesD[index];
    tics = (int)((wholenote*dur)/10);//how many 10 msec "tics"
    PlayTone(freq, tics);
    if(freq==0)
        motor[0] = 0;//headlight OFF for rest notes
    else
        motor[0] = 100;//headlight ON for all other notes
    wait10Msec(tics);
    index = index+1;
} 
while (NotesD[index] != 0); //duration-0 note marks end of song

StopTask(motion);
}

task motion()
{
int oldindex=-1; //initialize so first one won't match

//turn on speed regulation for accurate tracking
//between left and right wheel rotations
nMotorPIDSpeedCtrl[1] = mtrSpeedReg;
nMotorPIDSpeedCtrl[2] = mtrSpeedReg;

while(true)
{
    if(index!=oldindex)//has note changed in main()?
    {
        oldindex = index;
        switch(index)
        {
            case 0:
                Drive(500,500);
                break;
            case 8:
                Rotate(-75,500);
                break;
            case 16:
                Rotate(-75,500);
                break;
            case 24:
                Rotate(75,500);
                break;
            case 32:
                Rotate(75,500);
                break;
            case 36:
                Drive(500,500);
                break;
            case 40:
                Rotate(75,500);
                break;
            case 48:
                Rotate(75,500);
                break;
            case 56:
                Rotate(-75,500);
                break;
            case 64:
                Rotate(-75,500);
                break;
            case 72:
                Rotate(-500,200);
                break;
            case 80:
                Rotate(-500,200);
        }
    }
    else
        wait10Msec(5);
}

}

void Rotate(int speed, int msecs)
{
//set speeds
motor[1] = +speed;
motor[2] = -speed;
//wait for needed rotation time
wait1Msec(msecs);
//set motors back to 0 speed
motor[1] = 0;
motor[2] = 0;

}

void Drive(int speed, int msecs)
{
//set speeds
motor[1] = +speed;
motor[2] = +speed;
//wait for needed rotation time
wait1Msec(msecs);
//set motors back to 0 speed
motor[1] = 0;
motor[2] = 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:50:37.707

有两个控制变量，状态和时间。状态保存了机器人正在做什么，并记录了它已经做了多长时间。有一个外部 while 循环，在其中，每次迭代，检查机器人的状态。

这是它如何工作的示例。

```
int state=1;
int timer=0;
while (true) {
    if (state==0) {
        //Walk away from wall
        motor[0]=-30;
        if (timer>2000) {
            //State change
            state=1;
            timer=0;
        }
    }
    if (state==1) {
        //Dance
        switch(timer) {
            case 0:
            motor[1]=40;
            break;
            case 800:
            motor[0]=8;
            break;
            //rest of dance code.
        }
        if (has_hit_wall()) {
            //State change
            state=0;
            timer=0;
        }
    }
    wait1Msec(10);
    timer+=1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:48:14.033

您可以修改`Drive()`检查保险杠传感器的方法。如果保险杠撞到，那么你必须倒车一段时间。因此，请改为`wait1Msec(msec)`使用`wait1Msec(1)`带有轮询*保险杠*的循环。我会假设该`Rotate()`方法不会引起碰撞，但这取决于机器人的几何形状。

例如，

```
int bumper_hit = 0; /* "flag" to monitor in main() to stop song. */
void Drive(int speed, int msecs)
{
  int i;
  //set speeds
  motor[1] = +speed;
  motor[2] = +speed;
  //wait for needed drive time, while checking bumper.
  for(i = 0; i < msecs; i++) {
           wait1Msec(1);
           if(bumper()) {
             bumper_hit = 1;
             motor[1] = -speed;
             motor[2] = -speed;
             wait1Msec(msec); /* Maybe longer? */
             bumper_hit = 0;
             motor[1] = +speed; /* if you want to continue with this portion */
             motor[2] = +speed;
             /* break; */       /* if you want to stop the forward motion */
           }
  }
  //set motors back to 0 speed
  motor[1] = 0;
  motor[2] = 0;
} 
```

如果电机不支持*反向*运动，则可以旋转 180°，向前驱动，然后再旋转 180°，以保持相同的方向。希望你玩的开心。

# php - Laravel Bootstraper 在控制组中并排对齐两个元素

> ID：15592912
> 
> 赞同：1
> 
> 时间：2013-03-23T22:37:15.620
> 
> 标签：php, html, css, twitter-bootstrap, laravel

我想使用 Laravel [Bootstraper](http://bootstrapper.aws.af.cm/)实现这种布局：

* * *

![在此处输入图像描述](../Images/28a0d58167bdf93ac07d9e3d4c73fda2.png)

* * *

我的代码如下所示：

```
<?php
   echo Form::control_group(
      Form::span6_text('something', 'Test 1'),
      Form::span6_text('something', 'Test 2'),
      Form::span6_text('something', 'Test 3')
   );
?> 
```

**问题：** Bootstraper 将每个表单元素单独包装`div.control-group`，并且第三个元素没有显示：

* * *

![在此处输入图像描述](../Images/52b481af1f8ae9be97d9e39675906aac.png)

```
<div class="control-group &lt;input class=" span6"="" type="text" name="something" value="Test 3" id="something">"&gt;<input class="control-label span6" type="text" name="something" value="Test 1" id="something">
<div class="controls">
<input class="span6" type="text" name="something" value="Test 2" id="something">
</div>
</div> 
```

* * *

可以用 Bootstraper 完成这样的事情吗？如何？:D
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:52:56.757

[JS Fiddler 示例](http://jsfiddle.net/MgcDU/2885/)

```
<div class="small">Control group</div><div class="container well span6"><div class="control-group" >
    <input class="control-label" type="text" name="something" placeholder="Input text element" id="something">
    <input class="control-label" type="text" name="something" placeholder="Input text element" id="something">
    <div class="controls">
        <input class="span3" type="button" name="something" value="HTML5 button" id="btn btn-primary"/>
    </div>
</div> 
```

# jquery - Jquery 文本框验证

> ID：15592917
> 
> 赞同：-1
> 
> 时间：2013-03-23T22:37:50.857
> 
> 标签：jquery, validation, textbox

您好我有一个没有操作按钮的文本框。在键入自身时，它必须验证它是否是从 A 到 z，如果不是，它会在文本框旁边抛出错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:15:34.983

干得好！我已经把它简单化了，所以人们可以理解它的基本逻辑:)

这是我的jsfiddle ..

[http://jsfiddle.net/joedf/mhVqr/2/](http://jsfiddle.net/joedf/mhVqr/2/)

html

```
<input type='text' id='textbox'>
<input type="button" class="button-disabled" id="change" disabled="disabled" value="click">
<div id="throwEx"/> 
```

JS

```
$("#throwEx").hide();
$("#textbox").keyup(checkForm).focus(checkForm);

function checkForm() {
    var needle = /^([a-zA-Z0-9]+)$/;
    var inputVal = $("#textbox").val();

    if (inputVal == '') {
        $("#change").addClass("button-disabled").removeClass("button");
        $("#change").attr("disabled", "disabled");
        $("#throwEx").hide();
    }
    else if (!needle.test(inputVal)) {
        $("#change").addClass("button-disabled").removeClass("button");
        $("#change").attr("disabled", "disabled");
        $("#throwEx").text("Error: Only Alphanumeric characters are allowed...");
        $("#throwEx").show();
    } else {
        $("#change").removeClass("button-disabled").addClass("button");
        $("#change").removeAttr("disabled");
        $("#throwEx").hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:13:38.043

这可能对您有用：

```
<input type="text" class="abc"> 
```

也许你已经调整了正则表达式，还没有真正测试过：

```
$(document).ready(function() {
$('.abc').bind('keyup', function() {
    regex = /^[A-z0-9]+$/;
    if(!regex.test($(this).val())) {
        $(this).next('.error').remove();
        $(this).after('<div class="error">Wrong</div>');
    } else {
       $(this).next('.error').remove();            
    }
}); 
}); 
```

小提琴：http: [//jsfiddle.net/EB6ET/2/](http://jsfiddle.net/EB6ET/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T23:17:57.507

我从 [这里](https://stackoverflow.com/questions/2812585/jquery-validate-characters-on-keypress)的 stackoverflow 得到这个，并且只修改为输入字符 A 到 z。

```
<input type="text"/>

$(document).ready(function () {

$('input').keyup(function() {
    var $th = $(this);
    $th.val( $th.val().replace(/[^a-z]/g, function(str) { alert('You typed " ' + str + ' ".\n\nPlease use only letters and numbers.'); return ''; } ) );
});
}); 
```

[链接到这里](http://jsfiddle.net/ntywf/685/)小提琴

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T23:34:05.183

使用 keyup 函数控制 TextBox 是个坏主意，因为用户可能会在 TextBox 内复制/粘贴文本或选择浏览器的自动完成字段之一等。我的方法：

[**现场JSFIDDLE**](http://jsfiddle.net/n8gM7/1/)

HTML：

```
<input type="text" id="TextBox1" name="TexBox1" value="" />
<span id='error' name='error'></span> 
```

JS：

```
function monitor() {
    if ($('#TextBox1').val().length > 0) {
        var reg = /^([a-zA-Z]+)$/;
        if (!reg.test($('#TextBox1').val())) {
            $('#error').html("Only letters are allowed!");
        } else {
            $('#error').html("");
        }
    } else {
        $('#error').html("");
    }
}

var timer = '';

$('#TextBox1').on('focus', function () {
    timer = setInterval(monitor, 100);
}).on('blur', function () {
    clearInterval(timer);
}); 
```

# ios - 使用 UITouch 移动 2 CCSprite

> ID：15592918
> 
> 赞同：0
> 
> 时间：2013-03-23T22:37:50.807
> 
> 标签：ios, cocos2d-iphone, move, ccsprite

我现在尝试在 cocos2d 中制作一个简单的游戏，我有类似的东西

```
#import "GameplayLayer.h"

@implementation GameplayLayer
-(id)init {
    self = [super init];
    if (self != nil) {
        CGSize screenSize = [CCDirector sharedDirector].winSize;
        // właczenie obsługi dotyku
        self.isTouchEnabled = YES;
        if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) {

        }
        else{
            paddle1 = [CCSprite spriteWithFile:@"bijakiPhone.png"];
            paddle2 = [CCSprite spriteWithFile:@"bijakiPhone.png"];
            puck = [CCSprite spriteWithFile:@"krazekiPhone.png"];
        }
        //Polozenie i inicjalizacja paletki nr 1
        [paddle1 setPosition:
         CGPointMake(screenSize.width/2,
                     screenSize.height*0.17f)];
        [self addChild:paddle1];
        //Polozenie i inicjalizacja paletki nr 2
        [paddle2 setPosition:
         CGPointMake(screenSize.width/2,
                     screenSize.height*0.83f)];
        [self addChild:paddle2];
        //Polozenie i inicjalizacja krązka
        [puck setPosition:CGPointMake(screenSize.width/2, screenSize.height/2)];
        [self addChild:puck];
    }
    return self;
}
//onEnter
- (void)onEnter
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
    [super onEnter];
}

//onExit
- (void)onExit
{
    [[CCTouchDispatcher sharedDispatcher] removeDelegate:self];
    [super onExit];
}
-(BOOL)containsTouch:(UITouch *)touch {
    CGRect r=[paddle1 textureRect];
    CGPoint p=[paddle1 convertTouchToNodeSpace:touch];
    return CGRectContainsPoint(r, p );
}
-(BOOL)containsTouch2:(UITouch *)touch {
    CGRect r=[paddle2 textureRect];
    CGPoint p=[paddle2 convertTouchToNodeSpace:touch];
    return CGRectContainsPoint(r, p );
}
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    if ([self containsTouch:touch]){
       CCLOG(@"krarzek 1 tapniety");
        isTouched1 = YES;
    }

    if ([self containsTouch2:touch]){
        CCLOG(@"krarzek 2 tapniety");
        isTouched2 = YES;
    }

    return YES;
}
-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event{
    if (isTouched1){
        CGPoint newTouchLocation = [touch locationInView:touch.view];
        newTouchLocation = [[CCDirector sharedDirector] convertToGL:newTouchLocation];
        [paddle1 setPosition:newTouchLocation];

    }

    if (isTouched2){
        CGPoint newTouchLocation = [touch locationInView:touch.view];
        newTouchLocation = [[CCDirector sharedDirector] convertToGL:newTouchLocation];
        [paddle2 setPosition:newTouchLocation];
    }

}
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event{
    if (isTouched1){
        isTouched1=NO;
        CCLOG(@"krarzek 1 zwolniony");
}
    if (isTouched2){
        isTouched2=NO;
        CCLOG(@"krarzek 2 zwolniony");
    }
}
@end 
```

工作 CCSprite 移动，但是当我同时触摸 2 个 CCSprite 时，它​​们会重叠！我怎样才能分别移动它们？对不起我的英语，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:46:09.953

您的问题的原因是您没有将触摸连接到您的桨的东西存储在某处。因此，如果两种触摸都在您的桨精灵内部，则`isTouched1`和`isTouched2`变量都具有 value `YES`。因此，在您的`ccTouchMoved:withEvent:`方法中，在这种情况下，两个精灵都将被放置到相同的位置。将您的触摸存储在某个变量中，或者我建议为此使用字典，触摸作为键，您需要作为值移动的精灵。在这种情况下，您的`ccTouchMoved:withEvent:`方法将如下所示

```
-(void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
        CGPoint newTouchLocation = [touch locationInView:touch.view];
        newTouchLocation = [[CCDirector sharedDirector] convertToGL:newTouchLocation];
        CCNode paddle = [_yourDict objectForKey: touch];
        [paddle setPosition:newTouchLocation];
} 
```

确定精灵是否包含给定触摸的方法名称还不够好。如果不查看代码，我无法说出他们做了什么。

# php - PHP 在 Windows Server 2008 IIS 7 上安装完成，安装处理程序 FASTCGI 出现 404.3 错误？

> ID：15592925
> 
> 赞同：0
> 
> 时间：2013-03-23T22:38:45.417
> 
> 标签：php, iis-7, installation, windows-server-2008, fastcgi

我知道有很多关于在 Server 2008 上安装 PHP 的信息......一切似乎都安装正确。我收到 404.3 错误...这通常是由不存在的处理程序造成的，但 FASTCGI 似乎正在运行，有一个 php-cgi.exe 实例加载到 FastCGI 设置中，最大实例设置为 5 和最大请求数为 10000，在处理程序映射下，*.php 请求路径指向 FastCgiModule，并且具有可执行文件的正确路径。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:17:03.167

好的，对于其他像我一样尝试过所有事情并遇到这种情况的人......请记住，您已经建立的站点的处理程序不会自然地继承您的基本配置（当然不是，为什么微软会做一些本机智能的事情） . 最重要的是，我的处理程序是为 IIS 建立的，但后来我必须进入并为我的每个单独的站点建立它们。去搞清楚。

# mysql - MYSQL内联视图查询（顶级客户）

> ID：15592927
> 
> 赞同：0
> 
> 时间：2013-03-23T22:39:15.533
> 
> 标签：mysql, sql, groupwise-maximum

我尝试进行查询，以便查看谁是一个月内的最大客户（从开始到现在的每个月）。

现在我有桌子：

**订单**( `orderID`, `orderdate`, `customerID`, `Netamount`, `tax`, `totalamount`)

**排序线**( `orderlineID`, `orderID`, `prodID`, `quantity`, `orderdate`)

**客户**（`firstname` `lastname` `zip` `creditcardtype`等）

我认为其他表不一定在这里。

当然，也有从没买过东西的顾客，也有买过很多次的顾客。

现在我使用了这个查询：

```
 SELECT customerid, Sum(netamount) 
    FROM orders
    GROUP BY customerid limit 1000000; 
```

现在我看到所有已经购买的客户。他们支付的总金额。

随着查询

```
 SELECT YEAR ( Orderdate ) Year ,
    MONTHNAME ( Orderdate ) Month ,
    COUNT(*) TotOrd ,
    FROM orders
    GROUP BY YEAR ( Orderdate ),
    MONTH ( Orderdate ); 
```

我得到一个表格，其中每一行都显示了`Yea`r `Month` `Total order`（放在那个月）。

我还是想看看**一个月的顶级客户**。

我在互联网上搜索了很多仍然找不到我想要的东西（也许我只是用谷歌搜索错了）。我知道我至少需要一个内联视图，但仍然不知道如何实现它。

希望有人可以在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:56:29.733

这是一个分组最大的问题，但不幸的是 MySQL 不支持窗口函数或 CTE，所以这可能会很混乱。

```
SELECT s1.year,s1.month,s1.customerid,s1.totord FROM
(SELECT YEAR ( Orderdate ) Year ,
MONTHNAME ( Orderdate ) Month , 
customerid,
COUNT(*) TotOrd 
FROM orders
GROUP BY YEAR ( Orderdate ),
MONTH ( Orderdate ),customerid) as s1
LEFT JOIN
(SELECT YEAR ( Orderdate ) Year ,
MONTHNAME ( Orderdate ) Month , 
customerid,
COUNT(*) TotOrd 
FROM orders
GROUP BY YEAR ( Orderdate ),
MONTH ( Orderdate ),customerid) as s2
ON
s1.year=s2.year AND s1.month=s2.month AND s2.TorOrd>s1.TotOrd AND s1.customerid>s2.customerid
WHERE s2.customerid IS NULL; 
```

在双打的情况下，它将返回具有较低 ID 的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:46:48.903

您需要重新加入数据才能获得顶级客户。因此，首先计算每个月的最大金额，然后加入以获取该金额的客户：

```
select my.year, my.month, myc.customerid, myc.totord
from (select year, month, max(totord) as maxtotord
      from (SELECT YEAR ( Orderdate ) Year, MONTHNAME ( Orderdate ) Month, customerid, COUNT(*) TotOrd ,
            FROM orders
            GROUP BY YEAR ( Orderdate ), MONTH ( Orderdate ), customerid
           ) myc
      group by year, month
     ) my join
     (SELECT YEAR ( Orderdate ) Year, MONTHNAME ( Orderdate ) Month, customerid, COUNT(*) TotOrd ,
      FROM orders
      GROUP BY YEAR ( Orderdate ), MONTH ( Orderdate ), customerid, count(*) as totord
     ) myc
     on my.year = myc.year and my.month = myc.month and my.maxtotord = myc.totord 
```

请注意，这是未经测试的，因此可能存在语法错误。

此外，如果有多个客户具有最大值，这将返回多个客户。

最后，这在几乎任何其他数据库中都容易得多，因为现在大多数数据库都支持该`row_number()`功能。

# android - Dagger & Android - 测试中的竞争条件？

> ID：15592932
> 
> 赞同：3
> 
> 时间：2013-03-23T22:39:55.207
> 
> 标签：android, android-testing, dagger

我正在使用 Dagger 将依赖项注入到 Android 项目中的活动中。所有提供者都保存在一个模块中，该模块由`Application`子类存储和管理。活动将它们的依赖项注入`onCreate()`，从上下文中获取模块。

在测试中，我有时需要将默认模块换成另一个。我正在使用`ActivityAndroidTestCase2`. 我在调用之前获取应用程序上下文`getActivity()`，然后替换模块，如下所示：

```
Context applicationContext = getInstrumentation()
    .getTargetContext().getApplicationContext();
module.setAppContext(applicationContext);
Thread.sleep(1000);         // note this
((ObjectGraphProvider) applicationContext).setModule(module); 
```

`MyApplication`代码：

```
public class MyApp extends Application implements ObjectGraphProvider {

    private ObjectGraph objectGraph;
    private Object module;

    public MyApp() {
        super();
        ApplicationContextModule myModule = new DefaultModule();
        myModule.setAppContext(this);
        this.module = myModule;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        objectGraph = ObjectGraph.create(module);
    }

    @Override
    public ObjectGraph objectGraph() {
        return objectGraph;
    }

    /* Test only */
    public void setModule(Object module) {
        this.module = module;
        objectGraph = ObjectGraph.create(module);
    }
} 
```

可悲的是，测试有时会失败——这就是`sleep()`第一个代码片段中出现的原因。线程休眠的时间越长，失败的机会就越小，但它并不能永远解决问题。

关于导致这种奇怪行为的原因以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T13:43:57.910

我在使用 Dagger 和 Cucumber-jvm 的测试中遇到了类似的问题。以下是一些需要注意的问题：

*   当您将对象图设置为新对象图时，请确保在旧图中没有对组件的延迟引用。这意味着任何活动、服务、广播接收器等可能在系统中仍然处于活动状态并持有对由图形注入的对象的引用。考虑在重置图表之前完成所有打开的活动。就我而言，我有一个后台服务，它一直使用旧图表中的注入引用。我必须明确调用`stopSelf()`服务以防止它在测试运行之间停留。这允许它在重新启动时从新图表中获得注入。
*   对 PendingIntents、Notifications 和任何其他需要 ID 的 Android 部分使用完全随机的 ID。我不小心在我的 PendingIntents 中重新使用了 ID，这导致了一些棘手的错误。
*   寻找在您重置图表之前和之后可能持续存在的任何其他状态。我最终想出了一个程序来完全清除我的应用程序状态并重新开始：清除所有共享首选项，取消所有通知，完成所有打开的活动，然后重置图表。

# git - 如何在尚未暂存（索引）的工作目录的修改文件中进行grep搜索？

> ID：15592933
> 
> 赞同：10
> 
> 时间：2013-03-23T22:39:56.250
> 
> 标签：git

在索引这些文件之前，似乎`git grep`没有任何选项只能在工作目录修改文件中搜索。是否有任何本机 git 命令用于此目的，或者我应该使用组合 git/linux 命令？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-23T23:50:58.020

通过使用 linux`grep`和`git ls-files`：

```
$ grep -s "search pattern" $(git ls-files -m) 
```

注意 1：提供了 grep 的`-s`选项，`Suppress error messages about nonexistent or unreadable files`因为也列出了已删除的文件，这在遇到不存在的文件时会`git ls-files -m`导致错误。`grep``"No such file or directory"`

注 2：git ls-files`-m`选项仅用于列出`modified`文件（也列出已删除的文件！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:17:50.060

`git grep`以 plain 为模型`grep`，也许你应该使用它。

# css - Wordpress CSS 更改不反映

> ID：15592934
> 
> 赞同：2
> 
> 时间：2013-03-23T22:40:03.860
> 
> 标签：css, wordpress, caching

我正在开发 WP 3.5.1，这是安装了 Duotive Three 主题的最新版本。一切正常，直到 2 天前，但是从 2 天开始，每当我通过 FTP 或 Wordpress 管理员编辑我的 CSS 文件时，它不会反映在浏览器中，无论是在网站中还是在我打开 CSS 文件时直接浏览器。然而，变化在几个小时后开始反映，我不知道究竟要多久。但这让我很沮丧，因为我需要等待很长时间才能看到更改并检查它们。我尝试使用 Shift + F5 刷新浏览器，我删除了浏览器缓存、cookie 甚至临时文件。但它仍然不起作用。请帮忙。注意：-我在 Wordpress 工作大约 6 年了，在 Wordpress 中建立了 100 多个网站，但这是我第一次遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:45:31.763

您可能会做的一件事是在调用 css 的地方添加一个版本号。

如果在头部调用它，你可以这样做：

```
<link rel="stylesheet" type="text/css" href="youtstylestyles.css?version=1.0" media="all" /> 
```

这将使浏览器刷新。

函数中还有一个变量`wp_enqueue_style()`（如果这是添加样式表的方式），如果您同意，它将强制刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T03:14:07.093

在您的 WP 管理员转到

外观 -> 主题选项 -> 动态 CSS -> 在此选项中向下滚动您可以看到**USE**选项

在这里，您需要从下拉菜单中选择**内部样式表。**

# android - 将自定义视图与屏幕底部对齐

> ID：15592937
> 
> 赞同：2
> 
> 时间：2013-03-23T22:40:10.533
> 
> 标签：android, android-custom-view

我创造了我自己的观点。它是一个半圆。我希望它与屏幕底部对齐。因为，我使用 drawArc 绘制它，它没有与底部对齐。我尝试过设置一个中心的y坐标与屏幕底部坐标重合的圆的替代方法。我不希望使用它，因为我希望实现一些额外的东西。这是我的自定义视图代码。

```
package legacy_systems.customview;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.RectF;
import android.util.AttributeSet;
import android.view.View;

public class CircleView extends View{

    private Paint markerPaint;
    private Paint textPaint;
    private Paint circlePaint;
    private int textHeight;

    public CircleView(Context context)
    {
        super(context);
        initCircleView();
    }

    public CircleView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        initCircleView();
    }

    public CircleView(Context context, AttributeSet attrs, int defaultStyle)
    {
        super(context, attrs, defaultStyle);
        initCircleView();
    }

    protected void initCircleView()
    {
        setFocusable(true);

        circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setColor(getResources().getColor(android.R.color.black));
        circlePaint.setStrokeWidth(3);
        circlePaint.setStyle(Paint.Style.STROKE);

        markerPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        markerPaint.setColor(getResources().getColor(android.R.color.darker_gray));
    }

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        int measuredWidth = measure(widthMeasureSpec);
        int measuredHeight = measure(heightMeasureSpec);

        int d = Math.min(measuredWidth, measuredHeight);

        setMeasuredDimension(d,d);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        int px, py;

        px = getMeasuredWidth()/2;
        py = getMeasuredHeight()/2;

        int radius = Math.min(px, py);

        RectF oval = new RectF();
        oval.set(px-radius, py-radius, px+radius, py+radius);

        canvas.drawArc(oval,180,180,false, circlePaint);
        //canvas.drawCircle(px, py, radius, circlePaint);
        canvas.save();

    }

    private int measure(int measureSpec)
    {
        int result = 0;

        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if(specMode == MeasureSpec.UNSPECIFIED)
        {
            result = 200;
        }
        else
        {
            result = specSize;
        }

        return result;
    }

} 
```

![我得到的截图](../Images/c700711edbf2e5b7fb2a0d51285ebfe6.png) 我想将半圆对齐到屏幕底部。任何想法我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:27:23.403

首先，感谢大家的回答。你的回答是部分正确的。是的，与

```
android:layout_alignParentBottom="true" 
```

会做一半的伎俩。假设我要画一个圆圈。在自定义视图中，(0,0) 表示视图的最左坐标，而不是屏幕的最高坐标。假设一个人想像我想做的那样将半圆定位在屏幕的底部，坐标猜测结果是一个问题。这是我实际解决的方法。

```
px = getMeasuredWidth()/2;
py = getMeasuredHeight();

canvas.drawCircle(px, py, radius, paint); 
```

在这里，`px`将是整个视图宽度的中心，视图宽度的中点，并且`py`将是分配给视图的最后一个屏幕 y 轴坐标。

希望它也对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:01:12.537

您可以尝试使用：

```
android:gravity="bottom" 
```

或者

```
android:layout_gravity="bottom" 
```

财产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:54:22.613

确保要放置/添加它的屏幕是`RelativeLayout`.

在布局中执行此操作

```
<legacy_systems.customview.CircleView
android:id="@+id/myview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentBottom="true"/> 
```

在您的 onCreate() 方法中

```
CircleView view = (CircleView) findViewById(R.id.myview); 
```

# php - Laravel 4 中 Input::flash() 和 Session::flash() 的区别

> ID：15592945
> 
> 赞同：3
> 
> 时间：2013-03-23T22:41:05.307
> 
> 标签：php, session, laravel, laravel-4

`Input::flash()`在 Laravel 4 中，和有什么区别`Session::flash(Input::all())`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:43:05.360

没有太大区别，前者是一种方便的方法，用于在会话中存储用户输入以便在验证失败时重新填充表单等常用任务。

# python - 如何在打印语句的输出中添加可点击的链接以打开文件夹/文件？（Python 桌面应用程序）

> ID：15592947
> 
> 赞同：3
> 
> 时间：2013-03-23T22:41:11.463
> 
> 标签：python, hyperlink, output

我想将可点击的链接添加到 python 输出。我正在输出文件路径及其内容。有人可以告诉我如何使它们可点击，以便当用户单击它们时直接导航到那里。

我找到了这个，但它适用于 Python 的 Django Web 部分。我正在寻找桌面链接 [如何在 Django 管理中添加可点击的链接到一个字段？](https://stackoverflow.com/questions/1949248/how-to-add-clickable-links-to-a-field-in-django-admin)

提前致谢，

帕尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T22:49:28.507

您是在谈论直接的 Python，没有框架吗？为什么不只打印你想要的？ `print('<a href="http://www.example.com">example text</a>')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T07:48:10.277

我有同样的问题，但仅适用于 win os。如上所述，您需要生成一个像这样的链接 'file:///C:/your/path/'

```
def show_firm_url(self, obj):
    return '<a href="%s">%s</a>' % (obj.firm_url, obj.firm_url)
show_firm_url.allow_tags = True 
```

出于安全原因，无法通过 win explorer 打开本地文件夹，因此您需要一些软件。我已经为 chrome 使用了本地资源管理器插件。但是，如果您的路径在生成 url 链接时包含特殊符号或非英文字符，则单击链接时会出现错误，因为 html 会将此字符转换为 '%0H'，并且此字符串将与您的本地路径不匹配。对于这个我没有回答。

# jquery - 如何在 javascript/jquery 中查询特定字段的验证

> ID：15592948
> 
> 赞同：4
> 
> 时间：2013-03-23T22:41:20.680
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate, unobtrusive-validation

通过一个简单的 MVC4 应用程序，我有一个简单的视图，其中包含一个简单的表单，其中一些字段具有一些简单的验证（必需、最大/最小值、长度等）。我将 ClientValidationEnabled 和 UnobtrusiveJavaSciptEnabled 都设置为 true。

我想要做的是，在任何时候，在 javascript 中，询问我的表单中的任何一个特定输入字段是否将通过该字段中当前内容的验证。

我意识到我可以打电话`$("#MyForm").valid()`并知道整个表单本身是否通过了验证。我想做的是针对任何一个特定领域提出这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T22:59:00.617

您实际上回答了您自己的问题:) 使用`.valid()`.

[http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

您可以直接调用`.valid()`元素。

```
$("#myElement").valid(); 
```

您也可以通过这种方式触发验证。[http://docs.jquery.com/Plugins/Validation/Validator/element](http://docs.jquery.com/Plugins/Validation/Validator/element)

```
$("#myForm").validate().element("#myElement"); 
```

# c++ - 如果将“+m”用作输出约束，gcc 会正常工作吗？

> ID：15592954
> 
> 赞同：6
> 
> 时间：2013-03-23T22:42:02.217
> 
> 标签：c++, gcc, inline-assembly

根据扩展汇编程序的[gcc 文档：](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Extended-Asm.html#Extended-Asm)

*当操作数的约束[...]允许寄存器时，您应该只使用读写操作数。*

这似乎很明确：您**不能**使用 +m 作为输出。

然而，我已经看到它被做了很多次。事实上，Linus Torvalds[在记录](http://yarchive.net/comp/linux/gcc_asm.html)中说

*gcc 文档是次要的。它们没有更新，它们不正确，它们不反映现实，它们无关紧要。对于这样的事情，唯一正确使用的是“+m”*

如果编译器最终会搞砸我的代码，我不想使用 +m 。甚至检查输出 asm 以查看它是否工作并不意味着明天当我更改一些看似无关的东西时它仍然可以工作。或者当我获得 gcc 的下一次更新时它仍然可以工作。

如果文档是正确的并且我不能依赖它正常工作，我想知道这一点，以便我可以寻求其他选择（其中大部分都是令人不快的痛苦）。如果文档有误，请告诉我如何更正它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:53:01.340

事实证明，问题在于文档（请参阅[电子邮件](http://gcc.gnu.org/ml/gcc-help/2013-03/msg00276.html)）。如果链接失效：

*文档的那部分已经有一段时间是错误的了。该文档已针对 4.8 进行了更正，但对于早期版本也是错误的。*

由于我使用的是报告版本 4.7.2 的 rubenvb 的 x64 编译器，这就是我正在阅读的文档的版本。然而，实际的代码签入是在 2004 年，所以我非常有信心在我正在运行的代码中包含更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T02:18:07.510

请不要引用 Linus 在 2001 年对 gcc 所说的话（！），当时 gcc/egcs 裂痕刚刚开始愈合（大约在 2000 年结束）。是的，在那个时间范围内，对 asm 限制的处理是一个可怕的混乱（Alan Cox 是清理混乱的负责人，因为编译器开始真正注意这些限制，我为此添加了一些补丁）。

当前的 GCC 是一个完全不同的野兽，它在内部进行了广泛的重新设计。

相信文档，不要写不好的约束。它们是*约束*，如果你对编译器撒谎，它可能只是运气不好，选择了大部分时间都有效的参数。总有一天会 断的*。*

*如果*您有一个示例表明可以接受编写非法约束（编译器可以检查！），请报告。

*如果*您有编译器未考虑的约束示例，请报告。

如果您的代码执行可能（或不）工作的东西取决于编译器可以根据 ypu 告诉它的选项合法地采用，并且有时有效，有时无效，好吧，把它归结为你自己的错和明智的。**不要对你的编译器撒谎，它会进行血腥的报复。**

# email - Gmail 用户名崩溃

> ID：15592956
> 
> 赞同：1
> 
> 时间：2013-03-23T22:42:31.407
> 
> 标签：email, gmail

我注意到以下 gmail 地址是等效的：foo@gmail.com 和 f.oo@gmail.com，我想将这些等效的电子邮件地址折叠到一个类别中。我在网上搜索了有关gmail折叠规则的信息，但没有找到任何东西。您知道如何规范 gmail 地址吗？

PS 相当于我的意思是，如果我向 f.oo@gmail.com 发送电子邮件，那么我将在我的邮箱中收到它，即 foo@gmail.com。

PPS 我认为有人在这里问了同样的问题：[哪些电子邮件彼此等价？](https://stackoverflow.com/questions/13461279/what-emails-are-equivalent-to-each-other)，但没有给出正确答案。也许我应该关闭这个线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:50:59.800

GMail 规则的工作方式如下：

*   忽略大小写。
*   点被忽略。
*   加号及其后面的任何内容都将被忽略。

因此，您可以通过首先将字符串小写，然后删除所有点，然后在第一个加号字符之前截断字符串来规范化 GMail 用户名。

请注意，这些规则特定于 GMail。（忽略用户名中的大小写是相当普遍的，但相关标准显然没有要求。）

如果您向“剥离”地址发送电子邮件，用户可能会生气。如果有人给您地址 joe+yourapp@gmail.com，那通常是因为他们希望能够过滤您的应用程序的输出。如果您随后将邮件发送到 joe@gmail.com，那么您有点违背用户的明确意愿。

# servlets - EasyMock servlet 反射

> ID：15592957
> 
> 赞同：0
> 
> 时间：2013-03-23T22:42:36.553
> 
> 标签：servlets, reflection, junit, easymock

那是一段 servlet 代码。我不知道如何通过模拟来覆盖它。我创建了像 ServletConfig、LoginServiceFactory 和 LoginService 这样的模拟对象，但我不知道如何为 Class.forName 创建模拟。那是调用的静态方法和其他方法，如 newInstance 或 getConstructor。我试图在模拟中调用 lsf.getClass().newInstance() expect 但它没有用。你知道如何解决它吗？提前致谢。

```
public void init(ServletConfig config) throws ServletException {
        super.init(config);
        try {
            String loginServiceFactoryName = config
                    .getInitParameter("LoginServiceFactory");
            LoginServiceFactory lsf = (LoginServiceFactory)
            Class.forName(loginServiceFactoryName).getConstructor().newInstance();
            UserDataBase db = lsf.getUserDataBase();
            Encoder encoder = lsf.getEncoder();
            loginService = new LoginService(db, encoder);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:11:15.813

现在我知道了这个问题的答案，我应该创建 LoginServiceFactory 的实现并通过反射搜索它，所以在 init 参数中会有我的类的名称，它实现了接口 LoginServiceFactory。

# javascript - 在 jQuery.post 上，我收到消息：请求的 URL 不允许使用 GET 方法

> ID：15592962
> 
> 赞同：4
> 
> 时间：2013-03-23T22:43:17.877
> 
> 标签：javascript, jquery, python, ajax, flask

我有以下问题：

我在一个 Flask 应用程序上工作，我想通过 AJAX 将一些数据传递给服务器。我对这个 AJAX 东西很陌生，所以我做错了。

在我的客户端，当用户点击一个图标时，我想通过存储在变量*消息中的**jQuery.post传递一些数据：*

 *```
jQuery("#icon_ID").click(function() {
    var message = {
        'GRAPH_TYPE': graphType
    };
    var _sendOnSuccess = function () {
    }

    var jqxhr = jQuery.post('/graph', message, _sendOnSuccess, 'json');
}); 
```

在我的服务器端，我有以下代码：

```
@app.route('/graph', methods = ['POST'])
@login_required
def physical_graph():
    ret_data = request.form['GRAPH_TYPE']
    return "" 
```

我现在要做的就是访问服务器端的 GRAPH_TYPE。但是，当我单击该图标时，我收到错误消息：

> 不允许的方法
> 
> 请求的 URL 不允许使用 GET 方法。

我真的不明白为什么 Python 告诉我我正在使用 GET 方法，而实际上我正在使用 POST 方法。

请有人帮我解决这个问题吗？我应该怎么做才能解决这个问题？如果我可以使用其他方法，请随时给我任何建议。请记住，除了 jQuery，我不想使用其他 JavaScript 库。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:43:55.427

这是因为你正在传递一个`object`as `data`like

```
var message = {
    'GRAPH_TYPE': graphType
}; 
```

在这种情况下`jQuery`，尝试对对象进行 URL 编码，默认情况下使用数据类型`application/x-www-form-urlencoded; charset=UTF-8`ans 发送`GET`请求。要克服这个问题，请确保您`jQuery`为 data 参数传递了一个字符串，为此您可以使用`JSON.stringify`like

```
var message = JSON.stringify({ "GRAPH_TYPE": graphType }); 
```*

# php - 假设有两个同名的类，php 类如何确定要扩展的类？

> ID：15592963
> 
> 赞同：0
> 
> 时间：2013-03-23T22:43:19.263
> 
> 标签：php, class, extend

鉴于我有两个 User 类，一个位于 /model/User.php 另一个位于 /assets/User.php

现在我想要一个从/model/User.php 扩展User 类的类，但似乎php 总是在寻找位于/assets/User.php 中的那个。知道 php 如何确定从哪个类扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:03:31.650

使用[命名空间](http://www.php.net/manual/en/language.namespaces.basics.php)

`user.php`：

```
class User {
    function someMethod(){}
} 
```

`myUser.php`：

```
namespace My;

class User {
    function someMethod(){}
} 
```

你可以像这样使用它：

```
include 'user.php';
include 'myuser.php';

$user1 = new User();
$user2 = new \My\User(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:22:36.627

你应该（如果你使用）适当地设置你的 spl_autoload_register 函数（[http://php.net/manual/en/function.spl-autoload-register.php](http://php.net/manual/en/function.spl-autoload-register.php)）能够自动加载具有相同名称的文件中的对象，芽名称对象不能相同。

您可以通过名称和存储文件的路径来区分对象。

例如，您需要 bootstrap.php 中的核心类并定义自动加载功能：

```
 <?php // bootstrap.php

require_once Core.php;
spl_autoload_register(array('Core', 'auto_load'));

$myUserClass = new MyClasses_User() // the required files for the class are loaded because of auto_load, PHP determines the right classes due to naming conventions: DirName_ClassName 

?>

<?php // Core.php

define('DIR_SEPARATOR', '/');

class Core {

  // Autoloading
    public static function auto_load($class, $dir_classes = 'classes')
    {
    $file = str_replace('_', DIR_SEPARATOR, $class); // replace _ by / for path to file

        if ($path = find_file_based_on_class_name($dir_classes, $file))
        {
            // Load the class file
            require $path;
        }
    }

?>

<?php
// classes/Model/User.php
class Model_User {
 // define the class
}
?>

// classes/Assets/User.php
<?php
class Assets_User {
 // define the class
}
?>

// classes/MyClasses/User.php
<?php
class MyClasses_User exdends Model_User {
 // define the class
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:53:11.660

您可以使用命名空间：[PHP 手册](http://www.php.net/manual/en/language.namespaces.basics.php)

# android - java.lang.NullPointerException - 使用 opencv 和 android

> ID：15592964
> 
> 赞同：1
> 
> 时间：2013-03-23T22:43:22.050
> 
> 标签：android, opencv, android-ndk

我试图让[这段](http://yus-repo.googlecode.com/svn/trunk/Android/apps/objtrack/)代码工作，但我有这个错误，我不知道如何解决它：

> 03-23 21:51:44.705: E/AndroidRuntime(1628): java.lang.NullPointerException 03-23 21:51:44.705: E/AndroidRuntime(1628): 在 org.projectproto.objtrack.SampleViewBase.surfaceCreated(SampleViewBase.爪哇：107）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:52:27.933

`mCamera`似乎是`null`因为`Camera.open();`没有返回对相机的引用。

有不同的可能性。一个可能是您的清单文件中缺少相机权限。检查它`<uses-permission android:name="android.permission.CAMERA" />`

在我的 Nexus 7 上，我也遇到了问题，`Camera.open()`因为出于某种原因，这与返回的 null`Camera.open(0)`相同，但返回了我的前置摄像头的对象。可能这是只有前置摄像头的设备的普遍问题，但我不知道。`Camera.open()``Camera.open(1)``Camera`

无论如何，这应该是你要看的地方。

[相机 | 安卓开发者](http://developer.android.com/reference/android/hardware/Camera.html#open%28int%29)

# meteor - 如何将外部服务登录添加到 Meteor 中已经存在的帐户？

> ID：15592965
> 
> 赞同：9
> 
> 时间：2013-03-23T22:43:22.653
> 
> 标签：meteor

为我的应用程序创建了个人资料页面后，我想显示用户所在的社交服务列表。令我震惊的是，最简单的方法是为此使用 Meteor 的内置帐户系统。

有没有向现有帐户添加外部服务的好方法？

此外，用户是否可以使用我的应用程序中的任何一个（例如）Facebook**和**他的密码登录？

另一个自然而然的问题是：有没有一种好方法可以将特定于应用程序的密码添加到使用外部服务创建的帐户中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-02T15:24:09.373

这是另一种方法。在这个解决方案中，我重写了一个核心函数并添加了一些自定义行为。我的目标是将服务数据与当前登录的用户相关联，然后让核心功能像往常一样做它的事情。

```
orig_updateOrCreateUserFromExternalService = Accounts.updateOrCreateUserFromExternalService;
Accounts.updateOrCreateUserFromExternalService = function(serviceName, serviceData, options) {
  var loggedInUser = Meteor.user();
  if(loggedInUser && typeof(loggedInUser.services[serviceName]) === "undefined") {
    var setAttr = {};
    setAttr["services." + serviceName] = serviceData;
    Meteor.users.update(loggedInUser._id, {$set: setAttr});
  }
  return orig_updateOrCreateUserFromExternalService.apply(this, arguments);
} 
```

优点：

*   避免创建不必要的帐户
*   代码简短易懂
*   如果将此功能添加到 Meteor 核心，则代码很容易删除

缺点：

*   要求用户登录。如果用户最初使用 twitter 登录，然后注销，然后使用 facebook 登录，则将创建两个单独的帐户。
*   共享计算机的用户可能会无意中合并他们的帐户。
*   依赖于 updateOrCreateUserFromExternalService 如何工作的知识。这并不可怕——因为它是 Meteor 的公共 api 的一部分，它可能不会发生巨大的变化（反正不会经常发生）。但这仍然是有风险的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-21T12:06:54.817

这是我向现有用户帐户添加凭据的方法：[.../meteor-how-to-login-with-github-account.html](http://ondrej-kvasnovsky.blogspot.com/2013/07/meteor-how-to-login-with-github-account.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T15:38:55.357

是的，一个用户帐户可以与多个服务相关联，并同时具有基于密码的登录。在[Meteor 文档](https://docs.meteor.com/#meteor_users)中，您可以看到这样一个用户帐户的结构：

```
{
  _id: "bbca5d6a-2156-41c4-89da-0329e8c99a4f",  // Meteor.userId()
  username: "cool_kid_13", // unique name
  emails: [
    // each email address can only belong to one user.
    { address: "cool@example.com", verified: true },
    { address: "another@different.com", verified: false }
  ],
  createdAt: 1349761684042,
  profile: {
    // The profile is writable by the user by default.
    name: "Joe Schmoe"
  },
  services: {
    facebook: {
      id: "709050", // facebook id
      accessToken: "AAACCgdX7G2...AbV9AZDZD"
    },
    resume: {
      loginTokens: [
        { token: "97e8c205-c7e4-47c9-9bea-8e2ccc0694cd",
          when: 1349761684048 }
      ]
    }
  }
} 
```

要将用户名/密码登录添加到现有帐户，您可以`Accounts.sendResetPasswordEmail`在服务器端使用。这也确保更改发生经过身份验证和授权。

当然，您也可以自己使用新密码更新服务器端的用户记录，但这可能会在您的应用程序中造成安全漏洞。如果可能的话，我还建议不要为此实施自己的加密协议，因为[这很难](https://security.stackexchange.com/a/2210)。

如果您想添加电子邮件以外的其他服务，例如，您可以

1.  调用服务器方法，在当前用户的 MongoDB 文档中保存一个随机的长令牌并将其返回给客户端。
2.  使用另一个服务重新登录用户`Accounts.loginWith[OtherService]`。这会使用其他服务上的新帐户将用户注销并再次登录。
3.  使用从第一个方法返回的令牌作为参数调用第二个服务器方法。第二种方法搜索具有给定令牌的用户帐户并将其数据合并到当前（新）帐户中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-05T12:34:47.213

查看此帖子中的示例和答案。它几乎为您提供了集成多个外部和内部帐户的代码。通过细微的调整，您可以根据需要为每个帐户添加密码字段。

[如何使用 Meteor.loginWithGoogle 与 mrt:accounts-ui-bootstrap-dropdown](https://stackoverflow.com/questions/26177463/how-to-use-meteor-loginwithgoogle-with-mrtaccounts-ui-bootstrap-dropdown/26179099#26179099)

代码：

```
isProdEnv = function () {
    if (process.env.ROOT_URL == "http://localhost:3000") {
        return false;
    } else {
        return true;
    }
}

Accounts.loginServiceConfiguration.remove({
    service: 'google'
});

Accounts.loginServiceConfiguration.remove({
    service: 'facebook'
});

Accounts.loginServiceConfiguration.remove({
    service: 'twitter'
});

Accounts.loginServiceConfiguration.remove({
    service: 'github'
});

if (isProdEnv()) {
    Accounts.loginServiceConfiguration.insert({
        service: 'github',
        clientId: '00000',
        secret: '00000'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'twitter',
        consumerKey: '00000',
        secret: '00000'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'google',
        appId: '00000',
        secret: '00000'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'facebook',
        appId: '00000',
        secret: '00000'
    });
} else {
    // dev environment
    Accounts.loginServiceConfiguration.insert({
        service: 'github',
        clientId: '11111',
        secret: '11111'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'twitter',
        consumerKey: '11111',
        secret: '11111'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'google',
        clientId: '11111',
        secret: '11111'
    });
    Accounts.loginServiceConfiguration.insert({
        service: 'facebook',
        appId: '11111',
        secret: '11111'
    });
}

Accounts.onCreateUser(function (options, user) {
    if (user.services) {
        if (options.profile) {
            user.profile = options.profile
        }
        var service = _.keys(user.services)[0];
        var email = user.services[service].email;
        if (!email) {
            if (user.emails) {
                email = user.emails.address;
            }
        }
        if (!email) {
            email = options.email;
        }
        if (!email) {
            // if email is not set, there is no way to link it with other accounts
            return user;
        }

        // see if any existing user has this email address, otherwise create new
        var existingUser = Meteor.users.findOne({'emails.address': email});
        if (!existingUser) {
            // check for email also in other services
            var existingGitHubUser = Meteor.users.findOne({'services.github.email': email});
            var existingGoogleUser = Meteor.users.findOne({'services.google.email': email});
            var existingTwitterUser = Meteor.users.findOne({'services.twitter.email': email});
            var existingFacebookUser = Meteor.users.findOne({'services.facebook.email': email});
            var doesntExist = !existingGitHubUser && !existingGoogleUser && !existingTwitterUser && !existingFacebookUser;
            if (doesntExist) {
                // return the user as it came, because there he doesn't exist in the DB yet
                return user;
            } else {
                existingUser = existingGitHubUser || existingGoogleUser || existingTwitterUser || existingFacebookUser;
                if (existingUser) {
                    if (user.emails) {
                        // user is signing in by email, we need to set it to the existing user
                        existingUser.emails = user.emails;
                    }
                }
            }
        }

        // precaution, these will exist from accounts-password if used
        if (!existingUser.services) {
            existingUser.services = { resume: { loginTokens: [] }};
        }

        // copy accross new service info
        existingUser.services[service] = user.services[service];
        existingUser.services.resume.loginTokens.push(
            user.services.resume.loginTokens[0]
        );

        // even worse hackery
        Meteor.users.remove({_id: existingUser._id}); // remove existing record
        return existingUser;                  // record is re-inserted
    }
}); 
```

# wordpress - 使用页面模板将所有 Wordpress 页面拉到一个页面中

> ID：15592968
> 
> 赞同：0
> 
> 时间：2013-03-23T22:43:34.843
> 
> 标签：wordpress

我希望能够将所有页面从我的自定义主题拉到一个页面模板中，但仍然允许根据所选页面模板显示所有页面。

换句话说，如果我有一个名为“Main”的页面模板，我将所有页面数据都拉入其中，并创建了一个名为“Home”的页面，我希望此页面根据我为“主页”选择的页面模板。这可能吗？

谢谢，JW

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T17:36:57.110

好的，所以我将在这里回答我自己的问题。我自己做了一些研究，并修改了教程中的一些代码来 Ajaxify 一个主题。需要发生的是这个。

在您的 page.php 文件或您想用作主页模板的任何模板中，添加它。

```
<?php query_posts( array('post_type'=>'page', 'posts_per_page' => 1000, 'orderby' => 'menu_order', 'order' => 'ASC') ); ?>
<?php if(have_posts()): while(have_posts()): the_post(); ?>

    <?php 
        global $post;
        $slug = $post->post_name;
        locate_template(
            array(
                "template-$slug.php",
                'template-main.php'
            ), true
        );
    ?>
<?php endwhile; endif; ?> 
```

然后将您的页面模板添加到主题中，并根据页面名称命名，即 template-about.php 或 template-home.php。然后，您可以将所有内容动态显示在一个单页站点中，并能够使用默认的 Wordpress 页面。我希望我对此很清楚，如果没有，请随时告诉我，我会尽力澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:02:03.103

在所有页面模板中使用：

```
include 'page.php'; 
```

然后在 page.php 你可以使用这个：

```
if (is_page_template('page_temp_one.php')) { ... } 
```

# php - 我如何匹配输入类型值和mysql数据库行值

> ID：15592972
> 
> 赞同：1
> 
> 时间：2013-03-23T22:44:32.917
> 
> 标签：php, mysql, database, autocomplete, autosuggest

如何匹配输入类型值和 mysql 数据库行值？如果两个值不应该相互匹配，那么`echo A Message`？

**主页**

```
 $(function() {
   $( "#textname" ).autocomplete({
   source: "data.php",
   minLength: 1
   });
   });
   </script>

   <div class="ui-widget">
   <label for="Name">Name: </label>
   <input id="textname" class="textname"/>
   </div> 
```

**数据页**

```
<?php
$conn = mysql_connect("localhost", "root", "")  or die(mysql_error());
mysql_select_db("edgesoft", $conn) or die(mysql_error());
$q = strtolower($_GET["term"]);

$return = array();
$query = mysql_query("select * from customers where cname like '%$q%'") or die(mysql_error());
while ($row = mysql_fetch_array($query)) {
array_push($return,array('label'=>$row['cname'],'value'=>$row['cname']));
}

echo(json_encode($return));

if(json_encode($return))
{
echo "test";    
}
?> 
```

# c# - 如何使用正则表达式清理 XML 属性？

> ID：15592973
> 
> 赞同：1
> 
> 时间：2013-03-23T22:44:45.057
> 
> 标签：c#, xml, regex

我想从我的 XML 结构中删除所有属性。我的选择是正则表达式，但如果有更简单的方法，我愿意接受建议。

为了挑选出一个修复标签，我使用了以下内容。

```
String clean = Regex.Replace(filled, ".*?<holder[^>]*?>(.*?)</holder>.*?", "$1"); 
```

这给了我标签持有人的内容。我现在想保留文本质量，但省略内部标签中的所有属性。我尝试了以下方法。

```
String plain1 = Regex.Replace(clean, "(<[^>]*?>)(.*?)(</[^>]*?>)", "$1$2$3");
String plain2 = Regex.Replace(clean, "(<[a-zA-Z]*?)([^>]*?)(>)", "$1$3"); 
```

但它给了我同样的东西（*plain1*）和没有原始名称的空标签（*plain2*）。什么都没有清理干净，或者一切都清理干净了。我做错了什么？

我注意到将开始更改为加号，给我的标签只包含名称的第一个字母，所以我很确定以下是正确的方法，只要我能以*1 美元*的价格制作拾取部分最大。我怎么做？

```
String plain3 = Regex.Replace(clean, "(<[a-zA-Z]+?)([^>]*?)(>)", "$1$3"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:46:29.187

您需要跳过第一个括号中的问号。

```
String plain3 = Regex.Replace(clean, "(<[a-zA-Z]+)([^>]*?)(>)", "$1$3"); 
```

一些观察。

*   您需要处理结束标记。您现在正在跳过斜线字符。

```
Regex.Replace(clean, "(<[/a-zA-Z]+)([^>]*?)(>)", "$1$3"); 
```

*   你不需要*$2*。不是真的*3 美元*，也不是。

```
Regex.Replace(clean, "(<[a-zA-Z]+)[^>]*?>", "$1>"); 
```

*   在正则表达式中有更好的方法来表达“只有字母”。

```
Regex.Replace(clean, @"(<[\w]+)([^>]*?)(>)", "$1$3"); 
```

所以最后，你可能会得到以下结果。

```
Regex.Replace(clean, @"(<[/\w]*)[^>]*?>", "$1>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:16:06.320

> 我的选择是正则表达式，但如果有更简单的方法，我愿意接受建议。

我想你已经知道[了](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。*不要试图用 regex 解析 xml/html*，使用真正的 xml 解析器来处理 xmls

我会用[`Linq To XML`](http://msdn.microsoft.com/en-us/library/bb387061.aspx). 借助递归函数可以轻松完成

```
var xDoc = XDocument.Load(fileName1);
RemoveAttributes(xDoc.Root);
xDoc.Save(fileName2);

void RemoveAttributes(XElement xRoot)
{
    foreach (var xAttr in xRoot.Attributes().ToList())
        xAttr.Remove();

    foreach (var xElem in xRoot.Descendants())
        RemoveAttributes(xElem);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T23:18:41.563

请不要为此使用正则表达式。

以下是如何使用纯 XML 实现它的示例（前半部分只是控制台的东西，您需要的方法是 ProcessNode）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;
using System.Xml.XPath;

internal static class Program
{
    public static void Main(string[] args)
    {
        var xmlFile = XElement.Load(@"c:\file.xml"); // Use your file here
        var blockquote = xmlFile.XPathSelectElement("/");

        var doc = new XDocument();
        doc.Add(new XElement("root"));
        var processedNodes = ProcessNode(blockquote);
        foreach (var node in processedNodes)
        {
            doc.Root.Add(node);
        }

        var sb = new StringBuilder();
        var settings = new XmlWriterSettings();
        settings.OmitXmlDeclaration = true;
        settings.Encoding = Encoding.UTF8;
        settings.Indent = true;
        using (var sw = XmlWriter.Create(sb, settings))
        {
            doc.WriteTo(sw);
        }

        Console.OutputEncoding = Encoding.UTF8;
        Console.WriteLine(sb);
    }

    private static IEnumerable<XNode> ProcessNode(XElement parent)
    {
        foreach (var node in parent.Nodes())
        {
            if (node is XText)
            {
                yield return node;
            }
            else if (node is XElement)
            {
                var container = (XElement)node;
                var copy = new XElement(container.Name.LocalName);
                var children = ProcessNode(container);
                foreach (var child in children)
                {
                    copy.Add(child);
                }
                yield return copy;
            }
        }
    }
} 
```

# r - 如何对齐合并两个 xts 文件的日期？

> ID：15592975
> 
> 赞同：2
> 
> 时间：2013-03-23T22:44:59.817
> 
> 标签：r, merge, xts, apply

我正在尝试通过将两个数据系列合并到一个文件中来分析 R 中的 1 年百分比变化数据。一个系列是每周一次，另一个是每月一次。将每周系列转换为每月是问题所在。在每周数据上使用`apply.monthly()`会创建一个月度文件，但在通过`merge.xts()`. 问题：如何将生成的合并文件（如下示例）更改为两个系列的每月条目？

```
2012-11-01 0.02079801          NA
2012-11-24         NA -0.03375796
2012-12-01 0.02052502          NA
2012-12-29         NA  0.04442094
2013-01-01 0.01881466          NA
2013-01-26         NA  0.06370272
2013-02-01 0.01859883          NA
2013-02-23         NA  0.02999318 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T05:41:13.747

您可以通过`indexAt="firstof"`调用来`to.monthly`获取每月第一天的索引数据。

```
library(quantmod) 
getSymbols(c("USPRIV", "ICSA"), src="FRED")
merge(USPRIV, to.monthly(ICSA, indexAt="firstof", OHLC=FALSE)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:28:57.853

像这样的东西：

```
do.call(rbind, by(d[-1], d[[1]] - as.POSIXlt(d[[1]])$mday, FUN=apply, 2, sum, na.rm=TRUE))
##                    V2          V3
## 2012-10-31 0.02079801 -0.03375796
## 2012-11-30 0.02052502  0.04442094
## 2012-12-31 0.01881466  0.06370272
## 2013-01-31 0.01859883  0.02999318 
```

请注意，日期被编码为行名，而不是结果中的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-14T08:15:19.960

这是一个经常发生的问题。有时我会忘记自己的解决方案，而谷歌也不容易找到解决方案。所以我在这里发布我的解决方案。

基本上，只需将每月汇总系列的索引转换为`yearmon`. 您还可以选择将其转换回`yyyy-mm-dd`（每月 1 日）格式，使用`as.date`. 在删除确切的日期并且索引“均质化”后，所有列都完美对齐。

```
# Here with dplyr 
time(myxts)<- time(myxts) %>% as.yearmon() %%> as.date()
#or without dplyr
time(myxts)<-  as.date( as.yearmon( time(myxts) )  ) 
```

# c - 服务器没有进入 if 语句，它是结构。C中的套接字编程

> ID：15592976
> 
> 赞同：0
> 
> 时间：2013-03-23T22:45:09.637
> 
> 标签：c, if-statement, socket.io

我想比较客户端发送到服务器的一些数据。但是我的服务器在我的结果函数中的随机函数之后卡住了。它没有 printf (printf("Into IF");) 或进入 ifs，这是为什么呢？

> 等待传入连接...按 Ctrl+C 结束服务器
> 
> 来自 127.0.0.1 的连接，端口 60697 收到消息：c Ramdom es 12

我的代码：

```
void
result(int sockfd)
{
    ssize_t     n;
    char        buf[MAXLINE];
    int         temp;
    time_t      ticks;
    int         i;
again:
    while ((n =read(sockfd, buf, MAXLINE)> 0))
    {
     buf[n] = '\0';
     printf("Message Recieved:%s\n",buf);
     srand (time(NULL));
     temp = rand() % 15+1;
     printf("Ramdom es %i\n",temp);
     printf("Into IF");  
     if ((strncmp (buf,"A",1) == 0) || (strncmp (buf,"a",1) == 0))
     {
      snprintf(buf, sizeof(buf), "You choose -%i tymes optin A on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);

     }
     else if ((strncmp (buf,"B",1) == 0) || (strncmp (buf,"b",1) == 0))
     {
      snprintf(buf, sizeof(buf), "You choose -%i tymes optin B on on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);

     }
     else
     {
       printf("Incorrect Input");
       Close(sockfd);
       break;
     }  
    }
    if (n < 0 && errno == EINTR)
    goto again;
    else if (n < 0)
        err_sys("read error");

}

int
main(int argc, char **argv)
{
    int                 listenfd, connfd;
    socklen_t           len;
    struct sockaddr_in  servaddr, cliaddr;
    char                buff[MAXLINE];
    /*char                message[MAXLINE];*/
    char                recvline[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("Server is running on 127.0.0.1, listening on port 5678\n");
    printf("\n");
    printf("Waiting for incoming connections...Press Ctrl+C to end server\n");

    for ( ; ; )
    {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("\n");
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

        result(connfd);
            Close(connfd);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:48:02.193

要打印`printf`添加“\n”（换行符），以便终端刷新并显示它。在您的代码中有几种情况，\n 将帮助您的 debug-printfs 出现。

这回答了“为什么 printf 不 printf”。我认为这不是你真正的问题。

# python - 如何通过 Python 脚本使用 NZ Loader (Netezza Loader)？

> ID：15592980
> 
> 赞同：2
> 
> 时间：2013-03-23T22:45:33.077
> 
> 标签：python, netezza

我有一个包含数百万条记录的巨大 csv 文件，我想使用 python 脚本将它加载到 Netezza DB 我尝试过简单的插入查询，但它非常慢。可以给我一些示例python脚本或一些想法我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T13:53:07.567

如果您安装了 Netezza 管理工具，您可以对`nzload`.

像这样的东西：

```
os.system("nzload -host myhost -u myuser -pw mypassword -db MYDB -t MYTABLE -skipRows 1 -nullValue NULL -quotedValue DOUBLE -df \"C:\\myinputfile.txt\" -delim \"|\" -dateDelim \"-\" -lf c:\\logs\\nzload.log -bf c:\\logs\\nzloadbad.log") 
```

另请参阅： [在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T08:44:50.297

您可以使用 nz_load4 加载数据，这是支持实用程序 /nz/support/contrib/bin

语法与 nzload 相同，默认情况下 nz_load4 将使用 4 个线程加载数据，您可以使用 -tread 选项达到 32 个线程以获取更多详细信息，请使用 nz_load4 -h

这将根据线程数创建日志文件，例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:19:06.757

你需要在你想要运行 nzload 的机器上安装 nzcli - 你的系统管理员应该能够把它放在你的 unix/linux 应用服务器上。有一个详细的过程来设置它，缓存密码等 - 系统管理员应该能够做到这一点。

设置完成后，您可以创建 NZ 控制文件以指向您的数据文件并执行加载。Netezza 数据加载指南详细说明了如何执行所有这些操作（可通过 IBM 获得）。

如果您有 CREATE EXTERNAL TABLE 权限，您也可以通过 aginity 来完成 - 您可以`INSERT INTO FROM EXTERNAL ... REMOTESOURCE ODBC`从 ODBC 连接加载文件。

# c# - 具有重复子项的多对多关系实体框架

> ID：15592981
> 
> 赞同：3
> 
> 时间：2013-03-23T22:45:42.400
> 
> 标签：c#, entity-framework-5

对使用实体框架和建立实体之间的关系有疑问。我想要实现的是在集合中拥有来自单独实体的重复项。

```
List<MenuItem> menuItems = new List<MenuItem>();
MenuItem m1 = menuRepository.GetItemByCode("001");
MenuItem m2 = menuRepository.GetItemByCode("001"); //same item but want to store it additionally as m2.MenuItemExtras will be different from m1.MenuItemExtras

menuItems.Add(m1);
menuItems.Add(m2);

Order order = new Order();
order.MenuItems = menuItems;
orderRepository.Save(order); 
```

这工作正常，但我只将一条记录插入到表中，即

```
OrderMenuItem
    OrderPK = 1, MenuItemPK = 1 //Id of menuItem with code "001" 
```

我可能想要的是这样的：OrderMenuItem 表包含带有它自己的主键的第三列，而不是它是 OrderPK 和 MenuItemPK 的组合。IE

```
OrderMenuItem 
    OrderMenuItemId = 1, OrderPK = 1, MenuItemPK = 1
    OrderMenuItemId = 2, OrderPK = 1, MenuItemPK = 1 
```

不确定如何实际实现这一目标，以及我是否需要重新定义我的班级关系。感谢您的任何意见。

下面是 DbContext 的类和片段：

```
public class Order
{
    public Guid OrderId { get; set; }

    public virtual ICollection<MenuItem> MenuItems { get; set; }

    public Order()
    {
        MenuItems = new Collection<MenuItem>();
    }
}

public class MenuItem
{
    public Guid MenuItemId { get; set; }
    public string Code { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public int SortOrder { get; set; }

    public virtual ICollection<MenuItemExtras> MenuItemExtras { get; set; }
}

public class MenuItemCategory
{
    public Guid MenuItemCategoryId { get; set; }
    public string Name { get; set; }
    public string Code { get; set; }
    public string HotKey { get; set; }
    public int SortOrder { get; set; }

    public virtual ICollection<MenuItem> MenuItems { get; set; }
}

public class MenuItemExtras
{
    public Guid MenuItemExtrasId { get; set; }
    public string Name { get; set; } 
    public decimal Price { get; set; }
} 
```

在我的 OnModelCreating ovveride 上的 DbContext 中，我有以下内容：

```
modelBuilder.Entity<MenuItemCategory>().Property(m => m.MenuItemCategoryId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
modelBuilder.Entity<MenuItemCategory>().HasMany(m => m.MenuItems).WithMany();

modelBuilder.Entity<MenuItem>().Property(m => m.MenuItemId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
modelBuilder.Entity<MenuItem>().HasMany(m => m.MenuItemExtras).WithMany();

modelBuilder.Entity<MenuItemExtras>().Property(m => m.MenuItemExtrasId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

modelBuilder.Entity<Order>().Property(o => o.OrderId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
modelBuilder.Entity<Order>().HasMany(m => m.MenuItems).WithMany(); 
```

这会生成以下表格：

```
MenuItem
MenuItemCategory
MenuItemCategoryMenuItem
MenuItemExtras
MenuItemMenuItemExtras
Order
OrderMenuItems 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:54:45.513

我们在这里谈论的是 Pizza & Co.，而不是下拉菜单，对吧？

在我的理解中，您必须区分*可能*拥有的额外服务和客人想要与订购`MenuItem`的实际*订购*`MenuItem`的额外服务。

该类`MenuItem`可以保持不变，它描述了餐厅为特定对象提供的所有*可能的*`MenuItem`Extras ：

```
public class MenuItem // Pizza Margherita
{
    // ...
    public virtual ICollection<MenuItemExtras> MenuItemExtras { get; set; }
    // Possible Extras: Paprika or Ham or Mushrooms
} 
```

但是要对*有序*的Extras 进行建模（我希望它是*可能的*Extras 的一个子集），您必须引入一个新的 class `OrderMenuItem`。An`Order`有一个`Items`这种新类型的集合`OrderMenuItem`（不是直接的`MenuItem`）：

```
public class Order
{
    public Guid OrderId { get; set; }
    public virtual ICollection<OrderMenuItem> Items { get; set; }
} 
```

参考`OrderMenuItem`了客人所订购的客人，并从所有可能的 Extras 中选择了客人`MenuItem`的集合：`MenuItemExtras`

```
public class OrderMenuItem
{
    public int OrderMenuItemId { get; set; }

    public int OrderId { get; set; }
    public Order Order { get; set; }

    public int MenuItemId { get; set; }
    public MenuItem MenuItem { get; set; } // Pizza Margherita

    public ICollection<MenuItemExtras> MenuItemExtras { get; set; }
    // Ordered Extras: Paprika and Mushrooms (subset of Possible Extras)
} 
```

新的关系可以这样定义：

```
modelBuilder.Entity<OrderMenuItem>()
    .HasRequired(o => o.Order)
    .WithMany(o => o.Items)
    .HasForeignKey(o => o.OrderId);

modelBuilder.Entity<OrderMenuItem>()
    .HasRequired(o => o.MenuItem)
    .WithMany() // a MenuItem can be ordered in many orders
    .HasForeignKey(o => o.MenuItemId);

modelBuilder.Entity<OrderMenuItem>()
    .HasMany(o => o.MenuItemExtras)
    .WithMany() // an Extra can be ordered in many orders
    .Map(m => {
        m.ToTable("OrderMenuItemMenuItemExtras");
        m.MapLeftKey("OrderMenuItemId");
        m.MapRightKey("MenuItemExtraId");
    }); 
```

该`OrderMenuItem`表将有自己的主键`OrderMenuItemId`和两个外键，一个键`Order`和一个键`MenuItem`- 正如您所期望的那样。与有序 Extras 的关系是一个新的多对多关系，连接表名为`OrderMenuItemMenuItemExtras`.

# html - CSS 帮助 - 向右浮动忽略边距

> ID：15592982
> 
> 赞同：1
> 
> 时间：2013-03-23T22:45:51.250
> 
> 标签：html, css

我在表单中有两个按钮，我想将一个放在左边（上一个），另一个放在右边（下一个/提交）。问题是当我隐藏上一个按钮时（我在表单的第一个选项卡上这样做）下一个/提交按钮悬停在内容之外。当上一个按钮被隐藏时，如何让按钮按我想要的方式定位？

**ASP.NET：**

```
 <div id="formContainer" style="padding:20px; margin-top:50px; margin-bottom:20px; width:600px; margin-left:auto; margin-right:auto; border:solid black 1px;background-color:#c6c6c6">
        <div id="recipeForm1">
              <!-- OMMITTED FOR Length Purposes -->
        </div>
        <div id="recipeForm2">
             <!-- OMMITTED FOR Length Purposes -->
            </table>
        </div>
        <div id="recipeForm3">
            directions
        </div>
        <div id="recipeForm4">
            Nutrition
        </div>

        <div id="recipeForm5">
            review
        </div>
        <div id="buttons"style="margin-left:auto; margin-right:auto; padding-top:30px;">
            <input id="btnPrevious" type="button" value="Previous" /> 
            <input id="btnNext" type="button" value="Next" style=" float:right;" />
        </div>

    </div> 
```

我根据需要在配方 div 和按钮上使用 jquery .show 和 .hide。当我在 recipeform1 上时，前一个按钮不见了，表单看起来像：

![在此处输入图像描述](../Images/534836b6bd3679c2b0e2b26da261d6a1.png)

我希望它看起来像这样（减去以前的出现）： ![在此处输入图像描述](../Images/8af7b975e68ae896a7a8c86318b02e2a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T22:47:31.250

使用*clearfix*解决方案...

```
#buttons {
     overflow: hidden;
} 
```

*发生这种情况是因为您将下一个*按钮浮动到右侧，因此当*上*一个按钮被隐藏时，其父元素会折叠（默认情况下，元素不会展开以包含浮动元素）。

# objective-c - UINavigationController pop/push UITableViewController 仅适用于动画：否

> ID：15592983
> 
> 赞同：0
> 
> 时间：2013-03-23T22:46:05.477
> 
> 标签：objective-c

我的应用程序使用 UINavigationController 来显示不同的 UITableViewControllers。但是有一个非常奇怪的行为：将 UITableViewController 推送到导航控制器只有在动画`pushViewController:animated:`设置为**NO**时才有效。

```
[navController pushViewController:tableController animated:NO] 
```

将动画设置为**YES**只会在显示 tableController 视图之前冻结应用程序。此时没有异常或错误。最后，应用程序在投掷几分钟后崩溃`EXC_??? (11) (code=0, subcode=0x0)`。但是，这是什么意思？

*更多信息：*

所有控制器和视图都以编程方式加载。第一的：

```
UITableViewController *tableController1 = [[UITableViewController alloc] init];
navController = [[UINavigationController alloc] initWithRootViewController:tableController1]
[self.view addSubview:navController.view]; 
```

单击按钮后，tableController2 设置为：

```
UITableViewController *tableController2 = [[UITableViewController alloc] init];
[navController pushViewController:tableController2 animated:NO];
// -> NO works, YES freezes 
```

为了分析tableController2，我还创建了一个自己的tableViewController。结果是：点击按钮加载第二个表格视图控制器后，`viewWillAppear`调用所有方法。`viewDidAppear`未调用且未显示视图。

有人知道如何找到解决此问题的解决方案吗？或任何想法，我的代码中可能缺少什么？注释掉一堆代码并调试几个小时并没有帮助......

**编辑：**

正如评论中提到的，最好更换`[self.view addSubview:navController.view];`. 所以我更改了我的代码并将导航控制器 init 移动到*appDelegate*。但没有成功，仍然是相同的行为。

```
UITableViewController *tableController1 = [[UITableViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:tableController1];
NSArray* controllers = [NSArray arrayWithObjects:navController, ..., nil];
tabBarController.viewControllers = controllers; 
```

`tabBarController`只是应用程序的rootViewController。这不应影响导航控制器及其控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:20:42.853

我认为初始化导航控制器存在问题。

尝试更换：

```
[self.view addSubview:navController.view]; 
```

有以下内容：

```
self.window.rootViewController = navController; 
```

这当然应该在您的*AppDelegate*中完成。

编辑：我不确定你的项目有什么问题。我创建了一个与您的导航逻辑相同的新项目。

这是`application:didFinishLaunchingWithOptions:`方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];

    UITableViewController *tvc = [[PSTableViewController alloc] init];
    UINavigationController *navCtrl = [[UINavigationController alloc] initWithRootViewController:tvc];
    UIViewController *vc = [[UIViewController alloc] init];
    UITabBarController *tbc = [[UITabBarController alloc] init];
    tbc.viewControllers = @[navCtrl, vc];
    self.window.rootViewController = tbc;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是表格视图控制器`tableView:didSelectRowAtIndexPath:`方法。我只是推动另一个表视图控制器，它应该可以正常工作。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     UITableViewController *detailViewController = [[UITableViewController alloc] init];
     [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

我已经在[这里](http://pastelink.me/dl/7b88c2)上传了示例项目。您可以下载它并与您的比较。祝你好运。

# java - 在 Eclipse 中的 else 之后评论之前没有换行符

> ID：15592984
> 
> 赞同：6
> 
> 时间：2013-03-23T22:46:16.507
> 
> 标签：java, eclipse, comments, format, alignment

我一直是一个“对齐花括号”的人。对于宽显示器，我在代码后放了很长的注释。所以在Eclipse中我想做这样的格式化：

```
if(foo)
{
  something();
}
else
{
  somethingElse();
} 
```

美好的; 这很容易。但后来我添加了一条评论：

```
if(foo)  //if foo is true
{
  something();
}
else  //if no foo
{
  somethingElse();
} 
```

Dratted Eclipse 将其格式化如下：

```
if(foo)  //if foo is true
{
  something();
}
else
//if no foo
{
  somethingElse();
} 
```

伟大的。整个浪费的线路。而且看起来很丑。它甚至不准确，因为我想评论这`else`条线。

如何让 Eclipse 用对齐的大括号格式化我的`if`/ `else`，但允许我的评论与`else`?

这是在 Eclipse 4.2.2 上测试的，我刚刚确认它在 Eclipse 4.3M7 中也不起作用。

我已经就这个问题提交了一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=407832)；让我们看看 Eclipse 开发人员怎么说。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T15:36:00.587

1.  Go to preferences
2.  Type "format" in the searchbox
3.  Select "Java->Code style->Formatter" in the tree
4.  Click the "Edit..." button
5.  Go to the "Comments" tab
6.  Select "preserve whitespace between code and line comments"

That did it for me in Galileo.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T03:17:32.783

我正在使用 Eclipse Indigo (3.7)，我所要做的就是转到控制语句 -> 选中“在 'if' 语句中的 'else' 之前插入换行符”。（在属性/Java 代码样式/格式化程序/编辑内...）

我正在使用默认 Eclipse 内置模板的副本。如果您确定您没有篡改内置模板，请告诉我们您使用的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:36:40.873

~~在 Eclipse 配置文件中，注释选项卡上有一个选项“保留代码和行注释之间的空白”，您可以尝试一下，看看它是否有效~~

编辑：

我想我明白了：在格式编辑中，转到`Braces`选项卡并将`Blocks`as `Same line`. 由于我在这里改变了很多，我不确定这是唯一需要的。但这是需要的。上也有标记`Insert new line before else in an if`。`Control Statements`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T10:11:40.250

我正在使用 Eclipse Juno (3.8.1) 和默认的 Eclipse 内置模板作为 java 代码格式化程序。我的代码看起来就像你想要的那样。

我什至不必更改他在回答中提到的选项 cleberz。

您使用的是哪个 Eclipse 版本和代码格式化程序模板？

# ios - 我的 NSRegularExpression 有什么问题？

> ID：15592988
> 
> 赞同：3
> 
> 时间：2013-03-23T22:47:13.103
> 
> 标签：ios, objective-c, xcode, ios6, nsregularexpression

```
 NSString *body = @"...";

    // Remove all HTML and formatting from body
    NSError *error = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(&lt;.*?&gt;|\\n|\\t|&.*?;)" options:NSRegularExpressionCaseInsensitive error:&error];
    body = [regex stringByReplacingMatchesInString:body options:0 range:NSMakeRange(0, [body length]) withTemplate:@""]; 
```

但是当我编译它时，我得到了这个错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSRegularExpression enumerateMatchesInString:options:range:usingBlock:]: nil argument”

我在正则表达式编辑器中测试了该模式并且它有效，我看不出我在这里做错了什么。

# python - Google 电子钱包服务器是否会在每次续订订阅时进行回调？

> ID：15592992
> 
> 赞同：1
> 
> 时间：2013-03-23T22:47:40.897
> 
> 标签：python, android-pay

我有一个使用订阅 API 的钱包集成 Web 产品，如[文档](https://developers.google.com/commerce/wallet/digital/docs/subscriptions)中所述。模拟了初始付款和取消，一切正常。

Google 电子钱包服务器是否会在每次重复续订时回叫服务器（显然当时客户端可能不在线）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:04:09.567

定期付款会自动发生，无需回调商家服务器。

处理定期付款后，客户将收到一封电子邮件确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T08:51:44.880

因此，您只会收到两次回发：订阅时和取消时。这听起来不错，但比这更复杂。这里有两个例子：

1.  用户取消

假设客户决定取消中间试用期。即使在试用期结束之前，您也会立即收到通知回调。这意味着你最终必须弄清楚该怎么做。理论上，您应该将订单 ID 与您为订阅记录的数据匹配，并将剩余时间返还给用户，即不要立即禁用他们的帐户。

当付费客户决定取消时，情况非常相似。如果他们在计费周期的中间取消，您将不得不回顾计费周期的开始时间，并将他们四舍五入到最近的计费周期，并允许他们在此之前使用您的服务。这可能会产生一些问题，因为该方法可能会与 Google 正在做的事情有所不同。

1.  付款失败

这就是我们遇到问题的地方。如果付款失败，Google 将自动取消订阅，但这可能会在新的结算周期后几天发生。当您收到通知回调时，无法知道取消的原因，因此通常您不知道该怎么做。如果您立即取消订单，并且通知是针对试图取消订单的付费客户，以便他们不会到达下一个结算日期，那么您将必须提供他们已付款的剩余天数。但是由于无法区分取消，您无法判断这是否是由于信用卡无效，在这种情况下您应该立即取消。

The only solution to this problem is to manually investigate your orders. And this is what sucks about Google Wallet although it is a pretty cool service.