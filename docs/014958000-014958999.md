# StackOverflow 问答 14958000-14958999

# c# - 如何在 C# 中创建字符串 HttpContext.GetGlobalResourceObject(@"languagetext","PersonalReportFrench")？

> ID：14958001
> 
> 赞同：0
> 
> 时间：2013-02-19T12:52:46.630
> 
> 标签：c#, javascript, asp.net

我在我的 aspx 页面中的 javascript 中有硬编码值，它正在工作

```
PersonalReportLink.innerHTML = '<%=(String)HttpContext.GetGlobalResourceObject(@"languagetext","PersonalReportFrench")%>'; 
```

现在我想动态地做我正在尝试的是

> sel_lang ="French" //我从用户那里获取 PerReportStr = '<%= (String)HttpContext.GetGlobalResourceObject(@"languagetext","PersonalReport'+ sel_lang + '") %>';

执行后给我空字符串，即 PerReportStr="" 我认为正确的关键字没有传递给资源文件

原因是我无法使用 C# 正确形成以下字符串

**(String)HttpContext.GetGlobalResourceObject(@"languagetext","PersonalReportFrench")**

请帮助我使用 C# 创建上述字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:38:15.337

如果此 Javascript 直接在 ASPX 页面上，那么您应该能够使用以下语法访问全局资源对象：

```
PersonalReportLink.innerHTML = '<%= GetGlobalResourceObject("languagetext","PersonalReportFrench") %>'; 
```

但是，在尝试本地化嵌套在 javascript 文件中的字符串时，您可能会遇到问题。如果这不起作用，那么您可能需要以稍微复杂的方式本地化 Javascript。

您可以使用 ScriptManager 的 EnableScriptLocalization 属性将 Javascript 文件用作资源。

将以下内容添加到需要该资源的任何页面：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnableScriptGlobalization="true" EnableScriptLocalization="true">
    <Scripts>
        <asp:ScriptReference Path="~/scriptResources.js" ResourceUICultures="fr-FR,de-DE" />
    </Scripts>
</asp:ScriptManager> 
```

这里要注意的重要事项是脚本文件的路径、和中的文化`ResourceUICultures="fr-FR,de-DE"`列表`EnableScriptGlobalization="true"`。

接下来，将一个名为 scriptResources.js 的 JS 文件添加到您的项目中，并使用默认语言的资源填充它：

```
var PersonalReportFrench = 'My English text';
var resourceTwo = 'More English text'; 
```

然后为本地化字符串添加另一个 JS 文件`scriptResources.fr-FR.js`：

```
var PersonalReportFrench = 'Mon texte Français';
var resourceTwo = 'Texte plus Français'; 
```

现在，只要将`Thread.CurrentThread.CurrentCulture`其设置为正确的文化并且它与脚本文件名和`ResourceUICultures`属性中的语言环境匹配，ScriptManager 将加载正确的 JS 文件，您可以像这样在 JS 中使用变量：

```
PersonalReportLink.innerHTML = PersonalReportFrench; 
```

# php - 如何获得magento的REST API的扩展属性？

> ID：14958003
> 
> 赞同：1
> 
> 时间：2013-02-19T12:52:49.167
> 
> 标签：php, api, magento-1.7

我刚开始使用 Magento REST api，在与 OAuth 共舞一番之后，一切都很好。但是，我想知道如何获得产品的扩展属性。我可以获得基本信息，但没有我创建的扩展属性。

我更愿意一次完成所有这些，而不是必须逐个产品地创建另一个 REST 调用来获取这些附加信息。这是我想修改默认[产品](http://www.magentocommerce.com/api/rest/Resources/Products/products.html)api 调用的方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:34:10.127

我想我解决了：似乎我在创建新的扩展属性之前创建了 REST 角色，因此扩展属性没有分配给我的角色！解决方案是转到系统 > Web 服务 > REST 属性，然后修改 ACL 属性以便为我的角色分配正确的字段。之后扩展属性出现在我的请求中没有问题:-)

# dart - Dart Web UI 和在表格内迭代

> ID：14958009
> 
> 赞同：5
> 
> 时间：2013-02-19T12:53:01.240
> 
> 标签：dart, dart-webui

我试图迭代表内的数据：

```
 <table>
    <template iterate="entry in data">
      <tr>
        <template iterate="value in entry.values">
          <td>{{ value }}</td>
        </template>
      </tr>
    </template>
  </table> 
```

出于某种原因，我在构建时收到此错误消息：

> 表上下文中的意外结束标记（模板）导致了 voodoo 模式。

当我在里面迭代时它工作正常`ul`：

```
 <ul>
    <template iterate="entry in data">
      <template iterate="value in entry.values">
        <li>{{ value }}</li>
      </template>
    </template>
  </ul> 
```

我想使用表和迭代应该不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:56:22.057

看起来我找到了解决方案，虽然我仍然不知道问题是什么：

```
<table template iterate="entry in data">
  <tr template iterate="value in entry.values">
    <td>{{ value }}</td>
  </tr>
</table> 
```

# c# - BeginSend 何时不发送所有提供的字节？

> ID：14958010
> 
> 赞同：0
> 
> 时间：2013-02-19T12:53:00.923
> 
> 标签：c#

socket.EndSend() 返回发送的字节数。在哪些情况下 socket.BeginSend 不发送所有预期的字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:55:23.137

[如果一切顺利，永远不要](http://msdn.microsoft.com/en-us/library/7h44aee9.aspx)：

> 当您的应用程序调用 BeginSend 时，系统将使用单独的线程来执行指定的回调方法，并在 EndSend 上阻塞，直到 Socket 发送请求的字节数或抛出异常。

如果发送时意外连接丢失，将引发异常。

# java - 使用 GXT RPCMAP 序列化异常

> ID：14958014
> 
> 赞同：2
> 
> 时间：2013-02-19T12:53:17.677
> 
> 标签：java, tomcat, cluster-computing, gxt, gwt-rpc

我正在处理以下问题

```
 SEVERE: Unable to serialize delta request for sessionid [576530C8078FEBD71743551D4417DAD5]
java.io.NotSerializableException: com.extjs.gxt.ui.client.data.RpcMap
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at java.util.ArrayList.writeObject(ArrayList.java:570)
    at sun.reflect.GeneratedMethodAccessor955.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at org.apache.catalina.ha.session.DeltaRequest$AttributeInfo.writeExternal(DeltaRequest.java:392)
    at org.apache.catalina.ha.session.DeltaRequest.writeExternal(DeltaRequest.java:285)
    at org.apache.catalina.ha.session.DeltaRequest.serialize(DeltaRequest.java:299)
    at org.apache.catalina.ha.session.DeltaManager.serializeDeltaRequest(DeltaManager.java:617)
    at org.apache.catalina.ha.session.DeltaManager.requestCompleted(DeltaManager.java:1057)
    at org.apache.catalina.ha.session.DeltaSession.expire(DeltaSession.java:436)
    at org.apache.catalina.ha.session.DeltaManager.handleSESSION_EXPIRED(DeltaManager.java:1370)
    at org.apache.catalina.ha.session.DeltaManager.messageReceived(DeltaManager.java:1276)
    at org.apache.catalina.ha.session.DeltaManager.messageDataReceived(DeltaManager.java:1005)
    at org.apache.catalina.ha.session.ClusterSessionListener.messageReceived(ClusterSessionListener.java:92)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:897)
    at org.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:878)
    at org.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:275)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:80)
    at org.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:113)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:80)
    at org.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:80)
    at org.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:253)
    at org.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:271)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:211)
    at org.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:100)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

上传`List<InfoClasifCustom>`到会话时。

这个类如下：

```
public class InfoClasifCustom extends BaseModelData implements Serializable, IsSerializable, BeanModelTag, Comparable<InfoClasifCustom>{

private String idClasificacion;
private String color;
private Integer numEquiposGrupo;
private Long idGrupo;

private Boolean isEditable=false;
private static final long serialVersionUID = 8202856915683008011L;

public InfoClasificacionCustom() {

}

public void setColor(String color) {
    this.color = color;
}

public Integer getNumOrden() {
    return get("numOrden");
}

public void setNumOrden(Integer numOrden) {
    set("numOrden",numOrden);
} 
```

因此，我将标准属性和 BaseModelData 的 RPCMap 用于此类的属性，它们都是原始类型或包装器（即 int 或 Integer）。

RPCMap序列化会不会有问题？也许名单？我只是在生产中遇到这个问题，因为它是一个 Tomcat 集群。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T08:08:29.947

该问题与 RpcMap 实现有关。不幸的是，RpcMap 没有实现序列化（在旧的 GXT 版本上）。为了解决这个问题，我建议在你的项目中添加类“com.extjs.gxt.ui.client.data.RpcMap”，这等于真正的GXT“RpcMap”，但实现Serializable。通过这种方式，编译器使用您的类。

下面的代码示例：

```
enter code here
/*
 * Ext GWT - Ext for GWT
 * Copyright(c) 2007, 2008, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://extjs.com/license
 */
package com.extjs.gxt.ui.client.data;
import java.io.Serializable;
import java.util.Collection;
import java.util.Date;

import java.util.HashMap; import java.util.List; import
java.util.Map; import java.util.Set;

/**  * RpcMap is used to workaround a part of GWT RPC system.  *   *
<p /> The GWT RPC rebinder generates field serializers for every type
that is  * assignable to any type in the RPC interfaces.  *   * <p />
If BaseModel was to use "Map&lt;String, Serializable> map" this would
trigger  * the RPC system to generate field serializers for EVERY
Serializable type in  * your GWT Module's class path.  *   * <p />
Therefore BaseModel uses "Map&lt;String, RpcField> map" and relies on
type  * erasure (cast to Map&lt;Object,Object>) to work around this. 
*   * <p /> The only drawback is that if you have to ensure that field serializers are  * generated for any type you add to this map 
*   * <p /> RpcMap ensures that the following types are supported Byte, Short, Integer,  * Long, Float, Double, Date, Boolean, and
arrays of these types. As well as  * List, Set and Map  */
@SuppressWarnings("unused") public class RpcMap implements
Serializable{
/**      *       */     private static final long serialVersionUID = 1L;
private Byte _byte;   private Short _short;   private Integer
_integer;   private Long _long;   
private Float _float;   private Double _double;
private Date _date;   private Boolean _boolean;

 private Byte[] _bytes;   private Short[] _shorts;   private
Integer[] _integers;   private Long[] _longs;   private Float[]
_floats;   private Double[] _doubles;   private Date[] _dates;
private Boolean[] _booleans;

private List<String> _list;   private Set<String> _set;   private
Map<String, String> _map;

private transient Map<String, Object> map = new HashMap<String,Object>();

 public Map<String, Object> getTransientMap() {
   return map;   }

 public void clear() {
   map.clear();   }

 public boolean containsKey(Object key) {
   return map.containsKey(key);   }

 public boolean containsValue(Object value) {
   return map.containsValue(value);   }

 public Set<Map.Entry<String, Object>> entrySet() {
   return map.entrySet();   }

 public boolean equals(Object o) {
   if(o instanceof RpcMap){
     return map.equals(((RpcMap)o). map);
   }
   return false;   }

 public Object get(Object key) {
   return map.get(key);   }

 public int hashCode() {
   return map.hashCode();   }

 public boolean isEmpty() {
   return map.isEmpty();   }

 public Set<String> keySet() {
   return map.keySet();   }

 public Object put(String key, Object value) {
   return map.put(key, value);   }

 public void putAll(Map<? extends String, ? extends Object> m) {
   map.putAll(m);   }

 public Object remove(Object key) {
   return map.remove(key);   }

 public int size() {
   return map.size();   }

 public Collection<Object> values() {
   return map.values();   }

 @Override   public String toString() {
   return map.toString();   }

} 
```

# c# - 何时调用 Double 的 == 运算符？

> ID：14958015
> 
> 赞同：22
> 
> 时间：2013-02-19T12:53:24.120
> 
> 标签：c#, .net

这一切都始于有人向我提出的一个技巧问题。（书中提到 - 简而言之 C#）这是它的要点。

```
Double a = Double.NaN;
Console.WriteLine(a == a); // => false
Console.WriteLine(a.Equals(a)); // => true 
```

上面的好像不太对。a 应该始终是 == 自身（引用相等）并且两者都应该是一致的。

似乎 Double 重载了 == 运算符。经反射器确认如下：

```
[__DynamicallyInvokable]
public static bool operator ==(double left, double right)
{
    return (left == right);
} 
```

奇怪的是看起来是递归的，没有提到 NaN 特定的行为。那么为什么它返回false呢？

所以我添加了一些代码来区分

```
var x = "abc";
var y = "xyz";
Console.WriteLine(x == y); // => false 
```

现在我明白了

```
 L_0001: ldc.r8 NaN
    L_000a: stloc.0 
    L_000b: ldloc.0 
    L_000c: ldloc.0 
    L_000d: ceq 
    L_000f: call void [mscorlib]System.Console::WriteLine(bool)
    L_0014: nop 
    L_0015: ldloca.s a
    L_0017: ldloc.0 
    L_0018: call instance bool [mscorlib]System.Double::Equals(float64)
    L_001d: call void [mscorlib]System.Console::WriteLine(bool)
    L_0022: nop 
    L_0023: ldstr "abc"
    L_0028: stloc.1 
    L_0029: ldstr "xyz"
    L_002e: stloc.2 
    L_002f: ldloc.1 
    L_0030: ldloc.2 
    L_0031: call bool [mscorlib]System.String::op_Equality(string, string)
    L_0036: call void [mscorlib]System.Console::WriteLine(bool) 
```

*   对于双打， == 运算符调用转换为`ceq`IL 操作码
*   至于字符串，它转换为 System.String::op_Equality(string, string)。

果然，[文档`ceq`](http://msdn.microsoft.com/en-sg/library/system.reflection.emit.opcodes.ceq.aspx)指定它是浮点数和 NaN 的特殊情况。这解释了观察结果。

问题：

*   为什么在 Double 上定义 op_Equality ？（并且实现不考虑 NaN 特定行为）
*   什么时候调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T13:01:42.070

# 反射器的错误解释

您从 Reflector 看到的反编译实际上是 Reflector 中的一个错误。Reflector 需要能够反编译比较两个双精度值的函数；在这些函数中，您会发现`ceq`直接发射到代码中。因此，Reflector 将`ceq`指令解释为两个双精度之间的 ==，以帮助反编译一个正在比较两个双精度的函数。

默认情况下，值类型不带有 == 实现。（[用户定义的结构不继承重载的 == 运算符吗？](https://stackoverflow.com/questions/5983395/dont-user-defined-structs-inherit-an-overloaded-operator)）但是，所有内置标量类型都有一个显式重载的运算符，编译器会将其**转换**为适当的 CIL。重载还包含基于简单`ceq`的比较，因此 == 运算符重载的动态/后期绑定/基于反射的调用不会失败。

* * *

# 更多细节

> 对于预定义的值类型，相等运算符 (==) 如果其操作数的值相等则返回 true，否则返回 false。对于字符串以外的引用类型，== 如果它的两个操作数引用同一个对象，则返回 true。对于字符串类型，== 比较字符串的值。

-- [http://msdn.microsoft.com/en-us/library/53k8ybth.aspx](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)

您所说的意味着 == 使用引用类型语义来比较 a `double`。但是，由于`double`是值类型，它使用值语义。这就是为什么`3 == 3`是真的，即使它们是不同的堆栈对象。

您几乎可以将此编译器转换视为 LINQ 的 Queryable 对象如何包含*带有*代码的扩展方法，但编译器将这些调用转换为传递给 LINQ 提供程序的表达式树。在这两种情况下，底层函数都不会真正被调用。

* * *

# Double的比较语义

Double 的文档确实提到了`ceq`CIL 指令的工作原理：

> 如果通过调用 Equals 方法测试两个 Double.NaN 值是否相等，则该方法返回 true。但是，如果使用相等运算符测试两个 NaN 值是否相等，则运算符返回 false。当您想要确定 Double 的值是否不是数字 (NaN) 时，另一种方法是调用 IsNaN 方法。

-- [http://msdn.microsoft.com/en-us/library/ya2zha7s.aspx](http://msdn.microsoft.com/en-us/library/ya2zha7s.aspx)

* * *

# 原始编译器源

如果您查看反编译的 C# 编译器源代码，您会发现以下代码可以将双重比较直接转换为`ceq`：

```
private void EmitBinaryCondOperator(BoundBinaryOperator binOp, bool sense)
{
    int num;
    ConstantValue constantValue;
    bool flag = sense;
    BinaryOperatorKind kind = binOp.OperatorKind.OperatorWithLogical();
    if (kind <= BinaryOperatorKind.GreaterThanOrEqual)
    {
        switch (kind)
        {
            ...

            case BinaryOperatorKind.Equal:
                goto Label_0127;

            ...
        }
    }
...
Label_0127:
    constantValue = binOp.Left.ConstantValue;
    if (((constantValue != null) && constantValue.IsPrimitiveZeroOrNull) && !constantValue.IsFloating)
    {
        ...
        return;
    }
    constantValue = binOp.Right.ConstantValue;
    if (((constantValue != null) && constantValue.IsPrimitiveZeroOrNull) && !constantValue.IsFloating)
    {
        ...
        return;
    }
    this.EmitBinaryCondOperatorHelper(ILOpCode.Ceq, binOp.Left, binOp.Right, sense);
    return;
} 
```

上面的代码来自`Roslyn.Compilers.CSharp.CodeGen.CodeGenerator.EmitBinaryCondOperator(...)`，我添加了“...”，以便为此目的使代码更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:10:46.480

在[msdn](http://msdn.microsoft.com/en-us/library/ya2zha7s.aspx)中指出；

> 如果通过调用 Equals 方法测试两个 Double.NaN 值是否相等，则该方法返回 true。但是，如果使用相等运算符测试两个 NaN 值是否相等，则运算符返回 false。当您想要确定 Double 的值是否不是数字 (NaN) 时，另一种方法是调用 IsNaN 方法。

故意这样做是为了符合 IEC 60559:1989，因为它声明两个 NaN 值不相等，因为它们不被视为数字，因此`op_Equal`定义符合此标准；

> 根据 IEC 60559:1989，具有 NaN 值的两个浮点数永远不相等。但是，根据 System.Object::Equals 方法的规范，最好覆盖此方法以提供值相等语义。由于 System.ValueType 通过使用反射来提供此功能，因此 Object.Equals 的描述明确指出，值类型应考虑覆盖默认的 ValueType 实现以提高性能。事实上，通过查看 System.ValueType::Equals 的来源（SSCLI 中 clr\src\BCL\System\ValueType.cs 的第 36 行），CLR Perf 团队甚至对 System.ValueType 的效果发表了评论::等于不快。

参考：http: [//blogs.msdn.com/b/shawnfa/archive/2004/07/19/187792.aspx](http://blogs.msdn.com/b/shawnfa/archive/2004/07/19/187792.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:03:43.027

来自 msdn：http: [//msdn.microsoft.com/en-us/library/ya2zha7s.aspx](http://msdn.microsoft.com/en-us/library/ya2zha7s.aspx)

> 如果通过调用 Equals 方法测试两个 Double.NaN 值是否相等，则该方法返回 true。但是，如果使用相等运算符测试两个 NaN 值是否相等，则运算符返回 false。当您想要确定 Double 的值是否不是数字 (NaN) 时，另一种方法是调用 IsNaN 方法。

# jquery-ui - jQuery 自动完成 1.9.2 和淘汰赛的问题

> ID：14958016
> 
> 赞同：0
> 
> 时间：2013-02-19T12:53:27.650
> 
> 标签：jquery-ui, autocomplete, knockout.js

我一直在使用这个[jsfiddle](http://jsfiddle.net/rniemeyer/MJQ6g/)中的这个敲除绑定（[来自这个最初的 SO 问题](https://stackoverflow.com/questions/7537002/autocomplete-combobox-with-knockout-js-template-jquery)）一段时间，它一直在工作。

升级到 jQuery 1.8.3 和 jQuery UI 1.9.2 ( [jsfiddle](http://jsfiddle.net/AlexZeitler/SJZdA/) ) 后，在输入中输入文本时，在填充项目列表后（但未选中！），输入文本框被清除，您必须从开始。这很烦人，因为您总是必须从头开始，因此您将无法完成文本输入。

如果`jqAutoSourceInputValue`和`jqAutoSourceValue`具有相同的属性名称，它可以工作，但是选择后的 id 或输入值不是所需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:06:51.497

看起来问题出在绑定`update`函数依赖于正在更新的 observableArray 的事实。我不太确定 jQuery UI 发生了什么变化以使实际行为与以前相比发生变化，但一种解决方法是更新到 Knockout 2.2.1 并通过`peek`函数访问 observableArray 以避免依赖。就像是：

```
var source = (ko.isObservable(allBindings.jqAutoSource) ? allBindings.jqAutoSource.peek() : allBindings.jqAutoSource) || []; 
```

更新小提琴：http: [//jsfiddle.net/rniemeyer/xXuq6/](http://jsfiddle.net/rniemeyer/xXuq6/)

如果您无法更新到 KO 2.2.1，那么还有其他一些方法可以做到这一点。让我知道。

# iphone - 同时插入行和删除行。UITableView

> ID：14958020
> 
> 赞同：10
> 
> 时间：2013-02-19T12:53:34.813
> 
> 标签：iphone, ios, objective-c, uitableview

所以我有一个`UITableView`代表视频库的。库的数据源是一个`NSMutableDictionary`包含`NSMutableArray`每个键的 a。每个数组都包含一个数组，其中包含每个值的所有信息。

`NSMutableDictionary`-> Foreach Key a`NSMutableArray`包含 -> `NSMutableArrays`。

`tableSectionData`是我的数据源。

我一直在尝试在第一部分插入一行并在另一部分中删除另一行。这是我正在使用的代码：

**编辑**这是新的尝试。我首先更新数据源，然后添加和删除用我的数据源索引的相应行。

```
[mainTableView beginUpdates];
    NSMutableDictionary *clone = [[NSMutableDictionary alloc] 
                          initWithDictionary:self.tableSectionData copyItems:YES];
    for (NSString *key in [clone allKeys]) {
        if([key isEqualToString:@"Videos available for download"]) {
            for (NSArray *videoArray in [clone objectForKey:key]) {
                if ([[videoArray objectAtIndex:0] isEqualToString:helper.videoName]) {
                    [[self.tableSectionData objectForKey:@"Downloaded videos"] 
                                               addObject:videoArray];
                    NSUInteger insertIndex = [[self.tableSectionData 
                                               objectForKey:@"Downloaded videos"] 
                                                        indexOfObject:videoArray];
                    NSIndexPath *pathToInsert = [NSIndexPath 
                                         indexPathForRow:insertIndex inSection:0];
                    NSArray *indexesToAddition = [NSArray 
                                                    arrayWithObject:pathToInsert];
                    [mainTableView insertRowsAtIndexPaths:indexesToAddition 
                                    withRowAnimation:UITableViewRowAnimationFade];
                    [[self.tableSectionData 
          objectForKey:@"Videos available for download"] removeObject:videoArray];
                    NSUInteger deleteIndex = [[self.tableSectionData 
         objectForKey:@"Videos available for download"] indexOfObject:videoArray];
                    NSIndexPath *pathToDelete = [NSIndexPath 
                                         indexPathForRow:deleteIndex inSection:1];
                    NSArray *indexesToDeletion = [NSArray arrayWithObject:
                                                                    pathToDelete];
                    [mainTableView deleteRowsAtIndexPaths:indexesToDeletion 
                                    withRowAnimation:UITableViewRowAnimationFade];

                }
            }
        }
    }
    [mainTableView endUpdates]; 
```

我认为这会起作用，因为如果我想插入一行，我必须先删除一行（如果我想两者都做。）

具体错误如下：

```
'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (4) must be equal to the number of rows contained in that section before the update (3), plus or minus the number of rows inserted or deleted from that section (0 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

我知道错误说什么，我在该部分没有相应的行数，但是我没有在代码上看到我的错误，并且我记录了数据源，它对应于所需的结果。

任何帮助和建议将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T14:02:13.800

您必须在开始/结束更新方法中进行所有更新。如果您有多个 UITableView 更新，它总是有效的。

并且不要忘记在调用 endUpdates 之前更新 dataSource！

```
[self.tableView beginUpdates];

    // do your staff here, like:
[self.tableView inserRowsAtIndexPaths:indexPathsToInsert];
[self.tableView deleteRowsAtIndexPaths:indexPathsToDelete];

[self.tableView endUpdates]; 
```

您的错误 - 您在代码示例中使用了不同的开始/结束更新部分

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:17:09.167

**你的数据源**在哪里？

**删除前**

```
[dataSource removeObjectAtIndex:nIndexDelete];
[mainTableView deleteRowsAtIndexPaths:indexesToDeletion 
                                     withRowAnimation:UITableViewRowAnimationFade]; 
```

**添加前**

```
[dataSource inserObject:object atIndex:nIndexAdd];
[mainTableView insertRowsAtIndexPaths:indexesToAddition 
                                         withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-19T13:13:44.010

我认为每次插入或删除行时都需要重新加载 UITableView 并返回 numberOfRowsInSection 中的确切行数...

# glassfish - Glassfish Bean 验证奇怪的错误

> ID：14958023
> 
> 赞同：2
> 
> 时间：2013-02-19T12:53:48.543
> 
> 标签：glassfish, bean-validation, corba

我在我的应用程序中使用 bean 验证。当没有约束验证错误时，一切都很好。每次出现验证错误时，Glassfish 都会抛出以下异常：

```
Caused by: java.lang.ClassNotFoundException: javax.validation.groups.Default: java.net.MalformedURLException: Unknown protocol: osgi
at com.sun.corba.ee.impl.util.JDKBridge.loadClassM(JDKBridge.java:325)
at com.sun.corba.ee.impl.util.JDKBridge.loadClass(JDKBridge.java:228)
at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.loadClass(Util.java:640)
at com.sun.corba.ee.impl.util.RepositoryId.getClassFromType(RepositoryId.java:628)
at com.sun.corba.ee.impl.orbutil.RepIdDelegator.getClassFromType(RepIdDelegator.java:169)
at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readClass(CDRInputStream_1_0.java:1439) 
```

bean-validation.jar 存在于 glassfish/modules 文件夹中。启动不会引发任何有关验证的异常。

PS。请注意，我们将远程 bean 与 CORBA 一起使用。

可在 GlassFish 3.1.2.2 和 3.1.1 上重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T10:58:34.707

我将此问题追溯到通过 CORBA 对 ConstraintValidationException 的序列化。不知何故，osgi 没有正确加载 bean-validation 模块，并且缺少 javax.validation.groups.Default 类。我做了一个快速的解决方法，以便拦截 ConstraintValidationException 并且永远不会通过 CORBA 发送。相反，验证错误信息被收集在一个自定义的异常类中，该类实际上可以通过服务进行序列化。

# three.js - 三个js相机运动

> ID：14958027
> 
> 赞同：0
> 
> 时间：2013-02-19T12:53:56.110
> 
> 标签：three.js, webgl

我这里没有代码，所以我希望你能理解，我回家后编辑和添加代码。

我已经建立了一个类移动，一旦初始化就会向渲染的 dom 元素添加一个 jquery 事件（keyDown）。

该事件检查开关盒中的键是什么，

如果键是其中一种情况，则相机将相应移动。

相机确实移动了，但由于某种原因，它有点闪烁，就像小跳一样。每个摄像机移动的速度为 0.05；

当我在另一个应用程序中执行此操作但通过主脚本中的 javascript keydown 事件（无特殊类）时，它运行良好..

知道为什么要这样做吗？

编辑：代码

主脚本：

```
<script>

    var moveMec = null;
    var loopProg = null;
    var renderer = null;
    var scene = null;
    var camera = null;
    var mesh = null;
    var earth = null;
    var sun = null;
    $(document).ready(
            function() {
                var container = document.getElementById("container");
                renderer = new THREE.WebGLRenderer({ antialias: true } );
                renderer.setSize(container.offsetWidth,container.offsetHeight);
                container.appendChild(renderer.domElement)
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera( 45,
                        container.offsetWidth / container.offsetHeight, 1, 4000 );

                earth = new Earth();
                sun     = new Sun({x:-10,y:0,z:20});
                scene.add(earth.getEarth);
                scene.add(sun.sunLight);
                camera.position.set( 0, 0, 3 );

                moveMec = new moveMechanics(camera,renderer.domElement)
                loopProg = new loopProgram();
                loopProg.add(function(){earth.update()});
                //loopProg.add(function(){renderer.render( scene, camera );});
                loopProg.solarLoop();
            }
    );

</script> 
```

移动脚本：

```
var moveMechanics = function (camera,domElement,speed)
{
    moveMechanics.camera = camera;
    moveMechanics.speed = speed != undefined ? speed : 0.01;
    moveMechanics.domElement = domElement;

    $(document).keydown(function(event)
{
   switch(event.which)
   {
       case KeyEvent.DOM_VK_W:
           camera.position.z -= moveMechanics.speed;
           break;
       case KeyEvent.DOM_VK_S:
           camera.position.z += moveMechanics.speed;
           break;
       case KeyEvent.DOM_VK_D:
           camera.position.x += moveMechanics.speed;
           break;
       case KeyEvent.DOM_VK_A:
           camera.position.x -= moveMechanics.speed;
           break;
   }
});
} 
```

循环代码：

```
function loopProgram()
{
    this.functionsToRun = new Array();
    this.solarLoop= function()
    {
        jQuery.each(loopProg.functionsToRun, function(index,value)
        {
            value ? value() : null;
        });
        requestAnimationFrame(loopProg.solarLoop);
    }

    this.add = function(func)
    {
        this.functionsToRun[this.functionsToRun.length] = func;
    }
} 
```

# eclipse - 更改 Active Multipageeditor 页面的 ServiceProvider

> ID：14958030
> 
> 赞同：0
> 
> 时间：2013-02-19T12:54:03.353
> 
> 标签：eclipse, eclipse-plugin, jface

我`MultiPageEditor`在 Eclipse 中工作。编辑器的页数可变。每个页面显示一个`JTree`. 我已经制作了自己的`Jtree`女巫工具`ISelectionProvider`。当我选择一个叶子时，它会在属性视图中显示有关叶子的信息。

由循环生成的编辑器页面，所有 JTree 保存在 ArrayList 中。当我像这样添加 ServiceProvider 时：

```
getSite().setSelectionProvider(trees.get(0)); 
```

有用。但是当我在更改页面时更改 ServiceProvider 时：

```
@Override
protected void pageChange(int newPageIndex) {
    if (newPageIndex != 0)
    {
        getSite().setSelectionProvider(trees.get(newPageIndex-1));
    }
} 
```

没有任何作用。

如何`SelectionProvider`根据活动的 EditorPage 动态更改？

# javascript - 是否有任何功能可以检查不完整的 HTML 源代码

> ID：14958031
> 
> 赞同：0
> 
> 时间：2013-02-19T12:54:06.867
> 
> 标签：javascript, jquery, html

在我的网页中，部分html源代码是由对方提供的，我发现有时返回的源代码不完整，例如：

```
<table>
    <tr valign='top'>
        <td width=95>
            <img src='test.jpg'>
        </td>
        <td>
            <h2><a style='font-size: 13px' href='tset.html'>test</a></h2>
            <h1><a href='test.html'>test</a></li> 
```

我想问是否有任何功能可以检查HTML源代码是否不完整？

我有一个想法可以`substr()`用来检查第一个和最后一个 HTML 标记，但不知道它是否有效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:22:50.447

检查响应是否以相同的标签开始和结束似乎是一个足够好的启发式方法：

*   误报率为零：如果输入有效，则将被接受。
*   假阴性率非常低：如果您在随机点终止一个有效的 HTML，它以标签结尾的机会就足够低了，验证它是同一个标签有助于进一步。
*   假阴性率有时为零：如果在您的特定情况下不能嵌套最外层元素（`html`，`body`两者都适用，即使`table`s 现在很少嵌套），那么您肯定会注意到无效输入。

请注意，将结果分配为 ​​an`innerHTML`并将其读回可能会产生误报。浏览器可以自由地重新排列 HTML，即使它认为合适也是如此。例如，Internet Explorer 喜欢按字母顺序对元素属性进行排序（出于某种原因）。此外，如果您传递无效的 HTML，浏览器也不会抱怨

在正则表达式中：`^<(\w+)[^>]*>.*<\/\1>$`

```
if(/^<(\w+)[^>]*>.*<\/\1>$/.test(input)){
  // the input is most likely not truncated
}else{
  // the input is definitely not valid
  // (or it contains multiple top-level elements)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:55:35.053

您可以使用 Html 验证器。您正确指定 DOCTYPE，它会发现任何无效的内容。

1.  [HTML 验证器 W3c](http://validator.w3.org/#validate_by_input)
2.  [HTML 整洁](http://infohound.net/tidy/)

# asp.net - asp.net 在会话可用但页面尚未加载时运行代码？

> ID：14958033
> 
> 赞同：1
> 
> 时间：2013-02-19T12:54:17.977
> 
> 标签：asp.net, global-asax, lifecycle

当会话可用但页面尚未加载时，有什么方法可以运行代码？

我发现最接近的是 Global.asax AcquireRequestState。

但它似乎在页面的构造函数之后运行。

# c# - 以编程方式关闭 WPF 中的 TabItem

> ID：14958037
> 
> 赞同：0
> 
> 时间：2013-02-19T12:54:26.210
> 
> 标签：c#, .net, xaml

你到底是如何以编程方式关闭 Windows 8 WPF 桌面 TabControl 中的 TabItem 的？

Intellisense 中没有选项，搜索结果中出现的唯一内容是 TabControl 或 TabItem 的自定义实现。

为什么我们不能做类似的事情`tabControl.SelectedItem.Close();`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:56:33.073

我认为关闭与从 TabControl 中删除 TabItem 相同

**编辑：** 例如：

```
tabControl1.Items.RemoveAt(tabControl1.SelectedIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:57:25.333

你不能关闭它。`TabItem`不可关闭。你可以隐藏它：

```
tabControl.SelectedItem.Visibility = System.Windows.Visibility.Collapsed 
```

# xml - MathML DTD 语法解释

> ID：14958040
> 
> 赞同：1
> 
> 时间：2013-02-19T12:54:38.517
> 
> 标签：xml, dtd

我正在阅读 MathML DTD。我遇到了一行代码。下面是代码行。

```
<!ENTITY % mathml-qname.module "INCLUDE">
<![%mathml-qname.module; [<!ENTITY % mathml-qname.mod PUBLIC "-//W3C//ENTITIES    MathML   3.0 Qualified Names 1.0//EN" "mathml3-qname.mod"> %mathml-qname.mod;]]> 
```

我无法理解以上两行。任何人都可以解释语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:01:26.237

第一行声明了一个名为`mathml-qname.module`“ `INCLUDE`”的参数实体。

```
<!ENTITY % mathml-qname.module "INCLUDE"> 
```

下一点我将分成几行。

```
<![%mathml-qname.module; [
<!ENTITY % mathml-qname.mod PUBLIC 
  "-//W3C//ENTITIES    MathML   3.0 Qualified Names 1.0//EN" 
  "mathml3-qname.mod"> 
  %mathml-qname.mod;
]]> 
```

第一行和最后一行 ( `<![%mathml-qname.module;[`... `]]>`) 是条件部分 - 即可以正常读取和处理或跳过的部分，具体取决于其关键字的值。关键字出现在两个左方括号之间——在这里，它是由对参数 entity 的引用给出的`mathml-qname.module`。如果我们展开参数实体引用，条件部分如下所示：

```
<![INCLUDE [
 ...
]]> 
```

正如您可能猜到的那样，关键字的含义`INCLUDE`是：包含、阅读和处理本节。（另一个可能的值是`IGNORE`。）

在标记部分中还有另一个参数实体声明，用于名为 的参数实体`mathml-qname.mod`。`PUBLIC`关键字给出了实体的公共标识符和系统标识符；长话短说，有问题的实体是 MathML 3.0 限定名称的实体集合，它位于相对 URI（相对于包含此参数实体声明的资源）为`mathml3-qname.mod`.

在 的参数实体声明之后`mathml-qname.mod`，有对相同参数实体 ( `%mathml-qname.mod;`) 的引用，这会导致实体被读取和处理。

用非正式的术语：这段代码指定默认情况下，`mathml3-qname.mod`应该咨询外部资源。但是用户可以通过在其配置中的适当位置包含以下形式的参数实体声明来覆盖该默认值：

```
<!ENTITY % mathml-qname.module "IGNORE"> 
```

如果您对 MathML 3.0 的限定名称实体有一组不同的声明，您可能会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:58:54.020

这一行：

```
<!ENTITY % mathml-qname.module "INCLUDE"> 
```

是一个参数实体。（参数实体只能在 DTD 中使用。）实体的值为“INCLUDE”。

这一行：

```
<![%mathml-qname.module; [<!ENTITY % mathml-qname.mod PUBLIC "-//W3C//ENTITIES    MathML   3.0 Qualified Names 1.0//EN" "mathml3-qname.mod"> %mathml-qname.mod;]]> 
```

是另一个参数实体，它指向带有附加实体声明的外部文件。不同之处在于它被包装在一个条件部分中。解决后基本上是这样`mathml-qname.module`的：

```
<![INCLUDE [<!ENTITY % mathml-qname.mod PUBLIC "-//W3C//ENTITIES    MathML   3.0 Qualified Names 1.0//EN" "mathml3-qname.mod"> %mathml-qname.mod;]]> 
```

这意味着`mathml-qname.mod`将包含声明和引用。如果`INCLUDE`更改为`IGNORE`in `mathml-qname.module`，则声明和引用 for`mathml-qname.mod`将被忽略。

# php - 如何上传多个图像但具有相同的last_id？

> ID：14958041
> 
> 赞同：-2
> 
> 时间：2013-02-19T12:54:45.280
> 
> 标签：php, mysql

我正在尝试插入具有相同 last_id 的多个图像但是我遇到了一个问题，代码不完全符合我的要求他们应该获取最后的 id 并在图像的表格中使用它们，而且每个图像都将具有唯一的图像 Id。在 user 表中 user_id 作为主键，在 image 表中 user_id 作为 fk 和 image_d pk 。下面是我的代码。

```
<?php
$target = 'image_uploads/';
  if(isset($_FILES['image_name'])===true){
  $files = $_FILES['image_name'];
  for($x = 0 ; $x < count($files['name']); $x++){
  $name = $files['name'][$x] ;
  $temp_name = $files['tmp_name'][$x];
  #extention filter it takes only the extension  want 
$allowed ='gif,png,jpg,pdf';
$extension_allowed= explode(',',$allowed );  
$file_extention = pathinfo($name, PATHINFO_EXTENSION);
if(array_search($file_extention,$extension_allowed)){
}else {
echo 'We only allow gif, png ,jpg';
  exit();
} #extention  filter ends here 
  #check the size of the image 
  $file_size = $files['size'][$x];
  if($file_size > 2097152){
  echo 'The file should be lesS than 2MB';
  exit();
  }
    #check the size of the image  ends here
  #Rename images 
  $sub = substr(md5(rand()),0,7);
  #the above generates char and numbesr 
  $rand = rand(0,100000);
  $rename = $rand.$sub.$name;
  #Rename images ends here
  $move = move_uploaded_file($temp_name,$target.$rename); 
 #code to deal with the picture uploads ends here 
 }}
?>
<?php
try{
$query="INSERT INTO tish_user(username,Password,Previllage,date_created)
VALUES(:username,:Password,:Previllage,:date_created)";
$insert = $con->prepare($query);
$insert->execute(array(
':username'=>$user,
':Password'=>$Password,
':Previllage'=>$Previllage,
':date_created'=>$date_created));
#end of first table
################################################
#You select the first Id and put it in a variable then 
$id_last = ("SELECT LAST_INSERT_ID()");
$result =$con->prepare($id_last);
$result->execute();
$last_id = $result->fetchColumn();
############################## Last Id query Ends here
#insert into  clientinfo table 
$clientinfor="INSERT INTO tish_clientinfo
(title, firstname, lastname, nickname, idnumber, client_code, 
 company, country, city, province, address, cell, 
tel, webaddress, satifiedstatus, email, job_approval, cash_with_vat, 
cash_paid, date_registered,user_id)
VALUES(:title,:firstname,:lastname,:nickname,:idnumber,:client_code,
:company,:country,:city,:province,:address,
:cell,:tel,:webaddress,:satifiedstatus, :email, :job_approval,
:cash_with_vat,:cash_paid, :date_registered,$last_id)";
$clientinfor_insert = $con->prepare($clientinfor);
$clientinfor_insert->execute(array(
':title'=>$title,
':firstname'=>$firstname,
':lastname'=>$lastname,
':nickname'=>$nickname,
':idnumber'=>$idnumber,
':client_code'=>$client_code,
':company'=>$company,
':country'=>$country,
':city'=>$city,
':province'=>$province,
':address'=>$address,
':cell'=>$cell,
':tel'=>$tel,
':webaddress'=>$webaddress,
':satifiedstatus'=>$satifiedstatus,
':email'=>$email,
':job_approval'=>$job_approval,
':cash_with_vat'=>$cash_with_vat,
':cash_paid'=>$cash_paid,
':date_registered'=>$date_registered
));
#end of clien infor 
################################################
$security="INSERT INTO tish_security(ip_address,user_id)
VALUES(:ip_address,$last_id)";
$security_insert = $con->prepare($security);
$security_insert->execute(array(
':ip_address'=>$ip_address));
##########################end of security 
############ images 
$images ="INSERT INTO tish_images(user_id,image_name,date_registered)
VALUES($last_id,:image_name,:date_registered)";
$images_insert = $con->prepare($images);
$images_insert->execute(array(
':image_name'=>$rename,
':date_registered'=>$date_created));

##############################category 
$cats = $vals = array();
foreach ((array) $_POST['category_name'] as $cat) {
    if ('' !== ($cat = trim($cat))) {
        $cats[] = $cat;
        $vals[] = "({$last_id}, ?)";
    }
}
################################################
$sql = 'INSERT INTO tish_catigory (user_id, category_name) VALUES'. join(',', $vals);
$sth = $con->prepare($sql);
foreach ($cats as $i => $cat) {
    $sth->bindValue($i+1, $cat, PDO::PARAM_STR);
}
$sth->execute();

}catch(PDOException $e){
echo $e->getMessage();
}

var_dump($last_id);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:25:24.753

那应该可以我测试它并且它有效

```
<?php
try{
$query="INSERT INTO tish_user(username,Password,Previllage,date_created)
VALUES(:username,:Password,:Previllage,:date_created)";
$insert = $con->prepare($query);
$insert->execute(array(
':username'=>$user,
':Password'=>$Password,
':Previllage'=>$Previllage,
':date_created'=>$date_created));
#end of first table
################################################
#You select the first Id and put it in a variable then 
$id_last = ("SELECT LAST_INSERT_ID()");
$result =$con->prepare($id_last);
$result->execute();
$last_id = $result->fetchColumn();
############################## Last Id query Ends here
#insert into  clientinfo table 
$clientinfor="INSERT INTO tish_clientinfo
(title, firstname, lastname, nickname, idnumber, client_code, 
 company, country, city, province, address, cell, 
tel, webaddress, satifiedstatus, email, job_approval, cash_with_vat, 
cash_paid, date_registered,user_id)
VALUES(:title,:firstname,:lastname,:nickname,:idnumber,:client_code,
:company,:country,:city,:province,:address,
:cell,:tel,:webaddress,:satifiedstatus, :email, :job_approval,
:cash_with_vat,:cash_paid, :date_registered,$last_id)";
$clientinfor_insert = $con->prepare($clientinfor);
$clientinfor_insert->execute(array(
':title'=>$title,
':firstname'=>$firstname,
':lastname'=>$lastname,
':nickname'=>$nickname,
':idnumber'=>$idnumber,
':client_code'=>$client_code,
':company'=>$company,
':country'=>$country,
':city'=>$city,
':province'=>$province,
':address'=>$address,
':cell'=>$cell,
':tel'=>$tel,
':webaddress'=>$webaddress,
':satifiedstatus'=>$satifiedstatus,
':email'=>$email,
':job_approval'=>$job_approval,
':cash_with_vat'=>$cash_with_vat,
':cash_paid'=>$cash_paid,
':date_registered'=>$date_registered
));
#end of clien infor 
################################################
$security="INSERT INTO tish_security(ip_address,user_id)
VALUES(:ip_address,$last_id)";
$security_insert = $con->prepare($security);
$security_insert->execute(array(
':ip_address'=>$ip_address));
##########################end of security 
############ images 
#code to deal with the picture uploads 
#target folder 
$target = 'image_uploads/';
  if(isset($_FILES['image_name'])===true){
  $files = $_FILES['image_name'];
  for($x = 0 ; $x < count($files['name']); $x++){
  $name = $files['name'][$x] ;
  $temp_name = $files['tmp_name'][$x];
  #extention filter it takes only the extension  want 
$allowed ='gif,png,jpg,pdf';
$extension_allowed= explode(',',$allowed );  
$file_extention = pathinfo($name, PATHINFO_EXTENSION);
if(array_search($file_extention,$extension_allowed)){
}else {
echo 'We only allow gif, png ,jpg';
  exit();
} #extention  filter ends here 
  #check the size of the image 
  $file_size = $files['size'][$x];
  if($file_size > 2097152){
  echo 'The file should be lesS than 2MB';
  exit();
  }
    #check the size of the image  ends here
  #Rename images 
  $sub = substr(md5(rand()),0,7);
  #the above generates char and numbesr 
  $rand = rand(0,100000);
  $rename = $rand.$sub.$name;
  #Rename images ends here
  $move = move_uploaded_file($temp_name,$target.$rename); 
 #code to deal with the picture uploads ends here 

$images ="INSERT INTO tish_images(user_id,image_name,date_registered)
VALUES($last_id,:image_name,:date_registered)";
$images_insert = $con->prepare($images);
$images_insert->execute(array(
':image_name'=>$rename,
':date_registered'=>$date_created));
}}
##############################category 
$cats = $vals = array();
foreach ((array) $_POST['category_name'] as $cat) {
    if ('' !== ($cat = trim($cat))) {
        $cats[] = $cat;
        $vals[] = "({$last_id}, ?)";
    }
}
################################################
$sql = 'INSERT INTO tish_catigory (user_id, category_name) VALUES'. join(',', $vals);
$sth = $con->prepare($sql);
foreach ($cats as $i => $cat) {
    $sth->bindValue($i+1, $cat, PDO::PARAM_STR);
}
$sth->execute();

############# property table##########################################################
/*$property ="INSERT INTO tish_propertyinfo(user_id,date_registered)
VALUES($last_id,:date_registered)";
$property_insert = $con->prepare($images);
$property_insert->execute(array(':date_registered'=>$date_created));
*/}catch(PDOException $e){
echo $e->getMessage();
}
#for the insert check boxes 

var_dump($last_id);
#images 

?> 
```

# opengl - 为什么我的 OpenGL 程序使用矩阵旋转什么都不显示？

> ID：14958042
> 
> 赞同：2
> 
> 时间：2013-02-19T12:54:47.293
> 
> 标签：opengl, lwjgl

我找不到如何使用偏航、俯仰和滚动创建视图矩阵。我正在使用 LWJGL 并有一个可用的旋转功能。

```
 viewMatrix.setZero();
    viewMatrix.rotate(pitch, new Vector3f(1.0f, 0.0f, 0.0f));
    viewMatrix.rotate(yaw, new Vector3f(0.0f, 1.0f, 0.0f));
    viewMatrix.rotate(roll, new Vector3f(0.0f, 0.0f, 1.0f));
    viewMatrix.m33 = 1.0f;
    viewMatrix.translate(position); 
```

我在做一些根本上错误的事情，我讨厌我无法修复它，因为缺乏文档（或我缺乏谷歌技能）。

我不转置矩阵。

请注意，位置是一个零向量，我在屏幕上看不到任何东西（当视图矩阵为零时，我会看到）。

补充：我试图达到以下等价物：

```
 GL11.glRotatef(pitch, 1.0f, 0.0f, 0.0f);
    GL11.glRotatef(yaw, 0.0f, 1.0f, 0.0f);
    GL11.glRotatef(roll, 0.0f, 0.0f, 1.0f);
    GL11.glTranslatef(position.x, position.y, position.z); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:12:12.010

您应该使用`viewMatrix.setIdentity()`而不是`viewMatrix.setZero()`最初将矩阵设置为单位矩阵，而不是将矩阵归零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:18:26.447

像这样的复合旋转是错误的方法，试试这个：[http ://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html](http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html)

# ios - 如何创建 ipad PopUpOver？

> ID：14958044
> 
> 赞同：0
> 
> 时间：2013-02-19T12:54:52.450
> 
> 标签：ios, ipad, ios6, popup, uitoolbar

我需要`PopUpOver`为`iPad`.I 创建一个 PopUpOver，就像下面的图片一样。

实际上，我很困惑将被称为此 PopUpOver 的内容以及可用于为 ipad 绘制这些类型的 PopUpOver 的类。

请让我知道它是什么以及如何创建它？图 1) 选项 PopUpOver(黑色图像) 图 2) 共享选项弹出

![在此处输入图像描述](../Images/de5d90e76509edd9b99ad1c83a7072c2.png)

![在此处输入图像描述](../Images/de132026f542ee26f83e5ea6af134a2c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:57:39.130

只需设计自己的视图并将其添加到选定的视图/矩形

```
 popoverController = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];
    popoverController.delegate = self;
    [popoverController presentPopoverFromRect:self.view.bounds inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

并且不要忘记在 .h 文件中包含 < UIPopoverControllerDelegate > 委托

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:59:22.347

对于您需要的选项 1 ，您可以在[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009306)`UIPopoverController`获得文档和代码示例

对于您需要的选项 2 `UIActivityViewController`，请[点击此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html)

# php - 仅一行中的 if-else 语句用于简单文本

> ID：14958045
> 
> 赞同：0
> 
> 时间：2013-02-19T12:54:55.737
> 
> 标签：php, if-statement, text, ternary-operator

我想写一些文本`Year: X | percentage: $percentage%`，其中`X`基于`$year`.

`$year`可以`2010`，`2011`……还可以`0`。在这种情况下，我们必须写单词`"All"`；否则，年份本身。

```
Year: 2011 | percentage: 2%    // case $year not 0
Year: All | percentage: 2%     // case $year == 0 
```

对于所需的内容，此代码似乎很长：

```
echo "year: ";
if ($year==0)
     echo "All";
else
     echo $year;

echo " | Percentage: $percentage%"; 
```

所以我想知道：我们怎样才能让这段代码更短更清晰？

[注意我发布了我自己的答案，因为我想分享我花了一些时间研究它后发现的方式。无论如何，我看到还有其他看起来相当不错的。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:54:55.737

可以这样做：

```
echo "Year: ". ((0==$year) ? "All" : $year) ." | Percentage: $percentage%"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:00:02.093

可能不是对您问题的直接回答，但恕我直言，您应该执行以下操作：

```
$renderedYear = $year;
if ($year == 0) {
    $renderedYear = 'All';
}

echo 'Year: ' . $renderedYear . ' | Percentage: ' . $percentage . '%'; 
```

总是更喜欢可读性而不是代码的简短性。屏幕上的像素比调试时间便宜得多。

此外，您可能想要使用`*printf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:59:59.950

我会使用它来设计它，`sprintf()`因为它更容易阅读。

```
echo sprintf("year: %s | Percentage: %s %%", ($year == 0) ? "All" : $year, $percentage); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:12:45.183

如果这不起作用（现在无法测试），我很抱歉，但是在 C 中（有点类似于 php）你可以直接否定数字，我相信你也可以使用：

```
echo "Year: ". (!$year ? "All" : $year) ." | Percentage: $percentage%"; 
```

# javascript - Select2动态数据设置

> ID：14958049
> 
> 赞同：0
> 
> 时间：2013-02-19T12:55:01.647
> 
> 标签：javascript, jquery-select2

我正在尝试将 select2 与 jQuery 1.9.1 和 select2 3.3.0 一起使用来实现我想象的一个相当基本的用例......我想使用基于另一个 select2 控件状态的选项填充一个 select2 控件。

我有以下内容：

 `````
<div>
  <select id="master" name="master">
    <option value=1>a</option>
    <option value=2>b</option>
  </select>
</div>
<div>
  <input type="hidden" id="detail" name="detail" data-placeholder="No options until master chosen">
  </select>

<script src="jquery-1.9.1.js"></script>
<script src="select2-3.3.0/select2.js"></script>
<script>
var a = [];
var b = [];
for (var i = 0; i < 20; i++) {
  a.push({id: i, text: "a" + i});
  b.push({id: i, text: "b"+ i});
}

$(document).ready( function () {
  $("#master").select2().on('change', function() {
    console.log("master changed: " + $("#master").val())
    var right_one = a;
    if($("#master").val() == 2) right_one = b;
    $("#detail").removeClass('select2-offscreen').select2({data:right_one})
    console.log("right_one: " + right_one)
  })

}) 
```` 

**编辑：** [这个答案](https://stackoverflow.com/a/13269663/264788)显示了控件消失的原因。我对此实施仍有疑问：

1.  如何让#master*没有*初始选择？
2.  如何更改#detail 中的占位符文本，以便它响应已选择主人的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T15:12:49.023

第二个选择#detail 将不再起作用，您只能单击选项，但如果您尝试输入几个字符，您会看到发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T09:08:30.430

可能是这样的：

```
<script>
var a = [];
var b = [];
for (var i = 0; i < 20; i++) {
  a.push({id: i, text: "a" + i});
  b.push({id: i, text: "b"+ i});
}

$(document).ready( function () {
    //set up default data, should work without one too
    $('#detail').data('select2_values', []);
    $('#detail').select2({
        allowClear: true,
        width: '150px',
        placeholder: 'No options until master chosen',
        query: function (query) {
            var data = {results: []};
            if (query.term == '')
            {
                data.results = $('#detail').data('select2_values');
            }
            query.callback(data);
        },
        initSelection : function (element, callback) {
            var data = $(element).data('select2_values');
            if (typeof(data)!='object') data = [];
            callback(data);
        },
        data: $(this).data('select2_values')
    }).select2('disable');
    $('#master').select2({
        allowClear: true,
        width: '150px'
    }).on("change", function(e) {
        var right_one = a;
        if ($('#master').select2('val') == 2) right_one = b;
        $("#detail").data('select2_values', right_one);

        //Remove previous value if any
            $("#detail").select2('val','');

        //If you want to select some vaoue you can use next line
        //$("#detail").select2('data', right_one[0]);

        //Enable 2nd box
        $("#detail").select2('enable');
    });
});

</script> 
```

在 chrome+win32 上测试`

# objective-c - WebView 缓存清除问题

> ID：14958050
> 
> 赞同：0
> 
> 时间：2013-02-19T12:55:03.107
> 
> 标签：objective-c, uiwebview, asihttprequest

在我的应用程序中，我使用 ASIHTTPRequest 下载网页。在该网页中，我下载了每天都会更改的图像。我的应用程序适用于在线和离线模式（即当有网络时，我下载网页并在后台将其存储在 DocDir 中）。在离线模式下，我将网页的内容存储到 DocumentsSirectory。现在的问题是，当我下载页面并在在线模式下查看它时，它会从网页加载最新的图像，但是当我进入离线模式时webview 加载先前加载的页面（即旧图像）。我尝试清除 webView 的缓存，但似乎没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:05:55.913

这里有一些从 uiviewview 清除缓存的好技巧

```
 [[NSUserDefaults standardUserDefaults] setInteger:0 forKey:@"WebKitCacheModelPreferenceKey"]; 
```

还

```
 [[NSURLCache sharedURLCache] removeAllCachedResponses];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];
    [[NSURLCache sharedURLCache] setMemoryCapacity:0]; 
```

# jquery - 使用 jquery 调用的图像创建 css sprites

> ID：14958051
> 
> 赞同：0
> 
> 时间：2013-02-19T12:55:04.450
> 
> 标签：jquery, asp.net, css, sprite

我在谷歌页面速度上测试了我的网站的页面速度，我得到了将图像组合成 css sprite 并给出图像列表的建议。

我阅读了有关它的所有链接/文章，其中许多也显示了示例。

我使用了 jquery 并调用了图像，因为没有对包含图像的类进行 html 调用。

这是一张图片的示例 CSS 代码：

```
.theme-default .nivo-controlNav a { display:block; width:22px; height:22px; background:url(../images/bullets.png) no-repeat; } 
```

nivo-controlNav 类不在 html 代码中的任何地方调用，它由 jquery 隐式调用。

有什么办法可以解决我的问题吗？

我已经获得了图像的 css sprite 图像和 css 代码，但无法判断在哪里以及如何从 html 代码中调用它。

我是css的新手。每一个建议都值得赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:11:16.920

我想如果你给每个图像类提供背景位置，这个问题就会解决。

```
.image-1{background-position:x y;} 
```

[查看此页面有关背景位置的更多信息。](http://www.w3schools.com/cssref/pr_background-position.asp)

# c++ - 将 mpl 序列序列转换为 trie

> ID：14958053
> 
> 赞同：5
> 
> 时间：2013-02-19T12:55:13.853
> 
> 标签：c++, templates, boost, template-meta-programming, boost-mpl

这个问题看起来很简单，基本上我有一个序列序列，比如：

```
typedef mpl::vector<
  mpl::vector<mpl::_1, mpl::_2>,
  mpl::vector<mpl::_1, mpl::_2, mpl::_3>,
  mpl::vector<mpl::_2, mpl::_1>,
  mpl::vector<mpl::_2, mpl::_2>,
  mpl::vector<mpl::_2, mpl::_2, mpl::_3>
> seq; 
```

我想做的是将其转换为 trie，最终结果类似于：

```
mpl::map<
  mpl::pair<mpl::_1, 
    mpl::map<
      mpl::pair<mpl::_2,
        mpl::map<
          mpl::pair<TERMINAL, T>,
          mpl::pair<mpl::_3,
            mpl::map<
              mpl::pair<TERMINAL, T>
            >
          >
        >
      >
    >
  >
  mpl::pair<mpl::_2, 
    mpl::map<
      mpl::pair<mpl::_1,
        mpl::map<
          mpl::pair<TERMINAL, T>
        >
      >,
      mpl::pair<mpl::_2,
        mpl::map<
          mpl::pair<TERMINAL, T>,
          mpl::pair<mpl::_3,
            mpl::map<
              mpl::pair<TERMINAL, T>
            >
          >
        >
      >
    >
  >
> 
```

所以，问题是，这可能吗（我认为不可能）？如果可能的话，我错过了哪些黑暗咒语？

编辑：如果上述从序列序列到特里的转换不清楚，让我看看我是否可以用简单的英语陈述它（通常更困难。）基本上主序列中的每个序列都由一些类型（`_1`等）`_2`组成.) 转换后的版本是普通前缀被折叠的特里。可能是附图帮助..

![结果树](../Images/1baac94c1e27837fe3f7f3585096bc84.png)

EDIT2：感谢@Yakk，希望现在问题更清楚了......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:27:42.480

你去：

```
struct Terminal;

template < typename Trie, typename First, typename Last,
           typename Enable = void >
struct insertInTrie_impl
{
    typedef typename
        mpl::deref<First>::type key;

    typedef typename 
        mpl::at<
            Trie,
            key
        >::type subTrieOrVoid; // would be easier if "at" supported Default

    typedef typename
        mpl::if_<
            boost::is_same< subTrieOrVoid, mpl::void_ >,
            mpl::map<>,
            subTrieOrVoid
        >::type subTrie;

    typedef typename
        mpl::insert<
            Trie,
            mpl::pair<
                key, typename
                insertInTrie_impl<
                    subTrie, typename
                    mpl::next<First>::type,
                    Last
                >::type
            >
        >::type type;
};

template < typename Trie, typename First, typename Last >
struct insertInTrie_impl< Trie, First, Last, typename 
    boost::enable_if< boost::is_same<First, Last> >::type >
    : mpl::insert<
        Trie,
        mpl::pair< Terminal, Terminal >
        // I'm not sure what you want in your terminal node
    >
{};

template < typename Trie, typename Seq >
struct insertInTrie
    : insertInTrie_impl< 
        Trie, typename 
        mpl::begin<Seq>::type, typename 
        mpl::end<Seq>::type
    >
{};

template < typename SeqOfSeq >
struct constructTrie
    : mpl::fold< 
        SeqOfSeq,
        mpl::map<>,
        insertInTrie< mpl::_1, mpl::_2 >
    >
{}; 
```

`insertInTrie_impl`是一个递归元函数，它使用迭代器将序列插入到现有的 trie 中。`insertInTrie`接受一个调用序列`insertInTrie_impl`。`constructTrie`适用`insertInTrie`于给定序列中的所有序列，从一个空的 trie 开始。

在伪代码中，如下所示：

```
Trie insertInTrie_impl(trie, first, last)
{
    if (first == last)
    {
        trie.insert(Terminal, Terminal);
        return trie;
    }

    key = *first;

    subTrie = trie[key];
    if (subTrie = void) // key not found
    {
        subTrie = emptyTrie;
    }

    trie.insert(key, insertInTrie_impl(subTrie, ++first, last))

    return trie;
}

Trie insertInTrie(trie, seq)
{
    return insertInTrie_impl(trie, seq.begin(), seq.end();
}

Trie constructTrie(seqOfSeq)
{
    return fold(seqOfSeq, emptyTrie, insertInTrie);
} 
```

最后，一个示例使用：

```
int main()
{
    typedef mpl::vector<
        mpl::vector<mpl::_1, mpl::_2>,
        mpl::vector<mpl::_1, mpl::_2, mpl::_3>,
        mpl::vector<mpl::_2, mpl::_1>,
        mpl::vector<mpl::_2, mpl::_2>,
        mpl::vector<mpl::_2, mpl::_2, mpl::_3>
    > seqOfSeq;

    typedef constructTrie< seqOfSeq >::type bigTrie;

    BOOST_MPL_ASSERT(( 
        mpl::has_key<
            mpl::at< 
                mpl::at< 
                    bigTrie, 
                    mpl::_1
                >::type, 
                mpl::_2
            >::type, 
            Terminal
        > ));
    BOOST_MPL_ASSERT(( 
        mpl::has_key<
            mpl::at< 
                mpl::at< 
                    mpl::at< 
                        bigTrie, 
                        mpl::_1
                    >::type,
                    mpl::_2
                >::type, 
                mpl::_3
            >::type, 
            Terminal
        > ));
    BOOST_MPL_ASSERT(( 
        mpl::has_key<
            mpl::at< 
                mpl::at< 
                    bigTrie, 
                    mpl::_2
                >::type,
                mpl::_2
            >::type, 
            Terminal
        > ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:10:13.993

所以答案是“是的，这是可能的”。

写 add_to_trie。它需要一个可能为空的 trie 和一个元素（类型序列）并返回一个添加了该元素的 trie。

在一个空的 trie 和一些序列上测试 add_to_trie，并在其他一些手工制作的案例上进行测试。通用前缀：("A")("A","B")，无通用前缀：("A","A")("B","A")，较短的无通用前缀：("A" ,"B")("B")，同一事物的两个副本：("A")("A") 等

写积累。它需要一个值、一个二元仿函数和一个序列。如果对序列的每个元素 s 应用 value = functor(value, s)，则返回 value。

通过将 1 到 5 相加并打印结果来累积测试。

组成两者。

这可能会破坏您的模板递归堆栈，并且每个步骤要正确编写都不是一件容易的事，但它会起作用。

首先编写上述对字符串的操作可能会有所帮助。然后使功能起作用。然后转换为对类型进行操作。

我敢打赌，即使是已经写好`boost`适当的钱。`accumulate`

# php - 在 store.load 上将 extjs 4 字段发布到 PHP

> ID：14958071
> 
> 赞同：0
> 
> 时间：2013-02-19T12:56:27.813
> 
> 标签：php, post, extjs, filter, extjs4

我正在从 extjs 2.2 迁移到 extjs 4.0。我的代码通过 POST 一些 ext 字段的 php（代理 url）过滤我的网格数据。

etx商店：

```
var store = Ext.create('Ext.data.Store', {
    model: 'Company',
    remoteSort: true,
    remoteFilter: true,
    proxy: {
        // load using script tags for cross domain, if the data in on the same domain as
        // this page, an HttpProxy would be better
        type: 'ajax',
        url: "logica_de_aplicacao/usuario/grid_usuarios_dados.php",
        reader: {
            root: 'results',
            totalProperty: 'total'
        },
        // sends single sort as multi parameter
        simpleSortMode: true
    },
    sorters: [{
        property: 'nome',
        direction: 'ASC'
    }]
}); 
```

ext字段（两个例子，字段太多）：

```
var txtLogin = new Ext.form.TextField({
                    fieldLabel: "Login",
                    width: 200
                });

var txtAtivo = new Ext.form.ComboBox({
                    fieldLabel: 'Ativo',
                    width: 200,
                    name: 'ativo',
                    editable: false,
                    disableKeyFilter: true,
                    forceSelection: true,
                    triggerAction: 'all',
                    mode: 'local',
                    store: new Ext.data.SimpleStore({
                        id: 0,
                        fields: ['value', 'text'],
                        data : [['S', 'Sim'], ['N', 'Não']]
                    }),
                    valueField: 'value',
                    displayField: 'text',
                    hiddenName: 'ativo'
                }); 
```

过滤：

```
tbar: [{
        text: "Adicionar Filtro", //add filter
        tooltip: "Filtre os resultados",
        iconCls:"icone_filtro",
        handler: function() {
            iniciaPesquisa();
        }
    }, {
        text: "Remover Filtro", //remove filter
        tooltip: "Cancelar o filtro",
        iconCls:"icone_cancel_filtro",
        handler: function() {
            store.baseParams = {
                login: "",
                nome: "",
                privilegio: "",
                ativo: "",
                municipio: ""
            };
            store.removeAll();
            store.load();

        }
    }], 
```

PHP：

```
...
$login = $_POST["login"];
...
$ativo = $_POST["ativo"]; 
```

在 ext 2.2 中，通常会在 store.load() 操作上发布字段内容，但现在什么也没有发生。我如何在 ext 4 中发布这些字段？

（为糟糕的英语道歉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:15:49.040

```
var store = Ext.create('Ext.data.Store', {
    model: 'Company',
    remoteSort: true,
    remoteFilter: true,
    proxy: {
        // load using script tags for cross domain, if the data in on the same domain as
        // this page, an HttpProxy would be better
        type: 'ajax',
        url: "logica_de_aplicacao/usuario/grid_usuarios_dados.php",
baseParams: {  //here you can define params you want to be sent on each request from this store
                        login: "",
                nome: "",
                privilegio: "",
                ativo: "",
                municipio: ""
                        },
        reader: {
            root: 'results',
            totalProperty: 'total'
        },
        // sends single sort as multi parameter
        simpleSortMode: true
    },
    sorters: [{
        property: 'nome',
        direction: 'ASC'
    }]
});

tbar: [{
        text: "Adicionar Filtro", //add filter
        tooltip: "Filtre os resultados",
        iconCls:"icone_filtro",
        handler: function() {
            iniciaPesquisa();
        }
    }, {
        text: "Remover Filtro", //remove filter
        tooltip: "Cancelar o filtro",
        iconCls:"icone_cancel_filtro",
        id : 'BtnRemoveFilter', // added this
        handler: function() {
            store.baseParams = {
                login: "",
                nome: "",
                privilegio: "",
                ativo: "",
                municipio: ""
            };
            store.removeAll();
            store.load();

        }
    }],

var Btn = Ext.getCmp('BtnRemoveFilter');
    Btn.on('click', function(){
        store.load({
                        params: {  //here you can define params on 'per request' basis
                                login: "the value u want to pass",
                nome: "the value u want to pass",
                privilegio: "the value u want to pass",
                ativo: "the value u want to pass",
                municipio: "the value u want to pass"
                                }
                        })
    }); 
```

试试这段代码是否有效。我认为这就是你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:57:42.673

现在实际上更简单了，只需使用`store.clearFilter()`

```
store.clearFilter();
store.removeAll();
store.load(); 
```

# java - 如何为具有外部依赖项的 Java 项目配置 Maven 构建？

> ID：14958076
> 
> 赞同：4
> 
> 时间：2013-02-19T12:56:41.687
> 
> 标签：java, maven, build, jar

我正在尝试创建用于使用 maven 构建的自动化解决方案。我的愿景是构建一个 Maven，它从我的项目创建 JAR 文件，然后将所有依赖项作为 JAR 复制到“目标”文件夹中的某个子目录。

我不想使用 Shade 或 Assembly（所以我不想提取其他 JAR 的内容并将其包含在一个“超级 JAR”中，因为该项目更复杂，并且当我包含所有 JAR 时它会中断在一个文件中）。

我怎样才能做这样的构建POM？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T13:05:04.073

我认为这里没有任何问题。只需使用`<packaging>jar</packaging>` 默认情况下创建 maven pom.xml 它不应该将所有依赖库打包到您的 jar 中。

```
<plugin>
  <artifactId>maven-dependency-plugin</artifactId>
  <executions>
    <execution>
      <phase>install</phase>
      <goals>
        <goal>copy-dependencies</goal>
      </goals>
      <configuration>
        <outputDirectory>${project.build.directory}/lib</outputDirectory>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:31:15.647

与您的最新评论相关，使用此插件在清单中添加主类：

```
 <plugin>
            <!-- Build an executable JAR -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.test.YourMainClass</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:06:21.800

您可以使用 maven-assembly-plugin 从目录中的一系列其他文件中创建一个 .zip 文件。我已使用此方法为项目创建分发 zip 文件。[maven-assembly-plugin 文档](http://maven.apache.org/plugins/maven-assembly-plugin/examples/index.html)中提供了几个示例。

# android - 在 onCreate() 中创建的 GyroListener 在 onResume() 中为空

> ID：14958077
> 
> 赞同：1
> 
> 时间：2013-02-19T12:56:42.303
> 
> 标签：android, onresume, gyroscope

我创建了一个 GyroListener`onCreate()`并在`onResume()`. 有时我会得到一个 NullPointerException in `onResume()`，但我不明白这是怎么回事，因为`onCreate()`总是被称为 be `onResume()`。这只发生在从 2.2 到 3.2.1 的 Android 版本中，大多数用户都有 Android 4+，我没有从他们的设备上收到关于此错误的单一报告。

这是我的代码（NullPointerException 在最后一行抛出`onResume()`）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_lock_screen);

    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    sensors = sensorManager.getSensorList(Sensor.TYPE_GYROSCOPE);
    gyroListener = new GyroListener();
    gyroListener.setOnGyroEventListener(new OnGyroEventListener() {
        @Override
        public void onTimeReset() {
            Toast.makeText(getApplicationContext(), "Reseted the time",
                Toast.LENGTH_LONG).show();
        }
    });
}

@Override
protected void onPause() {
    sensorManager.unregisterListener(gyroListener);
    super.onPause();
}

@Override
protected void onResume() {
    super.onResume();

    for (final Sensor sensor : sensors) {
        sensorManager.registerListener(gyroListener, sensor,
                SensorManager.SENSOR_DELAY_FASTEST);
    }
    gyroListener.resetStatus();
} 
```

这是一个例外：

java.lang.RuntimeException：无法恢复活动 {mypackage/mypackage.activity.MyActivity}：android.app.ActivityThread.performResumeActivity(ActivityThread.java:2124) 的 android.app.ActivityThread.handleResumeActivity(ActivityThread) 处的 java.lang.NullPointerException .java:2139) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1672) 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java :935) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在 android.app.ActivityThread.main(ActivityThread.java:3691) 在 java .lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:507) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)在 com.dalvik.system.NativeStart.main(Native Method) 处的 android.internal.os.ZygoteInit.main(ZygoteInit.java:670) 原因：mypackage.activity.MyActivity.onResume(MyActivity.java:373) 处的 java.lang.NullPointerException ) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1153) 在 android.app.Activity.performResume(Activity.java:3874) 在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2114) ... 12更多的.. 还有 12 个.. 还有 12 个

# salesforce - 使用 Apex:outputtext 显示日期时间

> ID：14958080
> 
> 赞同：0
> 
> 时间：2013-02-19T12:57:00.030
> 
> 标签：salesforce, visualforce

有没有办法使用`<apex:outputText>`标签显示用户时区的时间？我正在使用以下标记，没有 Apex 控制器：

```
<apex:outputLink rendered="{! fld == 'Due__c'}" onclick="updateDueDate('{!r.Id}');return  false;" styleClass="actionLink">
    <apex:outputText value="{0,date,M/d/yyyy h:mm a}" >
        <apex:param value="{!r[fld]}"/>
    </apex:outputText>
</apex:outputLink> 
```

其结果是日期以 GMT 时区显示。请让我知道我们如何在当前用户的时区显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:02:50.833

您可以这样做，但您必须在控制器中对其进行格式化。在那里你可以使用类似的东西：

```
DateTime.now().format('dd-MM-yyyy HH:mm:ss',Timezone); 
```

但是您必须在控制器中执行此操作。您不能在 visualforce 页面或公式中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T11:42:40.340

我有同样的问题，它对我有用的唯一方法是使用 outputField 而不是输出文本。这将格式化为本地用户

```
<apex:outputField value="{!date_field__c}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:59:34.023

您可以在这篇文章中阅读答案    [http://www.laceysnr.com/2011/09/formatting-that-date-one-solution-to.html?m=1](http://www.laceysnr.com/2011/09/formatting-that-date-one-solution-to.html?m=1)

# python - 从带有多个提交按钮的表单生成数据的问题，使用 python 请求模块提交

> ID：14958084
> 
> 赞同：0
> 
> 时间：2013-02-19T12:57:10.727
> 
> 标签：python, post, python-requests

我使用以下网站作为我工作的一部分：

[http://octopus.cbr.su.se/](http://octopus.cbr.su.se/)

并希望能够从脚本中使用它。

我正在使用请求（python-requests.org）模块并尝试以下代码：

```
import requests
octopus_url = "http://octopus.cbr.su.se/"
data = { 'value' : 'Submit OCTOPUS', 'name' : 'do',  'sequence' : 'QPRRKLCILHRNPGRCYDKIPAFYYNQKKKQCERFDWSGCGGNSNRFKTIEECRRTCIG' }
s = requests.Session()
r = s.post( octopus_url, data=data )
print r.text 
```

一般方法似乎适用于其他网站，但在这个网站上，无论我做什么，帖子数据似乎都被忽略了，我只是让页面显示出来，就好像我刚刚访问过它一样。

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:45:18.360

看起来该站点[提供了可供下载的代码](http://octopus.cbr.su.se/index.php?about=download)。你可以在本地运行它吗？

要回答您的问题，提交按钮的 HTML 是：

```
<input type="submit" name="do" value="Submit OCTOPUS"> 
```

所以你在哪里：

```
'value' : 'Submit OCTOPUS', 
'name' : 'do', 
```

你需要：

```
'do' : 'Submit OCTOPUS' 
```

使用其余代码，您将获得：

```
import requests

octopus_url = "http://octopus.cbr.su.se/"

data = {
    'do' : 'Submit OCTOPUS',
    'sequence' : 'QPRRKLCILHRNPGRCYDKIPAFYYNQKKKQCERFDWSGCGGNSNRFKTIEECRRTCIG'
}

s = requests.Session()
r = s.post( octopus_url, data=data )
print r.text 
```

我测试并为我工作。

# java - 字符串的Java正则表达式以数字和固定长度开头

> ID：14958087
> 
> 赞同：4
> 
> 时间：2013-02-19T12:57:17.557
> 
> 标签：java, regex

我做了一个正则表达式来检查 String 的长度，所有字符都是数字并以数字开头，例如 123 以下是我的表达式

```
REGEX =^123\\d+{9}$"; 
```

但它无法检查字符串的长度。它仅验证这些字符串的长度为 9 并以 123 开头。但如果我通过字符串 1234567891 它也会验证它。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:05:42.090

就像这里已经回答的那样，最简单的方法就是删除`+`：

```
^123\\d{9}$ 
```

或者

```
^123\\d{6}$ 
```

具体取决于你需要什么。

您还可以使用另一种更复杂和通用的方法，即负前瞻：

```
(?!.{10,})^123\\d+$ 
```

解释：

this :`(?!.{10,})`是一个**否定的前瞻**（`?=`将是一个肯定的前瞻），这意味着如果前瞻之后的表达式匹配这个模式，那么整个字符串不匹配。大致意思是：*仅当否定预读中的模式不匹配时，才满足此正则表达式的条件*。

在这种情况下，字符串仅在不匹配时才**匹配**`.{10}`，即 10 个或更多字符，因此仅在前面的模式匹配最多 9 个字符时才匹配。

积极的前瞻则相反，只有在前瞻中的标准**也**匹配时才匹配。

只是出于好奇而将其放在这里，它比您需要的要复杂得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T12:58:59.643

尝试使用这个：

```
^123\\d{6}$ 
```

我将其更改为`6`因为 1、2 和 3 可能仍应算作数字。

另外，我删除了`+`. 有了它，它将匹配 1 个或多个`\d`s（因此有无限数量的数字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:12:24.313

根据您在[Doorknobs 答案](https://stackoverflow.com/questions/14958087/java-regex-of-string-start-with-number-and-fixed-length#14958118)下方的评论，您可以执行以下操作：

```
int length = 9;
String prefix = "123"; // or whatever
String regex = "^" + prefix + "\\d{ " + (length - prefix.length()) + "}$";
if (input.matches(regex)) {
    // good
} else {
    // bad
} 
```

# javascript - 如何从javascript中的其他函数访问变量

> ID：14958090
> 
> 赞同：1
> 
> 时间：2013-02-19T12:57:25.313
> 
> 标签：javascript

我在函数中有一个变量，我想从其他函数访问它。我无法在函数之外定义这个变量。我设置了示例代码以供审查。[http://jsfiddle.net/VC6Wq/1/](http://jsfiddle.net/VC6Wq/1/)

```
function one(){
var zero= 500;
}

function two(){
alert(zero)
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T12:59:33.093

我想这就是你要找的。

```
function one() {
var zero = 500;
two(zero);
}

function two(a) {
alert(a);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T12:59:35.230

如果在浏览器中，您可以将变量置于`window`全局变量之下。所以像这样：

```
function one() {
  window.zero = 500;
}

function two() {
  alert(window.zero)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:00:14.583

像这样试试

```
function one(){
    var zero= 500;
    return zero;
}

function two(){
    var alt = one();
    alert(alt);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:03:06.683

您可以在 Javascript 中全局声明该变量，然后根据需要使用/修改/访问

```
function one()
{
   myVar = 0;
   alert(myVar);
   two();
}

function two()
{
  alert(myVar);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T11:32:36.743

由于不能全局定义变量，一种方法是模拟全局变量，将其附加到 DOM 节点，如下所示：

```
//note the notation 'data-'
<div id="node" data-zero='500'/> 
```

要设置值：

```
 // Store the value into data var within the div
   $('#node').data('zero', value); 
```

要获得价值：

```
 var value =  $('#node').data('zero');
   alert(value); 
```

示例：http: [//jsfiddle.net/VC6Wq/4/](http://jsfiddle.net/VC6Wq/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T12:58:56.097

尝试这个 ：

```
function one(){
var zero = 500;
return zero;
}
function two(){   
alert(one());
}
two(); 
```

或者在全局范围内定义任何其他变量并将其分配为 'zero' 的值：

```
var zero_2;
function one(){
var zero = 500;
var zero_2 = zero;
}
function two(){   
alert(zero_2);
}
two(); 
```

# powershell - Powershell - 如何将 lastlogon 转换为天数

> ID：14958093
> 
> 赞同：0
> 
> 时间：2013-02-19T12:57:28.440
> 
> 标签：powershell, csv, active-directory

我想查询 Active Directory 以返回用户登录的天数。目前我可以得到 lastlogon 日期，例如 2/26/2012 9:28:28 AM，但我想知道 lastlogon 和今天之间的天数。

这是我在 stackoverflow 上的另一篇文章中找到的脚本

```
Search-ADAccount -UsersOnly -SearchBase "OU=users,OU=City,dc=mydomain,DC=local" -AccountDisabled:$false | Get-ADUser -Properties Name, manager, LastLogon | Select Name, manager, @{N='LastLogon'; E={[DateTime]::FromFileTime($_.LastLogon)}} | export-csv u:\Australia.csv -Delimiter ";" -NoTypeInformation 
```

除了返回一个整数告诉我 50 的“lastlogon”之外，我想在我的 CSV 调用“Last Logon Days”中有另一列，这意味着 lastlogon 是 50 天前。

更新：

我根据@Musaab Al-Okaidi 回复使用了这个命令

```
Search-ADAccount -UsersOnly  -AccountDisabled:$false | Get-ADUser -Properties Name, manager, LastLogontimestamp | select Name, @{manager,@{N='LastLogontimestamp'; E={[DateTime]::FromFileTime($_.LastLogontimestamp)}}, @{N='Last Logon Days'; E={$($(Get-Date) - $([DateTime]::FromFileTime($_.LastLogontimestamp))).Days}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:13:48.037

更新：这将为您提供上次登录和脚本运行之日之间的天数。

```
Search-ADAccount -UsersOnly  -AccountDisabled:$false | Get-ADUser -Properties Name, manager, LastLogon | select Name, manager,@{N='LastLogon'; E={[DateTime]::FromFileTime($_.LastLogon)}}, @{N='Last Logon Days'; E={$($(Get-Date) - $([DateTime]::FromFileTime($_.LastLogon))).Days}} 
```

# ios - iOS：Storyboard 上未显示自定义按钮

> ID：14958097
> 
> 赞同：1
> 
> 时间：2013-02-19T12:57:40.250
> 
> 标签：ios, button, interface, storyboard, builder

我在故事板中以编程方式显示图像并成功处理横向/纵向方向（请参见下面的代码）。我现在正在尝试通过 Interface Builder 直接在情节提要中的同一视图上添加自定义按钮。应用程序运行时，该按钮不显示。只有图像。你能告诉我在情节提要视图上做这件事的方法吗？或者我也应该以编程方式添加它？还是在 Interface builder 中 100% 重做所有事情？真的不知道如何混合和匹配这两种方法......

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [[self navigationController] setNavigationBarHidden:YES animated:YES];

    UIImage *startImage = [UIImage imageNamed:@"title.png"];
    UIImageView *startImageView = [[UIImageView alloc] initWithImage:startImage];

    self.startImageView = startImageView;

    [self.view addSubview:startImageView];

}

- (void) orientStartImageView
{
     UIInterfaceOrientation curOrientation = [UIApplication sharedApplication].statusBarOrientation;
     if (curOrientation == UIInterfaceOrientationPortrait || curOrientation == UIInterfaceOrientationPortraitUpsideDown) {
     [self.startImageView setFrame:CGRectMake(-128, 0, 1024, 1024)];
 }else{
     [self.startImageView setFrame:CGRectMake(0, -128, 1024, 1024)];
 }
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self orientStartImageView];
}

- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];
    [self orientStartImageView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:03:21.847

它的bcoz您在Button顶部添加ImageView，您可以使用此代码将其置于前面，将其放入`viewdidload`方法中：

```
[self.view bringSubviewToFront:yourBtn]; 
```

# c# - 为什么序列等于列表 返回假？

> ID：14958098
> 
> 赞同：12
> 
> 时间：2013-02-19T12:57:40.993
> 
> 标签：c#, list, comparison

嗨，当我遇到这样的情况时，我对[sequenceEqual](http://msdn.microsoft.com/en-us/library/bb348567%28v=vs.100%29.aspx)有一些问题：

```
Sentence s1 = new Sentence { Text = "Hi", Order = 1 };
Sentence s2 = new Sentence { Text = "Hello", Order = 2 };
List<Sentence> list1 = new List<Sentence> { s1, s2 };
List<Sentence> list2 = new List<Sentence> { s1, s2 }; 
```

这很好用

```
bool equal = list1.SequenceEqual(list2); 
```

并返回`true`；

但是当我有一些返回`List<Sentence>` 例如的方法时：

```
public List<Sentence> Getall()
    {
        Sentence s1 = new Sentence { Text = "Hi", Order = 1 };
        Sentence s2 = new Sentence { Text = "Hello", Order = 2 };

        return new List<Sentence> { s1, s2 };
    } 
```

并像这样使用它：

```
List<Sentence> list1 = Getall();
List<Sentence> list2 = Getall(); 
```

然后简单地检查一下

```
bool equal = list1.SequenceEqual(list2); 
```

它返回'false'，请告诉我为什么？以及如何使其工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T13:00:06.360

你的问题是一个`new Sentence { Text = "Hi", Order = 1 }`不等于另一个`new Sentence { Text = "Hi", Order = 1 }`。尽管内容相同，但您有两个单独的对象，除非您设计了类，否则它们彼此不相等，除非它们实际上是相同的对象（如您的第一个示例中所示）。

您的`Sentence`班级需要覆盖，[`Equals`](http://msdn.microsoft.com/en-GB/library/bsc2ak47.aspx)并且[`GetHashCode`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)至少，此时您`SequenceEquals`应该再次工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-19T13:00:16.733

正如[MSDN 在这里所说](http://msdn.microsoft.com/en-us/library/bb348567.aspx)：

> **通过使用其类型的默认相等比较器比较**元素来确定两个序列是否相等。

 **`Sentence`在您的情况下，是具有默认值`Equals`和的引用类型`GetHashCode`，这意味着它将对每个元素使用引用相等。

您始终可以使用[接受的重载`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/bb342073.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:04:01.717

每次调用时，您都会创建两个新的 Sentence 实例`Getall()`。当比较列表中的元素时，`SequenceEqual`将使用默认的相等比较器，它基本上只是检查它们是否引用同一个对象：它们没有，所以它们是不同的。

What you can do is override the `Equal()` and `==` operators in Sequence to have equality check other properties (like Text and Order).

Alternatively you can write an `IEqualityComparer<Sequence>` and pass it to `SequenceEqual`**

# r - 在 ldply() 中使用 summary(glm-object) 和 summarise() - 函数

> ID：14958099
> 
> 赞同：2
> 
> 时间：2013-02-19T12:57:41.423
> 
> 标签：r, extract, plyr, summary, glm

如何使用 ldply()-summarise-function 中的 summary-function 来提取 p 值？

**示例数据：**

（预装数据框“嘌呤霉素”）

```
library(reshape2)
library(plyr)
Puromycin.m <- melt( Puromycin , id=c("state")  )
Puro.models <-  dlply( Puromycin.m , .(variable)  , glm , formula =  state ~ value  , 
family = binomial  ) 
```

**我可以用提取的结果构造这个数据框：**

```
ldply( Puro.models  ,  summarise ,  "n in each model" = length(fitted.values) ,   
"Coefficients" = coefficients[2] ) 
```

**但我不能以同样的方式提取 p 值。我认为这会起作用，但它不会：**

```
 ldply( Puro.models  ,  summarise ,  
    "n in each model" = length(fitted.values) , 
    "Coefficients" = coefficients[2], 
    "P-value" = function(x) summary(x)$coef[2,4]              ) 
```

**我怎样才能将p值提取到该数据框:)请帮忙！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:25:55.600

你为什么不直接得到它们？

```
library(reshape2)
library(plyr)
Puromycin.m <- melt( Puromycin , id=c("state")  )
Puro.models <-  ddply( Puromycin.m , .(variable), function(x) {
    t <- glm(x, formula = state ~ value, family="binomial")
    data.frame(n = length(t$fitted.values), 
                coef = coefficients(t)[2], 
                pval = summary(t)$coef[2,4])
})

> Puro.models
#   variable  n        coef      pval
# 1     conc 23 -0.55300908 0.6451550
# 2     rate 23 -0.01555023 0.1272184 
```

# c# - LINQ to XML - 如何修复根元素中的默认命名空间

> ID：14958101
> 
> 赞同：2
> 
> 时间：2013-02-19T12:57:49.127
> 
> 标签：c#, linq-to-xml, xml-namespaces

考虑生成以下 XML 结构，它有 2 个前缀命名空间：

```
XNamespace ns1 = "http://www.namespace.org/ns1";
const string prefix1 = "w1";
XNamespace ns2 = "http://www.namespace.org/ns2";
const string prefix2 = "w2";

var root = 
    new XElement(ns1 + "root", 
        new XElement(ns1 + "E1"
            , new XAttribute(ns1 + "attr1", "value1")
            , new XAttribute(ns2 + "attr2", "value2"))
        , new XAttribute(XNamespace.Xmlns + prefix2, ns2)
        , new XAttribute(XNamespace.Xmlns + prefix1, ns1)
    ); 
```

它生成以下 XML 结果（很好）：

```
<w1:root xmlns:w2="http://www.namespace.org/ns2" xmlns:w1="http://www.namespace.org/ns1">
  <w1:E1 w1:attr1="value1" w2:attr2="value2" />
</w1:root> 
```

当我尝试`ns1`通过注释掉其 XML 声明来将前缀命名空间更改为默认命名空间时，就会出现问题，如下所示：

```
var root = 
    new XElement(ns1 + "root", 
        new XElement(ns1 + "E1"
            , new XAttribute(ns1 + "attr1", "value1")
            , new XAttribute(ns2 + "attr2", "value2"))
        , new XAttribute(XNamespace.Xmlns + prefix2, ns2)
        //, new XAttribute(XNamespace.Xmlns + prefix1, ns1)
    ); 
```

产生：

```
<root xmlns:w2="http://www.namespace.org/ns2" xmlns="http://www.namespace.org/ns1">
  <E1 p3:attr1="value1" w2:attr2="value2" xmlns:p3="http://www.namespace.org/ns1" />
</root> 
```

注意 和 中的重复命名空间定义`root`以及`E1`前缀为`p3`under的属性`E1`。我怎样才能避免这种情况发生？如何强制在根元素中声明默认命名空间？

### 相关问题

我研究了这个问题：[How to set the default XML namespace for an XDocument](https://stackoverflow.com/questions/2874422/how-to-set-the-default-xml-namespace-for-an-xdocument)

但是建议的答案替换了没有定义任何命名空间的元素的命名空间。在我的示例中，元素和属性已经正确设置了它们的命名空间。

### 我试过的

基于太多的试验和错误，在我看来，不在根节点下的属性，其中属性及其直接父元素都具有与默认命名空间相同的命名空间；需要删除属性的命名空间！！！

基于此，我定义了以下扩展方法，它遍历生成的 XML 的所有元素并执行上述操作。到目前为止，在我的所有示例中，此扩展方法都成功地解决了问题，但这并不一定意味着有人不能为其生成失败的示例：

```
public static void FixDefaultXmlNamespace(this XElement xelem, XNamespace ns)
{
    if(xelem.Parent != null && xelem.Name.Namespace == ns)
    {
        if(xelem.Attributes().Any(x => x.Name.Namespace == ns))
        {
            var attrs = xelem.Attributes().ToArray();
            for (int i = 0; i < attrs.Length; i++)
            {
                var attr = attrs[i];
                if (attr.Name.Namespace == ns)
                {
                    attrs[i] = new XAttribute(attr.Name.LocalName, attr.Value);
                }
            }

            xelem.ReplaceAttributes(attrs);
        }
    }

    foreach (var elem in xelem.Elements())
        elem.FixDefaultXmlNamespace(ns);
} 
```

此扩展方法为我们的问题生成以下 XML，这正是我想要的：

```
<root xmlns:w2="http://www.namespace.org/ns2" xmlns="http://www.namespace.org/ns1">
  <E1 attr1="value1" w2:attr2="value2" />
</root> 
```

但是我不喜欢这个解决方案，主要是因为它很贵。我觉得我在某个地方错过了一个小环境。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:00:41.197

[从这里](http://www.xmlplease.com/attributexmlns)引用：

> 属性不被视为其父元素的子元素。属性永远不会继承其父元素的命名空间。出于这个原因，一个属性只有在它具有适当的命名空间前缀时才位于命名空间中。属性永远不能在默认命名空间中。

[在](http://www.w3.org/TR/REC-xml-names/#defaulting)这里：

> 默认命名空间声明适用于其范围内的所有无前缀元素名称。默认命名空间声明不直接应用于属性名称；无前缀属性的解释由它们出现的元素决定。

LINQ-to-XML 的这种奇怪行为似乎植根于标准。因此，每当添加新属性时，必须将其命名空间与在其范围内处于活动状态的父级默认命名空间进行比较。我使用这个扩展方法来添加属性：

```
public static XAttribute AddAttributeNamespaceSafe(this XElement parent, 
         XName attrName, string attrValue, XNamespace documentDefaultNamespace)
{
    if (newAttrName.Namespace == documentDefaultNamespace)
        attrName = attrName.LocalName;

    var newAttr = new XAttribute(attrName, attrValue);
    parent.Add(newAttr);
    return newAttr;
} 
```

并使用此扩展方法检索属性：

```
public static XAttribute GetAttributeNamespaceSafe(this XElement parent, 
        XName attrName, XNamespace documentDefaultNamespace)
{
    if (attrName.Namespace == documentDefaultNamespace)
        attrName = attrName.LocalName;
    return parent.Attribute(attrName);
} 
```

或者，如果您手头有 XML 结构并想要修复已添加到属性的命名空间，请使用以下扩展方法来修复此问题（与问题中概述的略有不同）：

```
public static void FixDefaultXmlNamespace(this XElement xelem, 
        XNamespace documentDefaultNamespace)
{
    if (xelem.Attributes().Any(x => x.Name.Namespace == documentDefaultNamespace))
    {
        var attrs = xelem.Attributes().ToArray();
        for (int i = 0; i < attrs.Length; i++)
        {
            var attr = attrs[i];
            if (attr.Name.Namespace == documentDefaultNamespace)
            {
                attrs[i] = new XAttribute(attr.Name.LocalName, attr.Value);
            }
        }

        xelem.ReplaceAttributes(attrs);
    }

    foreach (var elem in xelem.Elements())
        elem.FixDefaultXmlNamespace(documentDefaultNamespace);
} 
```

请注意，如果您在添加和检索属性时使用了前两种方法，则不需要应用上述方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:28:41.433

我从 Nutshell 书中的 C# 中为您找到了一些东西：

您也可以将命名空间分配给属性。主要区别在于它总是需要一个前缀。例如：

```
<customer xmlns:nut="OReilly.Nutshell.CSharp" nut:id="123" /> 
```

另一个区别是非限定属性总是有一个空的命名空间：它从不从父元素继承默认命名空间。

因此，鉴于您想要的输出，我做了一个简单的检查。

```
 var xml = @"<root xmlns:w2=""http://www.namespace.org/ns2"" xmlns=""http://www.namespace.org/ns1"">
                <E1 attr1=""value1"" w2:attr2=""value2"" />
            </root>";

        var dom = XElement.Parse(xml);
        var e1 = dom.Element(ns1 + "E1");

        var attr2 = e1.Attribute(ns2 + "attr2");
        var attr1 = e1.Attribute(ns1 + "attr1");
        // attr1 is null !

        var attrNoNS = e1.Attribute("attr1");
        // attrNoNS is not null 
```

所以简而言之 attr1 没有默认命名空间，但有一个空的命名空间。

这是你想要的吗？如果是，只需创建不带命名空间的 attr1 ...

```
new XAttribute("attr1", "value1") 
```

# javascript - 如何使用 CryptoJS AES 解密消息。我有一个有效的 Ruby 示例

> ID：14958103
> 
> 赞同：23
> 
> 时间：2013-02-19T12:58:03.603
> 
> 标签：javascript, ruby, aes, cryptojs

我可以像这样使用 Ruby 解密 AES 加密消息：

```
require 'openssl'
require 'base64'

data = "IYkyGxYaNgHpnZWgwILMalVFmLWFgTCHCZL9263NOcfSo5lBjAzOZAtF5bF++R0Bi+9c9E+p3VEr/xvj4oABtRWVJ2wlWzLbYC2rKFk5iapFhb7uZCUpO4w4Su3a5QFa2vInjYueziRoqySZd/DpstMJ8rsJ94VGizFFFZ1l0sw1ax+wfBAv5+wHs/hlnHi/ea66KBO3rgXKahvV28h+4bh5etc8RCrmiiNbfg6Oj0jQJDjdYIdW8T9YPOI9E1hih8lbfRnMWcOFJgYekfLpoy5LI525UGnlM46J1k6ekLqsn9FqvbiOOoLgqa4YqBm1i9P0ePyjkME+t+RiL8xXX+ItgOYr9G7kM64wlTJPCW8B/crmUdmGzQNC/hD/u/8wfHBS2f8u6OtQMG/+Kpk1oju8lcUZGI/4S8A6/OuktvQr2zgnbs2aADMrM37Oait/pJ3G73S7NwVT8EaK+X43c0C/fUvW2/bD/rqCNpAh9WQlz4Cj6JHwjbmwuind6aCimF1tHjXuR9FXu+g17sPT4ZkKZ6aeBG+m170XdCGn2hVM0wH1rh3VeCG2u/JFqfuGKGSoqeHeNY/icu9pEhtZDzHd7aPoaMXcWvXC9PjooBf7GM1EPacSdnon1kBobjtKSt1l15DjO5TMrJoX7VO7GotQwo+uI/u5Kop01hBXxyxyggl1/8N0ESohPJoqLDrIwvbGK5kW4B49FVPnx9CMvjZDdSsoxPAh+hx6SPe8Hj0Nx4bRs06cbtOkte/V8QSYIqjiJDleEqPrdiKlvgToZz9L29ZR/3Ln65qU1sq7q9c0SEYxIopV7TdTjFS7y76zDPFZkhzc3DjfLtJo/M1hdtt648APcZdmAIgWH6fh3eJZ0qbiPh8RStYH7I2COmnlMw4+t/B5mlhYVSgwPK2Ir736Mh+P9Bw0fF8r9Ghhs4AJzpU0RiK9d1tCsrLfK/hSRwTXhtsSB6eDWEGkO7oeEIz43mgn0sv3SrA9JNHzYkg="
key = "2e35f242a46d67eeb74aabc37d5e5d05"

aes = OpenSSL::Cipher::Cipher.new('aes-128-cbc')
aes.decrypt
aes.key = key.scan(/../).collect{ |x| x.hex }.pack('c*')
aes.iv = Base64.decode64(data)[0...16]
puts aes.update(Base64.decode64(data)[16..-1]) + aes.final
# => JSON data... 
```

作为 CryptoJS 的新手，我无法组合出可行的替代方案。这是我到目前为止所做的：

```
data = "IYkyGxYaNgHpnZWgwILMalVFmLWFgTCHCZL9263NOcfSo5lBjAzOZAtF5bF++R0Bi+9c9E+p3VEr/xvj4oABtRWVJ2wlWzLbYC2rKFk5iapFhb7uZCUpO4w4Su3a5QFa2vInjYueziRoqySZd/DpstMJ8rsJ94VGizFFFZ1l0sw1ax+wfBAv5+wHs/hlnHi/ea66KBO3rgXKahvV28h+4bh5etc8RCrmiiNbfg6Oj0jQJDjdYIdW8T9YPOI9E1hih8lbfRnMWcOFJgYekfLpoy5LI525UGnlM46J1k6ekLqsn9FqvbiOOoLgqa4YqBm1i9P0ePyjkME+t+RiL8xXX+ItgOYr9G7kM64wlTJPCW8B/crmUdmGzQNC/hD/u/8wfHBS2f8u6OtQMG/+Kpk1oju8lcUZGI/4S8A6/OuktvQr2zgnbs2aADMrM37Oait/pJ3G73S7NwVT8EaK+X43c0C/fUvW2/bD/rqCNpAh9WQlz4Cj6JHwjbmwuind6aCimF1tHjXuR9FXu+g17sPT4ZkKZ6aeBG+m170XdCGn2hVM0wH1rh3VeCG2u/JFqfuGKGSoqeHeNY/icu9pEhtZDzHd7aPoaMXcWvXC9PjooBf7GM1EPacSdnon1kBobjtKSt1l15DjO5TMrJoX7VO7GotQwo+uI/u5Kop01hBXxyxyggl1/8N0ESohPJoqLDrIwvbGK5kW4B49FVPnx9CMvjZDdSsoxPAh+hx6SPe8Hj0Nx4bRs06cbtOkte/V8QSYIqjiJDleEqPrdiKlvgToZz9L29ZR/3Ln65qU1sq7q9c0SEYxIopV7TdTjFS7y76zDPFZkhzc3DjfLtJo/M1hdtt648APcZdmAIgWH6fh3eJZ0qbiPh8RStYH7I2COmnlMw4+t/B5mlhYVSgwPK2Ir736Mh+P9Bw0fF8r9Ghhs4AJzpU0RiK9d1tCsrLfK/hSRwTXhtsSB6eDWEGkO7oeEIz43mgn0sv3SrA9JNHzYkg=";
key = "2e35f242a46d67eeb74aabc37d5e5d05";

CryptoJS.AES.decrypt(atob(data).substring(16), key, {
    iv: atob(cipher).substring(0, 16),
    mode: CryptoJS.mode.CBC,
    padding: CryptoJS.pad.Pkcs7
}); 
```

CryptoJS 是否以某种不同的方式期望数据、密钥和初始化向量？据我了解，IV 是数据的前 16 个字节。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-03-24T05:05:10.337

这适用于使用 javascript 进行解密。

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/aes.js"></script>
var key = "2e35f242a46d67eeb74aabc37d5e5d05";
var data = CryptoJS.AES.encrypt("Message", key); // Encryption Part
var decrypted = CryptoJS.AES.decrypt(data, key).toString(CryptoJS.enc.Utf8); // Message 
```

我想我参加聚会有点晚了。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-28T00:03:07.440

这似乎对我有用（将解码的字符串写入控制台）：

```
data = "IYkyGxYaNgHpnZWgwILMalVFmLWFgTCHCZL9263NOcfSo5lBjAzOZAtF5bF++R0Bi+9c9E+p3VEr/xvj4oABtRWVJ2wlWzLbYC2rKFk5iapFhb7uZCUpO4w4Su3a5QFa2vInjYueziRoqySZd/DpstMJ8rsJ94VGizFFFZ1l0sw1ax+wfBAv5+wHs/hlnHi/ea66KBO3rgXKahvV28h+4bh5etc8RCrmiiNbfg6Oj0jQJDjdYIdW8T9YPOI9E1hih8lbfRnMWcOFJgYekfLpoy5LI525UGnlM46J1k6ekLqsn9FqvbiOOoLgqa4YqBm1i9P0ePyjkME+t+RiL8xXX+ItgOYr9G7kM64wlTJPCW8B/crmUdmGzQNC/hD/u/8wfHBS2f8u6OtQMG/+Kpk1oju8lcUZGI/4S8A6/OuktvQr2zgnbs2aADMrM37Oait/pJ3G73S7NwVT8EaK+X43c0C/fUvW2/bD/rqCNpAh9WQlz4Cj6JHwjbmwuind6aCimF1tHjXuR9FXu+g17sPT4ZkKZ6aeBG+m170XdCGn2hVM0wH1rh3VeCG2u/JFqfuGKGSoqeHeNY/icu9pEhtZDzHd7aPoaMXcWvXC9PjooBf7GM1EPacSdnon1kBobjtKSt1l15DjO5TMrJoX7VO7GotQwo+uI/u5Kop01hBXxyxyggl1/8N0ESohPJoqLDrIwvbGK5kW4B49FVPnx9CMvjZDdSsoxPAh+hx6SPe8Hj0Nx4bRs06cbtOkte/V8QSYIqjiJDleEqPrdiKlvgToZz9L29ZR/3Ln65qU1sq7q9c0SEYxIopV7TdTjFS7y76zDPFZkhzc3DjfLtJo/M1hdtt648APcZdmAIgWH6fh3eJZ0qbiPh8RStYH7I2COmnlMw4+t/B5mlhYVSgwPK2Ir736Mh+P9Bw0fF8r9Ghhs4AJzpU0RiK9d1tCsrLfK/hSRwTXhtsSB6eDWEGkO7oeEIz43mgn0sv3SrA9JNHzYkg=";
key = "2e35f242a46d67eeb74aabc37d5e5d05";

// Decode the base64 data so we can separate iv and crypt text.
var rawData = atob(data);
var iv = btoa(rawData.substring(0,16));
var crypttext = btoa(rawData.substring(16));

// Decrypt...
var plaintextArray = CryptoJS.AES.decrypt(
  {
    ciphertext: CryptoJS.enc.Base64.parse(crypttext),
    salt: ""
  },
  CryptoJS.enc.Hex.parse(key),
  { iv: CryptoJS.enc.Base64.parse(iv) }
);

// Convert hex string to ASCII.
// See https://stackoverflow.com/questions/11889329/word-array-to-string
function hex2a(hex) {
    var str = '';
    for (var i = 0; i < hex.length; i += 2)
        str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return str;
}

console.log(hex2a(plaintextArray.toString())); 
```

正如 jlvaquero 所说，重要的一点是在您的输入中指定无盐并将密钥作为 WordArray 传递。可能需要进行一些效率改进，例如，我猜有一种将字符串转换为 WordArray 的方法比转到 base64 并返回更简单，但至少它可以成功解码。我将 hex2a 函数从 StackOverflow 问题[Word Array 提升到 String](https://stackoverflow.com/questions/11889329/word-array-to-string)。

编辑：我想出了如何使用 CryptoJS 将字符串转换为 WordArrays，反之亦然，因此不需要额外的 base64 编码/解码和十六进制到 ASCII 函数。事实证明，不需要指定 salt 属性。这更加紧凑和高效：

```
data = "IYkyGxYaNgHpnZWgwILMalVFmLWFgTCHCZL9263NOcfSo5lBjAzOZAtF5bF++R0Bi+9c9E+p3VEr/xvj4oABtRWVJ2wlWzLbYC2rKFk5iapFhb7uZCUpO4w4Su3a5QFa2vInjYueziRoqySZd/DpstMJ8rsJ94VGizFFFZ1l0sw1ax+wfBAv5+wHs/hlnHi/ea66KBO3rgXKahvV28h+4bh5etc8RCrmiiNbfg6Oj0jQJDjdYIdW8T9YPOI9E1hih8lbfRnMWcOFJgYekfLpoy5LI525UGnlM46J1k6ekLqsn9FqvbiOOoLgqa4YqBm1i9P0ePyjkME+t+RiL8xXX+ItgOYr9G7kM64wlTJPCW8B/crmUdmGzQNC/hD/u/8wfHBS2f8u6OtQMG/+Kpk1oju8lcUZGI/4S8A6/OuktvQr2zgnbs2aADMrM37Oait/pJ3G73S7NwVT8EaK+X43c0C/fUvW2/bD/rqCNpAh9WQlz4Cj6JHwjbmwuind6aCimF1tHjXuR9FXu+g17sPT4ZkKZ6aeBG+m170XdCGn2hVM0wH1rh3VeCG2u/JFqfuGKGSoqeHeNY/icu9pEhtZDzHd7aPoaMXcWvXC9PjooBf7GM1EPacSdnon1kBobjtKSt1l15DjO5TMrJoX7VO7GotQwo+uI/u5Kop01hBXxyxyggl1/8N0ESohPJoqLDrIwvbGK5kW4B49FVPnx9CMvjZDdSsoxPAh+hx6SPe8Hj0Nx4bRs06cbtOkte/V8QSYIqjiJDleEqPrdiKlvgToZz9L29ZR/3Ln65qU1sq7q9c0SEYxIopV7TdTjFS7y76zDPFZkhzc3DjfLtJo/M1hdtt648APcZdmAIgWH6fh3eJZ0qbiPh8RStYH7I2COmnlMw4+t/B5mlhYVSgwPK2Ir736Mh+P9Bw0fF8r9Ghhs4AJzpU0RiK9d1tCsrLfK/hSRwTXhtsSB6eDWEGkO7oeEIz43mgn0sv3SrA9JNHzYkg=";
key = "2e35f242a46d67eeb74aabc37d5e5d05";

// Decode the base64 data so we can separate iv and crypt text.
var rawData = atob(data);
var iv = rawData.substring(0,16);
var crypttext = rawData.substring(16);

// Decrypt...
var plaintextArray = CryptoJS.AES.decrypt(
  { ciphertext: CryptoJS.enc.Latin1.parse(crypttext) },
  CryptoJS.enc.Hex.parse(key),
  { iv: CryptoJS.enc.Latin1.parse(iv) }
);

console.log(CryptoJS.enc.Latin1.stringify(plaintextArray)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-19T07:01:31.087

```
encryptWithCryptoJS(plainText: string): string {
    const key = CryptoJS.enc.Utf8.parse("hf8685nfhfhjs9h8");
    const iv1 = CryptoJS.enc.Utf8.parse("hf8685nfhfhjs9h8");
    const encrypted = CryptoJS.AES.encrypt(plainText, key, {
        keySize: 16,
        iv: iv1,
        mode: CryptoJS.mode.ECB,
        padding: CryptoJS.pad.Pkcs7
    });

    return encrypted + "";
}

decryptionWithCryptoJS(cipher: string): string {
    const key = CryptoJS.enc.Utf8.parse("hf8685nfhfhjs9h8");
    const iv1 = CryptoJS.enc.Utf8.parse("hf8685nfhfhjs9h8");
    const plainText = CryptoJS.AES.decrypt(cipher, key, {
        keySize: 16,
        iv: iv1,
        mode: CryptoJS.mode.ECB,
        padding: CryptoJS.pad.Pkcs7
    });

    return plainText.toString(CryptoJS.enc.Utf8);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-08T12:49:01.873

```
 var key = CryptoJS.enc.Utf8.parse('8080808080808080');
    var iv = CryptoJS.enc.Utf8.parse('8080808080808080');
    var _enid = CryptoJS.AES.decrypt(data, key,
  {
      keySize: 128 / 8,
      iv: iv,
      mode: CryptoJS.mode.CBC,
      padding: CryptoJS.pad.Pkcs7
  }).toString(CryptoJS.enc.Utf8);
    return _enid; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T01:43:40.217

对于其他用户提供的 hex2a，如果 ascii 码超过 128（即文本包含中文等），它可能无法正常工作

您可以使用以下内容返回正确的 unicode

```
function hex2a(hex) {
    var str = '';
    for (var i = 0; i < hex.length; i += 2){

        var dec = parseInt(hex.substr(i, 2), 16);
        character = String.fromCharCode(dec);

        if (dec > 127)
            character = "%"+hex.substr(i,2);

        str += character;

    }

    return decodeURI(str);
} 
```

# c# - 使用在其返回语句中创建特定新对象的方法时“未证明不变”

> ID：14958107
> 
> 赞同：18
> 
> 时间：2013-02-19T12:58:17.517
> 
> 标签：c#, code-contracts

下面的简单代码将通过代码合同的静态检查器产生“不变的未经证实”的警告，尽管没有办法`_foo`可以`null`. 警告是针对`return`里面的语句`UncalledMethod`。

```
public class Node
{
    public Node(string s1, string s2, string s3, string s4, object o,
                string s5)
    {
    }
}

public class Bar
{
    private readonly string _foo;

    public Bar()
    {
        _foo = "foo";
    }

    private object UncalledMethod()
    {
        return new Node(string.Empty, string.Empty, string.Empty, string.Empty,
                        GetNode(), string.Empty);
    }

    private Node GetNode()
    {
        return null;
    }

    public string Foo
    {
        get
        {
            Contract.Ensures(Contract.Result<string>() != null);
            return _foo;
        }
    }

    [ContractInvariantMethod]
    private void Invariants()
    {
        Contract.Invariant(_foo != null);
    }
} 
```

除了警告根本无效之外，它仅在某些特定情况下发生。更改以下*任何*一项将使警告消失：

1.  内联`GetNode`，因此 return 语句如下所示：

    ```
    return new Node(string.Empty, string.Empty, string.Empty, string.Empty, null,
                    string.Empty); 
    ```

2.  从 的构造函数中删除任何参数 s1 到 s5 `Node`。
3.  `Node`从to的构造函数更改任何参数 s1 到 s5 的类型`object`。
4.  对结果使用临时变量`GetNode`：

    ```
     var node = GetNode();
        return new Node(string.Empty, string.Empty, string.Empty, string.Empty,
                        node, string.Empty); 
    ```

5.  改变构造函数的参数顺序`Node`。
6.  在项目设置的代码协定设置窗格中选中“显示假设”选项。

**我是否在这里遗漏了一些明显的东西，或者这只是静态检查器中的一个错误？**

* * *

我的设置：

![](../Images/7c0b3d619a7aa22246e334a52e775814.png)

我的输出：

```
C:\{path}\Program.cs(20,9): message : CodeContracts: Suggested ensures: Contract.Ensures(this._foo != null);
C:\{path}\Program.cs(41,17): message : CodeContracts: Suggested ensures: Contract.Ensures(Contract.Result<System.String>() == this._foo);
C:\{path}\Program.cs(33,13): message : CodeContracts: Suggested ensures: Contract.Ensures(Contract.Result<ConsoleApplication3.Program+Node>() == null);
C:\{path}\Program.cs(27,13): message : CodeContracts: Suggested ensures: Contract.Ensures(Contract.Result<System.Object>() != null);
C:\{path}\Program.cs(55,13): message : CodeContracts: Suggested ensures: Contract.Ensures(Contract.ForAll(0, args.Length, __k__ => args[__k__] != 0));
CodeContracts: ConsoleApplication3: Validated:  92,3%
CodeContracts: ConsoleApplication3: Contract density: 1,81
CodeContracts: ConsoleApplication3: Total methods analyzed 8
CodeContracts: ConsoleApplication3: Methods with 0 warnings 7
CodeContracts: ConsoleApplication3: Total method analysis read from the cache 8
CodeContracts: ConsoleApplication3: Total time 2,522sec. 315ms/method
CodeContracts: ConsoleApplication3: Retained 0 preconditions after filtering
CodeContracts: ConsoleApplication3: Inferred 0 object invariants
CodeContracts: ConsoleApplication3: Retained 0 object invariants after filtering
CodeContracts: ConsoleApplication3: Detected 0 code fixes
CodeContracts: ConsoleApplication3: Proof obligations with a code fix: 0
C:\{path}\Program.cs(27,13): warning : CodeContracts: invariant unproven: _foo != null
C:\{path}\Program.cs(49,13): warning :   + location related to previous warning
C:\windows\system32\ConsoleApplication3.exe(1,1): message : CodeContracts: Checked 13 assertions: 12 correct 1 unknown
CodeContracts: ConsoleApplication3: 
CodeContracts: ConsoleApplication3: Background contract analysis done. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:16:27.893

这不再是[最新版本](http://visualstudiogallery.msdn.microsoft.com/1ec7db13-3363-46c9-851f-1ce455f66970)的问题。

# java - SWING 应用程序挂起，消耗大量 CPU

> ID：14958111
> 
> 赞同：1
> 
> 时间：2013-02-19T12:58:32.110
> 
> 标签：java, multithreading, swing, awt, cpu-usage

我想请你帮忙分析一下线程转储。我有一个丰富的 SWING 应用程序，其中一位用户声称它在退出时挂起并在后台运行，消耗大量 CPU。我所拥有的只是线程转储。“AWT-EventQueue-1”线程对我来说似乎很奇怪。

你知道出了什么问题吗？

先感谢您。

```
2012-11-30 11:19:26
Full thread dump Java HotSpot(TM) Client VM (20.5-b03 mixed mode, sharing):

"Thread-1" daemon prio=6 tid=0x04aa8c00 nid=0x35ec runnable [0x07ccf000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.shutdown(Native Method)
    at sun.awt.windows.WToolkit.access$200(Unknown Source)
    at sun.awt.windows.WToolkit$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"TimerQueue" daemon prio=6 tid=0x04aa8000 nid=0x2b58 in Object.wait() [0x062ff000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x145b0020> (a javax.swing.TimerQueue)
    at javax.swing.TimerQueue.run(Unknown Source)
    - locked <0x145b0020> (a javax.swing.TimerQueue)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"CacheCleanUpThread" daemon prio=6 tid=0x04aa7000 nid=0x3184 in Object.wait() [0x05f0f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x1451f930> (a com.sun.deploy.cache.CleanupThread)
    at java.lang.Object.wait(Object.java:485)
    at com.sun.deploy.cache.CleanupThread.run(Unknown Source)
    - locked <0x1451f930> (a com.sun.deploy.cache.CleanupThread)

   Locked ownable synchronizers:
    - None

"CacheMemoryCleanUpThread" daemon prio=6 tid=0x04aa6c00 nid=0x2484 in Object.wait() [0x05e7f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x145130c8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x145130c8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at com.sun.deploy.cache.MemoryCache$LoadedResourceCleanupThread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"ConsoleWriterThread" daemon prio=6 tid=0x04aa6400 nid=0xb64 in Object.wait() [0x05def000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x1439d3d0> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:485)
    at com.sun.deploy.util.ConsoleTraceListener$ConsoleWriterThread.run(Unknown Source)
    - locked <0x1439d3d0> (a java.lang.Object)

   Locked ownable synchronizers:
    - None

"AWT-EventQueue-1" prio=6 tid=0x04aa6000 nid=0x3538 runnable [0x05d5e000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WComponentPeer.addNativeDropTarget(Native Method)
    at sun.awt.windows.WComponentPeer.addDropTarget(Unknown Source)
    - locked <0x145b53c0> (a sun.awt.windows.WFramePeer)
    at java.awt.dnd.DropTarget.addNotify(Unknown Source)
    at java.awt.Component.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at javax.swing.JComponent.addNotify(Unknown Source)
    at javax.swing.JRootPane.addNotify(Unknown Source)
    at java.awt.Container.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at java.awt.Window.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at java.awt.Frame.addNotify(Unknown Source)
    - locked <0x14214c40> (a java.awt.Component$AWTTreeLock)
    at java.awt.Window.show(Unknown Source)
    at java.awt.Component.show(Unknown Source)
    at java.awt.Component.setVisible(Unknown Source)
    at java.awt.Window.setVisible(Unknown Source)
    at com.sun.deploy.util.ConsoleWindow.showConsole(Unknown Source)
    at com.sun.javaws.util.JavawsConsoleController.showConsoleIfEnable(Unknown Source)
    at com.sun.javaws.Launcher$1.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"AWT-EventQueue-0" prio=6 tid=0x04aa5800 nid=0x365c runnable [0x05ccf000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WDesktopProperties.getWindowsParameters(Native Method)
    at sun.awt.windows.WDesktopProperties.getProperties(Unknown Source)
    - locked <0x143d9bb8> (a sun.awt.windows.WDesktopProperties)
    at sun.awt.windows.WToolkit.updateProperties(Unknown Source)
    - locked <0x14216dc8> (a sun.awt.windows.WToolkit)
    at sun.awt.windows.WToolkit.access$300(Unknown Source)
    at sun.awt.windows.WToolkit$5.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"DestroyJavaVM" prio=6 tid=0x04aa5400 nid=0x3054 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Java Web Start Main Thread" prio=6 tid=0x04aa2c00 nid=0x2d34 in Object.wait() [0x0523f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x1423ec20> (a java.lang.Thread)
    at java.lang.Thread.join(Unknown Source)
    - locked <0x1423ec20> (a java.lang.Thread)
    at java.lang.Thread.join(Unknown Source)
    at java.lang.ApplicationShutdownHooks.runHooks(Unknown Source)
    at java.lang.ApplicationShutdownHooks$1.run(Unknown Source)
    at java.lang.Shutdown.runHooks(Unknown Source)
    at java.lang.Shutdown.sequence(Unknown Source)
    at java.lang.Shutdown.exit(Unknown Source)
    - locked <0x391b9068> (a java.lang.Class for java.lang.Shutdown)
    at java.lang.Runtime.exit(Unknown Source)
    at java.lang.System.exit(Unknown Source)
    at com.sun.javaws.Main.systemExit(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"Javaws Secure Thread" daemon prio=6 tid=0x04a9e800 nid=0x344c in Object.wait() [0x051af000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x1421b1d8> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:485)
    at com.sun.javaws.ui.JavawsSysRun$SecureThread.run(Unknown Source)
    - locked <0x1421b1d8> (a java.lang.Object)

   Locked ownable synchronizers:
    - None

"AWT-Windows" daemon prio=6 tid=0x04a9e000 nid=0x4dc runnable [0x0511f000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"AWT-Shutdown" prio=6 tid=0x04a9dc00 nid=0x1fe4 in Object.wait() [0x0508f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x14210788> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:485)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    - locked <0x14210788> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"Java2D Disposer" daemon prio=10 tid=0x04a9d400 nid=0x19ec in Object.wait() [0x04eaf000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x1421aab8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x1421aab8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"traceMsgQueueThread" daemon prio=6 tid=0x021c6400 nid=0x1968 in Object.wait() [0x047ff000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x141c0490> (a java.util.ArrayList)
    at java.lang.Object.wait(Object.java:485)
    at com.sun.deploy.util.Trace$TraceMsgQueueChecker.run(Unknown Source)
    - locked <0x141c0490> (a java.util.ArrayList)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"Low Memory Detector" daemon prio=6 tid=0x0217bc00 nid=0x3144 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"C1 CompilerThread0" daemon prio=10 tid=0x02178400 nid=0x31b8 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Attach Listener" daemon prio=10 tid=0x02174000 nid=0x16ec waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Signal Dispatcher" daemon prio=10 tid=0x0216f000 nid=0x2164 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
    - None

"Finalizer" daemon prio=8 tid=0x02167400 nid=0x9f8 in Object.wait() [0x0449f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x14191148> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x14191148> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

   Locked ownable synchronizers:
    - None

"Reference Handler" daemon prio=10 tid=0x02166000 nid=0x2210 in Object.wait() [0x0440f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x14191048> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
    - locked <0x14191048> (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
    - None

"VM Thread" prio=10 tid=0x02129400 nid=0x2ec0 runnable 

"VM Periodic Task Thread" prio=10 tid=0x0218d800 nid=0x2848 waiting on condition 

JNI global references: 1323 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:10:31.057

[谷歌搜索](http://www.cubrid.org/blog/dev-platform/how-to-analyze-java-thread-dumps/)线程转储分析，以帮助您了解您手中的内容。

除此之外，您可能还想使用[VisualVM](http://visualvm.java.net/)进行进一步分析，以检查 GC 频率和堆使用情况。

如果没有更多关于您的应用在所谓的减速期间做什么的信息，恐怕这是我们可以提供的唯一提示。

# wpf - WPF DataGrid 虚拟化无法正常工作？

> ID：14958116
> 
> 赞同：5
> 
> 时间：2013-02-19T12:58:51.870
> 
> 标签：wpf, datagrid, virtualization

我有一个 DataGrid，它有一个 DataTable 作为它的 ItemsSource。DataTable 包含 24 列和约 1600 行（实际上我稍后将不得不加载更多行，但现在这已经够麻烦了）。

尽管为活动的列和行设置了虚拟化，DataGrid 需要大约 30 秒才能显示这 1600 行。在那之后，垂直滚动效果很好，水平滚动很慢，尽管你会期望它反过来。

如果我运行内存分析器，我可以验证应用程序使用的大部分内存来自 DataGridCells、Borders、ContentPresenters 和 Textblocks。对我来说，这表明网格没有正确虚拟化它的行。

谁能确认 DataGrid 的虚拟化存在问题？还是在执行此控制时存在某种臭名昭著的陷阱？

期待任何类型的输入/建议。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:37:39.703

我已经解决了这个问题。我的 DataGrid 位于 ScrollViewer 中，它会在其中无限延伸。所以它被愚弄以为一切都是可见的，这就是它不会虚拟化它的项目的原因。我删除了 ScrollViewer（无论如何，DataGrid 都有自己的滚动条），它现在可以完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:49:51.127

嗯，好吧，我不知道为什么，但显然我必须添加一些胶水文本才能在这里发布答案。也许，这个[SO 答案](https://stackoverflow.com/questions/9949358/datagrid-row-virtualization-display-issue)会对您有所帮助。

**编辑**

作为额外的建议，我想建议您考虑一下您的方法。真的有必要在 a 中添加 1.6k+ 个项目`DataGrid`吗？也许您应该考虑延迟加载。

# sql-server - 向源表添加新列后 CDC 表不工作

> ID：14958119
> 
> 赞同：7
> 
> 时间：2013-02-19T12:59:00.410
> 
> 标签：sql-server, change-data-capture

在我们的源表中添加了两个新列，而表上仍然启用了 CDC。我需要新列出现在 CDC 表中，但不知道应该遵循什么程序来执行此操作？我已经在表上禁用了 CDC，在数据库上禁用了 CDC，将新列添加到 cdc.captured_columns 表中，并启用了 CDC。但是现在我在 CDC 表中没有数据！

将列添加到源表后，是否还有其他必须更新的 CDC 表？这些是 System Tables 文件夹下的所有 CDC 表：

*   cdc.captured_columns <----- 我在其中添加了新列
*   cdc.change_tables
*   cdc.dbo_myTable_CT <----- 捕获更改数据的表
*   cdc.ddl_history
*   cdc.index_columns
*   cdc.lsn_time_mapping
*   dbo.systranschemas

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T13:09:44.030

我推荐阅读[Tracking Changes in Your Enterprise Database](http://technet.microsoft.com/en-us/magazine/2008.11.sql.aspx)。非常详细和深刻。在其他非常有用的信息中，例如：

> 启用更改数据捕获时，DDL 更改不受限制。但是，如果添加或删除列，它们可能会对收集的更改数据产生一些影响。如果删除了跟踪列，则捕获实例中的所有其他条目都将为该列具有 NULL。**如果添加了列，则捕获实例将忽略该列。**换句话说，捕获实例的形状是在创建时设置的。
> 
> 如果需要更改列，可以为**表创建另一个捕获实例（每个表最多两个捕获实例）并允许更改数据的使用者迁移到新的表模式**。

这是一个考虑架构漂移的非常明智且经过深思熟虑的设计（并非所有参与者都可以在真正的在线部署中同时更新架构）。采用多阶段方法（部署 DDL、捕获新的 CDC、升级订阅者、删除旧的 CDC 捕获）是唯一可行的方法，您应该效仿。

# c# - 检查 Object 是否为空或 null

> ID：14958124
> 
> 赞同：2
> 
> 时间：2013-02-19T12:59:08.483
> 
> 标签：c#, .net, winforms, datagridview

我有一个`DataGridView`并在索引 0 处添加了一个名为`SellQty`和 a的列。用户在选择 a 时`Checkbox`必须输入值。如果不是，我将显示一条消息以输入值。现在的问题是我从单元格中获取值并将其存储在 an 中并检查它是否为.`int``checkbox``SellQty``object``null`

```
object SellQty = gvProductBatch.Rows[i].Cells["txtSellQty"].Value;
if(SellQty!=null)
    // do something

else 
    // ..Show message. 
```

这工作正常。但问题是当用户输入一个值并删除它时，其中存储的值是`{}`空的。我想知道如何检查对象是否为空。我已经用谷歌搜索了相同的内容，但没有找到处理空对象的答案。所有结果都是针对如果对象为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:21:23.353

您可以使用`.EditedFormattedValue`

```
if (string.IsNullOrWhiteSpace(gvProductBatch.Rows[i].Cells["txtSellQty"].EditedFormattedValue.ToString())
{
  //Do something
} 
```

# objective-c - isEqualToString 总是返回 true

> ID：14958125
> 
> 赞同：2
> 
> 时间：2013-02-19T12:59:13.357
> 
> 标签：objective-c, nsstring

```
for (Annotation *ann in annotaionArray) // annotationArray contains annotations added to map
{
    NSString *fetchedtitle = ann.title;

    if([fetchedtitle isEqualToString:oldTitle]); // oldTitle = textfield.text
    {
        ann.title = appDelegate.pinTitle;
        break;
    }
} 
```

但比较总是正确的。请问可能是什么错误？

从 sqlite 获取的 const char 被强制转换为`stringWithUTF8String`.

一切都已完成以完美地转换为字符串，但仍然为什么比较错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:01:28.463

去掉后面的分号！

```
if ([fetchedtitle isEqualToString:oldTitle])
{
    ann.title = appDelegate.pinTitle;
    break;
} 
```

**使用**分号，您的代码与以下内容相同：

```
if ([fetchedtitle isEqualToString:oldTitle])
    ;
{
    ann.title = appDelegate.pinTitle;
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:03:28.897

由于您的 IF 语句末尾有一个分号，因此您的代码是：

```
if( [fetchedtitle isEqualToString:oldTitle])
            {
            // Do nothing
            }

// this will always run
  ann.title = appDelegate.pinTitle;
                break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:13:18.640

只需从代码的以下部分中删除分号（;）...

```
if([fetchedtitle isEqualToString:oldTitle]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:05:01.920

替换以下行

```
if([fetchedtitle isEqualToString:oldTitle]); 
```

和

```
if([fetchedtitle isEqualToString:oldTitle]) 
```

# mod-rewrite - 无法使用 .htaccess 正确重定向

> ID：14958126
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:14.620
> 
> 标签：mod-rewrite, apache2, rewrite

我正在尝试在我们的旧站点上重定向以下路径：

```
/apps
/apps/about
/apps/everything_else
/site 
```

使用以下 RewriteRule 到不同的子域：

```
RewriteRule ^site/?$ http://site.newsite.com [R=301,NC,L] 
```

但什么也没发生，这条规则有什么问题吗？另外，如何将应用程序添加到同一规则中？

将以下工作：

```
RewriteRule ^site/?|apps(/.)?$ http://site.newsite.com [R=301,NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:20:01.177

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ^/(apps|site).*   [NC]
RewriteRule .*   http://site.newsite.com/ [R=301,L] 
```

静默地图：

`http://site.oldsite.com/apps`或者

`http://site.oldsite.com/apps/anything`或者

`http://site.oldsite.com/site`或者

`http://site.oldsite.com/site/anything`

至：

`http://site.newsite.com/`

没有任何内容传递给替换 URL，因为 OP 没有在问题中提及该要求。

字符串`apps`和`site`假定是固定的。

对于静默映射，替换`[R=301,L]`为`[L]`

# sql - Oracle 中的小时格式

> ID：14958129
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:21.533
> 
> 标签：sql, oracle, oracle-apex, type-conversion

我正在尝试在 oracle 应用程序生成器中创建一个表单，其中包含一个名为 START_TIME 和 END_TIME 的列。

现在，当我尝试查看表单时，我只能将其视为 DATES，而无法输入任何 HOURS 或 MINUTES。

我的表构造如下：

```
CREATE TABLE  "MACHINE_SCHEDULE" 
   (    "SCHEDULE_NUMBER" VARCHAR2(100 CHAR), 
    "MACHINE_NO" VARCHAR2(10 CHAR), 
    "MACHINE_USE_DATE" DATE, 
    "START_TIME" DATE, 
    "END_TIME" DATE, 
    "PROCESS" VARCHAR2(164 CHAR), 
    "BATCH_NO" VARCHAR2(10 CHAR), 
    "MATERIAL_BAR_NO" NUMBER(8,0), 
    "TECHNICIAN_STAFF_NO" VARCHAR2(15 CHAR), 
     CONSTRAINT "MACHINE_SCHEDULE_PK" PRIMARY KEY ("SCHEDULE_NUMBER") ENABLE
   )
/
ALTER TABLE  "MACHINE_SCHEDULE" ADD CONSTRAINT "MACHINE_SCHEDULE_CON" FOREIGN KEY ("TECHNICIAN_STAFF_NO")
      REFERENCES  "MODULE_TECHNICIAN" ("TECHNICIAN_STAFF_NO") ENABLE
/
ALTER TABLE  "MACHINE_SCHEDULE" ADD CONSTRAINT "MACHINE_SCHEDULE_FK" FOREIGN KEY ("BATCH_NO")
      REFERENCES  "BATCH" ("BATCH_NO") ENABLE
/
ALTER TABLE  "MACHINE_SCHEDULE" ADD CONSTRAINT "MACHINE_SCHEDULE_FK2" FOREIGN KEY ("MATERIAL_BAR_NO")
      REFERENCES  "MATERIAL_BAR" ("MATERIAL_BAR_NO") ENABLE
/

CREATE OR REPLACE TRIGGER  "BI_MACHINE_SCHEDULE" 
  before insert on "MACHINE_SCHEDULE"               
  for each row  
begin   
  if :NEW."SCHEDULE_INSTANT_NUMBER" is null then 
    select "MACHINE_SCHEDULE_SEQ".nextval into :NEW."SCHEDULE_INSTANT_NUMBER" from dual; 
  end if; 
end; 

/
ALTER TRIGGER  "BI_MACHINE_SCHEDULE" DISABLE
/ 
```

我无法修改 DATE

我的表格使用以下来源：

```
select 
"SCHEDULE_NUMBER",
"SCHEDULE_NUMBER" SCHEDULE_NUMBER_DISPLAY,
"MACHINE_NO",
"MACHINE_USE_DATE",
"START_TIME" as b,
TO_CHAR(b, 'HH24:MI:SS'),
"END_TIME",
"PROCESS",
"BATCH_NO",
"MATERIAL_BAR_NO",
"TECHNICIAN_STAFF_NO"
from "#OWNER#"."MACHINE_SCHEDULE" 
```

但是它给出了错误：

> “无法在 Builder 中解析查询。如果您认为查询在语法上是正确的，请选中区域源下方的“通用列”复选框以继续而不进行解析。ORA-00904：“B”：无效标识符”

如果我将“b”变量更改为 START_TIME，则会出现错误：

> 查询列 #5 (TO_CHAR("START_TIME",'HH24:MI:SS')) 无效，使用列别名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:07:30.697

当我们在 select 语句中使用表达式时，Oracle 使用该表达式来派生一个标识符，因为投影中的每一列都必须有一个唯一的名称。检查 SQL*Plus 中的列标题以查看此操作。

然而，一些客户不喜欢这些派生标识符，并且想要符合 Oracle 命名约定的漂亮名称。Forms Builder 似乎就是这样一种工具。

所以那个错误信息，

```
query column #5 (TO_CHAR("START_TIME",'HH24:MI:SS')) is invalid, use column alias 
```

告诉你给*表达式*一个别名，即

```
"START_TIME" ,
TO_CHAR("START_TIME", 'HH24:MI:SS') as b, 
```

只是我建议你使用更有意义的东西，比如 START_TIME_FMT。

* * *

> 我无法在新列中输入任何详细信息。它显示为“NULL”

我认为这种行为是因为它是一个派生字段。因此，您需要做的是将其从查询中删除并改用非表项。当您从数据库中检索记录并使用触发器在插入或更新后将其值复制到（隐藏的）START_TIME 列时，使用 Formatted START_TIME 填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:11:01.247

此外：

```
-- This will never work --
SELECT SYSDATE as b, to_char(b, 'HH24:MI:SS') tme
 FROM dual
/

Output: ORA-00904: "B": invalid identifier

-- This will work --
SELECT to_char(b, 'HH24:MI:SS') tme
  FROM
 (
  SELECT SYSDATE as b
    FROM dual
 )
/

Output: 10:09:02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:05:17.640

TO_CHAR 中字段的双引号引起了您的问题。事实上，你不需要它们中的任何一个。APEX 中的查询构建器对双引号有点生气！

试试这个：

```
select 
SCHEDULE_NUMBER,
SCHEDULE_NUMBER SCHEDULE_NUMBER_DISPLAY,
MACHINE_NO,
MACHINE_USE_DATE,
START_TIME as b,
TO_CHAR(START_TIME,'HH24:MI:SS'),
END_TIME,
PROCESS,
BATCH_NO,
MATERIAL_BAR_NO,
TECHNICIAN_STAFF_NO
from #OWNER#.MACHINE_SCHEDULE 
```

# ms-office - 如何从 docx 文件中提取方程式？

> ID：14958133
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:25.223
> 
> 标签：ms-office

我想编写一个程序来从 .docx 文件中检索方程（公式）。我正在使用 open xml sdk，但看不到如何在 .docx 文件中插入方程式。一张图片（代表方程式）是我能在那里找到的唯一东西。如何从 .docx 文件中提取方程式？那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-20T05:11:23.780

之前的答案没有回应这个问题！

如果您检查 xml 文档树并打开文件 document.xml，您将看到类似以下内容：

```
<m:oMath><m:r><w:rPr><w:rFonts w:ascii="Cambria Math" w:hAnsi="Cambria Math"/></w:rPr><m:t>x= y</m:t> 
```

（在上面的例子中，等式是“x=y”。标签表示一个等式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:26:28.017

You might be able to select the text in each equation editor object an copy it out to another document or something by following the VBA section in this link:

[http://www.extendoffice.com/documents/word/751-word-select-equation.html](http://www.extendoffice.com/documents/word/751-word-select-equation.html)

That's what I'd try anyway!

# windows - 应用程序窗格在 Domino Designer 中启动时不断崩溃

> ID：14958137
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:36.313
> 
> 标签：windows, lotus-domino

有谁知道我如何重置它？没有重新安装就是。

我已经删除了有问题的数据库。

cache.ndk、desktop8.ndk、bookmarks.nsf

多米诺设计师 9 Windows 8

谢谢！

/J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:01:22.627

我启用了源代码控制。一旦我删除了磁盘结构，我就可以很好地打开应用程序窗格。

# mp3 - 录制和播放 MP3 音频

> ID：14958141
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:52.303
> 
> 标签：mp3, record, playback, naudio

我遵循了有关如何录制和播放 MP3 的不同主题，但在尝试播放我录制的 MP3 文件时，我仍然总是遇到此异常：

```
mp3filereader does not support sample rate changes 
```

所以这是我要记录的代码：

```
waveInStream = new WaveIn();
waveInStream.WaveFormat = new WaveFormat(8000, 16, 1);
writer = new WaveFileWriter(outputfileName, waveInStream.WaveFormat);
waveInStream.DataAvailable += new EventHandler<WaveInEventArgs>(waveInStream_DataAvailable);
waveInStream.StartRecording(); 
```

waveInStream_DataAvailable 是：

```
void waveInStream_DataAvailable(object sender, WaveInEventArgs e)
{
    writer.Write(e.Buffer, 0, e.BytesRecorded);
} 
```

此时录制的文件应该是PCM未压缩的吧？
在播放之前是否需要将其转码为 MP3？

我的播放代码：

```
WaveChannel32 inputStream;

WaveStream mp3Reader = new Mp3FileReader(fileName);         var pStream = NAudio.Wave.WaveFormatConversionStream.CreatePcmStream(mp3Reader);
inputStream = new WaveChannel32(mp3Reader);

volumeStream = inputStream;
return volumeStream; 
```

每次调用时都会发生异常，`Mp3FileReader`并说如下：

```
Got a frame at sample rate 44100, in a MP3 sample rate 32000
Mp3FileReader does not support sample rate change 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:12:08.950

是的，您保存的是 WAV 文件，而不是 MP3 文件。使用 LAME.exe 之类的东西转换为 MP3，或者只使用 WaveFileReader 而不是 Mp3FileReader。MP3 在任何情况下都不真正支持像 8kHz 这样的低采样率，这通常只用于电话。

# http - 使用 mod_rewrite 将 http 切换为 https

> ID：14958142
> 
> 赞同：0
> 
> 时间：2013-02-19T12:59:52.317
> 
> 标签：http, mod-rewrite, https

我知道有很多类似的问题，但是我花了2天多的时间调查它没有成功，所以你是我最后的希望）

我写了以下重写规则：

```
RewriteCond %{HTTPS} off [NC]
RewriteCond %{REQUEST_URI} ^((/member/settings)?/orders/?)$ [NC]
RewriteRule (.*) https://%{HTTP_HOST}/$1 [L,R=301]

RewriteRule \.(gif|jpe?g|png|css|js|eot|woff|ttf|svg)$ - [NC,L]

RewriteCond %{HTTPS} on [NC]
RewriteCond %{REQUEST_URI} !^((/member/settings)?/orders/?)$ [NC]
RewriteRule (.*) http://%{HTTP_HOST}/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [NC,QSA,L] 
```

我想要 URL`example.com/orders/`并`example.com/member/settings/orders/`始终重定向到 HTTPS，而所有其他人都强制使用 HTTP。此外，所有查询都应转发到`index.php`. 而且，显然，所有媒体文件都应与请求的协议保持一致。

当我`http://example.com/orders/`第一次请求时，它重定向到`https://example.com/orders/`，但第二次重定向到`http://example.com/index.php?/orders/`. 实际上是预期的，但问题是“index.php”出现在浏览器的地址栏中。

问题是如何摆脱浏览器地址栏中的“index.php”？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:03:26.407

> 然后第二次重定向到[http://example.com/index.php?/orders/](http://example.com/index.php?/orders/) .... 我不知道“index.php”从哪里出现在 URL ...

因为您有一个 RewriteRule 可以做到这一点：

```
RewriteRule ^(.*)$ index.php?/$1 [NC,QSA,L] 
```

不确定您要在该块中完成什么，但请尝试摆脱它。

# entity-framework - 在 EF Power Tools Beta 3 中更改生成的文件名

> ID：14958143
> 
> 赞同：2
> 
> 时间：2013-02-19T12:59:55.973
> 
> 标签：entity-framework

我已经搜索过，但无法找到这个问题的答案。目前我们的 Db 用户表的前缀 - 例如 tblUsers。我更新了 EF 模板以从生成的类名中删除“tbl”。但是我仍然无法弄清楚如何更改输出文件名以匹配。

有可能还是我要月亮？我在 VS 2012 中使用 EF Power Tools Beta 3。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:57:42.460

Patrick，您需要修改 EF Power Tools 使用的 T4 模板。当您想使用所有映射创建代码优先时`Reverse Engineer Code First`，请选择`Customize Reverse Engineer Template`. 你应该得到三个文件：

1.  上下文.tt
2.  实体.tt
3.  映射.tt

例如，在 Mapping.tt 中有一行从 TableSet 中读取 MetadataProperties，并提取表名称。该行如下所示：

```
var tableSet = efHost.TableSet;
var tableName = (string)tableSet.MetadataProperties["Table"].Value ?? tableSet.Name; 
```

这是您需要进行更改并执行以下操作的地方：

```
var newTableName = tableName.Replace("tbl", String.Empty); 
```

当然，您应该选择不同的策略并使用`Substring`方法或正则表达式来读取和删除前三个字符。之后，您必须浏览*tt*文件并使用您想要使用的逻辑`tableName`以及用户`newTableName`变量的位置。您将保留 tableName 与数据库中的表完成映射的位置，以及您希望将该名称用于 POCO 类和文件名的 newTableName 。

对其他两个文件重复该过程。有关更多信息，请查看 Rowan Miller 的博客[文章](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)。这应该给你一个很好的想法如何继续。

# c# - 如何将 GridView 中的数据保存到 SQL Server 2005？如何在 Gridview 中编辑和删除行？

> ID：14958150
> 
> 赞同：0
> 
> 时间：2013-02-19T13:00:06.500
> 
> 标签：c#, asp.net, sql-server, sql-server-2005, gridview

我有一个 GridView，其中包含单击按钮时从两个 TextBox 中提取的数据。我希望在 Gridview 中实现以下功能： 1) 我希望能够编辑此 GridView 中的数据。2）我也应该能够从 GridView 中删除行。3) 最后，当我单击另一个提交按钮时，Gridview 中的所有行都应保存在数据库中。

它是一个使用 C# (Visual Studio 2010) 编码的基于 Web 的 ASP.NET 应用程序，并使用 SQL Server 2005。如何更改以下代码以实现上述指定功能？

```
public partial class _Default : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["constring"]);
    SqlCommand cmd = new SqlCommand();
    DataSet ds = new DataSet();
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();

    protected void Page_Load(object sender, EventArgs e)
    {      
        if (IsPostBack)
        {
            dt = Session["data_table"] as DataTable;
        }
    }

    protected void btnTextDisplay_Click(object sender, EventArgs e)
    {      
        if (dt == null)
        {
            dt = new DataTable();
            DataColumn dc1 = new DataColumn("Name");
            DataColumn dc2 = new DataColumn("City");
            dt.Columns.Add(dc1);
            dt.Columns.Add(dc2);

            Session["data_table"] = dt;
        }

        DataRow dr = dt.NewRow();
        dr[0] = txtName.Text;
        dr[1] = txtCity.Text;
        dt.Rows.Add(dr);
        gvDisplay.DataSource = dt;
        gvDisplay.DataBind();
    }

    protected void btnDisplay_Click(object sender, EventArgs e)
    {
        ds.Clear();
        da = new SqlDataAdapter("insert into PRACT values(@name, @city)", con);
        con.Open();
        da.Fill(ds);
        gv.DataSource = ds;
        gv.DataBind();
        con.Close();        
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:39:35.327

好吧，在您的 aspx 页面上，我建议您这样做：

```
<asp:GridView runat="server" id="gvDisplay" OnRowCommand="grid_OnRowCommand">
  <Columns>
  <TemplateField>
    <ItemTemplate>
      <asp:TextBox runat="server" id="txtNameGrid" Text='<%#DataBinder.Eval(Container.DataItem, "Name")%>'/>
    </ItemTemplate>
  </TemplateField>
  <TemplateField>
    <ItemTemplate>
      <asp:TextBox runat="server" id="txtCityGrid" Text='<%#DataBinder.Eval(Container.DataItem, "City")%>'/>
    </ItemTemplate>
  </TemplateField>
  <TemplateField>
    <ItemTemplate>
      <asp:Button runat="server" id="btnDeleteGrid" Text = "Delete" CommandArgument='<%#Eval(Container.DataItem, "YourIDColumn")%>' CommandName="DeleteRow"/>
    </ItemTemplate>
  </TemplateField>
</Columns>
</asp:GridView> 
```

我建议您在 DataTable 中创建一个新列，该列将是每个寄存器的 ID。

好吧，您在页面上将寄存器添加到此 DataTable，因此您需要创建一个 int 类型的会话，并且每次调用事件 btnTextDisplay_Click 时，您必须增加此 int Session 并将其值设置为 DataTable 的列 ID。

网格的属性 OnRowCommand 是当您单击按钮 btnDeleteGrid 时将调用的事件。此事件的代码如下：

```
protected void grid_OnRowCommand(object sender, GridViewCommandEventArgs e)
{
   if(e.CommandName == "DeleteRow")
   {
      foreach(DataRow row in dt.Rows)
      {
         if(Convert.ToInt32(row["YourColumnID"]) == Convert.ToInt32(e.CommandArgument))
            row.Delete();
      }

      dt.AcceptChanges();

      gvDisplay.DataSource = dt;
      gvDisplay.DataBind();
   }
} 
```

您将保存寄存器的事件应该是这样的。

```
protected void btnSave_Click(object sender, EventArgs e)
{
   foreach(DataRow row in dt.Rows)
   {
     SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["constring"]);
     SqlCommand cmd = new SqlCommand();

     cmd.CommandText = "INSERT INTO YOUR_TABLE_NAME (NAME, CITY) VALUES (" + row["Name"].ToString() + "," + row["City"].ToString() + ")";

     int numRegs = cmd.ExecuteNonQuery();
   }
} 
```

我真的希望我能帮上忙。我无法测试我的代码，而且我不太擅长使用 DataTables，所以如果我的代码有任何问题，请告诉我。

我认为如果您使用 Bulk Inserts 来实现插入，效率会更高。搜索如何制作它，它非常酷和快速。

并且还尝试使用存储过程，因为它比使用直接命令文本更安全。使用它们将防止 SQL 注入。

此致。

# hyperlink - 文档类型不允许此处的元素“链接”

> ID：14958155
> 
> 赞同：0
> 
> 时间：2013-02-19T13:00:11.760
> 
> 标签：hyperlink

首先，我在 Sortsite 中验证我的代码时遇到错误，因为“文档类型不允许元素“样式”在这里。” 所以我删除了样式部分并保存在一个新的 CSS 表中。之后在验证时，我得到“文档类型不允许元素“链接”在这里。” 错误。这是代码：

```
<%@taglib prefix="s" uri="/struts-tags" %>
<%@taglib prefix="d" uri="/dror-tags" %>

<link href="<s:url value='/styles/menu.css' includeParams="none"/>" 
              rel="stylesheet" type="text/css" media="all"/> 
<!-- Action URLs -->
<s:url id="dppUrl" namespace="/xyz" action="abc" includeParams="none"/>
<s:url id="dppUrl" namespace="/xyz" action="abc" includeParams="none"/>

<d:button value="Menu" submenuId="mainSubmenu" cssStyle="float: left;"/>
<div dojoType="dror:PopupMenu2" widgetId="mainSubmenu" submenuOverlap="0">
    <div dojoType="dror:MenuItem2" 
         caption="xyz" 
         onclick="try { window.location = '${xyzUrl}'; } catch (e) { };">
    </div>
</div> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:07:51.790

该`<link>`标签在 HTML 文档中的唯一有效位置是`<head>`和`</head>`标签之间。您收到该错误是因为您的代码中并非如此。

从[HTML 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-link-element)：

> 如果使用了 rel 属性，则该元素被限制为 head 元素。

# vb.net - [VB.NET]一段时间后中止代码/任务

> ID：14958156
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:00:14.610
> 
> 标签：vb.net, multithreading

我可以为任务或代码设置时间限制吗？例如，如果我想显示消息框 10 秒然后停止或更改消息正文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:25:04.000

您可以在需要时启动[线程](http://msdn.microsoft.com/es-es/library/system.threading.thread.aspx%5d)并中止它：

```
Dim t1 As New Threading.Thread(AddressOf MyMethod)
t1.Start()
Timer1.Start()

Private Sub MyMethod()
    ' Do what you want
End Sub

Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
    Timer1.Enabled = False
    t1.Abort() 
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:28:30.413

是的，检查计时器。定时器分为三种：

*   [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)
*   [System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)
*   [System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

哪一个最适合您将完全取决于您的具体情况。鉴于您提供的信息有限，我怀疑最简单的方法是创建您自己的类似消息框的表单并`System.Windows.Forms.Timer`在表单上放置一个组件（您可以在表单设计器的工具箱中找到它） . 让表单在自己的`Shown`事件中启动计时器。`ShowDialog`然后使用该方法显示表单。

# r - 使用 R 指示条形图中的统计显着差异

> ID：14958159
> 
> 赞同：18
> 
> 时间：2013-02-19T13:00:18.180
> 
> 标签：r, ggplot2, bar-chart

这是最初在此处提出的问题的重复：[Indicating the statistics significant difference in bar graph](https://stackoverflow.com/questions/11517986/indicating-the-statistically-significant-difference-in-bar-graph) but ask for R instead of python.

我的问题很简单。我想在 R 中生成条形图，如果可能的话，使用 ggplot2，并指示不同条形之间的显着差异，例如生成这样的东西。我进行了搜索，但找不到另一个问完全相同的问题。

![条形图显示误差线和信号。 条形之间的差异标记](../Images/0136066ff358c513321a089236c5b0e2.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-04-05T12:39:09.460

我知道这是一个老问题，Didzis Elferts 的回答已经为这个问题提供了一个解决方案。但我最近创建了一个 ggplot-extension，它简化了添加重要性条的整个过程：[ggsignif](https://github.com/Artjom-Metro/ggsignif)

无需繁琐地将`geom_path`and添加`annotate`到您的绘图中，您只需添加一个图层`geom_signif`：

```
library(ggplot2)
library(ggsignif)

ggplot(iris, aes(x=Species, y=Sepal.Length)) + 
  geom_boxplot() +
  geom_signif(comparisons = list(c("versicolor", "virginica")), 
              map_signif_level=TRUE) 
```

[![带显着性条的箱线图](../Images/fb801f8ed0d7491642d9c7a80d6d0586.png)](https://i.stack.imgur.com/ztl3U.png)

[CRAN](https://cran.r-project.org/web/packages/ggsignif/index.html)提供了该软件包的完整文档。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-19T13:18:52.683

您可以使用`geom_path()`and`annotate()`来获得类似的结果。对于此示例，您必须自己确定合适的位置。`geom_path()`提供了四个数字来获得连接线的那些小刻度。

```
df<-data.frame(group=c("A","B","C","D"),numb=c(12,24,36,48))
g<-ggplot(df,aes(group,numb))+geom_bar(stat="identity")
g+geom_path(x=c(1,1,2,2),y=c(25,26,26,25))+
  geom_path(x=c(2,2,3,3),y=c(37,38,38,37))+
  geom_path(x=c(3,3,4,4),y=c(49,50,50,49))+
  annotate("text",x=1.5,y=27,label="p=0.012")+
  annotate("text",x=2.5,y=39,label="p<0.0001")+
  annotate("text",x=3.5,y=51,label="p<0.0001") 
```

![在此处输入图像描述](../Images/10addc914700390d1184b48611082c8d.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-17T20:48:17.607

我使用了上面建议的方法，但我发现 annotate 函数比 geom_path 函数更容易制作线条。只需使用“段”而不是“文本”。您必须按段分解并为每个线段定义起始和结束 x 和 y 值。

制作 3 条线段的示例：

```
annotate("segment", x=c(1,1,2),xend=c(1,2,2), y= c(125,130,130), yend=c(130,130,125)) 
```

# java - java.sql.sqlRecoverableException：关闭语句：下一个

> ID：14958165
> 
> 赞同：9
> 
> 时间：2013-02-19T13:00:39.633
> 
> 标签：java, jdbc, sqlexception

我的代码抛出

```
java.sql.sqlRecoverableException: Sentencia cerrada: next 
```

在英语中，我想应该是：

```
java.sql.sqlRecoverableException: Closed statement: next 
```

这是我的代码：

```
public TransactionArray() throws SQLException {

  /* Obtenemos la tabla de transacciones. */
  Connection connection;
  connection = ConnectionManager.getConnection(STATISTIC_DATA_BASE);
  Statement stmt = null;
  String query =
          "select * " +
          "from " + "dCellStatistic" + ".F_Transaction";
  ResultSet rs = null;
  try {
     stmt = connection.createStatement();
     rs = stmt.executeQuery(query);
  } catch (SQLException e ) {
     e.printStackTrace();
  } finally {
     if (stmt != null) { stmt.close(); }
  }

  /* Construimos las transacciones a partir de los registros. */
  List<Transaction> transactionList = new ArrayList<Transaction>();
  while (rs.next()) { //THE PROBLEM ARISES IN THIS LINE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
     transactionList.add(new Transaction(rs));
  }
  array = transactionList.toArray(new Transaction[transactionList.size()]); 
```

}

我可能做错了什么的任何线索？我在 Code Ranch 上看到过两个关于类似问题的帖子，但似乎没有一个可以为我的案例提供解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-19T13:02:53.253

您将在从结果集中检索信息之前关闭语句。在循环之后移动`stmt.close()`调用`rs.next()`（但保留 try/finally）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T13:23:14.603

由于固定代码不适合评论，因此我将其发布在这里以供将来参考。

```
public TransactionArray() throws SQLException {
  List<Transaction> transactionList = new ArrayList<Transaction>();

  /* Obtenemos la tabla de transacciones. */
  Connection connection;
  connection = ConnectionManager.getConnection(STATISTIC_DATA_BASE);
  Statement stmt = null;
  String query =
          "select * " +
          "from " + "dCellStatistic" + ".F_Transaction";

  /* Construimos las transacciones a partir de los registros. */
  ResultSet rs;
  try {
     stmt = connection.createStatement();
     rs = stmt.executeQuery(query);
     while (rs.next()) {
        transactionList.add(new Transaction(rs));
     }
  } catch (SQLException e ) {
     e.printStackTrace();
  } finally {
     if (stmt != null) {
        stmt.close();
     }
  }
  array = transactionList.toArray(new Transaction[transactionList.size()]);
} 
```

# python - python中的OpenCV。获取网络摄像头流有效，但打印错误消息

> ID：14958167
> 
> 赞同：2
> 
> 时间：2013-02-19T13:00:53.080
> 
> 标签：python, opencv, webcam

我正在写一些我需要网络摄像头流并对其进行面部检测的东西。一切正常，但我在终端上打印了一条错误消息，尽管我使用 `cv.CaptureFromCAM(-1)`它检测到任何连接到我的机器的相机。我也尝试使用`cv2`而不是`cv`，我得到了同样的错误：

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument 
```

请注意，我当前运行的唯一代码是`cv.CaptureFromCAM(-1)`.Oh，我使用的是 python 2.7。

```
 import cv
 cv.CaptureFromCAM(-1) 
```

有人可以告诉我如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T07:15:38.897

我遇到了同样的错误信息。但在我的情况下，它们并不是致命的，只是表明 python 正在使用 v4l2 来探测碰巧对我的相机/操作系统组合无效的参数。

就我而言

```
>>> cap = cv2.VideoCapture(0)
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
... 
```

但

```
ret, frame = cap.read() 
```

为帧提供 ret=true 和一个 numpy 图像数组。

就我而言，摄像机是 Logitech, Inc. 高清网络摄像头 C910。我在 beagleboneblack 上运行 Angstrom。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T13:47:04.297

尝试：

```
 import cv
    cv.NamedWindow("Capture", 1)
    cap_1 = cv.CaptureFromCAM(-1)
    While True:
     Frame = cv.QueryFrame(cap_1)
     cv.ShowImage("Capture", Frame)
     cv.WaitKey(1) 
```

另外，使用 cv2 和 VideoCapture：

```
from cv2 import *
cam = VideoCapture(0)   
s, img = cam.read() 
```

编辑：我在谷歌上搜索此错误时发现了以下信息：消息：'VIDIOC_QUERYMENU：无效参数'来自 opencv cap_libv4l.cpp 文件。枚举菜单项时，“querymenu.id”值仍然设置了“V4L2_CTRL_FLAG_NEXT_CTRL”。以下补丁解决了这个问题：

```
— OpenCV-2.3.1/modules/highgui/src/cap_libv4l.cpp   2011-09-12 20:41:29.000000000 +0200
+++ opencv/modules/highgui/src/cap_libv4l.cpp   2011-12-01 19:00:37.503761631 +0100
@@ -489,7 +489,7 @@
{
// printf (” Menu items:\n”);
CLEAR (capture->querymenu);
- capture->querymenu.id = capture->queryctrl.id;
+ capture->querymenu.id = capture->queryctrl.id & ~V4L2_CTRL_FLAG_NEXT_CTRL;
for (capture->querymenu.index = capture->queryctrl.minimum;
(int)capture->querymenu.index queryctrl.maximum;
capture->querymenu.index++) 
```

# git - 变更合并的gerrit hook

> ID：14958169
> 
> 赞同：2
> 
> 时间：2013-02-19T13:01:02.097
> 
> 标签：git, gerrit

我正在尝试替代**接收后**挂钩，但可能是我做错了。这个钩子是否适用于通过 gerrit（我有权进行推送提交）向主分支（没有 /for/ 控制）推送提交？官方文档没有解释“合并”请求是什么样的。

我把change-merged脚本放到gerrit/hook/dir（gerrit是有“bin”、“plugins”等gerrit地方的目录），是不是也这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T02:15:56.030

`hooks`gerrit 站点文件夹中的文件夹（也包含、`bin`、`plugins`等`git`）是放置挂钩文件的正确位置。

但是，`post-receive`是 git 钩子，而不是 Gerrit 钩子，Gerrit 不会调用它。

当从 UI 合并更改时， Gerrit 将调用`change-merged`和`ref-updated`挂钩，但`ref-updated`前提是绕过审查直接推送更改。

有关详细信息，请参阅[Gerrit 挂钩文档](http://gerrit-documentation.googlecode.com/svn/Documentation/2.6/config-hooks.html)。

# linq-to-sql - 使用 LINQ 获取层次结构数据

> ID：14958171
> 
> 赞同：1
> 
> 时间：2013-02-19T13:01:02.087
> 
> 标签：linq-to-sql

```
ID  Name    Designation PID
1   E1  D1            0
2   E2  D2            0
3   E3  D3            1
4   E4  D3            1
5   E5  D4            3
6   E6  D4            3
7   E7  D4            2
8   E8  D4            2 
```

我们如何使用 LINQ 基于父员工获取所有子员工？

例如，如果我们想要员工 E1 的子记录，我们应该得到 E3,E4,E5,E6

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:35:53.570

您不能使用一个 LINQ 查询来做到这一点。但是您可以使用递归函数来做到这一点，例如：

```
IList<Employee> GetAllChildren(IList<Employee> employees, int pid)
{
    var children = employees.Where (e => e.PID == pid).ToList();
    children.AddRange (children.SelectMany (e => GetAllChildren (employees, e.ID)).ToList());

    return children;
} 
```

# javascript - HTML5 音频 API - “音频资源不可用于 AudioContext 构造”

> ID：14958175
> 
> 赞同：2
> 
> 时间：2013-02-19T13:01:10.197
> 
> 标签：javascript, html, html5-audio, webkitaudiocontext

我正在尝试使用 webkitAudioContext 为 HTML5 音频创建图形均衡器类型的可视化 - Chrome 仅在这一点上。

当我尝试更改音频源（即播放不同的歌曲）时，我发现异常和不可预测的行为。我在某处读到我应该等到触发音频上的“canplay”事件后再将其连接到上下文/分析器：

```
var context, sourceNode, analyser, javascriptNode, audio;

var ctx = $("#songcanvas").get()[0].getContext("2d");    

function loadSong(url) { 
    if (audio!=undefined) { audio.pause(); }
    audio = new Audio();
    audio.src = url;
    audio.addEventListener("canplay", function(e) {
         setupAudioNodes();
    }, false);
}

function setupAudioNodes() {
        context = new webkitAudioContext();
        javascriptNode = context.createJavaScriptNode(2048, 1, 1);
        javascriptNode.connect(context.destination);

        analyser = context.createAnalyser();
        analyser.smoothingTimeConstant = 0.3;
        analyser.fftSize = 512;

        sourceNode = context.createMediaElementSource(audio);
        sourceNode.connect(analyser);
        analyser.connect(javascriptNode);

        sourceNode.connect(context.destination);

        javascriptNode.onaudioprocess = function() {
            var array =  new Uint8Array(analyser.frequencyBinCount);
            analyser.getByteFrequencyData(array);
            ctx.clearRect(0, 0, 1000, 325);
            ctx.fillStyle="rgba(32, 45, 21,1)";
            drawSpectrum(array);
        }
        audio.play();
}

function drawSpectrum(array) {
    for ( var i = 0; i < (array.length); i++ ){
        var value = array[i];
        ctx.fillRect(i*5,325-value,3,325);
    }
}; 
```

前三四次我更改了源，它可以工作，然后最终以“Uncaught SyntaxError：AudioContext construction 的音频资源不可用”而失败

完整的演示在这里[http://jsfiddle.net/eAgQN/](http://jsfiddle.net/eAgQN/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T16:42:09.170

`JavaScriptNode`如果您只是要绘制频谱，我建议您不要创建一个。而是尝试使用该`requestAnimationFrame`方法，因为它可以节省 CPU 周期并使您更接近恒定的 60fps（如果您的窗口/选项卡在后台，则特别有用，因为包裹在 a 中的任何函数`requestAnimationFrame`都会等到窗口再次成为焦点，然后再触发）。

您可能收到该错误的原因是因为 A）您只能为`AudioContext`每个窗口创建一个，B）您应该在`MediaElementSource`使用完它时断开连接，以及 C）您也应该删除实际`Audio`元素。

这是我上面概述的更改的演示：http: [//jsbin.com/acolet/1/](http://jsbin.com/acolet/1/)

```
window.AudioContext = window.AudioContext || window.webkitAudioContext;
var context = new AudioContext(),
    audioAnimation, sourceNode, analyser, audio,
    songs  = document.getElementById('songs'),
    canvas = document.getElementById('songcanvas'),
    WIDTH  = canvas.width,
    HEIGHT = canvas.height,
    // get the context from the canvas to draw on
    ctx = canvas.getContext('2d'),
    gradient = ctx.createLinearGradient(0, 0, 0, HEIGHT),
    bar = { width: 2, gap: 2, ratio: HEIGHT / 256 };

gradient.addColorStop(1.00,'#000000');
gradient.addColorStop(0.75,'#ff0000');
gradient.addColorStop(0.25,'#ffff00');
gradient.addColorStop(0.00,'#ffff00');
ctx.fillStyle = gradient;

songs.addEventListener('click', loadSong, false);

function loadSong(e) {
  e.preventDefault();
  var url = e.target.href;
  if (!url) return false;
  if (audio) audio.remove();
  if (sourceNode) sourceNode.disconnect();
  cancelAnimationFrame(audioAnimation);
  audio = new Audio();
  audio.src = url;
  audio.addEventListener('canplay', setupAudioNodes, false);
}

function setupAudioNodes() {
  analyser = (analyser || context.createAnalyser());
  analyser.smoothingTimeConstant = 0.8;
  analyser.fftSize = 512;

  sourceNode = context.createMediaElementSource(audio);
  sourceNode.connect(analyser);
  sourceNode.connect(context.destination);

  audio.play();
  drawSpectrum();
}

function drawSpectrum() {
  var freq = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(freq);
  ctx.clearRect(0, 0, WIDTH, HEIGHT);
  audioAnimation = requestAnimationFrame(drawSpectrum);
  for ( var i = freq.length - 1; i >= 0 ; i-- ){
    var x = i * (bar.width + bar.gap);
    var y = HEIGHT - (freq[i] * bar.ratio);
    ctx.fillRect(x, y, bar.width, HEIGHT);
  }
}
```

```
body { font-family: sans-serif; background-color: #000; }
a { color: #fff; text-decoration: none; }
ul { padding: 20px 0; width: 100px; }
ul, canvas { float: left; }
```

```
<ul id="songs">
  <li><a class="song" href="http://upload.wikimedia.org/wikipedia/en/4/45/ACDC_-_Back_In_Black-sample.ogg">ACDC</a></li>
  <li><a class="song" href="http://upload.wikimedia.org/wikipedia/en/9/9f/Sample_of_%22Another_Day_in_Paradise%22.ogg">Phil Collins</a></li>
  <li><a class="song" href="http://upload.wikimedia.org/wikipedia/en/1/1f/%22Layla%22%2C_Derek_and_the_Dominos_song_%28sample%29.ogg">Clapton</a></li>
</ul>
<canvas id="songcanvas" width="400" height="128"></canvas>
```

# jquery - jQuery - 在 $.ajax 调用中的特定行之后插入新行

> ID：14958182
> 
> 赞同：0
> 
> 时间：2013-02-19T13:01:35.027
> 
> 标签：jquery, html-table, insert, row

我需要在 $.ajax 调用 PHP 数据库查询的成功函数中插入几行数据。

到目前为止，这是我想出的（它不起作用，并且在 $.each() 行的控制台“意外字符串”中出现语法错误）：

```
// This is the checkbox element in the row that was clicked on
//$('#tblMovieList tbody tr').find('td input.chkDeleteMovie[value="' + movieID + '"]').parent()

console.log('row html: ' + $('#tblMovieList tbody tr').find('td input.chkDeleteMovie[value="' + movieID + '"]').parent().parent().next().html());

//actorID, actorFirstName, actorLastName

$('#tblMovieList tbody tr').find('td input.chkDeleteMovie[value="' + movieID + '"]').parent().parent().after('<tr id="actorsForMovie' + movieID + '">' +
    '<td colspan="2"></td>' +
    '<td colspan="8">' +
        '<table id="tblActorsForMovie">' +

            $.each(data,function(index,element) {

            '<tr>' +
                '<td>' +
                    'actorID: ' + element['actorID'] + ', name: ' + element['actorFirstName'] + ' ' + element['actorLastName'] +
                '</td>' +
            '</tr>' +
            });
        '</table>' +
    '</td>' +
'</tr>';
); 
```

我需要做的是在具有设置为特定电影 ID 的值的复选框的行*之后插入包含来自 php 脚本的 json 数据的行。*

console.log 行正确定位了我需要将新行附加到的行**之后的行。**（这有意义吗？）

因此，具有 after() 函数的选择器是正确的。我只是不确定在遍历 json 数据时如何准确地插入新行。

我需要怎么做？

**附加信息** 要插入的行的最终结构应如下所示：

```
</tr><!-- closing tag of existing row that the new row is being appended to -->
<tr id="actorsForMovie">
    <td colspan="10"> <!-- There are 10 columns in the "parent" table -->
        <table>
            <tr>
                <td>
                    [actor data]
                </td>
            </tr>
            <tr>
                <td>
                    [actor data]
                </td>
            </tr>
            ... etc for additional rows/actors
        </table>
    </td>
</tr>
<tr> <!-- Opening tag of the existing row that **was** immediately after the row being appended to --> 
```

我为任何人创建[了一个 jsFiddle](http://jsfiddle.net/eventide/CDaEN/)来帮助我解决这个问题。无论我尝试了什么，插入的表 1) 永远不会被包裹在 and 标签中以使其与“父”表一起使用，2) 插入的表*总是*只放在第一个单元格的区域中桌子的其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:31:10.637

[chead23](https://stackoverflow.com/questions/14958182/jquery-insert-new-row-after-a-specific-row-in-ajax-call/14958510#14958510)让我走上了正确的道路，因此在等待对此的其他回复时，我继续寻找解决方案。

这是最终的工作代码：

```
 var actorRow = '',
    actorsTableRow = '',
    $row = $('#tblMovieList tbody tr').find('td input.chkDeleteMovie[value="' + movieID + '"]').parent().parent();

    // Add each actor as its own table row
    $.each(data, function(index,element) {
        actorRow += '<tr>' +
            '<td>' +
                element['actorFirstName'] + ' ' + element['actorLastName'] +
            '</td>' +
        '</tr>';
    });

    // Build the parent table's row around the actor rows
    actorsTableRow += '<tr id="actorsForMovie">' +
        '<td colspan="11">' +
            '<table>' +
                actorRow +
            '</table>' +
        '</td>' +
    '</tr>';

    // Add the new row to the table immediately after the movie row that was clicked on
    $row.after(actorsTableRow); 
```

从代码中的注释可以看出，我只是将所有内容放入字符串变量中，然后将其添加到父表中。Chead 尝试使用`$.append()`并且`$.wrap()`似乎有不必要的复杂事情。也许这些在技术上使用起来更快，但由于我没有得到任何额外的帮助，这就是我想出的（它有效 - 这就是我所需要的！：P）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:17:56.077

您收到错误的原因是因为您试图将字符串与 function 连接起来`$.each()`。

如果我理解正确，我认为您想要执行以下操作：

```
var row = $('#tblMovieList tbody tr').find('td input.chkDeleteMovie[value="' + movieID + '"]').parent().parent();

 var afterItem = $('<table id="tblActorsForMovie"></table>');

 $.each(data, function (index, element)
 {
     afterItem.append('<tr><td>' + 'actorID: ' + element['actorID'] + ', name: ' + element['actorFirstName'] + ' ' + element['actorLastName'] + '</td></tr>');
 });

 row.after(afterItem.wrap('<td colspan="2"></td><td colspan="8">')); 
```

# javascript - 带有空格正则表达式的字母数字

> ID：14958185
> 
> 赞同：1
> 
> 时间：2013-02-19T13:01:54.657
> 
> 标签：javascript, regex

就在你认为你已经掌握了正则表达式的时候；这一切都没有完成。如果找到除字母数字和空白字符以外的任何内容，希望返回错误检查。

```
function checkName(fname)
{ 
  var rexp = new RegExp(/[^a-zA-Z0-9]\s/gim)
  if (!rexp.test(fname))
    {
      alert ("'" + fname + "'\nis okay")
    }
    else
    {
       alert ("'" + fname + "'\nis NOT okay")
    }
  return !rexp.test(fname)
} 
```

我希望上面的代码会返回以下

*   “这没关系” - 真的
*   “这，不行” -false
*   “这也不行！” -错误的
*   “这也不行” - 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:37:11.767

尽管大部分讨论都是正确的，但一切似乎都忽略了您正在反转字符类然后反转函数中的结果这一点。这在逻辑上很难阅读。您还无缘无故地对正则表达式进行了两次测试。更清洁将是这样的：

```
function checkName(fname) { 
    var result = /^[a-z0-9\s]+$/i.test(fname)

    if (result) {
        alert ("'" + fname + "'\nis okay")
    } else {
        alert ("'" + fname + "'\nis NOT okay")
    }
    return result;
} 
```

**更新**：看起来杰克的编辑也捕捉到了这些观点。（总是迟到一分钟，缺一分钱……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:03:27.327

一些东西：

1.  `/something/``new RegExp('something')`是;的简写 你不应该把它们混在一起。

2.  您需要移动`\s`角色类的内部；否则你匹配一个不是字母数字的字符，后跟一个空格。

3.  我认为您不需要所有这些修饰符：

    1.  `/m`仅当您的表达式中有锚点时才有用，
    2.  `/i`如果您从角色类中移除`A-Z`或移除，则可以使用，`a-z`
    3.  `/g`仅当您需要匹配多次时才有用，但在您的情况下，第一次匹配就足够了。

        ```
        var rexp = /[^a-zA-Z0-9\s]/; 
        ```

整个函数可以这样写：

```
function checkName(fname)
{
    return !/[^a-zA-Z0-9\s]/.test(fname);
} 
```

与其使用双重否定，不如说“只允许这些字符”：

```
function checkName(fname)
{
    return /^[a-zA-Z0-9\s]*$/.test(fname);
} 
```

如果您还需要测试非空名称，则应使用`/^[a-zA-Z0-9\s]+$/`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:04:01.163

```
[^a-zA-Z0-9]\s 
```

您的正则表达式要求空格位于字母/数字之后。

要修复它，请移动`\s`括号内的内容。

不过，您仍然需要再做一件事。正则表达式将仅匹配这些字符*之一*。添加一个`+`以匹配一个或多个。

因此，固定正则表达式：

```
[^a-zA-Z0-9\s]+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:08:05.590

尝试：

```
function checkName(fname)
{ 
  var rexp = new RegExp(/^[a-z0-9\s]+$/i)
  if (!rexp.test(fname))
    {
      alert ("'" + fname + "'\nis okay")
    }
    else
    {
       alert ("'" + fname + "'\nis NOT okay")
    }
  return !rexp.test(fname)
} 
```

# objective-c - 我想要 lldb 命令给出对象地址的 nsarray 对象

> ID：14958186
> 
> 赞同：0
> 
> 时间：2013-02-19T13:01:54.653
> 
> 标签：objective-c, xcode, gdb, lldb

```
NSArray *arr=[[NSArray alloc]initWithObjects:@"A",@"AA",nil]; 
```

我设置断点然后如果我触发命令 po &arr; 在 lldb 上，然后我得到 arr 变量的地址，我还想找到 @"A" 对象和 @"AA" 对象的地址 我怎样才能找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:18:30.510

像这样的东西：

```
// This will print pointer values
print arr[0]
print arr
print &arr
// This will print object values
po arr
po arr[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:14:15.093

如果您使用的是 4.6 或更高版本，您可以尝试“帧变量 arr[0]”。它不适用于早期版本，因为它基于为 NSArray 提供的合成子代，仅 >= 4.6

# iphone - 用于实时交通数据的 iOS api（如 geoloqi 和 Waze）

> ID：14958189
> 
> 赞同：5
> 
> 时间：2013-02-19T13:01:59.013
> 
> 标签：iphone, ios, api, sdk, gps

我一直在访问一些服务 api 网站，但找不到我要找的东西。我的问题更多地针对使用哪些资源，而不是应该如何完成。

我的 iphone 应用程序要求是能够跟踪附近的用户，正在通勤并在地图上找到他们。额外的要求可能是给他们发短信，打电话给他们，与他们进行视频会议等。在高层次上，这将转换为类似的东西

*   根据经纬度获取用户详细信息
*   了解他们是否是所订阅服务的注册用户
*   向用户/用户发送消息
*   使用 iphone phone api 或专用应用会话呼叫用户
*   视频电话

[位智](http://www.waze.com)就是其中之一。虽然它是开源的，但关于如何将其用作实时交通数据的后端的文档却很少。

然后是这个[Geoloqi](https://developers.geoloqi.com/api)，它是付费的，但有 iOS SDK 以及丰富的 api。但是，当我查看上面列出的要求时，我找不到对我有用的部分。我相信肯定有很多应用程序已经在依赖这种有用的服务。如果其中任何一个是开源/教程，这对我来说将是 geoloqi 可行性的最有用的资源。Geoloqi 还向用户收取使用他们的 API 的费用，所以对我来说了解哪些功能以什么价格提供也很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:25:52.233

对于您感兴趣的数据/信息级别和功能，您应该制作自己的应用程序，我认为您不需要那些 API。

您可以找到使用您的应用程序的人的坐标并将其发送到您的服务器。然后你需要确定它们之间的距离，看看它们是否在说话的区域，或者你上面列出的任何其他功能。

要确定两个人之间的距离，这个答案应该会有所帮助：[Calculate distance between 2 GPS coordinates](https://stackoverflow.com/questions/365826/calculate-distance-between-2-gps-coordinates)

# javascript - mediaelement.js - 防止向前搜索/允许向后搜索

> ID：14958190
> 
> 赞同：1
> 
> 时间：2013-02-19T13:01:58.837
> 
> 标签：javascript, mediaelement.js

您能否给我一个想法或样本，我可以防止向前搜索到搜索栏但允许向后搜索？

这是我发现的，但它一直在循环：

```
media.addEventListener('seeked', function(e) {           
    // player.setCurrentTime(0);
    // player.play();
}, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T14:03:49.637

我最近有同样的要求。

但并不想修改源文件。

这是另一种不修改源代码的方法：

```
 var _player = $("#my_video_1")[0].player; //<-- get the reference to the player

  old = _player.media.setCurrentTime; //<-- store the native setCurrentTime temporarily

  _player.media.setCurrentTime = function(time) { //<-- override it with our own method
      if(time <= this.currentTime){
          old.apply(this,[time]); //<-- call the stored method if our conditions are met
      }
  }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:32:42.420

我所做的是：在 mediaelement 库的未压缩版本中找到一行： **media.setCurrentTime(newTime);**

在上一行上方添加： **if ( newTime <= media.currentTime )**

最终你有：

```
if ( newTime <= media.currentTime )
media.setCurrentTime(newTime); 
```

这意味着如果要搜索的时间小于或等于玩家的当前时间，则允许搜索。

# linux - 如何从 Linux 内核映像中获取 .config？

> ID：14958192
> 
> 赞同：29
> 
> 时间：2013-02-19T13:02:12.927
> 
> 标签：linux, linux-kernel, kbuild

我有一个 elf 格式的 Linux 内核映像，我想找出`.config`用于构建此内核的文件。当我对图像进行**objdump**时，我看到一个名为的部分`kernel_config_data`，其中包含文本但看起来不像配置文件。有没有办法检索这些信息？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-19T13:06:10.157

假设您的内核是使用[IKCONFIG](http://www.linuxtopia.org/online_books/linux_kernel/kernel_configuration/re139.html)选项构建的，您可以使用该`scripts/extract-ikconfig`工具提取原始`.config`​​文件。

或者，您可以启动该内核并在`/proc/config.gz`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-07T11:21:26.307

`zcat` `/proc/config.gz`例如，您可以：

```
zcat /proc/config.gz | grep 'CONFIG_PRINTK_TIME' 
```

要将其转储到`.config`内核构建过程中使用的文件中：

```
zcat /proc/config.gz > .config 
```

# scala - Akka vs Gridgain 适合的问题是什么？什么时候比另一个更合适？

> ID：14958195
> 
> 赞同：0
> 
> 时间：2013-02-19T13:02:18.913
> 
> 标签：scala, akka, gridgain

我试图了解 Akka 和 Gridgain 之间的区别。请解释什么时候一个比另一个更适合，什么问题？

[http://akka.io/](http://akka.io/)

[http://www.gridgain.com/](http://www.gridgain.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:15:43.600

`Akka``Actor Framework`在 Scala/Java 中实现。

使用 Akka 的主要用例是当您需要**大规模**并发应用程序时。

想想需要路由消息的电信应用程序。事实上，Akka 的灵感来自爱立信的 Erlang。

以下是来自 Akka 网站的更多用例：http: [//doc.akka.io/docs/akka/current/intro/use-cases.html](http://doc.akka.io/docs/akka/current/intro/use-cases.html)

`GridGain`似乎是一个在内部使用 Map Reduce 概念的数据处理框架。

在这里思考大数据。要处理异常庞大的数据集，您需要更好的处理框架。

免责声明：我没有使用过 GridGain。

# android - 是否可以在 android 中使用 Actionbar sherlock 在操作菜单项中实现切换按钮

> ID：14958197
> 
> 赞同：20
> 
> 时间：2013-02-19T13:02:20.663
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个应用程序，它在操作菜单项中有切换按钮，虽然我使用的是 Actionbar Sherlock，但我不知道如何将切换按钮放在操作菜单项中。我不想将其作为自定义布局放置在操作栏中，但我想将其放置为菜单项。如果有人找到解决方案，请帮助我。

目的，如果我更改切换按钮的状态，它将根据 ALphabets 和出生日期再次对人进行排序。

提前致谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-19T13:10:51.867

只需像普通菜单按钮一样添加它，使用布尔变量检查其状态，更改排序模式时可以更改图标和标题

```
boolean birthSort=false;
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_toggle:

        if(birthSort){
            //change your view and sort it by Alphabet
            item.setIcon(icon1)
            item.setTitle(title1)
            birthSort=false;
        }else{
            //change your view and sort it by Date of Birth
            item.setIcon(icon2)
            item.setTitle(title2)
            birthSort=true;
        }
        return true;

    }
    return super.onOptionsItemSelected(item);

} 
```

不要忘记像任何其他菜单按钮一样将其添加到 xml 中，并配置`android:showAsAction`是否要在溢出或外部显示它。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@+id/menu_toogle"
    android:showAsAction="ifRoom"
    android:title="Share"
     />
</menu> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-05T19:06:26.173

其他方法是为您的 ActionBar 使用自定义布局：

基本上你定义一个包含你的切换的**布局：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
  <ToggleButton
    android:id="@+id/actionbar_service_toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textOn="Logging On"
    android:textOff="Logging Off" />
</RelativeLayout> 
```

**备选方案 1：** 然后在您的**Activity**或**Fragment**容器中执行以下操作：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setCustomView(R.layout.actionbar_top);
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_HOME | ActionBar.DISPLAY_SHOW_CUSTOM);
...
ToggleButton button = (ToggleButton) findViewById(R.id.actionbar_service_toggle); 
```

请注意，您拥有一个真正的 ToggleButton，并且您在代码中将其作为一个真实对象 ToggleButton 进行处理，与您重新实现自己的切换（主题、可靠性、视图层次结构、本机支持......）相比，它具有很多优势.

源代码[在这里](https://gitorious.org/networklog/networklog/commit/fde9603)。

* * *

**备选方案 2：** 另一种方法是将您的自定义视图嵌入到常规菜单视图中：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/myswitch"
        android:title=""
        android:showAsAction="always"
        android:actionLayout="@layout/actionbar_service_toggle" />   
</menu> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T18:53:08.387

如果像我一样，actionLayout 不适合您，请尝试`app:actionLayout="@layout/actionbar_service_toggle"`代替`android:actionLayout="@layout/actionbar_service_toggle"`以及`app:showAsAction="always"`代替。`android:showAsAction="always"` 这是因为如果您使用 appCompat，则不会使用 android 命名空间。

所以这是最终版本：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
  <ToggleButton
    android:id="@+id/actionbar_service_toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textOn="Logging On"
    android:textOff="Logging Off" />
</RelativeLayout> 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/myswitch"
        android:title=""
        app:showAsAction="always"
        app:actionLayout="@layout/actionbar_service_toggle" />   
</menu> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-19T05:59:07.177

在菜单中创建 xml 文件：

菜单.xml

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:tools="http://schemas.android.com/tools" tools:context="si.ziga.switchinsideab.MainActivity">
<item android:id="@+id/switchId" android:title="" android:showasaction="always" android:actionlayout="@layout/switch_layout">
   <item android:id="@+id/action_settings" android:orderincategory="100" android:title="@string/action_settings" app:showasaction="never">
</item></item></menu> 
```

然后导航到您的布局文件夹创建一个新的 xml 文件并将其命名为 switch_layout.xml 这是代码：switch_layout.xml

```
<!--?xml version="1.0" encoding="utf-8"?-->
<relativelayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="match_parent" android:orientation="horizontal">
 <switch android:id="@+id/switchAB" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_centerhorizontal="true" android:layout_centervertical="true">
</switch></relativelayout> 
```

在您的 MainActivity 类中复制并粘贴以下代码：
MainActivity.java

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.menu, menu);

switchAB = (Switch)menu.findItem(R.id.switchId)
.getActionView().findViewById(R.id.switchAB);7 
```

或者按照这个[链接](http://programondaspot.blogspot.com/2015/08/add-and-implement-toggle-button-in.html)了解这些东西

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T13:28:47.710

这里的东西很简单

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item
    android:title="@string/mode"
    android:id="@+id/switch1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:switchMinWidth="56dp"
    android:layout_marginTop="120dp"
    app:showAsAction="ifRoom"
    app:actionViewClass="androidx.appcompat.widget.SwitchCompat"
    android:checked="false"/> 
```

# c# - Windows 服务 C#：访问邮件。找不到自动发现服务

> ID：14958201
> 
> 赞同：0
> 
> 时间：2013-02-19T13:02:38.817
> 
> 标签：c#, email, exchange-server, exchangewebservices

我尝试了以下两种方法，但都返回结果“找不到自动发现服务”。

[http://msdn.microsoft.com/en-us/library/gg591267(v=EXCHG.140).aspx](http://msdn.microsoft.com/en-us/library/gg591267(v=EXCHG.140).aspx)

```
service.Credentials = new NetworkCredential(userData.EmailAddress, userData.Password);

  if (userData.AutodiscoverUrl == null)
  {
    service.AutodiscoverUrl(userData.EmailAddress, RedirectionUrlValidationCallback);
    userData.AutodiscoverUrl = service.Url;
  }
  else
  {
    service.Url = userData.AutodiscoverUrl;
  }

  return service;
} 
```

[http://code.msdn.microsoft.com/Exchange-2013-Set-pull-14c8360b#content](http://code.msdn.microsoft.com/Exchange-2013-Set-pull-14c8360b#content)

```
static ExchangeService GetBinding()
        {
            // Create the binding.
            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);

        // Define credentials.
        service.Credentials = new WebCredentials("myemail@work.com", "password");

        // Use the AutodiscoverUrl method to locate the service endpoint.
        try
        {
            service.AutodiscoverUrl("myemail@work.com", RedirectionUrlValidationCallback);
        }
        catch (AutodiscoverRemoteException ex)
        {
            Console.WriteLine("Exception thrown: " + ex.Error.Message);
        }

        // Display the service URL.
        Console.WriteLine("AutodiscoverURL: " + service.Url);
        return service;
    } 
```

在一种情况下，我输入了我的电子邮件和密码，在另一种情况下，我输入了硬编码。两者都在尝试 Autodiscoverurl 时挂起，并最终失败并显示消息“无法找到自动发现服务”。我按照教程添加了引用，自动发现出现在 Microsoft.Exchange.WebServices.dll 下......我还缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T14:12:29.067

我不知道你是否已经解决了，我在寻找相同（或类似？）问题的解决方案时碰到了你的帖子。

奇怪的是：由于它在调试模式下完美运行，但没有安装为 Windows 服务，我更改了 Windows 服务属性中的“登录”设置（services.msc，右键单击已安装的服务，属性，登录选项卡) 并将其设置为“本地系统帐户”并选中“允许服务与桌面交互”选项。

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:16:31.110

尝试添加：

```
service.UseDefaultCredentials = false; 
```

设置凭据后

# php - 如何从 PHP 中的类中获取数组？

> ID：14958208
> 
> 赞同：0
> 
> 时间：2013-02-19T13:03:14.240
> 
> 标签：php, mysql

我是新手，请原谅我缺乏经验的知识。我有一堂PHP课。它使一些数据库工作。但我无法将结果作为数组。

```
public function __construct($sunucu, $kullaniciAdi, $kullaniciSifre, $veritabaniAdi){
$this->_baglanti= mysql_connect($sunucu, $kullaniciAdi,$kullaniciSifre);
mysql_select_db($veritabaniAdi,$this->_baglanti);
}

public function baglantiyiKopar(){
mysql_close($this->_baglanti);
}

public function sorgula($sorgu){
$this->_donenSonuclar = mysql_query($sorgu, $this->_baglanti);
$this->_satirSayisi = mysql_num_rows($this->_donenSonuclar) ;
}

public function satirSayisi(){
return $this->_satirSayisi;
}

public function satirlar(){
$satirlar = array();
for($st=0;$st< $this->_satirSayisi;$st++){
$satirlar = mysql_fetch_assoc($this->_donenSonuclar);
}
return $satirlar;
}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:05:35.703

假设你的意思是这个函数，你需要稍微改变一下：

```
public function satirlar(){
  $satirlar = array();
  for($st=0;$st< $this->_satirSayisi;$st++){
    $satirlar[] = mysql_fetch_assoc($this->_donenSonuclar);
             ^^ add a new entry to the array instead of overwriting the existing one
  }
  return $satirlar;
} 
```

另请注意，这些`mysql_*`函数已弃用，建议使用准备好的语句和绑定变量切换到 PDO（或 mysqli）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:09:06.720

```
public function satirlar(){
  $satirlar = array();
  for($st=0;$st< $this->_satirSayisi;$st++){
    $satirlar[$st] = mysql_fetch_assoc($this->_donenSonuclar);
  }
  return $satirlar;
} 
```

# php - 我无法在 Wordpress 侧边栏中移动小部件

> ID：14958210
> 
> 赞同：0
> 
> 时间：2013-02-19T13:03:20.113
> 
> 标签：php, jquery, wordpress, widget

我正在使用的 wordpress 主题存在问题，我无法将小部件添加到侧边栏。拖放功能不起作用。

我可以在其他主题中移动小部件。

我想知道主题中的哪种代码可能会导致这样的问题？

我试图通过添加一个谷歌插件来解决这个问题，但它似乎没有帮助。

是否有任何插件允许我在没有默认所需的拖放功能的情况下编辑小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:42:06.570

这是没有正确加入 jQuery 的主题的常见问题。切换到第二十二个主题，看看小部件是否有效；如果是这样，那就是你的主题。（也可能是插件问题。）

您需要将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或者使用[Chrome](https://developers.google.com/chrome-developer-tools/docs/overview)、[Safari](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/2SafariDeveloperTools/SafariDeveloperTools.html)或[IE](http://msdn.microsoft.com/en-us/library/ie/gg589507(v=vs.85).aspx)中的开发人员工具来查看您的网站上加载了哪些 javascript 以及任何错误。

如果您无法调试 javascript，请询问主题开发人员。您看到的错误`undefined' is not an object`太模糊，无法在没有更多信息的情况下弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T06:52:02.643

我有一个类似的问题 - 发现通过停用 feedburner 插件它得到了解决。那里可能存在某种冲突 - 看看禁用任何插件是否有帮助？

# asp.net-mvc - 重置 IIS 中的静态变量

> ID：14958214
> 
> 赞同：2
> 
> 时间：2013-02-19T13:03:27.807
> 
> 标签：asp.net-mvc, iis-7, static-variables

我在 ASP.NET MVC 应用程序的应用程序启动事件中为静态变量赋值。

```
protected void Application_Start()
{
   public static list<string> versionInfo = VersionAccess.LoadVersionInfo();
} 
```

在这个静态变量“versionInfo”中分配了从数据库中获取的一些值的列表。在整个 mvc 应用程序中使用了这个静态变量。

当我在 IIS 中托管此应用程序时，这工作正常。后来我在数据库中添加了更多值。所以静态变量值必须用一些新的额外值来重置。然后我重新启动了 IIS，新值将受到影响。但一段时间后，这将回到以前的状态，静态变量值更改为数据库更新前的旧值。

IIS 重新启动会在一段时间内有效，稍后有时我看不到新值。我第一次托管应用程序时缓存的静态变量值仍然存在。

我尝试从服务器中删除临时 asp.net mvc 文件，还回收了应用程序池，并通过命令提示符重新启动了 IIS。

在所有情况下，有时只有我能找到新的变化，然后回到以前的状态。这在 localhost 中运行良好。

谁能给我一个解决方案？

问候，卡蒂克。

# button - 前景色和背景色的 Windows 8 Metro 应用程序按钮行为

> ID：14958216
> 
> 赞同：0
> 
> 时间：2013-02-19T13:03:29.777
> 
> 标签：button, windows-8

在 Windows 8 Metro 应用程序中，我使用 xaml 添加了一个按钮，如下所示

```
<Button Foreground="#FFF51A1A" Background="#FFEAE23A" BorderBrush="White" 
Height="100" Width="100" HorizontalAlignment="Center" Content="HELLO"/> 
```

以及我尝试动态添加的相同按钮，如下所示

```
 Button shelfButton = new Button();

        shelfButton.Content = "HELLO";
        shelfButton.Foreground = FFF51A1A;
        shelfButton.Background = FFEAE23A;

        shelfButton.Height = 100;
        shelfButton.Width = 100;

        Grid.Children.Add(shelfButton); 
```

按钮在前景色和背景色方面的行为是不同的。为什么会这样？以及如何在动态添加按钮时具有与 xaml 类似的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:09:21.893

要获得等效的行为，您可以在代码中将shelfButton 的Foreground 和Background 设置为SolidColorBrush。[在http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/befe7695-9458-4abb-b867-619df52b8183](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/befe7695-9458-4abb-b867-619df52b8183)上有一个 HEX（“#FFF51A1A”）到 SolidColorBrush 转换器。

# javascript - jslint：var语句后的右括号

> ID：14958221
> 
> 赞同：0
> 
> 时间：2013-02-19T13:03:44.937
> 
> 标签：javascript, jslint

作为一个 javascript 新手，我尽可能遵循 jslint 的建议。现在这对我来说没有任何意义。

以下代码有效：

```
function func() {
    "use strict";
    var foo = function () {
        },
        bar = function () {

        };
} 
```

这也是有效的：

```
function func() {
    "use strict";
    var foo = function () {
    },
        bar = function () {

        };
} 
```

第 4 行在这些方面有所不同。这实际上是有效的还是一个错误？

**编辑 20.02：**问题不在于这是否是正确的 JavaScript。根据jslint，这两者是否正确。在这种情况下，有两种可能性，通常只有一种方法可以编写 100% jslint-valid 的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:05:35.410

唯一的区别是缩进的数量，这纯粹是编码风格的问题，对代码的解析没有影响。

# android - 如何在android应用程序中从openfire获取离线消息

> ID：14958225
> 
> 赞同：2
> 
> 时间：2013-02-19T13:03:51.617
> 
> 标签：android, xmpp, openfire

我正在尝试使用 asmack API 和 XMPP 在 android 中构建一个小型聊天应用程序。在线聊天正在工作，但我不知道如何从 openfire 服务器获取离线消息。如果您对此问题有任何解决方案，请帮助我........!!!!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:24:03.483

当您下次登录并发送您的在线状态时，离线消息会自动从服务器传递到客户端。客户端不需要额外的编码来检索它们。

# c# - 如何在使用 LINQ 语句添加指示值源的元数据时合并两个列表？

> ID：14958231
> 
> 赞同：1
> 
> 时间：2013-02-19T13:04:14.013
> 
> 标签：c#, linq, c#-4.0

给定，例如：

```
var a = new List<int>(){ 1 , 2 , 50 };
var b = new List<int>(){ 9 , 7 , 2 }; 
```

我需要将它们合并到一个排序列表中，同时添加一些指示它们的来源（`a`或`b`）的数据。例如，输出将类似于：

```
mergedList = { {1,false},{2,false},{2,true},{7,true},{9,true},{50,false} } 
```

（`true`意味着它来自`a`）。

## 编辑开始...

```
mergedList =
{ {1,IsB=false},{2,IsB=false},{2,IsB=true},{7,IsB=true},{9,IsB=true},{50,IsB=false} } 
```

## ...编辑结束

我怎样才能做到这一点`LINQ`，最好是查询语句形式（`from ... select ...`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:08:06.860

不是查询表格，但应该可以。

```
var ans = a.Select(i => new { Value = i, FromA = true })
           .Concat(b.Select(i => new { Value = i, FromA = false }))
           .OrderBy(i => i.Value); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:09:21.743

您可以使用附加属性创建匿名类型：

```
var a = new List<int>(){ 1 , 2 , 50 };
var b = new List<int>(){ 9 , 7 , 2 };
var ax = a.Select(i => new{ Num = i, FromB = false });
var bx = b.Select(i => new{ Num = i, FromB = true});

var merged = ax.Concat(bx).OrderBy(x => x.Num); 
```

请注意，这`Enumerable.Concat`不会消除重复，但由于您想添加原点，我认为这是需要的。

输出：

```
foreach(var x in merged)
    Console.WriteLine("Num: {0} From-B? {1}", x.Num, x.FromB); 
```

[**演示**](http://ideone.com/t2MzlX)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:07:36.313

```
var aItems = from aa in a
             select new {Value = aa, Indicator = true};
var bItems = from bb in b
             select new {Value = bb, Indicator = false};

var result = aItems.Concat(bItems).OrderBy(t => t.Value); 
```

纯方法语法：

```
var aItems = a.Select(aa => new {Value = aa, Indicator = true});
var bItems = b.Select(bb => new {Value = bb, Indicator = false});
var result = aItems.Concat(bItems).OrderBy(t => t.Value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:14:35.990

我认为您可以使用匿名类型执行此操作：

```
var mergedList = a.Select(x => new {val = x, tag = true})
                  .Union(b.Select(x => new {val = x, tag = false}))
                  .OrderBy(x => x.val); 
```

# xml - ref 属性中的 Orbeon 动态 xpath

> ID：14958236
> 
> 赞同：0
> 
> 时间：2013-02-19T13:04:27.977
> 
> 标签：xml, xpath, orbeon

我有以下实例：

```
<xforms:instance id="fr-form-instance">
    <form>
        <section-1>
            <control-1>
                <en>Nothing special.</en>
                <ro>Nimic special.</ro>
            </control-1>
        </section-1>
    </form>
</xforms:instance> 
```

我想添加一个输入以读取和编辑所选语言的值，如下所示：

```
...
<xhtml:td>
    <xforms:output value="instance('fr-form-instance')/section-1/control-1/*[name()=xxforms:lang()]"/>
    <xforms:input id="control-1-control" ref="instance('fr-form-instance')/section-1/control-1/*[name()=xxforms:lang()]"/>
</xhtml:td>
... 
```

问题是输出文本正确显示，如果我更改语言，文本也会更改，但输入字段不会出现。如果我将 xpath 更改为使用`[name()='ro']`而不是`[name()=xxforms:lang]`，它可以工作。我怎样才能让它动态工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:14:45.470

这似乎对我有用。我得到：

![在此处输入图像描述](../Images/25d49fee294175d7ff08efe2eb2be93f.png)

从语言选择器中选择“română”时：

![在此处输入图像描述](../Images/0d00c93e8baa7c66f4084e193d5d8ef9.png)

我已经粘贴在表格的完整来源下面，以防您想复制它。我用 Orbeon Forms 4.0 对此进行了测试。

```
<xh:html xmlns:xh="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:ev="http://www.w3.org/2001/xml-events"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
         xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
         xmlns:exf="http://www.exforms.org/exf/1-0"
         xmlns:fr="http://orbeon.org/oxf/xml/form-runner"
         xmlns:saxon="http://saxon.sf.net/"
         xmlns:sql="http://orbeon.org/oxf/xml/sql"
         xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
         xmlns:fb="http://orbeon.org/oxf/xml/form-builder">
    <xh:head>
        <xh:title/>
        <xf:model id="fr-form-model" xxf:expose-xpath-types="true">

            <!-- Main instance -->
            <xf:instance id="fr-form-instance">
                <form>
                    <section-1>
                        <control-1>
                            <en>Nothing special.</en>
                            <ro>Nimic special.</ro>
                        </control-1>
                    </section-1>
                </form>
            </xf:instance>

            <!-- Bindings -->
            <xf:bind xmlns:dataModel="java:org.orbeon.oxf.fb.DataModel" id="fr-form-binds"
                     ref="instance('fr-form-instance')">
                <xf:bind id="section-1-bind" name="section-1" ref="section-1">

                </xf:bind>
            </xf:bind>

            <!-- Metadata -->
            <xf:instance xxf:readonly="true" id="fr-form-metadata">
                <metadata>
                    <application-name>a</application-name>
                    <form-name>a</form-name>
                    <title xml:lang="en"/>
                    <description xml:lang="en"/>
                    <title xml:lang="ro"/>
                    <description xml:lang="ro"/>

                </metadata>
            </xf:instance>

            <!-- Attachments -->
            <xf:instance id="fr-form-attachments">
                <attachments>
                    <css mediatype="text/css" filename="" size=""/>
                    <pdf mediatype="application/pdf" filename="" size=""/>
                </attachments>
            </xf:instance>

            <!-- All form resources -->
            <!-- Don't make readonly by default in case a service modifies the resources -->
            <xf:instance id="fr-form-resources" xxf:readonly="false">
                <resources>
                    <resource xml:lang="en">
                        <section-1>
                            <label/>
                            <help/>
                        </section-1>

                    </resource>
                    <resource xml:lang="ro">
                        <section-1>
                            <label/>
                            <help/>
                        </section-1>

                    </resource>

                </resources>
            </xf:instance>

            <!-- Utility instances for services -->
            <xf:instance id="fr-service-request-instance" xxf:exclude-result-prefixes="#all">
                <request/>
            </xf:instance>

            <xf:instance id="fr-service-response-instance" xxf:exclude-result-prefixes="#all">
                <response/>
            </xf:instance>

        </xf:model>
    </xh:head>
    <xh:body>
        <fr:view>
            <fr:body xmlns:xbl="http://www.w3.org/ns/xbl"
                     xmlns:dataModel="java:org.orbeon.oxf.fb.DataModel"
                     xmlns:oxf="http://www.orbeon.com/oxf/processors"
                     xmlns:p="http://www.orbeon.com/oxf/pipeline">
                <fr:section id="section-1-control" bind="section-1-bind">
                    <xf:label ref="$form-resources/section-1/label"/>
                    <xf:help ref="$form-resources/section-1/help"/>
                    <fr:grid>
                        <xh:tr>
                            <xh:td>
                                <xf:output value="instance('fr-form-instance')/section-1/control-1/*[name()=xxforms:lang()]"/>
                                <xf:input id="control-1-control"
                                          ref="instance('fr-form-instance')/section-1/control-1/*[name()=xxforms:lang()]"/>
                            </xh:td>
                            <xh:td/>
                        </xh:tr>
                    </fr:grid>
                </fr:section>
            </fr:body>
        </fr:view>
    </xh:body>
</xh:html> 
```

# jquery - 如何从网站获取数据以进一步处理或仅使用 JQuery 显示它们？

> ID：14958242
> 
> 赞同：0
> 
> 时间：2013-02-19T13:04:57.257
> 
> 标签：jquery, json, parsing

这个问题主要与我如何找到获取它们的方法有关。

假设我有一个奥运会网站，显示每个国家每场比赛的奖牌。

我有一个网站链接[http://www.olympic.org/content/results-and-medalists/searchresultpercountry/?athletename=&country=ger&sport2=&games2=&event2=&mengender=true&womengender=true&mixedgender=true&goldmedal=true&silvermedal=true&bronzemedal=true&worldrecord= true&olympicrecord=false&teamclassification=true&individualclassification=true&winter=true&summer=true](http://www.olympic.org/content/results-and-medalists/searchresultpercountry/?athletename=&country=ger&sport2=&games2=&event2=&mengender=true&womengender=true&mixedgender=true&goldmedal=true&silvermedal=true&bronzemedal=true&worldrecord=true&olympicrecord=false&teamclassification=true&individualclassification=true&winter=true&summer=true)

这显示了德国在每项赛事中的奖牌。我想以数组或其他东西的形式检索数据并将它们显示在表格中。我应该做的第一件事是打开 firebug 并搜索 json 链接来解析数据。我唯一一次从网站检索数据是通过使用 twitter 或 facebook 的 json 数据来显示关注者和喜欢的。

我如何找到找回它们的方法？在我发布的链接中，如何获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:00:53.633

如果该站点不提供公共 API，则您无法使用纯 Ajax 获取其内容。但是您仍然可以通过[网络抓取](http://en.wikipedia.org/wiki/Web_scraping)来获取内容。F.ex.，您可以通过 PHP 脚本获取页面内容，从 HTML 中提取您需要的数据，将其格式化为 JSON 或 XML 并将其传递给您的 Ajax 请求。

看看[这里](http://jquery-howto.blogspot.dk/2009/04/cross-domain-ajax-querying-with-jquery.html)的一个例子和[这个](https://stackoverflow.com/questions/26947/how-to-implement-a-web-scraper-in-php)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:08:43.070

试试 $.get 你可以通过回调函数来使用来自指定 url 的数据，并根据需要打印出来。

```
$.get('http://www.yoursite.com/index.html', function(data) {
  $('content').html(data);
  alert('Load was performed.');
}); 
```

因此，如果返回的数据是 json 格式，那么您也可以轻松访问其所有元素。

干杯

# assembly - 按位运算，汇编

> ID：14958244
> 
> 赞同：0
> 
> 时间：2013-02-19T13:05:02.013
> 
> 标签：assembly, bit-manipulation, avr, atmega

我的任务是更改位位置

> 开始位7 | 位6 | 位5 | 位4 | 位3 | 位2 | 位1 | 位0
> 
> 最终位3' | 位2' | 位7 | 位6 | 位1 | 位0 | 位5' | 位4'

使用按位和移位/滚动指令。

我不知道如何以不同于移动和滚动的方式移动它们。我应该只使用一个还是多个寄存器来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:46:10.093

使用 shift 和 rol，你应该可以用两个寄存器来做，在进程中浪费了原来的。

通过进位右移 A将最左边的位*复制到进位中。*通过进位右移 B将该位*复制*到寄存器 B 并将 LSB 移到进位。

按顺序

```
1 - ROR A,A,1     // A = _7654321, --> carry = '0'
2 - ROR B,B,1     // B = 0_______, --> carry = 'x' / don't care
3 - ROR A,A,1     // A = x_765432, --> carry = '1'
4 - ROR B,B,1     // B = 10______, --> carry = 'x' / don't care
// this has copied two bits from A to B while shifting both

5 - ROR B,B,1     // B = x10_____,
6 - ROR B,B,1     // B = xx10____,

repeat steps 1-4 again for B to contain bits '3 2 _ _ 1 0 _ _' 
```

（这是解决方案的一半）

# html - windows phone: jquery mobile swipe 无法识别

> ID：14958248
> 
> 赞同：1
> 
> 时间：2013-02-19T13:05:07.020
> 
> 标签：html, windows-phone-7, jquery-mobile, swipe

我正在制作一个 HTML + jquery 移动应用程序。它在我的电脑上运行良好，但是当我在我的 Windows 手机上试用它时，滑动事件似乎没有被触发..

```
$('div.ui-page').live("swipeleft", function () {
 goToNextPage()
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:21:55.173

Windows Phone 7/IE9 不支持 mousemove 事件，因此 jquery mobile 无法识别滑动事件。

一些移动框架，如[Apache Cordova (PhoneGap)](http://phonegap.com/)，通过在原生 (silverlight) 触摸事件和 Web 浏览器控件之间添加特殊 shim 来修复丢失的鼠标事件，为此提供了解决方法。[演示](http://www.risingj.com/archives/209)

**更新**

这在 Windows Phone 8 上运行良好，因为它支持 mousemove。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T21:03:05.487

在 Lumia 920 上测试了 jquery 移动滑动示例，它运行良好。所以相信它适用于 WP8 设备。[http://jquerymobile.com/demos/1.3.0/docs/examples/swipe/swipe-page.html](http://jquerymobile.com/demos/1.3.0/docs/examples/swipe/swipe-page.html)。我实际上使用了一个带有滑动功能的滑动菜单插件，它适用于 Lumia 920。这是插件的链接：[https ://github.com/tegansnyder/JQuery-Mobile-Slide-Menu](https://github.com/tegansnyder/JQuery-Mobile-Slide-Menu)

# python - virtualenv 和 python 路径

> ID：14958249
> 
> 赞同：0
> 
> 时间：2013-02-19T13:05:07.710
> 
> 标签：python, django, virtualenv

我在 c:\users\devtool.virtualenv\devenv 中做了一个 virtualenv 在我运行 activate.bat 之后。

最后我写了一个简单的py文件来测试环境：

```
 import os,sys
 for x in sys.path:
     print x

 print os.executable 
```

结果很奇怪

```
C:\Users\devtool\.virtualenv\devenv\Scripts
C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg
C:\Python27\lib\site-packages\virtualenv-1.8.4-py2.7.egg
C:\Python27\lib\site-packages\pip-1.2.1-py2.7.egg
C:\Users\developer\.virtualenv\devenv\Lib\site-packages\django
C:\Windows\system32\python27.zip
C:\Python27\DLLs
C:\Python27\lib
C:\Python27\lib\plat-win
C:\Python27\lib\lib-tk
C:\Python27
C:\Python27\lib\site-packages

['C:\\Users\\developer\\.virtualenv\\devenv\\Lib\\site-packages\\django']

C:\Python27\python.exe 
```

实际上它只是使用基本的python安装。使用 virtualenv 有什么意义？我收到安装在 virtualenv 中的 django 错误。

我可以解决它，只需要重写 django-admin.py 以追加到我的 virtualenv 文件夹的搜索路径，但在这种情况下仍然需要 virtualenv。

另一件事我无法理解。在python搜索路径中，有一行

```
C:\Users\devtools\.virtualenv\devenv\Lib\site-packages\django 
```

当我使用 django-admin.py 我得到

```
Traceback (most recent call last):
File "C:\Users\devtools\.virtualenv\devenv\Scripts\django-admin.py", line 12, in module>
from django.core import management
ImportError: No module named django.core 
```

但 django 文件夹在路径中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:17:40.407

几天前我也遇到了同样的问题。从基本文件夹中，您必须执行以下命令。

```
C:\Users\devtools\.virtualenv\devenv> python Scripts\django-admin.py startproject myproj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:16:24.933

virtualenv 扩展/覆盖您的系统 python 环境，其路径附加到系统 python 安装的路径。你看，你的 .virtualenv 站点包列在系统站点包之前，这就是它的工作原理。

您必须记住的是`activate`修补您当前的命令行环境，因此您必须`activate`在运行 python 代码之前运行，具体取决于您的 virtualenv。

# jetty - 将 jetty ResourceHandler 映射到 URL

> ID：14958251
> 
> 赞同：9
> 
> 时间：2013-02-19T13:05:26.163
> 
> 标签：jetty, embedded-jetty

是否可以使用嵌入式 Jetty 从目录 X 提供静态文件但映射到 URL Y？我将静态文件存储在“web”目录下，但我希望 URL 类似于`http://host/myapp`.

我已经成功运行了一个配置`ResourceHandler`如下的服务器：

```
ResourceHandler ctx = new ResourceHandler();
ctx.setResourceBase("path-to-web");
HandlerList list = new HandlerList();
list.addHandler(ctx);
...
server.setHandler(list); 
```

但结果是在所需的 URL 映射下`/web`而不是在所需的 URL 映射下提供文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T16:17:24.423

ResourceHandler 没有可配置的上下文，但您可以简单地将其包装在 ContextHandler 中来实现这一点。

试试这个：

```
ContextHandler ctx = new ContextHandler("/my-files"); /* the server uri path */
ResourceHandler resHandler = new ResourceHandler();
resHandler.setResourceBase("path-to-web");
ctx.setHandler(resHandler);
server.setHandler(ctx); 
```

这将`/my-files`作为文件系统的 ResourceHandler 内容`path-to-web`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T18:51:18.733

以上不适用于 Jetty 9，但可以：

```
ContextHandler contextHandler = new ContextHandler("/my-files");
contextHandler.setResourceBase("/tmp/static");

ResourceHandler resourceHandler = new ResourceHandler();
contextHandler.setHandler(resourceHandler);

server.setHandler(contextHandler); 
```

# c# - 即时修改 SQL 结果？

> ID：14958259
> 
> 赞同：3
> 
> 时间：2013-02-19T13:05:53.433
> 
> 标签：c#, mysql, .net, sql

我有一个 SQL 查询：
`SELECT DATEDIFF(deadline,CURDATE()) FROM tasks WHERE 1`

结果是：`3`

我怎样才能将结果返回为：`3 Days`而不是`3`

我知道我可以从我的 C# 代码中手动附加字符串，例如：

```
 string result = getSqlresult();
 string result += " Days"; 
```

但我想直接`3 Days`从 MySQL 数据库中获取结果。

**原因：** 我将信息直接绑定到 datagridview，因此，为了修改结果，我需要遍历所有行并更新它们。所以为了提高性能，我需要直接从数据库中获取结果，`3 Days`而不是`3`

Anyhelp将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:06:53.633

您可以将字符串连接到using`Days`的结果中。`DATEDIFF``CONCAT`

```
SELECT CONCAT(DATEDIFF(deadline,CURDATE()), ' Days') 
FROM tasks 
WHERE 1 
```

如果您使用的是旧版本`MySQL`，请将其转换为字符串，这样您就不会得到`bolb`结果。

```
SELECT CONCAT(CAST(DATEDIFF(deadline,CURDATE()) AS CHAR(5)), ' Days') 
FROM tasks 
WHERE 1 
```

**更新 1**

```
SELECT  CASE 
            WHEN DATEDIFF(deadline,CURDATE()) >= 0
            THEN CONCAT(DATEDIFF(deadline,CURDATE()), ' Days')
            ELSE CONCAT('Expired since ', DATEDIFF(deadline,CURDATE()) * -1, ' Days')
        END
FROM    tasks 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c54304/3)

# windows-phone - 我无法访问 Pushpin.location

> ID：14958268
> 
> 赞同：0
> 
> 时间：2013-02-19T13:06:17.783
> 
> 标签：windows-phone, pushpin

我正在开发 VisualBasic Windows Phone 应用程序。我试图在内容面板的 bing 地图上添加图钉，但我似乎无法正确访问“图钉”类。这听起来肯定很菜鸟，但我最近两天才开始学习。我非常小心地在这里询问并进行了很好的研究，但我看不出我做错了什么。

我的 xaml.vb 标头看起来像这样

```
Imports System
Imports System.Threading
Imports System.Windows.Controls
Imports Microsoft.Phone.Controls
Imports Microsoft.Phone.Shell
Imports System.Collections.ObjectModel
Imports System.Windows.Controls.Primitives
Imports System.Device.Location
Imports System.Threading.Tasks
Imports Windows.Devices.Geolocation
Imports System.IO.IsolatedStorage
Imports Microsoft.Phone.Maps
Imports Microsoft.Phone.Maps.Controls
Imports Microsoft.Phone.Maps.Toolkit 
```

和枢轴项目，地图标签在这里合并

```
 <Grid Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="0*"/>      
                <RowDefinition/>
                </Grid.RowDefinitions>
                <maps:Map x:Name="myMap" Margin="0,0,10,10" Grid.RowSpan="2"/>
                <TextBlock HorizontalAlignment="Left" Margin="10,37,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Latitude:" VerticalAlignment="Top" Height="27" Width="76"/>
                <TextBlock HorizontalAlignment="Left" Margin="10,59,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Longitude:" VerticalAlignment="Top" RenderTransformOrigin="0.646,1.019" Height="27" Width="94"/>
                <TextBlock x:Name="lat_dbl" HorizontalAlignment="Left" Margin="124,37,0,0" Grid.Row="1" TextWrapping="Wrap" Text="Lat_double" VerticalAlignment="Top" Height="27" Width="97"/>
                <TextBlock x:Name="long_dbl" HorizontalAlignment="Left" Margin="124,59,0,0" Grid.Row="1" TextWrapping="Wrap" Text="long_double" VerticalAlignment="Top" Height="27" Width="110"/>
                <TextBlock x:Name="Status" HorizontalAlignment="Center" TextWrapping="Wrap" Text="Location Service Status" VerticalAlignment="Top" Margin="10,5,233,0" Grid.Row="1" Height="27" Width="203"/>
                <Slider x:Name="pitchSlider_pitch" ValueChanged="sliderChanged_pitch" HorizontalAlignment="Left" Margin="342.844,210.275,-87.156,0" VerticalAlignment="Top" Width="190.312" Height="165.45" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto" Grid.Row="1">
                    <Slider.RenderTransform>
                        <CompositeTransform Rotation="-89.579"/>
                    </Slider.RenderTransform>
                </Slider>
                <Slider x:Name="pitchSlider_zoom" ValueChanged="sliderChanged_zoom" HorizontalAlignment="Left" Margin="244.844,-37.725,0,0" VerticalAlignment="Top" Width="190.312" Height="165.45" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="False" d:LayoutRounding="Auto" Grid.Row="1">
                    <Slider.RenderTransform>
                        <CompositeTransform Rotation="0.598"/>
                    </Slider.RenderTransform>
                </Slider>

            </Grid>

        </phone:PivotItem> 
```

# shell - 如何每 5 秒运行一次 shell 脚本 2 分钟？

> ID：14958272
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:06:24.493
> 
> 标签：shell, cron, scheduled-tasks

我已经看到了很多解决我一半问题的方法——每 5 秒运行一次脚本。

除此之外，我还希望它只运行 2 分钟。

脚本的重点是在一段时间内对某个位置的RSSI进行采样：

```
#!/bin/bash

RSSI_CSV=$1
DISTANCE=$2
RSSI=$(iwconfig wlan0 | awk -F'[ =]+' '/Signal level/ {print $7}\')

printf "$DISTANCE,$RSSI\n" >> $RSSI_CSV 
```

在命令行调用它：

```
sh rssi_script.sh output.csv position 
```

解决我的问题的最强大的解决方案是什么？

我考虑过的可能性：

*   在自身内部重复脚本 40 次（测量 RSSI 40 次并将其输出到 CSV 40 次，整个实验中的位置将相同）这也将解决将运行时间限制为 2 分钟的问题。我可能会添加一些新的命令行参数，如果我每次都必须更改 40 个变体，这些参数可能很难跟踪
*   使用 watch 每 5 秒采样一次，使用 cron 将其限制为 2 分钟（不是 100% cron 可以做到这一点）
*   2 分钟的 while 循环（不知道如何做这样的 while 循环？），每个循环结束时睡眠 5 秒
*   使用 cron 将 shell 脚本作为脚本的 40 个进程启动，并将每次迭代延迟 5 秒，我不确定命令行参数将如何传递，正如我上面所说，我可能会添加一些新的命令行参数，这样可以导致问题（额外工作）

让我知道是否有任何我错过的信息或有帮助的信息，并感谢任何人提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:00:37.300

```
#!/bin/bash

[ "$3" = "0" ] && { exit; }

RSSI_CSV=$1
DISTANCE=$2
RSSI=$(iwconfig wlan0 | awk -F'[ =]+' '/Signal level/ {print $7}\')

printf "$DISTANCE,$RSSI\n" >> $RSSI_CSV

sleep 5
N=$3
$0 $1 $2 $((N-1)) 
```

像这样运行：

```
sh rssi_script.sh output.csv position 24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:05:54.617

受到 PeterMmm 输入的启发，我设法让它工作，事实上，运行 N 个样本并在它们之间进行硬编码的休息对我来说效果更好

```
#!/bin/bash

RSSI_CSV=$1
DISTANCE=$2
N=$3

while [ $N -ne 0 ]
do
    RSSI=$(iwconfig wlan0 | awk -F'[ =]+' '/Signal level/ {print $7}\')
    printf "$DISTANCE,$RSSI\n" >> $RSSI_CSV
    sleep 2 
    ((N--))
    echo $N
done
exit 
```

# android - 如何禁用android中的按钮？

> ID：14958274
> 
> 赞同：0
> 
> 时间：2013-02-19T13:06:30.410
> 
> 标签：android

我有一个登录页面，有 2 个文本字段用户名、密码和按钮“登录”按钮。当弹出未输入用户名或密码的警报时，当我突然单击此登录按钮时，会弹出 2 个警报，因为点击次数超过了。我需要禁用按钮并在下次单击时启用。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:07:45.600

为了禁用按钮，您必须调用

```
yourButton.setEnabled(false) 
```

在 Button 实例上。要重新启用它，请调用：

```
yourButton.setEnabled(true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:14:27.007

您可以将黑带的解决方案与我的结合起来。

当[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)在. `EditText`_ **_** _ **_** _`EditText`

```
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {

    charCount = Integer.valueOf(s.length());

    if (charCount > 0)  {           
        // ENABLE THE BUTTON
        boolean blnButtonStatus = YOUR_BUTTON.isEnabled();
        if (blnButtonStatus== false)    {
            YOUR_BUTTON.setEnabled(true);
        }

    } else if (charCount == 0)  {
        // DISABLE THE BUTTON
        YOUR_BUTTON.setEnabled(false);
    }
}

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // DO NOTHING HERE
}

@Override
public void afterTextChanged(Editable s) {
    // DO NOTHING HERE
} 
```

这样，如果在*密码*和/或*用户名字*段中没有输入任何内容，代码将自动禁用按钮。没有意外点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:10:52.737

创建一个方法如下

```
 boolean checkit= true;
private void showHide1() {

    if (checkit) {

    // first click
    } else {
    // second click
    }
    checkit= !checkit;
} 
```

并在您的按钮上单击添加方法 showHide1();

# git - 远程 git repo 数字海洋 ubuntu

> ID：14958275
> 
> 赞同：2
> 
> 时间：2013-02-19T13:06:31.433
> 
> 标签：git, ubuntu, ssh, digital-ocean

我最近注册了一个 Digital Ocean 帐户，但我在为我的项目设置远程仓库时遇到了麻烦。

我已经在本地设置了 SSH 密钥并成功地将它们复制到服务器，所以我可以在没有密码的情况下进行 SSH，但是我收到以下错误：

```
fatal: '/projects/website/.git' does not appear to be a git repository 
fatal: Could not read from remote repository.

Please make sure you have the correct access rights 
and the repository exists. 
(32768) 
```

这是我的远程仓库的地址（IP 地址已更改）

```
ssh://root@123.45.678.90/projects/website/.git 
```

在根文件夹中创建记录“/projects/website/”。我试过在地址前面加上“root”，但这并没有解决问题。

远程仓库定义为 git 仓库，我尝试创建默认仓库并拉取，以及 --bare 仓库和推送 - 均未奏效。

我已经问过 DO 支持团队，他们的反应很慢（可能是因为我们在 2 个不同的时区）。

我现在有点卡住了，因为我不确定问题出在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:12:55.153

你的路径是错误的：

```
ssh://root@123.45.678.90/projects/website.git 
```

GIT 存储库的名称是扩展名为**.git**的名称。在您的情况下，您应该通过 ssh 连接，并且您应该在您的网络空间中看到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T21:33:18.243

我遇到了类似的问题。事实证明，您的路径必须是**从 root 开始的完整路径**，即使 SSH 将您带入您的用户目录。

通过 SSH 登录到您的 digitalocean 帐户并运行命令 pwd。这将为您提供完整的路径，可能只是 /home/username。除非您的用户名不是 root，否则下面的行可能对您有用。:)

```
ssh://root@123.45.678.90/home/root/projects/website/.git 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:26:45.390

我相信你会想要拥有

```
ssh://root@123.45.678.90/projects/website/ 
```

这是因为您想要包含源代码的实际文件夹，而不是其中的 .git 文件夹。这也适用于裸仓库，您将只拥有一个只有 .git 的空文件夹。

# winapi - CreateProcess 不会在 Windows 7 下创建额外的控制台窗口？

> ID：14958276
> 
> 赞同：5
> 
> 时间：2013-02-19T13:06:32.027
> 
> 标签：winapi, createprocess, windows-console

我正在尝试使用 CreateProcess(...) 运行一个进程并在单独的控制台窗口中独立运行它。

我可以使用 system("...") 函数来实现这一点，但我更喜欢 CreateProcess，因为它让我可以指定环境和工作目录、获取进程的句柄以及在需要时通过管道传输标准输入/输出至。

我在互联网上找到的只是逆问题，即人们拥有额外的控制台窗口并想要摆脱它们！在早期版本的 Windows 中，打开并显示新的控制台窗口似乎是正常行为？

现在，即使我运行“cmd.exe /c ...”，我也无法获得额外的窗口

我尝试使用 STARTF_USESHOWWINDOW 标志，但没有成功。

有人遇到过这个问题吗？

PS .：显示GUI窗口，例如。notepad.exe 会正常出现。

这是我的代码（本质上）

```
PROCESS_INFORMATION processInfo;
STARTUPINFOA startupInfo;
ZeroMemory(&startupInfo,sizeof(startupInfo));
startupInfo.dwFlags |= CREATE_NEW_CONSOLE;
startupInfo.dwFlags |= DETACHED_PROCESS;
ok&=CreateProcessA( NULL,
    const_cast<char*>(comand.c_str()), // safe for CreateProcessA
    NULL, NULL, TRUE, NULL, NULL, NULL,
    &startupInfo, &processInfo); 
```

我正在尝试运行 C:/Windows/system32/cmd.exe /c help 程序运行，我可以从管道读取输出。还是没有窗户。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-16T14:52:10.797

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:33:47.050

调用[`CREATE_NEW_CONSOLE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863.aspx)时`dwCreationFlags`传入`CreateProcess`。我没有测试过，但我怀疑这会强制创建一个控制台窗口（甚至可能是非控制台进程？）你也可以使用`DETACHED_PROCESS`它，它只是从父控制台中分离出来的。

# java - Java 空指针异常（点击时）

> ID：14958277
> 
> 赞同：0
> 
> 时间：2013-02-19T13:06:37.393
> 
> 标签：java, android, onclick

我正在尝试通过在字段中输入金额，`from currency`在微调器和`to currency`另一个微调器中选择金额，从美元、英镑和欧元创建一个简单的货币转换器。然后我在文本字段中输出转换后的金额。

但由于某种原因，我无法通过该`onClick`方法，也不知道为什么。这可能很简单，但我看不到。

这是我的代码：

```
 public class Calculate extends Activity implements OnItemSelectedListener,
    OnClickListener {

Button Calculate;
String stringAmount;
double exchangeRate, E, D, Answer;
EditText Amount;
Spinner spinner, spinner1;
int ConvertFrom, ConvertTo;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculate);
    Initilise();
    // this is calling the method initilise.
    // listens for the button to be clicked
    Calculate.setOnClickListener(this);

}

private void Initilise() {
    // Method initilise.
    /* Button */Calculate = (Button) findViewById(R.id.cal);
    /* EditText */Amount = (EditText) findViewById(R.id.amount);
    spinner = (Spinner) findViewById(R.id.Currency);
    spinner1 = (Spinner) findViewById(R.id.Currency1);

}

public void format() {

    ConvertFrom = 0;
    ConvertTo = 0;

    stringAmount = Amount.getText().toString();
    E = 0; // set it to 0 as the default
    try {
        E = Integer.parseInt(stringAmount);
    } catch (NumberFormatException e) {

    }
}

@SuppressWarnings("deprecation")
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    spinner();
    switch (v.getId()) {
    case R.id.cal:

        if (ConvertFrom == 0) {

            FromEuro();
        } else if (ConvertFrom == 1) {

            FromUsd();
        } else if (ConvertFrom == 2) {

            FromGbp();
        } else {
            // Amount.setText("Invalid Input");
            AlertDialog alertDialog = new AlertDialog.Builder(this)
                    .create();
            alertDialog.setTitle("Input");
            alertDialog.setMessage("Please Input a amount");
            alertDialog.setButton("OK",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // here you can add functions

                        }
                    });
            alertDialog.setIcon(R.drawable.ic_launcher);
            alertDialog.show();

        }
    }
}

public void spinner() {

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, R.array.Currencies);

    spinner = (Spinner) findViewById(R.id.Currency);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(this);

    spinner1 = (Spinner) findViewById(R.id.Currency1);
    spinner1.setAdapter(adapter);
    spinner1.setOnItemSelectedListener(this);
}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    int posistion = spinner.getSelectedItemPosition();
    ConvertFrom = posistion;
    int posistion1 = spinner1.getSelectedItemPosition();
    ConvertTo = posistion1;
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("deprecation")
private void FromEuro() {
    // TODO Auto-generated method stub
    if (ConvertTo == 1) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else if (ConvertTo == 2) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else if (ConvertTo == 0) {
        AlertDialog alertDialog = new AlertDialog.Builder(null).create();
        alertDialog.setTitle("Input");
        alertDialog.setMessage("Please Select a gender");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // here you can add functions

            }
        });
        alertDialog.setIcon(R.drawable.ic_launcher);
        alertDialog.show();
    }
}

@SuppressWarnings("deprecation")
private void FromUsd() {
    // TODO Auto-generated method stub
    if (ConvertTo == 0) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else if (ConvertTo == 1) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else {
        if (ConvertTo == 2) {
            AlertDialog alertDialog = new AlertDialog.Builder(null)
                    .create();
            alertDialog.setTitle("Input");
            alertDialog.setMessage("Please Select a gender");
            alertDialog.setButton("OK",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // here you can add functions

                        }
                    });
            alertDialog.setIcon(R.drawable.ic_launcher);
            alertDialog.show();
        }
    }
}

private void FromGbp() {
    // TODO Auto-generated method stub
    if (ConvertTo == 2) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else if (ConvertTo == 0) {
        exchangeRate = 1.336891;
        Answer = E * exchangeRate;
        String Final = Double.toString(Answer);
        Amount.setText(Final);

    } else {
        if (ConvertTo == 1) {
            Builder alertDialog = new AlertDialog.Builder(this);
            alertDialog.setTitle("Input");
            alertDialog.setMessage("Please Select a gender");
            alertDialog.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // here you can add functions

                        }
                    });
            alertDialog.setIcon(R.drawable.ic_launcher);
            alertDialog.show();
        }
    }
}` 
```

}

但我现在收到

02-19 16:55:01.514: E/AndroidRuntime(28638): 在 android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:142)

上述错误。

* * *

以前这个问题有以下错误：

想知道是否有人可以提供帮助。我收到这些错误：

```
FATAL EXCEPTION: main
    java.lang.NullPointerException
    at com.travelcurrencyconverter.Calculate.onClick(Calculate.java:64)
    at android.view.View.performClick(View.java:4222)
    at android.view.View$PerformClick.run(View.java:17273)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4895)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:09:09.780

您正在尝试访问`null`第 64 行的引用成员（点之前的部分）。

此外，当您发布代码时，将所有代码缩进四个空格以使所有语法着色。

此外，在您这样做之前，请确保在您的 IDE 中自动格式化代码。

# silverlight-5.0 - Silverlight 应用程序屏幕分辨率问题

> ID：14958278
> 
> 赞同：1
> 
> 时间：2013-02-19T13:06:39.793
> 
> 标签：silverlight-5.0

我在 1280x1024 屏幕分辨率下开发了 Silverlight 应用程序，在这个（1280x1024）分辨率下它的外观和感觉很好。但在 1024x768 屏幕分辨率下看起来很糟糕。请在这个问题上帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:02:13.453

我猜你是在画布内创建组件，或者你简单地拖放到 xaml 页面中。如果是这种情况，那么布局将受到分辨率更改的影响。

要解决此问题，您应该将所有组件放在一个（或通常多个）堆栈面板中，并相对于堆栈面板对齐控件（左、右、高度、宽度等）。

做起来并不难，但可能需要一点时间和精力来熟悉它。但我可以向你保证，结果是值得付出努力的。

非常重要：要在 thenselfs 和边框之间间隔控件（和堆栈面板），请始终使用 Margins 属性。

Silverlight 在这方面做得很好。使用这种方法开发的应用程序可以在不同的分辨率下很好地工作。

# git - Git repo 没有 .htaccess 文件，如何创建一个不会被 git pull --rebase 删除的本地 .htaccess

> ID：14958279
> 
> 赞同：0
> 
> 时间：2013-02-19T13:06:43.567
> 
> 标签：git, .htaccess, github

标题可能对事物的解释有点奇怪，所以我将在这里更详细地介绍。

我已经通过 github 为网站设置了 git repo，因此我们所有人都可以在自己的计算机上进行编辑，然后将更改推送到网络服务器。然后我的网站上有一个拉脚本`git pull --rebase`，如果 repo 有变化，每隔几分钟就会执行一次。

现在，我不希望在 github 上有数据库的用户名和密码，所以我想在服务器上本地有一个 .htaccess 文件来保存用户名和密码，而不是在 php 文件中。因此，我在本地创建了一个 .htaccess 文件，并在 gitignore 和 gitattributes 中添加了 .htaccess，但每当我执行此操作时，都会`git pull --rebase`删除对 .htaccess 文件的更新。如果我这样做`git rm .htaccess`并且`git status`它说 .htaccess 已被删除并且我必须将文件推送到 repo，即使 repo 没有任何 .htaccess 文件。而且我也不能推送，因为 repo 的服务器版本是只读的。

有任何想法吗？

使用 .gitignore 文件更新：################# ## Eclipse ################

```
*.pydevproject
.project
.metadata
bin/
tmp/
*.tmp
*.bak
*.swp
*~.nib
local.properties
.classpath
.settings/
.loadpath

# External tool builders
.externalToolBuilders/

# Locally stored "Eclipse launch configurations"
*.launch

# CDT-specific
.cproject

# PDT-specific
.buildpath

#################
## Visual Studio
#################

## Ignore Visual Studio temporary files, build results, and
## files generated by popular Visual Studio add-ons.

# User-specific files
*.suo
*.user
*.sln.docstates

# Build results
[Dd]ebug/
[Rr]elease/
*_i.c
*_p.c
*.ilk
*.meta
*.obj
*.pch
*.pdb
*.pgc
*.pgd
*.rsp
*.sbr
*.tlb
*.tli
*.tlh
*.tmp
*.vspscc
.builds
*.dotCover

## TODO: If you have NuGet Package Restore enabled, uncomment this
#packages/

# Visual C++ cache files
ipch/
*.aps
*.ncb
*.opensdf
*.sdf

# Visual Studio profiler
*.psess
*.vsp

# ReSharper is a .NET coding add-in
_ReSharper*

# Installshield output folder
[Ee]xpress

# DocProject is a documentation generator add-in
DocProject/buildhelp/
DocProject/Help/*.HxT
DocProject/Help/*.HxC
DocProject/Help/*.hhc
DocProject/Help/*.hhk
DocProject/Help/*.hhp
DocProject/Help/Html2
DocProject/Help/html

# Click-Once directory
publish

# Others
[Bb]in
[Oo]bj
sql
TestResults
*.Cache
ClientBin
stylecop.*
~$*
*.dbmdl
Generated_Code #added for RIA/Silverlight projects

# Backup & report files from converting an old project file to a newer
# Visual Studio version. Backup files are not needed, because we have git ;-)
_UpgradeReport_Files/
Backup*/
UpgradeLog*.XML

############
## Windows
############

# Windows image file caches
Thumbs.db

# Folder config file
Desktop.ini

#############
## Python
#############

*.py[co]

# Packages
*.egg
*.egg-info
dist
build
eggs
parts
bin
var
sdist
develop-eggs
.installed.cfg

# Installer logs
pip-log.txt

# Unit test / coverage reports
.coverage
.tox

#Translations
*.mo

#Mr Developer
.mr.developer.cfg

# Mac crap
.DS_Store

#################
## Project specific
#################

# Ignore htcaccess so so pwd is not public
.htaccess

# Ignore the pull script because this is only for the server
pull.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:53:28.340

我设法从stackoverflow上的这篇文章中找到了一个解决方案（我希望）：[忽略已经提交到Git存储库的文件](https://stackoverflow.com/questions/1139762/gitignore-file-not-ignoring)

为我做的那一行是：`git update-index --assume-unchanged <file>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-17T09:24:19.720

Github 只是不支持上传 htacess 文件，但是你仍然可以在 github 中手动添加 htaccess 文件

**1\. 转到要添加 htacess 文件的存储库**

**2\. 点击`Add file`-`Create new file`**

**3\. 打开您的文件 .htaccess 并复制您的 htaccess 文件的所有内容并将其粘贴到“编辑新文件”部分。您所要做的就是输入文件名`.htaccess`，根据需要输入提交名称，然后提交**

# java - Hibernate 只执行 8 次查询

> ID：14958283
> 
> 赞同：0
> 
> 时间：2013-02-19T13:06:49.683
> 
> 标签：java, hibernate, spring-data-jpa

我认为我的 JUnit 测试会比我用文字更好地解释这一点！

```
 @Test
public void query8times(){

    for(int i=0; i<15; i++){
        ProspectoRadarQueryBuilder prqb = new ProspectoRadarQueryBuilder("jardeu");
        List<Object[]> prospectosNotas = (List<Object[]>) genericFilterDao.executeSQL(prqb.buildQuery());   
        System.out.println("------------------------------------- "+i);
    }
} 
```

控制台上的结果是：

```
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 0
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 1
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 2
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 3
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 4
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 5
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 6
Hibernate:   SELECT * FROM   (   select         p.id,           comparestrings('jardeu', pc.valor) as nota   from           com_prospecto p         inner join com_prospecto_campo pc ON (p.id = pc.id_prospecto)           inner join com_campo c ON (pc.id_campo = c.id AND c.flag_nome = true)    ) as subQuery   where          nota is not null            AND         nota > 0.35  order by           nota desc;
------------------------------------- 7 
```

现在让我们看看源代码！

```
public List<?> executeSQL(String sql) {
    EntityManager entityManager = entityManagerFactory.createEntityManager();
    entityManager.getTransaction().begin();

    Session hibernateSession = entityManager.unwrap(Session.class);
    Query q = hibernateSession.createSQLQuery(sql);

    return q.list();
} 
```

我做了另一个测试，另一个查询

```
@Test
public void anotherQuery(){

    for(int i=0; i<15; i++){
        List<Object[]> prospectosNotas = (List<Object[]>) genericFilterDao.executeSQL("select * from com_campo");   
        System.out.println("------------------------------------- "+i);
    }
} 
```

结果如下：

```
Hibernate: select * from com_campo
------------------------------------- 0
Hibernate: select * from com_campo
------------------------------------- 1
Hibernate: select * from com_campo
------------------------------------- 2
Hibernate: select * from com_campo
------------------------------------- 3
Hibernate: select * from com_campo
------------------------------------- 4
Hibernate: select * from com_campo
------------------------------------- 5
Hibernate: select * from com_campo
------------------------------------- 6
Hibernate: select * from com_campo
------------------------------------- 7 
```

所以，我正在使用 Spring Data ... 可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:10:05.937

您不应该只创建一个 EntityManager 吗？

```
EntityManager entityManager = entityManagerFactory.createEntityManager(); 
```

^ 行应该在 executeSQL 方法之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:15:50.833

是的，正如 adarshr 所说，我只创建了一个 entityManager。但这不是问题所在。我忘记提交事务并关闭实体管理器...

这是最终结果：

```
 public List<?> executeSQL(String sql) {
    EntityManager entityManager = entityManagerFactory.createEntityManager();
    entityManager.getTransaction().begin();

    Session hibernateSession = entityManager.unwrap(Session.class);
    Query q = hibernateSession.createSQLQuery(sql);

    List<?> list = q.list();

    entityManager.getTransaction().commit();
    entityManager.close();

    return list;
} 
```

# c - 解决循环依赖 - C

> ID：14958284
> 
> 赞同：3
> 
> 时间：2013-02-19T13:06:50.770
> 
> 标签：c

我检查了 SO 是否有重复项，但无法为我的问题找到确切的解决方案。

我有一个`NvCommon.h`使用 enum的头文件`NV_DATA_TYPE`。这个枚举是在另一个头文件中定义的`NvDefs.h`，我在其中使用了来自`NvCommon.h`. 由于循环依赖，我无法构建它。我知道[转发声明枚举](https://stackoverflow.com/questions/71416/forward-declaring-an-enum-in-c)是不可能的。

在这种情况下可以做些什么？这是我设计的问题吗？我是否必须引入另一个头文件来解决这个问题？

我不是 C 专家。请帮我。我的设计可能有问题，我知道可以通过引入另一个头文件来修复这种循环依赖。我想知道的是**“这是唯一的方法”**。寻找替代解决方案（如果有）。

如果有帮助，我会发布完整的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T13:18:37.537

在他们自己的文件中定义枚举可能很有用，如果你在这里这样做，你的问题就会消失。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T09:24:02.367

如果我正确理解了您的问题，您将得到如下信息：

derpfoo.h：

```
#ifndef DERPFOO_H
#define DERPFOO_H

#include "derpbar.h"

typedef struct {
        char *nothing;
} FOO;

BAR foo (BAR derp) {
        return derp;
}

#endif 
```

derpbar.h：

```
#ifndef DERPBAR_H
#define DERPBAR_H

#include "derpfoo.h"

typedef struct {
        char *nothing;
} BAR;

FOO bar (FOO derp) {
        return derp;
}

#endif 
```

然后是一个简单的derp.c：

```
#include "derpfoo.h"
#include "derpbar.h"

int main (void) {
        return 0;
} 
```

我的一个朋友不久前在一些 SDL 代码中向我提出了这个问题，我花了一段时间才理解他为什么要这样做以及如何合理地解决它。

像这样分离代码的目的是 derpfoo 和 derpbar 在逻辑上是分开的，但遗憾的是，它们也是相互依赖的。我发现的最简单的解决方案是将它们组合起来并根据解剖结构而不是像这样的逻辑来拆分它们：

derpstructs.h：

```
#ifndef DERPSTRUCTS_H
#define DERPSTRUCTS_H

typedef struct {
        char *nothing;
} FOO;

typedef struct {
        char *nothing;
} BAR;

#include "derpfunctions.h"

#endif 
```

derpfunctions.h:

```
#ifndef DERPFUNCTIONS_H
#define DERPFUNCTIONS_H

#include "derpstructs.h"

BAR foo (BAR derp) {
        return derp;
}

FOO bar (FOO derp) {
        return derp;
}

#endif 
```

仍然是一个简单的derp.c：

```
#include "derpstructs.h"
#include "derpfunctions.h"

int main (void) {
        return 0;
} 
```

请注意，derpstructs.h*在末尾*而不是开头包含 derpfunctions.h。严格来说，这不是必需的，但如果您确实打算让它们相互包含，则必须在所有可能的包含路径中包含它们所依赖的结构定义*之后的函数定义。*继续...

这个解决方案有效，但它并没有完全坚持导致问题开始的原始哲学——这两个部分在逻辑上是分开的，并且应该在代码中保持这种状态。

两者的答案是进一步拆分所有内容，并进一步调整包含路径。

derpfoostructs.h*首先*包含 derpbarstructs.h ，然后定义 struct FOO，*最后*可选地包含 derpfoofunctions.h 和 derpbarfunctions.h。

derpbarstructs.h*首先*包含 derpfoostructs.h ，然后定义 struct BAR，*最后*可选包含 derpfoofunctions.h 和 derpbarfunctions.h。

derpfoofunctions.h首先包含derpfoostructs.h和derpbarstructs.h *，*然后包含derpbarfunctions.h，然后定义其函数。

derpbarfunctions.h首先包含derpfoostructs.h和derpbarstructs.h *，*然后包含derpfoofunctions.h，然后定义其函数。

derp.c 包括derpfoostructs.h 和derpbarstructs.h *，然后*包括derpfoofunctions.h 和derpbarfunctions.h，然后继续做它需要做的任何其他事情。

这满足了两个期望的要求。它消除了循环依赖，并且仍然保持两个逻辑分离的代码单元的逻辑分离。当您从一个项目更改为另一个项目时，您需要编辑两个文件而不是一个，但它至少使可变代码与不可变代码分开。那是我找到的唯一解决方案。

希望这有帮助。祝你的项目好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T03:50:18.603

循环依赖可能意味着你过度设计了你的界面。将两个文件合并到 Nv.h 中。如果这可以轻松解决问题，则意味着您错误地设计了界面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T04:42:01.200

我尝试根据您的描述对这个问题进行建模。在我的实现中，我测试了三件事（1）在 NvDefs.h 中声明但未定义 NV_DATA_TYPE，（2）在 NvDefs.h 中声明和定义 NV_DATA_TYPE，以及（3）在 NvDefs.h 中定义 NV_DATA_TYPE，但将其声明为 NvCommon.h . 此外，正如您提供的描述，我在 NvCommon.h 中创建了一些结构并在 NvDefs.h 中访问了这些对象。在每种情况下——无论在头文件中是否有保护——编译和执行的代码都是正确的结果。

除了 NV_DATA_TYPE 枚举之外，您的循环依赖项是否可能位于头文件中的其他位置？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T21:30:52.510

[看一下这个](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c/1433387#1433387)

如何正确声明和定义变量、库、函数等。这可能是相关的。

# csv - Gmail、Yahoo、Outlook 和 Hotmail 中的 CSV 标头？

> ID：14958292
> 
> 赞同：0
> 
> 时间：2013-02-19T13:07:13.913
> 
> 标签：csv, outlook, gmail, contacts, hotmail

我想知道 GMail、Yahoo、Outlook 和 Hotmail 提供的 CSV 文件中的 CSV 标头列表。尝试在互联网上查找列表，但找不到任何列表。

我正在尝试从给定的 CSV 文件中导入联系人列表，并且需要对特定标题（例如 - 姓名、名字、姓氏和电话号码）进行一些操作。列索引因 CSV 而异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:56:57.420

我正要做同样的事情。显而易见的答案是从每个帐户中导出并查看他们给出的标题:)

# django - request.POST.get [] 为空

> ID：14958293
> 
> 赞同：0
> 
> 时间：2013-02-19T13:07:19.247
> 
> 标签：django

我正在尝试创建一个只有注册用户才能访问的站点。我使用简单的注册表单来获取用户名和密码来创建用户。无法使用 request.POST.get 检索发布数据。它们是空的。

```
if request.method == 'POST':
    uname = request.POST.get('username')
    upass = request.POST.get('pass') ....                                                          

MIDDLEWARE_CLASSES = (
'django.contrib.sessions.middleware.SessionMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:32.287

您似乎正在尝试在您的视图中执行身份验证。你可以使用`@login_required`装饰器。更多信息在 [https://docs.djangoproject.com/en/dev/topics/auth/default/#the-login-required-decorator](https://docs.djangoproject.com/en/dev/topics/auth/default/#the-login-required-decorator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:46:54.027

我建议查看有关此主题的[文档](https://docs.djangoproject.com/en/1.4/topics/auth/#authentication-in-web-requests)，您也会发现很多重要说明。您可以使用内置登录视图 - [django.contrib.auth.views.login](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.views.login)为您处理身份验证内容，但您必须准备模板。

如果给定的 POST 变量为空，则您没有在表单中提交该变量，因此请在 Firebug 等工具中检查您的 html 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:22:10.043

我不确定我理解你想要做什么。如果您尝试在 django 视图中获取用户的详细信息，则可以使用 request.user。例如

```
def your_view(request):
    #...
    user = request.user
    return render(request, 'your_page.html') 
```

查看[用户身份验证文档](https://docs.djangoproject.com/en/1.4/topics/auth/#authentication-in-web-requests)。

# ruby - 在 Jekyll 模板中包含外部文件

> ID：14958294
> 
> 赞同：4
> 
> 时间：2013-02-19T13:07:19.927
> 
> 标签：ruby, jekyll, jekyll-extensions

是否可以在 Jekyll 模板中包含来自另一个域的 html 文件？如果是这样，语法是什么？

我不是 Ruby 或 Jekyll 开发人员，或多或少是代表另一个人提问，所以如果答案很明显，请原谅我！至少我无法通过一些初步研究找到答案。

本质上，我们试图从另一个域中提取页脚的标记，这就是生产的工作方式，所以我们实际上只是试图在我们的模板可交付成果中模拟它。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:05:58.213

You cannot do this within the template itself. However, you could define a custom Liquid tag that scrapes the markup of the remote page, and then put that tag into template. This would be in a file called e.g. `plugins/remote_footer.rb`

```
require 'nokogiri'
require 'open-uri'
require 'uri'

module Jekyll

  class RemoteFooterTag < Liquid::Tag

    def initialize(tag_name, markup, tokens)
      #markup is what is defined in the tag. Lets make it a URL so devs 
      #don't have to update code if the URL changes.
      url = markup

      #check if the URL is valid
      if url =~ URI::regexp
        #grab the remote document with nokogiri
        doc = Nokogiri::HTML(open(url))

        #search the document for the HTML element you want
        @node = doc.at_xpath("//div[@id='footer']")
      else
        raise 'Invalid URL passed to RemoteFooterTag'
      end

      super
    end

    def render(context)
      output = super
      if @node 
        node.to_s
      else
        "Something went wrong in RemoteFooterTag"
      end
    end
  end
end

Liquid::Template.register_tag('remote_footer', Jekyll::RemoteFooterTag) 
```

And then in your template:

```
{% remote_footer http://google.com %} 
```

I threw this together quickly and didn't check if it runs, but hopefully it's enough to work with. Keep in mind that this will run once when the liquid parser runs on the page, and if the remote element changes that will not be reflected until the Jekyll site is rebuilt.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-28T03:44:38.043

我只是偶然发现了这个问题，我找不到任何可行的解决方案来解决我拥有的所有用例，所以我编写了自己的插件。

注意这是我写的第一块红宝石。

```
require 'nokogiri'
require 'open-uri'
require 'uri'

class Jekyll::IncludeRemoteTag < Jekyll::Tags::IncludeTag
  @@remote_cache = {}

  def initialize(tag_name, markup, tokens)
    super
    @url = @file
  end

  def validate_url(url)
    if url !~ URI::regexp
      raise ArgumentError.new <<-eos
Invalid syntax for include_remote tag. URL contains invalid characters or sequences:

#{url}

Valid syntax:

#{syntax_example}

eos
    end
  end

  def syntax_example
    "{% #{@tag_name} http://domain.ltd css=\".menu\" xpath=\"//div[@class='.menu']\" param=\"value\" param2=\"value\" %}"
  end

  def render(context)
    @url = render_variable(context) || @url
    validate_url(@url)

    if @params
      validate_params
      @params = parse_params(context)
    end

    xpath = @params['xpath']
    css = @params['css']

    if ! html = @@remote_cache["#{@url}_#{xpath}"]
      # fetch remote file
      page = Nokogiri::HTML(open(@url))

      # parse extract xpath/css fragments if necessary
      node = page.at_xpath(xpath) if xpath
      node = page.css(css) if css
      node = page if !node

      raise IOError.new "Error while parsing remote file '#{@url}': '#{xpath||css}' not found" if !node

      # cache result
      html = @@remote_cache["#{@url}_#{xpath}"] = node.to_s
    end

    begin
      partial = Liquid::Template.parse(html)

      context.stack do
        context['include'] = @params
        partial.render!(context)
      end
    rescue => e
      raise Jekyll::Tags::IncludeTagError.new e.message, @url
    end
  end
end

Liquid::Template.register_tag('include_remote', Jekyll::IncludeRemoteTag) 
```

你会像这样使用它：

```
<!-- fetch header.html -->
{% assign url = 'http://mything.me/_includes/header.html' %}
{% include_remote {{ url }} %}

<!-- fetch menu.html and extract div.menu -->
{% include_remote 'http://mything.me/_includes/menu.html' css="div.menu" links=site.data.menu %}

<!-- fetch menu.html and extract div.menu (xpath version) -->
{% include_remote 'http://mything.me/_includes/menu.html' xpath="div[@class='menu']" links=site.data.menu %} 
```

它基本上与普通的包含文件完全一样，但它是远程的。

可在此处下载：[https ://gist.github.com/kilianc/a6d87879735d4a68b34f](https://gist.github.com/kilianc/a6d87879735d4a68b34f)

许可麻省理工学院。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-07T18:38:37.267

你可以包含[Jekyll 的 Liquid 标签插件](https://github.com/adrianescutia/jekyll-remote-include)，它对我有用。

将此添加到您的站点中`Gemfile`：

```
group :jekyll_plugins do
    gem 'jekyll-remote-include', :github => 'netrics/jekyll-remote-include'
end 
```

在您的帖子中使用标签，如下所示：

```
{% remote_include https://raw.githubusercontent.com/jekyll/jekyll/master/README.markdown %} 
```

或者

```
{% capture products %}
{% remote_include http://localhost:8888/products.json %}
{% endcapture %}

...

{{ products }} 
```

# xml - 在 xml 文件中定义列类型以用作 Crystal 报表数据源

> ID：14958295
> 
> 赞同：0
> 
> 时间：2013-02-19T13:07:22.327
> 
> 标签：xml, crystal-reports

我使用这个 XML 文件作为我的水晶报表的数据源。

```
<Person>
    <name></Name>
    <Family></Family>
    <BirthDate type="datetime"></BirthDate>
</Person> 
```

但是当我使用它作为数据源并且水晶报表引擎根据给定的 XML 生成我的报表列时，我看到 BirthDate 字段是一个字符串。我不能改变它的类型，我想我的 XML 格式可能有问题

有没有人能帮帮我？！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-17T20:27:53.700

可能为时已晚，但我希望这对那些现在正在寻找答案的人有所帮助。不要使用 xml，而是使用 xsd。按照你的例子，它会是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Person" nillable="true" type="Person" />
  <xs:complexType name="Person">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="1" name="Name" type="xs:string" />
      <xs:element minOccurs="0" maxOccurs="1" name="Family" type="xs:string" />
      <xs:element minOccurs="0" maxOccurs="1" name="BirthDate" type="xs:dateTime" />
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

Crystal Report 将正确识别生日的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:02:09.183

您可以使用 Crystal 公式来转换“字符串”，而不是使用 XML 中的类型。

```
If IsDateTime({XML.BirthDate})
    Then CDateTime({XML.BirthDate})
    Else CDateTime(0) 
```

*我从未在 Crystal 中使用过 XML 源，所以我不完全确定这些字段在公式编辑器中是如何显示的。“{XML.BirthDate}”可以是不同的格式。*

if/else 语句使它不会在 NULL 值（或非 DateTime 字符串）上崩溃。它们将显示为 DateTime 0: "12/30/1899 12:00:00AM"

# node.js - 如何在 Node.js / Express.js 中将中间件放在它自己的文件中

> ID：14958296
> 
> 赞同：26
> 
> 时间：2013-02-19T13:07:21.950
> 
> 标签：node.js, express, middleware

我是整个 Node.js 的新手，所以我仍在尝试了解事物是如何“连接”的。

我正在尝试使用[快速表单](http://dandean.github.com/express-form/docs/)验证。根据你可以做的文档

```
app.post( '/user', // Route  
  form( // Form filter and validation middleware
    filter("username").trim()
  ),

  // Express request-handler gets filtered and validated data
  function(req, res){
    if (!req.form.isValid) {
      // Handle errors
      console.log(req.form.errors);

    } else {
      // Or, use filtered form data from the form object:
      console.log("Username:", req.form.username);

    }
  }
); 
```

在 App.js 中。但是，如果我放一些类似的东西，`app.get('/user', user.index);`我可以将控制器代码放在一个单独的文件中。我想对验证中间件做同样的事情（或将验证代码放在控制器中），以便在我开始添加更多页面后更容易查看 App.js 文件。

有没有办法做到这一点？

基本上我想放类似的东西`app.get('/user', validation.user, user.index);`

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-19T13:50:27.447

这是您定义路线的方式：

**路线.js：**

```
module.exports = function(app){
    app.get("route1", function(req,res){...})
    app.get("route2", function(req,res){...})
} 
```

这是您定义中间件的方式：

**中间件.js：**

```
module.exports = {
    formHandler: function(req, res, next){...}
} 
```

**应用程序.js：**

```
// Add your middlewares:
middlewares = require("middlewares");
app.use(middlewares.formHandler);
app.use(middlewares...);

// Initialize your routes:
require("routes")(app) 
```

另一种方法是在**每个路由**中使用中间件：

**路线.js：**

```
middlewares = require("middlewares")
module.exports = function(app){
    app.get("route1", middlewares.formHandler, function(req,res){...})
    app.get("route2", function(req,res){...})
} 
```

我希望我能回答你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:50:01.747

您可以将中间件功能放入单独的模块中，就像您对控制器功能所做的那样。它只是一个带有适当参数集的导出函数。

因此，如果您有一个`validation.js`文件，您可以将您的`user`验证方法添加为：

```
exports.user = function (req, res, next) {
  ... // validate req and call next when done
}; 
```

# r - R Markdown 中每个变量的描述和绘图

> ID：14958300
> 
> 赞同：0
> 
> 时间：2013-02-19T13:07:36.837
> 
> 标签：r, ggplot2, markdown

我有几个数字和因子变量`data`的`n`观察数据框。我想生成一个 html 报告，其中报告`class`和 并为每个变量绘制`describe`直方图（`qplot`或）。`ggplot`

1.  我怎样才能做到这一点？
2.  在 R Markdown 中是否可以在每个变量分析之前生成一个自动标题？

谢谢您的帮助。

科拉多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:52:50.197

您可以在 Markdown 文件中的 R 块中放置一个循环。像这样的东西，例如：

```
```{r, echo=FALSE}
library(ggplot2)
```

This is an introductory sentence with absolutely no interest.

```{r, results="asis", eval=TRUE, echo=FALSE}
data(cars)
for (varname in names(cars)) {
  var <- cars[,varname]
  cat(paste0("<h2>",varname,"</h2>"))
  cat(paste0("Class : <pre>",class(var),"</pre>"))
  cat("Summary : <pre>")  
  print(summary(var))
  cat("</pre>")  
  if (is.numeric(var)) print(qplot(var, binwidth=diff(range(var))/30))
}
```

This is an astonishing conclusion. 
```

这给出了以下结果：[http ://rpubs.com/juba/mdloop](http://rpubs.com/juba/mdloop)

# cordova - 如何使用phonegap的文件传输api将000000001.db文件上传到服务器？

> ID：14958303
> 
> 赞同：0
> 
> 时间：2013-02-19T13:07:46.140
> 
> 标签：cordova

我正在使用 phonegap 的文件传输 api 将 000000001.db 文件上传到服务器，但它给了我错误文件未找到错误代码 = 1 谁能帮我解决这个问题。

```
function uploadFile() {
    alert('uploading file');
    // Get URI of picture to upload
    var img = document.getElementById('camera_image');
   // var imageURI = img.src;

   //"/data/data/com.suave.nexttrainer/app_database/file_0/0000000001.db";
    //i am giving physical address of database of simulator here 
    var imageURI = "/data/data/com.suave.nexttrainer/app_database/file_0/0000000001.db";
 // Verify server has been entered
    server = document.getElementById('serverUrl').value;
    alert('server');
    if (server) {

        // Specify transfer options
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg";
        options.chunkedMode = false;

        // Transfer picture/file to server
        var ft = new FileTransfer();
        alert('ft');
        ft.upload(imageURI, server, function(r) {
            document.getElementById('camera_status').innerHTML = "Upload successful: "+r.bytesSent+" bytes uploaded.";              
        }, function(error) {
            document.getElementById('camera_status').innerHTML = "Upload failed: Code = "+error.code;               
        }, options);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:42:40.007

两件事情：

1）尝试使用

"var imageURI = "file:///data/data/com.suave.nexttrainer/app_database/file_0/0000000001.db";

2) com.suave.netxtrainer 是您的应用程序包吗？因为只有该应用程序可以从该目录中读取。

# three.js - 了解MeshLambertMaterial Three.js

> ID：14958312
> 
> 赞同：0
> 
> 时间：2013-02-19T13:08:09.340
> 
> 标签：three.js

我有这段代码，它工作得很好：

```
mesh = new THREE.Mesh( new THREE.SphereGeometry( 500, 60, 40 ), new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'images/texture01.jpg' ) } ) );
mesh.scale.x = -1;
scene.add( mesh ); 
```

但是当材质更改为 MeshLambertMaterial 时，对象不显示，也没有显示错误。

我需要这种类型的材料来处理不透明度..

谢谢！！

# c# - 如何在foreach循环中留下while循环

> ID：14958323
> 
> 赞同：1
> 
> 时间：2013-02-19T13:08:48.400
> 
> 标签：c#, foreach, switch-statement

我有一个`while`循环，在里面`while loop`我有一个`foreach loop`.

[在这里](https://stackoverflow.com/questions/14687138/how-to-go-to-the-next-value-of-a-while-loop)，我学习了如何使用`Continue; Return; Break`. `while loop`但是当我在里面的时候我需要离开`foreach loop`这可能吗？

我在 内部进行交互`foreach loop`，我想离开 foreach 并进入`while`. 我该怎么做？像这样：

```
while (!reader.EndOfStream)  //COMEÇO DO WHILE
{
  ///Some Codes

  foreach(string s in checkedlistbox1.items)
        {
          switch(s)
           {
             case "1":
                if( 1 > 0)
                 {
                    ///HERE I WANT TO GO TO THE NEXT INTERACTION OF THE WHILE
                    ///When I use CONTINUE; HERE, I GO TO THE NEXT INTERACTION OF THE FOREACH. BUT I NEED TO GO TO THE NEXT OF THE WHILE.
                 }
           }
        }
} 
```

这就是我想要做的：我正在逐行读取 file.txt，并用这些值和其他一些东西写一个新的......如果 a为空`required`，其中一些值可能是（由用户设置）`required field`，所以我什么都不做，然后去下一个`while interaction`......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:14:33.580

您需要从开关断开，然后从 foreach 断开，同时设置变量。

然后，您可以检查该变量以查看是否应该`continue`进行下`while`一次迭代。

像这样做：

```
while (!reader.EndOfStream)
{
    // Some Codes

    bool skipToNext = false;

    foreach (string s in checkedlistbox1.items)
    {
        switch (s)
        {
            case "1":
                if (1 > 0)
                {
                    skipToNext = true;
                    break;
                }
        }

        if (skipToNext) break;
    }

    // in the case of there being more code, you can now use continue
    if (skipToNext) continue;

    // more code
} 
```

此流程工作的示例

```
var list = new List<string> { "0", "1", "2" };
int a = 0, b = 2;

while (a++ < b)
{
    // Some Codes

    bool skipToNext = false;

    foreach (string s in list)
    {
        Debug.WriteLine("{0} - {1}", a, s);

        switch (s)
        {
            case "1":
                if (1 > 0)
                {
                    Debug.WriteLine("Skipping switch...");
                    skipToNext = true;
                    break;
                }
        }

        if (skipToNext)
        {
            Debug.WriteLine("Skipping foreach...");
            break;
        }
    }

    // in the case of there being more code, you can now use continue
    if (skipToNext)
    {
        Debug.WriteLine("Skipping to next while...");
        continue;
    }

    // more code
} 
```

输出：

```
1 - 0
1 - 1
Skipping switch...
Skipping foreach...
Skipping to next while...
2 - 0
2 - 1
Skipping switch...
Skipping foreach...
Skipping to next while... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:10:18.323

1）是的，这是可能的。有用。

```
 foreach() {
    while() {
       break; //leave the while
    }
    //... and continues from here
 } 
```

2）每个while都将在下一次foreach迭代之前结束，所以第二个问题没有多大意义......除非你的意思是在foreach内开始下一个while，在这种情况下......是的！

```
 foreach() {
    while() {
       ...
    }
    break; //will go to the next foreach iteration, i.e. starts a new while
 } 
```

至于您的代码示例，您在评论中提到的点的中断将满足您的需要（退出 foreach，自然进入下一个 while 迭代）。

编辑：在您发布示例之后，您的问题似乎不在于 while 和 foreach 之间的交互，而在于 switch：break 用作“转到循环中的下一个迭代”和“完成这个”的关键字外壳和开关”。

编译器会将中断视为“开关中断”。您需要自己模仿行为：

```
 foreach(string s in checkedlistbox1.items)
    {
      bool dobreak = false;
      switch(s)
       {
         case "1":
            if( 1 > 0)
             {
                dobreak = true;
             }
             break; // exit the case
       }
       if (dobreak)
          break; // exits the for (it is a 'foreach-break')
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:12:25.987

```
bool dobreak = false;
while (!reader.EndOfStream && !dobreak )  //COMEÇO DO WHILE
{
  ///Some Codes

  foreach(string s in checkedlistbox1.items)
        {
          switch(s)
           {
             case "1":
                if( 1 > 0)
                 {
                    dobreak = true;
                    break;
                 }
           }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:14:47.253

未经测试，但这些是应该回答您的问题的一些可能的方法：

```
bool continueLooping = true;

string[] array = { "1", "2" };

while (continueLooping)
{
    foreach (string x in array)
    {
        // break out of foreach loop AND while loop
        if (x == "1")
        {
            continueLooping = false;
            break;
        }

        // go to next iteration of foreach loop
        if (x == "2")
        {
            continue;
        }

        // break out of foreach loop and continue while loop
        if (x == "3")
        {
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T13:16:14.203

你需要打破你的`foreach`和`while`这样的事情：

```
bool abort = false;
while (!reader.EndOfStream && !abort)  //COMEÇO DO WHILE
{
  ///Some Codes

  foreach(string s in checkedlistbox1.items)
        {
          switch(s)
           {
             case "1":
                if( 1 > 0)
                 {
                    ///HERE I WANT TO LEAVE TO THE NEXT INTERACTION OF THE WHILE
                    abort = true;
                    break;
                 }
           }

           if (abort)
           {
               break;
           }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T13:16:35.573

我是 C# 的初学者，但我建议您在 while 循环中添加另一个条件，您可以自己设置。然后，在需要时更改它。例如：

```
MyKeyCondition = 0;

while(MainCondition||MyKeyCondition){

if(MyCheckCondition){
MyKeyCondition = 1;
}

} 
```

现在，如果您更改关键条件，即使不满足主要条件，您也可以处理 while 循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T13:18:28.600

可以试试[goto；](http://msdn.microsft.com/en-us/library/13940fs2%28v=vs.71%29.aspx)

```
while (true)
{
 foreach(string s in checkedlistbox1.items)
  {
   switch(s)
   {
     case "1":
        if( 1 > 0)
        {
          goto WhileOut;
        }
    }
  }
}
WhileOut:
      // some code 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T13:30:48.037

通常嵌套循环表明方法应该被拆分。

在这个例子中，它可以使代码更清晰。如果将内部`for`循环放入单独的方法中，则可以使该方法返回一个`bool`. `true`如果希望外`while`循环继续迭代，则返回；否则，`false`如果您希望它退出`while`循环，则返回。

它看起来像这样：

```
private void doSomething(StreamReader reader)
{
    while (!reader.EndOfStream)
    {
        // Some Codes...

        if (!processNextItem(reader))
        {
            break;
        }
    }
}

// Returns true if the caller should continue its while loop; false if it should exit it.

private bool processNextItem(StreamReader reader)
{
    foreach (string s in checkedlistbox1.items)
    {
        switch (s)
        {
            case "1":
                if (1 > 0)
                {
                    return false; // Return false to exit while loop.
                }
        }
    }

    return true; // Return true to continue while loop.
} 
```

我不确定你需要传递给什么`processNextItem()`；我刚刚通过`reader`了一个例子。

# jquery - HTML5 应用程序缓存 - Javascript 不起作用

> ID：14958326
> 
> 赞同：0
> 
> 时间：2013-02-19T13:09:00.010
> 
> 标签：jquery, html

我正在编写一个可在 iOS 上离线使用的网络应用程序。 [http://www.addictedtocolors.com/pba/pba_eng.html](http://www.addictedtocolors.com/pba/pba_eng.html)

它正在缓存所有内容（html、图像、css、js），但它不执行 jquery。

我无法理解出了什么问题，也无法找到解决方案。

**这是html**

```
<!doctype html>
<html manifest="offline.appcache">

<head>

<meta charset="utf-8" />
<title>pba</title>
<link type="image/x-icon" rel="shortcut icon" href="img/favicon.ico" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />    
<meta content="yes" name="apple-mobile-web-app-capable" />

<!-- iPad (Retina) ICON-->
<link rel="apple-touch-icon-precomposed" sizes="144x144"
href="icon/pba-icon-144x144.png" />
<!-- iPhone (Retina) ICON-->
<link rel="apple-touch-icon-precomposed" sizes="114x114"
href="icon/pba-icon-114x114.png" />
<!-- iPad ICON-->
<link rel="apple-touch-icon-precomposed" sizes="72x72"
href="icon/pba-icon-72x72.png" />
<!-- iPhone ICON -->
<link rel="apple-touch-icon-precomposed"
href="icon/pba-icon-57x57.png" />

<!-- iPhone SPLASHSCREEN-->
<link href="icon/pba-startup-320x460.png" media="(device-width:
320px)" rel="apple-touch-startup-image">
<!-- iPhone (Retina) SPLASHSCREEN-->
<link href="icon/pba-startup-640x920.png" media="(device-width:
320px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<!-- iPad (portrait) SPLASHSCREEN-->
<link href="icon/pba-startup-768x1004.png"
media="(device-width: 768px) and (orientation: portrait)"
rel="apple-touch-startup-image">
<!-- iPad (landscape) SPLASHSCREEN-->
<link href="icon/pba-startup-1024x748.png"
media="(device-width: 768px) and (orientation: landscape)"
rel="apple-touch-startup-image">
<!-- iPad (Retina, portrait) SPLASHSCREEN-->
<link href="icon/pba-startup-1536x2008.png"
media="(device-width: 1536px) and (orientation: portrait) and
(-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<!-- iPad (Retina, landscape) SPLASHSCREEN-->
<link href="icon/pba-startup-2048x1496.png"
media="(device-width: 1536px) and (orientation: landscape) and
(-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">

<!--[if lt IE 9]><script src="js/html5shiv.js"></script><![endif]-->
<!--[if lte IE 9]><link rel="stylesheet" href="css/ie.css" type="text/css" media="screen" /><![endif]-->

<link rel="stylesheet" href="css/1140.css" type="text/css" media="screen" />

<link rel="stylesheet" href="css/styles.css" type="text/css" media="screen" />  

</head>

<body>

<div class="container">
<div class="row">
    <div class="twelvecol">
        <ul class="rslides">
            <li>
                <a href="img/pagina2/pag_2_1.jpg" class="fancy zoom" id="zoom_2_1">zoom 1</a>
                <a href="img/pagina2/pag_2_2.jpg" class="fancy zoom small" id="zoom_2_2">zoom 2</a>
                <a href="img/pagina2/pag_2_3.jpg" class="fancy zoom small" id="zoom_2_3">zoom 3</a>
                <a href="img/pagina2/pag_2_4.jpg" class="fancy zoom" id="zoom_2_4">zoom 4</a>
                <a href="img/pagina2/pag_2_5.jpg" class="fancy zoom small" id="zoom_2_5">zoom 5</a>
                <a href="img/pagina2/pag_2_6.jpg" class="fancy zoom small" id="zoom_2_6">zoom 6</a>
                <a href="img/pagina2/pag_2_7.jpg" class="fancy zoom" id="zoom_2_7">zoom 7</a>
                <a href="img/pagina2/pag_2_8.jpg" class="fancy zoom small" id="zoom_2_8">zoom 8</a>
                <a href="img/pagina2/pag_2_9.jpg" class="fancy zoom small" id="zoom_2_9">zoom 9</a>
                <img src="img/pba_eng_2.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina3/pag_3_1.jpg" class="fancy zoom" id="zoom_3_1">zoom 1</a>
                <a href="img/pagina3/pag_3_2.jpg" class="fancy zoom" id="zoom_3_2">zoom 2</a>
                <a href="img/pagina3/pag_3_3.jpg" class="fancy zoom" id="zoom_3_3">zoom 3</a>
                <a href="img/pagina3/pag_3_4.jpg" class="fancy zoom" id="zoom_3_4">zoom 4</a>
                <a href="img/pagina3/pag_3_5.jpg" class="fancy zoom" id="zoom_3_5">zoom 5</a>
                <a href="img/pagina3/pag_3_6.jpg" class="fancy zoom" id="zoom_3_6">zoom 6</a>
                <img src="img/pba_eng_3.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina4/pag_4_1.jpg" class="fancy zoom" id="zoom_4_1">zoom 1</a>
                <a href="img/pagina4/pag_4_2.jpg" class="fancy zoom small" id="zoom_4_2">zoom 2</a>
                <a href="img/pagina4/pag_4_3.jpg" class="fancy zoom small" id="zoom_4_3">zoom 3</a>
                <a href="img/pagina4/pag_4_4.jpg" class="fancy zoom small" id="zoom_4_4">zoom 4</a>
                <a href="img/pagina4/pag_4_5.jpg" class="fancy zoom small" id="zoom_4_5">zoom 5</a>
                <a href="img/pagina4/pag_4_6.jpg" class="fancy zoom" id="zoom_4_6">zoom 6</a>                   
                <a href="img/pagina4/pag_4_7.jpg" class="fancy zoom small" id="zoom_4_7">zoom 7</a>
                <a href="img/pagina4/pag_4_8.jpg" class="fancy zoom small" id="zoom_4_8">zoom 8</a>
                <a href="img/pagina4/pag_4_9.jpg" class="fancy zoom small" id="zoom_4_9">zoom 9</a>
                <a href="img/pagina4/pag_4_10.jpg" class="fancy zoom small" id="zoom_4_10">zoom 10</a>
                <a href="img/pagina4/pag_4_11.jpg" class="fancy zoom" id="zoom_4_11">zoom 11</a>
                <a href="img/pagina4/pag_4_12.jpg" class="fancy zoom small" id="zoom_4_12">zoom 12</a>
                <a href="img/pagina4/pag_4_13.jpg" class="fancy zoom small" id="zoom_4_13">zoom 13</a>
                <a href="img/pagina4/pag_4_14.jpg" class="fancy zoom small" id="zoom_4_14">zoom 14</a>
                <a href="img/pagina4/pag_4_15.jpg" class="fancy zoom small" id="zoom_4_15">zoom 15</a>  
                <img src="img/pba_eng_4.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina7/pag_7_1-2-3.jpg" class="fancy zoom" id="zoom_7_1">zoom 1</a>
                <a href="img/pagina7/pag_7_1-2-3.jpg" class="fancy zoom" id="zoom_7_2">zoom 2</a>
                <a href="img/pagina7/pag_7_1-2-3.jpg" class="fancy zoom" id="zoom_7_3">zoom 3</a>
                <a href="img/pagina7/pag_7_4.jpg" class="fancy zoom" id="zoom_7_4">zoom 4</a>
                <a href="img/pagina7/pag_7_5.jpg" class="fancy zoom" id="zoom_7_5">zoom 5</a>
                <a href="img/pagina7/pag_7_6-7.jpg" class="fancy zoom" id="zoom_7_6">zoom 6</a>             
                <a href="img/pagina7/pag_7_6-7.jpg" class="fancy zoom" id="zoom_7_7">zoom 7</a>
                <a href="img/pagina7/pag_7_8.jpg" class="fancy zoom" id="zoom_7_8">zoom 8</a>
                <a href="img/pagina7/pag_7_9.jpg" class="fancy zoom" id="zoom_7_9">zoom 9</a>
                <a href="img/pagina7/pag_7_10.jpg" class="fancy zoom" id="zoom_7_10">zoom 10</a>
                <a href="img/pagina7/pag_7_11.jpg" class="fancy zoom" id="zoom_7_11">zoom 11</a>
                <a href="img/pagina7/pag_7_12.jpg" class="fancy zoom" id="zoom_7_12">zoom 12</a>
                <img src="img/pba_eng_7.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina6/pag_6_1.jpg" class="fancy zoom small" id="zoom_6_1">zoom 1</a>
                <a href="img/pagina6/pag_6_2.jpg" class="fancy zoom small" id="zoom_6_2">zoom 2</a>
                <a href="img/pagina6/pag_6_3.jpg" class="fancy zoom small" id="zoom_6_3">zoom 3</a>
                <a href="img/pagina6/pag_6_4.jpg" class="fancy zoom small" id="zoom_6_4">zoom 4</a>
                <a href="img/pagina6/pag_6_5.jpg" class="fancy zoom small" id="zoom_6_5">zoom 5</a>
                <a href="img/pagina6/pag_6_6.jpg" class="fancy zoom small" id="zoom_6_6">zoom 6</a>             
                <a href="img/pagina6/pag_6_7.jpg" class="fancy zoom small" id="zoom_6_7">zoom 7</a>
                <a href="img/pagina6/pag_6_8.jpg" class="fancy zoom small" id="zoom_6_8">zoom 8</a>
                <a href="img/pagina6/pag_6_9.jpg" class="fancy zoom small" id="zoom_6_9">zoom 9</a>
                <a href="img/pagina6/pag_6_10.jpg" class="fancy zoom small" id="zoom_6_10">zoom 10</a>
                <a href="img/pagina6/pag_6_11.jpg" class="fancy zoom small" id="zoom_6_11">zoom 11</a>
                <a href="img/pagina6/pag_6_12.jpg" class="fancy zoom small" id="zoom_6_12">zoom 12</a>
                <a href="img/pagina6/pag_6_13.jpg" class="fancy zoom small" id="zoom_6_13">zoom 13</a>
                <a href="img/pagina6/pag_6_14.jpg" class="fancy zoom small" id="zoom_6_14">zoom 14</a>
                <a href="img/pagina6/pag_6_15.jpg" class="fancy zoom small" id="zoom_6_15">zoom 15</a>
                <a href="img/pagina6/pag_6_16.jpg" class="fancy zoom small" id="zoom_6_16">zoom 16</a>          
                <a href="img/pagina6/pag_6_17.jpg" class="fancy zoom small" id="zoom_6_17">zoom 17</a>
                <a href="img/pagina6/pag_6_18.jpg" class="fancy zoom small" id="zoom_6_18">zoom 18</a>
                <a href="img/pagina6/pag_6_19.jpg" class="fancy zoom small" id="zoom_6_19">zoom 19</a>
                <a href="img/pagina6/pag_6_20.jpg" class="fancy zoom small" id="zoom_6_20">zoom 20</a>
                <a href="img/pagina6/pag_6_21.jpg" class="fancy zoom small" id="zoom_6_21">zoom 21</a>
                <a href="img/pagina6/pag_6_22.jpg" class="fancy zoom small" id="zoom_6_22">zoom 22</a>
                <a href="img/pagina6/pag_6_23.jpg" class="fancy zoom small" id="zoom_6_23">zoom 23</a>
                <a href="img/pagina6/pag_6_24.jpg" class="fancy zoom small" id="zoom_6_24">zoom 24</a>
                <img src="img/pba_eng_6.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina5/pag_5_1.jpg" class="fancy zoom big" id="zoom_5_1">zoom 1</a>
                <a href="img/pagina5/pag_5_2.jpg" class="fancy zoom big" id="zoom_5_2">zoom 2</a>
                <a href="img/pagina5/pag_5_3.jpg" class="fancy zoom big" id="zoom_5_3">zoom 3</a>
                <a href="img/pagina5/pag_5_4.jpg" class="fancy zoom big" id="zoom_5_4">zoom 4</a>
                <img src="img/pba_eng_5.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina8/pag_8_1.jpg" class="fancy zoom" id="zoom_8_1">zoom 1</a>
                <img src="img/pba_eng_8.jpg" alt="" />
            </li>
            <li>
                <a href="img/pagina9/pag_9_1.jpg" class="fancy zoom" id="zoom_9_1">zoom 1</a>
                <img src="img/pba_eng_9.jpg" alt="" />
            </li>
            <li>
                <a href="pba_ita.html" class="ita">ITALIANO</a>
                <a href="pba_eng.html" class="eng">ENGLISH</a>
                <img src="img/pba_cover.jpg" alt="" />
            </li>
        </ul>
    </div>
</div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/responsiveslides.min.js"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/debug.js"></script>
<script>
$(window).load(function(){
  setTimeout(function(){
    window.scrollTo(0, 1);
  }, 0);
});
$(function () {
$(".rslides").responsiveSlides({
    auto: false,
    pager: false,
    nav: true,
    speed: 500
});
});
$(document).ready(function() {
$(".fancy").fancybox({
    padding: 0, 
    openEffect : 'fade',
    openSpeed  : 250,   
    closeEffect : 'fade',
    closeSpeed  : 250,  
    closeClick : true
});
});
</script> 
```

**还有offline.appcache**

```
CACHE MANIFEST
#Vers. 1.0

CACHE:
index.html
pba_eng.html
pba_ita.html
css/1140.css
css/styles.css
js/jquery.fancybox.pack.js
js/jquery.min.js
js/responsiveslides.min.js
js/debug.js
icon/pba-icon-57x57.png
icon/pba-icon-72x72.png
icon/pba-icon-114x114.png
icon/pba-icon-144x144.png
icon/pba-startup-320x460.png
icon/pba-startup-640x920.png
icon/pba-startup-768x1004.png
icon/pba-startup-1024x748.png
icon/pba-startup-1536x2008.png
icon/pba-startup-2048x1496.png
img/blank.gif
img/fancybox_loading.gif
img/shim.gif
img/themes.gif
img/fancybox_sprite.png
img/favicon.ico
img/pba_cover.jpg
img/pba_eng_2.jpg
img/pba_eng_3.jpg
img/pba_eng_4.jpg
img/pba_eng_5.jpg
img/pba_eng_6.jpg
img/pba_eng_7.jpg
img/pba_eng_8.jpg
img/pba_eng_9.jpg
img/pba_ita_2.jpg
img/pba_ita_3.jpg
img/pba_ita_4.jpg
img/pba_ita_5.jpg
img/pba_ita_6.jpg
img/pba_ita_7.jpg
img/pba_ita_8.jpg
img/pba_ita_9.jpg
img/pagina2/pag_2_1.jpg
img/pagina2/pag_2_2.jpg
img/pagina2/pag_2_3.jpg
img/pagina2/pag_2_4.jpg
img/pagina2/pag_2_5.jpg
img/pagina2/pag_2_6.jpg
img/pagina2/pag_2_7.jpg
img/pagina2/pag_2_8.jpg
img/pagina2/pag_2_9.jpg
img/pagina3/pag_3_1.jpg
img/pagina3/pag_3_2.jpg
img/pagina3/pag_3_3.jpg
img/pagina3/pag_3_4.jpg
img/pagina3/pag_3_5.jpg
img/pagina3/pag_3_6.jpg
img/pagina4/pag_4_1.jpg
img/pagina4/pag_4_2.jpg
img/pagina4/pag_4_3.jpg
img/pagina4/pag_4_4.jpg
img/pagina4/pag_4_5.jpg
img/pagina4/pag_4_6.jpg
img/pagina4/pag_4_7.jpg
img/pagina4/pag_4_8.jpg
img/pagina4/pag_4_9.jpg
img/pagina4/pag_4_10.jpg
img/pagina4/pag_4_11.jpg
img/pagina4/pag_4_12.jpg
img/pagina4/pag_4_13.jpg
img/pagina4/pag_4_14.jpg
img/pagina4/pag_4_15.jpg
img/pagina5/pag_5_1.jpg
img/pagina5/pag_5_2.jpg
img/pagina5/pag_5_3.jpg
img/pagina5/pag_5_4.jpg
img/pagina6/pag_6_1.jpg
img/pagina6/pag_6_2.jpg
img/pagina6/pag_6_3.jpg
img/pagina6/pag_6_4.jpg
img/pagina6/pag_6_5.jpg
img/pagina6/pag_6_6.jpg
img/pagina6/pag_6_7.jpg
img/pagina6/pag_6_8.jpg
img/pagina6/pag_6_9.jpg
img/pagina6/pag_6_10.jpg
img/pagina6/pag_6_11.jpg
img/pagina6/pag_6_12.jpg
img/pagina6/pag_6_13.jpg
img/pagina6/pag_6_14.jpg
img/pagina6/pag_6_15.jpg
img/pagina6/pag_6_16.jpg
img/pagina6/pag_6_17.jpg
img/pagina6/pag_6_18.jpg
img/pagina6/pag_6_19.jpg
img/pagina6/pag_6_20.jpg
img/pagina6/pag_6_21.jpg
img/pagina6/pag_6_22.jpg
img/pagina6/pag_6_23.jpg
img/pagina6/pag_6_24.jpg
img/pagina7/pag_7_1-2-3.jpg
img/pagina7/pag_7_4.jpg
img/pagina7/pag_7_5.jpg
img/pagina7/pag_7_6-7.jpg
img/pagina7/pag_7_8.jpg
img/pagina7/pag_7_9.jpg
img/pagina7/pag_7_10.jpg
img/pagina7/pag_7_11.jpg
img/pagina7/pag_7_12.jpg
img/pagina8/pag_8_1.jpg
img/pagina9/pag_9_1.jpg 
```

欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:31:32.853

jQuery 的加载函数不执行 ajax 调用吗？[http://api.jquery.com/load/](http://api.jquery.com/load/)

进入主页时

```
$(window).load(function(){
  setTimeout(function(){
    window.scrollTo(0, 1);
  }, 0);
}); 
```

在控制台中什么都不做。但它正在响应，所以 jQuery 就在那里。

也许尝试清除您的缓存（chrome://appcache-internals/）。

# php - 如何动态添加另一个字段

> ID：14958333
> 
> 赞同：0
> 
> 时间：2013-02-19T13:09:06.390
> 
> 标签：php, html

如何静态添加元素，但在设计时不可见，然后在某些事件发生时动态显示。在这种情况下，我使用像这样的代码 HTML

```
<input type="text" name="field_1"/>
<input type="text" name="field_2"/>
<input type="text" name="field_3"/>
<input type="text" name="field_4" style="display:none"/>
<input type="text" name="field_5" style="display:none"/>
<a href="#">add another field</a> 
```

第一次，field_4 和 field_5 是不可见的，对吗？但是当我单击“添加另一个字段”时，应该可以看到 field_4 和 field_5。

有什么提示吗？

我不介意是否有人可以用 PHP 解决这个案例，也许这个案例就像 FB，当你输入你的联系信息（你的电话号码）时，如果你只有 1 个号码，这意味着你不需要点击“添加另一个电话”，但是如果您有 2 个或更多数字，您可以单击它，并且字段文本将显示与您单击的一样多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:16:05.960

首先，您不需要拥有那些隐藏字段。那不是“动态添加它们”。

```
<input type="text" name="field_1"/>
<input type="text" name="field_2"/>
<input type="text" name="field_3"/>
<a href="#">add another field</a> 
```

接下来，告诉链接在单击时执行 JavaScript 函数：

```
<a href="javascript:void()" onclick="addField(e)">add another field</a> 
```

编写你的 JavaScript：

```
;(function) {
    var counter = 3; //This is set to the number of initial fields.

    function addField(e) {
        e = e || window.event; //Normalize the event.

        counter++; //Increment the counter.

        //Create the new element.
        var element = document.createElement("input");
        element.setAttribute("type", "text");
        element.setAttribute("name", "field_" + counter);

        //Insert it before your link.
        e.target.parentNode.insertBefore(element, e.target);
    }
 })(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:11:28.197

```
document.getElementById('field_4').display = 'inline' 
```

这应该适合您的目的。

您可以在单击按钮时添加一个新元素，而不是显示旧的不可见元素。

```
var index = 2;
document.getElementById('addBtn').addEventListener('click', function() {
    var inp = document.createElement('input')
    inp.setAttribute('type', 'text')
    inp.setAttribute('name', 'field_' + index)
    document.insertBefore(inp, document.getElementById('addBtn'))
    index ++;
}) 
```

# javascript - Google Apps 脚本事件管理器

> ID：14958334
> 
> 赞同：0
> 
> 时间：2013-02-19T13:09:08.417
> 
> 标签：javascript, google-apps-script, google-docs, google-drive-api

我目前正在尝试使用 Martin Hawksey 博客中的Google [Apps](http://mashe.hawksey.info/2010/11/eventmanagerv3/)[事件管理器](https://spreadsheets.google.com/ccc?key=0AqGkLMU9sHmLdFRSUjEyT0lDbk1TeU02eF9jRnpCNFE&hl=en_GB)，但我遇到了 2 个问题。

**#1)**确认电子邮件中的日期发布的是“今天的”日期和时间，而不是活动日期和时间（这是他的原件，他从未修复过）。大多数人都说这部分不正确：

```
 var variableData = isDate(data[normalizeHeader(templateVars[i])]);
    email = email.replace(templateVars[i], variableData || "");
  }

  return email;
}

// Test if value is a date and if so format 
function isDate(sDate) {
  var scratch = new Date(sDate);
  if (scratch.toString() == "NaN" || scratch.toString() == "Invalid Date") {
    return sDate;
  } 
  else {
    return Utilities.formatDate(new Date(), TZ, "dd MMM yy HH:mm");
  }
} 
```

**#2)**我的另一个问题是在加入指令的模板中我不能调用任何变量（即 ${"Invoice"} 或 ${"Amount"} :: 相反它返回“今天的”日期 <-- I添加了更多单元格并为每个单元格添加了一列，其中包含数据，并在脚本中进行了正确调整；仍然没有。

前任。

```
Template: "Your Invoice # is: ${"Invoice"} and your total amount due is: ${"Amount"}"
Reality: "Your Invoice # is: 13 Feb 13 13:18 and your total amount due is: 13 Feb 13 13:18." 
```

这是我的完整脚本和我所做的更改（与他的原版差别不大）：[https ://gist.github.com/hakarune/4985606](https://gist.github.com/hakarune/4985606)

任何和所有的帮助都将非常感激，最大和最重要的事情是那个日期......谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T06:09:04.003

对于问题 #1，`isDate()`函数的注释说，如果给定`sDate`的日期是有效日期，则将返回该日期的格式化版本。但是调用`formatDate()`pass `new Date()`，这将是当前的日期和时间。相反，它应该通过`new Date(sDate)`.

```
return Utilities.formatDate(new Date(sDate), TZ, "dd MMM yy HH:mm"); 
```

对于问题 #2，看起来问题又出在`isDate()`. 如果它是日期，则该`fillInTemplateFromObject()`函数正在调用`isDate()`以格式化模板数据，否则它将保持原样。问题是**每个**数字都会通过`isDate()`检查，因为测试只是是否`new Date(sDate)`会产生日期。请参阅[此参考资料](http://www.w3schools.com/jsref/jsref_obj_date.asp)，您会看到它最终会被视为`new Date(milliseconds)`. 由于上述错误，您获得了当前日期......修复它，您将获得一个不同的日期，但仍然是一个日期。检查[Detecting an "invalid date" Date instance in JavaScript](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)，如果它在应用程序脚本中工作，它可能会提供更确凿的测试。

这是`isDate()`您尝试的解决方法。它包括对问题 #1 的修复，并`isValidDate()`从[Detecting an "invalid date" Date instance in JavaScript](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)中引入例程，以更准确地区分日期和数字。

```
// From https://stackoverflow.com/questions/1353684
// Returns 'true' if variable d is a date object.
function isValidDate(d) {
  if ( Object.prototype.toString.call(d) !== "[object Date]" )
    return false;
  return !isNaN(d.getTime());
}

// Test if value is a date and if so format
// otherwise, reflect input variable back as-is. 
function isDate(sDate) {
  if (isValidDate(sDate)) {
    sDate = Utilities.formatDate(new Date(sDate), TZ, "dd MMM yy HH:mm");
  }
  return sDate;
} 
```

如果你好奇，这是我在调试器中运行的测试代码。注释显示了在调试器中显示为值的内容。

```
var TZ = "GMT"; // isDate() uses a global variable for TimeZone, let's try GMT

function myFunction() {
  var a = new Date();     // Fri Feb 22 2013 20:48:07 GMT-0500 (EST)
  var b = isDate(a);      // "23 Feb 13 01:48"
  var c = 142312;         // 142312.0
  var d = isDate(c);      // 142312.0
  var e = 'test string';  // "test string"
  var f = isDate(e);      // "test string"
  var g = 'Feb 22, 2013'  // "Feb 22, 2013"
  var h = isDate(g);      // "Feb 22, 2013"
  debugger;
} 
```

# c# - 如何使用 Fluent NHibernate 映射序列化/反序列化元素列表？

> ID：14958342
> 
> 赞同：4
> 
> 时间：2013-02-19T13:09:28.307
> 
> 标签：c#, nhibernate, serialization, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用 Fluent NHibernate 映射来序列化/反序列化数据。

从“根”实体开始，我使用映射来构建一个图表，其中包含链接到该实体的所有实体。然后我序列化这组实体。

我有这个映射（只有相关部分）：

```
[Serializable]
public class Foo
{
    public virtual IList<Bar> Bars { get; set;}
    public virtual IList<System.Guid> Guids { get; set; }
}

[Serializable]
public class Bar
{
    public virtual Foo Foo { get; set; }
}

public class BarMap : ClassMap<Bar>
{
    References(x => x.Foo, "idFoo").Not.Nullable();
}

public class FooMap : ClassMap<Foo>
{
    HasMany(x => x.Bars).KeyColumn("idFoo");
    HasMany(x => x.Guids).Table("guids").KeyColumn("idFoo").Element("guid").AsBag().Not.LazyLoad();
} 
```

Foo 和 Bar 的序列化和反序列化一切正常。但是当试图将反序列化的数据持久化回数据库时，`Guids`列表不会持久化，尽管它的数据是在 Foo 对象中找到的。

我用谷歌搜索了一段时间，但没有发现任何有用的东西。我也试过`Inverse`，没有用。我也试过了`Cascade.SaveUpdate()`，也没用。

是因为它使用额外的表将值存储为`Element`s 吗？这是我能想到的关于这个列表的唯一特殊性。

我错过了什么阻止这种恢复工作？

欢迎任何想法。谢谢。

**编辑：**

Guids 列表已正确序列化和反序列化。唯一没有做的是 guids 列表的数据库插入，但它存在于反序列化数据中。

**编辑2：**

奇怪的是，项目中其他地方的另一段代码也做了同样的事情，这次成功了。所以也许它是一个模糊的 NHibernate 配置参数，双方都不同，但 mainNH.xml.config 每次都是同一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:05:03.370

尝试将 Inverse(false) 添加到您的 HasMany 映射中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:40:00.770

您的保存/更新可能没有级联到子集合。

将您的映射更改为

```
 HasMany(x => x.Guids).Cascade.SaveUpdate().Table("guids").KeyColumn("idFoo").Element("guid").AsBag().Not.LazyLoad(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T01:05:24.637

尝试

```
Session.Merge(bar);
Session.Merge(bar.Foo);
Session.SaveUpdate(bar); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T11:06:40.717

在保存之前尝试刷新会话，并确保保存（不是 SaveOrUpdate）。

# php - 根据多个值检查一个变量？

> ID：14958344
> 
> 赞同：0
> 
> 时间：2013-02-19T13:09:43.630
> 
> 标签：php, arrays, if-statement

目前，我正在做这样的事情：

```
if ( in_array ( $variable, ["a","b","c"] ) ) { ... } 
```

读起来容易一点

```
if ( $variable == "a" || $variable == "b" || $variable == "c" ) { ... } 
```

但我想知道，有没有更有效的方法，而不是检查数组中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:13:46.707

像这样试试

```
$my_array = array_flip(array('a', 'b', 'c', 'd', ...));
if (isset($my_array[$variable])) ... 
```

创建 $my_array 需要一次性 O(n) 成本，然后检查匹配项是 O(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:30:07.177

您可以使用**switch case**语句针对多个值检查变量。

请参考下面提到的代码片段

例如

```
 switch($a)
  {
      case 'a':
    //do something
      break;
     case 'b':
     //do something
     break; 
    case 'c':
    //do something
    break;
  } 
```

# graphviz - 点：名称中的破折号

> ID：14958346
> 
> 赞同：27
> 
> 时间：2013-02-19T13:09:44.113
> 
> 标签：graphviz, dot

节点名称中是否可以有破折号？我尝试用反斜杠转义（搜索网络也没有帮助）。例子：

```
digraph test {
    some-name -> other-name;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T13:14:42.487

只需将节点名称包含在双引号中，如下所示：

```
digraph test {
    "some-name" -> "other-name";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T13:27:06.613

由于我遇到了这个问题，因此子图名称也是如此：

```
digraph G {
    {node "A-1"}
    {node "B"}
    subgraph "A-1B" {edge [dir=none]"A-1" -> "B"}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-11T20:30:14.513

您还可以使用类似标识符的名称（即没有空格、破折号等），但也可以通过首先显式声明节点来提供更好的名称作为`label`属性。

```
digraph D {
  nodeA [label="Node A"];
  nodeB [label="Node B"];
  nodeA -> nodeB;
} 
```

# sql - SQL Azure 表关系

> ID：14958355
> 
> 赞同：1
> 
> 时间：2013-02-19T13:10:22.070
> 
> 标签：sql, sql-server, azure

我有一个简单的数据库模式。

表**TAGS**和表**USERS**。

如何使用 List of TAGS 在 USERS 表中创建一列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:11:25.797

听起来最有可能发生`Many-to-Many`关系。

用户表

*   用户 ID ( **PK** )
*   用户名
*   其他领域...

标签表

*   标签 ID ( **PK** )
*   标签名称
*   其他领域...

用户标签链接表

*   用户 ID ( **FK** )
*   标签 ID ( **FK** )

你需要加入两个表

```
SELECT  a.*, c.*    -- <<== select the columns you want to display
FROM    Users a
        INNER JOIN UserTagLink b
            ON a.UserID = b.UserID
        INNER JOIN Tags c
            ON b.TagID = c.TagID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# netbeans - ctree java的odbc驱动程序

> ID：14958356
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:10:22.147
> 
> 标签：netbeans, connection, odbc, driver

我正在用 netbeans 做一个 java 应用程序，我需要使用 odbc 提供一个连接，但我没有找到驱动程序，因为要连接的数据库是一个 faircom db。任何人都有下载用于 db connection faircom 的库 java (jar) 的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:58:26.477

FairCom 有一个 JDBC 驱动程序，可以通过 c-treeACE SQL Server 访问 FairCom (c-tree) 数据。

这是 FairCom 网站上的页面链接，您可以在其中下载 c-treeACE 的 Express 版本，其中包括 c-treeACE SQL Server 和 JDBC 驱动程序：

[http://www.faircom.com/ace/download_t.php](http://www.faircom.com/ace/download_t.php)

# iphone - iOS5 内容视图控制器阻止自定义容器视图控制器上的滚动视图

> ID：14958358
> 
> 赞同：0
> 
> 时间：2013-02-19T13:10:31.537
> 
> 标签：iphone, ios, uiscrollview, parent-child, ioc-container

为了向后兼容 iOS5，我不能使用故事板的自定义视图功能。

我有一个视图控制器，顶部有一个水平滚动菜单。滚动视图由几个按钮组成，每个按钮以不同的方式显示不同的内容，所以我想要一个子视图控制器来显示每个内容。

这张图片更好地解释了我正在尝试做的事情。

![在此处输入图像描述](../Images/35e688f62a2cdc43cc22679e61110255.png)

按照 Apple 的开发人员指南，我尝试将内容视图控制器添加为主视图控制器的子级。一旦子视图控制器出现，带有按钮菜单的滚动视图就会停止滚动。我被这个问题困住了，我不知道为什么。

这是代码：

主视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.menuScrollView.frame = CGRectMake(0, kScrollViewMarginTop, self.view.frame.size.width, kScrollViewHeight);
    self.menuScrollView.showsHorizontalScrollIndicator = NO;
    self.menuScrollView.pagingEnabled = YES;

    self.firstMenuButton.selected = YES;
}

- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    self.menuScrollView.contentSize = CGSizeMake(kScrollViewContentWidth, kScrollViewHeight);
}

- (IBAction)menuButtonTapped:(id)sender{

    UIButton *button = (UIButton *)sender;

    switch (button.tag) {
        case 0:
            if (![self.firstMenuButton isSelected]) {
                self.firstMenuButton.selected = YES;
                [self.firstMenuButton setBackgroundImage:[UIImage imageNamed:@"firstMenuButton_selected.png"] forState:UIControlStateSelected];
                [self deselectButtonsExceptButtonWithTag:button.tag];

                //Shows the first content
                UIViewController *contentViewController = (UITableViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"firstControllerStoryboardID"];
                [self displayContentViewController:contentViewController];
            }
            break;

      default:
            break;
    }   
}

- (void)displayContentViewController:(UIViewController *)viewController{

    [self addChildViewController:viewController];

    viewController.view.frame = CGRectMake(0, self.menuScrollView.frame.origin.y + self.menuScrollView.frame.size.height + 5.0, 320.0, 200.0);

    [self.view addSubview:viewController.view];
    [viewController didMoveToParentViewController:self];
} 
```

我尝试在 iOS6 中通过故事板实现它并且它有效，所以我不知道我做错了什么。

任何帮助都非常感谢干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:00:07.957

我修复了从情节提要中禁用 AutoLayout 选项的问题

# php - 如何通过 HTTP 下载 URL 中带有 unicode 字母的图像？

> ID：14958359
> 
> 赞同：2
> 
> 时间：2013-02-19T13:10:33.427
> 
> 标签：php, http, curl, download

如何使用 PHP 下载以下 URL（图像）`http://www.delo.si/assets/media/picture/20121228/POLITIČNI05 tomi lombar.jpg?rev=2`：？

问题是 PHP 不知何故不支持 URL 中的 unicode 字母（见`Č`那里的字母？）。我试过同时使用`file_get_contents`cURL 和 cURL，都没有。贝娄是我的非工作代码。

**`file_get_contents`：**

```
$url = "http://www.delo.si/assets/media/picture/20121228/POLITIČNI05 tomi lombar.jpg?rev=2";
$stream_context = array('http' => array( 
    'method'=>"GET", 
    'header'=>"Content-Type: text/html; charset=utf-8" 
));
$image_contents = file_get_contents($url, false, stream_context_create($stream_context));
file_put_contents("image.jpg", $image_contents); 
```

**卷曲：**

```
$url = "http://www.delo.si/assets/media/picture/20121228/POLITIČNI05 tomi lombar.jpg?rev=2";
$ch = curl_init($url);
$fp = fopen('image.jpg', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8");
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/html; charset=utf-8"));
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

**“不起作用”是** 什么意思：我所说的“不起作用”的意思是，我下载的图片与将 URL 粘贴到浏览器中的图片不同。这个网站显然设置了后备图片，所以如果图片不存在，你会得到默认的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:24:07.960

您应该可以在图像名称周围使用[urlencode() 。](http://php.net/manual/en/function.urlencode.php)所以：

```
header('Content-type: image/jpg');
$img = 'http://www.delo.si/assets/media/picture/20121228/' . rawurlencode('POLITIČNI05 tomi lombar').'.jpg?rev=2';
readfile($img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T20:39:30.913

您可以使用 utf8_encode 引用 unicode 字符

```
$url = "http://www.delo.si/assets/media/picture/20121228/POLITIČNI05 tomi lombar.jpg?rev=2";

$url = utf8_encode(str_replace(' ','%20',$url)); 
```

# c++ - 将两个 8 位数组组合成一个 USHORT (16 位) ，没有循环

> ID：14958360
> 
> 赞同：1
> 
> 时间：2013-02-19T13:10:36.683
> 
> 标签：c++, c

我需要在 C 中将两个`UCHAR`（8 位）数组组合成一个`USHORT`（16 位）值。但我必须在不使用“for”或任何循环的情况下这样做。

作为：

```
UCHAR A[1000], B[1000];
USHORT C[1000]; 
```

结果必须为：

```
C[0] = {A[0], B[0]};
C[1] = {A[1], B[1]};
...
C[1000]={A[1000], B[1000]}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:13:22.687

```
uint8_t one = 0xBA;
uint8_t two = 0xBE;

uint16_t both = one << 8 | two; 
```

**更新：** 也许我还没有理解你的问题......但是如果你想将一个 uint8_t 数组转换为一个 uint16_t 数组-> 检查大小并强制转换

```
uint8_t array[100];
uint16_t array_ptr_ushort* =(uint16_t*)&array[0]; 
```

确保数组的大小是均匀的。

**更新2：**

```
uint8_t array1[100];
uint8_t array2[100];
uint16_t combined[100];

memcpy(combined, array1, sizeof(array1))
memcpy((uint8_t*)combined + sizeof(array1), array2, sizeof(array2)) 
```

**更新3：**

您不能在没有某种循环的情况下将两个数组组合在一个连续数组中，即使您为此使用 DMA，循环也会存在于底层硬件中......

**更新4：**

您可以递归地执行此操作。

```
#include "stdafx.h"
#include <cstdint>
#include <algorithm>

uint8_t arrayA[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
uint8_t arrayB[] = {0xA, 0x9, 0x8, 0x7, 0x6, 0x5, 0x4, 0x3, 0x2, 0x1};
uint16_t array_combined[sizeof(arrayA)] = {};
static_assert(sizeof(arrayA) == sizeof(arrayB), "Arrays of different sizes");

uint16_t combine(const uint8_t *a, const uint8_t *b, uint16_t *put, uint32_t size)
{
    uint16_t value = (*a << 8) | *b;
    if(size)
        *put = combine(++a, ++b, ++put, --size);
    return value;
}

void combine_arrays(const uint8_t *a, const uint8_t *b, uint16_t *put, uint32_t size)
{
    *put = combine(a, b, put, size);
}

int _tmain(int argc, _TCHAR* argv[])
{

    combine_arrays(arrayA, arrayB, array_combined, sizeof(arrayA));

return 0;
} 
```

**UPDATE5：**带有来自 C++ 的 static_assert 的 C 版本

```
#include <stdint.h>

uint8_t array1[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
uint8_t array2[] = {0xA, 0x9, 0x8, 0x7, 0x6, 0x5, 0x4, 0x3, 0x2, 0x1};
uint16_t array_combined[sizeof(array1)] = {};
static_assert(sizeof(array1) == sizeof(array2), "Arrays of different sizes");

int _tmain(int argc, _TCHAR* argv[])
{

    int size = sizeof(array1);
    int count = 0;
    do
    {
        array_combined[count] = (array2[count] << 8) | array1[count];
    }while(count++ != size);

    return 0;
} 
```

**UPDATE6：**也有 C++ 方法来实现这一点......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:13:39.790

```
ushortVal = ( ucharVal[0] << 8 ) | ucharVal[1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:14:08.443

对于单个元素，您可以**将**第一个字节**按位向左移动 8 位，然后使用****按位或**添加第二个字节：

```
C[i] = (A[i] << 8) | B[i]; 
```

但是对于数组，您基本上想将两个数组“分散”到第三个数组中，如下所示：

```
A[0] B[0]  |  A[1] B[1]  |  A[2] B[2]  |  ...  |  A[n-1] B[n-1]

   C[0]    |     C[1]    |     C[2]    |  ...  |     C[n-1] 
```

这意味着如果数组的第一个元素`C`存储在地址`0`，则数组中的元素`A`应位于地址 0、16、32、48...，而数组中的元素应`B`位于地址 8、24...恕我直言**，不使用任何循环就无法完成**

# xml - 如何使用ajax编写xml文件

> ID：14958365
> 
> 赞同：0
> 
> 时间：2013-02-19T13:10:50.840
> 
> 标签：xml, ajax

我正在尝试使用 Ajax 创建和编写 XML 文件。我的场景是当用户输入用户名和密码时，我的移动 Web 应用程序中有一个登录窗口，输入的数据应通过 XML 文件发送到服务器。

在此，我需要通过 Ajax 创建和编写包含用户名和密码元素的 XML 文件。我谷歌并不清楚如何实现它。

我的疑问是，

*   我可以使用 Ajax 创建 XML 文件吗？
*   如果是这样，我如何从 Ajax 创建和编写 XML 元素。

任何人都可以建议我一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:14:59.897

> 当用户输入用户名和密码时，我的移动 Web 应用程序中有一个登录窗口，输入的数据应通过 XML 文件发送到服务器

使用 XML 会使该任务变得过于复杂。使用 application/x-www-form-urlencoded 数据会简单得多。

> 我可以使用 Ajax 创建 XML 文件吗

不可以。您可以使用 Ajax 发出 HTTP 请求。

您可以将该 HTTP 请求设为 POST 请求，并在其正文中包含一个 XML 文档。

> 如果是这样，我如何从 Ajax 创建和编写 XML 元素。

如果我要这样做（我不会这样做，见上文），我会将模板 XML 文档存储在字符串中，使用 DOM 解析器对其进行解析，对其进行操作以添加数据，然后将其序列化回 XML。请参阅[MDN 上的解析和序列化 XML](https://developer.mozilla.org/en/docs/Parsing_and_serializing_XML)

# java - 关于在 Java 中使用画布为 Android 绘制形状和路径的一些问题？

> ID：14958372
> 
> 赞同：0
> 
> 时间：2013-02-19T13:11:01.957
> 
> 标签：java, android

如何找到屏幕的坐标？我知道例如电话会说 960 x 540 的分辨率，但在模拟器中，如果我按照该分辨率绘制形状，则某些边缘不会被填充。有没有解决的办法？

对于矩形的颜色，可以看到有两个矩形，尽管为 drawPaint 提供了两种不同的颜色，但其中两个具有相同的颜色。只需设置一个新变量，例如 drawPaint2 就会返回错误。如何改变两者的颜色？

如何在画布中使用路径功能。例如画一个三角形？我已将我的尝试包含在代码中，但它没有显示三角形。

```
 public class DrawView extends View implements OnTouchListener
{

    private Paint backgroundPaint = new Paint();
    private Paint drawPaint = new Paint();
    private Paint circlePaint = new Paint();
    private Paint textPaint = new Paint();
    private Paint path = new Paint();
    private float sx, sy;

    public DrawView(Context context)
    {
        super(context);         

        setFocusable(true);
        setFocusableInTouchMode(true);

        backgroundPaint.setColor(Color.CYAN);
        backgroundPaint.setAntiAlias(true);
        backgroundPaint.setStyle(Style.FILL);

        drawPaint.setColor(Color.WHITE);
        drawPaint.setStyle(Style.FILL);

        circlePaint.setColor(Color.DKGRAY);
        circlePaint.setStyle(Style.FILL);

        textPaint.setColor(Color.WHITE);
        textPaint.setStyle(Style.FILL);

        drawPaint.setColor(Color.GREEN);
        drawPaint.setStyle(Style.FILL);

        circlePaint.setColor(Color.RED);
        circlePaint.setStyle(Style.FILL);

        path.setColor(android.graphics.Color.RED);
        path.setStyle(Paint.Style.FILL);            
        Path path = new Path();
        path.moveTo(1, 1);
        path.lineTo(20, 50);
        path.moveTo(20, 50);
        path.lineTo(100, 100);
        path.moveTo(100, 100);
        path.lineTo(1, 1);
        path.close();

        this.setOnTouchListener(this);
    }

    @Override
    public void onDraw(Canvas canvas)
    {

        //canvas.drawPath(path, paint); <-- error

        // to draw background
        canvas.drawRect(this.getLeft(), this.getTop(), this.getRight(), this.getBottom(), backgroundPaint);

        //to draw two rectangle with blue and green paint
        canvas.drawRect(100,100, 340,540, drawPaint); 
        canvas.drawRect(00,00, 120,80, drawPaint); 

        //draw text with paint
        canvas.drawText("Hello Dear Leader!", 110, 160, textPaint);

        //draw a circle with green paint with the touch coordinates
        canvas.drawCircle(sx-30,sy-30, 30, circlePaint);

        //draw a circle with red paint with the touch coordinates
        canvas.drawCircle(sx-80, sy-80, 10, circlePaint);

    }

    public boolean onTouch(View v, MotionEvent event)
    {   
        //update the coordinates for the OnDraw method above, with wherever we touch
        sx = event.getX();
        sy = event.getY();

        invalidate();
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:28:31.427

对于您可以轻松调用的尺寸`canvas.getWidth()`，`canvas.getHeight()`并按百分比计算您的所有值。永远不要假设一个常数！

您需要使用两个单独的 Paint 来使用两种不同的颜色。请记住，每幅画都是需要初始化的对象。

```
// objects
private Paint drawPaint_WH = new Paint();
private Paint drawPaint_GR = new Paint();

// during construction
drawPaint_WH.setColor(Color.WHITE);
drawPaint_WH.setStyle(Style.FILL);

drawPaint_GR.setColor(Color. GREEN);
drawPaint_GR.setStyle(Style.FILL);

// and then during draw()
canvas.drawRect(100,100, 340,540, drawPaint_WH); 
canvas.drawRect(0,0, 120,80, drawPaint_GR); 
```

然后制作一个三角形：

```
// object
private Path trianglePath;

// during construction
trianglePath = new Path();
trianglePath.moveTo(10, 10); // starting point
trianglePath.lineTo(10, 50); // 1st vertix
trianglePath.lineTo(50, 10); // 2nd vertix
trianglePath.lineTo(10, 10); // 3rd vertix and close

// then during draw()
canvas.drawPath(trianglePath, drawPaint_GR) // or whatever paint you want 
```

ps.：给背景上色更容易调用`canvas.drawColor(int colorVal);`

# linux - Shell - 创建附加内容的文本文件 - 使用 cat

> ID：14958373
> 
> 赞同：2
> 
> 时间：2013-02-19T13:11:08.053
> 
> 标签：linux, bash, shell, debian

例如，我有以下代码：

```
rm /etc/rc.local
cat <<EOF >/etc/rc.local
#!/bin/sh -e
apt-get update && apt-get -y install git-core
EOF 
```

有没有办法代替它，所以我不需要删除原始的 rc.local 并创建一个新的，但是我可以使用几乎相同的代码，但将此内容**附加**到 rc.local 文件的底部，而不是重新创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:15:40.467

试试这个 ：

```
cat <<EOF >>/etc/rc.local

apt-get update && apt-get -y install git-core
EOF 
```

或者简单地说：

```
echo 'apt-get update && apt-get -y install git-core' >> /etc/rc.local 
```

# c# - 将元素从一个列表添加到另一个列表时出现 IOException

> ID：14958382
> 
> 赞同：0
> 
> 时间：2013-02-19T13:11:38.463
> 
> 标签：c#, .net, filestream

尝试将从二进制文件读取的元素添加到`BindingList<Type>`. 这是错误的代码：

```
BindingList<Type> tmpList = null;
using (FileStream serializedListStream = File.OpenRead(_kReificableDroidsListPath))
{
   BinaryFormatter serializer = new BinaryFormatter();

   //Temporary list so that ListChanged event is fired
   //upon adding new types
   tmpList = serializer.Deserialize(serializedListStream) as BindingList<Type>;
   foreach (Type droidType in tmpList)
   {
       ReificableDroids.Add(droidType);
   }
} 
```

Visual Studio 调试器向我显示此异常：

`System.IO.IOException: The process cannot access the file 'C:\Users\Zoneur\documents\visual studio 2012\Projects\Droid TP1\Droid TP2\bin\Debug\reificable_droids_list.bin' because it is being used by another process.`

我的理解是该文件需要关闭，所以我将`foreach`循环从`using`语句中取出，如下所示：

```
BindingList<Type> tmpList = null;
using (FileStream serializedListStream = File.OpenRead(_kReificableDroidsListPath))
{
   BinaryFormatter serializer = new BinaryFormatter();

   //Temporary list so that ListChanged event is fired
   //upon adding new types
   tmpList = serializer.Deserialize(serializedListStream) as BindingList<Type>;
}
foreach (Type droidType in tmpList)
{
    ReificableDroids.Add(droidType);
} 
```

不再抛出异常，但我不明白问题是什么......`ReificableDroids`是 type 的属性`BindingList<Type>`。

另外，如果我将`foreach`循环保留在`using`语句中，并且只将类型名称打印到控制台，如下所示：

```
foreach (Type droidType in tmpList)
{
    Console.WriteLine(droidType.GetType().ToString());
} 
```

也没有抛出异常。

有谁知道什么可能导致在 using 语句中引发此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:13.360

我看不出这个异常可能与您循环加载数据的地方有关。它一定是相关的，这里没有显示。

清单：

*   这种行为发生了多少次？
*   您是否处理`AddingNew`或`ListChanged`再次`BindingList`从那里访问文件？
*   您是否对显示的方法有多个并发调用？

# ajax - 带有分页的表格排序器会影响部分视图数据

> ID：14958389
> 
> 赞同：2
> 
> 时间：2013-02-19T13:12:23.217
> 
> 标签：ajax, tablesorter, asp.net-mvc-partialview, jquery-pagination

我在部分视图中使用带有分页功能的 tablesorter。部分视图正在视图页面中使用 ajax 加载，以防止刷新页面。如果我只应用 tablesorter 它工作正常。但是当我使用 tablesorter 应用分页时，它没有给出正确的输出。

我的页面中有下拉列表，当我在下拉列表中选择值时，它会完美加载数据并且排序和分页工作正常，如下所示：

![在此处输入图像描述](../Images/db69f898880ee7912fc89d8e5f622dec.png)

但是当我第二次从下拉列表中选择另一个值时。数据未显示。

![在此处输入图像描述](../Images/e0b585eed8c7e6d4c0f0f657c0291d94.png)

如果我只使用不分页的tablesorter 每次我在下拉列表中选择不同的值时它都可以正常工作。

这可能是什么原因？

这是我的视图页面代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Search MDLNoWise
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<fieldset>
<legend>Search by MDLNo</legend> 
<div id="search">
<br /><br />
Select MDLNo
<%: 
Html.DropDownListFor(
      model => model.Request_For_Id, 
      ViewData["MDLno"] as SelectList, "--Select--", new {id ="Request_For_Id" })

%>
<br /><br />

<div id="viewlist"> 
</div>
</div>
</fieldset>
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
    <link href="../../Content/Styles/blue.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(function () {

        $('#Request_For_Id').change(function () {
            var mdlno = document.getElementById("Request_For_Id").value;

            $.ajax({
                url: '/Search/MDLNoDataList/',
                type: "POST",
                data: {
                    id: mdlno
                },
                dataType: "html",
                success: function (data) {
                    $("#viewlist").html(data);
                },
                error: function () {
                    alert("No Records Found");
                    //$("#viewlist").html('No Records Found');
                }
            });

        });
    });
</script>
</asp:Content> 
```

这是我使用带有分页的 tablesorter 的部分视图。

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>>" %>
<%--<script src="@Url.Content("../../Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("../../Scripts/jquery.tablesorter.js")" type="text/javascript"></script>
    <script src="@Url.Content("../../Scripts/jquery.tablesorter.pager.js")" type="text/javascript"></script>--%>
<script src="../../Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.tablesorter.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.tablesorter.pager.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $("table.tablesorter").tablesorter()
                              .tablesorterPager({ container: $("#pager"), size: $(".pagesize option:selected").val() });
    });
    </script>
    <div>
<table class="tablesorter">
<thead> 
    <tr>
        <th>
            Request_For_Id
        </th>
        <th>
            Territory
        </th>
        <th>
            Estimated_Amount
        </th>
        <th>
            Actual_Amount
        </th>
        <th>
            Date_Created
        </th>
        <th>
            Compute_CRM_State
        </th>
        <th>
            Compute_Event_Type
        </th>
    </tr>
    </thead> 
    <tbody>
    <% foreach (var item in Model)
       { %>
     <tr>
        <td>
            <%: Html.DisplayFor(modelItem => item.Request_For_Id)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Territory)%>
        </td>

        <td>
            <%: Html.DisplayFor(modelItem => item.Estimated_Amount)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Actual_Amount)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Date_Created)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_CRM_State)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_Event_Type)%>
        </td> 
    </tr>
    <%} %>
    </tbody>

</table>

<div id="pager" style="position: none;">

            <img src="../../Content/images/first.png" class="first" />
            <img src="../../Content/images/prev.png" class="prev" />
            <input type="text" class="pagedisplay" />
            <img src="../../Content/images/next.png" class="next" />
            <img src="../../Content/images/last.png" class="last" />
            <select class="pagesize">
                <option selected="selected" value="1">1</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
            </select>

        </div>
        </div> 
```

# delphi - 我需要在 Delphi 中完成记录数组吗？

> ID：14958392
> 
> 赞同：17
> 
> 时间：2013-02-19T13:12:28.393
> 
> 标签：delphi, record, dynamic-arrays, delphi-6, finalization

在我的申请中，我有以下记录：

```
TTransaction = record
  Alias: string
  Description: string
  Creation: TDateTime
  Count: Integer
end; 
```

我在这个数组中使用这个记录：

```
Transactions = array of TTransaction; 
```

我在运行时保持数组加载，但在给定时间我需要清除所有数据并添加一些新数据。

仅使用以下内容是否足够：

```
SetLength(Transactions, 0); ? 
```

还是我需要完成一些事情？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T13:27:08.100

有三种方法可以释放与动态数组关联的内存`a`：

```
SetLength(a, 0);
Finalize(a);
a := nil; 
```

使用哪一个取决于您。

[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays)也说了同样的话，尽管方式有点绕：

> 要释放动态数组，请将 nil 分配给引用数组的变量或将变量传递给 Finalize；只要没有其他对它的引用，这些方法中的任何一个都会处理数组。动态数组在引用计数降至零时自动释放。长度为 0 的动态数组的值为 nil。

这将释放与数组关联的所有内存，包括您的记录类型拥有的任何嵌套托管类型，例如字符串、动态数组等。

如果您需要调整数组的大小以供将来使用，并且有可用的新数据，只需使用 调整大小`SetLength`，并适当地初始化剩余的元素。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T13:23:49.700

将数组长度设置为零将破坏数组，这与您“保持数组加载”的愿望背道而驰。但是，它将*释放*所有记录及其字符串的内存（对于当时引用计数为 1 的任何字符串）。

如果您只想为字符串释放内存，但保留分配的记录内存（因为您计划在之后立即分配另一组记录，并且您不希望浪费释放和重新分配相同的内存），那么您可以只清除字符串成员，但没有单个库调用可以为您执行此操作。相反，您需要自己编写一个循环并清除每条记录的字段。

```
for i := 0 to High(transactions) do begin
  transactions[i].alias := '';
  transactions[i].description := '';
end; 
```

如果记录中有很多字段需要清除，那么`TTransaction`为数组的每个元素分配一个默认值可能会更方便。您可以使用该`Default`函数，或者在旧版本的 Delphi 中，您可以声明`TTransaction`所有字段都已清除的 a：

```
const
  ClearTransaction: TTransaction = (alias: ''; description: ''; creation: 0; count: 0);

for i := 0 to High(transactions) do
  transactions[i] := ClearTransaction;
  // or
  transactions[i] := Default(TTransaction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:21:40.357

`SetLength (transactions,0)`这不是一个好主意。我认为最好的方法是重新初始化所有记录的成员。这样，您可以保持变量加载。

如果您不再需要该变量，则可以`SetLength (transactions,0)`使用尽可能少的内存。当然，如果你在程序的某个地方再次需要它，你可以重新调整它的长度，假设你知道它。

你不需要完成任何事情，因为它是一个记录，而不是一个类。记录没有*构造函数*或*析构函数*，就像类一样。

# objective-c - Objective-C：从外部应用程序获取详细的菜单信息

> ID：14958395
> 
> 赞同：2
> 
> 时间：2013-02-19T13:12:47.180
> 
> 标签：objective-c, macos, cocoa, menubar, scripting-bridge

这个问题（[Objective-C: get menu information from external application](https://stackoverflow.com/questions/11444033/objective-c-get-menu-information-from-external-application)）展示了如何在 OS/X 上获取外部应用程序的顶级菜单项。但它没有显示如何向下迭代到较低级别的菜单。它也没有显示如何获取那些具有它们的菜单项的快捷键。我玩过代码，但我对 Objective-C 的无知使我退缩了。我如何获取此代码：

```
SystemEventsApplication* sevApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.systemevents"];
SystemEventsProcess* proc = [[sevApp applicationProcesses] objectWithName:appName];

for (SystemEventsMenuBar* menuBar in proc.menuBars) {
    for (SystemEventsMenuBarItem* menuBaritem in menuBar.menuBarItems) {
        NSLog(@"%@", menuBaritem.name);
    }
} 
```

并获取菜单详细信息？

# java - 如何调整 PdfPTable 的大小以适合页面？

> ID：14958396
> 
> 赞同：3
> 
> 时间：2013-02-19T13:12:49.383
> 
> 标签：java, itext

我正在生成一个文档，就像下面的代码一样，当然除了表格的内容，这些内容是不同的。我需要做的是确保该表格的大小永远不会超过一页，无论单元格中的内容量如何。有没有办法做到这一点？

```
导入 com.itextpdf.text.Phrase；
导入com.itextpdf.text.Document；
导入 com.itextpdf.text.DocumentException；
导入com.itextpdf.text.PageSize；
导入com.itextpdf.text.pdf.PdfPCell；
导入com.itextpdf.text.pdf.PdfPTable；
导入 java.awt.Desktop；
导入java.io.File；
导入 java.io.FileNotFoundException；
导入 java.io.FileOutputStream；
导入 java.io.IOException；public void createTemplate() 抛出 DocumentException、FileNotFoundException、IOException{
        字符串目标 = System.getProperty("user.home")+"\temp.pdf";

        文档 document = new Document(PageSize.A4);
        PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(TARGET));
        文档.open();

 PdfPTable table = new PdfPTable(7);         

    for (int i = 0; i < 105; i++) {
        Phrase p = new Phrase("some text");
        PdfPCell cell = new PdfPCell();
        cell.addElement(p);
        table.addCell(cell);            
    }

    table.setTotalWidth(PageSize.A4.getWidth()-10);
    table.setLockedWidth(true);
    PdfContentByte canvas = writer.getDirectContent();
    PdfTemplate template = canvas.createTemplate(table.getTotalWidth(),table.getTotalHeight());
    table.writeSelectedRows(0, -1, 0, PageSize.A4.getHeight(), template);
    Image img = Image.getInstance(template);
    img.scaleToFit(PageSize.A4.getWidth(), PageSize.A4.getHeight());
    img.setAbsolutePosition(0, PageSize.A4.getHeight());
    document.add(img);
    document.close();

    Desktop desktop = Desktop.getDesktop();
    File file = new File(TARGET);
    desktop.open(file);    } 
```

编辑：@Bruno Lowagie。包含在图像中的模板的提示对我来说听起来恰到好处，我据此更改了代码，但我现在得到的只是一个空的 PDF。我做错了什么，或者这完全是错误的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T14:10:23.613

如果您希望表格适合页面，则应在考虑页面大小之前创建表格并询问表格的高度，如[TableHeight](http://itextpdf.com/examples/iia.php?id=80)示例中所做的那样。请注意，`getTotalHeight()`除非您定义表格的宽度，否则该方法将返回 0。这可以这样做：

```
 table.setTotalWidth(width);
    table.setLockedWidth(true); 
```

现在您可以创建一个`Document`带有大小`Rectangle(0, 0, width + margin * 2, getTotalHeight() + margin * 2)`的表格，并且当您使用该`writeSelectedRows()`方法添加表格时，表格应该完全适合文档。

如果您不想要自定义页面大小，那么您需要创建一个`PdfTemplate`具有大小的表格并将表格添加到此模板对象中。然后将模板对象包装在一个中`Image`并用于`scaleToFit()`缩小表格的大小。

```
public static void main(String[] args) throws DocumentException, FileNotFoundException, IOException {
    String TARGET = "temp.pdf";
    Document document = new Document(PageSize.A4);
    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(TARGET));
    document.open();

    PdfPTable table = new PdfPTable(7);         

    for (int i = 0; i < 700; i++) {
        Phrase p = new Phrase("some text");
        PdfPCell cell = new PdfPCell();
        cell.addElement(p);
        table.addCell(cell);            
    }

    table.setTotalWidth(PageSize.A4.getWidth());
    table.setLockedWidth(true);
    PdfContentByte canvas = writer.getDirectContent();
    PdfTemplate template = canvas.createTemplate(table.getTotalWidth(), table.getTotalHeight());
    table.writeSelectedRows(0, -1, 0, table.getTotalHeight(), template);
    Image img = Image.getInstance(template);
    img.scaleToFit(PageSize.A4.getWidth(), PageSize.A4.getHeight());
    img.setAbsolutePosition(0, (PageSize.A4.getHeight() - table.getTotalHeight()) / 2);
    document.add(img);
    document.close();
} 
```

# apache-flex - Flex：将 mx:FormItems 并排放置在 mx:Form 中

> ID：14958397
> 
> 赞同：0
> 
> 时间：2013-02-19T13:12:52.757
> 
> 标签：apache-flex, flex3, mxml

我有一个 mx:Form 包含两个 FormItems。默认情况下，FormItems 垂直放置在另一个之上，但由于空间限制，我想将两个 FormItems 并排放置。我该怎么做？我的另一个选择是仅使用纯标签和文本字段，但我想利用 mx:Form 容器提供的功能。我有以下代码垂直放置数据：

```
<mx:HBox width="100%"
     horizontalAlign="center">
    <mx:Label text="Info"/>
</mx:HBox>
<mx:Form id="InfoForm">
    <mx:FormItem label="Info1"
        horizontalAlign="center"
        paddingLeft="45"
        required="true"
        direction="vertical">
        <mx:TextInput id="Info1TextInput"/>
    </mx:FormItem>
    <mx:FormItem label="Info2"
        horizontalAlign="center"
        paddingLeft="45"
        required="true"
        direction="vertical">
        <mx:TextInput id="Info2TextInput"/>
    </mx:FormItem>
</mx:Form> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:37:50.900

好吧，我是如何使用 2 Forms 实现的。在水平布局中并排。希望这可以帮助。

# objective-c - 带有节点 js 服务器的 Objective-c 序列化字典

> ID：14958402
> 
> 赞同：2
> 
> 时间：2013-02-19T13:12:58.053
> 
> 标签：objective-c, json, node.js, nsdictionary

我有一个序列化的`NSDictionary`（事实上，它是一个应用内购买收据），我发送到`node.js`服务器：

```
{ "key 1" = "val 1";
  "key 2" = "val 2"; } 
```

我想在服务器端反序列化它，所以这就是我到目前为止所做的：

```
var jsonStr = dictStr.replace(/"\s*=\s*"/g, "\":\"").replace(/";\s/g,"\",").replace(/,\s*}/,"}");
var obj = JSON.parse(jsonStr); 
```

上面的代码工作得很好，但是如果我考虑到所有可能的情况，我当然会担心。这就是为什么我更喜欢有一个真正的 obj-c`NSDictionary`格式解析器。

可能有人可以推荐我一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-03T16:07:11.447

序列化`NSDictionary`在我看来几乎是 JSON，事实上，它非常接近 json，以至于我制作了一个简单的解析器（使用[jison](https://github.com/zaach/jison)），将序列化为`NSDictionary`JSON 字符串。你可以在[这里查看](https://github.com/Loknar/parser-NSDictionary-to-JSON)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:22:43.063

试试[JSONkit](https://github.com/johnezang/JSONKit)。有[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)，但我认为 JSONKit 仍然被证明更快。

# jquery - 如果条件在 jQuery 每个函数中不起作用

> ID：14958408
> 
> 赞同：0
> 
> 时间：2013-02-19T13:13:03.227
> 
> 标签：jquery

这是我的html：

```
<div>
  <li>
    <a href="#">link</a>
  </li>
  <li>
    <a href="#">link 2</a>
  </li>
  <li>
    <a href="#">link 3</a>
  </li>
</div> 
```

此 jQuery 代码运行良好：

```
$("div li").each(function() { 
    $('a', this).wrapInner("<span></span>");
}); 
```

然而，这破坏了代码，根本没有任何反应。

```
$("div li").each(function() {   
    $('a', this).wrapInner("<span></span>");        
        if $('span', this).height() > 10 {
            $(this).addClass('newClass');
        }

    }); 
```

我需要做的是在将跨度插入链接之后，我需要测量跨度的高度，如果它超过 10px，那么它包含的 li 将有一个 newClass 类应用于它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:16:00.280

像这样试试

```
$("div li").each(function() {   
$('a', this).wrapInner("<span></span>");        
    if ($('a span', this).height() > 10) {
        $(this).addClass('newClass');
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:18:17.010

此代码中没有跨度：

```
$("div li").each(function() {   
    $('a', this).wrapInner("<span></span>");        
        if $('span', this).height() > 10 {
            $(this).addClass('newClass');
        }
}); 
```

所以你需要先应用跨度，从“this”中选择找到它：

```
$("div li").each(function() {   
    $('a', this).wrapInner("<span></span>");        
    if ($(this).find('a span').height() > 10) {
        $(this).addClass('newClass');//adds the class to the li by the way.
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:18:24.107

将您的 if 条件用大括号括起来，如下所示：

```
$("div li").each(function() {   
$('a', this).wrapInner("<span></span>");        
    if ($('span', this).height() > 10) {
        $(this).addClass('newClass');
    }
}); 
```

[http://jsfiddle.net/7Ux2z/](http://jsfiddle.net/7Ux2z/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:18:27.523

```
if ($('span', this).height() > 10) {
        $(this).addClass('newClass');
    } 
```

您需要将 if 语句条件括在括号中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T13:18:42.767

您需要将`if`语句的条件括在括号中：

```
if ($('span', this).height() > 10) {
    $(this).addClass('newClass');
} 
```

如果您还没有（听起来您还没有），我建议您学习浏览器的开发人员工具是如何工作的 - 如果您使用的是 Firefox，[请安装 Firebug](http://getfirebug.com) - 这样您就可以自己进行这种基本的 JavaScript 调试.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T13:24:38.703

您缺少if 条件中**的中断 ()**

```
$("div li").each(function() {   
    $('a', this).wrapInner("<span></span>");        
        if ($('span').height() > 10) {
            $(this).addClass('newClass');
        }

}); 
```

*此外，您在 * li* *s之前和之后都缺少 ul 标签

```
<div>
  <ul>
    <li> <a href="#">link</a> </li>
    <li> <a href="#">link 2</a> </li>
    <li> <a href="#">link 3</a> </li>
  </ul>
</div> 
```

未测试。

# validation - PrimeFaces 在取消按钮上禁用验证

> ID：14958410
> 
> 赞同：22
> 
> 时间：2013-02-19T13:13:09.767
> 
> 标签：validation, jsf-2, primefaces

在一个表单中，我有一些带有两个 commandButton 的 inputText，一个 to`accept`和一个 to `cancel`。

如何仅禁用对取消按钮的验证？

```
<h:form id="detailsForm">
  <p:inputText id="editUsername" value="#{userController.editUser.usrUsername}" />
  <p:inputText id="editFirstName" value="#{userController.editUser.usrFirstName}" />
  <p:inputText id="editLastName" value="#{userController.editUser.usrLastName}" />
  <p:commandButton value="Accept" update=":detailsForm" actionListener="#{userController.onDetailsEditAccept}" />
  <p:commandButton value="Cancel" update=":detailsForm" actionListener="#{userController.onDetailsEditCancel}" />
</h:form> 
```

我已经尝试`required="false"`在字段上插入，但是没有用。我也尝试在字段上插入`<f:validateBean disabled="true" />`，但没有奏效。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T13:15:01.260

`immediate="true"`在您的 cancel 中使用该属性`commandButton`。*通过跳过Apply Request Values*、*Process Validations*和*Update Model Values*阶段，这将跳过表单的整个处理过程。

```
<p:commandButton value="Cancel" update=":detailsForm" actionListener="#{userController.onDetailsEditCancel}" immediate="true"/> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-19T13:25:48.123

使用取消按钮中的属性`process="@this"`。这将阻止提交整个表单。

或者您可以`p:button`改用（但是这没有`actionListener`属性）。请参阅[此其他 Q/A](https://stackoverflow.com/a/13904750/870122)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T10:04:50.553

如果您不想提交表单。你应该只使用`<p:button>`. 提交`<p:commandButton>`表单。

```
<p:button value="delete All"
action="#{reloadBean.purge}" update="@form"/> 
```

# html - 使用 jsp servlet 刷新时出现 404 错误

> ID：14958411
> 
> 赞同：0
> 
> 时间：2013-02-19T13:13:13.993
> 
> 标签：html, jsp, servlets

嗨，我是 jsp/servlets 的新手，我有一个关于相对或绝对路径的基本问题：我有以下层次结构，使用 netbeans：

```
Web Pages
|  |-Status
|     |-clientRequests.jsp
|  |-index.jsp
|  |-WEB-INF
|     |-professional.jsp 
```

`index.jsp`以及根路径中的 Status 文件夹和 `WEB-INF`文件夹。在 Status 文件夹中，我们有该`clientRequests.jsp`文件。在 WEB-INF 文件夹中，我们有该`professional.jsp`文件。

在 index.jsp 我已经完成了调度程序`professional.jsp`，在我有的专业 jsp`<iframe src="Status/clientsRequests.jsp"></iframe>` 里面`clientsRequests.jsp`我有

```
<%
        response.setHeader("Refresh", "5;url=../index.jsp");  
%> 
```

这意味着每 5 秒将刷新一次`clientsRequests.jsp`文件，然后转到“控制器”，即`index.jsp`. 现在我希望每 5 分钟刷新一次 iframe 而不是孔页。我的问题：在**第二次**刷新时它给了我 404。

我试着玩这个，我做了一些丑陋的事情，比如：

```
String a = (String)session.getAttribute("nav");
if(a == null){
    session.setAttribute("nav", "aaa");  
    response.setHeader("Refresh", "5;url=../index.jsp");  
}else{
    response.setHeader("Refresh", "5;url=index.jsp"); 
} 
```

和它的工作，但我不想像这样离开......你有什么建议吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:09:12.717

一种选择是`move the clientRequests.jsp to the same level as index.jsp`. 这样在你的代码中你总是可以做到这一点

```
response.setHeader("Refresh", "5;url=index.jsp"); 
```

一个优点是使用此设置，`<iframe src="Status/clientsRequests.jsp"></iframe>`可以将其添加到应用程序中的任何 JSP 页面，并且对 servlet 代码没有任何更改/影响

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:21:27.743

不知何故，您的响应也在为 iframe 的父级设置标题。将以下行放在clientsRequests.jsp 中。

```
<meta http-equiv="refresh" content="5"> 
```

# android - 本地化应用程序的 Android GCM 推送通知

> ID：14958412
> 
> 赞同：12
> 
> 时间：2013-02-19T13:13:14.500
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

我有一个支持 7 个国家（本地化和国际化）的 android 应用程序。应用程序功能和语言会根据设备区域设置而更改。我需要为此应用程序实现 GCM 推送通知。要求：

*   是否可以使用单个 GCM 帐户以 7 种不同的语言发送推送通知。
*   有没有办法以他们的设备本地语言显示推送通知。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T13:29:43.080

您可以采用 Ascorbin 建议的方法，也可以实现类似于 Apple 在推送通知中的方法：

您的服务器可以发送带有参数的 GCM 消息，该参数是消息的键。您的 Android 应用程序必须为每个可能的键包含应以 7 种语言中的每一种显示的字符串（使用 strings.xml 的多个副本）。然后你的应用程序中的 GCM 接收器将从服务器获取密钥并获取与其匹配的资源字符串（它会自动获取与设备的语言环境匹配的字符串）。这样您就不必担心服务器中的本地化问题。**这种方法的缺点是您的所有消息都必须在您的应用程序中进行预定义。**

您还可以像 Apple 一样向消息键添加参数。例如，服务器发送 key = "NEW_MAIL_FROM" 和 param1 = "John"。应用程序找到该键的字符串资源（假设设备使用英语语言环境）-“您有来自 {0} 的消息”-并将参数替换为 John，显示消息“您有来自 John 的消息”。具有不同区域设置的设备将以不同的语言显示消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:29:23.193

您可以在使用令牌发送的 GCM 注册后实现该服务器端，同时发送设备区域设置。然后通过本地化消息立即通知用户。

有效负载是“排序”的东西，通过它传递这么多信息并不是一个好主意。

* * *

另一方面，如果您有固定消息，您可以使用：

```
private void handleMessage(Intent intent) {
    // server sent key-value pairs
    String name_of_resource = intent.getExtra("message_id");

    int id = getResources().getIdentifier(name_of_resource, "string", getPackageName());
    if (id != 0) {
         String text = getString(id); // the text to display
         // generates a system notification to display here
    }
} 
```

有关处理接收到的数据，请参阅[http://developer.android.com/google/gcm/gcm.html#received_data](http://developer.android.com/google/gcm/gcm.html#received_data)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:15:42.373

当设备在您的服务器上注册时，让它们发送区域设置。因此，您可以拥有设备的区域设置组并以相应的语言发送消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-20T10:57:02.830

`title_loc_key`您可以使用和轻松本地化您的 GCM 通知`body_loc_key`。[这些密钥在 GCM 官方文档](https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#androidnotification)中列出。

更多细节可以在[这里](https://github.com/CrossGeeks/FirebasePushNotificationPlugin/blob/master/docs/LocalizedFirebasePushNotifications.md#android----push-notifications-localization)找到。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-23T07:55:45.933

1.  从服务器发送 GCM 推送（没有任何语言特定数据）。
2.  作为对推送的响应，客户端使用其语言作为查询参数对服务器进行 REST api 调用。
3.  服务器获取适当语言的文本并实时发送回客户端。

# yii - 使用 CCheckboxcolumn

> ID：14958413
> 
> 赞同：0
> 
> 时间：2013-02-19T13:13:15.550
> 
> 标签：yii

我是 yii 的新手。

我正在使用带有 CCheckBoxColumn 的 CGridView 来选择记录，但我不知道如何仅对所有检查的记录执行操作。有任何想法吗？我之前尝试过，但是当我单击提交按钮时，包括未选择的行在内的所有行都会被处理。

这是我在管理页面中的编码：

```
array(
       'id'=>'check-boxes',
       'name'=>'check-boxes',
       'class'=>'CCheckBoxColumn',
       'selectableRows' => '50',  
       'checked'=>"0",
    ), 
```

我不知道如何发布复选框值，每次我发布它时，它都会给出复选框 [] 的值。

我使用以下编码提交它：

```
 echo CHtml::ajaxLink('Submit', Yii::app()->createUrl('controller/action'),
    array(
       'type'=>'POST',
       'data'=>'js:{ids : $.fn.yiiGridView.getChecked("grid-id","check-boxes")}'
    )); 
```

但是当我使用它时什么也没有发生。

我们应该如何在控制器中传递值以及控制器如何工作？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T11:56:17.900

```
public function actionActionName()
{

    if(isset($_POST['check-boxes'])){
        foreach ($_POST['check-boxes'] as $id){
            $model = $this->loadModel($id);
            CVarDumper::dump($id, 5, true);
        }
    }
    else
    CVarDumper::dump('Nothing is selected', 5, true);
} 
```

# javascript - 如何禁用AngularJS中的输入修剪？

> ID：14958418
> 
> 赞同：57
> 
> 时间：2013-02-19T13:13:31.470
> 
> 标签：javascript, angularjs

我发现了一些奇怪的行为：默认情况下角度修剪模型值。快速谷歌搜索并不能帮助我解决这个问题。我找到了`ng-no-trim`指示性提案，`ng-trim`等等。但没有任何效果。

我在下面提供了一个代表这个问题的小片段。

```
function Ctrl($scope) {
  $scope.text='';

  $scope.$watch('text', function (newValue) {
    console.log(newValue);
  });
} 
```

[你也可以在这里](http://jsbin.com/ibosub/1/edit)试试这个片段。

我添加了一个与 model 同步的 textarea `text`。但是当添加新的尾随空格或换行时，它不会对观看做出反应。

我能做些什么来关闭这种行为？谢谢。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-02-19T13:26:49.967

有问题的指令是 1.1.1 中的新指令；你可以看到它使用[JS Bin 片段](http://jsbin.com/ibosub/11/edit)工作。

```
<textarea cols="30" rows="10" ng-model="text" ng-trim="false"></textarea> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T17:22:18.063

Angular 1.0.x 的回退

```
var app = angular.module('app', []);

app.directive('ngTrim', function() {
    return {
        require: 'ngModel',
        priority: 300,
        link: function(scope, iElem, iAttrs, ngModel) {
            if (iAttrs.ngTrim === 'false') {
                // Be careful here. We override any value comming from the previous
                // parsers to return the real value in iElem
                ngModel.$parsers.unshift(function() {
                    return iElem.val();
                });
            }
        }
    }
});

angular.bootstrap(document, ['app']); 
```

[http://jsfiddle.net/vXCnj/3/](http://jsfiddle.net/vXCnj/3/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-03T18:39:30.013

您可以使用 ng-trim=true/false 启用/禁用修剪选项。参考[https://docs.angularjs.org/api/ng/input/input%5Btext%5D](https://docs.angularjs.org/api/ng/input/input%5Btext%5D)

# php - 查询路径，php 5.2

> ID：14958426
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:13:46.550
> 
> 标签：php, php-5.2, querypath

我在我的 PHP 中使用 Querypath。由于我的 linux 是不再支持的 Debian Lenny，我不知道如何将其更新为 debian Squeeze。我无法更新它的 php，因为 Lenny 不存在它（对于我阅读的内容）。

使用 Querypath 我得到这个错误：

> 解析错误：语法错误，意外的 T_FUNCTION，在第 61 行的 /var/www/vhosts/company/httpdocs/2013/inc/qp.php 中需要 ')'

这条线是：

```
spl_autoload_register(function ($klass) {
 $parts = explode('\\', $klass);
 if ($parts[0] == 'QueryPath') {
 $path = __DIR__ . '/' . implode('/', $parts) . '.php';
  if (file_exists($path)) {
    require $path;
  }
} 
```

你知道吗，我可以把它转换成“PHP Version 5.2.6-1+lenny13”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:06:28.267

PHP 5.2 不支持匿名函数。

相反，请尝试使用由字符串表示的命名函数：

```
function my_function($kclass) {
    $parts = explode('\\', $klass);
    if ($parts[0] == 'QueryPath') {
        $path = __DIR__ . '/' . implode('/', $parts) . '.php';
        if (file_exists($path)) {
            require $path;
        }
    }
}

spl_autoload_register('my_function'); 
```

# activeadmin - Rails：activeadmin，未定义的方法“per”用于#

> ID：14958438
> 
> 赞同：16
> 
> 时间：2013-02-19T13:14:04.773
> 
> 标签：activeadmin

我成功安装了 ActiveAdmin：

我的宝石文件代码：

来源“ [https://rubygems.org](https://rubygems.org) ”

```
 gem 'rails', '3.2.10'

 # Bundle edge Rails instead:
 # gem 'rails', :git => 'git://github.com/rails/rails.git'

 gem 'sqlite3'

 # Gems used only for assets and not required
 # in production environments by default.
 group :assets do
   gem 'sass-rails',   '~> 3.2.3'
   gem 'coffee-rails', '~> 3.2.1'

   # See https://github.com/sstephenson/execjs#readme for more supported runtimes
   # gem 'therubyracer', :platforms => :ruby

   gem 'uglifier', '>= 1.0.3'
 end

 gem 'jquery-rails'

 gem 'twitter-bootstrap-rails'

 gem 'activeadmin'

  # gem "meta_search",    '>= 1.1.0.pre'
 gem "spud_photos"
 gem 'devise'

 gem 'cancan'
 gem 'rolify' 
```

我这样做了：

```
 bundle
 rails g active_admin:install
 rake db:migrate
 rails g active_admin:resource product 
```

我将一些模型链接到 ActiveAdmin。

单击产品链接上的仪表板后出现错误：

```
 undefined method `per' for #<ActiveRecord::Relation:0x4d15ee0> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-28T11:56:58.330

Active Admin 需要[kaminari](https://github.com/amatsuda/kaminari)分页 如果您想使用 will paginate，您可以为 will paginate 函数创建别名以匹配 kaminari 之一：

```
# config/initializers/will_paginate.rb
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        alias_method :per, :per_page
        alias_method :num_pages, :total_pages
      end
    end
  end
end

module ActiveRecord
  class Relation
    alias_method :total_count, :count
  end
end 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-30T08:54:36.680

这个帮助了我：

```
 if defined?(WillPaginate)
   ActiveSupport.on_load :active_record do
     module WillPaginate
       module ActiveRecord
         module RelationMethods
           def per(value = nil) per_page(value) end
           def total_count() count end
         end
       end
       module CollectionMethods
         alias_method :num_pages, :total_pages
       end
     end
   end
 end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-23T21:10:52.367

您可以为 Kaminari 创建一个初始化程序，如下所示：

```
Kaminari.configure do |config|
  config.page_method_name = :per_page_kaminari
end 
```

根据我的经验，我必须重新启动服务器才能使其正常工作。就这样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-29T13:13:04.963

我正在使用 Ruby 2.1.5p273 和 Rails 4.1.8。我遇到了同样的问题。 **@mohamed-ibrahim**的回答解决了错误`underfined method 'per'`，但又出现了一个错误

> 显示 c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/bundler/gems/activeadmin-06bf79c58216/app/views/active_admin/resource/index.html.arb 其中第 2 行提出：错误的数量参数（0 代表 1）

添加`alias_method :total_count, :count`修复它。

```
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        alias_method :per, :per_page
        alias_method :num_pages, :total_pages
        alias_method :total_count, :count
      end
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-04T13:50:55.817

如果你同时使用 kaminari 和 will_paginate，你肯定会遇到这个错误。简而言之，kaminari 和 will_paginate 互不兼容。如果您正在使用 rails_admin（它使用 kaminari 进行分页）并且还使用 will_paginate，您需要将以下代码添加到 config 目录下的初始化程序之一，或者您可以创建一个新文件，假设名称为'will_paginate' 添加代码，并将其放入初始化程序目录。

```
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        def per(value = nil) per_page(value) end
        def total_count() count end
      end
    end
    module CollectionMethods
      alias_method :num_pages, :total_pages
    end
  end
end 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-22T10:32:25.330

上面的答案不再起作用。@zitoon[在这里](https://github.com/mislav/will_paginate/issues/174)给出了更新的答案：

```
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        def per(value = nil) per_page(value) end
        def total_count() count end
      end
    end
    module CollectionMethods
      alias_method :num_pages, :total_pages
    end
  end
end 
```

我自己试过了。作品。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-29T21:36:49.230

我遇到了同样的问题，我的应用程序从 WillPaginate 切换到 Kaminari。

这是一个简单的更改： paginate(page:1,per_page:10) 变为 page(1).per(10)

我想这取决于 willPaginate 与您的应用程序的结合程度。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-29T06:02:59.250

这对我有用：

初始化程序/will_paginate.rb

```
if defined?(WillPaginate)
  module WillPaginate
    module ActiveRecord
      module RelationMethods
        alias_method :per, :per_page
        alias_method :num_pages, :total_pages
        alias_method :total_count, :total_entries
      end
    end
  end
end 
```

# android - 我可以在android的可扩展列表视图上更改子行的背景颜色吗

> ID：14958439
> 
> 赞同：0
> 
> 时间：2013-02-19T13:14:07.597
> 
> 标签：android, expandablelistview

我已经创建了可扩展列表视图。我希望​​在单击特定子行时更改子行的背景颜色。我已经完成了，但是我遇到了新问题，即每当我展开/折叠可扩展列表视图时背景颜色的位置发生了变化。我希望在展开/折叠可扩展列表视图时不改变背景颜色子行。请建议我如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:23:46.547

我认为您在 getChildView() 中使用了 convertview==null 比较，同时扩展列表以显示子项，如果子项已经创建了以前的子视图，则将被使用。

```
getChildView()
{
    ......
    ......
    if(pos == 1)
      convertview.setBackgroundColor(Color.WHITE);
    else
      convertview.setBackgroundColor(Color.BLACK);
} 
```

# sql - 行入列 SQL Server 2005/8

> ID：14958442
> 
> 赞同：4
> 
> 时间：2013-02-19T13:14:23.883
> 
> 标签：sql, sql-server, pivot, unpivot

我刚刚开始更深入地了解 SQL Server，但遇到了问题。我必须将一行转换为一列，但我无法弄清楚。

该行如下所示：

```
 Columns:      T1 T2 T3 .........T20
    Values:      1   0  9 ......... 15 
```

我想收到这样的东西：

```
 Col  Val
    ________
    T1    1
    T2    0
    T3    9
    ........
    T20   15 
```

我知道我必须使用枢轴，我已经读过这个，但无法弄清楚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:15:30.380

为此，您必须使用[**`UNPIVOT`**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)表运算符，如下所示：

```
SELECT col, val
FROM Tablename AS t
UNPIVOT
(
   Val
   FOR Col IN (T1, T2, ..., T20)
) AS u; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/21795/3)。

* * *

## 更新 1

如果您想为任意数量的列动态地执行此操作，而无需手动编写它们，我能想到的唯一方法是从表中读取这些列`information_schema.columns`以获取表的列名列表。然后使用动态 SQL 来动态组合语句，`FOR col IN ...`如下所示：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(column_name)
                      FROM information_schema.columns
                      WHERE table_name = 'tablename'
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');

SELECT @query = ' SELECT col, val
                  FROM tablename AS t
                  UNPIVOT
                  (
                  val
                  FOR col IN ( ' + @cols + ' )
                  ) AS u;';

EXECUTE(@query); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/9f8dd/6)

这会给你：

```
| COL | VAL |
-------------
|  T1 |   1 |
| T10 |  15 |
| T11 |  33 |
| T12 |  31 |
| T13 |  12 |
| T14 |  10 |
| T15 |  12 |
| T16 |   9 |
| T17 |  10 |
| T18 |   2 |
| T19 |  40 |
|  T2 |   0 |
| T20 |  21 |
|  T3 |   9 |
|  T4 |   2 |
|  T5 |   3 |
|  T6 |  10 |
|  T7 |  14 |
|  T8 |  15 |
|  T9 |  20 | 
```

# symfony - Symfony2 应用程序架构 - 如何使所有控制器中的功能都可用？

> ID：14958449
> 
> 赞同：0
> 
> 时间：2013-02-19T13:14:35.803
> 
> 标签：symfony, architecture, doctrine-orm

我正在构建一个应用程序，其中用户与帐户相关联（例如，多个用户都共享一个帐户），然后是其他实体 - 我们称它们为产品与帐户相关联。产品与帐户相关联，只有与该帐户绑定的用户才能编辑产品。

就我而言，不同之处在于，在同一模型中共享了许多不同的实体。

如果它只是一个（产品）实体，那么在我的 ProductRepository 中有一个方法不会有问题，例如：

```
public function checkOwnership($id, $account)
{
    $count = $this->createQueryBuilder('s')
        ->select('count(s.id)')
        ->where('s.account = :acc')
        ->andWhere('s.id = :id')
        ->setParameters(array('id' => $id, 'acc' => $account))
        ->getQuery()
        ->getSingleScalarResult();

    if($count == 0)
        throw $this->createNotFoundException('ye..');

    return;
} 
```

确保产品的 id 与用户的帐户相关联。

account 参数通过以下方式传递给此函数：

```
$this->getUser(); 
```

在控制器中。

让其他实体可以使用此功能以防止代码重复的最佳方式是什么？（目前）只有 3 个其他实体，所以在每个存储库中都有它不会是世界末日，但**我只是想知道是否有一种方法可以创建一个“通用”或全局存储库遵循良好的标准？**我肯定想知道。

**编辑：**

还是我只是完全想多了？我可以在我的“MainBundle”中创建一个“Common”目录，定义一个命名空间并在需要访问该函数的控制器的开头添加一个 use 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:23:26.453

我希望我完全理解你的问题。

**解决方案一，重复，简单**：让工作（如果不存在[`@ParamConverter`](http://symfony.com/doc/2.0/bundles/SensioFrameworkExtraBundle/annotations/converters.html)自动响应）`404`

```
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\ParamConverter;

/**
 * @Route("/pets/{id}")
 */
public function showAction(Pet $pet)
{
    // Current logged user
    $currentUser = $this->get('security.context')->getToken()->getUser();

    // Owner
    $ownerUser = $pet->getUser();

    if(!$currentUser->equals($ownerUser)) {
        // 401, 403 o 404 depends on you
    }
} 
```

**解决方案二，DRY，有点困难**：使用[JMSAOPBundle](https://github.com/schmittjoh/JMSAopBundle/blob/master/Resources/doc/index.rst)并定义一个拦截器来拦截对您的控制器和操作（显示、删除等）的所有请求。切入点（连接到拦截器）将从上下文中获取当前用户，从实体中获取所有者。然后你做检查...

# extjs - 如何将商店应用到 ExtJS 中的组合框？

> ID：14958452
> 
> 赞同：1
> 
> 时间：2013-02-19T13:14:41.683
> 
> 标签：extjs, combobox, extjs4, store, extjs4.1

```
{
    fieldLabel: 'Tip',
    name: 'SubjectType',
    allowBlank: false,
    xtype: 'combo',
    displayField: 'name',
    valueField: 'type',
    typeAhead: true,
    forceSelection: true,
    queryMode: 'local',
    store: subjectTypeStore,
    listeners: {
        select: function(a,selected,c){
            //console.log(a);
            var tets = selected[0].data.type;
            console.log(tets);
            //console.log(c);
        }
    }
},
{
    name: 'SubjectID',
    allowblank: false,
    xtype: 'combo',
    displayField: 'name',
    valuefield: 'name',
    typeAhead: true,
    forceSelection: true,
    queryMode: 'local'
} 
```

我想要做的是根据第一个组合框中的选定项将组合框存储应用到第二个组合框。例如，如果您选择 Pokemons，那么第二个组合框应该加载 pokemonStore。您改变主意并选择 Smurfs，然后第二个组合框加载 smurfsStore。

我想学习的是如何将商店应用到现有的组合框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:27:18.620

这是一个简单的示例**[JSFiddle](http://jsfiddle.net/TpdeC/)**

```
select: function(checkbox,records) {
      comp.clearValue();
      comp.bindStore(Ext.StoreMgr.lookup(records[0].data.store));
      // you can change the value field if needed
      comp.displayField = 'petname'; 
      // you can change the display field if needed
      comp.valueField = 'id'; 
      // you can change the display template if needed
      comp.displayTpl = new Ext.XTemplate(
          '<tpl for=".">' +
              '{[typeof values === "string" ? values : values["' + comp.displayField + '"]]}' +
              '<tpl if="xindex < xcount">' + comp.delimiter + '</tpl>' +
          '</tpl>'
      );
      comp.picker = null;
 } 
```

# html - 如何识别帧/子帧结构

> ID：14958462
> 
> 赞同：0
> 
> 时间：2013-02-19T13:15:22.073
> 
> 标签：html, frame

我有一个 Web 应用程序，它具有非常复杂的框架/子框架/iframe 结构。这是动态生成和管理的。我正在为此编写一些硒测试，我必须验证是否存在元素。我可以用 xpath 来做到这一点（没问题），但我必须选择执行验证的帧/子帧。

如何识别此帧/子帧结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:19:45.957

要与框架中的元素交互，您首先需要切换到框架。以下可以帮助您完成步骤 [http://docs.seleniumhq.org/docs/03_webdriver.jsp#moving-between-windows-and-frames](http://docs.seleniumhq.org/docs/03_webdriver.jsp#moving-between-windows-and-frames)

一个旧线程： [如何切换到框架并使用 Web 驱动程序（Selenium - Java）单击弹出窗口？](https://stackoverflow.com/questions/12725982/how-do-i-switch-to-a-frame-and-click-on-the-pop-up-using-web-driver-selenium/12746070#12746070)

# java - log4j.xml 被忽略

> ID：14958472
> 
> 赞同：0
> 
> 时间：2013-02-19T13:15:47.707
> 
> 标签：java, configuration, log4j

如何在不调用 DOMConfigrator() 的情况下使用 log4j.xml 配置应用程序日志记录。有什么办法吗？我已经看到了一些没有调用此方法的代码。但在我的情况下，这个文件被忽略了。并且似乎默认行为正在起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:19:00.903

使用此命令行参数运行您的应用程序：`-Dlog4j.debug`

然后，您将能够准确地看到 log4j 如何选择要使用的配置文件以及是否有冲突的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:17:28.803

我们从不调用任何`DOMConfigurator`. 只要确保您放入`log4j.xml`类路径即可。还要确保`log4j.xml`类路径上没有其他违规文件。

# c++ - 在 VC++ 中设计定时器功能

> ID：14958479
> 
> 赞同：0
> 
> 时间：2013-02-19T13:16:12.903
> 
> 标签：c++, multithreading, performance, visual-c++

我正在实现一些功能，其中我在数据库上获得一组查询一个不应该在一段时间内松开查询让我们说大约 5 分钟，除非并且直到查询执行良好（这是在数据库关闭的情况下，我们不松开查询）。所以，我想做的是通过不同的线程为每个查询设置一种计时器，并在那个时间范围内等待它，最后如果它仍然存在，将它从队列中删除，但是，我对此解决方案不满意，因为我必须创建与查询数量一样多的线程。有没有更好的方法来设计这个（环境是vc++），如果问题不清楚，请告诉我，我会尝试更好地框架它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:38:55.400

一个线程足以让我们每 10 秒检查一次，您的队列中没有查询，其到期时间已到，因此应该中止/回滚。

队列通常从一端增长并从另一端删除，因此您只需检查最旧项目所在端的查询是否未达到其到期时间。

# asp.net-mvc-3 - 获取用户当前设备 信息

> ID：14958482
> 
> 赞同：2
> 
> 时间：2013-02-19T13:16:22.590
> 
> 标签：asp.net-mvc-3, device

我有一个 MVC3 应用程序。

现在我想检索用户在哪个设备上打开我的应用程序的信息。无论是 iPHONE、平板电脑还是其他任何东西？

其次，我想检索用户当前浏览器的浏览器信息和屏幕宽度和高度，即当前分辨率。

我怎样才能获得所有这些信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:19:16.047

检查[UserAgent](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx)将为您提供所有可能获得的信息。

如果您真的想了解有关移动设备的更多详细信息，那么我建议您使用[51Degrees.mobi 库](http://nuget.org/packages/51Degrees.mobi/)。

获得用户屏幕分辨率的唯一方法是通过 JavaScript，这意味着您将不得不创建某种服务来将该信息发送到服务器。

您可以使用`screen.width`and`screen.height`获取信息，然后执行类似的操作以发布到服务器。

```
$.ajax({
   url:'/api/UserData'
   type:'POST',
   data: {
      width: screen.width,
      height: screen.height
   }
}); 
```

# kendo-ui - Kendo UI / MVC - 使用onclick在标签页中打开菜单项而不是调用Action？

> ID：14958484
> 
> 赞同：1
> 
> 时间：2013-02-19T13:16:30.137
> 
> 标签：kendo-ui

我有一个剑道 UI 菜单：

```
 @(Html.Kendo().Menu()
                .Name("menu")
                .Items(menu =>
                {
                    menu.Add().Text("About").Action("Index", "Home");
})) 
```

我不想用一个动作加载新页面，而是调用一个javascript函数onclick。我怎样才能做到这一点？我应该使用 HtmlAttributes 属性吗？

此外，我正在使用月光主题，该主题具有用于非操作的白色菜单项文本和用于操作菜单项的橙色文本。对于将调用 javascript 函数的菜单项，我将如何将其保留为橙色文本？通过设置样式，还是有其他方法？

如果我解释得不够清楚，我的示例代码在[http://www.eeedee.com上。](http://www.eeedee.com)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:11:02.583

您可以使用`andrewdudek84`答案（这种方式真的很棒）。

还有两个解决方案（黑客方式）：

**解决方案 1**

```
@(Html.Kendo().Menu()
    .Name("menu")
    .Items(menu =>
    {
        menu.Add().Text("About").Url("javascript:void(0)")
        .HtmlAttributes(new { 
            @class= "helloWorld"
        });
}))
<script>
$('.helloWorld').click(function(){
    //put your code here
});
</script> 
```

**解决方案 2**

```
@(Html.Kendo().Menu()
    .Name("menu")
    .Items(menu =>
    {
        menu.Add().Text("About").Action("Index", "Home")
        .HtmlAttributes(new { 
            @class= "helloWorld"
        });
}))

<script>
$('.helloWorld').click(function(e){
    e.preventDefault(); // Cancel the default action of your click.
    //put your code here    
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:53:39.640

我会建议这样的事情：

```
<ul id="menu">
    <li id="menuItem1">Menu Item 1</li>
</ul>

<script type="text/javascript">
    $(document).ready(function() {
        $("#menu").kendoMenu({
            select: menuItemSelect,
            theme: "Moonlight"
        });
    });

    function menuItemSelect(e){
        alert(e.item.id);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T11:02:31.000

您还可以使用“LinkHtmlAttributes”来，嗯，将属性添加到生成的链接：

```
@(Html.Kendo().Menu()
                .Name("menu")
                .Items(menu =>
                {
                    menu.Add()
                        .Text("About")
                        .Action("Index", "Home")
                        .LinkHtmlAttributes(new { id = "myLink", onclick = "return OnMyLinkClick();" });
                })) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T06:00:14.847

稍微偏离主题，但对于任何希望从菜单调用操作方法，但在新选项卡中打开目标页面的人......

```
@(Html.Kendo().Menu()
.Name("menu")
.Items(menu =>
{
    menu.Add()
        .Text("About")
        .Action("Index", "Home")
        .LinkHtmlAttributes(new { target = "_blank" });
})) 
```

# php - 如何让替换按照我在 PHP 中的意图工作？

> ID：14958491
> 
> 赞同：3
> 
> 时间：2013-02-19T13:16:47.160
> 
> 标签：php, regex, preg-replace

我想这样做，如果`$hello`输入了 from 的话，`$words`它们会被**bonjour**替换，但它不起作用。我该怎么做呢？

代码：

```
<?php
$words = $_POST['words'];
$hello = array('hello', 'hi', 'yo', 'sup');
$words = preg_replace('/\b'.$hello.'\b/i', '<span class="highlight">Bonjour</span>', $words);
echo $words;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:19:46.280

您正在将一个数组传递给您的模式，它应该是一个字符串。不过，您可以将其内爆，例如：

```
$words = 'Hello world';
$hello = array('hello', 'hi', 'yo', 'sup');
$words = preg_replace('/\b('.implode('|', $hello).')\b/i', '<span class="highlight">Bonjour</span>', $words);
echo $words; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:19:16.323

您必须决定是否将一组模式传递给`preg_replace`

```
$hello = array('/\bhello\b/i', '/\bhi\b/i', '/\byo\b/i', '/\bsup\b/i'); 
```

或单个模式，即通过**OR**：

```
'/\b('.join('|', $hello).')\b/i' 
```

您当前传递的是这样的字符串：

```
'/\bArray\b/i' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:21:14.620

```
$words = "Would you like to say hi to him?";
$hello = array('hello', 'hi', 'yo', 'sup');
$pattern = "";
foreach ($hello as $h)
{
    if ($pattern != "") $pattern = $pattern . "|";
    $pattern = $pattern . preg_quote ($h);
}
$words = preg_replace ('/\b(' . $pattern . ')\b/i', 'Bonjour', $words); 
```

# google-app-engine - 将数据存储在用户自己的 Google Drive 帐户中

> ID：14958496
> 
> 赞同：1
> 
> 时间：2013-02-19T13:17:11.237
> 
> 标签：google-app-engine, google-docs

有没有办法让 Google App Engine 将数据存储在当前用户自己的 Google Drive 帐户中？

这背后的原因是我想编写一些用户可能不乐意存储在其他人可以访问的数据存储/云存储解决方案中的应用程序。一个例子是体重等个人健康信息，另一个例子是银行账户和交易信息。

如果我可以将它存储在用户自己的 google 文档帐户中，那么我将无法访问它并且无法看到它。

我找到了这些文档：

[https://developers.google.com/appengine/docs/python/howto/usinggdataservices](https://developers.google.com/appengine/docs/python/howto/usinggdataservices)

但没有与 Java 等价的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:29:03.767

这可以通过使用[Google Drive SDK](https://developers.google.com/drive/)来实现。

从那里您可以找到[DrEdit](https://developers.google.com/drive/examples/java)，这是一个使用 Google App Engine 用 Ja​​va 编写的示例 Google Drive 应用程序。

# android - 在 Eclipse 中查看没有任何断点的变量值

> ID：14958497
> 
> 赞同：1
> 
> 时间：2013-02-19T13:17:12.057
> 
> 标签：android, eclipse, debugging, breakpoints

在带有 Android 的 Eclipse 中，是否可以在调试模式下运行应用程序但没有任何断点，但仍然可以在变量更新时查看它们的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:18:22.990

您必须添加 a`watchpoint`而不是 a `breakpoint`。但是每次读取或修改您正在观看的变量时，调试器仍然会在观察点上停止

# azure-sql-database - 在 SQL Azure 主数据库中创建函数

> ID：14958500
> 
> 赞同：1
> 
> 时间：2013-02-19T13:17:26.553
> 
> 标签：azure-sql-database

无论如何要在 SQL Azure 主数据库中创建用户定义的函数？

如何控制 SQL Azure 主数据库，包括写权限？

谢谢锯齿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:10:38.177

不幸的是，您无法控制主数据库——主数据库是只读的，用于维护登录/安全信息（我认为其他元数据是自动管理的）。看这篇[文章](https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-provision-sql-server/)

# javascript - 使用 node.js 开发丰富的应用程序

> ID：14958504
> 
> 赞同：5
> 
> 时间：2013-02-19T13:17:39.300
> 
> 标签：javascript, node.js

我是 node.js 的新手，提出了使用 Node.js 开发基于丰富 Web 的应用程序的要求。

现在我正在编写关于 node.js 的入门指南。我有机会在[这里](https://github.com/joyent/node/wiki/modules)查看页面，但对数百个框架感到困惑。我不知道选择一个合适的框架，需要帮助才能做出完美的决定。让我解释一下我的要求。

1.  想要为所有功能开发 RESTfull API。（OAuth 上有任何库吗？）
2.  想要在 API 之上开发一个 Web 应用程序。应用程序的设计方式必须使主要功能应在客户端开发。意味着，所有的业务逻辑都必须在客户端开发。我听说 Backbone.js、Underscore.js 等一些库已经在做这项工作，但并没有明确的想法。

请向我建议可以更好地满足我的要求的框架。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T13:34:02.047

这是我用于我的应用程序的一个很好的技术堆栈：

服务器端：

*   Express.js
*   车把
*   Passport.js
*   猫鼬
*   MongoDB
*   Caolan 表单（但我目前正在实现自己的表单处理程序）
*   咖啡脚本

客户端：

*   车把
*   jQuery
*   需要.js
*   骨干网.js
*   text.js（require.js 的插件）
*   Coffeescript（require.js 的插件。我的 .coffee 使用 r.js 在 dev 中编译客户端，在 prod 中编译服务器端）

如果你愿意，我稍后可能会制作一个小示例应用程序。

[编辑]

好的，这是一个示例应用程序。

**项目结构：**

```
forms
  |___ sampleForm.coffee
models
  |___ sampleModel.coffee
public
  |___ images
  |___ stylesheets
  | |___ style.less
  |___ sampleapp
    |___ main.js
    |___ cs.js
    |___ text.js
    |___ require.js
    |___ collections
    | |___ sampleCollection.coffee
    |___ models
    | |___ sampleModel.coffee
    |___ templates
    | |___ sampleTemplate.hbs
    |___ lib
    | |___ handlesbars.js
    | |___ backbone.js
    | 
    | |___ ...
    |___ views
      |___ sampleView.coffee
routes
  |___ index.coffee
views
  |___ index.hbs
app.js
application.coffee
package.json 
```

**服务器端：**

*应用程序.js*

```
require('coffee-script');
module.exports = require('./application.coffee'); 
```

**应用程序.coffee**

```
... standard express.js initialization
require("./routes")(app)
... start server 
```

**index.coffee**

```
SampleModel = require "../models/sampleModel"
module.exports = (app) =>
  app.get "/index", (req,res) =>
    return res.render "index"

  app.get "/samplemodels", (req,res) =>
    SampleModel.find {}, (err, models) =>
      return res.send 404 if err or !models
      return res.send models
    return 
```

**索引.hbs**

```
<!DOCTYPE HTML>
<html>
<head>
  <title>Sample app</title>
  <link type="text/css" href="/stylesheets/style.css" rel="stylesheet" >
  <script src="/mainapp/require.js" data-main="/mainapp/main"></script>
</head>
<body>
  <div id="main-content"></div>
</body>
</html> 
```

**main.js**

```
require.config({...}) // Configure requires.js...

require(["jquery", "cs!models/samplemodel", "cs!views/sampleview","cs!collections/samplecollection"], function ($, Model, View, Collection) {
  var collection = new Collection();
  collection.fetch();
  var view = new View({collection: collection});
  $("body").html(view.render().$el);
}) 
```

**样品视图.coffee**

```
define ["backbone", "jquery", "handlebars","text!templates/sampleTemplate.hbs"], (Backbone, $, Hbs, template) =>
  class MainView extends Backbone.View
    initialize: =>
      @collection.on "change", @render
      @template = Hbs.compile template
    render: =>
      html = @template {models: @collection.models}
      @$el.html(html)
      return @ 
```

**样本模板.hbs**

```
{{#models}}
  <p>{{name}}</p>
{{/models}} 
```

好的，这是必不可少的。现在你必须学习如何使用[Backbone.Collection](http://backbonejs.org/#Collection)、[Backbone.Model](http://backbonejs.org/#Model)、如何配置[Require.js](http://requirejs.org/)、如何配置[Passport.js](http://passportjs.org/guide/configure/)以及如何制作[Mongoose 模型](http://mongoosejs.com/docs/guide.html)。你可以使用[Less 中间件](https://github.com/emberfeather/less.js-middleware)来编译你的 style.less

不要忘记您可以使用[r.js](https://github.com/jrburke/r.js/)预编译所有客户端应用程序。

现在我希望这个页面不会被遗忘，它会帮助将来遇到它的任何人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:20:27.493

这是一篇很棒的文章，有助于解释最流行的 javascript 框架：

[http://coding.smashingmagazine.com/2012/07/27/journey-through-the-javascript-mvc-jungle/](http://coding.smashingmagazine.com/2012/07/27/journey-through-the-javascript-mvc-jungle/)

最终，最好的方法是列出一个你认为对你有帮助的框架的短名单，然后对每一个框架进行一些研究，看看哪个最适合你的应用程序和编程风格。

# svn - 配置文件夹中的颠覆挂钩

> ID：14958507
> 
> 赞同：1
> 
> 时间：2013-02-19T13:17:50.440
> 
> 标签：svn, svn-hooks

我想让我的 SVN 存储库的用户编辑提交消息，但我只能访问 .subversion 目录。

在这个目录里面有一个 auth 目录、一个配置和服务器文件和一个 README.txt（没有关于钩子的说明）。

我读到我需要向 hooks 文件夹添加一个文件，但我无法访问它。

有没有办法在这个 .subversion 目录中创建添加文件或脚本的钩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:44:33.320

`.subversion`执行一次 Subversion 客户端后，可以在每个用户的主目录中找到该目录。它存储该用户为其客户端的配置设置，仅此而已。您在此处找到的内容对服务器配置完全没有影响。

挂钩脚本必须安装到`hooks`存储库本身的目录中 - 您需要对服务器具有某种级别的管理访问权限才能执行此操作。

另请参阅[http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)

# multithreading - 使用多个 OpenGL 上下文

> ID：14958509
> 
> 赞同：1
> 
> 时间：2013-02-19T13:17:54.030
> 
> 标签：multithreading, macos, opengl, operating-system, firebreath

在firebreath（mac os）上编写一个插件，它绘制一个视频创建一个窗口来获取上下文，现在我希望在窗口中绘制我的库，它在另一个线程中运行。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:17:24.483

您可以从多个线程使用 OpenGL 上下文，只要您从不一次从多个线程同时使用它。例如

线程 A：

```
[myContext makeCurrentContext];
// Do something with the context...
// ... then release it on the thread.
[NSOpenGLContext clearCurrentContext];
// Tell Thread B that we released the context.
// Wait for Thread B to finish...
// Grab the context again.
[myContext makeCurrentContext];
// Do something with the context... 
```

线程 B：

```
// Wait for Thread A to release the context...
[myContext makeCurrentContext];
// Do something with the context...
// ... then release it on the thread.
[NSOpenGLContext clearCurrentContext];
// Let Thread A know, that we are done with the context. 
```

另一种可能性是使用辅助共享上下文。共享上下文与其父上下文共享相同的资源，因此您可以在共享上下文中创建纹理（在辅助线程上使用），在辅助线程上将视频渲染到该纹理，然后让主线程渲染纹理（在将下一帧渲染到辅助线程上的纹理之前，它也可以在主线程的父上下文中使用）到屏幕。

## 更新

与上面的 CGL 框架相同的代码：

线程 A：

```
err = CGLSetCurrentContext(myContext);
// Do something with the context...
// ... then release it on the thread.
err = CGLSetCurrentContext(NULL);
// Tell Thread B that we released the context.
// Wait for Thread B to finish...
// Grab the context again.
err = CGLSetCurrentContext(myContext);
// Do something with the context... 
```

线程 B：

```
// Wait for Thread A to release the context...
err = CGLSetCurrentContext(myContext);
// Do something with the context...
// ... then release it on the thread.
err = CGLSetCurrentContext(NULL);
// Let Thread A know, that we are done with the context. 
```

# database - 在规范化中遇到 1NF 问题

> ID：14958512
> 
> 赞同：0
> 
> 时间：2013-02-19T13:18:04.727
> 
> 标签：database, normalization

在对重复和非重复数据进行规范化时，我有点困惑。查看以下字段：

选项表：

```
OptionId (PK auto) OptionType
1                  A-C
2                  A-D
3                  A-E 
```

问题：

```
QuestionId (PK auto) OptionId
1                    3
2                    2
3                    2 
```

如果你看上面的表格，tchnically OptionType 不是重复的，OptionId 是重复的，但它是一个外键，所以我假设它仍然可以`OptionId`在第一范式中声明不重复。但是因为`OptionType`它看起来像非重复数据但它不是键，只是一个普通字段，所以下面是正确或不正确的：

重复：

没有任何

非重复：

**QuestionId** , **OptionId** , 选项类型

粗体表示它是一把钥匙。我可以简单地选择哪些非重复数据可以和不能是键吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:57:19.057

重复和非重复不是指行。它们指的是一行中的列。

如果您的 OptionType 列要解释如下：AC 表示 A、B、C 等等，那么就有一个论据说 OptionType 是重复列。还有一个论点是说它是一个范围，而不是重复的列，但是，在这种情况下，将范围的下限和上限放在单独的列中会更好。

# xpath - Xpath使用内部文本选择父元素

> ID：14958513
> 
> 赞同：0
> 
> 时间：2013-02-19T13:18:06.423
> 
> 标签：xpath, webdriver

```
<div>
<input type="checkbox" data-bind="checked: isSelected">
Select this box
</input>
</div> 
```

嗨，我正在尝试使用 xpath 中的内部文本选择复选框，但到目前为止还没有运气。例如，我知道以下内容不起作用： //input[contains(text(), 'Select this box')]

请对正确的语法有任何建议吗？注意，它需要包含内文。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:56:37.350

您的代码有效（使用 XpathpatherizerNPP 测试）：

```
//input[contains(text(),"Select this box")] 
```

# javascript - 我是否在这个 jQuery 代码中一遍又一遍地绑定事件？

> ID：14958515
> 
> 赞同：0
> 
> 时间：2013-02-19T13:18:13.137
> 
> 标签：javascript, jquery, jquery-ui, binding, event-handling

所以我使用了这个[非常棒的工具，叫做 Visual Event](http://www.sprymedia.co.uk/article/Visual+Event+2)，它显示了绑定到一个对象的所有事件处理程序 - 我注意到每次我点击或玩弄我的对象并检查绑定到它的事件处理程序列表时，有和每次更多。我的问题是这个：[console.trace 或堆栈跟踪来确定 javascript 中错误的来源？](https://stackoverflow.com/questions/14937777/console-trace-or-stack-trace-to-pinpiont-the-source-of-a-bug-in-javascript#comment20979598_14937777)在使用 Visual Event 和其他人的建议之后，我想我的问题是我可能一遍又一遍地将相同的处理程序绑定到相同的事件。有没有办法定期解除绑定？

我的应用程序有一堆插件连接到动态创建`div`的 s。这些`divs`可以调整大小并在该地方移动。该应用程序是一种编辑器，因此用户可以在他们喜欢的任何设计中排列这些 div（包含图像或文本）。如果用户单击一个 div，它就会“激活”，而页面上的所有其他 div 都会“停用”。我有一堆相关的插件，比如`activateTextBox`, `initTextBox`, `deactivateTextBox`,`readyTextBox`等等。每当第一次创建 div 时，`init`插件会被调用一次，只是在创建后的第一次，如下所示：

```
$(mydiv).initTextBox(); 
```

但是`readyTextBox`，`activateTextBox`并且`deactivateTextBox`经常被调用，具体取决于其他用户事件。

在`init`中，我首先使用和之类的绑定东西`resizable()`，`draggable()`然后我使盒子“准备好”以供使用

```
 $.fn.extend({
        initTextBox: function(){
        return this.each(function() {
               // lots of code that's irrelevant to this question
               $this.mouseenter(function(){ 
        if(!$this.hasClass('activated'))
            $this.readyTextBox();
         }
         $this.mouseleave(function(){ 
        if($this.hasClass('ready')){
            $this.deactivateTextBox(); 
                    $this.click(function(e){
                 e.preventDefault();
                 });
                }
             });
     }); 
  }); 
```

这是`readyTextBox`插件的简化摘要版本：

```
(function($){
    $.fn.extend({
        readyTextBox: function(){
        return this.each(function() {
               // lots of code that's irrelevant to this question
               $this.resizable({ handles: 'all', alsoResize: img_id});
               $this.draggable('enable');
               $this.on( "dragstop", function( event, ui )
               {/* some function */ });
               $this.on("resizestop", function( event, ui ){ /* another function */ });
               // and so on
}); 
```

然后是`activateTextBox()`：

```
 $.fn.extend({
        activateTextBox: function(){
        return this.each(function() {
               // lots of code that's irrelevant to this question
               $this.resizable('option','disabled',true); //switch of resize & drag
               $this.draggable('option', 'disabled', true);
}); 
```

然后`deactivate`，我再次打开可拖动和调整大小，使用代码：

`$this.draggable('enable'); $this.resizable('option','disabled',false);`

这些 div 或“文本框”包含在一个名为 的更大 div`content`中，这是我在其中的点击代码`content`：

```
$content.click(function(e){
    //some irrelevant code
     if( /* condition to decide if a textbox is clicked */) 
     {  $(".textbox").each(function(){ //deactivate all except this
        if($(this).attr('id') != $eparent.attr('id')) 
            $(this).deactivateTextBox();
        });
        // now activate this particular textbox
        $eparent.activateTextBox();
             }
          }); 
```

这几乎是与文本框相关的相关代码。为什么每当我拖动某些东西然后检查可视事件时，点击次数、拖动停止和鼠标悬停次数都比以前多？此外，用户与页面交互的次数越多，事件完成所需的时间就越长。例如，我从一个 div 鼠标移出，但`move`光标需要很*长时间*才能恢复默认值。我停止拖动，但在准备好接受更多用户点击之前，一切都卡住了一段时间，等等。所以我猜问题必须是我将太多东西绑定到相同的事件需要在某些时候解除绑定观点？它变得如此糟糕，以至于 draggable 最终会在某个时候停止工作。文本框只是卡住了 - 它们仍然可以调整大小，但拖动停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:17.053

> 我是否一遍又一遍地绑定事件

是的。看看你的代码：

```
$this.mouseenter(function(){ 
    …
    $this.mouseleave(function(){ 
        …
        $this.click(function(e){
            …
        });
    });
}); 
```

这意味着每次将鼠标悬停在元素上时，都会添加另一个离开处理程序。当您离开元素时，每个处理程序都会添加另一个单击事件。

我不确定你想做什么，但有几个选择：

*   仅绑定一次事件处理程序，并使用布尔变量等跟踪当前状态。
*   在绑定之前，删除所有其他已经绑定的事件处理程序。jQuery 的[事件命名空间](http://api.jquery.com/on/#event-names)可以帮助您仅删除您自己的插件添加的那些。
*   使用触发后自动取消绑定侦听器的[`one()`方法。](http://api.jquery.com/one/)

# r - 读取目录中的所有文件并对每个数据框应用多个函数

> ID：14958516
> 
> 赞同：41
> 
> 时间：2013-02-19T13:18:13.020
> 
> 标签：r, file, loops

我需要将 R 中的一组命令应用于`.txt`目录中的所有单个文件（大约 300 个）。

我对 R 不是很熟悉，所以我在网上看到的关于循环的所有帮助都令人困惑，或者当您需要对每个文件应用多个命令时，我无法弄清楚如何应用循环。

我需要应用于目录中每个文件（系统发育树）的命令是（使用 R 的猿库）：

```
testtree <- read.tree("tree123.txt")
unrooted_tr <- unroot(testtree)
write.tree(unrooted_tr, file="unrootedtree123.txt") 
```

如何应用一个循环，将这些命令应用于每个单独的 .txt 文件（使用 R 或在 Unix 命令行中）？输出（例如 unrootedtree123.txt）需要为每个单独的文件具有不同的名称。

在此先感谢，丹妮。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-19T13:28:46.867

您可以获取所有文件，然后循环使用`lapply`并应用您想要应用的任何功能，如下所示：

```
files <- list.files(path="path/to/dir", pattern="*.txt", full.names=TRUE, recursive=FALSE)
lapply(files, function(x) {
    t <- read.table(x, header=TRUE) # load file
    # apply function
    out <- function(t)
    # write to file
    write.table(out, "path/to/output", sep="\t", quote=FALSE, row.names=FALSE, col.names=TRUE)
}) 
```

# ant - 包装 TFS 与 JBOSS 2.4.11 的持续集成

> ID：14958517
> 
> 赞同：0
> 
> 时间：2013-02-19T13:18:13.600
> 
> 标签：ant, build, tfs, jboss, continuous-integration

我正在尝试使用 TFS 自动构建并部署到 AIX 机器上的 Jboss 服务器。我如何将 jboss 包装到 Windows 服务中并从 TFS 调用它？

注意：我使用 ANT 编译/构建我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:39:31.193

[您可以使用TFS 构建扩展](http://visualstudiogallery.msdn.microsoft.com/45b4e378-5b81-4186-9b7f-21cc5c2f743d)调用 ANT 。[您可以使用这些说明](http://msdn.microsoft.com/en-us/library/jj155784.aspx#enablebuilds)从团队构建中调用 ANT

# django - 使用 django-email-as-username 如何向用户返回消息？

> ID：14958520
> 
> 赞同：1
> 
> 时间：2013-02-19T13:18:17.370
> 
> 标签：django

我正在尝试使用[django-email-as-username](https://github.com/dabapps/django-email-as-username)，但如果用户提供的数据错误，我找不到返回登录页面并为用户发送消息的方法。

这是我的`urls.py`

```
url(r'^login$', 'django.contrib.auth.views.login', {'authentication_form': EmailAuthenticationForm}, name='login'), 
```

这是我的`views.py`

```
def login_user(request):  
    if request.method == 'POST':
        email = request.POST.get('email')
        password = request.POST.get('password')
        if email and password:
            user = authenticate(email=email, password=password)
            if user:
                return HttpResponseRedirect('/')
            else:
                message = 'No such user'
        else:
            message = 'both email and password are required!'
    else:
        message = 'wrong method!' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:11:34.753

我认为您犯了一个错误，因为您`login_user`在模块中提供了自己的视图，但在 URL conf 中`views.py`链接到 Django 。`django.contrib.auth.views.login`

您可能应该只`django.contrib.auth.views.login`用作登录视图。

您还需要提供一个`registration/login.html`模板。当表单传递到上下文时，您将能够获取错误信息。您可以使用[管理员的登录模板](https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/login.html)作为示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:22:17.873

如果身份验证失败，您必须使用`{{ message }}`

# jquery - NetworkError：Firefox 的 REST 服务中不允许使用 405 方法

> ID：14958529
> 
> 赞同：1
> 
> 时间：2013-02-19T13:18:39.053
> 
> 标签：jquery, ajax, rest, firefox

我在 jQuery AJAX POST 中调用了 REST 服务。最初我收到网络错误：405 Method not allowed。但是当我在 Global.asax 文件的 Application_BeginRequest() 中添加以下代码时，错误消失了，并且没有调用该服务。它仍然在 Firefox 中显示**Options** http 请求。为什么即使添加代码也会发生这种情况。

**Application_BeginRequest()**代码

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
{
HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type,X-PINGOTHER Accept, x-requested-with");
HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
HttpContext.Current.Response.End();
}
} 
```

**界面**

```
[ServiceContract]
public interface IService1{
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/TokenInsertion", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
string UserdetailInsertion(UserInputParameters userInput);
}<br/> 
```

**服务**

```
 public string UserdetailInsertion(UserInputParameters userInput)
{
try
{
command = database.GetStoredProcCommand(DataTemplate.UspUserdetailInsertion);
database.AddInParameter(command, DataTemplate.AssociateRefId, DbType.String, userInput.AssociateRefId);
database.AddInParameter(command, DataTemplate.CpecialLoginId, DbType.String, userInput.CpecialLoginId);
database.AddInParameter(command, DataTemplate.PartnerId, DbType.String, userInput.PartnerId);
database.AddInParameter(command, DataTemplate.FirstName, DbType.String, userInput.FirstName);
database.AddInParameter(command, DataTemplate.LastName,DbType.String,userInput.LastName);
database.AddInParameter(command, DataTemplate.CreatedDate, DbType.String, userInput.CreatedDate);
database.ExecuteNonQuery(command);
return "0";
}
catch(Exception err)
{   throw err; 
}
} 
```

**jQuery 阿贾克斯**

```
var postCall = function () {
var input = {
AssociateRefId: "412", CpecialLoginId: "sdfa", PartnerId: "dfs", FirstName: "fdsf", LastName: "dfsr", Comments: "dsad", CreatedDate: "2013-02-15 15:54:10.130"
};
alert(JSON.stringify(input));
$.ajax({
type: "POST",
url: "http://localhost:45970/Service1.svc/TokenInsertion",
data: JSON.stringify(input),
contentType: "application/json",
dataType: "json",
success: function (response) {
alert(response);
},
error: function (xhr, status, error) {
alert(error);
alert(status);
}
});
}<br/> 
```

任何建议都会很有帮助。

**编辑：Firefox 中的 Http 请求**

```
--
[18:15:35.297] OPTIONS http://localhost:45970/Service1.svc/TokenInsertion [HTTP/1.1 200 OK 122ms] 
```

# jquery - jQuery、jScrollPane 和长内容

> ID：14958530
> 
> 赞同：1
> 
> 时间：2013-02-19T13:18:39.660
> 
> 标签：jquery, .net, internet-explorer-9, browser, jscrollpane

我有一个托管在我的 SkyDrive 上的问题示例：

[https://skydrive.live.com/redir?resid=E95AD09917EEFAD1!292&authkey=!APYwAoPQ0tprs-A](https://skydrive.live.com/redir?resid=E95AD09917EEFAD1!292&authkey=!APYwAoPQ0tprs-A)

我在 .NET WebBrowser 控件中显示内容并使用 jScrollPane 使内容可滚动。我遇到的问题发生在显示大型内容时。这些问题似乎不会在 Chrome 或 Firefox 中发生，但查看 IE9 中的示例应该会显示我将要描述的内容。

问题 #1 是大量内容向右溢出。最好的例子是当你第一次加载页面时，顶部的段落（实际上是一个表格单元格）在右侧溢出。这是一个屏幕截图：

![在此处输入图像描述](../Images/6304b4d476182d35df3ae8f65341ac8d.png)

问题 #2 是由于某种原因，滚动窗格高度的计算无法正常工作，并且内容在底部被截断，如下所示：

![在此处输入图像描述](../Images/14509cdcc28bf2ecb68f5420cba35bc3.png)

**更新：**

我最终将我的赏金奖励给了 RedDevil79，因为他的回答确实是一个解决方案，但是 white-space: pre-wrap 对我的项目来说是必要的，所以我不能简单地删除它。我的最终解决方案是在“.freetext tr td”元素中添加一个 word-wrap: break-word 样式以及一个与右侧滚动条宽度相匹配的动态 padding-right。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:17:03.540

正确溢出的问题是因为您使用的是 white-space: pre-wrap 内容，如果您删除它可以正常工作。如果不尝试再次销毁并初始化对象，这也应该解决高度问题，例如：

```
var ele = $('#Outer').jScrollPane(scrollSettings);
scrollAPI = ele.data('jsp');    
scrollAPI.destroy();
ele = $('#Outer').jScrollPane(scrollSettings);
scrollAPI = ele.data('jsp'); 
```

**编辑：**

我发现在初始化对象时使用它不需要在每次更改内容时都销毁和重建，并且可能会解决高度问题。

```
$("#Outer").jScrollPane({
    autoReinitialise:true,
    autoReinitialiseDelay: 1
}); 
```

# variables - XSLT 中的数值变量/参数

> ID：14958532
> 
> 赞同：1
> 
> 时间：2013-02-19T13:18:43.457
> 
> 标签：variables, xslt, parameters, tunneling

我有这个 XSLT：

```
<xsl:template match="/">

    <xsl:variable name="errorCount" select="count($orders/*[1]/cm:Error)" />

    <xsl:apply-templates select="@*|node()">
        <xsl:with-param name="errorCount" select="$errorCount" tunnel="yes" />
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="status">
    <xsl:param name="errorCount" tunnel="yes" />
    <xsl:copy>
        <xsl:choose>
            <xsl:when test="$errorCount > 0">
                <xsl:text>ERROR</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:text>OK</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:copy>
</xsl:template> 
```

隧道和一切似乎都有效，但转换失败并出现以下错误：

> '>' 的第一个操作数的必需项类型是数字；提供的值具有项目类型 xs:string

我首先在使用它的模板中声明了变量，然后它工作得很好。移动它是因为我也需要在其他模板中使用相同的计数。

我如何/在哪里声明这个变量/参数实际上是一个数字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T13:47:10.730

由于您使用的是 XSLT 2.0，因此您还应该`as`在模板中的 xsl:param 中添加一个属性。例如（您可能必须使用不同的 as 值，具体取决于您需要的结果数字，例如，如果您的值包含小数；您还需要根据 Michael Kay 的观点更正隧道值） ：

```
<xsl:param name="errorCount" tunnel="yes" as="xs:integer" /> 
```

如果不能转换为 as 类型（在本例中为整数），转换将失败。Eero 的解决方案可能看起来更简洁，因为您仍然需要检查该值是否大于零。但是，因为您使用的是 XSLT 2.0，所以最好的做法是键入您的参数/变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:28:03.370

您可以使用[`number()`](https://stackoverflow.com/a/1270275/825783)将字符串转换为数字：

```
<xsl:when test="number($errorCount) > 0">
  <xsl:text>ERROR</xsl:text>
</xsl:when> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T16:19:34.800

My suspicion is that because you wrote tunnel="true" rather than tunnel="yes", the fact that you specified tunnel at all is being (incorrectly) ignored, and the parameter is being given its default value, which is a zero-length string.

# android - 如何通过android中的触摸事件获取listview中的项目，因此当我在其上移动事件时设置该项目的背景颜色

> ID：14958535
> 
> 赞同：0
> 
> 时间：2013-02-19T13:18:54.770
> 
> 标签：android

我想在包含电话号码的列表视图项上移动图形。

当我从右到左移动图形时，拨打电话。我无法在列表视图中获取该特定项目以获取电话号码并拨打电话。

我的代码是

```
 @Override
        arg1.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent event) {

                float startX = 0;
                float startY;
                float endX;
                float endY;
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    startX = (int) event.getX();
                    startY = (int) event.getY();
                    System.out.println("startX" + startX);
                    System.out.println("startY" + startY);
                    break;
                case MotionEvent.ACTION_MOVE:

                    endX = event.getX();
                    endY = (int) event.getY();
                    System.out.println("endX" + endX);
                    System.out.println("endY" + endY);
                    float sub = endX - startX;
                    System.out.println("sub" + sub);
                    if ((endX - startX) < 100) {
                        arg0.setBackgroundColor(Color.GREEN);

                    }
                    if ((endX - startX) > 100) {
                        try {
                            TextView ph_tv = (TextView) arg0
                                    .findViewById(R.id.textnum);
                            String Pho_no = ph_tv.getText().toString();
                            arg0.setBackgroundColor(Color.RED);
                            Intent intent = new Intent(
                                    Intent.ACTION_CALL, Uri
                                            .parse("tel:" + Pho_no));
                            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            startActivity(intent);
                            lv.setBackgroundColor(Color.BLACK);

                        } catch (ActivityNotFoundException e) {
                            Toast.makeText(
                                    getApplicationContext(),
                                    "Error in your phone call"
                                            + e.getMessage(),
                                    Toast.LENGTH_LONG).show();

                        }
                        section(path_name, lv1);

                    }
                    break;

                case MotionEvent.ACTION_UP:
                    endX = (int) event.getX();
                    endY = (int) event.getY();
                }
                return true;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:02.410

```
float hX = Float.NaN, historicY = Float.NaN;
static final TRIGGER_DELTA = 50; // Number of pixels to travel till trigger

@Override public boolean onTouchEvent(MotionEvent e) {

    switch (e.getAction()) {
    case MotionEvent.ACTION_DOWN:
        hX = e.getX();
        historicY = e.getY();
        break;
    case MotionEvent.ACTION_UP:
        if (e.getX() - hX > -TRIGGER_DELTA) {
            onSlideComplete(Direction.LEFT);
            return true;
        }
        else if (e.getX() - hX > TRIGGER_DELTA)  {
            onSlideComplete(Direction.RIGHT);
            return true;
        } break;
    default:
        return super.onTouchEvent(e);
    }
}

enum Direction {
    LEFT, RIGHT;
}

interface OnSlideCompleteListener {
    void onSlideComplete(Direction dir);
} 
```

# android - View Pager with Universal Image Loader 内存不足错误

> ID：14958543
> 
> 赞同：11
> 
> 时间：2013-02-19T13:19:16.960
> 
> 标签：android, android-viewpager, out-of-memory, universal-image-loader

我不确定是否可以/应该将带有 Universal Image Loader 的 ViewPager 用作类似画廊的界面的替代品，因为我在从 SD 卡加载图像并以全屏模式查看它们时遇到了内存不足错误。无论数字是多少，GridView 都可以正常工作，但是在 View Pager 中查看图像时，每个位图都会占用大量内存，并且在 10 个左右的图像之后，它会出现内存不足的错误。

在使用通用图像加载器时，我已经看到了几乎所有与内存不足错误相关的问题，并且在每个问题中，都存在配置错误作为原因。

我不知道我是否使用了错误的配置或什么，但我已经浪费了很多时间并且有点卡住了，任何帮助/建议将不胜感激。

ImageLoader 的配置：

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
            .memoryCache(new WeakMemoryCache())
            .denyCacheImageMultipleSizesInMemory()
            .discCacheFileNameGenerator(new Md5FileNameGenerator())
            .imageDownloader(new ExtendedImageDownloader(getApplicationContext()))
            .tasksProcessingOrder(QueueProcessingType.LIFO)
//          .enableLogging() // Not necessary in common
            .build(); 
```

显示图像选项是：

```
options = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.image_for_empty_url)
            .resetViewBeforeLoading()
            .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
            .bitmapConfig(Bitmap.Config.RGB_565)
            .displayer(new FadeInBitmapDisplayer(300))
            .build(); 
```

我正在使用库提供的示例项目，但这些设置也不起作用，它只是在一段时间后崩溃。我的猜测是有一个特定的回调，我必须从不可见的视图中回收位图。

编辑：我知道它是内存泄漏，不可见的视图在应该被破坏时被破坏，但内存没有按应有的方式释放。这是destroyItem回调的实现，按照不同问题中给出的提示，但仍然找不到内存泄漏。

```
@Override
        public void destroyItem(View container, int position, Object object) {
//          ((ViewPager) container).removeView((View) object);
            Log.d("DESTROY", "destroying view at position " + position);
            View view = (View)object;
            ((ViewPager) container).removeView(view);
            view = null;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:31:21.877

这可能不是解决它的最佳实现，但它对我有用。删除 ImageViews 是不够的，所以我决定回收 'destroyItem' 中的位图：

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    View view = (View) object;
    ImageView imageView = (ImageView) view.findViewById(R.id.image);
    if (imageView != null) {
        Bitmap bitmap = ((BitmapDrawable) imageView.getDrawable()).getBitmap();
        bitmap.recycle();
        bitmap = null;
    }
    ((ViewPager) container).removeView(view);
    view = null;
} 
```

当您离开活动时，这不会清除最后 3 个活动页面，尽管我希望 GC 处理它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T16:13:56.750

尝试应用下一个建议：

1.  采用`ImageScaleType.EXACTLY`
2.  启用光盘缓存（在显示选项中）。
3.  最后尝试使用`.discCacheExtraOptions(maxImageWidthForDiscCache, maxImageHeightForDiscCache, CompressFormat.PNG, 0);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T08:10:46.793

之所以发布这个，是因为在搜索 UIL 和 OOP 时，Google 上会出现这个问题。无论什么配置，我都遇到了 OOP 问题，解决了我所有问题的是两个类和`RecyclingImageView`这个[示例](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)项目。`RecyclingBitmapDrawable`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T13:48:54.440

我也使用了相同的库并且有相同的错误。作为解决方案，我创建了一个 sparseArray 来保留 photoView 实例。并像这样使用它：

```
 private SparseArray<PhotoView> photoViewHolder;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
       ...

       photoViewHolder = new SparseArray<PhotoView>();
       ...
 }

private class GalleryPagerAdapter extends PagerAdapter {

@Override
public View instantiateItem(ViewGroup container, int position) { 

        PhotoView photoView = new PhotoView(container.getContext());

        ImageHolder holder = new ImageHolder();
        holder.position = position;
        holder.loaded = false;

        photoView.setTag(holder);
        photoViewHolder.put(position, photoView);

                    // I used LazyList loading
        loader.DisplayImage(items.get(position), photoView);

        // Now just add PhotoView to ViewPager and return it
        container.addView(photoView, LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT);

        return photoView;
    }

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    container.removeView((View) object);
    photoViewHolder.remove(position);
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view == object;
}

} 
```

并处理 viewPager 的监听器：

```
 pager.setOnPageChangeListener(new OnPageChangeListener() { 

    @Override
    public void onPageScrollStateChanged(int position) { 

    } 

    @Override
    public void onPageScrolled(int position, float arg1, int arg2) { 

    } 

    @Override
    public void onPageSelected(int position) { 
        if(photoViewHolder.get(position) != null) {
            ImageHolder holder = (ImageHolder)photoViewHolder.get(position).getTag();
            // Do something...
        }
    } 
}); 
```

希望这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:32:33.843

[我从github](https://github.com/chrisbanes/PhotoView/issues/22)问题页面使用了 kutothe 的实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-10T10:29:25.417

我在简单地将 Uri 设置为`ImageView`使用时遇到了这个问题：`iv.setImageURI(Uri.fromFile(imgFile));` 我在使用 Universal Image Loader 时遇到了同样的问题，我什至在外面寻找了其他的 Image Loader，并找到了另一个名为“ [Picasso](http://square.github.io/picasso/) ”的好东西，但它也有同样的问题。

所以对我有用的是通过 XML 使用[`GestureImageView`](https://github.com/jasonpolites/gesture-imageview)并设置`gesture-image:recycle`为 true，并使用以下代码加载图像：

```
 Drawable yourDrawable = null;

            try {
                InputStream inputStream = getActivity().getContentResolver().openInputStream(Uri.fromFile(img));
                yourDrawable = Drawable.createFromStream(inputStream, Uri.fromFile(img).toString() );
                inputStream.close();
            } catch (FileNotFoundException e) {
                yourDrawable = getResources().getDrawable(R.drawable.ic_launcher);
            } catch (IOException e) {
                e.printStackTrace();
            }

            if (yourDrawable != null)
                iv.setImageDrawable(yourDrawable); 
```

它崩溃并给出OOM错误的原因是当图像不再显示在屏幕上时，位图不会被回收，因此会发生内存泄漏。

如果有另一种方法可以在 normal 中回收位图`ImageView`，那将是一个更好的解决方案。

希望我有所帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-21T18:35:01.687

我知道已经晚了，但也许我的回答会节省一些人的时间。经过几个小时的尝试解决这个问题（几乎所有答案都在堆栈溢出中找到），我终于用 Fresco 图像库解决了这个问题。这是一个由 Facebook 编写的库，它的主要目标是有效地使用内存。这真的很棒，我的内存不足错误消失了。我强烈推荐使用它。

[http://frescolib.org/](http://frescolib.org/)

# mod-rewrite - mod_rewrite 指令在 .htaccess 中工作，但在 httpd.conf 中被忽略

> ID：14958544
> 
> 赞同：11
> 
> 时间：2013-02-19T13:19:18.043
> 
> 标签：mod-rewrite, apache2, debian

在 apache2 中与 mod_rewrite 作斗争。问题是这些指令在放入 httpd.conf 时会被忽略。

如果我`AllowOverride All`在sites-available/default 中设置并将指令添加到.htaccess 它可以工作并且每个请求都会在mod_rewrite.log 中弹出。

但是当我删除 .htaccess 并将`AllowOverride All`指令添加到 httpd.conf 时，它被忽略了。

Httpd.conf 看起来像这样：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteLog "/var/log/apache2/mod_rewrite.log"
    RewriteLogLevel 4 
    RewriteRule ^/.* http://www.google.com                                     
</IfModule> 
```

（刚选google调试）

Phpinfo() 在加载的模块中显示 mod_rewrite，rewrite.load 在 /mods-enabled 处符号链接到 mods-available，即它确实存在。此外，当我删除 mod_rewrite.log 它是在服务器启动时创建的，IMO 指示 httpd.conf 已读取并且 mod_rewrite.c 存在。但是 mod_rewrite.log 保持空白，这表明没有请求发送到 mod_rewrite。此外，将废话放入 httpd.conf 服务器将无法启动并引发错误。

我错过了什么？有没有像`AllowOverride`我必须为主要配置文件设置的东西？

我已经玩过`/`as .htaccess 使用相对路径而 httpd.conf 没有。我也尝试设置`<Directory>`标签，这对我来说没有意义，但仍然尝试看看它是否改变了任何东西......帮助？！

* * *

我自己想通了，但万一有人遇到同样的问题：

httpd.conf 中设置的“全局”重写规则必须包含在每个虚拟主机中，使用

```
<VitualHost *:80>
    RewriteEngine on
    RewriteOptions Inherit
</VirtualHost> 
```

否则它们将无法在 VHosts 中工作。此外，父规则在子规则之后应用。

# c# - 如何将新项目添加到使用数据源的列表框中？

> ID：14958546
> 
> 赞同：0
> 
> 时间：2013-02-19T13:19:22.270
> 
> 标签：c#, listbox, datasource, add

我创建了一个包含 3 个文本框（ 和 ）、一个使用数据源的列表框和一个添加新项目的按钮的 winform`pcno`应用`pcname`程序`pcipadd`。我无法将项目添加到我的列表框中。我在添加项目按钮上使用此代码：

```
_pcno.Add(new PCNo() { PCNO = pcno.Text, 
                       PCNAME = pcname.Text, 
                       IPADDRESS = pcipadd.Text }); 
```

上面的代码成功添加了新项目，但列表框中的选定项目也被更新了。

详细地说，我的列表框中目前有一个“PCN01”。然后我转到我的文本框（`pcno.text`）然后写入新值（例如“PC02”）并单击按钮添加项目。发生的情况是项目已添加但“PC01”也更新为“PC02”。重新加载表单（重新打开）后，所有更改恢复正常，“PC01”及其值和“PC02”及其值。我只是不希望列表框中的选定项目在添加新项目时得到更新。有任何想法吗？

好的，简单地说，这就是我想要做的，你可以试试，如果你添加新项目，选定的项目也会更新：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

namespace PCListing
{
public partial class Form1 : Form
{
    private BindingList<mylist> _pcno;

    private ListBox listBox1;
    private TextBox pcno;
    private TextBox pcname;
    private Button btnAdd;

    public Form1()
    {
        InitializeComponent();

        FlowLayoutPanel layout = new FlowLayoutPanel();
        layout.Dock = DockStyle.Fill;
        Controls.Add(layout);

        listBox1 = new ListBox();
        layout.Controls.Add(listBox1);

        pcno = new TextBox();
        layout.Controls.Add(pcno);

        pcname = new TextBox();
        layout.Controls.Add(pcname);

        btnAdd = new Button();
        btnAdd.Click += btnAdd_Click;
        btnAdd.Text = "Add Item";
        layout.Controls.Add(btnAdd);

        Load += new EventHandler(Form1_Load);
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        _pcno = new BindingList<mylist>();
        _pcno.Add(new mylist() { pcno = "1", pcname = "PC01" });
        _pcno.Add(new mylist() { pcno = "2", pcname = "PC02" });

        listBox1.DisplayMember = "pcno";
        listBox1.DataSource = _pcno;
        pcno.DataBindings.Add("Text", _pcno, "pcno");
        pcname.DataBindings.Add("Text", _pcno, "pcname");
    }

    private void btnAdd_Click(object sender, EventArgs e)
    {
            _pcno.Add(new mylist() { pcno =pcno.Text, pcname = pcname.Text });
    }
    public class mylist
    {
        public string pcname { get; set; }
        public string pcno { get; set; }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:31:05.337

该问题是由 TextBox 数据绑定引起的。

```
pcno.DataBindings.Add("Text", _pcno, "pcno");
pcname.DataBindings.Add("Text", _pcno, "pcname"); 
```

在该表单中，当您在文本框中编辑值时会更新 DataSource。

您可以考虑将这些行更改为：

```
pcno.DataBindings.Add("Text", _pcno, "pcno", false, DataSourceUpdateMode.Never);
pcname.DataBindings.Add("Text", _pcno, "pcname", false, DataSourceUpdateMode.Never); 
```

# php - 等待 iframe 在 php 中加载

> ID：14958548
> 
> 赞同：0
> 
> 时间：2013-02-19T13:19:30.250
> 
> 标签：php, mysql, iframe

我在这个论坛上阅读了很多，但找不到我需要的东西。

我正在尝试使用php脚本来清理desknow数据库，我设法让它循环遍历我的所有记录并将命令发送到iframe，但我的问题是我需要它等到iframe完成加载之前执行下一个循环，因为它正在向desknow 服务器发送数据库命令。我试图在循环中休眠，但是当我这样做时，它只会等待指定时间的循环次数，然后同时输出所有 iframe。它不必像在这里所做的那样为每条记录打开一个新的 iframe，如果有一种方法可以让它在每个循环上更改 iframe 的 src，那就更好了。

```
<?php
   echo "start";

    @ $db = new mysqli('localhost', 'desknow', 'xxxxxxxx', 'desknow');

    if (mysqli_connect_errno()) {
        echo "fail";
        exit;
   }

    echo "pass";

    for ($i=1; $i <4; $i++) {
        flush();
        sleep(2);   
        $query = "select email from compte where no = $i";
        $result = $db->query($query);
        $row= $result->fetch_assoc();
        $email = htmlspecialchars(stripslashes($row['email']));
        echo "<br>";
        echo "<iframe onload=\"load()\" src=\"http://0.0.0.0:81/desknow/admin?pwd=xxxxxx&action=mail_deleteemails&username=$email&domain=mydomain.com&path=inbox&before=20121231_1300/\"></iframe>";
    }

    $result->free();
   $db->close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:24:22.827

尝试使用`ob_flush();`before `flush();`，并且`echo 'start';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:26:20.017

您的 URL 包含您的数据库服务器的 IP、用户名和密码——这是非常不安全且非常糟糕的做法。

如果你真的想更新这样的东西，你需要在客户端进行。拥有一个重新加载现有 DOM 成员的 HTML 内容的 javascript 方法将非常简单。

您还可以使用页面刷新或表单发布来完成到服务器的另一次往返，这将更新视图。

# android - 如何使用 web 服务在 2 列图像和来自 url 的文本中使用两个可滚动画廊？

> ID：14958551
> 
> 赞同：1
> 
> 时间：2013-02-19T13:19:36.397
> 
> 标签：android, scroll, android-gallery

你可以在图像中看到我有两列都有图像滚动滚动所以画廊或其他东西如果用户滚动任何列自动滚动2列如何给我这个layot的任何提示

![在此处输入图像描述](../Images/b77acc37d3844912c17bd8f67e42274e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:27:39.237

您可以使用垂直浏览器。[https://github.com/JakeWharton/Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)并且适配器的每个视图都必须包含两个选择。例子：

```
public class PicsAdapter extends PagerAdapter{
    View item1, item2;

    .....
    @Override
    public Object instantiateItem(ViewGroup container, final int position){

        View v = activity.getLayoutInflater().inflate(R.layout.account_list_item, null);

        item1 = v.findViewById(R.id.item1);
        item1.setOnClickListener(new OnClickListener(){....}

        if( position*2+1 < pics.size()){

            item2 = v.findViewById(R.id.item2);
            item2.setOnClickListener(new OnClickListener(){

                    public void onClick(View v) {

                        .... 
                    }

            });

        }else{
            //hide 
            v.findViewById(R.id.item2).setVisibility(View.INVISIBLE);
        } 

        container.addView(v);
        return v;
    }
} 
```

# sql-server-2005 - SQL Server 复制 - 重复订阅代理？

> ID：14958552
> 
> 赞同：1
> 
> 时间：2013-02-19T13:19:39.463
> 
> 标签：sql-server-2005, database-replication

我是 SQL Server 复制的新手，并将一些更改推送到现有的复制环境。它是 SQL Server 2005 SP3，带有事务复制。
我创建了一个新表，将列添加到现有表中，并添加了一些 SP。我在发布者数据库上完成了所有这些工作。我创建了一个新快照并重新初始化了订阅。新表和新列被复制到新服务器，数据同步成功，但只有1次。

紧接着，复制监视器报告错误。在 Distributor to Subscriber History 选项卡上，我收到“子查询返回超过 1 个值”的消息。尝试的命令是...

```
delete from MSsubscription_articlecolumns
    where artid=89 and
          agent_id = (
              select id from MSsubscription_agents
                  where update_mode > 0 and
                        UPPER(publisher) = UPPER('xxxx') and
                        publisher_db = N'xxxx' and
                        publication = N'xxxxx'
              ) end 
```

为什么会有重复的订阅代理？我该如何解决？感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:36:15.763

我能够通过手动编辑 MSsubscription_agents 表中的数据来解决这个问题。有 2 条记录具有相同的发布者、数据库和发布名称。我没有删除其中一条记录，而是将旧记录上的 update_mode 更改为 0，从而将其从原始问题中的问题陈述中过滤掉。然后复制过程能够通过该语句并正确运行。谢谢。

# wso2 - 尝试在业务规则服务器 WSO2 中上传规则服务时出错

> ID：14958553
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:19:40.797
> 
> 标签：wso2, wso2carbon

我正在尝试在业务规则服务器的管理控制台中上传 .aar 文件，但在上传时出现此错误：TID: [] [WSO2 BRS] [2013-02-19 18:41:29,556] ERROR {org .wso2.carbon.rulecep.service.RuleCEPDeployerService} - 无法构建服务 {org.wso2.carbon.rulecep.service.RuleCEPDeployerService} java.util.MissingResourceException：找不到捆绑包 org.apache.axis2.i18n 的资源.ProjectResourceBundle, key 操作无效：在 org.apache.axis2 的 java.util.ResourceBundle.getString(ResourceBundle.java:334) 处的 java.util.ResourceBundle.getObject(ResourceBundle.java:374) 处缺少操作名称。 i18n.MessageBundle.getMessage(MessageBundle.java:194) 在 org.apache.axis2.i18n.MessageBundle.getMessage(MessageBundle.java:83) 在 org.apache.axis2.i18n.Messages.getMessage(Messages.java:74) 在 org.apache.axis2.deployment.ServiceBuilder.processOperations(ServiceBuilder.java:717) 在 org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:355) 在 org.wso2.carbon.rulecep.service .ServiceBuilder.createAxisService(ServiceBuilder.java:266) 在 org.wso2.carbon.rulecep.service.ServiceBuilder.build(ServiceBuilder.java:146) 在 org.wso2.carbon.rulecep.service.RuleCEPDeployerService.deploy(RuleCEPDeployerService.java :77) 在 org.wso2.carbon.rule.service.RuleServiceDeployer.deploy(RuleServiceDeployer.java:69) 在 org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136) 在 org. apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813) 在 org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144) 在 org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:371) 在 org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254) 在 org.apache.axis2.deployment.RepositoryListener.startListener(RepositoryListener. java:365) at org.apache.axis2.deployment.scheduler.SchedulerTask.checkRepository(SchedulerTask.java:73) at org.apache.axis2.deployment.scheduler.SchedulerTask.run(SchedulerTask.java:94) at org.apache .axis2.deployment.scheduler.Scheduler$SchedulerTimerTask.run(Scheduler.java:93) at java.util.TimerThread.mainLoop(Timer.java:512) at java.util.TimerThread.run(Timer.java:462) TID ：[] [WSO2 BRS] [2013-02-19 18:41:29,572] INFO {org.apache.axis2.deployment.DeploymentEngine} - org.apache.axis2.deployment.DeploymentException：找不到捆绑组织的资源.apache.axis2。i18n.ProjectResourceBundle, key 操作无效：操作名称缺失 {org.apache.axis2.deployment.DeploymentEngine} TID: [] [WSO2 BRS] [2013-02-19 18:41:29,572] INFO {org.apache .axis2.deployment.DeploymentEngine} - org.apache.axis2.deployment.DeploymentException：找不到捆绑包 org.apache.axis2.i18n.ProjectResourceBundle 的资源，键操作无效：操作名称缺失 {org.apache. axis2.deployment.DeploymentEngine}缺少操作名称 {org.apache.axis2.deployment.DeploymentEngine}缺少操作名称 {org.apache.axis2.deployment.DeploymentEngine}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T06:08:07.377

试试这个方法：[http](http://wso2.com/library/articles/2013/05/eclipse-plugin-wso2-business-rules-server) : //wso2.com/library/articles/2013/05/eclipse-plugin-wso2-business-rules-server 我曾经在通过向导上传.aar文件时遇到类似你的问题，但是我按照上面的教程进行操作，效果很好。

# android - View.OnFocusChangeListener 用于 EditView 以外的视图

> ID：14958558
> 
> 赞同：1
> 
> 时间：2013-02-19T13:19:49.350
> 
> 标签：android

我有一个列表视图，当按下布局上的另一个视图时会显示该视图。如果我单击列表之外，我希望它消失。但不知何故它没有进入`onFocusChange()`方法。

是否可以`View.OnFocusChangeListener`用于除 之外的视图`EditView`？

# c# - 关闭应用程序期间“IO 异常未处理”的未知来源

> ID：14958565
> 
> 赞同：1
> 
> 时间：2013-02-19T13:20:03.833
> 
> 标签：c#, serial-port, ioexception

我试图防止在我的应用程序中使用串行连接的用户的任何奇怪行为。

**我的应用程序通过USB->serial converter**连接到设备。在我确定端口可用、已连接并准备好后，我正在设置环境以发送数据，但我也想准备好是否有任何用户拔下通信电缆，所以我使用以下代码。

```
try
{
  serialPort.WriteLine("BT\r"); 
}
catch (IOException ioe)
{
  Console.WriteLine(ioe.Message);
  currentCommunicationState = DEVICE_COMMUNICATION_STATES.IDLE;
  // other stuff which set application in idle mode; buttons statuses, etc
} 
```

上面的异常处理得很好。应用程序进入空闲模式，我可以使用它，但是......当我关闭应用程序时，我得到下一个异常**，没有任何更多指定的细节**。我找不到引发第二个异常的地方或如何保持这种情况。

```
System.IO.IOException was unhandled
Message="Specified port doesn't exist"
Source="System"
StackTrace:
   w System.IO.Ports.InternalResources.WinIOError(Int32 errorCode, String str)
   w System.IO.Ports.SerialStream.Dispose(Boolean disposing)
   w System.IO.Ports.SerialStream.Finalize()
InnerException: 
```

从控制台登录

```
Port 'COM29' nie istnieje. \\port COM28 doesn't exist - called from my exception handler
A first chance exception of type 'System.IO.IOException' occurred in System.dll
The thread 0x14d4 has exited with code 0 (0x0).
The thread 0x1e98 has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:26:09.060

抛出第一个异常时，您需要摆脱`SerialStream`用于通信的异常。您得到的例外是试图处理该流的程序。

在您的异常处理程序中，关闭串行端口流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:29:43.830

看来[这篇文章有一些](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/8b02d5d0-b84e-447a-b028-f853d6c6c690)关于这个问题的信息。简而言之，`Dispose`移植的方法是有缺陷的，从而导致终结器中的错误。IMO 这是错误的行为。

如果您确定在正确的时间处理了所有内容并且仍然遇到此问题，则应将 Port 类子类化以在`Dispose(bool disposing)`方法的覆盖中放置一些更健壮的错误处理。您可以将基类调用包装在一些 try/catch 中。

# sql-server - ISNULL 通配符 '%' 搜索不返回任何记录

> ID：14958566
> 
> 赞同：2
> 
> 时间：2013-02-19T13:20:13.377
> 
> 标签：sql-server

作为 SQL Server 中搜索查询中 WHERE 子句的条件之一，我尝试使用 ISNULL 按 courseId 进行搜索。

当使用除@currentUserId 之外的所有空值执行查询时，如下所示，查询不返回任何记录。

我的 SQL：

```
 DECLARE @currentUserId int = '6'
    DECLARE @searchString nvarchar(MAX) = NULL
    DECLARE @courseId nchar(10) = NULL
    DECLARE @dateFrom date = NULL
    DECLARE @dateTo date = NULL

    SELECT [questionId],[Question].[moduleId],[questionDate],[questionTopic]
    FROM [dbo].[Question],[dbo].[Module],[dbo].[ModuleCourse]
    WHERE [lecturerId] = @currentUserId AND

    ([dbo].[Question].[moduleId] = [dbo].[Module].[moduleId] AND
    [dbo].[Module].[moduleId] = [dbo].[ModuleCourse].[moduleId]) AND

    ([dbo].[Question].[questionTopic] LIKE ISNULL('%' + @searchString + '%','%') OR
    [dbo].[Question].[questionText] LIKE ISNULL('%' + @searchString + '%','%')) AND

    [dbo].[ModuleCourse].[courseId] = ISNULL(@courseId,'%') AND

    ([dbo].[Question].[questionDate] >= ISNULL(@dateFrom,(SELECT MIN([questionDate])
                                                                FROM [dbo].[Question])) AND
    [dbo].[Question].[questionDate] <= ISNULL(@dateTo,(SELECT(GETDATE())))) 
```

当线

```
 [dbo].[ModuleCourse].[courseId] = ISNULL(@courseId,'%') AND 
```

被注释掉，结果按预期返回。([dbo].[ModuleCourse].[courseId] 是 PK；nchar(10))

似乎通配符 % 在这种情况下不起作用；我不知道为什么。请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:23:59.440

如果`@courseId`为 null，则将`courseId`与 string进行比较`'%'`。`=`运算符不使用通配符。

您可以使用`like`代替`=`，或将条件写为：

```
(@courseId is null or [dbo].[ModuleCourse].[courseId] = @courseId) AND 
```

# iphone - 按下按钮时如何关闭 UISplitViewController

> ID：14958571
> 
> 赞同：2
> 
> 时间：2013-02-19T13:20:41.857
> 
> 标签：iphone, ios, objective-c, ipad, uisplitviewcontroller

在我的 iPad 应用程序中。我正在努力`UISplitViewController`。在`DetailViewController`里面`UISplitViewController`有按钮。当按下该按钮时，它会导航到另一个视图控制器。在另一个视图控制器中我不需要`UISplitViewController`。如何解雇`UISplitViewController`。我已经尝试了很多并用谷歌搜索，但我没有找到任何解决方案。它正在消磨我的时间，所以如果有人对此进行了研究，请指导我并发布示例代码。

我正在使用此代码

```
-(void)imgButtonpressed:(id)sender
{
    MenuItemsListViewController *menuview=[[MenuItemsListViewController alloc]initWithNibName:@"MenuItemsListViewController" bundle:nil];

    menuview.modelArray = imagesArray;
    menuview.image = [sender tag]*2;
    [self.navigationController pushViewController:menuview animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T07:00:18.963

我在使用 UISplitView 时遇到了同样的问题。事实上，当我终于弄清楚如何在 rootviewcontroller 上推送 splitview 时，我现在仍然遇到问题。

所以，我相信有很多新手对这个问题感到沮丧。我试图通过大量阅读来找出解决方案。

这就是我所做的（你可以对任何其他视图做同样的事情）：

这将关闭一个拆分视图并推送另一个拆分视图：

```
SplitViewController *split = [[SplitViewController alloc]init];
    self.leftController = [[LeftViewController alloc]init];
    UINavigationController *leftNav = [[UINavigationController alloc]initWithRootViewController:leftController];
    self.rightController = [[RightViewController alloc]init];
    UINavigationController *rightNav = [[UINavigationController alloc]initWithRootViewController:rightController];
    split.viewControllers = [NSArray arrayWithObjects:leftNav,rightNav, nil];
    split.delegate = self.rightController;

    YourAppDelegate *delegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
    delegate.window.rootViewController = split; 
```

第二个选项是：

```
NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];

    [allViewControllers replaceObjectAtIndex:0 withObject:split];
    self.navigationController.viewControllers = allViewControllers; 
```

希望这对遇到同样问题的其他人有所帮助。

干杯!

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T13:30:19.470

Apple 不希望您将拆分视图控制器推入导航控制器。他们的指导方针说，如果你使用 UISplitViewController，它必须在你的应用程序中始终可见（因此你不能删除它），除非用模态视图控制器覆盖它。

如何以模态方式展示您的视图控制器？

```
MenuItemsListViewController *menuview=[[MenuItemsListViewController alloc]initWithNibName:@"MenuItemsListViewController" bundle:nil];

menuview.modalPresentationStyle = UIModalPresentationFullScreen;
[self.splitViewController presentViewController:menuview animated:YES completion:nil]; 
```

来源：[我们如何将 UISplitVIewController 推送到 UINavigationController](https://stackoverflow.com/questions/6855454/how-can-we-push-uisplitviewcontroller-to-a-uinavigationcontroller)

# android - EditText：Edittext 未显示在微调器下方

> ID：14958572
> 
> 赞同：0
> 
> 时间：2013-02-19T13:20:49.697
> 
> 标签：android

我使用了微调器，下面我使用了文本视图和编辑文本，但是当我运行应用程序时它没有显示。我不明白为什么它没有在模拟器上显示。另外我已经在.java中声明了edittext，然后edittext也没有显示..我认为它是微调器的bcoz。有人知道为什么会这样吗？

这是我的完整 .xml 代码，

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/background">

<TextView
    android:id="@+id/textView_navbar_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/navigation"
    android:gravity="center"
    android:text="@string/string_subscription"
    android:textColor="#ffffff"
    android:textSize="20sp" />

<ImageView
    android:id="@+id/imageView_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5pt"
    android:contentDescription="@string/todo_image"
    android:src="@drawable/bg_transparent" />

<TextView
    android:id="@+id/textView_startDate_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView_navbar_susa"
    android:layout_marginLeft="44dp"
    android:layout_marginTop="76dp"
    android:text="@string/string_startDate_susa" />

<EditText
    android:id="@+id/editText_startDate_susa"
    android:layout_width="150sp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView_startDate_susa"
    android:layout_alignBottom="@+id/textView_startDate_susa"
    android:layout_alignParentRight="true"
    android:layout_marginRight="50sp"
    android:background="@drawable/subscription_textarea_gray"
    android:inputType="date"
    android:paddingLeft="10sp"
    android:focusable="false" />

<TextView
    android:id="@+id/textView_endDate_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView_startDate_susa"
    android:layout_below="@+id/editText_startDate_susa"
    android:layout_marginTop="38dp"
    android:text="@string/string_endDate_susa" />

<EditText
    android:id="@+id/editText_endDate_susa"
    android:layout_width="150sp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView_endDate_susa"
    android:layout_alignBottom="@+id/textView_endDate_susa"
    android:layout_alignLeft="@+id/editText_startDate_susa"
    android:layout_alignRight="@+id/editText_startDate_susa"
    android:background="@drawable/subscription_textarea_gray"
    android:inputType="date"
    android:paddingLeft="10sp" 
    android:focusable="false"/>

<TextView
    android:id="@+id/textView_type_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView_endDate_susa"
    android:layout_below="@+id/editText_endDate_susa"
    android:layout_marginTop="38sp"
    android:text="@string/string_subscription_type" />

<Spinner
    android:id="@+id/spinner_type_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText_endDate_susa"
    android:layout_alignRight="@+id/editText_endDate_susa"
    android:layout_centerVertical="true" />

<TextView
    android:id="@+id/textView_amount_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView_type_susa"
    android:layout_below="@+id/spinner_type_susa"
    android:layout_marginTop="230sp"
    android:text="@string/string_amount_susa" />

<EditText
    android:id="@+id/editText_amount_susa"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/spinner_type_susa"
    android:layout_alignRight="@+id/spinner_type_susa"
    android:layout_alignTop="@+id/textView_amount_susa"
    android:background="@drawable/subscription_textarea_gray"
    android:paddingLeft="10sp"
    android:inputType="number" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:28:24.737

你有“layout_below”，所以我想你正在使用 RelaviteLayout，如果你需要添加：

android:layout_below="@+id/textView_amount_susa"

在您的 EditText 中。

如果不是真的发布完整的 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-04T11:53:25.000

```
 <?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" 
        android:background="@drawable/background">

    <TextView
        android:id="@+id/textView_navbar_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/navigation"
        android:gravity="center"
        android:text="@string/string_subscription"
        android:textColor="#ffffff"
        android:textSize="20sp" />

    <ImageView
        android:id="@+id/imageView_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5pt"
        android:layout_below="@+id/textView_navbar_susa"
        android:contentDescription="@string/todo_image"
        android:src="@drawable/bg_transparent" />

    <TextView
        android:id="@+id/textView_startDate_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView_navbar_susa"
        android:layout_marginLeft="44dp"
         android:layout_below="@+id/imageView_navbar_susa"
        android:layout_marginTop="76dp"
        android:text="@string/string_startDate_susa" />

    <EditText
        android:id="@+id/editText_startDate_susa"
        android:layout_width="150sp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView_startDate_susa"
        android:layout_alignBottom="@+id/textView_startDate_susa"
        android:layout_alignParentRight="true"
        android:layout_marginRight="50sp"
        android:layout_below="@+id/textView_startDate_susa"
        android:background="@drawable/subscription_textarea_gray"
        android:inputType="date"
        android:paddingLeft="10sp"
        android:focusable="false" />

    <TextView
        android:id="@+id/textView_endDate_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView_startDate_susa"
        android:layout_below="@+id/editText_startDate_susa"
        android:layout_marginTop="38dp"
        android:layout_below="@+id/editText_startDate_susa"
        android:text="@string/string_endDate_susa" />

    <EditText
        android:id="@+id/editText_endDate_susa"
        android:layout_width="150sp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView_endDate_susa"
        android:layout_alignBaseline="@+id/textView_endDate_susa"
        android:layout_alignBottom="@+id/textView_endDate_susa"
        android:layout_alignLeft="@+id/editText_startDate_susa"
        android:layout_alignRight="@+id/editText_startDate_susa"
        android:background="@drawable/subscription_textarea_gray"
        android:inputType="date"
        android:paddingLeft="10sp" 
        android:focusable="false"/>

    <TextView
        android:id="@+id/textView_type_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView_endDate_susa"
        android:layout_below="@+id/editText_endDate_susa"
        android:layout_marginTop="38sp"
        android:layout_below="@+id/editText_endDate_susa"
        android:text="@string/string_subscription_type" />

    <Spinner
        android:id="@+id/spinner_type_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText_endDate_susa"
        android:layout_alignRight="@+id/editText_endDate_susa"
        android:layout_below="@+id/textView_type_susa"
        android:layout_centerVertical="true" />

    <TextView
        android:id="@+id/textView_amount_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView_type_susa"
        android:layout_below="@+id/spinner_type_susa"
        android:layout_below="@+id/spinner_type_susa"
        android:layout_marginTop="230sp"
        android:text="@string/string_amount_susa" />

    <EditText
        android:id="@+id/editText_amount_susa"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView_amount_susa"
        android:layout_alignLeft="@+id/spinner_type_susa"
        android:layout_alignRight="@+id/spinner_type_susa"
        android:layout_alignTop="@+id/textView_amount_susa"
        android:background="@drawable/subscription_textarea_gray"
        android:paddingLeft="10sp"
        android:inputType="number" />

     </RelativeLayout> 
```

你可以这样使用，或者你可以使用线性布局并设置垂直方向，或者如果你想在不同的位置设置布局请发送线框，你想要什么样的布局

# python - 如何在不断更新的表中选择一行？

> ID：14958577
> 
> 赞同：0
> 
> 时间：2013-02-19T13:21:03.197
> 
> 标签：python, pyqt, pyqt4, qtableview

伙计们。我正在开发一个用于控制一些机器人的 GUI。有一个表格显示该机器人的当前状态数据。并且该表格会根据测试服务器中的数据定期更新。当更新未连接时，很容易在表格中选择一行并保存所选行的数据.但是，当服务器连接时，无法选择一行（当您单击该行时，选定的行只会在闪烁中突出显示并消失）。我尝试使用一些打印方法来查看发生了什么里面，好像更新运行的时候slots不会实现。而且更新也会频繁的取消选择行。我正在考虑手动选择行的时候阻塞更新，然后自动选择同一个行逻辑和 selectRow() 方法。

1.updating 方法，作为 Gui Controller 类中的一个槽来管理输入

```
def tbRobotChanged(self, currentCell):

    # get the selected cell's index from currentCell,Implement the Slot method
    tablemodel= currentCell.model() 
    #get the model of the currentcell
    firstColumn = tablemodel.index(currentCell.row(),0)
    #change it to the first column in the row with the robot name

    self.statusBar().showMessage("Selected Robot is " +
                                 firstColumn.data().toString())
    self.selected_robot = int(firstColumn.data().toString())
    # show the selected robot name in the statusbar 
```

2.table 定义，这是定义主窗口的 Gui 类的一部分：

```
def initRobotsFrame(self, rf):
    hbox = QtGui.QHBoxLayout()
    self.robot_table = QtGui.QTableView()
    self.table_header = ['Robot', 'PosX', 'PosY', 'Heading']
    tm = RobotTableModel([[0, 0, 0, 2],[1, 1,2,4]],
                         self.table_header)
    self.robot_table.setModel(tm)
    vh = self.robot_table.verticalHeader()
    vh.setVisible(False)
    self.robot_table.resizeColumnsToContents()
    self.robot_table.setSizePolicy(QtGui.QSizePolicy(
        QtGui.QSizePolicy.Minimum,
        QtGui.QSizePolicy.Minimum))
    hbox.addWidget(self.robot_table)
    self.selected_robot = 0

    block_true=GUIController.robot_data.blockSignals(True)
    GUIController.robot_data.blockSignals(block_true)
    # select table by row instead of by cell:
    self.robot_table.setSelectionBehavior(
        QtGui.QAbstractItemView.SelectRows)        
    # set the signal and slot using selectionModel:
    self.robot_table.selectionModel().currentRowChanged.connect(
        self.tbRobotChanged) 
    self.robot_table.selectionModel().currentRowChanged.connect(
        self.updateActiveRobot)
    # implement a statusbar to test the table selection functionality:
    self.statusBar().showMessage("Ready")         
    rf.setLayout(hbox) 
```

3.slot获取选中行的数据：

```
def tbRobotChanged(self, currentCell):

    # get the selected cell's index from currentCell,Implement the Slot method
    tablemodel= currentCell.model() 
    #get the model of the currentcell
    firstColumn = tablemodel.index(currentCell.row(),0)
    #change it to the first column in the row with the robot name

    self.statusBar().showMessage("Selected Robot is " +
                                 firstColumn.data().toString())
    self.selected_robot = int(firstColumn.data().toString())
    # show the selected robot name in the statusbar 
```

# java - 传递不正确的媒体类型时无法捕获 WebApplicationException

> ID：14958579
> 
> 赞同：0
> 
> 时间：2013-02-19T13:21:09.640
> 
> 标签：java, exception, jersey

我想捕获所有类型的，`Throwable`以便客户端在出现异常时不会暴露在我们的内部堆栈跟踪中。

我使用`ExceptionMapper<Throwable>`如下：

```
@Provider
public class MappableContainerExceptionMapper implements ExceptionMapper<Throwable>
{

  @Override
  public Response toResponse(Throwable exception)
  {
   return Response.status(Response.Status.BAD_REQUEST).entity("caught").build();
  }

} 
```

但是，在传递时`Content-Type=asdfasdf`，我会向客户端显示以下堆栈跟踪：

```
javax.ws.rs.WebApplicationException: java.lang.IllegalArgumentException: Error parsing media type 'sdfsdfdvfv'
    com.sun.jersey.server.impl.model.HttpHelper.clientError(HttpHelper.java:265)
    com.sun.jersey.server.impl.model.HttpHelper.getContentType(HttpHelper.java:91)
    com.sun.jersey.server.impl.model.HttpHelper.getContentType(HttpHelper.java:77)
    com.sun.jersey.spi.container.ContainerRequest.getMediaType(ContainerRequest.java:651)
    com.sun.jersey.spi.container.servlet.WebComponent.filterFormParameters(WebComponent.java:832)
    com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:407)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
</pre></p><p><b>root cause</b> <pre>java.lang.IllegalArgumentException: Error parsing media type 'sdfsdfdvfv'
    com.sun.jersey.core.impl.provider.header.MediaTypeProvider.fromString(MediaTypeProvider.java:79)
    com.sun.jersey.core.impl.provider.header.MediaTypeProvider.fromString(MediaTypeProvider.java:53)
    javax.ws.rs.core.MediaType.valueOf(MediaType.java:119)
    com.sun.jersey.server.impl.model.HttpHelper.getContentType(HttpHelper.java:89)
    com.sun.jersey.server.impl.model.HttpHelper.getContentType(HttpHelper.java:77)
    com.sun.jersey.spi.container.ContainerRequest.getMediaType(ContainerRequest.java:651) 
```

我也想抓住这一点，以便向客户端显示漂亮的 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:43:53.677

这看起来像是一个边界实现错误——但无论哪种方式都可以争论。[规范](http://download.oracle.com/otn-pub/jcp/jaxrs-1.0-fr-eval-oth-JSpec/jaxrs-1.0-final-spec.pdf)的第 3.7.2 节对不支持的输入媒体类型的处理有这样的说法：

> 请求实体主体的媒体类型（如果有）是支持的输入数据格式（参见第 3.5 节）。如果没有方法支持请求实体主体的媒体类型，则实现必须生成带有不受支持的媒体类型响应（HTTP 415 状态）且没有实体的 WebApplicationException。必须按照 3.3.4 节中的 4 所述处理异常。

所以问题是，如果无法解析的内容属于“不支持的输入数据格式”的范畴。我猜泽西岛的实施团队决定不这样做。所以他们抛出了`WebApplicationException` ***一个***实体主体，它由您的异常提供者直接压缩：

> WebApplicationException 的实例必须按如下方式映射到响应。如果异常的响应属性不包含实体并且异常映射提供程序（参见第 4.4 节）可用于 WebApplicationException，则实现必须使用提供程序来创建新的响应实例，**否则直接使用响应属性**。

你无法解决这个问题，因为代码在 Jersey 库本身中——你最希望做的就是在[错误报告](http://java.net/jira/browse/JERSEY/)中争论你的情况。

# actionscript-3 - AS3 类实例名称

> ID：14958583
> 
> 赞同：1
> 
> 时间：2013-02-19T13:21:20.597
> 
> 标签：actionscript-3, class

我真的很想知道。我制作了一个电影剪辑类 Apple，我编写了一个函数来创建一个名为“apple”的新实例。每次将新实例推入数组“apples”时。我调用该函数 5 次，得到 5 个苹果。我可以通过调用它们来操纵它们，即苹果[0]。当我追踪我的数组时，我看到了 5 个 [object Apple] 东西。所以也许我不太了解 AS3 对象的结构，但**每个对象不应该有一个名字吗？**

当我设置 apple.name 并获得一个具有 5 个不同名称的数组时，我无法通过*apple1.x = 10 之*类的名称来操作对象。**如果每个苹果都有自己的坐标，计算机如何知道哪个苹果在哪里？调用它们的唯一方法是：apples[0]-apples[4]？如果我创建一个对所有苹果都应该相同的代码，我应该如何将函数寻址到“this”？**因为当我编写类代码时，我还没有任何名字......

例如，如果我想让 Apple 类成为一个可以拖动的图片（MovieClip），创建任意数量的苹果，最多一百万，我不可能添加*apples[0].addEventListener, apples[1].addEventListener ... apples[1000000].addEventListener*到代码中。**我如何使它成为全球性的？**

当我直接为特定实例编码时，我在问原因，它有一个名称，我确切地知道我在处理什么。和一个班级一起工作，制作很多我不太喜欢的东西......对不起，我是绿色的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:52:10.477

您无需名称即可访问和操作您的实例。

你可以这样做：

```
var apples:Array = new Array();

for (var i:int = 0; i < 100; i++)
{
    var apple:Apple = new Apple();
    apples.push(apple);
    apple.x = Math.random() * 500;
    apple.y = Math.random() * 500;
    addChild(apple);
    apple.addEventListener(MouseEvent.CLICK, onAppleClick);

}

function onAppleClick(e:MouseEvent):void
{
    var ind:int = apples.indexOf(e.currentTarget);
    var apple:Apple = apples[ind];
    trace(ind);
    apples[ind].visible = false;
    //or 
    //apple.visible = false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:40:39.523

一样的问题吧？:)

例如`Apple extends Sprite`and 继承 property `name`。

它是公开的，这意味着您可以更改其名称。

```
var apple:Apple = new Apple() ;
apple.name = "MegaApple" ; 
```

此外，如果您将苹果添加到舞台上，您可以通过名称获得他。

```
stage.addChild(apple) ; 
```

拿回苹果：

```
var oldApple:Apple = stage.getChildByName("MegaApple") ; 
```

但这绝不意味着您可以像这样使用苹果： `MegaApple.move()`- 因为苹果的名称应该是苹果的属性，而不是变量的名称。

当然，你可以手动创建很多苹果：

```
var apple1 = new Apple() ;
var apple2 = new Apple() ;
var apple3 = new Apple() ; 
```

但是，如果它们的行为方式都相同，那么这样做就没有意义了。这就是你将它们存储到数组中的原因。

希望你明白我的意思。

# python - 缩放 matplotlib 图，以便显示小/大的正/负差异

> ID：14958590
> 
> 赞同：3
> 
> 时间：2013-02-19T13:21:43.777
> 
> 标签：python, matplotlib, plot, ipython-notebook

![在此处输入图像描述](../Images/81ffbbc01e32fd965e086b529f3ab37d.png)

该图应该显示时间差异，可以是负值也可以是正值。有些差异非常小，而有些差异非常大。

我可以缩放 x 轴，使分辨率在 x = 0 附近非常精细，而在远离 x = 0 的地方粗糙吗？是否可以有一个从 x = 0 向外的对数刻度？

编辑：

正如@Evert 所建议的，这为我解决了这个问题：

```
ax = gca()
...
ax.set_xscale("symlog") 
```

并产生这个情节：

![在此处输入图像描述](../Images/e4ae52e56d019d1799d3c254f631994f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:54:23.427

您可以使用以下`symlog`设置`xscale()`： http: [//matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xscale](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xscale)

除了零附近的有限部分（可以使用更多关键字设置，请参阅文档）外，它以对数方式缩放（也在负侧）：该部分是线性缩放的，从而避免了所有`log(0)`问题。

有关示例，请参见[此处。](https://stackoverflow.com/questions/6681975/matplotlibs-symlog-option-how-to-prevent-curves-that-come-back)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T14:18:17.330

我会制作两个子图：在右侧子图中绘制正时间，并在左侧子图中绘制 abs(负时间)，并[反转 x-axis](https://stackoverflow.com/questions/2051744/pyplot-reverse-y-axis)。

> 是否可以有一个从 x = 0 向外的对数刻度？

不，因为对数图不显示零——当你接近 log-x 轴的“左端”时，你会在对数空间中达到负无穷大，所以你不能越过零到达真正的负值。你必须以某种方式消除零。

# visual-studio-2012 - Web 项目模板未出现在 Visual Studio 2012 中

> ID：14958592
> 
> 赞同：2
> 
> 时间：2013-02-19T13:21:50.573
> 
> 标签：visual-studio-2012, durandal

我正在评估单页应用程序框架，我刚刚从[ScottGu 的页面](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)下载并安装了各种模板。

但是，当我尝试创建一个“新的 ASP.NET MVC 4 项目”时，如 Durandal 页面上的详细说明，[在这里](http://durandaljs.com/documentation/Visual-Studio-Project-Template.html)，我只看到默认的 Visual Studio 安装模板。

我已经签入`C:\Users\me\AppData\Local\Microsoft\VisualStudio\11.0\Extensions`，我可以看到一个`eislr0na.wgk`包含 Durandal 位的目录（称为 ）。我已删除文件`Extensions`夹中的 .cache 文件并重新启动 Visual Studio。

但是，我在对话框中看不到任何单页模板。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:39:12.207

要使用新模板，您必须安装[Visual Studio 2012.2 更新](http://go.microsoft.com/fwlink/?LinkId=282650)。

# ruby-on-rails-3 - DalliError：没有可用的服务器，但仍然写入/读取片段

> ID：14958593
> 
> 赞同：1
> 
> 时间：2013-02-19T13:21:52.493
> 
> 标签：ruby-on-rails-3, memcached, dalli

我在我的服务器上检查了我的 production.log，每次怀疑代码读取或写入缓存时都会看到这些行：

```
DalliError: No server available  
Write fragment views/artists/522-...  
DalliError: No server available  
Read fragment views/artists/92-... 
```

为什么以及这是我需要担心的事情？我正在使用 dalli (2.6.2)、cache_digests (0.2.0)、rails (3.2.11) 和 memcached (1.4.2)。

我在安装memcached的时候，碰巧用了sudo，会不会跟这个有关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T03:22:06.327

这可能与 Dalli 默认为 localhost 的事实有关

自 2.6.4 以来已解决 - [https://github.com/mperham/dalli/pull/266](https://github.com/mperham/dalli/pull/266)

# bash - 如何使用 sort 和 getopts 使用 bash 脚本对文件进行排序？

> ID：14958594
> 
> 赞同：0
> 
> 时间：2013-02-19T13:21:52.580
> 
> 标签：bash, shell, sorting, getopts

这是我按列对文件进行排序的 bash 脚本。

```
while getopts "123456" flag

do
sort -t: -k $flag names.txt

done 
```

现在它完全符合我的需要，但我也需要将文件名作为参数。

现在的输入是 ./sortScrpt -2。

我需要输入看起来像 ./sortScript -2 names.txt

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:37:33.057

将您的 bash 脚本更改为：

```
while getopts "123456" flag

do
sort -t: -k $flag "${2}"

done 
```

获取参数你可以使用 "${2}" 作为第二个参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:38:25.143

让你开始的东西：

```
#!/bin/bash

while getopts ":2:" opt; do
  case $opt in
    2)
      echo "-2 was triggered, Parameter: $OPTARG" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done 
```

输出：

```
$ ./a.sh -2 names.txt
-2 was triggered, Parameter: names.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:50:16.200

如果您需要多个排序参数，则可以将脚本更新为：

```
#first parse -f fname    
getopts "f:" f
fname=$OPTARG

while getopts "123456" flag

do
    sort -t: -k $flag $fname
done 
```

您可以将此脚本运行为

```
$ ./script.sh -f names.txt -2 
```

或用于多种

```
$ ./script.sh -f names.txt -2 -3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:48:01.657

**为“sort-arg then file”要求+错误检查修改了**编辑：****

 **```
#!/bin/bash

sflag=""
sfile=""

while getopts "123456" flag
do
        [ -z "$sflag" ] && sflag="$flag"
done
shift $(($OPTIND - 1))
sfile="$1"

if [[ "$sflag" ]] && [[ "$sfile" ]];
then
    sort -t: -k $sflag $sfile
else
    # error - bail out
    echo "usage: $0 -[123456] file.txt" >&2
    exit 1
fi 
```

**OPTIND**由 getopts 设置，并且将指向**$#+1**（例如，没有额外参数）或指向与您的 getopts-flags 不匹配的第一个参数。**

# android - 在android中使用SOAP发送多个值作为参数？

> ID：14958595
> 
> 赞同：0
> 
> 时间：2013-02-19T13:21:55.693
> 
> 标签：android

有人可以指导我吗？我对在 android 中使用 KSOAP 完全陌生。以下是我在 XML 中的详细信息。我想在 webservice 中发送详细信息。请告诉我如何添加属性，我在那里做错了什么吗？

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CheckLoginWithIPhoneData xmlns="http://tempuri.org/">
      <UserName>string</UserName>
      <Pin>string</Pin>
      <Password>string</Password>
      <DeviceID>string</DeviceID>
    </CheckLoginWithIPhoneData>
  </soap:Body>
</soap:Envelope> 
```

在java代码中我已经这样做了：

```
public void showdetails() 
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);

        request.addProperty("UserName","sometext");
        request.addProperty("Pin","sometext");
        request.addProperty("Password","sometext");
        request.addProperty("DeviceID","sometext");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope( SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;

        try {

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug=true;
            androidHttpTransport.call(SOAP_ACTION1, envelope);
            Log.e("RESPONSE",""+androidHttpTransport.responseDump);

            SoapObject result = (SoapObject) envelope.bodyIn;
            Log.e("result",""+result);

            if (result != null)

            {
                Log.e("val", "" + result.getProperty(0).toString());
            }

            else

            {
                Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
            }

        } catch (Exception e) {

            e.printStackTrace();

        }

    } 
```

我已经在后台调用了该方法。

但是，当我尝试打印 RESPONSE Log.e("RESPONSE",""+androidHttpTransport.responseDump); 时出现以下错误

`<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><soap:Fault><faultcode>soap:Client</faultcode><faultstring>` System.Web.Services.Protocols.SoapException：服务器无法识别 HTTP 标头 SOAPAction 的值：[https](https://tempuri.org/CheckLoginWithIPhoneData) ://tempuri.org/CheckLoginWithIPhoneData 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:35:29.113

```
 request = new SoapObject(Util.getInstance().NAMESPACE, method);

    AuthenticateRequest authenticateRequest = (AuthenticateRequest) params[0];

    SoapObject authenticate = new SoapObject(Util.getInstance().NAMESPACE, "CheckLoginWithIPhoneData");

    authenticate.addProperty("UserName", <value>);
    authenticate.addProperty("Pin", <value>);
    authenticate.addProperty("Password", <value>);
    authenticate.addProperty("DeviceID", <value>);

    PropertyInfo propertyInfo1 = new PropertyInfo();
    propertyInfo1.namespace = Util.getInstance().NAMESPACE;
    propertyInfo1.name = "CheckLoginWithIPhoneData";

    request.addProperty(propertyInfo1, authenticate); 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:52:31.733

确保您具有与 SOAP 请求相关的变量，如下所示：

通常`SOAP_ACTION`应该是`NAMESPACE`和的组合`METHOD_NAME`

> **SOAP_ACTION=命名空间+方法名**

以上变量的样本值：

```
private static final String SOAP_ACTION = "http://uri.org/GetFormData";
private static final String METHOD_NAME = "GetFormData";
private static final String NAMESPACE = "http://uri.org/";
private static final String URL = "http://inukshk.com/getformsdata/sample.asmx"; 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:56:47.650

您编写的 String 类型可能不正确，例如“Pin”标签，如果它只接受整数，并且如果您编写 char，它会给您一个错误。

# python - 如何从 LAN 上的另一台 PC 访问 Bottle 开发服务器？

> ID：14958597
> 
> 赞同：14
> 
> 时间：2013-02-19T13:21:57.397
> 
> 标签：python, windows, web-services, bottle

我在一台 PC 上运行 bottle.py 教程，我可以使用

```
http://localhost:8080/hello/world 
```

但是，当我尝试从 LAN 上的另一台 PC 访问它（IP 地址为 192.168.1.10）时，使用

```
http://192.168.1.10:8080/hello/world 
```

我收到“无法打开页面”错误。

我在 PC 上运行了 Apache Web 服务器，我可以毫无问题地访问 Web 服务器

```
http://192.168.1.10 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-19T13:26:46.757

假设您正在谈论[快速入门：“Hello World”</a> 示例：](http://bottlepy.org/docs/dev/tutorial.html#quickstart-hello-world)

 [更改此行：

```
run(host='localhost', port=8080, debug=True) 
```

要绑定到计算机的公共 IPv4 地址：

```
run(host='192.168.1.10', port=8080, debug=True) 
```](http://bottlepy.org/docs/dev/tutorial.html#quickstart-hello-world) 

[或者到此监听所有接口，包括外部接口 [ **Source** :](http://bottlepy.org/docs/dev/tutorial.html#quickstart-hello-world) [`bottle.run`, Bottle API Reference](http://bottlepy.org/docs/dev/api.html#bottle.run) ]：

```
run(host='0.0.0.0', port=8080, debug=True) 
```

然后，您应该能够`http://192.168.1.10:8080/hello/world`从本地 PC 以及 LAN 上的另一台 PC 访问。或者，使用完全限定域名 (FQDN)。

如果连接仍然被拒绝，请检查您的防火墙设置。

# java - Glassfish 完成请求后未关闭线程

> ID：14958598
> 
> 赞同：1
> 
> 时间：2013-02-19T13:21:59.843
> 
> 标签：java, linux, servlets, glassfish-3

我有一个具有 doPost 方法的 Java Servlet，当 doPost 完成时，我认为 Glassfish 会关闭连接，但我错了。Servlet 位于 Linux 服务器上，在 300 个帖子后返回线程数：

```
ps -eLFU glassfish | grep domain1 | wc -l
362 
```

在任何帖子之前，线程数是 72。响应都是成功的，但我不明白为什么 Glassfish 没有关闭连接。我正在使用 Glassfish 的默认配置。

我试图解决这个问题的原因是当我的 servlet 在某个时候被命中时，我在 Linux 服务器上收到了这个错误：

```
su: cannot set user id: Resource temporarily unavailable 
```

在 /etc/security/limits.conf 我有这个：

```
glassfish hard nproc 4192
glassfish soft nproc 2024 
```

我不想更新limits.conf，而是尝试确保它没有达到这些数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:55:58.810

glassfish 是否保持连接打开？还是线程正在运行？它们是不同的东西。线程可能会启动，但不会关闭以在将来为新连接提供服务。这是标准行为。您可以使用“kill -3 PID”进行线程转储，其中 PID 是 glassfish 进程的进程 ID？这会将所有正在运行的线程转储到标准输出，您可以看到每个线程在做什么。在那里，您将能够查看它是否卡在您的代码中或等待新连接。您可以[在此处](http://docs.oracle.com/cd/E19879-01/821-0177/abgax/index.html)找到有关如何获取线程转储的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:42:06.563

发现问题是代码问题。servlet 使用客户端来调用 Web 服务，并且客户端需要是单例的。最初我为每个 POST 创建一个客户端到 servlet，它在 glassfish 下创建了很多线程。一旦我让客户端成为单例，线程数就会下降很多。

# php - 如何使用javascript访问php变量？

> ID：14958602
> 
> 赞同：0
> 
> 时间：2013-02-19T13:22:11.240
> 
> 标签：php, javascript, ajax

如何使用javascript访问php变量？只有一种方法可以在 javascript 中编写代码（如 var a={?echo $variable}）吗？

推荐一些关于php和javascipt的书籍（包括项目）？不知道如何在项目中使用知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:25:39.597

是的，你是对的。
因为 PHP 是在 JavaScript*之前*执行的，所以以后不能更改它，但可以执行以下操作：

```
<? $aVar = "whatever"; ?>
...
<script>
    var aVar = "<? echo $aVar; ?>"; // note the quotes! (SO's highlighter renders this incorrectly, starting a PHP block inside quotes is valid and will be recognized.)
</script> 
```

这会将其发送给客户端：

```
<script>
    var aVar = "whatever"; // note the quotes!
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:25:12.000

```
var a=<?php echo $variable; ?> 
```

PHP 在服务器端运行，js 在客户端运行，所以我猜没有其他你能得到它。或者你需要使用 AJAX

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:25:36.100

我看不出你怎么能用任何其他方法做到这一点。PHP 是服务器端，而 JS 在客户端的 PC 上执行（而不是在 Web 服务器上）。理论上和实践上都是不可能的。

# android - 如何用jsoup动态抓取每个表tr的第一个字段？

> ID：14958604
> 
> 赞同：0
> 
> 时间：2013-02-19T13:22:18.003
> 
> 标签：android, jsoup

我想将这个表的名称和时间表分开存储在数据库中，验证字段中是否已经包含一些数据。

```
<table class="linha-horas">
 <tbody>
  <tr>
   <th><h5>Profipo p/ Itaum</h5></th>
   <th><h5>Itaum p/ Ulysses G</h5></th>
   <th><h5>Ulysses G. p/ Itaum</h5></th>
   <th><h5>Itaum p/ Profipo</h5></th>
  </tr>
  <tr>
   <td>12:49</td>
   <td>05:46</td>
   <td>05:55</td>
   <td>06:08</td>
  </tr>
  <tr>
   <td>18:05</td>
   <td>13:12</td>
   <td>06:31</td>
   <td>06:44</td>
  </tr>
  <tr>
   <td class="empty"></td>
   <td>18:29</td>
   <td>11:01</td>
   <td>11:14</td>
  </tr>
 </tbody>
</table> 
```

我想要的结果的一个例子：

```
Profipo p/ Itaum
12:49
18:05

Itaum p/ Ulysses G
05:46
13:12
18:29 
```

并且是动态的，所以如果表包含更多的时间表......

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:40:13.737

提示是在**select**中使用**:eq()**，请在下面找到代码：

 **```
public final static String stack = "<table class=\"linha-horas\">"
 +"<tbody><tr><th><h5>Profipo p/ Itaum</h5></th><th><h5>Itaum p/ Ulysses G</h5>"
 + "</th><th><h5>Ulysses G. p/ Itaum</h5></th><th><h5>Itaum p/ Profipo</h5></th></tr>"
 + "<tr><td>12:49</td><td>05:46</td><td>05:55</td><td>06:08</td></tr>"
 + "<tr><td>18:05</td><td>13:12</td><td>06:31</td><td>06:44</td></tr>"
 + "<tr><td class=\"empty\"></td><td>18:29</td><td>11:01</td><td>11:14</td></tr>"
 + "</tbody></table>";

public static void main(String[] args){
    System.out.println("the html content to parse is: "+stack);
    Document doc = Jsoup.parse(stack);
    Elements ths = doc.select("th");
    for(int i = 0; i < ths.size(); i++)
    {
        System.out.println(ths.get(i).text());//header
        Elements tds = doc.select("tr td:eq("+i+")");//rows
        for(Element td : tds)
        {
            System.out.println(td.text());
        }
    }
} 
```

以下是输出：

```
the html content to parse is: <table class="linha-horas"><tbody><tr><th><h5>Profipo p/ Itaum</h5></th><th><h5>Itaum p/ Ulysses G</h5></th><th><h5>Ulysses G. p/ Itaum</h5></th><th><h5>Itaum p/ Profipo</h5></th></tr><tr><td>12:49</td><td>05:46</td><td>05:55</td><td>06:08</td></tr><tr><td>18:05</td><td>13:12</td><td>06:31</td><td>06:44</td></tr><tr><td class="empty"></td><td>18:29</td><td>11:01</td><td>11:14</td></tr></tbody></table>
Profipo p/ Itaum
12:49
18:05

Itaum p/ Ulysses G
05:46
13:12
18:29
Ulysses G. p/ Itaum
05:55
06:31
11:01
Itaum p/ Profipo
06:08
06:44
11:14 
```**

# html - CSS/HTML - 水平列表 - 消除列表项之间的神秘间隙？

> ID：14958606
> 
> 赞同：18
> 
> 时间：2013-02-19T13:22:21.967
> 
> 标签：html, css

我正在制作的菜单栏有问题。菜单项之间似乎存在差距，对于我的生活，我不明白这是什么原因。

作为对下面截图的描述，第一个链接（主页）是当前页面，它被突出显示。第二个链接（page1）是一个悬停效果，而我的光标在这个项目上。你会注意到这两个项目之间有一个间隙（到底是什么原因造成的？！），它显示了包含菜单的 div 的背景颜色。

值得注意的是，我使用的是最新版本的 Firefox。

这是我的问题的屏幕截图：

![神秘鸿沟](../Images/92ce8255986a525c5637ebe4d546cf2f.png)

这是列表的 html：

```
<div class="nav">
    <ul>
        <li class="selectedPage"><a href="#">HOME</a></li>
        <li><a href="#">PAGE1</a></li>
        <li><a href="#">PAGE2</a></li>
    </ul>
<!-- end .nav --></div> 
```

这是CSS：

```
div.nav {
    width: 750px;
    background: #52b5f0; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSI1JSIgc3RvcC1jb2xvcj0iIzUyYjVmMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQ5JSIgc3RvcC1jb2xvcj0iIzM2OTlkMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzE5NjM4YSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(top,  #52b5f0 5%, #3699d0 49%, #19638a 95%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%,#52b5f0), color-stop(49%,#3699d0), color-stop(95%,#19638a)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #52b5f0 5%,#3699d0 49%,#19638a 95%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #52b5f0 5%,#3699d0 49%,#19638a 95%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #52b5f0 5%,#3699d0 49%,#19638a 95%); /* IE10+ */
    background: linear-gradient(to bottom,  #52b5f0 5%,#3699d0 49%,#19638a 95%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#52b5f0', endColorstr='#19638a',GradientType=0 ); /* IE6-8 */
}

div.nav ul {
    list-style: none; /* this removes the list marker */
}

div.nav li {
    display: inline-block;
}

div.nav li.selectedPage {
    background: #41ff5f;
}

div.nav li.selectedPage a {
    color: #10653b;
}

div.nav a, div.nav a:visited {
    padding: 5px;
    display: block;
    width: 120px;
    text-decoration: none;
    color: #FFFFFF;
    font-weight: bold;
    text-align: center;
}

div.nav a:hover, div.nav a:active, div.nav a:focus {
    background: #41ff5f;
    color: #10653b;
} 
```

编辑：

我在css的早期确实有这个：

```
ul, li {
    padding: 0;  
    margin: 0;
} 
```

* * *

JsFiddle 链接：

[http://jsfiddle.net/Gbg7J/](http://jsfiddle.net/Gbg7J/)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-19T13:29:26.020

间隙是由分隔列表项的选项卡和换行引起的；内联块元素（或任何参与内[联格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#inline-formatting)的元素）对它们在 HTML 中的结构很敏感。

您可以[完全删除空格](http://jsfiddle.net/Gbg7J/5/)：

```
 <ul>
    <li class="selectedPage"><a href="#">HOME</a></li><li><a href="#">PAGE1</a></li<li><a href="#">PAGE2</a></li>
</ul> 
```

使用注释：

```
<div class="nav">
    <ul>
        <li class="selectedPage"><a href="#">HOME</a></li><!--
        --><li><a href="#">PAGE1</a></li><!--
        --><li><a href="#">PAGE2</a></li><!--
    --></ul>
<!-- end .nav --></div> 
```

单独保留 HTML 并使用`float` [（](http://jsfiddle.net/8pG27/1/)并清除容器）：

```
.nav ul li {
    float: left;
  /*display: inline-block;*/
}

.nav ul {
    overflow: hidden;
} 
```

或者`font-size: 0;`在父节点上设置，[然后](http://jsfiddle.net/8pG27/3/)在`li`

```
.nav ul {
    font-size: 0;
}

.nav li {
   display: inline-block;
   font-size: 16px;
} 
```

* * *

^(另外，看看两者：[如何删除内联块元素之间的空间？](https://stackoverflow.com/questions/5078239/how-to-remove-the-space-between-inline-block-elements/5078297#5078297)& [http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/))

# php - 读取 PHP 的序列化字符串

> ID：14958608
> 
> 赞同：0
> 
> 时间：2013-02-19T13:22:34.170
> 
> 标签：php, serialization

我正在尝试读取 PHP 序列化字符串。这是我要阅读的字符串的一部分：

```
 time|d:B.GIMKKIGLGPJJOJNOPGMIK; 
```

但是，这对我来说没有意义。数据类型似乎与其中的内容不匹配？

该字符串是通过序列化会话来包含的`serialize($_SESSION)`：

```
$_SESSION['time'] = microtime(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:38:59.197

这很奇怪。你如何反序列化你的会话？下面的代码可以很好地输出数据。

```
$_SESSION['time'] = microtime(true);
$a = serialize($_SESSION);
$b = unserialize($a);
echo $b['time']; 
```

您还应该阅读有关会话编码/解码的文章：http: [//drupal.org/node/646702](http://drupal.org/node/646702) 和 php 手册：[http ://www.php.net/manual/en/function.session-encode.php](http://www.php.net/manual/en/function.session-encode.php)

# c# - Crystal Reports 页面设置菜单在哪里

> ID：14958609
> 
> 赞同：0
> 
> 时间：2013-02-19T13:22:34.060
> 
> 标签：c#, .net, winforms, visual-studio-2010, crystal-reports

这是我的报告页面：

![在此处输入图像描述](../Images/162027412027617e2e551f0b0c1fc223.png)

我搜索了页面设置，但在任何地方都找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:26:23.267

在菜单栏中打开文件 --> 页面设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:08:23.077

我找到了。右键单击页面->设计->然后页面设置

# ios - 无法将文本从 UITextField 添加到数组

> ID：14958613
> 
> 赞同：0
> 
> 时间：2013-02-19T13:22:47.537
> 
> 标签：ios, arrays, uitableview, uitextfield, gettext

目前我有一个自定义视图表格单元格和一个文本字段就在它上面。我想从中获取文本`UItextfield`并将其放入`NSMutableArray`.

伪代码：

```
String text = _textfield.text;
[array addObject:text];
NSLog{array} 
```

在我的头文件中，我创建了文本字段和数组。

我目前收到错误消息：`'CustomTableView:[340:11303] array: (null)'`当我 NSLog.

我不确定为什么文本字段中的文本没有被添加到数组中。如果有人能够提供帮助，将不胜感激。

**注意**- 我的文本字段位于自定义单元格上方，不在其中。我什至尝试直接向数组添加一个字符串并记录它，我得到了同样的错误。所以我会假设这与数组有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:30:30.260

这就是你应该如何打印你的数组，

```
NSLog(@"%@", array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:26:59.907

您提到您已经在头文件中声明了文本字段和数组...

你初始化变量了`array`吗？

例如

`array = [NSMutableArray new];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:27:36.923

看起来您实际上并没有创建数组。在 Objective C 中，你不用在头文件中创建东西，而是声明它们。实现文件（.m 文件）完成所有工作。

尝试这个：

```
NSString *text = _textfield.text;
array = @[text]
NSLog( @"%@", array ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:28:45.283

你初始化你的 Array.take 一个 MutableArray 并初始化它。

```
 NSMutableArray *array=[NSMutableArray alloc]init]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T13:30:39.573

看起来你好像是 ios 的新手。仔细阅读 Objective-c 并阅读苹果文档。

```
 NSString * text = self.textfield.text;
 NSMutableArray *array = [NSMutableArray alloc] init];
 [array addObject:text];
  NSLog(@"%@",array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-17T06:31:10.637

对我来说，这是有效的......

我在 tableviewcell 中取了一个文本字段。我正在创建基于动态数据的文本字段。我的要求是，我需要获取动态创建的文本字段文本。

用于以另一种方法获取文本

```
NSIndexPath *indexPath = [tableViewObj indexPathForCell:customCell];
    if (indexPath.row==0)
    {
        [arrayPhoneNumbers addObject:customCell.textFieldObj.text];
        NSLog(@"array is :%@",arrayPhoneNumbers);
    }
    else if(indexPath.row==1)
    {
        [arrayPhoneNumbers addObject:customCell.textFieldObj.text];
        NSLog(@"array is :%@",arrayPhoneNumbers);

    }
    else if(indexPath.row==2)
    {
        [arrayPhoneNumbers addObject:customCell.textFieldObj.text];
        NSLog(@"array is :%@",arrayPhoneNumbers);
    } 
```

像这样，我已将文本字段文本添加到数组中。如果您有任何疑问，请告诉我。

# c# - 回调中的“对象引用未设置为对象实例”错误

> ID：14958614
> 
> 赞同：2
> 
> 时间：2013-02-19T13:22:48.643
> 
> 标签：c#, multithreading, asynchronous, push-notification, ihttpasynchandler

我正在使用 IHttpAsyncHandler 和 XMLHTTPRequest 在以下 URL 的帮助下将消息推送到客户端：http: [//www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push) 但实际上我做了一些更改此示例仅基于一个客户端，我必须向多个客户端发送消息，因此我进行了这些更改

```
public void ProcessRequest(HttpContext context)
{
        var recipient = context.Request["recipient"]; 
        lock (_obj)
        {               
            string[] totalfrnds = ("1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20").Split(',');//<- This is just an example for many clients

            foreach (var a in totalfrnds)
            {
                var handle = MyAsyncHandler.Queue.Find(q => q.SessionId == a);//<- check who's client is online or not

                if (handle != null)
                {
                    handle.Message = context.Request["message"];

                    handle.SetCompleted(true);
                }
            }
        }
 } 
```

![错误快照](../Images/d5e009943b3625a3299dd2e177559a0d.png)

现在我有两个问题

1.  如何解决此类错误？这不是永久性错误，它是随机发生的。

2.  W3wp.exe 中异步线程的限制是什么，当它超过 25 个请求时，它无法打开下一个请求，我必须重置 IIS 才能重新启动应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:33:41.530

> 如何解决此类错误？

您有[竞争条件](https://stackoverflow.com/questions/34510/what-is-a-race-condition)- 更改您的方法以在调用时`SetCompleted`获取副本，例如`Callback`

```
var handler = Callback;
if (isCompleted && handler != null)
{
    handler(this);
} 
```

* * *

> W3wp.exe中异步线程的限制是什么

这是在`machine.config`服务器上的文件中配置的，特别是该部分中的**maxWorkerThreads**元素[`<processModel>`](http://msdn.microsoft.com/en-us/library/7w2sway1%28v=vs.71%29.aspx)，根据文档，默认值为**20**：

> 在每个 CPU 的基础上配置用于进程的最大工作线程数。例如，如果此值在单处理器服务器上为 25，则 ASP.NET 使用运行时 API 将进程限制设置为 25。在双处理器服务器上，限制设置为 50。**默认值为 20**。maxWorkerThreads 的值必须等于或大于配置部分中的 minFreeThread 属性设置。

# wordpress - wordpress 高级自定义字段插件显示损坏的图像？

> ID：14958618
> 
> 赞同：2
> 
> 时间：2013-02-19T13:23:08.757
> 
> 标签：wordpress

我正在使用[wordpress acf 插件](http://wordpress.org/extend/plugins/advanced-custom-fields/)来显示一些带有描述和一些文本的自定义图像。所以首先我刚刚制作了这样的[acf插件](http://wordpress.org/extend/plugins/advanced-custom-fields/)文件，并将页面分配给带有条件标签的主页，`Location-> Rules-> Page->is equal to-> Home` 现在当我让我`content-page.php`显示这样的图像代码时

```
<?php
if( get_field('image') ):
    ?><img src="<?php the_field('image'); ?>" alt="" /><?php
endif;
?> 
```

我得到的只是一个破碎的图像。萤火虫正在显示像这样的图像源请帮助我解决这个问题。我已经在它后面浪费了一天。因此，任何帮助和建议都会非常可观。谢谢

这是我的自定义字段设置的屏幕截图

![在此处输入图像描述](../Images/a7237948d2ba5af99dc1018a17c5fd32.png)

这是显示图像源的firebug html代码

![在此处输入图像描述](../Images/5d821c168cfa373bc634d6b66a72fac4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:30:36.397

也有这个问题。这就是我想出的有效方法：

```
<?php if (get_field('staff_photo')) { 
    $imgarray = get_field( 'staff_photo' );
?>
    <img src="<?php echo $imgarray['url'] ; ?>" alt="" class="staff-photo" />
<?php } ?> 
```

所以，我所做的就是将 get_field('field_name') 数组放入一个变量中，然后获取一个 WAG，它的键是 'url'，就是这样。似乎 ACF 人员需要更新他们的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:56:33.330

哈！发现了另一种方式——这样你可以选择一个尺寸：

```
<?php
if ( get_field('staff_photo') ) { 
   $imgarray = get_field( 'staff_photo' );
   $size = "thumbnail"; // (thumbnail, medium, large, full or custom size)
   echo wp_get_attachment_image( $imgarray['id'], $size );
}
?> 
```

要使 wp_get_attachemnt_image 起作用，您必须提取图像 id，其关键是 ta-da！'ID'。

# entity-framework - 实体框架电动工具 - 缺少表

> ID：14958619
> 
> 赞同：1
> 
> 时间：2013-02-19T13:23:14.150
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, asp.net-web-api, entity-framework-5

我正在编写一个 Web-Api 应用程序，并使用“Entity Framework Power Tool”来生成我的模型类。但是有一些缺失的表。我想念多对多关系的所有表格。

有没有办法为所有实体生成模型类？

# unique - 迭代地声明不同的变量

> ID：14958620
> 
> 赞同：0
> 
> 时间：2013-02-19T13:23:13.763
> 
> 标签：unique, z3, distinct-values

[这个问题与this](https://stackoverflow.com/questions/14955455/distinct-values-in-z3/14956253#14956253)和[this](https://stackoverflow.com/questions/12406557/z3-unique-assignment) question密切相关。

`distinct`Z3的功能

```
(declare-const a S)
(declare-const b S)
(assert (distinct a b)) 
```

允许约束变量集（此处`a`和`b`），使得集中的所有变量必须取不同的值。

**我的问题是**：是否也可以强制变量取唯一值而不明确引用应该与之不同的变量集？就像是

```
(declare-unique-const a S)
(declare-unique-const b S)
(declare-unique-const c S) 
```

这在您在迭代过程中声明新变量的情况下会很好，例如在程序验证期间。

如果不可能，我想必须跟踪所有不同的变量并使用该集合来发出适当的`distinct (newvar, oldvar1, ..., oldvarn))`约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:16:22.763

`f`我们可以从`S`to定义一个辅助fresh函数`Int`，然后断言

```
f(a_1) = 1
f(a_1) = 2
f(a_3) = 3
...
f(a_n) = n 
```

那么, `a_1`, ...,`a_n`必须彼此不同。如果我们要说那`b`也不同于所有`a_i`的s。我们只是断言

```
f(b) = n+1 
```

在这种方法中，我们只需要跟踪计数器。

# c# - 使用复杂类型调用存储过程实体框架动态结果集

> ID：14958635
> 
> 赞同：2
> 
> 时间：2013-02-19T13:23:53.513
> 
> 标签：c#, sql-server, entity-framework

我有一个存储过程，它调用一个包含 100 列的视图，存储过程被调用，其中包含一组用户想要查看的列，并且只返回那些选定的列。

实体框架无法处理它，因为我定义的复杂类型需要 100 列。

假设我用'PersonName，PersonCity'调用存储过程，我在复杂类型中定义的其他98种类型是否有可能设置为null？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:36:10.550

您不能为此使用实体框架。您应该使用 ADO.net 和 datatable 来调用 SP 并检查返回的数据结构。像这样的东西：

> var cmd = new SqlCommand("spName", db); cmd.CommandType=CommandType.StoredProcedure; cmd.Parameters.AddWithValue("@ColumnNames", "a,b,c"); var da = 新的 SqlDataAdapter(cmd); 数据表 dt = 新数据表（）；da.填充（dt）；
> 
> ```
>  foreach (DataColumn dc in dt.Columns)
>         {
>             //now you have all the information about the results columns
>         } 
> ```

# ruby-on-rails-3 - 页面不工作尝试解锁被另一个线程锁定的互斥锁

> ID：14958637
> 
> 赞同：4
> 
> 时间：2013-02-19T13:24:03.013
> 
> 标签：ruby-on-rails-3, pthreads, webrick

我想启动我的应用程序，它仍在“加载”。它在早上工作，但现在它没有。

我尝试使用其他端口，切换到稳定的分支，重新启动计算机，但似乎没有任何效果。在其他应用程序上，它正在工作。如果我停止服务器，这是我看到的错误（在浏览器中）

```
Attempt to unlock a mutex which is locked by another thread
WEBrick/1.3.1 (Ruby/1.9.3/2012-11-10) at localhost:3000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:59:56.777

最近遇到了同样的问题。看起来有两个视图部分在一个循环中相互调用。

转到访问根路径时调用的视图，并尝试注释掉对“渲染”的任何调用。

```
<%#= render ... %> 
```

如果您的页面现在可以工作（缺少部分），请取消注释该行，查看您尝试渲染的部分并在该行中使用“render ...”重复该过程。

最后，您应该能够找出导致循环的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T19:12:35.477

我有完全相同的问题。就我而言，问题是我在数据库（MongoDB 2.4.9）上创建索引并且阻塞了整个数据库。索引创建完成后，错误消息再次消失。显然，如果有东西阻塞，则会出现此错误消息。

# android - 媒体编解码器需要 MediaFormat

> ID：14958640
> 
> 赞同：1
> 
> 时间：2013-02-19T13:24:09.707
> 
> 标签：android, h.264, android-4.2-jelly-bean, decoder

我正在尝试使用媒体编解码器解码 h264 文件。由于 Android 不直接支持它，我正在配置自己的解码器。为此，我尝试如下。

```
codec = MediaCodec.createDecoderByType("video/avc");
format.createVideoFormat("video/avc", /*640*/320, /*480*/240);
try {
    codec.configure(format, null, null,0);
} catch(Exception codec) {
    Log.i(TAG,"codec_configure " +codec.getMessage());
}
//codec.start();
codec.getInputBuffers();
codec.getOutputBuffers();
inputBuffers = codec.getInputBuffers();
outputBuffers = codec.getOutputBuffers(); 
```

我得到`NullPointerException`了`format.creatvideoformat()`并且`IllegalStateException`也在`codec.start()`

谁能帮我修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:35:18.370

我觉得`createVideoFormat`可能

```
format = MediaFormat::createVideoFormat("video/avc", /*640*/320, /*480*/240); 
```

# javascript - N > 3 个图像，显示 3 个，在它们上的单个循环一次褪色一次

> ID：14958641
> 
> 赞同：0
> 
> 时间：2013-02-19T13:24:13.800
> 
> 标签：javascript, jquery, jquery-plugins, jquery-cycle

例如，我有 9 张图片，从一开始就显示了 3 张。我想让它们依次淡出到另一个图像一次，例如：http: [//jsfiddle.net/linuxatico/C9Tw2/7/](http://jsfiddle.net/linuxatico/C9Tw2/7/)

在这个版本中，我有 3 个循环调用，由定时初始化分隔。我发现，使用 3 个不同的周期，时间越长，重叠褪色图像的时间效果就越多。我相信这可以通过一个循环动画来解决，但我不知道该怎么做。你有解决方案吗？

> HTML：

```
<div class="container">
    <ul class="first">
        <li><img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" /></li>
        <li><img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" /></li>
        <li><img width="200" height="200" src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" /></li>
    </ul>
    <ul class="second">
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00001.jpg" /></li>
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00002.jpg" /></li>
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00003.jpg" /></li>
    </ul>
    <ul class="third">
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00004.jpg" /></li>
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00005.jpg" /></li>
        <li><img width="200" height="200" src="http://static.blogo.it/gamesblog/test-drive-unlimited-2-13/Image00006.jpg" /></li>
    </ul>
</div> 
```

> JS：

```
jQuery('.first').cycle({
    fx:     'fade',
    delay:  -1000
});
jQuery('.second').cycle({
    fx:     'fade',
    delay:  -2000
});
jQuery('.third').cycle({
    fx:     'fade',
    delay:  -3000
}); 
```

编辑：我在这里有一个稍微不同的要求：[3 个转换，转换之间的暂停时间](https://stackoverflow.com/questions/15070848/3-transitions-pausetime-between-transitions)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:32:12.803

您可以向转换结束添加回调。

```
jQuery('.first').cycle({
    fx:     'fade',
    delay:  -1000,
    after: function(){change('.second')}
});
jQuery('.second').cycle({
    fx:     'fade',
    timeout: 0,
    after: function(){change('.third')}
});
jQuery('.third').cycle({
    fx:     'fade',
    timeout: 0,
});

function change(what)
{
    jQuery(what).cycle("next");
} 
```

JSFiddle：http: [//jsfiddle.net/c7UXM/](http://jsfiddle.net/c7UXM/)

# java - 在 OpenCV 中将 `BufferedImage` 转换为 `Mat`

> ID：14958643
> 
> 赞同：34
> 
> 时间：2013-02-19T13:24:21.893
> 
> 标签：java, opencv, bufferedimage, mat

如何将 a 转换`BufferedImage`为`Mat`in `OpenCV`？

我正在使用 JAVA 包装器`OpenCV`（不是*JavaCV*）。由于我是新手，`OpenCV`所以我在理解如何`Mat`工作时遇到了一些问题。

我想做这样的事情。（基于 Ted W. 的回复）：

```
BufferedImage image = ImageIO.read(b.getClass().getResource("Lena.png"));

int rows = image.getWidth();
int cols = image.getHeight();
int type = CvType.CV_16UC1;
Mat newMat = new Mat(rows, cols, type);

for (int r = 0; r < rows; r++) {
    for (int c = 0; c < cols; c++) {
        newMat.put(r, c, image.getRGB(r, c));
    }
}

Highgui.imwrite("Lena_copy.png", newMat); 
```

这行不通。`Lena_copy.png`只是一张尺寸正确的黑色图片。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-26T17:39:36.873

我也试图做同样的事情，因为需要将处理的图像与两个库结合起来。而我试图做的是放入`byte[]`而`Mat`不是RGB值。它奏效了！所以我所做的是：

1.`BufferedImage`转换为字节数组：

```
byte[] pixels = ((DataBufferByte) image.getRaster().getDataBuffer()).getData(); 
```

2\. 然后你可以简单的把它放到 Mat 中，如果你把 type 设置为**CV_8UC3**

```
image_final.put(0, 0, pixels); 
```

**编辑：** 您也可以尝试按照[这个答案做相反的事情](http://answers.opencv.org/question/2847/convert-mat-to-matofbyte-in-android/?answer=2941#post-id-2941)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-09-13T11:30:30.940

不想处理大像素阵列？只需使用这个

**缓冲图像到垫**

```
public static Mat BufferedImage2Mat(BufferedImage image) throws IOException {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    ImageIO.write(image, "jpg", byteArrayOutputStream);
    byteArrayOutputStream.flush();
    return Imgcodecs.imdecode(new MatOfByte(byteArrayOutputStream.toByteArray()), Imgcodecs.CV_LOAD_IMAGE_UNCHANGED);
} 
```

**垫到 BufferedImage**

```
public static BufferedImage Mat2BufferedImage(Mat matrix)throws IOException {
    MatOfByte mob=new MatOfByte();
    Imgcodecs.imencode(".jpg", matrix, mob);
    return ImageIO.read(new ByteArrayInputStream(mob.toArray()));
} 
```

**注意**，虽然它非常微不足道。但是，通过这种方式，您可以获得可靠的解决方案，但它使用编码+解码。所以你失去了一些性能。通常为 10 到 20 毫秒。**JPG**编码会损失一些图像质量，而且速度很慢（可能需要 10 到 20 毫秒）。**BMP**是无损且快速的（1 或 2 毫秒），但需要更多的内存（可以忽略不计）。**PNG**是无损的，但编码时间比 BMP 多一点。使用**BMP**应该适合我认为的大多数情况。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-12-15T15:39:49.013

这对我来说效果很好，执行需要 0 到 1 毫秒。

```
public static Mat bufferedImageToMat(BufferedImage bi) {
  Mat mat = new Mat(bi.getHeight(), bi.getWidth(), CvType.CV_8UC3);
  byte[] data = ((DataBufferByte) bi.getRaster().getDataBuffer()).getData();
  mat.put(0, 0, data);
  return mat;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-03T16:15:34.827

我在我的程序中使用以下代码。

```
protected Mat img2Mat(BufferedImage in) {
        Mat out;
        byte[] data;
        int r, g, b;

        if (in.getType() == BufferedImage.TYPE_INT_RGB) {
            out = new Mat(in.getHeight(), in.getWidth(), CvType.CV_8UC3);
            data = new byte[in.getWidth() * in.getHeight() * (int) out.elemSize()];
            int[] dataBuff = in.getRGB(0, 0, in.getWidth(), in.getHeight(), null, 0, in.getWidth());
            for (int i = 0; i < dataBuff.length; i++) {
                data[i * 3] = (byte) ((dataBuff[i] >> 0) & 0xFF);
                data[i * 3 + 1] = (byte) ((dataBuff[i] >> 8) & 0xFF);
                data[i * 3 + 2] = (byte) ((dataBuff[i] >> 16) & 0xFF);
            }
        } else {
            out = new Mat(in.getHeight(), in.getWidth(), CvType.CV_8UC1);
            data = new byte[in.getWidth() * in.getHeight() * (int) out.elemSize()];
            int[] dataBuff = in.getRGB(0, 0, in.getWidth(), in.getHeight(), null, 0, in.getWidth());
            for (int i = 0; i < dataBuff.length; i++) {
                r = (byte) ((dataBuff[i] >> 0) & 0xFF);
                g = (byte) ((dataBuff[i] >> 8) & 0xFF);
                b = (byte) ((dataBuff[i] >> 16) & 0xFF);
                data[i] = (byte) ((0.21 * r) + (0.71 * g) + (0.07 * b));
            }
        }
        out.put(0, 0, data);
        return out;
    } 
```

参考：[这里](https://www.codeproject.com/Tips/752511/How-to-Convert-Mat-to-BufferedImage-Vice-Versa)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-11T12:56:22.693

我在[这里](http://tech.groups.yahoo.com/group/OpenCV/message/88826)找到了解决方案。该解决方案类似于 Andriys。

```
Camera c;
c.Connect();
c.StartCapture();
Image f2Img, cf2Img;
c.RetrieveBuffer(&f2Img);
f2Img.Convert( FlyCapture2::PIXEL_FORMAT_BGR, &cf2Img );
unsigned int rowBytes = (double)cf2Img.GetReceivedDataSize()/(double)cf2Img.GetRows();

cv::Mat opencvImg = cv::Mat( cf2Img.GetRows(), cf2Img.GetCols(), CV_8UC3, cf2Img.GetData(),rowBytes ); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-11T12:48:54.950

要将 BufferedImage 转换为 Mat，我使用以下方法：

```
 public static Mat img2Mat(BufferedImage image) {
        image = convertTo3ByteBGRType(image);
        byte[] data = ((DataBufferByte) image.getRaster().getDataBuffer()).getData();
        Mat mat = new Mat(image.getHeight(), image.getWidth(), CvType.CV_8UC3);
        mat.put(0, 0, data);
        return mat;
    } 
```

在转换为 Mat 之前，我将 bufferedImage 的类型更改为 TYPE_3BYTE_BGR，因为对于某些类型的 BufferedImages 方法**((DataBufferByte) image.getRaster().getDataBuffer()).getData();** 可能会返回**int[]**，这会破坏代码。

下面是转换为 TYPE_3BYTE_BGR 的方法。

```
 private static BufferedImage convertTo3ByteBGRType(BufferedImage image) {
        BufferedImage convertedImage = new BufferedImage(image.getWidth(), image.getHeight(),
                BufferedImage.TYPE_3BYTE_BGR);
        convertedImage.getGraphics().drawImage(image, 0, 0, null);
        return convertedImage;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-19T13:55:11.267

一种简单的方法是创建一个新的使用

```
Mat newMat = Mat(rows, cols, type); 
```

然后从 BufferedImage 中获取像素值并使用

```
newMat.put(row, col, pixel); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-13T14:53:45.170

当您用作 JavaCP 包装器[bytedeco 库（版本 1.5.3）](https://mvnrepository.com/artifact/org.bytedeco/javacpp/1.5.3)时，您可以使用[Java2DFrameUtils](http://bytedeco.org/javacv/apidocs/org/bytedeco/javacv/Java2DFrameUtils.html#toMat-java.awt.image.BufferedImage-)。

简单的用法是：

```
import org.bytedeco.javacv.Java2DFrameUtils;
...
BufferedImage img = ImageIO.read(new File("some/image.jpg");
Mat mat = Java2DFrameUtils.toMat(img); 
```

注意：不要混合不同的包装器，[bytedeco](https://mvnrepository.com/artifact/org.bytedeco/javacpp/1.5.3) Mat 与[opencv](https://mvnrepository.com/artifact/opencv/opencv/4.0.0-0) Mat 不同。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2014-09-20T18:44:01.770

您可以在 OpenCV 中执行以下操作：

```
File f4 = new File("aa.png");
Mat mat = Highgui.imread(f4.getAbsolutePath()); 
```

# c# - 如何使用 HtmlAgilityPack 跳过表格

> ID：14958648
> 
> 赞同：0
> 
> 时间：2013-02-19T13:24:32.980
> 
> 标签：c#, asp.net

我编写了一个从表中获取值并对其进行操作的应用程序，我的问题是我想要的表之前有 2 个表（没有 id、class）。我想跳过他们去第三张桌子。我的代码：

```
 HtmlNodeCollection tables = doc.DocumentNode.SelectNodes("//table");
        HtmlNodeCollection rows = tables[2].SelectNodes(".//tr");

        foreach (HtmlNode item in rows)
        {    
         /// my code//

        } 
```

我认为代码：table[2] 表示转到第三个表，但实际上它意味着需要 3 个表，有没有办法定义空间表或从表到表？（表中没有 id 或类名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:39:33.540

我认为下面的代码会帮助你...

```
HtmlNodeCollection tables = doc.DocumentNode.SelectNodes("//table[3]");
HtmlNodeCollection rows = tables.SelectNodes(".//tr"); 
```

`"//table[3]"`：它定义了第三张表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:34:58.100

您只需要指定表的索引： HtmlNodeCollection tables = doc.DocumentNode.SelectNodes("//table[2]");

# javascript - Facebook 向多个用户发送消息

> ID：14958652
> 
> 赞同：0
> 
> 时间：2013-02-19T13:24:45.460
> 
> 标签：javascript, facebook-javascript-sdk

我想向多个用户发送消息。我不知道我做错了什么。

但它只能运行 JavaScript 测试控制台。

这是我的代码：

```
<html>
<body >
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : 'MY APP ID',
                status     : true, // check the login status upon init?
                cookie     : true, // set sessions cookies to allow your server to access the session?
                xfbml      : true,  // parse XFBML tags on this page?
                oauth: true // enable OAuth 2.0

            });
        };

        (function(d, debug){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
            ref.parentNode.insertBefore(js, ref);
        }(document, /*debug*/ false));

        function sendmsg(){
            FB.ui({
                method: 'send',
                to: ['100000793830311','100002551899151'],
                name: 'test msg',
                link: 'http://www.google.com'
            });
        }    
    </script>

    <button onclick="sendmsg();">SEND</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:21:27.603

方法`send`不允许在`to`字段中使用多个用户 ID。代码只允许一个`id`. 用户可以在对话框中输入其他收件人。

# c++ - 静态函数作为操作数

> ID：14958653
> 
> 赞同：0
> 
> 时间：2013-02-19T13:24:47.990
> 
> 标签：c++, eclipse, optimization, arduino

我制作了一些静态函数，以便在不创建它们所属类的任何对象的情况下调用它们。我已将具有静态函数 (NTP.h) 的类的头文件包含到另一个类 (DayNumber) 中。

我想将某些函数的返回值作为 DayNumber 类函数的操作符。我收到未声明 NTP 的错误。这是代码。

头文件：

```
#include "NTP.h"

class DayNumber{
    private:
        int _day1YearLoop[];
        int _day4YearLoop[];

    public:
        int Days1YearLoop;
        int Days4YearLoop;

        DayNumber();
        void dayNumberCalc( NTP::getYear(),NTP::getMonth(),NTP::getDate());
        virtual ~DayNumber();

        bool checkLeapYear(int setYear);
};

#endif 
```

实现 .cpp 文件（部分）：

```
void DayNumber::dayNumberCalc( NTP::getYear(), NTP::getMonth(), NTP::getDate()){
    int setYear = NTP::getYear();
    int setMonth = NTP::getMonth();
    int setDay = NTP::getDate();
    //Days that passed from the beginning of the year for the first day each month
    int _day1YearLoop[] = {0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334};
    //i= _day1YearLoop;

    //Days that passed from the beginning of the second year since the 'for'.
    //The first day of the running year in a four-years loop.
    int _day4YearLoop[]={366,731,1096};

    if (checkLeapYear(setYear)){
        if (setMonth>2){ //Diorthwsi gia ton mina flebari
            Days1YearLoop = *(_day1YearLoop + (setMonth-1)) + setDay + 1;
            Days4YearLoop = Days1YearLoop;
        }
        else{
            Days1YearLoop = *(_day1YearLoop+(setMonth-1))+setDay; 
```

为什么会这样？它不应该以这种方式工作吗？

同样在函数 dayNumberCalc 中，我应该将静态函数的返回值保存在局部变量中并使用它们而不是返回值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:28:28.123

您的函数声明的语法不正确：

```
void dayNumberCalc( NTP::getYear(),NTP::getMonth(),NTP::getDate()); 
```

您应该在此处列出参数类型和名称。也许你想要：

```
void dayNumberCalc(int year, int month, int day); 
```

然后你会调用它：

```
dayNumber.dayNumberCalc(NTP::getYear(),NTP::getMonth(),NTP::getDate()); 
```

`NTP`或者，如果您希望从内部调用的静态成员，请不要`dayNumberCalc`给它任何参数：

```
void dayNumberCalc(); 
```

或者，如果您希望参数具有静态函数给出的默认值，请执行以下操作：

```
void dayNumberCalc(int year = NTP::getYear(), int month = NTP::getMonth(),
                   int day = NTP::getDate()); 
```

# asp.net - 回发后不执行 registerstartupscript 的 javascript

> ID：14958654
> 
> 赞同：0
> 
> 时间：2013-02-19T13:24:58.270
> 
> 标签：asp.net, postback

我有这样一个问题：我的页面有一个自定义用户控件。自定义用户控件具有 onLoad 方法，其中包含使页面调用 Javascript onLoad 的行。

```
 Page.RegisterStartupScript("recallmenu", "<script language='javascript' type='text/javascript'>  initAuthGroupList();</script>"); 
```

虽然这在回发期间肯定也会调用，但我仅在页面初始加载时收到有问题的 Javascript 执行，而不是在回发时。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:49:52.657

改用`ScriptManager.RegisterStartupScript`方法：[ScriptManager.RegisterStartupScript 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerstartupscript.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:31:52.427

删除更新面板使其工作。

# c# - 单击执行两个按钮

> ID：14958655
> 
> 赞同：-2
> 
> 时间：2013-02-19T13:25:01.510
> 
> 标签：c#, .net, visual-studio-2010, browser

我有一个简单的 C# 应用程序，其中包含按钮和 Web 浏览器，每个按钮执行一个请求并在 Web 浏览器上显示请求的结果。并在下一个按钮中使用请求的结果。

```
private void button1_Click(object sender, EventArgs e)
        {
webBrowser1.Navigate("http://www.test.com");
}

private void button2_Click(object sender, EventArgs e)
        {
            if (webBrowser1.Document.GetElementById("tesxtbox1") != null)
            {
            HtmlElement txt1 = webBrowser1.Document.GetElementById("tesxtbox1");
            txt1.SetAttribute("value", "test");
            webBrowser1.Document.Forms[0].InvokeMember("submit");
            }
        } 
```

是否有任何方法或方式可以通过单击执行两个按钮，但是第二个按钮在加载 Web 浏览器之前不执行。

在第一个按钮中，我添加了

```
webBrowser1.DocumentCompleted + = new WebBrowserDocumentCompletedEventHandler (Button2_Click); 
```

但是第二个按钮执行了几次，所以我在按钮2的最后一行添加了：

```
webBrowser1.DocumentCompleted - = new WebBrowserDocumentCompletedEventHandler (Button2_Click); 
```

它有效，但在控制台中我发现 Button 2 执行了两次

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:29:41.570

您不应该认为执行第二个按钮单击。有 [DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件，您必须在之后收听并执行必要的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:31:19.553

```
private void button3_Click(object sender, EventArgs e)
{
  webBrowser1.DocumentCompleted += (sender, e) => {button2_Click(sender, e);};
  button1_Click(sender, e);
} 
```

将注册 button2_Click 方法以在由 button1_Click() 触发的文档完全加载后执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:29:07.143

您应该添加一个事件，该事件将在文档完成加载后调用代码。

```
private void Form1_Load(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
}    

void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    button2_Click(sender, e);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:28:12.140

您可以从 button1_click 方法进行以下调用。

```
button2_Click(sender, e); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-19T13:28:41.543

您可以在 url 中给出一个参数：

```
webBrowser1.Navigate("http://www.test.com?excuteSecondButton=Yes"); 
```

然后在第二页上检查是否给出了该参数：

```
PageLoad()
{
  if(Request.QueryString["executeSecondButton"].Equals("Yes"))
  {
    button2_Click(button2, new RoutedEventArgs());
  }
} 
```

# c# - 未在自定义窗口上绘制框架

> ID：14958663
> 
> 赞同：0
> 
> 时间：2013-02-19T13:25:23.777
> 
> 标签：c#, wpf, window, frame, custom-component

我有一个定制的窗口，它实施了我公司的企业设计指南。

我必须在 WPF 中的 Frame 对象中加载 HTML。问题是，当我使用 CustomizedWindow 在 WPF 中放置带有源 html 路径的 Frame 时，不会绘制 Frame（只有框架的背景颜色可见，源上没有任何数据）

如果我使用普通窗口（非自定义窗口），则框架会使用 HTML 内容正确绘制。有什么东西，我需要覆盖框架绘图才能在我的 CustomizedWindow 中正常工作。

如果您需要有关此问题的任何进一步信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:35:56.713

好的，我发现了一个问题。我在窗口样式上评论了 AllowsTransparency 属性，一切正常。我失去了这个属性提供的一些功能，但我仍然可以接受。如果有人有更好的解决方案，请在此处发布。

# asp.net-mvc - 基于在表格中单击的行导航到另一个页面的基本场景

> ID：14958666
> 
> 赞同：0
> 
> 时间：2013-02-19T13:25:27.347
> 
> 标签：asp.net-mvc

我有一张桌子，里面有一堆东西。可以单击每一行（在该行的任何列上）并根据单击的行导航到另一个页面。我在此页面上附加了一个 javascript 文件，我在其中管理事件（单击的行，...）。

在我的 ASP.NET MVC 解决方案中，我想选择一种很好的方式来管理这种情况。

下面是我认为的一个：

我的观点：

```
<table>
    <tbody>        
        @foreach (var item in Model)
        {
            <tr data-url="@Url.Action("General", "Transport", new { transportID = item.TransportID })">
                <td>aaaa</td>
                <td>bbbb</td>
                <td>cccc</td>
            </tr>
        }
    </tbody>
</table> 
```

我的.js文件：

```
$("table.search-transport tbody tr td:not(:first-child)").live("click", function () {
    var url = $(this).parents('tr').data('url');
    window.location.href = url;
}); 
```

因为我们无法在 javascript 文件中注入服务器代码，所以我将 url 直接注入到视图中的每一行中。当点击一行时，我会得到这个“特定”的 url 并从我的 javascript 文件中导航到它。

我想知道这个解决方案在 MVC 项目中是否足够稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:14:24.883

根据评论，Nikola 说这不会影响 ASP.NET MVC 框架的使用是正确的。据我所知，在您的情况下，将 URL 注入数据字段是唯一的选择（但我愿意接受其他建议）。

对于 js 部分，我会使用[事件委托](http://api.jquery.com/on/)来避免将事件附加到每个单元格：

```
$("table.search-transport tbody tr").on("click", "td:not(:first-child)", function () {
  var url = $(this).parents('tr').data('url');
  // also: $(this).parent().data('url'); will work...
  window.location.href = url;
}); 
```

这会将事件附加到每一行，但仅当您单击不是第一个孩子的 td 时才会触发。或者，您可以将整个事件附加到表格一次，因此还可以选择动态添加行并仍然附加事件；像这样：

```
$("table.search-transport").on("click", "tr td:not(:first-child)", function () {
  [...]
}); 
```

# performance - 如何在开发模式下提高 grails2.0.4 的性能？

> ID：14958667
> 
> 赞同：0
> 
> 时间：2013-02-19T13:25:28.047
> 
> 标签：performance, grails-2.0.4

我正在使用 grails 框架。响应来自浏览器的请求需要太多时间。由于这个问题，我不得不多次重启服务器。我将非常感谢您的准确回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:01:30.683

由于内存（堆）不足，您可能会遇到性能问题。在这种情况下，您将需要增加最大堆大小。您可以使用[Grails JavaMelody 插件](http://grails.org/plugin/grails-melody)，它将[JavaMelody](http://code.google.com/p/javamelody/)系统监控工具集成到 grails 应用程序中，以解决此类问题。

要在使用 run-app 命令运行应用程序时增加最大堆大小，请添加以下 vm 选项：`-Xmx1024m`

如果使用 run-war 命令运行，请将以下内容添加到您的 BuildConfig.groovy：

```
grails.tomcat.jvmArgs = ['-Xmx1g'] 
```

在这两种情况下，根据您的需要设置最大堆大小。

# java - 使用帮助2003打开docx文件时如何隐藏confirmConversion对话框

> ID：14958669
> 
> 赞同：1
> 
> 时间：2013-02-19T13:25:37.220
> 
> 标签：java, swt, ole, docx, word-2003

我在我的应用程序中使用 eclipse swt。它允许我打开 word 文件（doc、docx、rtf）。
但是当打开 docx 文件（doc 或 rtf 打开正常）时，我无法以编程方式隐藏“打开时确认转换”对话框。机器上安装了 Windows XP SP3、Microsoft Word 2003 SP3 和 FileFormatConverters。在 VBA 中，当设置属性 Application.Options.ConfirmConversions = false 时，此对话框会隐藏。或在打开文件时设置属性：

```
 Documents.Open FileName:="file_path_name", ConfirmConversions = false. 
```

我在帮助 OleAutomation 的情况下设置了这个属性，但这不起作用。下面是我使用的部分代码：

```
 shell = SWT_AWT.new_Shell(SwtHelper.display, canvas);
    shell.setLayout(new FillLayout());
    try {
        frame = new OleFrame(shell, SWT.NONE);
        clientSite = new OleClientSite(frame, SWT.NONE, "Word.Document", file);
        clientSite.doVerb(OLE.OLEIVERB_SHOW);
    } catch (SWTException e) {} 
```

此代码运行良好
如何在使用 swt 和 word 2003 打开 docx 时隐藏确认转换对话框？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T15:52:01.220

您应该尝试使用 Word.Application 而不是 Word.Document。无论您使用 Word.Document 还是 Word.Application，都存在巨大差异。

Word.Application 将允许您将参数传递给 ole。

请看看我在这里给出的评论：[https ://stackoverflow.com/a/17021512/1285811](https://stackoverflow.com/a/17021512/1285811)

# php - php uncompress & unpack 给出包含一些（10309 中的 9 个）未定义值的数组

> ID：14958671
> 
> 赞同：4
> 
> 时间：2013-02-19T13:25:41.403
> 
> 标签：php, arrays, decode, unpack, compression

我有一个二进制数据字符串，我使用 php 使用以下代码解压缩并解压到一个数组中（此 php 页面的完整代码包含在此问题的底部）：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
  $glycopeptide[$hits] = $row[1];
  echo $row[4];
  // $row[4] contains the binaryString
  $mz = base64_decode($row[4]);
  $unc_mz = gzuncompress($mz);
  $max = strlen($unc_mz);
  $counter = 0;
  for ($i = 0; $i < $max; $i = $i+4) {
    $temp = substr($unc_mz,$i,4);
    $temp = unpack("f",$temp);
    $mz_array[$counter] = $temp[1];
    $counter++;
  }
  $hits++;
} 
```

我发现 mz_array （上面的代码，X-coords）都有 9 个未定义的值（全部在末尾），但是 int_array（类似的代码，Y-coords）也有 9 个未定义的值（分布在整个数组中（不是分组或在开头/结尾）。

这是我添加到页面中的一个小测试块的示例：

测试代码：

```
for ($i = 0; $i < $counter; $i++) {
  echo $i;
  echo " -  ";
  echo $mz_array[$i];
  echo " - ";
  echo $int_array[$i];
  echo "<br/>";
} 
```

输出的“选择”（注意缺失值）：

```
671 - 274.20001220703 - 429
672 - 274.39999389648 -
673 - 274.60000610352 - 1098
-- skipping a few lines --
10299 - 2199.8000488281 - 0
10300 - 2200 - 0
10301 - - 0
10302 - - 0 
```

最奇怪的部分是，如果我在完整/原始代码中手动输入字符串（见页面底部），我会得到未定义的值，而如果我手动输入通过执行“echo $row[4]”返回的字符串（包含binaryString) 在下面的代码中它不会产生未定义的值。

```
<?php
  $string = " /* Copy the string in the spoiler (on this page) here */ ";
  $int = base64_decode($string);
  $unc_int = gzuncompress($int);
  $max = strlen($unc_int);
  $counter = 0; 
  $max_int = 0;
  for ($i = 0; $i < $max; $i = $i + 4) {
     $temp= substr($unc_int,$i,4);
     $temp = unpack("f",$temp);
     $int_array[$counter] = $temp[1];
     echo $counter;
     echo " -- ";
     echo $int_array[$counter];
     echo "<br/>";
     $counter++;
  }
?> 
```

有没有人有任何建议或想法为什么会发生这种情况？

PS：有人可以添加标签 gzuncompress 吗？（我没有这方面的声誉）。

**编辑 1**

我已经包含了一个示例 binaryString （警告：巨大！）

Y 坐标（由代码中注释的 echo $row[4] 检索）：

> eJztXQuQFMUZblQEQfEQUQSJYwRBSuLG+AAFHdmeRYOPS2lRgEgNvgpLhUuQkooYB5GXBLIaHwRQRwMpCqOuiciJhU4KjUoMnm98r2KUaKkXreBpSCXf3z3Lzu7Na3fn9nZhvqop2N2enu6///7fPcdYjBgxYsSIESNGjBhVgvFGkqmLOWPjk77tlNs5a35AY9kdnBlPo+3GMZ5tm87VmDULfXL/PnOwzkGfP0P7RLj2MUrAaNB0l2OtJuDzVu+188XJnKmnYZ0a5DpZE7Fu3TVm/BOft5TZZ4yqwvwf1u+ne89ea7wM/Pke5vvI3jHfGGVA56xxEnTWKeCT/h588i5k3cEp1vyuxtQN+H/an5+ya9GuBf2t6zi+s2ZAHh/KC+V7BTDXoK/15Y03uxD3zo1urmoKND4efXb17tPqgTZz0OYy/+eaB2uMHYP1UKOjVc1gDuy30TUuz3fWP82NJuy1nZyZx4GXDgO9M/acXgPd9w+mvXFrx66P+TLGNBnXBbXBB4tWwldYhvFcGmI8GbRJ1xGPhFjvPQXqvljDbZjv6jpan1pHfxcfjHyqm0Hra8vnraa+sGF68prmz4aeGtM3Y4wr3fd8I35nrxfZTU/g88YK/NbORAJ6owvG31Y49mwT /JJFXPrjYQBZSrGaAj97UMTrfFYJ4wkD9GUYtcuLBHU7Z/rzoO3dtT1OgQ0Y42neNqyFuSjrOcuamNMo7KPzecHvR45MsYtwKZfAFh7GBS9lv0LbH+BzH+67v7KvcBEDdNrarV0hb77Ddy9VWT9AFmRfwJqtqR+9pF8MGq/iwl7PId1bY62DQcMGB+0hF5W1th8WIO/a7a0TsN+maDK+M9qdnynWao3H76fVAb87oN8K2/s3XNDKfE5jzc0aW7sRNuYhkKM7bFpNt23g/XhhfBp6RtDKoW/UXmjzkaPNefg8j2Jj9UWXmgN4z7gnT0N1IuTRZ5yle4Avdzi+HwK+/0md+eNmsLwxTsT8z8zHyMvGDOzlbujnag//cmcyOtq11c8aNDCK5Ugb1/hvsmw5ps7GOl1dphycHs5fNS7EM26prjzJ/htz+rJ6tnLrnZC/74ePczadhX0/LZp4VWY59OcB4IdmXqALaf+JPNUAj2dUQBvql3KbhqKx6ceMZVNnjGWT1qeY/jZ00Z/xTMP2bbzkBPEudLA6ksaHfxVvf02HbaV3wfy2JJn+MeyvP+K5C8D3m5NMfRb3rfaYH+k+l/yseRXGuAT3XSHvI5tXjPk2Rz8Yi/kwl3GtiGyrxl6wff6FPr8oHK91v23D2dAX4/NDhW1Itxvbq8DPB/jwixM9bNodBT6Yg/EO5OHoRD7t6dgr /fnekSvNBM+RYvw6fHt1n0Iakk9GMXurL/e5uz3onpYbQeMr2vvbyrd5uTgtrbXn+xJgvJeUcbGPQuiAr5IF7VoHYF4Dg2M0jSTXBvHd/NaZoDiFscuWC6Ycz/LFGN8MXA/ityXyO30bZwmsQevJ2O8j/HM3Tlh3oI/BlcWtyJ43+uT7UFdCXn5ox418oDwlec28OYQtQDo/xF4XebkWjCdj10kkOGu8VGON+4I3t+WfYS7P047sZv3X0j/M3pm/t1oQ9LflnwIby/g95kA0acuPIzEUdDrdzn9UIo8z0pcjWzmsHWCcgfFcX2J8akNSxsx8oA5Bvydx4Tu7Pvd59PEkxvspZy3naywN3m7dCv7ejPGbEawR2ZLTi/oZxlnDZMgJkmMjbX1DvtNheb/WmMKlv/t3XJuSrvI2vQJy7gKN6eR7ebQhmGtBgwcwH/CtiAGG3Ldh0KhpgbVd5C8KOVkEfW7p+fPGQaDbqTaPusgTiq1YS6LNkxnvS1uJ9q1ym3ctnToTzx4V0s7IYWR7X6OxK+Z3anvfWdnIhV1Idp2i2nQfHPwsYY+XQg/y8buF039+0EdoMhaV4w1ar2uwt6bl+b4joHbDM36bfy7VNLa9jL09H3SdmV8f62aNKX/F5zvKH0ua6g5IbiX9+yBZKPiyWBaEhKihXBD+XtE2QIZnn0OfOzEmj1qXzFSs3zUdEDMjWkWZ24AMURt59PmSMIDOJx9O6CGv/TKssO6oBTaigfFSjILNDh7zCOJb2FBsZlHbIBscMsu4qjAm7WVvks3LniiKoUIO6W/lbUJXvIXf3uC79TDZQtZk7/h0tWEZLvy9PskSkJ+Jh2HvPIbx4uq+RmPTntbY2tUayxyF9XlX0kLUKOX2Nvxz6yJc2DeZE7EmvfIy2lwhbbrmp3DvX/D90iSzYAfp6xwxIuhoYfdh3T7ulmLKLLTVvW2THIxL0McrnE2cN5a1cFxDxrI+08ey759MsSOvSrF+A1OCD4WtSfo0rGz9hks9c7h/e5oDa/G2Lwgq5KjgoWbZhnyg3XH7jsS3oDOrTFdZgxw1EPAnjH7h47sm/Avj0/ Y6nGpjjOv89YJxkFx74g/rStgW4zThPwqb3PZvyRYQ+ykn20h3UezGpz6/ZJyA/slugX2jki15LN+9jk60wjfIwm+opA6QbBi23Z+X/KCei/23gbMJy6DPj9Rk7p3WPoFxXxfen6Z8p+BPoiPPV8gf/yI8v6p4dsPlcm1EnsNhEyqQH8p4/Das0EYlH5T0soW92jJQkzbWljEiZiTqPF3Gnk3j+39wUZ/GJsJ3/B7/P1zOWe2LZ9+ej40akEGkW9iupOv6GZANxjP+sW2KW6rw+dkS2Y7sXWNT0bgg4422wu+Mn0OWLi3y36B3lCMwzy2gVXeMays+H4r//8iOk9l7lmL+nrLiJsyR4s+P+Iy7aO9TvaTwN5w8Rr4/aJ9QME7Ib2sSrpVcxDTYH3D9yvaN34QuwHibbsD6XSBjOSq+Ux5Fnzm+xzq0jJO5cZXiTI9hTX+J/iBLlc+4jNGvt+XJpfjtfFmjri9Ae/hz1ufyHr91MJs5S3+sse7Pgld +gX0HW8wgfgI9s/BxzPu5sAmdvkbD0WjDg2UX5S0S+2A9IK/3651iIwal2IT78JxzMKdN6LeFs22fYX/tj/5ecPQFHaAO8K+Nng39p8ImNsGzZj/015WLOAjRxNhfxhUaxqDf2fgNulZZhd9hY1ivc+HbsQ/Qrq+7/BGgfTYP+ncVnrPa234ScWdHrfMiPItkNbsBazTX5g/7zID6DL77BD45fNmh92oiLpLokWKH9kyxlgupzsKO6Tn4rAV+TBb6Wx0bTa5jb4A1GHvgXtBrVZ5elD8OistRTkbEzmZUl84UAyYbTVngbc9SnZdCtnkFdX1U6yLyRBMD9m0ftCPbJODcHcVGhV1eho2gfC5jweXaU43TNVlnEXDesGpYxvN6drytZwPyM+pwO14dkDc3P+TC34kyhk+1kyLvDTmpv4PxbgB/fUm2mXxGGvaguQKyGvrWSuZlkrEQ93UpLZ/ihyx0YgOHfBuKPfA1l/mQsHX+k3HfTFzQJ41vQk6+XVrswhVe+sABw+LijEu1c/ICdyVlLqKMOnfrP1jjRzSRpzA+8e5Dgc2oTnD4i21jAvep2sBZE/pW4ds2L9TYbOg38x061wl9e70mfEvqr61NE3t​​f1CDWE0LwRcWAjSXORDvWJTMJe3AO6KqXsC+qBOtJ2Fs97HO7FcZwd/cJ+4h9hcvK8V5S+DND18FWvhYyfwz5jnL/ZWAbmWTv5WL7F0m7K8qYPNValnPmRvhOcyLm8anBtarWG3bdWEC8vntaY4m+WLvvku31FPlhAbEaNyxaAD79U2VyUf0dF7kyMcfiOcDPMkLUzkUOet5jZT53Cvj1tnC2u/B3Ovr80vakjAV67FeRD/TaP3RPB9URUHyFfFFnzWcxWg9MgQc0lrlDY9vWaOzygSk26qgUa4Wvag6A/n8VY3fUATGKITnz31SnAfnBXnZ5RiXxQzdaboVsfBrzuU/GA8z+mqwndmlLdST6Jv+zAxQjJ5+4VDlrLQddMuh7scMXgm2qQ06oFJd9ycFzsKWF/2nLA1qTxBl2/QjFn0E/GqNoE5ADscjPyN3XySAbky0N9nuqBeNF8Ab8TLU7F7QnnzO9n50LyMnifljv4aB9z8IYhb4IvgDFtVSbF6gOkHyDWYVzI70s4oW5OjOKe1VaSxwh9FOohiVft2eMA00eLD1HquzEfbAvzfmFPEl+LsVwnXLXJN9+RXs+ SJC9+0PH3oIPpE5x8SVesnMAJ3Dv8/1uc30e+w1rSblD8W4Ar3WA/UcxXVFDGJE9VQzSr1mi/bjgfFCtgOSQyBfcHa1NRXJh1KAUW/6Kxhou0dhJQ1Iy/nmxw6bsBNA7JJbPxXwvzNv8+i7w0HHwc5fh+zcxvtW23O7dPmaUOUjWtivYX+qxmoiHUg2bONNZj2cfw2CqowbOBcpd9L4pLmuqHTCSnZBDPs+n1uEWHvgeihj+oPOLYWuWIsEWHvjuMzp31kD78psq5Ko7EcKHKYF/jeGQa4/KXEnY97yJ+2wfU/gNz9TOGU7rBY2NOj3F+p2RYme/Ax97oSbrK+eBR5Z1zN6mvJf+YuEZCFFLU4ENoc+C3/A1L7lu0twMPZPqpBqpWgbldGGLCru9I+X7pqSM77rUwUaFpj6arDXzkmPQb8ZNPjquTnFg7xRTeqVE7YzhUfsQBehcVnHMkfRLhs54Jxy+AXxFytlMWEpnKBx2TG8X/yGELKD+ldWytkPkCTvIB6l5wAYzbsy/S5Tywgr5BfTeAkdtZLabXRcUUY1UtpWzxCBZy+CM9YvzpS45H/0hLmu0XGKGon58e8fvP7ULaPC4d33EbmTBVwei7SEydyj86Ffb62x1Yek6JweRO6mWzRcAqjvSH8d+erG9z+ELt7j7BvT1iZ0zc8TqyZ9TH/X3e1zHNj9Zc7mkGBECezHovZKegMwXccMw9lud6nfDeVbEicH2WZdSztXsSUhwz/ dpVRPZD+xYVdD7JNqSsq7rLp8xU13s3NrwDWsRdG6q4pqZHIh3cFHdZ4FsqAY/Xcs9zxd1JuhcsMg5OM9jefC119ke5bXy6+zCgPJPmW5a4RnXHXYNW1TA+mTn82jfCxcG9PcDyH4e3gm8QTKn2M6i3M/RkG9t8CmWyZiXsN8c8knUSt1Ze7y8N0DUH5R5ZqSusML++xt7SCyazqQYr/Hy63RcYK0riqnWGyZGkPMf7VIfRqin9yxXE2SLmp1vQ5cD8ovS52rMPFNjVgTn8mN0LoTsqpH3uO/poNxeZH5UB8D6MZfngMvV998G5BMTdl1gBfrGOoTLOqw9PDbZcIQm/uZIqPe3Ua6wjt6rGRpkY+8NdnZnoMz30e2poPNzIl/rst+MBSFyV27IFMbYqR+j1T67sJci009jjbdo8t3ZPnk48e5RF79KvLOkBurFax3qlZxlNxbl/SBL0/SuruMr08H1DuVvVa79ixEjRowYMWJUDeZHnFln188ZphgxYsSIESNGjBgxYsSIESNGjBgxooB473oF783vaDT11Vj2njJz7jFixOhwiL/PuDE+Mxej5vF/owjA3A==

完整代码：

```
<?php
  require 'phplot/phplot.php';
      $type = $_GET['type'];
      $gp = $_GET['gp'];
      $site = $_GET['site'];
      $prec = $_GET['prec'];
      $link = mysql_connect("localhost","reader","") or die (mysql_error());
      mysql_select_db('leidenGlycoPeptide') or die ();
      $query = sprintf("select precursor.mzValue, glycoPeptide.protein, binaryDataArray.arrayLength, binaryDataArray.encodedLength, binaryDataArray.arrayData, precursor.chargeState, run.pepMass, run.PepSeq from glycoPeptide, spectrum, binaryDataArray, run, precursor where run.glycoPeptide = glycoPeptide.id AND spectrum.run = run.id AND precursor.run = run.id AND binaryDataArray.spectrum = spectrum.id AND precursor.id = spectrum.precursor AND spectrum.spectrum like 'm/z' AND precursor.mzValue like '%s' and glycoPeptide.protein like '%s' and run.glycoSite like '%s' and run.glycoType like '%s' ORDER by glycoPeptide.protein, spectrum.spectrum",(string)$prec, (string)$gp, (string)$site, (string)$type);
      $result = mysql_query($query);
      $hits = 0;
      while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
        $charge = $row[5];
        $pepmass = $row[6];
        $pepseq = $row[7];
        $glycopeptide[$hits] = $row[1];
        /* Manually entering string here also gives undefined values */
        /* $mz = " I was not able to include the mz string due to message size limit "; */
        $mz = base64_decode($row[4]);
        $unc_mz = gzuncompress($mz);
        $max = strlen($unc_mz);
        $counter = 0;
        for ($i = 0; $i < $max; $i = $i+4) {
          $temp = substr($unc_mz,$i,4);
          $temp = unpack("f",$temp);
          $mz_array[$counter] = $temp[1];
          $counter++;
        }
        $hits++;
      }
      $query = sprintf("select precursor.mzValue, glycoPeptide.protein, binaryDataArray.arrayLength, binaryDataArray.encodedLength, binaryDataArray.arrayData from glycoPeptide, spectrum, binaryDataArray, run, precursor where run.glycoPeptide = glycoPeptide.id AND spectrum.run = run.id AND precursor.run = run.id AND binaryDataArray.spectrum = spectrum.id AND precursor.id = spectrum.precursor AND spectrum.spectrum like 'intensity' AND precursor.mzValue like '%s' and glycoPeptide.protein like '%s' and run.glycoSite like '%s' and run.glycoType like '%s' ORDER by glycoPeptide.protein, spectrum.spectrum",(string)$prec, (string)$gp, (string)$site, (string)$type);
      $result = mysql_query($query);
      while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
        /* Manually entering string here also gives undefined values */
        /* $int = " Copy the string from above in here "; */
        $int = base64_decode($row[4]);
        /* The result from this is the above binaryString */
        /* echo $row[4]; */ 
        $unc_int = gzuncompress($int);
        $max = strlen($unc_int);
        $counter = 0;
        $max_int = 0;
        for ($i = 0; $i < $max; $i = $i + 4) {
          $temp= substr($unc_int,$i,4);
          $temp = unpack("f",$temp);
          $int_array[$counter] = $temp[1];
          $counter++;
          if ($temp[1] > $max_int) {
            $max_int = $temp[1];
            $counter++;
          }
        }
      }
      /* The following chunk is just to test the arrays */
      for ($i = 0; $i < $counter; $i++) {
        echo $i;
        echo " -  ";
        echo $mz_array[$i];
        echo " - ";
        echo $int_array[$i];
        echo "<br/>";
      }
      for ($i = 0; $i < $counter; $i++) {
        $plot_data[$i] = array('',$mz_array[$i],$int_array[$i]);
      }
      // Plot the regular spectrum
      $width = 1024;
      $height = 768;
      $plot = new PHPlot($width,$height);
      $plot->SetMarginsPixels(NULL,NULL,NULL,35);
      $plot->SetPrintImage(False);
      $plot->SetPlotType('thinbarline');
      //$plot->SetXTitle('m/z Values');
      $plot->SetXTickAnchor('400');
      $plot->SetDataColors('red');
      $plot->SetXTickIncrement('200');
      $plot->SetXDataLabelPos('none');
      $plot->SetYTitle('Intensity');
      $plot->SetYTickAnchor('0');
      //Might need to define this dynamically with nested if/else loops
      $plot->SetYTickIncrement('100000');
      $plot->SetDataType('data-data');
      $plot->SetDataValues($plot_data);
      $plot->SetTitle('Fragmentation Spectrum');
      //$plot->DrawGraph();

      mysql_close($link);
    ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>Query result page</title>
    <script src="jquery-1.9.1.min.js"></script>
  </head>
  <script>
    var gp = '<?php echo htmlspecialchars($_GET['gp']); ?>';
    $(document).ready(function() {
      $('.button').click(function() {
        window.open('http://www.uniprot.org/uniprot/?query='+gp+'+AND+organism:human&sort=score');
      });
      $('.XY').click(function() {
        var mz_array = <?php echo json_encode($mz_array) ?>;
        var int_array = <?php echo json_encode($int_array) ?>;
        var table = 
          "<table border=\"1\">"
            +"<tr>"
              +"<th>m/z</th>"
              +"<th>intensity<t/h>"
            +"</tr>";
        var max = <?php echo $counter ?>;
        for (var i = 0; i < max; i++) {
        table += "<tr>"
                   +"<td>"+mz_array[i]+"</td>"
                   +"<td>"+int_array[i]+"</td>"
                 +"</tr>";
        }
        table += "</table>";
        var disp = window.open();
        $(disp.document.body).html(table); 
      });
    });
  </script>
  <body>
    <p>The displayed spectrum belongs to <?php echo $gp ?> with a precursor [M+H] of <?php echo (($prec*$charge)-($charge+1)); ?>.<br>
    The peptide belonging to this glycopeptide has a mass of <?php echo $pepmass ?> and sequence: <?php echo $pepseq ?>.<br>
    <button class="button">Uniprot search</button> <button class="XY">Display XY data</button></p>
    <img src="<?php echo $plot->EncodeImage();?>" alt="Plot Image">
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:44:53.903

这很复杂：

```
$max = strlen($unc_mz);
  $counter = 0;
  for ($i = 0; $i < $max; $i = $i+4) {
    $temp = substr($unc_mz,$i,4);
    $temp = unpack("f",$temp);
    $mz_array[$counter] = $temp[1];
    $counter++;
  } 
```

改用这个：

```
$mz_array = array_values(unpack("f*", $unc_mz)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:43:04.803

我正在增加我不应该拥有的索引之一，if ($temp[1] > $max_int) { // stuff } 中的 $counter++ 在检测到新的最大值时会碰撞索引。

int_array 的新代码现在看起来像这样（使用 Sectus 的技巧和 max(array)）：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
  $int = base64_decode($row[4]);
  $unc_int = gzuncompress($int);
  $int_array = array_values(unpack("f*",$unc_int));
  $max_int = max($int_array);
} 
```

以下语法也是有效的（如果您不想使用 Sectus 的技巧）：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
  $int = base64_decode($row[4]);
  $unc_int = gzuncompress($int);
  $max = strlen($unc_int);
  $counter = 0; 
  $max_int = 0;
  for ($i = 0; $i < $max; $i = $i + 4) {
    $temp= substr($unc_int,$i,4);
    $temp = unpack("f",$temp);
    $int_array[$counter] = $temp[1];
    $counter++;
    if ($temp[1] > $max_int) {
      $max_int = $temp[1];
    } 
  } 
} 
```

我还要感谢所有为此烦恼的人。

# javascript - 谷歌地图在获取外部 JSON 后不显示标记

> ID：14958676
> 
> 赞同：0
> 
> 时间：2013-02-19T13:25:54.943
> 
> 标签：javascript, jquery, json

我可以从我网站中的外部 JSON 读取 lat、lgt 等。但我无法弄清楚为什么不显示标记（markerclusterer）。

我可以给你看两个例子：

1 => [http://www.webtemplum.com/geo/](http://www.webtemplum.com/geo/) 完美运行

2 => [http://www.webtemplum.com/geo/test.php](http://www.webtemplum.com/geo/test.php) 它不起作用。

您可以注意到控制台中的链接 2 我可以正确读取 JSON。也许我需要在其他部分移动一些代码（加载不同？）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:09:55.050

问题是我的 lat / lgt 在 E6 中。

```
var latLng = new google.maps.LatLng(    (data[i].lat/1E6),
                                                            (data[i].lng/1E6)   ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:29:17.143

尝试为您分配地图的 div 提供不同的 id

```
<div id="mappa1" class="shadow610" style="position: relative; background-color: rgb(229, 227, 223); overflow: hidden;"> 
```

和

```
<div id="mapp2" class="shadow610" style="position: relative; background-color: rgb(229, 227, 223); overflow: hidden;"> 
```

# java - Gradle tomcat 插件和属性文件

> ID：14958679
> 
> 赞同：1
> 
> 时间：2013-02-19T13:26:01.603
> 
> 标签：java, tomcat, gradle

我想使用 gradle tomcat 插件来使用 gradle 进行集成测试。当前项目依赖于正在运行的 tomcat 的 catalina.base 目录下的一些 .properties 文件（无法更改，因为另一个依赖项目也依赖于它们）。

有人知道如何将这些文件部署到嵌入式 tomcat 实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:47:11.800

我发现这只是一个简单的复制任务问题。这是我的解决方案：

```
task copyDMConfigFiles << {
def srcDir = new File('src/test/resources/conf')
if(!srcDir.isDirectory())
    println "Outlet configuration files missing!!!"

def buildDir = new File('build/tmp/tomcatRunWar/conf')
if(!buildDir.isDirectory()) {
    println "Outlet target directory missing. Creating one"
    buildDir.mkdirs()
}

copy {
    from(srcDir)
    into(buildDir)
    include '**/*.properties'
    include '**/*.xml'
}

copy {
    from('src/main/webapp/WEB-INF')
    into('build/tmp/tomcatRunWar/work/Tomcat/localhost/digitalmedia/WEB-INF')
    include 'web.xml'
    include 'dispatcherservlet.xml'
} 
```

}

# c# - ASP.NET 可视化图表\流程图控件

> ID：14958681
> 
> 赞同：1
> 
> 时间：2013-02-19T13:26:06.043
> 
> 标签：c#, javascript, asp.net, jsplumb, microsoft-glee

我正在寻找 Web 应用程序的图表\图表\流程图用户控件，最好是 ASP.NET。

我的愿望是传递一个包含节点和边集合的 Graph 对象，我要寻找的功能是：

1.  添加一个新节点。
2.  用一条边连接两个节点。
3.  删除节点和边
4.  自动布局算法，以最大限度地减少层和边缘的交叉

我找到了部分解决方案，可以帮助我创建这样的组件，例如：

1.  JSPlumb 或 Raphael 在客户端上绘制图形。
2.  GLEE\ MSAGL 以可视化方式自动对图形进行排序。

所有这些都将允许我构建一个组件，但我想知道是否有人已经看过基于 Web 的东西并且可以完成任务？希望它的开源:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:15:08.070

您是否考虑过[Dracula Graph Library](http://www.graphdracula.net/)？看起来它可以很好地处理第 4 部分。您只需为用户连接一些编辑控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:09:23.900

从[这个](https://stackoverflow.com/a/4657455/168097)SO question 除了 Raphael 之外，还有值得一试的[jointjs.com](http://jointjs.com)

# android - android平板电脑上的动画显示错误

> ID：14958686
> 
> 赞同：2
> 
> 时间：2013-02-19T13:26:18.497
> 
> 标签：android, animation, tablet

我正在开发一个从这个启动屏幕开始的 android 项目。该项目可以在模拟器和真实设备上顺利运行，除了平板电脑..

```
package com.example.project;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.LinearInterpolator;
import android.view.animation.TranslateAnimation;
import android.widget.ImageView;
import android.widget.TextView;

public class Splashscreen extends Activity 
{
    private static String TAG=Splashscreen.class.getName();
    private static long SLEEP_TIME=6;
    TextView tv;
    ImageView iv;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.splash1);

        TranslateAnimation translate = new TranslateAnimation(Animation.RELATIVE_TO_PARENT,0,Animation.RELATIVE_TO_PARENT,0,Animation.ABSOLUTE,250,Animation.ABSOLUTE,0);
        translate.setDuration(3000);
        translate.reset();  
        translate.setFillAfter(true);

        tv=(TextView)findViewById(R.id.tt1);

        tv.startAnimation(translate);

        iv=(ImageView)findViewById(R.id.i1);
        Animation anim1= new AlphaAnimation(1, 0);
        anim1.setDuration(1000);
        anim1.setInterpolator(new LinearInterpolator());
        anim1.setRepeatCount(1);
        anim1.setRepeatMode(Animation.REVERSE);
        iv.startAnimation(anim1);

        IntentLauncher launcher=new IntentLauncher();
        launcher.start();
    }
    private class IntentLauncher extends Thread
    {
        public void run()
        {
            try{
                Thread.sleep(SLEEP_TIME*1000);

            }catch(Exception e)
            {
                Log.e(TAG,e.getMessage());
            }
            Intent i=new Intent(Splashscreen.this,Login_or_up.class);
            Splashscreen.this.startActivity(i);
            Splashscreen.this.finish();
        }
    }

} 
```

logCat 中显示的错误是

```
 02-19 18:04:45.434: D/AndroidRuntime(613): Shutting down VM
02-19 18:04:45.454: W/dalvikvm(613): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-19 18:04:45.464: E/AndroidRuntime(613): FATAL EXCEPTION: main
02-19 18:04:45.464: E/AndroidRuntime(613): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.project/com.example.project.Splashscreen}: java.lang.NullPointerException
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.os.Looper.loop(Looper.java:123)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-19 18:04:45.464: E/AndroidRuntime(613):  at java.lang.reflect.Method.invokeNative(Native Method)
02-19 18:04:45.464: E/AndroidRuntime(613):  at java.lang.reflect.Method.invoke(Method.java:521)
02-19 18:04:45.464: E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-19 18:04:45.464: E/AndroidRuntime(613):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-19 18:04:45.464: E/AndroidRuntime(613):  at dalvik.system.NativeStart.main(Native Method)
02-19 18:04:45.464: E/AndroidRuntime(613): Caused by: java.lang.NullPointerException
02-19 18:04:45.464: E/AndroidRuntime(613):  at com.example.project.Splashscreen.onCreate(Splashscreen.java:38)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-19 18:04:45.464: E/AndroidRuntime(613):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-19 18:04:45.464: E/AndroidRuntime(613):  ... 11 more
02-19 18:04:47.394: I/Process(613): Sending signal. PID: 613 SIG: 9 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:44:15.983

学习阅读日志，你必须，年轻的padawan！

```
02-19 18:04:45.464: E/AndroidRuntime(613): Caused by: java.lang.NullPointerException
02-19 18:04:45.464: E/AndroidRuntime(613):  at com.example.project.Splashscreen.onCreate(Splashscreen.java:38) 
```

如您所说，第 38 行上的 Nullpointer 异常，第 38 行正在使用`tv`and `translate`。因为肯定会启动翻译，所以您只能在平板电脑上获得它，因为您的 R.layout.splash1 的 xlarge 或 sw720 没有 ID 为 R.id.i1 的 TextView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:33:30.550

我不喜欢你的 IntentLauncher。注释掉它并在 onCreate 的末尾添加这段代码：

```
new Handler().postDelayed(new Runnable() {
   public void run() {
        Intent i=new Intent(Splashscreen.this,Login_or_up.class);
        Splashscreen.this.startActivity(i);
        Splashscreen.this.finish();
   }
}, 6000); 
```

第 38 行是什么？

# jquery - 通过延迟回调从 AJAX 返回缓存数据

> ID：14958699
> 
> 赞同：1
> 
> 时间：2013-02-19T13:26:57.097
> 
> 标签：jquery, ajax, jquery-deferred

我有一段 JS 向我的服务器发出 AJAX 请求，它返回一些 JSON。它看起来像这样：

```
$.ajax({
    dataType: 'json',
    type: 'GET',
    localCache: true,
    cacheTTL: 6,
    url: url
}).fail(function(jqXHR, textStatus, something) {
    //Display error message
}).done(function(data) {
    //Do stuff with the data
}); 
```

现在我想做的是使用localStorage在客户端缓存json，这样如果缓存足够新鲜，请求就不会真正发送，而是使用缓存。我一直在使用 Paul Irish 的 ajax-localstorage-cache 插件来执行此操作，但不幸的是它不支持延迟回调，因此我已尽力对其进行修改以使其支持。

```
$.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
    // Cache it ?
    if ( !Modernizr.localstorage || !options.localCache ) return;

    var hourstl = options.cacheTTL || 5;

    var cacheKey = options.cacheKey || options.url.replace( /jQuery.*/,'' ) + options.type + options.data;

    // if there's a TTL that's expired, flush this item
    var ttl = localStorage.getItem(cacheKey + 'cachettl');
    if ( ttl && ttl < +new Date() ){
        localStorage.removeItem( cacheKey );
        localStorage.removeItem( cacheKey  + 'cachettl' );
        ttl = 'expired';
    }

    var value = localStorage.getItem( cacheKey );
    if ( value ) {
        //In the cache? So get it, apply done callback & abort the XHR request
        // parse back to JSON if we can.
        if ( options.dataType.indexOf( 'json' ) === 0 ) value = JSON.parse( value );

        //Pass value back to the done callback somehow...

        // Abort is broken on JQ 1.5 :(
        jqXHR.abort();
    } else {
        $.Deferred(function(defer) {
            //If it not in the cache, we change the done callback, just put data on localstorage and after that apply the initial callback
            if ( jqXHR.done ) {
                jqXHR.realdone = jqXHR.done;
            }

            jqXHR.done(function(data) {
                var strdata = data;
                if ( options.dataType.indexOf( 'json' ) === 0 ) strdata = JSON.stringify( data );

                // Save the data to localStorage catching exceptions (possibly QUOTA_EXCEEDED_ERR)
                try {
                    localStorage.setItem( cacheKey, strdata );
                    // store timestamp
                    if ( ! ttl || ttl === 'expired' ) {
                        localStorage.setItem( cacheKey  + 'cachettl', +new Date() + 1000 * 60 * 60 * hourstl );
                    }
                } catch (e) {
                    // Remove any incomplete data that may have been saved before the exception was caught
                    localStorage.removeItem( cacheKey );
                    localStorage.removeItem( cacheKey + 'cachettl' );
                    if ( options.cacheError ) options.cacheError( e, cacheKey, strdata );
                }

                if ( jqXHR.realdone ) jqXHR.realdone( defer.resolve );
            }).fail(defer.reject)
        }).promise(jqXHR);
    }
}); 
```

我遇到的问题是我似乎无法弄清楚如何将缓存值恢复为原始`done`回调。如果我这样做`jqXHR.abort()`，`fail`回调将运行，如果我不中止，那么它只会正常执行请求。

我做错了什么吗？如果是这样，什么是更聪明的方法呢？如果没有，我怎样才能将缓存值返回到完成回调（或至少将其返回到失败回调）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:18:45.430

您可以考虑为您的 ajax 调用使用包装器。所以像：

```
$.myAjax = function(params,doneCb,failCb){  //doneCb: doneCallback

    var data = getFromLocalStorage(params),

    if( data) {
        var dfd = $.Deferred();
        dfd.done(doneCb);
    }else{
         dfd = $.ajax(params).done(function(resp){ 
                 // add to localStorage 
                 doneCb && doneCb(resp);
             }).fail(failCb)
   return dfd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T01:47:43.193

试试这个： [http ://www.artandlogic.com/blog/2013/06/ajax-caching-transports-compatible-with-jquery-deferred/](http://www.artandlogic.com/blog/2013/06/ajax-caching-transports-compatible-with-jquery-deferred/)

它允许使用延迟缓存 ajax 请求。

# android - 如何捕捉 Longpress 并在 KEYCODE_VOLUME_UP 上调用标准操作？

> ID：14958701
> 
> 赞同：1
> 
> 时间：2013-02-19T13:26:58.863
> 
> 标签：android, volume, key-events

我希望用户能够长按 volumeUp 硬件按钮来跳过歌曲，并在短按时执行常规的 volumeUp 操作。

我能够区分两者（我找到[了这个解决方案](https://stackoverflow.com/a/12950938/1128211)，使用 onKeyDown、onKeyLongPress 和 onKeyUp 之间的标志）但我想知道当按下音量增大按钮时我是否仍然可以调用标准/超级操作。我似乎无法弄清楚何时调用 volumeUp 操作（在 onKeyDown 或 onKeyUp 事件中）以及在哪里调用它。

还是我应该编写自己的函数来更改音量？

谢谢。

我的代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        event.startTracking();
        if (bLong) {
            bShort = false;
            return true;
        } else {

            bShort = true;
            bLong = false;

            return true;
        }
    }

    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        if (bShort) {
            bShort = false;
            bLong = false;
            if (mp != null) {
                //HERE IS WHERE I WANT TO CALL THE VOLUME-UP ACTION
            }
            return true;
        }
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
        if (bRunning && mp != null) {
            playNextSong();
        }
        bShort = false;
        bLong = false;
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:52:43.637

看看也许这会对你有所帮助。

```
public boolean dispatchKeyEvent(KeyEvent event) {
        int action = event.getAction();
        int keyCode = event.getKeyCode();

        switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            if (action == KeyEvent.ACTION_DOWN && event.isLongPress()) {
            //(skipping a song)
            }
            if (action == KeyEvent.ACTION_UP) {           
            //(vol up)
            }
            return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        if (action == KeyEvent.ACTION_UP)

        return true;
    default:
        return super.dispatchKeyEvent(event);
    }
} 
```

# jakarta-ee - 服务器将 JSF 页面推送到客户端

> ID：14958702
> 
> 赞同：0
> 
> 时间：2013-02-19T13:27:01.123
> 
> 标签：jakarta-ee, servlets, jsf-2, richfaces, cdi

对于我的基于 Java EE 6 (Richfaces 4.1) 的应用程序，我试图实现这一点：用户打开一个浏览器窗口，该窗口进行长时间轮询，直到调用给定的 REST 服务（其余服务将收到一个 facelets 名称以及一个列表参数）。作为 Web 服务调用的结果，JSF 页面使用 REST 调用中指定的参数在浏览器中呈现。

作为关注的证明，我首先尝试了 AsyncContext 和 CDI 事件，我可以在浏览器中打印 REST 参数：

```
@WebServlet(name = "Notifier", urlPatterns = {"/Notifier"},asyncSupported = true)
public class Notifier extends HttpServlet {

    @Inject
    Event<NotificationReq> events;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
            AsyncContext startAsync = request.startAsync();
            startAsync.setTimeout(0);
            events.fire(new NotificationReq(startAsync));
    }
}
-------------------------
    @ConcurrencyManagement(ConcurrencyManagementType.BEAN)
    @Singleton
    @Path("notify")
    public class RESTNotifier {

        @PostConstruct
        public void onInit() {
            this.browsers = new CopyOnWriteArrayList<NotificationReq>();
        }
        private CopyOnWriteArrayList<NotificationReq> browsers;

        public void onNewNotificationRequest(@Observes NotificationReq nr) {
            this.browsers.add(nr);
        }

        @GET
        @Path("{message}")
        public void specific(@PathParam("message") String message) {
            for (NotificationReq notificationRequest : browsers) {
                notificationRequest.sendMessage(message);
                this.browsers.remove(notificationRequest);
            }
        }
    }
    -----------------------------------------------------
        public class NotificationReq {

            private AsyncContext asyncContext;

            public NotificationReq(AsyncContext asyncContext) {
                this.asyncContext = asyncContext;
            }

            public void sendMessage(String message){
                try {
                    PrintWriter out = this.asyncContext.getResponse().getWriter();
                    out.println(message);//TODO: Invoke and Render JSF instead of printing message!
                    this.asyncContext.complete();
                } catch (IOException ex) {
                    Logger.getLogger(NotificationReq.class.getName()).log(Level.SEVERE, null, ex);
                }
            } 
```

当我使用richfaces时，我认为我可以更好地使用a4j：push：[http ://showcase.richfaces.org/richfaces/component-sample.jsf?demo=push&sample=pushCdi](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=push&sample=pushCdi)

我的问题是：

1）您认为最好的方法是什么（我会说 Richfaces，因为 AsyncContext 在服务被调用后立即终止，我想要一种“无限”长轮询）？

2）您能否指出任何显示如何以编程方式调用 JSF 页面的示例（这是您可以在我的代码中看到的 TODO）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:51:23.790

要让推送更新页面的某些部分，请执行以下操作：

```
<a4j:push ...>
  <a4j:ajax event="dataavailable" render="whatYouWantToRerender" />
</a4j:push> 
```

# entity-framework - EntityFramework 上的逻辑删除

> ID：14958706
> 
> 赞同：1
> 
> 时间：2013-02-19T13:27:14.013
> 
> 标签：entity-framework

**EntityFramework**上软删除的优雅方式是什么？我已经将一个属性（数据库字段）标识为已删除，并始终在 linq 语句上使用此过滤器。

像

```
Foo Class  
  int NumberField  
  string Description 
  bool Deleted

contexts.Foos.Where(x=> !x.Deleted); 
```

在复杂的查询上是不可行的。

我只是看了这些解决方案.. [Link 1](http://benjaminet.wordpress.com/2011/12/14/handling-logical-delete-with-entity-framework-4/) , [Link 2](http://blog.jorgef.net/2010/12/ef-soft-delete.html)

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:33:15.647

是的，这可以通过 EF 模式实现。如果您使用 Fascade/repository 模式并每次都通过该 fascade 访问。

例如，所有存储库类上的接口实现可能如下所示：

```
 class MyRepositoryBase<T>....

    public IQueryable<T> ValidQuerySet  // this is not deleted check  Set

    {  get {  return Context.Set<T>().Where(t => t.deleted != true);
           }
    } 
```

您将完全像访问原始 DbSet 一样访问它。EF 将结合这些条件。

```
var myQuerySet = MyRespository<T>.ValidQuerySet.Where(t=>t.foo == "bar"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:27:38.530

您可能需要考虑在上下文类本身上创建存储库，而不是直接查询您的上下文（如在[此站点](http://architects.dzone.com/articles/implementing-repository)上找到）。然后，您可以做的是每当您查询记录时（例如通过使用`Filter<T>(Expression<Func<T, bool>> predicate)`存储库的方法，您始终可以执行以下操作：

```
return Context.Set<Foo>().Where<Foo>(x => !x.Deleted).Where<Foo>(predicate).AsQueryable<Foo>(); 
```

更好的是，如果您要在多个对象类型中实现该软删除，然后将其拉入一个抽象类（`SoftDeleteable`例如调用它），那么您的 Filter 方法签名可能是：

```
public virtual IQueryable<T> Filter<T>(Expression<Func<T, bool>> predicate) where T : SoftDeletable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T14:32:15.000

您可能不会喜欢我的回答，但我能想到的“不那么痛苦”的方式需要大量存储过程：每个实体 1 个，而您所做的只是如果存在 UPDATE foo Deleted = True。我的通常看起来像这样

```
PROCEDURE [dbo].[SP_Address_UnSet]
    @ID bigint
AS
BEGIN
    DECLARE @IsInactive bit

    SELECT @IsInactive = IsInactive
    FROM [Address]
    WHERE AddressID = @ID

    IF (0 = @@ROWCOUNT)
        RETURN -1

    -- implicit else

    IF (1 = @IsInactive)
        RETURN 0

    -- implicit else

    UPDATE [Address]
    SET IsInactive = 1
    WHERE AddressID = @ID

    RETURN @@ROWCOUNT -- should be 1
END 
```

然后在每个实体上映射到该 SP。

您可以有 1 个单一的 SP，并将表名作为参数传递，但由于您不能通过动态查询直接在 T-SQL 中使用它，因此您必须构建子执行（并担心 SQL 注入！！）

```
Exec('SELECT * FROM ' + @tableName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-09T10:39:49.947

[全局查询过滤器 (EF Core)](https://docs.microsoft.com/en-us/ef/core/querying/filters)和[实体框架拦截器 (EF 6+)](https://docs.microsoft.com/en-us/ef/ef6/fundamentals/logging-and-interception)是在 EntityFramework 上添加的新功能，用于解决此类问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-19T16:07:16.647

我发现以这种方式进行“软删除”非常痛苦：

1.  当你进行数据访问时，你必须在任何地方记住这个标志。是的，您可以将它包装在一些存储库模式中，但您仍然可以在任何地方使用它。
2.  您的表格很快就充满了“已删除”的条目，使报告、分析效率低下。

我建议您将硬“已删除”条目放入不同的表或数据库中，从长远来看，它将为您节省时间。

# hibernate - java.lang.NoSuchMethodError：org.hibernate.cfg.Configuration.addAnnotatedClass

> ID：14958708
> 
> 赞同：1
> 
> 时间：2013-02-19T13:27:17.177
> 
> 标签：hibernate, jpa, annotations, hibernate-annotations, persistence.xml

当我尝试本[教程](http://www.vogella.com/articles/JavaPersistenceAPI/article.html)时，我是 JPA 和休眠的新手 。我在我的 persistence.xml 中添加了以下提供程序，

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
```

我收到这个错误..

```
log4j:WARN No appenders could be found for logger (org.jboss.logging).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Exception in thread "main" java.lang.NoSuchMethodError: org.hibernate.cfg.Configuration.addAnnotatedClass(Ljava/lang/Class;)Lorg/hibernate/cfg/Configuration;
    at org.hibernate.ejb.Ejb3Configuration.addAnnotatedClass(Ejb3Configuration.java:1421)
    at org.hibernate.ejb.Ejb3Configuration.addNamedAnnotatedClasses(Ejb3Configuration.java:1391)
    at org.hibernate.ejb.Ejb3Configuration.addClassesToSessionFactory(Ejb3Configuration.java:1184)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1048)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:291)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:373)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)
    at de.vogella.jpa.simple.main.Main.main(Main.java:17) 
```

请帮助解决此错误。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:45:11.133

检查你的 Hibernate 版本，你需要 hibernate-core 3.6.0 或更高版本才能使用`addAnnotatedClass`方法`org.hibernate.cfg.Configuration`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T13:43:10.270

看起来 Hibernate Annotation jar 是错误的。它与 jar 版本不兼容。所以这就是为什么它显示`"java.lang.NoSuchMethodError"`

您能告诉我您当前使用的是哪个 jar 版本，请指定版本吗？那么只有我们必须轻松解决这个问题。

您目前正在使用哪个 Hibernate 版本？

您目前正在使用哪个注释版本？

请指定版本。谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-05T05:56:45.840

使用以下依赖项...

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>4.3.6.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>3.6.4.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-annotations</artifactId>
    <version>3.5.5-Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate.common</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>4.0.4.Final</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.7</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T10:18:17.260

此外：

我遇到了同样的问题，在谷歌搜索答案后我来到了这个页面，但这些答案都没有帮助我，所以如果有人遇到同样的问题：

我有一个`ArrayList<Entity>`，当我想向数组列表添加一个项目时，遇到了 NoSuchMethodException。问题是`ArrayList`必须是`Array`.

# maven - Maven：POM 模块和子模块层次结构

> ID：14958710
> 
> 赞同：4
> 
> 时间：2013-02-19T13:27:23.650
> 
> 标签：maven, structure, pom.xml

我的项目结构如下：

```
.
 |--module
 |  `-- pom.xml
 |  --submodule
 |    `-- pom.xml
 `-- pom.xml 
```

POM（简化）：

*   项目：

```
<project>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>project</artifactId>
    <name>Project</name>
    <groupId>org.myorg</groupId>
    <version>1.0.6-SNAPSHOT</version>
    <packaging>pom</packaging>

    <modules>
        <module>module</module>     
    </modules>
    (...)
</project> 
```

*   模块：

```
<project>
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.myorg</groupId>
        <artifactId>project</artifactId>
        <version>1.0.6-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <artifactId>module</artifactId>
    <name>Module</name>
    <groupId>org.myorg</groupId>
    <version>1.0.6-SNAPSHOT</version>
    <packaging>pom</packaging>

    <modules>
        <module>submodule</module>      
    </modules>
    (...)
</project> 
```

*   子模块：

```
<project>
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.myorg</groupId>
        <artifactId>module</artifactId>
        <version>1.0.6-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

    <artifactId>submodule</artifactId>
    <name>Submodule</name>
    <groupId>org.myorg</groupId>
    <version>1.0.6-SNAPSHOT</version>
    <packaging>jar</packaging>
    (...)
</project> 
```

`maven install`在 POM 的*项目*或*模块*中运行时，项目已成功构建。但是，在*子模块*中运行时会出现此错误：

**无法在项目子模块上执行目标：找不到工件 org.myorg:project:pom:1.0.6-SNAPSHOT**

为什么我的子模块找不到 POM*项目*？指定了相对路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:57:19.093

我注意到的第一件事是每个具有父级的子模块都包含以下行：

```
<relativePath>../pom.xml</relativePath> 
```

这是没用的，因为它在 Maven 中是默认的，或者换句话说只是删除它。

此外，在多模块构建中，您不应定义版本。如果 groupId 始终相同，您也可以省略 groupId，因为当前模块从其父模块继承版本。

模块：pom.xml

```
<project>
    <parent>...
    </parent>    
    <artifactId>module</artifactId>
    <packaging>pom</packaging>

    <name>Module</name>

    <modules>
        <module>submodule</module>      
    </modules>
    (...)
</project> 
```

除此之外，您不能进入子模块并调用

```
mvn install 
```

如果你想安装一个多模块构建的单独模块，你应该使用这样的东西：

```
mvn -amd -pl submodule install 
```

这将做你喜欢做的事，但通常你应该安装一个完整的多模块构建，除非你完全知道你在做什么。选项*-amd*是*--also-make-dependents*的缩写。*-pl*是*--projects*的缩写，用于定义应在调用期间创建的项目列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T06:44:17.837

首先，您需要`mvn install`在根项目上运行，它将在您的本地 maven 存储库中创建工件。从第二次开始，您只能运行子模块。如果您不在根项目上运行，maven 不会为您的项目创建任何工件，因此当您在子模块上运行时，它无法从 maven 存储库中找到工件。

# for-loop - 批量执行多个 for 命令

> ID：14958712
> 
> 赞同：0
> 
> 时间：2013-02-19T13:27:27.587
> 
> 标签：for-loop

我在使用 FOR 命令时遇到了一些问题。我在这里阅读了无数文章，但没有什么能完全符合我的要求。我正在尝试获取一个包含大量文件（大约 6000 个）的目录，如果变量读取为 1 而不是 0，则读取文件并将该数据格式化为单个文件。脚本远未完成我只是有一个问题。我到目前为止的代码就是这样

```
@echo off

set Rfile=
dir /b g:\health\test\ >> dir.txt
For /F "tokens=1 delims=" %%y in (dir.txt) do Call :Read %%y

:Read

set Rfile=%~1

For /F "tokens=1,2,3,4,5,6 delims=" %%a in (g:\health\test\%Rfile%) do Call :test %%a

:test
SET Machine=%~1
SET BSOD=%~2
SET NTFS=%~3
SET DISK=%~4
Set Workstation=%~5
Set Server=%~6

If NOT "%BSOD%" == "%Machine%" (

echo %machine% %BSOD% %NTFS% %DISK% %WorkStation% %Server%

 )

:EOF 
```

这为我提供了来自具有以下信息的文件的输出。

> 电脑蓝屏0 NTFS0 磁盘0 服务0 服务0

测试”没有空格，但测试在输出其余部分的下方

我不希望输出中的文件名（在本例中为 test）。我在这里做错了什么？

> 文件信息“COMPUTER BSOD0 NTFS0 DISK0 Service0 Service0”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:30:46.650

您的问题是您的 FOR 循环正在按预期调用，但是，一旦您完成了 FOR 循环，无论如何`:test`您都将进入。`:test`如果你这样做，那么 %1 将成为你的脚本的输入（`test`在这种情况下）。

要修复，只需`GOTO :eof`像这样添加：

```
For /F "tokens=1,2,3,4,5,6 delims=" %%a in (g:\health\test\%Rfile%) do Call :test %%a

REM Do not fall through into the :test label code!
GOTO :eof

:test
SET Machine=%~1 
```

顺便说一句，您不应该有一个名为`:EOF`. 已经定义了一个隐式`eof`标签。

顺便说一句，您应该确保所有子例程`goto :eof`也以结束。在这个例子中你只有 1 个子程序 ( `:test`)，所以它工作正常，但如果你添加更多，你就会遇到问题。

# ruby-on-rails - 我应该使用 get、post、put - 这有关系吗？

> ID：14958713
> 
> 赞同：1
> 
> 时间：2013-02-19T13:27:34.613
> 
> 标签：ruby-on-rails, routing, routes, ruby-on-rails-3.2, httpverbs

在我的应用程序中，我在单击时间链接时切换 a 是否`student`属于 a 。`training time`

```
# controller
def time
  @student = Student.find(params[:student_id])
  @time = TrainingTime.find(params[:training_time_id])
  @student.toggle_time(@time)
  respond_to do |format|
    format.html { redirect_to @student }
    format.js
  end
end

# routes
resources :students do
  match "time/:training_time_id", to: "students#time", as: :toggle_time
end

# view
<%= link_to t.time_format, student_toggle_time_path(@student, t), remote: true %> 
```

目前它正在使用匹配，但是设置它的正确方法是什么，为什么？

感谢您的输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:30:38.300

这都是关于语义的。`GET`获取资源，`POST`创建资源，`PUT`（或者`PATCH`，这些是关于此事的辩论）更新资源，`DELETE`删除资源。

老实说，还有关于`POST`和的争论`PUT`。但是由于网络服务器通常只处理`GET`和`POST`（通过参数模拟其他动词的行为），我倾向于不去打扰太多，并坚持我上面写的。

您似乎没有创建任何资源，因此从语义上讲，`PUT`这就是您要寻找的。

至于`match`，在rails 3.X中，是一个catch all =>所有动词都在路线中匹配。您可以限制使用`match 'something', via: [:get, :post]`. 在 Rails 4 中，默认情况下它什么都不做，你必须明确处理的动词。

# css - 透明css在chrome中不起作用

> ID：14958716
> 
> 赞同：0
> 
> 时间：2013-02-19T13:27:49.763
> 
> 标签：css, google-chrome, html-select, html-input

我有以下 css 来设置输入和下拉菜单的背景，这在 IE 和 Firefox 中有效，但在 chrome 中无效：

```
.user-fld input{width:338px !important; margin-bottom:0px !important; height:18px !important; float:right; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; /* padding:0 8px; */}

.user-fld select{width:338px; background-image:url(../images/dropdown.png); background-repeat:repeat; border-bottom:1px solid #fff; padding:0 0 7px 0; border-left:none; border-right:none; border-top:none; float:right;color:White;} 
```

我正在使用这些来显示透明背景。请提出解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:32:57.563

传统上很难设置表单元素，例如`<input>`和。`<select>`试试`-webkit-appearance: none`。这是[一个演示](http://jsfiddle.net/f7Lme/)。

# ios - 显示 NSMutable 数组中的 uiimageviews 后，touchmoved 不起作用

> ID：14958720
> 
> 赞同：0
> 
> 时间：2013-02-19T13:27:55.080
> 
> 标签：ios, objective-c, uiimageview, nsmutablearray, touchesbegan

我正在开发一个项目，在该项目中我`UIImageView`使用`NSMutableArray`

代码是：

```
for (int i = 0; i < index ; i++) {
    image_name= [NSString stringWithFormat:@"%@%dpng.png",[string_values objectAtIndex:0],i+1];

    UIImageView *tempImageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:image_name]];

    tempImageView.userInteractionEnabled = YES;
    CGSize size2=tempImageView.image.size;
    int width2=size2.width/2;
    int height2 =size2.height/2;
    tempImageView.frame = CGRectMake(xvalue,yvalue,width2,height2);  

    [myArray addObject:tempImageView];
} 
```

之后，我添加子视图以使用以下代码在屏幕上显示它：

```
for(int i=0;i<[myArray count];i++) {
    [self.view addSubview:[myArray objectAtIndex:i]];
} 
```

以上所有代码都可以根据需要运行良好。现在对于 touchesBegan 方法，我正在执行以下代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    printf("the touch is fired");
    for(int i=0;i<[myArray count];i++) {
        [self.view addSubview:[myArray objectAtIndex:i]];
        touchStart = [[touches anyObject] locationInView:[myArray objectAtIndex:i]];
    }
} 
```

调用该`touchesBegan`方法时，应用程序在打印 touchesBegan 方法的第一行之后立即崩溃。

我在这里遇到了困难，也经历了许多问题/答案，但找不到有效的解决方案。任何帮助将不胜感激。感谢您的好回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:55:21.710

为了使您的图像视图可拖动，

1) 删除所有 - (void)touches 方法

2) 在创建 UIImageView *tempImageView (in loop) 之后添加这两行

```
 UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handleDrag:)];
[tempImageView addGestureRecognizer:panRecognizer]; 
```

3）然后，将此方法添加到您的视图 controller.m 文件中的某处

```
-(void) handleDrag:(UIPanGestureRecognizer *) panGesture{
CGPoint transition = [panGesture translationInView:self.view];
panGesture.view.center = CGPointMake(panGesture.view.center.x + transition.x, panGesture.view.center.y +transition.y);
[panGesture setTranslation:CGPointMake(0,0) inView:self.view];} 
```

# visual-studio-2012 - CurrentAppSimulator 不可用于测试应用内购买

> ID：14958721
> 
> 赞同：2
> 
> 时间：2013-02-19T13:27:56.933
> 
> 标签：visual-studio-2012, in-app-purchase, windows-phone-8, simulator

我已经设置了 Visual Studio 2012 windows phone 开发环境，除了应用内购买之外，一切都运行良好。我遇到的问题是，当我使用 Windows.ApplicationModel.Store.CurrentApp 时，我没有收到任何错误，但为了测试，如果我使用 Windows.ApplicationModel.Store.CurrentAppSimulator，我会收到以下错误：

```
The type or namespace name 'CurrentAppSimulator' could not be found (are you missing a using directive or an assembly reference?) 
```

似乎 CurrentAppSimulator 类在 Windows.ApplicationModel.Store 包中不可用。有人知道出了什么问题吗？

我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:06:44.197

Windows Phone 8 没有像 Windows 应用商店应用那样的 CurrentAppSimulator（请注意[http://bit.ly/15HdfbR](http://bit.ly/15HdfbR)底部的支持平台）。

相反，您需要使用此处概述的技术：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx)

这些步骤描述了如何下载和使用模拟应用内购买库来模拟 Windows Phone 8 上的应用内购买。

模拟应用内购买库可在此处获得：[http ://code.msdn.microsoft.com/wpapps/Mock-In-App-Purchase-33080f0c](http://code.msdn.microsoft.com/wpapps/Mock-In-App-Purchase-33080f0c)

祝你好运！

# apache - 如何在 Eclipse 中添加 Apache POI 库 - 用于 Selenium Webdriver 项目？

> ID：14958732
> 
> 赞同：10
> 
> 时间：2013-02-19T13:28:29.720
> 
> 标签：apache, selenium, webdriver, apache-poi

我需要将 apache poi 添加到我的项目中（我需要 hssf、ss 和 xssf）。我从网上下载了一个 jar 文件，但它不包含 xssf。我去了[http://poi.apache.org/](http://poi.apache.org/)并下载了这个： http: [//www.apache.org/dyn/closer.cgi/poi/release/src/poi-src-3.9-20121203.zip](http://www.apache.org/dyn/closer.cgi/poi/release/src/poi-src-3.9-20121203.zip)，我提取它..并被卡住了。我尝试了第 1 部分，但这仅适用于 JavaDoc。

我应该如何从这里开始？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-29T03:40:29.370

1.  下载[最新的稳定版本：Apache POI 3.16-FINAL](https://www.apache.org/dyn/closer.lua/poi/release/bin/poi-bin-3.16-20170419.zip)发行版，

2.  打开你的eclipse项目属性，

3.  Java 构建路径 > 库 > 添加外部 JAR，

4.  然后提取您下载的 zip 文件并导航提取的文件夹，

5.  选择子文件夹（docs、lib、ooxml-lib）下的所有 JAR，

6.  然后最后在 Order and Export 部分将标记添加到您刚刚添加的 jar 库中，

并单击确定。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T15:01:30.070

将评论推广到答案

您应该前往[Apache POI 下载页面](http://poi.apache.org/download.html)，然后下载*二进制*版本。二进制版本的文件名中有 -bin-。二进制版本包含 POI jar[及其依赖项](http://poi.apache.org/overview.html#components)。

您下载的名称中带有 -src- 的是源包，其中包含您自己构建 Apache POI 所需的一切，但如果您只是想开始使用，最好使用预编译的二进制包。

# javascript - 这个 jquery.ajax 调用的纯 JavaScript 等价物是什么？

> ID：14958735
> 
> 赞同：2
> 
> 时间：2013-02-19T13:28:39.860
> 
> 标签：javascript, ajax, jquery, xmlhttprequest

如何在不使用 jQuery 而只使用纯 JavaScript 的情况下重写下面的 jQuery.Ajax 调用？

谢谢！

```
$.ajax({
    type: 'POST',
    url: url,
    contentType: 'application/json',
    data: JSON.stringify(request),
    success: function (result) {
        alert("Submitted succesfully!");
    },
    error: function (jqXHR, textStatus, errorThrown) {

        alert('Error Occured' + errorThrown);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:30:35.160

如果你真的想知道 jQuery 中的 ajax 函数到底是做什么的，请打开 jquery 源代码并查看 ajax 函数，这里是源代码的链接。

```
http://code.jquery.com/jquery-1.9.1.js 
```

如果您想在没有 jQuery 的情况下执行此操作，则必须创建一个 Xml Http Request

[http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)

这基本上就是 AJAX（异步 javascript 和 xml）。

这是一个例子：

```
var xmlhttp;

if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}

else{ // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();

xmlDoc=xmlhttp.responseXML; 
```

这将创建一个 xmlhttp 对象，并使用 GET 将其发送到指定的 url，在本例中为 txt 文件，并询问它的内容。数据以 xml 格式返回，我们将其保存到`xmlDoc`. 现在，您可以随意使用数据。

我希望这有帮助！

# php - MCQ 测验加载缓慢且随机化不起作用

> ID：14958737
> 
> 赞同：1
> 
> 时间：2013-02-19T13:28:41.763
> 
> 标签：php, mysql

我正在创建一个基于 php 和 mysql 的 MCQ 测验。以下是我的主表的结构：

quiz 表：quiz id、quiz_category 类别表：id、title... 问题表：id、quiz id、categoryid、title... 答案表：id、question id...

首先，我在表格中填充了 150 多个测验、4 个类别、14000 多个问题和每个问题的正确答案。

为了节省时间，对于每个问题，从答案表[https://stackoverflow.com/editing-helpalong](https://stackoverflow.com/editing-helpalongwith)中提取正确答案以及其他 3 个随机答案。

现在，当我只用两个测验对其进行测试时，它运行良好。但是在 150 次测验中，出现了几个问题：

*   数据库很慢，以后的测验需要永远加载问题
*   答案的随机化不再起作用 - 与正确答案一起，其他选项显示相同的条目，使用户可以轻松猜测正确答案。

您可以在我之前的 Stackoverflow 查询中看到我正在使用的代码。[https://stackoverflow.com/questions/14826573/randomising-questions-and-answers-php-quiz-not-working](https://stackoverflow.com/questions/14826573/randomising-questions-and-answers-php-quiz-not-working)

知道测验程序的理想查询应该是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:47:56.757

我将提供一些关于如何提高性能的提示，但是这些都是通用的，可能并不完整。

[从上一个问题](https://stackoverflow.com/questions/14826573/randomising-questions-and-answers-php-quiz-not-working)中简要查看您的 PHP 和 SQL 语句，索引有几个合乎逻辑的位置。要添加索引，请参阅[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)以获取更多信息

```
$sql4="select * from answers where question_id=".$row2['id']; 
```

question_id 应该有一个索引

```
$sql2="select * from questions where quiz_id=".$_SESSION['quizid']; 
```

quiz_id 应该有一个索引

添加这两个索引也将提高这方面的选择性

```
$sql3="select * from answers where question_id in (select id from
questions where quiz_id =$row2[quiz_id]) order by rand()"; 
```

这将有助于您之前对每个查询执行全表扫描。

您的另一个问题是您有一个循环，并且在每次迭代中您都发送命令来查询数据库，您应该在循环之前立即收集所有信息，然后使用它进行迭代，而不是每次迭代发送单独的查询。

# php - php面向对象重载

> ID：14958741
> 
> 赞同：1
> 
> 时间：2013-02-19T13:28:48.490
> 
> 标签：php, overloading, magic-methods

我遇到了以下代码，无法弄清楚为什么使用 php 的 get 和 set 魔术方法以非直观的顺序输出脚本的输出。

```
class Magic
{
    public $a = "A";
    protected $b = array("a" => "A", "b" => "B", "c" => "C");
    protected $c = array(1,2,3);

    public function __get($v)
    {
        echo "$v";
        return $this->b[$v];
    }
    public function __set($var, $val)
    {
        echo "$var: $val";
        $this->$var = $val;
    }
}
$m = new Magic();
echo $m->a . "," . $m->b . "," . $m->c . ",";
$m->c = "CC";
echo $m->a . "," . $m->b . "," . $m->c; 
```

输出是：

```
bcA,B,C,c
CCbcA,B,C 
```

首先，为什么它不输出 A 作为第一件事？输出顺序没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:37:00.840

有人正在学习 Zend 认证；-)

[原因是只有在属性不可访问](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)时才会触发魔术方法。

因此，对于第一个回显，它获取`$m->a`this 是一个可访问的属性，因此它不会被回显，而是`__get`被简单地返回。在此之后，两者`$b`和`$c`都无法访问，因此它们被回显然后返回。

所以第一个回声的输出是：

```
b // echo'd by __get
c // echo'd by __get
A // simply returned, and echo'd in the concatenated string
B // (As above)
C // (As above) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:37:26.393

原因很简单。您进行字符串连接，因此 PHP 必须在输出一个之前准备完整的字符串。这意味着它执行需要连接的所有内容。当它执行时`getter`（`__get`仅对不可访问的成员调用方法）`echo`，首先执行然后返回值。

如果你分别回应它们，一切都会在它的位置上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:38:29.003

```
echo $m->a . "," . $m->b . "," . $m->c . ","; 
```

当调用此行时，它首先在连接发生之前解析变量名称。

所以它查找 $m->a，然后是 $m->b，然后是 $m->c。

由于 $m->a 解析为您的公共属性 a，因此它不会触发您的`_get`，因此不会立即发送其中的回声。但是，`$m->b`确实会触发它，这会导致它得到回显。

最后，一旦变量被解析，整个连接的字符串就会得到输出。

# windows-phone-7 - 如何在 DataTemplate 中获得控制权？

> ID：14958743
> 
> 赞同：1
> 
> 时间：2013-02-19T13:28:54.573
> 
> 标签：windows-phone-7, xaml, datatemplate

所以，我有一个代码：

```
<tool:LongListSelector x:Name="citiesListGropus" Background="Transparent" 
   ItemTemplate="{StaticResource citiesItemTemplate}"                    
   GroupHeaderTemplate="{StaticResource groupHeaderTemplate}" 
   GroupItemTemplate="{StaticResource groupItemTemplate}" Height="468" Margin="0,68,0,0">
      <tool:LongListSelector.GroupItemsPanel>
         <ItemsPanelTemplate>
            <tool:WrapPanel/>
         </ItemsPanelTemplate>
      </tool:LongListSelector.GroupItemsPanel>
</tool:LongListSelector> 
```

并有一个`DataTemplate`：

```
<DataTemplate x:Key="groupHeaderTemplate" x:Name="groupHeaderTemplateName">
   <Border Background="{StaticResource PhoneAccentBrush}" Width="75" Height="75" Margin="-333, 15, 0, 15" x:Name="groupHeaderName">
      <TextBlock Text="{Binding Title}" FontSize="40" Foreground="White" Margin="15, 15, 0, 0"/>
   </Border>
</DataTemplate> 
```

如何更改in`Visibility`的属性？我想躲起来。但是我无法将我的数据绑定到诸如 的属性，因为我做了一次绑定数据，然后我需要在数据绑定后更改一些属性。`Border``DataTemplate``DataTemplate``TextBlock Text="{Binding Title}"`

有任何想法吗？

**更新 1**

所以，我的主要目标是过滤城市列表。我想按名称过滤它们。

我的算法：

1）我从`WebService`.

2）加载我的`ViewModel`

```
 if (!App.CitiesViewModel.IsDataLoaded)
     {
         App.CitiesViewModel.LoadData(serviceResponse.Result);
     } 
```

3) 按名称对城市进行分组。我的代码喜欢[这个代码](http://windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)。这很重要，尤其是因为`LongListSeletstor`我必须使用模板。

好的，我的数据准备好了。现在我不需要网络服务。

```
<!-- The template for city items -->
        <DataTemplate x:Key="citiesItemTemplate">
            <StackPanel Name="PlacePanel" 
                Orientation="Horizontal" Margin="0,0,0,17" 
                Tag="{Binding Id}"  Visibility="{Binding IsVisibility}">
                <Image Height="75" Width="75" HorizontalAlignment="Left" Margin="12,0,9,0" Name="Image" Stretch="Fill" VerticalAlignment="Top" Source="{Binding Image}"/>
                <StackPanel Width="311">
                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                </StackPanel>
            </StackPanel>
        </DataTemplate> 
```

我有`TextBox`，当我输入城市名称时 - 隐藏不必要的城市。我可以使用数据绑定和`INotifyPropertyChanged`，所以我可以隐藏城市。

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
        {
           TextBox name = (TextBox)sender;

           foreach(var place in App.CitiesViewModel.Items
               .Where(city => (city.Name.Contains(name.Text)) && (city.IsShow == true)))
           {
               city.IsVisibility = Visibility.Visible;
           }
           foreach (var city in App.CitiesViewModel.Items
               .Where(city => !city.Name.Contains(name.Text)))
           {
               city.IsVisibility = Visibility.Collapsed;
           }
        } 
```

`DataTemplate`但是我有一些问题，当我搜索城市时我无法隐藏这个：

```
<DataTemplate x:Key="groupHeaderTemplate" x:Name="groupHeaderTemplateName">
   <Border Background="{StaticResource PhoneAccentBrush}" Width="75" Height="75" Margin="-333, 15, 0, 15" x:Name="groupHeaderName">
      <TextBlock Text="{Binding Title}" FontSize="40" Foreground="White" Margin="15, 15, 0, 0"/>
   </Border>
</DataTemplate> 
```

当我输入我想要隐藏的城市名称时`GroupHeaderTemplate`。当`TextBox`失去焦点显示`GroupHeaderTemplate`。 ![在此处输入图像描述](../Images/7e65ec0342bd059d6bcd951900e8624c.png)

[我在这里](http://windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)借了这张照片。

**更新 2** 我的错误是我没有使用`PropertyChangedEventHandler`. 将此添加到 GroupCity 属性并实现接口后，我可以在数据绑定后`INotifyPropertyChanged`更改属性。`Data Template`

```
private IList<Group<City>> citiesCollectionGroup;

    var cityByName = from city in App.ViewModel.Items 
group city by Convert.ToString(City.Name[0]).ToLower() 
into c orderby c.Key select new
 GroupCity<CitiesViewModel>(Convert.ToString(c.Key[0]).ToLower(), c);    
citiesCollectionGroup = cityByName.ToList();
this.citiesListGropus.ItemsSource = citiesCollectionGroup;  

public class GroupCity<T> : IEnumerable<T>, INotifyPropertyChanged
    {
        public GroupCity(string name, IEnumerable<T> items)
        {
            this.Title = name;
            this.IsVisibility = Visibility.Visible;
            this.Items = new List<T>(items);            
        }

        public override bool Equals(object obj)
        {
            GroupCity<T> that = obj as GroupCity<T>;

            return (that != null) && (this.Title.Equals(that.Title));
        }

        public string Title
        {
            get;
            set;
        }

        private Visibility _isVisibility;
        public Visibility IsVisibility
        {
            get
            {
                return _isVisibility;
            }
            set
            {
                _isVisibility = value;
                NotifyPropertyChanged("IsVisibility");
            }
        }

        public IList<T> Items
        {
            get;
            set;
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (null != handler)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        #region IEnumerable<T> Members

        public IEnumerator<T> GetEnumerator()
        {
            return this.Items.GetEnumerator();
        }

        #endregion

        #region IEnumerable Members

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
        {
            return this.Items.GetEnumerator();
        }

        #endregion
    } 
```

Xml代码：

```
<DataTemplate x:Key="groupHeaderTemplate" x:Name="groupHeaderTemplateName">
   <Border Background="{StaticResource PhoneAccentBrush}" Width="75" Height="75" Margin="-333, 15, 0, 15" x:Name="groupHeaderName" Visibility="{Binding IsVisibility}">
      <TextBlock Text="{Binding Title}" FontSize="40" Foreground="White" Margin="15, 15, 0, 0"/>
   </Border>
</DataTemplate> 
```

现在我们可以更改`Visibility`groupHeaderTemplate。

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
        {
            foreach (GroupCity<CitiesViewModel> city in citiesCollectionGroup)
            {
                city.IsVisibility = Visibility.Collapsed;
            }
            //
        }

private void SearchText_LostFocus(object sender, RoutedEventArgs e)
        {
            foreach (GroupCity<CitiesViewModel> city in citiesCollectionGroup)
            {
                city.IsVisibility = Visibility.Visible;
            }
            //
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:52:39.540

您可以编写自己的简单 DataTemplateSelector 来执行此操作。查看[此](http://windowsphonegeek.com/articles/implementing-windows-phone-7-datatemplateselector-and-customdatatemplateselector)内容以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:18:31.093

使用“如何更改 DataTemplate 中边框的属性可见性？我想隐藏 DataTemplate。”我了解您想根据属性更改项目的可见性，请参见下面的示例。

*（如果下面的代码不是您正在寻找的解决方案，请提供有关您要实现的目标的更多信息。重新阅读您的问题和我在此示例中得到的评论我怀疑这是您想要做的，但我不想猜测，所以我只是回答我对您问题的解释）。*

使用绑定，您可以：

1.  将可见性属性直接绑定到可见性类型的属性（以列表框和 Person1 为例）
2.  将 Visibility 属性绑定到布尔属性，并使用转换器将其转换为 Visibility 类型（listbox2 和 Person2 + BoolToVis 类）。

还有更多方法，但在我看来这是最简单的两种实现方式。¨

以下代码的结果： ![VS的屏幕截图](../Images/84b4dd1e89b91704aa12a3841848ce35.png)

看法：

```
<phone:PhoneApplicationPage 
x:Class="VisibilityWP.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
xmlns:VisibilityWP="clr-namespace:VisibilityWP"
shell:SystemTray.IsVisible="True">

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid.Resources>
                <VisibilityWP:BoolToVis x:Key="BooleanToVisibilityConverter" />
        </Grid.Resources>
        <StackPanel>
            <ListBox x:Name="listBox" Height="300">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Width="200" Visibility="{Binding Visibility}" Background="Blue">
                            <TextBlock Text="{Binding Name}" FontSize="40" Foreground="White" Margin="15, 15, 0, 0"/>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <ListBox x:Name="listBox2" Height="300">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Width="200" Visibility="{Binding ShowBorder, Converter={StaticResource BooleanToVisibilityConverter}}" Background="Red">
                            <TextBlock Text="{Binding Name}" FontSize="40" Foreground="White" Margin="15, 15, 0, 0"/>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

    </Grid>
</Grid> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Data;
namespace VisibilityWP
{

    public partial class MainPage 
    {
        public MainPage()
        {
            InitializeComponent();
            DataContext = this;
            listBox.ItemsSource = new List<Person1>
                    {
                        new Person1 {Name = "Iris", Visibility = Visibility.Visible},
                        new Person1 {Name = "Somebody", Visibility = Visibility.Collapsed},
                        new Person1 {Name = "Peter", Visibility = Visibility.Visible},

                    };
            listBox2.ItemsSource = new List<Person2>
                    {
                        new Person2 {Name = "Iris", ShowBorder = true},
                        new Person2 {Name = "Mia", ShowBorder = true},
                        new Person2 {Name = "Somebody", ShowBorder = false}
                    };
        }
    }

    public class Person1
    {
        public string Name { get; set; }
        public Visibility Visibility { get; set; }
    }
    public class Person2
    {
        public string Name { get; set; }
        public bool ShowBorder { get; set; }
    }

    public sealed class BoolToVis : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return (value is bool && (bool)value) ? Visibility.Visible : Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value is Visibility && (Visibility)value == Visibility.Visible;
        }
    }
} 
```

# java - 无法在其 DefaultDomain 上的 Weblogic 上部署 WAR

> ID：14958752
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:25.817
> 
> 标签：java, weblogic-10.x, jdeveloper

我面临以下问题请帮助我..

问题：java.io.FileNotFoundException: .\config\jps-config.xml

当我使用 Jdev 部署战争时，它的工作

但是当我使用 ANT 脚本（外部）部署战争时，我遇到了以下问题..请检查..

这是我的 DefaultDomain 路径

C:\Users\Admin\AppData\Roaming\JDeveloper\system11.1.2.3.39.62.76.1\DefaultDomain\

这是服务器日志..

```
> oracle.security.jps.config.JpsConfigurationException:
> .\config\jps-config.xml (The system cannot find the file specified) at
> oracle.security.jps.internal.config.xml.XmlConfigurationFactory.initDefaultConfiguration(XmlConfigurationFactory.java:430)
> at
> oracle.security.jps.internal.config.xml.XmlConfigurationFactory.getDefaultConfiguration(XmlConfigurationFactory.java:329)
> at
> oracle.security.jps.internal.config.xml.XmlConfigurationFactory.getConfiguration(XmlConfigurationFactory.java:151)
> at
> oracle.security.jps.internal.core.runtime.JpsContextFactoryImpl.(JpsContextFactoryImpl.java:112)
> at sun.reflect.GeneratedConstructorAccessor59.newInstance(Unknown
> Source) at
> sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
> at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at
> java.lang.Class.newInstance0(Class.java:355) at
> java.lang.Class.newInstance(Class.java:308) at
> oracle.security.jps.util.JpsUtil.newInstance(JpsUtil.java:190) at
> oracle.security.jps.JpsContextFactory$1.run(JpsContextFactory.java:68)
> at
> oracle.security.jps.JpsContextFactory$1.run(JpsContextFactory.java:66)
> at java.security.AccessController.doPrivileged(Native Method) at
> oracle.security.jps.JpsContextFactory.getContextFactory(JpsContextFactory.java:65)
> at
> oracle.security.jps.internal.policystore.PolicyUtil$2.run(PolicyUtil.java:2826)
> at
> oracle.security.jps.internal.policystore.PolicyUtil$2.run(PolicyUtil.java:2821)
> at java.security.AccessController.doPrivileged(Native Method) at
> oracle.security.jps.internal.policystore.PolicyUtil.getDefaultPDPService(PolicyUtil.java:2821)
> at
> oracle.security.jps.internal.policystore.PolicyUtil.getPDPService(PolicyUtil.java:3097)
> at
> oracle.security.jps.internal.policystore.PolicyUtil.getGrantedAppRoles(PolicyUtil.java:2873)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver$5.run(JpsAbsSubjectResolver.java:497)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver$5.run(JpsAbsSubjectResolver.java:487)
> at java.security.AccessController.doPrivileged(Native Method) at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver.getApplicationRoles(JpsAbsSubjectResolver.java:487)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver.createJpsSubject(JpsAbsSubjectResolver.java:334)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver.getAnonymousSubject(JpsAbsSubjectResolver.java:319)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver.resolveJpsSubject(JpsAbsSubjectResolver.java:258)
> at
> oracle.security.jps.internal.jaas.JpsAbsSubjectResolver.resolveSubject(JpsAbsSubjectResolver.java:214)
> at
> oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:161)
> at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
> at
> weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
> at
> oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:139)
> at
> weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
> at
> weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
> at
> weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
> at
> weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
> at
> weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
> at
> weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
> at
> weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
> at
> weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
> at
> weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
> at
> weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
> at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209) at
> weblogic.work.ExecuteThread.run(ExecuteThread.java:178) Caused by:
> java.io.FileNotFoundException: .\config\jps-config.xml (The system
> cannot find the file specified) at java.io.FileInputStream.open(Native
> Method) at java.io.FileInputStream.(FileInputStream.java:106) at
> oracle.security.jps.internal.common.util.XmlSchemaValidationUtil.doValidation(XmlSchemaValidationUtil.java:96)
> at
> oracle.security.jps.internal.config.xml.XmlConfigurationFactory.initDefaultConfiguration(XmlConfigurationFactory.java:409)
> ... 43 more 
```

为此，我已将我的 jsp-config.xml 从 ...DefaultDomain\config\fmwconfig 复制到 DefaultDomain\config\ 然后我能够解决这个问题.. 但我再次得到一些与策略相关的 privillageAcess 异常，可能是我需要放这个文件在正确的位置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T11:08:39.720

要解决此问题：java.io.FileNotFoundException: .\config\jps-config.xml

您需要放置类似 System.setProperty("oracle.security.jps.config","C:\Users\User\AppData\Roaming\JDeveloper\system11.1.1.7.40.64.93\DefaultDomain\config\fmwconfig\jps- 的代码配置.xml"); 然后就会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:09:22.197

对于 ADF 应用程序，您需要部署 EAR 而不是 WAR。请参阅： [https ://blogs.oracle.com/shay/entry/common_pitfalls_when_deploying](https://blogs.oracle.com/shay/entry/common_pitfalls_when_deploying)

# java - Android 应用程序中的 Google Play

> ID：14958753
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:25.920
> 
> 标签：java, android, google-play

我知道我们可以通过这种方式为特定产品启动 Google Play 应用：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.android.example"));
startActivity(intent); 
```

但我不想离开我的应用程序，因为在用户无法重定向回它之后。

那么，有没有办法像在 iOS 上一样使用 SKStoreProductViewController 在 Android 上打开 Google Play 产品页面？
或者有一种方法可以创建我们自己的“Google Play 产品页面”并使用官方 API 获取信息？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:35:45.010

答案是“不”，我认为您有几个混合概念。

如果您正在实施应用内购买（如康纳在评论中的链接所指出的那样），一旦用户完成购买，市场就会关闭并且您的活动恢复（通常会收到有关交易成功的回调）。

如果您只是希望用户去 Google Play 对您的应用发表评论或评分，您必须接受这样一个事实，即它必须离开您的应用，并且如果用户愿意，用户将返回它.

# c# - 在 WPF 用户控件中嵌入图像？

> ID：14958754
> 
> 赞同：1
> 
> 时间：2013-02-19T13:29:27.267
> 
> 标签：c#, .net, wpf, winforms

我创建了一个嵌入在 Windows 应用程序中的 WPF 控件。我创建了一个 ImageBrush 并将其源代码从后面的代码设置为

```
 imgBrush.ImageSource = new BitmapImage(new Uri(@"Images/imagename.jpg", UriKind.Relative)); 
```

当我从 Visual Studio 运行项目时，这工作正常，但是当我安装设置然后运行应用程序时，我得到 path not found 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:52:26.363

您可以通过 Visual Studio 将图像文件夹添加到安装程序项目中，请参见此处：

[http://msdn.microsoft.com/en-gb/library/vstudio/4ddxk2ye(v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/vstudio/4ddxk2ye(v=vs.100).aspx)

或者要将图像嵌入到可执行文件中，只需将图像的构建操作设置为“嵌入资源”（在 Visual Studio 解决方案资源管理器的属性对话框中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:28:06.830

找到了解决方案。显然，当您将 WPF 控件嵌入 Winform 应用程序时，您必须将资源添加到 Winform 应用程序。我在winform应用程序中添加了相同的图像作为资源，它工作。

# java - Java RMI 是在哪种技术之上实现的？

> ID：14958755
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:28.837
> 
> 标签：java, sockets, rmi

我正在做一个小项目，想知道 Java RMI 中的通信是在哪种技术之上实现的。更准确地说：通信 RMI 客户端/服务器之间的“链接”是如何实现的？他们使用套接字（TCP/UDP）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:42:41.487

所有的 RMI 协议（JRMP、IIOP、JERI 等）都是通过 TCP 套接字实现的，并且 JRMP 和 JERI（至少）也在对象序列化上分层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:30:41.783

是的，与 IIOP 一起使用。您可以在以下位置找到更多信息

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/rmi-iiop/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi-iiop/index.html)
*   [http://docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

# c# - for循环转换器

> ID：14958756
> 
> 赞同：-3
> 
> 时间：2013-02-19T13:29:27.587
> 
> 标签：c#, for-loop, while-loop, converter

我知道那里有诸如 vb 到 c# 转换器应用程序之类的东西，但我正在寻找的是有点不同。我需要一个转换器来帮助我将这个“for”循环转换成一个“while”循环。这是我为“整数工厂”设计的代码（您可以在底部看到“for”循环 - 这是需要转换的内容）。我还有其他一些循环，这就是为什么我需要一个应用程序（最好是所见即所得）。谢谢！

```
int IntegerBuilderFactory(string stringtobeconvertedbythefactory)
{
       string strtmp = stringtobeconvertedbythefactory;

       int customvariabletocontrolthethrottling;

       if (strtmp.Length > 0)
       {
              customvariabletocontrolthethrottling = 1;
       }
       else
       {
              customvariabletocontrolthethrottling = 0;
       }

       for (int integersforconversiontostrings = 0; integersforconversiontostrings < customvariabletocontrolthethrottling; integersforconversiontostrings++)
       {
              return int.Parse(strtmp);
       }

       try
       {             
              return 0;
       }
       catch (Exception ex)
       {
              // Add logging later, once the "try" is working correctly

              return 0;
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:38:48.247

每个 for 循环 ( `for(initializer;condition;iterator)body;`) 本质上都是

```
{
    initializer;
    while(condition)
    {
        body;
        iterator;
    }
} 
```

现在，您可以利用这些知识为您选择的重构工具创建代码转换。

顺便说一句，那个代码看起来很糟糕......

```
int IntegerBuilderFactory(string stringToParse)
{
    int result;
    if(!int.TryParse(stringToParse, out result))
    {
        // insert logging here
        return 0;
    }

    return result;
} 
```

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:34:41.057

```
int integersforconversiontostrings = 0;
while (integersforconversiontostrings < customvariabletocontrolthethrottling)
{
    return int.Parse(strtmp);
    integersforconversiontostrings++
} 
```

# cakephp - 似乎无法让 CakePHP 的 AuthComponent 工作

> ID：14958758
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:32.083
> 
> 标签：cakephp, cakephp-2.1

我在尝试设置 AuthComponent 时完全迷失了。每次登录都会失败。

这是我的 AppController`beforeFilter`功能：

```
public function beforeFilter() {

    $this->Auth->authenticate = array(
        'all' => array(
            'userModel' => 'ClientUser',
            'fields' => array(
                'username' => 'login',
                'password' => 'password'
            )
        )
    );

    $this->Auth->loginAction = array('controller' => 'client_users', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'static', 'action' => 'clientcenter');
    $this->Auth->logoutRedirect = array('controller' => 'static', 'action' => 'home');

    // I deny stuff later on
    $this->Auth->allow();
} 
```

这`login`是 ClientUsers 控制器中的函数：

```
public function login() {

    // Check login data
    if ($this->Auth->login()) {
        return $this->redirect($this->Auth->redirect());
    } else {
        $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
    }
} 
```

而且总是失败。我不知道为什么。

这是我的`$request->data`内容：（我实际上使用“登录”和“用户名”作为字段名，没有用）

```
ClientUser
    login: user@email.com
    password: thepassword 
```

客户端密码在模型中使用 authcomponent 进行哈希处理（在脚本顶部导入。我之前使用了安全哈希函数，但这也不起作用）：

```
public function beforeSave($options) {

    $this->data['ClientUser']['password'] = AuthComponent::password($this->data['ClientUser']['password1']);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:33:11.627

你在哪里 Auth 适配器？如[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#authentication-objects中所述](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#authentication-objects)

```
// at least one adapter is necessary (here Form)
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

# java - Java：将 Json 格式的字符串解析为 Java

> ID：14958760
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:38.390
> 
> 标签：java

我对中间件采取行动，如果它成功，我得到的价值为

```
String result = ["RESULT","DELETE","OK"] 
```

如果操作失败，我会得到答复

```
String result = ["RESULT","DELETE","ERROR"] 
```

我需要知道操作是成功还是失败所以为此我做了这个

```
public class Test {

    public static void main(String args[]) {

        String result = "[\"RESULT\",\"DELETE\",\"ERROR\"]";

        if (!result.contains("ERROR")) {
            System.out.println("success");
        } else {
            System.out.println("Failed");
        }

    } 
```

这工作正常，但不确定这是否有任何负面影响/或者代码可能会失败。

请建议是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:33:46.460

例如，如果您收到包含`ERROR`（不太可能，但可能发生）的成功消息，您的代码可能会失败。

您应该使用库将结果解析为列表/数组，在 StackOverflow 上查看大量用于将 Json 字符串解析为 Java 中的对象的解决方案（例如，Jackson 是一个执行此操作的库）。

您还应该根据预设数量的假设进行验证，例如，`enum`为可能的结果类型创建一个，并检查它是否是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:35:36.880

我建议在这里使用对象表示而不是数组：

```
{
 "RESULT": {
   "operation": "DELETE",
   "status" : "ERROR"
 }
} 
```

有很多工具可以在 Java 对象中解析 JSON：http: [//www.json.org/](http://www.json.org/)

在其他情况下，很难扩展代码集。例如

```
String result = "[\"RESULT\",\"CREATE\",\"USER\", \"LOGIN\", \"ERROR\", \"SUCCESS\"]"; 
```

有错误吗？或登录错误的用户已成功创建？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T13:33:43.093

```
String[] result = {"RESULT","DELETE","OK"};
    if(Arrays.asList(result).contains("OK"))
        System.out.println("Ok"); 
```

尝试 Arrays.asList() 方法来检查给定的数组是否包含该元素。

# java - 尝试多次调用 save 时违反完整性约束

> ID：14958761
> 
> 赞同：0
> 
> 时间：2013-02-19T13:29:39.583
> 
> 标签：java, hibernate, hsqldb

考虑以下类：

```
@Entity
public class MyDomain{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @OneToOne
    private AnotherDomain anotherDomain;

    //getters and setters here
} 
```

* * *

```
@Repository
public MyDomainDao extends DaoBase<MyDomain>{

    public List<MyDomain> doSomething(AnotherDomain parameter){
        //code does something here
    }

} 
```

* * *

```
public class DaoBase<I>{

    @Autowired
    private SessionFactory sessionFactory;

    public void save(I object){
        sessionFactory.getCurrentSession().saveOrUpdate(object);
    }
} 
```

* * *

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:context.xml"})
@Transactional(propagation = Propagation.REQUIRED)
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class MyDomainDaoTest {

    @Autowired
    private MyDomainDao dao;    

    @Mock
    private AnotherDomain anotherDomain;

    @Before
    public void setUp() {
        this.setupListOfMyDomain();
    }

    @Test
    public void testDoSomething(){
        //test the method here
    }

    private void setupListOfMyDomain(){
        MyDomain domain = null;     

        //five rows of MyDomain
        for(int i=0; i<=4; i++){
            domain = new MyDomain();
            domain.setAnotherDomain(anotherDomain);
            dao.save(domain);
        }       
    }
} 
```

总而言之，我有一个简单的实体类 ( ) 和一个从超类扩展而来的`MyDomain`域 dao ( ) 。正是在这个超类中调用持久性会话，并且这个超类还负责保存/更新/删除实体类。凭借继承，子类只需要定义子特定的方法。`MyDomainDao``DaoBase`

当我运行 unit/integration test 时，问题就开始了`MyDomainDaoTest`。我想`doSomething()`测试`MyDomainDao`. 为了做到这一点，我需要在数据库中测试五行（我在内存中使用 HSQLDB），因此方法中的循环`setupListOfMyDomain()`。循环的奇怪之处在于我在第二次迭代中得到了这个错误：

```
错误 JDBCExceptionReporter - 完整性约束违规：唯一约束或索引违规；SYS_CT_10231 表：我的域 

```

它没有比这更神秘的了。我知道在第一次迭代时会生成一个 ID。如果我试图持久化另一个对象，为什么会在后续迭代中违反完整性约束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:40:26.300

我认为你的映射有问题。您正在声明和之间的一对一关系`MyDomain`，`AnotherDomain`但在您的单元测试中，这 5 个实例`MyDomain`共享同一个实例，`AnotherDomain`因此您应该使用多对一关系。

# mysql - ISNULL() verse IS NULL 使用 LEFT JOIN 时的性能

> ID：14958762
> 
> 赞同：1
> 
> 时间：2013-02-19T13:29:39.643
> 
> 标签：mysql, query-optimization, database-performance

sub1 和 sub2 都与 super 是一对一的关系。

我希望确定给定超级记录中的任何一个是否存在连接。

以下两个查询应该会产生我想要的结果。是否有任何理由使用 !ISNULL() 与 IS NOT NULL？

```
SELECT super.*
FROM super
LEFT OUTER JOIN sub1 ON super.id=sub1.super_id
LEFT OUTER JOIN sub2 ON super.id=sub2.super_id
WHERE (!ISNULL(sub1.id) OR !ISNULL(sub2.id)) AND super.id=123;

SELECT super.*
FROM super
LEFT OUTER JOIN sub1 ON super.id=sub1.super_id
LEFT OUTER JOIN sub2 ON super.id=sub2.super_id
WHERE (sub1.id IS NOT NULL OR sub2.id IS NOT NULL) AND super.id=123; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:36:08.070

使用您的第二个选项 ( `IS NOT NULL`)。查询优化器可能会也可能不会帮助您提高第二个查询的效率。但是查询优化器不执行任何功能。它假定它必须评估您为所有可能的行和列提供的任何函数；它不会试图推断函数的含义。

# php - 使用 php 进行音频流式传输

> ID：14958773
> 
> 赞同：3
> 
> 时间：2013-02-19T13:30:14.793
> 
> 标签：php, audio-streaming

我需要一些应用程序的参考，我将在其中预先定义时间和歌曲，然后歌曲开始播放。

例如，如果我想在早上 8 点播放一首歌。然后那首歌只在那个时候开始。现在，如果用户“A”在上午 8 点打开我的网页，则歌曲开始播放，而其他用户“B”在上午 8:05 打开网页，则歌曲不能从头开始播放，但两个用户都应该获得相同的音频，即用户“B”会错过 5 分钟的歌曲。

关于这一点需要一些参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:16:07.927

好的，如果您对缓冲和速度没有任何问题，那么您可以使用免费版本的[jwplayer](http://www.longtailvideo.com/jw-player/)。

根据用户打开页面时的时间（例如晚上 8:00）提取歌曲及其播放时间，然后提取播放时间和结束时间介于当前时间（晚上 8:00）之间的歌曲。

之后使用搜索功能 jwplayer，例如如果歌曲的播放时间是晚上 7:55，结束时间是晚上 8:10，用户在晚上 8:00 打开页面，然后在 5 分钟后搜索音频，然后搜索`jwplayer('your_element').seek(5*60);`视频并播放视频按时间

# php - php 编辑器的 PHP textarea 验证

> ID：14958776
> 
> 赞同：1
> 
> 时间：2013-02-19T13:30:25.670
> 
> 标签：php, validation

我正在尝试构建一个在线 php 编辑器，但我需要在提交之前验证用户输入，因为我的系统不会将 php 错误返回给用户。

我对 php 很陌生，我确定要使用哪种类型的验证。我想检查第一行文本是否有“”

我还想检查用户是否输入一个“然后他们用另一个关闭它”。

有任何想法吗？

# c++ - 我需要在 VS 上更改编译器

> ID：14958778
> 
> 赞同：9
> 
> 时间：2013-02-19T13:30:34.627
> 
> 标签：c++, visual-studio, gcc, compiler-construction, sdl

我在 VCpp 2010 IDE 上使用 SDL（用于 GUI）制作了数独求解器。

该程序编译没有错误并且运行良好。但是，我无法将编译后的可执行文件传递给某些人，因为他们的电脑上没有 msvc dll。

我以为我可以使用用 GCC 编译的 devc++，但是这个 IDE 有点错误，只是不允许我包含一些头文件。我在设置 SDL 扩展时也遇到了一些问题。

那么，有没有办法将 VisualStudio 编译器更改为 GCC？

我真的需要继续使用 VS，因为它易于使用并且有很多在线支持。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:33:58.273

简短回答：不，您不能使用 gcc 更改 cl.exe（MS cc 编译器）。或者铭文。（您可以使用兼容的编译器，例如 Intel C 编译器）

长答案：你不需要那样做。使用静态链接运行时库，您不再有依赖 ms dll（请参阅此答案：[如何使用 Visual Studio Express 2005 制作完全静态链接的 .exe？](https://stackoverflow.com/questions/37398/how-do-i-make-a-fully-statically-linked-exe-with-visual-studio-express-2005)）

或者使用您的应用重新分发 VC++ 运行时。它是免费的（[http://www.microsoft.com/en-us/download/details.aspx?id=26999](http://www.microsoft.com/en-us/download/details.aspx?id=26999)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:36:49.543

您无需更改编译器 - 他们需要下载 Visual Studio 2010 可再发行组件：http: [//www.microsoft.com/en-gb/download/details.aspx?id=5555](http://www.microsoft.com/en-gb/download/details.aspx?id=5555)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-08T14:00:56.943

我不确定这何时成为 Visual Studio 中的一项功能（可能不是 2013 年的一项功能），但现在可以将 Visual Studio 使用的“平台工具集”（因此编译器）更改为 Clang 等其他编译器/LLVM 和 GCC。自从 MSVC++ 编译器出现了一些 3rd 方库以来，我一直很高兴地使用 Clang 和 VS2017。

[微软发表了一篇](https://blogs.msdn.microsoft.com/vcblog/2017/03/07/use-any-c-compiler-with-visual-studio/)关于安装说明和如何切换的博文。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:33:09.770

简而言之：没有。您不能简单地在 Visual Studio 中使用 GCC 编译器。

长版本：您可以使用 Makefile 项目来运行 GCC，但是您会失去使用 Visual Studio 的一些好处。

# php - 如何使用 AJAX 搜索 PHP 多维数组

> ID：14958781
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:30:38.863
> 
> 标签：php, ajax, multidimensional-array

我有一个多维数组，我想用它来搜索值和键

```
<input type="text" onkeyup="showHint(this.value)"></input> 
```

伴随着这个

```
function showHint(str)
{
if (str.length==0)
  { 
  document.getElementById("nav").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("nav").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","gethint.php?q="+str,true);
xmlhttp.send();
} 
```

我只是有点卡在 php 位上。数组看起来像这样（缩短）

```
Array
(
[Modest Mouse] => Array
  (
  [The Moon & Antarctica] => Array
    (
    [0] => 3rd Planet
    [1] => Gravity Rides Everything
    [2] => Dark Centre of the Universe
    )
  [The Lonesome Crowded West] => Array
    (
    [7] => Cowboy Dan
    [8] => Trailer Trash
    [9] => Out of Gas
    )
[The Vasco Era] => Array
  [Lucille] => Array
    (
    [0] => Not Stuck Here
    [1] => For No One
    )
  )
) 
```

我首先获取查询

```
$q=$_GET["q"]; 
```

然后我可以这样做

```
if (strlen($q) > 0)
    {
    $hint="";
    foreach($a as $b => $c)
        {
        if (strtolower($q)==strtolower(substr($b,0,strlen($q))))
            {
            if ($hint=="")
                {
                $hint=$b;
                }
            else
                {
                $hint=$hint." , ".$b;
                }
            }
         }
      } 
```

这可以让我得到适度的老鼠或瓦斯科时代，但没有更深层次的东西。如果我要在输入字段中输入“T”，我希望能够得到“月球和南极洲”、“孤独的拥挤西部”、“拖车垃圾”和“瓦斯科时代”的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:36:26.540

你可以有一个函数，它接受一个变量并检查它是否是一个数组，如果它是一个遍历数组每个元素的数组循环。随后，如果这些元素是数组，则递归回调该函数，如果它们不是数组，则如上所示运行比较。

```
function checkForHint($var)
{
    foreach ($var as $value) {
        if(is_array($value))
        {
            checkForHint($value);
        } else {
            // Your code here
        }
    }
} 
```

也许是这样的。

# html - 使用 cgSceneGraph 的 nodetext 中的 TTF 字体

> ID：14958783
> 
> 赞同：0
> 
> 时间：2013-02-19T13:30:41.580
> 
> 标签：html, canvas, truetype

有没有办法在文本节点中使用 TTF？我看到有一个 setTypo 方法，但它只得到一个字体系列字符串，比如 Arial。我应该在 CSS 中创建一个新的字体系列并使用这个吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:47:35.770

正如你所说，cgSceneGraph 提供的文本扩展将接受一个字体系列字符串。我们可以用这样一个新特性来扩展节点，但是对于一个小的 ROI 来说它会很复杂。

一个好的和简单的解决方案是使用 CSS 创建一个字体系列，然后在 CGSGNodeText 上使用它：

```
@font-custom {
    font-family: customNameForTheFont;
    src: url(myFolderWithFonts/font.ttf); 
} 
```

TTF 字体适用于所有符合 CSS3 的浏览器。如果一个奇异的框架接受 Canvas 但不接受 TTF 字体，请不要忘记声明 EOT 字体（您可以在网络上找到转换器）：

```
@font-custom {
    font-family: customNameForTheFont;
    src: url(myFolderWithFonts/font.eot); 
} 
```

并在您的应用程序中声明字体：

```
myTextNode.setTypo("customNameForTheFont"); 
```

请记住，错字是异步加载的。您可以通过预加载字体来避免可能出现的问题（使用带有内联样式的 div，使用字体，使用加载器类，...）。

干杯。格温。

# iphone - 是否可以在不点击 pin 的情况下在 pin 上显示地址位置？

> ID：14958787
> 
> 赞同：0
> 
> 时间：2013-02-19T13:30:47.300
> 
> 标签：iphone, maps, latitude-longitude, pins

在我的应用程序中，我有一个要求。我在表格视图中的单元格上有纬度和经度值。当用户点击单元格时，会自动在引脚上显示信息（位置地址）（该引脚的纬度和经度值与表中的单元格相同）。我仅在 ipad 中以单个视图显示 tableView 和 mapView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:42:13.210

当您添加引脚时，对于您的 MKAnnotationView 设置，`annotationView.setSelected = YES;` 这将使注释视图能够自动显示标注气泡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:33:50.877

是的，这是可能的。您正在寻找的是向地图视图添加注释[这里有一个很好的教程](http://maybelost.com/2011/01/a-basic-mapview-and-annotation-tutorial/)

# jquery - 在 JQuery 验证中避免“异步：错误”

> ID：14958792
> 
> 赞同：3
> 
> 时间：2013-02-19T13:31:12.890
> 
> 标签：jquery, ajax, jquery-validate

我编写了一个用于检查自定义字段的 JQuery 验证方法。为了检查数据，我使用 AJAX 调用服务器端脚本，该脚本又返回 true 或 false。如果为 false，则响应还将包含错误消息：

```
var errorMessage;
var rtErrorMessage = function() {
    return errorMessage;
}

jQuery.validator.addMethod('customvalidation', function(value, element) {
    var valid = true;
    var url = '/validation?data=' + value;
    $.ajax({
        url: url,
        type: 'get',
        dataType: 'json',
        async: false,
        success: function(responseData) {
            if (responseData && !responseData.isValid) {
                errorMessage = responseData.errorMessage;
                valid = false;
            }
        }
    });

    return valid;
}, rtErrorMessage); 
```

这可行，但是同步性的转变意味着浏览器在请求期间冻结。这很烦人，JQuery 甚至建议不要这样做……但是有什么替代方法呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:09:42.827

使用 jquery validate 的远程方法 - 如果您返回 true 或 false，您将收到默认错误消息，并且该字段被标记为有效/无效。

如果您返回任何其他字符串，例如“这是我的错误消息”，则显示的错误消息将是您返回的字符串。

如果文档另有说明，则它们已过时，我正在使用 jquery validate 1.10.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:01:27.230

执行此操作的标准方法是将控制权交给回调函数，让用户知道一旦数据库做出决定就发生了问题。显然，如果你真的想要一个返回 ajax 调用结果的函数，你将需要 async=false，但还有其他方法可以做到这一点。您无需等待每个 ajax 调用返回 true 以防止表单提交，直到所有表单元素都经过验证 - 您只需检查一些标志（回调可以设置）以确保表单元素已验证。如果一些验证请求还没有完成，这可能需要一点等待，但通常用户比 ajax 慢。

TLDR：使用 ajax 异步，不要等待回调，直到你必须。如果你不能让几个进程运行，那么你就会被 async=false 困住。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:36:06.230

我认为必须发生的事情是您的验证器应该始终返回 false，*除非*该字段之前已经过验证（也就是说，自上次验证以来没有发生任何更改并且验证成功）。这显然需要一些额外的处理程序。事实上，你可能想重新考虑一下你是如何做到这一点的。大多数使用 Ajax 的验证器可能会立即“使”控件“无效”并在`onchange`处理程序，该方法会触发一些 Ajax，然后验证控件与否，并在收到时将控件标记为有效与否。使用类似的东西，您永远不会将 Ajax 调用放在验证器方法中，但您会使用上述标志。我会编写一些代码来演示，但我的主计算机目前已关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T00:11:34.083

顺便说一句，我实际上发现 async:false 破坏了我的验证，我有一个报告的问题，用户反馈是“我尝试提交 XXXX 但我收到错误，然后当我尝试再次提交时不会让我”。仅在我有 async: false 远程验证请求时发生。我以为我需要它是异步的，但事实证明我不需要。再次使它们成为现实，使一切变得笨拙。很奇怪。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-19T13:33:20.730

如果您必须访问服务器以执行验证，则正常提交表单并（如果出现错误）返回带有错误消息的预填充表单。根本不要使用 Ajax，这只是意味着您必须将数据发送到服务器两次。

# java - 将表示 XML 的 Java 对象序列化为其 XML 形式是否合适？

> ID：14958795
> 
> 赞同：0
> 
> 时间：2013-02-19T13:31:20.750
> 
> 标签：java, xml, design-patterns, serialization, jaxb

我正在研究一些代表 XML 元素的 Java 对象。因为我目前使用的标准可能会变得有点笨拙，所以我正在设计包含许多 JAXB 对象（直接从 .xsd 生成）的组合，并提供附加功能以方便使用。

由于我在 Java 中表示的对象是实际的 XML 对象，将它们序列化为 XML 是否合适？如果不是，为什么这是一个坏主意（除了性能原因）？

编辑：

我收到了一些“你为什么要这样做？” 输入问题，让我解释一下。当对象的逻辑实现与其物理实现有很大不同时（来自 Bloch 的 Effective Java，第 75 条），考虑自定义序列化形式通常是合适的。在我的情况下，物理形式将与逻辑形式有很大不同，并且自定义序列表示是合适的。由于该对象总是能够由 XML 表示，因此在逻辑上看起来很合适，但我试图理解这对 Java 语言（IE 性能）的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:39:04.973

我怀疑这是一个好主意。xml 表示可能需要大约 100 倍于二进制代表所需的空间。在我使用 xml 文档序列化之前，我会使用 java std 序列化。（舒适但不高效）

更适合的是一些二进制 xml 表示。像 BSON for JSon 或 Google protobuf。寻找二进制 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:40:31.760

> 由于我在 Java 中表示的对象是实际的 XML 对象，将它们序列化为 XML 是否合适？

我假设您的意思是 DOM 之类的东西。然后您使用一些 XML 绑定进行序列化......将 DOM 对象视为 POJO ！

坏主意，海事组织。

> 如果不是，为什么这是一个坏主意（除了性能原因）？

*   序列化和反序列化性能会很差。
*   序列化的表单会臃肿。
*   生成的 XML 将不可读。
*   序列化将难以处理其他任何事情。考虑尝试对其进行 XSLT 转换。考虑尝试使用基于事件的解析器来处理它。

实际上，我正在努力思考这可能是个好主意的任何原因。

* * *

**更新**

您对为什么这样做的解释（在您的更新/评论中）没有说服力：

> 当对象的逻辑实现与其物理实现有很大不同时（来自 Bloch 的 Effective Java，第 75 条），考虑自定义序列化形式通常是合适的。

Bloch 的建议是*考虑*使用自定义表示。其中隐含的假设是，您认为自定义表示比您面前的标准表示更好。

> 在我的情况下，物理形式将与逻辑形式有很大不同，并且自定义序列表示是合适的。

这并不能解释为什么您首先要在 XML 中表示 DOM。或者为什么你认为它更好。

> 由于该对象总是能够由 XML 表示，因此在逻辑上看起来很合适，...

你没有解释这个逻辑。

> ...但我试图理解这对 Java 语言（IE 性能）的影响。

那么影响就像我上面解释的那样。Java 对此并没有什么特别之处。

* * *

好的，让我们从另一个角度来看这个。

1.  你有一些信息。
2.  您用 XML 表示该信息。
3.  您解析 XML 以提供内存中的表示形式 - DOM。
4.  您应用 jaxb 之类的东西来为您提供 DOM 的 XML 表示......被视为 POJOS
5.  你序列化 DOM。

您最终会得到一个 Java 对象的 XML 表示，这些对象表示一些表示您的原始信息的 XML。

这比原始信息的 XML 表示形式更好吗？

现在，也许，如果在步骤 3 中您使用了 jaxb 并反序列化为自定义 Java 类……那么将这些 Java 类序列化为有意义。但是你没有“代表 XML 元素的 Java 对象”。*相反，您拥有表示原始 XML 所*表示的信息的 Java 对象。

这与您在问题中实际写的内容完全不同。如果这就是你的意思，它解释了为什么人们不理解你......并且认为你实际上说的话几乎没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:42:37.297

您的意思是序列化为 XML 文件吗？一般认为，出于性能原因，这不是一个好主意，但是如果您打算将这些对象/xml 文件用作另一个系统的提要，那么可能值得考虑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:12:46.937

如果您主要关心的是能够验证对象是否符合 XSD 中定义的规则，那么[这](https://stackoverflow.com/questions/10944332/validate-xml-created-using-jaxb-against-an-xsd-file)是一个如何工作的链接。鉴于此，请注意将对象编组为 XML 将花费您一些周期。对性能的重大影响之一是创建将用于编组对象的 JAXB 上下文。您可以通过在某种单例对象（PO​​JO、Spring bean 等）中创建 JAXB 上下文来最小化这种性能损失，这样就不会每次都重新创建它。

# memory - 选择 redis maxmemory 大小和 BGSAVE 内存使用量

> ID：14958799
> 
> 赞同：10
> 
> 时间：2013-02-19T13:31:35.170
> 
> 标签：memory, redis

我试图找出在以下情况下“maxmemory”的安全设置是什么：

*   写繁重的应用程序
*   8GB 内存
*   假设其他进程占用大约 1GB
*   这意味着redis进程的内存使用可能永远不会超过7GB
*   每个 BGSAVE 事件的内存使用量都会翻倍，因为：

在 redis[文档](http://redis.io/topics/admin)中，关于 BGSAVE 事件的内存使用量增加如下所述：

> 如果您在写入量非常大的应用程序中使用 Redis，在将 RDB 文件保存在磁盘上或重写 AOF 日志时，Redis 可能会使用最多 2 倍于通常使用的内存。

*   maxmemory 限制大致与 redis-cli INFO 中的“used_memory”进行比较（如此处所述[）](https://stackoverflow.com/questions/13375077/what-is-the-correct-condition-to-check-when-maxmemory-is-reached-in-redis)，并且不考虑 redis 使用的其他内存

我是否正确，这意味着在这种情况下 maxmemory 设置应设置为不高于 (8GB - 1GB) / 2 = 3.5GB？

如果是这样，我将为 redis 文档创建一个拉取请求，以更清楚地反映这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T19:15:28.697

在这种情况下，我建议限制为 3GB。是的，文档非常正确，运行 bgsave 将在短期内使内存需求翻倍。但是，我更喜欢为系统保留 2GB 内存，或者最多为持久主控保留 40% 的最大内存。

您表示您有一个非常繁重的应用程序。在这种情况下，我强烈建议第二台服务器执行保存操作。我发现在高写入和 bgsave 对客户端的响应时间可能会变高。它不是 Redis 本身造成的，而是服务器本身的响应。对于虚拟机尤其如此。在此设置下，您将使用第二台服务器从主服务器从属服务器并保存到磁盘，同时第一台服务器保持响应。

# asp.net - 溢出：隐藏使数据在IE中消失

> ID：14958801
> 
> 赞同：0
> 
> 时间：2013-02-19T13:31:42.403
> 
> 标签：asp.net, html, css

我的 IE 有问题。该页面在所有浏览器中都可以正常工作，如下所示。

![在此处输入图像描述](../Images/2f3d0d05d2336de861dea2af518b5987.png)

但在 IE 中，即使它在那里，数据也不会显示出来。

![在此处输入图像描述](../Images/08699d1368bc504e5a35f314bee494e1.png)

问题是由我在 ListView 的项目模板上使用的溢出：隐藏属性引起的。当我将其更改为任何其他值时，数据会显示在 IE 中，但当然布局在所有浏览器中都会变得混乱。

这是源代码和 CSS [http://jsfiddle.net/V5aCa/8/](http://jsfiddle.net/V5aCa/8/)

这是我的代码：

```
<asp:ListView ID="BookListView" runat="server" DataSourceID="SqlDataSource1" 
    onselectedindexchanged="BookListView_SelectedIndexChanged">
    <LayoutTemplate>
        <table runat="server" cellpadding="1" id="tblBooks" style="">
          <tr runat="server">
              <td runat="server">
                  <table ID="itemPlaceholderContainer" runat="server" border="0" style="">
                      <tr ID="itemPlaceholder" runat="server">
                      </tr>
                  </table>
              </td>
          </tr>
        </table>
    </LayoutTemplate>

    <ItemTemplate>
         <div style="overflow:hidden">
            <div class="itemTemplateleftColumn">
                <asp:Image ID="Image1" runat="server" ImageUrl='<%# String.Format("~\\Static\\Images\\BookCovers\\{0}", Eval("CoverImageSmall")) %>' Height="120px" Width="90px" BorderColor="Gray" BorderWidth="1px"/>
            </div>
            <div class="itemTemplaterightColumn">
                <div class="titleRow">
                    <asp:Label runat="server" ID="BookTitleLabel" Text='<%# Eval("Title") %>' />
                </div>
                <div class="nameRow">
                    <asp:Label runat="server" ID="FirstNameLabel" Text='<%# Eval("FirstName") %>' />
                    <asp:Label runat="server" ID="LastNameLabel" Text='<%# Eval("LastName") %>' />
                </div>
                <div class="values">
                     <div>
                        value1
                     </div>
                     <div>
                        value2
                     </div>
                </div>    
                <div class="values">
                    <div>
                        value3
                    </div>
                    <div>
                        <asp:Label runat="server" ID="PriceLabel" Text='<%# Eval("Price") %>' />&#8364
                    </div>
                </div>    
            </div>
        </div>
    </ItemTemplate>

</asp:ListView>

</asp:Content> 
```

对于解决此问题，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:38:58.603

[更新] 首先，应用 css 类或 id 以避免内联样式。

然后，尝试编写`overflow:hidden !important`以防止 IE 应用该规则，这应该可以解决问题！

```
.your-div-class{
  overflow:visible; /* This is default value, but reset it anyway */
  overflow:hidden !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:43:55.890

在 Gridview 中为该 div 应用最小高度和宽度，然后应用溢出 min-height: 110px;min-width: 150px;

试试这个希望它会有所帮助！

# python - 没有 basicConfig 日志处理程序无法工作

> ID：14958803
> 
> 赞同：1
> 
> 时间：2013-02-19T13:31:43.587
> 
> 标签：python, logging, java.util.logging

我有一个 Flask Web 应用程序，Python 日志配置是在应用程序启动时通过[dictConfig完成的。](http://docs.python.org/2/library/logging.config.html#logging.config.dictConfig)将某些日志写入数据库的处理程序附加到记录器'test.module' 仅当`logging.basicConfig(level=logging.DEBUG)`在应用程序启动时也调用该记录器时，才会将写入该记录器的日志写入数据库。否则，不会将任何日志写入数据库。我知道 basicConfig 只是将一个 streamHandler 附加到根记录器。我认为这应该无关紧要，因为我不希望根记录器做任何事情。为什么没有basicConfig这不起作用？

我在下面添加了如何启动记录器和我的配置。

```
class DbHandler(logging.Handler):
    def __init__(self, level=logging.NOTSET):
        logging.Handler.__init__(self, level)

    def emit(self, record):
        record.message = self.format(record)
        log = DbModel()
        log.message = record.message
        log.save()

LOGGING = {
    'version': 1,
    'handlers': {
        'db_log': {
            'level': 'DEBUG',
            'class': 'test.handlers.DbHandler',
        },
    },
    'loggers': {
        'test.important_module': {
            'handlers': [
                'db_log'
            ],
    },
}

# logging.basicConfig(level=logging.DEBUG) # Doesnt work without this
logging.config.dictConfig(LOGGING)

logger = logging.getLogger('test.important_module')
logger.info('Making a test') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:02:33.850

您没有设置“test.important_module”记录器本身的级别（您只设置了处理程序的级别）。

你可以这样做：

```
logger = logging.getLogger('test.important_module')
logger.setLevel(logging.DEBUG) 
```

或者像这样：

```
'loggers': {
    'test.important_module': {
        'level': 'DEBUG',         # <<< HERE
        'handlers': [
            'db_log'
        ],
}, 
```

# jquery - 使用 jquery 和 ajax 添加记录

> ID：14958804
> 
> 赞同：0
> 
> 时间：2013-02-19T13:31:53.003
> 
> 标签：jquery, ajax

所以我在这里学习一个教程，我有这个 jquery 代码来处理一些数据。

目前我只有这个表格，只有一个名为内容的输入：

```
<script type="text/javascript" >
$(function () {
    $(".comment_button").click(function () {

        var test = $("#content").val();
        var dataString = 'content=' + test;

        if (test == '') {
            alert("Please Enter Some Text");
        } else {
            $("#flash").show();
            $("#flash").fadeIn(400).html('<img src="ajax-loader.gif" align="absmiddle"> <span class="loading">Loading Comment...</span>');

            $.ajax({
                type: "POST",
                url: "demo_insert.php",
                data: dataString,
                cache: false,
                success: function (html) {
                    $("#display").after(html);
                    document.getElementById('content').value = '';
                    document.getElementById('content').focus();
                    $("#flash").hide();
                }
            });
        }
        return false;
    });
});
</script> 
```

现在，我有另一个名为 id 的输入。我应该在哪里插入它？

我试过类似的东西：

```
var test = $("#id").val();
var dataString = 'id='+ id; 
```

它没有用..所以，我知道这可能是基本的，但我从来不需要处理 ajax.. 谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:39:01.867

试试@johan 所说的，这是一种更好的方法，或者你可以这样做：

```
 dataString += '&id='+ id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:37:08.467

将数据作为[对象文字](http://www.dyn-web.com/tutorials/obj_lit.php)传递：

```
var test = $("#content").val();
var id = $("#id").val();
var dataObject = { content: test, id: id };

$.ajax({
    type: "POST",
    url: "demo_insert.php",
    data: dataObject,
    //etc... 
```

选项 2 是[序列化](http://api.jquery.com/serialize/)表单数据：

```
<form>
    <div><input type="text" name="content" value="1" id="content" /></div>
    <div><input type="text" name="id" value="2" id="id" /></div>
</form>

$(function(){
    alert( $('form').serialize() ); //content=1&id=2
}); 
```

# jquery - tinymce 指令使我的页面刷新

> ID：14958806
> 
> 赞同：0
> 
> 时间：2013-02-19T13:31:54.493
> 
> 标签：jquery, html, angularjs

我有一个带有标签的弹出窗口。我在该弹出窗口中使用了选项卡和 tinymce 指令。

使用 tinymce 指令，选项卡工作正常，如果我在单击选项卡时添加 tiny mce 指令，则整个页面都会刷新。我在我的代码中包含了 tinymce 库。

```
// tinymce directive
 app.directive('tinymce', function() {
    return {
        require: 'ngModel',
        link: function(scope, element, attrs, ngModel) {

            element.tinymce({
                // Location of TinyMCE script
                script_url: 'js/assets/tiny_mce.js',

                // General options

                theme: "advanced",
                theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",
                theme_advanced_buttons2 : "bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",
                theme_advanced_buttons3 : "hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                theme_advanced_toolbar_location : "top",
                theme_advanced_toolbar_align : "left",
                theme_advanced_statusbar_location : "bottom",
                theme_advanced_resizing : true,

                // Change from local directive scope -> "parent" scope
                // Update Textarea and Trigger change event
                // you can also use handle_event_callback which fires more often
                onchange_callback: function(e) {

                    if (this.isDirty()) {
                        this.save();

                        // tinymce inserts the value back to the textarea element, so we get the val from element (work's only for textareas)
                        ngModel.$setViewValue(element.val());
                        scope.$apply();

                        return true;
                    }
                }
            });

        }
    };
});

// tabs and panes directive
app.directive('tabsx', function() {
return {
    restrict: 'E',
    transclude: true,

    controller: function($scope) {
                        $scope.panes = new Array();
                        //var panes = $scope.panes = [];
                        $scope.select = function(pane) {
                            angular.forEach($scope.panes, function(pane1) {
                                pane1.selected = false;
                            });

                            pane.selected = true;
                        };

                        this.addPane = function(pane) {

                            if ($scope.panes.length == 0) $scope.select(pane);

                            $scope.panes.push(pane);

                        };

    },
    template:
        '<div class="tabbable tabs-left prime-tabbable">' +
        '<ul class="nav nav-tabs">' +
        '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+
        '<a class="prime-tabs" href="" ng-click="select(pane)">{{pane.title}}</a>' +
        '</li>' +
        '</ul>' +
        '<div class="tab-content prime-tab-content" ng-transclude></div>' +
        '</div>',
    replace: true
};
}).directive('panex', function() {
    return {
            require: '^tabsx',
            restrict: 'E',
            transclude: true,
            scope: { title: '@'},
            link: function(scope, element, attrs, tabsCtrl) {
                tabsCtrl.addPane(scope);

            },
            template:
                '<div class="tab-pane prime-panes" ng-class="{active: selected}" ng-transclude>' +
                '</div>',
            replace: true
    };
}); 

 \\ html code
<tabsx>

            <panex title="Settings">
                <form name="myForm">
                    <label>Title : </label> 
                    <textarea style="resize: none;" name="myTitle" ng-model="myTitle" value={{getMyTitle()}} ng-required="true" ></textarea>

                    <label>Content: </label>    
                    <textarea tinymce ng-model="myContent" ng-required="true" >{{getMyContent()}}</textarea>
                        <!-- {{getMyContent()}} -->
                    <div class="popup-input-set">
                        <div class="popup-labels">Priority:</div>
                        <div class="popup-input">
                            <select  ng-model="myPriority" ng-options="priority for priority in myPriorities" style="width:100px;" ng-required="true"></select>
                        </div>
                     </div>

                    <div class="popup-input-set">
                        <div class="popup-labels">Due Date</div>
                        <div class="popup-input">
                            <input ui-date-format ui-date="dateOptions" ng-model="myDueDate" placeholder="Due date" style="width:75px;height:25px;" value={{getMyDueDate()}} ng-required="true"></input>
                        </div>
                    </div>

                    <div class="popup-input-set">
                        <div class="popup-labels">Effort</div>
                        <div class="popup-input">
                            <input type="text" ng-model="myEffort" placeholder="effort" style="width:75px;" value={{getMyEffort()}} ng-required="true">
                        </div>
                    </div>

                    <div class="popup-input-set">
                        <div class="popup-labels"></div>
                        <div class="popup-input">
                            <br/>

                        </div>
                    </div>  

                    <div style="clear:both;"></div>

                    <label>Type : </label>
                    <select ng-model="myType" ng-options="myType for myType in myTypes" ng-required="true"></select>

                    <br /> <br />
                    <button class="btn btn-success" ng-click="editNoteDetails(myTitle,myContent,myDueDate,myEffort)" modal-close="myModalNoTemplate" >Save</button>
                    <button type="reset" class="btn btn-success" modal-close="myModalNoTemplate">Cancel</button>    

                </form>
            </panex> 
</tabsx> 
```

有谁知道为什么会这样？

# android - 常规通知不会在 android 中显示 X 关闭按钮

> ID：14958813
> 
> 赞同：7
> 
> 时间：2013-02-19T13:32:28.210
> 
> 标签：android, button, notifications, default

我使用 android.support.v4.app.NotificationCompat.Builder 创建了一个通知。通知在通知区域中显示正常。但它不显示 android 4.2 上的默认关闭按钮。

[http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setOngoing(boolean)](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setOngoing(boolean))

根据文档，它是一种常规通知，应该显示 X 关闭按钮，但它没有。使用以下代码：

```
 mBuilder = new NotificationCompat.Builder(context);
            mBuilder.setSmallIcon(iconId);
            mBuilder.setContentTitle(titleText);
            mBuilder.setContentText(moreinfoText);
            mBuilder.setOngoing(false); //to make it regular
            PendingIntent pintent = 
                       PendingIntent.getActivity(context,noteId,resultIntent,PendingIntent.FLAG_UPDATE_CURRENT);
            mBuilder.setContentIntent(pintent);

            NotificationManager mNotificationManager =
                (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            mNotificationManager.notify(noteId, mBuilder.build()); 
```

在谷歌上搜索，但找不到类似的东西。请建议。

谢谢你的时间！

# r - 如何标记由 ggplot2 组成的分位数-分位数图的点？

> ID：14958814
> 
> 赞同：9
> 
> 时间：2013-02-19T13:32:34.193
> 
> 标签：r, ggplot2

我正在使用从下面提供的工作示例中调用`x`的数据框调用的变量构建分位数-分位数图。`df`我想用`name`我的数据集的变量标记这些点`df`。

是否可以在 ggplot2 中做到这一点而不诉诸痛苦的解决方案（手动编码理论分布，然后将其与经验分布相比较）？

**编辑：**碰巧是的，这要感谢一个发布然后删除他的答案的用户。请参阅下面 Arun 回答后的评论。感谢 Didzis 的巧妙解决方案`ggbuild`。

```
# MWE
df <- structure(list(name = structure(c(1L, 2L, 3L, 4L, 5L, 7L, 9L, 
10L, 6L, 12L, 13L, 14L, 15L, 16L, 17L, 19L, 18L, 20L, 21L, 22L, 
8L, 23L, 11L, 24L), .Label = c("AUS", "AUT", "BEL", "CAN", "CYP", 
"DEU", "DNK", "ESP", "FIN", "FRA", "GBR", "GRC", "IRL", "ITA", 
"JPN", "MLT", "NLD", "NOR", "NZL", "PRT", "SVK", "SVN", "SWE", 
"USA"), class = "factor"), x = c(-0.739390016757746, 0.358177826874146, 
1.10474523846099, -0.250589535389937, -0.423112615445571, -0.862144579740376, 
0.823039669834058, 0.079521521937704, 1.08173649722493, -2.03962942823921, 
1.05571087029737, 0.187147291278723, -0.144770773941437, 0.957990771847331, 
-0.0546549555439176, -2.70142550075757, -0.391588386498849, -0.23855544527369, 
-0.242781575907386, -0.176765072121165, 0.105155860923456, 2.69031085872414, 
-0.158320176671995, -0.564560815972446)), .Names = c("name", 
"x"), row.names = c(NA, -24L), class = "data.frame")

library(ggplot2)
qplot(sample = x, data = df) + geom_abline(linetype = "dotted") + theme_bw()

# ... using names instead of points would allow to spot the outliers 
```

我正在修改[这个要点](https://gist.github.com/chrishanretty/3885712)，如果我对回归诊断有任何疑问，我会考虑向 CrossValidated 发送其他问题，这可能是 CV 用户感兴趣的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T13:55:23.753

您可以将原始 QQ 图保存为对象（使用函数`ggplot()`而`stat_qq()`不是`qplot()`）

```
g<-ggplot(df, aes(sample = x)) + stat_qq() 
```

然后使用函数`ggplot_build()`，您可以提取用于绘图的数据。它们存储在 element 中`data[[1]]`。将这些数据保存为新的数据框。

```
df.new<-ggplot_build(g)$data[[1]]
head(df.new)
           x          y     sample theoretical PANEL group
1 -2.0368341 -2.7014255 -2.7014255  -2.0368341     1     1
2 -1.5341205 -2.0396294 -2.0396294  -1.5341205     1     1
3 -1.2581616 -0.8621446 -0.8621446  -1.2581616     1     1
4 -1.0544725 -0.7393900 -0.7393900  -1.0544725     1     1
5 -0.8871466 -0.5645608 -0.5645608  -0.8871466     1     1
6 -0.7415940 -0.4231126 -0.4231126  -0.7415940     1     1 
```

现在，您可以将观测值添加到 hew 数据框名称。重要的是使用`order()`新数据框中的数据进行排序。

```
df.new$name<-df$name[order(df$x)] 
```

现在像往常一样绘制新的数据框，而不是`geom_point()`提供`geom_text()`。

```
ggplot(df.new,aes(theoretical,sample,label=name))+geom_text()+ 
  geom_abline(linetype = "dotted") + theme_bw() 
```

![在此处输入图像描述](../Images/8f76cd978d0abf5abb8ee8b02474a5b4.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T13:54:40.320

点太近了。我会做这样的事情：

```
df <- df[with(df, order(x)), ]
df$t <- quantile(rnorm(1000), seq(0, 100, length.out = nrow(df))/100)

p <- ggplot(data = df, aes(x=t, y=x)) + geom_point(aes(colour=df$name)) 
```

这给出了：

![在此处输入图像描述](../Images/5adac9020bf97f2f6c70cf5c760d6abc.png)

如果您坚持在情节中添加标签，那么您可以尝试以下操作：

```
df <- df[with(df, order(x)), ]
df$t <- quantile(rnorm(1000), seq(0, 100, length.out = nrow(df))/100)

p <- ggplot(data = df, aes(x=t, y=x)) + geom_point(aes(colour=df$name))
p <- p + geom_text(aes(x=t-0.05, y=x-0.15, label=df$name, size=1, colour=df$name))

p 
```

![在此处输入图像描述](../Images/63ce05d1cfa5e4c9c4481d37e4f4f483.png)

您可以使用`x`和`y`坐标，如果您愿意，您可以随时删除颜色美学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-06T05:14:05.467

@Arun 在上面的评论中有一个很好的解决方案，但这适用于 R 4.0.3：

`ggplot(data = df, aes(sample = x)) + geom_qq() + geom_text_repel(label=df$name[order(df$x)], stat="qq") + stat_qq_line()`

基本上是一样的，加上`stat_qq_line()` **和`[order(df$x)]`作为`label`**. 如果您不包含该`order`功能，那么您的标签将完全乱序并且非常具有误导性。

希望这可以节省其他人的生命。

# javascript - RaphaelJs ViewBox 缩放到点

> ID：14958820
> 
> 赞同：1
> 
> 时间：2013-02-19T13:32:51.237
> 
> 标签：javascript, raphael, zooming

我很久以前制作了一个 jsfiddle 来演示如何缩放到中心（[http://jsfiddle.net/Y69nm/1/](http://jsfiddle.net/Y69nm/1/)）。现在我想缩放到给定点（光标），就像 googleMap 一样，但不知道该怎么做。我将实际的鼠标坐标发送到处理缩放的函数。

这是小提琴：http: [//jsfiddle.net/Y69nm/3/](http://jsfiddle.net/Y69nm/3/)

这是缩放功能：

```
function handle(delta, mousex, mousey) {

    if (delta < 0) {
        viewBoxWidth *= 0.95;
        viewBoxHeight *= 0.95;
    } else {
        viewBoxWidth *= 1.05;
        viewBoxHeight *= 1.05;
    }
    scale = paper.width / viewBoxWidth ;
    console.log(scale);
    // zoom to center
    x = (paper.width / 2) - (viewBoxWidth / 2);
    y = (paper.height / 2) - (viewBoxHeight / 2);
    // i try to zoom to mouse cursor
    var moveX = (mousex - (mousex * scale));
    var moveY = (mousey - (mousey * scale)); 
    x = 0 - moveX;
    y = 0 - moveY;
    paper.setViewBox(x, y, viewBoxWidth, viewBoxHeight);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T18:13:58.267

我可以让你更接近一点：

```
 x = 0 - moveX / scale;
        y = 0 - moveY / scale; 
```

这是您[更新的小提琴](http://jsfiddle.net/ezanker/Y69nm/7/)。它会缩放到某个点，但是，一旦缩放，如果您移动到另一个点并缩放它就会跳跃。

更新（2012 年 4 月 30 日）：因为我也需要这个，所以我进一步研究它以消除缩放到另一个点时的跳跃。这是[Fiddle](http://jsfiddle.net/ezanker/Y69nm/11/)再次更新的一个更完整的解决方案。

# c# - 如何从另一个表单关闭我的应用程序？

> ID：14958821
> 
> 赞同：0
> 
> 时间：2013-02-19T13:32:54.327
> 
> 标签：c#

我有一个新形式的这个事件：

```
private void CrawlLocaly_FormClosed(object sender, FormClosedEventArgs e)
        {

        } 
```

我不确定是使用封闭式还是封闭式。原因是我想检查用户是否关闭了程序，例如仅通过从任务栏关闭应用程序。

如果他确实从任务栏鼠标右键单击关闭它然后关闭然后我希望它关闭所有程序而不仅仅是这个表单。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:34:47.583

```
 Application.Exit(); 
```

将关闭您的应用程序。我不确定您是否可以通过鼠标右键菜单检测到他是否将其关闭。据我所知，您只能看到 FormClosedEventArgs 中提供的原因。FormClosing 将为您提供相同的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:39:39.560

使用此事件：

```
private void Form_FormClosing(object sender, FormClosingEventArgs e)
{
    if(e.CloseReason == CloseReason.UserClosing)
    {
         //close forms
         Application.Exit();
    }
} 
```

无法检查用户是否通过单击“X”或通过`TaskBar`或任何其他方式关闭了您的表单，因为结果`CloseReason`将始终是`CloseReason.UserClosing`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T11:51:08.123

好吧，我也坚持这样的问题。在我的应用程序中，我有 2 个表单，#1 main，#2 - 用于设置 - 如果用户关闭它，我想知道是否保存设置。此外，如果设置为空 - 不仅关闭应用程序，如果用户单击按钮保存 - 我想关闭（隐藏）#2 表单。那么我的解决方案在哪里，如果单击按钮保存，我们将标记值设置为 1，因此我们将知道“谁”尝试关闭表单：预定义：

```
btnSave.Tag = 0; 
```

在保存按钮单击事件时：

```
btnSave.Tag = 1;
this.Hide(); 
```

它会触发 onclose 事件：

```
private void frmLogin_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (btnSave.Tag.ToString() == "0")
        {
            DialogResult dlg = MessageBox.Show("Do you want to exit without finished setup connection?", "Form", MessageBoxButtons.YesNo, MessageBoxIcon.Information);
            if (dlg == DialogResult.No)
            {
                e.Cancel = true;
            }
            else
            {
                e.Cancel = false;
                this.Dispose();
                Application.Exit();
            }
        }
        else 
        {
            this.Hide();
        }
    } 
```

# mod-rewrite - 重写规则以去除部分 url

> ID：14958822
> 
> 赞同：0
> 
> 时间：2013-02-19T13:32:54.653
> 
> 标签：mod-rewrite, url-rewriting

您如何在 .htaccess 中编写重写规则以重定向所有带有单词 test 和（其后的任何字符串）的 url

例如 /test/spiderman?id=something 或 /test/spiderman

到删除了测试部分的相同 url

例如 /spiderman?id=something

ps

一个简单的请求

/测试/

不匹配，因为 /test/ 后面没有字符串

# windows - 如何从命令行运行 Windows Phone 商店认证工具包？

> ID：14958824
> 
> 赞同：2
> 
> 时间：2013-02-19T13:32:57.977
> 
> 标签：windows, windows-phone-8, windows-phone, windows-store

我想使用 Jenkins 来自动化构建过程，我需要运行 Store Certification Kit 来检查我的 windows phone 8 .xap 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T13:11:22.393

突然间，我发现 Windows Phone 8 商店认证工具包是 Visual Studiuo 2012 的一部分，它不是单个应用程序。这意味着不能从命令行使用认证工具包

# javascript - D3中动态更新图表数据

> ID：14958825
> 
> 赞同：28
> 
> 时间：2013-02-19T13:33:03.547
> 
> 标签：javascript, charts, d3.js

我正在研究传入数据的实时可视化。我使用 D3 进行可视化并基于此示例开始：http: [//bl.ocks.org/mbostock/3883195](http://bl.ocks.org/mbostock/3883195)

这是我目前正在使用的版本：

```
 var margin = {top: 20, right: 20, bottom: 30, left: 50},
  width = 500 - margin.left - margin.right,
  height = 300 - margin.top - margin.bottom;

  var x = d3.time.scale().range([0, width]);
  var y = d3.scale.linear().range([height, 0]);

  var xAxis = d3.svg.axis().scale(x).orient("bottom");
  var yAxis = d3.svg.axis().scale(y).orient("left");

  var area = d3.svg.area()
      .x(function(d) { return x(d.x); })
      .y0(height)
      .y1(function(d) { return y(d.y); });

  var svg = d3.select("div#chart").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var data = [[1,1],[2,3],[3,2],[4,4]];

  var dataCallback = function(d) {
    d.x = +d[0];
    d.y = +d[1];
  };
  data.forEach(dataCallback);

  x.domain(d3.extent(data, function(d) { return d.x; }));
  y.domain([0, d3.max(data, function(d) { return d.y; })]);

  svg.append("path")
      .datum(data)
      .attr("class", "area")
      .attr("d", area);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Number of Messages"); 
```

这将产生以下图表：

![简单图](../Images/aecab22385f0b54a72a98cb268403000.png)

现在，由于它应该定期更新自身，我想使用以下代码动态更新图中的数据：

```
 var n = svg.selectAll("path").data([5,20])
  n.enter();
  n.exit().remove(); 
```

但是，这是行不通的。我是 D3 的新手，仍在学习基础知识。理想情况下，图表可视化向左移动，新数据显示在图表中。但到目前为止，我什至无法向其中添加新数据。有人可以帮我吗？我还搜索了与此类似的示例，但到目前为止没有找到任何真正帮助我的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T00:08:18.413

d3 非常擅长跟踪添加了哪些数据以及删除了哪些数据——它通过连接来做到这一点。看看[http://bl.ocks.org/mbostock/3808218](http://bl.ocks.org/mbostock/3808218)

如果我们使用数据绑定（而不是“数据”）

```
svg.append("path")
  .data([data])
  .attr("class", "area")
  .attr("d", area); 
```

然后在更新时执行以下操作：

```
// update the list of coordinates
data.splice(0,1);
data.push([5,20]);

// re-decorate the last, newly added item
dataCallback(data[data.length - 1]);

// You will also need to update your axes
x.domain(d3.extent(data, function(d) { return d.x; }));
y.domain([0, d3.max(data, function(d) { return d.y; })]);

// update the data association with the path and recompute the area
svg.selectAll("path").data([data])
    .attr("d", area); 
```

你应该让你的区域更新。

[你可以在这里](http://jsfiddle.net/superboggly/XK53c/)试试

使用连接数据（而不是基准）组织数据的方式可能没有太大区别。请注意，您与路径关联的（单个）数据元素是*完整的坐标列表，*因此要更新您需要传入新的完整坐标列表的区域。

如果您真的想最小化需要重绘的数量，您可以分解该区域并绘制每个线段。然后基本上你会回到条形图示例，但条形不平坦且没有间距。

# google-chrome - 如何允许不安全评估和远程脚本 - CSP 内容安全策略

> ID：14958829
> 
> 赞同：0
> 
> 时间：2013-02-19T13:33:19.410
> 
> 标签：google-chrome, web-applications, google-chrome-extension, content-security-policy

“谷歌扩展网络应用”

让我疯狂。

我无法让 unsafe-eval 和远程脚本同时工作。

我可以进行不安全的评估，但删除脚本不起作用。反之亦然。

什么失败了：

评估和远程

`"content_security_policy": "script-src https://connect.facebook.net 'unsafe-eval'; object-src 'self' "`

什么有效：

仅远程

`"content_security_policy": "script-src 'self' https://connect.facebook.net; object-src 'self' "`

仅评估

`"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self' "`

如何两者兼得？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:54:59.463

只需合并指令值：

```
script-src 'self' 'unsafe-eval' https://connect.facebook.net; object-src 'self' 
```

# javascript - Javascript，按高度改变宽度

> ID：14958833
> 
> 赞同：0
> 
> 时间：2013-02-19T13:33:25.493
> 
> 标签：javascript, html, css

我有一个宽度和高度应该相同的 div：

```
<div class="radior" id="ha" style="background-color: #006;" onClick='foo()'></div> 
```

所以用 Javascript 我首先检查高度，然后想改变宽度`<div>`

```
function foo(){
    var innerHeight = document.getElementById('ha').offsetHeight;
    var ele = document.getElementsByClassName("radior");

    for (var i = 0, len = ele.length; i < len; i++){
       ele[i].style.width = innerHeight;
    }
} 
```

但不知何故，它不会工作！我不明白！来自德国的问候，这里是小提琴的例子：

[http://jsfiddle.net/TSk6y/1/](http://jsfiddle.net/TSk6y/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:42:07.407

你为什么不保持简单？你不需要 for 循环。只需直接寻址元素并附`+"px"`加到您的宽度声明。

```
<div class="radior" id="ha" style="background-color: #006;" onClick='foo(this)'></div>

function foo(that){
    var innerHeight = that.offsetHeight;
    that.style.width = innerHeight+"px";
} 
```

甚至更短：

```
function foo(that){
    that.style.width = that.offsetHeight+"px";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:39:31.913

就这样做

```
ele[i].style.width = innerHeight + "px"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:39:53.730

尝试 `ele[i].style.width = innerHeight+"px";`

小提琴链接：http: [//jsfiddle.net/opherv/57V5b/](http://jsfiddle.net/opherv/57V5b/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:53:33.763

这似乎对我有用 - 不知道为什么 jsFiddle 没有，但如果我将所有代码放入 .html 文件中，并在标准浏览器中运行（在此处使用 chrome），它就可以工作。我点击 div，它确实改变了宽度：

```
<html>
<head>
<style>
body,html {width:100%;
    height:100%;
}

.radior{
    width: 20%;
    height: 60%;
}
</style>
</head>
<body>
<div class="radior" id="ha" style="background-color: #006;" onClick="foo()"></div>
</body>
<script type="text/javascript">
function foo(){
    var innerHeight = document.getElementById('ha').offsetHeight;
    var ele = document.getElementsByClassName("radior");

    for (var i = 0, len = ele.length; i < len; i++){
    ele[i].style.width = innerHeight;
    }
}
</script>
</html> 
```

# c++ - “const& X”是什么意思，其中 X 是方法原型中的结构？

> ID：14958834
> 
> 赞同：0
> 
> 时间：2013-02-19T13:33:25.573
> 
> 标签：c++, methods, constants

我正在阅读 C++ 和 R 中的统计计算一书（Eubank 和 Kupresanin，2012 年），并且有以下练习：

`X`"3.27\. 为具有两个整数成员元素`a`和的结构编写代码。结构`b`的一种方法应该具有原型

```
bool compare(const& X) 
```

该`compare`方法应比较两个`X`对象并返回`a`成员值较小的对象。”

这里的问题是我不明白`const& X`应该代表什么，而且 g++ 编译器似乎也不理解它，因为它给出了一个错误。这应该意味着什么还是只是一个错字？我忽略 const& 部分的解决方案是这样的：

```
struct X{
    int a;
    int b;
    X(int A, int B);
    bool compare(X x);
};

X::X(int A, int B){
    a=A;
    b=B;
}

bool X::compare(X x){
    if(x.a>(*this).a){
        return true;
    } else return false;
}

int main(){
    X y(5,0);
    X z(2,3);
    if(y.compare(z))
        cout << "y.a = "<<y.a<< " which is larger than z.a = "<< z.a<<endl;
    else
        cout << "y.a = "<<y.a<< " which is smaller than z.a = "<< z.a<<endl;
    return 0;
} 
```

这似乎工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:35:33.593

如果您已正确转录，则存在拼写错误，但`&`不是。它应该是：

```
bool compare(const X&) 
```

它是一个*引用类型*。也就是说，`const X&`是一个“引用`const X`”。采用引用类型参数意味着`X`传入的对象不会被复制 - 您在函数内部看到*的*对象是从外部传入的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:36:18.827

这很可能是一个错字，他们可能的意思是`const X &`，作为对常量的引用`X`：

```
bool compare(const X &) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:37:07.453

语法

```
bool compare(const X&){ } 
```

表示对 X 的恒定“参考”；引用是变量的别名。它像指针一样工作，但连接到它在其生命周期内引用的对象。您将更改传递给函数的对象，就像使用指针一样。

# oracle - 为 Oracle 创建 TNS 条目时出错

> ID：14958837
> 
> 赞同：0
> 
> 时间：2013-02-19T13:33:38.363
> 
> 标签：oracle

我正在尝试为 Oracle 数据库创建 TNS 条目，以便可以从该数据库的命令行调用 SQL*Loader。

现在从我读到的内容看来，我需要在我的

C:\oracle\product\10.2.0\client_1\NETWORK\ADMIN

文件夹并将相关信息放入其中。

我已将以下内容放在我的文件中

```
 SPEC1=
  (DESCRIPTION = 
    (ADDRESS = 
     (PROTOCOL = TCP)
     (HOST = XXX.XXX.XXX.XX)
     (PORT = 1521)
    )
  (CONNECT_DATA = 
   (SERVICE_NAME = SPEC1)
  )
 ) 
```

现在为了测试它，我尝试调用：

```
tnsping SPEC1 
```

但这会返回错误：

TNS-0305：无法解析名称

我已经用谷歌搜索了这个错误并尝试了建议，但我似乎无法深入了解它。我在上面的代码中遗漏了什么吗？

（上面的 tnsping 命令查找与 TNSNAMES.ORA 文件位于同一文件夹中并引用它的 sqlnet.ora 文件）

编辑：好的，事实证明我的 tnsnames.ora 文件中的 service_name 中没有全名，这是我问题的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:30:23.803

尝试[EZCONNECT 语法](http://www.orafaq.com/wiki/EZCONNECT)：

```
sqlldr user/pw@//xxx.xxx.xxx.xxx:1521/spec1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:45:06.977

您不一定需要 tnsnames.ora 条目。

看看这里的一些选项：http: [//www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle)

# tapestry - 如何将 Hibernate Session 注入 Tapestry 中的 Servlet？

> ID：14958842
> 
> 赞同：2
> 
> 时间：2013-02-19T13:33:43.543
> 
> 标签：tapestry

我在 Tapestry 项目中有一个 HttpServlet。但我认为它不被认为是 IoC 的一部分。所以当我这样做时`@inject`它不起作用。它最终抛出一个空指针异常。关于如何注入相同的休眠会话的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:54:20.780

在 servlet doPost() 方法中，我执行了以下操作。

```
Registry registry = (Registry)
getServletContext().getAttribute(TapestryFilter.REGISTRY_CONTEXT_NAME);         
hbSession = registry.getService(Session.class); 
```

# android - 如何用安卓手机从linux拨打电话？

> ID：14958845
> 
> 赞同：5
> 
> 时间：2013-02-19T13:33:49.597
> 
> 标签：android, linux, sms

我需要打电话和\或从我的 debian 服务器发送短信。android 手机通过 USB 电缆插入服务器。我可以通过以下方式从服务器连接到手机：USB、蓝牙或 WIFI（ssh）。

是否有可能以“UNIX 方式”进行任何 GSM 呼叫，而无需向 android 编写自定义应用程序？就像是：

```
root@android:~# sendsms 01806717178 "Hello, kitty!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:38:24.550

尝试这样做：

```
service call phone 2 s16 "+18001231234" 
```

查看[如何从控制台调用](https://android.stackexchange.com/questions/9963/how-to-call-from-console)

（5秒谷歌搜索`android phone call cli`模式）

# asp.net-web-api - 如何将两个不同的 Odata 路由分派到同一个 EntitySetController ?

> ID：14958851
> 
> 赞同：2
> 
> 时间：2013-02-19T13:34:14.577
> 
> 标签：asp.net-web-api, odata

是否有可能由同一个控制器（例如 AnimalsController）处理不同的实体集（例如 Cats 和 Dogs）？

```
public class AnimalsController : EntitySetController<Animal, int>
{
} 
```

...

```
ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
modelBuilder.EntitySet<Animal>("Cats");
modelBuilder.EntitySet<Animal>("Dogs");

Microsoft.Data.Edm.IEdmModel model = modelBuilder.GetEdmModel();
config.Routes.MapODataRoute("ODataRoute", "odata", model); 
```

基本上我需要能够声明两个不同的路由（/odata/cats 和 /odata/dogs），它们将到达同一个控制器。

一旦进入控制器，我将需要一种方法来检索路由上下文以确定该方法是否会返回猫或狗。

谁能指出我实现这一结果的正确方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:31:29.760

我通常建议您为每个要公开的实体集使用一个 Web API 控制器。但是如果你真的必须将请求映射到同一个控制器，我会这样做。定义以下控制器选择器：

```
public class AnimalControllerSelector : DefaultHttpControllerSelector
{
    public override string GetControllerName(HttpRequestMessage request)
    {
        string controllerName = base.GetControllerName(request);
        if (controllerName == "Cats" || controllerName == "Dogs")
        {
            controllerName = "Animals";
        }
        return controllerName;
    }
} 
```

注册它：

```
config.Services.Replace(typeof(IHttpControllerSelector), new AnimalControllerSelector()); 
```

然后使用以下代码访问控制器中的实体集名称：

```
string entitySetName = (ODataPath.Segments.First() as EntitySetPathSegment).EntitySetName; 
```

希望有帮助。

# css - 如何在另一个div的右下象限浮动一个div？

> ID：14958855
> 
> 赞同：2
> 
> 时间：2013-02-19T13:34:32.050
> 
> 标签：css

我使用以下解决方案将内部 div（角）浮动到外部 div（基础）的右上角。这很好用。

CSS：

```
#base {width: 100px; height: 100px;}
#corner {float: right; width: 40px; height: 40px; margin: 0 0 15px 15px;} 
```

HTML：

```
<div id="base">
    <div id="corner">
        <!--stuff inside corner-->
    </div>
    <!--other stuff inside base-->
</div> 
```

现在我想将内部 div （角）浮动到外部 base-div 的底部（右下角），但我无法找到正确的 css 配置。我必须改变什么才能达到我的目标？

非常重要的是，基本 div 的文本会浮动到corner-div（如上例所示）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:40:12.543

尝试定位你的 div

```
#base {
    width: 100px;
    height: 100px;
        /* positionning */
    position:relative;
}

#corner {
    /* float: right; */ /*floating will be useless */
    width: 40px;
    height: 40px;
    margin: 0 0 15px 15px;
        /* positionning */
    position:absolute;
    bottom:0;
    right:0;
} 
```

现在，如果您需要外部 div 内容围绕内部底角 div 浮动，您将不得不“欺骗”您的布局，模拟内部底角下的空白空间

更多信息：

*   [如何在右下角的 div 周围环绕文本？](https://stackoverflow.com/questions/499829/css-wrap-text-around-a-bottom-right-div)（值得阅读 ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:38:53.370

制作容器 div `position: relative`。然后，`position: absolute`在要“浮动”的 div 中使用（但您不需要使用`float`）并将`bottom`and `right`rules 设置为 0。

[http://jsfiddle.net/ExplosionPIlls/yWGTB/](http://jsfiddle.net/ExplosionPIlls/yWGTB/)

# c++ - 将 3 字节数据发送到 OpenGL GLSL

> ID：14958859
> 
> 赞同：1
> 
> 时间：2013-02-19T13:34:41.297
> 
> 标签：c++, opengl, glsl, shader

我正在开发一个基于 Voxed 的小游戏。我不打算创建 Minecraft 副本，但这不是重点。

使用 C++ OpenGL 和 VBO，我无法成功地将“非标准”类型发送到我的 GLSL 着色器。假设一个结构由 3 个 uint8_t 属性组成，我试图将这个结构的数组发送到我的 glsl。但我无法得到正确的值。

我发现的最准确的东西是：[WebGL - 如何传递无符号字节顶点属性颜色值？](https://stackoverflow.com/questions/7201826/webgl-how-to-pass-unsigned-byte-vertex-attribute-colour-values)

但它并没有真正回答我的问题。

这里有一些代码可以帮助理解我想要做什么。我什至不知道是否有任何解决方案可以实现它...

**我的结构**

```
struct Color
{
    uint8_t r, g, b;
    // Getter and setter etc...
}; 
```

**我如何将它绑定到 VBO**

```
//_colors contains an array of Color
//_colors.array = new Color[SIZE];

glBind(GL_ARRAY_BUFFER, _colors.buffer);
glBufferData(GL_ARRAY_BUFFER, 
              sizeof(Color) * _colors.size, 
              &(_colors.array[0]), 
              GL_STATIC_DRAW); 
```

**我如何尝试将它们发送到 GPU**

```
glBind(GL_ARRAY_BUFFER, _colors.buffer);
glVertexAttribPointer((GLint)1, 3, GL_UNSIGNED_BYTE, GL_FALSE, 0, 0); 
```

我将值存储在着色器中的 vec3 中，但我毫不怀疑这不是正确的方法。我知道我在某个地方错了，但我不明白我能做什么（正如我所说，也许这甚至是不可能的）。

感谢您的帮助/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:11:16.207

好的，今天我了解了[其他版本的`glVertexAttrib`](http://www.opengl.org/wiki/Vertex_Specification#Vertex_format)，我现在可以回答你了；）

如果你想将整数顶点属性按原样传递给着色器，你必须（显然）使用. 如果您想接收浮点输入（例如），请查看链接页面和应用的转换。`glVertexAttrib`**`I`**`Pointer``vec3`

# jquery - JQuery在li里面解开ol

> ID：14958862
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:34:51.150
> 
> 标签：jquery, dom

在以下情况下，我对函数 unwrap 有一点问题：

```
<li id="menu_89">
    <div class="list-item">Home
        <div class="actions"><a class="delete" href="#">Delete</a>
        </div>
    </div>
    <ol>
        <li id="menu_91">
            <div class="list-item">New user
                <div class="actions"><a class="delete" href="#">Delete</a>
                </div>
            </div>
            <ol>
                <li id="menu_93">
                    <div class="list-item">Pay
                        <div class="actions"><a class="delete" href="#">Delete</a>
                        </div>
                    </div>
                </li>
            </ol>
        </li>
    </ol>
</li> 
```

当按下删除按钮时，列表项应该被删除，并且之间的所有内容都`<ol>`应该保留，但`<ol>`标签也应该被删除。我无法完成这件事。

所以当你按下主页上的删除按钮时，主页应该被删除，新用户和支付应该保留。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:54:40.890

这适用于您的场景（我不确定它是否可以进一步优化以提高效率）：

```
$('#menu_89').on('click', '.delete', function() {
  var $ele = $(this).closest("li").find("ol").eq(0);
   $ele.contents().unwrap();
   $(this).parent().parent().remove(); 
}); 
```

jsFiddle：http: [//jsfiddle.net/6JPzb/](http://jsfiddle.net/6JPzb/)

# excel - 来自另一个单元格的条件格式

> ID：14958864
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:35:09.753
> 
> 标签：excel, format, excel-2010, conditional-formatting

我想知道如何有条件地控制格式如下：

单元格“A”可以有几个不同的输入。根据什么，它会被彩色格式化。

单元格“B”可以有值或没有值。如果没有它，它应该保持未格式化。如果它有一个值，它应该具有与单元格“A”相同的颜色格式。

如果单元格“A”发生变化，它也应该更改单元格“B”中的颜色格式，而不更改单元格“B”中的值。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T13:23:47.873

我不完全确定我理解你的问题 - 一个例子可能会有所帮助。

也就是说，[这](http://www.techonthenet.com/excel/questions/cond_format1_2007.php)是一个关于条件格式的教程。

它可能有点毛茸茸，但我认为你可以做你想做的事。根据 $A1 计算公式并将其应用到 $A$1:$B$100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T21:51:11.763

如果 ColumnA 的 CF 与公式一起应用，那么对于 A ($A) 的固定引用，颜色也可以应用于 ColumnB，其中适用于范围为 A:B。“问题”可能只是在 ColumnA 中紧靠空白（ColumnB）左侧的单元格中可能存在触发器（即值）。对于这种情况，仅对 ColumnB 应用附加的 CF 规则（例如，`=$B1=""`通过检查 Stop If True 并将其置于列表顶部来确保其具有优先级。

# asp.net - 图像未在 asp.net 博客引擎中加载

> ID：14958867
> 
> 赞同：0
> 
> 时间：2013-02-19T13:35:14.363
> 
> 标签：asp.net, blogengine.net

我继承了一个 asp.net 网站，其中一个子文件夹中有一个博客。我们将正常运行的站点移至新服务器，现在不再加载任何图像。使用 image.axd 动态加载图像。

我现在对 asp.net 几乎一无所知。我是一个php人。我做了很多关于 URL 映射的谷歌搜索，并查看了 webconfig 文件，直到我脸色发青。

关于寻找什么的任何指示？它在 IIS7 上运行

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:50:53.213

在您的 web.config 中，您需要配置图像处理程序。它应该看起来像这样：

```
<httpHandlers>
  <add verb="*" path="image.axd" type="ImageHandler" validate="false"/>
</httpHandlers> 
```

此示例图像处理程序将在 App_Code 文件夹中查找名为 ImageHandler.cs 的代码文件。

也可以在 IIS 控制台窗口中配置图像处理程序。也许您可以在旧服务器上找到旧设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:52:37.243

1.  您的 app_data 文件夹需要读/写权限

您说，“图像正在使用 image.axd 动态加载。”

这意味着您的图像默认来自 /app_data/files。

因此，如果它在旧服务器上工作但在新服务器上不起作用，则表明存在权限问题。

1.  安装萤火虫

[http://getfirebug.com/](http://getfirebug.com/)

这将告诉您图像使用的文件路径。

这将解决您的问题。

1.  相关网站的 URL 是什么？

如果你不能解决这个问题，我可以看看它。

希望这可以帮助，

布赖恩戴维斯

# java - 在jsp文件中动态创建url

> ID：14958873
> 
> 赞同：0
> 
> 时间：2013-02-19T13:35:30.333
> 
> 标签：java, html, jsp, url, web

所以我有一个jsp文件，在这个文件中我想动态生成一个新jsp文件的url。

我该怎么做呢？如果我只是简单地编写`<a href="newfile.jsp"> " Click here" </a>`，然后运行我的程序，当我点击 url 时，我只会得到一个 404 错误，而不是一个空白的新页面。设置它还需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:32:51.313

因此，正如我所见，您需要即时创建一些*Web 资源*。我不认为生成`JSP`页面是解决这个问题的正确方法。你可以有一个`Servlet`来处理这些请求，它也可以有一些*Web 资源*注册表。简单场景：

1.  用户点击链接**/createProductA** =>`Servlet`保存这个“productA”和一些相应的信息（一些细节、信息、相应的渲染模板等）
2.  然后你点击**/vewProductA** =>`Servlet`也处理这个，但知道需要提供详细信息页面。它从其注册表中获取信息并呈现所需的模板。对于客户端，它将与页面相同。

如果您需要动态更改渲染模板，例如在数据库中，这种情况可能会有所帮助。如果您的详细信息页面布局是静态的，那么您可以拥有一个页面，例如**/viewProduct.jsp**并将**id**传递给它。这是*Java* Web 应用程序的常用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:05:44.133

要么按照 mudalov 的解释使用 Servlet，要么您可以使用 .htaccess 文件并定义任何 url，例如 something.html 或 something.jsp 以重定向到所需的 JSP/SERVLET

```
RewriteRule ^/(.*)\.html /servlets/controllerServlet/id=$1 
```

因此，如果您的 url 是 newfile.html，那么您的 controllerServlet 将接收带有参数 id="newfile" 的请求

# java - 从 C++ 调用 Java：如何捕获/检测致命的 JVM 错误？

> ID：14958875
> 
> 赞同：4
> 
> 时间：2013-02-19T13:35:35.447
> 
> 标签：java, c++, java-native-interface, jvm-crash, catch-all

我正在开发一个 C++ 程序（Win32，MS Visual Studio 2008），它通过 JNI 创建一个 Java VM，如此[处](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#wp16334)所述。它在 Java 6 和 Java 7 中都运行良好了很长时间。

今天我安装了新版本的JRE；安装程序出现问题，JRE 损坏。我注意到我的 C++ 程序没有启动并且没有发出任何警告消息。调试程序显示运行成功，直到`JNI_CreateJavaVM`调用；但是调用`JNI_CreateJavaVM`会导致程序立即终止。没有返回值，没有错误消息，什么都没有。

是的，我知道我只需要重新安装 JRE。但尽管如此，我希望我的 C++ 程序能够为这种情况做好准备。如果它无法创建 Java VM，它应该显示一条消息“请重新安装 JRE”。但我没有机会展示该信息，因为整个程序正在终止。

有没有办法在 JRE 中检测此类错误，或者更一般地说，在第三方库中检测到此类错误？我尝试使用 C++`try/catch`构造，我尝试使用[信号](http://msdn.microsoft.com/en-us/library/xdkz3x12%28v=vs.71%29.aspx)函数 - 没有任何帮助；程序在没有调用任何 catch 或信号处理程序的情况下消失。

有没有办法检测这种 JRE 崩溃？或者：有没有办法可靠地检测第三方库中的崩溃或终止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:41:43.353

如果您使用的是 Linux/Unix：这是我通常开始的：

```
struct sigaction sa;
sa.sa_handler = bt_sighandler;
sigemptyset(&sa.sa_mask);
sa.sa_flags = SA_RESTART;

sigaction(SIGSEGV, &sa, NULL);
sigaction(SIGUSR1, &sa, NULL); 
```

如果您在 Windows 上使用 Microsoft C++：_ *try/* _except 通常可以解决问题。它是一个 MSVC 扩展（你可以从双下划线看出），它扩展了标准的 try/catch。

Try/catch 捕获 C++ 异常， _try */* _except 将捕获所有其他未处理的异常（COM，Win32，...）。例如，它将捕获 null 取消引用、内存访问问题，这些问题可能是导致崩溃的原因。[在这里](http://msdn.microsoft.com/en-us/library/s58ftw19%28v=vs.80%29.aspx)阅读

否则，在寡妇中，尝试[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/ms680634%28VS.85%29.aspx)

编辑：由于使用 SEH 的方法似乎失败了，您可能会更上一层楼并使用向量异常处理。根据[msdn 上的这篇博文](http://blogs.msdn.com/b/kirush/archive/2008/04/24/global-crash-handler-for-c-application.aspx)，VEH 是按进程注册的，并在 SEH 之前进行检查。

如果一切都失败了，请不要绝望 :) 您仍然可以将您的应用程序变成一对调试器/被调试者。这将使您完全控制被调试进程的事件、生死。通常不值得麻烦，但这是我过去不得不使用的另一个解决方案。它也没有看起来那么困难；如果还有其他失败，请告诉我，我会挖掘出一些旧代码。

# hibernate - 如何让 liquibase 为 @GeneratedValue(GenerationType.TABLE) 属性生成 ID？

> ID：14958880
> 
> 赞同：3
> 
> 时间：2013-02-19T13:35:47.220
> 
> 标签：hibernate, jpa, liquibase

我们目前非常陷入以下情况：

我们有几个 JPA 映射的实体，其中 ID 通过`@GeneratedValue(strategy = GenerationType.TABLE)`注释自动生成，ORM 是 Hibernate 4。此外，我们使用 liquibase 来管理数据库迁移。

现在我们遇到一种情况，迁移涉及创建新表，并且必须将现有表中的数据迁移到新表。新表（即根据实体）已经命名了 ID 生成策略。问题是我们如何在 liquibase 迁移中为新添加的行创建 ID，从而满足以下约束：

*   必须可以生成执行迁移的 SQL 脚本（通过 liquibase）（因此不能使用用于迁移的自定义类）
*   迁移必须针对 HSQLDB 和 Oracle 运行
*   当然，Hibernate ID 生成不能被破坏

非常感谢您对此问题的任何帮助！

# ios - iOS：从 NSObject 类中序列化/反序列化复杂的 JSON

> ID：14958883
> 
> 赞同：10
> 
> 时间：2013-02-19T13:35:58.897
> 
> 标签：ios, objective-c, json, generics, jsonkit

任何人都知道如何基于 NSObject 类序列化嵌套的 JSON？这里有一个关于序列化简单 JSON 的讨论[，](https://stackoverflow.com/questions/10515015/ios-json-serialization-for-nsobject-based-classes)但它不够通用，无法满足复杂的嵌套 JSON。

想象一下这是 JSON 的结果：

```
{ "accounting" : [{ "firstName" : "John",  
                    "lastName"  : "Doe",
                    "age"       : 23 },

                  { "firstName" : "Mary",  
                    "lastName"  : "Smith",
                    "age"       : 32 }
                              ],                            
  "sales"      : [{ "firstName" : "Sally", 
                    "lastName"  : "Green",
                    "age"       : 27 },

                  { "firstName" : "Jim",   
                    "lastName"  : "Galley",
                    "age"       : 41 }
                  ]} 
```

从这个类：

```
@interface Person : NSObject{}
@property (nonatomic, strong) NSString *firstName;
@property (nonatomic, strong) NSString *lastName;
@property (nonatomic, strong) NSNumber *age;
@end

@interface Department : NSObject{}
@property (nonatomic, strong) NSMutableArray *accounting; //contain Person class
@property (nonatomic, strong) NSMutableArray *sales; //contain Person class
@end 
```

一般如何基于类对它们进行序列化/反序列化？

**编辑**

目前我能够基于任何类生成这样的有效负载：

```
NSMutableDictionary *Payload = [self serialize:objClass]; 
```

但它不适合嵌套的复杂 JSON。有人对此有更好的解决方案吗？[这个](http://json.codeplex.com/)C# 库基于对象类满足序列化/反序列化。我想基于 NSObject 重现相同的东西

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-27T10:53:35.550

最后，我们可以使用[JSONModel](https://github.com/icanzilb/JSONModel)轻松解决这个问题。这是迄今为止最好的方法。JSONModel 是一个基于 Class 对对象进行一般序列化/反序列化的库。您甚至可以使用基于非 nsobject 的属性，例如`int`,`short`和`float`. 它还可以满足嵌套复杂的 JSON。

**1）反序列化示例**。参考上面的例子，在头文件中：

```
#import "JSONModel.h"

@interface Person : JSONModel 
@property (nonatomic, strong) NSString *firstName;
@property (nonatomic, strong) NSString *lastName;
@property (nonatomic, strong) NSNumber *age;
@end

@protocol Person;

@interface Department : JSONModel
@property (nonatomic, strong) NSMutableArray<Person> *accounting;
@property (nonatomic, strong) NSMutableArray<Person> *sales;
@end 
```

在实现文件中：

```
#import "JSONModelLib.h"
#import "myJSONClass.h"

NSString *responseJSON = /*from example*/;
Department *department = [[Department alloc] initWithString:responseJSON error:&err];
if (!err)
{
    for (Person *person in department.accounting) {

        NSLog(@"%@", person.firstName);
        NSLog(@"%@", person.lastName);
        NSLog(@"%@", person.age);         
    }

    for (Person *person in department.sales) {

        NSLog(@"%@", person.firstName);
        NSLog(@"%@", person.lastName);
        NSLog(@"%@", person.age);         
    }
} 
```

**2）序列化示例**。在实现文件中：

```
#import "JSONModelLib.h"
#import "myJSONClass.h"

Department *department = [[Department alloc] init];

Person *personAcc1 = [[Person alloc] init];
personAcc1.firstName = @"Uee";
personAcc1.lastName = @"Bae";
personAcc1.age = [NSNumber numberWithInt:22];
[department.accounting addOject:personAcc1];

Person *personSales1 = [[Person alloc] init];
personSales1.firstName = @"Sara";
personSales1.lastName = @"Jung";
personSales1.age = [NSNumber numberWithInt:20];
[department.sales addOject:personSales1];

NSLog(@"%@", [department toJSONString]); 
```

这是序列化示例的 NSLog 结果：

```
{ "accounting" : [{ "firstName" : "Uee",  
                    "lastName"  : "Bae",
                    "age"       : 22 }
                 ],                            
  "sales"      : [{ "firstName" : "Sara", 
                    "lastName"  : "Jung",
                    "age"       : 20 }
                  ]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:47:17.247

您必须提前知道要反序列化的对象类型。在这种情况下，您将反序列化为`NSDictionary`具有两个属性：“accounting”和“sales”。这些属性中的每一个都是`NSArray`. 数组将有`NSDictionary`.

既然您知道这些对象中的每一个究竟是什么*，*一旦您将 JSON 反序列化为本机对象，您就可以从反序列化的对象中创建类的新实例。例如：

```
JSONDecoder decoder = [[JSONDecoder alloc] init];
NSObject notJSON = [decoder objectWithData:jsonData];
// where jsonData is an NSData representation of your JSON
[decoder release];

Person person1 = (Person)[notJSON objectForKey:@"accounting"][0]; 
```

鉴于此示例，您应该能够推断出更通用的反序列化器。也就是说，您希望遍历数据以创建“未知”通用对象到“已知”特定对象的深层副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T03:50:34.567

也许这个可以帮助[BWJSONMatcher](https://github.com/BurrowsWang/BWJSONMatcher)。它可以帮助您通过一行代码轻松地将 JSON 字符串或 JSON 对象与您的数据模型匹配起来。

```
...
NSString *jsonString = @"{your-json-string}";
YourValueObject *dataModel = [YourValueObject fromJSONString:jsonString];

NSDictionary *jsonObject = @{your-json-object};
YourValueObject *dataModel = [YourValueObject fromJSONObject:jsonObject];
...
YourValueObject *dataModel = instance-of-your-value-object;
NSString *jsonString = [dataModel toJSONString];
NSDictionary *jsonObject = [dataModel toJSONObject];
... 
```

# java - Java遍历字符串数组并在循环中一次返回

> ID：14958884
> 
> 赞同：0
> 
> 时间：2013-02-19T13:36:02.343
> 
> 标签：java, arrays, string

我已经对此进行了很多搜索，但只能找到不适用的实现（例如，使用我已经拥有的随机）。漂亮的菜鸟问题，非常感谢任何帮助。

我得到了一个字符串数组，目前我通过一个简单的函数返回一个随机数组，我实现为按钮的 onCLick 值，代码如下。因此，每次有人点击 bottun 时，都会设置一个新字符串。

我想做的是从上到下遍历数组，一次返回一个字符串，然后重新开始。我怀疑可能有几种方法可以做到这一点，有什么建议吗？提前非常感谢！

```
public class FirstActivity extends Activity {

  private TextView myStringView;
  private static final Random RANDOM = new Random();
  String myString;

  //....my other code

  private static final String[] MYSTRINGS = {
      "string a",
      "string b",
      "string c"
  };

   public void generateString(View v) {

      int myStringsLength = MYSTRINGS.length;
      String myString = MYSTRINGS[RANDOM.nextInt(myStringsLength)];
      myStringView.setText(myString);

  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:39:57.033

创建自己的函数：

```
 private static int counter = 0;

 private int nextInt(int length) {
     return (counter++) % length;
 } 
```

并简单地调用它而不是`RANDOM.nextInt()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:40:37.747

这应该有效：

```
public class FirstActivity extends Activity {

  private TextView myStringView;
  private int stringIndex;
  String myString;

  //....my other code

  private static final String[] MYSTRINGS = {
      "string a",
      "string b",
      "string c"
  };

   public void generateString(View v) {

      int myStringsLength = MYSTRINGS.length;
      String myString = MYSTRINGS[stringIndex];
      stringIndex = (stringIndex + 1) % myStringsLength;
      myStringView.setText(myString);

  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:41:00.077

您本质上想要实现一个循环数组。您可以通过在您的班级中保留一个计数器来做到这一点：

```
public void generateString(View v) 
{
    int index = count % MYSTRINGS.length;
    count++;

    String myString = MYSTRINGS[index];
    myStringView.setText(myString); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:40:25.477

静态计数器可以解决问题。

```
public class FirstActivity extends Activity {

  private static int counter = 0;      

  private TextView myStringView;
  private static final Random RANDOM = new Random();
  String myString;

  //....my other code

  private static final String[] MYSTRINGS = {
      "string a",
      "string b",
      "string c"
  };

   public void generateString(View v) {

      String myString = MYSTRINGS[counter++];
      if( counter == MYSTRINGS.length ) {
          counter = 0;
      }
      myStringView.setText(myString);

  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T13:47:26.590

确实有几种方法可以实现这一点，据我所知，解决您的问题的最佳方法是保持一个表示到达数组中当前字符串的计数器，并返回相应的字符串值，例如：

```
String[] arr = new String[] {"a", "b", "c"};
int counter = 0;

public String getStringFromArr() {

    if(counter < arr.length) {
        return arr[counter++];
    } else {
        counter = 0;

        return arr[counter++];
    }
} 
```

这被认为是最简单的实现。您可以将其进一步抽象化，将其放在一个类中，该类接受一个字符串数组并公开一个返回要使用的字符串的 nextString() 方法。

还有一个好点是使用 List 而不是 String[]。

您现在应该从您的方法中调用 getStringFromArr()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T13:53:03.210

你可以写一个`Iterator`永远循环的：

```
public class Test {
  public static void main(String args[]) {
    System.out.println("Test");
    new Test().test();
  }

  public void test() {
    String[] strings = {"One",
      "Two",
      "Three"};
    for (Iterator<String> s = new ArrayIterator<>(strings); s.hasNext();) {
      System.out.println(s.next());
    }
    int i = 0;
    for (Iterator<String> s = new ArrayIterator<>(strings, true); i < 10 && s.hasNext(); i++) {
      System.out.println(s.next());
    }
  }

  static class ArrayIterator<T> implements Iterator<T> {
    private final T[] array;
    private boolean loop = false;
    private int i = -1;
    private T next = null;

    public ArrayIterator(T[] array, boolean loop) {
      this.array = array;
      this.loop = loop;
    }

    public ArrayIterator(T[] array) {
      this(array, false);
    }

    @Override
    public boolean hasNext() {
      if (next == null) {
        // Step 1.
        i += 1;
        if (i == array.length) {
          if (loop) {
            i = 0;
          }
        }
        next = (i < array.length ? array[i] : null);
      }
      return next != null;
    }

    @Override
    public T next() {
      T it = next;
      next = null;
      return it;
    }

    @Override
    public void remove() {
      throw new UnsupportedOperationException("Not supported.");
    }
  }
} 
```

印刷：

```
One
Two
Three
One
Two
Three
One
Two
Three
One
Two
Three
One 
```

# ssis - 我可以使用 WF 作为 SSIS 的替代品吗

> ID：14958890
> 
> 赞同：0
> 
> 时间：2013-02-19T13:36:23.387
> 
> 标签：ssis, workflow-foundation

我的公司为客户开发了许多用于数据转换的 SSIS 包。现在客户想要迁移到云并决定关闭他的数据中心（所以我们没有本地选项）。随着客户端迁移到云，我们还需要将包迁移到云 (Azure)。由于 azure 不支持 SSIS，我们现在必须将这些 SSIS 包更改为辅助角色。我对WF一无所知。有人告诉我，我们可以使用 WF 作为 SSIS 包的替代品。我的问题是，有可能吗？如果是这样，任何人都可以提供指向为 ETL 目的创建 WF 的示例的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:44:35.083

使用 WF4，您可以通过为 SSIS 提供的各种操作构建 WF 活动来模仿 SSIS 所做的事情。这绝对是可能的，实际上是一个有趣的项目。它可以很灵活，因此您的 ETL 流程也可以针对不同的数据库引擎。它当然可以轻松设置为在 Azure 辅助角色中工作。

# php - ajax表单不提交帖子

> ID：14958897
> 
> 赞同：0
> 
> 时间：2013-02-19T13:36:54.850
> 
> 标签：php, ajax, forms, post, json

我使用 ajax 创建了一个表单，它将数据作为 json 数组发布到一个单独的 php 文件中。将表单发布到 php 处理程序的标记 ajax 是：

```
$.ajax({
   dataType: "json",
   type: "post",
   url: "ajax.php?action=add_driver",
   data: $("form#addDriver").serialize(), // serializes the form's elements.
   beforeSend: function()
   {

$('.error, .success, .notice').remove();

},
success: function(json)
{

if (json['status']=='success'){
    alert(json['message']);
    }else{

if(json['error']['driver_firstname']){
    $("input[name=driver_firstname]").after('<div class="error">'+json['error'['driver_firstname']+'</div>');   
}

if(json['error']['driver_surname']){
    $("input[name=driver_surname]").after('<div class="error">'+json['error']['driver_surname']+'</div>');  
}
if(json['error']['driver_dob']){
    $("input[name=driver_dob]").after('<div class="error">'+json['error']['driver_dob']+'</div>');  
}

if(json['error']['driver_address']){
    $("input[name=driver_address]").after('<div class="error">'+json['error']['driver_address']+'</div>');  
}

if(json['error']['driver_postcode']){
    $("input[name=driver_postcode]").after('<div class="error">'+json['error']['driver_postcode']+'</div>');    
}

if(json['error']['driver_city']){
    $("input[name=driver_city]").after('<div class="error">'+json['error']['driver_city']+'</div>');    
}

if(json['error']['driver_county']){
    $("input[name=driver_county]").after('<div class="error">'+json['error']['driver_county']+'</div>');    
}

if(json['error']['driver_email']){
    $("input[name=driver_email]").after('<div class="error">'+json['error']['driver_email']+'</div>');  
}

if(json['error']['driver_tel']){
    $("input[name=driver_tel]").after('<div class="error">'+json['error']['driver_tel']+'</div>');  
}

if(json['error']['driver_mobile']){
    $("input[name=driver_mobile]").after('<div class="error">'+json['error']['driver_mobile']+'</div>');    
}   

//These are the series of validation checks carried out before submission//

}
                     }); 
```

这被传递到 url 中命名的文件 ajax.php，该文件使用 php 验证检查错误，如果一切正常，则应该插入到数据库中。这部分的编码标记是：

```
<?php
$json = array();

if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

//for the first field only//            
$driver_firstname = tep_db_prepare_input($HTTP_POST_VARS['driver_firstname']);

if (strlen($driver_firstname)<4){
  $json['error']['driver_firstname'] = 'First Name is required!';
}

if (isset($json['error']) and !empty($json['error'])){

    $json['status'] = 'error';
    $json['message'] = 'Please check your error(s)!';

}else{

     $sql_data_array = array('driver_firstname' => $driver_firstname);

     tep_db_perform(TABLE_DRIVERS, $sql_data_array);

     $driver_id = tep_db_insert_id();

     $json['status'] = 'success';
     $json['message'] = 'Data has been successfully updated!';
    }

}

     echo json_encode($json);

?> 
```

出于某种原因，它没有从浏览器将任何值发布到 php 文件，并且显示一个空白数组。当我使用“get”类型时，它可以工作。谁能帮忙告诉我为什么它不适用于“帖子”类型？如果需要 ajax.php 部分，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:26:53.920

[`$HTTP_POST_VARS`已弃用](http://www.php.net/manual/en/reserved.variables.post.php)（您应该在*11 年前*就停止使用它）并且在我的 PHP 副本上对其进行快速测试未能使其正常工作。使用`$_POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:17:07.413

使用 .serializeArray() 而不是 .serialize 来做你想做的事。

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

样本结果：

`[{name: "a", value: "1" }, {name: "b", value: "2" }, {name: "c", value: "3"}, {name: "d", value: "4" }, {name: "e", value: "5" }]`

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

样本结果：

`a=1&b=2&c=3&d=4&e=5`

代码应该更接近于此。在函数中使用`.done`并捕获返回数据。

JS：

```
$.ajax({
    type: "POST", 
    url: "ajax.php?action=add_driver", 
    dataType: "json",
    date:  $("form#addDriver").serializeArray(),
    beforeSend: function() {
        $('.error, .success, .notice').remove();
    }
}).done(function(json) {
    if (json['status']=='success'){
        alert(json['message']);
    }else{
        if(json['error']['driver_surname']){
           /* Do Stuff */ 
        }
    }
}); 
```

PHP：

```
<?php
$myData = array();
$json = array();

if(isset($_POST['yourData'])){
    $myData = $_POST['yourData'];
}

/* Do stuff */
$json['myValue'] = $myData['passedValue']; 

echo json_encode($json);
?> 
```

# c# - HighCharts 支持 RTL

> ID：14958898
> 
> 赞同：11
> 
> 时间：2013-02-19T13:36:55.220
> 
> 标签：c#, highcharts, right-to-left, dotnethighcharts

Highcharts 默认不支持 rtl。当放置像希伯来语/阿拉伯语这样的 rtl 文本时，文本会被完全破坏，使其有时无法阅读。如何配置 HighCharts 以支持 RTL？

如果有帮助，我正在使用 dotnetHighCharts...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-17T12:06:26.690

试试这个代码： [演示](http://jsfiddle.net/highcharts/buYCZ/)

```
var chart = new Highcharts.Chart({

chart: {
    style:{
    direction: 'rtl'
    },
    renderTo: 'container',
    type: 'column'
},

xAxis: {
    categories: [
         ' تست a', 
        'حسن', 
        'كريم', 
        'محمود'
    ],
    reversed: true
},

yAxis: {

    labels: {
         useHTML: true,
            format: '{value} متر مربع'
        },
    title: {
        text: 'الاسم الأول',
        useHTML: true
    },
},
title: {
    text: 'تست a',
   useHTML: true
},

legend: {
    useHTML: true
},    

tooltip: {
   useHTML: true

},

series: [{
    name: 'تست',
    data: [10000,30000,20000,40000]

}]}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-22T08:10:26.890

只需添加`useHTML: true`到图表的绘图选项即可。在此处查看演示[jsfiddle.net/3me9h7k2](http://jsfiddle.net/3me9h7k2)

或者

```
var chart = new Highcharts.Chart({

chart: {
    renderTo: 'container',
    type: 'pie'
},

title: {
    text: 'یک نمودار؟!',
    useHTML: true, //bug fixed `IE9` and `EDGE`
    style: {
        fontSize: '20px',
        fontFamily: 'tahoma',
        direction: 'rtl',
    },
},

tooltip: {
    useHTML: true,
    style: {
        fontSize: '20px',
        fontFamily: 'tahoma',
        direction: 'rtl',
    },
},

plotOptions: {
    pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
            enabled: true,
            y: -5, //Optional
            format: '\u202B' + '{point.name}', // \u202B is RLE char for RTL support
            style: {
                fontSize: '15px',
                fontFamily: 'tahoma',
                textShadow: false, //bug fixed IE9 and EDGE
            },
            useHTML: true,
        },
        //showInLegend: true,
    },
},

series: [{
    name: 'برند',
    colorByPoint: true,
    data: [{
        name: 'اینترنت اکسپلورر؟!',
        y: 56.33
    }, {
        name: 'کروم؟!',
        y: 24.03,
    }, {
        name: 'فایرفکس؟!',
        y: 10.38
    }, {
        name: 'سفاری؟!',
        y: 4.77
    }, {
        name: 'اوپرا؟!',
        y: 0.91
    }, {
        name: 'دیگر؟!',
        y: 0.2
    }],
}], 
```

});

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T14:05:33.943

我认为，这可能会有所帮助：

*   [图例 rtl](http://api.highcharts.com/highcharts#legend.rtl)
*   [工具提示 useHTML for rtl](http://api.highcharts.com/highcharts#tooltip.useHTML)

一般情况下，建议对所有标签等使用 HTML。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-26T15:15:24.657

您可以在文本中使用[`RLE`（从右到左嵌入的开始）](https://www.w3.org/International/questions/qa-bidi-unicode-controls#basedirection)控制字符。像这样：

```
format: '\u202B' + '{point.name}' 
```

示例代码：

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'pie'
    },

    title: {
        text: 'یک نمودار؟!',
        useHTML: true, //bug fixed `IE9` and `EDGE`
        style: {
            fontSize: '20px',
            fontFamily: 'tahoma',
            direction: 'rtl',
        },
    },

    tooltip: {
        useHTML: true,
        style: {
            fontSize: '20px',
            fontFamily: 'tahoma',
            direction: 'rtl',
        },
    },

    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                y: -5, //Optional
                format: '\u202B' + '{point.name}', // \u202B is RLE char for RTL support
                style: {
                    fontSize: '15px',
                    fontFamily: 'tahoma',
                    textShadow: false, //bug fixed IE9 and EDGE
                },
            },
        },
    },

    series: [{
        name: 'برند',
        colorByPoint: true,
        data: [{
            name: 'اینترنت اکسپلورر؟!',
            y: 56.33
        }, {
            name: 'کروم؟!',
            y: 24.03,
        }, {
            name: 'فایرفکس؟!',
            y: 10.38
        }, {
            name: 'سفاری؟!',
            y: 4.77
        }, {
            name: 'اوپرا؟!',
            y: 0.91
        }, {
            name: 'دیگر؟!',
            y: 0.2
        }],
    }],

}); 
```

完整的代码在这里在线查看：[https ://jsfiddle.net/NabiKAZ/h4kv0t9v/4/](https://jsfiddle.net/NabiKAZ/h4kv0t9v/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T13:05:26.150

在选项中有一个属性：“useHtml”：true，如果您需要在标题中添加样式：{方向：rtl}，它可以工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-28T08:51:05.743

只要

```
title: {
    text: 'یک نمودار؟!',
    useHTML: true,
},
legend: {
    rtl: true,
}, 
```

将为您完成工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-08T11:52:20.793

你可以设置方向ltr

样本：

```
<div id="container" style="direction: ltr"></div> 
```

# genetic-algorithm - 遗传算法问题

> ID：14958902
> 
> 赞同：2
> 
> 时间：2013-02-19T13:37:04.707
> 
> 标签：genetic-algorithm

我正在实施 NSGA II 遗传算法来为我的大学制定一套时间表。我在解决方案的变化方面遇到问题。

我的算法在初始化、变异和交叉中运行良好，但在最后一代审查我的解决方案后它们都是相同的，例如我一代有 200 个，也许其中 64 个彼此相同，54 个相同其他等

我的问题是什么可能导致这种情况？交叉和突变的最佳形式是什么？

代大小、代数、突变率和交叉率是否也有规范？

目前它像这样运行：

1.  随机生成300个解决方案
2.  计算适应度和排名
3.  挑选 200 个最佳解决方案
4.  使其中的 5% 发生变异并产生 80 个孩子
5.  再次计算和排名
6.  挑选出最好的 300 人，传给下一代
7.  重复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:43:47.423

我相信您的算法可能没有错误。这是 GA 的一个众所周知的问题。如果你想有多种解决方案，你应该实现一些Niching方法。它的想法是惩罚你人口中的类似个体。您可以找出个体相似性的一些启发式方法，并从您的群体中排除相似的个体或消除个体的适应度。这将使您的人口更加多样化，并且不允许您的变异操作员选择和进化相同的个体。阅读 Samir W. Mahfoud 的“Niching Methods for Genetic Algorithms”会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:06:26.843

这个结果不一定是坏事。它可能只是融合在几个“附近”没有任何其他可行解决方案的解决方案上。您正在融合的解决方案是否糟糕？

我注意到的一件事是，尽管您提到了交叉，但您并未将其列为 7 个步骤之一。如果事实上你只是在做变异，那会让 GA 更难爬出局部最优。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:22:57.593

GA 的工作就像 Converging to a point 选择最小的等位基因（解决方案）为最佳。在极少数情况下，经过数千代的长期运行，它可能会带来单一的最佳解决方案。

但在某些情况下，它可能会在最少的运行次数（例如 100 次）中带来收敛的解决方案。但它有可能陷入局部最优，无法达到全局最优。

我不确定您尝试过哪一代。我建议你去1000代并比较结果。此外，情节可能会在几代之后发生变化，就像您可以看到全新的解决方案一样

不同的表示有不同的交叉和变异。可能你可以告诉你正在使用的表示，结果与代数成正比

# design-patterns - 代码设计：业务逻辑和表示层分离，带有状态信息

> ID：14958903
> 
> 赞同：1
> 
> 时间：2013-02-19T13:37:06.250
> 
> 标签：design-patterns, optimization

长话短说……

**我希望我的客户（“服务消费者”中的客户，例如 REST）获得有关业务层做了什么或没做什么的状态信息。仅返回一个空对象或仅返回空值并不是非常具有描述性。任何事情都可能发生。**

该死 - 我制作了一个很好的 UML 序列图来说明问题，但由于信誉点不足，StackOverflow 不允许我发布它:'(

这个问题可能是世界上最古老的问题。但是我没有找到令人满意的答案。我可以满足这里描述的解决方案[如何使用 MVP 将服务层消息/错误传达给更高层？](https://stackoverflow.com/questions/21697/how-do-you-communicate-service-layer-messages-errors-to-higher-layers-using-mvp)但它不会让我跳过循环。到处抛出异常听起来不是一件好事。毕竟例外是昂贵的。此外，我需要为很多“这可能发生”的场景创建一个异常。

****所以问题是......你是设计“通用返回值”还是抛出异常？****
不幸的是，到目前为止我还没有找到答案......这就是你发挥作用的地方： )

我会继续在其中放入一个状态代码、一条消息和 T 类型的实际请求信息。假设这个通用返回值是“ServiceResult”。

我做的考虑：

*   好的，所以我的业务层方法都返回 ServiceResult 对象。好的。
*   这很容易使用 - 前提是您所有的业务层魔法都发生在您调用的一个公共方法中。嗯 - 它没有。通常不会。
*   因此，您要么必须使所有私有方法都可以访问 ServiceResult，要么将其作为参数传递。你不想通过它大约 100 次...相信我。
*   这就是您决定将 ServiceResult 属性添加到“控制”业务类的时候。但是等等..您不会在 c# 中添加通用属性。因为它不是受支持的功能。
*   接下来是什么？而是使用“对象”作为属性？几乎……你不想一直施放，而且你一开始就不知道要施放什么，因为 T 可以是任何东西。而且您的私有方法（比您最初调用的公共方法低 3 级）根本不知道类型 - 当然您也可以将其设为类的属性。我猜它仍然是糟糕的设计..
*   假设您解决了该问题，如果 ServiceResult 尚未处于“故障”状态并且进一步处理无用，则每次调用下一个方法之前都需要检查 ServiceResult.Status。当然你可以把所有的魔法都放在一个 Run(Func func) 方法中，但是如果你在这一点上......最迟......你开始考虑再次使用 Exceptions :)

***基本上这就是为什么我认为人们只是抛出异常并在最高级别捕获它们***（在您的业务逻辑中 - 而不是在控制器中）。

这个问题有我不知道的设计模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:13:17.873

> 到处抛出异常听起来不是一件好事。

当然不是。发生异常时抛出异常。例如：如果你调用`Repository.UpdateUser(var user)`你期望一个用户对象的方法并且它得到了一个指定的 Id（你怎么能更新它）。

如果不是，你应该抛出异常，因为没有遵循方法契约。通过抛出异常，您还可以强制开发人员采取措施防止异常发生。例如通过确保用户对象是有效的。

> 毕竟例外是昂贵的。

没那么贵。调试一个没有进行适当完整性检查的应用程序可能比购买新硬件来弥补异常性能损失要贵得多。（看到了吗？这听起来很荒谬，因为异常不太可能对您的整体表现产生太大影响）。

> 此外，我需要为很多“这可能发生”的场景创建一个异常。

不，您需要确保在调用无法处理这些情况的方法之前处理那些“可能发生”的情况。

> 所以问题是......你是设计“通用返回值”还是抛出异常？

在大多数情况下，通用返回值毫无价值。忽略返回值的懒惰开发人员可能会引入一个休眠错误，该错误将在稍后出现并导致数小时的调试。

而是设计方法来预期错误或引发异常。比较`int.TryParse`和`int.Parse`。第一个告诉您它可能会失败（因为它正在尝试），而另一个希望该值是整数（因此抛出异常，因为如果不是，它就无法按承诺完成）。

# javascript - 在序列中找到下一个数字的算法

> ID：14958906
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:37:10.060
> 
> 标签：javascript, jquery

序列：1,2,3,...10 公式：x = n+1

假设序列是一个数组，并且在给定的时间序列包含 1,3,5 在前三个索引剩余包含 0

现在下一个数字应该是 2 并且数组将有 1,2,3,5 前四个索引剩余包含 0

现在下一个数字应该是 4 并且数组将有 1,2,3,4,5 剩余的前五个索引包含 0

现在下一个数字应该是 6，并且数组在前六个索引上将有 1,2,3,5,6 剩余包含 0

```
function findNextNumber(numArry) {
    var number = 1;
    var tempArray = new Array();
    for (i = 0; i < 10; i++) {
        tempArray[i] = "E";
    }
    $.each(numArry, function () {
        if (this != 0) {
            tempArray[this] = "F"
        }
    });
    $.each(tempArray, function (index) {
        if (this == "E") {
            number = index + 1;
            return false;
        }
    });
    return number;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:47:33.833

```
 function nextHole(array,until) {
      this.array=array;
      this.lastIndex=0;
      this.lastItem=0;
      this.until=until;
      this.loopFinished=false;
      this.done=false;
      this.reset = function(){
          this.lastIndex=0;
          this.lastItem=0;
          this.done=false;
          this.loopFinished=false;
      }

      this.getNext = function(){

        if (this.done){
            return null;
        }

        if (!this.loopFinished){                
            for(loop=this.lastIndex;loop<this.array.length ;loop++){
                if (this.array[loop]!=this.lastItem+1){

                    this.lastItem++;
                    this.lastIndex=loop;
                    if (this.lastItem>until)
                        break;

                    return this.lastItem;
                }else{
                    this.lastItem=this.array[loop];
                }

            }

        }
        this.loopFinished=true;
        if (this.lastItem < this.until){
            return (++this.lastItem);
        }
        this.done=true;
        return null;
      }

    }

    var h = new nextHole([1,2,5,6,7,15],10);
    while(true){
        var n = h.getNext();
        if (n == null){
            break;
        }else{
            console.log(" yield: "+n);
        }
    }

    h.reset();
    while(true){
        var n = h.getNext();
        if (n == null){
            break;
        }else{
            console.log(" yield: "+n);
        }
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:40:25.000

我错了还是只是以下？

```
function formula(n){ return n+1; }
var sequence = [1,3,5,0,0,0,0,0,0,0];
var i=0;
function findNextNumber() {
    for (; i<10; i++) {
        var x = formula(i);
        if (sequence[i] != x) {
            sequence.splice(i, 0, x); // insert x here
            sequence.length = 10; // chop of rest
            return x;
        }
    }
    // else
    return null/undefined/whatever;
}

> findNextNumber()
2
> findNextNumber()
4
> findNextNumber()
6
> findNextNumber()
7
> findNextNumber()
8
> findNextNumber()
9
> findNextNumber()
10
> findNextNumber()
whatever 
```

# php - 基本 PHP if 语句回显问题

> ID：14958915
> 
> 赞同：0
> 
> 时间：2013-02-19T13:38:13.540
> 
> 标签：php, if-statement, echo, opencart

我有一个问题要检查，如果产品附加了一些选项，我希望列表中的输出有所不同。

所以我希望输出如下：

如果产品附加了选项，则其格式应如下所示：

起价：1.99 英镑

如果产品没有附加选项，则应采用如下格式：

价格：1.99 英镑

Price From: 和 Price: 这两个词已本地化并从单独的 PHP 文件中提取。

我不确定我哪里出错了，但这是我的代码：

```
<li>
<?php if(count($options)>1): ?>

<span class="normal"><?php echo $text_price_from; ?></span>

<?php else: ?> 

<span class="normal"><?php echo $text_price; ?></span>

<?php endif; ?>

<span class="price"><?php echo $price; ?></span>
</li> 
```

在我的 HTML 输出中，它只是将 span 显示为空。

奇怪的是，如果我只是在第一个跨度中静态地编写工作，它就可以工作。例如，这有效：

```
<li>
<?php if(count($options)>1): ?>

<span class="normal">From:</span>

<?php else: ?> 

<span class="normal"><?php echo $text_price; ?></span>

<?php endif; ?>

<span class="price"><?php echo $price; ?></span>
</li> 
```

有人有什么想法吗？该平台是 OpenCart。

谢谢梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:14:20.373

您的语言文件需要有一个

```
$_['text_price_from'] = 'From:'; 
```

你的控制器需要有

```
$this->data['text_price_from'] = $this->language->get('text_price_from'); 
```

这很可能是问题所在 - 您错过了其中一个难题。如果不是，那么唯一的其他解释是在语言文件、控制器或可能的模板中未设置变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:39:58.823

尝试 var_dump 这些变量，看看你得到了什么。

```
var_dump(count($options) > 1, $text_price_from, $text_price); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:56:16.297

您应该检查是否`$text_price_from`有值或已设置。即使条件合适，如果变量为空，它也不会显示任何内容。

# php - mysqli_connect() 显示错误

> ID：14958916
> 
> 赞同：1
> 
> 时间：2013-02-19T13:38:13.223
> 
> 标签：php, apache, mysqli

我已经在 php 中编写了代码，并且完美地安装和配置了 apache 和 mysql

```
<?php
echo "entering db php code";
$link=mysqli_connect ('localhost','root','MyRootPassword');
echo "mysqli_connect is called";
if (!$link)
{
    echo "cannection is failed";
    exit();    
}
echo "connection is ok";
?> 
```

它导致错误。这是::

```
Warning: mysqli_connect() [function.mysqli-connect]: 
Headers and client library minor      version mismatch. Headers:50051 
Library:50168 in C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\db.inc.php on line 3 
```

请告诉这个警告是什么意思。我怎么了？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-22T09:22:17.687

您可以通过在调用 mysqli_connect 之前添加“@”来抑制警告，例如

```
$link = @mysqli_connect ('localhost','root','MyRootPassword'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T04:51:16.967

Try this:

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:42:30.833

你可能应该看看[这个答案](https://stackoverflow.com/a/6212920/1765877)，你的 MySQLi 扩展很可能没有正确安装。

# php - 下拉菜单中文件夹中的所有图像

> ID：14958918
> 
> 赞同：0
> 
> 时间：2013-02-19T13:38:21.170
> 
> 标签：php

我想使用 PHP 在一个可选择的下拉菜单中列出一个文件夹中的所有图像。（以图像名称作为标签）。当我选择图像并保存表单时，我需要检索 URL（或只是带有扩展名的图像名称）以使用`<img src=""/>`.

那可能吗？如果是，我该怎么做？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:49:56.010

[`glob()`](http://www.php.net/glob)可用于抓取目录中的图像文件。然后，您可以循环它们以创建您的`<select>`元素。

```
$images = glob("images/*.{jpg,gif,png}", GLOB_BRACE);

echo '<select name="image">';
foreach($images as $image)
{
    echo '<option>' . basename($image) . '</option>';
}
echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:07:33.113

是的，这是很有可能的。

您可以使用[glob 函数](http://php.net/manual/en/function.glob.php)执行以下操作：

```
$dropdown = "<select name='image'>\n";
foreach (glob('*.{gif,jpg}', GLOB_BRACE) as $filename) {
    $dropdown .= "<option value='$filename'>pathinfo($filename, PATHINFO_FILENAME)</option>\n"
}
$dropdown .= "</select>\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T07:34:41.793

只有名称在下拉不会解决问题。正如名称一样，我们不确定附加了哪些图像。为此，我们需要在下拉选项中显示图像。为此，您可以使用此 Jquery 插件[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)这将在下拉菜单中显示图像。

# c++ - Windows Phone 8 流媒体

> ID：14958919
> 
> 赞同：0
> 
> 时间：2013-02-19T13:38:22.343
> 
> 标签：c++, windows-phone-8, fstream

在使用本机 C++ 开发 Windows Phone 8 应用程序时，我试图从文件中读取并写入文件。

为了阅读我使用的文件：

```
ifstream inputFile;
inputFile.open(fileName);

string text;
while(!inputFile.eof())
{
    string line;
    getline(inputFile, line);
    text += line;
} 
```

效果很好。但是无论我尝试什么，写入文件都不起作用。例如：

```
ofstream outputFile;
outputFile.open("test.txt", ios::out);
outputFile << "asd" << endl;
outputFile.close(); 
```

甚至不创建此文件。如果我尝试使用与读取输入相同的文件，它也不起作用。我还尝试创建一个空文件并使用该文件，但没有成功。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:26:04.463

作为应用程序安装的一部分，您可以读取部署到手机的任何文件，但您需要查找这些文件的绝对路径。

在 C++（实际上是 C++/CX 扩展）中，您可以使用以下命令查找应用的安装位置：

```
auto appInstallDirectory = Windows::ApplicationModel::Package::Current->InstalledLocation->Path; 
```

您还可以在 Windows Phone 中读取/写入应用程序的本地文件夹。您可以使用以下命令找到它的位置：

```
Platform::String^ localfolder = Windows::Storage::ApplicationData::Current->LocalFolder->Path; 
```

您不得在这些位置之外读取/写入文件。

# css - 为 div 和所有子节点设置不同的样式表？

> ID：14958925
> 
> 赞同：3
> 
> 时间：2013-02-19T13:38:38.457
> 
> 标签：css, stylesheet, encapsulation

我想知道是否有可能让 div 忽略文档中的所有 css 规则，而是为自己及其所有子节点使用不同的样式表。

一个小例子：

```
<html>
    <head>
        <style>
            div{color:red}
        </style>
    </head>
    <body>
        <div>This is red text</div>
        <div stylesheet="/path/to/my/stylesheet.css">
            This is text in a color defined in the other stylesheet
            <div>This is also not red</div>
        </div>
    </body>
</html> 
```

如您所见，我想直接在 div 上定义样式表，而不是全局定义。有没有办法做这样的事情？

我想要实现的是对我的代码的更多封装。我知道还有像伪命名空间这样的可能性，但这很丑陋，仍然不能保证没有冲突......

**更新**

与此同时，我发现了样式元素的“作用域”属性，它的作用与我所要求的非常相似。但是几乎没有浏览器支持它。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:28:03.043

`<style scoped>`如果没有属性，您将无法执行此操作。而且，正如你所说，这是非常不受支持的。[这是 GitHub 上用于范围样式的 jQuery 插件](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)，它推动了对更多浏览器的支持。您还可以`@import other-stylesheet.css`使用此 jQuery 插件在您的范围样式定义中。

尽管如此，考虑到所有因素，在一个元素上使用多个类实际上可能会更好。给一个 div 上几个类，你就可以相当体面地组织你的项目。类似的东西`<div class="parent child grandchildren-1">`只会被这个css选择：

```
.parent.child.grandchildren-1 { color:red; } 
```

# php - PHP - 仅使用工作时间的日期/时间差

> ID：14958930
> 
> 赞同：0
> 
> 时间：2013-02-19T13:38:52.857
> 
> 标签：php, time, timestamp, datediff, hour

我正在尝试创建一个函数来计算两次之间的时间差，但只包括工作时间。这适用于跟踪完成工作所需时间的项目。

工作时间为周一至周五上午 9 点至下午 5 点。

*   示例 1
    如果作业从下午 4:50 开始，并且有人在第二天上午 10 点查看该页面，则计时器将显示 1h 10m 0s。
*   示例 2
    如果作业在下午 6:23 开始，并且有人在第二天上午 9:30 查看页面，则计时器将显示 30m 0s。
*   示例 3
    如果工作在星期五下午 1:20 开始，并且有人在下午 4 点查看非星期二的页面，则计时器将显示 18h 40m 0s。（不包括周六和周日！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:59.277

这可能有点压倒性，但在链接中@Amine Matmati 提供了您需要的所有工具。有了它，您可以轻松地浏览从开始时间戳到现在的每一天，并跳过周末和下班时间。

这有点笨拙，但它会工作。

`strtotime(str, timestamp)`接受一个字符串，该字符串几乎是简单的英语命令，如果需要，还需要一个参考时间戳。这就是您从当前时间戳一直运行到结束时间戳的方式。

IE。`strtotime('end of the working day', timestamp of when the job started);`

*[注意：'end of the day' 不是一个可接受的字符串，请查看底部 PHP 手册的链接，我只是想让你看看它对你有什么用处]*

因此，如果您构建了一个从原始时间戳到现在的循环，您可以计算您所走的工作小时数。

我将向您展示伪代码中的逻辑：

```
$Present is present timestamp;
$Start is the starting timestamp;
$Hours will be the accumulated working hours between starting timestamp and present timestamp;

loop while present timestamp not reached {

if $Start does not occur on the same day as $Present{
  if $Start occurs inside of working hours {
    find the time to the end of the working day;
    add that time to $Hours;
  }

  find next day;
  if the next day is Saturday{
    update $Start to the working start of next Monday;
  }
  else{
    update $Start to the working start of the next day;
  }
}
else{
  find the time between $Start and $Present;
  add that time to $Hours;
  update $Start to $Present or Break;
  }
} 
```

**它确实假设**开始时间不会出现在周末，并且不会出现在与当前时间戳同一天的工作时间之外（即之前），但控制这些非常容易。

在这方面将成为您朋友的事情是：

@Amine Matmati 的链接：[忽略周末时间的两个日期之间的时差](https://stackoverflow.com/questions/2091838/time-difference-between-2-dates-ignoring-weekend-time)

PHP 日期（）：[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)
PHP strtotime（）：[http ://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

**快乐编码！**

# php - 提取最后一个字符

> ID：14958933
> 
> 赞同：1
> 
> 时间：2013-02-19T13:38:56.990
> 
> 标签：php

我正在尝试提取字符串中的最后两位数字。首先，我删除所有空格或特殊字符并用连字符替换它们，然后如果有两个连字符相互跟随，我将它们删除。ext 我删除任何尾随连字符。接下来我想提取字符串中 lat 连字符后的最后两个字符。例如，如何提取此字符串中的最后一个字符，即`1`最后一个连字符之后？`awesome-page-1`. 我的代码在这里

```
$string = 'awesome page@1';
  $slug = preg_replace('/[^a-zA-Z0-9]/', '-', $string);//replace spaces and special characters with space
        $slug = preg_replace('#-{2,}#', '-', $slug);//two hyphens following each other
        $slug = trim($slug, '-');//remove trailing hyphens 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:42:54.410

您可以使用`strrchr()`找到创建的 slug 中的最后一个破折号，然后使用`substr()`.

```
$slug = trim(preg_replace('/[^a-z0-9]+/i', '-', $string), '-');

echo substr(strrchr($slug, '-'), 1); 
```

*如果 中没有破折号`$string`，结果将为空*

[**演示**](http://codepad.viper-7.com/LINBKG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:52:34.253

您可以使用数组作为参数`preg_replace`；

```
$str  = 'awesome            page........@1';
$slug = preg_replace(
    array('~[^a-zA-Z0-9-]~', '~-+~'),
    '-',
    trim($str)
);
print $slug; // awesome-page-1

preg_match('~-([^-]*)$~', $slug, $m);
print $m[1]; // 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:54:14.367

或者，如果您只想匹配连字符后的最后一个字符是数字：

```
$slug = trim(preg_replace('/[^a-z0-9]+/i', '-', $string), '-');
if (preg_match('/^.*-(\d+)$/', $slug, $matches)) {                                                                                               
    echo $matches[1];                                                                
} else {                                                                             
    echo 'No Match!';                                                                
} 
```

# mysql - 从表中选择返回一组值但忽略次要条件

> ID：14958935
> 
> 赞同：0
> 
> 时间：2013-02-19T13:38:59.763
> 
> 标签：mysql

我正在尝试编写一个 SQL 语句来检查我的数据库中房间的可用性。它需要完成以下工作：

1) 检查**ts_roompref**、**ts_room**和**ts_request**看房间是否被预订

*   如果房间根本没有被预订，那么在**ts_roompref**中检查**ts_room_pref.request_id**并与 ts_request.id 进行比较**时**，将找不到**ts_request中的 day_id 和****period_id**。
*****   在找不到房间入口的情况下（即没有被请求），那么房间是免费的****

 ****2）如果对比**ts_request**和**ts_roompref后发现了****day_id**和**period_id**的值，那么说明我们需要查找**ts_allocation**表来查看房间的状态

 *******   如果请求状态为“Pending,Failed,Declined”，则表示该房间尚未分配，仍然可用
*   但是，如果任何请求状态 = 其他任何内容，则表示房间已被分配。

我已经挣扎了几个小时试图实现这个逻辑。到目前为止，这是我所做的有效的工作：

```
select 1- count(distinct rp.Id) from 
ts_roompref rp, ts_request rq
where rp.room_id= "D.0.02" AND rq.id = rp.request_id
AND day_id like "1" AND period_id like "1"; 
```

上面的代码没有考虑到这个事实可能是 Pending、Allocated 或 Declined。如果可以找到 request_id，它只是假设房间已被预订。如何改进它以检查请求状态（如有必要）？

这是我的 SQL 小提琴：[http ://sqlfiddle.com/#!2/e1021/48](http://sqlfiddle.com/#!2/e1021/48)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:41:58.013

查询中的“LIKE”条件附近应该有百分号

```
... day_id LIKE "%1%" AND period_id LIKE "%1%"

```**********

# ios - 从 JSON 数据创建一个 NSArray

> ID：14958938
> 
> 赞同：1
> 
> 时间：2013-02-19T13:39:01.913
> 
> 标签：ios, objective-c, json, core-plot

我有一些 JSON 格式的数据，如下所示：

```
{"YrMonth":201109,"StrYrMonth":"Sep-2011","Value":"49275.14"}
{"YrMonth":201110,"StrYrMonth":"Oct-2011","Value":"52087.22"}
etc... 
```

使用`NSJSONSerialization`我将这些数据存储在一个名为“indicator”的数组中。当我想使用这些数据并在 tableView 中只显示键为“Value”的项目时，我可以做到这一点：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    cell.textLabel.text = [[indicator objectAtIndex:indexPath.row] objectForKey:@"Value"];
    return cell;
} 
```

我的问题是：如何创建一个可以在外部使用`cellForRowAtIndexPath`每个键的值的数组？例如：

```
An array for key "StrYrMonth" which contains only: "Sep-2011", "Oct-2011", etc...
An array for key "Value" which contains only: "49275.14", "52087.22", etc... 
```

我最终想做的是使用“Value”数组在 CorePlot 中绘制一条线，并使用“StrYrMonth”数组来定义图形的 de x 轴标签。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:44:42.700

您可以使用键值编码和`[NSArray valueForKey:]`方法（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/valueForKey%3a)）

```
NSArray *strYrMonthArray = [indicator valueForKey:@"StrYrMonth"];
NSArray *valueArray = [indicator valueForKey:@"Value"]; 
```

# javascript - 如何提醒从jquery自动完成中选择的类别

> ID：14958942
> 
> 赞同：0
> 
> 时间：2013-02-19T13:39:04.423
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery`catcomplete`从具有不同类别的数据库中返回数据。如何从所选值中提醒类别。

下面的行返回`[object Object]`，而不是`Catagory`

```
select: function( event, ui ) { alert(ui.item); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:44:14.733

永远不要依赖`alert`打印任何有用的东西。改为使用`console.log`。

```
select: function( event, ui ) {
    console.log(ui.item.category);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:44:11.133

使用 ui.item.value

```
select: function( event, ui ) { alert(ui.item.value); } 
```

工作 JS Fiddle [http://jsfiddle.net/aiioo7/qpHWv/](http://jsfiddle.net/adiioo7/qpHWv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T13:46:27.193

你应该得到`Value`的`Object`

```
alert(ui.item.value); 
```

# c# - 查找列表的所有排列 >

> ID：14958944
> 
> 赞同：1
> 
> 时间：2013-02-19T13:39:14.517
> 
> 标签：c#, permutation

我遇到了一种情况，我需要找到一个 List of doubles 列表的所有排列，如下所示：

```
List<double> A = new List<double>(){ 1, 2, 3};
List<double> B = new List<double>(){ 10, 20, 30};
List<double> C = new List<double>(){ 100, 200, 300}; 
```

需要给我：

{(1,10,100),(1,10,200),(1,10,300),(1,20,100),(1,20,200),(1,20,300)...}

我可以为固定数量的列表做到这一点，但我想要通用解决方案的灵活性（和简洁性）。我找到了处理单个列表排列的答案，但没有从每个列表中选择一个选项，如上所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:56:52.413

扩展 Ani 的评论：我也使用 Eric Lippert 的解决方案来解决这类问题。（我只真正将它用于对少量数据的所有可能组合进行单元测试。）

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Demo
{
    public static class Program
    {
        static void Main(string[] args)
        {
            var a = new List<double> { 1, 2, 3 };
            var b = new List<double> { 10, 20, 30 };
            var c = new List<double> { 100, 200, 300 };

            var lists = new List<List<double>> {a, b, c};

            foreach (var combination in Combine(lists))
            {
                Console.WriteLine(asString(combination));
            }
        }

        static string asString(IEnumerable<double> data)
        {
            return "(" + string.Join(",", data) + ")";
        }

        /// <summary>
        /// Calculates the n-ary Cartesian Product (i.e. all possible combinations) of items taken from any
        /// number of sequences.
        /// </summary>
        /// <typeparam name="T">The type of the items in the sequences.</typeparam>
        /// <param name="sequences">The sequences to combine.</param>
        /// <returns>An enumerator that yields all possible combinations of items.</returns>
        /// <remarks>
        /// This code is taken from http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx
        /// 
        /// If the sequences are ABC and 123, the output will be A1, A2, A3, B1, B2, B3, C1, C2, C3.
        /// </remarks>

        public static IEnumerable<IEnumerable<T>> Combine<T>(IEnumerable<IEnumerable<T>> sequences)
        {
            IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() };

            return sequences.Aggregate(
              emptyProduct,
              (accumulator, sequence) =>
                from accseq in accumulator
                from item in sequence
                select accseq.Concat(new[] { item }));
        }
    }
} 
```

# ios - iOS 是否删除了 Content-MD5 HTTP 标头？

> ID：14958945
> 
> 赞同：1
> 
> 时间：2013-02-19T13:39:16.197
> 
> 标签：ios

我使用了一个返回 Content-MD5 标头的 Web 应用程序，但在我的 iOS 应用程序中，我无法使用该标头检索该标头`[NSHTTPURLResponse allHeaderFields]`（而使用 cURL 时我可以看到它）。

有谁知道iOS是否故意删除该标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:00:59.313

所以我已经弄清楚发生了什么。

默认情况下，我们的 SaaS 提供商已在非生产实例上激活 gzip。正如在其他一些线程中提到的，[NSURLConnection 透明地支持 gzip 压缩](https://stackoverflow.com/questions/2682483/nsurlconnection-nsurlrequest-gzip-support)，并会自动发送`Accept-Encoding: gzip`HTTP 标头。收到响应后，`NSURLConnection`解压缩内容并删除 Content-Md5 标头（因为 Content-MD5 是压缩数据的哈希），这就是为什么我在收到的标头列表中看不到它的原因。

# generics - 在java中混合泛型和非泛型集合

> ID：14958953
> 
> 赞同：3
> 
> 时间：2013-02-19T13:39:43.743
> 
> 标签：generics

我在混合通用和非通用集合时面临两难境地。例如：这是新的 java 5/6 通用代码。

```
List<Integer> list = new ArrayList<Integer>();
list.add(5);

Alpha a = new Alpha();
a.insert(list);

for (Integer integer : list) {
System.out.println(integer);      //will get classCastException
} 
```

非通用遗留代码

```
public class Alpha {
    public void insert(List list) { 
    list.add(new String("50"));
    }
} 
```

我知道我会在运行时得到 classCastException。但即使在添加字符串/狗之后，我也想打印列表的所有元素。有人可以建议我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:43:50.603

当然 - 你只需要避免编译器为你插入一个演员：

```
import java.util.ArrayList;
import java.util.List;

public class Test {

    public static void main(String[] args) {
        // Nice strongly-typed list...
        List<Integer> list = new ArrayList<Integer>();
        list.add(5);

        // Now abuse it...
        List raw = list;
        raw.add("Bad element");        

        // Don't use the "integer" part, effectively...
        for (Object x : list) {
            System.out.println(x);
        }
    }
} 
```

现在编译器没有将每个元素强制转换为`Integer`，所以我们没事。

**但是**- 如果您需要这样做，则表明您的代码从根本上有点损坏。您最好进行修复`Alpha`以避免将意外项目添加到列表中。

# .net - 修复 在使用数据注释生成模型期间检测到一个或多个验证错误

> ID：14958961
> 
> 赞同：1
> 
> 时间：2013-02-19T13:39:59.937
> 
> 标签：.net, sql, ef-code-first

我正在使用 Sql 2008 r2 和 Visual Studio 2010 和 EF 4.4。而且我在运行代码时遇到了这个错误。代码应该解释数据库关系。

> **在模型生成期间检测到一个或多个验证错误：** \tSystem.Data.Entity.Edm.EdmAssociationConstraint: : 关系约束中 >Dependent 和 Principal Roles 中的属性数量必须相同。

我想使用数据注释解决这个问题。我在做什么？

'提供

```
 Public Class Offer

        <Key(), DatabaseGenerated(DatabaseGeneratedOption.None)>
        Public Property Offer_ID As Integer
        Public Property Name As String

    End Class 
```

'头

```
Public Class Head

    <Key(), Column(Order:=0), DatabaseGenerated(DatabaseGeneratedOption.None)>
    Public Property Head_ID As Integer

    <ForeignKey("Offer_ID")>
    Public Property Offer As Offer

    <Key(), Column(Order:=1)>
    Public Property Offer_ID As Integer

    Public Property Name As String

End Class 
```

'线

```
 Public Class Line

        <Key(), Column(Order:=0), DatabaseGenerated(DatabaseGeneratedOption.None)>
        Public Property Line_ID As Integer

        <ForeignKey("Head_ID")>
        Public Property Head As Head

        <Key(), Column(Order:=1)>
        Public Property Head_ID As Integer

        <ForeignKey("Offer_ID")>
        Public Property Offer As Offer

        <Key(), Column(Order:=2)>
        Public Property Offer_ID As Integer

        Public Property Name As String

   End Class 
```

'数据库上下文

```
 Public Class DatabaseContext
        Inherits DbContext

        Public Sub New(p_ConnectionString As String)
            MyBase.New(p_ConnectionString)
        End Sub

        Public Property Offers As DbSet(Of Offer)
        Public Property Heads As DbSet(Of Head)
        Public Property Lines As DbSet(Of Line)

    End Class 
```

'创建一个简单的例子

```
 Private Shared Sub CreateME()

        Dim offer As New Offer
        offer.Name = "Offer1"
        offer.Offer_ID = 1

        Dim head As New Head
        head.Head_ID = 1
        head.Name = "head1"
        head.Offer = offer
        head.Offer_ID = offer.Offer_ID

        Dim line As New Line
        line.Head = head
        line.Head_ID = head.Head_ID
        line.Line_Id = 1
        line.Name = "line1"
        line.Offer = offer
        line.Offer_ID = offer.Offer_ID

        Using context = New DatabaseContext(GetConnectionString())

            context.Offers.Add(offer)
            context.Heads.Add(head)
            context.Lines.Add(line)
            context.SaveChanges()
        End Using

    End Sub 
```

**所以问题是我可以使用数据注释来解决这个问题吗？**

我是否必须使用此处解释的模型构建器： [如何修复：关系约束中的从属角色和主要角色中的属性数量必须相同？](https://stackoverflow.com/questions/11754842/how-to-fix-the-number-of-properties-in-the-dependent-and-principal-roles-in-a-r)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:24:22.220

首先，我认为您的数据库关系是这样的，对吗？

![数据库关系](../Images/74e6e3c9ef236a8f96057f397edda94e.png)

*   `Offers`有一个简单的主键`Offer_ID`
*   `Heads`有一个复合主键`Head_ID`和`Offer_ID`
*   `Heads`有一个外键`Offers`
*   `Lines`有一个复合主键`Line_ID`,`Head_ID`和`Offer_ID`
*   `Lines`有一个外键`Heads`

假设我在阅读您的问题时是正确的...

* * *

你的代码几乎是完美的。唯一的事情就是`Line`课堂。您在这里指定：

```
<ForeignKey("Head_ID")>
Public Property Head As Head 
```

但你需要：

```
<ForeignKey("Head_ID, Offer_ID")>
Public Property Head As Head 
```

全部归结为一个棘手的逗号分隔字符串！

原因是 Heads 上的主键是复合的，因此您必须指定所有列以使关系正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:40:51.900

您的 Head 类有一个由 Head_Id 和 Offer Id 组成的外键。您的 Line 类需要通过由 Head Id 和 Offer Id 组成的外键引用 Head。

您可以使用数据注释和列顺序语法。您应该能够在 MSDN 上找到确切的语法。

# javascript - navigator.onLine 在 Firefox、Safari、Opera 中不起作用？在 IE、Chrome 中工作？

> ID：14958964
> 
> 赞同：1
> 
> 时间：2013-02-19T13:40:05.897
> 
> 标签：javascript, ajax, servlets, dom-events

在我的聊天应用程序中，当 Internet 连接处于非活动状态时，我需要给用户一个提示？

所以我使用了 JavaScript **navigator.onLine**，但它适用于 IE 和 Chrome。不在其他浏览器中。

我的 JavaScript 将是：

```
function pingAction(){
    if (navigator.onLine) {
        setTime();
        try
        {
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    var checkMsg = xmlhttp.responseText.toString();

                    if(checkMsg != "null" && checkMsg.length != 0  && checkMsg != null){

                        var stringToArray = new Array;
                        stringToArray = checkMsg.split("<//br//>");
                        var len = stringToArray.length;
                        for(var i=0;i<len-1;i++){
                            //alert(stringToArray[i]);
                            getText(stringToArray[i]);

                        }

                    }
                }
            };

            xmlhttp.open("POST","PingAction",true);
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.setRequestHeader("charset","UTF-8");
            xmlhttp.send("userId="+encodeURIComponent(userId)+"&secureKey="+encodeURIComponent(secureKey)+"&sid="+Math.random());
        }
        catch(err)
        {
            alert(err.description);
        }
    }else{
        //alert("offLine   ...");
        document.getElementById("serverMsg").style.backgroundColor="yellow";
        document.getElementById("serverMsg").innerHTML ="Your Network connection is failed !";
        document.getElementById("serverMsg").style.display="inline";
    }
} 
```

希望各位大侠给个好的解决方案。

# c# - ADO.NET EF Code First - 当我们有两个具有 1:N 关系的表时添加虚拟数据

> ID：14958967
> 
> 赞同：1
> 
> 时间：2013-02-19T13:40:18.627
> 
> 标签：c#, .net, ado.net-entity-data-model

我的数据库中有这两个表 -

`Material`：

```
public class Material
    {
        [Required]
        [MaxLength(10)]
        public string Code { get; set; }

        [MaxLength(40)]
        public string Color { get; set; }

        [MaxLength(40)]
        public string Description { get; set; }

        [MaxLength(255)]
        public string Picture { get; set; }

        public long MaterialTypeId { get; set; }
        public virtual MaterialType MaterialType { get; set; }

    } 
```

和`MaterialType`：

公共类 MaterialType { [MaxLength(40)] 公共字符串 MatType { get; 放; }

```
public virtual ICollection<Material> Materials { get; set; } 
```

}

然后我调用一个方法，用虚拟数据填充我的所有表，但问题是`Foreign Key`不能为空，而且我仍然没有明显生成数据。我试图更改调用创建虚拟数据的方法的顺序，但这似乎不起作用。我想知道有没有什么简单的方法可以解决这个问题，或者我不知道如何管理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:42:23.913

因此，在我的情况下，虚拟数据是在创建数据库时创建的，以解决不能为空的外键的问题，最简单的方法是将属性的类型显式设置为`nullable`. 就像我的代码一样`long?`。这允许我使用 null FK 用数据填充表，然后设置我需要的值。

# c# - LuaInterface C#：dostring 与 dofile。是否值得将一个将被多次调用的脚本加载到内存中？

> ID：14958968
> 
> 赞同：4
> 
> 时间：2013-02-19T13:40:20.687
> 
> 标签：c#, lua, luainterface

谁能告诉我我是否可以通过加载一个 lua 脚本来合理地期望任何性能提升，该脚本将被重复调用到内存中以通过 LuaInterface 的**`dostring()`**功能而不是执行来执行**`dofile()`**？

我是否正确地假设这会通过减少每次迭代的文件系统访问来更好地执行？

有没有办法在**Lua VM**中缓存脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:37:14.953

> 我是否正确地假设这会通过减少每次迭代的文件系统访问来更好地执行？

通常，您应该进行基准测试而不是假设，但这非常简单：“磁盘 IO，编译，执行”与“执行”。当然后者会更快。

> 有没有办法在 Lua VM 中缓存脚本？

无论您`dofile`还是`dostring`您的脚本生成的任何全局变量都可供您阅读/调用。如果您想避免您的脚本修改 VM 的全局命名空间，您可以公开一个 API 例程（在主机中），您的脚本可以调用该例程来注册回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:47:14.150

如果你想多次执行一些lua代码，更好的方法是使用LoadFile OR LoadString。将 lua 代码加载为 LuaFunction，例如：

```
LuaFunction lf = xxx.LoadString("some lua code");   // xxx is an instance of LuaInterface
lf.Call();   // you can also deliver some arguments 
```

这比 DoFile 和 DoString 快得多。因为它只需要编译一次。

# vb.net - 名称“AdobeReader”未声明 vb.net

> ID：14958975
> 
> 赞同：0
> 
> 时间：2013-02-19T13:40:31.587
> 
> 标签：vb.net, adobe-reader

我正在尝试遵循教程，但我不断收到警告：

> 未声明名称“AdobeReader”

有人能告诉我什么是错的吗？该教程可在[此处](http://go4answers.webhost4life.com/Example/open-pdf-file-vbnet-applicatin-124401.aspx)找到，我正在尝试从该页面尝试答案 2，其中说：

> 这是另一种阅读pdf的方法。
> 
> 右键单击工具箱中的任何选项卡，然后单击选择项目。（只需确保在开始之前安装了 adobe reader 版本。）当对话框弹出时，单击“com components”选项卡，然后选择“adobe pdf”读者的 com 组件。单击确定，您现在应该在工具箱中看到一个“adobe pdf reader”控件。单击它并将其拖到您的 vb 表单中。（您可能需要调整它的大小，通常看起来很小）。现在，为了阅读任何 pdf，只需在代码或设计器中更改控件的“src”属性。当您运行该程序时，您应该能够使用您在 adobe reader 中获得的大多数选项以 vb 形式查看 pdf 文档。以下是如何更改代码中的“src”属性。

```
PrivateSub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) HandlesMyBase.Load 
    AdobeReader.src = "C:\mydoc.pdf"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:50:26.493

如果我的问题正确，您只想打开一个 PDF 文件。只需调用：

```
Process.Start("Path/To/MyPdfFile.pdf") 
```

# python - 比较 Python 中的日期 - 如何处理时区修饰符

> ID：14958976
> 
> 赞同：0
> 
> 时间：2013-02-19T13:40:33.267
> 
> 标签：python, date, datetime, python-2.7

我正在做 Python 日期比较：

假设我有这样的日期：`'Fri Aug 17 12:34:00 2012 +0000'`

我以以下方式解析它：

`dt=datetime.strptime('Fri Aug 17 12:34:00 2012 +0000', '%a %b %d %H:%M:%S %Y +0000')`

我在文档页面上找不到如何处理剩余的`+0000`？我想要一个更通用的解决方案，然后是硬编码的值。

也许这很容易，有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:45:00.630

默认`datetime`模块*不能*很好地处理时区；在您当前的机器时区和 UTC 之外，它们基本上不受支持。

您必须为此使用外部库或手动处理时区偏移量。

外部库选项：

*   Use[`dateutil.parser`](http://labix.org/python-dateutil#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c)可以处理您想扔给它的几乎任何日期和/或时间格式：

    ```
    from dateutil import parser

    dt = parser.parse(s) 
    ```

*   该[`iso8601`库](http://pypi.python.org/pypi/iso8601/)仅处理 ISO 8601 格式，其中包括相同形式的时区偏移：

    ```
    import iso8601
    datetimetext, tz = s.rsplit(None, 1)  # only grab the timezone portion.
    timezone = iso8601.iso8601.parse_timezone('{}:{}'.format(tz[:3], tz[3:]))
    dt = datetime.strptime(datetimetext, '%a %b %d %H:%M:%S %Y').replace(tzinfo=timezone) 
    ```

每种方法的演示：

```
>>> import datetime
>>> s = 'Fri Aug 17 12:34:00 2012 +0000'
>>> import iso8601
>>> timezone = iso8601.iso8601.parse_timezone('{}:{}'.format(tz[:3], tz[3:]))
>>> datetime.datetime.strptime(datetimetext, '%a %b %d %H:%M:%S %Y').replace(tzinfo=timezone)
datetime.datetime(2012, 8, 17, 12, 34, tzinfo=<FixedOffset '+00:00'>)
>>> from dateutil import parser
>>> parser.parse(s)
datetime.datetime(2012, 8, 17, 12, 34, tzinfo=tzutc()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T05:59:05.433

您可能还想看看[Delorean](http://delorean.readthedocs.org/en/latest/quickstart.html#truncation)。这是两者的包装`pytz`，`dateutil`它提供时区操作以及简单的日期时间时区转换。

以下是我将如何使用 Delorean 解决您的问题。

```
>>> from delorean import parse
>>> parse("2011/01/01 00:00:00 -0700")
Delorean(datetime=2011-01-01 07:00:00+00:00, timezone=UTC) 
```

从那里您可以通过简单地返回`.datetime`属性来返回日期时间。如果你想做一些时间转换，只需使用 Delorean 对象并做`.shift("UTC")`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T13:46:34.520

使用`dateutil.parser`：

```
>>> import dateutil.parser
>>> dateutil.parser.parse('Fri Aug 17 12:34:00 2012 +0000')
>>> datetime.datetime(2012, 8, 17, 12, 34, tzinfo=tzutc()) 
```

# c++ - 两个 ClutterActor 发生碰撞时如何检测信号？

> ID：14958977
> 
> 赞同：0
> 
> 时间：2013-02-19T13:40:35.990
> 
> 标签：c++, 2d-games, clutter

我想使用 g_signal_connect 检测两个 ClutterActor 的碰撞点。

我需要一些事件来检测它，类似于“输入事件”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T18:08:55.363

Clutter 本身并不能处理演员之间的命中测试。

您想使用 clutter-box2d，它允许 Box2D 物理引擎驱动 Clutter 场景图：[https ://git.gnome.org/browse/clutter-box2d](https://git.gnome.org/browse/clutter-box2d)

# ruby - ruby 将数组转换为函数参数

> ID：14958981
> 
> 赞同：108
> 
> 时间：2013-02-19T13:40:42.333
> 
> 标签：ruby, arrays, function, arguments

假设我有一个数组。我希望将数组传递给函数。然而，该函数需要两个参数。有没有办法即时将数组转换为 2 个参数？例如：

```
a = [0,1,2,3,4]
b = [2,3]
a.slice(b) 
```

会在 Ruby 中产生错误。我需要输入`a.slice(b[0],b[1])`我正在寻找更优雅的东西，如`a.slice(foo.bar(b))` 谢谢。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-02-19T13:46:43.097

您可以使用（或“splat”）运算符将 an`Array`转换为参数列表：`*`

```
a = [0, 1, 2, 3, 4] # => [0, 1, 2, 3, 4]
b = [2, 3] # => [2, 3]
a.slice(*b) # => [2, 3, 4] 
```

### 参考：

*   [数组到参数的转换](http://www.ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html#label-Array+to+Arguments+Conversion)

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2013-02-19T13:42:59.390

用这个

```
a.slice(*b) 
```

它被称为 splat 运算符

# excel - 在 Visual Basic 中将整数打印为字符串

> ID：14958982
> 
> 赞同：4
> 
> 时间：2013-02-19T13:40:44.790
> 
> 标签：excel, vba

在 Visual Basic 中，

我编写了以下代码，但我在以字符串格式打印它时遇到问题，尽管它是整数类型。我试图通过不对 30 多个数字重复相同的事情来节省时间。

```
Dim line As Integer
line = 0

Sub DisplayModule(page As Integer, line As Integer)
maxline = 100    
For line = 0 To maxline
Print #page, Spc(6); "Display in String"
Print #page, Spc(8); "{"
Print #page, Spc(10); """line"""
Print #page, Spc(8); "}"
Print #page, Spc(8); "next"
Next
End Sub 
```

问题 - 它显示：

```
Display in String
{
 line
}
"next line please"
{
 line
}
.
. 
```

我希望它用 "" 显示如下：

```
Display in String
{
 "0"
}
"next line please"
{
 "1"
}
.
. 
```

我在 SO 上找不到类似的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:44:06.797

尝试这个

```
Print #page, Spc(10); chr(34) & line & chr(34) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:44:54.797

尝试

```
Dim line As Integer
line = 0

Sub DisplayModule(page As Integer, line As Integer)
   maxline = 100    
   For line = 0 To maxline
      Print #page, Spc(6); "Display in String"
      Print #page, Spc(8); "{"
      Print #page, Spc(10); """" & line & """"
      Print #page, Spc(8); "}" 
      Print #page, Spc(8); "next"
   Next
End Sub 
```

# hibernate - 我可以将 SQL 更新语句转换为需要更新多行的 HQL 吗？

> ID：14958986
> 
> 赞同：-2
> 
> 时间：2013-02-19T13:40:59.477
> 
> 标签：hibernate, hql

我的问题如下所示。

*   注意粗体部分。

    *update tableName set tableName.fid = '10' where tableName.pid **IN** (:'1','2','3');*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:49:45.593

```
String hqlUpdate = "update Customer c set c.name = :newName where c.name = :oldName"; 
```

请参阅“ [Hibernate 参考文档：DML 样式操作](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct)”

# tsql - 将存储过程的输出插入临时表

> ID：14958989
> 
> 赞同：4
> 
> 时间：2013-02-19T13:41:13.717
> 
> 标签：tsql

尝试将存储过程的输出写入临时表时，我收到错误消息

> 消息 208，级别 16，状态 0，第 4 行
> 无效的对象名称“#tblTemp”。

我的查询是这样的：

```
DECLARE @group_name varchar(250)
SET @group_name = 'somevalue'

INSERT INTO #tblTemp EXEC mySchema.sp_MyStoredProc @group_name OUTPUT

SELECT  *
FROM    #tblTemp 

DROP TABLE #tblTemp 
```

这里有什么问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:59:31.383

要以这种方式使用临时表，`INSERT INTO`您应该首先定义此表。

```
CREATE TABLE #tblTemp(
ID int,
....
) 
```

在 T-SQL 中，可以使用以下命令自动创建临时表：

```
select * into #tblTemp
from table 
```

您可以在存储过程结果中使用此语法，使用`OPENROWSET`.

[这是关于 SO 的答案，可以提供帮助](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:56:35.477

您需要先使用例如`CREATE TABLE`语句创建#temp 表，然后才能创建`INSERT INTO`它。

# mc - 通过 shell 脚本调用内部午夜指挥官 cd

> ID：14958991
> 
> 赞同：0
> 
> 时间：2013-02-19T13:41:33.693
> 
> 标签：mc

我正在尝试使用 shell 脚本将`mc`cd 放入某些目录，无论是 virtualfs 目录（例如 ftp、ssh）还是本地目录。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:43:49.140

`mc`只允许您在其中一个面板中打开请求路径的新实例。对于本地文件，您可以只提供目录作为参数：

```
mc somedirectory 
```

如果您预先添加`sh://`，您也可以在其他机器上打开远程目录：

```
mc sh://user@host/somedirectory 
```

这适用于命令行以及 shell 脚本。

# ruby-on-rails - Rails 助手 - 未定义的方法“数量”

> ID：14958993
> 
> 赞同：0
> 
> 时间：2013-02-19T13:41:52.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试设置一个助手来计算客户购买后剩余的库存量。客户有一些 line_items，产品有一些库存。如此有效地，我尝试执行以下操作。

**方法一**

**助手.rb**

```
module ProductsHelper

  def wtf_stock(product)
    product.stock - product.line_items.quantity.sum
  end
end 
```

**index.html.erb**

```
 <%= wtf_stock(product) %> 
```

这导致以下结果：`undefined method quantity' for #<ActiveRecord::Relation:0x5380cc8>`

或者注释掉助手`ProductsHelper`并`<%= wtf_stock(product) %>`添加

**替代方法**

```
def wtf_stock
    product.stock - product.line_items.quantity
  end 
```

然后我`product.rb`试图通过做`<%= product.wtf_stock %>`. 然后得到以下错误`undefined local variable or method product' for #<Product:0x59fbc50>`

使用我的`stock`和计算剩余库存的最佳方法是什么`quantity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:46:00.493

在你的助手中试试这个：

```
def wtf_stock(product)
  product.stock - product.line_items.sum(:quantity)
end 
```

称呼：

```
wtf_stock(product) 
```

或者对于 product.rb （哪个更好）：

```
def wtf_stock
  stock - line_items.sum(:quantity)
end 
```

称呼：

```
product.wtf_stock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:45:53.347

```
def wtf_stock
    self.stock - self.line_items.quantity
end 
```

使用自我而不是产品。

# ruby-on-rails - 在 Rails around_create 回调中使用事务

> ID：14958998
> 
> 赞同：3
> 
> 时间：2013-02-19T13:42:07.150
> 
> 标签：ruby-on-rails, sqlite, transactions, callback

我有一种情况，我需要在成功创建 'foo' 之后执行 'do_this'，并且在没有错误地执行 'do_this' 时执行 'do_that'，如下所示：

```
class Foo < ActiveRecord::Base

  around_create do |foo, block|
    transaction do
      block.call # invokes foo.save

      do_this!
      do_that!
    end
  end

  protected

  def do_this!
    raise ActiveRecord::Rollback if something_fails
  end

  def do_that!
    raise ActiveRecord::Rollback if something_else_fails
  end

end 
```

并且应该回滚整个事务，以防其中一个失败。

然而问题是，即使 'do_this' 或 'do_that' 失败， 'foo' 也会一直存在。是什么赋予了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:59:51.287

您不需要这样做，如果您将 false 返回到回调，它将触发回滚。编写您想要的代码的最简单方法是这样的

```
after_save :do_this_and_that

def do_this_and_that
  do_this && do_that
end

def do_this
  # just return false here if something fails. this way,
  # it will trigger a rollback since do_this && do_that
  # will be evaluated to false and do_that will not be called
end

def do_that
  # also return false here if something fails to trigger
  # a rollback
end 
```