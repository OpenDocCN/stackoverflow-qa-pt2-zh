# StackOverflow 问答 13233000-13233999

# sql - 非唯一索引上的外键？（甲骨文）

> ID：13233008
> 
> 赞同：5
> 
> 时间：2012-11-05T13:20:46.243
> 
> 标签：sql, oracle, database-design, constraints, data-modeling

我正在尝试在表 A 上创建一个约束，以检查表 B 中是否存在一组记录。我可以使用外键，但问题是表 B 中的数据是非唯一的。

有没有办法在不创建触发器的情况下创建这样的约束？

编辑：我无法更改表 B 结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:29:43.563

外键是 1:N 的关系。在约束的引用端只能有一个父记录。这就是为什么我们只能构建引用唯一键的外键约束。

您似乎想要一个 M:N 的约束。这不适合关系模型。也许您需要一个交集表 (AB)，它将表 A 中的许多记录与表 B 中的许多记录联系起来？实际上，可能有几种不同的建模解决方案，具体取决于您的实际需求。

触发器不起作用，部分原因是它们无法扩展，但主要是因为它们无法在多用户环境中工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T13:30:13.590

一种技术是使用物化视图（提交时快速刷新）来存储被引用列的唯一值，并约束你的表。

由于读取一致性或锁定问题，尝试使用触发器来强制执行完整性通常注定要失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:29:28.523

我很确定强制执行这种关系的唯一方法是使用触发器。

正如您所提到的，表 B 中的数据是非唯一的，因此外键不起作用。（另请参阅[外键可以引用非唯一索引吗？](https://stackoverflow.com/questions/588741/can-a-foreign-key-reference-a-non-unique-index)）

我想到了检查约束，但它们在这里不起作用，因为：

1.  不得引用其他表
2.  不能包含子查询。

* * *

话虽如此，表 B 中的数据不是唯一的原因可能是它没有被规范化。可能值得查看您的模式，看看您是否可以提取 A 和 B 之间的唯一关系，可能使用中间表。

# asp.net-mvc - IsNullOrEmpty 不工作

> ID：13233018
> 
> 赞同：0
> 
> 时间：2012-11-05T13:21:37.030
> 
> 标签：asp.net-mvc, vb.net

我的数据库中有一个空值，如果我尝试对其执行任何数学运算，它会给我一个错误。我试着把它放在我的控制器动作中：

```
If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then
            item.Tbl_Food.Fiber_TD_g = 0
End If 
```

这是我的领域模型：

```
Public Property Fiber_TD_g() As Nullable(Of Double) 
```

但是，它说“可空对象必须有一个值”。上`If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then`线。如何检查“字符串”（它是双精度，而不是字符串）是否为空并将其默认为零，正确吗？

**编辑：**

我在下面尝试了一个建议，但我的控制器中不再出现错误，而是在我的视图中。它说，“可为空的对象必须有一个值。” `FiberTotal += item.Tbl_Food.Fiber_TD_g`在我看来就行了。

```
Dim food = db.Tbl_Food_Logs.Where(Function(x) x.FLog_Employee_ID = empId And x.FLog_Created_Date >= date2 And x.FLog_Created_Date < tomorrow)

For Each item In food

    If IsDBNull(item.Tbl_Food.Fiber_TD_g) Then
        item.Tbl_Food.Fiber_TD_g = 0
    End If

Next
Return View(food) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:26:52.957

顾名思义，`String.IsNullOrEmpty`是一个*字符串*操作。如果您通过`double`. 而是检查它是否`Is Nothing`：

```
If item.Tbl_Food.Fiber_TD_g Is Nothing Then
            item.Tbl_Food.Fiber_TD_g = 0
End If 
```

这个操作很常见，VB 有一个快捷方式，称为*空合并运算符*（2-argument `If`）：

```
item.Tbl_Food.Fiber_TD_g = If(item.Tbl_Food.Fiber_TD_g, 0) 
```

当`If`有两个参数时，如果它不为空，则返回第一个参数，如果为空，则返回第二个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:24:19.183

```
If IsNull(item.Tbl_Food.Fiber_TD_g) Then
        item.Tbl_Food.Fiber_TD_g = 0
End If 
```

或者

```
If Trim(item.Tbl_Food.Fiber_TD_g) Then
        item.Tbl_Food.Fiber_TD_g = 0
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:26:44.237

您可以将字符串 IsNullOrEmpty 视为检查未初始化的字符串变量，而不是检查对象是否为空。我认为您想要这样的东西，以获得最大的安全性。

```
 If Not item Is Nothing Then
        If Not item.TBL_food Is Nothing Then
            If Not item.Tbl_Food.Fiber_TD_g Is Nothing Then
                'do something
            End If
        End If
    End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:28:12.987

将模型部分更改为：

```
public double? Fiber_TD_g { get; set; } 
```

进而

```
item.Tbl_Food.Fiber_TD_g = item.Tbl_Food.Fiber_TD_g.HasValue ? item.Tbl_Food.Fiber_TD_g.Value : 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T13:31:07.050

您还可以检查：

```
If item.Tbl_Food.Fiber_TD_g.Equals(Nothing) Then
   item.Tbl_Food.Fiber_TD_g = 0
End If 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T13:32:51.730

```
item.Tbl_Food.Fiber_TD_g = item.Tbl_Food.Fiber_TD_GetValueOrDefault() 
```

# regex - 正则表达式导入失败

> ID：13233019
> 
> 赞同：3
> 
> 时间：2012-11-05T13:21:47.873
> 
> 标签：regex, haskell, import, compiler-errors

我正在尝试将我的 java 程序翻译成 Haskell。我的目标是将我的字符串分成几个字符串并将它们放在一个列表中。

到目前为止，这是我的代码

```
import Char
import IO
import Text.Regex

translate :: String -> Int
translate input = 
    testcode(splitRegex (mkRegex "\\s") input) 
```

testcode 根据第一个值进行一些测试，例如（在运行中进行此操作还没有到这一步）

```
testcode :: [String] -> Int -> Int
testcode [] 0
testcode (x:xs)  n
     |(x=="test") = 1
     |otherwise = testcode xs 
```

我不断收到的编译错误如下：

```
Could not find module `Text.Regex'
Perhaps you meant Text.Read (from base) 
```

如何导入 Text.Regex？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T13:27:16.573

`Text.Regex`在`regex-compat`包中。你安装了吗？

Cabal 是 haskell 的包管理器：[http ://www.haskell.org/haskellwiki/Cabal/How_to_install_a_Cabal_package](http://www.haskell.org/haskellwiki/Cabal/How_to_install_a_Cabal_package)

要安装 regex 包，请输入以下 shell：

```
cabal install regex-compat 
```

为了找出一个函数属于哪个包，我使用[Hayoo！](http://holumbus.fh-wedel.de/hayoo/hayoo.html)，它是 haskell 包存储库[Hackage](http://hackage.haskell.org/)的搜索引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:34:19.633

首先，[打开命令窗口](http://www.sevenforums.com/tutorials/947-command-prompt.html)并输入`cabal install regex-compat`. 这应该给你能力`import Text.Regex`。

其次，如果再次发生这种情况，请[对库进行 hayoo 搜索](http://holumbus.fh-wedel.de/hayoo/hayoo.html)（全面但不加区分）或[对函数进行 hoogle 搜索](http://www.haskell.org/hoogle/?hoogle=mkRegex)（不全面，但您甚至可以搜索函数的类型）。这样你就可以找出它所在的包，然后安装它。

第三，也许更重要的是，我是否可以建议在 Haskell 中有很好的、强大的方法来做事，这意味着您不需要太多地使用正则表达式。下面是一些例子：

```
words :: String -> [String]
words "Why not use some handy Haskell functions?" 
     = ["Why","not","use","some","handy","Haskell","functions"] 
```

我想`words`给你你既定的目标。您可以使用大量出色的列表处理功能来替换次要的正则表达式作业，例如，混合

```
dropWhile :: (a -> Bool) -> [a] -> [a]
dropWhile (/=',') "Haskell is great, I love it."
     = ", I love it." 
```

和

```
import Data.Char      -- (at the top of your code)
takeWhile :: (a -> Bool) -> [a] -> [a]
takeWhile isAlpha "Well then"
     = "Well" 
```

with `foldr`or`scanr`可以用一种简洁的方式来表达你想要的东西。

通常列表处理功能就足够了，但是如果您手头有更专业的解析，那么优秀的[解析](http://www.haskell.org/haskellwiki/Parsec)库非常有用。它使得编写一个完整的解析器变得非常容易。了解它，因为一旦你这样做了，你就会想使用它而不是其他任何东西。

# php - 捕获 AccountStatusException

> ID：13233026
> 
> 赞同：0
> 
> 时间：2012-11-05T13:22:15.700
> 
> 标签：php, security, symfony, symfony-2.1

我想为实现[AdvancedUserInterface的用户实现自定义逻辑](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/AdvancedUserInterface.html)

我想允许未启用的用户访问某些区域（例如帐户区域，如果他们犯了错误，他们可以在其中更改电子邮件）。

根据文档：

> 如果此接口中的任何方法返回 false，则身份验证将失败。
> 
> 如果您需要为任何这些情况执行自定义逻辑，那么您将需要注册一个异常侦听器并监视每种情况下抛出的特定异常实例。所有异常都是 AccountStatusException 的子类

[因此，我尝试通过将本食谱文章](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)改编为安全事件来创建侦听器：

```
<?php

namespace Acme\DemoBundle\Listener;

use Symfony\Component\Security\Core\SecurityContextInterface;

use Symfony\Component\Security\Core\Exception\AccountStatusException;

class NecdocPatientExceptionListener
{
    public function onKernelException($event)
    {
        // Handle event code goes here
    }
} 
```

我已经将它添加到包的 services.xml 中：

```
services:
    kernel.listener.acme_user_exception_listener:
        class: Acme\DemoBundle\Listener\AcmeExceptionListener
        tags:
            - { name: kernel.event_listener, event: security.authentication.success, method: onKernelException } 
```

这会捕获**AuthenticationFailureEvent**（调用 onKernelException），但不会捕获**AccountStatusException**（不调用 onKernelException）

我一直在寻找安全组件代码，似乎在没有触发任何事件的情况下捕获了异常。有没有办法捕捉这些异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:51:47.613

```
namespace Acme\DemoBundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Security\Core\Exception\AccountStatusException;

class AcmeExceptionListener
{
    public function onKernelException(GetResponseForExceptionEvent $event)
    {
        // We get the exception object from the received event
        $exception = $event->getException();
        $message = 'My Error says: ' . $exception->getMessage() . ' with code: ' . $exception->getCode();

        // Customize our response object to display our exception details
        $response = new Response();
        $response->setContent($message);

        // Checks that the exception is an account status exception
        if ($exception instanceof AccountStatusException) {
            $response->setStatusCode($exception->getStatusCode());
            $response->headers->replace($exception->getHeaders());
        } else {
            $response->setStatusCode(500);
        }

        // Send our modified response object to the event
        $event->setResponse($response);
    }
} 
```

# windows - Cakephp - 使用 Folder::cd() 更改目录（绝对 Windows 路径）不起作用

> ID：13233027
> 
> 赞同：2
> 
> 时间：2012-11-05T13:22:15.627
> 
> 标签：windows, api, cakephp, path, directory

我无法借助来自 cakephp api 的方法 Folder::cd() 或 Folder Constructor 设置绝对 Windows 路径。方法调用后没有错误或消息。

例子

```
//path= C:".DS."Users".DS."User.Name".DS."Desktop".DS."Qualitätssicherung".DS."Testmanagement"
$fol = new Folder($path); 
print_r($fol->errors()); // empty
echo $fol->path; // empty 
```

我尝试过的其他路径定义：

```
C:\Users\User.Name\Desktop\Qualitätssicherung\Testmanagement
C:\\Users\\User.Name\\Desktop\\Qualitätssicherung\\Testmanagement 
```

我应该使用转义或特殊函数来生成有效的路径字符串吗？

PS：我使用的是最新版本的 cakephp :)

## 解决方案

在这里找到：[Stackoverflow](https://stackoverflow.com/questions/7502685/php-file-handling-with-utf-8-special-characters)

问题是路径 var 中的特殊字符**ä**。这段代码处理它：

```
$string = iconv(mb_detect_encoding($string, "auto"), 'Windows-1252', $string); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:11:06.833

IIRC 在 Windows 中的驱动器名称后需要两个反斜杠，所以：`'C:\\Users\User.Name\Desktop\Qualitätssicherung\Testmanagement'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T09:13:30.687

好的，问题是特殊的 char ä 我在这里找到了一个适合我的解决方案：

[堆栈溢出](https://stackoverflow.com/questions/7502685/php-file-handling-with-utf-8-special-characters)

```
$string = iconv(mb_detect_encoding($string, "auto"), 'Windows-1252', $string); 
```

# java - 如何查询一个列表的最大值？

> ID：13233029
> 
> 赞同：0
> 
> 时间：2012-11-05T13:22:20.603
> 
> 标签：java, sql, hibernate

我的库存中有一个清单（在本例中：汽车清单）。我想查询股票并找到汽车列表中可用的最高价格。

```
class Stock {
    List<Car> cars;
}

class Car {
    int price;
} 
```

试过：

```
SELECT DISTINCT s.cars.price FROM Stock s; 
```

但这总是给出“命名查询错误”。可能有什么问题，或者如何才能做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:14:36.687

```
Object maxPrice = session.createQuery("select max(car.price) from Stock s join s.cars car").uniqueResult(); 
```

# sql - 在 tsql 中使用逻辑和进行 xquery 删除

> ID：13233034
> 
> 赞同：0
> 
> 时间：2012-11-05T13:22:42.383
> 
> 标签：sql, xml, sql-server-2008, tsql, xquery

是否可以在存储过程中使用带有 xquery 语句的逻辑 and 运算符来删除一个元素，前提是它的父元素具有特定值并且它具有特定值？如：

```
SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE profiles.value('(Profile/ID)[1]','int')= @profile_id)
    SET @profiles_xml.modify('
    delete
    if(/Profile/User/ID=sql:variable("@user_id")) and (/Profile/User/Activities/Activity/Name = sql:variable("@activity_name"))
    then (/Profile/User/Activities/Activity)
    else()
    ') 
```

仅当用户 ID 元素和活动名称元素与给定参数匹配时，我才想删除活动。profile_xml 中的 xml 如下所示：

```
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile> 
```

但在未来，每个元素中可能会有多个元素，并且将多个元素作为元素的子元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:30:45.823

```
declare @XML xml = '
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile>'

declare @user_id nvarchar(50) = '20'
declare @activity_name nvarchar(50) = 'activity1'

set @XML.modify('delete /Profile[ID = sql:variable("@user_id")]
                        /User/Activities/
                        Activity[Name = sql:variable("@activity_name")]') 

select @XML 
```

# ios - 在 :completion 块上释放对象是否可接受？

> ID：13233035
> 
> 赞同：0
> 
> 时间：2012-11-05T13:22:52.910
> 
> 标签：ios, xcode, memory-management, objective-c-blocks

我有一个动画块，我将 UIView 移离屏幕。在完成块中，我正在释放包含该 UIView 及其子视图的对象。
这是可以接受的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:15:06.243

**作为一般规则：**如果你小心，这不会有意想不到的并发症；在完成块中做这件事是完全可以理解的。

**在你的情况下：**确保你不会过度发布东西。由于无法查看代码，我不确定您何时针对视图的生命周期执行此操作。确保您了解 UIView 被销毁时所执行的过程。这当然值得一读：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

# c - 如何管理由 SSH 触发的批处理脚本中的根操作

> ID：13233041
> 
> 赞同：1
> 
> 时间：2012-11-05T13:23:07.373
> 
> 标签：c, linux, unix, ssh, sh

好的，这是一个棘手的问题：

首先，我有一个在 Unix 机器上运行的非常小的 C 应用程序。此应用程序获取两个参数并尝试在 Linux (Ubuntu) 机器中执行 .sh 文件，如下所示：

`./myapp luke leia`

好的，现在 C 代码或多或少地执行以下操作：

```
char temp[512];
sprintf(temp, "ssh user@server \"sh \\$HOME/save.sh %s %s\"", argv[1], argv[2]);
system((char *)temp); 
```

如您所见，它打开了与我的 Linux 服务器的连接，并在我的“用户”的主文件夹中执行了一个批处理脚本。这是我直接在终端中尝试时的样子：

`ssh user@server "sh \$HOME/save.sh luke leia"`

在我的 Unix 端，我被要求输入 SSH 的密码，它工作得很好。我从我的 Unix 机器中的 save.sh 文件中获得了所有回声，它运行良好，除非我需要 sudo 权限。所以我在我的服务器上尝试了这个：

1.  在服务器中使用，在我输入`sudo visudo`的行下方`%sudo ALL=(ALL) ALL`：

    `%user ALL=(ALL) NOPASSWD: /home/user/save.sh`

2.  我的 save.sh 看起来像这样：

> ```
> #! /bin/bash
> sudo echo "[save action] args: ${1} , ${2}" >> /somewhere/save.log;
> echo "${1} and ${2} are brother and sister."; 
> ```

1.  我的文件夹“某处”属于根目录，所以通常我的“用户”无法保存它。所以我改变了我的应用程序中的代码来处理这个命令：

`ssh user@server "sudo sh \$HOME/save.sh luke leia"`

现在我得到这个错误：

`sudo: no tty present and no askpass program specified`

使用 sudo 触发此脚本而不提示输入 root 密码的最佳方法是什么？我尝试使用`-t`，但要求输入 root 密码。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:45:43.190

我想到的解决方案是在您的 C 程序中提供“服务器”机器的根密码作为附加参数 (argv[3])：

```
char temp[1024];
snprintf(temp, sizeof(temp), "ssh user@server \"echo %s | sudo -S -s \\$HOME/save.sh %s %s\"", argv[3], argv[1], argv[2]);
system((char *)temp); 
```

-S for sudo 表示密码将通过标准输入提供，因此不需要用户交互。这是理论上的解决方案（我没有时间检查它 - 对不起）自己检查它并请告诉它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:08:23.550

您可以（并且应该）使用[带有空密码短语](http://www.cs.utah.edu/~bigler/code/sshkeys.html)的密钥，并将公钥添加到远程`root`帐户的`authorized_keys`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:43:32.200

> 使用 sudo 触发此脚本而不提示输入 root 密码的最佳方法是什么？

您应该重定向 stdin/stdout/stderr 流来执行此操作，以便您的程序可以与目标对话。`system()`这是“一劳永逸”的解决方案，这是无法做到的。

但是以 root 身份运行您的 C 程序将消除问题并简化任务。

由于您的（客户端）程序需要凭据才能在给定点使用它们，这可能是一个解决方案。

# java - windows下运行hadoop作业

> ID：13233043
> 
> 赞同：0
> 
> 时间：2012-11-05T13:23:24.253
> 
> 标签：java, windows, hadoop, cygwin, classpath

我已经在windows下成功安装了hadoop。（Namenodes 和 jobtracker 正常启动）

现在我正在尝试运行一些示例作业：

运行以下命令（在 cygwin 中）

```
hadoop jar $HADOOP_INSTALL/hadoop-0.20.2-examples.jar randomwriter random-data 
```

投掷

```
 Exception in thread "main" java.io.IOException: Error opening job jar: /cygdrive   /c/cygwin/home/Username/hadoop/hadoop-0.20.2-examples.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:90)
 Caused by: java.io.FileNotFoundException: \cygdrive\c\cygwin\home\Username\hadoop\hadoop-0.20.2-examples.jar (The system cannot find the path specified)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:127)
    at java.util.jar.JarFile.<init>(JarFile.java:135)
    at java.util.jar.JarFile.<init>(JarFile.java:72)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:88) 
```

这可能是因为 cygwin 无法识别 CLASSPATH 的事实而被抛出。

[此处](http://www.inonit.com/cygwin/faq/)描述了此问题的解决方案（？）

所以，一般来说我必须执行java程序

```
java -classpath `cygpath -wp $CLASSPATH` [arguments] 
```

现在，鉴于此，我应该如何结合最后一个执行上述 hadoop 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T19:00:24.553

我意识到这篇文章已经有一年多了，但没有标记答案。你非常接近......这应该可以工作而无需编辑任何配置。

```
hadoop jar `cygpath -wp $HADOOP_INSTALL/hadoop-0.20.2-examples.jar` randomwriter random-data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:58:13.243

编辑 $HADOOP_HOME/bin/hadoop 文件并根据您的 cygwin 要求更改调用 java 命令的最后一行。之后调用示例作为初始调用。

最后一行调用 java 是

```
# run it
  exec "$JAVA" -Dproc_$COMMAND $JAVA_HEAP_MAX $HADOOP_OPTS -classpath "$CLASSPATH" $CLASS "$@" 
```

# azure - 调整 Azure VM 映像的大小

> ID：13233046
> 
> 赞同：1
> 
> 时间：2012-11-05T13:23:26.907
> 
> 标签：azure, hosting, cloud, azure-virtual-machine

我们计划在预览版结束后立即注册 Azure VM 试用版。但是，与此同时，有人可以澄清以下问题吗？

如果我们创建一个“Medium”（中型 VM（2 x 1.6GHz CPU，3.5GB RAM）VM 实例，但后来意识到我们需要更多功率，我们可以将“Medium”实例的大小调整为“Large”或“Extra Large”吗？不影响该实例上的数据（例如安装的软件等）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:47:05.843

是的你可以。

您可以从管理门户中执行此操作，也可以通过调用REST API 上的[更新角色操作来执行此操作。](http://msdn.microsoft.com/en-us/library/windowsazure/jj157187.aspx)您可以使用 REST API 调用进一步自动化此过程。

更新

当我提到 REST API 调用时，我真正指的是 REST API 调用。它只是一个 HTTP(S) 调用，可以从您选择的平台/语言执行，它确实支持进行 HTTPS 调用。[Windows Azure PowerShell 管理 cmdlet](http://msdn.microsoft.com/en-us/library/windowsazure/jj156055.aspx)只是具有这些调用的一部分。[Fluent Management 开源项目](https://github.com/azurecoder/fluent-management)是 C# 和 Fluent API 的另一个实现。

# python - 如何检查目录是否是Python中的临时目录

> ID：13233048
> 
> 赞同：0
> 
> 时间：2012-11-05T13:23:41.787
> 
> 标签：python, directory-structure, temporary-directory

我知道如何在 Python 中使用`tempfile`.

我有一个封装用户环境的类。我还有一个单元测试，它创建一个临时的虚拟用户环境并用一些用于测试的文件填充它。完成此操作后，我想清理所有内容，从而从该虚拟用户目录中删除所有内容（使用`shutils.rmtree`）

我有一个包装原始类的虚拟类，它阻止它获取真正的用户目录并返回虚拟类。虽然我担心有人可能会忘记这一点，可能会改变它或完全删除包装类。这可能会奏效，开发人员最终会丢失他/她的主目录中的所有内容。虽然这可能会给他/她一个很好的教训，但这是不可接受的。

我可以检查 '/tmp/' 是否位于用户主页的路径开头，以便我知道删除它是安全的，但这不适用于 Windows。由于 tempfile 已经知道如何创建目录，它还能够判断目录是否在*临时*区域中。虽然我不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:30:31.410

这是[`tempfile.gettempdir()`](http://docs.python.org/2/library/tempfile.html#tempfile.gettempdir)为了什么。

但是，您可能需要重新考虑如何表示“主目录”是一个临时的仅测试设置。您可以添加一个额外的文件（`.this-is-a-test-homedir`或类似文件），使用明确的“临时”用户名。

或者，更好的是，完全删除虚拟包装器并让测试在运行测试之前创建临时用户目录，然后在拆除测试时清理它。

# asp.net-mvc-3 - UrlHelper.Action 生成没有控制器的 Url

> ID：13233060
> 
> 赞同：1
> 
> 时间：2012-11-05T13:24:49.353
> 
> 标签：asp.net-mvc-3

我想生成没有控制器名称的 Url。如果我使用下面的代码...

```
 @Url.Action("d", null, new { id = Model.DownloadId }) 
```

...我得到这样的网址

```
http://localhost:814/DefaultController/d/11234 
```

我想得到这样的网址

```
http://localhost:814/d/11234 
```

我的路线代码..

```
routes.MapRoute("Download result form", "d/{id}", new { controller = "Result", action = "DownloadForm" }); 
```

... 完美地处理上面的 url（只有 Action 和 Id 没有控制器名称）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:39:19.120

这会给您带来麻烦，因为这些操作会与绑定到其他控制器发生冲突。

为了使干净的 url 像你想要的那样，省略动作名称会更常见，例如这个页面 `stackoverflow/questions/{id}`

更新

在 Action 中提供 Controller 让它知道选择哪条路由，即

```
 @Url.Action("DownloadForm", "Result", new { id = Model.DownloadId }) 
```

如果这不起作用，它将被另一条路线抢占，因此路线的顺序不是您想要的。

# c# - 同一页面上的两个 Kendo UI TreeView

> ID：13233069
> 
> 赞同：0
> 
> 时间：2012-11-05T13:25:22.207
> 
> 标签：c#, asp.net-mvc, telerik, telerik-mvc, kendo-ui

我正在使用 Kendo UI MVC 扩展。我在页面上有一个树视图

```
<script type="text/x-kendo-tmpl" id="template">
    <div class="form">
        <h3>${Name}</h3>
    </div>
</script>

@(Html.Kendo().ListView(Model)
      .Name("formsList")
      .ClientTemplateId("template")
      .TagName("div")
      .BindTo(Model)
      .DataSource(dataSource => dataSource
      .Model(model =>
          { 
              model.Id(p => p.Id);
              model.Field(p => p.Name);
              model.Field(p => p.Fields);
          }))
      .Pageable()
      .Selectable(selectable => selectable.Mode(ListViewSelectionMode.Single))
      .Events(events => events.Change("onChange"))) 
```

当我单击项目时，我想`Fields`在下面单独的 TreeView 中的模型中显示属性。

到目前为止我有这样的代码

```
<script type="text/javascript">
    function onChange(arg) {
        var dataSource = $("#formsList").data("kendoListView");
        var index = dataSource.select().index();
        var dataItem = dataSource.dataSource.view()[index];

        alert(dataItem.Fields);
    }
</script> 
```

我可以获得所选数据项的 Fields 属性，但我应该如何将它传递给第二个 TreeView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:45:32.280

原则上，您需要将所选项目分配为第二个 Kendo TreeView 的数据源，或直接分配给您第一个 TreeView 使用的数据源。（您在询问 treeview 并且您的示例显示 listview ？）

```
<div id="treeview"></div>
<script type="text/javascript">

var myDataSource = new kendo.data.DataSource({
                        data: dataSource.dataSource.view()[index]});     
$("#treeview").kendoTreeView({
                  dataSource: myDataSource 
                }).data("kendoTreeView"); 
```

# bash - Shell 脚本：将压缩后的小文件加入到较大的文件中，无需解压缩

> ID：13233074
> 
> 赞同：1
> 
> 时间：2012-11-05T13:25:30.960
> 
> 标签：bash, shell

我有一些 8000 gz 文件，每个文件大约 60MB。我想将它们合并成几个更大的文件。那么如何在不解压缩的情况下在 bash 脚本中执行此**操作**？

Shell 脚本可以将输入作为新文件大小或要组合的文件数。

例如说我有 1.gz、2.gz、3.gz ... 10.gz 现在我需要一个文件，每个说 3 个文件，所以现在 1.gz、2.gz 和 3.gz 将合并为 1_new。 gz等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:09:06.093

`gzip`只能压缩单个文件。您需要`tar`将多个文件合并到一个存档中，然后可以（可选）使用`gzip`. 如果您只想合并压缩文件，则可以使用以下内容：

```
maxnum=$1
i=1
j=0
for f in *.gz; do
  tar rf archive_$j.tar $f
  if [ $i -eq $maxnum ]; then
    i=1
    j=$((j+1))
  fi
done 
```

这将生成一个包含压缩源文件的未压缩 tar 文件。

如果您想生成包含未压缩源文件的压缩 tar 文件，上述方法将不起作用，因为您无法更新压缩的 tar 文件。您需要先解压缩源文件，然后从中创建一个压缩的 tar 文件：

```
maxnum=$1
i=1
j=0
flist=
for f in *.gz; do
  gunzip $f
  flist="$flist $(basename $f .gz)"
  if [ $i -eq $maxnum ]; then
    tar czf archive_$j.tar.gz --remove-files $flist
    i=1
    j=$((j+1))
    flist=
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:44:57.203

可以将`gzip`ed 文件连接在一起，但是当您 `gunzip`生成文件时，您将获得单个流，请参阅[gzip 手册](http://www.gnu.org/software/gzip/manual/gzip.html#Advanced-usage)以供参考。

脚本类似于 Ansgar Wiechers 的脚本`tar`：

```
#!/bin/bash

maxnum=$1
i=1
j=0
for f in *.gz; do
   cat $f >> archive_$j.gz
   i=$((i+1))
   if [ $i -eq $maxnum ]; then
      i=1
      j=$((j+1))
   fi
done 
```

请注意，上面的代码未经测试。

如果您想*正确* `tar`存档内容是一个更好的解决方案，但如果您只想连接多个已`gzip`编辑的文件，那么这样的连接很好。

# unicode - 在不使用正则表达式的情况下确定 unicode 字符是否为字母数字

> ID：13233076
> 
> 赞同：4
> 
> 时间：2012-11-05T13:25:33.140
> 
> 标签：unicode

给定一个 unicode 字符，我需要确定它是否是任何语言脚本的字母数字。我无法访问正则表达式或任何与 unicode 一起使用的有用 API。我认为我唯一的解决方案是将 Unicode 值与字母数字字符的一组字符范围进行比较。

问题是我找不到此类范围的列表。

任何人都可以提出一个更好的解决方案，否则将我指向一个明确的字母数字范围列表进行比较？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T14:41:07.080

Unicode 标准是这方面的规范性信息来源。但作为一种捷径，您可以从[XRegExp Unicode](http://xregexp.com/plugins/#unicode)插件中获取信息，该插件目前反映了 Unicode 6.1（而 Unicode 6.2 只添加了一个字符，一个非字母）。[源代码](http://xregexp.com/addons/unicode/unicode-base.js)有一个字符串，其中包含基本多语言平面中的字母范围，这对于大多数用途来说已经足够了。它相当长，并且范围没有分隔符，但所有代码数字都出现在四个十六进制数字中：

0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800- 0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35- 0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050- 1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0- 16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9- 1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30- 2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000- A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44- AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76- FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:34:07.377

您可以检查[Unicode 字符数据库](http://www.unicode.org/ucd/)- 和 PropList 文件（这里是[5.0 示例](http://www.unicode.org/Public/5.0.0/ucd/PropList.txt)），特别是“字符点 - 属性”映射。或者，您可以解析主列表文件[（例如，5.0 的这个文件）](http://www.unicode.org/Public/5.0.0/ucd/UnicodeData.txt)（它**很大**），获取所有具有所需属性的字符点（我想是 L 和 N），然后根据这些数据构建范围。

此外，您没有提及您使用的工具，但我认为参考这个[Perl 模块](https://metacpan.org/module/Unicode%3a%3aProperty%3a%3aXS)（`XS.xs`及其分发包中的文件）也可能会有所帮助。

# android - 从 AsyncTask 发送类作为参数启动意图

> ID：13233077
> 
> 赞同：0
> 
> 时间：2012-11-05T13:25:35.090
> 
> 标签：android, android-intent, android-asynctask

我想将我想启动的类作为参数发送，因为这个异步任务想用来启动不同的活动。

例子：

```
.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    new taskIntent().execute(**example1.class**);      
}
}

.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    new taskIntent().execute(**example2.class**);      
}
}

private class taskIntent extends AsyncTask<String, Integer, Void> {
    ProgressDialog dialog;

    @Override
    protected Void doInBackground(String... params) {

        return null;
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(Calendar.this, "",
                "Loading...", true);
        dialog.show();
    }
    protected void onPostExecute(Void unused){
        Intent intent = new Intent(Calendar.this, **parameter[0]**);
        startActivity(intent);
        finish();

        dialog.dismiss();
    }

} 
```

如何将类作为参数发送以在意图中使用它？

谢谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:44:59.810

我不确定您使用 a 的方法`AsyncTask`，但您可以将 a 传递给`Class`构造函数：

```
private class taskIntent extends AsyncTask<String, Integer, Void> {
    ProgressDialog dialog;
    Class<?> clazz;
    ...
    public taskIntent(Class<?> clazz){
        this.clazz = clazz;
    }
    ...
    protected void onPostExecute(Void unused){
        Intent intent = new Intent(Calendar.this, clazz);
        ...
    }
} 
```

然后使用它：

```
new taskIntent(Example1.class).execute(); 
```

请注意，Java 约定是类名以大写字母开头，所以`TaskIntent`不是`taskIntent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:39:39.103

您必须将参数从字符串更改为类。虽然如果它什么都不做，我不明白 AsyncTask 的意义。

# winapi - win32 无窗口应用程序使用使用消息循环的计时器并且不使用消耗 while 循环的 cpu

> ID：13233084
> 
> 赞同：1
> 
> 时间：2012-11-05T13:25:55.187
> 
> 标签：winapi, windowless

如何编写一个没有窗口、没有窗口类、没有 cpu 消耗 while 循环、还没有控制台使用会消耗更少 cpu 的消息循环的程序？

我在下面解释我的要求。

我正在编写一个使用计时器且不需要窗口的 win32 api 程序。

1.  根据手册，默认消息循环仅在有与之关联的窗口时运行。

2.  我浏览了其他 stackoverflow 内容，其中明确指出要防止 while 循环和睡眠功能会导致 CPU 负载过大。

3.  我想像没有窗口的后台程序一样运行这个程序。

4.  我使用回调函数作为 setTimer 函数的最后一个参数，所以我不必有窗口过程。

5.  我听说在默认消息循环中使用的事件/对象将保持程序运行但不会使 cpu 过载。这是唯一的方法吗？但我不知道如何使用这个选项。

在不消耗 CPU 和其他资源的情况下编写此类应用程序的所有可能方法是什么？

您的建议和参考确实会有所帮助。

这是我现在拥有的代码，它将退出，因为正如其他讨论所述，没有关联任何窗口。

```
#include <windows.h>

void getidle();

int WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance, LPSTR lpszArgument, int nFunsterStil)
{

    SetTimer(NULL, 1, 5000, (TIMERPROC) getidle);
    MSG msg;

    while (GetMessage (&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

void getidle()
{
  //some code here
} 
```

所以我需要使用不同类型的消息循环，我不知道如何使用它。类似 MsgWaitForMultipleObjects 或 WaitForSingleObject 的东西。? .

*此外，通过执行上面提到的方式，如 msgwait...waitforsigle... 或事件对象，当且仅当这些可以消耗更多仅隐藏窗口的资源时，请指定这也是因为我将采用这种简单的方式...*

**这是工作**

我真的很想知道它是如何工作的，因为我读到人们说它不会运行。我在网上搜索更多信息，它一直在工作......我不知道。

可以吗？这是正确的方法吗？使困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:04:50.350

`GetMessage`是一个阻塞调用，这意味着如果没有可用的消息，它不会返回。如果您有一个隐藏窗口不接收任何消息，则包含消息循环的线程不会消耗任何 CPU 资源。您要处理的一条消息是 WM_QUIT，它启用干净的退出。您可以自己`PostMessage`在代码中的其他位置发布此消息。

如果以这种方式处理它，则需要在消息循环之前设置其他线程和计时器，因为一旦`GetMessage`阻塞，您将无法执行任何其他操作。

# c# - 规范化具有两列主键和另一列的表

> ID：13233088
> 
> 赞同：0
> 
> 时间：2012-11-05T13:26:25.987
> 
> 标签：c#, database-design, ado.net, datatable, database-normalization

My`DataTable`有 3 列：A、B 和 C。没有保证有唯一的条目，在非平凡的情况下，每一列都将有非唯一的条目。

{A, B} 的组合*保证*是唯一的。因为 ADO.NET`DataTable`允许使用多列作为主键，所以我使用 A 和 B 作为我的主键。

A vs B 表示一个默认值为 0 的矩阵，因此我可以保证 B 的条目将来自有限池，并且对于 A 的每个条目，每个可能的 {A, B} 都会出现（即这样表中将有确切`number of unique A values * number of unique B values`的行）。

我的问题有两个部分：

1）如何对此进行规范化，以便我有一个密钥并且没有更新异常（我不确定，但我想我想要一个[3NF](https://en.wikipedia.org/wiki/Third_normal_form)）？（除非我弄错了，只需添加一个带有非冗余整数的额外“ID”列将允许更新异常）

2）如何设置（在C#中使用ADO.NET库）这样每当我想添加一行时，我指定B和C的条目，然后它会自动生成一个合适的A值，这样我就可以“在 {A, B} 处插入 C”？A 可以是整数或字符串。

这两者是相关的，因为您对 2 的回答可能会影响 1，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:14:56.563

一个键不必是单个列来满足 3NF。它可以是多列——在这个例子中（A，B）——或者你给出的维基百科链接中的例子。

但是，如果您想要一个单列键，那么您可以使用自动生成的 ID 创建一个新列（例如：`IDENTITY(1,1)`在 SQL 服务器中），并在列 (A,B) 上创建一个唯一索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:21:07.503

您可以使用`DataColumn.Expression`属性根据其他列的值自动生成列的值。

[http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)

# asp.net - 如何在 java 脚本警报消息中显示 Gridview 行号

> ID：13233090
> 
> 赞同：0
> 
> 时间：2012-11-05T13:26:37.653
> 
> 标签：asp.net, gridview, alert

我在单击按钮时将来自 gridview 的输入提交到数据库。在这里，我正在检查特定列值是否在提交时留空。如果它是空白的，我需要显示一条带有特定行号的警报消息。即如果在第 3 行 col3 值留空并提交，我应该收到消息：请在第 3 行填写 col3 值”

截至目前我不知道如何显示行号。

这是我的代码：

```
for (int i = 0; i < GridView1.Rows.Count; i++)
{
    Label col = (Label)GridView1.Rows[i].FindControl("col3");
    if(col.Text == string.Empty)
    {
    StringBuilder s = new StringBuilder();
    s.Append("<script language='javascript'>");
    s.Append("alert(' Please fill col3 value!!')");
    s.Append("</script>");
    RegisterStartupScript("Please fill col3 value !!'", s.ToString());
    }
    else
   {
    // rest code
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:25:11.350

如下修改您的代码。它将遍历所有行并找到所有空 col3 列并将它们显示在单个警报中。

```
StringBuilder s = new StringBuilder();
for (int i = 0; i < GridView1.Rows.Count; i++)
{
    Label col = (Label)GridView1.Rows[i].FindControl("col3");
    if(string.IsNullOrEmpty(col.Text))
    {
        s.Append("Please fill col3 value in row no " + i.ToString() +"\\n");
    }
}   
if (!string.IsNullOrEmpty(s.ToString()))
{
    string script = "alert('" + s.ToString() + "');";
    ClientScript.RegisterStartupScript(this.GetType(), "alertmessage", script, true);
} 
```

# javascript - 使用 PhoneGap 在 Android 上自动拨打预定义号码

> ID：13233091
> 
> 赞同：2
> 
> 时间：2012-11-05T13:26:42.270
> 
> 标签：javascript, android, jquery, cordova, phone-call

我正在使用 PhoneGap 和 Jquery 编写一个应用程序，在我的应用程序中我有一个紧急按钮，点击它应该会自动呼叫一个预定义的号码。我正在设法打开本机 android 拨号器，但我仍然需要用户再次单击发送按钮进行拨号。

如何从应用程序直接拨打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:50:44.227

您需要为此功能[编写一个插件。](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)您需要做的第一件事是添加：

```
android.permission.CALL_PRIVILEGED 
```

到您的 AndroidManifest.xml。这将允许您拨打一个跳过拨号器应用程序的号码。插件接口需要一小段 JavaScript 代码：

```
cordova.define("cordova/plugin/emergencydialer", 
  function(require, exports, module) {
    var exec = require("cordova/exec");
    var EmergencyDialer = function () {};

    var EmergencyDialerError = function(code, message) {
        this.code = code || null;
        this.message = message || '';
    };

    EmergencyDialer.CALL_FAILED = 0;

    EmergencyDialer.prototype.call = function(telephoneNumber,success,fail) {
        exec(success,fail,"EmergencyDialer", "call",[telephoneNumber]);
    };

    var emergencyDialer = new EmergencyDialer();
    module.exports = emergencyDialer;
}); 
```

然后，您需要编写一些 Java 代码来拨打电话。您需要创建一个扩展 Plugin 类的新类并编写如下执行方法：

```
public PluginResult execute(String action, JSONArray args, String callbackId) {
    PluginResult.Status status = PluginResult.Status.OK;
    String result = "";

    try {
        if (action.equals("call")) {
            String number = "tel:" + args.getString(0);
            Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse(number)); 
            this.cordova.getActivity().startActivity(callIntent);
        }
        else {
            status = PluginResult.Status.INVALID_ACTION;
        }
        return new PluginResult(status, result);
    } catch (JSONException e) {
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
    }
} 
```

无论您如何调用此类，您都需要在 res/xml/config.xml 文件中添加一行，以便 PluginManager 可以创建它。

```
<plugin name="EmergencyDialer" value="org.apache.cordova.plugins.EmergencyDialer"/> 
```

最后在您的 JavaScript 代码中，您需要创建他们的插件并像这样调用它：

```
function panicButton() {
    var emergencyDialer = cordova.require("cordova/plugin/emergencydialer");
    emergencyDialer.call("18005551212");
} 
```

那应该差不多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T21:10:51.657

这个线程有点老，但似乎谷歌很受欢迎，所以我想补充一点，现在在[https://github.com/anemitoff/PhoneGap-PhoneDialer](https://github.com/anemitoff/PhoneGap-PhoneDialer)有一个插件可以完成这项工作。该页面底部用于安装本地插件的语法似乎与我习惯的有点不同，但它与推荐的用于安装本地插件的科尔多瓦语法配合得很好。如果您不熟悉，您可以在[http://docs.phonegap.com/en/4.0.0/guide_cli_index.md.html](http://docs.phonegap.com/en/4.0.0/guide_cli_index.md.html)阅读有关从各种来源安装插件的信息，我们只是做了类似的事情

```
cordova plugin add ../plugins/PhoneDialer 
```

它工作得很好并且很容易实现！

# c# - Selenium Grid 2 - 并行数据驱动测试

> ID：13233093
> 
> 赞同：3
> 
> 时间：2012-11-05T13:26:47.777
> 
> 标签：c#, selenium-grid, mbunit

我在这个领域很新，所以对这个问题表示歉意。
我正在尝试使用 Selenium Grid2 并行运行数据驱动测试。

这是我的测试设置：

```
 [Test]
    [Parallelizable]
    [Row("nl-NL")]
    [Row("fr-BE")]
      public void UsignUp(string locale)
    {
      //test to exexute

    } 
```

当我运行测试时，2 个浏览器实例正在启动，但它们正在相互输入数据。所以我的测试失败了。

有谁知道我如何确保这不会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T02:58:47.960

我对使用 C# 的 Selenium 没有经验，但首先认为您需要的是一个“测试运行器”，它具有分叉或并行化能力，可以在自己的线程中运行单元测试。我在谷歌上查看并无法弄清楚。在 Java 中，有很多选项，比如 Maven Surefire、Gradle、TestNG 等。

# xcode - 将 uiswitch 值转换为字符串时出现运行时异常

> ID：13233098
> 
> 赞同：0
> 
> 时间：2012-11-05T13:27:07.333
> 
> 标签：xcode

我在这里遇到运行时异常，我认为这是将开关布尔值转换为字符串

```
[care_checkin_data setObject:[NSString stringWithFormat:@"%@",switch.on] forKey:@"ispresentable"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:25:46.737

说明符 %@ 用于 Objective-C 对象，而不是 switch.on 返回一个 BOOL。
也许您需要将对象设置为 NSNumber：

```
[care_checkin_data setObject:[NSNumber numberWithBool:switch.on] forKey:@"ispresentable"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:29:50.030

你不是说值应该如何存储在`care_checkin_data`字典中吗？如果你愿意`true`，`false`那么这将做到：

```
[care_checkin_data setObject:(switch.on ? @"true" : @"false")
                      forKey:@"ispresentable"]; 
```

# android-layout - 如何打开推送两个edittext且不覆盖edittext的键盘

> ID：13233104
> 
> 赞同：1
> 
> 时间：2012-11-05T13:27:27.643
> 
> 标签：android-layout, android-edittext, android-softkeyboard

如果我的布局包含两个 editText 和一个按钮。当我按下第一个编辑文本时，键盘可见并且键盘覆盖第二个编辑文本，如果我按下第二个编辑文本，键盘会同时按下两个编辑文本，我可以看到它们，评论：在清单上的活动 android :windowSoftInputMode="adjustResize" 请指教

# powershell - 如何在powershell中按REG_SZ名称值对注册表项名称值进行排序

> ID：13233105
> 
> 赞同：1
> 
> 时间：2012-11-05T13:27:28.603
> 
> 标签：powershell

我有一个包含多个字符串名称/数据值的注册表项（它们是 REG_SZ 类型）。我想列出名称/数据值并按名称值对它们进行排序。我想在 powershell 中执行此操作。我可以毫无问题地获得值，`Get-ItemProperty`但我不确定如何使用`Sort-Object`. 正如您在下面看到的，它没有排序。

```
$item = Get-ItemProperty -Path 'Registry::HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources' | Sort-Object

PSPath                      : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI\ODBC Data S
                          ources
PSParentPath                : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI
PSChildName                 : ODBC Data Sources
PSProvider                  : Microsoft.PowerShell.Core\Registry
MSDWDATA_DEFAULT_SYBASE4.00 : DataDirect 4.0 Sybase Wire Protocol
Xtreme Sample Database 2003 : Microsoft Access Driver (*.mdb)
NYT_OPS                     : DataDirect 4.2 Sybase Wire Protocol
NYP_OPS                     : DataDirect 4.2 Sybase Wire Protocol
NYP_MSPA2                   : DataDirect 4.2 Sybase Wire Protocol
NYT_MSPA_A                  : DataDirect 4.2 Sybase Wire Protocol 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:11:10.033

```
$p = Get-ItemProperty -Path 'HKLM:\SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources'
$p.PSObject.Properties | Sort-Object Value| Format-Table Name,Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:39:49.030

真的很丑：

```
$item = Get-ItemProperty -Path 'Registry::HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources' | 
out-string -Stream | sort 
```

或按价值（更丑陋）：

```
$item = Get-ItemProperty -Path 'Registry::HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI\ODBC Data Sources' | 
out-string -Stream | sort { ($_.split(':'))[1] } 
```

# python - 使用来自python的neo4J（服务器）和事务

> ID：13233107
> 
> 赞同：2
> 
> 时间：2012-11-05T13:27:41.747
> 
> 标签：python, flask, neo4j, py2neo

我目前正在使用 python/flask 构建一个 web 服务，并希望在 neo4j 之上构建我的数据层，因为我的核心数据结构本质上是一个图形。我对 neo4j 为这种情况提供的不同技术感到有些困惑。尤其 ：

1.  我最初计划通过 py2neo 使用 REST Api，但缺少事务有点问题。

2.  “嵌入式数据库”neo4j 似乎不太适合我的情况。我想这在您使用批处理和一次性分析时很有用，并且不需要将数据库存储在与 Web 服务器不同的服务器上。

3.  我偶然发现了 neo4django 项目，但我不确定这个项目是否提供事务支持（因为没有用于 python 的 neo4j 的本机客户端），以及在 django 本身之外使用它是否会出现问题。事实上，在查看了项目的文档之后，我觉得它有完全相同的限制，也就是没有事务（但是，当你可以在单个连接超时时破坏你的模型时，你怎么能构建一个真实的服务呢？） . 我什至不明白那个项目有什么用。

任何人都可以推荐任何东西吗？我觉得完全被困住了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:53:30.160

没有一个 REST API 客户端能够显式支持（正确的）事务，因为该功能不能通过 Neo4j REST API 接口获得。有一些替代方案，例如 Cypher 查询和批处理执行，它们都在服务器端的单个原子事务中运行；但是，我对客户端应用程序的一般方法是尝试构建可以优雅地处理部分完整数据的代码，从而消除对显式事务控制的需要。

通常，这种方法会大量使用唯一索引，这也是我在 py2neo 中提供了大量“get_or_create”类型方法的原因之一。Cypher 本身非常强大，并且还提供了唯一性功能，特别是通过 CREATE UNIQUE 子句。使用这些，您可以使您的写入具有幂等性，并且您可以在“多次执行”的安全方面犯错，因为您知道您最终不会得到重复的数据。

同意，这种方法本身不会给你交易，但在大多数情况下，它可以给你一个等效的最终结果。*在您的应用程序中哪些地方真正*需要事务，这当然值得挑战自己。

希望这可以帮助

奈杰尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:19:38.747

我认为`neo4django`使用[neo4j-rest-client](http://pypi.python.org/pypi/neo4jrestclient/)，它确实支持通过Neo4j REST 接口中的[`batch`资源进行事务。](http://docs.neo4j.org/chunked/snapshot/rest-api-batch-ops.html)

语法与 Neo4j Python 嵌入式 API 使用的语法非常相似：

```
>>> n = gdb.nodes.create()

>>> n["age"] = 25

>>> n["place"] = "Houston"

>>> n.properties
{'age': 25, 'place': 'Houston'}

>>> with gdb.transaction():
   ....:         n.delete("age")
   ....:

>>> n.properties
{u'place': u'Houston'} 
```

[有关transactions](https://neo4j-rest-client.readthedocs.org/en/latest/transactions.html)的更多信息可以在 neo4j-rest-client 文档中找到。

# java - 用于通过 Android 接收电子邮件的库

> ID：13233108
> 
> 赞同：1
> 
> 时间：2012-11-05T13:27:51.737
> 
> 标签：java, android, email

是否有人开发或使用过 Android 库来下载和发送电子邮件（不使用 UI）。我看过[javamail-android](http://code.google.com/p/javamail-android/)，但它是 GPL。我还研究了在手机上安装[K-9 邮件](https://github.com/k9mail)并配置电子邮件帐户，以及使用 Content Provider 注册收到的电子邮件。K-9 的问题在于内容提供者只包含电子邮件正文的摘要，而不是全文。

我正在寻找免费且没有病毒许可的东西，它使我能够在不使用 UI 的情况下接收电子邮件（包括全文）。或者，如果有人知道使用 K-9 的内容提供程序获取完整消息文本的方法，那将很有用。我不明白为什么这不是您可以在内容提供者中查询的参数。我意识到 SO 上有类似的问题，但大多数人回答“使用 javamail-android”，我感觉大多数人忽略了 GPL 许可证。

# ibatis.net - Ibatis 索引超出范围

> ID：13233109
> 
> 赞同：1
> 
> 时间：2012-11-05T13:27:54.827
> 
> 标签：ibatis.net

我正在使用 Ibatis.NET 开发某种搜索器。到目前为止，这是该过程的 sqlMap：

```
 <statement id="statementId"  parameterClass="parameterObject" resultClass="resultClass">
  DECLARE @table1 Table1,
  @table2 Table2

  INSERT INTO @table1 (Value1, Value2)
  VALUES
  <iterate  property="valueList" open="(" close=")" conjunction="),(">
    #valueList[].Item1#,#valueList[].Item2#
  </iterate>
  INSERT INTO @table2 (Value1, Value2)
  VALUES
  <iterate  property="valueList2" open="(" close=")" conjunction="),(">
    #valueList2[].Item1#,#valueList2[].Item2#
  </iterate>

  EXEC [SP_StoredProcedure]
  @tvisible=@tvisible,
  @tparametro=@tparametro,
</statement> 
```

StoredProcedure 将返回一组由参数 table1 确定的列。当我调用返回 4 个值，然后再调用返回 3 个值时出现问题，我得到一个索引超出范围异常。我认为 sqlDataReader 尝试读取之前返回的 4 列，但这次该集合仅包含 3 列。

任何解决此问题的建议将不胜感激。

# python - Python中的多处理：不可能取回我的结果（get（））（很少发生）

> ID：13233112
> 
> 赞同：0
> 
> 时间：2012-11-05T13:27:59.897
> 
> 标签：python, multiprocessing

我在 Python 中使用 Multiprocessing 来对数据库（和其他东西）执行多个请求：

```
po = multiprocessing.Pool()
for element in setOfElements:
    results.append(po.apply_async(myDBRequestModule, (element, other stuff...)))                    
po.close()
po.join()
for r in results:
    newSet.add(r.get()) 
```

myDBRequestModule 返回一个我定义的对象，由一个列表和两个数字组成。我重新定义了哈希函数，以便在我的这些对象集中定义我所说的相等性：

```
class myObject:
    def __init__(self, aList, aNumber, anotherNumber):
        self.list = aList
        self.number1 = aNumber
        self.number2 = anotherNumber
    def __hash__(self):
        # turn elements of list into a string, in order to hash the string
        hash_text = ""
        for element in self.list:
            hash_text += str(element.x.id) # I use the ID of the element of my list...
        return hash(hash_text)
    def __eq__(self, other):
        self_hash_text = ""
        other_hash_text = ""
        for element in self.list:
            self_hash_text += str(element.x.id)
        for element in other.listDest:
            other_hash_text += str(element.x.id)
        return self_hash_text == other_hash_text 
```

在大多数情况下，它可以正常工作。两次，出于未知原因，在完全相同的上下文中，我遇到了一个错误：

```
newSet.add(r.get())
File "/usr/lib/python2.6/multiprocessing/pool.py", line 422, in get
    raise self._value
TypeError: 'str' object does not support item assignment 
```

它来自 get 方法（最后一行）：

```
def get(self, timeout=None):
    self.wait(timeout)
    if not self._ready:
        raise TimeoutError
    if self._success:
        return self._value
    else:
        raise self._value 
```

由于我只出现过一次这个错误，它就消失了，我决定早点放弃，但最近又出现了第二个问题，我真的不知道如何解决这个错误。特别是，我很难说出为什么它几乎从未发生过，而且通常工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:02:04.633

`multiprocessing`不是这里的问题。

您没有给我们正确的代码来诊断问题。在某些时候，您已将捕获的异常分配给`self._value`. 那就是发生错误的地方。查看`self._value`分配的所有位置，您将找到此错误。

# android - ICS 和 Jelly Bean 中的 Facebook ComposerActivity.java 崩溃

> ID：13233115
> 
> 赞同：2
> 
> 时间：2012-11-05T13:28:15.277
> 
> 标签：android, facebook

在使用以下代码中的 facebook 时，我从 ICS 和 Jelly Bean 设备获得空指针异常。

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_SEND);
String mimeType = image.getMimeType();
intent.setType(mimeType);
intent.putExtra(Intent.EXTRA_STREAM, image.fullSizeImageUri());
startActivity(Intent.createChooser(intent, "Share Image")); 
```

并且崩溃日志是

> 11-03 17:16:10.899：E/AndroidRuntime(26187)：致命异常：主要 11-03 17:16:10.899：E/AndroidRuntime(26187)：java.lang.NullPointerException 11-03 17:16:10.899： E/AndroidRuntime(26187): 在 com.facebook.katana.activity.composer.ComposerActivity.b(ComposerActivity.java:722) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 com.facebook.katana .activity.composer.ComposerActivity.onUserInteraction(ComposerActivity.java:825) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 android.app.Activity.performUserLeaving(Activity.java:4672) 11-03 17 :16:10.899: E/AndroidRuntime(26187): 在 android.app.Instrumentation.callActivityOnUserLeaving(Instrumentation.java:1209) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 android.app.ActivityThread。 performUserLeavingActivity(ActivityThread.java:2670) 11-03 17:16:10.899:E/AndroidRuntime(26187): 在 android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2650) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 android.app.ActivityThread.access$800(ActivityThread. java:128) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1168) 11-03 17:16:10.899: E/AndroidRuntime( 26187): 在 android.os.Handler.dispatchMessage(Handler.java:99) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 android.os.Looper.loop(Looper.java:137) 11 -03 17:16:10.899: E/AndroidRuntime(26187): 在 android.app.ActivityThread.main(ActivityThread.java:4514) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 java.lang .reflect.Method.invokeNative(Native Method) 11-03 17:16:10.899: E/AndroidRuntime(26187): at java.lang.reflect.Method.invoke(Method.java:511) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 11-03 17:16:10.899: E/AndroidRuntime(26187): 在 dalvik.system.NativeStart.main （本机方法）

请指导我如何解决此问题或让我知道您何时解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:05:41.377

关于 Facebook 应用程序接受其他 mime 类型（如图像或视频），此错误报告听起来与您的情况相似。

[https://developers.facebook.com/bugs/384045761672099](https://developers.facebook.com/bugs/384045761672099)

我正在努力确认我们的应用程序是否支持其他 mimetypes，例如图像或视频，尽管我最好的猜测是我们不支持且仅支持纯文本。

您应该订阅错误报告以了解最新消息。

# linux - 在另一个函数中调用一个函数

> ID：13233116
> 
> 赞同：2
> 
> 时间：2012-11-05T13:28:16.093
> 
> 标签：linux, bash, shell

我试图从另一个 bash 函数中调用一个 bash 函数，但它没有按预期工作：

```
#/bin/bash
function func1(){
    echo "func1 : arg = ${1}"
    return 1
}
function func2(){
    echo "func2 : arg = ${1}"
    local var=func1 "${1}"
    echo "func2 : value = $var"
}
func2 "xyz" 
```

当前输出为：

```
Current output :
func2 : arg = xyz
func2 : value = func1 
```

问题：如何修改上面的程序以获得以下输出？：

```
Desired output : 
func2 : arg = xyz
func1 : arg = xyz
func2 : value = 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:48:22.363

Bash 中的函数与许多其他语言中的函数的工作方式不同，它们只能返回 0 到 255 之间的整数。这是`$?`在函数调用之后使用的。如果您想获取其他值，例如字符串，请在子 shell 中调用它：

```
local var=$(func1 "${1}") 
```

将从函数中获取标准输出（来自`echo`语句）到`$var`.

顺便说一句，函数语法是：

```
function func1 { ... } 
```

或者

```
func1() { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:33:53.243

将定义更改`func2`为以下内容：

```
function func2 () {
    echo "func2 : arg = ${1}"
    func1 "${1}"
    local var=$?
    echo "func2 : value = $var"
} 
```

# jquery - jQuery .mousedown() 和 .click()

> ID：13233119
> 
> 赞同：1
> 
> 时间：2012-11-05T13:28:43.833
> 
> 标签：jquery

我有一个`div`. 里面有一个图像`div`。`mousedown()`方法附加到该div。另一方面，`.click()`方法附加到该图像。

当我单击图像时，该`.mousedown()`方法开始起作用。但我想停止它`.mousedown()`并开始`.click()`方法。我怎样才能做到这一点 ？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:30:53.563

这就是我理解你想要做的：

```
$('img').mousedown(function(e){
  e.preventDefault();
  $(this).trigger('click');
});
```

# sql - 如何让 sp_send_dbmail 格式化来自表的正文

> ID：13233124
> 
> 赞同：2
> 
> 时间：2012-11-05T13:28:58.950
> 
> 标签：sql

我正在使用 sp-send_dbmail 发送电子邮件。我通过从将列定义为文本的表中进行选择来填充@body 内容。电子邮件的实际内容存储在表格列中。

如何让电子邮件显示换行符并相应地格式化？我尝试了 HTML 和 TEXT 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:40:06.663

尝试并确保该`body_format`属性设置为`HTML`.

> [@body_format=]'body_format'
> 
> ```
> Is the format of the message body. The parameter is of type varchar(20), 
> with a default of NULL. When specified, the headers of the outgoing message 
> are set to indicate that the message body has the specified format. The 
> parameter may contain one of the following values:
> 
>     TEXT
> 
>     HTML
> 
> Defaults to TEXT. 
> ```

来源：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)

# sql - 声明的变量与硬编码字符串的行为不同

> ID：13233129
> 
> 赞同：5
> 
> 时间：2012-11-05T13:29:26.200
> 
> 标签：sql, sql-server, variables

我正在尝试将类似参数设置为变量并允许该变量接受通配符（mssql 2005）。如果我将参数集设置为“%”，它只返回部分子集，但如果我将查询硬编码为使用“%”，它会返回完整集。为什么变量的行为可能与字符串不同？

```
DECLARE @wareno char(4); 
SET @wareno = '%';
select @wareno as a, * from waredesc where wareno like @wareno; 
```

对比

```
DECLARE @wareno char(4); 
SET @wareno = '%';
select @wareno as a, * from waredesc where wareno like '%'; 
```

完整的场景是基于一个标志进行切换，但可以在上面的代码下重现

```
DECLARE @wareno char(4); 
DECLARE @delprods bit;

/**
SET THESE PARAMETERS
**/
SET @wareno = '1'; 
SET @delprods = 'true'; /** if true all the warehouses should also be emptied for safety - products are held at a company level!**/

IF @delprods = 1
BEGIN
    SET @wareno = '%';
END
select @wareno as a, * from waredesc where wareno like @wareno; 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T13:37:18.897

该`char(4)`变量将用三个尾随空格填充。

这些在[模式中很](http://msdn.microsoft.com/en-us/library/ms179859.aspx)[重要`LIKE`](http://msdn.microsoft.com/en-us/library/ms179859.aspx)，它只会匹配以三个空格结尾的值。改为使用`varchar(4)`。

# javascript - Javascript ENUM 模式命名约定

> ID：13233137
> 
> 赞同：33
> 
> 时间：2012-11-05T13:29:52.487
> 
> 标签：javascript, naming-conventions, jshint

我正在开发一个需要使用 javascript“枚举”的 javascript 项目，这意味着对象如下：

```
var WinnerEnum = {
            Player1: 1,
            Player2: 2,
            Draw: 0
    }; 
```

这对我来说非常有用，但是，我不知道命名枚举的正确方法（根据约定）是什么，因为据我所知，只有类名以大写字母开头（表示能够在）。

JSHint 还输出以下警告：

```
Missing 'new' prefix when invoking a constructor. 
```

如果没有约定，我会很感激一种命名枚举的好方法，不会将它们与类名混淆。**2014 年更新**：JSHint 不再这样做。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2018-02-06T15:50:12.197

这确实是命名枚举的正确方法，但枚举值应该是 ALL_CAPS 而不是 UpperCamelCase，如下所示：

```
var WinnerEnum = {
    PLAYER_1: 1,
    PLAYER_2: 2,
    DRAW: 0
}; 
```

这类似于[Java 的](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)枚举命名约定。

一些参考资料：

*   [谷歌 JavaScript 风格指南](https://google.github.io/styleguide/jsguide.html#features-objects-enums)
*   [Stijn de Witt 的博客](https://stijndewitt.com/2014/01/26/enums-in-javascript/)
*   [枚举文档](http://2ality.com/2016/01/enumify.html)

与一般的编码风格一样，您会发现人们以许多不同的方式做事，每种方式都有自己的一套充分理由。但是，为了让阅读和使用您的代码的任何人都更容易，我建议使用具有最权威参考的样式，因此通常是最广泛采用的样式。

我找不到比 Google 的样式指南和上面的著作更权威的参考，这些参考是由对枚举认真思考过的人写的，但我很想听听任何更好的参考。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-07T02:07:53.327

根据 Google 的编码约定，这确实是在 javascript 中命名枚举的正确方法。

根据要求[，这里是一个链接](https://google.github.io/styleguide/javascriptguide.xml?showone=Naming#Naming)。

# msbuild - 无论如何要在 WIX wxs 文件中创建自定义 MSBuild 属性？

> ID：13233143
> 
> 赞同：2
> 
> 时间：2012-11-05T13:30:15.227
> 
> 标签：msbuild, wix, version-numbering, auto-build

我的目标是在 WIX 3.6 项目中使用版本号自动命名输出 msi 文件。我找到了这个链接： [WiX 的自动安装程序版本号，重新访问，](http://blog.tentaclesoftware.com/archive/2010/08/05/99.aspx)但我们有一个稍微不同的场景：我们不想通过引用任何程序集的版本号来控制我们的产品版本号。相反，我们只是想在 wix 文件中分配它。具体来说，我有一个 wxi 文件，它定义了这样的属性：

```
<?define VersionNumber = "1.1.2000" ?> 
```

因此，我可以在 Product.wxs 文件中的任何位置使用这个 VersionNumber 变量。但由于重命名输出 msi 文件的最简单方法似乎是在 MSBuild 中添加一个 postbuild 任务，因此我必须将此 VersionNumber 传递给 MSBuild 项目文件。这就是阻止我的原因。

我尝试了相反的方法，即在 MSBuild 中定义 VersionNumber 常量并在 WIX 中使用它。它工作得很好，除了我必须为不同的构建/平台组合保持这个常数。我们在 VS IDE 中构建我们的软件，这意味着如果我们在 IDE 窗口中修改版本号，它将仅适用于特定的构建/平台组合，其他组合将保持不变（我知道如果我是从命令行构建的，我可以只需传递一个版本号来覆盖现有的）。这就是我不想看到的。我喜欢只在一个地方定义版本号以避免任何可能的错误的想法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:52:56.607

在设置项目属性的 Build 选项卡中选择“All Configurations”和“All Platforms”后定义预处理器变量。

~~您可以通过将 .wixproj 中的元素添加到只保留版本号的项目中来实现此目的。您将修改 .wixproj，但只修改一次。您可以通过合理的操作（无？）将此属性文件添加到 .wixproj 本身，以便您可以在 IDE 中对其进行修改。~~

就像是：

版本属性

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
  <PropertyGroup>
    <WhateverTheVersionPropertyNameIs>x.x.x.x</WhateverTheVersionPropertyNameIs>
  </PropertyGroup>
</Project> 
```

在您的 .wixproj 文件中，您将在最后添加

```
<Import Project="Version.properties"/> 
```

# javascript - 在js中获取水平滚动事件

> ID：13233149
> 
> 赞同：16
> 
> 时间：2012-11-05T13:30:33.877
> 
> 标签：javascript, jquery, macos, dom-events

我想要做的是在用户水平滚动 div 时捕捉事件。对于垂直滚动，我正在使用事件“鼠标滚轮”并且它工作正常。（水平滚动是通过触摸板上的两根手指拖动来执行的 - 我正在 Mac OS 上进行测试）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T13:38:57.290

您可以通过以下方式处理水平滚动：

```
$("#someContainer").on("scroll", function (e) {
            horizontal = e.currentTarget.scrollLeft;
            vertical = e.currentTarget.scrollTop;
            }); 
```

在这种情况下，这会在此元素上绑定所有类型的滚动事件，因此您也可以处理

垂直通过`e.currentTarget.scrollTop`

和

水平方向`e.currentTarget.scrollLeft`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:35:35.010

我没有正确的设置来测试这个，但[`$.scroll()`](http://api.jquery.com/scroll/)应该做的伎俩。最好也绑定`mousewheel`事件。人们使用所有滚动方式；）

# dns - 在我的新虚拟服务器上设置 DNS 并指向域 (Windows 2008)

> ID：13233150
> 
> 赞同：1
> 
> 时间：2012-11-05T13:30:34.510
> 
> 标签：dns, hosting, windows-server-2008-r2

我是托管新手。请多多包涵。

我用我的主机 GoDaddy 购买了一个新的虚拟服务器。我想设置自己的 DNS 并将一个或多个域指向该服务器。

我有 3 个 IP 地址分配给我。让我们假设它们是 10.0.0.1、10.0.0.2 和 10.0.0.3。让我们假设我的服务器的名称是“mydomain”。这是当我右键单击我的电脑并转到属性并查看完整的计算机名称时显示的内容。我已经在这台服务器上安装了 DNS 角色。

我想要的是创建像 ns1.mydomain.com 和 ns2.mydomain.com 这样的 DNS。然后我想将 www.otherdomain.com 配置到此服务器。

有人可以指导我如何执行上述操作。

非常感谢，阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:25:08.110

如果您希望将 DNS 托管在您自己的服务器上，您必须先向您的域名注册商注册您的域名服务器。如果这是 Go Daddy，您将使用以下步骤：

1.  登录您的客户经理。
2.  在域旁边，单击启动。
3.  单击要用于注册为您自己的名称服务器的域名。
4.  在主机摘要部分中，单击添加。
5.  在主机名中，输入您要注册的主机名。这将类似于“ns1”。此处输入的值将附加到您的域名以创建主机名。不要使用“www”前缀。示例：对于域名coolexample.com，在此处输入“ns1”会生成ns1.coolexample.com。
6.  在主机 IP 字段中，输入服务器的 IP 地址。
7.  单击确定。

一旦您设置了两个名称服务器，您就可以使用它们将您的域指向服务器。您需要确保您设置名称服务器的域的区域文件也将具有 ns1 和 ns2 的 A 记录。如果您在服务器上托管域，您将在服务器上编辑区域文件并添加那些 A 记录。如果您不将域名服务器域指向您的服务器，您只需在域管理器的 DNS 编辑器中指向它。

# php - 在 PHP 中保存最后一个 SQL 查询状态

> ID：13233151
> 
> 赞同：1
> 
> 时间：2012-11-05T13:30:39.583
> 
> 标签：php, mysql, session, symfony-1.4, session-state

对于两人游戏，我需要每 30 秒向玩家发送更新数据。

我有一个表（最好是 4 个表），我需要从中选择数据并在用户登录后发送给用户。由于是多人互动游戏，数据需要每30-60秒同步一次。

我的问题是，我有一个非常繁重的查询，每 30-60 秒运行一次。所以理想情况下，我应该在同步期间只向播放器发送更新的和新的行（这也是 iPhone/Android 游戏的前端要求，应用程序在每次同步操作期间都不需要全部数据）。

我经历了[MySQL：两个结果集的差异，](https://stackoverflow.com/questions/2723839/mysql-difference-of-two-result-sets)希望我只能通过 SQL 获得更新/新记录，但问题是，如何保存最后一次查询的结果。

即使我将第一个结果保存在 Session 中（可能不推荐），只要插入或更新新行，该记录也将毫无用处。再次更新会话记录肯定会给服务器带来很大的压力。

有人可以建议实现这一要求的最佳方法吗？没有详细的解决方案，只是一些提示/链接就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:37:15.603

你不能给所有的东西加上时间戳吗？

给表中的每一行一个时间戳，称为“last_updated”

在查询中，过滤掉所有带有 last_updated 的条目，该条目在最后一次执行查询之前（或者可能是客户端最后一次调用服务器时获得的最新 last_updated）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:38:44.527

基本上，这并不难。让我为您提供一个步骤计划。

1.  向您要执行此操作的每个表添加一个日期时间字段
2.  在您的每个更新查询中，将此字段设置为`NOW()`
3.  确保应用程序将上次更新的时间添加到其所有请求中
4.  让服务器添加更新时间以将结果发送到应用程序（它也发送更新的行）

# wordpress - 在本地机器上安装主题。我是否需要 FTP 数据连接？

> ID：13233152
> 
> 赞同：5
> 
> 时间：2012-11-05T13:30:39.377
> 
> 标签：wordpress

我刚刚在我的本地主机上安装了 wordpress。

我想安装一个主题，它会询问我的 FTP 用户名和密码。

它说：“要执行请求的操作，WordPress 需要访问您的网络服务器。请输入您的 FTP 凭据以继续。如果您不记得您的凭据，您应该**联系您的网络主机**。”

我想知道 wp 通常是直接安装在生产网络服务器中，还是可以先安装在本地机器上……我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-03T11:47:09.153

将此添加到您的 wp-config.php

`define('FS_METHOD','direct');`

由于 Linux 具有这样一个限制性更强的文件系统，这将使您能够直接写入文件夹。

这将在安装新插件或主题时解决该 ftp 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T21:08:12.827

在 OSX 上，我使用了以下内容，并且效果很好：

```
sudo chown -R _www:_www {path to wordpress folder} 
```

_www 是在 Mac 上运行 PHP 的用户。*（您可以将其更改为您的 PHP 安装在您的特定操作系统上运行的任何内容）*

*（您可能还需要 chmod 一些文件夹。我先完成了它，但没有修复它。直到我执行 chown 命令才有效，所以我不确定它是否是 chown 命令单独，或 chmod 和 chown 的组合。）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-17T07:32:02.567

如果 WordPress 询问主机名和连接详细信息以安装插件和主题，我们需要在主目录的 wp-config.php 文件中添加一个函数挂钩。

`define('FS_METHOD','direct');`

有关更多详细信息，请参阅页面。 [https://support.cloudways.com/how-to-resolve-wordpress-asking-for-ftp-credentials-error/](https://support.cloudways.com/how-to-resolve-wordpress-asking-for-ftp-credentials-error/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:38:24.873

如果您使用本地计算机作为安装位置，而不是使用应用内安装程序（现在要求您提供 ftp 详细信息），请启动浏览器并直接从[主题目录](http://wordpress.org/extend/themes/)下载主题，将其解压缩到wp-content/themes/name-of-theme 的主题文件夹。然后，您可以从管理面板激活主题。

另请参阅[http://codex.wordpress.org/Using_Themes](http://codex.wordpress.org/Using_Themes)上的说明。

# ruby - ruby 1.9.3p286 和 factory_girl_rails 错误安装在应用程序目录中

> ID：13233154
> 
> 赞同：1
> 
> 时间：2012-11-05T13:30:42.377
> 
> 标签：ruby, factory-bot

我在为 gem 'factory_girl_rails' 安装捆绑程序时遇到问题，我不知道如何解决。

每次我在应用程序/项目目录中运行 bundle install 时，都会引发以下错误：（
如果我创建一个新的 rails 应用程序并将 factory_girl 添加到 gemfile 也没有关系）

> Gem::InstallError: factory_girl 需要 Ruby 版本 >= 1.9.2。

安装 factory_girl (4.1.0) 时出错，Bundler 无法继续。

`gem install factory_girl -v '4.1.0'`在捆绑之前确保成功。

当我在终端中输入“gem intall factory_girl_rails”时，它会成功安装。

# 我的配置：

```
osx mountain lion
ruby 1.9.3p286
gem 1.8.24
rails 3.2.8

which ruby:
/usr/local/bin/ruby

which gem:
/usr/local/bin/gem

which rails:
/usr/local/bin/rails

gem list:
*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
addressable (2.3.2)
arel (3.0.2)
bcrypt-ruby (3.0.1)
best_in_place (1.1.2)
bigdecimal (1.1.0)
builder (3.1.4, 3.0.4)
bundler (1.2.1)
cancan (1.6.8)
capybara (1.1.2)
carrierwave (0.7.0)
childprocess (0.3.6)
client_side_validations (3.2.1)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0, 1.3.3)
country_select (1.0.1)
devise (2.1.2)
diff-lcs (1.1.3)
erubis (2.7.0)
evernote (1.2.1)
evernote-thrift (1.22.1)
execjs (1.4.0)
factory_girl (4.1.0)
factory_girl_rails (4.1.0)
faraday (0.8.4)
ffi (1.1.5)
geocoder (1.1.4)
guard (1.4.0)
guard-rspec (2.1.0)
hashie (1.2.0)
hike (1.2.1)
httpauth (0.2.0)
i18n (0.6.1)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.1.3)
json (1.7.5)
jwt (0.1.5)
libwebsocket (0.1.5)
listen (0.5.3)
mail (2.4.4)
metaclass (0.0.1)
mime-types (1.19)
minitest (4.1.0)
mocha (0.12.7)
multi_json (1.3.7, 1.3.6)
multipart-post (1.1.5)
nested_form (0.2.3)
nifty-generators (0.4.6)
nokogiri (1.5.5)
oauth (0.4.7)
oauth2 (0.8.0)
omniauth (1.1.1)
omniauth-dropbox (0.2.0)
omniauth-evernote (1.2.0)
omniauth-facebook (1.4.1)
omniauth-foursquare (0.0.8)
omniauth-google (1.0.2)
omniauth-google-oauth2 (0.1.13)
omniauth-instagram (1.0.0)
omniauth-linkedin (0.0.8)
omniauth-oauth (1.0.1)
omniauth-oauth2 (1.1.1)
omniauth-salesforce (1.0.3)
omniauth-twitter (0.0.13)
omniauth-windowslive (0.0.8.1)
omniauth-xing (0.1.3)
omniauth-yahoo (0.0.4)
orm_adapter (0.4.0)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-protection (1.2.0)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
redis (3.0.2)
rmagick (2.13.1)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.3)
rspec-mocks (2.11.3)
rspec-rails (2.11.4)
rubygems-update (1.8.24)
rubyzip (0.9.9)
sass (3.2.2, 3.2.1)
sass-rails (3.2.5)
selenium-webdriver (2.25.0)
simple_form (2.0.4)
sinatra (1.3.3)
sprockets (2.8.0, 2.1.3)
sqlite3 (1.3.6)
thor (0.16.0)
thrift (0.9.0)
thrift_client (0.8.2)
tilt (1.3.3)
treetop (1.4.12, 1.4.11)
tzinfo (0.3.35, 0.3.34, 0.3.33)
uglifier (1.3.0)
warden (1.2.1)
xpath (0.1.4) 
```

**Gemfile 的内容：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test, :development do
  gem 'aruba'
  gem 'cucumber'
  gem 'rspec-rails'
  gem 'mongoid-rspec'
  gem 'capybara'
  gem 'database_cleaner'
  gem 'jasmine'
  gem 'factory_girl_rails'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'devise'
gem 'mongoid'
gem 'mongoid_spacial'
gem 'haml'
gem 'bson_ext'
gem 'rails-backbone' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:45:47.747

删除`Gemfile.lock`文件，然后`bundle install`再次运行。或运行`bundle update`。Ref: [Bundle 说 gem 不见了 - 但不是吗？](https://stackoverflow.com/questions/10413972/bundle-says-gem-is-missing-but-its-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:45:49.603

破解它！

我必须“更新”捆绑器。

我发出了以下命令： gem install bundler

显示以下消息：成功安装了 bundler-1.2.1

之后我重新启动终端并再次在应用程序/项目目录中发出“捆绑安装”命令。

现在 factory_girl 和 factory_girl_rails 安装成功！:-)

资料来源：[gembundle.com](http://gembundler.com)

# java - Apache POI 无法保存 (HWPFDocument.write) 大字文档文件

> ID：13233164
> 
> 赞同：1
> 
> 时间：2012-11-05T13:31:06.577
> 
> 标签：java, ms-word, apache-poi, doc

我想从 .doc 文件中删除单词元数据。我的`.docx`文件适用于`XWPFDocument`，但以下用于删除元数据的代码对于大（> 1MB）文件失败。例如，使用带有图像的 6MB .doc 文件，它会输出一个 4.5MB 的文件，其中删除了一些图像。

```
public static InputStream removeMetaData(InputStream inputStream) throws IOException {
    POIFSFileSystem fss = new POIFSFileSystem(inputStream);
    HWPFDocument doc = new HWPFDocument(fss);

    // **it even fails on large files if you remove from here to 'until' below**
    SummaryInformation si = doc.getSummaryInformation();
    si.removeAuthor();
    si.removeComments();
    si.removeLastAuthor();
    si.removeKeywords();
    si.removeSubject();
    si.removeTitle();

    doc.getDocumentSummaryInformation().removeCategory();
    doc.getDocumentSummaryInformation().removeCompany();
    doc.getDocumentSummaryInformation().removeManager();
    try {
        doc.getDocumentSummaryInformation().removeCustomProperties();
    } catch (Exception e) {
        // can not remove above
    }
    // until

    ByteArrayOutputStream os = new ByteArrayOutputStream();
    doc.write(os);
    os.flush();
    os.close();
    return new ByteArrayInputStream(os.toByteArray());
} 
```

相关文章：

*   [如何使用 POI API 保存 Word 文档？](https://stackoverflow.com/questions/8484906/how-to-save-the-word-document-using-poi-api)
*   [https://stackoverflow.com/questions/9758955/saving-poi-document-correctly](https://stackoverflow.com/questions/9758955/saving-poi-document-correctly)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:47:49.640

您使用的是哪个版本的 Apache POI？

这似乎是[Bug 46220 - Regression: Some embedded images being lost](https://issues.apache.org/bugzilla/show_bug.cgi?id=46220)。

请升级到[最新版本的 POI (3.8) 并重](http://poi.apache.org/download.html#POI-3.8)试。

希望有帮助。

# objective-c - 按 NSMutableArray/NSMutableDictionary 内容排序的方法（图像多重效果）

> ID：13233169
> 
> 赞同：1
> 
> 时间：2012-11-05T13:31:20.287
> 
> 标签：objective-c, image, macos, effects, core-image

## 我想做的事：

我想实现用户在图像上使用 CIFilters 的能力。所以我需要以某种方式修复它的顺序。例如，如果用户打开图像，然后应用`CIGaussianBlur`，`CIColorControls`然后`CISepia`，我需要得到这样的结果：

```
On user opened image apply CIGaussianBlur -> on CIGaussianBlur output image apply CIColorControls - > on CIColorControls output image apply CISepia. 
```

没关系。但是如果用户关闭 CIGaussianBlur 怎么办？然后我需要重复这个效果的序列，而不会模糊。它看起来像这样：

```
On user opened image apply CIColorControls -> on CIColorControls output image apply CISepia. 
```

## 问题

是否有可能做这样的事情：

应用任何效果后，在 NSMutableArray 或 NSMutableDictionary 中添加一些字符串。然后在应用其他效果时，检查 NSMutableArray 或 NSMutableDictionary 内容，如下所示：

如果索引 0 处的对象等于“模糊”，则在源图像上应用模糊，然后像当前效果的输入图像一样获取模糊的输出图像

等等？因此，每次都会按照用户制作的顺序重新应用效果。

如果可能的话，也许有人可以建议我任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:51:39.387

我认为这是使用[工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)理念的一个很好的例子。

您应该存储过滤器数组以将图像作为数组处理 - 保持排序顺序，并且处理起来相当简单（除了 a 之类的东西`NSCountedSet`）。

那么，下一个要问的合乎逻辑的问题是，我们如何在这里应用工厂模式？要考虑的最重要的事情是上下文对象应该是什么类型？这里有一些想法：

1.  **用作`NSString`常量标识符。**
    *   可能是最简单的开始，`if-else`它`switch`的`NSString`.

2.  **`NSNumber`，包装一个枚举值。**

    *   这可能是更好的选择之一。你可以直接转换成一个`int`变量，它在我能想象到的几乎任何处理器上都相当快，而且，如果你使用 ObjC 2.5 的花哨文字，你可以这样做：

        ```
        [filters addObject:@(filterType_gaussianBlur)]; 
        ```

        `filterType_gaussianBlur`枚举常量或其他东西在哪里。

        使用 an 的另一个优点`enum`是支持`switch`开箱即用的语句。如果处理得当，它会清理你的代码，它比大块更快`if-else`，唯一需要注意的是确保你`break`正确！

3.  **存储`Class`对象**

    *   这可能需要一些解释。在objective-c中，您实际上可以存储对对象类型的引用`CIGaussianBlur`，`NSString`, `NSData`, 等。

        此类“对象”允许您仅根据对象的类型动态创建对象，例如：

        ```
        Class cls = nil;

        if (stringMutable)
            cls = [NSMutableString class];
        else
            cls = [NSString class];

        NSString *mutableOrNot = [[cls alloc] initWithString:@"Hello World!"]; 
        ```

        但是，这种方法的缺点是无法在初始化后配置对象，并且您必须使用相同的选择器（方法）来初始化每个对象。如果这不是问题（我不使用 CoreImage），那么使用该`Class`方法应该没问题。

总而言之，在这种情况下使用任何有意义的东西。如果这些过滤器在初始化后不需要额外的配置，那么方法**3**很有意义。我个人不会推荐方法**1**，除非确实需要使用字符串。 **只要有可能，请始终尝试控制对象可以具有的值。**它让你的生活更轻松，相信我。

# c# - 图像裁剪 c#

> ID：13233170
> 
> 赞同：-4
> 
> 时间：2012-11-05T13:31:20.273
> 
> 标签：c#, .net, image

我想做图像裁剪。我看到了以下链接。

[图像裁剪](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing)

但我想做的是如下。我想从中心裁剪图像计算尺寸。因此，例如，如果我的图像是 100 像素并且裁剪我希望结果是 50 像素。我想在左右手边各留 25 px，宽度为 50 px。

以前有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:37:32.123

应该很简单。

假设你有`width`and `height`（你的源图像），你需要你的输出在`cropped_width`and中`cropped_height`。

首先，我们需要计算源图像的中心：

```
int x_center=width/2;
int y_center=height/2; 
```

然后，我们知道我们需要输出图片具有定义的大小，所以我们将大小的一半取到左右：

```
int x_source=x_center-cropped_width/2;
int y_source=y_center-cropped_height/2; 
```

最后，你有你的裁剪矩形：

```
Rect r = new Rect(x_source, y_source, cropped_width, cropped_height); 
```

使用某种形式`DrawImage()`将该矩形复制到您需要的位置。

# wpf - Access ControlTemplate 组件（Windows 8 应用程序）

> ID：13233172
> 
> 赞同：0
> 
> 时间：2012-11-05T13:31:26.543
> 
> 标签：wpf, templates, controls

我想将一些UI元素组合成一个Control，然后通过代码访问它们。但是我无法弄清楚。控制模板：

```
<Page.Resources>
    <Style x:Key="GridViewStyle1" TargetType="GridView">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GridView">
                    <Grid>                      
                        <TextBox x:Name="theTextBox" Text="The Text" />                         
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources> 
```

以及对模板的引用：

```
<GridView x:Name="myGridView1" Style="{StaticResource TileControl}"/> 
```

所以我正在寻找的是这样的，例如：

```
myGridView1.Style.Template.Gridview.theTextBox.Text 
```

但我找不到它。知道我该怎么做吗？或者也许我走错了路，因为它不应该那么复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:12:20.440

要检索 ControlTemplate 生成的元素，您可以使用类似的东西（在模板应用于控件之后）

```
yourcontrol.Template.FindName("ControlElementTemplateToFind") 
```

另请[参阅](http://msdn.microsoft.com/en-us/library/bb613586.aspx)

# android - 将安卓手机与PC连接（远程管理工具）

> ID：13233174
> 
> 赞同：3
> 
> 时间：2012-11-05T13:31:33.783
> 
> 标签：android, android-intent, xamarin.android

任务是将android手机与PC连接，让PC管理手机（例如在实时模式下查看屏幕），不是通过usb或wi-fi而是通过3G宽带连接。

**我想过做这样的事情：**

1.  打开端口并向PC发送连接手机所需的信息
2.  PC 获取信息并连接到手机
3.  PC可以管理/查看/编辑手机上的文件。

但问题是我不知道如何执行这 3 个步骤*，或者*该任务是否有更好的解决方案。

**信息：**

*   还没有写一行代码。
*   Android 手机型号未公布（究竟什么型号是对象并不重要，但让我们以最受欢迎的型号为例，例如 Galaxy S III

//编辑：**也许是 SSH 隧道或类似的东西？**

# java - 适当的碰撞

> ID：13233176
> 
> 赞同：4
> 
> 时间：2012-11-05T13:31:41.020
> 
> 标签：java, lwjgl, slick2d

所以基本上我试图弄清楚如何在两个矩形之间进行适当的碰撞。检测不是问题，但矩形开始剪裁。我想重置位置，但我该怎么做。我正在尝试使用 dx 和 dy 进行重置，但它不会重置到正确的坐标。

[http://i.stack.imgur.com/IU6sK.png](http://i.stack.imgur.com/IU6sK.png)（抱歉我还不能使用图片）

```
System.out.println(this.y + this.h + " " +  e.getY());
if(this.y + this.h >= e.getY())
{
    if(this.dy > 0)
    {
        this.y -= delta * this.dy + 0.1; 
        this.dy = 0;
    }
    else 
    {
        this.y += delta * this.dy;
        this.dy = 0;
        this.inAir = false;
    }
} 
```

这段代码只是一个例子，展示了我如何尝试它。（this = 白色矩形，e = 橙色）我使用了我的类 Entity，它扩展了 Rectangle。

在我打电话给这个之前，我正在检查十字路口。这是“白色”实体中的一个函数，并且在主循环的更新函数中检查了交集。

如果我使用它，矩形之间会有 1px 的距离。有任何想法吗？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:42:44.093

[http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html)

使用`Rectangle`类。

### 在这里，一些代码

[http://pastebin.com/raw.php?i=TzkST3Hm](http://pastebin.com/raw.php?i=TzkST3Hm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:01:02.503

进行矩形碰撞的最好方法是使用`Rectangle`类检测碰撞的`.intersects(Rectangle)`方法，然后计算一个名为`displacementX`and的新变量`displacementY`。

`displacementX = Math.abs(entitiy1.getX() - entity2.getX());`

`displacementY = Math.abs(entitiy1.getY() - entity2.getY());`

因此，我们目前所拥有的`entity1`是侵入的像素数量`entity2`（由于绝对值，反之亦然）。然后，运行一些比较并移动`entity1`（或`entity2`） lesser 的值`displacement`，这应该会产生完美的碰撞。

至少我是这样做的。矩形碰撞的正确方法是：

1）确定它们是否碰撞

2）纠正它

3) 渲染

Simply preventing movement after detecting collision will look horrible (especially on low frame rates).

Hope I helped!

~Izman

# nhibernate - nhibernate 映射多个复合键抛出 System.IndexOutOfRangeException

> ID：13233178
> 
> 赞同：1
> 
> 时间：2012-11-05T13:32:05.873
> 
> 标签：nhibernate, mapping, composite

我在旧数据库中遇到以下情况 [示例]

```
table1   
**ID_TABLE1 [PK]   
ID_SOURCE** [PK]   

table2   
**ID_TABLE2 [PK]   
ID_SOURCE** [PK]   

table3   
**ID_TABLE3 [PK]   
ID_SOURCE** [PK][FK]   
ID_TABLE2 [FK]   
ID_TABLE1 [FK]   

 public partial classTable3Map : ClassMap<TABLE3>
    {
        public classTable3Map()
        {
            Table("TABLE3");
            LazyLoad();
            CompositeId().KeyProperty(x => x.ID_TABLE3 , "ID_TABLE3").KeyProperty(x => x.ID_SOURCE, "ID_SOURCE");
          References(x => x.TABLE1).Columns("ID_TABLE1 ", "ID_SOURCE");
          References(x => x.TABLE2).Columns("ID_TABLE2 ", "ID_SOURCE");
        }
    } 
```

当我尝试保存这种类型的对象时，nhibernate 抛出一个

```
**System.IndexOutOfRangeException**    
  Message=Index xx non valid  for xxxParameterCollection 
```

我会看到它有更多的输入然后是参数（重复的 ID_SOURCE 列）

当我尝试映射到 m 关系时，情况是一样的。

如果我映射 id 而不是对象（参考）并在插入之前保存孩子，我可以保存，但我必须重写模型并进行许多手动调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:00:01.577

不幸的是，无法将列指定为主键和外键的一部分，[请参见此处了解类似问题](https://stackoverflow.com/q/6047926/671619)。

我看到的选项：

*   做参考`.Readonly()`
*   尝试为引用实现 ICompositeUserType 但您将失去急切的加载和查询

# java - 对 REST 服务进行单元测试

> ID：13233180
> 
> 赞同：2
> 
> 时间：2012-11-05T13:32:08.667
> 
> 标签：java, unit-testing, rest, jetty

我有一个基于[spark-framework](http://sparkjava.com/)的 REST-Service 。看起来像这样（简化）：

```
public void init() {

    get(new Route("spark/favorites") {
        @Override
        public Object handle(Request request, Response response) {
            ExternalService exS= new ExternalService();             

            ArrayList<String> favs= exS.getFavorites();

            Gson gson = getGson();
            return gson.toJson(favs);
        }
    });
 } 
```

现在我想为我的服务编写一些测试，看看我的 get/post/put/delete 是否符合我的要求。因此，我在测试期间将其部署在嵌入式 Jetty 上。

我现在面临的问题是我的服务依赖于外部 REST 服务。我想模拟对这些的所有调用（进行快速单元测试）。但我不知道如何在运行的服务中进行模拟。

这甚至可能吗？我应该切换到另一个 REST 框架吗？建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:01:57.223

这是一个集成测试，无论您的应用程序是与 webservice mocks 还是真正的 3rd 方 webservices 对话。单元测试是当你单独测试你的类时。

如果您想模拟外部 Web 服务，您需要将指向 3rd 方应用程序的链接设置为可配置的，并且有一个单独的配置仅用于集成测试。对于 web 服务模拟，您可以使用几个可用的模拟框架之一： [https ://sourceforge.net/projects/soaprest-mocker](https://sourceforge.net/projects/soaprest-mocker)

# ios - Xcode 更改未修改的故事板和 XIB 文件

> ID：13233181
> 
> 赞同：135
> 
> 时间：2012-11-05T13:32:13.577
> 
> 标签：ios, xcode, interface-builder, storyboard, xib

从 git 工作流程的角度来看，当多人协作时，情节提要相当痛苦。例如，.storyboard 文件中的 XML 的起始`<document>`标记`toolsVersion`和`systemVersion`属性会被最新的文件操纵器碰巧正在运行的任何配置更改。精确同步每个人的 Xcode 版本似乎有助于解决问题`toolsVersion`，但`systemVersion`无论如何都会发生变化，具体取决于开发人员正在运行的特定 Mac 和/或 OS X 版本。

这是愚蠢的，但大多是无害的。然而，让我们担心的是，在其他时候，只需在`git pull`. 也就是说，Alice 对故事板进行更改，提交并将它们推送到存储库。然后 Bob 提取 Alice 的更改并打开情节提要以进行进一步的更改。在他打开故事板的那一刻，文件图标立即变为已修改但未保存的状态，并`git status`显示发生了许多奇怪的变化。所有这一切都没有 Bob 更改任何内容或自己保存文件。

我们看到的最常见的自动更改是`<classes>`故事板文件末尾附近整个标签层次结构的消失或重新出现。我们还没有弄清楚是什么原因造成的。我们可能在不同的 .lproj 目录中有几个本地化版本的故事板，当在 Interface Builder 中打开它们时，类层次结构可能会自发地从一些中删除并添加到其他目录中，或者在某些目录中单独存在。这会在 中引起很多噪音`git diff`，但实际上并没有破坏任何功能。我们通常会选择性地将我们所做的实际更改添加到 git 的索引中，提交这些更改，然后丢弃自发的、无意义的`<classes>`变化。这是为了保持提交小而漂亮，因为它们应该是。但是，最终，由于 Xcode 不断地重新进行更改，并且有人只是愤怒地提交它们以及其他一些东西......这很好，直到其他人的 Xcode 决定想要将它们改回没有明显的原因。（我们的提交历史对此有很多咒骂。）

还有其他人看到这种行为吗？这是我们的一台或多台开发人员 Mac 上的 Xcode 错误还是配置问题？在与 XIB 文件协作时，我们已经看到了一些类似的行为，但情节提要似乎更容易受到这种影响。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-08-28T09:57:44.827

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-05T13:36:40.200

这是 XCode 4.5+ 中的一个错误，我希望它得到修复，是的，它是一个 PITA。

这是Apple的完整错误

[如何避免 Xcode 对情节提要文件进行无偿编辑？](https://stackoverflow.com/questions/5900245/how-to-avoid-xcode-4s-gratuitous-edits-to-xib-files)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-20T14:28:29.130

这个问题可以通过非常明智地使用`git add -p`任何 Xcode 生成的文件来缓解，包括故事板、XIB、核心数据模型和项目文件，所有这些都遭受了对实际界面/模型/没有影响的类似临时修改。项目。

我在情节提要上看到的最常见的垃圾更改是系统版本号（正如您提到的）以及不断添加和删除该`<classes>`部分，我从未见过遗漏会导致问题。对于 XIB，它是 的添加和删除`<reference key="NSWindow"/>`，这在 Cocoa Touch 中甚至不是一个类。哇。

*把它想象成大海：涨潮和退潮都有。让它冲刷你。*

*啊。就是这样。*

您可以在暂存更改、重置垃圾更改并进行干净提交时忽略这些修改。

从技术角度来看，我在故事板中看到的与 XIB 相比的唯一优势是，Apple 尚未取消 FileMerge 以拒绝合并有冲突的故事板。（FileMerge 曾经能够合并 XIB，但新版本打破了这一点。Thxxxx 伙计们！！！）

[请在http://bugreporter.apple.com/](http://bugreporter.apple.com/)上提交有关所有这些问题的大量错误！并且不要忘记在[OpenRadar](http://openradar.appspot.com/)上创建条目。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-01T18:14:13.497

Throwing on another answer here because this situation has improved greatly. The XML for the XIB file that represents the StoryBoard has been greatly simplified.

I have also recently bitten the bullet and started to use the interface in Xcode to Source Control. I have been on the command line for years and happy there, but the interface is nice and it lets you split commits, which is really important if you use a ticketing system that links to commits.

Anyway, I noticed today that there was a change on the storyboard and the built in diff showed me it was a single attribute in the document tag (systemVersion). So not a big deal.

I have read articles where people say SBs were outlawed on their teams because of merging issues. Total madness. They are so amazing, especially now that they have intelligent autolayout built in, you are really missing out if you are not using them.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-11T16:26:05.477

It's helpful to know *why* this insanity is happening, but for those who believe in keeping their projects free of warnings and who just want a quick-and-dirty to get their projects back to a healthy state:

1.  Don't commit anything until explicitly instructed.

2.  Open Xcode and create a new storyboard (Command+N > iOS > User Interface > Storyboard). I'll assume you call it the default name of `Storyboard.storyboard`.

3.  Open the storyboard that Xcode has violated. I'll assume this is `Base.lproj/Main.storyboard`.

4.  Select and copy everything on the storyboard (Command+A then Command+C).

5.  Open `Storyboard.storyboard`.

6.  Copy and paste everything into `Storyboard.storyboard`.

7.  Close Xcode.

8.  Open a terminal and change directories to your repository.

9.  Replace `Main.storyboard` with `Storyboard.storyboard` (`mv Storyboard.storyboard Base.lproj/Main.storyboard`).

10.  `git add Base.lproj/Main.storyboard; git commit -m "Fix Xcode's insanity."`

11.  Disregard the changes to `project.pbxproj` via `git checkout -- project.pbxproj`. If you `git diff` the file, you'll see that it has just added information about our temporary storyboard (which no longer exists).

12.  Open Xcode back up and see that the warnings has disappeared.

13.  Breathe.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-10T07:44:28.880

Working on same storyboard is not a problem. But working on same viewcontroller which creates conflicts on pull/merge is frightening. we can not really avoid that working in same viewcontroller for a large team.

Good thing is, most of the time we can fixed the same viewcontroller conflicts if we understand the xml structure. I never failed to merge these while working in team. Suppose you are working with a viewcontroller. Your view is blank currently. Please ,have a look at the viewcontroller's xml structure from source code option.

[![enter image description here](../Images/1cd508e616b7515181cf9e9df23328e7.png)](https://i.stack.imgur.com/vlBSk.png)

Storyboard is xml bounded by document type tag. Everything in the storyboard contains in scene sceneID= tag. scene tag holds every viewcontrollers. Thats the basic.

Now we added a UILabel and a UIButton on the view. Also set the autolayout of the elements. Now it's looks like :

[![enter image description here](../Images/476caa66505db45f34c617d200b1091b.png)](https://i.stack.imgur.com/EC3Is.png)

Adding a level/button to viewcontroller added some new code inside the subview tag of the view. Same thing will go for further element addition or any UI changes. Carefully check the tag structure which is really important to fix any conflicts.

Now we add another viewcontroller in the storyboard name Homeviewcontroller. Adding a new viewcontroller means it adds a new scene under scenes tag. Look at this:

[![enter image description here](../Images/bc0a2878d9c2186b055f3dea5ee2b1ba.png)](https://i.stack.imgur.com/PEPZZ.png)

At this point, we will change the structure randomly and observe the issues/warnings. We change first viewcontroller label end tag and save the file. Now run it and look at the warning. Error says end tag is not correct which created from line 23\. In line 23 , we see a label constrains is set with no end tag. That's the problem. Now we put the end tag and build the project. After setting end tag, we can view the storyboard successfully.

[![enter image description here](../Images/71a2a3f3a805a0708200f56d6db62556.png)](https://i.stack.imgur.com/xoF6u.png)

When face any warning of conflicts , please compare with your previous source and changes source. We remove the old/redundant code , keep the new code with proper tag start-end and get things fixed.

[N.B , i will update the answer with some more test cases when get times]

# asp.net-mvc-3 - 使用 mvc4 自定义路由

> ID：13233188
> 
> 赞同：0
> 
> 时间：2012-11-05T13:32:59.600
> 
> 标签：asp.net-mvc-3, routes, asp.net-mvc-routing

我正在实现一个具有文件文件夹系统的系统（用户可以拥有文件夹，并且每个文件夹都可以再次拥有文件或文件夹）。我想根据文件夹构建 URL。假设用户有一个文件夹“Folder1”，其中还有另一个文件夹“Folder2”。当我在 Folder1 中时，我希望 Url 看起来像“Home/Folder1”，当用户单击“Folder1”中的“Folder2”时，Url 应该看起来像“Home/Folder1/Folder2”，它可以永远这样： )

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
//   THIS IS THE LINE I ADDED
        routes.MapRoute(
            "Home",
            "{folderPath}",
            new { controller = "Home", action = "Index", folderPath = UrlParameter.Optional }
        );      
//   END OF LINE I ADDED           
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = -1 }
        );
    }
} 
```

我更改了 RouteConfig 文件，现在我可以拥有 'Home/Folder1' 和 'Home/Folder2' 不幸的是，这不是我想要的：/

我希望我清楚地解释了我的问题。如果有人可以帮助我，我将不胜感激。通过我实际上使用MVC4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:50:29.333

将 * 添加到文件夹路径：

```
"{*folderPath}", 
```

但这将使第二条路线无用。

# android - 在android中测试加速度计

> ID：13233191
> 
> 赞同：4
> 
> 时间：2012-11-05T13:33:03.493
> 
> 标签：android, accelerometer

我正在开发一个使用平板电脑加速度计功能的 Android 项目。我现在稍微在这个项目的开始，所以没有反对找到我的投诉的解决方案。问题是，我现在没有安卓设备，我想测试我的加速度计的灵敏度或方向。如您所知，android 模拟器中没有这样的功能。如何测试这些传感器和事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:39:56.207

您可以尝试在模拟器中模拟传感器数据： [http ://code.google.com/p/openintents/wiki/SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:41:24.063

`SensorSimulator`允许使用鼠标操作在模拟器中模拟加速度计。

只需从此链接下载并安装它[。](http://code.google.com/p/openintents/wiki/SensorSimulator)

# google-maps - Google 地方信息自动完成

> ID：13233196
> 
> 赞同：8
> 
> 时间：2012-11-05T13:33:26.987
> 
> 标签：google-maps, google-places-api

输入框已正确初始化，但未生成任何建议。谁能指出我做错了什么？[这](http://pastebin.com/eFyuUMEj)是代码。

**更新**

我已经调查了这个问题。问题在于：

```
types: ['(cities)', '(regions)'] 
```

当我只指定一种类型时，`types: ['(cities)']`不管`region or cities`它是否有效。但是两种类型不能一起工作。尽管[文档](https://developers.google.com/maps/documentation/javascript/3.exp/reference#AutocompleteOptions)清楚地说明`types`了字符串数组和有效值是`'establishment', 'geocode', '(regions)' and '(cities)'`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T03:28:06.070

如[文档](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)中所述：

> *“类型，可以指定两种显式类型之一或两种类型集合之一。”*

这意味着该`types`数组只支持一个参数。

如果您认为支持多个参数或显式类型和集合的混合是一项有用的功能，请提交[Places API - 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-29T19:41:37.253

正如 Chris 所提到的，目前没有办法获得多种地点类型的结果。但是，您可以使用不同的地点类型调用 API 两次，并使用这两种类型填充地图（或您正在构建的任何东西）。例如：

```
var request1 = {
  location: event.latLng,
  radius: 8047,
  types: ['cafe'],
};
var request2 = {
  location: event.latLng,
  radius: 8047,
  types: ['library'],
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:08:47.077

没有类型为 (cities)' 或 '(regions)' 的结果。如果我将类型数组更改为 ['establishment']，我会得到结果。

[工作示例](http://www.geocodezip.com/v3_SO_autocompleteA.html)

如果您只使用一种类型，它可以工作：

[例子](http://www.geocodezip.com/v3_SO_autocompleteB.html)

# tomcat - 嵌入式 Tomcat 7.0.32 启动 jar 扫描器

> ID：13233205
> 
> 赞同：1
> 
> 时间：2012-11-05T13:34:03.913
> 
> 标签：tomcat, flume

我将 Tomcat 7.0.32 嵌入到 Flume Source 中。我遇到的问题是 Flume 在 Classpath 上放置了很多东西，并且在启动时，Tomcat 会扫描类路径以查找 TLD，这会导致问题，因为 flume 使用了通配符。

信息：启动 Servlet 引擎：Apache Tomcat/7.0.32 Nov 05, 2012 8:21:08 AM org.apache.catalina.startup.TldConfig tldScanJar 警告：无法处理 JAR [jar:file:/opt/mapr/hadoop/ hadoop-0.20.2/hadoop*core*.jar!/] 用于 TLD 文件 java.io.FileNotFoundException: /opt/mapr/hadoop/hadoop-0.20.2/hadoop*core*.jar （没有这样的文件或目录）在 java.util.zip.ZipFile.open(Native Method) 在 java.util.zip.ZipFile.(ZipFile.java:214) 在 java.util.zip.ZipFile.(ZipFile.java:144) 在 java.util .jar.JarFile.(JarFile.java:152) 在 java.util.jar.JarFile.(JarFile.java:89) 在 sun.net.www.protocol.jar.URLJarFile.(URLJarFile.java:93) 在 sun .net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:69) 在 sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:88) 在 sun.net.www.protocol.jar .JarURL 连接。connect(JarURLConnection.java:122) 在 sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:89) 在 org.apache.tomcat.util.scan.FileUrlJar.(FileUrlJar.java:41) 在org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:34) 在 org.apache.catalina.startup.TldConfig.tldScanJar(TldConfig.java:487) 在 org.apache.catalina.startup.TldConfig。在 org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:241) 访问 $100(TldConfig.java:58) 在 org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java:303) ) 在 org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:204) 在 org.apache.catalina.startup.TldConfig.execute(TldConfig.java:277)89) 在 org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:34) 在 org.apache.catalina 的 org.apache.tomcat.util.scan.FileUrlJar.(FileUrlJar.java:41)。 startup.TldConfig.tldScanJar(TldConfig.java:487) 在 org.apache.catalina.startup.TldConfig.access$100(TldConfig.java:58) 在 org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java :303) 在 org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:204) 的 org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:241)。 catalina.startup.TldConfig.execute(TldConfig.java:277)89) 在 org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:34) 在 org.apache.catalina 的 org.apache.tomcat.util.scan.FileUrlJar.(FileUrlJar.java:41)。 startup.TldConfig.tldScanJar(TldConfig.java:487) 在 org.apache.catalina.startup.TldConfig.access$100(TldConfig.java:58) 在 org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java :303) 在 org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:204) 的 org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:241)。 catalina.startup.TldConfig.execute(TldConfig.java:277)487) 在 org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java:303) 在 org.apache.tomcat 的 org.apache.catalina.startup.TldConfig.access$100(TldConfig.java:58)。 org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:204) 中的 util.scan.StandardJarScanner.process(StandardJarScanner.java:241) org.apache.catalina.startup.TldConfig.execute(TldConfig.爪哇：277）487) 在 org.apache.catalina.startup.TldConfig$TldJarScannerCallback.scan(TldConfig.java:303) 在 org.apache.tomcat 的 org.apache.catalina.startup.TldConfig.access$100(TldConfig.java:58)。 org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:204) 处的 util.scan.StandardJarScanner.process(StandardJarScanner.java:241) org.apache.catalina.startup.TldConfig.execute(TldConfig.爪哇：277）

在我的代码中，我尝试禁用此扫描，甚至尝试在我的上下文中将 JarScanner 设置为 null。这无济于事。下面是我的代码：

```
File docBase = new File(System.getProperty("java.io.tmpdir"));
    System.out.println("------- " + docBase.getAbsolutePath());

    String servletName = "1 source";

    Tomcat tomcat = new Tomcat();
    tomcat.setPort(8080);
    tomcat.setBaseDir(docBase.getAbsolutePath());

    Context context = tomcat.addContext("", docBase.getAbsolutePath());
    context.setIgnoreAnnotations(true);
    context.setJarScanner(null);

    Tomcat.addServlet(context, servletName, new HttpServlet() { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:33:47.413

尝试这个！上下文上下文 = tomcat.addWebapp("/d", "d:/"); JarScanner jarScanner = 新 JarScanner() {

```
 @Override
        public void scan(ServletContext arg0, ClassLoader arg1,
                JarScannerCallback arg2, Set<String> arg3)
        {
            //do nothing
        }
    };
    context.setJarScanner(jarScanner); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T08:33:06.727

你可以在 tomcat.addWebapp() 之前禁用扫描类路径和清单：

```
ContextConfig contextConfig = new ContextConfig() {
            private boolean invoked = false;

            @Override
            public void lifecycleEvent(LifecycleEvent event) {
                if (!invoked) {
                    StandardJarScanner scanner = new StandardJarScanner();
                    scanner.setScanClassPath(false);
                    scanner.setScanManifest(false);
                    ((Context) event.getLifecycle()).setJarScanner(scanner);
                    invoked = true;
                }
                super.lifecycleEvent(event);
            }
        };
        Context ctx = tomcat.addWebapp(tomcat.getHost(), "/", "path/to/war", contextConfig); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T13:54:00.897

其他两个答案不适用于 Tomcat 8.5+。addWebApp 将 contextconfig 作为字符串。但是您可以使用下面的代码进行选择性扫描。请注意，如果 JarScanner 在 context.xml 中定义，它将优先于代码。一旦你调用了 tomcat.start()，JarScanFilter 就会被回调

```
 Context context = tomcat.addWebapp("/"+sApp, location);
            //Keep in mind that this JarScanFilter will be overwritten by JarScanner that defined in META-INF\context.xml
            JarScanFilter jarScanFilter = new JarScanFilter() {

                @Override
                public boolean check(JarScanType jarScanType, String jarName) {

                    if(jarName.startsWith("spring")) {
                        System.out.println("JarScanType: "+ jarScanType +" JarName: "+ jarName + " Will Scan: true");
                        return true;
                    }
                    System.out.println("JarScanType: "+ jarScanType +" JarName: "+ jarName + " Will Scan: false");
                    return false;
                }
            };
            context.getJarScanner().setJarScanFilter(jarScanFilter); 
```

# php - 儿童主题的节选长度

> ID：13233212
> 
> 赞同：1
> 
> 时间：2012-11-05T13:34:36.843
> 
> 标签：php, wordpress

再一次，我的成熟 php 技能让我被它的弦钉住了！

我正在尝试更改我的 Wordpress 博客页面上帖子摘要的摘录长度。到目前为止，我已经创建了一个子主题，将 content.php 文件代码替换为

```
<div class="entry-content">
            <?php the_excerpt( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyeleven' ) ); ?>
            <?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'twentyeleven' ) . '</span>', 'after' => '</div>' ) ); ?>
        </div><!-- .entry-content --> 
```

并添加了一个带有以下代码的函数文件

```
 <?php

function CHILDTHEME_excerpt_length($length) {
    return 600;
}
add_filter('excerpt_length', 'CHILDTHEME_excerpt_length'); ?> 
```

而且你知道什么......它仍然与以前一样在博客页面上保持相同的摘要长度。我究竟做错了什么？

一如既往地非常感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:28:38.147

You must set the filter priority right:

```
add_filter('excerpt_length', 'CHILDTHEME_excerpt_length', 999); 
```

Without specifying the priority WordPress filter on this function will run last and override what you set here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:31:26.830

您可能有一个在您的过滤器之后运行并重置长度的过滤器。您可以设置更高的优先级，这可能是猜测，直到您获得足够高的优先级。另一种选择是在添加之前删除此钩子的所有现有过滤器：

```
function my_excerpt_length($length){
   return 400;
}
remove_all_filters( 'excerpt_length' );
add_filter( 'excerpt_length', 'my_excerpt_length', 999 ); 
```

# c++ - 函数类型可以是类模板参数吗？

> ID：13233213
> 
> 赞同：17
> 
> 时间：2012-11-05T13:34:39.317
> 
> 标签：c++, c++11, templates, function-pointers

下面的代码被 VC++ 2012 拒绝，并显示“错误 C2207：'A::bar'：类模板的成员无法获取函数类型”。

```
int Hello(int n)
{
    return n;
}

template<class FunctionPtr>
struct A
{
    A(FunctionPtr foo)
        : bar(foo)
    {}

    FunctionPtr bar;
};

int main()
{
    A<decltype(Hello)> a(Hello);

    return 0;
} 
```

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:00:28.790

gcc 对这个错误更友好一点：

```
error: field 'A<int(int)>::bar' invalidly declared function type 
```

最简单的解决方案是声明`bar`为函数指针：

```
FunctionPtr *bar; 
```

在这种情况下，`decltype(Hello)`计算结果为`int(int)`not `int(*)(int)`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T16:12:57.130

变量不能有函数类型。您声明`bar`为`FunctionPtr`which is which is which is which is which is which is which is`decltype(Hello)`评估为`int (int)`，而不是函数指针类型。

由于从 C 继承的一些不一致，这很令人困惑。当您将构造函数定义`A`为采用 a`FunctionPtr`时，您可能会想象您会得到相同的错误。但是，声明为具有数组或函数类型的函数参数会自动（不幸的是，不方便）变成指针类型。因此，即使`foo`被声明为具有函数类型，它实际上也具有函数指针类型并且可以正常工作。

但是这条规则只适用于函数参数，不适用于其他变量，所以`bar`实际上确实有一个函数类型，这是不合法的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-06T15:39:46.133

添加其他答案，您可以利用以下事实：

*   `decltype(Hello)`计算结果为`int (int)`（不是函数指针类型）；
*   函数可以隐式转换为指向自身的指针；这种转换几乎无处不在（例如[通过值传递函数（？）而不是函数指针？](https://stackoverflow.com/q/7111251/3235496)）。

以下代码：

```
#include <type_traits>

template<class F>
struct A
{
    A(F foo) : bar(foo) {}

    typename std::conditional<std::is_function<F>::value,
                              typename std::add_pointer<F>::type,
                              F>::type bar;
}; 
```

是一个通用解决方案，允许函数、函数指针、仿函数和 lambda 具有相同的语法：

```
#include <type_traits>
#include <iostream>

void Hello() { std::cout << "Function\n"; }

struct Hello2 { void operator()() { std::cout << "Struct\n"; } };

void Hello3() { std::cout << "Function pointer\n"; }

template<class F>
struct A
{
  A(F foo) : bar(foo) { bar(); }

  std::conditional_t<std::is_function<F>::value, std::add_pointer_t<F>, F> bar;
};

int main()
{
  A<decltype(Hello)> a(Hello);

  Hello2 h2;
  A<decltype(h2)> b(h2);

  A<decltype(&Hello3)> c(&Hello3);

  auto Hello4 = []() { std::cout << "Lambda\n"; };
  A<decltype(Hello4)> d(Hello4);
} 
```

（这里我利用 C++14 特性稍微改变了解决方案）。

Indeed`std::function`是一个（并不总是更好的）替代方案。

# java - 将 JavaFx 添加到小程序

> ID：13233214
> 
> 赞同：2
> 
> 时间：2012-11-05T13:34:48.107
> 
> 标签：java, applet, javafx

大家好，我是 JavaFx 的新手，目前正在使用 JavaFx 场景构建器创建我的程序。我从来不是创建 GUI 的专家，因此 JavaFx 场景构建器允许我优化视觉效果！

我在工作中被分配为我们公司的一个网站创建一个小程序，小程序的内容应该是一个图表，将显示一些详细信息。

因为我喜欢 JavaFx，而且我发现可以在 JavaFx 中创建并在 CSS 中操作的图形非常棒，我想使用 JavaFx 来创建我的小程序。

但是，我的问题是我是否也可以使用 JavaFx 场景构建器来创建我的小程序，或者我是否被迫从 scrats 编写代码？

另外在旁注中，有没有人知道任何关于如何将 JavaFx 应用到 Applet 的教程，我一直在 Google 上寻找一些，但我只找到了一些非常高级的指南？

**编辑**

我确实找到了有关 JavaFx 的 Applets 的教程，但是它没有说明有关 JavaFx 场景构建器的任何内容

链接：[JavaFx Applet 教程](http://java.dzone.com/articles/creating-compiled-javafx-apple)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T11:36:02.300

是的，您可以将 JavaFX 场景构建器与小程序一起使用，我是一个教育项目的网站管理员，该项目需要小程序来绘制图形、与硬件通信、看起来不错、保持安全且难以下载；这就是为什么我们在大多数小程序中使用 JavaFX。

尽管我没有参与小程序制作过程，但我知道我们使用 JavaFX 场景构建器来创建图形用户界面。

此外，创建 JavaFX 和 JavaFX 场景构建器的主要原因是创建小程序，因为这是 Oracle 从 sart 开始的意图。

# php - 具有多个类和依赖项的 Firephp 日志记录

> ID：13233215
> 
> 赞同：1
> 
> 时间：2012-11-05T13:34:48.543
> 
> 标签：php, firephp

我正在编写一个相当大的 PHP 应用程序，并且已经到了想要一些调试输出的地步。我已经成功安装了 FireBug 和 FirePHP，并且成功地向控制台输出了一行文本。

这是现在的问题。我有一个名为 Register.php 的 php 文件，它基本上只包含用于显示视图和提交表单的代码。该文件调用 SiteViewModel.php 类中的函数来完成注册用户的实际后台工作。SiteViewModel.php 还调用其他 php 文件以连接到数据库并执行检查/插入。

如果我将调试行放在 SiteViewModel.php 文件构造函数中，我会得到 Firebug 控制台的输出。如果我将任何其他行放在其他任何地方，我什么都不会记录。

一些代码

注册.php：

```
<?php
require_once("/xampp/htdocs/SiteConfig.php");

if(isset($_POST['submitted']))
{
   if($rlrpgSite->RegisterUser())
   {
        $rlrpgSite->RedirectToURL("registrationthanks.php");
   }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <title>Register</title>
    <link rel="STYLESHEET" type="text/css" href="../style/fg_membersite.css" />
    <script type='text/javascript' src='../scripts/gen_validatorv31.js'></script>
    <link rel="STYLESHEET" type="text/css" href="../style/pwdwidget.css" />
    <script src="../scripts/pwdwidget.js" type="text/javascript"></script>      
</head>
<body>

<!-- Form Code Start -->
<div id='fg_membersite'>
<form id='register' action='<?php echo $rlrpgSite->GetSelfScript(); ?>' method='post' accept-charset='UTF-8'>
<fieldset >
<legend>Register</legend>

<input type='hidden' name='submitted' id='submitted' value='1'/>

<div class='short_explanation'>* required fields</div>
<input type='text'  class='spmhidip' name='<?php echo $rlrpgSite->GetSpamTrapInputName(); ?>' />

<div><span class='error'><?php echo $rlrpgSite->GetErrorMessage(); ?></span></div>
<div class='container'>
    <label for='firstname' >First Name*: </label><br/>
    <input type='text' name='FirstName' id='FirstName' value='<?php echo $rlrpgSite->SafeDisplay('FirstName') ?>' maxlength="100" /><br/>
    <span id='register_firstname_errorloc' class='error'></span>
</div>
<div class='container'>
    <label for='lastname' >Last Name*: </label><br/>
    <input type='text' name='LastName' id='LastName' value='<?php echo $rlrpgSite->SafeDisplay('LastName') ?>' maxlength="100" /><br/>
    <span id='register_lastname_errorloc' class='error'></span>
</div>
<div class='container'>
    <label for='email' >Email Address*:</label><br/>
    <input type='text' name='EmailAddress' id='EmailAddress' value='<?php echo $rlrpgSite->SafeDisplay('EmailAddress') ?>' maxlength="512" /><br/>
    <span id='register_email_errorloc' class='error'></span>
</div>
<div class='container'>
    <label for='username' >UserName*:</label><br/>
    <input type='text' name='UserName' id='UserName' value='<?php echo $rlrpgSite->SafeDisplay('UserName') ?>' maxlength="255" /><br/>
    <span id='register_username_errorloc' class='error'></span>
</div>
<div class='container' style='height:80px;'>
    <label for='Password' >Password*:</label><br/>
    <div class='pwdwidgetdiv' id='thepwddiv' ></div>
    <noscript>
    <input type='password' name='Password' id='Password' maxlength="50" />
    </noscript>    
    <div id='register_password_errorloc' class='error' style='clear:both'></div>
</div>

<div class='container'>
    <input type='submit' name='Submit' value='Submit' />
</div>

</fieldset>
</form>
<!-- client-side Form Validations:
Uses the excellent form validation script from JavaScript-coder.com-->

<script type='text/javascript'>
// <![CDATA[
    var pwdwidget = new PasswordWidget('thepwddiv','Password');
    pwdwidget.MakePWDWidget();

    var frmvalidator  = new Validator("register");
    frmvalidator.EnableOnPageErrorDisplay();
    frmvalidator.EnableMsgsTogether();
    frmvalidator.addValidation("firstname","req","Please provide your name");

    frmvalidator.addValidation("lastname","req","Please provide your name");

    frmvalidator.addValidation("email","req","Please provide your email address");

    frmvalidator.addValidation("email","email","Please provide a valid email address");

    frmvalidator.addValidation("username","req","Please provide a username");

    frmvalidator.addValidation("Password","req","Please provide a password");

// ]]>
</script>

<!--
Form Code End (see html-form-guide.com for more info.)
-->

</body>
</html> 
```

站点配置.php：

```
<?php
require_once('SiteViewModel.php');

$rlrpgSite = new siteviewmodel();

$rlrpgSite->SetWebsiteName('localhost.com');

$rlrpgSite->SetAdminEmail('rlrpg@localhost.com');

$rlrpgSite->SetRandomKey('Hng2XxIdNfp8EwO');
?> 
```

站点视图模型.php：

```
<?php
class siteviewmodel
{
...
function siteviewmodel()
    {
        ob_start();
        fb("Instantiating");
        //This works
    }

RegistUser()
    {
        ob_start();
        fb("Registering");
        //doesn't work
    }
}
?> 
```

# jquery - 我想在 jquery mobile 的 listview 中删除特定元素？

> ID：13233217
> 
> 赞同：1
> 
> 时间：2012-11-05T13:34:55.803
> 
> 标签：jquery

```
 <script type="text/javascript">
        $(document).ready(function(e) {
            $(".list").live("click", function(e) {
                $('#buran').append('<li  data-corners="false" class="live ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-corner-bottom ui-li-last ui-btn-up-e" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right"><div class="ui-btn-inner ui-li"><div class="ui-btn-text"><a href="#" class="list ui-link-inherit">' + $(this).text() + '</a></div><span class="ui-icon ui-icon-arrow-r ui-icon-shadow">&nbsp;</span></div></li>');
                $('#buran').listview('refresh');
            });
        });
    </script> 
```

我想在追加事件时删除当前元素？

# objective-c - 从弹出窗口刷新视图

> ID：13233220
> 
> 赞同：1
> 
> 时间：2012-11-05T13:35:11.707
> 
> 标签：objective-c, popover, delegation, nsnotification

我正在使用 Xcode 4.5 并针对 iOS 5 及更高版本。
我有一个弹出框，允许用户更改底层视图的背景。

点击“按钮”时，需要我点击两次才能看到更改。
我正在使用`NSNotification`. 我试过委托，但它什么也没做。
任何帮助或提示将不胜感激。

**从 viewWillAppear 来看：**

```
 // nav button is for background image selection
    navigationBtn.tag = buttonTag;
    [navigationBtn setBackgroundImage:[UIImage imageNamed:tempImage] forState:UIControlStateNormal];

    if (selectFlag) {
       [navigationBtn addTarget:self action:@selector(BGSelected:) forControlEvents:UIControlEventTouchUpInside];
    } else {
       navigationBtn.adjustsImageWhenHighlighted = NO;
    } 
```

**以及选择方法：**

```
- (void)BGSelected:(id)sender { 
    self.bgtag = [sender tag];
    SettingsDAO *settingsDao = [[SettingsDAO alloc] init];

    if ([self.currentView isEqualToString:@"New_Journal"])
    {
       NSLog(@"Update Journals Background");
       [settingsDao updateJournalBackgroundId:self.journalId withBackgroundId:self.bgtag];
    }
    // notification to let EntryView know the background has changed
    [[NSNotificationCenter defaultCenter] postNotificationName:@"aBackgroundChanged"
                                                    object:self];

    [settingsDao release];
} 
```

NSNotification 方法：

```
- (void)aBackgroundChanged:(NSNotification *)notification {
    [self invalidate];
    [self reloadSettings];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:01:48.140

如果您使用的是故事板，并且您的弹出框是一个 segue，您可以这样做：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   // perform all the operations...ecc
   [[(UIStoryboardPopoverSegue*)segue popoverController] setDelegate:self];
} 
```

然后你必须确保你的调用者控制器有所有的委托方法。

或者，使用 NSNotification：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   // perform all the operations...ecc
   [[NSNotificationCenter defaultCenter]
       addObserver:self
       selector:@selector(changeBackground:)
       name:BackgroundHasChangedNotification
       object:[segue destinationViewController]];
} 
```

然后只记得在 dealloc 中删除观察者，并在更改背景方法中：

```
-(void)changeBackground:(NSNotification*)notification {

   NSDictionary *userInfo = notification.userInfo;
   // I assume you are using background name
   NSString *backgroundName = [userInfo objectForKey:BackgroundOneConstant];
   // do the rest....

} 
```

# objective-c - 如何将我的 iOS 网络请求速率限制为一秒

> ID：13233231
> 
> 赞同：13
> 
> 时间：2012-11-05T13:35:47.227
> 
> 标签：objective-c, ios

许多（如果不是大多数）Web 服务对客户端都有速率限制。Delicious 表示客户端每秒可以发出一个请求；Twitter 对每个端点都有限制；我确信 Facebook、Flickr 和 Foursquare 都有自己的想法。

您可以使用`NSOperationQueue`.

**但是，您如何限制应用程序每秒仅发出一个请求？**

我查看了 Apple、AFNetworking、ASINetwork 和其他一些示例代码，但似乎没有一个可以解决这个问题。这对我来说似乎很奇怪。我承认我可能遗漏了一些*非常*明显的东西......

一些参数：

*   假设我有一个`NSOperationQueue`网络操作并且请求是一个`NSOperation`（我想也可能是一个 GCD 队列，但这是我一直在使用的）
*   队列中的每个请求使用相同的速率限制
*   我正在寻找 iOS 中的解决方案，但一般的想法可能会有用

可能的解决方案：

*   `sleep`中的语句`NSOperation`（它是一个队列/线程，所以这不会阻塞其他任何东西）
*   `NSTimer`在里面`NSOperation`
*   `performSelector:`在`NSOperation`（[我修补了 ASINetworking 以使用这种方法](https://github.com/sdarlington/asi-http-request)，尽管我没有使用它并且没有将更改推送到上游）
*   启动/停止队列（使用 KVO？）以确保不超过速率限制
*   特殊的“睡眠” `NSOperation`。这将是下一个网络操作将依赖的任务
*   完全忽略速率限制，当您收到“超出速率限制”错误响应时暂停一下

这些看起来都很乱。休眠的操作可能会阻止“优先级”队列的形式。启动/停止队列似乎很脆弱。无视限制是粗鲁的。

需要明确的是，我已经解决了这个问题。但解决方案似乎“凌乱”且有些脆弱。我想知道是否有更好、更清洁的选择。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:41:27.890

```
@implementation SomeNSOperationSubClass {
    BOOL complete;
    BOOL stopRunLoop;
    NSThread *myThread;
}

-(void) rateLimitMonitor:(NSTimer *)theTimer {
    [theTimer invalidate];
}

-(void) main {
    myThread = [NSThread currentThread];

    NSTimer *myTimer = [NSTimer timerWithTimeInterval:1 target:self  selector:@selector(rateLimitMonitor:) userInfo:nil repeats:NO];
    [[NSRunLoop currentRunLoop] addTimer:myTimer forMode:NSDefaultRunLoopMode];

    [self doAsyncThing];

    while ((!stopRunLoop || [myTimer isValid]) && [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);
    complete = YES;
}

-(void) internalComplete {
    stopRunLoop = YES;
}

-(void) setComplete {
    [self performSelector:@selector(internalComplete) onThread:myThread withObject:nil waitUntilDone:NO];
}

-(BOOL) isFinished {
    return complete;
}

@end 
```

在你的异步回调中

```
 [myNSOperationSubClass setComplete]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-25T23:40:01.923

iOS 13 中的新增功能是内置的。通过 Combine 框架的`debounce`操作符传递您的通信触发器，一切就绪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T12:10:55.157

这是对 Edwin 提供的几乎可行的解决方案的修复

```
- (void)main {
    for (double delay = 0.0; delay < 10.0; delay+=1) {
        [self networkCallWithDelay:delay];
    }
}

- (void)networkCallWithDelay:(double)delay {

      dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

    // Your asynchronous network call goes here
    });
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-31T22:48:59.337

可能的解决方案，假设您已经使用 NSOperation 以外的其他技术实现了网络模块。

使用 GCD 来解决这个问题。以下代码为每个网络调用引入了 1 秒的延迟。密切关注参数为`popTime`

```
- (void)main {

        for (NSInteger index = 0; index < 10; index++) {
            [self networkCallWithDelay:1*index];
        }
    } 
```

// 你的网络代码放在这里

```
- (void)networkCallWithDelay:(double)delay {

    double delayInSeconds = delay / 10.0f;

    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        // Your asynchronous network call goes here
    });
} 
```

# scheme - 比较列表中的项目？

> ID：13233232
> 
> 赞同：1
> 
> 时间：2012-11-05T13:35:51.090
> 
> 标签：scheme, mit-scheme

如果您有一个列表（ (1 4 5) 5 (6 2 5) ）和另一个列表（5 1 3 7 5 (9 2 4) ），我需要编写一个程序来比较第一个列表中的项目并查看如果他们在第二个。例如，(1 4 5) 在 (5 1 3 7 5 (9 2 3) ) 中出现 0 次。5 在此列表中出现 2 次， (9 2 4) 出现 0 次。所以列表将返回 (0 2 0)

我需要帮助编写一个包含两个列表的方案过程频率，第一个是比较每个组件的那个，第二个是计算第一个列表出现次数的那个。该过程应返回事件列表。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:19:57.137

这显然是一个家庭作业，所以我不会给你一个直接的答案。相反，我会为您指明正确的方向。对于初学者，将问题分为两个过程：

*   第一个过程，我们称之为它`counter`，接收一个元素和一个元素列表。它遍历元素列表，询问每个元素是否等于作为参数传递的元素。如果找到匹配项，则将累加结果加一，否则继续下一个元素。当到达空列表时，列表遍历结束，为此计数器返回零。

*   第二个过程被称为`frequency`接收问题中的两个列表并遍历第一个列表（要比较的元素列表）。对于这些元素中的每一个，它都会调用`counter`以找出结果，并在此过程中建立一个列表。

这是解决方案的一般结构，您必须填写空白：

```
(define (counter ele lst)
  (cond ((null? lst)
         <???>)
        ((equal? ele <???>)
         (<???> (counter ele <???>)))
        (else
         (counter ele <???>))))

(define (frequency els lst)
  (if (null? els)
      <???>
      (cons <???>
            (frequency <???> lst)))) 
```

请注意，`counter`我假设正在列表中的基本级别搜索元素，例如这将找不到元素：

```
(counter 5 '((5)))
=> 0 
```

如果您必须找到像上面示例中的匹配项，那么问题会更有趣 - 您需要以树状方式递归遍历列表列表。在 Stack Overflow 或 Internet 的其他地方有无数这样的例子；如果你觉得有点迷茫，我建议你看看[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)或[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/)，这两本书都会教你如何理解递归过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:43:39.967

通常我会用模板列表中的方法解决这个问题

```
template<class t>
class list
{
   bool contains( t obj )
   {
   for( int i = 0; i < this->size; i++ )
      if( this->at(i) == obj )
         return true;
   } 
} 
```

我希望这能帮到您 ;）

# c# - PictureBox大小坐标关系

> ID：13233235
> 
> 赞同：4
> 
> 时间：2012-11-05T13:36:05.653
> 
> 标签：c#, coordinates, picturebox

我在这里问一个问题，因为我不确定如何在谷歌中搜索它，我不知道如何称呼这个词。

我的意思是一个“零点”，它基本上位于元素的左上角，例如图片框。因此，当我为图片框设置新的宽度和高度属性时，它可以正常工作，但它是相对于左上角的。

我的意思是你有图片框，比如说 100 x 100，你希望将它减小到 50 x 100，所以你的图片框下面会出现“空白空间”，而不是上部。PictureBox 从这个左上角零点开始计算它的属性。

而我需要的是把这个点改到另一个角落。
所以当我改变我的身高时，它会向上计数，而不是向下计数。请帮帮我。

我真的希望你能理解我。

哇，谢谢大家的建议！我已经测试了锚属性和 Top += 50; 现在，不能解决我的问题。让我试着用另一种方式来描述它。你有一个图像（100px），底部有 50px 的草，顶部有 50px 的天空。所以你有高度为 100 的图片框。如果你设置 pictureBox.height = 50; 你只会看到天空。但我只需要留下草。我在这里看到的主要问题是因为左上角的这个零点。

这是一个例子：

![简单的图像分裂到两侧：地球和天空](../Images/9d8c4cdcc3ed8624e48da718d9f13397.png)

Button1 点击事件：

```
private void button1_Click(object sender, EventArgs e)
    {
        pictureBox1.Height = 150;
    } 
```

按下按钮后会得到的结果：

![按钮按下的结果](../Images/89689c0b8f96b3ce30b194673f8a46e7.png)

但我需要另一个结果：

![在此处输入图像描述](../Images/7a975afd3150cedbd2bbea729981e0c5.png)

据我了解，这是因为 height 属性从左上角开始计算。因此，如果我将其更改为左下角或右下角，它将按我需要的方式工作。请帮助我改变这一点......

MSDN 参考： http: [//msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode(v=vs.71).aspx)

> 此属性的有效值取自 PictureBoxSizeMode 枚举。默认情况下，在 PictureBoxSizeMode.Normal 模式下，Image 被放置在 PictureBox 的**左上角**，任何对于 PictureBox 来说太大的图像部分都会被剪裁掉。使用 PictureBoxSizeMode.StretchImage 值会使图像拉伸以适合 PictureBox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:43:48.987

除非您使用的是自动处理控件布局的容器，否则您必须自己移动它。我假设您在代码中调整控件的大小，如下所示：

```
myPictureBox.Height = 50; 
```

您还必须将控件的位置向下移动相同的量：

```
myPictureBox.Top += 50; 
```

* * *

概括地说，这样的事情应该可以解决调整高度大小的问题：

```
void ResizeHeightFromBottom(this Control c, int newHeight)
{
    var oldBottom = c.Bottom;
    c.Height = newHeight;
    c.Top = oldBottom - newHeight;
} 
```

我将把调整宽度的大小和两者同时作为读者的练习，以及指定一个任意参考点。

# jquery - 附加了 Jquery JSON 无法获得长度

> ID：13233241
> 
> 赞同：2
> 
> 时间：2012-11-05T13:36:43.267
> 
> 标签：jquery, json, append

我已经查找了很多网站和主题，但找不到我的问题的答案。

我的 JSON 看起来像这样：

```
{
    "Pizza Margharita": {
        "price1": "4,50 &euro;"
    },
    "Pizza Caprese ": {
        "price1": "4,00 &euro;"
    }    
} 
```

我的 jquery 函数是这样的：

```
 $(function() {
    $.getJSON('data/food01.json', function(data) {
      $.each(data, function(name, price) {
        $('section#food01').find('ul').append('&lt;li&gt;&lt;a href="#order"&gt;&lt;h3&gt;'+name+'&lt;/h3&gt;&lt;span&gt;'+price.price1+'&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;');
      });

    });
    var food01size = $('#food01 ul li a').length;
    $('#food01 li a').live('click',function(){
      alert(food01size);

    });
  }); 
```

我需要获取 li 或 a 元素的 .length 。foodsize01 的值始终为“0”。那是因为数据是异步加载的。

有人知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:43:33.917

正如您所说，问题是因为您正在异步加载数据。计数在添加任何元素之前触发。您需要将该代码移动到您的成功回调函数中：

```
 $(function() {
    $.getJSON('data/food01.json', function(data) {
      $.each(data, function(name, price) {
        $('section#food01').find('ul').append('&lt;li&gt;&lt;a href="#order"&gt;&lt;h3&gt;'+name+'&lt;/h3&gt;&lt;span&gt;'+price.price1+'&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;');
      });
      var food01size = $('#food01 ul li a').length;
      $('#food01 li a').live('click',function(){
        alert(food01size);
      });
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:43:09.687

将 food01size 声明为 0，然后将其设置在 getJSON 的完整函数中：

```
 $(function() {
    var food01size = 0; //original declaration
    $.getJSON('data/food01.json', function(data) {
      $.each(data, function(name, price) {
        $('section#food01').find('ul').append('&lt;li&gt;&lt;a href="#order"&gt;&lt;h3&gt;'+name+'&lt;/h3&gt;&lt;span&gt;'+price.price1+'&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;');
      });
      food01size = $('#food01 ul li a').length;//set new value
    });
    $('#food01 li a').live('click',function(){
      alert(food01size);
    });
  }); 
```

# ios5 - TomSwift / TSAlertView ios 5 ARC 版

> ID：13233243
> 
> 赞同：3
> 
> 时间：2012-11-05T13:37:05.407
> 
> 标签：ios5

1.  苹果会允许我们使用自己定制的 alertView 吗？
2.  我发现这个 TSAlertView 与 ios 5(ARC) 不兼容。我只是从 .m 文件中删除所有“自动释放”“保留”。现在它不起作用。当显示它。它总是打印 'TSAlertViewController dealloc' 。你知道为什么吗 ？
3.  我只想要一个警报视图，我可以更改背景图像、按钮图像或其他...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:47:21.300

您无需转换 TSAlertView 即可在启用 ARC 的项目中使用它。您只能为 TSAlertView 禁用 ARC。有说明：[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

我刚刚在启用 ARC 的项目中成功使用了 TSAlertView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:42:20.923

1.  您可以使用自己的自定义视图而不是警报视图，是的。
2.  ARC 不仅仅是删除保留和释放。但是，有一个转换器可以帮助您，它可以在 Xcode 的 Refector Menu 中找到。
3.  参见 1 的答案。

# xcode-instruments - 使用 javascripts 的 UI 自动化 Xcode 工具

> ID：13233244
> 
> 赞同：2
> 
> 时间：2012-11-05T13:37:11.417
> 
> 标签：xcode-instruments

我正在使用 Xcode 工具进行 UI 自动化，任何人都可以帮助我如何删除扩展详细信息窗格中显示的其他信息，这些信息通常包括对记录的探测器或事件的描述。相反，它应该只显示我在脚本中包含的记录器消息。

谢谢，维诺德K

# r - 在 R 图中使用 data.frame 的行名？

> ID：13233249
> 
> 赞同：6
> 
> 时间：2012-11-05T13:37:18.857
> 
> 标签：r, plot, dataframe

我有几个（这里：2）图的数据，它们都具有相同的 x 值。我想，拥有一个将这些 x 值作为行名的 data.frame 可能会很好。

```
# initialize the dataframe with x-values as row names
test = data.frame(
  row.names = c(1,2,3,3.5,4,5)
  )

# Add data
test = cbind(test, c(1:6))
test = cbind(test, a=c(3, 4, 2, 1, 4, 5))

str(test)
test[1]

# try plotting
plot(test[1]) 
```

如何将行名作为 x 值？我需要为 x 值添加一个额外的变量吗？如果是这样：行名是做什么用的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:58:05.693

这将使用行名称作为 x 轴上的值：

```
plot(rownames(test), test$a) 
```

我不确定你想用这条线实现什么：

```
test = cbind(test, c(1:6)) 
```

它创建了一个名称相当奇怪的列，这通常是行名称所具有的。我会这样设置：

```
test = data.frame(x=c(1, 2 ,3, 3.5, 4, 5),
                  a=c(3, 4, 2,   1, 4, 5));
plot(test$x, test$a) 
```

默认情况下，行名是 (1:nrow(test)) 的字符串

```
> rownames(test)
[1] "1" "2" "3" "4" "5" "6" 
```

# marklogic - 如何在文档属性中搜索？

> ID：13233250
> 
> 赞同：5
> 
> 时间：2012-11-05T13:37:25.537
> 
> 标签：marklogic

我想搜索文档的文档属性。我只在 Marklogic 中加载了文档，并且没有 xml 文件。我已关闭内容处理。现在我想搜索元数据（存在于 中`xdmp:document-properties(uri)`）

我在文档中有以下属性：-

```
<?xml version="1.0" encoding="UTF-8"?>
<prop:properties xmlns:prop="http://marklogic.com/xdmp/property">
  <uploaded>true</uploaded>
  <OntologyResourceTypeValue>DOCUMENT</OntologyResourceTypeValue>
  <content-type>application/pdf</content-type>
  <filter-capabilities>text subfiles HD-HTML</filter-capabilities>
  <CreationDate>2002/12/05 09:44:29Z</CreationDate>
  <ModDate>2002/12/05 12:02:27+02'00'</ModDate>
  <Producer>Acrobat Distiller 5.0 (Windows)</Producer>
  <Author>Administrator</Author>
  <Creator>PScript5.dll Version 5.2</Creator>
</prop:properties> 
```

现在我只想搜索作者而不是其他属性。如果我正在使用，`search:search("Administrator")`那么它会在整个文档中寻找这个词。但是，我只想在文档属性中搜索 Author 标签。同样，我也想搜索其他属性。

我也试过这个： -

```
let $options := <options xmlns="http://marklogic.com/appservices/search">
                          <constraint name="author">
                        <properties name="prop:Author"/>
                      </constraint>
                  </options>
    let $results := search:search("author:Administrator", $options, 1,  10)
    return  
    $results 
```

但是，这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-18T08:37:54.827

属性约束的问题在于，它仅更改片段范围，并且不接受名称属性来将搜索限制为仅一个属性。如果添加`<return-query>true</return-query>`，您会看到结果查询是什么。

不过有几个选择..

第一种选择是使用`<fragment-scope>properties</fragment-scope>`. 您可以在顶层使用它来将其应用于所有搜索约束，也可以将每个约束应用于仅影响特定约束。这是强制搜索查询在属性片段而不是文档片段上运行的相对简单的方法。不利的一面是它不会影响搜索匹配，也就是片段。

要影响片段，您最好按照@mblakele 的建议进行操作，并使用 searchable-expression: `<searchable-expression>xdmp:document-properties()</searchable-expression>`。这实际上会影响片段和搜索查询，因此使用它会导致您获取搜索片段，并使查询在属性片段上运行。但是，作者约束仍然不限于您的 Author 属性。

一旦搜索遍历属性片段，将搜索限制在特定属性实际上非常简单。它和其他任何元素一样只是一个元素。使用元素词、值或范围约束来实现这一点。

下面一些代码来说明上述情况：

```
xquery version "1.0-ml";

import module namespace search = "http://marklogic.com/appservices/search"
     at "/MarkLogic/appservices/search/search.xqy";

(: original approach :)
let $options1 :=
  <options xmlns="http://marklogic.com/appservices/search">
    <constraint name="author">
      <properties name="prop:Author"/>
    </constraint>
    <return-query>true</return-query>
  </options>
let $results1 := search:search("author:Administrator", $options1, 1,  1)

(: using fragment-scope :)
let $options2 :=
  <options xmlns="http://marklogic.com/appservices/search">
    <fragment-scope>properties</fragment-scope>
    <constraint name="author">
      <properties name="prop:Author"/>
    </constraint>
    <return-query>true</return-query>
  </options>
let $results2 := search:search("author:Administrator", $options2, 1,  1)

(: using searchable-expression :)
let $options3 :=
  <options xmlns="http://marklogic.com/appservices/search">
    <searchable-expression>xdmp:document-properties()</searchable-expression>
    <constraint name="author">
      <properties name="prop:Author"/>
    </constraint>
    <return-query>true</return-query>
  </options>
let $results3 := search:search("author:Administrator", $options3, 1,  1)

(: using searchable-expression with an element word constraint :)
let $options4 :=
  <options xmlns="http://marklogic.com/appservices/search">
    <searchable-expression>xdmp:document-properties()</searchable-expression>
    <constraint name="author">
      <word>
        <element name="Author" ns="http://marklogic.com/xdmp/property"/>
      </word>
    </constraint>
    <return-query>true</return-query>
  </options>
let $results4 := search:search("author:Administrator", $options4, 1,  1)

return (
  $results1,
  $results2,
  $results3,
  $results4
) 
```

第四个示例应该为您提供您正在寻找的结果。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:10:26.040

我相信您还需要设置可搜索的表达式。尝试添加此选项：

```
<searchable-expression>xdmp:document-properties()</searchable-expression> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:19:36.700

Fwiw，还有一个 XPath 轴可以访问属性。

[`property::`](https://docs.marklogic.com/guide/app-dev/properties#id_99881)

# c# - 在 Windows 窗体中为任何控件（如文本框、复选框）加载类似事件？

> ID：13233253
> 
> 赞同：4
> 
> 时间：2012-11-05T13:37:36.233
> 
> 标签：c#, .net, winforms, events

在 Windows 窗体中，当用户控件或窗体第一次变得可见时，会触发 Load 事件。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.load.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.load.aspx)

Checkbox、TextBox、Label 等控件是否有此类事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:11:39.977

不可以。您可以使用 HandleCreated 事件，它在创建控件的本机窗口时触发。在类构造函数运行之后，您可以依赖运行的第一个事件。当父控件将控件添加到其 Controls 集合并且控件变为可见时，将触发它。

但是请注意，此事件可能会多次触发。当某些属性被重新分配时，控件可能会被重新创建，这种类型需要使用新的样式标志调用本机 CreateWindowEx() 函数。因此，您至少需要携带一个布尔标志来跟踪这一点。

另请注意，在创建本机窗口*后*设置控件的属性非常低效。所有 Winforms 控件都设计为允许在创建本机窗口*之前设置属性。*无论您生成什么代码，几乎肯定都应该使用类构造函数。派生控件本身。或者在父代码中，就像 InitializeComponent() 对表单或用户控件所做的那样。

现有的 Load 事件也是如此。由于加载事件非常重要的 VB6 遗留系统，它往往被过度使用。然而，在 Winforms 中，只有取决于控件或窗体的最终位置和大小的代码才需要它。由于形状缩放，这可能与设计属性不同。任何其他代码都属于构造函数。

# vb.net - 循环 - 添加数字 - Visual Basic

> ID：13233256
> 
> 赞同：4
> 
> 时间：2012-11-05T13:37:47.973
> 
> 标签：vb.net

所以程序必须把从“x”到“y”的所有数字相加。

但它还必须显示所有添加的数字：

即 10 到 20 应该显示 10 + 11 + 12 + 13 + 14 + 15 + 16 + 17 + 18 + 19 + 20 = 165

这是我所拥有的：

```
Dim firstnum As Integer = Val(TextBox1.Text)
    Dim secondnum As Integer = Val(TextBox2.Text)
    Dim sum As Integer = 0

    While firstnum <= secondnum

        sum = sum + firstnum
        firstnum = firstnum + 1

        Label3.Text = firstnum & "+"

    End While

    suum.Text = "  =  " & Val(sum) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:39:55.173

具有以下内容：

```
Label3.Text = firstnum & "+" 
```

每次通过循环时，您都会覆盖*该*值。`Label3`您可能想要做的是将现有值与下一个数字*连接起来。*

这应该可以帮助您：

```
Label3.Text = Label3.Text & firstnum & " + " 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:44:07.993

林克好吗？然后你可以使用`Enumerable.Range`and `Enumerable.Sum`：

```
Dim startNum = Int32.Parse(TextBox1.Text)
Dim endNum = Int32.Parse(TextBox2.Text)
Dim numbers = Enumerable.Range(startNum, endNum - startNum + 1) 'inclusive, therefore + 1
Label3.Text = String.Join(" + ", numbers)
suum.Text = numbers.Sum() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:41:50.143

您的 Label3.Text 将仅包含算法末尾的最后一个数字和“+”。你应该更换

```
Label3.Text = firstnum & "+" 
```

和

```
Label3.Text = Label3.Text & firstnum & "+ " 
```

# android - 如何从索引中获取 Listview 中某个项目的特定 ID？

> ID：13233257
> 
> 赞同：1
> 
> 时间：2012-11-05T13:38:01.063
> 
> 标签：android, listview, arraylist

我在 itemview 中有一个项目列表，通过按一个按钮我可以向其中添加新项目。但是，我不确定如何检索最新创建的项目的 ID。我所做的是获取数组的大小和 -1 以获取最新添加的项目的索引号：

```
int lastItemIndex= listItems.size()-1; 
```

然后我使用 idex 编号来取回对象：

```
string lastitem= listItems.get(lastItemIndex); 
```

但是我不知道如何获取项目的 id ？

我想不出更好的方法，我真的被困住了。我相信有一种更聪明的方法来做到这一点。

单击项目时检索项目的 id 非常简单，方法是：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long thisID)
{} 
```

但是有谁知道如何在不点击项目的情况下获取 id？从技术上讲，我想使用与 Key-ID 相同的 ID 将其导入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:45:27.900

它应该像这样简单：

```
listView.getAdapter().getItemId(position); 
```

最后一项的位置是：

```
int position = listView.getAdapter().getCount() - 1; 
```

# c - 将指针与整数进行比较。如何解决？

> ID：13233258
> 
> 赞同：1
> 
> 时间：2012-11-05T13:38:11.143
> 
> 标签：c

这是我的一段代码，我想检查下一个是否没有元素，退出程序。但我收到将指针与整数进行比较的警告。我该如何解决它，干杯。

错误是这部分 if(nums[i] == NULL)

```
/* scanf the file, and store the value in the nums */
for(i = 0; i < numOfInt; i++){

   fscanf(f, "%d", &nums[i]);

   /* check if the value is too big */ 
   if(nums[i] == NULL){  
 printf("arg1 is not equal to nums of element in the file\n");
 exit(1);
   } 
 } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T13:39:55.063

查看 的文档`fscanf`，它不是那样工作的。而是使用它的返回值。

```
ret = fscanf(f, "%d", &nums[i]);

if (ret != 1)
    /* error */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:43:56.973

让我们假设这`nums`是一个整数数组。

然后，您将整数与 进行比较`NULL`。`NULL`用于指针。

就像比较苹果和橘子一样。

熟悉手册页并注意返回值是值得的。

有问题的函数返回解释的项目数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:42:05.700

我假设 nums 是一个 int[]。NULL 通常是一个 void*（指针），因此将 nums[i] 和 int 与指针进行比较是没有意义的。

# iphone - 以编程方式添加的工具栏的 UIToolbar 外观

> ID：13233260
> 
> 赞同：1
> 
> 时间：2012-11-05T13:38:15.567
> 
> 标签：iphone, uitoolbar, uiappearance

我有两个`UIToolbar`实例，一个添加在屏幕顶部，一个添加在底部。我想使用 iOS 5 外观协议来设计这些样式。

我可以使以下工作：

```
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"toolbarimage.png"]
                            forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

但是，我无法获取`UIToolbarPositionTop`或`UIToolbarPositionBottom`使用我以编程方式添加的工具栏。我正在创建这样的工具栏：

```
_topBar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, self.view.frame.size.width, 44)];
_topBar.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[self.view addSubview: _topBar];

_bottomBar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, self.view.frame.size.height - 44, self.view.frame.size.width, 44)];
    _bottomBar.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [self.view addSubview: _bottomBar]; 
```

据我了解， UIToolbarPositionTop 与界面构建器文件配合得很好，但有谁知道让它们以编程方式工作的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:29:09.843

这是一个相对简单的修复。而不是使用一般的

```
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"toolbarimage.png"]
                        forToolbarPosition:UIToolbarPositionAny
                                barMetrics:UIBarMetricsDefault]; 
```

可以这样定位特定的工具栏：

```
// Setup top tool bar
UIToolbar *topToolbar = [[UIToolbar alloc] init];
[topToolbar setBackgroundImage:[UIImage imageNamed:@"top_toolbar.png"]
               forToolbarPosition:UIToolbarPositionAny
                       barMetrics:UIBarMetricsDefault];

// Setup bottom toolbar
UIToolbar *bottomToolbar = [[UIToolbar alloc] init];
[bottomToolbar setBackgroundImage:[UIImage imageNamed:@"bottom_toolbar.png"]
               forToolbarPosition:UIToolbarPositionAny
                       barMetrics:UIBarMetricsDefault]; 
```

我找到了一个类似的答案，其中详细说明了为什么`UIToolbarPositionTop`etc 是系统属性，不应[在此答案](https://stackoverflow.com/a/11612512/816002)中依赖。

# powershell - 将参数传递给 Powershell Start-Job

> ID：13233264
> 
> 赞同：2
> 
> 时间：2012-11-05T13:38:24.200
> 
> 标签：powershell, process, background

我希望将 tortoiseSVN 更新作为后台进程启动，但我没有运气

```
Start-Job tortoiseproc -ArgumentList "/command:update /path:C:\MyDir /closeonend:2;" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:25:38.200

我没有安装tortoiseSVN，但看起来你缺少工作的主要脚本块。这行得通吗？

```
 Start-Job { tortoiseproc $args} -ArgumentList "/command:update /path:C:\MyDir /closeonend:2" 
```

# javascript - 使用 YUI 2 imageloader javascript 自定义事件触发器

> ID：13233265
> 
> 赞同：2
> 
> 时间：2012-11-05T13:38:25.477
> 
> 标签：javascript, events, yui

YUI 2 imageloader 库允许创建自定义事件触发器：

> 您可以将自定义事件指定为触发器。使用任何 YAHOO.util.CustomEvent 对象调用 addCustomTrigger：
> 
> var myILEvent = new YAHOO.util.CustomEvent('anImageLoaderTrigger'); myFirstGroup.addCustomTrigger(myILEvent);

如何触发此自定义事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:55:41.400

```
myILEvent.fire(); 
```

根据[文档](http://developer.yahoo.com/yui/docs/YAHOO.util.CustomEvent.html)，`CustomEvent`有一种`fire`方法可以通知所有订阅者，即您的`myFirstGroup`.

# mysql - 流畅的查询生成器中的未定义变量

> ID：13233271
> 
> 赞同：3
> 
> 时间：2012-11-05T13:38:54.910
> 
> 标签：mysql, fluent, laravel

我开始使用 Laravel 框架，但流畅的查询生成器有问题。在 where 条件下，如果我使用原始值或`Input::get()`，它会检索结果并正确执行，但是当我使用分配的变量时，它会显示“未定义的变量”错误。

```
$properties = Listing::where(function($query)
{
    if (Input::has('property-type')) $query->where('property_type', '=',Input::get('property-type'));
})->get(); 
```

它工作正常，但如果我这样做

```
$pt=Input::get('property-type');
$properties = Listing::where(function($query)
{
    if ($pt!='') $query->where('property_type', '=',$pt);
})->get(); 
```

它返回错误

```
Undefined variable: pt 
```

如果我打印变量“$pt”，它包含该值。

我只想使用变量值，因为我应该将这些值从控制器传递给模型作为参数，并在模型函数中构建查询。难道我做错了什么？在查询执行之前没有分配变量吗？请问，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-21T18:14:36.023

感谢@viji 评论，您可以使用 php`use`关键字来做到这一点：

```
$var = 5;
$orgs = app('db')->table('t')
        ->where('status', '=', '1')
        // Sending $var to anonymous function
        ->where(function ($query) use ($var) {
            $query->where('orgs.name', 'like', "%$var%");
        })->select('id')
        ->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:10:54.423

您在变量上苦苦挣扎的原因是它超出了匿名函数的范围。

我不用担心将变量传递给模型来构造查询，只需使用很棒的`Input`类方法。

# c++ - 并行迭代器

> ID：13233274
> 
> 赞同：5
> 
> 时间：2012-11-05T13:39:11.250
> 
> 标签：c++, iterator, iteration, openmp

我正在设计一个 C++ 数据结构（用于图形），供并行代码（使用 OpenMP）使用。

假设我想要一个方法可以对所有元素（节点）进行迭代。当然，这个迭代将被并行化。

是否可以为此目的使用迭代器？迭代器应该如何实现并行访问？在这种情况下，您会建议还是反对使用迭代器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:42:10.443

OpenMP 并行循环不能很好地与迭代器配合使用。您需要`operator[]`在图形类上实现索引机制（采用整数参数）。

如果您确实想使用 OpenMP 3.0 迭代器支持，请确保您有一个随机访问迭代器。将其实现为指向节点或边的指针是最简单的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T09:24:11.607

让我扩展我的评论。除非您以跨平台兼容性为目标，并且您希望您的代码也可以编译和使用 MS Visual C++，否则您可以通过使用显式 OpenMP 任务来抵消为图形对象提供“线性”迭代器的复杂性。OpenMP 3.0 中引入了显式任务（因此 MSVC 不支持它，它只符合更早的规范，即使在 2012 年也是如此）。任务是可以并行执行的代码块。它们由`task`构造创建：

```
... other code ...
#pragma omp task
{
   ... task code ...
}
... other code ... 
```

每当执行流程到达标记区域时，就会创建一个新的任务对象并将其放入任务队列中。然后在某个时间点，空闲线程从队列中抓取一个任务并开始执行它。任务与 OpenMP 部分很相似，因为它们继承了它们的环境，并且它们可以以与代码的串行版本不同的顺序运行。

通过任务，可以实现递归算法，也可以轻松使用不提供随机迭代器的 C++ 容器。例如，二叉树的遍历可以像这样使用任务执行：

```
// Helper routine to traverse a tree and create one task for each node
void traverse_and_make_tasks(tree_node *tn)
{
   if (tn == NULL)
      return;

   // Create a task to process the node
   #pragma omp task
   {
      very_long_computation(tn->value);
   }

   traverse_and_make_tasks(tn->left);
   traverse_and_make_tasks(tn->right);
}

... main code ...

// Disable dynamic teams
omp_set_dynamic(0);

#pragma omp parallel
{
   #pragma omp single nowait
   {
      traverse_and_make_tasks(tree->root_node);
   }
} 
```

（需要禁用动态团队以防止 OpenMP 运行时过于智能并`parallel`单线程执行区域）

这是一种非常常见的任务模式，称为*单一/串行生产者*。每当执行进入该`parallel`区域时，单个线程就会执行`single`构造中的代码。`traverse_and_make_tasks`它用三个的根节点调用。`traverse_and_make_tasks`遍历三个并为每个节点创建一个任务。该`task`构造仅在`parallel`区域内使用（静态范围）或在从区域内（直接或间接）调用的代码`parallel`（动态范围）中使用时才有效。随着`traverse_and_make_tasks`树的走动，它产生排队的任务。在结束时`parallel`region 有一个隐式的任务调度点，这大致意味着在所有任务都执行完之前，执行不会超过 region 的末尾。也可以使用 将显式点放在平行区域内`#pragma omp taskwait`。它的工作方式类似于`barrier`- 执行“块”，直到所有任务都已处理完毕。

另一种常见的模式是*并行生成器*，其中任务是并行生成的。上面的示例代码可以通过对 的简单修改轻松转换为并行生产者`traverse_and_make_tasks`：

```
void traverse_and_make_tasks(tree_node *tn)
{
   if (tn == NULL)
      return;

   #pragma omp task
   traverse_and_make_tasks(tn->left);
   #pragma omp task
   traverse_and_make_tasks(tn->right);

   // Create a task to process the node
   very_long_computation(tn->value);
} 
```

这个版本的代码在每个节点上创建了两个任务——一个处理左后代，一个处理右后代。如果这是串行代码，它将自下而上遍历树。然而，在并行情况下，任务排队会或多或少地导致从上到下的遍历。

还有许多其他可能的使用任务的场景。也可以在非递归情况下使用它们来处理不提供随机迭代器的容器，这是工作共享构造所要求的`for`：

```
typedef container_type::iterator citer;

container_type container;
... push some values in the container ...

#pragma omp parallel
{
   #pragma omp single nowait
   {
      for (citer it = container.begin(); it != container.end(); it++)
         #pragma omp task
         process(*it);
   }

   #pragma omp taskwait

   // process more
   #pragma omp single nowait
   {
      for (citer it = container.begin(); it != container.end(); it++)
         #pragma omp task
         process_more(*it);
   }
} 
```

此示例还说明了在`parallel`区域内使用显式任务同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:46:26.520

这是读写器问题的一种变体。

这取决于该结构是否可变。如果没有，那么你就走吧，尽可能多地并行阅读。

但如果它是可变的，那么迭代器可能会与对结构所做的更改发生冲突。例如，迭代器可能会到达当前正在删除的元素。一种解决方案是为每个迭代器制作一个只读的、不可变的结构副本，但是在创建迭代器之后，该迭代器不会注册对结构所做的任何更改。第二种解决方案是进行写时复制实现，这将导致对结构的所有写入创建一个新对象，当前运行的迭代器在旧对象上运行。

您需要根据算法确定对该结构的写入对您的程序意味着什么，然后适当地实现读/写锁定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T21:17:01.453

如果它们是树，您可能会想更多地考虑 Euler Tour Traversals 上的扫描而不是“迭代器”。[http://en.wikipedia.org/wiki/Euler_tour_technique](http://en.wikipedia.org/wiki/Euler_tour_technique)

我希望我面前有斯捷潘诺夫的书。我记得他曾短暂地谈到过它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-23T15:38:04.460

我在Java中遇到了完全相同的问题。我实施的解决方案使用“hashmaps 的 hashmap”。我仍然不明白为什么标准库不允许我们进行多线程迭代器...您可以在此处阅读我的问题以及我的答案（带有指向 Java 代码的链接）：

[一次访问 ConcurrentHashMap<Element, Boolean> 的每个元素的可扩展方式](https://stackoverflow.com/questions/19860217/scalable-way-to-access-every-element-of-concurrenthashmapelement-boolean-exac/19879525#19879525)

# ios - QLPreviewController 在 iOS5.1 中崩溃，同时连续缩放和滚动 PDF

> ID：13233278
> 
> 赞同：1
> 
> 时间：2012-11-05T13:39:32.930
> 
> 标签：ios, ipad, qlpreviewcontroller

iOS 5.1 中的 QLPreviewController 在滚动和缩放控制器中显示的 pdf 后崩溃。
当我连续缩放和滚动时，它开始在日志中发出警告

```
Ignoring call to [UIPanGestureRecognizer setTranslation:inView:] since gesture recognizer is not active. 
```

它崩溃了。
好吧，我还没有检查其他 iOS 版本，但在 5.1 中它崩溃了

# c# - 移植到VS2010时强名称签名程序集无效

> ID：13233279
> 
> 赞同：2
> 
> 时间：2012-11-05T13:39:33.763
> 
> 标签：c#, c++, visual-studio-2010, code-signing, strongname

我刚刚将我的 CPP 和 C# 项目从 VS2008 移植到 VS2010。我使用转换向导来转换我所有的项目。我面临的问题是我收到一个错误“ **../Mydll.dll 是一个强名称签名的程序集，嵌入清单会使签名无效。您需要重新签署此文件以使其成为有效的程序集。** ”。这是什么意思以及如何在 VS2010 中签署 CPP 一个 dll。

# wordpress - 如何将内容添加到 Wordpress 页面？

> ID：13233282
> 
> 赞同：1
> 
> 时间：2012-11-05T13:39:36.773
> 
> 标签：wordpress

当我创建一个新页面时......我想在一个框中写一些文本......但是当我在“添加新页面”选项卡上填写该框时，它不会显示出来。它去了哪里，我如何让它出现？

![在此处输入图像描述](../Images/74a74b8298ce7efab7164641ca6ff00b.png) 这一定非常简单，但我不明白为什么它没有出现。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:35:50.327

您已选择页面模板 - 博客现代布局。尝试将模板设置为默认，因为这可能是博客模板的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:43:54.750

显示页面内容写入后只需按下左侧 的**更新按钮**![在此处输入图像描述](../Images/41b2cb4eac54582ba4156787cdcdf1e5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:32:13.643

某些主题只会在某些页面（如首页）上显示设置在某个类别中的帖子。从themeforest.net 上的描述（请参阅[如何创建投资组合导航（过滤）？](http://themeforest.net/item/duotive-three-complete-wordpress-template/faq/232555)），我认为您使用的主题需要特定类别才能使投资组合浏览工作。

# c++ - 在 VS2012 中更改自动格式化

> ID：13233284
> 
> 赞同：3
> 
> 时间：2012-11-05T13:39:38.947
> 
> 标签：c++, visual-studio-2012

我安装了 Visual Studio **2012**。如何禁用自动格式化代码（C++）？
当我编写代码时，VS 在它想要的地方放置空格。
如果无法禁用，我该如何将格式更改为：

```
int a = MyFunc();
switch (a)
  {
    default:
      break;
    // ...
  } 
```

但工作室重新制作了这个：

```
int a = MyFunc();
switch (a)
{
default:
  break;
// ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:37:43.397

您是否检查了工具 > 选项 > 文本编辑器，然后是 C/C++ > 格式 > 缩进 > 缩进大括号？

这似乎修复了大括号部分。

# emacs - 如何永久禁用 emacs 站点启动文件？

> ID：13233285
> 
> 赞同：3
> 
> 时间：2012-11-05T13:39:45.053
> 
> 标签：emacs, init

在解决[这个](https://stackoverflow.com/questions/13220980/strange-semantic-error)问题时，我发现我需要禁用站点级初始化文件才能让我的 emacs + CEDET 运行（使用启动 emacs 时一切正常，`emacs --no-site-file`但在没有附加参数的情况下会损坏）。

我想永久禁用站点级初始化文件，但由于我在启动 emacs（启动器/面板/终端）时使用了几种不同的方法/方法，我不认为在我的中使用别名是`.zshrc`行不通的。

我需要一种**永久禁用所有站点启动文件**的方法。有没有简单的方法来实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:09:36.520

`site-start`要回答具体问题，如果不构建您自己的 Emacs 版本（或者，正如您所提到的，始终使用 运行） ，就不可能禁用该文件`--no-site-file`。

如果您查看变量的文档`site-run-file`，您会看到：

> 运行时加载顺序为： 1\. 此变量( `site-run-file`) 中描述的文件，如果非零；2\. `~/.emacs'; 3.`default.el'。

如果运行 Emacs`-q`足以解决问题，您可以在 .emacs 中通过设置：

```
(setq inhibit-default-init t) 
```

话虽如此，构建/安装您自己的 Emacs 非常简单。您几乎可以剪切/粘贴[此页面](http://www.emacswiki.org/emacs/BuildingEmacs)上列出的命令（它们是`./configure; make; make install`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:59:01.087

`/usr/local/bin/emacs`如果`emacs`您具有写访问权限和健全的`PATH`.

话虽如此，建议`eieio`加载`cedet`可能是更合适的解决方法。

# episerver - 无法映射属性 LanguageBranch - 表 tblBigTable 不包含任何映射到 DbType.String 的列

> ID：13233294
> 
> 赞同：1
> 
> 时间：2012-11-05T13:40:19.380
> 
> 标签：episerver, episerver-6-r2

我最近将我们的 EPi 项目移到了新服务器上，并不断收到以下消息：

*无法映射属性 LanguageBranch - 表 tblBigTable 不包含任何映射到 DbType.String 的列*

我已经用所有的表、视图、过程等编写了数据库，并使用 sqlcmd 将数据输入到数据库中。该应用程序内置于 .net 4 中，使用的数据库是 SQL Server 2008 R2。

该应用程序的前端运行良好，尽管我的图像丢失了。

除了“编辑模式”外，EPi 站点工作正常。

当我们尝试进入存在数据树的编辑模式时，我们不断收到上述消息。

大家有什么小窍门可以和我分享吗？

我实际上不知道如何继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:29:06.150

生成 SQL 脚本时看起来像一个问题。试试这个解决方案（将目标更改为 2005 服务器）： [http ://world.episerver.com/Modules/Forum/Pages/thread.aspx?id=60826](http://world.episerver.com/Modules/Forum/Pages/thread.aspx?id=60826)

# android - 用户交互后弹出窗口内的 imageView 不会更新。

> ID：13233297
> 
> 赞同：1
> 
> 时间：2012-11-05T13:40:27.287
> 
> 标签：android, android-layout, android-imageview, popupwindow

![我们用于其中一个屏幕的弹出示例](../Images/c7692fbee31ee507185782b9ff6e65d7.png)

我创建了一个自定义弹出视图，可用于设置优先级。最初，当我尝试设置显示弹出窗口时，我预设了`ImageView`with `ImageView.pressed(true)`，它由图像的灰色背景显示。

现在，当我单击另一个图像时，我可以注册单击但无法在屏幕上显示更改，即无法将`ImageView.Pressed(true)`状态模拟到被按下的图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:01:44.690

出于同样的目的，我使用了 s，并且有一种方法可以为从侦听`ImageButton`器调用的一组相关按钮设置状态。`onClick()`例如，

```
private void configurePaletteStrokeWidth(Crayon.StrokeWidth strokeWidth) {
    findViewById(R.id.iButtonStrokeWidthSmall).setSelected(false);
    findViewById(R.id.iButtonStrokeWidthMedium).setSelected(false);
    findViewById(R.id.iButtonStrokeWidthLarge).setSelected(false);
    findViewById(R.id.iButtonStrokeWidthXLarge).setSelected(false);
    switch (strokeWidth) {
    case SMALL:
        findViewById(R.id.iButtonStrokeWidthSmall).setSelected(true);
        break;
    case LARGE:
        findViewById(R.id.iButtonStrokeWidthLarge).setSelected(true);
        break;
    case XLARGE:
        findViewById(R.id.iButtonStrokeWidthXLarge).setSelected(true);
        break;
    case MEDIUM:
        findViewById(R.id.iButtonStrokeWidthMedium).setSelected(true);
        break;
    }
} 
```

每个按钮的 xml 类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_stroke_width_small_tap" android:state_pressed="true"/> <!-- pressed -->
    <item android:drawable="@drawable/button_stroke_width_small_tap" android:state_selected="true"/> <!-- selected -->
    <item android:drawable="@drawable/button_stroke_width_small_normal" android:state_focused="true"/> <!-- focused -->
    <item android:drawable="@drawable/button_stroke_width_small_normal"/> <!-- default -->

</selector> 
```

# asp.net - 此特定 ASPX 文件上的 IIS 服务器错误

> ID：13233298
> 
> 赞同：2
> 
> 时间：2012-11-05T13:40:30.703
> 
> 标签：asp.net, iis

这是我在意识到 Calender 控件存在之前编写的代码。请不要介意错字[canlender]！

不知何故，这段代码使整个 IIS [服务不可用] 的状态。做 net stop w3svc / net start w3svc 也行不通。托管服务提供商说[你做了什么？]。在我的计算机上（Win8 上的 IIS）也会冻结。

我没有发现任何会使服务器无法服务的东西。它只是创建和修改控件...有关此问题的原因的任何想法？

谢谢。

日历.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class member_Default : System.Web.UI.Page {
 protected void Page_Load(object sender, EventArgs e) {
     int currday = 1;
     int len = DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month);
     switch (new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1).DayOfWeek) {
         case DayOfWeek.Sunday: currday = 1; break;
         case DayOfWeek.Monday: currday = 0; break;
         case DayOfWeek.Tuesday: currday = -1; break;
         case DayOfWeek.Wednesday: currday = -2; break;
         case DayOfWeek.Thursday: currday = -3; break;
         case DayOfWeek.Friday: currday = -4; break;
         case DayOfWeek.Saturday: currday = -5; break;
     }
     TableRow tr = new TableRow();
     TableHeaderCell tst;
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Sun"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Mon"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Tue"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Wed"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Thu"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Fri"; tr.Controls.Add(tst);
     tst = new TableHeaderCell(); tst.CssClass = "single_day"; tst.Text = "Sat"; tr.Controls.Add(tst);
     tblCanlender.Controls.Add(tr);
     int a=0;
     while (currday <= len && a++<50)
     {
         tr=new TableRow();
         for (int i = 0; i < 7; i++) {
             TableCell tc = new TableCell();
             if (currday >= 1 && currday <= len) {
                tc.CssClass = "single_day_body";
                tc.Text = currday.ToString();
                tc.Controls.Add(tc);
                LinkButton lnk = new LinkButton();
                lnk.Text = "Add";
                tc.Controls.Add(lnk);
             }
             tr.Controls.Add(tc);
             currday++;
         }
         tblCanlender.Controls.Add(tr);
     }
 }
} 
```

日历.aspx

```
<%@ Page Language="C#" EnableViewState ="false" AutoEventWireup="true" CodeFile="calender.aspx.cs" Inherits="member_Default" %>

<style type="text/css">
    .single_day{
           width:80px;
           height:40px;
           background:#DDD;
    }
    .single_day_body{
           width:80px;
           height:80px;
           text-align:left;
           vertical-align:top;
           background:#FFF;
    }
    table, th, tr, td, thead, tbody {
        border: 0;
        margin: 0;
        padding: 0;
    }
    a.insertdate, a.insertdate:visited, a.insertdate:link {
        color:gray;
        text-decoration:none;
    }
    a.insertdate:hover {
        color:#DDD;
    }
</style>
<asp:Table runat="server" id="tblCanlender" style="width:100%;border:1px solid gray;background:#EEE"></asp:table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:46:28.217

```
tc.Controls.Add(tc); 
```

你确定这是故意的吗？这似乎是一个循环引用。

# java - 如何重置 HTTPSession 的超时计数器？

> ID：13233299
> 
> 赞同：3
> 
> 时间：2012-11-05T13:40:31.000
> 
> 标签：java, servlets, httpsession

`HTTPSession`除了通过提供 HTTP 请求之外，还有其他方法可以重置超时计数器吗？

我正在寻找类似的东西

```
session.resetTimeout(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:47:23.273

所以，你`HttpSession`手头没有混凝土`HttpServletRequest`？

您*可以*使用[当前非活动时间](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29)和最大非活动时间之和来增加[最大](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setMaxInactiveInterval%28int%29)[非活动时间间隔](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getMaxInactiveInterval%28%29)。

```
int maxInactiveInterval = session.getMaxInactiveInterval();
int currentInactiveTime = (int) (System.currentTimeMillis() - session.getLastAccessedTime() / 1000);
session.setMaxInactiveInterval(maxInactiveInterval + currentInactiveTime); 
```

但是，这需要一些[过滤器](https://stackoverflow.com/questions/tagged/servlet-filters)，当它的值偏离默认值时，它会在每个请求上再次将其重置回默认的最大非活动间隔。

```
session.setMaxInactiveInterval(defaultMaxInactiveInterval); 
```

在 Servlet 3.0 上，此值可通过[`SessionCookieConfig#getMaxAge()`](http://docs.oracle.com/javaee/6/api/javax/servlet/SessionCookieConfig.html#getMaxAge%28%29).

```
int defaultMaxInactiveInterval = getServletContext().getSessionCookieConfig().getMaxAge(); 
```

# cordova - iOS 上的 Cordova 2.2.0 - RequireJS 无法正确加载 Cordova

> ID：13233301
> 
> 赞同：10
> 
> 时间：2012-11-05T13:40:40.447
> 
> 标签：cordova, ios6, requirejs, phonegap-plugins

我目前正在使用 Cordova (Phonegap)、Backbone 和 JQtouch 开发一个 webapp。除其他外，我需要在用户日历中添加事件。

在 Android 上一切正常。我仍在使用 Cordova 2.0.0。（我没有升级到最新版本）。滚动工作，导航正常，我可以在我的日历中添加事件！

在 iPhone 上，情况有所不同。由于我希望我的应用程序在 iOS 6 上运行，我在我的 Mac 上安装了 Cordova 2.2.0。从那以后，我不能再在日历中添加事件了。它与cordova 2.0.0一起工作（在iphone上），但现在不行。

经过调查，我发现**cordova.exec() 是 undefined**。

我对这个问题进行了很多搜索，但除了我之外，似乎没有人现在遇到过这个问题。

以下是适用于 Cordova 2.0.0 但不适用于 Cordova 2.2.0 的代码示例：

calendar.js，Cordova 的日历插件。我没有写。在 Android 上，我收到消息“cordova.exec 已定义”，而在 iOS 上，我收到另一个消息。

```
// Cordova Calendar Plugin
// Author: Felix Montanez 
// Created: 01-17-2012
// Contributors:
// Michael Brooks    

function calendarPlugin()
{
}

calendarPlugin.prototype.createEvent = function(title,location,notes,startDate,endDate)
{
    if('function' == typeof(cordova.exec)) {
        alert("cordova.exec is defined");
    } else {
        alert("cordova.exec is not defined");
    }
    cordova.exec(null,null,"calendarPlugin","createEvent", [title,location,notes,startDate,endDate]);
};

calendarPlugin.install = function()
{
    if(!window.plugins)
    {
        window.plugins = {};
    }    
    window.plugins.calendarPlugin = new calendarPlugin();
    return window.plugins.calendarPlugin;
};

cordova.addConstructor(calendarPlugin.install); 
```

调用函数 createEvent 的代码（它正在工作，因为我收到了上一个警报）

```
if (confirm('Do you want to add this event in your calendar?')) 
{ 
    calendarPlugin.prototype.createEvent('<%= paramEvent_map %>', 'Geneva', 
        'Convocation', '<%= paramEvent_startDate %>', '<%= paramEvent_endDate %>'); 
} 
```

这个问题的一个可能来源可能是我从 Cordova 2.0.0 升级到 Cordova 2.2.0 的方式：我只是按照教程“[将 Cordova 2.1.0 项目升级到 2.2.0](http://docs.phonegap.com/en/2.2.0/guide_upgrading_ios_index.md.html) ”。我应该先“从 2.0.0 到 2.1.0”然后“从 2.1.0 到 2.2.0”吗？

我很感激有关此的任何建议，因为我真的不想重新安装 phonegap。

*在 Mac 上，我正在使用 Mountain Lion 10.8 和 xCode 4.5，我正在 iOS 4 和 6 上测试我的应用程序。在 PC 上，我正在使用 Aptana studio 3 和 Eclipse 3.7.1，我正在测试在安卓 2.3 上。*

---**编辑：重新安装 Cordova 2.1.0 然后升级到 2.2.0** ---

我刚刚删除了我的项目，卸载了 Cordova，然后“从头开始”重做所有事情：

*   [我从他们的网站](http://incubator.apache.org/cordova/)安装了 Cordova 2.1.0 。
*   我将 xcode 升级到 4.5.2（推荐）
*   我创建了一个 xcode 项目，在其中复制了部分代码。
*   我按照[他们的教程](http://docs.phonegap.com/en/2.2.0/guide_upgrading_ios_index.md.html)从 Cordova 2.1.0 升级到 Cordova 2.2.0
*   我将“架构”设置为“armv7，armv7s”，将“仅构建活动架构”设置为“是”
*   我添加了日历插件所需的框架：EventKit 和 EventKitUI

然后我在我的 iPhone 3（使用 iOS 6）上编译并启动了我的项目，**但仍然没有定义 cordova.exec**！

---**编辑：将我的日历插件声明为模块**---

我直接在cordova-2.2.0.js中添加了一些日历插件的代码（我很绝望）。

现在在 cordova-2.2.0.js 中，我有以下几行：（[我从这里得到它们](https://github.com/phonegap/phonegap-plugins/wiki/Defining-Your-Cordova-Plugin-As-A-Cordova-Module)）

```
define("cordova/plugin/calendarplugin", function(require, exports, module) {
    var exec = require('cordova/exec');

    var calendarPlugin = function() {};

    calendarPlugin.prototype.createEvent = function(title,location,notes,startDate,endDate) {
         exec(null, null, 'calendarPlugin', 'createEvent', [title,location,notes,startDate,endDate]);
    }

    var myCalendarPlugin = new calendarPlugin();
    module.exports = myCalendarPlugin;
}); 
```

所以我不再使用 cordova.exec() 了，而是这样：

```
var exec = require('cordova/exec'); 
```

我的日历“插件”文件现在只包含以下行：

```
var mycalendarplugin = cordova.require("cordova/plugin/calendarplugin"); 
```

这就是我使用新“模块”的方式：

```
window.mycalendarplugin.createEvent('<%= paramEvent_map %>', 'Geneva', 
'Convocation', '<%= paramEvent_startDate %>', '<%= paramEvent_endDate %>'); 
```

而且，令人惊讶的是，函数 exec() 被调用了！

但是，我收到以下消息：“**错误：尝试在'deviceready'之前调用cordova.exec（）。忽略。** ”当“deviceReady”没有触发时应该出现。

可悲的是，这个事件**永远不会**触发。所以我的问题现在略有不同，但仍然存在。

---**编辑：与 Android 的比较**---

我添加了几行来监听 Android 和 iOS 中的事件：

```
window.addEventListener('load', function () {
     alert("load triggered");
     document.addEventListener('deviceready', function () {
            alert("PhoneGap is now loaded!");
     }, false);
}, false); 
```

在 iOS 上，我收到消息“加载已触发”，但没有收到“PhoneGap 已加载”。之后，我仍然无法使用 exec()。

在 Android 上，我根本没有收到任何消息。但我可以毫无问题地使用cordova.exec()。

---**编辑：从头开始重做项目**---

我没有使用cordova 2.1.0 创建我的项目然后升级到cordova 2.2.0，而是尝试直接使用cordova 2.2.0 创建一个示例项目，然后在其中包含日历插件（原始版本）。

它工作得很好！使用 iOS 6 的更多代码（需要用户明确授权），我可以在我的日历中添加事件。

但是，一旦我添加了我的项目的其余部分（html、css、js 文件），我就会收到同样的错误：cordova.exec 未定义。

负责可能是**RequireJS**，它可能以不同的方式加载cordova-2.2.0.js。它适用于cordova 2.0.0，但似乎不适用于2.2.0。

我会尝试看看是否可以在 RequireJS 之前加载cordova-2.2.0.js，并且在加载cordova 后仍然使用它。

我会及时通知你：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T11:19:19.080

*很抱歉回答我自己的问题。*

这是我在上次编辑中的想法：**RequireJS 正在与 Cordova 2.2.0 搞混**！

之前，我使用此代码加载科尔多瓦：

```
require.config({
  paths: {
    cordova: 'libs/cordova/cordova-2.2.0', ... 
```

在我的任何使用cordova的脚本之前，我在写：

```
define([
  'jquery',
  'cordova',
  ...
], function($) { ... } 
```

在我的 index.html 中，我有：

```
<script data-main="js/main" src="js/libs/require/require-jquery.js"></script> 
```

它与科尔多瓦 2.0.0 配合得很好！但是**对于cordova 2.2.0，这是错误**的。

**要解决我的问题：**

我在前面的几行中摆脱了关于科尔多瓦的一切。

*   require.config 中不再有cordova。
*   在我的 js 函数的定义部分中不再有科尔多瓦。

相反，我在 index.html 中只添加了一行：

```
<script type="text/javascript" src="libs/cordova/cordova-2.2.0.js"></script>
<script data-main="js/main" src="js/libs/require/require-jquery.js"></script> 
```

一切正常！我可以再次调用cordova.exec()！*（在 iOS 4、iOS 6 和 iPhone 5 上测试）*。

老实说，我不太了解这一切是如何运作的。我只是假设需要先加载cordova（比如jquery），而RequireJS 不擅长这样做（或者我不知道如何使用它）。

经历这件事太可怕了。我很高兴一切都结束了：）

无论如何，我希望这对某人有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T15:44:08.823

在您的*require.config*对象中，您需要通过*shim*属性导出**cordova ：**

 *```
require.config({
   baseUrl: 'js',
   paths: {
      cordova: '../lib/cordova/cordova-2.2.0'
   },
   shim: {
      cordova: {
         exports: 'cordova'
      }
   }
}); 
```

最好定义一个模块来访问**cordova 的 exec 模块**：

```
/*global define */

define(['cordova'], function (cordova) {
   'use strict';

   return cordova.require('cordova/exec');
}); 
```

创建自定义插件现在很容易：

```
/*global define */

define(['plugins/cordovaExec'], function (cordovaExec) {
   'use strict';

   return function showToast(callback, message) {
      cordovaExec(callback, function (error) {}, "Toaster", "show", [message]);
   };
}); 
```

您只能在一个模块中执行此操作：

```
/*global define */

define(['cordova'], function (cordova) {
   'use strict';

   var exec = cordova.require('cordova/exec');

   return function showToast(callback, message) {
      exec(callback, function (error) {}, "Toaster", "show", [message]);
   };
}); 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T20:03:29.903

更新到 Cordova-2.4.0，您可以使用 RequireJS- 延迟加载它，正如他们博客上的发行说明所述：http: [//shazronatadobe.wordpress.com/2013/02/08/whats-new-in-科尔多瓦-ios-2-4-0/](http://shazronatadobe.wordpress.com/2013/02/08/whats-new-in-cordova-ios-2-4-0/)*

# php - 在同一域中具有多个 Laravel 实例时的会话/cookie 错误

> ID：13233302
> 
> 赞同：5
> 
> 时间：2012-11-05T13:40:45.353
> 
> 标签：php, laravel

你好，我最近开始为我的 Facebook 应用程序使用 Laravel 框架，我创建了一个基本应用程序，我为每个新项目复制并从那里开始修改。我要做的第一件事是更改 config/application.php 文件中的应用程序密钥中的几个字母。

现在，如果我同时开发 2 个应用程序并在它们之间不断切换，我会遇到某种缓存/cookie 错误，这些错误会阻止我的应用程序显示。我可以通过删除与我存储应用程序的域相关的 cookie 来摆脱它们，但据我了解，碰巧访问我的两个应用程序的用户可能会发生同样的事情。

我怎样才能让它正常工作？

这是我得到的错误：

```
Unhandled Exception

Message:

unserialize() [function.unserialize]: Error at offset 0 of 704 bytes
Location:

/mydomainpath/myapp/laravel/session/drivers/cookie.php on line 24
Stack Trace:

#0 /mydomainpath/myapp/laravel/laravel.php(40): Laravel\Error::native(8, 'unserialize() [...', '/data01/virt319...', 24)
#1 [internal function]: Laravel\{closure}(8, 'unserialize() [...', '/data01/virt319...', 24, Array)
#2 /mydomainpath/myapp/laravel/session/drivers/cookie.php(24): unserialize('??1?:????9O??.?...')
#3 /mydomainpath/myapp/laravel/session/payload.php(52): Laravel\Session\Drivers\Cookie->load('oBACwMEgwF2YXeZ...')
#4 /mydomainpath/myapp/laravel/session.php(35): Laravel\Session\Payload->load('oBACwMEgwF2YXeZ...')
#5 /mydomainpath/myapp/application/start.php(172): Laravel\Session::load()
#6 /mydomainpath/myapp/laravel/bundle.php(102): require('/data01/virt319...')
#7 /mydomainpath/myapp/laravel/laravel.php(76): Laravel\Bundle::start('application')
#8 /mydomainpath/myapp/public/index.php(34): require('/data01/virt319...')
#9 {main} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:22:58.970

您的 cookie 设置在您的项目中应该有所不同。如果他们不这样做，那可能是它被覆盖的原因。

检查您的*application/config/session.php*文件。

# jquery-ui - 如何使 jQueryUI 工具提示仅适用于焦点

> ID：13233304
> 
> 赞同：26
> 
> 时间：2012-11-05T13:40:56.827
> 
> 标签：jquery-ui, jquery-ui-tooltip

如何使新的 JqueryUI 工具提示仅在以下位置可见`focus`： 目前它的开启`focus`和开启`hover`。我相信这是从 JqueryUI 1.9 开始

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-21T08:30:15.947

更短的方式：

`$(".selector").tooltip().off("mouseover mouseout");`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-05T19:17:59.343

这并不理想，但应该可以：

```
$(".selector").tooltip({
    disabled: true
}).on("focusin", function () {
    $(this)
        .tooltip("enable")
        .tooltip("open");
}).on("focusout", function () {
    $(this)
        .tooltip("close")
        .tooltip("disable");
}); 
```

基本上，启用/打开工具提示`focusin`并禁用/关闭`focusout`.

**示例：http:** [//jsfiddle.net/WmRuN/](http://jsfiddle.net/WmRuN/)

# javascript - 如何避免无限滚动中的多个 JavaScript 函数调用

> ID：13233305
> 
> 赞同：3
> 
> 时间：2012-11-05T13:41:03.910
> 
> 标签：javascript, jquery, ajax, jsp, jquery-events

我正在使用这个 JavaScript 函数来创建一个具有无限滚动功能的 JSP 页面。

```
<script language="javascript" type="text/javascript">

var count = 0;

window.onload = loadSubPage;

$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
    alert("load appLeadershipSubView function calling");
        loadSubPage();
    }
});

function loadSubPage()
{
    alert("load appLeadershipSubView called");
        $.ajax({
        cache: false,
        url: 'appLeadershipSubView.do?count=' + count,
        async : true,
        beforeSend: function(){
        },
        success: function(html){
            alert("success event");
            $('#mainDiv').append(html);
            count++;
        },
        complete: function(){
        }
    }
    );
} 

</script> 
```

* * *

如您所见，我正在调用该`loadSubPage`函数以将`appLeadershipSubView`页面中的 html 内容附加到`#mainDiv`. 并且`loadSubPage`也在页面加载事件中被调用。

问题是当我向下滚动时，它会多次（有时 3 次）调用该`loadSubPage`函数并将重复的数据附加到 div 中。

由于我是 JSP 和 Javascript 的新手，我无法在这里找出问题所在。你能指出我这里的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:42:11.190

添加一个布尔值以确保没有活动请求。在发出请求之前检查它是否处于活动状态。

```
var isActive = false;
$(window).scroll(function(){
    if  (!isActive && $(window).scrollTop() == $(document).height() - $(window).height()){
    isActive = true; 
```

在回调中，将 isActive 设置为 false

```
success: function(html){
    $('#mainDiv').append(html);
    isActive = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:45:59.247

我宁愿使用[下划线的油门](http://underscorejs.org/#throttle)功能！

更干净，非hackish，您将专注于应用程序的逻辑，而不是做一些回调-布尔-重置-魔术。

# magento-1.6 - 主页上的 Magento 产品与平面目录结合不起作用

> ID：13233307
> 
> 赞同：1
> 
> 时间：2012-11-05T13:41:20.057
> 
> 标签：magento-1.6, magento

我在主页和平面目录上显示的产品存在一些问题。

关闭平面目录选项：

在 CMS 中，我创建了一个包含以下内容的静态块：

```
{{block type="catalog/product_list" category_id="18" template="catalog/product/list.phtml"}} 
```

在我的模板中，我定义了对该静态块的调用。因为我想在特定地点使用产品，所以我使用这种方式并且效果很好。

当我将平面目录切换为是时，重新索引并清除缓存：

主页不再显示该类别中的产品，而是显示“没有与选择匹配的产品。”。我一直在做一些简单的调试，看起来`list.phtml`页面得到了一个空的产品集合。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:18:50.213

我搜索了一种方法来解决这个问题并发现了类似的东西：

```
 <reference name="content">
 <block type="catalog/product_list" name="new-arrival-products" alias="arrival_products" template="catalog/product/new_arrival.phtml">
....
    <action method="setData"><key>category_id</key><value>6</value></action>
 </block> 
```

试试这个代码，fi 不工作可能你需要从 phtml 更改代码来呈现这个集合。

要在静态块上使用新类别，您必须转到目录 -> 管理类别 -> 单击您的类别，在您的类别上选择显示设置选项卡，然后在 CMS 块上选择您的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:17:13.153

找到了解决方案。

我在主页上想要的类别 (18) 不在我商店的根类别 (2) 中。我将cat 18移到cat 2下，问题解决了。

看起来 Magento 1.6 确实适用于根类别之外的平面目录和类别

# php - 对 ASP.NET 服务器 php curl 嵌套数组的 Soap 发布请求

> ID：13233313
> 
> 赞同：1
> 
> 时间：2012-11-05T13:41:31.053
> 
> 标签：php, soap, curl

我从几天开始就面临这个问题，但我仍然无法在网上或我之前的问题中找到任何答案或解决方案（实际上有一些错误）。

就是这样的情景。我必须使用 gls webservice 来添加包裹或列出插入的包裹。我正在使用 curl 构建客户端并进行调用，这是该类的代码：

```
/*Headers*/
public function buildGlsHeaders($glsCall,$gls_lenght,$soap_action)
{       
    //header soap 1.1
    $headers = array(
        "Content-Type: text/xml; charset=utf-8",
        "Content-Length: " . $gls_lenght,
        $soap_action,
        );

    return $headers;
}

/*Request*/
public function sendRequest($glsCall, $requestBody, $gls_lenght, $soap_action)
{
    $cookiePath = tempnam('/tmp', 'cookie');

    //build gls headers using variables passed via constructor as well as the gls call to use
    $headers = $this->buildGlsHeaders($glsCall, $gls_lenght, $soap_action);

    //initialise a CURL session
    $connection = curl_init();

    //set the server we are using 
    curl_setopt($connection, CURLOPT_URL, 'http://weblabeling.gls-italy.com/IlsWebService.asmx');

    //Time out
    curl_setopt($connection, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($connection, CURLOPT_TIMEOUT, 10);

    //set it to return the transfer as a string from curl_exec
    curl_setopt($connection, CURLOPT_RETURNTRANSFER, true);

    //stop CURL from verifying the peer's certificate
    curl_setopt($connection, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($connection, CURLOPT_SSL_VERIFYHOST, false);

    //set method as POST
    curl_setopt($connection, CURLOPT_POST, true);

    //set the XML body of the request
    curl_setopt($connection, CURLOPT_POSTFIELDS, $requestBody);

    //set the headers using the array of headers
    curl_setopt($connection, CURLOPT_HTTPHEADER, $headers);

    //Header
    curl_setopt($connection, CURLINFO_HEADER_OUT, true);
    curl_setopt($connection, CURLOPT_HEADER, true);

    curl_setopt($connection, CURLOPT_COOKIEJAR, $cookiePath);

    //Send the Request
    $response = curl_exec($connection);

    print_r(curl_getinfo($connection));

    echo "\n" . 'Header Code: ' . curl_getinfo($connection, CURLINFO_HTTP_CODE) . "\n\n";

    //close the connection
    curl_close($connection); 

    //return the response
    return $response;
} 
```

变量 $glsCall、$requestBody、$gls_lenght、$soap_action 来自脚本本身：

```
$soap_action = "SOAPAction: \"http://weblabeling.gls-italy.com/AddParcel\"";

$gls_lenght = strlen($xml); 
```

并且请求由以下行发送：

```
/*AddParcel*/
$glsResponse = $gls->sendRequest('AddParcel', $xml, $gls_lenght, $soap_action);

/*ListSped*/
$glsResponse = $gls->sendRequest('ListSped', $xml, $gls_lenght, $soap_action); 
```

现在两个调用都以相同的方式构造，但其中一个是嵌套的：

```
$Label = array(
                'XMLInfoParcel' => array(
                'Info' => array(
                    'SedeGls' => $SedeGls,
                    'CodiceClienteGls' => $CodiceClienteGls,
                    'PasswordClienteGls' => $PasswordClienteGls,                
                    'Parcel' => array(
                                       'CodiceContrattoGls' => $cod_cont,
                                       'RagioneSociale' => $rag_soc,
                                       'Indirizzo' => $delivery_indirizzo,
                                       'Localita' => $delivery_city,
                                       'Zipcode' => $data['delivery_postcode'],
                                       'Provincia' => $data['zone_code'],
                                       'Bda' => '',
                                       'DataDocumentoTrasporto' => '',
                                       'Colli' => '1',
                                       'Incoterm' => '',
                                       'PesoReale' => '1,00',
                                       'ImportoContrassegno' => $imp_cont,
                                       'NoteSpedizione' => $data['customers_telephone'],
                                       'TipoPorto' => 'F',
                                       'Assicurazione' => $ass_ins,
                                       'PesoVolume' => '',
                                       'TipoCollo' => $tipo_collo,
                                       'FrancoAnticipata' => '',
                                       'RiferimentoCliente' => '',
                                       'NoteAggiuntive' => '',
                                       'CodiceClienteDestinatario' => '',
                                       'Email' => '',
                                       'Cellulare1' => $telefono,
                                       'Cellulare2' => '',
                                       'ServiziAccessori' => '',
                                       'ModalitaIncasso' => $mod_inc    
                                  ),),),                                
                ); 
```

而另一个不是：

```
/*Request*/
    $listsp = array(
                    'SedeGls' => $SedeGls,
                    'CodiceClienteGls' => $CodiceClienteGls,
                    'PasswordClienteGls' => $PasswordClienteGls 
                    ); 
```

这些是请求输入：

添加包裹

![在此处输入图像描述](../Images/5734f1ca4bad497c4ebb19f33a8583b8.png)

列出速度

![在此处输入图像描述](../Images/a98c20debf081d35bd06a3d34f541466.png)

如您所见，输入格式不同，这是 AddParcel "string" 的架构

![在此处输入图像描述](../Images/79889c81d8459adc9881603914a546a4.png)

它继续与其他领域并关闭

```
 </Parcel>
  </Info> 
```

ListSped 调用完美地工作，而 AddParcel 没有，它总是返回 400 Bad 请求标头。我认为 xml 是正确的，因为我将它发送给 GLS IT 支持，并且他们确认我在直接上传时它可以工作。不幸的是，他们不支持 php。

我正在考虑导致问题的嵌套数组，但我觉得不可能，因为如果我更改 xml 结构 webservice 答案正确：“xml 结构错误”。

我一直在环顾四周，我发现其他一些人有同样的问题，但没有找到解决方案。我想让脚本在 php 中工作，而不是使用其他我不知道的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:00:11.100

正如我们在请求输入的图片“AddParcel”中看到的，输入本身是一个字符串。

我意识到它希望将其格式化为：

```
 &lt;Info&gt;&lt;SedeGls&gt;XXX&lt;/SedeGls&gt;&lt;CodiceContrattoGls&gt;XXX&lt;/CodiceContrattoGls&gt; <!--and so on--> 
```

# php - 数组赋值为 null

> ID：13233314
> 
> 赞同：1
> 
> 时间：2012-11-05T13:41:32.113
> 
> 标签：php, arrays

以下

```
$array = null;
$array['xxx'] = 12;
\var_dump($array); 
```

将输出

```
array (size=1)
    'xxx' => int 12 
```

为什么？有什么方法可以让 PHP 将这些报告为错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:42:36.530

```
$array['xxx'] = 12; 
```

哪里`$array`是 null/undefined，上面的赋值会创建数组，相当于：

```
$array = array('xxx' => 12); 
```

# c# - 如何在另一个文件夹的图片框中显示图像？

> ID：13233317
> 
> 赞同：1
> 
> 时间：2012-11-05T13:41:42.053
> 
> 标签：c#, picturebox

我在以下位置有一个图像“back.jpg”：projectfolder/image/back.jpg，我正在尝试将图像加载到图片框上。我正在尝试以下代码，但它没有用。

```
this.pictureBox.ImageLocation = @"\image\back.jpg"; 
```

如果我在 H:\back.jpg 中有图像。以下代码正在运行

```
this.pictureBox.ImageLocation = @"H:\back.jpg"; 
```

这段代码有什么问题？`this.pictureBox.ImageLocation = @"\image\back.jpg";`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:51:03.980

您的路径应该是：`@"..\..\image\av.jpg"`，因为您正在从`"Folder\bin\debug"`文件夹运行您的应用程序，并且图像高 2 个文件夹。

您的路径`@"\image\back.jpg"`意味着您指的是根文件夹，即您的目标是“H:\image\back.jpg”。

这里最好的模式是：

1.  在 VS 中将图像文件包含到您的解决方案中（如果您还没有这样做）
2.  转到包含的文件属性并将“如果较新则复制”设置为“如果较新则复制”
3.  使用此代码：`this.pictureBox.ImageLocation = "back.jpg";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:47:30.540

将要复制的图像文件设置为始终复制到输出目录，并仅使用文件名对其进行引用。

# jquery - 对话框中的jquery datepicker

> ID：13233321
> 
> 赞同：7
> 
> 时间：2012-11-05T13:41:58.490
> 
> 标签：jquery, jquery-ui

我想在对话框中使用 jquery datepicker。日期选择器应在焦点上触发（默认）。由于文本框是对话框中的第一个字段，因此它会自动获得焦点。这会在第一次打开对话框时打开日期选择器，这会产生不良影响。

我尝试了许多不同的方法，例如将焦点设置为虚拟 href，在对话框打开后调用 datepicker('close')，将 showOn 设置为“按钮”，然后在对话框打开后更改为“焦点”，但没有任何效果。

日期选择器应该只在文本框获得焦点时呈现，对话框首先打开时除外。

我的片段

```
$(function() {
    $('#btnDialog').click(function() {
        $('#myDate').datepicker({
            title: 'Test Dialog'
        });
        $('#myDialog').dialog();
    });
});​ 
```

JS 小提琴链接：http: [//jsfiddle.net/UkTQ8/](http://jsfiddle.net/UkTQ8/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T13:49:57.723

在打开时创建日期选择器并在关闭时将其销毁：

```
$(function() {
    $('#btnDialog').click(function() {
        $('#myDialog').dialog({
            open: function() {
                $('#myDate').datepicker({title:'Test Dialog'}).blur();
            },
            close: function() {
                $('#myDate').datepicker('destroy');
            },
        });
    });
}); 
```

演示：http: [//jsfiddle.net/UkTQ8/7/](http://jsfiddle.net/UkTQ8/7/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-12T16:52:09.600

一个更简单的解决方案是将 tabindex="-1" 添加到文本框。

```
<input type="text" id="myDate" tabindex="-1" /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-05T13:46:21.457

**解决方案：在日期文本框***之前*添加一个虚拟文本框。

**演示**：http: [//jsfiddle.net/UkTQ8/4/](http://jsfiddle.net/UkTQ8/4/)

```
<div id="myDialog" title="Text Dialog">

<input type="text" id="dummyDate" /> <!-- dummy textbox -->

<p>The textbox below should show the datepicker on focus, except for when the dialog opens.</p>
Enter date: <input type="text" id="myDate" />
</div> 
```

# javascript - 如何从离线应用程序设置 cookie

> ID：13233324
> 
> 赞同：1
> 
> 时间：2012-11-05T13:42:08.180
> 
> 标签：javascript, acrobat

有没有办法从运行 javascript（acrojs 或类似）的离线应用程序中设置 cookie，以便稍后从 borwser 中检索？

# mysql - 获取具有最小差异的范围的 ID

> ID：13233325
> 
> 赞同：1
> 
> 时间：2012-11-05T13:42:08.633
> 
> 标签：mysql, sql

假设我有一个表 A。这个表有 ID、X_value、Y_value。这是表A的内容：

表 A

```
ID X_value Y_value
1  100     150
2  110     170
3  120     190 
```

现在，如果我将数字**130**与范围数字（X_value - Y_value）进行比较，我想获得具有最小（最小）差异的范围 ID！如果我可以这样命名？我们马上看到数字**130**将落入所有这些范围，但我需要范围 ID 与**130**和范围数字之间的最小（最小）差异。详细说明这种差异：

```
For range 1: 130-100=30 and 150-130=20
For range 2: 130-110=20 and 170-130=40
For range 3: 130-120=10 and 190-130=60 
```

从这个阐述中，我们看到最小差异在第三个范围（即**10**），所以我想得到 ID **3**。如果我在 MySQL 数据库中有这个表，这个例子的查询是什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:47:23.550

试试这个：

```
SELECT * 
FROM Table1
WHERE ID IN
(
    SELECT ID FROM
    (
        SELECT 
          ID,
          130 - x_value xdiff,
          y_value - 130 ydiff
        FROM Table1
        ORDER BY xdiff ASC LIMIT 1
    ) t
) 
```

这会给你：

```
ID    X_VALUE    Y_VALUE
3       120       190 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/8d6e0/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:10:28.960

刚刚修改了 Mahmoud Gamal 的查询来解决问题：

```
SELECT * 
FROM Table1
WHERE ID IN
(
 SELECT ID FROM
  (
SELECT 
  ID,
  CASE
WHEN (130 - x_value > y_value - 130) THEN y_value - 130
ELSE 130 - x_value
END
FROM Table1
 where 130>=x_value and 130<=y_value
ORDER BY 2 ASC LIMIT 1
    )t) 
```

在这里查看：[http ://www.sqlfiddle.com/#!2/117a0/1](http://www.sqlfiddle.com/#!2/117a0/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:01:46.490

```
select * 
from yourtable
order by case when ABS(x-130)<ABS(y-130) then ABS(x-130) else ABS(y-130) end
limit 1 
```

或者

```
select id
from
(select id,x from yourtable union select id,y from yourtable) v
order by ABS(x-130) 
limit 1 
```

# c# - 没有在数组上正确插入换行符

> ID：13233333
> 
> 赞同：1
> 
> 时间：2012-11-05T13:42:39.890
> 
> 标签：c#

我有用于存储禁止域列表的文本文件，该列表也显示在表格的页面上，但是即使插入了换行符，它仍然作为单个字符串写入一行。如果有人对为什么这样做有任何想法，将不胜感激！

```
 private void GetNote()
{
    string[] lines = File.ReadAllLines(MapPath(FILE_PATH));

    bannedDomains.InnerText = string.Join("\r\n", lines);
    //bannedDomains.InnerText = File.ReadAllText(MapPath(FILE_PATH));
}

private void SaveNote()
{
    File.AppendAllText(MapPath(FILE_PATH), "\r\n" + bannedDomainText.Text);

    //using (TextWriter tw = new StreamWriter(MapPath(FILE_PATH)))
    //{
    //    tw.WriteLine(bannedDomainText.Text);
    //}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:44:39.370

如果您要输出到 HTML，`\r\n`则无济于事 - 您必须`<br />`改为输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:45:15.913

尝试`Environment.NewLine`

```
 Console.WriteLine("NewLine: {0}  first line{0}  second line{0}  third line",
                          Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:46:53.987

而是在纯文本文件或简单字符串的情况下`<br />`插入换行符。`HTML``System.Environment.NewLine`

# visual-c++ - 是什么导致 ::AfxInitRichEdit2 失败，我该如何解决？

> ID：13233335
> 
> 赞同：2
> 
> 时间：2012-11-05T13:42:40.003
> 
> 标签：visual-c++, mfc, visual-studio-2012, cricheditctrl

我正在使用 Visual Studio 2012 构建现有的 MFC 应用程序。该应用程序使用`"RichEdit20A"`控件和自定义控件，它们继承了`CRichEditCtrl`.

应用期间`InitInstance()`调用`::AfxInitRichEdit2()`，调用`AtlLoadSystemLibraryUsingFullPath(L"RICHED20.DLL")`，调用`LoadLibraryExW(pszLibrary, NULL, LOAD_LIBRARY_SEARCH_SYSTEM32)`。后一个调用失败并返回`NULL`。`GetLastError()`返回 87（参数不正确）。这发生在 Win7 x64 和 Win8 x64 上。

失败的调用似乎是在 Visual Studio 2012 运行时中引入的（它在 conditional 内`#if NTDDI_VERSION >= NTDDI_WIN8`）。该应用程序在使用 Visual Studio 2008 构建时运行良好。

有谁知道为什么会发生这种情况以及如何解决（或解决）这个问题？或者，有没有办法“恢复”运行时以使用旧的加载行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:09:33.670

选择合适的目标 Windows 版本可能非常重要。就在这里，如果您没有自己明确设置它，那么 Visual Studio 会假定您将针对最新和最好的。这是 VS2012 的 Windows 8。

其中包括 LoadLibraryEx() 的新选项 LOAD_LIBRARY_SEARCH_SYSTEM32 选项。在 Windows 8 上可用，但如果您在 Windows Vista、7 或 2008 上使用它，则需要安装[安全补丁](http://support.microsoft.com/kb/2533623)。这是一个非常关键的补丁，显然您没有安装它。

如果您希望您的程序与旧的或未打补丁的 Windows 版本兼容，那么您需要更改目标。这通常`targetver.h`由头文件完成，假设您的 MFC 项目是由相对较新的向导生成的。像这样修改它：

```
#pragma once

// Including SDKDDKVer.h defines the highest available Windows platform.

// If you wish to build your application for a previous Windows platform, include WinSDKVer.h and
// set the _WIN32_WINNT macro to the platform you wish to support before including SDKDDKVer.h.

#define _WIN32_WINNT _WIN32_WINNT_WINXP    // NOTE: added
#include <SDKDDKVer.h> 
```

如果您没有 targetver.h，请将其放在 #include for 之前的任何位置`<windows.h>`。根据需要调整值。请注意，VS2012 目前不支持 XP，但稍后会支持。

# php - 如何在 Wordpress 中添加 Googles utm_source 变量？

> ID：13233337
> 
> 赞同：0
> 
> 时间：2012-11-05T13:42:51.390
> 
> 标签：php, wordpress, .htaccess, google-analytics, utm

我在 wordpress 中使用了永久链接结构，`www.domain.com/sample-post/`但它自然会阻止它不知道的所有参数。

我实际上只是想将 Googles`?utm_source=`变量添加到某些链接以跟踪某些来源，但是 Wordpress 阻止了它们，并且`/none`我的日志中出现 404 错误输出。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T21:06:08.597

而不是使用？您可以选择使用 # 来传递 utm_source 值。

为此，只需将此行添加到 _trackPageview _gaq.push(['_setAllowAnchor', true]); 上方的分析跟踪代码中

现在您可以像这样标记 utm_source 参数 [http://mysite.net/index.html#utm_source=Source&utm_medium=email&utm_campaign=Name](http://mysite.net/index.html#utm_source=Source&utm_medium=email&utm_campaign=Name)

由于 # 之后的数据未传递到服务器 wp 将继续看到相同的 url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T13:12:29.437

```
# Block the include-only files. 
RewriteEngine On
RewriteBase /
# RewriteRule ^wp-admin/includes/ - [F,L]
RewriteRule ^wp-includes/js/tinymce/langs/.+\.php - [F,L]
RewriteRule ^wp-includes/theme-compat/ - [F,L] 

# Preventing Directory Listing, Leads to Block and 403 and 401
Options -Indexes

# BEGIN WordPress
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# uploaded files
RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
RewriteRule  ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
RewriteRule . index.php [L]
# END WordPress 
```

你好，

我使用 domain.com/sample-post/ 作为永久链接结构

# python - Amazon S3：我看到存储的是“原始内容”而不是图像

> ID：13233340
> 
> 赞同：0
> 
> 时间：2012-11-05T13:42:54.730
> 
> 标签：python, django, amazon-s3

我正在 ping 一个 API，它为我提供了图像的路径。然后我打开/读取该图像并将其保存到 s3 上的数据库中。

问题在于，它不是存储实际图像，而是仅存储单词`Raw Content`。我究竟做错了什么？

这是我的相关代码。基本上我将文件的路径存储在字段中`coverart`，函数`store_in_s3_partpic`返回文件的路径。这个函数显然也将内容加载到 S3。

```
pic = partpics['url']
# CACHING
img_url = pic
name = urlparse(img_url).path.split('/')[-1]
#wrap your file content??
content = ContentFile(urllib2.urlopen(img_url).read())
unipart.coverart = store_in_s3_partpic(name, content) 
```

我在这里做错了什么会导致我只看到“原始内容”吗？

这是我的 store_in_s3_partpic 代码：

```
def store_in_s3_partpic(name, content):
    print "STORING PARTPIC"
    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
    pathtofile = "partpics/%s" % (name)
    b = conn.create_bucket('mybucket')
    mime = mimetypes.guess_type(name)[0]
    k = Key(b)
    k.key = "/media/partpics/%s" % (name)
    k.set_metadata("Content-Type", mime)
    k.set_contents_from_string(content)
    k.set_acl("public-read")
    return pathtofile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:35:32.893

我不知道为什么，但我将文件打开命令更改为这个，现在一切正常：

```
 `content = urllib2.urlopen(img_url).read()` 
```

# c++ - 判断一个矩阵是上三角、下三角还是对角矩阵

> ID：13233342
> 
> 赞同：0
> 
> 时间：2012-11-05T13:43:07.327
> 
> 标签：c++, matrix

我已经遇到了这个问题，以找出某个阶的矩阵是上三角矩阵、下三角矩阵还是简单的对角矩阵。我编译了以下代码。它在上三角和对角线部分成功运行，但从未检查下三角条件。

```
int main()
{

    int mat[10][10];

    cout<< "\n Enter dimension of square matrix;";

    int n;

    cin>>n;

    cout<< "\n Enter the elements for the matrix :";

    for(int i=0; i< n ; i++)
        for (int j = 0; j< n ; j++)
        {
            cout<<"\n Element for positon : " << i+1 << " , " << j+1 << ":";
            cin>> mat[i][j];
        }

    int flag1=0,flg2=0,flg3=0;

    for(int i=0; i< n ; i++)
        for (int j = 0; j< n ; j++)
        {
            if(i == j)
                if(mat[i][j] == 0)
                {
                    flag1 = 1;
                    break;
                }

            if(i!= j)
            {
                if(mat[i][j]!=0)
                {
                    flag1 = 1;
                    break;
                }
                else if(mat[i]>mat[j] && mat[i][j]==0)
                {
                    flg2=flg2+1;
                }
                else (mat[i]<mat[j] && mat[i][j]==0)
                {
                    flg3=flg3+1; 
                }
            }
        }

    if(flag1== 0)
    {
        cout<< "\n A Diagonal Matrix .";
    }
    else if(flg3==3)
    {
        cout<<"\n Lower Triangular Matrix.";
    }
    else (flg2==3)
    {
        cout<<"\n Upper Triangular matrix.";
    }

    cout<<"\n\n Matrix :\n";
    for(int i=0; i< n ; i++)
    {
        for (int j = 0; j< n ; j++)
            cout<< mat[i][j] << " ";

        cout<< endl;
    }
    getch();
} 
```

我正在使用 GCC 编译器（Dev C++）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:51:57.120

您在比较`mat[i]>mat[j]`时可能意味着`i>j`，对于`<`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T03:33:39.680

else 不应该有条件

```
else (mat[i]<mat[j] && mat[i][j]==0) {...} 
```

只需写：

```
else {... 
```

再次在：

```
else (flg2==3) {...} 
```

只需写：

```
else {... 
```

所以代码不应该编译，而是一个错误说

> “预期令牌；在 { 之前”

将在 45:17 和 60:5 显示

# drupal - 在导航中添加跨度

> ID：13233348
> 
> 赞同：1
> 
> 时间：2012-11-05T13:43:26.427
> 
> 标签：drupal, navigation, drupal-7, html, drupal-theming

我正在用 Drupal 7 开发一个网站

[http://lorrells.seoperspective.com/](http://lorrells.seoperspective.com/)

现在问题是侧边栏菜单（左侧）我的客户想要如下图所示的内容 ![在此处输入图像描述](../Images/762075cc83356436fddf2f15434e1c73.png)

意味着他想要链接下方的少量文本，所以我想在下面添加“标题”文本，以便我可以设置它的样式

我想要的是

```
<ul>
    <li class="menu-359 first"><a class="Litigation" title="Our niche Litigation Department punches well above its weight." href="http://lorrells.seoperspective.com/Litigation">Litigation</a><span>Our niche Litigation Department punches well above its weight.</span></li>
</ul> 
```

page.tpl.php 中的代码

```
 <div class="sidebar_menu"> 
     <?php

        $menu = menu_navigation_links('menu-sidebarmenu');
        print theme('links__menu-sidebarmenu', array('links' => $menu));

    ?>

    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:31:19.897

```
function ThemeName_link($variables) {
  return '<a href="' . check_plain(url($variables['path'], $variables['options'])) . '"' . drupal_attributes($variables['options']['attributes']) . '><span>' . ($variables['options']['html'] ? $variables['text'] : check_plain($variables['text'])) . '</span></a>';
} 
```

它适用于您主题中的所有链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:38:03.950

方法一：你看过[这个](http://drupal.org/project/menu_html)contrib模块吗？它将向您显示一个复选框以在菜单标题中输入 html。但我警告你，菜单项中的 html 是有风险的业务。确保权限设置正确。

方法 2：实现相同效果的另一种方法是创建带有自定义标记的块。但是，如果您允许您的客户对其进行编辑，那可能是一场等待发生的灾难。

方法 3：如果您喜欢使用 hooks，可以使用[hook_menu_link_alter(&$item)](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_link_alter/7)将 html 属性设置为 true，并按照您想要的方式重新格式化标题。

# c# - 通过 Windows 应用商店应用将人员添加到 HUB

> ID：13233350
> 
> 赞同：4
> 
> 时间：2012-11-05T13:43:30.283
> 
> 标签：c#, microsoft-metro, windows-runtime, windows-store-apps, windows-store

我想编写一个可以将联系人添加到联系人中心的 Windows 应用商店应用程序。这些字段是自动填写的，用户只需确认数据正确即可添加联系人。我正在用 C# 开发。是否有可用的 API？或者有没有人知道任何其他方法，所以我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:23:12.413

是的，有这么多方法。我要做的是：尝试通过从[http://msdn.microsoft.com/en-us/library/live/hh826532](http://msdn.microsoft.com/en-us/library/live/hh826532)包含它在您的应用程序中使用 Live SDk ，并且该链接还包含足够的代码开始。

您可以从那里自动获取联系信息，并且可以使用漫游存储来存储信息，或者如果您想基于多个用户进行更新，可以使用任何云存储。

# c++ - 防止同一类的实例调用公共函数（C++）

> ID：13233354
> 
> 赞同：5
> 
> 时间：2012-11-05T13:43:35.537
> 
> 标签：c++

> **可能重复：**
> [为什么同一类的对象可以访问彼此的私有数据？](https://stackoverflow.com/questions/6921185/why-do-objects-of-the-same-class-have-access-to-each-others-private-data)

尝试保持封装时我从未理解过的东西：

假设我有一个名为 的类`GameObject`和一个名为 的派生类`Human`。`GameObject`有一个私有变量`position`。我有多个实例`Human`，我希望每个人都能够根据需要调用`SetPos()`并设置它的位置。然而，我不希望一个人有能力设置另一个人的位置。这是我的问题。

如果我有`SetPos`public 或 protected，每个人都可以改变彼此的位置，如果`SetPos()`是私有的，一个人甚至不能设置自己的位置（我需要这个，可能是一个薄弱的例子，但我希望你能理解）。

任何人都可以提供解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:49:00.817

> 如果 SetPos() 是私有的，人类甚至不能设置自己的位置

实际上，它可以，如果`SetPos`定义在`Human`. 一个`private`方法只能从类内部调用，但它不保护同一个类的实例彼此之间：

```
class Human {
  private:
    void set_pos(int i) { std::cout << "moving to " << i << std::endl; }
  public:
    void set_pos_on_other(Human &other, int i) const { other.set_pos(i); }
};

int main()
{
    Human alice, bob;
    bob.set_pos_on_other(alice, 10);
} 
```

如果`SetPos`定义在`GameObject`并且必须由 a 调用`Human`，即使仅在其自身上，也必须是`protected`or `public`。

要解决对象调用彼此`private`方法的问题，您只需要仔细编程并坚持您的不变量。C++ 没有为此提供特殊语法。每当一个`Human`方法被传递一个引用或指向另一个的指针时`Human`，它就可以调用它想要`Human`的所有方法。`private`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:06:27.713

公共和私有的封装旨在解决一个不同的问题，即通过将类与其他类隔离来使类的编码更容易。不隔离单个对象。

也许您可以通过管理指针来限制访问？不要使指向对象的指针普遍可用，而是始终通过某种接口，通过数字或其他键标识您要使用的对象？

# c# - 使用 Microsoft.Office.Interop.Excel 将文件另存为 PDF

> ID：13233359
> 
> 赞同：1
> 
> 时间：2012-11-05T13:43:52.200
> 
> 标签：c#, com

我正在使用***Microsoft.Office.Interop.Excel.Workbooks.Open()***方法打开 .XML 文件，然后使用***Microsoft.Office.Interop.Excel.Workbook.ExportAsFixedFormat()***方法发布（保存）打开的文件.XML 文件为 .PDF 文件。

现在在我的开发和预生产环境中，一切都运行良好，但在我们的生产服务器上，似乎当调用**Microsoft.Office.Interop.Excel.Workbooks.Open()**时，方法执行被停止甚至不执行。 . (W/O 任何我可以知道的异常或任何错误，即使不在我的日志文件或事件查看器中..)，最终显然没有任何 .PDF 文件保存在任何地方。

这是我的代码：

```
using ExcelApp = Microsoft.Office.Interop.Excel;

public static void ToPdf()
{           
        // Declare the Excel Application object and set it in null state
        ExcelApp.Application activeExcel = null;
        // Declare the Workbook to be used within the Excel Application object
        ExcelApp.Workbook openWorkBook = null;
        // Used for passing parameter for the attribute of opening the .XML file
        object tMiss = Type.Missing;

        // .XML file location
        string xmlPathName = "C:/Windows/Temp/XmlFile.xml";

        try
        {
            // Instanitating the Excel.Application to a new valid Instance object
            activeExcel = new ExcelApp.Application();
            // Open Excel as Hiden
            activeExcel.Visible = false;
            // Open Excel w/o alerts
            activeExcel.DisplayAlerts = false;

            //
            // Log this line
            //
            LogTxt.LogCreator("Set Excel GUI to be open Hiden with no Alerts");

            // Open an Excel instance and passing the .XML file Path
            openWorkBook = activeExcel.Workbooks.Open(xmlPathName, 0, false, tMiss, tMiss,
                                                         tMiss, true, tMiss, tMiss, tMiss,
                                                               true, tMiss, false, false);

            //
            // Log this line
            //
            LogTxt.LogCreator("Excel Application Opend");

            // Publishing the opened workbook (.xml file) as .pdf file
            openWorkBook.ExportAsFixedFormat(ExcelApp.XlFixedFormatType.xlTypePDF, pdfPathName);

            //
            // Log this line
            //
            LogTxt.LogCreator("Excel to .PDF published");
            }
            catch (Exception ee)
            {
                LogTxt.LogCreator(string.Format("Error is {0}", ee.InnerException.Message));
            }
            finally
            {
                // Flag for finding the Excel process or not
                //bool foundExcel = false;

                if (openWorkBook != null)
                {
                    // Closing the workbook 
                    openWorkBook.Close(false, tMiss, tMiss);
                    // here we say that this object is not going to be called anymore
                    Marshal.ReleaseComObject(openWorkBook);
                }
                if (activeExcel != null)
                {
                    // Closing the Excel
                    activeExcel.Quit();
                    // here we say that this object is not going to be called anymore
                    Marshal.ReleaseComObject(activeExcel);

                    //
                    // Log this line
                    //
                    LogTxt.LogCreator("Excel Procces Closed");
                }

                GC.GetTotalMemory(false);
                // Calling to GC go through all gen
                GC.Collect();
                // Stops the corrent thread untill the Finalizers empty the queue
                GC.WaitForPendingFinalizers();
                // Calling the GC to go through all gen
                GC.Collect();
                GC.GetTotalMemory(true);
} 
```

注意 - 我正在登录到我的日志文件，以便能够查看部署后执行的代码行。

通过将 \Users 和网络服务用户添加到访问权限默认值以及启动和激活权限，我还确保我有权在组件服务管理下的 COM 安全选项卡中执行 COM 组件。
正如[这里](http://social.technet.microsoft.com/Forums/en-US/w7itproappcompat/thread/dde69147-a01a-4eb1-8ea9-31adbf874bed/ "DCOM 安全")所解释的。

我要问的是，如果你们对理解 Open() 方法有什么问题有任何想法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T14:08:52.323

我会考虑使用它来读取 excel 文件

[http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

然后这将允许您打印到 PDF。

[http://pdfsharp.codeplex.com/](http://pdfsharp.codeplex.com/)

它是开源的，可以在商业应用程序中免费使用。

不是一个完整的解决方案，但它是一个开始。那么你不在服务器环境中使用 Com

# android - 在 web 服务的 https url 上发布

> ID：13233365
> 
> 赞同：0
> 
> 时间：2012-11-05T13:44:11.253
> 
> 标签：android, http-post

我正在尝试在 https url 上发布一些数据，该 url 没有证书，因为那只是 web 服务，我的代码在下面给出

```
DefaultHttpClient hc=new DefaultHttpClient();   
ResponseHandler <String> res=new BasicResponseHandler();
String   sourceURL=context.getResources().getString(R.string.web_service_url)+"/authenticateUser";
    Log.d("INSIDE AUTHENTICATION", "URLSOFAuthenticateuser" +sourceURL);
    HttpPost postMethod=new HttpPost(sourceURL);   
    List<NameValuePair> userDetails = new ArrayList<NameValuePair>();

    userDetails.add(new BasicNameValuePair("userId", userId)); 
    userDetails.add(new BasicNameValuePair("userPass", userPass)); 

    try {

        Log.d("inside", "&*&*&*&*"+userDetails);
        postMethod.setEntity(new UrlEncodedFormEntity(userDetails)); 
        Log.d("iNSIDE 1", "&*&*&*"+hc.execute(postMethod,res));
        response=hc.execute(postMethod,res);
        Log.d("iNSIDE 2", "&*&*&*");

    }
    catch(HttpResponseException g)
    {
        Log.d("", "&*&*&*HttpResponseException");
    }
    catch (UnsupportedEncodingException e) {
        Log.d("", "&*&*&*UnsupportedEncodingException");

    } catch (ClientProtocolException e) {
        Log.d("", "&*&*&*ClientProtocolException");

    } catch (IOException e) {
        Log.d("", "&*&*&*IOException");

    }  
       return response; 
```

你能帮我解决这个问题吗？有什么方法可以在 https 网址上发布 httppost。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:10:07.890

[http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

这应该会有所帮助..如果您仍然遇到问题，请告诉我。

# three.js - 计算顶点法线

> ID：13233368
> 
> 赞同：7
> 
> 时间：2012-11-05T13:44:29.090
> 
> 标签：three.js

我正在使用 3d 修改器[https://github.com/foo123/MOD3](https://github.com/foo123/MOD3)来弯曲立方体。几何体更新（顶点位置改变）后，灯光没有更新，立方体仍然被着色，就好像没有任何改变一样。所以我尝试了

`cube.geometry.computeVertexNormals()`

和

`cube.geometry.computeFaceNormals()`

但在那之后，立方体不再像立方体一样呈现，而是像一个“丑陋的球体”：

![在此处输入图像描述](../Images/d3a1b58df8f75bd5fa22ca8488a456ed.png)

左边是经过的底纹`computeVertexNormals()`，右边是原来的底纹。

几何体更改后如何更新阴影？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T15:08:30.157

如果您使用 MOD3 仅修改几何体，那么您将不得不自己更新法线。

```
geometry.computeVertexNormals(); 
```

每个新的顶点法线将是共享该顶点的相邻面的面法线的归一化总和。

如果您不喜欢three.js 的方式，您唯一的选择就是自己修改顶点法线。

三.js r.85

# sql - 用 INSERT / UPDATE 的单个查询替换循环

> ID：13233369
> 
> 赞同：2
> 
> 时间：2012-11-05T13:44:27.417
> 
> 标签：sql, postgresql, plpgsql, upsert, postgresql-performance

我正在 PostgreSQL 中编写一个函数。它基本上做了3个步骤：

1.  从源表中获取记录。
2.  检查目标表中获取的记录的值，如果在目标表中找到记录，则用获取的记录更新目标表的所有值，否则将获取的记录插入目标表。

如果我为插入/更新编写**单个查询**，而不是执行此循环，它会比上述方法更快吗？如何通过编写单个查询而不是遍历每条记录并进行更新/插入来获得相同的结果。

我目前的方法如下

```
CREATE OR REPLACE FUNCTION fun1()
  RETURNS void AS
$BODY$DECLARE
   source_tab_row RECORD;

   v_col1 TEXT;
   v_col2 TEXT;
   v_col3 TEXT;
   v_col4 double precision ;
   cnt integer;

BEGIN
    FOR source_tab_row IN (SELECT * FROM source_tab where col5='abc')
LOOP
    v_col1=source_tab_row.col1;   
    v_col2=source_tab_row.col2;
    v_col3=source_tab_row.col3;
    v_col4=source_tab_row.col4;

    select count(*) INTO cnt from dest_tab where col1=v_col1;

     if (cnt =0) then
     -- If records is not found
       INSERT INTO dest_tab(col1, col2, col3,col4)
       VALUES( v_col1, v_col2, v_col3,v_col4)   ;
    else
     --if records found then update it
       update dest_tab set col1=v_col1, col2=v_col2, col3=v_col3,col4=v_col4
       where col1=v_col1;

     end if;         
END LOOP;
END;
$BODY$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:25:23.887

### 更好的 SQL

如果您有 PostgreSQL 9.1 或更高版本，则绝对应该为此使用[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

```
WITH x AS (
   UPDATE dest_tab d
   SET    col2 = s.col2
        , col3 = s.col3
   --   , ...
   FROM   source_tab s
   WHERE  s.col5 = 'abc'
   AND    s.col1 = d.col1

   RETURNING col1
   )
INSERT INTO dest_tab(col1, col2, col3, col4)
SELECT s.col1, s.col2, s.col3, s.col4
FROM   source_tab s
WHERE  s.col5 = 'abc'
LEFT   JOIN x USING (col1)
WHERE  x.col1 IS NULL; 
```

正如@Craig 已经发布的那样，这种操作通常比基于集合的 SQL 快得多，而不是遍历单个行。

但是，这种形式更快更简单。它还在很大程度上避免了固有的（微小的！）竞争条件。首先，因为这是一条 SQL 命令，所以时隙更短。`UPDATE`此外，如果并发事务应该在和之间输入竞争行`INSERT`，则会出现重复键违规（前提是您应该有 pk / unique 约束）。因为您没有`dest_tab`第二次查询并为`INSERT`. 更快，更好。

如果您看到重复的密钥违规：没有发生任何不好的事情，只需重试查询。

它不*涵盖*`DELETE`并发事务同时会出现一行的相反情况。这确实是不太重要/常见的情况，IMO。

### 正确的 plpgsql

***如果***为此使用 plpgsql，请简化：

```
CREATE OR REPLACE FUNCTION fun1()
  RETURNS void AS
$BODY$
DECLARE
   _source source_tab;  -- name of table = type
BEGIN
   FOR _source IN
      SELECT * FROM source_tab where col5 = 'abc'
   LOOP
        UPDATE dest_tab
        SET    col2 = _source.col2  -- don't update col1, it doesn't change
               ,col3 = _source.col3
               ,col4 = _source.col4
        WHERE  col1 = _source.col1;

      IF NOT FOUND THEN  -- no row found
         INSERT INTO dest_tab(col1, col2, col3,col4)
         VALUES (_source.col1, _source.col2, _source.col3, _source.col4);
      END IF;

   END LOOP;
END
$BODY$ LANGUAGE plpgsql; 
```

# html - 如何替换循环（'float：left'，'float：right'）以使用纯css？

> ID：13233370
> 
> 赞同：0
> 
> 时间：2012-11-05T13:44:29.207
> 
> 标签：html, css, ruby-on-rails, styling

有什么方法可以替换`cycle('float: left', 'float: right')`，而不是使用`cycle`助手，我可以使用纯 css 类。我需要在单个列内左右对齐 div。使用循环会导致缓存出现一些困难，因此最好使用静态样式。

```
<div class="userCards">
    <div class="singleCard <%= cycle 'cardLeft', 'cardRight' %>">
        <!-- content -->
    </div>
</div> 
```

请注意，它`userCard`具有固定的高度，`overflow: hidden` 并且`width: 48%`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:46:48.963

听起来像是`nth-child()`选择器的工作：

```
.userCards .singleCard:nth-child(odd) {
  float: left;
}

.userCards .singleCard:nth-child(even) {
  float: right;
} 
```

# java - 访问与 *.jar 中的类同名的包

> ID：13233375
> 
> 赞同：1
> 
> 时间：2012-11-05T13:45:00.640
> 
> 标签：java, deobfuscation

我有一个 *.jar 文件，我想使用其中的一些类。其中，它包含来自包“com.aa”的类“a”和具有类“a”的包“com.aaaae”。当我尝试以“com.aaaaea”的身份访问类时，出现错误：com.aaaa 无法解析为类型。发生这种情况是因为编译器试图获取类“com.aaa”的字段“a”而不是包“com.aaaa”。我也尝试导入此类，但没有区别，我收到错误“无法解析导入 com.aaaa”。

有没有办法使用“com.aaaaea”类？是否有任何工具可以重命名 *.jar 中的类？或者可能是反思可以帮助这里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:41:39.993

您尝试使用的 JAR 很可能已被[混淆](http://www.techrepublic.com/blog/programming-and-development/how-obfuscation-helps-protect-java-from-reverse-engineering/444)，可能是为了阻止您尝试执行的操作。一些 Java 混淆器更改包、类、方法和变量名称以违反 JLS，但仍然是有效的编译字节码；这似乎正是对这个 JAR 所做的。在这种情况下，很难理解反编译的代码。

被混淆的 JAR 通常只保留其公共 API 未混淆供您的代码使用；其他所有内容都被打乱以防止您反编译和/或直接使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:51:26.470

来自 JLS 的引述：

> 简单名称可能出现在可能被解释为变量、类型或包的名称的上下文中。在这些情况下，§6.5 的规则指定将优先选择变量而不是类型，并且将优先选择类型而不是包。因此，有时可能无法通过其简单名称来引用可见类型或包声明。我们说这样的声明是模糊的。

反思可以帮助解决这个问题。尽管在大多数情况下重命名类也是一种解决方案，但表现良好的 jar 甚至不应该有这个问题。我怀疑你的 jar 已经经过了混淆过程，这取决于它是如何完成的，这会使重命名类变得复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:48:03.523

使用 Java 代码约定 - [http://www.oracle.com/technetwork/java/codeconv-138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html) - 你永远不会有这样的错误。

如果你想访问 jar - 反编译它，修复它并重新组装它。

# azure - 锁定对特定 IP 的 Azure VM 访问

> ID：13233376
> 
> 赞同：10
> 
> 时间：2012-11-05T13:45:07.987
> 
> 标签：azure, hosting, azure-virtual-machine

我们计划在预览版结束后立即注册 Azure VM 试用版。但是，与此同时，有人可以澄清以下内容吗？

目前，用户可以使用远程桌面连接 (RDC) 访问 Azure VM 实例。但是是否可以“锁定”Azure VM 实例，以便只有指定的 IP 地址才能通过 RDC 连接？

这将为我们提供一些额外的安全性，知道只有我们的固定办公室 IP 可以连接到我们的实时数据服务器。还是有不同的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T13:52:56.297

Windows Azure 负载平衡器（通过它路由所有流量）没有任何类型的 IP 白名单功能。您需要在 VM 的防火墙中实现它。如果这是云服务 (PaaS)，则防火墙规则将应用于任何启动的新实例。使用 IaaS，您可以将规则应用于每个 VM，或者最初在 VM 中设置规则，然后将其用作其他 VM 的映像。

**编辑 7/29/2013**这个答案有点过时了。虚拟机现在具有基于 IP 的端点 ACL 允许/拒绝列表，目前可通过 PowerShell 访问。您可以为每个端点设置单独的 IP 过滤，因此，在您的情况下，您可以专门锁定 RDP 端口。有关更多信息，请参阅[此博客文章](http://michaelwasham.com/2013/06/03/windows-azure-powershell-june-2013-update-for-iaas-and-paas/)。

# wordpress - Wordpress 不可编辑的插件

> ID：13233377
> 
> 赞同：1
> 
> 时间：2012-11-05T13:45:07.910
> 
> 标签：wordpress

首先，我对 Wordpress 和它的插件没有太多经验，所以我的问题/问题可能很愚蠢。我想做一个不能修改的插件。据我所知，没有什么可以阻止用户在他的服务器上修改我的插件的 .php 文件。

所以问题是：如何检查我的 plugin.php 文件的源代码是否已被用户修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:58:32.070

毫无疑问，很多人会想知道为什么你不希望人们修改你的插件，但我相信你有你的理由。

简短的回答，没有办法阻止人们编辑您在插件中打包的文件。

但是，许多插件只是为用户提供了一个嵌入代码，这些代码从外部源引入了功能。ShareThis 沿着这些思路做一些事情，用户实际上只是选择嵌入代码的选项。也许这种方法会满足您的需求？

这里有与这种插件行为相关的指南：[http ://wordpress.org/extend/plugins/about/guidelines/](http://wordpress.org/extend/plugins/about/guidelines/)

# php - Html5 css3 Jquery 页面转换

> ID：13233378
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:45:12.287
> 
> 标签：php, jquery, html, css, transitions

我正在尝试制作这样的网站。

[http://www.moonrisekingdom.it](http://www.moonrisekingdom.it)

而且我在制作 html - jquery - php 复杂网站方面非常新……我习惯了 as3，但我必须做这个 html。

你能帮忙弄清楚它是如何工作的吗？

我查看了源代码，并在您单击按钮时看到它们，加载器 div 附加并在其中加载内容并发生幻灯片转换。我应该使用哪一个 Jquery 或 css3 转换？我怎样才能加载这样的内容？阿贾克斯可能是？

谢谢指导

尤杜姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:52:20.713

我认为如果你使用**jQuery**，你会没事的。

它提供了足够的功能来完成您提到的网站。

您可以通过 ajax 加载内容，正如您提到的，它包含在**jQuery**中：

**jQuery .ajax() 文档**

[jQuery .ajax()](http://api.jquery.com/jQuery.ajax/)

所有花哨的“**滑动**”东西也是用 jQuery 完成的：

[jQuery 向下滑动](http://api.jquery.com/slideDown/)

[jQuery 上滑](http://api.jquery.com/slideUp/)

[jquery 显示&隐藏效果](http://jqueryui.com/show/)

当涉及到不同方向的滑动和隐藏时，你可以看看效果*幻灯片*。您可以告诉它从左侧滑入，向右隐藏，从上方滑入并从上方隐藏。

去看看吧，没有人会为您提供您喜欢创建的网站的解决方案，返回一个问题或一段代码，每个人都会很乐意为您提供帮助，但 SO 不是代码工厂或任何东西，如果你想有这样的事情联系自由职业者。

# c# - C# 添加标签

> ID：13233381
> 
> 赞同：0
> 
> 时间：2012-11-05T13:45:19.127
> 
> 标签：c#, wpf

我在 XAML 中有以下代码，但我想以编程方式创建这些标签。

```
<Label Content="" Name="Dice1" HorizontalAlignment="Left" Margin="19,11,0,0" VerticalAlignment="Top" Grid.Column="0"/>
<Label Content="" Name="Dice2" HorizontalAlignment="Left" Margin="19,11,0,0" VerticalAlignment="Top" Grid.Column="1"/>
<Label Content="" Name="Dice3" HorizontalAlignment="Left" Margin="19,11,0,0" VerticalAlignment="Top" Grid.Column="2"/>
<Label Content="" Name="Dice4" HorizontalAlignment="Left" Margin="19,11,0,0" VerticalAlignment="Top" Grid.Column="3"/>
<Label Content="" Name="Dice5" HorizontalAlignment="Left" Margin="19,10,0,0" VerticalAlignment="Top" Grid.Row="1"/>
<Label Content="" Name="Dice6" HorizontalAlignment="Left" Margin="19,10,0,0" VerticalAlignment="Top" Grid.Row="1" Grid.Column="1"/>
<Label Content="" Name="Dice7" HorizontalAlignment="Left" Margin="19,10,0,0" VerticalAlignment="Top" Grid.Row="1" Grid.Column="2"/>
<Label Content="" Name="Dice8" HorizontalAlignment="Left" Margin="19,10,0,0" VerticalAlignment="Top" Grid.Row="1" Grid.Column="3"/> 
```

我认为最好的方法是在 for 循环中？我想要在同一行和列 +1 上的前 4 个骰子。第二行和列+1的最后4个骰子。我使用 Dice1、Dice2、Dice3 等名称，因为我想稍后给每个标签一个随机整数。有人有想法吗？

```
for (int i = 0; i < 8; i++)
{
    Label Dice = new Label();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:49:54.297

填写每个 labal 的属性，然后将其添加到您的父控件。在下面的示例中，我假设您使用的是名为`myCanvas`.

```
for (int i = 0; i < 8; i++)
{
    Label Dice = new Label();
    Dice.Name = "Dice" + (i + 1).ToString();
    Dice.HorizontalAlignment = HorizontalAlignment.Left;
    //fill the rest of the properties
    //...
    //you need to add the label to your parent control
    myCanvas.Children.Add(Dice); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:51:48.710

这可能会让你开始。

```
Label[] labels = new Label[8];
for(int i = 0; i < 8; i++)
{
    labels[i] = new Label();
    labels[i].Text = new Random().NextInt(1, 8);
    labels[i].DoOtherStuff();
    parent.Controls.Add(labels[i]);
} 
```

# iphone - 如何继续到 tabBarView

> ID：13233387
> 
> 赞同：1
> 
> 时间：2012-11-05T13:45:48.437
> 
> 标签：iphone, objective-c, ios, xcode

我有一个 detailsView，其中包含我的 mapView 的链接。我遇到的问题是，当显示 mapView 时，顶部导航栏和标签栏丢失了。

如何继续使用 tabBarView？我还在prepare segue方法中设置了一些变量。

![故事板](../Images/5983f7f23120793755fbaf9185077c28.png)

```
////////////////////////////
#pragma mark - Segue
////////////////////////////

-(void)userTappedOnLink:(UIGestureRecognizer*)gestureRecognizer{
    NSLog(@"The map link was pressed");
    [self performSegueWithIdentifier:@"ShowMap" sender:self];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([[segue identifier] isEqualToString:@"ShowMap"]) {

        MapViewController *mapViewController = [segue destinationViewController];
        mapViewController.lat = self.poiDataObject.lat ;
        mapViewController.lon = self.poiDataObject.lon ;

    }
} 
```

# sql-server - 只处理新文件

> ID：13233388
> 
> 赞同：0
> 
> 时间：2012-11-05T13:45:53.897
> 
> 标签：sql-server, ssis

我有一个要处理文件的来源。多个文件随时随机到达该位置（包应每 2 小时运行一次）。我必须只处理新文件，我不能删除，从那个位置移动已经处理的文件。我只能将文件复制到存档位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:08:12.953

您的包应该处理给定目录中的文件，然后在处理后将它们移动到另一个目录。这样，每次包运行时，它都必须完全处理源目录。

要处理目录中的每个文件，请使用 ForEach 容器。您可以指定要查看的文件夹，以及要过滤的一些表达式。例如，如果您的文件名包含时间戳，则可以使用该时间戳将文件过滤入或过滤出。

您使用平面文件源来读取文件，然后使用文件系统任务来移动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:58:22.447

首先，请查看此处的答案：[使用 SSIS 脚本任务枚举文件夹中的文件](https://stackoverflow.com/questions/13189535/enumerate-files-in-a-folder-using-ssis-script-task/13191464#13191464)

SSIS 脚本任务应枚举给定文件夹中的所有文件，然后从表中获取已处理文件的快照，您将在该表中保存已处理的日志，忽略已处理的文件并仅返回未处理的文件for-each 任务使用的对象变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:38:47.287

您可以使用以下步骤实现此目的。

1.  对传入文件夹使用 foreach 文件枚举器，并将文件名保存在“IncomingFile”变量中。配置为选择“名称和扩展名”[在我的代码中我使用过，否则您需要对脚本进行一些修改]
2.  创建两个 SSIS 变量，例如“ArchivePath”作为字符串，“IsLoaded”作为布尔值[默认为 false]。
3.  创建 SSIS 脚本组件并使用“IncomingFile”和“ArchivePath”作为只读变量。“IsLoaded”应该是 ReadandWrite 变量。
4.  在脚本组件中编写以下代码。如果文件已经存在，那么它将返回 true。否则为假。

    ```
    public void Main()
    {
        var archivePath = Dts.Variables["ArchivePath"].Value.ToString();
        var incomingFile = Dts.Variables["IncomingFile"].Value.ToString();

        var fileFullPath = string.Format(@"{0}\{1}",archivePath,incomingFile);

        bool isLoaded = File.Exists(fileFullPath);

        Dts.Variables["IsLoaded"].Value = isLoaded;

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
    ```

5.  使用 Precedence 约束调用数据流任务和评估操作应该是 "Expression" 。在您的表达式框中设置如下内容。

    `@IsLoaded==False`

希望这可以帮助。

# c# - 访问对象的 List 属性

> ID：13233389
> 
> 赞同：2
> 
> 时间：2012-11-05T13:45:55.110
> 
> 标签：c#, list

我有一个简单的类，我认为如果我添加一个列表属性来存储一些值，我可以使它更有用（我不想要一个数组，因为我不知道它会多长时间）

```
public class MyClass
{
public double myProperty1;
public double myProperty2;
//etc
public  List<double> myList {get; set;}

} 
```

但是当我尝试访问此属性时，例如通过

```
if x >y

newObject.myList.Add(x); 
```

我得到一个错误。你调用的对象是空的。

任何想法我在这里做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:48:45.547

```
public class MyClass
{

    public double myProperty1;
    public double myProperty2;
    //etc
    public  List<double> myList {get; private set;}  // private set

    public MyClass()    // constructor
    {
           myList = new List<double>();    // create the list
    }
} 
```

您的类实例需要一个实际`List<>`实例。创建它的正确位置是在构造函数中。私人二传手通常是个好主意，但不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:47:14.003

您必须初始化列表。它只是声明的，不会自动初始化。

在构造函数中初始化它：

```
public MyClass()
{
    MyList = new List<double>();
} 
```

（顺便说一句，为了符合命名约定，属性必须是 Pascal 大小写的，而不是 Camel 大小写的......所以`myList`应该是`MyList`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:47:47.290

您需要将列表初始化为某些东西 - 它没有被初始化，因此它是`null`.

在类构造函数中，您可以执行以下操作：

```
public MyClass()
{
  myList = new List<double>();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T13:47:50.327

您需要先初始化列表才能正常工作，然后添加如下所示的项目

```
if ( newObject.myList==null)
    newObject.myList= new List<double>();
newObject.myList.Add(x); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T13:48:21.847

您必须创建列表的一个实例。您可以将初始化添加到类的构造函数：

```
public class MyClass
{
public double myProperty1;
public double myProperty2;
//etc
public  List<double> myList {get; set;}

public MyClass(){
   myList = new List<double>();
}

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T13:49:11.100

如果您不自己创建实例，则不能将隐式属性与 List 等对象一起使用。

```
// Implicit declaration, a field is created in background, but the object isn't initialized.
public  List<double> myList {get; set;} 
```

反而：

```
// Explicit declaration, with me creating an instance
private List<double> myList = new List<double>();

public List<double> MyList
{
    get { return myList; }    
} 
```

另一种方法是在构造函数中初始化隐式声明。但我喜欢写自己的领域。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-05T13:49:23.760

Yoy 需要在使用之前初始化 myList 才能在构造函数中使用。

```
public class MyClass
{

public MyClass()
{
    myList  = new List<double>();
}

public double myProperty1;
public double myProperty2;
//etc
public  List<double> myList {get; set;}   

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T13:48:42.453

您必须将该`List<double>`对象实例化为新对象。没有istantiation，它只是一个指针。

# c# - 以编程方式“包含在项目中”的 VC++ 项目

> ID：13233390
> 
> 赞同：0
> 
> 时间：2012-11-05T13:45:57.840
> 
> 标签：c#, visual-studio, vs-extensibility

有没有办法通过 VCProject 或 EnvDTE 接口以编程方式将文件夹包含到 VC++ 项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T13:14:44.107

查看示例宏 - `View -> Other Windows -> Macro Explorer`. 其中有一个`Samples/AddDirAsSlnFolder`向您展示了如何在项目中创建节点并添加文件。它在 VisualBasic 中，但是一旦你看到使用了哪些方法，就很容易翻译成 C# `EnvDTE`，例如

```
projItem = currentSlnFolder.Parent.ProjectItems.AddFromFile(file) 
```

使用`EnvDTE.ProjectItems`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:15:14.090

我只为 C# 和 VB.NET 项目做了这个，但应该是一样的：

```
var pr = new Microsoft.Build.Evaluation.Project();  
//Initialize (load from file or whatever)    
pr.AddItem("Folder", YourFoldersPath + @"\");  
pr.Save() 
```

# xcode - 在 OS X 上安装 Qt 库

> ID：13233393
> 
> 赞同：1
> 
> 时间：2012-11-05T13:46:14.360
> 
> 标签：xcode, macos, qt

我正在尝试在我的 OS X 10.6 机器上安装从[http://qt-project.org/downloads下载的 Qt 4.8.3 预编译库。](http://qt-project.org/downloads)不幸的是，该软件包似乎并没有实际安装任何库（尽管它声称在自述文件中这样做）

我已经阅读了大量关于如何从源代码配置和构建 Qt 的说明，但这些都是预编译的，就像“你不必自己编译它们”一样。所以我一定错过了什么。

有没有人知道如何在 OS X 上实际安装 Qt，以便可以链接它们 - 而无需 - 从源代码构建整个东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:44:27.367

假设您已经下载了编译的库，您需要做的就是在 Qt Creator 首选项中找到它们。去：

首选项->构建和运行->Qt版本

单击添加，它会要求您为您的 Qt 库版本找到 qmake 可执行文件。我的恰好位于：

/Users/MyUserName/QtSDK/Desktop/Qt/4.8.1/gcc/bin/qmake

只要您知道将下载的库放在哪里，您就应该能够找到该文件。然后您需要做的就是转到 Qt Creator 侧边栏上的项目，然后从下拉列表中选择您的 Qt 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:47:30.830

Qt 框架位于 /Library/Frameworks/。

在 Installer 中启动 Qt.mpkg 时。欢迎屏幕具有以下文本：

成功安装后，您可以在 /Developer 中找到大多数新内容。具体的东西将位于以下地方：

```
•   Qt Designer, Qt Linguist: /Developer/Applications/Qt
•   Qt Documentation: /Developer/Documentation/Qt
•   Qt Examples: /Developer/Examples/Qt
•   Qt Plugins: /Developer/Applications/Qt/Plugins
•   Qt Frameworks: /Library/Frameworks
•   Qt Libraries: /usr/lib
•   qmake, moc, uic, etc.: /Developer/Tools/Qt (symlink to /usr/bin)
•   Uninstall script: /Developer/Tools/uninstall-qt.py 
```

这些应该可以帮助你。

# c++ - 使用 libproc 在 c++ 中查找 CPU 利用率

> ID：13233397
> 
> 赞同：3
> 
> 时间：2012-11-05T13:46:29.477
> 
> 标签：c++, cpu-usage

我一直在 C++ 中使用 libproc 库来查找 CPU 利用率，但我找不到任何示例来检索某些字段。

1.  我想计算一个进程/线程的 cpu 使用率？
2.  查找进程/线程的内存使用情况？

如果有人知道请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:03:43.840

通常需要瞬时 CPU 百分比，但内核不跟踪，因此在 procps 可以读取的任何地方都不可用。跟踪百分比必须在应用程序中实现，方法是拍摄快照，等待片刻，然后拍摄另一个快照，以了解间隔期间花费的 utime+stime。这就是 top 在启动时将所有 CPU 百分比显示为 0.0% 并在下一个时间间隔更正它们的原因。procps 提供了一个方便的地方来存储 CPU 百分比，但没有在库中实现它。

从[这里](http://codingrelic.geekhold.com/2011/02/listing-processes-with-libproc.html)获取，还有一些关于如何在那里实现它的更多信息。

# iphone - 如何使用 iphone 中的表格单元集中水平表格视图中的数据？

> ID：13233398
> 
> 赞同：1
> 
> 时间：2012-11-05T13:46:30.343
> 
> 标签：iphone, uitableview, for-loop, alignment

我怎么能在水平表视图中这样做

我对 iphone 应用程序开发比较陌生，在这里我使用带有自定义图像（网络图像）的水平 UITableView，我想显示像中心位置这样的图像，并为中间图像的左侧和右侧显示向前和向后的图像.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:14:08.363

您可以`UIImageView`在`contentView`of`UITableViewCell`或子类上添加三个`UITableViewCell`并在您的`UITableView`. [Apple Doc UITableViewExample 理解](https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)。

# c++ - 使用模板化基础编译时间类选择器

> ID：13233400
> 
> 赞同：1
> 
> 时间：2012-11-05T13:46:36.497
> 
> 标签：c++, templates

给定以下代码序列：

```
#include <iostream>

using namespace std;

template <typename T>
class Base
{
    public:
        T* t;
        void b() {}
};

class D1:
        public Base<D1>
{
    public:
        int d1;
};

class D2:
        public D1
{
    public:
        int d2;
};

template <typename T>
class Selector
{
    public:

        template <typename U>
        void a(Base<U>& base)
        {
            cout << __LINE__ << endl;
            base.b();
        }

        template <typename U>
        void a(U& u)
        {
            cout << __LINE__ << endl;
        }
};

int main()
{
    D2 derivated;
    Selector<D2> s;
    s.a(derivated);
    return 0;
} 
```

我想检查某些类（D2）是否具有基（Base），继承了任何 D2 父母。我就是无法`Selector`使用最专业的成员函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:05:41.887

您可以装配自己的特征来检查一个类型是否有*任何* `Base<T>`祖先。以下对我有用：

```
template <typename T> struct Foo { };

struct Bar : Foo<Bar> { };

struct Zip : Bar { };

#include <type_traits>

template <typename T>
class derives_from_any_foo
{
    typedef char yes;
    typedef char no[2];

    template <typename U>
    static yes & test(Foo<U> const &);

    static no & test(...);

public:
    static bool const value = sizeof(test(std::declval<T>())) == sizeof(yes);
};

#include <iostream>

int main()
{
    std::cout << "int: " <<  derives_from_any_foo<int>::value << "\n"
              << "Bar: " <<  derives_from_any_foo<Bar>::value << "\n"
              << "Zip: " <<  derives_from_any_foo<Zip>::value << "\n";
} 
```

这类类型检查通常不需要任何对象实例；一切都只是静态的。如果你有一个对象，使用`decltype`它来获取它的类型，或者添加一个类型推断的辅助函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:06:25.437

发生这种情况是因为与(ie )`U = D2`相比，它是一个更好的候选者。您将无法使用相同的函数定义来实现这一点，因为第一个替代方案总是压倒第二个替代方案。`U = D1``Base<D1>`

**更新**：如果您被允许更改`class Selector`，请在以下[SFINAE](http://en.wikipedia.org/wiki/SFINAE)方式中进行调整以使其正确：

```
template<bool> struct Bool;
template <typename T, typename = Bool<true> >
class Selector // <---- For general cases
{
public:
   template <typename U>
   void a(U& u)  // <---- choose normal funciton
   {   
     cout << __LINE__ << endl;
   }   
};
template <typename T>
class Selector<T,Bool<IsAnyPublicBaseof<T,Base>::value> >
{ // <---- For the cases like `class D2`
public:
  template <typename U>
  void a(Base<U>& base)  // <--- choose special function
  {   
    cout << __LINE__ << endl;
    base.b();
  }   
}; 
```

内部 SFINAE 在哪里，

```
template<typename T, template<typename> class Base>
struct IsAnyPublicBaseOf
{
  typedef char (&yes)[2];

  template<typename X>
  static yes Check (Base<X>*);
  static char Check (...);

  static const bool value = (sizeof(Check((T*)0)) == sizeof(yes));
}; 
```

这是一个与您的代码**完全相同的**[工作演示。](http://ideone.com/khaPi7)

 **另请注意，您不需要`Selector`确定对象。只需制作`Selector::a()`as`static`方法并使使用简单：

```
Selector<D2>::a(derivated); 
```**

# objective-c - 是否可以直接将函数指针作为块参数传递？

> ID：13233402
> 
> 赞同：7
> 
> 时间：2012-11-05T13:46:47.380
> 
> 标签：objective-c, objective-c-blocks

假设我有一个需要一个块的函数：

```
void foo(Foo (^block)(Bar)); 
```

并说我有一个具有相同签名的函数，除了不是一个块：

```
Foo myFunction(Bar); 
```

我可以做这个：

```
foo(^(Bar bar) { return myFunction(bar); }); 
```

但我宁愿这样做，如果它有效，那将是等效的：

```
foo(&myFunction); 
```

如果我尝试，XCode 会说：

```
No matching function for call to 'foo' 
```

块是带有一些上下文的函数指针，因此在那个级别上，希望将普通函数指针用作具有空上下文的块似乎是合理的。可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T16:07:43.793

> 块是带有一些上下文的函数指针，因此在那个级别上，希望将普通函数指针用作具有空上下文的块似乎是合理的。可能吗？

但是，问题在于块不是*带有一些上下文的函数指针*。

块在编译期间捕获可执行代码并在执行期间捕获状态。可执行代码在传递参数方面遵循 C ABI，*但*与方法调用一样，它有一些非常具体的要求。将其转换为 C 函数声明，返回 a`BOOL`并接受单个`int`参数的块如下所示：

```
BOOL blockLikeFunc(void *block, int arg) { ... } 
```

也就是说，块的“函数”的第一个参数必须是指向块本身的指针。

因此，不，您不能只删除块的“函数”指针并将其转换为/从 C 函数中转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:49:55.060

> 但是块是函数指针

除了它不是。如果要将函数指针作为参数传递，请尝试以下操作：

```
int FooDouble(int x)
{
    return x * 2;
}

- (int)callFunction:(int (*)(int))function withArgument:(int)arg
{
    return function(arg);
}

NSLog(@"%d", [self callFunction:FooDouble withArgument:21]); 
```

这输出`42`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T21:57:11.330

你提交了常规函数指针 (c) 东西不是块

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-06T22:00:32.593

```
@import Foundation;

@implementation NSObject(extra)
+ (int)callFunction:(int (^)(int))function withArgument:(int)arg
{
    return function(arg);
}
@end;

int main() {
    @autoreleasepool {
        NSLog(@"doubleIt(3) returns %d", [NSObject callFunction:^(int param) { return param * param; } withArgument:3]);
    } return 0;
} 
```

# php - 在 PHP 中更改关联数组中的键

> ID：13233405
> 
> 赞同：17
> 
> 时间：2012-11-05T13:46:54.117
> 
> 标签：php, arrays, associative-array

假设我有一个这样的数组：

```
array(2) {
  [0]=> array(2) {
    ["n"]=> string(4) "john"
    ["l"]=> string(3) "red"
  }
  [1]=> array(2) {
    ["n"]=> string(5) "nicel"
    ["l"]=> string(4) "blue"
  }
} 
```

我将如何更改内部数组的键？比如说，我想将“n”更改为“name”，将“l”更改为“last_name”。考虑到它可能发生，而不是数组没有特定的键。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-02-06T13:59:04.187

使用 array_walk

```
array_walk($array, function (& $item) {
   $item['new_key'] = $item['old_key'];
   unset($item['old_key']);
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-05T13:51:29.433

可能是这样的：

```
if (isset($array['n'])) {
    $array['name'] = $array['n'];
    unset($array['n']);
} 
```

注意：此解决方案将更改键的顺序。要保留顺序，您必须重新创建数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T13:59:56.473

你可以有：

1.  映射密钥交换的数组（使过程参数化）
2.  循环处理原始数组，通过引用访问每个数组项

例如：

```
$array = array( array('n'=>'john','l'=>'red'), array('n'=>'nicel','l'=>'blue') );

$mapKeyArray = array('n'=>'name','l'=>'last_name');

foreach( $array as &$item )
{
    foreach( $mapKeyArray as $key => $replace )
    {
        if (key_exists($key,$item))
        {
            $item[$replace] = $item[$key];
            unset($item[$key]); 
        }
    }
} 
```

通过这种方式，您可以简单地向`$mapKeyArray`变量添加几个键/值来进行其他替换。

如果原始数组中没有某些键，此解决方案也有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T13:50:27.377

只需记下旧值，使用[unset](http://php.net/manual/en/function.unset.php)将其从数组中删除，然后将其与新键和旧值对一起添加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-10T11:44:58.427

重命名键并保持顺序一致（后者对于编写以下代码的用例很重要）。

```
<?php
/**
 * Rename a key and preserve the key ordering.
 *
 * An E_USER_WARNING is thrown if there is an problem.
 *
 * @param array &$data The data.
 * @param string $oldKey The old key.
 * @param string $newKey The new key.
 * @param bool $ignoreMissing Don't raise an error if the $oldKey does not exist.
 * @param bool $replaceExisting Don't raise an error if the $newKey already exists.
 *
 * @return bool True if the rename was successful or False if the old key cannot be found or the new key already exists.
 */
function renameKey(array &$data, $oldKey, $newKey, $ignoreMissing = false, $replaceExisting = false)
{
    if (!empty($data)) {
        if (!array_key_exists($oldKey, $data)) {
            if ($ignoreMissing) {
                return false;
            }

            return !trigger_error('Old key does not exist', E_USER_WARNING);
        } else {
            if (array_key_exists($newKey, $data)) {
                if ($replaceExisting) {
                    unset($data[$newKey]);
                } else {
                    return !trigger_error('New key already exists', E_USER_WARNING);
                }
            }

            $keys = array_keys($data);
            $keys[array_search($oldKey, array_map('strval', $keys))] = $newKey;
            $data = array_combine($keys, $data);

            return true;
        }
    }

    return false;
} 
```

还有一些单元测试（正在使用 PHPUnit，但希望可以理解为测试的目的）。

```
public function testRenameKey()
{
    $newData = $this->data;
    $this->assertTrue(Arrays::renameKey($newData, 200, 'TwoHundred'));
    $this->assertEquals(
        [
            100 => $this->one,
            'TwoHundred' => $this->two,
            300 => $this->three,
        ],
        $newData
    );
}

public function testRenameKeyWithEmptyData()
{
    $newData = [];
    $this->assertFalse(Arrays::renameKey($newData, 'junk1', 'junk2'));
}

public function testRenameKeyWithExistingNewKey()
{
    Arrays::renameKey($this->data, 200, 200);
    $this->assertError('New key already exists', E_USER_WARNING);
}

public function testRenameKeyWithMissingOldKey()
{
    Arrays::renameKey($this->data, 'Unknown', 'Unknown');
    $this->assertError('Old key does not exist', E_USER_WARNING);
}

public function testRenameKeyWithMixedNumericAndStringIndicies()
{
    $data = [
        'nice', // Index 0
        'car' => 'fast',
        'none', // Index 1
    ];
    $this->assertTrue(Arrays::renameKey($data, 'car', 2));
    $this->assertEquals(
        [
            0 => 'nice',
            2 => 'fast',
            1 => 'none',
        ],
        $data
    );
} 
```

AssertError 断言可用于 PHPUnit，来自[https://github.com/digitickets/phpunit-errorhandler](https://github.com/digitickets/phpunit-errorhandler)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-28T10:17:17.623

您可以使用[array_flip](http://php.net/manual/en/function.array-flip.php)函数：

```
$original = array('n'=>'john','l'=>'red');
$flipped = array_flip($original);
foreach($flipped as $k => $v){
    $flipped[$k] = ($v === 'n' ? 'name' : ($v === 'l' ? 'last_name' : $v));
}
$correctedOriginal = array_flip($flipped); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-27T21:05:27.100

```
function arrayReplaceKey($array, $oldKey, $newKey) {
    $r = array();
    foreach ($array as $k => $v) {
        if ($k === $oldKey) $k = $newKey;
        $r[$k] = $v;
    }
    return $r;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-28T06:16:44.993

这是**更改数组键**并**保持数组内原始位置**的解决方案。它适用于关联数组。在我的例子中，这些值是对象，但我已经简化了这个例子。

```
// Our array
$fields = array(
    'first_name' => 'Radley',
    'last_name' => 'Sustaire',
    'date' => '6/26/2019', // <== Want to rename the key from "date" to "date_db"
    'amazing' => 'yes',
);

// Get the field value
$date_field = $fields['date'];

// Get the key position in the array (numeric)
$key_position = array_search( 'date', array_keys($fields) );

// Remove the original value
unset($fields['date']);

// Add the new value back in, with the new key, at the old position
$fields = array_merge(
    array_slice( $fields, 0, $key_position, true ),
    array( 'date_db' => $date_field ), // Notice the new key ends with "_db"
    array_slice( $fields, $key_position, null, true )
);

/*
Input:
Array(
    [first_name] => Radley
    [last_name] => Sustaire
    [date] => 6/26/2019
    [amazing] => yes
)

Output:
Array(
    [first_name] => Radley
    [last_name] => Sustaire
    [date_db] => 6/26/2019
    [amazing] => yes
)
*/ 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-01-06T10:09:45.077

通过[引用传递](https://www.php.net/manual/en/control-structures.foreach.php)

```
foreach($arr as &$m)
{
  $m['first_name'] = $m['n'];
  $m['last_name'] = $m['l'];
  unset($m['l'], m['n']);
}

print_r($arr); 
```

# android - Notification.DEFAULT_VIBRATE 有什么作用？

> ID：13233414
> 
> 赞同：3
> 
> 时间：2012-11-05T13:47:22.747
> 
> 标签：android, vibration

如何`Notification.DEFAULT_VIBRATE`工作？如果我设置：

```
notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

会发生什么？

文档不清楚。当且仅当本机短信应用程序或呼叫的振动选项设置为 true 时，如何使手机振动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:06:07.090

您需要添加以下许可才能启用振动。

```
<uses-permission android:name="android.permission.VIBRATE"></uses-permission> 
```

为了检测振动模式，您可以使用 AudioManager 的[getRingerMode()](http://developer.android.com/reference/android/media/AudioManager.html#getRingerMode%28%29)方法

```
 AudioManager audiomanager = (AudioManager)
                                getSystemService(Context.AUDIO_SERVICE);

    switch (audiomanager.getRingerMode()) {
        case AudioManager.RINGER_MODE_SILENT:
            Log.i("Mode","Silent mode");
            break;
        case AudioManager.RINGER_MODE_VIBRATE:
            Log.i("Mode","Vibrate mode");
            break;
        case AudioManager.RINGER_MODE_NORMAL:
            Log.i("Mode","Normal mode");
            break;
    } 
```

**编辑**

您可以使用以下代码检查用户的呼叫和通知的振动设置

```
Log.i("Setting", ""+audiomanager.shouldVibrate(AudioManager.VIBRATE_TYPE_RINGER));
Log.i("Setting", ""+audiomanager.shouldVibrate(AudioManager.VIBRATE_TYPE_NOTIFICATION)); 
```

# networking - 如何使用函数“发送”（Winsock）通过 OpenCV 在 VS10 中流式传输视频？

> ID：13233417
> 
> 赞同：1
> 
> 时间：2012-11-05T13:47:42.220
> 
> 标签：networking, opencv, winsock2

我在 VS10 上使用 OpenCV 从我的网络摄像头流式传输视频。我还使用 winsock2 在同一台计算机上从服务器客户端 TCP/IP（本地主机）传输消息和图像。现在我正在尝试实时流式传输视频。我不知道是否使用函数“发送”我可以指定每个帧的长度，因为我认为它也可以发送一个常量字符。任何人都知道我可以使用什么功能来解决我的问题？

源代码：

服务器.cpp

```
#include "Server.h"

using namespace std;

//Our main function
//void main()
int _tmain(int argc, _TCHAR* argv[])
{
//We have to start de Winsock-dll
long answer;
WSAData wsaData;
WORD DLLVERSION;
DLLVERSION = MAKEWORD (2,1);
//Stard the dll
answer = WSAStartup(DLLVERSION, &wsaData);

//The dll was started, now I use the winsock funcitions in the program

//Structure for the sockets
SOCKADDR_IN addr;
//addr = our structure
int addrlen = sizeof(addr);

//Now we have to create our sockets
//sListen = socket which is listening for incoming connection
SOCKET sListen;
//sConnect = socket which is operating if a connection was found!
SOCKET sConnect;

//Now we have to setup our sockets:
//AF_INET = means that our socket belongs to the internet family
//SOCK_STREAM = means that our socket is a connection-orientated socket
sConnect = socket(AF_INET, SOCK_STREAM, NULL);

//Now we have to setup our structure
//inet_addr = IP of our socket (I use 127.0.0.1...this is the loopback adress)
addr.sin_addr.s_addr = inet_addr("127.0.0.1");
//Retype the family
addr.sin_family = AF_INET;
//Now we have to setup the port in the structure;
//Now our server has the IP: 127.0.0.1 and the port 1234
addr.sin_port = htons (1234);

//Now we have to setup our sListen socket
sListen = socket(AF_INET, SOCK_STREAM, NULL);
//Now we blind the socket
//The socket becomes the structure addr
bind(sListen, (SOCKADDR*)&addr, sizeof(addr));
//We have to say that the socket is listening for an incoming connection
listen(sListen, SOMAXCONN);
//SOMAXCON means that the server is listenning without any limit

//We have to start the capture of the frames to send it
//Well first of all initialize the frames and the default camera
//Using OpenCV
CvCapture *capture = 0;
    IplImage  *frame = 0;
    int key = 0;
    capture = cvCaptureFromCAM(0);

//At last we have to say what the serve sould do if a connection was found!
//For this we create a endless loop:
for(;;)
{
    cout << "Waiting for an incoming connection" <<endl;

    //if a connection was found << "..." <<endl
    if(sConnect = accept(sListen, (SOCKADDR*)&addr, &addrlen))
    {
        cout << "A connection was found" <<endl;

        //Second part in reference to Youtube 2
        //1r: The server should send a message with the funcion send();
        //The number of the letters +1
        //Ex: Number of the letters: 14+1=15
        answer = send(sConnect, "Bonjour",8, NULL);

        //*************************Third part of the project
        //Sending an image captured from the cam
        //always check
        if ( !capture ) 
        {
            fprintf( stderr, "Cannot open initialize webcam!\n" );
            return 1;
        }
        //create a window for the video
        cvNamedWindow( "server", CV_WINDOW_AUTOSIZE );

        while( key != 'q' ) 
        {
            //get a frame
            frame = cvQueryFrame(capture);
            //always check
            if( !frame ) break;
            //display current frame
            cvShowImage( "server", frame );
            //exit if user press 'q'
            key = cvWaitKey(1);
        }

        char StartStream(IplImage *frame);
        int streamSize(IplImage *frame);
        if(frame!=0)
        {
            return sizeof(*frame->imageData);
        }
        char* buffer = new char[10000];
        int len = 10000;
        //int sent = 0;
        for(int i=0; i<len; i+= answer)
        {
            answer = send(sConnect, buffer+i, len-i, 0);
        }
    }
    //free memory
    cvDestroyWindow( "server" );
    cvReleaseCapture( &capture );
}
return 0;
} 
```

客户端.cpp

```
#include "Client.h"

using namespace std;

//void main()
int _tmain(int argc, _TCHAR* argv[])
{
string confirm;
char message[200];
string strmessage;
//IplImage *pImg;

//Start the functions of the Winsock-DLL
long answer;
WSAData wsaData;
WORD DLLVersion;
DLLVersion = MAKEWORD(2,1);
answer = WSAStartup(DLLVersion, &wsaData);

//Setup our Sockets and SOCKADDR_IN
SOCKADDR_IN addr;
//we will need addrlen later maybe!
int addrlen = sizeof(addr);

//Now setup our Socket
SOCKET sConnect;
sConnect = socket(AF_INET,      SOCK_STREAM, NULL);

//IP of our server
addr.sin_addr.s_addr = inet_addr("127.0.0.1");
//Now we have to retype de family
addr.sin_family = AF_INET;
//Port of our server
addr.sin_port = htons(1234);

//Now we will ask the client if he wants to connect
cout << "Do you want to connect to your server? [Y/N]" <<endl;
cin >> confirm;

//If the user don't want to connect the client will close
if (confirm == "N")
{
    exit(1);
}
else
{
    if (confirm == "Y")
    {
        //function connect
        connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));

        //Our client is working

    //Now we program the client that he should recv a message from the server
        //Our client should receive the message with the function recv();
        //With new char "message"
        answer = recv(sConnect, message, sizeof(message), NULL);
        //The client should display the message
        //With new string strmessage
        strmessage = message;
        cout << strmessage <<endl;

        //the client also should display the image recived
        char* buffer = new char[10000];
        int len = 10000;
        //int rec = 0;
        int i=0;
        for(int i=0; i<len; i+= answer)
        {
            while (answer = recv(sConnect, buffer+i, len-i, 0))
            {
            IplImage *frame = cvCreateImage(cvSize(640,480), 8, 3);
            frame->imageData = (char *)buffer;
            cvNamedWindow( "client", CV_WINDOW_AUTOSIZE );
            cvShowImage( "client", frame );
            }
            return 0;
        }
        getchar();
    }
}
getchar();
} 
```

我在服务器中收到消息和连接确认。它还打开了网络摄像头，但客户端没有收到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:32:28.440

您可以尝试[cv_video_server](https://github.com/phylony/cv_video_server)和[client](https://github.com/phylony/cv_video_client)。

# java - 在 CDATA 部分打印多个标签

> ID：13233424
> 
> 赞同：0
> 
> 时间：2012-11-05T13:47:57.290
> 
> 标签：java, jdom, xmlwriter

我有一个在 java 中手动生成的旧 xml 文件。它的树形结构是这样的。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="tvshows.xsl"?>
<rss version='0.91'>
<channel>
<title>xyz.com</title>
<link>http://www.xyz.com</link>
<description></description>
<item>
<title>Downton Abbey</title>
<link>http://www.xyz.com</link>
<description><![CDATA[
<tr class='chartContent'>
<td class='rank'>1.</td>
<td class='showTitle'>Dexter</td>
<td class='network'>CBS</td>
<td class='sumInvIndex'>210</td>
<td class='earlierWeek'>-13</td>
<td class='mediaInvIndex'>225</td>
<td class='socialNetworkInvIndex'>238</td>
<td class='gammaIndex'>--</td>
</tr>]]>
</description>
</item>
</channel>
</rss> 
```

现在正在使用 JDOM 库来生成确切的格式。但是我应该如何处理 CDATA[]。我发现 <tr> 有近 10 列。我正在尝试用

```
CDATA cdata = new CDATA("<tr class='chartContent'>");
cdata.append("<td class='rank'>" + current.getRank() + "</td>");
cdata.append("\n");
cdata.append("<td class='showTitle'>" + current.getShowTitle() + "</td>");
cdata.append("<td class='network'>" + current.getNetwork() + "</td>");
cdata.append("<td class='sumInvIndex'>" + current.getsumInvIndex() +"</td>");
cdata.append("<td class='earlierWeek'>" + current.getearlierWeek() + "</td>");
cdata.append("<td class='mediaInvIndex'>" + current.getmediaInvIndex() + "</td>");
cdata.append("<td class='socialNetworkInvIndex'>" + current.getsocialNetworkInvIndex() + "</td>");
cdata.append("<td class='gammaIndex'>" + current.getgammaIndex() + "</td>");
cdata.append("</tr>");

Element description = new Element("description");  
description.setContent(cdata); 
```

但是是否有一种将标签附加到列的最佳方法，例如

```
Element rankTD = new Element("td");
rankTD.setText(current.getRank());
& add rankTD element to cdata . 
```

使用后生成的输出

```
Format format = null;
format = Format.getPrettyFormat();
content.add(new Element("td").setText(current.getRank()).setAttribute("class","showTitle"));
-------------------
-------------------
-------------------
String cdataContent = new XMLOutputter(format).outputString(content); 
```

输出：

```
<description><![CDATA[<tr class="chartContent" />
<td class="showTitle">1.</td>
<td class="network">PBS</td>
<td class="sumInvIndex">210</td>
<td class="earlierWeek">-13</td>
<td class="mediaInvIndex">225</td>
<td class="socialNetworkInvIndex">238</td>
<td class="gammaIndex">--</td>]]></description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:34:56.800

您需要将该`CDATA`部分的内容`String`单独编码并将其`String`放入中`CDATA`，如下所示：

```
List<Element> content = new ArrayList<Element>();
content.add(new Element("td").setText(current.getRank());
...
String cdataContent = new XMLOutputter().outputString(content);
description.setContent(new CDATA(cdataContent)); 
```

# c# - 如何从另一个类访问 winform 组件？

> ID：13233431
> 
> 赞同：6
> 
> 时间：2012-11-05T13:48:06.613
> 
> 标签：c#, .net, winforms, visual-studio-2010, class

我有一个带有一个按钮和两个标签的表单

我有一个名为 myCounter 的单独类

我希望 myCounter 类能够通过名为 changeColor 的方法访问表单中的标签。

如何使标签在此类中可用

表格

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public Color colTurn
        {
            get { return lblp1Turn.BackColor; }
            set { lblp1Turn.BackColor = value; }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    } 
```

班上

```
class myCounter
{
    private readonly Form1 Board;
    public myCounter(Form1 Board)
    {
        this.Board = Board;
    }

    public int turn = 0;

    public void changeColor()
    {

        if (turn == 0)
        {
            turn = 1;
            lbl

           //change color code here
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:02:24.627

所以看起来你无论如何都要把整个表格传递给你的第二堂课，所以我会按照 LightStriker 的建议去做。为您的所有项目创建一个公共访问器，然后将其设置在您的其他类中。

```
public partial class Form1 : Form
    {
        private myCounter _counterClass;
        public Form1()
        {
            InitializeComponent();
        }

        public Label MyLabel1
        {
            get {return mylabel1;}
        }

        public Label MyLabel2
        {
            get {return mylabel2;}
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            _counterClass = new myCounter(this);
        }

        protected void ButtonClick(object sender, EventArgs e)
        {
            _counterClass.changeColor();
        }
    } 
```

然后在您的第二堂课中，您可以访问您的标签。

```
class myCounter
{
    private readonly Form1 Board;
    public myCounter(Form1 Board)
    {
        this.Board = Board;
    }

    public int turn = 0;

    public void changeColor()
    {

        if (turn == 0)
        {
            turn = 1;
            Board.MyLabel1.BackColor = Color.Red;
            Board.MyLabel2.BackColor = Color.White;
        }
        else
        {
            turn = 0;
            Board.MyLabel2.BackColor = Color.Yellow;
            Board.MyLabel1.BackColor = Color.White;
        }
    }
} 
```

请记住，这是我在 wiki 标记编辑器中编写的代码，未经测试。不过，这应该对您有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:53:39.340

为此在您的表单上创建一个公共方法。

```
public partial class Form1 : Form{
    public void SetLabelColor(Color color){
        mylabel.BackColor = color;
    }
    //... Other code
} 
```

# iphone - 检测到我的应用程序被杀死

> ID：13233432
> 
> 赞同：0
> 
> 时间：2012-11-05T13:48:09.957
> 
> 标签：iphone, objective-c, cocoa-touch

我构建了一个连接到 sqlite 数据库的简单应用程序，该应用程序使用故事板作为 UI。第一次，它会抛出一个登录视图。如果我的身份验证成功，我将我在sqlite数据库中的状态更改为1。默认为0。登录后，我可以使用该应用程序。

例如，如果我杀死了应用程序，我怎么知道我的应用程序已被杀死？我需要再次将状态更改为默认值。所以每当我再次点击该应用程序时，我都必须再次登录。

知道怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:58:51.920

您的应用程序委托实现了几种处理应用程序状态更改的方法。来自 UIApplication.h 标头。

```
- (void)applicationDidFinishLaunching:(UIApplication *)application;
- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions NS_AVAILABLE_IOS(6_0);
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary  *)launchOptions NS_AVAILABLE_IOS(3_0);
- (void)applicationDidBecomeActive:(UIApplication *)application;
- (void)applicationWillResignActive:(UIApplication *)application;
- (void)applicationWillTerminate:(UIApplication *)application; 
```

您可以实现任何相关的方法，在这种情况下是`applicationWillTerminate`更改状态的方法。或者，总是在`applicationDidBecomeActive`. （但这并不能解决更新数据库的问题。如果数据库是本地的，则没有问题，只需在辞职或终止之前更改数据库即可。这里的挑战是您的数据库是否位于服务器上。尽管它可能会 bot是一个问题，我可以看到连接超时影响远程值的完整性。）

这些方法会在您的应用程序委托中自动添加到您的项目中，可以在 AppDelegate.h 和 AppDelegate.m 文件中找到。

如需完整说明，请查看[UIApplication Delegate 协议参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:10:48.380

您无法检测到您的应用程序是否已被终止，因为您的应用程序进程被系统终止，并且没有调用任何代码来通知您的应用程序它已被终止。

你想要的是设置一些布尔值：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

因为如果您在应用程序被杀死后重新启动它，则会调用它。

对于其他州，[Moshe 给出了答案](https://stackoverflow.com/a/13233623/309925)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:58:03.223

您可以在以下位置执行关闭操作，

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    // Log out?
} 
```

如果您的应用程序没有被终止而是被暂停，您也可以这样做，例如在来电期间，

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Log out?
} 
```

或者，

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Log out?
} 
```

或者，在简历上，

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Log in?
} 
```

或者，

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Log in?
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T13:55:14.963

**编辑**

使用委托方法，例如：

```
applicationWillResignActive 
```

# java - 解释正则表达式

> ID：13233434
> 
> 赞同：0
> 
> 时间：2012-11-05T13:48:14.590
> 
> 标签：java, regex

我正在尝试记录使用正则表达式的验证规则的英文解释。我有两个我无法弄清楚的领域，我已经搜索了所有内容，但找不到关于我在下面识别的表达式片段的任何信息：

```
[^<>()[\]\\.,;:\s@\""] 
```

到目前为止我所解释的（来自上面的代码片段）是这列出了不允许的字符，那些在`[^ and ]`. 有一组双反斜杠，这意味着一个反斜杠字符。我无法弄清楚的部分是`\s@\""` 我看到 \s 表示空格，我假设 @ 是它代表的字符，但我不知道是什么`\""`意思。我也不确定 s@ 周围的反斜杠是否是某种分隔符，这改变了我上面的解释。

我无法解释的另一部分是：

```
\"".+\"" 
```

\" 或 \"" 没有定义（至少我能找到）我的印象是反斜杠不应该是独立的，也就是说它们要么转义一些特殊字符，要么成对使用来表示反斜杠本身。

如果它有助于完整的正则表达式是：

```
^((([^<>()[\]\\.,;:\s@\""]+(\.[^<>()[\]\\.,;:\s@\""]+)*)|(\"".+\""))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$ 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:04:11.847

可能是这个正则表达式是用一种语言编写的，其中双引号字符通过将两个放在一起进行转义。我想也许 VB(.Net) 会这样做..？

在这种情况下`\""`，该语言将解析为`\"`，然后在正则表达式中解析为`"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:03:06.593

正则表达式可能很难理解

基本上，方括号`[]`意味着表达式将匹配其中的任何字符。`\s`空间表达式

试试[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

我也可以强烈推荐[Regex Buddy](http://www.regexbuddy.com/create.html)它也有表达的措辞。它还会为您生成代码，以确保您正确转义字符。

由于`\`它既是编程语言中的转义字符，又是用于在表达式中定义事物的字符，因此您可能会遇到一些使表达式难以阅读的情况。

看起来这就是您遇到的问题`\""`

另一部分：`\"".+\""`似乎匹配`double quote followed by any character one to unlimited times and then ending in another double quote` 问题在于您使用的编程语言如何确保在表达式中获得那些双引号，而不是我相信的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:38:55.603

鉴于您的原始正则表达式：

```
^((([^<>()[\]\\.,;:\s@\""]+(\.[^<>()[\]\\.,;:\s@\""]+)*)|(\"".+\""))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$ 
```

我已经破译了这一点，并以自由间距模式将其写出来并附有评论。我在这里以 Python 的原始文本格式呈现它，以便您可以看到本地正则表达式，因为它被呈现给正则表达式引擎（在字符串解释之后）：

## 原生正则表达式中注释的原始表达式：

```
re_commented = r'''
    # Match an email address.
    ^                                 # Anchor to start of string.
    (                                 # ($1:) Entire string.
      (                               # $2: FIRST PART (before @).
        ( [^<>()[\]\\.,;:\s@\""]+     # ($3:) Either one
          (                           # ($4:) or more
            \.                        #       dot separated
            [^<>()[\]\\.,;:\s@\""]+   #       parts.
          )*                          # ($4:)
        )                             # ($3:)
      | (                             # ($5:) Or FIRST PART is
          \"".+\""                    # a doubly, double quoted string.
        )                             # ($5:)
      )                               # $2: FIRST PART (before @).
      @                               # Required @ separates parts.
      (                               # $6: LAST PART (after @).
        ( \[                          # ($7:) LAST PART is Either
          [0-9]{1,3}\.                # an IPv4 domain address
          [0-9]{1,3}\.                # (i.e. 10.0.0.255)
          [0-9]{1,3}\.                # between
          [0-9]{1,3}                  # square
          \]                          # brackets.
        )                             # ($7:)
      | (                             # ($8:) Or LAST PART is
          ([a-zA-Z\-0-9]+\.)+         # a DNS style dot separated
          [a-zA-Z]{2,}                # named domain.
        )                             # ($8:)
      )                               # $6: LAST PART (after @).
    )                                 # ($1:) Entire string.
    $                                 # Anchor to end of string.
    ''' 
```

您现在可以清楚地看到，此正则表达式正在尝试验证电子邮件地址。似乎有人已经进入并编辑了文件并损坏了双引号 - （每个实例都`\""`应该`"` *与正则表达式引擎一样*）。另请注意，该`\""`序列在字符类中没有任何危害，因为它等同于双引号的单个实例。但是，它会造成恶作剧，因为它显示为电子邮件第一部分的第二种选择，即`\"".+\""`. 这是一个更正的版本，它解决了双引号的问题。我在这里展示了它，它以自由空格模式和 Java 片段的形式进行了完整的注释，展示了所有引号和反斜杠的正确转义。

## 修复了在 Java 正则表达式字符串中注释的表达式：

```
Pattern re_valid = Pattern.compile(
    "    # Match an email address. (Rev:20121105_1100 fixed quotes.)        \n" +
    "    ^                                     # Anchor to start of string. \n" +
    "    (                                     # ($1:) Entire string.       \n" +
    "      (                                   # $2: FIRST PART (before @). \n" +
    "        ( [^<>()\\[\\]\\\\.,;:\\s@\"]+    # ($3:) Either one           \n" +
    "          (                               # ($4:) or more              \n" +
    "            \\.                           #       dot separated        \n" +
    "            [^<>()\\[\\]\\\\.,;:\\s@\"]+  #       parts.               \n" +
    "          )*                              # ($4:)                      \n" +
    "        )                                 # ($3:)                      \n" +
    "      | (                                 # ($5:) Or FIRST PART is     \n" +
    "          \".+\"                          # a double quoted string.    \n" +
    "        )                                 # ($5:)                      \n" +
    "      )                                   # $2: FIRST PART (before @). \n" +
    "      @                                   # Required @ separates parts.\n" +
    "      (                                   # $6: LAST PART (after @).   \n" +
    "        ( \\[                             # ($7:) LAST PART is Either  \n" +
    "          [0-9]{1,3}\\.                   # an IPv4 domain address     \n" +
    "          [0-9]{1,3}\\.                   # (i.e. 10.0.0.255)          \n" +
    "          [0-9]{1,3}\\.                   # between                    \n" +
    "          [0-9]{1,3}                      # square                     \n" +
    "          \\]                             # brackets.                  \n" +
    "        )                                 # ($7:)                      \n" +
    "      | (                                 # ($8:) Or LAST PART is      \n" +
    "          ([a-zA-Z\\-0-9]+\\.)+           # a DNS style dot separated  \n" +
    "          [a-zA-Z]{2,}                    # named domain.              \n" +
    "        )                                 # ($8:)                      \n" +
    "      )                                   # $6: LAST PART (after @).   \n" +
    "    )                                     # ($1:) Entire string.       \n" +
    "    $                                     # Anchor to end of string.   ", 
    Pattern.COMMENTS); 
```

请注意，此正则表达式还有其他大多数小问题（Google“电子邮件验证”更多。）此外，许多分组括号是不必要的。

最后一条评论 - *Java 在编写和评论正则表达式方面很糟糕！*

# python - 如何连接多个unicode字符串？

> ID：13233436
> 
> 赞同：7
> 
> 时间：2012-11-05T13:48:19.723
> 
> 标签：python, unicode, python-2.x

我有两个 unicode 字符串`'가'`，`'ㄱ'`我想将它们连接起来得到`"가ㄱ"`

这是我的代码：

```
output1 = unicodeQueue(self.queue) # first unicode result
output2 = unicodeQueue(self.bufferQueue) # second unicode result
sequence = [output1, output2]
print sequence
output = ''.join(sequence)
return output 
```

这是我得到的输出：

```
[u'\uac00', u'\u3131']
ㄱ가가ㄱ가 
```

我不知道为什么它不会产生正确的结果，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T14:50:30.330

如果要连接两个字符串，请使用`+`

```
>>> '가' + 'ㄱ'
'\xea\xb0\x80\xe3\x84\xb1'
>>> u'가' + u'ㄱ'
u'\uac00\u3131'
>>> print u'가' + u'ㄱ'
가ㄱ 
```

这意味着您可以使用

```
output1 + output2 
```

# android - Android 从递归算法更新 ui

> ID：13233444
> 
> 赞同：1
> 
> 时间：2012-11-05T13:48:48.267
> 
> 标签：android, user-interface, recursion, runnable

我想运行一个经典的洪水填充算法，它可以直观地表示算法的进展情况；即一系列变黑的按钮以显示算法的顺序。我不想通过生成递归算法的迭代版本来作弊。P oorly 选项卡式伪代码前面：

```
public void floodFill(int x, int y, String targetColor,String replacementColor) {
            if *out of bounds* return
              else
               if button = target then return
                else
                 Switchbuttontoblack(button);
                 PAUSE;
         floodFill(x - 1, y, targetColor, replacementColor);
         floodFill(x + 1, y, targetColor, replacementColor);
         floodFill(x, y - 1, targetColor, replacementColor);
         floodFill(x, y + 1, targetColor, replacementColor);
} 
```

但是，虽然算法在那里执行，但按钮只会在算法结束时一次性改变颜色。

这可能是由于在[Android 计时器中更新 textview (UI)](https://stackoverflow.com/questions/6700802/android-timer-updating-a-textview-ui)时的非 UI 线程。

因此，我在算法的 PAUSE 行（即 handler.post
(runnable);

可运行在哪里

```
private Runnable runnable = new Runnable() {
       public void run() {

            Log.d("RUNableworking","RUNableworking");
            handler.postDelayed(this, 1000);

       }
    }; 
```

从 Floodfill 线程运行 = 没有。从 onCreate 运行我看到日志很好。

我不太热衷于轮询可运行文件；必须有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:00:37.767

Activity 中有一个名为 runOnUiThread() 的命令，它非常方便。唯一的问题是正在运行的 UI 排队。您还可以使用 Handler 对象将 UI 更新调用发送到 UI 线程。

但是，如果您要一步一步进行，您真的需要使用另一个线程吗？

更新：您是否在 onDraw() 中进行洪水填充？如果是这样，它不会一步一步来

# android - Android AsyncTask 解码位图并设置为图像

> ID：13233446
> 
> 赞同：1
> 
> 时间：2012-11-05T13:48:52.870
> 
> 标签：android, bitmap, android-asynctask

我使用自定义方法解码位图并将其设置为 imageview 作为背景。目前它工作正常，但在某些设备中，有时它会由于内存不足错误而崩溃。知道如何优化该代码并使其变得更好吗？这是我正在使用的：

```
 class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private String data = null;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        data = params[0];

        if(data != null){
            File bufferFile = new File(data);
            Log.e("","data : "+data);
            FileInputStream fis = null;
            try {
                fis = new FileInputStream(bufferFile);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }

            Cipher cipher = null;
            try {
                cipher = Cipher.getInstance("AES/CBC/NoPadding");
            } catch (NoSuchAlgorithmException e) {
                e.printStackTrace();
            } catch (NoSuchPaddingException e) {
                e.printStackTrace();
            }
            int userId = RPCCommunicator.getUserId(Store.this);
            String secretSalt = RPCCommunicator.getSecretKey(userId);
            String iv = RPCCommunicator.getIv(secretSalt);
            SecretKeySpec keySpec = new SecretKeySpec(secretSalt.getBytes(), "AES");
            IvParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());
            try {
                cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
            } catch (InvalidKeyException e) {
                e.printStackTrace();
            } catch (InvalidAlgorithmParameterException e) {
                e.printStackTrace();
            }
            CipherInputStream cis = new CipherInputStream(fis, cipher);

            BitmapFactory.Options o2 = new BitmapFactory.Options();
            //o2.inSampleSize=2;
            o2.inTempStorage = new byte[4*1024];

            int width = (int) RPCCommunicator.getPlaceHolderWidth(Store.this, 45);
            int height = (int) RPCCommunicator.getPlaceHolderHeight(Store.this, 25);

            Rect rect = new Rect();
            rect.inset(width, height);

            Bitmap finall = BitmapFactory.decodeStream(cis,rect,o2);
            if(finall != null){
                Bitmap bmp = Bitmap.createScaledBitmap(finall, width, height, true);
                return bmp;
            } else {
                return null;
            }
        }
        return null;
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null) {
            final ImageView imageView = imageViewReference.get();
            if(bitmap != null){
                if (imageView != null) {
                    Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.fadein);
                    imageView.startAnimation(animation);
                    imageView.setImageBitmap(bitmap);
                }
            } else {
                int width = (int) RPCCommunicator.getPlaceHolderWidth(Store.this, 45);
                int height = (int) RPCCommunicator.getPlaceHolderHeight(Store.this, 25);

                RelativeLayout.LayoutParams param = new RelativeLayout.LayoutParams(width, height);
                param.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
                param.rightMargin = 15;
                imageView.setBackgroundResource(R.drawable.placeholder);
                imageView.setLayoutParams(param);
            }
        }
    }
} 
```

非常感谢任何想法/建议/帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:57:58.387

试试这个代码

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_WIDTH=WIDTH;
            final int REQUIRED_HIGHT=HIGHT;
            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
                scale*=2;

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        }
            catch (FileNotFoundException e) {}
        return null;
    } 
```

这将在您传递宽度和高度时缩放位图..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:53:17.647

在使用`bitmap.recycle()`您的位图之后并在为其分配另一个值之前使用。您还可以在实际使用之前缩小位图。这是一个链接：[https ://stackoverflow.com/a/13226982/1117338](https://stackoverflow.com/a/13226982/1117338)

还有一个建议：在发布问题之前请先搜索一下。这是许多人已经解决的老问题。

# c# - 隐藏后如何再次显示表单？

> ID：13233451
> 
> 赞同：6
> 
> 时间：2012-11-05T13:49:12.110
> 
> 标签：c#, winforms, forms, minimize, maximize-window

我有两种形式。我需要用一个按钮打开第二个表单。当我打开 form2 时，我隐藏了 form1。但是，当我尝试使用按钮从 form2 再次显示 form1 时，它不起作用。我的form1代码是：

```
Form2 form2 = new Form2();        
form2.ShowDialog(); 
```

内部form2代码：

```
Form1.ActiveForm.ShowDialog(); 
```

或者

```
Form1.ActiveForm.Show(); 
```

或者

```
form1.show(); (form1 doesn't exist in the current context) 
```

不起作用。我不想打开新表单

```
Form1 form1 = new Form1();   
form1.ShowDialog(); 
```

我想显示我之前隐藏的表格。或者我可以将其最小化到任务栏

```
this.WindowState = FormWindowState.Minimized; 
```

并再次从 form2 最大化它。

```
Form2.ActiveForm.WindowState = FormWindowState.Maximized; 
```

但是我尝试的方式再次不起作用。这些方法有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T13:51:52.227

您可以尝试（在 Form1 按钮上单击）

```
Hide();
Form2 form2 = new Form2();        
form2.ShowDialog();
form2 = null;
Show(); 
```

或（它应该工作）

```
Hide();
using (Form2 form2 = new Form2())       
    form2.ShowDialog();
Show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:53:14.017

保留 of 的实例`Form1`并将其用于`Show`or `Hide`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T12:08:24.523

如果您像这样显示 form2，则可以通过 Owner 属性从 Form2 访问 Form1：

```
form2.ShowDialog( form1 ) 
```

或像这样：

```
 form2.Show( form1 ) 
```

请注意，这样您不会被迫使用 ShowDialog，因为可以在 Form2 中移动隐藏和显示逻辑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-09T20:49:09.367

这种方法是我觉得最适合我的方法

初级形式

```
Form2 form2 = new Form2(this); 
```

次要形式

```
private Form Form1
public Form2(Form Form1)
{
    InitializeComponent();
    this.Form1 = Form1;
    Form1.Hide();
} 
```

稍后关闭时

```
private void btnClose_Click(object sender, EventArgs e)
{
    Form1.Show();
    this.Close();
} 
```

# bash - Bash变量更改不会持续存在

> ID：13233452
> 
> 赞同：0
> 
> 时间：2012-11-05T13:49:16.040
> 
> 标签：bash, variables

我有一个简短的 bash 脚本来检查 Python 程序是否正在运行。该程序在运行时会写出一个 PID 文件，因此将其与当前正在运行的进程列表进行比较可以满足我的需求。但是我遇到了一个变量被更改然后显然又变回来的问题！这是脚本：

```
#!/bin/bash
# Test whether Home Server is currently running
PIDFILE=/tmp/montSvr.pid
isRunning=0
# does a pid file exist?
if [ -f "$PIDFILE" ]; then
  # pid file exists
  # now get contents of pid file
  cat $PIDFILE | while read PID; do
    if [ $PID != "" ]; then
      PSGREP=$(ps -A | grep $PID | awk '{print $1}')
      if [ -n "$PSGREP" ]; then
        isRunning=1
        echo "RUNNING: $isRunning"
      fi
    fi
  done
fi
echo "Running: $isRunning"
exit $isRunning 
```

当 Python 脚本运行时，我得到的输出*是*：

```
RUNNING: 1
Running: 0 
```

并且 bash 脚本的退出值为 0。所以 isRunning 在所有这些 if 语句中都发生了变化（即，代码按预期执行），但随后不知何故 isRunning 再次恢复为 0。使困惑...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:53:57.017

管道之后的命令在`|`子 shell 中运行。对子 shell 中变量值的更改不会传播到父 shell。

解决方案：将循环更改为

```
while read PID; do
    # ...
done < $PIDFILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:55:23.560

问题出在管道上。以这种方式使用管道意味着循环在具有自己的环境的子外壳中运行。杀死`cat`, 改为使用以下语法：

```
while read PID; do
    if [ $PID != "" ]; then
      PSGREP=$(ps -A | grep $PID | awk '{print $1}')
      if [ -n "$PSGREP" ]; then
        isRunning=1
        echo "RUNNING: $isRunning"
      fi
    fi
  done < "$PIDFILE" 
```

# javascript - 声音在鼠标悬停 mp3、Wordpress 上播放延迟

> ID：13233455
> 
> 赞同：1
> 
> 时间：2012-11-05T13:49:19.973
> 
> 标签：javascript, wordpress, background-music

我在 wordpress 网站上工作。在这个网站上，我需要在鼠标悬停时播放声音，一切都很好，但是出了点问题，我不知道为什么？

`mouseover`按下按钮时有延迟。

请查看链接[http://barkingspiderheatre.com.au/new/](http://barkingspidertheatre.com.au/new/)

这是我的代码

**JavaScript**

```
function doPlay(what){
        document.getElementById('music').innerHTML='<object type="application/x-shockwave-flash" data="http://flash-mp3-player.net/medias/player_mp3_mini.swf?autoplay=1" width="200" height="20">'
        +'<param name="movie" value="http://flash-mp3-player.net/medias/player_mp3_mini.swf?autoplay=1" />'
        +'<param name="bgcolor" value="#000000" />'
        +'<param name="autoplay" value="1" />'
        +'<param name="FlashVars" value="mp3='+what+'" />'
        +'</object>';
    }
    function doStop(){
        document.getElementById('music').innerHTML='';
    } 
```

**HTML**

```
<a href="<?php bloginfo("url");?>/roving-butterflies-penelope-ulysses/?ajax=true&amp;width=108%&amp;height=105%" rel="prettyPhoto[ajax]" onMouseMove="javascript:doPlay('<?php bloginfo('template_url'); ?>/songs/Harp_gliss_wind_chimes_short_BLASTWAVEFX_15022.mp3')"  onMouseOut="doStop();">

<div class="music_player" id="music"></div> 
```

谁能告诉我如何消除鼠标悬停播放声音的延迟。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:55:19.493

使用 html5 您可以`audio api`直接访问，您可以执行以下操作，而不是创建对象标签来播放声音：

```
function doPlay(what){
    var snd = new Audio(what); // buffers automatically when created so no delay
    snd.play();
} 
```

希望能帮助到你。

# matlab - 在 matlab 中进行优化：找出约束方程

> ID：13233457
> 
> 赞同：1
> 
> 时间：2012-11-05T13:49:25.680
> 
> 标签：matlab, optimization, constraints

我有 N 行由 y 截距和角度 q 定义。约束是所有 N 条线必须在一个点相交。我可以想出最终得到约束的方程式是：

```
Y = tan(q(1))X + y(1)
Y = tan(q(2))X + y(2)
... 
```

如果 N = 3 或 4，我可以手动获得约束，但如果 N 大于 4，我只能获得一个约束。如果 N = 3 或 4，那么当我为 X 求解上述方程时，我得到2个方程，然后可以将它们设置为彼此相等。如果 N > 4，我得到超过 2 个等于 X 的方程，我不知道如何将它们压缩为一个约束。如果我不能将它们压缩为一个约束并且能够使用动态创建的多个约束（取决于传入的 N）来解决优化问题，那也很好。

为了更好地理解我在做什么，我将展示如何获得 N = 3 的约束。我从这三个等式开始：

```
Y = tan(q(1))X + y(1)
Y = tan(q(2))X + y(2)
Y = tan(q(3))X + y(3) 
```

然后我将它们设置为彼此相等并得到这些方程：

```
tan(q(1))X + y(1) = tan(q(2))X + y(2)
tan(q(2))X + y(2) = tan(q(3))X + y(3) 
```

然后我求解 X 并得到这个约束：

```
(y(2) - y(1)) / (tan(q(1)) - tan(q(2))) = (y(3) - y(2)) / (tan(q(2)) - tan(q(3))) 
```

请注意我如何有 2 个方程来求解 X。当 N > 4 时，我最终得到的结果超过 2。如果我能够动态创建约束，然后在 MATLAB 中调用将处理多个约束的优化函数，那么这就可以了远没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:42:41.293

您说优化算法需要进行调整`q`，以使“真实”问题最小化，同时上述方程也成立。

请注意，[欧几里德公理第五条](http://en.wikipedia.org/wiki/Parallel_postulate)确保所有线始终与所有其他线相交，除非两个`q`s 相等但对应`y0`的 s 不相等。最后一种情况非常罕见（在浮点上下文中），我将在此处跳过它，但为了增加稳健性，您最终应该包含它。

现在，首先，考虑矩阵。您的约束可以通过矩阵方程表示：

```
y = tan(q)*x + y0 
```

其中`q`和是矩阵，`y`一个未知的标量。请注意，例如，仅包含相同常数的矩阵。这实际上是一个非线性约束——也就是说，它不能表示为`y0``[Nx1]``x``y = c*ones(N,1)`

```
A*q <= b   or   A*q == b 
```

带有`A`一些设计矩阵和`b`一些解决方案向量。因此，您必须编写一个定义此非线性约束的函数，您可以将其传递给像`fmincon`. 从[文档中](http://www.mathworks.nl/help/optim/ug/fmincon.html)：

> x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub,nonlcon) 使最小化服从 nonlcon 中定义的非线性不等式 c(x) 或等式 ceq(x)。fmincon 优化使得 c(x) ≤ 0 和 ceq(x) = 0。如果不存在边界，则设置 lb = [] 和/或 ub = []。

请注意，您实际上是在朝着正确的方向前进。您可以使用以下等式求解任意一对线的`x`交点的位置：`q(n),y0(n)``q(m),y0(m)`

```
x(n,m) = (y0(n)-y0(m)) / (q(m)-q(n)) 
```

您的`nonlcon`函数应该找到`x`所有*可能*的对`n,m`，并检查它们是否*都*相等。您可以方便地执行此操作，如下所示：

```
function [c, ceq] = nonlcon(q, y0)
    % not using inequalities
    c = -1; % NOTE: setting it like this will always satisfy this constraint

    % compute tangents 
    tanq = tan(q);

    % compute solutions to x for all pairs 
    x = bsxfun(@minus, y0, y0.') ./ -bsxfun(@minus, tanq, tanq.');

    % equality contraints: they all need to be equal 
    ceq = diff(x(~isnan(x))); % NOTE: if all(ceq==0), converged.

end 
```

请注意，您实际上并没有`q`明确地求解（或根本不需要交点的 y 坐标）——这就是全部`fmincon`的工作。

您将需要做一些实验，因为有时定义

```
x = x(~isnan(x));
ceq = norm(x-x(1)); % e.g., only 1 equality constraint 
```

这将更快（计算的导数更少），但其他问题确实需要

```
x = x(~isnan(x));
ceq = x-x(1); % e.g., N constraints 
```

或类似的技巧。这真的取决于问题的其余部分，优化器找到每种情况的难度。

# ruby-on-rails - Rails find_by_email 多个表

> ID：13233459
> 
> 赞同：0
> 
> 时间：2012-11-05T13:49:34.287
> 
> 标签：ruby-on-rails, activemodel

我正在开发一个 Rails 应用程序，我有 3 种不同的用户类型。这些用户可能非常不同，所以我为他们每个人创建了模型。现在，他们应该能够通过一个表单登录。所以基本上我想说'find_by_email（“some_email”）'之类的东西，但是搜索所有三个表。不过，Rails 似乎希望您使用特定模型调用“find_by”，例如 Admin.find_by()。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:57:39.820

尝试这样的事情并假设电子邮件在所有表格中都是唯一的

```
[Model1, Model2, Model3].each do |model|
  break if model.find_by_email("email@email.com").present?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:58:00.367

希望这是您开发的早期阶段，但当前的结构可能不是最好的路线。每种用户类型不共享多少不同的列？您可能想要使用“用户角色”系统，并将其作为用户表上的一个额外列。

然后，您可以使用[CanCan](https://github.com/ryanb/cancan)之类的东西来管理这些角色以及他们可以访问的内容/位置。

# java - 在 Java 中将字符串解析为映射

> ID：13233460
> 
> 赞同：0
> 
> 时间：2012-11-05T13:49:35.110
> 
> 标签：java, parsing

有一个类似的字符串；

```
{uniqueKey=test20745,content={acostumbrado={tf=1,df=1},al={tf=1,df=6945},ante={tf=1,df=42},co={tf=1,df=9187},ello={tf=1,df=2},está={tf=2,df=21},falcao={tf=1,df=105},guardia={tf=1,df=2},http={tf=1,df=9893},nada={tf=1,df=24},no={tf=1,df=2493},osa={tf=1,df=429},para={tf=1,df=6382},partido={tf=1,df=50},pretorian={tf=1,df=1},que={tf=1,df=358},sebcfkeı={tf=1,df=1},su={tf=1,df=7368},t={tf=1,df=14423},tuvo={tf=1,df=3},un={tf=1,df=8511}}} 
```

如何将此字符串解析为如下所示的映射（键，列表）；

```
acostumbrado->tf=1,df=1
al ->tf=1,df=6945
ante ->tf=1,df=42
... 
```

编辑：

所以我到目前为止做了什么；

```
 String delims = "[{},]";
    HashMap<String, List<String>> valueMap = new HashMap<String, List<String>>();
    for (int i = 0; i < text.size(); i++) {
        String[] tokens = val.toString().split(delims);
        ArrayList<String> tfAndDfValues = new ArrayList<String>();
        tfAndDfValues.add(tokens[4].substring(3));
        tfAndDfValues.add(tokens[5].substring(3));
        if (valueMap.containsKey(removeLastChar(tokens[3]))) {
            valueMap.get(removeLastChar(tokens[3])).addAll(tfAndDfValues);
        } else {
            valueMap.put(removeLastChar(tokens[3]), tfAndDfValues);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:10:08.237

你有没有想过[状态模式](http://en.wikipedia.org/wiki/State_pattern)？请参阅使用示例：

```
public class StatePatternProgram {

    public static void main(String[] args) {
        String example = "{uniqueKey=test20745,content={acostumbrado={tf=1,df=1},al={tf=1,df=6945},ante={tf=1,df=42},co={tf=1,df=9187},ello={tf=1,df=2},está={tf=2,df=21},falcao={tf=1,df=105},guardia={tf=1,df=2},http={tf=1,df=9893},nada={tf=1,df=24},no={tf=1,df=2493},osa={tf=1,df=429},para={tf=1,df=6382},partido={tf=1,df=50},pretorian={tf=1,df=1},que={tf=1,df=358},sebcfkeı={tf=1,df=1},su={tf=1,df=7368},t={tf=1,df=14423},tuvo={tf=1,df=3},un={tf=1,df=8511}}}";
        ParseContext context = new ParseContext();
        Map<String, List<Integer>> map = context.parseContent(example);
        System.out.println(map);
    }
}

class ParseContext {

    private Map<String, List<Integer>> contentMap;

    private String currentKey;
    private List<Integer> currentList;

    private boolean continueParsing = true;
    private ParseState state = new StartParseState();

    public Map<String, List<Integer>> parseContent(String content) {
        StringTokenizer tokenizer = new StringTokenizer(content, "{}=,", true);
        while (continueParsing) {
            state.parse(tokenizer);
        }
        return contentMap;
    }

    interface ParseState {
        void parse(StringTokenizer tokenizer);
    }

    class StartParseState implements ParseState {
        @Override
        public void parse(StringTokenizer tokenizer) {
            while (tokenizer.hasMoreTokens()) {
                String token = tokenizer.nextToken();
                if (!"content".equals(token)) {
                    continue;
                }

                contentMap = new LinkedHashMap<String, List<Integer>>();

                tokenizer.nextToken();
                tokenizer.nextToken();

                state = new KeyParseState();
                break;
            }
        }
    }

    class KeyParseState implements ParseState {
        @Override
        public void parse(StringTokenizer tokenizer) {
            if (tokenizer.hasMoreTokens()) {
                String token = tokenizer.nextToken();
                if (",".equals(token)) {
                    token = tokenizer.nextToken();
                }
                if ("}".equals(token)) {
                    state = new EndParseState();
                    return;
                }
                currentKey = token;
                tokenizer.nextToken();
                state = new ListParseState();
            }
        }
    }

    class ListParseState implements ParseState {
        @Override
        public void parse(StringTokenizer tokenizer) {
            currentList = new ArrayList<Integer>();
            while (tokenizer.hasMoreTokens()) {
                String token = tokenizer.nextToken();
                if ("}".equals(token)) {
                    break;
                }
                if ("=".equals(token)) {
                    currentList.add(Integer.valueOf(tokenizer.nextToken()));
                }
            }
            contentMap.put(currentKey, currentList);
            state = new KeyParseState();
        }
    }

    class EndParseState implements ParseState {
        @Override
        public void parse(StringTokenizer tokenizer) {
            continueParsing = false;
        }
    }
} 
```

该程序打印：

```
{acostumbrado=[1, 1], al=[1, 6945], ante=[1, 42], co=[1, 9187], ello=[1, 2], está=[2, 21], falcao=[1, 105], guardia=[1, 2], http=[1, 9893], nada=[1, 24], no=[1, 2493], osa=[1, 429], para=[1, 6382], partido=[1, 50], pretorian=[1, 1], que=[1, 358], sebcfkeı=[1, 1], su=[1, 7368], t=[1, 14423], tuvo=[1, 3], un=[1, 8511]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:59:53.000

此解决方案使用正则表达式组捕获：

```
private static final String SAMPLE = "{uniqueKey=test20745,content={acostumbrado={tf=1,df=1},al={tf=1,df=6945},ante={tf=1,df=42},co={tf=1,df=9187},ello={tf=1,df=2},está={tf=2,df=21},falcao={tf=1,df=105},guardia={tf=1,df=2},http={tf=1,df=9893},nada={tf=1,df=24},no={tf=1,df=2493},osa={tf=1,df=429},para={tf=1,df=6382},partido={tf=1,df=50},pretorian={tf=1,df=1},que={tf=1,df=358},sebcfkeı={tf=1,df=1},su={tf=1,df=7368},t={tf=1,df=14423},tuvo={tf=1,df=3},un={tf=1,df=8511}}}";

private static final String CONTENT = "(\\p{L}*)=\\{((tf=\\d*),(df=\\d*))\\}";

public static void main(String[] args) {
    Pattern p = Pattern.compile(CONTENT);
    Matcher m = p.matcher(SAMPLE);

    Map<String, List<String>> result = new HashMap<String, List<String>>();
    while (m.find()) {
        String key = m.group(1);

        List<String> values = new ArrayList<String>();
        values.add(m.group(3));
        values.add(m.group(4));

        result.put(key, values);
    }

    System.out.println(result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:23:42.310

如果您的输入模式一直都是唯一的，试试这个

```
 String delims = "[{},=]";
    Map map = new HashMap() ;
    String[] tokens = text.toString().split(delims);
    for( int i=5;i<tokens.length - 7;i = i+ 7) {
        map.put(tokens[i], tokens[i+2]+"->"+tokens[i+3]+","+tokens[i+4]+"->"+tokens[i+5]);
    }
    System.out.println(map); 
```

# c# - Linq-to-Entities 查询中的动态条件

> ID：13233461
> 
> 赞同：4
> 
> 时间：2012-11-05T13:49:41.910
> 
> 标签：c#, .net, linq, entity-framework, dynamic

我正在尝试将一些直接构建 SQL 查询的旧代码转换为实体框架，并且遇到了许多似乎都有的问题（从围绕该主题的大量问题来看）：如何在 linq 中表达动态 where 条件。

我如何用 linq 查询表达以下代码：

```
 switch (status) {
        case "0":
            sqlwhere = " WHERE status < 0 ";
            break;
        case "-1":
            sqlwhere = " WHERE status = -1 ";
            break;
        case "-100":
            sqlwhere = " WHERE status = -100 ";
            break;
        case "1":
        default:
            sqlwhere = " WHERE status >= 0 ";
            break;
    }

    if (strsearch != "")
        sqlwhere += " AND desc LIKE '%" + strsearch + "%' ";

    string sqlc = "SELECT top 10 * FROM c " + sqlwhere + " order by date desc"; 
```

我已经阅读了`PredicateBuilder`其他帖子中的动态 Linq 扩展，但我认为像这样的简单案例可以在没有外部库的情况下解决。

使用 .net 4.5、EF 5.0、C#，是否可以以“动态”方式完成，而无需为每个案例构建完整的 linq 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:52:02.993

在您的情况下，使用[**PredicateBuilder**](http://www.albahari.com/nutshell/predicatebuilder.aspx)如下所示

另请查看我的博客文章：[**使用 Linq 进行动态查询**](http://pranayamr.blogspot.ca/2011/04/dynamic-query-with-linq.html)

```
var outer = PredicateBuilder.True<Entity>();

switch (status) {
        case "0":
            outer = outer.And (p => p.status<0);
            break;
        case "-1":
            outer = outer.And (p => p.status==-1);
            break;
        case "-100":
            outer = outer.And (p => p.status==-100);
            break;
        case "1":
        default:
            outer = outer.And (p => p.status>=0); 
            break;
    }

if (strsearch != "")
        outer = outer.And (p => p.desc.Contains(strsearch ));

dataContext.Entity.Where (outer ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:12:18.677

如果您不想使用外部的东西，那么只需使用 fluent API：

```
var query = db.YourTableName
              .Where(x => x.desc.Contains(strsearch));

switch (status) {
   case "0":
        query = query.Where(x => x.status < 0);
        break;
   case "-1":
        query = query.Where(x => x.status == -1);
        break;
   case "-100":
        query = query.Where(x => x.status == -100);
        break;
   case "1":
   default:
        query = query.Where(x => x.status >= 0);
        break;
}

var result = query.OrderByDescending(x => x.date)
                  .Take(10); 
```

*顺便说一句*，您可以创建按状态过滤的扩展方法。您的查询将如下所示：

```
var query = db.YourTableName
              .FilterByStatus(status)
              .Where(x => x.desc.Contains(strsearch))
              .OrderByDescending(x => x.date)
              .Take(10); 
```

扩展方法：

```
public static IQueryable<YourType> FilterByStatus(this IQueryable<YourType> query, 
                                                  string status)
{

    switch (status) {
       case "0":
            return query.Where(x => x.status < 0);            
       case "-1":
            return query.Where(x => x.status == -1);
       case "-100":
            return query.Where(x => x.status == -100);
       case "1":
       default:
            return query.Where(x => x.status >= 0);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T09:38:44.663

您可以将[LinkExtension](https://github.com/kbenhddia/LinqExtension)与[LinqKit一起使用](http://www.albahari.com/nutshell/linqkit.aspx)

```
 using (var context = new workEntities() )
{

    Dictionary<string, List<string>> dictionary = new Dictionary<string, List<string>>();
    dictionary["Title"] = new List<string> {  
                    "Network Engineer", 
                    "Security Specialist", 
                    "=Web Developer"
                };
    dictionary["Salary"] = new List<string> { ">=2000" };
    dictionary["VacationHours"] = new List<string> { ">21" };
    dictionary["SickLeaveHours"] = new List<string> { "<5" };                
    dictionary["HireDate"] = new List<string> { 
                    ">=01/01/2000",
                    "28/02/2014" 
                };
    dictionary["ModifiedDate"] = new List<string> { DateTime.Now.ToString() };

    var data = context.Employee.CollectionToQuery(dictionary).ToList();
} 
```

# iphone - 操作无法完成。（OSStatus 错误 - 9800。）在 SKPSMTPMessage iPhone 5.0

> ID：13233466
> 
> 赞同：3
> 
> 时间：2012-11-05T13:50:00.143
> 
> 标签：iphone, ios, ipad, sendmail

我正在尝试将邮件从 iPhone 发送到任何邮件，我使用了 SKPSMTPMessage，它适用于所有类型的模拟器（iPhone/iPad 4.3、iPhone/iPad 5.1、iPhone/iPad 6.0）。但是，当我尝试从（iPhone/iPad 5.0）发送时，对话框中出现以下错误

```
 the operation could not be completed. (OSStatus error - 9800.) 
```

在这个问题上有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:43:05.160

在您的项目中查找文件`SKPSMTPMessage.m`，并修改源代码`CFDictionarySetValue`，如下所示，它可以工作-

```
//CFDictionarySetValue(sslOptions, kCFStreamSSLLevel, kCFStreamSocketSecurityLevelTLSv1);
 CFDictionarySetValue(sslOptions, kCFStreamSSLLevel, kCFStreamSocketSecurityLevelSSLv3); 
```

由于 iOS 开始使用 TLS 1.2，因此 iOS 5+ 或更高版本以及此 smtp 应用似乎存在一些兼容性问题。

请参阅：http: [//developer.apple.com/library/ios/#technotes/tn2287/_index.html](http://developer.apple.com/library/ios/#technotes/tn2287/_index.html)

# php - 如何在 Google MAP 中标记位置

> ID：13233467
> 
> 赞同：-3
> 
> 时间：2012-11-05T13:50:04.263
> 
> 标签：php, google-maps, google-maps-api-3

我有地理位置。我正在尝试将此位置标记到 Google 地图中。请建议我最好的方法。我有我想在谷歌地图中使用的数组中的所有位置

```
 Array
        (
            [0] => 51.508742, -0.134583
        )
        Array
        (
            [0] => 38.410558, 17.314453
        ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:52:35.900

[https://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)

```
//var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var myLatLng = new google.maps.LatLng(yourArrayName[0][0], yourArrayName[0][1]);
var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Hello World!"
}); 
```

将您的数组设置为包含一个在不同元素中包含纬度和经度的数组可能会更容易，而不是您可能拥有的一个字符串。

# ios - 适用于 ios 4.3 的 AFNetworking

> ID：13233469
> 
> 赞同：0
> 
> 时间：2012-11-05T13:50:10.600
> 
> 标签：ios, afnetworking

目前我正在 4.3 中开发 ios 应用程序。我一直在为我的所有网络活动使用 ASIHttprequest。现在我想使用 AFNetworking。我的问题是我无法获得 ios 4.3 的 AFNetworking 类。谷歌搜索给出的一些博客说 AFNetworking 0.10 与 ios 4.3 兼容，但我只能获得 1.0 版本。

我只想知道 AFNetworking 是否有与 ios 4.3 兼容的版本，如果有，请直接访问链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:56:17.680

如果您查看 AFNetworking 的 GitHub 帐户。你应该能够找到它。将分支切换到正确的版本（0.10.x），你会很好。

无论如何，这里是版本的直接链接：[Version 0.10.x](https://github.com/AFNetworking/AFNetworking/tree/0.10.x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:54:39.357

AFNetworking 存储在 Github 上。

例如，您可以从其历史记录中获取任何提交 - 您可以从[https://github.com/AFNetworking/AFNetworking/tags选择任何标记状态进行下载](https://github.com/AFNetworking/AFNetworking/tags)

# android - 自动聚焦到下一个编辑文本字段

> ID：13233472
> 
> 赞同：2
> 
> 时间：2012-11-05T13:50:22.517
> 
> 标签：android, android-edittext

我正在使用编辑文本视图，并希望在达到最大长度时自动移动到下一个文本字段，如在 xml 中如何从 xml 或代码移动到下一个文本字段任何帮助/建议将是最受欢迎的 Usman Kurd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:02:47.633

将 TextWatcher 与您的编辑文本一起使用，当您的编辑文本超过最大限制时，您可以请求将焦点放在您的文本框上。

```
EditText edit= (EditText) findViewById (R.id.myedit);

 edit.addTextChangedListener(new TextWatcher() 
 {
   public void onTextChanged(CharSequence s, int start, int before, int count) 
    { 
      if (s.length() >= EDIT_MAX_LEN) 
       { 
           text.requestFocus(); 
       }
     }
    @Override
    public void afterTextChanged(Editable arg0) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start,
            int count, int after) {
    }
}); 
```

**我希望它对你有帮助。**

# symfony - 无法将扩展的树枝模板块覆盖为空

> ID：13233476
> 
> 赞同：5
> 
> 时间：2012-11-05T13:50:31.313
> 
> 标签：symfony, bundle, block, twig, template-engine

我在*Symfony 2.1.3中使用**MopaBootstrapBundle*和*Twig*模板。这个包有*base.html.twig*模板，其中包含脚本块：

 ***```
{% block foot_script %}
    {# To only use a subset or add more js overwrite and copy paste this block
    To speed up page loads save a copy of jQuery in your project and override this block to include the correct path
    Otherwise the regeneration is done on every load in dev more with use_controller: true
     #}
    {% javascripts
        'http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-transition.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-modal.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-dropdown.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-scrollspy.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-tab.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-tooltip.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-popover.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-alert.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-button.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-collapse.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-carousel.js'
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-typeahead.js'
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-collection.js'
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-subnav.js'
    %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock foot_script %} 
```

我正在使用以下方法在我的模板中扩展它：

```
{% extends 'MopaBootstrapBundle::base.html.twig' %}
{% block foot_script %}{% endblock foot_script %} 
```

但它仍然尝试加载 Bundle 的*base.html.twig*模板，我得到：

> 在“MopaBootstrapBundle::base.html.twig”中编译模板（“无法找到文件“@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-transition.js”。”）期间引发了异常。

* * *

我发现，如果你像这样扩展它：

```
{% extends 'MopaBootstrapBundle::base.html.twig' %}
{% block foot_script %}
    {% javascripts
        '@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-typeahead.js'
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-collection.js'
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-subnav.js'
    %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock foot_script %} 
```

注意*typeahead.js*

我得到：

> 编译“MopaBootstrapBundle::base.html.twig”中的模板（“无法找到文件“@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-typeahead.js”。”）时引发异常。

如果我只删除一行：

```
{% extends 'MopaBootstrapBundle::base.html.twig' %}
{% block foot_script %}
    {% javascripts
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-collection.js'
        '@MopaBootstrapBundle/Resources/public/js/mopabootstrap-subnav.js'
    %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock foot_script %} 
```

我得到：

> 在“MopaBootstrapBundle::base.html.twig”中编译模板（“无法找到文件“@MopaBootstrapBundle/Resources/bootstrap/js/bootstrap-transition.js”。”）期间引发了异常。

它仍然尝试从基本模板加载所有脚本。

任何建议如何覆盖 *foot_script* 块以使其为空而不加载这些 JS 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:19:46.237

你想要的是*嵌入*而`MopaBootstrapBundle::base.html.twig`不是*扩展*它。你应该使用 Twig 的[`embed`](http://twig.sensiolabs.org/doc/tags/embed.html)标签：

```
{% embed 'MopaBootstrapBundle::base.html.twig' %}
    {% block foot_script %}{% endblock foot_script %}
{% endembed %} 
```

来自 Twig 的文档：

> embed 标签结合了 include 和 extends 的行为。它允许您包含另一个模板的内容，就像 include 一样。但它也允许您覆盖在包含的模板中定义的任何块，例如在扩展模板时。***

# java - 如何在 Android 中使用 VPN？

> ID：13233477
> 
> 赞同：5
> 
> 时间：2012-11-05T13:50:36.940
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, vpn, openvpn

我正在探索 Android 中的 VPN 连接。我是这个部分的新手。

1.  我想知道如何使用应用程序在 Android 中设置 VPN 连接？

2.  我遇到了一个示例代码，即 ToyVpn。我运行了应用程序，但我不知道我需要以该应用程序显示的形式提供哪些数据，考虑我有一个带有 IP 地址的 VPN 服务器（比如 10.162.1.2），我该怎么办需要在该应用程序中做什么才能使该应用程序正常工作？

3.  如果我尝试使用任何公共 VPN 服务器，我需要做什么？

4.  我从[这里](https://github.com/kghost/ics-openvpn)下载了 Openvpn 源并在我的 ICS 设备中编译并运行，但我不知道如何配置需要输入的数据。请提供使用此应用程序的确切方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T17:06:18.687

> 我想知道如何使用应用程序在 Android 中设置 VPN 连接？

Android SDK 附带一个示例；请参阅 android-16 示例目录中的 ToyVpn。另请参阅[VpnService](http://developer.android.com/reference/android/net/VpnService.html)和[VpnService.Builder](http://developer.android.com/reference/android/net/VpnService.Builder.html)的文档。

> 我遇到了一个示例代码，即 ToyVpn。我运行了该应用程序，但我不知道我需要以该应用程序显示的形式提供哪些数据，考虑我有一个带有 IP 地址的 VPN 服务器（比如 10.162.1.2），我是什么需要在该应用程序中执行以使该应用程序工作。

您的 VPN 需要创建一个新套接字，使用 保护套接字不被路由回 VPN `VpnService.protect(Socket)`，并将套接字连接到 10.162.1.2。建立到 VPN 服务器的隧道连接后，您应该继续将 VpnService 接口的输入流写入隧道的输出流，然后将隧道响应写回接口输出流。

> 如果我尝试使用任何公共 VPN 服务器，我需要做什么？

没有建立与 VPN 服务器的连接的标准机制。ToyVpn 只是使用原始 TCP 数据包通过套接字进行通信。您可以像 OpenVPN 一样实现现有协议（参见[RFC 4026](https://www.rfc-editor.org/rfc/rfc4026)），也可以自己编写一些东西。

# google-app-engine - Google App Engine 重置内存缓存统计信息

> ID：13233480
> 
> 赞同：1
> 
> 时间：2012-11-05T13:50:44.903
> 
> 标签：google-app-engine, memcached

我已经使用 flush_all() 刷新了 memcache，并在我部署的应用程序 Memcache Viewer 中点击了刷新缓存按钮，但是统计数据没有重置。无论如何要重置统计信息？

![在此处输入图像描述](../Images/baf194a2df68305aa497c3d668407cee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:05:17.900

除了这两个选项，没有。如果您认为这是一个错误（或功能请求），请在[问题跟踪器](http://code.google.com/p/googleappengine/issues/list)中提交一个。

# windows - 在汇编程序中将字转换为双字

> ID：13233481
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:50:47.953
> 
> 标签：windows, assembly, coding-style

我在尝试在汇编程序中解决这个表达式时遇到了一些问题。

```
`$`z=(5*a-b/7)/(3/b+a*a) 
```

我想知道*如何将*一个字转换为双字（无符号解决方案），
我必须使用 cwb 命令还是使用`AX:BX`，如果我必须使用那些最后的寄存器，
我如何正确编写命令?

我将在 DosBox 下的 Turbo Debugger 中测试代码。我的完整代码

```
assume cs:code,ds:data 
data segment
;
a db ?
b db ?
rez dw ?
;
data ends
;
code segment
;
mov ax,data
mov ds,ax
;
;
;#####prima paranteza
;
mov al,a    ;ah=a
mul 5       ;ax=a*5
mov cx,ax   ;cx=ax
mov ah,b    ; il mut pe ah in b  ( pregatire pt conversie fara semn )
mov al,0    ; l-am convertit pe b in word ( pe 2 octeti )
div 7       ; am impartit double word-ul b la 7 , catul a ramas in ah , restul a ramas in al 
sub cx,ax   ; (am tinut cont de faptul ca in ax a ramas rezultatul dupa impartire )  , cx=cx-ax, a*5 - b/7
;
; ####a 2 a paranteza
;
mov ah,3    
mov al,0    ; conversie de la b la w  ( fara semn )
div b       ; ax=3/b
mov bx,ax   ; bx = ax
mov al,a    
mul a       ; ax = a * a 
add ax,bx   ; ax = ax + bx
;
;
; #### calcul final 
mov bx,ax   ; bx = ax ( rezultatul celei de a 2 a paranteze )
mov ax,cx   ; ax = cx ( rezultatul primei paranteze ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:39:06.747

字转双字？

让我们看看我是否得到你：

字 -> 8 位
双字 -> 16 位

AX、BX、CX 和 DX 是 16 位寄存器，它们由另外两个 8 位寄存器 [ABCD]H 和 [ABCD]L 组成，因此，AX 为：

啊 AL
|0|0|0|0|0|0|0|0| - |0|0|0|0|0|0|0|0|

当您使用 AX 时，您同时使用这两个。因此，如果要将一个字转换为双字，只需清除整个 [ABCD]X 寄存器，然后将您的字移动到 [ABCD]L 寄存器，留下字值 [ABCD]X。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:55:41.560

好吧，最坏的情况是将双字清零，然后将该字复制到双字的较低部分（前 0-x 位/我的汇编器生锈）。我承认可能有更有效的方法来做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:33:08.230

首先，变量的范围是多少？它们都是未签名的（还是其中一些已签名）？

第二，你需要什么样的精度；以及这如何影响由于整数除法的舍入而导致的精度损失？

第三，性能有多重要？内存使用有多重要？

第四，有哪些“CPU 类型”约束？是“仅 8086”（不能使用 32 位寄存器）还是“80386 或更高版本”（可以在 16 位代码中使用 32 位寄存器）？你可以使用浮点数和 FPU 吗？

根据以上所有内容，生成的代码可能如下所示：

```
; Assumes a ranges from 0 to 7
; Assumes b ranges from 1 to 1234
; Assumes 80386 or later
; Note: requires a pre-computed 19728-byte lookup table

    movzx eax,word a
    movzx ebx,word b
    lea eax,[0xFFFFFFF8 + ebx*8+eax]
    mov ax,[myTable + eax*2] 
```

当然，根据上述所有内容，生成的代码也可能完全不同......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:49:06.907

通常它会在 16 位模式下使用 DX:AX 完成。您可以使用 CWD 将 AX 签名扩展为 DX，或者您可以只清除 DX。

# angularjs - AngularJS $resource 自定义标头

> ID：13233483
> 
> 赞同：6
> 
> 时间：2012-11-05T13:51:06.960
> 
> 标签：angularjs, ajax-request

经过几个理解问题后，我遇到了非常困难的问题。我无法让我的自定义标头处理来自 AngularJS 的 $request。我的定义如下所示：

```
$scope.re = $resource('/', {
    callback: 'JSON_CALLBACK'
    }, {
    'updateCart': {
        method: 'POST',
        headers: {
            'module': 'Shop',
            'mod_id': '1',
            'event': 'updateCart'
        }
    }
}); 
```

也在这里[JSFIDDLE](http://jsfiddle.net/Preexo/HwPtn/)

此[问题](https://stackoverflow.com/a/12876784/1011116)是否仍然有效？还有另一种设置自定义标题的方法吗？谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T00:10:40.893

我相信您必须回退到 $http 以获取自定义标头。我也想完成类似的任务，但没有办法使用 $resource 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T11:56:37.810

这篇文章有点旧，但我为像我这样正在寻找答案的其他人回答：

```
return $resource('api/people/:id', {id: '@id'}, {
        min: {
            data: '',
            method: 'GET',
            headers: {'Content-Type': 'application/min+json'},
            isArray: true
        },
        update: {
            method: 'PUT'
        }
    });
```

请不要忘记，`data`否则不会设置标题。

对于像我这样喜欢打字的人，打字稿中的构建器可以按如下方式完成：

```
export class ResourceBuilder {

        static $inject = ['$resource'];

        constructor(private $resource: ng.resource.IResourceService) {
        }

        private updateAction: ng.resource.IActionDescriptor = {
            method: 'PUT',
            isArray: false
        };

        private minAction: any = {
            data: '',
            method: 'GET',
            headers: {'Content-Type': 'application/min+json'},
            isArray: true
        };

        public getResource(url: string, params?: Object): CrudResourceClass<any> {
            let resource = this.$resource(url, params, {
                update: this.updateAction,
                min: this.minAction
            });
            return <CrudResourceClass<any>> resource;
        }
    }
```

`minAction`是类型`any`，因为错过了该`ng.resource.IActionDescriptor`属性，我不知道他们是否忘记了，我将为此打开一个问题。

我希望它有所帮助。

# c# - 项目中视频的存储位置

> ID：13233484
> 
> 赞同：2
> 
> 时间：2012-11-05T13:51:20.080
> 
> 标签：c#, wpf, video, media

我想知道视频（在项目中使用）是否应该存储为资源。如果这是管理此类媒体的好方法，如何使用`MediaElement`来播放这些视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:54:04.483

像往常一样，这取决于。

一些非常短的视频，如 Windows 中的 CopyFile 动画，可以存储为资源。

但对于较大的视频，这不是一个很好的选择。
另一个因素可能是：它们多久改变一次？

通常它们被部署为单独文件夹中的文件。

# python - 观看历史记录提要 gdata python

> ID：13233487
> 
> 赞同：1
> 
> 时间：2012-11-05T13:51:26.170
> 
> 标签：python, youtube, history, gdata, gdata-python-client

我正在尝试使用 python 从 YouTube 获取经过身份验证的用户的历史提要。这是我的代码：

```
yt_service = gdata.youtube.service.YouTubeService()
def LogIn():
  login_name = raw_input('Email:')
  login_pass = getpass.getpass()
  try:
    yt_service.email = login_name
    yt_service.password = login_pass
    yt_service.ProgrammaticLogin()
  except:
    print 'False username or password. Unable to authenticate.'
    exit();

def GetHistoryFeed():
  uri = 'https://gdata.youtube.com/feeds/api/users/default/watch_history?v=2'
  feed = yt_service.GetYouTubeVideoFeed(uri)
  #PrintVideoFeed(yt_service.GetYouTubeVideoFeed(uri),'history')

LogIn()

GetHistoryFeed() 
```

它说 gdata.service.RequestError: {'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'} 。我知道我必须发出经过身份验证的 Get 请求，但我不知道如何。我究竟做错了什么 ？

编辑

我面临一个重大问题。prog 与上面相同，但`yt_service.developer_key = DEVELOPER_KEY` 在密码行下添加了 和 `uri = 'https://gdata.youtube.com/feeds/api/users/default/watch_history?v=2&key=%s'%DEVELOPER_KEY`。我在 4 台 PC 上对其进行了测试，并且只有其中一台可以正常运行。我收到此错误：

`File "/usr/local/lib/python2.6/dist-packages/gdata/youtube/service.py", line 186, in return self.Get(uri, converter=gdata.youtube.YouTubeVideoFeedFromString) File "/usr/local/lib/python2.6/dist-packages/gdata/service.py", line 1108, in Get 'reason': server_response.reason, 'body': result_body} gdata.service.RequestError: {'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'}`

我使用 python 2.7 和 gdata python 2.0 。为什么一台PC执行它而其余的不执行？我能做些什么来解决它？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:05:31.433

当您尝试调用 youtube API 时，您首先需要注册一个新应用程序。参考 - [https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication](https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication)

访问[http://code.google.com/apis/youtube/dashboard/](http://code.google.com/apis/youtube/dashboard/)注册您的应用程序并检索将为您生成的开发者密钥。

此后，无论何时调用 youtube API，都应包含`key`查询参数。（参考 - [https://developers.google.com/youtube/2.0/developers_guide_protocol#Developer_Key](https://developers.google.com/youtube/2.0/developers_guide_protocol#Developer_Key)）

您的实例化`yt_service`将是：-

```
yt_service.developer_key = DEVELOPER_KEY 
```

这`DEVELOPER_KEY`是您在新注册的应用程序仪表板 ( [http://code.google.com/apis/youtube/dashboard/](http://code.google.com/apis/youtube/dashboard/) ) 上获得的那个。

没有这个`DEVELOPER_KEY`，google youtube 将不知道您的 python 脚本是否实际上是一个公认的应用程序，具有适当的访问权限。

# android - getProgress() 不工作

> ID：13233489
> 
> 赞同：0
> 
> 时间：2012-11-05T13:51:34.843
> 
> 标签：android

我试图获取 SeekBar 的值，但它无法正常工作。这是代码：

```
 sb=(SeekBar)findViewById(R.id.seekBar1);
            sb.setMax(100);
            sb.setProgress(20);
            sb.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() 
            {

                public void onStopTrackingTouch(SeekBar arg0) 
                {

                }

                public void onStartTrackingTouch(SeekBar arg0) {

                }

                public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
                {
                    sb.setMax(100);
                    ShakeSilent.this.setTitle((sb.getMax()/sb.getProgress())*100);
                }
            }); 
```

谁能给我一个合理的理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:02:53.737

例如 100 / 50 等于 0.5，但是因为两个值都是 int，result 也转换为 int，所以 0.5 转换为 int 为 0，而 0 * 100 为 0。

你需要把它加倍：

ShakeSilent.this.setTitle((sb.getMax()/(double)sb.getProgress())*100);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T14:24:47.037

我应该在方法中使用 arg0 而不是 sb：

```
ShakeSilent.this.setTitle((((float)arg0.getMax()/(float)arg0.getProgress()))*100); 
```

# sql - 使用“两个数字的幂”作为数据库列的长度

> ID：13233495
> 
> 赞同：0
> 
> 时间：2012-11-05T13:51:57.313
> 
> 标签：sql, database, database-design

我总是尝试使用两个数字的幂来定义我的数据库列的长度，无论是 VARCHAR 还是 CHAR 类型。

通过互联网进行研究并与合作伙伴进行辩论，如果它利用完整的集群使用或类似的东西，我们并没有澄清任何事情，所以问题很简单：

**是否更好地使用两个数字的幂来定义数据库 VARCHAR 和 CHAR 列的长度？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:17:10.833

> 是否更好地使用两个数字的幂来定义数据库 VARCHAR 和 CHAR 列的长度？

不。

CHAR 字段应用于占用相同字符数的代码。例如，CHAR(4) 表示四字符代码列。

由于 VARCHAR 字段仅使用所需的字符数加上长度字节，因此您可以将 VARCHAR 字段设置为数据库的最大长度。例如，VARCHAR(255) 仅使用一个字节作为长度，而 VARCHAR(65535) 将使用两个字节。

根据我们讨论的数据库系统，VARCHAR 的下限可能低于 65,535。行的长度也有限制，以字节为单位。

# c# - 如何使用 api 获取 Facebook 上任何照片的 ID

> ID：13233502
> 
> 赞同：0
> 
> 时间：2012-11-05T13:52:40.730
> 
> 标签：c#, facebook

我想要上传到 Facebook 的任何图片的照片 ID。我有一个 Facebook 用户的访问令牌，对我的 Facebook 应用程序具有适当的权限。我想在我的网站上显示照片（而不是个人资料图片），因为我需要照片 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:00:22.317

当您调用 facebook api 上传照片时，facebook 会返回您上传照片的照片 ID，以便您可以保存/使用相同的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:25:56.630

使用图形 api 获取用户照片，如下所示：

[https://graph.facebook.com/USER_OR_PAGE_ID/photos](https://graph.facebook.com/USER_OR_PAGE_ID/photos)

ID 在响应中。确保您已授予 user_photos 读取权限，否则它将不起作用。 [有关更多信息，请参阅此文档](https://developers.facebook.com/docs/reference/api/photo/)

# php - 如何控制使用`imagettftext()`生成的文本的文本对齐方式？

> ID：13233503
> 
> 赞同：3
> 
> 时间：2012-11-05T13:52:41.130
> 
> 标签：php, gd, imagettftext

使用`imagettftext`PHP GD 库中的函数，只能在图像上绘制左对齐的文本。至少看起来是这样，也许我错过了一些东西。

如何控制绘制到图像上的文本的对齐方式？即左/中/右（/合理 - 不是必需的，但有用）

我应该提到，当绘制的文本包含多行时，对齐是可见的（例如“bla bla bla/nAnd another line of bla.”）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:58:49.867

你不是在[`imagettftext()`](http://php.net/manual/en/function.imagettftext.php)写某种“盒子”，而是在给定的坐标上。要正确对齐文本，您必须计算正确的坐标以使其“看起来像”它是右对齐或居中的。

为此，您可以使用[`imagettfbox()`](http://www.php.net/manual/en/function.imagettfbbox.php)来获取文本的大小 - 剩下的就是简单的数学运算：

*   右对齐添加`[textarea-width]-[textwidth]`到您的`X`- 坐标
*   居中添加`([textarea-width]-[textwidth]) / 2`到您的`X`- 坐标

（* *textarea = 您想在图像中写入文本的区域 - 您应该知道它的大小）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-02T12:52:11.113

您可以使用[stil/gd-text](https://github.com/stil/gd-text)类。免责声明：我是作者。

```
<?php
use GDText\Box;
use GDText\Color;

$img = imagecreatefromjpeg('image.jpg');

$textbox = new Box($img);
$textbox->setFontSize(12);
$textbox->setFontFace('arial.ttf');
$textbox->setFontColor(new Color(255, 255, 255));
$textbox->setBox(
    50,  // distance from left edge
    50,  // distance from top edge
    200, // textbox width
    100  // textbox height
);

// now we have to align the text horizontally and vertically inside the textbox
$textbox->setTextAlign('left', 'top');
// or like this:
// $textbox->setTextAlign('right', 'top');
// $textbox->setTextAlign('center', 'top');
// $textbox->setTextAlign('center', 'bottom');
// $textbox->setTextAlign('right', 'center');

// it accepts multiline text
$textbox->draw("text to write on picture\nanother line below"); 
```

示范：

![演示](../Images/20296a2604c9f9a545b5dc72260c094a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:01:33.153

该函数接受 x 和 y 位置坐标。

```
 array imagettftext ( resource $image, 
                         float $size, 
                         float $angle, 
                         int $x, 
                         int $y, 
                         int $color, 
                         string $fontfile, 
                         string $text ) 
```

看看[http://php.net/manual/en/function.imagettftext.php](http://php.net/manual/en/function.imagettftext.php)

# java - 两条线会在笛卡尔平面上相交吗

> ID：13233504
> 
> 赞同：7
> 
> 时间：2012-11-05T13:52:51.010
> 
> 标签：java, math, floating-point

我在“Crack the Coding Interview”一书中遇到了这个问题。

> 给定笛卡尔平面上的两条线，确定两条线是否相交。

这是解决方案：

```
public class Line {

    static double epsilon = 0.000001;
    public double slope;
    public double yintercept;

    public Line(double s, double y) {
        slope = s;
        yintercept = y;
    }

    public boolean intersect(Line line2) {
        return Math.abs(slope - line2.slope) > epsilon ||
        Math.abs(yintercept - line2.yintercept) < epsilon;
    }
} 
```

为什么它没有简单的解决方案，如果斜率不同，那么它们将相交。为什么 epsilon 和 y 截距。

在建议中它说

> 不要假设斜率和 y 截距是整数。了解浮点表示的局限性。永远不要检查与 的相等性`==`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:00:23.063

“解决方案”是错误的。

此“解决方案”中隐含的概念是，已传递的参数不准确，即在`intersect`调用之前，这些值已经过计算，可能会产生带有舍入误差的结果。因为值中存在错误，所以如果精确计算会相等的数字是不相等的。为了将这些视为相等，此“解决方案”将某些实际上不相等的值视为相等。

这种推理的一个缺陷是`intersect`例程不知道错误可能有多大，因此没有基础知道`epsilon`它应该使用什么值。理想值可能为零，也可能是一百万。鉴于所提供的信息，所使用的值 1e-5 在任何工程原理中都没有依据。不仅如此，没有使用绝对错误的基础，就像这段代码一样。根据具体情况，使用的适当容差可能是相对误差、以 ULP 命名的误差或其他一些技术。根本没有理由相信`true`当传递的参数理想地表示相交线但以某种未知方式计算时，此代码将返回。

另一个缺陷是例程错误地接受不相等的相等值。该例程将报告为不与许多相交的线相交。这段代码并没有解决例程返回错误答案的问题；它只是改变了返回错误答案的情况，并且很可能大大增加了错误答案的数量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T14:05:02.687

首先，如果坡度不同，它们将相交的简单解决方案并不完整。它们可以具有相同的斜率和截距，因此是相同的。

建议所说的 epsilon 是因为计算机中的数字表示不准确。根据[IEEE 标准](http://en.wikipedia.org/wiki/IEEE_754-2008)，一个 double 具有大约 15 个精确计算的数字，因此斜率和截距可能会由于先前的计算而产生舍入误差，因此使用 == 进行简单检查可能会得出它们不相同，而它们仅相差一个舍入误差.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T14:02:30.730

> 为什么它没有简单的解决方案，如果斜率不同，那么它们将相交。为什么 epsilon 和 y 截距。

该解决方案考虑了[浮点](http://en.wikipedia.org/wiki/Floating_point)运算引起的近似误差。由于浮点数并不代表所有可能的实数，而是一个相对较小的子集（在 [-1,+1] 区间中更密集），当您必须处理浮点算术时，通常使用阈值来执行相等检查。

epsilon 值表示一个阈值，在该阈值下 2 个不同的浮点值将被视为相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:12:23.810

在这一切之下，数字在处理时都被转换为二进制。不可能将大多数浮点数表示为精确的二进制数（因为它们将是 1 和 0 的无限序列），因此通过截断二进制序列来进行近似。例如，浮点数 0.1（即：十分之一）不能表示为精确的二进制数，而是用看起来像 0.000110011 的近似值表示……截断这个二进制数会导致潜在的舍入错误，因此确切的相等“==”可能会导致错误的响应，而实际上正是这种舍入误差给出了假阴性。引入 epsilon 试图通过说“低于这个数字的任何东西我们认为为零”来避免这些错误。请参阅“二进制分数”部分[维基百科](http://en.wikipedia.org/wiki/Binary_numeral_system)阅读更多。

# css - 垂直展开 div

> ID：13233507
> 
> 赞同：5
> 
> 时间：2012-11-05T13:52:57.090
> 
> 标签：css, html

我对 div 有简单的问题。我想创建一个覆盖整个屏幕的大 div（“容器”）并将另外两个 div（“A”和“B”）放入其中。“A”的高度为 200 像素，我希望“B”像左边的图片一样覆盖剩余的空间。下面我粘贴了我的代码，但它不能正常工作，因为“B”也在“容器”之外，就像右边的图片一样。有谁知道如何扩展“B”以覆盖“容器”中的剩余空间，如左图所示？我将不胜感激。

![我想得到什么](../Images/f98724e1614424ec9d3ebe349c517343.png) ![我的代码产生的结果](../Images/52b5f8a48fc3c8f6b748d7f0e609eca5.png)

索引.html

```
<html>
<head>
<link rel=stylesheet href="style.css" type="text/css" media=screen>
</head>
<body>
<div id="container">
    <div id="A">text</div>
    <div id="B">text</div>
</div>
</body>
</html> 
```

样式.css

```
#container {
    border-color: blue;
    width: 100%;
    height: 100%;
}

#A {
    border-color: green;
    height: 200px;
    min-height: 200px;
    max-height: 200px;
}

#B {
    border-color: red;
    height: 100%;
    overflow: hidden;
}

#A, #B, #container {
    border-style: solid;
    border-size: 1px;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:09:32.837

您可以像这样使用“冲突绝对定位”技术：

[http://jsfiddle.net/TjArZ/](http://jsfiddle.net/TjArZ/)

```
#container {
  border-color: blue;
  width: 100%;
  position:absolute;
  top:0;
  bottom:0;
}

#A {
  border-color: green;
  height: 200px;
}

#B {
  border-color: red; 
  position:absolute;
  top:204px;
  bottom:0;
  left:0;
  right:0;
}

#A, #B, #container {
  border-style: solid;
  border-width: 4px;   
}​ 
```

基本思想是将 div 拉伸到您指定的坐标。[ALA](http://www.alistapart.com/articles/conflictingabsolutepositions/)的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:06:38.410

尝试：

```
#A {
    border-color: green;
    height: 200px;
    position:relative;
    top:0;left:0;
}

#B {
    border-color: red;
    overflow: hidden;
    position:relative;
    top:200px;left:0;bottom:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:10:21.620

你可以试试这个：

```
#container {
border-color: blue;
width: 100%;
height: auto !important;
height: 100%;
}

#A {
border-color: green;
height: 200px;
min-height: 200px;
max-height: 200px;
}

#B {
border-color: red;
height: 100%;

}

#A, #B, #container {
border-style: solid;
border-size: 1px;   
} 
```

# maven-3 - Maven 不能终生下载 maven-plugin-descriptor-2.0.6

> ID：13233508
> 
> 赞同：1
> 
> 时间：2012-11-05T13:53:01.757
> 
> 标签：maven-3

基本信息：我在 Eclipse Juno 中使用嵌入式 Maven 3.0.4（使用 JBoss 工具）。

settings.xml（直接来自 community.jboss.org/wiki/MavenGettingStarted-Users）：

```
<profile>
    <id>jboss-public-repository</id>
    <repositories>
        <repository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>https://repository.jboss.org/nexus/content/groups/public-jboss</url>
            <layout>default</layout>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>https://repository.jboss.org/nexus/content/groups/public-jboss</url>
            <layout>default</layout>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>
</profile>
<activeProfiles>
    <activeProfile>jboss-public-repository</activeProfile>
    <activeProfile>jboss-deprecated-repository</activeProfile>
</activeProfiles> 
```

注意：我也尝试了 repository.jboss.org/nexus/content/groups/jboss 和 repository.jboss.org/nexus/content/groups/public/，结果相同。

我做了什么：我使用工件 org.jboss.spec.archetypes jboss-javaee6-webapp 从scrath 创建了 Maven 项目。系统尝试下载 repos。除了两个 POM 之外，一切都可以正常下载：

```
maven-plugin-descriptor-2.0.6.pom
plexus-2.0.2.pom 
```

我将专注于 maven-plugin-descriptor，但 plexus 的行为相同。

错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.5:resources (default-resources) on project example: 
Execution default-resources of goal org.apache.maven.plugins:maven-resources-plugin:2.5:resources failed: 
Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: 
Failed to collect dependencies for org.apache.maven.plugins:maven-resources-plugin:jar:2.5 (): 
Failed to read artifact descriptor for org.apache.maven:maven-plugin-descriptor:jar:2.0.6: 
Could not transfer artifact org.apache.maven:maven-plugin-descriptor:pom:2.0.6 from/to central (repo.maven.apache.org/maven2): 
No response received after 60000 -> [Help 1] 
```

repository.jboss.org/nexus/content/groups/public-jboss/org/apache/maven/maven-plugin-descriptor/2.0.6/ 中根本不存在请求的文件（返回 404）。我试图直接在浏览器中访问 repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-descriptor/2.0.6/。文件 maven-plugin-descriptor-2.0.6.pom 存在，但单击后它认为...认为...认为... aaand 连接重置。请注意，许多其他 POM 是从 repo.maven.apache.org 下载的，没有问题。出于某种原因，仅此文件 Just Don't Work(TM)。

其他：我不支持代理。我确实使用了“删除whatever.lastUpdated”的技巧。甚至删除了整个仓库以强制再次下载所有内容。没有工作，当然。

有任何想法吗？或者也许我在错误的树上吠叫并且必须在 settings.xml 中设置一些其他存储库？我的印象是maven试图下载太旧的版本......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:50:42.687

问题解决了。如果有人和我有类似的问题，他必须使用**镜子**。

在 settings.xml 中：

```
<settings>
...
    <mirrors>
        <mirror>
            <id>uk.maven.org</id>
            <mirrorOf>central</mirrorOf>
            <name>UK Central</name>
            <url>http://uk.maven.org/maven2</url>
        </mirror>
    </mirrors>
...
</settings> 
```

# android - 语法错误，插入“;” 完成 ReturnStatement

> ID：13233510
> 
> 赞同：0
> 
> 时间：2012-11-05T13:53:03.767
> 
> 标签：android, syntax

我在“return int i;”行的以下代码中收到错误“语法错误，插入“;”以完成 ReturnStatement”

```
public class RecordActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_record);

    int i = intent.getIntExtra(MainActivity.EXTRA_INDEX, 0);
    int j = i+1;
    final String[]names = getResources().getStringArray(R.array.names);

    final TextView nameView = (TextView) findViewById(R.id.vNames);
    String vName = names[i];
    nameView.setText(vName);

    Button nextButton = (Button) findViewById(R.id.nextButton);
    nextButton.setOnClickListener(new OnClickListener() {
        public static onClickView(View v) {
            i=i+1;
            return int i;
        }
        }
    );
    }
    //...
} 
```

我正在尝试在单击按钮时迭代数组的索引，因此我让 onClick 方法返回索引“i”，以便将其放入循环语句中。我已经检查了所有括号关闭，看不到我会错过“;”的地方。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:58:24.827

将其更改为：

```
public void onClickView(View v) {
    i=i+1;
} 
```

因为返回类型是 void，而不是 int。请参阅：[View.OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:55:43.603

在活动中声明`int i`，然后在`onClick`只是增加它：

```
public class RecordActivity extends Activity {
  int i;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_record);

i = intent.getIntExtra(MainActivity.EXTRA_INDEX, 0);
int j = i+1;
final String[]names = getResources().getStringArray(R.array.names);

final TextView nameView = (TextView) findViewById(R.id.vNames);
String vName = names[i];
nameView.setText(vName);

Button nextButton = (Button) findViewById(R.id.nextButton);
nextButton.setOnClickListener(new OnClickListener() {
    public void onClickView(View v) {
        i=i+1;
    }
    }
);
}
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:56:05.137

我会尝试不重新声明变量，例如：

```
return i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:58:05.063

您是否尝试过更改`return int i;`为`return i;`并将返回类型从更改`void`为`int`？`i`在尝试退货时“重新声明”是没有意义的。

另外，我认为返回类型应该是无效的，所以只需删除返回语句。

# c# - 在 C# 中有效地在目录中搜索关键字

> ID：13233517
> 
> 赞同：4
> 
> 时间：2012-11-05T13:53:23.560
> 
> 标签：c#, file, search, keyword

我试图想出最有效的方法来搜索一个充满文本文件的目录（可能有 2000 个文件，每个文件大约 150 行）以查找关键字。如果我只是搜索一个关键字，那么性能就不是什么大问题，但是在我的应用程序中，我希望能够在以后搜索不同的关键字，可能会搜索多次。因此，每次迭代整个文件集合似乎很耗时。并且将所有内容存储在内存中似乎也相当昂贵。

最好的方法是什么？我无权访问 SQL 数据库或类似的东西，所以我不能暂时将内容转储到数据库中并定期搜索；它只是一个普通的 Windows 应用程序。

我能想到的最原始的方法是将所有文件转储到一个巨大的 XML 文件中并进行搜索——而不是每次发生关键字搜索时都遍历目录中的所有文件。但即使这样似乎也很耗时？

我会提前知道目录名称，所以我可以对内容进行预处理——如果这可能有助于优化的话。

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:56:40.813

为什么不使用从 C# 调用的 cmd 实用程序？

DOS 中的`findstr`实用程序可以满足您的需求，而且效率很高：[http ://technet.microsoft.com/en-us/library/bb490907.aspx](http://technet.microsoft.com/en-us/library/bb490907.aspx)

如何从 C# 调用它：[如何：在 C# 中执行命令行，获取 STD OUT 结果](https://stackoverflow.com/questions/206323/how-to-execute-command-line-in-c-get-std-out-results)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:16:13.550

正如“LB”所说，您可以使用 Lucene.net 创建倒排索引。它是来自 java 库的 .Net 实现。[apache.org 上的 Lucene](http://lucenenet.apache.org/)

[这](http://codeclimber.net.nz/archive/2009/09/02/lucene.net-your-first-application.aspx)是一个如何做的小例子。

# .net - SubmitChanges() 紧跟存储过程

> ID：13233520
> 
> 赞同：2
> 
> 时间：2012-11-05T13:53:38.263
> 
> 标签：.net, linq

当我在 a 之后执行存储过程时，存储过程在完成`SubmitChanges()`之前执行`SubmitChanges()`。

该功能应该从另一台服务器迁移数据（因此有很多插入正在进行）。首先，我调用一个存储过程来禁用给定表上的触发器，然后执行插入操作，然后再次启用触发器。

代码如下所示：

```
dc.DisableTriggers();    //Stored procedure (works fine)
//... Procedure to insert all the data in the DataContext
dc.MyClass.InsertOnSubmit(myClass);
//...
dc.SubmitChanges();      //All the data is inserted into tables.
dc.EnableTriggers();     //Stored procedure (triggers are enabled before the end of all inserts)). 
```

存储过程：

```
//DisableTriggers
Disable trigger [triggerName] on tableName;    //Disabling on 5 tables

//EnableTriggers
Enable trigger [triggerName] on tableName;     //same tables as DisableTriggers 
```

如果我在重新启动之前放置一个断点`SubmitChanges()`并等待一秒钟，那么一切正常。

如果我在 之后设置计时器`SubmitChanges()`，则在所有插入结束之前启用触发器。

我做了一些测试，如果我绑定`SubmitChanges()`一个按钮和`dc.EnableTriggers()`另一个按钮，一切正常。

不幸的是，我需要它全部自动化。

我正在使用 C# .net 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:05:03.317

您需要将调用该过程的代码放在“提交完成”事件处理程序中。

提交是一个异步操作，这就是为什么如果您`EnableTriggers`直接调用它会失败`SubmitChanges`但如果您等待则成功的原因。

使用 RIAServices，您可以`callback`将[`SubmitChanges`](http://msdn.microsoft.com/en-us/library/ff423067%28v=vs.91%29.aspx). 一旦提交完成，就会调用它。你可以把你的电话`EnableTriggers`放到这个回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:59:11.867

客户不想在此花费更多时间，并接受了按钮上的 SubmitChanges() 和另一个按钮上的 dc.EnableTriggers()。

请随意发布此问题的真实答案，如果有正确的答案，我会将其标记为真实答案。

# android - 自 Android 4 ICS 以来的 Android Audiotrack 点击噪音

> ID：13233522
> 
> 赞同：4
> 
> 时间：2012-11-05T13:53:40.493
> 
> 标签：android, android-4.0-ice-cream-sandwich, audiotrack

我的应用程序中还集成了一个钢琴键盘。**在使用 设置播放**速率时，我遇到了音轨问题`setPlayBackRate(...)`。为了在键盘上获得下一个半音，我使用以下公式更改播放速率：

```
int playbackRate = (int) (Math.pow(2.0, (1.0/12.0)) * 44100);

audioTrack.setPlaybackRate(playbackRate); 
```

这在`Android 2.2.1`和上运行良好`2.3.5`，但在`4.0/4.1.2`（Galaxy Nexus）上播放声音时我会听到咔哒声。

任何想法如何解决这个问题？

提前致谢

# java - 如何使用 Java 在 TOMCAT 中创建目录？

> ID：13233523
> 
> 赞同：0
> 
> 时间：2012-11-05T13:53:41.750
> 
> 标签：java, tomcat, servlets, mkdir, create-directory

我在尝试在我的 servlet 应用程序中创建一个目录来保存音频文件时遇到了麻烦。当我尝试在根目录中创建它时： (C:/something) 我没有问题，但是当我尝试在 tomcat 路径中创建它时，我不能。有谁知道为什么？这是我的代码（我必须通过帖子传递目标路径，但我首先尝试使用先前设置的路径）。

```
public void doPost(HttpServletRequest request, 
                    HttpServletResponse response) throws ServletException, IOException
{
    PrintWriter out = response.getWriter();
    out.println("<HTML><HEAD></HEAD><BODY>");
    //nombreFichero = request.getParameter("nombreArchivo");
    //Ruta = request.getParameter("Destino");
    String destino = request.getParameter("Destino");
    String ruta2 = request.getContextPath();
    ruta2 += "/InformesAudio/";
    out.println("<P>Ruta para guardar: <B>" + destino + "</B></P>");
    out.println("<P>Ruta armada: <B>" + ruta2 + "</B></P>");

    File crearCarpeta = new File(destino);
    if(!crearCarpeta.exists())
    {
        crearCarpeta.mkdir();
        out.println("<P>La ruta de getContextPath modificada es: </P><P>" + destino + "</P>"
                    + "<P>CARPETA CREADA EXITOSAMENTE</P>");
    } 
```

感谢帮助的小伙伴！！祝你今天过得愉快！！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:17:24.507

我知道了：

`

```
 public static String WEBAPP_ROOT;
    /**
    *       Initialize the servlet and set up some static variables :<br>
    */
    public void init() {
            WEBAPP_ROOT = getServletContext().getRealPath("/");
    }` 
```

然后你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:58:49.853

试试这个.. 获取应用程序根目录，然后连接目标位置。还可以尝试使用 mkdirs() 而不是 mkdir()。如果不存在，它将创建父目录

```
File parent_dirs = new File(applicationRoot + destinationLoc);
if(!parent_dirs.exists()){
  parent_dirs.mkdirs();
} 
```

# ios - 使用 Coreplot 绘制数据

> ID：13233525
> 
> 赞同：0
> 
> 时间：2012-11-05T13:53:47.157
> 
> 标签：ios, graph, nsarray, nsdictionary, core-plot

我正在使用 Coreplot，我需要帮助在图表上绘制数据。

我用字典数据填充了一个名为***results的数组。***其内容的输出如下（为了简单起见，我缩短了数据） -

```
{
   temperature = "5.0832667,5.2916833,4.6418246"; 
   windspeed = "2.333,2.521,2.021,1.833,1.292,1.167";
} 
```

我无法使用方法***numberForPlot***获取此数据进行绘图。这是我到目前为止所做的。以下是仅绘制“温度”数据的尝试 -

```
-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index;

        return [results valueForKey:@"temperature"];
{ 
```

我猜这与我创建字典的方式有关，因为它们是字符串，并且需要 NSNumbers？作为附加说明，这是创建字典的代码 -

```
for(counter = 0; counter < [node childCount]; counter++) {

    [item setObject:[[node childAtIndex:counter] stringValue] forKey:[[node childAtIndex:counter] name]];

}

[results addObject:item]; 
```

任何帮助将不胜感激，因为我已经尝试了好几天了！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:35:10.637

每种绘图类型使用不同的“字段”来请求绘图数据。例如，散点图用于`CPTScatterPlotFieldX`请求 x 值和`CPTScatterPlotFieldY`请求 y 值。

该`-numberOfRecordsForPlot:`方法告诉 Core Plot 有多少数据点可用于绘图。该`-numberForPlot:field:recordIndex:`方法将使用 0 到 (n - 1) 范围内的每个索引的每个字段值调用一次。

Core Plot 包含许多示例应用程序。查看其中任何一个以了解如何设置数据源。

# javascript - 类型不匹配; 发现：需要一些[String]：play.api.templates.Html

> ID：13233526
> 
> 赞同：1
> 
> 时间：2012-11-05T13:53:48.350
> 
> 标签：javascript, scala, playframework, type-mismatch

我是 scala 和 Java Play 的新手。我正在查看一个看起来像这样的代码，但我收到了上述错误。尽管添加了花括号等，但我无法解决此问题。非常感谢任何帮助。抱歉，我忘了提到错误出现在@main 中。即使我用 @main(username) 替换 Some(username) 也没有喘息的机会。路线 这是相关代码的外观

配置/路由

```
GET     /Login                controllers.Application.Login(username:String) 
```

app/view/Login.scala.html 看起来像这样

```
@(username: String)(implicit request: RequestHeader)

@main(Some(username)) {

<div class="page-header">
    <h1>Login <small>You are Logging in as @username</small></h1>
</div>

<div id="onError" class="alert-message error">
    <p>
        <strong>Oops!</strong> <span></span>
    </p>
</div>

<script type="text/javascript" charset="utf-8">

    $(function() {

        var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
        var loginSocket = new WS("@routes.Application.UserLogin(username).webSocketURL()")

        var receiveEvent = function(event) {
            var data = JSON.parse(event.data)

            // Handle errors
            if(data.error) {
                loginSocket.close()
                $("#onError span").text(data.error)
                $("#onError").show()
                return
            } else {
                $("#onChat").show()
            }

        }

    })

</script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:40:03.597

根据错误消息，您提供`Some[String]`了`play.api.templates.Html`预期的位置。根据您提供的代码，最有可能的候选人是：

```
@main(Some(username)) { 
```

基于此，我将其替换为：

```
@main(Html(username)) { 
```

假设*主视图*的第一个参数是 type `Html`。

# java - jsf & hibernate 集成 - 来自数据库的选择列表值

> ID：13233529
> 
> 赞同：0
> 
> 时间：2012-11-05T13:53:55.033
> 
> 标签：java, hibernate, jsf, primefaces

我是 hibernate 和 jsf 技术的新手，我试图有一个从数据库中检索和更新（如果用户更改其值）值的选择列表。

我的数据库架构如下：

我有两个表（实体）CRImageType(ImTypeId(PK),ImTypeName,ImTypeDescription) 和 CRVariable(VarId(PK),VarName,VarDescription)，它们通过在我的 Hibernate 数据模型中实现的表 'imtype_variable' 具有多对多关系。

该模型似乎工作正常。我还可以使用 jsf 元素（带有插入、编辑和删除按钮的数据表 + 相应的对话框 + bean 类）来读取和写入表 CRVariable 和 CRImageType。

**我还希望有一个选择列表**，以便能够将 CRImageType 与 CRVariable 记录相关联。我的业务场景是能够将图像类型与一个或多个变量（医学术语）重新关联，因此我使用的是 jsf 选项列表：

```
<p:dialog id="dialog-associatevariables" header="Associate Variables" widgetVar="dlg7"     dynamic="true" showEffect="fade">
<h:panelGrid id="associateVariables" columns="1" cellpadding="4">
<p:pickList id="pickList" 
                value="#{reportConfiguratorBean.getAssocImTypVariables(reportConfiguratorBean.selectedCRImageType.imTypeId)}"
                var="cRVariable" 
                itemValue="#{cRVariable}" 
                itemLabel="#{cRVariable.varName}">
    <f:facet name="sourceCaption">Available Variables</f:facet>
        <f:facet name="targetCaption">Associated Variables</f:facet>
</p:pickList>
</h:panelGrid>  
</p:dialog> 
```

在我的“reportConfigurator”backbean 中，我实现了以下方法来填充选择列表（按照在线 primefaces 演示）：

```
@SuppressWarnings("unchecked")
public DualListModel<CRVariable> getAssocImTypVariables(Long imTypeId)     {

List<CRVariable> source1;
List<CRVariable> target;
...         
String hq3 = "select distinct v from CRVariable v join v.crimagetypes t where t.id in (:itid)";
Query query3 = session.createQuery(hq3);
query3.setParameter("itid",imTypeId);
target = query3.list();
System.out.println("Associated Variables with Id: " + target);          
String hq4 = "select v FROM CRVariable v WHERE v.id not in (" +
            "select distinct v1.id " +
            "from CRVariable v1 " +
            "join v1.crimagetypes t2 " +
            "where t2.id in (:itid))";
Query query4 = session.createQuery(hq4);
query4.setParameter("itid",imTypeId);
source = query4.list();
System.out.println("Non Associated Variables with Id: " + source);
String hq5 = "FROM CRVariable";
Query query5 = session.createQuery(hq5);
source1 = query5.list();
System.out.println("Non Associated Variables with Id: " + source1);         
dualListVars = new DualListModel<CRVariable>(source1, target);          
System.out.println("Dual List Model: " + dualListVars);
...
{
session.close();
}
return dualListVars;
} 
```

Back bean 方法 '' 似乎工作正常，因为在我的控制台中填充了正确的列表项对象（源 1 和目标），它返回一个双列表模型对象，如下行所示（控制台输出）：

```
Associated ImageType with Id: 26
...
Associated Variables with Id: [varId : 75, varName : Ki67(X), varDescription : Ki67(X)]
Non Associated Variables with Id: [varId : 71, varName : ER (X), varDescription : ER (X), varId : 72, varName : HER2(X), varDescription : HER2(X), varId : 73, varName : IHC, varDescription : IHC, varId : 74, varName : FISH, varDescription : FISH, varId : 76, varName : PTEN(X), varDescription : PTEN(X), varId : 77, varName : Histology (X), varDescription : Histology (X)]
...
Non Associated Variables with Id: [varId : 71, varName : ER (X), varDescription : ER (X), varId : 72, varName : HER2(X), varDescription : HER2(X), varId : 73, varName : IHC, varDescription : IHC, varId : 74, varName : FISH, varDescription : FISH, varId : 75, varName : Ki67(X), varDescription : Ki67(X), varId : 76, varName : PTEN(X), varDescription : PTEN(X), varId : 77, varName : Histology (X), varDescription : Histology (X)]
... 
```

Τ他的问题是**当我调用选项列表对话框时，选项列表列没有正确填充......

经过一些调试/研究后，我认为这与我调用我的选择列表方法“reportConfiguratorBean.getAssocImTypVariables(...)”的方式有关。

如果我使用**“reportConfiguratorBean.selectedCRImageType.imTypeId”作为方法参数**，它会**在 backbean 中作为零值**传递！！！

如果我硬编码一个**整数作为参数，例如 25**，**选择列表会正确填充，**但在控制台中我可以看到以下异常：

```
ERROR class java.lang.IllegalArgumentException: can't parse argument number reportConfiguratorBean.getAssocImTypVariables(25): javax.el.PropertyNotWritableException: /views/report-configurator.xhtml @271,10 value="#{reportConfiguratorBean.getAssocImTypVariables(25)}": Illegal Syntax for Set Operation 
```

关于我错过了什么的任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:22:08.450

经过一些研究和调试后，我的选择列表组件似乎无法接受 (value="#{reportConfiguratorBean.getAssocImTypVariables(reportConfiguratorBean.selectedCRImageType.imTypeId)}") 需要传递参数的方法......我重新实现了“ " 方法（我的后台 bean 现在是 Session 范围的）为：

```
public DualListModel<CRVariable> getAssocImTypVariables() {
    Long imTypeId = Long.parseLong(virtualId);
... 
```

我的选择列表已填充...

其中 virtualId 是一个全局字符串变量，填充了 selectedItem Id ...

# mongodb - MongoDB聚合数组

> ID：13233534
> 
> 赞同：2
> 
> 时间：2012-11-05T13:54:03.233
> 
> 标签：mongodb, pymongo

假设我有一个 MongoDB 集合，其中包含以下文档——</p>

```
{
  "name": "Hawaiian",
  "toppings": ['cheese', 'ham', 'pineapple'],
} 
```

我怎样才能得到所有收藏品的清单`toppings`？

我假设我必须使用 MapReduce 或新的聚合框架（最好是 MapReduce，因为我不能使用新的聚合框架），但我不知道该怎么做。

谢谢！

**编辑**：而且，有没有办法在数据库级别计算不同浇头的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:58:23.120

MongoDB 支持[DISTINCT](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)聚合。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:59:00.557

您可以为此使用[`distinct`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.distinct)查询：

```
db.coll.distinct('toppings') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:26:40.213

distinct 将适用于有限数量的独特项目（<=50k？）

## 如果不止于此，您必须使用 mapreduce

fun_map ="""function () for (e in this.toppings) { emit (entities.toppings[e],1); } """

fun_reduce = """function (key, values) {var total = 0; for (var i = 0; i < values.length; i++) { total += values[i]; } return total;}""" then你打电话

## collection.map_reduce(fun_map,fun_reduce,out={"replace":'your_outputcollection_name"}, full_response=True)

您的浇头项目将是您的输出集合的_id，而值将代表每个颗粒浇头的计数

# gdb - 使用 GDB 调试源文件（及其本地函数）而不进入库调用？

> ID：13233540
> 
> 赞同：0
> 
> 时间：2012-11-05T13:54:30.697
> 
> 标签：gdb

我想调试一个程序，但我不希望 GDB 打印它访问的代码超出我的本地源文件范围。在这种情况下，选项***步骤***（进入每个调用）和***下一步***（即使在同一个源文件中也跳过进入函数）没有用。

有相同的点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T09:13:45.263

您可以查看我对 GDB 是否有“step-to-next-call”指令的回答 [？](https://stackoverflow.com/questions/34621532/does-gdb-have-a-step-to-next-call-instruction/34672420#34672420) ：没有本机 GDB 命令（据我所知，他们可能已经解决了这个问题），但在 Python 中很容易做到：

```
import gdb

class StepNoLibrary (gdb.Command):
    def __init__ (self):
        super (StepNoLibrary, self).__init__ ("step-no-library",
                                              gdb.COMMAND_OBSCURE)

    def invoke (self, arg, from_tty):
        step_msg = gdb.execute("step", to_string=True)

        fname = gdb.newest_frame().function().symtab.objfile.filename

        if fname.startswith("/usr"):
            # inside a library
            SILENT=False
            gdb.execute("finish", to_string=SILENT)
        else:
            # inside the application
            print(step_msg[:-1])

    StepNoLibrary() 
```

只需将它放在一个文件中，使用 GDB（或在您的 .gdbinit 中）获取它，这将为您提供新命令`step-no-library`。

很容易阅读它所做的事情，它会`step`向前推进，如果该步骤以存储在 中的文件结束`/usr/*`，它`finish`会返回到应用程序。

当然这是一个幼稚的实现，如果您的要求与此不同，只需编辑功能代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:01:31.927

也许尝试使用 DDD（数据显示调试器）。提醒了很多关于 gdb

输入：

```
ddd --gdb 
```

然后

```
g++ -O0 -g -o main main.cpp 
```

希望它可能会有所帮助

# c# - 将 WCF 服务添加到网站项目

> ID：13233541
> 
> 赞同：2
> 
> 时间：2012-11-05T13:54:31.783
> 
> 标签：c#, asp.net, wcf

我有一个 asp.net 网站，它可以访问数据库并具有我希望允许 3rd 方用户使用的功能。

是否可以将 WCF 项目/ WCF 服务添加到我的解决方案中，以便我可以让第 3 方成员访问我的方法？

我们尝试了 myWebsite->Add New Item-> Wcf 服务/wcf 数据服务，但这似乎不起作用。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:03:06.600

它不起作用，因为您正在尝试添加对现有服务的引用以使用它。你想要的恰恰相反。

为此，您必须在解决方案中创建一个 WCF 服务类型的单独项目。

可以在[MSDN](http://msdn.microsoft.com/en-us/library/bb386386.aspx)上找到有关创建 WCF 服务的更多信息。

请记住，如果您想通过服务公开某些功能，则必须将网站的功能分解到 WCF 服务和网站都可以使用的另一个项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:00:53.823

您应该能够从解决方案资源管理器中的解决方案根目录添加新的 WCF 服务项目...

右键单击>>添加>>新建项目

不过，您的问题尚不清楚什么“不起作用”。

您新添加的项目将需要引用包含您要访问的方法的现有项目。您也许应该考虑您当前的设计是否合适 - 确保您已将演示代码（这应该是您的网站项目）与您想要共享的常见业务功能分开（我会将其作为单独的类库项目解决方案）。然后，您的 WCF 项目可以引用通用的“业务逻辑”项目。

要从 WCF 项目中引用您的“业务逻辑”项目...

右键单击（在 WCF 项目上）>> 添加引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:22:20.967

不确定什么“不起作用”，但 MSDN 提供了在此处向网站添加 WCF 服务的演练：

[如何：在 IIS 中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733766.aspx)

这一步一步地创建 WCF（标记和代码）并`web.config`手动添加相关条目，而不是使用“添加服务”对话框。

如果您在解决方案中创建一个单独的项目来运行您的服务，您将需要使用`Add Reference`新服务项目上的选项来引用您现有的网站项目。这将允许您在新服务项目中使用现有项目中定义的类和函数。

# python - 如何提取之间的文本?

> ID：13233548
> 
> 赞同：-2
> 
> 时间：2012-11-05T13:54:52.967
> 
> 标签：python, tags, beautifulsoup

我正在使用 Beautiful Soup，但不知道该怎么做。

```
</td>
        <td class="playbuttonCell">
        <a class="playbutton preview-track" href="/music/example" data-analytics-redirect="false"  ><img class="transparent_png play_icon" width="13" height="13" alt="Play" src="http://cdn.last.fm/flatness/preview/play_indicator.png" style="" /></a>    </td>
                                                        <td class="subjectCell" title="example, played 3 times">
            <div>
                                        <a href="/music/example"   >here lies the text i need</a> 
```

这不是在做这项工作

```
print soup('a')

for link in soup('a'):
    print html 
```

打印所有内容，我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:00:48.097

```
import urllib
from bs4 import BeautifulSoup

html = urllib.urlopen('http://www.last.fm/user/Jehl/charts?rangetype=overall&subtype=artists').read()
soup = BeautifulSoup(html)
print soup('a')
# prints [<a href="/" id="lastfmLogo">Last.fm</a>, <a class="nav-link" href="/music">Music</a>.... 
```

用于获取每个人的文本。

```
for link in soup('a'):
    print link.get_text() 
```

# python - 编写我的第一个 Trac 宏

> ID：13233562
> 
> 赞同：0
> 
> 时间：2012-11-05T13:55:32.100
> 
> 标签：python, macros, trac

好的，我已经看了一遍，我*认为*我做对了，但我没有得到任何结果。有没有人写过 Trac 宏来指导我完成第一步？这是我写的：

```
from trac.wiki.macros import WikiMacroBase
from genshi.builder import tag

class MyMacro(WikiMacroBase):
    """Proof of concept"""

    revision = "$Rev$"
    url = "$URL$"

    def expand_macro(self, formatter, name, args):
        return tag.b("Hello world.") 
```

我已将其保存为 .py 文件并将其放在我的 Trac 项目的 /plugins 目录中。我需要重新启动apache吗？我期望`[[MyMacro]]`输出一个**Hello 世界是否正确。**在页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:27:27.927

使用该格式创建宏时，Trac 期望您的类被命名为“ `<name>Macro`”。例如，如果您想要一个名为 的宏`JustASample`，您可以将类命名为`JustASampleMacro`。由于您命名了您的类`MyMacro`，Trac 认为您希望您的宏被命名`My`。尝试`[[My]]`在 wiki 页面上使用，看看是否得到了预期的输出。

将文件复制到插件目录后，您确实需要重新启动 Web 服务器。在此之前，请删除`.pyc`为您的插件创建的所有文件。此外，请确保该文件可由运行 Web 服务器的帐户读取。

# html - 使用 jsf 或 richfaces 在选项卡中加载链接的内容

> ID：13233578
> 
> 赞同：0
> 
> 时间：2012-11-05T13:56:28.323
> 
> 标签：html, url, jsf, richfaces, richfaces-modal

我有一个 jsf 选项卡式页面。如何在选项卡中加载链接以实现类似于 html 中的页框的功能。我想知道 jsf 和 richfaces 中的这两个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:57:52.350

您可以使用`<ui:include`标签在选项卡内加载另一个页面。

**xmlns:ui="http://java.sun.com/jsf/facelets**

> `<rich:tabPanel>`
>      `<rich:tab>`
>          `<ui:include src="/result_page.xhtml" />`
>      `</rich:tab>`
> `</rich:tabPanel>`

# jquery - 根据输入值更新 iframe src

> ID：13233579
> 
> 赞同：4
> 
> 时间：2012-11-05T13:56:28.563
> 
> 标签：jquery

我正在尝试根据文本输入字段进行 iframe 更改。

我想附加到用户将输入的 url 的字符串位于 url 的中间。

已经尝试但不太确定如何正确定义它

```
<script>

$("#search").click(function(e) {
        e.preventDefault();
 var url = "http://www2.sdfsdf.com/admin/agent_order_srch_ordet.asp?action=searchStrPostcode&idOrder=" $('#search').val(); "&Submit=Search";
        $("#someFrame").attr("src", url;
    })
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:00:36.490

您的 url 变量中有一个复制粘贴错误。这是更正的版本。我使用普通的 javascript 版本来更改 url。

```
<script>

$("#search").click(function(e) {
    e.preventDefault();
    var url = "http://www2.sdfsdf.com/admin/agent_order_srch_ordet.asp?action=searchStrPostcode&idOrder=" + $('#search').val() + "&Submit=Search";
    $("#someFrame").get(0).src = url;
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:59:11.910

尝试这个：

```
$("#search").click(function(e) {
    e.preventDefault();
    var url = "http://www2.sdfsdf.com/admin/agent_order_srch_ordet.asp?action=searchStrPostcode&idOrder=" + $(this).val() + "&Submit=Search";
    $("#someFrame").attr("src", url);
}) 
```

请注意，该`+`字符用于将字符串值连接在一起。

# android - 替换后使用片段进行 UI 测试

> ID：13233582
> 
> 赞同：2
> 
> 时间：2012-11-05T13:56:42.327
> 
> 标签：android, testing, fragment

我有一个包含多个片段的应用程序，这些片段由一个 Activity 管理。我的问题是我想测试应用程序并测试每个片段的 UI。我可以测试第一个片段并获得它的所有视图，但是当我单击按钮或其他东西（用另一个片段替换片段）时，我无法获得新片段的任何视图，但我的 MainActivity 说当前的 Fragment 是新的 Fragment。

```
@UiThreadTest
public void testNewFragmentScrollView() {
    assertTrue(mActivity.getFragmentType().equals(FragmentTypes.FRAGMENT_STARTSCREEN));
    ivNewFragment.performClick(); // replace fragment
    sleep();
    assertTrue(mActivity.getFragmentType().equals(FragmentTypes.FRAGMENT_NEW));
    //get something from new fragment, ID is copied from xml file and not false
    ScrollView scrollView = (ScrollView) mActivity.findViewById(R.id.sv_fragment_new_scrollable);    
    assertTrue(scrollView != null); //#false???
    mActivity.finish();
} 
```

我是否必须更新我的测试类中的某些内容，或者为什么我没有从新片段中获得任何视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:15:59.843

好的，我通过拆分代码解决了我的问题。当我在 setUp 中更改 Fragment 并等待几毫秒时，我可以从每个测试方法中的新 Fragment 获取所有视图

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    setActivityInitialTouchMode(false);
    mActivity = getActivity();
    buNewFragment =(Button) mActivity.findViewById(R.id.bu_actionbar_newfragment);
    mActivity.runOnUiThread(new Runnable() {
        public void run() {
            buNewFragment .performClick();
        }
    });
    sleep(500);//simple Thread.sleep() method
}

@UiThreadTest
public void testNewFragmentScrollView() {
    assertTrue(mActivity.getFragmentType().equals(FragmentTypes.FRAGMENT_NEW));
    ScrollView scrollView = (ScrollView) mActivity.findViewById(R.id.sv_fragment_new_scrollable);
    assertTrue(scrollView != null); //#t
} 
```

# java - 获取android登录的google账号

> ID：13233583
> 
> 赞同：2
> 
> 时间：2012-11-05T13:56:44.907
> 
> 标签：java, android

我想知道如何通过代码获取当前在 android 手机上登录的 google 帐户。

我知道[如何在 Android 手机上检索已登录的 Google 帐户？](https://stackoverflow.com/questions/4038333/how-do-i-retrieve-the-logged-in-google-account-on-android-phones). 但是，在这个问题中，手机上的所有可用帐户都会被检索到。如何区分已登录的？

# string - 检查一个句子是否在 pl/pgsql 中的字符串中

> ID：13233585
> 
> 赞同：1
> 
> 时间：2012-11-05T13:56:57.967
> 
> 标签：string, postgresql, plpgsql

我有一个 pl/pgsql 脚本，它需要检查一个单词/句子是否在一个字符串中，它必须注意单词边界，并且不区分大小写。

例子：

*   字符串：“我的标签 xx zz yy”，模式：“我的标签”，MATCH
*   字符串：“xx 我的标签 zz”，模式：“我的标签”，MATCH
*   字符串：“我的标签xx zz”，模式：“我的标签”，不匹配

所以显而易见的解决方案是使用正则表达式，如下所示：

```
select _label ~* (E'\\y' || _pattern || E'\\y') into _match; 
```

与简单的相比，它可以工作但速度很慢

```
select _label ilike '%' || _pattern || '%' into _match; 
```

这包含在一个函数中，我的脚本调用了 A LOT（数千万，我做了很多递归），并且由于这个要求，整体运行时间翻了一番。

现在我的问题是，有没有更快的方法来实现这个？

谢谢。

编辑：最终使用了这个：

```
if _label ilike '%' || _pattern || '%' then
    select _label ~* (E'\\m' || _pattern || E'\\M') into _match;
end if; 
```

而且速度明显更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:32:33.973

我会考虑[全文搜索](http://www.postgresql.org/docs/current/static/textsearch.html)功能，但根据您的描述，我可能会使用 PostgreSQL [arrays](http://www.postgresql.org/docs/current/static/arrays.html)来实现这一点。

首先：定义一个函数，它接受一个标签，将其小写（如果您愿意，也可以大写），在单词边界上拆分它，然后返回一个数组。说：

```
CREATE OR REPLACE FUNCTION label_to_array(text) RETURNS text[] AS $$
SELECT regexp_split_to_array(lower($1), E'\\W');
$$ LANGUAGE sql IMMUTABLE;

$ select label_to_array('my label xx zz yy');
   label_to_array    
---------------------
 {my,label,xx,zz,yy} 
```

现在，在这个函数上创建一个[GIN 索引：](http://www.postgresql.org/docs/current/static/gin-intro.html)

```
CREATE INDEX sometable_label_array_key ON sometable
 USING GIN((label_to_array(label)); 
```

从这里开始，PostgreSQL 可以将此索引用于许多涉及[数组运算符](http://www.postgresql.org/docs/current/static/functions-array.html)的查询，例如“包含”：

```
SELECT *
FROM sometable
WHERE label_to_array(label) @> label_to_array('my label'); 
```

此查询将拆分`'my label'`为`{my,label}`，然后使用索引查找包含 的行列表，`my`将其与包含 的行列表相交，`label`然后返回结果。这并不完全等同于您的原始查询（因为它不检查它们的顺序），但由于它使用索引来消除表中的大部分行，所以在最后添加原始检查就可以了：

```
SELECT *
FROM sometable
WHERE label_to_array(label) <@ label_to_array('my label')
AND label ~* (E'\\y' || 'my label' || E'\\y'); 
```

# java - 在 Java 中解析 Json 对象

> ID：13233586
> 
> 赞同：2
> 
> 时间：2012-11-05T13:57:03.847
> 
> 标签：java, json, gson, redmine

我是 JSON 新手，我真的很难用 Java 中的 GSON 解析这个布局

```
{"time_entries":
[
    {"hours":1.0,
    "id":311,
    "created_on":"2012-11-02T14:53:38Z",
    "user":{"id":7,"name":"blah"},
    "issue":{"id":266},
    "activity":{"id":10,"name":"blah"},
    "updated_on":"2012-11-02T14:53:38Z",
    "comments":"blah",
    "spent_on":"2012-11-02",
    "project":{"id":10,"name":"blah"}},

    {"hours":6.0,
    "id":310,
    "created_on":"2012-11-02T13:49:24Z",
    "user":{"id":4,"name":"blah"},
    "issue":{"id":258},
    "activity":{"id":9,"name":"blah"},
    "updated_on":"2012-11-02T13:49:24Z",
    "comments":"blah",
    "spent_on":"2012-11-02",
    "project":{"id":11,"name":"blah"
    }}
],
"offset":0,
"limit":2,
    "total_count":306
} 
```

如果它有帮助，那就是[Redmine API 为您提供时间条目的输出。](http://www.redmine.org/projects/redmine/wiki/Rest_TimeEntries) 我正在努力理解一些基本的 JSON 概念，如对象和数组，但我无法找到一个布局与此类似的示例。

在使用我读过的教程时，我主要担心的是多个 ID 字段会混淆。

解析这个而不会让自己陷入困境的最佳方法是什么？

我不打算使用 Gson，我很乐意使用 Jackson 或内置库的解决方案。最终目标是 Android 实现，所以我更喜欢使用序列化。

谢谢

**编辑：**

我对“对象模型”的尝试

```
public class TimeResponse {
     public List<Time_Entry> time_entries;

        @SerializedName("hours")
        public String hours;

        @SerializedName("id")
        public int id;

        @SerializedName("created_on")
        public String created_on;

        @SerializedName("name")
        public String name;

        @SerializedName("updated_on")
        public int updated_on;

        public int page;

        @SerializedName("comments")
        public double comments;

        @SerializedName("spent_on")
        public String spent_on;

        @SerializedName("offset")
        public String offset;

        @SerializedName("limit")
        public String limit;

        @SerializedName("total_count")
        public String total_count;

} 
```

我不确定我应该为我的结果列表写什么（如果我需要的话）并且我只声明了一次 id 和 name 字符串，尽管它被多次使用？

我知道我不应该在我的时间里使用字符串我正在研究小时字段实际包含的内容。我相信本教程有点过时了，因为最后三个字段现在在 Twitter API 中的表示方式不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:59:51.250

我不确定您所说的“多个 ID 字段”是什么意思。JSON 中没有 ID 之类的东西。

关于基本 JSON 概念，请参阅[http://json.org/](http://json.org/)：

**目的：**

> 对象是一组无序的名称/值对。对象以 {（左大括号）开始，以 }（右大括号）结束。每个名称后跟 :（冒号），名称/值对用 ,（逗号）分隔。

**大批：**

> 数组是值的有序集合。数组以 [（左括号）开头，以 ]（右括号）结尾。值用 ,（逗号）分隔。

**价值：**

> 值可以是双引号中的字符串、数字、true 或 false 或 null，也可以是对象或数组。这些结构可以嵌套。

**细绳：**

> 字符串是零个或多个 Unicode 字符的序列，用双引号括起来，使用反斜杠转义。字符表示为单个字符串。字符串与 C 或 Java 字符串非常相似。

**数字：**

> 数字与 C 或 Java 数字非常相似，只是不使用八进制和十六进制格式。

**编辑：**

除了漂亮地打印它之外，您无法从问题中简化 JSON：

```
{
    "time_entries": [
        {
            "hours": 1,
            "id": 311,
            "created_on": "2012-11-02T14:53:38Z",
            "user": {
                "id": 7,
                "name": "blah"
            },
            "issue": {
                "id": 266
            },
            "activity": {
                "id": 10,
                "name": "blah"
            },
            "updated_on": "2012-11-02T14:53:38Z",
            "comments": "blah",
            "spent_on": "2012-11-02",
            "project": {
                "id": 10,
                "name": "blah"
            }
        },
        {
            "hours": 6,
            "id": 310,
            "created_on": "2012-11-02T13:49:24Z",
            "user": {
                "id": 4,
                "name": "blah"
            },
            "issue": {
                "id": 258
            },
            "activity": {
                "id": 9,
                "name": "blah"
            },
            "updated_on": "2012-11-02T13:49:24Z",
            "comments": "blah",
            "spent_on": "2012-11-02",
            "project": {
                "id": 11,
                "name": "blah"
            }
        }
    ],
    "offset": 0,
    "limit": 2,
    "total_count": 306
} 
```

也许您可以看到您有一个 JSON**对象**，其中包含四个名称/值对：

*   `time_entries`
*   `offset`
*   `limit`
*   `total_count`

其中最后三个具有简单的数值，而第一个 ( `time_entries`) 是另外两个**Objects的****Array**。这两个对象中的每一个都包含各种名称/值对。名称/值对只是其中之一。**`id`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T12:16:06.667

数据在名称/值对中 数据由逗号分隔 花括号保存对象 方括号保存数组

我在这里使用了javascript..它可能对你有用..如果你有任何其他帮助让我知道

`var jsonText = xmlhttp.responseText; var obj = eval ("(" + jsonText + ")");`

`row_num=Object.keys(obj.time_entries).length;` 此行给出 time_entries 数组长度的长度

`keydata[c]=Object.keys(obj.time_entries[0]); columndata=keydata[0].toString(); my = columndata.split(",");`

columndata 包含时间条目的键值作为该数组中第 0 个索引的字符串 columnndata={hours,id,create_on..... 等等} my={"hours","id".... 等等}**

# java - 用于存储对象和快速检索的集合？

> ID：13233588
> 
> 赞同：0
> 
> 时间：2012-11-05T13:57:09.200
> 
> 标签：java, collections

我想在应用程序中收集一些对象。我需要一个可以给我一个对象的集合，`list.get(object)`以便我可以编写如下函数：

```
List<Object> list;

getProperty(Object o) {
  list.get(o).getProperty();
} 
```

什么最适合这个？

# ios - 从弹出框更改字体以用于下层滚动视图

> ID：13233592
> 
> 赞同：0
> 
> 时间：2012-11-05T13:57:23.723
> 
> 标签：ios, fonts, uiscrollview, popover, delegation

我正在使用 Xcode 4.5，针对 iOS5 及更高版本。我有一个弹出框，允许用户更改底层视图的字体。点击字体时，不会发生更改，直到我关闭弹出窗口和下级视图并重新打开。它是为委派而设置的。并且接收视图确实导入了`FontsPopoverViewDelegate`. 任何对解决方案的帮助将不胜感激。

字体的委托方法：

```
@protocol FontsPopoverViewDelegate <NSObject>
- (void)fontResize:(float)size forView:(int)type;
- (void)font:(int)fontID forView:(int)fView;
- (int)getFontForView:(int)fView;
- (float)getFontSizeForView:(int)fView;
@end 
```

在底层视图中实现的方法：

```
- (void)fontResize:(float)size forView:(int)type {
  fontSizes[type] = size;
  [self invalidate];
}

- (void)font:(int)fontID forView:(int)fView {
  fontIds[fView] = fontID;
  [self invalidate];
}

- (int)getFontForView:(int)fView {
  return fontIds[fView];
  [self invalidate];
}

- (float)getFontSizeForView:(int)fView {
  return fontSizes[fView];
  [self invalidate]; // added to spark a reaction from the view
}

-(void) invalidate {
  NSLog(@"Invalidate called");
  [self saveTextChanges];
  [self refreshBodyText];
  [self refreshBackground];
  [self refreshBodyText];
  [self refreshDateFont];
  [self refreshTitleFont];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:30:40.803

我通过将字体弹出框的通知发布到底层视图来解决这个问题。在底层视图中，我添加了调用... [self viewWillAppear:YES];

现在，它运行良好。

我在字体弹出框中有一个滑块，可以更改大小和通知，并且在通知中调用 viewWillAppear 与字体更改的工作方式相同。

```
- (void)aFontChanged:(NSNotification *)notification
{
    NSLog(@"aFontChanged notification?");
    [self viewWillAppear:YES];
    [self refreshBodyText];
    [self refreshDateFont];
    [self refreshTitleFont];
}

- (void)aFontSizeChanged:(NSNotification *)notification
{
    NSLog(@"aFontSizeChanged notification?");
    [self viewWillAppear:YES];
    [self refreshBodyText];
    [self refreshDateFont];
    [self refreshTitleFont];
} 
```

# git - 使用 NetBeans 拉取时如何获取修改后的文件？

> ID：13233594
> 
> 赞同：6
> 
> 时间：2012-11-05T13:57:40.423
> 
> 标签：git, netbeans, pull, git-pull

当我尝试从 NetBeans 7.2 中提取信息时，我收到了这样的消息：

> ==[IDE]== 2012 年 11 月 5 日 14:52:04 拉...
> 
> git pull ssh://git@ip/home/git/project/ +refs/heads/Dev_Nov_1:refs/remotes/origin/Dev_Nov_1
> 
> 分支：起源/Dev_Nov_1
> 
> 旧身份证：xxxx
> 
> 新身份证：xxxy
> 
> 结果：FAST_FORWARD
> 
> 合并结果：快进
> 
> HEAD 与 origin/Dev_Nov_1 的合并：
> 
> 提交日志
> 
> 修订：xxxx
> 
> 作者：塞萨尔
> 
> 日期：2012 年 11 月 5 日 14:51:13
> 
> 摘要：测试提交
> 
> ==[IDE]== 05-nov-2012 14:52:38 拉...完成。

我还想得到修改文件的列表。

我知道使用`git log --stat`我可以得到它，但有谁知道如何使用 Netbeans 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:02:51.357

要获取更改的文件列表：

*   在项目浏览器中右键单击项目，然后从菜单中选择 Git->Show History
*   选择搜索按钮 - 这将为您提供提交的摘要
*   选择一个提交并显示更改的文件
*   选择 diff 选项卡和一个文件是您想要查看文件的更改

# css - IE 渲染问题

> ID：13233597
> 
> 赞同：0
> 
> 时间：2012-11-05T13:57:49.627
> 
> 标签：css, internet-explorer, cross-browser, html

我的网站在 IE 浏览器和其他浏览器（如 chrome、safari 和 firefox）中无法正常呈现，但它显示正常。我不确定是否有任何 div 有问题或者是样式表。

**以下是我正在谈论的网址：http:** [//unyforme.com/demo/](http://unyforme.com/demo/)

不确定是什么导致 IE 中的布局错误。

请告知是否有人找到线索和/或为我指出一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:00:28.157

您的 DOCTYPE 必须必须是第一行，否则 IE 会以 quirks 模式呈现。

删除之前的所有内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

此外，为了使网站加载速度显着加快，请将所有 javascript 移到底部，就在`body`标签末尾之前。

# android - 三星 Galaxy S3 上 Android 应用程序开发者的噩梦

> ID：13233604
> 
> 赞同：3
> 
> 时间：2012-11-05T13:57:59.470
> 
> 标签：android

想知道是否有人在您开发的应用程序在三星 S3 上运行时遇到随机崩溃问题？我已经调整了我的应用程序，并且几乎可以在我能想到的所有设备上正常运行，但它在 S3 上不断崩溃。

# java - 是否可以在 Java 中使用类的构造函数并将其声明为另一个类中的数据类型？

> ID：13233607
> 
> 赞同：1
> 
> 时间：2012-11-05T13:58:10.680
> 
> 标签：java, constructor

如果我在类 Point 中有一个名为 Point 的构造函数：

```
public Point(double x, double y) {
        this.x = x;
        this.y = y; 
} 
```

我如何使用另一个名为 Square 的类并初始化这些点。例如，我想在一个正方形中初始化 4 个点。我怎样才能做到这一点？

我不知道这是否有意义。但是，我尽力了……问我问题，以便我能更好地解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:02:06.727

你的 Square 类应该有一个这样的构造函数：

```
public Square(Point p1, Point p2, Point p3, Point p4) {
        this.p1 = p1;
        this.p2 = p2;
        this.p3 = p3;
        this.p4 = p4;
} 
```

你像这样初始化你的 Square：

```
Square s = new Square(new Point(1,1), new Point(2,2), new Point(3,3), new Point(4,4)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:02:57.607

如果您想拥有一个`Square`with for 点，请将它们设为属性：

```
class Square {
    Point p1, p2, p3, p4;
    public Square() {
      p1 = new Point(0,0);
      p2 = new Point(0,0);
      p3 = new Point(0,0);
      p4 = new Point(0,0);
    }
} 
```

当然，还有无数其他方法来定义和使用它。这将主要取决于您的课程/程序设计您应该选择什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:01:59.833

我没有看到问题。您`Square`只需拥有四个类型的成员，`Point`这些成员将使用通常的`new`-syntax 进行初始化：

```
class Square {
    Point topLeft;

    public Square() {
        topLeft = new Point(0,0);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T14:02:46.620

你可以做

```
public Shape(Point... points) {
    this.points = points;
} 
```

或者

```
public Quadrilateral(Point p1, Point p2, Point p3, Point p4) {
    this.p1 = p1;
    this.p2 = p2;
    this.p3 = p3;
    this.p4 = p4;
} 
```

或者

```
public Square(double x, double y, double size) {
    this.x = x;
    this.y = y;
    this.size = size;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-05T14:05:16.157

我不确定我是否遵循，但如果你有一个像你说的构造函数，你可以简单地调用`new Point(10.0, 15.0)`在指定的坐标处创建一个点。

也许你追求的是这样的东西？

```
class Square {
    private Point upperLeftCorner;
    private Point upperRightCorner;
    private Point lowerLeftCorner;
    private Point lowerRightCorner;

    public Square(double x, double y, double size) {
        upperLeftCorner = new Point(x, y);
        lowerLeftCorner = new Point(x, y+size);
        upperRightCorner = new Point(x+size, y);
        lowerRightCorner = new Point(x+size, y+size);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T14:19:48.533

你是这个意思吗？

`java GeoTest [{0.0,0.0}, {0.0,10.0}, {10.0,10.0}, {10.0,0.0}]`

代码：

```
import java.util.Arrays;
public class GeoTest{
    public static void main(String[] args){
        System.out.println(Arrays.toString(new Square(new Point(0,0), new Point(10,10)).getCourners()));
    }
}
class Point{
    private double x;
    private double y;
    public Point(double x, double y) {
            this.x = x;
            this.y = y; 
    }
    public String toString(){
        return new String("{"+x+","+y+"}");
    }
    public double getX(){
        return x;
    }
    public double getY(){
        return y;
    }
}

class Square {
    private Point lowerLeft;
    private Point upperRight;
    /**
     * Assuming x & y axis as follows: 
     * Lower left corner (x,y):0,0 -> upper right corner (x,y): n,n where n > 0
     */
    public Square(Point lowerLeft, Point upperRight){
        this.lowerLeft = lowerLeft;
        this.upperRight = upperRight;
    }
    public Point[] getCourners(){
        return new Point[]{lowerLeft, new Point(lowerLeft.getX(),upperRight.getY()),upperRight, new Point(upperRight.getX(), lowerLeft.getY())};
    }
} 
```

# javascript - 在网站内运行命令提示符

> ID：13233608
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:58:20.213
> 
> 标签：javascript, command-prompt

我想在网站内运行命令提示符。

其实我想`Jemdoc`在我的网站上使用。如果您在命令提示符下运行命令“jemdoc index”，则会`Jemdoc`生成一个网站。`HTML`当你点击一个按钮时，我想要那个！我不知道如何在`PHP`or中编程`c#`。

我可以这样做`JavaScript`吗？

如果你能给我一个例子会很棒（`JavaScript`或不是）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T08:46:39.080

浏览器不能在客户端系统上执行任意命令是有充分理由的。

简而言之，您需要一台服务器！这可以是 PHP、Java、NodeJS 或其他。您的网站向服务器发送一个触发器（即 HTTP-POST），它会`jemdoc`为您执行（也安装在服务器上）并更新 html 文档。

问候

# vbscript - VBScript ExitCode 从批处理文件到 Jenkins

> ID：13233610
> 
> 赞同：0
> 
> 时间：2012-11-05T13:58:22.550
> 
> 标签：vbscript, batch-file, jenkins, jenkins-plugins

我正在 Jenkins 上执行批处理命令 Window Build 步骤，它运行一个 VbScript，而该 VbScript 又运行一些批处理文件。现在我需要能够从 vbscript 中看到一些关于 jenkins 控制台输出视图的反馈——出于某种原因，无论从脚本运行的批处理文件是否成功，我总是得到 Exit 0 SUCCESS，

无论如何，我可以在 VBScript 中使用可靠的系统来对 Jenkins 进行跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:48:37.097

好吧，我基本上回答了我自己的问题

如果我使用预先设置的 cscript 从 Jenkins 运行 VBS 文件，那么我可以在那里看到一些输出`wscript.echo "MyMessage"`

然后我还必须将主机默认脚本设置为 CScript，如下所示

```
cscript //h:cscript //s 
```

# iphone - 如何禁用弹出菜单项，如选择、全选、建议...、定义（在 UIWebView 上）？

> ID：13233613
> 
> 赞同：1
> 
> 时间：2012-11-05T13:58:24.760
> 
> 标签：iphone, ios, uiwebview, uiapplication, uiresponder

如何禁用弹出菜单项，如**Select**、**Select All**、**Suggest...**、**Define** (on `UIWebView`)？

我在帮助中找到了以下信息，但不明白如何使用它：

> 对于编辑菜单命令，这是共享的**UIApplication** 对象。根据上下文，您可以向发送者查询信息，以帮助您确定是否应启用命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:40:46.743

调配以下方法：

```
#import "NSObject+myCanPerformAction.h"

@implementation NSObject (myCanPerformAction)

- (BOOL)myCanPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(copy:)) {
        return [self myCanPerformAction:action withSender:sender]; // not a recursion
    }
    if (action == @selector(paste:)) {
        return [self myCanPerformAction:action withSender:sender]; // not a recursion
    }
    return NO;
}

@end 
```

调酒：

```
[[UIWebDocumentView class] jr_swizzleMethod:@selector(canPerformAction:withSender:) withMethod:@selector(myCanPerformAction:withSender:) error:nil]; 
```

# node.js - NodeJS 和 Socket.IO 跟踪用户访问时间 高性能

> ID：13233615
> 
> 赞同：1
> 
> 时间：2012-11-05T13:58:26.833
> 
> 标签：node.js, socket.io

我已经使用 node 和 socket.io 构建了一个应用程序，以跟踪访问者何时访问页面并离开。当访问者离开时，我将访问者在页面上的时间存储到 redis。这就是应用程序必须做的所有事情。

事情是这样的，应用程序需要支持 ~15k 并发连接，但是当基准达到 10.000 conc 左右时，我会遇到很多握手错误。访客。我不知道究竟是为什么。有没有人遇到过这类问题？

我还尝试在多个进程中扩展应用程序，使用节点的 RedisStore 后端，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:19:33.553

有很多事情可能会导致这种情况。您应该检查您的系统错误日志，看看是否有任何错误可能表明问题实际出在哪里。

这个问题有一些很好的信息，他们所达到的限制也接近你所达到的。值得一看。

[https://serverfault.com/questions/10852/what-limits-the-maximum-number-of-connections-on-a-linux-server](https://serverfault.com/questions/10852/what-limits-the-maximum-number-of-connections-on-a-linux-server)

# javascript - 更改html页面样式

> ID：13233616
> 
> 赞同：0
> 
> 时间：2012-11-05T13:58:28.090
> 
> 标签：javascript, html, css

> **可能重复：**
> [在 jQuery 中查找文本字符串并将其设为粗体](https://stackoverflow.com/questions/9794851/find-text-string-in-jquery-and-make-it-bold)

我的 html 页面上有一些文本（字母上有重音符号）：

```
<p>
some téxt, some text, some téxt, some text, some text, some téxt, 
</p> 
```

我的目标是为所有出现的“**文本**”和“**文本**”设置粗体样式

可能吗 ？

谢谢你

缬草

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:58:07.087

假设您的文本位于：

```
<p id="txt">
some téxt, some text, some téxt, some Text, some text, some téxt, xyz
</p>

var bold = ['some','text', 'xyz']; // words to bold
var content = document.getElementById('txt');//content to find those words
var regExp = new RegExp('('+bold.join('|')+')', "gi"); //build regular expression (i means case insensitive)

content.innerHTML = content.innerHTML.replace(regExp, "<strong>$1</strong>"); //find and bold 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:43:41.970

在您的情况下，您不能执行以下操作，

```
str.replace(/(t.xt)/g, "<b>"+text+"</b>); 
```

所以我们需要使用回调函数：

```
//Assuming you can retrieve the text from the p tag or from the entire page
var str = "some téxt, some text, some téxt, some text, some text, some téxt, " 

str.replace(/(t.xt)/g, function(match){
  return "<b>"+match+"</b>";
}) 
```

您可以将此代码段添加到`document.onload`或 `$().function(){...}`

# javascript - 没有匿名函数的事件处理程序

> ID：13233617
> 
> 赞同：1
> 
> 时间：2012-11-05T13:58:29.113
> 
> 标签：javascript, jquery

我正在使用 jQuery 插件，以下脚本完美运行。有没有更好的方法可以在不使用匿名函数的情况下做到这一点。谢谢

```
$('.sortName').selectIt({
    'title':'Title',
    'click':function(value){someFunction(value);}
});

function someFunction(value){alert(value);} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T13:59:08.417

传递函数本身而不是传递匿名函数。

```
$('.sortName').selectIt({
    'title':'Title',
    'click':someFunction
}); 
```

# mapreduce - Couchdb减少收缩率检查拒绝视图

> ID：13233618
> 
> 赞同：1
> 
> 时间：2012-11-05T13:58:31.007
> 
> 标签：mapreduce, couchdb

我知道这已经讨论了很多次，但我认为我的场景是为了禁用速率限制检查：

文档格式为：

```
{ prefix: "004945", country: "Germany", type: "Mobile", carrier: "OrangeTel", price: "34"}
{ prefix: "004946", country: "Germany", type: "Mobile", carrier: "SomeOther", price: "46"}
.
.
.
{ prefix: "00807", country: "Unknown", type: "Satelite", carrier: "Inmarsat", price: "123"} 
```

现在我想得到一个由这些前缀组成的数组，一些`[country, type, carrier]`键或一个`[country, type]`键

所以我像这样映射：

`emit( [country, type, carrier],[prefix] )` 我像这样减少：

```
reduce: function(keys, values, rereduce) { 
           return values.reduce(function(a, b) {return a.concat(b);})
        } 
```

问题是收缩率不够好，因为显然我以不同的形状返回相同数量的数据：我将一个包含许多元素的列表转换为一个包含少量元素的列表，每个元素都有很多数据。

我知道我可以使用列表函数等解决它，但我认为该场景对于禁用检查是有效的。此外，如果它存在，我想要任何使用 map-reduce 解决方案而不改变这些文档结构的想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:13:59.957

reduce 函数的主要任务是对 map 函数产生的结果进行归约。

由于您的 map 函数`[prefix]`作为值发出，`[prefix]`因此每个键都不同，并且您想减少/分组键，可能您也有兴趣不看到`[prefix]`每个组的重复项，对吗？

Next reduce 函数从 values 数组中创建一个集合，并且应该`[prefix]`为您的键生成唯一且简短的 -es 列表，并且它不会受到逃避率问题的影响。如果您需要计算缩减键出现多少不同的前缀，这将是另一个函数，但目标是相同的：reduce reduce 和 rereduce long list of values(:

```
function(keys, values, rereduce){
  var prefixes = [];
  var update_set = function(src, dst){
    for (var idx in src){
      item = src[idx];
      if (dst.indexOf(item) == -1){
        dst.push(item);
      }
    }
    return dst;
  }
  if (rereduce){
    for (var idx in values){
      update_set(values[idx], prefixes);
    }
  }
  else{
    update_set(values, prefixes);
  }
  return prefixes;
} 
```

# sql - 返回最大值和先验值

> ID：13233620
> 
> 赞同：0
> 
> 时间：2012-11-05T13:58:35.390
> 
> 标签：sql, oracle, max, top-n

我有一个查询要告诉我给活跃参与者的最新说明：

```
select notes.applicant_id,
   reg.program_code,
   reg.last_name,
   reg.first_name,
   reg.status_cd,
   MAX(notes.service_date) as "Last Note"
from reg inner join notes on reg.applicant_id=notes.applicant_id
where reg.status_cd='AC'
group by notes.applicant_id, reg.program_code, 
         reg.last_name, reg.first_name, reg.reg_date, 
         reg.region_code, reg.status_cd
order by MAX(notes.service_date) 
```

但我也希望这个查询也能给出`note.service_date`最大值之前的结果`service_date`。

结果看起来像这样

```
notes.applicant_id   reg.last_name  reg.first_name reg.status_cd  Last Note    Prior Note
 12345                 Johnson          Lori           AC        01-NOV-2011   01-OCT-2011 
```

我在甲骨文工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:26:40.370

您可以使用该[`lag`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions070.htm)功能，或将其与同一张表连接。

这是一个更简单的例子（你还没有给我们数据样本）：

```
create table t as
(select level as id, mod(level , 3) grp, sysdate - level dt
from dual 
connect by level < 100
) 
```

以下是查询：

```
select t2.grp,t1.grp, max(t1.dt) mdt, max(t2.dt) pdt
  from t t1
  join t t2 on t1.dt < t2.dt and t1.grp = t2.grp
 group by t2.grp, t1.grp; 
```

或者

```
select grp, max(pdt), max(dt)
 from(
 select grp, lag(dt) over (partition by grp order by dt) pdt, dt 
 from t)
 group by grp 
```

[这](http://www.sqlfiddle.com/#!4/343df/1)是一个小提琴

* * *

在你的情况下，它可能是这样的：

```
select t.applicant_id, t.program_code, 
         t.last_name, t.first_name, t.reg_date, 
         t.region_code, t.status_cd,
         max(t.dt) as "Last Note",
         max(t.pdt) as "Prev Note"
from (
select notes.applicant_id,
   reg.program_code,
   reg.last_name,
   reg.first_name,
   reg.status_cd,
   notes.service_date as dt,
   lag(notes.service_date)  over (partition by notes.applicant_id,
   reg.program_code,
   reg.last_name,
   reg.first_name,
   reg.status_cd order by notes.service_date) as pdt
from reg inner join notes on reg.applicant_id=notes.applicant_id
where reg.status_cd='AC'
) t
group by t.applicant_id, t.program_code, 
         t.last_name, t.first_name, t.reg_date, 
         t.region_code, t.status_cd
order by MAX(t.dt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:33:57.740

如果我理解正确，这是一种方法：

```
SELECT *
  FROM (select notes.applicant_id,
               reg.program_code,
               reg.last_name,
               reg.first_name,
               reg.status_cd,
               notes.service_date AS "Last Note",
               ROW_NUMBER() OVER (PARTITION BY notes.applicant_id, reg.program_code, 
                   reg.last_name, reg.first_name, reg.reg_date, reg.region_code, 
                   reg.status_cd ORDER BY notes.service_date DESC) rn
          from reg inner join notes on reg.applicant_id=notes.applicant_id
         where reg.status_cd='AC')
 WHERE rn < 3; 
```

# ruby-on-rails - 如何获取从 Rails 中的另一个模型链接的模型名称？

> ID：13233625
> 
> 赞同：0
> 
> 时间：2012-11-05T13:58:58.283
> 
> 标签：ruby-on-rails, model, controller, associations

我在 Rails 中设置了 2 个模型：

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :platforms
end 
```

和

```
class Platform < ActiveRecord::Base
    attr_accessible :name, :url, :country
    validates :name, :presence => true, :length => { :minimum => 5 }
    validates :url, :presence => true, :length => { :minimum => 5 }
    belongs_to  :categories
end 
```

这是我的平台控制器：

```
class PlatformsController < ApplicationController
  # GET /platforms
  # GET /platforms.json
  def index
    @platforms = Platform.all
    @categories = Category.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @platforms }
    end
  end

  # GET /platforms/1
  # GET /platforms/1.json
  def show
    @platform = Platform.find(params[:id])
    @categories = Platform.categories

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @platform }
    end
  end

  # GET /platforms/new
  # GET /platforms/new.json
  def new
    @platform = Platform.new
    @categories = Category.all

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @platform }
    end
  end

  # GET /platforms/1/edit
  def edit
    @platform = Platform.find(params[:id])
    @categories = Category.find(:all)
  end

  # POST /platforms
  # POST /platforms.json
  def create
    @platform = Platform.new(params[:platform])
    #@categories = Category.new(params[:name])
    @categories = @platform.categories.create(params[:categories])

    respond_to do |format|
      if @platform.save
        format.html { redirect_to @platform, notice: 'Platform was successfully created.' }
        format.json { render json: @platform, status: :created, location: @platform }
      else
        format.html { render action: "new" }
        format.json { render json: @platform.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /platforms/1
  # PUT /platforms/1.json
  def update
    @platform = Platform.find(params[:id])
    @categories = Category.find(:all)

    respond_to do |format|
      if @platform.update_attributes(params[:platform])
        format.html { redirect_to @platform, notice: 'Platform was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @platform.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /platforms/1
  # DELETE /platforms/1.json
  def destroy
    @platform = Platform.find(params[:id])
    @platform.destroy

    respond_to do |format|
      format.html { redirect_to platforms_url }
      format.json { head :no_content }
    end
  end
end 
```

我不明白我做错了什么，但是当我尝试使用时，它没有正确地将类别分配给平台，也在平台索引视图中：

```
<%= platform.categories  %> 
```

它给了我错误找不到带有 id=“和这里的相应 id”的类别

我真的很困惑，因为我遵循了这个教程。

我使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:42:46.733

没有您的观点，我无法确定您正在尝试做什么。最重要的是，你的 params[:categories] 哈希中有什么？给定名称，听起来您打算将其划分为多个类别。但是，您的代码编写得好像您打算将其作为一组描述一个属性的属性`Category`。

Since I can't say for sure what you *want* to do, I'll answer your question by explaining what you *are* doing. Maybe that will help you figure out how to fix it.

Your `create` code currently looks like this:

```
# POST /platforms
# POST /platforms.json
def create
  @platform = Platform.new(params[:platform])
  #@categories = Category.new(params[:name])
  @categories = @platform.categories.create(params[:categories]) 
```

The first line creates the new `Platform` and is easy. Skipping over the comment to the third line. This is probably what's tripping you up.

You are selecting the associations for your newly created `Platform` and trying to create a new category with attributes as stored in the `params[:categories]` hash. I'm afraid this is not allowed. (I think it throws an `ActiveRecord::RecordNotSaved` exception, but I could be wrong.) You can not `create` on a `@platform` which hasn't been persisted yet. Instead, I think you want `build`.

Here is the relevant documentation: [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

The difference between `create` and `build` is that `build` just sets up the association without actually saving it to the database yet. `create` saves it immediately. The nice thing about `build` is that you don't actually have to save it yourself. It tags along for free when you call `@platform.save` or `@platform.update_attributes`. Also, `save` is automatically wrapped in a transaction, so it won't create the new `Category` if it fails to create the new `Platform` for whatever reason.

The next interesting thing is that you are assigning the result of your create to `@categories`. I don't think this is what you want either. You don't need to save the new `Category` because it tags along with your `@platform`. However, if the `save` of the platform fails, then you are going to re-render your `new` view with this value of `@categories` whereas in `new` you set `@categories = Category.all`. This could certainly cause some confusion on the `new` view after a failed `create`.

In summary, I think your `create` code should look something like the following.

```
# POST /platforms
# POST /platforms.json
def create
  @platform = Platform.new(params[:platform])
  @platform.categories.build(params[:categories])

  respond_to do |format|
    if @platform.save
      format.html { redirect_to @platform, notice: 'Platform was successfully created.' }
      format.json { render json: @platform, status: :created, location: @platform }
    else
      @categories = Category.all
      format.html { render action: "new" }
      format.json { render json: @platform.errors, status: :unprocessable_entity }
    end
  end
end 
```

If you're `params[:categories]` is not a hash of category attributes and is actually a comma delimited string of category names, then you would want to do something like the following instead of my second line above:

```
params[:categories].split(",").each do |category|
  @project.categories.build(name: category)
end 
```

You may also want to check out `accepts_nested_attributes_for` which can DRY out your controller even more. [http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

I hope that helps.

# php - 将项目推送到变量名在php中是动态的数组

> ID：13233629
> 
> 赞同：1
> 
> 时间：2012-11-05T13:59:03.197
> 
> 标签：php, arrays, variables, dynamic, associative-array

我有以下3个变量：

```
 private $a_total;
        private $b_total;
        private $c_total; 
```

现在，当字段填充了一些总计数据时，这些字段的名称是“a”、“b”和“c”。我想将它动态存储到上面的变量中，例如：

```
 $type = $_POST['totaltype']; //either a, b or c
      $to_save = "{$type}_total";
      $this->$to_save['total'] = some number; 
```

如果我尝试

```
 print_r($this->$to_save); 
```

它给出了空数组。如果我尝试：

```
 print_r($this->$to_save['total']); 
```

它给出了正确的数字。

谁能帮忙？

注意：我想动态使用，因为这些数据将在一个大循环中，所以我不想重用`$a_total`, `$b_total`，`$c_total`因为我将拥有多个`a`,`b`和`c`变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:03:55.967

您可以将变量名称包装在类内的大括号中：

```
$this->{$type . "_total"} = 5; 
```

像数组一样访问它时同样有效：

```
$this->{$type . "_total"}['total'] = 5; 
```

您还可以将变量的全名保存在字符串中，例如 your`$to_save`并以相同的方式访问它：

```
$to_string = $type . '_total';
$this->{$to_string}['total'] = 5;
print_r($this->{$to_string}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:02:26.143

更改`$a_total`为`$total['a']`, ,和, `$b_total`_`$total['b']``$c_total``$total['c']`

然后您可以动态访问这些值。

# regex - url的一部分更改后htaccess 301重定向

> ID：13233630
> 
> 赞同：1
> 
> 时间：2012-11-05T13:59:03.890
> 
> 标签：regex, apache, .htaccess, mod-rewrite

如何将网址从旧网址重定向到新网址？情况如下：

```
http://www.lorem.com/ipsum/dolor/sit -> http://www.lorem.com/ipsum/dolor/amet
http://www.lorem.com/ipsum/dolor/sit/lipsum -> http://www.lorem.com/ipsum/dolor/amet/lipsum
http://www.lorem.com/ipsum/dolor/sit/vulvat -> http://www.lorem.com/ipsum/dolor/amet/vulvat
http://www.lorem.com/ipsum/dolor/sit/lol    -> http://www.lorem.com/ipsum/dolor/amet/lol 
```

客户已重命名`sit`为`amet`。我必须为每个链接创建一个重定向，还是可以一次性重定向`sit`到`amet`所有页面`sit`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:07:00.520

您只需要一个 RewriteRule 即可处理此问题。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(ipsum/dolor)/sit(/.*|)$ $1/amet$2 [L,NC,R=301] 
```

# android - java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy 移至 Android Annotations v.2.7 后

> ID：13233631
> 
> 赞同：6
> 
> 时间：2012-11-05T13:59:05.560
> 
> 标签：android, android-annotations

在迁移到 Android Annotations v.2.7 后，我在 Eclipse 中构建项目时遇到了问题，同时 maven 构建还可以。这是来自 Eclipse 错误日志的堆栈跟踪：

```
Error
Mon Nov 05 15:49:49 GMT+02:00 2012
Errors running builder 'Java Builder' on project 'heroes'.

java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653)
    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460)
    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)
    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)
    at java.lang.Class.getAnnotation(Class.java:3029)
    at javax.annotation.processing.AbstractProcessor.getSupportedSourceVersion(AbstractProcessor.java:103)
    at org.eclipse.jdt.internal.compiler.apt.dispatch.ProcessorInfo.<init>(ProcessorInfo.java:56)
    at org.eclipse.jdt.internal.apt.pluggable.core.dispatch.IdeAnnotationProcessorManager.discoverNextProcessor(IdeAnnotationProcessorManager.java:94)
    at org.eclipse.jdt.internal.compiler.apt.dispatch.RoundDispatcher.round(RoundDispatcher.java:116)
    at org.eclipse.jdt.internal.compiler.apt.dispatch.BaseAnnotationProcessorManager.processAnnotations(BaseAnnotationProcessorManager.java:159)
    at org.eclipse.jdt.internal.apt.pluggable.core.dispatch.IdeAnnotationProcessorManager.processAnnotations(IdeAnnotationProcessorManager.java:134)
    at org.eclipse.jdt.internal.compiler.Compiler.processAnnotations(Compiler.java:820)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:434)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:365)
    at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.compile(BatchImageBuilder.java:178)
    at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(AbstractImageBuilder.java:302)
    at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchImageBuilder.java:60)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilder.java:254)
    at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:178)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
    at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
    at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
    at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

Eclipse 会话数据：

```
eclipse.buildId=M20120914-1800
java.version=1.6.0_35
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -product org.eclipse.epp.package.jee.product -keyring /Users/vitaliyzasadnyy/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.jee.product -data /Users/vitaliyzasadnyy/Development/workspaces/native-container-android -product org.eclipse.epp.package.jee.product -keyring /Users/vitaliyzasadnyy/.eclipse_keyring -showlocation 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T15:13:42.460

[在@pyricau](https://github.com/pyricau)的帮助下，我解决了问题。以下是[问题跟踪器](https://github.com/androidannotations/androidannotations/issues/379#issuecomment-10073205)的回复：

> 据我所知，`AbstractProcessor.getSupportedSourceVersion()` 尝试读取`@SupportedSourceVersion`处理器上的注释。
> 
> 从堆栈跟踪中，我们可以推断 AnnotationParser 正在尝试读取处理器类上的所有注释。并且其中一个注释有一个类数组参数，其中包含无法加载的类。
> 
> 唯一具有类数组的注释 `AndroidAnnotationsProcessor`是`@ SupportedAnnotationClasses`.
> 
> 由此我们可以推断出androidannotations支持的注解是不存在的，这意味着它们不在eclipse编译器的类路径中。
> 
> 正如您可能注意到的，我们将 API jar 提取为单独的 Maven 工件，从而产生新的 Maven 配置：
> 
> ```
> <dependencies>
>         <!-- [...] -->
>     <dependency>
>         <groupId>com.googlecode.androidannotations</groupId>
>         <artifactId>androidannotations</artifactId>
>         <version>2.7</version>
>         <scope>provided</scope>
>     </dependency>
>     <dependency>
>         <groupId>com.googlecode.androidannotations</groupId>
>         <artifactId>androidannotations-api</artifactId>
>         <version>2.7</version>
>     </dependency>
> </dependencies> 
> ```
> 
> 由于您告诉我这适用于 Maven，因此我假设您已正确配置。
> 
> 以前，androidannotations 依赖项包含注释。它不再包含它们，它们现在位于 androidannotations-api jar 中。
> 
> 这对 Maven 来说很好，因为作用域 compile 中可用的依赖项也可用于 Javac。但是，Eclipse 将这些依赖项与注释处理 jar 区分开来。
> 
> 因此，我假设您正在使用“手动方式”来配置 eclipse 注释处理：将 jar 添加到**Java Compiler > Annotation Processing > Factory Path**。它目前仅包含 `androidannotations-2.7.jar`.
> 
> 要解决此问题，您应该添加两个 AndroidAnnotations 依赖项：codemodel 和 androidannotations-api
> 
> 以下是我们应该如何更新文档：（**解决方案！**）
> 
> 1.  右键单击您的项目，选择**属性**
> 2.  转到**Java 编译器 > 注释处理**并选择启用注释处理
> 3.  转到**Java 编译器 > 注释处理 > 工厂路径**
> 4.  点击**Add Variable**，选择 M2_REPO 并点击**Extend...**；然后，选择以下 JAR：`com/googlecode/androidannotations/androidannotations-api/2.7/androidannotations-api-2.7.jar`
> 5.  点击**Add Variable**，选择 M2_REPO 并点击**Extend...**；然后，选择以下 JAR：`com/sun/codemodel/codemodel/2.4.1/codemodel-2.4.1.jar`
> 6.  点击**Add Variable**，选择 M2_REPO 并点击**Extend...**；然后，选择以下 JAR：`com/googlecode/androidannotations/androidannotations/2.7/androidannotations-2.7.jar`
> 7.  确认工作区重建
> 8.  完毕！

来源：[https ://github.com/androidannotations/androidannotations/issues/379#issuecomment-10073205](https://github.com/androidannotations/androidannotations/issues/379#issuecomment-10073205)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-13T18:43:55.740

尝试重建项目 - `mvn clean package`. 如果您有不同的 Maven 配置文件，请不要忘记指定配置文件。

# sql - 如何加快 Firebird 2.5.1 中的简单连接查询

> ID：13233634
> 
> 赞同：1
> 
> 时间：2012-11-05T13:59:08.207
> 
> 标签：sql, firebird

在两个大表上执行简单的内连接查询时，在 Firebird 2.5.1 中几秒钟后返回结果。在其他数据库中，几毫秒后返回结果。问题是如何加速这个查询，为什么 Firebird 使用 A NATURAL 而不是索引？

查询是：

```
SELECT FIRST 20 * FROM A INNER JOIN B ON A.ID = B.AID; 
```

结果计划是：

```
PLAN JOIN (A NATURAL, B INDEX (IDX_B_1)) 
```

统计数据：

![统计数据](../Images/4dd5c04f472f1769d11aba5d0fc202dc.png)

表和索引元数据：

```
CREATE TABLE "A" 
(
  "ID"   INTEGER NOT NULL,
CONSTRAINT "PK_A" PRIMARY KEY ("ID")
);

CREATE TABLE "B" 
(
  "ID"   INTEGER NOT NULL,
  "AID"  INTEGER,
CONSTRAINT "PK_B" PRIMARY KEY ("ID")
);

CREATE INDEX "IDX_B_1" ON "B"("AID"); 
```

要填充，您可以使用以下过程：

```
declare variable nba integer;
declare variable nbb integer;
declare variable nbc integer;

begin
  nba = 0;
  nbb = 0;
  nbc = 0;
  while (nba < 100000) do begin
    insert into A (ID) values (:nba);
    nbc = 0;
    while (nbc < 50) do begin
      insert into B (ID, AID)
      values (:nbb, :nba);
      nbb = nbb + 1;
      nbc = nbc + 1;
    end
    nba = nba + 1;
  end
end 
```

# model - MVC4 模型 DefaultValue 命名空间？

> ID：13233637
> 
> 赞同：0
> 
> 时间：2012-11-05T13:59:32.350
> 
> 标签：model, namespaces, asp.net-mvc-4

我应该使用什么命名空间在我的 MVC4 模型中使用 [DefaultValue(true)] ？

如果你能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:08:49.467

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)-`using System.ComponentModel`

# arrays - 带有 Instr 函数的误报和误报

> ID：13233641
> 
> 赞同：1
> 
> 时间：2012-11-05T13:59:59.283
> 
> 标签：arrays, vba, outlook, full-text-search, false-positive

我正在尝试使用 InStr 在数组中查找值。但是，我得到了误报和误报。

即会有一个字符串匹配，即使字符串完全匹配，也不会报告匹配或不报告匹配。

它需要 Outlook。它将突出显示的电子邮件转换为放置在指定路径中的文本文件。然后，它通过将文本读入数组并搜索数组内容来搜索文本文件中的分隔符。但是，如前所述，即使子字符串在数组中，InStr 也会返回误报和误报。我尝试过二进制和文本比较方法以及各种比较字符串。

有任何想法吗？

注意： 1）在对 InStr 感到沮丧之后，我尝试使用 if then 语句将数组与分隔符字符串进行比较，这就是我的代码最后几行中显示的内容。2）我已将分隔符设置为“xxxxx”，您可以在 objfile.write 命令集之后的行中看到它。3）我尝试使用 instr 函数同时使用文本和二进制比较模式

3) 最终目标： a) 从 Outlook 中提取突出显示的电子邮件并合并到一个文本文件中。b) 根据电子邮件的文本对分隔的文本文件进行排序（如果分隔符之间的文本包含 y，则放入数组 y，如果 x...等） c) 按我指定的顺序将数组打印到电子邮件中（例如 x，y , z)

这是因为电子邮件每天到达的时间不同，但必须每天按相同的顺序组织最终的摘要电子邮件。

谢谢。

下面是我的代码：

```
Sub MergeTextFromSelectedEmailsIntoTextFile()
  Dim objFS As New Scripting.FileSystemObject, objFile As Scripting.TextStream
  Dim objItem As Object, strFile As String
  Dim wrapArray() As String

  If ActiveExplorer.Selection.Count = 0 Then Exit Sub

  strFile = InputBox("Please enter the full path and file name for the merged text:" _
    , "Enter File Name")

  Set objFile = objFS.CreateTextFile(strFile, False)

  If objFile Is Nothing Then
    MsgBox "Error creating file '" & strFile & "'.", vbOKOnly + vbExclamation _
      , "Invalid File"
    Exit Sub
  End If

  For Each objItem In ActiveExplorer.Selection

    objFile.Write vbCr
    objFile.Write (vbCr & Chr(10) & Chr(13) & ("xxxxx") & Chr(13) & Chr(13) & vbCr & vbLf)
    objFile.Write (vbCr & vbLf & objItem.Body)
    objFile.Write (vbCr & vbLf & Chr(13))
  Next
  objFile.Close

'Define variables for writing to array

Dim i As Integer
Set objFile = objFS.OpenTextFile(strFile, ForReading)
'write file contents to array
Do Until objFile.AtEndOfStream
ReDim Preserve wrapArray(i)
wrapArray(i) = objFile.ReadLine
i = i + 1
Loop
Dim xxxxx As String
xxxxx = xxxxx

'check each array index for contents
'note i have tried 
''if instr(0, wraparray(i), "xxxxx",0) then msgBox "FoundDelim at line " & i

For i = LBound(wrapArray()) To UBound(wrapArray())
    If wrapArray(i) = "xxxxx" Then MsgBox "FoundDelim! at line " & i
Next i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:37:53.740

请注意，它`InStr`返回一个整数，因此将函数的结果测试为布尔值应该会导致不一致的行为。尝试这个：

```
If InStr(wrapArray(i),"xxxxx") > 0 Then
  MsgBox "FoundDelim! at line " & i
End If 
```

# android - Android 应用内计费 - 如果支付失败，市场如何通知

> ID：13233644
> 
> 赞同：0
> 
> 时间：2012-11-05T14:00:04.247
> 
> 标签：android, in-app-billing, in-app-purchase

我正在实施应用内计费，但​​没有找到文档说明如果用户配置的信用卡由于过期日期/用户已刷卡的原因而失败，那么市场 API 如何通知我们失败交易的应用程序。

在这种情况下，标准做法是什么。

以下场景更好地描述了它：假设用户打开应用程序，点击要购买的商品，然后单击结帐 UI 上的接受和购买按钮。现在如果与用户的 google play 帐户关联的信用卡已过期，我的应用将如何收到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:56:19.507

它不会得到通知。付款由 Google Play 商店客户端处理，如果卡验证等失败，则会显示错误消息。如果您退出并返回应用程序（即您的应用程序），您将收到一般的“购买失败”等错误。

# delphi - (Indy) TIdHTTP EIdSocketError Socket Error #0 下载文件时出现异常

> ID：13233648
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:17.533
> 
> 标签：delphi, download, delphi-2010, indy

我有这个 delphi 代码，它基本上从安全服务器**下载**文件（如果我没记错的话，使用 Indy build 10.5.8 r4743）：

**问题是：**我收到了随机的“Socket Error # 0”异常，我无法修复甚至无法理解：

`Project MyProject.exe raised exception class EIdSocketError with message 'Socket Error # 0`

[堆栈在这里](http://dug.im/04607)，帕斯卡代码是：

```
IdHTTP            := TIdHTTP.Create(nil);
TheSSL            := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
TheCompressor     := TIdCompressorZLib.Create(nil);
TheCookieManager  := TIdCookieManager.Create(IdHTTP);

try SetupWebComponents(IdHTTP, TheSSL, TheCompressor, TheCookieManager); except end;

TheCookieManager.OnNewCookie := MainForm.SyncNewCookie;

// Go!
Stream            := TMemoryStream.Create;
try
   IsError        := False;
   try
      with IdHTTP do
      begin
           OnWork                := MainForm.IdHTTPWork_Download;
           try
              try
                 IsNewFile       := (Not FileExists(LocalFile));
                 if IsNewFile then
                    TheFile      := TFileStream.Create(LocalFile, fmCreate)
                 else
                     // File already exist, resume download
                     TheFile     := TFileStream.Create(LocalFile, fmOpenReadWrite);

                 DoExit          := False;

                 // Use [ Request.Referer ] it to pass VersionGUID to Work event (to record download progress in db)
                 Request.Referer := VersionGUID;
                 repeat
                       // Get resume byte
                       if IsNewFile then
                       begin
                            ResumeByte := 0;
                            IsNewFile  := False;
                       end
                       else
                           ResumeByte  := GetResumeByteFromDB();

                       if FileExists(LocalFile) then
                       begin
                            // File already exist, resume download
                            DoExit     := (ResumeByte >= TheFileSize);
                            TheFile.Seek(ResumeByte, soFromBeginning);
                       end;

                       // Save ResumeByte, it will be used to record download progress in db & eventually use it to resume downloads)
                       IdHTTP.Tag      := ResumeByte;

                       Request.Range := IntToStr(ResumeByte) + '-';

                       Get(TheURL, TheFile);
                       IsError         := (Not (ResponseCode in [200, 206])) OR (Pos('login', URL.Document) <> 0);

                       // Break if there's any error (to allow retrying later in a clean fashion)
                       if IsError then
                          Break;
                 until DoExit;

                 Disconnect;
              except
                    if (ResponseCode = 404) then
                    begin
                         // File doesn't exist, get out
                         Result        := False;
                         Exit;
                    end;
              end;    // try/except
           finally
                  FreeAndNil(TheFile);
           end;    // try/finally
      end;    // with
   except
         IsError  := True;
   end;    // try/except
finally
       Stream.Free;
end; 
```

[前段时间](https://stackoverflow.com/questions/10326810/random-indy-responsecode-1-eidsocketerror-socket-error-0-exceptions)我发布了一个类似的问题，但那是关于**上传，而不是下载**。从那时起，在 SO 成员的帮助下，代码得到了修复，现在正在使用相同的代码（用于处理 cookie、重新登录等），所以我认为问题确实出在所示的下载过程中多于

**有人可以看看这个告诉我我做错了什么吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:02:15.617

就像您的[其他问题](https://stackoverflow.com/questions/10326810/random-indy-responsecode-1-eidsocketerror-socket-error-0-exceptions)一样，如果可能，您应该升级到更新的版本，并在寻求帮助之前验证问题仍然存在。当前版本是**10.5.9 r4861**。

# maps - 如何打开正在使用的 infoWindow 谷歌地图？

> ID：13233651
> 
> 赞同：3
> 
> 时间：2012-11-05T14:00:22.607
> 
> 标签：maps, infowindow

我在联系页面中有一个 Goole 地图，我想在其中显示 Google 地图上使用的 infoWindow。

转到该链接：[Gmap](https://maps.google.be/maps?rlz=1G1ACAWCFRBE358&q=copyland%20ixelles&um=1&ie=UTF-8&hl=fr&sa=N&tab=wl)

并单击标记。应该会出现一个信息窗口。

我的问题是：如何在我的网站上添加相同的内容？

Ps：我知道如何构建 google.maps.InfoWindow 对象，但我不想自己创建 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:26:30.490

谷歌地图文档的这一部分解释了这一点：[https ://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

定义您的经纬度坐标

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922); 
```

设置地图选项

```
var mapOptions = {
  zoom: 4,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
} 
```

初始化你的地图

```
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

设置 infowWindow 的内容

```
var contentString = '<b>Set content for infowindow here in HTML<b>'; 
```

使用内容字符串初始化您的 infoWindow。

```
var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

将您的标记放在上面定义的地图上先前定义的标记处

```
var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Uluru (Ayers Rock)"
}); 
```

最后，只需将标记上的“点击”事件绑定到您创建的信息窗口。

```
google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

# javascript - Javascript 正则表达式第一次工作正常，但第二次不行，第三次再次工作，第四次不行，依此类推

> ID：13233654
> 
> 赞同：14
> 
> 时间：2012-11-05T14:00:27.530
> 
> 标签：javascript, jquery, regex

Javascript 正则表达式第一次运行良好，但第二次运行良好，第三次运行正常，第四次运行良好，依此类推:(

脚本 ：

```
<script language="javascript" type="text/javascript">
    var reg = /[^\w]/gi;
    function checkNonWordChars() {
        var str = $("#TestTextbox").val();
        if (reg.test(str)) {
            alert('!!! Non-Word Char Exists !!!');
        }
        else {
            alert('input accepted');
        }
    }    
</script> 
```

HTML：

```
<input type="text" id="TestTextbox"  />
<input type="button" value="Test" onclick="checkNonWordChars();" /> 
```

如果我单击一次按钮，它会发出警报，说“！！！非单词字符存在！！！” 但是如果我再次点击它，它会发出一个警告说“输入接受”:(

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T14:07:39.833

我怀疑这与使用`g`修饰符[使引擎记住其状态](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results)这一事实有关。

尝试删除`g`修饰符，无论如何您都不需要它。引擎将始终尝试在整个字符串中找到匹配项。因此，`g`修饰符实际上并没有与`test`函数一起做任何事情，而是用于`match`. 顺便说一下，您也不需要`i`修饰符，因为 `\w`它包括小写和大写字母。

最后一件事。正则表达式提供了`\W`相反的方便，`\w`因此等同于`[^\w]`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T14:27:08.373

**选项1**

使用构造函数而不是文字符号：

```
var reg = new RegExp('[^\w]','gi'); 
```

有关两者之间差异的更多信息：[https ://developer.mozilla.org/en-US/docs/Core_JavaScript_1.5_Guide/Regular_Expressions?redirect=no](https://developer.mozilla.org/en-US/docs/Core_JavaScript_1.5_Guide/Regular_Expressions?redirect=no)

**选项 2**

用符号标记字符串的结尾`$`：

```
var reg = /[^\w$]/gi; 
```

**选项 3**

如果您的正则表达式使用“g”标志，您可以`exec`多次使用该方法在同一字符串中查找连续匹配项。当您这样做时，搜索从正则表达式的属性指定的`substring`of开始（也将推进 lastIndex 属性）。`str``lastIndex``test`

来源：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)

因此，在您的情况下，测试只会在第 1、第 3、第 5、... 次工作。

只有在 Firefox 3 中有一个标志`y`，当指定时`exec`总是从 0 开始，`lastIndex`但在你的情况下这可能没有用。

您可以删除`g`标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:11:36.727

看来RegExp对象并没有我们想象的那么无状态。快速解决方法是在方法`var reg = /[^\w]/gi;`内部移动`checkNonWordChars()`

最好的祝福，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:29:39.633

如果您需要将该正则表达式设为全局，请将其更改为：

```
var reg = /[^\w]/ 
```

它也能正常工作，但不会出错！它也会更快，因为它只需要检查一个顽皮字符的实例，并且您不关心非单词字符的字符大小写。

# c# - 它的 BIOS 序列号最大长度是多少？

> ID：13233656
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:33.793
> 
> 标签：c#, .net, wmi, hardware, bios

我正在开发一个激活应用程序，我需要收集 BIOS 序列号来识别 PC，应用程序将 BIOS 序列号与其他数据结合起来，将被加密，我需要我的数据不超过加密的块大小防止构建另一个块，这意味着更长的激活字符串。我需要确保BIOS序列号的长度不会超过某个值，如果小于，我可以添加一些数据，但如果超过了我不能修剪它，因为我需要确保没有激活密钥适用于两台电脑。

我的问题很简单：BIOS 序列号的最大长度是多少？以及如何获得这些标准？

PS 做修剪给我们带来了很大的问题，因为有些序列比请求的值太长，所以存在一个运行多台 PC 的密钥。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:09:31.300

使用这样的 BIOS 信息总是至关重要的，因为有很多实现。即使你找到了一个标准，也不能保证每个供应商都能正确实施。我会对数据执行哈希函数（SHA256、MD5 等）。因此，您将始终具有与输入长度无关的相同输出长度。当然，输出的熵永远不会大于输入的熵。但这不是重点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:35:56.357

所有这些标准都在[`SMBIOS tables`](http://www.dmtf.org/sites/default/files/standards/documents/DSP0134_2.7.1.pdf)AFAIK 中定义，BIOS 序列号没有最大或固定长度，这只是一个以空字符结尾的字符串。

![在此处输入图像描述](../Images/1465de079a7b8b281424299a8e31d193.png)

# castle-windsor - 流畅地选择要注入的组件

> ID：13233659
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:44.603
> 
> 标签：castle-windsor

我有一些组件实现了相同的接口，我想选择哪一个被注入到我的`Repository`.

```
 Component.For<IRepository>().ImplementedBy<Repository>().<whatShouldGoHere>() 
```

我以为我可以使用它，`DependsOn`但现在我看到它`DependsOn`用于静态依赖项，例如字符串。是`IHandlerSelector`唯一的出路吗？我宁愿声明与组件注册一致。也许是工厂方法？有什么建议吗？

编辑示例构造函数

```
public PersitentRepository(Func<ISession,string> sessionFactory) 
```

挖掘了一下，我意识到委托是来自`TypedFactoryFacility`. 似乎发生了一些变化，因此现在仅按类型解析。在较早的 Castle 版本中，字符串参数用于按名称选择组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:03:23.073

一家工厂会成功的。

您需要将其添加`FactorySupportFacility`到您的容器中才能正常工作。

有关更多详细信息，请参阅位于[http://docs.castleproject.org/Default.aspx?Page=Factory-Support-Facility&NS=Windsor&AspxAutoDetectCookieSupport=1](http://docs.castleproject.org/Default.aspx?Page=Factory-Support-Facility&NS=Windsor&AspxAutoDetectCookieSupport=1)的 Castle Windsor 文档。

另请参阅[http://www.mail-archive.com/castle-project-users@googlegroups.com/msg04463.html](http://www.mail-archive.com/castle-project-users@googlegroups.com/msg04463.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:52:45.283

DependsOn 确实适用于静态以外的其他事情，问题是注入的委托没有解决它过去的方式。我最终注册了自己的组件来处理这个特定的委托

```
container.Register(Component.for<Func<ISession,string>>().ImplementedBy(sessionName => container.resolve<ISession>(sessionName)); 
```

（以上是凭记忆打出来的，如有错别字还请见谅）

# ruby-on-rails - 在一系列 RSpec 单元测试的 before 块中有一个方法可以吗？

> ID：13233661
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:51.363
> 
> 标签：ruby-on-rails, ruby, rspec, hook

我有一个非常精细的设置来将条件从通过更改为失败的四个组合方法称为合格？。

```
describe "#participant_age_eligible?" do
        it "returns whether participant is age-eligible" do
          @part.participant_age_eligible?(@pers).should == true
        end

        it "returns false if participant is not age eligible" do
          q = @survey_section.questions.select { |q| q.data_export_identifier ==
                                                 "#{OperationalDataExtractor::PbsEligibilityScreener::
                                                    INTERVIEW_PREFIX}.AGE_ELIG" }.first
          answer = q.answers.select { |a| a.response_class == "answer" && a.reference_identifier == "2" }.first
          Factory(:response, :survey_section_id => @survey_section.id, :question_id => q.id, :answer_id => answer.id, :response_set_id => @response_set.id)
          @part.participant_age_eligible?(@pers).should == false
        end
      end

      describe "#participant_psu_county_eligible?" do
        it "returns whether participant lives in eligible PSU" do
          @part.participant_psu_county_eligible?(@pers).should == true
        end

        it "returns false if participant coes not live in an eligible PSU" do
          q = @survey_section.questions.select { |q| q.data_export_identifier ==
                                                 "#{OperationalDataExtractor::PbsEligibilityScreener::
                                                    INTERVIEW_PREFIX}.PSU_ELIG_CONFIRM" }.first
          answer = q.answers.select { |a| a.response_class == "answer" && a.reference_identifier == "2" }.first
          Factory(:response, :survey_section_id => @survey_section.id, :question_id => q.id, :answer_id => answer.id, :response_set_id => @response_set.id)
          @part.participant_psu_county_eligible?(@pers).should == false
        end
      end 
```

还有另外两种方法，就像这两种方法一样。我想做的是提取

```
 q = @survey_section.questions.select { |q| q.data_export_identifier ==
                                                     "#{OperationalDataExtractor::PbsEligibilityScreener::
                                                        INTERVIEW_PREFIX}.AGE_ELIG" }.first
              answer = q.answers.select { |a| a.response_class == "answer" && a.reference_identifier == "2" }.first
              Factory(:response, :survey_section_id => @survey_section.id, :question_id => q.id, :answer_id => answer.id, :response_set_id => @response_set.id) 
```

部分到 before 块中的方法，然后传递相关参数，但我犹豫，因为我从未见过有人在 before 块中定义方法，甚至不确定你能做到，进一步，我不确定你是否甚至即使可以，也应该这样做，也许它指出了我没有看到的问题。所以我想问问 SO 社区深不可测的巨大专业知识。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:07:38.843

您始终可以在特定的 rspec 文件中定义方法，然后从该文件中的任何位置调用它们。例如：

```
# your_file_spec.rb
describe MyModel do
  before(:each) { setup_variables }

  describe ...
  end

  # I usually put my helper methods at the bottom
  def setup_variables
    # Do some work
  end
end 
```

您有时也可以在工作中使用“场景大纲”方法，例如：

```
# your_file_spec.rb
describe MyModel do
  examples = [{:name => "Joe", :login => "joe18"}, {:name => "Grace", :login => "grace12"}]

  examples.each do |example|
    it "logs in #{example[:name]}." do
      # Do some work
    end
  end
end 
```

您可能还会发现这很有用。

# java - 空属性在创建时也很脏？

> ID：13233662
> 
> 赞同：0
> 
> 时间：2012-11-05T14:00:53.357
> 
> 标签：java, hibernate, null

当我创建一个新实例然后[`flush()`](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#flush%28%29)我的 Hibernate[`Session`](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)时，这个实例的所有属性是否都标记为脏，包括`null`那些？

还是只有那些不脏的属性`null`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:11:35.260

Java 和 DBMS（例如 Mysql）中都没有脏值。默认情况下，在 java 中，所有原始类型都采用指定的零值，所有链接都采用 null 作为值。DBMS 也是如此，当您在使用默认值初始化的记录的表字段中插入记录时。

# iphone - 从后台返回时，在无缝循环中动画无限滚动图像不起作用

> ID：13233664
> 
> 赞同：0
> 
> 时间：2012-11-05T14:00:54.077
> 
> 标签：iphone, objective-c, xcode, calayer, cabasicanimation

> **可能的重复：**
> [在无缝循环中动画无限滚动图像](https://stackoverflow.com/questions/8790079/animate-infinite-scrolling-of-an-image-in-a-seamless-loop)

我有以下代码运行同一图像的无限循环

问题是当用户最小化应用程序并返回它时，图像停止动画并且完全消失

这是我的代码：

```
-(void)cloudScroll
{
UIImage *cloudsImage = [UIImage imageNamed:@"TitleClouds.png"];
UIColor *cloudPattern = [UIColor colorWithPatternImage:cloudsImage];
CALayer *cloud = [CALayer layer];
cloud.backgroundColor = cloudPattern.CGColor;
cloud.transform = CATransform3DMakeScale(1, -1, 1);
cloud.anchorPoint = CGPointMake(0, 1);
CGSize viewSize = self.cloudsImageView.bounds.size;
cloud.frame = CGRectMake(0, 0, cloudsImage.size.width + viewSize.width, viewSize.height);
[self.cloudsImageView.layer addSublayer:cloud];

CGPoint startPoint = CGPointZero;
CGPoint endPoint = CGPointMake(-cloudsImage.size.width, 0);
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
animation.fromValue = [NSValue valueWithCGPoint:startPoint];
animation.toValue = [NSValue valueWithCGPoint:endPoint];
animation.repeatCount = HUGE_VALF;
animation.duration = 3.0;
[cloud addAnimation:animation forKey:@"position"];
} 
```

**编辑：**[在无缝循环中动画无限滚动图像的](https://stackoverflow.com/questions/8790079/animate-infinite-scrolling-of-an-image-in-a-seamless-loop) 可能副本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:28:17.303

查看[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)协议参考。在调用方法的讨论部分中，`applicationDidEnterBackground:`您可以找到有关您问题的答案。

您可以在重新打开应用程序时尝试重新启动动画

# javascript - HTML5 文件系统初始化

> ID：13233665
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:56.417
> 
> 标签：javascript, html, dom-events, html5-filesystem

我尝试了一个使用 HTML5 FileSystem 的简单项目，因此我可以在客户端存储数据。

`onclick`我的第一次尝试是成功的，因为我在开始时使用 JavaScript 启动所有内容，并在or`onkeypress`事件中操作文件（读取文件并将其附加到 textarea 或 P；并写入/修改文件） 。

但是，当我在事件之外同时执行此操作时，文件系统的变量为空/未定义，我无法继续该过程。

这是运行良好的代码：

```
function initFS() {
        window.webkitStorageInfo.requestQuota(PERSISTENT,5*1024*1024,
        function(grantedBytes) {
            window.requestFileSystem(window.TEMPORARY, grantedBytes, function (filesystem)
            {
                fs = filesystem;
            }, errorHandler);
        });
}
document.body.onclick=function()
{
     alert(fs);
     fs.root.getFile('log.txt', {create: true, exclusive: true}, function(fileEntry) {
    }, errorHandler);
} 
```

结果`alert(fs)`是 DOM FileSystem，这意味着`fs`变量是 FileSystem。

但是当我这样做时：

```
function initFS()
{
       window.webkitStorageInfo.requestQuota(PERSISTENT,5*1024*1024,function(grantedBytes){
    window.requestFileSystem(window.TEMPORARY, grantedBytes, function(filesystem) {
        fs = filesystem;
        }, errorHandler);
    })

}

if (window.requestFileSystem) {
    initFS();  
}
alert(fs); 
```

`alert(fs)`返回的空值。有什么解决方案可以解决这个问题吗？任何解释都会对此有用。我最后的手段是添加一个按钮，这样点击后`fs`肯定是一个文件系统，但我尽量避免使用这种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:03:46.320

这可能是因为`requestQuota`和`requestFileSystem`函数是异步的。换句话说，在设置 fs*之前*`alert()`正在执行。

 *所以..你可以把所有的代码放在`requestFileSystem`回调中吗？我不清楚您要达到的目标

例如你可以这样做：

```
function initFS(callback)
{
   window.webkitStorageInfo.requestQuota(PERSISTENT,5*1024*1024,function(grantedBytes){
      window.requestFileSystem(window.TEMPORARY, grantedBytes, function(filesystem) {
          callback(filesystem)
      }, errorHandler);
   })

}

 if (window.requestFileSystem) {
    initFS(function (fs) {
        alert(fs)
    });  
 } 
```*

# php - 使用 PHP 模板化 HTML

> ID：13233666
> 
> 赞同：1
> 
> 时间：2012-11-05T14:00:56.727
> 
> 标签：php, html, function, templates, include

我试图弄清楚在我的网络应用程序中经常重复的克隆/模板 HTML 的最佳方法是什么。例如，我有一个投票`<form>`（见下文）需要位于多个页面上。

我想到了两种方法：

1.  函数调用，例如，`voteForm($action, $user_id, $formType, $success);`
2.  声明，`include`例如， `include '/myApp/views/voteForm.php'`

我更喜欢`include`声明 b/c：

1.  然后我不必决定函数的参数，这些参数可能会随着时间的推移而改变，迫使我在我的应用程序中存在的任何地方重写函数调用。使用该`include`语句，我可以在放置`include`d php 文件的任何位置使用变量（避免重新声明它们，这很痛苦 b/c 通常有很多变量）。
2.  我可以在 HTML 中编写 HTML，而不是作为我必须处理转义字符/json_encode 问题的 PHP 字符串。

我是否应该出于任何原因（例如，性能）重新考虑使用`include`它`function()`？还有其他我没有想到的模板解决方案吗？

```
 <form action="<?=$action?>" method='post' data-form-data='{'formType': '<?=$formType?>', 'success': '<?=$success?>'} >`
    <input type='hidden' value='<?=$user_id?>' name='user_id'>
    <input type='radio' value='1' name='vote'>
    <input type='radio' value='-1' name='vote'>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:06:15.477

这完全取决于您——您可以拥有一个需要您的 a 的混合体`function`（`include`设置包含文件可能需要用于显示目的的任何必要变量）。例如

```
function createForm($action,$foo,$bar){
  $form_action = $action;
  $form_foo = $foo;
  include('templates/form.inc');
} 
```

就性能而言，我不知道有什么巨大的好处。尽管如果您正在寻找一种更好的模板方法，您可能希望查看[smarty](http://www.smarty.net/)或其他可以为您处理大部分“艰巨工作”的系统。

请记住，当您的代码输出 HTML 时，您不再需要关注点分离。也就是说，如果您决定在以后更改站点的外观和感觉，您不会只查看`.inc`（或您使用过的任何扩展名）文件，而是现在要应用更改的文件`.inc` *和文件。* `.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:03:56.567

我会尽量避免将 HTML 放入函数调用中。我认为您在这里尝试实现的目标最适合包含声明 - 基于个人喜好。

至于性能 - 很难说，但您可以使用像 XDebug 这样的 PHP Profiler 来查看函数或包含是否是最有效的。

[http://xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:05:21.563

对于生成的大块 HTML，我建议使用包含。我更喜欢使用函数调用来获取特定的数据位。

再次，这是个人喜好，不能用真正“正确”的答案来回答。

就性能而言，我猜想根本没有太大区别，除非您一次调用数千次。

希望有帮助。

# regex - 修改用于解析 syslog 的 PS 脚本

> ID：13233670
> 
> 赞同：1
> 
> 时间：2012-11-05T14:01:05.657
> 
> 标签：regex, powershell

下面显示的 PS 脚本`hostname, date and Machine Type`将`SolarWinds.Net log`. 例如，请参阅下面的条目：

`ushdc1691: 19087606: Nov 05 13:29:35.131 UTC : %CCM_CALLMANAGER-CALLMANAGER-3-DeviceTransientConnection:`

我想知道如何`remove`在`Machine Type and the Hostname`.

当系统日志消息条件触发运行此脚本的操作时，此脚本会在 SolarWinds 日志中创建一个事件。警报触发器执行的命令是： `C:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe e:\scripts\createsyslogevent.ps1 '${Hostname}' '${Message}'`

```
param
(
[string] $hostname = $(throw "No Hostname supplied"),
    [string] $message = $(throw "No Message supplied")
)

$regex = [regex] '(^%:$)' #THis regex assumes MessageType present in $message
$out = $regex.split($message)
if ($out.length -eq '3')
{
write-host "Has MessageType"
write-host $out[1]
$description = $hostname + ": " + $out[1]
write-eventlog -logname SolarWinds.Net -EntryType Error -source AlertingEngine -eventID 6888 -message "$description"
exit
}

$regex1 = [regex] '(^[A-Z][a-z][a-z] \d{1,2} \d\d:\d\d:\d\d 201[1-3] )' #This regex assumes no  MessageType, Message starts with date/time and year--we need to test for this pattern first
$out1 = $regex1.split($message)
if ($out1.length -eq '3') 
{
write-host "No MessageType, has year in timestamp"
write-host $out1[1]
$description = $hostname + ": " + $out1[1]
write-eventlog -logname SolarWinds.Net -EntryType Error -source AlertingEngine -eventID 6888 -message "$description"
exit
}

$regex2 = [regex] '(^[A-Z][a-z][a-z] \d{1,2} \d\d:\d\d:\d\d )' #This regex assumes no MessageType, Message starts with date/time and there's no year
$out2 = $regex2.split($message)
if ($out2.length -eq '3')
{
write-host "No MessageType, no year in timestamp"
write-host $out2[1]
$description = $hostname + ": " + $out2[1]
write-eventlog -logname SolarWinds.Net -EntryType Error -source AlertingEngine -eventID 6888 -   message "$description"
exit
} 
```

`$message = [regex]::Replace($message, '(^.+%.+?: )', "");`

# java - 由于嵌套 bean，无法在 playframework 中使用 GSON 解析 JSON

> ID：13233671
> 
> 赞同：3
> 
> 时间：2012-11-05T14:01:09.990
> 
> 标签：java, playframework, gson, playframework-1.x

我创建了一个 Bean 作为我将要解析的 JSON 对象的表示。问题是，bean 有嵌套类。因此，编译失败。我通过删除课程进行了验证。该应用程序正确编译。这是我得到的错误：

```
2012-11-05 19:23:30,783 ERROR ~ 

@6c8po9gbf
Internal Server Error (500) for request GET /favicon.ico

Oops: NullPointerException
An unexpected error occured caused by exception NullPointerException: null

play.exceptions.UnexpectedException: Unexpected Error
    at play.Play.start(Play.java:545)
    at play.Play.detectChanges(Play.java:629)
    at play.Invoker$Invocation.init(Invoker.java:198)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at play.classloading.ApplicationCompiler$2.acceptResult(ApplicationCompiler.java:266)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:478)
    at play.classloading.ApplicationCompiler.compile(ApplicationCompiler.java:282)
    at play.classloading.ApplicationClassloader.getAllClasses(ApplicationClassloader.java:424)
    at play.Play.start(Play.java:505)
    ... 3 more 
```

javabean类是

```
import java.util.List;

import com.google.gson.Gson;

public class GsGetChallenge {

    public static void main(String... args) throws Exception {

        String json = "{\"response\":\n" + "    {\"salt\":\n"
                + " \"zP9UFJOklQLePOqf0lSh0NgdlXWAt8qhIq4adcP1opdkz8UwVz\",\n"
                + " \"status\":\"SUCCESS\",\n"
                + " \"challenge\":\"BXuQQ2056310911\"\n" + "}}";

        ResponseData responsee = new Gson().fromJson(json, ResponseData.class);

        // Show it.
        System.out.println(responsee.getResponse().getChallenge());
    }

}

class ResponseData {

    private Response response;

    public static class Response {
        private String salt;
        private String status;
        private String challenge;

        public String getSalt() {
            return salt;
        }

        public void setSalt(String salt) {
            this.salt = salt;
        }

        public String getStatus() {
            return status;
        }

        public void setStatus(String status) {
            this.status = status;
        }

        public String getChallenge() {
            return challenge;
        }

        public void setChallenge(String challenge) {
            this.challenge = challenge;
        }
    }

    public Response getResponse() {
        return response;
    }
    public void setResponse(Response response) {
        this.response = response;
    }
} 
```

在这种情况下，我该怎么做才能使用 GSON？我正在使用播放 1.2.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:18:35.557

将 ResponseData 移动到另一个 .java 或将 ResponseData 移动到 GsGetChallenge 并将其更改为静态类 GsGetChallenge。喜欢

```
public static void index() {
    String json = "{\"response\":\n" + "    {\"salt\":\n"
    ...
}

static class ResponseData {
    private Response response;
    ... 
```

# javascript - 正确处理 HTML5 画布引擎的时间

> ID：13233672
> 
> 赞同：1
> 
> 时间：2012-11-05T14:01:12.263
> 
> 标签：javascript, canvas, simulation, game-physics, timing

我正在为一个大学项目开发​​一个多弹模拟器，我想知道如何最好地设置 JavaScript 渲染到 HTML5 画布的时间

我正在使用 Euler 积分器设置进行物理和精度对于这个项目非常重要。渲染非常简单

我的问题是如何最好地设置所有这一切的时间。

现在我有：

*   在使用 setTimeout() 以固定时间步长循环的函数中运行的物理和其他逻辑
*   使用 requestAnimationFrame() 调用循环的另一个函数中的渲染（灵活的时间步长）

这两个循环同时运行（我知道 JavaScript 并不真正支持没有 Web Worker 的线程），但我不希望渲染（当前运行的 FPS 比需要的高得多）不必要地“窃取” CPU 周期物理模拟，如果你明白我的意思。

鉴于物理精度在这里最重要，您如何建议设置计时系统？（也许在这里使用 Web Workers 会很有用，但我还没有看到它在其他引擎中使用过）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:22:19.757

我建议您不要尝试“多线程”，除非您实际上正在这样做，即使那样，我也不一定会推荐它。

保持一切同步的最佳方法是使用单线程执行。`setTimeout`大约ms的单个循环`33`似乎适用于我的游戏。

此外，至少根据我的经验，`setTimeout`它提供了比`setInterval`or更多的审美体验`requestAnimationFrame`。使用`setInterval`，当帧延迟交付时，Javascript 会努力“赶上”，这会导致动画帧不一致。使用`requestAnimationFrame`时，会跳过帧以确保游戏流畅运行，这实际上使事情变得更加困难，因为您的用户并不完全确定他们的视图在任何给定的时间都是最新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:12:45.177

一种方法是设置处理物理的时间间隔，每 x 帧一次，渲染所有内容。

```
var physicsTime;
var renderFrequency;
var frameCount;

setInterval(function(){updateStuff()},physicsTime); 
```

然后在 updateStuff()

```
function updateStuff(){
  frameCount ++;
  if (frameCount >= renderFrequency){
    frameCount -= renderFrequency;
    render();
  }
  physics();
} 
```

# jsf - 在 Javascript 中获取 Tabview 的选项卡

> ID：13233674
> 
> 赞同：0
> 
> 时间：2012-11-05T14:01:24.700
> 
> 标签：jsf, primefaces

我在页面上有一个 tabview 并使用 javascript 动态添加选项卡。同时将打开的选项卡名称添加到列表（lstOpenedPages）中。但是关闭一个选项卡，我无法获取此选项卡的名称，该选项卡已关闭以从列表中删除。现在我想阅读 tabview 的剩余选项卡，因为我可以从列表 (lstOpenedPages) 中找到关闭的选项卡。

如何在 Javascript 中获取 tabview 的剩余标签？

xhtml代码

```
<p:tabView id="tw" widgetVar="tw">  
   <p:ajax event="tabClose" listener="#{MenuBean.onTabClose}"/>
</p:tabView>

<p:menuitem value="#{itemMenu.menuAck}" 
            action="#{MenuBean.OpenPage(itemMenu.pageName)}" 
            ajax="true"
            oncomplete="handleTabViewEvent(args);" 
/>

<script type="text/javascript">
      function handleTabViewEvent(args) {
          alert('Add tab here..');
       }
</script> 
```

豆

```
public void OpenPage(String pageName) {
    lstOpenedPages.add(pageName);
}

public void onTabClose(TabCloseEvent event) {  
    FacesContext context = FacesContext.getCurrentInstance();
    TabView tw = (TabView)context.getViewRoot().findComponent("centerForm:tw");
    String s = "I must delete tab here from lstOpenedPages which closed. But event does not give me tab information. It is always null. So I must be delete from javascript";
} 
```

# sql - 如何提高带参数的 SQL 查询的性能？

> ID：13233676
> 
> 赞同：1
> 
> 时间：2012-11-05T14:01:24.883
> 
> 标签：sql, sql-server, select, parameters, where-clause

我正在使用 SQL Server 2005。

我在执行这样的 SQL 语句时遇到问题

```
DECLARE @Param1 BIT
SET @Param1 = 1

SELECT 
    t1.Col1,
    t1.Col2
FROM
    Table1 t1
WHERE
    @Param1=0 OR
    (t1.Col2 in 
        (SELECT  t2.Col4
            FROM 
                Table2 t2
            WHERE 
                t2.Col1 = t1.Col1 AND 
                t2.Col2 = 'AAA' AND 
                t2.t3 <> 0)
    ) 
```

此查询执行很长时间。

但如果我`@Param1`用`1`, 替换查询执行时间约为 2 秒。

任何如何解决问题的信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:08:37.337

好吧，解释似乎很简单。对于您当前的条件，因为`@Param1=0`是假的（您之前将参数设置为 1），它需要评估您的第二个条件，它有一个子查询并且可能需要很长时间。如果您将第一个过滤器更改为`@Param1=1`，那么您就是在说它是正确的，并且不需要评估您的第二个过滤器，从而使您的查询更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:11:19.567

您似乎将优化器与您的 OR 语句混淆了。如果你删除它，你会发现它会为 SELECT 语句生成两个不同的执行计划——一个带有过滤器，另一个没有：

```
DECLARE @Param1 BIT
SET @Param1 = 1

if @Param1=0
begin
    SELECT 
        t1.Col1,
        t1.Col2
    FROM
        Table1 t1
end
else
begin
    SELECT 
        t1.Col1,
        t1.Col2
    FROM
        Table1 t1
    WHERE
        (t1.Col2 in 
            (SELECT  t2.Col4
                FROM 
                    Table2 t2
                WHERE 
                    t2.Col1 = t1.Col1 AND 
                    t2.Col2 = 'AAA' AND 
                    t2.t3 <> 0)
        )
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:14:07.687

这通常被称为 N+1 问题。
您正在表 1 中进行选择，对于您发现的每条记录，您将在表 2 中查找内容。
通过将您的 @Param1 设置为在您的选择中永远找不到的值，sql 引擎将跳过子查询。
为了避免这种行为，您可以使用 JOIN 语句将两个表连接在一起，然后使用 where 语句过滤结果。连接语句会比单个子查询慢一点，因为您将 2 个表相互匹配，但是因为您只需要执行一次连接（而不是 N 次），您将获得显着的性能提升。
示例代码：

```
DECLARE @Param1 BIT
SET @Param1 = 1

SELECT t1.Col1,t1.Col2
FROM Table1 t1
INNER JOIN Table2 t2 on t1.Col1 = t2.Col1
WHERE @Param1=0 
OR t2.Col2 = 'AAA' 
AND t2.t3 <> 0 
```

# clearcase - 在 ClearCase 中恢复用户更改

> ID：13233681
> 
> 赞同：2
> 
> 时间：2012-11-05T14:01:44.907
> 
> 标签：clearcase

我们使用 ClearCase 作为控制版本系统。

在我们的系统中，有时由于时间限制，我们会在没有一些开发人员提交的情况下发布。

例如，我在六个类中进行了一些更改，但另一个用户也对它们中的全部或部分进行了更改。而且我必须在没有他更改的情况下提交代码。所以我用以前的版本扫描我的文件，这样我就可以恢复他的更改。但这是一个缓慢而无聊的过程。

还有另一种方法吗？也许是扩展或脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:17:15.290

使该过程自动化的唯一方法是：

*   [减法合并或负合并](https://stackoverflow.com/a/1637405/6309)（如[IBM 文章](http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21123001)中所述）：
    `cleartool merge -to filename -delete -ver \main\branch\version_number`

*   `cset.pl`，它可以获取 UCM 活动的所有签入并取消它们。
    请参阅“ [Clearcase：如何回滚特定分支上的所有更改？](https://stackoverflow.com/questions/6039121/clearcase-how-to-rollback-all-changes-on-specific-branch/6039686#6039686) ”。
    但这是针对 UCM 的（可能不是您的情况）

在这两种情况下，想法都是创建一个新版本，取消其他开发人员的版本。

# c# - 在测试中为 WPF 应用程序设置 CurrentPrincipal

> ID：13233683
> 
> 赞同：1
> 
> 时间：2012-11-05T14:01:48.010
> 
> 标签：c#, wpf, security, principal

我们有一个 WPF 应用程序，它使用 CurrentPrincipal 来处理安全性。这一切都很好。

现在，在测试项目中，我们调用视图模型操作。问题是，在测试的初始化中，我们创建了一个新的应用程序实例，但我们不知道如何在这个应用程序上设置 CurrentPrincipal：

```
 private void TestInitialize()
 {
      var app = new App();
      // setting Thread.CurrentPrincipal doesn't set app thread it seems
 } 
```

任何人都知道如何从应用程序外部为 WPF 应用程序设置 CurrentPrincipal？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:09:42.397

这里有许多不同的策略可供选择，但许多人采用的一种策略是模拟模拟当前线程的主体和身份所必需的 IPrincipal 和 IIdentity 对象。接下来，我将展示如何使用 Mocking 框架 Moq 来完成此操作：

```
using System.Security.Principal;
using System.Threading;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;

namespace MockingIdentitySample.Test
{
 [TestClass]
 public class UnitTest1
{

    [TestInitialize]
    public void TestInitialize()
    {
        SetupMockedPrincipalAndIdentity(true, true, "John Doe"); 
    }

    private void SetupMockedPrincipalAndIdentity(bool autoSetPrincipal, bool isAuthenticated, string identityName)
    {
        var mockedPrincipal = new Mock<IPrincipal>();
        var mockedIdentity = new Mock<IIdentity>();
        mockedIdentity.Setup(m => m.Name).Returns(identityName);
        mockedIdentity.Setup(m => m.IsAuthenticated).Returns(isAuthenticated); 
        mockedPrincipal.Setup(p => p.Identity).Returns(mockedIdentity.Object);

        if (autoSetPrincipal)
         Thread.CurrentPrincipal = mockedPrincipal.Object;
    }

    [TestMethod]
    public void TestMethod1()
    {
        Assert.AreEqual(Thread.CurrentPrincipal.Identity.Name, "John Doe");
        Assert.IsTrue(Thread.CurrentPrincipal.Identity.IsAuthenticated); 
    }

   }
  } 
```

注意 Thread.CurrentPrincipal 可以直接设置，但是在编写单元测试时，一般强烈建议使用模拟框架或隔离框架。通常我们不是在测试安全代码，而是在代码中为视图模型或类似类编写单元测试，因此我们抽象、隔离或模拟这些依赖关系，例如线程上的当前主体，这样我们就可以专注于我们真正想要的东西为我们的代码逻辑编写单元测试。

当然，必须选择 mocking 是正确的选择，还是 Moq 是正确的使用框架。在模拟方面有几种选择。Moq 是一个非常好的模拟框架，但不能模拟例如静态方法。其他模拟框架提供比 Moq 等更多的功能。

如果这似乎是一条可行的路线，可在此处获得最小起订量的快速入门：

[http://code.google.com/p/moq/wiki/QuickStart](http://code.google.com/p/moq/wiki/QuickStart)

（请注意，我是一名独立开发人员，我建议 Moq 的原因不是因为我喜欢，而是因为我之前已经使用过这个模拟框架来处理与你在这里类似的场景）。

# sparql - 使用 SPARQL 查询 DBpedia 中的“Wikipage disambiguates”

> ID：13233689
> 
> 赞同：2
> 
> 时间：2012-11-05T14:02:03.907
> 
> 标签：sparql, dbpedia

我刚刚开始使用 DBpedia 和 SPARQL。我想按如下方式使用它：

获取输入 x，我想返回 x 的“Wikipage disambiguates”，其中 x 是“Wikipage redirect”的可能值。换句话说，我想搜索所有“Wikipage disambiguates”以查找 x 并返回其相应的“Wikipage disambiguates”。

我想在教育组织上使用它： [http](http://dbpedia.org/fct/facet.vsp?iri=http%3A%2F%2Fschema.org%2FEducationalOrganization&sid=3532&cmd=new_with_class) ://dbpedia.org/fct/facet.vsp?iri=http%3A%2F%2Fschema.org%2FEducationalOrganization&sid=3532&cmd=new_with_class 和一般组织： [http://dbpedia .org/fct/facet.vsp?iri=http%3A%2F%2Fdbpedia.org%2Fontology%2FCompany&sid=3537&cmd=new_with_class](http://dbpedia.org/fct/facet.vsp?iri=http%3A%2F%2Fdbpedia.org%2Fontology%2FCompany&sid=3537&cmd=new_with_class)

因此，我想寻求您的帮助 - 我需要问什么问题？

PS：我正在拼命寻找使用 SPARQL 和 DBpedia 的教程，但找不到任何能达到我目标的东西。你能推荐给我吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:25:45.970

可能，您看起来像：

1) 查找给定资源的所有重定向：[查找重定向](http://www.s3space.com?q=select%20%2a%0Awhere%20%7B%0A?y%20%3Chttp://dbpedia.org/ontology/wikiPageRedirects%3E%20%3Chttp://dbpedia.org/resource/Harvard_University%3E%0A%7D%0Alimit%2010%0A&d=http://dbpedia.org/sparql/sparql)：

```
select ?x
where {
?x <http://dbpedia.org/ontology/wikiPageRedirects> <http://dbpedia.org/resource/Harvard_University>
}
limit 10 
```

结果：

*   [http://dbpedia.org/resource/New_College,_Cambridge,_Massachusetts](http://dbpedia.org/resource/New_College,_Cambridge,_Massachusetts)
*   [http://dbpedia.org/resource/Harvard_U](http://dbpedia.org/resource/Harvard_U)。
*   [http://dbpedia.org/resource/New_College,_Cambridge,_MA](http://dbpedia.org/resource/New_College,_Cambridge,_MA)
*   [http://dbpedia.org/resource/University_of_Harvard](http://dbpedia.org/resource/University_of_Harvard)
*   [http://dbpedia.org/resource/哈佛](http://dbpedia.org/resource/Harvard)
*   [http://dbpedia.org/resource/Haravrd](http://dbpedia.org/resource/Haravrd)
*   [http://dbpedia.org/resource/Harvard-Radcliffe_TV](http://dbpedia.org/resource/Harvard-Radcliffe_TV)
*   [http://dbpedia.org/resource/Harvard_Univ](http://dbpedia.org/resource/Harvard_Univ)。
*   [http://dbpedia.org/resource/Harvard_university](http://dbpedia.org/resource/Harvard_university)
*   [http://dbpedia.org/resource/Kremlin_on_the_Charles](http://dbpedia.org/resource/Kremlin_on_the_Charles)

2)[查找“X”的所有 wikiPageDisambiguates](http://www.s3space.com?q=select%20%2a%0Awhere%20%7B%0A%20%20?x%20%3Chttp://dbpedia.org/ontology/wikiPageDisambiguates%3E%20?y.%0A%20%20%20%3Chttp://dbpedia.org/resource/University_of_Harvard%3E%20%3Chttp://dbpedia.org/ontology/wikiPageRedirects%3E%20?y%0A%7D%0Alimit%2010%0A&d=http://dbpedia.org/sparql/sparql)，其中“X”是上述之一：

```
select ?x ?y
where {
  <http://dbpedia.org/resource/University_of_Harvard> <http://dbpedia.org/ontology/wikiPageRedirects> ?y.     
  ?x <http://dbpedia.org/ontology/wikiPageDisambiguates> ?y.
}
limit 10 
```

结果：

*   x -> y
*   [http://dbpedia.org/resource/Harvard_(消歧义)](http://dbpedia.org/resource/Harvard_(disambiguation)) -> [http://dbpedia.org/resource/Harvard_University](http://dbpedia.org/resource/Harvard_University)
*   [http://dbpedia.org/resource/HU](http://dbpedia.org/resource/HU) -> [http://dbpedia.org/resource/Harvard_University](http://dbpedia.org/resource/Harvard_University)

[您可以在s3space](http://www.s3space.com/)测试/保存/共享不同的查询。

# php - 选项的 default="default" 不起作用

> ID：13233695
> 
> 赞同：1
> 
> 时间：2012-11-05T14:02:25.010
> 
> 标签：php, wordpress, rating, article

将以下脚本添加到 Wordpress 中的 function.php 文件中：

```
add_action( 'add_meta_boxes', 'rating_select_box' );
function rating_select_box() {
    add_meta_box(
        'rating_select_box', // id, used as the html id att
        __( 'Select rating:' ), // meta box title, like "Page Attributes"
        'rating_select_cb', // callback function, spits out the content
        'post', // post type or page. We'll add this to posts only
        'side', // context (where on the screen
        'low' // priority, where should this go in the context?
    );

}

function rating_select_cb( $post )
{
    global $wpdb;
    $value = get_post_meta($post->ID, 'rating', true);
    echo '<div class="misc-pub-section misc-pub-section-last">
         <span id="timestamp">'
         . '<label>Select a rating:<br></label>';

         $selected = ($value == $result->post_name) ? ' selected="selected" ' : null;

         echo '<select name="rating">';
         echo '<option value="" default="default"> None... </option>';
         echo '<option value="0" '.$selected.'> G — Suitable for all audiences </option>';
         echo '<option value="1" '.$selected.'> PG — Possibly offensive, usually for audiences 13 and above </option>';
         echo '<option value="2" '.$selected.'> R — Intended for adult audiences above 17 </option>';
         echo '<option value="3" '.$selected.'> X — Even more mature than above </option>';
         echo '</select>';      

    echo '</span></div>';
}

add_action( 'save_post', 'save_metadata');

function save_metadata($postid)
{   
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return false;
    if ( !current_user_can( 'edit_page', $postid ) ) return false;
    if( empty($postid) ) return false;

    if ( is_null($_REQUEST["rating"]) ) {
        delete_post_meta($postid, 'rating');
    } else {
        update_post_meta($postid, 'rating', $_REQUEST['rating']);
    }

} 
```

将在帖子页面中添加一个带有下拉列表的框。我希望启用默认选项，`None...`因此我`default="default"`在该选项中添加了一个，但它不起作用。默认情况下，选择最大的数值，在这种情况下，它是`X — Even more mature than above`。

**我在做什么错**？我怎样才能使它`None...`默认选择该选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:15:57.083

在`select`列表中，“选择”选项的正确方法是使用`selected="selected"`，而不是`default="default"`。将您的“无”选项更改为以下内容应该可以解决它：

```
echo '<option value="" selected="selected"> None... </option>'; 
```

但是，您不是在动态创建`select`列表，您只是在输出一个完整列表，并且您也会遇到选择其他值的问题。要解决这个问题，如果选项不会改变，您可以将它们放在一个数组中以循环它们。您可以使用以下新代码修改您的`rating_select_cb()`方法以实现此目的：

```
function rating_select_cb( $post ) {
    global $wpdb;
    $value = get_post_meta($post->ID, 'rating', true);
    echo '<div class="misc-pub-section misc-pub-section-last"><span id="timestamp"><label>Select a rating:<br></label>';

    // build an array of each available rating
    $ratings = array(
        1 => 'G — Suitable for all audiences',
        2 => 'PG — Possibly offensive, usually for audiences 13 and above',
        3 => 'R — Intended for adult audiences above 17',
        4 => 'X — Even more mature than above'
    );

    echo '<select name="rating">';
    echo '<option value=""' . ((($value == '') || !isset($ratings[$value])) ? ' selected="selected"' : '') . '> None... </option>';

    // output each rating as an option
    foreach ($ratings as $id => $text) {
        echo '<option value="' . $id . '"' . (($value == $id) ? ' selected="selected"' : '') . '">' . $text. '</option>';
    }
    echo '</select>';

    echo '</span></div>';
} 
```

如果选择的选项不在可用的评级列表中，此方法将*默认*选择“无”选项。`$value`之后，它将遍历每个评级并将其作为选项输出。如果评级`$id`与 selected 匹配`$value`，它将被标记为选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:07:54.450

你应该像这样使用它：

```
echo '<option value="" selected="selected"> None... </option>'; 
```

# php - 在不同模型中使用单个自定义验证规则

> ID：13233697
> 
> 赞同：0
> 
> 时间：2012-11-05T14:02:26.590
> 
> 标签：php, validation, model, cakephp-2.0

我正在尝试用 CakePHP2 编写我的第一个项目（我之前使用过 CakePHP1），但我遇到了以下问题。

我有几个模型需要一个字段的自定义验证规则（个人数字代码）。验证规则非常大，所以我不想在每个模型中重复代码。

相反，我考虑编写一个带有函数的组件，该函数将接收一个字符串作为参数并对其进行验证，然后从每个模型中调用该特定函数。

我读到组件应该在控制器中使用，所以也许这不是最好的方法？

我正在尝试做的实际上是扩展 ModelValidator 并添加我自己的自定义规则，但我不知道这是否可能。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:06:26.070

不，组件不适用于模型。我为我的自定义验证规则所做的是向 AppModel 添加方法。然后，您可以在模型的任何验证数组中使用它们。

如果您还不知道如何使用它们，请参阅有关制作自定义验证方法的 Cake book 部分：

[http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

但是，不要将方法放入您需要的每个模型中，而是将其放入您的 AppModel 中（如果您没有 AppModel 类，请创建如下所示的类并将其保存到`app/Model/AppModel.php`。您的所有模型都将继承此类，所以您的自定义验证方法将可用于任何模型。）

这是一个简单的例子：

```
/**
 * app/Model/AppModel.php
 */
class AppModel extends Model {

    /**
     * Validation rule for integers
     *
     * @param  mixed $value
     * @return bool
     */
    public function validateInteger($value) {
        return preg_match('/^\d+$/', array_shift($value));
    }

}

/**
 * app/Model/MyModel.php
 */
class MyModel extends AppModel {

    /**
     * Validation
     *
     * @var array
     */
    public $validate = array(
        'my_field' => array(
            'rule' => 'validateInteger',
            'message' => 'This field only accepts integers'
        )
    );

} 
```

我还玩弄了一个自定义验证行为的想法，其中包含所有这些验证方法，但由于行为的限制，我发现它不是特别好，也不是那么方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:11:03.190

我找到了自己问题的答案：行为。

CakePHP 结构建议：

*   组件应该在控制器中使用

*   视图中应使用助手

*   行为应该在模型中使用

为了定义行为，我做了以下事情：

1.  在 app/Model/Behavior/ValidateBehavior.php 文件中：

    ```
    class ValidateBehavior extends ModelBehavior {

        // the first param is the model object
        public function isValidCnp($Model, $data) {

        // data is an array that contains the field name and value
        // define validations rules here
        // return true or false
        }
    } 
    ```

2.  在我需要验证数据的模型 app/Model/User.php 中：

    ```
     class User extends AppModel {

        // link the behavior to the model
        public $actsAs = array('Validate');

        // define a custom validation rule that calls a function from the behavior
        public $validate = array(
           'cnp' => array(
               'custom' => array(
                  'rule' => array('isValidCnp')
               )
            ),
        );
     } 
    ```

Behaviors 的好处是它们看起来像父类，它们还可以包含 beforeSave、beforeDelete 等的回调函数。

模型可以像自己的方法一样从 Behavior 调用函数，这意味着行为也可以在控制器中使用：

```
$this->User->isValidCnp() 
```

# logging - Zabbix 触发在某个时间段内检查文件

> ID：13233699
> 
> 赞同：1
> 
> 时间：2012-11-05T14:02:31.773
> 
> 标签：logging, monitoring, zabbix

我需要设置一个 zabbix 触发器，它将每天从 20 小时到 22 小时检查一个日志文件，并寻找某种模式。如果这两个小时内没有数据，则应发出警报。我配置的触发器的语法是这样的：

* * *

> “{item.time(0)}>200000&{item.time(0)}<220000&{item.nodata(7800)}=1”

* * *

此触发器工作正常。但是，我注意到两个不好的方面：

1.  如果在 20 小时未收到文件，它会触发警报，但我需要它来触发它，前提是在 22 小时仍未收到文件。
2.  即使直到 22h 还没有收到文件，它也会在 22h00m30s 时发送一个 OK 消息（一旦它不再在指定的时间段内）

我正在考虑将时间段缩短到 30 分钟（从 21 小时 30 分到 22 小时）：这解决了第一个问题，但我仍然遇到第二个问题。

最后一件事。如果我将时间段缩短到 30 分钟，但让代理查找数据 7800 秒（nodata（7800）），它会检查在 21h30 之前写入的日志条目吗？

请，如果您有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:20:36.747

使用 cronjob zabbix_trapper 发送数据可能会更好。

在 Zabbix 服务器上，您将使用“file.summary”之类的内容创建一个陷阱检查。在主机上，您将创建一个在适当时间检查文件的脚本。它可能看起来像这样：

```
#!/bin/bash
set -e

if [[ `pattern check` == "0" ]]
then
  /usr/bin/zabbix_sender -z zabbix-server.com -s `hostname` -k file.summary -o 1
else
  /usr/bin/zabbix_sender -z zabbix-server.com -s `hostname` -k file.summary -o 0
fi 
```

您应该将警报设置为以 != 0 的值触发。

# r - R：R中的SAS（if/then语句）

> ID：13233700
> 
> 赞同：1
> 
> 时间：2012-11-05T14:02:39.403
> 
> 标签：r

我以前在 SAS 工作，然后出于学术要求的原因决定转向 R。我的数据（healthdemo）是包含一些健康诊断代码（ICD-10）的健康数据，我想将这些代码分成不同的列。这是 str(healthdemo) 的一部分：

```
$ PATIENT_KEY     : int  7391510 7404298 7390196 7381208 7401691 7381223 7383005 10188634 7384574 7398317 ...
 $ ICDCODE         : Factor w/ 1125 levels "","H00","H00.0",..: 654 56 654 654 665 48 90 679 654 654 ...
 $ PATIENT_ID      : int  39387 50244 38388 27346 49922 27901 27867 61527 33186 45309 ...
 $ DATE_OF_BIRTH   : Factor w/ 14801 levels "","01/01/1000",..: 7506 10250 52 73 94 6130 85 2710 95 100 ... 
```

ICDCODE 包含从 H00 到 J99 的多种疾病；首先，我将 ICDCODE 中的字母与数字分开

```
healthdemo$icd_char = substr(healthdemo$ICDCODE,1,1)
healthdemo$icd_num = substr(healthdemo$ICDCODE,2,2) 
```

然后我通过这个函数创建了疾病列：

```
healthdemo$cvd = 0
healthdemo$ihd = 0
healthdemo$mi = 0
healthdemo$dys = 0
healthdemo$afib = 0
healthdemo$chf = 0 
```

现在我想应用一个类似于这个 SAS 函数（我曾经使用过）的函数：

```
if icd_char = 'I' and 01 <= icd_num < 52 then cvd = 1;

if icd_char = 'I' and 20 <= icd_num <= 25 then ihd = 1;

if icd_char = 'I' and 21 <= icd_num <= 22 then mi = 1;

if icd_char = 'I' and 46 <= icd_num <= 49 then dys = 1;

if icd_char = 'I' and icd_num = 48 then afib = 1; 
```

此函数将给每个患者分配给定的 ICD 字符和 ICD 编号到 cvd=1（例如）等等。

我尝试在 R 中使用这些函数，但它们对我不起作用：

```
healthdemo$cvd[healthdemo$icd_char == 'I' & 01 <= healthdemo$icd_num 
      & healthdemo$icd_num < 52 ] <- 1 
```

还有这个

```
if (healthdemo$icd_char == "I" &  01 < = healthdemo$icd_num < 52  )
   {healthdemo$cvd <- 1} 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:20:52.340

SAS 中 IF ... THEN >>> 的行为是通过使用 NOT if(...){...} 而是使用 ifelse(..., ..., ...) 来实现的。而且你不能使用表格`a < var < b`。此外，您还没有完全了解 R 编程的功能范式。

试试这个，而不是你的最后一句话：

```
healthdemo$cvd <- NA   # initialize to missing
healthdemo$cvd <- ifelse (healthdemo$icd_char == "I" & 
                           01 <= healthdemo$icd_num &
                           healthdemo$icd_num < 52 , 1, healthdemo$cvd ) 
```

请注意，表单：`var <- ifelse(logicalvec, value, var)`允许您进行选择性替换。旧值是默认值，只有逻辑向量中的“并行”值 TRUE 才会触发更改。

Robert Muenchen 写了一本题为“R for SAS and SPSS Users”的书。还有一个免费提供的草稿版本，大约 70 页长，应该通过网络搜索显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:47:12.107

当我从 SAS 过渡到 R 进行与健康相关的研究时，我也遇到了类似的困难。我的解决方案是尽可能放弃“如果...那么”的方法，并利用 R 的一些独特的本地编程功能。这是解决您的问题的两种方法。

首先，您可以使用索引来查找和替换元素。以下是您描述的一些出院数据：

```
hosp<-read.csv(file="http://www.columbia.edu/~cjd11/charles_dimaggio/DIRE/resources/R/sparcsShort.csv",stringsAsFactors=F)
head(hosp) 
```

假设我想确定曼哈顿的每一个与出生有关的诊断。我首先创建一个逻辑向量，为我的搜索条件返回一系列 TRUES 和 FALSES，然后按该逻辑向量索引我的数据框。在这种情况下，我还限制了我想要返回的列或变量：

```
myObs<-hosp$county==59 & hosp$pdx=="V3000 " #note space
myVars<-c("age", "sex", "disp")
myFile<-hosp[myObs,myVars]
head(myFile) 
```

第二种，也许在计算上更优雅的方法是使用像“grep”这样的函数。假设您有兴趣识别所有物质滥用诊断，例如酒精滥用（291、303、305 和子代码）、阿片类药物、大麻、安非他明、致幻剂和可卡因（304 和相关子代码），或非特异性与药物滥用有关的诊断 (292)。在 SAS 中，您会写出某种较长的 if-then 语句（或更高效的数组）：

```
#/*********************** SUBSTANCE ABUSE *****************/
#if pdx in /* use ICD9 codes to create diagnoses */ (’2910’,’2911’,’2912’,’2913’,’2914’,’2915’,
#   ’29181’,’29189’, ’2919’,’2920’,’29211’,’29212’,’2922’,’29281’,’29282’,’29283’, #........etc....,’30592’,’30593’)
#Then subst_ab=1; 
#Else subst_ab=0; 
```

在 R 中，您可以改为编写：

```
substance<-grep("^291[0-9,0-9]|^292[0-9,0-9]|^303[0-9,0-9]|^304[0-9,0-9]^305[0-9,0-9]", hosp$pdx)
hosp$pdx[substance]
hosp$subsAb<-"No"
hosp$subsAb[substance]<-"Yes"
hosp$subsAb[1:100]

table(hosp$subsAb)
plot(table(hosp$subsAb))

library(ggplot2)
qplot(subsAb, age,data=hosp, alpha = I(1/50)) 
```

Tomas Aragon 为流行病学家写了一篇精彩的 R 介绍，详细介绍了这些方法。(http://www.medepi.net/docs/ph251d_fall2012_epir-chap01-04.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:27:40.037

我想问题是`icd_num`由于不是数字。

使用以下命令创建此变量：

```
healthdemo$icd_num <- as.numeric(substr(healthdemo$ICDCODE, 2,
                                        nchar(healthdemo$ICDCODE))) 
```

（如果你想去掉 后面的数字，用`.`代替。）`as.numeric``as.integer`

那么你的第一种方法应该有效：

```
healthdemo$cvd[healthdemo$icd_char == 'I' &
               01 <= healthdemo$icd_num &
               healthdemo$icd_num < 52 ] <- 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-22T15:19:12.377

我创建了[icd](https://cran.r-project.org/package=icd)包来解决这类问题。您可以使用标准疾病组，或创建自己的疾病组。然后它可以快速浏览您的所有代码并将疾病组分配给每个患者。它适用于 ICD-9 和 ICD-10 代码。

我发现纯文本处理（如`grep`之前的答案）既慢又不可靠。ICD 代码的记录方式有很多变化，例如，ICD-9 代码`X91.9`等价于 0919。数十万行的字符串处理对于我有效地使用 R 函数来说太慢了，所以我使用了很多来编写包C++，因此更大的数据用户可以在几秒钟内将合并症分配给一百万患者。希望这可以帮助。

# objective-c - 直接设置 UICollectionViewFlowLayout 对象属性？

> ID：13233707
> 
> 赞同：0
> 
> 时间：2012-11-05T14:02:57.123
> 
> 标签：objective-c, ios

是否可以直接设置`UICollectionViewFlowLayout`对象属性而不接触`UICollectionViewDelegateFlowLayout`协议？

例如，如果我希望每个项目的大小都相同，我可以这样做：

```
self.collectionViewFlowLayout.itemSize = CGSizeMake(100,100) 
```

而不是这个：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return CGSizeMake(100, 100);
} 
```

如果是肯定的，我该如何引用该`UICollectionViewFlowLayout`对象？

如果是否定的，你能解释为什么 Apple 选择将其作为协议吗？它显然需要更多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:37:03.797

您可以使用 UICollectionViewController 中的默认流布局。例如，从您的 viewDidLoad 您可以调用

```
UICollectionViewFlowLayout *flowLayout = (UICollectionViewFlowLayout *)[[self collectionView] collectionViewLayout]; 
```

然后设置属性：

```
[flowLayout setItemSize:CGSizeMake(100.0,100.0)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:26:13.033

是的，这是可能的，但不能通过访问现有的 UICollectionViewFlowLayout 实例。您需要继承 UICollectionViewFlowLayout 并处理您想要在子类中使用的所有属性。

今年有一些很棒的 WWDC 会议，我建议观看它们。您可以在此处查看[Session 205（需要登录）](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)和[Session 219，此处（需要登录）](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)。第二个视频将直接解决您的问题。

# wcf - NServiceBus Saga/Handler 调用 Wcf 服务

> ID：13233714
> 
> 赞同：1
> 
> 时间：2012-11-05T14:03:14.813
> 
> 标签：wcf, handler, nservicebus, saga

有没有人能帮助我从 NServiceBus Saga\Handler 中正确调用 Wcf 服务？

目前我正在从处理程序中进行同步调用。

然而，IIRC 不久前在 NServiceBus 文档页面上建议使用 Saga，但没有提供更多细节。

我的理解是 Saga 是首选，因为它可以在处理 Wcf 调用时持久化，然后恢复以接收响应。（唯一的另一个想法是 Saga 是首选，因为它们通常比处理程序运行时间更长）。

我需要帮助的是根据 Wcf 服务的回复恢复 Saga 实例的最合适方法。

谢谢马克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T20:12:59.193

您实际上不希望 saga 直接调用任何外部资源。

相反，saga 将向处理程序发送消息，并且该处理程序将同步调用 WCF，然后将消息与响应一起发送回。

如果对 WCF 的调用超时，则处理程序将执行其自动重试逻辑，或者消息可能最终进入错误队列。

然后，如果在特定时间段内未收到响应，saga 将能够处理如何处理的逻辑。

# c# - 通过 C# 连接到 SQL Server 2008 数据库

> ID：13233715
> 
> 赞同：3
> 
> 时间：2012-11-05T14:03:20.157
> 
> 标签：c#, sql-server-2008, permissions, database-connection, ssms

我正在尝试连接到我在计算机上的 SQL Server 2008 中创建的数据库。我有一个 Windows 身份验证登录，如下所示：

```
try
{
  string sCon = @"Data Source=David-PC\SQLEXPRESS; Initial Catalog=ZarTrackDB; Integrated Security = true";
   SqlConnection dbConn;
   dbConn = new SqlConnection(sCon);
   dbConn.Open();
}
catch (Exception ex)
{
    MessageBox.Show(this, "An error occurd while attemtpting to connect to DB.\n" + ex.Message, "DB Connection Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
     return;
} 
```

但是它不断抛出异常：

> 用户 David-PC\David 登录失败

我可以连接到主数据库：

```
 string sCon = @"Data Source=David-PC\SQLEXPRESS; Initial Catalog=Master; Integrated Security = true"; 
```

所以我想问题可能是我没有权限？尽管当我通过 SQL Server Management Studio 登录时，我可以如何在 ZarTrackDB 上完美地插入创建查询等，但我该如何授予 myslef 访问该数据库的权限。

我真的不知道该怎么办了，请帮忙！

编辑：

这是我尝试登录的帐户的用户映射的屏幕截图：

**用户映射：**

![在此处输入图像描述](../Images/fbdb355720a1c69f566816e5faa6e00c.png)

**服务器角色**：

![在此处输入图像描述](../Images/0f20ccecede6a5e6c0bc38d7c2122b89.png)

更新：

如果我登录到 master 并尝试访问 ZarTrack ：

```
 string sCon = @"Data Source=David-PC\SQLEXPRESS; Initial Catalog=Master; Integrated Security = true";
                SqlConnection dbConn;
                dbConn = new SqlConnection(sCon);
                dbConn.Open();

                string sql = "USE ZarTrackDB "+
"CREATE TABLE Customers ("+

"CustomerID int IDENTITY PRIMARY KEY NOT NULL," +
"CompanyName varchar(30) NOT NULL,"+
"CompanyAddress varchar(40) NOT NULL,"+
"Email varchar(40) NOT NULL,"+
"PhoneNumber varchar(15) NOT NULL"+
");";
                SqlCommand dbCmd = new SqlCommand();
                dbCmd.CommandText = sql;
                dbCmd.Connection = dbConn;

                dbCmd.ExecuteNonQuery(); 
```

我得到例外：

![在此处输入图像描述](../Images/046a9bf2c87aa7b92a0e5c40aa3f23e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:56:57.043

看来

> 大卫-PC\SQLEXPRESS

我这样做时的问题是：

```
string sCon = @"Data Source=David-PC; Initial Catalog=ZarTrackDB; Integrated Security = true";
SqlConnection dbConn;
dbConn = new SqlConnection(sCon);
dbConn.Open(); 
```

它完美地工作

# android - Android ViewFlipper 使用 URL 中的图像更改背景如何

> ID：13233726
> 
> 赞同：3
> 
> 时间：2012-11-05T14:04:11.903
> 
> 标签：android, viewflipper

我正在尝试更改 ViewFlipper 上的背景图像...但无法使其正常工作...在将其设置到 ViewFlipper 之前是否必须下载图像？.. 我看到了一个使用 URL 的例子.. 但我不能！.

this.vf.setBackgroundDrawable("http://path_to_background_image");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:04:19.117

我自己找到了解决方案...

```
Bitmap bg_img = BitmapFactory.decodeStream((InputStream) new 
URL(webservice.getString("background_image_url")).getContent());
                    vf.setBackgroundDrawable(new BitmapDrawable(bg_img)); 
```

# scala - Scala 2.10 TypeTag 用法

> ID：13233728
> 
> 赞同：10
> 
> 时间：2012-11-05T14:04:23.940
> 
> 标签：scala, reflection, scala-2.10

我正在挖掘新的 scala 反射 api，但无法弄清楚为什么以下代码段不能按预期工作。给定层次结构（尽量简化）：

```
import scala.reflect.runtime.universe._

trait TF[A] {
  implicit def t: TypeTag[A]

  def f[T <: A: TypeTag]: PartialFunction[Any, A] = {
    case msg: T if typeOf[T] =:= typeOf[A] => msg
  }
}

class TFilter[T: TypeTag] extends TF[T] {
  def t = typeTag[T]
}

case class Foo(x: Int) 
```

我期望方法`f`来过滤给定类型的对象。所以下面的代码片段应该返回`Seq[Foo]`

```
val messages = Seq(1, "hello", Foo(1))

val tFilter = new TFilter[Foo]
messages collect tFilter.f[Foo] 
```

它实际上返回`Seq[Foo]`但其他消息未过滤，这听起来像一个错误。

```
res1: Seq[Foo] = List(1, hello, Foo(1)) 
```

**问题**。我是用`TypeTag`错了还是新反射api的缺陷？

**PS0**。试过`Scala 2.10.0-RC1`和`2.10.0-RC2`

**PS1**。解决方法是替换`TypeTag`为，因此序列上`Manifest`的以下代码将按预期返回。`collect``List(Foo(1))`

```
trait MF[A] {
  implicit def m: Manifest[A]

  def f[T <: A: Manifest]: PartialFunction[Any, A] = {
    case msg: T if typeOf[T] =:= typeOf[A] => msg
  }
}

class MFilter[T: Manifest] extends MF[T] {
  def m = manifest[T]
} 
```

**更新**：与新`Scala 2.10.0-RC2`版本相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:16:27.950

所以我认为这里的关键问题是你需要匹配的类型`msg`，但它的编译时类型是`Any`（来自`PartialFunction`声明）。本质上，您`TypeTag`希望`List[Any]`. 但是由于它们都具有编译时类型，因为它们都`Any`被放入同一个列表中，所以你不会得到`TypeTag`比这更具体的。

我认为您可能想要做的是使用`ClassTag`而不是`TypeTag`：

```
trait TF[A] {
  implicit def t: ClassTag[A]

  def f: PartialFunction[Any, A] = {
    case msg: A => msg
  }
}

class TFilter[T: ClassTag] extends TF[T] {
  def t = classTag[T]
}

case class Foo(x: Int)

val messages = Seq(1, "hello", Foo(1), List(1), List("a"))
messages collect new TFilter[Foo].f // produces List(Foo(1)) 
```

正如[Ajran 指出的那样](https://stackoverflow.com/a/13234888/384641)，就像`Manifest`版本一样，您必须了解运行时类型的所有限制，包括擦除和装箱问题：

```
messages collect new TFilter[List[Int]].f // produces List(List(1), List("a"))
messages collect new TFilter[Int].f // produces List()
messages collect new TFilter[java.lang.Integer].f // produces List(1) 
```

有一些关于如何使`TypeTag`模式匹配更有用的建议（例如[SI-6517](https://issues.scala-lang.org/browse/SI-6517)），但我认为这些建议只有在您匹配一个有用的对象时才有帮助`TypeTag`，而不是编译时类型为`Any`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:11:36.997

实际上你没有在这里检查 msg 的类型，编译器会警告你 msg: T 被删除，所以你只需要检查 TFilter 上定义的类型与函数 f 上定义的类型相同。

我看起来模式匹配是由 Manifest 和 ClassTag “辅助”的，所以 msg: T 确实是一个正确的类型。如果您使用原语或 List[T] 尝试它，它将无法正常工作。

```
val mFilter = new MFilter[Int]
messages collect mFilter.f[Int] // res31: Seq[Int] = List()

val messages = List(List(1), List("a"))
val mFilter = new MFilter[List[Int]]
messages collect mFilter.f[List[Int]] // res32: List[List[Int]] = List(List(1), List(a)) 
```

看看这个讨论： http: [//grokbase.com/t/gg/scala-user/126p8eh1w0/how-to-make-typetag-work-in-a-pattern](http://grokbase.com/t/gg/scala-user/126p8eh1w0/how-to-make-typetag-work-in-a-pattern)

错误“在模式匹配其他被删除的类型时使用 TypeTags”：[这里](https://issues.scala-lang.org/browse/SI-6517)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T03:39:23.153

只是为了好玩：

```
import scala.reflect._
import scala.reflect.runtime.{currentMirror=>cm,universe=>ru}
import ru._

object Test extends App {
  type MyTag[A] = TypeTag[A]
  //type MyTag[A] = ClassTag[A]

  trait TF[A] {
    implicit def t: MyTag[A]

    def f[T <: A: MyTag]: PartialFunction[Any, A] = {
      //case msg: T => msg            // ok for ClassTag
      case msg: T @unchecked if matching[T](msg) => msg
      //case msg: T if typeOf[T] =:= typeOf[A] => msg
    }
    def matching[T](a: Any)(implicit tt: TypeTag[T]) =
      (cm reflect a).symbol.toType weak_<:< tt.tpe
  }

  case class TFilter[A: MyTag]() extends TF[A] {
    def t = implicitly[MyTag[A]]
  }

  trait Foo { def x: Int }
  case class Bar(x: Int) extends Foo
  case class Baz(x: Int) extends Foo

  val messages = Seq(1, Bar(0), "hello", Baz(1))
  println(messages collect TFilter[Foo].f[Foo])
  println(messages collect TFilter[Foo].f[Bar])
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T19:43:26.240

感谢大家的反馈。想一想，我找到了为什么`ClassTag`应该在模式匹配中使用的原因。

我设法找到[[SI-5143] 抽象类型上的模式匹配不起作用](https://issues.scala-lang.org/browse/SI-5143)，并且[相关的提交](https://github.com/scala/scala/commit/6b3ef4f1676adcbe6dbdbf59a3bd359f339b0626)解释说应该有一个实例`ClassTag`来使模式可检查。

所以，是的，我用`TypeTag`错了；在模式匹配的情况下，我应该使用`ClassTag`.

# php - 使用 netbeans 7.2.1 在本地和远程之间进行差异

> ID：13233731
> 
> 赞同：1
> 
> 时间：2012-11-05T14:04:28.120
> 
> 标签：php, netbeans, netbeans-plugins

我有一个在我的 PC 上本地的 netbeans php 项目。我将其设置为“保存时”保存在远程服务器上。这一切都很好。我现在有第二个开发人员在对同一台服务器做同样的事情。是否有可以在我的 PC 和远程服务器之间进行递归差异或项目差异的工具/插件甚至独立工具？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:13:40.160

“将文件从源文件夹复制到另一个位置”功能并不意味着供多个开发人员使用。最好将该功能用于本地预览，例如将文件从源文件夹（保存时）复制到同一台 PC 或本地测试服务器上的 webroot 时。不同的开发人员绝不应该使用相同的预览文件夹。您仍然可以使用外部工具来完成差异，但请注意，测试文件夹中的任何文件都被 Netbeans 覆盖，并且很难找出哪个文件最后由哪个开发人员编辑。

如果您需要由多个开发人员处理相同的代码，请使用版本控制系统。

# image - Visual Basic 图像缩放

> ID：13233733
> 
> 赞同：0
> 
> 时间：2012-11-05T14:04:36.917
> 
> 标签：image, vba, vb6, scalability

是否可以在没有 3 或 4 个内置属性之一的情况下在 VB 中按比例缩放图像（因为它们不能很好地工作）？

我指的是你可以在 Java 中做这样的事情：

```
Image newimg = img.getScaledInstance(230, 310,  java.awt.Image.SCALE_SMOOTH); 
```

在 Java 中，上述行似乎可以很好地缩放尺寸以适应指定的尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:10:32.400

我有一个用户控件，我用它来完成更好的质量调整。这是其中的摘录，希望对您有用。

```
Private Const STRETCH_ANDSCANS = 1
Private Const STRETCH_DELETESCANS = 3
Private Const STRETCH_HALFTONE = 4
Private Const STRETCH_ORSCANS = 2
Private Const SRCCOPY = &HCC0020

Private Declare Function StretchBlt Lib "gdi32" (ByVal hdc As Long, _
                                                   ByVal x As Long, _
                                                   ByVal y As Long, _
                                                   ByVal nWidth As Long, _
                                                   ByVal nHeight As Long, _
                                                   ByVal hSrcDC As Long, _
                                                   ByVal xSrc As Long, _
                                                   ByVal ySrc As Long, _
                                                   ByVal nSrcWidth As Long, _
                                                   ByVal nSrcHeight As Long, _
                                                   ByVal dwRop As Long) _
                                                   As Long

Private Declare Function SetStretchBltMode Lib "gdi32" (ByVal hdc As Long, _
                                                      ByVal nStretchMode As Long) _
                                                      As Long 
```

它是这样称呼的：

```
Private Sub UserControl_Paint()

   Dim lSave As Long

   'set the stretchblit mode (saving the previous value)
   lSave = SetStretchBltMode(UserControl.hdc, STRETCH_HALFTONE)

   'perform blit
   Call StretchBlt(UserControl.hdc, 0, 0, UserControl.ScaleWidth, _
                     UserControl.ScaleHeight, picBuffer.hdc, 0, 0, _
                     picBuffer.ScaleWidth, picBuffer.ScaleHeight, SRCCOPY)

   'restore previous mode
   Call SetStretchBltMode(UserControl.hdc, lSave)

End Sub 
```

# html - HTML 电子邮件背景图片

> ID：13233734
> 
> 赞同：3
> 
> 时间：2012-11-05T14:04:40.257
> 
> 标签：html, css, email

我正在编写 HTML 电子邮件，到目前为止它运行良好。我选择使用背景图像以方便一致性，我使用的解决方案来自以下线程：

[未显示背景图像样式的 html 电子邮件](https://stackoverflow.com/questions/4689862/html-email-with-background-image-style-not-shown)

它在我测试的邮件客户端（Outlook、Hotmail、GMail 和 Mail）中运行良好，但是在某些客户端中，单元格的背景图像在浏览器窗口中重复出现（就好像图像应用于 body 标签一样）。如果我将正文标记设置为 600 像素而不是 100%，它可以解决问题，我只会在所有客户端中看到背景一次，但是当我这样做时，在 Outlook 中，文本内容消失了。

谁能建议一个解决方案来为我解决这个问题？

我的整个代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Metanium</title>

<style type="text/css">

    #outlook a{
        padding:0;
    }
    body{
        width:100% !important;
    }
    .ReadMsgBody{
        width:100%;
    }
    .ExternalClass{
        width:100%;
    }
    body{
        -webkit-text-size-adjust:none;
    }
    body{
        margin:0;
        padding:0;
    }
    img{
        border:0;
        height:auto;
        line-height:100%;
        outline:none;
        text-decoration:none;
    }
    table td{
        border-collapse:collapse;
    }
    #backgroundTable{
        height:100% !important;
        margin:0;
        padding:0;
        width:100% !important;
    }
/*
@tab Page
@section background color
@tip Set the background color for your email. You may want to choose one that matches your company's branding.
@theme page
*/
    body,#backgroundTable{
        /*@editable*/background-color:#FAFAFA;
    }
/*
@tab Page
@section email border
@tip Set the border for your email.
*/
    #templateContainer{
        /*@editable*/border:1px solid #DDDDDD;
    }
/*
@tab Page
@section heading 1
@tip Set the styling for all first-level headings in your emails. These should be the largest of your headings.
@style heading 1
*/
    h1,.h1{
        /*@editable*/color:#202020;
        display:block;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:34px;
        /*@editable*/font-weight:bold;
        /*@editable*/line-height:100%;
        margin-top:0;
        margin-right:0;
        margin-bottom:10px;
        margin-left:0;
        /*@editable*/text-align:left;
    }
/*
@tab Page
@section heading 2
@tip Set the styling for all second-level headings in your emails.
@style heading 2
*/
    h2,.h2{
        /*@editable*/color:#202020;
        display:block;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:30px;
        /*@editable*/font-weight:bold;
        /*@editable*/line-height:100%;
        margin-top:0;
        margin-right:0;
        margin-bottom:10px;
        margin-left:0;
        /*@editable*/text-align:left;
    }
/*
@tab Page
@section heading 3
@tip Set the styling for all third-level headings in your emails.
@style heading 3
*/
    h3,.h3{
        /*@editable*/color:#202020;
        display:block;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:26px;
        /*@editable*/font-weight:bold;
        /*@editable*/line-height:100%;
        margin-top:0;
        margin-right:0;
        margin-bottom:10px;
        margin-left:0;
        /*@editable*/text-align:left;
    }
/*
@tab Page
@section heading 4
@tip Set the styling for all fourth-level headings in your emails. These should be the smallest of your headings.
@style heading 4
*/
    h4,.h4{
        /*@editable*/color:#202020;
        display:block;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:22px;
        /*@editable*/font-weight:bold;
        /*@editable*/line-height:100%;
        margin-top:0;
        margin-right:0;
        margin-bottom:10px;
        margin-left:0;
        /*@editable*/text-align:left;
    }
/*
@tab Header
@section preheader style
@tip Set the background color for your email's preheader area.
@theme page
*/
    #templatePreheader{
        /*@editable*/background-color:#FAFAFA;
    }
/*
@tab Header
@section preheader text
@tip Set the styling for your email's preheader text. Choose a size and color that is easy to read.
*/
    .preheaderContent div{
        /*@editable*/color:#505050;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:10px;
        /*@editable*/line-height:100%;
        /*@editable*/text-align:left;
    }
/*
@tab Header
@section preheader link
@tip Set the styling for your email's preheader links. Choose a color that helps them stand out from your text.
*/
    .preheaderContent div a:link,.preheaderContent div a:visited,.preheaderContent div a .yshortcuts {
        /*@editable*/color:#336699;
        /*@editable*/font-weight:normal;
        /*@editable*/text-decoration:underline;
    }
/*
@tab Header
@section header style
@tip Set the background color and border for your email's header area.
@theme header
*/
    #templateHeader{
        /*@editable*/background-color:#FFFFFF;
        /*@editable*/border-bottom:0;
    }
/*
@tab Header
@section header text
@tip Set the styling for your email's header text. Choose a size and color that is easy to read.
*/
    .headerContent{
        /*@editable*/color:#202020;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:34px;
        /*@editable*/font-weight:bold;
        /*@editable*/line-height:100%;
        /*@editable*/padding:0;
        /*@editable*/text-align:center;
        /*@editable*/vertical-align:middle;
    }
/*
@tab Header
@section header link
@tip Set the styling for your email's header links. Choose a color that helps them stand out from your text.
*/
    .headerContent a:link,.headerContent a:visited,.headerContent a .yshortcuts {
        /*@editable*/color:#336699;
        /*@editable*/font-weight:normal;
        /*@editable*/text-decoration:underline;
    }
    #headerImage{
        height:auto;
        max-width:600px !important;
    }
/*
@tab Body
@section body style
@tip Set the background color for your email's body area.

    #templateContainer,.bodyContent{
        /*@editable*/background-color:#FFFFFF;
    }
*/
/*
@tab Body
@section body text
@tip Set the styling for your email's main content text. Choose a size and color that is easy to read.
@theme main
*/
    .bodyContent div{
        /*@editable*/color:#505050;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:14px;
        /*@editable*/line-height:150%;
        /*@editable*/text-align:left;
    }
/*
@tab Body
@section body link
@tip Set the styling for your email's main content links. Choose a color that helps them stand out from your text.
*/
    .bodyContent div a:link,.bodyContent div a:visited,.bodyContent div a .yshortcuts {
        /*@editable*/color:#336699;
        /*@editable*/font-weight:normal;
        /*@editable*/text-decoration:underline;
    }
    .bodyContent img{
        display:inline;
        height:auto;
    }
/*
@tab Footer
@section footer style
@tip Set the background color and top border for your email's footer area.
@theme footer
*/
    #templateFooter{
        /*@editable*/background-color:#FFFFFF;
        /*@editable*/border-top:0;
    }
/*
@tab Footer
@section footer text
@tip Set the styling for your email's footer text. Choose a size and color that is easy to read.
@theme footer
*/
    .footerContent div{
        /*@editable*/color:#707070;
        /*@editable*/font-family:Arial;
        /*@editable*/font-size:12px;
        /*@editable*/line-height:125%;
        /*@editable*/text-align:left;
    }
/*
@tab Footer
@section footer link
@tip Set the styling for your email's footer links. Choose a color that helps them stand out from your text.
*/
    .footerContent div a:link,.footerContent div a:visited,.footerContent div a .yshortcuts {
        /*@editable*/color:#336699;
        /*@editable*/font-weight:normal;
        /*@editable*/text-decoration:underline;
    }
    .footerContent img{
        display:inline;
    }
/*
@tab Footer
@section social bar style
@tip Set the background color and border for your email's footer social bar.
@theme footer
*/
    #social{
        /*@editable*/background-color:#FAFAFA;
        /*@editable*/border:0;
    }
/*
@tab Footer
@section social bar style
@tip Set the background color and border for your email's footer social bar.
*/
    #social div{
        /*@editable*/text-align:center;
    }
/*
@tab Footer
@section utility bar style
@tip Set the background color and border for your email's footer utility bar.
@theme footer
*/
    #utility{
        /*@editable*/background-color:#FFFFFF;
        /*@editable*/border:0;
    }
/*
@tab Footer
@section utility bar style
@tip Set the background color and border for your email's footer utility bar.
*/
    #utility div{
        /*@editable*/text-align:center;
    }
    #monkeyRewards img{
        max-width:190px;
    }

</style>

</head>

<body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">

<table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">

<tr>
<td background="http://clients.networkdm.co.uk/externalresources/emailparts/5435/bg.jpg" height="895" width="600">
<!--[if gte mso 9]>
<v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display:inline-block;position:absolute; height:895px; width:600px;top:0;left:0;border:0;z-index:1;' src="http://clients.networkdm.co.uk/externalresources/emailparts/5435/bg.jpg"/>
<v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); display:inline-block;position:absolute; height:895px; width:600px;top:-5;left:-10;border:0;z-index:2;'>
<div>
<![endif]-->
<!-- This is where you nest a table with the content that will float over the image -->

<table height="895" width="600" cellpadding="0" cellspacing="0" border="0">

    <tr>
        <td height="263" width="600" valign="top" style="padding:0px; padding-top: 215px; padding-left: 338px; padding-right: 20px; width: 242px;">
            <span style="font-family: Arial, Helvetica, sans-serif; font-weight: bold; font-size: 14px; line-height: 1.4; color: #5a488f; width: 600px;">
                We are giving away an exclusive set of seven Metanium Everyday baby 
                grows every day for the rest of 2012 - one for every day of the week!
                <br /><br />
            </span>

            <span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.4; color: #5a488f; width: 600px;">
                Each daily winner will also receive a full size sample of Metanium 
                Everyday Barrier Ointment.
                <br /><br />
                To enter*, and for terms and conditions, visit our online competition 
                page by clicking on the link below.
            </span>
        </td>
    </tr>

    <tr>
        <td height="45" width="600" valign="top" align="center">
            <img src="http://clients.networkdm.co.uk/externalresources/emailparts/5435/enter.jpg" alt="Click here to enter!" />
        </td>
    </tr>

    <tr>
        <td width="600" valign="top" align="left" style="padding: 0px; padding-left: 163px; padding-top: 25px; padding-right: 140px; width: 297px;">
            <img src="http://clients.networkdm.co.uk/externalresources/emailparts/5435/protection.jpg" alt="Everyday nappy rash protection" /><br /><br />

            <span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.4; color: #5a488f; width: 600px;">
                New Metanium Everyday Barrier Ointment has a unique double action
                formula to provide protection from nappy rash. It doesn't contain
                fragrance or lanolin, so is gentle enough to use at each nappy change.
            </span>
        </td>
    </tr>

</table>

</td>
</tr>

</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:44:28.827

您的包装表设置为 100% 宽，而具有背景的单元格具有像素宽度。这不是表应该如何工作的。

使背景图像的表格和单元格宽度相同。

用 css 将表格居中，或者用另一个表格包裹它。什么都行。

# php - 从数组中获取密钥

> ID：13233738
> 
> 赞同：-2
> 
> 时间：2012-11-05T14:04:55.387
> 
> 标签：php

我有一个名为 $array 的数组，其中包含如下条目：

```
Array ( 
  [2340] => Array ( 
     [cv] => Array ( 
       [size] => 317613
       [c] => 3 ) ) 
  [16410] => Array ( 
     [cv] => Array ( 
       [size] => 119808 
       [c] => 1 ) ) 
) 
```

我正在使用以下内容，除了第一个值外，一切正常 - 我需要它在第一次迭代中显示 2340，然后在第二次迭代中显示 16410，其中我在下面有 $row[0]：

```
foreach ($array as $row) {
  print $row[0];
  print($row[cv][size]);
  print($row[cv][c]);
} 
```

如何访问第一个 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:05:47.830

用这个...

```
foreach ($array as $first_value => $row) {
    print $first_value;
    print($row[cv][size]);
    print($row[cv][c]);
} 
```

...而不是（因为您所说的“第一个值”实际上是已处理元素的索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:06:44.297

尝试

```
 array_keys( $array )[ $idx ] 
```

`$array`你的数组在哪里，是`$idx`你要访问的索引

例如：

```
 echo array_keys( $array )[0] 
```

对于第一个元素的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:06:45.397

改变你的 foreach：

```
foreach ($array as $id => $row) {
    echo $id;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:06:48.657

因为您拥有的是关联数组（哈希表），所以您需要将另一个参数传递给 foreach 语句，因此您可以在另一个 var 中拥有元素的键。

```
foreach ($array as $key =>  $row) {
  print $key;
  print $row[0];
  print($row[cv][size]);
  print($row[cv][c]);
} 
```

在 $key 变量中，您拥有数组中每个活动元素的关联键的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T14:08:16.993

**这应该工作**

```
foreach ($array as $key => $row) {
print $key;
print $row[0];
print($row[cv][size]);
print($row[cv][c]);
} 
```

# c# - 为转发器中的每个项目保存文本字段

> ID：13233740
> 
> 赞同：2
> 
> 时间：2012-11-05T14:05:02.033
> 
> 标签：c#, asp.net, webforms

看来我今天有很多问题。

我想要做的是保存每个图像的文本。目前，我正在将每张图片的正确文本放入文本框中。

后面的代码：

```
var car = GarageBLL.LoadCar(Convert.ToInt32(CarId),
Convert.ToInt32(_memberId)); ImageRepeater.DataSource = car.Images;
ImageRepeater.DataBind();

protected void FinalizeNewCar(object sender, EventArgs e) {
Response.Redirect("/amcargarasjen"); }
**Code here for saving each edit into the right ImageId.** 
```

ASP：

```
<asp:Repeater runat="server" ID="ImageRepeater">
   <ItemTemplate>
       <table>
           <tr>
               <td>
                   <a class="deleteLink" href="#" rel="<%#Eval("ImageId")%>" title="">
                   <asp:Image runat="server" ImageUrl="/Content/Images/Garage/DeleteButton.png" /></a>
                   <asp:Image Width="60" Height="45" ID="ImgCar" ImageUrl='<%# String.Format("/garageimages/{0}/{1}.{2}", CarId, Eval("ImageId"), Eval("Extension")) %>' runat="server" />
                   <asp:TextBox runat="server" Text='<%# Eval("Description") %>' ID="txtText"></asp:TextBox>
               </td>
           </tr>
       </table>
   </ItemTemplate>
</asp:Repeater>
<br />
<asp:Button ID="Button1" runat="server" Text="Fullfør" OnClick="FinalizeNewCar" /> 
```

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:55:06.280

修改您的转发器 HTML 标记，如下所示。请注意添加了一个隐藏字段以保留当前图像 ID 的引用。

```
<asp:Repeater runat="server" ID="ImageRepeater">
   <ItemTemplate>
       <table>
           <tr>
               <td>
                   <a class="deleteLink" href="#" rel="<%#Eval("ImageId")%>" title="">
                   <asp:Image runat="server" ImageUrl="/Content/Images/Garage/DeleteButton.png" /></a>
                   <asp:Image Width="60" Height="45" ID="ImgCar" ImageUrl='<%# String.Format("/garageimages/{0}/{1}.{2}", CarId, Eval("ImageId"), Eval("Extension")) %>' runat="server" />
                   <asp:TextBox runat="server" Text='<%# Eval("Description") %>' ID="txtText"></asp:TextBox>
                   <asp:HiddenField runat="server" Value='<%# Eval("ImageId") %>' ID="txtImageId"></asp:TextBox> 
               </td>
           </tr>
       </table>
   </ItemTemplate>
</asp:Repeater>
<br />
<asp:Button ID="Button1" runat="server" Text="Fullfør" OnClick="FinalizeNewCar" /> 
```

**代码 FinalizeNewCar 事件处理程序**

```
protected void FinalizeNewCar(object sender, EventArgs e)
{
    foreach (RepeaterItem item in ImageRepeater.Items)
    {
        Int32 imageId = Convert.ToInt32(((HiddenField) item.FindControl("txtImageId")).Value);
        string description = ((TextBox)item.FindControl("txtText")).Text;
        //You will get the imageId description here. 
        //Write your code to update the datatbase.
    }
} 
```

# sql - 如何在 sql server 中恢复更新查询？

> ID：13233742
> 
> 赞同：1
> 
> 时间：2012-11-05T14:05:07.430
> 
> 标签：sql, sql-server, foreign-keys, sql-update, revert

我正在为我的数据库使用 SQL Server。现在有一个包含以下列的表格。

```
PK_ID   FK_ID   Name   Description
1        5       ABC      ABCDE
2        7       EFG      EFT
3        8       XUZ      Xyz
4        11      TEF      TEF 
```

现在我错误地用空值更新了一些 Fk_ID 字段。现在我想取回由 null 值更新的所有 fk_id。那么有没有办法恢复以前有价值的fk_id？

任何人都可以帮助我找到相同的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:10:55.980

为避免将来发生这种情况，您可能希望使用事务来为您提供回滚选项。

例如

```
BEGIN TRAN T1;
UPDATE ImportantStuff SET ImportantValue = 1 WHERE SomeValue = 5 
```

然后，如果它看起来不错，您可以提交：

```
COMMIT TRAN T1; 
```

或者如果没有则回滚

```
ROLLBACK TRAN T1 
```

当然，这不能替代在针对真实数据运行脚本之前进行测试——但我经常在测试期间使用它，而不是希望获得最好的结果。

如果没有事务，您将需要从备份中重置数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:06:31.903

不，没有简单的方法可以做到这一点。从备份还原。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:13:57.117

如果你有备份，你将不得不从备份中恢复。否则无法取回该数据。

为了避免以后出现问题，使用事务和外键约束。

# c# - 使用 IEqualityComparer 查找记录

> ID：13233747
> 
> 赞同：3
> 
> 时间：2012-11-05T14:05:25.860
> 
> 标签：c#, linq, iequalitycomparer

我使用以下 IEqualityComparer 在比较之前从公司名称中去除特殊字符，如下所示：

```
 public class CompanyNameIgnoringSpaces : IEqualityComparer<LeadGridViewModel>
    {
        public bool Equals(LeadGridViewModel x, LeadGridViewModel y)
        {
            var delimiters = new[] {' ', '-', '*', '&', '!'};
            return delimiters.Aggregate(x.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0')) 
                == delimiters.Aggregate(y.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0'));
        }

        public int GetHashCode(LeadGridViewModel obj)
        {
            var delimiters = new[] {' ', '-', '*', '&', '!'};
            return delimiters.Aggregate(obj.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0')).GetHashCode();
        }
    } 
```

为了在运行查询时调用它，我使用以下命令：

```
var results = result
                  .GroupBy(c => c, new CompanyNameIgnoringSpaces())
                  .Select(g => new LeadGridViewModel
                  {
                      LeadId = g.First().LeadId,
                      Qty = g.Count(),
                      CompanyName = g.Key.CompanyName,
                  }).OrderByDescending(x => x.Qty).ThenBy(x => x.CompanyName).ToList(); 
```

我将如何在 LINQ 查询中使用此比较器来查找与输入字符串（公司名称）匹配的所有记录？

例如：

```
 public List<LeadGridViewModel> AllByName(string name, int company)
        {

            var result = (from t1 in db.Leads
                          where
                              t1.Company_ID == company && t1.Company_Name == name... 
```

因此，我不想使用 t1.Company_Name == name，而是使用相等比较器来包含特殊字符替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:09:35.870

你不能。用于调用的代码（甚至是其中使用的代码）`IEqualityComparison`不能转换为 SQL 查询，因为其中的代码`IEqualityComparison`是编译的，而不是使用`Expression`对象构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:28:36.480

1.  在 linqToDatabase 查询中使用 IEqualityComparer：除非您可以将逻辑封装在提供者可以翻译的形式中，否则必须在本地完成。从您处理此问题的路线来看，我认为提供商无法处理它。所以我们可以在本地做以下事情：

    1.  全部拉进去：

        ```
        var results = result.ToArray()
              .GroupBy(c => c, new CompanyNameIgnoringSpaces())
              .Select(g => new LeadGridViewModel
              {
                  LeadId = g.First().LeadId,
                  Qty = g.Count(),
                  CompanyName = g.Key.CompanyName,
              }).OrderByDescending(x => x.Qty).ThenBy(x => x.CompanyName).ToList(); 
        ```

    2.  去查查看（）

        ```
        var results = result
              .ToLookup(c => c, new CompanyNameIgnoringSpaces())
              .Select(g => new LeadGridViewModel
              {
                  LeadId = g.First().LeadId,
                  Qty = g.Count(),
                  CompanyName = g.Key.CompanyName,
              }).OrderByDescending(x => x.Qty).ThenBy(x => x.CompanyName).ToList(); 
        ```

    3.  流式传输结果

        ```
        var results = result.AsEnumerable()
              .GroupBy(c => c, new CompanyNameIgnoringSpaces())
              .Select(g => new LeadGridViewModel
              {
                  LeadId = g.First().LeadId,
                  Qty = g.Count(),
                  CompanyName = g.Key.CompanyName,
              }).OrderByDescending(x => x.Qty).ThenBy(x => x.CompanyName).ToList(); 
        ```

    注意：大多数 sql 变体都有一个替换功能，因此您可能会将替换硬编码到表达式中，从而在服务器端执行此操作。如果您希望它可重用，您将需要类似以下内容：

    ```
    private static Expression<Func<LeadGridViewModel,String>> leadGridTransform = 
        (lead) => lead.CompanyName == null ? "", lead.CompanyName.Replace(' ','\0').Replace.... ; 
    ```

    然后您可以在 Queryable 表达式中使用它：

    ```
    var results = result.GroupBy(leadGridTransform).... 
    ```

    这里使用三元运算符，因为它避免了昂贵的服务器端合并操作。

2.  查找某个字符串的所有记录：在这里，您确实想要反转比较并找到与给定字符串等效的所有字符串，然后查询其中包含的公司名称。所以假设 db.Leads 是 LeadGridViewModel 的表，所以我们可以使用比较器

    1.  隐式反转：

        ```
        public List<LeadGridViewModel> AllByName(string name, int company)
        {
            var comparer = new CompanyNameIgnoringSpaces();
            var group = db.Leads.Select(lead => new LeadGridViewModel
                                        { CompanyName = lead.CompanyName })
                                .AsEnumerable()
                                .Where(lead => comparer.Equals(name, lead.CompanyName)
                                .ToArray();

            var result = db.Leads.Where(lead => lead.Company_ID == company)
                                 .Where(lead => group.Contains(lead.CompanyName))... 
        ```

    2.  显式反转：

        ```
        private var delimiters = new[] {' ', '-', '*', '&', '!'};
        public List<LeadGridViewModel> AllByName(string name, int company)
        {
            var atomicName = name.Trim().Split(delimiters);
            IEnumerable<String> permutations = atomicName.Aggregate(
                      new String[] {""}, 
                      (accumulate,atom) => atom == "" ? accumulate.Join(
                             delimiters,str => true,chr => true,(str,chr) => str + atom + chr.ToString()) : accumelate)
                     .ToArray();

            var result = db.Leads.Where(lead => lead.Company_ID == company)
                                 .Where(lead => permutations.Contains(lead.CompanyName))... 
        ```

注意：对于比较的反转，这两种方法都有自己的局限性。在第一个实现中，数据库越大，构建可用分组的速度就越慢。对于第二个实现，名称的分隔符越多，构建排列所需的时间就越多（呈指数增长）。如果您对替换进行硬编码，那么这可以在服务器端完成，从而避免这些限制。

# php - 从数据库中获取图像的大小

> ID：13233753
> 
> 赞同：1
> 
> 时间：2012-11-05T14:05:46.777
> 
> 标签：php, jquery, database, image, lightbox

我有一个简单的基于标签的图像库，它将所有图像保存在数据库中。为了显示这些图像，有一个小的 php 脚本

```
<?php
    include_once("config/config.php");

    $mysql_user = USER;
    $password = PWD;
    $database_host = HOST;
    $database = DB;

    mysql_connect($database_host, $mysql_user, $password) or die ("Unable to connect to DB server. Error: ".mysql_error());
    mysql_select_db($database);

    header('Content-type: image/jpeg');
    $query = "SELECT imgblob from images where id=". intval($_GET["id"]);
    $rs = mysql_fetch_array(mysql_query($query));
    //echo mysql_error();
    echo base64_decode($rs["imgblob"]);
?> 
```

搜索后有一个图像列表，看起来像

```
<a class="lightbox" href="showimage.php?id=1" title="" ><img src="showimage.php?id=1" /></a> 
```

我使用灯箱在点击时调整图像大小。所以我需要获取图像源的大小（showimage.php?id=1）。

我有以下代码片段

```
 $('a.lightbox').each(function() {
var img = $(this).children("img");

var theImage = new Image();
theImage.src = img.attr("src");
$(this).fancybox({
'transitionIn' : 'elastic',
'transitionOut' : 'elastic',
'speedIn' : 600,
'speedOut' : 200,
'overlayShow' : false,
'type' : 'iframe',
'width' : theImage.width + 20,
'height' : theImage.height + 20
});
}); 
```

这些功能并非一直有效。通常调整大小的图像非常小。我没有任何想法来解决它。

这是一个示例画廊[www.phyxius.de/projects/phx.imga/](http://www.phyxius.de/projects/phx.imga/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:08:07.713

您需要等到图像加载后才能获取图像大小。

```
var theImage = new Image();
$(theImage).load(function () {
    $(this).fancybox({
        'transitionIn' : 'elastic',
        'transitionOut' : 'elastic',
        'speedIn' : 600,
        'speedOut' : 200,
        'overlayShow' : false,
        'type' : 'iframe',
        'width' : theImage.width + 20,
        'height' : theImage.height + 20
        });
    });
});

theImage.src = img.attr("src"); 
```

虽然坦率地说，我不明白你为什么要使用不同`Image`的东西。试试这个：

```
$('a.lightbox').each(function() {
    var $img = $(this).children("img");

    $(this).fancybox({
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'speedIn': 600,
        'speedOut': 200,
        'overlayShow': false,
        'type': 'iframe',
        'width': $img.width() + 20,
        'height': $img.height() + 20
    });
});​ 
```

# java - 修改属性时烦人的自动保存

> ID：13233754
> 
> 赞同：1
> 
> 时间：2012-11-05T14:05:51.817
> 
> 标签：java, macos, user-interface, netbeans-7, save

从今天早上开始，NetBeans (7.2.1) 自动保存对 swing 组件属性的每次更改。这很烦人，因为 NetBeans 会折叠所有节点，因此取消选择我正在更改的组件。

更详细的说明：

*   NetBeans 7.2（在 Mac OS 中运行）
*   “设计”视图
*   当我选择一个组件时，它会在导航器视图中被选中（默认情况下在左侧）并且所有父节点都会展开。
*   现在我可以右键单击-> 属性或使用属性视图（默认情况下在右侧）。

当我进行一些更改并单击“确定”时，NetBeans 现在（以前没有这样做，自发布以来我使用 7.2）自动保存整个项目，折叠导航器视图中的所有节点。现在，在设计视图中选择一个组件已经不是什么大问题了。但是，我使用导航器视图通过箭头键上下滚动、重命名组件或在属性视图中进行更改。有了新的行为，我必须重新扩展整个树，这很烦人。

任何人都知道有什么问题吗？

谢谢

# c - 如何在 npapi 插件中获取 http 响应标头

> ID：13233756
> 
> 赞同：0
> 
> 时间：2012-11-05T14:06:03.917
> 
> 标签：c, linux, http, browser, npapi

我是插件开发的新手。有人告诉我使用 Firebreath 来开发 npapi 插件，结果证明它非常简单。现在，我希望访问传递给插件的响应的 http 响应标头。但我想不出办法，因为他们的文件稀缺，可用于喷火。在 NPAPI 教程中，他们使用 npstream，但我不知道如何在 firebreath 中使用这种结构。任何帮助将不胜感激。

**更新：**

```
void tPlugin::handleUnsolicitedStream(FB::BrowserStreamRequest& req)
{ 
 const FB::PluginEventSinkPtr sinkPtr;
 req.setEventSink(sinkPtr);
 responseHeaders = req.headers;
 FB::HeaderMap::const_iterator it = responseHeaders.begin();
 str = (*it).first + " : " + (*it).second;                   // str is a class variable
 FB::DOM::WindowPtr window = m_host->getDOMWindow();
 window->alert(str);
 str = "hello";
 window->alert(fname);
} 
```

没有出现任何警告框！

```
void tPlugin::onPluginReady()
{
   FB::DOM::WindowPtr window = m_host->getDOMWindow();
   window->alert(str);
} 
```

出现一个空警报框！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:28:03.693

如果您阅读了您正在使用的 BrowserStreamRequest 对象的[源代码](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/BrowserStreamRequest.h)，或者如果您阅读了创建它的源代码，您会发现该对象上有一个 headers 变量。

```
FB::HeaderMap headers; 
```

FB::HeaderMap 当然是在[SimpleStreamHelper.h](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/SimpleStreamHelper.h)中定义的：

```
typedef std::multimap<std::string, std::string> HeaderMap; 
```

而且，澄清一下，有很多关于 FireBreath 的文档；对于这个特殊的功能来说并不是很多，它只在树中出现了大约一个月。

**编辑：**从过去的对话中，我很确定您已经在处理这个问题，但是浏览器创建的流是通过 BrowserStreamRequest 对象传递给您的插件对象上的[handleUnsolicitedStream方法的；](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/PluginCore.h#L338)默认情况下，fbgen 模板中的插件不会覆盖此方法，但您可以添加它。

# windows-phone-7 - 我应该如何使用 PhoneGap 和 Windows Phone 7 添加图像？

> ID：13233758
> 
> 赞同：0
> 
> 时间：2012-11-05T14:06:09.827
> 
> 标签：windows-phone-7, cordova

我是在 windows phone 7 上使用 PhoneGap 的新手。
我不完全确定问题出在哪里 - 当我尝试添加现有图像时，它没有添加到`CordovaSourceDictionary.xml`文件中，但是如果我手动将图像添加到`CordovaSourceDictionary.xml`，它会被删除当我建立。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:28:44.737

CordovaSourceDictionary.xml 由依赖于 Visual Studio 工作方式的构建过程更新。您需要触发文件更新，例如右键单击解决方案 > 添加 > 添加新文件夹/现有项目等。

我所做的是将文件从 Windows 资源管理器拖到 Visual Studio 项目中，然后将其放到图像文件夹中。现在 Visual Studio 知道您已经添加了一个新文件，并且当您运行项目时 CordovaSourceDictionary.xml 会自动更新您的更改。

*继续打好仗！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:43:10.563

这可能不是破坏系统的原因，但是我使用的 JS 框架在调试模式下向每个图像添加了一个 url 查询（以强制浏览器重新加载图像，而不是使用缓存）。因此，我的图像“image/background.jpg”将作为“image/background.jpg?d=34342233”访问。但是，在 phoneGAP for Windows Phone 上运行时，它无法识别图像，因此显示为损坏。所以，我不得不关闭我使用的框架的调试，突然图像出现了。如前所述，不要忘记将 Build Action 设置为“Content”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:24:12.013

这是 Daniel Egan 的[教程](http://mobile.dzone.com/articles/windows-phone-phone-gap "Windows Phone 的 Phone Gap 入门")。我还有一些其他的链接给你

[教程：如何借助 PhoneGap 在 Windows Phone 上创建 HTML5 应用程序](http://blogs.msdn.com/b/davrous/archive/2011/12/23/tutorial-how-to-create-html5-applications-on-windows-phone-thanks-to-phonegap.aspx "Windows 手机和手机的差距")。

[Windows Phone 入门](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone "Windows Phone 入门指南")。

[开始使用 Windows 8](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html#Getting%20Started%20with%20Windows%208 "Windows 8 入门指南")。

[阿帕奇科尔多瓦文档](http://docs.phonegap.com/en/2.2.0/index.html "Apache Cordova 文档")。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:20:05.967

检查图像**构建操作**属性（解决方案资源管理器，项目属性视图）。**必须设置为 Content**，（添加图片时，默认此属性值为 Resource）

# delphi - 将 ShortInt 数组转换为字符串，Delphi

> ID：13233776
> 
> 赞同：0
> 
> 时间：2012-11-05T14:07:12.690
> 
> 标签：delphi

我正在按照我学习的方式进行操作，即：使用 FOR 并一个一个地获取索引数组，但是它离开的速度太慢了，否则会将其转换为字符串吗？离开更快？

在我的情况下，它将是 ShortInt 的动态数组。

例如，给定这个输入：

```
[0,20,-15] 
```

我想要以下输出：

```
0,20,-15 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:12:13.150

我怀疑您的代码很慢，因为它正在执行不必要的字符串重新分配。但是，如果没有看到您的代码，就很难确定。

编写算法的最简单方法可能是使用`TStringBuilder`. 这是否提供足够的性能，只有你能说。

```
sb := TStringBuilder.Create;
try
  for i := 0 to high(buffer) do
  begin
    sb.Append(IntToStr(buffer[i]));
    if i<high(buffer) then
      sb.Append(',');
  end;
  str := sb.ToString;
finally
  sb.Free;
end; 
```

# gwt - 如何将自动监控/服务集成到 gwt 应用程序？

> ID：13233779
> 
> 赞同：0
> 
> 时间：2012-11-05T14:07:25.327
> 
> 标签：gwt, tomcat, service, automation

我已经为使用 gwt 2.4 的小型互联网服务提供商编写了一个支持解决方案。它分析了客户电缆调制解调器的一些参数（接收/发送 - 信号强度、频率等）。这一次，它仅在支持代理单击应用程序中调制解调器的分析按钮后才起作用。该应用程序托管在 tomcat 7 应用程序服务器上。

现在我的问题是：我想将我们基础设施的每个调制解调器的调制解调器参数记录到每天自动一次的数据库中 - 也许在晚上。

我应该将代码放在我的 gwt 应用程序中的什么位置？还是我需要一个单独的项目来做到这一点？或者更好：我必须从哪里开始？:-)

如果有人能回答我，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:50:08.513

最简单的方法是将所有监控和记录代码包含在一个普通的 Java servlet 中。您可以使用您的 GWT 应用程序在 tomcat 中部署此 servlet。

然后，您可以设置一个 cron 作业来调用 servlet 的 url。查看 curl 命令。

# java - 为大量使用的数据构建缓存？

> ID：13233780
> 
> 赞同：1
> 
> 时间：2012-11-05T14:07:28.163
> 
> 标签：java, jakarta-ee, caching

如果我有一个在 Java EE 应用程序的所有用户之间共享的对象列表，那么引入某种缓存或`@ApplicationScoped`保存这些对象的池是否有用？

我可以想象，如果例如 100 个用户进入概览页面并列出所有这些对象：这些对象应该来自哪里？为这些用户中的每一个用户从数据库中获取数据，还是“即时”共享数据池？

至少如果它们在某种共享的 ServiceManager 中，也会有大约 100 个 getObjects() 请求到这个管理器。这对许多数据库获取有什么好处吗？

我没有这方面的经验，需要一些建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T14:10:42.937

创建一个包含所有这些对象的单例类。如果这些对象为空，则从 db 中获取并初始化它。如果它不为空，则将当前值返回给所有用户..

# plugins - eclipse中的VSS插件

> ID：13233785
> 
> 赞同：1
> 
> 时间：2012-11-05T14:07:53.860
> 
> 标签：plugins, visual-sourcesafe

将插件添加到 eclipse 中会发生什么？

所有的注册表 Eclipse 在内部做什么？

我们有一个类似于 eclipse 的产品。我们正在尝试在其上添加版本控制。CVS 和 SVN jar 添加到插件文件夹中，添加到工作台的项目显示 SVN 和 CVS 选项。但是当涉及到 VSS 时，除了 jar 文件之外，它还需要 VSSplugins 文件夹，但在添加 VSSplugin 文件夹后它显示 VSS 配置选项。添加位置详细信息并保存后，当我们寻找团队选项卡时，它没有显示任何选项（选项如结帐，签入..等）。

并且工作区日志显示异常为

java.lang.NullPointerException

```
 at org.vssplugin.ui.LabelDecorator.<clinit>(LabelDecorator.java:72)

            at org.vssplugin.core.VSSPluginProvider.addProject(VSSPluginProvider.java:1457)

            at org.vssplugin.ui.ConfigurationWizard$1.exec(ConfigurationWizard.java:86)

            at org.vssplugin.core.SyncNotificationOperation.execute(SyncNotificationOperation.java:85)

            at org.vssplugin.core.WorkspaceSyncModifyOperation$1.run(WorkspaceSyncModifyOperation.java:71)

            at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1800)

            at org.vssplugin.core.WorkspaceSyncModifyOperation.run(WorkspaceSyncModifyOperation.java:85)

            at org.vssplugin.ui.UIUtils$2.run(UIUtils.java:233)

            at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)

            at org.vssplugin.ui.UIUtils.run(UIUtils.java:230)

            at org.vssplugin.ui.UIUtils.run(UIUtils.java:222)

            at org.vssplugin.ui.ConfigurationWizard.performFinish(ConfigurationWizard.java:82)

            at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:752)

            at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:373)

            at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)

            at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:228)

            at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)

            at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)

            at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910)

            at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503)

            at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)

            at org.eclipse.jface.window.Window.open(Window.java:801)

            at org.eclipse.team.internal.ui.wizards.ConfigureProjectWizard.openWizard(ConfigureProjectWizard.java:224)

            at org.eclipse.team.internal.ui.wizards.ConfigureProjectWizard.shareProjects(ConfigureProjectWizard.java:124)

            at org.eclipse.team.internal.ui.actions.ConfigureProjectAction$1.run(ConfigureProjectAction.java:39)

            at org.eclipse.team.internal.ui.actions.TeamAction$3.run(TeamAction.java:265)

            at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)

            at org.eclipse.team.internal.ui.actions.TeamAction.run(TeamAction.java:262)

            at org.eclipse.team.internal.ui.actions.ConfigureProjectAction.execute(ConfigureProjectAction.java:33)

            at org.eclipse.team.internal.ui.actions.TeamAction.run(TeamAction.java:514)

            at org.eclipse.team.internal.ui.actions.TeamAction.runWithEvent(TeamAction.java:548)

            at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:241)

            at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)

            at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)

            at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)

            at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)

            at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)

            at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910)

            at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503)

            at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)

            at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)

            at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)

            at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)

            at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)

            at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)

            at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 
```

# google-drive-api - 如何在不允许用户安装 chrome webstore 应用程序的情况下使用 google drive api？

> ID：13233791
> 
> 赞同：1
> 
> 时间：2012-11-05T14:08:16.697
> 
> 标签：google-drive-api, google-apps

我制作了一个驱动器应用程序，它对谷歌应用程序域内的文件执行一些操作。要在应用程序域中使用驱动器 api，我必须允许用户安装 webstore 应用程序。但我真的不希望用户安装 chrome webstore 应用程序。

**是否有可能允许用户在我们的域内使用驱动器 API 而不允许他们安装 Webstore 应用程序？**

这是我在关闭时得到的错误：

403 域策略已禁用第三方云端硬盘应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:37:46.877

这不是安装问题，这是域问题。您的域管理员需要在其 CPanel 中启用第三方云端硬盘应用。

完成后，您可以请求安装范围来安装应用程序，无需 Chrome Webstore 集成。

# django - 模板中带有参数的函数。姜戈

> ID：13233794
> 
> 赞同：3
> 
> 时间：2012-11-05T14:08:25.590
> 
> 标签：django

在我的模板中，我显示了用户关注的用户列表。我希望用户能够通过一个按钮删除他关注的用户之一。我有一个删除关系的函数 remove_relationship。

这是我的models.py中的函数：

```
 class UserProfile(models.Model):
  (...)

      def remove_relationship(self, person):
        Relationship.objects.filter(
            from_person=self, 
            to_person=person).delete()
        return 
```

我想将此函数传递给我的模板：

```
 {% for user in following % }
   <form method="post">
    {% csrf_token %}
   <input type="submit" value="delete" onclick="remove_relationship"/>
   </form>
   {%endfor%} 
```

问题是我无法在模板中传递参数。那么我该怎么做才能让每个按钮删除与正确用户的关系呢？

我看到了关于这个主题的另一个问题，但它看起来并没有解决我的问题（http://stackoverflow.com/questions/1333189/django-template-system-calling-a-function-inside-a-model )

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:23:21.250

看起来您将客户端代码 (JavaScript) 与服务器端 (Django) 混淆了。

要获得提交的相关用户 ID，您可以在表单中添加一个额外的隐藏字段：

```
{% for user in following % }
<form method="post" action="{% url views.remove_relationship %}">
 {% csrf_token %}
<input type="hidden" name="user_id" value="{{ user.id }}">
<input type="submit" value="delete" />
</form>
{%endfor%} 
```

`remove_relationship`然后根据您现在在其中找到的用户 ID创建一个在服务器端执行删除操作的视图`request.POST['user_id']`

# data-structures - 如何在内存中表示帕斯卡式（等边）三角形

> ID：13233796
> 
> 赞同：0
> 
> 时间：2012-11-05T14:08:27.280
> 
> 标签：data-structures, tree

我正在研究[Project Euler 问题 18](https://projecteuler.net/problem=18)（我**确实**解决了问题；我没有作弊。“[证明](https://i.imgur.com/9HBME.png)”在这里）并且发现自己需要一种方法来表示看起来像帕斯卡三角形但具有不同值的数据结构. 它看起来与二叉树非常相似，但有一个非常重要的区别：节点的子节点不只是它的子节点。所以前三行如下所示：

```
 75
   /  \
  95  64
 /  \ / \
17  47  82 
```

请注意，47 有两个父母。

将其表示为链接结构甚至二维数组非常容易，但我希望有一种更优雅的方式。我喜欢二叉树，主要是因为你可以分配一块内存，将其视为一个数组，并**通过几个算术运算**或整数除法在子级和父级之间导航。**有没有办法对这个数据结构做同样的事情？**

我最好的解决方案是使用二维数组（很容易找到孩子和父母）。我不喜欢这种实现，因为（至少我这样做的方式）我要求`malloc`每一行，即使我提前知道结构会有多大。

[我的问题与这个](https://stackoverflow.com/questions/9341487/how-to-represent-a-binomial-tree-in-memory)问题非常相似，但我对接受的答案不满意。评论暗示了我寻求的解决方案，但没有给出任何解释。

**编辑：**为了澄清，我正在寻找一种方法来**索引一维数组**，其方式与按顺序填充到数组中的二叉树（从 1 开始）给出索引*i*处节点的子节点的属性相同在索引 2 * *i*和 2 * *i* + 1 处。我也不太担心能否找到父母，所以不要太担心奇怪的两个父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T18:43:10.297

是的，可以将三角形数据结构存储在一维数组中（Java 中的示例）：

```
class Triangle<T> {
  private T[] triangle;

  public Triangle(T[] array, int rows) {
    if (array.length != triangleNumber(rows)) {
      throw new IllegalArgumentException("Array wrong size");
    }
    triangle = array;
  }

  public T get(int row, int col) {
    return triangle[index(row, col)];
  }

  public void set(int row, int col, T val) {
    triangle[index(row, col)] = val; 
  }

  private int triangleNumber(int rows) {
    return rows * (rows + 1) / 2;
  }

  private int index(int row, int col) {
    if (row < 0 || col < 0 || col > row) {
      throw new IndexOutOfBoundsException("Trying to access outside of triangle");
    }
    return triangleNumber(row) + col;
  }
} 
```

传递给构造函数的数组是通过将三角形的行一个接一个地连接到数组中形成的：[t(0,0), t(1,0), t(1,1), t(2, 0), t(2,1), t(2,2), ... , t(rows-1, rows-1)]，其中 t(R, C) 是三角形行 R 和三角形的三角形单元格C 列。

对于任何单元格（行，列）：

*   左孩子将在 row+1, col
*   右孩子将在 row+1, col+1
*   左父母将在第 1 行，第 1 列
*   右父母将在第 1 行，col

并非所有单元格都存在两个父母和两个孩子，因为他们将位于三角形之外。请参阅 index 方法中的异常检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:40:59.437

是的：我们从二维数组的想法开始，但行长不规则。所以每个元素都由二维索引（r，c）索引；(1,1) (2,1)(2,2) (3,1)(3,2)(3,3) (4,1)(4,2)(4,3)(4,4)

因为关系是规则的，你可以表达我们的位置：
对于一个节点 (r,c) 是子节点是 (r+1,min(1,c)),(r+1,max(c+1,r )) 和他的父母是： (r-1,min(1,c-1)),(r-1,max(c,r))

# java - 在 jdbc createStatement() 中是哪个类方法

> ID：13233797
> 
> 赞同：0
> 
> 时间：2012-11-05T14:08:28.533
> 
> 标签：java, jdbc

请解释createstatement是connetion接口中的抽象方法，所以这个方法定义在哪个类中

```
 Connection con=DriverManager.getConnection(url,username,password);
 Statement st=con.createStatement(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:09:37.370

它在其中*声明*[`Connection`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html)是一个接口。

它是根据返回的实际连接在某个具体类中*实现*`DriverManager.getConnection`的，这取决于您提供的连接 URL。

如果您对 Java 还不够陌生，以至于抽象方法会让您感到困惑（我们曾经都是新手），我*强烈*建议您远离 JDBC。[在阅读了关于抽象类、方法](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)和[接口](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)的教程之后，玩弄只看语言特性的小型控制台应用程序。然后，当您有信心时，再回到 JDBC。

# php - 如何在查询中包含数组的值

> ID：13233798
> 
> 赞同：0
> 
> 时间：2012-11-05T14:08:27.953
> 
> 标签：php, sql, arrays, search

我有以下数组：

```
 $rqt="SELECT * FROM `client_gestion_compte` WHERE `id_company`='".$societe['id']."' AND `id_gestionnaire_client`='".$_SESSION['id']."'" ;
 $res=mysql_query($rqt);

 $values = array();
 while($donnees=mysql_fetch_assoc($res))
 {
     $values[] = $donnees['compte'] ;
 } 
```

我想使用这个数组的值在数据库中进行搜索查询。我必须使用数组的所有值，但问题是我不知道数组中有多少项，所以我不能手动执行这个条件 LIKE $value 等等......

所以我试过这样。

```
`$sql="SELECT * FROM `debiteur` INNER JOIN `creance` ON `creance`.`n_doss` = `debiteur`.`n_doss` WHERE `creance`.`id_company`=".$societe['id']." AND `debiteur`.`nom` LIKE '%".$_GET['s']."%' AND `creance`.`code_client` LIKE '%".$values."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`prenom` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`raison_sociale` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`siret` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`adresse` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`adresse2` LIKE '%".$_GET['s']."%' Or `debiteur`.`ville` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`code_postal` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`tel` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`tel2` LIKE '%".$_GET['s']."%' Or `debiteur`.`fax` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`fax2` LIKE '%".$_GET['s']."%' Or `debiteur`.`gsm` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`gsm2` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`e_mail` LIKE '%".$_GET['s']."%' GROUP BY `creance`.`n_doss`  "; 
```

问题出在这条线上 `creance.code_client LIKE '%".$values."%'`

因为我从不知道如何使用数组的所有自定义值进行搜索，而不仅仅是像 values[1] 这样的一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:18:15.803

您需要使用`foreach`循环或`implode`遍历数组的所有元素，

```
$sql="SELECT * FROM `debiteur` INNER JOIN `creance` ON `creance`.`n_doss` = `debiteur`.`n_doss` WHERE `creance`.`id_company`=".$societe['id']." AND `debiteur`.`nom` LIKE '%".$_GET['s']."%' AND ";
 foreach($values as $v)  {
  $sql .= `creance`.`code_client` LIKE '%".$v."%' OR " ;
 }

 $sql .= " `creance`.`id_company`=".$societe['id']." AND `debiteur`.`prenom` LIKE '%".$_GET['s']."%' OR `creance`.`id_company`=".$societe['id']." AND `debiteur`.`....."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:31:39.120

```
$sql = "SELECT * FROM `debiteur` 
INNER JOIN `creance` ON `creance`.`n_doss` = `debiteur`.`n_doss` 
WHERE {...}
AND (`creance`.`code_client` LIKE '%" . implode("%' OR `creance`.`code_client` LIKE '%", $values) . "%')
{...}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:29:01.743

```
$rqt="SELECT * FROM `client_gestion_compte` WHERE `id_company`='".$societe['id']."' AND `id_gestionnaire_client`='".$_SESSION['id']."'" ;
 $res=mysql_query($rqt);

 $values = array();
 while($donnees=mysql_fetch_assoc($res))
 {
     $values[] = $donnees['compte'] ;
 }

 $value_query=implode(",",$values);

 //Place it like this in your query

 creance.code_client IN ('".$value_query."') 
```

# php - PHP中的循环问题计数年份

> ID：13233801
> 
> 赞同：2
> 
> 时间：2012-11-05T14:08:45.173
> 
> 标签：php, while-loop

我创建了一个循环，它将以格式化的方式显示日期 2004 到 2014。但问题是，它显示的是 204 而不是 2004 并一直持续到 209 .. 那么，如何以格式化的方式显示那些年份，如 2004、2005、2006 等。
这是我创建的代码，告诉我在哪里使固定：

```
<?php
    $yr = 4;
    while ($yr <= 14) {
        $x = 1;
        while ($x <= 31) {
            echo "$x Jan 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Feb 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Mar 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Apr 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x May 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Jun 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Jul 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Aug 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Sep 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Oct 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Nov 20$yr<br>";
            $x++;
        }
        $x = 1;
        while ($x <= 31) {
            echo "$x Dec 20$yr<br>";
            $x++;
        }
        $yr++;
    }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:16:24.140

您只需要一个循环

```
$start = 2004;
$end = 2014;

$dateTime = new DateTime();
$dateTime->setDate($start, 1, 1);

echo "<pre>";
while ( $dateTime->format("Y") <= $end ) {
    echo $dateTime->format("d M Y"), PHP_EOL;
    $dateTime->modify("+1 day");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T14:15:41.473

当你可以做这样的事情时，为什么要经历如此漫长而奇怪的过程？

```
<?php
    $yearStart = 2004;
    $yearEnd = 2012;
    $unixTime = strtotime($yearStart . "-01-01 00:00:00");
    $endUnixTime = strtotime($yearEnd . "-12-31 23:59:59");
    while ($unixTime < $endUnixTime) {
        echo date("d M Y", $unixTime) . PHP_EOL;
        $unixTime = strtotime("+1 day", $unixTime);
    }
?> 
```

输出：

```
01 Jan 2004
02 Jan 2004
03 Jan 2004
...
29 Dec 2012
30 Dec 2012
31 Dec 2012 
```

这还具有不显示“2008 年 2 月 31 日”等的额外好处，因为该日期甚至不存在。

[代码的键盘示例（警告：长输出！）](http://codepad.org/EvODIXwP)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T14:18:31.663

我不确定您为什么要通过这么多循环来执行此操作，使用它而不是 $yr ，您将打印出正确的年份：

```
 str_pad($yr, 2, '0', STR_PAD_LEFT); 
```

最好的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T14:13:16.153

最简单的解决方法是设置 $yr = 2004 并在 $yr < 2014 时循环。您没有用前导零填充数字，因此是 204、205 等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-05T14:41:40.590

您也可以使用（相当）不同的结构来做到这一点：

```
<?php
    function displayDate($yr, $yrMax) {
        if ($yr > $yrMax) {
            return true;
        }
        else {
            displayMonth($yr);
            $yr++;
            return displayDate($yr, $yrMax);
        }
    }
    function displayMonth($yr, $month = 1) {
        if ($month > 12) {
            return true;
        }
        else {
            displayDay($yr, $month);
            return displayMonth($yr, $month+1);
        }
    }
    function displayDay($yr, $month, $day = 1, $dayMax = 31) {
            if ($day > $dayMax) {
                return true;
            } else {
                $displayMonth = getMonth($month);
                echo "$day $displayMonth $yr<br>";
                $day++;
                return displayDay($yr, $month, $day, $dayMax);
            }
    }
    function getMonth($month) {
        switch($month){
            case 1:
                return 'Jan';
            case 2:
                return 'Feb';
            case 3:
                return 'Mar';
            case 4:
                return 'Apr';
            case 5:
                return 'May';
            case 6:
                return 'Jun';
            case 7:
                return 'Jul';
            case 8:
                return 'Aug';
            case 9:
                return 'Sep';
            case 10:
                return 'Oct';
            case 11:
                return 'Nov';
            case 12:
                return 'Dec';
        }
    }

            //Here we call the structure build above.
    if (displayDate(2004, 2014)) {
        echo 'Done';
    }
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T04:14:08.730

根据你的代码，你可以试试这个。虽然它不是标准方式：

```
<?php
$yar = 4;
while ($yar <= 9) {
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Jan 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Feb 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Mar 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Apr 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax May 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Jun 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Jul 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Aug 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Sep 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Oct 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Nov 200$yar <br>";
        $ax++;
    }
    $ax = 1;
    while ($ax <= 31) {
        echo "$ax Dec 200$yar <br>";
        $ax++;
    }
    $yar++;
}
$yr = 10;
while ($yr <= 14) {
    $x = 1;
    while ($x <= 31) {
        echo "$x Jan 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Feb 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Mar 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Apr 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x May 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Jun 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Jul 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Aug 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Sep 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Oct 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Nov 20$yr <br>";
        $x++;
    }
    $x = 1;
    while ($x <= 31) {
        echo "$x Dec 20$yr <br>";
        $x++;
    }
    $yr++;
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T14:14:35.687

这不是标准的，但您可以在该 while 循环中添加一个 if 循环，如下所示：

```
while($x <= 31) 
{
if ($yr>=10)
    {
       echo "$x Oct 20$yr<br>";
    }

else
    {
       echo "$x Oct 200$yr<br>";
    }

$x++;
} 
```

虽然你想做这样的事情让我失望

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T14:14:56.390

这是因为你是这样设置`$yr`的：

```
$yr = 4; 
```

试试这个：

```
$yr = sprintf('%02d', $yr);
echo "$x Jan 20$yr<br>"; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-05T14:23:45.577

您需要使用该`str_pad`功能（[手册](http://php.net/manual/en/function.str-pad.php)）。在你的情况下，它是这样的：

```
<?php 

    $yr = 4;
    while ($yr <= 14) {
        $x = 1;
        while ($x <= 31) {
            echo "$x Jan 20".str_pad($yr, 2, "0",STR_PAD_LEFT)."<br>";
            $x++;
        }
        $yr++;
    }
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-05T14:24:25.380

使用[str_pad](http://php.net/manual/pt_BR/function.str-pad.php)：

```
echo $x.' Jan 20'.str_pad($yr, 2, '0', STR_PAD_LEFT).'<br>'; 
```

更适合使用 变量*$x的函数*[cal_days_in_month](http://php.net/manual/pt_BR/function.cal-days-in-month.php)：

 *```
<?php

    $yr = 4;
    while ($yr <= 14) {

        $year = '20'.str_pad($yr, 2, '0', STR_PAD_LEFT);

        for($month = 1; $month <= 12; $month++) {

            //number of days this month
            $daysCount = cal_days_in_month(CAL_GREGORIAN, $month, $year); 
            //catches the month spelled 
            $timestamp = mktime(0, 0, 0, $month, 1, $year);
            $monthText = date('M', $timestamp);

            for($day = 1; $day <= $daysCount; $day++) {
                echo $day.' '.$monthText.' '.$year.'<br>';
            }
        }

        $yr++;
    }
?> 
```*

# entity-framework - 如何处理实体框架中的多个对象插入？

> ID：13233805
> 
> 赞同：0
> 
> 时间：2012-11-05T14:08:51.463
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, edmx

我有一个列表要保存在我的数据库“Challan”表中。目前我使用**foreach 循环将对象插入到数据库中，并且每次迭代我都使用 Context.SaveChanges() 方法。** 在循环内部，我还调用**ManageStock()**方法来更新产品库存，该库存位于其他类文件中。

我想同时保存所有带有库存管理的列表，这意味着如果插入之间发生电源故障或其他错误，则保存的记录将被回滚。如果整个交易没有错误，那么只有它会与所有条目一起保存。

如何在实体框架中实现这一点？

# c# - 从移动设备获取局域网中的所有 IP 主机

> ID：13233808
> 
> 赞同：2
> 
> 时间：2012-11-05T14:09:04.517
> 
> 标签：c#, .net, compact-framework, ping, lan

我想在移动设备（C#.net 紧凑框架）上获取我网络中所有 IP 地址的列表。

我阅读了几篇像[这样](https://stackoverflow.com/questions/4042789/how-to-get-ip-all-hosts-in-lan)的文章。问题是，在我的移动设备上，我无法异步 ping 它们，因为我只有不支持它的 opennetcf。并且ping它同步需要太长时间。

你知道这样做的图书馆吗，或者你知道我如何找到我网络中的所有主机，甚至可能没有 ping（这很慢）

端口无所谓，我只想知道，用了哪些IP...

谢谢你，卡尔

# python - Python Cubes OLAP 框架 - 如何使用连接？

> ID：13233809
> 
> 赞同：7
> 
> 时间：2012-11-05T14:09:04.740
> 
> 标签：python, database, olap, star-schema

我正在尝试在一个非常简单的数据库上使用 python 的 olap 框架[多维数据集](http://packages.python.org/cubes/)，但是在连接表时遇到了一些麻烦。

我的架构如下所示：

```
Users table
ID | name

Products table
ID | name | price

Purchases table
ID | user_id | product_id | date 
```

立方体模型：

```
{
    'dimensions': [
        {'name': 'user_id'},
        {'name': 'product_id'},
        {'name': 'date'},
    ],
    'cubes': [
        {
            'name': 'purchases',
            'dimensions': ['user_id', 'product_id', 'date'],
            'measures': ['price']
            'mappings': {
                'purchases.user_id': 'users.id',
                'purchases.product_id': 'products.id',
                'purchases.price': 'products.price'
            },
            'joins': [
                {
                    'master': 'purchases.user_id',
                    'detail': 'users.id'
                },
                {
                    'master': 'purchases.product_id',
                    'detail': 'products.id'
                }
            ]
        }
    ]
} 
```

现在我想显示所有购买，显示产品名称、用户名和购买日期。我似乎找不到办法做到这一点。文档有点稀缺。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T23:03:50.983

首先让我们稍微修正一下模型。在您的模式中，每个维度都有更多属性：id 和 name，将来您可能最终会获得更多详细信息。您可以通过将属性指定为列表来添加它们：`"attriubtes": ["id", "name"]`. 另请注意，维度被命名为 entity`product`而不是 key `id_product`。key`id_product`只是`product`维度的一个属性，现在`name`或将来可能`category`。维度反映了分析师的观点。

暂时我们忽略了日期应该是一个特殊维度的事实，将日期视为单值键，例如一年，这里就不复杂了。

```
"dimensions": [
    {"name": "user", "attributes": ["id", "name"]},
    {"name": "product", "attributes": ["id", "name"]},
    {"name": "date"}
], 
```

因为我们更改了维度的名称，所以我们必须在多维数据集的维度列表中更改它们：

```
"cubes": [
    {
        "name": "purchases",
        "dimensions": ["user", "product", "date"],
        ... 
```

您的架构反映了经典的事务架构，而不是传统的数据仓库架构。在这种情况下，您必须像以前一样明确，并提及所有必要的映射。规则是：如果属性属于事实表（逻辑视图），那么key就是`attribute`，比如`price`，没有表规范。如果属性属于某个维度，例如`product.id`，则语法为`dimension.attribute`。映射字典的值是物理表和物理列。查看[有关映射的更多信息](http://packages.python.org/cubes/mapping.html#mapping)。您的架构的映射如下所示：

```
"mappings": {
    "price": "products.price",
    "product.id": "products.id",
    "product.name": "products.name",
    "user.id": "users.id",
    "user.name": "users.name"
} 
```

如果您的架构是，您将不必编写映射：

```
fact purchases
id | date | user_id | product_id | amount

dimension product
id | name | price

dimension user
id | name 
```

在这种情况下，您将只需要连接，因为所有维度属性都在它们各自的维度表中。请注意`amount`事实表中的 ，在您的情况下，由于您每次购买都没有购买的产品，因此与中`count`的相同。`price``product`

这是您的模型的更新模型：

```
{
    "dimensions": [
        {"name": "user", "attributes": ["id", "name"]},
        {"name": "product", "attributes": ["id", "name"]},
        {"name": "date"}
    ],
    "cubes": [
        {
            "name": "purchases",
            "dimensions": ["user", "product", "date"],
            "measures": ["price"],
            "mappings": {
                "price": "products.price",
                "product.id": "products.id",
                "product.name": "products.name",
                "user.id": "users.id",
                "user.name": "users.name"
            },
            "joins": [
                {
                    "master": "purchases.user_id",
                    "detail": "users.id"
                },
                {
                    "master": "purchases.product_id",
                    "detail": "products.id"
                }
            ]
        }

    ]
} 
```

您可以在不编写任何 Python 代码的情况下尝试该模型，只需使用[`slicer`](http://packages.python.org/cubes/slicer.html)命令即可。为此，您将需要`slicer.ini` [配置文件](http://packages.python.org/cubes/server.html#configuration)：

```
[server]
backend: sql
port: 5000
log_level: info
prettyprint: yes

[workspace]
url: sqlite:///data.sqlite

[model]
path: model.json 
```

更改`url`为`[workspace]`指向您的数据库并更改`path`为`[model]`指向您的模型文件。现在您可以尝试：

```
curl "http://localhost:5000/aggregate" 
```

还尝试向下钻取：

```
curl "http://localhost:5000/aggregate?drilldown=product" 
```

如果您需要任何进一步的帮助，请告诉我，我是 Cubes 的作者。

# apache - 电子标签配置错误

> ID：13233810
> 
> 赞同：5
> 
> 时间：2012-11-05T14:09:06.950
> 
> 标签：apache, etag, yslow

YSlow 给了我“有 94 个组件的 ETag 配置错误”-消息。我`.htaccess`在 Apache 上用“FileETag MTime Size”配置了它们。图像以这种格式显示 etag `245975c-3f4-9d8ae780`：. 我们不会扩展或使用 CDN。

我怎样才能使它们正确和实用？对我来说，它们似乎是正确的，我不知道为什么 YSlow 将它们标记为配置错误。

还是我应该禁用它们并过期？这是我在其他地方发现的建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T05:18:45.903

当 YSlow 抱怨您的 ETag 被“错误配置”时，这确实意味着 ETag 存在。如果您阅读[有关 ETag 的 Yahoo 性能规则](http://developer.yahoo.com/performance/rules.html#etags)，您会看到它们建议关闭它们的依据。

在您的 .htaccess 文件中使用此设置关闭 ETags 后，您可以通过在您的站点上运行 YSlow 来测试这一点：

```
FileETag none 
```

一般来说，我不会太担心尝试关闭 ETags。雅虎的建议更适合多服务器站点，因此该规则不一定适用于所有情况。

进一步阅读：

*   关于这个 SO 问题的好答案：[Why does google pagespeed ask to specify ETag even when cache headers are set](https://stackoverflow.com/questions/11259870/why-does-google-pagespeed-asks-to-specify-etag-even-when-cache-headers-are-set)
*   Google PageSpeed 有一篇关于[缓存最佳实践](https://developers.google.com/speed/docs/best-practices/caching)的很好的文章，包括一些正确使用 ETags 的解释

# c# - Marshal.SizeOf 结构返回过多的数字

> ID：13233812
> 
> 赞同：6
> 
> 时间：2012-11-05T14:09:18.543
> 
> 标签：c#, struct, sizeof

我有以下结构

```
[StructLayout(LayoutKind.Sequential)]
public struct SFHeader
{

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 5)]
    public string FileName;

    public int Offset;

    public short Size;

    public byte Flags;

    public byte Source;

    public long LastWriteTime;

    public byte[] GetBytes()
    {
        int size = Marshal.SizeOf(this);
        var buffer = new byte[size];
        IntPtr ptr = Marshal.AllocHGlobal(size);

        Marshal.StructureToPtr(this, ptr, true);
        Marshal.Copy(ptr, buffer, 0, size);
        Marshal.FreeHGlobal(ptr);

        return buffer;
    }

    public static SFHeader FromBytes(byte[] buffer)
    {
        var str = new SFHeader();
        int size = Marshal.SizeOf(str);

        IntPtr ptr = Marshal.AllocHGlobal(size);
        Marshal.Copy(buffer, 0, ptr, size);
        str = (SFHeader)Marshal.PtrToStructure(ptr, str.GetType());
        Marshal.FreeHGlobal(ptr);

        return str;
    }

} 
```

我需要将我的结构转换为字节数组（使用套接字作为数据包发送），所以我使用该`GetBytes`方法，但它返回一个字节数组`24`而不是`21`字节数组：

*   文件名（字符串）：5 个字节
*   偏移量（int）：4 字节
*   大小（短）：2 字节
*   标志（字节）：1 字节
*   源（字节）：1字节
*   LastWriteTime（长）：8 字节

所以：5+4+2+1+1+8 = 21 个字节。
发生这种情况是因为`Marshal.SizeOf`返回 24，为什么？似乎多余的字节放在字符串的字节之后，实际上例如以下结构：

```
var header = new SFHeader()
{
   FileName = "aaaa",
   Offset = 1,
   Size = 1
}; 
```

转换为以下缓冲区：

```
[0] = 97
[1] = 97
[2] = 97
[3] = 97
[4] = 0
[5] = 0
[6] = 0
[7] = 0
[8] = 1
[9] = 0
[10] = 0
[11] = 0
[12] = 1
[13] = 0
... The following are all zero (0) 
```

第五个、第六个和第七个是多余的字节。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:32:50.300

您遇到了字节对齐问题。为了使字段保持在字边界上以提高访问速度，编译器会`string`用 3 个额外字节填充您。要解决此问题，请使用`Pack`.`StructLayoutAttribute`

```
[StructLayout(LayoutKind.Sequential, Pack=1)]  // notice the packing here
public struct SFHeader
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 5)]
    public string FileName;

    public int Offset;

    public short Size;

    public byte Flags;

    public byte Source;

    public long LastWriteTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:35:05.313

您可以使用[固定大小的缓冲区](http://msdn.microsoft.com/en-us/library/zycewsya%28v=vs.110%29.aspx)而不是字符串。

```
[StructLayout(LayoutKind.Sequential)]
public unsafe struct SFHeader
{
    public fixed char FileName[5];
    public int Offset;
    public short Size;
    public byte Flags;
    public byte Source;
    public long LastWriteTime;

    public byte[] GetBytes()
    {
        //omitted
    }

    public static SFHeader FromBytes(byte[] buffer)
    {
        //omitted
    }
} 
```

# .net - 使用 .NET 实现全文搜索的理想功能语言

> ID：13233814
> 
> 赞同：7
> 
> 时间：2012-11-05T14:09:25.187
> 
> 标签：.net, scala, haskell, clojure, f#

在我学习计算机科学的过程中，我接触了一些函数式语言，比如 Prolog，但现在我在过去 10 年里只做 C#、Ruby JavaScript 和 Java 等命令式语言。目前，我正在为一家在线商店创建一个全文搜索引擎，而且我已经走得很远了。但是偶然发现了一些函数式语言，比如 Clojure 的 Haskell，很明显，函数式范式更适合，而命令式的方式并不是这项工作的正确工具。

所以我们有大约 1000 万条记录的全文索引。每个记录基本上都包含一个单词出现，以及它起源的记录的 id 和文本位置。

当用户输入搜索字符串时，它会被解析为表达式树。例如，搜索字符串“transformer 100 W”的结果类似于

```
AND('transformer%', OR(NEAR('100', 'W'), NEAR('100', 'watts'), '100W', '0.1kW')) 
```

这里有一些额外的“智能”，但这与这个问题无关。

然后递归地评估表达式树并生成几个 sql 查询，这些查询可以以 .NET-DataTables 的形式返回多达 100,000 行。然后将它们读入集合或字典，并根据谓词应用交集和并集，以找到与整个搜索表达式匹配的所有结果。对于 NEAR 评估，还比较了已发现事件的位置索引。但这一切都是命令式的，有很多 for 循环。

此外，还有一个排名功能，可以将找到的单词出现的分数相加。仅作为前缀或模糊匹配（由数据库服务器完成）找到的单词得分低于精确匹配。

对于每个结果项，我还需要获取所有匹配的单词的列表，以便在结果页面中突出显示这些单词。

所以大致评估算法是一个类似的函数

```
expression tree, full text index -> 
resulting items that match the expressin tree, 
each with a ranking sum 
and a list of all found word occurrences for this item 
```

我只是在这里给出一个粗略的概述，但我希望你能得到足够的图片。

现在“现实世界”的约束：

*   整个应用程序（到目前为止）都是用 C# 编写的，因此与 .NET 的轻松集成至关重要。
*   大量数据被读入 .NET-DataTables，然后需要进行评估和转换。结果应包含在 .NET 类型中（字典、集合、数组等...）。
*   性能非常重要。目前我的算法搜索通常需要两秒钟（不包括 sql），这还可以，但应该改进。我们的服务器有 16 个处理器，因此欢迎并行处理。由于我们每秒收到一个搜索请求，并且当前实现是单线程的，因此处理器时间仍然可用。
*   语言（和编译器）应该是成熟的。

由于我需要继续使用 .NET，因此我正在研究 Clojure-CLR、F# 和 Scala 的 .NET。

我非常喜欢 Clojure 的概念，但现在我无法评估它是否能胜任这项工作。阅读有关 F# 的文章让我感觉很复杂，因为它似乎希望能够做几乎所有事情，而对于给定的任务，我倾向于使用更“纯”的数学方法。但也许这对于 F# 也是可能的，我还没有意识到这一点。我还没有深入研究 Scala，但它似乎已经很成熟了。

欢迎任何见解！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T14:30:01.117

> *   整个应用程序（到目前为止）都是用 C# 编写的，因此与 .NET 的轻松集成至关重要。
> *   大量数据被读入 .NET-DataTables，然后需要进行评估和转换。结果应包含在 .NET 类型中（字典、集合、数组等...）。

F# 应该是更好的选择。作为 Visual Studio 中的一流语言，F# 与 C# 的互操作性非常好。

> *   性能非常重要。目前我的算法搜索通常需要两秒钟（不包括 sql），这还可以，但应该改进。我们的服务器有 16 个处理器，因此欢迎并行处理。由于我们每秒收到一个搜索请求，并且当前实现是单线程的，因此处理器时间仍然可用。

假设您从功能优先且不可变的实现开始，那么并行化您的应用程序应该很容易。此外，[异步工作流](http://msdn.microsoft.com/en-us/library/dd233250.aspx)对于像您这样的 IO 密集型应用程序来说是一大福音。

> *   语言（和编译器）应该是成熟的。

我不会将 F# 与 JVM 上的 Clojure 和 Scala 进行比较，但 F# 比 .NET 上的 Clojure CLR 和 Scala 成熟得多。在选择 F# 时，您一定会得到 Microsoft 的长期承诺和不断发展的 F# 社区的帮助。

> 当用户输入搜索字符串时，它会被解析为表达式树。

[您可以使用有区别的联合](http://msdn.microsoft.com/en-us/library/dd233226.aspx)来表示表达式树。通过在 F# 3.0 中引入[查询表达式](http://msdn.microsoft.com/en-us/library/vstudio/hh225374.aspx)，您可以轻松地将逻辑转换为 SQL 查询。您甚至可以通过为您的域定义类似的查询语言来进一步推动它。

> 阅读有关 F# 的文章让我感觉很复杂，因为它似乎希望能够做几乎所有事情，而对于给定的任务，我倾向于使用更“纯”的数学方法。但也许这对于 F# 也是可能的，我还没有意识到这一点。

F# 3.0 引入了[类型提供程序](https://stackoverflow.com/questions/4711537/f-type-providers-how-do-they-work)，允许用户以类型安全的方式访问非结构化数据；您可能想观看[此“F# 3.0 - 信息丰富的编程”视频](http://channel9.msdn.com/Blogs/Charles/C9-Lectures-Donna-Malayeri-F-30-Information-Rich-Programming-1-of-1)以获得更多见解。如果你想使用 F# 作为数据挖掘的编程语言，我已经问了一个相关的问题，并在[这里](https://stackoverflow.com/questions/8068040/resources-for-working-with-machine-learning-in-f)得到了很好的回答。

也就是说，您对 F# 的第一感觉可能并不正确。*根据我的经验，你总是可以尽可能地接近功能性和不可变的一面。*鉴于您已经有了一个有趣的应用程序，我建议您亲自动手了解一下 F# 是否适合您的目的。

**更新：**

下面是一个展示这个想法的 F# 原型：

```
/// You start by modeling your domain with a set of types.
/// FullText is a sequence of Records, which is processed on demand.
type Word = string
and Freq = int
and Record = {Occurrences: (Word * Freq) list; Id: string}
and FullText = Record seq

/// Model your expression tree by following the grammar closely.
type Expression =
    | Occur of Word
    | Near of Word * Word
    | And of Expression * Expression 
    | Or of Expression * Expression

/// Find wether a word w occurs in the occurrence list.
let occur w {Occurrences = xs} = xs |> Seq.map fst |> Seq.exists ((=) w)

/// Check whether two words are near each other.
/// Note that type annotation is only needed for the stub implementation.
let near (w1: Word) (w2: Word) (r: Record): bool = failwith "Not implemented yet"

/// Evaluate an expression tree.
/// The code is succinct and clear thanks to pattern matching. 
let rec eval expr r = 
    match expr with
    | Occur w -> occur w r
    | Near(w1, w2) -> near w1 w2 r
    | And(e1, e2) -> eval e1 r && eval e2 r
    | Or(e1, e2) -> eval e1 r || eval e2 r

/// Utility function which returns second element in a 3-tuple
let inline snd3 (_, x, _) = x

/// Get the rank of the record by adding up frequencies on the whole database.
let rank (r: Record) (ft: FullText): Freq = failwith "Not implemented yet"

/// Retrieve all records which match the expression tree.
let retrieve expr fullText =
    fullText |> Seq.filter (eval expr)
             |> Seq.map (fun r -> r, rank r fullText, r.Occurrences)
             |> Seq.sortBy snd3

/// An example query
let query = 
    And (Occur "transformer%", 
         Or (Or (Near ("100", "W"), Near ("100", "watts")), 
             Or (Occur "100W", Occur "0.1kW"))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T15:44:10.373

我很好奇您为什么不考虑选择 LINQ。它似乎满足您的所有标准。注意我没有使用 Scala 的经验，所以我不能对此发表评论。

> *   整个应用程序（到目前为止）都是用 C# 编写的，因此与 .NET 的轻松集成至关重要。
> *   大量数据被读入 .NET-DataTables，然后需要进行评估和转换。结果应包含在 .NET 类型中（字典、集合、数组等...）。

在这里，LINQ > F# > Clojure-CLR。如果一切都已经在 C# 中，那么 LINQ 将是最容易集成的。Visual Studio 对智能感知和函数定义导航之类的支持在纯 C# 程序中似乎要好得多。从 C# 调用 Clojure 可能很可怕——理论上它应该可以正常工作，但在实践中，请准备好花费数周时间找出为什么事情没有按照您期望的方式工作。它真的被设计成顶级的东西；你从 Clojure 调用 C#，相反的方向在 Clojure-CLR 开发人员的优先级列表中并不高；有基本的支持，但你得到你得到的。

> *   性能非常重要。目前我的算法搜索通常需要两秒钟（不包括 sql），这还可以，但应该改进。我们的服务器有 16 个处理器，因此欢迎并行处理。由于我们每秒收到一个搜索请求，并且当前实现是单线程的，因此处理器时间仍然可用。

LINQ ~= F# > Clojure。我在其他地方读到，对于大多数惯用编写的算法，LINQ 的性能可以证明比 F#*略*好，但它们已经足够接近了，这无关紧要。PLINQ 使并行性变得容易。Clojure-CLR 的启动时间非常慢，而且运行时开销也会减慢速度。

> *   语言（和编译器）应该是成熟的。

LINQ >= F# > Clojure。并不是说 F# 完全不成熟*，*但 Visual Studio 的支持有点落后，而且世界上基于 LINQ 的生产代码（以及更多堆栈溢出答案）比 F# 多得多。

> 阅读有关 F# 的文章让我感觉很复杂，因为它似乎希望能够做几乎所有事情，而对于给定的任务，我倾向于使用更“纯”的数学方法。但也许这对于 F# 也是可能的，我还没有意识到这一点。

没有一种语言像 Haskell 那样是*纯纯*的，但就编写非纯代码的难度而言，我将其列为：LINQ > Clojure > F# > Scala。LINQ 只能通过调用不纯的方法而变得不纯。Clojure 有 refs 和 atom，F# 任何东西都可以被指定为可变的，而 Scala（根据我的理解）实际上只是带有功能特性的 Java。

F# 和 Scala 的功能特性是对模式匹配的语言支持。在 C# 中，您需要某种继承层次结构或 b?x:y 运算符链以功能性地执行操作（或者如果您对非功能性方法感到满意，则使用 if/else），模式匹配在不同的情况下进行条件操作原始数据类型的变化更加简洁。这可能在您计算精确匹配、前缀匹配和模糊匹配排名时很有用，但是`var alg = x.match == exact ? alg1 : x.match == prefix ? alg2 : alg3`C# 中的 ab?x:y 链在这种简单情况下会非常清晰——当匹配变得更加复杂时，语言集成模式匹配变得更加复杂有价值的。

**有趣的是，我认为 F# 证明比 LINQ 更有用的工具包的一个方面不是查询**，LINQ 本身的名称应该表明它可以处理，而是**将搜索字符串解析为表达式树。** 这是函数式语言和模式匹配真正擅长的一个领域，添加 FsLex 和 FsYacc 等工具可以让您抢占先机。

综上所述，我认为决定取决于你想去哪里。如果您只想清理搜索算法并完成它，我建议您使用 LINQ 方法。但是，如果您想为整个程序逐步采用更注重功能的风格（并且您的公司愿意为您投入的时间付费），那么不妨看看 F#选项。无论哪种方式，我都会先执行 LINQ 选项，因为这对您来说可能更直接，并且一旦您开始走这条路，就会帮助引导您的 F# 在功能上更具惯用性。

简单地说，这就是您想要的，只需填写您的 Near 和 Equal 提取器的函数，以及 GetRank 和 GetStrings 函数，然后使用下面的

```
static IEnumerable<Record> FetchRecords(this Tree tree) {
    return tree.Op == "OR"    ? tree.Args.SelectMany(FetchRecords).Distinct() :
           tree.Op == "AND"   ? tree.Args.Select(FetchRecords).Aggregate((intersect, current) => intersect.Intersect(current)) :
           tree.Op == "NEAR"  ? FetchValsNear(tree.Args[0].Op, tree.Args[1].Op) :
                                FetchValsEqual(tree.Op);
}

static IEnumerable<Record> FetchValsEqual(string s) {
    throw new NotImplementedException();
}

static IEnumerable<Record> FetchValsNear(string s1, string s2) {
    throw new NotImplementedException();
}

static IEnumerable<Tuple<Record, double, string[]>> OrderByRank(this IEnumerable<Record> vals) {
    return from val in vals
           let rank = GetRank(val)
           orderby rank
           let strings = GetStringsIn(val)
           select Tuple.Create(val, rank, strings);
}

static string[] GetStringsIn(Record val) {
    throw new NotImplementedException();
}

static double GetRank(Record val) {
    throw new NotImplementedException();
}

class Tree {
    public string Op;
    public Tree[] Args;
}

struct Record {/*your record here--use struct so Distinct and Intersect above work naturally (or use class and override Equals)*/} 
```

像这样：

```
foreach (var tuple in myTree.FetchRecords().AsParallel().OrderByRank().Take(30)) {
    // add to datagrid or whatever
} 
```

这为您提供了简单的并行性和惰性，因此该`GetStringsIn`函数仅在您获取的记录上执行（在本例中为前 30 个）。（请注意，可以使用[此处](https://stackoverflow.com/questions/1674742/intersection-of-multiple-lists-with-ienumerable-intersect)的任何示例`AND`来简化选择器）。`IntersectAll`

# objective-c - NSUbiquitousKeyValueStore 是否经过认证可以在没有连接的情况下工作？

> ID：13233817
> 
> 赞同：1
> 
> 时间：2012-11-05T14:09:32.613
> 
> 标签：objective-c, cocoa-touch, nsuserdefaults, icloud, nsubiquitouskeyvaluestore

文档对此似乎不太清楚，但是当设备未连接时，我可以依靠 NSUbiquitousKeyValueStore 在本地保存数据，还是应该使用 NSUserDefaults？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:14:03.483

来自关于键值存储的[iCloud 设计文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW11)

*始终有效可用。如果设备未连接到帐户，则设备上创建的更改会在设备连接到帐户后立即推送到 iCloud。*

（在页面底部的表格中）

# visual-studio-2010 - 安装程序未显示任何对话框

> ID：13233822
> 
> 赞同：0
> 
> 时间：2012-11-05T14:09:50.663
> 
> 标签：visual-studio-2010, wix, windows-7-x64, wix3.6

我正在使用 WiX 3.6 安装程序来创建自定义安装程序。

这是我的安装程序代码

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" Name="Installer" Language="1033" Version="1.0.0.0" Manufacturer="Installer" UpgradeCode="b678de18-2e38-44d5-a686-9e923f8c565e">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

        <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
        <MediaTemplate />

        <Feature Id="ProductFeature" Title="Installer" Level="1">
            <!--<ComponentGroupRef Id="ProductComponents" />-->
        </Feature>

    </Product>

  <Fragment>
    <!--<UIRef Id="WixUI_Mondo" />
    <UIRef Id="WixUI_ErrorProgressText" />-->
    <UI>
      <Dialog Id="InstallDlg" Width="370" Height="270" Title="[ProductName] Setup" NoMinimize="yes">
        <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes">
          <Text>{\DlgTitleFont}Ready to Install</Text>
        </Control>
        <Control Id="Install" Type="PushButton" X="304" Y="243" Width="56" Height="17"
    Default="yes" Text="Install">
          <Publish Event="EndDialog" Value="Return" />
        </Control>
      </Dialog>
      <InstallUISequence>
        <Show Dialog="InstallDlg" After="ExecuteAction" />
      </InstallUISequence>
    </UI>
  </Fragment>
    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="Installer">

        </Directory>
            </Directory>
        </Directory>
    </Fragment>

    <Fragment>
        <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
            <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
            <!-- <Component Id="ProductComponent"> -->
                <!-- TODO: Insert files, registry keys, and other resources here. -->
            <!-- </Component> -->
      <ComponentGroupRef Id="ProductComponents"/>
        </ComponentGroup>
    </Fragment>
</Wix> 
```

问题是安装程序没有显示至少一个对话框。

它像这样显示并在几秒钟后消失。

![在此处输入图像描述](../Images/6f2c3ecbe9c7f54881ff12bd8b05263d.png)

请告诉我我的代码哪里出错了。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:31:55.180

我错过了

`<UIRef Id="WixUI_Mondo"/>`在关闭产品标签之前。现在它起作用了

# r - Excel 使用 R 中的 write.table 函数遗漏数值向量中的值

> ID：13233823
> 
> 赞同：-1
> 
> 时间：2012-11-05T14:09:53.240
> 
> 标签：r, excel, dataframe, numeric

我正在尝试从 R 中保存一个 data.frame，以便可以从 Excel 中读取它。我已经使用其他几个与我现在提到的具有相同结构的 data.frames 完成了此操作，到目前为止没有问题。但是由于某种原因，当我尝试保存这个 data.frame 然后用 Excel 打开它时，Excel 无法读取列 FreqDev 和 LengthDev 中的许多数值。相反，这些行显示一串“#”符号。

我的 data.frame 看起来像这样：

```
head(RegPartV)
     LogFreq     Word   PhonCV WordClass  FreqDev  LengthDev Irregular
1277  28.395  geweest CV-CVVCC         V 5.464336 -1.1518498     FALSE
903   25.647  gemaakt CV-CVVCC         V 4.885296 -1.1518498     FALSE
752   23.304    gehad   CV-CVC         V 4.391595 -2.1100420     FALSE
610   22.765 gebracht CV-CCVCC         V 4.278021 -0.6727537     FALSE
1312  22.041   gezegd  CV-CVCC         V 4.125465 -1.6309459     FALSE
647   21.987   gedaan  CV-CVVC         V 4.114086 -1.6309459     FALSE 
```

data.frame 中的信息类型为：

```
str(RegPartV)
'data.frame':   2096 obs. of  7 variables:
 $ LogFreq  : num  28.4 25.6 23.3 22.8 22 ...
 $ Word     : chr  "geweest" "gemaakt" "gehad" "gebracht" ...
 $ PhonCV   : chr  "CV-CVVCC" "CV-CVVCC" "CV-CVC" "CV-CCVCC" ...
 $ WordClass: Factor w/ 1 level "V": 1 1 1 1 1 1 1 1 1 1 ...
 $ FreqDev  : num  5.46 4.89 4.39 4.28 4.13 ...
 $ LengthDev: num  -1.152 -1.152 -2.11 -0.673 -1.631 ...
 $ Irregular: logi  FALSE FALSE FALSE FALSE FALSE FALSE ... 
```

奇怪的是，如果我将鼠标放在现在只有 # 符号的数字单元格上（在 excel 文件中），我会看到原始 R data.frame 中曾经存在的数字的痕迹。例如，data.frame 中第一行的这些列的值是：

```
>RegPartV[1,c(5,6)]
      FreqDev LengthDev
1277 5.464336  -1.15185 
```

如果我将鼠标放在与我刚刚显示的相同值相对应的 Excel 单元格（仅包含 # 符号）上，我会看到：

```
54643356148468 
```

和

```
-115184982188519 
```

所以数字仍然存在，但由于某种原因，R 或 Excel 都无法计算小数点所在的位置。

我用来保存 data.frame 的方法（以及我用于结构等效的 data.frame 的方法）是：

```
write.table(RegPartV,file="RegPartV",quote=F,sep="\t",row.names=F,col.names=T) 
```

然后我用 Excel 打开文件，我希望看到那里的所有信息，由于某种原因，我在这个特定的 data.frame 中遇到了这个数字问题。

非常欢迎任何有关获得 Excel 可读 data.frame 的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:25:48.120

根据您的问题描述，我怀疑您将“，”作为 Excel 中的默认小数分隔符。更改 Excel 中的默认值或添加`dec=","`到`write.table`命令中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:15:52.167

这实际上不是错误：“#”表示字符串/值太长而无法放入列中。加宽列，您将看到正确的内容。

# objective-c - 刷新的图像未加载

> ID：13233826
> 
> 赞同：0
> 
> 时间：2012-11-05T14:10:19.543
> 
> 标签：objective-c, animation, nsstring, uiimageview, xcode4.3

我有一些代码，我在其中声明了要在 UIImageview 中显示的 14 张图像，并将它们命名为 1、2、3、....14.jpg。这些图像位于从桌面复制并放置在项目中的文件夹中。

现在我有一个服务器和客户端代码运行，名为 1,2,.... 的图像将被刷新，新图像将出现。但是当我尝试执行我的代码时，可以看到第一次出现的图像，并且每次重复时，模拟器中显示的图像都不会改变......

```
 NSArray *array1=[NSArray arrayWithObjects:[UIImage imageNamed:@"1.jpg"],[UIImage imageNamed:@"2.jpg"],[UIImage imageNamed:@"3.jpg"],[UIImage imageNamed:@"4.jpg"],[UIImage imageNamed:@"5.jpg"],[UIImage imageNamed:@"6.jpg"],[UIImage imageNamed:@"7.jpg"],[UIImage imageNamed:@"8.jpg"],[UIImage imageNamed:@"9.jpg"],[UIImage imageNamed:@"10.jpg"],[UIImage imageNamed:@"11.jpg"],[UIImage imageNamed:@"12.jpg"],[UIImage imageNamed:@"13.jpg"],[UIImage imageNamed:@"14.jpg"],nil];

[UIImageView beginAnimations:Nil context:NULL];
image1.animationImages=array1;
image1.contentMode=UIViewContentModeScaleAspectFill;
image1.animationDuration=10;
image1.animationRepeatCount=10;
[image1 startAnimating]; 
```

当这段代码运行时，我得到了第一次显示的相同的 14 张图像。即使该文件夹中的图像已更改，它也不会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:23:41.240

的文档`imageNamed:`说它在应用程序的主包中查找。由于您无法写入设备上的应用程序包，因此如果以这种方式加载它们，您将无法替换随应用程序分发的内容。

您可能希望`imageWithContentsOfFile:`在应用程序首次运行时切换到分布式图像并将其移动到可写位置，以便您可以更新它们。

（你没有说你将从服务器获取的图像存储在哪里。）

# android - 如何按地理点设置屏幕缩放？

> ID：13233831
> 
> 赞同：1
> 
> 时间：2012-11-05T14:10:29.490
> 
> 标签：android, google-maps, zooming, mapactivity

我在两个地理点之间画了一条线。如何通过这两个地理点设置屏幕缩放。我想要做的是默认显示起点和终点。有什么算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:30:01.180

这是我所做的：

```
private void centerMap() {

            int minLat = Integer.MAX_VALUE;
            int maxLat = Integer.MIN_VALUE;
            int minLon = Integer.MAX_VALUE;
            int maxLon = Integer.MIN_VALUE;

            for (Point point : twoPoints) {

                    int lat = (int) (point.getLatitude() * 1E6);
                    int lon = (int) (point.getLongitude() * 1E6);

                    maxLat = Math.max(lat, maxLat);
                    minLat = Math.min(lat, minLat);
                    maxLon = Math.max(lon, maxLon);
                    minLon = Math.min(lon, minLon);
            }

                    mc.zoomToSpan(Math.abs(maxLat - minLat), Math.abs(maxLon - minLon));
            mc.animateTo(new GeoPoint((maxLat + minLat) / 2, (maxLon + minLon) / 2));
    } 
```

（其中 mc 是您的 MapController）

# php - Yii，实现“用户更改密码”的最佳方式

> ID：13233836
> 
> 赞同：7
> 
> 时间：2012-11-05T14:10:43.797
> 
> 标签：php, authentication, yii, user-management

我正在将 Yii 用于应用程序，我正在编写一个非常简单的用户管理，例如注册，删除和更新用户...对于更新现有用户，我需要先检查旧密码，然后再将其更改为新插入的密码. 所以这是我在表格中的字段：

```
username:----
old_password:---
new_password:--- 
```

我的用户表如下所示：

```
id, username, password 
```

如何在使用 new_password 更新 old_password 之前验证它？我知道通常的 php 编码，但我想知道是否有任何 Yii 技巧可以自动执行此操作......

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T22:38:02.057

你不应该用垃圾污染你的模型。请始终牢记这些基本的 MVC 原则：

*   您的控制器必须不知道您的模型的实现。
*   不要用与您的应用程序业务模型无关的东西污染您的模型。

始终创建可重用的代码，使您的代码“干燥”（不要重复自己）

顺便问一下，用户名字段的用途是什么？由于表单只对登录的用户可用，用户名已经可以通过 Yii::app()->user 访问。

```
<?php
// models/ChangePasswordForm.php

class ChangePasswordForm extends CFormModel
{
    /**
     * @var string
     */
    public $currentPassword;

    /**
     * @var string
     */
    public $newPassword;

    /**
     * @var string
     */
    public $newPasswordRepeat;

    /**
     * Validation rules for this form.
     *
     * @return array
     */
    public function rules()
    {
        return array(
            array('currentPassword, newPassword, newPasswordRepeat', 'required'),
            array('currentPassword', 'validateCurrentPassword', 'message'=>'This is not your password.'),
            array('newPassword', 'compare', 'compareAttribute'=>'validateNewPassword'),
            array('newPassword', 'match', 'pattern'=>'/^[a-z0-9_\-]{5,}/i', 'message'=>'Your password does not meet our password complexity policy.'),
        );
    }

    /**
     * I don't know your hashing policy, so I assume it's simple MD5 hashing method.
     * 
     * @return string Hashed password
     */
    protected function createPasswordHash($password)
    {
        return md5($password);
    }

    /**
     * I don't know how you access user's password as well.
     *
     * @return string
     */
    protected function getUserPassword()
    {
        return Yii::app()->user->password;
    }

    /**
     * Saves the new password.
     */
    public function saveNewPassword()
    {
        $user = UserModel::findByPk(Yii::app()->user->username);
        $user->password = $this->createPasswordHash($this->newPassword);
        $user->update();
    }

    /**
     * Validates current password.
     *
     * @return bool Is password valid
     */
    public function validateCurrentPassword()
    {
        return $this->createPasswordHash($this->currentPassword) == $this->getUserPassword();
    }
} 
```

示例控制器动作：

```
public function actionChangePassword()
{
    $model=new ChangePasswordForm();
    if (isset($_POST['ChangePasswordForm'])) {
        $model->setAttributes($_POST['ChangePasswordForm']);
        if ($model->validate()) {
            $model->save();
            // you can redirect here
        }
    }

    $this->render('changePasswordTemplate', array('model'=>$model));
} 
```

示例模板代码：

```
 <?php echo CHtml::errorSummary($model); ?>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'currentPassword'); ?>
        <?php echo CHtml::activePasswordField($model,'currentPassword') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'newPassword'); ?>
        <?php echo CHtml::activePasswordField($model,'newPassword') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'newPasswordRepeat'); ?>
        <?php echo CHtml::activePasswordField($model,'newPasswordRepeat') ?>
    </div>

    <div class="row submit">
        <?php echo CHtml::submitButton('Change password'); ?>
    </div>

    <?php echo CHtml::endForm(); ?>
</div><!-- form --> 
```

模板应该很容易创建。这段代码，经过一些小的调整，可以被复制并粘贴到另一个 Yii 项目中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T15:02:59.260

它的简单创建`action`具有更新传递的逻辑。

在这种情况下将目标`form`设为新的， 并以您想要的方式进行。`action``actionChangePass``validate`

可以这样举一个粗略的例子

```
 public function actionChangePass($id)
    {  
    $user = loadModel($id)
    if(md5($_POST['User']['old_password']) === $user->password)
    {
       $user->setScenario('changePassword');
       $user->attributes = $_POST['User'];                
       $user->password = md5($_POST['User']['new_password']);
       if($user->save())
         Yii::app()->user->setFlash('passChanged', 'Your password has been changed <strong>successfully</strong>.');
    }            
    else
    {
      Yii::app()->user->setFlash('passChangeError', 'Your password was not changed because it did not matched the <strong>old password</strong>.');                    
    }  
 } 
```

还要确保您的 user 中有 $old_password `User` `Model`。您也可以在模型规则中进行一些验证以使新密码成为必需

也可以有一些不同的方法，但我这样做是这样的

还创建您的自定义验证`scenario` `changePassword`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:04:29.293

这是我个人喜欢做的事情。这是一个复杂的版本。向模型中添加两​​个有助于处理密码的字段。请注意，这两个字段在数据库中不存在，也不存在于 Gii 生成的代码中。就像是

```
class UserModel extends CActiveRecord
{
    /*Password attributes*/
    public $initial_password;
    public $repeat_password;
    //..................
} 
```

在表单中，不要将数据库中的实际密码字段与任何输入相关联。数据库中的两个字段应该与这两个字段相关联。表单的简短版本变为：

```
 <?php echo $form->errorSummary($model); ?>

    <?php echo $form->passwordFieldRow($model,'initial_password',array('class'=>'span5','maxlength'=>128)); ?> 

    <?php echo $form->passwordFieldRow($model,'repeat_password',array('class'=>'span5','maxlength'=>128)); ?> 
```

现在我怎么知道用户更改了密码？如果两个字段为空，我只需检查 beforeSave() 并比较它们，然后更改密码。如果它们是空的，那么我将完全跳过整个过程。beforeSave 的简单版本是：

```
/**
     * Called before saving the model
     */
    protected function beforeSave()
    {
        if(parent::beforeSave())
        { 
            if($this->isNewRecord)
            { 
                $this->password = HashYourPass($this->initial_password); 
            }
            else
                { 
                    //should we update password?
                    if($this->initial_password !== '')
                    {
                        //encrypt password and assign to password field
                        $this->password = HashYourPass($this->initial_password);
                       //Check old password match here
                    }
                }
            return true;
        }
        else
            return false;
    } 
```

现在根据您的问题，缺少一件事。检查旧密码！您可以添加称为旧密码的新模型字段及其表单输入控件。然后在 beforesave 方法中（如注释所示），您可以将输入与数据库中的实际密码字段进行比较，如果它们匹配，则更改密码。

您可以将它们添加为带有场景的验证规则，但我发现它在某种程度上很复杂，而且我几乎没有时间就采用了这种方法。

# regex - 在 XSD 文件中，模式 [ !-~]* 实际检查什么？

> ID：13233838
> 
> 赞同：4
> 
> 时间：2012-11-05T14:10:50.110
> 
> 标签：regex, xsd

我进行了广泛搜索，但尚未找到任何解释正则表达式的地方：`[ !-~]*`或者，就此而言`([!-~]|[ ])*[!-~]([!-~]|[ ])*`

我使用了多个 RegEx 测试器，它们似乎接受所有输入。我读过 XSD 接受独特形式的 RegEx 并且不接受所有 RegEx 语句，因此，这可能不是标准的 RegEx 表达式（我不相信它是）。我唯一的提示是类型名称是`an`第一个表达式和`anM`第二个。我相信，在某种程度上，这是字母数字和字母数字 Multiple 的缩写，但我想 100% 确定这是真正接受的内容，而不是做出假设。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:17:38.237

`[ !-~]`匹配从`!`到范围内的空格或任何字符`~`，其中范围由 ASCII/Unicode 顺序定义。顺便说一句，`!`是第一个和`~`最后一个可打印的 ASCII 字符，因此它将匹配任何可打印的 ASCII 字符或空格。

`([!-~]|[ ])*[!-~]([!-~]|[ ])*`类似，但需要一个非空格字符。`[!-~]|[ ]`是一样的`[ !-~]`。

# html - 居中对齐 div 列

> ID：13233842
> 
> 赞同：2
> 
> 时间：2012-11-05T14:11:10.877
> 
> 标签：html, css

我想要做的是有 3 列 div，在页面中央对齐，例如：

[示例](http://i.stack.imgur.com/auETq.png) （说我不允许发布图片）

我在这里尝试了来自网站/博客/其他问题的各种不同建议，但似乎没有得到任何结果。

首先我尝试将 div 向左浮动，然后给他们的父 div 一个宽度和`margin:auto;`

那没有用，他们只是留在左边。

我注意到很多建议说停止为此使用 float 并使用`display:inline-block;`

所以我尝试了，并且在某种程度上它有效，例如：[fiddle](http://jsfiddle.net/tN3F4/)

但是，一旦我将任何内容添加到任何 div，它们就会停止对齐并跳下页面。

实现这一目标的最简单方法是什么（显然不使用表格）？我确信它不会像我做的那样困难。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:16:41.360

为此，您需要为要对齐的元素指定宽度，并使用“自动”左右边距。这是兼容标准的方式，适用于除 IE5.x 之外的任何地方。

```
<div style="width: 50%; margin: 0 auto;">Hello</div> 
```

要在 IE6 中使用此功能，您需要使用合适的 DOCTYPE确保打开[标准模式。](http://en.wikipedia.org/wiki/Quirks_mode)

如果你真的需要支持 IE5/Quirks 模式，而现在你不应该这样做，可以结合两种不同的居中方法：

```
<div style="text-align: center">
    <div style="width: 50%; margin: 0 auto; text-align: left">Hello</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:27:03.443

有一个解决方案可以使宽度未知的浮动居中：[http ://www.artlebedev.com/tools/technogrette/html/align-center/](http://www.artlebedev.com/tools/technogrette/html/align-center/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:34:11.427

添加`vertical-align:top;`到您的`.box`遗嘱中，将盒子排成一行。

要解决为什么添加文本似乎可以解决问题，这是因为

> 'inline-block' 的基线是它在正常流中的最后一个行框的基线，除非它没有流入行框，或者如果它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

来自[CSS2 视觉格式化模型细节](http://www.w3.org/TR/CSS2/visudet.html#leading)。

相关问题[为什么这个 inline-block 元素会被向下推？](https://stackoverflow.com/questions/9273016/why-is-this-inline-block-element-pushed-downward)

# iphone - 我的 iDevice 与 NSTimer 存在一些性能问题

> ID：13233843
> 
> 赞同：1
> 
> 时间：2012-11-05T14:11:13.000
> 
> 标签：iphone, ios, ipad

实际上我的应用程序有一些问题。我有一个计数器，`0.0001`由于我的`NSTimer`. `counter`开始于，我的计时器调用一个方法，该`999`方法只将我的计数器减少`1`.

所以，这是我的问题：当我在模拟器上执行我的应用程序时，它运行得很好，但是一旦我在我的 iPad 2 上测试它，计数器就非常低......

iPad 2 可能无法像我一样快速计算，所以这里有人可以选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:22:44.920

我不认为计时器被设计为以这种速度运行...您可以尝试使用后台线程...

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

    while (true) {

        // Wait for delay
        usleep(100);

        // If counter is displayed on the UI
        dispatch_async(dispatch_get_main_queue(), ^{

            // Increment
            ...

        }

        // If not on the UI, just increment here
        ...

    }

}); 
```

# wordpress - 内容上方的全宽幻灯片

> ID：13233844
> 
> 赞同：1
> 
> 时间：2012-11-05T14:11:13.553
> 
> 标签：wordpress, slideshow

我正在使用 Supersized 的 wordpress 版本。我的问题是我希望有这个漂亮的可调整大小的全角图片库，但能够将内容放在下面。我希望它在这里如何表现的一个例子；[http://www.pedinilondon.co.uk/](http://www.pedinilondon.co.uk/)他们使用的是非wordpress 版本，因此很容易将其从模板中破解。

它只是 CSS 或 div 操作的一个案例，还是我遇到了这个问题？我应该使用不同的幻灯片来实现我想要的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:49:15.637

你想要的听起来像流畅的图像（响应式设计），似乎有一个插件。 [http://wordpress.org/extend/plugins/wp-fluid-images/faq/](http://wordpress.org/extend/plugins/wp-fluid-images/faq/)

# php - 从 PHP 发送的电子邮件延迟 7 小时

> ID：13233847
> 
> 赞同：1
> 
> 时间：2012-11-05T14:11:19.763
> 
> 标签：php

我们的网站托管在 Godaddy linux 专用虚拟主机服务器上。网站在 PHP 上运行。从代码中发送的所有电子邮件都显示在 7 小时前发送的电子邮件框中。

我尝试在邮件功能中设置“日期”标题，但这没有帮助。在 PHP.ini 的 SMTP 设置中，它显示为 localhost。服务器时间设置正确，因此我找不到在哪里更改它。

也许我在想我们会将电子邮件迁移到 Google 应用程序。例如，Google 应用程序设置可以用作 SMTP 以从 Godaddy 服务器发送电子邮件吗？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:15:03.450

试试这个看看：

```
 echo date(); 
```

看看你得到了什么。

它可能与php.ini 中的**时区有关。**将其设置为您所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:20:47.347

如果在 Php.Ini 中找不到设置，您可能想尝试在邮件脚本上使用[http://php.net/manual/en/function.date-default-timezone-set.php设置时区](http://php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:23:44.333

在您的页面顶部放置`date_default_timezone_set('Asia/Calcutta');`并尝试

# php - jQuery更新多个#div，一个mysql_query

> ID：13233848
> 
> 赞同：3
> 
> 时间：2012-11-05T14:11:28.420
> 
> 标签：php, jquery, mysql, html

有点复杂，但我会尽力解释我的问题。

我有一个主文件dashboard.html。其中我有一个 jQuery 函数，每 15 秒加载一次 mysql_query 以获得我需要的 15 个左右的变量。（这是一个财务/销售网络应用程序......销售代理想要接近实时的销售、订单、$earned..etc 更新），这些更新显示在 #div 中，其中包含多个列表项。对于每 15 秒查询一次，然后整个 div 一次更新的方法，这没有问题。正因为如此，我没有附加一个Jquery 效果（即fadeIn/fadeOut）到它，因为那时整个div 不断地褪色。不是我想要的视觉效果，但就目前而言，它有效。

我的目标：能够每 15 秒执行一次 mysql_query。获取变量（我目前已经这样做了。但现在，我希望能够仅更新已更改的 ListItem 并将淡入淡出效果附加到该项目，而不是整个#div。

我试图避免将查询分离为 15 个单独的查询，因为这显然效率不高。

希望这对每个人都有一些意义。可以提供代码，但我认为此时它不会有帮助.. 我需要了解开发正确代码所需的方法。感谢大家的预期帮助。

编辑：我添加了一些代码来帮助澄清我的立场：dashboard.html

```
var auto_refresh = setInterval(function (){
$('#order_jq').load('stats_count.php')
}, 15000); // refresh every 15 seconds 
```

然后在体内：

```
<div class="span8">
<div id="order_jq" class="centerContent">
Patiently loading stats ...
</div><!-- End id="ortder_jq -->
</div><!-- End .span8 --> 
```

stats_count.php 包括（为了清楚起见，已删除）

```
<?php
require "database/connect2.php";
$result = mysql_query( "SELECT .... NORMAL QUERY...NOTHING FANCY HERE")
while ($row = mysql_fetch_array($result))
{$orders = number_format($row['ordercount']);
$annual_order = number_format($row['annual_order']);
} 
```

最后包含在 stats_count.php 我还包括列表项：

```
<ul class="bigBtnIcon">
    <li>
      <a href="#">
        <span class="icon entypo-icon-phone"></span>
        <span class="txt">Orders</span>
        <span class="notification"><?php echo $orders?></span>
      </a>
     </li>
      <li>
        <a href="#">
          <span class="icon brocco-icon-mic"></span>
          <span class="txt">Auburn</span>
          <span class="notification blue"><?php echo $annual_order ?></span>
        </a>
      </li>
</ul> 
```

-D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:15:03.707

如果您有多个要更新的 div，则必须使用它们的类“.class”而不是 id “#id”来选择它们。

要每 15 秒创建一次 mysql_query，您需要设置 setInterval(function(),15000) 其中函数必须向某个页面发出 ajax 请求来执行此查询。

我可以建议你使用 jQuery Ajax 来处理这些请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:21:22.703

在不了解有关您的数据返回的格式的更多详细信息的情况下，很难了解具体情况，但一般方法是：

1.  将当前值存储到对象中，
2.  使用传入的值创建一个新对象
3.  循环遍历对象的属性，将传入值与现有值进行比较
4.  更新单个面板（通过类或更具体的 id）
5.  将传入值对象转换为当前值对象，为下一个 sql 查询做准备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:25:57.680

如果我理解正确，可以这样做： - 你所有的列表项都必须有一个类属性，比如说“list_items”。- 使用 Jquery 获取数据后，您可以在 list_items 上执行 jquery.each()，这样您可以检查该列表项的值是否 == 新值，如果不是，则更新您的列表项。我希望这能稍微回答你的问题。

# jquery - 使用 c# 的 Ajax 请求 MVC 4.0

> ID：13233849
> 
> 赞同：5
> 
> 时间：2012-11-05T14:11:28.863
> 
> 标签：jquery, asp.net-mvc, c#-4.0

我想通过ajax请求返回一条记录

C#代码如下：

```
 [HttpPost]
    public WorkoutsViewModel GetSavedWorkoutTemplate(int WorkoutId)
    {
        return _db.Workouts.Where(w => w.Id == WorkoutId).Select(w => new WorkoutsViewModel
        {
            Tag = w.Tags.FirstOrDefault(),
            Name = w.Name,
            MaxEffort = w.MaxEffort,
            Id = w.Id,
            Description = w.Description,
            Compare = w.Compare,
            Category = w.Category
        }).FirstOrDefault();
    } 
```

jQuery代码是：

```
function GetSavedWorkoutTemplate(obj) {      
    $("#Workout").hide();
    var WorkoutId = $(obj).val();
    if (WorkoutId == "") {
        return;
    }
    var dto = { "WorkoutId": WorkoutId };

    $.ajax({
        type: "post",
        url: "/MemberWorkout/GetSavedWorkoutTemplate",
        contenttype: "application/json; charset=utf-8",
        data: dto,       
        success: function (result) {
            debugger;
            $("#Workout").show();
        },
        error: function (result) {
            alert("Unable to update status.");
        }
    });
} 
```

html:

```
 @Html.DropDownList("ddlWorkout", new SelectList(ViewBag.ddlWorkout, "Id", "Name"), "--Select Workout--", new { required = true, onchange = "GetSavedWorkoutTemplate(this);", style = "width:310px" }) 
```

在成功函数中，我得到的结果是“TheGYM.Web.Models.WorkoutsViewModel”作为字符串而不是模型，请纠正我做错了什么，我想返回一个模型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T14:16:51.670

您必须返回 JsonResult，而不是模型对象。

将您的操作更改为：

```
[HttpPost]
public ActionResult GetSavedWorkoutTemplate(int WorkoutId)
{
    return Json(_db.Workouts.Where(w => w.Id == WorkoutId).Select(w => new WorkoutsViewModel
    {
        Tag = w.Tags.FirstOrDefault(),
        Name = w.Name,
        MaxEffort = w.MaxEffort,
        Id = w.Id,
        Description = w.Description,
        Compare = w.Compare,
        Category = w.Category
    }).FirstOrDefault());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:14:12.740

在 C# 中，您需要使用`Json()`正确序列化对象。尝试这个：

```
public ActionResult GetSavedWorkoutTemplate(int WorkoutId)
{
    var workout = _db.Workouts.Where(w => w.Id == WorkoutId).Select(w => new WorkoutsViewModel
    {
        Tag = w.Tags.FirstOrDefault(),
        Name = w.Name,
        MaxEffort = w.MaxEffort,
        Id = w.Id,
        Description = w.Description,
        Compare = w.Compare,
        Category = w.Category
    }).FirstOrDefault());
    return Json(workout);
} 
```

# excel - 每次迭代更改 Excel 输入表（matlab）

> ID：13233851
> 
> 赞同：0
> 
> 时间：2012-11-05T14:11:32.453
> 
> 标签：excel, matlab, matrix

我有一个每次都会更改 Excel 工作表的输入。我可以执行以下操作，而不是手动更改输入：

```
n=3
for i=1
Data = xlsread('TestInput1.xlsx','B2:B9',"i");
Data
end 
```

由于 xlsread 中的最后一个值是一个字符串，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:25:14.417

您需要将数字转换`i`为字符串。最简单的选择是`num2str`. 如果您需要更多地控制输出格式，通常可以使用`sprintf`. 例如

```
n=3
for i=1:n
    Data = xlsread('TestInput1.xlsx',num2str(i),'B2:B9');
    Data
end 
```

# ios - 为什么我可以将消息发送到已释放的 NSArray 实例？

> ID：13233853
> 
> 赞同：2
> 
> 时间：2012-11-05T14:11:34.917
> 
> 标签：ios, memory-management, nsmutablearray, nsarray

我刚刚注意到一个令人惊讶的行为`NSArray`，这就是我发布这个问题的原因。

我刚刚添加了一个方法，例如：

```
- (IBAction) crashOrNot
{
   NSArray *array = [[NSArray alloc] init];
   array = [[NSArray alloc] init];
   [array release];
   [array release];
} 
```

理论上这段代码会崩溃。但就我而言，它从未崩溃！

我更改了`NSArray`with`NSMutableArray`但这次应用程序崩溃了。为什么会发生这种情况，为什么`NSArray`不崩溃和`NSMutableArray`崩溃？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T14:15:09.760

一般来说，当你释放一个对象时，内存不会被清零，它可以被任何需要它的人免费回收。因此，如果您保留一个指向已释放对象的指针，您通常仍然可以使用该对象一段时间（就像您处理第二`-release`条消息一样）。示例代码：

```
#import <Foundation/Foundation.h>

@interface Foo : NSObject
@property(assign) NSUInteger canary;
@end

@implementation Foo
@synthesize canary;
@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        Foo *foo = [[Foo alloc] init];
        [foo setCanary:42];
        [foo release];
        NSLog(@"%li", [foo canary]); // 42, no problem
    }
    return 0;
} 
```

默认情况下没有对此进行检查，行为只是未定义的。如果您设置`NSZombieEnabled`环境值，消息传递代码将开始检查已释放的对象，并且应该在您的情况下抛出异常，正如您可能预期的那样：

```
*** -[Foo canary]: message sent to deallocated instance 0x100108250 
```

顺便说一句，默认的、未经检查的情况是内存错误很难调试的原因之一，因为行为可能是高度不确定的（它取决于内存使用模式）。您可能会在代码中到处出现奇怪的错误，而该错误是其他地方的过度释放对象。继续前面的例子：

```
Foo *foo = [[Foo alloc] init];
[foo setCanary:42];
[foo release];
Foo *bar = [[Foo alloc] init];
[bar setCanary:11];
NSLog(@"%li", [foo canary]); // 11, magic! (Not guaranteed.) 
```

至于为什么`NSArray`不同于`NSMutableArray`，空数组看起来确实像一只特殊的野兽：

```
NSArray *foo = [[NSArray alloc] init];
NSArray *bar = [[NSArray alloc] init];
NSLog(@"%i", foo == bar); // yes, they point to the same object 
```

所以这可能与它有关。但在一般情况下，使用解除分配的对象可能会做任何事情。它可能会奏效，也可能不会，它可能会洒出你的咖啡或引发一场核战争。不要这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:14:44.970

我能想到的最简单的事情是，空`NSArray`是 Foundation 框架中的某种“常量”——例如，一个类似于`NSString`文字的对象，它的`retainCount`（如果你要调用它的话）为 -1，它可以永远不会被`-dealloc`'d。

# java - Java跨Web应用程序通信设计？

> ID：13233855
> 
> 赞同：1
> 
> 时间：2012-11-05T14:11:45.527
> 
> 标签：java

我们正在设计两个不同的系统，可以通过以下典型示例进行模拟。

Web App #1 - 课程目录（允许更新/填充课程目录）

*   教授
*   课程（courseCode、professorId、先决条件列表、使用的年级）
*   先决条件（要求课程代码和最低成绩）
*   GradeScale（即AF，1-100，通过/失败）

Web App #2 - 学生目录（处理学生注册新课程、查看成绩单等）

*   学生
*   成绩单（他们上过哪些课程以及最终成绩）

需要在两个系统之间传递的数据（将有更多的调用和需要来回传递的东西，但这给出了它是问题和答案的双向流动的想法）：

1.  学生是否有参加特定课程所需的先决条件？
2.  从课程目录中提取详细信息以创建完整的成绩单

从阅读来看，我们的选择似乎是：

1.  为底层数据模型创建 EJB，然后让 Web 应用程序使用 EJB 接口。
2.  在两个应用程序之间使用 REST 或 Web 服务接口。
3.  RMI 或其他 Java 远程处理？

您会以哪种方式将其分解为 JAR/WAR/EAR？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:07:47.480

这最初是一条评论，但实际上太长了。

如果您只有简单的命令式服务（设置这个，做那个，这有效吗？），那么您可以选择基于 AXIS2/SOAP 的 Web 服务解决方案。（您可能不需要 SpringWS 的全部内容）。如果应用逻辑不太扭曲，我会遵循 KISS 原则。

我不知道您的系统场景，但是如果您使用的是完整的 RDBMS，那么数据库很可能会驻留在自己的机器上，因此有不同的池连接到它，这并不是什么负担。（如果您在每个 AS 上使用本地数据库，那么您稍后可能会遇到一些可伸缩性问题）。

在现代 Java EE 应用程序服务器中，您实际上可以使用来自另一台服务器的连接池（通过 jnp:// url），这只是 JNDI 查找的问题。

如果 db 引擎支持它，oracle 类似的 db 链接也是在应用程序之间共享数据库的好方法。

您可以通过在一个简单的 Java 项目中拥有一个业务/数据层来节省代码时间，该项目包含所有 ORM 内容，在 2 个 Web 动态项目之间共享，因此业务逻辑的最终更改将反映在两个应用程序上。

您也可以尝试混合方式（简单的命令式 Web 服务和数据库共享），这实际上取决于两个应用程序之间交换的消息。你可以提供一层web服务API（基于SOAP或jsonp），但要考虑到web服务本身的执行时间（有耗时的ws就不太好了）。

Web 服务和 EJB 很好，可能可以满足您的需求，真正的问题是：您真的需要它们吗？最近我看到很多项目都是从完整的 REST 开始的，在很多情况下，这就像用火箭筒杀死苍蝇一样。

如果要求很简单，那就保持简单。

# ios - 捏缩放和 setFrame 导致 UIWebView 中的绘图问题

> ID：13233856
> 
> 赞同：1
> 
> 时间：2012-11-05T14:11:54.033
> 
> 标签：ios, uiwebview, frame, pinch

我有一个 UIWebView，我将一个本地文件加载到其中。

1.  加载文档时
2.  我做了一个捏捏的手势
3.  之后我为 UIWebView 设置了更大的宽度。

**结果：** 这会导致 UIWebView 右侧出现黑色粗体条纹。

你知道如何解决这个问题吗？

提前感谢您的帮助！

以下是一些示例代码：

```
@interface ViewController () {
    __weak IBOutlet UIWebView *webView;
    CGRect initialFrame;
}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    initialFrame = webView.frame;
    webView.scalesPageToFit = YES;
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"chapter7" ofType:@"ppt"]]]];
}

static int c = 1;
- (IBAction)buttonPressed:(id)sender {
    c++;
    if (c % 2 == 0)
    {
        //full screen
        CGRect frame = initialFrame;
        frame.origin.x -= 100;
        frame.size.width += 100;
        [webView setFrame:frame];
    }
    else
    {
        //initial
        [webView setFrame:initialFrame];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T13:57:56.527

UIWebView 必须在其帧大小更改时重新加载，以便它也可以在增加的空间中呈现。

# android - 键盘显示混乱的元素位置

> ID：13233857
> 
> 赞同：9
> 
> 时间：2012-11-05T14:12:02.883
> 
> 标签：android, css, android-layout, cordova, keyboard

我有需要输入手机触摸键盘的游戏。它的显示有问题，每当键盘出现在文本输入焦点上时，我所有的 position: absolute 元素都会搞砸。

是否有一个插件可以使移动键盘始终显示，以便我重新定位所有元素，或者我需要更改 css 以制作元素，以便在键盘出现时不会弄乱？

我应该如何实现这个？

这是元素 css 之一：

```
#mixer{  
    position: absolute;  
    bottom:29%;
    left:25%;
    width: 234px;  
    height: 210px;  
    background: transparent url(img/mixer.png) 0 50px no-repeat;  
} 
```

![在此处输入图像描述](../Images/ca200c2ec68d862a5137bbb9a1ae9fcc.png)

注意：我在 Android 环境中使用的是 Jquery mobile，phonegap。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T14:16:59.277

在您的 AndroidManifest.xml 中，使用键盘在 Activity 下添加以下行：

`android:windowSoftInputMode="adjustNothing"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T05:33:05.130

我认为您的问题在于您的底部属性设置为“在这种情况下”为 29%。您可能希望使用 TOP 而不是底部将其设置为绝对值。

这样它将从顶部推动而不是从底部看，在这种情况下是键盘。

所以你希望它位于底部的 29%，100 - 29 = 71 移除底部 29% 并将其更改为顶部 71%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T07:04:55.557

收听显示/隐藏软键盘事件。SO上的这个答案有一个代码示例：

[Android中的软键盘事件监听器](https://stackoverflow.com/questions/13163743/softkeyboard-event-listener-in-android)

当软键盘处于显示状态时，为您的游戏使用单独的“键盘显示”CSS。当软键盘被隐藏时，恢复到以前的“键盘关闭”CSS。

之前关于 SO 的 Q&A 处理了类似的情况：

[Android 2.3.6 和 iPhone 5.0 中软键盘的 phonegap 应用程序布局问题](https://stackoverflow.com/questions/12251105/phonegap-application-layout-issue-with-soft-keyboard-in-android-2-3-6-and-in-iph)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T03:16:12.253

我在 iPad 应用程序而不是 android 上遇到了这个问题，但它看起来像同样的问题。

当大小发生变化时，jQuery mobile 使用 javascript 设置页面高度 - 与页面底部对齐的任何内容在 html 中向上移动，同时操作系统向上滚动整个视图以保持输入的先前位置可见。

我用一些 css 解决了这个问题，这些 css 使浏览器忽略了高度设置。它还使方向变化更加平滑。

```
.ui-mobile, .ui-mobile .ui-page {
    min-height: 100% !important;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T15:19:55.430

查看这些链接-

[http://android-developers.blogspot.in/2009/04/updating-applications-for-on-screen.html](http://android-developers.blogspot.in/2009/04/updating-applications-for-on-screen.html)

[http://developer.android.com/reference/android/R.attr.html#windowSoftInputMode](http://developer.android.com/reference/android/R.attr.html#windowSoftInputMode)

尝试将 manifest android:windowSoftInputMode="adjustResize" 参数添加到您的活动标签中。

希望能帮助到你。

# c++ - 存储参数化类的所有有效实例是否可以？

> ID：13233863
> 
> 赞同：0
> 
> 时间：2012-11-05T14:12:34.353
> 
> 标签：c++, templates

我有一个用数字参数化的类，但实际上只有一些值是有效参数。为了对用户隐藏实现并防止无效实例化，我这样做了：

```
// foo.hpp
class IClass
{
  virtual void doStuff() = 0;
};

IClass& getHiddenClass(const bool& randomCondition);

// foo.cpp
template <unsigned x>
class HiddenClass : public IClass
{
public:
  void doStuff()
  {
    /* some code using x */
  }
};

IClass& getHiddenClass(const bool& randomCondition)
{
  static HiddenClass<42> ifRandomCondition;
  static HiddenClass<9000> ifNotRandomCondition;

  if (randomCondition)
    return ifRandomCondition;
  else
    return ifNotRandomCondition;
} 
```

可以吗，有更好的解决方法吗？这个例子是简化和抽象的，但我也不需要存储大量的有效实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:15:08.450

用于`static_assert`防止无效实例化，在 C++11 中可用。

我不明白你的“隐藏课程”的目的。接口就是为了做到这一点——对用户隐藏实现，只让他们拥有一组可以使用的预定义操作。在单独的头文件中声明您的接口并与用户共享。从接口继承您的具体类（在另一个非共享头文件中）并在 cpp 文件中实现它（同样，非共享）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:18:33.667

就其而言，这是合法的。您也可以尝试通过枚举来参数化类，然后在类中使用它。这可能比您发布的内容更具可读性，具体取决于您的具体情况。

# java - 在拍照和返回的过程中保持一个静态变量

> ID：13233865
> 
> 赞同：0
> 
> 时间：2012-11-05T14:12:46.750
> 
> 标签：java, android, camera

在我的创建功能上，我为该位置提供了一个 ID。但是我的问题是当我在保存之前将照片添加到该页面时。我需要使用与页面相同的 ID 保存照片。因此，我在创建时创建了 ID，然后当我添加图片并在加载其他意图时返回，它再次运行代码并创建一个新 ID。如何通过照片传递身份证并返回。

变量 checkStationObjectID 设置在文件的顶部。

这是我的创建：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add_asset);

        Bundle extras = getIntent().getExtras(); 
        Log.e("CamDebug", "Loading extras");
        if (extras != null) {   
            PreviousStationObjectID = extras.getString("StationObjectID");  
            editMode = extras.getBoolean("editMode");
            editAreaObjectID = extras.getString("editAreaObjectID");

        } 

        if(editMode){
            checkStationObjectID = editAreaObjectID;
             Log.e("CHECK ID - Edit mode", checkStationObjectID);

         } else {

            if(checkStationObjectID == null){
                checkStationObjectID = NewAssetStationObjectID;
                Log.e("CHECK ID = NEW ID", checkStationObjectID);
            } 

        }

       //Other items taken out

    } 
```

我启动相机：

```
public void startCamera() 
{
    File photo = null;
    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    timestamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());

    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)) 
               {
                   photo = new File(Global.Pictures + timestamp +".png");

               } 
    else 
               {
                   photo = new File(getCacheDir(), FOLDER_NAME+File.separator+timestamp+".png");
               }    
    if (photo != null) 
               {
                   intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                   selectedImageUri = Uri.fromFile(photo);
                   startActivityForResult(intent, CAPTURE_IMAGE_CALLBACK);
               }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:46:26.460

`onCreate`每当您的应用程序启动时都会调用。如果您正在调用另一个应用程序（例如相机），那么操作系统可以`Activity`在相机`Activity`运行时随时杀死您自己的应用程序。这可能是为了恢复正在运行的应用程序所需的内存或资源。然后，当您退出相机时，操作系统将重新启动您的`Activity`，这将`onCreate`再次调用。

我建议您`SharedPreferences`在启动相机应用程序之前将生成的 ID 保存到其中。然后在 中检查保存的 ID `onActivityResult`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:37:27.963

如果您不需要持久化它，您可以创建一个 Singleton 对象作为会话并将变量存储在其中。但我不明白为什么再次执行 onCreate .. 我认为子相机活动应该返回活动结果？如果我误解了，请原谅我。

或者，您可以将 var 传递给相机活动，并在完成后将其传回。

# sql-server - 将xml数据批量导入sql server

> ID：13233868
> 
> 赞同：2
> 
> 时间：2012-11-05T14:13:02.670
> 
> 标签：sql-server, xml, sql-server-2012, bulk-import

我有一组 xml 文件，我想解析数据并将其导入 sql server 2012 数据库。提供的 xml 文件将根据模式进行验证。

我正在寻找这样做的最佳方法是什么。我发现了这个：http: [//msdn.microsoft.com/en-us/library/ms171878.aspx](http://msdn.microsoft.com/en-us/library/ms171878.aspx)

我想知道这是最好的方法还是还有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T06:55:47.103

你有几个选择：

1.  SSIS XML 源。这不会*针对*架构进行验证。如果要检测并正确处理无效 XML 文件，请创建脚本任务以验证 C# 中的架构。

2.  在存储过程中解析 XML。

    *   将整个 XML 文件插入一列。根据您的架构验证要求，您可以使用无类型或有类型的 XML 列。（或两者）
    *   使用 XPath 函数解析 XML。这实际上非常快。

```
    插入到 SomeTable（列 1、列 2、列 3）
    选择
        YourXmlColumn.value('(/root/col1)[1]','int'),
        YourXmlColumn.value('(/root/col2)[1]','nvarchar(10)'),
        YourXmlColumn.value('(/root/col3)[1]','nvarchar(2000)'),
        YourXmlColumn.value('(/root/col4)[1]','datetime2(0)')
    来自 YourXmlTable

```

# git - 从 gerrit 获取主题分支

> ID：13233871
> 
> 赞同：3
> 
> 时间：2012-11-05T14:13:11.000
> 
> 标签：git, branch, gerrit, repository

一位开发人员将补丁包推送到主题“test_topic”下的 gerrit。例如 ：）

我想在我的开发分支上获得所有这些补丁。有没有简单的方法可以做到这一点？现在，我正在使用一些魔法，包括`gerrit query`, `grep`, `sort`,`awk`然后`git rebase -i`。

但是，我感觉，有简单的方法。可能，使用`repo`命令。然而，我找不到这种方式，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T04:39:32.713

您应该能够使用“git pull”命令一次下拉所有更改，您可以从 Gerrit 的 Web 界面复制粘贴到最顶部的更改。如果您有本地提交并且不希望 git 创建合并，请查看`--rebase`您可以传递给 git pull 的参数。

# zend-framework - 不使用 Zend 工具的 Zend 框架

> ID：13233873
> 
> 赞同：0
> 
> 时间：2012-11-05T14:13:26.693
> 
> 标签：zend-framework, zend-tool

我在问之前已经搜索过了，我刚刚找到[了这篇文章](https://stackoverflow.com/questions/8950867/zend-framework-without-the-zend-tool)。看来我没有做正确的事情，所以我在这里再次发布。

如果我不使用 Zend 工具来创建控制器及其操作，我应该手动编辑文件 .zfproject.xml 吗？

我可以同时使用这两种技术吗？我的意思是一些使用 Zend Tool 创建的控制器（我创建的第一个），还有一些没有？那么 .zfproject.xml 会有问题吗？

我认为我所有的混乱都来自 .zfproject.xml 文件！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:16:03.043

如果您手动添加控制器和所有内容，则无需更新 zfproject.xml 文件。
当你想混合和匹配它可能会在冲突的情况下导致问题，你应该意识到这一点。但一般来说，应该问题不大。

# ruby - Ruby 反向柯里化：这可能吗？

> ID：13233875
> 
> 赞同：5
> 
> 时间：2012-11-05T14:13:32.203
> 
> 标签：ruby, functional-programming, currying

关于 Ruby 1.9.x 中的柯里化，我在某些地方一直在使用它，并且可以翻译为基本上支持 proc 参数的默认参数：

```
p = proc {|x, y, z|x + y + z}
p.curry[1] #=> returns a lambda
p.curry[1, 2] #=> returns a lambda
p.curry[1, 2, 3] #=> 6
p2 = p.curry[1, 2]
p2.(2) #=> 5
p2.(4) #=> 7 
```

很方便，对吧？问题是，我希望能够反向 curry，这意味着，用随机值填充我的 proc 的最后一个参数。像这样：

```
p = proc{|x, y| x - y }.curry[1]
p.(4) 
```

我想要的结果是 3。这将返回 -3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:33:59.160

我认为没有直接的方法可以做到这一点，而且您正在做的事情有点狡猾，对于您的问题，可能有比反套路更好的解决方案

你可以做些什么来达到预期的结果是在你的 procs 周围包裹更多的 procs：

```
p = proc{|x, y| x - y}
q = proc{|y, x| p[x, y]}
q.curry[1].(4) 
```

事实上，你可以以任何你想要的方式重新排序参数，但相信我它**很快**就会变得混乱

# html - 悬停在 物品 也改变文本颜色...... CSS技巧？

> ID：13233878
> 
> 赞同：15
> 
> 时间：2012-11-05T14:13:43.433
> 
> 标签：html, css, html-lists

我有一些菜单栏，目前，将鼠标悬停在

```
 <li>content</li> 
```

当它悬停在上面时，文本会从黑色变为白色。

我需要这样做，以便在整个`<li>content</li>`悬停时文本颜色会发生变化，而不仅仅是在突出显示文本时。

**这是CSS**

```
 <style type="text/css">
    body{margin:0px; font-family:Tahoma, Sans-Serif; font-size:13px;}
    /* dock */
    #dock{margin:0px; padding:0px; list-style:none; position:fixed; top:0px; height:100%; 
          z-index:100; background-color:; left:0px;}
    #dock > li {width:40px; height:120px; margin: 0 0 1px 0; background-color:#;
                 background-repeat:no-repeat; background-position:left center;}

    #dock #Menu {background-image:url(Menu.png);}

    #dock > li:hover {background-position:-40px 0px;}

    /* panels */
    #dock ul li {padding:5px; border: solid 0px #879b17;}
    #dock ul li:hover {padding:5px;
background:#879b17 url(item_bkg.png) repeat-x;
border: solid 0x #879b17;
font-weight: bold;
color: #000;
 }
    #dock ul li.header, #dock ul li .header:hover {
background:#fff url(header_bkg.png) repeat-x;
border:solid 10px #879b17;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
color: #FFF;
font-weight: bold;
text-align: center;
 }

    #dock > li:hover ul {
display:block;
color: #FFF;
 }
    #dock > li ul {position:absolute; top:0px; left:-180px;  z-index:-1;width:180px; display:none;
                   background-color:#fff; border:solid 10px #000; border-top-left-radius: 20px; border-top-right-radius: 20px; padding:0px; margin:0px; list-style:none;}
    #dock > li ul.docked { display:block;z-index:-2;}

    .dock,.undock{}
   .undock {display:none; }
    #content {margin: 10px 0 0 60px; }

     body,td,th {
color: #333;
 }
 a:link {
color: #000;
text-decoration: none;
 }
 a:visited {
text-decoration: none;
color: #000;
 }
 a:hover {
text-decoration: underline;
color: #FFF;
 }
 a:active {
text-decoration: none;
color: #FFF;
text-align: center;
 }
     #dock #Menu .free .header .dock {
color: #FFF;
font-weight: bold;
 }
     #dock #Menu .free .header .undock {
color: #FFFFFF;
 }
</style> 
```

**这是HTML**

```
 <li id="Menu">
             <ul class="free">
               <li class="header"><a href="#" class="dock">DOCK</a><a href="#"      class="undock">UN-DOCK</a></li>
                 <li> </li>
               <li class="header">CAMPAIGNS</li>
                 <li><a href="#">Link Data</a></li>
                 <li><a href="#">Search</a></li>                
                 <li><a href="#">Summary Sheet</a></li>                                
               <li><a href="#">Add New Client</a></li>
               <li class="header">LINKS</li>
                 <li><a href="#">Record Transactions</a></li>
               <li class="header">REPORTS</li>
                 <li><a href="#">Handover Sheets</a></li>
                 <li><a href="#">Handover Summary</a></li>
               <li class="header" >MAINTENANCE</li>
                 <li><a href="#">Logout</a></li>
                 <li><a href="#">Manage Users</a></li>                
           </ul>
         </li> 
```

如果您能提供帮助，请提前致谢

问候

亨利

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-05T14:23:34.383

我建议让悬停在“A”元素而不是 LI 元素上工作。

为了使 LI 元素可点击，您需要将其中的“A”元素设置为 display:block（或 inline-block），因为“A”标签默认为 display:inline。

所以...

```
<ul>
 <li><a href="#">My Link</a></li>
</ul>

ul li a {
 display:block;
}

ul li a:hover, ul li a:focus {
 color:red;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-09T15:44:26.163

我发现如果你对“a”而不是“li”使用填充，它会很好地工作。通过屏蔽填充，您可以将鼠标悬停在 div 内的填充区域上，并且内部的“a”链接（已填充）将悬停在它们自己的颜色上。

```
ul li a{
color:#ead6b7;
display:block;
text-decoration:none;
padding:16px;
}

ul{
list-style-type:none;
}

li{
display:inline-block;
}

ul li a:hover{
color:#332419;
display:block;
text-decoration:none;
}

li:hover{
background-color:#ead6b7;
} 
```

# ns2 - 修改NS2中mac802.11.h中的CW值

> ID：13233879
> 
> 赞同：0
> 
> 时间：2012-11-05T14:13:48.147
> 
> 标签：ns2, contention, wifi

我正在尝试修改 mac-802.11.h 文件中的 cw_ 值，但没有成功。

通常是这样完成的，`cw_=(cw_<<1)+1`.

这是我试过的，`cw_=(cw_ * 1.8)+1`.

以上对于模拟后的平均吞吐量和平均丢弃的数据包的结果没有变化。

我错过了什么吗？还是只能以二进制方式修改CW值。

我在 500x500 的环境中使用 10 个节点。TCL 中使用了一个 TCP 代理和 FTP 应用程序。节点随机移动，而 TCP 代理和接收器在模拟中连接到它们各自的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:45:21.900

cw 不能超过预定义的大小，如果发生这种情况，它会被向下舍入。也许在您的情况下，这两种计算都会发生这种情况。

您还应该知道它`cw_`是 uint32 类型，因此将其乘以 1.8（双精度）可能会得到您不期望的结果。

# ffmpeg - 为 iOS6.0 ARMv7 处理器构建 Ffmpeg 库成功但编译错误

> ID：13233880
> 
> 赞同：0
> 
> 时间：2012-11-05T14:13:48.413
> 
> 标签：ffmpeg, ios6

我正在尝试在 XCode 4.5.1 项目中使用 FFMPEG 库。我正在尝试为 ARMv7 构建它。

我已经使用以下方法构建了库（由 Alex 提供）：

* * *

这是我在 iOS 6 上用于交叉编译 FFmpeg 的工作配置，拱门是 ARMv7

注意：您必须在 /usr/local/bin/ 中有 gas-preprocessor.pl 请不要继续，直到您的 bin 目录中有 gas-preprocessor.pl

从这里下载 FFmpeg 1.0 “天使”

解压缩并将其放在某个位置，即您的桌面文件夹

打开终端并浏览到解压缩的 FFmpeg 文件夹

复制并粘贴以下命令，（请耐心等待）

```
./configure --disable-doc --disable-ffmpeg --disable-ffplay --disable-ffserver --enable-cross-compile --arch=arm --target-os=darwin --cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --as='gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc' --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk --cpu=cortex-a8 --extra-cflags='-arch armv7' --extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk' --enable-pic --enable-decoder=rawvideo --disable-asm 
```

现在在终端上输入以下命令`make`（再等一下）

一旦完成，现在在终端上输入`sudo make install`（再次等待）

去`/usr/local/lib`寻找你刚出炉的 armv7 库

享受！

亚历克斯

* * *

但是当我将库放入`iFrameExtractor`然后编译它时，我得到一个错误

> /ffmpeg/libavcodec/4xm.d:1：“xm”附近的语法错误

我的编译环境是

xcode 4.5.1 和 ffmpeg 1.0

平台：Mac OS X 10.7.5

谁能帮我 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:17:56.720

您在日志中的何处看到此消息？

```
ffmpeg/libavcodec/4xm.d:1: syntax error near "xm" 
```

在此之前和之后有哪些消息？

这是全部信息吗？

如果您不介意使用 1.0 之前的 FFmpeg 版本，其实差别不大，那么您可以使用我们的 FFmpeg 框架：[https ://github.com/mooncatventures-group/iFrameExtractor](https://github.com/mooncatventures-group/iFrameExtractor)

如果您仍想构建 1.0，请告诉我们更多错误信息。您发布的错误消息没有提供足够的详细信息来采取行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:18:18.143

为此，您正在使用 Gcc 编译器。当您为 iPhoneSimulator 构建库时，最好使用 Gcc 编译器。但是现在您正在尝试为 iPhoneOS 构建库，因此这意味着您的硬件平台将会改变（armv6 或 armv7 或 armv7s）。为此，您需要将苹果的 gcc 交叉编译器用于 armv 处理器。

例如：arm-apple-darwin10-llvm-gcc-4.2 或尝试一次：llvm-gcc。

我希望这可以帮助某人。

# android - 替代选项卡视图来处理多个活动

> ID：13233884
> 
> 赞同：0
> 
> 时间：2012-11-05T14:13:59.300
> 
> 标签：android, tabs

我正在开发一个应用程序。我们已经在选项卡视图中实现了该功能。但我不想实现标签小部件。是否有任何其他实现选项卡的方式类似于选项卡，但不应该是选项卡小部件。

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:50:45.843

您可以使用 ViewPager 视图。

[http://android-developers.blogspot.be/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.be/2011/08/horizontal-view-swiping-with-viewpager.html)

它的行为类似于选项卡，但顶部没有标题。

# asp.net - 使用 PageDown Editor (Formely WMD) 但我如何获得 HTML 中的值？

> ID：13233885
> 
> 赞同：2
> 
> 时间：2012-11-05T14:14:03.310
> 
> 标签：asp.net, pagedown

我正在使用 PageDown 编辑器，并且在我的 asp.net 页面中有以下标记：

```
<script type="text/javascript" src="js/Markdown.Converter.js"></script>
        <script type="text/javascript" src="js/Markdown.Sanitizer.js"></script>
        <script type="text/javascript" src="js/Markdown.Editor.js"></script>
    </HEAD>
    <body>
        <form id="myForm" runat="server">
            <div class="wmd-panel">
                <div id="wmd-button-bar"></div>
                <textarea id="wmd_input" class="wmd-input" runat="server"></textarea>
                <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
            </div>
            <script type="text/javascript">
            (function () {
                var converter1 = Markdown.getSanitizingConverter();
                var editor1 = new Markdown.Editor(converter1);
                editor1.run();
            })();
            </script>
            <asp:button id="Button1" runat="server" Text="Set"></asp:button><asp:button id="Button2" runat="server" Text="Get"></asp:button><asp:label id="Label1" runat="server">Label</asp:label></form>
    </body>
</HTML> 
```

结果如下：

![在此处输入图像描述](../Images/77424016cbc8689896249bfdf6f9efd1.png)

所以我有一个服务器端事件，它只是获取存储的值并将其分配给一个标签，这样我就可以看到我得到了什么：

`Me.Label1.Text = Me.wmd_input.Value`

因此，如果我`**test**`的文本区域框中有类似的内容（以粗体显示），我希望能够单击“获取”按钮并返回具有此效果的内容`<b>test</b>`，而不是`**test**`. 现在我要回来了`**test**`，有什么办法可以`<b>test</b>`取而代之的是 HTML 标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:56:27.537

`.makeHtml("markdown text")`在客户端使用

对于您的情况

```
 converter1.makeHtml("*Hello World*") 
```

[要在服务器端获取 Html 值，请使用MarkDown Sharp](http://code.google.com/p/markdownsharp/)等降价的服务器端实现，或者您可以使用隐藏的输入字段。

```
 <script type="text/javascript" src="js/Markdown.Converter.js"></script>
    <script type="text/javascript" src="js/Markdown.Sanitizer.js"></script>
    <script type="text/javascript" src="js/Markdown.Editor.js"></script>
</HEAD>
<body>
    <form id="myForm" runat="server">
        <div class="wmd-panel">
            <div id="wmd-button-bar"></div>
            <textarea id="wmd_input" class="wmd-input" runat="server"></textarea>
            <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
        </div>
        <script type="text/javascript">
        (function () {
            var converter1 = Markdown.getSanitizingConverter();
            var editor1 = new Markdown.Editor(converter1);
            editor1.run();
        })();
        function SetHidden(){
            var hidden = document.getElementById('<%= HiddenMarkdow.ClientID %>');
            var textArea = document.getElementById('<%= wmd_input.ClientID %>');
            var converter1 = Markdown.getSanitizingConverter();
            hidden.value = converter1.makeHtml(textArea.value);
            return true;
        }

        </script>
        <asp:HiddenField id="HiddenMarkdown" runat="server"/>
        <asp:button id="Button1" runat="server" Text="Set"></asp:button><asp:button id="Button2" runat="server" Text="Get" OnClick="SetHidden()"></asp:button><asp:label id="Label1" runat="server">Label</asp:label></form>
</body> 
```

# python - 提取标签内的信息

> ID：13233890
> 
> 赞同：-1
> 
> 时间：2012-11-05T14:14:14.427
> 
> 标签：python, beautifulsoup

我正在尝试学习 BeautifulSoup，但这需要一些时间。我希望你能帮我解决这个问题。在下面的代码中，相同的语法重复了几次，我想知道如何创建一个列表：第一项，第二项，....N：第一项逻辑应该是找到“title =”（这是唯一的）然后提取“title =”右侧的字符串。如果你知道怎么做，可能很容易......

```
<td align=left valign="top" class="small" title="First item" nowrap>
<td align=left valign="top" class="small" title="Second item" nowrap>
<td align=left valign="top" class="small" title="N:th item" nowrap> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:41:08.257

```
from BeautifulSoup import BeautifulSoup
import urllib

url = 'http://www.somewebsite.com/'
file_pointer = urllib.urlopen(url)
soup = BeautifulSoup(file_pointer)

td_list = soup.findAll('td',{'class':'small')
for td in td_list:
    print td.contents[0] 
```

这应该可以，但是在不知道站点的其他内容的情况下，很难说。此外，这假设`td`标签中有文本内容。如果您需要其他代码，比如访问`<span>`或不访问什么，则需要其他代码，但这应该有助于您开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:40:39.570

如果您已经知道如何查找包含标题的元素，则可以使用`elem['title']`.

获取标题作为列表：

```
titlelist=[elem['title'] for elem in soup.findAll('td', attrs={X : Y})] 
```

编辑：正如您所说，您可以通过 using 找到包含所需标题的元素`soup.findAll('td', attrs={X : Y})`，此代码基本上是一个 for 循环，它遍历由生成的元素列表`soup.findAll('td', attrs={X : Y})`并获取 title 属性的值。与以下相同：

```
elements = `soup.findAll('td', attrs={X : Y})`
titlelist=[]
for elem in elements:
    titlelist.append(elem['title']) 
```

如果您只想查找具有该属性的元素`title`，请使用`has_key()`：

```
 elements = `soup.findAll('td')`
    titlelist=[]
    for elem in elements:
        if elem.has_key('title'):
            titlelist.append(elem['title'])
    print titlelist 
```

# powershell - PowerShell 脚本参数未正确解析

> ID：13233891
> 
> 赞同：1
> 
> 时间：2012-11-05T14:14:15.283
> 
> 标签：powershell, parameters

我有一个不起作用的简单脚本：

```
Param([string] $Input, [string] $Output)
Write-Host $Input
Write-Host $Output 
```

`$Input`参数不被打印：

```
PS> .\Get-Parameters.ps1 "First" "Second"

Second 
```

如果我重命名`$Input`为`$Joe`脚本工作正常。`$Input`不是保留名称。

到底是怎么回事？我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:17:16.063

PowerShell`$input`是一个自动变量：

基本上`$input`在一个提供对实际管道的访问的枚举器中。

阅读有关[`$input`](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:21:38.493

枚举器中的 $input 提供对您拥有的管道的访问。

此处参考： [$Input 陷阱](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)

# r - 将 dev.new() 与 postscript() 一起使用

> ID：13233898
> 
> 赞同：0
> 
> 时间：2012-11-05T14:14:51.390
> 
> 标签：r, graphics, graph, plot, postscript

如何修复以下代码？

```
postscript("test.eps")
    dev.new(width=5,height=2)
    plot(1:10)
dev.off() 
```

显然我想将这个小高度图导出到`eps`文件中。现在`.eps`将导出一个完全空白的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:40:50.090

只需放弃无关的调用`plot.new()`，它应该可以正常工作：

```
postscript("test.eps", width = 5, height = 2)
    plot(1:10)
dev.off() 
```

# mysql - MySQL / PostGIS 数据库文件类型

> ID：13233899
> 
> 赞同：0
> 
> 时间：2012-11-05T14:14:52.883
> 
> 标签：mysql, postgis

我正在尝试恢复在 PostGIS 中创建并在此处托管的数据库（在资源下）：

[https://github.com/cecois/dossin_art_api](https://github.com/cecois/dossin_art_api)

我可以下载文件并将其作为文本文件打开，但我不知道应该使用哪个文件类型扩展名将此文件导入 MySQL 或以有意义的方式查看它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:51:07.457

它是由[pg_dump](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)创建的 PostgreSQL 存档文件，它不一定具有任何特定的文件类型扩展名。使用[pg_restore](http://www.postgresql.org/docs/9.2/static/app-pgrestore.html)将文件恢复到 PostreSQL 数据库。如果您尚未安装 PostgreSQL 和 PostGIS，则需要安装。

首先创建一个空数据库：

```
CREATE DATABASE altartlas; 
```

然后连接到这个数据库，并在空间上启用它（需要安装 PostGIS）：

```
CREATE EXTENSION postgis; 
```

现在从系统控制台，将文件恢复到数据库：

```
pg_restore -U postgres -O -d altartlas altartlas_db 
```

* * *

实际上，以更简单的格式（CSV、Shapefile 等）向原始作者请求数据可能会更简单。

# c++ - BlackBerry 10 QML 应用程序在数据源加载时崩溃

> ID：13233910
> 
> 赞同：2
> 
> 时间：2012-11-05T14:15:14.030
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

以下代码构造函数加载了一个 Qml 文件，该文件从远程 Json 数据源加载数据，这工作得很好。当我调用 startMenu 方法时，我在 MainMenu.Qml 中使用完全相同的 Qml，但是一旦我调用 dataSource.load()，我的应用程序就会在 QDeclarativeExpression::hasError() 处崩溃，之后它就会挂起。没有发出错误消息或异常。

如果我移动 dataSource.load(); 一个按钮单击它可以工作，但是当页面加载时我无法加载我的数据。

```
#include "MyAppBB.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <bb/cascades/Button>
#include <bb/data/DataSource>
#include <wifi/wifi_service.h>

using namespace bb::cascades;

MyAppBB::MyAppBB(bb::cascades::Application *app) :
        QObject(app) {
    // create scene document from main.qml asset
    // set parent to created document to ensure it exists for the whole application lifetime
    bb::data::DataSource::registerQmlTypes();
    QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);
    this->myApp = app;

    QDeclarativePropertyMap* propertyMap = new QDeclarativePropertyMap;
    propertyMap->insert("name", QVariant(QString("Wes Barichak")));
    propertyMap->insert("phone", QVariant(QString("519-555-0199")));

    // create root object for the UI
    this->root = qml->createRootObject<AbstractPane>();

    qml->setContextProperty("propertyMap", propertyMap);
    qml->setContextProperty("root", this);

    QObject *newButton = root->findChild<QObject*>("btnLogin");
    QObject::connect(newButton, SIGNAL(clicked()), this, SLOT(loginClick()));
    // set created root object as a scene
    app->setScene(root);
}

void MyAppBB::startMenu() {
    QmlDocument *qml2 = QmlDocument::create("asset:///MainMenu.qml").parent(this);
    AbstractPane *root2 = qml2->createRootObject<AbstractPane>();

    this->myApp->setScene(root2);
} 
```

这是Qml

```
import bb.cascades 1.0
import bb.data 1.0

Page {
    Container {
        layout: StackLayout {
        }

        TextField {
            id: txtUsername
        }

        ListView {
            id: myListView

            // Associate the list view with the data model that's defined in the
            // attachedObjects list
            dataModel: dataModel
            listItemComponents: [
                ListItemComponent {
                    type: "item"

                    // Use a standard list item to display the data in the data
                    // model
                    StandardListItem {

                        title: ListItemData.identificationType
                        description: ListItemData.identificationTypeId
                    }
                }
            ]
        }
        attachedObjects: [
            GroupDataModel {
                id: dataModel

                // Sort the data in the data model by the "pubDate" field, in
                // descending order, without any automatic grouping
                sortingKeys: [
                    "ID"
                ]
                sortedAscending: false
                grouping: ItemGrouping.None
            },
            DataSource {
                id: dataSource

                source: "http://192.168.150.1/JsonMobileApiService/Service1.svc/GetIDTypes"

                type: DataSourceType.Json
                onDataLoaded: {
                    dataModel.clear();
                    dataModel.insertList(data);
                }
            }
        ]
        onCreationCompleted: {
            txtUsername.setText("boo!");
            // Statement below causes crash
            dataSource.load();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:01:53.263

里面有一个`onCreationCompleted`槽`AbstractPane`，你可以用它来调用load。

以 API 规范`XMLDataAccess`为例。我正在使用它自己从 XML 文件中加载数据，它可以工作

```
 import bb.cascades 1.0
  import bb.data 1.0
  Page {
  content: ListView {
    id: listView
    dataModel: dataModel
    ...
  }
  attachedObjects: [
    GroupDataModel {
      id: dataModel
    },
    DataSource {
      id: dataSource
      source: "contacts.xml"
      query: "/contacts/contact"
      onDataLoaded: {
        dataModel.insertList(data);
      }
    }
  ]
  onCreationCompleted: { dataSource.load(); }
} 
```

# jboss7.x - JBoss 7.1.1 启动抛出异常

> ID：13233913
> 
> 赞同：0
> 
> 时间：2012-11-05T14:15:23.453
> 
> 标签：jboss7.x

我有一个使用 jquery mobile 和 spring 3.1 开发的移动应用程序。

我正在尝试在 JBOSS 7.1.1 中运行此应用程序，它抛出以下异常......

```
[org.hdiv.listener.InitListener] (http-localhost-127.0.0.1-8080-1) HDIV's session created:5+l+MTztPhpn4MXhC5v4SJJY.undefined
19:37:17,292 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/mobee].[jsp]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet jsp threw exception: java.lang.NullPointerException
    at org.apache.jasper.compiler.TagLibraryInfoImpl.generateTLDLocation(TagLibraryInfoImpl.java:250) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:152) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:386) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:448) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1398) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Parser.parse(Parser.java:130) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:103) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:194) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:360) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:327) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:607) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:312) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:167) [spring-security-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at com.manam.mobee.channel.security.MobeeDeviceResolverFilter.doFilterInternal(MobeeDeviceResolverFilter.java:71) [classes:]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_37] 
```

但它在 tomcat 7 和 jboss5 中运行 gud，请帮助我....

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:58:16.777

由于 Jboss 7 有一个完全不同的设计，您必须修改您的项目以使其可以在其上部署。

花点时间阅读

[https://docs.jboss.org/author/display/AS7/Developer+Guide](https://docs.jboss.org/author/display/AS7/Developer+Guide)

有一部分关于从较低版本迁移项目

# javascript - 通过 JavaScript 设置哈希时阻止 window.onhashchange 执行

> ID：13233914
> 
> 赞同：7
> 
> 时间：2012-11-05T14:15:22.933
> 
> 标签：javascript, jquery, dom-events, predicate, fragment-identifier

当用户更改页面的哈希时，我使用该`window.onhashchange`函数执行代码：

```
window.onhashchange = function() { /* do something */ }; 
```

在某些函数中，我还通过 JavaScript 设置哈希：

```
window.location.hash = "#abc"; 
```

当我通过 JavaScript 设置哈希时，我想防止`onhashchange`事件触发。

到目前为止我已经尝试过：

```
var currently_setting_hash = false;

window.onhashchange = function() {
  if (currently_setting_hash)
    return;
 //...
}

currently_setting_hash = true;
window.location.hash = "#abc";
currently_setting_hash = false; 
```

这不起作用，因为事件被延迟触发，所以代码将首先设置哈希，然后设置`currently_setting_hash`为 false，然后执行`onhashchange`事件。

任何想法如何实现？或者也许有办法检测哈希是由用户设置还是通过 JavaScript 设置的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:20:07.487

您可以从事件处理程序本身重置变量：

```
var currently_setting_hash = false;

$(window).on("hashchange", function() {
    if (currently_setting_hash) {
        currently_setting_hash = false;
        return;
    }

    currently_setting_hash = false;
    //...
});

currently_setting_hash = true;
window.location.hash = "#abc"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T14:40:21.363

由于事件被延迟，事件发生的顺序可能与您预期的不同（例如，想象用户在您的代码之前或之后立即通过其他方式更改 URL）。重要的是要确保您不会因为假设事件是您的而变得不一致。因此，我有一个建议（基于您的代码和 Adam Bubela 的）：

```
var expectedHash;

window.onhashchange = function () {
    if (window.location.hash === expectedHash) {
        return;
    }
    expectedHash = window.location.hash;
    // ... do actual reaction to change here ...
}

function changeHash(hash) {
    hash = canonicalizeHashValue(hash);
    expectedHash = hash;
    window.location.hash = hash;
}

// Helper - return the version of the URL that the browser is expected to
// so that the equality test is accurate.
function canonicalizeHashValue(value) {
    // Borrowing an A element's ability to resolve/parse URLs.
    var tmp = document.createElement('a');
    tmp.href = "";
    tmp.hash = value;
    return tmp.hash;
} 
```

**仅当更改为您期望的值时，**此代码才会禁止更改处理程序。（如果哈希暂时变为另一个值，则内部的分配`onhashchange`确保处理程序也运行，我认为这比替代方案更正确。）

第三个辅助函数`canonicalizeHashValue`仅在您指定非规范值（例如，`changeHash('foo')`而不是`changeHash('#foo')`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T14:32:49.987

如果您只想使用普通的 Java 脚本：

```
 var currently_setting_hash = false;

    window.onhashchange = function() {
        if (currently_setting_hash){
            currently_setting_hash = false;
            return;
        //...
        }
        alert('outside the script');
    }
    function changeHash(hash){
        currently_setting_hash = true;
        window.location.hash = hash;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T14:38:02.750

好吧，由于事件被延迟，如果您多次更改哈希（出于任何原因），那么将连续触发更多事件。在这种情况下，您应该在每次更改散列时增加一个整数。

```
var setting_hash = 0;

window.onhashchange = function() {
    if (setting_hash){
        setting_hash--;
        return;
    }
    //code here
}
function changeHash(hash) {//hash without '#'
    if (hash!=window.location.hash.substr(1)) {
      setting_hash++;
    }
    window.location.hash = hash;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-25T17:20:50.003

现在您可以使用 History.replaceState() 方法。它在不触发“onhashchange”的情况下替换哈希。

```
window.onhashchange = function() { /* do something */ };

// ... 

history.replaceState(undefined,undefined,'#1234');  // This will replace the hash without triggering 'onhashchage'. 
```

# jquery - 我的自定义幻灯片没有连续播放

> ID：13233915
> 
> 赞同：0
> 
> 时间：2012-11-05T14:15:27.983
> 
> 标签：jquery, jquery-ui

请看看这个 [http://jsfiddle.net/CztkH/6/](http://jsfiddle.net/CztkH/6/)

我想连续运行我的幻灯片（比如我们如何播放电影）。但我不能让它连续滑动:(。请帮我QQ这是我运行幻灯片的javascript：

```
function doDoubleSlide(obj1, obj2){
    obj1.hide("slide", {direction:"left"},1000);
    obj2.show("slide", {direction:"right"},1000);
    setTimeout(function(){doDoubleSlide(obj2,obj1);}, 3000);
}
doDoubleSlide($("#sl01"), $("#sl02")); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:44:43.160

您使用 JavaScript 和 CSS 构建滑块的方式存在一些不同的问题，我认为您在此处组合的内容没有任何简单的解决方法。

*   从 CSS 的角度来看，您正在以一种有问题的方式为幻灯片制作动画 - 应该内联浮动
*   并且您应该为一个主容器设置动画，而不是为其单独容器内的元素设置动画。

我能给你的最好建议是使用不同的方法。

我看到你正在使用**jQuery UI**库来制作动画——我认为这不是你想要在这里实现的最合适的东西——这些插件更适合效果，需要更多的工作来适应和重新换肤.

有很多更适合的现有插件专门用于这样的幻灯片，并且开箱即用：

[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# c# - 如何在实体框架中包含排序的导航属性

> ID：13233924
> 
> 赞同：8
> 
> 时间：2012-11-05T14:15:54.233
> 
> 标签：c#, .net, linq, include

我有一个内部`A`集合的实体`B`。我用一个`_entity.A.Include(a => a.B)`

现在我想让 B 到 A 中按自定义 OrderBy 排序。我试过`_entity.A.Include(a => a.B.OrderBy(o => o.Version)`了，但我得到了：

> 包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。

关于如何做到这一点的任何想法？

谢谢。

版本是一个整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:29:14.347

I think in this case you can try:

```
var list = _entity.A.Include("B").ToList();
list.ForEach(m => m.B = m.B.OrderBy(o => o.Version)); 
```

or:

```
_entity.A.Include("B").Select(m => new A {
        //some props,
        B = m.B.OrderBy(o => o.Version)
        }); 
```

# mysql - 基于 MySQL 桌面的管理

> ID：13233925
> 
> 赞同：0
> 
> 时间：2012-11-05T14:15:54.647
> 
> 标签：mysql, desktop-application

我正在为一位教授制作一个基于 MySQL 的数据库，她希望将一个版本上传到网上，并将一个版本放在她的桌面上供个人使用。网络版本将是“官方的”，而她桌面上的版本将用于个人研究，并且会有其他类别等。这两个数据库不必链接，但我不确定将两个数据库放在一起是否更容易在网络上并让她的个人密码受到保护，或者如果有一个很好的基于桌面的程序。她不是很精通技术，这就是为什么我不想让她在自己的桌面上安装 MySQL 和 Apache。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:21:39.993

您可以安装 MySQL Workbench，然后设置连接以访问远程工作台，还可以拥有一个带有数据库转储的本地 mysql。两个数据库都可以使用[MySQL Workbench 工具](http://dev.mysql.com/downloads/workbench/)来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:21:41.880

您可以使用官方的 MySQL 管理工具：[MySQL Workbench](https://www.mysql.com/products/workbench/)

# python - Python：禁用相对导入

> ID：13233931
> 
> 赞同：6
> 
> 时间：2012-11-05T14:16:15.073
> 
> 标签：python, import

> **可能重复：**
> [当存在同名的本地模块时，如何在 Python 中访问标准库模块？](https://stackoverflow.com/questions/1900189/how-to-access-a-standard-library-module-in-python-when-there-is-a-local-module-w)

我正在使用 Python 2.6。

我只在我的应用程序中使用绝对导入。现在我有这个：

```
myapp 
  |
   -- myscript 
   -- json
        |
         -- anotherscript.py 
```

在我的脚本中，我有：

```
import json
import myapp.json.anotherscript 
```

由于 Python 的相对导入机制，import json 并没有按照我想要的方式导入内置库，而是将我自定义的 json 包导入到当前命名空间中。

有没有办法在 Python 中禁用相对导入，或者在这种情况下至少可以避免这种情况？否则，我将不得不将我的包重命名为其他没有 jsonutils 意义的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T14:23:19.633

```
from __future__ import absolute_import 
```

在[PEP-328中描述](http://www.python.org/dev/peps/pep-0328/)

# ruby-on-rails - shopify_app 语法错误

> ID：13233938
> 
> 赞同：1
> 
> 时间：2012-11-05T14:16:45.673
> 
> 标签：ruby-on-rails, ruby, ubuntu, shopify

**编辑：调试让我更进一步。问题得到澄清。**

我们已经安装了 Ruby、RubyGems 和 Rails，并分叉了 shopify_app 项目。我们创建了一个新的 rails 应用程序并在 Gemfile 中添加了三个项目`execjs`：`therubyracer`和`shopify_app`.

运行`rails s`以启动我们的 rails 应用程序会返回此跟踪：

```
root@ubuntu:/usr/local/pete-shopify/cart# rails s
Faraday: you may want to install system_timer for reliable timeouts
/var/lib/gems/1.8/gems/shopify_app-4.1.0/lib/shopify_app.rb:15:in `require': /var/lib    /gems/1.8/gems/shopify_app-4.1.0/lib/shopify_app/login_protection.rb:5: syntax error, unexpected ':', expecting kEND (SyntaxError)
...rce::UnauthorizedAccess, with: :close_session
                          ^
from /var/lib/gems/1.8/gems/shopify_app-4.1.0/lib/shopify_app.rb:15
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /var/lib/gems/1.8/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /usr/local/pete-shopify/cart/config/application.rb:7
from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:53
from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/commands.rb:50
from script/rails:6:in `require'
from script/rails:6 
```

自从从 Github 分叉后，我没有修改任何文件。login_protection.rb 的第 1 - 6 行如下：

```
module ShopifyApp::LoginProtection
    extend ActiveSupport::Concern

    included do
        rescue from ActiveResource::UnauthorizedAccess, with: :close_session
    end 
```

我对此进行了调查，**似乎**该错误是由 Ruby 1.8 和 1.9 之间的新型哈希语法引起的；`key : value`而不是`key => value`.

`ruby -v`从命令行运行返回`ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]`. 这似乎没问题......但我做了一些调试，并在文件内部`/var/lib/gems/1.8/gems/shopify_app-4.1.0/lib/shopify_app.rb`（在顶部）放置：

将 RUBY_VERSION 退出

它打印了`1.8.7`。**为什么`ruby -v`和`RUBY_VERSION`给我不同的结果？我是否正确假设这是我的问题的原因？

注意：要升级 Ruby，我安装了更高版本，`apt-get`然后通过使用`update-alternatives --config ruby`并选择选项 2 切换到它，如下所示：

```
root@ubuntu:/usr/local/pete-shopify/cart# update-alternatives --config ruby
There are 2 choices for the alternative ruby (providing /usr/bin/ruby).

  Selection    Path                Priority   Status
------------------------------------------------------------
  0            /usr/bin/ruby1.8     50        auto mode
  1            /usr/bin/ruby1.8     50        manual mode
* 2            /usr/bin/ruby1.9.1   10        manual mode 
```

另请注意：我们是 PHP/Python 开发人员，所以这对我们来说是全新的！

**概括：**

**1 - 我确定语法错误的原因是否正确？**

**2 - 为什么`RUBY_VERSION`和`ruby -v`给我不同的结果？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:25:24.067

可能与您的权限有关。[尝试使用rbenv](https://github.com/sstephenson/rbenv#section_2)安装 ruby​​ 1.9.3 。它会将所有内容安装在您的用户目录中，因此您不必担心任何权限问题。

# eclipse - OCaIDE 无法创建 .cmo 文件（编译模块）

> ID：13233943
> 
> 赞同：2
> 
> 时间：2012-11-05T14:17:05.410
> 
> 标签：eclipse, compilation, ocaml

我在 Eclipse Indigo 下遇到 OCaIDE 问题。我有一个新的 OCaml 托管项目和几个模块。这是它在我的工作区资源管理器中的外观：
![工作区资源管理器](../Images/49bd4bb72ab200d37d61163cdeeb918d.png)
所有这些文件都有错误（.mli 文件是自动创建的），声音（例如 file `accum.ml`）
`Error: I/O error: lab2/accum.cmo: No such file or directory`
并且目录中确实没有这样的文件。我只是无法让 OCaIDE 创建这些文件。我尝试过自动构建、手动构建、清理，我能想到的任何东西。插件配置中设置的 OCaml 路径似乎没问题，因为顶级解释器工作正常。

此外，以下是项目中的一些文件：
accum.ml：

```
let reverseInt n =
let rec reverseAccum n accum = match n with
| 0 -> accum
| n -> reverseAccum (n/10) (10*accum + (n mod 10))
in reverseAccum n 0 
```

。项目：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>lab2</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>Ocaml.ocamlbuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>ocaml.ocamlnature</nature>
    </natures>
</projectDescription> 
```

.路径：

```
.
/usr/lib/ocaml 
```

我将衷心感谢您的帮助。

编辑：也许这也很重要，我使用 Ubuntu 12.04 64 位和 OCaml 3.12.1

Edit2：这是一些编译器输出：

```
Building: lab2/simple.mli
File "lab2/simple.mli", line 1, characters 0-1:
Error: I/O error: lab2/simple.mli: No such file or directory

Building: lab2/simple.ml
File "lab2/simple.ml", line 1, characters 0-1:
Error: I/O error: lab2/simple.cmo: No such file or directory

Building: lab2/lists.mli
File "lab2/lists.mli", line 1, characters 0-1:
Error: I/O error: lab2/lists.mli: No such file or directory

Building: lab2/lists.ml
File "lab2/lists.ml", line 1, characters 0-1:
Error: I/O error: lab2/lists.cmo: No such file or directory

Building: lab2/bst.mli
File "lab2/bst.mli", line 1, characters 0-1:
Error: I/O error: lab2/bst.mli: No such file or directory

Building: lab2/bst.ml
File "lab2/bst.ml", line 1, characters 0-1:
Error: I/O error: lab2/bst.cmo: No such file or directory

Building: lab2/accum.mli
File "lab2/accum.mli", line 1, characters 0-1:
Error: I/O error: lab2/accum.mli: No such file or directory

Building: lab2/accum.ml
File "lab2/accum.ml", line 1, characters 0-1:
Error: I/O error: lab2/accum.cmo: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:04:35.507

似乎问题是由我创建 OCaml 项目的奇怪方法引起的——我在 Eclipse 工作区之外创建了它们。

我找到[了这个](http://www.algo-prog.info/ocaide/forum/viewtopic.php?f=2&t=162#p772)主题，他们说，OcaIDE（显然是一般的 Eclipse）试图不与工作区之外的文件夹混合。因此，如果项目不在工作区文件夹中，它不会自动创建接口、编译单元等。

我重新创建了我的项目，这次是在工作区中，一切都很顺利。我什至可以重命名已创建的文件，并更新它们的所有引用（mli、cmo）。

# matlab - 圆形邻域运算：matlab颜色直方图

> ID：13233949
> 
> 赞同：4
> 
> 时间：2012-11-05T14:17:16.680
> 
> 标签：matlab, image-processing, computer-vision, pattern-recognition

假设我有一个灰度图像。考虑每个像素周围的圆形邻域窗口。我需要获取每个像素周围圆形邻域的颜色直方图。

如何在 MatLab 中有效地为这个问题实现循环邻域运算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:58:20.123

我不想给你一切，但我认为这应该对你有很大帮助。

那么你可以做一个圈子做类似的事情

```
h = fspecial('disk',rad);
h = h>0; 
```

然后你可以把它放在一个更大的矩阵中的任何地方做类似的事情

```
h2 = zeros(N,M);
h2(c_offset-rad:c_offset+rad,r_offset-rad:r_offset+rad) = h; 
```

现在您有一个与图像大小（列/行大小）相同的矩阵。您可以将其用作从矩阵中获取数据的参考表，就像您可以通过说仅返回 0.5 以上的值一样

```
r = rand(10);
d = r(r>0.5); 
```

**编辑：**

您还需要在某些地方使用数据类型以使 MATLAB 满意。例如， h2 需要是一个逻辑才能将其用作另一个矩阵的参考表。如果没有适当的类型， hist 也将无法工作。

# c# - 在 XAML 中显示格式化文本

> ID：13233951
> 
> 赞同：4
> 
> 时间：2012-11-05T14:17:33.573
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我有一个简单的 HTML（从某些维基百科页面的可打印版本复制/粘贴），我想在我的应用程序中显示它。

有什么方法可以将其转换为**更原生的 XAML 外观**，而不仅仅是在 中显示整个页面`WebView`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:03:19.590

您可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来解析 HTML 并格式化 TextBlock 或 RichTextBlock。您可以查看我编写的[RichTextBlockExtensions.LinkedHtmlFragment](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/79db4cb8e6f7#WinRTXamlToolkit/Controls/Extensions/RichTextBlockExtensions.cs)示例，了解如何添加一些带有指向 RichTextBlock 的链接的文本，但这仅支持带有一些基本锚标记的纯文本。任何更多的工作都需要更多的工作，而且我还没有遇到任何可以为你做这件事的开源库，因为你可能需要为一组有限的页面定制样式。否则 - 编写一个通用的 HTML 到 XAML 转换器可能类似于实现一个新的 Web 浏览器。

# php - (123) 的 preg_replace 正则表达式：

> ID：13233952
> 
> 赞同：0
> 
> 时间：2012-11-05T14:17:35.867
> 
> 标签：php, regex, preg-replace

我正在寻找一个 preg_replace 正则表达式，它将匹配并删除

```
(123): 
```

和

```
(+12): 
```

我尝试了一些，包括

```
$str = preg_replace('/([0-9]+)/s', '', $str); 
```

但我试过的都没有删除`()`括号/括号也没有`+`符号

（是的，我意识到`+`正则表达式中的加/继续不是实际`+`符号）；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:19:42.850

您需要转义括号并将`+`符号添加到您的字符组：

```
$str = preg_replace('/\([+0-9]+\)/s', '', $str); 
```

# html - 显示表格单元格的 div 溢出

> ID：13233959
> 
> 赞同：0
> 
> 时间：2012-11-05T14:18:31.353
> 
> 标签：html, css

我在另一个 div 中有许多 div 试图制作一个“bbokshelf”。为了对齐“书籍” div 底部，我使用`display:table-cell`css 属性，并且硬币容器宽度为 100%，但是当内部 div 填充容器时，它们开始溢出。有没有办法让它们出现在行中，比如浮动它们或其他什么？`float: left`不工作。的HTML：

```
<div class="magazinebookcase">
    <div class="books">
    <a style="height:286px;width:16px;" href="">
            <div class="rotate">Book 9</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:48px;" href="">
            <div class="rotate">Book 10</div>
    </a>
    </div>
            <div class="books">
    <a style="height:252px;width:38px;" href="">
            <div class="rotate">Book 11</div>
    </a>
    </div>
            <div class="books">
    <a style="height:254px;width:34px;" href="">
            <div class="rotate">Book 12</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:36px;" href="">
            <div class="rotate">Book 13</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:50px;" href="">
            <div class="rotate">Book 14</div>
    </a>
    </div>
            <div class="books">
    <a style="height:254px;width:52px;" href="">
            <div class="rotate">Book 15</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:72px;" href="">
            <div class="rotate">Book 16</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:38px;" href="">
            <div class="rotate">Book 17</div>
    </a>
    </div>
            <div class="books">
    <a style="height:252px;width:40px;" href="">
            <div class="rotate">Book 18</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:46px;" href="">
            <div class="rotate">Book 19</div>
    </a>
    </div>
            <div class="books">
    <a style="height:284px;width:14px;" href="">
            <div class="rotate">Book 20</div>
    </a>
    </div>
            <div class="books">
    <a style="height:252px;width:42px;" href="">
            <div class="rotate">Book 21</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:44px;" href="">
            <div class="rotate">Book 22</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:44px;" href="">
            <div class="rotate">Book 23</div>
    </a>
    </div>
            <div class="books">
    <a style="height:262px;width:60px;" href="">
            <div class="rotate">Book 24</div>
    </a>
    </div>
            <div class="books">
    <a style="height:284px;width:14px;" href="">
            <div class="rotate">Book 25</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:40px;" href="">
            <div class="rotate">Book 26</div>
    </a>
    </div>
            <div class="books">
    <a style="height:254px;width:58px;" href="">
            <div class="rotate">Book 27</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:40px;" href="">
            <div class="rotate">Book 28</div>
    </a>
    </div>
            <div class="books">
    <a style="height:257px;width:41px;" href="">
            <div class="rotate">Book 29</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:40px;" href="">
            <div class="rotate">Book 30</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:34px;" href="">
            <div class="rotate">Book 31</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:42px;" href="">
            <div class="rotate">Book 32</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:44px;" href="">
            <div class="rotate">Book 33</div>
    </a>
    </div>
            <div class="books">
    <a style="height:254px;width:40px;" href="">
            <div class="rotate">Book 34</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:40px;" href="">
            <div class="rotate">Book 35</div>
    </a>
    </div>
            <div class="books">
    <a style="height:252px;width:42px;" href="">
            <div class="rotate">Book 36</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:44px;" href="">
            <div class="rotate">Book 37</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:34px;" href="">
            <div class="rotate">Book 38</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:36px;" href="">
            <div class="rotate">Book 39</div>
    </a>
    </div>
            <div class="books">
    <a style="height:252px;width:26px;" href="">
            <div class="rotate">Book 40</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:34px;" href="">
            <div class="rotate">Book 41</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:50px;" href="">
            <div class="rotate">Book 42</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:48px;" href="">
            <div class="rotate">Book 43</div>
    </a>
    </div>
            <div class="books">
    <a style="height:258px;width:46px;" href="">
            <div class="rotate">Book 44</div>
    </a>
    </div>
            <div class="books">
    <a style="height:256px;width:60px;" href="">
            <div class="rotate">Book 45</div>
    </a>
    </div>
        <div class="clearfix"></div>
</div>​ 
```

CSS：

```
.magazinebookcase {
width: 100%;
padding: 3px;
float:left;
} 

.magazinebookcase .clearfix {
clear:both;
}

.magazinebookcase .books {
display: table-cell;
vertical-align: bottom;
text-align:center;
}

.magazinebookcase a {
border: 1px solid #000;
display: block;
font-size: 0.7em;
}

.magazinebookcase a:hover {
background-color: #ccc;
}

.rotate {
-moz-transform: rotate(270deg);
-moz-transform-origin: 50% 50%;
-webkit-transform: rotate(270deg);
-webkit-transform-origin: 50% 50%;
position: relative;
top: 50%;
}​ 
```

[http://jsfiddle.net/b8K7u/](http://jsfiddle.net/b8K7u/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:26:41.007

而不是`display: table-cell;`尝试`display: inline-block;`

像这样。

```
.magazinebookcase .books {
display: inline-block;
vertical-align: bottom;
text-align:center;
} 
```

[http://jsfiddle.net/b8K7u/1/](http://jsfiddle.net/b8K7u/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:30:46.360

您遇到的问题是，为了使您的书变窄，您使用的是窄宽度。但是，该宽度由具有书名的元素继承。该元素虽然在旋转后显示，但它的宽度仍然很窄。换句话说，宽度是相对于局部坐标系的（当旋转不是 90 度的倍数时，这是唯一的方法）。

# c# - 使用后台任务中的应用程序 resw 文件

> ID：13233962
> 
> 赞同：5
> 
> 时间：2012-11-05T14:18:37.777
> 
> 标签：c#, resources, windows-8, microsoft-metro, background-process

我正在开发一个现代 UI 应用程序，我目前正在尝试从后台任务访问我的应用程序的资源文件 (Resources.resw)。两者都在同一解决方案中的不同项目中。我试过这样：

```
ResourceLoader resources = new ResourceLoader("MyApp/Resources"); 
```

但是我有一个错误，因为它无法访问资源地图。

有没有特定的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-08T14:44:46.697

万一有人遇到这种情况。

在 UWP 中，您似乎不需要做任何特别的事情来完成这项工作。如果`.resw`文件包含在主 UWP 项目中，您甚至可以使用资源加载器从后台任务程序集中检索它们。对于名为*LiveNotifications-ItemComplete*的资源字符串，它将如下所示：

`var resource = new ResourceLoader().GetString("LiveNotifications-ItemCompleted");`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T21:04:11.037

尝试仅使用资源文件的名称。如果名称是 MyResources.resw，则使用：

```
ResourceLoader resources = new ResourceLoader("MyResources"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T16:05:54.507

虽然这是一篇旧帖子，但我想我会发布我的发现，因为当我尝试在我的 Windows 10 的 UWP 应用程序中的后台任务中使用它时，这篇帖子中的任何建议都不适合我。

我实现它的方式如下：

```
string str = ResourceLoader.GetForViewIndependentUse("Resources").
             GetString("MyLocalizedKey"); 
```

在哪里

*   `"Resources"`例如，是`.resw`“App\String\en-US”或“App\Strings\fr-FR”中的文件名。

和

*   `"MyLocalizedKey"`是您要从资源文件中获取的值的实际键。

现在请记住，如果您使用此方法，则必须将您的所有字符串放在`BackgroundTask`主应用程序中。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:00:45.360

我认为你正在尝试做的事情是不可能的。Resw 可能只能在商店应用程序项目中访问。至少这是我的观察，我已经尝试了我所知道的一切。

但是，如果您想将参数传递给后台任务，我可以提供解决方案。将 resw 文件添加到您的 Windows 应用商店应用项目中。当您注册后台任务时，将您的设置（或您需要传递给后台任务的任何内容）写入设备的本地设置。然后，从您的后台任务中读取本地设置中的相同设置。

它并不完美，但效果很好。如果这对您没有帮助，我很抱歉。

# javascriptmvc - jsmvcstealjs进程问题

> ID：13233964
> 
> 赞同：0
> 
> 时间：2012-11-05T14:18:51.653
> 
> 标签：javascriptmvc

当使用 buildjs 为 jsmvc 模块生成生产 javascript 时，命令进程在没有任何信息的情况下退出，这种行为是零星的，有时（没有任何更改）它会生成生产 javascript，我们观察到 CPU 进程飙升到 100% 并且几秒钟后退出。

我想知道是否有任何机构在运行 buildjs 时遇到类似的流程问题，或者是否有运行 buildjs 所需的任何最低处理器配置。任何帮助表示赞赏。

js .\steal\buildjs 模块名\xyz.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:35:03.450

经过进一步调试，我们发现 CPU 配置较少的问题是由于 env.js 中的 setTimeOut 调用，当用 setInterval 替换 setTimeOut 调用时，它工作正常。我们还没有进一步调试它为什么会在 env.js 的 setTimeOut 中中断，但到目前为止，这个解决方案有效。

# php - Cakephp Find 行为 Containable 不起作用

> ID：13233968
> 
> 赞同：0
> 
> 时间：2012-11-05T14:19:05.667
> 
> 标签：php, cakephp

我有三个模型

1.  用户
2.  注意（与帖子相同）
3.  友谊

我正在尝试检索我订阅的用户共享的帖子。

我在 UsersController 中所做的正是我首先检索了我所有朋友的列表

```
 $lof=$this->User->Friendship->find('all', array('conditions'=>array('Friendship.user_from'=>$this->Auth->user('id')), 'contain'=>array('Friendship.user_to'))); 
```

现在我正在尝试显示我朋友分享的所有帖子

```
$allnotes= $this->User->Note->find('all', array('conditions'=>array('Note.user_id'=>array($lof)), 'order' => array('Note.created DESC'))); 
```

这给了我一个错误

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Array' in 'where clause'

SQL Query: SELECT `Note`.`id`, `Note`.`user_id`, `Note`.`notes`, `Note`.`created`,     `User`.`id`, `User`.`name`, `User`.`email`, `User`.`username`, `User`.`password`, `User`.`gender`, `User`.`dob`, `User`.`image`, `User`.`tmp_name`, `User`.`search` FROM `fyp`.`notes` AS `Note` LEFT JOIN `fyp`.`users` AS `User` ON (`Note`.`user_id` = `User`.`id`) WHERE `Note`.`user_id` = (Array) ORDER BY `Note`.`created` DESC 
```

我知道我正在尝试添加一个数组，但是当我尝试像这样的相同查找查询时，它起作用了。

```
$allnotes= $this->User->Note->find('all', array('conditions'=>array('Note.user_id'=>array(114,115)), 'order' => array('Note.created DESC'))); 
```

在我的查询中，仅从 Friendship 表中获取 user_to 的值并将其分配为等于 Note.user_id 的解决方案到底是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:50:51.920

问题是您的`$lof`变量不包含 id 数组。它将包含来自友谊模型的完整数据数组。如果您查看`$lof`变量的值，您应该明白我的意思。您可以使用该`debug()`功能执行此操作。

要做你想做的事，你必须使用“列表”查找方法并使用该`Friendship.user_to`字段。像这样：

```
$lof = $this->User->Friendship->find('list', array(
    'fields' => array('Friendship.id', 'Friendship.user_to'),
    'conditions' => array(
        'Friendship.user_from' => $this->Auth->user('id')
)); 
```

然后找到你现在可以使用的所有笔记

```
$allnotes = $this->User->Note->find('all', array(
    'conditions' => array(
         'Note.user_id' => $lof
     ),
     'order' => array('Note.created DESC')
)); 
```

[您可以在CakePHP 的食谱](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)中阅读更多关于不同查找方法的信息（我已链接到列表一）

# c++ - 具有相同参数的函数模板

> ID：13233974
> 
> 赞同：-3
> 
> 时间：2012-11-05T14:19:38.113
> 
> 标签：c++, templates

制作具有相同参数的函数模板的最佳方法是什么？

例如：

```
template<class T>
int foo(const T &item) {
    // ...
    return item;
};

template<class T, class NotUsed>
char foo(const T &item) {
    // ...
    return item;
};

int main()
{

    std::cout << foo(1)   << std::endl; // 1
    std::cout << foo('1') << std::endl; // 1

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:31:01.687

根据您的尝试，我建议将返回类型设为模板参数。

```
template<class T, class Return = int>
Return foo(const T &item) {
    // ...
    return item;
};

int main()
{
    std::cout << foo<int, int>(1)   << std::endl; // 1
    std::cout << foo<char, char>('1') << std::endl; // 1
    return 0;
} 
```

# c# - 使用嵌套的 IF 语句导致“CS1513：} 预期”错误（Webmatrix 中的 C#）

> ID：13233975
> 
> 赞同：2
> 
> 时间：2012-11-05T14:19:39.337
> 
> 标签：c#, webmatrix

使用 C# 和 Webmatrix 处理我的第一个网页项目。所以事情一直进展顺利，但现在遇到了一个让我难过的问题。我正在做的是在此页面上发布一个包含一条消息的表单，然后我将消息保存到数据库（稍后还会让电子邮件部分继续运行）。

我已经发布了下面的代码，它实际上比说明问题所需的时间更长，但我认为我还是会发布它。当我看到倒数第二个右大括号以黄色突出显示时，WebMatrix 已经在我尝试运行它之前突出显示了手头的问题。运行代码时（并且 post 值都可以），我收到错误“CS1513：} 预期”。我最初以为我错误地添加了一个额外的右花括号，但是在检查和仔细检查然后慢慢地逐行重建代码以识别在哪一行之后开始出错，我现在得出的结论是没有任何“if(IsPost && WebSecurity.IsAuthenticated)”“if”语句中嵌套的“if”和“foreach”语句，然后“

我检查了一下，发现很多 C# 代码示例都是这样做的。任何帮助，指针或其他任何东西都非常感谢。

问

```
@{
if(IsPost && WebSecurity.IsAuthenticated){
    var fromEmail = WebSecurity.CurrentUserName;
    var fromUserId = @WebSecurity.CurrentUserId;
    var message = Request["message"];
    var uid = Request["uid"];
    bool multiSend = false;
    var db = Database.Open("Tennegize");

    var skillLevel = 0;
    if(Request["multi"]=="1"){
        multiSend = true;
    }

    //Save to message to BD
    var insertQuery = "INSERT INTO Messages (UserEmail, UserId, Message) VALUES (@0, @1, @2)";
    db.Execute(insertQuery, fromEmail, fromUserId, message);
    decimal messageId = db.GetLastInsertId();

    if(multiSend){
         //Get email address' from all recipients
        var sql2 = "SELECT Email FROM UserProfile WHERE SkillLevel = @0";
        var data2 = db.Query(sql, skillLevel);
        var totalRecipents = data2.Count();
        //Log all recipients who will recieve this notification
        foreach(var recipient in data2){
            insertQuery = "INSERT INTO Message_Recipients (UserId, UserEmail, MessageId) VALUES (@0, @1, @2)";
            db.Execute(insertQuery, uid, data.Email, messageId); 
        }

    }else{
        // Get to recipients email address
        var sql = "SELECT Email FROM UserProfile WHERE UserId = @0";
        var data = db.QuerySingle(sql, uid);
        //Log the recipient of this norification
        insertQuery = "INSERT INTO Message_Recipients (UserId, UserEmail, MessageId) VALUES (@0, @1, @2)";
        db.Execute(insertQuery, uid, data.Email, messageId);

    }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:31:55.730

我的猜测是这条线`var fromUserId = @WebSecurity.CurrentUserId;`导致了问题。删除`@`之前的`WebSecurity.CurrentUserId`.

# android - android在远程服务和活动之间进行通信

> ID：13233976
> 
> 赞同：2
> 
> 时间：2012-11-05T14:19:40.017
> 
> 标签：android, service, aidl

我尝试为客户端和服务器之间的通信创建远程服务。主要思想是用我的主要活动启动服务，当服务启动时，它将获取服务器地址和端口以打开套接字。

我希望它是远程服务，以便其他应用程序能够使用相同的服务。该服务将通过向服务器发送和接收数据来保持连接处于活动状态。它将具有读取\写入 Int 和 String 的方法。换句话说，实现套接字输入和输出方法......

我现在面临的问题是了解远程服务在 android 中是如何工作的。我从创建一个小型服务开始，它只有一种返回 int 的方法。这是一些代码：

连接接口.aidl：

```
 interface ConnectionInterface{
      int returnInt();
    } 
```

ConnectionRemoteService.java：

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.os.RemoteException;
import android.widget.Toast;

public class ConnectionRemoteService extends Service {
    int testInt;

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
}

@Override
public IBinder onBind(Intent intent) {
    return myRemoteServiceStub;
}   

private ConnectionInterface.Stub myRemoteServiceStub = new ConnectionInterface.Stub() {
    public int returnInt() throws RemoteException {
        return 0;
    }
}; 
```

}

以及我主要活动的“onCreate”的一部分：

```
final ServiceConnection conn = new ServiceConnection() {
        public void onServiceConnected(ComponentName name, IBinder service) {
            ConnectionInterface myRemoteService = ConnectionInterface.Stub.asInterface(service);
        }
        public void onServiceDisconnected(ComponentName name) {

        }
    };

    final Intent intent = new Intent(this, ConnectionRemoteService.class); 
```

后来我有一个绑定和取消绑定服务的 2 OnClickListeners：

```
bindService(intent, conn, Context.BIND_AUTO_CREATE);
unbindService(conn); 
```

我在这里缺少的一部分是如何使用服务中的方法？现在我只有 1 个返回 int 值的方法。我怎么称呼它？以及如何使用其他方法为服务获取值？

谢谢，利奥兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:59:34.553

当您成功绑定到服务时，将使用服务绑定`onServiceConnected()`程序调用，然后您可以使用该服务绑定程序与服务进行通信。目前你只是把它放在一个局部变量`myRemoteService`中。您需要做的是将其存储在主要活动的成员变量中。所以在你的主要活动中这样定义它：

```
private ConnectionInterface myRemoteService; 
```

然后，在`onServiceConnected()`做：

```
myRemoteService = ConnectionInterface.Stub.asInterface(service); 
```

稍后，当您想使用服务的方法时，请执行以下操作：

```
// Access service if we have a connection
if (myRemoteService != null) {
    try {
        // call service to get my integer and log it
        int foo = myRemoteService.returnInt();
        Log.i("MyApp", "Service returned " + foo);
    } catch (RemoteException e) {
        // Do something here with the RemoteException if you want to
    }
} 
```

`myRemoteService`当您没有连接到服务时，请确保您设置为 null。你可以在`onServiceDisconnected()`.

# utf-8 - 从损坏的 ISO-Latin-1 序列中恢复 UTF-8

> ID：13233978
> 
> 赞同：0
> 
> 时间：2012-11-05T14:19:44.117
> 
> 标签：utf-8, character-encoding

我最近遇到了几个损坏的 UTF-8 字符串，这些字符串被转换为我认为是 ISO-Latin-1 的字符串，我想知道是否已经有一些工具可以用来自动转换回来，因为没有信息实际上被破坏了，实际上并没有丢失任何位。

本质上，这样的事情会采用一系列字符并显示如果这些相同的位被显示为 utf-8 或其他编码时它们会是什么。这样的工具存在吗？（我知道自己创建一些东西来做这件事很容易，甚至只是手动做，所以如果真的没有任何东西，我可能会这样做。）

澄清一下：我遇到的特殊情况是，在特定论坛上，文本编辑器允许使用 utf-8 字符，但论坛本身会显示与 utf-8 字符的各个字节相对应的字符。

对于字符 U+0000 到 U+007F，它是完全相同的字符，但是：

*   U+0080 到 U+07FF 字符改为显示为 U+00C0 和 U+00DF 之间的一个字符，后跟 U+0080 和 U+00BF 之间的一个字符
*   U+0800 到 U+FFFF 字符改为显示为 U+00E0 和 U+00EF 之间的一个字符，后跟 U+0080 到 U+00BF 之间的两个字符

等等...

所以“...”实际上应该显示为字符 U+2xy6，（x 是 '�' 的中间 4 位，y 是 '�' 的后 2 位加上 '10'）。

虽然我仍然无法确切地弄清楚 U+0080 和 U+00BF '�' 之间的哪个字符。

我想要做的是获取所有 UTF-8 字符串字符的 ISO-Latin-1 位值，将它们连接在一起，并解释生成的位序列，就好像它包含 UTF-8 编码字符一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:23:58.440

很抱歉，但这并没有多大意义。:)

场景 1：像*"Héllö wörld"*这样的字符串，它包含在 UTF-8 和 Latin1 中都有效的字符，被正确地从 UTF-8 转换为 Latin1：没问题。你现在只需要用 Latin1 解释它。

场景 2：像*"Hello 世界"*这样的字符串，它包含在 UTF-8 中有效但在 Latin1 中无效的字符，被正确地从 UTF-8 转换为 Latin1：在这种情况下，在 Latin1 中不可表示的字符可能已被替换by `?`，即字符串现在是*“Hello ??”* 你对此无能为力。

场景 3：像*"Héllö 世界"*这样的字符串，它包含任何类型的字符并保存为 UTF-8，从假定的 Latin1 转换为 UTF-8。这意味着这些字符已被误解，但现在已正确编码为 UTF-8：*"HÃ©llÃ¶ ä¸ç"*。在这种情况下，您可以反转编码 UTF-8 → Latin1 并将结果解释为 UTF-8 以获取原始结果。

场景 4：像*"Héllö Wörld"*这样的字符串，它包含 Latin1 字符并保存为 Latin1，被误解为 UTF-8，然后保存为 UTF-8，在这种情况下，它现在是*"H�ll� W�rld"*。这个字符串现在是不可恢复的。

发生的事情有更多可能的组合，如果没有更多信息，就不可能准确地告诉您可以做什么或不可以做什么。首先，确保***您***现在正确地解释了字符串，这不仅仅是一个显示问题。

您在那里看到“�”的事实表明您正在尝试将*某些*内容解释为 UTF-8，但 UTF-8 解码器无法理解这些字符并将它们替换为“�”。这要么是你现在的错并且数据很好，要么是场景 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:07:32.543

不幸的是，UTF8 -> latin1 是有损的。UTF8 解析为 latin1 -> UTF8 不是。我认为这是你的情况。如果是这样，那么您可以在 linux 上反向，例如：

```
iconv -f utf8 -t iso-8859-1 < bad.file.latin1 > good.file.utf8 
```

如果中间转换是像 cp1252 这样有损的东西，那么过程会更复杂，并且需要类似以下内容的详细信息：

[http://www.pixelbeat.org/docs/unicode_utils/](http://www.pixelbeat.org/docs/unicode_utils/)

# javascript - 在 BackboneJS 视图中保持上下文

> ID：13233979
> 
> 赞同：1
> 
> 时间：2012-11-05T14:19:44.923
> 
> 标签：javascript, backbone.js

有没有更短更优雅的方式来保持 BackboneJS 视图中的上下文？

```
 this.$el.find(this.itemViewContainer).sortable("destroy").sortable({
        connectWith:'.tasks',
        delay:140,
        revert:200,
        items:'li:not(.locked)',
        placeholder:'ui-state-highlight',
        start:_.bind(function (event, ui){this._sortStart(event, ui);}, this),
        receive:_.bind(function (event, ui){this._sortReceive(event, ui);}, this),
        stop:_.bind(function (event, ui){this._sortStop(event, ui);}, this)
    }); 
```

我指的是：

*   开始事件
*   甚至收到
*   停止事件

重要的是：this、event 和 ui 将被传递给内部视图事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:34:24.010

您可以使用[_.bindAll](http://underscorejs.org/#bindAll)将其锁定到回调中的视图：

> **bindAll** _.bindAll(object, [*methodNames])
> 绑定由methodNames 指定的对象上的许多方法，以便在调用它们时在该对象的上下文中运行。对于将用作事件处理程序的绑定函数非常方便，否则将使用相当无用的 this 来调用它们。如果没有提供 methodNames，则对象的所有函数属性都将绑定到它。

你可以像这样使用它

```
var V = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, '_sortStart', '_sortReceive', '_sortStop');

        this.$el.sortable("destroy").sortable({
            items: 'li:not(.locked)',
            start: this._sortStart,
            receive: this._sortReceive,
            stop:this._sortStop
        });
    },

    _sortStart: function(event, ui) {
    },
    _sortReceive: function(event, ui) {
    },
    _sortStop: function(event, ui) {
    }
}); 
```

[http://jsfiddle.net/nikoshr/wAAZ5/](http://jsfiddle.net/nikoshr/wAAZ5/)

# c# - 使用smo获取Sql server的数据

> ID：13233982
> 
> 赞同：4
> 
> 时间：2012-11-05T14:19:51.057
> 
> 标签：c#, .net, sql-server, smo

我正在使用 Sql Server Smo 通过 C# 应用程序创建数据库方案。但是，我需要更多，我还需要从每个表中获取数据作为**脚本**，如下所示：

```
--........................................
INSERT INTO Table123 (...) VALUES (....)
INSERT INTO Table456 (...) VALUES (....)
--........................................ 
```

我该怎么做，有可能吗？请注意，我需要使用 smo 而不是数据库的 *.bak 等来创建一个脚本。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T16:40:26.463

看看 SMO 的[Scripter](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scripter.aspx)类。以下基本示例适用于我：

```
using System.Data.SqlClient;
using System.IO;
using System.Text;
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Smo;

namespace SqlExporter
{
class Program
{
static void Main(string[] args)
{
    var server = new Server(new ServerConnection {ConnectionString = new SqlConnectionStringBuilder {DataSource = @"LOCALHOST\SQLEXPRESS", IntegratedSecurity = true}.ToString()});
    server.ConnectionContext.Connect();
    var database = server.Databases["MyDatabase"];
    var output = new StringBuilder();

    foreach (Table table in database.Tables)
    {
        var scripter = new Scripter(server) {Options = {ScriptData = true}};
        var script = scripter.EnumScript(new SqlSmoObject[] {table});
        foreach (var line in script)
            output.AppendLine(line);
    }
    File.WriteAllText(@"D:\MyDatabase.sql", output.ToString());
}
}
} 
```

**注意：**此示例不处理任何外键约束或表之间的其他依赖关系。

**参考：**

1.  [这个 SO 问题](https://stackoverflow.com/questions/5365408/c-sharp-smo-scripting-table-data-to-file-throwing-error)（这让我进入了[Scripter](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scripter.aspx)课程）
2.  [这个 MSDN 论坛问题](http://social.msdn.microsoft.com/Forums/en/sqlsmoanddmo/thread/f456a535-f7c1-49f7-90f4-6a8bf251fd3b)（解释了如何使用[EnumScript](http://msdn.microsoft.com/en-us/library/cc285610.aspx)方法）

# c# - 在 Web 服务中读取和重写 HttpResponse

> ID：13233987
> 
> 赞同：2
> 
> 时间：2012-11-05T14:20:07.783
> 
> 标签：c#, httpresponse

我有一个无法修改其源代码的第 3 方库 (C#/.NET)。这个第 3 方库有一个我调用的方法，它直接写入我的 webmethod 的 HttpResponse 对象。响应包含一个状态代码。该响应返回给客户端，一切正常。

但是，现在我有兴趣找出该方法写入响应对象的状态代码。在将响应返回给客户端之前，我想知道这一点，并在必要时根据我认为合适的方式重写响应。

所以我的问题基本上是我是否有办法读取响应对象的内容并覆盖它？并且要明确一点：我说的是服务器发送回客户端的响应，而不是服务器接收到的作为请求结果的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:33:01.007

假设您可以访问`HttpResponse`对象，您可以获得并使用`StatusCode`属性设置状态代码。

[http://msdn.microsoft.com/en-us/library/system.web.httpresponse.statuscode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.statuscode.aspx)

您还可以修改其他属性，例如`Body`，然后一旦您进行了您想要调用的更改，`BeginFlush()`以将缓冲的响应发送到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:23:48.367

通过注册 HttpModule 和实现事件来检查。粘贴参考链接以获得帮助。

[http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers](http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers) http://www.darkside.co.za/archive/2008/03/03/web-page-optmisation -使用-httpmodule.aspx [http://msdn.microsoft.com/en-us/library/ms227673.aspx](http://msdn.microsoft.com/en-us/library/ms227673.aspx)

# css - 结合 :after 和 :hover

> ID：13233991
> 
> 赞同：206
> 
> 时间：2012-11-05T14:20:29.230
> 
> 标签：css, css-selectors, pseudo-element

我想`:after`与`:hover`CSS（或任何其他伪选择器）结合使用。我基本上有一个列表，并且`selected`该类的项目有一个使用`:after`. 我希望对于悬停但无法使其正常工作的对象也是如此。这是代码

```
#alertlist {
  list-style: none;
  width: 250px;
}

#alertlist li {
  padding: 5px 10px;
  border-bottom: 1px solid #e9e9e9;
  position: relative;
}

#alertlist li.selected,
#alertlist li:hover {
  color: #f0f0f0;
  background-color: #303030;
}

#alertlist li.selected:after {
  position: absolute;
  top: 0;
  right: -10px;
  bottom: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-left: 10px solid #303030;
  content: "";
}
```

```
<ul id="alertlist">
  <li>Alert 123</li>
  <li class="selected">Alert 123</li>
  <li>Alert 123</li>
</ul>
```

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-11-05T14:22:27.987

只需像使用选择器一样附加`:after`到您的选择器：`#alertlist li:hover``#alertlist li.selected`

```
#alertlist li.selected:after, #alertlist li:hover:after
{
    position:absolute;
    top: 0;
    right:-10px;
    bottom:0;

    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 10px solid #303030;
    content: "";
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-12-26T20:58:58.370

在scss中

```
&::after{
content: url(images/RelativeProjectsArr.png);
margin-left:30px;
}

&:hover{
    background-color:$turkiz;
    color:#e5e7ef;

    &::after{
    content: url(images/RelativeProjectsArrHover.png);
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-05T14:27:26.797

```
 #alertlist li:hover:after,#alertlist li.selected:after
{
    position:absolute;
    top: 0;
    right:-10px;
    bottom:0;

    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 10px solid #303030;
    content: "";
}​ 
```

[jsFiddle 链接](http://jsfiddle.net/6evFd/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-15T17:12:54.843

**cssSelector** :hover::after,

**cssSelector** :hover::before

假设我们有***一个***标签

```
a:hover::after {
    /*CSS Property*/
}
a:hover::before {
    /*CSS Property*/
} 
```

# jaxb - 配置 JAXB unmarshal tp 避免解码 XML 数据

> ID：13233996
> 
> 赞同：3
> 
> 时间：2012-11-05T14:20:45.467
> 
> 标签：jaxb, unmarshalling, string-decoding

我有一个传入的 XML，其值是编码形式，例如`&ltimg src=/".../" &gt`，但是在解组此数据时，JAXB 正在解码`<img src=/"../" >`我不希望它执行的数据。

是否有任何配置可以在 JAXB 中禁用此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:39:01.730

通过使用注释或其他方式将变量值定义为 CDATA

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:31:16.420

将`IS_REPLACING_ENTITY_REFERENCES`与 StAX 解析器一起使用应该会给您正在寻找的行为，

```
package forum13235119;

import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        xif.setProperty(XMLInputFactory.IS_REPLACING_ENTITY_REFERENCES, false);
        XMLStreamReader xsr = xif.createXMLStreamReader(new StreamSource("src/forum13235119/input.xml"));

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Foo foo = (Foo) unmarshaller.unmarshal(xsr);
        System.out.println(foo.bar);
    }

} 
```

**笔记：**

这在我的环境中不起作用，但基于以下对类似问题的回答对某些 StAX 解析器有效：

*   [https://stackoverflow.com/a/1778304/383861](https://stackoverflow.com/a/1778304/383861)