# StackOverflow 问答 13565000-13565999

# c# - C# WinMobile 6.1 项目中的 C++ DLL - 1c2 机器 (Thumb) 与 14c 机器 (x86)

> ID：13565002
> 
> 赞同：0
> 
> 时间：2012-11-26T12:37:51.393
> 
> 标签：c#, c++, visual-studio, dll, windows-mobile

我正在尝试将一些为 1c2 机器（拇指）编译的 DLL 导入 WinMobile 6.1 C# 智能设备项目。

但是，当我尝试将它们导入我的 C# 项目时，我得到“无法添加对 ... 的引用”，我可以添加已为 14C 机器 (x86) 编译的 DLL，我的 C# WinMobile 项目具有任何 CPU，因为它的设置，是否可以导入 1C2 机器 DLL 或者我需要将这些重新编译为 14C 机器 x86？

![DLL 导入](../Images/b6d6f58ec54b369a7dc960fd4ecf701f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:52:49.837

你不能做你想做的事。您不能只从托管代码“添加引用”到本机 DLL。“添加引用”专门用于添加托管引用。

如果要从托管代码调用本机 DLL，则必须编写和调用 P/Invoke 互操作函数。即使这样，您也只能调用公开导出的 C 函数（不能调用 C++，除非它具有 COM 接口），因此您可能还必须编写 C 存根或某种形式的工厂函数来代理您希望进行的任何 C++ 调用。

# css - 你能让一个图层可点击吗？去一个网址？

> ID：13565015
> 
> 赞同：0
> 
> 时间：2012-11-26T12:38:39.127
> 
> 标签：css

你能让一个图层可点击，去一个网址吗？

这是我的图层，带有背景图片。我希望我的用户单击它进行导航。

CSS：

```
#content-2-2 
{
    float: left;
    width: 269px;
    height: 103px;
    margin:0px 20px 0px 0px;
    padding: 0px;
    background: url('../images/Guided-tour-logo-front.png') no-repeat left top;
} 
```

HTML：

```
<div id="content-2-2"></div> 
```

问候，茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:40:17.957

您可以添加一个锚点：

```
<div id="content-2-2"><a href="url here"></a></div>

#content-2-2 
{
    float: left;
    width: 269px;
    height: 103px;
    margin:0px 20px 0px 0px;
    padding: 0px;
    background: url('../images/Guided-tour-logo-front.png') no-repeat left top;
}

#content-2-2 a
{
    width: 269px;
    height: 103px;
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:42:57.380

你不能通过 css ...尝试使用类似的东西：

```
<div id="content-2-2" onclick="location.href='http://www.example.com'"></div> 
```

这是JavaScript :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:44:53.870

你可以试试这个：

例如：

```
<div id="facebook" onclick="location.href='your_link.html'"> 
```

然后在你的 CSS 中：

```
 #facebook{
     cursor: pointer; 
     /* The rest of your styling to that div */
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T12:49:43.943

HTML5 允许锚点包裹块元素。如果您使用的是 HTML5，这应该可以工作：
`<a href="link.html"> <div id="content-2-2">my content</div> </a>`

# jquery - jQuery：检查图像是否已加载 - 顺序图像加载

> ID：13565018
> 
> 赞同：0
> 
> 时间：2012-11-26T12:38:53.187
> 
> 标签：jquery, image

我在这里有一个演示 - [http://www.ttmt.org.uk/forum/gallery](http://www.ttmt.org.uk/forum/gallery)

和 jsfiddle 来说明我的问题 - [http://jsfiddle.net/ttmt/tmyqj/6/](http://jsfiddle.net/ttmt/tmyqj/6/)

它只是一个简单的图像列表，它们从页面上浮动。

我想从左到右依次加载图像。

我已经这样做了：

```
 $(document).ready(function() {
      var lis = $('li').hide();

      var i=0;   

      function displayImg(){
        lis.eq(i++).fadeIn(200, displayImg);
      } 

      displayImg();    

    }) 
```

此代码有效，但我想一次加载一个图像，因此我需要在加载下一个图像之前检查图像是否已加载。

我试过这个，但它只加载第一个图像。

```
 $(document).ready(function() {
        var lis = $('li').hide();

        var i=0;   

        function displayImg(){
          lis.eq(i).fadeIn(200, checkLoad);
        } 

        function checkLoad(){
          if(lis.eq(i).complete){
            i++;
            displayImg();
          }else{
            alert('img not load');
          }
        }

        displayImg();    

      }) 
```

如何在加载下一个图像之前检查图像是否已加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:02:18.020

```
$(function() { // A shortcut for $(document).ready(function() {})
  var lis = $('li').hide();

  var displayImages = function(startIndex) {
    var li = lis.eq(startIndex);
    if (li.length) {
      li.fadeIn(200, function() {
        li.find('img').load(function() {
          displayImages(startIndex + 1);
        });
      });
    }
  }

  displayImages(1);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:46:30.763

我会使用（我会让你把它放在循环中！）：

```
 objImage = new Image();
 objImage.src='images/theimage.jpg';
 objImage.onLoad = imageLoaded();

 function imagesLoaded()
 {    
     //image is loaded, append it as per usual...
 } 
```

显然这需要一些改进，但它应该能让你继续前进；）

**编辑**
或者，您可以使用这个 jQuery 插件来预加载图像：

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/)

或者

[http://www.jqueryin.com/projects/spinner-jquery-preloader-plugin/#about](http://www.jqueryin.com/projects/spinner-jquery-preloader-plugin/#about)

# jquery - jQuery keyup 检查密码很慢

> ID：13565029
> 
> 赞同：0
> 
> 时间：2012-11-26T12:39:18.440
> 
> 标签：jquery

我希望有人可以帮助我解决以下问题。我有一个密码输入框，用户输入他们的密码，它使用以下代码自动检查他们的密码与数据库

```
 $('input[name=currentpassword]').keyup(function(){
                var currentcheck = $(this).val();
                var dataString='thisConfirm='+ currentcheck +'&userid='+$('input[name=userid]').val();
                PasswordChecking=   $.ajax({
                                        type:"POST",
                                        url:"/assets/inc/password-check.php",
                                        data:dataString,
                                        dataType:'html',
                                        context:document.body,
                                        global:false,
                                        async:false,
                                        success:function(data){
                                            return data}
                                            }).responseText;
                    checkconfirms(emailconfirm, passconfirm, PasswordChecking);
        }); 
```

但是我注意到每次按键之间都有延迟，并且希望有一种方法或替代方法可以检查输入的密码，因为每次按键都会延迟或在 Ajax 返回之前无法识别它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:48:42.707

您需要的是取消 ajax 请求的超时，以便在用户快速键入时不检查每个键盘上的密码，但仅在用户完成键入时才检查密码。此外，您应该使用异步调用来避免锁定浏览器，如下所示：

```
$('input[name=currentpassword]').on('keyup', function() {
    var data = {thisConfirm : this.value, userid: $('input[name=userid]').val()};

    clearTimeout($(this).data('timer'));

    $(this).data('timer', setTimeout(function() {
        $.ajax({
            type: "POST",
            url: "/assets/inc/password-check.php",
            data: data,
            dataType: 'html',
            context: document.body,
            global: false,
        }).done(function() {
            checkconfirms(emailconfirm, passconfirm, PasswordChecking);
        })
    },400);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:47:51.420

正如 Adil 建议的那样，使用`blur`or`focusout`事件是一种选择。另一种方法是使用`setTimeout()`延迟检查密码，这样您就不会在每次击键时都发送 AJAX 请求。相反，您会在他们停止输入该输入后 X 秒发送一个 AJAX 请求。

```
var checkPassword;
$('input[name=currentpassword]').keyup(function() {
    clearTimeout(checkPassword);
    checkPassword = setTimeout(function() {verifyPassword(this)}, 1000); // this would delay calling verifyPassword() by 1 second
});

function verifyPassword(element) {
    var currentcheck = element.value;
    // do your AJAX call here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:41:08.210

您正在使用 `async:false,`which 对于异步调用应该是正确的。我建议您检查 jquery event **[focusout()](http://api.jquery.com/focusout/)**而不是 keyup 的密码。

```
$('input[name=currentpassword]').focusout(function(){
            var currentcheck = $(this).val();
            var dataString='thisConfirm='+ currentcheck +'&userid='+$('input[name=userid]').val();
            PasswordChecking=   $.ajax({
                                        type:"POST",
                                        url:"/assets/inc/password-check.php",
                                        data:dataString,
                                        dataType:'html',
                                        context:document.body,
                                        global:false,
                                       async:true,
                                       success:function(data){
                                        //return data
                                        alert("here you would decide on data for valiadation success");
                                        }
                               }).responseText;
                checkconfirms(emailconfirm, passconfirm, PasswordChecking);
    }); 
```

# java - 如何在 Android 中访问 Facebook 相册中的所有图像

> ID：13565031
> 
> 赞同：3
> 
> 时间：2012-11-26T12:39:22.197
> 
> 标签：java, android, facebook-graph-api, facebook-android-sdk

我正在使用 facebook android sdk 访问每个相册的照片，

```
response = facebook.request(wallAlbumID+"/photos"); 
```

但它的响应包含相册的第一张图片的对象。我怎样才能得到每张专辑的所有照片关于他们的id？

# c - 条件如何使用？

> ID：13565032
> 
> 赞同：-6
> 
> 时间：2012-11-26T12:39:26.117
> 
> 标签：c, if-statement, escaping

以下 C 代码中的以下条件是什么意思？

```
if (line[currChar] == '\"') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T12:40:55.223

它检查 line[currChar] 中的字符是否为 " 。它仍然是**"**，尽管它被**\**转义了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:15:39.050

在寻求帮助时，通常最好在代码中显示变量的声明/初始化，这有助于回答问题。

反正大概`line`是一个字符数组，而且`currChar`是一个int。

```
int currChar;
char line[] = "Looking for a \" in the code\n");

for(currChar = 0; currChar < strlen(line); currChar++)
    if(line[currChar] == '\"')
        break;
if(currChar < strlen(line))
     printf("we found a \"!"); 
```

这是一个如何使用该条件的快速示例。字符串中的`'\'`字符是[转义字符](http://en.wikipedia.org/wiki/Escape_sequences_in_C)。所以如果我们想`"`在字符串中打印 a 你需要转义它，否则它将作为字符串的结尾（参见`line[]`上面的初始化）。

检查`"`不需要的字符时：

```
if(line[currChar] == '\"')  // This works...
if(line[currChar] == '"')    // so does this 
```

因为`"`当没有匹配的引号时不会引起问题，但是如果你想在这里检查一个`'`字符，你需要一个。

# textfield - 从文本字段更新 UISteppers 值

> ID：13565034
> 
> 赞同：0
> 
> 时间：2012-11-26T12:39:41.243
> 
> 标签：textfield, uistepper

情况就是这样。

我想在文本字段中输入一个值并将其传递给当前的 uisteppers 值。

例如，如果当前值为 2，并且我在文本字段中输入 35，那么当我按下步进器上的 + 按钮时，值应该变为 36（或按下 - 到 34）

谢谢

--------------------------------------第一次回复后编辑-------- --------------------------

感谢您的快速回复，因为我对我宣布的这一切更新鲜

`@interface GenericViewController : UIViewController <UITextFieldDelegate> {`...在我的标题中。并将我在通用控制器中的代码更改为：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    [textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
     NSLog(@"######PASS  DELEGATE ###############");
    return YES;
}

- (void) textFieldDidChange:(id)sender {

       UITextField *textField = (UITextField *)sender;
    textField = changeNfpHand;
    NSLog(@"##############################");
    NSLog(@"textfield is now  @------> : %f" ,  DateStepper.stepValue);
   self.DateStepper.stepValue = [textField.text doubleValue];

  //  self.DateStepper.stepValue = [self.Nfp.text doubleValue];
        NSLog(@"VALUE STEP is @------> : %f" ,  DateStepper.stepValue);
    NSLog(@"self.Nfp.text @------> : %@" ,  self.Nfp.text); 
```

现在我对这一切都很陌生..我试图打电话 `[self textFieldDidChange:self];` 但没有运气。看来我无法让它工作......关于我做错了什么的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:51:42.120

在 UITextField 的委托中，添加以下代码，这将使 UIStepper 的步长值根据您在 UITextField 中输入的内容而变化。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    [textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
    return YES;
}
- (void) textFieldDidChange:(id)sender {
    UITextField *textField = (UITextField *)sender;
    self.stepper.stepValue = [textField.text doubleValue];
} 
```

# xaml - 窗口不适合在 WPF 2010 中显示

> ID：13565041
> 
> 赞同：0
> 
> 时间：2012-11-26T12:40:24.060
> 
> 标签：xaml

我有一个窗户。它的属性是：

```
 <Window x:Class="Student.MainWindow" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
    Title="MainWindow" Height="996" Width="1191" 
    xmlns:my="clr-namespace:Student"             
    Loaded="Window_Loaded"        
    WindowState="Maximized"> 
```

当此窗口在“Windows XP”中运行时，窗口将完全正确地显示。但是如果窗口是在“Windows 7”中打开的，那么窗口的高度就不行了，但是宽度是正常的。高度大于显示器，并且窗口底部未安装在显示器中。我希望该窗口将处于显示状态，并且不会大于“Windows 7”中显示的高度。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:08:04.040

我只是降低了窗户的高度，它有助于我的窗户正确安装:)。

```
<Window x:Class="Student.MainWindow" 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
Title="MainWindow" Height="850" Width="1191" 
xmlns:my="clr-namespace:Student"             
Loaded="Window_Loaded"        
WindowState="Maximized"> 
```

# facebook - 捕获点击页面选项卡上的“喜欢”按钮

> ID：13565049
> 
> 赞同：1
> 
> 时间：2012-11-26T12:40:59.130
> 
> 标签：facebook, events, button, tabs

我想知道用户何时点击“喜欢”按钮。

我能找到的所有内容都将我引向“FB.Event.subscribe('edge.create', ...)”，但它似乎不适用于**页面标签**...

有谁知道在标签上捕获此事件的方法？

非常感谢你的帮助。

# c++ - 在标准 C++ 中复制 C++/CLI 多维数组模板类

> ID：13565050
> 
> 赞同：1
> 
> 时间：2012-11-26T12:41:02.560
> 
> 标签：c++

在 C++/CLI 中，您可以为多维数组指定以下内容。

```
array<int, 2>^ Foo = gcnew array<int, 2>(10);
Foo[0, 0] = 1;
Foo[1, 0] = 2;
// ... 
```

我试图通过一个名为 my_array 的模板类以标准 C++（允许 C++11）中最接近的语法复制上述内容。

例如

```
template <typename T, int rank = 1>
    class my_array { }; 
```

是否可以通过一些逗号运算符重载技巧来实现标准 C++ 下的 C++/CLI 语法，以及覆盖 my_array 的下标运算符？

理想情况下，我希望 my_array 以这种方式使用（相当于上面的例子）：

```
my_array<int, 2> Foo = // ... (ignore this part - already implemented)
Foo[0, 0] = 1;
Foo[1, 0] = 2;
// ... 
```

如果有人想知道，我正在为 GCC 创建一个 C++/CLI 等价物，目前该框架不支持多维数组。我希望以最接近 C++/CLI 的语法方式添加该功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:56:54.457

不，这在标准 C++ 中是不可能的。Indeed`operator[]`只能接受一个参数。

您可以使用以下解决方案之一实现类似的语法：

*   `operator()`有几个论点，比如`array(i, j)`
*   使用代理类作为参数，例如`array[makeIndex(i, j)]`
*   使用逗号运算符：`array[makeIndex(i), makeIndex(j)]`
*   或`array[IndexBegin, i, j]`。

另请参阅[这个](https://stackoverflow.com/questions/1936399/c-array-operator-with-multiple-arguments)和[那个](https://stackoverflow.com/questions/2396065/c-overloading-operator-comma-for-variadic-arguments)问题。

-- 优化说明 --

在您走逗号路线时，您将使用逗号运算符构建动态列表，并且数组将检查这些列表的长度。在一个简单的实现中，这些检查将是运行时和冗余的（当在循环中使用时）。

更好的选择：使用静态已知长度的列表（带有模板） Like `IndexBegin`is IndexList<0>, `IndexList<N> [comma] int`is `IndexList<N+1>`. 然后，如果您的数组也静态地知道它的维度，例如 2D 数组，`Array<2>`那么您可以在编译时检查 2D 数组是否只接受 2 个索引。

# objective-c - Demux HLS TS 流从视频中拆分音频 AAC

> ID：13565055
> 
> 赞同：2
> 
> 时间：2012-11-26T12:41:18.853
> 
> 标签：objective-c, ios, http-live-streaming

试图从视频中分离 HLS TS Stream 音频，音频是 AAC 格式。最重要的是拥有某种 AVAsset，我可以稍后对其进行操作，然后再将 Mux 返回到视频中。搜索了一段时间后，我找不到可靠的线索，有人可以给我一个受过教育的方向来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:26:59.723

您可以使用 ffmpeg/libav 库来解复用 ts。要将音频作为 AVAsset 加载回，可能需要从 URL 加载它，方法是临时写入磁盘或使用程序中的本地 http 服务器提供服务。

我认为你在处理音频流时可能会遇到一些麻烦，假设你想处理原始音频数据。这将需要对 AAC 进行解码、修改、重新编码以及与视频重新混合。使用 ffmpeg/libav 一切皆有可能，但这并不是那么容易。

# ios - 使用 Facebook SDK 3.1 for iOS 在应用程序相册上发布带有标题的图片，无论它是否存在

> ID：13565056
> 
> 赞同：0
> 
> 时间：2012-11-26T12:41:26.823
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

使用[toblerpwn 答案](https://stackoverflow.com/a/12486932/665823)我设法将图片发布到我想要的应用程序相册。但这仅在已经创建应用程序专辑时才有效（因为我需要指定专辑 ID）。

另一方面，如果应用程序相册不存在，requestForUploadPhoto 便捷方法会创建应用程序相册并发布图片。

那么有人可以帮我弄清楚如何合并这两个行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:40:00.473

感谢@deepak-lakshmanan，我设法解决了我的问题。

`/USER_ID/photos`这个想法是使用insted of发布到应用程序相册`/ALBUM_ID/photos`；这样，如果相册不存在，则会自动创建相册。

所以要遵循的步骤是：

*   获得发布权限
*   然后使用检索用户ID`/me`
*   最后将图片发布到应用相册`/USER_ID/photos`

这是我的代码，以防有人遇到这个问题，我正在使用适用于 iOS 的 Facebook SDK 3.1：

```
- (void)sendRequestFacebookPublishPermission {
    NSArray *permissions = [[NSArray alloc] initWithObjects:@"publish_stream", nil];
    if(!FBSession.activeSession.isOpen ) {
        [FBSession openActiveSessionWithPublishPermissions:permissions
                                           defaultAudience:FBSessionDefaultAudienceFriends
                                              allowLoginUI:YES
                                         completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                             [self requestFacebookPublishPermissionCompleted:session status:status error:error];
                                         }];
    } else if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
        [FBSession.activeSession reauthorizeWithPublishPermissions:permissions
                                                   defaultAudience:FBSessionDefaultAudienceFriends
                                                 completionHandler:^(FBSession *session, NSError *error) {
                                                     [self requestFacebookPublishPermissionCompleted:session status:FBSessionStateOpen error:error];
                                                 }];
    } else {
        [self sendRequesFacebooktUserInfo];
    }
}

- (void)requestFacebookPublishPermissionCompleted:(FBSession *)session
                                            status:(FBSessionState)status
                                             error:(NSError *)error {
    if (error) {
        DLog(@"%@", error.localizedDescription);
    } else {
        [self sendRequesFacebooktUserInfo];
    }
}

-(void)sendRequesFacebooktUserInfo {
    FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

     // output the results of the request
    FBRequestHandler handler = ^(FBRequestConnection *connection, id result, NSError *error) {
        [self requestFacebookUserInfoCompleted:connection result:result error:error];
    };

    // create the request object, using the fbid as the graph path
    FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession graphPath:@"me"];

    // add the request to the connection object
    [newConnection addRequest:request completionHandler:handler];

    // if there's an outstanding connection, just cancel
    [self.requestConnection cancel];

    // keep track of our connection, and start it
    self.requestConnection = newConnection;
    [newConnection start];
}

- (void)requestFacebookUserInfoCompleted:(FBRequestConnection *)connection
                                result:(id)result
                                 error:(NSError *)error {
    // not the completion we were looking for...
    if (self.requestConnection && connection != self.requestConnection) {
        return;
    }

    // clean this up, for posterity
    self.requestConnection = nil;

    if (error) {
        DLog(@"%@", error.localizedDescription);
    } else {
        FBGraphObject *dictionary = (FBGraphObject *)result;
        NSString* userId = (NSString *)[dictionary objectForKey:@"id"];
        [self sendRequestFacebookPublishOnAlbum:userId];
    }
}

- (void)sendRequestFacebookPublishOnAlbum:(NSString*)fbId {
    UIImage *imageToPost = /* get the image you need*/ ;

    /*
    //--- Facebook SDK convenience method : requestForUploadPhoto won't let me post image description ---//
    FBRequestConnection *newConnection = [FBRequestConnection startForUploadPhoto:screenshot completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        [self requestPostCardOnFacebookCompleted:connection result:result error:error];
    }];

    // if there's an outstanding connection, just cancel
    [self.requestConnection cancel];

    // keep track of our connection, and start it
    self.requestConnection = newConnection;
    //-----------------------------------------------------------------------------------------------------//
     */

    //--- http://stackoverflow.com/questions/12486852/facebook-ios-sdk-cannot-specify-an-album-using-fbrequests-requestforuploadphot ---//
    NSString *messagePublie = laCarte.message;
    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:
                                screenshot, @"picture",
                                messagePublie , @"name",
                                nil] ;

    FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

    FBRequestHandler handler = ^(FBRequestConnection *connection, id result, NSError *error) {
        [self requestFacebookPublishOnAlbumCompleted:connection result:result error:error];
    };

    NSString *graphPath = [NSString stringWithFormat:@"%@/photos",fbId];

    FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession graphPath:graphPath parameters:parameters HTTPMethod:@"POST"];
    [newConnection addRequest:request completionHandler:handler];

    // if there's an outstanding connection, just cancel
    [self.requestConnection cancel];

    // keep track of our connection, and start it
    self.requestConnection = newConnection;
    [newConnection start];
}

- (void)requestFacebookPublishOnAlbumCompleted:(FBRequestConnection *)connection result:(id)result error:(NSError *)error {
    if (self.requestConnection && connection != self.requestConnection) {
        return;
    }

    // clean this up, for posterity
    self.requestConnection = nil;

    if (error) {
        DLog(@"%@", error.localizedDescription);
    } else {
        DLog(@"%@", "Done");
    }
} 
```

# iphone - 如何在 JSON 中发布数组值

> ID：13565057
> 
> 赞同：4
> 
> 时间：2012-11-26T12:41:29.643
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我想在 JSON 中发布一个数组值。

下面是我的代码：

```
-(void)getConnection {

    NSArray *comment=[NSArray arrayWithObjects:@"aaa",@"bbb",@"ccc",@"hello,yes,tell", nil];

    NSURL *aurl=[NSURL URLWithString:@"http://sajalaya.com/taskblazer/staffend/form/iphonearraytest.php"];

    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:aurl cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    [request setHTTPMethod:@"POST"];

   NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:comment options:NSJSONWritingPrettyPrinted error:nil];
   NSString *new = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];

 // NSString *new = [comment JSONString];

 // NSArray *new=[comment jsonvalue];

    NSString *postString=[NSString stringWithFormat:@"tag=&comment=%@&total=%@",new,@"4"];

    NSLog(@"this is post string%@",postString);
    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

     [NSURLConnection connectionWithRequest:request delegate:self];       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:46:19.703

请使用以下可变数组操作`componentsJoinedByString`。

**例如**

```
NSMutableArray *commennts=[NSMutableArray arrayWithObjects:@"aaa",@"bbb",@"ccc",@"hello,yes,tell", nil];

NSString* strCommentsJoin = [commennts componentsJoinedByString:@","]; // Please use your separator 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:19:42.000

我们不知道你的问题，但我的回答简短而简单。您应该为此使用出色的开源库，即：[AFNetworking](https://github.com/AFNetworking/AFNetworking)，并执行如下请求：

```
_httpClient = [[AFHTTPClient alloc] initWithBaseURL:[[NSURL alloc] initWithString:@"http://sajalaya.com"]];

[_httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:comment options:NSJSONWritingPrettyPrinted error:nil];
NSString *new = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        new, @"comment",
                        @4, @"total,
                        nil];

NSMutableURLRequest *request = [self.httpClient requestWithMethod:@"POST"
                                                             path:@"/taskblazer/staffend/form/iphonearraytest.php"
                                                       parameters:params];
request.timeoutInterval = 8;

AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) { 
      // success
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
      // failure
}]; 
```

# node.js - Node.js 和 Passport 对象没有方法 validPassword

> ID：13565059
> 
> 赞同：17
> 
> 时间：2012-11-26T12:41:35.650
> 
> 标签：node.js, mongodb, authentication, passport.js

我正在使用 Node.js + Express + Passport 创建一个简单的身份验证（本地）

以及我到目前为止所达到的，当输入错误的用户名或密码时，用户被重定向到错误页面

但是当用户输入正确的用户名和密码时，我会收到此错误

```
node_modules\mongoose\lib\utils.js:435
    throw err;
          ^
TypeError: Object { _id: 50b347decfd61ab9e9e6768f,
username: 'saleh',
password: '123456' } has no method 'validPassword' 
```

我不确定那里有什么问题

app.js（我删除了不必要的代码）：

```
 var passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy;

  app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'authTest');

var authSchema = mongoose.Schema({ 
  username: 'string',
  password: 'string'
});

var User = db.model('users', authSchema);

passport.use(new LocalStrategy(
  function(username, password, done) {
    User.findOne({ username: username }, function (err, user) {
      if (err) { return done(err); }
      if (!user) {
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        return done(null, false, { message: 'Incorrect password.' });
      }
      return done(null, user);
    });
  }
));

passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  User.findById(id, function(err, user) {
    done(err, user);
  });
});

app.post('/login',
  passport.authenticate('local', { successRedirect: '/',
                                   failureRedirect: '/login/error',

                                  })
); 
```

* * *

现在在 routes/login.js

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'authTest');

var authSchema = mongoose.Schema({ 
    username: 'string',
    password: 'string'
});

var User = db.model('users', authSchema);

exports.index = function(req, res){
User.find(function (err, list) {
        res.render('login', { title: 'Usernames and Passwords', users: list,msg:""});
    });
}; 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T12:47:33.987

您正在使用

```
if (!user.validPassword(password)) {
    return done(null, false, { message: 'Incorrect password.' });
} 
```

但你还没有定义`validPassword`方法。将其附加到您的架构：

```
var authSchema = mongoose.Schema({ 
    username: 'string',
    password: 'string'
});
authSchema.methods.validPassword = function( pwd ) {
    // EXAMPLE CODE!
    return ( this.password === pwd );
}; 
```

**编辑**您还错误地定义了架构。它应该是：

```
var authSchema = mongoose.Schema({ 
    username: String,
    password: String
}); 
```

请注意，如果您知道我的意思，两者`username`都`password`应该是`String`类型对象，而不是字符串。`"string"`:)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-26T12:54:35.680

看起来您从 passportjs 网站复制了示例，Jared 没有提到如何实现它。

在护照 js github 页面上，他有另一个（更简单的）示例；他完全删除了 validPassword 方法（第 18 行）：

[例子](https://github.com/passport/express-4.x-local-example/blob/master/server.js)

```
if (user.password != password) { return cb(null, false); } 
```

这就是我基于它的应用程序（使用加密）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-31T13:56:49.287

也是一个菜鸟，我花了一整天的时间才弄清楚这个。我使用了 Jared 的另一个示例应用程序中的历史记录以及来自这里的人们的一些加密建议。

首先，我做了一个方法，生成一个盐（一个大的随机数，被字符串化），使用盐和用户密码创建一个哈希（在 nodejs 'crypto' 模块的帮助下），最后存储两个盐以及每次猫鼬保存新帐户之前的哈希值。

```
//make hash
userSchema.pre('save', function(next) {
    var user = this;
    if(!user.isModified('password')) return next();
    var rand = (Math.floor(Math.random() * 1000000000)).toString(36);
    var hash = crypto.createHash('md5').update(user.password + rand).digest("hex");
    user.password = hash;
    user.salt = rand;
    next();
}); 
```

对于验证，我只需输入输入的密码（在登录时）并尝试使用 salt 再次创建相同的哈希值。然后，我将存储的哈希值与新的哈希值进行比较，并相应地返回 true 或 false。

```
 // Password verification
    userSchema.methods.validPassword = function(password) {
      var testhash = crypto.createHash('md5').update(password + this.salt).digest("hex");
      if(testhash === this.password) {
        return true;
      } else {
        return false;
      }
    } 
```

# c++ - 在 mp4 容器中保存视频时 FPS 太高

> ID：13565062
> 
> 赞同：6
> 
> 时间：2012-11-26T12:41:41.390
> 
> 标签：c++, ffmpeg, mp4, libavcodec, libx264

当我从 avi 文件解码帧然后在 x264 中解码它们并保存到 mp4 文件时，输出文件的 fps 始终为 12,800。因此文件播放速度非常快。但是，当我将编码的 h264 帧保存为 avi 格式而不是 mp4 时，fps 就是我想要的 - 25。

可能是什么问题呢？

这是我在VS2010中编写的代码：

```
#include "stdafx.h"
#include "inttypes.h"

extern "C" {
#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"
#include "libavutil/avutil.h"
#include <libswscale/swscale.h>
#include <libavutil/opt.h>
#include <libswscale/swscale.h>
#include <libavutil/imgutils.h>
}

#include <iostream>
using namespace std;

int main(int argc, char* argv[])
{
   const char* inFileName = "C:\\000227_C1_GAME.avi";
   const char* outFileName = "c:\\test.avi";
   const char* outFileType = "avi";

   av_register_all();

   AVFormatContext* inContainer = NULL;   
   if(avformat_open_input(&inContainer, inFileName, NULL, NULL) < 0)   
      exit(1);

   if(avformat_find_stream_info(inContainer, NULL) < 0)
      exit(1);

   // Find video stream
   int videoStreamIndex = -1;
   for (unsigned int i = 0; i < inContainer->nb_streams; ++i)
   {
      if (inContainer->streams[i] && inContainer->streams[i]->codec &&
         inContainer->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
      {
         videoStreamIndex = i;
         break;
      }
   }
   if (videoStreamIndex == -1) exit(1);

   AVFormatContext* outContainer = NULL;
   if(avformat_alloc_output_context2(&outContainer, NULL, outFileType, outFileName) < 0)
      exit(1);

   // ---------------------------- 
   // Decoder
   // ---------------------------- 
   AVStream const *const inStream = inContainer->streams[videoStreamIndex];
   AVCodec *const decoder = avcodec_find_decoder(inStream->codec->codec_id);
   if(!decoder) 
      exit(1);
   if(avcodec_open2(inStream->codec, decoder, NULL) < 0) 
      exit(1);

   // ---------------------------- 
   // Encoder
   // ----------------------------             
   AVCodec *encoder = avcodec_find_encoder(AV_CODEC_ID_H264);
   if(!encoder) 
      exit(1);
   AVStream *outStream = avformat_new_stream(outContainer, encoder);      
   if(!outStream)
      exit(1);
   avcodec_get_context_defaults3(outStream->codec, encoder);   

   // Construct encoder
   if(outContainer->oformat->flags & AVFMT_GLOBALHEADER) 
      outStream->codec->flags |= CODEC_FLAG_GLOBAL_HEADER;   

   outStream->codec->coder_type = AVMEDIA_TYPE_VIDEO;
   outStream->codec->pix_fmt = AV_PIX_FMT_YUV420P;
   outStream->codec->width = inStream->codec->width;
   outStream->codec->height = inStream->codec->height;
   outStream->codec->codec_id = encoder->id;
   outStream->codec->bit_rate = 500000;
   //outStream->codec->rc_min_rate = 600000;
   //outStream->codec->rc_max_rate = 800000;

   outStream->codec->time_base.den = 25;
   outStream->codec->time_base.num = 1;
   outStream->codec->gop_size = 250; // Keyframe interval(=GOP length). Determines maximum distance distance between I-frames
   outStream->codec->keyint_min = 25; // minimum GOP size
   outStream->codec->max_b_frames = 3;//16; // maximum number of B-frames between non-B-frames
   outStream->codec->b_frame_strategy = 1; // decides the best number of B-frames to use. Default mode in x264.
   outStream->codec->scenechange_threshold = 40;
   outStream->codec->refs = 6; // abillity to reference frames other than the one immediately prior to the current frame. specify how many references can be used.
   outStream->codec->qmin = 0;//10;
   outStream->codec->qmax = 69;//51;
   outStream->codec->qcompress = 0.6;
   outStream->codec->max_qdiff = 4;
   outStream->codec->i_quant_factor = 1.4;//0.71;   

   outStream->codec->refs=1;//3;
   outStream->codec->chromaoffset = -2;
   outStream->codec->thread_count = 1;   
   outStream->codec->trellis = 1;
   outStream->codec->me_range = 16;
   outStream->codec->me_method = ME_HEX; //hex
   outStream->codec->flags2 |= CODEC_FLAG2_FAST;   
   outStream->codec->coder_type = 1;

   if(outStream->codec->codec_id == AV_CODEC_ID_H264)
   {
        av_opt_set(outStream->codec->priv_data, "preset", "slow", 0);
   }

   // Open encoder
   if(avcodec_open2(outStream->codec, encoder, NULL) < 0) 
      exit(1);

   // Open output container
   if(avio_open(&outContainer->pb, outFileName, AVIO_FLAG_WRITE) < 0)
      exit(1);

   //close_o

   AVFrame *decodedFrame = avcodec_alloc_frame();
   if(!decodedFrame) 
      exit(1);
   AVFrame *encodeFrame = avcodec_alloc_frame();
   if(!encodeFrame) 
      exit(1);
   encodeFrame->format = outStream->codec->pix_fmt;
   encodeFrame->width = outStream->codec->width;
   encodeFrame->height = outStream->codec->height;
   if(av_image_alloc(encodeFrame->data, encodeFrame->linesize, 
                 outStream->codec->width, outStream->codec->height, 
                 outStream->codec->pix_fmt, 1) < 0)
      exit(1);

   av_dump_format(inContainer, 0, inFileName,0);

   //Write header to ouput container
   avformat_write_header(outContainer, NULL);

   AVPacket decodePacket, encodedPacket;
   int got_frame, len;
   while(av_read_frame(inContainer, &decodePacket)>=0)
   {      
      if (decodePacket.stream_index == videoStreamIndex)
      {                  
         len = avcodec_decode_video2(inStream->codec, decodedFrame, &got_frame, &decodePacket);
         if(len < 0)
            exit(1);
         if(got_frame)
         {
            av_init_packet(&encodedPacket);
            encodedPacket.data = NULL;
            encodedPacket.size = 0;         
            if(avcodec_encode_video2(outStream->codec, &encodedPacket, decodedFrame, &got_frame) < 0)
               exit(1);
            if(got_frame)
            {
               if (outStream->codec->coded_frame->key_frame)
                  encodedPacket.flags |= AV_PKT_FLAG_KEY;

               encodedPacket.stream_index = outStream->index;

               if(av_interleaved_write_frame(outContainer, &encodedPacket) < 0)
                  exit(1);

               av_free_packet(&encodedPacket);
            }
         }
      }

      av_free_packet(&decodePacket);
   }
   av_write_trailer(outContainer);
   avio_close(outContainer->pb);

   avcodec_free_frame(&encodeFrame);
   avcodec_free_frame(&decodedFrame);

   avformat_free_context(outContainer);
   av_close_input_file(inContainer);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T15:19:58.383

问题出在数据包的 PTS 和 DTS 上。在将数据包写入输出之前（在`av_interleaved_write_frame`命令之前）像这样设置 PTS 和 DTS

```
if (encodedPacket.pts != AV_NOPTS_VALUE)
    encodedPacket.pts =  av_rescale_q(encodedPacket.pts, outStream->codec->time_base, outStream->time_base);
if (encodedPacket.dts != AV_NOPTS_VALUE)
    encodedPacket.dts = av_rescale_q(encodedPacket.dts, outStream->codec->time_base, outStream->time_base); 
```

# angularjs - 在 Angularjs 中使用 jQuery tableSorter 插件

> ID：13565064
> 
> 赞同：9
> 
> 时间：2012-11-26T12:41:53.143
> 
> 标签：angularjs, tablesorter

我正在尝试使用与 Angular 一起工作的 JQuery 表排序器插件。当前，如果您单击任何列以对表格的整个宽度和结构进行排序，则会更改并创建具有 ng-repeat 表达式的新行。

```
$(document).ready(function() {
    $("#check").tablesorter();
}); 
```

```
<table id="check" class="table table-bordered table-striped table-condensed table-hover tablesorter" cellspacing="1">
    <thead>
        <tr>        
            <th class="header">Product Code#</th>
            <th class="header">Item Description#</th>
            <th class="header">Unit Cost#</th>
        </tr>
    </thead>
    <tbody>
        <tr ng:repeat="i in itemresponse" >
            <td><a href="#/ItemSearch/{{i._ItemID}}" >{{i._ItemID}}</a></td>
            <td>{{i.PrimaryInformation._ShortDescription}}</td>
            <td>{{i.PrimaryInformation._UnitCost}}</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-22T06:59:27.443

你这样做是错的。

如果你想用 AngularJS 对表中的行进行排序，你应该使用`orderBy`过滤器。无需包含另一个框架。一旦你实现了这一飞跃，你可以在网上（或在 SO）上找到大量的样本。

例如看这个小提琴：http: [//jsfiddle.net/uRPSL/1/](http://jsfiddle.net/uRPSL/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-14T12:30:23.493

幸运的是，有一个名为[ng-table](http://ng-table.com/)的 Angular 模块。

# jquery - 如果已经动画则不要动画

> ID：13565067
> 
> 赞同：2
> 
> 时间：2012-11-26T12:41:58.907
> 
> 标签：jquery

快疯了。我有这个工作，然后在没有备份的情况下愚蠢地覆盖了我的代码，现在不记得我是怎么做到的！

我有一个下拉社交雪人：[http ://projects.jonhudsonweb.com/work](http://projects.jonhudsonweb.com/work)

但是，如果您反复在它上面运行鼠标，它会一次又一次地重复动画。这是我阻止这种情况的失败努力：

```
$('#social-yeti').not(':animated').hoverIntent(function(){
    $(this).delay(300).animate({top:"+=203"}, 1000)
    }, function(){
    $(this).delay(300).animate({top:"-=203"}, 1000)
    } 
); 
```

我确定这就是我以前的做法！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:46:17.597

尝试在动画之前放置**.stop()**方法：

```
$('#social-yeti').hover(function() {
    $(this).stop(true, true).animate({ top:"0" }, 1000);
}, function() {
    $(this).stop(true, true).animate({ top:"-203" }, 1000);
}); 
```

这基本上会在开始新动画之前清除元素的动画队列。

编辑 - - -

之前的问题是您在动画中间（*+=203*）向顶部当前值添加了一个值。我更改为动画到特定的“顶部”值，而不是添加/减去值以避免奇怪的跳跃。立即尝试代码。

第一个**.stop**参数表示是否清除队列，第二个表示应该跳转到当前动画的结尾。如果需要，请随时更改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:02:13.973

您需要设置一个布尔变量，让我们调用它`animating`，以`false.`

当鼠标悬停时，在开始动画之前，检查是否`animating`为假，如果是动画开始，则将其值更改为`true`.

否则，什么也不做。

动画完成后，（使用回调函数）将`animating`值设置回`false`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:45:04.630

使用[`.stop()`](http://api.jquery.com/stop/)：

```
$(this).stop().delay(300).animate({top:"+=203"}, 1000) 
```

# drupal - Drupal - 运行 cron 后分类学翻译的术语消失

> ID：13565068
> 
> 赞同：1
> 
> 时间：2012-11-26T12:41:58.940
> 
> 标签：drupal, translation, drupal-taxonomy

我在 Drupal 7 中遇到了一个与分类学翻译有关的奇怪问题。

我正在使用其术语已本地化的分类词汇。为了区分分类术语（因此术语名称都可以有不同的名称），我使用了一个名为“显示名称”的额外字段。由于我必须显示分类术语的名称，并且其中一些具有相同的名称（我已经遇到了问题），所以我选择使用这个额外的字段。我发现我只能通过字段设置中名为“启用翻译”的选项启用该字段的翻译。

然后，我使用名为“启用翻译”的选项翻译了这些术语。我发现它是一个批处理操作，当您启用它时会激活它，允许您通过Taxonomy提供的界面设置翻译术语。

但是，在更新网站后，我发现我使用此“显示名称”字段的条款消失了。而且我似乎找不到问题...我的功能似乎没有缺少某些东西，但是由于它是批处理操作，因此它只会在执行该批处理的环境中有效，对吗？

也许这已经发生在其他人身上，但是经过彻底的研究，我没有发现任何有价值的信息。感谢您提供的任何帮助！

# .net - 解析相对 URI

> ID：13565069
> 
> 赞同：29
> 
> 时间：2012-11-26T12:42:00.783
> 
> 标签：.net, uri

我想从相对 URI 中提取查询字符串和片段，即没有任何方案或主机信息的 URI。

有没有比将其转换为带有假主机名的绝对 URI 更优雅的方法呢？

```
var relativeUri = "/dir1/dir2/file?a=b&c=d#fragment";
var uri = new Uri(new Uri("http://example.com"), relativeUri);
var path = Uri.UnescapeDataString(String.Concat(uri.Segments));
var query = uri.Query;
var fragment = uri.Fragment;
// path = "/dir1/dir2/file", query = "?a=b&c=d", fragment = "#fragment" 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T13:40:13.857

尽管您可以创建`Uri`没有主机部分的 a，但它的大多数属性随后将引发 InvalidOperationException（*“相对 URI 不支持此操作”*），因为这些属性依赖于绝对 Uri。

[`HttpUtility.ParseQueryString()`](http://msdn.microsoft.com/en-us/library/ms150046(v=vs.100).aspx)确实在这里没有帮助，因为它仅对 Uri 的查询部分进行操作，而您无法获得该部分，因为您没有绝对的 Uri。

所以虽然它看起来很老套，但我认为`new Uri(baseUri, relativeUri)`构造函数正是你想要的。我似乎找不到更好或更清洁的方法来完成同样的任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-05T20:09:23.010

我自己遇到了这个问题，我发现`HttpUtility.ParseQueryString`实际上只是在寻找字符串和“？”之后的任何内容。

所以我必须在两种情况下（相对和绝对）都使用它，我发现以下似乎工作得很好

```
HttpUtility.ParseQueryString(url.Split('?').Last()) 
```

# actionscript-3 - 在 OSMF 中使用 NetStream 和 MediaPlayerSprite

> ID：13565071
> 
> 赞同：0
> 
> 时间：2012-11-26T12:42:05.203
> 
> 标签：actionscript-3, flash, flash-builder, osmf

也许我正在尝试的事情是不可能的或没有意义，但这是一个要求。

事情很简单。

我使用 OSMF 编写视频播放器。如果我创建一个 MediaPlayerSprite 并使用 URLResource 设置它的资源，一切正常。我可以播放任何受支持的 http 或 rtmp 流媒体视频（flv、mp4、mpeg 等）。

但是现在我需要使用 NetStream 类来使用它的一些方法。

我使用 NetStream 类的时间是使用 flash Video 对象流式传输视频，但现在我想将它与 OSMF 一起使用。

所以我的问题是，是否可以使用 MediaPlayerSprite（以及所有 OSMF 功能），但也可以使用 NetStream 方法（特别是 attachNetStream）来控制在 MediaPlayerSprite 对象中播放的视频？

是的，就是这样...使用 attachNetStream 和 MediaPlayerSprite 来处理视频。

为什么？我正在使用客户端提供的 NetStream 的子类，该子类可与 flash Video 对象一起使用，当然不能与 MediaPlayerSprite 一起使用，如果我使用任何客户端的类方法，显然我会崩溃。

那么你们将如何实现呢？扩展任何课程？修改 OSMF 构建？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:10:00.363

终于开工了。我发布分析器以防有人需要这样做。

我假设您将使用 MediaPlayer 或 MediaPlayerSprite 来加载视频。所以我们在舞台上创建我们的视频对象，然后使用 VideoElement 加载数据。

```
var mps:MediaPlayerSprite = new MediaPlayerSrpite();
var resource:URLResource = new URLResource("http://example.com");
mps.media = new VideoElement(resource, new NetLoader()); 
```

但是为了在 OSMF fwk 中使用您的自定义 NetStream 和 NetConnection，您显然需要重写 NetLoader 类的 createNetStream 方法和 NetConnectionFactoryBase 的 create 方法。

*   NetConnectionFactoryBase 将创建 NetConnection 对象并将其作为参数传递给 createNetStream。
*   NetLoader 将创建 NetStream 对象并将其返回给播放器。

然后您可以使用任何 MediaPlayer 事件或方法来控制播放，例如

```
mps.mediaPlayer.play(); 
```

# c# - 如何在 devexpress 中将 PanelControl 拖放到 XtraForm 上的另一个 PanelControl

> ID：13565072
> 
> 赞同：2
> 
> 时间：2012-11-26T12:42:09.720
> 
> 标签：c#, .net, drag-and-drop, devexpress

我使用 devexpress 12.1 在 c#(Visual Studio 2010) 中有我的应用程序。我有一个包含两个面板的 XtraForm。在第一个 ControlPanel (Panel1) 中有一些组件，如编辑文本、复选框、标签等，另一个 ControlPanel(Panel2) 没有任何组件。

我必须将 Panel1 拖放到 Panel2 中。我已经在 c# 中创建了一些示例，用于使用拖放、dragenter、鼠标悬停事件将面板拖放到面板，但这不适用于 XtraForm 上的 DevExpress。

怎么做..请给我一些建议..

# html - 解决 webkits 对百分比值的误解

> ID：13565073
> 
> 赞同：0
> 
> 时间：2012-11-26T12:42:11.030
> 
> 标签：html, css, webkit, percentage

在基于 WebKit 的浏览器（如 Chrome 或 Safari）中查看[此 jsFiddle](http://jsfiddle.net/4HvZN/1/)，然后将其与在非基于 webkit 的浏览器（如 Firefox 或 Internet Explorer）中查看时看到的内容进行比较。

你会发现它们显然不一样。下面是左边的 Chrome 和右边的 Firefox：![图片比较了非 webkit 和 webkits 对百分比距离的解释。](../Images/f615ab6e5da4b0f1536e4d5ed201d9dd.png)

原因是 WebKit 对闲置的小 CSS 标记的解释与其他浏览器的解释不同：

```
span.upArrow.menu{
    margin: 36.1% 0 0 12.5%;
} 
```

更准确地说：WebKit 将 36.1% 解释为不是页面宽度的 36.1%，而是元素宽度或高度的 36.1%。

首先使用百分比的原因是因为站点根据屏幕的比例上下缩放。这段代码用于菜单。因此，如果您在 Android 或 iPhone 上使用默认浏览器，则该网站现在看起来不错。但是如果用户使用 Opera 或 Firefox，在 Windows 手机上的内容中间会出现一个巨大的丑陋三角形。

所以我的问题就变成了。有没有办法解决 WebKit 中的这个错误？

如果可能的话，可以为 webkit 和非 webkit 浏览器编写单独的标记。但也许更好的是找到在这两种情况下都有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:48:14.647

看看[这个叉子](http://jsfiddle.net/cherryflavourpez/z79b9/)。

我稍微改变了方法，将菜单项设置为`position: relative`并定位您的箭头，而不是添加边距来实现布局。

这是更新的 CSS（从选择器中删除附加的`div`和`span`，它们不是必需的）：

```
.menuButton{
    display: inline-block;
    width: 32%;
    padding: 2% 0;
    position: relative;
}

.upArrow.menu{
    bottom: 0;
    left: 50%;
    margin-left: -15px;   
} 
```

负边距与箭头的边框宽度相匹配，确保无论您的布局发生什么其他情况，它都始终位于准确的中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:47:43.767

发生这种情况是因为箭头跨度没有正确的位置。将跨度位置设为`absolute`，将 menuButton 设为`position:relative`。

```
div.menuButton{
    display: inline-block;
    width: 32%;
    padding: 2% 0;
    position:relative;
}
span.upArrow.menu{
    position:absolute;
    bottom:0; left:45%
} 
```

**[演示](http://jsfiddle.net/4HvZN/3/)**

# c# - Datagridview中的锚定复选框

> ID：13565075
> 
> 赞同：2
> 
> 时间：2012-11-26T12:42:29.353
> 
> 标签：c#, winforms, datagridview

我正在创建一个基于 winform 的桌面应用程序，并`Datagridview`用于填充数据。

我`checkbox`在标题列之一中使用。表格很安静，可以放入屏幕，并且正在使用滚动条在水平和垂直方向上移动。

`checkbox`需要随着滚动条的移动而移动。然而，问题是它仍然是静态的。

知道如何锚定它，以便当滚动条移动时，复选框会相应移动。![在此处输入图像描述](../Images/e37bee6898693ad90de160ede4ad3cbc.png)

谢谢

编辑 ：

自动生成的设计器代码：

```
 this.checkheader.AutoSize = true;
            this.checkheader.BackColor = System.Drawing.Color.White;
            this.checkheader.FlatAppearance.BorderColor = System.Drawing.Color.White;
            this.checkheader.Location = new System.Drawing.Point(49, 96);
            this.checkheader.Name = "checkheader";
            this.checkheader.Size = new System.Drawing.Size(15, 14);
            this.checkheader.TabIndex = 21;
            this.checkheader.UseVisualStyleBackColor = false;
            this.checkheader.CheckedChanged += new System.EventHandler(this.checkboxHeader_CheckedChanged);
        // 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T12:20:15.213

您可以使用 datagridview 'scroll'-event 来执行以下操作：

```
private void dataGridView1_Scroll(object sender, ScrollEventArgs e)
    {
        if (e.ScrollOrientation.Equals(ScrollOrientation.HorizontalScroll))
        {
            checkBox1.Location = new Point(checkBox1.Location.X - (e.NewValue - e.OldValue), checkBox1.Location.Y);
        }
        if (checkBox1.Location.X < dataGridView1.Location.X + 40)
        {
            checkBox1.Visible = false;
        }
        else
        {
            checkBox1.Visible = true;
        }
    } 
```

迟到总比不到好 ？

# android - 不再需要 mypackage.app (pid 491): hidden #16

> ID：13565076
> 
> 赞同：1
> 
> 时间：2012-11-26T12:42:29.517
> 
> 标签：android, process

我陷入了一个奇怪的问题。用户重新启动设备后，我的应用程序需要自行启动。为此，我注册了 action.BOOT_RECEIVER 并实现了 BroadcastReceiver 来完成必要的功能。我观察到，在“I/ActivityManager(323)：不再需要 mypackage.app (pid 491): hidden #16”之前，一切似乎都很好。

我相信android不会启动两个具有不同进程ID的应用程序。

当我启动应用程序时，应用程序以新的 ProcessId 开始，这会导致对象重置，而不是静态变量。我想知道为什么即使在进程终止后静态变量仍然保留它们的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T06:13:01.873

已解决，不知道是什么原因。现在已修复。

# mysql - 触发器未按预期工作

> ID：13565077
> 
> 赞同：1
> 
> 时间：2012-11-26T12:42:34.073
> 
> 标签：mysql, triggers

我尝试在 mysql 数据库上执行触发器。命令执行成功，但触发器不起作用。

```
DELIMITER #

CREATE TRIGGER generate_coupon AFTER INSERT ON order
FOR EACH ROW
BEGIN

DECLARE userid, couponvalue INT;
DECLARE couponcode VARCHAR;
SELECT idUser INTO userid FROM indication WHERE email = NEW.email;
SET couponvalue = 20;
SET couponcode = 'abc123';

INSERT INTO coupon(idUser,idOrder,couponvalue,couponcode) values(userid, NEW.id, couponvalue, couponcode);

END# 

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:52:27.880

我怀疑您的问题是由变量之间的冲突`couponvalue`以及`couponcode`表中的同名列引起的`coupon`。如[Local Variable Scope and Resolution](http://dev.mysql.com/doc/en/local-variable-scope.html)中所述：

> 局部变量不应与表列同名。

您可以将触发器简化为以下内容，这样可以完全避免此问题：

```
CREATE TRIGGER generate_coupon AFTER INSERT ON order FOR EACH ROW
  INSERT INTO coupon
    (idUser, idOrder, couponvalue, couponcode)
  SELECT idUser, NEW.id, 20, 'abc123'
  FROM   indication
  WHERE  email = NEW.email
; 
```

# java - Cache 或 MultiMap 用于基于天的缓存到期？

> ID：13565079
> 
> 赞同：1
> 
> 时间：2012-11-26T12:42:37.357
> 
> 标签：java, caching, guava, multimap

背景：我正在为一个订购系统开发一个分析系统。每天大约有 100,000 个订单，并且需要在最后 N（例如 100）天的几个月内运行分析。相关数据适合内存。N 天后，所有订单都从内存缓存中逐出，过去一整天都被逐出。可以创建或更新订单。

1.  传统方法将使用`ConcurrentHashMap<Date, Queue<Order>>`. 每天，表示过去 N 天以上日期的键的值将被删除。但是，当然，使用 Guava 的全部目的是避免这种情况。编辑：更改`Map`为`ConcurrentHashMap`，请参阅问题的结尾以了解基本原理。

2.  使用 Guava 集合，a`MultiMap <Date, Order>`会更简单。驱逐是类似的，明确实施。

3.  虽然`Cache`实现看起来很吸引人（毕竟，我正在实现缓存），但我不确定驱逐选项。驱逐每天只发生一次，最好从缓存外部启动，我不希望缓存必须检查订单的年龄。我什至不确定缓存是否会使用 MultiMap，我认为在这种情况下它是一个合适的数据结构。

因此，我的问题是：是否可以使用 Cache 使用并公开 MultiMap 的语义并允许从外部控制驱逐，特别是使用我需要的规则（“删除所有早于 N 天的订单”）？

作为一个重要的说明，我对 a 不感兴趣，`LoadingCache`但我确实需要批量加载（如果需要重新启动应用程序，则必须从数据库中填充缓存以及最后 N 天的订单）。

编辑：忘了提到地图*需要是并发*的，因为订单进来时，它们会针对同一客户或位置等的先前订单进行实时评估。

EDIT2：刚刚偶然发现[Guava 问题 135](http://code.google.com/p/guava-libraries/issues/detail?id=135)。看起来 MultiMap 不是并发的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:06:44.163

我不会在这里使用 a`Cache`或 a `Multimap`。虽然我喜欢并使用它们，但这里并没有什么好处。

*   您想手动逐出您的条目，因此`Cache`这里并没有真正使用 的功能。
*   您正在考虑`ConcurrentHashMap<Date, Queue<Order>>`，这在某种意义上比 a 更强大`Multimap<Date, Order>`。

`Cache`如果我考虑不同的驱逐标准并且我觉得随时丢失它的任何条目，我会使用¹就可以了。

您可能会发现您需要一个`ConcurrentMap<Date, Dequeue<Order>>`或可能`ConcurrentMap<Date, YouOwnQueueFastSearchList<Order>>`或其他什么。这可能可以由 以某种方式管理`Multimap`，但恕我直言，它变得更复杂而不是更简单。

`Cache`我会问自己“使用或在这里我能得到什么`Multimap`？”。对我来说，它看起来像是`ConcurrentMap`关于你需要的一切的普通旧优惠。

* * *

¹我绝不是在暗示 Guava 会发生这种情况。相反，没有驱逐原因（容量，到期，...）它就像一个`ConcurrentMap`. 只是你描述的感觉更像是 a`Map`而不是 a `Cache`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:51:06.090

恕我直言，最简单的做法是在订单记录中包含订单日期。（我希望它已经是一个字段）由于您每天只需要清理一次缓存，因此它不必非常有效，只需合理及时即可。

例如

```
public class Main {
    static class Order {
        final long time;

        Order(long time) {
            this.time = time;
        }

        public long getTime() {
            return time;
        }
    }

    final Map<String, Order> orders = new LinkedHashMap<String, Order>();

    public void expireOrdersOlderThan(long dateTime) {
        for (Iterator<Order> iter = orders.values().iterator(); iter.hasNext(); )
            if (iter.next().getTime() < dateTime)
                iter.remove();
    }

    private void generateOrders() {
        for (int i = 0; i < 120000; i++) {
            orders.put("order-" + i, new Order(i));
        }
    }

    public static void main(String... args) {
        for (int t = 0; t < 3; t++) {
            Main m = new Main();
            m.generateOrders();
            long start = System.nanoTime();
            for (int i = 0; i < 20; i++)
                m.expireOrdersOlderThan(i * 1000);
            long time = System.nanoTime() - start;
            System.out.printf("Took an average of %.3f ms to expire 1%% of entries%n", time / 20 / 1e6);
        }
    }
} 
```

印刷

```
Took an average of 9.164 ms to expire 1% of entries
Took an average of 8.345 ms to expire 1% of entries
Took an average of 7.812 ms to expire 1% of entries 
```

对于 100,000 个订单，我预计这需要大约 10 毫秒，这在半夜的安静时段不会发生太多。

顺便说一句：如果您的 OrderIds 按时间排序，您可以提高效率。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:06:50.567

您是否考虑过使用某种排序列表？它将允许您提取条目，直到您找到一个足够新鲜的条目。当然，这假设这是您的主要功能。如果您最需要的是使用哈希图进行 O(1) 访问，那么我的回答不适用。

# gradle - 如何强制 gradle 重新下载依赖项？

> ID：13565082
> 
> 赞同：890
> 
> 时间：2012-11-26T12:42:41.970
> 
> 标签：gradle

如何告诉 gradle 从存储库重新下载依赖项？

* * *

## 回答 #1

> 赞同：983
> 
> 时间：2012-11-26T15:21:12.527

通常，您可以使用命令行选项[--refresh-dependencies 刷新](https://docs.gradle.org/current/userguide/dependency_management.html#sec:refreshing-dependencies)缓存中的依赖项。您也可以删除`~/.gradle/caches`. 在下一次构建中，Gradle 会尝试再次下载它们。

您的具体用例是什么？您使用动态依赖版本还是 SNAPSHOT 版本？

* * *

在 Unix 系统上，您可以使用以下命令删除 Gradle 下载的所有现有工件（工件和元数据）：

```
rm -rf $HOME/.gradle/caches/ 
```

* * *

请注意， --refresh-dependencies 不会总是重新下载每个工件；如果它们与存储库中存在的副本匹配，它将使用现有副本。从 Gradle 用户指南中，[刷新依赖](https://docs.gradle.org/current/userguide/dependency_management.html#sec:refreshing-dependencies)项：

> --refresh-dependencies 选项告诉 Gradle 忽略已解析模块和工件的所有缓存条目。将对所有配置的存储库执行新的解析，重新计算动态版本，刷新模块并下载工件。但是，在可能的情况下，Gradle 将在再次下载之前检查先前下载的工件是否有效。这是通过将存储库中发布的 SHA1 值与现有下载工件的 SHA1 值进行比较来完成的。
> 
> [...]
> 
> 认为使用 --refresh-dependencies 会强制下载依赖项是一种常见的误解。情况并非如此：Gradle 只会执行刷新动态依赖项严格要求的操作。这可能涉及下载新的列表或元数据文件，甚至是工件，但如果没有任何改变，影响是最小的。

* * *

## 回答 #2

> 赞同：883
> 
> 时间：2015-08-05T12:48:13.443

如果您使用的是最新版本的 Gradle，则可以使用 --refresh-dependencies 选项。

```
./gradlew build --refresh-dependencies 
```

你可以参考[Gradle 手册](https://docs.gradle.org/current/userguide/dependency_management.html)。

> **--refresh-dependencies 选项告诉 Gradle 忽略已解析模块和工件的所有缓存条目。**将对所有配置的存储库执行新的解析，重新计算动态版本，刷新模块并下载工件。

* * *

## 回答 #3

> 赞同：343
> 
> 时间：2013-02-11T01:49:21.727

您可以通过将依赖项标记为“正在更改”来告诉 Gradle 重新下载构建脚本中的一些依赖项。Gradle 将每 24 小时检查一次更新，但这可以使用 resolutionStrategy DSL 进行配置。我发现将它用于 SNAPSHOT 或 NIGHTLY 构建很有用。

```
configurations.all {
    // Check for updates every build
    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
} 
```

扩展：

```
dependencies {
    implementation group: "group", name: "projectA", version: "1.1-SNAPSHOT", changing: true
} 
```

浓缩：

```
implementation('group:projectA:1.1-SNAPSHOT') { changing = true } 
```

我在这个[论坛帖子](http://forums.gradle.org/gradle/topics/how_to_get_gradle_to_download_newer_snapshots_to_gradle_cache_when_using_an_ivy_repository)中找到了这个解决方案。

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2016-10-21T18:15:52.393

**对于 MAC**

`./gradlew build --refresh-dependencies`

**对于 Windows**

`gradlew build --refresh-dependencies`

也可以试试`gradlew assembleDevelopmentDebug --refresh-dependencies`

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2016-07-11T10:03:04.823

**对于 Windows** ...为了使 gradle**重新下载*特定*的依赖**项：

1.  从以下目录中删除要重新下载的依赖项：

    ```
    C:\Users\%USERNAME%\.gradle\caches\modules-2\files-2.1 
    ```

2.  删除路径中的所有*元数据目录：*

    ```
    C:\Users\%USERNAME%\.gradle\caches\modules-2\metadata-* 
    ```

3.  在项目的根目录中运行`gradle build`（或者如果使用 gradle 包装器）。`gradlew build`

*注意：上面文件路径中的数字对您来说可能不同。*

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2019-04-02T07:33:11.700

上述解决方案都不适合我。

如果您使用 IntelliJ，那么为我解决的只是刷新所有 Gradle 项目：

[![在此处输入图像描述](../Images/ebbd046a64f3885d6a07f35de536d96b.png)](https://i.stack.imgur.com/CHVVJ.png)

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2016-08-18T13:25:27.803

可以删除带有缓存 jar 的文件夹。

就我而言，**在 Mac 上**，该库被缓存在路径中：

`/Users/MY_NAME/.gradle/caches/modules-2/files-2.1/cached-library-to-remove`

我删除了缓存的库文件夹（上例中的“cached-library-to-remove”），删除了我的项目的构建文件夹并再次编译。然后下载了新库。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2016-11-22T18:12:17.660

您可以删除特定组或工件 ID 的缓存，而不是像这里的一些答案建议的那样删除整个 gradle 缓存。我将以下功能添加到我的`.bash_profile`：

```
deleteGradleCache() {
  local id=$1
  if [ -z "$id" ]; then
    echo "Please provide an group or artifact id to delete"
    return 1
  fi
  find ~/.gradle/caches/ -type d -name "$id" -prune -exec rm -rf "{}" \; -print
} 
```

用法：

```
$ deleteGradleCache com.android.support 
```

然后，在下一次构建或重新同步时，gradle 将重新下载依赖项。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2020-04-01T11:41:29.443

要刷新缓存的“发布”版本，唯一的选择是清除本地缓存。

```
rm -rf $HOME/.gradle/caches/ 
```

要刷新缓存的“快照”版本，您可以：

```
./gradlew build --refresh-dependencies 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2018-10-03T10:32:28.717

**对于那些想知道在哪里运行 gradle 命令的人：**

1.  打开安卓工作室
2.  点击终端（你会在 Android Studio 的基础上找到它）
3.  命令工具将打开
4.  输入你的命令`gradlew build --refresh-dependencies`

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2018-08-05T05:31:01.230

有两种方法可以做到这一点：

1.  使用命令行选项刷新依赖关系。
2.  您可以删除本地缓存，其中 artefasts 是 Gradle 的缓存并触发构建

使用**--refresh-dependencies**选项：

```
./gradlew build --refresh-dependencies 
```

**简短说明**--refresh-dependencies 选项告诉 Gradle 忽略已解析模块和工件的所有缓存条目。

**长解释**

*   使用 –refresh-dependencies' Gradle 将始终访问远程服务器以检查更新的工件：但是，Gradle 将避免下载缓存中已存在相同文件的文件。
    *   First Gradle 将发出 HEAD 请求并检查服务器是否报告文件自上次以来未更改（如果“内容长度”和“上次修改”未更改）。在这种情况下，您将收到消息：“缓存的资源是最新的 (lastModified: {})。”
    *   如果可能，Next Gradle 将确定远程校验和（从 HEAD 请求或通过下载“.sha1”文件）。如果此校验和与已下载的另一个文件（从任何存储库）匹配，则 Gradle 将简单地将文件复制到缓存，而不是重新下载。在这种情况下，您将收到消息：““找到具有匹配校验和的本地可用资源：[{}，{}]”。

使用删除：删除缓存时

```
rm -rf $HOME/.gradle/caches/ 
```

您只需清理所有缓存的 jar 和 sha1 总和，Gradle 处于您的机器上没有工件并且必须下载所有内容的情况。是的，它将第一次 100% 工作，但是当另一个 SNAPSHOT 被释放并且它是您的依赖关系树的一部分时，您将再次面临刷新或清除缓存的选择。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2019-05-30T19:55:02.623

对于 Android Studio 3.4.1

只需打开 gradle 选项卡（可以位于右侧）并右键单击列表中的父级（应称为“Android”），然后选择“刷新依赖项”。

这应该可以解决您的问题。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2017-11-26T20:20:56.867

这对我有用。通过取消选中 File>Settings>Gradle>Offline Work 中的按钮，确保 Gradle 未设置为脱机。

将此添加到您的 build.gradle 的顶层，很高兴拥有上述依赖项

```
configurations.all {
    resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
} 
```

我确保我的依赖项是这样编写的：

```
implementation('com.github.juanmendez:ThatDependency:ThatBranch-SNAPSHOT') {
    changing = true
} 
```

此后，我在 Android Studio 中打开 Gradle 面板并单击蓝色圆圈箭头按钮。我总能看到我的更新得到一个新的副本。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2020-09-28T17:35:53.340

似乎`change`更改`isChange`为 gradle 版本 6.3、kotlin 版本 1.3.70、Groovy 2.5.10

**工作**配置是

```
implementation("com.sample:commons:1.0.0-SNAPSHOT") {
        isChanging = true
    } 
```

此外，运行此命令以获取最新的

```
./gradlew assemble  --refresh-dependencies 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2021-10-15T12:29:07.970

如果您使用的是 Intellij，您可以右键单击根项目，然后选择刷新 gradle 依赖项。

[![在此处输入图像描述](../Images/2407a3a5d0921185832e082a902c1fa7.png)](https://i.stack.imgur.com/5c3yN.png)

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2018-11-12T07:15:36.693

Mb 我来晚了，但是我的解决方案是针对单个存储库的。我认为删除 ~/.gradle/* 是矫枉过正。我遇到的问题是我正在删除源所在的目录，而 gradle 正在获取另一个版本，而不是来自 nexus。为避免这种情况，我运行下一个：

```
~/.gradle$ find . -type d -name 'group.plugins.awssdk'
./caches/modules-2/files-2.1/group.plugins.awssdk
./caches/modules-2/metadata-2.23/descriptors/group.plugins.awssdk

~/.gradle$ rm -r ./caches/modules-2/files-2.1/group.plugins.awssdk   ./caches/modules-2/metadata-2.23/descriptors/group.plugins.awssdk 
```

之后，gradle 正在从 nexus 中拖动文件。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2020-02-20T17:05:44.273

就我而言，上述方法均无效，我所做的是：

*   在`build.gradle`中，评论与我拥有的未解决导入相关的依赖项
*   点击“立即同步”
*   取消评论我刚刚评论的内容
*   再次单击“立即同步”

然后我的进口再次得到妥善解决。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-02-28T08:59:29.420

删除所有缓存会再次下载所有依赖项。所以这需要很长时间，而且很无聊，再次等待重新下载所有依赖项。

我怎么能通过以下方式解决这个问题。

只需删除需要刷新的组。

例如：如果我们想刷新**com.user.test**组

```
rm -fr ~/.gradle/caches/modules-2/files-2.1/com.user.test/ 
```

然后从 build.gradle 中删除依赖项并重新添加它。然后它将刷新我们想要的依赖项。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-20T06:22:33.893

如果您使用的是 eclipse 并且想要强制 eclipse 重新加载依赖项，您可以尝试以下命令

```
gradlew clean cleaneclipse build eclipse --refresh-dependencies 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-22T03:20:52.813

你可以这样做

```
https://marschall.github.io/2017/04/17/disabling-gradle-cache.html 
```

引用[禁用 Gradle 构建缓存](https://marschall.github.io/2017/04/17/disabling-gradle-cache.html)

> 当您经常使用 Gradle 构建 > 大型项目时，Gradle 构建缓存可能是一件很棒的事情。然而，当只是偶尔构建开源项目时，它会很快变大。
> 
> 要禁用 Gradle 构建缓存，请将以下行添加到`~/.gradle/gradle.properties`
> 
> ```
> org.gradle.caching=false 
> ```
> 
> 您可以使用清理现有缓存
> 
> ```
> rm -rf $HOME/.gradle/caches/
> rm -rf $HOME/.gradle/wrapper/ 
> ```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-07-21T08:32:13.090

我认为 gradle 2.14.1 解决了这个问题。接受的答案是正确的，但在 gradle 中存在一个带有 –refresh-dependencies 的错误。2.14.1 修复了这个问题。

见[https://discuss.gradle.org/t/refresh-dependencies-should-use-cachesharingmodulesfor-0s/556](https://discuss.gradle.org/t/refresh-dependencies-should-use-cachechangingmodulesfor-0s/556)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-07T10:35:17.617

只有手动删除缓存文件夹中的特定依赖项才能工作...由企业仓库中的同事构建的工件。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-06-20T13:59:43.513

在大多数情况下，只需简单地重新构建项目就可以了。有时您必须`./gradlew build --refresh-dependencies`按照已经提到的几个答案运行（需要很长时间，具体取决于您有多少依赖项）。然而，有时这些都不起作用：依赖项不会得到更新。然后，您可以这样做：

1.  从您的 gradle 文件中删除依赖项
2.  运行/调试您的项目并等待它失败（有`NonExistingClass`原因）
3.  点击“构建项目”并等待它成功完成
4.  再次运行/调试

这很荒谬，看起来很疯狂，但我实际上每天都使用这个程序，仅仅是因为我需要的依赖项可以更新数十次，而且没有任何适当的解决方案会产生任何效果。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2017-07-12T18:56:17.983

删除此目录：

```
C:\Users\[username]\.gradle 
```

* * *

## 回答 #25

> 赞同：-7
> 
> 时间：2017-06-15T05:10:08.610

您需要重新下载它，这样您就可以手动下载并替换损坏的文件，然后再次同步您的项目。转到此位置 C:\users[username].gradle\wrapper\dist\gradle3.3-all\55gk2rcmfc6p2dg9u9ohc3hw9\gradle-3.3-all.zip 此处删除 gradle3.3allzip 并通过从该站点重新下载来替换它 [https:/ /services.gradle.org/distributions/](https://services.gradle.org/distributions/) 找到相同的文件并将其下载并粘贴到该位置然后同步您的项目。希望它也适合你。

# c# - MVVM Light Toolkit 的文档/示例？

> ID：13565085
> 
> 赞同：1
> 
> 时间：2012-11-26T12:42:58.147
> 
> 标签：c#, .net, wpf, mvvm, mvvm-light

我要创建一个小型 Windows 应用程序（没有 silverlight，没有 windows phone，没有 windows 8 应用程序，...），因为我有一些额外的应用程序，所以我决定花时间学习 MVVM 模式。

我读过它，我理解了主要部分。

我找到了 MVVM Light Toolkit，但我发现很难开始。除了我找到类名的这个[页面](http://www.galasoft.ch/mvvm/)，我找不到任何关于这个的文档，某种“入门”部分。

我试图从那个开始，但我找不到：

*   是什么`ViewModelLocator`，我应该如何使用它
*   ViewModel 的一个简单示例，扩展了`ViewModelBase`（例如，我不知道是否应该调用`RaisePropertyChanging`, `RaisePropertyChanged`，如果我应该只输入属性名称，...
*   关于如何使用的一些示例`Messenger`（我应该在代码的哪一部分注册，条件示例）

在网上搜索后，要么我找到了 windows phone 的信息（带有`Page`，...），要么是多年前的话题。

那么你知道我在哪里可以找到这种信息吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:14:43.853

要回答您的问题：

ViewModelLocator 是一个类，它允许您通过属性公开各种模型，并执行所需的任何初始化。然后，您可以方便地将页面或控件的 DataContext 绑定到 ViewModel。

```
DataContext="{Binding Main, Source={StaticResource Locator}}" 
```

[这是一个类似的问题](https://stackoverflow.com/questions/5462040/what-is-a-viewmodellocator-and-what-are-its-pros-cons-compared-to-datatemplates)

调用 RaisePropertyChanged([name-of-property-here]) 来更新您的绑定。

使用 Messenger 作为一种在应用程序状态发生变化时轻松通知您的页面的方式，在发生错误时显示错误消息就是一个很好的例子。要使用 Messenger，您可以在 OnNavigatedTo 中注册

```
Messenger.Default.Register<YourCustomMessage>(this, OnYourCustomMessage); 
```

并且不要忘记在 OnNavigatedFrom 中取消注册

```
Messenger.Default.Unregister<YourCustomMessage>(this, OnYourCustomMessage); 
```

# ios - 如何使用 InAppSettingsKit 委托重新配置更改的应用程序设置

> ID：13565086
> 
> 赞同：1
> 
> 时间：2012-11-26T12:42:57.877
> 
> 标签：ios, xcode, inappsettingskit

我正在使用[InAppSettingsKit](http://www.inappsettingskit.com/)在我的应用程序中包含首选项。我使用 xcode 的**故事板**配置了首选项视图，步骤如下：

1) 我创建了一个导航控制器和一个表视图控制器
2) 在表控制器中，我使用了自定义类：IASKAppSettingsViewController，作为控制器。

一切都按预期工作，但现在我正在尝试重新配置应用程序，以便用户更改的设置在离开设置屏幕后生效。

我发现的一个教程说我应该：

> 创建一个符合 IASKSettingsDelegate 协议的委托。在当前版本中，-settingsViewControllerDidEnd: 是唯一需要的方法。

所以委托应该有一个方法，如：

```
- (void)settingsViewControllerDidEnd:(IASKAppSettingsViewController*)sender {
    [self dismissModalViewControllerAnimated:YES];
    [self reconfigure];
} 
```

如何创建此委托？我不知道把这个方法放在哪里。我可以在故事板连接检查器中看到代表有一个空间，但我无法连接它。请帮我弄清楚这一点，因为我已经阅读了大量解释代表的教程，他们让我更加困惑。我只需要简单的步骤来创建委托并将其连接到我在情节提要中创建的控制器。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:52:46.913

我已经取得了一些进展（**但有一个问题**）。这就是我所做的：

我没有使用 IASKAppSettingsViewController 作为控制器的类，而是创建了另一个继承自 IASKAppSettingsViewController 的类。我称它为 SettingsController

设置控制器.h

```
#import <UIKit/UIKit.h>
#import "IASKAppSettingsViewController.h"

@interface SettingsController : IASKAppSettingsViewController <IASKSettingsDelegate>
- (void)settingsViewControllerDidEnd:(IASKAppSettingsViewController*)sender;
@end 
```

设置控制器.m

```
...
@implementation SettingsController
...
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.delegate = self;
    self.showDoneButton = YES;
}
- (void)settingsViewControllerDidEnd:(IASKAppSettingsViewController*)sender {
    // reconfigure code here
}
@end 
```

所以基本上，我没有使用情节提要建立任何委托连接。`<IASKSettingsDelegate>`我必须在控制器中编写，并`self.delegate = self;`在 viewDidLoad 方法中使用。

问题是要使重新配置工作，我需要主视图控制器作为委托（而不是设置控制器）。我无法做到这一点。有什么帮助吗？

**第二次尝试：** 好的，现在我尝试使用：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"settingsSegue"])
    {
        [[segue destinationViewController] setDelegate:self];
    }
} 
```

但它不起作用。我相信这是因为destinationViewController 是storyboard 中的一个navigationController，它会立即显示设置所在的table view controller。

# java - 从 Java 调用 Matlab 进行重算法？

> ID：13565088
> 
> 赞同：1
> 
> 时间：2012-11-26T12:43:10.407
> 
> 标签：java, matlab, jakarta-ee

有没有人在 Java 和 Matlab 之间进行了耦合，并且可以建议如何最好地做到这一点？有没有我不应该错过的框架？

我想编写一个 java 程序，将参数传递给 matlab 函数并获取结果（以及基于迭代在 matlab 中创建的图片）。

此外，这些结果将显示在网站上，因此 Java EE JSF 将是我的选择。

怎样才能最好地完成这种耦合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:32:23.553

[matlabcontrol](http://matlabcontrol.googlecode.com)是一个 Java API，它允许您从 Java 调用 MATLAB。您可以从 MATLAB 内部或从 MATLAB 外部调用 MATLAB，在这种情况下，将启动并连接一个 MATLAB 实例。它允许在 MATLAB 中调用 eval 和 feval 并将结果返回给 MATLAB。该[演练](http://code.google.com/p/matlabcontrol/wiki/Walkthrough)通过示例解释了如何执行此操作。该演练使用内置的 MATLAB 函数和命令，但您可以将其与您自己的 .m 文件一起使用，因为使用 matlabcontrol 就像与 MATLAB 的命令行窗口进行交互一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:19:06.567

您可以尝试 JAMAL（JAva MAtlab 链接）：http: [//jamal.khadkevich.org/about.html](http://jamal.khadkevich.org/about.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T12:53:01.243

是的，Mathworks 已经在 J​​ava 和 Matlab 之间建立了耦合，并且可以建议如何最好地做到这一点。你可以从[这个页面](http://blogs.mathworks.com/community/2009/07/06/calling-java-from-matlab/)开始阅读。

# sql - 需要 SQL 多对多选择帮助

> ID：13565089
> 
> 赞同：-2
> 
> 时间：2012-11-26T12:43:11.850
> 
> 标签：sql

我有 2 张桌子

**投标客户**

```
|bidkey | customerkey
|  1    | 1
|  1    | 2
|  1    | 3 
```

**客户组**

```
| groupkey | customerkey 
|    1     |      1
|    1     |      2
|    1     |      3 
```

我想要得到的是一个看起来像的结果

```
| bidkey | groupkey
|    1   |      1 
```

我尝试了光标并加入，但似乎无法获得我需要的任何想法或建议

编辑：客户也可以属于一个以上的组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:55:35.597

我不确定谁对您的样本数据有意义。然而下面是一个简单的例子。

询问：

```
select distinct b.bidkey, g.gkey
from bidcus b
inner join cusgroup g
on 
b.cuskey = g.cuskey
and g.gkey = 10; 
```

结果：

```
BIDKEY  GKEY
1       10 
```

参考：[SQLFIDDLE](http://sqlfiddle.com/#!2/6bac6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:52:49.200

为了在数据库中建立有效的多对多关系，您需要一个定义该关系的中间表，这样您就不会得到重复或不匹配的值。

由于客户匹配，此 select 语句将所有组的所有投标加入。

```
Select bidkey, groupkey
From customer_groups
Inner Join bid_customer
Where customer_groups.customerkey = Bid_customer.customerkey 
```

**她的例子是多对多关系：**

![多对多关系](../Images/f51142cc5cd5f4599e3f3e3c61549c0a.png)

**对于您的问题：**
您将需要另一个连接数据的表。例如，`GroupBids`

`customer_groups`并且`bid_customer`将有一个一对多的关系`GroupBids`

然后，您将执行以下选择以获取您的数据。

```
Select bidkey, groupkey 
From bid_customer 
inner join GroupBids 
   ON bid_customer.primarykey = GroupBids.idBidKey
inner join customer_groups 
   ON customer_groups.primarykey = GroupBids.idCustomerGroupkey 
```

这将确保只返回*相关*的组和出价

# oracle - 在 sql plus 中的脚本中运行循环

> ID：13565093
> 
> 赞同：2
> 
> 时间：2012-11-26T12:43:40.053
> 
> 标签：oracle, sqlplus

我在 sql plus 中运行一个脚本，我的脚本中有一个 for 循环：

```
BEGIN
  FOR count IN 1..100 LOOP
    INSERT INTO CompanyShare VALUES (count, 1, 250);
  END LOOP;
END;

BEGIN
  FOR count IN 101..200 LOOP
    INSERT INTO CompanyShare VALUES (count, 2, 50);
  END LOOP;
END; 
```

当我运行脚本时，出现了这个错误：

> ORA-06550：第 6 行，第 1 列：PLS-00103：遇到符号“BEGIN”

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:07:00.340

尝试添加`/`如下`end;`：

```
BEGIN
  FOR count IN 1..100 LOOP
    INSERT INTO CompanyShare VALUES (count, 1, 250);
  END LOOP;
END;
/ --<-- Here
BEGIN
  FOR count IN 101..200 LOOP
    INSERT INTO CompanyShare VALUES (count, 2, 50);
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T13:41:12.667

查看您的逻辑，您甚至可以根据条件简化脚本。

```
 BEGIN
  FOR count IN 1..200
   LOOP
    INSERT INTO CompanyShare VALUES (count
                                    ,CASE WHEN count<=100 THEN 1   ELSE 2  END
                                    ,CASE WHEN count<=100 THEN 250 ELSE 50 END
                                    );
   END LOOP;
  END;
  / 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:55:42.167

结束后没有分号。试试这个

```
BEGIN
  FOR count IN 1..100 LOOP
   INSERT INTO CompanyShare VALUES (count, 1, 250);
  END LOOP;
END ;   --****
BEGIN
 FOR count IN 101..200 LOOP
  INSERT INTO CompanyShare VALUES (count, 2, 50);
 END LOOP;
END; 
```

# c# - html编码空间的HtmlDecode不是空间

> ID：13565097
> 
> 赞同：13
> 
> 时间：2012-11-26T12:43:57.557
> 
> 标签：c#, asp.net, vb.net

直到现在我还在想`HttpUtility.HtmlDecode("&nbsp;")`是一个空间。但是下面的代码总是返回 false。

```
string text = "&nbsp;";

text = HttpUtility.HtmlDecode(text);

string space = " ";

if (String.Compare(space, text) == 0)
  return true;
else
  return false; 
```

当我尝试时也一样`Server.HtmlDecode()`

为什么会这样？

任何帮助将非常感激

谢谢， N

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T12:46:15.587

HTML 实体`&nbsp;`不代表一个空格，它代表一个不间断的空格。

不间断空格的字符代码为 160：

```
string nbspace = "\u00A0"; 
```

* * *

此外，正如 Marc Gravell 所注意到的，您已经对代码进行了双重编码，因此您需要对其进行两次解码才能获得字符：

```
string text = "&amp;nbsp;";
text = HttpUtility.HtmlDecode(HttpUtility.HtmlDecode(text)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-14T23:12:34.417

我正在像这样清理html：

```
 var text = WebUtility.HtmlDecode(html)
      .Replace("\u00A0", " ") // Replace non breaking space with space.
      .Replace("  ", " ") // Shrink multiple spaces into one space.
      .Trim(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T12:47:07.433

的 HTML`&amp;nbsp;`并不意味着**任何**类型的空间。从字面上看，它意味着文本`&nbsp;`——例如，如果您正在编写 HTML 并谈论 HTML，您可能需要包含 text `&nbsp;`，您可以通过编写 HTML 来做到这一点`&amp;nbsp;`。

如果你有：

```
string text = "&nbsp;"; 
```

那么*这*将解码为一个**不间断的**空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-05T09:19:35.000

您好，几分钟前我遇到了同样的问题。
我以这种方式解决了它：

```
string text = "&nbsp;";
text = Server.HtmlDecode(text).Trim; 
```

所以现在： `text = ""`是真的（最后的修剪消除了空间）

# python - Django 无效语法错误

> ID：13565099
> 
> 赞同：1
> 
> 时间：2012-11-26T12:44:02.207
> 
> 标签：python, django, admin

我很机智。我正在尝试设置 Django 管理员，但我遇到了困难。我已经按照 Django 书进行了多次检查，但语法无效（urls.py，第 23 行）。

```
from django.conf.urls.defaults import *
from mysite.views import hello, current_datetime, hours_ahead

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    (r'^hello/$', hello),
    (r'^time/$', current_datetime),
    (r'^time/plus/(\d{1,2})/$', hours_ahead),
    (r'^admin/', include(admin.site.urls), 
) 
```

任何见解将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:46:25.897

您在第 22 行缺少一个结束括号：

```
(r'^admin/', include(admin.site.urls)), 
```

当你`SyntaxError`在 Python 中得到 a 时，检查你的括号在它前面的行上是否平衡。

# c# - 如果未找到 UI 元素，如何测试失败？

> ID：13565101
> 
> 赞同：3
> 
> 时间：2012-11-26T12:44:08.077
> 
> 标签：c#, ui-automation, gui-testing

我使用一种搜索 UI 元素的方法：

```
public static bool findtopuielm(string uiitemname)
        {
            bool res = false;
            try
            {
                AutomationElement desktopelem = AutomationElement.RootElement;
                if (desktopelem != null)
                {
                    Condition condition = new PropertyCondition(AutomationElement.NameProperty, uiitemname);
                    AutomationElement appElement = desktopelem.FindFirst(TreeScope.Descendants, condition);
                    if (appElement != null)
                    {
                        res = true;
                    }

                }
                return res;
            }
            catch (Win32Exception)
            {
                // To do: error handling
                return false;
            }
        } 
```

此方法由另一个等待元素直到它出现在桌面上的方法调用。

```
public static void waittopuielm(string appname, int retries = 1000, int retrytimeout = 1000)
        {
        for (int i = 1; i <= retries; i++)
        {
            if (findtopuielm(appname))

                break;
                Thread.Sleep(retrytimeout);

            }
        } 
```

问题是，当我调用最后一个函数时：

waittopuielm("测试");

即使找不到元素，它也总是返回 true，在这种情况下，我希望测试失败。任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T00:10:00.680

看起来您的**waittopuielem**方法返回 void - 您的意思是发布类似此版本的内容，它返回一个布尔值吗？

```
 public static bool waittopuielm(string appname, int retries = 1000, int retrytimeout = 1000)
    {
        bool foundMatch = false;
        for (int i = 1; i <= retries; i++)
        {
            if (findtopuielm(appname))
            {
                foundMatch = true;
                break;
            }
            else
            {
                Console.WriteLine("No match found, sleeping...");
            }
            Thread.Sleep(retrytimeout);
        }
        return foundMatch;
    } 
```

除此之外，您的代码似乎对我来说按预期工作。

一个建议：在您的**findtopuielm**方法中，将桌面元素搜索中的 TreeScope 值从 TreeScope.Descendants 更改为 TreeScope.Children：

```
AutomationElement appElement = desktopelem.FindFirst(TreeScope.Children, condition); 
```

TreeScope.Descendants 执行的递归搜索可能比您想要的要多 - 将搜索桌面元素的所有子元素，以及这些元素的每个子元素（即按钮、编辑控件等）。

因此，在搜索相对常见的字符串时找到错误元素的机会很高，除非您将 NameProperty PropertyCondition 与 AndCondition 中的其他属性结合起来以缩小搜索范围。

# php - 在表格中显示一个数组（）

> ID：13565105
> 
> 赞同：0
> 
> 时间：2012-11-26T12:44:17.127
> 
> 标签：php

我的主要任务是验证我的网站的反向链接是否存在，这通过 some.txt 文件进行验证。我已经做到了，但现在的问题是，我想要表格格式的网址。

我的剧本是这样的

```
$needle = $_GET['utext'];
$file   = $_GET['ufile'];
$source = file_get_contents($file);
$new    = explode("\n",$source);

foreach ($new as $check)
{
  $a = file_get_contents(trim($check));
  if (strpos($a,$needle))
  {
    $found[] = $check;
  }
  else
  {
    $notfound[] = $check;
  }
}

echo "Matches that were found: \n ".implode("\n",$found)."\n";
echo "Matches that were not found \n". implode("\n",$notfound); 
```

# javascript - 在行中插入数据之间添加延迟

> ID：13565106
> 
> 赞同：0
> 
> 时间：2012-11-26T12:44:24.110
> 
> 标签：javascript, jquery

我正在接收数据（一次 10 条记录）并将其插入到 div 中的 javascript 循环中

```
 var a1 = $('.HomeAnnoucement').length;
            var a2 = $('.HomeAnnoucement').length;
            for (a1 ; a1 < (+a2 + +data.d.length) ; a1++) {

                var a = a1 - a2;
                var newFormat = '<div class="HomeAnnoucement"><label class="annID" id="archannouncementID' + a1 + '" style="display: none;" /><div class="DateandDelete left"><a class="AnnoucementDate left"><strong>' + data.d[a].EffectiveDate.split('/')[1] + getPostWord(parseInt(data.d[a].EffectiveDate.split('/')[1])) + '</strong> ' + getMonthString(parseInt(data.d[a].EffectiveDate.split('/')[0])) + '</a><div class="clear"></div></div><a class="AnnoucementTitle left"><strong id="archannTitle' + a1 + '" class="bold"></strong></a><div class="clear"></div></div><div class="AnnoucementDescription" id="archannDescription' + a1 + '" style="display:none;"></div>';
                $('#archivedAnnouncements').append(newFormat);
                $('#archannouncementID' + a1).append(data.d[a].ID);
                $('#archannTitle' + a1).append(data.d[a].Title);
                if (data.d[a].Owner != "" && data.d[a].Owner != " ") {
                    $('#archannTitle' + a1).append('<label style="font-weight: normal !important;">&nbsp; by ' + data.d[a].Owner + '</label>');
                }
                var description = data.d[a].Description.replace(/\"/g, "'");
                var div = document.createElement("div");
                div.innerHTML = description;
                var descriptiontext = div.textContent || div.innerText || "";
                $('#archannDescription' + a1).html(data.d[a].Description);
            } 
```

我想在插入行之间添加延迟。这样用户就可以看到网格中的每条记录插入。我尝试使用 display: none 和 fadingIn setTimeOut 函数插入元素，但这不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:48:57.380

JQuery .delay() 会帮助你

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:49:25.350

我已经修改了您现有的代码以隐藏每一行，然后设置延迟和淡入...

```
var a1 = $('.HomeAnnoucement').length;
var a2 = $('.HomeAnnoucement').length;
for (a1 ; a1 < (+a2 + +data.d.length) ; a1++) {

    var a = a1 - a2;
    var $newFormat = $('<div class="HomeAnnoucement"><label class="annID" id="archannouncementID' + a1 + '" style="display: none;" /><div class="DateandDelete left"><a class="AnnoucementDate left"><strong>' + data.d[a].EffectiveDate.split('/')[1] + getPostWord(parseInt(data.d[a].EffectiveDate.split('/')[1])) + '</strong> ' + getMonthString(parseInt(data.d[a].EffectiveDate.split('/')[0])) + '</a><div class="clear"></div></div><a class="AnnoucementTitle left"><strong id="archannTitle' + a1 + '" class="bold"></strong></a><div class="clear"></div></div><div class="AnnoucementDescription" id="archannDescription' + a1 + '" style="display:none;"></div>');
    $('#archivedAnnouncements').append($newFormat);
    $('#archannouncementID' + a1).append(data.d[a].ID);
    $('#archannTitle' + a1).append(data.d[a].Title);
    if (data.d[a].Owner != "" && data.d[a].Owner != " ") {
        $('#archannTitle' + a1).append('<label style="font-weight: normal !important;">&nbsp; by ' + data.d[a].Owner + '</label>');
    }
    var description = data.d[a].Description.replace(/\"/g, "'");
    var div = document.createElement("div");
    div.innerHTML = description;
    var descriptiontext = div.textContent || div.innerText || "";
    $('#archannDescription' + a1).html(data.d[a].Description);
    $newFormat.hide().delay(a * 500).fadeIn();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:46:21.353

使用[带有动画的 JQuery Show](http://api.jquery.com/show/)

这是上面引用的示例页面

```
<!DOCTYPE html>
<html>
<head>
  <style>
      p { background:yellow; }
      </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Show it</button>

      <p style="display: none">Hello  2</p>
<script>
    $("button").click(function () {
    $("p").show("slow");
    });
    </script>

</body>
</html> 
```

在这种情况下，您可以将隐藏控件添加到子列表中，并在循环中调用带有动画的显示

# android - 从底部滑动导航菜单

> ID：13565107
> 
> 赞同：0
> 
> 时间：2012-11-26T12:44:24.740
> 
> 标签：android, menu, android-listview, touch, android-sliding

我正在尝试实现滑动菜单，例如在 Prixing 应用程序中。（菜单位于主布局下，当您将主布局拖到一边时会看到）但诀窍是 - 我希望它出现在屏幕底部，所以我需要将主布局移动到顶部。第二个问题是在 tah 布局中我得到了一个列表视图。拜托，我真的需要建议或链接到一些有用的资源，我可以在其中了解如何处理触摸事件。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:19:27.483

真的没有魔法。

要做到这一点，直接移动（单击按钮或其他方式）：您使用动画从两个片段（顶部的一个（当前在视图中，底部的一个，隐藏在屏幕下）更改 LayoutParams.top） .

在您的 XML 布局上，确保为底部布局（在 DIP 中）设置固定高度，并在运行时为两个布局设置动画以移动该数量的像素。

让它随着用户手指移动：这会很棘手，因为列表视图必须接收用户输入。也许如果你打电话给 super 就可以了。

但是你可以通过接收 OnTouchEvents 来完成它：

*   TOUCH_DOWN，你开始移动（用布尔值或其他东西标记它）
*   TOUCH_MOVE，您将相同的更改应用于您在动画上所做的布局参数（第一个选项）
*   TOUCH_UP 或 TOUCH_CANCEL，您停止移动（清除标志）。

希望它可以帮助您指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:00:45.673

我认为您正在尝试与 facebook 应用程序做同样的事情。我找到了它的演示。所以用[这个](https://github.com/korovyansk/android-fb-like-slideout-navigation)

# xml - 在 XSD 架构中，如何区分不同类型的 IDREF

> ID：13565108
> 
> 赞同：2
> 
> 时间：2012-11-26T12:44:24.430
> 
> 标签：xml, xsd

我有一个类似于这样的 XML 结构：

```
<root>
   <hierarchy1>
       <foo id="foo1" /> <!-- id is of type id -->
       <bar id="bar1" /> <!-- id is of type id -->
   </hierarchy1>
   <hierarchy2>
       <foohandler ref="foo1" /> <!-- ref is of type idref -->
       <barhandler ref="bar1" /> <!-- ref is of type idref -->
   </hierarchy2>
</root> 
```

即我有不同类型的具有 id 的对象，并且我有不同类型的目标对象需要使用 IDREF 引用这些 ID。

有没有办法确保 IDREF 是正确的预期类型，即

*   `<foohandler ref="foo1" />`是有效的，而
*   `<foohandler ref="bar1" />`不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:52:57.290

使用 xs:key/xs:keyref 代替 ID/IDREF。我会让你去查细节；再次询问您是否卡住了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:56:34.653

我几乎发布了一个答案，它使用基于模式的限制（*foo[0-9]+*等）来实现 OP 的要求。但是，在发布之前，我发现了*keys*和*keyrefs*，这似乎是解决方案。所以我想出了以下架构；但是，起初它没有工作，因为一个愚蠢的命名空间声明问题。我主要发布它，因为我之前也不知道该怎么做，而且我快疯了，因为我知道*我快到了*。

```
<?xml version="1.0" encoding="UTF-8" ?>
<xs:schema xmlns="http://stackoverflow.com"
           xmlns:so="http://stackoverflow.com"
           xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           targetNamespace="http://stackoverflow.com"
           attributeFormDefault="qualified"
           elementFormDefault="qualified">
  <xs:element name="root" type="rootType">
    <xs:key name="fooKey">
      <xs:selector xpath="so:hierarchy1/so:foo"/>
      <xs:field xpath="@so:key"/>
    </xs:key>
    <xs:key name="barKey">
      <xs:selector xpath="so:hierarchy1/so:bar"/>
      <xs:field xpath="@so:key"/>
    </xs:key>
    <xs:keyref name="fooKeyref" refer="fooKey">
      <xs:selector xpath="so:hierarchy2/so:foohandler"/>
      <xs:field xpath="@so:keyref"/>
    </xs:keyref>
    <xs:keyref name="barKeyref" refer="barKey">
      <xs:selector xpath="so:hierarchy2/so:barhandler"/>
      <xs:field xpath="@so:keyref"/>
    </xs:keyref>
  </xs:element>

  <xs:complexType name="rootType">
    <xs:sequence>
      <xs:element name="hierarchy1" type="hierarchy1Type"/>
      <xs:element name="hierarchy2" type="hierarchy2Type"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="hierarchy1Type">
    <xs:sequence>
      <xs:element name="foo" type="fooType"/>
      <xs:element name="bar" type="barType"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="hierarchy2Type">
    <xs:sequence>
      <xs:element name="foohandler" type="foohandlerType"/>
      <xs:element name="barhandler" type="barhandlerType"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="fooType">
    <xs:attribute name="key" type="xs:integer"/>
  </xs:complexType>

  <xs:complexType name="barType">
    <xs:attribute name="key" type="xs:integer"/>
  </xs:complexType>

  <xs:complexType name="foohandlerType">
    <xs:attribute name="keyref" type="xs:integer"/>
  </xs:complexType>

  <xs:complexType name="barhandlerType">
    <xs:attribute name="keyref" type="xs:integer"/>
  </xs:complexType>
</xs:schema> 
```

上面的模式验证下面的 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<so:root xmlns:so="http://stackoverflow.com"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://stackoverflow.com a.xsd">
  <so:hierarchy1>
    <so:foo so:key="1"/>
    <so:bar so:key="2"/>
  </so:hierarchy1>
  <so:hierarchy2>
    <so:foohandler so:keyref="1"/>
    <so:barhandler so:keyref="2"/>
  </so:hierarchy2>
</so:root> 
```

如果`<so:barhandler so:keyref="2"/>`更改为`<so:barhandler so:keyref="1"/>`或`<so:barhandler so:keyref="3"/>`文档无效。

这里的问题是，如果不指定名称空间并在属性中`xmlns:so="http://stackoverflow.com"`使用相同的名称空间，一些解析器不会关心文档的完整性。`xpath``xs:selector``xs:field`

Eclipse 的 XML 解析器/验证器和[这个在线工具](http://www.utilities-online.info/xsdvalidation/)在我指定 XPath 表达式应该引用哪个命名空间之前，并没有对我的*key*、*keyref声明给出废话。*

底部的石灰可以*使用命名空间everyhwere*？

[这个答案将我引向我的关联。](https://stackoverflow.com/a/2015438/433835)

# delphi - 如何在 Delphi 7 中正确对齐 TMS AdvSmoothLabel 的标题？

> ID：13565109
> 
> 赞同：0
> 
> 时间：2012-11-26T12:44:25.740
> 
> 标签：delphi

下面是对齐设置为右下角的 TMS AdvSmoothLabel 的屏幕截图。

从图中可以看出，Label 的 RHS 和 Label 标题的 RHS 之间总是留有少量空间。我想要的是类似 TLabel 的东西：-

![在此处输入图像描述](../Images/f442f6dded42ea755725171bb75ea241.png)

我尝试通过 TMS 单元，但我只是感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:24:49.500

我不确定您是否已经询问过 TMS Software 或者您是否已得到回复，但您需要的方法是打开 Wordwrap

![在此处输入图像描述](../Images/d9b57eade97422cfec9fef0e408e97d6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:32:01.653

我会虽然这将是利润，但测试它们我无法让他们做任何事情。

我有两个解决方法建议：

1.  将 Caption Location 设置为 plCustom，然后设置 Caption 的 Top 和 Left 设置。如果您的表单可调整大小并且您希望将文本保留在左侧，这可能会让您感到烦恼。

2.  将您不想要的背景隐藏在面板下，或从表格或其他东西中隐藏起来。

# css - 删除/完全重置 img 上的继承样式

> ID：13565112
> 
> 赞同：1
> 
> 时间：2012-11-26T12:44:50.037
> 
> 标签：css, twitter-bootstrap, image, default, reset

我有一个应该仅使用 HTML 属性按比例拉伸的图像。未设置 css 的默认行为是，如果将 height 属性设置为自然高度的一半，那么宽度也将自动为自然宽度的一半。

例子：

```
<img height="path/to/image.jpg" height="{half natural height}" /> 
```

问题是我从一个我不想破解的外部库继承样式，这会改变这种行为。

我正在尝试将样式反转回浏览器默认行为，以便看起来该元素根本没有设置样式。

[http://jsfiddle.net/23Hz4/2/](http://jsfiddle.net/23Hz4/2/)

失败的尝试：

*   设置宽度：自动；高度：自动不起作用。设置宽度：初始；高度：初始不起作用。
*   将 element.style.width 和 element.style.height 设置为 null 或空字符串不起作用。
*   删除 element.style.width 并删除 element.style.width 不起作用

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:51:47.657

您可以通过使用`style`属性而不是`height`

```
<img src="path/to/image.jpg" style="{height: half height};" /> 
```

问题是`height: auto;`引导程序的css规则。该`height`属性不能覆盖此规则。所以只有一个 css 规则可以覆盖这个 css 规则。

# ruby - 为什么在 main 中定义一个方法同时在 Object 和 main.singleton_class 中定义它？

> ID：13565117
> 
> 赞同：0
> 
> 时间：2012-11-26T12:45:07.603
> 
> 标签：ruby, methods, eigenclass

当在顶层执行定义时，我正在检查在 Ruby 中定义方法的位置，结果令人惊讶：

```
def foo; end

singleton_class != Object # => true
self.class == Object      # => true

m1 = singleton_class.instance_method :foo
# => #<UnboundMethod: Object#foo>

m2 = Object.instance_method :foo
# => #<UnboundMethod: Object#foo>

m1 == m2                  # => true 
```

它似乎`foo`同时定义在两个类中！有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:07:34.997

这个问题毫无意义，真的。该方法仅在`Object`. 当然，可以通过单例类获得它，但它没有在那里定义：

```
singleton_class.instance_methods(false).grep /foo/  # => [] 
```

叹...

# java - 在java中运行时向Jtable添加行

> ID：13565127
> 
> 赞同：0
> 
> 时间：2012-11-26T12:45:30.903
> 
> 标签：java

必须首先使用空行创建表，然后在运行时使用 JTable 在 java 中添加行。

如何在运行时添加行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:02:03.130

解决方案：

```
addRow(new Object[]{"",""}) 
```

但谷歌会更快......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:05:47.750

您可以使用**addRow( ... )**方法 -

```
DefaultTableModel model;
JTable table;
JScrollPane sc1;
model = new DefaultTableModel();
table = new JTable(model);
model.addColumn("RollNo");
model.addColumn("Name");
model.addRow(new Object[]{"",""});
table.addKeyListener(new KeyListener() {
public void keyPressed(KeyEvent e) {
if (e.getKeyCode()==KeyEvent.VK_ENTER) {
model.addRow(new Object[]{"", ""}); } }
public void keyReleased(KeyEvent e) { }
public void keyTyped(KeyEvent e) { } } );

sc1 = new JScrollPane(table,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS); 
```

但是您应该以自己的方式实现它。

# ios - 故事板编辑器中的“First Responder”和“Exit”框的用途是什么？

> ID：13565128
> 
> 赞同：31
> 
> 时间：2012-11-26T12:45:31.827
> 
> 标签：ios, objective-c, xcode, cocoa, responder-chain

在 XCode IDE 中，MainStoryboard 编辑器的视图控制器底部有两个框：First Responder 和 Exit。

我知道 firstResponder 在代码中以编程方式是什么，但是在故事板编辑器中，我似乎无法做任何有用的事情。

我是否能够使用该区域的第一响应者以某种方式设置视图的第一响应者？我希望第一个文本字段在加载时处于活动状态，我尝试右键单击并拖动无济于事。我知道我可以在 viewDidLoad 方法中以编程方式设置它，但是这里有什么方法吗？

~~绿色出口有什么用？~~

![急救人员（橙色）和出口（绿色）——它们的用途是什么？](../Images/7155ce11417781a182b1994f5ac3b99e.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-25T19:55:14.477

这个问题没有好的答案，所以我发布我的答案：

从[这里](http://www.raywenderlich.com/50308/storyboards-tutorial-in-ios-7-part-1)：

> 注意：您可能不会经常使用 First Responder。这是一个代理对象，它引用在任何给定时间具有第一响应者状态的任何对象。它也存在于您的笔尖中，您可能也从未需要使用它。例如，您可以将 Touch Up Inside 事件从按钮连接到 First Responder 的 cut: 选择器。如果在某个时候文本字段具有输入焦点，那么您可以按下该按钮以使文本字段（现在是第一响应者）将其文本剪切到粘贴板上。

编辑：

1) 如果您使用带有键盘通知的文本字段，First Responder 非常有用。我用它来使键盘消失，为您班级的变量 currentFirstResponder 提供一个出口，并在 viewWillDisappear 中：

```
[self.currentFirstResponder resignFirstResponder]; 
```

[2) 您可以在此处](https://stackoverflow.com/a/15839298/1223728)阅读有关 unwind segues（“退出”框）的信息

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T12:52:23.943

我从未使用过它，而且可能永远不会使用它，但您可以将一个对象指定为第一个从 UI 接收事件的对象。

我想您可能正在创建一个 UIView 子类并将其添加到 UIViewController 但您实际上希望其他对象接收和处理您添加到的 UIViewController 以外的事件。

我发现[这个链接](https://web.archive.org/web/20130601045552/http://cocoadev.com/wiki/FirstResponder)可以更好地解释它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-17T17:19:18.573

**第一响应者：**第一响应者图标代表用户当前正在与之交互的对象。当用户使用 iOS 应用程序时，多个对象可能会响应用户创建的各种手势或击键。第一响应者是当前控制并与用户交互的对象。例如，用户正在输入的文本字段将是第一响应者，直到用户移动到另一个字段或控件。

**退出：**退出图标具有非常特殊的用途，仅在多场景应用程序中发挥作用。当您创建一个在一系列屏幕之间移动用户的应用程序时，退出图标提供了一种跳回前一个屏幕的视觉方式。如果您已经构建了五个相互链接的场景，并且您想从第五个场景快速返回到第一个场景，您将从第五个场景链接到第一个场景的退出图标。

更多[在这里](http://www.informit.com/articles/article.aspx?p=2481851)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-04T12:09:50.377

您不会经常看到这种情况，其中删除的答案实际上是正确的，而对它的评论（可能会影响其删除）是完全错误的！我会努力改进它。

通常`IBAction`你想连接到一个按钮是在包含按钮的视图控制器中。但是，如果`IBAction`在不同的控制器中，例如父控制器，然后从按钮拖动到 First Responder 对象，您就可以`IBAction`在父控制器中选择 ！

正如隐藏的答案所述，这是如何实现的是将动作发送到 nil，这具有在响应者链（即视图层次结构）中搜索动作的效果，如下所示：

`[UIApplication.sharedApplication sendAction:@selector(nextObject:) to:nil from:self forEvent:nil];`

一个例子是自定义`UITableViewCell`. 将 a 添加`UIButton`到单元格，但您希望该操作上升到具有嵌入 segue 到 a 的视图控制器`UITableViewController`。将 touch up instead 动作拖到 First Responder 并在容器视图控制器中选择动作。在查找 indexPath 的操作中，只需循环 visibleCells 并检查发件人是否为`isDescendantOfView`：

```
- (IBAction)cellButtonTapped:(id)sender{
    for(UITableViewCell *cell in self.tableViewController.tableView.visibleCells){
        if([sender isDescendantOfView:cell]){
            NSIndexPath *indexPath = [self.tableViewController.tableView indexPathForCell:cell];
            NSLog(@"tapped %@", indexPath);
        }
    }
} 
```

另一个例子可能是一个重新加载按钮：假设您的第一个视图控制器显示一个下载的项目，`IBAction`并重新加载它以获取最新数据，然后您的子控制器显示一些细节，但您还希望他们能够重新加载主要项目在详细信息中，只需在详细信息中添加一个按钮并将其操作拖到 First Responder 并`IBAction`在父控制器中选择重新加载。这允许您将按钮连接到父操作，而无需像委托方法这样的额外代码！

为此，该操作需要位于响应者链层次结构中，否则将找不到，您可以阅读文档中的链是如何构建的。另请注意，如果从代码中调用视图需要出现，`viewWillAppear`则为时过早。

# c# - 禁用粗体按钮

> ID：13565129
> 
> 赞同：6
> 
> 时间：2012-11-26T12:45:41.933
> 
> 标签：c#, excel, c#-4.0, excel-2007, office-2007

我想禁用 Excel 工作表中的“粗体”切换按钮。

我该怎么做？

我有以下代码，但它不工作：

```
CommandBarControl test = excel1.Application.CommandBars["Formatting"].FindControl(Id:113,Recursive:true);
if (test.Enabled)
{
MessageBox.Show(test.Caption + " enabled");
test.Visible = false;
test.Enabled = false;
} 
```

我认为它不起作用，因为他们从 Office 2007 开始使用功能区控件。

谁能帮助如何控制特定按钮？这样我就可以更改它的属性，默认启用/禁用它等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:12:44.750

恐怕答案确实是不可能的。

我一直在研究类模块的可能性，因为我认为使用类，您可以拦截将文本更改为粗体的事件，然后取消该事件。但是，我能找到的一切都与其他事件有关（值更改、计算、工作簿结构更改等）。

即使它可以工作，它也会涉及一些严肃的编码并且容易出错。

也许你的做法是错误的——你删除这个按钮的原因是什么？您的问题可能还有另一种解决方案。如前所述，删除按钮不会阻止使用 ctrl+B 或粘贴粗体文本的可能性 - 您根本无法阻止这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:23:31.543

我敢肯定，这不是您想要的答案，但恐怕无法做到。

# wicket - 如何找出组件路径

> ID：13565130
> 
> 赞同：7
> 
> 时间：2012-11-26T12:45:46.107
> 
> 标签：wicket

我使用 junit 来断言检票口组件的存在：

```
wicketTester.assertComponent("dev1WicketId:dev2WicketId:formWicketId", Form.class); 
```

这适用于某些形式。对于复杂的结构，通过搜索所有的html文件很难找到表单的路径。有什么方法可以轻松找出路径吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T13:00:03.677

如果你有你可以调用的组件`#getPageRelativePath()`。例如

```
// Supposing c is a component that has been added to the page.
// Returns the full path to the component relative to the page, e.g., "path:to:label"
String pathToComponent = c.getPageRelativePath(); 
```

您可以使用该`visitChildren()`方法获取标记容器的子项。下面的例子展示了如何`Form`从一个页面中获取所有的 s。

```
List<Form> list = new ArrayList<Form<?>>();
Page page = wicketTester.getLastRenderedPage();
for (Form form : page.visitChildren(Form.class)) {
    list.add(form);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T19:08:56.403

获得这些的一种简单方法是[`getDebugSettings().setOutputComponentPath(true);`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/settings/IDebugSettings.html#setOutputComponentPath%28boolean%29)在初始化应用程序时调用。这将使 Wicket 将这些路径作为每个组件绑定标签的属性输出到生成的 HTML。

建议仅在调试模式下启用此功能，但：

```
public class WicketApplication extends WebApplication {
    @Override
    public void init() {
        super.init();

        if (getConfigurationType() == RuntimeConfigurationType.DEVELOPMENT) {
            getDebugSettings().setOutputComponentPath(true);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-24T14:13:47.857

扩展 RJo 的答案。

似乎该方法`page.visitChildren(<Class>)`已被弃用（Wicket 6），因此使用 IVisitor 它可以是：

```
protected String findPathComponentOnLastRenderedPage(final String idComponent) {
    final Page page = wicketTester.getLastRenderedPage();
    return page.visitChildren(Component.class, new IVisitor<Component, String>() {
        @Override
        public void component(final Component component, final IVisit<String> visit) {
            if (component.getId().equals(idComponent)) {
                visit.stop(component.getPageRelativePath());
            }
        }
    });
} 
```

# android - ListView 不滚动。我如何解决它？

> ID：13565132
> 
> 赞同：3
> 
> 时间：2012-11-26T12:45:46.380
> 
> 标签：android, listview, scroll

我在 Linearlayout 中有一个 ListView。列表视图有一个自定义光标适配器。一切正常，除了 ListView 不滚动。

任何建议都非常欢迎！！谢谢。毛里齐奥

这是 MainActivity 的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/buttonAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="Aggiungi" />

    <ListView
        android:id="@+id/list"  
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是相关的java代码。

```
public class MainActivity extends Activity  {
    private DatabaseHelper db=null;
    private Cursor tabellaCursor=null;
    private ListAdapter adapter; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        int[] to = new int[] {R.id.name_entry};
        db = new DatabaseHelper(this);
        tabellaCursor=db.getWritableDatabase().rawQuery("SELECT _id, colonna1, colo      nna2, colonna3 FROM tabella ORDER BY _id", null);
        ListAdapter adapter=new MyAdapter(this, R.layout.list_example_entry, tabe     llaCursor, new String[]{"colonna1"},to);
        ListView lt = (ListView)findViewById(R.id.list); 
        lt.setAdapter(adapter); 
        Button addbtn=(Button)findViewById(R.id.buttonAdd);
        addbtn.setOnClickListener(new OnClickListener()
        {public void onClick(View v){add(); }
        });
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T12:52:23.863

您的 ListViews 布局参数是“wrap_content”。当您向 litview 添加新项目时，它会扩展。因此它不会滚动。如果你将它设置为“match_parent”，它肯定会开始滚动。不要忘记，只有当它的内容（子视图）大小大于它时，视图才会滚动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T12:49:27.113

添加更多超过高度的列表项。然后你可以滚动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T12:51:16.743

请使用以下代码，它将解决您的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/buttonAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="Aggiungi" />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_below="@+id/buttonAdd"/>

</RelativeLayout> 
```

# ant - Ant zipfileset 重命名文件

> ID：13565133
> 
> 赞同：6
> 
> 时间：2012-11-26T12:46:10.680
> 
> 标签：ant, rename

我想包含文件`zipfileset`但也重命名它

例如

```
<zipfileset dir="${basedir}/test/target"   prefix="webapps">
    <include name="test*.war"/>
</zipfileset> 
```

但想将名称从更改`test.war`为`sample.war`

如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T00:25:13.847

[`mappedresources`您可能可以使用资源集合](http://ant.apache.org/manual/Types/resources.html#mappedresources)来做您想做的事情。这在一个基本测试中“对我有用”（一个名为 的输入战争`test1.war`）：

```
<mappedresources id="mapped.zfs">
    <zipfileset dir="${basedir}/test/target">
        <include name="test*.war"/>
    </zipfileset>
    <globmapper from="test*" to="webapps/sample*" />
</mappedresources>

<zip destfile="eg.zip">
    <resources refid="mapped.zfs" />
</zip>

% unzip -l eg.zip 
Archive:  eg.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
        0  11-27-2012 00:19   webapps/
     1423  11-27-2012 00:16   webapps/sample1.war
---------                     -------
     1423                     2 files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T17:51:27.110

马丁克莱顿的回答对我有用。我也能够在一个元素中完成所有操作（作为孩子）：

```
<zip destfile="eg.zip">
  <mappedresources>
    <zipfileset file="test*.war"/>
    <globmapper from="test*" to="webapps/sample*" />
  </mappedresources>
  <!-- additional file-sets and resources may be listed here -->
</zip> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T12:59:31.007

我认为这是不可能的，我会采用两步法。

重命名并添加：

```
<move file="${basedir}/test/target/test.war" tofile="${basedir}/test/target/sample.war"/>
<zipfileset dir="${basedir}/test/target"   prefix="webapps">
    <include name="sample*.war"/>
</zipfileset> 
```

或复制并添加（如果您需要两者）：

```
<copy file="${basedir}/test/target/test.war" tofile="${basedir}/test/target/sample.war"/>
<zipfileset dir="${basedir}/test/target"   prefix="webapps">
    <include name="sample*.war"/>
</zipfileset> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:02:36.940

除了彼得提到的解决方案，如果您不想保留同一文件的 2 个副本...您可以删除复制的一个...

```
<copy file="${basedir}/test/target/test.war" tofile="${basedir}/test/target/sample.war"/>
<zipfileset dir="${basedir}/test/target"   prefix="webapps">
    <include name="sample*.war"/>
</zipfileset>
<delete file="${basedir}/test/target/sample.war"/> 
```

现在您将没有 test.war 的重复副本。

# sed - SED 中棘手的多行擦除

> ID：13565140
> 
> 赞同：0
> 
> 时间：2012-11-26T12:46:23.527
> 
> 标签：sed

这是输入：

```
aaa
bbb
ccc
ddd
eee
fff 
```

我想要的是？像“sed”/ccc/,/(eee)/d”一样做某事，但也要删除“bbb”行（在“ccc”之前），这样输出是：

```
aaa
fff 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:03:46.580

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;/\nccc/!{P;D};/\neee/!ba;d}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:35:16.827

如果你对 awk 没问题，应该这样做：

```
$ awk '/ccc/,/eee/{if(i!=1){i=1;x="";}next}{if (x)print x;x=$0;}END{print x}' file
aaa
fff 
```

在上述情况下，每一行都被打印出来。正常范围过滤是使用 awk 完成的。但是，在范围过滤器中，变量 x 被重置，以便不打印范围之前的先前记录。

**更新**：

sed 解决方案：

```
$ sed '${x;p;};/ccc/,/eee/{/ccc/{s/.*//;x;};d;};1{h;d;};x;/^$/d;' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:55:46.353

您可以通过简单的 2-pass 方法执行此操作，第一次通过识别要删除的行，第二次通过仅打印未标记为删除的行：

```
awk '/ccc/,/eee/{d[NR]=d[NR-1]=1} NR!=FNR && !d[FNR]' file file 
```

# visual-studio - 安全下载管理器卡住

> ID：13565143
> 
> 赞同：5
> 
> 时间：2012-11-26T12:46:31.530
> 
> 标签：visual-studio

我正在通过 Secure Download Manager 下载 Visual Studio。它停留在 70% 几个小时。我现在已经停止并恢复了好几次。此外，我尝试删除并再次下载 .sdx，但它从完全相同的 70% 开始并且没有移动。我怎样才能从头开始或让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:49:13.790

如果您还没有弄清楚，要删除文件并重新开始，应该有一个扩展名为 .sdc 的文件。删除它并再次运行 SDX。这应该够了吧

# c# - 在将双精度值读取和写入二进制文件后保留精度

> ID：13565147
> 
> 赞同：0
> 
> 时间：2012-11-26T12:46:45.830
> 
> 标签：c#

我正在创建一个二进制文件。文件的内容是双精度值。当我使用二进制读取器提取双精度值时，小数点后的某些值不匹配

例如：写入文件的值。-0.0139519833028316

从文件中提取的值。-0.0139519833028317

我怎样才能避免这种不一致？

```
aStreamWriter.WriteLine(double values);

//to read the data ,
BinaryReader aBinaryReader = new BinaryReader();
int points_length = CurveCount * VectorLength * 2 * VoxelIndex.Length * 2;
double[] points = new double[points_length];
for (int i = 0; i < points_length; i++)
    points[i] = aBinaryReader.ReadDouble();
for(int i =0; i < points_length; i++) {
    // then write the points values to a file
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:55:20.603

编辑：

有了你的评论，问题就变得很明显了。`StreamWriter`是一个**文字作家**。调用`aStreamWriter.WriteLine(double)`是写**text**。坦率地说，你很幸运能拿回任何**东西**。

* * *

原来的

工作正常：

```
 double d = -0.0139519833028316;
    byte[] raw;
    using (var ms = new MemoryStream())
    {
        using (var writer = new BinaryWriter(ms))
        {
            writer.Write(d);
        }
        raw = ms.ToArray();
    }
    double newVal;
    using(var ms = new MemoryStream(raw))
    using (var reader = new BinaryReader(ms))
    {
        newVal = reader.ReadDouble();
    }
    Console.WriteLine(newVal == d); // True 
```

我怀疑您只是看到`double`了与读/写代码完全无关的奇怪现象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:21:08.500

基本上你有一个双数据类型的问题。Double 基本上是对一个以 2 (2^64) 为底的数字进行近似。如果没有可以计算的确切数字（从 10 为底），那么它会选择关闭数字，可以将其保存为双精度数。

如果您需要超级精确的方法来保存一些数字，请将其保存为字符串。取决于数学或您需要对数字做什么，您始终可以编写自己的函数。

将“货币价值”保存为数据库中的浮点数正在发生类似的事情。他们使用金钱数据类型，因为浮点数并不是真正可行的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:54:19.247

真的是前后矛盾吗？double 在概念上是一个实数的近似值。考虑到原始测量的误差，该数字是否重要？在这种情况下，它们不是真正的“相同”数字吗？

# drop-down-menu - Abbyy Flexicapture - 下拉

> ID：13565156
> 
> 赞同：0
> 
> 时间：2012-11-26T12:47:07.777
> 
> 标签：drop-down-menu, combobox, abbyy

我正在尝试在 AbyyFlexicapture 中创建一个下拉列表。下拉列表应该从数据库中填充（我已经准备好外部 DLL 来完成这项工作）或使用固定值。问题是我找不到适合这项工作的元素。我发现（最接近的）是复选框组，但我不知道如何使用它（以编程方式添加项目）。这方面的文档很差......

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:19:45.113

弄清楚了。您只需将数据推送到带有查询的文本框，它就会自动转换为下拉列表。但是没有办法（至少我知道）如何设置默认选择......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T18:30:09.203

查看 IField.Suggest() 方法。

# objective-c - ios中的JSON解析错误

> ID：13565158
> 
> 赞同：-1
> 
> 时间：2012-11-26T12:47:13.600
> 
> 标签：objective-c, ios, json, web-services

我想从一些 url 中获取一些数据并在 nslog 中打印结果。我正在传递 URl，并且只想在日志中获取结果。我用过这段代码：

```
 -(void)GETJSONDATA
{
   NSString*lu=@"tmp";
    NSString *requestString = [[NSString alloc]init];

    // [[NSUserDefaults standardUserDefaults] setValue:nil forKey:@"WRONGANSWER"];

    NSLog(@"request string:%@",requestString);
    NSData *requestData = [NSData dataWithBytes: [requestString UTF8String] length: [requestString length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: 
                                    [NSURL URLWithString: @"http://assessments.tlisc.org.au/webservices/questions/getbytaskpart.php?jsoncallback=?&token=1726204214321678|xTAieBBJoDaWmBsG1stxfq4zLO4&taskpartid=1"]];  
    NSString *postLength = [NSString stringWithFormat:@"%d", [requestData length]];

    [request setHTTPMethod: @"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    [request setHTTPBody:requestData];

    NSError *respError = nil;
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: &respError ];
    if (respError) 
    {
        //        NSString *msg = [NSString stringWithFormat:@"Connection failed! Error - %@ %@",
        //                         [respError localizedDescription],
        //                         [[respError userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]]; 
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Test"                                                  message:@"check your network connection" delegate:self cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
        [alertView show];

    } 
    else
    {
        NSString *responseString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];
        NSLog(@"Resp : %@",responseString);

        NSDictionary *results = [responseString JSONValue];
        NSLog(@"results=%@",results);

}
} 
```

它向我显示了这个错误：

```
 -JSONValue failed. Error trace is: (
    "Error Domain=org.brautaset.JSON.ErrorDomain Code=11 \"Unexpected end of string\" UserInfo=0x6a42be0 {NSLocalizedDescription=Unexpected end of string}" 
```

有人可以指出我的错误吗？在响应字符串中，它显示空值。我不知道实际的错误。

它在浏览器中工作正常但是当我解析它时它显示这个错误......无论如何我可以通过它修改url并获得结果......我已经用不同的url检查了我的代码。它工作正常..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:19:34.893

我想我使用的库与您在这里使用的库相同，并且由于某种无法解释的原因，它在特定的 google api 上失败了，有时会得到结果，但通常会失败。代码似乎没有任何问题。

最后，我使用了内置的 NSJSONSerialization ( [http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) ) 对象，从那以后它就没有失败过。我什至不知道内置了 JSON 支持（显然来自 iOS5）。

我运行了两个调用并并排处理它们，外部库不断失败。内部方法运行良好。

由于我是初学者并且文档（上面）并没有真正帮助我很多，我使用本教程[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)来获取我的头在它周围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:23:37.687

在浏览器中检查您的网址。查看结果。您的结果结构应该与 JSON 相同。如果在 json 的开头有任何其他额外的单词意味着。你应该检查你的 php 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:12:48.520

正如错误告诉您的那样：传入的 JSON 格式不正确。向您正在使用的 URL 发出一个简单的 GET 请求，我得到一个格式错误的 JSON，即它不是有效的 JSON。我猜将数据发布到此 URL 会返回与其中实际数据相同的格式（不是*null*）。

利用一个简单的[JSON Validator](http://jsonlint.com/)，我得到了这个

> 第 5 行的解析错误：... "Description": "\n\tQuestion Numbe ------------------------^ Expecting 'STRING', 'NUMBER '、'NULL'、'TRUE'、'FALSE'、'{'、'['

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:25:56.903

您的字符串中有 HTML 标签。段落标记如

```
<p> and </p> 
```

而且这些都没有正确逃脱。但是，我不知道小于号和大于号是否需要在 JSON 中转义，但显然他们正在制造问题。使用谷歌我找到了两者的陈述。`<`但是，一些网站建议使用`\u003c`和`>`with 进行转义`\u003e`。这应该够了吧。

我试图验证来自 [http://assessments.tlisc.org.au/webservices/questions/getbytaskpart.php?jsoncallback=?&token=1726204214321678|xTAieBBJoDaWmBsG1stxfq4zLO4&taskpartid=1](http://assessments.tlisc.org.au/webservices/questions/getbytaskpart.php?jsoncallback=?&token=1726204214321678|xTAieBBJoDaWmBsG1stxfq4zLO4&taskpartid=1)`<p>`的输出`</p>`。鲍泽。（我正在查看“页面来源”）。但是，当转义字符串仍然有效并编码为相同的结果。

如果这不是您的问题，请提供您的输出

```
NSLog(@"Resp : %@",responseString); 
```

# c# - ToString 的约定

> ID：13565159
> 
> 赞同：5
> 
> 时间：2012-11-26T12:47:16.533
> 
> 标签：c#, tostring, conventions

`ToString()`覆盖的约定是什么？有问题的类既有`Name`属性，也有`Id`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T12:50:28.617

做你需要做的。本身没有约定，就像在覆盖类似的东西时那样`.Equals()`and `.GetHashCode()`。

如果您想在执行期间中断时影响调试器中显示的内容，请不要使用`ToString()`-use [`DebuggerDisplayAttribute`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerdisplayattribute.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T12:54:32.293

您可以参考以下链接

[覆盖 System.Object.ToString() 并实现 IFormattable](http://codebetter.com/davidhayden/2005/02/24/overriding-system-object-tostring-and-implementing-iformattable/)

[揭秘 C# 编程的 ToString 方法](http://www.codeguru.com/csharp/article.php/c18377/Demystifying-C-Programmings-ToString-Method.htm)

[如何：覆盖 ToString 方法](https://web.archive.org/web/20121112153254/http://msdn.microsoft.com/en-us/library/ms173154(v=vs.80).aspx)

我的经验法则

1.  它应该与[Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)和[GetHashCode同步](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)
2.  它应该与 Parse 方法同步（如果我提供）
3.  如果需要自定义格式，请使用 IFormattable

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T12:49:44.147

我不知道任何约定。我通常打印在文本上下文中看起来合适的内容。`Id`可能和可能不适合您的上下文。

我的经验法则是`ToString`应该显示两个对象是否`Equals`存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T12:50:21.050

据我所知， for`ToString()`的约定与 object`GetHashCode`和`Equals`.

也就是说，当`Equals`返回true时，则应该生成相同的哈希码`GetHashCode`。除此之外，我想说当`Equals`返回 true 时，`ToString`应该返回相同的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T12:53:10.177

我认为实施`ToString()`应该牢记三点：

*   字符串表示应该是人类可读的，例如，您可以将其用于日志/控制台输出或例如在**[DebuggerDisplay](http://msdn.microsoft.com/en-us/library/ms228992.aspx)**属性中。
*   如果您`Parse`的类中有任何方法，它应该能够解析`ToString`调用的结果。此外`myInstance.Equals(MyClass.Parse(myInstance.ToString()))`应该评估为`true`
*   如果两个实例相等，它们的字符串表示也应该相等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T21:38:36.403

您应该为整个应用程序中的所有 ToString 方法使用统一且可重用的解决方案。手动编写通用 ToStringHelper 代码或使用外部库，例如 stateprinter 项目[https://github.com/kbilsted/StatePrinter](https://github.com/kbilsted/StatePrinter)项目

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T12:50:45.193

这里有一些指导：

[http://msdn.microsoft.com/en-us/library/ms173154(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173154(v=vs.80).aspx)

我认为这很大程度上取决于该类的用途。例如，如果它是面向显示的，那么返回需要与可能最终看到它的用户相关。

# makefile - makefile：重用多个配方

> ID：13565161
> 
> 赞同：1
> 
> 时间：2012-11-26T12:47:19.977
> 
> 标签：makefile

我想为隐式规则和普通规则使用相同的复杂配方块。另外，我想在执行上一个命令之后回显下一个命令。

Make 不允许混合隐式规则和普通规则。

期望的输出：

```
$ make foo bar.abc
echo a
a
echo b
b
echo a
a
echo b
b 
```

这不起作用：

```
%.abc foo:
    echo a
    echo b 
```

这将起作用：

```
CMD = echo a && echo b
foo:
    $(CMD)

%.abc:
    $(CMD) 
```

但输出不是我想要的：

```
$ make foo bar.abc
echo a && echo b
a
b
echo a && echo b
a
b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:31:09.803

您可以使用`define`为变量分配多行值：

```
define CMD
echo a
echo b
endef 
```

# ruby-on-rails - HABTM 生命周期挂钩

> ID：13565162
> 
> 赞同：0
> 
> 时间：2012-11-26T12:47:23.643
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我有两个模型：*团队*和*赛季*关联，这样一个团队可以属于多个赛季，每个赛季也可以有多个团队。到目前为止，我已经使用了一个没有 ID 属性的连接表 seasons_teams 模型之间的简单 HABTM 关系。

现在我想添加一个关联被删除时的钩子，当球队退出赛季时执行。最好的方法是将 HABTM 关联转换为 has_many / :trough，将 ID 属性添加到连接表并创建包含新 before_destroy 钩子的相应模型文件，这是否正确？如果是这样，我如何编写迁移以向我的联接表添加自动递增索引？（或者创建一个带有索引的新连接表/模型并复制现有表中的所有条目会更好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:21:54.493

遵循[Rails 样式指南](https://github.com/bbatsov/rails-style-guide#activerecord)：

> 更喜欢 has_many :through 到 has_and_belongs_to_many。使用 has_many :through允许**连接模型**上的**附加属性**和**验证**

 **在你的情况下：

```
class SeasonTeam < ActiveRecord::Base # couldn't find a better name...
  belongs_to :team
  belongs_to :season
  # the validates are not mandatory but with it you make sure this model is always a link between a Season and a Team
  validates :team_id, :presence => true
  validates :season_id, :presence => true

  before_destroy :do_some_magic

  #...      
end

class Season < ActiveRecord::Base
  has_many :teams, :through => :season_teams
end

class Team < ActiveRecord::Base
  has_many seasons, :through => :season_teams
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:42:53.020

您还可以查看 Rails 的[Association Callbacks](http://guides.rubyonrails.org/association_basics.html#association-callbacks)。它提供了可用于自定义行为的回调方法`before_remove`。`after_remove`**

# c# - C# 使用动态生成的标签读取 XML 文件

> ID：13565165
> 
> 赞同：0
> 
> 时间：2012-11-26T12:47:29.510
> 
> 标签：c#, xml, xml-parsing

我正在使用 C#（带有 VS 2010 的 .Net 框架 4）来读取动态生成的 XML 文件。该文件包含问题的答案（MCQ 单选按钮、MCQ 多答案复选框和简单的文本字段）。问题 ID 和选项 ID 是从数据库生成的。

我只需要提取问题 ID 和相关的答案 ID。示例 XML 如下所示。

```
<?xml version="1.0"?>
<Root>
   <!-- Radio Button Answers -->    
   <Question_6_Option>26</Question_6_Option>
   <Question_8_Option>32</Question_8_Option>
   <Question_9_Option>off</Question_9_Option>
   <!-- Check Box Answers -->
   <Question_15_Option_41>41</Question_15_Option_41>
   <Question_15_Option_42>off</Question_15_Option_42>
   <Question_16_Option_43>43</Question_16_Option_43>
   <!-- Text Box Answers -->
   <Question_23_Text>London</Question_23_Text>
</Root> 
```

以上 XML 格式是生成的，

标签名称格式：Question_QuestionID_SomeLogic 基于答案类型（单选、多个选项或文本框）。

如果用户未回答问题值将显示为“关闭”。那些不需要考虑。

如何从 C# 获取问题 ID 和答案值？

谢谢，

查图尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:14:56.867

**不是 ANSWER**，但包括在此处而不是在注释中以使 XML 更具可读性：

我建议如果您能够使您的 XML 更具计算机可读性 - 即从标签名称中删除数据并将其放入属性中以使其更易于解析。

```
<?xml version="1.0"?>
<Root>
    <!-- Radio Button Answers -->    
    <Question number="6" type="radio"><Selected index="26" /></Question>
    <Question number="8" type="radio"><Selected index="32" /></Question>
    <Question number="9" type="radio" />
    <!-- Check Box Answers -->
    <Question number="15" type="check">
        <Selected index="41" />
        <Selected index="42" /><!-- not sure if this should be included, I didn't understand how question 15 was both off (unanswered) and 41 (answered) -->
    </Question>
    <Question number="16" type="check">
        <Selected index="43" />
    </Question>
    <!-- Text Box Answers -->
    <Question number="23" type="text">London</Question>
</Root> 
```

正如上面的@NewAmbition 所述，您的实际问题的答案已经在本网站的其他地方。

# android - 即使设备关闭也调用服务

> ID：13565168
> 
> 赞同：1
> 
> 时间：2012-11-26T12:47:34.987
> 
> 标签：android, broadcastreceiver

我正在开发一个安全应用程序，我需要在接收某些文本时播放警笛音乐（比如**“警笛”**）。

到目前为止，我已经能够接收短信意图并播放 .mp3 警笛音乐。但是当设备关闭时会遇到问题。

据我所知，有一些意图（不知道到底该怎么称呼它们），即使在设备关闭时也会触发这些意图，就像预定警报一样（即使在手机关闭时也会执行）

如果有人知道这些服务或它们是什么，那么如果您分享这些想法将会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:51:28.227

如果您在执行任务时需要唤醒设备，则只需使用[PowerManager](http://developer.android.com/reference/android/os/PowerManager.html)将其唤醒。请注意，一旦您`onReceive()`完成设备可能会重新进入睡眠状态，因此如果您在您的`BroadcastReceiver`.

你也可以看看这个：[https ://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:52:47.020

也许这可能会有所帮助.. 应该不难做到，但如果手机关机，你怎么能收到短信？！

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

# java - 为什么Java中有2个布尔类型运算符？

> ID：13565174
> 
> 赞同：4
> 
> 时间：2012-11-26T12:47:54.690
> 
> 标签：java, boolean-operations

正如在 Java 中的思考中所说，如果你有 2 个布尔对象，`x`并且`y`你可以在它们上使用任何一个`x= x&&y`，`x=x&y`那么为什么有必要同时拥有这两种类型呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T12:49:38.037

这两个运算符的行为不同：

*   `&`将始终评估*两个*操作数
*   `&&`是*短路的*- 如果第一个操作数的计算结果为`false`，那么总体结果将始终为假，并且第二个操作数不被计算

有关更多详细信息，请参阅 Java 语言规范：

*   [第 15.22 节（布尔逻辑运算符）`&`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2)
*   [第 15.23 节（条件与运算符）`&&`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.23)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T12:50:18.787

查看这段代码的输出：

```
 int x = 0;
    boolean b = false & (++x == 1); // b is false
    System.out.println(x); // prints 1
    x = 0;
    b = false && (++x == 1); // b is false
    System.out.println(x); // prints 0 
```

这是不同的，因为`&`总是会计算两个操作数，而`&&`如果第一个操作数是，则不会查看第二个操作数，因为无论第二个操作数是什么，`false`整个表达式将始终是。`false`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T12:50:27.710

1.  `&`将评估两个操作数
2.  `&&`如果第一个操作数为假，将跳过对第二个操作数的评估

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T12:53:35.000

& 是按位 'and' 运算符，&& 是布尔值 'and'

& 将始终评估左侧和右侧， && 仅在足以评估表达式的情况下评估左侧（例如 false && true ：仅评估 LHS，因为如果 LHS 为 false，则整个表达式必须为 false）

# git - 如何将提交之间的差异应用于git中的当前头部？

> ID：13565177
> 
> 赞同：6
> 
> 时间：2012-11-26T12:48:09.050
> 
> 标签：git, git-merge, git-diff

我正在参与我参与的项目的一些主题分支。我通常在提出拉取请求之前重新设置我的分支。然而这一次，由于 master 的变化，rebase 是一个很大的痛苦。很多冲突，更糟糕的是，在手动合并提交之后，看起来很丑陋并且失去了意义。我绝对希望获得我的分支的头部和两个分支上的最新提交之间的差异，然后将此差异应用到 master 的头部，最后使用`git add -p`. 所以我的问题是：如何实现它？一种可能性是简单地将 master 合并到我的主题分支中，但是有更优雅的解决方案吗？我相信是的。

谢谢你的帮助。

**编辑**：

一个文件已移动到主分支上，我的提交正在更改此文件（使用它的旧名称）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T12:51:15.160

采用[`git cherry-pick --no-commit <commit>...`](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

然后，您将在分支顶部应用列出的提交中的所有更改，您可以在闲暇时提交。

* * *

如果您有更复杂的用例，您可能想尝试[`git imerge`](https://github.com/mhagger/git-imerge)

它的创建者发表了[一篇介绍性博客文章](http://softwareswirl.blogspot.com/2013/05/git-imerge-practical-introduction.html)和[一个](https://www.youtube.com/watch?v=FMZ2_-Ny_zc)关于它的演示文稿。不幸的是，两者都有点老。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-02T00:10:56.203

当您想要获取连续提交时，已经给出的[答案很好。](https://stackoverflow.com/a/13565228/5419599)

但是，如果您想要的是在任何两个选择的提交之间应用差异的*一般*答案（就像我在找到此页面时所做的那样），那么它就没有那么有用了。

就我而言，我做了以下事情：

为了给事物命名，假设我想将 diff from `commit1`to应用为单个提交。`commit2``branch1`

请注意，它`commit1`可能是 的祖先*或*“后代” `commit2`，或者两者都不是。

所以我这样做：

```
git status     # Ensure working directory is clean, preferably no untracked files
git checkout -b temp-branch commit2
git reset --soft commit1
git commit -m "Everything from commit1 to commit2 as one commit"
git checkout branch1
git cherry-pick temp-branch
    # Confirm result is what you expect
git branch -D temp-branch 
```

# r - 在 SpatialPixelsDataFrame 上覆盖 shapefile 时产生的 NA

> ID：13565179
> 
> 赞同：2
> 
> 时间：2012-11-26T12:48:18.677
> 
> 标签：r, shapefile, rgdal

将一系列流域多边形（来自 shapefile）叠加到 SpatialPixelsDataFrame 对象时，我遇到了一个奇怪的问题。有 70 个集水区，但我得到`NA`了 60 个集水区的 s。

数据可在 Dropbox 上获得，以下脚本将下载、解压缩等文件并创建可重现的示例。

```
## load packages required
require(rgdal)
require(sp)

## proj4 string
BNG <- CRS("+init=epsg:27700")

## load in the grid
download.file("https://www.dropbox.com/s/7dvcf6ddo6r3043/depogrid.rds?dl=1",
              "./depogrid.rds", method = "wget")
myGrid <- readRDS("depogrid.rds")

## convert to spatial pixels
depo.sp <- SpatialPixelsDataFrame(data.matrix(myGrid[, 1:2]),
                                  data = myGrid[, 3, drop = FALSE],
                                  proj4string = BNG)

## load the shapefile
download.file("https://www.dropbox.com/s/bwzmeumnrja3c0o/dart.zip?dl=1",
              "./dart.zip", method = "wget")
unzip("./dart.zip")
shp <- readOGR(".", "DARTall")
## project shp to OSGB36
shp <- spTransform(shp, BNG)

## overlay shapefile on depo grid
depo.dart <- over(shp, depo.sp) 
```

问题是`NA`s：

```
> head(depo.dart)
  Deposition
0         NA
1         NA
2         NA
3         NA
4         NA
5  0.2604089
> sum(is.na(depo.dart[,1]))
[1] 60
> nrow(depo.dart)
[1] 70 
```

不*应该*有任何`NA`s 因为网格覆盖了整个英国地区并且集水区很小，所以我可能做错了什么！如果是这样，我做错了什么，我该如何解决？我想最终得到 70 个流域中每个流域的`Deposition`（数据）平均值。`SpatialPixelsDataFrame``shp`

[注意，网格是虚拟数据；我无法分发实际的沉积网格，但数据和对象本质上（完全）与`depo.sp`.

## 附加信息

```
> over(shp, depo.sp, returnList = TRUE)
[[1]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[2]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[3]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[4]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[5]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[6]]
     Deposition
3143  0.2604089

[[7]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[8]]
     Deposition
3289  0.1139663

[[9]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[10]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[11]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[12]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[13]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[14]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[15]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[16]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[17]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[18]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[19]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[20]]
     Deposition
3585  0.8610678

[[21]]
     Deposition
3288  0.2242067

[[22]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[23]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[24]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[25]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[26]]
     Deposition
3141  0.3296081

[[27]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[28]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[29]]
     Deposition
3438  0.3609788

[[30]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[31]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[32]]
     Deposition
3287  0.4812801

[[33]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[34]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[35]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[36]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[37]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[38]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[39]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[40]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[41]]
     Deposition
3436  0.3223757

[[42]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[43]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[44]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[45]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[46]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[47]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[48]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[49]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[50]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[51]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[52]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[53]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[54]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[55]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[56]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[57]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[58]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[59]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[60]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[61]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[62]]
     Deposition
2580  0.2820617

[[63]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[64]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[65]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[66]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[67]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[68]]
     Deposition
3141  0.3296081
3287  0.4812801
3288  0.2242067
3438  0.3609788

[[69]]
[1] Deposition
<0 rows> (or 0-length row.names)

[[70]]
[1] Deposition
<0 rows> (or 0-length row.names)
> str(over(shp, depo.sp, returnList = TRUE))
List of 70
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.26
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.114
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.861
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.224
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.33
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.361
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.481
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.322
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   1 obs. of  1 variable:
  ..$ Deposition: num 0.282
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   4 obs. of  1 variable:
  ..$ Deposition: num [1:4] 0.33 0.481 0.224 0.361
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
 $ :'data.frame':   0 obs. of  1 variable:
  ..$ Deposition: num(0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:35:02.807

如果您愿意进行实验并愿意使用`raster`包，这里有一个可能的解决方案。让我们知道。

诀窍是，在栅格上覆盖多边形时，要指定`small = TRUE`，因为多边形的中心并不总是包括像元中心（请参阅 参考资料`?extract`）。

> 如果 y 表示多边形，则还为相对较小的多边形（例如小于 Raster* 对象的单个像元的多边形）或具有奇数形状的多边形返回一个值，否则不会返回任何值，因为它们不覆盖任何栅格细胞中心。

```
library(raster)
shp.raster <- raster(shp)
depo.sp.raster <- raster(depo.sp)
plot(depo.sp.raster)
plot(shp, add = TRUE)
zoom(depo.sp.raster) # click in the corners around the area to zoom in
plot(shp, add = TRUE)

res.out <- extract(depo.sp.raster, shp, layer = 1, small = TRUE)
table(unlist(lapply(res.out, is.null)))
> head(res.out)
[[1]]

0.0334963 

[[2]]

0.2604089 

[[3]]
[1] 0.5466648 0.7929624 0.4214012

[[4]]
[1] 0.2604089 0.3149418 0.5343358 0.0334963

[[5]]

0.5561869 

[[6]]

0.2604089 
```

![在此处输入图像描述](../Images/baabd3db6fae0c3aa05462239d6cf3c4.png)

# django - 如何在 django admin 中显示 IntegerField？

> ID：13565181
> 
> 赞同：3
> 
> 时间：2012-11-26T12:48:28.887
> 
> 标签：django

如何在 django admin 中显示 IntegerField？

我的错误：**强制转换为 Unicode：需要字符串或缓冲区，找到 int**

```
class Day(models.Model):
    day = models.IntegerField()

    def __unicode__(self):
        return self.day 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T12:50:09.490

你需要返回一个字符串，而不是一个整数。像这样：

```
return str(self.day) 
```

# c++ - 带有参考变量的单例

> ID：13565186
> 
> 赞同：2
> 
> 时间：2012-11-26T12:48:41.293
> 
> 标签：c++, singleton

我需要几个在程序运行时始终可用的独特对象。我遵循 Singleton 设计模式，它建议使用方法`getInstance()`来获取对象。但我更喜欢立即检索对象而不调用方法。所以我写了一个类，它提供了几个由引用类型而不是指针返回的唯一对象。

```
class Priority
{
public:
    static Priority &High;
    static Priority &Medium;
    static Priority &Low;

    std::string getName(void);
    int getLevel(void);

private:
   Priority(int level, std::string const& name);
   ~Priority();
   Priority(Priority const&);
   const Priority &operator = (Priority const&);

   int level_;
   std::string name_;
};

Priority &Priority::High   = Priority(3, "High");
Priority &Priority::Medium = Priority(2, "Medium");
Priority &Priority::Low    = Priority(1, "Low");

Priority::Priority(int level, std::string const& name)
   : level_(level), name_(name)
{ }

Priority::~Priority() { }

inline std::string Priority::getName(void)
{
    return name_;
}

inline int Priority::getLevel(void)
{
    return level_;
} 
```

我编写了一个使用上述类的示例程序。

```
int main()
{
    Priority &m = Priority::High;
    std::string name = m.getName();
    int level = m.getLevel();
    return 0;
} 
```

该程序运行良好。因此，我假设在 `Priority &Priority::High = Priority(3, "High");`程序停止或存储类的 dll 文件被卸载之前，分配给变量的内存不会被清除。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:11:57.330

## 问题。

您显示的代码不应该编译：您不能将对 non- 的引用绑定`const`到右值。

Visual C++ 11.0 和 g++ 4.7.1 的示例：

```
[D:\开发\测试]
> *cl foo.cpp*
foo.cpp
foo.cpp(27)：警告 C4239：使用了非标准扩展：“初始化”：从“优先级”转换为“优先级 &”
        非常量引用只能绑定到左值
foo.cpp(28)：警告 C4239：使用了非标准扩展：“初始化”：从“优先级”转换为“优先级 &”
        非常量引用只能绑定到左值
foo.cpp(29)：警告 C4239：使用了非标准扩展：“初始化”：从“优先级”转换为“优先级 &”
        非常量引用只能绑定到左值

[D:\开发\测试]
> *gnuc foo.cpp*
foo.cpp:27:48：错误：从“Priority”类型的右值对“Priority&”类型的非常量引用进行无效初始化
foo.cpp:28:50：错误：从“Priority”类型的右值对“Priority&”类型的非常量引用进行无效初始化
foo.cpp:29:47：错误：从“Priority”类型的右值对“Priority&”类型的非常量引用进行无效初始化

[D:\开发\测试]
> _

```

* * *

## 工具使用。

在 Visual C++ 中，使用选项**`/W4`**（警告级别 4）来获取上面显示的警告。

您可以将这个和其他“使其符合标准”选项放在环境变量中**`CL`**（同样，**`LINK`**对于 Microsoft 链接器，例如`/entry:mainCRTStartup`作为默认链接器选项）。

```
[D:\开发\测试]
>*回声 %CL%*
/nologo /EHsc /GR /W4 /FI"progrock/cppx/macro/c++11.for_msvc_11.h"

[D:\开发\测试]
> _

```

* * *

## C++ 解决了这个问题。

你可以使用右值引用而不是左值引用，但是尽管 Visual C++ 对此很满意，但 g++ 然后抱怨私有析构函数。

因此，除了参考想法——它的目的是什么？– 您可以简单地使用普通的静态数据成员。

但是，对于普通的静态数据成员，与 Meyers 的单例相反，您可能会遇到[静态初始化命令 fiasco](http://www.parashift.com/c++-faq/static-init-order.html)的风险。因此，如果您绝对必须提供全局变量，我建议为此使用单例。至于那种单例，使用最简单的解决方案通常是最好的，这意味着[迈耶斯的单例](http://www.devarticles.com/c/a/Cplusplus/C-plus-plus-In-Theory-The-Singleton-Pattern-Part-I/4/)（我只是链接了第一个看起来合理的谷歌结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:12:43.383

这甚至不应该编译，您正在使用临时对象初始化引用。但是，您根本不需要那里的参考资料；只需将静态成员直接声明为对象：

**在标题中：**

```
class Priority
{
public:
    static Priority High;
    static Priority Medium;
    static Priority Low;
//...
}; 
```

**在源文件中：**

```
Priority Priority::High(3, "High");
Priority Priority::Medium(2, "Medium");
Priority Priority::Low(1, "Low"); 
```

# java - 当我尝试从其他计算机访问小型 Web 应用程序时，CSS 不起作用

> ID：13565188
> 
> 赞同：1
> 
> 时间：2012-11-26T12:48:44.340
> 
> 标签：java, css, html, tomcat7

我开发了一个托管在 tomcat 上的小型演示网络应用程序。当我从本地主机访问此应用程序时，一切正常。但是当我尝试使用我机器的 IP 从其他计算机访问它时，我可以看到网页，但 CSS 没有按预期工作（html 实体不在那里）。

我正在使用 HTML5 和外部样式表来显示网页。

我试图找出解决方案，但没有找到。我真的很感谢你们在这方面的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:05:51.457

您可以像这样设置您的 CSS 路径，例如，

```
<link rel="stylesheet" type="text/css" href="/FOLDER/style.css"> 
```

而不是`http://localhost/`简单地使用`/`

# google-app-engine - Google App Engine Datastore (ndb) 中的多对多关系

> ID：13565189
> 
> 赞同：6
> 
> 时间：2012-11-26T12:48:49.367
> 
> 标签：google-app-engine, app-engine-ndb

我有两个模型：成员和事件。一个成员可以参加许多活动，而在一个活动中，有许多参与者。我这样想：

```
class Members(ndb.model):
    event = ndb.KeyProperty(repeated=True)

class Events(ndb.model):
    member = ndb.KeyProperty(repeated=True) 
```

建立多对多关系的最佳方式是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T13:01:12.537

我认为在这种情况下，您希望一个模型中的键数组/列表指向另一个模型。由于数组/列表的长度有限制（现在最大为 5000），您可能希望成员模型指向事件模型（我假设成员可能不会参加很多活动（超过5000），但有很多（超过 5000 名）成员参加活动）。现在，如果您想要与会者列表，您只需在成员模型中查询事件键即可。如果您只想要人数，您可以只进行键查询，这将节省成本。

如果由于某种原因您需要使两个案例都超过 5000，那么您可以制作另一个（参与者）模型，其中包含一个成员密钥和一个活动密钥，然后为每个活动的每位客人制作此参与者模型。要获取客人列表，只需在此模型中查询特定事件，如果您需要成员的事件列表，则相反。这并不比上面的工作多多少，所以即使 5000 不是限制因素，你也可能会这样做。

# vim - 通过单击边距折叠 gvim 代码

> ID：13565190
> 
> 赞同：6
> 
> 时间：2012-11-26T12:48:50.327
> 
> 标签：vim, folding

gvim 中是否有任何方法可以获得*可点击*的代码折叠边距，类似于 diff 模式下可用的方法？请参考随附的差异模式屏幕截图。

请注意，我习惯于使用键盘命令进行代码折叠，但有时单击更方便。

我在互联网上搜索过，也在这里搜索过。我只找到解释键盘命令的材料，但没有关于可点击选项的内容。

**编辑**我使用 gvim 7.0 版。

![演示可点击代码折叠边距的屏幕截图（未折叠）](../Images/adc8a8c55d7accfc639539884e8edfff.png)![演示可点击代码折叠边距（折叠）的屏幕截图](../Images/e51f4b23259648e0ad9145dd88b891f9.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T13:36:20.330

假设已经为您的文件类型设置了折叠（即您可以使用键盘命令，如`za`），您只需要启用具有指定宽度的折叠列，例如：

```
:set foldcolumn=4 
```

* * *

如果您在全局范围内设置它，它将永远存在。如果您只想为某些文件类型（实际上有折叠）启用它，和/或调整宽度以适应嵌套折叠的数量，请改用`:setlocal foldcolumn=...`并将相应的命令放入`~/.vim/after/ftplugin/<filetype>.vim`实际`<filetype>`文件类型（例如`java`）中。（这要求你有`:filetype plugin on`。）

或者，您可以`:autocmd FileType <filetype> setlocal foldcolumn=...`直接在您的`~/.vimrc`.

# nservicebus - 从 Web 应用程序使用 Bus.Send（不是 Publish）（NServiceBus v3.2.0.0）

> ID：13565196
> 
> 赞同：0
> 
> 时间：2012-11-26T12:49:25.707
> 
> 标签：nservicebus, nservicebus3

我们有一个**发布**许多事件的 asp.net mvc3 应用程序。最近，有人指出我们应该**发送**消息而不是从 Web 应用程序发布事件，并引用了这篇非常有道理[的优秀博客文章。](http://www.make-awesome.com/2010/10/why-not-publish-nservicebus-messages-from-a-web-application/)但是，我想确认帖子中提出的观点对于 NServiceBus v3.x 仍然有效？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:10:20.677

我想，无论 NServiceBus 的版本如何，这篇文章背后的推理都是正确的。

话虽如此，没有什么能阻止您从网站发布消息。发布消息背后的想法是，消息表示通常由某个*处理*端点生成的事件。由于 Web 应用程序不应该真正处理任何事情，而是将命令*发送*到处理端点，因此 Web 应用程序不应该发布事件是有道理的。

因此，如果您发现自己处于从 Web 应用程序发布似乎有意义的情况，则表明您需要做出设计决策：要么设计不是最优的（因此 Web 应用程序正在执行处理）*，要么*您受到限制以某种方式禁止处理端点（可能是共享托管环境）的实现。

# c++ - 在 boost 中将安全套接字作为普通套接字传递

> ID：13565202
> 
> 赞同：1
> 
> 时间：2012-11-26T12:50:04.067
> 
> 标签：c++, boost-asio, shared-ptr

我有这些 typedef 问题是我需要传递一个安全套接字，因为 TSocket 将直接从 TSecureSocket 转换为 TSocket 工作吗？还是有其他解决方案？根据端口，我将使套接字安全，而在其他端口我不会。我只需要返回类型为 TSocket。

```
 typedef boost::asio::ip::tcp::socket            TBoostSocket;
  typedef boost::asio::ssl::stream<TBoostSocket>  TSLLSocket;
  typedef boost::shared_ptr<TBoostSocket>         TSocket;
  typedef boost::shared_ptr<TSLLSocket>           TSecureSocket; 
```

我看过这个 [boost::asio convert socket to secure](https://stackoverflow.com/questions/11699766/boostasio-convert-socket-to-secure)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:40:35.920

> 我有这些 typedef

```
 typedef boost::asio::ip::tcp::socket            TBoostSocket;
  typedef boost::asio::ssl::stream<TBoostSocket>  TSLLSocket;
  typedef boost::shared_ptr<TBoostSocket>         TSocket;
  typedef boost::shared_ptr<TSLLSocket>           TSecureSocket; 
```

> 问题是我需要将安全套接字作为 TSocket 传递。从 TSecureSocket 到 TSocket 的直接转换会起作用吗？

简短的回答没有。因为`boost::asio::ssl::stream<TBoostSocket>`包裹了插座。

> 还是有其他解决方案？根据端口，我将确保套接字安全，而在其他情况下，我不会只需要返回类型为 TSocket。

但是`TSLLSocket`（或 boost::asio::ssl::stream 更确切地说）提供了一种从实例中检索套接字的方法：

```
const next_layer_type & next_layer() const; 
```

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ssl__stream/next_layer/overload1.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ssl__stream/next_layer/overload1.html)

其中`next_layer_type`由以下 typedef 定义：

```
typedef boost::remove_reference< Stream >::type next_layer_type; 
```

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ssl__stream/next_layer_type.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/ssl__stream/next_layer_type.html)

由于您使用它定义模板，`TBoostSocket`因此您在调用`next_layer()`或`lowest_layer()`

当然，这将返回一个引用而不是指针，并且该引用指向不属于您的实例。因此，您现在需要以某种方式将其包装在 shared_ptr 中，这可能并不容易，因为您不能允许将其删除。

# clearcase - 查找当前流是否包含 ClearCase 中的基线

> ID：13565203
> 
> 赞同：2
> 
> 时间：2012-11-26T12:50:04.513
> 
> 标签：clearcase

假设我有一个名为 A1 的基线。然后我想看看是否有办法让我在同一个项目中的任何地方进入另一个流，看看我的流中是否有 A1？即我的流中是否对 A1 中的代码进行了更改？

有什么快速的方法可以做到这一点吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:09:49.993

ClearCase 基于活动工作，您应该确定活动是否已通过以下方式交付`cleartool lsact -contrib`：
请参阅“[自上次基线以来交付的活动”，以及“](http://www-01.ibm.com/support/docview.wss?uid=swg21136012)[描述基线并扩展交付和变基活动](https://stackoverflow.com/questions/9327917/describe-baseline-and-expand-deliver-and-rebase-activities)”中的更完整示例。

您可以使用 列出基线的所有活动`cleartool descr -l baseline:A1@\pvob`。

* * *

另一种情况是`A1`您的其他流中的基础基线何时是简单的。[您可以使用format](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)
描述您的其他流，以仅列出基础基线并检查是否是其中的一部分。 请参阅“[使用 Cleartool 显示当前基线](https://stackoverflow.com/a/5898359/6309)”。[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)`A1`

然后您需要检查您是否有最新版本，其中没有“A1”标签。
参见例如“[如何使 cleartool 判断源是否自上次基线以来被修改](https://stackoverflow.com/a/4447668/6309)”。

# emacs - 启用了文本框周围的不需要的文本动作

> ID：13565207
> 
> 赞同：3
> 
> 时间：2012-11-26T12:50:15.380
> 
> 标签：emacs

EMACS 24.2 为了使当前行变得明显，我使用 1 像素“文本框”而不是背光自定义 hl-line。当我移动光标时，文本移动（左右上/下）+- 2 个像素，让我有一种恶心的感觉。有没有办法避免这种不需​​要的文本动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:36:31.637

我建议你尝试使用一个宽度为 -1 的盒子（没错，是一个负数）。

# android - 异步任务 泛型类型。安卓

> ID：13565208
> 
> 赞同：5
> 
> 时间：2012-11-26T12:50:15.747
> 
> 标签：android, android-asynctask

我一直在为几个项目使用这个 AsyncTask，但仍然不太明白它的`<String, Void, String>`含义。这些是否意味着未实现方法的参数类型？有什么命令吗（分别对应String、Void、String的方法是什么）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T12:54:55.900

从[Android Docs AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)页面：

```
android.os.AsyncTask<Params, Progress, Result> 
```

异步任务使用的三种类型如下：

> **Params**，执行时发送给任务的参数类型。
> 
> **Progress**，在后台计算期间发布的进度单元的类型。
> 
> **Result**，后台计算结果的类型。

现在我的理解很简单：

**参数：（**在您的情况下为字符串）是`AsyncTask`需要的参数。`execute`调用方法时必须传递它

**进度：（**在您的情况下为 Void）是进度的类型。无效意味着您没有使用它。如果是整数，您可以使用 10、20、30... 之类的值，并使用这些值在屏幕上显示进度条。

**结果：（**在您的情况下为字符串）是`AsyncTask`返回的结果。您正在返回一个字符串。你可以返回任何你想要的对象。

所以简单地说，它有点像一个方法，其中 Params 是参数，Result 是返回类型，progress 告诉你处理进度的状态。

如需进一步理解，请参阅[本教程](http://www.vogella.com/articles/AndroidPerformance/article.html)，同时引用同一页面的内容可能会有所帮助：

> `AsyncTask<TypeOfVarArgParams, ProgressValue, ResultValue>`
> 
> TypeOfVarArgParams 作为输入传递给 doInBackground() 方法，ProgressValue 用于进度信息，ResultValue 必须从 doInBackground() 方法返回并作为参数传递给 onPostExecute()。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T12:53:34.967

它[在文档](http://developer.android.com/reference/android/os/AsyncTask.html)中描述：

```
android.os.AsyncTask<Params, Progress, Result> 
```

异步任务使用的三种类型如下：

> ```
> Params, the type of the parameters sent to the task upon execution.
> Progress, the type of the progress units published during the background computation.
> Result, the type of the result of the background computation. 
> ```

如果您不需要其中之一，请通过`Void`（但总是必须有 3 种类型）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T12:56:37.647

AsyncTask中的第一个参数是指在doInBackground中要传递的参数，第二个参数是在onProgressUpdate中传递的，第三个参数是在onPostExecute中传递的。我们可以根据功能使用任何适合的数据类型。下面给出了参数类型（字符串、整数、字符串）的调用示例。

```
private class MyTask extends AsyncTask<String, Integer, String>
        {   
            protected String doInBackground(String... u)
            {
                // do something in background
                return null;    
            }
            protected void onPreExecute() 
            {               
                // do something before start
                    }
            public void onProgressUpdate(Integer... args)
            {    

            }                      
            protected void onPostExecute(String result) 
            {                                   
                              //  do something after execution  

            }
        } 
```

# javascript - 跨域 JavaScript 读取 iframe 内容

> ID：13565215
> 
> 赞同：0
> 
> 时间：2012-11-26T12:50:41.767
> 
> 标签：javascript, iframe

我正在从我的应用程序（站点 B）将网站（站点 A）加载到我的 iframe 中。加载站点和我的应用程序托管在不同的域中？我需要从我的站点 B 读取站点 A 的内容。我浏览了很多链接，但我无法从这些链接中找到任何解决方案

有什么方法可以在站点 A 中设置站点 B 访问的权限（Access-Control-Allow-Origin）吗？如果没有，有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:57:05.627

出于安全原因，没有好的方法可以做到这一点。一些浏览器有一些解决方法，但跨浏览器兼容性成为一个问题。

如果您可以控制这两个域，则可以使用 easyXDM 之类的东西来回发送消息。

[http://www.webresourcesdepot.com/easyxdm-a-javascript-library-for-cross-domain-messaging/](http://www.webresourcesdepot.com/easyxdm-a-javascript-library-for-cross-domain-messaging/)

如果您无法控制这两个域，您将无法完成您正在尝试的事情。

# javascript - 分配时的Javascript增量

> ID：13565217
> 
> 赞同：6
> 
> 时间：2012-11-26T12:50:46.633
> 
> 标签：javascript, variable-assignment, increment, prefix-operator

我正在讨论前缀增量运算符，我们似乎遇到了分歧。

运行此代码时：

```
var x = 0;
x = ++x; 
```

第二行相当于：

*   x = (x = x + 1) 或
*   x = (x + 1)

很难区分，因为结果是相同的（两者的结果都是`x`1）

我相信当赋值的左侧是变量本身时，该值不会保存到原始变量中。

我的对手不同意，并认为无论何时使用运算符，该值都会保存到原始变量中`++`。

我们谁是对的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T12:52:40.943

它被保存了，所以它类似于第一个例子。以这段代码为例：

```
var v = 0;
v = ++v + ++v + ++v;
// Returns 6 
```

那是因为这将转化为：

```
v = (0+1) + ((0+1)+1) + (((0+1)+1)+1); 
```

或者，更准确地说：

```
v = 0+1 +
v = 1+1 + //Previous value of v + 1
v = 2+1   //Previous value of v + 1 
```

为什么？

`++v`将首先保存 v 的增量值，然后返回这个增量值。
为了简化事情，请在您的控制台中尝试以下操作：

```
x = 0;
++x; 
```

如果`++x`将解析为`x + 1`，`x`那么现在的值仍然是`0`，对吗？
不，你的`x`意志是`1`。这意味着其中`++x`必须有一个赋值运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T12:52:32.537

正在做：

```
var x = 0;
console.log(++x); // will make print 1 
```

正在做 ：

```
var x = 0;
console.log(x++); // will make print 0
console.log(x); // will print 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T13:11:50.653

只需尝试用完整的英文句子写出这两个`++x`句子`x++`：：
`++x`将 x 加一并返回值
`x++`：返回 x 的值，并将其递增。

你的第二行 ( `x = ++x;`) 相当于`x = (x += 1)`，是的。
看看你写过的任何循环：

```
for (var i = 0;i<100;i++)//<-- no need for another assign here 
```

所以你本可以写成`++x;`一样的，但是由于那个表达式是整个语句，如果你写`x++;`或者`++x`......

您可能知道`xxsomeVar`将变量加 1，将结果值分配给该变量，然后返回它，`someVar++`返回变量的*当前*值，然后将其加 1（当然，新值也分配给变量）。

所以`++x;`相当于`x = (x + 1);`

来自语言规范：
[++prefix increment operator](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.4)
[Postfix++ increment operator](http://www.ecma-international.org/ecma-262/5.1/#sec-11.3.1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:08:36.043

在阅读[ECMAScript 语言规范](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.4)以回答问题后，它似乎`++x`等同于`x = ( x = x + 1 )`.

规范概述的步骤的翻译是：

> 1.  运算的结果将分配给 x
> 2.  如果某些条件为真，则抛出错误
> 3.  旧值 = x
> 4.  新值 = 旧值 + 1
> 5.  将 newValue 分配给 x
> 6.  返回新值

对于后增量运算符，上面将返回 ，`oldValue`而不是`newValue`.

```
var x = 0;
// x is assigned 1 during the post-increment operation but because
// the oldValue is returned it is immediately replaced by 0.
x = x++; 
console.log( x ) // prints 0 
```

# python - 允许用户更改其图片。姜戈

> ID：13565218
> 
> 赞同：3
> 
> 时间：2012-11-26T12:50:52.953
> 
> 标签：python, django, image

在我的应用程序中，我允许用户拥有个人资料图片。我希望他们能够改变它。令人惊讶的是，我没有找到任何关于如何实现这一点的信息。

这是我尝试过的：

模型.py

```
 class UserProfile(FacebookProfileModel):
           user = models.OneToOneField(User)
           profilepic = models.ImageField(upload_to="profilepics/", default="blabla.jpg") 
```

我的html：

```
 <form method='post' action='{%url myproject.views.changes %}>
       <div class="controls">
       <input type="file" name="image">
       </div>
       <input type="submit">
       </form> 
```

我的观点：

```
 def changes(request):
          if 'image' in request.POST:
             image = request.POST.get('image')
             userprofile.profilepic.url = image
             userprofile.save() 
```

当我这样做时，我收到以下错误消息：

```
 'AttributeError at /my/site/
        can't set attribute' 
```

关于我如何做到这一点的任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:34:16.120

确保首先请求 UserProfile 对象，然后

看起来你应该使用

```
image = request.FILES['image']
userprofile.profilepic = image 
```

代替

```
image = request.POST.get('image')
userprofile.profilepic.url = image 
```

见[这个例子](https://stackoverflow.com/questions/5871730/need-a-minimal-django-file-upload-example)，views.py 部分，正如杰克所说

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-30T13:29:09.780

您需要包含`enctype="multipart/form-data"`在您的表格中。这是一个如何更新的示例`ImageField:`

首先是update_form.html：

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="save btn btn-default">Update</button>
</form> 
```

然后是表格：

```
from django.contrib.auth import get_user_model

class EditProfile(UserChangeForm):
    class Meta:
        model = get_user_model()
        fields = ('email', 'name', 'avatar') 
```

最后是视图：

```
def user_edit(request):
    if request.method == 'POST':
        form = EditProfile(request.POST, instance=request.user)
        if form.is_valid():
            form.save()
            if request.FILES.get('avatar', None) != None:
                try:
                    os.remove(request.user.avatar.url)
                except Exception as e:
                    print('Exception in removing old profile image: ', e)
                request.user.avatar = request.FILES['avatar']
                request.user.save()
            return redirect('user:profile', id=request.user.id)
    else:
        form = EditProfile(instance=request.user)
        return render(request, 'user/user-edit.html', {'form': form}) 
```

# asp.net - asp.net + 从 aspnetdb 查询？

> ID：13565220
> 
> 赞同：0
> 
> 时间：2012-11-26T12:51:00.170
> 
> 标签：asp.net, aspnetdb

好的，这是我的情况，我正在尝试将 ListView 与从我的 SProc 调用的数据（我的用户的用户名）绑定，因此 ListView 的每张用户照片都有一个指向个人资料页面的链接，并附有用户名的查询字符串。我意识到我可以加入 dbo.aspnet_Users 来获取他们的用户名，但这是否可取？

我知道我们应该使用会员 API，但我想不出不从 aspnetdb 数据库中获取数据的方法。有没有更合适的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:07:15.363

`aspnet_Users`是的，在正常情况下查询或任何其他 Microsoft Membership 数据库表是没有害处的。

但是，如果您处理的记录数量相当多，则会影响查询性能。其背后的原因是，在 Microsoft Membership 表上应用的 INDEXING 不是很理想。大多数表都有`ApplicationId`聚集索引，没有人甚至很少使用。

`UserId`被索引，并且`LoweredUserName`字段在`aspnet_membership`和`aspnet_users`表中被索引。所以在你的 where 子句中使用它们来提高大型数据库的性能。

我希望这能回答您的问题，如果是，则将其标记为“已回答”。

# android - 截图相机视图+布局视图android增强现实

> ID：13565221
> 
> 赞同：2
> 
> 时间：2012-11-26T12:51:01.907
> 
> 标签：android, android-layout, android-camera, augmented-reality, screen-capture

我尝试从帧缓冲区获取屏幕截图，它适用于我的布局视图，我从[这里](https://stackoverflow.com/a/5651242/1206201)使用了以下代码：

```
String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

// create bitmap screen capture
Bitmap bitmap;
View v1 = mCurrentUrlMask.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

OutputStream fout = null;
imageFile = new File(mPath);

try {
    fout = new FileOutputStream(imageFile);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
    fout.flush();
    fout.close();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

但我想用相机视图捕捉布局视图，因为我也在布局视图或透明网页的背景中使用相机视图。一种解决方法是分别拍摄相机图像和布局视图并将它们放在一起并保存新的位图。

谁能建议我对此有任何适当的解决方案？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:55:54.927

为了将两个图像放在一起，您可能希望按照此代码 100% 工作以将两个图像叠加在一起

```
 Bitmap border = BitmapFactory.decodeResource(getResources(), R.drawable.vignette2);
int width = bmp.getWidth();
int height = bmp.getHeight();
change = Bitmap.createScaledBitmap(change, width, height, false); // change is Bitmap
Canvas canvas = new Canvas(change);
Bitmap scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
canvas.drawBitmap(scaledBorder, 0, 0,null);
//canvas.drawBitmap(k, 0, 0, null);
view.setImageBitmap(change); // view is the imageView 
```

现在部分保存视图，简单的方法是

```
view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        save = view.getDrawingCache(); // save is a Bitmap 
```

接着 ：

```
 final FileOutputStream out = new FileOutputStream(file);
            save.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            Toast.makeText(getApplication(), "Image Saved",
                    Toast.LENGTH_SHORT).show(); 
```

这将为您保存图像视图的视图，或者如果它的布局则只需设置您的布局并给它一个名称然后替换它，`view` 请不要忘记在您检查保存是否成功设置后

```
 view.setDrawingCacheEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:06:56.763

我无法将代码作为评论发布，所以你可以在你的 onActivtity 上传递该特定方法，或者在你发送意图后传递它，或者它的自定义相机，然后你可以控制当你点击相机按钮时只需添加一个方法来捕获视图。这是我保存视图的方法。

```
void Save() {
    if (null != view.getDrawable()) {
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        save = view.getDrawingCache();
        final File myDir = new File(folder);
        myDir.mkdirs();
        final Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        final String fname = "StyleMe-" + n + ".png";
        final File file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            final FileOutputStream out = new FileOutputStream(file);
            save.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            Toast.makeText(getApplication(), "Image Saved",
                    Toast.LENGTH_SHORT).show();
        } catch (final Exception e) {
            Toast.makeText(getApplication(),
                    "Something Went Wrong check if you have Enough Memory",
                    Toast.LENGTH_LONG).show();
        }
    } else {
        final Toast tst = Toast.makeText(getApplication(),
                "Please Select An Image First", Toast.LENGTH_LONG);
        tst.setGravity(Gravity.CENTER, 0, 0);
        tst.show();
    }
    view.setDrawingCacheEnabled(false);
} 
```

为了让您不断保存视图，然后只需添加循环。当您单击循环开始的相机按钮时！在我的保存方法中，不要担心覆盖名称:)。它将随机生成每个图像的名称！

# javascript - JS中奇怪的array.push

> ID：13565223
> 
> 赞同：0
> 
> 时间：2012-11-26T12:51:03.460
> 
> 标签：javascript

我有简单的代码

```
sites_from_session = 12;
function function_name () {
    var items_to_send = sites_from_session;
    var template_name = jQuery('#new-site-template-name').val();
    console.log(sites_from_session);
    items_to_send.push(template_name);
    console.log(sites_from_session);
}

function_name();
function_name();
function_name();
function_name();
function_name();
function_name();//... 
```

问题是该`push`方法将值推送到两个数组

![在此处输入图像描述](../Images/e844c32eea69d3440af6aa9571d51461.png)

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:56:05.003

数组不会在 JavaScript 中自我克隆。当你说类似

```
arr1 = arr2; 
```

如果两者`arr2`都是有效数组，则您尚未制作`arr2`. 您所做的只是为它创建一个引用指针`arr1`。所以当你做出改变时

```
arr1[0] = "some value"; 
```

你（本质上）在说同样的话

```
arr2[0] = "some value"; 
```

要正确克隆一个单独的副本，您需要使用它：

```
var items_to_send = sites_from_session.slice(); 
```

这将返回一个新数组，其中包含原始数组中的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:59:09.243

这是一个非常常见的 Javascript 问题。数组不会像这样复制：

```
var items_to_send = sites_from_session; 
```

它只是将数组的引用复制到一个新变量。换句话说，`items_to_send`和`sites_from_session`是指向 RAM 中同一个数组的两个名称。如果要制作数组的副本（称为深复制）而不仅仅是另一个指针（浅复制），则需要使用`slice()`：

```
//create a copy of the array
var items_to_send = sites_from_session.slice(0); 
```

您的其余代码应该可以正常工作。

这个问题可能重复：[How do you clone an Array of Objects in Javascript?](https://stackoverflow.com/questions/597588/how-do-you-clone-an-array-of-objects-in-javascript)

您可以在这里了解更多信息：http: [//davidwalsh.name/javascript-clone-array](http://davidwalsh.name/javascript-clone-array)

# android - facebook在模拟器上工作而不是在设备上

> ID：13565225
> 
> 赞同：1
> 
> 时间：2012-11-26T12:51:06.213
> 
> 标签：android, facebook, facebook-android-sdk

它可以在模拟器上完美运行，但不能在设备上运行。 在 facebook sdk 中
崩溃。`response = read(conn.getInputStream());`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:24:02.813

是的，我有这个问题，

它在模拟器上运行良好，在我的开发手机上运行良好，但在测试用户手机上运行失败。

这与 Facebook 应用程序和 SSO 有关。

读一读：[http ://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)

它有 3 个解决方案。

我无法让 SSO 工作，所以我选择了选项二，（选择退出 SSO！）这是通过以下方式完成的：

facebook.authorize（这个，权限，Facebook.FORCE_DIALOG_AUTH，这个）；如果您想修复它并让 SSO 正常工作：

为调试 apk 证书正确生成哈希密钥。（在上面的链接中有详细说明）。

参考：

[https://stackoverflow.com/a/7158056/1838457](https://stackoverflow.com/a/7158056/1838457)

# knockout.js - KO 自定义绑定 writeValueToProperty 失败

> ID：13565230
> 
> 赞同：1
> 
> 时间：2012-11-26T12:51:17.743
> 
> 标签：knockout.js, ko-custom-binding

我正在尝试为特殊数字格式创建自定义绑定。

```
 ko.bindingHandlers['valueTest'] = {
        'init': function (element, valueAccessor, allBindingsAccessor) {
            var valueUpdateHandler = function () {
                var modelValue = valueAccessor();
                var elementValue = ko.selectExtensions.readValue(element);
                ko.expressionRewriting.writeValueToProperty(modelValue, allBindingsAccessor, 'value', elementValue);
            }

            ko.utils.registerEventHandler(element, "change", valueUpdateHandler);
        },
        'update': function (element, valueAccessor) {
            var newValue = ko.utils.unwrapObservable(valueAccessor());
            var elementValue = ko.selectExtensions.readValue(element);

            if (newValue !== elementValue) {
                ko.selectExtensions.writeValue(element, newValue.toFixed(2).replace(".", ","));
            }
        }
    }; 
```

也可在小提琴[http://jsfiddle.net/PAFTR/11/](http://jsfiddle.net/PAFTR/11/)

但更新失败（萤火虫说：TypeError：ko.expressionRewriting.writeValueToProperty is not a function）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:59:13.567

看起来这更适合可观察的扩展器？检查我做的这个小提琴

[http://jsfiddle.net/yEgmt/](http://jsfiddle.net/yEgmt/)

它的使用就像

```
this.number = ko.observable().extend({ numeric: true }) 
```

# python - python 卓有成效的函数解释

> ID：13565231
> 
> 赞同：0
> 
> 时间：2012-11-26T12:51:19.187
> 
> 标签：python, function

我正在学习 python 我无法理解这段代码到底做了什么，它给出了一个意想不到的输出。任何人都可以请解释一下。

```
#! /usr/bin/python

dx = int(raw_input("ENTER THE VALUE dx:"))
dy = int(raw_input("ENTER THE VALUE dy:"))

def distance(x1, y1, x2, y2):
    dx = x2 - x1
    dy = y2 - y1
    print "dx is", dx
    print "dy is", dy
    return 0.0

print distance 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:57:01.400

它没有做任何事情，因为您从不调用该函数。它只会打印函数定义的内存地址，这不是很有用。

如果你这样做了`print distance()`，你至少会调用它，它会打印 dx 和 dy，但也会打印 0.0 - 因为这就是你从函数返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:59:06.250

你期望它做什么？

我假设的意思是调用函数，例如`print distance(x1, x2, y1, y2)`，但这只会导致，`0.0`因为这是您返回的值。您似乎也在向用户询问答案（即`dx`和`dy`），而您需要`x1, x2, y1, y2`该功能。在不确切知道您期望什么的情况下，这里有一些代码可能会执行您想要的操作：

```
def distance(x1, y1, x2, y2):
    dx = x2 - x1
    dy = y2 - y1
    print "dx is", dx
    print "dy is", dy

x1 = int(raw_input("ENTER THE VALUE x1:"))
x2 = int(raw_input("ENTER THE VALUE x2:"))
y1 = int(raw_input("ENTER THE VALUE y1:"))
y2 = int(raw_input("ENTER THE VALUE y2:"))

distance(x1, x2, y1, y2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:00:23.157

好吧，前 2 行代码读取了两个值，`dx`并且`dy`. 接下来定义一个函数，其目的是计算（并且可能打印并返回）两个点 x1,y1 和 x2,y2 的距离，但它始终返回 0.0

在最后的语句中，您可能缺少括号，因为这样 `print distance`做是在函数对象上打印一些信息，例如`<function distance at 0xZZZZZZZZZ>`.

一个富有成效的函数是一个返回一个值的函数，所以你想要做的可能是以下内容：

```
px1 = int(raw_input("X1:"))
py1 = int(raw_input("Y1:"))
px2 = int(raw_input("X2:"))
py2 = int(raw_input("Y2:"))

def distance(x1,y1,x2,y2):
    dx = x2 - x1
    dy = y2 - y1
    return dx, dy # return a tuple with the first element being dx and the second dy

print distance(px1,py1,px2,py2) 
```

我更改了输入变量的名称，以便函数的作用更加清晰。

简短回答：“富有成效”的函数返回一个您可以使用的值

# android - iFrame 在 jQuery Mobile 中不起作用（电话差距）

> ID：13565234
> 
> 赞同：0
> 
> 时间：2012-11-26T12:51:28.110
> 
> 标签：android, jquery, html, cordova, jquery-mobile

我的代码是：

```
<div data-role="page" id="pageID">

    <div data-role="header"  data-position="fixed">
        <p>Directions</p>
    </div>

    <div data-role="content">

        <div style="width:100%; height:80%;">
            <iframe src="http://m.google.com"  seamless=""></iframe>     
        </div>

    </div> 

</div> 
```

但是当我来到这个页面时，谷歌没有加载。我正在尝试使用三星 Galaxy S Android 手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T16:05:22.573

这个 iframe 对我有用，但有列表问题

```
<iframe name="frame" src="http://google.com" frameborder="0" style="overflow:hidden;overflow-x:hidden;overflow-y:hidden;height:100%;width:100%;position:absolute;top:0px;left:0px;right:0px;bottom:0px">
    </iframe>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:04:52.420

不要在手机上使用 iFrame 和 JQM。iFrame 不适用于某些内置的 android 浏览器。您是否尝试在移动 chrome 或 firefox 浏览器上对其进行测试？

最坏的情况是使用[此](http://a.shinynew.me/post/19786775381/bridging-the-phonegap-childbrowser-plugin)组件。它是一个 phonegap 插件，用于显示新的浏览器窗口。

[这个](http://jsfiddle.net/Gajotres/7tgaa/)例子应该有效。我已经在我的 Galaxy S3 上对其进行了测试。

```
<iframe style="width: 400px; height: 400px" src="http://m.google.com" frameborder="0" scrolling="no"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T13:09:09.613

阻止 url 也可能有问题。如果您使用 phonegap build.. 将以下行添加到 config.xml。

参考链接：[http://docs.build.phonegap.com/en_US/#googtrans(en)](http://docs.build.phonegap.com/en_US/#googtrans(en))配置块..

```
<plugin name="cordova-plugin-whitelist" version="1"/>
<allow-intent href="http://*/*"/>
<allow-intent href="https://*/*"/>
<allow-intent href="tel:*"/>
<allow-intent href="sms:*"/>
<allow-intent href="mailto:*"/>
<allow-intent href="geo:*"/>
<platform name="android">
    <allow-intent href="market:*"/>
</platform>
<platform name="ios">
    <allow-intent href="itms:*"/>
    <allow-intent href="itms-apps:*"/>
</platform> 
```

确保`<plugin name="cordova-plugin-whitelist" version="1"/>`添加了这个..

# python - cv.MinAreaRect2 和 ArcGIS（GIS 软件）之间的结果差异。可能的错误？

> ID：13565237
> 
> 赞同：2
> 
> 时间：2012-11-26T12:51:33.063
> 
> 标签：python, debugging, opencv, geometry

我有一组从多边形派生的点。我正在测试几种解决方案以获得最小面积或矩形。作为基准，我使用的是 ArcGIS (10.1)。

```
points = [(560036.4495758876, 6362071.890493258),
          (560036.4495758876, 6362070.890493258),
          (560036.9495758876, 6362070.890493258),
          (560036.9495758876, 6362070.390493258),
          (560037.4495758876, 6362070.390493258),
          (560037.4495758876, 6362064.890493258),
          (560036.4495758876, 6362064.890493258),
          (560036.4495758876, 6362063.390493258),
          (560035.4495758876, 6362063.390493258),
          (560035.4495758876, 6362062.390493258),
          (560034.9495758876, 6362062.390493258),
          (560034.9495758876, 6362061.390493258),
          (560032.9495758876, 6362061.390493258),
          (560032.9495758876, 6362061.890493258),
          (560030.4495758876, 6362061.890493258),
          (560030.4495758876, 6362061.390493258),
          (560029.9495758876, 6362061.390493258),
          (560029.9495758876, 6362060.390493258),
          (560029.4495758876, 6362060.390493258),
          (560029.4495758876, 6362059.890493258),
          (560028.9495758876, 6362059.890493258),
          (560028.9495758876, 6362059.390493258),
          (560028.4495758876, 6362059.390493258),
          (560028.4495758876, 6362058.890493258),
          (560027.4495758876, 6362058.890493258),
          (560027.4495758876, 6362058.390493258),
          (560026.9495758876, 6362058.390493258),
          (560026.9495758876, 6362057.890493258),
          (560025.4495758876, 6362057.890493258),
          (560025.4495758876, 6362057.390493258),
          (560023.4495758876, 6362057.390493258),
          (560023.4495758876, 6362060.390493258),
          (560023.9495758876, 6362060.390493258),
          (560023.9495758876, 6362061.890493258),
          (560024.4495758876, 6362061.890493258),
          (560024.4495758876, 6362063.390493258),
          (560024.9495758876, 6362063.390493258),
          (560024.9495758876, 6362064.390493258),
          (560025.4495758876, 6362064.390493258),
          (560025.4495758876, 6362065.390493258),
          (560025.9495758876, 6362065.390493258),
          (560025.9495758876, 6362065.890493258),
          (560026.4495758876, 6362065.890493258),
          (560026.4495758876, 6362066.890493258),
          (560026.9495758876, 6362066.890493258),
          (560026.9495758876, 6362068.390493258),
          (560027.4495758876, 6362068.390493258),
          (560027.4495758876, 6362068.890493258),
          (560027.9495758876, 6362068.890493258),
          (560027.9495758876, 6362069.390493258),
          (560028.4495758876, 6362069.390493258),
          (560028.4495758876, 6362069.890493258),
          (560033.4495758876, 6362069.890493258),
          (560033.4495758876, 6362070.390493258),
          (560033.9495758876, 6362070.390493258),
          (560033.9495758876, 6362070.890493258),
          (560034.4495758876, 6362070.890493258),
          (560034.4495758876, 6362071.390493258),
          (560034.9495758876, 6362071.390493258),
          (560034.9495758876, 6362071.890493258),
          (560036.4495758876, 6362071.890493258)] 
```

一种解决方案是使用`cv.MinAreaRect2()`OpenCV。

> 函数 cv.MinAreaRect2 通过为该集合构建凸包并将旋转卡尺技术应用于该包，为 2D 点集合找到一个最小区域的外接矩形。

```
import cv
# (x,y) - center point of the box
# (w,h) - width and height of the box
# theta - angle of rotation
((x,y),(w,h),th) = cv.MinAreaRect2(points)
print ((x,y),(w,h),th)
((560029.3125, 6362065.5), (10.28591251373291, 18.335756301879883), -63.43495178222656)
# get vertex
box_vtx = cv.BoxPoints(((x,y),(w,h),th))
print box_vtx 
((560035.1875, 6362074.0), (560018.8125, 6362066.0), (560023.4375, 6362057.0), (560039.8125, 6362065.0) 
```

当我转换`box_vtx`shapefile 以便在 ArcGIS 中查看并与[最小边界几何（数据管理）](http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//00170000003q000000)进行比较时，我可以看到这种差异，如下图所示，其中：

*   红色 = 多边形的边界
*   蓝色 = ArGIS (10.1) 中面积最小的矩形
*   黄色和黑色 = OpenCV 中面积最小的矩形

![在此处输入图像描述](../Images/78af443d15c1ed4109139fad65f08d88.png)

使用 OpenCV 与本文中提出的解决方案进行[比较](https://stackoverflow.com/questions/13542855/python-help-to-implement-an-algorithm-to-find-the-minimum-area-rectangle-for-gi)：

```
import osgeo.gdal, ogr
import cv

poly = "...\\polygon.shp"
shp = osgeo.ogr.Open(poly)
layer = shp.GetLayer()
feature = layer.GetFeature(0)
geometry = feature.GetGeometryRef()
pts = geometry.GetGeometryRef(0)
# get point of the polygon border (the points above)
points = []
for p in xrange(pts.GetPointCount()):
    points.append((pts.GetX(p), pts.GetY(p)))
# Convex Hull
CH1 = geometry.ConvexHull
# i didn't find a method to extarct  the points
print CH1()
# works with openCV
cvxHull = cv.ConvexHull2(points, cv.CreateMemStorage(), return_points=True) 
print cvxHull
<cv2.cv.cvseq object at 0x00000000067CCF90> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:28:17.137

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:33:52.150

我在寻找最小面积边界矩形的 Python 解决方案时遇到了这个线程。

这是我的实现，已通过 Matlab 验证：
[https ://stackoverflow.com/a/14675742/1755401](https://stackoverflow.com/a/14675742/1755401)

# python - 在 __exit__ 中由 __enter__ 返回

> ID：13565241
> 
> 赞同：2
> 
> 时间：2012-11-26T12:51:53.397
> 
> 标签：python

例如，我有这个代码：

```
with MyClass() as x:
    print 'I have only {0}'.format(x)
    with MyClass() as y:
        print 'I have {0} and {1}'.format(x, y)
    print 'Again only {0}'.format(x) 
```

`x`并且在退出相应的块`y`后都应该取消初始化。也不是. `with`_`x``y``MyClass`

`__exit__`只有三个参数，每个参数都是 None （如果没有提供异常）。

如何确定`__exit__`刚刚退出的块以及返回的值是什么`__enter__`？

（NB 代码应该是线程安全的）。

* * *

例子：

```
class MyClass(object):
    def __enter__(self):
        if moon_phase > 0:
            return 123
        else:
            return 456
    def __exit__(self):
        number = what_was_returned_by_enter()
        print 'End of block with', number

 with MyClass() as x:
    print x  # 123
    with MyClass() as y:
        print x, 'and', y  # 123 and 456
    # printed "End of block with 456"
    print x  # 123
 # printed "End of block with 123" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:57:13.973

由于您有一个自定义类来处理您的上下文，`self`因此将是上下文管理器实例。

您需要检查其状态（存储在`__init__()`创建时或`__enter__()`调用时）以确定您刚刚退出的状态。

以下示例将 的返回值存储在实例上，因此您可以在被调用`__enter__`时再次检索它：`__exit__`

```
class MyClass(object):
    def __enter__(self):
        if moon_phase > 0:
            self.returnval = 123
        else:
            self.returnval = 456
        return self.returnval

    def __exit__(self, *args):
        number = self.returnval
        print 'End of block with', number 
```

# php - 如何编写适用于所有控制器的 beforeAction()？

> ID：13565244
> 
> 赞同：1
> 
> 时间：2012-11-26T12:52:07.190
> 
> 标签：php, yii

我想在 beforeAction 方法（Yii 框架）中注册一个脚本。但我不想在每个控制器中重复该方法，所以我的问题是如何创建一个所有控制器都将继承的 beforeAction()？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:59:16.613

默认 yiic 生成的 yii webapp 在*project/protected/components/Controller.php*中有一个 Controller 类，应用中的所有控制器都继承自这个 Controller。

该类是添加`beforeAction`.

**编辑：**如果你没有使用 yiic 并且没有这个默认的 Controller 类，可以添加一个从 CController 扩展的新类，然后让你的控制器从这个新类扩展。您可以将控制器的所有通用功能保留在此父控制器类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:00:02.163

您需要在 components 目录中创建 BaseController.php。在这个文件中，您将从 CController 继承您的 BaseController。在那里写下你的 beforeAction。在此之后，您将需要从 BaseController 继承所有控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:04:54.983

1) 创建带有 CController 扩展的通用父控制器（例如 SomeController）

2）在这个Controller的beforeAction()中注册脚本（例如SomeController）

3）扩展您的站点控制器或模块控制器的这个控制器。

```
<?php

class SomeController extends CController
{
    public function beforeAction()
    {
        // Your Register Script
    }
}

class SiteController extends SomeController
{
    // public function actionIndex
} 
```

# c# - 将 Newtonsoft.Json.Linq.JArray 转换为特定对象类型的列表

> ID：13565245
> 
> 赞同：288
> 
> 时间：2012-11-26T12:52:19.760
> 
> 标签：c#, json.net

我有以下类型的变量`{Newtonsoft.Json.Linq.JArray}`。

```
properties["Value"] {[
  {
    "Name": "Username",
    "Selected": true
  },
  {
    "Name": "Password",
    "Selected": true
  }

]} 
```

我想要完成的是将其转换`List<SelectableEnumItem>`为`SelectableEnumItem`以下类型：

```
public class SelectableEnumItem
    {
        public string Name { get; set; }
        public bool Selected { get; set; }
    } 
```

我对编程比较陌生，我不确定这是否可行。任何有关工作示例的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：590
> 
> 时间：2012-11-26T13:00:23.020

只需调用`array.ToObject<List<SelectableEnumItem>>()`方法。它会返回你需要的东西。

文档：[**将 JSON 转换为类型**](http://www.newtonsoft.com/json/help/html/ToObjectType.htm)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-03-23T12:40:55.100

问题中的示例是一个更简单的情况，其中属性名称在 json 和代码中完全匹配。如果属性名称不完全匹配，例如 json 中`"first_name": "Mark"`的属性是并且代码中的属性是`FirstName`然后使用[Select 方法](http://www.newtonsoft.com/json/help/html/DeserializeWithLinq.htm)如下

```
List<SelectableEnumItem> items = ((JArray)array).Select(x => new SelectableEnumItem
{
    FirstName = (string)x["first_name"],
    Selected = (bool)x["selected"]
}).ToList(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-04T16:07:22.180

在我的例子中，API 返回值如下所示：

```
{
  "pageIndex": 1,
  "pageSize": 10,
  "totalCount": 1,
  "totalPageCount": 1,
  "items": [
    {
      "firstName": "Stephen",
      "otherNames": "Ebichondo",
      "phoneNumber": "+254721250736",
      "gender": 0,
      "clientStatus": 0,
      "dateOfBirth": "1979-08-16T00:00:00",
      "nationalID": "21734397",
      "emailAddress": "sebichondo@gmail.com",
      "id": 1,
      "addedDate": "2018-02-02T00:00:00",
      "modifiedDate": "2018-02-02T00:00:00"
    }
  ],
  "hasPreviousPage": false,
  "hasNextPage": false
} 
```

将 items 数组转换为客户端列表的处理如下所示：

```
 if (responseMessage.IsSuccessStatusCode)
        {
            var responseData = responseMessage.Content.ReadAsStringAsync().Result;
            JObject result = JObject.Parse(responseData);

            var clientarray = result["items"].Value<JArray>();
            List<Client> clients = clientarray.ToObject<List<Client>>();
            return View(clients);
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-27T10:23:53.430

我可以想出不同的方法来实现相同的目标

```
IList<SelectableEnumItem> result= array; 
```

或者（我有一些情况，这个不好用）

```
var result = (List<SelectableEnumItem>) array; 
```

或使用 linq 扩展

```
var result = array.CastTo<List<SelectableEnumItem>>(); 
```

或者

```
var result= array.Select(x=> x).ToArray<SelectableEnumItem>(); 
```

或更明确地说

```
var result= array.Select(x=> new SelectableEnumItem{FirstName= x.Name, Selected = bool.Parse(x.selected) }); 
```

请注意上述解决方案我使用了动态对象

我可以想到一些更多的解决方案，它们是上述解决方案的组合。但我认为它涵盖了几乎所有可用的方法。

我自己使用第一个

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-26T19:40:34.903

```
using Newtonsoft.Json.Linq;
using System.Linq;
using System.IO;
using System.Collections.Generic;

public List<string> GetJsonValues(string filePath, string propertyName)
{
  List<string> values = new List<string>();
  string read = string.Empty;
  using (StreamReader r = new StreamReader(filePath))
  {
    var json = r.ReadToEnd();
    var jObj = JObject.Parse(json);
    foreach (var j in jObj.Properties())
    {
      if (j.Name.Equals(propertyName))
      {
        var value = jObj[j.Name] as JArray;
        return values = value.ToObject<List<string>>();
      }
    }
    return values;
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-12T07:27:40.957

使用 IList 获取 JArray 计数并使用循环转换为列表

```
 var array = result["items"].Value<JArray>();

        IList collection = (IList)array;

        var list = new List<string>();

        for (int i = 0; i < collection.Count; j++)
            {
              list.Add(collection[i].ToString());             
            } 
```

# python - 对列表中连续出现的相同重复项目进行分组

> ID：13565248
> 
> 赞同：2
> 
> 时间：2012-11-26T12:52:23.060
> 
> 标签：python, list, grouping, recurring

例如，我们有一个这样的列表：

```
L = ["item1", "item2", "item3", "item3", "item3", "item1", "item2", "item4", "item4", "item4"] 
```

我想将它们打包成以下形式的元组列表：

```
[("item1", 1), ("item2", 1), ("item3", 3),... ("item1", 1)] 
```

我已经开发了一种类似的算法来获得：

```
{item1: 2, item2: 2, ...} 
```

（即使它们不是邻居，它也会找到所有出现并计算它们......）

但是，我希望它只将那些具有相同*且*是邻居的项目分组（即一起出现在一行中），我怎么能做到这一点？

*并不是我不知道该怎么做，而是我倾向于编写很长的代码，并且在这种情况下我想要一个优雅且简单的解决方案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:02:16.190

这也使用[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)（生成器版本）：

```
from itertools import groupby
counts = ((k, sum(1 for _ in g)) for k, g in groupby(l))
>>> list(counts)
[('item1', 1),
 ('item2', 1),
 ('item3', 3),
 ('item1', 1),
 ('item2', 1),
 ('item4', 3)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T13:00:25.860

使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby), 项目被重复，因此您可能无法将所有值存储在字典中，因为`item1`&`item2`被重复：

```
In [21]: l = ["item1", "item2", "item3", "item3", "item3", "item1", "item2", "item4", "item4", "item4"]

In [22]: for k,g in groupby(l):
    print "{0}:{1}".format(k,len(list(g)))
   ....:     
item1:1
item2:1
item3:3
item1:1
item2:1
item4:3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:44:45.170

```
python 3.2
from itertools import groupby

>>> [(i,(list(v)).count(i)) for i,v in groupby(L)] 
```

# android - 直接从 Eclipse 在 android 设备中启动应用程序（使用 google apis）

> ID：13565252
> 
> 赞同：-1
> 
> 时间：2012-11-26T12:52:29.000
> 
> 标签：android, google-api, android-keystore, launching

我的 android 应用程序正在使用 MapView，因此使用了 google api。问题是，为了测试我的应用程序，我必须使用我的密钥库导出 apk 文件，在设备中安装应用程序，然后运行它以检查输出，这会消耗大量时间。有没有更好的方法来使用eclipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:57:55.090

就在这里。

使用位于您的用户文件夹中的 debug.keystore 创建一个“调试映射密钥”，例如：

```
 /Users/<username>/.android/debug.keystore 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:00:34.903

按照此页面上的行[https://developers.google.com/maps/documentation/android/mapkey#getdebugfingerprint](https://developers.google.com/maps/documentation/android/mapkey#getdebugfingerprint)

并在此处注册用于调试的地图密钥 [https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

这样，您将获得一个调试地图密钥，您可以在调试期间将其用于您的地图视图。

# asp.net-mvc - 如何在 MVC 3 和 MVC 4 项目之间共享 web.config 文件

> ID：13565254
> 
> 赞同：3
> 
> 时间：2012-11-26T12:52:31.823
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config, asp.net-mvc-4

我有一个 MVC 3.0 和 MVC 4.0 项目并排

![在此处输入图像描述](../Images/bf5d394af8f582cdb00f5ceb6d8ce7ea.png)

我这样做是为了在两个解决方案之间共享资源。当我更改配置文件时它工作正常。细节的变化。

在 MVC 3 中。

```
<assemblies>
  <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
</assemblies>

<pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages"/>
      </namespaces>
    </pages> 
```

当我删除`<add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />`MVC 4 工作正常。在我在 MVC 3.0 中调试项目后，它显示错误 msg( `The type or namespace name 'Ajax' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?)` )，因为我删除了“System.Web.Mvc，Version=3.0.0.0”，如果我必须运行这意味着我必须再次放置 refreance。在这里，我正在手动执行所有操作，有什么方法可以自动执行此操作吗？

例如，服务器端的两个 xml 文件我读取了该 xml 文件并替换了配置文件。

**已经试过了。**

在 MVC 4 项目中，我使用它`WebConfigurationManager`来删除它的工作原理，在我打开 MVC 3 后它显示错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:11:19.293

您可以为 Mvc3 创建新的构建配置并运行将覆盖您的 web.config 的预构建事件，这是我从[Hanselman](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)采用的想法。

如果您按照链接进行设置，则设置的唯一区别是您将拥有一个名为

```
Web.Config.Mvc3  (and possibly Web.Config.Mvc3Release) 
```

并将 Mvc 保留为您的默认构建

```
Web.Config.Debug
Web.Config.Release 
```

# jquery - 无法从我网站上的其他网站运行 flash live streming

> ID：13565256
> 
> 赞同：0
> 
> 时间：2012-11-26T12:52:40.580
> 
> 标签：jquery, html, flash

我正在尝试在我的网站上使用以下直播，但出现连接错误我可以在我的网站上使用它吗

它是保护一些方法还是我在我的代码中犯了错误

我想消费直播的[链接](http://www.dmi.ae/live.asp?lang=en&ChannelID=2)

[小提琴](http://jsfiddle.net/VjatJ/)的例子

```
<object width="650" height="476" name="single1" id="single1" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
        <param value="http://statics.dubaimedia.ae/flv-player/player.swf" name="movie">
        <param value="true" name="allowfullscreen">
        <param value="always" name="allowscriptaccess">
        <param value="transparent" name="wmode">
        <param value="playlistfile=http://stream4.dmi.ae/live4/smil:smartdubaisport.smil/jwplayer.rss&amp;dock=false&amp;rtmp.subscribe=true&amp;autoplay=true" name="flashvars">
        <param value="true" name="autoplay">
        <embed width="650" height="476" autoplay="true" flashvars="playlistfile=http://stream4.dmi.ae/live4/smil:smartdubaisport.smil/jwplayer.rss&amp;dock=false&amp;rtmp.subscribe=true&amp;autoplay=true" wmode="transparent" allowfullscreen="true" allowscriptaccess="always" bgcolor="undefined" src="http://statics.dubaimedia.ae/flv-player/player.swf" name="single2" id="single2" type="application/x-shockwave-flash"></object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:19:27.153

它根据播放器所在页面的 URL 限制流式传输。证明：

*   编辑您的`hosts`文件并将域`www.dmi.ae`指向`127.0.0.1`
*   将您的 html 保存在本地 Web 服务器下并使用`http://www.dmi.ae/...path to your html`
*   视频将播放

# mysql - 多个 MySQL 选择

> ID：13565264
> 
> 赞同：1
> 
> 时间：2012-11-26T12:53:28.357
> 
> 标签：mysql, sql, select, join

我有一个查询，但我想从另一个表中添加另一个字段...

这就是我现在使用的：

```
SELECT * 
FROM tournaments t , tournament_participants t1 
WHERE t.tournament_id = t1.tournament_id 
ORDER BY t1.tournament_id, t1.team_id; 
```

这工作正常，但我也想使用`team_id`作为此查询的一部分从团队表中获取团队名称......

我不知道该怎么做，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:56:55.037

只需使用连接：

```
SELECT * FROM tournaments AS t 
LEFT JOIN tournament_partecipants AS tp ON t.tournament_id = tp.tournament_id 
LEFT JOIN team ON tp.team_id = team.team_id 
ORDER BY tp.tournament_id, tp.team_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:20:01.967

我不知道你有什么样的表模式。以下查询基于许多假设。所以我可能对你真正需要的东西有误。请看一下。

询问：

```
select p.pid, p.pname, t.id as teamID
from participants p
left join tournament tt
on p.ttnid = tt.tnid
inner join team t
on tt.tnid = t.ttid 
```

结果：

```
PID     PNAME   TEAMID
1       john    10
2       tim     10
3       alex    20
4       ron     20
5       kate    30 
```

参考：[SQLFIDDLE](http://sqlfiddle.com/#!2/66c2f/2)

如果您需要任何不同的解决方案或进一步澄清，请告诉我们:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:57:54.720

尝试这个：

```
SELECT t.*, t1.*, t2.name 
FROM tournaments t 
INNER JOIN tournament_participants t1 ON t.tournament_id = t1.tournament_id
INNER JOIN teams t2 ON t1.team_id  = t2.team_id 
ORDER BY t1.tournament_id, t1.team_id; 
```

# c# - 打开 WPF 窗口 MVVM 并关闭它

> ID：13565267
> 
> 赞同：0
> 
> 时间：2012-11-26T12:53:32.853
> 
> 标签：c#, wpf, mvvm, visual-studio-2012

> **可能重复：**
> [WPF MVVM 新手 - ViewModel 应该如何关闭表单？](https://stackoverflow.com/questions/501886/wpf-mvvm-newbie-how-should-the-viewmodel-close-the-form)

我搜索了stackoverflow，但我认为给出的答案不适用于我的，或者我无法理解如何应用它们。

我有一个沼泽标准 MVVM WPF 应用程序。MVVM 部分由一个 RelayCommand 类和一个 ViewModelBase 类以及一个扩展 ViewModelBase 的 WorkspaceViewModel 类组成。

我有两个窗口，MainWindow 和 CustomMessageBox 窗口（实际上为用户提供了一个问题和两个答案）。我在 MainWindow 中使用此代码打开 CustomMessageBox（第二个窗口）：

```
public ICommand BrowseFileFolderCommand
    {
        get
        {
            if (_browseFileFolderCommand == null)
            {
                _browseFileFolderCommand = new RelayCommand(o =>
                    {
                        var messageViewModel = new MessageBoxViewModel("Add a Folder or File", "What do you wish to add, folder or file?", "Folder", "File");
                        var choice = new CustomMessageBox()
                        {
                            DataContext = messageViewModel
                        };
                        choice.ShowDialog();

                        if (messageViewModel.CustomMessageBoxDialogResult == DialogResult.Yes)
                        {
                            switch (messageViewModel.ChosenEntity)
                            {
                                case SelectedAnswer.Answer1:
                                    // Get folder shizz
                                    break;
                                case SelectedAnswer.Answer2:
                                    // Get file shizz
                                    break;
                                default:
                                    break;
                            }
                        }
                    }, null);
            }
            return _browseFileFolderCommand;
        }
    } 
```

启动 CustomMessageBox 后，我无法使用 CloseCommand 将其关闭。当我尝试调试 CustomMessageBox 的加载时，似乎所有的 ICommand 在我按下任何东西之前都被触发了？

WorkspaceViewModel 具有 CloseCommand：

```
 #region CloseCommand

    /// <summary>
    /// Returns the command that, when invoked, attempts
    /// to remove this workspace from the user interface.
    /// </summary>
    public ICommand CloseCommand
    {
        get
        {
            if (_closeCommand == null)
                _closeCommand = new RelayCommand(param => this.OnRequestClose());

            return _closeCommand;
        }
    }

    #endregion // CloseCommand

    #region RequestClose [event]

    /// <summary>
    /// Raised when this workspace should be removed from the UI.
    /// </summary>
    public event EventHandler RequestClose;

    void OnRequestClose()
    {
        EventHandler handler = this.RequestClose;
        if (handler != null)
            handler(this, EventArgs.Empty);
    }

    #endregion // RequestClose [event] 
```

有没有人有任何想法？我遗漏了什么重要的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:42:47.147

当我需要完成此操作时，我会从我的`Command.Execute`逻辑中调用以下代码行：

```
App.Current.Windows.Cast<Window>().Where(win => win is CustomMessageBox).FirstOrDefault().Close(); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:04:49.113

我实际上并没有将任何方法附加到事件处理程序，所以当事件处理程序被调用时，什么也没做，因为代码走到了死胡同，所以我更改了代码并将窗口的关闭方法附加到事件ViewModel 的处理程序：

```
messageViewModel.RequestClose += (s, e) => choice.Close(); 
```

这是完整的代码：

```
public ICommand BrowseFileFolderCommand
{
    get
    {
        if (_browseFileFolderCommand == null)
        {
            _browseFileFolderCommand = new RelayCommand(() =>
                {
                    var messageViewModel = new MessageBoxViewModel("Add a Folder or File", "What do you wish to add, folder or file?", "Folder", "File");
                    var choice = new CustomMessageBox()
                    {
                        DataContext = messageViewModel
                    };
                    // Added this line
                    messageViewModel.RequestClose += (s, e) => choice.Close();
                    choice.ShowDialog();

                    if (messageViewModel.CustomMessageBoxDialogResult == DialogResult.Yes)
                    {
                        switch (messageViewModel.ChosenEntity)
                        {
                            case SelectedAnswer.Answer1:
                                // Get folder shizz
                                break;
                            case SelectedAnswer.Answer2:
                                // Get file shizz
                                break;
                            default:
                                break;
                        }
                    }
                }, null);
        }
        return _browseFileFolderCommand;
    }
} 
```

感谢大家帮助我得到答案，这只是为了特别澄清我的问题。

谢谢。

# symfony - Doctrine 自定义类型：如何从配置文件中加载值？

> ID：13565271
> 
> 赞同：0
> 
> 时间：2012-11-26T12:53:46.273
> 
> 标签：symfony, dependency-injection, doctrine-orm, custom-type

我在 Symfony 2 环境中使用 Doctrine 2。

我创建了一个自定义数据类型，它扩展了 \Doctrine\DBAL\Types\Type。此数据类型应将存储在数据库中的整数值映射到特定字符串（如 ENUM，但整数和字符串必须可访问）。

目前，这些值的映射在教义类型中使用包含和数组的类变量进行硬编码。

```
class xyType extends \Doctrine\DBAL\Types\Type {
  public static $messageTypes = array(
    10 => "Wareneingang",
    20 => "Polstern",
    .
    .
    .
  }

  .
  .
} 
```

现在我想把这个数组放到这个包的 config.yml 中。但我不知道如何在这个类型类中使用依赖注入，以便能够以任何方式访问我的配置参数......

我希望你能帮助我。我也愿意接受其他想法来实现这一点。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:07:02.197

是的，你不能在你的类型类中访问 DI，但是有捆绑初始化阶段，你可以将你的类型从配置保存到你的静态属性。所以我建议使用 YourBundleExtension 来解决这个问题。

# c# - 线程调用问题

> ID：13565273
> 
> 赞同：0
> 
> 时间：2012-11-26T12:53:54.343
> 
> 标签：c#, multithreading, invoke

我在这方面有点新手，但我试图让黑白棋游戏上的 UI 运行在与移动选择部分不同的线程上，但我在单击按钮时调用线程时遇到了一些问题

```
private void playerMoveOKButton_Click(object sender, EventArgs e)
{
       ReversiT.Invoke();
}

public void ReversiT() {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:59:25.957

如果您尝试创建一个新线程，您可以执行以下操作：

```
Thread thread = new Thread(ReversiT);
thread.Start(); 
```

**[不过， Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)**用于不同的目的。它用于在特定线程上运行方法（例如，如果您在单独的线程上运行一段代码但想要进行 UI 更改，您将需要使用 Invoke 在 UI 线程上进行这些更改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:56:19.467

你不能调用这样的方法。您只能调用委托。此外，调用`Invoke`不会产生新线程。

您可以阅读有关委托的[教程，以及](http://msdn.microsoft.com/en-us/library/aa288459%28VS.71%29.aspx)[有关](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28VS.80%29.aspx)线程的教程。另外，您的问题留下了很多讨论空间：

1.  您对使用线程有什么期望？
2.  您是否考虑过进行后台工作的不同选择？

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T12:58:39.100

使用以下

```
this.Invoke(ReversiT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:02:01.603

我会创建一个[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/4852et58.aspx)来为我处理所有事情，设置它的`DoWork`事件来调用你的 move 方法（确保你的 move 方法不接触 UI，或者如果必须，调用 UI 线程上的控件）。

我还设置了一个方法来更新 BackgroundWorker`RunWorkerCompleted`事件的 UI。

现在在上面的按钮单击事件上，调用 BGW 的`RunWorkerAsync()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:43:00.450

我认为您需要考虑一下您实际上正在努力实现的目标。在 UI 中的单独线程上运行代码是一种用于阻止 UI 挂起的技术。但是，有些任务必须在 UI 线程上发生，因此不能从另一个线程运行。

您需要打破逻辑，以便您可以确定哪些部分需要在 UI 线程上运行（与 UI 上的控件交互的任何内容）以及可以在单独线程上运行的任何内容。

您最终会得到如下代码（例如）：

```
private void playerMoveOKButton_Click(object sender, EventArgs e)
{
    //thread is merely used as an example
    //you could also use a BackgroundWorker or a task
    var thread = new Thread(NonUiLogic);
    thread.Start();
}

private void NonUiLogic()
{
    ...
    //execute logic that doesn't touch UI
    ...

    BeginInvoke(ReversiT);
}

public void ReversiT() {...} 
```

一旦你完成了这个练习，你可能会发现实际上在 UI 线程之外几乎没有什么可以发生的，所以你真的没有从使用线程中获得任何好处。

# java - 在 UNIX 系统中用 java 加载 DLL

> ID：13565280
> 
> 赞同：1
> 
> 时间：2012-11-26T12:54:33.900
> 
> 标签：java, unix, dll

我知道可以在 java 中加载 DLL（Windows 库）。

而且我知道编译的java程序可以在任何地方运行..

加载 DLL 的 java 程序可以在 Unix 环境中运行吗？（如果那里存在 DLL 文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:58:07.033

不可以。DLL 运行与 UNIX 操作系统不兼容的本机 Windows 指令。*但是，可以*使用[JNI](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/)访问共享库 (.so) 。

为确保可移植的“一次编写，随处运行”模型，应避免调用本机库以支持纯 Java 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:58:56.130

我会非常惊讶。DLL（前提是它是本机的）将使用操作系统和特定平台构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T12:58:57.947

不，你不能把 Windows PE/COFF DLL 放在 Unix 环境中，它就是行不通的。（除非你在谈论 Cygwin/MSYS）

您必须为目标系统编译库并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:04:47.553

确实可以在 unix 中加载 DLL。然而，许多 dll 使用在 UNIX 上不可用的 windows API。您还必须检查您可能会遇到的版权问题。使用 JNI 可以访问本机库。但这（在 unix 中加载 DLL）不是受支持且可靠的配置。

给你一个简短的答案和一个简短的建议：答案是否定的，建议不要浪费你的时间这样做。

# iphone - 在 iOS 的 Unity3d 游戏中启用本地化

> ID：13565282
> 
> 赞同：0
> 
> 时间：2012-11-26T12:54:41.230
> 
> 标签：iphone, ios, unity3d, app-store-connect

我们在 Unity3D 插件的帮助下实现了 Unity3d 游戏的本地化，加载时定义语言，所需语言替换默认语言（来自 xml）。但是在为ios组装时，ItunesConnect认为我们的游戏只支持英文。我们应该怎么做才能明确我们有本地化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:57:01.720

您必须在 iTunes Connect 上手动输入支持的游戏/应用程序语言。

来自 iTunes Connect 的注意事项：

> 如果您的应用版本处于可编辑状态，您只能添加新语言。要添加新语言，您必须从应用摘要模块提交新的应用版本或拒绝此版本。

# php - PHP会话：总是发送两个值

> ID：13565285
> 
> 赞同：0
> 
> 时间：2012-11-26T12:54:47.360
> 
> 标签：php, session, hyperlink

我对 PHP 还很陌生，但我试图找到迄今为止效果很好的方法。

问题如下：我有一个包含 2 个链接的网站。两者都应该重定向到同一个第二个网站，但根据点击的链接，一些值应该会改变。我试图为此使用 PHP 会话。

这是到目前为止的代码：

**链接1：**

```
<a href="<? echo $link ?>" class="helsinki" onclick="<? $_SESSION['clicked']= "helsinki"; ?>"^^Helsinki^^</a> 
```

**链接2：**

```
<a href="<? echo $link ?>"  class="seattle" onclick="<? $_SESSION['clicked']= "seattle"; ?>">^^Seattle^^</a> 
```

现在，如果我尝试读取在下侧单击了哪个链接，如下所示：

```
<? if(isset($_SESSION['clicked']))
        echo "clicked ". $_SESSION['clicked'];
?> 
```

我总是看到“西雅图”，赫尔辛基从来没有出现过，尽管（我想）如果单击西雅图链接，我会输入西雅图。显然不是那样...有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:04:46.840

不确定这是否有用，但您可以创建一个“重定向器”。它将用户带到服务器端页面，该页面会将他们重定向到最终页面，同时更改会话。

这页纸：

```
<a href="redirector.php?link=helsinki"> ... </a>
<a href="redirector.php?link=seattle"> ... </a> 
```

代码`redirector.php`：

```
<?php

session_start();
// determine where to redirect user (could be done with database or array of options)
switch ($_GET['link']) {
    case 'helsinki':
        header('Location: /link/to/helsinki');
        break;

    case 'seattle':
        header('Location: /link/to/seattle');
        break;

    default:
        return;
}
$_SESSION['clicked'] = $_GET['link']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:58:17.187

这是因为 PHP 代码是服务器端的，因此在页面请求时执行。所以`$_SESSION['clicked']`设置为`helsinki`然后`seattle`在您的第一页加载时重置。您可能希望使用`$_GET`变量而不是`$_SESSION`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:01:20.537

等等等等：PHP 是“服务器端”，javascript 是“客户端”。这意味着您将始终在 javascript 之前执行 PHP。

您想要实现的目标可以简单地使用 GET 变量完成：

```
<a href="<?= $link ?>?city=seattle">^^Seattle^^</a>
<a href="<?= $link ?>?city=helsinki">^^Helsinki^^</a> 
```

与在第二个站点相比，您可以获得我们参数的值：

```
$city = $_GET['city']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:03:59.283

您不能在`onclick`事件中编写 PHP 代码。如果你想那样做，你应该使用 Javascript/AJAX。即使你这样做，你仍然不会得到你想要的结果，因为 AJAX 请求会延迟几秒钟。

我认为做这种事情的正确方法如下：

```
<a href="change_city.php?city=helsinki" class="helsinki">Helsinki"</a> 
```

这是`change_city.php`：

```
<?php

$_SESSION["clicked"] = $_GET["city"];

?> 
```

如果您仍想使用`$link`，那么您只需将上面的代码放在 PHP 文件的顶部即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:01:45.283

```
<a href="<? echo $link.'?location="helsinki"'; ?>">"^^Helsinki^^</a>
<a href="<? echo $link.'?location="seattle"'; ?>">"^^Seattle^^</a> 
```

并`$_GET['location']`在另一页查看天气是*赫尔辛基*还是*西雅图*。 `$link`两个链接应该相同。

此外，您不能将 PHP（服务器端）与 Javascript（客户端）混合使用。查一下为什么会这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T13:01:36.853

您正在混淆 Javascript 和 PHP。

PHP 是服务器端，即所有 PHP 代码都在服务器端解析和执行，*然后*发送到客户端。

所以如果你写

```
line #1: <a href="<? echo $link ?>"  class="helsinki" onclick="<? $_SESSION['clicked']= "helsinki"; ?>">^^Helsinki^^</a> 
```

接着

```
line #2: <a href="<? echo $link ?>"  class="seattle" onclick="<? $_SESSION['clicked']= "seattle"; ?>">^^Seattle^^</a> 
```

的值`$_SESSION['clicked']`总是首先是“Helsinki”（第 1 行），但随后立即被“Seattle”覆盖（第 2 行）。

为了实现你想让脚本实现的东西，例如如下：

```
<a href="?location=helsinki" class="helsinki">^^Helsinki^^</a>
<a href="?location=seattle" class="seattle">^^Seattle^^</a> 
```

然后从 PHP 变量中捕获发送的变量`$_GET`：

```
if (isset($_GET['location'])) {
    if ($_GET['location'] == "helsinki") {
        // Whatever
    }
    elseif ($_GET['location'] == "seattle") {
        // You want
    }
} 
```

# c# - 将 C# 和经典 ASP 与虚拟目录混合

> ID：13565286
> 
> 赞同：0
> 
> 时间：2012-11-26T12:54:51.227
> 
> 标签：c#, iis, iis-7, asp-classic, iis-6

我的任务是将旧的经典 ASP 应用程序从 IIS6 移动到 IIS7 服务器，在这样做的同时，我还应该使我们能够在 asp.net 中创建新页面（将主要是用于 ajax 请求的 ashx 文件/ api，但我敢肯定，当我们将越来越多的代码移至 asp.net 时，它也会包含 .aspx 页面）。

虽然我敢打赌这已经很棘手了，但由于旧的经典 ASP 的设置方式，它变得更加复杂。

实际上，整个程序应该是一个虚拟目录，而 IIS 站点本身只是保存一个包含客户特定信息的文件 - 这意味着您必须设置站点，写入客户特定信息，然后添加虚拟目录。

这意味着程序本身正在使用它认为是根的东西进行编程和构建 - 但是当它实际上是从网络上运行时，它将是 /in/a/subdir/ ，而不是使 asp.net 抛出错误能够找到代码隐藏类。

我的问题是：您将如何在 asp classic 和 asp.net 之间建立一个混合环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:08:43.983

我过去看到的做法是让 .NET 在运行 ASP 的根网站内的虚拟目录中运行，并让 .NET 虚拟目录在其自己的应用程序池中运行。

所以你的 IIS 看起来像这样：

*   默认网站 <-- 应用程序池 1 下的经典 ASP
    *   VirtualDirectory1 <-- App Pool 2下的.NET，指向.NET文件
    *   其余的经典 ASP 东西

我不是 100% 清楚您当前的 ASP 站点是如何设置的，但希望这是一个开始。

# django - Django 是否正在检查更改的参数？

> ID：13565295
> 
> 赞同：0
> 
> 时间：2012-11-26T12:55:22.320
> 
> 标签：django, django-models

在 django 中，我倾向于检查更改并仅在需要时调用 save 。例如，我有以下代码。

```
 # self == some Model...

    save_required = False
    if self.pct_complete != pct_complete:
        self.pct_complete = pct_complete
        save_required = True
    if self.phase_pct_complete != phase_pct_complete:
        self.phase_pct_complete = phase_pct_complete
        save_required = True
    if self.is_eligible_for_next_phase != is_eligible_for_next_phase:
        self.is_eligible_for_next_phase = is_eligible_for_next_phase
        save_required = True
    if save_required:
        self.save() 
```

这是基于我[读到](https://code.djangoproject.com/ticket/4102)的评论，其中 Django 似乎没有跟踪模型的“之前”和“之后”状态。

**问题：**

我使用其他应用程序没有看到很多人跟踪状态并仅在需要时保存。这是有原因的还是我过于偏执？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:01:18.327

除非您的列中有大量数据或高延迟数据库连接或其他一些极端情况，否则我认为没有真正需要这样做。

在任何情况下，这个新功能都可以帮助您整理代码： [https ://docs.djangoproject.com/en/dev/releases/1.5/#support-for-saving-a-subset-of-model-s-fields](https://docs.djangoproject.com/en/dev/releases/1.5/#support-for-saving-a-subset-of-model-s-fields)

# java - 简单的客户端/服务器套接字应用程序 SocketException：连接重置

> ID：13565296
> 
> 赞同：2
> 
> 时间：2012-11-26T12:55:27.110
> 
> 标签：java, multithreading, sockets, client

所以我正在使用套接字做一个简单的客户端服务器程序。主要是我从[KnockKnockServer](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)获取代码，但我使用线程实现了客户端（这对我来说是必要的，因为我想稍后在 android 应用程序中使用它）

```
import java.net.*;
import java.io.*;

public class HelpMeServer {
public static void main(String[] args) throws IOException {
    Database db=new Database();
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(50000);
        System.out.println("Listening on port 911");
    } catch (IOException e) {
        System.err.println("Could not listen on port: 911.");
        System.exit(1);
    }

    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
        System.out.println("incomig");
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
    System.out.println("getting printwriter and bufferedreader");
    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
    BufferedReader in = 
        new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
    String inputLine, outputLine;

    Protocol kkp = new Protocol(db);
    // initiate conversation with client
    System.out.println("listening..");
//Here the exception is thrown.
    while ((inputLine = in.readLine()) != null) {
         kkp.processInput(inputLine);
         //if (outputLine.equals("Bye."))
            //break;
    }        out.close();
    in.close();
    clientSocket.close();
    serverSocket.close();
}
}
import java.net.*;
import java.io.*;

public class Protocol {
private static final int WAITING = 0;
private static final int REGISTERING = 1;
private static final int LOGIN = 2;

private int state = WAITING;
private Database db;
private String email;
private String password;
public Protocol(Database db)
{
    this.db=db;
    email=null;
    password=null;
}
public void processInput(String theInput) {
    System.out.println("Cliet: "+theInput);

    if (state == WAITING) {
        if(theInput.equals("register"))
            {
            state=REGISTERING;
            System.out.println("set state to registering");
            }
        else if(theInput=="login"){
            state=LOGIN;
            System.out.println("set state to registering");
        }
        }

    else if(state == REGISTERING)
    {
        if(email==null) {
            email=theInput;
            System.out.println("set email to "+email);
        }
        else {
            password=theInput;
            System.out.println("saving "+email);
            db.addUser(new String(email), new String(password));
            password=null;
            email=null;
            state=WAITING;
        }
    }
}
}
 import java.io.*;
 import java.net.*;

public class NetworkingThread extends Thread{

Socket kkSocket;
PrintWriter out;
BufferedReader in;
public void run()
    {
    kkSocket = null;
    out = null;
    in = null;

    try {
        kkSocket = new Socket("localhost", 50000);
        out = new PrintWriter(kkSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: taranis.");
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection to: taranis.");
        System.exit(1);
    }   

}
public void close()
{
    out.close();
    try {
        in.close();
        kkSocket.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
public void write(String s)
{
    out.println(s);  
    out.flush();
}
}

public class go {

/**
 * @param args
 */
public static void main(String[] args) {
        NetworkingThread n=new NetworkingThread();
    n.start();
    n.write("register");
    n.write("a@gmail.com");
    n.write("password");
    n.close();

}

 } 
```

我的错误：

```
Exception in thread "main" java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at java.io.BufferedReader.fill(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at HelpMeServer.main(HelpMeServer.java:34) 
```

如果我使用此代码并放入 NetworkThread 的 run 方法，我的错误就会消失。但我不能在我的应用程序中使用它，我必须从外部调用这些方法

```
n.write("register");
n.write("a@gmail.com");
n.write("password");
n.close(); 
```

所以我根据您的建议进行了更改（在同一个地方仍然是同样的错误）

```
import java.net.*;
import java.io.*;

public class HelpMeServer {
 public static void main(String[] args) throws IOException {
    Database db=new Database();
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(50000);
        System.out.println("Listening on port 911");
    } catch (IOException e) {
        System.err.println("Could not listen on port: 911.");
        System.exit(1);
    }

   while(true)
   {
    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
        System.out.println("incomig");
        ClientThread t=new ClientThread(clientSocket,db);
        t.start();
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
   }
  }
          }

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class ClientThread extends Thread {

Socket clientSocket;
Database db;
public ClientThread(Socket s,Database db)
{
    clientSocket=s;
    this.db=db;
}
public void run()
{
     System.out.println("getting printwriter and bufferedreader");
        PrintWriter out;
        try {
        out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = 
        new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
                String inputLine, outputLine;

                Protocol kkp = new Protocol(db);
                System.out.println("listening..");
                while ((inputLine = in.readLine()) != null) {//error!
                     kkp.processInput(inputLine);
                     //if (outputLine.equals("Bye."))
                        //break;
                } 
                out.close();
               in.close();
               clientSocket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:04:07.683

要完成这项工作，您必须将其放入`serverSocket.accept()`循环中。目前您收到一条消息，然后关闭服务器套接字，因此任何后续连接到您的服务器的尝试都将被拒绝，因为没有服务器套接字侦听。

# javascript - 将颜色填充到不同的 HTML 形状

> ID：13565312
> 
> 赞同：1
> 
> 时间：2012-11-26T12:56:47.080
> 
> 标签：javascript, html, canvas

我在 html 代码中应用一些图像作为 div 的背景图像。图像尺寸可以根据用户的要求改变，图像可以是任何形状（例如云或标注或气球）。所有应用的图像都是透明的。

现在我想为这些形状应用颜色。如果我将 background-color 写入 div / span 标签，它会覆盖整个 div 并且我不能使用画布，因为图像尺寸会发生变化。

有什么办法吗？

**代码：**

```
<div style="background-color:blue;height:400px; width:400px;background-size: 100% 100%;background-repeat: no-repeat; background-image: url('cloud7.png'); position:absolute; top:10px; left:10px; height:400px; width:400px;" /> 

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:47:39.087

您可以为此使用掩码。不幸的是，它们目前仅[在 Webkit 浏览器中受支持](http://caniuse.com/#feat=css-masks)。

```
<div style="background-color:blue;height:400px; width:400px; background-size:100% 100%;background-repeat: no-repeat; -webkit-mask: url('cloud7.png'); position:absolute; top:10px; left:10px; height:400px; width:400px;" /> 

</div> 
```

# java - 将 JTree (CheckboxTree) 添加到 JDialog

> ID：13565313
> 
> 赞同：0
> 
> 时间：2012-11-26T12:56:52.977
> 
> 标签：java, swing, netbeans, jtree, jdialog

这可能是一个简单的问题，我不太习惯 Java 编程。但我需要创建一个带有 CheckboxTree 的对话框（带有复选框的变体`JTree`，请参阅[http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html)）

请注意：我已经在`JDialog`NetBeans 的图形环境中创建了，所以它已经生成了添加按钮等的代码。所以我需要知道在创建主要部分之后如何添加这棵树，可以这么说......也许就是这样问题，因为如果我这样做：

```
 JPanel panel = new JPanel();
   this.setContentPane(panel); 
```

然后我实际上看到树出现在对话框中，但是所有的按钮和所有的都不见了......

我已经能够将它添加到一个`JFrame`和一个选项窗格中，但我希望它在一个自定义的`JDialog`. 谁能用非常简单的术语向我解释我需要做什么？

到目前为止，这是我微弱的尝试：

JDialog 的构造函数：

```
public MetadataUI(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();

    Container panel = getContentPane();
    panel.add(getTree());
    panel.repaint();
    this.pack();
} 
```

创建复选框树的 getTree 方法：

```
private static CheckboxTree getTree() {
    DefaultMutableTreeNode root, child;

    root = new DefaultMutableTreeNode("root");

    child = new DefaultMutableTreeNode("Colors");
    root.add(child);
    child.add(new DefaultMutableTreeNode("Cyan"));
    child.add(new DefaultMutableTreeNode("Magenta"));
    child.add(new DefaultMutableTreeNode("Yellow"));
    child.add(new DefaultMutableTreeNode("Black"));

    CheckboxTree checkboxTree = new CheckboxTree(root);
    checkboxTree.setVisible(true);
    return checkboxTree;
} 
```

这次重新粉刷和所有这一切都是基于我在谷歌上搜索到的东西的最后一次尝试，但它没有任何区别，所以我猜我已经走了。

添加树并使其可见的最简单方法将不胜感激。它似乎`JTree`与添加它完全一样，但我无法让它工作。因此，即使没有人使用过这个特定的 checkboxtree 插件，在 a 中使用 a 的相同（最简单的）代码`JTree`也`JDialog`可能会做！

编辑：

作为对 Andrew 的回应，这里是与常规 JTree 相同的事情（我的最佳尝试）：

```
private static JTree getTree() {
    DefaultMutableTreeNode root, child;

    root = new DefaultMutableTreeNode("root");

    child = new DefaultMutableTreeNode("Colors");
    root.add(child);
    child.add(new DefaultMutableTreeNode("Cyan"));
    child.add(new DefaultMutableTreeNode("Magenta"));
    child.add(new DefaultMutableTreeNode("Yellow"));
    child.add(new DefaultMutableTreeNode("Black"));

    JTree tree = new JTree(root);
    tree.setVisible(true);
    return tree;
} 
```

编辑2：

作为对Maxim的回应，我很困惑。对你来说显而易见的事情可能对我来说已经丢失了。从你的代码中借用一些东西这是我能想到的最好的（不起作用）：

```
public MetadataUI(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();

    JScrollPane s = new JScrollPane();

    s.getViewport().add(getTree());

    getContentPane().add(s, BorderLayout.CENTER);

    setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:22:27.770

如果您确实使用 Netbeans GUI（它是一个 JDialog 表单）创建了您的 JDialog，并且您尝试集成到您已有的组件中的组件提供了一个零参数构造函数，请尝试以下操作：

1.  **在设计模式下**打开现有的 JDialog
***   在**导航器视图**中右键单击`[JDialog]`或您的顶级节点是什么（应该是“其他组件”的同级）并选择`Add From Palette > Beans > Choose Bean`*   输入代表您的 JTree 组件的类的完全限定名称（例如`com.example.jtree.SomeJTreeComponent`）并确认。如果该组件是真正的 JTree，它可能会毫无问题地添加。*   （可选）此时，树可能会或可能不会包含在 JScrollPane 中。如果不是，您可以通过在新添加的组件上重复步骤 2\. 的部分内容并选择`Enclose in`这个时间来手动实现此目的。**

 **您将需要手动编程其他内容。我建议您阅读[JTree 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)或参考您的 3rd 方组件的文档来帮助您完成它。

您可能还想了解更多关于您用于构建 GUI的[工具的信息。](http://netbeans.org/kb/trails/matisse.html)**

# javascript - 使用 Object.Create 向 JavaScript 对象添加函数

> ID：13565316
> 
> 赞同：4
> 
> 时间：2012-11-26T12:56:56.300
> 
> 标签：javascript, oop, object-create

我正在尝试在 JavaScript 中使用 Object.Create。我目前有以下代码：

```
var vehicle = {
        getModel: function () {
        console.log( "The model of this vehicle is.." + this.model );
    }
};

var car = Object.create(vehicle, {
    "id": {
       value: 9,         
    },
    "model": {
       value: "Ford",  
    }
});

var van = Object.create(vehicle, {
  "id": {
     value: 10,    
   },
    "model": {
      value: "Big Van",
      enumerable: true
   },
    "make": {
      value: "Warrior",      
   },
    "getMake": function () {
       console.log( "The make of this vehicle is.." + this.make );
   }
}); 
```

我试图为 getMake 向 van 添加一个函数，但出现错误：

> TypeError：当我调用时，对象# 的属性“getMake”不是函数：

van.getMake();

这可能吗？你怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:01:08.650

默认情况下，以这种方式创建的属性不可枚举。这可能会导致您的问题。

试试这个（未经测试）：

```
"getMake": { value: function () {
       console.log( "The make of this vehicle is.." + this.make )
   }, enumerable: true }; 
```

*编辑*看起来这很有效，因为我们正在传递一个对象而不仅仅是值。可枚举是不必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:03:17.520

您需要传递定义属性的对象，而不仅仅是值：

```
 "getMake": {value:function () {
     console.log( "The make of this vehicle is.." + this.make );
 }} 
```

[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

请注意，在 Javascript 中执行 OOP 的常用方法不是使用 Object.create 而是使用[原型](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)。

# css - Netbeans 7.2 + 少插件

> ID：13565317
> 
> 赞同：7
> 
> 时间：2012-11-26T12:56:59.653
> 
> 标签：css, plugins, netbeans, less, netbeans-7.2

我阅读了有关 Netbeans 的 Less 插件的主题：[在 NetBeans 中向 .less-files 添加语法高亮显示](https://stackoverflow.com/questions/3190029/add-syntax-highlighting-to-less-files-in-netbeans)

任何人都知道没有错误的 Netbeans 7.2 版的解决方案？添加新文件类型不是最佳解决方案，因为它会显示多个语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:56:17.297

我正在使用这个插件： http: [//plugins.netbeans.org/plugin/32782/lesscss-module](http://plugins.netbeans.org/plugin/32782/lesscss-module)。对我来说很好（在 7.2 中）。 *更新：*新插件版本： http: [//plugins.netbeans.org/plugin/41315/lesscss-module](http://plugins.netbeans.org/plugin/41315/lesscss-module)

由于[Netbeans 支持的 Netbeans 7.4](http://wiki.netbeans.org/NetBeans_74_NewAndNoteworthy#Editing) less 不需要额外的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:25:34.790

LESS 或 SASS 支持*应该*被添加到 7.3 的下一个版本，可能在 2013 年夏天。

来源： http://netbeans.org/bugzilla/show_bug.cgi?id= [216509](http://netbeans.org/bugzilla/show_bug.cgi?id=216509)

这个 Less 插件对我也不起作用，我切换到 SublimeText2 以获得语法支持 - 至少着色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-10T15:40:42.273

LessCSS 和 SASS 正在 7.4 中开发。如果您使用 Netbeans Dev Nightlies，您可以立即使用它。

LESS 解析中仍然存在错误，但是嘿，现在正在开发中。

从[http://bits.netbeans.org/dev/nightly/latest/start.html获取](http://bits.netbeans.org/dev/nightly/latest/start.html)

它还包括在您编辑后立即编译的 less 和 sass。不是很高级的选项，只是“将此文件夹中的所有文件编译到另一个文件中”。

[http://wiki.netbeans.org/NetBeans_74_NewAndNoteworthy](http://wiki.netbeans.org/NetBeans_74_NewAndNoteworthy)

# java - 会话范围 bean - 如何处理多用户数据

> ID：13565321
> 
> 赞同：0
> 
> 时间：2012-11-26T12:57:06.113
> 
> 标签：java, jsf, jsf-2, javabeans, session-scope

好吧，我已经使用 JSF 2.0 创建了一个 Web 应用程序。我在任何地方都使用过**会话范围 bean**，因此我遇到了问题。:( 我将用下面的例子来解释。

我在 dataTable 中有用户列表。当我单击用户时，我会看到该用户的详细信息。现在，当我右键单击用户 A 并单击`Open in new tab`时，我会在新选项卡中看到用户 A 的详细信息。

现在，当我右键单击用户 B 并单击在新选项卡中打开时，我会看到用户 B 的详细信息。

但是，当我进入选项卡（那里有用户 A 的详细信息）并刷新该页面时，我会看到用户 B 的详细信息。

如何克服这个问题，如果我刷新页面，我仍然会看到用户 A 而不是用户 B 的详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:23:31.690

而是将 bean 放在视图范围内。

打开详细信息页面时，您应该发送 GET 请求，而不是 POST 请求。使用`<h:link>`将用户标识符作为请求参数传递的法线，并`<f:param>`在目标视图中使用转换器将其转换为正确的模型值。

会话范围应仅用于会话范围的数据，例如登录用户及其首选项。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [为实体创建主从页面，如何链接它们以及选择哪个 bean 范围](https://stackoverflow.com/questions/8459903/jsf-application-correct-use-of-session-scope/8464636#8464636)

# visual-studio-2008 - 使用 mfc for Windows CE 6.00 编译我在 Visual Studio 2003 中编写的应用程序

> ID：13565322
> 
> 赞同：0
> 
> 时间：2012-11-26T12:57:08.687
> 
> 标签：visual-studio-2008, embedded, windows-ce

我使用 Visual Studio 2003。我有一个使用 MFC 用 C++ 编写的程序，如何为 WindowsCE 6:00 编译？有一个工具可以从我的电脑上的 windows xp 交叉编译，然后传输可执行文件和库？

我没有适用于 WINDOWS EMBEDDED CE 6.0 的 SDK。x86 windows ce 6.0在哪里可以下载？

在 [Visual C++]->[Smart Device]->[MFC Smart Device Application] 我只有：

ARM 智能手机 2003

Pocket PC 2003 也适用于 ARM

x86平台在哪里？我的板子有一个原子板！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:47:56.763

由于 Windows CE 是模块化操作系统，Microsoft 无法发布针对任意硬件的 SDK。他们为自己的封闭系统构建提供了 SDK。对于任何其他硬件，您需要安装特定的 SDK。

第一步是从设备 OEM 处获取 SDK。如果没有 SDK，您将无法做很多事情。如果您创建了 OS 映像（听起来不像您这样做，但如果您这样做了），那么您需要使用 Platform Builder 中的 SDK 滚轮工具滚动一个 SDK。

一旦你有了它，你仍然需要完成一个相当大的任务来编译应用程序。如果您最初不打算以 Windows CE 为目标，那么该应用程序不太可能按原样编译。期望桌面控件和 API 不会出现在 Windows CE 中，并且类具有更少的重载。Windows CE 也非常偏向于 Unicode，所以如果你有很多 ANSI 调用，尤其是对操作系统的调用，预计这些调用也需要返工。

基本上，创建一个针对您的设备的新应用程序，拉入所有源文件，点击构建，然后开始修复编译器错误。

# objective-c - 水平动画标签（NSTextField）

> ID：13565324
> 
> 赞同：3
> 
> 时间：2012-11-26T12:57:16.860
> 
> 标签：objective-c, xcode, macos, cocoa, nstextfield

我有一个`NSTextField`作为标签，显示一个字符串。如果它的内容太大而无法一次显示，我想从右到左为这个标签设置动画。

到目前为止，我已经做到了这一点`NSTimer`，它可以工作，但这不是一个很好的解决方案。标签显示在`NSTextFieldCell`表格视图中的 , 中。它们经常不同步，我想这只是消耗了大量的 CPU/GPU 资源。

还有其他方法`Core Animation`可以做到这一点吗？

我已经尝试过使用图层，您可以在这里看到： [CALayer 和 drawRect](https://stackoverflow.com/questions/12035996/calayer-and-drawrect)

但我也没有让它工作。

我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T22:43:59.397

您可以简单地使用动画师为 NSTextField 的位置设置动画，例如

```
[[textField animator] setFrameOrigin:NSMakePoint(x,y)]; 
```

你也可以像这样将它嵌入到“CATrancation”代码中：

```
[CATransaction begin];
[CATransaction setAnimationDuration:0.5];
[CATransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
[[textField animator] setFrameOrigin:NSMakePoint(x,y)];
[CATransaction commit]; 
```

如果你需要动画委托，你可以使用 CABasicAnimation

```
CABasicAnimation* animation = [CABasicAnimation animation];
animation.delegate = self;
NSDictionary *animations = [NSDictionary dictionaryWithObjectsAndKeys:animation,@"frameOrigin",nil]; 
[textField setAnimations:animations];
[[textField animator] setFrameOrigin:NSMakePoint(x,y)]; 
```

委托方法是

```
- (void)animationDidStart:(CAAnimation *)theAnimation;
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag; 
```

如果您需要屏蔽您的文本字段，只需将其嵌入到其他 NSView 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:51:14.287

首先，使用其他答案中提供的功能之一为标签设置动画。然后，如果您想在侧面显示另一个视图而不重叠，您可以：

*   在具有您希望的限制的子视图中插入标签
*   使用 bringSubviewtoFront: 或 sendSubviewToBack: 确保您的标签留在后面

# html - Scalatest html 报告

> ID：13565328
> 
> 赞同：3
> 
> 时间：2012-11-26T12:57:39.730
> 
> 标签：html, unit-testing, scala, reporting, scalatest

我正在尝试获取 scalatest 的 html 报告，并且我发现了很多这样的配置：

```
<plugin>                                                                                
    <groupId>org.scalatest</groupId>                                                    
    <artifactId>scalatest-maven-plugin</artifactId>                                     
    <version>1.0-M2</version>                                                           
    <configuration>                                                                     
        <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
        <testFailureIgnore>true</testFailureIgnore>                                     
        <filereports>NCXEHLOWFD file/constrained.txt,file/full.txt</filereports>        
        <xmlreports>xml</xmlreports>                                                    
        <htmlreports>html/report.html</htmlreports>                                     
    </configuration>                                                                    
    <executions>                                                                        
        <execution>                                                                     
            <id>test</id>                                                               
            <goals>                                                                     
                <goal>test</goal>                                                       
            </goals>                                                                    
        </execution>                                                                    
    </executions>                                                                       
</plugin> 
```

但是 IntelliJ 告诉我这是不允许的，并且不会生成 xml 或 html 报告`xmlreports`。`htmlreports`

任何人都可以提出任何建议吗？我会非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T19:08:28.943

您需要使用当前可用的最新插件版本`1.0-M4-SNAP1`，而`1.0-M2`不是没有`htmlreports`属性。以下是我的 pom.xml 中的重要部分：

```
<project>
    <properties>
        <scala.version>2.9.3</scala.version>
        <scalatest.version>2.0.M5b</scalatest.version>
        <scalatest.plugin.version>1.0-M4-SNAP1</scalatest.plugin.version>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.scalatest</groupId>
                <artifactId>scalatest-maven-plugin</artifactId>
                <version>${scalatest.plugin.version}</version>
                <configuration>
                    <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
                    <junitxml>.</junitxml>
                    <filereports>WDF TestSuite.txt</filereports>
                    <htmlreporters>${project.build.directory}/html/scalatest</htmlreporters>
                    <testFailureIgnore>false</testFailureIgnore>
                </configuration>
                <executions>
                    <execution>
                        <id>test</id>
                        <goals>
                            <goal>test</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${scala.version}</version>
        </dependency>

        <dependency>
            <groupId>org.scalatest</groupId>
            <artifactId>scalatest_${scala.version}</artifactId>
            <version>${scalatest.version}</version>
            <scope>test</scope>
        </dependency>
        <!-- required by scalatest-maven-plugin to generate HTML report -->
        <dependency>
            <groupId>org.pegdown</groupId>
            <artifactId>pegdown</artifactId>
            <version>1.2.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

有了这个设置，我可以运行`mvn clean install`它，它会在下面生成漂亮的 HTML 报告`${project.build.directory}/html/scalatest`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-09T11:17:38.430

[![在此处输入图像描述](../Images/7f025f9810940204244d2cc2c7c7c71c.png)](https://i.stack.imgur.com/ll3Aw.png)

@rozky 的解决方案对我有用，但 css 很尴尬。它不能正确显示表格。无论我使用什么版本的 pegdown 和 scalatest-maven-plugin，它都不会显示表中的套件名称列：/

# ios - iOS 应用内购买，发送到另一个帐户（送礼？）

> ID：13565336
> 
> 赞同：0
> 
> 时间：2012-11-26T12:58:19.460
> 
> 标签：ios, in-app-purchase

我有一个客户需要让其志愿者购买 IAP（下载的数据包），然后以某种方式报销他们。问题是没有简单的方法可以做到这一点，我认为苹果会批准。特别是对于超过 1500 人。我已经提出了几种方法，各有优缺点，哪一种最好实施，有没有人对如何做到这一点有任何其他建议？

**1)**让客户通过电子邮件发送 iTunes 礼品卡。IAP 为 7 美元，您不能发送低于 10 美元的礼品卡。此外，他们必须一次发送一个，没有办法批量发送。**不去上班**

**2)**创建礼品代码，如 iTunes 礼品卡。我的客户可以通过 IAP 批量购买代码（因此 Apple 仍然可以获得他们的钱），并将它们安全地存储在我的 Web 服务器上。然后我可以实现一个系统，将所有代码发送到一封电子邮件，或者单独发送到多封电子邮件。然后志愿者可以使用这些代码来解锁那个单一的 IAP。这对我来说会做更多的工作，但对我的客户来说更容易。**有些事情告诉我，Apple 可能不会批准这种方法。**

**3)**创建客户可以通过 IAP 批量购买的“积分”（因此 Apple 仍然可以获得他们的钱），然后通过使用游戏套件创建的 p2p 蓝牙连接将积分赠送给志愿者或将 IAP 信息本身发送给志愿者。这对客户来说会更难，因为他们必须单独发送每个“信用”。**但我认为苹果更有可能批准这一点。**

**4)**让客户向我发送每个志愿者设备的 UUID 列表。我将 UUID 添加到服务器上的安全列表中。在购买过程中，会执行检查以查看设备 UUID 是否与我的服务器上的匹配。如果是，则将它们标记为“全部准备就绪”并提供 IAP 数据。**我不知道这个，因为我可以看到转账发生的唯一方法是我自己直接获得报酬，而苹果被排除在外（所以他们可能不会批准这个。我给苹果 30 没有问题% 如果我能找到一种方法来解决这个问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:06:26.137

我会选择选项 5，并创建自己的 IAP 系统。很像选项 3，但一起绕过 Apple。将自定义 URL 方案添加到您的应用程序，将其提供给您的客户进行分发。当您的应用程序通过其自定义 URL 方案启动时，将其打开到促销代码输入页面。

您的客户将能够根据需要通过您为他们设置的网站购买/创建代码。然后，您将存储代码（或创建一个算法来检查生成的代码），并在用户输入代码时验证代码。

然后您的客户用户将输入他们的唯一代码并根据需要解锁/下载所有内容。

我已经使用促销代码进行了类似的设置来解锁我的应用程序的完整版本，这样我就可以创建自己的促销活动，而无需通过删除/更改 IAP 让每个人都免费升级。

# javascript - jquery 选择器不能选择 Raphaeljs 的路径？

> ID：13565337
> 
> 赞同：0
> 
> 时间：2012-11-26T12:58:24.487
> 
> 标签：javascript, jquery, jquery-selectors, raphael

我正在我的 SVG 中构建一个滚动条。我也在使用这个[http://jsfiddle.net/andrewwhitaker/s5mgX/](http://jsfiddle.net/andrewwhitaker/s5mgX/)

路径的 id 在另一个函数中是这样分配的：

```
 scrolldown.node.setAttribute("id","scrollDown"); 
```

jQuery：

```
 $("#scrollDown").bind("click", function(event) {event.preventDefault();
/*function here..........*/} 
```

即使我使用`$("path").`它似乎也无法识别它。

也许我做错了？如何设置单击以使用 JQuery 正确触发？

# ruby-on-rails - ActiveRecord 如何强制执行 has_one 关系？

> ID：13565340
> 
> 赞同：3
> 
> 时间：2012-11-26T12:58:38.653
> 
> 标签：ruby-on-rails, activerecord

ActiveRecord 如何执行 has_one 关系？（相对于 has_many 关系）

似乎它没有，我必须使用迁移（即在 MySQL 表级别）创建一个唯一约束。

我认为 ActiveRecord 应该处理这个约束，而不是依赖于数据库\表级别的强制执行。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T13:09:50.413

我认为它不会强制唯一约束。它的工作原理几乎完全一样`has_many`，只是在执行数据库查询以检索相关对象时，`LIMIT 1`会在生成的 SQL 中添加一个子句。

# mysql - 按列倒序选择值

> ID：13565341
> 
> 赞同：0
> 
> 时间：2012-11-26T12:58:44.523
> 
> 标签：mysql

我需要以相反的顺序表结构选择具有列的记录。例如，如果我的表结构是这样的

```
class   name        rank  
------  ----------  ------
A       Nija             2
D       cruz             3
B       Antony           4
C       silverster       5
A       febin            1 
```

表示我希望结果为

```
 rank  name        class 
------  ----------  ------
     2  Nija        A     
     3  cruz        D     
     4  Antony      B     
     5  silverster  C     
     1  febin       A 
```

您可以说选择排名、名称、类别等列。但我的表列会动态增加。如果我的表包含任意数量的列，我想要结果，但结果应该与表结构相反。在这里，我将只选择所有列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:07:41.770

试试这个：

```
SET @myval=(select group_concat(COLUMN_NAME)from (
SELECT ORDINAL_POSITION, COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'Table1'
order by ORDINAL_POSITION desc) a);

SET @strsql=CONCAT('select ',@myval,' from Table1');

PREPARE stmt FROM @strsql; 
EXECUTE stmt; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/196d9/41)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:01:20.587

你为什么不简单地做

```
SELECT rank, name, class FROM table_name; 
```

# windows - Spring-security-kerberos 跨域信任

> ID：13565345
> 
> 赞同：0
> 
> 时间：2012-11-26T12:59:02.723
> 
> 标签：windows, active-directory, spring-security, kerberos, spring-security-kerberos

有没有人知道如果在域之间建立信任，是否可以使用 spring-security-kerberos 提供跨域身份验证？我在 Tomcat 7 下的 Windows 2008 R2 服务器上使用 spring-security 和 spring-security-kerberos 运行标准 Java Web 应用程序。

编辑：

运行 Java 1.6.0_30

我目前的 krb5.ini

```
[libdefaults]
    default_realm = MY.DOMAIN
    dns_lookup_kdc = true
    dns_lookup_realm = true
[realms]
MY.DOMAIN = {
    default_domain = MY.DOMAIN
    kdc = MY.DOMAIN
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:56:56.107

如果您正确配置了 krb5.ini，则默认情况下这在 JGSS 中可用。

# asp.net-mvc - 无法播种用户和角色

> ID：13565347
> 
> 赞同：2
> 
> 时间：2012-11-26T12:59:07.707
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0, seed, simplemembership

我正在尝试将用户和角色播种到我的数据库中。目前在 C# MVC4 中使用具有自动迁移功能的 Code First 实体框架。每当我打电话

> 更新-数据库-强制

我收到以下错误：

> 运行种子方法。System.InvalidOperationException：您必须在调用“WebSecurity”类的任何其他方法之前调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。在 WebMatrix.WebData.SimpleRoleProvider.get_PreviousProvider() 在 WebMatrix.WebData.SimpleRoleProvider.RoleExists(String roleName) 在 System.Web.Security.Roles.RoleExists(String roleName) 在 GratifyGaming.Domain.Migrations.Configuration.Seed(GratifyGamingContext 上下文)在 C:\Users\Unreal\Documents\Visual Studio 2010\Projects\GratifyGaming\GratifyGaming.Domain\Migrations\Configuration.cs:System.Data.Entity.Migrations.DbMigrationsConfiguration 的第 36 行`1.OnSeed(DbContext context) at System.Data.Entity.Migrations.DbMigrator.SeedDatabase() at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase() at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) 在 System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration) ）在 System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration) 在 System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore() 在 System.Data.Entity.Migrations.Design.ToolingFacade。 BaseRunner.Run() 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

有问题的代码行是`Role.Exists`

我尝试将 WebSecurity.InitializeDatabaseConnection 放在 Global.asax、Seed() 中，并创建了一个 _AppStart.cshtml，但没有成功。我在互联网上搜寻可能的解决方案，但没有一个有效（包括其他堆栈溢出文章）。下面是一些值得注意的博客文章。

*   [http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)
*   [http://odetocode.com/Blogs/scott/archive/2012/08/31/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx](http://odetocode.com/Blogs/scott/archive/2012/08/31/seeding-membership-amp-roles-in-asp-net-mvc-4.aspx)

请参阅下面的代码。

[配置.cs]

```
 protected override void Seed(GratifyGaming.Domain.Models.DAL.GratifyGamingContext context)
    {
        var criteria = new List<Criterion>
        {
            new Criterion { ID = 1, IsMandatory=true, Name = "Gameplay", Description="The playability of the games core mechanics" },
            new Criterion { ID = 2, IsMandatory=true, Name = "Art Style", Description="The artistic feel of the game as a whole. Elements such as story, style and originality come into play." },
            new Criterion { ID = 3, IsMandatory=true, Name = "Longevity", Description="How long did this game keep you entertained?" },
            new Criterion { ID = 4, IsMandatory=true, Name = "Graphics", Description="How good does the game look?" }
        };

        criteria.ForEach(s => context.Criterion.AddOrUpdate(s));
        context.SaveChanges();

        if (!Roles.RoleExists("Administrator"))
            Roles.CreateRole("Administrator");

        if (!WebSecurity.UserExists("user"))
            WebSecurity.CreateUserAndAccount(
                "user",
                "password");

        if (!Roles.GetRolesForUser("lelong37").Contains("Administrator"))
            Roles.AddUsersToRoles(new[] { "user" }, new[] { "Administrator" });
    } 
```

标准种子代码可以正常工作。

[_AppStart.cshtml]

```
@{
 if (!WebSecurity.Initialized)
{
    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId",
                                             "UserName", autoCreateTables: true);
}
} 
```

正常登录到我的网站与这里的这个完美配合。

[网络配置]

```
 <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership> 
```

[AccountModel.cs]

```
 [Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public virtual ICollection<Game> AttachedGames { get; set; }

    public virtual ICollection<UserGratificationRecord> GratificationHistory { get; set; }

    [ForeignKey("UserLevel")]
    public int? AcheivementID { get; set; }
    public virtual Acheivement UserLevel { get; set; }

    public int? NumOfGratifictions { get; set; }

} 
```

* * *

**更新**

我认为 WebSecurity.InitializeDatabaseConnection 甚至都没有运行——我可以在我的 Seed 方法中放置多个，而不会出现通常会出现的“只能调用一次”错误。

我的种子方法和所有模型都在我的域项目中，而其他一切都在 WebUI 项目中。不确定这是否与它有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T21:55:03.617

只需将惰性初始化放入您的种子方法的顶部

```
protected override void Seed(GratifyGaming.Domain.Models.DAL.GratifyGamingContext context)
{
    if (!WebSecurity.Initialized)
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection",
                                                 "UserProfile",
                                                 "UserId",
                                                 "UserName",
                                                 autoCreateTables: true);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:43:27.763

在您的 App_Start 中，尝试添加：

```
 var configuration = new Data.Migrations.Configuration();
        var migrator = new DbMigrator(configuration);
        migrator.Update(); 
```

您必须公开您的 configuration.cs 文件

```
 public class Configuration : DbMigrationsConfigurati 
```

这应该使您的种子方法在您运行程序时被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T03:16:48.503

删除对 WebMatrix.WebData 的现有引用 添加引用 WebMatrix.WebData 版本 2。错误将停止。

# java - 如何从具有 FileChannel 和 ByteBuffer 的文件中写入和读取 Java 对象中的字符串属性

> ID：13565359
> 
> 赞同：0
> 
> 时间：2012-11-26T12:59:55.053
> 
> 标签：java, serialization, nio, bytebuffer, filechannel

下面是一个示例类，展示了我如何将 String 放入 ByteBuffer。我可以将字符串写入这样的文件，但我不确定如何知道字节数组的大小以在反序列化时再次读取标题。

```
public class TestClass {

 private Long id;
 private String title;

 public void write (final ByteBuffer byteBuffer) {
  byteBuffer.putInt(title.length());
  byteBuffer.put(title.getBytes());
 }

 public static UpdateFeed read (final ByteBuffer byteBuffer) {

 final long id = byteBuffer.getLong();

 final int titleLength = byteBuffer.getInt();
 byte[] titleArr = new byte[titleLength];
 byteBuffer.get(titleArr);
 String title = new String(titleArr);
 System.out.println("Title :"+title);

  ????????????????
 return new TestClass(id,title);
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:03:44.567

我建议你先写下长度，然后你可以准确地读回那么多字节。您应该始终`write`以相同的顺序和格式编写您的方法，以在您的“读取”方法中写出您需要阅读的内容。

除非您有充分的理由这样做，否则使用支持 writeUTF/readUTF 的 DataInput/DataOutputStream 会更简单。

# javascript - 如何使用javascript函数加密html页面源代码

> ID：13565360
> 
> 赞同：-3
> 
> 时间：2012-11-26T12:59:55.907
> 
> 标签：javascript, html, encryption, browser, obfuscation

> **可能重复：**
> [如何加密 HTML、CSS 和 JavaScript 以防止被盗](https://stackoverflow.com/questions/3247270/how-to-encrypt-html-css-and-javascript-to-prevent-theft)

如果不可能，请告诉如何使用javascript函数加密任何网页的html页面源代码，然后请告诉其他方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:02:29.013

为了呈现源代码，必须在浏览器中对其进行解密并构建一个 DOM，这意味着用户可以使用 DOM 检查器访问 DOM 并将其序列化回 HTML（从而创建一个合理的复制原始 HTML）。

因此，没有办法，替代或其他方式。

# java - 从原始文本文件中获取所有 XML？

> ID：13565362
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:00.397
> 
> 标签：java, xml, regex, parsing

我有日志文件，我需要编写从该文件中获取所有 xml 的程序。文件看起来像

```
text
text
xml
text
xml
text 
etc 
```

你能给我建议什么更好地使用正则表达式或其他东西吗？也许可以用 dom4j 做到这一点？
如果我尝试使用正则表达式，我会看到文本部分有`<>`标签的下一个问题。

**更新 1：** XML 示例

```
 SOAP message:
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
 here is body part of valid xml
</soapenv:Body>
</soapenv:Envelope>
text,text,text,text
symbols etc
  SOAP message:
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
 here is body part of valid xml
</soapenv:Body>
</soapenv:Envelope>
text,text,text,text
symbols etc 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:40:30.317

如果您的 XMl 始终在一行上，那么您可以遍历行检查它是否以`<`. 如果是这样，请尝试将整行解析为 DOM。

```
String xml = "hello\n" + //
        "this is some text\n" + //
        "<foo>I am XML</foo>\n" + //
        "<bar>me too!</bar>\n" + //
        "foo is bar\n" + //
        "<this is not valid XML\n" + //
        "<foo><bar>so am I</bar></foo>\n";
List<Document> docs = new ArrayList<Document>(); // the documents we can find
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
for (String line : xml.split("\n")) {
    if (line.startsWith("<")) {
        try {
            ByteArrayInputStream bis = new ByteArrayInputStream(line.getBytes());
            Document doc = docBuilder.parse(bis);
            docs.add(doc);
        } catch (Exception e) {
            System.out.println("Problem parsing line: `" + line + "` as XML");
        }
    } else {
        System.out.println("Discarding line: `" + line + "`");
    }
}
System.out.println("\nFound " + docs.size() + " XML documents.");
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
for (Document doc : docs) {
    StringWriter sw = new StringWriter();
    transformer.transform(new DOMSource(doc), new StreamResult(sw));
    String docAsXml = sw.getBuffer().toString().replaceAll("</?description>", "");
    System.out.println(docAsXml);
} 
```

输出：

```
Discarding line: `hello`
Discarding line: `this is some text`
Discarding line: `foo is bar`
Problem parsing line: `<this is not valid XML` as XML

Found 3 XML documents.
<foo>I am XML</foo>
<bar>me too!</bar>
<foo><bar>so am I</bar></foo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:01:47.983

如果每个这样的部分都在单独的行中，那么它应该非常简单：

```
s = s.replaceAll("(?m)^\\s*[^<].*\\n?", ""); 
```

# getelementbyid - document.getElementById("id").value = ""; 不工作

> ID：13565363
> 
> 赞同：0
> 
> 时间：2012-11-26T13:00:00.977
> 
> 标签：getelementbyid

例如，代码`document.getElementById("id").value="value";`不起作用。我已将它分配给一个函数，以便在加载页面后替换文本框的当前值。

这是我的代码

```
<script type="text/javascript">
function rplace(){
 document.getElementById('idtext').value="New Value";
}
onload=rplace
 </script>
<form>
<input type="text" id="idtext" name="idtext" value="">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:07:48.773

使用 javascript 的 jquery 代替。

```
 $(document).ready(function(){ $("#idtext").val("New Value")}); 
```

参考[这个](http://www.electrictoolbox.com/jquery-get-set-form-values/)

# tabs - WebStorm/PHPStorm 中的智能标签有什么作用？

> ID：13565365
> 
> 赞同：67
> 
> 时间：2012-11-26T13:00:01.507
> 
> 标签：tabs, formatting, phpstorm, webstorm

我对智能标签在一般偏好中的作用感到困惑。

它说：

> 仅通过空格对必要列进行精细对齐...如果未选中此复选框，则在必要时使用空格进行对齐...

这是否意味着两种情况下都使用空格对齐？这是否意味着它总是在后者中使用空格，而有时只在前者中使用？

有人可以举例说明这两种情况吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-11T18:57:16.343

如果启用了智能制表符选项，则仅使用空格进行对齐，否则使用制表符和空格。

eg：对于下面的代码块

```
 function(first, 
             second) {
    } 
```

没有智能标签

```
t---function(first, 
t---t---t---.second) {
t---} 
```

带智能标签

```
t---function(first, 
t---.........second) {
t---} 
```

# wpf - 提高基本 WPF 故事板动画的流畅度

> ID：13565368
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:09.510
> 
> 标签：wpf, storyboard

我一直在玩一些基本的 WPF 故事板动画，它看起来很模糊，可以达到一定的速度然后真的退化为模糊。

无论如何我可以让它看起来更平滑吗？- 以某种方式增加帧率，或者可能双缓冲动画？

我尝试将对象设置为 CacheMode="BitmapCache" 但这似乎效果不大。

请问有人有什么想法吗？

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Width="1000" Height="600" >
        <Window.Triggers>
            <EventTrigger RoutedEvent="UserControl.Loaded" >
                <BeginStoryboard>
                    <Storyboard RepeatBehavior="Forever">
                        <DoubleAnimation From="600" To="-600" Duration="00:00:02" 
                        Storyboard.TargetName="MyObject" 
                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Window.Triggers>

        <Grid>
            <Grid Name="MyObject">
                <Grid.RenderTransform>
                    <TranslateTransform X="0" />
                </Grid.RenderTransform>

                <Ellipse Stroke="Black" Fill="Green" StrokeThickness="3" Width="100" Height="250" />
                <Ellipse Stroke="Black" Fill="White" StrokeThickness="3" Width="80" Height="180" />
            </Grid>
        </Grid>
    </Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:46:13.703

您可以尝试增加`FrameRate`：

```
MediaTimeline.DesiredFrameRateProperty.OverrideMetadata(typeof(System.Windows.Media.Animation.Timeline), new FrameworkPropertyMetadata(60)); 
```

数字越大，帧率越高（执行越流畅）。不过要小心，更高的帧率会影响性能！

我希望这有帮助。

# java - 下载后留言

> ID：13565371
> 
> 赞同：2
> 
> 时间：2012-11-26T13:00:20.233
> 
> 标签：java, javascript, servlets

我有一个 Servlet，它制作并返回一个 zip 文件 像这样

```
 response.setHeader("Pragma","Public");
            response.setHeader("Cache-Control","must-revalidate,post-check=0,pre-check=0");

            response.setContentType("application/octet-stream");

            response.setHeader("Expires", "0");
            response.setHeader("Content-Transfer-Encoding", "binary");
            if(file.getName().contains("–")){
                response.setHeader("Content-Disposition", "inline; filename=\"file.zip\"");
            }

            OutputStream os = response.getOutputStream();
            ZipOutputStream zos = new ZipOutputStream(os);
            for (File f : files) {
                //add files, it's working...
                }
                bis.close();
                fis.close();
                zos.closeEntry();
            }
            zos.flush();
            zos.close();
            os.flush();
            os.close(); 
```

目前要下载我使用的是 iframe，所以我设置了 src 属性来开始下载。调用此函数时加载下载帧

```
function loadIDownloadFrame(url) {
    document.getElementById("idownloadFrame").src=url;
} 
```

但是现在，我需要在不离开当前页面的情况下返回 zip 文件后显示一条消息。我需要知道 servlet 是否返回了 zip 文件。

我尝试使用“window.frames['idownloadFrame'].document.readyState”获取 iframe 状态，但状态始终为“完成”。

任何人有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:23:33.320

我认为您可以直接参考映射 Servlet 的下载链接（它返回可下载的二进制文件）。如果您在映射的 servlet 中设置适当的标头以返回二进制文件，它不会更改页面，从代码片段看起来您已经这样做了。为什么必须在不同的 iframe 中下载文件？你不一定需要那个。

您必须在哪里显示消息？像 JavaScript 警报之类的？

# asp.net-mvc - kendoUI拖放中的过滤器

> ID：13565375
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:26.450
> 
> 标签：asp.net-mvc, kendo-ui

我有一个分离器。在这个拆分器中，我正在为列表视图实现拖放功能。每个列表视图都以“表格”格式加载。

我想从左到右拖动我的列表视图。

对于第一个列表视图，我有以下代码：

```
var listViewOptions = {
    template: kendo.template(
        $("#Firsttemplate").html()
    ),
    dataSource: listdatSource,
}; 

var sourceListView = $("#First").kendoListView(listViewOptions).data("kendoListView");

var draggableOptions = {
    filter: "table",
    hint: function (e) {
        return $('<div class="new">' + e.html() + '</div>');
    }
}

sourceListView.element.kendoDraggable(draggableOptions); 
```

在过滤器中，如果我给出“table”/“tbody”，则列表视图的全部内容以行格式拖动，并且在放置后它位于拆分器的右侧并显示在单行中。我想以与左侧相同的格式显示。

你能告诉我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:16:15.123

`somejQueryElement.html()`为您提供元素的内部 HTML 代码。因此，如果您对表格元素进行过滤，`e`则`hint`函数的参数就是表格并且`e.html()`是表格的内容。

如果你想要你的表格，你必须在`table`标签中添加重新封装元素：

```
var draggableOptions = {
    filter: "table",
    hint: function (e) {
        return $('<div class="new"><table>' + e.html() + '</table></div>');
    }
} 
```

# bash - 正确地将包含空格的参数传递给外部程序

> ID：13565376
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:30.920
> 
> 标签：bash, sh, ksh

尝试在 ksh 中将脚本参数传递给外部程序时，我遇到了一些奇怪的行为。

我的设置是这样的： - 我有一个 ksh 脚本（称为“测试”），归结为如下内容：

```
...
args="$@"
java my_main_class $args
... 
```

- 如果我用类似的东西调用这个脚本：

```
> ./test "param1 param2" param3 
```

...然后外部应用程序看到以下参数：（param1，param2，param3）

*   如果我将脚本更改为：

    ```
    ...
    java my_main_class "$@"
    ... 
    ```

...并执行相同的调用，然后我的外部应用程序会看到以下参数（param1 param2，param3） - 这意味着现在可以正确看到参数。

问题：如何在外部程序调用之前修改我的第一个脚本版本，以便正确传递包含空格的参数，同时仍将“@$”存储到变量中？

亲切的问候，安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:54:38.867

首先，让我们设置相同的会话：

```
$ set -- "param1 param2" param3
$ echo $1, $2 
```

`param1 param2, param3`

ksh 和 bash 通过数组赋值提供了一个有效的解决方案：

```
$ args=("$@")
$ fake_java() { ( for w; do echo "$w"; done ); } 
```

如果不引用，这仍然会失败：

```
$ fake_java ${args[@]} 
```

`param1`

`param2`

`param3`

但是引号和数组的结合使这项工作：

```
$ fake_java my_main_class "${args[@]}" 
```

`param1 param2`

`param3`

# iphone - Android不会显示带有0px模糊的盒子阴影？

> ID：13565379
> 
> 赞同：4
> 
> 时间：2012-11-26T13:00:43.050
> 
> 标签：iphone, css, android-browser

Android 的浏览器是否存在显示纯色（无模糊）阴影的问题？

```
box-shadow: 0 0 0px 5px #fff; 
```

与 Chome、iPhone 或黑莓相比，Android 中的渲染链接这个？

![Android上的盒子阴影](../Images/ff0bda8065d7ecf3bf93ea296519df55.png)

你可以在这里完善完整的 CSS：http: [//jsfiddle.net/kEq3U/3/](http://jsfiddle.net/kEq3U/3/)
我的 Android 是 2.2.1 如果你可以[看看你的 Android](http://jsfiddle.net/kEq3U/3/show/)并让我知道你看到了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:44:48.137

这是 Android 浏览器的一个已知错误 - 非常烦人。您唯一的选择是使用 1px 或以上的模糊半径。

[在http://code.google.com/p/android/issues/detail?id=7531](http://code.google.com/p/android/issues/detail?id=7531)查看错误报告

那里的一位评论者说，他们通过使用 0.1f 作为值来解决这个问题——当我上次尝试时，这对我不起作用——只有 1px 或更高才有效。

# sharepoint-2010 - Sharepoint 2010 Foundation SBS 2011 重置搜索索引

> ID：13565382
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:52.777
> 
> 标签：sharepoint-2010

如何重置在 SBS 2011 上运行的 Sharepoint 2010 Foundation 中的搜索索引？

我的搜索结果过时，不再存在。

完全爬网似乎并没有删除它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:41:48.500

If you go to your sharepoint central administration and then Manage Service Applications > Search Service Application > Index Reset (on the left nav under crawling).

This looks like what you are looking for.

> "Resetting the crawled content will erase the content index. After a reset, search results will not be available until crawls have been run. It is recommended that you deactivate search alerts during the reset so as to prevent alerts subscribers from receiving unwanted e-mail."

# yii - 从数据库中检索电子邮件 ID 并将邮件发送给他们

> ID：13565384
> 
> 赞同：0
> 
> 时间：2012-11-26T13:00:55.733
> 
> 标签：yii, extension-methods, mailer

在 yii 中，我正在创建 sendemail 功能。在进行 SMTP 的所有设置后，我正在使用邮件扩展程序及其正常工作。我在控制器中将方法 actionEmail 设置为-

```
public function actionEmail()
{
    $model=new User;
    $mailer = Yii::createComponent('application.extensions.mailer.EMailer');
    $mailer->IsSMTP();
    $mailer->IsHTML(true);
    $mailer->SMTPAuth = true;
    $mailer->SMTPSecure = "ssl";
    $mailer->Host = "smtp.gmail.com";
    $mailer->Port = 465;
    $mailer->CharSet = 'UTF-8';
    $mailer->Username = "abc@gmail.com";
    $mailer->Password = "abc";
    $mailer->From = "xyz@gmail.com";
    $mailer->FromName = "Balaee.com";
    $mailer->AddAddress('shilpa.kirad@shailani.com');
    $mailer->Subject = "welcome to Balaee";
    $mailer->IsHTML(true);
    //  $html = $this->renderPartial('myview',array('content'=>'Hello World'),true); 
```

$mailer->正文 = "

# 欢迎

单击链接以获取其他详细信息 ".$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

```
 if($mailer->Send()) {
        echo "Please check mail";
        //Yii::app()->user->setFlash('register','Thank you for contacting us. We will respond to you as soon as possible.');
        //  $this->refresh();
    }
    else {
        echo "Fail to send your message!";
    }
} 
```

此方法执行正确。它正在将邮件发送到 mailer->AddAdress 中提到的地址。但是现在我想从与特定用户 ID 对应的数据库中检索电子邮件 ID 并将邮件发送给他。即我不想为此字段插入硬编码值。那么我该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:39:54.107

获取用户的使用 id 来获取电子邮件地址

```
$user_model=User::model()->findByPk($id); 
```

并在电子邮件中设置为

```
$mailer->AddAddress($user_model->email_id); 
```

其中 id 和 email_id 是表列名。检查其他方式。 [http://www.yiiframework.com/doc/guide/1.1/en/database.dao](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:26:38.420

为此，您可以使用以下查询从数据库中获取电子邮件 ID：

```
 $email = SELECT email FROM USER WHERE user_id = "X"; 
```

这里 X 是您要发送电子邮件的用户的 user_id。

`$email`并在收件人的电子邮件字段中提供此信息。谢谢。

# asp.net - 如何在正则表达式中允许双引号？

> ID：13565385
> 
> 赞同：1
> 
> 时间：2012-11-26T13:00:59.090
> 
> 标签：asp.net, regex

我有一个文本框：

```
<asp:RegularExpressionValidator ID="ValidateTitleCharacters" runat="server" 
    ValidationExpression="^[a-zA-Z0-9@+'.!#$',:;=/\(\),\-\s]{1,255}$"
    ControlToValidate="title" Text="You have entered a character(s) that is not allowed in the title."
    ErrorMessage="You have entered a character(s) that is not allowed in the title." /> 
```

我也想允许 " 字符。如何修改正则表达式字符串？？？

我试过这个：

```
<asp:RegularExpressionValidator ID="ValidateTitleCharacters" runat="server" 
    ValidationExpression="^[a-zA-Z0-9@+'.!#$'\",:;=/(),\-\s]{1,255}$"
    ControlToValidate="title" Text="You have entered a character(s) that is not allowed in the title."
    ErrorMessage="You have entered a character(s) that is not allowed in the title." />

<asp:RegularExpressionValidator ID="ValidateTitleCharacters" runat="server" 
    Validat‌​ionExpression="^[a-zA-Z0-9@+'.!#$',:;=/()(""),\-\s]{1,255}$"
    ControlToValidate="title" Text="You have entered a character(s) that is not allowed in the title."
    ErrorMessage="You have entered a character(s) that is not allowed in the title." /> 
```

两次尝试都在破坏字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T13:08:39.913

从您发布的片段来看，正则表达式似乎嵌入在标记中 - 这意味着您需要将双引号字符转义为 HTML 字符实体。

使用`&quot;`：

```
ValidationExpression="^[a-zA-Z0-9@+'.!#$'&quot;,:;=/\(\),\-\s]{1,255}$" 
```

ASP.NET 引擎会将字符实体转换为`"`.

或者，`ValidationExpression`在后面的代码中设置值（`OnInit`例如，在 中）：

```
ValidateTitleCharacters.ValidationExpression = 
                                  "^[a-zA-Z0-9@+'.!#$'\",:;=/\(\),\-\s]{1,255}$"; 
```

# maven - 如何使用 JBoss 7 和 Maven 3 在 Eclipse Indigo 中部署 Richfaces 4 应用程序

> ID：13565389
> 
> 赞同：1
> 
> 时间：2012-11-26T13:01:12.207
> 
> 标签：maven, richfaces, jboss7.x, eclipse-indigo

我正在尝试将应用程序部署`Richfaces`为`Eclipse Indigo`用作 IDE 和`JBoss 7`应用程序服务器以及`Maven 3`. 但是，`CSS`并且`JS`在此设置中不起作用。这里的任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:17:50.233

前段时间我遇到了类似的问题。你如何在你的 jsf 中引用你的 js/css？我认为这些链接应该会有所帮助：

*   （对于 css）[http://www.mkyong.com/jsf2/how-to-include-cascading-style-sheets-css-in-jsf/](http://www.mkyong.com/jsf2/how-to-include-cascading-style-sheets-css-in-jsf/)
*   （对于 js）[http://www.mkyong.com/jsf2/how-to-include-javascript-file-in-jsf/](http://www.mkyong.com/jsf2/how-to-include-javascript-file-in-jsf/)

# ruby - 何时将字符串使用重构为 Ruby 中的符号

> ID：13565394
> 
> 赞同：2
> 
> 时间：2012-11-26T13:01:22.787
> 
> 标签：ruby

根据[tryruby.org](http://tryruby.org)，符号的使用使用一个内存分配，然后指向它的单个分配，而存储多个字符串，即使它们相同，也会在内存中存储多个实例。因此，就像 MP3 和其他压缩或优化方法的工作原理一样，从多个字符串切换到重构再到使用符号以利用重复的优势，需要考虑哪些因素？只要你有两个重复？只有当您注意到性能下降时？对数计算？其他考虑或观点？

我是一名有兴趣学习强大的积极约定实践的程序员，这就是我问的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:15:00.707

符号基本上是一个不可变的内部字符串。这意味着，它不能就地更改（例如通过使用`gsub!`），并且可以保证相同符号的两次使用总是返回相同的对象：

```
"foo".object_id == "foo".object_id
# => false

:foo.object_id == :foo.object_id
# => true 
```

由于该保证，符号永远不会被垃圾收集。一旦您“创建”了一个符号，它将永远保留在当前进程中。

通常，当您拥有静态字符串或至少数量有限的静态字符串时，您应该使用符号，例如散列中的键或引用方法。在此处使用符号可确保您始终获得相同的对象。

对于普通字符串，根据您比较它们的方式，您可能会得到不同的对象。对于普通字符串，可能有两个或多个看起来相同但实际上不相同的字符串（参见上面的示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:30:19.310

*   当程序的输入或输出需要时，请使用字符串。
*   当它仅在程序内部使用，并且属于一个相对较小的封闭集合，例如标志，则使用符号。

# ruby-on-rails - 要扩展 rails 的 `link_to`，我应该使用 `alias_method_chain` 还是 mixins + 继承？

> ID：13565395
> 
> 赞同：4
> 
> 时间：2012-11-26T13:01:23.587
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我正在使用[twitter bootstrap](http://twitter.github.com/bootstrap/)创建一个应用程序。我正在使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)将图标添加到各个地方，通常是链接。到目前为止，我一直在使用全局助手。这是简化版：

```
# app/helpers/link_to_with_icon.rb
def link_to_with_icon(text, path, options={})
  options = options.clone
  icon = options.delete(:icon)
  text = "<i class='#{icon}'></i> #{text}" if icon.present?
  link_to(text, path, options)
end 
```

这行得通，但我必须记住每次需要向新链接添加图标时都更改`link_to`为（该应用程序是新的，所以它在不断变化）。`link_to_with_icon`所以我决定`link_to`完全停止使用，取而代之的是`link_to_with_icon`（因为它是兼容的）。

但是后来我意识到，既然我不再使用`link_to`了，我还不如一开始就修改`link_to`。当然，我可以在 lib 文件夹上添加一些猴子补丁以使其理解该`:icon`选项。

```
# lib/extensions/url_helper_extensions.rb
module ActionView
  module Helpers
    module UrlHelper

      # do some magic here

    end
  end
end 
```

几年前，我曾经做过类似的事情。在那个时候，`alias_method_chain`助手是完成这项工作的正确工具。在 rails 3.x 中，似乎[不赞成使用模块和继承](https://stackoverflow.com/questions/3689736/rails-3-alias-method-chain-still-used)。

但是，如果我正确理解了该页面中的示例，我将需要`link_to`某种`Base`模块提供该方法 - 否则您无法向其添加“预扩展”。

因此我的问题是：**我可以使用模块扩展 link_to 吗？还是我必须使用`alias_method_chain`？**

特别是，该`:icon`选项的工作实施将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:46:10.130

我要么将其添加到单独的帮助程序中，要么将其添加到`ApplicationHelper`

```
def link_to(text, path, options = {}, &block)
  icon = options.delete(:icon)
  text = content_tag(:i, text, :class => icon) if icon
  super
end 
```

而且您不想克隆选项哈希，因为您不希望将`icon`选项发送到原始`link_to`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T13:27:00.820

我只是这样做：

```
# app/helpers/my_helper.rb

module MyHelper
  def link_to(text, path, options={})
    options = options.clone
    icon = options.delete(:icon)
    text = "<i class='#{icon}'></i> #{text}" if icon.present?
    super(text, path, options)
  end
end 
```

但是请注意是否曾经使用`link_to`with 块。

# ios - Facebook iOS API 发布安装

> ID：13565396
> 
> 赞同：3
> 
> 时间：2012-11-26T13:01:24.847
> 
> 标签：ios, facebook

我已经按照教程：[https](https://developers.facebook.com/docs/tutorials/mobile-app-ads/) ://developers.facebook.com/docs/tutorials/mobile-app-ads/用于 Android 和 iOS 设备上的 facebook 广告。尚未创建任何广告活动。

在 Android 上运行应用程序时，Facebook 应用程序页面上的“上次报告的移动安装”值会更新。但是，iOS 不会发生同样的情况。

这是我的 plist 文件：

```
<key>FacebookAppID</key>
<string>xxx</string>
<key>URL types</key>
<array>
    <dict>
        <key>URL Schemes</key>
        <array>
            <string>fbxxx</string>
        </array>
    </dict>
</array> 
```

这是代码：

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    [FBSettings setLoggingBehavior:[NSSet setWithObjects:FBLoggingBehaviorFBRequests, FBLoggingBehaviorFBURLConnections, FBLoggingBehaviorAccessTokens, FBLoggingBehaviorSessionStateTransitions, FBLoggingBehaviorPerformanceCharacteristics, nil]];
    NSDate *facebookIdPublishedDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"facebookIdPublishedDate"];
    if (!facebookIdPublishedDate) {
        [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"facebookIdPublishedDate"];
        [FBSettings publishInstall:FACEBOOK_APP_ID];
        NSLog(@"Published Install with Facebook App ID: %@", FACEBOOK_APP_ID);
    }
} 
```

我可以看到 FBSDKLog 输出，看起来没问题，没有错误。但仍然没有“报告的上次移动安装”值的结果......

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:58:17.180

我相信文档要求此调用发生在 中`application:didFinishLaunchingWithOptions:`，但否则它应该为每个设备注册一次安装。也许广告活动需要在他们开始注册之前创建？

# android - Android 中的 Async Task、Runnable 和 Handler 哪个更好用

> ID：13565399
> 
> 赞同：2
> 
> 时间：2012-11-26T13:01:28.987
> 
> 标签：android, android-asynctask, handler, runnable

在android中处理线程时，我遇到了runnable和handler。我的问题是，使用`AsyncTask`or `Thread`(or `Runnable`) 进行多线程的更好选择是什么。我发现使用`AsyncTask`非常简单有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:34:20.907

## 异步任务

*   AsyncTask 旨在提供一种方便、易于使用的方式来实现 Android 应用程序的后台处理，而无需过多担心低级细节（线程、消息循环等）。它提供了回调方法，有助于安排任务并在需要时轻松更新 UI。

*   AsyncTask 在单独的线程中运行一组操作，可以在其工作期间显示进度并在任务完成时显示通知。

*   但是，可以使用 AsyncTasks 调度的作业数量是有限制的。

## 可运行

*   Runnable 是可以执行的命令。您应该在单独的线程中运行。此外，您应该在这种情况下开发一个逻辑，如何更新进度以及如何在任务完成时通知。

## 处理程序

*   Handler 更透明，可能给你更多的自由；所以如果你想对事情有更多的控制，你会选择 Handler。

*   Handler 是一个特殊的类，可以处理发送到处理程序线程的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:37:34.010

就我而言，如果您需要运行短操作，您可以使用 AsyncTask。为了保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如**Executor**，**ThreadPoolExecutor**和**FutureTask**。也可以参考[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:23:56.897

AsyncTask 的优点是它可以使用 doInBackground 函数在与 UI 线程不同的线程中执行操作，然后使用 onPostExecute 函数将处理的输出返回给 UI 线程。这非常重要，因为只有 UI 线程可以用于 UI 相关功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:37:06.063

Asynctask 更高效，因为它具有函数 onPreExecute()、onPostExecute()、onProgressUpdate() 和 doInBackground() 函数。doInBackground() 函数在单独的线程中运行，我们可以在其中运行密集操作，您可以使用 onProgressUpdate() 更新正在运行的操作的进度。并且在 doInBackground() 函数完成后调用 onPostExecute() 函数，如果使用，您可以关闭进度对话框。这里的优点是您不需要创建单独的线程，因为此类具有执行此操作的功能。

# ios - 如何判断动画是完全完成还是被中断？

> ID：13565403
> 
> 赞同：1
> 
> 时间：2012-11-26T13:01:42.620
> 
> 标签：ios, core-animation, cabasicanimation

我有一个 UIView 和两个 UISwipeGesture 类，它们在 0 和 -99 之间为 X 旋转设置动画，从而提供翻转板效果。如果用户向下滑动然后立即向上滑动，则“向下滑动”动画过早结束并开始向上滑动动画。

我如何判断它是否由于添加了另一个动画而提前结束？animationDidStop:finished 消息被发送，**但完成的值始终为 TRUE。**

这是向下滑动的代码：

```
CATransform3D transform = CATransform3DIdentity;

// This must be set before we calculate the transforms to give the 3D perspective (1.0 / -DISTANCE_FROM_CAMERA)
transform.m34 = 1.0 / -4000;
// Rotate on the X axis
transform = CATransform3DRotate(transform, DegreesToRadians(-99), 1, 0, 0);

// Apply transform in an animation
CABasicAnimation* foldDownAnimatnion = [CABasicAnimation animationWithKeyPath:@"transform"];
foldDownAnimatnion.duration = 1;
foldDownAnimatnion.toValue = [NSValue valueWithCATransform3D:transform];
foldDownAnimatnion.removedOnCompletion = NO;
foldDownAnimatnion.fillMode = kCAFillModeForwards;
foldDownAnimatnion.delegate = self;

// Identify this animation in delegate method
[foldDownAnimatnion setValue:@"foldDown" forKey:@"name"];
[foldDownAnimatnion setValue:theLayer forKey:@"layer"];

[theLayer addAnimation:foldDownAnimatnion forKey:nil]; 
```

我的委托方法：

```
- (void)animationDidStop:(CAAnimation *)animation finished:(BOOL)finished
{
    if([[animation valueForKey:@"name"] isEqualToString:@"foldDown"])
    {
        // Why is this always YES??
        NSLog(@"Animation finished: %@", (finished)?@"Yes" : @"No");

    }
    else if([[animation valueForKey:@"name"] isEqualToString:@"foldUp"])
    {
        NSLog(@"animationDidStop: foldUp");

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:24:06.590

感谢@DavidRönnqvist 为我指明了正确的方向，我回到了我[关于 iOS4 的 O'Reilly 书籍](http://www.google.co.uk/search?tbm=bks&hl=en&q=Programming%20iOS%204&btnG=)并重新制作了动画，现在代码更清晰了：

刷下：

```
CATransform3D transform = CATransform3DIdentity;

// This must be set before we calculate the transforms to give the 3D perspective (1.0 / -DISTANCE_FROM_CAMERA)
transform.m34 = 1.0 / -4000;
// Rotate on the X axis
transform = CATransform3DRotate(transform, DegreesToRadians(-99), 1, 0, 0);

// Apply transform in an animation
[CATransaction setDisableActions:YES];
theLayer.transform = transform;

CABasicAnimation* foldDownAnimatnion = [CABasicAnimation animationWithKeyPath:@"transform"];
foldDownAnimatnion.duration = 1;
foldDownAnimatnion.delegate = self;
[foldDownAnimatnion setValue:@"foldDown" forKey:@"name"];
[foldDownAnimatnion setValue:theLayer forKey:@"layer"];

[theLayer addAnimation:foldDownAnimatnion forKey:@"foldDown"]; 
```

向上滑动

```
[theLayer removeAnimationForKey:@"foldDown"];

CATransform3D transform = CATransform3DIdentity;
// This must be set before we calculate the transforms to give the 3D perspective (1.0 / -DISTANCE_FROM_CAMERA)
transform.m34 = 1.0 / -4000;
// Rotate on the X axis
transform = CATransform3DRotate(transform, DegreesToRadians(0), 1, 0, 0);

// Apply transform in an animation
[CATransaction setDisableActions:YES];
theLayer.transform = transform;

CABasicAnimation* animatnion = [CABasicAnimation animationWithKeyPath:@"transform"];
animatnion.duration = 1;
animatnion.delegate = self;
[animatnion setValue:@"foldUp" forKey:@"name"];

[theLayer addAnimation:animatnion forKey:@"foldUp"]; 
```

真正的关键是我**将新的变换应用于图层，然后对其进行动画处理**。我之前所做的是将动画应用到图层并使其向前填充，当我在中途移除它时会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:59:47.060

添加两个 BOOL 实例变量(BOOL UpAnimationStarted; BOOL DownAnimationStarted;) 在 SwipeUp 的开头设置 UpAnimationStarted 为 YES。并且在 SwipeDown 的开头将 DownAnimationStarted 设置为 YES。您可以使用这些 BOOL 值来检查动画中断。

# html - 在 HTML 中，是否可以在没有 Javascript 的情况下相对于不同元素定位元素

> ID：13565405
> 
> 赞同：2
> 
> 时间：2012-11-26T13:01:54.777
> 
> 标签：html, css

我想知道是否可以仅使用 HTML 和 CSS（没有任何 Javascript）来实现以下目标：

```
|--div1-----------------|
|         |--div2------||
|         |            ||
||--div3-||            ||
||       ||____________||
||       |              |
||       |              |
||_______|              |
|_______________________| 
```

*   div1 包含 div2 和 div3。
*   div2 一直在 diff3 的顶部和右侧
*   div3 一直在左侧，它的顶部从div2 高度的**一半**（或其他可配置的百分比）开始。
*   div2 和 div3 的大小未知。我不是要求使用绝对位置硬编码这个明显的解决方案。我正在寻找的解决方案必须适用于任意大小的 div。

更一般地说：有没有一种方法可以通过引用另一个元素的位置和大小来指定元素的位置，而不使用 Javascript？

编辑：上面示例的目标是 div1 在根据需要定位后自动扩展以适应 div2 和 div3，因此 div1 的大小也事先不知道。

EDIT2： 换个方式提出问题： 是否有某种方法可以指定类似于此“魔术” CSS 的样式：

```
#div2 { ... }
#div3 {
   position absolute;
   top: div2.height/2;
} 
```

也许使用`calc()`？

EDIT3： div2 和 div3 不能相互嵌套。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:07:10.140

```
<div>
<div style="float:left; width: 50%; margin-top: 100px; height: 300px;"></div>
<div style="float:left; width: 50%; height: 300px;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:10:20.133

```
<div id="div1" style="border:thin red solid; width:600px; margin-left:300px">
    <div style="height:700px; width:300px; border:thin solid green;float:right; position:relative">
        <div style="border:thin solid black; height:200px; width:290px; top:50%; position:absolute; margin-left:-300px"></div>
    </div>
<div style="clear:both"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:25:18.870

我能得到的最接近的近似值是：

```
#div1{
   position: relative;
   overflow: hidden;
}

#div3 {
   position absolute;
   top: 50%;
   left: 0;
   max-width: 50%;
   max-height: 50%;
}

#div2 {
   position: absolute;
   top: 0;
   right: 0;
   max-width: 50%;
} 
```

这种方法对 OP 的问题的问题是父 div 的大小是约束因素，我们被迫限制子级的最大大小。 *但是*，如果孩子*确实*适合父母，上面的 CSS 应该会提供预期的结果。

# grails - 如何为“创建”视图自动生成 grails 代码，允许我们在 Contact create.gsp 本身中添加多个电话号码？

> ID：13565406
> 
> 赞同：0
> 
> 时间：2012-11-26T13:01:57.343
> 
> 标签：grails

```
class Contact { 
    String firstName 
    String lastName 

    static hasMany = [ phones:Phone ] 
} 

class Phone { 
    String number 

    static belongsTo = [ contact:Contact ] 
} 
```

有没有办法自动生成允许我们在 Contact create.gsp 本身中添加多个电话号码的创建视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:33:09.857

这篇文章[Grails 一对多动态表单](http://omarello.com/2010/08/grails-one-to-many-dynamic-forms/)可以帮助您实现这一目标。

# perl - Perl 中的方括号有什么作用？

> ID：13565408
> 
> 赞同：7
> 
> 时间：2012-11-26T13:02:01.063
> 
> 标签：perl, literals

我对 perl 中方括号逗号分隔元素的使用感到困惑：

```
[short($file), -s $file]; 
```

有人能告诉我这段代码是什么意思吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T13:04:45.503

`[]`创建一个数组引用。

`[ $scalar, $scalar ]`创建一个包含两个项目的数组引用。

`short($file)`调用一个子程序并返回一些东西（可能是一个标量或一个标量列表）

`-s $file`为您提供文件的大小（作为标量）。

`[short($file), -s $file]`给你一个包含上述两件事的数组 ref。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T13:03:03.667

它创建对包含两项的数组的引用，即函数调用的结果`short($file)`和`$file`.

# sql - 用其他值计算一个值

> ID：13565419
> 
> 赞同：1
> 
> 时间：2012-11-26T13:02:58.020
> 
> 标签：sql, sql-server, sql-server-2008

让我们简单点：

```
USE Example1

    CREATE TABLE Person
    (PersonID int PRIMARY KEY IDENTITY(1,1),
    FirstName nchar(20) NOT NULL,
    LastName  nchar(20) NOT NULL,
    Salary money NOT NULL
    ) 

        CREATE TABLE Student
        (StudentID int PRIMARY KEY IDENTITY(1,1),
        FirstName nchar(20) NOT NULL,
        LastName  nchar(20) NOT NULL,
        FatherID int NOT NULL,
        MotherID int NOT NULL,
        CONSTRAINT fk_Student_FatherID FOREIGN KEY (FatherID)
        REFERENCES Person(PersonID),
        CONSTRAINT fk_Student_MotherID FOREIGN KEY (MotherID)
        REFERENCES Person(PersonID)
        ) 

    CREATE TABLE Registration
    (RegistrationID int PRIMARY KEY IDENTITY(1,1),
    StudentID int NOT NULL,
    Date datetime NOT NULL,
    MonthlyPayment ??????????
    CONSTRAINT fk_Registration_StudentID FOREIGN KEY (StudentID)
    REFERENCES Student(StudentID)
    ) 

    INSERT INTO Person VALUES ('John','Doe','1000')
    INSERT INTO Person VALUES ('Mary','Poppins','800')

    INSERT INTO Student VALUES ('Gary','Doe', 1, 2)

    INSERT INTO Registration VALUES (1, getdate(),???) 
```

我有一个学生要在学校进行注册，并且每月支付一笔款项，`FatherSalary*0.5 + MotherSalary*0.5`但我不知道如何做到这一点。我是 SQL 新手，也许这很简单，我应该知道如何制作它，但我不知道，我需要帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:09:15.767

你确定你`MonthlyPayment`的表中需要列吗？

您可以创建`Registration`没有`MonthlyPayment`字段的表，然后创建一个视图

```
create view vw_Registration
as
    select
        R.RegistrationID,
        R.StudentID,
        R.Date,
        F.Salary * 0.5 + M.Salary * 0.5 as MonthlyPayment
    from Registration as R
        left outer join Student as S on S.StudentID = R.StudentID
        left outer join Person as F on F.PersonID = S.FatherID
        left outer join Person as M on M.PersonID = S.MotherId 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/2a41d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:41:51.040

第一手的观点听起来不错，但我可以想象一个场景，您想根据某个时间点的可用数据计算每月付款，因此每次父亲或母亲的工资发生变化时，每月付款都不会改变...

在这种情况下，您可以使用：

```
INSERT INTO Registration 
(StudentID, Date, MonthlyPayment)
SELECT S.StudentID, getdate(), ISNULL(F.Salary, 0) * 0.5 + ISNULL(M.Salary, 0) * 0.5
FROM Student as S
left outer join Person as F on F.PersonID = S.FatherID
left outer join Person as M on M.PersonID = S.MotherId
WHERE S.StudentID = 1 
```

[SQL小提琴](http://sqlfiddle.com/#!3/b502a/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:14:13.463

如果表达式“FatherSalary*0.5 + MotherSalary*0.5”不会改变，那么我想你可以使用触发器。你的触发器将检查插入到你的注册表。在插入时，它将获取学生 ID，然后使用此 ID 从您的学生表和您的个人表中获取必要的数据。那时，您将可以访问父亲和母亲的 Money 列。计算结果，并让触发器为您插入。

# google-chrome-extension - Chrome ext 标签：端口错误：无法建立连接。接收端不存在

> ID：13565427
> 
> 赞同：0
> 
> 时间：2012-11-26T13:03:14.947
> 
> 标签：google-chrome-extension, communication

我尝试连接到刚刚创建的新选项卡，我的最终任务是每次尝试通过 id 连接到选项卡时以任何方式更新所有打开的选项卡上的 html 小部件，但因错误而失败。我正在使用版本 23.0.1271.64 m

```
var channelTabs = [];
  function isInclude(arr,obj) {
    return (arr.indexOf(obj) != -1);
}
    chrome.tabs.onCreated.addListener(function(tab) {

      // add tab when opened
     if (channelTabs.indexOf(tab.id) == -1) {
        channelTabs.push(tab.id);
     }

    chrome.windows.getCurrent(function(win)
    {
        // get an array of the tabs in the window
        chrome.tabs.getAllInWindow(win.id, function(tabs)
        {
            for (i in tabs) // loop over the tabs
            {
                // if the tab is not the selected one
                if(isInclude(channelTabs,tabs[i].id))
                {
                    if(/^(https?|file):/.test(tabs[i].url))
                    {
                        console.log('Debug Background sending update to open tab id:'+tabs[i].id);
                        var port = chrome.tabs.connect(tabs[i].id,{name: "content_tab_request"});
                        port.postMessage({resp: "tab_update",data:"some string song1"});
                    }
                }

            }
        });
    });

    chrome.tabs.onUpdated.addListener(function(tabId, changeInfo,tab) {
    // Example: allow http:, https: and file:
    if (/^(https?|file):/.test(tab.url)) {
            console.log('Debug Background sending onUpdated to open tab id:'+tabId);
            var port = chrome.tabs.connect(tabId,{name: "content_tab_request"});
            port.postMessage({resp: "tab_update",data:"some string song1"});
    }
    });

 }); 
```

但每次它尝试 chrome.tabs.connect 它给我：

```
Port error: Could not establish connection. Receiving end does not exist. miscellaneous_bindings:235
chromeHidden.Port.dispatchOnDisconnect miscellaneous_bindings:235
chrome.Event.dispatch_ event_bindings:371
dispatchArgs event_bindings:249
chromeHidden.Event.dispatchEvent 
```

和内容脚本：

```
// Register this tab to the background script
  var port = chrome.extension.connect({name: "content_request"});
  port.postMessage({req: "Hello"});

  port.onMessage.addListener(function(msg) {

    if (msg.resp == "World")
    {      
      port.postMessage({answer: "good"});
    }
    else if(msg.answer == "bye")
    {
         console.log('Debug contentscript.js reciving answer from background msg.answer:'+msg.answer);
    }
    else
    {
         console.log('Debug contentscript.js reciving answer from background is wrong:'+msg);
    }

    if(port.name == "content_tab_request")
    {
        console.log('Debug contentscript.js reciving request from background Tab function:'+msg);
        if(msg.resp=="tab_update ")
        {
            var data_recive = msg.data;
            console.log('Debug contentscript.js reciving request data from background Tab to update page data_recive:'+data_recive);

        }
    }
  }); 
```

.json 文件：

```
{
   "background": {
      "page": "background.html" 
   },
   "content_scripts": [
    {
      "matches": ["<all_urls>"],       
      "js": ["contentscript.js"],
      "run_at": "document_start",
      "all_frames": true
    }
   ],
   "web_accessible_resources": [
    "script_inpage.js"
   ],
   "browser_action": {
      "default_icon": "icon19.png",
      "default_popup": "popup.html",
      "default_title": "Simple test"
   },
   "content_security_policy": "script-src 'self'; media-src *; object-src 'self'",
   "description": "Simple test.",
   "icons": {
      "128": "icon128.png",
      "16": "icon16.png",
      "32": "icon32.png",
      "48": "icon48.png"
   },

   "manifest_version": 2,
   "minimum_chrome_version": "20",
   "name": "Simple test",
   "permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ],

   "version": "2.6"
} 
```

顺便说一句，从内容脚本到后台的连接工作得很好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:25:09.133

好的，您似乎正在尝试同步异步事件，在简化您的代码后，我通过修改使其运行并实现了您的`posting message to all tabs when a new tab is created`.

```
Output: 
```

我能够在所有选项卡上看到此消息

![在此处输入图像描述](../Images/ca44099cb9340be5433558c13f8f05ed.png)

***清单.json***

```
{
"name":"Sample communication from content to background",
"description":"This is a sample for Simulating communication from content to background",
"manifest_version":2,
"version":"2",
"background":{
    "scripts":["background.js"]
},
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js"],
      "run_at":"document_start"
    }
  ]
} 
```

***“背景.js”***

```
chrome.tabs.onCreated.addListener(function(tab) {
     chrome.windows.getCurrent(function(win){
        chrome.tabs.getAllInWindow(win.id, function(tabs){
            for (i=0;i<tabs.length;i++){
                console.log(tabs[i]);
                chrome.tabs.sendMessage(tabs[i].id,{name: "content_tab_request"});
            }
        });
    });
}); 
```

***“我的脚本.js”***

```
chrome.extension.onMessage.addListener(function(msg) {
    console.log("Message Recieved   "+ msg); 
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:28:08.967

此外，一些 chrome 扩展可能会产生此错误。我遇到了这个问题，问题在于[扩展](https://chrome.google.com/webstore/detail/hkhbmdeeajbgkdpaiencghlmbgbkpdaa)（用于将文章保存到 Pocket）。错误是：

> 端口错误：无法建立连接。接收端不存在。miscellaneous_bindings:235 chromeHidden.Port.dispatchOnDisconnect

# jquery - 使用数据字段存储 JSON？

> ID：13565428
> 
> 赞同：4
> 
> 时间：2012-11-26T13:03:15.553
> 
> 标签：jquery, ajax, json, html

这是我的代码，基本上我有一个用 jQuery 编写的通用 open_modal 函数，我想用它`data-fields`来传递`{'json':'data'}`.

所以这是我的代码。

[JSfiddle](http://jsfiddle.net/fFCZc/1/)

**HTML**

```
 <a href="#" class="send_request" data-dataset="{'test':1}" data-url="/test.html">Data load!</a>
<div id="area"></div> 
```

​<strong>jQuery

```
 $("body").delegate(".send_request", 'click', function(e) {

        var $this = $(this);
        var $modal_data = $("#area");
        var $url = $this.attr('data-url');
        var $dataset = JSON.stringify($this.data('dataset'));

        alert($dataset);

        $("#area").load($url,$dataset);
        return false;
    });​ 
```

基本上它不起作用，数据没有被传递。是否需要先以某种方式解析数据字段数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:54:15.400

data-dataset 中的对象在检索时已经是一个 JSON 对象，并且在指定 JSON 属性名称时还需要双引号。执行以下操作应该有效：

在您的 html 片段中：

`data-dataset="{'test':1}"`至`data-dataset='{"test":1}'`

在你的 JS 代码中

`var $dataset = JSON.stringify($this.data('dataset'));`

至 `var $dataset = $this.data('dataset');`

这是您的 jsfiddle [http://jsfiddle.net/C3Cbe/2/](http://jsfiddle.net/C3Cbe/2/)的修改版本。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:32:15.237

属性值已被字符串化，您必须运行它`JSON.parse`才能将其从 JSON 文本转换为 JavaScript 对象。

无法判断是否应将其转换为 JavaScript 对象，因为我们不知道请求另一端的服务器期望什么。你当然不应该`stringify`这样做。

但是，您的示例是无效的 JSON。JSON 字符串必须用`"`字符引用。`'`是不能接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:24:59.727

您的代码片段可以很好地检索这两条数据，但它稍后会使用文字 JSON 字符串（不是 JavaScript 对象）提供 AJAX 调用：

```
$("#area").load($url,$dataset); 
```

这最终会产生这样的 GET 请求：

```
/test.html?%22{%27test%27:1}%22 
```

...这可能不是你想要的。

**更新：**

我的建议是：

1.  修复当前无效的 JSON 字符串（您使用单引号作为属性名称）
2.  使用`JSON.parse()`或 jQuery 的等价物。

# android - 如何在 ActionBar 的图标/徽标上获得 OnClick

> ID：13565431
> 
> 赞同：2
> 
> 时间：2012-11-26T13:03:26.970
> 
> 标签：android

当我单击操作栏徽标时，如何进行单击操作。我试过

> onOptionsItemSelected
> 
> case android.R.id.home://here 采取行动

它不起作用。我试图在我的装饰视图上添加 onClick 监听器，像这样在 onCreate

```
getWindow().getDecorView().setOnClickListener(this);
getWindow().getDecorView().setOnTouchListener(this);
getWindow().getDecorView().getRootView().setOnClickListener(this);
getWindow().getDecorView().getRootView().setOnTouchListener(this); 
```

我实现了简单的监听器

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "onTouch pressed", Toast.LENGTH_LONG).show();

    return false;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "onClick pressed", Toast.LENGTH_LONG).show();
} 
```

但它没有输入任何方法。当用户单击我的装饰视图的左上角时，如何在图标上获得 OnClick 操作或 onclick 操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:07:20.693

首先将 logo 设置为可点击按钮：

```
myActionBar.setHomeButtonEnabled(true); 
```

然后，重写此方法以获取点击：

```
public boolean onMenuItemSelected(int featureId, MenuItem item) 
```

# php - 如何使用 3 个表执行 JOIN 查询，按 ID 计数排序

> ID：13565441
> 
> 赞同：0
> 
> 时间：2012-11-26T13:03:59.750
> 
> 标签：php, symfony, doctrine-orm, dql

我有 3 张桌子： **Event、EventSeans、Firms**。我需要返回公司，并在此公司事件实体中按事件计数排序：

```
 /**
 * @ORM\OneToMany(
 *     targetEntity="EventSeans",
 *     cascade={"persist", "remove", "merge"},
 *    mappedBy="event"
 *  )
 *  @ORM\OrderBy({"start_time"= "ASC"})
 */
protected $seanses; 
```

EventSeas 实体：

```
 /**
 * @ORM\ManyToOne(
 *      targetEntity="Application\GidBundle\Entity\Firm")
 */
protected $place;

 /**
 * @ORM\ManyToOne(
 *      targetEntity="Event",
 *      inversedBy="seanses"
 * )* 
 */
protected $event; 
```

我试过这个：

```
 $qb
        ->select('f, count(e.id) cnt')
        ->from('AfishaBundle:Event', 'e')
        ->from('GidBundle:Firm', 'f')
        ->leftJoin('e.seanses', 's')
        ->where('s.place = f.id')
        ->orderBy('cnt','ASC')
        ->setMaxResults(3)
    ; 
```

**编辑** 我在公司实体中添加关系

```
 /**
 * @ORM\OneToMany(
 *     targetEntity="Application\AfishaBundle\Entity\EventSeans",
 *     cascade={"persist", "remove", "merge"},
 *    mappedBy="place"
 *  )
 *  @ORM\OrderBy({"start_time"= "ASC"})
 */
protected $seanses; 
```

我的查询是

```
 $qb
        ->select('f, count(e.id) cnt')
        ->from('GidBundle:Firm', 'f')
        ->leftJoin('f.seanses','s')
        ->leftJoin('s.event', 'e')
        ->orderBy('cnt', 'DESC')
        ->groupBy('f.id')
        ->setMaxResults(20)
    ; 
```

但是cnt - 是我的感觉......它没有任何变化：（

**添加**

```
CREATE TABLE IF NOT EXISTS `afisha_event_seanses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `place_id` int(11) DEFAULT NULL,
  `event_id` int(11) DEFAULT NULL,
  `start_time` datetime NOT NULL,
  `allday` tinyint(1) NOT NULL,
  `cost` int(11) NOT NULL,
  `hall` varchar(255) NOT NULL,
  `region` varchar(255) NOT NULL,
  `end_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IDX_3164A4B7DA6A219` (`place_id`),
  KEY `IDX_3164A4B771F7E88B` (`event_id`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ;

 ALTER TABLE `afisha_event_seanses`
  ADD CONSTRAINT `FK_3164A4B771F7E88B` FOREIGN KEY (`event_id`) REFERENCES `afisha_events` (`id`),
   ADD CONSTRAINT `FK_3164A4B7DA6A219` FOREIGN KEY (`place_id`) REFERENCES `gid_firms` (`id`); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:59:22.813

如果我认为您的实体关系定义明确。

以下代码应返回带有与每个公司相关的事件计数的公司。

**在您的FirmRepository**中添加一个方法，其中包含，

```
 $query = $this->createQueryBuilder('f')
           ->select(' f, count(distinct e.id)')
           ->leftJoin('f.seanses', 's')
           ->leftJoin('s.event', 'e')
           ->groupBy('f.id')
           ->getQuery()
           ->getArrayResult(); 
```

在哪里定义从您的实体到您的实体`event`的多对一关系，如下所示，`EventSeans``Event`

```
/**
 * @ORM\ManyToOne(targetEntity="Application\GidBundle\Entity\Event")
 */
protected $event; 
```

# android - 简单的 jQuery .ajax 不适用于三星 Galaxy S3

> ID：13565442
> 
> 赞同：2
> 
> 时间：2012-11-26T13:04:00.780
> 
> 标签：android, jquery, ajax

我已经搜索了很多这个或类似的问题，并遇到了一些解决方案，但不幸的是它们没有帮助。我的问题是我有一个带有表单的简单 HTML 网页。当点击回车（这是一个链接而不是表单的提交按钮）时，它会收集输入到表单中的所有数据并将其发布到客户端的通用表单处理程序（这会处理数据，然后将其存储到他们的数据库中）。该页面目前可在 iPhone 4 和三星 Galaxy S2 上运行 - 但在 S3 上，.ajax 调用将无法运行。这是我的代码：

```
$.ajax({
    type: "POST",
    url: "CLIENT_URL", // this is replace with the actual URL in my code and I know works
    data: queryParams,
    cache: false
    success: function(data){

        $('#comp-inner').hide();

        $("html, body").animate({ scrollTop: 0 }, "slow");

        $('#comp-inner-thanks').show();

    }       
}); 
```

就像我说的那样，这在其他设备上运行得非常好……只是不是三星 Galaxy S3 设备——有人能帮忙吗？我发现并尝试过的事情：

*   使用 .post 代替
*   应用缓存：对 ajax 选项为 false
*   尝试使用 jQuery 移动

如果有人能帮上忙，那就太好了，我可以想象我错过了一些愚蠢的事情:(

干杯

# android - data-role="Content" 宽度不随方向变化

> ID：13565447
> 
> 赞同：0
> 
> 时间：2012-11-26T13:04:25.263
> 
> 标签：android, cordova, jquery-mobile, screen-orientation

我正在使用 PhoneGap 开发一个 Android 应用程序。当我将模拟器方向从纵向更改为横向时，页面的页眉和页脚的宽度发生了变化，但`data-role="content"`块的宽度与纵向模式相同。

如何解决这个问题。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:21:23.687

这在某些安卓设备上是一个不常见的问题。这是我的修复：

```
body {
  height: 100%;
}

#page, #page .content {
  height: 100%;
  min-height: 100%;
} 
```

在此处添加您的应用程序正在使用的每个页面。不幸的是，我不记得此修复程序的网络资源。

# unix - sed 命令 - 分支到标签

> ID：13565453
> 
> 赞同：1
> 
> 时间：2012-11-26T13:04:34.780
> 
> 标签：unix, sed, aix

我无法获得与 SED 教程中给出的示例相同的输出，用于下面的分支， [http://www.grymoire.com/Unix/Sed.html#uh-59](http://www.grymoire.com/Unix/Sed.html#uh-59)

在这里引用代码：

```
#!/bin/sh
sed '
:again
    s/([ ^I]*)//
    t again
' 
```

此过滤器后的空格仍在括号中。

[更新]这是我的输出：

```
$echo "( ( test ) )" | sed '
> :again
>      s/([ ]*)//
>      t again
> '
( ( test ) )
$ 
```

不应该这样`((test))`吗？如作者所示，如何让脚本删除嵌套括号中的空格？

[/更新]

[更新2]

```
$echo " ( ( ) ) " | sed '
> :again
> s/\([ ]*\)//
> t again
> ' 
```

提示不回来。

[/更新2]

另外如何输入“^I”字符？我认为它是水平选项卡，但我无法像其他控制字符一样通过 puTTY 键入（例如，要获取“Enter”，我键入“Ctrl-V”，然后按“Enter”键，但这不是'不适用于标签）。我尝试仅使用空格（使用正则表达式`[ ]*`而不是`[ ^I]*`），但这也无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:53:49.530

欺负你通过一些教程工作。

假设您正在使用`vi`或您需要做的就是在分组`vim` **中包含一个制表符，****就是键入制表键**。（我一直使用腻子，如果按制表符没有将制表符“插入”到文档/命令行中，那么您遇到了腻子配置问题）。`[ .. ]`

 **来自`^I`vi`list`模式。`List`模式很方便查看换行符 (\n) 将显示为 reg-exp char 的`$`位置（在 reg-ex 中是“行尾锚”，另一个是`^`char（行首）） .

所以打开`vi`列表模式，`:li`你会看到所有标签字符都扩展为`^I`，所有行尾为`$`

正如你所说

> 如何让脚本删除嵌套括号中的空格，如图所示

这有点模棱两可，因为较新的 sed 使用普通括号作为分组字符来创建替换组，例如`\1`s/pat/repl/ 替换 cmd 的替换端。

鉴于您的示例在替换端没有编号替换值，我假设目的是删除一个文字`()`对并且它应该按指示工作。一旦你`:set list`，在里面添加一个tab-char `[ ... ]`，它应该可以工作。如果没有，请使用可能出现的任何错误消息来编辑您的问题。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:15:48.600

`( test )` 与正则表达式不匹配`([ ]*)`。`([ ]*)`只匹配括号内只包含空格的字符串。也许您正在寻找`([ ]*`删除内部的前导空格并`[ ]*)`删除尾随空格。**

# java - 在 jboss-as-7.1.1 上部署 jar 文件时出错

> ID：13565458
> 
> 赞同：0
> 
> 时间：2012-11-26T13:04:53.450
> 
> 标签：java, jboss, jboss7.x

我有以下情况：

我有一个包含三个项目的 java 应用程序：

*   Java 项目
*   EJB 模块
*   网络项目

使用net beans，我构建了三个项目并将它们上传到服务器上。Java 项目部署成功，但依赖于 Java 项目的 EJB 模块出现以下错误：

```
12:35:00,811 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.unit."MyApp.jar".POST_MODULE: org.jboss.msc.service$
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.6.0_20]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.6.0_20]
        at java.lang.Thread.run(Thread.java:636) [rt.jar:1.6.0_20]

Caused by: java.lang.RuntimeException: Error getting reflective information for class gss.myapp.sessions.CardValidatorBean with ClassLoader ModuleClassLoader for Module "deplo$
        at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)
        at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        ... 5 more

Caused by: java.lang.NoClassDefFoundError: gss/commons/exceptions/BusinessEntityFindException
        at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.6.0_20]
        at java.lang.Class.privateGetDeclaredFields(Class.java:2308) [rt.jar:1.6.0_20]
        at java.lang.Class.getDeclaredFields(Class.java:1760) [rt.jar:1.6.0_20]
        at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:57) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        ... 10 more

Caused by: java.lang.ClassNotFoundException: gss.commons.exceptions.BusinessEntityFindException from [Module "deployment.MyApp.jar:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:22:08.117

异常清楚地表明它找不到类 `gss.commons.exceptions.BusinessEntityFindException`

您的 ejb jar 文件`MANIFEST.MF`应该包含它需要的类路径，例如

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.1
Created-By: 1.6.0_25-b06 (Sun Microsystems Inc.)
Class-Path: your-java-project.jar 
```

并确保将您的包含`your-java-project.jar`在您的服务器类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T00:17:25.267

您需要将 gss.commons.exceptions.BusinessEntityFindException 类添加到 JBoss：

我将**YOUR_JAR.jar**调用到包含 gss/commons/exceptions/BusinessEntityFindException 的 jar

1：给 JBoss 添加一个模块

*   停止您的 JBoss 服务器
*   在您的目录中找到 YOUR_JAR.jar
*   在 JBoss 上创建下一个目录：JBOSS_HOME/modules/org/gss/main
*   把 YOUR_JAR.jar 放到这个目录下
*   创建一个名为 module.xml 的文件并添加：

<

```
<?xml version="1.0" encoding="UTF-8"?>
 <module xmlns="urn:jboss:module:1.1" name="org.gss">
 <resources>
 <resource-root path="YOUR_JAR.jar"/>
 </resources>
</module> 
```

*

2：从您的项目中调用您的新模块：

*   在您的 Web 项目上创建一个文件 WEB-INF/jboss-deployment-structure.xml
*   添加：

<

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
      <dependencies>
         <module name="org.gss" meta-inf="export">
            <imports>
               <include path="META-INF" />
            </imports>
         </module>
      </dependencies>
   </deployment>
</jboss-deployment-structure> 
```

*   启动你的 Jboss 服务器

# ios - Cocos2D 在 replceScene 和 removeAllDelegates 后阻止按钮

> ID：13565461
> 
> 赞同：1
> 
> 时间：2012-11-26T13:05:03.423
> 
> 标签：ios, cocos2d-iphone, blocked

我对 Cocos2d 有一个严重的问题。

1）我有一个场景，里面有几个按钮

2）我有另一个场景，我在其中使用

```
 -(void) onEnter {
      [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0 swallowTouches:YES];
      [super onEnter];
    } 
```

并且

```
-(void) onExit {
   [[[CCDirector sharedDirector] touchDispatcher] removeDelegate:self];
   [super onExit];
} 
```

3）将第一个场景替换为第二个后一切正常
4）但在返回到第一个场景（通过replaceScene）后，第一个场景上的所有按钮都被阻止。没有任何效果
5) 如果我没有在第一个场景工作的“onExit()”按钮中使用“removeDelegate”，但来自第二个场景的触摸仍然有效。

# php - 源代码和检查元素输出的差异（以及网页的行为）

> ID：13565463
> 
> 赞同：1
> 
> 时间：2012-11-26T13:05:10.200
> 
> 标签：php, html, css, while-loop, browser

我想不出这个问题的标题应该是什么，对不起！这是我正在编写的 php 页面的代码：

```
 echo '<table>';

    $conn = dbconnect();
    $query = 'SELECT * FROM validUploads';
    $result = @$conn->query($query);
    if($result)
    {   
        while(true)
        {   $data = $result->fetch_assoc();
            if(!$data)
            {   break;
            }
            else
            {   $id = $data['id'];
                $college = $data['college'];

                echo<<<__REG_DATA
                    <tr>
                        <a name="ds{$id}"></a>
                        <div id="ds{$id}">
                            <td>{$id}</td>
                            <td>{$college}</td>
                            <td><a href="download.php?dId={$id}"></a></td>
                        </div>
                    </tr>
__REG_DATA;
            }
        }
    }

echo '</table>'; 
```

在浏览器中运行时，源代码按预期很好地显示了打印的详细信息，例如：

```
<tr>
    <a name="ds1"></a>
    <div id="ds1">
    <td>1</td>
    <td>College1</td>
    <td><a href="download.php?dId=1"></a></td>
</tr>
.
. 
```

但是当我使用萤火虫检查第 7 行的元素时，它显示如下：

```
<div id="ds1"> <a name="ds1"></a> </div>
<div id="ds2"> <a name="ds2"></a> </div>
<table>
<tr>
    <td>1</td>
    <td>College1</td>
    <td><a href="download.php?dId=1"></a></td>
</tr>
<tr>
    <td>2</td>
    <td>College2</td>
    <td><a href="download.php?dId=2"></a></td>
</tr> 
```

这是一个问题，因为我要使用 css3 突出显示表中的锚定行

```
:target
{   ....
} 
```

是的，当请求一个 url： [http](http://mysite.com/index.php#ds2) ://mysite.com/index.php#ds2 时，它会滚动到表格的顶部，而不是第 2 行，这与检查元素的输出一致！

有人可以解释这种行为以及如何纠正它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:06:32.573

生成的 HTML 无效（只有`<td>`和`<th>`元素可能是元素的子`<tr>`元素）。浏览器尝试从错误中恢复。结果就是您在 DOM 检查器中看到的内容。

[始终使用验证器](http://validator.w3.org/)测试您的标记。

为了获得您想要的效果，您可能应该这样做：

```
<tr id="ds1">
  <td>1</td>
  <td>College1</td>
  <td><a href="download.php?dId=1"></a></td>
</tr> 
```

# php - 用 2 个单数组创建维数组

> ID：13565464
> 
> 赞同：2
> 
> 时间：2012-11-26T13:05:23.030
> 
> 标签：php, arrays

我有 2 个数组，我想要 2 个创建 2D 数组来创建 mysql 记录

```
 Array
      (
           [0] => a
           [1] => b
           [2] => c
       )
       Array
       (
           [0] => 1
           [1] => 2
           [2] => 3
         ) 
```

我想要 2 像这样将它们合并到二维数组中

```
 Array
(
[0] => Array
    (
        [designation_id] => 1
        [judge_name] => a
    )

[1] => Array
    (
        [designation_id] => 2
        [judge_name] => b
    )

[2] => Array
    (
        [designation_id] => 3
        [judge_name] => c
    )

 ) 
```

我使用 array_merge_recursive 并生成这样的结果

```
 Array
 (
     [0] => a
     [1] => b
     [2] => c
     [3] => 1
     [4] => 2
     [5] => 3
  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:09:17.900

假设 .. 中的值总是相同`$array1`的`$array2`。

```
$array1 = Array("a","b","c");
$array2 = Array(1,2,3);
$newArray = Array();

foreach($array1 as $key => $arr1Val){
    $newArray[$key]['designation_id'] = $array2[$key];
    $newArray[$key]['judge_name'] = $array1[$key];
} 
```

当然，您必须根据自己的需要进行更改`$array1`，`$array2`但您了解基本思想。[在这里](http://codepad.org/42aHEq0C)检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:08:42.117

假设`$array1`是`judge_name`并且`$array2`是`designation_id`

```
$newArray = array();

for($i=0; $i<count($array1); $i++)
{
    $newArray[] = array(
        'designation_id' => $array2[$i],
        'judge_name' => $array1[$i]
    );
} 
```

**[键盘演示](http://codepad.org/Sfv3aLPg)**

**输出**

```
Array
(
    [0] => Array
        (
            [designation_id] => 1
            [judge_name] => a
        )

    [1] => Array
        (
            [designation_id] => 2
            [judge_name] => b
        )

    [2] => Array
        (
            [designation_id] => 3
            [judge_name] => c
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:09:22.537

简单得要命

```
$array1 = array('a', 'b', 'c');
$array2 = array(1,2,3);

$merged = array();
foreach($array1 as $key => $value)
{
    $merged[$key] = array(
        'judge_name' => $value,
        'designation_id' => array_key_exists($key, $array2) ? $array2[$key] : null
    );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:10:41.050

假设两个数组大小相同

```
$length = count($array1);
$finalArray = array();

for ($i = 0; $i < $length; $i++) {
    $temp = array();
    $temp['designation_id']  = $array1[$i];
    $temp['judge_name']  = $array2[$i];
    $finalArray[$i] = $temp;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T13:11:57.307

如果你有 PHP >= 5.3，你可以[`MultipleIterator`](http://www.php.net/manual/en/class.multipleiterator.php)用于这个目的：

```
$designations = array(1, 2, 3);
$judges = array('a', 'b', 'c');

$mt = new MultipleIterator(MultipleIterator::MIT_KEYS_ASSOC);
$mt->attachIterator(new ArrayIterator($designations), "designation_id");
$mt->attachIterator(new ArrayIterator($judges), "judge_name");

$final = iterator_to_array($mt, false);
print_r($final); 
```

[**演示**](http://codepad.viper-7.com/sovb6u)

它迭代多个数组，在每个迭代器处从每个数组中获取一个值；您可以为将用于形成单个数组项的每个数组分配一个键。

之后，您使用 . 将结果转换为数组`iterator_to_array()`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T13:13:12.577

```
$a = array('a', 'b', 'c');
$b = array(1,2,3);
$output = array_map(function($i, $j){
    return array(
        'judge_name'     => $j,
        'designation_id' => $i
    );
}, $a, $b);

var_dump($output); 
```

输出

```
array(3) {
  [0]=>
  array(2) {
    ["judge_name"]=>
    int(1)
    ["designation_id"]=>
    string(1) "a"
  }
  [1]=>
  array(2) {
    ["judge_name"]=>
    int(2)
    ["designation_id"]=>
    string(1) "b"
  }
  [2]=>
  array(2) {
    ["judge_name"]=>
    int(3)
    ["designation_id"]=>
    string(1) "c"
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T13:15:16.963

```
$new1=array("a","b","c");
$new2=array("1","2","3");
$req=array();
$d=0;
foreach($new1 as $value1)
{
    foreach($new2 as $value2)
    {
        $req[$d]["designation_id"]=$value1;
        $req[$d]["judge_name"]=$value2;
        $d++;
    }
}

echo "<pre>";
print_r($req); 
```

# java - 如何使用带有 spring data -jpa 的存储库填充器？

> ID：13565466
> 
> 赞同：2
> 
> 时间：2012-11-26T13:05:26.707
> 
> 标签：java, spring-data, spring-data-jpa

我正在使用 Spring Data JPA 并且我正在尝试使用存储库填充器来填充数据 - 但我遇到了格式错误的 json 异常。

我认为它可能是 data.json 文件的位置。我已将其放在 META-INF 文件夹中，并正在为测试用例进行如下配置

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:META-INF/integration-test-context.xml","classpath:META-INF/sample-data.xml"})
public class JpaCompanyRepositoryIntegrationTest{

//Test cases here 

} 
```

我的 sample-data.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:repository="http://www.springframework.org/schema/data/repository"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/data/repository
    http://www.springframework.org/schema/data/repository/spring-repository.xsd">

  <repository:jackson-populator location="classpath:data.json" />

</beans> 
```

和 data.json 包含

```
[{"_class" : "com.some.Class",
    "id" : "id1",
    "firstname" : "Admin",
    "lastname" : "admin"
},
{ 
    "_class" : "com.some.Class",
    "id" : "id2",
    "firstname" : "user",
    "lastname" : "user"
}] 
```

我得到以下异常：

```
Caused by: java.lang.RuntimeException: org.codehaus.jackson.JsonParseException: Unexpected character ('c' (code 99)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: java.io.ByteArrayInputStream@61adabf3; line: 1, column: 2]
    at org.springframework.data.repository.init.ResourceReaderRepositoryPopulator.readObjectFrom(ResourceReaderRepositoryPopulator.java:145)
    at org.springframework.data.repository.init.ResourceReaderRepositoryPopulator.populate(ResourceReaderRepositoryPopulator.java:115)
    at org.springframework.data.repository.init.AbstractRepositoryPopulatorFactoryBean.onApplicationEvent(AbstractRepositoryPopulatorFactoryBean.java:93)
    at org.springframework.data.repository.init.AbstractRepositoryPopulatorFactoryBean.onApplicationEvent(AbstractRepositoryPopulatorFactoryBean.java:34)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:324)
    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:934)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.codehaus.jackson.JsonParseException: Unexpected character ('c' (code 99)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: java.io.ByteArrayInputStream@61adabf3; line: 1, column: 2]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:306)
    at org.codehaus.jackson.impl.Utf8StreamParser._handleUnexpectedValue(Utf8StreamParser.java:2084)
    at org.codehaus.jackson.impl.Utf8StreamParser._nextTokenNotInObject(Utf8StreamParser.java:600)
    at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:486)
    at org.codehaus.jackson.map.ObjectReader._initForReading(ObjectReader.java:638)
    at org.codehaus.jackson.map.ObjectReader._bindAsTree(ObjectReader.java:597)
    at org.codehaus.jackson.map.ObjectReader._bindAndCloseAsTree(ObjectReader.java:621)
    at org.codehaus.jackson.map.ObjectReader.readTree(ObjectReader.java:381)
    at org.springframework.data.repository.init.JacksonResourceReader.readFrom(JacksonResourceReader.java:80)
    at org.springframework.data.repository.init.ResourceReaderRepositoryPopulator.readObjectFrom(ResourceReaderRepositoryPopulator.java:143)
    ... 36 more 
```

所以我做了更多的调试，结果发现配置正在存储库填充器定义中寻找“位置”属性——而 xml 需要“位置”属性。我正在使用弹簧数据 1.4.0.RELEASE 和杰克逊 1.9.2。我混淆了依赖关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:19:12.737

这是当前版本的 Spring Data Commons 中的一个错误（有关详细信息，请参阅[DATACMNS-227](https://jira.springsource.org/browse/DATACMNS-227)）。它[最近](https://github.com/SpringSource/spring-data-commons/commit/8a01a55046faa8392366054e7304dcb94cf46e18)已修复，但由于修复需要更改命名空间，它只会使其成为 Spring Data Commons 1.5 即将到来的里程碑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:53:38.093

我认为您不能`_`直接用作 JSON 密钥 ( `_class`)。

检查[非标准 JSON 的扩展列表](http://wiki.fasterxml.com/JacksonFeaturesNonStandard)

# excel - 没有 VBA 的 Excel 2010 图形颜色格式 - 连接到多维数据集（SSAS）

> ID：13565469
> 
> 赞同：1
> 
> 时间：2012-11-26T13:05:37.257
> 
> 标签：excel, excel-2010, olap-cube, vba

我们有特殊的问题。我们正在连接到一个多维数据集 (MS SSAS) 以获取显示一组图表（条形图、折线图）的仪表板的数据。我们需要根据从立方体获得的数据来描绘不同的颜色（我们正在使用切片器，因为仪表板需要根据选择的参数进行动态处理）。我们已经使用 VBA 来描述图形中的颜色变化，但是在 Excel Services 中使用时 VBA 不起作用。我们正在使用 Excel 2010，我们观察到在 Excel 2010 中，条件格式图标在连接到多维数据集时被禁用。如果您能为我们提供相同的指示，我们将不胜感激。

我们的问题陈述是在 Excel 2010 中更改颜色，而不使用 VBA 用于从多维数据集获取数据的图形集（条形和线形）。当我们感到震惊时，这方面的指针真的会有所帮助。

# android - 子类数组和 onClick()

> ID：13565472
> 
> 赞同：1
> 
> 时间：2012-11-26T13:05:57.307
> 
> 标签：android

我想通过代码创建一个作为 Button 子类的对象数组。

```
public class MyButton extends Button {
    private Context ctx;
    private int status;
    public MyButton(Context context) {
        super(context);
        ctx = context;
        status = 0;
    }

    private click() {
        status = 1;
        // OTHER CODE THAT NEEDS TO STAY HERE
    }
} 
```

在主要活动中，我这样做：

```
public class myActivity extends Activity {
    private MyButton[] myButtons = new MyButton[100];

    @Override
    public onCreate(Bundle si) {
         super.onCreate(si);
         createButtons();
    }

    private void createButtons() {
         for (int w=0; w<100; w++) {
             myButtons[w] = new MyButton(myActivity.this);
             myButtons[w].setOnClickListener(new View.onClickListener() {
                  public void onClick(View v) {
                  // ... (A)
                  }
             });
         }
    }
} 
```

现在我希望每次单击按钮时都运行 MyButton 中的 click() 方法。似乎很明显，但它不在我的眼中。

如果我公开 click() 方法并直接从 (A) 运行它，我会收到错误，因为 myButtons[w].click() 不是静态的，不能从那里运行。

同时，我无法理解将代码放在 MyButton 类中的何处以拦截单击并从那里运行 click() 。我应该覆盖 onClick 吗？或者我应该覆盖 onClickListener？或者我还应该做什么？

每当单击 myButtons[] 对象之一时，如何运行 click() ？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:14:28.160

您可以将`View v`您的听众投入`MyButton`并调用`click`它：

```
private void createButtons() {
    View.OnClickListener listener = new View.onClickListener() {
        public void onClick(View v) {
            ((MyButton) v).click();
        }
     };
     for (int w=0; w<100; w++) {
         myButtons[w] = new MyButton(myActivity.this);
         myButtons[w].setOnClickListener(listener);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:16:56.710

你可以加：

```
View.onClickListener onclick = new View.onClickListener() {
                  public void onClick(View v) {
                     ((MyButton)v).click();
                     //since v should be instance of MyButton
                  }
             }; 
```

到您的活动，然后使用：

```
myButtons[w].setOnClickListener(onclick); 
//one instance of onclick is enough, there is no need to create it for every button 
```

在 createButtons()

但是...为什么，哦，为什么我们在android中有ListView的按钮数组...

# android - Android：NAT 表：“FIX ME！impliment getnetbyaddr() bionic/libc/bionic/stubs.c:444” 这是什么意思以及如何修复它

> ID：13565475
> 
> 赞同：2
> 
> 时间：2012-11-26T13:06:11.813
> 
> 标签：android, iptables, nat

背景：

我正在尝试在 Android 手机上设置 VPN 服务器。为此，我正在尝试使用 android 示例应用程序 ToyVpn。

要设置服务器，我必须在 nat 表中添加以下规则

```
#Pick a range of private addresses and perform NAT over eth0.
iptables -t nat -A POSTROUTING -s 10.0.0.0/8 -o eth0 -j MASQUERADE 
```

但我收到以下错误：

```
 iptables v1.4.14: can't initialize iptables table -nat: Table does not exist (do you need to insmod?)
 Perhaps iptables or your kernel needs to be upgraded. 
```

我没有任何使用 iptables 的先验知识。但是，我搜索了它，并将“-A”替换为“-I”，即现在我在表中插入规则，而不是在表中附加规则，因为我的表是空的。

问题：

问题是，现在在 nat 表中有以下消息：

```
FIX ME! impliment getnetbyaddr() bionic/libc/bionic/stubs.c:444 
```

在我插入的规则之上。该规则显示为：

```
MASQUERADE all -- 10.0.0.0/8 anywhere 
```

谁能指导我我做错了什么以及如何解决它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:18:25.643

我认为您没有做错任何事情 - 该消息似乎表明关键的 libc 函数未在仿生（Android 使用的 C 库）中实现。

我不认为你真的可以做任何事情，除了在仿生中实现该功能，然后可能从源代码编译大部分 Android 系统。

# ios - UIPanGestureRecognizer 将事件向下传递到下方的按钮

> ID：13565476
> 
> 赞同：0
> 
> 时间：2012-11-26T13:06:14.530
> 
> 标签：ios, cocoa-touch

我有一个带有 UIImageView 的侧面板，我在其上附加了一个 UIPanGestureRecognizer 以便您可以推/拉侧边栏。它运作良好。

问题是我有一些按钮碰巧有时会出现在该侧边栏下方。如果我拉它并且下面有一个按钮，则该按钮将与 Pan 同时触发。

我不确定问题是什么，所以我觉得很难解决。为什么我的 UIImageView 会在链上传递 UIPanGestureRecognizer 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:43:14.870

问题通过委托解决。如果所有按钮的名为 isPanning 的 BOOL 设置为 YES，我将禁用 toucheBegan 上的事件。该协议只定义了一个函数：

```
-(void)setPanning:(BOOL)isPanning; 
```

在touchBegan中，我检查该值是否为YES，如果是，则不触发该事件。我希望它会更简单。

# c# - 本地代理服务器中的套接字处理

> ID：13565481
> 
> 赞同：0
> 
> 时间：2012-11-26T13:06:37.103
> 
> 标签：c#, http, sockets, proxy

他在编写本地代理服务器时，需要一个与浏览器（BS）通信的套接字和一个与 Web 服务器（WS）通信的套接字。我已经尝试实现代理。它可以工作，但是速度太慢了。我想，这样做的原因是，我为来自浏览器的每个请求创建了一个新的 WS。因此，每个请求都会创建一个到 WebServer 的新连接。我想我应该为每个请求代理使用一个 WS 和一个 Connection 必须转发到同一个 IP。这是正确的吗？

# yii - Yii min 日期验证规则

> ID：13565483
> 
> 赞同：0
> 
> 时间：2012-11-26T13:06:47.727
> 
> 标签：yii

如何在模型中添加最小日期验证规则？

例子：

我有一列 dt_ini 作为 DATE，我需要在创建时将输入限制为 D+7。

如果今天是：2012 年 10 月 1 日

创建时的最短有效日期为：2012 年 10 月 8 日。

否则，我会抛出一个验证错误：您的日期必须至少在 7 天后。

我期望的代码是这样的：（这未经测试，可能不起作用）

```
 public function rules(){
      return array('dt_ini', 'date', 'minDate' => '+7'),
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:48:11.310

创建自定义有效规则如下：

```
class YourModel extends CActiveModel
{
    // some....

    public function rules(){
      return array('dt_ini', 'dateValid', 'minDate' => '+7 day', 'on' => 'create');
    }

    public function dateValid($attribute, $params)
    {
        $valid=null;
        $today = date('Y-m-d', time());
        if(isset($params['minDate']))
            $valid = date('Y-m-d', strtotime($params['minDate'])); //+7 day

        if( !is_null($valid) )
        {  //for increamental date
            if($this->dt_ini >  $valid || $this->dt_ini < $today )
                $this->addError($attribute, 'enter error message');     
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:29:36.010

这是[你](http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules)要找的吗？

# c# - 如何使用触发器将事件参数传递给命令？

> ID：13565484
> 
> 赞同：17
> 
> 时间：2012-11-26T13:06:48.733
> 
> 标签：c#, events, mvvm, silverlight-4.0, icommand

所以我有一个简单的设置，一个带有我想绑定到命令的填充事件的自动完成框。我用

```
clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity 
```

（有没有更好的命名空间来做这件事？）

绑定它并不是什么大问题，重要的是将该 PopulatingEventArgs 参数传递给绑定命令。

那么我该如何根据 PRISM 的最佳实践和一般的 MVVM 来做到这一点呢？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-08-16T21:26:06.513

我尝试了 InteractiveCommand，但它给我带来了问题。相反，我设置了对 Microsoft.Expression.Interactions 的引用并包含

```
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 

<i:Interaction.Triggers>
    <i:EventTrigger EventName="AppointmentEditing">
        <ei:CallMethodAction MethodName="AppointmentEditing" TargetObject="{Binding}" />
    </i:EventTrigger>
    <i:EventTrigger EventName="ShowDialog">
        <ei:CallMethodAction MethodName="ShowDialog" TargetObject="{Binding}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

...在我的用户控件中。

然后将事件处理程序放入我的 ViewModel 并将范围设置为公共：

```
public void ShowDialog(object sender, ShowDialogEventArgs e) {

}

public void AppointmentEditing(object sender, AppointmentEditingEventArgs e) {

} 
```

到目前为止工作良好。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-26T13:38:55.163

没有内置的方法，所以我是这样做的：

经典的交互触发器是这样使用的：

```
<Button Content="I am a button">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseEnter">
            <i:InvokeCommandAction Command="{Binding CommandWithNoArgs}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

我们无法通过绑定访问事件`EventArgs`的`MouseEnter`，因此我们将不得不修改将其丢弃的部分。
碰巧，那块是`InvokeCommandAction`.

“所以我们只是将它子类化并覆盖一个一直在等待我们的便捷方法”是我想写的。但是班级是封闭的。

所以我们将不得不继承它的父（抽象）类：`TriggerAction<DependencyObject>`

最基本的实现是：

```
public class InteractiveCommand : TriggerAction<DependencyObject>
{
    protected override void Invoke(object parameter)
    {
    }
} 
```

那`parameter`是你的`EventArgs`！
但是等等，事情没那么简单，我们必须重现一个常规的行为`InvokeCommandAction`。
通过Reflector，我反编译了（不过你可以去看看官方源码，我只是懒）。

我们不会关心`CommandParameter`依赖属性，我们会假设如果你使用 this 而不是`InvokeCommandAction`，你实际上`EventArgs`每次都想要。

这是完整的课程（仅限 WPF，请参阅 SilverLight 的编辑）：

```
public class InteractiveCommand : TriggerAction<DependencyObject>
{
    protected override void Invoke(object parameter)
    {
        if (base.AssociatedObject != null)
        {
            ICommand command = this.ResolveCommand();
            if ((command != null) && command.CanExecute(parameter))
            {
                command.Execute(parameter);
            }
        }
    }

    private ICommand ResolveCommand()
    {
        ICommand command = null;
        if (this.Command != null)
        {
            return this.Command;
        }
        if (base.AssociatedObject != null)
        {
            foreach (PropertyInfo info in base.AssociatedObject.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance))
            {
                if (typeof(ICommand).IsAssignableFrom(info.PropertyType) && string.Equals(info.Name, this.CommandName, StringComparison.Ordinal))
                {
                    command = (ICommand)info.GetValue(base.AssociatedObject, null);
                }
            }
        }
        return command;
    }

    private string commandName;
    public string CommandName
    {
        get
        {
            base.ReadPreamble();
            return this.commandName;
        }
        set
        {
            if (this.CommandName != value)
            {
                base.WritePreamble();
                this.commandName = value;
                base.WritePostscript();
            }
        }
    }

    #region Command
    public ICommand Command
    {
        get { return (ICommand)GetValue(CommandProperty); }
        set { SetValue(CommandProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Command.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty CommandProperty =
        DependencyProperty.Register("Command", typeof(ICommand), typeof(InteractiveCommand), new UIPropertyMetadata(null));
    #endregion
} 
```

与您从互联网上获取的任何代码一样，**我强烈建议您通读整个课程，并尝试了解它的作用**。不要只是把它扔到你的应用程序中。

现在我们可以这样做：

```
<Button Content="I am a button">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseEnter">
            <local:InteractiveCommand Command="{Binding CommandWithEventArgs}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Button> 
```

以及背后的代码：

```
#region CommandWithEventArgs
DelegateCommand<MouseEventArgs> _CommandWithEventArgs;
/// <summary>
/// Exposes <see cref="CommandWithEventArgs(MouseEventArgs)"/>.
/// </summary>
public DelegateCommand<MouseEventArgs> CommandWithEventArgs
{
    get { return _CommandWithEventArgs ?? (_CommandWithEventArgs = new DelegateCommand<MouseEventArgs>(CommandWithEventArgs)); }
}
#endregion
public void CommandWithEventArgs(MouseEventArgs param)
{
} 
```

这是一个包装;）

**编辑：**对于 SilverLight，请改用此代码：

```
 public class InteractiveCommand : TriggerAction<DependencyObject>
    {
        protected override void Invoke(object parameter)
        {
            if (base.AssociatedObject != null)
            {
                ICommand command = Command;
                if ((command != null) && command.CanExecute(parameter))
                {
                    command.Execute(parameter);
                }
            }
        }

        #region Command
        public ICommand Command
        {
            get { return (ICommand)GetValue(CommandProperty); }
            set { SetValue(CommandProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Command.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty CommandProperty =
            DependencyProperty.Register("Command", typeof(ICommand), typeof(InteractiveCommand), new UIPropertyMetadata(null));
        #endregion
    } 
```

但请注意，它不如使用完整的 WPF 版本安全（不检查类型，可能会因冻结元素而崩溃）。

# silverlight - 如何将 SortDescriptor 添加到 GridViewDataColumn 的父 RadGridView

> ID：13565489
> 
> 赞同：0
> 
> 时间：2012-11-26T13:07:11.160
> 
> 标签：silverlight, sorting, inheritance, telerik, radgridview

我正在扩展 GridViewDataColumn，我想为它实现一些自定义排序。所以我需要将 SortDescriptor 添加到我的 GridViewDataColumn 的父 RadGridView 中。没有太多的文档，也没有可用的资源。如何获取列的父 GridView 以便向其添加 SortDescriptors？

我正在为 Silverlight 使用 RadControls。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:17:46.510

那么，您有一个 GridViewDataColumn 的实例，并且想要获取父 RadGridView？以下不起作用吗？

```
public RadGridView GetGridView() 
{
    return this.DataControl as RadGridView;
} 
```

# android - XML 文件中的 Android 背景图像

> ID：13565496
> 
> 赞同：10
> 
> 时间：2012-11-26T13:07:32.797
> 
> 标签：android, xml, background

我目前有一个应用程序，每张幻灯片都有默认的黑色背景。我想做的是更改 XML 文件以具有背景图像。我假设对此有一个简单的命令，但无法准确找到我要查找的内容。

我想要一个图像作为我当前屏幕的背景。我不希望背景改变，我想把它放在我的 XML 文件中。这是我的 XML 标头之一的示例...

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
   android:weightSum="9"
   android:gravity="center"
    >

... 
```

我假设有一些简单的命令，例如

```
android:background="file" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T13:10:36.720

只需使用`android:background="@drawable/file_name_without_extension"`

如果您的文件在 SD 卡上，则不能将其放在 xml 布局中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T13:15:47.883

**android:background = "@drawable/imagename"**

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:background = "@drawable/imagename"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
   android:weightSum="9"
   android:gravity="center"
    >

... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T13:13:27.787

你可以试试`android:background = "@drawable/imagename"`

我希望你的`drawable`文件夹中有一张图片

# tsql - 将 XML 数据反序列化为表

> ID：13565499
> 
> 赞同：2
> 
> 时间：2012-11-26T13:07:44.450
> 
> 标签：tsql

> **可能重复：**
> [反序列化 T-SQL 中的 XML 数据对象](https://stackoverflow.com/questions/13563091/deserialize-xml-data-object-in-t-sql)

我有这个 XML 对象：

```
<params>
    <item>
        <idtype>1</idtype>
        <name>dsf2</name>
        <value>2012-10-05 23:59:59</value>      
    </item>

    <item>
        <idtype>2</idtype>
        <name>msm1</name>
        <value>999</value>      
    </item>
</params> 
```

如何将值数据保存到这样的表中：
![在此处输入图像描述](../Images/973bf5591ee86e30b7e43987c06b097a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:24:04.983

```
DECLARE @XML XML = '<params>
    <item>
        <idtype>1</idtype>
        <name>dsf2</name>
        <value>2012-10-05 23:59:59</value>      
    </item>

    <item>
        <idtype>2</idtype>
        <name>msm1</name>
        <value>999</value>      
    </item>
</params>'

INSERT INTO [TableName] ([idtype], [name], [value])
SELECT    
    [idtype] = TypeNode.value('(idtype)[1]', 'int'),
    [name] = TypeNode.value('(name)[1]', 'nvarchar(50)'),
    [value] = TypeNode.value('(value)[1]', 'nvarchar(50)')
FROM
    @XML.nodes('/params/item') AS XTbl(TypeNode) 
```

顺便说一句：我假设您的表是按以下方式定义的：

```
CREATE TABLE [TableName](
    [idtype] [int] NULL,
    [name] [nvarchar](50) NULL,
    [value] [nvarchar](50) NULL
) 
```

# jsp - 瓷砖和 ${pageContext.request.requestURL}

> ID：13565507
> 
> 赞同：6
> 
> 时间：2012-11-26T13:08:13.737
> 
> 标签：jsp, el, tiles

通常，要在 JSP 中获取请求 URL，我会使用

```
${pageContext.request.requestURL} 
```

但是在我正在使用的项目中（因为我猜我们使用瓷砖）如果我运行上面的内容，我会得到类似的东西

```
WEB-INF/pathTo/pageName.jsp 
```

即使请求 URL 是另一个 URL，并且这只是使用图块包含的 JSP 的路径。

在这种情况下，如何使用 JSP EL 获取请求 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:10:07.697

Tiles 已经重写/转发了请求，所以当你的 jsp 收到请求时，它不是原始请求。

你可以做两件事..

1.  在您的控制器中获取原始网址并将其作为属性放置`request.setAttribute("origRequestURL", request.getRequestURL())`，然后使用`${origRequestURL}`

2.  看看这个属性是否在转发之前保持原来的： `<% request.getAttribute("javax.servlet.forward.request_uri"); %>`或`${requestScope['javax.servlet.forward.request_uri']}`

# css - 为什么我的 div 不能并排浮动？

> ID：13565508
> 
> 赞同：0
> 
> 时间：2012-11-26T13:08:22.323
> 
> 标签：css, html, css-float, nested

我有两个 div 嵌套在另一个 div 中，无论我尝试了什么，我都无法让第二个嵌套 div（bookmarklet-wrapper）漂浮在第一个（form-wrapper）旁边？我想也许这与宽度有关，但这没有帮助，也尝试使用“clearfix”，但这仍然没有帮助。

我的HTML如下：

```
<div id="prof-wrapper">    

    <div id="editprofile-form-wrapper">

    <div id="title">
        <h1>Edit Profile</h1>
        <p>This information appears on your personal user page</p>

    </div><!--End of title-->

   <div class="form-horizontal">

            <?php if(isset($image)){echo $image;}?>
        <div id="thumbs" style="width:300px"></div>

            <form id="cropimage" method="post" enctype="multipart/form-data">

               <fieldset class="control-group">
                    <label class="control-label" for="firstname">Firstname</label>
                    <div class="controls">
                            <input id="firstname" type="text" name="fname">
                    </div>
               </fieldset>

               <fieldset class="control-group">
                    <label class="control-label" for="lastname">Surname</label>
                    <div class="controls">
                            <input id="lastname" type="text" name="secound">
                    </div>
               </fieldset>

               <fieldset class="control-group">
                    <label class="control-label" for="email">Email</label>
                    <div class="controls">
                            <input id="email" type="text" name="email">
                    </div>
               </fieldset>

               <fieldset class="control-group">
                    <label class="control-label" for="user_location">Location</label>
                    <div class="controls">
                            <input id="user_location" type="text" value="" name="user[location]">
                            <p>Where art thou?</p>
                    </div>
               </fieldset>

               <fieldset class="control-group">
                    <label class="control-label" for="bio">Bio</label>
                    <div id="user_description_box" class="controls">
                            <textarea id="bio" class="input-xlarge" name="bio" style="width: 243px; height: 122px;"></textarea>
                            <p class="bio-label">About yourself in<strong>160</strong>characters or less.</p>
                    </div>
            </fieldset>

            <div class="form-actions">
                <button id="submitButton" class="btn primary-btn" type="submit" name="submit">Save changes</button>
            </div>

        </form>     

        <form id="cropimage" method="post" enctype="multipart/form-data">

            <fieldset class="control-group">
                    <label class="control-label" for="photoimg">Profile photo upload</label>
                    <div id="user_description_box" class="controls">
                        <input id="photoimg" type="file" value="" name="photoimg">
                        <input type="hidden" name="image_name" id="image_name" value="<?php echo($actual_image_name)?>" />
                        <!--<p class="bio-label">About yourself in <strong>160</strong> characters or less.</p>-->
                    </div>
           </fieldset>

            <div class="form-actions">
                <input type="submit" class="btn primary-btn" id="photoSubmit" name="submit" value="Photo Submit" />
            </div>    

           </form>

        </div><!--End of horizontal form-->

        </div><!--End of form wrapper-->

        <div class="clearfix"></div>

        <!-----------------------------------------Start of bookmarklet-------------------------------------------------->

        <div id="bookmarklet-wrapper">

        <h1 id="welcometext">Welcome to <img src="images/logo_text.png" alt="NetSushi Logo" title="Net Sushi" id="instrustionlogo" width="100px"/></h1>

      <h2 id="bminstructions">The Bookmarklet below should be dragged to your bookmarks bar so that you can share content with your friends on <!--<img src="images/logo_text.png" alt="NetSushi Logo" title="Net Sushi" id="instrustionlogo" width="100px"/>
      <a style="text-decoration:none;
        background:#25A6E1;
        background:-moz-linear-gradient(top,#25A6E1 0%,#188BC0 100%);
        background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#25A6E1),color-stop(100%,#188BC0));
        background:-webkit-linear-gradient(top,#25A6E1 0%,#188BC0 100%);
        background:-o-linear-gradient(top,#25A6E1 0%,#188BC0 100%);
        background:-ms-linear-gradient(top,#25A6E1 0%,#188BC0 100%);
        background:linear-gradient(top,#25A6E1 0%,#188BC0 100%);
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#25A6E1',endColorstr='#188BC0',GradientType=0);
        padding:8px 13px;
        color:#fff;
        font-family:'Helvetica Neue',sans-serif;
        font-size:17px;
        border-radius:4px;
        -moz-border-radius:4px;
        -webkit-border-radius:4px;
        border:1px solid #1A87B9;
        position: relative;
        top: 20px;"
        href="javascript:
        (function () {
            function loadjscssfile(filename, filetype){
                if (filetype=='js'){
                    var fileref=document.createElement('script');
                    fileref.setAttribute('type','text/javascript');
                    fileref.setAttribute('id','jsDoc');
                    fileref.setAttribute('src', filename);
                }else if (filetype=='css'){
                    var fileref=document.createElement('link');
                    fileref.setAttribute('rel', 'stylesheet');
                    fileref.setAttribute('id', 'cssDoc');
                    fileref.setAttribute('type', 'text/css');
                    fileref.setAttribute('href', filename);
                }
                if (typeof fileref!='undefined')
                    document.getElementsByTagName('head')[0].appendChild(fileref);
                }
                var cssDoc = document.getElementById('cssDoc');
                if (cssDoc == null){
                    loadjscssfile('http://www.netsushi.net/css/css/bookmarklet.css', 'css');
                }
                var jsDoc = document.getElementById('jsDoc');
                if (jsDoc == null){
                    loadjscssfile('http://www.netsushi.net/js/bookmarklet.js', 'js');
                }else{
                    if ($('#feeder_bm_main').is(':visible')){
                        $('#feeder_bm_main').hide();
                    }else{
                        $('#feeder_bm_main').show();
                    }
                }
            void(0)
        }())
    ;"-->
    >NetSushi</a>

  </div><!--End of bookmarklet wrapper-->

        </div><!--end of edit-page-content-->​ 
```

我仍然不确定如何正确格式化我的 CSS 以发布它，但如果你有时间帮助我，你可以确切地看到这个小提琴中发生了什么？

[http://jsfiddle.net/DannyW86/3gMuP/](http://jsfiddle.net/DannyW86/3gMuP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:15:10.530

如果您只是添加`float: left`到您的`form-wrapper`，它应该可以工作：http: [//jsfiddle.net/3gMuP/1/](http://jsfiddle.net/3gMuP/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:21:28.503

您也可以使用 display:inline-block; 在您希望彼此相邻的 2 个 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:23:44.547

这对我有用：

```
#editprofile-form-wrapper {
  width: 50%;
  float: left;
} 
```

我没有任何其他 CSS 什么的……现在 2 列彼此相邻。

# jms - WSO2 JMS 带回复的单向请求

> ID：13565512
> 
> 赞同：0
> 
> 时间：2012-11-26T13:08:39.110
> 
> 标签：jms, wso2, wso2esb

我想在不同的实例中设置一个 JMS 发送器和一个 JMS 接收器。我正在尝试设置replyTo 队列，但是一旦设置了OUT_ONLY=true，JMS 消息中就不会设置replyTo 标头。

有什么方法可以按序列配置replyTo队列，而无需等待回复？

提前致谢。拉蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:37:58.917

万一有人仍然感兴趣（并且由于 wso2 人似乎永远不会在这里提供任何支持），我最终设法在一个古老的模糊 jira 缺陷中偶然发现了一个答案（我提出了一个类似的问题），它恰好是提及。

序列应该在发送中介之前设置几个属性。

```
<property action="set" name="OUT_ONLY" scope="default"
   type="STRING" value="true"/>
<property action="set" name="JMSReplyTo"
   scope="transport" type="STRING" value="yourqueuename"/> 
```

yourqueuename 将通过突触以 queue:// 作为前缀，所以不要担心任何这些，只是名称很好（如果它不存在，jms 会为你创建它）。另请注意，该属性的范围是“运输”。

希望这对其他人有用，确实花了我一天中最好的时间才偶然发现答案。

谢谢保罗

# java - 使用 BouncyCastle 对文件进行 Java 签名 - 使用密钥环创建文件的签名

> ID：13565515
> 
> 赞同：0
> 
> 时间：2012-11-26T13:08:41.787
> 
> 标签：java, bouncycastle, pgp

我正在尝试编写一个使用私钥对文件进行签名的 Java 程序。该程序采用 3 个参数 - 文件、密钥环和密码。输出应该在一个分离的文件 *.bpg 中。问题是当我尝试编译代码时出现以下错误：

```
C:\CNS3\BCastle>javac Sign.java
Note: Sign.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details. 
```

我的代码如下：

```
import java.io.*;
import java.security.*;
import java.util.Iterator;

import org.bouncycastle.bcpg.*;
import org.bouncycastle.jce.provider.BouncyCastleProvider;
import org.bouncycastle.openpgp.*;

public class Sign {
  public static void main(String[] args) throws Exception {
    Security.addProvider(new BouncyCastleProvider());
    FileInputStream keyIn = new FileInputStream(args[1]);
    FileOutputStream out = new FileOutputStream(args[0] + ".bpg");
    InputStream in = PGPUtil.getDecoderStream(keyIn);
    PGPSecretKeyRingCollection pgpSec = 
                               new PGPSecretKeyRingCollection(in);
    PGPSecretKey key = null;
    Iterator rIt = pgpSec.getKeyRings();
    while (key == null && rIt.hasNext()) {
      PGPSecretKeyRing kRing = (PGPSecretKeyRing)rIt.next();
      Iterator kIt = kRing.getSecretKeys();
      while ( key == null && kIt.hasNext() ) {
        PGPSecretKey k = (PGPSecretKey)kIt.next();
        if ( k.isSigningKey() ) { key = k; }
      }
    }
    if (key == null) {
      throw new IllegalArgumentException("Can't find key");
    }
    PGPPrivateKey pgpPrivKey = 
         key.extractPrivateKey(args[2].toCharArray(), "BC");
    PGPSignatureGenerator sGen = new PGPSignatureGenerator(
         key.getPublicKey().getAlgorithm(), PGPUtil.SHA1, "BC");
    sGen.initSign(PGPSignature.BINARY_DOCUMENT, pgpPrivKey);
    PGPCompressedDataGenerator cGen = new PGPCompressedDataGenerator(
         PGPCompressedDataGenerator.ZLIB);
    BCPGOutputStream bOut = new BCPGOutputStream(cGen.open(out));
    FileInputStream fIn = new FileInputStream(args[0]);
    int ch = 0;
    while ( (ch = fIn.read()) >= 0 ) { sGen.update((byte)ch); }
    sGen.generate().encode(bOut);
    cGen.close();
    out.close();
  }
} 
```

错误来自以下几行：

```
 PGPPrivateKey pgpPrivKey = 
         key.extractPrivateKey(args[2].toCharArray(), "BC");
    PGPSignatureGenerator sGen = new PGPSignatureGenerator(
         key.getPublicKey().getAlgorithm(), PGPUtil.SHA1, "BC");
    sGen.initSign(PGPSignature.BINARY_DOCUMENT, pgpPrivKey); 
```

有人对我如何解决这个问题有任何建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:13:22.343

首先，提到的消息不是错误。它们是警告。您的程序将运行良好，但您使用的方法或类被标记为已弃用。这意味着您仍然可以使用它们，但不建议这样做，因为在未来版本的充气城堡中，这些方法或类可能会被删除。

转到这些类的最新 API 文档。应该有使用什么来代替不推荐使用的方法/类的信息。

# php - 输入有关此 PHP 脚本以查询 mysql 数据库的输入？

> ID：13565517
> 
> 赞同：2
> 
> 时间：2012-11-26T13:08:49.947
> 
> 标签：php, mysql, mysqli

我正在使用这个脚本，一切都很好，除了当执行实际搜索并且“没有结果”是答案时，我希望脚本显示这样的事实。

在进行研究以查看失败的位置时，我发现我应该使用 MySQLi。我已经在这个脚本上呆了 2 天，而且我似乎越来越远而不是越来越近。小伙子们有一点帮助吗？

我正在使用什么：

```
 if(empty($_GET['query'])){
header ("Location: /same_page");
}
else{
//connect
include 'connection_script.php';

//Get the "Term" from the search box
$query=mysql_real_escape_string($_GET['query']);

$page_str = "SELECT * FROM $tblname WHERE name like '%$query%' or clan like '%$query%'";

$page_query = mysqli_query($con,$page_str)or die(mysql_error($con));

while($page_result = mysqli_fetch_assoc($page_query)){$datarow .= " <ul>
<li>Banned player : <a target='_blank' href=\"http://path/tosomething/here=" . $page_result[name] . " \">" . $page_result[name] . "</a></li>
<li>Clan Name : " . $page_result[clan] . "</li> 
<li>Reason : " . $page_result[reason] . "</li>
<li>Posted By : " . $page_result[moderator] . "</li>
<li>Date & Time : " . $page_result[dateandtime] . "</li>
<li>Evidence : <a target='_blank' href=\"$page_result[evidence]\">Here</a></li>
</ul><br />";
}

echo $datarow;
echo "<br />";

include 'dbclose.php';
}

mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:12:23.140

您可以使用以下方法检索行数：

```
mysqli_num_rows($page_query); 
```

只需验证是`>0`选择要显示的内容、错误消息还是结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:17:21.733

如果您的查询返回 0，只需添加一个条件以显示某些内容

```
 if(empty($_GET['query'])){
header ("Location: /same_page");
}
else{
//connect
include 'connection_script.php';

//Get the "Term" from the search box
$query=mysql_real_escape_string($_GET['query']);

$page_str = "SELECT * FROM $tblname WHERE name like '%$query%' or clan like '%$query%'";

$page_query = mysqli_query($con,$page_str)or die(mysql_error($con));

if (mysqli_num_rows($page_query) > 0){

while($page_result = mysqli_fetch_assoc($page_query)){$datarow .= " <ul>
<li>Banned player : <a target='_blank' href=\"http://path/tosomething/here=" . $page_result[name] . " \">" . $page_result[name] . "</a></li>
<li>Clan Name : " . $page_result[clan] . "</li> 
<li>Reason : " . $page_result[reason] . "</li>
<li>Posted By : " . $page_result[moderator] . "</li>
<li>Date & Time : " . $page_result[dateandtime] . "</li>
<li>Evidence : <a target='_blank' href=\"$page_result[evidence]\">Here</a></li>
</ul><br />";
}

echo $datarow;
echo "<br />";
} else {
echo 'Your search returned 0 results';
}

include 'dbclose.php';
}

mysql_close($con); 
```

# extjs - Sencha Touch 2.1 自动进入下一个字段

> ID：13565519
> 
> 赞同：3
> 
> 时间：2012-11-26T13:09:04.860
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我正在尝试开发一个密码面板。当面板被激活时，我希望第一个字段被聚焦/激活，当输入一个数字时，进入下一个字段，然后提交最后一个。这应该感觉类似于 iPhone/Android 锁屏。

我已经尝试了几个小时，但无法解决。看起来很简单！非常感谢您的帮助。

```
Ext.define('MyApp.view.PinPanel', {
    extend: 'Ext.form.Panel',
    alias: 'widget.pinpanel',

    config: {
        centered: true,
        height: '100px',
        width: '300px',
        hideOnMaskTap: true,
        layout: {
            type: 'hbox'
        },
        modal: true,
        items: [
            {
                xtype: 'numberfield',
                margin: '0 10 0 0',
                width: 50,
                clearIcon: false,
                name: 'pin0',
                tabIndex: 1
            },
            {
                xtype: 'numberfield',
                margin: '0 10 0 0',
                width: 50,
                clearIcon: false,
                name: 'pin1',
                tabIndex: 2
            },
            {
                xtype: 'numberfield',
                margin: '0 10 0 0',
                width: 50,
                clearIcon: false,
                name: 'pin2',
                tabIndex: 3
            },
            {
                xtype: 'numberfield',
                width: 50,
                clearIcon: false,
                name: 'pin3',
                tabIndex: 4
            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:48:41.520

给你：[http ://www.senchafiddle.com/#Oec2J](http://www.senchafiddle.com/#Oec2J)

问题是在每个数字字段上添加一个`keyup`侦听器，并将焦点设置在下一个使用`tabIndex`.

# jquery - Jacskon 解析器：无法识别的令牌“tieheT”：期待“null”、“true”或“false”

> ID：13565522
> 
> 赞同：12
> 
> 时间：2012-11-26T13:09:10.977
> 
> 标签：jquery, jackson

我在通过杰克逊解析器、ajax 和 jquery 将对象数组传递给控制器​​时遇到问题。

我的控制器如下所示：

```
@RequestMapping(value="/saveTimeBooking")
public @ResponseBody ReturnTO saveTimeBooking(@RequestBody TimesheetTO timesheetTO[]) {
    // ...
} 
```

我的 Java 对象 TimesheetTO 如下所示：

```
public class TimesheetTO implements Serializable {
    private static final long serialVersionUID = 1L;

    private int activityMasterId;
    private String name;

    private BigDecimal mondayEffort=new BigDecimal(0);
    private BigDecimal tuesdayEffort=new BigDecimal(0);
    private BigDecimal wednesdayEffort=new BigDecimal(0);
    private BigDecimal thursdayEffort=new BigDecimal(0);
    private BigDecimal fridayEffort=new BigDecimal(0);
    private BigDecimal saturdayEffort=new BigDecimal(0);
    private BigDecimal sundayEffort=new BigDecimal(0);
    public int getActivityMasterId() {
        return activityMasterId;
    }
    public String getName() {
        return name;
    }
    public BigDecimal getMondayEffort() {
        return mondayEffort;
    }
    public BigDecimal getTuesdayEffort() {
        return tuesdayEffort;
    }
    public BigDecimal getWednesdayEffort() {
        return wednesdayEffort;
    }
    public BigDecimal getThursdayEffort() {
        return thursdayEffort;
    }
    public BigDecimal getFridayEffort() {
        return fridayEffort;
    }
    public BigDecimal getSaturdayEffort() {
        return saturdayEffort;
    }
    public BigDecimal getSundayEffort() {
        return sundayEffort;
    }
    public void setActivityMasterId(int activityMasterId) {
        this.activityMasterId = activityMasterId;
    }
    public void setName(String name) {
        this.name = name;
    }
    public void setMondayEffort(BigDecimal mondayEffort) {
        this.mondayEffort = mondayEffort;
    }
    public void setTuesdayEffort(BigDecimal tuesdayEffort) {
        this.tuesdayEffort = tuesdayEffort;
    }
    public void setWednesdayEffort(BigDecimal wednesdayEffort) {
        this.wednesdayEffort = wednesdayEffort;
    }
    public void setThursdayEffort(BigDecimal thursdayEffort) {
        this.thursdayEffort = thursdayEffort;
    }
    public void setFridayEffort(BigDecimal fridayEffort) {
        this.fridayEffort = fridayEffort;
    }
    public void setSaturdayEffort(BigDecimal saturdayEffort) {
        this.saturdayEffort = saturdayEffort;
    }
    public void setSundayEffort(BigDecimal sundayEffort) {
        this.sundayEffort = sundayEffort;
    }

    public TimesheetTO(){}

    public TimesheetTO( String activityMasterId, 
                        String name, 
                        String mondayEffort,
                        String tuesdayEffort,
                        String wednesdayEffort,
                        String thursdayEffort,
                        String fridayEffort,
                        String saturdayEffort,
                        String sundayEffort)
    {
        this.activityMasterId=Integer.parseInt(activityMasterId);
        this.name=name;
        this.mondayEffort=BigDecimal.valueOf(Double.parseDouble(mondayEffort));
        this.tuesdayEffort=BigDecimal.valueOf(Double.parseDouble(tuesdayEffort));
        this.wednesdayEffort=BigDecimal.valueOf(Double.parseDouble(wednesdayEffort));
        this.thursdayEffort=BigDecimal.valueOf(Double.parseDouble(thursdayEffort));
        this.fridayEffort=BigDecimal.valueOf(Double.parseDouble(fridayEffort));
        this.saturdayEffort=BigDecimal.valueOf(Double.parseDouble(saturdayEffort));
        this.sundayEffort=BigDecimal.valueOf(Double.parseDouble(sundayEffort));
    }
} 
```

而且，我正在使用以下 jquery 代码将时间表对象数组传递给控制器​​：

```
var datacounter=0;
/*var totalcount=0;*/
var timesheetTO = new Array();

$("#timeSheetTableId input[id^=activityMasterId]").each(function() {
       $('#activityMasterId_'+datacounter).removeAttr('disabled');
       $('#name_'+datacounter).removeAttr('disabled');

       timesheetTO.push({
           "activityMasterId": $('#activityMasterId_'+datacounter).val(),
           "name": $('#name_'+datacounter).val(),
           "mondayEffort": new Integer($('#mondayEffort_'+datacounter).val()),
           "tuesdayEffort": $('#tuesdayEffort_'+datacounter).val(),
           "wednesdayEffort": $('#wednesdayEffort_'+datacounter).val(),
           "thursdayEffort": $('#thursdayEffort_'+datacounter).val(),
           "fridayEffort": $('#fridayEffort_'+datacounter).val(),
           "saturdayEffort": $('#saturdayEffort_'+datacounter).val(),
           "sundayEffort": $('#sundayEffort_'+datacounter).val()
       });
       datacounter=datacounter+1;
});

var url = contextRoot + "timesheet/saveTimeBooking.htm";
$.ajax({
    type : 'POST',
    url : url,
    async : false,
    timeout : 5000,
    contentType: 'application/json',
    dataType: 'json',
    data : {
        timesheetTO : JSON.stringify(timesheetTO)
    },
    success : function(data, textStatus) {
        alert('successful');

    },
    error : function(xhr, textStatus, errorThrown) {
        alert('request failed in saving timesheet:' + errorThrown + " " + textStatus + " "
                + xhr.toString());
    }
}); 
```

提交时，我收到上面给出的错误：Jacskon parsor exception: Unrecognized token 'tieheT': was expecting 'null', 'true' or 'false'

我做错了什么..有什么办法可以解决这个问题吗？

这是结果`JSON.stringify`：

```
 [{"activityMasterId":"1","name":"Financial Implications","mondayEffort":"0","tuesdayEffort":"0","wednesdayEffort":"0","thur‌​sdayEffort":"0","fridayEffort":"0","saturdayEffort":"0","sundayEffort":"0"},{"act‌​ivityMasterId":"2","name":"Cost estimation","mondayEffort":"0","tuesdayEffort":"0","wednesdayEffort":"0","thursd‌​ayEffort":"0","fridayEffort":"0","saturdayEffort":"0","sundayEffort":"0"}] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-10-15T14:27:13.873

问题是您传递的字符串值缺少引号，因此编译器需要一个布尔/空对象。

您应该通过调试验证您在运行时传递的值，如有必要，将其复制到文本编辑器中进行彻底分析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-02T07:35:51.680

我遇到了类似的问题，现在它工作正常。问题可能是

```
data : {
        timesheetTO : JSON.stringify(timesheetTO)
    } 
```

用双引号括起来

```
data : {
        ' "timesheetTO" : " '+JSON.stringify(timesheetTO)+' " '
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T01:16:55.437

您需要验证您提供的 JSON 是否有效：错误消息表明情况并非如此。它还应该为您提供准确的行号和行号，您可以使用它们来查找输入 JSON 的问题。从消息中，我猜要么没有引用属性名称，要么没有引用某些字符串值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T03:40:10.950

ajax 数据应该采用 JSON 对象的字符串。在此处查看解决方案：

[使用 jQuery 将 JSON 对象发布到 Spring 3 控制器](https://stackoverflow.com/questions/3983556/using-jquery-to-post-json-object-to-spring-3-controller#3987156)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-09T18:43:43.953

Alternatively, you can annotate your class with `@RestController` (if it is not already). Then you dont need to explicitly annotate your request and response with `@RequestBody` and `@ResponseBody`

So your method signature will change to

```
@PostMapping("/saveTimeBooking")
public ReturnTO saveTimeBooking(TimesheetTO timesheetTO[]) {
// ...
} 
```

# java - 更改属性文件

> ID：13565527
> 
> 赞同：0
> 
> 时间：2012-11-26T13:09:23.877
> 
> 标签：java, apache, log4j

我有如下属性文件

```
log4j.rootLogger=DEBUG, A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.logger.com.foo=WARN 
```

我想更改此文件中的日志级别，所以我在 java 文件中写下一行

```
logger.setLevel(Level.FATAL); 
```

这只会在运行时更改我的日志级别如果我想在属性文件中永久更改日志级别怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:26:29.823

使用`java.util.Properties`类。该类允许从文件加载属性，更改它，然后保存到文件。

# perl - 为什么 BSD 和 Perlversion 5.12.0 - 5.12.2 的负载测试会失败？

> ID：13565530
> 
> 赞同：0
> 
> 时间：2012-11-26T13:09:38.230
> 
> 标签：perl, testing, module

OS *BSD 和 Perl 版本从 5.12.0 到 5.12.2 时此测试 (t/00-load.t) 失败的原因可能是什么？

```
#!perl -T

use 5.010001;
use strict;
use warnings;
use Test::More tests => 1;

BEGIN {
    use_ok( 'Term::Choose' ) || print "Bail out!\n";
}

diag( "Testing Term::Choose $Term::Choose::VERSION, Perl $], $^X" ); 
```

错误：

```
t/00-load.t               (Wstat: 139 Tests: 0 Failed: 0)
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 1 tests but ran 0. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:13:38.083

退出状态 139 为 128 + 11，表示信号 11，即 SIGSEGV，表示[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

# java - 通过充气城堡库将 der 转换为 pem

> ID：13565532
> 
> 赞同：0
> 
> 时间：2012-11-26T13:09:41.423
> 
> 标签：java, cryptography, bouncycastle, x509

*我找到了很多关于从pem*转换为*der*的答案。

但是，我找不到将*der*转换为*pem*的方法。

例如，以下代码生成 der 编码文件*pkcs10.cer*

```
public static void main(String[] args) throws Exception
{
    X509Certificate[] chain = buildChain();
    PEMWriter pemWrt = new PEMWriter(new OutputStreamWriter(System.out));
    pemWrt.writeObject(chain[0]);

    FileWriter fwO = new FileWriter("pkcs10.cer");
    fwO.write((chain[0]).toString());

    fwO.close();
    pemWrt.close();

} 
```

喜欢，[0] 版本：3 序列号：1353995641265 颁发者DN：CN=测试证书开始日期：2012 年 11 月 26 日星期一 21:54:01 PST 最终日期：2012 年 11 月 26 日星期一 21:54:51 PST

但是，我不知道如何从 der 文件中制作 pem 编码的认证。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T13:19:34.433

我不是 Java 开发人员，因此我无法向您展示代码或指向某个类。PEM 只是二进制 DER 的 Base64 编码，带有标准的标头和尾标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:11:06.127

下面是将各种 BC 对象转换为 PEM 字符串序列化格式的方法。请注意，此代码适用于 BC 的 C# 版本，但应该毫不费力地转换为 Java 版本。

```
// converts bouncy castle objects of type
// X509Certificate, X509Crl, AsymmetricCipherKeyPair, AsymmetricKeyParameter,
// IX509AttributeCertificate, Pkcs10CertificationRequest, Asn1.Cms.ContentInfo 
// to PEM format string
public string ToPem(object obj)
{
    using (MemoryStream mem = new MemoryStream())
    {
        StreamWriter writer = new StreamWriter(mem);
        Org.BouncyCastle.OpenSsl.PemWriter pem = new Org.BouncyCastle.OpenSsl.PemWriter(writer);
        pem.WriteObject(obj);
        // force the pem write to flush it's data - kind of abnoxious you have to do that
        pem.Writer.Flush();
        // create a stream reader to read the data.
        StreamReader reader = new StreamReader(mem);
        mem.Position = 0;
        string pemStr = reader.ReadToEnd();
        return pemStr;
    }
} 
```

# android - 授予其他应用访问我的应用文件的权限

> ID：13565535
> 
> 赞同：0
> 
> 时间：2012-11-26T13:09:52.817
> 
> 标签：android

我正在从服务器获取文件，并将其存储在手机上。这是一个PDF。然后我需要显示 . 假设我有一个 PDF 查看器，它将打开文件。

问题是我应该将 PDF 文件存储在哪里，以便我的 pdf 阅读器可以访问它。我真的不想使用外部存储，因为并非所有手机都有。有没有办法将公共文件保存在内部存储中？

或者有一些方法可以使用[ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html)传递必要的信息。不幸的是，我需要一些示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:12:52.697

您放在内部目录下的所有内容都不能被其他应用程序访问。因此 getDir 或 getCacheDir 只能用于您的应用程序。如果您需要其他应用程序打开文件，则必须在 SD 卡下写入文件。

# javascript - 仅输入在 tr 中的第一个 td 中选中的复选框

> ID：13565538
> 
> 赞同：1
> 
> 时间：2012-11-26T13:10:04.893
> 
> 标签：javascript, jquery

如何获得匹配数/长度：仅输入在 tr 中的第一个 td 中选中的复选框？

这有效：

```
$('#myTable').find('tr td input[type=checkbox]:checked').parents('tr').length; 
```

这行不通

```
$('#myTable').find('tr td:eq(0) input[type=checkbox]:checked').parents('tr').length; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:11:51.667

尝试这个：

```
$('#myTable').find('tr td:first input[type=checkbox]:checked').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:27:56.450

```
$('#myTable tr').find('td:eq(0) input[type=checkbox]:checked').length; 
```

# javascript - 将磁盘空间存储在文件中

> ID：13565539
> 
> 赞同：0
> 
> 时间：2012-11-26T13:10:12.427
> 
> 标签：javascript, linux, file, mongodb, diskspace

您好，我有一个 javascript 文件，将数据存储在 mongodb 中。我想做两件事

1) 由于“db.mycol.stats();”请求磁盘空间 或类似的东西并将使用的存储大小（应该是“大小”或存储大小“）存储到一个var中。

2）我想将该变量存储在一个文件中 - 例如 .txt

我看到并使用了以下内容：（disksapce 是一个具有不同磁盘大小的数组，我想测量，（数量是一个 var））

```
var fso2 = new ActiveXObject("Scripting.FileSystemObject");
var b = fso2.CreateTextFile(file_diskspace, true);

    for (m=0;m<diskspace.length;m++)
    {
        b.WriteLine(amount+ ":" + diskspace[m]+"\n");
    }

 b.Close(); 
```

不知何故，这不起作用。（我使用的是linux服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:42:44.810

这不起作用有多种原因。您通常不能从 JS 上下文中写入文件（当然不能从 MongoDB 中），ActiveXObject 仅存在于 Windows 上。

如果要执行此操作，请通过调用 print`(db.getSiblingDB("yourDb").stats().storageSize);`并写入文件（或将输出通过管道传输到文件）来编写脚本

编辑：像这样：`mongo --quiet --eval "db.getSiblingDB('test').stats().storageSize" > size.text`

# git - 提交未出现在历史记录中

> ID：13565541
> 
> 赞同：0
> 
> 时间：2012-11-26T13:10:28.133
> 
> 标签：git, git-rebase

我犯了一个错误，现在我的承诺没有出现在历史记录中。我有一个以只读模式签出的远程分支（~~实际上没有切换到该分支~~创建本地分支）。我做了 3 次提交，没有再次检查 master。

我想将这些提交重新设置为 master，但它们没有出现在历史记录中。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:12:44.747

如果这是最近（30 天左右）完成的，则提交仍应在`git reflog`其中显示`HEAD`最近的所有提交的列表。然后，您可以将提交的 SHA id`git merge`或`git cherry-pick`提交到您的主分支中。

如果最近没有这样做，则提交可能已被删除，`git gc`但您可以运行`git fsck`并检查任何`dangling commits`列出的内容。其中之一可能是您丢失的提交。

# python - 如何使用python读取ppt文件？

> ID：13565542
> 
> 赞同：3
> 
> 时间：2012-11-26T08:45:19.183
> 
> 标签：python

我想在 ppt 文件中获取内容（仅限文本）。怎么做？
（喜欢的是，如果我想获取txt文件中的内容，我只需要打开并阅读。我需要做什么才能从ppt文件中获取信息？）
顺便说一下，我知道windows系统中有一个win32com . 但是现在我正在研究linux，有没有可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:44:26.837

我在[Superuser](https://superuser.com/)上找到了这个讨论：

[Linux 中用于从 Word、Excel、Powerpoint 中提取文本的命令行工具？](https://superuser.com/questions/165978/command-line-tool-in-linux-to-extract-text-from-word-excel-powerpoint-or-co)

那里列出了几个合理的答案，包括使用 LibreOffice 来执行此操作（以及用于`.doc`、`.docx`、`.pptx`等），以及[Apache Tika 项目](http://tika.apache.org/)（在这个解决方案空间中似乎是 5,000 磅的大猩猩）。

# makefile - makefile ifeq 模拟

> ID：13565554
> 
> 赞同：4
> 
> 时间：2012-11-26T13:11:14.147
> 
> 标签：makefile

我有很多不同的 makefile 的大量资源。
现在我需要在那里添加一个小条件，在那里我可以检查行是否包含我想要的内容，然后我应该使用一些符号。
我知道`ifeq`必须放在 0 列。但我不能仅针对这种情况更改全部来源。
如果没有，我如何检查变量中包含的内容`ifeq`？我在定义函数中有这样的东西：

```
$(gen_cpp_objects): $(intermediates)/%.o: \
    $(intermediates)/%$(LOCAL_CPP_EXTENSION) $(yacc_cpps) \
    $(proto_generated_headers)  $(my_compiler_dependencies) \
    $(LOCAL_ADDITIONAL_DEPENDENCIES)
        $(transform-$(PRIVATE_HOST)cpp-to-o) 
```

我需要将条件插入`$(transform-$(PRIVATE_HOST)cpp-to-o)`

我想要这样的东西：

```
file:=somefile.someextension
define transform-cpp-to-o
@mkdir -p $(dir $@)
@echo "target $(PRIVATE_ARM_MODE) C++: $(PRIVATE_MODULE) <= $<"
ifeq ($(strip $<),$(file))
#Do something here
endif
$(hide) $(PRIVATE_CXX) \
        $(addprefix -I , $(PRIVATE_C_INCLUDES)) \ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:29:14.943

您可以将该`if`函数用作内联条件：

```
$(if $(filter $(strip $<),$(file)), then-block, else-block) 
```

# asp.net-mvc-3 - 单击 webgrid 中的第二页时，过滤数据的分页丢失

> ID：13565556
> 
> 赞同：0
> 
> 时间：2012-11-26T13:11:17.837
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, filtering, webgrid

我`WebGrid`在 MVC3 Web 应用程序中创建了一个。在我的应用程序中，启用了排序、过滤和分页。

**问题：**每当对 执行过滤时`webgrid`，它会将过滤后的数据填充到`Webgrid`。但是，如果我单击第二页以查看`Webgrid`在我的搜索文本上过滤的剩余数据，它不会显示剩余的过滤数据，而是显示网格中所有项目的完整列表。

在 webgrid 中过滤我的数据后，如何在第二页中获取数据。

我在网站上看到过类似的[问题](https://stackoverflow.com/questions/10051794/filter-is-getting-lost-in-webgrid-paging-sorting-filtering-in-net-4-0)，即使它没有解决我的问题。

我的观点：我创​​建了一个局部视图来填充网格，它由普通视图调用。我已经按照本[教程](http://www.elylucas.net/post/Using-a-grid-that-can-sort-page-and-filter-in-AspNet-MVC3e28093Part-1e28093Using-the-WebGrid-WebHelper.aspx)来做到这一点。

控制器：第一次`Webgrid`使用模型中的其他方法加载数据，以填充数据库中的所有数据

我的部分查看代码：

```
@{
    ViewBag.Title = "listStudents";
    Layout = "~/Views/Shared/_Layout.cshtml";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 3); 
}

@grid.Pager(WebGridPagerModes.NextPrevious)
        @grid.GetHtml(  //Error at this line
        htmlAttributes: new { id = "grdListStudents" },
    fillEmptyRows: true,
    headerStyle: "tblHeader",
    tableStyle: "tablestyle",
    mode: WebGridPagerModes.All,
    firstText: "<< First",
    previousText: "< Previous", nextText: "Next >",
    lastText: "Last >>",
    columns: new[]{
        grid.Column("intID","SId",canSort:true),
        grid.Column("strFirstName","Name",canSort:true,format:(item)=>item.strFirstName+"   "+item.strLastName),
        grid.Column("strPhone","Phone",canSort:true),
        grid.Column("strEmail","Email",canSort:true),
    }
    ) 
```

这是我在控制器中的代码：

公共只读 IStudentInfo _istudentrepository；

```
public studentController( IStudentInfo _iStudentRepository)
{
            this._istudentrepository = _iStudentRepository;
}

//To filter according to Searched Text

[HttpPost]
        public ActionResult studentController(string txtSearch,string ddlTitle,FormCollection collect)
        {
            IEnumerable<Students> sList;
            sList = _istudentlistrepository.getAllStudentsList();

            if (txtSearch != "")
            {
                switch (ddlTitle)
                {
                    case "intId":
                        int sId = Convert.ToInt32(txtSearch);
                        sList = sList.Where(b => b.intId == sId).ToList();
                        break;
                    case "strFirstName":
                        sList = sList.Where(b => b.strFirstName.ToLower().Contains(txtSearch.ToLower())).ToList();
                        break;
                    case "strPhone":
                        sList = sList.Where(b => b.strPhone.ToLower().Contains(txtSearch.ToLower())).ToList();
                        break;
                    case "strEmail":
                        sList = sList.Where(b => b.strEmail.ToLower().Contains(txtSearch.ToLower())).ToList();
                        break;
                }
            }
            return PartialView("_grdListStudents", sList);
        }
    public ActionResult studentController(string sort, string sortdir, int? page)
    {
                int startPage = 0;
                IEnumerable<Students> sList;
                if (page.HasValue && page.Value > 0)
                {
                    startPage = page.Value;
                }
                sList = _istudentrepository.GetList(startPage, PageSize, sort, sortdir);
                return View(sList);

    } 
```

接口 IStudentInfo 中的代码：

```
public interface IStudentInfo
    {
        IEnumerable<Students> GetList(int intPage, int intRecords, string strSort, string sortdir);

    } 
```

模型中的代码：

```
private MyEntity _entity;

public StudentListRepository(MyEntity Ent)
{
            this._entity = Ent;
}
public IEnumerable<Students> GetList(int intPage, int intRecords, string strSort, string sortdir)
{

            var finalresult = new Students();
            var bidList = (from userInfo in _entity.tbl_UserInf
                           join user in _entity.tbl_User on userInfo.UserId equals user.UserId
                           select new Students()
                           {
               intID=user.UserId,
                               strFirstName = user.FirstName,
                               strEmail = userInfo.EmailId,
                               intPhone=userInfo.Phone
                           }).OrderByDescending(m => m.intID);
            finalresult.TotalResult = bidList.Count();
            switch (strSort)
            {
                case "intID":
                    if (sortdir == "ASC")
                    {
                        sList = sList.OrderBy(r => r.Id);
                    }
                    else
                    {
                        sList= sList.OrderByDescending(r => r.Id);
                    }
                    break;
    case "strFirstName":
                    if (sortdir == "ASC")
                    {
                        sList = sList.OrderBy(r => r.strFirstName);
                    }
                    else
                    {
                        sList= sList.OrderByDescending(r => r.strFirstName);
                    }
                    break;
    case "strEmail":
                    if (sortdir == "ASC")
                    {
                        sList = sList.OrderBy(r => r.strEmail);
                    }
                    else
                    {
                        sList= sList.OrderByDescending(r => r.strEmail);
                    }
                    break;
                    //repeat same for phone
           }
          finalresult.lstStudents = sList.Skip(intPage * intRecords).Take(intRecords).ToList();
           return sList.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:15:10.677

您的视图模型应包含项目列表以及搜索文本、页面大小、当前页面和总记录数的值。我使用具有以下属性的通用基类：

```
public class PagedViewModel<T> {
    public IList<T> Items { get; set; }
    public int PageSize { get; set; }
    public int RowCount { get; set; }
    public int Page { get; set; }
    public int PageCount { get; set; }
    public string sort { get; set; }
    public string sortdir { get; set; }
} 
```

然后你的具体 Viewmodel 看起来就像这样：

```
public class StudentsListViewModel : PagedViewModel<Students> {
    public string Search { get; set; }
} 
```

从我读到的您的评论中，您想`Ajax.BeginForm`通过 ajax 更新您的网格。然后您需要两项操作：一项针对整个页面，一项针对网格（部分）。

第一个动作返回整个页面：

```
public ActionResult Index() {
    StudentsListViewModel model = queryStudents(1, 10, null);
    return View(model);
} 
```

第二个动作返回网格的局部视图：

```
public ActionResult UpdateStudentsGrid(StudentsListViewModel model) {
    model.Items = queryStudents(model);
    return Partial("StudentsGrid", model);
} 
```

辅助方法查询数据并返回过滤后的列表：

```
private StudentsListViewModel queryStudents(int page, int rowsPerPage, 
                                             string search) {
    StudentsListViewModel = new StudentsListViewModel {
        Page = page,
        PageSize = rowsPerPage,
        Items = db.Students.Where(s => s.Name == search || search == null)
            ... add paging...;
    };
    // ToDo: set additional properties on model
    return model;
} 
```

主页视图包含您的 ajax 表单。该列表将由局部视图呈现：

```
@model StudentsViewModel
@using (Ajax.BeginForm("UpdateStudentsGrid", 
         new AjaxOptions { UpdateTargetId = "grid" })) {

    @Html.TextboxFor(m => m.Search)
    <input type=submit" />
    <div id="grid">
        @Html.Partial("StudentsGrid", Model);
    </div>
} 
```

部分视图看起来像这样，只呈现网格：

```
@{ 
    var grid = new WebGrid(Model.Items, canPage: true, canSort: true,
                           rowsPerPage: Model.PageSize);
}
@grid.GetHtml(...) 
```

我还没有测试或编译代码：它可能无法正常工作，但它应该让你开始。

**编辑：被遗忘的寻呼机**

为了让寻呼机链接与您的表单一起使用，您可以根据这篇文章简单地将表单方法从 POST 更改为 GET：http: [//www.mikepope.com/blog/DisplayBlog.aspx?permalink=2377](http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2377)

但我不确定它如何与 ajax 表单一起使用。

另一种方法是拦截寻呼机链接上的点击并使用 POST 方法提交表单：[http ://forums.asp.net/t/1703486.aspx/1](http://forums.asp.net/t/1703486.aspx/1)

# jquery - 当用户清除 jQuery 自动完成中的输入字段时如何显示默认数据

> ID：13565560
> 
> 赞同：1
> 
> 时间：2012-11-26T13:11:20.577
> 
> 标签：jquery, autocomplete, jquery-ui-autocomplete

我正在使用 jquery-ui-autocomplete 插件，但对其进行了微调以提供自动加载而不是自动完成的感觉。我在输入字段下方的 div 中显示结果，而不是它的下拉视图。

我已将 minlength 设置为 1，以便在单击输入框时不会更改 div 中的默认数据。

但是一旦用户输入了一些东西，结果就会显示在 div 中，现在如果用户清除输入字段，它会继续显示最后的搜索结果。我想在这里显示一些在页面加载时显示的默认数据。我怎样才能做到这一点？

代码片段：

```
$("#search-help").autocomplete({
    source: function (request, response) {
        var term = $.ui.autocomplete.escapeRegex(request.term)
        , containsMatcherTitle = new RegExp(term, "i")
        , containsTitle = $.grep(data, function(value) {
            return containsMatcherTitle.test(value.value);
        });

        response((containsTitle.slice(0, 5));
    },
    focus: function( event, ui ) {

        return false;
    },
    minLength: 3,
    select: function(event, ui) {

            return false;
    },
    search: function(event, ui) {
        $("#MY_DIV ul").empty();
    }
}).data( "autocomplete" )._renderItem = function( ul, item ) {

    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.value + "</a><span>" + item.desc + "</span>" )
    .appendTo($('#MY_DIV ul'));
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:26:30.197

目前尚不清楚您想要在 div 中使用什么格式，但您可以创建如下所示的事件：

```
$("#search-help").keyup(function( ) {
       if (!this.value) { 
              $('#MY_DIV').val("Default text");
       }
}); 
```

# ruby - 以每个恒定间隔的迭代次数为基准

> ID：13565570
> 
> 赞同：2
> 
> 时间：2012-11-26T13:11:57.610
> 
> 标签：ruby, benchmarking

为了对一个简单任务的不同算法的效率进行基准测试并比较它们，我发现最常见的方法是设置一个恒定的次数来迭代任务，并测量每个算法花费的时间间隔。

但是，如果次数设置得太小，算法之间的间隔差异就会太小，并且可能被外部因素掩盖。如果设置的次数太大，那么执行的时间就会太长。因此，您必须通过试用结束错误来猜测正确的次数。

与其这样做，我认为设置一个要运行每个算法的恒定时间间隔更有意义，然后测量每个算法在该间隔内可以进行多少次迭代。

通过这样做，基准的可靠性将更加稳定。以传统方式，基准对于需要时间的任务将更加可靠。

我还没有看到这种基准测试方式。人们真的这样做吗？是否有这种测量方式的基准框架？我问这是一个非语言特定的问题，但如果有这样的框架，特别是对于 Ruby，请介绍一些。还是我对这个想法错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:02:25.683

我找到了这个宝石：[benchmark/ips](https://github.com/evanphx/benchmark-ips)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:30:46.040

看看perfer：

[https://github.com/jruby/perfer](https://github.com/jruby/perfer)

这有几个机制，包括迭代/秒。不用担心这是一个 jruby 存储库，它适用于所有 Ruby 实现，并且是作为 GSoC 2012 的一部分编写的。

# asp.net - 配置工具->访问规则没有改变

> ID：13565574
> 
> 赞同：0
> 
> 时间：2012-11-26T13:12:07.587
> 
> 标签：asp.net, asp.net-mvc, configuration, asp.net-mvc-4, access-rules

Visual Studio 有一个名为 ASP.NET 配置的工具。

使用此工具创建的用户和组会更新数据库，并将更改反映到系统中。虽然访问规则看起来没有效果。

我唯一能看到的是，如果我用 [Authorize] 标志装饰我的方法，我只能让组中的授权用户有权访问特定的控制器或操作。

那么，在 ASP.NET 配置中具有此访问规则配置选项有什么意义。

PS：甚至我的 web.config 文件都没有改变。那我必须手动更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:19:12.930

此问题的 Awnser 已在此处讨论。

[http://forums.asp.net/p/1861408/5222219.aspx/1?p=True&t=634895938709382961](http://forums.asp.net/p/1861408/5222219.aspx/1?p=True&t=634895938709382961)

非常感谢

# android - 将数据插入 SQLite 时出现间歇性 NPE

> ID：13565575
> 
> 赞同：4
> 
> 时间：2012-11-26T13:12:09.147
> 
> 标签：android, sql, database, sqlite

当我将值插入 Android 上的 SQLite 表时，我收到 NullPointerException，但我不明白为什么。我正在测试 ContentValues 和数据库实例是否为空。

这是插入代码：

```
public void insertOrIgnore(ContentValues values) {

    SQLiteDatabase db = this.dbHelper.getWritableDatabase();

    try {

        //I added these null value checks to stop NPE, but doesn't help.
        if (values != null && db != null) {
            db.insertWithOnConflict(TABLE, null, values, SQLiteDatabase.CONFLICT_IGNORE);
        }
    } catch (SQLiteException e) {

    } finally {
        if (db != null) {
            db.close();
        }
    }
} 
```

在哪里

```
public static final String TABLE = "albums"; 
```

大多数情况下，此代码可以按预期处理添加到数据库中的数据。但是，它*有时而且很少会*产生以下错误。堆栈跟踪来自 ACRA，我无法隔离在什么情况下会发生此错误。我正在寻找关于为什么会发生这种情况以及条件是什么的指针。我对 SQLite 的了解是初级水平。

```
java.lang.NullPointerException
    at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:96)
    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2025)
    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1965)
    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:690)
    at android.database.sqlite.SQLiteDatabase.beginTransactionNonExclusive(SQLiteDatabase.java:605)
    at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:247)
    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1844)
    at com.mydomain.myapp.albums.AlbumsData.insertOrIgnore(AlbumsData.java:89) 
```

第 89 行是上面显示的 db.insertWithOnConflict(...) 调用。

我不一定要寻找完整代码的答案，而是寻找问题所在的指针和解释，以便我自己开始修复它。

编辑：堆栈跟踪显示 NPE 源自[SQLiteStatement](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/database/sqlite/SQLiteStatement.java#SQLiteStatement) (v 4.03) 的第 290 行：

```
 setNativeHandle(mDatabase.mNativeHandle); 
```

所以看起来数据库实例为空。当我在交易开始时测试 null 时，它如何在交易期间变为 null？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:53:25.903

如此处所述[SQLiteDatabase close() 函数在多个线程时导致 NullPointerException](https://stackoverflow.com/questions/7999075/sqlitedatabase-close-function-causing-nullpointerexception-when-multiple-threa)

您的错误的原因可能是您在某个时候关闭了数据库。可能在失败的任务尚未完成的同时。

我已经稍微关注了堆栈跟踪，这就是大致发生的情况：

*   `AlbumsData.insertOrIgnore(AlbumsData.java:89)`
    您调用`insertWithOnConflict`，它构建生成的 sql 字符串 ( `"INSERT OR IGNORE INTO..."`)，然后将其与您的值一起包装`ContentValues`到`SQLiteStatement`.
*   `SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1844)`- 生成的语句现在要执行
*   `SQLiteStatement.executeInsert(SQLiteStatement.java:112)`- 在实际插入发生之前，数据库需要获取锁。
*   `SQLiteStatement.acquireAndLock(SQLiteStatement.java:247)`- 这里发生了一些检查，据我所知，数据库对象当时不为空。代码决定它必须启动一个事务。据我所知，数据库对象本身当时没有锁定。
*   `SQLiteDatabase.beginTransactionNonExclusive(SQLiteDatabase.java:605)`- 只是转发
*   `SQLiteDatabase.beginTransaction(SQLiteDatabase.java:690)`- 经过一些检查（不确定数据库是否必须存在于此），它将尝试执行`execSQL("BEGIN IMMEDIATE;")`
*   `SQLiteDatabase.execSQL(SQLiteDatabase.java:1965)`- 只是向前
*   `SQLiteDatabase.executeSql(SQLiteDatabase.java:2025)`-建立另一个`SQLiteStatement`。`"BEGIN IMMEDIATE;`这个应该现在执行
*   `SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:96)`- 从检查数据库锁开始，这似乎没问题，这里的数据库不应该为空。然后执行该语句，最后再次解锁数据库。
*   `SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)`- 清理一些东西，最后因为数据库是 NPE 而失败`null`。

行号不匹配，因此该代码中可能存在供应商修改/添加。

如您所见，代码在实际使用您提供的数据之前崩溃。它即将做

```
BEGIN TRANSACTION IMMEDIATE; -- crash
INSERT INTO table (...) VALUES (...);
-- (end transaction) 
```

在我看来，这使它成为一个框架错误。在那里内部处理的数据库对象不应该`null`位于某个地方，尤其是当它似乎在堆栈中更靠前时不为空时。

我还认为另一个隐藏的异常可能是其根本原因。代码中有很多`try { /* do stuff */ } finally { /* clean up */ }`块，`finally`即使该`try`部分抛出异常，该部分也会被执行。现在该`finally`块可能会导致另一个异常，结果是 AFAIK，原始异常被 finally 块中的新异常替换。

尤其`executeUpdateDelete()`是像

```
try {
    acquireAndLock(WRITE);
    // actual statement execution
} finally {
    releaseAndUnlock();
} 
```

如果此时数据库已关闭，`acquireAndLock`或者该部分中的任何代码都可能失败，并且可能会留下导致再次失败`try`的数据库对象。你应该得到相同的堆栈跟踪。`null``releaseAndUnlock`

除此之外，不要像`catch (SQLiteException e) { /* empty */ }`. 如果可能的话，用 ACRA 记录它们/你还没有这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:26:23.440

此 NPE 似乎来自自定义 ROM，因为[Android 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/database/sqlite/SQLiteDatabase.java?av=f)指向的方法与您在 LogCat 中收到的方法不同。对于这种情况，我所做的是：如果这些异常的发生率非常罕见，我会忽略它们，因为很难知道手机上运行的是什么自定义 ROM，而且更难获得这个自定义 ROM 的源代码。问题出在哪里。

使用自定义 ROM 的用户并不多，因此，如果您在具有不同 SDK 的不同手机上广泛测试了您的应用程序，并且您获得的异常率并不那么重要，您可以忽略它们。否则，您可以在黑暗中拍摄并推测导致 NPE 的自定义 ROM 中可能存在什么（个人认为不值得这样做）。

# c# - 如何打开服务属性对话框

> ID：13565576
> 
> 赞同：7
> 
> 时间：2012-11-26T13:12:14.817
> 
> 标签：c#, service, dialog, windows-shell, shellexecute

我想向我的应用程序（服务的前端）添加一个按钮，该按钮将为我的服务打开服务属性对话框（如 services mmc snapin 中）。

打开文件属性的例子很多，但这不是我想要的。我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-15T19:33:58.367

基于`services.msc`，页面来自`filemgmt.dll`并被调用`ServicePageGeneral`。注册 COM 组件后，我找不到任何有关 CLSID 的文档，也找不到`filemgmt.dll`.

这并不排除存在已建立的 API 或显示对话框的命令行选项的可能性，但我肯定找不到。

进一步证实了对话框不可重用的情况，[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)和 SQL Server 配置管理器都重新实现了对话框，而不是显示`services.msc`版本。

相关：[如何从命令行或链接打开单个服务的属性框？](https://superuser.com/questions/623193/how-do-i-open-properties-box-for-individual-services-from-command-line-or-link)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T23:34:34.363

您应该开发自定义“服务控制台”，使用 .NET 和 WMI 类，您可以查询计算机中的服务列表，获取实际状态，此外，您应该从应用程序执行 Windows 命令以启动、停止服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-15T21:11:53.793

今天我发现这是可能的！

这是 Delphi 上的代码，它使用[MMC 2.0 自动化对象模型](https://docs.microsoft.com/ru-ru/previous-versions/windows/desktop/mmc/mmc-2-0-automation-object-model)

```
var
  objMMC: OleVariant;

procedure ShowSvcProperties(const ASvcName: string);
var
  objView, objList, objItem: OleVariant;
  SvcEnum: IEnumVariant;
  Value: UInt32;
  sName: string;
begin
  objMMC := CreateOleObject('MMC20.Application');
  objMMC.Load('services.msc');
  objView := objMMC.Document.ActiveView;
  objList := objView.ListItems;
  SvcEnum := IUnknown(objList._NewEnum) as IEnumVariant;
  while SvcEnum.Next(1, objItem, Value) = S_OK do
  try
    sName := objItem.Name;
    if SameText(sName, ASvcName) then begin
      objView.Select(objItem);
      objView.DisplaySelectionPropertySheet;
      Break;
    end;
  finally
    VariantClear(objItem);
  end;
end; 
```

现在要显示服务属性对话框，只需调用`ShowSvcProperties('Plug and Play');`

# php - mysqli 查询的自定义函数

> ID：13565577
> 
> 赞同：1
> 
> 时间：2012-11-26T13:12:18.000
> 
> 标签：php, mysqli

我正在尝试使用 PHP 中的自定义函数，以简化我手动执行的许多操作。我对自定义函数很陌生，所以我不确定这些限制。现在我正在尝试使用自定义函数使用 MySQLi 获取数据这是代码，然后我将解释这个问题：

```
function connect_db($db = 'db_username') {
    iconv_set_encoding("internal_encoding", "UTF-8");
    mb_language('uni');
    mb_internal_encoding('UTF-8');
    @ $mysqli = new mysqli('host',$db,'password',$db);
    if(mysqli_connect_errno())
    {
        die('connection error');
    }

} 
```

这个似乎工作正常。这是我遇到更多麻烦的下一个功能。

**编辑：**感谢 Jeremy1026 的回复更新

```
function do_query($db = 'default_db', $query) {
    connect_db();
    $result = $mysqli->query($query);
    if(!$result){
        trigger_error("data selection error");
    }

    while($row = $result->fetch_assoc()){
        $result_array[] = $row;
    }
    return $result_array;
} 
```

我的主机强制数据库名称和用户名相同，所以如果数据库名称是“bob”，那么访问它的用户名也将是“bob”，这就是为什么`$db`在连接中出现两次的原因。

我遇到的问题是这两个函数在`functions.php`另一个页面中并被调用。我希望能够根据列名从其他页面中的查询中提取结果。但是我还需要能够通过格式化来做到这一点，所以也许`while()`循环必须发生在那个页面上而不是函数中？无论页面或数据如何，我都希望它尽可能通用，以便我可以将这两个函数用于我为该站点运行的三个数据库的所有连接和所有查询。

上帝，我希望我很清楚。

非常感谢您的任何建议。我用谷歌搜索了一下，但是很难找到任何不使用过时`mysql_`前缀的东西，或者任何实际上以我可以使用的方式返回数据的东西。

**更新：**我现在在访问相关页面时遇到以下错误：

**致命错误：在****/functions.php**中的非对象上调用成员函数 query() `

有问题的行是`$result = $mysqli->query($query);`. 我认为这是因为它认为`$query`是未定义的，但它不应该通过在页面中调用来获取定义吗？这是该页面的代码：

```
$query = "SELECT * FROM `table`";
$myArray = do_query($db, $query);
echo $myArray['column_name']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:17:29.110

在您的第二个函数中，您没有返回任何数据，因此它会丢失。你需要告诉它要返回什么，见下文：

```
function do_query($db = 'default_db', $query) {
    connect_db();
    $result = $mysqli->query($query);
    if(!$result){
        trigger_error("data selection error");
    }

    while($row = $result->fetch_assoc()){
        $result_array[] = $row;
    }
    return $result_array;
} 
```

然后，在使用该功能时，您将执行以下操作：

```
$myArray = do_query($db, 'select column from table'); 
```

`$myArray`然后将填充您的查询结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:57:25.067

这是一个半答案。以下单个函数可代替这两个函数。

```
function query_db($database, $new_query) {
    $sqli = new mysqli('host', $database, 'password', $database);
    $sqli->set_charset("utf8");

    global $result;
    if($result = $sqli->query($new_query)){
        return $result;
    }
} 
```

通过添加`global $result`，我能够访问查询的结果，从另一个页面运行

```
query_db("username","SELECT * FROM `column`");
while($row = $result->fetch_assoc()){
    print_r($row);
} 
```

它比我没有功能时更精简，但仍然不知道。如果我在另一个函数中连接到数据库，它就不起作用。如果我尝试将`while`循环放在组合函数中，它就不起作用。我猜总比没有好。

# php - 如何在不影响使用同一单元格的公式的情况下向单元格添加符号？

> ID：13565579
> 
> 赞同：2
> 
> 时间：2012-11-26T13:12:20.123
> 
> 标签：php, phpexcel

1.  我有一个单元格，我需要在其末尾添加符号“%”，仅用于显示。该单元格链接到具有使用其值的公式的其他单元格。

2.  我尝试在单元格中添加“%”并在公式中使用 ABS。例如

    ```
    100 - ABS(H23)
    ```

    如果在 php 中使用 concat 之后，输出不会添加额外的单列，这将起作用。

    ```
    ...->setCellValue('H23', $number.'%');
    ```

    对细胞这样做

    ```
    '33%
    ```

1..我的标题问题还有其他解决方案吗？

2..当我将字符串连接到它时，如何使输出excel没有单引号？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:21:03.167

如果这只是为了显示，请正确设置单元格值，并像在 MS Excel 本身中一样为单元格提供 numberFormat 掩码。

```
$objPHPExcel->getActiveSheet()->setCellValue('A5', 0.33);
$objPHPExcel->getActiveSheet()->getStyle('A5')
    ->getNumberFormat()->setFormatCode(
        PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE
    ); 
```

**编辑**

为了避免 MS Excel 在使用基于百分比的格式掩码时自动乘以 100：使用字符串格式掩码：

```
'0 "%"'

$objPHPExcel->getActiveSheet()->setCellValue('A5', 0.33);
$objPHPExcel->getActiveSheet()->getStyle('A5')
    ->getNumberFormat()->setFormatCode(
        '0 "%"'
); 
```

# php - 获取已定义且不为空的数组的第一个元素

> ID：13565585
> 
> 赞同：0
> 
> 时间：2012-11-26T13:12:45.147
> 
> 标签：php, variable-assignment

我想分配一个变量，它是另一组变量中的第一个非空元素。很像 ruby​​ 中的条件赋值`||=`。例如：

```
<?php
$result = null;
$possibleValue1 = null;
// $possibleValue2 not defined
$possibleValue3 = 'value3';

if (isset($possibleValue1) && !is_null($possibleValue1)) {
    $result = $possibleValue1;
} else if (isset($possibleValue2) && !is_null($possibleValue2)) {
  $result = $possibleValue2;
} else if (isset($possibleValue3) && !is_null($possibleValue3)) {
  $result = $possibleValue3;
} 
```

有没有办法在 php 中简单地做到这一点，就像这样（如果可能，我想避免创建一个函数，而只使用 php 库中的函数）：

```
$result = firstNotNull(array($possibleValue1, $possibleValue2, $possibleValue3)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:22:23.260

我认为最短的方法是：

```
 $result = current(array_filter(array($possibleValue1, $possibleValue2, $possibleValue3))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:15:32.603

如果一切`$possibleValues`都确定：

```
$possibleValues = array($possibleValue1, $possibleValue2, ...); 
```

如果它们可能未设置：

```
$possibleValues = compact('possibleValue1', 'possibleValue2', ...); 
```

然后：

```
$result = reset(array_filter($possibleValues, function ($i) { return $i !== null; })); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:16:36.100

不知道 PHP 中有这样的函数，但为什么不自己创建呢？

```
function getFirstNotNullValue($values = array()) {
    foreach($values as $val)
        if($val) return $val;
    return false;
} 
```

# jsf - 请求范围和查看范围

> ID：13565589
> 
> 赞同：2
> 
> 时间：2012-11-26T13:12:58.143
> 
> 标签：jsf, jsf-2

> **可能重复：**
> [如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

我是 JSF 编程的新手，我需要澄清一下 bean 范围。我已经阅读了有关此论点的所有问题，但不是很清楚。我不太了解请求范围。我明白：“这是默认范围，基本上 bean 在单个 HTTP 请求中都是活动的。”

例如，假设我们要求浏览器打开一个带有表单的网页。当我们发出请求时，会创建一个请求范围 bean，生命周期开始，在渲染响应阶段之后，Java bean 被销毁。然后我们填写表格并按下按钮。这将启动另一个 HTTP 请求，对吧？

在相同的上下文中，如果一个有视图范围 bean 而不是请求范围 bean，有什么区别？创建了多少个 bean 实例？为什么将它与数据表一起使用会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:15:36.273

The request scope as all your sources including the post linked by BalusC say starts living a short while after your request hits the server, and is destroyed shortly after the last bit of the response has been send back.

Indeed, if you postback a form a new request starts and thus a new request scope. This means everything that is request scoped will be created again. So for a form that is first rendered, and then posted back once, 2 request scoped beans will be created.

The view scope lives as long as you do postbacks to the same view (page). This works by means of the hidden form parameter called `javax.faces.ViewState`. The value of this is an entry into some kind of logical Map if you use save state on server. How a JSF implementation actually resolves this is not that important here (but yes, it's mostly just a Map).

After the postback JSF is able to retrieve the exact same view scoped beans again by means of this parameter. So for a form that is first rendered, and then posted back once, 1 view scoped bean will be created.

For a datatable you will almost always want to use the view scope. The reason is that you want the data to be the same before and after a postback. If your data is 100% static and/or you don't have postbacks (your table is not in a form), you can use the request scope instead.

# css - 我的画廊中裁剪的图像，但它们堆叠在一起。我如何让它们彼此相邻？

> ID：13565593
> 
> 赞同：0
> 
> 时间：2012-11-26T13:13:13.247
> 
> 标签：css, image, html, crop

这是代码：

```
<div class="crop">
<img src="image1.jpg" alt="image1.jpg" />
<img src="image2.jpg" alt="image2.jpg" />
</div>

.crop{
float:left;
margin:2px;
overflow:hidden; /* this is important */
position:relative; /* this is important too */
width:320px;
height:240px;
}
.crop img{
position:absolute;
top:-0px;
left:-0px;
} 
```

我猜我需要在我的 CSS 中添加一些东西？我知道一个解决方案是将图像作为单独的 div 放置，如下所示：

```
<div class="crop">
<img src="image1.jpg" alt="image1.jpg" />
</div>
<div class="crop">
<img src="image2.jpg" alt="image2.jpg" />
</div> 
```

但是我的画廊中有下一个/上一个箭头，所以我需要图像在同一个 div 中，否则箭头将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:16:17.240

我认为它们出现在同一个地方的原因是因为它们共享同一个 css 类，只是用不同的上/左坐标来命名它们。

# c++ - 使用常量数据成员或引用成员移动类的 ctor

> ID：13565594
> 
> 赞同：6
> 
> 时间：2012-11-26T13:13:14.760
> 
> 标签：c++, constructor, c++11, move-semantics

我在理解何时以及是否调用移动构造函数或移动赋值运算符时遇到了一些问题，特别是在具有常量数据成员的类的上下文中。考虑班级

```
template<typename T> class A {
  const*T const P ;   // constant data member
  explicit A(const*T p) : P(p) { std::cerr<<" ctor: P="<<P<<'\n'; }
  void test() const { std::cerr" test: P="<<P<<'\n'; }
  // move and copy constructors and assignment operators here
}; 
```

和测试程序

```
class B {
  int X[100];
  A<B> get_a() const { return A<B>(this); }
};

int main() {
  B b;
  A<B> a = b.get_a();   // which operator/ctor is used for '=' here?
  a.test();
} 
```

那么编译的结果会有所不同，具体取决于为 class 中的 move 构造函数和 move 赋值运算符提供的定义`A<>`，但也取决于编译器。

**1**在类中没有任何进一步声明`A<>`（如上），g++ （4.7.0）和 icpc （13.0.1）都可以正常编译（使用 option `-std=c++11`）并产生预期的输出

```
ctor: P=0x7fffffffd480
test: P=0x7fffffffd480 
```

**2**如果我声明

```
A&A::operator=(A&&) = delete;
A&A::operator=(const A&) = delete; 
```

（鉴于必须初始化初始化列表的常量数据成员，这似乎是明智的），但不提供任何进一步的 ctor，g++ 编译失败，但 icpc 没问题。如果另外我定义了一个（或两个）

```
A::A(A&&) = default;
A::A(const A&) = default; 
```

两个编译器都很高兴。但是，g++ 对这种组合并不满意

```
A::A(A&&) = delete;
A::A(const A&) = default; 
```

而icpc很高兴。

**3如果我玩与****2**中相同的游戏，除了`A::A(A&&) = default;`替换为

```
A::A(A&&a) : P(a.P) { std::cerr<<" move ctor: P="<<P<<'\n'; } // never called? 
```

（和 等效`A::A(const A&)`），结果完全相同，特别是这些显式移动和复制 ctor 不会生成*任何输出。*

那么哪个运算符用于`=`in `main()`？（为什么最后一次测试没有输出？）

`A<>`既然有一个常量数据成员（如果我用 替换成员，结果是相同的`const*T const P;`），为什么这里完全允许这个操作`const T&R`？

最后，在 g++ 和 icpc 的不同行为的情况下，如果有的话，哪个是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:26:55.000

```
A<B> a = b.get_a(); 
```

不是赋值，而是从右值初始化`a`。此语法在 C++0x 下应该失败，如果

1.  移动构造函数被删除，
2.  声明了移动构造函数`explicit`，
3.  复制构造函数被删除并且没有定义移动构造函数，
4.  没有定义移动构造函数，同时定义或删除了移动赋值。

复制赋值运算符的声明或删除不应有任何影响。

更正：与复制构造函数（即使提供了用户定义的复制赋值运算符也会合成）不同，如果定义了用户定义的移动赋值，编译器不会合成移动构造函数。因此，上面的列表应该修改 4（我现在已经这样做了）。

因此，在我看来，

*   在问题的 [1] 中，两个编译器的行为都正确，
*   在 [2]/1 中，gcc 行为正确（移动赋值阻止生成移动构造函数），icpc 错误，
*   在 [2]/2 中，两个编译器都是正确的，
*   在 [2]/3 中，gcc 是正确的，因为移动构造函数被显式删除；icpc错了，
*   [3] 对我来说是个谜。你确定你是对的吗？

# jquery - 我可以强制 iframe 使用 css 或 jQuery 显示页面的某些部分吗

> ID：13565597
> 
> 赞同：0
> 
> 时间：2012-11-26T13:13:25.870
> 
> 标签：jquery, html, css

我想显示来自其中一个网站的视频，因为我无法使用它，但我使用 iframe 和一些如何仅显示 iframe 的视频部分。

```
<iframe src="http://www.dmi.ae/live.asp?lang=en&ChannelID=2" width="650" height="476" >
</iframe> 
```

[jsFiddle](http://jsfiddle.net/VjatJ/1/)上的示例

我不确定如何使用 jQuery 仅显示嵌入了视频的 DIV 包装器

`<div class="floatFirst omega_t3">`或者只要`css`我们可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:26:17.193

`ConnorRoberts`与他的解决方案社交媒体插件浮动中`div`提供的解决方案相比，我的解决方案符合我的[要求](http://jsfiddle.net/VjatJ/4/)

```
#my-div
{
    width    : 650px;
    height   : 500px;
    overflow : hidden;
    position : relative;
}

#my-iframe
{
    position : absolute;
    top      : -320px;
    left     : -150px;
    width    : 1280px;
    height   : 1200px;
}

<div id="my-div">
<iframe id="my-iframe"  src="http://www.dmi.ae/live.asp?lang=en&ChannelID=2" width="650" height="476" scrolling="no"  >
</iframe>

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:34:35.827

虽然这不是一个理想的解决方案......

我有一个剧本并想出了这个：http: [//jsfiddle.net/XrdRH/](http://jsfiddle.net/XrdRH/)它仍然需要一些改进来获得正确的距离，除了改变它所需要的所有东西都是改变偏移量。

```
top:-303px; left: 10px; 
```

使用的整个代码是（需要提交）：

```
<iframe src="http://www.dmi.ae/live.asp?lang=en&ChannelID=2" width="680" height="855" style="position:absolute; top:-303px; left: 10px; overflow: hidden;"> 
```

你应该寻找一个更好的解决方案，但这只是工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:15:32.340

您可以轻松地做到这一点，条件是您显示的页面（来自另一个域）发送时带有允许您的来源（或任何来源）的[CORS 标头。](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

```
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
        if (httpRequest.status === 200) {
            $content = $(httpRequest.responseText);
            $(iframeId).html($content.find('.floatFirst.omega_t3'));
        }
    }
}
httpRequest.open('GET', 'http://www.dmi.ae/live.asp?lang=en&ChannelID=2');
httpRequest.send(); 
```

有关如何设置 CORS 标头的更多信息，请参阅[http://enable-cors.org/](http://enable-cors.org/)

# java - 如何使用 SWT 应用程序发布 XulRunner？

> ID：13565602
> 
> 赞同：1
> 
> 时间：2012-11-26T13:13:41.167
> 
> 标签：java, browser, swt, mozilla, xulrunner

我需要使用我的 SWT 应用程序发布 XulRunner 的特定版本 (1.8.1.3)。我目前的计划是检测当前平台并将XulRunner下载到该平台的app数据路径。没问题，但是我应该将 XulRunnerPath 属性设置为哪个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:09:34.520

确保将其包含在 build.properties 中。我建议您为 SWT 创建一个片段，就像 SWT 为每个平台所做的那样。您需要将系统属性设置`org.eclipse.swt.browser.XULRunnerPath`为 dll。请参阅

```
org.eclipse.swt.browser.Mozilla
static void LoadLibraries () {---} 
```

片段： [http ://wiki.eclipse.org/FAQ_What_is_a_plug-in_fragment%3F](http://wiki.eclipse.org/FAQ_What_is_a_plug-in_fragment%3F)

# java - scala中的Java类反射

> ID：13565604
> 
> 赞同：0
> 
> 时间：2012-11-26T13:13:45.040
> 
> 标签：java, scala, reflection

我正在尝试在 scala 上使用 java 的反射 API。我有一个使用 ClassLoader 从字节码加载的 KDTree 类。这是它的方法：

```
public class KDTree
{
public KDTree(int k)
public void insert(double[] key, Object value) throws Exception
public Object[] range(double[] lowk, double[] uppk) throws Exception
} 
```

这是我的包装 scala 类：

```
class KDTree( dimentions: Int )
    //wrapper!
    {
    private val kd= Loader.loadClass("KDTree")
    private val constructor= kd.getConstructor(java.lang.Class.forName("java.lang.Integer"))
    val wrapped= constructor.newInstance("1")
    def insert( key:Array[Double], element:Object)=
        kd.getDeclaredMethod("insert", classOf[Array[Double]])
            .invoke(key, element)
    def range( lowkey:Array[Double], highkey:Array[Double])=
        kd.getDeclaredMethod("range", classOf[Array[Double]])
            .invoke(lowkey, highkey)
    } 
```

当我尝试初始化时出现错误：

```
java.lang.NoSuchMethodException: KDTree.<init>(java.lang.Integer) 
```

然而，构造函数的唯一参数确实是一个整数！

另外，我不能简单地做`java.lang.Integer.class`，因为 scala 抱怨语法：`error: identifier expected but 'class' found.`

有没有人有任何提示？

**编辑** 这是我完成的代码，以防有人使用它：

```
class KDTreeWrapper[T]( dimentions: Int )
{
private val kd= Loader.loadClass("KDTree")
private val constructor= kd.getConstructor(classOf[Int])
private val wrapped= constructor.newInstance(dimentions:java.lang.Integer)
    .asInstanceOf[Object]
private val insert_method= kd.
    getMethod("insert", classOf[Array[Double]], classOf[Object])
private val range_method= 
    kd.getMethod("range", classOf[Array[Double]], classOf[Array[Double]])
def insert( key:Iterable[Double], element:T)=
    insert_method.invoke(wrapped, key.toArray, element.
        asInstanceOf[Object])
def range( lowkey:Iterable[Double], highkey:Iterable[Double]):Array[T]=
    range_method.invoke(wrapped, lowkey.toArray, highkey.toArray).
        asInstanceOf[Array[T]]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:21:14.680

您的问题是您尝试使用类型参数加载构造函数`java.lang.Integer`。试试看`int.class`。

写起来也更短`kd.getConstructor(int.class)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T21:30:25.087

我认为我的示例要简单得多，但这可能是因为我编写了它：

```
class Config {
  val c = "some config"
}

class Moo(c: Config) {
  val x = "yow!"
}

class Loo(c: Config)  extends Moo(c) {
  override val x = c.c + " yodel!"
}

object CallMe {
  def main(args: Array[String]) {
    val cn = new Config

    // val m: Moo = new Loo(cn)

    val c = Class.forName("Loo")
    val ars = c.getConstructor(classOf[Config])
    val m: Moo = ars.newInstance(cn).asInstanceOf[Moo]

    println(m.x)
  }
} 
```

打印出来

```
some config yodel! 
```

# jsf-2 - a4j:poll 调用页面上每个 ui:repeat 的 value 方法

> ID：13565605
> 
> 赞同：2
> 
> 时间：2012-11-26T13:13:45.853
> 
> 标签：jsf-2, richfaces, java-ee-6

我的 pageTemplate 中有一个 a4j:poll，它只是重新呈现一个显示用户未读消息数量的区域。

问题是，页面上 ui:repeat 的每个 value-Method 都会被调用。它不是重新渲染，只是调用了方法，但 ui:repeat 永远不会重新渲染。

我模板中的 a4j:poll 方法：

```
<h:form id="msg_notif_rep">
    <a4j:region>
        <a4j:poll interval="5000" render="msg_notif" limitRender="true" enabled="false"/>
    </a4j:region>
</h:form> 
```

重新渲染的区域位于插入到模板中的 menuPage 中：

```
<h:panelGroup layout="block" id="msg_notif">
    <h:panelGroup layout="block" styleClass="header_message_notification" rendered="#{generalServices.getNumberOfUnreadMessagesForCompany(login.currentCompany.id) > 0}">
        <h:panelGroup layout="block" styleClass="header_notification_image">
            <ui:insert name="notification_img"></ui:insert>
        </h:panelGroup>
        <h:panelGroup layout="block" styleClass="header_notification_number">
            <h:outputText value="#{generalServices.getNumberOfUnreadMessagesForCompany(login.currentCompany.id)}" />
        </h:panelGroup>
    </h:panelGroup>
</h:panelGroup> 
```

现在，使用 a4j:poll 所在模板的 JSF-Page 中的每个 value-Method ui:repeat 将每 5 秒调用一次，但 ui:repeat 永远不会重新渲染。

例如：

```
<h:panelGroup layout="block" rendered="#{!messagesCompany.showSingleConv}" styleClass="message_overview_cont" id="conv_overview">
    <ui:repeat value="#{messagesCompany.allConvos}" var="c">
        <tb:conversationOverviewCompany conv="#{c}" isTibConv="#{c.tibMessage}" 
                        containerID="#{rich:clientId('cont')}, #{rich:clientId('msg_notif')}, #{rich:clientId('msg_notif_rep')}" />
    </ui:repeat>
</h:panelGroup> 
```

用 a4j:repeat 替换 ui:repeat 不会改变行为，删除 ui:repeat 中的所有内容也无济于事。不调用各种其他方法（a4j:commandLink、getter-Methods for h:outputText ...），只调用 ui:repeat 的 value-Method。

有没有办法阻止这种行为？

# android - WebView中页面可见部分的截图

> ID：13565608
> 
> 赞同：2
> 
> 时间：2012-11-26T13:14:08.677
> 
> 标签：android, android-webview, android-screen

在我的应用程序中有一个 WebView 小部件，它打开一个大页面。如何在 WebView 中捕获页面的可见部分？`capturePicture()`不适合它...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T06:49:19.007

```
public static Bitmap getBitmapForVisibleRegion(WebView webview) {
    Bitmap returnedBitmap = null;
    webview.setDrawingCacheEnabled(true);
    returnBitmap = Bitmap.createBitmap(webview.getDrawingCache());
    webview.setDrawingCacheEnabled(false);
    return returnedBitmap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:26:09.180

将您的 webView 保存在位图下。然后将位图保存在 SD 卡上。

使用它从 webView 获取您的位图：

```
public static Bitmap getBitmapFromView(View view) {
        Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(returnedBitmap);
        Drawable bgDrawable = view.getBackground();
        if (bgDrawable!=null) 
            bgDrawable.draw(canvas);
        else 
            canvas.drawColor(Color.TRANSPARENT);
        view.draw(canvas);
        return returnedBitmap;
    } 
```

现在只需将其保存在 SD 上即可

# html - DIV 填充元素为垂直

> ID：13565609
> 
> 赞同：0
> 
> 时间：2012-11-26T13:14:09.457
> 
> 标签：html, css

我想将跨度填充为垂直而不是水平的

```
<div>
        <span>1</span>
        <span>2</span>
        <span>3</span>
    </div>

expected result
    1
    2
    3 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:16:00.220

创建 CSS 规则。

```
span {
display:block;
} 
```

跨度是内联元素，因此它们将彼此相邻流动。通过将它们更改为块元素，它们将相互堆叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:16:42.337

您可以在每个标签`<br />`的末尾添加一个`</span>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:16:58.583

使用 CSS 来设置`display: block`. 例如：

```
<div id="myDiv">
    <span>1</span>
    <span>2</span>
    ...
</div> 
```

和CSS：

```
div#myDiv span {
    display: block;
} 
```

或者（可能更合适），只需`<span>`用 div 替换元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:24:04.423

鉴于以下标记，我能想到三个选项：

```
<div id="block">
    <span>1</span>
    <span>2</span>
    <span>3</span>
</div>

<div id="listItem">
    <span>1</span>
    <span>2</span>
    <span>3</span>
</div>

<div id="clearLeft">
    <span>1</span>
    <span>2</span>
    <span>3</span>
</div> 
```

以下 CSS*全部*（可能）执行您想要的操作：

```
div {
    width: 50%;
    margin: 0 auto 1em auto;
    border: 2px solid #000;
    overflow: hidden; 
}

span {
    background-color: #ffa;
    border-bottom: 2px solid #000;
}

#block span {
    display: block;
}

#listItem {
    display: list; /* just for...(pseudo-semantic) correctness, I guess */
    overflow: visible; /* to show the default list-markers */
}

#listItem span {
    display: list-item;
}

#clearLeft {
    overflow: hidden; /* to wrap the div borders around the
                         floated content */
}

#clearLeft span {
    float: left;
    clear: left;
}
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fs8xT/3/)。

# javascript - 如何在警告框中以红色显示字体文本？

> ID：13565612
> 
> 赞同：0
> 
> 时间：2012-11-26T13:14:41.437
> 
> 标签：javascript, alert

> **可能重复：**
> [如何更改警告框的样式](https://stackoverflow.com/questions/7853130/how-to-change-the-style-of-alert-box)

我有一个要求，我需要在红色警报框中显示字体颜色......请帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:19:11.810

无法设置普通警报框的样式。您需要其他实现（例如 jQuery 插件）。

您绝对无法访问警报框，唯一可以修改的是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:17:20.383

我认为唯一的方法是使用 jQuery（或其他库的）插件。或者自己写。

# c++ - Win7 中的 Eclipse CDT (Juno)：在 PATH 中找不到 g++、iostream 未解析和其他有趣的东西

> ID：13565614
> 
> 赞同：0
> 
> 时间：2012-11-26T13:14:46.743
> 
> 标签：c++, eclipse, windows-7, g++, eclipse-cdt

我绝望地来到这里，你们是我最后的希望。

从昨天开始，我一直在标题中遇到问题，而且我一生都找不到问题所在。

由于 Eclipse 无法找到 g++ 编译器，因此无法构建简单的 hello world 程序。我设法在 Project->Properties->C++ BuildEnvironment 中找到了 PATH 变量，它设置为`C:\Users\Dimitris\Documents\eclipseCPP\eclipse;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\Windows Live\Shared;D:\Users\Dimitris\AppData\Local\Photran\MinGW\bin;C:\Program Files (x86)\VDownloader;E:\Program Files\VDownloader;E:\Program Files (x86)\FAHClient` 显然，那里有问题。

对于“未解决的 iostream”问题，我尝试在 Project->Properties->C/C++ General->Paths and Symbols->Include 选项卡中设置包含路径，然后添加整个 MinGW 文件系统，但无济于事。令人惊讶的是，添加一个 MinGW 的子树——即最级别的 iostream 被管理——使 Eclipse 可以看到 iostream，尽管程序仍然无法理解 cout 或 std。我已经安装了 MinGW、Cygwin 和 cygnus。

正如我之前所说，该程序是一个简单的 hello world。它不会建立。

```
#include <iostream>
using namespace std;

int main() 
{
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:23:35.893

你确定你`g++.exe`的PATH中有吗？（我看到你有`D:\Users\Dimitris\AppData\Local\Photran\MinGW\bin`你的路径。那里有一个`g++.exe`吗？）

如果您转到命令提示符 ( `cmd.exe`) 并键入`g++ -v` `enter`它是否找到 gcc 并打印出版本？

另一件事——你是如何创建你的项目的？

如果您选择`File -> New -> C++ project -> Hello World`，并且您的 gcc 编译器在您的路径中，那么您应该很高兴。

`Hello world`这是使用上述方法创建的一个简单项目的输出

> ****构建项目 foobar 的配置调试****
> 
> 做所有
> 
> 构建文件：../src/foobar.cpp
> 
> 调用：GCC C++ 编译器
> 
> g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/foobar.d" -MT"src/foobar.d" -o "src/foobar.o" "../ src/foobar.cpp"
> 
> 完成的建筑：../src/foobar.cpp
> 
> 构建目标：foobar 调用：GCC C++ Linker g++ -o "foobar" ./src/foobar.o
> 
> 完成的建筑目标：foobar
> 
> ****构建完成****

# javascript - 我们可以通过 JavaScript 在浏览器（Chrome 或 FireFox）中自动安装插件吗

> ID：13565615
> 
> 赞同：0
> 
> 时间：2012-11-26T13:14:47.490
> 
> 标签：javascript, plugins

我只是想知道我们是否可以通过 JavaScript 在客户端系统上自动安装插件而不要求用户安装它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:17:03.033

不，那会很可怕，你不觉得吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:16:24.650

不，这是浏览器的安全功能，需要用户交互。如果可以不问安装就可以做非常邪恶的事情！

# android - Android 操作栏微调器文本颜色

> ID：13565616
> 
> 赞同：1
> 
> 时间：2012-11-26T13:14:48.053
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 并想更改操作栏导航微调器中文本的颜色。有人可以提供执行此操作所需的 xml 示例吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:30:27.183

我刚刚结束了使用带有白色文本的文本视图的自定义微调器项目布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:gravity="center_vertical"
          android:paddingLeft="10dp"
          android:textSize="18sp"
          android:textColor="#FFFFFF" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:34:54.090

尝试这个

```
<style name="YourTheme" parent="YourParentTheme">
    <item name="android:spinnerDropDownItemStyle">@style/YourCustomDropDownItemStyle</item>
</style> 
```

现在，为您的样式设置 textappearance：

```
<style name="YourCustomDropDownItemStyle" parent="Widget.Holo.DropDownItem.Spinner">
    <item name="android:textAppearance">@style/YourCustomDropDownItemTextStyle</item>
</style> 
```

在您的自定义文本外观中，您可以设置文本详细信息：

```
<style name="YourCustomDropDownItemTextStyle" parent="Widget">
    <item name="android:textColor">@color/white</item>
    <!-- Here you can set the color and other text attributes -->
</style> 
```

[这里](https://stackoverflow.com/questions/12395381/android-actionbar-navigation-spinner-text-color)的来源和[这里](https://stackoverflow.com/a/12502759/1412308)的相同问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-27T20:31:41.567

只是为了添加答案，我需要两个资源，因为操作栏需要白色，但下拉需要标准黑色

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
 getActivity().getActionBar().getThemedContext(),
                        R.layout.spinner_custom_item, names);

dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:52:04.040

检查这个。

在 res/values/themes.xml 下

```
<style name="MY_THEME" parent="android:Theme">
  <item name="android:spinnerStyle">@style/SpinnerSelector</item>
</style> 
```

在 res/values/styles.xml 下

```
<resources>
<style name="SpinnerSelector">
    <item name="android:background">@drawable/spinner_selector</item>
    <item name="android:clickable">true</item>
</style> 
```

在 res/drawable/spinner_selector.xml 下

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/btn_dropdown_normal" />
<item android:state_window_focused="false" android:state_enabled="false"
    android:drawable="@drawable/btn_dropdown_disabled" android:text="#FFFFFF"/>
<item android:state_pressed="true"       android:drawable="@drawable/btn_dropdown_pressed" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/btn_dropdown_selected" />
<item android:state_enabled="true"     android:drawable="@drawable/btn_dropdown_normal" />
<item android:state_focused="true"     android:drawable="@drawable/btn_dropdown_disabled"  android:text="#FFFFFF"/>
<item android:drawable="@drawable/btn_dropdown_disabled" />

</selector> 
```

在活动中，

```
Spinner mSpnrTranscationType = new Spinner(this);
ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
            this, R.array.transaction_type_list,
                R.layout.spinner_item_white);
adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
mSpnrTranscationType.setAdapter(adapter2); 
```

在 res/layout/spinner_item_white.xml 下，

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:ellipsize="marquee"
android:singleLine="true"
android:textColor="@color/white" /> 
```

# php - mysql 1142 错误代码

> ID：13565620
> 
> 赞同：0
> 
> 时间：2012-11-26T13:15:04.247
> 
> 标签：php, mysql

我一直在阅读教程。我将以下代码复制并粘贴到 mysql 数据库中：

```
CREATE TABLE `databasename`.`users` (
  `id` INT(11) NOT NULL AUTO_INCREMENT, 
  `username` VARCHAR(300) NOT NULL, 
  `password` VARCHAR(300) NOT NULL, 
  PRIMARY KEY (`id`)
) ENGINE = MyISAM; 
```

但是，我收到此错误：

> 1142 - 为表 'users' 拒绝用户 'me'@'localhost' 的 CREATE 命令

在 mysql 数据库中，我已授予所有权限。我对 PHP 代码一无所知。所以我无法弄清楚问题是什么。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:19:29.690

在您的安装中没有`databasename` 使用该名称运行的数据库。创建数据库或验证您没有错字。

顺便说一句，您不应该以纯文本形式存储密码。这就是它的样子。生成一个加盐哈希并存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T14:51:57.070

问题是您没有为用户 me@localhost 分配权限创意控制。要解决此问题，请转到 phpmyadmin，单击 ongler 权限并在用户框中创建权限 me@localhost ..

# c++ - 如何将 BOOST_FUSION_ADAPT_STRUCT 与子结构一起使用？

> ID：13565622
> 
> 赞同：4
> 
> 时间：2012-11-26T13:15:08.380
> 
> 标签：c++, boost-spirit, boost-fusion

例如，假设我有以下结构/子结构定义：

```
struct address_rec
{
  std::string  m_street;
  std::string  m_state;
  unsigned     m_zip;
};

struct employee_rec
{
  std::string  m_name;
  address_rec  m_address;
}; 
```

我应该如何`BOOST_FUSION_ADAPT_STRUCT`使用`employee_rec`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:33:40.947

调整这两种结构，它也有助于将您的语法分解为每种结构类型，（地址规则和包含地址规则的员工规则）

```
struct address_rec
{
  std::string  m_street;
  std::string  m_state;
  unsigned     m_zip;
};

BOOST_FUSION_ADAPT_STRUCT(
    ::address_rec,
    (std::string, m_street)
    (std::string, m_state)
    (unsigned, m_zip)
)

struct employee_rec
{
  std::string  m_name;
  address_rec  m_address;
};

BOOST_FUSION_ADAPT_STRUCT(
    ::employee_rec,
    (std::string, m_name)
    (address_rec, m_address)
) 
```

# ruby-on-rails-3 - Rails 3 使用 x_sendfile 流式传输多个图像在 Tomcat 下挂起

> ID：13565623
> 
> 赞同：1
> 
> 时间：2012-11-26T13:15:09.770
> 
> 标签：ruby-on-rails-3, image, tomcat, jruby, warbler

我在 Rails 3.x 上的 JRuby 中有一个小应用程序，它需要返回存储在公用文件夹之外的文件系统中的用户图像。我认为使用单独的控制器来响应这些请求将是检索它们的最佳方式。它适用于 2 或 3 张图像，但在显示超过 6 或 7 张图像的页面上，它返回 5 左右然后停止。其余的图像永远不会出现。我在某处读到它可能无法正确关闭响应，但老实说，我不知道这意味着什么或如何解决它。该应用程序在 webrick 下运行良好，但是当作为 WAR 文件（由 warbler 创建）部署到 Tomcat 时，它会表现出这种行为。就像 Tomcat 无法处理所有同时请求一样。在返回前几张图像后，浏览器将等待并旋转几分钟等待更多图像，然后放弃。如果我点击“页面停止加载”按钮，我发现我无法导航到另一个页面，就像 Tomcat 仍然被捆绑一样。

在 routes.rb 我有：

```
match '/serve_image/:account/:user/:file' => 'images#serve' 
```

我的图像控制器代码非常简单：

```
class ImagesController < ApplicationController
  def serve

path = "#{Rails.application.config.cir}/#{params[:account]}/#{params[:user]}/#{params[:file]}"

send_file( path,
  :disposition => 'inline',
  :type => 'image/jpeg',
  :x_sendfile => true )
end
end 
```

在 erb 文件中调用它：

```
 <img class="porto_image" alt="image" 
             src="<%=porto_image.image_filename.html_safe%>"
        /> 
```

porto_image 相关代码：

```
def image_filename
 ret = "#{Rails.application.config.cir_web_prefix}serve_image/#{account}/#{user}/#{self.image_file}"
 ret
end 
```

那么，知道为什么这只适用于几个图像，但当我从同一页面向它抛出 10-20 个图像调用时，它会落在它的脸上吗？

非常感谢任何帮助，这让我感到困惑和受阻。

# c++ - 为什么我的值总是焦距小的 NaN？

> ID：13565625
> 
> 赞同：0
> 
> 时间：2012-11-26T13:15:10.123
> 
> 标签：c++, opencv, nan

每当我在 openCv Posit 函数中使用我的相机焦距时，我都会得到所有值的 NaN，但是当我使用更高的值时，我没有这个错误（但数字不是真的）。我有一个金字塔作为模型。1 个平面中的 3 个点和上方中心的 1 个点。任何人都知道如何处理这个？或者一些好的链接？

```
int depth = -18; 

//create the model points 
std::vector<CvPoint3D32f> modelPoints; 
modelPoints.push_back(cvPoint3D32f(  0.0f,   0.0f, 0.0f));  //(the first must be 0,0,0) middle center diod 
modelPoints.push_back(cvPoint3D32f(-18.0f, -30.0f, depth)); //bottom left diode
modelPoints.push_back(cvPoint3D32f( 18.0f, -30.0f, depth)); //bottom right diode
modelPoints.push_back(cvPoint3D32f( 0.0f,  30.0f, depth)); //top center diode

system("cls");
//create the image points
std::vector<CvPoint2D32f> srcImagePoints;
cout << "Source Image Points:" << endl;
for( size_t i = 0; i < circles.size(); i++ )
{
    cout << "x: " << cvRound(circles[i][0]) << " y: " << cvRound(circles[i][1]) << endl;
    //228, 278
    //291, 346 (Pixel coordinates of the points on the image)
    //371, 346
    //228, 206
    srcImagePoints.push_back( cvPoint2D32f(cvRound(circles[i][0]), cvRound(circles[i][1])) );
}

cout << endl;

//create the POSIT object with the model points 
CvPOSITObject* positObject = cvCreatePOSITObject( &modelPoints[0], (int)modelPoints.size() ); 

//calculate the orientation 
float* rotation_matrix = new float[9]; 
float* translation_vector = new float[3]; 

CvTermCriteria criteria = cvTermCriteria(CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 100, 1.0e-4f); 
double FOCAL_LENGTH = 16; //16.0; //760.0; 
cvPOSIT( positObject, &srcImagePoints[0], FOCAL_LENGTH, criteria, rotation_matrix, translation_vector ); 

//calculate rotation angles 
double beta  = atan2((double)(-rotation_matrix[2]), (double)(sqrt(pow(rotation_matrix[0], 2) + pow(rotation_matrix[3], 2)))); 
double alpha = atan2((rotation_matrix[3]/cos(beta)),(rotation_matrix[0]/cos(beta))); 
double gamma = atan2((rotation_matrix[7]/cos(beta)),(rotation_matrix[8]/cos(beta))); 
```

# css - css：标题流体高度但内容可滚动

> ID：13565628
> 
> 赞同：0
> 
> 时间：2012-11-26T13:15:17.007
> 
> 标签：css, position

我正在尝试为此找到 css 解决方案。我的页面顶部有一个列表菜单，下面是一个包含内容的 div。内容 div 应始终具有 100% 的剩余视口高度。浏览器滚动条应该被隐藏，内容 div 应该有滚动条。直到这里没有问题。为此，我给出了内容 div 位置：绝对值和最高值。

我知道的问题是，如果用户调整浏览器的大小，菜单会换行，并且菜单会与内容重叠，因为内容有一个固定的“顶部”值。

一种解决方案是在浏览器调整大小时读取菜单 div 的高度，然后设置内容 div 的位置。但我喜欢避免使用js。我的问题是，我可以只用 css 做到这一点吗？

请在下面找到一个示例。

干杯，

托尼

```
<!DOCTYPE html>
<html lang="en">
<head class="html5">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>test</title>

<style>
html, body {
    overflow: hidden;
    margin: 0;
    padding: 0;
}
#nav{
    border:1px solid black;
    overflow: auto;
    height: auto !important;
    height: 50px;
    min-height: 50px;
    }

#nav ul li{
    list-style-type: none;
    float:left;
    margin: 0 40px 0 0;
}   

#content{
    overflow:scroll;
    height:100%;
    top:50px;
    position: absolute;

}

#content p{height:1024px;border:1px solid red;margin:0;}

</style>

</head>
<body>

  <div id="nav">
    <ul>
     <li><a href="#">Menu Item</a></li>
      <li><a href="#">Menu Item</a></li>
       <li><a href="#">Menu Item</a></li>
        <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
          <li><a href="#">Menu Item</a></li>
           <li><a href="#">Menu Item</a></li>
     </ul>
   </div>

  <div id="content">
    <p class="article">here goes the content</p>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:41:15.233

插入 div`nav`并`content`在一个 div 内，`container`：

```
<div id="container">
   <div id="nav">
      <ul>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
         <li><a href="#">Menu Item</a></li>
      </ul>
   </div>
   <div id="content">
       <p class="article">here goes the content</p>
   </div>
</div>` 
```

在您的 CSS 中：

```
#container {
   width: 1024px;
   margin: 0 auto;
}
#nav {
   float: left;
   width: 100%;
   height: 250px;
}
#content{
   float: left;
   width: 100%;
} 
```

# javascript - 使图像在 div 内滚动

> ID：13565631
> 
> 赞同：0
> 
> 时间：2012-11-26T13:15:32.843
> 
> 标签：javascript, jquery, html, css

好的，我用谷歌搜索了很多，没有发现任何帮助

我在一个 div 中有一组图像，我希望它们循环滚动我是 javascript 和 Jquery 的新手，但我愿意使用它..

html很简单：

```
<div id="slideshow">
  <img src="path/to/image" />
  <img src="path/to/image" />
  more images here
</div> 
```

除了'scroll' exept fade 之外，我也对任何其他效果持开放态度，因为我已经在同一页面上使用过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:18:50.033

玩溢出！像这样

```
<div id="slideshow" style="width: 300px; height: 100px; overflow: auto">
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />v
    more images here
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:20:31.833

你可以使用**jquery carousel**或者你可以使用 jquery apis 比如**slideIn**，**slideOut**，**fadeIn**，**fadeOut**来创建你自己的动画效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:25:40.617

想想一些风格：

```
<div id="slideshow" style="overflow-y: scroll; height: **whatever**; "> 
```

# css - 将图层放置在两行上，没有偏移

> ID：13565634
> 
> 赞同：1
> 
> 时间：2012-11-26T13:15:46.683
> 
> 标签：css, html

如何分层徽标以使其与第二行重叠而不向下移动页面？我将 Foundation 框架[http://foundation.zurb.com/](http://foundation.zurb.com/)用于动态站点。Foundation 使用行，我想设置两行：

*   第一行：包含一个标志
*   第二行：包含一个图像（确切地说是一个滑块）

我希望第一行的徽标与第二行重叠，但是当我尝试这样做时，它会在顶部创建一个“填充”或空间，我希望徽标紧贴屏幕顶部。

这是我用于徽标的 CSS：

```
.logo { 
    position: relative; 
    top: 150px;
    left: 50px;
    z-index: 10;
    } 
```

基金会“网格”的CSS：

```
.row { width: 940px; max-width: 100%; min-width: 768px; margin: 0 auto; }
.row .row { width: auto; max-width: none; min-width: 0; margin: 0 0px; }
.row.collapse .column, .row.collapse .columns { padding: 5px; }
.row .row { width: auto; max-width: none; min-width: 0; margin: 0 -15px; }
.row .row.collapse { margin: 0; }

.column, .columns { float: left; min-height: 1px; padding: 0 3px; position: relative; }
.column.centered, .columns.centered { float: none; margin: 0 auto; } 
```

我试图在不“破坏”动态网格的情况下做到这一点。

需要注意的一点是，第二行是“滑块”，CSS 提供以下内容作为“包装器”，但不确定如何使用它：

```
.orbit-wrapper { width: 1px; height: 1px; position: relative; } 
```

最后，这是 HTML：

```
<div class="row">
   <div class="twelve columns">

   <img src="images/logo-200.png"; class="logo";>
</div> 

<div class="row">
<div class="twelve columns">    
  <div id="slider">
    <img src="images/Main.png" =[img 1]" />
    <img src="images/Main-2.png" =[img 2]" />
     <img src="images/Main-4.png" =[img 3]" />
      <img src="images/Main-5.png" =[img 4]" />
    </div>
  </div>
</div> 
```

解决方案：

终于弄明白了：关键是将我试图叠加的图像放在与滑块同一行的“滑块”顶部，然后使用 float:left。这是最终的 HTML：

```
<div class="row">
<div class="twelve columns"> 
<div style="float:left;">
<img src="images/logo-200.png"; class="logo";>
</div>
  <div id="slider">
    <img src="images/Main-01.png" =[img 1]" />
    <img src="images/Main-01.png" =[img 2]" />
     <img src="images/Main-01.png" =[img 3]" />
      <img src="images/Main-01.png" =[img 4]" />
  </div> 
```

和CSS：

```
.logo { 
position: absolute; 
float: left;
left: 20px;
top: -90px;
z-index: 10;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:37:37.017

从您的 HTML 中，目前您在 .row 中有一个 .row，如果可以，那么

```
 .orbit-wrapper // should be encapsulating your #slider 
```

如果这不行，你应该关闭第一个 .row div，然后通过在它们之间添加一个 neigboor ~ 来更正 css 选择器：

```
 .row ~ .row 
```

这样您就可以控制第一个和下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:25:28.920

在底部的“问题”部分添加了答案。

# c# - 'WindowsFormsApplication1.frmMain' 的部分声明不得指定不同的基类

> ID：13565639
> 
> 赞同：0
> 
> 时间：2012-11-26T13:16:09.813
> 
> 标签：c#, winforms, forms

我正在开发 WinForm 项目。在项目中，我有两个 Forms frmGeneric 和 frmMain。他们这样说：

```
namespace WindowsFormsApplication1
{
   public partial class frmGeneric
   {
   }
 }

namespace WindowsFormsApplication1
{
   partial class frmMain:frmGeneric  
   {
   }
} 
```

即frmMain 派生自frmGeneric。

在这一行：

```
partial class frmMain:frmGeneric 
```

我收到此错误：

> 'WindowsFormsApplication1.frmMain' 的部分声明不得指定不同的基类 C:...\WindowsFormsApplication1\Form1.Designer.cs

任何想法为什么我会收到此错误以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:10:05.290

看看你的`C:...\WindowsFormsApplication1\Form1.Designer.cs`班级。它包含类定义的另一部分，`frmMain`它似乎还指定了一个基类，它是另一个而不是你的`frmGeneric`.

对于部分类，您要么仅在一个部分中指定基类，要么在其他部分中必须是相同的基类。因为它仍然被编译成一个类，所以你不能从多个类继承。

出于同样的原因，您不能拥有：

```
class Form2 : Form1, Form { ... } 
```

你也不能拥有：

```
partial class Form2 : Form1 { ... } // File 1
partial class Form2 : Form { ... } // File 2 
```

确保不是这种情况，即（使用您的类名）：

```
// File 1 (Form1.cs, probably)
partial class frmMain : frmGeneric { ... }

// File 2 (Form1.designer.cs)
partial class frmMain : frmGeneric { ... } 
```

或者：

```
// File 1 (Form1.cs, probably)
partial class frmMain : frmGeneric { ... }

// File 2 (Form1.designer.cs)
partial class frmMain { ... } 
```

# c++ - C ++ cassandra客户端选择int值

> ID：13565640
> 
> 赞同：1
> 
> 时间：2012-11-26T13:16:15.463
> 
> 标签：c++, select, int, cassandra

我正在尝试选择一个整数值，但我不能这是我的代码：

```
cassandra_socket = boost::shared_ptr<TSocket>(new TSocket(host, port));
cassandra_transport = boost::shared_ptr<TFramedTransport>(new TFramedTransport(cassandra_socket));
protocol = boost::shared_ptr<TBinaryProtocol>(new TBinaryProtocol(cassandra_transport));
cassandra_client = new CassandraClient(protocol);
try {
    cassandra_transport->open();
    cassandra_client->set_keyspace("MPS");
    ColumnOrSuperColumn csc;
    ColumnPath cpath;
    cpath.column_family.assign("SubmitResposes_count");
    /* This is required - thrift 'feature' */
    cpath.__isset.column = true;
    cpath.column = "Counter";
    cassandra_client->get(csc, "1", cpath,org::apache::cassandra::ConsistencyLevel::ONE);
    cout << "Value read is '" << csc.column.value << "'..." << endl;
}
catch (NotFoundException &nf) {
    FORCE_TRACE(0, "NOT FOUND EXCEPTION ERROR: %s", nf.what());
} catch (InvalidRequestException &re) {
    FORCE_TRACE(0, "INVALID REQUEST ERROR: %s", re.why);
} catch (TException &tx) {
    FORCE_TRACE(0, "TEEXCEPTION ERROR: %s", tx.what());
} 
```

它给了我这个例外： InvalidRequest ERROR: Expected 4 or 0 byte int (1)

&这是我创建的表：

```
create table SubmitResposes_count(
    ID int primary key,
    Counter bigint); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:52:37.917

您的密钥是一个 int：

```
ID int primary key, 
```

但是您正在使用字符串键进行查询：

```
cassandra_client->get(csc, "1", cpath,org::apache::cassandra::ConsistencyLevel::ONE);
                           ^^^ 
```

Cassandra 正在尝试将您的字符串验证为 int，这导致了此异常。

# tridion - 上传图片超时

> ID：13565642
> 
> 赞同：11
> 
> 时间：2012-11-26T13:16:21.580
> 
> 标签：tridion, tridion-2011

我目前正在测试 Tridion 2011 并且在创建带有上传内容的多媒体组件（而不是外部）时遇到问题。

我填写标题、架构、多媒体类型，从我的系统中选择一个文件，然后单击保存。我收到一条`Saving item...`信息消息，然后大约 30 秒后我将收到一条`The wait operation timed out`消息。

目录中似乎没有任何错误消息`C:\Program Files (x86)\Tridion\log`。查看事件查看器，我看到以下与保存操作相关的信息

```
Unable to save Component (tcm:4-738361).
The wait operation timed out

Error Code:
0x8004033F (-2147220673)

Call stack:
System.Data.SqlClient.SqlConnection.OnError(SqlException,Boolean,Action`1)
System.Data.SqlClient.SqlInternalConnection.OnError(SqlException,Boolean,Action`1)
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject,Boolean,Boolean)
System.Data.SqlClient.TdsParser.TryRun(RunBehavior,SqlCommand,SqlDataReader,BulkCopySimpleResultSet,TdsParserStateObject,Boolean&)
System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader,RunBehavior,String)
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior,RunBehavior,Boolean,Boolean,Int32,Task&,Boolean)
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior,RunBehavior,Boolean,String,TaskCompletionSource`1,Int32,Task&,Boolean)
System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1,String,Boolean,Int32,Boolean)
System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
Tridion.ContentManager.Data.AdoNet.Sql.SqlDatabaseUtilities.SetBinaryContent(Int32,Stream)
Tridion.ContentManager.Data.AdoNet.ContentManagement.ItemDataMapper.Tridion.ContentManager.Data.ContentManagement.IItemDataMapper.SetBinaryContent(Stream,TcmUri)
Tridion.ContentManager.ContentManagement.RepositoryLocalObject.SetBinaryContent(BinaryContent)
Tridion.ContentManager.ContentManagement.Component.OnSaved(SaveEventArgs)
Tridion.ContentManager.IdentifiableObject.Save(SaveEventArgs)
Tridion.ContentManager.ContentManagement.VersionedItem.Save(Boolean)
Tridion.ContentManager.ContentManagement.VersionedItem.Save()
Tridion.ContentManager.BLFacade.ContentManagement.VersionedItemFacade.UpdateAndCheckIn(UserContext,String,Boolean,Boolean)
XMLState.Save
Component.Save 
```

[由于另一个问题](https://stackoverflow.com/questions/12316052/tridion-event-system-timeout)，我已经将 Content Manager 管理单元中的超时设置设置为高值（超过 10 分钟）。

如果有帮助的话，内容管理数据库中的`BINARIES`表是 25GB。

有任何想法吗？谢谢。

## 编辑 1

根据 Bart Koopman 的建议，我的 DBA 重建了索引，但不认为事务日志对性能有任何影响。问题仍然存在。

## 编辑 2

我刚刚找到了错误的更多细节

```
Unable to save Component (tcm:0-0-0).
Timeout expired.
The timeout period elapsed prior to completion of the operation or the server is not responding.
A database error occurred while executing Stored Procedure "EDA_ITEMS_UPDATEBINARYCONTENT".EDA_ITEMS_UPDATEBINARYCONTENT 
```

在查看此过程后，看起来以下语句可能是根本原因

```
SELECT 1 FROM BINARIES WHERE ID = @iBINARY_ID AND CONTENT IS NULL 
```

我使用@iBINARY_ID 作为-1 手动执行它，2 分钟后它仍然没有完成。我假设当我插入一个新的多媒体组件时，查询将是类似的（即 id 将不存在于表中）。

BINARIES 表当前有一个`NON-CLUSTERED`主键。也许解决方案是将其更改`CLUSTERED` 为主键？但是，我认为它是非聚集的是有原因的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T14:11:01.237

刚刚收到 SDL 客户支持的回复。显然，这是与统计信息和所选查询计划相关的已知问题。

从 SQL Server Management Studio 手动运行以下语句可以解决问题（它甚至不需要为我完成）

```
SELECT 1 FROM BINARIES WHERE ID = -1 AND CONTENT IS NULL 
```

希望这对其他人有所帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T15:16:44.370

数据库操作超时通常表示配置错误或缺乏维护。通过增加超时时间，您只是在解决问题而不是解决问题。

对于这么大的二进制表，您需要确保您有正确的数据库设置，其中的数据文件与日志文件分开（在不同的物理分区/磁盘上分开），甚至可能在多个物理分区上的多个数据文件以利用性能增益。

接下来，您需要确保每天/每小时执行标准数据库维护。诸如每小时备份和截断事务日志之类的事情将大大提高您的数据库性能（在 MS SQL Server 上，超过 1GB 的事务日志会大大降低数据库的速度，您应该始终尝试通过及时备份 / trucate 将其保持在该大小以下）。更新统计信息和重建索引也是您不应该定期忘记的事情。

# sed - 从 blkid 程序的输出中过滤 UUID 的正确工具（使用 grep、cut 或 awk 等）

> ID：13565658
> 
> 赞同：13
> 
> 时间：2012-11-26T13:17:05.400
> 
> 标签：sed, awk, grep

我想过滤 blkid 的输出以获取 UUID。

blkid 的输出看起来像

**情况1：-**

```
$ blkid
/dev/sda2: LABEL="A" UUID="4CC9-0015"
/dev/sda3: LABEL="B" UUID="70CF-169F"
/dev/sda1: LABEL=" NTFS_partition" UUID="3830C24D30C21234" 
```

在某些情况下， blkid 的输出看起来像

**案例2：-**

```
$ blkid
/dev/sda1: UUID="d7ec380e-2521-4fe5-bd8e-b7c02ce41601" TYPE="ext4" 
/dev/sda2: UUID="fc54f19a-8ec7-418b-8eca-fbc1af34e57f" TYPE="ext4" 
/dev/sda3: UUID="6f218da5-3ba3-4647-a44d-a7be19a64e7a" TYPE="swap" 
```

我想过滤掉UUID。

使用**grep**和**cut**的组合可以完成

```
/sbin/blkid | /bin/grep 'sda1' | /bin/grep -o -E 'UUID="[a-zA-Z|0-9|\-]*' | /bin/cut -c 7- 
```

我尝试使用**awk**、**grep**和**cut**如下过滤 UUID

```
$ /sbin/blkid | /bin/grep 'sda1' | /usr/bin/awk '{print $2}' | /bin/sed 's/\"//g' | cut -c 7-
7ec380e-2521-4fe5-bd8e-b7c02ce41601 
```

**上面的命令（使用 awk）不可靠，因为有时blkid**程序的输出中可能会出现一个额外的字段，例如 LABEL，如上面的输出所示。

**使用awk**创建命令可靠的最佳方法是什么？如果使用 bin 和 core utils 退出作业，请发布任何其他优雅的方法。我不想使用 perl 或 python，因为这必须在busybox上运行。

注意：-我正在使用**/dev/sda1**不能作为 args 传递的**busybox** blkid （我使用的版本不支持它），因此 grep 过滤该行。

 ****更新：-**添加了案例 2：-输出以显示不能依赖字段位置。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-29T11:42:17.287

你为什么把它弄得这么复杂？

试试这个：

```
# blkid -s UUID -o value
d7ec380e-2521-4fe5-bd8e-b7c02ce41601
fc54f19a-8ec7-418b-8eca-fbc1af34e57f
6f218da5-3ba3-4647-a44d-a7be19a64e7a 
```

或这个：

```
# blkid -s UUID -o value /dev/sda1
d7ec380e-2521-4fe5-bd8e-b7c02ce41601 
```

如果没有，请安装正确的 blkid 包：

```
sudo apt-get install util-linux
sudo yum install util-linux 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T13:26:37.670

对于所有 UUID，您可以执行以下操作：

```
$ blkid | sed -n 's/.*UUID=\"\([^\"]*\)\".*/\1/p' 
d7ec380e-2521-4fe5-bd8e-b7c02ce41601
fc54f19a-8ec7-418b-8eca-fbc1af34e57f
6f218da5-3ba3-4647-a44d-a7be19a64e7a 
```

说，仅针对特定的 sda1：

```
$ blkid | sed -n '/sda1/s/.*UUID=\"\([^\"]*\)\".*/\1/p' 
d7ec380e-2521-4fe5-bd8e-b7c02ce41601 
```

sed 命令尝试对 UUID 关键字后面的双引号内的内容进行分组，并用标记替换整行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:07:11.287

这是一个简短的`awk`解决方案：

```
blkid | awk 'BEGIN{FS="[=\"]"} {print $(NF-1)}' 
```

**输出：**

```
4CC9-0015
70CF-169F
3830C24D30C21234 
```

**解释：**

*   `BEGIN{FS="[=\"]"}`: 使用`=`and`"`作为分隔符
*   `{print $(NF-1)}`:`NF`场数; 在这里我们打印倒数第二个字段
*   这是基于 blkid 输出的一致结构：`UUID`引号位于每行的末尾。

**或者：**

```
blkid | awk 'BEGIN{FS="="} {print $NF}' | sed 's/"//g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:59:37.110

### 数据.txt

```
/dev/sda2: LABEL="A" UUID="4CC9-0015"
/dev/sda3: LABEL="B" UUID="70CF-169F"
/dev/sda1: LABEL=" NTFS_partition" UUID="3830C24D30C21234" 
```

### `awk`和`sed`组合

```
cat data.txt | awk 'BEGIN{FS="UUID";RS="\n"} {print $2}' | sed -e 's/=//'  -e 's/"//g' 
```

### 解释：

1.  将字段分隔符设置为字符串“UUID”，`$2`将给出其余输出
2.  然后使用 sed 删除`=`and`"`如图所示 where`-e`是一个开关，以便您可以在一个中提供多个 sed 命令/表达式。
3.  `"`使用结束`g`选项（即全局）删除所有出现的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-14T08:24:45.913

这个问题有一个“等”，所以我假设 python 是选项之一；）

```
#!/usr/bin/env python3

import subprocess, re, json

# get blkid output
blkid = subprocess.check_output(["blkid"]).decode('utf-8')

devices = []
for line in [x for x in blkid.split('\n') if x]:
        parameters = line.split()
        for idx, parameter in enumerate(parameters):
                if idx is 0:
                        devices.append({"DEVICE": re.sub(r':$','',parameter)})
                        continue

                key_and_value = parameter.split('=')
                devices[-1].update({
                        key_and_value[0]: re.sub(r'"','',key_and_value[1])
                })

uuids = [{dev['DEVICE']: dev['UUID']} for dev in devices if 'UUID' in dev.keys()]
print(json.dumps(uuids, indent=4, sort_keys=True)) 
```

虽然，这可能是矫枉过正，并且此脚本中缺少很多错误处理/优化 XD

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-24T13:34:48.263

我假设您在initramfs 中使用busybox，并且您正在等待带有rootfs 的例如USB 驱动器可用。

您可以使用以下 awk 脚本（busybox awk 兼容）。

```
# cat get-ruuid.awk 
BEGIN {
  ruuid=ENVIRON["RUUID"]
}

/^\/dev\/sd[a-z]/ {
  if (index($0, tolower(ruuid)) || index($0, toupper(ruuid))) {
    split($1, parts, ":")
    printf("%s\n", parts[1])
    exit(0) # Return success and stop further scanning.
  }
}

END {
  exit(1) # If we reach the end, it means RUUID was not found.
} 
```

从例如 init 脚本中按如下方式调用它；这不是最理想的方式。

```
# The UUID of your root partition
export RUUID="<put proper uuid value here>"

for x in 1, 2, 3, 4, 5 ; do
  mdev -s
  found=$(blkid | awk -f ./get-ruuid.awk)
  test -z $found || break; # If no longer zero length, break the loop.
  sleep 1
done 
```

但是，如果这是您想要使用 initramfs 的唯一原因，我会使用 'root=PARTUUID=... waitroot' Linux 内核命令行选项。检查内核文档和源代码。

使用 blkid 命令获取根分区的正确 PARTUUID（不是 UUID）。**

# iphone - 如何在导航栏上添加带有动画的广告？

> ID：13565659
> 
> 赞同：1
> 
> 时间：2012-11-26T13:17:17.630
> 
> 标签：iphone, ios, cocoa-touch, uinavigationcontroller, iad

如何在导航栏上添加带有动画的广告，例如，我有一些产品优惠广告，我需要为在同一个广告中显示产品多个优惠的文字制作动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:19:36.240

```
self.navigationItem.title=@"the title"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:20:19.927

假设 navBar 是你的导航栏，使用

```
navBar.topItem.title = @"String with your title"; 
```

请注意，navBar 应该是一个 IBOutlet。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T13:20:27.807

它应该是。

```
self.title=@"title text"; 
```

`self`应该是`UIViewController`类型

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:26:07.090

您可以设置一个`IBAction`for`UIButton`并且在此操作中您可以更改导航栏标题

```
-(IBAction)yourBtnPress:(id)sender
{
    self.navigationItem.title = @"your title";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T13:33:53.557

只需`IBOutlet`使用此方法对每个按钮进行操作

```
-(IBAction)btn1_Clicked:(id)sender
{
    self.navigationItem.title = @"ONE";// laso you can use self.title = @"ONE";
}

-(IBAction)btn2_Clicked:(id)sender
{
    self.navigationItem.title = @"TWO";
}

-(IBAction)btn3_Clicked:(id)sender
{
    self.navigationItem.title = @"THREE";
}

-(IBAction)btn4_Clicked:(id)sender
{
    self.navigationItem.title = @"FOUR";
}

-(IBAction)btn5_Clicked:(id)sender
{
    self.navigationItem.title = @"FIVE";
}

-(IBAction)btn6_Clicked:(id)sender
{
    self.navigationItem.title = @"SIX";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T13:41:23.393

使用以下代码。

```
-(IBAction)Btn1Pressed:(id)sender 
{
    self.title=@"ONE";
}

-(IBAction)Btn2Pressed:(id)sender
{
    self.title=@"TWO";
} 
```

等等..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-26T14:47:45.257

似乎每个答案都已涵盖，但我想我会以任何方式添加它。我更喜欢一个 IBAction，它将标题设置为与按钮标签相对应的数组中的一个项目。您必须为所有按钮（0 - 5）添加标签，我不确定界面生成器是否允许您将多个按钮链接到同一个 IBAction，但您始终可以通过编程方式进行！

```
- (IBAction)changeTitle:(UIButton *)sender
{
    NSArray *temp = [[NSArray alloc] initWithObjects:@"ONE",@"TWO",@"THREE",@"FOUR",@"FIVE",@"SIX", nil];
    [[self navigationItem] setTitle:[temp objectAtIndex:sender.tag]];
    temp = nil;
} 
```

# selenium - SeleniumTestCasr 的 CWebDriverTestCase

> ID：13565660
> 
> 赞同：1
> 
> 时间：2012-11-26T13:17:19.170
> 
> 标签：selenium, yii, yii-extensions

我正在尝试 Yii Selenium 单元测试。我该如何管理其中的确认框？哪种方法用于获取警报消息文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:48:07.550

PHPUnit_Extensions_SeleniumTestCase 提供

```
void assertAlertPresent()    Reports an error if no alert is present.
void assertNoAlertPresent()  Reports an error if an alert is present. 
```

为了管理警报，您可以使用 Selenium API [http://release.seleniumhq.org/selenium-core/1.0/reference.html中的方法](http://release.seleniumhq.org/selenium-core/1.0/reference.html)

```
storeAlert()
chooseCancelOnNextConfirmation()
chooseOkOnNextConfirmation() 
```

PS Selenium 测试是功能性的，而不是单元

# jquery-ui - jquery ui draggable - 如何防止拖动到文档顶部之外？

> ID：13565663
> 
> 赞同：8
> 
> 时间：2012-11-26T13:17:20.533
> 
> 标签：jquery-ui, draggable

我设置了一个可拖动的 jquery，它可以在整个文档中移动，它不包含任何内容，这是可以接受的，因为当用户拖动时，我希望他们能够拖动到页面下方（或左或右）随心所欲。

实际上，我想要的唯一限制是应该防止它们将元素拖到页面顶部之外。

**是否可以防止仅将容器的一个边缘拖出？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T12:19:11.267

您可以覆盖被拖动元素的位置。

这个小提琴是位置覆盖的一个例子：http: [//jsbin.com/ufarif/7/edit](http://jsbin.com/ufarif/7/edit)

这是一个不允许超过左边框 80 px 的示例

```
$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Do not permit to be more close than 80 px of the left border
            console.log(ui.position.left);      
            if(ui.position.left < 80)    
                ui.position.left = 80;
        });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-20T15:17:27.733

您可以使用[包含](http://jqueryui.com/demos/draggable/#option-containment)选项来防止拖动到窗口外：

```
$("#id").draggable({
    handle: tr_top,
    containment: "window"
}); 
```

# asp.net - 在重定向页面上调用按钮单击事件

> ID：13565667
> 
> 赞同：0
> 
> 时间：2012-11-26T13:17:48.020
> 
> 标签：asp.net

从外部项目页面重定向此页面时在页面加载时调用按钮单击事件不起作用，我遵循了这些步骤。

1.  创建了一个项目并添加了一个页面，并在该页面中添加了一个链接按钮及其单击事件：

    ```
     string url = "http://localhost:5934/Login.aspx";
        string UserName = "XYZ";
        string UserID = "123";
        ASCIIEncoding encoding = new ASCIIEncoding();
        string data = string.Format("UserNameFromPMS={0}&UserIDFromPMS={1}", UserName, UserID);
        byte[] bytes = encoding.GetBytes(data);
        HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(url);
        httpRequest.Method = "POST";
        httpRequest.ContentType = "application/x-www-form-urlencoded";
        httpRequest.ContentLength = bytes.Length;
        using (Stream stream = httpRequest.GetRequestStream())
        {
            stream.Write(bytes, 0, bytes.Length);
            stream.Close();
        }
        Response.Redirect("http://localhost:5934/Login.aspx"); 
    ```

2.  在页面加载时直接调用该按钮的点击事件：

    ```
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            NameValueCollection nvc = Request.Form;
            //string userName;
            if (!string.IsNullOrEmpty(nvc["UserNameFromPMS"]) && !string.IsNullOrEmpty(nvc["UserIDFromPMS"]))
            {
                if (!string.IsNullOrEmpty(nvc["UserNameFromPMS"]))
                {
                    userName = nvc["UserNameFromPMS"];
                    txtUsername.Text = nvc["UserNameFromPMS"].ToString();
                }
                if (!string.IsNullOrEmpty(nvc["UserIDFromPMS"]))
                {
                    txtPassword.Text = nvc["UserIDFromPMS"];
                }
            }
            btnLogin_OnClick(sender, e);
        }
    } 
    ```

3.  并尝试在点击事件上打开模式弹出窗口：

    ```
    protected void btnLogin_OnClick(object sender, EventArgs e)
    {
        mpeMessage.Show();
        return;
    } 
    ```

但是 Modal pop 没有打开，也`Text`没有设置文本框控件的属性。我的代码有什么问题？

# model-view-controller - Castle Windsor 解决了 MVC 区域接口的错误实现

> ID：13565672
> 
> 赞同：1
> 
> 时间：2012-11-26T13:18:21.033
> 
> 标签：model-view-controller, inversion-of-control, castle-windsor, ioc-container

我的解决方案的核心项目中有一个接口：IPersonManager，它有两个具体的实现，属于各自的项目。

在我的 Web 项目中，有一个 MVC 区域代表这两个项目，并且每个区域都有一个框架安装程序类，它将人员管理器类注册到每个区域的接口，如下所示：

```
 container.Register(AllTypes
                         .FromAssemblyNamed("MySolution.MyProject")
                               .Where(t => t.Name.EndsWith("Manager"))
                               .WithService.DefaultInterface()
                               .Configure(x => x.LifeStyle.PerWebRequest)
            ); 
```

注册后，当我在 IPersonManager 接口的内核上获取处理程序时，我得到以下信息：

```
{Castle.MicroKernel.IHandler[2]}
[0]: Model: {MySolution.Core.Interfaces.Services.IPersonManager}   
/ {MySolution.Area1.PersonManager} 

[1]: Model: {MySolution.Core.Interfaces.Services.IPersonManager} 
/ {MySolution.Area2.PersonManager} 
```

所以我可以看到两个实现都已注册。

问题是当我在网站上的Area2 时，windsor 正在解析Area1 的接口实现而不是Area2。

好像温莎只是把最先注册的那个还给我。有没有办法根据 MVC 区域取回正确的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:57:02.013

我会为此考虑一个[IHandlerSelector](http://ayende.com/blog/3633/windsor-ihandlerselector)。您可以检查当前的 HTTP 请求上下文并“帮助”windsor 决定使用哪个实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:27:00.380

接受帕特里克的建议，这是代码：

```
public class PersonManagerHandlerSelector : IHandlerSelector
{
    public bool HasOpinionAbout(string key, System.Type service)
    {
        return service == typeof (IPersonManager);
    }

    public IHandler SelectHandler(string key, System.Type service, 
                                                         IHandler[] handlers)
    {
        var dataTokens = System.Web.HttpContext.Current.Request.
                                          RequestContext.RouteData.DataTokens;
        if (dataTokens.Any())
        {
            var area = System.Web.HttpContext.Current.Request.RequestContext.
                                                   RouteData.DataTokens["area"];

            return !string.IsNullOrEmpty(area.ToString())
                       ? handlers.First(x => 
                                     x.ComponentModel.Name.Contains("." + area))
                       : handlers.First();
        }
        return handlers.First();
    }
} 
```

# git - Git：如何组织两个有共同代码的项目

> ID：13565673
> 
> 赞同：3
> 
> 时间：2012-11-26T13:18:21.367
> 
> 标签：git, tortoisegit, tortoisemerge

两个如何组织两个具有共同代码部分的项目？

我有 2 个项目具有共同的代码部分，并且不时更改。我使用 TortoiseGit。

例如

```
project 1 - master
project 2 - dev-branch. 
```

据我了解，当我在 dev-branch 中进行更改（特定 dev-branch 代码和与 master 代码相同的更改）然后将 master 与 dev-branch 合并时，master 还将获得特定的 dev-branch 代码。

我该如何解决这种情况才能得到，对于大师来说，只有大师特定的变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T21:40:53.627

1.  您必须有一个额外的存储库来存放您共有的代码。因此，在您的情况下，您总共将拥有*super-project1*、*super-project2*和一个新*的子项目*存储库。
2.  对于您希望在共享项目中的**任何**文件，您必须将它们收集到一个特殊的特殊子目录（或树）中，以便共享代码目录中不包含任何超级项目文件。
3.  严格分离后，您可以使用 Git 的子模块或[git-subtree](https://github.com/git/git/tree/master/contrib/subtree)（子树[的用例](http://psionides.eu/2010/02/04/sharing-code-between-projects-with-git-subtree/)，与您的相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:35:58.497

你可以为此使用[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)

--edit 更正链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T20:52:54.597

你甚至可以在 git repo 中拥有一个 git repo，但你最终会得到 2 个历史记录。我自己选择了这个选项，因为我总是将我的内部 git repo 更改为一个块，因为我想在更新该 repo 时更新它的单元测试。

# dependency-injection - 使用 Guice 的 @SessionScoped 和 Netty

> ID：13565675
> 
> 赞同：0
> 
> 时间：2012-11-26T13:18:40.030
> 
> 标签：dependency-injection, guice, netty

如何在基于 Netty 的 TCP 服务器中实现 @SessionScoped？Guice 手册中记录了创建[自定义范围](http://code.google.com/p/google-guice/wiki/CustomScopes)，但似乎该解决方案仅适用于基于线程而不是异步 IO 服务器。

在和之间创建*通道管道*是否足够？`scope.enter()``scope.exit()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:19:23.770

免责声明：这个答案是针对 Netty 3 的。我还没有机会尝试 Netty 4，所以我不知道下面的内容是否可以应用于较新的版本。

Netty 在网络端是异步的，但除非你明确地向 Executors 提交任务，或者通过任何其他方式更改线程，否则管道上 s 对`ChannelEvent`s的处理是同步和顺序的。`ChannelHandler`例如，如果你使用 Netty 3 并且`ExecutionHandler`在管道上有一个，范围处理程序应该在 ; 的上游`ExecutionHandler`。对于 Netty 4，请参阅 Trustin Lee 的评论。

因此，您可以在管理会话范围的管道的开头附近放置一个处理程序，例如：

```
public class ScopeHandler implements ChannelUpstreamHandler {

    @Override
    public void handleUpstream(ChannelHandlerContext ctx, ChannelEvent e) {

        if (e instanceof WriteCompletionEvent || e instanceof ExceptionEvent)
            ctx.sendUpstream(e);

        Session session = ...; // get session, presumably using e.getChannel()

        scope.enter();
        try {
            scope.seed(Key.get(Session.class), session);
            ctx.sendUpstream(e);
        }
        finally {
            scope.exit();
        }
    }

    private SessionScope scope;

} 
```

一些简短的评论：

*   您将需要过滤掉一些事件类型，尤其是`WriteCompletionEvent`在`ExceptionEvent`事件处理期间框架将放置在管道下游端的事件类型，如果不排除将导致重入问题。在我们的应用程序中，我们使用了这种处理程序，但实际上只考虑了`UpstreamMessageEvent`s。
*   try/finally 构造实际上并不是必需的，因为 Netty 会捕获任何`Throwable`s 并触发 ExceptionEvent，但这种方式感觉更惯用。

高温高压

# c# - RegEx C#获取包含至少一个数字和字母的12个字符的子字符串

> ID：13565676
> 
> 赞同：0
> 
> 时间：2012-11-26T13:18:40.613
> 
> 标签：c#, regex, string

```
String testString = "Some text F4LE8AWMF87E and again some text";
Match myMatch = Regex.Match(testString, "\b(?=[a-zA-Z]*[0-9])(?=[0-9]*[a-zA-Z])[0-9a-zA-Z]{12,}\b");
myLabel.Text = testString.Substring(myMatch.Index, myMatch.Length); 
```

myLabel 现在应该显示“F4LE8AWMF87E”，但它没有。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:29:40.670

您必须在字符串文字中转义字符“\”。

```
String testString = "Some text F4LE8AWMF87E and again some text";
Match myMatch = Regex.Match(testString, @"\b(?=[a-zA-Z]*[0-9])(?=[0-9]*[a-zA-Z])[0-9a-zA-Z]{12,}\b");
myLabel.Text = myMatch.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:02:43.343

请尝试以下方法：

尽管 C# 转义略有不同，但在[Rublar的参考资料。](http://rubular.com/r/UTO765DZ2w)你可以测试一下。我相信你，如果你在正则表达式中必须使用 to_upper ，那会更好:)

```
String testString = "Some text F4LE8AWMF87 and again some text";
    Match myMatch = 
    Regex.Match(testString, "\b[a-zA-Z\d]{11,12}\b");
    myLabel.Text = testString.Substring(myMatch.Index, myMatch.Length); 
```

# php - 如何防止在重定向期间调用广告？

> ID：13565677
> 
> 赞同：0
> 
> 时间：2012-11-26T13:18:42.367
> 
> 标签：php, class, redirect, ads, output-buffering

在我的一个基于类的网站上，一切都通过`index.php`页面控制，每个页面都是`class`通过该索引页面调用的自己的页面。

在其中一个类中包含为站点的每个页面调用的已登录和已注销标题，这两者都调用`Ad`出现在站点顶部的一个。

问题是，每当页面上有重定向时，它不会发生，直到该页面的类被调用，这发生**在**标题已经被调用之后，这意味着广告调用是为一个广告进行的自从页面以重定向结束以来**从未见过。**

这会对广告的性能**产生负面**影响，因为它会降低广告的点击率 (CTR)。

如果在加载该页面的类之前无法知道页面最终重定向，我如何确保在页面最终重定向时不进行广告调用？

我能想到的唯一“开箱即用”解决方案是以某种方式使用输出缓冲区首先加载该页面的类，然后以某种方式将标头附加到缓冲区的开头，如果它到达那一点没有重定向，但我不知道这是否可行，或者你会如何做到这一点。

有任何想法吗？

**编辑：**

澄清一下，重定向已经通过 HTTP 标头完成，并且所有输出当前都在缓冲。但是，每个页面都可以有自己的重定向原因，这就是它由每个页面控制的原因。例如，一个页面负责发送消息，当发送消息时，它将用户在将消息保存到数据库后重定向回他们的收件箱。在另一个页面上，不允许注销的用户，因此特定页面会检查用户是否已登录，如果没有，则将他们重定向到登录页面。

但是，似乎即使启用了完整的输出缓冲并且重定向是通过各个类页面内的 header() 函数完成的，缓冲仍然会在运行标题重定向之前进行 Ad 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:45:06.867

重定向必须发生在 HTTP 标头中，而不是使用 HTML 元标记或 Javascript 技巧或类似方法。HTTP 标头需要在其他任何内容之前输出。正因为如此，并且仅仅因为它有意义，您的应用程序应该在尝试输出任何 HTML 之前决定是否要重定向用户。因此，应该完全没有问题。

如果您当前的应用程序逻辑在决定重定向用户*之前输出或准备 HTML（触发广告），那么您的应用程序结构就很糟糕。*更改。它应该像这样工作：

```
...

if ($userNeedsToBeRedirected) {
    header('Location: http://example.com/other/url');
    exit;
}

// output HTML and ads here
// never triggered on a redirect 
```

# cloud - CloudifySource 2.2 GA 和 2.3 M2 无法在 Windows 8 上运行

> ID：13565679
> 
> 赞同：1
> 
> 时间：2012-11-26T13:18:55.860
> 
> 标签：cloud, cloudify

有人在 Windows 8 Ent x64 上安装了 2.2 GA 或 2.3 M2 吗？我已经安装了 JDK 1.7.x 并按照安装指南中的说明设置了 JAVA_HOME 和 PATH。

所有错误都表明代理无法启动。这似乎也不是因为有另一个代理正在运行。当我尝试使用 shutdown-agent 或 teardown-localcloud 时，它说找不到任何代理。

我已经关闭了windows防火墙。所有 3 个防火墙配置文件均已关闭；域、私有和公共。

bootstrap-localcloud 命令的详细输出如下。关于如何修复、在哪里查看、如何验证安装等的任何想法？

```
cloudify@default> bootstrap-localcloud --verbose
NIC Address=127.0.0.1
Lookup Locators=127.0.0.1:4176
Lookup Groups=localcloud
Bootstrapping localcloud, this may take a few minutes
Starting agent and management processes:
cmd.exe /c @call "gs.bat" start startLH startGSM startESM startGSA gsa.global.lus 0 gsa.lus 0 gsa.gsc 0 gsa.global.gsm 0 gsa.gsm_l
us 0 gsa.global.esm 0 gsa.esm 0 >nul 2>&1
STARTING CLOUDIFY MANAGEMENT
Operation failed. org.cloudifysource.shell.commands.CLIException: Error while starting agent. Please make sure that another agent
is not already running. Command executed: cmd.exe /c @call C:\Program Files\CloudifySource\bin\"gs.bat" start startLH startGSM sta
rtESM startGSA gsa.global.lus 0 gsa.lus 0 gsa.gsc 0 gsa.global.gsm 0 gsa.gsm_lus 0 gsa.global.esm 0 gsa.esm 0 >nul 2>&1
at org.cloudifysource.shell.installer.LocalhostGridAgentBootstrapper.runCommand(LocalhostGridAgentBootstrapper.java:1302)
at org.cloudifysource.shell.installer.LocalhostGridAgentBootstrapper.runGsAgentOnLocalHost(LocalhostGridAgentBootstrapper.
java:751)
at org.cloudifysource.shell.installer.LocalhostGridAgentBootstrapper.startManagementOnLocalhostAndWaitInternal(LocalhostGr
idAgentBootstrapper.java:801)
at org.cloudifysource.shell.installer.LocalhostGridAgentBootstrapper.startLocalCloudOnLocalhostAndWait(LocalhostGridAgentB
ootstrapper.java:329)
at org.cloudifysource.shell.commands.BootstrapLocalCloud.doExecute(BootstrapLocalCloud.java:110)
at org.cloudifysource.shell.commands.AbstractGSCommand.execute(AbstractGSCommand.java:79)
at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)
at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:474)
at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:400)
at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
at org.apache.karaf.shell.console.jline.Console.run(Console.java:221)
at org.apache.karaf.shell.console.Main.run(Main.java:191)
at org.apache.karaf.shell.console.Main.run(Main.java:89)
at org.cloudifysource.shell.GigaShellMain.main(GigaShellMain.java:122) 
```

CloudifySource 上的线程在这里 [https://cloudifysource.zendesk.com/entries/22477167-2-2-ga-and-2-3-m2-not-working-on-windows-8](https://cloudifysource.zendesk.com/entries/22477167-2-2-ga-and-2-3-m2-not-working-on-windows-8)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:11:54.437

我能够重现您遇到的问题。虽然只有当我将 JAVA_HOME 指向 JDK 之外的 JRE 发行版时，我才能重现这一点。

你确定你正在使用JDK吗？

尝试运行 %JAVA_HOME%\bin\javac，如果您无法运行此命令，则意味着您正在使用 JRE 或某些奇怪的 JDK 发行版运行。

我建议安装这个[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downlo](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downlo) ...然后再试一次。

确保您的 JAVA_HOME 指向 C:\Program Files\Java\jdk1.7.0_10...

如果您仍然看到此问题，请告诉我。

# java - 在 Java 浏览透视图中使用控制台视图时出现 Eclipse Juno 错误

> ID：13565681
> 
> 赞同：1
> 
> 时间：2012-11-26T13:19:03.760
> 
> 标签：java, eclipse

我正在使用 Eclipse Juno。当我在“Java 浏览”透视图中，如果我打开了一个控制台视图并单击它，然后再次单击“Java 浏览”透视图的任何其他部分，则会收到错误*错误发生。有关详细信息，请参阅错误日志。4* . 这是堆栈跟踪：

```
!ENTRY org.eclipse.jface 4 2 2012-11-26 13:53:14.900
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jface".
!STACK 0
java.lang.ArrayIndexOutOfBoundsException: 4
    at org.eclipse.swt.widgets.Table._getItem(Table.java:256)
    at org.eclipse.swt.widgets.Table._getItem(Table.java:250)
    at org.eclipse.swt.widgets.Table.indexOf(Table.java:3010)
    at org.eclipse.swt.widgets.TableItem.setText(TableItem.java:1214)
    at org.eclipse.jface.viewers.TableViewerRow.setText(TableViewerRow.java:142)
    at org.eclipse.jface.viewers.ViewerCell.setText(ViewerCell.java:159)
    at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.update(DelegatingStyledCellLabelProvider.java:117)
    at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.update(DecoratingStyledCellLabelProvider.java:134)
    at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:152)
    at org.eclipse.jface.viewers.AbstractTableViewer.doUpdateItem(AbstractTableViewer.java:399)
    at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:485)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2167)
    at org.eclipse.jface.viewers.StructuredViewer.internalUpdate(StructuredViewer.java:2150)
    at org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:2089)
    at org.eclipse.jface.viewers.ColumnViewer.update(ColumnViewer.java:554)
    at org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:2033)
    at org.eclipse.jface.viewers.StructuredViewer.handleLabelProviderChanged(StructuredViewer.java:1191)
    at org.eclipse.jdt.internal.ui.viewsupport.ProblemTableViewer.handleLabelProviderChanged(ProblemTableViewer.java:140)
    at org.eclipse.jface.viewers.ContentViewer$1.labelProviderChanged(ContentViewer.java:97)
    at org.eclipse.jface.viewers.BaseLabelProvider$1.run(BaseLabelProvider.java:74)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.BaseLabelProvider.fireLabelProviderChanged(BaseLabelProvider.java:72)
    at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider$1.labelProviderChanged(DecoratingStyledCellLabelProvider.java:77)
    at org.eclipse.ui.internal.decorators.DecoratorManager$1.run(DecoratorManager.java:430)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.decorators.DecoratorManager.fireListener(DecoratorManager.java:428)
    at org.eclipse.ui.internal.decorators.DecorationScheduler$3.runInUIThread(DecorationScheduler.java:530)
    at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:95)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T19:37:30.693

看看[https://bugs.eclipse.org/bugs/show_bug.cgi?id=292199](https://bugs.eclipse.org/bugs/show_bug.cgi?id=292199)

这似乎是一个历史悠久的旧 SWT 错误。很少可重现，更难修复。（然而）

# css - 添加到一个 html 元素的类太多了？

> ID：13565685
> 
> 赞同：4
> 
> 时间：2012-11-26T13:19:16.660
> 
> 标签：css

我真的很喜欢新的 Metro UI，所以我正在制作一个使用磁贴和基于 Metro UI 的网格的演示网站。

我意识到有像 get 这样的包可以下载来完成大部分工作，但由于我对网页设计非常陌生（大约 5 个月的经验），我使用 Chrome 和 Firefox 中的内置检查器获得了更多有趣的逆向工程。

我从瓷砖的大小和颜色开始。我希望能够拥有数十种不同的尺寸，并且希望它们能够轻松创建。现在我正在分别为宽度和高度创建类，还为每种颜色创建类，然后我有一个用于悬停的边框和所有颜色选择器的焦点。

这是我的 html 到目前为止的样子：

```
<div id="tile-wrap">
  <div class="std red"></div>
  <div class="wide x-long green"></div>
  <div class="x-wide xx-long blue"></div>
  <div class="xx-wide xxx-long purple"></div>
  <div class="x-wide long gray"></div>
  <div class="wide x-long black"></div>
  <div class="x-wide xx-long white"></div>
</div> 
```

所以通过这个设置，我已经可以拥有总共 17 种不同的尺寸。

现在，我想我还将为各种图标以及文本大小和样式制作选择器。我想我会在 jQuery 而不是 CSS3 中做任何我想要的动画，以确保最好的兼容性。

当这一切都说完之后，我将为每个 div 设置 6 或 7 个类，所以这种方式太多了，我的方法很糟糕吗？我更像是一名开发人员而不是设计师，所以任何提示和建议将不胜感激。

此外，为了保持瓷砖间隔开，我应该为每个尺寸选择器添加一些边距还是有更优雅的解决方案？

谢谢大家，我只是想提高我的设计技能并在此过程中获得一些乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:31:59.473

添加（过多）类的最大风险是你会犯更多的错误。浏览器可以很好地处理类。如果您想优化性能，可能会对这个主题感兴趣：[CSS 优化：元素 ID 与类](https://stackoverflow.com/questions/1230636/css-optimization-element-id-vs-class)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:44:58.940

我会尝试将其中一些属性分组到描述特定大小的框（即特定宽度、高度、填充、边距、字体大小等）的类中。

我最近看到的最好的技巧之一是只创建小的可重用类，无论它们显示在页面上的什么位置，它们看起来都应该相同。即 .blue-box 类无论出现在哪里都应该看起来相同 - 所以不要将 #content .blue-box 视为与 #footer .blue-box 不同

以下视频概述了一些防止 CSS“失控”的良好做法：

[Velocity 2010：Nicole Sullivan，“Massive CSS 的 5 大错误”](http://www.youtube.com/watch?v=j6sAm7CLoCQ "Velocity 2010：Nicole Sullivan，“大规模 CSS 的 5 大错误”")

# javascript - 比较 2 个日期（如果其中一个日期在下一年，则失败）

> ID：13565695
> 
> 赞同：0
> 
> 时间：2012-11-26T13:19:42.000
> 
> 标签：javascript, jquery

如果 2 个日期在同一年内，则下面的代码可以正常工作，但如果结束日期在下一年，则似乎会中断。谁能指出我正确的方向，为什么？

两个变量都是 DD/MM/YYYY 格式的日期选择器。

提前致谢。

```
$(document).ready(function() {
    $("#start").change(  function() {   
        var startDate = $('#start').val().replace('/','');
        var endDate = $('#due').val().replace('/','');
        if(startDate > endDate){
           $("#due").val($(this).val());
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:25:30.680

仅当日期格式为 YYYY-MM-DD 时，此比较才有效。如果`val()`是字符串（格式为 DD/MM/YYYY），您可以执行以下操作：

```
var startDate = $('#start').val().split('/').reverse().join('-');
var endDate = $('#due').val().split('/').reverse().join('-'); 
```

然后你可以比较它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:30:47.203

如果您的开始日期是 10/12/2012 而您的结束日期是 10/01/2013，请查看您的代码及其生成的内容：

```
"10/12/2012" -> "10122012”
"10/01/2013" -> "10012013" 
```

您所做的是将 2 个字符串相互比较，并且在第三个位置，第一个字符串大于第二个字符串。

您应该使用[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来比较日期。

如果您想要更轻松，请查看[moment.js](http://momentjs.com/docs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:32:07.707

正如 Patrick James McDougle 所说，按字符串比较日期可能不是一个好主意。试试[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象，如下所示：

```
$("#start").change(  function() {   
     var startDate = new Date($('#start').val());
     var endDate = new Date($('#due').val());
     if (startDate > endDate){
          $("#due").val($(this).val());
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:49:29.250

例如，您正在比较 1232013 (1/23/2013) 和 12232012 (12/23/2012)。后者是一个较大的数值，但它是较早的日期。

# javascript - jStorage 对 sessionStorage 的支持？

> ID：13565702
> 
> 赞同：1
> 
> 时间：2012-11-26T13:20:05.250
> 
> 标签：javascript, local-storage, sessionstorage, jstorage

我正在使用[jStorage](http://www.jstorage.info/)通过 JavaScript 在本地存储数据。

无法确定如何指定 sessionStorage 来代替默认的 localStorage。

任何人都知道是否可以将 sessionStorage 与 jStorage 一起使用，如果可以，语法？

默认的 localStorage[示例](http://www.jstorage.info/#example)工作正常。

# java - 在继续之前检查 jtable 中的重复数据

> ID：13565703
> 
> 赞同：1
> 
> 时间：2012-11-26T13:20:05.927
> 
> 标签：java, swing

在我当前的项目中，我有一个包含 4 列的 jtable。我不想在第二列中存储重复的数据，所以我在将 jtable 中的每一行存储到数据库之前检查它。

这是我的代码：

```
String s="";
int row = table.getRowCount();
for (int i=0; i<row; i++) 
{
    s = table.getValueAt(i, 1).toString().trim();
    if (name.getText().equals(s)) 
    {
      JOptionPane.showMessageDialog(null, "data alreadyexist.","message",JOptionPane.PLAIN_MESSAGE);
    break; 
    } else {
      add();
      break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:31:09.230

正如我所见，你不是遍历整个表格。您只需检查第一行中的数据是否可用。在此之后，该方法注意到第 2 行中可能有相同的数据并中断，因此您添加了 1 行并停止，因为您逐行检查它，并且对于每一行不匹配，您确实添加一个新的，直到他找到与您要添加的行匹配的行

```
String s = "";
boolean exists = false;
for (int i=0; i<table.getRowCount(); i++) 
{    
    s = table.getValueAt(i, 1).toString().trim();
    if(name.equals(s))
    {
       exists = true;
       break;
    )
)
if(!exists) 
    add();
else 
    JOptionPane.showMessageDialog(null, "data already exist.","message",JOptionPane.PLAIN_MESSAGE); 
```

现在您只需要检查您正在寻找的字符串是否以正确的方式修剪并且它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:01:41.087

尝试这个

```
ArrayList<String> contentList = new ArrayList();
int row = table.getRowCount();
for (int i=0; i<row; i++) 
{
    String str = table.getValueAt(i, 1).toString().trim();
    if (contentList.contains(str)) 
    {
      JOptionPane.showMessageDialog(null, "data alreadyexist.","message",JOptionPane.PLAIN_MESSAGE);
      break; 
    } else {
      contentList.add(str);
      add();
      break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T17:07:48.227

尝试这个：

```
 int row = jTable1.getRowCount();
    Object[] content = new Object[row];
    for (int i = 0; i < row; i++) {
        content[i] = jTable1.getValueAt(i, 0);
    }
    Object value_to_find= 2000;
    boolean exist = Arrays.asList(content).contains(value_to_find);
    if (exist){
        JOptionPane.showMessageDialog(null, "Value exist", "Duplicate", JOptionPane.ERROR_MESSAGE);
    } else {
        addRow();
    } 
```

将所有行保存在数组中，而不是使用 Arrays.asList(content).contains(value_to_find) 搜索 value_to_find

# c# - 如何使用 C# 从 PDF 中读取自定义字段（不是 XMP 元数据）？

> ID：13565709
> 
> 赞同：2
> 
> 时间：2012-11-26T13:20:22.487
> 
> 标签：c#, .net, pdf

有没有其他方法然后购买`iTextSharp`或`Aspose`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:06:50.623

您可以购买[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)。

该库可用于读取字段值或将表单数据导出为 FDF 文件。

以下是可能与您的任务相关的示例：

*   [阅读组合框项目](https://bitmiracle.com/pdf-library/help/read-combo-box-items.aspx)
*   [按名称查找控件](https://bitmiracle.com/pdf-library/help/find-control-by-name.aspx)
*   [导出 FDF 数据](https://bitmiracle.com/pdf-library/help/export-fdf-data.aspx)
*   [填写现有表格](https://bitmiracle.com/pdf-library/help/fill-existing-form.aspx)

免责声明：我为图书馆的供应商工作。

# java - 如何从贝宝启用沙盒 murchant 帐户参考交易

> ID：13565715
> 
> 赞同：1
> 
> 时间：2012-11-26T13:20:50.653
> 
> 标签：java, paypal, payment-gateway

我有贝宝账户和沙盒账户

何时在 java 中进行快速结帐时出现以下错误

> 商户未启用参考交易

如何在 murchant 沙盒 testaccount 上启用参考交易？

**anils_1353572220_biz@gmail.com**这是我的卖家/murchant 测试帐户。

启用该参考交易的过程是什么

======= **=请启用或更好地发送方法我会自己做**=================

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:08:24.363

您需要请求 PayPal 技术人员为您启用此功能。您可以通过在[PayPal 开发人员沙盒论坛提交主题或在](https://www.x.com/developers/paypal/forums/paypal-sandbox)[PayPal MTS](http://www.paypal.com/mts)提交票证来实现。我可能两者都做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T09:37:32.613

首先，他们的文档非常不清楚。要为沙盒账户启用参考交易：

1.  转到[http://developer.paypal.com/](http://developer.paypal.com/) ->[沙盒帐户](https://developer.paypal.com/webapps/developer/applications/accounts)
2.  [创建](https://developer.paypal.com/webapps/developer/applications/accounts/create)企业帐户
3.  将用于创建帐户的电子邮件 ID 发送给[商家技术支持](http://www.paypal.com/mts)。

参考：[https ://ppmts.custhelp.com/app/answers/detail/a_id/940](https://ppmts.custhelp.com/app/answers/detail/a_id/940)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T05:55:09.057

如果有人仍然在这里寻找答案：

**贝宝账户：**

**沙盒：**

*   2015 年 12 月 15 日之后创建的沙盒帐户会自动启用参考交易。
*   如果您的沙盒帐户是在此日期之前创建的，请联系 PayPal 的客户服务并要求在您的沙盒帐户上启用参考交易。

**现场/制作：**

*   PayPal 必须批准为您的真实账户启用参考交易。
*   要请求批准您的真实账户，请联系 PayPal 的客户服务。

来源：[https ://www.paypal.com/ph/smarthelp/article/how-do-i-use-checkout-with-reference-transactions-and-payflow-pro-ts1503](https://www.paypal.com/ph/smarthelp/article/how-do-i-use-checkout-with-reference-transactions-and-payflow-pro-ts1503)

# internet-explorer - 注册热键以模拟鼠标单击 dll Web 应用程序中的对象

> ID：13565717
> 
> 赞同：1
> 
> 时间：2012-11-26T13:20:53.743
> 
> 标签：internet-explorer, dll, asp-classic, keyboard-shortcuts, registerhotkey

**免责声明**

我绝不是网络技术方面的专家，我也不太熟悉 .asp、.dll 和其他 MS 恶作剧，所以在下面发现奇怪/不合逻辑（但希望足够有意义）的构造时不要感到惊讶。

**背景**

我正在和我的同事一起开发仅 IE 的 dll 打包的 .aspx IFRAMEd CRM 应用程序。那（应该）意味着它只能通过 IE 访问，并且 url 的形式为：*http://internal-ip/foo/bar/something.dll?FOO=BAR*，并且页面显示由其他 HTML 背景项和两个 IFRAME 组成，包含重要的应用程序内容。作为 CRM，它需要每天数百次重复操作（插入新客户、更新客户、查找有关他们的各种信息等）。

**问题**

这些操作中的每一个都需要通过软件进行多次复杂的菜单导航，以便最终单击相关菜单项并等待所需页面加载（如此复杂，估计它们会消耗超过 75% 的总时间来完成一种行为）。

**主意**

为了加快速度（从而提高效率），我想出了一个想法，以某种方式实现键盘快捷键，其作用与单击菜单项的作用相同。这个想法似乎很简单，但我不知道从哪里开始。

**尝试的解决方案**

如果它是一个标准网页，我会创建一个当我按下 ctrl+something 时执行 $("#menu_item").trigger("click") 的greasemonkey 脚本，但我不能这样做有两个原因：

1.  没有油猴（Trixie 不工作），并且
2.  无法通过它们检查任何对象或 DOM 导航，因为它们在 IFRAME 中，所以这是我使用 firebug lite 所能达到的最远和最深的地方。

为了解决第一个问题，我设法使用 IE Tab 2 用 Firefox 打开了应用程序，果然，应用程序可以工作，但是 Greasemonkey 脚本不能——甚至是一个简单的 alert("a") 脚本页面加载不执行（可能是因为页面包含在 .dll 中）。

**结论**

所以在我看来，我将无法按照我原来的计划推进，那么我还有什么可以尝试的吗？我对应用程序所在的远程服务器的访问权限有限，只能进入文件高峰期，希望能看到一些有用的东西，但这太费时了，而且最终可能没有成果。

我希望有一个足够简单的解决方案（因为这应该是一个非常常见的功能）来避免翻阅数百个文件或学习如何对 .dll 进行逆向工程。有没有人遇到过类似的情况，如果没有，您将如何尝试实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:24:03.513

如果应用程序在浏览器中运行，无论它托管在服务器上的哪个平台，都会吐出 HTML，Javascript 将在此处帮助您获取快捷方式。

您应该检查其中的一些（使用 jquery 库）：

[使用 jQuery 的键盘快捷键](https://stackoverflow.com/questions/593602/keyboard-shortcuts-with-jquery)

[超链接的键盘快捷键 (jQuery)](https://stackoverflow.com/questions/10181624/keyboard-shortcut-for-hyperlink-jquery)

[http://www.stepanreznikov.com/js-shortcuts/](http://www.stepanreznikov.com/js-shortcuts/)

菜单上的点击很可能会执行一个功能，我建议使用按键执行该功能，而不是尝试模拟点击。

# jquery - 在 ASP.Net ValidationSummary 中隐藏冗余错误消息

> ID：13565718
> 
> 赞同：0
> 
> 时间：2012-11-26T13:21:00.247
> 
> 标签：jquery, asp.net, validation-controls

我有一个 asp.net 页面，它接受两个输入值——名称和地址。这两个都是必填字段。我使用了必填字段验证器和验证摘要。

当用户没有输入这两个值时，如果错误消息被触发两次，则错误消息是多余的。即使有两个错误，我也只需要显示一个错误消息。

1.  我们如何使用 jQuery 来处理它？
2.  我们如何使用 ASP.Net 标记来处理它？

**注意**：我最初认为验证控件将在页面加载时发出 HTML，以便我可以使用“查看源代码”并在 HTML 元素上执行 jQuery。但事实并非如此。它仅呈现如下

```
 <div id="vsumAll" class="validationsummary" style="display:none;"> </div> 
```

结果

![在此处输入图像描述](../Images/8862eeda57485c0c4a3740344f534982.png)

**ASP.Net 标记**

```
<body>
<form id="form1" runat="server">
<div>
    <table cellpadding="5" cellspacing="5" width="100%">
        <tr>
            <td>
                <table border="0" align="center" cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td>
                            Name
                        </td>
                        <td>
                            <asp:TextBox runat="server" ID="txtName"></asp:TextBox>
                            <asp:RequiredFieldValidator runat="server" ID="reqWorkorderFormat" ControlToValidate="txtName"
                                Text="*" ErrorMessage="Fill all values!"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Address
                        </td>
                        <td>
                            <asp:TextBox runat="server" ID="txtAddresss"></asp:TextBox>
                            <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator1" ControlToValidate="txtAddresss"
                                Text="*" ErrorMessage="Fill all values!"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <asp:Button runat="server" ID="btnSave" Text="Save" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <asp:ValidationSummary runat="server" ID="vsumAll" DisplayMode="BulletList" CssClass="validationsummary" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:42:50.813

这有点骇人听闻，但它会起作用：

添加以下 Javascript 函数：

```
function submitValidate() {
    var isValid = Page_ClientValidate('');

    if (!isValid) {
        setTimeout("$('#vsumAll ul li:not(:first)').remove()", 5);
    }

    return isValid;
} 
```

在您的提交按钮中添加：

```
<asp:Button runat="server" ID="btnSave" Text="Save" OnClientClick="submitValidate();"/> 
```

最后，确保你有`ClientIDMode="Static"`你的`ValidationSummary`

**解释**：
它使用 JQuery 来删除`li`ValidationSummary 中除第一个之外的所有内容 - 这实际上是一个 UnorderedList（例如`ul`）。
我把它放在 5 毫秒内`setTimeout`，因为我们希望它仅在 ValidationSummary 完成将所有项目添加到`ul`.
代码只有在失败时才会运行`Page_ClientValidate`——这是执行客户端验证的函数。

# c# - 突出显示 RadGridView C# 中的空值单元格

> ID：13565720
> 
> 赞同：3
> 
> 时间：2012-11-26T13:21:03.617
> 
> 标签：c#, .net, datagrid, telerik, radgrid

我有一个 radGridView，用户插入行，我想用空值突出显示单元格。例如使单元格的背面颜色为红色。我已经尝试了下面的代码，但它没有工作......

在一个按钮里面

```
for (int j = 0; j < radGridView1.Rows.Count; j++)
{
      if (radGridView1.Rows[j].Cells[4].Value.ToString() == "")                
          radGridView1.Rows[j].Cells[4].Style.ForeColor = Color.Red;  
} 
```

那么该怎么做呢？或者如果有更好的突出显示方法来通知用户空单元格。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:49:04.910

法德，

我会保持清洁和重点：

*   03Usr的回答是说一行，你要单个单元格

*   Cyber​​Dude 的回答没有考虑 Telerik 的 DGV 必须修改外观和功能的许多事件

话虽如此，您的代码似乎想要突出显示空值（null 不等于空）：

```
private void radGridView1_CellFormatting(object sender, CellFormattingEventArgs e)
{
    if (e.RowIndex != -1)
    {
        if (e.CellElement.Value != null && e.CellElement.Value.ToString() == "")
        {                    
            radGridView1.Rows[e.CellElement.RowIndex].Cells[e.CellElement.ColumnIndex].Style.BackColor = Color.Red;
            radGridView1.Rows[e.CellElement.RowIndex].Cells[e.CellElement.ColumnIndex].Style.CustomizeFill = true;
        }

    }
} 
```

* * *

![在此处输入图像描述](../Images/43f00f96371fa26a90631e6c4d127612.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:26:01.373

我在`ItemDataBound`活动中这样做，如下所示：

```
TableCell myCell = ((GridDataItem)e.Item)["ColumnName"];
...
myCell.ForeColor = Color.ForestGreen;
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:20:40.653

您可以添加`OnRowDataBound="radGridView1_RowDataBound"`到您的网格视图。每个 gridview 行都会触发此事件。

在后面的代码中，您可以拥有以下内容：

```
public void radGridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // do your highlighting here
        if (e.Row.Cells[1].Value.ToString() == "")
        {
            e.Row.ForeColor = Color.Red;
        }

    }
} 
```

# java - 从 Java servlet 内部获取 Ajax 参数

> ID：13565725
> 
> 赞同：2
> 
> 时间：2012-11-26T13:21:15.553
> 
> 标签：java, javascript, ajax, json, servlets

我的数据：

```
var test = {cars : []};

var cars = []
cars.push({
    "name" : "Ford",
    "year" : "2000"
});

    cars.push({
    "name" : "Audi",
    "year" : "2002"
});

test.cars = cars;   

var json = JSON.stringify(test);

$.get('/myservlet/', json, function(data) { // also tried .getJSON , .post
            alert('Success');                               
}) 
```

在 Java 中，我将“json”变量作为参数键，但没有值。

```
public void doPost(...) // TRIED BOTH
public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException {           
    for(Object a : req.getParameterMap().keySet()) {
        System.out.println(a + " - " + req.getParameter((String)a));
    }
//prints out
{"cars":[{"name":"Ford","year":"30"},{"name":"Audi","year":"2002"}]} - 
```

这是无法使用的结果，因为密钥总是在变化，并且每次都循环参数是荒谬的。我需要一个特定的密钥：`req.getParameter("cars")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:31:02.533

将其更改为：

```
$.get('/myservlet/', 'cars='+ json, function(data) { // also tried .getJSON , .post
        alert('Success'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:12:36.660

您根本不应该对 JSON 进行字符串化。整个 JSON 对象`test`应该被视为请求参数映射。只需传递未修改的 JSON 对象。

```
$.get('/myservlet/', test, function(data) {
    // ...
}); 
```

这样它就可以在 servlet 中使用，如下所示：

```
for (int i = 0; i < Integer.MAX_VALUE; i++) {
    String name = request.getParameter("cars[" + i + "][name]");
    if (name == null) break;
    String year = request.getParameter("cars[" + i + "][year]");
    // ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T13:30:38.833

**更新** 您的问题可能与 [READ JSON String in servlet重复](https://stackoverflow.com/questions/5338943/read-json-string-in-servlet)

**上一个答案**

我假设您正在尝试将 JSON 发布到 servlet，如果是这样的话，请继续阅读。

您必须检查请求正文而不是请求参数。就像是

```
BufferedReader buff = req.getReader(); 
```

检查这是否适合您

```
public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException, ServletException {
  BufferedReader buff = req.getReader();
  char[] buf = new char[4 * 1024]; // 4 KB char buffer
  int len;
  while ((len = reader.read(buf, 0, buf.length)) != -1) {
   out.write(buf, 0, len);
  }
} 
```

请注意，我已经检查了上面的代码是否存在语法错误。我希望你能明白。

# mysql - 如何在 MYSQL 中查询一行并将结果连接到另一个表中的一行？

> ID：13565728
> 
> 赞同：0
> 
> 时间：2012-11-26T13:21:38.693
> 
> 标签：mysql, join

```
SELECT DISTINCT a.userID, buildstatus
FROM meeting a
WHERE buildStatus =  'complete'
INNER JOIN user.contactName ON (a.userID = b.userID) 
```

好的，所以我正在尝试加入这两个表，其中发现会议表中的 buildstatus 已完成，然后它将从用户表中找到用户 ID 并将联系人姓名加入此查询。

不幸的是，无论我尝试什么似乎都会抛出错误消息。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:22:34.247

查询子句的顺序必须正确。开关`join`和`where`

```
SELECT DISTINCT a.userID, a.buildstatus 
FROM meeting a
INNER JOIN `user` b ON a.userID = b.userID
WHERE a.buildStatus = 'complete' 
```

# c# - 使用动态用户名和密码的 WCF 自定义身份验证

> ID：13565732
> 
> 赞同：0
> 
> 时间：2012-11-26T13:22:00.957
> 
> 标签：c#, wcf, wcf-security

我使用自定义身份验证实现了 WCF 服务，当我将用户名和密码的常量字符串传递到 UsernameAuthentication 类、Validate 方法并在那里验证时，它工作正常。但是有没有办法我可以传递动态用户名、密码并验证它们。我如何实现这一点并在此类中访问这些值。

```
class UsernameAuthentication : UserNamePasswordValidator
    {        
        public override void Validate(string userName, string password)
        {            
            var ok = (userName == "DynamicUserName") && (password == "DynamicPassWord");
            if (ok == false)
                throw new AuthenticationException("u/p does not match");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:10:38.803

在该`Validate`方法中，您必须查询自己的用户数据库并检查用户名和密码是否有效。通常，您将使用存储所有用户数据的 RDBMS 或 XML 文件。

查看[ASP.NET 的 Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)以获得支持基于角色的安全性的数据库架构示例。更好的是，您可以将 ASP.NET 的 Membership 与 WCF 集成。[请参阅本文](http://msdn.microsoft.com/en-us/library/ff406125.aspx)的“控制对公共 Web 托管服务的访问和使用” 。您还可以阅读 Resnick、Crane 和 Bowen 撰写的 Essential WCF 中关于安全性的章节，其中描述了在 WCF 服务中支持身份验证/授权的许多方法。

# asp-classic - 结果类似于具有经典 ASP 的组

> ID：13565733
> 
> 赞同：0
> 
> 时间：2012-11-26T13:22:07.103
> 
> 标签：asp-classic

我有一个表（MSSQL），其中包含如下数据：

```
1   AAA 100
2   BBB 101
3   C   100
4   D   100 
```

我想列出类似的项目：

```
100:
- 1 AAA
- 3 C
- 4 D

101:
- 2 BBB 
```

我怎样才能做到这一点？我在一段时间内做了一段时间，但结果不是我正在等待的：

```
<%
    Set Group= TarefasConexaoMSSQL.Execute("SELECT DISTINCT GroupName FROM _NewDummy")
    GroupName= Group("GroupName")
    WHILE NOT Group.EOF
%>

<p>
    <a href="#"><% Response.Write Group("GroupName") %></a>
</p>
<%
    Set Itens= TarefasConexaoMSSQL.Execute("SELECT * FROM _NewDummy WHERE GroupName= '"& GroupName &"'")
    One= Itens("One")
    Two= Itens("Two")
%>
    <%
        WHILE NOT Itens.EOF
    %>

    - One: <% Response.Write One %>
    - Two: <% Response.Write Two %>

    <%
        Itens.MOVENEXT
        WEND
    %>
<%
    Group.MOVENEXT
    WEND
%> 
```

感谢您提供有关此的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:45:43.027

您在这里不需要任何嵌套循环，只需按组名排序并跟踪前一个值与当前值。当值改变（或第一个值）时显示组名。

代码：

```
<%
Set oRS= TarefasConexaoMSSQL.Execute("SELECT * FROM _NewDummy ORDER BY GroupName ASC")
Dim currentGroupName, previousGroupName
currentGroupName = ""
previousGroupName = ""
Do Until oRS.EOF
    currentGroupName = oRS("GroupName")
    One = oRS("One")
    Two = oRS("Two")
    If currentGroupName<>previousGroupName Then
        Response.Write("<p>")
        Response.Write("<a href="#">" & currentGroupName & "</a>")
        Response.Write("</p>")
    End If
    Response.Write("- One: " & One & ", Two: " & Two & "<br />")
    previousGroupName = currentGroupName
    oRS.MoveNext
Loop
oRS.Close
%> 
```

# winforms - C# 将文本从 Form2 文本框发送到 Form1 文本框

> ID：13565735
> 
> 赞同：-2
> 
> 时间：2012-11-26T13:22:12.683
> 
> 标签：winforms, textbox, c#

我需要一些帮助，我想将文本从 Form2.cs 的文本框设置到 Form1.cs 中的另一个文本框，但我不断收到此错误：

```
Error 2 An object reference is required for the non-static field, method, or property. 
```

我正在用 c# 编码，但我在互联网上的任何地方都找不到它怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:36:58.177

您必须提供 Form2 到 Form1 的距离。例如，您可以在构造函数中传递它，例如：

```
public Form2(Form1 frm) 
```

然后你可以调用这样的东西

```
this.TextBox1.Text = frm.TextBox1.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:39:02.193

我仅根据您的错误代码编写此答案。

1.  您尝试在`non-static`不使用属于它的类对象的任何实例的情况下访问方法。例如; 此代码将失败。

> ```
> class Program
> {       
>    public static void Main()
>    {
>       WriteMethod();
>    }
>    public void WriteMethod()
>    {
>       Console.Writeline("Succes!");
>    } 
> } 
> ```

但是这段代码有效；

```
class Program
{
   public static void Main()
   {
      Program p = new Program();
      p.WriteMethod();
   }
   public void WriteMethod()
   {
      Console.Writeline("Succes!");
   } 
} 
```

希望你明白重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:39:32.883

好吧，您的情况太简单了，您可以做太多事情以在类之间交换数据

为什么不尝试将数据保存在另一个静态类或单例类中......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-17T08:27:46.903

```
//this code worked for me
//in form2 put following code prevent form from opening multiple times  
public partial class Form2 : Form
    {
        public Form2()
        {
             InitializeComponent();
        }
        private static Form2 Instance;
        public static Form2 GetInstance()
            {
                if (Instance ==null || Instance.IsDisposed)
           {
                Instance = new Form2();
            }
            else
            {
                Instance.BringToFront();
            }
                 return Instance;
         }

 // in form1

 public partial class Form1 : Form
    {
        public Form1()
        {
             InitializeComponent();
        }

        private void Button2_Click(object sender, EventArgs e)
        {
            Form2 form2 = Form2.GetInstance();
            form2.textBox1.Text = textBox1.Text;
            form2.Show();
        }
    } 
```

# c++ - C++ 中的复制控制

> ID：13565742
> 
> 赞同：0
> 
> 时间：2012-11-26T13:23:18.043
> 
> 标签：c++, constructor, copy-constructor

```
template <class Type> class Queue {

    Queue(): head(0), tail(0) {
        cout << "Queue--default constructor called" << endl;
    }

    Queue(const Queue &Q): head(0), tail(0) {
        cout << "Queue--copy constructor called" << endl;
        //...
    }

    Queue& operator=(const Queue&) {
        cout << "Queue--operator= called" << endl;
        //...
    }
    ~Queue() { //... }

private:
    QueueItem<Type> *head;         
    QueueItem<Type> *tail;         
}; 
```

我已经定义了一个模板类`Queue`并尝试了以下代码：

```
Queue<char*> cq;
Queue<char*> ccq(cq);   
Queue<char*> acq = cq;  
Queue<char*> acq2;
acq2 = cq; 
```

**输出**是：

```
Queue--default constructor called
Queue--copy constructor called
Queue--copy constructor called
Queue--default constructor called
Queue--operator= called 
```

让我困惑的是代码`Queue<char*> acq = cq;`调用了复制构造函数`Queue--copy constructor called`，但**没有**`default constructor and operator=`调用要调用的。

任何人都可以帮助我吗？

谢谢你考虑我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:31:08.803

这是在标准中定义的，它在部分`Explicit initialization`

> 1 显式初始化 [class.expl.init] 类类型的对象可以用带括号的表达式列表进行初始化，其中表达式列表被解释为构造函数的参数列表，该构造函数被调用以初始化对象。或者，可以使用 = 初始化形式将单个赋值表达式指定为初始化程序。直接初始化语义或复制初始化语义都适用；见 8.5。

这是描述`single assignment-expression`和的情况`copy-initialization semantics`。

`ccq(cq)`从技术上讲，这两种形式和之间没有区别`acq = cq`，正如您已经从输出中看到的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:28:53.067

这称为“复制初始化”，C++ 标准要求

```
Queue<char*> acq  = cq; 
```

应相当于

```
Queue<char*> acq (cq); 
```

这里没有错。

# javascript - 占位符：默认文本

> ID：13565745
> 
> 赞同：0
> 
> 时间：2012-11-26T13:23:24.950
> 
> 标签：javascript, jquery, html

我只想要一个小代码来验证我的文本框。基本上我只想在文本框中输入数字。

现在我的代码正在运行，但我无法删除默认占位符文本。

```
<div id="generatePinsDialog" title="Generate New PINs">
    <label>How many will be generated?
        <span style="position: relative;">
            <input id="newInmateCount" name="text" maxLength="6" type="text" placeholder="Enter the number" />
            <label style="font: 0.75em/normal sans-serif; left: 5px; top: 3px; width: 147px; height: 15px; color: rgb(186, 186, 186); position: absolute; overflow-x: hidden; font-size-adjust: none; font-stretch: normal;" for="newInmateCount">Enter the number!    
            </label>
       </span>
    </label>
    <br />
</div> 
```

和

```
$("#newInmateCount").data("defTxt", $("#newInmateCount").val());
$("#newInmateCount").bind("blur focus", function (e) {
    $(this).val($(this).val() == $("#newInmateCount").data("defTxt") ? "" : $("#newInmateCount").data("defTxt"));
});

$("#newInmateCount").keydown(function (e) {
    if (e.which == 8 || e.which == 46) return true;
    if (e.which < 48 || (e.which > 57 && e.which < 96) || e.which > 105) return false;
}); 
```

[链接](http://jsfiddle.net/zhshqzyc/mGAPs/9/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:27:06.577

问题是`<label>`: 你已经有了你的`placeholder`属性`<input>`，它的行为应该完全符合你的要求。但是你也有一个*在*`<label>`场上的定位，这把一切都搞砸了。

 *只要去掉标签，当您在字段中输入数字时，占位符文本就会消失。

请参阅[jsfiddle 上的示例](http://jsfiddle.net/mGAPs/10/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:37:25.020

您已将第二个标签放在输入字段上。这些占位符是浏览器生成的。你不应该试图伪造它。

第一个标签的嵌套也是错误的。

这很有效，看起来好多了[http://jsfiddle.net/mGAPs/11/](http://jsfiddle.net/mGAPs/11/)

```
 <div id="generatePinsDialog" title="Generate New PINs">
 <label for="newInmateCount">How many will be generated?</label>
 <input id="newInmateCount" name="text" maxLength="6" type="text" placeholder="Enter the number" />
 </div> 
```

**编辑**

您也可以为 IE9 修复此 HTML5 行为

```
$('[placeholder]').focus(function() {
  var input = $(this);
  if (input.val() == input.attr('placeholder')) {
    input.val('');
    input.removeClass('placeholder');
  }
}).blur(function() {
  var input = $(this);
  if (input.val() == '' || input.val() == input.attr('placeholder')) {
    input.addClass('placeholder');
    input.val(input.attr('placeholder'));
  }
}).blur(); 
```

不利的一面是你需要改变你的第一点 jquery（它也使用焦点和模糊）我在这个工作示例中禁用了它：http: [//jsfiddle.net/mGAPs/12/](http://jsfiddle.net/mGAPs/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:46:39.117

我会去找@Jeroen 的答案，甚至使用 html5“数字”类型

```
<div id="generatePinsDialog" title="Generate New PINs">
    <label for="newInmateCount">How many will be generated?</label>
    <input id="newInmateCount" name="text" step="1" min="0" max="999999" type="number" placeholder="Enter the number" />
</div> 
```

[为了跨浏览器兼容性，您最好使用上面](http://the.deerchao.net/PlaceHolder)建议的第三方插件*

# git - git diff --staged 移动文件？

> ID：13565747
> 
> 赞同：2
> 
> 时间：2012-11-26T13:23:30.970
> 
> 标签：git, git-diff, mv

这个问题与以下问题相同： [How to do a git diff onmoved/renamed file?](https://stackoverflow.com/questions/5730460/git-diff-on-moved-file) 但重要的区别是我想查看上一次提交中的文件版本和当前暂存的版本之间的变化。

git diff --staged 显示在一侧被删除的整个文件：

```
--- a/old_path/main.cpp
+++ /dev/null
@@ -0,0 +1,42 @@
- line 1
- line 2
- line 3
- etc. 
```

并将整个文件添加到另一个文件中：

```
--- /dev/null
+++ b/new_path/main.cpp
@@ -0,0 +1,42 @@
+ line 1
+ line 2
+ line 2.5
+ line 3
+ etc. 
```

没有任何方便的方法来比较两者之间的实际差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:47:00.177

如果您查看过去的提交，答案会有所不同，但使用`git diff --staged`表明您正在寻找`old_path/main.cpp`in`HEAD`和当前 staged之间的差异，该差异`new_path/main.cpp`源自旧文件。`new_path/main.cpp`在这种情况下，这个命令应该可以工作，假设自从它上演以来没有新的变化：

```
git diff HEAD:old_path/main.cpp new_path/main.cpp 
```

`new_path/main.cpp`如果还包含尚未暂存的其他更改，则不确定如何准确指定第二个路径的索引中的版本...

编辑：经过一点阅读，`gitrevisions(7)`这似乎应该处理后一种情况：

```
git diff HEAD:old_path/main.cpp :new_path/main.cpp 
```

注意`:`没有修订前缀，它应该指定索引中的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:02:38.993

由于我不知道上述问题的答案，我通常使用迂回的方式：只要方便，尤其是每当我记得时，我都会在单独的提交中进行文件移动更改。因此，一旦提交了移动，我就可以继续处理该文件，并且可以以“正常”方式执行正常的 git diff --staged ，为下一次提交做准备。这是我所知道的最简单的方法......问题是，有时我忘记这样做......

# typo3 - TYPO3 tt_news：向链接添加新属性

> ID：13565749
> 
> 赞同：1
> 
> 时间：2012-11-26T13:23:30.823
> 
> 标签：typo3

我想向 *tt_news* 链接添加一个新属性，例如 id、类或 onclick 函数。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:57:17.040

不幸的是，没有打字稿解决方案可以向 tt_news`displayList`和`displayLatest`视图中的“更多”链接添加更多属性。你将不得不破解扩展 - 这不是一个好主意（*）。

如果您只需要它来调用 javascript 函数，那么简单的解决方案是使用 jQuery 或其他框架将点击侦听器添加到`a`标签。jQuery中的一个例子：

```
$('div.news-msg a').click(function(e){
    e.preventDefault(); //prevent link from opening

    var newsurl = $(this).attr('href');
    //...do more stuff...
}); 
```

(*) 不要相信我的话 - 请参阅以下讨论（德语）： [http](http://www.typo3.net/forum/beitraege/thema/27238/) ://www.typo3.net/forum/beitraege/thema/27238/或[http://www.typo3.net/论坛/beitraege/thema/67165/](http://www.typo3.net/forum/beitraege/thema/67165/)

# javascript - 在 JavaScript 中过滤 JSON 对象列表的最高性能方法是什么？

> ID：13565751
> 
> 赞同：24
> 
> 时间：2012-11-26T13:23:34.463
> 
> 标签：javascript, performance, list, object, filter

假设我有一个巨大的（1000+）对象列表，如下所示：

```
[{name: 'john dow', age: 38, gender:'m'}, {name: 'jane dow', age: 18, gender:'f'}, ..] 
```

我想按名称过滤此列表（按字符）。

```
filter('j') => [{name: 'john dow', age: 38, gender:'m'}, {name: 'jane dow', age: 18, gender:'f'}, ..]

filter('jo') => [{name: 'john dow', age: 38, gender:'m'}, ..]

filter('dow') => [{name: 'john dow', age: 38, gender:'m'}, {name: 'jane dow', age: 18, gender:'f'}, ..] 
```

最高性能的方法是什么？RegEx 显然是关键之一，如果您假设用户通常倾向于从头开始命名，则预先对列表进行排序可能也是一个好主意，但它只在某些情况下有所帮助。

是否有用于映射过滤器的 JavaScript 内置函数？我希望那些比 JavaScript 实现更快。

PS：是的，我想在客户端进行过滤，因为我想提供“离线功能”。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T13:37:02.947

根据经验，以下算法效果很好：

1.  当用户键入第一个字母时，您使用也许执行搜索`Array.filter()`并将该结果存储在用户键入的任何内容下（例如“j”）；

2.  当用户键入另一个字母（例如“o”）时，您对之前键入的任何内容（“j”）执行搜索，从而减少要通过的项目数

3.  当用户删除一个或多个字符时，您会尝试根据搜索框中剩余的内容查找存储的搜索；如果全部失败，您将显示一个空列表并使先前存储的搜索无效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T13:35:47.600

尽管[子字符串索引](http://en.wikipedia.org/wiki/Substring_index)（例如[Suffix tree](http://en.wikipedia.org/wiki/Suffix_tree)）会使这更快，但直接搜索将是：

```
function (s, l) {
    return l.filter(function (v) {
        return v.name.find(s) !== -1;
    });
} 
```

where`s`是查询字符串，`l`是对象列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T13:42:50.770

在这种情况下，我不会太担心性能。一台台式计算机应该吃掉 1000 次或 10,000 次评估而不会出汗。我会避免任何类型的复杂优化，因为破坏功能的风险可能高于稍微高效处理的好处。

Javascript (ECMAScript 5) 确实提供了过滤数组的新方法。作为本机方法，它应该更快一些。

```
var regex = ...

results = json.filter(function(result) {
   return regex.test(result.name)
} 
```

现代浏览器支持 Array.prototype.filter，请参阅[http://kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)。可以添加旧浏览器的补丁：[https ://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-11T18:00:20.107

20000 个随机项目（实时查看过滤 20k 条记录）

```
let dictionary = [];
  var time=0;
  var answer = [];

  var possible = "abcdefghijklmnopqrstuvwxyz";
  function makeid(len) {
    var text = "";

    for (var i = 0; i < len; i++)
      text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
  }

  function addWord(number){
    for (var inc=0; inc<number; inc++){
      var wl = 5+Math.floor(Math.random() * 5);
      dictionary.push({word:makeid(wl)});
    }
  }

  function findWord(start){
    return dictionary.filter(function(e){
      return e.word.startsWith(start);
    })
  }

  $(document).ready(function( $ ) {

    addWord(20000);
    $("#time").text( 'Search from ' + dictionary.length + ' random items!' );

    $("#search-input").keyup(function() {
      var term = $(this).val() || '';

      if( term ) {

        var init = new Date().getTime();
        var sol = findWord( term );
        time= (new Date()).getTime() - init;

        console.log( term );
        $("#answer").text(JSON.stringify(sol));
        $("#time").text( sol.length + ' items found in time ' + time + 'ms' );
      } else {
        $("#answer").text(JSON.stringify(dictionary));
        $("#time").text( 'Search from ' + dictionary.length + ' items' );
      }

    });
  });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input id="search-input" placeholder="Search..">
<p id="time"></p>
<p id="answer"></p>
```

[https://jsfiddle.net/maheshwaghmare/cfx3p40v/3/](https://jsfiddle.net/maheshwaghmare/cfx3p40v/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-12T15:06:13.017

从简单到更复杂（没有额外的库）：

1.  限制搜索最小 x 字符（通常 3 是可以接受的）
2.  在用户使用超时输入时延迟过滤：

```
//clear previous timed filtering
if (typingTimeout) {
      clearTimeout(typingTimeout);
      typingTimeout = null;
    }
//schedule new filtering
typingTimeout = setTimeout(() => {
   // do some filtering
}, 2000); //acceptable 1-2s 
```

3.  如果您仍然希望更快地过滤，您可以按字母顺序将列表分组到一个对象中：

```
{
   A: ['Aron', 'Arnold', ...],
   B: ['Baby'],
   ....
} 
```

然后使用输入第一个字符的前缀列表过滤它们。这只是一个示例，您应该按照您认为合适的方式对数据进行分组（可能是前 2 个字母......）。

这是我实现的一个函数来帮助为我的数组添加前缀：

```
export function prefixStringsArray(arr, prefixLength) {
  const prefixArr = arr.map((s) => s.substr(0, prefixLength));
  const filter = (item, query) =>
    item.toLowerCase().startsWith(query.toLowerCase());

  const prefixObj = {};
  for (const pre of prefixArr) {
    prefixObj[pre] = arr.filter((item) => filter(item, pre));
  }

  return prefixObj;
} 
```

你应该知道使用 JS 对象是一个很好的选择，因为它们是在 O(1) 中访问的（它是一种哈希映射），如果你对数据进行最佳分组，你会得到小数组来过滤。

笔记：

1.  如果您选择为数组添加前缀，则应注意用户搜索`query.length < prefixLength`
2.  这给了我在移动开发（React Native）方面的巨大成果
3.  代码只是草稿 - 手动测试

# debugging - 调试在 IIS 中运行的 node.js

> ID：13565752
> 
> 赞同：1
> 
> 时间：2012-11-26T13:23:38.943
> 
> 标签：debugging, node.js, webstorm, iisnode

有没有人设法使用 Webstorm 5.x 用 IISNode 调试 Node.js？我根本无法让它工作。

# java - 在java中使用堆栈检查匹配的括号

> ID：13565762
> 
> 赞同：0
> 
> 时间：2012-11-26T13:24:22.720
> 
> 标签：java, brackets, stack

大家好，我正在尝试创建一个程序以允许用户输入一系列括号（一次一个）并检查是否有相应的结束括号。每次都在新行中输入括号以帮助阅读。我已经为它设置了一个 ADT，但只是想不出如何让 while 循环进行和检查......我知道如果输入了一个（括号我应该把它推入堆栈，当一个（是输入我应该弹出一个堆栈，但我无法计算出中间的位，任何帮助都会受到喜爱:)

```
//main code   
import java.util.*;

public class SameBrackets
{
   public static void main(String[] args)
   {
      Stack bracket = new Stack();
      Scanner kybd = new Scanner(System.in);

      System.out.print("Enter bracket > ");
      String bracketentered = kybd.next();

          if ("(".equals(bracketentered) )
          {
                 bracket.push(bracketentered);
                 System.out.println(") needed");
          }
          else if (")".equals(bracketentered))
          {
              bracket.pop();
              System.out.println("( needed");
          }

      }
  } 
```

//ADT代码

```
public class Stack
{
    private String[] a;         //String array
    private int top;

    public Stack()
    {
       a = new String[1];           //create String array
       top = 0;                      
    }

    public boolean isEmpty()
    {
         return top == 0;
    }

    public String pop()          //pop String element
    {
        top--;
        return(a[top]);         //underflow not protected
    }

    public void push(String x)      //push String element
    {
        if (top == a.length)
        {
            resize();
        }
        a[top] = x;
        top++;
    }  

    private void resize()
    {
        String[] temp = new String[a.length * 2];   //resize String array
        for (int i = 0; i < a.length; i++)
        {
            temp[i] = a[i];
         }
        a = temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:37:50.247

*   为什么需要堆栈？你可以有一个计数器，在'（'上增加它并在'）'上减少它 - 每次减少它时确保它的值仍然是非负的。
*   不知道你对循环有什么问题。您可以有一个由特定输入终止的 while 循环（例如 - 'q'）。

* * *

至于你的循环问题：

```
input = getInput(scanner);
while(input != null) {
  // do what you want with the input

  input = getInput(scanner);
}

private static String getInput(Scanner scanner) {
  get the input from the scanner here - return null if no more input.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:09:35.817

您是否正在寻找类似的东西：

```
if ("(".equals(bracketentered) ) {
    bracket.push(bracketentered);
} else if (")".equals(bracketentered)) {
    bracket.pop();
}
if ( bracket.isEmpty () ) {
    System.out.println("( needed");
} else {
    System.out.println(") needed");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:14:47.537

您不需要实现自己的堆栈，一个`LinkedList`（特别是[`Deque`](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)它实现的接口）已经可以做到这一点。但这是一个很好的锻炼。

您的代码缺少两件事。

*   一个循环，一直持续到某个终点。不幸的是，当您从控制台输入文本时，结尾`System.in`并不容易到达。通常是 Ctrl-D 可以结束。添加自己的停止机制是个好主意，否则大多数人不知道如何结束程序。
*   您需要检查从堆栈中弹出的括号是否与刚刚输入的括号匹配。
*   您应该检查堆栈最后是否实际上是空的。

如果你这样做，你最终会得到类似的东西

```
// a stack. You can use your own instead.
Deque<String> stack = new LinkedList<String>();
Scanner kybd = new Scanner(System.in);

String bracketentered;

// 1) repeat while there is more, CTRL-D should end here.
while (kybd.hasNext()) {
    System.out.print("Enter bracket or 'q' to quit:");
    bracketentered = kybd.next();

    if (bracketentered.equals("q")) {
        break; // end this loop
    }

    if ("(".equals(bracketentered)) {
        // just push to stack
        stack.push(bracketentered);
    }
    else if (")".equals(bracketentered)) {
        // in case the stack is empty:
        // stack.pop() throws an exception
        // stack.poll() returns null
        String opposingBracket = stack.poll();

        // there must be a "(" on the stack(
        if (!"(".equals(opposingBracket)) {
            System.out.println("Wrong bracket");
        }
    }
    else {
        // in case it's not ( or )
        System.out.println("Illegal input:" + bracketentered);
    }
}
// 3) loop finished via "q" or end of input - check that stack is empty
if (!stack.isEmpty()) {
    System.out.println("You forgot to close the following brackets:");
    while (!stack.isEmpty()) {
        System.out.print(stack.poll() + " ");
    }
    System.out.println();
} 
```

* * *

关于循环中的堆栈与计数括号：一个非常简单的括号计数算法只在最后检查将允许`) (`，一个在每个步骤中检查的更聪明的算法可能会因多括号组合而失败，例如`[ ( ] )`. 堆栈确保它们是正确分层的，例如`[ () ]`.

# sql-server-2000 - 用于显示列中子记录的重复数据的 SQL 查询

> ID：13565765
> 
> 赞同：0
> 
> 时间：2012-11-26T13:24:30.040
> 
> 标签：sql-server-2000, pivot, duplicate-data

我在 SQL Server 2000 数据库中有以下表：

**掌握**

```
MasterID | Details   | [other fields]
=====================================
PK (int) | Free text | ... 
```

**日志表**

```
LogID    | MasterID | UserID    | LogDate    | LogText
==========================================================
PK (int) | FK (int) | VarChar(2)| Date stamp | Free text 
```

每个主记录可能有许多日志条目。

我有一个查询，它为每个主行提取最近的三个关联日志条目，如下所示。请注意，执行适当的转换和格式化以实现`LogData`连接（为清楚起见省略）：

```
SELECT 
    M.MasterID, M.Details, L.LogDate + L.UserID + L.LogText AS LogData 
FROM
    MasterTable M 
INNER JOIN 
    LogTable L ON M.MasterID = L.MasterID 
    AND L.LogID IN (SELECT TOP 3 LogID FROM LogTable 
                    WHERE MasterID = M. MasterID ORDER BY LogDate DESC) 
```

这会产生如下输出：

```
MasterID | Details | LogData
========================================================
1        | First   | 05/11/2012 AB Called Client  
2        | Second  | 08/11/2012 CD Client Visit  
2        | Second  | 07/11/2012 CD Called Client  
2        | Second  | 05/11/2012 AB Called Client 
```

我需要实现的是将第二个表中的数据显示为输出中的列，所有数据都针对每条主记录进行报告，从而避免重复数据。像这样：

```
MasterID | Details | LogData1                    | LogData2                    | LogData3
===========================================================================================================
1        | First   | 05/11/2012 AB Called Client | (null)                      | (null)  
2        | Second  | 08/11/2012 CD Client Visit  | 07/11/2012 CD Called Client | 05/11/2012 AB Called Client 
```

请注意，在现实世界的需求中，此解决方案将是扁平化 5 个表的一部分，输出由大约 20,000 行和 90 列数据组成。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:37:20.150

我要发布这个，只是为了表明它可以完成，但强烈建议，不要通过 SQL 来完成。应该通过显示在您的列上更加动态的 UI 来完成。即使那样，我也会以不同的方式设计它。

```
-- create master table
DECLARE @MasterTable TABLE (
    [MasterID] [int] IDENTITY (1, 1) NOT NULL ,
    [Details] [varchar] (50) ,
    [AdditionalField_1] [varchar] (50) ,
    [AdditionalField_n] [varchar] (50) 
)
-- create log table
DECLARE @LogTable TABLE (
    [LogID] [int] IDENTITY (1, 1) NOT NULL ,
    [MasterID] [int] NULL ,
    [UserID] [varchar] (2) ,
    [LogDate] [datetime] NULL ,
    [LogText] [varchar] (50) 
) 
-- insert into master table
INSERT INTO @MasterTable  (Details)
        VALUES ('First')
INSERT INTO @MasterTable  (Details)
        VALUES ('Second') 
-- insert into log table
INSERT INTO @LogTable  (MasterID, UserID, LogDate, LogText)
        VALUES (1, 'AB', '05/11/2012', 'Called Client')   
INSERT INTO @LogTable  (MasterID, UserID, LogDate, LogText)
        VALUES (2, 'AB', '05/11/2012', 'Called Client')   
INSERT INTO @LogTable  (MasterID, UserID, LogDate, LogText)
        VALUES (2, 'CD', '07/11/2012', 'Called Client')   
INSERT INTO @LogTable  (MasterID, UserID, LogDate, LogText)
        VALUES (2, 'CD', '08/11/2012', 'Client Visit') 
-- create table to display data
DECLARE @MyTemp TABLE (MasterID INT, Details VARCHAR(50), LogData1 VARCHAR(50), LogData2 VARCHAR(50), LogData3 VARCHAR(50))
INSERT INTO @MyTemp SELECT MasterID, Details, NULL, NULL, NULL FROM @MasterTable
-- create vars
DECLARE @ID INT, @NewID INT, @MasterID INT, @NewValue VARCHAR(100)
SET @ID = 0
-- loop through data
WHILE @ID >-1
BEGIN
    -- clear vars
    SELECT @NewID = NULL, @MasterID = NULL, @NewValue = NULL
    -- get first record
    SELECT TOP 1    
        @NewValue = CONVERT(VARCHAR(10), LogDate, 103)+ ' ' + UserID + ': ' + LogText
    ,   @MasterID=MasterID
    ,   @NewID=LogID 
    FROM @LogTable WHERE LogID>@ID
    -- if no data, exit loop
    IF @NewID IS NULL
        BREAK
    -- update record based on valuds in fields
    UPDATE m 
        SET @ID = @NewID
        ,   LogData1 = (CASE WHEN m.LogData1 IS NULL THEN @NewValue ELSE m.LogData1 END)
        ,   LogData2 = (CASE WHEN m.LogData1 IS NOT NULL THEN 
                            (CASE WHEN m.LogData2 IS NULL THEN @NewValue ELSE m.LogData2 END)
                        ELSE m.LogData2 END)
        ,   LogData3 = (CASE WHEN m.LogData1 IS NOT NULL THEN 
                            (CASE WHEN m.LogData2 IS NOT NULL THEN 
                                (CASE WHEN m.LogData3 IS NULL THEN @NewValue ELSE m.LogData3 END)
                             ELSE m.LogData3 END)
                        ELSE m.LogData3 END)
    FROM @MyTemp m
    WHERE m.MasterID=@MasterID
END
--display all data
SELECT * FROM @MyTemp 
```

# ios6 - iOS 6 核心蓝牙 - 未知错误 128

> ID：13565766
> 
> 赞同：1
> 
> 时间：2012-11-26T13:24:31.853
> 
> 标签：ios6, core-bluetooth, bluetooth-lowenergy

在使用 iOS 6.0 和我们使用 BT LE GATT 配置文件的自定义设备时 - 我们看到了这个不寻常的错误

**CoreBluetooth [警告] 未知错误：128**

顺便说一句，这是 iOS 6.0 唯一的问题，因为我们在 iOS 5.1 上没有这个问题，并且在那里一切正常。

任何想法或建议将不胜感激！

# php - PHP - 语法错误，意外的 T_CONSTANT_ENCAPSED_STRING

> ID：13565768
> 
> 赞同：14
> 
> 时间：2012-11-26T13:24:37.880
> 
> 标签：php

我对 PHP 很陌生，不知道为什么会这样，我查看了其他在线项目，但是我似乎不明白为什么会出现这个错误。

```
<?php
include_once('assets/libs/posicloud/posicloud.php');

    $cloud=new posicloud();
    $out='';
    foreach ($cloud->list_templates() as $key=>$template)
    {
$out.='<option value=''.$key.'">'.$value["name"].';
    }
  return $out;
?> 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T13:31:22.533

当你在 PHP 中处理字符串时，你需要特别注意格式，使用`"`或`'`

```
$string = 'Hello, world!';
$string = "Hello, world!"; 
```

这两个都是有效的，以下是无效的：

```
$string = "Hello, world'; 
```

您还必须注意，`'`以开头的文字内部`"`不会结束字符串，反之亦然。因此，当您有一个包含 的字符串时，`'`通常最好使用双引号。

```
$string = "It's ok here"; 
```

转义字符串也是一种选择

```
$string = 'It\'s ok here too'; 
```

可以在[文档中找到更多信息](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:26:41.147

错误的引用：（并且缺少选项结束标记 xd）

```
$out.='<option value="'.$key.'">'.$value["name"].'</option>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:25:54.580

```
'<option value=''.$key.'">' 
```

应该

```
'<option value="'.$key.'">' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:27:50.337

您的代码中有一个 sintax 错误：

尝试更改此行

```
$out.='<option value=''.$key.'">'.$value["name"].'; 
```

和

```
$out.='<option value="'.$key.'">'.$value["name"].'</option>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:26:11.770

```
$out.='<option value="'.$key.'">'.$value["name"]; 
```

me funciono con esta

```
"<a  href='javascript:void(0)' onclick='cargar_datos_cliente(\"$row->DSC_EST\")' class='button micro asignar margin-none'>Editar</a>"; 
```

# wordpress - 多合一的 seo 包和 qtranslate 标题属性

> ID：13565773
> 
> 赞同：1
> 
> 时间：2012-11-26T13:24:51.710
> 
> 标签：wordpress, plugins, seo, title, translate

现在有没有人可以`[:en]text[:fr]other text`在`Title Attribute:`选项中使用，所以当我在英文版网站上仅显示链接标题属性中的英文文本时，当我在法文版上仅显示法文文本时，在此它同时显示了这个例子：

[:en]文本[:fr]其他文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:33:47.633

qTranslate 和 All-in-one SEO 存在一些问题，因为它们处理标题的方式。我还没有找到解决方案，但您可以尝试：

1.  看看[这个解决方案](http://www.matteoionescu.com/wordpress/qtranslatemeta/#squeezeform)
2.  更改其中一个插件 - [Yoast](http://wordpress.org/extend/plugins/wordpress-seo/)、[Polyglot](http://fredfred.net/skriker/index.php/polyglot/)、[WPML的 WordPress SEO](http://wpml.org/)

# c# - 我什么时候应该在事件聚合器上使用事件处理程序？

> ID：13565774
> 
> 赞同：10
> 
> 时间：2012-11-26T13:24:52.020
> 
> 标签：c#, wpf, mvvm, event-handling, eventaggregator

什么时候应该使用事件处理程序而不是事件聚合器？

在我的代码中，我有两个由父 ViewModel 控制的 ViewModel，我试图决定是否应该只使用事件处理程序在它们之间进行对话？还是使用事件聚合器？这将只是简单的方法调用，我不需要在它们之间传递参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T13:50:34.613

在我看来，EventAggregator 通常是您想要将事件发布到*整个应用程序时使用的***重炮**，更具体地说，当您不知道到底是谁在听时。

 *在您的场景中，情况并非如此，您有 2 个视图模型想要进行通信，但它们都彼此认识。所以没有真正的理由你不能使用`events`.

我只想提一下，如果你想让它更松耦合——为每个暴露事件的视图模型创建一个接口。这样，每个 VM 将使用*其他 VM 的*接口而不是特定实例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-14T16:15:38.547

这是一个包含一些好信息的链接（截至 5/2019 仍然有效）... [https://docs.microsoft.com/en-us/previous-versions/windows/apps/xx130639(v%3dwin.10 ）](https://docs.microsoft.com/en-us/previous-versions/windows/apps/xx130639(v%3Dwin.10))（微软，棱镜）

“做出关键决策”部分描述了何时使用它。

> .NET 中的事件实现了发布-订阅模式。发布者和订阅者的生命周期通过对象引用相互耦合，订阅者类型必须具有对发布者类型的引用。
> 
> 事件聚合是一种设计模式，它可以在不方便通过对象和类型引用链接的类之间进行通信。这种机制允许发布者和订阅者在没有相互引用的情况下进行通信。因此，.NET 事件应该用于已经具有对象引用关系的组件之间的通信（例如控件和包含它的页面），事件聚合用于松散耦合组件之间的通信（例如两个单独的页面视图模型在应用程序中）。有关详细信息，请参阅事件聚合。

我粗略地认为这表明 C# 事件适用于层（UI 监听总线逻辑）或父/子（监听其包含的设备的仪器），事件聚合适用于同级（例如同级 UI 面板或设备到设备的通信） ）。*

# excel - 如何在不使用 Excel 的情况下运行宏

> ID：13565776
> 
> 赞同：0
> 
> 时间：2012-11-26T13:24:58.220
> 
> 标签：excel, vba

我是一名 DB Guy，我对 VB 一无所知。我在 Excel 中有一个宏，在 Excel 中我有交叉表记录。我的宏会将交叉表记录转换为表格记录。但我的要求是我想在 excel 之外运行相同的宏。.VBS 文件应该在那里，每当我们运行 .VBS 时，它应该从某个地方选择 excel 并将交叉表记录转换为表格记录并保存在某个不同的位置。我通过谷歌搜索创建了相同的代码，有人请查看我的以下代码并帮助我使用正确的代码。

```
Sub RunMacro()

Dim xlApp 'As Excel.Application 

Dim xlBook 'As Workbook 

Dim xlSheet 'As Worksheet

Dim wsCrossTab 'As Worksheet

Dim wsList 'As Worksheet

Dim iLastCol 'As Long

Dim iLastRow 'As Long

Dim iLastRowList 'As Long

Dim rngCTab 'As Range 'Used for range in Sheet1 cross tab sheet

Dim rngList 'As Range 'Destination range for the list

Dim I 'As Long

Set xlApp = CreateObject("Excel.Application")

Set xlBook = xlApp.Workbooks.Open("D:\Source.xls")

CrossTabToList()

xlBook.SaveAs "D:\Results.xls"

xlApp.Quit

End Sub

Sub CrossTabToList()

Set wsCrossTab = Worksheets("Tabular")

Set wsList = Worksheets.Add

'Find the last row in Sheet1 with the cross tab

iLastRow = wsCrossTab.Cells(Rows.Count, "A").End(xlUp).Row

'Set the initial value for the row in the destination worksheet

iLastRowList = 2

'Find the last column in Sheet1 with the cross tab

iLastCol = wsCrossTab.Range("A8").End(xlToRight).Column

'Create a new sheet and set the heading titles

wsList.Range("A1:C1") = Array("CATEGORY", "SUBCATEGORY", "VALUE")

'Start looping through the cross tab data

For I = 2 To iLastRow

Set rngCTab = wsCrossTab.Range("A" & I) 'initial value A2

Set rngList = wsList.Range("A" & iLastRowList) 'initial value A2

'Copy individual names in Col A (A2 initially) into as many rows as there are data columns in the cross tab (less 1 for Col A).

rngCTab.Copy rngList.Resize(iLastCol - 1)

'Move up a I rows less one and across one column (using offset function) to select heading row. Copy.

rngCTab.Offset(-(I - 1), 1).Resize(, iLastCol - 1).Copy

'Paste transpose to columns in the list sheet alongside the names

rngList.Offset(0,1).PasteSpecial Transpose:=True

'Staying on same row (2 initially) copy the data from the cross tab

rngCTab.Offset(, 1).Resize(, iLastCol - 1).Copy

'Past transpose as column in list sheet

rngList.Offset(0, 2).PasteSpecial Transpose:=True

'Set the new last row in list sheet to be just below the last name copied

iLastRowList = iLastRowList + (iLastCol - 1)

'increment I by 1

 Next I

Application.DisplayAlerts = False

Sheets("Tabular").Select

ActiveWindow.SelectedSheets.Delete

Application.DisplayAlerts = True

Sheets("Sheet1").Select

Sheets("Sheet1").Name = "Results"

objwkbk.SaveAs "D:\Results.xls"

End Sub 
```

* * *

谢谢，

普拉文

* * *

正如我提到的，我不是 Java 开发人员或编码人员，我是数据库人员，我对 Java 一无所知。我想将上面的代码用作 .VBS 文件。我希望有人更正我上面的代码以使用它一个 .VBS 文件。如果你能做到，我们将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:59:38.637

这是一个非常好的主意。Excel 文件中的 VBA 可能会使用户感到困惑，因此我尽量避免这种情况。

我建议将您的过程存储在 Access 文件中。转换它涉及一些工作，但这应该让你开始：

1.  创建一个新的访问数据库
2.  在您的新数据库中，创建一个新的 VBA**模块**。将您的代码粘贴到那里。
3.  添加最新版本的**Microsoft Excel 对象库**。
4.  进行任何其他必要的更改以使代码再次正常工作（您必须进行一些试验和错误。重复运行代码并在错误消息弹出时处理它们）
5.  将您的**Sub**更改为**函数**（您需要这样做才能从宏中调用它）
6.  制作一个新的**宏**。使用参数**RunMacro()**添加操作**RunCode**

 **以后，您所要做的就是打开数据库并单击宏以运行代码。**

# php - 为什么 Windows 服务器上的查询不起作用

> ID：13565778
> 
> 赞同：0
> 
> 时间：2012-11-26T13:25:01.427
> 
> 标签：php, mysql, linux, windows

我遇到了一个奇怪的问题 - 不幸的是，我正在 Linux 环境中开发，但在窗口环境中托管。在 linux 上，查询返回正确的数据，在 windows 上我只收到 NULL ...

```
SELECT *, (SELECT image_name FROM images WHERE images.id = news.image_id ) as image FROM news 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:35:49.230

我不知道为什么它不能像写的那样工作，但你可以尝试如下写。

```
SELECT  n.*, i.image_name image
FROM    images i,
        news n
WHERE   n.image_id = i.id 
```

这应该返回与我认为的原始帖子相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:30:16.283

尝试 INNER JOIN。您的 sql 特定于某些数据库

# android - 如何在显示之前获取 webview 的内容？

> ID：13565779
> 
> 赞同：0
> 
> 时间：2012-11-26T13:25:10.103
> 
> 标签：android

如何在显示之前获取 webview 的内容？

1.  我使用 webview 加载第一个 URL，它是一个表单。

2.  用户点击表单的 sumbit 按钮（从 1 开始）后，webview 将转到第二个 URL。

3.  我需要获取第二个 URL 的内容来执行一些特殊操作。但我不知道如何获取内容。

这两个 URL 来自服务器端。我的APP是客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:29:21.617

覆盖 onPageStarted 或在您的 WebViewClient

```
@Override
         public void onPageStarted(WebView view, String url, Bitmap favicon) {
             // do stuff before loading the url
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:33:35.273

使用 WebViewClient 类你可以这样做

```
webView.setWebViewClient(new WebViewClient() {
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
         // do stuff before loading the url
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:12:22.917

我已经解决了这个问题。我使用这种方法： http: [//lexandera.com/2009/01/extracting-html-from-a-webview/](http://lexandera.com/2009/01/extracting-html-from-a-webview/)

# javascript - 使用 JavaScript 启用/禁用rich:calendar 不起作用

> ID：13565783
> 
> 赞同：0
> 
> 时间：2012-11-26T13:25:23.110
> 
> 标签：javascript, jsf-2

我有一个丰富的：日历：

```
<rich:calendar
  id                  = "endDate"
  value               = ...
  datePattern         = "yyyy-MM-dd"
  enableManualInput   = "true"
  disabled        = "#{detailModel.mode == detailModel.viewMode}"
/> 
```

我想使用 javascript 启用/禁用它。我有以下代码，但它对日历没有影响：

```
<script type="text/javascript">
 //<![CDATA[ 
  function setDafaults(defType, endDate, startTime)
  {
    var definitionType = defType.options[defType.selectedIndex].text;

    if(definitionType == 'DEFAULT')
    {
       endDate.disabled = true;
       startTime.value =  "#{detailModel.afterObject.getDefaultStartTime()}";
    }
    else
    {
       endDate.disabled = false;
       startTime.value =  '';
    }
  }
 //]]>

</script> 
```

当 selectOneMenu 更改时调用该函数：

```
...
onchange="setDafaults(document.getElementById('detailForm:definitionType'),
                      document.getElementById('detailForm:endDate'),
                      document.getElementById('detailForm:startTime'))
... 
```

我错过了什么/错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:45:42.920

您的错误是您没有通知 JSF 它已启用。`disabled`JSF 将在处理表单提交期间重新评估该属性。但是，由于您使用 JS 而不是使用 JSF 启用它，因此 JSF 从未被指示它已启用，因此仍认为它已禁用并因此将跳过它。

你基本上有2个选择：

1.  使用 JSF 而不是使用 JS 启用它。
2.  让 JS 设置一些（隐藏的）请求参数，您也可以在`disabled`属性中检查这些参数。

我会选择 JSF 方式。例如

```
<h:selectOneMenu value="#{bean.definitionType}">
    <f:selectItem itemValue="DEFAULT" /> 
    <f:selectItem itemValue="NOT_DEFAULT" /> 
    <f:selectItem itemValue="SOME" /> 
    <f:ajax render="endDate" />
</h:selectOneMenu>
<rich:calendar id="endDate" ... disabled="#{bean.definitionType == 'DEFAULT'}" /> 
```

基本上就是这样。不需要一些讨厌的 JS。

### 也可以看看：

*   [当 UI 可以由 CSS、HTML、JavaScript、jQuery 实现时，JSF 需要什么？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery/4424775#4424775)

# java - 为什么有些 Java 程序要求 JDK 而有些要求 JRE？

> ID：13565785
> 
> 赞同：3
> 
> 时间：2012-11-26T13:25:33.603
> 
> 标签：java

> **可能重复：**
> [Java SE 6 vs. JRE 1.6 vs. JDK 1.6 - 这些是什么意思？](https://stackoverflow.com/questions/250517/java-se-6-vs-jre-1-6-vs-jdk-1-6-what-do-these-mean)

我发现有时应用程序要求`java_home`指向 JDK 并且不能与 JRE 一起使用。

为什么会这样？这是正确的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:33:45.523

**短版：**一些应用程序使用*仅*包含在 JDK 中的库/代码。

**更长的版本：** *通常*每个 Java 程序都应该能够仅使用 JRE 运行。大多数应用程序实际上都与 JRE 一起工作。

现在 JDK 附带了一些额外的库和工具，这些库和工具*通常*只在*开发*应用程序时需要（而不是在您只需要运行它们时）。

但有时，应用程序会决定使用一些在*运行时*随 JDK 提供的代码。这是非常罕见的并且通常不是一个好主意（除非该应用程序本身是关于开发 Java 应用程序的）。

旧版本 Apache Tomcat 的一个很好的例子：它使用与 JDK 捆绑在一起的 Java 编译器将 JSP 代码编译成字节码。为此，它使用`tools.jar`了包含在 JDK 中但不随 JRE 提供的内容。

较新的 Tomcat 为此切换到单独的编译器（我认为它基于 Eclipse 编译器）并且不再需要 JDK：它们仅使用 JRE 就可以正常运行。

@Rekin 提到了另一个很好的例子：Maven 使用 JDK，因为它实际上编译 Java 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:35:29.970

我从事的一个应用程序是使用 JDK 编译自动生成的 java 并在此之后为用户加载它（面向 db 的编译器/运行器）。

@Joachim 有更完整的答案。

# objective-c - 如果 A == B，这是否意味着 [A isEqual:B] 为真？

> ID：13565787
> 
> 赞同：0
> 
> 时间：2012-11-26T13:25:36.070
> 
> 标签：objective-c

我刚刚发现了一个错误。跟踪错误，我发现当 A（因此 B）为 nil 时违反了这一点。

我只是想确保我在这里没有遗漏任何东西。

问题的答案是真的还是我只是发现了一个例外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:31:09.007

发送到的消息的返回码`nil`将始终为 0，这等于`NO`或为假。因此，您观察到的行为是预期的并且是正确的，即使它可能看起来并不完全直观。不同`nil`的对象并不完全相等，因为`nil`实际上并没有同一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:31:22.750

在 Objective-c 中，当 A 为 nil 时，您可以向 nil 对象发送消息，即 [A isEqual:B]。但是你不能指望一个 nil 对象返回一个结果！我还没有找到 Apple ref，但我怀疑返回值要么未定义，要么本身设置为 nil/false/0。

# asp.net-mvc - 如何在 MVC 应用程序中实现类似 google 的搜索文本框？

> ID：13565790
> 
> 赞同：2
> 
> 时间：2012-11-26T13:25:48.400
> 
> 标签：asp.net-mvc

我有一个 MVC 应用程序。在其中我有一个根据文本框值的文本框，我想在视图中列出从数据库到网格的搜索项目，而无需回发。如果这个问题是错误的，我是 MVC 的新手，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:12:07.817

如果您是 ASP.NET MVC 的新手，我建议您使用这些教程，它们是免费的。

[http://www.asp.net/mvc/pluralsight](http://www.asp.net/mvc/pluralsight)

要回答您的问题，您需要执行以下操作（高级）

1.  编写一些 JavaScript / JQuery 来发送文本框值的 Ajax 请求，这应该会在一段时间后触发 KeyUp 事件，也是在输入 x 个字符以获得一些有意义的结果之后。

2.  此 Ajax 请求将调用一个控制器操作，您可以在其中执行数据库查找，这将返回 JSON。

3.  您的 Javascript 应该呈现结果，以便用户可以选择一个结果，这将填充文本框，然后用户可以单击搜索按钮进行搜索

[http://jqueryui.com/autocomplete](http://jqueryui.com/autocomplete)是一个插件，可以完成我上面提到的大部分客户端功能。

这是一个不错的 ASP.NET MVC AJAX 教程：

[http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-ajax&mode=live&clip=0&course=aspdotnet-mvc3-intro](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-ajax&mode=live&clip=0&course=aspdotnet-mvc3-intro)

**更新**

1.  您的 Javascript 应该呈现结果，以便用户可以选择一个结果，这将填充文本框，然后用户可以单击搜索按钮，或者可以在没有最后一次单击的情况下触发，无论如何您将不得不重新绑定/呈现您的网格应用选定的过滤器后，这必须是另一个 AJAX 请求。

您可能需要考虑使用其中之一来帮助数据绑定和 AJAX 调用

**[弹性网格： http](http://flexigrid.info/) : **//flexigrid.info/****

 ****jQuery 网格**：[http ://www.trirand.com/blog/](http://www.trirand.com/blog/)

**jqGridView**：[http ://plugins.jquery.com/project/jqGridView](http://plugins.jquery.com/project/jqGridView)

**英格丽德**：[http ://reconstrukt.com/ingrid/](http://reconstrukt.com/ingrid/)

**SlickGrid** [http://github.com/mleibman/SlickGrid](http://github.com/mleibman/SlickGrid)

**数据表** [http://www.datatables.net/index](http://www.datatables.net/index)**

# python - 从 json 转换为通过 python 发布数据

> ID：13565791
> 
> 赞同：0
> 
> 时间：2012-11-26T13:25:51.240
> 
> 标签：python, json, post, decoder

给定 json`{"foo":"bazz","1":2}`

我想将其转换为 POST 数据：

```
"foo"="bazz";"1"=2; 
```

（如果它是从 html 表单发布的数据格式）

有什么存在`decoder`吗`json>> POST data`？如果没有，下一个脚本也会这样做吗？

```
json_body = {"foo":"bazz","1":2}
data = ''
for key, value in json_body.items():
    data += '"{key}"={value};'.format(key=key, value=value)
print data
>> "foo"="bazz";"1"=2; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:27:35.300

使用[`urllib.parse.urlencode`](http://docs.python.org/library/urllib.parse.html#urllib.parse.urlencode)：

```
from urllib import urlencode

data = urlencode(json_body) 
```

这会产生`x-www-form-urlencoded`数据，这是浏览器在发布 HTML 表单时使用的默认 mime 类型。

# mysql - 用另外两列的内容替换MYSQL中一整列的内容

> ID：13565796
> 
> 赞同：-2
> 
> 时间：2012-11-26T13:26:01.850
> 
> 标签：mysql, sql

我在一个表中有三列：登录名、姓名和姓氏。

我想用 Name 和 Familyname 的内容替换 Login 列中的所有内容。

例子：

*   登录：janvdv
*   姓名：一月
*   姓氏：范德沃尔德

我希望登录为“Jan Vandevoorde”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:27:47.903

```
UPDATE your_table SET login = CONCAT_WS(' ', name, familyname); 
```

# git - 裸 git repo 的更新

> ID：13565802
> 
> 赞同：1
> 
> 时间：2012-11-26T13:26:22.427
> 
> 标签：git, repository

我的本地机器上有一个 git 存储库。当我完成一项功能的工作时，我提交并将更改推送到 2 个“裸”存储库（生产和暂存）之一。

post-receive 钩子在本地推送后部署代码。它运行良好，但我需要获得 2 个遥控器（生产和登台）上发生的任何更改，例如当用户安装新扩展时。我需要能够将这些更改“拉”到我的本地。

我应该将存储库转换为每个都有一个工作树吗？我可以将远程存储库上的更改拉入代码库吗？我知道您可能对我的设置有疑问，但我不知道您需要知道什么，请询问。感谢您帮助我理解这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:55:39.067

所以这就是答案：在这种情况下，你可以从 repo 中提取。关键是；而不是从远程推送，您需要拉到本地。即（在本地）：

`git fetch origin master:master`

希望能节省别人一些时间；）

# sql - VB/Classic ASP GetRows 的参数化查询？

> ID：13565805
> 
> 赞同：0
> 
> 时间：2012-11-26T13:26:27.683
> 
> 标签：sql, sql-server, asp-classic, parameters

我正在维护一个运行经典 ASP 的系统，我只是想知道是否有任何简单的方法来调整此功能，以便我可以使用参数化查询？

```
Function GetRSArray(strSQL)

    Set objRS = oConn.Execute(strSQL)

    If Not objRS.EOF Then 
        oFarrRS = objRS.GetRows()
        GetRSArray = oFarrRS
    Else
        GetRSArray = ""
    End if

    Set objRS = Nothing

End Function 
```

# c# - 在 .NET 中使用对象与局部变量和参数

> ID：13565812
> 
> 赞同：0
> 
> 时间：2012-11-26T13:26:54.737
> 
> 标签：c#, asp.net, .net

只是想知道为以下场景编写一些代码的最有效方法是什么......

我有一个简单的 Web 表单，它收集数据然后将其插入数据库。以下哪个示例最有效或更好，为什么？

我目前正在使用第一个场景的版本（但有更多字段和正确的 HTML 编码等）。我觉得它读起来更干净，但它是否过火或浪费性能和质量代码？

**代码场景一**

```
void GetData() {
    FormResponse myFormResponse = new FormResponse();
    FormResponse.Name = txtName.Text;
    FormResponse.Email = txtEmail.Text;
    FormResponse.Message = txtMessage.Text;

    StoreData(myFormResponse);
}

void StoreData(FormResponse myFormResponse) {
    ... //Database connection code

    DbCommand.Parameters.AddWithValue("@Name", myFormResponse.Name);
    DbCommand.Parameters.AddWithValue("@Email", myFormResponse.Email);
    DbCommand.Parameters.AddWithValue("@Message", myFormResponse.Message);

    ...//More DB handler code
}

Public Class FormResponse {
    public string Name { get; set; }
    public string Email { get; set; }
    public string Message { get; set; }
} 
```

**代码场景 2**

```
void GetData() {

    string strName = txtName.Text;
    string strEmail = txtEmail.Text;
    string strMessage = txtMessage.Text;

    StoreData(strName, strEmail, strMessage);
}

void StoreData(string strName, string strEmail, string strMessage) {
    ... //Database connection code

    DbCommand.Parameters.AddWithValue("@Name", strName);
    DbCommand.Parameters.AddWithValue("@Email", strEmail);
    DbCommand.Parameters.AddWithValue("@Message", strMessage);

    ...//More DB handler code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:44:42.480

在编写这样的代码时，您应该始终考虑长期问题，始终使您的程序尽可能地可扩展，并为未来的开发人员提供可读性。是的，总是考虑性能，但在这种情况下，性能差异（如果有的话）是非常微不足道的。

始终牢记面向对象的编码，因此第一种方法将是我的理想选择，FormResponse 对象位于 Models 类中。想象一下，如果您有两种形式，您可以轻松地重用该对象，并且如果您需要发送附加到该单独对象的任何额外数据，则该函数调用仍然适用，即私有函数（objectName）永远不会改变。

正如我所说，始终考虑您所做的一切的可扩展性。如果您需要在响应函数中格式化您的姓名，只需执行以下操作：

```
public FormRespose() 
{
     public string Name {get; set;}
     public string FirstName { // use Name here to get first name from it, or turn uppercase, lowercase, whatever }
} 
```

希望这足以说明我的观点。

# java - 将文件读取到具有多种数据类型的arraylist

> ID：13565814
> 
> 赞同：0
> 
> 时间：2012-11-26T13:27:02.537
> 
> 标签：java, swing, types, text-files

我在从文本文件读取到数组列表时遇到问题。问题是我不知道如何读取多种类型，因为在我的数组列表中有点、字符串、布尔值，因此线拆分不起作用。我检查了所有主题，但没有找到解决方案。

编辑：Elrendezes 类看起来像

```
 class Elrendezes {
   protected Point Po;
   protected String hely;
   protected String foglalo;
   protected boolean foglalt;
  } 
```

这是我的文件的样子：

```
 java.awt.Point[x=16,y=13], 1, name1, false 
```

阅读方法是

```
public static ArrayList<Elrendezes> readDataFromFile(){
      ArrayList<Elrendezes> ElrList = new ArrayList<Elrendezes>();
      FileInputStream fstream = null;
      try
      {
          fstream = new FileInputStream("src/files/DataFile.txt");
          BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
          String strLine = null ;
          String tokens[] = strLine.split(", ");

          while ((strLine = br.readLine()) != null)   {
           tokens = strLine.split(", ");
          // THIS DOES NOT WORK: ElrList.add(new Elrendezes(tokens[0], tokens[1], tokens[2], tokens[3]));
          }
      }
      catch (IOException e) {
        e.printStackTrace();
      }
      finally {
          try { fstream.close(); } catch ( Exception ignore ) {}
      }
      return ElrList;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:53:08.657

由于您可能不知道正则表达式，我将使用：

1.  获取`x`和`y`：

    ```
    int v1 = strLine.indexOf("x=");
    int v2 = strLine.indexOf(",y=");
    int v3 = strLine.indexOf("]")  ; 
    string x = strLine.substring(v1 +2, v2);
    string y = strLine.substring(v2 +3, v3); 
    ```

2.  其余的断点表示。

    ```
    string secondpart = strLine.substring(v3+1); 
    ```

3.  现在`secondpart`只使用逗号作为分隔符。
4.  [使用Integer.parseInt()](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)等转换字符串表示形式。

5.  构造你的对象。

注意：写的比较匆忙，检查x、y、secondpart使用的索引是否正确。我还假设输入是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:57:21.703

我认为您必须选择一个字符来拆分字符串。

将拆分字符串转换为布尔值、整数等。

```
Elrendezes(String[] s){
Point Po = s[0]; // dont know how to cast string to point, never done before
hely = s[1];
foglalo = s[2];
foglalt = Boolean.parseBoolean(s[3]);
} 
```

# java - 拆分非逗号分隔的字符串

> ID：13565815
> 
> 赞同：1
> 
> 时间：2012-11-26T13:27:02.553
> 
> 标签：java, regex, string

我有一个查询连接两列的值并返回一个字符串，如下所示：

```
423545(50),7568787(50),53654656,2021947(50), 
```

现在我需要处理没有括号中的值的单个数字。我可以重新运行另一个查询来检索值，但我认为拆分现有字符串而不是进行另一个数据库调用更有效。

如何拆分上述字符串以删除括号中的值？我想将数字存储在 ArrayList 中。arrayList 将包含 423545,7568787,53654656,2021947，（不带逗号）

请注意，并非所有列都有括号内的值 - 请参阅第三列字符串末尾可能有逗号。

`String.split()`如果它只是用逗号，我可以使用它来拆分它，但我猜上述格式需要一个正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:29:24.237

```
String[] list = str.split("(\\(\\d+\\))?,"); 
```

请参阅**[此演示](http://ideone.com/2DHBo3)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:32:01.097

使用[String.replaceAll(regex, replacement)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)查找所有出现的括号数字，并将它们替换为“”，然后拆分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:29:21.243

首先用正则表达式删除所有括号及其值，然后在结果上拆分字符串。

# android - PhoneGap 如何处理屏幕尺寸变化？

> ID：13565816
> 
> 赞同：1
> 
> 时间：2012-11-26T13:27:02.757
> 
> 标签：android, cordova

使用**PhoneGap**调整应用程序的屏幕尺寸的最佳方法是什么？例如，我使用**HTML**和**CSS**制作了一个应用程序，它在我的 Android 上看起来不错，但是当我们在小屏幕 Android 手机上测试它时，它看起来不错，但不是那么好，需要更改一些字体和图形。反之亦然，可扩展到平板电脑大小的屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:31:16.120

PhoneGap 不负责处理屏幕尺寸的变化。您的 html/css 应该处理这个问题。看看什么是[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。也许尝试使用[http://jquerymobile.com/](http://jquerymobile.com/)或[http://twitter.github.com/bootstrap/ 之](http://twitter.github.com/bootstrap/)类的东西。

还有一个：http: [//foundation.zurb.com/](http://foundation.zurb.com/)

# google-maps-api-3 - Google maps API v3 如何重构 ThoroughfareName？

> ID：13565820
> 
> 赞同：1
> 
> 时间：2012-11-26T13:27:13.050
> 
> 标签：google-maps-api-3

我正在使用 google maps api v2 的 ThoroughfareName 属性，这对于仅获取地址部分非常方便。

我在 api v3 中没有看到任何与此等效的东西。是否有一些最佳实践/公认的算法可以使用 address_components 重新构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:12:59.657

到目前为止，我所做的是使用 address_components + street_number 的路线类型。这可能不是正确的算法，但它适合我的需要。

# asp-classic - ASP Classic - 使用 FileSystemObject 确定文件是二进制文件还是文本 (ascii)

> ID：13565822
> 
> 赞同：0
> 
> 时间：2012-11-26T13:27:15.877
> 
> 标签：asp-classic, vbscript, filesystemobject

如果我将文件分类为二进制（例如：.exe、.mp3、.docx、.pdf）和文本（例如：rtf、txt、html、xml），那么我们如何使用经典的 ASP 的 FSO 来确定什么样的文件一个特定的文件是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:48:25.757

根据[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2005/04/20/410127.aspx)的说法，FSO 不适用于二进制文件。但是使用 .Read(n) 来获取前几个字符并将它们与已知签名进行比较应该可以工作。

附言

如果您按照记者的建议进行全面扫描以对数据进行分类，请确保使用更现代的规则（例如，UTF16 文本文件可能包含 50% 的“零”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:49:33.037

我在网上查了一下，所有网友的意见都是一样的。没有直接的方法可以有所作为。显然你必须手动完成。此[链接](http://www.xtremevbtalk.com/showthread.php?t=91871)为您提供了一组规则来区分文本文件和二进制文件。

# c++ - ObjA = C++ 中的 ObjB

> ID：13565823
> 
> 赞同：0
> 
> 时间：2012-11-26T13:27:29.323
> 
> 标签：c++, object

我在一个列表中找到了这个关于 C++ 的练习，但无法解决它。就是这样：假设我们有以下指令：

```
ObjA = ObjB; 
```

其中 ObjA 是 ClassA 的对象，而 ObjB 是 ClassB 的对象，当且仅当存在以下情况时，它将正确运行：
A. ClassA 中
的转换函数 B. ClassB 中的转换函数
C. ClassA 中的构造函数
D . ClassB 中的构造函数

可以有多个正确答案。我对这个练习的问题是它们都是对象，并且从理论上讲，你不能更改对象内部的实例——这就是我认为 '=' 会在那里做的事情。由于可能有多个正确答案，因此我认为没有一个是正确的。但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:36:58.240

你说：

> 可以有多个正确答案。

但这与

> 当且仅当

无论如何，您需要从右侧到左侧的隐式转换。

这种转换可以表示为 rhs 中的转换运算符。类型，或作为 lhs 中的构造函数。类型，或者在这种情况下（赋值）作为 lhs 中的特殊赋值运算符。类型。

* * *

**编辑**：哦，我没有考虑可能的继承关系（所谓的切片分配），但我只是在另一个答案中看到了这一点。在您给出的答案替代方案中没有提到它。我认为您应该找到一些质量更好的培训材料……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:30:53.197

> 我对这个练习的问题是它们都是对象，并且从理论上讲，你不能更改对象内部的实例——这就是我认为 '=' 会在那里做的事情。

这是不正确的。您当然可以在两个对象之间使用赋值运算符，在某些情况下，即使它们是不同的类型。这就是复制构造函数、赋值运算符和转换运算符的全部内容。

这是一个非常简单的示例，演示了一些可能性：

```
std::string s1, s2;
const char* cstr = ...;
s1 = s2;
s1 = cstr; 
```

也就是说，我认为这个问题的措辞非常糟糕。具体来说，“当且仅当”部分意味着没有一个答案是完全正确的（即使其中一些是部分正确的）。它也完全忽略了 和 之间可能存在继承关系的`ClassA`可能性`ClassB`。

> 我在一个列表中找到了这个关于 C++ 的练习

老实说，如果这个练习代表了你在该列表中找到的质量，那么考虑到其他地方进行 C++ 练习可能是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:41:04.127

如果其中任何一个为真，这将正确运行：

1.  有一个赋值运算符，`ClassA`其中接受一个类型的参数`ClassB`
2.  有一个赋值运算符，`ClassA`其中接受一个类型的参数，并且有一个可以输入的`X`转换函数。`X``ClassB`
3.  有一个转换函数可以输入`ClassA`。`ClassB`

我不知道这些如何/是否与您拥有的 ABCD 选择相匹配。

# html - 具有边界半径但没有边界的 DIV

> ID：13565825
> 
> 赞同：2
> 
> 时间：2012-11-26T13:27:39.353
> 
> 标签：html, css, internet-explorer-9, rounded-corners

我有一个带有`border-width: 0px;`和`border-radius: 5px;`（或`-moz-border-radius`等）的 div。

在 Chrome、Safari 和 Firefox 中，这工作得很好，div 得到圆角，所以它在角落里是透明的。

但是，IE9 不显示圆角（我检查过，IE 确实处于“IE9 模式”，我有一个 HTML5 文档类型并设置`X-UA-Compatible`为`IE=edge`）。只有当我添加

```
border-style: solid;
border-width: 1px; 
```

我可以让 IE9 在不声明实际边框的情况下呈现圆角吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:50:40.653

问题是 div 填充了渐变。由于 IE9 不支持 CSS 渐变，我不得不使用

```
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#79D5FF', endColorstr='#08609A'); 
```

这不适用于圆角，即`border-radius`不会切断渐变的角落。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:31:08.373

`border-top-left-radius`例如，您是否尝试过使用`border-top-right-radius`等？我以前在 div 的圆角上使用过类似的东西，它在 IE9/Chrome/FF 中工作，但不是 IE8。

# lua - Lua、WOW 和“……”

> ID：13565828
> 
> 赞同：3
> 
> 时间：2012-11-26T13:27:44.127
> 
> 标签：lua, add-on, world-of-warcraft

让我在 Lua 中沾沾自喜，*为魔兽世界*写一些简单的插件。主要是查看其他插件，检查代码等。我看到一件事让我感到困惑。我知道这`...`是一种将可变数量的参数传递给函数的方法，但我看到它在`.lua`文件的开头使用：

```
local parent, ns = ... 
```

同样，这是源代码中的第一行。我看到的对文件的唯一引用是在`.xml`文件中，作为脚本包含在内

```
<Ui>
    <Script file="unitframes\options\ouf.lua"/>
</Ui> 
```

我很好奇传入的值来自哪里......

回答：

正如下面的答案所示，WoW 正在将参数传递给脚本。显然，WoW 将以下参数传递给脚本：

1.  字符串形式的插件名称（实际上是文件夹名称）
2.  AddOn 唯一的表（通常用作 AddOn 的命名空间）。此表与插件中的所有 lua 文件共享，并提供仅“插件”作用域的上下文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:16:35.293

“在 Lua 中编程”的第 8 页

> 在脚本的主体中，表达式“...”导致脚本的参数。

因此`a`，`ns`应该接收 WOW 传入的前两个参数。

# c# - 当用户退出 autoCompleteMode 文本 c# 时如何停止输入文本

> ID：13565836
> 
> 赞同：0
> 
> 时间：2012-11-26T13:28:15.003
> 
> 标签：c#, winforms

我正在对我的文本框使用 AutoCompleteMode。它会将银行名称附加到我的文本框中。因此，当我开始使用第一个字母输入时，所有带有第一个字母的银行名称都会出现在我的文本框的下拉列表中。现在我的问题是如果用户尝试输入不是我的下拉列表的数据，则用户应该无法输入文本。所以我希望用户只输入现有的银行名称。我正在使用 AutoCompleteCustomSource 到下拉列表的文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:49:27.993

实现您的要求的最佳方法是使用 1 个文本框和 1 个组合框。他们都应该指向同一个集合。

如您所述，文本框将在自动完成模式下运行。键入后，组合框值将设置为集合中的第一个匹配值。如果没有值匹配 - 组合框值应设置为 null 或默认数据。
组合框将仅存储相应的数据子集，无法编辑所选文本。

验证和数据检索将从 Combobox 值完成。

这种方法的优点：
- 使用大量数据，用户将更容易找到他/她需要的东西。
- 检查输入值是否属于数据集或强制属于的较少代码。
- 无需验证。

可能的缺点：
- 在形式上多了一个控制。
- 应该实现同步文本框的文本和组合框集合的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:13:23.513

尝试类似：

```
bool foundSome = false;
foreach (var bankName in col)
{
foundSome = bankName.StartsWith(textBox.text);
}

if (foundSome)
   //Do some action 
```

您可以在“验证”中编写此代码，以便为插入到 txtbox 中的每个字符进行预执行。

# c++ - 从图像生成轮廓

> ID：13565837
> 
> 赞同：1
> 
> 时间：2012-11-26T13:28:24.767
> 
> 标签：c++, image, matlab, octave, contour

在 Matlab 中，有一个函数“轮廓”（[Matlab 轮廓](http://www.mathworks.com/help/matlab/ref/contour.html)）。如果我将它用于我的图像，我得到了我想要的。但我的目标是自己为我的图像编辑器实现这样的功能。我阅读了 Matlab 的“轮廓”功能的“文档”，并在此基础上使用了 Marching Squares 算法。然而，我的结果看起来“丑陋”。轮廓相互交叉，我有非常多的嵌套轮廓，这些在 Matlab 中被消除了。任何人都知道一些解决方案，如何从灰度图像生成轮廓，比如说，每 10 个亮度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:19:21.977

他们的轮廓算法的openCV源是可用的

最简单的严肃算法之一是 Paul Bourke 的[conrec （有可用的源代码），或者在](http://paulbourke.net/papers/conrec/)[imageprocessingplace](http://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/alg.html)上有一个关于流行方法的简单讨论

# asp.net-mvc-4 - 在 ASP.NET MVC4 中的同一操作下处理多个表单操作的最佳实践是什么？

> ID：13565838
> 
> 赞同：0
> 
> 时间：2012-11-26T13:28:24.860
> 
> 标签：asp.net-mvc-4, url-routing, razor-2

我在使用 Razor 引擎的 ASP.NET MVC4 项目中有以下场景：

*   我有至少 4 种不同形式的*视图。*
*   我想在相同的*操作映射*下处理所有表单 POST 。

实际上，这 4 个表单发布到不同的 Route Mapping，如下所示：

```
POST: /User/FilterRolesInUse/15
POST: /User/RemoveRoles/15
POST: /User/FilterRolesNotInUse/15
POST: /User/AddRoles/15 
```

我想知道是否可以在*同一个*路由映射下处理所有 4 个表单，所有表单都发布到`/User/Roles/15`然后控制器可以区分提交了哪个表单。这个概念类似于：

```
class UserController : Controller {

  //
  // POST: /User/Roles/
  public ActionResult Roles(int? id, object form) {
    return DelegateToFormLogic(id, form);
  }

} 
```

我只是想知道是否有可能，因为我真的想保持 URL*一致*。

欢迎任何*意见*或*建议*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:09:53.480

我看不出有一个执行多种功能的动作有什么好处。事实上，任何必须支持该代码的人都会感到困惑。我将摆脱提交表单并在您的 Web 客户端中使用 Ajax 方法（使用 JQuery ajax）来获取此视图和更新/插入/删除操作所需的数据。这样，您不必回发整个页面来执行可能仅在视图的某些部分上发生的操作，这将导致更好的页面性能和更好的用户体验。将您的控制器更改为 ASP.NET Web API 控制器，并使这些方法成为使用一致 URL 命名约定并使用 HTTP 动词来指示正在执行的操作类型的 REST API。

```
GET: /api/Role/15?InUse=True
DELETE: /api/Role/15
GET: /api/Role/15?InUse=False
POST: /api/Role 
```

你的控制器看起来像这样。

```
class RoleController : ApiController {

  public List<Role> Get(int id, boolean InUse) { ... }
  public void Delete(int id) { ... }
  public void Post(List<Role> roles) { ... }
} 
```

这保持了关注点的清晰分离，同时还保持了一致且易于理解的 URL 约定。

# mysql - mysql全文索引：为什么匹配的结果不如喜欢的结果？

> ID：13565841
> 
> 赞同：2
> 
> 时间：2012-11-26T13:28:39.980
> 
> 标签：mysql, full-text-search

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:08:00.093

在您的`match against`查询中，您正在寻找包含*确切*单词约会规则的行。但是，在`like`查询中，您正在查找包含单词 约会规则*anywhere*的行，包括在其他单词中。[您可以在boolean 模式下](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)使用全文搜索，这允许您使用星号作为通配符：

```
SELECT name FROM play_movie WHERE MATCH(name) 
AGAINST ('约会规则*' IN BOOLEAN MODE); 
```

# java - 关闭 JFrame 窗口后启动事件

> ID：13565855
> 
> 赞同：0
> 
> 时间：2012-11-26T13:29:44.297
> 
> 标签：java, swing, user-interface, jframe

关闭窗口后，我想创建一个类的对象并执行任务。关闭后：

```
setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE); 
```

我该怎么做才能在窗口关闭后立即开始新操作？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:10:20.910

当用户尝试关闭 a`JFrame`时，会发生以下事件：

*   调用在该帧上注册的 s的`windowClosing`方法。`WindowListener`
*   然后，`setDefaultCloseOperation`触发指定的动作。

有 4 个默认关闭操作：

### 不做任何事

……什么都不做。框架还在这里，很高兴地忽略了您关闭它的请求。

### 关闭时隐藏

`setVisible(false)`与调用框架的效果相同。框架变得不可见，并且可以通过调用再次显示`setVisible(true)`。

### 关闭时处置

`dispose()`与调用框架的效果相同。效果有点类似于HIDE_ON_CLOSE，不同的是这次释放了frame使用的OS资源。`setVisible(true)`如果您想让框架再次出现，您仍然可以再次调用。

调用在该帧上注册的 s的`windowClosed`方法。`WindowListener`

另外，请注意，当最后一个可显示窗口被处理掉时，[您的程序可能会终止](http://docs.oracle.com/javase/7/docs/api/java/awt/doc-files/AWTThreadIssues.html)。

### 关闭时退出

与调用相同的效果`System.exit()`。

* * *

因此，如果您想完全控制用户尝试关闭框架时发生的情况，请将默认操作设置为 DO_NOTHING_ON_CLOSE，并将您的代码`windowClosing`放入`WindowListener`. 在那里，您可以调用 setVisible(false)、dispose() 或 System.exit()，具体取决于您想要实现的目标。

您还可以将默认操作设置为隐藏、处置或关闭时退出，并将您的代码`windowClosing`放在`WindowListener`. 在这种情况下，将首先调用侦听器，然后无论如何都会执行所选操作。

最后，您还可以将默认操作设置为 DISPOSE_ON_CLOSE，并将您的代码`windowClosed`放在`WindowListener`. 这样，首先处理框架（它从屏幕上消失），然后执行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:38:35.120

称呼

```
frame.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE); 
```

并为关闭事件注册一个监听器：

```
frame.addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        JFrame frame = (JFrame)e.getSource();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // additional code here
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T14:03:33.937

```
After i close my window,i want to create an object of a class and preform a task. 
```

看着

*   `HIDE_ON_CLOSE`simplair as `setVisible(false);`，容器是可重复使用的，可以通过调用来显示它`setVisible(true);`

*   或者您可以调用`dispose()`，这意味着此容器不可重复使用，必须`isDisplayable()`在调用之前检查`setVisible(true);`

> 我想创建一个类的对象并执行一个任务

*   见[SystemTray](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)，也许可能是正确的方法

# asp.net-mvc - 负载处理程序在 MVC 中的什么位置？

> ID：13565856
> 
> 赞同：2
> 
> 时间：2012-11-26T13:30:02.677
> 
> 标签：asp.net-mvc, onload

我正在寻找将代码添加到我的 Onload 处理程序，但不确定它在 MVC 应用程序中的位置？

```
 // You may want to place these lines inside an onload handler
 CFInstall.check({
     mode: "overlay",
     destination: "http://localhost:1414/"
 });
}); 
```

上面的代码需要放在 onload 处理程序中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T13:51:28.440

如果我理解正确的话，如果你使用的是 jQuery，你只需要下面的这个表达式：

```
<script>
    $(document).ready(function() {
        // Handler for .ready() called. Put your logic here.
    });
</script> 
```

或者这个，不使用jQuery：

```
<script>
    window.onload = function(){
        // Put your logic here.        
    } 
</script> 
```

包含在您的 view.cshtml 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:57:56.977

这里你的意思是添加**窗口加载事件。**

**您可以在 js 文件**中尝试此操作：

 **```
function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}

addLoadEvent(nameOfSomeFunctionToRunOnPageLoad);

addLoadEvent(function() {
  /* more code to run on page load */ 
}); 
```

***如需更多信息，请*** [访问 Simon Willison 的博客](http://simonwillison.net/2004/May/26/addLoadEvent/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:50:31.983

我认为您可以像在任何其他 html 页面中一样将它添加到您的 cshtml 中。

```
@{
    ViewBag.Title = "Authenticate";
}

<script type="text/javascript">
    $(document).ready(function () {
        CFInstall.check({
            mode: "overlay",
            destination: "http://localhost:1414/"
        });
    });
</script>
<h2>Congrats..</h2> 
```**

# http-status-code-301 - 为已删除的站点设置 phpBB http 状态码

> ID：13565860
> 
> 赞同：0
> 
> 时间：2012-11-26T13:30:30.520
> 
> 标签：http-status-code-301, http-status-codes, phpbb, http-status-code-403

我需要为 phpBB 论坛设置 html 状态代码。Google Webmaster Toolkit 显示了很多错误的状态代码，这对 SEO 和可用性都是不利的。

我搜索了很多，但找不到任何合适的答案。也许有人可以帮助我告诉我phpBB中是否有办法或者是否有插件可以实现这一点。

状态代码应根据以下情况而有所不同：

*   用户/线程已被删除 => 状态代码“410”（已消失）
*   线程已被移动 => 状态代码“301”（永久移动）
*   站点只能在登录时看到 => 状态代码“403”（禁止）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:08:02.237

我找到了一个解决方案，对于那些可能有相同需求的人，这里是解决方案。

阅读这个[PhpBB Tracker](http://tracker.phpbb.com/browse/PHPBB3-7782)问题，我发现这个[git commit](https://github.com/naderman/phpbb3/commit/c185e45e09032e3ac32149a91f0133deb425acaa)引导我找到这个解决方案。修补文件 /path_to_yout_phpbb_forum/includes/functions.php

```
//line 2618-2637
function send_status_line($code, $message)
{
        if (substr(strtolower(@php_sapi_name()),0,3) === 'cgi')
        {
        // in theory, we shouldn't need that due to php doing it. Reality offers a differing opinion, though
        header("Status: $code $message", true, $code);
        }
        else
        {
           if (isset($_SERVER['HTTP_VERSION']))
           {
               $version = $_SERVER['HTTP_VERSION'];
            }
            else
            {
               $version = 'HTTP/1.0';
            }
            header("$version $code $message", true, $code);
        }
} 
```

和

```
//line 3654-3657
if ($msg_text == 'ERROR_NO_ATTACHMENT' || $msg_text == 'NO_FORUM' || $msg_text == 'NO_TOPIC' || $msg_text == 'NO_USER')
{
    send_status_line(404, 'Not Found');
} 
```

这对我的问题有用。

# linux - 创建没有密码的用户

> ID：13565865
> 
> 赞同：0
> 
> 时间：2012-11-26T13:30:53.843
> 
> 标签：linux, authentication, ubuntu

我正在尝试创建没有密码的用户，如下所示：

```
sudo adduser \
   --system \
   --shell /bin/bash \
   --gecos ‘User for managing of git version control’ \
   --group \
   --disabled-password \
   --home /home/git \
   git 
```

它创建得很好。但是当我尝试在 git 用户下登录时，我输入了密码：

```
su git
Password:... 
```

当我把它留空时，我得到一个错误：

```
su: Authentication failed 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:56:31.557

“禁用密码”不会禁用身份验证；它允许使用非密码方式进行身份验证。您的“su”命令没有使用其中任何一个，因此它会提示输入密码。不会有任何匹配散列字符串。

作为特权用户，您可以删除散列密码字符串并启用无需任何身份验证的登录（此帐户的坏主意）。更好的是设置 sudo 或 ssh 以允许特定的用户列表使用此身份。

# iphone - replaceItemAtURL:withItemAtURL:backupItemName:options:resultingItemURL:error: 在 iOS 6 中损坏？

> ID：13565867
> 
> 赞同：2
> 
> 时间：2012-11-26T13:30:58.527
> 
> 标签：iphone, ios, ios6, nsfilemanager

我无法让 NSFileManager 方法`replaceItemAtURL:withItemAtURL:backupItemName:options:resultingItemURL:error:`在 iOS 6 中工作。调用此方法并在 iOS 5 上正常工作的应用程序在 iOS 6 上存在重大问题。在运行低于 6.0 的 iOS 版本的设备上不会出现该问题。如果应用程序通过 Xcode 在 iOS 模拟器中启动，则不会出现此问题。否则问题似乎是普遍的。

这是我要执行的测试代码：

```
NSError *error;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *destinationPath = [documentsDirectory stringByAppendingPathComponent:@"test.txt"];
NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.txt"];

// Create initial file in documents directory
if (![fileManager fileExistsAtPath:destinationPath])
{
    BOOL fileCopied = [fileManager copyItemAtPath:sourcePath
                                           toPath:destinationPath
                                            error:&error];
    if (!fileCopied)
        [[self statusLabel] setText:[NSString stringWithFormat:@"Creation Error:\n\n%@",
                                     [error localizedDescription]]];
}

// Replace file in documents directory with copy of file from app bundle
if ([fileManager fileExistsAtPath:destinationPath])
{
    NSURL *destinationURL = [NSURL fileURLWithPath:destinationPath];
    BOOL fileReplaced = [fileManager replaceItemAtURL:destinationURL
                                        withItemAtURL:[NSURL fileURLWithPath:sourcePath]
                                       backupItemName:nil
                                              options:0
                                     resultingItemURL:&destinationURL
                                                error:&error];
    if (!fileReplaced)
        [[self statusLabel] setText:[NSString stringWithFormat:@"Replacement Error:\n\n%@",
                                     [error localizedDescription]]];
    else
        [[self statusLabel] setText:@"Successfully replaced file."];
} 
```

如果该文件尚不存在，它会在文档目录中创建该文件。然后它会尝试用应用程序包中的文件副本替换文档目录中的文件。然后它报告文件创建/替换的状态。正如我之前所说，如果它在 iOS 5 或更低版本上运行，或者如果它在 iOS 模拟器中运行，并且 Xcode 附加到进程，它会很好地替代它。但是，如果它在没有 Xcode 的 iOS 6 设备或 iOS 模拟器上运行，则替换失败并返回错误。本地化的错误描述是`The operation couldn’t be completed. (Cocoa error 512.)`。

错误的用户信息字典是：

```
{
NSFileNewItemLocationKey = "file://localhost/var/mobile/Applications/487FBB9E-A2BD-4CF2-BB38-F36764623C2F/Test.app/test.txt";
NSFileOriginalItemLocationKey = "file://localhost/var/mobile/Applications/487FBB9E-A2BD-4CF2-BB38-F36764623C2F/Documents/test.txt";
NSURL = "file://localhost/var/mobile/Applications/487FBB9E-A2BD-4CF2-BB38-F36764623C2F/Documents/test.txt";
NSUnderlyingError = "Error Domain=NSCocoaErrorDomain Code=513 \"The operation couldn\U2019t be completed. (Cocoa error 513.)\" UserInfo=0x1d58d350 {NSFilePath=/var/mobile/Applications/487FBB9E-A2BD-4CF2-BB38-F36764623C2F/Test.app/test.txt, NSURLUnsetValueKeysKey=<CFArray 0x1d58d180 [0x39b9d100]>{type = immutable, count = 2, values = (\n\t0 : <CFString 0x39b945b4 [0x39b9d100]>{contents = \"NSURLFileSecurityKey\"}\n\t1 : <CFString 0x39b943d4 [0x39b9d100]>{contents = \"NSURLCreationDateKey\"}\n)}, NSUnderlyingError=0x1d58d010 \"The operation couldn\U2019t be completed. Operation not permitted\", NSURL=file://localhost/var/mobile/Applications/487FBB9E-A2BD-4CF2-BB38-F36764623C2F/Test.app/test.txt}";
} 
```

我在 App Store 上有一个依赖于这种方法的应用程序。实时应用程序在 iOS 5 上继续正常运行，但在 iOS 6 上，由于方法失败，它存在巨大问题。有谁知道为什么这种方法会失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:01:05.920

NSFileManager 方法`replaceItemAtURL:withItemAtURL:backupItemName:options:resultingItemURL:error:`不是复制方法；这是一种移动方法。即，文件不是替换为替换文件的*副本*，而是替换文件本身。由于应用程序不应该能够修改自己的包，因此上述代码不应该在任何版本的 iOS 中工作。

为了保留原子性，解决方法是先将替换文件的副本保存到临时目录中，然后将文件替换为临时目录中的副本。

这是固定的测试代码：

```
NSError *error;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"txt"];
NSString *destinationPath = [documentsDirectory stringByAppendingPathComponent:@"test.txt"];

// Create initial file in documents directory
if (![fileManager fileExistsAtPath:destinationPath])
{
    BOOL fileCopied = [fileManager copyItemAtPath:sourcePath
                                           toPath:destinationPath
                                            error:&error];
    if (!fileCopied)
        [[self statusLabel] setText:[NSString stringWithFormat:@"Creation Error:\n\n%@", [error localizedDescription]]];
}

// Replace file in documents directory with copy of file from app bundle
if ([fileManager fileExistsAtPath:destinationPath])
{
    // Create temporary file
    NSString *tempPath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"test.txt"];

    BOOL tempCopied = [fileManager copyItemAtPath:sourcePath
                                           toPath:tempPath
                                            error:&error];
    if (!tempCopied)
        [[self statusLabel] setText:[NSString stringWithFormat:@"Temp Creation Error:\n\n%@", [error localizedDescription]]];

    // Replace file with temporary file
    NSURL *destinationURL = [NSURL fileURLWithPath:destinationPath];

    BOOL fileReplaced = [fileManager replaceItemAtURL:destinationURL
                                        withItemAtURL:[NSURL fileURLWithPath:tempPath]
                                       backupItemName:nil
                                              options:0
                                     resultingItemURL:&destinationURL
                                                error:&error];
    if (!fileReplaced)
        [[self statusLabel] setText:[NSString stringWithFormat:@"Replacement Error:\n\n%@", [error localizedDescription]]];
    else
        [[self statusLabel] setText:@"Successfully replaced file."];
} 
```

# java - 从 ArrayList 中删除所有出现的元素

> ID：13565876
> 
> 赞同：65
> 
> 时间：2012-11-26T13:31:13.797
> 
> 标签：java, arraylist

我正在使用`java.util.ArrayList`，我想删除所有出现的特定元素。

```
 List<String> l = new ArrayList<String>();
    l.add("first");
    l.add("first");
    l.add("second");

    l.remove("first"); 
```

它只删除第一次出现。但是我希望在`l.remove("first");`我希望 list 仅使用值“second”省略之后，删除所有出现的事件。我通过谷歌搜索发现它可以通过创建新列表和调用来实现`list.removeAll(newList)`。但是是否可以在不创建新列表的情况下删除所有事件，或者是否有任何 API 可用于实现它？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-11-26T13:35:35.830

```
l.removeAll(Collections.singleton("first")); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-08-07T09:08:10.860

使用 Java 8 的另一种方式：

```
l.removeIf("first"::equals); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-26T13:35:19.037

```
while(l.remove("first")) { } 
```

这会从列表中删除所有“第一个”元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-26T13:41:25.660

您可以使用该[`removeAll()`](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#removeAll-java.util.Collection-)方法。

```
list.removeAll(Arrays.asList("someDuplicateString")); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-26T13:36:13.030

因为在您的示例中，您使用的是字符串，所以我想确实应该做到这一点。

```
for(int i = 0; i < list.size();i++){
    if(list.get(i).equals(someStringNameOrValue)){
        list.remove(i--);
    }
} 
```

看来我误解了你的问题。我更新了我的答案。我对吗？你想删除所有出现的“第一”吗？

# coldfusion - 应该使用 CFHTTP 进行本地服务器调用吗？

> ID：13565880
> 
> 赞同：2
> 
> 时间：2012-11-26T13:31:23.337
> 
> 标签：coldfusion, load, http-request, cfhttp

我听说指向本地服务器的 CFHTTP 调用会给用户带来额外的延迟。由于这是一个 HTTP 请求，在我看来，任何延迟都可以忽略不计——尽管我对网络/系统和负载平衡知之甚少。

使用 CFHTTP 进行本地调用是否有任何缺点/缺点，如果是，有没有办法减轻这些缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:05:53.460

你想用这些 HTTP 调用做什么？如果您通过 HTTP 获取的任何内容都在本地文件系统上，那么实际使用文件系统（fileRead()、include 等）而不是网络来获取它们会更方便。

也就是说，如果您确实出于某种原因确实想要执行请求（在某些情况下这是完全合法的），那么我认为性能开销不会值得担心。虽然我不想在每个`onRequestStart()`等上做这种事情。

我认为您需要详细说明您要在这里实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:51:01.817

> 在我看来，任何延误都可以忽略不计

也许，这取决于您的流量和您遇到的任何其他延迟问题。我做了一个简单的测试，从同一个 CF 服务器获取了 5 段预先生成的 Lorem Ipsum 虚拟文本。结果需要 15 到 47 毫秒，正如我所说的，这取决于你决定它是否可以忽略不计。我个人认为它有点高，但从用户的角度来看，它在我的环境中不会被注意到。

就缓解而言，如果您尝试重用代码，我会考虑将您的身份验证放入 cfc。这是有益的，因为如果需要，您可以在多个本地应用程序以及 Web 服务中使用它（从技术上讲，这是您通过使用 cfhttp 尝试做的事情）。

正如您之前所说，将进程包含在 cfinclude 中有什么问题？测试证明，包括相同的预生成 Lorem Ipsum 文本每次花费 0 MS。

```
<cfset start = getTickCount()>
<cfhttp url="http://myServer.com/test/lipsum.cfm" method="get" >
<cfset end = getTickCount()-start>
<cfoutput>it took #end# MS to get the Lipsum.</cfoutput><br />
<cfset start = getTickCount()>
    <!-- <cfinclude template="lipsum.cfm"> -->
<cfset end = getTickCount()-start>
<cfoutput>it took #end# MS to include the Lipsum.</cfoutput>

it took 43 MS to get the Lipsum.
it took 0 MS to include the Lipsum. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:40:09.497

您没有指定是回调到 ColdFusion 服务器本身还是本地托管的其他服务。稍微扩展一下问题以提供用例可能会有所帮助。

调用本地服务器的速度损失相对较小，并且在某些情况下可能没问题，例如调用本地 Solr 服务器以获取搜索结果。然而，它可能比在 CF 中本地调用函数要慢得多。

我担心的是回调您正在执行 ColdFusion 的服务器。这可能表明事情可以更好地组织或安排。我过去曾这样做过（作为运行后台任务的一种廉价的“愉快的方式”），但现在不会这样做`<cfthread>`。

# php - 我如何在 PHP 中做到这一点？

> ID：13565882
> 
> 赞同：0
> 
> 时间：2012-11-26T13:31:23.840
> 
> 标签：php

无需右键单击浏览器即可查看源代码，如何将 php 结果显示为 html 标记，以便用户也可以复制它。

例子：

```
$var = 'ipsum'; //user input stored in variable

<p style="align="center">Lorem <?php echo $var; ?> dolor sit amet</p> 
```

输出：

```
Lorem ipsum dolor sit amet 
```

同时，我想显示 html 标记，以便用户可以直接复制它而无需查看源代码，如下所示：

```
<p style="align="center">Lorem ipsum dolor sit amet</p> 
```

我如何在 php 中执行此操作？感谢帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:33:34.103

试试这个 ：

```
echo htmlentities('<p style="align="center">Lorem '.$var.' dolor sit amet</p>'); 
```

或者 ：

```
$var = 'ipsum';
$mark = '<p style="align="center">Lorem '.$var.' dolor sit amet</p>';

echo $mark;
echo htmlentities($mark); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:35:16.570

就我个人而言，我会将这些内容放入 textarea 中，然后至少可以轻松选择：

```
<textarea><p style="align="center">Lorem ipsum <?php echo $var; ?> sit amet</p></textarea> 
```

然后，您甚至可以使用一些 JavaScript 来禁用对该文本框的任何编辑和/或一键全选等。

哦，还有一点：您的语法无效..不太确定您在那里尝试使用 CSS，但我认为是这样的：

```
<p style="text-align:center">Lorem ipsum <?php echo $var; ?> sit amet</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:33:17.817

只需使用`<pre></pre>`html 标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:33:55.633

您可以使用函数**ob_start**缓冲输出并使用**htmlentities**自动将缓冲区转换为“html_code”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:39:46.320

您需要将被视为 html 的特殊值转换为其实体。

```
< need to be converted into $lt; 
> need to be converted into $gt; 
etc. ..... 
```

您可以使用 htmlentities($text); 去做这个。

Afaik 没有 html 标签可以做你需要的事情。

```
<pre> and <code> 
```

并不意味着“不要将其视为 html”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T13:46:06.963

您只是想显示一定数量的 HTML 标记，还是真的想要整个页面的源代码，例如单击“查看源代码”时会看到的？

如果是后者，您可能希望这样做：

```
<?php
$source= file_get_contents('http://www.example.com/');
echo '<textarea>' . htmlentities($source) . '</textarea>';
?> 
```

在 URL 上使用 use`file_get_contents()`时（假设安装了最新版本的 PHP），它会返回该 URL 的源。祝你好运！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-26T13:37:29.793

在 php 脚本开始时，您可以启动输出缓冲区。然后在脚本的底部你可以输出两次。

```
<?php
ob_start();
//your php stuff
$contents = ob_get_flush();
echo '<pre>'.$contents.'</pre>';
?> 
```

# logical-operators - 逻辑运算符 A & (~B) 的名称

> ID：13565883
> 
> 赞同：6
> 
> 时间：2012-11-26T13:31:27.143
> 
> 标签：logical-operators, nomenclature, truthtable

是否有逻辑与的名称与`~`第二个变量的否定（），即：

```
A & (~B) 
```

这种操作的真值表是：

```
0 & (~0) = 0
0 & (~1) = 0
1 & (~0) = 1
1 & (~1) = 0 
```

在更长的位序列中，

```
A       = 10110011
B       = 10111001
A & B   = 10110001
A &(~B) = 00000010 
```

PS - 我也对第二个变量的否定感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:34:15.530

极好的。A & (~B) 称为[Material nonimplication](http://en.wikipedia.org/wiki/Material_nonimplication)，而 A | (~B) 被称为[Material Implication](http://en.wikipedia.org/wiki/Material_implication)似乎[每一个可能的二元运算都有一个名字](http://en.wikipedia.org/wiki/Truth_table#Binary_operations)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T13:35:56.413

集合论项是 B 相对于 A 的“相对补集”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-19T00:09:44.337

我喜欢说得更清楚一点。您也可以通过使用赋值在代码中找到它：

A = A & ~B

或者更紧凑：

A &= ~B

示例：之前：A = 0x0007，B=0x0004 之后：A = 0x0003

它的作用是从A中清除位B。但是相对补码，因此名称差异，您可以将其写为A \ B，就像集合差异一样，也是一个好名称。

# eclipse - 无法跟踪上下文菜单的 Eclipse 插件的错误

> ID：13565887
> 
> 赞同：1
> 
> 时间：2012-11-26T13:31:45.397
> 
> 标签：eclipse, eclipse-plugin

当我将我的项目作为 Eclipse 插件项目运行时，它工作正常。但是当我将它导出为 Eclipse 插件并将其复制到 Eclipse 插件文件夹中时。重启eclipse后，没有出现上下文菜单...

在 plugin.xml 中为上下文菜单定义的配置：

```
 <extension point="org.eclipse.ui.menus">
        <menuContribution locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
            <command commandId="patch.easy" label="Add to Patch" style="push">
            </command>
        </menuContribution>
    </extension>
    <extension point="org.eclipse.ui.commands">
        <command defaultHandler="com.createMenu.PatchMenu" id="patch.easy"
            name="Convert"></command>
    </extension> 
```

请帮忙...

# javascript - 无法使用 ajax 将页面中的 Google 地图加载到另一个页面中的 div 中

> ID：13565889
> 
> 赞同：0
> 
> 时间：2012-11-26T13:31:52.833
> 
> 标签：javascript, jquery, ajax, google-api

我正在尝试使用此 javascript 将一个 html 页面加载到另一个 html 页面中

* * *

```
$('.myajax').click(function() {
    var myhref=$(this).attr('href');
    $('#contentdiv').hide().load(myhref).fadeIn('slow');
    return false;
}); 
```

* * *

每当我尝试将 Google 地图加载到名为`contentdiv`. 每当我尝试这样做时，浏览器上都不会出现任何内容；它完全空白。包含谷歌地图的页面如下：

* * *

```
<!DOCTYPE html>
<html> 
<head> 
   <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
   <title>Google Maps Geocoding Demo</title> 
   <script src="http://maps.google.com/maps/api/js?sensor=false" 
           type="text/javascript"></script> 
</head> 
<body> 
   <div id="map" style="width: 400px; height: 300px;"></div> 
   <script type="text/javascript"> 
   var address = 'London,UK';
   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       zoom: 6
   });

   var geocoder = new google.maps.Geocoder();
   geocoder.geocode({
      'address': address
   }, 
   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
      else {
         // Google couldn't geocode this request. Handle appropriately.
      }
   });

   </script> 
</body> 
</html> 
```

* * *

有人可以指出错误吗？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:38:57.213

当您使用`$.load()`它时会加载所有输出的数据，因此您没有加载任何内容`<head>`，您没有加载 google maps api，也没有加载 javascript，至少不是以我认为可以处理的方式，从未尝试过，但它是明确的不是 $.load() 的用途。

当涉及到包括谷歌地图的页面时，您将不得不使用 iframe 或尝试实际包含谷歌地图库并在实际页面中运行 javascript 代码。

# php - 如何使用 PHP 将裁剪后的图像保存到带有 Jcrop 的目录

> ID：13565892
> 
> 赞同：8
> 
> 时间：2012-11-26T13:32:05.433
> 
> 标签：php, image, save, directory, jcrop

我可以裁剪图像并单击裁剪。但后来出了点问题，因为我不知道如何保存这张图片。

我使用 php 中的 imagecreatefromjpeg。此代码如下所示：

```
<?php
SESSION_start();
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{
$targ_w = 200;
$targ_h = 400;
$jpeg_quality = 90;

$src = $_SESSION['target_path'];
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

//header('Content-type: image/jpeg');
imagejpeg($dst_r, 'uploads/cropped/' . 'filename');

exit;
}

?> 
```

我保存原始图像的 php 代码如下所示：

```
 <?php 
         session_start();
         $target = "uploads/"; 
         $target = $target . basename( $_FILES['filename']['name']) ; 
         $_SESSION['target_path'] = $target;

         $ok=1; 
         if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
         {
         echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
         } 
         else {
         echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
         }
    ?> 
```

如何保存裁剪的图像？有没有办法通过覆盖原始图像来保存裁剪的图像，所以我只得到裁剪的图像？

提前致谢。

**编辑：我现在可以保存 1 张照片。我将代码编辑为： imagejpeg($dst_r, 'uploads/cropped/' . $filename .'boek.jpg'); 但是我必须创建一个函数，该函数可以使用另一个名称保存多个文件。并且可能会覆盖保存在“上传/”中的原始图像**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:31:42.823

我要回答现在似乎是什么问题：

> 但是我必须创建一个函数，该函数可以使用另一个名称保存多个文件。并且可能会覆盖保存在“上传/”中的原始图像

一个简单的方法是在文件名中添加时间戳，这样每次执行操作时，你都会得到一个新的文件名。做一些类似的事情：

```
imagejpeg($dst_r, 'uploads/cropped/' . $filename . time() . 'boek.jpg'); 
```

每次都会保存一个新图像。

当您想覆盖原始文件时，只需分配正确的路径

```
imagejpeg($dst_r, 'uploads/' . $filename .'.jpg'); 
```

**编辑：**似乎问题在于获得正确的文件名，而无需硬编码“boek.jpg”。

发布的原始代码`filename`在保存图像时使用了字符串

```
imagejpeg($dst_r, 'uploads/cropped/' . 'filename'); 
```

你想要做的是从`$src`. 为此，只需使用该功能`basename`（[此处](http://php.net/manual/en/function.basename.php)的文档），您将拥有：

```
imagejpeg($dst_r, 'uploads/cropped/' . basename($src)); // basename will already contain the extension 
```

# regex - 使用正则表达式在包含某些内容的行之前插入文本（记事本++）？

> ID：13565899
> 
> 赞同：0
> 
> 时间：2012-11-26T13:32:27.743
> 
> 标签：regex, notepad++

我有几行这样的：

```
Apples
__________
B
C

Bananas
___________
D
E

Carrots
____________
F 
G 
```

我想让苹果、香蕉和胡萝卜在 html 中成为各自独立的标题。因此，我想对 3 个连续下划线或更多下划线进行正则表达式搜索，然后在其前面的行中插入 html 标题标签。有人可以告诉我如何使用 Notepad++ 正则表达式搜索和替换来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:39:53.963

搜索

```
(^|\n)(.*)([\n\r]+)(_{3,})([\n\r]|$) 
```

并将其替换为

```
$1<h1>$2</h1>$5 
```

* * *

![在此处输入图像描述](../Images/55b1dcd0622a6f12f82f001ef013be1e.png)

# java - JButton & Action & KeyBinding

> ID：13565900
> 
> 赞同：3
> 
> 时间：2012-11-26T13:32:39.817
> 
> 标签：java, swing, focus, jbutton, key-bindings

我创建了一个接收动作的 JButton 类，JButton 类包括击键和鼠标侦听器，因此我可以根据需要在多个帧中使用同一个类。

我的问题是：JButton 在按键时没有获得焦点，但它在执行操作。我需要制作一个新的背景或其他东西来告诉用户该按钮执行了该操作。

有任何想法吗？？

这是我的代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Insets;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.KeyStroke;
import javax.swing.SwingConstants;
import javax.swing.border.LineBorder;
import swtdesigner.SwingResourceManager;

public class IButtonSave extends JButton{
    private static final long serialVersionUID = 1L;
    private Action action = null;
    public IButtonSave() {
        super();
        setFocusPainted(true);
        setFocusable(true);

        try {
            jbInit();
        } catch (Throwable e) {
            e.printStackTrace();
        }
    }

    private void jbInit() throws Exception {
        setMargin(new Insets(0, 0, 0, 0));
        setBorder(new LineBorder(Color.black, 1, true));
        setIconTextGap(0);
        setHorizontalTextPosition(SwingConstants.CENTER);
        setVerticalTextPosition(SwingConstants.TOP);
        setPreferredSize(new Dimension(50, 43));
        setMinimumSize(new Dimension(50, 43));
        setMaximumSize(new Dimension(50, 43));
        addMouseListener(new ThisMouseListener());
        setVerifyInputWhenFocusTarget(true);
    }

    public void setAction(Action a){
        action = a;
        KeyStroke ks = KeyStroke.getKeyStroke(KeyEvent.VK_F1,0,true);
        KeyStroke ks2 = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0);
        getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(ks, "Save");
        getInputMap(JComponent.WHEN_FOCUSED).put(ks2, "Save");

        getActionMap().put("Save", a);
        setText("Save [F1]");
        setIcon(SwingResourceManager.getIcon(SwingResourceManager.class, "/images/small/save.png"));
        setToolTipText("[F1]");
    }

    private class ThisMouseListener extends MouseAdapter {
        public void mouseClicked(MouseEvent e) {
            this_mouseClicked(e);
        }
    }
    protected void this_mouseClicked(MouseEvent e) {
        if(e.getClickCount() >= 1){
            action.actionPerformed(null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:40:48.523

`JButton`当您可以简单地将`KeyBinding`s 添加到其实例时，为什么要扩展类？

不确定你想要什么，但这对我来说很好：

基本上 a`JButton`可以通过鼠标单击或按下`F1`（只要焦点在窗口中并且如果按下将焦点转移到`JButton`）或`ENTER`（仅当焦点位于`JButton`）来激活。

当被调用时`AbstractAction`，它将调用（因此按下将使按钮获得焦点，这是我认为你想要的）：`requestFocusInWindow()``JButton``F1`

![在此处输入图像描述](../Images/16380477aca225943d81c466632ada36.png)

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final JButton btn = new JButton("Button");

                AbstractAction aa = new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        System.out.println("Here");

                        btn.requestFocusInWindow();//request that the button has focus
                    }
                };

                //so button can be pressed using F1 and ENTER
                btn.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "Enter");
                btn.getActionMap().put("Enter", aa);
                btn.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0), "F1");
                btn.getActionMap().put("F1", aa);

                btn.addActionListener(aa);//so button can be clicked

                JTextField tf = new JTextField("added to show ENTER wont work unless button in focus");

                frame.add(tf);
                frame.add(btn, BorderLayout.SOUTH);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

**更新：**

或者，正如@GuillaumePolet 建议的那样（对他+1）覆盖`processKeyBinding`并`JButton`检查适当的密钥，然后调用该方法：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final JButton btn = new JButton("Button") {
                    @Override
                    protected boolean processKeyBinding(KeyStroke ks, KeyEvent ke, int i, boolean bln) {
                        boolean b = super.processKeyBinding(ks, ke, i, bln);

                        if (b && ks.getKeyCode() == KeyEvent.VK_F1) {
                            requestFocusInWindow();
                        }

                        return b;
                    }
                };

                AbstractAction aa = new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        System.out.println("Here");
                    }
                };

                //so button can be pressed using F1 and ENTER
                btn.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "Enter");
                btn.getActionMap().put("Enter", aa);
                btn.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0), "F1");
                btn.getActionMap().put("F1", aa);

                btn.addActionListener(aa);//so button can be clicked

                JTextField tf = new JTextField("added to show ENTER wont work unless button in focus");

                frame.add(tf);
                frame.add(btn, BorderLayout.SOUTH);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:09:49.543

不确定这是不是最好的方法，但它工作得很好，如果它不是最好的方法，你可以从这个答案中获得一个免费的[SSCCE 。](http://sscce.org)

我覆盖了 processKeyBindings()，如果它返回 true，那么我抓住焦点以指示该操作已执行。如果你想做其他事情，你只需要修改那里的代码。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class IButtonSave extends JButton {
    private static final long serialVersionUID = 1L;

    public IButtonSave() {
        super();
        setFocusPainted(true);
        setFocusable(true);
    }

    @Override
    protected boolean processKeyBinding(KeyStroke ks, KeyEvent e, int condition, boolean pressed) {
        boolean processKeyBinding = super.processKeyBinding(ks, e, condition, pressed);
        if (processKeyBinding) {
            requestFocusInWindow();
        }
        return processKeyBinding;
    }

    @Override
    public void setAction(Action a) {
        super.setAction(a);
        KeyStroke ks = KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0, true);
        KeyStroke ks2 = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0);
        getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(ks, "Save");
        getInputMap(JComponent.WHEN_FOCUSED).put(ks2, "Save");
        getActionMap().put("Save", a);
        setText("Save [F1]");
        setToolTipText("[F1]");
    }

    protected void initUI() {
        JFrame frame = new JFrame(IButtonSave.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextArea textarea = new JTextArea(5, 30);
        JPanel buttonPanel = new JPanel();
        AbstractAction someAction = new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.err.println("Action performed");
            }
        };
        IButtonSave button = new IButtonSave();
        button.setAction(someAction);
        buttonPanel.add(button);
        frame.add(new JScrollPane(textarea));
        frame.add(buttonPanel, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new IButtonSave().initUI();
            }
        });
    }

} 
```

# wpf - 如何从图像中剪切弧？

> ID：13565902
> 
> 赞同：0
> 
> 时间：2012-11-26T13:32:43.920
> 
> 标签：wpf, silverlight, windows-runtime, winrt-xaml

我正在做winrt应用程序，我有一个圆形图像，我需要从圆形图像中动态剪辑弧线，具有不同的角度，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:39:44.233

在 WinRT/XAML 中 - 您可以将图像作为 WriteableBitmap 打开并手动处理像素。如果您有更多时间并希望更快地获得结果，您也可以使用 DirectX。

圆开始的有用公式：

r ² = x ² + y ²

x = r * sin(α)
y = r * cos(α)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T21:10:40.810

为了完整起见 - 您可以使用 ImageBrush Fill 制作路径/ArcSegment - 类似于[此处答案](https://stackoverflow.com/a/22999819/521182)的第一部分。

# objective-c - 核心音频：仅对于 PCM 音频，零等于静音吗？

> ID：13565904
> 
> 赞同：8
> 
> 时间：2012-11-26T13:32:55.930
> 
> 标签：objective-c, ios, core-audio, audio-streaming, packet-loss

我正在尝试创建一个基本算法来隐藏核心音频的丢包。我只是想用静音替换丢失的数据。在学习核心音频的书中，作者说在无损PCM中，零表示静音。我想知道我是否正在播放 VBR（即压缩数据），是否也可以将零用于静音？

在我现有的代码中......当我将零插入音频队列时......它突然卡住了（即它不再释放音频队列回调中消耗的数据......）我想知道为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:01:15.733

PCM 是原始编码样本。全 0（当对样本使用有符号数据时）确实是沉默。（事实上​​，任何值都是静音，但如果不过滤掉这种直流偏移，则有可能损坏您的放大器和/或扬声器。）

当您使用有损编解码器进行压缩时，您会输入一种数字格式，其中仅添加静音并非易事。考虑将数据添加到 ZIP 文件以将空字节添加到文件末尾。并不是随便把它们插入到 ZIP 文件中那么简单。

如果要向压缩文件添加静音，则必须使用适当的编解码器。然后，您必须将其放入比特流中，这也不是微不足道的。通常流被帧分解，但你甚至不能以某些格式分割这些帧。MP3 和 AAC 使用位存储库，其中先前帧中未使用的数据可用于稍后对更复杂的帧进行编码，从而使文件分割变得非常困难。

# c++ - C++ 在句子中查找单词

> ID：13565907
> 
> 赞同：2
> 
> 时间：2012-11-26T13:33:06.600
> 
> 标签：c++, string, find, words

我的任务是在一个句子（更像是一行字符）中找到“EYE”这个词，例如：`EYEYECARASDFG`. 如您所见，“EYE”一词出现了两次，彼此重叠。我想`cout`“EYE”这个词在句子中出现了多少次。我写了一些看起来像这样的代码：

```
#include <iostream>
#include <string>

using namespace std;

string sentence;

int main()
{
    int i = 0;
    cin >> sentence;

    while()
    {
        if (std::string::npos != sentence.find("EYE"))
        {
            i++;
        }
    }

    cout << i;
} 
```

现在没有`while`循环，它会在句子中找到 EYE 并且它有点工作。所以我虽然，要计算重叠并使代码运行直到它结束，我需要循环它。所以我虽然 while 循环是最好的，但我不知道如何循环它，将什么放入括号 for`while`循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:50:15.600

首先条件 in`while`是必需的。如果您想要无限循环，请使用`true`您的语句。作为初稿，请尝试使用“蛮力”进行制作。如果等于“EYE”，只需检查句子的每 3 个字母子串。它将是一个循环和 3 个条件或 2 个循环和 1 个条件。然后阅读一些文本搜索算法，例如[KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)。

如果您只想让此代码运行，请使用以下 coed：

```
int pos = 0;
while(true) { 
    pos =  sentence.find("EYE", ++pos);
    if (pos != std::string::npos) {
        i++;
    } else break;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:47:24.740

您可以使用有限状态机来执行此操作。（谷歌它。）这是有效且易于理解的。当您阅读这些字符时，需要区分三种状态，即，1) 最近看到的字母是“E”时，2) 最后看到的两个字母按顺序是“EY”时，以及 3) 其他所有字母。当您一次通过一个字符时，每当您处于状态 2 并找到另一个“E”时，将“找到”计数加一。

看看你是否可以在没有更多提示的情况下从那里拿走它。

这个想法可以扩展到“EYE”之外的任意字符串，您可以编写各种编译器来为这些字符串生成有限状态机。但这是一个更高级的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-21T13:07:51.680

```
#include<iostream>
#include<string>
using namespace std;
main()
{
        string sen, sub;
        int pos;
        cout<<"Enter the Sentence"<<endl;
        getline(cin,sen);
        cout<<"Enter string to find"<<e`ndl;
        cin>>sub;
        for (int i=1;(pos=sen.find(sub)) != -1 ;i++)
        {
                sen=sen.substr(++pos);
                cout<<"Found = "<<sub<<" "<<i<<" Times"<<endl;
        }``

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T21:27:53.800

代码片段：

```
#include <bits/stdc++.h>
using namespace std;

int main()
{
    string input, word;
    getline(cin, input);
    cin>>word;

    int cnt=0;
    size_t pos = input.find(word, 0);
    while(pos != string::npos)
    {
        cnt++;
        pos = input.find(word, pos+1);
    }
    cout<<cnt<<endl;

    return 0;
} 
```

* * *

> 输入：
> Python 编程 Python
> Python
> 
> 输出：2

# python - 从 sqlite 中检索仅包含部分列数据的行

> ID：13565909
> 
> 赞同：1
> 
> 时间：2012-11-26T13:33:18.153
> 
> 标签：python, sql, sqlite

`SQLite`当我只有一列数据的一部分时，如何检索数据库中的特定行？

下表，命名为`foo`：

```
| id | randomKey   |
|  1 | af202fn02fe |
|  2 | 02fe9fwefew | 
```

现在我想得到以开头的`id`，这将是。`randomKey``af202``1`

我的`SQL-Query`样子会怎样？

```
'SELECT id FROM foo WHERE randomKey = ?', [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:35:28.037

这应该有效：

```
SELECT id FROM foo WHERE randomKey LIKE 'af202%' 
```

是 SQLITE的`%`通配符，因此您只会得到以 .`randomKey`开头的记录`af202`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T13:37:32.053

使用`LIKE`从句。在`LIKE`子句中，`%`运算符用于通配符数据：

```
SELECT id FROM foo WHERE randomKey LIKE 'af202%' 
```

`%`将匹配任何字符或不匹配字符。

1.  以。。开始：`LIKE 'af202%'`
2.  以。。结束：`LIKE %af202'`
3.  包含：`LIKE '%af202%'`

# gdb - Eclipse CDT 和 gdb 对源文件的位置有不同的看法

> ID：13565917
> 
> 赞同：0
> 
> 时间：2012-11-26T13:33:43.770
> 
> 标签：gdb, eclipse-cdt

我做了以下事情：

1.  将 Makefile 项目导入 Eclipse CDT。
2.  使用 g++ 的 -ggdb 选项从命令行编译程序。
3.  从命令行运行程序
4.  在 Eclipse CDT 中设置一些断点
5.  将 Eclipse CDT 调试器 (gdb) 附加到我的程序生成的子进程（子进程运行来自同一项目的程序）。

此时我在控制台中收到错误消息

> 没有名为 /home/oswald/Eclipse/CDT/Workspace/Project/path/to/header.h 的源文件。

当我恢复程序时，我的所有断点都被跳过。我怎样才能让我的断点工作？

一些附加说明：

*   不涉及共享库。
*   Eclipse 靛蓝，gdb 7.4，Ubuntu 12.04
*   使用命令行将 gdb 附加到进程，我可以将断点设置为`header.h:257`（`header.h`在文件夹中`/home/oswald/Eclipse/CDT/Workspace/Project/path/to/`）。然后 gdb 遵循这个断点。
*   使用命令行将 gdb 附加到进程，我*无法*将断点设置为`/home/oswald/Eclipse/CDT/Workspace/Project/path/to/header.h:257`，我从 gdb 获得与使用 Eclipse CDT 时相同的消息。
*   Eclipse CDT 使用*GDB (DSF) Attach to Process Launcher*。切换到*标准附加到进程启动器*会产生系统无法列出正在运行的进程的错误消息。
*   调试配置中的 Source Lookup Path 设置为默认值（Absolute File Path、Program Realtive File Path、Project）。我尝试了各种其他设置，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:15:04.950

作为一种解决方法，我编写了一个 shell 脚本，它生成一个 .gdbinit 文件，其中包含适当的目录条目：

```
#!/bin/sh

PROJECT=/home/oswald/Eclipse/CDT/Workspace/Project

find $PROJECT -name "*.h*" -o -name "*.c*" \
  | sed 's:/[^/]*$::' \
  | sort \
  | uniq \
  | sed 's/^/directory /' > $PROJECT/.gdbinit 
```

并将 Eclipse CDT 配置为使用该 .gdbinit 文件。

# mysql - MySQL：md5 中的键值是否可以快速编码以进行条件搜索？

> ID：13565923
> 
> 赞同：0
> 
> 时间：2012-11-26T13:34:01.423
> 
> 标签：mysql, key, md5

我想从你那里得到一些建议。我将构建另一个包含 md5 列的表。我正在考虑的一件事是搜索条件。例如，使用 md5 - ee321bb135275bca6c00bbcd14a3ae09 比较目的地是否很好？

例子

```
SELECT * FROM MY_TABLE WHERE SID='ee321bb135275bca6c00bbcd14a3ae09' ORDER BY ID ASC LIMIT 0,20 
```

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:42:24.917

添加并索引到 SID 列，我认为应该没问题：

```
ALTER TABLE MY_TABLE ADD INDEX IDX_SID(SID); 
```

# mysql - INSERT...ON DUPLICATE KEY UPDATE 与客户端流控制：优点和缺点

> ID：13565927
> 
> 赞同：2
> 
> 时间：2012-11-26T13:34:15.437
> 
> 标签：mysql, codeigniter, activerecord

我有一个 SQL 表，我必须根据主键的存在来插入或更新数据。上下文是在 MySQL 上运行的基于 CodeIgniter 的 PHP Web 应用程序。我发现了`INSERT...ON DUPLICATE KEY UPDATE`完全符合我需要的语句，但在此之前，代码是基于 CI 的 Active Record 实现的，看起来像这样：

```
$res = $this->db->get_where('table', array('id' => $this->_id));
if(count($res->result_array()) > 0) { // update if present
    $this->db->where(array('id' => $this->_id));
    $this->db->update('table', $hash);
    return 2;
} else { // new entry if not present
    $personal_data['id'] = $this->_id;
    $this->db->insert('table', $hash);
    return 1;
} 
```

该项目中的其他开发人员要求我保持简单，并且更喜欢 Active Record 代码而不是直接 SQL 和准备好的查询，经过一段时间的思考，我不确定什么最适合这种情况，因为有优点和在这两种情况下都有缺点。

例如，从流控制的角度来看，Active Record 解决方案非常简单，但性能上有很大的缺点，并且潜在的并发问题更大的缺点（如果第一个查询声明的条件在第二个查询执行之前发生了变化）查询，结果是不可预测的）。

另一方面，`INSERT...ON DUPLICATE KEY UPDATE`工作正常并避免了并发问题，但仅适用于 MySQL，可能导致可移植性问题，而且不能使用 CI 的 Active Record 构造，我需要一个准备好的查询。

在这种情况下，最佳做法是什么？还有其他更好的方法来实现预期的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:37:27.267

最佳实践是让数据库处理此类约束，原因很简单，否则您需要信任应用程序的行为。

如果将其留给数据库，则可以允许任何/多个应用程序操作数据，而不必担心它们会破坏数据库模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:55:05.023

还有另一种解决方案可以保持 CI 活动记录。

```
$query_string = $this->db->insert_string('table', array('id' => $this->_id, 'hash' => $hash));

$this->db->query($query_string.' ON DUPLICATE KEY UPDATE hash=VALUES(hash)'); 
```

# html - IOS6 HTML5 Web 应用程序中的新 twitter 小部件在启动时触发键盘

> ID：13565928
> 
> 赞同：0
> 
> 时间：2012-11-26T13:34:17.317
> 
> 标签：html, twitter, ios6, iphone-standalone-web-app

我正在构建 HTML5 数字杂志并嵌入（新）Twitter 小部件。当我将数字杂志作为带有 IOS6 的“iDevice”（iPhone/iPad）上的网络应用程序添加到我的主屏幕时，启动网络应用程序时出现故障；应用程序加载，但是当 Twitter 小部件加载时，它以某种方式聚焦于 input(?) 表单元素，触发 iDevice 的键盘。加载应用程序时，仍会显示键盘。

对于 iPad，这只是烦人的：对于 iPhone，视口被缩放，使我的 Web 应用程序处于不希望的状态。

有没有人有同样的问题，并以某种方式禁用了触发键盘的 Twitter 小部件上的“焦点”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:18:28.430

来自 Twitter 的人改变了小部件的行为，解决了上述错误。

参考：[https ://dev.twitter.com/discussions/12858#comment-28613](https://dev.twitter.com/discussions/12858#comment-28613)

# iphone - 基于其他实体属性的属性核心数据模型映射

> ID：13565936
> 
> 赞同：1
> 
> 时间：2012-11-26T13:34:34.050
> 
> 标签：iphone, core-data, core-data-migration

我有一个数据模型，其中包含两个具有一对多关系的实体

```
Person {
    name:string, 
    type:number, 
    files<-->>File
}

File {
    reference:string, 
    person<<-->Person
} 
```

我已经更新了数据模型，从 Person 中删除了 type 属性，但是 File 的引用属性取决于 Person 的类型：如果 type 是 0，那么 reference 必须是“A”，如果 type 是 1，那么参考必须是“B”。

我找不到可以执行此映射的解决方案。有任何想法吗 ？

编辑 ：

我通过创建两个实体映射找到了解决方案，使用过滤谓词来区分类型 0 和 1。对于 Person.type == 0 的实体映射，我设置了“A”的硬编码属性映射，对于 type = = 1>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:15:40.173

如果您与文件有两种关系并且没有类型属性来跟踪它，那么您或许应该考虑简单地拥有两种关系。

```
Person {
   name
   filesA <--->> File
   filesB <--->> File
}

File {
   reference
   personsTypeA <<---> Person
   personsTypeB <<---> Person
} 
```

坦率地说，我认为带有 type 属性的设计看起来要优雅得多。它很灵活，可以在未来轻松扩展模型。

# solr - SOLR 索引时间提升取决于字段值

> ID：13565940
> 
> 赞同：1
> 
> 时间：2012-11-26T13:34:50.837
> 
> 标签：solr, indexing, scoring

是否可以根据字段值在索引阶段提升文档？

我正在索引从数据库中提取的文本字段。我想提升较短的结果而不是较长的结果。所以 boost 的值应该取决于文本字段的长度。

这是改变标准 SOLR 行为所必需的，在我的情况下，该行为倾向于首先返回具有多个匹配项的文档。

考虑到我有一个存储文档长度的字段，我在索引时需要的查询中的等价物是：

> q={!boost b=sqrt(length)}text:abcd

示例：我在数据库中有两个项目：

```
ABCDEBCE
ABCD 
```

即使另一个项目包含两次搜索查询，我也总是希望获得`ABCD`第一个查询。`'BC'`

该问题的另一个解决方案是能够“关闭”在查询时对多个匹配项进行更高评分的功能。也不知道能不能...

在索引时执行此操作很重要，因为我运行 SOLR 的硬件不是太强大，并且尝试通过 OutOfMemory 异常来提高查询时间返回。（即使我可以解决 java 内存增加的问题，我也更愿意为了安全起见并以最有效的方式实现索引。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:41:26.553

是也不是——但你如何做取决于你如何索引你的文档。

据我所知，目前无法仅在 solr 服务器端解决此问题。

如果您使用常规的基于 XML 的界面来提交文档，请让生成提交的 XML 的代码根据文本字段的长度将 boost=".." 值添加到字段或文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:50:29.087

您可以检查具有命令的[DIH 特殊](http://wiki.apache.org/solr/DataImportHandler#Special_Commands)`$docBoost`命令

> $docBoost : 提升当前文档。该值可以是数字或数字的 toString

但是，似乎没有`$fieldBoost`命令。

但是，对于您的情况，如果您使用的是[DefaultSimilarity](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/similarities/DefaultSimilarity.html)，则较短的字段会比得分计算中的较长字段提升得更高。
您当然可以根据需要使用更改的 TF（词频）和 LengthNorm 计算来实现自己的 Simiarity 类。

# php - 在php中验证电话号码

> ID：13565944
> 
> 赞同：1
> 
> 时间：2012-11-26T13:34:59.673
> 
> 标签：php

我想“验证”我发布的电话号码。我并不关心格式，我只想使用数字和一些字符。我试过这段代码，但如果我在我的字符串中输入至少一个数字，那么字符串将是有效的。（例如：asdafadas-1asd 将有效）如何解决这个问题？

```
$phonebool=true;
       if (!(strcspn($_POST['phone'], '0123456789-/ ') != strlen($_POST['phone']) )){
           $_SESSION['phone_err']='Only numbers and -/';
           $phonebool=false;
       } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:38:49.527

您应该改用正则表达式，例如：

```
/^[0-9\/-]+$/ 
```

否则看看 libphonenumber - 似乎存在一个 php 端口：[https ://github.com/davideme/libphonenumber-for-PHP](https://github.com/davideme/libphonenumber-for-PHP)

例子：

```
var_dump(preg_match('/^[0-9\/-]+$/', 'asdafadas-1asd'));
=> int(0)

var_dump(preg_match('/^[0-9\/-]+$/', '12/34-56'));
=> int(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:38:16.490

尝试这个 。

```
if(ereg("^[0-9]{3}-[0-9]{3}-[0-9]{4}$", $number) ) {
    echo "works";
} else {
    $errmsg = 'Please enter your valid phone number';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:50:45.840

Working code

```
if (!(preg_match("([0-9-]+)", $_POST['phone']) != strlen($_POST['phone']) )){
    $_SESSION['phone_err']='Only numbers and -/';
    $phonebool=false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:41:33.380

一项建议：使用 javascript/jquery 验证您的表单，以便用户在提交之前立即更正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:43:32.087

尝试这个：

```
$phonebool=true;
if (!(preg_match("([0-9-]+)", $_POST['phone']) != strlen($_POST['phone']) )){
    $_SESSION['phone_err']='Only numbers and -/';
    $phonebool=false;
} 
```

# php - PHP 中的“Transfer-Encoding: chunked”标头。什么是“填充”？

> ID：13565952
> 
> 赞同：2
> 
> 时间：2012-11-26T13:35:17.523
> 
> 标签：php, padding, transfer-encoding

正如对上一个问题的回复中所建议的那样（[PHP External Oauth : how to](https://stackoverflow.com/questions/13562027/php-external-oauth-how-to-displaying-a-waiting-message-while-waiting-for-callb) display a waiting message while waiting for callback (not using AJAX) ），我正在使用传输编码：在执行某些任务时显示等待消息。我的第一次尝试失败了，我[在 PHP 中的“Transfer-Encoding: chunked” header](https://stackoverflow.com/questions/4809774/transfer-encoding-chunked-header-in-php)这个问题中找到了解决方案。有 1024 个空格的“填充”。没有这个填充它不起作用。我已经用谷歌搜索了，但我找不到这个填充的用途。这是示例代码（来自相关问题）。

```
<?php
        header('Content-Encoding', 'chunked');
        header('Transfer-Encoding', 'chunked');
        header('Content-Type', 'text/html');
        header('Connection', 'keep-alive');

        ob_flush();
        flush();

        $p = "";  //padding
        for ($i=0; $i < 1024; $i++) { 
            $p .= " ";
        };
        echo $p;

        ob_flush();
        flush();

        for ($i = 0; $i < 10000; $i++) {
            echo "string";
            ob_flush();
            flush();
            sleep(2);
        }

?> 
```

有没有人解释为什么它可以在没有“填充”的情况下工作和不工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:56:31.560

据我了解，填充用于填充*服务器*缓冲区。

没有它，服务器将等到 PHP 填充它，然后刷新它 - 即使在 PHP 代码中你这样做[`flush()`](http://php.net/flush)。

有关的：

*   [Apache/Linux 上的 PHP 输出缓冲区刷新问题（2010 年 5 月；在服务器故障上）](https://serverfault.com/questions/138007/php-output-buffer-flush-issue-on-apache-linux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:49:40.407

我不知道这个填充应该做什么，实际上它不应该工作（如果我错了，有人可能会启发我）。分块编码的想法是您以块的形式发送数据。每个块由包含块长度的行组成，后跟换行符，然后是块的数据。响应可以包含任意数量的块。所以基本上包含“Hello”的 3 个块的响应如下所示：

```
5 <--- this is the length of the chunk, that is "Hello" == 5 chars
Hello  <--- This is a the actual data
<-- an empty line is between the chunks
5
Hello

5
Hello

<-- send two empty lines to end the transmission 
```

所以我会将其重写为：

```
<?php
        header('Content-Encoding', 'chunked');
        header('Transfer-Encoding', 'chunked');
        header('Content-Type', 'text/html');
        header('Connection', 'keep-alive');

        ob_flush();
        flush();

        for ($i = 0; $i < 10000; $i++) {
            $string = "string";
            echo strlen($string)."\r\n"; // this is the length
            echo $string."\r\n"; // this is the date
            echo "\r\n"; // newline between chunks
            ob_flush(); // rinse and repeat
            flush();
            sleep(2);
        } 
        echo  "\r\n"; // send final empty line
        ob_flush();
        flush();

?> 
```

上面的代码在所有情况下都不起作用（例如，包含换行符或非 ascii 编码的字符串），因此您必须根据您的用例对其进行调整。

# iphone - 如何以编程方式在其上添加 UINavigationBar 和后退按钮

> ID：13565962
> 
> 赞同：3
> 
> 时间：2012-11-26T13:36:03.820
> 
> 标签：iphone, uitextview, xcode4.3

我是新手，试图使用`UITextView`. 我得到了`textView`和线，它工作正常。

我的问题是我想在`UINavigationBar`上面添加一个和返回按钮。我想`UIToolBar`在底部添加一个并在其上添加 2 个 toolBarItems 如何以编程方式执行此操作。任何帮助对我来说都是一个很大的推动力..

下面是代码片段。

**NoteView.h**

```
@interface NoteView : UITextView <UITextViewDelegate,UITabBarControllerDelegate>
{

} 
```

**NoteView.m**

```
- (id)initWithFrame:(CGRect)frame {

  self = [super initWithFrame:frame];

  if (self) {
      self.backgroundColor = [UIColor colorWithRed:0.6f green:0.6f blue:1.0f alpha:1.0f];
      self.font = [UIFont fontWithName:@"MarkerFelt-Thin" size:20];
      self.contentMode = UIViewContentModeRedraw;
  }
  return self;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext(); 

    CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.2f].CGColor);
    CGContextSetLineWidth(context, 1.0f);

    CGContextBeginPath(context);

    NSUInteger numberOfLines = (self.contentSize.height + self.bounds.size.height) /   self.font.leading;

    CGFloat baselineOffset = 6.0f;
    for (int x = 0; x < numberOfLines; x++) {
        CGContextMoveToPoint(context, self.bounds.origin.x, self.font.leading*x + 0.5f + baselineOffset);
        CGContextAddLineToPoint(context, self.bounds.size.width, self.font.leading*x + 0.5f + baselineOffset);
    }

    CGContextClosePath(context);
    CGContextStrokePath(context);
} 
```

**AddNotesViewController.h**

```
@interface AddNotesViewController : UIViewController <UITextViewDelegate,UITabBarDelegate>
{
    NoteView *note;
}

@property (nonatomic, retain) NoteView *note;

@end 
```

**添加NotesViewController.m**

```
- (void)loadView 
{
    [super loadView];
    self.note = [[[NoteView alloc] initWithFrame:self.view.bounds] autorelease];
    [self.view addSubview:note];
    note.delegate = self;
    note.text=@"";
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [note setNeedsDisplay];
}

- (void)textViewDidBeginEditing:(UITextView *)textView 
{
    CGRect frame = self.view.bounds;
    frame.size.height -= KEYBOARD_HEIGHT;
    note.frame = frame;
}

-  (void)textViewDidEndEditing:(UITextView *)textView 
{
    note.frame = self.view.bounds;
}

- (BOOL)textView:(UITextView *)textView 
shouldChangeTextInRange:(NSRange)range 
        replacementText:(NSString *)text
{
    if ([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    }
    return YES;
} 
```

请告诉我如何以及在哪里添加导航栏，后退按钮和工具栏，2 toolBarItems 就可以了。在此先感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:59:29.543

**导航栏图片**

```
UINavigationBar *navBar = [[self navigationController] navigationBar];
    UIImage *image = [UIImage imageNamed:@"TopBar.png"];
    [navBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

**返回键**

```
-(void)getBackBtn
{
    UIButton *Btn =[UIButton buttonWithType:UIButtonTypeCustom];

    [Btn setFrame:CGRectMake(0.0f,0.0f,50.0f,30.0f)];
    [Btn setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"back.png"]]  forState:UIControlStateNormal];
    //[Btn setTitle:@"OK" forState:UIControlStateNormal];
    //Btn.titleLabel.font = [UIFont fontWithName:@"Georgia" size:14];
    [Btn addTarget:self action:@selector(backBtnPress:) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithCustomView:Btn];
    [self.navigationItem setLeftBarButtonItem:addButton];
} 
```

**BackButtonAction**

```
-(IBAction)backBtnPress:(id)sender
{
} 
```

**在导航栏上查看**

对于在导航栏上查看，您可以按照我的答案[链接](https://stackoverflow.com/questions/13890380/addimg-mutiple-button-on-navigation-bar-in-iphone-sdk/13890404#13890404)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:40:05.977

使用此代码....

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc]
                                  initWithTitle:NSLocalizedString(@"Back", @"")
                                  style:UIBarButtonItemStyleDone
                                  target:self
                                  action:@selector(YourActionMethod:)];

self.navigationItem.leftBarButtonItem = addButton; 
```

# android - android共享偏好存储多个值；

> ID：13565967
> 
> 赞同：0
> 
> 时间：2012-11-26T13:36:28.203
> 
> 标签：android, sharedpreferences

我使用以下方法创建了 SharedPreference obj： 注意：在相同的 pref 文件名下创建多个首选项

```
public static Sting name = "abx"; //pref file name
          spo = context.getsharedpreference(name , mode_private);
          editor = spo.edit(); //get the editor associated with pref obj

         Map<String, String> test= new HashMap<String, String>();//create a map
    test.put("1", "abc");//fill the values
    test.put("2", "efg");//used map because values are stored in key -value pairs
    test.put("3", "ghj");
       for (String s : test.keySet()) {
        // use the name as the key, and the icon as the value
        editor.putString(s, nameIcons.get(s));//use the key as preference name
    }

    editor.commit();//commit the preferences 
```

我有疑问，如果我错了，请纠正我，创建名为“abz”的 SharedPreference 文件，并在此文件中将首选项值存储为键值对，或者如果编辑器 obj 为每个键创建新的首选项文件，有什么用在创建共享首选项对象时提供首选项文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:39:01.680

本质上，您可以为给定的应用程序创建多个首选项文件。可以想象这样做有几个原因，最好是如果您有多个帐户。您可以将一组首选项标记为“account1”和另一组“account2”。只需跟踪您所在的帐户，您就可以共享代码而没有大量复杂性。

除非您专门使用此功能，否则我建议您使用`context.getApplicationContext().getPackageName()`该名称，因为它应该几乎无处不在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:49:50.267

基本上每个循环内部会发生什么：- 首选项中只会存储一个值，而不是使用代码中为地图中的每个值提供的名称创建 SharedPreferance 文件。

在创建 sharedPreferance 期间使用 Giving File name，以便可以在应用程序的其他部分检索它并可以访问其值。

# excel - 对特定范围的多列进行排序

> ID：13565968
> 
> 赞同：0
> 
> 时间：2012-11-26T13:36:36.460
> 
> 标签：excel, vba, sorting

我正在尝试对特定范围的多个列进行排序。我的工作表有 4 列（A、B、C、D）和 80 行......但是，我想按 D 列排序。但是，我只想在第 2-20 行之间按降序排序。有人可以帮我处理这段代码吗？

这是我的代码：

```
Sub Macro1()
Range("A2:D20").Select
ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Clear
ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Add Key:=Range("D2:D20") _
     , SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:=xlSortNormal
With ActiveWorkbook.Worksheets("Sheet1").Sort
    .SetRange Range("A1:D20")
    .Header = xlYes
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With
End Sub 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:46:28.230

怎么样：

```
Range("A2:D20").Sort key1:=Cells(20, 4), order1:=xlDescending, Header:=xlNo 
```

# php - 运行包含 curl 的 PHP 文件

> ID：13565970
> 
> 赞同：0
> 
> 时间：2012-11-26T13:36:52.920
> 
> 标签：php, curl

> **可能重复：**
> [如何启用 php curl 以在 php cli 中使用](https://stackoverflow.com/questions/5675070/how-to-enable-php-curl-for-use-in-php-cli)

我正在运行一个包含 curl 功能的文件。当我在命令提示符下运行时，出现以下错误。

测试.php

```
<?php
echo "Hai";

$url="http://www.google.com/";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$str = curl_exec($ch); 
curl_close($ch);
echo $str;
?> 
```

命令：**C:\>test>php test.php**

致命错误：调用未定义的函数 curl_init()

当我在网络浏览器中运行时，它运行良好。

我得到的信息

```
<?php
dl("php_curl.dll");
...
?> 
```

还没解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:38:58.153

可能您对 Web 服务器和 cli 有不同的配置...尝试检查文件系统中是否有更多 php.ini 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:39:30.127

当没有为命令行 PHP 启用 curl 扩展时，就会发生这种情况。

`/etc/php5/cli/php.ini`检查文件中是否启用

这是`php.ini`命令行 PHP 的特定文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:39:43.273

似乎 curl 尚未安装为您的 PHP 扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:40:05.377

您需要 cURL 库才能从命令提示符运行 cURL 命令。尝试使用[Cygwin](http://www.cygwin.com/)，或下载 cURL 可执行文件。你可以在这里找到它：[http ://curl.haxx.se/dlwiz/?type=bin](http://curl.haxx.se/dlwiz/?type=bin)

# django - 使用 sweetpie 资源将查询集转换为 json

> ID：13565975
> 
> 赞同：8
> 
> 时间：2012-11-26T13:37:01.670
> 
> 标签：django, tastypie

我有一个模型的美味资源。我还有一个视图，它提出了一个需要序列化并发送给客户端的查询集。我正在寻找一种让美味派资源处理查询集的序列化和脱水的方法。

我看到我可以将单个对象传递给

```
[Resource.build_bundle(self, obj=None, data=None, request=None)][1] 
```

创建一个捆绑包，然后将捆绑包传递给

```
[Resource.full_dehydrate(self, bundle)][2] 
```

最后打电话

```
[Resource.serialize(self, request, data, format, options=None)][3] 
```

关于脱水数据。

但我想将完整的查询集转换为 json 而不仅仅是单个对象。也许我需要的只是一种将完整查询集转换为捆绑包的方法。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T08:45:46.610

这也困扰着我，但我想我在查看了 github 上的 sweetpie 代码后找到了答案。

这将制作一堆捆绑包。

```
bundles = [Resource.build_bundle(obj=q, request=request) for q in Queryset] 
```

这将执行脱水。

```
data = [Resource.full_dehydrate(bundle) for bundle in bundles] 
```

这将执行序列化。

```
Resource.serialize(None, data, 'application/json'), 
```

# google-app-engine - itext-gae.jar 上的错误

> ID：13565976
> 
> 赞同：1
> 
> 时间：2012-11-26T13:37:03.537
> 
> 标签：google-app-engine, itext, xdocreport

我正在使用[XDocReports](http://code.google.com/p/xdocreport/)将给定的 .odt 文档转换为 .pdf。如果我使用 itext-2.1.7.jar 的原始版本，它可以正常工作，但是，如果我使用[itext-gae.jar](http://blog.rubypdf.com/2009/12/17/how-to-run-itext-on-google-app-engine/)则不能。

我得到的错误是：

```
java.lang.StackOverflowError
at com.lowagie.text.pdf.RandomAccessFileOrArray.seek(Unknown Source)
at com.lowagie.text.pdf.RandomAccessFileOrArray.reOpen(Unknown Source)
at com.lowagie.text.pdf.RandomAccessFileOrArray.insureOpen(Unknown Source)
at com.lowagie.text.pdf.RandomAccessFileOrArray.seek(Unknown Source)
at com.lowagie.text.pdf.RandomAccessFileOrArray.reOpen(Unknown Source)
at com.lowagie.text.pdf.RandomAccessFileOrArray.insureOpen(Unknown Source)
.... 
```

欢迎任何有关此问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:41:22.983

我的名字是布鲁诺·洛瓦吉。您的堆栈跟踪中的名称指的是我。问题是您使用的是我不认可的 iText 版本。

请使用官方 Android/GAE 端口：[http ://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/5.3.4/](http://repo.itextsupport.com//android_gae/com/itextpdf/itextgoogle/5.3.4/)

使用[http://demo.itextsupport.com/newslicense/](http://demo.itextsupport.com/newslicense/)获取许可证密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:04:05.950

是iText-GAE的问题，我已经修复了，但是还有一个问题，就是XDocReport需要java.awt.Color类，但是GAE不支持，所以用iText-GAE是没有意思的。

# javascript - Timeline JS GreenSock GSAP中的背景爆炸

> ID：13565978
> 
> 赞同：1
> 
> 时间：2012-11-26T13:37:13.803
> 
> 标签：javascript, gsap

如何在时间轴 GreenSock GSAP Javascript [http://www.greensock.com/](http://www.greensock.com/)中创建背景爆炸？我搜索但找不到方法。我对 GSAP 完全陌生，我有一个紧急项目，对我来说很难创造这种效果。

这是我需要实现的效果示例：

![](../Images/7cefcb029ead8810a66729a66aab4ee9.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:57:44.010

我解决了这个问题。这不是一个完美的解决方案，但它可以满足我的需求。

JavaScript：

```
 function rand2Number(){
    return Math.round(Math.random(1));
}

var rows = 10,
    columns = 10,
    cntPiecesBg = $('#cntPiecesBg'),
    wWidth = $('.wrapper').outerWidth(),
    wHeight = sectionHeight,
    objWidth = wWidth/rows,
    objHeight = wHeight/columns;

for(var i=0; i<rows*columns; i++){

   var topIndex = Math.floor(i/rows),
       leftIndex = i%rows;

   var obj = $('<span></span>')
        .css({
            width:objWidth ,
            height:objHeight,
            top : objHeight*topIndex,
            left: objWidth*leftIndex
        });

    cntPiecesBg.append(obj);
}

var pieces = cntPiecesBg.find('span'),
    backgroundTl = new TimelineLite(),
    nt = { signs:['-=','+='] };

pieces.each( function (){
        var $this = $(this);

        backgroundTl.insertMultiple([
            TweenMax.staggerTo($this, 2, {css:{ top : nt.signs[rand2Number()] + (Math.random()*1500)+500 ,opacity:0} , ease:Power1.easeOut}),
            TweenMax.staggerTo($this,2, {css:{ left : nt.signs[rand2Number()] + (Math.random()*1500)+500 ,opacity:0}, ease:Power1.easeOut} )
        ]);
    }
) 
```

CSS：

```
#cntPiecesBg span{
    position:absolute;
    display: block;
    font-size: 0;
    background-color: #313435;
} 
```

`

# c++ - 赋值期间何时发生隐式类型转换

> ID：13565979
> 
> 赞同：1
> 
> 时间：2012-11-26T13:37:16.627
> 
> 标签：c++, casting

如果得到以下代码：

```
uint8_t value   = 0xF0;
uint16_t shift  = 0x10;
uint32_t result = value << shift;

cout << "The Result is: " << result << endl; 
```

我预计输出为 0，但它是 15728640。

我的问题

*   不是表达式评估 => 0 之后隐式转换为结果类型吗？
*   这是行为标准吗？
*   我在哪里可以获得有关这种行为的更多信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:41:13.113

当您编写`value << shift`,时`value`隐式转换为`int`移位之前。这称为“整数提升”。没有其他规则适用于这种特殊情况。

整数提升适用于范围适合`int`. 如果它不适合一个`int`，则`unsigned int`尝试。如果两者都不适合，那么整数提升什么也不做。

有关更多信息...好吧，我刚刚阅读了规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:41:06.757

移位操作涉及“整数提升”，这意味着将比 int 更窄的类型转换为 int。促销是在轮班之前完成的，因此您看到的行为是预期的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:45:41.520

如果您正在使用 32 位或 64 位字机，则移位将在 32 位或 64 位寄存器中。也就是说，将 8 位“值”加载到寄存器中，移位，然后（如果需要）截断为最终变量。

这就是为什么“int”的长度取决于实现。

# fedex - 无法在 Fed Ex 网络服务中获得礼遇费率

> ID：13565988
> 
> 赞同：5
> 
> 时间：2012-11-26T13:37:57.983
> 
> 标签：fedex

我正在使用 Fed Ex Shipping Web Service，但在运行应用程序时出现以下错误。 **无法获得礼遇率。** 我正在使用联邦快递测试账户和联邦快递仪表号码。我正在使用 shipServiceDefination.wsdl。

任何机构都可以提出什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:03:27.317

我有同样的问题。第一次我所有的测试请求都正常工作，但后来我开始收到类似的消息。我想联邦快递测试网络服务有时无法正常工作或对测试请求有限制......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:55:56.317

代码没有错，这主要是由于网站问题。几个小时后我尝试了同样的事情，它工作得很好。

# jquery - 如何获取jCarousel的可见中间元素的ID

> ID：13565990
> 
> 赞同：0
> 
> 时间：2012-11-26T13:38:07.377
> 
> 标签：jquery, jcarousel

请建议在无限循环配置的情况下如何获取[jCarousel](http://sorgalla.com/projects/jcarousel/)中间元素的 id？ ![例子](../Images/7426dd312376386a2848eb3a20f45429.png)

# programming-languages - 静态与堆栈动态共享内存

> ID：13565994
> 
> 赞同：0
> 
> 时间：2012-11-26T13:38:28.897
> 
> 标签：programming-languages, computer-science, language-design

我正在阅读第 5 章语言的概念并发现

静态的缺点：子程序不能共享相同的存储。

stack-dynamic 的优点：没有递归，子程序可以为他们的本地人共享相同的内存空间并非没有优点。

而且我认为由于从开始到终端的静态绑定，所有子程序都应该可以看到并使用

它

就像我测试的代码

```
#include<iostream>
static int test = 0;

void func1(){ cout << test++ << endl;}
void func2(){ cout << test++ << endl;}
int main(){
    func1();
    func2();
} 
```

并且每次执行函数时堆栈动态分配，就像被推送到堆栈（LIFO）一样，所以他们

在不同的记忆空间。

我不知道我的想法错误在哪里？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:13:17.297

您的程序在专用内存空间中运行。静态变量具有全局范围。鉴于此，我认为*“子程序不能共享相同的存储空间”*意味着静态变量仅被实例化一次，并且在程序的整个生命周期中它都是同一个对象。这有几个后果：

1.  如果您的独立函数需要存储作为其执行的一部分，则它们不应处理相同的静态变量，因为它们会影响使用相同变量的其他函数。
2.  如果您的函数可以并行运行（例如在多个处理器上）并且它们寻址相同的静态变量，这些变量将成为共享资源，这意味着必须保护它免受并行访问（这可能会破坏数据并导致不正确的行为）。

动态分配/堆栈变量使用程序运行的相同内存空间，但可以多次实例化，实例相互独立。例如，如果堆栈变量在函数内部定义，它会在函数进入时分配，并在函数退出时释放。如果再次输入该函数，将创建新变量。它是相同的内存空间，但该空间中的**堆栈帧不同。**

# logging - 我在soapUI groovy脚本测试屏幕中看不到日志

> ID：13565999
> 
> 赞同：1
> 
> 时间：2012-11-26T13:38:40.227
> 
> 标签：logging, groovy, jar, external, soapui

我正在使用一个外部 jar 来测试我的应用程序，这个 jar 在soapui.log 文件中发布了一些日志

但是，我无法在 groovy 屏幕的日志框架中看到它们（soapui 日志、http 日志、码头日志、脚本日志等）

我尾随 soapui.log 文件，但是在一个窗口上运行所有内容并在另一个窗口中检查结果非常耗时。

```
import org.jsmpp.example.*;
import org.jsmpp.bean.*;

String host     = "xxxx"
int port        = xxx
String user     = "xxx"
String pwd      = "xx"
String sysType  = "xx"
String serviceType  = "xxx"

session = new simpleSubmit();
session.bind(host,port,user,pwd); 
```

当我运行此脚本时，我在 soapui.log 文件中看到以下行

```
2012-12-05 02:31:43,150 INFO  [SMPPSession] Connected
2012-12-05 02:31:43,151 INFO  [SMPPSession] Starting PDUReaderWorker with processor degree:3 ...
2012-12-05 02:31:43,165 INFO  [SMPPSession] Starting EnquireLinkSender
2012-12-05 02:31:58,221 INFO  [SMPPSession] PDUReaderWorker stop
2012-12-05 02:31:58,660 INFO  [SMPPSession] EnquireLinkSender stop 
```

起初我的意图是在soapUI GUI（log.output 屏幕或soapUI.log 屏幕）中显示这些行。但如果我能把它们存起来就更好了。因此我可以验证我的测试用例..