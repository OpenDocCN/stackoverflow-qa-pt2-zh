# StackOverflow 问答 12927000-12927999

# jakarta-ee - 是否有任何构建 EAR 的示例 Spring MVC + EJB + Maven 项目？

> ID：12927003
> 
> 赞同：1
> 
> 时间：2012-10-17T04:12:47.820
> 
> 标签：jakarta-ee, maven, spring-mvc, ear

我已经找到了 org.jboss.spring.archetypes:spring-mvc-webapp，但它被构造为单个 WAR 部署。

是否有任何示例（或真正的 OSS）项目展示如何构建一个将 EJB jar 和 WAR 与 SpringMVC 和 maven 相结合的 EAR 项目？

我使用前面提到的原型作为起点一起破解了一些东西，但是由于奇怪的依赖问题，它完全混淆了 IntelliJ 的 maven 集成，所以我只能从命令行构建 - 我想一定有更好的方法。

# c#-4.0 - 将 OpenISO8583.Net 转换为不同的格式

> ID：12927004
> 
> 赞同：1
> 
> 时间：2012-10-17T04:12:49.620
> 
> 标签：c#-4.0, iso8583, openiso8583.net

我正在尝试向金融机构实施 ISO8589 消息。然而，他们有一个我调用的 Web 服务，然后我将 ISO8589 有效负载加载到 WCF 服务的适当字段中。

我以这种方式创建了一条 ISO8589 消息：

```
var isoMessage = new OpenIso8583.Net.Iso8583();
isoMessage.MessageType = Iso8583.MsgType._0100_AUTH_REQ;
isoMessage.TransactionAmount = (long) 123.00;
isoMessage[Iso8583.Bit._002_PAN] = "4111111111111111";
// More after this. 
```

我似乎无法弄清楚如何将 isoMessage 转换为人类可读的 ASCII 格式，以便将其传递给 Web 服务。

任何人都知道如何使用这个库来做到这一点？还是我以错误的方式使用这个库？

谢谢。

**更新：**

我已经想出了如何做到这一点：

```
var asciiFormatter = new AsciiFormatter();
var asciiValue = asciiFormatter.GetString(isoMessage.ToMsg()); 
```

*但是*，现在我正在尝试获取 isoMessage 并使用 OpenIso8583.Net 轻松地将整个内容作为十六进制字符串传递，如下所示：

```
var isoMessage = new OpenIso8583Net.Iso8583();
isoMessage.MessageType = Iso8583.MsgType._0800_NWRK_MNG_REQ;
isoMessage[Iso8583.Bit._003_PROC_CODE] = "000000";
isoMessage[Iso8583.Bit._011_SYS_TRACE_AUDIT_NUM] = "000001";
isoMessage[Iso8583.Bit._041_CARD_ACCEPTOR_TERMINAL_ID] = "29110001"; 
```

我知道这很棘手，因为有些字段是 BCD、AlpahNumeric、Numeric 等。但是，使用 OpenIso8583.Net 应该真的很容易（或者我认为）？我想得到的结果是：

```
Msg   Bitmap (3, 11, 41)      ProcCode Audit    Terminal ID
----- ----------------------- -------- -------- -----------------------
08 00 20 20 00 00 00 80 00 00 00 00 00 00 00 01 32 39 31 31 30 30 30 31 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:18:40.017

本质上，您需要扩展`Iso8583`您自己初始化的内容`Template` 在 中`Template`，您可以为每个字段设置格式化程序，以便不使用 BCD 和二进制打包。查看源代码`Iso8583`以了解其工作原理。

# neo4j - 与关系 neo4j 的关系

> ID：12927008
> 
> 赞同：2
> 
> 时间：2012-10-17T04:13:09.730
> 
> 标签：neo4j, spring-data, cypher

也许这是一个很长的镜头，但值得一试......
我有以下关系**User1-[:MATCHED]-User2**，我想允许其他用户就该关系提供反馈（喜欢），我猜显而易见的答案是从**匹配**类型中定义新节点，该节点将为每两个匹配的用户创建，然后与每个喜欢匹配的用户的 LIKE 关系关联到该节点。
我正在尝试考虑其他方式来在图表中对其进行建模，而无需为每个匹配创建新节点的开销......
关系可以与除开始/结束节点之外的其他节点相关吗？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:32:36.757

Neo4j 不支持超图或关系到关系。用节点建模你的 MATCHED 关系可能是要走的路。

另一种方法是从另一个节点引用关系 ID：

```
User1-[MATCHED]->User2 (where MATCHED has the id xyz)
User3-[LIKES]->Relationship(relId = xyz) 
```

“关系”节点将包含 MATCHED 关系的 id 作为属性。需要对该 relId 属性进行索引以查找给定 MATCHED 关系的所有 LIKES。

但是，此解决方案不太适合遍历。

# opencv - OpenCV 可视化模板匹配的全过程

> ID：12927011
> 
> 赞同：2
> 
> 时间：2012-10-17T04:14:40.793
> 
> 标签：opencv, visualization, template-matching

我对结合 C++ 的 OPENCV 很陌生。我有一个问题如下。如果我们想在进行模板匹配时将整个过程可视化，这可能吗？如果是这样，我应该参考哪些 OPENCV 的功能？基本上，我们应该怎么做才能可视化模板图像（较小比例）正在移动（用户定义的方法）背景图像（较大比例）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:28:23.477

当您使用模板匹配功能时，无法将过程可视化。您可以可视化生成的图像，灰度级与模板在原始图像中每个位置的拟合程度相关联。如果你真的想可视化这个过程，你必须自己做：实现卷积，编写循环并`imshow`在每次迭代时调用。

# c++ - 查找后缀到前缀表达式

> ID：12927014
> 
> 赞同：0
> 
> 时间：2012-10-17T04:15:17.990
> 
> 标签：c++, c, data-structures, prefix, postfix-notation

> **可能重复：**
> [后缀到中缀对话](https://stackoverflow.com/questions/12908510/postfix-to-infix-conversation)

这个表达式的前缀符号是什么？我无法解决这个表达式

```
6 a b 7 * + - c d g / + e ^ f * + 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:21:03.460

有序表达式将是

```
[6-(a + b*7)] + [(c + d/g) ^ e]*f 
```

从中您可以找到预购，即 + -6 + a * b 7 * ^ + c / dgef

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:11:07.067

**后缀到中缀::**

```
6 a b 7 * + - c d g / + e ^ f * +

6 a (b*7) + - c d g / + e ^ f * +
6 {a  + (b*7)} - c d g / + e ^ f * +
[6  - {a  + (b*7)}]  c d g / + e ^ f * +
[6  - {a  + (b*7)}]  c (d  / g)  + e ^ f * +
[6  - {a  + (b*7)}]  {c + (d  / g)} e ^ f * +
[6  - {a  + (b*7)}]  [{c + (d  / g)}  ^ e]  f * +
[6  - {a  + (b*7)}]  ([{c + (d  / g)}  ^ e]  * f)  +
[6  - {a  + (b*7)}]   + ([{c + (d  / g)}  ^ e]  * f) 
```

**中缀前缀::**

```
[6  - {a  + (b*7)}]   + ([{c + (d  / g)}  ^ e]  * f) 

[6  - {a  + (b*7)}]   + *[{c + (d  / g)}  ^ e]  f
[6  - {a  + (b*7)}]   + *[{c + (/ d g)}  ^ e]  f
[6  - {a  + (b*7)}]   + *[{+ c / d g}  ^ e]  f
[6  - {a  + (b*7)}]   + (*^+ c / d g e  f)
[6  - {a  + (*b7)}] + (*^+ c / d g e  f)
[6  - {+a  *b7}] + (*^+ c / d g e  f)
[-6  +a  *b7] + (*^+ c / d g e  f)
+[-6  +a  *b7]  (*^+ c / d g e  f)
+-6 +a  *b7  *^+ c / d g e  f 
```

# macros - 适用于 Mac 的 VPN 服务器（无 OS X 服务器）

> ID：12927017
> 
> 赞同：1
> 
> 时间：2012-10-17T04:16:13.223
> 
> 标签：macros, osx-lion, vpn

有什么方法可以将我的 mini (osx-lion) 设置为 VPN 服务器？

我在谷歌搜索了这个，得到了两个解决方案：

它们是[iVPN](http://macserve.org.uk/projects/ivpn/)和[VPN 服务器配置器](http://www.greenworldsoft.com/product-vpn-server-help.html)，但它们不是免费的。

我想免费做这个，可以吗？而且我没有运行 OS X 服务器。此外，我在路由器后面（因此 8 台计算机只有一个外部 IP 地址）。

我想使用PPTP。

有什么解决办法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:18:45.310

Mac是unix，所以可以使用大部分的linux vpn服务器，比如pptpd

# jquery - Jquery TinyMCE 添加/编辑链接 - 无法在 IE 中粘贴

> ID：12927019
> 
> 赞同：4
> 
> 时间：2012-10-17T04:16:47.760
> 
> 标签：jquery, tinymce, wysiwyg, text-editor, rich-text-editor

使用 Jquery TinyMCE 时，选择一些文本并尝试添加超链接，会出现添加/编辑链接 tinymce 弹出窗口，但是当我尝试粘贴 URL 时，无法在 IE 中启用右键单击“粘贴”选项，Ctrl+ 也无法启用五、工作。

这仅适用于 IE 浏览器。我可以粘贴在 Chrome 和 FF 中。

这就是我配置tinymce的方式。

```
:{
            theme: "advanced",
            mode : "specific_textareas",
            editor_selector: "richtext-editor",
            theme_advanced_toolbar_location:"top",
            theme_advanced_toolbar_align:"left",
            theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,fontsizeselect,forecolorpicker,|,link,unlink,|,bullist,numlist,|,outdent,indent,|,justifyleft,justifycenter,justifyright,|,cut,copy,paste,pastetext,|,undo,redo",
            theme_advanced_buttons2:"",
            theme_advanced_buttons3:"",
            theme_advanced_buttons4:"",
            plugins:"inlinepopups,paste",
            theme_advanced_path : false,
            inline_styles : true,
            paste_remove_styles: true,
            paste_retain_style_properties: "",
            paste_convert_headers_to_strong : true,
            invalid_elements : "img"
            //plugins:"advlink,iespell,inlinepopups,media,print,contextmenu,paste"
    } 
```

笔记：

粘贴到编辑器本身在所有浏览器中都很完美。我也尝试过启用上下文菜单，但没有运气。

我还仔细检查了我要粘贴的网址确实已复制到剪贴板

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:39:13.707

我发现了这个问题。

是“inlinepopups”插件禁用了弹出窗口上的剪贴板剪切/复制/粘贴。

删除 inlinepopups 就可以了，现在在所有浏览器中都可以在 Add/Edit Link 弹出窗口上粘贴 url。

需要注意的一点：建议仅对 IE 禁用此插件，因为它是一个有用的插件，此插件所做的只是帮助将这些对话框弹出窗口视为内联弹出窗口，这样就不会遇到站点所在的问题或者浏览器有弹出窗口拦截器。

谢谢

--

人力资源网络

# ios - UICollectionView flowLayout 没有正确包装单元格

> ID：12927027
> 
> 赞同：79
> 
> 时间：2012-10-17T04:18:06.780
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewcell

我有`UICollectionView`一个 FLoLayout。它在大多数情况下都会像我预期的那样工作，但时不时地有一个单元格不能正确包裹。例如，应该在第三行的第一个“列”中的单元格如果实际上在第二行的尾随，并且它应该是一个空白区域（见下图）。你可以看到这个胭脂牢房的左侧（其余部分被切断），它应该是空的。

这不会始终如一地发生；它并不总是同一行。一旦它发生，我可以向上滚动然后返回，单元格将自行修复。或者，当我按下单元格（通过推送将我带到下一个视图）然后弹回时，我会看到单元格处于不正确的位置，然后它会跳转到正确的位置。

滚动速度似乎更容易重现问题。当我慢慢滚动时，我仍然可以看到单元格在错误的位置，但它会立即跳转到正确的位置。

当我添加部分插图时，问题就开始了。以前，我的单元格几乎与集合边界齐平（很少或没有插图），但我没有注意到问题。但这意味着集合视图的右侧和左侧是空的。即，无法滚动。此外，滚动条没有向右齐平。

我可以在模拟器和 iPad 3 上解决这个问题。

我猜这个问题是由于左右部分的插图而发生的......但是如果值是错误的，那么我希望行为是一致的。我想知道这是否可能是Apple的错误？或者这可能是由于插入或类似的东西的积累。

![问题和设置说明](../Images/c9df5bad625d9d1dd672a542ef414cb2.png)

* * *

**跟进**：我已经使用尼克的[这个答案](https://stackoverflow.com/a/13389461/377384)超过 2 年了，现在没有问题（如果人们想知道这个答案是否有任何漏洞 - 我还没有发现任何问题）。干得好尼克。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-14T23:55:31.473

UICollectionViewFlowLayout 的 layoutAttributesForElementsInRect 实现中存在一个错误，导致它在某些涉及节插入的情况下为单个单元格返回两个属性对象。返回的属性对象之一是无效的（在集合视图的范围之外），另一个是有效的。下面是 UICollectionViewFlowLayout 的子类，它通过排除集合视图边界之外的单元格来解决问题。

```
// NDCollectionViewFlowLayout.h
@interface NDCollectionViewFlowLayout : UICollectionViewFlowLayout
@end

// NDCollectionViewFlowLayout.m
#import "NDCollectionViewFlowLayout.h"
@implementation NDCollectionViewFlowLayout
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
  NSArray *attributes = [super layoutAttributesForElementsInRect:rect];
  NSMutableArray *newAttributes = [NSMutableArray arrayWithCapacity:attributes.count];
  for (UICollectionViewLayoutAttributes *attribute in attributes) {
    if ((attribute.frame.origin.x + attribute.frame.size.width <= self.collectionViewContentSize.width) &&
        (attribute.frame.origin.y + attribute.frame.size.height <= self.collectionViewContentSize.height)) {
      [newAttributes addObject:attribute];
    }
  }
  return newAttributes;
}
@end 
```

看到[这个](https://gist.github.com/4075682)。

其他答案建议从 shouldInvalidateLayoutForBoundsChange 返回 YES，但这会导致不必要的重新计算，甚至不能完全解决问题。

我的解决方案完全解决了这个错误，并且在 Apple 修复根本原因时不会引起任何问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-03T08:48:32.770

将其放入拥有集合视图的 viewController

```
- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];
    [self.collectionView.collectionViewLayout invalidateLayout];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-31T20:06:06.977

我在我的 iPhone 应用程序中发现了类似的问题。搜索 Apple 开发论坛给我带来了这个合适的解决方案，它适用于我的情况，也可能适用于你的情况：

子类化`UICollectionViewFlowLayout`并覆盖`shouldInvalidateLayoutForBoundsChange`返回`YES`。

```
//.h
@interface MainLayout : UICollectionViewFlowLayout
@end 
```

和

```
//.m
#import "MainLayout.h"
@implementation MainLayout
-(BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds{
    return YES;
}
@end 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-07-03T12:06:41.903

尼克斯奈德回答的 Swift 版本：

```
class NDCollectionViewFlowLayout : UICollectionViewFlowLayout {
    override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let attributes = super.layoutAttributesForElements(in: rect)
        let contentSize = collectionViewContentSize
        return attributes?.filter { $0.frame.maxX <= contentSize.width && $0.frame.maxY < contentSize.height }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-17T09:28:29.697

对于带有边距插图的基本gridview布局，我也遇到了这个问题。我现在所做的有限调试是`- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect`在我的 UICollectionViewFlowLayout 子类中实现并通过记录超类实现返回的内容，这清楚地表明了问题。

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
    NSArray *attrsList = [super layoutAttributesForElementsInRect:rect];

    for (UICollectionViewLayoutAttributes *attrs in attrsList) {
        NSLog(@"%f %f", attrs.frame.origin.x, attrs.frame.origin.y);
    }

    return attrsList;
} 
```

通过实现`- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath`，我还可以看到它似乎返回了 itemIndexPath.item == 30 的错误值，这是我的 gridview 每行单元格数的 10 倍，不确定这是否相关。

```
- (UICollectionViewLayoutAttributes *)initialLayoutAttributesForAppearingItemAtIndexPath:(NSIndexPath *)itemIndexPath {
    UICollectionViewLayoutAttributes *attrs = [super initialLayoutAttributesForAppearingItemAtIndexPath:itemIndexPath];

    NSLog(@"initialAttrs: %f %f atIndexPath: %d", attrs.frame.origin.x, attrs.frame.origin.y, itemIndexPath.item);

    return attrs;
} 
```

由于没有时间进行更多调试，我现在所做的解决方法是减少我的 collectionviews 宽度，数量等于左边距和右边距。我有一个仍然需要全宽的标题，所以我在我的 collectionview 上设置了 clipsToBounds = NO ，然后还删除了它的左右插图，似乎有效。为了使标题视图保持原位，您需要在布局方法中实现框架移动和调整大小，这些方法的任务是为标题视图返回 layoutAttributes。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-08T13:26:03.930

我已向 Apple 添加了错误报告。对我有用的是将底部 sectionInset 设置为小于顶部插入的值。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-29T17:50:25.860

我在 iPhone 上使用 a 时遇到了同样的单元格替换问题`UICollectionViewFlowLayout`，所以我很高兴找到你的帖子。我知道您在 iPad 上遇到问题，但我发布此内容是因为我认为这是`UICollectionView`. 所以这就是我发现的。

我可以确认这与`sectionInset`该问题有关。除此之外，`headerReferenceSize`它还影响细胞是否被取代。（这是有道理的，因为计算原点需要它。）

不幸的是，甚至必须考虑不同的屏幕尺寸。在玩弄这两个属性的值时，我体验到某种配置要么适用于（3.5 英寸和 4 英寸），要么不适用，要么只适用于其中一种屏幕尺寸。通常都没有。（这也是有道理的，因为`UICollectionView`变化的界限，因此我没有体验到视网膜和非视网膜之间的任何差异。）

我最终根据屏幕尺寸设置了`sectionInset`and 。`headerReferenceSize`我尝试了大约 50 种组合，直到找到不再出现问题并且布局在视觉上可以接受的值。很难找到适用于两种屏幕尺寸的值。

总而言之，我只能建议您使用这些值，在不同的屏幕尺寸上检查这些值，并希望 Apple 能解决这个问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-10-31T09:44:58.140

我刚刚遇到了类似的问题，即在**iOS 10**上 UICollectionView 滚动后单元格消失（在 iOS 6-9 上没有问题）。

UICollectionViewFlowLayout 的子类化和覆盖方法 layoutAttributesForElementsInRect: 在我的情况下不起作用。

解决方案很简单。目前我使用 UICollectionViewFlowLayout 的一个实例并设置**itemSize 和estimatedItemSize**（我之前没有使用estimatedItemSize ）并将其设置为一些非零大小。实际大小在 collectionView:layout:sizeForItemAtIndexPath: 方法中计算。

此外，我已经从 layoutSubviews 中删除了对 invalidateLayout 方法的调用，以避免不必要的重新加载。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-19T00:32:35.490

我刚刚遇到了类似的问题，但找到了一个非常不同的解决方案。

我正在使用带有水平滚动的 UICollectionViewFlowLayout 的自定义实现。我还在为每个单元格创建自定义框架位置。

我遇到的问题是 [super layoutAttributesForElementsInRect:rect] 实际上并没有返回应该在屏幕上显示的所有 UICollectionViewLayoutAttributes。在调用 [self.collectionView reloadData] 时，某些单元格会突然被设置为隐藏。

我最终做的是创建一个 NSMutableDictionary，它缓存了我迄今为止看到的所有 UICollectionViewLayoutAttributes，然后包含我知道应该显示的任何项目。

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {

    NSArray * originAttrs = [super layoutAttributesForElementsInRect:rect];
    NSMutableArray * attrs = [NSMutableArray array];
    CGSize calculatedSize = [self calculatedItemSize];

    [originAttrs enumerateObjectsUsingBlock:^(UICollectionViewLayoutAttributes * attr, NSUInteger idx, BOOL *stop) {
        NSIndexPath * idxPath = attr.indexPath;
        CGRect itemFrame = [self frameForItemAtIndexPath:idxPath];
        if (CGRectIntersectsRect(itemFrame, rect))
        {
            attr = [self layoutAttributesForItemAtIndexPath:idxPath];
            [self.savedAttributesDict addAttribute:attr];
        }
    }];

    // We have to do this because there is a bug in the collection view where it won't correctly return all of the on screen cells.
    [self.savedAttributesDict enumerateKeysAndObjectsUsingBlock:^(NSString *key, NSArray * cachedAttributes, BOOL *stop) {

        CGFloat columnX = [key floatValue];
        CGFloat leftExtreme = columnX; // This is the left edge of the element (I'm using horizontal scrolling)
        CGFloat rightExtreme = columnX + calculatedSize.width; // This is the right edge of the element (I'm using horizontal scrolling)

        if (leftExtreme <= (rect.origin.x + rect.size.width) || rightExtreme >= rect.origin.x) {
            for (UICollectionViewLayoutAttributes * attr in cachedAttributes) {
                [attrs addObject:attr];
            }
        }
    }];

    return attrs;
} 
```

这是正确保存 UICollectionViewLayoutAttributes 的 NSMutableDictionary 的类别。

```
#import "NSMutableDictionary+CDBCollectionViewAttributesCache.h"

@implementation NSMutableDictionary (CDBCollectionViewAttributesCache)

- (void)addAttribute:(UICollectionViewLayoutAttributes*)attribute {

    NSString *key = [self keyForAttribute:attribute];

    if (key) {

        if (![self objectForKey:key]) {
            NSMutableArray *array = [NSMutableArray new];
            [array addObject:attribute];
            [self setObject:array forKey:key];
        } else {
            __block BOOL alreadyExists = NO;
            NSMutableArray *array = [self objectForKey:key];

            [array enumerateObjectsUsingBlock:^(UICollectionViewLayoutAttributes *existingAttr, NSUInteger idx, BOOL *stop) {
                if ([existingAttr.indexPath compare:attribute.indexPath] == NSOrderedSame) {
                    alreadyExists = YES;
                    *stop = YES;
                }
            }];

            if (!alreadyExists) {
                [array addObject:attribute];
            }
        }
    } else {
        DDLogError(@"%@", [CDKError errorWithMessage:[NSString stringWithFormat:@"Invalid UICollectionVeiwLayoutAttributes passed to category extension"] code:CDKErrorInvalidParams]);
    }
}

- (NSArray*)attributesForColumn:(NSUInteger)column {
    return [self objectForKey:[NSString stringWithFormat:@"%ld", column]];
}

- (void)removeAttributesForColumn:(NSUInteger)column {
    [self removeObjectForKey:[NSString stringWithFormat:@"%ld", column]];
}

- (NSString*)keyForAttribute:(UICollectionViewLayoutAttributes*)attribute {
    if (attribute) {
        NSInteger column = (NSInteger)attribute.frame.origin.x;
        return [NSString stringWithFormat:@"%ld", column];
    }

    return nil;
}

@end 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-06-26T18:40:23.097

以上答案对我不起作用，但下载图片后，我替换了

```
[self.yourCollectionView reloadData] 
```

和

```
[self.yourCollectionView reloadSections:[NSIndexSet indexSetWithIndex:0]]; 
```

刷新它可以正确显示所有单元格，您可以尝试一下。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-04T21:37:17.907

`prepare()`这可能有点晚了，但如果可能的话，请确保您正在设置属性。

我的问题是单元格正在布局，然后在`layoutAttributesForElements`. 当新细胞进入视野时，这会导致闪烁效果。

通过将所有属性逻辑移动到`prepare`中，然后将它们设置在`UICollectionViewCell.apply()`其中消除闪烁并创建黄油平滑单元格显示

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-28T04:47:54.463

Swift 5 版本的***Nick Snyder***回答：

```
class NDCollectionViewFlowLayout: UICollectionViewFlowLayout {
    open override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let attributes = super.layoutAttributesForElements(in: rect)
        var newAttributes = [AnyHashable](repeating: 0, count: attributes?.count ?? 0)
        for attribute in attributes ?? [] {
            if (attribute.frame.origin.x + attribute.frame.size.width <= collectionViewContentSize.width) && (attribute.frame.origin.y + attribute.frame.size.height <= collectionViewContentSize.height) {
                newAttributes.append(attribute)
            }
        }
        return newAttributes as? [UICollectionViewLayoutAttributes]
    }
} 
```

或者您可以使用以下扩展名`UICollectionViewFlowLayout`：

```
extension UICollectionViewFlowLayout {
    open override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let attributes = super.layoutAttributesForElements(in: rect)
        var newAttributes = [AnyHashable](repeating: 0, count: attributes?.count ?? 0)
        for attribute in attributes ?? [] {
            if (attribute.frame.origin.x + attribute.frame.size.width <= collectionViewContentSize.width) && (attribute.frame.origin.y + attribute.frame.size.height <= collectionViewContentSize.height) {
                newAttributes.append(attribute)
            }
        }
        return newAttributes as? [UICollectionViewLayoutAttributes]
    }
} 
```

# javascript - 如何使用javascript验证多个复选框

> ID：12927029
> 
> 赞同：0
> 
> 时间：2012-10-17T04:18:18.447
> 
> 标签：javascript

我有一个带有多个复选框和单选按钮的简单页面，这只是验证第一个系统复选框并跳过下一个通信复选框。我对 js 相当陌生，我相信这是一个简单的修复。任何帮助将不胜感激谢谢！！！

```
 if (countSelected(formElement, 'checkbox', 'system[]') == 0) {
      alert('Please select System Access');
      return false;
    }

    if (countSelected(formElement, 'radio', 'department') == 0) {
      alert('Please choose a Department');
      return false;
    }

    if (countSelected(formElement, 'checkbox', 'comm[]') == 0) {
      alert('Please select Comm Access');
      return false;
    }

    return true;
  } 
```

我怎样才能得到这个来验证多个复选框？我是否还需要对多组单选按钮应用相同的修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:31:39.853

我认为问题在于您`return`过早退出该功能。试试这个：

```
function test() {
    var valid = true;

    if (countSelected(formElement, 'checkbox', 'system[]') == 0) {
        alert('Please select System Access');
        valid = false;
    }

    if (countSelected(formElement, 'radio', 'department') == 0) {
        alert('Please choose a Department');
        valid = false;
    }

    if (countSelected(formElement, 'checkbox', 'comm[]') == 0) {
        alert('Please select Comm Access');
        valid = false;
    }

    return valid;
} 
```

通过这种方式，它可以验证您想要`alert`的所有内容、您需要的内容以及`return`您所期望的有效性。

另一种选择，而不是为每个验证发出警报，您可以执行以下操作：

```
function test() {
    var valid = true;
    var messages = [];

    if (countSelected(formElement, 'checkbox', 'system[]') == 0) {
        messages.push('Please select System Access');
        valid = false;
    }

    if (countSelected(formElement, 'radio', 'department') == 0) {
        messages.push('Please choose a Department');
        valid = false;
    }

    if (countSelected(formElement, 'checkbox', 'comm[]') == 0) {
        messages.push('Please select Comm Access');
        valid = false;
    }

    if (messages.length > 0) {
        alert(messages.join("\n"));
    }

    return valid;
} 
```

在这种情况下，您`alert`最后会得到一个包含所有错误的结果。可能对用户更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:46:58.657

```
 <script defer="defer" type="text/javascript"><!--function validateForm(formElement) {
if (formElement.first_name.value.length < 2)
  return focusElement(formElement.first_name,
   'Please enter a First Name that is at least 2 characters long.');
if (formElement.last_name.value.length < 2)
  return focusElement(formElement.last_name,
   'Please enter a Last Name that is at least 2 characters long.');
if (formElement.model_id.value.length < 7)
  return focusElement(formElement.model_id,
   'Please enter a Model ID that is at least 7 characters long.');
if (countSelected(formElement, 'checkbox', 'system[]') == 0) {
  alert('Please select System Access');
  return false;
}
if (countSelected(formElement, 'radio', 'department') == 0) {
  alert('Please choose a Department');
  return false;
}

if (countSelected(formElement, 'checkbox', 'comm[]') == 0) {
  alert('Please select Comm Access');
  return false;
}
return true; } function focusElement(element, errorMessage) {
alert((errorMessage.length > 0) ? errorMessage :
  'You did not enter valid data; Please try again');
if (element.select) element.select();
if (element.focus) element.focus();
return false; } function countSelected(formElement, inputType, inputName) {
if (inputType == null) inputType = 'checkbox';
var returnValue = 0;
for (var loopCounter = 0; loopCounter < formElement.length; loopCounter++) {
  var element = formElement.elements[loopCounter];
  if (element.type == inputType && element.checked == true) {
    if (inputName.length > 0)
      if (element.name == inputName)
        returnValue++;
    else
      returnValue++
  }
}
return returnValue; } function countSelectedOptions(selectElement) {
var returnValue = 0;
for (var loopCounter = 0; loopCounter < selectElement.options.length; loopCounter++)
  if (selectElement.options[loopCounter].selected == true)
    returnValue++;
return returnValue; 
```

} //-->

# php - 选择一个以逗号分隔的字段

> ID：12927039
> 
> 赞同：2
> 
> 时间：2012-10-17T04:19:08.010
> 
> 标签：php, database, select

我想从下表中选择用逗号分隔的一列值。

```
username
--------
   A
   B
   C
   D 
```

我想要 A,B,C,D 这样的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:19:54.740

您可以直接在查询中执行此操作。用于`GROUP_CONCAT`此，

```
SELECT GROUP_CONCAT(`username`)
FROM tableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:41:33.740

Try like this:

```
$sql = 'SELECT username FROM table_name';
$query = mysql_query($sql);

$csv = array();

while($row = mysql_fetch_array($query)) {
    $csv[] = $row['username'];
}

echo implode(',', $csv); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T04:32:00.177

使用此代码：

```
$qry="select username from tableName ";
$exe=mysql_query($qry);
while($r=mysql_fetch_array($exe))
{
        $userName .=$r['username'].",";
}
$userName =substr($userName,0,-1);
echo $userName; 
```

# sorting - SOLR - 没有任何默认排序的搜索结果

> ID：12927042
> 
> 赞同：3
> 
> 时间：2012-10-17T04:19:37.213
> 
> 标签：sorting, solr, default

我正在使用以下查询进行搜索： /select?q= *:* &fq=fld:dddd OR fld:aaaa OR fld:bbbb 其中，字段 fld 是字符串类型和唯一键。

我得到的结果如下：

```
<doc>
   <str name="fld">aaaa</str>
</doc>
<doc>
   <str name="fld">bbbb</str>
</doc>
<doc>
   <str name="fld">dddd</str>
</doc> 
```

看起来像结果但我希望结果是“未排序的”......意思是，我希望结果按照我在 fq 条件中给出的顺序。也就是说，我想要的结果如下：

```
<doc>
   <str name="fld">dddd</str>
</doc>
<doc>
   <str name="fld">aaaa</str>
</doc>
<doc>
   <str name="fld">bbbb</str>
</doc> 
```

我们如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:38:56.987

如果你添加`score`到你的`fl`then 你会看到它们都有相同的分数值，所以它被排序- 这就是`fld` 为什么你看到 aaaa bbbb dddd-

您可以更改评分或给出`boost`查询时间，具体取决于您的`fl`订单以获得类似的东西，但除了那些我认为不编写插件或破解 solr 源代码就不可能拥有它的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:33:34.540

您还可以将 RandomSortField 添加到您的架构中。然后对结果进行随机排序。看：

[http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/schema/RandomSortField.html](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/schema/RandomSortField.html)

编辑：重新阅读帖子后，我意识到这不是你要找的。您可以尝试使用函数进行排序：

[http://wiki.apache.org/solr/FunctionQuery](http://wiki.apache.org/solr/FunctionQuery)

# sql - 将新字段添加到现有表中，将数据插入适当的位置，然后加入

> ID：12927047
> 
> 赞同：0
> 
> 时间：2012-10-17T04:19:55.420
> 
> 标签：sql

**方案一** 我有两个新字段要添加到名为existingTable 的表中。添加这些字段后，我可以使用这些字段的数据更新一些但不是所有的记录。会有空白条目，我对此很好。

**问题一** 我想确保更新了正确的记录。现有表和传入数据表的主键是电子邮件。

**建议的解决方案一** 看起来像这样的 UPDATE 查询就是解决方案。

UPDATE existingTable SET existingTable.newField1 = incomingDataTable.newField1, existingTable.newField2 = incomingDataTable.newField2 WHERE existingTable.Email = incomingDataTable.Email

你怎么看？

* * *

**方案二** 使用正确记录中的新字段和数据更新表后，我想将此表与另外两个表连接起来。我希望所有条目（即使某些字段为空白）都在此连接中。我不希望排除任何记录。

顺便说一句，这些表中的每条记录都与其在其他表中的伙伴存在一对一的关系。不应该有任何重复的记录。过去，我看到 Access 使用 INNER JOIN，它排除了没有 newField1 和 newField2 值的记录。这不是我想要的。

**问题** 我在加入表格方面没有经验。不同的连接让我有点困惑。

**建议的解决方案** 我使用的连接是否一定很重要，因为三个要连接的表应该具有一对一的关系？

SELECT * FROM existingTable FULL JOIN tableToJoinWith1, tableToJoinWith2 On existingTable.Email = tableToJoinWith1.Email, tableToJoinWith1.Email = tableToJoiNWith2.Email

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:28:13.637

澄清你的场景2。我假设你的意思是你想要所有的行，`existingTable`即使`Email`字段上没有与其他表中的任何一个匹配。在这种情况下， a`LEFT JOIN`是您想要的：

```
SELECT * FROM existingTable
LEFT JOIN tableToJoinWith1 ON existingTable.email = tableToJoinWith1.email 
LEFT JOIN tableToJoinWith2 ON existingTable.email = tableToJoinWith2.email 
```

对于场景 1，问题在于您没有给它任何类型的 SELECT for `incomingDataTable`. 据我所知，在标准 SQL 中，没有支持多列的好方法。所以这取决于你使用的是什么数据库。有些人会让你这样做：

```
UPDATE existingTable
SET newField1 = incomingDataTable.newField1, newField2 = incomingDataTable.newField2 
FROM incomingDataTable
WHERE existingTable.Email = incomingDataTable.Email 
```

但有些不会。其他人将允许这样做：

```
UPDATE (Select * FROM existingTable JOIN incomingDataTable
ON existingTable.Email = incomingDataTable.Email)
SET existingTable.newField1 = incomingDataTable.newField1,
existingTable.newField2 = incomingDataTable.newField2 
```

如果它只有一列，你可以这样做，这是完全标准的：

```
UPDATE existingTable SET newField1 = (SELECT newField1 FROM incomingDataTable 
WHERE existingTable.Email = incomingDataTable.Email) 
```

# php - MySQL 语法错误——但仅适用于某些变量

> ID：12927049
> 
> 赞同：1
> 
> 时间：2012-10-17T04:20:00.213
> 
> 标签：php, mysql

所以我正在用 PHP/MySQL 编写一个网站。我有一行适用于通过 $_GET 传递的 4 位数字，但不适用于一位数或三位数。

这是我使用的代码。

```
 $planid = $_GET["planid"];
    $dbObj->dbQuery = "SELECT * FROM plans WHERE blnWebEnabled='yes' AND planid='$planid'"; 
```

使用 var_dump，我验证了 $planid 是正确的：string(1) "1" 并且实际的 SQL 查询语句是正确的：string(60)

```
SELECT * FROM plans WHERE blnWebEnabled='yes' AND planid='1'; 
```

事实上，我已经在 MySQL 控制台中直接输入了完全相同的字符语句，并按预期得出了一条记录。但是由于某种原因，当它访问浏览器时，它给了我这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

我也试过让 SQL 语句说：

```
SELECT * FROM plans WHERE blnWebEnabled='yes' AND planid=1;

SELECT * FROM plans WHERE blnWebEnabled='yes' AND planid = 1;

SELECT * FROM plans WHERE blnWebEnabled = 'yes' AND planid = '1'; 
```

...和其他变体。

疯狂的是，它会很乐意接受 4 位数字。我使用的数据库键字段是主键，它是 type `int(11)`。

有人可以帮我吗？我快要沮丧地把头发扯掉了！

提前感谢您的宝贵时间！

**编辑**：*进一步测试的更多信息*——取出“blnWebEnabled = 'yes'”仍然给出同样的错误。尝试将前导零添加到 $planid 直到它的 strLen 至少为 4 仍然会产生相同的错误，尽管该查询在直接输入 MySQL 控制台时也可以工作。以下查询通过 PHP 可以正常工作：

```
SELECT * FROM plans WHERE blnWebEnabled='yes' AND planid='1000'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:07:58.670

我认为`$planid`是空的。打印`$planid`值并再次检查。

# .htaccess - mod_rewrite 从开发到实时服务器的问题

> ID：12927051
> 
> 赞同：0
> 
> 时间：2012-10-17T04:20:03.790
> 
> 标签：.htaccess, apache2

我刚刚将一个新项目上传到实时服务器，该服务器安装了基本的 ubuntu 服务器（最新的 LTS 版本）。

我在使用 mod_rewrite 时遇到了一些奇怪的问题，它在我的开发系统上运行良好。在实时服务器上，它在 error.log 中没有错误地运行，并正确找到扩展名为 .php 的文件，但不填充“path_info”GET 参数。

.htaccess 文件如下：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\-_\.]+)(/[A-Za-z0-9\-_\.\/]*)?$ $1.php?path_info=$2 [QSA] 
```

我需要寻找什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:07:08.507

我发现了问题 - Multiviews 作为 apache2 配置中的一个选项被启用，这导致 htaccess 规则不被命中。

删除多视图解决了这个问题。

# wcf - 如何在代码中为自托管 WCF 服务注册自定义绑定扩展？

> ID：12927055
> 
> 赞同：0
> 
> 时间：2012-10-17T04:20:52.470
> 
> 标签：wcf, c#-4.0, silverlight-4.0, wcf-binding, pollingduplexhttpbinding

我需要一个建议来为我的自托管 WCF 服务注册我的 Silverlight 双工通信（使用 PollingDuplexHttpBinding）的自定义绑定扩展。

以下是我从[这个 msdn 页面](http://msdn.microsoft.com/en-us/library/cc645027%28VS.95%29.aspx)获得的绑定详细信息。

```
<!-- Register the binding extension from the SDK. -->
   <extensions>
      <bindingExtensions>
        <add name="pollingDuplexHttpBinding"
            type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,System.ServiceModel.PollingDuplex, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingExtensions>
   </extensions> 
```

我需要通过代码隐藏将上面的 xml 代码添加到我的自定义绑定中。

# python - scrapy中的奇怪错误（CENTOS 6.2）

> ID：12927060
> 
> 赞同：0
> 
> 时间：2012-10-17T04:21:03.780
> 
> 标签：python, centos, scrapy

```
>>> import scrapy
>>> from scrapy.selector import HtmlXPathSelector
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/Scrapy-0.14.4-py2.7.egg/scrapy/selector  /__init__.py", line 28, in <module>
    from scrapy.selector.lxmlsel import *
  File "/usr/local/lib/python2.7/site-packages/Scrapy-0.14.4-py2.7.egg/scrapy/selector /lxmlsel.py", line 7, in <module>
    from scrapy.utils.misc import extract_regex
  File "/usr/local/lib/python2.7/site-packages/Scrapy-0.14.4-py2.7.egg/scrapy/utils/misc.py", line 7, in <module>
    from w3lib.html import remove_entities
  File "/usr/local/lib/python2.7/site-packages/w3lib-1.2-py2.7.egg/w3lib/html.py", line 10, in <module>
    from w3lib.url import safe_url_string
  File "/usr/local/lib/python2.7/site-packages/w3lib-1.2-py2.7.egg/w3lib/url.py", line 11, in <module>
    import cgi
  File "/usr/local/lib/python2.7/cgi.py", line 51, in <module>
    import mimetools
  File "/usr/local/lib/python2.7/mimetools.py", line 6, in <module>
    import tempfile
  File "/usr/local/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
  File "/usr/local/lib/python2.7/random.py", line 45, in <module>
    from math import log as _log, exp as _exp, pi as _pi, e as _e, ceil as _ceil
  File "math.py", line 3, in <module>
   from scrapy.selector import HtmlXPathSelector
ImportError: cannot import name HtmlXPathSelector 
```

我正在使用 python2.7，我曾经在 ubuntu 上工作，但我从未遇到过这种问题，但是在 CentOS 中我遇到了这个错误，顺便说一下我安装了scrapy，这就是为什么你可以看到第一个命令完美运行的原因。

```
>>> import scrapy
>>> from scrapy.selector import HtmlXPathSelector 
```

还有一件事，“从 scrapy.selector 导入 HtmlXPathSelector”与同一文件夹中的 math.py 有什么关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:49:15.707

嗯......这不是你的问题，而是 CentOS 与 Ubuntu 的问题。

你是怎么安装的？使用`pip`或`yum`？

如果您从`yum`很可能安装它的包被破坏......（只是出于好奇，很高兴知道您从哪里下载包）。

# java - 数字格式器 - Java

> ID：12927061
> 
> 赞同：-5
> 
> 时间：2012-10-17T04:21:11.140
> 
> 标签：java

我有一个数字 100000。我需要显示 1,00,000。**在不**使用 Java 中的字符串操作函数的情况下如何实现这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:24:50.710

使用Java 中可用的`NumberFormat`实现或类。`DecimalFormat`

例如

```
DecimalFormat dFormat = new DecimalFormat("#,##,####");
String value = dFormat.format(100000);
System.out.println("Formatted Value="+value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:24:09.570

快速谷歌，我从[这里](http://www.mredkj.com/javascript/numberFormat.html)得到这个。

*此功能未内置在 JavaScript 中，因此需要使用自定义代码。以下是将逗号添加到数字并返回字符串的一种方法。*

```
function addCommas(nStr)
{
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:25:54.920

最简单的方法是：

```
function addCommas(num) {return (""+num).replace(/\B(?=(?:\d{3})+(?!\d))/g,',');} 
```

有关更完整的版本，其中包括对任意精度的十进制数的支持，请参阅[`numbar_format`PHPJS](http://phpjs.org/functions/number_format/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:50:20.710

如果您仍然感兴趣，这是 Java 中的一个解决方案，它只使用字符串方法来查找长度和字符位置。

```
 int counter = 0; 
   int number=123456789;
   String str = Integer.toString(number);
   String finalStr = new String();

   for(int i = str.length()-1; i >= 0; i--){
       counter++;
       if(counter % 3 == 0 && i != 0){
           finalStr = ","+str.charAt(i)+finalStr;
       }
       else{
           finalStr = str.charAt(i)+finalStr;
       }
   }

   System.out.println("Final String: "+finalStr); 
```

它使用值的长度向下循环并从右到左构建新字符串。在每第三个值（最后一个除外）处，它将在字符串前添加一个逗号。否则，它将继续并在逗号之间的中间值中构建字符串。

所以这将打印到控制台：

> 最终字符串：123,456,789

# linux - RHEL中的git密码提示

> ID：12927062
> 
> 赞同：0
> 
> 时间：2012-10-17T04:21:28.973
> 
> 标签：linux, git, rhel, rhel5

我在 RHEL 机器上，当我尝试克隆私有存储库时，似乎 git 使用了 GUI 密码提示。我希望它使用终端本身。如何设置 git 以这种方式运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:15:28.417

你用的是askpass吗？然后尝试做

```
$ unset SSH_ASKPASS 
```

禁用它，因为掩码是由 ssh 而不是 git 触发的。

# ruby-on-rails - 如何在 Ruby on rails 中上传大文件？

> ID：12927063
> 
> 赞同：1
> 
> 时间：2012-10-17T04:21:31.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.0.9，Ruby 1.9.3p0 我正在尝试将 zip/tar 文件上传到服务器。当我上传文件 2.5mb 时。每件事都很好。但是当我上传一个 350mb 的 zip 文件时。它会产生错误。（网络错误连接超时/或“中止”以响应萤火虫）。在 apache 配置中，我将超时时间从 300000 增加到 300000，但什么也没发生。这可能是apache设置吗？或者这可能是他们的结局？任何关于我应该看哪里的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:33:13.483

我用过apache和Nginx。对于如此大的文件上传，我更喜欢 NGINX。如果您使用 Nginx，您可以将client_max_body_size[设置](http://wiki.nginx.org/NginxHttpCoreModule#client_max_body_size)为类似于. 谁更喜欢[这里](https://stackoverflow.com/questions/2591574/even-small-file-upload-stops-activity-on-apache-rails)的问题之一。`500 MB``nginx.conf`

# adobe - adobe acrobat XI pro javascript

> ID：12927066
> 
> 赞同：0
> 
> 时间：2012-10-17T04:21:41.243
> 
> 标签：adobe, acrobat

当我不在表单字段上时，我正在调用一个 javascript 函数。所以我要做的是，如果我勾选了必填字段作为必填字段，它将有一个红色边框，当字段中有值时，我可以编写一个脚本来删除必填选项吗？

```
var thisValue = this.getField("companyName").value;
var regexLetter = /[A-Z]+$/;
var Icon = "0"; //0 — Error (default) // 1 — Warning // 2 — Question // 3 — Status
var Type = "0"; //0 — OK (default) // 1 — OK, Cancel // 2 — Yes, No // 3 — Yes, No, Cancel
if (thisValue == ""){
    app.alert({
            cMsg:"this is an warning",
            cTitle: "thsi is title",
            nIcon: Icon, 
            nType: Type
        })

} else if(!regexLetter.test(thisValue)){
  app.alert('Type alphanumeric character');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T05:28:42.153

这将是相当晚了，但这是我在文档中的做法：

```
var _companyName = this.getField("CompanyName");

    _companyName.required = (_companyName.value === ""); 
```

您还可以强加其他依赖项，例如：

```
var _companyName = this.getField("CompanyName"),
    _companyLicense = this.getField("CompanyLicense");

    _companyLicense = ((_companyLicense === "")
        && (_companyName !== "")); 
```

将您的脚本分成几个文件可能会有所帮助。我使用一个包含绝大多数逻辑的“共享”脚本和一个“特定”脚本来遍历每个单独的文档。此外，请确保在添加脚本时仅以正确的顺序将它们命名为 1、2、3 等，否则 Acrobat 将变得愚蠢。希望这对您有所帮助。

# android - 从 sum 函数中获取我的光标

> ID：12927067
> 
> 赞同：2
> 
> 时间：2012-10-17T04:22:00.047
> 
> 标签：android, cursor, adapter, textview

这是我获取查询的功能：

```
public Cursor getSaldo(String id) {
        String[] args={id};
        return(getReadableDatabase()
        .rawQuery("SELECT sum("+t_jumlah+") "+
                "as "+t_saldo+" "+
                "FROM "+t_table+" WHERE "+t_nId+"=?", args)); 
```

我该怎么做才能将数据放入我的`TextView`?

我有这样的光标

```
almagId=getIntent().getStringExtra(Nasabah.ID_EXTRA);

Cursor c=helper.getSaldo(almagId);
startManagingCursor(c); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:36:15.373

你可以做这样的事情。试一试

```
 if(!cursor.moveToFirst()){
 mytextView.setText("No output");
}
else{
do {
mytextView.setText(cursor.getString(0)); 

} while (cursor.moveToNext()); 
```

# java - 如何从给定的整数值中获取字母？

> ID：12927074
> 
> 赞同：3
> 
> 时间：2012-10-17T04:23:05.450
> 
> 标签：java

如何通过java中的数字位置获取字母？

假设我输入了 1 作为输出，我需要得到 A 如何在 java 中获得字母位置？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T04:24:59.973

试试这个

```
int i = 1;
System.out.println((char)(i+'A'-1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:25:32.530

```
int charValue = 1; //this is the number you enter
char letter = (char)(charValue+64);  //this is the character you want 
```

对于小写字母，使用 (charValue+96)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:24:55.907

您可以使用[switch/case 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)手动获取每个字母，但是更好的解决方案是使用 ASCII 表来获取字母。

ASCII 表：[http ://www.ascii-code.com/](http://www.ascii-code.com/)

```
public char getLetter(int i)
{
  return (char) (i + 64);
} 
```

当 i 为 1 时，上述函数将返回 'A'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:25:16.560

您有字母/字符，将它们视为数组中的位置。

```
int number = 0;
String[] array = new String[] {"a", "b", "c", "..."};
String letter = array[number + 1]; 
```

# c - 从数组中分配一个随机条目

> ID：12927077
> 
> 赞同：1
> 
> 时间：2012-10-17T04:23:33.483
> 
> 标签：c

这里是 C 的新手。我正在尝试使用从数组中随机选择的字符串来初始化字符串。我遇到了障碍。这是我到目前为止所拥有的，可能有更好的方法来做到这一点。

我试图在每次运行时基本上显示一张随机牌（等级和花色，kC = 俱乐部之王）。

```
#include <stdio.h>
#include <time.h>
#include <string.h>

int main()

{
char rank[13] = {'a','2','3','4','5','6','7','8','9','t','j','q','k'};
char suit[4] = {'C','D','H','S'};
int first;
int second;

srand(time(NULL));

                first = rand()%rank;
                second = rand()%suit;

        printf("Your Card: %d %d", first, second);

return 0; 
```

我怀疑*rand*不能像我尝试的那样随机化一个数组，但是有没有办法告诉*rand*从我的数组中进行选择？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:32:42.233

```
#include <stdio.h>
#include <time.h>
#include <string.h>

int main()
{
    char rank[13] = {'a','2','3','4','5','6','7','8','9','t','j','q','k'};
    char suit[4] = {'C','D','H','S'};
    int first;
    int second;

    srand(time(NULL));

    first = rand() % 13;
    second = rand() % 4;

    printf("Your Card: %c %c", rank[first], suit[second]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:26:44.007

`%`仅适用于数字。所以，你可以`%`通过每个数组的大小来获得一个索引，然后索引到数组中：

```
first = rank[rand()%13];
second = suit[rand()%4]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:31:55.430

```
#include <stdio.h>
#include <time.h>
#include <string.h>
#include <stdlib.h>

int main()

{
char rank[13] = {'a','2','3','4','5','6','7','8','9','t','j','q','k'};
char suit[4] = {'C','D','H','S'};
int first;
int second;

srand(time(NULL));

                first = rank[(rand()%13)];
                second = suit[rand()%4];

        printf("Your Card: %c %c", first, second);

return 0;
} 
```

在您的`printf`声明中，您需要使用`%c`而不是`%d`since`rank`和`suit`是字符数组。

# php - Slim 用于 WordPress 主题开发？

> ID：12927078
> 
> 赞同：2
> 
> 时间：2012-10-17T04:23:37.523
> 
> 标签：php, ruby, wordpress, sass, slim-lang

[wordless](https://github.com/welaika/wordless)是一个很棒的 WordPress 插件，它使用 HAML 和 SASS 等可靠的工具为 WP 主题开发带来理智。

最近我们从 HAML 切换到[**Slim ，我很好奇与提供**](http://slim-lang.com)[**Slim**](http://slim-lang.com)而不是 HAML 的 wordless相比，是否有类似的选项？

# mysql - MySQL从上一行添加值

> ID：12927079
> 
> 赞同：4
> 
> 时间：2012-10-17T04:23:37.810
> 
> 标签：mysql, cumulative-sum

我有一个单列的表。专栏是这样的：

```
1
2
3
4
5
... 
```

我想创建一个查询，该查询将显示另一列，该列将添加上一个值。所以：

```
1 1 ( 0 + 1 )
2 3 ( 1 + 2 )
3 5 ( 2 + 3 )
4 7 ( 3 + 4 )
5 9 ( 4 + 5 )
9 14 (5 + 9)
45 54 ( 9 + 45) 
```

我将如何构建一个查询来实现这一点？

本质上，我只想要`difference`介于`ROW[X]`和之间`ROW[X-1]`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T05:11:31.167

```
SELECT  a.val, (@runtot :=  a.val  + @runtot) AS rt, ( @runtot := a.val ) ne
FROM    Table1 a,(SELECT @runtot:=0) c 
```

这似乎奏效了。我尝试在每个阶段重新初始化变量。试试看。

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/8645d/1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T04:33:58.813

尝试

```
SELECT  a.int, (@runtot :=  a.int  + a.int - 1) AS rt
FROM    test a,(SELECT @runtot:=0) c 
```

IE

```
1 1 ( 0 + 1 )
2 3 ( 1 + 2 )
3 5 ( 2 + 3 )
4 7 ( 3 + 4 )
5 9 ( 4 + 5 ) 
```

这将导致您显示的输出

# c - string - '0' 做什么（字符串是一个字符）

> ID：12927087
> 
> 赞同：2
> 
> 时间：2012-10-17T04:25:01.107
> 
> 标签：c, string, char

这是做什么的

```
while(*string) {
    i = (i << 3) + (i<<1) + (*string -'0');
    string++;
} 
```

*字符串-'0'

它会删除字符值还是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T04:29:42.903

这从`string`指向该字符的 ASCII 代码的字符中减去`'0'`。所以，`'0'`-`'0'`给你`0`等等和`'9'`-`'0'`给你`9`。

`string`整个循环基本上是“手动”计算字符串指向的十进制整数的数值。

这是因为`i << 3`is 等价于`i * 8`and`i << 1`等价于`i * 2`and`(i << 3) + (i<<1)`等价于`i * 8 + i * 2`or `i * 10`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T04:29:09.263

由于数字 0-9 保证在字符集中连续存储，因此减法`'0'`给出了您拥有的任何字符数字的整数值。

假设您使用的是 ASCII：

```
char digit = '6'; //value of 54 in ASCII
int actual = digit - '0'; //'0' is 48 in ASCII, therefore `actual` is 6. 
```

无论数字在字符集中具有哪些值，由于它们是连续的，因此`'0'`从数字中减去开头 ( ) 将得到您要查找的数字。请注意，对于字母来说，情况并非如此。以 EBCDIC 为例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T04:28:34.740

它将 0-9 个字符的 ascii 值转换为其数值。

'0'（字符）的 ASCII 值是 48，'1' 是 49。因此要将 48-56('0'-'9') 转换为 0-9，只需从 ascii 值中减去 48。这就是您的代码行 [ *string -'0' ] 正在做的事情。

# c++ - 错误：此声明没有存储或类型说明符

> ID：12927089
> 
> 赞同：0
> 
> 时间：2012-10-17T04:25:15.327
> 
> 标签：c++, templates, compiler-errors

我收到的所有内容都包含此消息`Node*`（此声明没有存储或类型说明符）。有人可以帮忙，请给我正确的方向吗？

```
template <typename type>
Node* Stack<type>::pop() {
Node* retNode; // the node to be return
if(tos == NULL) {
    cerr << "*** Stack empty ***";
    exit(1);
}
else {
    retNode = tos; // store the location of tos
    tos = tos->getLink(); // move to new tos
    retNode->setLink(); // unlink the popped node from the stack
    size -= 1;
}
return retNode;
} 
```

我确定它正在处理，`Node*`但我就是不知道是什么。

下面是我对堆栈类中使用的节点类的声明。如果您还需要我对堆栈类的声明，请告诉我，因为我只是看不到问题所在。

```
template <typename type>
class Node<type>{

private:
type data;
Node *link;

public:
Node(type p_item, Node *p_link);
type getData() const;
Node* getLink() const;
void setData(type p_data);
void setLink(Node *node);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:01:36.133

`Node`是一个类模板，所以你不能使用`Node`or`Node *`作为数据类型。您必须在尖括号中添加模板参数，例如`Node<int>`或`Node<char> *`等。

在您给出的具体示例中，以下内容似乎是合适的：

```
template <typename type>
Node<type>* Stack<type>::pop() {
  Node<type>* retNode;
  /* ... */
  return retNode;
} 
```

即，用于的相同类型参数也`Stack`应该（可能）用于`Node`。

另外两个注意事项：

1.  奇怪的是，虽然`Node`模板似乎实现了堆栈的内部数据结构，但堆栈`Node<type> *`的 pop 函数返回了指针。`type`返回对象似乎更自然（并且封装更好，并且对堆栈的用户来说更直观） 。

2.  `exit`当堆栈为空时，pop 函数调用（从而使整个进程停止）似乎也很奇怪。也许返回`nullptr`，或者一个虚拟对象，或者抛出一个异常（或类似的策略）会更合适。

# vb.net - 如何在 vb.net 中将 datagridview 单元格样式从默认文本框更改为组合框？

> ID：12927094
> 
> 赞同：1
> 
> 时间：2012-10-17T04:26:01.193
> 
> 标签：vb.net, datagridview, datagridviewcombobox

我有一个从数据集中填充的 datagridview。

填充后，如果用户单击一行，最后一列应从文本框更改为组合框。

我正在使用 vb.net 2010。

在 Datagridview1 CellClick 事件上：

```
 With DataGridView1
        If .Rows.Count = 0 Then Exit Sub
        i = Datagridview1.currentrow.index

        Dim gridComboBox As New DataGridViewComboBoxCell
        gridComboBox.Items.Add("A") 'Populate the Combobox
        gridComboBox.Items.Add("B") 'Populate the Combobox
        gridComboBox.Items.Add("C") 'Populate the Combobox
        .Item(8, i) = gridComboBox
    End With 
```

但这会导致错误：

```
The following exception occurred in DataGridView:
System.Argument.Exception: DataGridViewComboBoxCell value is not valid.
To replace this default dialog please handle the DataError event. 
```

如果情况不可行，我希望在从数据集中填充数据时，最后一列的类型为组合框。

```
DataGridView1.DataSource = myDataSet 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:21:30.397

好吧，这是我通过一些测试得出的结论。只要单元格的值与下拉选项之一相同，您的代码就可以工作。但是，如果您放置组合框的单元格值为“D”（cmbbox 只有“A”、“B”和“C”），您将收到此错误消息。

因此，要么将当前值作为选项放入组合框中，要么确保单元格只能有 A、B 或 C 作为值，或者只是通过将其值设置为“”来清除单元格。然后这将起作用。:)

# ruby-on-rails - Rails 应用程序的 Varnish 和 Rack-Cache 有什么意义？

> ID：12927095
> 
> 赞同：7
> 
> 时间：2012-10-17T04:26:12.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, varnish, rack-cache

对于 Rails 应用程序的 Varnish 和 Rack-Cache 的用途，我有点困惑。在`config/environments/production.rb`缓存中可以设置类似的东西

`config.static_cache_control = "public, max-age=3600"`

鉴于此，如果您可以在 Rails 应用程序本身中设置缓存，那么 Varnish 和 Rack-Cache 的目的究竟是什么？

是什么导致默认的 Rails 应用程序使用 rack-cache？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T05:01:13.173

静态缓存控制会影响 Cache-Control 的 http 标头。如中，服务器建议中间缓存 max-age=3600。

Varnish、Rack-Cache、Squid 等主动缓存服务器上生成的内容。数据库调用很昂贵，即使请求不调用数据库，请求必须通过的基础设施越少，通常它会越快。

Rack::Cache 是机架中间件，支持符合 HTTP 标准的缓存。他们的[常见问题页面](http://rtomayko.github.com/rack-cache/faq)有一些关于它相对于其他缓存解决方案的优缺点的很好的信息。这是一个[将 rack::cache 与 heroku 上的清漆进行比较](https://stackoverflow.com/questions/7931864/disadvantages-to-rack-cache-vs-varnish-in-heroku-cedar-stack?rq=1)的问题。Rails 还有处理片段和页面缓存的 ActiveSupport::Cache。我不确定有什么区别，但默认情况下两者都包含在 Rails 中。我之前说过 rack::cache 不是默认的，但我错了。

Varnish、Squid 和其他作为单独的进程存在于 Web 服务器（例如 Apache/Nginx/等）前面的 Rails 堆栈之外。它们是高度可配置的、独立于应用程序的，并且具有一些高级特性（例如 Squid 的 ACL）。Varnish 和其他人的好处是最大限度地减少了请求必须经过的基础设施才能获得服务。如果它是新鲜的，请求命中 Varnish 并立即返回给客户端。这可能对高流量网站有最大的好处，但对于较小的应用程序来说可能有点过分了。

这是一篇关于 heroku 的文章，[详细介绍了 Rails3 中 rack::cache 的使用](https://devcenter.heroku.com/articles/rack-cache-memcached-rails31)。在应用内进行页面/片段缓存以及使用 memcached 作为后端（这非常重要）方面也有一些很好的 railscast。对于 varnish 和其他人，您可以从[varnish 网站上的本教程](https://www.varnish-cache.org/docs/trunk/tutorial/)开始。

# java - Gson：无法为类调用无参数构造函数

> ID：12927097
> 
> 赞同：4
> 
> 时间：2012-10-17T04:26:18.600
> 
> 标签：java, gson

虽然这个主题有几个线程..请不要将其标记为重复。

我的 pojo 看起来像这样：

```
public class sample {

    public sample() {
        // TODO Auto-generated constructor stub
    }

    private String instructions;
    private String resource;
    private List<Map<String,String>> fields;
    private String taskid;

    private List<Map<String,String>> answer;

    public String getTaskid() {
        return taskid;
    }
    public void setTaskid(String taskid) {
        this.taskid = taskid;
    }
    public String getInstructions() {
        return instructions;
    }
    public void setInstructions(String instructions) {
        this.instructions = instructions;
    }
    public String getResource() {
        return resource;
    }
    public void setResource(String resource) {
        this.resource = resource;
    }
    public List<Map<String,String>> getFields() {
        return fields;
    }
    public void setFields(List<Map<String,String>> fields) {
        this.fields = fields;
    }
    public List<Map<String,String>> getAnswer() {
        return answer;
    }
    public void setAnswer(List<Map<String,String>> answer) {
        this.answer = answer;
    }

} 
```

我正在做一个 httpget，结果是一个 Json 对象数组，我尝试对其进行类型转换以进行采样，但它给出了一个异常。

反序列化片段如下

```
sample[] temp = gsonObj.fromJson(response, sample[].class); 
```

我得到的例外是

```
java.lang.RuntimeException: Unable to invoke no-args constructor for class [sample;. Register an InstanceCreator with Gson for this type may fix this problem.
    at com.google.gson.MappedObjectConstructor.constructWithAllocators(MappedObjectConstructor.java:68)
    at com.google.gson.MappedObjectConstructor.construct(MappedObjectConstructor.java:52)
    at com.google.gson.JsonObjectDeserializationVisitor.constructTarget(JsonObjectDeserializationVisitor.java:42)
    at com.google.gson.JsonDeserializationVisitor.getTarget(JsonDeserializationVisitor.java:60)
    at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:104)
    at com.google.gson.JsonDeserializationContextDefault.fromJsonObject(JsonDeserializationContextDefault.java:76)
    at com.google.gson.JsonDeserializationContextDefault.deserialize(JsonDeserializationContextDefault.java:54)
    at com.google.gson.Gson.fromJson(Gson.java:551)
    at com.google.gson.Gson.fromJson(Gson.java:498)
    at com.google.gson.Gson.fromJson(Gson.java:467)
    at com.google.gson.Gson.fromJson(Gson.java:417)
    at com.google.gson.Gson.fromJson(Gson.java:389)
    at HTTPClientUtils.getResultsFromMobileWorks(HTTPClientUtils.java:327) 
```

你能告诉我我在哪里犯错吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:48:06.510

无法重现。但这里有什么作用：

```
public class Sample {

    public Sample(){}
    public int kk;
    public List<Map<String,String>> fields;

    public static void main(String[] args) {
        String s = "[{\"kk\":1, \"fields\":[{\"a\":\"a1\"}]}, {\"kk\":5}, {\"kk\":2}, {\"kk\":8}, {\"kk\":6, \"fields\":[{\"b\":\"b1\"}]}]";
        Sample[] r = new Gson().fromJson(s, Sample[].class);
        for(Sample t: r)
            System.out.println(">> " + t.kk + " " + t.fields);
    }

} 
```

结果：

```
>> 1 [{a=a1}]
>> 5 null
>> 2 null
>> 8 null
>> 6 [{b=b1}] 
```

边注：

1.  始终将您的课程大写。
2.  发布 sscce

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:21:48.470

您必须使用`TypeToken`Google 的课程。
您当然需要一个通用类`T`来使其工作，如下所示：

```
Type fooType = new TypeToken<Foo<Bar>>() {}.getType();

gson.fromJson(json, fooType); 
```

# asp.net - 在编辑模式下未选择 Html.DropDownListFor 值

> ID：12927098
> 
> 赞同：5
> 
> 时间：2012-10-17T04:26:22.540
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, html.dropdownlistfor

我成功地在插入时将值保存到数据库（标题值），但是当我在编辑模式下呈现相同的视图时，标题字段必须保存选定的值，但在我的情况下，标题下拉菜单没有选择任何值...不知道为什么我在标题字段保存存储值（在后端）时得到一个没有选择的下拉列表。

```
@Html.DropDownListFor(model => model.title, new SelectList(Model.titles, "Value", "Text"),"-Select-") // nothing selected on edit mode

 @Model.title //displaying the stored value which the user selected initially. 
```

**标题的值**

```
titles = new SelectList(ListItem.getValues().ToList(), "Value", "Text").ToList(); 
```

获取值函数

```
 public static List<TextValue> getValues()
      {
    List<TextValue> titles= new List<TextValue>();
    TextValue T= new TextValue();

   T.Value = "Mr";
   T.Text = "Mr";
   titles.Add(T);

    T= new TextValue();
    T.Value = "Mrs";
    T.Text ="Mrs";
       titles.Add(T);

     T= new TextValue();
   T.Value = "Miss";
   T.Text = "Miss";
    titles.Add(T);

    T= new TextValue();
    T.Value ="Other";
   T.Text = "Other";
   titles.Add(T);

    return titles;

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:36:29.787

您必须使用 SelectList 的另一个 ctor

来自[msdn](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.98%29.aspx)

```
SelectList(IEnumerable, String, String, Object) 
```

> 使用列表的指定项、数据值字段、数据文本字段和**选定值**初始化 SelectList 类的新实例。

然后 ：

```
@Html.DropDownListFor(model => model.title, 
                      new SelectList(Model.titles, "Value", "Text", Model.title),
                      "-Select-") 
```

顺便说一句，遵循基本标准通常是一个好主意（至少）：您的属性应该以大写字符开头。

```
public string Title {get;set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:45:09.393

意见：

```
 @Html.DropDownListFor(model => model.title, Model.titles, "-Select-") 
```

控制器：

```
 Model.titles = new SelectList(ListItem.getValues(), "Value", "Text");

    public static List<SelectListItem> getValues()
    {
        List<SelectListItem> titles= new List<SelectListItem>();
        SelectListItem T= new SelectListItem();

        T.Value = "Mr";
        T.Text = "Mr";
        titles.Add(T);

        T = new SelectListItem();
        T.Value = "Mrs";
        T.Text = "Mrs";
        titles.Add(T);

        T = new SelectListItem();
        T.Value = "Miss";
        T.Text = "Miss";
        titles.Add(T);

        T = new SelectListItem();
        T.Value = "Other";
        T.Text = "Other";
        titles.Add(T);

        return titles;
    }

    public ActionResult Edit(int sno)
    {
        var model = db.table.SingleOrDefault(x => x.sno == sno);
        return View(model);
    } 
```

# c# - 多个表单或一个表单并添加控件

> ID：12927108
> 
> 赞同：0
> 
> 时间：2012-10-17T04:27:11.363
> 
> 标签：c#, winforms, windows-mobile, compact-framework

我正在创建一个具有多个不同屏幕的 Windows 移动应用程序。每个屏幕的底部是一个菜单栏，用户可以单击它来导航每个屏幕。

我的问题是我应该为每个屏幕使用一个新表单并克隆菜单还是使用一个表单并将所有其他屏幕作为控件并将它们添加到主表单？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:18:31.140

根据此[链接](http://social.msdn.microsoft.com/forums/en-US/netfxcompact/thread/d6f25c0c-51f2-4685-8fbf-538818620f76/)，Windows Mobile 中没有 MDI 功能。

在我们的应用程序中，我们为每个屏幕使用不同的表单。

有两种方法可以打开新窗口：

1.  `formName.ShowDialog()`：新屏幕将作为另一个屏幕的子屏幕打开。在这种情况下，在孩子关闭之前，您将无法访问您的父表单。

2.  `formName.Show()`：新屏幕不会作为另一个屏幕的子屏幕打开。因此，即使孩子没有关闭，您也可以访问您的父母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:33:36.213

我会投票支持控制。

这两种机制都可以实现您想要的流程，并且从基本的角度来看，两者都不会变得更糟（如加载时间、内存消耗或您拥有什么），因此这在很大程度上是个人风格决定。我，我使用的 UI 框架非常适合 UserControls，所以这就是我使用的。

一般来说，当我创建一个应用程序时，我有一个父/主机表单，其中包含我放置视图的工作区。这些视图是用户控件。无论我使用选项卡式工作区还是桌面工作区，它们最终仍然是控件。我使用多个完整表单的唯一原因是如果我有一个对话框（警告、输入等），我将在其中进行`ShowDialog`呼叫。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T21:38:28.133

您可以以单一形式使用 TabControl，每个选项卡都有自己的控件。无需动态添加控件。和一个单一的形式。此答案中更详细地讨论了实现此目的的方法。

[在 C# 中为 Windows 窗体创建向导](https://stackoverflow.com/questions/2340566/creating-wizards-for-windows-forms-in-c-sharp)

# wordpress - wp在帖子中自动插入标签

> ID：12927111
> 
> 赞同：0
> 
> 时间：2012-10-17T04:27:29.710
> 
> 标签：wordpress, tags, seo

当我在 wp 中编辑帖子时，有时我没有分配标签，自动插入类别名称或我的网站名称之类的标签而不是根本没有标签是个好主意吗？如果输入标签更好，那么我需要帮助编写一个检查帖子是否没有标签的函数，然后它将插入让我们说我的站点名称。

我所拥有的只是

wp_set_post_tags(42, 'mepanorama', true );

但这仅适用于特定帖子，并且不检查是否已经有标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:13:44.867

这将返回标签的数量：

```
count(wp_get_post_terms($post_id, 'post_tag', array("fields" => "names"))); 
```

我制作了一个插件，可以自动为帖子添加标签，它被称为[Automatic Post Tagger](http://wordpress.org/extend/plugins/automatic-post-tagger)。看看吧，它可能对你有用。:)

# java - 如何将 JFrame 放入 Java Swing 中现有的 JPanel？

> ID：12927112
> 
> 赞同：4
> 
> 时间：2012-10-17T04:27:32.187
> 
> 标签：java, swing, jframe, jpanel

我有一个像这样的开源 java swing 应用程序：http: ![在此处输入图像描述](../Images/3d50514c89af5941f316a92ed939d36e.png) [//i47.tinypic.com/dff4f7.jpg](http://i47.tinypic.com/dff4f7.jpg)

可以在截图中看到，有一个JPanel，分为左右两个区域。左侧区域有许多文本链接。当我单击**SLA Criteria**链接时，它将弹出**SLA Criteria**窗口。弹出窗口是 JFrame 对象。

现在，我试图将弹出窗口放到 JPanel 的右侧区域，这意味着不再有弹出窗口，即当我单击**SLA Criteria**链接时，其内容将显示在右侧区域面板。JPanel 右侧区域的现有内容将不再使用。该概念与 java api 文档页面中的概念相同：http: [//docs.oracle.com/javase/6/docs/api](http://docs.oracle.com/javase/6/docs/api)。单击左侧框架中的链接，您将获得在右侧框架中显示的内容。

示例插图是这样的：

（注意：它是使用图像编辑器制作和编辑的，这不是工作应用程序的真实截图）

![在此处输入图像描述](../Images/def297bb290139e40c577c108ca5c000.png) [http://i48.tinypic.com/5vrxaa.jpg](http://i48.tinypic.com/5vrxaa.jpg)

那么，我想知道有没有办法将 JFrame 放入 JPanel 中？

我正在考虑使用 JInternalFrame，这可能吗？还是有其他方法？

**更新：**
源代码：
[http](http://pastebin.com/tiqRbWP8) ://pastebin.com/tiqRbWP8（VTreePanel.java，这是具有左右区域划分的面板）
[http://pastebin.com/330z3yuT](http://pastebin.com/330z3yuT) （CPanel.java，这是VTreePanel的超类也是JPanel的子类）
[http://pastebin.com/MkNsbtjh](http://pastebin.com/MkNsbtjh) （AWindow.java，这是弹出窗口）
[http://pastebin.com/2rsppQeE](http://pastebin.com/2rsppQeE) （CFrame.java，这是AWindow的超类，也是JFrame 的子类）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T04:40:40.503

与其尝试嵌入框架，不如嵌入框架的内容。

我可以看到（至少）一个问题。

菜单栏由框架的`RootPane`.

创造你自己一个新的`JPanel`。将其布局设置为`BorderLayout`.

从框架中获取菜单栏（使用`JFrame#getJMenuBar`）并添加到新面板的北方位置。

获取框架`ContentPane`并将其添加到面板的中心位置。

毫无疑问，您在尝试执行此操作时会遇到无数其他特定于应用程序的问题……

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T04:29:36.720

不，您不想“将 JFrame 放入 JPanel”，并且您上面的插图也没有证明这一点。相反，它在另一个窗口的顶部（而不是内部）显示一个从属窗口。如果您绝对需要显示一个新的从属窗口，我建议您创建并显示一个 JDialog。教程将解释如何执行此操作，或者如果您在代码尝试后遇到困难，我们将帮助您解决此问题。

* * *

**编辑 1**
您声明：

> 我需要从弹出窗口样式转换为 jpanel 内容样式。这就像java api文档页面样式：docs.oracle.com/javase/6/docs/api 当您单击左框架中的文本时，它不会显示任何弹出窗口，对吗？内容直接显示在右边框。所以这基本上是我的目标。源代码相当大。如果可能，我会尝试粘贴源代码。

您正在寻找的是在 JList 或 JTable 中简单地实现 MouseListener，并在响应单击时根据所做的选择获取内容。这与在 JPanel 中放置 JFrame 无关，而是与编写正确的程序逻辑有关。同样，在模态 JDialog 中显示它——但这对于您编写正确的非 GUI 逻辑是次要的。你真的在这里吠错了树。忘掉 JFrame，暂时忘掉 JPanel，而是专注于在单击 SLA 标准数据时如何提取它。

* * *

**编辑 2**
我想我明白了你想要做什么——而不是 JFrames 和 JDialogs，使用 JPanels 并使用允许你交换*视图的*[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)交换它们。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:40:49.187

我浏览了源代码，我看到 AWindow.java 有一个内部面板 (APanel.java) 来保存窗口的内容，它还有一个公共方法来返回内容面板对象 (getAPanel())。有了这个，我可以用它来将窗口的内容提取到其他容器中。

最后，我决定在 VTreePanel 的右侧区域使用 JTabbedPane 来显示弹出窗口的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-19T05:30:42.630

您不能将 Jframe 放入 JPanel。相反，您应该尝试创建一个具有 JFrame 等功能的单独面板并将其嵌入到您的 JPanel 中。因为您可以将 JPanel 放入另一个 JPanel 但不能将 JFrame 放入另一个 JPanel*

# performance - jqGrid冻结行头（rownum）

> ID：12927114
> 
> 赞同：1
> 
> 时间：2012-10-17T04:27:53.857
> 
> 标签：performance, jqgrid, freeze, distortion, rownum

我正在尝试冻结网格的 rownum 列。因为我已经用有意义的行描述替换了 rownum 的文本。
我从 jqgrid 冻结列演示中获得了帮助。但它不适用于 rownum 列。我的网格加载本地数组数据并使用版本 jQgrid 4.3.2 在他之后我尝试了另一种方法来冻结具有属性的第一列

```
'frozen: true' and then I call function  $(grid_selector).jqGrid('setFrozenColumns'); 
```

我得到以下问题：

*   网格加载变得异常缓慢（在 IE、Firefox 中测试）
*   在页面加载后经过长时间的等待，行标题对齐被扭曲。所有的 rowheaders 都会上移一级并与 Caption div 重叠。

Row1Header 进入 Caption 位置 - Row2Header 进入 Row1 等等..

我的最终要求是冻结行头。任何帮助深表感谢。

谢谢

# c# - 删除 WPF GridView 项目边距

> ID：12927115
> 
> 赞同：0
> 
> 时间：2012-10-17T04:27:59.297
> 
> 标签：c#, wpf, gridview

如何删除 WPF 中添加的 GridView 项目边距？

![在此处输入图像描述](../Images/be3e610aeb467a35963dff6c9f5bd859.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:31:18.690

它称为`RowHeaderWidth`不是项目的边距。所以，你要做的只是设置`RowHeaderWidth="0"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:20:39.180

您可以使用删除属性从 Gridview 中删除所选项目。
例如：

```
if(datagrid.SelectedIndex >= 0) 
{ 
  Student student = datagrid.SelectedItem as Student; 
  col.Remove(student); 
} 
```

# c# - 使用匿名类型参数模拟方法

> ID：12927118
> 
> 赞同：0
> 
> 时间：2012-10-17T04:28:08.923
> 
> 标签：c#, unit-testing, mocking, tdd, moq

我有以下代码：

```
var connector = new Mock<IConector>();

connector
    .Setup(cn => cn.listar("FetchEstandar", new Estandar(), new {Id = 1}))
    .Returns(new List<Estandar>{ new Estandar {Id = 1} });

 var entidad = connector.Object
     .listar("FetchEstandar", new Estandar(), new {Id = 1}); 
```

当我调用`listar`连接器对象时，出现`"Expression Cannot Contain an Anonymouse Type"`错误。我试过犀牛模拟和最小起订量。

有什么办法可以模拟这种方法吗？难道我做错了什么？或者，我可以忽略此参数，但我不知道如何。我真的只需要测试第一个参数的值和 ignorearguments 工作但我不知道如果我使用它是否或如何获得这个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:07:59.093

我不知道这是否是匹配匿名对象的唯一方法，但可以使用 It.Is<>() 和反射来完成

```
public class Estandar {
    public int Id { get; set; }
}

public interface IConector {
    IEnumerable<Estandar> listar(string name, Estandar estandar, object key);   
}

[TestMethod]
public void CheckAnonymous() {

    var connector = new Mock<IConector>();

    connector.Setup(cn => cn.listar("FetchEstandar",
                                    It.IsAny<Estandar>(),
                                    It.Is<object>(it => MatchKey(it, 1))))
             .Returns(new List<Estandar> { new Estandar { Id = 1 } });

    var entidad = connector.Object.listar("FetchEstandar", new Estandar(), new { Id = 1 });

    Assert.AreEqual(1, entidad.Count());

}

public static bool MatchKey(object key, int soughtId) {
    var ret = false;
    var prop = key.GetType().GetProperty("Id");
    if (prop != null) {
        var id = (int)prop.GetValue(key, null);
        ret = id == soughtId;
    }
    return  ret;
} 
```

# android - 在重定向到第二页之前调用android webview的onPageFinished

> ID：12927120
> 
> 赞同：2
> 
> 时间：2012-10-17T04:28:27.180
> 
> 标签：android, authentication

android开发新手我正在尝试应用此处描述的网络身份验证方法：[https ://sites.google.com/site/oauthgoog/oauth-practices/mobile-apps-for-complex-login-systems/samplecode](https://sites.google.com/site/oauthgoog/oauth-practices/mobile-apps-for-complex-login-systems/samplecode)

以下是结果代码：

```
public class LoginActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_PROGRESS);
        WebView webview = new WebView(this);
        webview.getSettings().setJavaScriptEnabled(true);

        webview.setWebChromeClient(new WebChromeClient() {
            // Show loading progress in activity's title bar.
            @Override
            public void onProgressChanged(WebView view, int progress) {
                setProgress(progress * 100);
            }
        });

        webview.setWebViewClient(new WebViewClient() {
            // When start to load page, show url in activity's title bar
            @Override
            public void onPageStarted(WebView view, String url,
                    Bitmap favicon) {
                setTitle(url);
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                CookieSyncManager.getInstance().sync();
                // Get the cookie from cookie jar.
                String cookie = CookieManager.getInstance().getCookie(url);
                if (cookie == null) {
                    return;
                }
                // Cookie is a string like NAME=VALUE [; NAME=VALUE]
                String[] pairs = cookie.split(";");
                for (int i = 0; i < pairs.length; ++i) {
                    String[] parts = pairs[i].split("=", 2);
                    // If token is found, return it to the calling activity.
                    parts[0] = parts[0].trim();
                    if (parts.length == 2 && parts[0].equalsIgnoreCase("MY_PRIVATE_TOKEN")) {
                        Intent result = new Intent();
                        result.putExtra("token", parts[1]);
                        setResult(RESULT_OK, result);
                        finish();
                    }
                }
            }
        });

        String queryStringAndroidId = "?aid="+Secure.getString(this.getContentResolver(),Secure.ANDROID_ID);

        setContentView(webview);

        String urlToLoginPage =getString(R.string.web_login_page).concat(queryStringAndroidId);

        webview.loadUrl(urlToLoginPage);

    }

} 
```

我的问题是**onPageFinished**方法。当 webview 第一次显示时，这个方法被调用，这是我没想到的。如果身份验证 cookie 已经存在，则活动将立即关闭。据我了解，这个方法应该只在 web 视图中显示另一个页面时才被调用（除了我调用的第一个页面），我错了吗？有人可以阐明这种行为吗？多谢。

顺便说一句，我看到了这个解决方案：[onPageFinished 在渲染网页时没有正确触发，](https://stackoverflow.com/questions/3702627/onpagefinished-not-firing-correctly-when-rendering-web-page)但我不喜欢这样的复飞。我相当理解为什么该方法会在我不期望的情况下触发。谢谢。

# php - 在处理自定义 PHP 异常时使用“die()”是一个好习惯吗？

> ID：12927121
> 
> 赞同：0
> 
> 时间：2012-10-17T04:28:28.020
> 
> 标签：php, exception-handling, die, custom-exceptions

我在 PHP 中编写了一个自定义异常类：

```
<?php

class Custom_Exception extends Exception {

    public function __construct( $title, $message, $code = 0, Exception $previous = null ) {
        parent::__construct( $message, $code, $previous );

        echo '<html>';
        echo '<head>';
        echo '<title>Custom Exception: ' . $title . '</title>';
        echo '</head>';
        echo '<body>';
        echo '<h1>Custom Exception</h1>';
        echo '<hr />';
        echo '<p><strong>Error: </strong>' . $title . '</p>';
        echo '<p><strong>Message: </strong><em>' . $message . '</em></p>';
        echo '<hr />';
        echo '<p>This Exception was raised on: ' . date( 'Y-m-d' ) . ' at ' . date( 'H:i:s' ) . '.';
        echo '</body>';
        echo '</html>';
        http_response_code( $code );

        die();
    }

} 
```

`__construct`以 结束我的覆盖方法`die()`以防止输出任何父类“ `Exception`”消息是一种好习惯吗？

如您所见，它将 HTML 响应输出到浏览器中。我以前从未处理过自定义 PHP 异常，所以我想知道这是否会打扰任何约定等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:01:46.033

DCoder 有一个很好的观点，可以将错误发送给您或将其登录到文件中，以便您稍后对其进行分析，但是关于您的问题，死可能有点激烈，最好将应用程序的流程重定向到一个页面以通俗易懂的语言通知发生了错误，管理员将尝试解决它。您可以通过多种方式改写它。

但是，重要的是，客户不应该被错误所困扰或气馁。如果你能解释错误的原因并告诉用户如何解决它，或者不再犯错误并重定向到最后一个好的步骤，那是最好的方法。如果你不能，那么你应该尝试解释并重定向到一个安全但有用的页面，比如主页或带有错误解释和资源的页面，比如搜索机器人、站点地图、导航工具或任何其他可能有帮助的东西。

我会说，永远不要杀死应用程序。

再见

# ruby-on-rails - 错误：未知提供者：aProvider <- a

> ID：12927126
> 
> 赞同：7
> 
> 时间：2012-10-17T04:29:19.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, angularjs

我在带有资产的 Ruby on Rails 3.2.8 项目中使用 AngularJS。

当我在我的开发机器上加载使用 AngularJS 的表单时，我没有问题。但是，当我在生产服务器上加载相同的表单时，我在 Javascript 控制台中收到此错误：

```
Error: Unknown provider: aProvider <- a 
```

我已经将它追溯到我的咖啡脚本文件，我在其中设置了 AngularJS 以在表单中使用：

```
$ (event) ->
  $("#timesheet_description").autocomplete({source: '/autocomplete/work_descs'})

  # Create AngularJS module
  app = angular.module 'timesheetApp', []

  # Create a AngularJS controller
  app.controller "TimesheetCtrl", ($scope) ->
    $scope.costed_amount = 0
                                                                                                # Bind my module to the global variables so I can use it.
  angular.bootstrap document, ["timesheetApp"] 
```

如果我将所有这些注释掉，页面将加载而不会出现错误并且没有 AngularJS 功能。

问题是由于 Rails 资产编译和缩小造成的吗？有没有办法解决这个问题并仍然使用咖啡脚本和 Rails 资产？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T09:48:42.960

AngularJS，当使用你现在使用的样式（称为 pretotyping）时，使用函数参数名称来进行依赖注入。所以是的，缩小确实完全打破了这一点。

不过，修复很简单。在您需要注入（使用'$xxx'）变量的每种情况下，请执行以下操作：

```
app.controller "TimesheetCtrl", ['$scope', ($scope) ->
  $scope.costed_amount = 0
] 
```

基本上，用数组替换所有函数定义。最后一个元素应该是函数定义本身，第一个元素是`$names`要注入的对象。

[docs](http://docs.angularjs.org/guide/di)上还有更多（尽管不够清楚）信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-17T10:00:37.943

如果您在某处遗漏了数组符号，要找到它，我们需要稍微修改角度代码，但它的解决方案非常快速。

更改为**console.log("缺少数组表示法",fn);** （函数开始的第 11 行）

找出 angular.js 中的注释函数（非缩小）

```
function annotate(fn) {
      var $inject,
          fnText,
          argDecl,
          last;

      if (typeof fn == 'function') {
        if (!($inject = fn.$inject)) {
          $inject = [];
          if (fn.length) {
console.log("Array Notation is Missing",fn);
fnText = fn.toString().replace(STRIP_COMMENTS, '');
        argDecl = fnText.match(FN_ARGS);
        forEach(argDecl[1].split(FN_ARG_SPLIT), function(arg){
          arg.replace(FN_ARG, function(all, underscore, name){
            $inject.push(name);
          });
        });
      }
      fn.$inject = $inject;
    }
  } else if (isArray(fn)) {
    last = fn.length - 1;
    assertArgFn(fn[last], 'fn');
    $inject = fn.slice(0, last);
  } else {
    assertArgFn(fn, 'fn', true);
  }
  return $inject;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T15:16:45.347

要缩小角度，您只需将声明更改为“数组”声明“模式”，例如：

**从：**

```
var demoApp= angular.module('demoApp', []);
demoApp.controller(function demoCtrl($scope) {
} ); 
```

**到**

```
var demoApp= angular.module('demoApp', []);
demoApp.controller(["$scope",function demoCtrl($scope) {
}]); 
```

如何申报工厂服务？

```
demoApp.factory('demoFactory', ['$q', '$http', function ($q, $http) {
    return {
          //some object
    };
}]); 
```

# security - 这是否替换所有“清理”路径？

> ID：12927127
> 
> 赞同：-6
> 
> 时间：2012-10-17T04:29:31.097
> 
> 标签：security

用 Java 编写。我不明白为什么如果 fName = ..project/blah/blah.exe 这会是一个安全问题

这可能会在同名的不同目录上打开一个可能是恶意的文件吗？

```
String sFileName = request.getParameter(“fName”);
sFileName = sFileName.replaceAll("/", “\\");
sFileName = sFileName.replaceAll(“..\\", ""); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:41:27.820

If you use `sFileName` directly, the most obvious problem is that you don't deal with `absolute paths`. For examle, your input could be;

```
C:\Users\Test\secret.txt 
```

and you'd replace nothing, just open it right away.

Another one would be that the *replace itself* could create a path that has `..` in it. Consider for example `....\\secret.txt` that would be replaced to `..\secret.txt`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T04:38:57.097

那可能是不安全的；或者，更确切地说，帖子中的替换*不增加安全性*。

想象一下这个输入：

```
..../some/sensitive/relativepath 
```

哪个会有这个输出（这是字符串值，而不是字符串文字）：

```
..\some\senstive\relativepath 
```

也就是说，提供的代码*不能防止精心构造的 - 例如“黑客” - 输入*；正如所证明的，绕过“相对路径删除”是微不足道的。

它也不防范绝对路径：

```
\some\sensitive\absolutepath 
```

# php - 用广告将图像重写到页面

> ID：12927130
> 
> 赞同：0
> 
> 时间：2012-10-17T04:29:42.033
> 
> 标签：php, mod-rewrite

我的mod-rewrite如下：

```
RewriteRule ^(.*)\.png viewimg.php?n=$1 [NC] 
```

因此，用户转到`mysite.com/2012-10-16_1941.png`并显示 page `mysite.com/viewimg.php?n=2012-10-16_1941`。

这是我的PHP代码：

```
<?php
    echo $_GET['n'].".png";
    echo "<img src='".$_GET['n'].".png' alt='Image' />";
    echo "<br /><br />";
    echo "advert.";
?> 
```

但是，它需要它试图嵌入的图像并且找不到它，因为它正在被重写。我该如何解决这个问题，以便图像只显示在 PHP 页面上？

我正在尝试制作一个像 Gyazo 使用的 PHP 脚本，如果你听说过的话。我的桌面应用程序将屏幕截图上传到 FTP，然后我使用这个 PHP 脚本来显示图像和广告。我只想要一个视觉上吸引人的 URL 来配合它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:36:29.647

嗯，html img 标签的 src 值不能带任何 html，它只带一个图像文件路径。所以你可以你的代码返回一个图像文件，标记为广告（如果这是你想要的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:41:29.877

尝试添加查询字符串参数或检查引用：

## 请求参数：

php:

```
<?php
    echo $_GET['n'].".png";
    echo "<img src='".$_GET['n'].".png?embed' alt='Image' />";
    echo "<br /><br />";
    echo "advert.";
?> 
```

mod_rewrite：

```
RewriteCond %{QUERY_STRING} embed
RewriteRule ^(.*)\.png viewimg.php?n=$1 [NC] 
```

## 推荐人检查

mod_rewrite：

```
RewriteCond %{HTTP_REFERER} ^http://mysite.com/$ [NC]
RewriteRule ^(.*)\.png viewimg.php?n=$1 [NC] 
```

php：无需更改

两者都可以被欺骗以绕过带有广告的 php 页面，但查询字符串之一可能在不同的浏览器中效果更好。

# java - 安卓按钮：

> ID：12927136
> 
> 赞同：0
> 
> 时间：2012-10-17T04:30:02.243
> 
> 标签：java, android

为什么我们用这种方式来初始化Button。

> **b1=(按钮) findViewById(R.id.bEdit1);**

以及为什么我们在 findViewById 之前使用 (Button)。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:31:39.350

这是因为`findViewById`被声明返回一个`View`. 您需要向下转换返回值以将其分配给`Button`变量。（我假设您发布的代码`b1`被声明为`Button`.）

请注意，如果`bEdit1`不对应`Button`于视图层次结构中的 a，那么这将生成一个`ClassCastException`. 这应该是您在开发过程中发现的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:34:46.657

视图可能有一个与之关联的整数 id。这些 id 通常在布局 XML 文件中分配，用于在视图树中查找特定视图。一个常见的模式是：

```
Define a Button in the layout file and assign it a unique ID.

 <Button
     android:id="@+id/bEdit1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/my_button_text"/> 
```

从 Activity 的 onCreate 方法中，找到 Button

```
 Button myButton = (Button) findViewById(R.id.bEdit1); 
```

视图 ID 在整个树中不必是唯一的，但最好确保它们至少在您正在搜索的树的一部分中是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:42:05.080

While working with `Java` we do something like this

`JButton mbutt = new JButton("Click_Me");`

In above code we are `Creating` and `Assigning` an Object of Type `JButton` to the **Object Reference Variable** of type `JButton`.

While we work with `Android` we do something like this

`Button b1 = (Button) findViewById(R.id.bEdit1);`

Here **we have already created** the `Button` using the `XML`, and is now **referring to that** `Button object` using the above statement.

`(Button)` is an **explicit cast** done from `View` type to `Button` type. What we get from findViewById is a View, now we have to mention specifically what kinda view it is, here its Button.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:31:55.273

`(R.id.bEdit1)`是在`R.java`File 中声明的整数，因此我们必须将其转换为 Button 以获取它的引用。

`R.java`文件包含应用程序的所有变量声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T04:47:02.747

**findViewById**的签名看起来像

```
public final View findViewById (int id) 
```

这将寻找具有给定 id 的子视图。如果此视图具有给定的 id，则返回此视图。

```
final Button b1; 
```

**findViewById(R.id.bEdit1);** 现在它将根据 Id 查找视图`bEdit1`并将视图返回给您，现在您的工作是将其转换为适当的视图。这就是我们这样做的方式

`b1 = (Button)findViewById(R.id.bEdit1);`

# php - php转换日期值首选mysql日期

> ID：12927137
> 
> 赞同：1
> 
> 时间：2012-10-17T04:30:05.187
> 
> 标签：php, mysql

我从 oracle 数据库中获取了数据，并且日期值保存在 2009 年 5 月 27 日。我需要通过 PHP 将此值插入 mysql 数据库。我需要将日期格式转换为 2009-05-27。

任何人都知道它，请让我知道正确的 php 语句来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:32:06.333

使用`date()`功能

```
$date = '27-MAY-09';
$newData = date('Y-m-d', strtotime($date)); 
```

[php小提琴](http://codepad.org/76ieVHHX)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:35:31.183

```
$date = DateTime::createFromFormat('j-M-y', $inputDate);
$newDate = $date->format('Y-m-d'); 
```

PHP 5.3 不是更早的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T04:31:57.510

试试这个

```
$date1 = "27-MAY-09";
$data2 = date("Y-m-d",strtotime($date1)); 
```

# html - 提交按钮的最佳实践

> ID：12927148
> 
> 赞同：1
> 
> 时间：2012-10-17T04:31:26.457
> 
> 标签：html, css, forms, input

我希望就您认为对表单提交按钮进行编码的最佳实践获得一些意见。我正在建立一个新网站，并正在考虑改变。以下是我认为的选项：

1.  `input type="submit"`带有背景图像和 CSS 来隐藏值文本 - 这是我目前使用的。

2.  `input type="image"`with `src="source.jpg"`- 我知道我不需要隐藏值文本，但我一直更喜欢将图像放在 CSS 的中心位置，所以如果我需要更改它，我可以很容易地做到这一点。然而，由于 SEO 的原因，我试图避免隐藏文本。

3.  `button`- 我实际上从未使用过这个，但是 w3 说“如果您在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。用于在 HTML 表单中创建按钮。” - 你为什么要用这个？

任何想法表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:34:04.623

就个人而言，我认为最好保持控制自然。它允许浏览器/操作系统确定它们的外观，典型的结果是用户对他们已经知道的控件更加满意。

因此，我使用`<input type="submit"/>`提交按钮，`<input type="image"/>`获取单击图像的坐标（对我的游戏很有用，您可能会单击地图进行旅行），以及`<button>`与表单本身无关的 JavaScript 驱动的按钮（例如预览按钮）。这一切都是为了使用正确的工具来完成工作，并让用户熟悉事物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:40:05.400

使用默认值

```
<input type="submit" value="mysubmit"  class="button" />
input.button {
    background-image: url(/images/buttons/add.png); /* 16px x 16px */
    background-color: transparent;
    background-repeat: no-repeat;
    border: none;
    cursor: pointer;        /* make the cursor like hovering over an <a> element */
    height: 16px;
    padding-left: 16px;     /* make text start to the right of the image */
    vertical-align: middle; /* align the text vertically centered */
} 
```

# zend-framework - DOMDocument 无法解析 XML：DOMDocument::loadXML()

> ID：12927149
> 
> 赞同：0
> 
> 时间：2012-10-17T04:31:35.960
> 
> 标签：zend-framework, domdocument, gdata

当我执行下面的代码时：

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Gapps');
$client = Zend_Gdata_ClientLogin::getHttpClient("amdminuser", "adminpsw", Zend_Gdata_Gapps::AUTH_SERVICE_NAME);
$client->createUser($username, $givenName, $familyName, $password, $passwordHashFunction=null, $quota=null) 
```

它给出了错误：

```
Fatal error: Call to undefined method Zend_Gdata_HttpClient::createUser() in .... 
```

然后我们运行安装检查器，但它向我们显示了这个错误：

```
Fatal error: Uncaught exception 'Zend_Gdata_App_Exception' with message 'DOMDocument cannot parse XML: DOMDocument::loadXML(): Extra content at the end of the document in Entity, line: 1' in /web/web2/apache2/htdocs/test/per_ak/google/library/Zend/Gdata/App.php:830 Stack trace: #0 /web/web2/apache2/htdocs/test/per_ak/google/library/Zend/Gdata/App.php(789): Zend_Gdata_App::importString('importUrl('https://gdata.y...', 'Zend_Gdata_YouT...', NULL) #2 /web/web2/apache2/htdocs/test/per_ak/google/library/Zend/Gdata.php(162): 
```

我已经下载了[http://packages.zendframework.com/releases/ZendGdata-1.12.0/ZendGdata-1.12.0.zip](http://packages.zendframework.com/releases/ZendGdata-1.12.0/ZendGdata-1.12.0.zip)，在 php.ini 中安装并设置了适当的 include_path。但是，我不知道为什么会遇到这个问题和错误。有谁知道为什么会这样？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:09:06.613

`createUser`是 Zend_Gdata_Gapps 类的一个方法。Zend_Gdata_ClientLogin::getHttpClient 返回一个 Zend_Gdata_HttpClient 对象。

你确定你看过说明书？

# haskell - 如果“List”是一个幺半群，它的“集合”是什么？

> ID：12927152
> 
> 赞同：19
> 
> 时间：2012-10-17T04:31:41.053
> 
> 标签：haskell

刚刚阅读了[范畴论书籍](https://rads.stackoverflow.com/amzn/click/com/0198568614)，并决定将其应用于haskell。

作者将 Monoid 定义为：

> Monoid 是一个集合 L，配备了二元运算 *:LxL->L 和 L 中的一个可区分的单元元素 u，这样等等......

将“List”结构作为一个幺半群，显然二元运算是`concat`，单位是`[]`。

但是这里的集合 M 是什么？我试过`L = {set of all lists}`了，但我认为这让我陷入了“L 在 L 中吗？”的麻烦。问题，这似乎与集合的问题相同。

还是我想错了什么？

编辑：正如@a​​pplicative 所指出的，Haskell 的列表是称为[Free](http://en.wikipedia.org/wiki/Free_monoid) monoids 的幺半群！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-17T04:35:30.467

与其说“List is a Monoid”，不如说“For all types a, type `[a]`is a Monoid”更准确。因此，对于任何特定类型`a`，您的 L 将是`L = {set of all lists of as}`。有了这个定义，L 当然不能包含它自己。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T04:47:41.470

对于任何类型`t`，您都可以拥有

```
L = all elements of the type [t] 
```

那么 L 是一个使用 的平凡方式的幺半群`++`。事实上，我们在 Haskell 中将其形式化

```
class Monoid m where
   mempty  :: m
   mappend :: m -> m -> m 
```

这是具有形成幺半群的必要操作的类型的“类”，所以

```
instance Monoid [a] where
   mempty = []
   mappend a b = a ++ b 
```

事实上，这被称为“自由幺半群”

# c# - windows窗体创建10个textBox动态这个文本值怎么获取？

> ID：12927160
> 
> 赞同：0
> 
> 时间：2012-10-17T04:32:32.887
> 
> 标签：c#, winforms

动态 10 文本框创建所有文本值如何在 Windows 窗体应用程序中的按钮单击事件中访问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:40:44.210

The most simple way to do this is create a list to keep textbox's references.

```
List<TextBox> textBoxList = new List<TextBox>();

for (int index = 0; index < 10; index++)
{
    var textBox = new TextBox();
    textBoxList.Add(textBox);

    // do the rest of work.
} 
```

You can get its reference inside click event handler like below.

```
// inside button's click event.
foreach (var textBox in textBoxList)
{
    // get text and do the work.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:44:23.147

```
TextBox txt = new TextBox();
txt.Text = "ABC";
this.Controls.Add(txt);

private void btnOk_Click(object sender, EventArgs e)
{

 foreach (Control ctl in this.Controls)           
 {                              
  if (ctl.GetType() == typeof(TextBox))                               
    MessageBox.Show(ctl.Text);               
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:47:55.090

最简单的方法是为标签属性分配一些东西，帮助您识别文本框。例如数字或枚举值。

然后将点击事件发送者投射到一个文本框并查看标签是哪一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:04:37.893

您可以创建一个包含 10 个文本框的数组，动态放置所有文本框
您可以根据它的数组值（0-9）访问文本值

# git - JGit：签出远程分支

> ID：12927163
> 
> 赞同：28
> 
> 时间：2012-10-17T04:32:47.400
> 
> 标签：git, jgit

我正在使用 JGit 来检查远程跟踪分支。

```
Git binrepository = cloneCmd.call()

CheckoutCommand checkoutCmd = binrepository.checkout();
checkoutCmd.setName( "origin/" + branchName);
checkoutCmd.setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.TRACK );
checkoutCmd.setStartPoint( "origin/" + branchName );

Ref ref = checkoutCmd.call(); 
```

文件已签出，但 HEAD 未指向分支。以下是`git status`输出，

```
$ git status
# Not currently on any branch.
nothing to commit (working directory clean) 
```

可以在 git 命令行中轻松执行相同的操作，并且可以正常工作，

```
git checkout -t origin/mybranch 
```

这个JGit怎么做？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-17T06:26:56.333

你必须使用`setCreateBranch`来创建一个分支：

```
Ref ref = git.checkout().
        setCreateBranch(true).
        setName("branchName").
        setUpstreamMode(CreateBranchCommand.SetupUpstreamMode.TRACK).
        setStartPoint("origin/" + branchName).
        call(); 
```

您的第一个命令相当于`git checkout origin/mybranch`.

（编辑：我向 JGit 提交了一个补丁来改进 CheckoutCommand 的文档：[https](https://git.eclipse.org/r/8259) ://git.eclipse.org/r/8259 ）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-07T21:00:40.830

无论出于何种原因，robinst 发布的代码对我不起作用。特别是，创建的本地分支没有跟踪远程分支。这就是我使用的对我有用的东西（使用 jgit 2.0.0.201206130900-r）：

```
git.pull().setCredentialsProvider(user).call();
git.branchCreate().setForce(true).setName(branch).setStartPoint("origin/" + branch).call();
git.checkout().setName(branch).call(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T06:24:31.153

如代码所示[`CheckoutCommand`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/api/CheckoutCommand.java#L145-L153)，您需要将布尔值设置为`createBranch`才能`true`创建本地分支。

您可以在[`CheckoutCommandTest`-`testCreateBranchOnCheckout()`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/CheckoutCommandTest.java#L125-L129)

```
@Test
public void testCreateBranchOnCheckout() throws Exception {
  git.checkout().setCreateBranch(true).setName("test2").call();
  assertNotNull(db.getRef("test2"));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-09T07:05:28.673

你也可以这样

```
git.checkout().setName(remoteBranch).setForce(true).call();
                logger.info("Checkout to remote branch:" + remoteBranch);
                git.branchCreate() 
                   .setName(branchName)
                   .setUpstreamMode(SetupUpstreamMode.SET_UPSTREAM)
                   .setStartPoint(remoteBranch)
                   .setForce(true)
                   .call(); 
                logger.info("create new locale branch:" + branchName + "set_upstream with:" + remoteBranch);
                git.checkout().setName(branchName).setForce(true).call();
                logger.info("Checkout to locale branch:" + branchName); 
```

# php - MySQL 到 PHP 到 NSData 到 NSString - 我的 UTF8 编码哪里出错了？

> ID：12927168
> 
> 赞同：0
> 
> 时间：2012-10-17T04:33:23.343
> 
> 标签：php, mysql, objective-c, cocoa, nsstringencoding

我正在尝试编写一个简单的 PHP Web 服务，作为我的 Web 服务器上的 MySQL 数据库和 Objective-C Cocoa 桌面应用程序之间的桥梁。据我所知，链中的每个链接都在 UTF-8 中工作，但我似乎无法让非标准字符在 Cocoa 中显示；相反，我的界面元素只显示转义。

我愿意接受任何可以让我在任何阶段解决此问题的解决方案；我正在编写 PHP 和 Obj-C 端，所以我应该能够处理服务器端或客户端的问题。我只是不知道在这一点上打哪个痣。

**数据库**

信息来自 MySQL 数据库中的表；数据库排序规则和每个字段都设置为 utf_general_ci。

**PDO**

我的 PHP Web 服务使用 PDO 获取数据：

```
 $pdo = new PDO('mysql:host=mysql.hostname.com;dbname=tst_data_model', 'user', 'password', array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
if ($pdo) {} else {die();}

$stmt = $pdo->prepare("SELECT * FROM team");
$stmt->execute(); 
```

**PHP**

然后我回显数据：

```
header('Content-Type: text/html; charset=utf-8'); 
echo("<TEAM>\r");
echo("<team_id>{$row['team_id']}</team_id>\r");
echo("<name_full_native>{$row['name_full_native']}</name_full_native>\r");
echo("<name_short_native>{$row['name_short_native']}</name_short_native>\r");
echo("<name_full_english>{$row['name_full_english']}</name_full_english>\r");
echo("<name_short_english>{$row['name_short_english']}</name_short_english>\r");
echo("</TEAM>\r\r"); 
```

**NSDATA**

桌面应用程序使用 NSURLConnection 获取这些数据：

```
NSData* returnValue = [NSURLConnection sendSynchronousRequest:teamArrayRequest returningResponse:NULL error:NULL]; 
```

**NSString**

最后，我从数据中提取字符串，指定 UTF8 字符串编码：

```
NSString* rVString = [[NSString alloc] initWithData:returnValue encoding:NSUTF8StringEncoding]; 
```

当我在调试器中查看此字符串或将其发送到 NSTextView 时，我看到的只是 \u 转义：

> Borussia M\U00f6nchengladbach
> 
> Quer\U00e9taro
> 
> 真正的西班牙\U00f1a

我错过了什么吗？这些逃跑是从哪里来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:55:45.253

呃……没关系。原来这是PEBCAK的案例。

事实上，一切都在 UTF8 中，一直到 NSString。让我感到困惑的是，我在调试器中查看并传递给 NSTextView 的不是 NSString；而是 它是 NSArray 或 NSDictionary 的 -description 方法的输出，其中包含我在获取它后立即分配给它的字符串。

结果显示 NSArray 或 NSDictionary 的 -description 方法总是出于某种原因将标准 ASCII 字符以外的 UTF-8 字符输出为 /u 转义。

当我实际上将字符串从我用来解析和存储它的字典数组中提取出来并将字符串直接插入到 NSTextView 中时，它显示为完美的 UTF8：

> 门兴格拉德巴赫
> 
> 克雷塔罗
> 
> 真正的西班牙

所以……这就是答案。**[NSArray description] 和 [NSDictionary description] 不会显示字符串值中的每个字符，因为它将显示为 NSString。**我想这是编码人员做出的选择，以便空白字符等不会出现在 plist 描述中。

Although I know I've seen Chinese characters in plist descriptions and debugger output before...so it's still a little mysterious. Still, problem solved. Sorry to waste the hive-mind's time, and I hope the explanation helps someone down the road.

# c++ - 如何在构造函数中初始化 C++ 对象成员变量？

> ID：12927169
> 
> 赞同：102
> 
> 时间：2012-10-17T04:33:36.830
> 
> 标签：c++, constructor, class-members, object-construction

我有一个有几个对象作为成员变量的类。我不希望在声明时调用这些成员的构造函数，所以我试图明确地挂在指向对象的指针上。我不知道我在做什么。

我想也许我可以执行以下操作，在初始化对象成员变量时立即调用构造函数：

```
class MyClass {
    public:
        MyClass(int n);
    private:
        AnotherClass another(100); // Construct AnotherClass right away!
}; 
```

但我希望`MyClass`构造函数调用`AnotherClass`构造函数。这是我的代码的样子：

### *文件*BigMommaClass.h

 *```
#include "ThingOne.h"
#include "ThingTwo.h"

class BigMommaClass {

        public:
                BigMommaClass(int numba1, int numba2);

        private:
                ThingOne* ThingOne;
                ThingTwo* ThingTwo;
}; 
```

### *文件*BigMommaClass.cpp

 *```
#include "BigMommaClass.h"

BigMommaClass::BigMommaClass(int numba1, int numba2) {
        this->ThingOne = ThingOne(100);
        this->ThingTwo = ThingTwo(numba1, numba2);
} 
```

这是我尝试编译时遇到的错误：

```
g++ -Wall -c -Iclasses -o objects/BigMommaClass.o classes/BigMommaClass.cpp
In file included from classes/BigMommaClass.cpp:1:0:
classes/BigMommaClass.h:12:8: error: declaration of âThingTwo* BigMommaClass::ThingTwoâ
classes/ThingTwo.h:1:11: error: changes meaning of âThingTwoâ from âclass ThingTwoâ
classes/BigMommaClass.cpp: In constructor âBigMommaClass::BigMommaClass(int, int)â:
classes/BigMommaClass.cpp:4:30: error: cannot convert âThingOneâ to âThingOne*â in assignment
classes/BigMommaClass.cpp:5:37: error: â((BigMommaClass*)this)->BigMommaClass::ThingTwoâ cannot be used as a function
make: *** [BigMommaClass.o] Error 1 
```

我是否使用了正确的方法，但语法错误？还是我应该从不同的方向来？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-10-17T04:39:09.563

您可以在成员初始化器列表中指定如何初始化成员：

```
BigMommaClass {
    BigMommaClass(int, int);

private:
    ThingOne thingOne;
    ThingTwo thingTwo;
};

BigMommaClass::BigMommaClass(int numba1, int numba2)
    : thingOne(numba1 + numba2), thingTwo(numba1, numba2) {} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-17T04:39:57.510

您正在尝试`ThingOne`通过使用`operator=`which 不起作用（语法不正确）来创建一个。此外，您使用类名作为变量名，即`ThingOne* ThingOne`. 首先，让我们修复变量名称：

```
private:
    ThingOne* t1;
    ThingTwo* t2; 
```

由于这些是指针，它们必须指向某些东西。如果对象尚未构建，则需要在`BigMommaClass`构造函数中使用 new 显式执行此操作：

```
BigMommaClass::BigMommaClass(int n1, int n2)
{
    t1 = new ThingOne(100);
    t2 = new ThingTwo(n1, n2);
} 
```

然而，通常初始化列表是构造的首选，所以它看起来像：

```
BigMommaClass::BigMommaClass(int n1, int n2)
    : t1(new ThingOne(100)), t2(new ThingTwo(n1, n2))
{ } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-12-03T23:28:43.523

这个问题有点老了，但这是 C++11 在初始化成员变量之前在构造函数中“做更多工作”的另一种方式：

```
BigMommaClass::BigMommaClass(int numba1, int numba2)
    : thingOne([](int n1, int n2){return n1+n2;}(numba1,numba2)),
      thingTwo(numba1, numba2) {} 
```

上面的 lambda 函数将被调用，并将结果传递给 thingOnes 构造函数。你当然可以让 lambda 变得像你喜欢的那样复杂。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-08-30T12:00:29.107

我知道这是 5 年后的事了，但上面的回复并没有解决你的软件出了什么问题。（嗯，Yuushi 有，但直到我输入了这个我才意识到 - 哦！）。他们回答了标题中的问题**如何在构造函数中初始化 C++ 对象成员变量？**这是关于其他问题：*我是否使用了正确的方法但语法错误？还是我应该从不同的方向来？*

编程风格在很大程度上是一个见仁见智的问题，但在构造函数中尽可能多地做的另一种观点是将构造函数保持在最低限度，通常具有单独的初始化函数。无需尝试将所有初始化都塞入构造函数中，更不用说有时尝试将事物强制放入构造函数初始化列表中。

那么，直截了当，您的软件出了什么问题？

```
private:
    ThingOne* ThingOne;
    ThingTwo* ThingTwo; 
```

请注意，在这些行之后，`ThingOne`(和`ThingTwo`) 现在有两个含义，具体取决于上下文。

在 BigMommaClass 之外，`ThingOne`是您创建的类`#include "ThingOne.h"`

BigMommaClass 内部`ThingOne`是一个指针。

**那是假设编译器甚至可以理解这些行并且不会陷入循环，认为这** *`ThingOne`是一个指向某物的指针，该指针本身就是指向某物的指针，该指针指向...*

后来，当你写

```
this->ThingOne = ThingOne(100);
this->ThingTwo = ThingTwo(numba1, numba2); 
```

请记住，`BigMommaClass`您的内部`ThingOne`是一个指针。

如果您更改指针的声明以包含前缀 (p)

```
private:
    ThingOne* pThingOne;
    ThingTwo* pThingTwo; 
```

然后`ThingOne`将始终引用类和`pThingOne`指针。

然后可以重写

```
this->ThingOne = ThingOne(100);
this->ThingTwo = ThingTwo(numba1, numba2); 
```

作为

```
pThingOne = new ThingOne(100);
pThingTwo = new ThingTwo(numba1, numba2); 
```

它纠正了两个问题：双重含义问题和缺失`new`. （如果你愿意，你可以离开`this->`！）

有了它，我可以将以下几行添加到我的 C++ 程序中，它编译得很好。

```
class ThingOne{public:ThingOne(int n){};};
class ThingTwo{public:ThingTwo(int x, int y){};};

class BigMommaClass {

    public:
            BigMommaClass(int numba1, int numba2);

    private:
            ThingOne* pThingOne;
            ThingTwo* pThingTwo;
};

BigMommaClass::BigMommaClass(int numba1, int numba2)
{
    pThingOne = new ThingOne(numba1 + numba2);
    pThingTwo = new ThingTwo(numba1, numba2);
}; 
```

当你写

```
this->ThingOne = ThingOne(100);
this->ThingTwo = ThingTwo(numba1, numba2); 
```

的使用`this->`告诉编译器左边`ThingOne`的意思是指针。但是我们`BigMommaClass`当时在里面，没有必要。

问题在于等号的右侧，其中`ThingOne`的意思是类。所以另一种纠正你的问题的方法是写

```
this->ThingOne = new ::ThingOne(100);
this->ThingTwo = new ::ThingTwo(numba1, numba2); 
```

或者干脆

```
ThingOne = new ::ThingOne(100);
ThingTwo = new ::ThingTwo(numba1, numba2); 
```

用于`::`更改编译器对标识符的解释。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-20T16:55:58.910

关于[***克里斯***](https://stackoverflow.com/questions/12927169/how-can-i-initialize-c-object-member-variables-in-the-constructor/12927220#12927220)[的第一个（**也是很好的**）答案，](https://stackoverflow.com/questions/12927169/how-can-i-initialize-c-object-member-variables-in-the-constructor/12927220#12927220)**他提出了一个解决方案，即类成员被视为“*真正的复合*”成员（即不是**指针****或** *引用* **）**：**

 **注释有点大，所以我将在这里用一些示例代码进行演示。

当你像我提到的那样选择持有成员时，你还必须记住这两件事：

1.  对于每个**没有**默认构造函数的“组合对象” - 您**必须**在“父”类的**所有**构造函数的初始化列表中对其进行初始化（即 -`BigMommaClass`或`MyClass`在原始示例和`MyClass`下面的代码中），以防万一有几个（见`InnerClass1`下面的例子）。这意味着，您可以“注释掉”`m_innerClass1(a)`并且`m_innerClass1(15)` *仅*当您启用`InnerClass1`默认构造函数时。

2.  对于**确实具有**默认构造函数的每个“组合对象” - 您**可以**在初始化列表中对其进行初始化，但如果您选择不这样做，它也将起作用（参见`InnerClass2`下面的示例）。

查看示例代码（在[Ubuntu 18.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_18.04_LTS_.28Bionic_Beaver.29)（Bionic Beaver）下编译，`g++`版本 7.3.0）：

```
#include <iostream>

using namespace std;

class InnerClass1
{
    public:
        InnerClass1(int a) : m_a(a)
        {
            cout << "InnerClass1::InnerClass1 - set m_a:" << m_a << endl;
        }

        /* No default constructor
        InnerClass1() : m_a(15)
        {
            cout << "InnerClass1::InnerClass1() - set m_a:" << m_a << endl;
        }
        */

        ~InnerClass1()
        {
            cout << "InnerClass1::~InnerClass1" << endl;
        }

    private:
        int m_a;
};

class InnerClass2
{
    public:
        InnerClass2(int a) : m_a(a)
        {
            cout << "InnerClass2::InnerClass2 - set m_a:" << m_a << endl;
        }

        InnerClass2() : m_a(15)
        {
            cout << "InnerClass2::InnerClass2() - set m_a:" << m_a << endl;
        }

        ~InnerClass2()
        {
            cout << "InnerClass2::~InnerClass2" << endl;
        }

    private:
        int m_a;
};

class MyClass
{
    public:
        MyClass(int a, int b) : m_innerClass1(a), /* m_innerClass2(a),*/ m_b(b)
        {
            cout << "MyClass::MyClass(int b) - set m_b to:" << m_b << endl;
        }

         MyClass() : m_innerClass1(15), /*m_innerClass2(15),*/ m_b(17)
        {
            cout << "MyClass::MyClass() - m_b:" << m_b << endl;
        }

        ~MyClass()
        {
            cout << "MyClass::~MyClass" << endl;
        }

    private:
        InnerClass1 m_innerClass1;
        InnerClass2 m_innerClass2;
        int m_b;
};

int main(int argc, char** argv)
{
    cout << "main - start" << endl;

    MyClass obj;

    cout << "main - end" << endl;
    return 0;
} 
```****

# .htaccess - 将多个子域重定向到单个目录

> ID：12927170
> 
> 赞同：0
> 
> 时间：2012-10-17T04:33:43.243
> 
> 标签：.htaccess, redirect, rewrite

我正在寻找一种将我的图像分发到位于 [http://www.my-site.com/wp-content/uploads/](http://www.my-site.com/wp-content/uploads/)到[http://img1.my-site.com/wp-的 wordpress 图像文件夹中的方法content/uploads/](http://img1.my-site.com/wp-content/uploads/) & [http://img2.my-site.com/wp-content/uploads/](http://img2.my-site.com/wp-content/uploads/) & [http://img3.my-site.com/wp-content/uploads/](http://img3.my-site.com/wp-content/uploads/)将页面加载速度提高允许浏览器并行下载这些？我查看了 htaccess 重定向和重写，并正在寻找一种方法来引导这个文件夹并跨多个子域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:21:21.997

您可以使用随机重写映射：[http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)

你必须在你的服务器/虚拟主机配置中定义它（会在你的 htaccess 中抛出一个错误），所以假设你有一个这样的文件：

**/some/path/image_hostnames.txt**

```
img    img1.my-site.com|img2.my-site.com|img3.my-site.com 
```

**在虚拟主机/服务器配置中：**

```
RewriteMap servers rnd:/some/path/image_hostnames.txt 
```

**然后在您的 htaccess（或服务器/虚拟主机配置）中设置重写规则：**

```
RewriteRule ^/?wp-content/uploads/(.*)$ http://${servers:img}/wp-content/updates/$1 [L,R=301] 
```

但是，我有点似是而非地认为这实际上会*增加*页面加载时间，因为*每个*图像需要建立**2 个连接**，第一个是发送到的请求，它告诉它在其中一个主机上请求图像，然后浏览器必须为此建立单独的连接。通常，大多数图像或其他静态资源都可以在单个*保活*连接上下载，它不完全并行，但也不会创建大量连接。*`www.my-site.com``img#.my-site.com`*

# erlang - 向 Cowboy 请求添加额外的属性

> ID：12927177
> 
> 赞同：1
> 
> 时间：2012-10-17T04:34:37.090
> 
> 标签：erlang, websocket, cowboy

我们使用 Erlang/Cowboy 开发了一个基于 WebSockets 的简单聊天服务。当用户连接时，将根据 URL 参数进行身份验证，并将返回连接的用户 ID 或无。

我的愚蠢问题是，如何将用户 id 存储到请求数据结构中，并且可以为以后的进程获取用户 id？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T05:27:41.800

如果您正在使用`cowboy_rest`，您可以`handler_state`在授权后使用 来存储您的用户数据。就像是：

```
-record(rs_state{user}).
rest_init(Req, Opts) ->
    {ok, Req, #rs_state{}}.

is_authorized(Req, State) ->
    %% authentication code
    {ok, User} = ...
    {true, Req, State#rs_state{user=User}}}. 
```

# eclipse - 如何在eclipse中更改颜色样式

> ID：12927183
> 
> 赞同：0
> 
> 时间：2012-10-17T04:35:13.947
> 
> 标签：eclipse, colors, eclipse-juno

我正在使用日食 JUNO。

当光标移过变量名称（在资源和调试透视图中）时，变量名称的详细信息会显示在一个小窗口中，例如一个框。如何更改窗口的颜色及其详细信息。

在我的情况下，颜色实际上是黑色背景和白色前景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:38:22.353

你在 Ubuntu 上使用 Eclipse 吗？这似乎是由操作系统的默认颜色设置引起的常见问题。

[https://askubuntu.com/questions/70599/how-to-change-tooltip-background-color-in-unity](https://askubuntu.com/questions/70599/how-to-change-tooltip-background-color-in-unity) [https://askubuntu.com/questions/1620/how-to-fix-unreadable-tooltips-in -eclipse-helios](https://askubuntu.com/questions/1620/how-to-fix-unreadable-tooltips-in-eclipse-helios) [https://askubuntu.com/questions/45001/how-to-fix-black-tooltips-in-eclipse](https://askubuntu.com/questions/45001/how-to-fix-black-tooltips-in-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:39:48.763

我试过Juno，问题仍然存在。我相信这是 Eclipse 中的一个错误：取消选中 Java > Editor > Source Hover 背景中的“系统默认值”无效。即使更改设置，Eclipse 也会继续使用系统提供的颜色。

这似乎是 Eclipse 开发人员指责 Ubuntu 的一个长期问题。

# algorithm - 上下文相关语法和上下文无关语法之间的区别

> ID：12927186
> 
> 赞同：3
> 
> 时间：2012-10-17T04:35:21.680
> 
> 标签：algorithm, context-free-grammar, context-sensitive-grammar

> **可能重复：**
> [上下文相关语法和上下文无关语法](https://stackoverflow.com/questions/8236422/context-sensitive-grammar-and-context-free-grammar)

在我的教科书中，这是对这两个术语的解释：

上下文相关语法：

> 语法可以有 w1 → w2 形式的产生式，其中 w1 = lAr 和 w2 = lwr，其中 A 是非终结符，l 和 r 是零个或多个终结符或非终结符的字符串，w 是终结符或非终结符的非空字符串非终结符号。只要 S 不出现在任何其他产生式的右侧，它也可以有产生式 S → λ。

上下文无关语法：

> 文法只能有 w1 → w2 形式的产生式，其中 w1 是单个符号，不是终结符号。类型 3 文法只能有 w1 → w2 形式的产生式，其中 w1 = A 且 w2 = aB 或 w2 = a，其中 A 和 B 是非终结符号，a 是终结符号，或者 w1 = S 和 w2 = λ。

在我的教科书中，作者说：CSG是CFG的一个特例。但是，我不明白这一点。因为在 CSG 中，lAr -> lwr。l 和 r 可以是**零**个或多个终结符或非终结符的字符串。因此，当它是零字符串时（意味着：长度 = 0）。我们可以将 lAr 写为 A。因此，CSG 将是 CFG。所以，CSG**就是**CFG

我理解错了吗？请为我更正。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:47:10.130

教科书有误。正如您所说，CFG 是 CSG 的特例。

CSG 可以比 CFG 严格地表达更多的语言。

# java - JComboBox.setSelectedItem() 问题

> ID：12927190
> 
> 赞同：0
> 
> 时间：2012-10-17T04:35:34.653
> 
> 标签：java, swing, jcombobox, string-comparison, object-equality

我的 jTable Column 8 是美国州列。这是我用适当的项目设置 jComboBox 以显示状态的代码。

当我使用 Buffered Reader 填充 Jtable 时，下面的代码可以很好地设置组合框项。

由于解析问题，我决定使用默认的 CSVReader 库，而不是自己重写它。我的 jTable 填充问题已经解决，但现在由于某种原因，这段代码现在不再有效。我错过了什么吗？

jComboBox(0) 是“--”。

```
 java.lang.Object state = jTable1.getValueAt(jTable1.getSelectedRow(),8);
            String g = state.toString();

        if (g == "") {
            jComboBox1.setSelectedIndex(0);
        } else if (g == "AK") {
            jComboBox1.setSelectedIndex(1);
        } else if (g == "AL") {
            jComboBox1.setSelectedIndex(2);
        } else if (g == "AR") {
            jComboBox1.setSelectedIndex(3);
        }else if (g == "AZ") {
            jComboBox1.setSelectedIndex(4);
        }else if (g == "CA") {
            jComboBox1.setSelectedIndex(5);
        }else if (g == "CO") {
            jComboBox1.setSelectedIndex(6);
        }else if (g == "CT") {
            jComboBox1.setSelectedIndex(7);
        }else if (g == "DE") {
            jComboBox1.setSelectedIndex(8);
        }else if (g == "FL") {
            jComboBox1.setSelectedIndex(9);
        }else if (g == "GA") {
            jComboBox1.setSelectedIndex(10);
        }else if (g == "HI") {
            jComboBox1.setSelectedIndex(11);
        }else if (g == "IA") {
            jComboBox1.setSelectedIndex(12);
        }else if (g == "ID") {
            jComboBox1.setSelectedIndex(13);
        }else if (g == "IL") {
            jComboBox1.setSelectedIndex(14);
        }else if (g == "IN") {
            jComboBox1.setSelectedIndex(15);
        }else if (g == "KS") {
            jComboBox1.setSelectedIndex(16);
        }else if (g == "KY") {
            jComboBox1.setSelectedIndex(17);
        }else if (g == "LA") {
            jComboBox1.setSelectedIndex(18);
        }else if (g == "MA") {
            jComboBox1.setSelectedIndex(19);
        }else if (g == "MD") {
            jComboBox1.setSelectedIndex(20);
        }else if (g == "ME") {
            jComboBox1.setSelectedIndex(21);
        }else if (g == "MI") {
            jComboBox1.setSelectedIndex(22);
        }else if (g == "MN") {
            jComboBox1.setSelectedIndex(23);
        }else if (g == "MO") {
            jComboBox1.setSelectedIndex(24);
        }else if (g == "MS") {
            jComboBox1.setSelectedIndex(25);
        }else if (g == "MT") {
            jComboBox1.setSelectedIndex(26);
        }else if (g == "NC") {
            jComboBox1.setSelectedIndex(27);
        }else if (g == "ND") {
            jComboBox1.setSelectedIndex(28);
        }else if (g == "NE") {
            jComboBox1.setSelectedIndex(29);
        }else if (g == "NH") {
            jComboBox1.setSelectedIndex(30);
        }else if (g == "NJ") {
            jComboBox1.setSelectedIndex(31);
        }else if (g == "NM") {
            jComboBox1.setSelectedIndex(32);
        }else if (g == "NV") {
            jComboBox1.setSelectedIndex(33);
        }else if (g == "NY") {
            jComboBox1.setSelectedIndex(34);
        }else if (g == "OH") {
            jComboBox1.setSelectedIndex(35);
        }else if (g == "OK") {
            jComboBox1.setSelectedIndex(36);
        }else if (g == "OR") {
            jComboBox1.setSelectedIndex(37);
        }else if (g == "PA") {
            jComboBox1.setSelectedIndex(38);
        }else if (g == "RI") {
            jComboBox1.setSelectedIndex(39);
        }else if (g == "SC") {
            jComboBox1.setSelectedIndex(40);
        }else if (g == "SD") {
            jComboBox1.setSelectedIndex(41);
        }else if (g == "TN") {
            jComboBox1.setSelectedIndex(42);
        }else if (g == "TX") {
            jComboBox1.setSelectedIndex(43);
        }else if (g == "UT") {
            jComboBox1.setSelectedIndex(44);
        }else if (g == "VA") {
            jComboBox1.setSelectedIndex(45);
        }else if (g == "VT") {
            jComboBox1.setSelectedIndex(46);
        }else if (g == "WA") {
            jComboBox1.setSelectedIndex(47);
        }else if (g == "WI") {
            jComboBox1.setSelectedIndex(48);
        }else if (g == "WV") {
            jComboBox1.setSelectedIndex(49);
        }else if (g == "WY") {
            jComboBox1.setSelectedIndex(50);
        } 
```

谢谢你的帮助。JB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:39:02.963

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

**编辑**
顺便说一句，您的程序设计可以大大改进。为什么要使用幻数？考虑为此目的使用枚举。

# asp.net - 如何根据来自第一个转发器的值在转发器内绑定转发器

> ID：12927198
> 
> 赞同：0
> 
> 时间：2012-10-17T04:36:17.230
> 
> 标签：asp.net, gridview, repeater

学生代码| student.Name |地区名称|位置名称| 资产详情 |

我必须根据每个学生显示资产详细信息。一个学生可以有多个资产详细信息，我如何在转发器或网格视图中使用它。

我在 SQL 中的表。

学生代码 | 学生姓名 | 资产详细信息
1 Ray 笔记本电脑
1 Ray Bed
2 Raj 电话
2 Raj 充电器\

  .... 我想在我的页面上显示每个唯一学生代码的资产详细信息。

学生代码 | 学生姓名 | 资产详情

1 Ray 笔记本电脑
                                                           床
2 Raj 手机
                                                            充电器

我如何只用一次来自 sql. 的命中来执行相同的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:04:18.353

不要使用两个中继器控件，而是尝试进行 sql 查询以获取此格式的数据
使用此类查询

```
select studentID, 
       stuff((select ',' + AssetDetails
                  from Tbl_Student t2 
                  where t2.studentID= t1.studentID
                  order by studentID
                  for xml path('')),1,1,'') as AssetDetailsString
    from Tbl_Student t1
    group by studentID 
```

这将为每个学生 ID 返回单行，并在同一行中以 CSV 格式的 Assestdetails

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:42:27.710

您可以执行以下操作：

使用存储过程为以下查询返回两个结果集

```
SELECT DISTINCT StudentCode, studentname FROM StudentInfo

SELECT StudentCode, student name, Asset Details 
```

为包含 2 个表的结果创建一个 DataSet。您可以将第一个表命名为“Student”，将第二个表命名为“StudentInfo”

为表创建关系（请使用智能感知语法）

```
DataSet.Relationships.Add("RelationshipName",Table1.StudentCode,Table2.StudentCode) 
```

将 GridView 与 DataSet 绑定

为 Asset Details 创建一个 Template 列，并为该列插入一个转发器或 Gridview。

在`ItemDataBound`GridView 的事件上。

```
DataRowView drv = (DataRowView)e.ItemData;
Repeater.DataSource = dv.CreateChildView(); 
```

# php - 维基百科搜索：输入txt行到 php html

> ID：12927200
> 
> 赞同：1
> 
> 时间：2012-10-17T04:36:27.113
> 
> 标签：php, html, forms, input

我需要将 .txt 文件中的行输入到表单中搜索变量的值中。这是mi html代码：

```
 <form action="http://www.wikipedia.org/search-redirect.php" method="get" target="_blank">
    <input type="hidden" name="search" value=""/>  
    <input type="hidden" name="language" value="en" />
    <input type="image" src="/img/masinfo.png" width="218" height="40" alt="mas informacion"  name="go" value="Mas informacion del artista" />
    </form> 
```

另一方面，我有这个 php 代码从 .txt 文件中提取该行：

```
<?php
$file = "file.txt";
$f = fopen($file, "r");
while ( $line = fgets($f, 1000) ) {
  $line = preg_replace("/^example.*/", "example", $line);
  $line = preg_replace("/0[0-9]{2}/", "", $line);
 print $line;

}
?> 
```

有没有办法将此行输入到表单的搜索值中？

编辑：这条线是这样的

```
 124 hello world - universe 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:39:32.080

```
<?php 
$file = "file.txt"; 
$f = fopen($file, "r"); 
while ( $line = fgets($f, 1000) ) { 
  $line = preg_replace("/^example.*/", "example", $line); 
  $line = preg_replace("/0[0-9]{2}/", "", $line); 
} 
?> 

<form action="http://www.wikipedia.org/search-redirect.php" method="get" target="_blank"> 
<input type="hidden" name="search" value="<?php echo $line; ?>"/>   
<input type="hidden" name="language" value="en" /> 
<input type="image" src="/img/masinfo.png" width="218" height="40" alt="mas informacion"  name="go" value="Mas informacion del artista" /> 
</form> 
```

如果您的`$line`变量将包含`"`您应该在回显之前替换它的字符

# python - 为什么我不能从我的 jinja 模板中访问谷歌应用引擎实体的密钥

> ID：12927202
> 
> 赞同：1
> 
> 时间：2012-10-17T04:36:51.590
> 
> 标签：python, google-app-engine, jinja2

这应该是一个简单的。我正在构建一个谷歌应用引擎应用程序。它使用称为块的实体列表动态地制作表单列表。这些块有各种属性，单选按钮上的标签，文本区域的大小等等。我在 jinja 模板中遍历这些块的列表，从该特定块的属性中挑选出表单的细节。这一切都很好。

但是，我想为用于在表单中构建表单的块实体包含一个唯一标识符。这将为我提供一种有效的方式来了解我的用户在向我发送回复时正在回复什么。

我试过：

> ```
> <form>
>     <input type="hidden" name="qKey" value="{{block.id}}"> 
> ```

这会将以下内容返回到我的浏览器：

> ```
> <form>
>     <input type="hidden" name="qKey" value=""> 
> ```

然后我尝试了：

> ```
>  <form>
>         <input type="hidden" name="qKey" value="{{block.key}}"> 
> ```

那返回：

> ```
> <form>
>     <input type="hidden" name="qKey" value="<bound method Block.key of <dynamicsurvey2.Block object at 0x10a092f10>>"> 
> ```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:49:50.553

Jinja2 不会自动为你调用函数，它`.key()`是一个函数，而不是一个属性。

而不是`{{block.key}}`你需要使用`{{block.key()}}`来实际调用函数并获取返回值。

# android - Android debug.keystore 仍然没有生成

> ID：12927203
> 
> 赞同：1
> 
> 时间：2012-10-17T04:36:57.197
> 
> 标签：android

我的 debug.keystore 文件有问题。当我尝试在 Eclipse 中运行我的应用程序时，出现错误**Debug Certificate expired on...Unknown Android Packaging Problem**。我已经完成了教程和一些解决此问题的步骤，但仍然失败，在执行“清理”并重新启动 Eclipse 之后，我没有新的 debug.keystore 文件。有人可以告诉我为什么以及如何用最好的方式解决这个问题吗？谢谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:54:51.397

尝试删除`.android`文件夹。

当您再次运行您的应用程序时，它将重新生成它 (.android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:35:43.577

调试密钥库没有什么特别之处。如果它没有自动生成，请自己生成一个，然后将其复制到那里。只要你使用Eclipse的别名和密码等期望，它应该可以工作。此处的详细信息：http: [//developer.android.com/tools/publishing/app-signing.html#debugmode](http://developer.android.com/tools/publishing/app-signing.html#debugmode)

# qt - 带有浮动工具栏的 QDialog

> ID：12927205
> 
> 赞同：3
> 
> 时间：2012-10-17T04:37:29.067
> 
> 标签：qt, toolbar, qdialog

如何`QDialog`在 Qt 中创建带有浮动工具栏的工具栏？

不适合将`QMainWindow`带有工具栏的附件作为小部件。`QDialog`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:49:22.057

为什么不适合？以下代码就像魅力一样。

```
#include <QtGui>

class MyDialog : public QDialog
{
    Q_OBJECT
public:
    MyDialog(QWidget* parent=0)
    {
        QMainWindow* child = new QMainWindow;
        QLabel* label = new QLabel(tr("QMainWindow with toolbar!"));
        label->setAlignment(Qt::AlignCenter);
        child->setCentralWidget(label);

        QToolBar* toolbar = child->addToolBar(tr("Tool"));
        toolbar->addAction(tr("Test"), this, SLOT(doTest()));

        QHBoxLayout* layout = new QHBoxLayout(this);
        layout->setContentsMargins(0,0,0,0);
        layout->addWidget(child);
    }
private slots:
    void doTest()
    {
        QMessageBox::information(this, tr("Test"), tr("ToolBar is Working!"));
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T11:41:17.503

看看 [你能给QDialog添加一个工具栏吗？](https://stackoverflow.com/questions/18435801/can-you-add-a-toolbar-to-qdialog/18436011#18436011) 并尝试这样写

```
myDialog->layout()->setMenuBar(myToolBar); 
```

# actionscript-3 - 如何在 TextField 组件中获取可供选择的可用字体列表？

> ID：12927208
> 
> 赞同：0
> 
> 时间：2012-10-17T04:37:32.470
> 
> 标签：actionscript-3, flash

在 textfield 组件中，有一个名为`TextFormat`. TextFormat 有一个名为的属性`font`，可以让你设置字体，但是帮助文档没有给出关于字体的任何信息，它只告诉你默认是“Times New Roman”，所以我只能设置“Times New Roman” ?

有没有办法列出所有可用的字体，以便我从列表中选择一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:56:25.337

查看`Font.enumerateFonts()`此功能将为您提供所有可用的嵌入式和设备字体的列表。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/Font.html#enumerateFonts%28%29)

> 此示例首先调用静态方法 Font.enumerateFonts() 以获取所有设备和嵌入字体的列表。然后它按 fontName 属性对生成的 Font 对象数组进行排序。
> 
> 接下来的示例显示了如何调用 Font.enumerateFonts() 方法并将 enumerateDeviceFonts 参数设置为 false。生成的 Array 仅包含嵌入的 Font 对象。（如果您在不包含任何嵌入字体的应用程序中运行此代码，则 embeddedFonts 数组将为空。）

```
import flash.text.Font;

var allFonts:Array = Font.enumerateFonts(true);
allFonts.sortOn("fontName", Array.CASEINSENSITIVE);

var embeddedFonts:Array = Font.enumerateFonts(false);
embeddedFonts.sortOn("fontName", Array.CASEINSENSITIVE); 
```

# ruby - 树顶回溯类似于正则表达式？

> ID：12927210
> 
> 赞同：1
> 
> 时间：2012-10-17T04:38:06.420
> 
> 标签：ruby, treetop, peg

我读过的所有内容都表明 Treetop 会像正则表达式一样回溯，但我很难做到这一点。

假设我有以下语法：

```
grammar TestGrammar
  rule open_close
    '{' .+ '}'
  end
end 
```

这与字符串不匹配`{abc}`。我怀疑那是因为从这封信开始`.+`就消耗了一切。`a`即`abc}`当我只希望它消费时它正在消费`abc`。

这似乎与类似的正则表达式不同。正则表达式`/{.+}/`将匹配`{abc}`。据我了解，这是可能的，因为正则表达式引擎在将关闭`}`作为 的一部分使用后回溯`.+`，然后无法匹配。

那么 Treetop 可以这样回溯吗？如果是这样，怎么做？

我知道您可以使用否定来匹配“除 a 之外的任何内容`}`”。但这不是我的本意。假设我希望能够匹配字符串`{ab}c}`。在这种情况下，我想要的标记是开头`{`、中间字符串`ab}c`和结尾`}`。这是一个人为的示例，但在使用嵌套表达式（如`{a b {c d}}`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:04:49.690

[Treetop 是Parsing Expression Grammar](http://en.wikipedia.org/wiki/Parsing_expression_grammar)解析器的一个实现。PEG 的优点之一是它们结合了灵活性、速度和内存要求。然而，这种平衡行为有一些权衡。

引用维基百科文章：

> 零个或多个、一个或多个和可选运算符分别消耗其子表达式 e 的零个或多个、一个或多个或零个或一个连续重复。然而，与上下文无关文法和正则表达式不同的是，***这些运算符总是表现得很贪婪***，尽可能多地消耗输入并且***从不回溯***。[...] 表达式`(a* a)`总是会失败，因为第一部分`(a*)`永远不会留下任何 a 供第二部分匹配。

（强调我的。）

简而言之：虽然某些 PEG 运营商可以回溯以尝试采取另一条路线，但`+`运营商不能。

相反，为了匹配嵌套的子表达式，您希望在分隔的子表达式（首先检查）后跟非表达式字符之间创建一个交替。类似（未经测试）：

```
grammar TestGrammar
  rule open_close
    '{' contents '}'
  end
  rule contents
    open_close / non_brackets
  end
  rule non_brackets
    # …
  end
end 
```

# java - 将 Maven 项目导入 Eclipse 后的错误

> ID：12927213
> 
> 赞同：1
> 
> 时间：2012-10-17T04:38:45.367
> 
> 标签：java, eclipse, maven

我将一个 Maven 项目导入 Eclipse。我能够从命令行部署它。在 Eclipse 中，它充满了红色 X。我已经清理了项目，更新了配置并运行了以下命令：

`mvn -Declipse.workspace=<pathtoworksapce> eclipse:add-maven-repo`

我仍然有同样的问题。该项目依赖于另一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:03:08.343

我最终做的是删除 Eclipse 中的所有项目，但不删除源文件。然后，我没有直接将代码导入为 Maven->Check out as Maven Projects with SCM，而是选择了 Existing Maven Project 并从我的本地机器导入了代码。这消除了错误，但是当我右键单击代码并选择“打开声明”时，我会得到错误：无法打开编辑器：文件不存在“所以我再次删除了所有项目，这次我删除了所有“.project”文件并重复导入现有的Maven项目。所以现在没有红色X（依赖问题）并且代码中的查找功能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:02:56.897

转到您的主项目并键入以下内容：

**mvn install
mvn eclipse:eclipse**

之后，导入您的项目。您还可以安装**m2eclipse**以获得更好的支持。如果您使用 gwt 或任何其他具有自定义 maven 执行的框架，您还应该在 Eclipse 中安装插件。

# c - 系统调用返回值和errno

> ID：12927216
> 
> 赞同：3
> 
> 时间：2012-10-17T04:39:00.833
> 
> 标签：c, linux, operating-system, system-calls, systems-programming

我在我的程序中使用以下系统调用：

```
recvfrom
sendto
sendmsg 
```

从上面提到的每个系统调用中，我检查它是否在没有任何中断的情况下完成，如果它被中断，我会重试。

前任：

```
recvagain:     
    len = recvfrom(fd, response, MSGSIZE, MSG_WAITALL, (struct sockaddr *)&from, &fromlen);
    if (errno == EINTR) {
           syslog(LOG_NOTICE, "recvfrom interrupted: %s", strerror(errno));
           goto recvagain;
    } 
```

这里的问题是每次失败时我是否需要将 errno 值重置为 0。或者如果recvfrom() 成功，它是否将errno 重置为0？

recvfrom() 手册页说：

> 成功完成后，recvfrom() 以字节为单位返回消息的长度。如果没有消息可以接收并且对等方已经执行了有序关闭，recvfrom() 返回 0。否则该函数返回 -1 并设置 errno 以指示错误。

sendto 和 sendmsg 的情况相同。

我现在无法真正检查这一点，因为我无权访问服务器客户端设置。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T04:44:22.833

`recvfrom` returns `-1` if it is interrupted (and sets `errno` to `EINTR`). Therefore, you should just check `len`:

```
if(len == -1) {
    if(errno == EINTR) {
        syslog(LOG_NOTICE, "recvfrom interrupted");
        goto recvagain;
    } else {
        /* some other error occurred... */
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T04:54:47.740

成功的`errno`系统调用可能不会改变伪“变量”。所以你可以在你的之前清除它`recvfrom`，或者在`len<0`测试它的值的时候清除它。

有关更多信息，请参见[errno(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)手册页。

实际上，正如 Robert Xiao (nneonneo) 评论的那样，您不应该`errno`在系统调用失败时编写并测试它（在这种情况下，C 函数 -eg `recvfrom`etc...- 包装该系统调用会`errno`在返回 -1 之前编写）。

# java - 我有一个数组列表，我在其中验证特定对象是否存在，但即使它存在，它也总是返回 false

> ID：12927224
> 
> 赞同：-1
> 
> 时间：2012-10-17T04:39:42.057
> 
> 标签：java

嗨，我有一个名为 userdata 的类，它返回 User 类型的 Userarraylist。当我尝试使用 contains 方法检查特定属性是否存在时，它总是返回 false 为什么？

实际上我希望数组列表是通用的，它应该返回在数组列表中设置的对象。

```
String className = data.getUserData().get(0).getClass().getSimpleName();

if(className.equalsIgnoreCase("User")) {
   ArrayList<User> userdata=new ArrayList(); 
   userdata = data.getUserData();
   System.out.println(data.getUserData().contains(u.getUserId())); 

   if(userdata.contains(u.getUserName())) {
      System.out.println(userdata.get(0).getEmailId()); 
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:43:43.190

The ArrayList is of Users while you are checking to see if it contains an ID or String.

```
userdata.contains(u); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T04:44:54.993

问题是，`ArrayList`contains `Objects`，而不是这些对象的 id。

您正在尝试将 与`u.getUserId`列表中的对象进行比较，这不是有效的比较（用户！= int）

**更新**

```
boolean contains = false;
for (User user : userdata) {
    // assuming userID is a number!!
    if(user.getUserId() == u.getUserId()) {
        contains = true;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T04:47:45.763

顺便说一句，您应该使用`instanceof`运算符或`Class.equals`方法，而不是使用简单的名称名称检查是否与某些字符串相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:45:14.097

您不能将列表中的 contains 与`User`具有其属性的对象（即`user.userId`或`user.email`.

最好覆盖类中比较属性的`equals`方法，如下所示：`User`

```
 @Override
 public boolean equals(Object obj) {
      User other = (User) obj;
      if (userId == null) {
         if (other.userId != null)
        return false;
      } else if (!userId.equals(other.userId))
           return false;
      if (userName == null) {
         if (other.userName != null)
            return false;
      } else if (!userName.equals(other.userName))
        return false;
     return true;
    } 
```

然后`contains`用作

```
 userdata.contains(u) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:00:00.893

它应该像 `userdata.get(SOME_INDEX).getUserName.equals(u.getUserName());`

或者，如果您想扫描整个 ArrayList，请在 for 循环中使用此行

```
for (User user : userdata) {

    if(user.getUserName().equals(u.getUserName())) {
        return true;
    }
} 
```

请注意，我假设用户名属性有一个 getter

# android - how to send events from activity to service in android with broadcast receiver

> ID：12927229
> 
> 赞同：1
> 
> 时间：2012-10-17T04:40:24.913
> 
> 标签：android, android-intent, broadcastreceiver, android-service, onclicklistener

I have an activity in my android app that starts a service and it also reacts to button presses. I have a mediaplayer that is instantiated and running in the android service. the plan is to take the button press event in the activity and transmit that information to the service that is running media player in it. That way the pause button press will send the button press event info to the service and in the service the pause method for media player will be called.

Two ideas I can think of now, the first is create a broadcast receiver class and register the button presses in that class and send them to the service with an intent extra. the second idea is to make a nested anonymous inner class of the broadcast receiver type and handle that inside of the service.

What is the best way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-28T06:42:20.340

只要您想传递数据，只需调用 startService(..) 即可。该服务将第一次运行，但下一次调用只会触发新的 onStartCommand() 调用以及您传递的新附加内容。

# ruby - Ruby Watir 不推荐使用的方法

> ID：12927230
> 
> 赞同：2
> 
> 时间：2012-10-17T04:40:26.720
> 
> 标签：ruby, watir

最近在安装 Ruby & Watir 以查看该公司的 Web 自动化项目时，我发现许多被调用的方法已被弃用。我正在努力寻找关于将代码更改为什么的良好参考。

是否有很好的参考（已经搜索了很多 watir 站点/手册/常见问题解答，但并没有真正找到要使用的内容 - 特别是对于单选按钮检查是否设置）。除非有人可以确认以下内容。

改变：

```
browser = Watir::Browser.start(strURL)
browser.waitForIE 
```

到：

```
browser = Watir::Browser.new
browser.goto strURL
browser.wait 
```

改变：

```
.select_list(:id, strHtmlId).getSelectedItems[0].to_s 
```

到：

```
select_list(:id, strHtmlId).value 
```

改变：

```
radio(:id => strHtmlId).isSet? 
```

到：

```
radio(:id => strHtmlId).set? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:49:43.933

我刚刚遇到了 watir-classic 更改日志：

[http://rubydoc.info/gems/watir-classic/3.2.0/file/CHANGES](http://rubydoc.info/gems/watir-classic/3.2.0/file/CHANGES)

至少突出显示您提到的最后两个更改似乎做得很好（请参阅版本 1.6.5 更改）。请注意，您之前可能使用的 watir gem 现在是 watir-classic gem。

关于您提到的第一个更改，这实际上是由于最近的 watir 4.0 版本，它现在是 watir-classic 和 watir-webdriver gem 的前端。您可以更改您提到的代码，或者您可以`require 'watir-classic'`代替`require 'watir'`. 我在 Browser::attach 方法中遇到了同样的问题，并在我的[博客](https://jkotests.wordpress.com/2012/10/17/browserattach-method-undefined-in-watir-4-0/)上简要介绍了它。

# java - apply java generic in gwt editor

> ID：12927231
> 
> 赞同：5
> 
> 时间：2012-10-17T04:40:32.383
> 
> 标签：java, gwt, generics, editor

I am using gwt editor framework to bind form in gwt. I was able to bind form successfully, but my problem is I need to write too many code. I think using generic will shorten my code but I couldn't do it.

The code for `EditVendorWorkflow` is almost same, the only difference is this two line

```
interface Driver extends  SimpleBeanEditorDriver<Vendor, VendorEditor>{}
private VendorEditor editor; 
```

Example, If I write a `PersonEditor` the corresponding `EditPersonWorkflow` code will have

```
interface Driver extends  SimpleBeanEditorDriver<Person, PersonEditor>{}
private PersonEditor editor; 
```

So basically there is a repetition.

Any Help is appreciable.

```
public class EditVendorWorkflow{
      interface Driver extends  SimpleBeanEditorDriver<Vendor, VendorEditor>{}

      Driver driver = GWT.create(Driver.class);

      private VendorEditor editor;

      void edit(Vendor p) {
        driver.initialize(editor);
        driver.edit(p);
      }

      void save() {
        Vendor edited = driver.flush();
        //doSomethingWithEditedVendor(edited);

      }

    public void initialize(VendorEditor editor) {
        this.editor = editor;
    }
}

public class VendorEditor extends Composite implements Editor<Vendor> {

    private static VendorEditorUiBinder uiBinder = GWT
            .create(VendorEditorUiBinder.class);
    @UiField Button save;
    @UiField TextBox address;
    @UiField TextBox contactName;
    @UiField ValueBoxEditorDecorator<String> contactMobileNo;
    @Path("department.name")
    @UiField TextBox deptName;
    interface VendorEditorUiBinder extends UiBinder<Widget, VendorEditor> {
    }

    private final EditVendorWorkflow vendorDriver;
    public VendorEditor(Vendor p) {
        initWidget(uiBinder.createAndBindUi(this));
        vendorDriver = GWT.create(EditVendorWorkflow.class);
        vendorDriver.initialize(this);
        vendorDriver.edit(p);
    }

    @UiHandler("save")
    void onSaveClick(ClickEvent event) {
        vendorDriver.save();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:58:51.857

以下几行应该可以完成这项工作：

```
public class EditWorkflow<O, E extends Editor<O>> {

    SimpleBeanEditorDriver<O, E> driver; 

    private E editor;

    void edit(O p) {
        driver.initialize(editor);
        driver.edit(p);
    }

    void save() {
        O edited = driver.flush();
        //doSomethingWithEditedObject(edited);
    }

    public void initialize(E editor, SimpleBeanEditorDriver<O, E> driver) {
        this.editor = editor;
        this.driver = driver;
    }

} 
```

但不幸的是，`GWT.create()`只能接受一个不能泛型的类文字。所以，我想你仍然必须在`Driver`某个地方创建你的接口。我添加了一个`driver`参数，`initialize()`以便您可以`GWT.create()`在外部调用并将结果传入。

如果您有一些特定于`Vendor`or的代码，`Person`则可以将它们抽象为抽象方法，例如

```
protected abstract void doSomethingWithEditedObject(O object); 
```

并在`EditWorkflow`.

如果您继续创建 的子类`EditWorkflow`，则可以将`Driver`接口放在它们各自的`EditWorkflow`类中

```
public class EditVendorWorkflow extends EditWorkflow<Vendor, VendorEditor> {

    interface Driver extends  SimpleBeanEditorDriver<Vendor, VendorEditor>{}

    public void initialize(VendorEditor editor) {
        super.initialize(editor, GWT.create(Driver.class));
    }

    @Override
    protected void doSomethingWithEditedObject(Vendor object) {
        // Code specific to class Vendor...
    }
} 
```

# c - Caesars cypher issue

> ID：12927236
> 
> 赞同：-2
> 
> 时间：2012-10-17T04:40:47.257
> 
> 标签：c

I am having trouble with getting this to work I need pointed in the right direction. The user will input a command line integer to determine how many places the characters will be rotated. My problem is that I want all lower case and upper case to stay the same case along with keeping spaces and special characters untouched, only rotating the letters by the specified integer. I need to make sure that for example: the integer set is 1 and the character "Z" is entered in the string to be encrypted it needs to wrap back around to "A" instead of going to the next ASCII character "[" I have been trying to use the "%" operator but I might be using it wrong. I am not looking for someone to write the entire code for me and I know I could find my answer by looking at the source code of a working program but I am trying to figure as much of this out by myself but right now I am stumped and need a small bit of help. Thanks!

I finally got it to work I had the entire operation wrong this is what worked for me.

```
char encrypt = ('A' + ( ( (input[i] - 'A') + key ) % 26)); 
```

Before I was trying

```
char encrypt (input[i] + key) % 26; 
```

Thanks for the fast answers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:45:56.763

虽然有很多方法可以实现您想要的，但我建议您研究`java.util.Map`. 确定这是加密`Map`还是解密，并将*输入*`Map`字符“放置”为密钥，将输出字符“放置”为值。然后，当您需要翻译时，您只需遍历每个要翻译的字符并组装输出值。注意未映射的值（因为它们将在查找时返回 null）。

# ruby-on-rails - Correct HAML for linking an image to another page in my Ruby on Rails app

> ID：12927237
> 
> 赞同：1
> 
> 时间：2012-10-17T04:41:00.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml

Trying to figure out how to use haml "link_to" with Ruby code in order to make an image on a page link to another page on the site. If possible I'd like to keep the nav static and fade the two pages in and out via a "Forward" and "Back" image. Any ideas? Just want to get the linking right first and then can go in and figure out the JQuery. Currently have the code below...

Thanks!!

```
 .pad-bottom50
    %div{:style => "position: absolute; top: 620px; left: 830px;"}
        =link_to (image_tag(@page.photos[1].image_url(:full), :id => "#fade1", :class => "animated") if @page.photos[1].image? 
    .pad-top20 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:56:45.297

link_to 的语法是

```
=link_to link_text, link_url, options 
```

你错过了link_url。IE。单击图像时应将用户带到的位置。

这是一个工作示例

```
=link_to(image_tag("http://goo.gl/FZUI3"), "http://en.wikipedia.org/wiki/Nyan_Cat", :id => "#fade1", :class => "animated") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:24:01.023

您应该首先查看 link_to 标记的参数。您将了解这些参数以及您可以使用这些参数做什么。

检查此链接 [api doc](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)

您可以检查[API Ruby on Rails中可用的方法的所有参数](http://api.rubyonrails.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T04:47:03.613

您没有为链接指定 src。语法是：

```
link_to "Link Text", "/path-to-link" 
```

要在其中放置图像：

```
image_tag "path-to-image"
link_to(image_tag("path-to-image"), "/path-to-link") 
```

如果 @page.photos[1].image?

```
link_to(image_tag(image_tag(@page.photos[1].image_url(:full), :id => "#fade1", :class => "animated")), "/bacon", :id => "bacon", :class => "bacon") if @page.photos[1].image? 
```

# api - TokBox OpenTok Alternative?

> ID：12927248
> 
> 赞同：16
> 
> 时间：2012-10-17T04:42:30.330
> 
> 标签：api, opentok, videochat, tokbox, video-conferencing

I'd like to offer video chat on my website and was wondering if anyone can recommend an API/service that'll let me do so. I'm familiar with OpenTok, but not happy that it uses Flash. Also, the audio tends to have a lot of noise/feedback - unless you are wearing a headset.

Suggestions?

**EDIT:**

I'm using it for P2P right now, but do want to do group video chat in the future.

Flash is one of my primary concerns. I noticed Flash sometimes crashes when I'm using OpenTok. Though Flash crashes other times, too -- it seems to be more frequent when using it for OpenTok. I understand Flash has its benefits (the big one for me is that I can almost count on my users having it), but I'd like to explore other options if possible. Flash is supposed to be a dying technology?

Audio is the other major concern. There is generally an echo going on and a noticeable delay. Using the same set up (Internet connection, computer, mic/speakers, etc.) and comparing it to Skype, it's obvious that Skype is far more superior.

The player is my final concern. Here are the things I don't like about it:

*   I can't remove the top left icon that links to OpenTok. Thus, this isn't something I can truly white label.
*   The player comes with volume control, but not video control (e.g. to stop publishing, to stop subscribing). Instead, I am forced to implement my own via the API. Though the API makes it fairly easy to do, I don't think I should have to. Video control should be provided, just like volume control.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T00:01:26.897

OpenTok for WebRTC 应该可以解决您上面提到的所有问题。在此处查找更多信息：http: [//tokbox.com/opentok/docs/concepts/WebRTC.html](http://tokbox.com/opentok/docs/concepts/WebRTC.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:44:32.060

您可能想查看 TenHands ( [http://www.tenhands.net](http://www.tenhands.net) ) 提供的 API，看看这是否满足您的需求。整合应该是相当直接的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-18T18:55:44.140

现在还有 EasyRTC ( [easyrtc.com](https://easyrtc.com) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T05:47:28.957

澄清格里所说的。您可以使用 EasyRTC 构建和对等对等视频会议应用程序。使用easyrtc Lib，您可以在短时间内轻松进行群聊[视频+音频+文本+文件传输]，只需查看他们的演示。他们已经提供了一个很好的演示应用程序列表，easyrtc lib 也有据可查。请注意，easyrtc 不使用 flash 他们使用 WebRTC。对于视频控制器，您可以轻松地将 HTML5 视频控制器嵌入标签中。

谢谢快乐编码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-15T20:29:42.027

看来Twilio最近有非常好的进展：

[https://www.twilio.com/video](https://www.twilio.com/video)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-07T02:37:37.507

这是 VSee 定义的 API 提供者的“比较”列表：

*   [http://vsee.com/api](http://vsee.com/api)

不……我在 VSee 中没有任何既得利益。

# c# - 用于选择范围的 SQL 查询

> ID：12927252
> 
> 赞同：0
> 
> 时间：2012-10-17T04:42:56.930
> 
> 标签：c#, excel

我需要编写一个 sql 查询（在 c# 中）以仅在从 C19 开始**的“C”列中选择 excel 工作表数据。**但我无法指定结束单元格编号，因为更多数据被添加到列中。因此我需要知道如何指定列的结尾。请帮忙。我已经提到了我正在使用的查询。我附上了我正在使用的excel表格的图像！我附上了输出datagridview！

```
//Generte Oracle Datatable
            OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;"
            + @"Data Source=" + textBox1.Text + ";" + @"Extended Properties=""Excel 12.0 Macro;HDR=Yes""");
            conn.Open();

            OleDbCommand ccmd = new OleDbCommand(@"Select * From [SPAT$]", conn);
            OleDbDataAdapter adapter = new OleDbDataAdapter(ccmd);                     
            DataTable Oracle = new DataTable();
            adapter.Fill(Oracle);

            for (int y = 19; y < Oracle.Rows.Count; y++)
            {
                var value = Oracle.Rows[y][3].ToString();           
            }   
            dataGridView1.DataSource = Oracle.AsEnumerable().Where((row, index) => index > 3).CopyToDataTable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:53:51.020

第一种方法，使用 OLE 查询：

```
OleDbCommand ccmd = new OleDbCommand(@"Select * From [SPAT$]", conn);
OleDbDataAdapter da = new OleDbDataAdapter(ccmd);
DataTable dt = new DataTable();
da.Fill(dt);

for (int i = 19; i < dt.Rows.Count; i++)
{
    var value = dt.Rows[i][3].ToString(); // here 3 refers to column 'C'
} 
```

**对于基于标准的 DataTable**

```
dataGridView1.DataSource = dt.AsEnumerable()
                          .Where((row, index) => index >= 19)
                          .CopyToDataTable(); 
```

**仅适用于“C”列**

```
dataGridView1.DataSource = dt.AsEnumerable()
                      .Where((row, index) => index >= 19)
                      .Select(t => t[3].ToString()).ToList(); 
```

第二种方法，使用 Excel COM 对象：

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application xlApp = new Excel.Application();
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open("path to book");
Excel.Worksheet xlSheet = xlWorkbook.Sheets[1]; // get first sheet
Excel.Range xlRange = xlSheet.UsedRange; // get the entire used range

int numberOfRows = xlRange.Rows.Count;

List<string> columnValue = new List<string>();
// loop over each column number and add results to the list

int c = 3; // Column 'C'
for(int r = 19; r <= numberOfRows; r++)
{
    if(xlRange.Cells[r,c].Value2 != null) // ADDED IN EDIT
    {
        columnValue.Add(xlRange.Cells[r,c].Value2.ToString());
    }
} 
```

# android - sdk 兼容性问题

> ID：12927253
> 
> 赞同：0
> 
> 时间：2012-10-17T04:43:01.033
> 
> 标签：android, sdk, compatibility

我正在开发一个版本为 3.2 的应用程序，它包含一个用于我的封面流的画廊小部件。

如果我在 google play 上上传应用程序，运行 3.2 及更高版本（可能是 4）的设备是否能够运行它？因为在 4.0 中，画廊小部件已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:49:42.067

`If I upload the app on google play, will a device running on 3.2 and above (maybe 4) be able to run it?`

是的，它将完美运行，没有问题。

`the gallery widget has been deprecated.`

弃用意味着不再使用它。因为它们提供了许多其他有效的方法来实现相同的功能。但是，如果您使用它们，它将完美地工作。

# android - Facebook search implementation in android

> ID：12927254
> 
> 赞同：0
> 
> 时间：2012-10-17T04:43:02.147
> 
> 标签：android, facebook

I need to search facebook user by using his name or mail-id just like how it works in facebook search box. Any API's available for that.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:37:10.793

我认为您应该先查看有关 android 的 facebook 开发人员文档以及 SDK 中提供的示例

[https://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

它将帮助您了解如何使用 facebook-android-sdk

这是代码

```
 Bundle params = new Bundle();
    params.putString("q", "Your Name");
    params.putString("type", "user");//fix
String resp = fb.request("search", params, "GET");//call the request function of android sdk 2.X, ensure you have well setup the library and logged 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:01:07.910

您将在此链接获得大量搜索选项：[https](https://developers.facebook.com/docs/reference/api/) ://developers.facebook.com/docs/reference/api/ 。在此页面上，您需要向下滚动一点，直到找到**Searching**标题。

我个人不知道有任何使用电子邮件地址进行搜索的规定。

# ios - Xcode Build Script（Build Phases->Run Script）根据用户名（User）增加构建版本

> ID：12927255
> 
> 赞同：7
> 
> 时间：2012-10-17T04:43:19.990
> 
> 标签：ios, xcode, bash, unix, build

编译项目时，当系统用户名匹配时，此脚本应将 Xcode 项目的 Build Version 加一。请记住，这些只是 Target->Build Phases->Run Script in Xcode 中脚本（不是 Applescript、Python 或 Perl）中的 Unix 命令。

我已经在终端中完成了“echo $USER”。这可以很好地打印登录用户的用户名，它与我在第二个代码块的条件语句中放置的字符串相同。

第一个代码块有效。第二个，它添加了条件语句，没有。

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

```
#!/bin/bash
username=$USER
if [ username == "erik" ]; then
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"
fi 
```

**语法问题：**
解析 $USER（区分大小写）
if 语句中右括号后的分号
Then 语句与 if 语句在同一行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:45:22.177

您可以在 Log Navigator 中看到脚本日志，使用您的脚本我遇到了以下问题：

![在此处输入图像描述](../Images/3ace1b01041b87433bdb9b7156f70816.png)

我相信默认比较是区分大小写的，为了使其不敏感，您可以在比较之前将用户名更改为大写/小写：

```
if [ `echo $USER | tr [:lower:] [:upper:]` = "USERNAME" ]; then
echo "Got user check"
fi 
```

如您所见，我将 $USER 移至条件以避免额外的 var 使用和脚本失败。

block 处的分号`if-then`是正常的，请查看[手册](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/bash.1.html)页。`then`如果这样更方便您阅读，单词可能会移至新行。

# javascript - Float a div on a textarea?

> ID：12927258
> 
> 赞同：-4
> 
> 时间：2012-10-17T04:43:40.227
> 
> 标签：javascript, jquery

![enter image description here](../Images/6f3b288ff16a4c56d2ff3ca2bb347a8f.png)

I have a div which has this list of suggestions. But i need to allocate it at the caret position of the textarea. Is this possible if yes, help me to do it.

```
function findOffsetPosition(obj) {
    var posX = obj.clientLeft; var posY = obj.clientTop;
    while (obj.offsetParent) {
        if (obj == document.getElementsByTagName('body')[0]) { break }
        else {
            posX = posX + obj.offsetParent.offsetLeft;
            posY = posY + obj.offsetParent.offsetTop;
            obj = obj.offsetParent;
        }
    }
    var posArray = [posX, posY]
    return posArray;
} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-17T04:59:30.770

这是一个可以帮助您入门的帖子

[https://stackoverflow.com/a/7745998/1354978](https://stackoverflow.com/a/7745998/1354978)

而这家伙的jsfiddle作品+1

[http://jsfiddle.net/gilly3/6SUN8/](http://jsfiddle.net/gilly3/6SUN8/)

# java - The resource required (servlet) not available

> ID：12927264
> 
> 赞同：1
> 
> 时间：2012-10-17T04:44:24.737
> 
> 标签：java, jsp, servlets

I have the following problem when trying to use the `login.jsp` I have the following code in the login

```
<%@ include file="/jsp/include.jsp"%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script>
    function sendForm() {
        document.formLogin.submit();
    }
</script>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Example :: Spring Application</title>
</head>
<body>

    <div class="container">
        <form class="bs-docs-example form-horizontal"
            action="ServletValidation" name="formLogin" id="formLogin"
            method="post">

            <legend>Login</legend>
            <div class="control-group">
                <label for="inputUsername" class="control-label">Email</label>

                <div class="controls">
                    <input type="text" id="inputUsername">
                </div>
            </div>
            <div class="control-group">
                <label for="inputPassword" class="control-label">Password</label>
                <div class="controls">
                    <input type="password" id="inputPassword">
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <label class="checkbox"> <input type="checkbox">
                        Remember me
                    </label>
                    <button class="btn" type="submit" action="sendForm();">Sign
                        in</button>
                </div>
            </div>
        </form>
    </div>

</body>
</html> 
```

And the following text in the `web.xml`

```
 <servlet>
    <description></description>
    <display-name>ValidationServlet</display-name>
    <servlet-name>ValidationServlet</servlet-name>
    <servlet-class>bt.servlet.ValidationServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ValidationServlet</servlet-name>
    <url-pattern>/ValidationServlet</url-pattern>
  </servlet-mapping> 
```

But once I click the button for submit it returns:

> State HTTP 404 - /bt/jsp/ServletValidation
> 
> Description The resource required (/bt/jsp/ServletValidation) is not available.

The folder structure is the following:

```
+bt
    -src
    -WebContent
         -jsp
         -resources
         -WEB-INF
            -classes
            *web.xml
         *index.jsp 
```

The problem I'm finding is why is it sending to that URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:50:07.433

有两个问题：

*   您的 servlet 映射到 URL `/ValidationServlet`，并且您的表单将操作设置为`ServletValidation`.

*   也许您`login.jsp`的 servlet 映射不在同一级别。

最好的解决方案是设置表单的操作以映射映射到您的 servlet 的完整 URL。这可以通过以下方式实现`Request#getContextPath()`：

```
<form action="${request.contextPath}/ValidationServlet" ...>
    <!-- content... -->
</form> 
```

如果你的项目中没有使用 JSTL，那就去做吧。您应该避免在您的 jsp 中使用 scriptlet（那些`<% ... %>`在 JSP 中包含讨厌的 Java 代码的标签）。但如果你不这样做，那么你应该尝试以下方法：

```
<form action="<%=request.getContextPath()%>/ValidationServlet" ...>
    <!-- content... -->
</form> 
```

不过，第一种方法是最好的选择。

更多信息：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/q/3177733/1065197)
*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:52:48.447

只需更改 web.xml 文件

```
<url-pattern>/ServletValidation</url-pattern> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:49:33.327

ServletValidation 与 ValidationServlet 不同。

# dart - Pub 安装失败，包“html5lib”没有 pubspec.yaml 文件

> ID：12927265
> 
> 赞同：2
> 
> 时间：2012-10-17T04:44:53.103
> 
> 标签：dart, html5lib, dart-pub

我创建了一个简单的项目。这是我的 pubspec.yaml

```
name:  testapp
description:  test application
dependencies: 
  html5lib: 0.0.12 
```

现在我得到这个错误

```
Pub install fail, Resolving dependencies...
Package "html5lib" doesn't have a pubspec.yaml file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:31:03.470

我猜你在windows上？Dart 似乎在项目中的包文件夹和包的存储位置之间设置了快捷方式（硬目录链接？）。因此，如果您从 Eclipse 中删除包目录，它将丢弃存储实际包的文件夹。

在 Windows 7 上，该文件夹是：

> C:\Users\[用户]\AppData\Roaming\Pub\

继续并删除其内容并`pub install`再次运行。

如果您开始收到有关 UnitTest 或其他核心库的错误，您可能需要重新下载 Dark-SDK（或 dart 编辑器）并替换它。

# sql - SQL 查询中分组 COUNT 的总和

> ID：12927268
> 
> 赞同：82
> 
> 时间：2012-10-17T04:45:10.397
> 
> 标签：sql

我有一个包含 2 个字段的表：

```
身份证名称
-- ------
1 阿尔法
2 测试版
3 测试版
4 测试版
5 查理
6查理

```

我想按名称对它们进行分组，使用“count”和一行“SUM”

```
名称计数
-------- -----
阿尔法 1
测试版 3
查理 2
总和 6

```

我将如何编写查询以在表下方添加 SUM 行？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-17T04:50:56.180

```
SELECT name, COUNT(name) AS count
FROM table
GROUP BY name

UNION ALL

SELECT 'SUM' name, COUNT(name)
FROM table 
```

**输出：**

```
name                                               count
-------------------------------------------------- -----------
alpha                                              1
beta                                               3
Charlie                                            2
SUM                                                6 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-07-15T13:43:52.010

```
SELECT name, COUNT(name) AS count, SUM(COUNT(name)) OVER() AS total_count
FROM Table GROUP BY name 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-17T04:50:54.513

没有指定您正在使用哪个 rdbms

看看这个演示

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/40708/2/0)

```
SELECT Name, COUNT(1) as Cnt
FROM Table1
GROUP BY Name
UNION ALL
SELECT 'SUM' Name, COUNT(1)
FROM Table1 
```

也就是说，我建议您的表示层而不是数据库添加总数。

这更像是[使用 ROLLUP 汇总数据的 SQL SERVER 版本](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/40708/9/0)

```
SELECT CASE WHEN (GROUPING(NAME) = 1) THEN 'SUM'
            ELSE ISNULL(NAME, 'UNKNOWN')
       END Name, 
      COUNT(1) as Cnt
FROM Table1
GROUP BY NAME
WITH ROLLUP 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-17T05:10:35.397

尝试这个：

```
SELECT  ISNULL(Name,'SUM'), count(*) as Count
FROM table_name
Group By Name
WITH ROLLUP 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-02-26T06:17:41.817

这里的所有解决方案都很棒，但不一定可以为旧的 mysql 服务器实现（至少在我的情况下）。所以你可以使用子查询（我认为它不那么复杂）。

```
 select sum(t1.cnt) from 
        (SELECT column, COUNT(column) as cnt
            FROM
            table 
            GROUP BY 
            column
            HAVING 
            COUNT(column) > 1) as t1 ; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-21T16:09:34.187

请按以下方式运行：

```
Select sum(count) 
  from (select Name, 
               count(Name) as Count 
          from YourTable
      group by Name);  -- 6 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-06-08T20:29:42.793

我解释这个问题的方式是需要每组答案的小计值。小计结果非常容易，使用`PARTITION`：

```
SUM(COUNT(0)) OVER (PARTITION BY [Grouping]) AS [MY_TOTAL] 
```

这是我完整的 SQL 调用的样子：

```
SELECT MAX(GroupName) [name], MAX(AUX2)[type],  
COUNT(0) [count], SUM(COUNT(0)) OVER(PARTITION BY GroupId) AS [total]
    FROM [MyView]
  WHERE Active=1 AND Type='APP' AND Completed=1
    AND [Date] BETWEEN '01/01/2014' AND GETDATE()
    AND Id = '5b9xxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx' AND GroupId IS NOT NULL
  GROUP BY AUX2, GroupId 
```

从这里返回的数据如下所示：

```
name    type    count   total
Training Group 2    Cancelation 1   52
Training Group 2    Completed   41  52
Training Group 2    No Show 6   52
Training Group 2    Rescheduled 4   52
Training Group 3    NULL        4   10535
Training Group 3    Cancelation 857 10535
Training Group 3    Completed   7923    10535
Training Group 3    No Show 292 10535
Training Group 3    Rescheduled 1459    10535
Training Group 4    Cancelation 2   27
Training Group 4    Completed   24  27
Training Group 4    Rescheduled 1   27 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-17T04:51:55.013

您可以使用联合来连接行。

```
select Name, count(*) as Count from yourTable group by Name
union all
select "SUM" as Name, count(*) as Count from yourTable 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-15T12:20:16.013

对于 Sql server 你可以试试这个。

```
SELECT ISNULL([NAME],'SUM'),Count([NAME]) AS COUNT
FROM TABLENAME
GROUP BY [NAME] WITH CUBE 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-24T06:50:59.583

```
 with cttmp
  as
  (
  select Col_Name, count(*) as ctn from tab_name group by Col_Name having count(Col_Name)>1
  )
  select sum(ctn) from c 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-11-02T17:32:19.290

您可以使用 ROLLUP

```
select nvl(name, 'SUM'), count(*)
from table
group by rollup(name) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-17T04:50:05.853

您可以尝试按名称分组并计算该组中的 ID。

```
SELECT name, count(id) as COUNT FROM table group by name 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-17T04:58:01.360

用它作为

```
select Name, count(Name) as Count from YourTable
group by Name
union 
Select 'SUM' , COUNT(Name) from YourTable 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-14T19:11:16.713

我正在使用 SQL 服务器，以下内容应该适合您：

select cast(name as varchar(16)) as 'Name', count(name) as 'Count' from Table1 group by Name union all select 'Sum:', count(name) from Table1

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-08T12:34:50.617

我`having count(*) > 1`也要求。因此，在参考了上述一些查询后，我编写了自己的查询

句法：

```
select sum(count) from (select count(`table_name`.`id`) as `count` from `table_name` where {some condition} group by {some_column} having count(`table_name`.`id`) > 1) as `tmp`; 
```

例子：

```
select sum(count) from (select count(`table_name`.`id`) as `count` from `table_name` where `table_name`.`name` IS NOT NULL and `table_name`.`name` != '' group by `table_name`.`name` having count(`table_name`.`id`) > 1) as `tmp`; 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2016-01-21T05:04:20.187

查询后，在下面运行以获取总行数

```
select @@ROWCOUNT 
```

* * *

## 回答 #17

> 赞同：-6
> 
> 时间：2016-10-24T07:45:35.017

select sum(s) from (select count(Col_name) as s from Tab_name group by Col_name with count(*)>1)c

# php - 循环时我不能在里面创建 num 行

> ID：12927269
> 
> 赞同：0
> 
> 时间：2012-10-17T04:45:10.537
> 
> 标签：php, while-loop, mysql-num-rows

我有两个表 第一个表：对于产品 第二个表：对于类别

我想像这样在浏览器中显示

类别1 (20) 类别2 (5) 类别3 (3)

```
$select_sub_cat = mysql_query("SELECT * FROM sub_cat WHERE ct_id='".$row_main['id']."' ");
while($row_sub = mysql_fetch_array($select_sub_cat))
{
  $select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."' ");
  $row_num_sub = mysql_num_rows($select_num_sub);
  $smarty->assign('numb',$row_num_sub);

 $sub_cats[] = $row_sub;
}
$smarty->assign('sub_cats',$sub_cats); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:55:52.810

尝试

```
$select_sub_cat = mysql_query("SELECT * FROM sub_cat WHERE ct_id='".$row_main['id']."' ");
while($row_sub = mysql_fetch_array($select_sub_cat))
{
  $select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."' ");         
 $sub_cats[] = $row_sub;
 $sub_cats['count']=mysql_num_rows($select_num_sub);
}
$smarty->assign('sub_cats',$sub_cats); 
```

然后打电话给你的聪明人：

> {$sub_cats.name} ({$sub_cats.count}) // $sub_cats.name 应该是类别的“名称”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:51:29.540

尝试这个：

```
$select_sub_cat = mysql_query("SELECT * FROM sub_cat WHERE ct_id='".$row_main['id']."' ");
while($row_sub = mysql_fetch_array($select_sub_cat))
{
  $select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."' ");
  $smarty->assign('numb',$row_num_sub);

 $sub_cats[] = $row_sub;
 $sub_cats['count']=mysql_num_rows($select_num_sub);
}
$smarty->assign('sub_cats',$sub_cats); 
```

# c++ - 如何使用 QT 获取计算机的本地 IP 地址

> ID：12927273
> 
> 赞同：6
> 
> 时间：2012-10-17T04:45:34.277
> 
> 标签：c++, qt, ip, ipconfig

我正在尝试在 QT 中获取计算机的本地 IP 地址（IPV4）。我找到了以下代码：

```
QNetworkInterface *inter = new QNetworkInterface();
QList<QHostAddress> list;
list=inter->allAddresses();
QString str;

for (int i = 0; i < list.size(); ++i) {
     str = list.at(i).toString();
} 
```

通过 for 循环，我可以看到 中有许多值（ip）`list`，其中一个是我通过`ipconfig`在命令窗口中输入获得的实际本地 IP 地址。

我的问题是如何区分 IP 地址和所有 IP 地址`list`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T05:53:19.030

PC 通常有多个 IP 地址。没有真正的“本地”IP 地址。连接到某个远程主机时使用的 IP 地址至少取决于本地路由表（它可能随时发生巨大变化，例如在启动/停止 VPN 软件时）。

在我看来，将 IP 视为仅在远程网络的上下文中有效更有意义，例如“这是我在 Internet 上连接到该主机时使用的本地 IP 地址；但这是我用来通过我公司的 VPN 连接到该主机的本地 IP 地址”。

如果您想找出用于通用 Internet 连接的本地 IP 地址，我所知道的最准确的方法就是对代表性主机（以及具有高可靠性的主机！）进行连接测试

```
QTcpSocket socket;
socket.connectToHost("8.8.8.8", 53); // google DNS, or something else reliable
if (socket.waitForConnected()) {
    qDebug()
        << "local IPv4 address for Internet connectivity is"
        << socket.localAddress();
} else {
    qWarning()
        << "could not determine local IPv4 address:"
        << socket.errorString();
} 
```

注意：上面的例子是阻塞的，如果你的应用有 UI，你可能想重写它以使用信号和槽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T10:14:43.387

我认为，应该尝试几次尝试来增加 GUESS 的机会（无论软件多么聪明，它仍然是一个猜测，它不会涵盖 1% 的配置，这可能是你的情况:-)

我已经结合并扩展了这两种解决方案。首先，我会检查谷歌 DNS，然后检查具有标准网关的本地 IP。假设是：Getaway 具有与以“.1”结尾的地址相同的掩码。我不知道如何获得标准。Qt 中的网关（这将更可靠）。

这是适用于**我的计算机**的代码：

```
 QTcpSocket dnsTestSocket;   
    QString localIP="127.0.0.1";    //fall back
    QString googleDns = "8.8.8.83";  //try google DNS or sth. else reliable first
    dnsTestSocket.connectToHost(googleDns, 53);
    if (dnsTestSocket.waitForConnected(3000)) 
    {
        localIP = dnsTestSocket.localAddress().toString();
    } 
    else 
    {
        foreach (const QHostAddress &address, QNetworkInterface::allAddresses())
        {
            QString guessedGatewayAddress = address.toString().section( ".",0,2 ) + ".1";

            if (address.protocol() == QAbstractSocket::IPv4Protocol 
                && address != QHostAddress(QHostAddress::LocalHost)
                )
            {
                dnsTestSocket.connectToHost(guessedGatewayAddress, 53);
                if (dnsTestSocket.waitForConnected(3000))
                {
                    localIP = dnsTestSocket.localAddress().toString();
                    break;
                }
            }   
        }
    } 
```

# wpf - windows 8弹出位置

> ID：12927274
> 
> 赞同：15
> 
> 时间：2012-10-17T04:45:51.287
> 
> 标签：wpf, windows-8

在将 WPF 应用程序移植到在 VMware 下运行的 Windows 8 实例 (x64) 时，我发现所有弹出窗口都与它们应有的位置不一致。进一步的调查表明，即使对于新创建的项目，这也是一个常见的“问题”。WPF的弹出控件好像改变了左右的意思！可以通过使用 vs 2012 创建一个 wpf 应用程序并在其中放置一些弹出窗口来显示该问题，例如：

```
<Grid Background="Gray">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="129*"/>
        <ColumnDefinition Width="264*"/>
        <ColumnDefinition Width="124*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="30"/>
        <RowDefinition Height="30"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <DockPanel Grid.Row="1" Grid.Column="1" Background="LightGray">
        <Popup StaysOpen="True" IsOpen="True" Grid.RowSpan="2" Placement="Right"  AllowsTransparency="True" >
            <TextBlock Text="Right" Foreground="White" />
        </Popup>
        <Popup StaysOpen="True" IsOpen="True" Grid.RowSpan="2" Placement="Left" AllowsTransparency="True"  >
            <TextBlock Text="Left" Foreground="White" />
        </Popup>
        <Popup StaysOpen="True" IsOpen="True" Grid.RowSpan="2" Placement="Top"  AllowsTransparency="True" >
            <TextBlock Text="Top" Foreground="White" />
        </Popup>
        <Popup StaysOpen="True" IsOpen="True" Grid.RowSpan="2" Placement="Bottom"  AllowsTransparency="True"  >
            <TextBlock Text="Bottom" Foreground="White" />
        </Popup>
    </DockPanel>
</Grid> 
```

应该显示在左侧的弹出窗口实际上显示在右侧，反之亦然，应该在左下角的弹出窗口显示在右下角，等等。

我的问题是：1）这是错误还是功能？2) 如果它是一项功能，如何对代码进行最小的更改，以便它们在 Windows 7 和 Windows 8 中以相同的方式执行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T07:49:43.250

进一步调查显示，控制面板中有一个设置：控制面板->硬件和声音->平板电脑（节点名称可能不完全匹配，因为我使用的是非英文版的 Windows 8）。有一个用户喜欢书写的手的设置。

根据 .net 框架的手册，必须选择“我更喜欢用左手书写”才能将弹出窗口放置在“正确的位置”（不使用上述解决方案）。这个假设根本不正确，至少对于 destop 应用程序！

# uitableview - 如何以编程方式控制 UITableViewCell 样式？

> ID：12927276
> 
> 赞同：0
> 
> 时间：2012-10-17T04:45:56.633
> 
> 标签：uitableview

在使用 StoryBoard 时，我遇到了这种情况，代码如下：

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
//        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text=[[cityArray objectAtIndex:indexPath.row] valueForKey:@"CELL_TEXT"];
    cell.detailTextLabel.text=[[cityArray objectAtIndex:indexPath.row] valueForKey:@"DETAIL_TEXT"]; 
```

我的测试表明，无论我在执行分配时使用 UITableViewCellStyleDefault 或 UITableViewCellStyleSubtitle，上面的最后两行代码都可以工作。

最后两行仅取决于我在 StoryBoard 中的设置（单元格样式是否为字幕）。

现在这是我的问题：如何以编程方式控制单元格的样式，从 UITableViewCellStyleDefault 到 UITableViewCellStyleSubtitle ，反之亦然？

显然，只改变 alloc 是行不通的；而且我也没有找到任何可以设置的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:10:56.763

如果您使用带有原型单元格的情节提要，则该单元格将不会为零。它会一直被创建。要么不要在 Storyboard 中使用原型单元，要么从 Storyboard 分配不同的原型单元。

# java - 似乎无法在没有收到 saxparser 意外令牌错误的情况下解析 android 中的 xml 文件

> ID：12927278
> 
> 赞同：2
> 
> 时间：2012-10-17T04:46:21.517
> 
> 标签：java, android, xml

我一直在努力尝试在一个小测试 android 应用程序中解析一个基本的 xml 文件。

我的代码如下：

```
InputStream is = getResources().openRawResource(R.xml.content);
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
try {
      DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
      Document doc = dBuilder.parse(is,"UTF-8"); //Blows up right here.
      // Bunch more stuff here
} 
```

我的 xml 如下所示：

```
<?xml version="1.0" ?>
<main>
    <background>
        <defintion>This is a test</defintion>
    </background>
</main> 
```

问题是当我尝试解析这个时，我得到一个`org.xml.sax.SAXParseException: Unexpected token (position:TEXT unprintable characters here ...@3:252 in java.io.InputStreamReader@411f3898)`错误。我四处搜索，发现所有其他解决方案似乎都不起作用。

我仔细检查了该文件是否为 UTF-8，并使用 notepad++ 在 UTF-16 和 UTF-8 之间来回更改了它的编码（尝试使用和不使用 BOM），并更新了程序以正确反映这一点，但无论如何我有，我总是得到这个错误。我敢肯定我一定是遗漏了一些非常明显的东西，但无论我尝试什么系列的组合，这总是失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:25:43.617

我遇到了和你一样的问题。我终于找到了解决方案：

永远不要把你的 xml 放在 res/xml 中。xml文件会被android sdk编码，因此无法正确读取。但是，当你把它放在 res/raw 中时，导出到应用程序的 xml 文件将是完整的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:08:41.403

首先将您的**content.xml**文件放在**res/raw**文件夹中，然后将其解析为：

您的 xml 文件**res/raw/content.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<main>
    <background>
        <defintion>This is a test</defintion>
    </background>
</main> 
```

并将其解析为：

```
 InputStream is = getResources().openRawResource(R.raw.content);
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();

        DocumentBuilder dBuilder;
            try {
                dBuilder = dbFactory.newDocumentBuilder();
                try {
                    Document doc = dBuilder.parse(is,"UTF-8");
                    NodeList nl = doc.getElementsByTagName("main");

                    System.out.println("NodeList NodeList"+nl.getLength());

                } catch (SAXException e) {
                    // TODO Auto-generated catch block

                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } //Blows up right here.
            } catch (ParserConfigurationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# java - Java/wsdl/jar 类未找到编译问题

> ID：12927279
> 
> 赞同：1
> 
> 时间：2012-10-17T04:46:29.070
> 
> 标签：java, maven, ant, jar, wsdl

我是 wsdl/java 的新手......请原谅我有任何明显的错误。

这是我的主要程序。它基本上尝试创建一个对象，并且对象类型的类是从 jar 文件（wsdl）中引用的。我从其他地方下载了这些 jar 文件..我没有写它们。

现在，在 Eclipse 中，我确保我正确引用了 jar 文件。我在根文件夹中创建了一个 lib 文件夹，复制了 lib 目录下的 jar 并将它们添加到构建路径中。

但是，我仍然看到编译问题。

```
 import com.myplatform.soap.IdtoAcctWebservice.IdToAccountWebserviceLocator;

   public static void main(String args[]) {
       IdToAccountWebserviceLocator obj = new IdToAccountWebserviceLocator();
       ...
       ...
   } 
```

知道可能出了什么问题吗？我试图解压缩 jar 文件，但有大量子文件，我不确定在哪里可以搜索确切的类定义。

如果有人可以帮助了解可能出了什么问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:14:47.470

尝试在以下目录中的 jar 文件中搜索 .class 文件...

/com/myplatform/soap/IdtoAcctWebservice/IdToAccountWebserviceLocator.class

如果没有找到，则 jar 不正确。或者可能是您使用了错误的课程。（假设 jar 在类路径上。-您可以尝试导入其他可以在 jar 文件中看到的类，以检查它是否真的在类路径上。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:08:47.723

可能的原因是您的 JAR 文件不包含您正在使用的那些类。尝试另一个 jar 文件。

# android - 如何为以太网接口Android分配静态IP

> ID：12927283
> 
> 赞同：2
> 
> 时间：2012-10-17T04:46:52.780
> 
> 标签：android, ethernet, static-ip-address

我发现以下[帖子](https://stackoverflow.com/questions/2922455/api-for-configuring-static-ip-addresses-in-an-android-application)描述了如何将静态 ip 分配给 wifi 接口。我目前正在为 Nexus 7 (4.1.2) 开发，并拥有 OTG 电缆以及 Linksys 300M USB 到以太网适配器。有没有办法可以为以太网接口分配一个静态 IP？

再次非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:41:16.640

假设设备上的以太网接口是`eth0`，这应该可以工作：

`ifup eth0 192.168.1.2 255.255.255.0`

一般来说

**[`ifup`](http://linux.die.net/man/8/ifup)**`<interface name> <ip-address> <netmask>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T03:48:54.007

您也可以使用 ifconfig 执行此操作，但手动更改 IP 地址仍需要 root 权限，否则您将收到一个 ioctl 错误通知您。

# cuda - 使用 OpenACC 共享内存

> ID：12927284
> 
> 赞同：3
> 
> 时间：2012-10-17T04:46:55.543
> 
> 标签：cuda, openacc

我正在尝试使用共享内存来缓存 OpenACC 的内容。

基本上我正在研究的是矩阵乘法，我所拥有的是：

```
typedef float ff; 

// Multiplies two square row-major matrices a and b, puts the result in c. 
void mmul(const restrict ff* a, 
          const restrict ff* b, 
          restrict ff* c, 
          const int n) { 
#pragma acc data copyin(a[0:n*n], b[0:n*n]) copy(c[0:n*n]) 
{ 

#pragma acc region 
{ 

#pragma acc loop independent vector(16) 
  for (int i = 0; i < n; ++i) { 
#pragma acc loop independent vector(16) 
    for (int j = 0; j < n; ++j) { 
      ff sum = 0; 
      for (int k = 0; k < n; ++k) { 
        sum += a[i + n * k] * b[k + n * j]; 
      } 
      c[i + n * j] = sum; 
    } 
  } 

} 
}
} 
```

我想做的是使用**共享内存**来缓存矩阵“a”和“b”的图块，以用于计算“c”，其方式与 CUDA mmul 算法类似。

基本上在 CUDA 上，我会知道我的块的确切大小，并且能够：

*   用块的大小声明一个共享内存
*   将数据的“相关”部分复制到块中
*   使用这些数据

我知道我可以使用

```
#pragma acc cached 
```

指令，并且我可以使用**vector**和**gang**选项指定块大小，但是我在理解如何将其映射到 CUDA 架构时遇到了一些麻烦。

有没有办法用 OpenACC 实现类似的功能？是否有关于使用缓存指令或如何将共享内存的一些功能从 CUDA 映射到 OpenACC 的良好教程/资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:34:42.427

如果您使用的是 PGI Accelerator Compiler，您可以转储生成的 PTX 文件并查看执行的底层发生了什么：

```
pgcc -acc -fast -Minfo -ta=nvidia,cc13,keepptx matrixMult.c -o matrixMult 
```

生成的 PTX 将存储在当前目录中。

编辑：您可能更喜欢查看高级代码（C 或 Fortran 的 CUDA）。所以使用以下`-ta=nvidia,cc13,keepptx,keepgpu`.

# php - PHP 和 AJAX 登录验证

> ID：12927289
> 
> 赞同：0
> 
> 时间：2012-10-17T04:47:08.700
> 
> 标签：php, ajax, login

我需要一些帮助来对用于登录验证的代码进行故障排除。它是 AJAX 和 PHP 的组合。

这是直接在登录页面中的 AJAX 代码。

```
<script language="javascript">
$(document).ready(function()
{
$("#login_form").submit(function()
{
$("#msgbox").removeClass().addClass('messagebox').text('Validating....').fadeIn(1000);
$.post("/ajax_login.php",{ user_name:$('#username').val(),password:$('#password').val()
,rand:Math.random() } ,function(data)
    {
    if (data=='no')
        {
        $("#msgbox").fadeTo
            (200,0.1,function() 
                { 
  $(this).html('Incorrect Username or  Password.')
.addClass('messageboxerror').fadeTo(900,1);
                }
            );      
        }

     else if(data=='yes') 
        {
        $("#msgbox").fadeTo
            (200,0.1,function()  
                { 

$(this).html('Logging in.....').addClass('messageboxok').fadeTo
                    (900,1, function()
                        { 
                        document.location='/mainpage.php';
                        }
                    );
                }
            );
        } 

    else 
        {
        $("#msgbox").fadeTo
            (200,0.1,function()
                { 
                $(this).html('User is already logged in.').
 addClass('messageboxerror').fadeTo(900,1);
                }
            );   
        }

    });
    return false; 
});
$("#password").blur(function()
{
    $("#login_form").trigger('submit');
});
});
</script> 
```

PHP代码：

```
 <? 
 //Log In credentials

 if ($rehash==$dboPW && $user_name == $dboUN  && $logged=='Y'){echo "alreadyLogged"; exit;}
 if ($rehash==$dboPW && $user_name == $dboUN  && $logged=='N')
{
echo "yes"; 
$_SESSION['login'] = $username;
$_SESSION['password'] = $rehash;
$loggedUpdate=mysql_query("UPDATE Users SET LOGGED='Y' WHERE username='$user_name'");
exit;
 }
 else
 {echo "no";}
 ?> 
```

总结这个过程，有人登录，PHP脚本检查

1.  如果用户名和密码有效并且此人尚未登录 - 返回值“yes”

2.  如果用户名和密码有效并且该人已经登录 - 返回值“alreadyLogged”

3.  无效的用户名或密码 - 返回值“no”

这被传递给 AJAX，它应该根据 php 脚本的返回值显示正确的消息。供参考（使用上述摘要）：

1.  AJAX 应该返回：正在登录...

2.  AJAX 应该返回：用户已经登录。

3.  AJAX 应该返回：无效的用户名或密码。

问题是这样的：如果有人正确登录并且尚未登录，则会出现消息 2 而不是消息 1。（我认为消息 1 可能会出现但它消失得如此之快）。

我认为罪魁祸首是 AJAX，但不幸的是，我不像 PHP 那样熟悉它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:06:48.087

我认为问题出在您的 php 代码上。您的 ajax 代码看起来不错

尝试这个

```
if ($rehash==$dboPW && $user_name == $dboUN  && $logged=='Y')
{
echo "alreadyLogged"; exit;
}
 elseif ($rehash==$dboPW && $user_name == $dboUN  && $logged=='N')
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:56:04.903

我认为这是php问题，它发生错误并返回错误消息。如果 ajax_login.php 没有返回“yes”或“no”，它将显示第二条消息，无论它返回什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:26:57.447

只需要修改你的PHP。尝试这个 ：

> //登录信息
> 
> // 检查是否发布 if (isset($_POST)) { // 必须首先使用检查是否登录 session_start();
> 
> ```
> // set variable post
> $username = $_POST['user_name'];
> $password = $_POST['password']; // change if use sha1 or md5
> $rand = $_POST['rand'];
> 
> // check query database
> $query = mysql_query("SELECT * FROM Users WHERE username='$username' AND password='$password'");
> $user = mysql_fetch_array($query);
> $row = mysql_num_rows($query);
> 
> if ($row > 0) {
>     if ($user['LOGGED'] == 'Y') {
>         echo "yes";
>         $_SESSION['login'] = $username;
>         $_SESSION['password'] = $rehash;
>         $loggedUpdate = mysql_query("UPDATE Users SET LOGGED='Y' WHERE username='$user_name'");
>         exit;
>     } elseif ($user['LOGGED'] == 'N') { // you can use 'else'            
>         echo "alreadyLogged";
>         exit;
>     } 
> } else {
>     // invalid value password and username
>     echo "no";
>     exit;
> } } 
> ```

# java - 不能从静态上下文引用非静态方法 isSpam(MailItem)

> ID：12927291
> 
> 赞同：1
> 
> 时间：2012-10-17T04:47:12.767
> 
> 标签：java, bluej

> **可能重复：**
> [无法从静态上下文引用 java 非静态方法 getBalance](https://stackoverflow.com/questions/4973746/java-non-static-method-getbalance-cannot-be-referenced-from-a-static-context)

我正在尝试访问另一个类的 isSpam 方法，但它不允许我。它一直说不能引用非静态方法。请问我能得到一点帮助吗？这是我的 isSpam 代码和要检查的代码

`public void post(MailItem item)`

 ````
 if (SpamChecker.isSpam(item)) {
    }
    String name = item.getTo();
    if(!items.containsKey(name)) {
        items.put(name,new ArrayList<MailItem>());
    }
    items.get(name).add(item);
} 
```

and here's the isSpam from SpamChecker class

`public boolean isSpam(MailItem item) { if (item.getSubject().toLowerCase().startsWith("spam")){`

```
 return true;
    } else if(item.getSubject().toLowerCase().contains("online pharmacy")){
        return true;
    } else if(item.getSubject().toLowerCase().contains("cheap viagra")) {
        return true;
    } else if(item.getSubject().toLowerCase().contains("generic viagra")) {
        return true;
    } else if(item.getSubject().toLowerCase().contains("fake watches")) {
        return true;
    } else if(item.getSubject().toLowerCase().contains("replica watches")) {
        return true;
    } else {
    return false;
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:57:19.430

写成：

```
SpamChecker spamChecker = new SpamChecker();
if (spamChecker.isSpam(item)) {
   // <--- your logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:25:30.440

根据我的理解`isSpam()`方法是一种**非静态**方法，因此要访问它，请创建一个**类实例** `SpamChecker`。

**例如：**

```
SpamChecker spamCheck = new SpamChecker();

if (spamCheck.isSpam(item)){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:18:12.167

Dantuch 或 Yogendra 的答案很好，或者您也可以将方法 isPam() 设为静态。`

# c# - 如何检查列表中的可用频道<>

> ID：12927304
> 
> 赞同：0
> 
> 时间：2012-10-17T04:48:14.433
> 
> 标签：c#, .net, wpf, button

我是一名 C++ 开发人员，最近转向 C#。我正在开发一个 wpf 应用程序，我必须在其中动态生成按钮、标签和文本框。除了动态生成它们之外，我还确保只显示那些通过维护 bool 可用属性而可用的通道。这是代码：

**XAML：**

```
<Grid Visibility="{Binding IsAvailable, Converter={StaticResource booltovisibility}}">          

    <Label Grid.Column="0" Content="{Binding ChannelName}" />
    <TextBox Grid.Column="1" Text="{Binding VoltageText}" PreviewTextInput="VoltageBox_PreviewTextInput"  />
    <Button Grid.Column="1" Content="Set" CommandParameter="{Binding}" Command="{Binding VoltageCommand}" />
    <Label Grid.Column="2" Content="{Binding CurrentText}" />
    <ToggleButton Grid.Column="3" Content="On" Command="{Binding VoltageToggleCommand}" IsChecked="{Binding Path=IsChecked}" />
</Grid>

    <Button Content="Refresh All" Grid.Column="1" Command="{Binding Path=RefreshAllButtonCommand}" Name="RefreshAllBtn" /> 
```

**视图模型：**

```
public ObservableCollection<VoltageBoardChannel> channelList = null;
public ObservableCollection<VoltageBoardChannel> bavaria1Channels = new ObservableCollection<VoltageBoardChannel>
    {
         new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true, ID = 1},
         new VoltageBoardChannel { ChannelName = "VDD__IO", IsAvailable = true, ID = 2},
         new VoltageBoardChannel { ChannelName = "VDD__CODEC", IsAvailable = true, ID = 3},
         new VoltageBoardChannel { ChannelName = "VDD__LDO", IsAvailable = true, ID = 4},
         new VoltageBoardChannel { ChannelName = "VDD__AMP", IsAvailable = true, ID = 5},   
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 6}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 7}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 8}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 9}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 10}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 11}, 
         new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 12}, 
    };        

    public VoltageViewModel()
    {
        channelList = new ObservableCollection<VoltageBoardChannel>();
        channelList = bavaria1Channels;         

    }
public ObservableCollection<VoltageBoardChannel> VoltageChannelList
    {
        get 
        { 
            return channelList; 
        }

        set
        { 
            channelList = value;
            OnPropertyChanged("ChannelList");
        }
    }

void RefreshAllClick()
{
    //Here I want to check if channel are available or not. If yes then execute few statements.
} 
```

**型号类：**

```
private string mChannelName;
    public string ChannelName
    {
        get
        {
            return mChannelName;
        }
        set
        {
            mChannelName = value;
            OnPropertyChanged("ChannelName");
        }
    }

    private bool mIsAvailable;
    public bool IsAvailable
    {
        get
        {
            return mIsAvailable;
        }
        set
        {
            mIsAvailable = value;
            OnPropertyChanged("IsAvailable");
        }
    }

    double voltageText;
    public double VoltageText
    {
        get
        {
            return voltageText;
        }

        set
        {
            if (value > 5.0D || value < 0.0D)
                throw new InvalidOperationException();
            voltageText = value;
            OnPropertyChanged("VoltageText");
        }
    }

    string currentText = "0";
    public string CurrentText
    {
        get
        {
            return currentText + " V";                
        }

        set
        {
            currentText = value;
            OnPropertyChanged("CurrentText");
        }
    }          

    int index ;
    public int ID
    {
        get
        {
            return index;
        }

        set
        {
            index = value;
            OnPropertyChanged("ID");
        }
    } 
```

因此，如果您在我的文章中注意到，`Bavaria1 Channel`您会发现可用的频道很少（真），而且很少有假的。因此在启动时它只显示可用的频道。因此，使用 booltovisibility 类我可以在我的网格中设置可见性并相应地显示现在这是我想要实现的目标：

当我单击`RefreshAll`Button 时，会触发一个调用的方法`RefreshAll_Click()`，我想检查一个`if`条件哪些通道可用。如果是，则执行一些语句。我在 C++ 中完成了如下操作：

```
if(m_voltageChannels[channel].available) // Here channel is 12 as you can notice in bavaria1 list
{
    cmd = (0x8400 | (channel & 0xFF));  

    String OldValue = m_labelCurrentVoltage[channel]->getText();
            //Some Code
    } 
```

我怎样才能做到这一点？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:23:37.837

我会使用`foreach`循环或 linq。由于您是从 C# 开始的，因此这里是 foreach 方法：

```
void RefreshAllClick() 
{
    foreach (var channel in channelList)
        if (channel.IsAvailable)
            //some code here 
} 
```

或者，因为`ObservableCollection<T>`implements `IList<T>`，您可以索引到集合中，就像在您的 C++ 代码中一样：

```
if (channelList[channel].IsAvailable)
    //some code here 
```

如果您只需要一个布尔值，如果至少有一个通道可用，那么 linq 是最好的：

```
var anyChannelIsAvailable = channelList.Any(c => c.IsAvailable); 
```

从我之前（现已删除）的评论中移出，这里有一些不请自来的进一步建议：

您应该删除 line `channelList = new ObservableCollection<VoltageBoardChannel>();`，因为您会通过在下一行 ( `channelList = bavaria1Channels;`) 中重新分配引用来立即丢弃该对象。实际上，您根本不需要`bavaria1Channels`（也不需要构造函数）；您可以`channelList`使用集合初始化表达式声明和初始化，如下所示：

```
public ObservableCollection<VoltageBoardChannel> channelList = new ObservableCollection<VoltageBoardChannel>    
{    
     new VoltageBoardChannel { ChannelName = "VDD__MAIN", IsAvailable = true, ID = 1},    
     new VoltageBoardChannel { ChannelName = "VDD__IO", IsAvailable = true, ID = 2},    
     new VoltageBoardChannel { ChannelName = "VDD__CODEC", IsAvailable = true, ID = 3},    
     new VoltageBoardChannel { ChannelName = "VDD__LDO", IsAvailable = true, ID = 4},    
     new VoltageBoardChannel { ChannelName = "VDD__AMP", IsAvailable = true, ID = 5},       
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 6},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 7},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 8},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 9},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 10},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 11},     
     new VoltageBoardChannel { ChannelName = "", IsAvailable = false, ID = 12},     
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:27:18.930

```
if (bavaria1Channels.Any(c => c.IsAvailable)) //Any channel available
{
    //Execute some code :)
} 
```

# android - 在 onDestroy() 触发后 IntentService onHandleIntent() 仍在运行

> ID：12927307
> 
> 赞同：3
> 
> 时间：2012-10-17T04:48:26.840
> 
> 标签：android, android-service, intentservice

在我的首选项屏幕中，我想在单击其中一个首选项时启动一项服务以从 Internet 下载文件。如果服务已在运行（下载文件），则应停止服务（取消下载）。

```
public class Setting extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    downloadPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        @Override
        public boolean onPreferenceClick(Preference pref) {
            if (DownloadService.isRunning) {
                Setting.this.stopService(new Intent(Setting.this,
                    DownloadService.class));
            } else {
                Setting.this.startService(new Intent(Setting.this,
                    DownloadService.class));
            }
            return false;
        }
    });
    }
} 
```

服务等级：

```
public class DownloadService extends IntentService {

public static final int DOWNLOAD_SUCCESS = 0;
public static final int DOWNLOAD_FAIL = 1;
public static final int DOWNLOAD_CANCELLED = 2;
public static final int SERVER_FAIL = 3;

public static boolean isRunning = false;
private int result;

public DownloadService() {
    super("DownloadService");
}

@Override
public void onCreate() {
    super.onCreate();
    isRunning = true;
}

@Override
protected void onHandleIntent(Intent intent) {
    if (NetworkStateUtils.isInternetConnected(getApplicationContext())) 
        result = downloadFiles(getApplicationContext());

}

@Override
public void onDestroy() {
    super.onDestroy();
    switch (result) {
    case DOWNLOAD_SUCCESS:
        Toast.makeText(getApplicationContext(), R.string.download_finished,
                Toast.LENGTH_SHORT).show();
        break;
    case DOWNLOAD_CANCELLED:
        Toast.makeText(getApplicationContext(), R.string.download_canceled,
                Toast.LENGTH_SHORT).show();
        break;
    case DOWNLOAD_FAIL:
        Toast.makeText(getApplicationContext(), R.string.download_failed,
                Toast.LENGTH_SHORT).show();
        break;
    }
    isRunning = false;
}
} 
```

此服务旨在运行直到下载完成。该函数`downloadFiles()`使用 no `AsyncTask`。它直接`HttpURLConnection`用 a保存`FileOutputStream`。

当我单击首选项时，服务正确启动。现在的问题是，当我点击停止服务时`stopService()`，立即`DownloadService`触发`onDestroy()`；但是根据日志，`onHandleIntent()`它仍在运行，因为我仍然可以连续看到 HTTP 请求。这是因为`Service`在线程本身中运行，还是我做错了什么？如何确保在被调用`onHandleIntent()`时立即停止（或至少能够停止）中的所有内容？`stopService()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T02:44:38.027

终于知道如何让它工作了。

正如我在问题中所说，onHandleIntent() 会以某种方式创建一个线程来完成这项工作。因此，即使服务本身被破坏，线程仍在运行。我通过添加一个全局变量实现了我的目标

```
private static boolean isStopped = false; 
```

`DownloadService`上课。

为了取消我的服务，而不是打电话

```
Setting.this.stopService(new Intent(Setting.this, DownloadService.class)); 
```

刚刚设置`DownloadService.isStopped = true`。

最后，在做事的时候`onHandleIntent()`，定期检查这个布尔值，看看它是否应该停止下载。如果`isStopped = true`，立即返回，服务将自行停止。

希望这对遇到这个问题的人也有帮助。感谢您花时间阅读这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T05:15:40.800

它有一个单独的线程来完成工作，并且根据它正在做什么，可能无法立即停止它。如果它在 I/O 上阻塞，中断它可能没有效果。

# python - 使用 urllib 在 python 中保存图像

> ID：12927314
> 
> 赞同：0
> 
> 时间：2012-10-17T04:49:13.847
> 
> 标签：python, pyramid, urllib, waitress

我正在尝试使用 urllib 从网络保存图像，但我不断收到此错误：

```
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124] urllib.urlretrieve(image,ban)
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124]   File "/usr/lib/python2.6/urllib.py", line 93, in urlretrieve
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124]     return _urlopener.retrieve(url, filename, reporthook, data)
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124]   File "/usr/lib/python2.6/urllib.py", line 243, in retrieve
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124]     tfp = open(filename, 'wb')
[Wed Oct 17 10:03:43 2012] [error] [client 223.232.227.124] IOError: [Errno 13] Permission denied: '/public/env/lib/python2.6/site-packages/project-0.0-py2.6.egg/project/images/series/graphical/104281-g2.jpg' 
```

编码 ：

```
ban='/public/env/project/project/images/series/%s'%(banner)
image='http://www.thetvdb.com/banners/%s'%(banner)
urllib.urlretrieve(image,ban) 
```

该代码在我的本地主机上使用 Pyramid 服务员服务器以及使用 mod_wsgi 运行得非常好，但在生产服务器上却没有。

我正在使用 Pyramid 框架进行开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:53:18.843

这是一个权限问题。您无权写入服务器中您尝试写入的位置。尝试其他您有权限的位置或对该目录设置适当的权限。

```
urlretrieve(url, filename=None, reporthook=None, data=None) 
```

第二个参数是您要写入的文件名。由于您是从 webapp 运行的，因此运行 webapp 的进程应该有权访问您尝试写入的位置。

# iphone - 如何像键盘一样在 TabBar 上显示 UIDatePIcker

> ID：12927315
> 
> 赞同：0
> 
> 时间：2012-10-17T04:49:16.180
> 
> 标签：iphone, ios, uitabbarcontroller, uidatepicker

我知道这个网站上很少有问题谈论这个......但我没有找到我可以使用的真正答案......

我有一个包含 common 的表单，`UITextField`并且当用户单击按钮时`UIButton`应该显示从底部滑动...`UIDatePicker`

主要问题是：

*   如何`UIDatePicker`像 iphone 键盘一样在 TabBar上显示
*   如何使它`UIDatePicker`像键盘一样，所以当我在选择日期时单击 UITextField 时，它变为键盘，反之亦然......就像 iphone 联系人一样。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T04:55:33.437

将文本字段的输入视图设置为 UIDatePicker 对象： UITextField 具有以下属性。@property (readwrite, retain) UIView *inputView;

使用以下代码：

```
yourTextfield.inputView = yourDatePicker; 
```

因此，当点击文本字段时，您的选择器将出现，而不是 UITextfield 的默认键盘......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T06:10:57.817

五年前的问题。

1.创建UIResponder类的子类

2.redeclare inputview为读写

```
@property (nonatomic, strong, readwrite) UIView *inputView; 
```

3.将canBecomeFirstResponder设置为YES

```
- (BOOL)canBecomeFirstResponder {
return YES;
} 
```

4.设置输入视图如datepicker

```
self.inputView = self.datePicker; 
```

5.根据需要将 UIResponder 设置为 firstResponder

```
[self becomeFirstResponder]; 
```

5.你可以看到像键盘一样的日期选择器显示

# jquery - jquery无限滚动页码

> ID：12927316
> 
> 赞同：0
> 
> 时间：2012-10-17T04:49:26.107
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我正在使用一个名为 InfiniteScroll ( [https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll) ) 的 jQuery 插件，并且我有一个带有这种模式的 URL：`'/category/2/'`，当我分页结果时，我使用以下模式：`"/category/2?page=2"`。

当无限滚动发出请求时，他增加了错误的数字，在上面的情况下，请求是：`"/category/3?page=2"`代替`"/category/2?page=3"`.

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:59:17.240

您需要设置一个自定义`pathParse`选项 -

```
pathParse:function(path,nextPage){
   path = path.match(/category\/[0-9]*\?page=([0-9]*)/).slice(1);
   return path;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T03:51:48.070

尝试使用[http://pengkong.github.io/jquery-auto-pagination/](http://pengkong.github.io/jquery-auto-pagination/)它不依赖于下一页链接格式、运行页码和/或固定增量。

# mysql - 忽略 MySQL 警告消息有什么影响？

> ID：12927319
> 
> 赞同：1
> 
> 时间：2012-10-17T04:49:32.813
> 
> 标签：mysql, sql, mysql-error-1264

下面是用于创建我的表的 CREATE TABLE 语句：

```
CREATE TABLE IF NOT EXISTS `data_received` (
  `id` int(10) unsigned NOT NULL,
  `date_received` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `edit_time` datetime NOT NULL
} 
```

如果未提供“edit_time”值，以下是插入时如何将数据保存在表中：

```
id   date_received         edit_time
1    2012-10-12 12:15:46   0000-00-00 00:00:00 
```

此外，我收到此警告消息：`Warning: #1264 Out of range value for column 'edit_time' at row 1`

*   所以，我的问题是，忽略这个警告信息有什么影响吗？
*   我预计每分钟插入 10 到 15 行。那么，会不会有性能下降呢？
*   我能做些什么来阻止此警告消息的发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:53:33.390

当 MySQL 在数值列中存储超出列数据类型允许范围的值时，结果取决于当时有效的 SQL 模式：如果启用了严格 SQL 模式，MySQL 将拒绝超出范围的值有错误，插入失败，根据 SQL 标准。如果没有启用限制模式，MySQL 将值剪辑到范围的适当端点并存储结果值。

# themes - 我可以允许用户从我的应用程序安装 BlackBerry 10 主题吗？

> ID：12927323
> 
> 赞同：0
> 
> 时间：2012-10-17T04:49:49.923
> 
> 标签：themes, blackberry-10

我正在尝试创建一个 Blackberry 10 应用程序，以使用户能够直接在其中安装主题，而不是从 Blackberry App World。有什么办法可以做到这一点？

# android - 在 android ICS 上使用升级的 openssl-1.0.1c 时出现运行时错误

> ID：12927327
> 
> 赞同：0
> 
> 时间：2012-10-17T04:50:12.797
> 
> 标签：android, android-ndk, openssl

我正在尝试在 android(ICS) 上将 openssl 从 1.0.0 升级到 1.0.1c。虽然我成功地交叉编译它（对于arm）。当我尝试使用升级的 libcrypto.so 库在目标上运行 openssl 二进制文件时出现错误。

以下是错误：libcrypto.so 的意外重定位类型 0x03

我做错了什么或者我缺少任何编译标志？？？我曾尝试使用 -fPIC 编译 openssl，但这也无济于事。

PS：我正在使用 android google tv 分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:13:55.963

最好的办法是使用原生 Android 构建系统来构建 OpenSSL。不知道细节，但他们可能正在使用特殊选项以及定义来打开/关闭事物。获取 AOSP 源并将 OpenSSL 文件替换为 1.0.1c。如果您不想构建整个东西（更安全），Guardian Project 的 Github 上还有一个单独的构建配置：[https ://github.com/guardianproject/openssl-android](https://github.com/guardianproject/openssl-android)

# objective-c - Xcode中的“其他C标志”和“预处理器宏”有什么区别

> ID：12927331
> 
> 赞同：4
> 
> 时间：2012-10-17T04:50:35.230
> 
> 标签：objective-c, xcode

它可以在构建设置中找到。

例如，以下有什么区别：

在其他 c 标志中定义 -DDEBUG

和

在预处理器 Marcos 中定义 -DDEBUG

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T06:47:52.583

`preprocessor macros`构建设置用于设置预处理器宏的初始值。

```
Example value: test_mode=1 copious_logging=1 
```

`Other C Flags`构建设置用于向编译器发送任意标志。

```
Example value: -dM 
```

# android - 设置订阅计费的最佳方式

> ID：12927332
> 
> 赞同：-1
> 
> 时间：2012-10-17T04:50:51.017
> 
> 标签：android, windows-phone-7, paypal, e-commerce

我即将在 Android 和 WP7 市场上发布一个应用程序（希望不久之后是 iPhone）。

市场上的应用程序将是免费的，但会提供按月订阅的功能。由于这不会像我只是为应用程序下载收费那样在市场上运行，因此我必须自己设置此计费方式。不幸的是，我对此知之甚少。最快的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:27:58.650

最好的方法是使用订阅计费系统。我们查看了其中的一些，并在 ChargeBee 和 Zuora 之间做出了决定。由于我们的模型更复杂，我们选择了 Zuora。根据您的要求，ChargeBee 应该是一个不错的选择。由于它们仍处于 Beta 阶段，因此如果需要，它们应该能够帮助进行定制。但我认为这没有必要。

[http://www.chargebee.com](http://www.chargebee.com)

# algorithm - 寻找第n个工作日的算法

> ID：12927337
> 
> 赞同：2
> 
> 时间：2012-10-17T04:51:33.033
> 
> 标签：algorithm

我已经设计了一个程序来查找第 n 个工作日而不使用循环。

请提出您对此的建议-

操纵工作日的算法 -

问题：查找从任何特定日期开始的第 n 个工作日的日期。

解决方案：

1.  标准化到最近的星期一 -

    ```
    If today(or the initial day) happens to be something other than monday, bring the day to the closest monday by simple addition or subtraction. 
    ```

    例如：初始日 - 10 月 17 日。这恰好是星期三。因此，通过减少 2 个日期来使这个星期一正常化。现在将这 2 个日期命名为初始标准化因子。

2.  添加这几周的工作日数+周末数。

    eg：要增加10个工作日，我们需要增加12天。由于 10 天有 1 周，其中仅包括 1 个星期六和 1 个星期日。这是因为，我们正在正常化到最近的星期一。

3.  摊销——

    现在从结束日期开始添加初始归一化因子（用于负初始归一化）和另一个常数因子（例如 k）。或者如果初始标准化是从星期五获得的，则加 1，恰好是 +3。如果开始日期在周六和周日，则视为周一。所以这一步不需要摊销。

    例如：假设如果初始归一化是从星期三开始的，则初始归一化因子是-2。因此将 2 添加到结束日期和常数 k。

    ```
    The constant k is either 2 or 0\. 
    ```

常量定义 -

```
 If initial normalization factor is -3, then add 2 to the resulting date if the day before amortization is (wed,thu,fri) 
    If initial normalization factor is -2, then add 2 to the resulting date if the day before amortization is (thu,fri) 
    If initial normalization factor is -1, then add 2 to the resulting date if the day before amortization is (fri) 
```

例子 -

```
 Find the 15th working day from Oct,17 (wednesday). 
```

第1步 -

初始标准化 = -2 现在开始日期是 10 月 15 日（星期一）。

第2步 -

```
add 15 working days -

15 days => 2 weeks
    weekends = 2 (2 sat, 2 sun)

    so add 15 + 4 = 19 days to Oct, 15 monday.

    end_date = 2, nov, Friday 
```

步骤 3a -

```
end_date = end_date + initial normalization = 4, nov sunday 
```

步骤 3b -

```
end_date = end_date + constant_factor = 4, nov, sunday + 2 = 6, nov (Tuesday) 
```

交叉验证 -

```
 Add 15th working day to Oct, 17 wednesday

 Oct,17 + 3 (Oct 17,18,19) + 5 (Oct 22-26) + 5 (Oct 29 - Nov 2)  + 2 (Nov 5, Nov 6)

 Now the answer is 6, Nov, Tuesday. 
```

我已经通过几个案例进行了验证。请分享您的建议。

拉森。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T05:25:34.760

首先，它是一个很好的算法，但我对边界条件有疑问：例如，如果我需要从今天开始找到第 0 个工作日怎么办：

第1步 -

```
initial normalization = -2 now start date is Oct,15 (monday). 
```

第2步 -

```
add 0 working days -

0 days => 0 weeks
    weekends = 0
    so add 0 + 0 = 0 days to Oct, 15 monday.

    end_date = 15, oct, monday 
```

步骤 3a -

```
end_date = end_date + initial normalization = 17, oct wednesday 
```

步骤 3b -

```
end_date = end_date + constant_factor = 17, Oct wednesday or 19,oct friday based on whether constant factor is 0 or 2 as it be only one of these values. 
```

现在让我们重复查找从今天开始的第一个工作日的步骤：

第1步 -

```
initial normalization = -2 now start date is Oct,15 (monday). 
```

第2步 -

```
add 1 working days -

1 days => 0 weeks
    weekends = 0
    so add 1 + 0 = 1 days to Oct, 15 monday.

    end_date = 15, oct, monday 
```

步骤 3a -

```
end_date = end_date + initial normalization = 17, oct wednesday 
```

步骤 3b -

```
end_date = end_date + constant_factor = 17, Oct wednesday or 19,oct friday based on whether constant factor is 0 or 2 as it be only one of these values. 
```

您是否注意到，算法对 0 和 1 给出相同的最终结果。如果事先定义 0 个工作日和 1 个工作日被视为相同的场景，这可能不是问题，但理想情况下它们应该给出不同的结果。

我还建议您考虑负面测试用例，例如，如果我需要从今天起找到第-6 个工作日怎么办，您的算法是否会正确地给我一个过去的日期？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:41:48.473

让我们考虑从今天开始的第 0 个工作日（17 月 10 日，星期三）。

第1步 -

```
 start_date = 17/10 wed
 normalized date = 15/10 mon 
```

第2步 -

end_date = 标准化日期 + 工作日 = 15/10 星期一 + 0 = 15/10 星期一

第 3 步 -

```
 amortized_back = end_date_before_amortization + normalization factor
                 = 15/10 + (+2) = 17/10 wed

  since the end_date_before_amortization falls on monday and initial normalization is 2, constant factor = 0.

  hence, end_date = 17/10 wed. 
```

现在是案例 2，从今天开始的第一个工作日。

第1步 -

```
 start_date = 17/10 wed
 normalized date = 15/10 mon 
```

第2步 -

end_date = 标准化日期 + 工作日 = 15/10 周一 + 1 = 16/10 周二 第 3 步 -

```
 amortized_back = end_date_before_amortization + normalization factor
                 = 16/10 + (+2) = 18/10 thu.

  since the end_date_before_amortization falls on tuesday and initial normalization is 2, constant factor = 0.

  hence, end_date = 18/10 thu. 
```

看起来适用于第 0 和第 1 WD。

# mysql - SQL同时转换外键？(MySQL 5.5)

> ID：12927339
> 
> 赞同：0
> 
> 时间：2012-10-17T04:51:42.817
> 
> 标签：mysql, sql

我有一个带有自然键的表和另一个带有外键约束的表：

```
create table A
(
    id varchar(255) not null primary key
    ...
)

create table B
(
    a_id varchar(255) not null
    ...

    foreign key (a_id) references A (id)
) 
```

我想在`A.id`, 上执行转换（在这种特定情况下将其小写）并同时在`B.a_id`.

显然，如果我这样做：

```
update A set id=lower(id);
update B set a_id=lower(a_id); 
```

比我第一次更新时会违反外键约束。

无论如何“同时”执行这两个更新，或者你能推荐另一种方法来处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:55:14.513

最简单的方法可能是放弃约束，

执行更新查询

再次，引入外键约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:25:29.937

删除约束并使用 ON UPDATE CASCADE 重新创建约束

然后在父表上执行更新语句，不会修改子表。

```
 ALTER  TTABLE b ADD CONSTARINT fk_const 
 FOREIGN KEY(a_id) REFERENCE  a (id) ON UPDATE CASCADE 
```

现在执行此更新

```
 update A set id=lower(id); 
```

# c# - 为 C# 程序员提供网页抓取（HTMLAgilityPack 或 Python+beautifulsoup）的更好选择

> ID：12927343
> 
> 赞同：2
> 
> 时间：2012-10-17T04:51:57.913
> 
> 标签：c#, python, beautifulsoup, html-agility-pack

我是一名 .NET 程序员。我需要从事网络抓取项目。我想了解 HTMLAgilityPack 与 BeautifulSoup 的区别。

很多人说，BeautifulSoup 比 HTMLAgilityPack 好很多。但为此，我需要学习 Python。

所以，我的问题是，我学习 Python 和 BeautifulSoup 还是继续 C# 和 HTMLAgilityPack 是否合理？

任何其他建议都受到热烈欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:35:48.550

我创建的库[CsQuery是 Html Agility Pack 的一个相对较新的替代品。](https://github.com/jamietre/CsQuery)它具有以下优点：

*   完整的 CSS3 选择器支持，对于大多数人来说，它已经很熟悉并且比 xpath 容易得多，并且与您已经为客户端编写代码的方式相同
*   jQuery API，出于同样的原因
*   使用[validator.nu](http://about.validator.nu/htmlparser/) HTML 解析器，一个完全符合 HTML5 的解析器。这与基于 Gecko 的浏览器 (Firefox) 使用的代码库相同，这意味着它应该生成与 Web 浏览器完全相同的 DOM，即使对于通常错误/无效的标记也是如此。
*   索引文档使选择器非常快，即使在非常大的文档上也是如此。HAP 必须遍历每个选择器的完整文档树，这对于复杂的选择器和大型文档来说非常慢。
*   广泛的单元测试覆盖 - 来自 jQuery 和 Sizzle（jQuery CSS 选择引擎）的所有测试都已移植到 C#。

缺点：

*   目前仅适用于编译 .NET 4+ 完整框架，而 HAP 已为大多数 .NET 环境构建。

您可以从 nuget: 获取它`Install-Package CsQuery`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:03:10.240

在 C# .NET 世界中，我会推荐 HTMLAgilityPack，因为它非常灵活。它使您可以像处理格式良好的 XML 一样操作格式不正确的 HTML，因此您可以使用 XPath 或只遍历节点。

*   [HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

BeautifulSoup 是进行 HTML 抓取的好方法，但从开发人员的角度来看，要亲身体验一项全新的技术并不容易。因此，如果您是 .NET 人员，我强烈推荐 HTMLAgilityPack。

[结合HTML Agility Pack](http://htmlagilitypack.codeplex.com/)、正则表达式和 XDocument（LINQ -> XMLy 的东西），您可以获得巨大的成功

它非常强大 - *[LINQ 和 lambda（第 3 部分） - HTML Agility Pack](http://vijay.screamingpens.com/archive/2008/05/26/linq-amp-lambda-part-3-html-agility-pack-to-linq.aspx)*是 Vijay Santhanam 的一篇博文，让我着迷。

# arrays - PowerShell foreach 如何在此代码中因空数组而失败？

> ID：12927347
> 
> 赞同：1
> 
> 时间：2012-10-17T04:52:18.680
> 
> 标签：arrays, powershell, foreach

这个 powershell 代码怎么可能因“无法索引到空数组。”而失败？这对我来说毫无意义。当然 $cloudPfx 应该是一个非空数组？

```
$cloudPfx = @( "Foo.pfx", "Bar.pfx", $SSLCertFileName )
$cloudPfx | foreach {
    ## call some function...
    Save-Pfx "Foo\$_" (Join-Path $SomePath "Bar$_")
}

foreach : Cannot index into a null array.
At [that line]
+     $cloudPfx | foreach {
+                 ~~~~~~~~~
+ CategoryInfo          : InvalidOperation: (:) [ForEach-Object], RuntimeException
+ FullyQualifiedErrorId : NullArray,Microsoft.PowerShell.Commands.ForEachObjectCommand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:50:28.230

因此，通过添加调试输出语句 - 事实证明问题确实发生在 Save-Pfx 函数内部。只是错误表示是完全错误的。（我认为 Roman 可能怀疑这一点，因为他建议切换到 foreach 语句。）

# ruby-on-rails - Rails：如何计算用户数？

> ID：12927350
> 
> 赞同：0
> 
> 时间：2012-10-17T04:53:12.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的模型。

**用户** unit_id

**单元** block_id

**屏蔽** postalcode_id

**邮政编码** neighbourhood_id

**邻里** 名称

关系是为了一切是顶部属于底部

这是我当前的 index.html.erb 文件，我希望输出每个社区的用户数量。

```
<% provide(:title, 'Neighbourhoods') %>
<ul class="thumbnails">
    <% @neighbourhoods.each do |neighbourhood| %>
    <li class="span3">
        <div class="thumbnail">
            <div style="position:relative;">
                <%= link_to "Join", '#', class: "btn-join" %>
                <%= image_tag(neighbourhood.name+".jpg", alt: neighbourhood.name) %>
            </div>
            <h2 style="margin-bottom:0px"><%= neighbourhood.name.titleize %></h2>
            <% neighbourhood.postalcodes.each do |postalcode| %>
            <%= postalcode.blocks.map(&:block).join(", ") %>
            <% end %>
            <br>
            <%= neighbourhood.streetname.titleize %>
        </div>
    </li>
    <% end %>
</ul> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:44:54.490

似乎是一组非常嵌套的关联。您可能想再看看您的模型，看看您是否可以将它们“修剪”一点。也许像只有一个用户和单元模型，然后将块、邮政编码和社区添加到单元中，您可以在其中执行 Unit.block 和 Unit.postal_code...等。

按照您当前的配置（假设 has_many/belongs_to 的正确关联），您应该能够执行以下操作：

```
Neighbourhood.postal_code.block.unit.users.count 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:03:20.770

假设一个邻居`has_many`用户：

```
<%= neighbourhood.users.size %> 
```

请注意，计数是一个相对较慢的选项，因此您可以选择缓存用户数量以提高速度`counter_cache`：

```
class User < ActiveRecord::Base
  belongs_to :neighborhood, :counter_cache => true
end 
```

然后在迁移中：

```
add_column :neighborhoods, :users_count, :integer, :default => 0 
```

# android - 尝试添加 onLongListItemClick 并获得异常

> ID：12927352
> 
> 赞同：0
> 
> 时间：2012-10-17T04:53:26.413
> 
> 标签：android

我注释掉了我正在添加受保护的 boolean onLongListItemClick(ListView l, View v, int position, long id) 的部分。

如果我取消评论，我会得到一个例外。我正在尝试添加，如果长按我将删除该文件，稍后将添加该文件。有没有一种简单的方法可以做到这一点。

```
public class AndroidExplorer extends ListActivity {

  private List<String> item = null;
  private List<String> path = null;
  private TextView myPath;

  File myFile = new   File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/Boot");
  String root2 = myFile.getAbsolutePath();;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myPath = (TextView)findViewById(R.id.path);
    getDir(root2);
  }

  private void getDir(String dirPath)
  {
    myPath.setText("Location: " + dirPath);

    item = new ArrayList<String>();
    path = new ArrayList<String>();

    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals(root2))
    {
        item.add("Return to Boot Directory");
        path.add(f.getParent());
    }

    for(int i=0; i < files.length; i++)
    {
            File file = files[i];
            path.add(file.getPath());
            if(file.isDirectory())
                item.add(file.getName() + "/");
            else
                item.add(file.getName());
    }

    ArrayAdapter<String> fileList =
        new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);
 }

//    protected boolean onLongListItemClick(ListView l, View v, int position, long id)     {
 //      //  Log.i(TAG, "onLongListItemClick id=" + id);
 //         Toast.makeText(this,
 //                    "I will be terminated",
 //                    Toast.LENGTH_LONG).show();
 //        return true;
 //    }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead())
            getDir(path.get(position));
        else
        {
            new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("[" + file.getName() + "] folder can't be read!")
            .setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                        }
                    }).show();
        }
    }
    else
    {

          String fileName = file.getName();
          String fname="";
          String ext="";
          int mid= fileName.lastIndexOf(".");
          fname=fileName.substring(0,mid);
          ext=fileName.substring(mid+1,fileName.length());

          if(ext.equals("jpg"))
          {
              Toast.makeText(this,
                        "view the jpg",
                        Toast.LENGTH_LONG).show();
          }

          if(ext.equals("3gp"))
          {
              Toast.makeText(this,
                        "play the video",
                        Toast.LENGTH_LONG).show();
          }
        new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("[" + file.getName() + "]")
            .setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                        }
                    }).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:55:39.440

*   添加一个[AdapterView.OnItemLongClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemLongClickListener.html)。请参阅[setOnItemLongClickListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemLongClickListener%28android.widget.AdapterView.OnItemLongClickListener%29)。

.

```
listView.setOnItemLongClickListener (new OnItemLongClickListener() {
  public boolean onItemLongClick(AdapterView parent, View view, int position, long id) {
    //do your stuff here
  }
}); 
```

# sql - Microsoft Access - 为什么输入参数值？

> ID：12927356
> 
> 赞同：2
> 
> 时间：2012-10-17T04:53:34.200
> 
> 标签：sql, ms-access

我的数据库遇到问题。

并尝试查询电影《哈利波特》有多少笔交易？

所以我使用了 SQL 查询：

```
SELECT
COUNT(td.movie) AS number_of_occurrence,
td.transaction_number
FROM
TransactionDetails td,
MovieDetails md
WHERE
md.movie = Harry_Potter 
```

但它要求 Harry_Potter 输入参数值为什么？相关的SQL语句是

```
CREATE TABLE TransactionDetails 
(
transaction_number INTEGER PRIMARY KEY,
movie VARCHAR(30) NOT NULL,
date_of_transaction DATE NOT NULL,
member_number INTEGER NOT NULL
)

CREATE TABLE MovieDetails
(
movie VARCHAR(30) PRIMARY KEY,
movie_type VARCHAR(3) NOT NULL,
movie_genre VARCHAR(10) NOT NULL
)

ALTER TABLE TransactionDetails
ADD CONSTRAINT member_number_fk FOREIGN KEY (member_number) REFERENCES    LimelightMemberDetails(member_number);

ALTER TABLE TransactionDetails
ADD CONSTRAINT transaction_number_drink_fk FOREIGN KEY (transaction_number) REFERENCES DrinkTransactionDetails(transaction_number);

ALTER TABLE TransactionDetails
ADD CONSTRAINT transaction_number_food_fk FOREIGN KEY (transaction_number) REFERENCES FoodTransactionDetails(transaction_number);

ALTER TABLE TransactionDetails
ADD CONSTRAINT movie_fk FOREIGN KEY (movie) REFERENCES MovieDetails (movie); 
```

谢谢您的帮助！如果我的数据库设计有任何问题，请告诉我！谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:59:31.923

将查询更改为类似

```
SELECT 
COUNT(td.movie) AS number_of_occurrence, 
td.transaction_number 
FROM 
TransactionDetails td, 
MovieDetails md 
WHERE 
md.movie = "Harry_Potter" 
```

由于电影是一个字符串，因此您需要在要查找的值周围加上引号。

如果我没记错的话，MS Access 需要 " 而 SQL SERVER 需要 '

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:59:45.683

尝试这个

```
md.movie = "Harry_Potter" 
```

我想，您只是缺少要比较的字符串周围的引号。

# c# - 在 asp.net C# Web 应用程序中使用 google doc API

> ID：12927357
> 
> 赞同：0
> 
> 时间：2012-10-17T04:53:43.190
> 
> 标签：c#, asp.net, google-docs, google-docs-api

我正在用 C#.net 开发一个 Web 应用程序。我需要自己在浏览器中编辑放置在服务器上的文件（无需在本地机器上下载），当我保存该文件时，更改应反映在文件中。为此，我想使用 google API，但我不知道如何使用它。我想做下面的事情。

1.  当我单击文件名时，它应该在浏览器中打开。
2.  单击编辑时，它会使用谷歌文档在浏览器中以编辑模式打开。
3.  当我保存该文件时，更改应反映在我放置在公司服务器上的文件中。

如何使用 google doc API 完成所有这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:51:26.763

在您的服务器上安装 Google Drive。
在 Google 文档中编辑文件，让 Google Drive 将其同步到本地硬盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:04:20.940

您可以在网页中嵌入谷歌文档。但是该文件将被访问并保存在 Google 的服务器上，而不是您的公司服务器上：Wordpress 允许您这样做。您可能会看到是否可以以类似的方式进行操作： http: [//en.support.wordpress.com/google-docs/](http://en.support.wordpress.com/google-docs/)

我不确定谷歌是否可以选择从谷歌域之外的服务器访问文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:02:16.567

HTTP 协议是不可能的，因为基础系统不支持。您可以打开该文件，但该文件将被下载到您的本地计算机然后它会打开，您必须在 IIS 中指定 MIME 类型。

您可以使用两种方法来完成类似的工作。

1 通过使用 FTP

2 定制解决方案：使页面放置一个文本字段并在其中加载文件（.cs）并提交将其保存到文件中。

# android - DragSortListView 和 AlertDialog？

> ID：12927362
> 
> 赞同：1
> 
> 时间：2012-10-17T04:53:55.463
> 
> 标签：android, listview, sorting, drag-and-drop

我一直在尝试获取这个库： [https ://github.com/bauerca/drag-sort-listview/](https://github.com/bauerca/drag-sort-listview/)

在 AlertDialog 中工作。但到目前为止我还没有成功。一切看起来都很完美，但拖放不会发生。

有什么建议可以做到吗？如果在 AlertDialog 中没有办法做到这一点，有没有办法在不使用意图的情况下做到这一点？

这是我的代码：

```
public class FolderSorter
{
    Context parent;
    ArrayList<String> lists;
    ArrayAdapter<String> adapter;

    public FolderSorter(Context context)
    {
        this.parent = context;
        lists = new ArrayList<String>();

        adapter = new ArrayAdapter<String>(parent, R.layout.list_item1,
        R.id.text1);
    }

    public void setList(List<String> mlist)
    {
        this.lists.addAll(mlist);
    }

    public void doSort()
    {
        LayoutInflater factory = LayoutInflater.from(parent);
        final View lview = factory.inflate(R.layout.sort_folders, null);
        AlertDialog.Builder builder = new AlertDialog.Builder(parent);
        builder.setTitle("Sort Folders");
        builder.setView(lview);

        // ListView list = (ListView) lview.findViewById(R.id.listView1);
        DragSortListView list2 = (DragSortListView) lview
        .findViewById(R.id.dragSortListView1);

        adapter.addAll(lists);
        // list.setAdapter(adapter);
        list2.setAdapter(adapter);

        // TODO: set buttons OK and CANCEL
        builder.setNegativeButton("Cancel",
        new DialogInterface.OnClickListener()
        {

            @Override
            public void onClick(DialogInterface dialog, int id)
            {
            }
        });

    builder.setPositiveButton("OK", new DialogInterface.OnClickListener()
    {

        @Override
        public void onClick(DialogInterface dialog, int id)
        {
        }
    });

    final Dialog dialog = builder.create();
    dialog.show();
    }

    private DragSortListView.DropListener onDrop = new DragSortListView.DropListener()
    {
    @Override
    public void drop(int from, int to)
    {
        String item = adapter.getItem(from);
        adapter.remove(item);
        adapter.insert(item, to);
    }
    };

    private DragSortListView.RemoveListener onRemove = new DragSortListView.RemoveListener()
    {
    @Override
    public void remove(int which)
    {
        adapter.remove(adapter.getItem(which));
    }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:28:09.763

在对话框片段中使用 DragSortListView 时，我遇到了类似的问题 - 事实证明，这只发生在显示片段时软键盘可见时。我不确定确切的问题是什么，但我认为有些东西干扰了 DragSortListView 使用的焦点或触摸事件。

作为一种解决方法，我在显示片段之前隐藏了软键盘，这似乎暂时解决了这个问题 - 有关如何执行此操作的代码，请参见以下答案：

[https://stackoverflow.com/a/7696791/1062909](https://stackoverflow.com/a/7696791/1062909)

# android - 高度始终为 0。我无法获得海拔高度

> ID：12927363
> 
> 赞同：3
> 
> 时间：2012-10-17T04:54:02.360
> 
> 标签：android, altitude

我得到的高度总是 0。我想在 Android 中使用 GPS 获得海拔高度。

我的代码是：

```
public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    double alt = (double) (location.getAltitude());
    latitudine = (int) (lat * 1e6);
    longitudine = (int) (lng * 1e6);
    altitudine = (int) (alt * 1e6);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T05:24:09.580

您是否检查过这是否是特定于设备的？你在模拟器中工作吗？

我首先会检查您的设备是否支持高度确定：

```
LocationManager locationManager; LocationProvider locationProvider;

/* Get LocationManager and LocationProvider for GPS */
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
locationProvider = locationManager.getProvider(LocationManager.GPS_PROVIDER);

/* Check if GPS LocationProvider supports altitude */
locationProvider.supportsAltitude(); 
```

如果您想知道某个位置是否设置了有效的海拔高度，请使用以下命令：

```
Location location;

/* Get current location from GPS */
location = Location(LocationManager.GPS_PROVIDER);

/* Check if the requested Location has its altitude set */
location.hasAltitude(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:26:28.307

您应该检查位置是否包含高度信息：在调用之前`location.getAltitude()`，只需调用`location.hasAltitude()`以了解返回的位置是否包含此类信息。

根据您使用的位置提供商（网络或 GPS），它可能不支持高度确定。如果您有一个适用于海拔高度的应用程序，请尝试查找它正在使用的位置提供程序。

如果你想检查一个特定的位置提供者是否支持高度，首先调用`LocationManager.getProvider(SensorManager.GPS_PROVIDER)`获取`LocationProvider`然后调用方法`locationProvider.supportsAltitude()`。

# ajax - XMLHttpRequest.addEventListener 与 XMLHttpRequest.upload.addEventListener

> ID：12927365
> 
> 赞同：11
> 
> 时间：2012-10-17T04:54:23.483
> 
> 标签：ajax, html, xmlhttprequest-level2

此代码块有什么区别：

```
var xhr = new XMLHttpRequest();
xhr.upload.addEventListener("progress", uploadProgress, false);
xhr.addEventListener("load", uploadComplete, false);
xhr.addEventListener("error", uploadFailed, false);
xhr.addEventListener("abort", uploadCanceled, false);

xhr.open("POST", "upload_url");
xhr.send(some_form_data); 
```

还有这个：

```
var xhr = new XMLHttpRequest();
xhr.upload.addEventListener("progress", uploadProgress, false);
xhr.upload.addEventListener("load", uploadComplete, false);
xhr.upload.addEventListener("error", uploadFailed, false);
xhr.upload.addEventListener("abort", uploadCanceled, false);

xhr.open("POST", "upload_url");
xhr.send(some_form_data); 
```

我在博客和其他 SO 帖子中都看到了这两种实现，但没有人解释为什么它们使用一种而不是另一种。在这一点上我能找到的唯一区别是后者不适用于默认的 Android 浏览器，而前者似乎几乎适用于所有东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-18T02:38:17.260

根据关于 XMLHttpRequest 的 w3c 规范。[http://www.w3.org/TR/XMLHttpRequest/#the-upload-attribute](http://www.w3.org/TR/XMLHttpRequest/#the-upload-attribute)

> 如前所述，每个 XMLHttpRequest 对象都有一个关联的 XMLHttpRequestUpload 对象。
> 
> 下载和上传传输都存在进度事件。下载事件在 XMLHttpRequest 对象本身上触发，如上面的示例所示。上传事件在 XMLHttpRequest.upload 对象上触发

# php - 优化逻辑以找到高分

> ID：12927366
> 
> 赞同：0
> 
> 时间：2012-10-17T04:54:42.377
> 
> 标签：php

基本上，这与我们有 2 个分数的壁球应用程序有关。一种是从赢家的角度来看，另一种是从输家的角度来看。

例如。得分1：11-5,11-5,11-5（获胜者观点）得分2：5-11、5-11,5-11（失败者观点）

现在在我的逻辑中，我想找出哪个是获胜者得分，哪个是失败者得分。

我已经用下面的方式编写了我的逻辑并且它确实有效。但我想知道他们是否有其他更好/优化的方式来写这个。

```
$high1 = 0;
$high2 = 0;

$score1 = "2-11,5-11,4-11,4-4";
$score2 = "11-2,11-5,11-4,4-4";

$score1Array = explode(",",$score1);

$size = sizeof($score1Array);

for($i = 0; $i < $size; $i++) {

$checkscore1 = explode("-",$score1Array[$i]);

if($checkscore1[0] < $checkscore1[1]) {

    $high1++;

}else if($checkscore1[0] > $checkscore1[1]) {

    $high2++;

}

}

if($high1 > $high2) {

$winningScore = $score2;
$losingScore = $score1;
}else{

$winningScore = $score1;
$losingScore = $score2;
}

echo $winningscore;
echo $losingscore; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:08:32.757

像这样的东西怎么样：

```
function is_winning($score) {

  $split_scores = preg_split('/(-|,)/', $score);
  $wins = $losses = 0;

  for($i = 0; $i < count($split_scores) / 2; $i += 2) {
    if($split_scores[$i] > $split_scores[$i + 1])
      $wins++;
    if($split_scores[$i] < $split_scores[$i + 1])
      $losses++;
  }

  return $wins > $losses;

} 
```

假设`$score`格式与您的问题相同。然后你可以像这样使用它：

```
$score1 = "2-11,5-11,4-11,4-4";
$score2 = "11-2,11-5,11-4,4-4";

if(is_winning($score1)) {
  $winning_score = $score1;
  $losing_score = $score2;
} else {
  $winning_score = $score2;
  $losing_score = $score1;
}

echo $winning_score;
echo $losing_score; 
```

这个想法是将分数分成一个数组，其中偶数索引具有左分数，奇数索引具有右分数。然后我们计算获胜次数和失败次数。如果赢的比输的多，那么我们就返回真，因为这个分数是一个胜利的分数。如果没有更多的胜利那么损失我们只是返回假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:01:12.827

从获胜者的角度来看，所有大分都在左边，否则在右边。所以你可以检测到第一个分数。

```
$score1Array = explode(",",$score1);
$checkscore1 = explode("-",$score1Array[$i]);
if($checkscore1[0] < $checkscore1[1]) {
    echo $score2;
    echo $score1;
}else{
    echo $score1;
    echo $score2;
} 
```

**修正：上面的代码是错误的，试试这个：**

```
$score1value = eval(str_replace(",","+",$score1));
$score2value = eval(str_replace(",","+",$score2));

if($score1value < $score2value) {
    echo $score2;
    echo $score1;
}else{
    echo $score1;
    echo $score2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:00:57.440

这应该工作

```
$score1 = "2-11,5-11,4-11,4-4";
$score2 = "11-2,11-5,11-4,4-4";
$l = $r = 0;

$score1_sets_arr = explode(',', $score1);
foreach ($score1_sets_arr as $set_score) {
  $set_score_arr = explode('-', $set_score);
  if ($set_score_arr[0] > $set_score_arr[1]) {
    $l++;
  } else {
    $r++;
  }
}

if ($l > $r) {
  $winning_score = $score1;
  $losing_score  = $score2;
} else {
  $winning_score = $score2;
  $losing_score  = $score1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T06:14:05.293

你可以使用这个：

```
<?php
$high1 = 0;
$high2 = 0;

$score1 = "2-11,5-11,4-11,4-4";
$score2 = "11-2,11-5,11-4,4-4";

$explode = explode(",",$score1);

for($i=0;$i<  sizeof($explode);$i++){
    $explode2= explode("-", $explode[$i]);
    if($explode2[0] <= $explode2[1]){
        echo $explode2[0]."-";
        echo $explode2[1]." ";
    }

}
echo "<br />";
for($i=0;$i<  sizeof($explode);$i++){
    $explode2= explode("-", $explode[$i]);
    if($explode2[1] >= $explode2[0]){
        echo $explode2[1]."-";
        echo $explode2[0]." ";
    }

}

?> 
```

# asp.net - 在 asp.net 中创建图表

> ID：12927370
> 
> 赞同：1
> 
> 时间：2012-10-17T04:55:14.327
> 
> 标签：asp.net, charts

我知道 asp.net 图表，但我想创建不同风格的图表，例如：

![图形](../Images/1b6bda312df2402afe63e0a644fd6b27.png)

我已经在 asp.net 中尝试过，但我无法做到这一点。我认为谷歌的一些 API 或类似的东西可能会有所帮助。如果有人知道我如何创建这种风格的图表，请帮助我（最好有例子）。

我从[http://www.brecorder.com/获得了这个样本](http://www.brecorder.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:10:08.220

[http://www.brecorder.com/](http://www.brecorder.com/)为他们的图表使用 flash 对象。您可以[在 asp.net 上使用 Open Flash Chart或使用像](http://mitchelburton.com/tutorials/open-flash-charts-for-asp-net/)[Highcharts](http://www.highcharts.com/stock/demo/)这样的javascript 图表。查看[演示图表](http://www.highcharts.com/stock/demo/)。

# android - Android GridVIew 根据方向更改列数

> ID：12927373
> 
> 赞同：16
> 
> 时间：2012-10-17T04:55:49.877
> 
> 标签：android, android-layout, gridview

我想以网格的形式显示 6 张图像，如下所示。

纵向 2 列 3 行 横向 3 列 2 行

通过使用 Android GridView 并在 layout-port 和 layout-land 目录中定义不同的网格布局，我能够实现这种效果。

后来根据我的活动要求，我在 manifest.xml 中添加了一个参数，即

```
android:configChanges = "mcc|mnc|locale|touchscreen|keyboard|keyboardHidden|navigation|orientation|fontScale|screenSize"` 
```

停止我的活动以在屏幕方向更改后重新创建。

添加此参数后，我的网格视图未按预期方式运行。它有时显示 1 列，有时显示 2 列，有时显示 3 列。

我根据设备的方向在我的网格适配器的获取视图方法中放置`gridView.setNumberOfColumns(2)`或方法。`gridView.setNumberOfColumns(3)`

`android:configChanges`请帮我在不删除Manifest.xml中的参数的情况下实现这个效果

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-06-02T15:59:46.840

使用强大的资源系统。

在 xml 布局中，将列数设置为整​​数资源，然后`/values/integers.xml`将其设置为 2 用于纵向，`/values-land/integers.xml`将其设置为 3 用于横向

// 好吧，如果你在 manifest 中做 configChanges，你将不得不在 onConfogurationChanged 中改变 java 的列数

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T06:38:42.930

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    grid.setNumColumns(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE ? 3 : 2);
    super.onConfigurationChanged(newConfig);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-16T07:10:54.770

您可以使用以编程方式设置列数

```
float scalefactor = getResources().getDisplayMetrics().density * 100;
int number = getWindowManager().getDefaultDisplay().getWidth();
int columns = (int) ((float) number / (float) scalefactor);
gridView.setNumColumns(columns); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-10T20:26:47.690

我的解决方案：

**值/尺寸.xml：**

```
<resources>
    <dimen name="grip_view_entry_size">160dp</dimen>
    <dimen name="grip_view_spacing">10dp</dimen>
</resources> 
```

**布局/gridview.xml**

```
<GridView android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="@dimen/grip_view_spacing"
    android:horizontalSpacing="@dimen/grip_view_spacing"
    android:stretchMode="columnWidth"
    android:gravity="center"
    android:scrollingCache="false"
    android:fastScrollEnabled="true"
    android:animationCache="false"/> 
```

**在你的片段中：**

```
private void refreshGridView() {

    int gridViewEntrySize = getResources().getDimensionPixelSize(R.dimen.grip_view_entry_size);
    int gridViewSpacing = getResources().getDimensionPixelSize(R.dimen.grip_view_spacing);

    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();

    int numColumns = (display.getWidth() - gridViewSpacing) / (gridViewEntrySize + gridViewSpacing);

    gridView.setNumColumns(numColumns);
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    refreshGridView();
}

@Override
public void onResume() {
    super.onResume();
    refreshGridView();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T06:21:25.790

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {

        super.onConfigurationChanged(newConfig);
        if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
            setContentView(R.layout.lay_vertical);
        } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
            setContentView(R.layout.lay_horizontal);
        }

    }; 
```

然后根据需要再次加载gridview中的数据。

将该活动节点的 android:configChanges="orientation" 放入清单中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T05:11:55.013

当您在清单中使用 android:configChanges = "orientation" 时，您的活动不会在方向更改时重新创建（横向到纵向，反之亦然）。如果您不想从清单中删除此标记，则必须覆盖 onConfigchanged 并将一些代码逻辑放在那里。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-26T14:23:12.680

我是根据屏幕尺寸制作的，而不是 dpi

```
public static int getGridColumnsCount(Context context){
    boolean landscape = context.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;

    DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics();
    float hi=displayMetrics.heightPixels/displayMetrics.xdpi;
    float wi=displayMetrics.widthPixels/displayMetrics.ydpi;
    float screenWidthInch  = landscape ? Math.max(wi, hi) : Math.min(wi, hi);
    float screenWidthCm = screenWidthInch * 2.54f;
    int columns = (int)(screenWidthCm/2);
    return columns < 3 ? 3 : columns;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-20T19:47:49.857

这是 XML：

```
<GridLayout
    android:id="@+id/gridLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="@integer/num_columns"
    android:rowCount="@integer/num_rows"
    android:orientation="vertical">
    <!-- TextViews, ImageViews, etc -->
</GridLayout> 
```

然后在你的片段中：

```
@BindView(R.id.gridLayout) GridLayout gridLayout;

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    final ArrayList<View> views = new ArrayList<>();
    for (int i = 0; i < gridLayout.getChildCount(); i++) {
        views.add(gridLayout.getChildAt(i));
    }
    gridLayout.removeAllViews();
    gridLayout.setColumnCount(getContext().getResources().getInteger(R.integer.num_columns));
    gridLayout.setRowCount(getContext().getResources().getInteger(R.integer.num_rows));
    for (int i = 0; i < views.size(); i++) {
        views.get(i).setLayoutParams(new GridLayout.LayoutParams());
        gridLayout.addView(views.get(i));
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-30T04:26:07.280

将此代码添加到 onCreate

```
 gridView_menu.setNumColumns(getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT ? 3:4); 
```

# biztalk - 从编排调用 web/wcf 服务：添加生成的项目与添加服务引用

> ID：12927376
> 
> 赞同：4
> 
> 时间：2012-10-17T04:55:56.023
> 
> 标签：biztalk, biztalk-2010, biztalk-orchestrations, biztalk-wcf

如果我想从编排中调用 Web 服务或 wcf 方法，我可以通过向项目添加服务引用或添加生成的项来实现。这两种方法的优点是什么 - 是否有最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:26:01.697

Steef -Jan Wiggers[在这里回答了类似的问题](http://social.msdn.microsoft.com/Forums/eu/biztalkgeneral/thread/5bfe2015-813a-4910-9be9-05a2c81718f5)

**TL;DR** - 始终使用`Generated Items wizard`.

我的 10c - 虽然 Add Service 导入的 .xsd 文件被添加为架构并设置为 BtsCompile，但存在一些限制，例如：

*   添加服务引用将添加客户端代理，这在 BizTalk 项目中是不需要的（这可能会“诱使”您的开发人员做一些愚蠢的事情，例如从自定义程序集中使用此代理）
*   服务引用使导入复杂的 WSDL 变得一团糟（例如，使用泛型或依赖于其他模式），请参阅[使用 Web 服务时的注意事项](http://msdn.microsoft.com/en-us/library/aa561724(BTS.70).aspx)

使用`Add Generated Items`向导为您做了额外的工作：

*   添加用于访问服务的端口类型，已针对正确的消息类型进行了预配置。但是请注意，它将端口类型添加到虚拟 .odx - 即在您将端口类型移动到其他位置之前不要删除 odx。
*   允许您同时创建发送端口绑定。

我建议使用向导的一件事是为 WCF 引用创建一个文件夹，并始终将所有工件导入该文件夹（即，不要将架构与端口进行通常的分离，并将虚拟 .odx 也留在那里） . 这样，如果您需要重新生成项目，只需删除文件夹中的所有内容并重新开始（遗憾的是，向导没有`Update Service Reference`等效项。

另请注意，如果您确实将生成的模式和端口类型移动到单独的程序集中，您将需要更改类型修饰符访问权限`Public`（默认情况下是内部的）

# ios - 获取 Facebook 好友的电话和电子邮件

> ID：12927386
> 
> 赞同：1
> 
> 时间：2012-10-17T04:57:23.393
> 
> 标签：ios, facebook, facebook-graph-api

> **可能重复：**
> [Facebook API - 如何获取用户的地址、电话号码？](https://stackoverflow.com/questions/3402270/facebook-api-how-to-get-users-address-phone)

如果用户授予应用程序权限，是否可以获得朋友的电话号码和电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:07:19.200

根据隐私政策，Facebook 不提供 Facebook 朋友的电话和电子邮件。

你能从你自己或你的朋友那里得到的一切都[在这里](http://developers.facebook.com/docs/reference/login/user-friend-permissions/)。

# facebook - facebook api 获得超过 2 条评论或 4 条喜欢的完整帖子

> ID：12927389
> 
> 赞同：0
> 
> 时间：2012-10-17T04:57:27.960
> 
> 标签：facebook, node.js, facebook-graph-api, facebook-node-sdk

当我在 Facebook Open Graph API 上发出用户/提要请求时，我得到一个提要对象，其中具有 > 2 条评论或 > 4 条赞的帖子不会显示这些特定评论的详细信息。

我正在使用[https://github.com/Thuzi/facebook-node-sdk](https://github.com/Thuzi/facebook-node-sdk)发出请求，但它与“请求”NodeJS 库非常相似。

我可以通过对该帖子的 Open Graph ID 发出单独的请求来单独获取完整的帖子，但这并不适合有趣的代码，因为请求是异步的，并且在异步调用中嵌套更多的异步调用并不适合有趣的代码。

有什么办法可以获得完整的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:55:39.620

# php - 使用 PHP 旋转图像会降低质量，尤其是大约 10-20 次操作

> ID：12927395
> 
> 赞同：1
> 
> 时间：2012-10-17T04:58:08.240
> 
> 标签：php, image, image-processing, image-rotation

我正在使用下面的代码来旋转我的 jpeg 图像，问题是在旋转图像大约 10-20 次后，图像的质量显着降低，尤其是蓝天等，我的问题是如何保持这些图像相同高质量的图像？一定有办法的。我的意思是，对于上传的每个图像，我都将原始图像保留在服务器上，并且我对此不做任何事情，所以如果需要的话，我想我总是可以想出一些方法来尽可能地使用它。但宁可不必。

```
$source = imagecreatefromjpeg($filename);

$rotate = imagerotate($source, 90, 0);

imagejpeg($rotate, $filename ,100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:29:00.713

主要问题不是旋转，而是JPEG格式的保存。JPEG 总是有损的，即使设置为“100%”质量。结合实际更改图像，它会更快地恶化。如评论中所述，处理此问题的唯一真正方法是始终从源图像工作。跟踪应该应用于图像的更改，并将它们一次全部应用到一组转换中，以提供最高质量的图像。它有助于用户对图像执行有限数量的操作，例如“旋转 x 度”、“应用黑白滤镜”、“调整大小和裁剪”，并以严格的顺序应用一次。

# php - 删除落在选定列表之后的列表

> ID：12927396
> 
> 赞同：1
> 
> 时间：2012-10-17T04:58:25.550
> 
> 标签：php, javascript, cakephp

我遇到了一个问题，我想删除选定列表之后的所有列表。我在这里创建了[JS Fiddle](http://jsfiddle.net/8TZzD/1/)，但它不起作用。例如，如果我从第一个下拉菜单中选择项目，那么接下来的两个应该被删除，或者如果我从第二个下拉菜单中选择，那么第三个应该被删除。

### HTML

```
<div id='levels'>
<select id="level" class="parent" name="data[level][]">
    <option value="1">1</option>
<option value="2">2</option>
    </select>
    <select id="level" class="parent" name="data[level][]">
    <option value="3">3</option>
<option value="4">4</option>
    </select>
 <select id="level" class="parent" name="data[level][]">
    <option value="5">5</option>
<option value="6">6</option>
    </select>   
    </div> 
```

### Javascript

```
$("#levels").on('change', function() {
    $(this).nextAll().remove();

    });​ 
```

我想在不为每个列表分配不同的类名或 div 名称的情况下实现这一点。

**Cakephp 代码**

**主文件**

```
<script type="text/javascript">
$(document).ready(function() {

 $("select").on('change', function() {
    $(this).nextAll('select').remove();
        $("<div>").load('/dashboard/details/show_levels',function() {
    $("#levels").append($(this).html());

});
})

<div id=levels>

    <?php echo $form->input('level',array('options'=>$level,'type'=>'select','scroabble'=>true,'multiple'=>true, 'class'=>'parent')); ?>
</div>

}); 
```

**显示级别**

```
<?php
$abc=array('a','b','c','d');
echo $form->input('level',array('options'=>$abc,'type'=>'select','scroabble'=>true,'multiple'=>true, 'class'=>'parent')); ?> 
```

* * *

***更新：***

**以下解决方案对我有用**

更换

```
 $(this).nextAll('select').remove(); 
```

和

```
$(this).parents().nextUntil().remove(); 
```

不知道它是如何工作的，两者之间有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:03:18.133

试试这个

```
$("select").on('change', function() {
$(this).nextAll('select').remove();
});​ 
```

[小提琴](http://jsfiddle.net/pintu31/8LYz8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T05:05:55.253

正如您所说的“隐藏”，我不确定您是否想要`remove`它们，但是要`change`用于您的场景，您可以使用以下内容：

```
$(document).ready(function () {
    $("#levels").on("change", ".parent", function () {
        $(this).nextAll().hide();
    });
}); 
```

顺便说一句，你的`<select>`元素需要有独特的`id`属性，并不是所有的都有“级别”。

对我来说更有意义的事情是这样的：

[http://jsfiddle.net/HRh2d/](http://jsfiddle.net/HRh2d/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:15:31.633

**以下解决方案对我有用**

更换

```
 $(this).nextAll('select').remove(); 
```

和

```
$(this).parents().nextUntil().remove(); 
```

不知道它是如何工作的，两者之间有什么区别。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T05:04:48.150

尝试 .siblings() 而不是 nextAll

此外，您的选择应该有唯一的 ID

# c - 将 char* 转换为 char**

> ID：12927403
> 
> 赞同：1
> 
> 时间：2012-10-17T04:59:42.470
> 
> 标签：c, casting

我很难理解以下代码：

```
int stride = 512;
int max_len = 1024 * stride; 
char *addr = (char *)malloc(max_len);
for (int i=stride; i<max_len; i += stride)
    *(char **)&addr[i-stride] = (char*)&addr[i];
*(char **)&addr[i-stride] = (char*)&addr[0]; 
```

查看代码，这似乎是在尝试创建某种循环链接列表。但我不知道这些演员实际上在做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T05:06:50.390

恕我直言，您提供的代码品味不佳。

`*(char **)&addr[i-stride] = (char*)&addr[0];` 正在将指针指向`addr`某个动态分配的区域（`(char*)&addr[0]`可以编写`addr`更简单的右侧部分），然后将该地址复制到位于位置的内存中`addr[i-stride]`。

这实际上可能是错误的（未定义的行为），例如，当`&addr[i-stride]`（可以写成`addr+i-stride`）在某些处理器上不是字对齐时。在您的情况下，`i`恰好是 512，因此该地址是字对齐的（因为给出了一个对齐良好的区域）。`max_len``stride``malloc`

代码的原始作者可能应该声明 a `struct`（或者可能是 a `union`），例如

```
 struct buffer_st {
    struct buffer_st* next;
    char content[];
 }; 
```

# return - 为什么我们在响应之后使用返回？

> ID：12927407
> 
> 赞同：0
> 
> 时间：2012-10-17T05:00:19.840
> 
> 标签：return, response, webforms

我听说我们应该在“响应”之后使用“返回”。为什么？像这样 ：

```
Response.Redirect("../Login.aspx");
return; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:01:44.983

这可能只是 C# 开发的产物。无论调用 `return`中发生什么，每个 C# 方法都需要一个语句。`Response.Redirect`

您可能假设`return`不会执行，但事实并非如此。 `Response.Redirect`，一旦被调用，实际上确实将控制权传递回 C# 方法中的下一条语句，就像任何其他方法调用一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:32:45.873

'Response.Redirect' 没有完成代码处理。它只是指示服务器向客户端发送一个[`HTTP 302 Found`](http://en.wikipedia.org/wiki/HTTP_302)。然后客户端提交（从技术上讲，它不需要，但像 Web 浏览器这样的“普通”客户端会这样做）对`HTTP 302`标头后给出的新 URL 的请求。

例如，您可以在 之后执行其他服务器端任务`Response.Redirect`，它们将运行。

# java - excel文件到分隔的dat文件

> ID：12927412
> 
> 赞同：0
> 
> 时间：2012-10-17T05:01:08.663
> 
> 标签：java, excel, apache-poi

我正在阅读如下的excel文档：

```
package com.sample.file;

//necessary imports goes here

public class ExcelReader { 
   public static void main(String[] args) throws Exception{ 

  String fname = "C:\\myExcel.xls"; // or  "C:\\myExcel.xlsx"  
  InputStream inp = new FileInputStream(fname); 
  Workbook wb = WorkbookFactory.create(inp); 
  Sheet sheet = null; 

  sheet = wb.getSheetAt(0); 

  Iterator rows = sheet.rowIterator(); 

  while (rows.hasNext()) 
    { 
            Row row = (Row) rows.next(); 

            // how to write to a semicolon delimited dat file here
    }

  inp.close(); 
} 
} 
```

如上所示，我能够读取该行。但是，现在我想将该行写入分号分隔的 dat 文件中。

此外，如果一列是空的，它应该在文件中作为一个空值，即连续分号之间没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:21:49.260

```
final StringBuilder sb = new StringBuilder("");
while (rows.hasNext()) {
    Row row = (Row) rows.next(); 
    // how to write to a semicolon delimited dat file here
    Iterator<Cell> cells = row.cellIterator();

     while (cells.hasNext()) {
        Cell cell = cells.next();
        sb.append(cell.toString()).append(";");
    }
    sb.append("\n");
}   

File file = new File("someFile.dat");

if (!file.exists()) {
    file.createNewFile();
}

FileWriter fw = new FileWriter(file.getAbsoluteFile());
BufferedWriter bw = new BufferedWriter(fw);
bw.write(sb.toString());
bw.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:06:35.393

假设“row.toString”返回一些字符串添加“row.toString”到stringbuilder，分号分隔

然后在你的while循环之后

```
 File file = new File("filename.txt");

            // if file doesnt exists, then create it
            if (!file.exists()) {
                file.createNewFile();
            }

            FileWriter fw = new FileWriter(file.getAbsoluteFile());
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(content.toString); //content is your stringbuilder
            bw.close(); 
```

# javascript - 如何在我的 IOS 应用程序中包含我的 html 页面的 js 文件？

> ID：12927416
> 
> 赞同：2
> 
> 时间：2012-10-17T05:01:12.793
> 
> 标签：javascript, iphone, html, ios, uiwebview

当我尝试在 UIWebView 中加载 html 字符串时遇到问题。这就是我正在做的

```
NSString *temp = [[NSString alloc] initWithFormat:@"<head><script type='text/javascript' src='code39.js'></script><style type='text/css'>#barcode {font-weight: normal; font-style: normal; line-height:normal; sans-serif; font-size: 12pt}</style></head><body><script type='text/javascript'>function get_object(id) {var object = null;if (document.layers) {object = document.layers[id];} else if (document.all) {object = document.all[id];}return object;}get_object('barcode').innerHTML=DrawCode39Barcode('%@',2);</script></body>",[count objectAtIndex:i]];

[mainWebView loadHTMLString:temp baseURL:nil]; 
```

所以这是问题所在：

```
<script type='text/javascript' src='code39.js'> 
```

如何在我的应用程序中添加 code39.js 文件，以便我的 html 可以访问它并将其加载到 UIWebview 中。

请帮忙...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T05:59:37.253

### 最简单的解决方案

假设您的应用程序附带 JavaScript 代码，并且不通过网络获取它，一个简单的解决方案是使您的 JavaScript 代码内联而不是外部资源。也就是说，您可以将内容放在标签`code39.js`之间`<script>`，就像您的其他 JavaScript 代码一样。

当然，如果您想添加大量代码，这不会很好地工作，并且会使您的 HTML 进一步复杂化。您的`NSString`声明将很快变得（甚至更多）笨拙！

* * *

### 替代方案：将脚本添加为资源

您可以将 JavaScript 文件添加为要包含在应用程序包中的资源文件。为此，只需添加`code39.js`到您的 Xcode 项目中。

请注意，默认情况下，Xcode 会将`.js`文件添加到您的“编译源”构建阶段。你**不**想要这个；您想将文件视为资源。值得庆幸的是，它很容易修复：

1.  选择顶级项目以访问其设置。
2.  单击您的应用程序目标，然后选择“构建阶段”。
3.  将您的`.js`文件拖出“编译源”部分并进入“复制捆绑资源”部分。

这将确保 Xcode 在您构建应用程序时将脚本文件复制到“资源”目录。

### 查找脚本资源的 URL

将脚本作为资源包含后，您需要找到指向其在文件系统上的位置的 URL。幸运的是，Cocoa 让这很容易做到：

```
NSURL* url = [[NSBundle mainBundle] URLForResource:@"code39" withExtension:@"js"]; 
```

`url`您返回的是应用程序包中文件的绝对URL `code39.js`。从那里，将这个 URL 插入另一个字符串应该很简单，如下所示：

```
NSString* html = [NSString stringWithFormat:@"<script src='%@'>", url]; 
```

加载 HTML 后，`UIWebView`将具有脚本的完整 URL，并且应该执行。此方法在我刚刚为 iOS 6.0 创建的测试项目中有效。

* * *

（旁注：我强烈建议您也将 HTML 内容与源代码分开。您可以轻松调整上述方法，将纯文本文件的内容读入`NSString`.）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:32:50.057

在 Xcode 中打开项目。转到“目标”并查看“编译源”。如果您在该文件夹中看到您的 js 文件，请将其移至“Copy Bundle Resources”文件夹并从“Compile Sources”文件夹中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:37:22.133

如果将 js 文件添加到项目中，希望下面的代码能够正常工作。

```
[mainWebView loadHTMLString:temp baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

或者 -- 如果是从服务器接收到的 js 文件，将 code39.js 文件放在应用程序的文件夹中。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *basePath = [paths objectAtIndex:0];
   NSURL *baseURL = [NSURL fileURLWithPath:basePath];
   [mainWebView loadHTMLString:temp baseURL:baseURL]; 
```

希望这能解决问题:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:04:32.047

好吧，它有点复杂。如果是html文件，就使用相对路径。如果html写的是objective-c代码，你需要设置一个http服务器，比如[https://github.com/robbiehanson/CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)，并使用js的绝对路径。

# javascript - 无法将背景图像放入另一个图像中

> ID：12927417
> 
> 赞同：0
> 
> 时间：2012-10-17T05:01:27.170
> 
> 标签：javascript, html, css

看着这个网站，我注意到显示页面的背景图像从显示器的侧面溢出。有没有办法解决这个问题？

img src="img/laptop.png" id="laptop" class="tour" alt="laptop" />

笔记本电脑是具有透明中心的png。然后我在笔记本电脑上应用了一个类，它将在笔记本电脑后面应用背景图像。IE

.tour { background: url("../img/tour.jpg") center top no-repeat; }

当某些图像大于笔记本电脑的宽度时会出现问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:17:50.513

最简单的方法是将笔记本电脑图像的背景设置为白色，然后覆盖图像中“渗出”的部分。

另一个快速的解决方案是调整所有背景图像的大小，以使它们正确地适合显示器。

我认为正确执行此操作的方法是拥有一个绝对定位的元素，该元素适合笔记本电脑屏幕的范围并显示图像。

类似的东西

```
<div class='image-container' style='position: relative;'>
    <div id='background' style='position: absolute; left: 100px; right: 100px; top: 30px; bottom: 120px;></div>
    <img src='img/laptop.png' />
</div> 
```

这需要对图像的实际边距进行一些适当的测量/测试，并且需要更改 javascript 和 css 才能正常工作/看起来正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:29:52.373

不要为“container clearfix”类指定宽度，然后添加一个适当的宽度，比如大约 920px 到显示器，这样它的尺寸就更适合覆盖您正在使用的照片。

# java - 以编程方式从菜单栏打开菜单（以编程方式模拟菜单单击以进行 UI 自动化测试）

> ID：12927419
> 
> 赞同：1
> 
> 时间：2012-10-17T05:01:42.123
> 
> 标签：java, swt, eclipse-rcp

`MenuManager`并且`MenuContribution`项目已经创建。

对于输入的项目 ID/标签，我需要有问题地从in`Menu`下拉/打开/显示一个`menu`项目。我想我可能需要触发一些事件。`menubar``Eclipse`

这是 UI 自动化的要求，`Menu`应该自动下拉。

能否请您尽早提供帮助。`mouse click event`我正在尝试关注，但这里不确定如何设置应该触发的 x & y 坐标。

代码：

```
String toCompare = "File";
Menu menu = window.getShell().getMenuBar();
if(menu!=null && !menu.isDisposed()){
    MenuItem[] items = menu.getItems();
    for(int i=0;i<items.length;i++){
        String menuText = LegacyActionTools.removeMnemonics(items[i].getText());
        if(toCompare.equalsIgnoreCase(menuText)){
            Event event = new Event();
            event.doit = true;

            event.widget = items[i];
            event.type = SWT.MouseDown;
            event.button = 1;

            boolean success = items[i].getDisplay().post(event);
            System.out.println("Could we generate the event ? "+success);
        }                       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:53:59.837

为什么不使用专用的 UI 测试工具，例如[SWTBot](http://eclipse.org/swtbot/)。它似乎通常与你会做的事情相匹配

# tfs - TFS 删除 - 项目 XXX 已经有待处理的更改。没有参数匹配任何要删除的文件。如何删除一个项目？

> ID：12927424
> 
> 赞同：5
> 
> 时间：2012-10-17T05:02:21.173
> 
> 标签：tfs

我正在尝试从 TFS 中删除一个文件。

所以我按这个顺序运行以下命令 -

tfs get ....
tfs checkout ....
tfs get ....
tfs delete ....（此时失败）
tfs checkin ......

运行此命令时 tfs delete 失败并出现此错误

***项目 XXX 已有待定更改。没有参数匹配任何要删除的文件。***

我不明白我在做什么错？有解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T05:20:58.487

谁对文件有待处理的更改？你？如果是这样，那么就`undo changes`在它上面然后删除它。

如果您不是等待更改的人，那么您需要让 TFS 管理员为您执行撤消更改操作。

或者，如果您从命令行执行此操作并且具有足够的权限，则使用该`/force`开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T20:57:22.823

我有一个类似的问题，`tf undo FULLFILEPATH`然后跑了`tf delete FULLFILEPATH`。没多久就被删了。就像@slugster 说的那样，如果您不拥有更改，则必须让管理员为您完成更改。

# java - 音频文件未出现在播放音乐应用程序中

> ID：12927425
> 
> 赞同：1
> 
> 时间：2012-10-17T05:02:28.447
> 
> 标签：java, android, android-activity

所以我有一个android应用程序，我从服务器获取音频文件并将文件写入我的sdcard：

```
InputStream inputStream = resp.getEntity().getContent();
File mess = new File("sdcard/Music/message"+ i +".3gp");

OutputStream out = new FileOutputStream(mess);

int read = 0;
byte[] bytes = new byte[1024];

while ((read = inputStream.read(bytes)) != -1) {
    out.write(bytes, 0, read);
}

inputStream.close();
out.flush();
out.close(); 
```

但是，当我这样做时，我的文件不会出现在播放音乐应用程序中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:05:14.523

试试这个代码：

```
File f = new File(Environment.getExternalStorageDirectory(),"/Music/message\"+ i +\".3gp\"") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:58:13.140

我猜您下载的文件尚未插入媒体提供商数据库，因此不会出现在 Play Music 应用中。

您可以在下载文件后尝试触发对 sdcard 的重新扫描：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" +   Environment.getExternalStorageDirectory()))); 
```

# java - 将 Java 对象转换为 Java 映射

> ID：12927426
> 
> 赞同：13
> 
> 时间：2012-10-17T05:02:41.397
> 
> 标签：java, json, map, casting, jetty

我正在使用**org.eclipse.jetty.util.ajax.JSON**来解析 JSON 文本。但是**JSON.parse(string)**方法会生成一个 Object，我需要它作为 Map。在内部，它正是上述类的对象。但是，如何在不构造新对象或收到未经检查的强制转换警告的情况下将对象转换为地图？

目前，我只找到了一个没有未经检查的强制转换警告的解决方案，而是构建了一个新的 Map，这实际上当然根本不是强制转换。

```
private Map<String,Object> getMap(String string) {
    HashMap<String,Object> result = new HashMap<>();
    Object object = JSON.parse(string);
    if (object instanceof Map) {
        Map<?,?> map = (Map)(object);
        for (Map.Entry<?,?> entry : map.entrySet()) {
            String key = entry.getKey().toString();
            Object value = entry.getValue();
            result.put(key,value);
        }
    }
    return result;
} 
```

那么是否有办法在没有未经检查的强制转换警告的情况下正确转换它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T05:07:28.883

编译器不能保证强制转换是安全的。由于您是做出保证的人，因此您应该使用`@SuppressWarnings("unchecked")`

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SuppressWarnings.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SuppressWarnings.html)

正如@TedHopp 指出的那样，应该使用该库的方式是将返回的每个值转换`Object`为您知道的类型（但您必须转换您检索的每个属性）请参阅此处的映射[http：/ /download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.html)

它带来的一点是，您保证此 JSON 对象仅包含其他 JSON 对象（映射到对象）

因此，如果由于某种原因您通过了输入

```
// properties are not quoted for readability
{ a: 2, b : {c:3} } 
```

当您尝试时，您的代码会因无效的强制转换异常而失败

```
map.get("a") 
```

所以请记住，您是保证您解析为 JSON 的字符串中的内容的人

如果你不能保证，你就不能创建你想要的这个getMap函数。您必须`@SupressWarnings`在知道特定对象是什么类型的地方进行强制转换（和）。

对于使用 JSON 时的某些类型安全性，您应该了解

*   [http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Convertor.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Convertor.html)
*   [http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Convertible.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Convertible.html)
*   [http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Generator.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/util/ajax/JSON.Generator.html)

这些类允许您将 JSON 直接读入 Java 类

# android - 如何在achartengine中合并时间间隔

> ID：12927435
> 
> 赞同：2
> 
> 时间：2012-10-17T05:04:00.970
> 
> 标签：android, merge, achartengine

我正在将 android achartengine 库用于基于股票交易的应用程序。我需要合并两个交易时段的图表。我不想显示市场暂停时间之间的界限。即 9:30 AM-12:30 PM 和 2:30 PM-5 PM 是两个时段。12:30-2:30 是市场暂停时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:06:52.063

当需要在 AChartEngine 中显示中断行时，需要添加空值。`MathHelper.NULL_VALUE`这意味着您需要在没有值的样本之间的间隔中添加至少一个。在您的示例中，在 12:30 到 2:30 之间的某个地方需要一个空值。

请查看[此](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/SensorValuesChart.java)示例以更好地理解。

# javascript - 将 edomz 广告代码添加到 .js 中？

> ID：12927436
> 
> 赞同：1
> 
> 时间：2012-10-17T05:04:08.287
> 
> 标签：javascript

我有一个文件 1.js，它加密 base 64 中的链接。 [http://filmyfundaz.com/1.js]

这个 1.js 加密了我想要的域链接；例如，转到 get-pg.com，然后向下滚动到底部。

你会发现类似..

[http://6b3790d1.linkbucks.com/url/http://filmyfundaz.com/download.php?link=aHR0cDovL3d3dy5nb29nbGUuY29tLw==](http://6b3790d1.linkbucks.com/url/http://filmyfundaz.com/download.php?link=aHR0cDovL3d3dy5nb29nbGUuY29tLw==)

单击此链接将打开 linkbucks 侧边栏广告，当您点击立即下载按钮时，它将转到 Google.com。

我只想将 edomz popunder 代码添加到我的 1.js 文件中，而不会丢失我的 1.js 文件的链接转换功能。

我想在这个 1.js 中添加的广告代码是：

```
<script type="text/javascript"><!--
ps_username = "myusername";
ps_website_id = mysiteID;
ps_ad_cap = 0;
ps_ad_open = 1;
ps_ad_type = 1;
ps_page_url = document.location;
-->
</script>
<script type="text/javascript" src="http://www.edomz.net/popup.js"></script> 
```

有任何想法吗 ？

# c# - 如何在面板中找到控件（通过文字添加）

> ID：12927441
> 
> 赞同：0
> 
> 时间：2012-10-17T05:04:28.273
> 
> 标签：c#, asp.net

Textbox1.text 是用户可以输入html页面名称，以便通过文字附加到面板。（加载html页面到面板）。

```
string val = TextBox1.Text;
string location = Server.MapPath(".");
string path = location + "\\HTML\\" + val + ".html"; // HTML IS FOLDER NAME IN MY PROJECT
string readText = System.IO.File.ReadAllText(path);
Panel1.Controls.Clear();
Literal lit = new Literal();                
lit.Text = readText;
Panel1.Controls.Add(lit); 
```

实际上，在 Html 页面中，很少有输入格式的控件（`<input style="position: relative;" id="T0" onmouseup="mUp(this.id)" class="ui-draggable" onmousedown="mDown(this.id)" value="" type="text">`）我必须找到这些 id 和文本以保存在数据库中。现在如何在面板中找到控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:10:20.533

添加控件时为其提供一个 ID。

```
Literal lit = new Literal();                
lit.Text = readText;
lit.ID = "myLiteral";
Panel1.Controls.Add(lit); 
```

然后你可以按如下方式取回它：

```
Literal lit = (Literal)Panel1.FincControl("myLiteral"); 
```

`PostBack`请记住，只要您想访问它们，就必须在随后的每个控件上再次创建动态添加的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:09:25.527

为您的 Literal 提供一个 ID，然后您可以通过 FindControl 访问它...

```
Literal myLiteral = Panel1.FindControl("litId") as Literal;
if (myLiteral != null)
{
    // ... do something
} 
```

编辑：（错过了你问题的最后一部分）

您需要在返回控件的 HTML 内容上使用 ParseControl([string value])，然后将该控件（包含所有子控件）添加到面板。然后你可以使用 FindControl 来定位子控件。对于此方法，控件必须是 .NET 控件（即。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:11:18.900

由于您没有为控件提供 id，您可以通过 Panel1.Controls[index] 找到它们，因为它是您可以在 Panel1.Controls[0] 访问的第一个添加的控件

# c++ - 让一个类存储未知数据

> ID：12927444
> 
> 赞同：1
> 
> 时间：2012-10-17T05:04:46.837
> 
> 标签：c++, list, class, types, member

### 关于在类中存储未知数据的问题

如何在 C++ 中提供一个能够存储任何类型的任意数量变量的类？我想从课堂内外阅读、添加、修改和删除这些数据。

所以我正在寻找的可能是一个数据类型可以变化的列表。

### 示例用法如何看起来像

```
Class Object();
Object->Storage->Create("position", "float");    // create
Object->Storage->Write("position", 42.0f);       // write
int Result = Object->Storage->Read("position");  // read
Object->Storage->Delete("position");             // delete 
```

### 如何做到这一点或为什么以另一种方式做到这一点

我的问题是是否有解决这个问题的通用方法以及什么是好的解决方案。如果我的想法不正确，并且有另一种技术或地方可以为我的目标存储数据*（下一段）* ，请告诉我。

### 可选的背景信息和背景

这种需求背后的原因是我正在编写一种基于组件的游戏引擎。有组件和系统。系统可以是标题菜单或世界级别，我可以根据需要向其中添加任意数量的组件。每次游戏滴答，系统都会在其所有组件上调用一个指定的方法。组件是例如物理、地形、绘图、字符、声音…… 所提到的未知数据结构是组件应该能够存储在其系统中的内容。组件几乎是静态的，它的状态取决于它使用的存储。此存储系统（与事件管理器一起）用于在组件之间进行通信。

### 编辑：

通过研究，我发现我想要的在软件设计中被称为**以数据为中心**或**[面向数据。](https://stackoverflow.com/questions/1641580/what-is-data-oriented-design)**现在我有了一个起点，可以对这个话题进行更多的研究。谢谢迈克尔安德森的回答，我可能会使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:17:39.740

你可能想用[`boost::any`](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html)这种东西。

您的代码将如下所示：

```
std::map<std::string,boost::any> object;
object["position"] = 42.0f;

//This will throw if the type is wrong
int Result = boost::any_cast<float>(object["position"]);
object.erase("position"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:07:44.797

标准模板库 (STL) - 更具体地说，使用地图 - 不能满足您的需求吗？

[http://en.cppreference.com/w/cpp/container/map](http://en.cppreference.com/w/cpp/container/map)

您可以使用地图来保存以下任一值：

1) 一个“CustomObject”，它是所有可能的变量/对象类型的联合。

2) 指向实际对象/变量的指针。

# dependencies - dart pub 依赖指向本地机器上的一个库

> ID：12927447
> 
> 赞同：1
> 
> 时间：2012-10-17T05:04:54.873
> 
> 标签：dependencies, dart, dart-pub

例如，我创建了一个库，但它只存在于我的本地机器上。我想创建一个单独的应用程序，它使用这个库。我怎么能用 pub 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T06:48:37.707

这可以通过以下方式实现`path`：

```
dependencies:
  transmogrify:
    path: /Users/me/transmogrify 
```

从[文档中](http://pub.dartlang.org/doc/dependencies.html#path-packages)：

> 这表示 transmogrify 的根目录是 /Users/me/transmogrify。当您使用它时，pub 将生成一个符号链接，直接指向引用的包目录的 lib 目录。您对依赖包所做的任何更改都会立即看到。每次更改依赖包时都不需要运行 pub。

# zk - 在 ZK 中单击按钮时水平展开/折叠窗口/Hbox

> ID：12927451
> 
> 赞同：0
> 
> 时间：2012-10-17T05:05:24.267
> 
> 标签：zk, hbox, zul

我想在 ZK 中单击图像按钮时水平（东/西）而不是垂直（北/南）展开和折叠 hbox/窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:17:24.567

我认为 ZK 布局将帮助您完成任务。

[ZK 布局演示示例](http://www.zkoss.org/zkdemo/layout/business_portal)

# actionscript-3 - 在标签中，未显示模块中使用的值

> ID：12927457
> 
> 赞同：2
> 
> 时间：2012-10-17T05:06:22.047
> 
> 标签：actionscript-3, apache-flex, flex3

我正在尝试调用模块的函数（具有两个参数）并为其赋值。我可以看到在跟踪中分配的值，但是在分配给标签时没有显示相同的值。

1.  如果我直接将值分配给标签。它说：

    > 错误：1009：空对象引用

2.  如果我`[Bindable]`对该标签使用元标记，它不会显示任何运行时错误，但也不会显示该值。我在互联网上搜索过，发现`[Bindable]`元标记可以用作 try and catch 博客。

如何将值显示分配给标签？

```
Main.mxml

 <?xml version="1.0" encoding="utf-8"?>
  <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"   xmlns:custom="com.custom.*" xmlns:local="*" creationComplete="onload()">
  <mx:Script>
<![CDATA[
    import modules.AModule; 
    import mx.events.ModuleEvent;
    import mx.containers.VBox;
    import mx.containers.TitleWindow;
    import mx.controls.TextInput;
    import mx.controls.Button;
    import mx.containers.HBox;
    import mx.controls.Label;
    import mx.events.CloseEvent;
    import mx.controls.Text;
    import com.custom.CustomAlert;
    import mx.controls.Alert;
    import mx.containers.Canvas;
    import mx.events.ItemClickEvent;

    import mx.core.UIComponent;

    import mx.modules.ModuleManager;
    import mx.modules.IModuleInfo;
    import mx.containers.Box;
    import mx.controls.ProgressBar;

    //private var can:Canvas;

    public var titlewin:TitleWindow = new TitleWindow();
        public var usern:TextInput = new TextInput();
        public var passw:TextInput = new TextInput();
        public var vb:VBox = new VBox();
        public var hb1:HBox = new HBox();
        public var hb2:HBox = new HBox();
        public var hb3:HBox = new HBox();
        public var nc:NetConnection;

        public var bt1:Button = new Button();

        private var pb:ProgressBar;
    private var progressContainer:Box;
    private var info:IModuleInfo;
    private var module:UIComponent = null;
    public var can:Canvas= new Canvas();
    public function onload():void
    {
            var label1:Label= new Label();
        var label2:Label= new Label();
        label1.text="Username";
        label2.text="Password ";
        hb1.addChild(label1);
        hb1.addChild(usern);
        hb2.addChild(label2);
        hb2.addChild(passw);
        vb.addChild(hb1);
        vb.addChild(hb2);           
        bt1.label="Sign In";
        hb3.addChild(vb);
        hb3.addChild(bt1);
        titlewin.addChild(hb3);

        //Title Window creation starts here
        titlewin.title="Login";

        titlewin.setStyle("paddingLeft",20);
        titlewin.setStyle("paddingRight",20);
        titlewin.setStyle("paddingTop",20);
        titlewin.setStyle("paddingBottom",20);
        titlewin.setStyle("borderThicknessBottom",0);
        titlewin.setStyle("borderThicknessLeft",0);
        titlewin.setStyle("borderThicknessRight",0);
        titlewin.setStyle("borderThicknessTop",0);
        titlewin.setStyle("cornerRadius",0);
        titlewin.setStyle("borderColor","#D20101");
        this.addChild(titlewin);
        viewStack.enabled=false;
        ctbb.enabled=false;
        bt1.addEventListener(MouseEvent.CLICK, netconn);

    }

    private function onclick():void
    {
        if(usern.text!="")
        {
    this.removeChild(titlewin);
    viewStack.enabled=true; 
    ctbb.enabled=true;
    username.text=usern.text;
        }
        else
        {
            Alert.show("Please enter Username");
        }
    }

    private function netconn(event:MouseEvent):void
    {
        nc = new NetConnection();
        nc.connect("rtmp://localhost/loginhere",usern.text);
        nc.addEventListener(NetStatusEvent.NET_STATUS, onstatushandler);

    }

    private function onstatushandler(event:NetStatusEvent):void
    {
        if(event.info.code=="NetConnection.Connect.Success")
        {
            status.text="Connected";
        onclick();  
            }

        if(event.info.code=="NetConnection.Connect.Rejected")
        {
            status.text="Rejected";
        }
        if(event.info.code=="NetConnection.Connect.Failed")
        {
                status.text="Failed";
        }
    }

    private function JoinClick(event:MouseEvent):void{

        if(viewStack.numChildren==3)
        {
            Alert.show("You Cant Add More Button","Alert");

        }

        if(viewStack.numChildren<3)
        {

        if(viewStack.numChildren<2)
        {
        can.label="Button2";
        var button1:CustomButton= new CustomButton();
        button1.label="Leave Table";
        button1.x=300;
        button1.y=200;
        var txt:Text = new Text();
        txt.text=can.label;
        txt.x=50;
        txt.y=50;
        button1.addEventListener(MouseEvent.CLICK,remove2);
        can.addChild(button1);
        can.addChild(txt);
        loadmodule();
        }
        else
        {

        can.label="Button3";
        var button2:CustomButton= new CustomButton();
        button2.label="Leave Table";
        button2.x=300;
        button2.y=200;
        button2.addEventListener(MouseEvent.CLICK,remove3);
        can.addChild(button2);
        var txt1:Text = new Text();
        txt1.text=can.label;
        txt1.x=50;
        txt1.y=50;
        can.addChild(txt1);
        }
        can.setStyle("backgroundColor","0x5EA5BA");
        viewStack.addChild(can);
        if(viewStack.numChildren>2)
        {
            viewStack.selectedIndex=2;
        }
        else
        {
        viewStack.selectedIndex=1;
        }
        }

        }

        private function remove2(event:MouseEvent):void{
        Alert.show("Do you want to Leave    Table?","Confirmation",Alert.YES|Alert.NO,this,closeAlert2);
        }
        private function closeAlert2(event:CloseEvent):void{
        if(event.detail==Alert.YES)
        {
        viewStack.removeChildAt(1);
        }

        }
        private function remove3(event:MouseEvent):void{
        if(viewStack.numChildren>2)
        {
            Alert.show("Do You want to leave Table?","Confirmation",Alert.YES|Alert.NO,this,closeAlert3);

        }
        else
        {
            Alert.show("Do you want to Leave Table?","Confirmation",Alert.YES|Alert.NO,this,closeAlert1);

        }
        }

        private function closeAlert1(event:CloseEvent):void{
            if(event.detail==Alert.YES)
            {
                viewStack.removeChildAt(1);

            }
        }
        private function closeAlert3(event:CloseEvent):void{
            if(event.detail==Alert.YES)
            {
                    viewStack.removeChildAt(2);
            }
        }

            private function loadmodule():void
    {
            pb = new ProgressBar();
            pb.labelPlacement = "center";
            pb.label = "Loading %3 %";
            progressContainer = new Box();
            progressContainer.percentWidth = 100;
            progressContainer.percentHeight = 100;
            progressContainer.setStyle("horizontalAlign", "center");
            progressContainer.setStyle("verticalAlign", "middle");
            progressContainer.addChild(pb);  
            can.addChild(progressContainer);

        var moduleUrl:String="../bin-debug/modules/useModule.swf";
        info=ModuleManager.getModule(moduleUrl);
        if(info!=null)
        {
            info.addEventListener(ModuleEvent.READY, modEventHandler);
            info.addEventListener(ModuleEvent.ERROR,modErrorHandler);
            info.load();
        }
    }

    private function modEventHandler(e:ModuleEvent):void
    {
        info.removeEventListener(ModuleEvent.READY, modEventHandler);
        info.removeEventListener(ModuleEvent.ERROR, modErrorHandler);
        can.removeAllChildren();
        if(module==null)
        {

            module = info.factory.create() as UIComponent;
            if(module!=null)
            { 
                module.x=0;
                module.y=0;
                module.percentWidth=100;
                module.percentHeight=100;
                can.addChild(module);
                 if(module is AModule)
                {

                } 
            }
        }
        }

            private function modErrorHandler(event:ModuleEvent):void {

            //cleanup and display an error alert
            info.removeEventListener(ModuleEvent.READY, modEventHandler);
            info.removeEventListener(ModuleEvent.ERROR, modErrorHandler);
            info = null;
            Alert.show(event.toString(), "Error Loading Module");

          unloadModule();
        }   
                private function unloadModule():void 
                {
           can.removeAllChildren();
            if (module != null && info != null) {
                info.addEventListener(ModuleEvent.UNLOAD,    unloadEventHandler);
                info.unload();
            }
        }

                private function unloadEventHandler(e:ModuleEvent):void 
                {
            info.removeEventListener(ModuleEvent.UNLOAD, unloadEventHandler);
            module = null;
            info = null;
                 }

]]>
  </mx:Script>

 <mx:Canvas width="700" height="400" x="166" y="32">
 <mx:ViewStack id="viewStack"  width="100%" height="100%">
    <mx:Canvas label="Button1" backgroundColor="#5EA5BA" visible="true" id="can1" >
    <local:CustomButton label="Join" click="JoinClick(event)"  x="536" y="222"/>
    <mx:Label x="304" y="120" text="Label" id="username"/>
    <mx:Label x="304" y="55" text="Label" id="status"/>
    </mx:Canvas> 
</mx:ViewStack>

 </mx:Canvas>
  <custom:CustomControlBar x="166" y="423" id="ctbb">
  <custom:CustomToggleButtonBar  dataProvider="viewStack"/>
  </custom:CustomControlBar>

  </mx:Application> 
```

使用模块.mxml

```
 <?xml version="1.0" encoding="utf-8"?>
 <mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="508"  height="218" implements="modules.AModule" backgroundColor="#F00F0F"  creationComplete="addlabel();">
<mx:Script>
    <![CDATA[
        import mx.core.Application;

        public var logsin:loginhere = new loginhere();
        public function addlabel():void
        {
            lb1.text=logsin.username.text;
            txt3.text=logsin.username.text;
            trace(txt3.text);
            trace(lb1.text);
        }

    ]]>
</mx:Script>

    <mx:TextInput id="txt3" x="30.5" y="10" width="79"/>
    <mx:Label id="lb1" x="31.5" y="40" width="78" text="Will it Change?"/>
</mx:Module> 
```

AModule.as（它的一个接口）

```
package modules
{  
import flash.events.IEventDispatcher;

public interface AModule extends IEventDispatcher
{
    function addlabel():void;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:50:49.520

我没有查看整个代码，但我注意到的一件事是您应该将值作为参数传递给子组件并使用数据绑定来动态更新参数。

所以在 AModule.as 中：

```
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="508"  height="218" implements="modules.AModule" backgroundColor="#F00F0F"  creationComplete="addlabel();">
<mx:Script>
    <![CDATA[
        import mx.core.Application;

        public var logsin:loginhere = new loginhere();

        [Bindable]
        public var username:String = "";
    ]]>
</mx:Script>

    <mx:TextInput id="txt3" text="{username}" x="30.5" y="10" width="79"/>
    <mx:Label id="lb1" text="{username}" x="31.5" y="40" width="78" text="Will it Change?"/>
</mx:Module> 
```

在您创建模块的方法中，您可以：

```
module.username = //var that holds username; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:32:32.853

我错过的一点是，我试图在 main.mxml 中为接口创建一个实例 var 应该在函数中创建 `modEventHandler`在该函数中，应该添加以下行

```
ichild=module as AModule;

ichild.addlabel(tt.text); 
```

所以模块被调用并且值显示在标签字段中。

请让我知道，如果它的工作方式错误。谢谢你

# windows-8 - Nuget 多平台

> ID：12927461
> 
> 赞同：0
> 
> 时间：2012-10-17T05:07:05.263
> 
> 标签：windows-8, nuget

我需要通过它打包 dll，以便在 Windows 8 Metro 中使用。由于将有 ARM 设备以及 x86 和 x64，我是否需要为每个设备构建一个单独的 dll，或者我可以为“任何 CPU”构建它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:35:02.437

好吧，您可以使用“任何 CPU”构建 dll，它应该可以轻松地在所有平台上工作，如果您仍然对位数问题（x86 / x64）感到模糊，您可以构建单独的 DLL 并打包在一个 nuget 包中。

您可以参考[Nuget Docs](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)以在单个包中发布不同配置文件的 dll。

干杯!

# php - 如何在数据库中保存上传文件的名称

> ID：12927464
> 
> 赞同：4
> 
> 时间：2012-10-17T05:07:30.600
> 
> 标签：php, file-upload, joomla, joomla2.5

续。-[将文件上传器添加到 Joomla 管理组件](https://stackoverflow.com/questions/12909324/add-file-uploader-to-joomla-admin-component/12909760#12909760)

我可以上传文件并将其保存在磁盘上。但它没有在数据库上保存文件名。

我该怎么做 ？

这是控制器 -

```
class InvoiceManagerControllerInvoiceManager extends JControllerForm
{
    function save(){
        $file = JRequest::getVar('jform', null, 'files', 'array');
        $path = JPATH_BASE;

        // Make the file name safe.
        jimport('joomla.filesystem.file');
        $file['name']['invoice'] = JFile::makeSafe($file['name']['invoice']);

        // Move the uploaded file into a permanent location.
        if (isset($file['name']['invoice'])) {
            // Make sure that the full file path is safe.
            $filepath = JPath::clean($path. DS ."components". DS ."com_invoicemanager". DS ."files". DS .strtolower($file['name']['invoice']));
            // Move the uploaded file.
            JFile::upload( $file['tmp_name']['invoice'], $filepath );
        }

        return parent::save();
    }
} 
```

XML 中的表单字段 -

```
<field name="invoice" type="file"/> 
```

更新：在添加从@Andras Gera 代码中获取的以下行后工作

```
$data = JRequest::getVar( 'jform', null, 'post', 'array' );
$data['invoice'] = strtolower( $file['name']['invoice'] );

JRequest::setVar('jform', $data ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T09:16:25.567

我遇到了同样的问题，也许我们可以一起前进。这是我的代码：

/administrator/components/com_comp_name/models/forms/edit.xml

```
<?xml version="1.0" encoding="utf-8"?>
<form addrulepath="/administrator/components/com_gonewsletter/models/rules">
    <fieldset name="details">
        <field
            name="id"
            type="hidden"
        />
        <field
            name="title"
            type="text"
            label="COM_GONEWSLETTER_EDIT_TITLE_LABEL"
            description="COM_GONEWSLETTER_EDIT_TITLE_DESC"
            size="40"
            class="inputbox"
            required="true"
            default=""
        />
        <field
            name="date"
            type="calendar"
            label="COM_GONEWSLETTER_EDIT_DATE_LABEL"
            description="COM_GONEWSLETTER_EDIT_DATE_DESC"
            size="40"
            class="inputbox"
            required="true"
            default=""
            format="%Y-%m-%d"
        />
        <field
            name="published"
            type="list"
            label="JSTATUS"
            description="COM_GONEWSLETTER_EDIT_PUBLISHED_DESC"
            class="inputbox"
            size="1"
            default="0">
            <option
                value="1">JPUBLISHED</option>
            <option
                value="0">JUNPUBLISHED</option>
        </field>
        <field
            type="file"
            name="pdf_file"
            label="COM_GONEWSLETTER_EDIT_FILE_LABEL"
            default=""
            description="COM_GONEWSLETTER_EDIT_FILE_DESC"
            size="40"
            accept="application/pdf"
            class="fileuploader"
        />
        <field
            name="file"
            type="hidden"
        />
    </fieldset>
</form> 
```

和 /administrator/components/com_comp_name/controllers/edit.php

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla controllerform library
jimport('joomla.application.component.controllerform');

/**
 * GoNewsletter Controller
 */
class GoNewsletterControllerEdit extends JControllerForm
{
    function __construct($config = array()) {
        $this->view_list = 'List';
        parent::__construct($config);
    }

    function save(){
        // ---------------------------- Uploading the file ---------------------
        // Neccesary libraries and variables
        jimport( 'joomla.filesystem.folder' );
        jimport('joomla.filesystem.file');
        $data = JRequest::getVar( 'jform', null, 'post', 'array' );

        // Create the gonewsleter folder if not exists in images folder
        if ( !JFolder::exists( JPATH_SITE . DS . "images" . DS . "gonewsletter" ) ) {
            JFolder::create( JPATH_SITE . DS . "images" . DS . "gonewsletter" );
        }

        // Get the file data array from the request.
        $file = JRequest::getVar( 'jform', null, 'files', 'array' );

        // Make the file name safe.
        $filename = JFile::makeSafe($file['name']['pdf_file']);

        // Move the uploaded file into a permanent location.
        if ( $filename != '' ) {
            // Make sure that the full file path is safe.
            $filepath = JPath::clean( JPATH_SITE . DS . 'images' . DS . 'gonewsletter' . DS . strtolower( $filename ) );

            // Move the uploaded file.
            JFile::upload( $file['tmp_name']['pdf_file'], $filepath );
            // Change $data['file'] value before save into the database 
            $data['file'] = strtolower( $filename );
        }
        // ---------------------------- File Upload Ends ------------------------

        JRequest::setVar('jform', $data );

        return parent::save();
    }

} 
```

如果您在将 $data 发送到 parent::save($data) 之前打印出它，它包含您要保存的正确字段，但它没有。我尝试使用输入 type=text 而不是 type=file 并正确保存。

我尝试了另一种方式，例如：输入 type=file 和 name=pdf_file，然后我添加了一个隐藏字段 name=file default=""。然后我将这个隐藏字段值设置为文件名，但没有成功。也许我做错了什么。继续想办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:11:21.050

你可以使用php`move_uploaded_file()`函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:15:31.200

```
 //import joomlas filesystem functions, we will do all the filewriting with joomlas functions
        jimport('joomla.filesystem.file');
        jimport('joomla.filesystem.folder');

      //this is the name of the field in the html form, filedata is the default name for swfupload
    $fieldName = 'Filedata';

        //the name of the file in PHP's temp directory that we are going to move to our folder
        $fileTemp = $_FILES[$fieldName]['tmp_name'];

        //always use constants when making file paths, to avoid the possibilty of remote file inclusion
        $uploadPath = JPATH_SITE.DS.'path'.DS.'path'.DS.$fileName;

        if(!JFile::upload($fileTemp, $uploadPath)) 
        {
                echo JText::_( 'ERROR MOVING FILE' );
                return;
        }
        else
        {
         //Updating the db with the $fileName.
         $db =& JFactory::getDBO();   
         $query = $db->getQuery(true);
         $query->update($db->nameQuote(TABLE_PREFIX.'table_name'));
         $query->set($column.' = '.$db->quote($fileName));
         $query->where($db->nameQuote('id').'='.$db->quote($id));             
         $db->setQuery($query);
         $db->query(); 
         } 
```

$column - 文件的 db 列名 $fileName - 文件名

如果文件成功上传，则运行查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T09:37:14.770

在请求变量中设置文件名，因为它现在是 $_FILES 变量

```
JRequest::setVar('jform[invoice]',$file['name']['invoice'] ); 
```

//完整代码

```
 class InvoiceManagerControllerInvoiceManager extends JControllerForm
    {
        function save(){
            $file = JRequest::getVar('jform', null, 'files', 'array');
            $path = JPATH_BASE;

            // Make the file name safe.
            jimport('joomla.filesystem.file');
            $file['name']['invoice'] = JFile::makeSafe($file['name']['invoice']);

            // Move the uploaded file into a permanent location.
            if (isset($file['name']['invoice'])) {
                // Make sure that the full file path is safe.
                $filepath = JPath::clean($path. DS ."components". DS ."com_invoicemanager". DS ."files". DS .strtolower($file['name']['invoice']));
                // Move the uploaded file.
                JFile::upload( $file['tmp_name']['invoice'], $filepath );

                JRequest::setVar('jform[invoice]',$file['name']['invoice'] );
            }

            return parent::save();
        }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-27T14:46:21.040

在 joomla 3.2.x 上，我必须覆盖模型类的保存功能才能将上传的文件名保存到 db，如下所示

```
public function save($data){
  $input = JFactory::getApplication()->input;       
  $files = $input->files->get('jform');
  $fieldName = 'thumbnail';
  $data['thumbnail'] = $files[$fieldName]['name'];              
  return parent::save($data);
} 
```

# ios - Mac 或 iOS 开发是否需要 plist 具有 DOCTYPE 标头标签？

> ID：12927466
> 
> 赞同：4
> 
> 时间：2012-10-17T05:07:51.307
> 
> 标签：ios, xml, macos, plist, doctype

我正在开发一种工具来处理 Mac 和 iOS 开发中使用的 plist 文件。默认情况下，这些文件有一个`DOCTYPE`标题，但该标题对我的工具造成了一些奇怪的问题。我尝试删除它，一切似乎都正常，但我很好奇我是否遗漏了什么。

这是标题：

```
 <!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"
               "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
```

它通常在第 2 行，就在 XML 标头之后。

**我的问题是**，在Mac或iOS开发执行经验中是否有任何情况、标准工具、检查或过程需要此行在plist文件中？就像它会在 App Store 中验证失败吗？还是仅 iOS 4 或其他问题需要它？删除这条线是最简单的解决方案，但如果有必要，我可以找到另一种方法让它工作。

# r - 在 R 中参数化 ddply

> ID：12927468
> 
> 赞同：0
> 
> 时间：2012-10-17T05:08:09.630
> 
> 标签：r, plyr

对于数据框：

```
exampleDF <- structure(list(val1 = structure(c(1L, 2L, 1L, 3L), .Label = c("MX", 
"SS", "VF"), class = "factor"), var2 = c(1, 2, 3, 4)), .Names = c("val1", 
"var2"), row.names = c(NA, -4L), class = "data.frame") 
```

而不是这样做：

```
ddply(exampleDF, .(val1), summarize, sum(as.numeric(var2))) 
```

是否可以对调用进行参数化`ddply`（如下所示，尽管我尝试过但没有用）：

```
colname <- 'var2'
ddply(exampleDF, .(val1), summarize, sum(as.numeric(colname))) 
```

这导致..

```
 val1 ..1
1   MX  NA
2   SS  NA
3   VF  NA
Warning messages:
1: In eval(expr, envir, enclos) : NAs introduced by coercion
2: In eval(expr, envir, enclos) : NAs introduced by coercion
3: In eval(expr, envir, enclos) : NAs introduced by coercion 
```

我们必须调用`ddply`数据框中的一组列，并为每个结果生成图`ddply`。因此，我们希望参数化`ddply`调用，而不是对 n 列重复同一行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:17:01.720

这实际上是一个挑战`summarize`，不是`ddply`。`parse`您可以尝试使用and做一些事情`eval`，但总的来说这不是一个好主意。我会做类似的事情：

```
colname <- 'var2'
ddply(exampleDF, .(val1), function(sub_dat) sum(as.numeric(sub_dat[[colname]]))) 
```

你说你想创建多个这样的图，但是，我几乎总是能够使用 facetting in 创建这样一组图`ggplot2`（由与 相同的作者创建`plyr`）。参见例如 和 的[`facet_wrap`](http://docs.ggplot2.org/current/facet_wrap.html)文档[`facet_grid`](http://docs.ggplot2.org/current/facet_grid.html)。

# uibutton - iOS6 sim与iOS6设备中的UIButton setImage行为不同？

> ID：12927471
> 
> 赞同：0
> 
> 时间：2012-10-17T05:08:34.453
> 
> 标签：uibutton, ios6

我为我的 UIButtons 设置了不同的图像，如下所示：

```
[testButton setFrame:CGRectMake(0.0f, 416.0f, 64.0f, 64.0f)];
[testButton setImage:[UIImage imageNamed:@"test.png"] forState:UIControlStateNormal]; 
```

（各种图像具有不同的尺寸，我将 UIButtons 调整为不同的尺寸）

这在 iPhone 6.0 模拟器中按预期工作，但图像不会显示在实际 iOS 6.0 iPhone 的按钮上；按钮不可见，尺寸位置正确。

我希望在 iPhone 设备上具有相同的按钮行为；如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:20:17.117

哈哈！ *叹息* 当然，文件名是错误的。花了2天时间弄清楚:(

# windows - windows批处理脚本svn删除文件夹集

> ID：12927479
> 
> 赞同：2
> 
> 时间：2012-10-17T05:09:40.253
> 
> 标签：windows, svn, batch-file, cmd, command-prompt

假设在 svn 中提交了 15 个文件夹（每个名称以 开头`folder_`）。
**如何`svn delete`在特定日期或之前创建的所有文件夹上运行？**

提前致谢。

问候，
罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:40:36.117

如果要删除所有名为**.svn**的子文件夹，请 使用以下内容创建批处理文件：

```
for /f "tokens=* delims=" %%i in ('dir /s /b /a:d *.svn') do (
rd /s /q "%%i"
) 
```

将其保存在文件**del_All_Dot_SVN_Folders.cmd**中。运行。你完成了。

感谢[http://www.axelscript.com/2008/03/11/delete-all-svn-files-in-windows/](http://www.axelscript.com/2008/03/11/delete-all-svn-files-in-windows/)

请记住，上面的代码有 .svn，而链接中的代码只有 *svn，所以最好有 .svn，以免意外产生不良影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T02:20:44.580

我发现这可能会帮助您完成任务。它不是 svn delete 但它会完成工作。 [批处理文件删除超过 N 天的文件](https://stackoverflow.com/questions/51054/batch-file-to-delete-files-older-than-n-days)

# jquery - 使用文本框或其他元素向用户显示数据

> ID：12927488
> 
> 赞同：0
> 
> 时间：2012-10-17T05:10:19.207
> 
> 标签：jquery, html, jqxgrid

我正在使用文本框来显示从数据库中获取的数据，但有时数据是长文本。所以对于预期的用户来说，它看起来不太好。文本框还有其他选项吗？需要的建议或解决方案。

我正在使用的代码

**HTML----**

```
&nbsp;&nbsp;<div><div style="width:12%;float:left; margin-left:2%;" >Material</div> <div style="margin-left:15%;" id="serialno1" >Please Select </div></div><br /> 
```

**脚本 - -**

```
$("#serialno1").html("<div style='margin: 10px; background-color:#CDD9E1;'>" + event.args.element.id + "</div>"); 
```

现在我没有从 db 获取数据，是否有可能获取数据并显示为我现在使用的内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:17:11.567

您可以只使用 a`<div>`并对其应用一些样式以允许滚动 - 这是一种显示只读数据的更简单方法，您可以根据需要使用 CSS 添加或删除滚动功能，或者在需要时使用 Javascript 进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:18:56.223

尝试使用文本区域而不是文本框来显示更长的文本。

```
<textarea rows="4" cols="50">
Your text here
</textarea> 
```

您可以使用元素的 rows 和 cols 属性自定义文本区域的大小。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:19:12.090

你可以使用一个`<textarea>`

更多信息在这里

[http://www.w3schools.com/tags/tag_textarea.asp](http://www.w3schools.com/tags/tag_textarea.asp)

你也可以使用`<textarea>`这个时尚的插件

[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

或者如果您只有只读数据，即不需要编辑功能，请使用`<div>`一些 css，您就可以开始了

你可以像这样设置它`text`或`html`属性

```
$('#YourDivId').text('Your Text here'); 
```

或者

```
$('#YourDivId').html('Your Text here'); 
```

# android - 如何更改 Android 微调器提示样式

> ID：12927494
> 
> 赞同：2
> 
> 时间：2012-10-17T05:10:37.823
> 
> 标签：android, android-spinner, prompt

我开发了一个例子。我需要更改 Android 微调器提示的样式。我怎样才能改变风格？

这是我的**string.xml**代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello World, CustomizedListView!</string>
    <string name="app_name">CustomizedListView</string>
    <string name="status_prompt">Choose a Status</string>
</resources> 
```

此代码用于我的`main.xml`：

```
<Spinner android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="106dp"
    android:layout_y="100dp"
    android:prompt="@string/status_prompt"
    android:background="@drawable/btn_dropdown"/> 
```

在这里，我想在下图中更改背景颜色和`textSize`, `textStyle`。我怎样才能改变这个？

![在此处输入图像描述](../Images/986c4ec3babc57c6373a6bfb4aa00b10.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-17T05:15:31.407

如果您想创建自己的`custom spinner`，请参阅*[Android：带有自定义对象的自定义微调器！](http://adanware.blogspot.in/2012/03/android-custom-spinner-with-custom.html)*.

背景：

### 值/样式.xml

```
<resources>
   <style name="MyTheme">
    <item name="android:spinnerStyle">@style/StandardSpinner</item>
   </style>
</resources>

<style name="StandardSpinner" parent="@android:style/Widget.Spinner">
    <item name="android:background">@drawable/spinner</item>
</style> 
```

### 字体大小：

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.planets_array, R.layout.textview); 
```

您只需更改您使用微调器的 TextView 的设计。我只是尝试了这个，作为的布局`textview.xml`：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:text="@+id/TextView01" android:id="@+id/TextView01"
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" 
          android:textSize="30sp"></TextView> 
```

# xcode4.5 - iPhone5 图像未加载

> ID：12927495
> 
> 赞同：0
> 
> 时间：2012-10-17T05:10:48.620
> 
> 标签：xcode4.5

我在 Xcode 中开发了一个 Universal 类型的应用程序。当我运行程序时，它会在 iPhone5 4 英寸模拟器中正确显示图像。但在我的设备上，图像没有加载。

```
if(UI_USER_INTERFACE_IDIOM()  == UIUserInterfaceIdiomPhone && [[UIScreen mainScreen] bounds].size.height * [UIScreen mainScreen].scale >= 1136)
{        
    image1.image = [UIImage imageNamed:@"Lifestyle12_iPhone5@2x.png"];
    image2.image = [UIImage imageNamed:@"Lifestyle11_iPhone5@2x.png"];
    image3.image = [UIImage imageNamed:@"Lifestyle10_iPhone5@2x.png"];
    image4.image = [UIImage imageNamed:@"Lifestyle2_iPhone5@2x.png"];
    image5.image = [UIImage imageNamed:@"LifeStyle1_iPhone5@2x.png"];
    image6.image = [UIImage imageNamed:@"Lifestyle5_iPhone5@2x.png"];
    image7.image = [UIImage imageNamed:@"APP_incipio_F38_iPhone5@2x.png"];
    image8.image = [UIImage imageNamed:@"APP_incipio_BACKPACK_iPhone5@2x.png"];
} 
```

请告诉我这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:09:36.317

您是否仔细检查了文件名？该设备具有区分大小写的文件系统

# php - 使用 PHP 访问当前 URL 中的哈希

> ID：12927496
> 
> 赞同：0
> 
> 时间：2012-10-17T05:10:52.107
> 
> 标签：php

> **可能重复：**
> [PHP 可以读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

是否可以在 PHP 中访问 URL 的哈希部分？

[http://test.com/#thisisthehash](http://test.com/#thisisthehash)

在 javascript 中可以使用`window.location.hash`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:13:03.343

不，这是不可能的。就在客户端是可能的。

HTTP 协议不传输此信息，因此服务器无法猜测它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:13:59.743

不，浏览器不会将其发送到服务器。一个肮脏的解决方法是通过 ajax 调用或其他方式将片段发送到服务器。

# perl - Perl 中“foreach”的行为

> ID：12927498
> 
> 赞同：5
> 
> 时间：2012-10-17T05:11:02.867
> 
> 标签：perl, foreach

我刚刚开始学习[Perl](http://en.wikipedia.org/wiki/Perl)，发现自己被以下代码块的结果所困扰：

```
@x = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
foreach (@x) {
    $x = pop (@x) ;
    $y = shift (@x);
    print ("$x $y \n");
} 
```

输出是：

```
10 1
9 2
8 3
7 4 
```

我曾预料到另一行：`6 5`. 为什么没有这样的线？是不是因为在 print 的迭代之后，`7 4`数组中剩余的元素数量等于已经完成的迭代次数，就 Perl 而言，循环完成了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T05:16:20.000

您可能不应该在迭代期间修改列表。来自[`perldoc perlsyn`](http://perldoc.perl.org/perlsyn.html#Foreach-Loops)：

> 如果 的任何部分`LIST`是一个数组，`foreach`如果您在循环体内添加或删除元素（例如使用`splice`. 所以不要那样做。

如果您`$_`在循环 ( `print ("$x $y $_\n");`) 期间打印出来，您可以看到发生了什么：

```
10 1 1
9 2 3
8 3 5
7 4 7 
```

在这种情况下，Perl 只是维护一个在数组中递增的索引。由于您从一开始就删除了元素，因此索引在第四次迭代结束时从修改数组的末尾下降，因此`foreach`循环终止。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T05:17:35.330

这很好地说明了当您更改要迭代的数组时会发生什么。

尝试：

```
use strict: #Always!
use warnings; #Always!

my @x = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
my $n=$#x;
foreach my $i(0..$n) {
    my $x = pop (@x) ;
    my $y = shift (@x);
    print "$x $y\n" if defined $x and defined $y;
} 
```

或者，更好的是：

```
use strict;
use warnings;

my @x=1..10; #same thing, just written more idiomatically

while(@x)
{
  my $x=pop @x; #no parentheses needed
  my $y=shift @x;
  print "$x $y\n";
} 
```

请注意，在上面的`while`循环中，数组`@x`是[在标量上下文中解释的](http://perldoc.perl.org/perldata.html#Scalar-values)，因此 while 循环将继续进行，直到其中的元素数`@x`为零。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T05:50:36.957

您不能使用 foreach 循环修改您正在迭代的数组。

无论如何，您都不想遍历数组元素。`foreach (@x)`显然是错误的。循环 10 次，但您只想循环 5 次。

由于您在循环时从数组中删除元素，因此您只想循环直到数组为空。要在循环的每一次通过时检查条件，可以使用 while 循环。

```
my @x = 1..10;
while (@x) {
    my $x = pop(@x) ;
    my $y = shift(@x);
    print("$x $y\n");
} 
```

如果你想使用 foreach 循环，它看起来像这样：

```
my @x = 1..10;
for (1..@x/2) {
    my $x = $x[-$_];
    my $y = $x[$_-1];
    print("$x $y\n");
} 
```

# java - 如何使用现代 .fxml 和 controller.java 在 javafx 2.x 中制作自动完成组合框

> ID：12927504
> 
> 赞同：0
> 
> 时间：2012-10-17T05:11:48.563
> 
> 标签：java, user-interface, javafx-2, fxml

如何使用现代 .fxml 和 controller.java 在 javafx 2.x 中制作一个类似的自动完成组合框，因为这是制作的

[http://blog.ngopal.com.np/2011/07/04/autofill-textbox-with-filtermode-in-javafx-2-0-custom-control/](http://blog.ngopal.com.np/2011/07/04/autofill-textbox-with-filtermode-in-javafx-2-0-custom-control/)

上面提到的演示很混乱，很难配置和独立（需要一些罐子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:25:39.853

Ensemlbe - 包含在标准集中的样本具有类似的控制。它是开源的，所以你可以下载它并查看源代码：

[http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html](http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html)

看一眼`SearchBox.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T13:27:46.167

可能是我迟到了，但您发布的链接现在已经与 FXML 兼容，只需添加

 **到您的 fxml 并在 fxml 中添加导入指令。

测试源代码在 Github： [https ://github.com/privatejava/javafx-autocomplete-field/blob/master/src/test/FXML.fxml#L12](https://github.com/privatejava/javafx-autocomplete-field/blob/master/src/test/FXML.fxml#L12)**

# java - 将视频帧添加到 JTabbed 窗格

> ID：12927507
> 
> 赞同：0
> 
> 时间：2012-10-17T05:11:56.517
> 
> 标签：java, swing, video, jtabbedpane

我创建了一个 Java 选项卡式窗格。在选项卡式窗格中，我创建了一个名为 Video 的选项卡。我希望每当我单击视频选项卡时，都应在选项卡面板本身上自动播放视频。我可以这样做吗？如果是，请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:46:54.893

您必须将 a 添加`ChangeListener`到您的`JTabbedPane`组件并覆盖该`stateChanged`方法：

```
 tabbedPane.addChangeListener(new ChangeListener() {

        @Override
        public void stateChanged(ChangeEvent e) {
            if (e.getSource() instanceof JTabbedPane) {
                JTabbedPane pane = (JTabbedPane) e.getSource();
                if (pane.getSelectedIndex() == 2) {

                    // start playing the media clip in tab 2
                    mediaPlayer.start(); 

                }
            }
        }
    }); 
```

这是一个完整的工作代码：

```
package tabvideo;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;
import java.io.File;
import java.io.IOException;
import java.net.URL;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.media.CannotRealizeException;
import javax.media.NoPlayerException;
import javax.media.Player;
import javax.media.Manager;

public class TabbedPaneVideoDemo extends JPanel {

    Player mediaPlayer = null;

    public TabbedPaneVideoDemo() {
        super(new GridLayout(1, 1));

        JTabbedPane tabbedPane = new JTabbedPane();
        ImageIcon icon = createImageIcon("images/icon.gif");

        JComponent panel1 = makeTextPanel("Panel #1");
        tabbedPane.addTab("Tab 1", icon, panel1, "Does nothing");
        tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

        JComponent panel2 = makeTextPanel("Panel #2");
        tabbedPane.addTab("Tab 2", icon, panel2, "Does twice as much nothing");
        tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

        JComponent panel3 = makeTextPanel("Panel #3");
        tabbedPane.addTab("Tab 3", icon, panel3, "Still does nothing");
        tabbedPane.setMnemonicAt(2, KeyEvent.VK_3);

        JComponent panel4 = makeVideoPanel("somevideo.avi");
        tabbedPane.addTab("Tab 4", icon, panel4, "Playes video!");
        tabbedPane.setMnemonicAt(3, KeyEvent.VK_4);

        tabbedPane.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                if (e.getSource() instanceof JTabbedPane) {
                    JTabbedPane pane = (JTabbedPane) e.getSource();
                    if (pane.getSelectedIndex() == 2) {

                        // start playing the media clip in tab 2
                        mediaPlayer.start();

                    }
                }
            }
        });

        // Add the tabbed pane to this panel.
        add(tabbedPane);

        // The following line enables to use scrolling tabs.
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
    }

    protected JPanel makeVideoPanel(String filename) {
        JPanel panel = new JPanel(false);

        panel.setLayout(new BorderLayout()); // use a BorderLayout

        // Use lightweight components for Swing compatibility
        Manager.setHint(Manager.LIGHTWEIGHT_RENDERER, true);

        try {

            URL mediaURL = new File(filename).toURI().toURL();

            // create a player to play the media specified in the URL
            mediaPlayer = Manager.createRealizedPlayer(mediaURL);

            // get the components for the video and the playback controls
            Component video = mediaPlayer.getVisualComponent();
            Component controls = mediaPlayer.getControlPanelComponent();

            if (video != null)
                panel.add(video, BorderLayout.CENTER); // add video component

            if (controls != null)
                panel.add(controls, BorderLayout.SOUTH); // add controls

        } // end try
        catch (NoPlayerException noPlayerException) {
            System.err.println("No media player found");
        } // end catch
        catch (CannotRealizeException cannotRealizeException) {
            System.err.println("Could not realize media player");
        } // end catch
        catch (IOException iOException) {
            System.err.println("Error reading from the source");
        } // end catch

        return panel;
    } // end MediaPanel constructor

    /** Returns an ImageIcon, or null if the path was invalid. */
    protected static ImageIcon createImageIcon(String path) {
        java.net.URL imgURL = TabbedPaneVideoDemo.class.getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            System.err.println("Couldn't find file: " + path);
            return null;
        }
    }

    protected JComponent makeTextPanel(String text) {
        JPanel panel = new JPanel(false);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(1, 1));
        panel.add(filler);
        return panel;
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event dispatch thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("TabbedPaneDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Add content to the window.
        frame.add(new TabbedPaneVideoDemo(), BorderLayout.CENTER);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event dispatch thread:
        // creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // Turn off metal's use of bold fonts
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:22:50.273

使用`JTabbedPane` `getModel()`类型`SingleSelectionModel`，将A添加`ChangeListener`到模型中，选择选项卡时，您将获得一个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:26:47.153

编辑：你的意思是，它应该在没有任何按钮按下的情况下自动运行，然后使用`JTabbedPane` `getModel()`type `SingleSelectionModel`，将 a 添加`ChangeListener`到模型中，当一个选项卡被选中时，你会得到一个事件。
如果您的意思是它应该在小选项卡内运行，也许您可​​以运行一个`Thread`显示`IconImages`.

# javascript - 带有 id 问题的引导弹出窗口上的 div 内容

> ID：12927509
> 
> 赞同：0
> 
> 时间：2012-10-17T05:12:45.787
> 
> 标签：javascript, twitter-bootstrap, smarty

我[在 bootstrap pophover 上关注 jävi 在 div 上](https://stackoverflow.com/questions/8875376/is-it-possible-to-use-a-div-as-content-for-twitters-popover)的帖子，但不知道如何为整个 div 放置 id。我实际上希望当鼠标悬停到语言名称粤语或英语时会弹出阅读、写作、听力、说话的进度条。由于 Smarty foreach，我不能将 id=popover_content_wrapper 放到每个技能中......

JSFIDDLE：http: [//jsfiddle.net/6TaQt/14/](http://jsfiddle.net/6TaQt/14/)

**代码：**

```
{foreach from=$complexElements key="complexElementKey" item="complexElementItem"}
   <div class="row-fluid">

{foreach from=$form_fields item=form_field}
{if $form_field.caption == "Language Name"}
  <h4><a class='danger' data-placement='above' title="Popover Title" href='#'>{display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}</a>&nbsp;</h4>
{else}
    <div id="popover_content_wrapper" style="display: none" style="display:inline">
        <label class="span4" for="slider">[[$form_field.caption]]</label>
            <div class="span8"> 
              <div class="progress progress-info progress-striped" rel="tooltip" title="{display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}%">
                <div class="bar" style="width: {display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}%;"></div>
              </div>
            </div>
    </div>
{/if}
{/foreach}
  </div>
{/foreach} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:22:12.653

在这个线型属性中定义了两次，做那个单一的，我不确定，希望对你有帮助

```
<div id="popover_content_wrapper" style="display: none" style="display:inline"> 
```

# r - 在R中编写函数

> ID：12927514
> 
> 赞同：1
> 
> 时间：2012-10-17T05:13:27.090
> 
> 标签：r

我现在在 R 中使用带有矩阵的 write 函数，这就是我所拥有的

```
write(my_mtx,file='mtx.tsv',sep='\t') 
```

但这给了我一个包含一列的文件？我也尝试添加一个“ncolumns”参数

```
write(mt_mtx,ncolumns=length(colnames(my_mtx)),file='mtx.tsv',sep='\t') 
```

但这只是让我重复一列，而不是实际分离的列，因为它出现在矩阵中。一点帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T05:39:18.740

尝试`write.table`改用

```
write.table(mt_mtx, file = 'mtx.tsv', sep ='\t', col.names = FALSE, row.names = FALSE) 
```

然后它将默认为正确的列数，无需转置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:37:54.663

如果数据是字符，则默认为`write()`一列，如果数据是数字，则默认为五列，并且按行填充（请参阅 参考资料`?write`）。尝试这个：

```
write(t(my_mtx),file='mx.tsv',sep='\t',ncolumns=ncol(my_mtx)) 
```

# python - 无法使用 Python 中的 mechanize 连接到安全网站

> ID：12927516
> 
> 赞同：0
> 
> 时间：2012-10-17T05:13:37.777
> 
> 标签：python, urllib2, mechanize, httplib

我正在尝试使用 Python 中的 mechanize 库打开一个安全（https）网站。当我尝试访问该网站时，服务器会关闭连接并引发异常 BadStatusLine。

我尝试使用该`addheaders`属性修改标题，但没有响应。

```
import mechanize

br = mechanize.Browser()
print 'opening page ...'
resp = br.open('https://onlineservices.tin.nsdl.com/etaxnew/tdsnontds.jsp')     #this one works fine
print 'ok'

print 'opening page 2 ...'
resp = br.open('https://incometaxindiaefiling.gov.in/portal/index.do')          #exception raised 
print 'ok' 
```

例外：

> Traceback（最近一次调用最后一次）： File pydev_imports.execfile(file, globals, locals) #执行脚本 File "Z:\pyTax\app_test.py", line 22, in resp=br.open('https:// incometaxindiaefiling.gov.in/portal/index.do ')
> 文件“build\bdist.win32\egg\mechanize_mechanize.py”，第 203 行，打开文件“build\bdist.win32\egg\mechanize_mechanize.py”，第 230 行，在 _mech_open 文件“build\bdist.win32\egg\mechanize_opener.py”，第 188 行，在打开文件“build\bdist.win32\egg\mechanize_http.py”，第 316 行，在 http_request 文件“build\bdist.win32 \egg\mechanize_http.py”，第 242 行，在读取文件“build\bdist.win32\egg\mechanize_mechanize.py”，第 203 行，打开
> 文件“build\bdist.win32\egg\mechanize_mechanize.py”，第 230 行，在 _mech_open 文件“build\bdist.win32\egg\mechanize_opener.py”，第 193 行，在打开文件“build\bdist.win32\egg\ mechanize_urllib2_fork.py”，第 344 行，_open 文件“build\bdist.win32\egg\mechanize_urllib2_fork.py”，第 332 行，_call_chain 文件“build\bdist.win32\egg\mechanize_urllib2_fork.py”，第 1170 行，在 https_open文件“build\bdist.win32\egg\mechanize_urllib2_fork.py”，第 1116 行，在 do_open 文件“D:\Python27\lib\httplib.py”，第 1031 行，在 getresponse response.begin() 文件“D:\Python27 \lib\httplib.py”，第 407 行，开始版本，状态，原因 = self._read_status() 文件“D:\Python27\lib\httplib.py”，第 371 行，在 _read_status raise BadStatusLine(line) httplib.BadStatusLine: ''

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:29:34.367

`httplib.BadStatusLineis`sa 的子类`HTTPException`。如果服务器以我们不理解的 HTTP 状态代码响应，则引发。这就是导致你的问题的原因。不过，我并不完全确定修复，因为您的代码在我的计算机上运行良好。

# hadoop - 用于事务生成的 IBM Quest Data Generator 参数

> ID：12927519
> 
> 赞同：1
> 
> 时间：2012-10-17T05:13:48.223
> 
> 标签：hadoop, dataset, generator

我需要为关联规则挖掘生成合成数据集，以将我的算法与现有算法的性能进行比较。我下载了 IBM Quest Data generator，但不知道如何使用论文中使用的相同参数生成数据集。例如，如何生成 T40I10D100K.dat T40I10D1000K.dat、T10I4D100K.dat T25I10D10k.data 数据集？T、I、D是什么意思，使用发电机时如何设置这些参数？

帮助输出以下内容。

```
hduser@master:~$ ./gen lit -help 
Command Line Options:
-ntrans number_of_transactions (in 1000's) (default: 1000)
  -tlen avg_items_per_transaction (default: 10)
  -nitems number_of_different_items (in '000s) (default: 100000)
  -npats number_of_patterns (default: 10000)
  -patlen avg_length_of_maximal_pattern (default: 4)
  -corr correlation_between_patterns (default: 0.25)
  -conf avg_confidence_in_a_rule (default: 0.75)
  -fname <filename> (write to filename.data and filename.pat)
  -ascii (default: False)

  -randseed # (reset seed used generate to x-acts; must be negative)
  -version (to print out version info) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T22:24:13.153

您可以在此处获取 IBM 生成器：

[http://forum.ai-directory.com/read.php?5,33](http://forum.ai-directory.com/read.php?5,33)

以下是这些字母的解释：

D：数据集中的序列数 C：每个序列的平均项目集数 T：每个项目集的平均项目数 S：潜在频繁序列中的平均项目集数。I：潜在频繁序列中项目集的平均大小 N：数据集中不同项目的数量

# java - 纹理缓冲区和 glMultiDrawElements

> ID：12927523
> 
> 赞同：2
> 
> 时间：2012-10-17T05:13:56.920
> 
> 标签：java, opengl, glsl, jogl

背景故事：我正在尝试使用单个绘图调用在屏幕上绘制尽可能多的正方形。我正在使用专门用于 2D 绘图的自定义 glsl 顶点着色器，它应该从 samplerBuffer 中提取正方形顶点的位置数据。因为我不需要担心旋转或缩放正方形，所以我需要做的就是将位置数据加载到缓冲区中，将纹理绑定到该缓冲区，然后使用采样器获取每个顶点在着色器中的位置。为了获得纹理的索引，我将每个元素索引存储为顶点的 z 分量。

对于一千个左右的方格，一切似乎都很好，但在那之后我开始奇怪地眨眼。似乎它没有在每个绘制步骤中绘制所有方块，或者可能没有使用所有位置，因此许多方块重叠。

奇怪的是，如果我使用 drawElements 而不是 drawElementsMulti，闪烁就会消失（当然，所有的正方形都被绘制为一个单独的对象，这是我不想要的）

我的一个问题是我的位置数据是否限制为最大纹理大小或最大纹理缓冲区大小。如果我被限制在更小的最大纹理尺寸，我该如何绕过它？所有纹理缓冲区空间都存在一定是有原因的，但我显然不知道如何正确使用它。

我也在想也许 glMultiDrawElements 正在做一些我不知道采样器的事情。Idk，在这一点上我真的很迷茫，但是..它适用于较少数量的正方形，所以我必须做正确的事情。

[编辑] 代码已更改以反映以下建议（以及可读性），但问题仍然存在。

好的，这里有一些代码。首先是顶点着色器：

```
uniform mat3 projection;
attribute vec3 vertex;

uniform samplerBuffer positionSampler;

attribute vec4 vertex_color;
varying vec4 color;

float positionFetch(int index)
{
    // I've tried texelFetch here as well, same effect
    float value = texelFetchBuffer(positionSampler, index).r;
    return value;
}

void main(void)  
{ 
    color = vec4(1, 1, 1, 1);
    // use the z-component of the vertex to look up the position of this instance in the texture
    vec3 real_position = vec3(vertex.x + positionFetch(int(vertex.z)*2), vertex.y + positionFetch(int(vertex.z)*2+1), 1); 
    gl_Position = vec4(projection * real_position, 1); 
} 
```

现在我的 GLRenderer，抱歉代码太多了，我真的想确保这里有足够的信息来获得答案。这真的让我发疯了，Java 的例子似乎很难找到（也许这段代码会帮助其他人完成他们的任务）：

```
public class GLRenderer extends GLCanvas implements GLEventListener, WindowListener
{

    private static final long serialVersionUID = -8513201172428486833L;

    private static final int bytesPerFloat = Float.SIZE / Byte.SIZE;
    private static final int bytesPerShort = Short.SIZE / Byte.SIZE;

    public float viewWidth, viewHeight;
    public float screenWidth, screenHeight;

    private FPSAnimator animator;

    private boolean didInit = false;

    JFrame the_frame;
    SquareGeometry geometry;

    // Thought power of 2 might be required, doesn't seem to make a difference
    private static final int NUM_THINGS = 2*2*2*2*2*2*2*2*2*2*2*2*2*2; 

    float[] position = new float[NUM_THINGS*2];

    // Shader attributes
    private int shaderProgram, projectionAttribute, vertexAttribute, positionAttribute;

    public static void main(String[] args) 
    {
        new GLRenderer();
    }

    public GLRenderer()
    {
        // setup OpenGL Version 2
        super(new GLCapabilities(GLProfile.get(GLProfile.GL2)));

        addGLEventListener(this);
        setSize(1800, 1000);

        the_frame = new JFrame("Hello World");
        the_frame.getContentPane().add(this);
        the_frame.setSize(the_frame.getContentPane().getPreferredSize());
        the_frame.setVisible(true);
        the_frame.addWindowListener(this);

        animator = new FPSAnimator(this, 60);
        animator.start();
    }

    // Called by the drivers when the gl context is first made available
    public void init(GLAutoDrawable d)
    {        
        final GL2 gl = d.getGL().getGL2();
        IntBuffer asd = IntBuffer.allocate(1);
        gl.glGetIntegerv(GL2.GL_MAX_TEXTURE_BUFFER_SIZE, asd);
        System.out.println(asd.get(0));
        asd = IntBuffer.allocate(1);
        gl.glGetIntegerv(GL2.GL_MAX_TEXTURE_SIZE, asd);
        System.out.println(asd.get(0));
        shaderProgram = ShaderLoader.compileProgram(gl, "default");
        gl.glLinkProgram(shaderProgram);

        _getShaderAttributes(gl);

        gl.glUseProgram(shaderProgram);
        _checkGLCapabilities(gl);
        _initGLSettings(gl);

        // Calculate batch of vertex data from dirt geometry
        geometry = new SquareGeometry(.1f);
        geometry.buildGeometry(viewWidth, viewHeight);
        geometry.finalizeGeometry(NUM_THINGS);

        geometry.vertexBufferID = _generateBufferID(gl);
        _loadVertexBuffer(gl, geometry);

        geometry.indexBufferID = _generateBufferID(gl);
        _loadIndexBuffer(gl, geometry);

        geometry.positionBufferID = _generateBufferID(gl);

        // initialize buffer object
        int size = NUM_THINGS * 2 * bytesPerFloat;
        System.out.println(size);

    IntBuffer bla = IntBuffer.allocate(1);
    gl.glGenTextures(1, bla);
    geometry.positionTextureID = bla.get(0);

        gl.glUniform1i(positionAttribute, 0);

        gl.glActiveTexture(GL2.GL_TEXTURE0);
        gl.glBindTexture(GL2.GL_TEXTURE_BUFFER, geometry.positionTextureID);
        gl.glBindBuffer(GL2.GL_TEXTURE_BUFFER, geometry.positionBufferID);
        gl.glBufferData(GL2.GL_TEXTURE_BUFFER, size, null, GL2.GL_DYNAMIC_DRAW);
        gl.glTexBuffer(GL2.GL_TEXTURE_BUFFER, GL2.GL_R32F, geometry.positionBufferID);
    }

    private void _initGLSettings(GL2 gl)
    {
        gl.glClearColor(0f, 0f, 0f, 1f);
    }

    private void _loadIndexBuffer(GL2 gl, SquareGeometry geometry)
    {
        gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, geometry.indexBufferID);
        gl.glBufferData(GL2.GL_ELEMENT_ARRAY_BUFFER, bytesPerShort*NUM_THINGS*geometry.getNumPoints(), geometry.indexBuffer, GL2.GL_STATIC_DRAW);
    }

    private void _loadVertexBuffer(GL2 gl, SquareGeometry geometry)
    {
        int numBytes = geometry.getNumPoints() * 3 * bytesPerFloat * NUM_THINGS;

        gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, geometry.vertexBufferID);
        gl.glBufferData(GL2.GL_ARRAY_BUFFER, numBytes, geometry.vertexBuffer, GL2.GL_STATIC_DRAW);
        gl.glEnableVertexAttribArray(vertexAttribute);
        gl.glVertexAttribPointer(vertexAttribute, 3, GL2.GL_FLOAT, false, 0, 0);
    }

    private int _generateBufferID(GL2 gl)
    {
        IntBuffer bufferIDBuffer = IntBuffer.allocate(1);
        gl.glGenBuffers(1, bufferIDBuffer);

        return bufferIDBuffer.get(0);
    }

    private void _checkGLCapabilities(GL2 gl)
    {
        // TODO: Respond to this information in a meaningful way.
        boolean VBOsupported = gl.isFunctionAvailable("glGenBuffersARB") && gl.isFunctionAvailable("glBindBufferARB")
                && gl.isFunctionAvailable("glBufferDataARB") && gl.isFunctionAvailable("glDeleteBuffersARB");

        System.out.println("VBO Supported: " + VBOsupported);
    }

    private void _getShaderAttributes(GL2 gl)
    {
        vertexAttribute = gl.glGetAttribLocation(shaderProgram, "vertex");
        projectionAttribute = gl.glGetUniformLocation(shaderProgram, "projection");
        positionAttribute = gl.glGetUniformLocation(shaderProgram, "positionSampler");
    }

    // Called by me on the first resize call, useful for things that can't be initialized until the screen size is known
    public void viewInit(GL2 gl)
    {
        for(int i = 0; i < NUM_THINGS; i++)
        {
            position[i*2] = (float) (Math.random()*viewWidth);
            position[i*2+1] = (float) (Math.random()*viewHeight);
        }

        gl.glUniformMatrix3fv(projectionAttribute, 1, false, Matrix.projection3f, 0);

        // Load position data into a texture buffer
        gl.glBindBuffer(GL2.GL_TEXTURE_BUFFER, geometry.positionBufferID);
        ByteBuffer textureBuffer = gl.glMapBuffer(GL2.GL_TEXTURE_BUFFER, GL2.GL_WRITE_ONLY);
        FloatBuffer textureFloatBuffer = textureBuffer.order(ByteOrder.nativeOrder()).asFloatBuffer();

        for(int i = 0; i < position.length; i++)
        {
            textureFloatBuffer.put(position[i]);
        }

        gl.glUnmapBuffer(GL2.GL_TEXTURE_BUFFER);
        gl.glBindBuffer(GL2.GL_TEXTURE_BUFFER, 0);
    }

    public void display(GLAutoDrawable d)
    {

        if (!didInit || geometry.vertexBufferID == 0)
        {
            return;
        }

        //long startDrawTime = System.currentTimeMillis();
        final GL2 gl = d.getGL().getGL2();

        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);

        // If we were drawing any other buffers here we'd need to set this every time
        // but instead we just leave them bound after initialization, saves a little render time
        // No combination of these seems to fix the problem
        //gl.glBindBuffer(GL2.GL_ARRAY_BUFFER, geometry.vertexBufferID);
        //gl.glVertexAttribPointer(vertexAttribute, 3, GL2.GL_FLOAT, false, 0, 0);
        //gl.glBindBuffer(GL2.GL_ELEMENT_ARRAY_BUFFER, geometry.indexBufferID);
        gl.glBindBuffer(GL2.GL_TEXTURE_BUFFER, geometry.positionBufferID);
        //gl.glActiveTexture(GL2.GL_TEXTURE0);
        //gl.glTexBuffer(GL2.GL_TEXTURE_BUFFER, GL2.GL_R32F, geometry.positionBufferID);

        _render(gl, geometry);

        // Also tried these
        //gl.glFlush();
        //gl.glFinish();
    }

    public void _render(GL2 gl, SquareGeometry geometry)
    {
        gl.glMultiDrawElements(geometry.drawMode, geometry.countBuffer, GL2.GL_UNSIGNED_SHORT, geometry.offsetBuffer, NUM_THINGS);
        // This one works, but isn't what I want
        //gl.glDrawElements(GL2.GL_LINE_LOOP, count, GL2.GL_UNSIGNED_SHORT, 0);
    }

    public void reshape(GLAutoDrawable d, int x, int y, int width, int height)
    {
        final GL2 gl = d.getGL().getGL2();
        gl.glViewport(0, 0, width, height);
        float ratio = (float) height / width;

        screenWidth = width;
        screenHeight = height;
        viewWidth = 100;
        viewHeight = viewWidth * ratio;

        Matrix.ortho3f(0, viewWidth, 0, viewHeight);

        if (!didInit)
        {
            viewInit(gl);
            didInit = true;
        } 
        else
        {
            // respond to view size changing
        }
    }
} 
```

最后一位是 SquareGeometry 类，它保存所有 bufferID 和顶点数据，但也负责正确填充顶点缓冲区，以便每个顶点的 z 分量可以作为位置纹理的索引：

```
public class SquareGeometry
{
    public float[] vertices = null;

    ShortBuffer indexBuffer;
    IntBuffer countBuffer;
    PointerBuffer offsetBuffer;
    FloatBuffer vertexBuffer;

    public int vertexBufferID = 0;
    public int indexBufferID = 0;
    public int positionBufferID = 0;
    public int positionTextureID = 0;

    public int drawMode;

    protected float width = 0;
    protected float height = 0;

    public SquareGeometry(float size)
    {
        width = size;
        height = size;
    }

    public void buildGeometry(float viewWidth, float viewHeight)
    {
        vertices = new float[4 * 2];
        vertices[0] = -width/2;
        vertices[1] = -height/2;
        vertices[2] = -width/2;
        vertices[3] = height/2;
        vertices[4] = width/2;
        vertices[5] = height/2;
        vertices[6] = width/2;
        vertices[7] = -height/2;

        drawMode = GL2.GL_POLYGON;
    }

    public void finalizeGeometry(int numInstances)
    {
        if(vertices == null) return;

        int num_vertices = this.getNumPoints();
        int total_num_vertices = numInstances * num_vertices;

        // initialize vertex Buffer (# of coordinate values * 4 bytes per float)  
        ByteBuffer vbb = ByteBuffer.allocateDirect(total_num_vertices * 3 * Float.SIZE);
        vbb.order(ByteOrder.nativeOrder());
        vertexBuffer = vbb.asFloatBuffer();

        for(int i = 0; i < numInstances; i++)
        {
            for(int v = 0; v < num_vertices; v++)
            {
                int vertex_index = v * 2;
                vertexBuffer.put(vertices[vertex_index]);
                vertexBuffer.put(vertices[vertex_index+1]);
                vertexBuffer.put(i);
            }
        }
        vertexBuffer.rewind();

        // Create the indices
        vbb = ByteBuffer.allocateDirect(total_num_vertices * Short.SIZE);
        vbb.order(ByteOrder.nativeOrder());
        indexBuffer = vbb.asShortBuffer();

        for(int i = 0; i < total_num_vertices; i++)
        {
            indexBuffer.put((short) (i));
        }
        indexBuffer.rewind();

        // Create the counts
        vbb = ByteBuffer.allocateDirect(numInstances * Integer.SIZE);
        vbb.order(ByteOrder.nativeOrder());
        countBuffer = vbb.asIntBuffer();
        for(int i = 0; i < numInstances; i++)
        {
            countBuffer.put(num_vertices);
        }
        countBuffer.rewind();

        // create the offsets
        offsetBuffer = PointerBuffer.allocateDirect(numInstances);
        for(int i = 0; i < numInstances; i++)
        {
            offsetBuffer.put(num_vertices*i*2);
        }
        offsetBuffer.rewind();
    }

    public int getNumPoints() 
    {
        return vertices.length/2;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:39:16.650

好的，首先，您没有在着色器中设置 gl_Color ，这可能是这里的问题，您只能幸运地使用少量数字。这是一个变化的，但你也有片段着色器来获取价值吗？

您绝不会确保 NUM_THINGS*2 < GL_MAX_TEXTURE_SIZE。我不知道 FloatBuffer.put 是如何反应的；作为 Java 可能/希望是一个例外。

您还绑定了 positionBufferID 缓冲区，然后取消绑定但永远不会重新绑定它。

您创建 positionTextureID 但从不在那里放置任何数据。这也是您放入采样器 positionSampler 并尝试访问的内容。

是的，很多问题，但我的直觉告诉我，最后一个问题可能是这里真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:05:59.707

好吧，我已经解决了，尽管我仍然不清楚最初的问题是什么。我通过简化绘图以使用 drawArrays 而不是 drawElements 或 multiDrawElements 来修复它。我真的不确定为什么我认为我需要它们，因为在这种情况下我真的不需要。我很确定我用索引和偏移量搞砸了一些事情。

此外，就绑定纹理缓冲区的正确方法而言，我上面的代码和我在评论中发布的链接中找到的示例都不是正确的。

[如果有人对像这样使用纹理缓冲区的正确方法感兴趣，我只是在这里http://zebadiah.me/?p=44](http://zebadiah.me/?p=44)上做了相当广泛的文章。谢谢大家的帮助。

# r - 整个数据集的回归线以及基于组的回归线

> ID：12927527
> 
> 赞同：7
> 
> 时间：2012-10-17T05:14:20.823
> 
> 标签：r, ggplot2, line, regression

我是新手，`ggplot2`在显示整个数据集的回归线以及每组的回归线时遇到问题。

到目前为止，我可以根据组绘制回归线，但我没有成功在同一个图上获得整个数据集的回归线。

我想要所有具有不同线条样式的回归线，以便可以在黑白打印中轻松识别它们。

到目前为止，这是我的代码：

```
ggplot(alldata, aes(y = y, x = x, colour= group, shape = group )) +
  geom_point(size = 3, alpha = .8) + 
  geom_smooth(method = "lm", fill = NA , size = 1) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T05:33:17.290

尝试将颜色、形状、线型美学放置在原始调用中`ggplot2`

然后，您可以添加具有不同颜色的整体线条

```
set.seed(1)
library(plyr)
alldata <- ddply(data.frame(group = letters[1:5], x = rnorm(50)), 'group', 
                 mutate, y=runif(1,-1,1) * x +rnorm(10))

ggplot(alldata,aes(y = y, x = x)) +
  geom_point(aes(colour = group, shape = group), size = 3, alpha = .8) + 
  geom_smooth(method = "lm", se = FALSE, size = 1, 
              aes(linetype = group, group = group)) +
  geom_smooth(method = "lm", size = 1, colour = 'black', se = F) +
  theme_bw() 
```

![在此处输入图像描述](../Images/e314a9e8982ec90706d8e32ca37aae95.png)

# python - 从 Linux Azure VM 运行节点或 Python 应用程序

> ID：12927528
> 
> 赞同：3
> 
> 时间：2012-10-17T05:14:22.317
> 
> 标签：python, node.js, azure, ssh, virtual-machine

我似乎无法弄清楚这一点。我在 Azure 上创建了一个新的 Ubuntu VM，我可以通过 SSH 连接到它。我安装了 Node（我已经做过很多次了）并尝试从 nodejs.org 运行测试应用程序：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

但是，当我访问 IP（与我通过 SSH 连接到框中的 IP 相同）+ :1337 时，它永远不会加载。我也试过：80，但还是没有运气。我还尝试在 :8000 上运行 python -m SimpleHTTPServer ，但仍然无法查看该站点。我肯定错过了什么。

就像你知道的那样，我只是想设置一个简单的开发箱，上面有一堆项目。我希望能够在任何地方从事我的项目。有些是 100% 的前端 JS 项目，所以 SimpleHTTPServer 就可以了。有些也是 Node 项目。在任何一种情况下，我都希望能够访问某个端口，看看我在做什么。

哦，我还打开了 Azure 防火墙到 VM，将流量从端口 80 重定向到端口 1337 ( [https://www.evernote.com/shard/s5/sh/3aef8e76-04f6-48cb-84f9-32462bc425a7/f0cd749773a9d09cee66d00fe3e707c0](https://www.evernote.com/shard/s5/sh/3aef8e76-04f6-48cb-84f9-32462bc425a7/f0cd749773a9d09cee66d00fe3e707c0) )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:48:32.717

您正在监听环回 IP 地址。尝试`.listen(1337, '0.0.0.0');`监听所有网络接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T04:24:22.797

天蓝色。我无法打开端口 80。是机器iptables吗？？一些天蓝色魔法的东西。

我知道这不可能那么难。

与您的观点不同，我没有看到负载均衡器的“无”。我看到'--'/不管那是什么意思。

# java - Android - 在数据库中创建一个条目然后开始一个新活动

> ID：12927530
> 
> 赞同：0
> 
> 时间：2012-10-17T05:14:26.680
> 
> 标签：java, android, sqlite

我有一个简单的应用程序，`onClick`它在 sqlite 数据库中创建一个新条目，然后创建一个新意图并启动一个新活动。这种“搞砸”的可能性有多大？java会在继续之前等待它完成db条目吗？

```
DBAdapter test_db = new DBAdapter(getApplicationContext());
test_db.createEntry(level, phase, a, b, c, d);
startActivity(intent); 
```

无论如何，如果由于某种原因它移动得太快，启动新活动可能会弄乱新的数据库条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:59:20.550

没有得到我想要的确切答案。但是，在 android 的开发人员设置中打开严格模式并没有让它消失。所以我只是保留这段代码。

# php - 每个固定的字符行数 不使用monotype字体，有可能吗？

> ID：12927531
> 
> 赞同：1
> 
> 时间：2012-10-17T05:14:29.877
> 
> 标签：php, javascript, jquery, wordpress, css

我需要将一大块文本分成相同大小的段落，并使用完全相同数量的字符串行以保持它们的统一，我目前正在使用以下代码使用 php 进行操作。

```
 function arrangeText(){
                    if (have_posts()) : while (have_posts()) :  the_post();

                    $content = strtolower(get_the_content());
                    $content = trim(strip_tags($content));
                    $post_len = strlen($content);
                    $segmentCont = 1; 
                    $auxOffset = 0; 
                    $auxOffset2 = 0;
                    $limit = 896; 
                    $limitTotal = 0;

                    while($limitTotal<$post_len){

                            if($segmentCont==2) {
                                $limit = 943;
                            }

                            $segmentCont++;
                            $limitTotal = $limitTotal + $limit;
                            if($limitTotal<$post_len)
                             { $auxOffset = strpos($content," ",$limitTotal);}
                            else 
                             { $auxOffset = $post_len;}
                            $post_segment = trim(substr($content,$auxOffset2,$auxOffset-$auxOffset2));
                            $auxOffset2 = $auxOffset;
                            echo_segment($post_segment);
                    }

                    endwhile;                       
                    endif;
                } 
```

## 这实际上可行，但即使我计算每个字符，某些字符可能最多占用三个字符空间，所以我的段落有不同的行数，或者最后一行被切成两半，如果我使用 monotypefont 一切顺利，但我的客户想要一种特定的字体，而我一直在尝试各种事情，但都没有运气，所以我来找大佬们帮忙。我唯一能想到解决这个问题的是一个非常复杂的脚本来获取每个字符的宽度我回显并将该值每次添加到计数变量中，并执行条件（我猜是在循环内）检查总数是否字符的宽度超过了我的段落的总宽度，如果在它找到的最后一个“”（空白）之前将它切片（防止代码将单词切成两半），但我不知道这是否可以用 php、js ,

编辑 1：我的错，单行距字体也不起作用，它们在我的 p 标签（溢出：隐藏）下方被剪切和溢出，我虽然他们一直在工作，直到我阅读文本，所以我猜即使它们是等距的，它们的字符大小也不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:19:11.297

我认为一个非常好的主意是有一个 Key,Value 是 Character,Size 的字典，然后当你迭代而不是每个字符都算作一个字符时，它们算作“Size”（使用字典快速查找）。但是，如果字符不完全等于另一个字符大小的倍数，这可能不起作用。

你怎么看？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:55:37.133

您可以使用此代码测量字符的宽度并创建“字典”。
您可以调整它以返回相对值（比如说`w = 1`，`i = 0.5`它会更灵活）。

小提琴在这里：http: [//jsfiddle.net/Gw4AV/](http://jsfiddle.net/Gw4AV/)

```
var chars = ["a", "b", "c", "i", "w"];
var widths = [];
for (var i = 0; i < chars.length; i++)
{
    var span = $("<span>").text(chars[i]);
    $("body").append(span);
    widths.push(span.width());
}
alert(widths);
​ 
```

# wcf - 从 Metro 应用程序调用 wcf 服务时，无法为具有权限的 SSL/TLS 安全通道建立信任关系

> ID：12927532
> 
> 赞同：1
> 
> 时间：2012-10-17T05:14:37.980
> 
> 标签：wcf, windows-8, microsoft-metro

我正在创建一个 Metro 应用程序来从 WCF 服务读取数据。WCF 服务使用带有证书身份验证的 wsHttpBinding。我正在尝试读取证书并在 Metro 应用程序中验证证书。

在 .net 4.0 中，`X509Certificate2`in `System.Security.Cryptography.X509Certificates`和`SslPolicyErrors`in `System.Net.Security`namespace 用于执行此操作。我无法在新的 Win 8 API 中找到一个`X509Certificate2`和`SslPolicyErrors`类来做到这一点。Metro 应用程序中的等效命名空间是什么。

# android - 如何获取光传感器值

> ID：12927533
> 
> 赞同：2
> 
> 时间：2012-10-17T05:14:38.300
> 
> 标签：android, sensors, android-sensors

我有以下代码使用光传感器，但无法显示 event.value [0] 的值...它仅显示消息“On SensorChanged”的吐司，而且文本未设置为我出错的电视..

这是代码

```
 public void onSensorChanged(SensorEvent event) 
    {
    if( event.sensor.getType() == Sensor.TYPE_LIGHT)
    {
        tv.setText("value: " + event.values[0] + " lux" );   
        Toast.makeText(getApplicationContext(),"On SensorChanged"+ event.values[0],Toast.LENGTH_SHORT).show();
        Log.d("Sensor Changed", "onSensor Change :" + brightness);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-09T13:08:02.503

你注册了监听器。使用传感器分为三个部分

1.  创建 SensorManager 和传感器

    ```
    public class MainActivity extends AppCompatActivity implements SensorEventListener {

    private SensorManager mSensorManager = null;
    private Sensor mLightSensor = null;
    ...
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
    mLightSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);
    } 
    ```

2.  注册您正在收听的传感器

    ```
    @Override
    protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, mLightSensor, SensorManager.SENSOR_DELAY_NORMAL);
    } 
    ```

3.  实现第 1 部分中的 SensorEventListener 方法。

    ```
    @Override
    public void onSensorChanged(SensorEvent sensorEvent) {

    if( sensorEvent.sensor.getType() == Sensor.TYPE_LIGHT)
    {
        Log.d("SensorTest", ""+ sensorEvent.values[0]);
    }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int i) {
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:17:11.120

Galaxy S**实际上**有光传感器硬件。
接近感测由光传感器设备完成。更多关于这个**[here](http://thecodeartist.blogspot.com/2011/01/proximity-sensor-on-android-gingerbread.html)**。

为确保您正确激活和使用光传感器，请
验证是否**[`getSensorList(TYPE_LIGHT)`](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-identify)**返回有效的光传感器。

**[此后按照此链接](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-monitor)**所示进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:39:11.927

我不认为它包含光传感器为什么它什么都不返回，否则你的代码看起来很好，

[http://www.gsmarena.com/samsung-phones-9.php](http://www.gsmarena.com/samsung-phones-9.php)

按照此链接检查您正在测试的模型并查看功能，然后查看传感器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:24:19.970

现在我得到传感器值。但问题是如何将其分配给 System.SCREEN_BRIGHTNESS。我使用以下代码但无法分配它。它仅在亮度设置中启用自动时有效。

以下是代码

```
public void onSensorChanged(SensorEvent event) 
{
    if( event.sensor.getType() == Sensor.TYPE_LIGHT)
    {
        float currentLux = event.values[0];
        brightness=(int)event.values[0];
        brightbar.setProgress(brightness);
        tv2=(TextView)findViewById(R.id.textView2);
        tv2.setText("value:"+ currentLux+ " lux" );   
        System.putFloat(cResolver, System.SCREEN_BRIGHTNESS_MODE,currentLux);
        android.view.WindowManager.LayoutParams layoutpars = window.getAttributes();
        layoutpars.screenBrightness = currentLux;  
        window.setAttributes(layoutpars); 
        Log.d("Sensor Changed", "onSensor Change :" + currentLux);
    }

} 
```

# actionscript-3 - AS3 公共变量不会存储值

> ID：12927534
> 
> 赞同：2
> 
> 时间：2012-10-17T05:14:45.807
> 
> 标签：actionscript-3, oop

第一次在这里海报。

所以我正在构建一个“多 RSS 提要阅读器”，并将其分为 2 个类，一个“TechFeed.as”和一个“Feed.as”；技术提要通过将 URL 传递给新的提要对象来实例化多个提要。

我目前的问题是在 Feed.as 中有几个公共变量，它们在 TechFeed.as 中用于显示有关提要的基本详细信息，但是，这些变量拒绝保留我在 Feed.as 的函数中赋予它们的任何值，并且出现“空”。

编辑：也许还有一些需要注意的地方；TechFeed.as 是舞台使用的主要 AS 文件。

**TechFeed.as**

```
package  {

    import flash.display.MovieClip;

    public class TechFeed extends MovieClip {

        private var feed_one:Feed = new Feed("http://feeds.feedburner.com/crunchgear");
        private var feed_two:Feed = new Feed("http://feeds.mashable.com/Mashable");
        private var feed_three:Feed = new Feed("http://www.engadget.com/rss.xml");

        public function TechFeed() {
            trace(feed_one.feed_title);

            //feed_name.text = feed_one.getFeedTitle();
        }

    }

} 
```

**饲料.as**

```
package  {

    import flash.net.URLLoader;
    import flash.events.Event;
    import flash.net.URLRequest;

    public class Feed {

        //Public variables to display feed info
        public var feed_title:XMLList;
        public var feed_desc:String;
        public var feed_link:String;

        //Setting up variables which help load the feeds

        private var feedXML:XML;
        //Create a loader to load an external URL
        private var loader:URLLoader = new URLLoader();

        public function Feed(inURL:String = "") {
            //Load the xml document
            loader.load(new URLRequest(inURL));
            loader.addEventListener(Event.COMPLETE,onLoaded);
        }

        //When the loader had loaded the xml document, pass that into a variable for use. 
        private function onLoaded(e:Event):void {
            feedXML = new XML(e.target.data);

            // break down the xml document elements into singular XML array lists

            //Feed details
            this.feed_title = feedXML.channel.title;
            this.feed_link = feedXML.channel.link;
            this.feed_desc = feedXML.channel.description;

            trace(this.feed_title);

        }

    }

} 
```

任何帮助将不胜感激 ：）

谢谢，杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:17:56.750

如果问题是`feed_one.feed_title`在 TechFeed() ctor 中出现 null，那是因为您没有等待提要完成加载。您要做的是在完成加载和处理数据后从 Feed 发送一个事件，在 TechFeed 中捕获它，然后随意使用公共变量（这也意味着您的 Feed 类必须继承 EventDispatcher）：

在 Feed 类中：

```
private function onLoaded(e:Event):void {
            feedXML = new XML(e.target.data);

            // break down the xml document elements into singular XML array lists

            //Feed details
            this.feed_title = feedXML.channel.title;
            this.feed_link = feedXML.channel.link;
            this.feed_desc = feedXML.channel.description;

            trace(this.feed_title);
            dispatchEvent(new Event(Event.COMPLETE));////Dispatch Event

        } 
```

在 TechFeed 类中：

```
public function TechFeed() {
            trace(feed_one.feed_title);//This will trace "null"
            feed_one.addEventListener(Event.COMPLETE, dataLoaded);//add event listener
        }
private function dataLoaded(e:Event):void{
            var feed = Feed(e.currentTarget);
            feed.removeEventListener(Event.COMPLETE, dataLoaded);//remove event listener to prevent memory leaks
            trace(feed.feed_title);// This will trace the correct title
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:53:33.373

您的问题是您尝试在从服务器返回数据之前从提要写入数据的时间。
在此示例中，我分配了一个函数以在加载数据时进行回调。

包裹 {

```
 import flash.display.MovieClip;

    public class TechFeed extends MovieClip {

        private var feed_one:Feed;
        private var feed_two:Feed;
        private var feed_three:Feed;

        public function TechFeed() {
          feed_one= new Feed("http://feeds.feedburner.com/crunchgear",assignResults);
          feed_two= new Feed("http://feeds.mashable.com/Mashable",assignResults);
          feed_three= new Feed("http://www.engadget.com/rss.xml",assignResults);

        }

        public function assignResults(value:value):void{
          feed_name.text = value;
        }

    }

}

package  {

    import flash.net.URLLoader;
    import flash.events.Event;
    import flash.net.URLRequest;

    public class Feed {

        //Public variables to display feed info
        public var feed_title:XMLList;
        public var feed_desc:String;
        public var feed_link:String;

        //Setting up variables which help load the feeds

        private var feedXML:XML;
        //Create a loader to load an external URL
        private var loader:URLLoader = new URLLoader();

private var _callBackFunc:Function;
        public function Feed(inURL:String = "", callBackFunc:Function) {

           this._callBackFunc = callBackFunc;

            //Load the xml document
            loader.load(new URLRequest(inURL));
            loader.addEventListener(Event.COMPLETE,onLoaded);
        }

        //When the loader had loaded the xml document, pass that into a variable for use. 
        private function onLoaded(e:Event):void {
            feedXML = new XML(e.target.data);

            // break down the xml document elements into singular XML array lists

            //Feed details
            this.feed_title = feedXML.channel.title;
            this.feed_link = feedXML.channel.link;
            this.feed_desc = feedXML.channel.description;

            this._callBackFunc(this.feed_title);

        }

    }

} 
```

# java - 将程序转换为使用对象而不是数字

> ID：12927536
> 
> 赞同：3
> 
> 时间：2012-10-17T05:15:08.267
> 
> 标签：java, priority-queue

我被要求将程序转换为在我的数组中使用泛型类型。

我不知道从哪里开始。我试图将数组转换为泛型，但我一直遇到问题。

我试图通过使用将数组转换为泛型数组，`queArray = (T[]) (new Comparable[maxSize]);`但是在我修改所有变量以假设使用泛型类型之后，我不断收到错误。

我必须在这里改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:25:37.460

你要声明`T`必须实现`Comparable`。这允许您明确声明`PriorityQ`只能支持可以比较排序的类。这样做是这样的：

```
class PriorityQ<T extends Comparable<T>> 
```

现在`queArray`应该`new`作为一个数组编辑，`T`因为它`PriorityQ`是排序类型的实例`T`：

```
queArray = new T[maxSize]; 
```

最后，使用该`Comparable.compareTo`方法进行比较：

```
if( item .compareTo(queArray[j]) > 0 )      // if new item larger, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T05:22:51.263

目前还不清楚你想要什么，但我会猜测......

限制您的类型（已编辑 - 是`<T extends Number>`，但未`Number`实现`Comparable`）：

```
class PriorityQ<T extends Number & Comparable<T>> 
```

将您的方法更改为 return `T`，例如：

```
public T peekMin() 
```

然后对于`Long`实施，只需：

```
PriorityQ<Long> pqLong = new PriorityQ<Long>(9); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:23:02.953

在下面更新以通过只要

```
 thePQ.insert(30L);
  thePQ.insert(50L);
  thePQ.insert(10L);
  thePQ.insert(40L);
  thePQ.insert(20L); 
```

# iphone - 添加没有 PKAddPassesViewController 实例的通行证

> ID：12927537
> 
> 赞同：1
> 
> 时间：2012-10-17T05:15:11.920
> 
> 标签：iphone, objective-c, ios, passbook

在文档中

> 要将通行证添加到库：
> 
> *   为通行证创建一个 PKPass 类的实例，并使用通行证的数据对其进行初始化。
> *   使用 PKPassLibrary 类的 containsPass: 方法检查 pass 是否在库中。您的应用可以使用此方法检测通行证的存在，即使它没有读取库中通行证的权利。
> *   如果 pass 不在库中，请使用 PKAddPassesViewController 类的实例让用户添加它。
>     以模态方式显示添加通道视图控制器，并带有动画。

有什么方法可以在不初始化 PKAddPassesViewController 的情况下将通行证添加到我的存折中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:05:29.970

[文件](http://developer.apple.com/library/ios/#documentation/PassKit/Reference/PKPass_Ref/PKPass.html#//apple_ref/doc/c_ref/PKPass)清楚地表明，`PKPass`该类代表单程。此外，没有这样的方法`PKClass`可以将其添加到库中。

因此，您需要使用`PKAddPassesViewController`它让您的应用显示通行证并提示用户将该通行证**添加**到通行证库。

# video - 使用 AVFoundation 录制的视频可以直接写入 Assets Library 吗？

> ID：12927538
> 
> 赞同：4
> 
> 时间：2012-10-17T05:15:12.450
> 
> 标签：video, avfoundation, alassetslibrary

我正在使用 AVFoundation 使用以下方法将视频录制到 NSTemporaryDirectory。

```
[[self movieFileOutput] startRecordingToOutputFileURL:[self outputFileURL] recordingDelegate:self]; 
```

一旦停止录制

```
[library writeVideoAtPathToSavedPhotosAlbum:outputFileURLcompletionBlock:^(NSURL *assetURL, NSError *error)` 
```

方法被调用。

我注意到，当视频从临时目录写入照片库时，它会保留在那里，直到保存完成。

这对我来说没有意义，因为它在保存视频时需要双倍的磁盘空间。例如，如果我录制一小时长的 1080p 视频，在录制结束时磁盘大小为 5GB，但在删除临时文件并释放磁盘空间之前保存到照片库时会增加到 10GB。

很想听听您对此的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:10:24.987

我认为，最好将视频临时存储为 Document-directory 为**.mp4**。

然后保存到文档目录并在保存后将其删除。

```
NSString *videoPath = [[self getDirectoryPath:[NSString stringWithUTF8String:currentRequest.fileName]] retain];

 NSURL *videoPathURL = [NSURL URLWithString:videoPath];                 

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];  

[library writeVideoAtPathToSavedPhotosAlbum:videoPathURL completionBlock:^(NSURL *assetURL, NSError *error) { 

       //Delete "videoPath" file from Document directory

}]; 

-(NSString *)getDirectoryPath:(NSString *)fileName {        

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *path = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp4",fileName]];
    return path;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-14T08:14:49.810

录制时似乎无法将视频文件直接写入照片库。但是您可以将您在应用程序目录（如临时、文档等）中写入的文件移动到照片库，而不是复制文件。因此，您可以避免在设备上有额外的空间，以便将录制的文件保存在照片库中。

我在下面添加了可用于将录制的文件移动到照片库的确切 API。

```
PHPhotoLibrary.shared().performChanges({
    let options = PHAssetResourceCreationOptions()
    options.shouldMoveFile = true
    let creationRequest = PHAssetCreationRequest.forAsset()
    creationRequest.addResource(with: .video, fileURL: outputFileURL, options: options)
}, completionHandler: { success, error in
    if !success {
        print("Couldn't save the movie to your photo library: \(String(describing: error))")
    }
    cleanup()
   }
) 
```

上述示例中将文件移动到照片库的主要部分是，

```
let options = PHAssetResourceCreationOptions()
options.shouldMoveFile = true 
```

# c - 计算我的 C 程序的执行时间？

> ID：12927544
> 
> 赞同：4
> 
> 时间：2012-10-17T05:15:35.327
> 
> 标签：c

> **可能重复：**
> [如何在 C 中以毫秒为单位获取程序的执行时间？](https://stackoverflow.com/questions/2215744/how-can-i-get-the-execution-time-of-a-program-in-milliseconds-in-c)
> [使用 time() 函数计算执行时间](https://stackoverflow.com/questions/6974893/calculating-time-of-execution-with-time-function)

我试过`clock()`了，`time.h`但它总是给我`0.0000`几秒钟，即 0 秒作为输出。有没有办法以微秒或毫秒或任何其他更小的单位获得执行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:19:51.013

在 shell 中执行程序之前加上“时间”，即：

```
user@linux:~$ time c_program_name 
```

运行以下命令，例如：

```
sampson-chen@linux:~/src/reviewboard$ time ls -R 
```

给出以下时间结果：

```
real    0m0.046s
user    0m0.008s
sys     0m0.012s 
```

有关调整显示格式/精度/详细程度的时间，请参阅手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:34:40.977

时钟一直显示 0.000，因为执行速度非常快，执行时间可以忽略不计。尝试使用一些复杂的算法来检查时间，例如河内塔或具有大值的 NQueesns。然后你会在几毫秒内得到执行时间。我用 15 张光盘为河内塔试了一下，它给了我一些执行价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:18:30.573

时钟应该可以工作，您需要在一开始就定义它并最后打印值，检查一下：[http ://www.cplusplus.com/reference/clibrary/ctime/clock/](http://www.cplusplus.com/reference/clibrary/ctime/clock/)

# c - 如何在 libxml2 中添加从字符串构造的 xml 节点

> ID：12927548
> 
> 赞同：6
> 
> 时间：2012-10-17T05:16:35.960
> 
> 标签：c, xml, libxml2

我正在使用 Libxml2 将数据编码到 xml 文件中。我的数据包含“<”和“>”之类的标签。当它被转换成 xml 时，这些标签也被转换成“<”和“>”。有什么办法可以解决这个问题。我想在解码那个 xml 文件时使用这些标签作为 xml 节点，所以 CDATA 不是这个问题的解决方案。请为此提供任何解决方案。谢谢。

示例代码：

```
xmlNewChild(node, NULL, (xmlChar *)"ADDRESS", (xmlChar *)"<street>Park Street</street><city>kolkata</city>");

and output of above code is:
<person>
<ADDRESS>&lt;street&gt;Park Street&lt;/street&gt;&lt;city&gt;Kolkata&lt;/city&gt;</ADDRESS> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:47:54.267

如果要将字符串视为 xml，则应`xmlDoc`使用[xmlReadMemory](http://www.xmlsoft.org/html/libxml-parser.html#xmlReadMemory)对其进行解析并从中获取。它可以用于更大的字符串，但通常文档是使用单步指令构建的，就像在 Joachim 的回答中一样。在这里，我介绍`xmlAddChildFromString`了以字符串方式执行这些操作的函数。

```
#include <stdio.h>
#include <string.h>
#include <libxml/parser.h>
#include <libxml/tree.h>

/// Returns 0 on failure, 1 otherwise
int xmlAddChildFromString(xmlNodePtr parent, xmlChar *newNodeStr)
{
  int rv = 0;
  xmlChar *newNodeStrWrapped = calloc(strlen(newNodeStr) + 10, 1);
  if (!newNodeStrWrapped) return 0;
  strcat(newNodeStrWrapped, "<a>");
  strcat(newNodeStrWrapped, newNodeStr);
  strcat(newNodeStrWrapped, "</a>");
  xmlDocPtr newDoc = xmlReadMemory(
    newNodeStrWrapped, strlen(newNodeStrWrapped),
    NULL, NULL, 0);
  free(newNodeStrWrapped);
  if (!newDoc) return 0;
  xmlNodePtr newNode = xmlDocCopyNode(
    xmlDocGetRootElement(newDoc),
    parent->doc,
    1);
  xmlFreeDoc(newDoc);
  if (!newNode) return 0;
  xmlNodePtr addedNode = xmlAddChildList(parent, newNode->children);
  if (!addedNode) {
    xmlFreeNode(newNode);
    return 0;
  }
  newNode->children = NULL; // Thanks to milaniez
  newNode->last = NULL;     // for fixing
  xmlFreeNode(newNode);     // the memory leak.
  return 1;
}

int
main(int argc, char **argv)
{
    xmlDocPtr doc = xmlNewDoc(BAD_CAST "1.0");
    xmlNodePtr root = xmlNewNode(NULL, BAD_CAST "root");
    xmlDocSetRootElement(doc, root);
    xmlAddChildFromString(root,
      "<street>Park Street</street><city>kolkata</city>");
    xmlDocDump(stdout, doc);
    xmlFreeDoc(doc);
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:42:50.653

您必须调用`xmlNewChild`一个链，一个调用父节点，一个调用每个子节点：

```
xmlNodePtr *addressNode = xmlNewChild(node, NULL, (xmlChar *) "address", NULL);
xmlNewChild(addressNode, NULL, (xmlChar *) "street", "Park Street");
xmlNewChild(addressNode, NULL, (xmlChar *) "city", "Koltaka"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-17T23:54:56.120

您可以尝试使用函数 xmlParseInNodeContext。它允许您在父节点的上下文中解析原始 XML，并构造一个可以附加到父节点的节点。

例如：

```
const char * xml = "<a><b><c>blah</c></b></a>";
xmlNodePtr new_node = NULL;

// we assume that 'parent' node is already defined
xmlParseInNodeContext(parent, xml, strlen(xml), 0, &new_node);
if (new_node) xmlAddChild(parent, new_node); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-04T13:55:15.640

我现在使用以下代码将 XML 文本（可能包含多个元素）注入现有节点（感谢 Nazar 和 nwellnhof 提供的唯一答案并从我的问题中引用我（Injecting [a string into an XML node without content escaping](https://stackoverflow.com/questions/22142223/injecting-a-string-into-an-xml-node-without-content-escaping)）到这个）：

```
std::string xml = "<a>" + str + "</a>";
xmlNodePtr pNewNode = nullptr;
xmlParseInNodeContext(pParentNode, xml.c_str(), (int)xml.length(), 0, &pNewNode);
if (pNewNode != nullptr)
{
    // add new xml node children to parent
    xmlNode *pChild = pNewNode->children;
    while (pChild != nullptr)
    {
        xmlAddChild(pParentNode, xmlCopyNode(pChild, 1));
        pChild = pChild->next;
    }

    xmlFreeNode(pNewNode);
} 
```

它需要字符串 (str) 添加一个环绕元素 (< a >...< a/ >)，使用*xmlParseInNodeContext*解析字符串，然后将新节点的子节点添加到父节点。重要的是添加新节点的子节点而不是新节点，以避免在最终 XML 中出现 <a>...<a/ >。

# android - 如何创建边距移动图像视图android

> ID：12927550
> 
> 赞同：0
> 
> 时间：2012-10-17T05:16:50.123
> 
> 标签：android

请给我样本移动图像到我的保证金目的地

插图

```
image        x (margin move image) 
```

如果拖动图像移动图像停止移动到我的边缘

```
imageView.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                int eid = event.getAction();
                switch (eid) {
                case MotionEvent.ACTION_MOVE:
                    RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) imageView.getLayoutParams();
                    int x = (int) event.getRawX();
                    //int y = (int) event.getRawY();
                    TextView text = (TextView) findViewById(R.id.editText1);
                    text.setText("1");
                   mParams.setMargins(0, 0, 70, 0);
                    mParams.leftMargin = x+0;
                    //mParams.

                    imageView.setLayoutParams(mParams);

                    break;
                default:
                    break;
                }
                return true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:19:15.800

```
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
        Gravity.NO_GRAVITY); 
```

我错过的第三个参数（Gravity.NO_GRAVITY）。使用它，您可以将视图放置在任何设置宽度/高度的位置。

引用自[安卓。创建时如何移动图像视图（设置位置/边距）](https://stackoverflow.com/questions/10491736/android-how-to-move-the-imageviewset-position-margin-when-it-is-created)

# node.js - node.js 和 jsdom - 无法检测到返回了 http 500 错误？

> ID：12927551
> 
> 赞同：4
> 
> 时间：2012-10-17T05:17:01.077
> 
> 标签：node.js, jsdom

我将 jsdom 与 node.js 一起使用，我试图让它为我提供一些指示，表明发生了 http 错误。我已经设置了一个测试服务器，它只为所有请求返回一个 http 500 标头，但是当我尝试使用 jsdom 加载它时，jsdom 不会抛出任何错误，并且似乎没有向我提供任何可以识别的信息返回了 http 500 错误。检测 http 500 错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T20:34:41.480

我看起来 jsdom 不检查状态代码。500 状态码不被 Node 的 HTTP 模块视为错误，因此它们被 jsdom 视为正确响应。

我建议您在使用 jsdom 之前自己测试状态代码并将 jsdom 传递给您的响应正文，即：

```
var jsdom = require('jsdom').jsdom;
var request = require('request');  //jsdom already uses request*

request("http://www.google.com/", function (err, response, body) {
  if (!err && response.statusCode == 200) {
    jsdom.env(body, function (errors, window) {
      // your code
    });
  }
}); 
```

[*] 请求模块：[https ://github.com/mikeal/request](https://github.com/mikeal/request)

# android - 解析 XML - JSON 文件数据以在 Android 谷歌地图应用程序上添加多个标记

> ID：12927562
> 
> 赞同：1
> 
> 时间：2012-10-17T05:17:49.217
> 
> 标签：android, android-emulator, android-mapview, android-maps

我需要解析 XML 或 JSON 文件数据以在 Android 谷歌地图应用程序上添加多个标记，我不知道如何将其解析为地图视图，我可以获得相同的源代码吗？

Xml 文件看起来像：-

```
 <map>
  <area>
     <longitude>-97.762914</longitude> 
     <latitude>30.282165</latitude> 
     <name>Place Name 1</name> 
     <address>Place Address 1</address> 
  </area>
  <area>
    <longitude>-97.762914</longitude> 
    <latitude>31.282165</latitude> 
    <name>Place Name 3</name> 
    <address>Place Address 3</address> 
  </area>
  <area>
    <longitude>-97.762914</longitude> 
    <latitude>32.282165</latitude> 
    <name>Place Name 3</name> 
    <address>Place Address 3</address> 
  </area>
 </map> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:26:46.380

对于 xml 解析，请遵循以下两个链接：

[http://android-er.blogspot.in/2010/04/read-xml-resources-in-android-using.html](http://android-er.blogspot.in/2010/04/read-xml-resources-in-android-using.html)

[http://www.codeproject.com/Articles/334859/Parsing-XML-in-Android-with-SAX](http://www.codeproject.com/Articles/334859/Parsing-XML-in-Android-with-SAX)

在谷歌地图上放置多个制造商，请注意：

[http://www.coderanch.com/t/493833/Android/Mobile/Multiple-Markers-Google-Map-Android](http://www.coderanch.com/t/493833/Android/Mobile/Multiple-Markers-Google-Map-Android)

[http://androidcodeplace.blogspot.in/2012/04/adding-multiple-markers-on-android-map.html](http://androidcodeplace.blogspot.in/2012/04/adding-multiple-markers-on-android-map.html)

希望，这些会帮助你..

# git - 具有共享功能分支的正确 git 工作流程是什么？

> ID：12927566
> 
> 赞同：5
> 
> 时间：2012-10-17T05:18:25.490
> 
> 标签：git

假设我有一个名为`feature`已分支的分支`master`。developer1 和 developer2 checkout `feature`。developer1 提交更改`feature`并推送它。然后 developer3 推送一些东西到`master`. 在这一点上`master`并`feature`分歧，每个人都有一个单独的提交。

如果存在冲突，从`master`中获取最新信息的正确方法是什么？`feature`我应该`master`重新加入`feature`，还是合并它？

**编辑：**

我应该提一下，在这种情况下，我不想重写 developer2 上的历史记录。因为那样会很糟糕。正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:56:36.087

考虑到`feature`分支已经共享，它不应该被重新基于`master`（因为它改变了它的 - 共享 - 历史）。

`master`一个简单的从to合并`feature`就足够了（不用推测为什么首先要`dev3`推到`master`）。

* * *

正如[Adam Dymitruk](https://stackoverflow.com/users/217284/adam-dymitruk) [评论](https://stackoverflow.com/questions/12927566/what-is-the-right-git-workflow-with-shared-feature-branches/12927985#comment17539646_12927985)的那样，这被称为“反向合并”，并且根据您归因于 的角色`master`，这是有问题的：如果`master`代表稳定的生产状态，您应该合并*到* `master`，而不是*from* `master`。

但同样，我的回答没有假设所述角色。

* * *

这就是为什么著名的**[git-flow](https://github.com/nvie/gitflow)**在其[博客文章中说明了](http://nvie.com/posts/a-successful-git-branching-model/)*即将*掌握的合并（例如，来自一个`hotfix`分支，正如我[之前评论的那样](https://stackoverflow.com/questions/12927566/what-is-the-right-git-workflow-with-shared-feature-branches/12927985#comment17519985_12928245)）

![混流](../Images/40339e42762b91d79a64f8991bb012c5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:16:29.810

`git`是一个很棒的工具；但是，它*不能*代替开发人员之间的良好沟通。

您必须询问 中的更改是否也`master` *必须*包含在`feature`. 理想情况下，*功能分支*应该具有尽可能少的代码量。

如果更改绝对必须包含在 中`feature`，那么您基本上有两种选择`git rebase`：并且，`git cherry-pick`。`master`我想你可以从into执行向后合并`feature`；但是，这可能会导致糟糕的情况......

`cherry-pick`允许您将特定提交或多个提交应用于当前`HEAD`，保留评论和作者信息。成功`cherry-pick`ed 后，git 足够聪明，可以知道两个提交在合并`feature`回`master`. 如果只是我们正在谈论的几个提交，那么`cherry-pick`应该就足够了。

`rebase`允许您从历史的不同点开始应用当前分支（提交行）。正如您所指出的，这对于已经拥有`feature`. 他们还需要将`rebase`他们的本地开发转移到*新* `feature`的分支上。

无论如何，`master`developer3 直接提交的内容应该在它自己的功能分支中，并且该功能分支应该已经合并。然后可以根据需要合并该功能分支`feature`。假设只有一个（最近的）提交`master`，您可以按如下方式纠正这种情况：

```
# Ensure clean working directory
$ git stash

# Create new branch at master
$ git branch some-descriptive-name master

# Move master back one commit
$ git checkout master
$ git reset --hard HEAD^

# Merge the new branch into master
$ git merge --no-ff some-descriptive-name

# Forcibly update master
#   YOU SHOULD COMMUNICATE WITH OTHER DEVS BEFORE DOING THIS
$ git push -f origin master

# Merge the new branch into feature
$ git checkout feature
$ git merge --no-ff some-descriptive-name 
```

我怎么强调良好沟通的价值都不过分，因为这类“糟糕”的事情可以而且确实一直在发生。

祝你好运！

**编辑：**

关于`cherry-pick`ing 的部分是在假设只有几个提交（或只有一个）`master`并且它们都会被`cherry-pick`ed 的情况下编写的。

```
x -- y (master)
 \
  a -- b -- c (feature) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:53:34.350

第三个开发人员不应该在 master 上编写功能。罕见的例外是修补程序。但即便如此，它应该是它自己的分支，然后合并`--no-ff`到 master 上。我在这里写了一篇关于每个功能分支的长文：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

# javascript - 我可以从 android 中的 Javascript 读取 sharedpreference 吗？

> ID：12927570
> 
> 赞同：0
> 
> 时间：2012-10-17T05:18:36.720
> 
> 标签：javascript, android, security, sharedpreferences

在我的 Android 应用程序中，如果我`JavaScript`从 Web URI 下载一些内容，该 JavaScript 是否可以读取我的本机文件，例如共享首选项或存储在我的应用程序位置的其他文件？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:44:10.813

Generally, no. If it is running in a WebView and you have hooks to native methods in that (via `addJavascriptInterface()`), and the JS code you download knows (or guesses) what they are, it might be able to call them. Which could technically result in it reading files.

# objective-c - 如何在 Objective C 中通过引用传递函数？

> ID：12927572
> 
> 赞同：-2
> 
> 时间：2012-10-17T05:18:45.100
> 
> 标签：objective-c, function, reference

`-(void) displayQuestionWithAnswer: (int) answerNumber`我的ClassA 中有以下方法，必须从 ClassB 调用。

在 ClassA 中创建 ClassB 的对象。如何让 ClassB 执行这个特定的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:23:53.683

如果您调用它所属的类中的方法，请使用保留字`self`并像这样使用它：

```
[self someMethod]; 
```

PS如果我以正确的方式理解你的任务）

# html - 将表单内容动态添加到jsp

> ID：12927575
> 
> 赞同：0
> 
> 时间：2012-10-17T05:19:04.803
> 
> 标签：html, forms, spring, jsp, struts

在我的项目中，对于每个用户，文本框、单选框、按钮等表单元素都不同（类型、数量和顺序都可能不同）。它们需要从每个用户的 db 中获取。在这方面，我需要您的建议来显示和管理 jsp 的内容。是否有任何工具或引擎来管理这种内容显示？

PS：我正在使用 Struts 和 Spring 集成框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:32:54.283

没有这样的免费工具可用于生成动态内容，如文本框、收音机、按钮等。

您需要编写一个 template.jsp ，它将具有 if else 块

因此，在 template.jsp 中，从数据库中获取该用户的类型，并基于下面的 for 循环进行迭代。

```
for(String type : types) {
    if(type.equals("textbox")) {
       // custom taglib for rendering textbox or textbox html tag
    } else  if(type.equals("radio")) {
       // custom taglib for rendering radio or radiohtml tag
    } ... and so on

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:26:27.770

您应该将您的第一个请求映射到 servlet，然后根据用户动态生成您的内容（假设您事先了解有关用户的一些信息，以便您可以识别用户）

# python - 搜索A列表中某个元素的索引，如果没有找到，让用户知道

> ID：12927577
> 
> 赞同：1
> 
> 时间：2012-10-17T05:19:08.570
> 
> 标签：python, list, indexing

我有一个基本程序，它采用现有列表，要求用户输入，并在列表中搜索用户输入的元素。我希望它找到它所在的索引，并打印索引。当我输入不在列表中的值时，我收到错误消息：“ValueError: 7 is not in list”

如何阻止程序给出错误消息，或者让用户知道该值不在列表中？

编辑，添加代码：

```
L = [4, 10, 4, 2, 9, 5, 4]
L2 = []
print ("L = ",L)
x = input("Enter an element to search for in the list: ")
x = int(x)

m = L.index(x)
L2.append(m)
print("Found occurences at indexes: ",L2) 
```

我只是想找出所有事件的索引，如果没有，打印一条错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:30:56.723

为此，您可以使用 try 和 except 来避免错误。例如看下面的代码：

```
>>> list_1=[1,2,3,4,5]
>>> input=raw_input("Enter the number:")
Enter the number: 5
>>> try:
...     index=list_1.index(int(input))
...     print "The index is %s" %index
... except ValueError:
...     print "The number is not in the list"
...
The index is 4 
```

如果您再次执行它并输入不在列表中的值，您将收到您使用 except 处理的消息。

```
Enter the number:7
The number is not in the list 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T05:34:53.650

`.index`不是要走的路，因为它只找到元素的第一次出现。遍历整个列表并匹配单个元素：

```
L2 = [i for i,a in enumerate(L) if a == x]
if L2:
    print "Element found at positions: ", L2
else:
    print "Element is not in the list" 
```

`L2`是一个空列表或包含可以在 中找到的**所有**索引。`x``L`

**编辑**：没有“硬”的方式`enumerate`：

```
L2 = []
i = -1
while x in L[i+1:]:
    i = L[i+1:].index(x) + i + 1
    L2.append(i) 
```

返回相同的结果，即如果没有找到则为空列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T05:37:08.313

```
print list1.index(value) if value in list1 else "Not Found" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T06:07:24.977

使用 enumerate 的列表理解是执行此类操作的常用方法，但使用真正的基本概念也不是那么困难。

```
>>> L = [4, 10, 4, 2, 9, 5, 4]
>>> L2 = []
>>> x = 4
>>> for i in range(len(L)):
...     if L[i] == x:
...         L2.append(i)
... 
>>> L2
[0, 2, 6] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:28:48.960

尝试对列表做一个简单的检查（这只是一个准系统示例 - 没有解决多次出现等问题）这使用 Python 的`in`运算符并且比它需要的更详细一点，所以你可以看到发生了什么：

```
>>> def SimpleCheck(my_list, num):
...   if num in my_list:
...     return l.index(num)
...   else:
...     return 'Nada'
...
>>> l = ['one', 'two', 'three']
>>> SimpleCheck(l, 'three')
2
>>> SimpleCheck(l, 'four')
'Nada' 
```

# nutch - Nutch 2.1 还支持文件段吗？

> ID：12927583
> 
> 赞同：0
> 
> 时间：2012-10-17T05:20:06.553
> 
> 标签：nutch

Nutch 2.1 还支持文件段作为数据存储吗？

我无法从文档或 wiki 中找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:53:43.233

你的意思是有部分文件的 nutch 段？据我说，Nutch 2.0 没有。

# c# - 无法访问 Visual Studio 中新创建的项目

> ID：12927585
> 
> 赞同：14
> 
> 时间：2012-10-17T05:20:21.343
> 
> 标签：c#, windows, microsoft-metro, visual-studio-2012, windows-store-apps

我正在 Visual Studio 中创建一个新的 Windows 应用商店应用程序。我似乎无法运行我创建的任何应用程序。即使是新创建的空白应用程序也会给我错误

```
Error : DEP0700 : Registration of the app failed. error 0x80070005: Opening file from location: C:\Users\Jacob\Documents\Visual Studio 2012\Projects\App1\App1\bin\Debug\AppX\AppxManifest.xml failed with error: Access is denied.
. (0x80070005)  App1 
```

有任何想法吗？我已经检查了 AppxManifest.xml 文件的权限，并且我可以完全控制它。我还尝试在提升的权限下运行 Visual Studio，但它仍然出现相同的错误。

编辑：Blend 似乎与 Visual Studio 有相同的问题，这是 Blend 的输出：

```
Application installation failed.
Registering the application to run from layout...
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\AppxPackage\Microsoft.AppXPackage.Targets(1722,9): error : DEP0700: Registration of the app failed. error 0x80070005: Opening file from location: C:\Users\Jacob\Documents\Visual Studio 2012\Projects\booktest\booktest\bin\Debug\AppX\AppxManifest.xml failed with error: Access is denied.
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\AppxPackage\Microsoft.AppXPackage.Targets(1722,9): error : . (0x80070005) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T19:50:24.057

授予 SYSTEM 帐户对包含您的源代码的文件夹的完全权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-01T04:02:53.517

如果您在 Windows 上使用 subst 命令将文件夹路径映射到驱动器号，也会出现此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-09T16:07:44.087

我的问题是解决方案文件夹已加密。我在一个默认加密某些文件夹位置的地方工作。我不得不将文件夹移动到默认不存在的新位置。然后我转到解决方案文件夹，右键单击该文件夹并选择 -> 属性 -> 高级。底部是一个复选框，上面写着“加密内容以保护数据”。取消选中它并对所有子文件夹说“是”。

[![在此处输入图像描述](../Images/a6bc81e928560fe240088dd2a41df62c.png)](https://i.stack.imgur.com/WsPkl.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T06:27:38.820

检查您的文件夹（**C:\Users\Jacob\Documents\Visual Studio 2012\Projects\App1\App1\bin\Debug\AppX\AppxManifest.xml**）的安全性，并确保您对该文件夹具有完全控制权限。

第二个选项是将其移动到另一个驱动器，例如**D:\New Folder**。

# android - Android Jellybean 应用程序加密适用于其他版本吗？

> ID：12927586
> 
> 赞同：6
> 
> 时间：2012-10-17T05:20:21.930
> 
> 标签：android, encryption, android-4.2-jelly-bean

所以...我阅读了 jellybean 更新说明并看到“Jelly Bean 为付费应用引入了应用加密。”

据我了解，当有人将其 apk 移动到另一台设备时，该服务应该使应用程序无法使用。

但是非软糖机器人呢？如果有人将 apk 从 jellybean 设备移动到 ICS 设备，这个加密功能还能工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:45:13.357

Google 在 Google IO 2012 主题演讲中指出，它不应该影响现有设备，但谁知道呢，这里有一个链接报告了很多应用程序因此而中断。

[http://www.androidpolice.com/2012/08/08/jelly-bean-app-encryption-breaks-thousands-of-apps-in-the-play-store-google-disables-drm-for-now/](http://www.androidpolice.com/2012/08/08/jelly-bean-app-encryption-breaks-thousands-of-apps-in-the-play-store-google-disables-drm-for-now/)

好像暂时禁用了。。。

# java - Java 正则表达式转义

> ID：12927587
> 
> 赞同：2
> 
> 时间：2012-10-17T05:20:25.493
> 
> 标签：java, regex

我有这段代码可以在 textarea 中获取 url。在我尝试了一个带有 a 的网址之前，它一直运行良好`'+'`。

```
Pattern pattern = Pattern.compile("(.*)(https?[://.0-9-?a-z=_#!A-Z]*)(.*)");
Matcher matcher = pattern.matcher(text); 
```

所以我尝试将`\\+`and`\\\\+`放入我的代码中，但它不起作用。所以我做了一些谷歌搜索和堆栈溢出问题一直提到这个人

```
Pattern.quote("+"); 
```

但是，我不确定如何将该声明实现到我现在拥有的内容中。如果这甚至是我想走的路。但我假设我需要做这样的事情......

```
String quote = Pattern.quote("+");
Pattern pattern = Pattern.compile("(.*)(https?[://.0-9-?a-z=_#!A-Z]*)(.*)");
Matcher matcher = pattern.matcher(text); 
```

然后在模式中的某处添加变量引号？请帮忙！我今天刚学了这个东西，我对它是全新的！谢谢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:22:17.610

`\`只是用, 例子来转义引号

```
Pattern pattern = Pattern.compile("(.*)(https?[://.0-9-?a-z=_#!A-Z\"]*)(.*)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:34:05.570

```
(https?[://.0-9-?a-z=_#!A-Z]*) 
```

请记住，`[`并`]`表示一类字符，这意味着其中的任何字符都将被包括在内。`[aegl]+`将匹配 "age"、"a"、"e"、g"、"eagle" 和 "gaggle"。这也意味着列出两次的字符（如`/`）是完全多余的。

Pattern.quote 很有用，但只会返回在任何特殊字符前带有反斜杠的相同字符串。`Pattern.quote("+")`将返回`\+`。

因为`+`方括号之间没有意义，所以您应该能够`+`在方括号内放置一个未转义的。此时，您还可以添加一个`\\`如果它让您感觉更好。

```
Pattern pattern = Pattern.compile("(.*)(https?[:/.0-9-?a-z=_#!A-Z+]*)(.*)");
Pattern pattern = Pattern.compile("(.*)(https?[:/.0-9-?a-z=_#!A-Z\\+]*)(.*)"); 
```

在这里看到它：http: [//fiddle.re/0780](http://fiddle.re/0780)

# indexing - 如何从表中获取索引值？

> ID：12927588
> 
> 赞同：0
> 
> 时间：2012-10-17T05:20:33.360
> 
> 标签：indexing

我正在尝试获取创建索引的列的索引值。这个怎么做？我的意思是如下所示：-

```
 index value     indexed field data
    ______________ ____________________ 
    0                apple
    1                orange
    2                manggo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T02:13:19.330

使用 $index。

更多信息：[http ://www.youtube.com/watch?v=jEpbjve5iHk](http://www.youtube.com/watch?v=jEpbjve5iHk)

```
...
<tbody>
    <tr ng-repeat="fruit in fruitBasket">
        <td>{{$index}}</td>                      <!-- --------See this line! -->
        <td>{{fruit}}</td>
    </tr>
</tbody>
... 
```

# ruby-on-rails - 推送到heroku，但应用程序没有变化？

> ID：12927590
> 
> 赞同：1
> 
> 时间：2012-10-17T05:21:11.617
> 
> 标签：ruby-on-rails, heroku

我使用以下三个命令将更改推送到现有应用程序，但更改未反映

```
$ git add .
$ git commit -m "changes"
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits.
$ git push heroku master 
```

我得到：

```
To git@heroku.com:sleepy-oasis-7771.git ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@heroku.com:sleepy-oasis-7771.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

并且没有任何更改反映在应用程序中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:36:16.917

你的推动是`! [rejected]`。这就是没有更改生效的原因。

如消息所示：

```
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

这将向您推荐更多的文档，在您的本地机器上或[在线](http://www.unixlore.net/cgi-bin/man/man2html?git-push+1#lbAL)上可见。同样，如消息所示，a `git pull`（及其产生的合并）将解决此问题。

避免此问题的一种方法是使用[变基工作流程](http://randyfay.com/node/91)而不是合并工作流程。在特性分支中进行开发，当你准备好合并时，拉主，重新设置特性分支，重新运行你的测试套件，*然后*合并。

另外，请阅读您的错误消息。

# iphone - 在 0 到 2.0 的范围内将 UISlider 增加 0.2

> ID：12927591
> 
> 赞同：0
> 
> 时间：2012-10-17T05:21:19.393
> 
> 标签：iphone, ios, ipad, uislider

> **可能重复：**
> [在 1 到 100 的范围内将 UISlider 增加 1](https://stackoverflow.com/questions/12834140/increment-uislider-by-1-in-range-1-to-100)

我是 iPhone 新手，

如何让我的 UISlider 以 0.2 为增量从 0 变为 2？

```
slider = [[UISlider alloc] init];
[slider addTarget:self action:@selector(sliderChange:) forControlEvents:UIControlEventValueChanged];
[slider setBackgroundColor:[UIColor clearColor]];
slider.minimumValue = 0.0;
slider.maximumValue = 2.0;
slider.continuous = YES;
slider.value = 0.0;

- (IBAction)sliderChange:(id)sender{
    NSLog(@"slider.value=%f",slider.value);
} 
```

当我滑动我的日志显示...

```
slider.value = 1.000000
slider.value = 1.123440
slider.value = 1.234550
slider.value = 1.345670
slider.value = 1.567890
.
.
. 
```

我希望滑块值为 0.0 、 0.2 、 0.4 等等...

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T05:51:41.103

在您的 sliderChanged 方法中，从您的滑块中获取值，将其四舍五入到最接近的 0.2，然后将滑块的值设置为此四舍五入的值。这会将滑块滑块捕捉到 0.2 个增量。

你可以像这样四舍五入：

```
float roundedValue = roundf(value / 0.2f) * 0.2f; 
```

（感谢@koki）

# android - Android 服务多线程和 startForeground()

> ID：12927600
> 
> 赞同：1
> 
> 时间：2012-10-17T05:22:32.950
> 
> 标签：android, multithreading, android-service, android-notifications, android-notification-bar

我有一个`Service`便于从服务器下载文件的工具。每次`Intent`收到 an 时`onStartCommand`，我都会启动一个新`Thread`的 ，将`Thread`要下载的 url 作为键放入地图中，并创建一个通知以显示下载进度。如果映射中没有`Thread`s，则在 中设置一个标志`Thread`，表示它应该在创建或更新`startForeground`时使用。`Notification`随后`Thread`的 s/ `Notification`s 显示`NotificationManager.notify`与`FLAG_AUTO_CANCEL`off 和`FLAG_ONGOING_EVENT`on 一起使用。每个`Thread`都有自己的唯一 id 发送到`startForeground`or `notify`。当文件完成下载，或用户取消下载（通过按下`Notification`按钮`RemoteView`，如果调用的是“前台线程/通知” `stopForeground(true)`，`Notification`则填充新`RemoteView`的显示下载是否完成，并且下一次运行`Thread`将其“前台”标志设置为`true`。

问题是，如果我有两个文件下载，会有一个`Notification`/`Thread`连接到`startForeground`一个，一个没有。如果我取消“前景”，一切都很好。但是，如果我按下非前景按钮上的取消按钮，前景按钮将被关闭（再次按下取消按钮将关闭正确的按钮）。如果我不取消任何一个，并且我开始第 3 次下载，该下载在其他人之前完成，则`Notification`显示已完成，但其他两个仍将开始闪烁并在状态栏中快速上下移动。

我如何确保`Service`只要有下载，通知将始终位于前台，而不会在上述情况下跳来跳去，并且取消工作正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:10:03.277

我最终做的是在被`Service`调用中创建一个对所有s`isInForeground`都是全局的变量。`Thread`它表示是否`startForeground`已被调用，没有后续调用`stopForeground`。

在我的`updateNotification`方法中，我检查`isInForeground`. 如果是，`false`我将其设置为`true`，将`Thread`'`isForegroundNotification`标志设置为，`true`并`startForeground`使用 that调用`Thread`。`Notification`在我的`stopNotification`方法中，如果`Thread`'s`isForegroundNotification`是`true`，我将其设置`isInForeground`为`false`并调用`stopForeground(true)`。

# android - 无法从数据库中删除

> ID：12927601
> 
> 赞同：0
> 
> 时间：2012-10-17T05:22:49.087
> 
> 标签：android, database

无法解决以下问题。我有保存在 SQLite 数据库中的项目列表和这些项目的名称。我使用 onContextItemSelected 方法对列表中的项目进行操作（添加和删除）。到目前为止，向数据库中添加新名称并在列表中反映新项目没有问题；但删除让我发疯。当我单击删除时，项目已从列表中删除，但名称无法从数据库中删除。

这是代码

```
 if (item.getItemId() == CM_DELETE_ID) {

                AdapterView.AdapterContextMenuInfo acmi = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();

                // delete item from list
                bazar.remove(acmi.position);

                // get clicked item id from list                    
                rowID = acmi.id;

                // open database          
                datasource.openToWrite();

                if (cursor != null) {

Log.d(LOG_TAG, "--- Delete from mytable: ---");     

//delete from database
datasource.db.delete(DBHelper.TABLE, DBHelper.COLUMN_ID + " = " + rowID, null);

Log.d(LOG_TAG, "deleted row = " + datasource.db.delete(DBHelper.TABLE, DBHelper.COLUMN_ID + " = " + rowID, null));                                        

                } else {
                    Log.d(LOG_TAG, "Cursor is null");
                    cursor.close();
                }
                // close database
                datasource.close();

                myAdapter.notifyDataSetChanged();

                return true; 
```

日志说

```
 05:12:08.403   1131    example.CustomAdapter   DEBUG       row inserted, ID = 1
05:12:08.413    1131    example.CustomAdapter   DEBUG       ID = 1, name = A1
05:12:22.853    1131    example.CustomAdapter   DEBUG       row inserted, ID = 2
05:12:22.864    1131    example.CustomAdapter   DEBUG       ID = 1, name = A1
05:12:22.864    1131    example.CustomAdapter   DEBUG       ID = 2, name = A2
05:12:23.623    111 jp.co.omronsoft.openwnn DEBUG   dalvikvm    GC_EXTERNAL_ALLOC freed 20K, 44% free 3471K/6151K, external 3902K/3936K, paused 169ms
05:12:41.833    1131    example.CustomAdapter   DEBUG       --- Delete from mytable: ---
05:12:41.984    1131    example.CustomAdapter   DEBUG       deleted row count = 0 
```

在 onCreate 我有 dbReadAll 方法，列出了我拥有的所有项目和 bazar.add(new Bazar(names, R.drawable.unread)); 是我的数组列表

```
 void dbReadAll() {

    bazar.add(new Bazar(names, R.drawable.unread));

    // подключаемся к базе данных для чтения данных
    datasource.openToRead();

    // получаем значение курсора        
    cursor = datasource.queryAll();

    if (cursor.moveToFirst()) {

        nameColIndex = cursor.getColumnIndex(DBHelper.COLUMN);

        do {

            Log.d(LOG_TAG, "ID = " + cursor.getInt(idColIndex) + ", name = " + cursor.getString(nameColIndex));

            names = cursor.getString(nameColIndex);

            bazar.add(new Bazar(names, R.drawable.unread));

        } while (cursor.moveToNext());

    } else {
        cursor.close();
        datasource.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:15:56.163

我认为您映射行 ID 错误， rowid 可能不等于 acmi.id 。

所以你可以做的是从光标获取行ID

```
cursor.movetoPosition(acme.id);    
rowid = cursor.getLong(cursor.getColumnIndex(DBHelper.COLUMN_ID)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:28:54.523

尝试这个：

```
//delete from database
datasource.db.delete(DBHelper.TABLE, DBHelper.COLUMN_ID + "=?", new String[]{Long.toString(rowID)}); 
```

似乎删除语句使用预先准备好的查询有关更多信息，请参见[这个软问题](https://stackoverflow.com/questions/3314176/delete-row-in-database-table-given-one-column-value-which-is-a-string)

**UPDATE**更改`rowId`为`Long.toString(rowId)`我们需要在字符串数组中输入一个字符串

# php - 获取多个 $_POST 记录的冗余方式？

> ID：12927603
> 
> 赞同：0
> 
> 时间：2012-10-17T05:22:53.840
> 
> 标签：php, mysql, arrays

**编辑：**我可能只是让它成为一个更“*一步一步*”的过程，即

![](../Images/c2761f9dfa24e921fb75dbf8ab41b283.png)

看起来它感觉更加用户友好并且仅适用于 <5 图像。我已阅读并感谢我迄今为止收到的所有帮助。

* * *

我对 PHP 相当陌生，我正在构建一个基本的 PHP 图像编辑器，它可以允许多个图像数据审计，然后将其插入 MySQL 数据库。**对于这个系统，一次最多可以上传 5 张图像**（这意味着只有少量的记录可供播放），但我会进一步讨论。

图形用户界面：

![](../Images/2abe3b5988eb70b896344685ca9a92ba.png)

使用的一些数据列：

*   图片编号
*   标题
*   描述
*   发表
*   图像位置
*   删除按钮

所有图像都由先前的“SELECT *”结果集在 while 循环中回显。每个图像都会在每个输入**名称**中回显“图像 id” ，因此输出将是例如：

标题 2、描述 2、已发布 2、图像位置 2、标题 3、描述 3

此外，前一个结果集中的数据值会回显到**输入**值中，允许客户端编辑数据库中存在的当前数据。只有一个提交按钮。

**我的问题：**

我希望能够将所有修改后的图像数据发布到一个 processor.php 表单，然后我可以将它作为一个 INSERT sql 字符串插入到 MySQL 图像表中。我需要 PHP 是动态的，以防万一：

*   图像被删除（图像 ID）
*   新图片已上传（图片 ID）

如果有更简单的方法来做上述任何事情，我欢迎新的想法/意见。对于我对 PHP 的理解不佳，请提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:42:34.413

一旦你从'select *'语句中得到结果，你就做foreach

```
foreach ($images as $image) {
?>
   <img src="imagesrc">
   <input type="text" name="title_<?php echo $image['image_id'] ; ?>" value="<?php echo $image['title']; ?>">
   <input type="text" name="desc_<?php echo $image['image_id'] ; ?>" value="<?php echo $image['description']; ?>">
   <input type="button" onclick="markDeleted('<?php echo $image['image_id'] ; ?>')">
<?php } ?> 
```

......

收到 post 值后，您可以使用“_”展开，您将获得主键，您可以使用图像 ID 更新图像表。

在 javascript 函数`markDeleted`中，您可以在某个隐藏字段中设置主键并发送到 process.php。

像这样添加逗号分隔 1,2,3 （在操作页面中用逗号分隔）

```
function markDeleted (imageId) 
{
    document.getElementById('deleted_image_ids').value = imageId + ","
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:22:18.620

轻松删除记录：

```
<form action="processor.php" method="post">
<?php
foreach ($images as $img) { // assuming $images is the result set of your sql query
?>
  <input type="text" name="name<?php $img['image_id'];?>" value="<?php $img['caption'];?>">
  <input type="text" name="desc<?php $img['image_id'];?>" value="<?php $img['description'];?>">
...
<a href="http://yoursiteurl/deleteimg.php?id=<?php $img['image_id']?>">
<?php } ?>
</form> 
```

在 deleteimg.php 中：

```
<?php
$del = $_POST[id];
$query = $msqli->prepare("DELETE FROM imagetablename WHERE image_id=?");
$query->bind_param( 's',  $del );
$query->;execute();
?> 
```

更新和添加新行可能涉及 javascript，而且难度更大。

# url - 我怎样才能喜欢 Pinterest 独特的模态过程？

> ID：12927607
> 
> 赞同：3
> 
> 时间：2012-10-17T05:23:09.070
> 
> 标签：url, modal-dialog, pinterest

我有一个问题

1.  Point>我不想知道modal的一般功能，但喜欢Pinterest

2.  问题核心> 1.**我可以在不“重新加载”的情况下使用ajax时更改URL**

3.  工作流程 >

    1) 在 Pinterest 上，我点击一张图片

    2) 一个模态窗口打开，但页面的 URL 也发生了变化而没有“重新加载”，即使它使用 ajax

    *   我知道当我使用模态函数时，它不会更改页面上的 URL，但不会更改 Pinterest
    *   URL 更改 ex) rootURL -> otherURL

    3）我点击模态的背景，页面的URL也发生了变化，没有“重新加载”并且模态窗口关闭

    *   URL 更改 ex) otherURL -> rootURL

因此，如果您有一些解决方案或信息，请告诉我。我也有红色相关的问题答案，但这还不够。并且不想获取有关 HTML5 API 的信息，因为我不会提供 HTML5 服务

*   [如何复制 Pinterest 网站的模态效果？](https://stackoverflow.com/questions/11252579/how-can-i-duplicate-pinterest-websites-modal-effect)

*   [Pinterest 喜欢 ajax 加载](https://stackoverflow.com/questions/12882685/pinterest-like-ajax-loading)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T17:28:18.463

*   在没有 HTML 调用的情况下更改 URL
*   在同一个 url 中管理完整的 HTML 文档和 JSON 对象（或部分 HTML 响应）

你可以这样做[http://mazzimo-in-london-eng.blogspot.com/2013/01/the-pinterest-url-sorcery-how-pinterest.html](http://mazzimo-in-london-eng.blogspot.com/2013/01/the-pinterest-url-sorcery-how-pinterest.html)

# iphone - 在 UItableView 的自定义单元格中显示文本和标签

> ID：12927613
> 
> 赞同：0
> 
> 时间：2012-10-17T05:23:52.360
> 
> 标签：iphone, ios5, xcode4

大家好，我有自定义单元格，`UIImageView`我`UILabel`想在其中分配图像`UIImageView`和数组中的文本`UILabel`，请任何人帮助我吗？提前致谢

我试过下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    cell.textLabel.text =[CurArray objectAtIndex:indexPath.row];

    NSString *cellIcon = [[self IconArray] objectAtIndex:indexPath.row];
    UIImage *cellIconimage = [UIImage imageNamed:cellIcon];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:cellIconimage];
    [imageView setFrame:CGRectMake(100.0, 30.0, 30.0, 30.0)];
    [imageView setContentMode:UIViewContentModeScaleAspectFill];
    [cell addSubview:imageView];

    return cell;
} 
```

使用此代码，我可以将图像分配给创建的图像视图但我无法为 UILable 分配文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:33:42.090

这`IBCustomCellProjectList`是一个`UITableViewCell`使用 XIB 的示例，只需遵循逻辑

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
           IBCustomCellProjectList *cell = (IBCustomCellProjectList *) [tableView dequeueReusableCellWithIdentifier:nil];
        // yourCustomeCell *cell = (yourCustomeCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];//custom cell
        // UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) 
        {
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"IBCustomCellProjectList" owner:self options:nil];

            for (id currentObject in topLevelObjects){
                if ([currentObject isKindOfClass:[UITableViewCell class]]){
                    cell =  (IBCustomCellProjectList *) currentObject;
                    break;
                }
            }
        }

        // Configure the cell.
        cell.cellLabel.text = [yourTextArray objectAtIndex:i];
        cell.cellImageView.image = [UIImage imageNamed:[yourImageArray objectAtIndex:i]];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        return cell;
    } 
```

另请参阅此波纹管教程..

1.  [具有先进控制和设计的定制单元](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)

2.  [http://www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)[自定义tableview Cell](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:28:49.500

使用此代码。也许这就是你想要的。您将不得不使用该方法`cellForRowAtIndexPath`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:[cell reuseIdentifier]];

if (cell == nil)
{
    [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = customCell;
    customCell = nil;
}

// Configure the cell.
    cell.Label.text = [[NSNumber numberWithInt:indexPath.row+1]stringValue];
    cell.Label.textColor = [UIColor blackColor];
    cell.ImageView.image = [UIImage imageNamed:[CountryFlag objectAtIndex:indexPath.row]];
    cell.textLabel.textColor=[UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:37:47.123

使用以下代码：

```
 -(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
          UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"cell"];

          const NSInteger IMAGE_VIEW_TAG=1001;
          const NSInteger LABEL_TAG=1002;
          UIImageView *imageView;
          UILabel *lbl;
          if(cell==nil)
          {
                  cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"] autorelease];

                  cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;

                  imageView =[[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 60, 60)] autorelease];
                  imageView.tag=IMAGE_VIEW_TAG;
                  imageView.contentMode=UIViewContentModeScaleAspectFit;
                  [cell.contentView addSubview:imageView];
                  lbl=[[UILabel alloc] initWithFrame:CGRectMake(100, 20, 160, 20)];
                  lbl.font=[UIFont fontWithName:@"Helvetica" size:14.0];
                  lbl.adjustsFontSizeToFitWidth=YES;
                  lbl.minimumFontSize=10.0;
                  lbl.textAlignment=UITextAlignmentLeft;
                  lbl.textColor=[UIColor colorWithRed:73.0/255.0 green:73.0/255.0 blue:73.0/255.0 alpha:1.0];
                  lbl.backgroundColor=[UIColor clearColor];
                  lbl.tag=LABEL_TAG;
                  [cell.contentView addSubview:lbl];
          }

          imageView=(UIImageView*)[cell.contentView viewWithTag:IMAGE_VIEW_TAG];
          lbl=(UILabel*)[cell.contentView viewWithTag:LABEL_TAG];

          imageView.image=[UIImage imageNamed:@"image.png"];
          lbl.text=@"Your Text";
          return cell;
    }

    -(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
             return 65.0;
    } 
```

# c# - 如何使用类查找 HtmlGenericControl

> ID：12927614
> 
> 赞同：0
> 
> 时间：2012-10-17T05:24:06.310
> 
> 标签：c#, asp.net, .net, html, class

我试图弄清楚如何从一个类中找到我的主 .aspx 页面中的“div”，这可能吗？如果有怎么办？我已经尝试了下面的代码但无法正常工作

```
HtmlGenericControl step1 = (HtmlGenericControl)Page.FindControl("step1") 
```

我知道这是我在文件后面的代码中执行此操作的方式，但在这种情况下，我想从类文件中执行此操作。

先感谢您。

基本上我想要完成的是，我的页面中有多个 div，当满足某些条件时，所有的 div 都有 runtat="server" visible="false" 我希望能够更改 visible="true" . 我在多个页面中有这种情况，所以我希望能够创建一个类并检查那里的条件，并通过这种方式使 div 可见或不可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:32:07.337

div 元素必须具有 runat="server" 属性：

```
<body>
  <form id="form1" runat="server">
    <div id="step1" runat="server"></div>
  </form>
</body> 
```

现在，您可以在一个单独的类中找到带有方法的控件，该类是从页面的类后面的代码中调用的：

```
public partial class _Default : System.Web.UI.Page
{
  protected void Page_Load(object sender, EventArgs e)
  {
    Class1 class1 = new Class1();
    class1.FindDiv(this);
  }
} 
```

分班：

```
public class Class1
{
  public HtmlGenericControl FindDiv(Page page)
 { 
    HtmlGenericControl step1 = (HtmlGenericControl)page.FindControl("step1");
    return step1;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:29:02.807

如果您使用 ASP 面板而不是 div，您可以访问它并且面板呈现为 div。如果你把 runat="server" 给一个 div 你应该能够访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:32:21.497

如果它不是服务器端控件，则不能这样做。

如果它是一个 HTML 控件，您需要为`runat="server"`div 设置属性以在后面的代码中找到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T09:36:39.470

尝试

```
HtmlGenericControl div = (HtmlGenericControl)this.FindControl("div1"); 
```

注意：为了使此代码正常工作，您需要在 aspx 页面上具有 runat="server" 属性。

# android - 执行 webview.loadUrl() 时出现空指针异常

> ID：12927617
> 
> 赞同：1
> 
> 时间：2012-10-17T05:24:14.530
> 
> 标签：android, webview, android-webview

我在我的开发者门户中遇到了这个错误。我不确定为什么。堆栈跟踪跟踪到 WebView 对象内部的一些内部函数调用。

```
java.lang.NullPointerException
at android.webkit.WebView.loadUrlImpl(WebView.java:3008)
at android.webkit.WebView.loadUrlImpl(WebView.java:3047)
at android.webkit.WebView.loadUrl(WebView.java:3040)
at com.myapp.android.PreviewActivity.notifyJS(PreviewActivity.java:175)
at com.myapp.android.PreviewActivity.access$14(PreviewActivity.java:174)
at com.myapp.android.PreviewActivity$ActionBarItemClickListener.onClick(PreviewActivity.java:901)
at android.view.View.performClick(View.java:3644)
at android.view.View$PerformClick.run(View.java:14313)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

在我的代码`at com.myapp.android.PreviewActivity.notifyJS(PreviewActivity.java:175)`中，有这一行 `webView.loadUrl("javascript:MyApp.onClick('" + action + "');");`

我实际上是从我的 java 代码中调用一个 javascript 调用。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:30:43.183

我自己找到了答案。如果`webView.destroy()`已被调用，则调用`webView.loadUrl()`将导致此异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:26:36.790

您的网络视图似乎为空。你之前有调用 findView 吗？

# java - Java中的调车场算法不起作用？

> ID：12927618
> 
> 赞同：-1
> 
> 时间：2012-10-17T05:24:17.973
> 
> 标签：java, postfix-notation, shunting-yard

这是我的代码：

```
 public String ShuntingYard(String input) {
    Tokenizer tokens = new Tokenizer(input);
    output = new LinkedList<String>();
    stack = new MyStack<String>(new LinkedList<String>(), new LinkedList<String>());

    while (tokens.hasNextToken()){
        String token = tokens.getNextToken();
        if (isOperator(token)){
            while (!stack.isEmpty() && isOperator(stack.peek())){
                    if ((leftassoc(token)&&precedence(token)<=precedence(stack.peek())) ||
                            (precedence(token)<precedence(stack.peek()))){
                        output.add(stack.pop());
                    }
                    else break; }
                    stack.push(token);

                }

                output.add(token); 
            }
        while (!stack.isEmpty())
            output.add(stack.pop());

        return output.toString();

        } 
```

输入 3 + 5 * 6 + 7，它应该返回 3 5 6 * + 7 +，但我得到的是 3 + 5 * 6 + 7 + *。我很困惑为什么，因为我遵循了维基百科页面上的算法说明......我在其他地方搞砸了吗？我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:59:34.673

基本上，您缺少“其他”。根据您的代码检查算法。`if (isOperator())`在分支被采用或不被采用后，您没有正确处理此案。您还没有实现“（”或“）”。可能存在其他错误或遗漏。

# sql - 可以在视图中使用连接上的 where 子句吗

> ID：12927619
> 
> 赞同：1
> 
> 时间：2012-10-17T05:24:19.973
> 
> 标签：sql, outer-join, sql-view

我正在尝试创建一个整合多个单独选择查询的 SQL 视图。我在将各个 select 语句中的子句放入数据库视图时遇到了一些困难。

我的观点的简化版本是：

```
create or replace view TestView as
select 
 A.Name,
 B.Subscription,
 C.Expiry
from
 TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID
 left outer join TestTableC as C on A.ID = C.A_ID; 
```

我的观点有两个问题：

*   在第一次加入时，我如何才能只选择 Subscription 是特定值的记录，如果不是该值，仍然检索 Name 和 Expiry 列（在这种情况下，Subscription 将为空）？

*   在第二次加入时，我如何指定我只想要最近到期日期的记录？

以下是我的测试架构、示例数据和所需的结果集：

```
create table TestTableA
(
    ID int,
    Name varchar(32),
    Primary Key(ID)
);

create table TestTableB
(
    ID int,
    A_ID int,
    Subscription varchar(32),
    Primary Key(ID),
    Foreign Key(A_ID) references TestTableA(ID)
);

create table TestTableC
(
    ID int,
    A_ID int,
    Expiry date,
    Primary Key(ID),
    Foreign Key(A_ID) references TestTableA(ID)
);

create or replace view TestView as
select 
 A.Name,
 B.Subscription,
 C.Expiry
from
 TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID
 left outer join TestTableC as C on A.ID = C.A_ID;

insert into TestTableA values (1, 'Joe');
insert into TestTableB values (1, 1, 'abcd');
insert into TestTableB values (2, 1, 'efgh');
insert into TestTableC values (1, 1, '2012-10-25');
insert into TestTableC values (2, 1, '2012-10-24');
insert into TestTableA values (2, 'Jane'); 
```

期望结果 1：

```
select * from TestView where Subscription is null or Subscription = 'efgh';

Joe, efgh, 2012-10-25
Jane, , 
```

预期结果 2：

```
select * from TestView where Subscription is null or Subscription = 'xxxx';

Joe, , 2012-10-25
Jane, , 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:29:52.760

我将使用简单的 SQL 编写查询
如果您有 SQL Server 2005 或更高版本，您可以`outer apply`使用`min()`

```
select 
    A.Name,
    B.Subscription,
    C.Expiry
from TestTableA as A
    left outer join TestTableB as B on A.ID = B.A_ID and B.Subscription in ('abcd', 'efgh') 
    left outer join
    (
        select min(T.Expiry) as Expiry, T.A_ID
        from TestTableC as T
        group by T.A_ID
    ) as C on A.ID = C.A_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:31:01.360

```
create or replace view TestView as
select 
  A.Name,
  B.Subscription,
  C.Expiry
from
  TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID
  left outer join TestTableC as C on A.ID = C.A_ID;
where 
  B.Subscription is not null
  and C.Expiry between (now() - interval 1 minute) and now() 
```

# c++ - WIC WINCODEC_ERR_BADHEADER 仅适用于 JPEG 图像

> ID：12927623
> 
> 赞同：0
> 
> 时间：2012-10-17T05:24:44.660
> 
> 标签：c++, jpeg, codec, wic

我有一个使用 Windows Imaging Component API 的简单编码/解码应用程序。我遇到的问题是，当我使用 JPEGXR 或 BMP 格式时，一切正常。但是，当我使用 JPEG 编解码器时 - 编码器工作正常，我可以直观地验证生成的 JPEG 图像，但是当我尝试解码该流时，我得到一个 WINCODEC_ERR_BADHEADER (0x88982f61)

这是失败的行：

```
 hr = m_pFactory->CreateDecoderFromStream(
                                    pInputStream, 
                                    NULL,
                                    WICDecodeMetadataCacheOnDemand,
                                    &pDecoder); 
```

这里 pInputStream 是从字节数组（编码器的输出 - 输出字节向量的黑盒）创建的 IStream。

请帮忙！这让我发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:23:52.160

将流作为参数传递时，请确保将其预先搜索到正确的初始位置（尤其是如果您只是将数据写入其中并期望进一步检索，则将其返回到开头）。API 通常不需要寻找，因为这样它们可以让您在更大的流中间提供数据。

# ios - 当背景颜色为清晰颜色时不显示阴影

> ID：12927626
> 
> 赞同：31
> 
> 时间：2012-10-17T05:25:16.973
> 
> 标签：ios, calayer

我在我的 xib 中创建了一个 uiview，背景颜色为透明色。当我在视图层上应用阴影时，阴影没有出现。但是当我设置除透明颜色以外的背景颜色时，会显示阴影。请帮忙。

这是我的代码

```
self.cView.layer.shadowColor=[UIColor whiteColor].CGColor;
self.cView.layer.shadowOffset=CGSizeZero;
self.cView.layer.shadowRadius=30.0;
self.cView.layer.shadowOpacity=1.0;
self.cView.layer.cornerRadius=10.0; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-17T06:30:30.460

问题是，阴影实际上考虑了“上”层。如果上面什么都没有，就不会有阴影：[阴影是如何工作的](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_shadows/dq_shadows.html#//apple_ref/doc/uid/TP30001066-CH208-SW1)

编辑：

有[从粘贴箱复制的这个食谱](http://pastebin.com/gzB1uWgQ)

```
view.layer.shadowColor = [UIColor colorWithWhite:.5 alpha:1].CGColor;
view.layer.shadowRadius = 4.0f;
view.layer.shadowPath = CGPathCreateWithRect(CGRectMake(0, 0, 50, 50), NULL);
view.layer.shadowOpacity = 1.0f;
view.layer.shadowOffset = CGSizeMake(1, 1); 
```

但我怀疑这对你有什么用处：结果是一个“绘制”的视图，带有阴影颜色和周围的阴影。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-02-26T10:37:05.010

如果您指定 shadowPath 属性

```
shadowView.layer.shadowPath =
  UIBezierPath(
   roundedRect: shadowView.bounds,
   cornerRadius: 10).cgPath 
```

（或任何需要的角半径。）

它甚至可以使用 .clear backgroundColor。

请注意，您当然必须在`layoutSubviews`相关视图中执行此操作。

这是一个实际的完整工作示例：

```
import UIKit

@IBDesignable class LonelyShadow: UIView {

    let corner: CGFloat = 20

    override init(frame: CGRect) {
        super.init(frame: frame)
        common()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        common()
    }

    private func common() {

        backgroundColor = .clear
        clipsToBounds = false

        layer.shadowColor = UIColor.yourColor.cgColor
        layer.shadowOffset = CGSize(width: 0, height: 25)
        layer.shadowOpacity = 0.3
        layer.shadowRadius = 40
    }

    override func layoutSubviews() {
        super.layoutSubviews()
        layer.shadowPath = UIBezierPath(
          roundedRect: bounds, cornerRadius: corner).cgPath
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-07T15:39:05.740

相当于@Rok Jark 在 Swift 4 中的回答：

```
self.layer.shadowColor = UIColor(white: 0.5, alpha: 1).cgColor
self.layer.shadowRadius = 4.0
self.layer.shadowPath = CGPath.init(rect: CGRect.init(x: 0, y: 0, width: 50, height: 50), transform: nil)
self.layer.shadowOpacity = 1.0;
self.layer.shadowOffset = CGSize(width: 1, height: 1) 
```

# android - 如何传递邻近变化事件

> ID：12927629
> 
> 赞同：0
> 
> 时间：2012-10-17T05:25:21.250
> 
> 标签：android, event-listener, proximity

我有一个用于电话状态更改的广播接收器，当电话状态为“OFFHOOK”时，我为接近传感器注册了一个事件监听器。当接近度发生变化时，我会做一些事情（我会在服务中进行注册和“某事”，这很重要）。到目前为止，一切都按预期工作。问题是当接近度值为“关闭”时屏幕没有被锁定。我认为这是因为我的听众正在捕捉接近变化事件，因此手机的默认应用程序没有收到该事件。有没有办法传递事件，比如按钮的 onClickListener() 中的“return false”。

编辑：

**代码**

在服务的oncreate中

```
 myProximitySensor = mySensorManager
                .getDefaultSensor(Sensor.TYPE_PROXIMITY);
        mySensorManager.registerListener(this, myProximitySensor,
            SensorManager.SENSOR_DELAY_NORMAL); 
```

我实现了 SensorEventListener，在它的 onSensorChanged() 方法中：

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.setSpeakerphoneOn(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T15:30:12.927

如果您想在接近侦听器更改时锁定屏幕，您可以拥有一个**PowerManager.WakeLock**实例 并在其上调用获取以锁定屏幕，然后调用释放以再次解锁屏幕

# visual-c++ - 文档视图架构是 MFC 独有的吗

> ID：12927639
> 
> 赞同：0
> 
> 时间：2012-10-17T05:26:09.707
> 
> 标签：visual-c++, mfc

是否有任何其他类库，如提供文档/视图架构的 MFC，或者它是完全独特的 MFC 概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T15:06:36.683

我意识到这是一个老问题，但是为了那些通过 Google 搜索看到这个问题的人的利益，wxWidgets 跨平台 GUI API 也包含一个文档视图框架。我以前从未使用过它，所以我无法判断它与 MFC 实现的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T15:24:40.743

不，它不是，Apple 将它用于 iPhone 编程，至少在 iOS 5 之前是这样，如果你看一下 iTunesU 上的斯坦福大学 iOS 编程课程，你会发现他们也会教它。此外，我在意大利的 OOP 课程中研究过它，所以我猜这是一种全球公认的组织代码的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:49:27.483

当然，这个概念可以在其他语言/框架中找到。但是，如果您将 MFC 与 WinForms 和 WPF 进行比较，那么是的，这种技术是独一无二的。

# android - 调用新 Intent 时 Android Activity 强制关闭

> ID：12927648
> 
> 赞同：0
> 
> 时间：2012-10-17T05:27:33.323
> 
> 标签：android, android-intent, sdk

该活动应该调用另一个活动，但它强制关闭应用程序。

```
package com.example.helloworld;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Data extends Activity implements OnClickListener {

    Button start, startFor;
    EditText sendET;
    TextView gotAnswer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.get);
        initialize();
    }

    private void initialize() {
        // TODO Auto-generated method stub
        start = (Button) findViewById(R.id.bSA);
        startFor = (Button) findViewById(R.id.bSAFR);
        sendET = (EditText) findViewById(R.id.etSend);
        gotAnswer = (TextView) findViewById(R.id.tvGot);
        start.setOnClickListener(this);
        startFor.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bSA:
            String bread = sendET.getText().toString();
            Bundle basket = new Bundle();
            basket.putString("key", bread);

            Intent a = new Intent(Data.this, OpenedClass.class);
            a.putExtras(basket); 
            startActivity(a);
            break;

        case R.id.bSAFR:
            Intent i = new Intent(Data.this, OpenedClass.class);
            startActivityForResult(i,0);
            break;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
    }

} 
```

这是另一个要调用的 Activity：

```
package com.example.helloworld;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioGroup;
import android.widget.RadioGroup.OnCheckedChangeListener;
import android.widget.TextView;

public class OpenedClass extends Activity implements OnClickListener,
        OnCheckedChangeListener {

    TextView question, test;
    Button returnData;
    RadioGroup selectionList;
    String gotBread, setData;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.send);
        initialize();
        Bundle gotBasket = getIntent().getExtras();
        gotBread = gotBasket.getString("key");
        question.setText(gotBread);

    }

    private void initialize() {
        // TODO Auto-generated method stub
        question = (TextView) findViewById(R.id.tvQuestions);
        test = (TextView) findViewById(R.id.tvText);
        returnData = (Button) findViewById(R.id.bResults);
        selectionList = (RadioGroup) findViewById(R.id.rgAnswers);
        returnData.setOnClickListener(this);
        selectionList.setOnCheckedChangeListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    public void onCheckedChanged(RadioGroup arg0, int arg1) {
        // TODO Auto-generated method stub
        switch (arg1) {
        case R.id.rChoice1:
            setData="ABC";
            break;
        case R.id.rChoice2:
            setData="MNO";
            break;
        case R.id.rChoice3:
            setData="XYZ";
            break;
        }
        test.setText(setData);
    }

} 
```

这是我的 AndroidMaifest.xml 文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.helloworld"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.SET_WALLPAPER"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Splash"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>

            </intent-filter>
        </activity>
        <activity
            android:name=".Menu"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.example.helloworld.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TextPlay" android:label="@string/title_activity_main" >
        </activity>
         <activity
            android:name=".Email" android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name=".Camera" android:label="@string/title_activity_main" android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name=".Data" android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name=".OpenedClass" android:label="@string/title_activity_main" >
        </activity>
    </application>

</manifest> 
```

最后 LogCat 日志：

```
10-17 10:36:56.423: D/AndroidRuntime(272): Shutting down VM
10-17 10:36:56.423: W/dalvikvm(272): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-17 10:36:56.453: E/AndroidRuntime(272): FATAL EXCEPTION: main
10-17 10:36:56.453: E/AndroidRuntime(272): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.helloworld/com.example.helloworld.OpenedClass}: java.lang.NullPointerException
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.os.Looper.loop(Looper.java:123)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-17 10:36:56.453: E/AndroidRuntime(272):  at java.lang.reflect.Method.invokeNative(Native Method)
10-17 10:36:56.453: E/AndroidRuntime(272):  at java.lang.reflect.Method.invoke(Method.java:521)
10-17 10:36:56.453: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-17 10:36:56.453: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-17 10:36:56.453: E/AndroidRuntime(272):  at dalvik.system.NativeStart.main(Native Method)
10-17 10:36:56.453: E/AndroidRuntime(272): Caused by: java.lang.NullPointerException
10-17 10:36:56.453: E/AndroidRuntime(272):  at com.example.helloworld.OpenedClass.initialize(OpenedClass.java:38)
10-17 10:36:56.453: E/AndroidRuntime(272):  at com.example.helloworld.OpenedClass.onCreate(OpenedClass.java:25)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-17 10:36:56.453: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-17 10:36:56.453: E/AndroidRuntime(272):  ... 11 more
10-17 10:36:59.083: I/Process(272): Sending signal. PID: 272 SIG: 9 
```

问题是应用程序编译没有错误，但当我尝试调用活动时崩溃。我不确定问题出在哪里。是清单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:34:29.223

如果我正确地计算了行数（到 OpenedClass.java 的第 38 行），则在此行生成 NPE：

```
returnData.setOnClickListener(this); 
```

里面`OpenedClass.initialize()`。该变量`returnData`正在通过上面的几行初始化：

```
returnData = (Button) findViewById(R.id.bResults); 
```

问题很可能是您的布局 (send.xml) 没有`bResults`视图，因此`returnData`被分配了`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:35:30.560

试试这个 ：

```
 startFor.setOnClickListener(new OnClickListener()
      {
      @Override
      public void onClick(View v)
      {
        // TODO Auto-generated method stub
         switch (v.getId()) {
        case R.id.bSA:
        String bread = sendET.getText().toString();
        Bundle basket = new Bundle();
        basket.putString("key", bread);

        Intent a = new Intent(Data.this, OpenedClass.class);
        a.putExtras(basket); 
        startActivity(a);
        break;

    case R.id.bSAFR:
        Intent i = new Intent(Data.this, OpenedClass.class);
        startActivityForResult(i,0);
        break;
    }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:31:53.590

你用过这条线

```
a.putExtras(basket); 
```

在第一堂课中，并没有收到那个意图`OpenedClass`

也许这就是问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:33:55.990

似乎没有找到您的观点之一。

调试您的应用程序并确保它们都被找到并且不返回 null；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:34:04.680

在活动中像这样改变

```
 case R.id.bSA:
        String bread = sendET.getText().toString();     
        Intent a = new Intent(Data.this, OpenedClass.class);
        a.putExtras("key", bread); 
        startActivity(a);
        break; 
```

# java - jBullet 示例

> ID：12927654
> 
> 赞同：6
> 
> 时间：2012-10-17T05:28:01.003
> 
> 标签：java, physics, game-engine, collision, jbullet

我正在尝试学习如何在我正在处理的项目中使用 jBullet，并且我已经查看了源提供的演示，但我无法弄清楚这些演示如何获取对象显示。有没有人有一个很好的资源可以指向我或提供一个在屏幕上显示一个或两个对象的基本示例？

提前谢谢你，很抱歉我没有任何代码可以显示，如果需要我可以快速写一些，但只是在寻找一个方向。

谢谢，

我正在使用的多维数据集的代码，所以我试图向它添加碰撞，但我不确定如何使用 jbullet：

```
 public void  Draw() {
    // center point posX, posY, posZ
    float radius = size / 2;

    //top
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(1.0f,0.0f,0.0f); // red
            glVertex3f(posX + radius, posY + radius, posZ - radius);
            glVertex3f(posX - radius, posY + radius, posZ - radius);
            glVertex3f(posX - radius, posY + radius, posZ + radius);
            glVertex3f(posX + radius, posY + radius, posZ + radius);
        }
    glEnd();
    glPopMatrix();

    //bottom
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(1.0f,1.0f,0.0f); // ?? color
            glVertex3f(posX + radius, posY - radius, posZ + radius);
            glVertex3f(posX - radius, posY - radius, posZ + radius);
            glVertex3f(posX - radius, posY - radius, posZ - radius);
            glVertex3f(posX + radius, posY - radius, posZ - radius);
        }
    glEnd();
    glPopMatrix();

    //right side
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(1.0f,0.0f,1.0f); // ?? color
            glVertex3f(posX + radius, posY + radius, posZ + radius);
            glVertex3f(posX + radius, posY - radius, posZ + radius);
            glVertex3f(posX + radius, posY - radius, posZ - radius);
            glVertex3f(posX + radius, posY + radius, posZ - radius);
        }
    glEnd();
    glPopMatrix();

    //left side
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(0.0f,1.0f,1.0f); // ?? color
            glVertex3f(posX - radius, posY + radius, posZ - radius);
            glVertex3f(posX - radius, posY - radius, posZ - radius);
            glVertex3f(posX - radius, posY - radius, posZ + radius);
            glVertex3f(posX - radius, posY + radius, posZ + radius);
        }
    glEnd();
    glPopMatrix();

    //front side 
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(0.0f,0.0f,1.0f); //blue 
            glVertex3f(posX + radius, posY + radius, posZ + radius);
            glVertex3f(posX - radius, posY + radius, posZ + radius);
            glVertex3f(posX - radius, posY - radius, posZ + radius);
            glVertex3f(posX + radius, posY - radius, posZ + radius);
        }
    glEnd();
    glPopMatrix();

    //back side
    glPushMatrix();
    glBegin(GL_QUADS);
        {
            glColor3f(0.0f,1.0f,0.0f); // green
            glVertex3f(posX + radius, posY - radius, posZ - radius);
            glVertex3f(posX - radius, posY - radius, posZ - radius);
            glVertex3f(posX - radius, posY + radius, posZ - radius);
            glVertex3f(posX + radius, posY + radius, posZ - radius);
        }
    glEnd();
    glPopMatrix();
} 
```

这是我从 hello world 测试代码转换后的代码，这对每个人来说都正确吗？：

```
public static void HelloWorld() {

    BroadphaseInterface broadphase = new DbvtBroadphase();
    DefaultCollisionConfiguration collisionConfiguration = new DefaultCollisionConfiguration();
    CollisionDispatcher dispatcher = new CollisionDispatcher(collisionConfiguration);

    SequentialImpulseConstraintSolver solver = new SequentialImpulseConstraintSolver();

    DiscreteDynamicsWorld dynamicsWorld = new DiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);

    // set the gravity of our world
    dynamicsWorld.setGravity(new Vector3f(0, -10, 0));

    // setup our collision shapes
    CollisionShape groundShape = new StaticPlaneShape(new Vector3f(0, 1, 0), 1);
    CollisionShape fallShape = new SphereShape(1);

    // setup the motion state
    DefaultMotionState groundMotionState = new DefaultMotionState(new Transform(new Matrix4f(new Quat4f(0, 0, 0, 1), new Vector3f(0, -1, 0), 1.0f))); 

    RigidBodyConstructionInfo groundRigidBodyCI = new RigidBodyConstructionInfo(0, groundMotionState, groundShape, new Vector3f(0,0,0)); 
    RigidBody groundRigidBody = new RigidBody(groundRigidBodyCI); 

    dynamicsWorld.addRigidBody(groundRigidBody); // add our ground to the dynamic world.. 

    // setup the motion state for the ball
    DefaultMotionState fallMotionState = new DefaultMotionState(new Transform(new Matrix4f(new Quat4f(0, 0, 0, 1), new Vector3f(0, 50, 0), 1.0f)));

    //This we're going to give mass so it responds to gravity 
    int mass = 1;

    Vector3f fallInertia = new Vector3f(0,0,0); 
    fallShape.calculateLocalInertia(mass,fallInertia); 

    RigidBodyConstructionInfo fallRigidBodyCI = new RigidBodyConstructionInfo(mass,fallMotionState,fallShape,fallInertia); 
    RigidBody fallRigidBody = new RigidBody(fallRigidBodyCI); 

    //now we add it to our physics simulation 
    dynamicsWorld.addRigidBody(fallRigidBody); 

    for (int i=0 ; i<300 ; i++) { 
        dynamicsWorld.stepSimulation(1/60.f, 10); 

        Transform trans = new Transform();
        fallRigidBody.getMotionState().getWorldTransform(trans); 

        System.out.println("sphere height: " + trans.origin.y);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:36:07.800

jBullet HelloWorld 的示例代码：

```
public static void HelloWorld() {

BroadphaseInterface broadphase = new DbvtBroadphase();
DefaultCollisionConfiguration collisionConfiguration = new DefaultCollisionConfiguration();
CollisionDispatcher dispatcher = new CollisionDispatcher(collisionConfiguration);

SequentialImpulseConstraintSolver solver = new SequentialImpulseConstraintSolver();

DiscreteDynamicsWorld dynamicsWorld = new DiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);

// set the gravity of our world
dynamicsWorld.setGravity(new Vector3f(0, -10, 0));

// setup our collision shapes
CollisionShape groundShape = new StaticPlaneShape(new Vector3f(0, 1, 0), 1);
CollisionShape fallShape = new SphereShape(1);

// setup the motion state
DefaultMotionState groundMotionState = new DefaultMotionState(new Transform(new Matrix4f(new Quat4f(0, 0, 0, 1), new Vector3f(0, -1, 0), 1.0f))); 

RigidBodyConstructionInfo groundRigidBodyCI = new RigidBodyConstructionInfo(0, groundMotionState, groundShape, new Vector3f(0,0,0)); 
RigidBody groundRigidBody = new RigidBody(groundRigidBodyCI); 

dynamicsWorld.addRigidBody(groundRigidBody); // add our ground to the dynamic world.. 

// setup the motion state for the ball
DefaultMotionState fallMotionState = new DefaultMotionState(new Transform(new Matrix4f(new Quat4f(0, 0, 0, 1), new Vector3f(0, 50, 0), 1.0f)));

//This we're going to give mass so it responds to gravity 
int mass = 1;

Vector3f fallInertia = new Vector3f(0,0,0); 
fallShape.calculateLocalInertia(mass,fallInertia); 

RigidBodyConstructionInfo fallRigidBodyCI = new RigidBodyConstructionInfo(mass,fallMotionState,fallShape,fallInertia); 
RigidBody fallRigidBody = new RigidBody(fallRigidBodyCI); 

//now we add it to our physics simulation 
dynamicsWorld.addRigidBody(fallRigidBody); 

for (int i=0 ; i<300 ; i++) { 
    dynamicsWorld.stepSimulation(1/60.f, 10); 

    Transform trans = new Transform();
    fallRigidBody.getMotionState().getWorldTransform(trans); 

    System.out.println("sphere height: " + trans.origin.y);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:39:29.950

您是否查看过[jMonkeyEngine](http://jmonkeyengine.com/)演示和示例代码？

其中不少使用 jBullet 作为物理引擎，绝对值得一玩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T04:59:30.883

让我们看一下您正在使用的教程中的示例代码。我在代码中添加了注释，以便您更好地了解正在发生的事情以及您应该如何设置代码。请务必注意，下面的代码实际上不会显示任何内容。它基本上只是创建一个物理对象、一个地面并让该对象落到地面上，并在该对象逐步通过模拟时输出该对象的高度。

```
int main (void)
{
    //Set up all the required objects and controllers for simulating the physics
    //all this stuff would actually go into whatever initialize function you have
    btBroadphaseInterface* broadphase = new btDbvtBroadphase();

    btDefaultCollisionConfiguration* collisionConfiguration = new btDefaultCollisionConfiguration();
    btCollisionDispatcher* dispatcher = new btCollisionDispatcher(collisionConfiguration);

    btSequentialImpulseConstraintSolver* solver = new btSequentialImpulseConstraintSolver;

    btDiscreteDynamicsWorld* dynamicsWorld = new btDiscreteDynamicsWorld(dispatcher,broadphase,solver,collisionConfiguration);

    dynamicsWorld->setGravity(btVector3(0,-10,0));

    //Create our physics objects, the planeShape is the ground
    btCollisionShape* groundShape = new btStaticPlaneShape(btVector3(0,1,0),1);

    //A sphere that will be dropping to the ground, 
    btCollisionShape* fallShape = new btSphereShape(1);

    //Create motion states for our objects
    //First the ground object. It will be in the XZ plane at -1 Y
    //note that we're not giving it any mass
    //zero mass in a physics simulation means it won't move when collided with
    //it also means that it won't respond to gravity
    btDefaultMotionState* groundMotionState = new btDefaultMotionState(btTransform(btQuaternion(0,0,0,1),btVector3(0,-1,0)));
    btRigidBody::btRigidBodyConstructionInfo
                groundRigidBodyCI(0,groundMotionState,groundShape,btVector3(0,0,0));
    btRigidBody* groundRigidBody = new btRigidBody(groundRigidBodyCI);

    //Add the ground to the simulation
    dynamicsWorld->addRigidBody(groundRigidBody);

    //now set up the motion state for our sphere, we'll put it at 50 Y
    btDefaultMotionState* fallMotionState =
                new btDefaultMotionState(btTransform(btQuaternion(0,0,0,1),btVector3(0,50,0)));
    //This we're going to give mass so it responds to gravity
    btScalar mass = 1;
    btVector3 fallInertia(0,0,0);
    fallShape->calculateLocalInertia(mass,fallInertia);
    btRigidBody::btRigidBodyConstructionInfo fallRigidBodyCI(mass,fallMotionState,fallShape,fallInertia);
    btRigidBody* fallRigidBody = new btRigidBody(fallRigidBodyCI);

    //now we add it to our physics simulation
    dynamicsWorld->addRigidBody(fallRigidBody);

    //Here's where the magic happens. The physics simulation is stepped.
    //for each step, we're going to get the balls current position and write it out.
    //Everything inside this for loop would actually go into your *update* loop
    //your update loop would step the physics simulation
    //after stepping the simulation, you get the positions of your physics bodies
    //and make sure your object positions match those.

    for (int i=0 ; i<300 ; i++) {
            dynamicsWorld->stepSimulation(1/60.f,10);

            btTransform trans;
            fallRigidBody->getMotionState()->getWorldTransform(trans);

            //so you would take `trans` and use it to set the position of your cube
            //then your cube position would be updated to the same position as 
            //this physics object that's representing it.

            std::cout << "sphere height: " << trans.getOrigin().getY() << std::endl;
    }

    //everything else is clean up

    dynamicsWorld->removeRigidBody(fallRigidBody);
    delete fallRigidBody->getMotionState();
    delete fallRigidBody;

    dynamicsWorld->removeRigidBody(groundRigidBody);
    delete groundRigidBody->getMotionState();
    delete groundRigidBody;

    delete fallShape;

    delete groundShape;

    delete dynamicsWorld;
    delete solver;
    delete collisionConfiguration;
    delete dispatcher;
    delete broadphase;

    return 0;
} 
```

基本上你想在物理模拟中重新创建你的游戏世界。然后，当您进行物理模拟时，您会使用模拟中的新位置更新您的游戏世界。物理模拟告诉您如何移动游戏对象，使其看起来好像它们正在相互碰撞。

因此，对于您的设置，您可以将循环中的内容移动`for`到更新循环中。然后，您无需将球体位置写入控制台，而是使用球体的位置更新`posX`, `posY`, `posZ`。现在，您的立方体正在像模拟中的球体一样移动！

所以只是最后一点。你正在创造两个世界。一种是您绘制详细的图形，另一种是您有简单的形状来表示您的详细图形对象的物理形状。物理世界正在模拟所有对象的交互，而细节图形对象只是反映了这些简单物理形状的位置。

希望这能让事情更清楚。

# javascript - html - 如果鼠标单击几秒钟则触发事件

> ID：12927667
> 
> 赞同：1
> 
> 时间：2012-10-17T05:29:27.943
> 
> 标签：javascript, jquery, html

我需要知道如何做到这一点。

当我点击一个链接 2-3 秒时，我需要触发一个事件。如果它小于 1 秒，那么它什么也不做。

我希望我能传达我的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:31:40.750

### 您可以使用*计时器*来实现此目的：

```
var pressTimer

$("a").mouseup(function(){
  clearTimeout(pressTimer)
  // Clear timeout
  return false;
}).mousedown(function(){
  // Set timeout
  pressTimer = window.setTimeout(function() { ... your code ...},1000)
  return false; 
}); 
```

看看这是否适合你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:34:33.347

```
var timer;
$(function(){
    $('#ele').mousedown(function(){
        timer = setTimeout(function(){
           timer = '';
        },1000);
    }).mouseup(function(){
        if(timer != ''){
            window.clearTimeout(timer);
        }
    }); 
}); 
```

# c - 如何解释 gcc 与 nmake 的这些差异？

> ID：12927676
> 
> 赞同：0
> 
> 时间：2012-10-17T05:30:05.727
> 
> 标签：c, memory

我在戴尔工作站上使用 gcc 和 Linux Ubuntu，在联想工作站上使用 Microsoft Visual C++，并得到了一些我想解释的以下差异。

一位同事甚至写了一个自己的 malloc，我想知道内存分配有哪些策略。似乎有不同的策略来分配内存中的位置。(g)cc、nmake 和其他之间似乎也有区别。例如，(g)cc 似乎忽略了已释放的旧分配，而是分配了新释放的资源。这是 Microsoft Visual C++ 的外观：

```
Message MA01 from malloc.c: Hello, memory-allocating World!
MA02: Main array successfully allocated, with size 48 bytes.
MA03: Main array malloc returned address 988360 (dec), f14c8 (hex).
MA04: Main array now contains the following string:
abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstu
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 988472 (dec), f1538 (hex).
Number of g's in array is 2.
Executed free( gcountp );
MA05: Cowabunga array successfully allocated, with size 11 bytes.
MA06: Cowabunga array malloc returned address 988472 (dec), f1538 (hex).
MA07: Cowabunga array now contains the following string: Cowabunga!
MA08: Main array now contains the following string:
Cowabunga!
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 988544 (dec), f1580 (hex).
Number of g's in array is 1.
Executed free( gcountp );
MA09: Executed free( arrayp );
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 988360 (dec), f14c8 (hex).
Number of g's in array is 1.
Executed free( gcountp );
MA10: Executed free( extrap ); 
```

在 Ubuntu(Dell) 上使用 gcc，它看起来像这样：

```
Message MA01 from malloc.c: Hello, memory-allocating World!
MA02: Main array successfully allocated, with size 48 bytes.
MA03: Main array malloc returned address 30273552 (dec), 1cdf010 (hex).
MA04: Main array now contains the following string:
abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstu
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 30273616 (dec), 1cdf050 (hex).
Number of g's in array is 2.
Executed free( gcountp );
MA05: Cowabunga array successfully allocated, with size 11 bytes.
MA06: Cowabunga array malloc returned address 30273616 (dec), 1cdf050 (hex).
MA07: Cowabunga array now contains the following string: Cowabunga!
MA08: Main array now contains the following string:
Cowabunga!
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 30273648 (dec), 1cdf070 (hex).
Number of g's in array is 1.
Executed free( gcountp );
MA09: Executed free( arrayp );
g-count successfully allocated, with size 4 bytes.
g-count malloc returned address 30273648 (dec), 1cdf070 (hex).
Number of g's in array is 1.
Executed free( gcountp );
MA10: Executed free( extrap ); 
```

简而言之：

使用 MSVC++：

```
alloc()  got addr1
alloc()  got addr2
alloc()  got addr3
free(ALL)
alloc()  got addr1 
```

在 Ubuntu 上使用 gcc：

```
alloc()  got addr1
alloc()  got addr2
alloc()  got addr3
free(ALL)
alloc()  got addr3 
```

如何解释这些差异？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:31:12.080

嗯。这很有趣，但我并不感到惊讶。不过，您的样本非常小。您可能想要循环其中一些 malloc/free 命令以查看它是否一致。你是对的，内存分配和最终垃圾收集的 m$ 和 *nix 策略是不同的......你为什么希望它们是相同的。该语言仅定义编译器应根据需要解释代码的内容，然后编译器必须管理如何为目标操作系统/机器类型最好地安排该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:22:44.340

MSVC 中的[并发 CRT](http://msdn.microsoft.com/en-us/library/ee207192.aspx)将提供与 glibc 中的 ptmalloc3 分配器类似的模式，后者使用[SLAB 分配器](http://en.wikipedia.org/wiki/Slab_allocation)，通过设计提供优化的缓存重用与 LIFO 而不是传统的 FIFO 分配器。

# android-windowmanager - 使用WindowManager添加视图，但可以返回键

> ID：12927682
> 
> 赞同：4
> 
> 时间：2012-10-17T05:30:57.600
> 
> 标签：android-windowmanager

我使用 WindowManager 添加了一个视图。

它正确显示了我想做的事情，

但我有一个问题。这就是问题。

*   后退键不影响在android组件下（如活动）

我想要的是我添加的视图可以聚焦，（可以单击视图的内部按钮）只有在单击视图时，视图外部才能处理它们的工作。（例如，如果有一个按钮，可以点击，当返回键按下时，顶部活动消失了）

但如果我添加一个标志 - WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE，那么我无法在添加的视图按钮上接收 onClick 方法。但后退按钮工作正常。

否则，如果我删除标志 - 我可以接收 onClick 回调，但现在后退按钮不起作用。

我有一个难题。:(

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T04:01:00.210

让您的视图覆盖

```
public boolean dispatchKeyEvent(KeyEvent event) 
```

按下后退时做某事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T06:11:52.720

覆盖视图的 dispatchKeyEvent

```
 @Override
    public boolean dispatchKeyEvent(KeyEvent event)
{
if (event.getKeyCode() == KeyEvent.KEYCODE_BACK)
{
    // handle back press
    // if (event.getAction() == KeyEvent.ACTION_DOWN)
    return true;
}
return super.dispatchKeyEvent(event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T12:19:22.697

你可以这样做：

通过 WindowManager 添加一个浮动窗口，例如在屏幕底部添加一个视图：

```
WindowManager windowManager = (WindowManager) getActivity().getApplicationContext().getSystemService(Context.WINDOW_SERVICE);

WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams(); 
layoutParams.width   = WindowManager.LayoutParams.WRAP_CONTENT;
layoutParams.height  = WindowManager.LayoutParams.WRAP_CONTENT;
layoutParams.type= WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
layoutParams.flags   =  WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
layoutParams.format  = PixelFormat.TRANSLUCENT;
layoutParams.gravity = Gravity.LEFT | Gravity.TOP;
layoutParams.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;

FrameLayout view = new FrameLayout(getActivity()) {
            @Override
            public boolean dispatchKeyEvent(KeyEvent event) {
                if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
                    // do you code
                    return true;
                }
                return super.dispatchKeyEvent(event);
            }
        };
windowManager.addView(view, layoutParams); 
```

# mysql - 更改 MYSQL 日期格式

> ID：12927684
> 
> 赞同：0
> 
> 时间：2012-10-17T05:31:09.843
> 
> 标签：mysql, date, format

我在 MYSQL 中有一个表，其中 3 列有日期，并且它们的格式不符合要求。

目前我有：**mm/dd/yyyy**并且我想将这些日期更改为**dd/mm/yyyy**。

表名是 Vehicles，列名是：

```
CRTD
INSR
SERD 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:33:36.787

您当前列的数据类型不`date`正确？您需要先将其转换为日期`STR_TO_DATE()`，然后再转换回字符串

```
SELECT DATE_FORMAT(STR_TO_DATE(colName, '%c/%d/%Y'), '%d/%c/%Y')
FROM table1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/0ee75/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:34:43.970

试试这个：

```
select date_format(curdate(), '%d/%m/%Y'); 
```

在您的情况下，您必须使用此查询。如果所有三列都是日期时间类型

```
select date_format(CRTD, '%d/%m/%Y'),
       date_format(INSR, '%d/%m/%Y'),
       date_format(SERD, '%d/%m/%Y')
From yourTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:35:50.783

您可以使用该`date_format()`功能以任何您想要的方式格式化您的日期。

如果您想更改您使用的*任何数据库上**每个*日期的格式，您应该更改系统变量的值。*`date_format`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:35:54.197

UPDATE Vehicles SET yourdatecolumn=DATE_FORMAT(STR_TO_DATE(yourdatecolumn, '%c-%d-%Y'), '%d-%c-%Y')*

# web-applications - 如何使用 ANTS Profiler 使用“附加到 Net 4 进程”选项来分析 Web 应用程序？

> ID：12927685
> 
> 赞同：0
> 
> 时间：2012-10-17T05:31:11.267
> 
> 标签：web-applications, red-gate-ants

谁能告诉我如何将 ANTS Profiler 中的 Attach to a Net 4 进程选项用于 Web 应用程序？我可以看到它可用于控制台应用程序（.exe），但不适用于 Web 应用程序。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:40:16.113

当您选择“附加到 .NET 4 进程”时，ANTS 会显示所有正在运行的 .NET 4 进程的列表。w3wp 需要实际运行才能出现在此列表中，如果您最近没有访问该网站，则不会出现这种情况。尝试在任何浏览器中请求该站点，然后在 ANTS 中，点击 Refresh 以再次查看进程列表 - 希望 w3wp 会出现。

# c++ - 当派生类的析构函数是非虚拟的时，为什么在派生对象上调用基类析构函数？

> ID：12927688
> 
> 赞同：6
> 
> 时间：2012-10-17T05:31:44.603
> 
> 标签：c++, polymorphism, virtual-destructor

为什么在下面的示例中调用了所有析构函数 , , `~D()`？`~C()``~B()``~A()`

只有一个虚拟析构函数： of `A`。

这是代码：

```
#include<iostream>
using namespace std;

class A
{
public:
  virtual ~A()
  {
    cout<<"destruct A\n";
  }

};
class B:public A
{
public:
  ~B()
  {
  cout<<"destruct B\n"; 
  }
};
class C:public B
{
public:
  ~C()
  {
    cout<<"destruct C\n";
  }
};
class D:public C
{
public:
   ~D()
   {
     cout<<"destruct D\n"; 
   }
};

int main()
{
    A* ptr = new D();
    delete ptr;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T05:45:05.910

> The destruction order in derived objects goes in exactly the reverse order of construction: first the destructors of the most derived classes are called and then the destructor of the base classes.
> 
> A destructor can be defined as virtual or even pure virtual. You would use a virtual destructor if you ever expect a derived class to be destroyed through a pointer to the base class. This will ensure that the destructor of the most derived classes will get called:

```
A* b1 = new B;//if A has a virtual destructor
delete b1;//invokes B's destructor and then A's

A* b1 = new B;//if A has no virtual destructor
    delete b1;//invokes A's destructor ONLY 
```

> If A does not have a virtual destructor, deleting b1 through a pointer of type A will merely invoke A's destructor. To enforce the calling of B's destructor in this case we must have specified A's destructor as virtual:

```
virtual ~A(); 
```

[REFERENCE](http://www.cprogramming.com/tutorial/constructor_destructor_ordering.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T05:33:47.533

一旦`A`声明`virtual`了析构函数，所有派生类的析构函数也是`virtual`，即使它们没有明确声明为这样。所以你看到的行为正是预期的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-08T13:13:38.173

正如@juanchopanza 所说 - 将基本析构函数声明为虚拟意味着所有后代都有虚拟析构函数。这种继承的虚拟性*对于任何方法都是相同的*，而不仅仅是析构函数。

这就是为什么我采访了不知道关键字做什么的人，因为他们只需要覆盖从框架派生的方法，所以它们都是虚拟的（叹气）。

# spring-mvc - Spring MVC与java脚本（addRows函数）绑定

> ID：12927691
> 
> 赞同：1
> 
> 时间：2012-10-17T05:31:52.947
> 
> 标签：spring-mvc, javascript-framework

我对 Spring MVC 中的 javascript 函数绑定有疑问/问题。根据我们的要求，当用户单击“添加”按钮时，我需要在表中插入一个新行。

第 1 步：因此，当用户单击“添加更多”按钮时，我在表格中插入了一个新行，我正在使用 javascript 处理这个

第 2 步：当用户单击提交按钮时，我需要将用户输入的值发送到我的控制器（Spring MVC 控制器）。

那么如何动态地将值绑定到控制器呢？

请帮我尽快解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:00:12.617

如果您创建一个适当的类来保存表单数据，然后`@ModelAttribute`在控制器方法上使用注释，Spring 可以绑定映射和对象列表。

例如，如果您的 JavaScript 创建如下表行：

```
<tr>
    <td><input name="bells[0]" /></td>
    <td><input name="whistles[0]" /></td>
</tr>
<tr>
    <td><input name="bells[1]" /></td>
    <td><input name="whistles[1]" /></td>
</tr> 
```

然后，您可以创建一个模型类，其中包含 HTML 表单中每个重复字段的列表，如下所示：

```
public class AsapForm {
    private List<String> bells;
    private List<String> whistles;

    // add getters and setters here
} 
```

然后您可以创建一个控制器方法，将该类用作带有`@ModelAttribute`注释的参数：

```
public void postAsapForm(@ModelAttribute("contactForm") AsapForm asapForm, BindingResult result) {
    ...
} 
```

`asapForm.getBells()`然后，您可以使用等访问每一行的值`asapForm.getWhistles()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:46:01.773

当我需要绑定来自前端的动态对象列表时，我会执行以下操作：

将数据发布为 a `json array`，即以下格式

{ 数据 : [{a:1, b:2}, {a:3, b:4}] }

在里面`Controller`

```
@RequestMapping(value="save", method=RequestMethod.POST)
public void save(JSONObject object)
{
 List<YourType> list = new ArrayList<YourType>();
 JSONArray array = object.getJSONArray("data")
 for(int i=0; i<array.length(); i++)
 {
   //getObjectFromJson is your method for converting json to an object of your type.
   list.add(JsonUtils.fromJson(array.getJSONObject(i).toString(), YourType.class);
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:11:44.940

我已经使用**LazyList**实现了这一点。

您需要通过以下方式执行此操作。

**操作.java**

```
 package com.xxx.xxx.model;
// Generated Feb 9, 2012 11:30:06 AM by Hibernate Tools 3.2.1.GA

import java.util.ArrayList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.apache.commons.collections.FactoryUtils;
import org.apache.commons.collections.list.LazyList;

@Entity
@Table(name="Operations"
    ,schema="dbo"

)
public class Operations  implements java.io.Serializable {

     private int operationId;
     @Embedded
     private Services services;
     private String operationName;
     private String isHqlsql;
     private String isMultipleTables;
     private String listOfTablesAffected;
     private String hqlQuery;
     private String typeOfOperation;
     private String operationDetail;
     private String inputVariables;
     private String outputparamdatatype;
     private String isCountQuery;
     private String isDynamicWhereQry;
     private String isPaginationRequired;
     private String biInputParameters;
    private List<OperationParameters> operationParameterses = LazyList
            .decorate(new ArrayList<OperationParameters>(),
                    FactoryUtils.instantiateFactory(OperationParameters.class));

    public Operations() {
    }

    public Operations(int operationId, Services services, String operationName) {
        this.operationId = operationId;
        this.services = services;
        this.operationName = operationName;
    }
    public Operations(int operationId, Services services, String operationName, String isHqlsql, String isMultipleTables, String listOfTablesAffected, String hqlQuery, String typeOfOperation, String operationDetail, String inputVariables, String outputparamdatatype, String isCountQuery, List operationParameterses) {
       this.operationId = operationId;
       this.services = services;
       this.operationName = operationName;
       this.isHqlsql = isHqlsql;
       this.isMultipleTables = isMultipleTables;
       this.listOfTablesAffected = listOfTablesAffected;
       this.hqlQuery = hqlQuery;
       this.typeOfOperation = typeOfOperation;
       this.operationDetail = operationDetail;
       this.inputVariables = inputVariables;
       this.outputparamdatatype = outputparamdatatype;
       this.isCountQuery = isCountQuery;
       this.operationParameterses = operationParameterses;
    }

    @Id 
    @GeneratedValue
    @Column(name="operationId", unique=true, nullable=false)
    public int getOperationId() {
        return this.operationId;
    }

    public void setOperationId(int operationId) {
        this.operationId = operationId;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="serviceId", nullable=false)
    public Services getServices() {
        return this.services;
    }

    public void setServices(Services services) {
        this.services = services;
    }

    @Column(name="operationName", nullable=false, length=250)
    public String getOperationName() {
        return this.operationName;
    }

    public void setOperationName(String operationName) {
        this.operationName = operationName;
    }

    @Column(name="isHQLSQL", length=50)
    public String getIsHqlsql() {
        return this.isHqlsql;
    }

    public void setIsHqlsql(String isHqlsql) {
        this.isHqlsql = isHqlsql;
    }

    @Column(name="isMultipleTables", length=50)
    public String getIsMultipleTables() {
        return this.isMultipleTables;
    }

    public void setIsMultipleTables(String isMultipleTables) {
        this.isMultipleTables = isMultipleTables;
    }

    @Column(name="listOfTablesAffected", length=500)
    public String getListOfTablesAffected() {
        return this.listOfTablesAffected;
    }

    public void setListOfTablesAffected(String listOfTablesAffected) {
        this.listOfTablesAffected = listOfTablesAffected;
    }

    @Column(name="hqlQuery")
    public String getHqlQuery() {
        return this.hqlQuery;
    }

    public void setHqlQuery(String hqlQuery) {
        this.hqlQuery = hqlQuery;
    }

    @Column(name="typeOfOperation", length=50)
    public String getTypeOfOperation() {
        return this.typeOfOperation;
    }

    public void setTypeOfOperation(String typeOfOperation) {
        this.typeOfOperation = typeOfOperation;
    }

    @Column(name="operationDetail")
    public String getOperationDetail() {
        return this.operationDetail;
    }

    public void setOperationDetail(String operationDetail) {
        this.operationDetail = operationDetail;
    }

    @Column(name="inputVariables", length=5000)
    public String getInputVariables() {
        return this.inputVariables;
    }

    public void setInputVariables(String inputVariables) {
        this.inputVariables = inputVariables;
    }

    @Column(name="outputparamdatatype", length=50)
    public String getOutputparamdatatype() {
        return this.outputparamdatatype;
    }

    public void setOutputparamdatatype(String outputparamdatatype) {
        this.outputparamdatatype = outputparamdatatype;
    }

    @Column(name="isCountQuery", length=10)
    public String getIsCountQuery() {
        return this.isCountQuery;
    }

    public void setIsCountQuery(String isCountQuery) {
        this.isCountQuery = isCountQuery;
    }

    public String getIsDynamicWhereQry() {
        return isDynamicWhereQry;
    }

    public void setIsDynamicWhereQry(String isDynamicWhereQry) {
        this.isDynamicWhereQry = isDynamicWhereQry;
    }

    public String getIsPaginationRequired() {
        return isPaginationRequired;
    }

    public void setIsPaginationRequired(String isPaginationRequired) {
        this.isPaginationRequired = isPaginationRequired;
    }

    public String getBiInputParameters() {
        return biInputParameters;
    }

    public void setBiInputParameters(String biInputParameters) {
        this.biInputParameters = biInputParameters;
    }

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="operations")
    public List<OperationParameters> getOperationParameterses() {
        return this.operationParameterses;
    }

    public void setOperationParameterses(List<OperationParameters> operationParameterses) {
        this.operationParameterses = operationParameterses;
    }

} 
```

**操作参数.java**

```
package com.xxx.xxx.model;

// Generated Feb 9, 2012 11:30:06 AM by Hibernate Tools 3.2.1.GA

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name="OperationParameters"
    ,schema="dbo"

)
public class OperationParameters  implements java.io.Serializable {

     private int parameterId;
     private Operations operations;
     private String inputOutputParamName;
     private String inputOutputParamType;
     private String inputOutputParamDataType;

    public OperationParameters() {
    }

    public OperationParameters(int parameterId, Operations operations, String inputOutputParamName, String inputOutputParamType, String inputOutputParamDataType) {
       this.parameterId = parameterId;
       this.operations = operations;
       this.inputOutputParamName = inputOutputParamName;
       this.inputOutputParamType = inputOutputParamType;
       this.inputOutputParamDataType = inputOutputParamDataType;
    }

    @Id 
    @GeneratedValue
    @Column(name="parameterId", unique=true, nullable=false)
    public int getParameterId() {
        return this.parameterId;
    }

    public void setParameterId(int parameterId) {
        this.parameterId = parameterId;
    }
@ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="operationId", nullable=false)
    public Operations getOperations() {
        return this.operations;
    }

    public void setOperations(Operations operations) {
        this.operations = operations;
    }

    @Column(name="inputOutputParamName", nullable=false, length=250)
    public String getInputOutputParamName() {
        return this.inputOutputParamName;
    }

    public void setInputOutputParamName(String inputOutputParamName) {
        this.inputOutputParamName = inputOutputParamName;
    }

    @Column(name="inputOutputParamType", nullable=false, length=250)
    public String getInputOutputParamType() {
        return this.inputOutputParamType;
    }

    public void setInputOutputParamType(String inputOutputParamType) {
        this.inputOutputParamType = inputOutputParamType;
    }

    @Column(name="inputOutputParamDataType", nullable=false, length=250)
    public String getInputOutputParamDataType() {
        return this.inputOutputParamDataType;
    }

    public void setInputOutputParamDataType(String inputOutputParamDataType) {
        this.inputOutputParamDataType = inputOutputParamDataType;
    }

} 
```

**为添加新操作的发布请求提供服务的控制器方法。**

```
/**
     * Method that will serve the post request to add the operation and operation parameters submitted by the user.
     * @param operations
     * @param map
     * @return {@link String} The view name that will redirect to the get request to display the previous page with newly entered operation in the list. 
     */
    @RequestMapping(value="/add", method=RequestMethod.POST)
    public String addOperations(@ModelAttribute Operations operations, ModelMap map) {
        operations.getOperationParameterses().removeAll(Collections.singleton(null));

        for(int i=0; i<operations.getOperationParameterses().size(); i++) {
            System.out.println("parameterName :: " + ((OperationParameters)operations.getOperationParameterses().get(i)).getInputOutputParamName());
            if(((OperationParameters)operations.getOperationParameterses().get(i)).getInputOutputParamName() == null || "".equalsIgnoreCase((((OperationParameters)operations.getOperationParameterses().get(i))).getInputOutputParamName())) {
                operations.getOperationParameterses().remove(i);
                System.out.println("empty parameter removed....");
            }
        }

        return "redirect:/operations/" + operations.getServices().getServiceId();
    } 
```

希望这对您有所帮助。

# jquery - 如何在 iframe 中弹出视频或 jpeg 或 swf？

> ID：12927696
> 
> 赞同：0
> 
> 时间：2012-10-17T05:32:23.013
> 
> 标签：jquery, jsp, iframe, popup

我在 liferay 中使用带有自定义 portlet 的 jsp 页面，需要创建一个弹出窗口，我的视频将在其中播放（如预览）。我已经尝试过使用 JQPlayer 和 video.js，但它不适用于嵌入 url。

我不太了解 jQuery 和 CSS。我尝试了一些 Google 提供的演示代码，但没有成功。

我的页面`vid_url`中有一个变量。`view.jsp`一个`iframe`有链接的变量`vid_url`...

这是我要弹出的 jQuery，但我的 URI 在该 jQuery 中不起作用（我曾尝试打开另一个页面，甚至尝试使用嵌入 URL，但现在解决了）。

```
<script type="text/javascript">
function showPopup() {
      AUI().use('aui-dialog', 'aui-io', 'event', 'event-custom', function(A) {

        var dialog = new A.Dialog({
                title: 'Popup Title',
                centered: true,
                draggable: true,
                modal: true,
                width: 600,
                xy: ['center',10],

            }).plug(A.Plugin.IO, {uri: '/jsps/preview.jsp',}).render();

            dialog.show();

      });
}; 
```

那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:49:31.710

看到 youtube(Iframe) 这是最好的。 [看到这个](http://fancybox.net/home)

# android - Android：显示进度对话框然后正确关闭

> ID：12927698
> 
> 赞同：0
> 
> 时间：2012-10-17T05:32:34.333
> 
> 标签：android, dialog

我发现很多人都遇到了类似的问题，但我只是想在从 URL 中获取一些数据时显示一个对话框，然后在检索到数据后正确关闭。这是我正在尝试做的事情（这是我的 onClick() 刷新按钮的方法）：

```
dialog.show();  
// do some work  
dialog.dismiss(); 
```

这样做你根本看不到对话框。我尝试过使用额外的线程来做到这一点，例如：

```
Thread t = new Thread() {
    public void run() {
        dialog.show();
    }
}; 
```

但是这样我会得到一个错误并强制关闭......
**最好的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:39:09.580

**对于此类任务，我主要建议您使用 AsyncTask。[这](https://stackoverflow.com/questions/6450275/android-how-to-work-with-asynctasks-progressdialog)是一个很好的例子，可以帮助你。**

对于这个问题，因为您正在执行与 UI 相关的任务，请使用 UI 线程。

```
runOnUiThread(new Runnable() {

    @Override
    public void run() {
    // TODO Auto-generated method stub
    //Show or Hide your ProgressDialog
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:41:09.360

对于您尝试实施的任务：

```
dialog.show();  
// do some work  
dialog.dismiss(); 
```

现在，为了实现上面，有**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**的概念，这是实现线程任务的最佳方式，在 Android 中也称为**Painless Threading**。

AsyncTask 有 4 个主要方法：

1.  `onPreExecute()`- 在这里您可以显示 ProgressDialog 或 ProgressBar。
2.  `doInBackground()`- 在这里你可以做/实现后台任务
3.  `onProgressUpdate()`- 在这里，您可以根据从 web 服务调用或后台任务收到的​​中间结果更新 UI
4.  `onPostExecute()`- 在这里您可以关闭对话框或使进度条不可见。您也可以在收到后台任务或网络服务调用的结果后执行想要执行的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:41:34.523

尝试使用 Activity 的 runOnUiThread 而不是使用 Thread。检查以下代码片段。runOnUiThread(new Runnable() {

```
 public void run() {

                    dialog = new ProgressDialog(ctContext);

                    dialog.show();
                }
            }

        }); 
```

我想这会对你有所帮助。

# c++ - C 中的后台作业（在玩具外壳中实现和实现）

> ID：12927700
> 
> 赞同：1
> 
> 时间：2012-10-17T05:32:46.437
> 
> 标签：c++, c, c++11

我想这样做，当用户在命令之后附加 - 时，它将在后台执行。出于某种原因，如果我正常执行命令它会等待，然后如果我在后台执行命令它将起作用，但是如果我正常执行命令它不会等待它。我确定我只是在做一些小错误。有任何想法吗：

```
void executeSystemCommand(char *strippedCommand, char *background, int argc, char **args) {
    char pathToExecute[80];

    // Check if command will be executed in the background
    int shellArgs;
    bool bg; 
    if (!strcmp(background, "-")) {
        bg = true;
        shellArgs = argc -1; 
    } else {
        bg = false;
        shellArgs = argc;
    }   

    // Save the linux commands in a new array
    char *executableCommands[shellArgs+1];
    int j;
    for (j = 0; j < shellArgs+1; j++) {
        executableCommands[j] = args[j];
    }   
    executableCommands[shellArgs] = NULL;

    // Check the $PATH
    const char delimiters[] = ":";
    char *token, *cp;
    char *forLater;
    int count = 0;
    char *path;
    path = getenv("PATH");

    // All of this just breaks up the path into separate strings
    cp = strdup(path);    
    forLater = strdup(path);
    token = strtok (cp, delimiters); 
    while ((token = strtok (NULL, delimiters)) != NULL) {
        count++;
    }   
    char **argv;
    int size = count+1;
    argv = (char**) malloc (size);
    count = 0;
    token = strtok (forLater, delimiters); 
    argv[0] = (char*) malloc (50);
    argv[0] = token;
    strcpy(argv[0],token);
    while ((token = strtok (NULL, delimiters)) != NULL) {
        count++;
        argv[count] = (char*) malloc (50);
        argv[count] = token;
    }   

    // This goes through the path to see if the linux command they entered
    // Ex: sleep exists in one of those files and saves it to a var
    int i;
    bool weHaveIt = false;
    int ac; 
    for (i = 0; i < count; i++) {
        char str[80];
        strcpy(str, argv[i]);
        strcat(str, "/");
        strcat(str, args[0]);
        ac = access(str, F_OK);
        if (ac == 0) {
            weHaveIt = true;
            strcpy(pathToExecute, str);
            break;
        }
    }

    if (!weHaveIt) {
        printf("That is not a valid command. SORRY!\n");
        return;
    }

    executableCommands[0] = pathToExecute;
    int status;

    // Get the array for 

    // If user wants command to be a background process
    if (bg) {
        int background_process_id;
        pid_t fork_return;
        fork_return = fork();

        if (fork_return == 0) {
            background_process_id = getpid();
            addJobToTable(strippedCommand, background_process_id);
            setpgid(0, 0);
            execve(executableCommands[0], executableCommands, NULL);
            exit(0);
        } else {
            return;
        }
    } else {
        int background_process_id;
        pid_t fork_return;
        fork_return = fork();

        if (fork_return == 0) {
            background_process_id = getpid();
            status = execve(executableCommands[0], executableCommands, NULL);
            exit(0);
        } else {
                wait(&status);
                return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:18:18.367

对第三个作业的调用`wait`立即返回，因为第二个作业已完成并等待处理（也称为“僵尸”）。您可以检查 的返回值`wait(&status)`，即已退出进程的 PID，并确保它是您正在等待的进程。如果不是，请`wait`再次调用。

或者使用`waitpid`，它等待一个特定的进程：

```
/* Wait for child. was: wait(&status) */
waitpid(fork_return, &status, 0); 
```

如果你这样做，你应该实现一个信号处理程序`SIGCHLD`来处理完成的后台作业，以防止“僵尸”子进程的积累。

除此之外，在后台作业案例中，`fork()`返回 0 的分支您已经在新进程中，因此调用`addJobToTable`发生在错误的进程中。此外，您应该检查所有调用的返回值；否则某些事情可能会失败，而您却不知道。所以在后台运行作业的代码应该更像这样：

```
 if (fork_return == 0) {
        setpgid(0, 0);
        if (execve(executableCommands[0], executableCommands, NULL) == -1) {
            perror("execve");
            exit(1);
        }
    } else if (fork_return != -1) {
        addJobToTable(strippedCommand, fork_return);
        return;
    } else {
        perror("fork"); /* fork failed */
        return;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:39:14.313

创建的每个子进程`fork()`都会在父进程退出时退出。

```
if (fork_return == 0) {
   /* child process, do stuff */
} else {
   /* parent process, exit immediately */
   return;
} 
```

### 解释

[`fork`](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)生成一个新进程作为当前进程（父进程）的子进程。每当类 Unix 操作系统中的进程终止时，它的所有子进程也将被终止。如果他们自己有子进程，那么这些也会被终止。

### 解决方案

在大多数 shell 上，如果您`&`在行尾添加一个 & 符号，您可以在后台启动一个进程：

```
我的应用程序 arg1 arg2 arg3 ... argN &
```

# ipad - 与 iPad 模拟器相比，在设备 (iPad) 中运行时动画更慢

> ID：12927702
> 
> 赞同：0
> 
> 时间：2012-10-17T05:32:55.557
> 
> 标签：ipad, animation, core-animation, bezier, uibezierpath

我的程序是产品的网格视图，单击时，图像会从原始位置动画到所需的目的地（视图控制器中的位置）。当我在 iPad 模拟器中运行它时，图像将立即开始动画，但当我在设备 (iPad) 中运行它时，它在开始动画之前给了我大约 1 秒的延迟..

这是我的代码。我正在使用贝塞尔路径。

```
 [UIView animateWithDuration:1.1 
                     animations:^{
                         UIBezierPath *movePath = [UIBezierPath bezierPath];
                         [movePath moveToPoint:cellImageView.center];
                         [movePath addQuadCurveToPoint:self.miniDropHereView.center
                                          controlPoint:CGPointMake(self.miniDropHereView.center.x, cellImageView.center.y)];

                         CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
                         moveAnim.path = movePath.CGPath;
                         moveAnim.removedOnCompletion = NO;

                         CABasicAnimation *scaleAnim = [CABasicAnimation animationWithKeyPath:@"transform"];
                         scaleAnim.fromValue = [NSValue valueWithCATransform3D:CATransform3DIdentity];
                         scaleAnim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.1, 0.1, 1.0)];
                         scaleAnim.removedOnCompletion = YES;

                         CABasicAnimation *opacityAnim = [CABasicAnimation animationWithKeyPath:@"alpha"];
                         opacityAnim.fromValue = [NSNumber numberWithFloat:1.0];
                         opacityAnim.toValue = [NSNumber numberWithFloat:0.1];
                         opacityAnim.removedOnCompletion = YES;

                         CAAnimationGroup *animGroup = [CAAnimationGroup animation];
                         animGroup.animations = [NSArray arrayWithObjects:moveAnim, scaleAnim, opacityAnim, nil];
                         animGroup.duration = 1;
                         [cellImageView.layer addAnimation:animGroup forKey:@"angelica"];
                         cellImageView.alpha = 0; //.0000000000000000000001;

                         self.animateProduct = animGroup;
                         self.cellImageViewGlobal = cellImageView;
                         self.animateProduct.delegate= self;
                     }
                     completion:^(BOOL finished){
                         cellImageView.alpha = 0.0000000000000000000001;
                         [cellImageView removeFromSuperview];
                     }];
} 
```

我研究了如何在动画开始之前操纵延迟。所以我改变了动画代码的第一行（具体如下）

```
 [UIView animateWithDuration:1.1 delay: 0.0f
                            options: UIViewAnimationOptionCurveEaseInOut 
                         animations:^{ 
```

但即使我没有指定延迟，动画的开始也会立即发生，在我点击产品之后（使用 iPad 模拟器时）。我不确定问题是否出在我的 iPad 上。有没有其他方法可以加快动画的开始？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:04:07.607

您在基于视图的动画（UIView animateWithDuration:animations 及其变体）的主体中使用 CABasicAnimation 和 CAAnimationGroup 对象。不要那样做。我很惊讶它完全有效。这当然不是制作动画的正确方法。

摆脱你对 UIView animateWithDuration:animations: 的调用，直接使用你的 CAAnimation 组。

# string - 在R中的数据框中的两个字符之间添加空格

> ID：12927703
> 
> 赞同：1
> 
> 时间：2012-10-17T05:33:00.283
> 
> 标签：string, r, character, dataframe

我有一个数据框，其中每个单元格都是 2 个字符串（即：“AA”、“BC”、“CD”），我试图在两个字符之间放置空格，并且 NA 值保持原样。我似乎无法弄清楚这一点。有什么帮助吗？？？

这是一个示例数据框：

```
 df <- data.frame(col1=c("AB", "CD", "EF"), col2=c("AA", "BB", "CC"), col3=c("XX", "YY", NA)) 
```

这就是示例数据框的样子：

```
 col1 col2 col3
1   AB   AA   XX
2   CD   BB   YY
3   EF   CC <NA> 
```

这就是我希望我的数据框看起来像的样子：

```
 col1  col2  col3
1   A B   A A   X X
2   C D   B B   Y Y
3   E F   C C   <NA> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T05:48:20.960

如果它像您展示的那样简单，这是一种方法：

```
data.frame(lapply(df, function(x){
    ifelse(is.na(x), NA, 
    paste(substring(x, 1, 1), substring(x, 2)))
})) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T05:43:14.823

如果您的 data.frame 列都是因素，那么您可以在级别上工作

```
as.data.frame(lapply(df, function(x){
 .l <- unlist(lapply(strsplit(levels(x),''), paste, collapse = ' '))
   levels(x) <- .l
 x})) 
```

如果您的`data.frame`列是字符（stringsAsFactors = FALSE）

```
as.data.frame(lapply(df, function(x){
  .l <- unlist(lapply(strsplit(x,''), paste, collapse = ' '))
  .l
  })) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T05:40:49.523

这是一种方法

```
df2 <- data.frame(lapply(df, function(x) {
  levels(x) <- gsub("(.)(.)", "\\1 \\2", levels(x))
  return(x)
}))

df2

#   col1 col2 col3
# 1  A B  A A  X X
# 2  C D  B B  Y Y
# 3  E F  C C <NA> 
```

这当然依赖于这样的假设，即在创建 data.frame 时`df`，参数`stringsAsFactors`是`TRUE`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-17T05:57:56.900

你试过这个吗？

```
df <- data.frame(col1=c("A B", "C D", "E F"), col2=c("A A", "B B", "C C"), col3=c("X X", "Y Y", NA)) 
```

我试过了，我得到了你需要的东西，似乎太傻了！

如果您要动态获取列值，猜测您可以`paste`适当地使用`strsplit`

例子

```
x <- "AB" 
strsplit(x, '')
[[1]]
[1] "A" "B" 
```

然后你可以使用它并`paste`适当地使用

# android - 如何获得像 Honeycomb 这样的 Android 平台代号

> ID：12927715
> 
> 赞同：1
> 
> 时间：2012-10-17T05:34:05.507
> 
> 标签：android, android-version

在我的应用程序中，我想显示设备的 Android 操作系统代码名称。即，我想在运行时从设备获取类似`Honeycomb`或实用的 android 操作系统代码名称。`Gingerbread`

有没有办法让那个代号刺痛自己？我想在我的应用程序的一个屏幕中显示该名称。

我可以像这样比较并对字符串进行硬编码。

```
 if (Build.VERSION.SDK_INT==Build.VERSION_CODES.GINGERBREAD) {

    CodeName=”GINGERBREAD”

 } else if (Build.VERSION.SDK_INT==Build.VERSION_CODES.HONEYCOMB){

    CodeName=”Honeycom”
 } 
```

但是如果明天发布新版本，那么我必须再次更改代码。这就是为什么我要寻找一些为什么要获取代码名称字符串本身而不是获取版本号的原因。

那么任何人都可以建议一些方法来获取设备的操作系统代码名称，就像我们获得操作系统版本号一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T06:19:27.593

尝试这个。

```
enum Codenames
{
    BASE, BASE_1,
    CUPCAKE, 
    DONUT, 
    ECLAIR, ECLAIR_MR1, ECLAIR_MR2, 
    FROYO,
    GINGERBREAD, GINGERBREAD_MR1, 
    HONEYCOMB, HONEYCOMB_MR1, HONEYCOMB_MR2,
    ICE_CREAM_SANDWICH, ICE_CREAM_SANDWICH_MR1,
    JELLY_BEAN;

    public static Codenames getCodename()
    {
        int api = Build.VERSION.SDK_INT;

        switch (api) {
        case 1:

            return BASE;
        case 2:

            return BASE_1;
        case 3:

            return CUPCAKE;
        case 4:

            return DONUT;
        case 5:

            return ECLAIR;
        case 6:

            return ECLAIR_MR1;
        case 7:

            return ECLAIR_MR2;
        case 8:

            return FROYO;
        case 9:

            return GINGERBREAD;
        case 10:

            return GINGERBREAD_MR1;
        case 11:

            return HONEYCOMB;
        case 12:

            return HONEYCOMB_MR1;
        case 13:

            return HONEYCOMB_MR2;
        case 14:

            return ICE_CREAM_SANDWICH;
        case 15:

            return ICE_CREAM_SANDWICH_MR1;
        case 16:

            return JELLY_BEAN;
        default:
            return null;
        }
    }

}; 
```

然后做

```
Codenames c = Codenames.getCodename(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:14:06.210

Android 文档中没有 API 可以为您返回代号字符串。您只能获得类似 2.3 的 VERSION NUMBER，您可以向用户展示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-19T06:50:16.760

为什么不使用反射？

```
 String versionCodename = null;
    Field[] fields = Build.VERSION_CODES.class.getFields();
    for (int i = 0; i < fields.length; i++) {
        Field fld = fields[i];
        try {
            int val = fld.getInt(null);
            if (val == Build.VERSION.SDK_INT && fld.getName().length() > 1) {
                String fldName = fld.getName();
                versionCodename = fldName.substring(0, 1).toUpperCase() + fldName.substring(1).toLowerCase();
                break;
            }
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-28T13:53:48.247

导入 java.lang.reflect.Field；

```
 Field[] fields = Build.VERSION_CODES.class.getFields();

  String osName = fields[Build.VERSION.SDK_INT + 1].getName();

  Log.d("OsName",""+osName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:40:06.847

像这样，只需将其更改`.GINGERBREAD`为您想要的任何内容，即。`.HONEYCOMB`

```
if (Build.VERSION.SDK_INT<Build.VERSION_CODES.GINGERBREAD) {
     // do code for device before gingerbread
} 
```

还可以在这里查看更多信息 - [http://developer.android.com/reference/android/os/Build.VERSION.html](http://developer.android.com/reference/android/os/Build.VERSION.html)

编辑 - 要将版本号作为 int 获取，您可以

```
int versionNumber = Build.VERSION.SDK_INT; 
```

然后你可以使用

```
if (versionNumber == 2.3){
    //do code here
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-03T21:51:50.963

不推荐使用的字符串`Build.VERSION.SDK`应该可以工作

# c# - 错误：“内存不足”，将 .jls 图像转换为 byte[] 数组时

> ID：12927717
> 
> 赞同：1
> 
> 时间：2012-10-17T05:34:10.467
> 
> 标签：c#, image, memory, image-conversion

我有这个函数将图像转换为字节数组。

```
 public byte[] imageToByteArray(System.Drawing.Image imageIn)
    {
        MemoryStream ms = new MemoryStream();
        imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.MemoryBmp);
        return ms.ToArray();
    } 
```

这是我调用该函数的代码。

```
 private void btn_Click(object sender, EventArgs e)
    {
       inputPath=textbox1.text;

        try
        {
            System.Drawing.Image img = Image.FromFile(inputPath);
           byte[] str= imageToByteArray(img);
         }

     catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

当我运行程序或触发事件时，它会抛出一个异常，上面写着“内存不足” - 为什么会发生这种情况？

我正在使用这个函数来解码 .jls 图像（使用 JPEG-LS 算法压缩的图像）。所以这显然意味着该文件不受支持，对吧？你知道还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:39:20.617

来自[MSDN](http://msdn.microsoft.com/en-us/library/4sahykhd.aspx)：

> 如果文件没有有效的图像格式或 GDI+ 不支持文件的像素格式，则此方法将引发 OutOfMemoryException 异常。

此外：

> Image 类不支持位图中的 alpha 透明度。要启用 Alpha 透明度，请使用每像素 32 位的 PNG 图像。

有关支持的格式的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/at62haz6.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:45:26.687

试试这个图像到字节[]：

```
 byte[] str = File.ReadAllBytes("InputImagePath");

private void btn_Click(object sender, EventArgs e)  
    {  
       inputPath=textbox1.text;  

        try  
        {  
          byte[] str= File.ReadAllBytes("inputPath");
        }  

     catch (Exception ex)  
        {  
            MessageBox.Show(ex.Message);  
        }  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:39:35.740

Out of Memory 异常非常不言自明。

你可以试试以下

*   尝试不同大小的图像，并观察系统在哪个大小范围内开始出现内存不足异常
*   尝试处置你的`MemoryStream`

**例子**

```
public byte[] imageToByteArray(System.Drawing.Image imageIn)
{
    using(MemoryStream ms = new MemoryStream()) 
    {
        imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.MemoryBmp);
        return ms.ToArray();
    }
} 
```

# c# - Winforms/C#：在 2 次运行之间存储/检索（持久）文本框的内容

> ID：12927718
> 
> 赞同：3
> 
> 时间：2012-10-17T05:34:11.423
> 
> 标签：c#, winforms, textbox, persist

有没有一种最简单的方法可以简单地告诉 Winforms（主要是 TextBoxes）将其所有内容保存到一个文件中，而我不必遍历所有控件？

我在 WPF 应用程序中看到了这一点，但我一无所知（而且，谷歌也没有发现任何东西）是否有开箱即用的最简单方法。

再次，循环通过每个控件是可能的，但似乎.. 太多的工作？

序列化可能有用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:50:14.453

您可以`ApplicationSettings` `PropertyBinding`在表单设计器中设置您的，为其分配一个字段名称，然后当您关闭您的应用程序时，您可以执行此操作，这将保存您对应用程序 app.config 文件中所有绑定文本框的所有更改。

![在此处输入图像描述](../Images/4e603dd9302b6688b7173765bb8d16b7.png)

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    Properties.Settings.Default.Save(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:42:47.437

You can use [IsolatedStorageFile](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx) to save and load data. If you can bind your textboxes to a class with properties for each textbox, you can serialize the class and store it IsolatedStorageFile.

You can then deserialize from IsolatedFileStorage and the controls should be bound to the values present in the properties of the class.

For details about data-binding to a class refer to answeers to this question: [Data Binding to an object in C#](https://stackoverflow.com/questions/715346/data-binding-to-an-object-in-c-sharp)

Refer to [this](http://www.c-sharpcorner.com/UploadFile/74f20d/save-and-read-data-from-isolated-storage-in-window-phone-7/) for further details about saving and loading to/from IsolatedStorageFile

# linux - 使用 Altiris DS 6.9 SP5 创建 Linux 的备份映像

> ID：12927720
> 
> 赞同：0
> 
> 时间：2012-10-17T05:34:22.027
> 
> 标签：linux, backup, centos, altiris

我正在使用 Altiris 部署解决方案 6.9 SP5。我想创建 Linux OS/CentOS 的备份映像。我使用以下任务创建了作业：

1.  重启到自动化
2.  创建磁盘映像
3.  重启

由于机器在重新启动后立即进入睡眠状态，因此作业卡在第 2 步。它尝试发送局域网唤醒信号，但这不起作用。

有没有办法让系统保持活动状态，直到作业成功完成。

我试图备份的机器是 B 系列刀片服务器。我在 BIOS 设置中找不到任何电源设置来启用局域网唤醒。

如果上面列出的在 DS 6.9 中创建备份映像的过程不正确，请更正我。

快速帮助表示赞赏。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:32:54.130

当我需要执行备份时，我使用了“快速磁盘映像”选项（右键单击计算机）。将作业设置为不计划，然后根据需要配置任务。

# ruby - Ruby 1.9 中的绿线？

> ID：12927724
> 
> 赞同：3
> 
> 时间：2012-10-17T05:34:38.767
> 
> 标签：ruby, multithreading

与 Ruby 1.8 (MRI) 不同，Ruby 1.9 使用本机线程。

但是是否可以请 Ruby 1.9.3 创建一个绿色线程而不是原生线程？

--

**我为什么要那个？**

用于测试目的。

我正在尝试创建一个简单的 TCP 服务器，它可以接受数千个并发连接，这些连接会在返回一些结果之前休眠几秒钟。

在 Ruby 1.8 中，我可以轻松创建数千个线程，因此并发连接数的唯一限制是操作系统。

在 Ruby 1.9 中，这似乎是不可能的。

这段代码演示了我的意思：

```
require 'thread'

m = Mutex.new
c = 0
ta = Array.new 10000

ta.fill do
  Thread.new do
    m.synchronize { c += 1; p "created #{c}th" if c%100 == 0; }
    sleep 15
    m.synchronize { c -= 1; p "destroyed #{c+1}th" if c%100 == 0; }
  end
end

ta.each {|t| t.join} 
```

它在 Ruby 1.8 中运行得很好，但在 1.9 中它是如此的悲惨。

--

不幸的是，在对 eventmachine 进行了一些试验之后，`add_timer`我能想到的最好的就是 Node.js 服务器：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  setTimeout(function() {res.end('Hello World\n');}, 10000 );
}).listen(8081, '127.0.0.1');
console.log('Server running at http://127.0.0.1:8081/'); 
```

如果有人可以用 EventMachine 证明同样的事情，我会很高兴接受这个答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T06:56:25.767

简而言之，答案是否定的。1.9 中的线程模型现在使用本机线程，而绿色线程本身已被弃用。

确切了解为什么要使用绿色线程而不是操作系统管理的线程来建议适当的替代方案会很有帮助。根据您的用例，您可以考虑使用例如具有某种滚动您自己的调度或**Fibers的****Proc**对象作为本机线程的轻量级替代品。如果您发现线程的创建时间是一个限制因素，您还可以查看线程/光纤池。

# naudio - NAudio 异步音频

> ID：12927741
> 
> 赞同：2
> 
> 时间：2012-10-17T05:36:02.137
> 
> 标签：naudio

我希望能够在应用程序的整个生命周期中异步地将声音文件转储到音频输出。我需要能够请求要播放的文件并将其与任何已经播放的文件混合。同一个文件可能会被调用多次。WaveMixerStream 是要走的路吗？在应用程序的生命周期内保持播放器和混音器流打开是否安全/推荐，还是会导致性能问题？

```
//globals
IWavePlayer _Context;
WaveMixerStream32 _Mixer;

//constructor
_Context = new DirectSoundOut();
_Mixer = new WaveMixerStream32();
_Context.Init( Instance._Mixer );
_Context.Play();

//asynchronous sound output, on demand from user interface
_Mixer.AddInputStream( sound.FileWaveStream ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:33:24.460

有几种方法可以做到这一点，但这里有一种选择。创建一个始终打开的播放器和混音器。我会使用 MixingSampleProvider 作为混音器，通过 SampleToWaveProvider 或 SampleToWaveProvider16 作为播放器的输入。

为了确保播放永不停止，您需要自定义 MixingSampleProvider 以便即使没有活动输入，Read 也始终返回请求的样本数，或者添加一个虚拟输入，它是一个永无止境的静音流。

现在要播放声音，只需将 ISampleProvider（例如 AudioFileReader）传递到混音器的 AddMixerInput 中，它就会播放它。当输入到达末尾时，它会自动删除输入。

另一种方法是为每个要播放的声音创建一个新的播放器对象。缺点是想办法让播放器对象保持活动状态直到播放停止（可能通过存储在字典中，然后在 PlaybackStopped 事件触发时将其释放并取出）。优点是您不需要在不需要时保持声音设备打开，并且您可以轻松地以不同的采样率/通道数播放声音。

# c# - TFS API Item.DownloadFile 不会将项目保存到根路径

> ID：12927743
> 
> 赞同：1
> 
> 时间：2012-10-17T05:36:24.647
> 
> 标签：c#

使用 TFS 2010。

例如

```
VersionControlServer sourceControl; // actually instantiated...

Item item = sourceControl.GetItem("$/TeamProject/SomeOne.txt")

item.DownloadFile("D:\\SomeOne.txt") 
```

DownloadFile 方法成功，但文件 SomeOne.txt 没有放在根路径 D:\ 中。但是将文件保存到 D:\ 的子文件夹中可以正常工作。

MSDN 文档说明如下：

> 本地文件名
> 
> 类型：System.String
> 
> 用于保存下载文件内容的本地路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:00:24.210

我已成功将最新版本的文件下载到您使用此代码实际工作的不同位置..

```
VersionControlServer sourceControl; // actually instantiated...

sourceControl.DownloadFile("$/TeamProject/SomeOne.txt", 0, VersionSpec.Latest, "D:\\SomeOne.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T18:27:02.467

您可能必须以管理员身份运行您的应用程序。在 Windows 的更高版本中，我知道您不允许将文件直接保存到 C: 驱动器的根目录（以及其他特殊文件夹，如 C:\Windows、C:\Program Files 等）而不被提示输入权限，因此可能相同的安全权限也适用于辅助驱动器的根（我没有辅助驱动器来测试它）。

# ruby-on-rails - jquery pageless ruby on rails：模板丢失

> ID：12927748
> 
> 赞同：1
> 
> 时间：2012-10-17T05:36:56.380
> 
> 标签：ruby-on-rails, ruby

我使用 jquery pageless 进行无页滚动。我的文件在游戏控制器中

```
def result
  @game = GameResult.group("game_id").where(@where).order('registered_date desc')
  @results = @game.paginate(:per_page => 3, :page => params[:page])   
  if request.xhr?
    sleep(3) # make request a little bit slower to see loader :-)
    render :partial => @results
  end
end 
```

在 application.html.erb

它有一个包含在 div 标签中的 div 和 yield 文件。

在应用程序助手中，

```
def pageless(total_pages, url=nil, container=nil)
  opts = {
      :totalPages => total_pages,
      :url        => url,
      :loaderMsg  => 'Loading more results',
     # :loaderImage => image_path("load.gif")
    }    
  container && opts[:container] ||= container    
  javascript_tag("$('#results').pageless(#{opts.to_json});")
end 
```

在路线中

```
get '/games' =>'games#result'  
get '/games/result' => 'games#result'
rake route in terminal
games GET    /games(.:format)    games#result 
```

在游戏下的视图中，我有两个文件 - result.html 文件和 _result.html 文件 result.html.erb 文件

```
<%= render(:partial => 'result', :collection => @results) %>
<%= will_paginate(@results) %>
<%= pageless(@results.total_pages,games_path,"#results") %>
<style>#results {overflow:auto;}</style> 
```

_result.html.erb 文件

```
<div style="margin-bottom:3em">
<div><%= result.level %></div>
<div><%= result.game_timing %></div>
</div> 
```

使用此代码，当我向下滚动时，我得到了这样的模板丢失错误。`" Missing partial game_results/game_result with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip]" ....`这段代码有什么问题。

# ruby-on-rails - 应用程序不适用于 js.coffee

> ID：12927749
> 
> 赞同：1
> 
> 时间：2012-10-17T05:37:00.683
> 
> 标签：ruby-on-rails

我刚刚通过控制台启动了一个新项目，并通过添加文件的控制台创建了新的控制器“索引”：

```
create      app/assets/javascripts/index.js.coffee 
```

现在，如果我尝试打开索引/索引，我会看到错误： ExecJS::RuntimeError in Index#index

我在stackoverflow上找到了一些类似的帖子，但是这个线程中的解决方案是我自己做的，没有解决方案：gem "therubyracer" and nodejs is installed

我不知道该怎么做，如果我删除文件 index.js.coffee - 一切正常。Rails 3.2.8 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:40:16.187

您缺少 node.js

```
sudo apt-get install nodejs 
```

# javascript - Keydown/keyup 事件未检测到在 Chrome 中的输入文本字段上按下 Escape 键

> ID：12927752
> 
> 赞同：16
> 
> 时间：2012-10-17T05:37:28.033
> 
> 标签：javascript, jquery, google-chrome, javascript-events

当用户在文本字段上按下转义键时，我想做一些事情。每当在 Safari 和 Firefox 的输入框中按下 Escape 键时，[此代码](http://jsfiddle.net/ghUey/)都会记录，但在 Chrome 中则不会。`27`我还尝试绑定到`keyup`，而不是使用 jQuery（即，只使用原始 Javascript），并尝试使用`keyCode`而不是`which`，这些都没有帮助。顺便说一句，Chrome 似乎对所有其他键（如 Enter、修饰键等）都做得很好。知道发生了什么吗？

注意：我在 Mountain Lion 上使用 Chrome 22.0.1229.94。

更新：顺便说一句，如果有帮助，当我在 Chrome 的输入框上按转义键时，它会失去焦点，而在其他两个浏览器上却没有。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-06T08:27:11.317

终于找到了导致这种情况的原因：[Vimium](https://github.com/philc/vimium) chrome 扩展，它捕获了 Escape 键。

已在此处提交了一个错误：[https](https://github.com/philc/vimium/issues/499) ://github.com/philc/vimium/issues/499 。

# java - SimpleDateFormat 可以在 android 4.0+ 上解析日期，但在 android 2.3 上失败 -

> ID：12927753
> 
> 赞同：1
> 
> 时间：2012-10-17T05:37:29.853
> 
> 标签：java, android, date, simpledateformat

这是由于 android 上的 jdk 版本不同。

```
 String string = "Tue Oct 16 00:00:55 IST 2012";
  Date date = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy").parse(string); 
```

也试过

```
String string = "Tue Oct 16 00:00:55 IST 2012";
Date date = new SimpleDateFormat("EEE MMM dd HH:mm:ss 'UTC' yyyy").parse(string); 
```

在 SimpleDateFormat 构造函数中添加 Locale 无效。

我已经搜索并得到了[这个](https://stackoverflow.com/questions/5016582/android-simpledateformat-fails-to-parse-datetime-works-fine-on-sun-1-6-jre)，但找不到任何解决方法。

有什么解决方法吗？

# asp.net - JQ Grid 工具栏搜索日期列

> ID：12927754
> 
> 赞同：1
> 
> 时间：2012-10-17T05:37:36.930
> 
> 标签：asp.net, jqgrid

我是 JQGrid 的新手，我正在开发一个屏幕，我需要在 JQ Grid 中使用工具栏并相应地执行搜索操作。我的 JqGrid 中有一个日期字段，并且我还在搜索选项中添加了 DtPicker。但是当我从 DTPicker 中选择日期时，不会执行对所选日期的搜索。请让我知道如何搜索选定的日期。

```
 <table id="test">
</table>
<div id="divtest">
</div>
<div>
    <asp:Label ID="count" runat="server" Text="Label"></asp:Label>
</div>

<script type="text/javascript">
  $(document).ready
 (
 function CreateGrid() 
 {

    var lastSel,lastSel1, Status = ["All", "Active", "InActive"],defaultStatus="Active";
    jQuery("#test").jqGrid
    ( 
        {
           url:'Test.aspx',
           datatype:'json',
           contentType: "application/json; charset=utf-8",
           jsonReader: {  
                            root: "rows",
                            page: "page", 
                            total: "total",
                            records: "records",
                            repeatitems: false
                       },  
            colNames:[  'EMPID',
                        'EMPName',
                        'DOB',
                        'Designation',
                        'Genders',
                        'Status',
                        'Remarks',
                        'EMPType',
                        ''
                    ],
            colModel:
                [
                    {
                        name:'EMPID',
                        index:'EMPID',
                        width:120,
                        sorttype:'int',
                        editable:false,
                        key:true,
                        sortable: true,
                        search:true,
                        editoptions:{readonly:true}
                    },
                    {
                        name:'EMPName',
                        index:'EMPName',
                        width:250, 
                        sortable: true,
                        align:"left",
                        editable:true,
                        size:100,
                        editrule:{custom:true,custom_func:checkName}
                    },
                    {
                        name:'DOB',
                        index:'DOB',
                        width:250, 
                        sortable: true,
                        align:"left",
                        size:100,
                        editable:true,
                        sorttype:"date",
                        formatter: "date",
                        formatoptions: {newformat:'m/d/Y'},
                        editrule:{custom:true,custom_func:checkName}
                        ,editoptions:
                                        {"dataInit":function(el)
                                            {setTimeout(function(){if(jQuery.ui){ 
                                                if(jQuery.ui.datepicker) 
                                                { 
                                                    jQuery(el).datepicker({"disabled":false,
                                                    "dateFormat":"mm/dd/yy"
                                                    ,changeMonth: true,
                                                    changeYear: true,
                                                    recreateForm: true});
                                                    jQuery('.ui-datepicker').css({'font-size':'69%'});
                                                } 
                                            }},100);}
                                        }
                        ,searchoptions:
                                    {"dataInit":function(el)
                                        {setTimeout(function(){if(jQuery.ui) {
                                            if(jQuery.ui.datepicker)
                                            { 
                                                jQuery(el).datepicker({"disabled":false,
                                                "dateFormat":"mm/dd/yy"
                                                ,changeMonth: true,
                                                changeYear: true,
                                                recreateForm: true});
                                                jQuery('.ui-datepicker').css({'font-size':'69%'});
                                            }
                                        }},100);}
                                    },
                        search:true
                    },
                    {
                        name:'Designation',
                        index:'Designation',
                        width:250,
                        align:"left",
                        editable:true,
                        size:100,
                        sortable: true,
                        formatter:'select',
                        edittype: 'select', 
                        editoptions: {value:"0:select;1:CEO;2:HR;3:Manager;4:Team Lead;5:Software Engineer; 6:Tester;7:Sales;8:Others"}
                        ,editrule:{custom:true,custom_func:checkDropDown}
                        ,stype:'select',
                        searchoptions:  {
                                            sopt:['eq'],value:":All;1:CEO;2:HR;3:Manager;4:Team Lead;5:Software Engineer;6:Tester;7:Sales;8:Others"
                                        }
                     },
                    {
                        name:'Gender',
                        index:'Gender',
                        width:150,
                        align: 'left',
                        editable:true,
                        size:100,
                        sortable: true,
                        formatter:'select',
                        edittype: 'select',
                        editoptions: {value: "0:select;1:Male;2:Female"},
                        editrule:{custom:true,custom_func:checkDropDown},
                        stype:'select',
                        searchoptions:  {
                                            sopt:['eq'],value:":All;1:Male;2:Female"
                                        }
                    },
                    {
                        name:'Status',
                        index:'Status',
                        width:150,
                        align: 'left',
                        editable:true,
                        size:100,
                        sortable: true,
                        formatter:'select',
                        edittype: 'select', 
                        editoptions: {value: "0:select;1:Active;2:InActive"}
                        ,editrule:{custom:true,custom_func:checkDropDown},
                        stype:'select'
                        ,searchoptions: {
                                           sopt:['eq'],value:":All;1:Active;2:InActive"
                                        }
                    },
                    {
                        name:'Remarks',
                        index:'Remarks',
                        width:150,
                        sortable: true,
                        align:"left",
                        editable:true,
                        edittype:"textarea",
                        editoptions:{rows:'3',cols:'10'},
                        size:100 
                    },
                    {
                        name:'Emptype',
                        index:'Emptype',
                        sortable: true,
                        formatter:'checkbox',
                        editable:true,
                        edittype:"checkbox",
                        stype:'select',
                        searchoptions:  {
                                            sopt:['eq','ne'],value:":All;true:In;false:Out"
                                        }
                    },
                    {
                        name:'action',
                        index: 'action',
                        sortable:false,
                        align:'center',
                        formatter:"actions",
                        formatoptions:{key:true},
                        search:false
                    }
                 ],
            rowNum:10,
            rowList:[2,5,10,15],
            pager:'#divtest',
            viewrecords:true,
            width:0.96*screen.width,height:0.42*screen.height,
            caption:'jqGrid',
            emptyrecords: "No Results Found",
            sortable:true,
            sortorder: "desc",
            search:true,
            ignoreCase:true,
            loadonce:true,
            multiselect: true,
            shrinkToFit:true,forceFit:true
            ,editurl:"Test4.aspx",
            onAfterSaveCell: 
                    function reload(result) 
                    {
                        $("#grid").trigger("reloadGrid"); 
                    } 
            ,onSelectRow: 
                        function (id) 
                        { var tr;
                            if (id && id !== lastSel) 
                            {
                                if (typeof lastSel !== "undefined") 
                                {
                                    $("#test").jqGrid('restoreRow', lastSel);
                                    $("#test").trigger("reloadGrid",[{current:true}]);

                                }
                                lastSel = id;
                            }
                        }
        }
    ).jqGrid('navGrid','#divtest',
                {   edit:false,
                    add:true,
                    del:false,
                    search:false
                },
                //for Edit
                {   
                },
                //for Add
                {  
                    top:0.20*screen.height,
                    left:(screen.width-(0.65*screen.width)),
                    width: 0.35*screen.width,
                    align:'Center',
                    resizeable: true,
                    closeAfterAdd:true,
                    reloadAfterSubmit:true,
                    serializeEditData: function(data)
                                        {
                                              return (data);
                                        },
                    beforeShowForm: function(form)
                                     {
                                        $("#DOB").datepicker
                                        ({
                                            changeMonth: true,
                                            recreateForm: true,
                                            changeYear: true
                                        });
                                     }
                },
                //for Delete
                {  

                },
                //for Search
                {   multipleSearch: true,
                    multipleGroup:true,
                    //showQuery: true,
                    closeOnEscape: true,
                    closeAfterSearch: true,
                    overlay: 0,
                    beforeShowSearch:function() 
                                        {
                                         $("#test")[0].toggleToolbar();
                                        },
                    onClose:        function() 
                                        {
                                         $("#test")[0].toggleToolbar();
                                        }
                }
            ).jqGrid('navButtonAdd','#divtest',
                {
                    caption:" ", 
                    width:'15',
                    buttonicon:"ui-icon-search", 
                    onClickButton: function()
                    { 
                        $("#test")[0].toggleToolbar();
                    }, 
                    position:"last"
                })
            //For displaying the blank tool bar on the grid
            .jqGrid('filterToolbar',
                {
                    stringResult: true,
                    searchOnEnter: false,
                    defaultSearch: "cn"
                }
            )
            .jqGrid('inlineNav',"#pager",{ 
                                            edit:false, 
                                            editicon: "ui-icon-pencil",
                                            add:true,
                                            addicon:"ui-icon-plus",
                                            cancel: true,
                                            cancelicon:"ui-icon-cancel",
                                            save: true,
                                            saveicon:"ui-icon-disk"
                                        }    
                    );
            //The Date DTPicker field in the Edit portion.
            var initDateEdit = 
                             function(elem)
                            {
                                setTimeout(function() 
                                {
                                    $(elem).datepicker(
                                    {
                                        dateFormat: 'mm/dd/yy',
                                        autoSize: true,
                                        //showOn: 'button', 
                                        changeYear: true,
                                        changeMonth: true,
                                        showButtonPanel: true,
                                        recreateForm: true,
                                        showWeek: true
                                    });
                                },100);
                            }
                            ,
                 //The Date DTPicker field in the Search portion.
                 //But not working in this.
                initDateSearch = 
                              function(elem)
                             {
                                setTimeout(function()
                                 {
                                    $(elem).datepicker(
                                    {
                                        dateFormat: 'mm/dd/yy',
                                        autoSize: true,
                                        //showOn: 'button', 
                                        changeYear: true,
                                        changeMonth: true,
                                        showButtonPanel: true,
                                        recreateForm: true,
                                        showWeek: true
                                    });
                                },100);
                              }
                ;
                //To hide the check box or select box in the Header of the JQGrid.
                var myGrid = $("#test");
                $("#cb_"+myGrid[0].id).hide();

                var grid = $("#test"),
                getColumnIndexByName = function (grid, columnName)
                 {
                    var cm = grid.jqGrid('getGridParam', 'colModel'), i, l = cm.length;
                    for (i = 0; i < l; i++) 
                    {
                    if (cm[i].name === columnName) 
                        {return i;}
                    }
                    return -1;
                };
          }             
   );
</script> 
```

谢谢和问候， NMB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:53:22.913

您只需要在过滤器工具栏之后添加它..

.change(function(){$("#table_ID")[0].toggleToolbar()})

# php - 从客户端获取 MAC Id

> ID：12927757
> 
> 赞同：0
> 
> 时间：2012-10-17T05:38:01.420
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何在 PHP 中获取已连接客户端的 MAC 和 IP 地址？](https://stackoverflow.com/questions/1420381/how-can-i-get-the-mac-and-the-ip-address-of-a-connected-client-in-php)

是否有可能获取`MAC`正在浏览我的网站的客户的 ID..

可以用`javascript`//吗`jquery`？`php`

我尝试使用下面的 Javascript

```
alert(document.getElementsByTagName("MAC ID")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:42:00.723

不可移植，也不使用纯 javascript。（而且 php 只在服务器端运行，所以也不能从 php 运行）。

如果您愿意使用 active-x 控件，或者可能是一个 java 小程序（我不确定那个），您也许可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:42:48.007

如果mac是指网卡的mac地址，则不能。

php在服务器端工作，所以它不能从客户端读取信息，除了浏览器发送的信息。

Javascript（和相关）只能访问系统的一个非常受限的区域，即浏览器本身和呈现的文档；您可以在其中包含 cookie，但实际上它们是页面的一部分。

另一方面，像 activex 这样的技术，在受限环境中，如 Intranet，由于与系统的固有连接，可以做到这一点，但仅限于 Windows 客户端。

再见

# gps - 用于 Arduino 的 U-blox 库

> ID：12927760
> 
> 赞同：2
> 
> 时间：2012-10-17T05:38:06.063
> 
> 标签：gps, arduino

我需要将以太网 Arduino 连接到[U-blox](http://en.wikipedia.org/wiki/U-blox) GPS 芯片。我知道有很多库版本（GPS_UBLOX），但哪一个是一个好的起点？一个有一些花里胡哨的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T23:45:26.673

[来自http://www.diydrones.com](http://www.diydrones.com)的 APM 无人机项目的 gps 系统包含带有可选功能的 UBLOX。

[ArduCopter GPS Git](https://code.google.com/p/ardupilot-mega/source/browse/#git/libraries/AP_GPS)

它包括在未来使用#define 切换 gps 类型、确定修复类型以及可选地通过有效的遥测流传输数据的能力。GPS部分很容易提取，其余部分相当复杂。

您将在 gps 库中看到 UBLOX 代码。您还将在库下方找到一个示例，这样您就不必深入研究主程序代码来使其工作。

我没有连接到项目

# ms-access - SQL MS Access 查询从表单文本框中获取文本值

> ID：12927761
> 
> 赞同：1
> 
> 时间：2012-10-17T05:38:06.660
> 
> 标签：ms-access, vba, ms-access-2007

我通过 MS Access 编写了一个“非常”长的查询，其中包含很多联合（大约 30 个）和其他动态变量。

现在，我需要在所有这些联合中插入一个“Where”子句，并且 where 子句将是常量并通过表单生成（选择一些选项，我编写了一个 vb 代码来创建一个包含 where 子句的字符串。

有什么方法可以在 SQL 查询中使用一些变量，以便变量从表单操作的文本结果中获取 where 子句？

说明：我的查询

```
Select a,b,c,d from
   (select x as a,b,c,d from abc <where clause> union
    select y as a,b,c,d from abc <where clause> union
    select z as a,b,c,d from abc <where clause> union
    select p as a,b,c,d from abc <where clause>)
order by a 
```

应该填充文本框结果，该结果类似于“where b=1”

我想在 VB 代码本身中编写它，但是由于查询的大量换行和变化性质，我不想在每行的末尾手动添加“ & _”。

任何帮助将不胜感激。

问候， 导航

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:22:24.377

您可以像这样编写 WHERE 子句：

```
WHERE B=[Forms]![FormName]![FieldName] 
```

所以它从表单中获取值。但是，如果我理解正确的话，表格中不仅有条件，还有整个 where 子句，可能是*'where b=1'*但也可能是*'where c=4'*或*'where a=2和 b=6'*？

我认为对此没有完美的解决方案，您不能使用普通 Access，但必须编写一些 VBA 代码，并且可以使用以下内容生成查询字符串：

```
$src_query = "Select a,b,c from abc <where clause> union select ..."
$src_query = Replace($src_query,
                     "<where clause>",
                     [Forms]![FormName]![WhereClause]) 
```

那么您只需以编程方式修改查询：

```
CurrentDb.QueryDefs("QueryName").SQL = $src_query 
```

现在您的查询已准备好执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:01:53.117

您可以将`Where`子句放在单独的查询中，而不是更改原始

```
Select * 
from MyQuery
Where (a=1 and b=7) or (c=3 and d="StackOverflow") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:38:51.173

通过很少的家庭作业，我发现了如何将文本文件的内容分配给一个变量。然后，我可以使用“Fthiella”给出的代码片段来更改变量。

# javascript - 创建实例动态javascript

> ID：12927762
> 
> 赞同：0
> 
> 时间：2012-10-17T05:38:29.610
> 
> 标签：javascript, oop

我有一些方法的功能。

```
function acpwindow(){
   this.gui=function(){
            //some stuff
          }
   this.update=function(){
             //some stuff    
          }

} 
```

现在我想创建该函数的多个实例。

我有一个创建窗口的按钮。onclick 新窗口将触发；

```
function createwindow(){
     var object1= new acpwindow();
/*
**Here is a problem I have, How to maintain the objects unique.**
*/
} 
```

当用户在 windows gui 上进行一些操作时，这些请求发送到服务器，然后服务器将响应这些请求。

**现在我的另一个问题是如何根据响应更新特定窗口。**

我唯一的希望是我将为每个请求生成一个唯一的 UUID，并且相同的 UUID 将在响应中返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:58:46.670

我认为如果您创建某种窗口管理器来管理您创建的窗口，发送和处理请求可能会更容易。就像是：

[http://jsfiddle.net/v3T94/1/](http://jsfiddle.net/v3T94/1/)

在示例中，如果有必要，您可以使用该`id`属性。否则，如果您在调用时跟踪引用`sendRequest`，您应该能够在正确的`acpwindow`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:20:09.537

保持这种连接的标准方法是使用**闭包**。

例如，如果你写

```
function make_timer()
{
    var x = document.createElement("div");
    var count = 0;
    setInterval(function(){
        count += 1;
        x.textContent = count;
    }, 1000);
    return x;
} 
```

每次调用`make_timer`都会创建一个独立的 DOM 节点，其中的内容每秒都会递增。但是计时器回调如何记住需要递增的节点呢？答案是传递给的`setInterval`确实不是一个函数而是一个**闭包**，即一个函数加上一些变量（`count`在`x`这种情况下）。

像 Java 或 C++ 这样的语言没有这个概念，但发生的情况是创建的函数，如果它们来自外部范围，它也被称为“捕获”局部变量，即使外部范围内它也会保持它们“活着”导致它们结束的函数结束（即当函数`make_counter`退出时）。

同样可以用于 ajax 请求。您通常所做的只是将窗口对象传递给提交请求的函数，回调**闭包**将用作完成和错误回调。当答案从服务器返回时，闭包将可以访问相应的窗口对象。

## 编辑

如果您真的想使用`ID`s 那么当然可以...在您的示例中，它们存储在一个数组中，因此必须遍历该数组以查找确切的`ID`...

```
var windowid=$("#guiid").val();
for (var i=0; i<window_manager.windows.length; i++)
    if (window_manager.windows[i].id == windowid)
        window_manager.windows[i].gui(); 
```

使用对象而不是数组会更好，因为在这种情况下，搜索可以简化为单个类似：

```
var windowid=$("#guiid").val();
window_manager.windows[windowid].gui(); 
```

但是请注意，在许多情况下，Javascript 中不需要数字 ID，因为您可以存储窗口 ID 的位置，而不是存储*对窗口对象本身的引用*，并且对于回调，不需要复杂的机制来提供上下文（就像在 C++ 或 Java 中是必需的），因为你有闭包。

# debugging - 从 Windows CE 6.0 上的大型应用程序分离后，调试器不会释放内存

> ID：12927763
> 
> 赞同：2
> 
> 时间：2012-10-17T05:38:41.470
> 
> 标签：debugging, visual-studio-2008, windows-ce, ram

我们有几个运行来自不同供应商的 CE 6 的设备。当我将 VS2008SP1 调试器附加到我们的（相当大的）应用程序时，它会占用设备上的所有 RAM。当我分离时，设备上的内存没有被释放。如果我尝试重新连接，则没有足够的 RAM 并且设备挂起。在调试器下启动需要更多 RAM，有时根本无法启动。

我们的应用程序很大（80MB）并且显式加载了它的一半模块，但是当我附加/分离/附加调试器时我当然不会重新加载模块。

据说其中一台设备的固件带有 2011 年 12 月的 CE6 更新汇总包。是否有一些针对我们的 VS2008 补丁，或者我们可以要求供应商安装一些针对 CE 6 的补丁？

# iphone - iOS 框架单元测试

> ID：12927764
> 
> 赞同：1
> 
> 时间：2012-10-17T05:38:48.580
> 
> 标签：iphone, unit-testing

我创建了一个 iOS 框架，并希望在我的一个应用程序中使用该框架。

我的问题是关于框架的单元测试。我已阅读有关内置 xcode unittest 框架的信息，但不确定如何开始测试该框架。

或者我是否必须在我的一个应用程序中导入框架，然后通过执行框架测试

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:43:57.283

为您的项目添加一个新目标，选择 Others -> Cocoa Touch Unit Testing Bundle，为其命名。

将 Compile Sources 和 Link Binary 添加到新目标。并在您的测试类中编写您需要的测试。

# optimization - 如何避免在循环中使用 ACL hasPermission 进行多个数据库查询

> ID：12927766
> 
> 赞同：0
> 
> 时间：2012-10-17T05:39:07.513
> 
> 标签：optimization, symfony, doctrine-orm, acl

我正在使用 Symfony2、Doctrine 和 ACL，但遇到了性能问题。

在 Twig 模板中，我需要检查集合中每个公司的当前用户角色以显示链接：

```
{%- if is_expr_granted("hasRole('ROLE_SUPPORT') or hasPermission(object, 'OPERATOR')", company) -%}
    <a href="configure">{{- company.name -}}</a>
{%- else -%} 
```

我可以在 webProfiler 中看到为每个公司生成了以下 2 个查询：

```
SELECT a.ancestor_id
FROM acl_object_identities o 
INNER JOIN acl_classes c ON c.id = o.class_id INNER JOIN acl_object_identity_ancestors a ON a.object_identity_id = o.id
WHERE ((o.object_identifier = '154' AND c.class_type = 'St\\CoreBundle\\Entity\\Company'))` 
```

和

```
SELECT o.id as acl_id, o.object_identifier, o.parent_object_identity_id, o.entries_inheriting, c.class_type, e.id as ace_id, e.object_identity_id, e.field_name, e.ace_order, e.mask, e.granting, e.granting_strategy, e.audit_success, e.audit_failure, s.username, s.identifier as security_identifier 
FROM acl_object_identities o
INNER JOIN acl_classes c ON c.id = o.class_id
LEFT JOIN acl_entries e
    ON ( e.class_id = o.class_id AND (e.object_identity_id = o.id OR e.object_identity_id IS NULL) ) 
LEFT JOIN acl_security_identities s ON ( s.id = e.security_identity_id )
WHERE (o.id =2189) 
```

如何避免循环查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:27:18.553

Acl 身份可以在一个查询中预加载。看到这个问题：[How do one use ACL to filter a list of domain-objects based on a certain user's permissions (eg EDIT)?](https://stackoverflow.com/questions/6621220/how-do-one-use-acl-to-filter-a-list-of-domain-objects-according-to-a-certain-use)

你将不得不向你的控制器添加这样的东西

```
// you entities
$companies = ...

// the acl provider
$aclProvider = $this->get('security.acl.provider');

// build up array of object identities
$oids = array();
foreach ($companies as $company) {
  $oids[] = ObjectIdentity::fromDomainObject($company);
}

// preload acls
$aclProvider->findAcls($oids); // preload Acls from database 
```

# android - Hello World Map (ArcGIS) - Eclipse 的模拟器无法正确运行 ArcGIS 应用程序

> ID：12927772
> 
> 赞同：0
> 
> 时间：2012-10-17T05:39:18.827
> 
> 标签：android, eclipse, emulation, arcgis

我按照本[教程的](http://help.arcgis.com/en/arcgismobile/10.0/apis/android/help/index.html#//011900000005000000)步骤进行操作。我将我的项目命名为“HelloWorld3”而不是“HelloWorld”。我仔细地执行了所有步骤，并在我的“HelloWorldActivity.java”中删除了已经存在的内容（默认情况下），如下所示：

```
package com.esri.arcgis.android.samples.helloworld3;

import android.app.Activity;
import android.os.Bundle;

import com.esri.android.map.MapView;

public class HelloWorld3Activity extends Activity {

    MapView mMapView ;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mMapView = new MapView(this);

    }

    @Override 
    protected void onDestroy() { 
        super.onDestroy();
 }
    @Override
    protected void onPause() {
        super.onPause();
        mMapView.pause();
 }
    @Override   protected void onResume() {
        super.onResume(); 
        mMapView.unpause();
    }

} 
```

我改变了以前的代码，并把这个代码改为：

```
public class HelloWorldActivity extends Activity {
    MapView map = null;

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Retrieve the map and initial extent from XML layout
        map = (MapView)findViewById(R.id.map);
        // Add dynamic layer to MapView
        map.addLayer(new ArcGISTiledMapServiceLayer("" +
        "http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"));

    }

    protected void onPause() {
        super.onPause();
        map.pause();
    }

    protected void onResume() {
        super.onResume();
        map.unpause();
    }
} 
```

（我遵循了教程中提到的内容，但我绝对将其命名为“HelloWorld3Activity”）

然后，我的代码变成了这样：

```
package com.esri.arcgis.android.samples.helloworld3;

import android.app.Activity;
import android.os.Bundle;

import com.esri.android.map.MapView;

public class HelloWorld3Activity extends Activity {

    MapView map = null;

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Retrieve the map and initial extent from XML layout
        map = (MapView)findViewById(R.id.map);
        // Add dynamic layer to MapView
        map.addLayer(new ArcGISTiledMapServiceLayer("" +
        "http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"));

    }

    protected void onPause() {
        super.onPause();
        map.pause();
    }

    protected void onResume() {
        super.onResume();
        map.unpause();
    }

} 
```

但是，“ArcGISTiledMapServiceLayer”下面有一个红色的下划线！！

问题是什么？！我不知道该怎么办！

![在此处输入图像描述](../Images/8c4e149a7006311e1c70e6c6e818421b.png)

我尝试通过单击 Ctrl+Shift+O >> 来更新丢失的导入来解决问题（希望它能解决问题。红色下划线消失了，我的代码变成了这样：

```
package com.esri.arcgis.android.samples.helloworld3;

import android.app.Activity;
import android.os.Bundle;

import com.esri.android.map.MapView;
import com.esri.android.map.ags.ArcGISTiledMapServiceLayer;

public class HelloWorld3Activity extends Activity {

    MapView map = null;

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Retrieve the map and initial extent from XML layout
        map = (MapView)findViewById(R.id.map);
        // Add dynamic layer to MapView
        map.addLayer(new ArcGISTiledMapServiceLayer("" +
        "http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"));

    }

    protected void onPause() {
        super.onPause();
        map.pause();
    }

    protected void onResume() {
        super.onResume();
        map.unpause();
    }

} 
```

之后，我尝试运行它。我右键单击我的项目“HelloWorld3”，然后单击 Run as > Android Application。模拟器启动了，我找到了我的应用程序的图标。但是，当我点击它时，出现了这个屏幕（或窗口）。

![在此处输入图像描述](../Images/f9bde2ac41f85462687a43c0fbdc4470.png)

问题是什么？！请帮我！！

*** 这是我之前的相关问题“ [Eclipse's Emulator (ArcGIS Android App)?](https://stackoverflow.com/questions/12926894/eclipses-emulator-arcgis-android-app) ”

我不确定，但我认为这是 Logcat：

```
10-17 12:38:19.820: I/dalvikvm(557): threadid=3: reacting to signal 3
10-17 12:38:19.871: I/dalvikvm(557): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:19.911: D/dalvikvm(557): Trying to load lib /data/data/com.esri.arcgis.android.samples.helloworld3/lib/libGLMapCore.so 0x412a6680
10-17 12:38:20.320: I/dalvikvm(557): threadid=3: reacting to signal 3
10-17 12:38:20.371: I/dalvikvm(557): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:20.582: D/dalvikvm(557): Added shared lib /data/data/com.esri.arcgis.android.samples.helloworld3/lib/libGLMapCore.so 0x412a6680
10-17 12:38:20.601: W/ApplicationContext(557): Unable to create external cache directory
10-17 12:38:20.820: I/dalvikvm(557): threadid=3: reacting to signal 3
10-17 12:38:20.851: I/dalvikvm(557): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:21.711: W/ApplicationContext(557): Unable to create external cache directory
10-17 12:38:22.021: D/libEGL(557): Emulator without GPU support detected. Fallback to software renderer.
10-17 12:38:22.021: D/libEGL(557): loaded /system/lib/egl/libGLES_android.so
10-17 12:38:22.101: W/dalvikvm(557): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
10-17 12:38:22.122: D/gralloc_goldfish(557): Emulator without GPU emulation detected.
10-17 12:38:22.132: E/AndroidRuntime(557): FATAL EXCEPTION: GLThread 75
10-17 12:38:22.132: E/AndroidRuntime(557): java.lang.IllegalArgumentException: No configs match configSpec
10-17 12:38:22.132: E/AndroidRuntime(557):  at com.esri.android.map.MapSurface$a.chooseConfig(Unknown Source)
10-17 12:38:22.132: E/AndroidRuntime(557):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1009)
10-17 12:38:22.132: E/AndroidRuntime(557):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1362)
10-17 12:38:22.132: E/AndroidRuntime(557):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
10-17 12:38:29.820: D/dalvikvm(557): GC_CONCURRENT freed 320K, 5% free 9217K/9607K, paused 6ms+8ms
10-17 12:38:31.741: I/Process(557): Sending signal. PID: 557 SIG: 9
10-17 12:38:38.980: I/dalvikvm(585): threadid=3: reacting to signal 3
10-17 12:38:39.121: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:39.371: D/dalvikvm(585): Trying to load lib /data/data/com.esri.arcgis.android.samples.helloworld3/lib/libGLMapCore.so 0x4129e4c8
10-17 12:38:39.490: I/dalvikvm(585): threadid=3: reacting to signal 3
10-17 12:38:39.532: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:39.892: D/dalvikvm(585): Added shared lib /data/data/com.esri.arcgis.android.samples.helloworld3/lib/libGLMapCore.so 0x4129e4c8
10-17 12:38:39.900: W/ApplicationContext(585): Unable to create external cache directory
10-17 12:38:40.001: I/dalvikvm(585): threadid=3: reacting to signal 3
10-17 12:38:40.033: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:40.501: I/dalvikvm(585): threadid=3: reacting to signal 3
10-17 12:38:40.530: W/ApplicationContext(585): Unable to create external cache directory
10-17 12:38:40.562: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:40.780: D/libEGL(585): Emulator without GPU support detected. Fallback to software renderer.
10-17 12:38:40.780: D/libEGL(585): loaded /system/lib/egl/libGLES_android.so
10-17 12:38:40.911: D/gralloc_goldfish(585): Emulator without GPU emulation detected.
10-17 12:38:40.921: W/dalvikvm(585): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
10-17 12:38:40.971: E/AndroidRuntime(585): FATAL EXCEPTION: GLThread 78
10-17 12:38:40.971: E/AndroidRuntime(585): java.lang.IllegalArgumentException: No configs match configSpec
10-17 12:38:40.971: E/AndroidRuntime(585):  at com.esri.android.map.MapSurface$a.chooseConfig(Unknown Source)
10-17 12:38:40.971: E/AndroidRuntime(585):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1009)
10-17 12:38:40.971: E/AndroidRuntime(585):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1362)
10-17 12:38:40.971: E/AndroidRuntime(585):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
10-17 12:38:41.011: I/dalvikvm(585): threadid=3: reacting to signal 3
10-17 12:38:41.041: I/dalvikvm(585): Wrote stack traces to '/data/anr/traces.txt'
10-17 12:38:42.511: D/dalvikvm(585): GC_CONCURRENT freed 306K, 4% free 9231K/9607K, paused 20ms+123ms
10-17 12:38:54.530: I/Process(585): Sending signal. PID: 585 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:10:33.183

最初发布适用于 Android 的 ArcGIS API 时，由于缺乏 OpenGL ES 2.0 支持，模拟器不支持它。然而，情况发生了变化。看看[这个](http://blogs.esri.com/esri/arcgis/2012/05/02/arcgis-runtime-sdk-for-android-v1-1-supports-android-emulator/)。您可能需要对目标环境进行一些更改/安装一些额外的软件包。

# jquery - 通过类名缩小 jquery 复选框选择

> ID：12927778
> 
> 赞同：0
> 
> 时间：2012-10-17T05:40:02.520
> 
> 标签：jquery, filter, selector, selected, checked

我只想禁用选中且具有特定类的复选框。有很多非常相似的问题，但我找不到任何能够让它工作的东西。

[http://jsfiddle.net/silvajeff/snfDM/](http://jsfiddle.net/silvajeff/snfDM/)

在下面的示例中，仅应禁用第二项：

```
 HTML:
  <input type="checkbox" class='boundParent' />
  <input type="checkbox" class='boundParent' checked/>
  <input type="checkbox" class="boundChild" />
  <input type="checkbox" class="boundChild" />

  Javascript:
  $('[input:checked][class*="boundParent"]').prop("disabled", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:45:03.713

```
$("input.boundParent:checked").prop("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:43:35.597

```
 $('input[type="checkbox"][class*="boundParent"]:checked').prop("disabled", true); 
```

或者

```
$(':checkbox:checked[class="boundParent"]').prop("disabled", true); 
```

或者

```
$(':checkbox:checked.boundParent').prop("disabled", true); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/snfDM/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:44:16.893

```
$(':checkbox:checked[class*="boundParent"]').prop("disabled", true); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:45:28.457

```
$('input[type="checkbox"]').is(":checked").hasClass("boundChild").prop("disableb",true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T05:48:26.863

用这个

```
$('.runTest').click(function(){
    $('input[class^="bound"]:checked').prop("disabled", true);
}); 
```

​ 你可以在这里查看 [http://jsfiddle.net/9D8Xw/1/](http://jsfiddle.net/9D8Xw/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T05:50:47.970

检查这个[小提琴](http://jsfiddle.net/RCjgQ/)

```
$('.boundParent:checked').prop("disabled", true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T06:02:49.937

我能想到的最简洁的形式是

```
$('input.boundParent[type=checkbox]:checked').prop("disabled", true); 
```

我对其他答案有一些评论

```
// will select radioboxes as well 

$("input.boundParent:checked").prop("disabled", true);

// :checkbox is deprecated now

$(':checkbox:checked[class*="boundParent"]').prop("disabled", true); 
```

# joomla - joomla的自定义组件中的多图像上传

> ID：12927780
> 
> 赞同：0
> 
> 时间：2012-10-17T05:40:08.703
> 
> 标签：joomla, image-uploading

我试过[http://docs.joomla.org/Creating_a_file_uploader_in_your_component](http://docs.joomla.org/Creating_a_file_uploader_in_your_component)但首先它显示 Error: 500 经过一些研究我删除了代码

`"'.$session->getName().'" : "'.$session->getId().'", "format" : "raw"`

并且错误消失了。现在图片没有上传到任何地方（我已经设置了路径'/images/'文件夹）我对上传图片的代码感到困惑第5部分在哪里使用这个代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:50:54.660

```
function storeImageFile()
    {
        jimport('joomla.filesystem.file');
        jimport('joomla.filesystem.folder' );

        $path = 'PATH_GOES_HERE'.'designs'.DS;

        $folder_permissions = "0755";
        $folder_permissions = octdec((int)$folder_permissions);

        //create folder if not exists
        if (!JFolder::exists($path)){
           JFolder::create($path, $folder_permissions);          
        }        

        $file           = JRequest::getVar('design_images', null, 'files', 

        $count = count($file['name']);

        for($i=0;$i<$count;$i++)
        {
            //$i is the array position of the $_FILES array

            if(empty($file['tmp_name'][$i]))
            {
                return false;
            }

            //Clean up filename to get rid of strange characters like spaces etc
            $filename = JFile::makeSafe($file['name'][$i]);

            //setting source and destination
            $temporary_name = $file['tmp_name'][$i];
            $filename       = str_replace(' ', '_', $file['name'][$i]);
            $dest           = $path.$filename;

            if(JFile::upload($temporary_name, $dest))
            {
                echo "File Upload Successful";
                return true;
            }

        }

    } 
```

# android - 从本地 xml 解析 XML

> ID：12927781
> 
> 赞同：2
> 
> 时间：2012-10-17T05:40:08.360
> 
> 标签：android, xml, parsing, local

我正在从 URL 解析 XML。从原始文件夹中解析相同的 XML 文件进行了哪些更改。对如何减少代码有任何想法吗？

这是我的 xml 文件：umesh.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appdata>
<brand name="Lovely Products">
<product>Hat</product>
<product>Gloves</product>
</brand>
<brand name="Great Things">
<product>Table</product>
<product>Chair</product>
<product>Bed</product>
</brand>
</appdata> 
```

下面是我的java文件：

1.  **数据处理程序.java**

    ```
    package com.umesh.xmlparsing;

    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.net.URL;
    import java.net.URLConnection;
    import java.util.ArrayList;

    import javax.xml.parsers.SAXParser;
    import javax.xml.parsers.SAXParserFactory;

    import org.xml.sax.Attributes;
    import org.xml.sax.InputSource;
    import org.xml.sax.SAXException;
    import org.xml.sax.XMLReader;
    import org.xml.sax.helpers.DefaultHandler;

    import android.content.Context;
    import android.content.res.XmlResourceParser;
    import android.graphics.Color;
    import android.util.Log;
    import android.widget.TextView;

    public class DataHandler extends DefaultHandler{

    //list for imported product data
    private ArrayList<TextView> theViews;
    //string to track each entry
    private String currBrand = "";
    //flag to keep track of XML processing
    private boolean isProduct = false;
    //context for user interface
    private Context theContext;
    //constructor
    public DataHandler(Context cont) {
        super();
        theViews = new ArrayList<TextView>();
        theContext = cont;
    }

    //start of the XML document
    public void startDocument () { Log.i("DataHandler", "Start of XML document"); }

    //end of the XML document
    public void endDocument () { Log.i("DataHandler", "End of XML document"); }

    //opening element tag
    public void startElement (String uri, String name, String qName, Attributes atts)
    {
        //handle the start of an element

        //find out if the element is a brand
        if(qName.equals("brand"))
        {
            //set product tag to false
            isProduct = false;
            //create View item for brand display
            TextView brandView = new TextView(theContext);
            brandView.setTextColor(Color.rgb(73, 136, 83));
            //add the attribute value to the displayed text
            String viewText = "Items from " + atts.getValue("name") + ":";
            brandView.setText(viewText);
            //add the new view to the list
            theViews.add(brandView);
        }
        //the element is a product
        else if(qName.equals("product"))
            isProduct = true;
    }

    //closing element tag
    public void endElement (String uri, String name, String qName)
    {
        //handle the end of an element
        if(qName.equals("brand"))
        {
            //create a View item for the products
            TextView productView = new TextView(theContext);
            productView.setTextColor(Color.rgb(192, 199, 95));
            //display the compiled items
            productView.setText(currBrand);
            //add to the list
            theViews.add(productView);
            //reset the variable for future items
            currBrand = "";
        }
    }

    //element content
    public void characters (char ch[], int start, int length)
    {
        //process the element content
        //string to store the character content
        String currText = "";
        //loop through the character array
        for (int i=start; i<start+length; i++)
        {
            switch (ch[i]) {
            case '\\':
                break;
            case '"':
                break;
            case '\n':
                break;
            case '\r':
                break;
            case '\t':
                break;
            default:
                currText += ch[i];
                break;
            }
        }
        //prepare for the next item
        if(isProduct && currText.length()>0)
            currBrand += currText+"\n";
    }

    public ArrayList<TextView> getData()
    {
        //take care of SAX, input and parsing errors
        try
        {
                //set the parsing driver
            System.setProperty("org.xml.sax.driver","org.xmlpull.v1.sax2.Driver");
                //create a parser
            SAXParserFactory parseFactory = SAXParserFactory.newInstance();
            SAXParser xmlParser = parseFactory.newSAXParser();
                //get an XML reader
            XMLReader xmlIn = xmlParser.getXMLReader();
                //instruct the app to use this object as the handler
            xmlIn.setContentHandler(this);
                //provide the name and location of the XML file **ALTER THIS FOR YOUR FILE**
            URL xmlURL = new URL("http://mydomain.com/umesh.xml");

                //open the connection and get an input stream
            URLConnection xmlConn = xmlURL.openConnection();
            InputStreamReader xmlStream = new InputStreamReader(xmlConn.getInputStream());

                //build a buffered reader
            BufferedReader xmlBuff = new BufferedReader(xmlStream);

            //   uuu   XmlResourceParser todolistXml = getResources().getXml(R.raw.c4mh_clinics);
                //parse the data
            xmlIn.parse(new InputSource(xmlBuff));
        }
        catch(SAXException se) { Log.e("AndroidTestsActivity", 
                "SAX Error " + se.getMessage()); }
        catch(IOException ie) { Log.e("AndroidTestsActivity", 
                "Input Error " + ie.getMessage()); }
        catch(Exception oe) { Log.e("AndroidTestsActivity", 
                "Unspecified Error " + oe.getMessage()); }
            //return the parsed product list
        return theViews;
    }

    } 
    ```

2.  **XMLParsing.java**

    ```
    package com.umesh.xmlparsing;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class XMLParsing extends Activity {

    TextView tv;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //get a reference to the layout
        LayoutInflater inflater = getLayoutInflater();
        LinearLayout mainLayout = (LinearLayout) inflater.inflate(R.layout.main,null);
        try
        {
                //create an instance of the DefaultHandler class 
                //**ALTER THIS FOR YOUR CLASS NAME**
            DataHandler handler = new DataHandler(getApplicationContext());
                //get the string list by calling the public method
            ArrayList<TextView> newViews = handler.getData();
                //convert to an array
            Object[] products = newViews.toArray();
                //loop through the items, creating a View item for each
            for(int i=0; i<products.length; i++)
            {
                //add the next View in the list
                mainLayout.addView((TextView)products[i]);
            }
        }
        catch(Exception pce) { Log.e("AndroidTestsActivity", "PCE "+pce.getMessage()); }

        setContentView(mainLayout);
    }

    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:18:46.820

请参阅我的答案的以下链接，它将解决您的问题。

[本地 XML 解析](https://stackoverflow.com/questions/12435177/load-local-xml-data-in-listview-in-android/12435481#12435481)

# python - parseString 有效，scanString 失败？

> ID：12927787
> 
> 赞同：3
> 
> 时间：2012-10-17T05:40:37.130
> 
> 标签：python, pyparsing

在 parseString 给出正确结果的情况下，使 scanString 无法正常工作。

此序列有效：

```
alpha_rev = pyp.Word(pyp.alphas, max=2)
num_rev = pyp.Word('123456789', max=2)
space = pyp.White(ws=" ").suppress()

revisionExpr = (
    pyp.StringStart().leaveWhitespace() +
    space +
    pyp.Combine(alpha_rev + 
    pyp.Optional(num_rev)("rev"))
    )

rev_string = ' K        WI, This is the title'

for match_str, start, end in (
    revisionExpr.scanString(rev_string, maxMatches=1)):
    print match_str

['K'] 
```

有时会有“Rev”或“Rev”。修订前；这失败了：

```
revisionExpr = (
    pyp.StringStart().leaveWhitespace() +
    space +
    pyp.Combine(alpha_rev + 
    pyp.Optional(num_rev)("rev"))
    |
    pyp.CaselessLiteral("Rev") + pyp.Optional('.') + 
    pyp.Combine(alpha_rev + 
    pyp.Optional(num_rev)("rev"))
    )

for match_str, start, end in (
    revisionExpr.scanString(rev_string, maxMatches=1)):
    print match_str

print match_str
NameError: name 'match_str' is not defined 
```

为什么是“|” 导致比赛失败？请注意，这适用于第一个和第二个示例：

```
revisionTokens = revisionExpr.parseString(rev_string) 
```

如果我将最后一个示例的第二部分（“|”之后）提取为与第一个示例类似的形式，则添加“Rev”即可。在 rev_string 中的“K”前面。不幸的是，第一个表达式中的前导空格是唯一标识修订字符串所必需的，否则，在此示例中，“WI”将匹配。

我正在尝试使用 scanString 而不是 parseString 因为它返回匹配的开始和结束位置，这有助于稍后的处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:19:20.303

问题是您的“或”运算符（“|”）只是直接查看它左右两侧的元素。您没有正确分组语法元素。这是您的语法细分：

```
left_expr = pyp.Combine(alpha_rev + pyp.Optional(num_rev)("rev")
right_expr = pyp.CaselessLiteral("Rev")

joined_expr = left_expr | right_expr

final_expr = (pyp.StringStart().leaveWhitespace() +
    space +
    joined_expr +
    pyp.Optional('.') +
    pyp.Combine(alpha_rev +
      pyp.Optional(num_rev)("rev"))
    ) 
```

如您所见，这并不是您想要的——它将查找文本“Rev”或实际修订，然后是另一个修订。表达式的固定版本如下：

```
revisionExpr = (
    pyp.StringStart().leaveWhitespace() +
    space +
    (
        pyp.Combine(alpha_rev +
            pyp.Optional(num_rev)("rev")
        )
        |
        (
            pyp.CaselessLiteral("Rev") + 
            pyp.Optional('.') +
            pyp.Combine(alpha_rev +
                pyp.Optional(num_rev)("rev"))
        )
    )
) 
```

但是，您可以使语法更简洁：

```
revisionExpr = (
    pyp.StringStart().leaveWhitespace() +
    space +
    pyp.Suppress(
        pyp.Optional(
            pyp.CaselessLiteral("Rev") + 
            pyp.Optional('.')
        )
    ) +
    pyp.Combine(
        alpha_rev +
        pyp.Optional(num_rev)("rev")
    )
) 
```

在此版本中，您只需标记“Rev.”。文本作为可选，在预期的位置，而不是给解析选项来解析一个修订版或“修订版”。+ 修订。这避免了使用“|”引起的任何问题 运营商。

不要忘记 PyParsing 使用运算符重载来提供更好的语法，如果语法导致混淆（就像在这种情况下），你最好只使用长格式的方法调用，比如“pyp.Or(a, b)” .

# c++ - Sort a linked list in C++

> ID：12927790
> 
> 赞同：2
> 
> 时间：2012-10-17T05:40:57.943
> 
> 标签：c++, list, sorting, linked-list, queue

I'm trying to wrap my head around how to write an algorithm to sort a linked list, but I'm having a hard time coming up with something that will work. What we need to do have a linked list that contains a name in a string, and an `int` for hours. After displaying the list and the sum of the hours, we then have to sort the list in ascending order by the hours in a queue. I have the list and all it's functioned stored in a class object, as you will see. I cleared the whole function of what I had in hopes of coming up with a fresh idea but nothing is coming to mind. I initially was going to create a second linked list that had the sorted list, but then I began to wonder if it was possible to sort it within the same list. Here is my code as of posting.

```
#include   <iostream>
#include   <ctime>
using namespace std;

// OrderedLL class
template<class T>
class   OrderedLL
{
private: 
struct NODE
{
    string  sName;
    int sHours;
    NODE    *next;
};
NODE    *list;
NODE    *rear;

public:
// Constructor
OrderedLL () { list = rear =  NULL;}

// Insert item x -------------------------------------
void    Insert(string x, int y)
{
    NODE *r;
    // Create a new node
    r = new(NODE); r->sName = x; r->sHours = y;
    r->next = NULL;
    // Inserts the item into the list
    r->next = list;
    list = r;
}

// Display the linked list --------------------------
void display()
{ NODE *p = list;
while( p != NULL)
    { cout << p->sName << "/" << p->sHours << "-->"; p = p->next;}
cout << "NULL\n";
}

// Delete x from the linked list --------------------
void DeleteNode(T x)
{
NODE *p = list, *r = list;
while( p->info != x) {r=p; p=p->next; }
if( p == list)
    { // delete the first node
    list = p->next; delete(p);
    }
    else
    { r->next = p->next; delete(p);}
}

// Sort by hours ------------------------------------
void    sortHours()
{
NODE    *p, *q;

}

// Display the total hours --------------------------
friend  T   totHours(OrderedLL  LL)
{
    NODE    *p;
    int total = 0;  

    p = LL.list;
    while(p != NULL)
    {
        total += p->sHours;
        p = p->next;
    }
    cout << "Total spending time = " << total << endl;
}

}; // end of OrderedLL class

int main(void)
{
    // Declare variables
time_t          a;
OrderedLL<int>      unsortedLL;
OrderedLL<int>      sortedLL;
int         inHours;
string          inName;

// Displays the current time and date
time(&a);
cout << "Today is " << ctime(&a) << endl;

// Asks the user to enter a name and hours 5 times, inserting each entry
// into the queue
for(int i = 0; i < 5; i++)
{
    cout << "Enter name and Time: ";
    cin >> inName >> inHours;
    unsortedLL.Insert(inName, inHours);
}

// Displays the unsorted list
cout << "\nWaiting List-->";
unsortedLL.display();
totHours(unsortedLL);

// Calls for the function to sort the list into a queue by hours
unsortedLL.sortHours();

unsortedLL.display();
return 0;

} // End of "main" 
```

As always thanks to anyone who can help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:45:06.347

Try sorting the linked-list like you are sorting an integer array. Instead of swapping the nodes, swap the *contents* inside the nodes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:38:30.617

如果您不关心效率，则可以使用任何排序算法。链表和数组的不同之处在于*交换*操作，即在排序时交换两个元素的位置，会慢很多，因为它必须遍历链表的链接。

O(n²)[冒泡排序](http://en.wikipedia.org/wiki/Bubblesort)很容易用链表实现，因为它只与它的邻居交换一个元素。

如果您关心效率，您可以考虑实现[合并排序](http://en.wikipedia.org/wiki/Mergesort)算法，即使它有点复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:15:39.683

你应该像这样插入

```
void Insert(string x, int y)
{
    NODE *r;NODE *temp;
    // Create a new node
    r = new NODE; r->sName = x; r->sHours = y;r->next = NULL;
    if(list==null)//check if list is empty
    {
    list=r;//insert the node r in the list
    }
    else
    {
    temp=list;
    while(temp->next!=null)temp=temp->next;//reach to the end of the list
    temp->next=r;//insert it at the end of the list
    }
} 
```

不需要**后指针**..只需检查是否`list->next`是`null`，如果是，你在最后

你的`sorthour`功能应该是

```
void sortHours()
{

    for(NODE* n=list;n->next!=null;n=n->next)//get each of the node in list 1 by 1 except the last one i.e. n
    {

        for(NODE* n1=n->next;n1!=null;n1=n1->next)//compare the list n node with all the nodes that follow it i.e.n1
        {

            if(n->sHours > n1->sHours)//if one of the node is the less than n
            {
                //swap n and n1
                node temp=*n;
                n->age=n1->age;
                n->name=n1->name;
                n1->age=temp.age;
                n1->name=temp.name;
            }

        }

    }
} 
```

# selector - ImageView, selector and on-click, on-long-click

> ID：12927791
> 
> 赞同：0
> 
> 时间：2012-10-17T05:41:03.943
> 
> 标签：selector, android-imageview, onlongclicklistener

I have some `ImageView`'s:

The selector for right arrow button is:

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="3" android:state_pressed="true"/> <!-- pressed -->
    <item android:drawable="1" android:state_enabled="false"/> <!-- enabled -->
    <item android:drawable="2"/> <!-- default -->

</selector> 
```

(`1`, `2`, `3` look like the ones in the picture below — `1` is for left arrow button, but the right's one looks like the same with opposite direction).

![](../Images/39d31f724a3098aec7ee88cb15f98e1d.png)

Now my problem is:

1.  When the user does click, I use `setEnable()` to change its status. It works.
2.  When the user does long click, again, I use `setEnable()` to change its status. But after the user released his finger, the button retains status as image `#3`.
3.  I tried: [`cancelLongPress()`](http://developer.android.com/reference/android/view/View.html#cancelLongPress()), [`clearFocus()`](http://developer.android.com/reference/android/view/View.html#clearFocus()), [`invalidate()`](http://developer.android.com/reference/android/view/View.html#invalidate()), [`post(Runnable)`](http://developer.android.com/reference/android/view/View.html#post(java.lang.Runnable)), [`postInvalidate()`](http://developer.android.com/reference/android/view/View.html#postInvalidate()), [`refreshDrawableState()`](http://developer.android.com/reference/android/view/View.html#refreshDrawableState())… but they didn't work.

The app uses minimum SDK 4 (Android 1.6). Could you help me?

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:10:18.033

临时解决方案：

```
...
imageView.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {
            v.postDelayed(new Runnable() {

                @Override
                public void run() {
                    v.setEnabled(...);
                }// run()
            }, 200); // 200 ms is enough
        }

        return false;
    }// onTouch()
}); 
```

# android - How to connect to xmpp server other than gtalk?

> ID：12927792
> 
> 赞同：-1
> 
> 时间：2012-10-17T05:41:06.740
> 
> 标签：android, xmpp

I'm trying to create an Android XMPP client. I've successfully tested it by connecting with GTalk but now I'm trying to connect to other free servers like Jabber but really confused because connecting to GTalk I could simply write

```
 ConnectionConfiguration connConfig = new ConnectionConfiguration(talk.google.com, 5222, gmail.com);--- 
```

But the procedure looks really different for other servers. Where am I stuck now?

for trying other server I registered to [https://register.jabber.org/](https://register.jabber.org/) but think I have misunderstood xmpp.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:57:58.313

我一直在使用类似[这里的](http://davanum.wordpress.com/2007/12/31/android-just-use-smack-api-for-xmpp/)[asmack](http://code.google.com/p/asmack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:52:03.767

[以下](http://xmpp.org/xmpp-software/libraries/)是 XMPP 的不同库

对于 java (android)，您可以使用以下内容：

*   [Echomine Feridian](http://freecode.com/projects/feridian)
*   [Jabber 流对象 (JSO)](http://java.net/projects/jso/)
*   [咂嘴](http://www.igniterealtime.org/projects/smack/index.jsp)

# javascript - passing asp.net class object in javascript in ajax call

> ID：12927798
> 
> 赞同：1
> 
> 时间：2012-10-17T05:41:21.777
> 
> 标签：javascript, jquery, asp.net

I am having the below code in my project

```
$.ajax({
        type: "POST",
        url: "Alerts.aspx/TestMethod",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnSuccess,
        error: OnError
    }); 
```

now I want to pass the "this" or me(vb.net) as parameter in data object how to pass the current class object.

can any one help me

I tried `data: "{obj:"<%=Me%>"}",`

but it is not working can anyone help ...

# java - Error Parsing a string to a List

> ID：12927806
> 
> 赞同：3
> 
> 时间：2012-10-17T05:42:21.563
> 
> 标签：java, java-me, nokia

I have managed to fetch a string from the database and be able to store some of its elements in variable so as to reduce the number of times the app interacts with the databse. However I wanted the first element to be fetched from the database to be stored in a list but it keeps generating an error when i parse the string to a new list. please help

```
//String fetched from the database
final String[] rec = split(myresult,seperator);

//loc is the first String to be parsed to a String..
//desc is the 2nd string to be parsed to a textarea
//coords 3rd string which contains coordinates..
String  loc=rec[0];
final  String desc=rec[1];
String coords=rec[2];

//ERROR IS GENERATED HERE!!!
listmboya=new List(loc);
//Separate the coordinates in the string...
String seperator2=",";

String [] coordinates=split(coords,seperator2);

String lat=coordinates[0];
String lot=coordinates[1];

//convert them to floats..
item1=Float.parseFloat(lat);
item2=Float.parseFloat(lot); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:44:11.433

list is an iterface, try

```
 listmboya=new ArrayList();
   listmboya.add(loc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:55:46.267

**List**是抽象类，不能实例化。试试这样：

```
listmboya = new ArrayList<String>();
listmboya.add(loc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:47:35.547

您不能实例化`List`对象。它是一个`interface`而不是一个`class`。您需要一个`ArrayList`实现类，`List`并且没有构造函数`ArrayList`将 String 作为参数。

因此，您需要创建一个`ArrayList<String>`然后将您的字符串添加到它。

所以你需要这样做： -

```
List<String> listmboya=new ArrayList<String>();
listmboya.add(loc); 
```

确保将您的身份声明`listmboya`为`List<String>`

**更新**： - 发布更多代码以防万一这不起作用。我们需要更多地研究它们。

# c# - How can i check website content plagiarism by posting a particular Url in my Asp.net MVC Project?

> ID：12927814
> 
> 赞同：3
> 
> 时间：2012-10-17T05:43:03.197
> 
> 标签：c#, asp.net, asp.net-mvc-3

I need to implement a method for checking plagiarism in website content.

When I submit a particular URL I need to get the places where the web content is used or manipulated.

Is there any API to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-15T16:30:47.130

我正在使用[Copyleaks](https://copyleaks.com) API 检查抄袭，它完全支持 C# 和 .Net 应用程序。API 基于 HTTP RESTful 架构。集成和使用非常简单。创建一个新的 Visual Studio 项目并安装 Copyleaks API [Nuget Package](https://www.nuget.org/packages/CopyleaksAPI/)。

要扫描您的内容是否存在抄袭，只需使用您的凭据调用函数“扫描”。这是一个示例代码（来自他们的开源[GitHub SDK](https://github.com/Copyleaks/API)）：

```
public void Scan(string username, string apiKey, string url)
{
    // Login to Copyleaks server.
    Console.Write("User login... ");
    LoginToken token = UsersAuthentication.Login(username, apiKey);
    Console.WriteLine("\t\t\tSuccess!");

    // Create a new process on server.
    Console.Write("Submiting new request... ");
    Detector detector = new Detector(token);
    ScannerProcess process = detector.CreateProcess(url);
    Console.WriteLine("\tSuccess!");

    // Waiting to process to be finished.
    Console.Write("Waiting for completion... ");
    while (!process.IsCompleted())
        Thread.Sleep(1000);
    Console.WriteLine("\tSuccess!");

    // Getting results.
    Console.Write("Getting results... ");
    var results = process.GetResults();
    if (results.Length == 0)
    {
        Console.WriteLine("\tNo results.");
    }
    else
    {
        for (int i = 0; i < results.Length; ++i)
        {
            Console.WriteLine();
            Console.WriteLine("Result {0}:", i + 1);
            Console.WriteLine("Domain: {0}", results[i].Domain);
            Console.WriteLine("Url: {0}", results[i].URL);
            Console.WriteLine("Precents: {0}", results[i].Precents);
            Console.WriteLine("CopiedWords: {0}", results[i].NumberOfCopiedWords);
        }
    }
} 
```

有关更多信息，请阅读他们的完整[教程](https://api.copyleaks.com/Guides/HowToUse)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:47:09.170

恐怕这种方法不存在。

# ios - iOS UIToolbar 项目数组

> ID：12927820
> 
> 赞同：0
> 
> 时间：2012-10-17T05:43:38.803
> 
> 标签：ios, object, nsarray, uiactivityindicatorview, uitoolbaritem

我有一个 UIToolbar，里面有两个按钮、两个灵活的边距和一个段控件。我进行了设置，以便当用户选择刷新按钮时，该按钮被隐藏，活动指示器取代它，一旦操作完成，按钮被放回并且活动指示器停止。隐藏 UIBarButtonItems 的唯一方法是从工具栏数组中删除 ，然后在需要时重新添加它们。这一切都很好，花花公子。我的问题是，当我重新添加对象时，如何指定它在数组中的位置。现在它将对象添加到数组的末尾，按钮在最右边。我希望它在左侧。我的代码如下。谢谢。

```
toolbarItems = [mapToolbar.items mutableCopy];
[toolbarItems removeObject:refreshButton];
mapToolbar.items = toolbarItems;

spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
spinner.center = CGPointMake(298, 22);
[mapToolbar addSubview:spinner];
[spinner startAnimating];

do operation....

[toolbarItems addObject:refreshButton];
mapToolbar.items = toolbarItems;

[spinner stopAnimating]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:48:12.883

由于您将工具栏项复制到数组中，因此您可以使用`[toolbarItems insertObject:refreshButton atIndex:0]`而不是`addObject`.

# symfony - Silex/Symfony2 表单中的默认日期时间数据

> ID：12927821
> 
> 赞同：0
> 
> 时间：2012-10-17T05:43:43.040
> 
> 标签：symfony, symfony-forms, silex

我正在尝试创建一个允许用户编辑数据的表单。我需要从表中读取一个值并使用该数据预填充表单。

在下面的代码中，我试图`2007-02-20 16:48:00`在表单中设置一个值。

我尝试了什么：

```
$form = $app['form.factory']->createBuilder( 'form' )
    ->add('start', 'datetime', array(
      'data' => '2007-02-20 16:48:00')
  )
    ->add('end', 'datetime')
    ->getForm(); 
```

我得到了什么：

> UnexpectedTypeException：给定类型“\DateTime”，“字符串”的预期参数

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:16:37.680

Symfony 想要一个 DateTime 对象，所以试试：

```
$form = $app['form.factory']->createBuilder( 'form' )
    ->add('start', 'datetime', array(
        'data' => new \DateTime('2007-02-20 16:48:00'))
      )
    ->add('end', 'datetime')
    ->getForm(); 
```

# php - 我可以获得使用 php 和 wsse 的代码示例吗

> ID：12927822
> 
> 赞同：1
> 
> 时间：2012-10-17T05:43:48.007
> 
> 标签：php, soap, wsse

我尝试使用下面 url 中提到的示例。但对他们如何在这里构建 $wrapper 感到困惑。谁能告诉我如何创建包装器以及它应该包含什么。 [http://www.sis.utoronto.ca/web_services/code_samples.html](http://www.sis.utoronto.ca/web_services/code_samples.html)。

有人可以在这里帮助我，因为我是第一次使用 wsse，所以不知道如何使用它。我正在从 PHP 到 .net wsse 进行肥皂调用。

请让我知道如何在此示例中传递标头。

```
<?php
  class WSSESoapClient extends SoapClient {                                                                                           
protected $wsseUser;
protected $wssePassword;

public function setWSSECredentials($user, $password) {
    $this->wsseUser = $user;
    $this->wssePassword = $password;
}

public function __doRequest($request, $location, $action, $version, $one_way = 0) {
    if (!$this->wsseUser or !$this->wssePassword) {

        return parent::__doRequest($request, $location, $action, $version, $one_way = 0);
    }

    // get SOAP message into DOM
    $dom = new DOMDocument();
    $dom->loadXML($request);
    $xp = new DOMXPath($dom);
    $xp->registerNamespace('SOAP-ENV', 'http://schemas.xmlsoap.org/soap/envelope/');

    // search for SOAP header, create one if not found
    $header = $xp->query('/SOAP-ENV:Envelope/SOAP-ENV:Header')->item(0);
    if (!$header) {
        $header = $dom->createElementNS('http://schemas.xmlsoap.org/soap/envelope/', 'SOAP-ENV:Header');
        $envelope = $xp->query('/SOAP-ENV:Envelope')->item(0);
        $envelope->insertBefore($header, $xp->query('/SOAP-ENV:Envelope/SOAP-ENV:Body')->item(0));
    }

    // add WSSE header
    $usernameToken = $dom->createElementNS('http://schemas.xmlsoap.org/ws/2002/07/secext', 'wsse:UsernameToken');
    $username = $dom->createElementNS('http://schemas.xmlsoap.org/ws/2002/07/secext', 'wsse:Username', $this->wsseUser);
    $password = $dom->createElementNS('http://schemas.xmlsoap.org/ws/2002/07/secext', 'wsse:Password', $this->wssePassword);
    $usernameToken->appendChild($username);
    $usernameToken->appendChild($password);
    $header->appendChild($usernameToken);

    // perform SOAP call
    $request = $dom->saveXML();

    return parent::__doRequest($request, $location, $action, $version, $one_way = 0);
}

  } // class WSSESoapClient

  $wsdl = 'Mywsdlurl';
  $sClient = new WSSESoapClient ($wsdl,array( "trace" => 1 ));

    $sClient->setWSSECredentials('username', 'password');

    $wrapper->AccountName = new SoapVar("NEw User", XSD_STRING);
    $wrapper->AccountInfo->propertyID = new SoapVar(2, XSD_STRING);

    try {
$result = $sClient->CreateAccount($wrapper);    
print_r($result);
} catch (SoapFault $fault) {
print("Fault string: " . $fault->faultstring . "\n");
print("Fault code: " . $fault->detail->WebServiceException->code . "\n");
}

echo $sClient->__getLastRequest();
 // "<br>" .
//  $sClient->__getLastResponse(); 
```

?>

当我检查 __getLastRequest 时，它没有附加 _doRequest 中定义的标头；

请让我知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:12:01.683

我在与 Skillsofts OLSA Web 服务集成的 Moodle 模块中使用 PasswordDigest 实现了 UserNameToken。

看看： [http ://code.google.com/p/moodle2-skillsoft-activity/source/browse/trunk/skillsoft/olsalib.php#40](http://code.google.com/p/moodle2-skillsoft-activity/source/browse/trunk/skillsoft/olsalib.php#40)

这是我在 PHP SoapClient 周围创建一个包装器以支持发送带有密码摘要的 UserNameToken 的地方，您可以对其进行调整以执行纯密码等

它有一些特定于 Moodle 的代码，用于获取要使用的代理等内容，以及在文件系统上“缓存”WSDL 的位置（使其更快地设置客户端 - 而不是每次设置它时拉下 WSDL 等）

然后看看： [http ://code.google.com/p/moodle2-skillsoft-activity/source/browse/trunk/skillsoft/olsalib.php#483](http://code.google.com/p/moodle2-skillsoft-activity/source/browse/trunk/skillsoft/olsalib.php#483)

我在哪里调用其中一项 Web 服务，您可以看到客户端是如何设置的以及用户名/密码是如何传递的。

# c# - XNA 中的碰撞检测

> ID：12927827
> 
> 赞同：0
> 
> 时间：2012-10-17T05:44:14.840
> 
> 标签：c#, visual-studio-2010, xna-4.0

我正在使用 Xna 游戏工作室开发小型 Windows 游戏。

我的问题是我有两个像 Ship 和 The Land Tile 这样的对象...想象一下，船有矩形调用 shiprectangle，陆地有矩形调用 landrectangle.. 矩形表示对象的当前位置..

土地瓦片在地图中随机放置..我只想知道船是否在土地瓦片上碰撞，船必须忽略土地并转到另一个方向..

简单的意思是我不想看到船在陆地上行驶......这就是想法......

`private void HandleLandCollition() { foreach (LandTile landtile in landtiles) { if (ship.rectangle.Intersects(landtile.rectangle)) { //Code Here } } }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:32:42.003

一个基本版本可能是这样的：

通过 Rectangle.Intersect - 方法，您可以获得两个矩形相交的矩形。

![两个相交矩形的图片。](../Images/c2b3d39c2911ad0e109db5be7ce5cdca.png)

现在您可以使用交叉矩形中的值将船从地块上移开。

![两个相交矩形的图片。 用箭头显示如何将一个矩形移出另一个矩形。](../Images/ada96c4e353ea2af2da60fc8908ab54c.png)

在所示情况下，您只需从 Ship 的 X 和 Y 值中减去 Width 和 Height - 值，即可将船从地块上移开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:44:26.097

如果您想创建逼真的碰撞响应，您应该使用 Farseer 物理库。它是 Box2D 端口，针对 XNA 进行了优化。

[http://farseerphysics.codeplex.com/](http://farseerphysics.codeplex.com/)

如果没有，您可以使用@vinzBad 解决方案。

# php - Javascript - 如何在轮播中添加暂停按钮？

> ID：12927829
> 
> 赞同：1
> 
> 时间：2012-10-17T05:44:16.813
> 
> 标签：php, javascript, magento, carousel

我在 Magento 中找到了这个脚本，它正在从某个目录旋转图像。这工作正常。但是我需要在“1-6”之后添加一个“暂停”按钮。我不是 javascript 专家，所以不知道该怎么做。有人可以帮我吗？

编码：

```
<?php
$speed = 5000;//miliseconds
?>

<script type="text/javascript">
var timeoutID;

homeTileCount = 1;
$$('.home-tile-container img').each(function(e){
    $(e).writeAttribute('id','home-tile-' + homeTileCount);
    $(e).addClassName('home-tile');
    homeTileCount++;
});

homeTileCount--;

var homeTileRemote = $$('.home-tile-remote')[0];
for (i=homeTileCount;i>=1;i--)
    homeTileRemote.insert('<div id="home-tile-remote-'+i+'" class="overflow"><a href="#" onclick="switchTile('+i+');return false">'+i+'</a></div>');

function switchTile(n)
{
    //console.log(n);
    clearTimeout(timeoutID);
    $$('.home-tile-container img').each(function(e){
        e.removeClassName('home-tile-active');
    });

    $$('.home-tile-remote > div').each(function(e){
        e.removeClassName('home-tile-remote-active');
    });

    $('home-tile-remote-'+n).addClassName('home-tile-remote-active');
    $('home-tile-'+n).addClassName('home-tile-active');
    next = n+1;
    if (next > homeTileCount)
        next = 1;
    timeoutID = setTimeout('switchTile('+next+')', <?=$speed?>);
}

switchTile(1);
setTimeout('switchTile(2)', <?=$speed?>);
</script> 
```

这就是轮播的样子： ![在此处输入图像描述](../Images/6e37f3b2a9bcb14429c2fe1fbebb0591.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:22:06.827

也许是这样：

```
<?php
$speed = 5000;//miliseconds
?>

<script type="text/javascript">
var paused=false;
var timeoutID;

homeTileCount = 1;
$$('.home-tile-container img').each(function(e){
$(e).writeAttribute('id','home-tile-' + homeTileCount);
$(e).addClassName('home-tile');
homeTileCount++;
});

homeTileCount--;

var homeTileRemote = $$('.home-tile-remote')[0];
for (i=homeTileCount;i>=1;i--)
    homeTileRemote.insert('<div id="home-tile-remote-'+i+'" class="overflow"><a href="#" onclick="switchTile('+i+');return false">'+i+'</a></div>');

function switchTile(n)
{
if (!paused) {
    //console.log(n);
    clearTimeout(timeoutID);
    $$('.home-tile-container img').each(function(e){
        e.removeClassName('home-tile-active');
    });

    $$('.home-tile-remote > div').each(function(e){
        e.removeClassName('home-tile-remote-active');
    });

    $('home-tile-remote-'+n).addClassName('home-tile-remote-active');
    $('home-tile-'+n).addClassName('home-tile-active');
    next = n+1;
    if (next > homeTileCount)
        next = 1;
    timeoutID = setTimeout('switchTile('+next+')', <?=$speed?>);
    }
    }

switchTile(1);
setTimeout('switchTile(2)', <?=$speed?>);
</script>
<button type="button" onclick="paused=true;">Pause</button> 
```

# vb.net - DirectCast 不工作

> ID：12927830
> 
> 赞同：0
> 
> 时间：2012-10-17T05:44:20.533
> 
> 标签：vb.net, image, visual-studio-2005, rgb, cmyk

'ofd 是打开文件对话框

```
Dim img As Bitmap
Dim iscmyk As Boolean
Dim i As String
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    ofd.Filter = "Jpg Image(*.jpg)|*.jpg"
    If ofd.ShowDialog = Windows.Forms.DialogResult.OK Then
        img = Bitmap.FromFile(ofd.FileName)
        iscmyk = ((DirectCast(img.Flags, Imaging.ImageFlags) And Imaging.ImageFlags.ColorSpaceCmyk) = Imaging.ImageFlags.ColorSpaceCmyk)
    End If
    img = New Bitmap(img, New Size(120, 190))
    MsgBox("cmyk = " & iscmyk)
    PictureBox1.Image = img
End Sub 
```

我需要检查图像是 cmyk 还是 rgb 如果它的 cmyk 然后 iscmyk 返回 true 如果它不是 cmyk 然后 iscmyk 在我的 Windows 7 pc 中返回 false 它为每个图像返回 false 但在 XP 中它返回完美的答案

为什么它不能在我的其他 win7 电脑上工作？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:45:34.070

*   首先，抱歉这么晚才回复...
*   其次，实际上我不知道为什么你会在不同的操作系统版本上得到不同的结果。

无论如何，这是一个低级（且丑陋）的解决方法。它专为 JPEG 图像而设计：

```
Public Shared Function GetJpegBpp(FileName As String) As Integer
    Dim len As Integer
    Dim fp As FileStream = Nothing
    Dim marker(1) As Byte
    Dim data(15) As Byte
    Dim components As Byte = 0

    GetJpegBpp = -2
    Try
        fp = New FileStream(FileName, FileMode.Open, FileAccess.Read)
        GetJpegBpp = -1
        If fp.Read(marker, 0, 2) < 2 OrElse marker(0) <> &HFF OrElse marker(1) <> &HD8 Then Exit Function
        Do
            If fp.Read(marker, 0, 2) < 2 OrElse marker(0) <> &HFF OrElse (marker(1) > 1 And marker(1) < &HC0) Then Exit Function
            If (marker(1) < &HD0 Or marker(1) > &HD9) AndAlso marker(1) > 1 Then
                If fp.Read(data, 0, 2) < 2 Then Exit Function
                len = (CInt(data(0)) << 8) Or data(1)
                len -= 2
                If len < 0 Then Exit Function
                If (marker(1) >= &HC0) And (marker(1) <= &HC3) Then
                    If len < 9 OrElse fp.Read(data, 0, 6) < 6 Then Exit Function
                    components = data(5)
                    If components = 0 OrElse components = 2 OrElse components > 4 OrElse (components * 3 + 6) <> len Then Exit Function
                    len -= 6
                ElseIf marker(1) = &HDA Then
                    If len < (4 + 2 * components) Or (fp.ReadByte() <> components) Then Exit Function
                    len -= 1
                End If
                fp.Position += len
            End If
        Loop Until marker(1) = &HDA Or marker(1) = &HD9
        If components = 0 OrElse marker(1) = &HD9 OrElse (fp.Length - fp.Position) < 3 Then Exit Function
    Catch
        Exit Function
    Finally
        If Not fp Is Nothing Then fp.Close()
    End Try
    GetJpegBpp = components * 8
End Function 
```

您需要替换此行

```
iscmyk = ((DirectCast(img.Flags, Imaging.ImageFlags) And Imaging.ImageFlags.ColorSpaceCmyk) = Imaging.ImageFlags.ColorSpaceCmyk) 
```

有了这个：

```
iscmyk = (GetJpegBpp(ofd.FileName) = 32) 
```

最后，我还没有用 CMYK JPEG 图像测试过这段代码，但我想它应该可以工作......

# c# - C# 中的单例对象构造问题

> ID：12927832
> 
> 赞同：0
> 
> 时间：2012-10-17T05:44:32.013
> 
> 标签：c#, constructor, singleton

我遵循了实现单例类的代码（双重检查锁定）

```
public sealed class Plugin
{
    #region Private Fields

    private static volatile Plugin _instance;
    private static object syncRoot = new Object();

    private Dictionary<int, string> myMap;

    #endregion

    private Plugin()
    {
        myMap = MapInit(GetMainModuleName());
    }

    static Plugin()
    { }

    public static Plugin Instance
    {
        get 
        {
            if (_instance == null) 
            {
                lock (syncRoot) 
                {
                   if (_instance == null)
                       _instance = new Plugin();
                }
            }

            return _instance;
        }
    }
} 
```

单例实例在调试模式下正确构建，一切似乎都运行良好。但是在发布模式下，实例在它被正确构造之前就被返回了，即myMap 没有被初始化。

另外需要注意的是，以下代码在调试模式下完全执行大约需要 10 -15 秒

```
myMap = MapInit(GetMainModuleName()); 
```

这是一些编译器优化的问题吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:04:21.707

你不需要Singleton，事实上你不需要Singleton。为什么现在人们都在做单身人士？

看，这很有效：

```
public sealed class Plugin
{
    private static readonly Plugin _instance;
    private /*readonly?*/ Dictionary<int, string> myMap;

    private Plugin()
    {
        myMap = MapInit(GetMainModuleName());
    }

    static Plugin()
    {
        _instance = new Plugin();
    }

    public static Plugin Instance
    {
        get
        {
            return _instance;
        }
    }
} 
```

静态构造函数保证每个应用程序域只运行一次，这是 C# 语言规范的一部分。

* * *

为了解决您的问题，双重检查模式存在问题，正如您所展示的，当机器在硬件中有多个线程时，它不适用于编译器优化。这样做的原因是...

[来自[http://blogs.msdn.com/b/brada/archive/2004/05/12/130935.aspx](http://blogs.msdn.com/b/brada/archive/2004/05/12/130935.aspx) ]

> 内存模型允许对非易失性读\写进行重新排序，只要从单个线程的角度看不到这种变化。

即使与`volatile`. 关键字告诉编译器必须在读取字段后`volatile`写入字段。然而，没有什么能阻止它在首先读取 的值之前初始化新对象。`_instance``_instance``Plugin``_instance`

除此之外，您说您还面临另一个问题：

> 实例在正确构造之前返回

然后你需要等待初始化完成，而不仅仅是检查它是否已经启动。显然，在类 Plugin 的构造函数结束之前已经设置了该字段`_instance`，如果是这种情况，则意味着您需要等到它完成。此外，如果那里有一些异步调用，您可能需要添加“就绪”属性或其他方式来等待[允许对象处于无效状态将是您的错]。

*：这通常可以通过引入一个时间变量来解决，您可以在其中设置新实例并将该变量分配给您的字段。该技术还允许通过添加内存屏障使该字段成为非易失性......然而，它增加了让您的构造函数运行不止一次的风险。所以，我跳过了所有这些。

要解决这两个问题，您可以使用 Interlocked 和 ManualResetEvent 的组合 [不知道构造函数的内部结构，我怀疑我能做更多]：

```
public sealed class Plugin
{
    private static readonly Plugin _instance;
    private static int _initializing;
    private static ManualReserEvent _done;
    private Dictionary<int, string> myMap;

    private Plugin()
    {
        myMap = MapInit(GetMainModuleName());
    }

    static Plugin()
    {
        _done = new ManualResetEvent(false);
    }

    public static Plugin Instance
    {
        get
        {
            if (Interlocked.CompareExchance(ref _initializing, 1, 0) == 0)
            {
                _instance = new Plugin();
                _done.Set();
            }
            else
            {
                _done.WaitOne();
            }
            return _instance;
        }
    }
} 
```

即使......只需使用静态构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:26:38.260

好的，这是听起来很幼稚的实际问题。带有上述代码的 dll 被加载到具有无效 exe.config 的主应用程序中。而且由于我的 dll 有单独的 dll.config（这是有效的），因此应用程序在通过调试器运行时工作正常，但是在部署环境中运行时（没有附加调试器），它遇到了无效的配置文件异常。

我已将主 exe.config 设置为有效的配置文件，它现在可以工作了。

所以基本上，解决方案就像检查构建过程中是否存在异常一样天真。

# c++ - C++ 分段错误

> ID：12927835
> 
> 赞同：0
> 
> 时间：2012-10-17T05:44:38.403
> 
> 标签：c++, segmentation-fault

我不熟悉 C++ 以及编写和调试语言所需的内存细微差别。谁能告诉我为什么下面的代码给我一个分段错误？

```
string Polynomial::toString(){
    int i, exponent;
    stringstream result;

    for (i = 0; i < coeffs.size(); i++){

        // For first non-zero coefficient
        if (result.str().empty()){
            if(coeffs[i] < 0)
                result << "-";
            if(coeffs[i] != 0)
                result << coeffs[i];
        }
        else{
            if(coeffs[i] < 0)
                result << " - " << abs(coeffs[i]);
            else if(coeffs[i] > 0)
                result << " + " << coeffs[i];
        }

        exponent = (coeffs.size() - i - 1);
        if (coeffs[i] != 0){
            if (exponent > 1)
                result << coeffs[i] << "x^" << exponent;
            else if(exponent == 1)
                result << coeffs[i] << "x";
        }
    }

    result.str();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:05:06.440

您可能正在调用该函数并将结果分配给某些东西：

```
Polynomial p = ....;
std::string s = p.toString(); 
```

由于您在 中没有 return 语句`Polynomial::toString()`，这本身就是未定义的行为，因此很容易导致分段违规。`stringstreams`您可以通过返回' 字符串轻松解决此问题：

```
return result.str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:03:57.617

您的函数缺少 return 语句（可能只是`return`部分）。根据标准，在`main`具有返回类型之外的任何函数上到达右大括号是未定义的行为，根据 C++11 标准的 §6.6.2/2，如下所示，这通常会导致崩溃，尽管它可能并不总是这样做。

除此之外，没有什么会导致未定义的行为或崩溃。你想要做的是添加`return`部分：

```
return result.str(); 
```

对于它的价值，GCC 4.7.2 给出了以下警告：

> 警告：函数中没有返回语句返回非 void [-Wreturn-type]

始终利用编译器可以并且将给您的警告。

* * *

标准参考：

> 从函数末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

# objective-c - What would be a good way to pick cache file names for images downloaded from internet?

> ID：12927839
> 
> 赞同：1
> 
> 时间：2012-10-17T05:44:59.607
> 
> 标签：objective-c, xcode4.5

What would be a good way to pick cache file names for images downloaded from internet for caching purpose to ensure that no matter what the URL is we got valid file name?

We often pick images from the net. It's often useful to store those images in temporary cache so we don't keep downloading the same image again and again.

So I suppose, I would need a cacheFileName. It should be a function of the URL. However, it must not contain special characters like :, /, &

In other words, it has to be a valid file name.

What would be the way to do so?

I can make some my self. Perhaps I can use URLEncode which seems to do just fine. However, I wonder, if there are consideration I missed.

This is the current Code I use:

```
- (NSString *) URLEncodedString {
    NSMutableString * output = [NSMutableString string];
    const char * source = [self UTF8String];
    int sourceLen = strlen(source);
    for (int i = 0; i < sourceLen; ++i) {
        const unsigned char thisChar = (const unsigned char)source[i];
        if (false && thisChar == ' '){
            [output appendString:@"+"];
        } else if (thisChar == '.' || thisChar == '-' || thisChar == '_' || thisChar == '~' ||
                   (thisChar >= 'a' && thisChar <= 'z') ||
                   (thisChar >= 'A' && thisChar <= 'Z') ||
                   (thisChar >= '0' && thisChar <= '9')) {
            [output appendFormat:@"%c", thisChar];
        } else {
            [output appendFormat:@"%%%02X", thisChar];
        }
    }
    return output;
} 
```

It's taken from some great answer in stackOverflow which I have forgotten.

I wonder if the result of this function will always get a valid file name. Does anyone has better file name generator?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:38:26.940

如果您进行了适当的网络连接，则可以自动`NSURLCache`处理图像*缓存*。

但是，我感觉您对*缓存并不**真正*感兴趣，而是对（或多或少永久）*存储*图像感兴趣。

 **在这种情况下，为您的应用构建合适的模型。

因为您没有告诉我们您要存储的图像的用途，所以我没有比这更有帮助的了：

如果您使用的是 iOS 5+/OS X 10.7+，您可以使用`NSAttributeDescription`'allowExternalBinaryDataStorage 设置来`NSSQLiteStoreType`代表您透明地为图像数据命名、创建、检索、更新和删除支持文件。

如果您必须支持较旧的操作系统版本，您仍然可以通过瞬态属性使用外部存储。但是，您的实体描述必须具有数据文件名称的属性。在这种情况下，图像数据的 SHA-1（可通过 CommonCrypto 框架获得）将提供一个好的文件名。

* * *

**在旁边**

如果您在 Objective-C 的答案中找到了该代码，请对其投反对票，并删除上面的代码：

`-[NSString stringByAddingPercentEscapesUsingEncoding:]`，并`CFURLCreateStringByAddingPercentEscapes`完全按照他们（或他们的文档）所说的去做。**

# magento - 在 Magento 中，观察者到底是什么？它有什么作用？

> ID：12927844
> 
> 赞同：3
> 
> 时间：2012-10-17T05:45:09.670
> 
> 标签：magento, magento-1.7

我是一个非常新手的程序员，他发现自己的任务是学习如何为 Magento 编程。所以请原谅我提出这样一个基本问题，但 Google 上似乎没有大量关于 Mage 的初级内容。

**有人可以向我解释一下观察者到底是什么吗？它有什么作用？它可以用来做什么？**

如果有人能给我一个超级 101 的解释（不假设很多先验知识），你将成为我的新英雄。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:49:00.873

您可以将事件观察者视为触发器。一旦设置了事件观察者，例如，您可以设置观察者`before`或`after`事件，即，您可以添加一个事件，该事件将在用户将产品添加到购物车之后或在将产品添加到购物车之前立即执行。

在这个事件观察器中，您可以编写代码来自定义传递给发生事件**（之前）**或作为发生事件输出**（之后）的数据**

参考： http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

**事件 ：**

在 Magento 中，您可以将 Controller Action 视为一个事件，例如**CartController中的****addAction**是一个事件。

 ****观察员：**

正如名称中所提到的，观察者观察这个动作何时发生（在我们的例子中是 CartController 中的 addAction），并在调用这个 addAction 之前或之后调用一个函数。您可以在此观察者中添加您的自定义代码以进行自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:42:11.087

如果你实现一个事件，观察者是你需要编写的一段代码。

你的问题是：什么是事件？

将事件视为可以拦截的“广播操作”，以便将特定代码添加到特定操作。在magento key functionnalities中触发了所有事件。例如，您可以拦截： - 保存产品之后或之前 - 添加到购物车的产品 - 等等

它只是magento核心开发者留给你插件的一扇敞开的大门。

在 magento 中，您有几种方法来修改标准功能的行为： - 您可以重写类（config.xml 中的标签） - 当事件可用于要修改的功能时，您可以使用事件

要理解，深入代码并在 app/code/core ... 中搜索“dispatchEvent”**

# naming-conventions - 时间格式命名

> ID：12927846
> 
> 赞同：2
> 
> 时间：2012-10-17T05:45:23.943
> 
> 标签：naming-conventions, naming

有谁知道是否有某些类型的时间和日期格式的名称，例如

```
h:m:s:ms

xh xm xs xms 
```

ETC？

我想要一些方法来描述这些不同的格式，以便枚举传递给格式化程序。

# verilog - 有没有更简洁的方法在 Verilog 中为这条线编写分配？

> ID：12927849
> 
> 赞同：1
> 
> 时间：2012-10-17T05:45:30.197
> 
> 标签：verilog

只是试图为所有寄存器和索引创建一个`finished`真正的 iff线。`data == dataNew`我能想到的唯一方法是使用一堆`finishedAgg`电线作为中间值；我很想摆脱它们，但我不知道该怎么做。似乎必须*有*比这更简单的方法！

```
reg[24:0] data[0:24];
reg[24:0] dataNew[0:24];

wire finished;

genvar i;
generate
    wire finishedAgg[-1:24];
    assign finishedAgg[-1] = 1;
    for (i=0; i<25; i=i+1) begin :b1
        assign finishedAgg[i] = finishedAgg[i-1] & (data[i]==dataNew[i]);
    end
    assign finished = finishedAgg[24];
endgenerate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:48:36.133

这是我的观点：

```
reg [24:0] finishAgg;
wire finished;
always @(*)
    for (int i=0; i<25; i=i+1) begin :b1
        finishedAgg[i] = (data[i]==dataNew[i]);
    end : b1
assign finished = &finishedAgg; 
```

它不会比你的版本短太多，但它不需要一个`generate`块。我已经声明`i`了循环内 Systemverilog 样式，并且我正在使用归约 AND 来发出`finished`信号。

# scala - Scala：扩展 Map 并定义 +

> ID：12927850
> 
> 赞同：0
> 
> 时间：2012-10-17T05:45:39.403
> 
> 标签：scala, generics, map

我正在尝试编写一个小型包装类，以使[Gson 库](http://code.google.com/p/google-gson/)对 Scala 更加友好。不幸的是，当我尝试按照我想要的方式进行时，我遇到了编译错误。

这是我到目前为止的代码：

```
package com.test

import com.google.gson.{JsonObject, JsonElement}
import scala.collection.Iterator
import scala.collection.immutable.Map

case class GsonMap ( private val inner: JsonObject = new JsonObject )
    extends Map[String, JsonElement] {

    /** {@inheritDoc} */
    override def iterator: Iterator[(String, JsonElement)]
        = new Iterator[(String, JsonElement)] {
            private val entries = inner.entrySet.iterator
            override def hasNext: Boolean = entries.hasNext
            override def next: (String, JsonElement) = {
                val elem = entries.next
                ( elem.getKey, elem.getValue )
            }
        }

    /**
     * Returns a clone of the inner JsonObject
     */
    private def cloneInner: JsonObject = {
        val result = new JsonObject()
        iterator.foreach { (item) => result.add( item._1, item._2 ) }
        result
    }

    /** {@inheritDoc} */
    override def + ( kv: (String, JsonElement) ): GsonMap = {
        val cloned = cloneInner
        cloned.add( kv._1, kv._2 )
        GsonMap( cloned )
    }

    /** {@inheritDoc} */
    override def get( key: String ): Option[JsonElement]
        = Option( inner.get(key) )

    /** {@inheritDoc} */
    override def - ( key: String ): GsonMap = {
        val cloned = cloneInner
        cloned.remove( key )
        GsonMap( cloned )
    }

} 
```

现在，我知道该`+`方法与 Map 类中定义的不匹配。这就是问题所在，真的。我希望该`+`方法接受`JsonElement`s 并返回 a `GsonMap`，但我不确定如何使其工作。我在这一点上尝试了一些变化，但没有运气

作为参考，这是我收到的编译错误：

```
[info] Compiling 1 Scala source to target/scala-2.9.2/classes...
[error] src/main/scala/GsonMap.scala:7: class GsonMap needs to be abstract, since method + in trait Map of type [B1 >: com.google.gson.JsonElement](kv: (String, B1))scala.collection.immutable.Map[String,B1] is not defined
[error] case class GsonMap ( val inner: JsonObject = new JsonObject )
[error]            ^
[error] src/main/scala/GsonMap.scala:31: method + overrides nothing
[error]     override def + ( kv: (String, JsonElement) ): GsonMap = {
[error]                  ^
[error] two errors found 
```

有什么建议吗？

* * *

**更新：**

正如下面所建议的，这是我尝试过的变体之一：

```
override def +[T >: JsonElement] ( kv: (String, T) ): GsonMap = {
    val cloned = cloneInner
    cloned.add( kv._1, kv._2 )
    GsonMap( cloned )
} 
```

但是，它也失败了：

```
[info] Compiling 1 Scala source to target/scala-2.9.2/classes...
[error] /src/main/scala/GSON.scala:33: type mismatch;
[error]  found   : T
[error]  required: com.google.gson.JsonElement
[error]         cloned.add( kv._1, kv._2 )
[error]                               ^
[error] one error found 
```

我对`>:`运算符的理解是 T 必须是 JsonElement 的父级，我认为这不是我要找的。在这种情况下，此映射只能包含 JsonElements 的实例，因此不适合放入 JsonElements 的父项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T06:32:49.360

您的错误的直接原因是您`+`只接受 JsonElement，而`+`trait 中的 期望类型参数的上限为`JsonElement`.

```
override def +[T >: JsonElement] ( kv: (String, T) ): GsonMap = {
    val cloned = cloneInner
    cloned.add( kv._1, kv._2 )
    GsonMap( cloned )
} 
```

原因是（正如@Frank 的回答中所指出的）是 Map 在其 value 参数中是协变的，即如果`Child`是 的子类型`Parent`,`Map[String,Parent]`将是 的超类型`Map[String, Child]`，并且此`add`定义允许您“向上添加”到 a `Map`：

```
scala> class Element;
defined class Element

scala> class SubElement extends Element;
defined class SubElement

scala> val m = Map("foo"-> new SubElement)
m: scala.collection.immutable.Map[java.lang.String,SubElement] = Map(foo -> SubElement@6a63afa4)

scala> m + ("bar" -> new Element)
res0: scala.collection.immutable.Map[java.lang.String,Element] = Map(foo -> SubElement@2e7ff81e, bar -> Element@654ab15b)

scala> m + ("bar" -> new Element) + ("baz" -> "Text")
res1: scala.collection.immutable.Map[java.lang.String,java.lang.Object] = Map(foo -> SubElement@6a63afa4, bar -> Element@233d0d04, baz -> Text) 
```

如果您尝试`Map`在可变支持对象上实现不可变特征，则必须自己提供这种“向上转换”，或者您可以屈服于 Scala 标准库的热情拥抱，而改为 extend [`mutable.Map`](http://www.scala-lang.org/api/current/scala/collection/mutable/Map.html)，这已经做到了[正是](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/Map.scala#L79)为您服务。如果您的 Java 类型实现了`java.util.Map`接口，那么在`scala.collection.JavaConversions`.

我不知道你想用你的 custom 做什么`Map`，但很可能扩展`Map`根本不是可行的方法（Scala 集合库的标准介绍中[扩展地图的示例](http://www.artima.com/scalazine/articles/scala_collections_architecture3.html)实现了一个新数据结构），您宁愿在您的大部分代码中处理 Scala 映射，然后提供隐式，例如将映射转换为边界处的 GSON 等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:34:40.623

该错误非常详细且切中要害：您尝试覆盖不在基类中的内容并且您没有实现所需的方法。

就解决方案而言，您基本上错过的是`Map`使用的方差注释。查看该课程的ScalaDoc，[您](http://www.scala-lang.org/api/current/scala/collection/immutable/Map.html)`Map`将看到：`Map[A, +B]`. 这一点`+`导致你的问题。

要了解发生了什么，我建议您阅读协方差，然后了解为什么该`+`方法具有不同的类型签名并且不*返回*a `Map[A, B]`，而是返回 a `Map[A, B1]`， where `B1 >: B`。您应该这样做，因为这不仅可以让您保留不变`JsonElement`对象的映射，还可以在您拥有子类时从协方差中获益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:32:29.383

“+”方法需要具有以下签名：`+[B1 >: B](kv: (A, B1)): Map[A, B1]`

更多的是观察而不是答案：您的 GSonMap 有一个构造函数，它接收 JsonObject 并在内部使用它。它还将 JsonObject 公开为公共字段。问题是 JsonObject 是可变的，并且由于您在 GsonMap 中公开它的方式，后者也变得可变（这是因为任何人都可以从外部修改 JsonObject）。

因此，请考虑在构造函数中克隆 JsonObject 并将其公开`inner`为返回 JsonObject 的克隆副本而不是内部对象的方法。这样就保证了 GsonMap 的不变性。

# jquery - 使用 JQuery 在槽类中搜索属性值

> ID：12927851
> 
> 赞同：0
> 
> 时间：2012-10-17T05:45:42.137
> 
> 标签：jquery, class, attributes

我在一个班级里有一些我四处走动的元素。

```
<div id="bno0" class="block" style="left: 50px; bottom: 50px;"></div>
<div id="bno1" class="block" style="left: 250px; bottom: 150px;"></div>
<div id="bno2" class="block" style="left: 450px; bottom: 250px;"></div>

$("#right").click(function(){
  $(".block").animate({"left": "+=50px"}, "slow"); 
}); 
```

我想知道其中一个被归因于“left：400px;”

我可以通过以下方式检测到它：

```
if($("#bno2").css("left")=='400px') 
```

但我想要一个更通用的功能，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:25:05.360

检查这个

[小提琴 //](http://jsfiddle.net/sushanth009/3z3Th/1/)

我正在计算动画函数回调中的左侧..希望它符合您的要求

```
$("#right").click(function() {

    $(".block").each(function(i) {
        var $elem = $(this)
        $(this).animate({
            "left": "+=50px"
        }, "slow", function() {
            if( parseInt($elem.css('left')) === 300){
                alert('Div with id : '+ $elem.attr('id') + ' left is 300 !!');
            }
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:29:58.060

试试这个

```
if($(".block").css("left")=='400px') 
```

# iphone - 如何对“架构 i386 的未定义符号”进行故障排除

> ID：12927854
> 
> 赞同：0
> 
> 时间：2012-10-17T05:46:05.473
> 
> 标签：iphone, objective-c, xcode

我正在尝试运行由其他人开发的 Xcode 项目，但我不断收到以下错误。谷歌搜索表明我缺少一些依赖，但如果是这样，我不知道是哪一个。假设该项目已经配置了所有“Link Binary With Libraries”。我尝试了不同版本的 Xcode 和目标设备，但我得到了同样的错误。如何进一步缩小问题范围？

```
Undefined symbols for architecture i386:
  "___gl_pqSortExtractMin", referenced from:
      ___gl_computeInterior in sweep.o
  "___gl_pqSortMinimum", referenced from:
      ___gl_computeInterior in sweep.o
  "___gl_pqSortNewPriorityQ", referenced from:
      _InitPriorityQ in sweep.o
  "___gl_pqSortInsert", referenced from:
      _InitPriorityQ in sweep.o
      _CheckForIntersect in sweep.o
  "___gl_pqSortInit", referenced from:
      _InitPriorityQ in sweep.o
  "___gl_pqSortDeletePriorityQ", referenced from:
      _InitPriorityQ in sweep.o
      _DonePriorityQ in sweep.o
      _CheckForIntersect in sweep.o
  "___gl_pqSortDelete", referenced from:
      _CheckForRightSplice in sweep.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:53:40.350

这意味着即使编译器有头文件，当它实际链接它们时，它也没有找到这段代码的真正实现。所以也许你没有链接你的静态库（只包含头文件），或者这个静态库没有为 i386 架构编译。所以你不能让它在模拟器上工作。您应该使用 lipo -info libMylib.a 检查它已编译的架构类型（armv6 - armv7 - armv7s 或其他）

好的，我发现了什么：这是您正在使用的扫描文件。

[http://oss.sgi.com/cgi-bin/cvsweb.cgi/projects/ogl-sample/main/gfx/lib/glu/libtess/sweep.c?annotate=1.2](http://oss.sgi.com/cgi-bin/cvsweb.cgi/projects/ogl-sample/main/gfx/lib/glu/libtess/sweep.c?annotate=1.2)

里面

```
static int CheckForRightSplice( GLUtesselator *tess, ActiveRegion *regUp ) 
```

有

```
pqDelete( tess->pq, eUp->Org->pqHandle ); /* __gl_pqSortDelete */ 
```

顺便进入扫描的包含文件有：

```
#include "priorityq.h" 
```

所以它让你编译，因为你有函数的头定义，但你没有二进制实现。所以你得到链接器错误。我不知道你是否需要在你的 mac 中安装 openGl（虽然它已经包含在内），顺便说一下，我确定你没有 (opengl/glu/libtess) libtess 库，这就是“ priority.h”定义。

这是 glu 库（如果找到）： [http ://svn.netlabs.org/repos/gl2/opengl/glu/libtess/](http://svn.netlabs.org/repos/gl2/opengl/glu/libtess/)

所以你应该问问你的朋友他是否自己编译了框架。也许你忘记在你的 Xcode 项目中添加一些链接，或者你的 mac 中缺少二进制文件，或者没有编译到 i386 中（即使我对此表示怀疑）。顺便说一句，我真的不是 openGl 专家，但如果你邀请任何人加入 openGl 论坛，他们肯定可以帮助你。

# c - C中的指针数组？

> ID：12927858
> 
> 赞同：2
> 
> 时间：2012-10-17T05:46:44.160
> 
> 标签：c, arrays, pointers, multidimensional-array

```
int b[3][2] = { {0, 1}, {2, 3}, {4, 5} };
int (*bpp)[2] = b;
int *bp = b[0]; 
```

在上面的代码中：是`*bpp`指向二维数组的指针吗？还是长度为 2 的指针数组？为什么`*bpp`用括号括起来？`*bpp[2]`和有区别`(*bpp)[2]`吗？

同时，在以下代码中：（更改数组的维度）

```
int i[4] = { 1, 2, 3, 4 };
int (*ap)[2] = (int(*)[2])i; 
```

第二行让我很困惑，尤其是 typecasting `(int(*)[2])`，它到底是什么数据类型？

谢谢你^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:49:51.073

`bpp`是一个指向两个数组的指针`int`。`*bpp`是两个 的数组`int`。`int *bpp[2]`将声明`bpp`为一个由两个指针组成的数组`int`（这个括号使它成为一个指向两个数组的指针`int`）。

`(int(*)[2])`是对指向两个数组的指针的强制转换`int`。

这些可以通过考虑“声明遵循使用”规则（结合运算符优先级的知识）来阅读：

```
 dereference (so bpp is a pointer)
     |
     v
int (*bpp)[2]
 ^         ^
 |         |
 |  array index (so the thing that bpp points to is an array)
 |
 the thing on the left is the final type... here it is int,
 so the array is an array of int 
```

# android - 为什么GreenDAO不完全支持LIKE算子？

> ID：12927859
> 
> 赞同：6
> 
> 时间：2012-10-17T05:46:49.760
> 
> 标签：android, greendao

GreenDAO 只支持 LIKE 算子的一个位置。它是`" LIKE ?"`

我想用这个运算符获取各种记录。例如`" LIKE %?"`,`" LIKE ?%"`和`" LIKE %?%"`. 但 GreenDAO 不支持。

我也用过`queryRaw()`and `queryRawCreate()`，不幸的是它也没有用。例如：

> libDocSeriesDao.queryRawCreate(" where T.Title Like '%?%' or T.ViewTitle Like '%?%'", aKeyword, aKeyword).listLazy();

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T08:53:09.717

使用 '?' 时，'%' 字符不能是查询字符串的一部分 特点。绑定参数时可以使用 % 的任意组合。

这是一个如何使用 LIKE 查询的示例（取自[https://github.com/greenrobot/greenDAO/commit/788313904fa58a0c8628f6b2e016a4a385f344c6](https://github.com/greenrobot/greenDAO/commit/788313904fa58a0c8628f6b2e016a4a385f344c6)的 greenDAO 的单元测试）：

```
Query<TestEntity> query = dao.queryBuilder().where(Properties.SimpleString.like("%robot")).build();
TestEntity entity2 = query.uniqueOrThrow();
assertEquals(entity.getId(), entity2.getId());

query.setParameter(0, "green%");
entity2 = query.uniqueOrThrow();
assertEquals(entity.getId(), entity2.getId());

query.setParameter(0, "%enrob%");
entity2 = query.uniqueOrThrow();
assertEquals(entity.getId(), entity2.getId()); 
```

同样的原则也适用于原始查询。对于您的示例，您应该这样做：

```
libDocSeriesDao.queryRawCreate(" Where T.Title Like ? Or T.ViewTitle Like ?", aKeyword, aKeyword).listLazy(); 
```

此外，aKeyword 必须具有 % 字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-16T11:06:08.240

更容易：

```
dao.queryBuilder().where(Properties.SimpleName.like(name+"%")).list() 
```

# openstack - 如何为 nova-api 设置 os.environ？

> ID：12927860
> 
> 赞同：0
> 
> 时间：2012-10-17T05:46:50.260
> 
> 标签：openstack, openstack-nova

我想在 nova-api 中设置一些变量。

设置它的最佳方法是什么？（在`nova.conf`或其他文件中？）

我可以在`/etc/nova/nova.conf`api 中设置并获取该变量的值。但是还有其他方法可以为 API 设置环境变量吗？我想`os.environ`在脚本中访问。（这是正确的访问方式吗？）

据我所知，`wsgi`我们必须在 apache 的配置文件中进行设置。但是对于新星我找不到文件:(。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:10:34.187

从 init.d 脚本设置环境变量。在脚本`/etc/init.d/openstack-nova-api`中使用了一个文件，`/etc/sysconfig/$prog`因此我们在该文件中设置了导出变量并稍后获得了引用。

# sql - 使用 SQL 2008/2012 计算状态之间的时间范围

> ID：12927861
> 
> 赞同：1
> 
> 时间：2012-10-17T05:46:53.933
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

使用 SQL 2008/2012 计算状态之间的时间范围

我有下表存储学生的状态

```
+----+-----------+------------------+---------+---------+
| ID | PERSON_ID |    TIMESTAMP     | IN_HOME | STUDYNG |
+----+-----------+------------------+---------+---------+
|  1 |         1 | 17/10/2012 19:00 |       0 |       0 |
|  2 |         1 | 17/10/2012 19:02 |       1 |       0 |
|  3 |         1 | 17/10/2012 19:03 |       1 |       1 |
|  4 |         1 | 17/10/2012 19:04 |       1 |       1 |
|  5 |         1 | 17/10/2012 19:05 |       1 |       0 |
|  6 |         1 | 17/10/2012 19:10 |       0 |       0 |
|  7 |         1 | 17/10/2012 19:12 |       0 |       0 |
|  8 |         1 | 17/10/2012 19:20 |       1 |       0 |
|  9 |         1 | 17/10/2012 19:25 |       1 |       0 |
| 10 |         1 | 17/10/2012 19:26 |       1 |       1 |
| 11 |         1 | 17/10/2012 19:30 |       1 |       0 |
+----+-----------+------------------+---------+---------+ 
```

我想以两种方式产生结果来制作一些报告：

一世：

```
+-----------+------------------+------------------+---------+---------+
| PERSON_ID |      START       |       END        | IN_HOME | STUDYNG |
+-----------+------------------+------------------+---------+---------+
|         1 | 17/10/2012 19:00 | 17/10/2012 19:02 |       0 |       0 |
|         1 | 17/10/2012 19:02 | 17/10/2012 19:03 |       1 |       0 |
|         1 | 17/10/2012 19:03 | 17/10/2012 19:05 |       1 |       1 |
|         1 | 17/10/2012 19:05 | 17/10/2012 19:10 |       1 |       0 |
|         1 | 17/10/2012 19:10 | 17/10/2012 19:20 |       0 |       0 |
|         1 | 17/10/2012 19:20 | 17/10/2012 19:26 |       1 |       0 |
|         1 | 17/10/2012 19:26 | 17/10/2012 19:30 |       1 |       1 |
+-----------+------------------+------------------+---------+---------+ 
```

二：

```
+-----+------------------+------------------+--------+---------+----------+----------+
| PID |      START       |       END        | InHOME | TotTIME | FreeTIME | StudTIME |
+-----+------------------+------------------+--------+---------+----------+----------+
|   1 | 17/10/2012 19:00 | 17/10/2012 19:02 |      0 | 2min    | 2min     | 0min     |
|   1 | 17/10/2012 19:02 | 17/10/2012 19:10 |      1 | 8min    | 6min     | 2min     |
|   1 | 17/10/2012 19:10 | 17/10/2012 19:20 |      0 | 10min   | 10min    | 0min     |
|   1 | 17/10/2012 19:20 | 17/10/2012 19:26 |      1 | 6min    | 6min     | 0min     |
+-----+------------------+------------------+--------+---------+----------+----------+ 
```

解决这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:59:37.007

第一个可能看起来像这样。我只是不明白，为什么您在报告 I 的最后一行中有 STUDYING = 0（可能是错误？）

```
select
    T.PERSON_ID,
    min(T.[TIMESTAMP]) as START,
    CALC.[TIMESTAMP] as [END],
    T.IN_HOME, T.STUDYNG
from @Temp as T
    cross apply
    (
        select top 1 TT.*
        from @Temp as TT
        where 
            TT.PERSON_ID = T.PERSON_ID and TT.[TIMESTAMP] > T.[TIMESTAMP] and
            (TT.IN_HOME <> T.IN_HOME or TT.STUDYNG <> T.STUDYNG)
        order by TT.[TIMESTAMP] asc
    ) as CALC
group by 
    T.PERSON_ID,
    CALC.[TIMESTAMP],
    T.IN_HOME, T.STUDYNG
order by START 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:36:24.873

如果您可以使用 SQL 2012（如标题中所述），我建议您考虑使用这些`LEAD/LAG`功能。

当 SQL Fiddle 重新上线时，我将编写一个不错的小示例。

这是第一部分：

```
;WITH DATA 
     AS (SELECT *, 
                CASE 
                  WHEN ID = 1 THEN 1 
                  ELSE 
                    CASE 
                      WHEN IN_HOME = Lag(IN_HOME, 1) 
                                       OVER ( 
                                         ORDER BY TIMESTAMP) 
                           AND STUDYNG = Lag(STUDYNG, 1) 
                                           OVER ( 
                                             ORDER BY TIMESTAMP) THEN 0 
                      ELSE 1 
                    END 
                END rn 
         FROM   STUDY), 
     PREPARED_DATA 
     AS (SELECT t1.ID, 
                t1.PERSON_ID, 
                t1.TIMESTAMP, 
                Sum(t2.RN) RN, 
                t1.IN_HOME, 
                t1.STUDYNG 
         FROM   DATA t1 
                INNER JOIN DATA t2 
                        ON t1.ID >= t2.ID 
         GROUP  BY t1.ID, 
                   t1.PERSON_ID, 
                   t1.TIMESTAMP, 
                   t1.IN_HOME, 
                   t1.STUDYNG), 
     SECOND 
     AS (SELECT PERSON_ID, 
                Max(TIMESTAMP) max_time, 
                Min(TIMESTAMP) min_time, 
                IN_HOME, 
                STUDYNG 
         FROM   PREPARED_DATA 
         GROUP  BY PERSON_ID, 
                   IN_HOME, 
                   STUDYNG, 
                   RN) 
SELECT PERSON_ID, 
       MAX_TIME, 
       Lead(MIN_TIME, 1) 
         OVER ( 
           ORDER BY MIN_TIME), 
       IN_HOME, 
       STUDYNG 
FROM   SECOND 
ORDER  BY MIN_TIME 
```

可以在[此处](http://sqlfiddle.com/#!6/5b6f7/28)找到一个工作示例。
如果你喜欢这个主意，我也可以准备第二部分。让我知道。

# clickonce - Clickonce 与 Dropbox

> ID：12927862
> 
> 赞同：5
> 
> 时间：2012-10-17T05:46:56.040
> 
> 标签：clickonce, dropbox, azure-storage

我正在寻找使用 Dropbox 发布 ClickOnce 的内容，发现*[我需要人们对如何通过 FTP 更新 ClickOnce 应用程序的意见](https://stackoverflow.com/questions/11095482/i-need-peoples-opinion-on-how-to-update-a-clickonce-app-through-ftp)*。

似乎答案对用户有用，但是当我尝试使用我的 Dropbox 帐户实现它时，它不起作用，我得到了不同的 URL 模式。

一个示例： [https ://www.dropbox.com/sh/4bco6ezixre165k/QCjfk7jy6R/PublishedApps](https://www.dropbox.com/sh/4bco6ezixre165k/QCjfk7jy6R/PublishedApps)

因此，我的 Dropbox 帐户似乎正在使用具有不同 URL 模式的 HTTPS。

我仔细检查了 Dropbox 设置，并没有发现任何关于 HTTPS 配置的信息。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T10:53:03.913

只是为了澄清这个问题，我仍在使用 Dropbox 发布 ClickOnce 应用程序，但我是通过公共链接这样做的。Dropbox 于 2012 年 10 月停止为新用户提供公共文件夹，但现有用户（例如我自己）保留了该功能。

我发现这种方法非常有效，因为 Dropbox 每次只上传更改的文件，而不是整个文件夹。这意味着我可以进行更新，并且新版本可以在几秒钟内获得。

@Adel：Azure 似乎是一个可行的选择。我刚刚发现发布所需的时间比 Dropbox 要长得多，可能是因为南非没有 Azure 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:04:12.557

因为 Dropbox 不能再用于 ClickOnce 部署（至少现在是这样），所以我最终使用了 Azure 存储。

我发现以下文章对设置很有用：

*   *[如何在 Azure Blob 存储中托管 ClickOnce 部署](http://robindotnet.wordpress.com/2011/02/13/how-to-host-a-clickonce-deployment-in-azure-blob-storage/)*

*   *[在 Azure 中托管 ClickOnce 部署，每月只需几美分](http://robindotnet.wordpress.com/2011/07/18/host-your-clickonce-deployment-in-azure-for-pennies-per-month/)*

我希望这有帮助。

# php - php 变量在 jquery 或 javascript highchart 中正确传递

> ID：12927866
> 
> 赞同：0
> 
> 时间：2012-10-17T05:47:29.877
> 
> 标签：php, javascript, jquery

单击此处获取 jsfiddle highchart 链接：[Column - Bar High Chart](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-basic/)

这段代码是Column bar highchart的实际代码，有没有办法让它的图形基于php varible。

```
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <script type='text/javascript' src='js/jquery.min.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>

  </style>

<script type='text/javascript'>

$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: [{
                name: 'Tokyo',
                data: [100, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

            }, {
                name: 'New York',
                data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]

            }, {
                name: 'London',
                data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]

            }, {
                name: 'Berlin',
                data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]

            }]
        });
    });

});
//]]>  

</script>

</head>
<body>
  <script src="js/highcharts.js"></script>
<script src="js/exporting.js"></script>
<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
</body>
</html> 
```

问题是这可能“ `[100, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]`”

成为

```
[<?php $newval1.",".$newval2.",".$newval3.",".$newval4.",".$newval5.",".$newval6.",".$newval7.",".$newval8.",".$newval9.",".$newval10.",".$newval11.",".$newval12 ?>] 
```

所以值来自php变量，纠正我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:49:26.700

这是可能的，但你必须这样做：

```
[<?php echo $newval1.",".$newval2.",".$newval3.",".$newval4.",".$newval5.",".$newval6.",".$newval7.",".$newval8.",".$newval9.",".$newval10.",".$newval11.",".$newval12; ?>] 
```

这与您现在拥有的完全相同，只是您忘记了添加的`echo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:53:07.747

在 PHP 中创建一个这样的字符串：

```
<?php 
$newval1 = "100";
$newval2 = "250";
..... // Your variables

// Now pass the values to make the string
$str = "[$newval1, $newval2, $newval3, $newval4, $newval5, $newval6, $newval7]";
?> 
```

并在 javascript 中应用，例如：

```
data: <?php echo $str; ?> 
```

# java - 链表java的add方法

> ID：12927868
> 
> 赞同：0
> 
> 时间：2012-10-17T05:47:41.340
> 
> 标签：java, linked-list

将节点添加到链表时，我想这个想法如下：

```
Declare newNode 
Add to the front if front == null
else if there is already a node in the list 
```

但是，这似乎不起作用

```
public boolean add (E e) {

  ListNode<E> newNode = new ListNode<E>(e,null);

  if (front == null){
      front = newNode;
      rear = newNode;
      objectCount++;
      return true;
  }

      front.next = newNode;
      rear.next = newNode;
      rear = newNode;
      objectCount++;
      return true;
} 
```

但是当我为列表“a”、“b”、“c”、“d”、“e”运行它时，它不会返回大小为 5 而是大小为 2 的列表。这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:49:26.243

您将在前节点和后节点旁边添加新节点。为了解决这个问题，你应该把它添加到后端节点（假设你的列表只接受后端的新值）。

```
//front.next = newNode;
rear.next = newNode;
rear = newNode;
objectCount++;
return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:54:32.930

您不应该修改前端节点内的下一个指针。如果存在前端节点，请执行以下步骤：

1.  创建一个新节点
2.  将后方的下一个节点设置为新节点。
3.  将后节点设置为新节点。
4.  增加计数器。

# ios - 在 UITableViewCell 内的 UITextView 上 resignfirstresponder

> ID：12927869
> 
> 赞同：0
> 
> 时间：2012-10-17T05:47:43.273
> 
> 标签：ios, xcode, uitableview, uipopovercontroller

我希望有人可以帮助我解决 IOS/XCode 问题。

我需要在 UITableViewCell 内创建一个 UITextView，此 UITextView 响应用户单击，然后将显示 UIPopoverController 以便显示子 UITableView（在 UIPopoverController 内）允许用户从选项列表中进行选择（文本行）。在用户选择选项（其中一行文本）后，该行文本将显示在所述 UITextView 内。我遇到的第一个问题是，当用户单击 UITextView 时，会显示键盘而不是 UIPopoverController。我该如何禁用ie。调用 resignFirstResponder 以便代替显示键盘，而是显示 UIPopoverController 。有人愿意分享类似的代码吗？或指出一些如何做到这一点的样本？提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:56:31.370

您可以使用以下委托方法来检测何时点击 textView 并相应地显示您的 popOverController，在委托方法中返回“NO”，这样就不会出现键盘...

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
//  code to show popOverController 

 return NO;
} 
```

# c# - 如何即时返回方法的完全限定名称？

> ID：12927873
> 
> 赞同：15
> 
> 时间：2012-10-17T05:48:18.987
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcMusicStore.Controllers
{
    public class StoreController : Controller
    {
        //
        // GET: /Store/

        public string Index()
        {
            return "MvcMusicsStore.Controllers.StoreController.Index";
        }

    }
} 
```

如何即时返回方法的完全限定名称？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T05:53:34.483

没有任何硬编码？可能是什么？

```
public string Index()
{
    return GetType().FullName + GetMemberName();
}

static string GetMemberName([CallerMemberName] string memberName = "")
{
    return memberName;
} 
```

或者更漂亮：

```
public string Index()
{
    return GetMemberName(this);
}

static string GetMemberName(
    object caller, [CallerMemberName] string memberName = "")
{
    return caller.GetType().FullName + "." + memberName;
} 
```

（我使用`static`是因为我假设在实际代码中您希望将该方法放在某个实用程序类中）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T05:55:24.460

如果您使用的是 C# 5，则可以稍微简单地执行此操作，但这也可以：

```
var method = MethodBase.GetCurrentMethod();
var type = method.DeclaringType;
var fullName = string.Format("{0}.{1}", type.FullName, method.Name); 
```

当然，这是假设该方法没有被覆盖。不幸的是，您当然不能将其放入实用程序方法中，否则当前方法就是实用程序方法。

你可以用它[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)来解决这个问题，但你需要小心内联 - 如果你创建一个实用方法，然后从一个本身内联的方法中调用它，你会得到你想要的方法的*调用者:(*

# ruby-on-rails - rails将参数传递给回调

> ID：12927877
> 
> 赞同：0
> 
> 时间：2012-10-17T05:48:32.043
> 
> 标签：ruby-on-rails, callback, model-associations

我有两个模型

```
class Department < ActiveRecord::Base
  has_many :checklists
  attr_accessible :deadline
  after_update :update_checklist

class Checklist < ActiveRecord::Base
  belongs_to :department
  attr_accessible :content, :category 
```

基本上，“部门”模型有一个称为“截止日期”的虚拟属性，它是日期类型。'deadline' 的实际值以字符串格式存储在另一个模型 'checklist' 中。

每次更新'deadline'时，我想检查'checklist'中是否有条目，并创建（如果还没有）或更新（如果已经有条目）。

我是这样想的

```
def deadline=(deadline)
  @cl = Checklist.find_or_create_by_department_id_and_category(self.id, 'deadline')
  @cl.update_attributes(:content => deadline.to_s)
  @cl.save
end

def deadline
  @deadline = self.checklists.find_by_category('deadline')
  Date.parse(@deadline.to_s)
end 
```

但是上面的虚拟属性不起作用。在寻找答案时，我在 rails cast 上发现，对于这种情况，回调将是一个更好的解决方案。所以我正在尝试类似的东西：

```
class Department < ActiveRecord::Base
  after_update :update_checklist

def update_checklist
  @cl = Checklist.find_or_create_by_department_id_and_category(self.id, 'deadline')
  @cl.update_attributes(:content => ???)
end 
```

我不确定如何将值传递给回调。

请帮我做这个设计。处理这个问题的标准方法是什么？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:22:36.487

update_checklist 是一个部门的方法。`self.id`因此，在 update_checklist 中，您可以访问任何部门属性，就像`self.deadline`您想要的一样。

# iphone - 如何实现在字典数组中搜索字符串？

> ID：12927880
> 
> 赞同：1
> 
> 时间：2012-10-17T05:48:47.787
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中我有一个像这样创建的 nsmutable 数组。

```
NSDictionary *memberInfo = [self.currentChannel infoForMemberWithID:memberID];

    for(int i=0;i<self.currentChannel.memberCount;i++)
    {
        [searchfriendarray addObject:memberInfo];   

    }

     NSLog(@"dfdfdfsear%@",searchfriendarray); 
```

我得到的回应是这样的

```
dfdfdfsear(
        {
        name = baddd;
        status = "<null>";
    },
        {
        name = baddd;
        status = "<null>";
    }
) 
```

` 现在我想在 this.with 方法中搜索一个 nsstring

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText 
```

任何人都可以帮助我实现搜索并根据它加载我的表格视图吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:57:17.017

使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)过滤数组。

```
NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:@"name contains[cd] %@", searchString];
[yourMutableArray filterUsingPredicate:filterPredicate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:06:25.413

你可以用[`NSPredicate`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)这个。

**谓词**
**谓词是过滤数组的有用对象。这有点像在 SQL 中使用简单的 where 子句进行选择。**

如果您有这种格式的数组

```
NSMutableArray *yourAry;
(
        {
        category = classic;
        quote = "Frankly, my dear, I don't give a damn.";
        source = "Gone With the Wind";
    },
        {
        category = classic;
        quote = "Here's looking at you, kid.";
        source = Casablanca;
    }
{
        category = modern;
        quote = "I solemnly swear that I am up to no good.";
        source = "Harry Potter and the Prisoner of Azkaban";
    },
        {
        category = modern;
        quote = "You like pain? Try wearing a corset.";
        source = "Pirates of the Caribbean";
    }
) 
```

并且您想搜索所有数组，`category = classic`然后我们可以使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)。

```
NSString *selectedCategory = @"classic";

   //filter array by category using predicate
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"category == %@", selectedCategory];
    NSArray *filteredArray = [self.movieQuotes filteredArrayUsingPredicate:predicate]; 
```

如果您需要任何帮助，请关注此[博客](http://rajneesh071.blogspot.in/2012/10/predicates.html)

# windows-8 - 使用C++代码直接在IMFMediaBuffer上画一个矩形

> ID：12927883
> 
> 赞同：2
> 
> 时间：2012-10-17T05:49:08.623
> 
> 标签：windows-8, microsoft-metro, windows-runtime, ms-media-foundation

目前，我尝试从[Media Foundation Transform](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)修改示例。我倾向于实现以下目标

*   在 C++ 代码中执行人脸检测。
*   将检测到的人脸坐标传回 C# 代码。
*   让 C# 在屏幕上绘制检测到的面部矩形。

我完成了第 1 步。但是，我被第 2 步所吸引。我面临着类似的问题：[How to get feedback from MediaCapture API in Windows 8](https://stackoverflow.com/questions/12907538/how-to-get-feedback-from-mediacapture-api-in-windows-8)。我找不到办法让我的 C++ MFT 代码与 C# 代码交谈。

我在想另一种解决方法。**使用 C++ 代码****直接绘制一个矩形。`IMFMediaBuffer`**

但是，我没有看到 Microsoft 提供这样的 API 来做到这一点。如果没有，我可以使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:10:58.720

如果您可以设置像素颜色，那么使用循环绘制矩形应该相当简单。

```
for (int y = top; y <= bottom; y++)
    for (int x = left; x <= right; x++)
        pixels[y * width + x] = color; // pseudocode 
```

仅绘制矩形的边框只是 4 个单独的循环。

最简单的画圆方法：

```
for (int y = -r; y <= r; y++)
    for (int x = -r; x <= r; x++)
        if (x * x + y * y < r * r)
            pixels[(center.y + y) * width + center.x + x] = color; // pseudocode 
```

# python - GTK 主要块——Python

> ID：12927884
> 
> 赞同：0
> 
> 时间：2012-10-17T05:49:12.763
> 
> 标签：python, gtk, event-loop

我是 GTK 的新手，偶然发现了一个听起来很简单的问题，但我就是找不到解决方法。基本上，调用`gtk.main()`会使我的单线程进程停止。我知道这`gtk.main()`是阻塞的，但我之前没有打电话`gtk.main()`，所以退出主循环不会有任何好处，因为没有循环可以退出。

即便如此，返回 0。此外，当我从 python 命令行`gtk.main_level()`尝试时，它也会挂起。`gtk.main()`我缺少一些基本的东西，所以有人可以指出我吗？赞赏。

编辑：我需要的 Gtk 方法是`gobject.add_timeout`，像这样：

```
gobject.timeout_add(2000, callback)
gtk.main() # This blocks the thread. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T07:01:21.057

看起来它正在阻塞应用程序，但正在做的是处理事件。其中一个事件必须终止循环。[您可以在 Wikipedia](http://en.wikipedia.org/wiki/Event_loop)中查看事件循环背后的想法。

如果你不想编程图形界面，那么你不需要Gtk，你只需要Glib。这里有一个例子向你展示主循环是如何工作的（这个概念在 Gtk 和 Glib 中是相似的）：

```
from gi.repository import GLib, GObject

counter = 0

def callback(*args):
    global counter
    counter += 1
    print 'callback called', counter
    if counter > 10:
        print 'last call'
        return False

    return True

def terminate(*args):
    print 'Bye bye'
    loop.quit()

GObject.timeout_add(100, callback)
GObject.timeout_add(3000, terminate)
loop = GLib.MainLoop()
loop.run() 
```

如果回调返回`False`，那么它将被删除并且不再调用。如果您希望再次调用回调，它必须返回`True`（如您在函数中所见`callback`）。

我设置了另一个回调`terminate`来显示如何退出循环。如果你没有明确地这样做，那么 GLib 将继续等待更多的事件（它没有任何方法知道你想要做什么）。

使用 PyGTK（旧且已弃用），代码将是：

```
import gobject, glib, gtk

counter = 0

def callback(*args):
    global counter
    counter += 1
    print 'callback called', counter
    if counter > 10:
        print 'last call'
        return False

    return True

def terminate(*args):
    print 'Bye bye'
    loop.quit()

gobject.timeout_add(100, callback)
gobject.timeout_add(3000, terminate)
loop = glib.MainLoop()
loop.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T04:05:25.307

我遇到了同样的问题，然后我`gtk.gdk.threads_init()`在 call 之前添加了这个`gtk.mainloop()`。它适用于我

# html - CSS 高度属性和嵌套列表

> ID：12927889
> 
> 赞同：0
> 
> 时间：2012-10-17T05:49:26.067
> 
> 标签：html, css

我正在尝试在 Joomla 菜单中设置一组嵌套的列表项，以便最外面的父母向下移动以为孩子腾出空间。列表项的高度也需要设置高度，因为菜单项是按钮。目前发生的情况是子项下方的父项水平推入子项的空间，以便它们重叠。这是我要实现的目标的简化示例：

```
<ul>
     <li style="height: 40px;">Parent Item 1
     <ul>
          <li style="height: 40px;">Child item of 1</li>
     </ul>
     </li>
     <li style="height: 40px;">Parent Item 1</li>
</ul> 
```

这是我网站上一个页面的链接，该页面正好显示了这种情况：

[http://procadsys.worldnz.co.nz/test](http://procadsys.worldnz.co.nz/test)

CSS有什么办法可以在这个列表中正确计算高度，以便每个级别比前一个级别低40像素而没有任何级别重叠？我也尝试将位置属性更改为固定和相对，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:32:01.980

解决了。答案是使用行高，而不是高度：

```
<ul>
     <li style="line-height: 40px;">Parent Item 1
     <ul>
          <li style="line-height: 40px;">Child item of 1</li>
     </ul>
     </li>
     <li style="line-height: 40px;">Parent Item 1</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:28:59.430

您使用此样式代码

```
ul > li:hover ul{
  height:40px;
  margin:0;
  padding:0;
} 
```

# asp.net - 使用 SharePoint 2010 验证视图状态 MAC 失败

> ID：12927891
> 
> 赞同：1
> 
> 时间：2012-10-17T05:49:27.993
> 
> 标签：asp.net, sharepoint, master-pages, viewstate, hidden-field

我的 SharePoint 2010 应用程序陷入了这个视图状态问题。

目前我创建了一个自定义母版页，它使用名为 Navigation 的自定义控件。导航控件 HTML 仅包含 3 个隐藏字段以存储数据。

当我为我的站点应用母版页时，我创建了一个列表，然后将一个三态工作流添加到列表中。在 Add a Workflow 屏幕 (/_layouts/Addwrkfl.aspx) 中选择三态工作流后，单击 OK 提交。

然后我收到了这个错误信息

**视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。**

**堆栈跟踪：**

```
[ViewStateException: Invalid viewstate. 
    Client IP: 192.168.149.149
    Port: 56086
    User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E; InfoPath.3)
    ViewState: /wEWBAKi+o3/DAKVnOnXCwKa66m6DgKoxMKWBhUcn2XAshDSDMZdpDN35fWC8RHp
    Referer: `http://localhost/_layouts/Addwrkfl.aspx?List=%7B2897B53B%2D16AF%2D47A9%2DB963%2DC9501432C5CA%7D`
    Path: /_layouts/ItemRWfAssoc.aspx]
[HttpException (0x80004005): Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster.]
   System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMessage, Boolean macValidationError) +148
   System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) +10977361
   System.Web.UI.ClientScriptManager.EnsureEventValidationFieldLoaded() +205 
```

*

我还删除了导航控件背后的所有代码，但问题仍然出现。似乎错误出现在执行任何 C# 代码之前。

如果我尝试从导航控件中删除 3 隐藏字段，问题就消失了。

任何人都可以帮助我解决这个问题吗？任何想法将不胜感激。

提前致谢。

仅供参考，我不使用 Web Farm 托管我的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T16:26:13.470

在我添加一些自定义委托控件以在母版页中运行后，我在我的 SP 2010 场上收到此错误。该控件具有服务器端文本框和其他一些 html 元素，当我将 asp:textbox 切换为 html 输入时，问题就消失了

# php - PHP 警告如何影响 Google SEO

> ID：12927897
> 
> 赞同：0
> 
> 时间：2012-10-17T05:49:52.287
> 
> 标签：php, seo

当我在开发环境中运行我的 PHP 脚本时，我有一些警告消息。但在生产环境中没有警告消息。

我不确定删除这些 PHP 警告是否会增加我在 Google 上的 SEO 分数。如果答案是肯定的，我应该通过更正我的代码来删除它们，还是仅仅关闭 PHP 警告就足够了？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:52:50.063

最终用户将无法看到警告，因此他们不会直接影响 SEO。但是，警告的副作用可能会导致格式错误的标记，但是如果不看具体情况，就不可能说这是否最终会影响页面排名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:05:05.753

警告信息不会对 SEO 产生任何影响。Google 将索引您的网页而不是您的服务器日志。

但就最佳实践而言，最好找出并修复警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T06:00:20.390

如果您在生产环境中没有警告消息，为什么您认为它们会影响您的 SEO 状态？

如果你有它们，那么最好解决问题或禁用警告消息，这至少对访问者来说更好，即使谷歌不关心它们。

另外，为什么您认为解决问题以防止抛出警告消息可能会产生不同的结果，而只是简单地禁用它们？最后你不会有那些警告信息，对吧？

没有人能看到你是如何在你的 PHP 代码中做到这一点的，他们会看到结果......

# linux - 为 DMZ Linux 服务器构建 BIND

> ID：12927901
> 
> 赞同：0
> 
> 时间：2012-10-17T05:50:22.833
> 
> 标签：linux, dns, bind

我已经在我们的 DMZ 中安装了 CentOS-6 服务器。
我有一个公共 IP 地址，我将使用它。
现在，我应该如何设置它的 DNS 以使其可以从 Internet 访问？
为了将服务器传播到互联网，BIND 是否需要任何特定步骤？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:31:23.400

配置你可以使用

[http://www.howtoforge.com/bind-installation-on-centos](http://www.howtoforge.com/bind-installation-on-centos)

你应该参考这个以前的线程

[https://serverfault.com/questions/153690/why-arent-our-dns-records-propagating-out-into-the-internet](https://serverfault.com/questions/153690/why-arent-our-dns-records-propagating-out-into-the-internet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:59:33.747

可以说没有“传播”；传播通常是一个术语，用于描述当旧记录已被某些服务器缓存时对 DNS 进行的任何更新的延迟。

在这种情况下，当您说您希望服务器上的 DNS 可以访问 Internet，您可能正计划将 BIND 用作权威服务器，为一个或多个区域提供服务。在这种情况下，您只需确保 TCP*和*UDP 端口 53 对来自任何地方的传入流量开放。您将以相当标准的方式设置 BIND。只需安装 BIND，为其添加一些区域。

然后，在您托管的区域上，您将引用运行此 BIND 实例的机器的主机名（并且该主机名必须可解析为 IP 地址），例如 ns1.myzns.com。

# php - shell脚本会在写入内容时锁定文件吗？

> ID：12927904
> 
> 赞同：0
> 
> 时间：2012-10-17T05:50:31.783
> 
> 标签：php, file, shell, filelock

我有一个 shell 脚本，它将内容写入文件，

```
#!/bin/bash
SLEEP=1
FILE_PATH=${1}
while true
  do
    ps aux wc -l > ${FILE_PATH}
    sleep ${SLEEP}
done 
```

我有另一个使用 file_get_contents() 读取文件内容的 PHP 脚本。我知道 file_get_contents() 会生成一个 LOCK_EX （独占锁）。

我的问题是，

1.  shell脚本会在写入文件时锁定文件吗？如果是的话，它将使用什么类型的锁，独占，共享......？
2.  由于我的 PHP 脚本也锁定了文件，它会阻止 shell 脚本写入并使文件对 shell 脚本不可用吗？

因为我以 1 秒的间隔在 shell 脚本中编写文件。我担心两个脚本中文件写入/读取失败的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:54:17.970

通常，任何文件写入都需要独占锁。

在 shell 脚本释放之前，PHP 脚本将无法获得其锁定，反之亦然。当两个进程竞争相同的资源时，这会导致所谓的死锁。

您可以使用一些策略来实现更丰富的进程间合作，但我建议您使用不同的策略来生成进程列表。

# android - 获取与任何组无关的联系人

> ID：12927907
> 
> 赞同：1
> 
> 时间：2012-10-17T05:50:46.280
> 
> 标签：android, contacts, android-contacts, contactscontract

我正在努力在 android 应用程序中明智地显示联系人组。因此，我从特定组中获取了所有组联系人，但现在我想获取不在任何组中的联系人（未分配）。

那么在没有组**ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID**的情况下，联系人中 GROUP_ROW_ID 的值是多少？

如果您知道任何解决方案，请告诉我。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:35:06.653

Please use,

```
 ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID = null; 
```

This will get non-group contacts.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T12:03:23.857

您可以检索所有联系人作为光标。

```
Cursor cursor = getContentResolver().query(   ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,null, null); 
```

现在我们有了带有联系人的 cusror 并从 cusror 获得不同的价值。

```
while (cursor.moveToNext()) {
String name =cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));

String phoneNumber = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
 } 
```

看到这个[http://samir-mangroliya.blogspot.in/p/android-read-contact-and-display-in.html](http://samir-mangroliya.blogspot.in/p/android-read-contact-and-display-in.html)

# java - 如何比较非英文字符和口音

> ID：12927913
> 
> 赞同：15
> 
> 时间：2012-10-17T05:51:03.013
> 
> 标签：java, special-characters, string-comparison

我想比较其中有一些非英文字符的 2 个字符串

```
String1 = debarquer
String2 = débárquér 
```

在比较上述两个字符串时，他们应该说相等。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T05:54:35.990

使用 Collat​​or 类。它允许您设置强度和语言环境，它将适当地比较字符。

它应该与此类似（注意：我尚未测试该程序）

```
import java.text.Collator;
import java.util.Locale;

public class CollatorExp {

    public static void main(String[] args) {
        Collator collator = Collator.getInstance(Locale.FRENCH);
        collator.setStrength(Collator.PRIMARY);

        if (collator.compare("débárquér", "debarquer") == 0) {
            System.out.println("Both Strings are equal");
        } else {
            System.out.println("Both Strings are not equal");
        }
    } 
} 
```

**更新：**需要注意的一点是，“débárquér”和“debarquer”永远不应被视为平等。但是，如果您要将它们分类，那么您不希望根据它们的 ASCII 值来比较它们。以“Joao”和“João”为例：如果根据 ASCII 对它们进行排序，可能会得到 Joao、John、João。这显然不好。使用 collat​​or 类可以正确处理这个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T05:57:17.047

为此，您可以使用 Java 的[Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)类。只需规范化字符串，然后去掉变音符号，如下所示：

```
String stripAccents(String string) {
    string = Normalizer.normalize(string, Normalizer.Form.NFD);
    string = string.replaceAll("\\p{InCombiningDiacriticalMarks}+", "");
} 
```

然后，您可以使用它来比较两个字符串减去重音符号：

```
stripAccents(string1).equals(stripAccents(string2)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-17T05:54:18.260

```
if (string1 != null){
if (string1.equals(string2)){
System.out.println("Equal");
}
else{
System.out.println("Not Equal");
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-17T05:57:00.063

有一种方法可以在 java 中比较 2 个字符串值。

```
 if(String1.equals(String2))
        {
           System.out.println("Equal");
        }
        else
        {
           System.out.println("Not equal");
        } 
```

# linq - 使用 Linq 将数据检索到 SelectListItem

> ID：12927915
> 
> 赞同：-2
> 
> 时间：2012-10-17T05:51:17.833
> 
> 标签：linq, entity-framework, linq-to-sql

我有班级学生名单

```
 public class studentList
    {
    public static IEnumerable<SelectListItem> GetStudents(int? ID)
            {
//code is required here
    return ;
            }
        } 
```

我在这个方法中获取 ID，现在，我需要表中的所有其他 ID，不包括使用 linq 传递的参数 ID。

我有 Student 表，其中包含两个字段 StudentID 和 StudentName，现在我需要上述模式中学生的 ID 和姓名..任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:52:55.063

可能喜欢阅读：[SQL to LINQ (Visual Representation)](http://pranayamr.blogspot.ca/2010/12/sql-to-linq-visual-representation.html)

```
 var data= form s in Students
     where s.StudentID != ID
    select new {ID= s.StudenID,Name = s.StudentName}; 
```

图像展示可能就像

![在此处输入图像描述](../Images/c3c43a2a78160b32aab1a6af62295c26.png)

# android - 设置 GPS 监听超时

> ID：12927917
> 
> 赞同：1
> 
> 时间：2012-10-17T05:51:26.587
> 
> 标签：android, geolocation, gps, android-location

我能够从网络提供商处获取位置更新，但是当涉及到 gps 时，需要花费大量时间来挑选数据。我想保留一个特定的时间，只有 GPS 侦听器才能工作，然后在一段时间后转到网络提供商。如何解决这个问题？

这是我的代码..

```
public void gpslocation()
    {
        final LocationManager locationManager = (LocationManager) this
        .getSystemService(Context.LOCATION_SERVICE);

        LocationListener locationListener = new LocationListener() {

    public void onLocationChanged(Location location)

    {
        updateLocationForGeo(location);
        //update(location);
        // Called when a new location is found by the network location provider.
        makeUseOfNewLocation(location);

    }

    private void makeUseOfNewLocation(Location location) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status,
            Bundle extras) {
    }

    public void onProviderEnabled(String provider) {

        System.out.println(provider+ "enabled  provider");

    }   

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        System.out.println(provider+ "disabled provider");
        networklocation();

    }

        };

    String locationProvider = LocationManager.GPS_PROVIDER;
    locationManager.requestLocationUpdates(locationProvider,  10 * 1000, (float) 10.0,locationListener);

            }
    public void networklocation()
    {
        final LocationManager locationManager = (LocationManager) this
        .getSystemService(Context.LOCATION_SERVICE);

        LocationListener locationListener = new LocationListener() {

    public void onLocationChanged(Location location)

    {
        updateLocationForGeo(location);
        //update(location);
        // Called when a new location is found by the network location provider.
        makeUseOfNewLocation(location);

    }

    private void makeUseOfNewLocation(Location location) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status,
            Bundle extras) {
    }

    public void onProviderEnabled(String provider) {

        System.out.println(provider+ "enabled  provider");

    }   

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        System.out.println(provider+ "disabled provider");
        isGpsProvidersDisabled=true;

    }

        };

    String timeProvider = LocationManager.NETWORK_PROVIDER;
    locationManager.requestLocationUpdates(timeProvider,  1 * 1000, (float) 10.0, locationListener);

            }
public void updateLocationForGeo(Location location){

    System.out.println("location updated");
    double dev_lat = location.getLatitude();
    double dev_lang = location.getLongitude();
    boolean out_of_range=false;

    for(int i=0; i<arrayLength; i++){

        double lattDiff = Math.toRadians(latarr[i]-dev_lat);

         double longDiff =  Math.toRadians(lonarr[i]-dev_lang);

         double distance=(Math.sin(lattDiff/2)*Math.sin(lattDiff/2))+(Math.sin(longDiff/2)*Math.sin(longDiff/2)*Math.cos( Math.toRadians(latarr[i]))*Math.cos( Math.toRadians(dev_lat)));

         System.out.println(distance+"  distance" );
         double c= (2 * Math.atan2(Math.sqrt(distance), Math.sqrt(1-distance)));

             double radius=radarr[i]* 1.60934;

             double d = 6371 * c;

         if(d>radius)
            {

        out_of_range=true;  
            continue;

            }
        else{
            System.out.println("enjoy");
            out_of_range=false;
            break;
            }

    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:59:04.383

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
        mlocListener);

public class MyLocationListener implements LocationListener {
private Address mAddresses;
@Override
public void onLocationChanged(Location loc) {
    loc.getLatitude();
    loc.getLongitude();

    Geocoder gcd = new Geocoder(getApplicationContext(),
            Locale.getDefault());
    try {
        mAddresses = gcd.getFromLocation(loc.getLatitude(),
                loc.getLongitude(), 1);

    } catch (IOException e) {

    }

    String cityName = (mAddresses != null) ? mAddresses.get(0)
            .getLocality() : TimeZone.getDefault().getID();
    String countryName = (mAddresses != null) ? mAddresses.get(0)
            .getCountryName() : Locale.getDefault().getDisplayCountry()
            .toString();

    mCurrentSpeed.setText("Longitude"+loc.getLongitude()+" Latitude"+loc.getLatitude());
}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Disabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Enabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}
} 
```

# c++ - 在OpenGL中实现自己的旋转功能

> ID：12927920
> 
> 赞同：1
> 
> 时间：2012-10-17T05:51:45.467
> 
> 标签：c++, opengl, algebra

我正在尝试在 C++ 上的 OpenGL 中实现我自己的旋转功能，例如 glRotate。我围绕 y 旋转的代码如下所示：

```
void do_rotateY(GLdouble angle)
{
    //rotate around y axis
    GLdouble s = angle;
    GLdouble c[4][4];
    c[1][1] = c[3][3]= 1.0;
    c[0][0] = c[2][2] = cos(s);
    c[2][0] = sin(s);
    c[0][2] = -c[2][0];
    glMultMatrixd(*c);
} 
```

当我打电话时：

```
glPushMatrix();
do_rotateY(100);
...draw something...
glPopMatrix(); 
```

屏幕上什么也没有出现。当我用 glRotatef(...) 替换 do_rotateY(...) 时，我可以正确看到所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T06:06:02.807

C++`cos`并`sin`期望弧度参数，但您正在通过度数。

在我看来，其他一切都很好。

# bash - Bash 重定向：将 stderr/stdout 保存到不同的文件并仍然在控制台上打印出来

> ID：12927927
> 
> 赞同：9
> 
> 时间：2012-10-17T05:52:24.520
> 
> 标签：bash

这是一个简单的程序。

```
class Redirection {

public static void main (String args[]){
    System.out.println("Hello World_Stdout");
    System.err.println("Hello World_Stderr");
}

} 
```

我想在控制台上查看所有输出，但同时我想将 stdout 和 stderr 存储在不同的文件中。我尝试了以下命令，但无济于事。

```
$java Redirection 3>&1 2>stderr 1>stdout 1>&3 2>&3 
```

stderr&stdout 文件的文件大小为 0。

所以基本上我想做“tee”命令做的事情，但我也想捕获stderr。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T06:01:31.907

这是一个答案：

`./yourScript.sh > >(tee stdout.log) 2> >(tee stderr.log >&2)`

如果你的脚本有 STDOUT 和 STDERR 描述符，你会得到 2 个文件*stdout.log* + *stderr.log*和所有输出（Err + Out）到控制台。

# delphi - 减去直到达到所需值

> ID：12927928
> 
> 赞同：1
> 
> 时间：2012-10-17T05:52:24.443
> 
> 标签：delphi, math

大家早上好。

我目前正在尝试找出一些我相信它足够简单但被证明是一项任务半才能真正解决的问题。

我正在开发一个项目，旨在通过将各种文件重新定位到其他地方来最大限度地减少驱动器的使用。我有一个`int64`值数组（0..12），其中包含我可能想要移动的文件的文件大小。数组的排序方式是预测的最大文件大小到预测的最小文件大小。我还将这些文件的名称存储在不同的数组中（称为`WoWData`, 也`[0..12]`）。然后我得到了“安装尺寸”和“所需尺寸”。

我的任务是计算我需要移动哪些文件，以便通过遍历文件大小数组将“安装大小”降低到“所需大小”，并将值从安装大小中取出，直到我达到 <=所需的大小。

这是我一直在尝试使用的一些示例代码（Delphi/Firemonkey）。试图弄清楚如何完成这样的任务让我感到困惑，因此毫无疑问会有很多问题；

```
Global Vars;
    _WoWDataFileSize : Array [0..12] of Int64;
    // "TBWoWDir" is a TTrackBar (Firemonkey)

var
  TotalSize, ReqSize, DiffSize, CurDiff : Int64;
  i : Integer;
begin
  // Set up initial values to work with
  ReqSize := Round(TBWoWDir.Value); // Requested Size
  TotalSize := Round(TBWoWDir.Max); // Actual installation size
  CurDiff := 0; // Assume as "Current Difference in size"

  // Calculate difference between install and requested size
  DiffSize := TotalSize - ReqSize; // This calculates correctly

// The below is what i'm struggling with
  repeat
    for i := Low(_WoWDataFileSize) to High(_WoWDataFileSize) do
      begin
        CurDiff := ReqSize - _WoWDataFileSize[i];
      end;
  until CurDiff <= ReqSize;
end; 
```

我确实尝试过只使用一个`repeat .. until`没有循环的`for`循环，但同样，我在试图弄清楚它时变得太困惑了。

* * *

让我举个例子。让我们假设它`_WoWDataFileSize[0]`是 200，并且`_WoWDataFileSize[1]`通过 to`_WoWDataFileSize[12]`与它们的数组索引的值相同（例如`_WoWDataFileSize[6]`= 6、`_WoWDataFileSize[8]`= 8 等）。

如果我想计算 150 的值（这将是`200 - 12 - 11 - 10 - 9 - 8`，或`Array[0] - Array[12] - Array[11] - Array[10] - Array[9] - Array[8]`根据数组），并从数组中获取我需要移动以满足此要求的文件列表，我将`WoWData`如何编写例程？

150 可以替换为任何数字，因为我正在努力实现由`TBWoWDir.Value`.

我在想我可能需要做一个`While`循环并使用`i := i+1`设置。实际上，我可以通过并对其进行硬编码，以便一次取出数组中的一个值，并每次检查我是否 <= 所需的值——每个项目有 2-3 行（所以总共 24-36 行），但这既难以维护又不是最佳的。我有兴趣看看它是如何在循环中完成的。我通常不会遇到循环问题，但这对我来说几乎不是标准的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:37:21.010

恕我直言，您的代码中仅缺少两行：o）

```
CurDiff := ReqSize;
// repeat
  for i := Low(_WoWDataFileSize) to High(_WoWDataFileSize) do
    begin
      CurDiff := CurrDiff - _WoWDataFileSize[i];
      if CurDiff <= ReqSize then break; // breaks the for..to loop
    end;
// until CurDiff <= ReqSize; 
```

编辑不需要重复...直到循环

但是恕我直言，仅计算大小而不存储匹配的文件并不是很有用。因此，使用 CustomObject 和 Lists（感谢泛型）将非常简单：

```
type
  TFileObject = class
  private
    FName : string;
    FSize : Int64;
  public
    constructor Create( AName : string; ASize : Int64 );
  published
    property Name : string read FName;
    property Size : Int64 read FSize;
  end;

procedure MoveFileObject(AMaxSize : Int64; ASrcList, ATarList : TList<TFileObject> );
var
  LItem : TFileObject;
  LSize : Int64;
begin
  LSize := 0;
  for LItem in ASrcList do
  begin
    if LSize + LItem.Size <= AMaxSize then
      begin
        LSize := LSize + LItem.Size;
        ATarList.Add( LItem );
      end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:08:16.490

```
curdiff:= 0;
i:= Low(_WoWDataFileSize) - 1;
while (curdiff <= reqsize) and (i < High(_WoWDataFileSize)) do
 begin
  inc (i);
  curdiff:= curdiff + _WoWDataFileSize[i];
 end; 
```

在循环结束时，要么你已经达到了所需的大小减少，要么你已经遍历了整个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:31:17.593

感谢大家的回答，我知道我哪里错了。当我在最初的问题中进行计算时，我忘记考虑我对值的划分（为了显示 MB 而不是 Bytes 与`TBWoWDir.Value`a 绑定`TLabel.text`，但实际大小在分配之前被划分`TBWoWDir.Max`）。

感谢 No'am Newman 的回答中的一些调整，我设法自己解决了这个问题。这就是我如何得到我想要的结果（或者更接近它）；

```
Global Vars;
    _WoWDataFileSize : Array [0..12] of Int64;
Global Const;
    _WoWData : Array [0..12] of String;
    // "TBWoWDir" is a TTrackBar (Firemonkey)

[...]
var
  ReqSize : int64;
  DiffSize, CurDiff : Int64;
  i, ii : Integer;
  FilesTot : Integer;
  FILESMSG : String;
begin
  // Set up initial values to work with
  ReqSize := Round(TBWoWDir.Value) * 1024 * 1024; // Requested Size - Multiplied from formatting
  TotalSize := Round(TBWoWDir.Max) * 1024 * 1024; // Actual installation size - Multiplied from formatting

  DiffSize := TotalSize - ReqSize; // Calculate Difference
  CurDiff := 0; // Reset Current Difference
  i := -1; // Reset i
  repeat
    inc (i); // Increment i
    CurDiff := CurDiff + _WoWDataFileSize[i]; // Add current array item file size to CurDiff
  until (CurDiff >= (DiffSize)) or (i >= 12); // Repeat until we reach ideal size or the end of the array

  // Calculate which array item we stopped at
  for ii := 0 to i do // use i from previous loop as the max
  begin
    FILESMSG := FILESMSG + 'File: ' + WoWData[ii] +
                           ' | Size: ' + IntToStr(_WoWDataFileSize[ii])+' '#13#10;
    FilesTot := FilesTot + _WoWDataFileSize[ii];
  end;

  // Show Message providing details
  ShowMessage('CurDiff:' + IntToStr(CurDiff div 1024 div 1024) +
              ' | DiffSize: ' + IntToStr(DiffSize div 1024 div 1024) +
              ' | Array i: ' +
              IntToStr(i) +#13#10+
              'Difference between CurDiff and DiffSize: '+ IntToStr(((DiffSize div 1024 div 1024) - (CurDiff div 1024 div 1024)))+#13#10#13#10+
              'File Details' +#13#10#13#10+
              FilesMsg +#13#10#13#10+
              'Total Size: ' + IntToStr(FilesTot));
end; 
```

那里的代码告诉我需要复制哪些文件（因此现在修改它以复制文件并不太难），并且整个代码`ShowMessage`用于自我证明（`ShowMessage`当我需要验证时在开发过程中使用值正确返回，我相信许多其他人也会这样做）。

# sorting - 在 birt 中对报告进行排序

> ID：12927929
> 
> 赞同：0
> 
> 时间：2012-10-17T05:52:25.463
> 
> 标签：sorting, datetime, report, birt

我使用 birt 在报告（日期时间列）中创建了列绑定。列绑定基于另一个字符串类型列的值提取的日期时间值。现在，当我根据列绑定对报表进行排序时，我得到的结果最初是根据字符串列排序的，然后是根据列绑定排序的。

我希望仅根据列绑定（日期时间）值对报告进行排序。

# jquery - jQuery查找数据元素

> ID：12927930
> 
> 赞同：0
> 
> 时间：2012-10-17T05:52:26.023
> 
> 标签：jquery, html, css

我有以下代码：

```
<div id="mainMenuInternalMyProfile" class="mainMenuInternalTab" data-pagename="myprofile">
  <div class="mainMenuInternalTabClickable">&nbsp;</div>
    <h4 class="mainMenuInternalTitle">MY PROFILE</h4>
    <img src="images/main-menu-divider.png" class="mainMenuBackGroundDivider" alt="Dating Internal Menu Background Divider">
    <img src="images/main-menu-selected.png" class="mainMenuBackSelected mainMenuBackSelectedOption" alt="Dating Internal Menu Selected">
  </div> 
```

在第一行中，您可以看到该`data-pagename="myprofile"`行。我有许多这样的 HTML 代码块，具有不同的`data-pagename`值。

我需要能够找到与手头匹配的数据值 - 让相同的“home”或“myprofile”，然后进行一些 CSS 更改。我尝试了以下方法：

```
var element = $('div.mainMenuInternalTab').find("[data-pagename='" + urlType + "']");
element.css({'color': '#000000','z-index':'100'}); 
```

我不确定我做错了什么。

我可以使用这样的元素吗？

我正在使用 find ，`$('div.mainMenuInternalTab')`但其中有几个类 - 我应该使用带有 ID 的更高 DIV 吗？

任何建议都会很棒-如果需要可以提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:57:20.220

或许这

```
$('div.mainMenuInternalTab').each(function() {
  var element = $(this).find("[data-pagename='" + urlType + "']");
  element.css({'color': '#000000','z-index':'100'});
} 
```

或者为颜色和 zIndex 创建一个类名：

```
element.toggleclass("black"); 
```

**更新**

我现在注意到您找到了 div，然后在同一个 div 上查找数据页面名，所以也许您的意思是

```
$('div[data-pagename="' + urlType + '"]').each(function() {
  $(this).css({'color': '#000000','z-index':'100'});
} 
```

甚至可能

```
$('div[data-pagename="' + urlType + '"]').css({'color': '#000000','z-index':'100'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:55:18.047

试试这个

```
element = $('div.mainMenuInternalTab[data-pagename="' + urlType + '"]'); 
```

或者

```
element = $('div.mainMenuInternalTab').filter('[data-pagename="' + urlType + '"]'); 
```

使用`.find(`) 将搜索 div 的子元素。

但是 data 属性是针对有问题的 div 的。所以省略它

你也可以链接你的选择器

```
 $('div.mainMenuInternalTab').filter('[data-pagename="' + urlType + '"]')
     .css({'color': '#000000','z-index':'100'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:35:47.593

.find() 方法应用不正确。试试这个：

**HTML**

```
<div id="mainMenuInternalMyProfile" class="mainMenuInternalTab" data-pagename="example1">
    <div class="mainMenuInternalTabClickable">&nbsp;</div>
    <h4 class="mainMenuInternalTitle">MY PROFILE</h4>
    <img src="images/main-menu-divider.png" class="mainMenuBackGroundDivider" alt="Dating Internal Menu Background Divider">
    <img src="images/main-menu-selected.png" class="mainMenuBackSelected mainMenuBackSelectedOption" alt="Dating Internal Menu Selected">
</div>

<div id="mainMenuInternalMyProfile" class="mainMenuInternalTab" data-pagename="example2">
    <div class="mainMenuInternalTabClickable">&nbsp;</div>
    <h4 class="mainMenuInternalTitle">MY PROFILE</h4>
    <img src="images/main-menu-divider.png" class="mainMenuBackGroundDivider" alt="Dating Internal Menu Background Divider">
    <img src="images/main-menu-selected.png" class="mainMenuBackSelected mainMenuBackSelectedOption" alt="Dating Internal Menu Selected">
</div> 
```

**jQuery**

```
$(document).ready(function() {
    $(".mainMenuInternalTab").each(function() {
        var _this = $(this);
        var pageName = _this.data("pagename");
        var urltype1 = "example1";
        var urltype2 = "example2";
        if (pageName === urltype1) {
            _this.css({
                "font-size": "5px"
            })
        } else if (pageName === urltype2){
           _this.css({
                "font-size": "25px"
           })
        }
    });
}); 
```

在我上面的 jQuery 中，我基本上是遍历所有实例`.mainMenuInternalTab`并将它们的`data-pagename`属性存储到一个变量中。之后，我刚刚制定了一个简单的条件语句，它基本上会根据存储的数据属性的值分配正确的样式。

[你可以在jsFiddle](http://jsfiddle.net/p57Ew/)找到我的工作示例。

# jquery-validate - 验证器未定义

> ID：12927931
> 
> 赞同：0
> 
> 时间：2012-10-17T05:52:38.243
> 
> 标签：jquery-validate, validation

我使用了 jQuery 验证器并将其绑定到这样的点击事件：

```
var validator = $("#formId").data('validator'); 
```

当我第一次单击加载页面时，我收到错误“验证器未定义”，但是当我刷新同一页面时它开始工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:55:21.773

找到了答案：我使用 jQuery mobile，我不得不像这样关闭 ajax：

```
$.mobile.ajaxEnabled = false; 
```

# c# - 使用 c# 和流式传输文件上传

> ID：12927932
> 
> 赞同：3
> 
> 时间：2012-10-17T05:52:40.877
> 
> 标签：c#, asp.net, c#-4.0, jquery

查看在 .NET 中上传文件的不同方法，例如 HttpPostedFile，并使用 HttpHandler，我试图更详细地了解该过程是如何工作的。

特别是它如何将信息写入文件。

说我有以下内容：

```
HttpPostedFile file = context.Request.Files[0];
file.SaveAs("c:\temp\file.zip"); 
```

在似乎处理完完整流之前，不会创建实际文件。

相似地：

```
using (Stream output = File.OpenWrite("c:\temp\file.zip"))
using (Stream input = file.InputStream)
{
    byte[] buffer = new byte[8192];
    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write(buffer, 0, bytesRead);
    }
} 
```

我原以为这会在读取流时“逐步”写入文件。查看文件系统，它似乎根本没有这样做。如果我在 while 内设置断点，它确实可以。

我想要做的是让你上传一个文件（使用 javascript 上传器），并一起轮询，从而轮询 ajax 请求尝试每秒获取上传文件的文件信息（文件大小）。但是，它始终返回 0，直到上传完成。

Vimeo 似乎能够做这种类型的功能（对于 IE）？？这是 .NET 限制，还是有办法从流中逐步写入文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:40:48.600

两点：

首先，在 Windows 中，文件的显示大小不会不断更新。该文件可能确实在不断增长，但大小只会增加一次。

其次（在这种情况下更有可能），流可能不会刷新到磁盘。您可以通过`output.Flush()`在调用后添加来强制它`output.Write()`。但是，您可能不想这样做，因为它可能会对性能产生负面影响。

也许您可以`Length`直接轮询输出流的属性，而不是通过文件系统。

编辑：

要使`Length`其他线程可以访问流的属性，您可以在类中有一个字段并在每次读/写时更新它：

```
private long _uploadedByteCount;

void SomeMethod()
{
    using (Stream output = File.OpenWrite("c:\temp\file.zip"))
    using (Stream input = file.InputStream)
    {
        byte[] buffer = new byte[8192];
        int bytesRead;
        while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, bytesRead);
            Interlocked.Add(ref _uploadedByteCount, bytesRead);
        }
    }
}

public long GetUploadedByteCount()
{
    return _uploadedByteCount;
} 
```

# android - 相当于Android的UIBarButtonSystemItemAction？

> ID：12927933
> 
> 赞同：0
> 
> 时间：2012-10-17T05:52:41.313
> 
> 标签：android

在 iOS 设备上，图标 UIBarButtonSystemItemAction（一个圆角矩形，带有一个从中间出来并向右上方弯曲的箭头，Google 图像搜索显示了示例）用于例如在另一个应用程序中打开一个文档。Android 的等效图标是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:14:40.963

用于分享动作的图标资源（看起来接近`UIBarButtonSystemItemAction`）是`android.R.drawable.ic_menu_share`. 请阅读[Pure Android](http://developer.android.com/design/patterns/pure-android.html)以了解在将应用程序从其他平台移植到 Android 时应做出的约定和设计决策。

有人编制了一份[`android.R.drawable icon`资源](http://www.darshancomputing.com/android/1.5-drawables.html)清单。[您可以按照此处](http://mgmblog.com/2008/12/12/listing-androids-drawable-resources/)的教程自行检查可用的可绘制资源。

# ruby - Mongo::ReplSetConnection 认证失败

> ID：12927934
> 
> 赞同：0
> 
> 时间：2012-10-17T05:52:43.440
> 
> 标签：ruby, mongodb, authentication

这是简单的脚本。

```
require 'mongo'
database=Mongo::ReplSetConnection.new(["database1:9900", "database2:9900","database3:9900"]).db("project")
database.authenticate("user","passwd") 
```

我收到以下错误：

```
undefined local variable or method `pools' for # <Mongo::ReplSetConnection:0x0000000441e610>
from /home/tommy/.rvm/gems/ruby-1.9.3-p194@myrails3/gems/mongo-1.7.0/lib/mongo/repl_set_connection.rb:309:in `authenticate_pools' 
```

有没有人遇到过这样的问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:09:38.980

以下方法对我有用。但我不知道为什么。

```
con=Mongo::ReplSetConnection.new(["host1:14000", "host2:14000", "host3:14000"])
con.add_auth("databasename","user","passwd")
con.apply_saved_authentication() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:10:09.033

这似乎与以下错误修复有关：

[https://github.com/mongodb/mongo-ruby-driver/pull/112](https://github.com/mongodb/mongo-ruby-driver/pull/112)

如果您更改驱动程序上的代码，它将起作用。

# ruby - 是否有用于编写短语结构规则的开源框架？

> ID：12927935
> 
> 赞同：1
> 
> 时间：2012-10-17T05:52:43.497
> 
> 标签：ruby, lisp, nlp

到目前为止，我一直在使用 Xerox 工具链，它功能强大，不是开源的，而且对于我当前的问题来说有点矫枉过正。是否有允许我实现短语结构语法的库？最好在 ruby​​ 或 lisp 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:46:10.613

AFAIK，没有可用的开源 Lisp 短语结构解析器。

但是由于解析器实际上是一个黑匣子，因此让您的应用程序与用任何语言编写的解析器一起工作并不难，尤其是当它们生成 S 表达式作为输出时。例如，使用[pfp 之](https://github.com/wavii/pfp)类的东西，您可以将句子作为字符串传递给它，然后读取并处理生成的树。或者你可以在它周围包裹一个套接字服务器，你会得到一个分布式系统:)

还有[cl-langutils](https://github.com/eslick/cl-langutils)，它可能有助于一些基本的 NLP 任务，比如标记化，也许还有 POS 标记。但总体而言，它远不如斯坦福或 OpenNLP 等常用软件包成熟和功能丰富。

# php - PHP - 如何将 ISO 8601 日期字符串重新格式化为用户定义的时区

> ID：12927936
> 
> 赞同：2
> 
> 时间：2012-10-17T05:52:44.640
> 
> 标签：php, timezone, iso, iso8601

我以这种格式提供了日期/时间：2012-10-14T06:00

我可以像这样修改数据：早上 6:00 使用

```
<?php
function formatDate($date, $format){
    $output = date($format, strtotime($date));
    return $output;
}
?>

<?php echo formatDate('2012-10-14T06:00', 'g:ia'); ?> 
```

输出：早上 6:00

太好了，但是我如何使用

date_default_timezone_set('America/Los_Angeles');

或者

date_default_timezone_set('欧洲/阿姆斯特丹);

哪个设置为用户时区（无论他们选择什么） - 时间应该在原始时区数据和用户提供的时间之间偏移（'Europe/Amsterdam）

因此，如果他们将默认时区设置为不同的国家/地区，则时间将显示为上午 8:00 或上午 4:00，具体取决于该时区偏移量。

基本时区将始终采用 XXXX-XX-XXTXX:XX 格式。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T06:10:22.823

使用[DateTime](http://php.net/manual/en/class.datetime.php)对象。手动提取偏移量不会考虑白天节省和其他怪癖。

```
// use the the appropriate timezone for your stamp
$timestamp = DateTime::createFromFormat('Y-m-d\TH:i', '2012-10-14T06:00', new DateTimeZone('UTC'));
// set it to whatever you want to convert it
$timestamp->setTimeZone(new DateTimeZone('Europe/Amsterdam'));
print $timestamp->format('Y-m-d H:i:s'); 
```

# c# - 如何在 SQLite 实体中设置文本数据类型？

> ID：12927943
> 
> 赞同：1
> 
> 时间：2012-10-17T05:53:00.670
> 
> 标签：c#, sqlite, windows-8, microsoft-metro

我有这个实体

```
[AutoIncrement(), PrimaryKey()]
public int Id { get; set; }

public string Guid { get; set; }
public string Value { get; set; } 
```

我正在像这样针对这个实体在数据库中创建表

```
connection.CreateTableAsync<MyEntity>(); 
```

这将创建一个带有`varchar(140)`针对`Value`属性的列的表。现在我想`varchar(140)`用`Text`SQLite 的数据类型替换。

我应该在属性中使用什么数据类型，`Value`以便它`Text`在我的 SQLite DB 表中的列中结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:45:34.363

代表@CL [VARCHAR 的最大大小是多少](http://www.sqlite.org/faq.html#q9)

> (9) SQLite 中 VARCHAR 的最大大小是多少？
> 
> SQLite 不强制 VARCHAR 的长度。您可以声明一个 VARCHAR(10)，SQLite 很乐意让您在其中放入 500 个字符。并且它将保持所有 500 个字符的完整性——它永远不会被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:39:38.173

我认为这样的事情会起作用：

```
[Column(TypeName = "Text")]
public string Value { get; set; } 
```

# php - 用于在 PHP 中插入 XML 的清理字符串

> ID：12927950
> 
> 赞同：0
> 
> 时间：2012-10-17T05:53:36.980
> 
> 标签：php, xml

我目前有一个不是我编写的脚本，它从数据库中的注释字段中获取信息并将其放入 xml 文件中。正如你可以猜到的那样，这个领域可能有很多坏字符和垃圾。

过去，许多开发人员尝试向软件添加功能以尝试修复此问题（很多补丁），但我们仍然获得了一些通过。

在我走上疯狂的道路试图找出所有可能性之前，有没有人有一种简单的方法可以做到这一点，获取任何字符串并将其清理为 xml 文件。

我努力了：

```
htmlspecialchars();
htmlentities(); 
```

但他们并没有为 XML 获得一切。

像 & to 这样的东西`&amp;`也很好，但是`&amp;`to`&amp;amp;`不好

也许是一个函数或库`xmlentities()`或其他东西:)

# c++ - 具有范围枚举的数组索引（转换为整数）

> ID：12927951
> 
> 赞同：18
> 
> 时间：2012-10-17T05:53:38.113
> 
> 标签：c++, arrays, enums

C++11 范围内的枚举器（`enum class`语法）不会转换为整数，因此它们不能直接用作数组索引。

以这种方式使用它们时，获得作用域优势的最佳方法是什么？

我提供了几个答案，但请添加更多想法！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T05:53:38.113

## 解决方案1：运算符重载。

这是我目前的最爱。重载一元`operator+`并`operator++`分别显式转换为整数类型和枚举类型内的增量。

使用`enumeration_traits`模板，可以激活重载而不是复制样板代码。但样板只是一对夫妇。

库代码（模板，非模板替代方案见下文）：

```
template< typename e >
struct enumeration_traits;

struct enumeration_trait_indexing {
    static constexpr bool does_index = true;
};

template< typename e >
constexpr
typename std::enable_if< enumeration_traits< e >::does_index,
    typename std::underlying_type< e >::type >::type
operator + ( e val )
    { return static_cast< typename std::underlying_type< e >::type >( val ); }

template< typename e >
typename std::enable_if< enumeration_traits< e >::does_index,
    e & >::type
operator ++ ( e &val )
    { return val = static_cast< e >( + val + 1 ); } 
```

用户代码：

```
enum class ducks { huey, dewey, louie, count };
template<> struct enumeration_traits< ducks >
    : enumeration_trait_indexing {};

double duck_height[ + ducks::count ]; 
```

样板代码（如果不使用库，请遵循`enum`定义）：

```
int operator + ( ducks val )
    { return static_cast< int >( val ); }

ducks &operator ++ ( ducks &val )
    { return val = static_cast< ducks >( + val + 1 ); } 
```

## 解决方案 2：手动范围。

范围枚举器语法也适用于无范围（非`enum class`）枚举，它们会隐式转换为`int`. 将枚举隐藏在类或命名空间中，并将其导入`typedef`或`using`使其成为伪作用域。

但是如果多个枚举进入同一个命名空间，枚举器名称可能会发生冲突，所以你不妨使用一个类（或多个命名空间）。

```
struct ducks_enum {
    enum ducks { huey, dewey, louie, count };
};
typedef ducks_enum::ducks ducks;

double duck_height[ ducks::count ]; // C++11
double duck_weight[ ducks_enum::count ]; // C++03 
```

这有一些好处。**它适用于 C++03**，但仅适用于 syntax `ducks_enum::count`。枚举器在结构内部是无作用域的，它可以用作任何频繁使用枚举器的类的基础。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T06:31:51.460

如果您的枚举是连续的，为什么要让它比需要的更难？

```
enum class days
{
        monday,
        tuesday,
        wednesday,
        thursday,
        friday,
        saturday,
        sunday,
        count
};

....

const auto buffer_size = static_cast< std::size_t >( days::count );
char buffer[ buffer_size ];
buffer[ static_cast< std::size_t >( days::monday ) ] = 'M'; 
```

或者，如果您必须使用模板函数...

```
template< class enumeration >
constexpr std::size_t enum_count() noexcept
{
        static_assert( std::is_enum< enumeration >::value, "Not an enum" );
        return static_cast< std::size_t >( enumeration::count );
}

template< class enumeration >
constexpr std::size_t enum_index( const enumeration value ) noexcept
{
     static_assert( std::is_enum< enumeration >::value, "Not an enum" );
     return static_cast< std::size_t >( value )
}

...

char buffer[ enum_count< days >() ];
buffer[ enum_index( days::monday ) ] = 'M'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-03T20:02:48.000

与使用枚举作为数组索引有关的原始问题。与其尝试将枚举转换为数组的索引，不如构建一个接受枚举作为其索引的数组：

```
template <typename ValueType, typename Enumeration,
          Enumeration largest_enum = Enumeration::Count,
          int largest = static_cast <int> (largest_enum)>
class EnumeratedArray {
    ValueType underlying [static_cast <int> (largest_enum)];
public:
    using value_type = ValueType;
    using enumeration_type = Enumeration;
    EnumeratedArray () {
        for (int i = 0; i < largest; i++) {
            underlying [i] = ValueType {};
        }
    }
    inline ValueType &operator[] (const Enumeration index) {
        assert (static_cast <int> (index) >= 0 && static_cast <int> (index) < largest);
        return underlying [static_cast <const int> (index)];
    }
    inline const ValueType &operator[] (const Enumeration index) const {
        assert (static_cast <int> (index) >= 0 && static_cast <int> (index) < largest);
        return underlying [static_cast <const int> (index)];
    }
}; 
```

所以现在，以前面的鸭子为例：

```
enum class ducks { huey, dewey, louie, count };
EnumeratedArray<double, ducks, ducks::count> duck_height;
duck_height [ducks::huey] = 42.0; 
```

如果鸭子值的大小写不同，大小可能会默认：

```
enum class Ducks { Huey, Dewey, Louie, Count };
EnumeratedArray<double, Ducks> duck_height;
duck_height [Ducks::Huey] = 42.0; 
```

除了避免枚举扭曲之外，由于在实现中隐藏了到索引转换，因此枚举不会在代码中的其他点错误地成为整数，也不会无意中通过整数索引数组。

EnumeratedArray 用于钢琴 src/common 中的 pianod2。更广泛的版本包括仅显式默认初始化普通旧数据类型的模板魔术、将所有元素初始化为指定值的构造函数和文档注释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T03:35:08.763

我正在实施 DrTwox 的解决方案加上 Potatoswatter 解决方案的类型安全的组合。枚举类必须明确定义以允许索引，同时还定义了 size()：

```
#include <iostream>

template< typename T >
class EnumClassTraits;

struct EnumClassTraitIndexing {
    static constexpr bool does_index = true;
};

template<typename T>
constexpr
typename std::enable_if<EnumClassTraits<T>::does_index,
                        typename std::underlying_type<T>::type>::type enum_size() noexcept {
  return EnumClassTraits<T>::size();
}

template<typename T>
typename std::enable_if<EnumClassTraits<T>::does_index,
                        typename std::underlying_type<T>::type>::type enum_index(T enum_key) noexcept {
  return static_cast<typename std::underlying_type<T>::type>(enum_key);
}

enum class Days {Mon, Tue, Wed, Thu, Fri, Sat, Sun};

template<>
struct EnumClassTraits<Days> : EnumClassTraitIndexing {
  static constexpr std::underlying_type<Days>::type size() {
    return static_cast<std::underlying_type<Days>::type>(Days::Sun)+1;
  }
};

int main(int argc, char* argv[]) {
  Days days[enum_size<Days>()] = {Days::Mon, Days::Tue, Days::Wed, Days::Thu, Days::Fri, Days::Sat, Days::Sun};
  const char* days_to_string[enum_size<Days>()] = {"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
  for (auto day : days) {
    std::cout << days_to_string[enum_index(day)] << std::endl;
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-19T04:43:37.343

或者，您可以用 a 替换您`array`的`map`，这也意味着您可以摆脱最大枚举，例如`count`：

```
enum class days
{
    monday,
    tuesday,
    wednesday,
    thursday,
    friday,
    saturday,
    sunday
};

int main(int argc, char* argv[])
{
    std::map<days, const char*> days_to_string =
        {{days::monday, "Monday"},
        {days::tuesday, "Tuesday"},
        {days::wednesday, "Wednesday"},
        {days::thursday, "Thursday"},
        {days::friday, "Friday"}};

    for (auto day : days)
    {
        std::cout << days_to_string[day] << std::endl;
    }
} 
```

# ios - UICollectionView - 复制 Photos.app 功能

> ID：12927954
> 
> 赞同：5
> 
> 时间：2012-10-17T05:54:01.780
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我正在尝试创建一个 UICollectionView，其行为类似于 iPad 上的 photos.app（捏合以进行分组和展开）。

你觉得 photos.app 是如何构建的？

*   它是一个具有一种布局的 UICollectionView，而捏只是进行批量更新并将单元格移动到部分中？
*   还是一个 UICollectionView 有两种不同的布局？
*   或者最后一个选项，可以是两个 UICollectionViews 吗？

你认为最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T21:10:15.233

这是第二个建议 - 两种不同的布局。

我建议检查 Turorials 书中 iOS6 中几乎相同的示例（付费内容，但在您的情况下可能值得）。

[http://www.raywenderlich.com/store/ios-6-by-tutorials](http://www.raywenderlich.com/store/ios-6-by-tutorials)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T18:13:47.900

如果你还没有买这本书，我还写了一篇关于基本思想的博文（以及一些流布局子类的代码）。

[http://thyraz.tumblr.com/post/35135290759/stacklayout](http://thyraz.tumblr.com/post/35135290759/stacklayout)

# python - 修复 nxt-python 中的 turn 方法

> ID：12927956
> 
> 赞同：1
> 
> 时间：2012-10-17T05:54:10.910
> 
> 标签：python, nxt, lego, nxt-python

我希望能够在遇到障碍物时阻止我的机器人移动。`SynchronizedMotors`但是，下类中的 turn 方法`motor.py`不允许我这样做。我怎么能解决这个问题？有没有直接的解决办法？我确实尝试过使用线程，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:29:13.060

让伺服系统对传感器输入做出反应没有问题。以下应该使机器人全功率前进，直到按下一个或多个触摸传感器，然后停止，等待片刻，然后切断伺服系统的所有电源。

```
from time import sleep
import nxt

from nxt.motor import Motor, PORT_B, PORT_C
from nxt.sensor import Touch, PORT_1, PORT_2

class Robot(object):

    def __init__(self, brick):

        self.brick = brick

        # left and right motors
        self.lmotor = Motor(brick, PORT_B)
        self.rmotor = Motor(brick, PORT_C)

        # left and right touch sensors
        self.ltouch = Touch(brick, PORT_1)
        self.rtouch = Touch(brick, PORT_2)

    def roll(self, left, right):
        '''
        Non-blocking function for modifying power to servos.
        The servos will continue to operate at these power
        levels until told to do otherwise. Values are given
        as percentages of full power, so torque will change
        as the battery loses charge. A negative value will
        reverse the rotation of the respective servo.
        For example, to spin on the spot, clockwise and at
        full power, do

            self.roll(100, -100)

        '''
        self.lmotor.run(left)
        self.rmotor.run(right)

    def halt(self):
        '''
        Stops and then holds both servos steady for
        0.2 seconds, then cuts power to both servos.
        '''
        self.lmotor.brake()
        self.rmotor.brake() 
        sleep(0.2)
        self.lmotor.idle()
        self.rmotor.idle()

brick = nxt.find_one_brick(name='R2')
robot = Robot(brick)

robot.roll(100, 100)
while True:
    if robot.ltouch.is_pressed() or robot.rtouch.is_pressed():
        robot.halt() 
```

# iphone - GMGridView 选择被覆盖

> ID：12927963
> 
> 赞同：6
> 
> 时间：2012-10-17T05:54:54.740
> 
> 标签：iphone, objective-c, ios, xcode, gmgridview

![在此处输入图像描述](../Images/95d09378301469936313b02e09b86154.png)![在此处输入图像描述](../Images/48b625a8df5adcec79833f64a342b5ed.png)我在使用 GMGridView 时遇到了奇怪的问题。实际上我正在使用 GMGridview 来显示餐厅的桌子。如果我选择了 Table1（这意味着第一个单元格），它应该更改为 redColor（这意味着它是被占用的表格）。我这样做了，但我的问题是当我选择一个单元格 1（红色）时，无论我使用 GMGridview 的所有类中都显示红色。那是完全错误的，在另一个类中没有任何选择，它显示为选中的一个。

在下面的图片中，如果我选择了 1，则显示 7 也选择了.....

我的代码是

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index{

    CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication 
sharedApplication] statusBarOrientation]];

    GMGridViewCell *cell = [gridView dequeueReusableCell];

    int isOccupied = [[[self.arrayOfoccupiedTables objectAtIndex:index] objectForKey:@"TStatus"] intValue];

    if (!cell)

    {

        cell = [[[GMGridViewCell alloc] init] autorelease];

        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];

        cell.contentView = view;

    }

    [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

    UILabel *label = [[UILabel alloc] initWithFrame:cell.contentView.bounds];

    label.autoresizingMask = UIViewAutoresizingFlexibleWidth | 

UIViewAutoresizingFlexibleHeight;

    label.textAlignment = UITextAlignmentCenter;

    label.backgroundColor = [UIColor clearColor];

    label.font = [UIFont fontWithName:APPFONTLI size:22.0f];

    label.adjustsFontSizeToFitWidth = YES;

    if (isOccupied == 100001) {

        label.textColor = [UIColor whiteColor];

        label.highlightedTextColor = [UIColor blackColor];

        label.backgroundColor = [UIColor redColor];//redColor];

        //colorWithRed:43.0f/255.0f green:150.0f/255.0f blue:0.0f/255.0f alpha:1.0f];//GreenColor

        label.text  = [[self.filtredArray objectAtIndex:index] objectForKey:@"TableName"];

    }else if(isOccupied == 100002) {

        label.textColor = [UIColor whiteColor];

        label.highlightedTextColor = [UIColor blackColor];

        label.backgroundColor = [UIColor colorWithRed:43.0f/255.0f green:150.0f/255.0f 
blue:0.0f/255.0f alpha:1.0f];

        //colorWithRed:215.0f/255.0f green:215.0f/255.0f blue:0.0f/255.0f alpha:1.0f];//GreenColor

        label.text  = [[self.filtredArray objectAtIndex:index] objectForKey:@"TableName"];

    }

    else if(isOccupied == 100003) {

        label.textColor = [UIColor blackColor];

        label.highlightedTextColor = [UIColor whiteColor];

        label.backgroundColor = [UIColor colorWithRed:215.0f/255.0f green:215.0f/255.0f blue:0.0f/255.0f alpha:1.0f];// Yellow Color

        //colorWithRed:229.0f/255.0f green:229.0f/255.0f blue:229.0f/255.0f alpha:1.0f];//GrayColor

        label.text  = [[self.filtredArray objectAtIndex:index] objectForKey:@"TableName"];

    }
    [cell.contentView addSubview:label];
    return cell;
}

- (void)GMGridView:(GMGridView *)gridView didTapOnItemAtIndex:(NSInteger)position
{

  NSLog(@"Did tap at index %d", position);

    [[SoundManager sharedSoundManager] playSound:SELECTED];

    //[self performSelector:@selector(registerTableToTheServer:) withObject:nil afterDelay:0.2];

    [self registerTableToTheServer:[[self filtredArray] objectAtIndex:position]];

    NSInteger tableId   =  [[[[self filtredArray] objectAtIndex:position] objectForKey:@"Table_id"] intValue];

    [self createPlistWithTableId:tableId];

    [_gmGridView reloadData];
} 
```

而且我正在重新加载 viewWillAppear 和 viewDidLoad 中的网格视图。我没有发现任何有用的东西。请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:08:09.670

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index{

    CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation]];

    GMGridViewCell *cell = [gridView dequeueReusableCell];
    int isOccupied = [[[self.arrayOfoccupiedTables objectAtIndex:index] objectForKey:@"TStatus"] intValue];

    if (!cell)  {
        cell = [[[GMGridViewCell alloc] init] autorelease];

        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];
        cell.contentView = view;
    }

   //TRY TO RELOAD THE MG_GRIDVIEW HERE
} 
```

# video - 如何使用 FFmpeg 将 .flv 视频转换为 .h264 格式？

> ID：12927969
> 
> 赞同：5
> 
> 时间：2012-10-17T05:55:23.390
> 
> 标签：video, ffmpeg, h.264

我想从转换`.flv`为`.h264`格式。

问题：我进行了从 FLV 到 H264 格式的转换，但转换后的视频 (.h264) 运行速度非常快（就像我们单击快进按钮一样）。

我使用了以下命令：

```
ffmpeg -i example.flv -sameq -vcodec libx264 -vpre default -ar 22050 output.h264 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T21:36:12.620

解决方案是您需要一个容器格式。原始 h.264 没有任何视频时间信息，这就是您的播放器播放速度非常快的原因。

你的命令也搞砸了。您是否想要输出中的音频？如果是，那么您需要指定一个包含音频和视频的容器格式。

将您的输出更改为 mp4

```
ffmpeg -i input_file -c:a copy -c:v libx264 -profile:v baseline out.mp4 
```

或其他容器。如果您想要仅视频流，请删除音频选项并添加`-an`.

如果您想使用 AAC 音频而不是 FLV 文件的任何内容：

```
ffmpeg -i input_file -c:a aac -strict -2 -b:a 128k -c:v libx264 -profile:v baseline out.mp4 
```

如果您的 ffmpeg 没有`-c`or`-profile`选项，请更新到更新的版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-17T09:58:55.877

您正在寻找的神奇关键词是“每秒帧数”。

例如，在输出视频中为 30 fps 添加和“-r 30”。

塞巴斯蒂安

# php - 使用表单 php>form>php 传递变量时出错

> ID：12927972
> 
> 赞同：0
> 
> 时间：2012-10-17T05:55:43.010
> 
> 标签：php, mysql, insert

请问这段代码有什么问题吗？

我用它来向数据库添加一些数据，但我在尝试插入时变空`$toid`了。`$toname`

这是表格。变量`$toid`和`$toname`在这里都可以。

```
//write new message
if (isset($_GET['action']) && $_GET['action'] == compose) { 
        if (isset($_GET['toid'])) {
            $toid = $_GET['toid'];
            $tosql = "select * from authors where id =".$toid.""; 
            $toquery = mysql_query($tosql,$connection) or die(mysql_error());
            $torow = mysql_fetch_array($toquery);   
            $toname = $torow['displayname'];
        if (isset($_GET['subject'])) { $subject = $_GET['subject']; }
        if (isset($_GET['message'])) { 
            $message = $_GET['message']; 
            echo "<h3>Replying</h3>
            <table>
                <tr>
                    <td colspan='2'>Replying to ".$toname.".</td>
                </tr>
                <tr>
                    <td colspan='2'>".$subject."".nl2br($message)."<br />
                    </td>
                </tr>
            </table><br />Type your answer:<br /><br />";
        } else { echo "New message"; }
        echo "<form action=\"mail.php?action=send\" method=post>
            <table>
                <tr>
                    <td>To:</td><td><input type=\"text\" name=\"to\" size=\"50\" value=\"".$toname."\"></td>
                </tr>
                <tr>
                    <td>Title:</td><td><input type=text name=subject size=50 value=".$subject."></td>
                </tr>
                <tr>
                    <td valign=\"top\">Message:</td><td><textarea  rows=\"10\" cols=\"70\" name=\"message\"></textarea></td>
                </tr>
                <tr>
                    <td align=\"right\" colspan=\"2\"><input id=\"submitstyle\" type=\"submit\" value=\"Enviar Mensagem\"></td>
                </tr>
            </table>
        </form>"; 
        }
} 
```

这是将消息插入数据库的代码，这里`$toid`和`$toname`是空的。它应该是从上面的表格中检索出来的，对吧？

```
//send message  
if (isset($_GET['action']) && $_GET['action'] == send) { 

    if ($subject == "" || $message == "") {
        header('Location: mail.php?action=compose&toid='.$toid.'&subject=\''.$subject.'\'&sendpm=false');
        exit(); 
    }

    $date = DATE(YmdHis); 

    echo $userid."from<br />to".$toid."<br />toname".$toname;

    $sendsql = "INSERT INTO mail (sender, reciever, subject, message, created_at, status, sender_deleted, reciever_deleted) 
                        VALUES (".$userid.", ".$toid.", ".$subject.", ".$message.", ".$date.",unread, 0, 0)"; 
    $sendquery = mysql_query($sendsql,$connection) or die(mysql_error());

    echo "<div class=\"alert\" style=\"text-align: center; margin-top: 13px;\"><b>Mensagem particular enviada com sucesso!</b></div>
            <br /><table align=\"center\" width=\"75%\" class=\"sortable\">
                <tr>
                    <td colspan='2' style=\"text-align:center;font-weight:normal;\">Mensagem particular enviada para ".$toname.".</td>
                </tr>
                <tr>
                    <td colspan='2'>
                        Title: ".$subject."
                        Message: ".nl2br($message)."

                    </td>
                </tr>
            </table>";
} 
```

我也在第 2 行得到这个 sql 错误`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' RE: assunto3, 3, 20121017023723,unread, 0, 0)'`，我认为这是因为提到的空变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:00:59.327

首先，您需要将这些变量作为隐藏表单值传递：[​​http://www.echocho.com/htmlforms07.htm](http://www.echoecho.com/htmlforms07.htm)

然后你需要通过 $_POST 从表单中获取变量。

试试 $toid = $_POST['toid'] 和 $toname = $_POST['toname']。但要警惕 SQL 注入： http: [//php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

不要盲目地接受来自 $_POST 的值。请务必先验证和过滤它们。

或者如果用户不能更改 toid/toname，为什么不重新查询它们呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:07:27.113

您需要转义这些`INSERT`值，并将字符串放在引号中：

```
$sendsql = 'INSERT INTO mail (sender, reciever, subject, message, created_at, status, sender_deleted, reciever_deleted) 
            VALUES ("'.mysql_real_escape_string($userid).'", "'.mysql_real_escape_string($toid).'", "'.mysql_real_escape_string($subject).'", "'.mysql_real_escape_string($message).'", "'.mysql_real_escape_string($date).'","unread", 0, 0)'; 
```

此外，请确保始终对$_GET 或 $_POST 中的 SQL 查询中立即使用**的值进行转义。**否则，您最有可能遇到 SQL 注入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T06:08:40.160

您需要像这样在php中编写SQL语句：

```
 $tosql = "select * from authors where id ='$toid'"; 
```

和

```
 $sendsql = "INSERT INTO mail (sender, reciever, subject, message, created_at, status, sender_deleted, reciever_deleted) 
                    VALUES ('$userid', '$toid', '$subject', '$message', '$date', 'unread', 0, 0)"; 
```

我想这会对你有所帮助。

# php - 如何在一个查询中更新表并将新记录插入另一个表？

> ID：12927983
> 
> 赞同：0
> 
> 时间：2012-10-17T05:56:32.937
> 
> 标签：php, phpmyadmin

我在 mysql 中有两个表，即产品和销售。产品包含库存，销售包含采购记录。现在，当我将销售项目的数量插入到销售表中时，我想从库存中出售产品，那么作为产品表的库存中应该减少相同的数量。请帮我查询。

卖表插入。

```
 $cus_id = $_POST['customer'];
$reg_id = $_POST['cus_region'];
$cat_id = $_POST['product'];
$name = $_POST['name'];
$price = $_POST['unit_price'];
$quantity = $_POST['quantity'];
$date = $_POST['datepicker'];
$total = $price * $quantity;
$payment = $_POST['payment'];
$remainig = $total - $payment; 
```

$query = "INSERT INTO sell SET cus_id = '".$cus_id."',reg_id = '".$reg_id."', cat_id = '".$cat_id."',product = '".$name." ', sell_price = '".$price."', sell_date = '".$date."',item_quantity = '".$quantity."',amount_paid= '".$payment."',total_price = '" .$total."', 剩余 = '".$remainig."'";

$res = mysql_query($query);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:36:39.513

解决这个问题的两种方法，

1）如果您正在获取产品数量，您可以进行第二次查询以从堆栈表（产品表）中扣除数量

2）您可以使用触发器进行此类操作，同时将相同数量插入到销售表中，您可以从产品表中减少相同的数量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:33:57.073

您只需更改或减少 PRODUCT 表中产品的数量。因此，您必须使用 UPDATE 查询。

这可以解决您的问题：1）我认为您`cat_id`是唯一的产品密钥，用于识别 PRODUCT 表中的产品。

2）我认为您`quantity`在 PRODUCT 表中有列，用于存储产品的数量。一次销售 1 件产品。

更新`TABLE_NAME`集 `quantity`= `quantity`- 1 其中 cat_id = "SOME_INT_ID_WITHOUT_QUOTES"

# mysql - 在mysql中并发插入？

> ID：12927986
> 
> 赞同：0
> 
> 时间：2012-10-17T05:56:37.397
> 
> 标签：mysql, database, database-administration

我有一个应用程序，它在来自多个主机的一些表中插入批量记录。问题是在一张表中插入多条记录时，它会锁定这些表，而其他线程必须等到它完成。有没有什么方法可以让多个线程在同一个表中提交其插入而无需等待用户。mysql中有什么方法可以实现这一点。换句话说，mysql中是否有任何方法允许从多个线程并发批量插入mysql，也可以在插入进行时批量更新表，或者是否允许从同一个表上的多个线程进行批量更新。

有什么办法可以在mysql中实现这一点。

谢谢 ，

尼特什·库马尔

# php - php中num行的重复结果

> ID：12927987
> 
> 赞同：0
> 
> 时间：2012-10-17T05:56:37.833
> 
> 标签：php, while-loop, repeat, mysql-num-rows

> **可能重复：**
> [循环时我无法在里面创建 num 行](https://stackoverflow.com/questions/12927269/i-cant-make-num-rows-inside-while-looping)

我尝试在循环中分配 num 行以获取另一个表的行数

```
$select_sub_cat = mysql_query("SELECT * FROM sub_cat WHERE ct_id='".$row_main['id']."' LIMIT 8 ");
while($row_sub = mysql_fetch_array($select_sub_cat))
{
  $select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."'  ");
  while($row_num_sub = mysql_fetch_array($select_num_sub))
  {
    $n = mysql_num_rows($select_num_sub);
    $smarty->assign('n',$n);
  }

 $sub_cats[] = $row_sub;
}
$smarty->assign('sub_cats',$sub_cats); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:36:33.477

mysql_num_rows 函数用于计算表中的行数，因此它将在 while 循环之前使用。

```
$select_sub_cat = mysql_query("SELECT * FROM sub_cat WHERE ct_id='".$row_main['id']."' LIMIT 8 ");
while($row_sub = mysql_fetch_array($select_sub_cat))
{
  $select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."'  ");
  $n = mysql_num_rows($select_num_sub);
  while($row_num_sub = mysql_fetch_array($select_num_sub))
  {

    $smarty->assign('n',$n);
  }

 $sub_cats[] = $row_sub;
}
$smarty->assign('sub_cats',$sub_cats); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:02:45.470

放置以下几行是没有意义的：

```
$n = mysql_num_rows($select_num_sub);
$smarty->assign('n',$n); 
```

在内循环内部。如果要通过 smarty 显示查询的行数，只需：

```
$select_num_sub = mysql_query("SELECT * FROM market WHERE sub_cat='".$row_sub['id']."' 
$n = mysql_num_rows($select_num_sub);
$smarty->assign('n',$n); 
```

在外循环里面，你会没事的。

# lua - 电晕故事板保持前一个场景打开

> ID：12927988
> 
> 赞同：4
> 
> 时间：2012-10-17T05:56:40.497
> 
> 标签：lua, coronasdk

我正在尝试使用情节提要切换场景，但是当我按下按钮时，它会保留当前场景......我无法在互联网上的任何地方找到解决此问题的方法。终端提示正在进入打印“离开主菜单”的方法，我的下一个场景成功打开了，但是背景和按钮还是原来的场景。

```
local storyboard = require( "storyboard" )  
local widget = require "widget"  
local scene = storyboard.newScene()

local function onButton(event)
--local btn = event.target
--storyboard.gotoScene("sceneTemplate")
if event.phase == "release" then 
    print("play pressed")
    storyboard.gotoScene("sceneTemplate")
   end
end

function scene:createScene( event )
    local group = self.view

    print("menu scene created")
end

function scene:enterScene( event )
    local group = self.view

    print("menu scene viewing!")

    local bgImage = display.newImage("images/mainBG.png",0,0); 

    local playButton = widget.newButton{
        default = "images/playUp.png", 
        over = "images/playDown.png",
        onEvent = onButton
    }
    playButton.x = 80
    playButton.y = 20
end

function scene:exitScene( event )
    local group = self.view

    print("leaving main menu")
    storyboard.removeScene("menu")
    storyboard.removeAll()
    display.remove(group)
    group:removeSelf()
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:28:20.713

我找到了解决办法！如果我将背景图像和按钮都添加到一个新的显示组中，然后在场景退出时将它们删除，则可以解决：

```
function scene:enterScene( event )
    local group = self.view

    print("menu scene viewing!")

    local bgImage = display.newImage("images/mainBG.png",0,0); 

    local playButton = widget.newButton{
        default = "images/playUp.png", 
        over = "images/playDown.png",
        onEvent = onButton
    }

    displayGroup:insert(bgImage)
    displayGroup:insert(playButton)
end

function scene:exitScene( event )
    local group = self.view

    print("leaving main menu")
    display.remove(displayGroup)
    storyboard.removeScene("menu")

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:53:34.907

请参考以下链接 - [http://docs.coronalabs.com/api/library/storyboard/removeScene.html](http://docs.coronalabs.com/api/library/storyboard/removeScene.html)

这可以帮助你。

# javascript - JavaScript：IE 不支持 XPathEvaluator

> ID：12927990
> 
> 赞同：1
> 
> 时间：2012-10-17T05:56:47.580
> 
> 标签：javascript, html, dom, xpath, bookmarklet

我在里面有如下功能`JavaScript`，使用时无法运行`Internet Explorer`。

`HTML tag`如果提供了 a，则此函数从 a 中提取值`XPath`。

我怎样才能替换这个功能，用什么？

```
function lookupElementByXPath(path) {
    var evaluator = new XPathEvaluator(); 
    var result = evaluator.evaluate(path, document.documentElement, null,XPathResult.FIRST_ORDERED_NODE_TYPE, null); 
    return result.singleNodeValue;
} 
```

# asp.net-mvc - ASP.NET MVC 模型混合？

> ID：12927991
> 
> 赞同：0
> 
> 时间：2012-10-17T05:56:55.660
> 
> 标签：asp.net-mvc, entity-framework

我有一组我打算在多个模型之间共享的字段。我希望所有字段都包含在每个实体的表中（而不仅仅是一个字段表）。我更熟悉诸如 Python 之类的语言，其中这种类型的模式被称为“mixin”，本质上是一个自身不存在的类（它没有被实例化/在模型类的情况）。相反，派生类只是简单地继承了字段，并且它的表看起来好像字段被简单地包含在模型类中。

Entity Framework 中的“复杂类型”的概念似乎与我正在寻找的内容非常接近，但无法包含导航属性有点致命。有没有其他方法可以做到这一点，或者如果复杂类型是答案，那么我应该如何处理导航属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:27:14.817

我在一本书中读过这个注释：

> 除了基类和接口之外，一个有趣的可能性是 mixin，但它们是 .NET 语言不支持的 OOP 特性。mixin 是一个类，它提供了其他类可以继承的特定功能，但它并不意味着是一个独立的类。换句话说，mixin 就像一个接口，其中一些成员可能包含预定义的实现。一些动态语言支持 Mixin，包括 Python 和 Ruby。目前没有任何 .NET 语言支持 mixins，但可以使用诸如 Castle 之类的 ad hoc 框架来模拟 mixins。动态代理。使用此框架，您首先定义一个类，该类包含您要在现有类中注入的所有方法——mixin。接下来，您使用框架为包含注入方法的给定类创建代理。Castle.DynamicProxy 使用反射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:44:57.997

您可以使用继承来做到这一点。如果你已经考虑过了，我很抱歉。代码如下。

```
public abstract class WidgetBase 
{
    public string Name { get; set; }
}

public class SweetWidget : WidgetBase 
{
    public int SweetnessFactor { get; set; }
}

public class SourWidget : WidgetBase
{
    public int Sourness { get; set; }
} 
```

然后在您的模型配置中，您执行以下操作：

```
const string discriminator = "WidgetType";
Map<SweetWidget>(mc => mc.Requires(discriminator).HasValue("Sweet"));
Map<SourWidget>(mc => mc.Requires(discriminator).HasValue("Sour")); 
```

您需要在表格中添加一列“WidgetType”。然后，EF 将按照映射中的指定填充它。

请注意，基类必须是抽象的。只要您的表包含所有派生类的所有字段，这就是您在 EF Code First 中执行 Table Per Hierarchy 的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:27:12.663

实际上有机会与 Entity Framework 的一位开发人员讨论这个问题。目前在技术上是不可能的。它显然被踢了，但目前没有人在处理它。复杂类型是一种版本，但它们当然不支持导航属性。感谢所有为我努力的人。

# nutch - Nutch 2.1 无法在 Mac 中设置

> ID：12927997
> 
> 赞同：0
> 
> 时间：2012-10-17T05:57:19.280
> 
> 标签：nutch

尝试在本地环境中设置新的 Nutch 2.1。使用新下载，然后是“ant build”。然而，按照维基[http://wiki.apache.org/nutch/Nutch2Tutorial](http://wiki.apache.org/nutch/Nutch2Tutorial)的文档，似乎没有运气

我收到以下错误：

```
java[1815:1903] 无法从 SCDynamicStore 加载领域信息
InjectorJob: org.apache.gora.util.GoraException: org.apache.hadoop.hbase.MasterNotRunningException
    在 org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:167)
    在 org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:135)
    在 org.apache.nutch.storage.StorageUtils.createWebStore(StorageUtils.java:75)
    在 org.apache.nutch.crawl.InjectorJob.run（InjectorJob.java:214）
    在 org.apache.nutch.crawl.InjectorJob.inject（InjectorJob.java:228）
    在 org.apache.nutch.crawl.InjectorJob.run（InjectorJob.java:248）
    在 org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    在 org.apache.nutch.crawl.InjectorJob.main（InjectorJob.java:258）
引起：org.apache.hadoop.hbase.MasterNotRunningException
    在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:394)
    在 org.apache.hadoop.hbase.client.HBaseAdmin.(HBaseAdmin.java:94)
    在 org.apache.gora.hbase.store.HBaseStore.initialize(HBaseStore.java:108)
    在 org.apache.gora.store.DataStoreFactory.initializeDataStore(DataStoreFactory.java:102)
    在 org.apache.gora.store.DataStoreFactory.createDataStore(DataStoreFactory.java:161)
    ... 7 更多

```

非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:50:19.113

```
Caused by: org.apache.hadoop.hbase.MasterNotRunningException 
```

这表明 clsuter 设置未正确完成。nutch 教程页面提到了这一点：

> 安装和配置 HBase。你可以在这里得到它（NB Gora 0.2 使用 HBase 0.90.4，但是已知该设置适用于 HBase 0.90.x 分支的更新版本）

您是否正确执行了此步骤？