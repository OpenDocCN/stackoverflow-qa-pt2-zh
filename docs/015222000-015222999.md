# StackOverflow 问答 15222000-15222999

# java - 检查字符串，正则表达式问题？

> ID：15222004
> 
> 赞同：0
> 
> 时间：2013-03-05T10:56:22.873
> 
> 标签：java, string, loops

目前我正在检查以下字符串：

```
if(parseCommand.contains("vlan1") || parseCommand.contains("Fa0/1i")
  || parseCommand.contains("Fa0/1o") || parseCommand.contains("Fa1/0")                              
  || parseCommand.contains("Fa1/1") || parseCommand.contains("Fa1/2")
  || parseCommand.contains("Fa1/3") || parseCommand.contains("Fa1/4")
  || parseCommand.contains("Fa1/5") || parseCommand.contains("Fa1/6")                                    
  || parseCommand.contains("Fa1/7") || parseCommand.contains("Fa1/8") 
  || parseCommand.contains("Fa1/9") || parseCommand.contains("Fa1/11") 
  || parseCommand.contains("Gi0")) {
//do things here                              
} 
```

但是它可能包含 vlan1 到 vlan4094，我必须检查这些。最简单的方法是什么？

我试过这个只是为了匹配一个 vlan 1-9 后跟 0-3 个数字，但它没有找到任何东西：

```
if(parseCommand.matches(".*vlan[1-9](\\d){0,3}") || parseCommand.contains("Fa0/1i")
  || parseCommand.contains("Fa0/1o")|| parseCommand.contains("Fa1/0")                               
  || parseCommand.contains("Fa1/1") || parseCommand.contains("Fa1/2")
  || parseCommand.contains("Fa1/3") || parseCommand.contains("Fa1/4")
  || parseCommand.contains("Fa1/5") || parseCommand.contains("Fa1/6")                                    
  || parseCommand.contains("Fa1/7") || parseCommand.contains("Fa1/8") 
  || parseCommand.contains("Fa1/9") || parseCommand.contains("Fa1/11") 
  || parseCommand.contains("Gi0")) { 
```

即使我尝试这个也没有发现，为什么？

`if(parseCommand.matches(".*vlan.*"`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:12:51.447

对被;`.matches("(?s).*vlan.*")`捕获的换行符使用orso `.`见[点](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)。

# javascript - Javascript：setInterval 函数不起作用

> ID：15222007
> 
> 赞同：0
> 
> 时间：2013-03-05T10:56:35.600
> 
> 标签：javascript

我有以下一段代码。间隔设置为 10 秒。

```
(function($){ 
    $(document).ready(function() { 
        disp_log(); 
        setInterval(function () {
            disp_log();
        }, 10 * 1000);

        function disp_log() { 
            $.ajax({ 
                "type" : "GET", 
                "url" : "/get_log/", 
                "dataType" : "json", 
                "cache" : false, 
                "success" : function(json) { 
                    data=""
                    for(var j = 0; j < json.length; j++) { 
                        data+="<tr><td>"+json[j]+"</td></tr>"
                    } 
                    $("#log").html(data);
                } 
            })(jQuery); 
        }
    }); 
})(django.jQuery); 
```

但刷新不会发生。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:04:20.593

你需要在这里做的是调试。首先确定你是否得到*任何*代码。你可以通过使用....

```
"success" : function(json) { 
    console.log(json);
    //or..
    alert(json);
} 
```

如果他们没有返回任何东西，那么您的 AJAX 请求就是问题所在，而不是您的 setInterval 代码。

但是，在您的 setInterval 代码中，您应该知道 ajax 调用可能需要任何时间来加载，因此您不应该只是继续运行它。更好的方法是使用 setTimeout....

```
setTimeout(disp_log,10*1000); 
```

然后，在你的成功函数中，再次输入相同的代码......

```
"success" : function(json) { 
    setTimeout(function() {
        disp_log()
    },10*1000);
} 
```

这将确保您的代码在最后一次数据成功后继续运行 10 秒。还有其他问题需要考虑（例如，如果 ajax 调用失败，您如何保持脚本运行），但这将确保您最终不会与服务器请求不同步！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:01:03.183

你在这里有一个错误：`$.ajax`没有返回你可以调用 jQuery 的东西。不需要那个`(jQuery)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T10:58:39.310

如下使用它。

```
setInterval(disp_log, 10 * 1000); 
```

如果您的功能在全球范围内，则将其用作

```
setInterval("disp_log()", 10 * 1000); 
```

`(jQuery)`在ajax调用结束后你也不需要。

**更重要的是**你有`(function($){` 和`$(document).ready(function() {`。您不需要它，因为两者都使用任何一个。

**工作测试代码**

```
<script type="text/javascript">

    $(document).ready(function()
    {
        disp_log(); 
        setInterval(disp_log, 10 * 1000);

        function disp_log()
        {
            $.ajax({ 
                "type" : "GET", 
                "url" : "/get_log/", 
                "dataType" : "json", 
                "cache" : false, 
                "success" : function(json)
                { 
                    var data;
                    for(var j = 0; j < json.length; j++)
                    { 
                        data+="<tr><td>"+json[j]+"</td></tr>"
                    } 
                    $("#log").html(data);
                } 
            }); 
        }
    }); 

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:29:26.470

## 问题可能出在浏览器上

我在使用这个`setInterval()`功能时遇到了问题，但后来我发现这是我的 mozilla 的问题。当我尝试在 Chrome 中运行时，它是完美的。

# css - jQuery UI 限制覆盖 z-index

> ID：15222008
> 
> 赞同：1
> 
> 时间：2013-03-05T10:56:46.373
> 
> 标签：css, jquery-ui, overlay, z-index, modal-dialog

我在 jQuery UI 中有一个对话框，它是一个模态对话框：

```
$("#mydialog").dialog({modal:true}); 
```

我有另一个 div，我希望它位于覆盖层之上，但是，这个 div 是在对话框之前创建的，并且其他模式对话框也可能会出现。

我想要的基本上就像那个 div 的“始终在顶部”。

[这个 jsfiddle](http://jsfiddle.net/M7wGg/1/)更好地解释了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:02:56.577

您需要添加`position: relative`到您的 div 中，以便它脱离正常的页面流程并尊重 z-index 属性，请参阅我[**更新的小提琴**](http://jsfiddle.net/gnel/M7wGg/2/)

```
#mydiv {
    z-index: 1500;
    width: 100px;
    height: 100px;
    background:white;
    float:right;
    position:relative;
} 
```

基本原理： z-index 属性仅对**定位元素**有影响，因此您需要以下其中一项：

```
position: relative;
position: absolute;
position: fixed; 
```

# haskell - 如何抽象“来回”转换？

> ID：15222013
> 
> 赞同：16
> 
> 时间：2013-03-05T10:56:57.003
> 
> 标签：haskell

考虑这个例子（来自[https://codereview.stackexchange.com/questions/23456/crtitique-my-haskell-function-capitalize](https://codereview.stackexchange.com/questions/23456/crtitique-my-haskell-function-capitalize)）：

```
import Data.Char

capWord [] = []
capWord (h:t) = toUpper h : map toLower t

capitalize = unwords . map capWord . words 
```

有没有一种很好的方法来抽象“来回”转换，例如`unwords . f . words`？我能想到的最好的是

```
class Lift a b | a -> b where
  up :: a -> b
  down :: b -> a

instance Lift String [String] where
  up = words
  down = unwords

lifted :: (Lift a b) => (b -> b) -> a -> a
lifted f = down . f . up

capitalize = lifted (map capWord) 
```

但感觉不是很灵活，需要`MultiParamTypeClasses`, `FunctionalDependencies`, `TypeSynonymInstances`and `FlexibleInstances`- 这可能表明它*略微*超出顶部。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-05T22:30:38.723

您`lifted`实际上与`dimap`from相同[`Data.Profunctor`](http://hackage.haskell.org/packages/archive/profunctors/3.1.2/doc/html/Data-Profunctor.html)：

```
onWords = dimap words unwords
capitalize = onWords (map capWord) 
```

这可能不是您考虑的泛化方向。[`Control.Functor`](http://hackage.haskell.org/packages/archive/category-extras/latest/doc/html/Control-Functor.html)但是看一下from中等价函数的类型`category-extras`：

```
dimap :: Bifunctor f (Dual k) k k => k b a -> k c d -> k (f a c) (f b d) 
```

这个版本将它概括为所有既是 a`QFunctor`又是 co-的东西`PFunctor`。在日常场景中不是*那么*有用，但很有趣。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-05T11:15:47.093

我想说最好的答案是“不，因为抽象它不会给你带来任何东西”。实际上，您的解决方案远没有那么灵活：在范围内只能有一个实例，`Lift String [String]`并且有更多的方法可以将字符串拆分为字符串列表`words/unwords`（这意味着您将开始将新类型甚至更多神秘的扩展加入到混合中）。保持简单 - 原来`capitalize`的样子就很好。

或者，如果你真的坚持：

```
lifted :: (a -> b, b -> a) -> (b -> b) -> a -> a
lifted (up, down) f = down . f . up

onWords = lifted (words, unwords)
onLines = lifted (lines, unlines)

capitalize = onWords $ map capWord 
```

在概念上与您的类型类相同，只是没有过多地滥用类型类机制。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-05T12:11:27.713

你可以为此使用镜头。镜头比我认为的要通用得多，但是任何具有这种双向功能的东西都可以制成镜头。

例如，给定`words`和`unwords`，我们可以制作一个`worded`镜头：

```
worded :: Simple Iso String [String]
worded = iso words unwords 
```

然后你可以用它在镜头内部应用一个函数，例如`lifted f x`become `(worded %~ f) x`。镜头唯一的缺点是库非常复杂，并且有许多晦涩的运算符，例如`%~`，尽管镜头的核心思想实际上很简单。

## 编辑：这不是同构

我错误地认为这`unwords . words`等同于身份函数，但事实并非如此，因为正如几个人正确指出的那样，单词之间的额外空格丢失了。

相反，我们可以使用更复杂的镜头，如下所示，它确实保留了单词之间的间距。虽然我认为它仍然不是同构，但这至少意味着`x == (x & worded %~ id)`，我希望。另一方面，它至少不是一种很好的做事方式，也不是很有效。单词本身的索引镜头（而不是单词列表）可能会更好，尽管它允许更少的操作（我认为，当涉及镜头时真的很难判断）。

```
import Data.Char (isSpace)
import Control.Lens

worded :: Simple Lens String [String]
worded f s =
    let p = makeParts s
    in fmap (joinParts p) (f (takeParts p))

data Parts = End | Space Char Parts | Word String Parts

makeParts :: String -> Parts
makeParts = startPart
    where
      startPart [] = End
      startPart (c:cs) =
          if isSpace c then Space c (startPart cs) else joinPart (Word . (c:)) cs

      joinPart k [] = k [] End
      joinPart k (c:cs) =
          if isSpace c then k [] (Space c (startPart cs)) else joinPart (k . (c:)) cs

takeParts :: Parts -> [String]
takeParts End = []
takeParts (Space _ t) = takeParts t
takeParts (Word s t) = s : takeParts t

joinParts :: Parts -> [String] -> String
joinParts _ [] = []
joinParts (Word _ End) (ws@(_:_:_)) = unwords ws
joinParts End ws = unwords ws
joinParts (Space c t) ws = c : joinParts t ws
joinParts (Word _ t) (w:ws) = w ++ joinParts t ws 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-05T14:52:47.867

Like DarkOtter suggested, Edward Kmett's [`lens`](http://hackage.haskell.org/package/lens) library has you covered, but `Lens` is too weak and `Iso` is *slightly* too strong since `unwords . words` isn't an identity. You could try a `Prism` instead.

```
wordPrism :: Prism' String [String]
wordPrism = prism' unwords $ \s ->
   -- inefficient, but poignant
   if s == (unwords . words) s then Just (words s) else Nothing 
```

Now you can define `capitalize` as

```
capitalize' :: String -> String
capitalize' = wordPrism %~ map capWord
-- a.k.a    = over wordPrism (map capWord) 
```

but this has fairly pathological default behavior for your case. For `String`s which can't be mapped as isomorphisms (strings with multiple spaces in a row inside of them) `over wordPrism g == id`. There ought to be an "over if possible" operator for `Prism`s, but I don't know of one. You could define it though:

```
overIfPossible :: Prism s t a b -> (a -> b) -> (s -> Maybe t)
overIfPossible p f s = if (isn't p s) then Nothing else Just (over p f s)

capitalize :: String -> Maybe String
capitalize = wordPrism `overIfPossible` map capWord 
```

* * *

Now, really, both of these are pretty unsatisfactory since what you really want is to capitalize all words and retain the spacing. For this `(words, unwords)` is too weak generally due to the non-existence of isomorphism that I've highlighted above. You'd have to write your own custom machinery which maintains spaces after which you'd have an `Iso` and could use DarkOtter's answer directly.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T11:21:04.420

确实不够灵活！您将如何提升功能以逐行工作？您将需要一个`newtype`包装器！像这样

```
newtype LineByLine = LineByLine { unLineByLine :: String }

instance Lift LineByLine [String] where
    up = lines . unLineByLine
    down = LineByLine . unlines 
```

但是现在没有充分的理由更喜欢逐字版本而不是逐行版本。

我只会使用`unwords . map f . words`, 对我来说这就是惯用的“将 f 应用于所有单词并将它们重新组合在一起”。如果您经常这样做，请考虑编写一个函数。

# asp.net - 发布后要运行的批处理文件

> ID：15222014
> 
> 赞同：1
> 
> 时间：2013-03-05T10:56:59.590
> 
> 标签：asp.net, visual-studio-2008, deployment

有没有办法在发布 Web 应用程序后（即使用“发布”选项后）执行批处理文件。

我在这里阅读了其他一些问题，这些问题提出了以下建议：

1）在项目文件中添加 AfterPublish 属性：

```
<Target Name="CustomPostPublishActions" AfterTargets="MSDeployPublish" >
    <Exec Command="echo Post-PUBLISH event: Active configuration is: $(ConfigurationName)" />
</Target> 
```

这似乎不起作用。这仅与 Visual Studio 2010 相关吗？

2) 将批处理文件位置添加到 AfterBuild 文本框中，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/14574fd9a117c50649b136f9d62ffca3.png)

在发布之前运行构建之后，因此这将不起作用。如何在 Visual Studio 2008 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:42:53.883

正如[这篇文章](https://stackoverflow.com/questions/776635/replicate-vs2008-publish-web-site-from-command-line)所述：

> 以下命令使用默认设置复制“发布网站”对话框。
> 
> 使用默认设置发布网站的命令
> 
> ```
> aspnet_compiler -nologo -v / -p "C:\WebSite1" -u "C:\TargetPath" 
> ```

因此，您可以执行以下操作：

1）阅读上面的帖子并尝试使用编译/发布命令构建一个bat文件。

2) 在该 bat 文件中，使用上一个命令编译/发布网站后，添加要执行的批处理命令。

希望这可以帮助你

# java - 用于 java kiosk 应用程序的 windows shell

> ID：15222016
> 
> 赞同：5
> 
> 时间：2013-03-05T10:57:01.877
> 
> 标签：java, windows, windows-shell, kiosk

我在 SWT 中开发了一个 java 应用程序，它应该在作为 kiosk 运行的 Windows 系统上运行。该应用程序应该是系统中运行的唯一应用程序，并且应该在系统启动后立即打开。应禁用任务管理器、Windows 开始菜单、热键等所有功能（例如，请参阅[http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop](http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop)）。该应用程序还具有内置管理员用户，可以再次激活所有事物，并有可能在系统中进行更改。这些东西已经实现了。问题是，当 Windows 启动时，它会持续几秒钟直到应用程序打开，并且在这很短的时间内，用户会看到所有内容（在应用程序启动之前没有任何内容被禁用）。我搜索了互联网，唯一的解决方案似乎是替换注册表中的标准 Windows shell。现在问题来了：

有谁知道如何**为windows**编写一个shell

1.  使我能够在启动时停用所有内容
2.  让我在桌面上放置我的应用程序的快捷方式，以便用户可以打开应用程序
3.  让我在我的应用程序中为管理员用户激活停用的功能

或者你有任何其他想法如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T16:04:35.420

由于我试图完成的事情结果很复杂，到目前为止还没有人回答，我将根据我实施的事情自己回答这个问题。

为了有可能从桌面启动我的应用程序（由于我不得不删除它而不存在），我尝试实现一种任务栏。我实现了一个 SWT 对话框，其中有一个菜单栏和一个零外壳高度

```
....
WindowsSystemUtility.disableWindowsFunctionality(true);

shell = new Shell(getParent(), getStyle());

createMenu();

shell.layout();
shell.pack();   

Rectangle screenBounds = getParent().getMonitor().getBounds();
int monitorWidth = screenBounds.width;
int monitorHeight = screenBounds.height;
//System.out.println(monitorWidth + ", " + monitorHeight);

int dialogWidth = monitorWidth;
int dialogHeight = 0;   //height 0 - > shell has no height. only menu is shown
Rectangle shellBounds = shell.computeTrim(0, 0, dialogWidth, dialogHeight);
shell.setSize(shellBounds.width, shellBounds.height);

//place the dialog
int x = 0;
int y = 0;  //position north
//int y = monitorHeight - dialogHeight; //position south
shell.setLocation(x, y);

shell.open();
.... 
```

正如您所看到的，当此应用程序打开时，它会尝试禁用所有 Windows 功能，然后再启动。在对话框的菜单栏中，我放置了 1 个带有 2 个菜单项的菜单。一个用于启动我的应用程序，另一个用于管理员。生成了一个 jar，从 jar 中制作了一个 exe，并基于链接[http://technet.microsoft.com/en-us/library/cc939862.aspx](http://technet.microsoft.com/en-us/library/cc939862.aspx)我把它放在了 userinit 键中。

[我使用从http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop](http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop)中的 dll 生成的 java 代码来禁用 Windows 功能，如任务栏、时钟、任务管理器等和链接[http://umang- world.blogspot.de/2012/02/is-it-is-possible-to-disable-windows.html](http://umang-world.blogspot.de/2012/02/is-it-is-possible-to-disable-windows.html)用于安装密钥挂钩和[http://www.kbdedit.com/manual/low_level_vk_list.html](http://www.kbdedit.com/manual/low_level_vk_list.html)和[http:// /msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)用于虚拟键映射。当用户使用菜单栏中的管理员项登录时，我通过相同的 dll 再次启用所有内容并停用挂钩。注销管理员会再次激活一切。

所以总结一下：

1.  使我能够在启动时停用所有内容
    *   覆盖 Windows 注册表中的 userinit 键以停用桌面并使我的应用程序在 Windows 启动后立即启动，而不会延迟
    *   当任务栏启动时（我实现的 swt 对话框）
        *   杀死 explorer.exe
        *   使用 dll 禁用 Windows 应用程序
        *   安装 keyhook 以禁用键盘键
2.  让我在桌面上放置我的应用程序的快捷方式，以便用户可以打开应用程序
    *   任务栏中的菜单项
3.  让我在我的应用程序中为管理员用户激活停用的功能
    *   如果管理员通过菜单项登录
        *   启动 explorer.exe
        *   使用 dll 启用 Windows 应用程序
        *   停止键钩以启用键盘键

我希望这对其他寻找相同事物的人有用。我上面解释的内容在 windows xp sp3 上进行了测试并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-03T08:22:50.360

我已将 Windows shell 更改为注册表上我的应用程序的启动器而不是资源管理器，唯一有效的快捷方式是*ctrl-alt-del*

以管理员身份运行 regedit

这将启动 cmd 而不是 explorer `reg add HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon /v Shell /t REG_SZ /d cmd.exe /f`

`Shell`将值编辑为`c:\path\to\your\runMyShell.bat`

所以只需放置一个脚本而不是像“runMyShell.bat”这样的资源管理器

```
@echo off
rem some Tasks To Be Done Before Custom Shell Loads
java -jar myshell.jar 
```

要从*control-alt-del*中删除任务管理器：

```
reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System /v DisableTaskMgr /t REG_DWORD /d 1 /f 
```

# highcharts - HighCharts：根据鼠标点击事件启用/禁用提示

> ID：15222024
> 
> 赞同：0
> 
> 时间：2013-03-05T10:57:31.503
> 
> 标签：highcharts

我需要根据鼠标点击事件启用/禁用工具提示。我在网上冲浪，但不知何故，这些建议不起作用。

在`click`我尝试过的活动中，`chart.tooltip.hide();`但没有奏效。即使它要工作，我也需要找到这个功能的反面。`chart.tooltip.unhide();`并且`chart.tooltip.show();`不被认可。

我读过 `chart.container.tooltip.enabled = true;`应该可以工作的地方，但即使这也不是一个可行的解决方案。

如果有人可以帮助我动态隐藏/取消隐藏工具提示，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:42:27.550

`chart.tooltip.refresh(point)`例如，您必须使用`chart.tooltip.refresh(chart.series[0].data[2]);`

# ember.js - ember.js - 在当前类的上下文中绑定

> ID：15222029
> 
> 赞同：0
> 
> 时间：2013-03-05T10:57:47.613
> 
> 标签：ember.js

我有一个数组控制器，它在计算属性中创建另一个对象，如下所示：

```
App.MyArrayController = Ember.ArrayController.extend
  prop: ( ->
    OtherClass.create
      content: Ember.Object.create
        user: @get('currentUser')
        referenceBinding: 'model' 
  ).property('model.[]') 
```

上面的 referenceBinding 没有绑定到 ArrayController 的内容。

这应该是可能的还是有办法将内容绑定到 OtherClass 实例的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:00:10.110

我想如果你传入控制器，这很容易实现，这样对象就可以控制你的控制器：

```
var that = this;
OtherClass.create({
    content: Ember.Object.create({
        user: this.get('currentUser'),
        referenceBinding: 'reference.model',
        reference : that //=> the controller
    })
}); 
```

# .net - 使用 SourceSafe 互操作进行模拟/委托

> ID：15222030
> 
> 赞同：3
> 
> 时间：2013-03-05T10:57:58.417
> 
> 标签：.net, security, com-interop, impersonation, visual-sourcesafe

我想`Interop.SourceSafeTypeLib 5.2.0.0`在 SourceSafe 8 上打开一个源安全数据库。

这应该发生在“网络服务”帐户下运行的服务器服务中。服务器服务应该使用互操作来打开 ss 数据库。但是，数据库位于另一台服务器上，因此 ss 必须访问网络共享。所有这些都应该在客户端的身份下完成，因此涉及到双跳问题。

现在，我设法使用 kerberos 模拟服务器服务，`WindowsIdentity.ImpersonationLevel`拥有`Delegation`. 有了这个，我可以`ss.ini`在远程共享中读取`File.ReadAllText`.

我认为这应该足以使 sourcesafe 互操作运行，就好像它在配置为在客户端帐户下运行的服务中运行一样。但是，我错了，我仍然得到“无法打开数据库”。（如果我真的尝试将服务器服务设置为在客户的帐户下运行，它运行良好。）

我在这里想念什么？

# c++ - C++ 桌面应用程序中的 Google Analytics

> ID：15222038
> 
> 赞同：3
> 
> 时间：2013-03-05T10:58:09.733
> 
> 标签：c++, qt

我正在尝试将 Google Analytics 跟踪添加到我的 C++/Qt 桌面应用程序中。为此，我正在`http://www.google-analytics.com/__utm.gif`按照此处指定的方式进行 http GET：http: [//automateeverything.tumblr.com/post/20500736298/google-analytics-without-javascript-or-cookies](http://automateeverything.tumblr.com/post/20500736298/google-analytics-without-javascript-or-cookies)

我的网址如下所示：

```
http://www.google-analytics.com/__utm.gif?utmwv=5.2.5&utmac=UA-XXXXXXXX-1&utmhn=prot-on.com&utms=1&utmn=1763710005&utmcc=__utma%3D265465294.163654595.1362420921.1362420921.1362420921.1%3B&utmp=%2Freallyallheaders.html&utmcs=-&utmr=-&utmip=127.0.0.1&utmul=es-es&utmfl=-&utmje=-&utmsr=1920x1080&utmhid=957274494 
```

这是我的源代码：

```
qint64 currentTimestamp = QDateTime::currentMSecsSinceEpoch()/1000;
if (this->timeOfFirstVisit == 0)
    this->timeOfFirstVisit = currentTimestamp;
if (this->timeOfPreviousVisit == 0)
    this->timeOfPreviousVisit = currentTimestamp;

QString googleAnalyticsRequestUrl;
QTextStream(&googleAnalyticsRequestUrl) << "http://www.google-analytics.com/__utm.gif"
<< "?utmwv=5.2.5"
<< "&utmac=" << TRACKING_ID
<< "&utmhn=" << HOST_NAME
<< "&utms=" << this->sessionNumberOfQueries
<< "&utmn=" << QString::number(qrand()) //this->generateRandomUTMN()
<< "&utmcc=__utma%3D" << this->domainHash
    << "." << this->sessionId
    << "." << this->timeOfFirstVisit
    << "." << this->timeOfPreviousVisit
    << "." << currentTimestamp
    << ".1%3B"
<< "&utmp=" << QString(QUrl::toPercentEncoding(pageUrl))
<< "&utmcs=-"
<< "&utmr=-"
<< "&utmip=127.0.0.1"
<< "&utmul=" + QLocale::system().name().toLower().replace("_", "-")
<< "&utmfl=-"
<< "&utmje=-"
<< "&utmsr=" + QString::number(QApplication::desktop()->screenGeometry().width()) + "x" + QString::number(QApplication::desktop()->screenGeometry().height())
<< "&utmhid=" + QString::number(qrand());

this->timeOfPreviousVisit = currentTimestamp;
this->updateSessionNumberOfQueries();

qDebug() << "Sending Google Analytics request: " << googleAnalyticsRequestUrl;

// Send a http GET request to the created URL
QNetworkAccessManager *manager = new QNetworkAccessManager();
connect(manager, SIGNAL(finished(QNetworkReply *)),this, SLOT(googleAnalyticsRequestReceived(QNetworkReply *)));
connect(manager, SIGNAL(finished(QNetworkReply *)),manager, SLOT(deleteLater()));

QUrl requestUrl(googleAnalyticsRequestUrl);
QNetworkRequest request(requestUrl);

// I see this headers with Firebug, but I think that they are not necessary
request.setRawHeader("Host", "www.google-analytics.com");
request.setRawHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0");
request.setRawHeader("X-Forwarded-For", "127.0.0.1");
request.setRawHeader("Connection", "close");

manager->get(request); 
```

但是我的页面访问从未出现在我的 Google Analytics（分析）页面中......如果我做错了，你能说我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:53:42.853

遗憾的是，谷歌没有可用的官方 Qt 库。但是，我建议您查看他们的 Google Analytics API（目前处于测试阶段）[https://developers.google.com/analytics/devguides/collection/protocol/v1/](https://developers.google.com/analytics/devguides/collection/protocol/v1/) 这也表示即使您的请求无效且未正确处理。他们更有可能使用这个 beta API 来支持你，然后对他们的 javascript 进行逆向工程以直接使用它。

编辑：还要查看您的代码，最好立即从 QUrl 开始并使用[http://harmattan-dev.nokia.com/docs/library/html/qt4/qurl.html#addQueryItem](http://harmattan-dev.nokia.com/docs/library/html/qt4/qurl.html#addQueryItem)添加查询项Qt 将负责正确的编码和所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:19:17.523

解决方案是打开一个套接字，因为我这个 PHP 库使： [http ://code.google.com/p/php-ga/source/browse/trunk/src/GoogleAnalytics/Internals/Request/HttpRequest.php#175](http://code.google.com/p/php-ga/source/browse/trunk/src/GoogleAnalytics/Internals/Request/HttpRequest.php#175)

我粘贴我的源代码：

```
GoogleAnalyticsManager::GoogleAnalyticsManager()
    : domainHash(this->generateDomainHash(HOST_NAME)),
      sessionId(qrand()),
      sessionNumberOfQueries(1),
      timeOfFirstVisit(0),
      timeOfPreviousVisit(0)
{

}

void GoogleAnalyticsManager::sendPageVisit(const char *pageUrl)
{
    QTcpSocket socket;
    socket.connectToHost("www.google-analytics.com", 80);
    socket.waitForConnected();
    if (socket.state() != QAbstractSocket::ConnectedState) {
        qDebug() << "Impossible to connect to www.google-analytics.com";
        return;
    }

    qint64 currentTimestamp = QDateTime::currentMSecsSinceEpoch()/1000;
    if (this->timeOfFirstVisit == 0)
        this->timeOfFirstVisit = currentTimestamp;
    if (this->timeOfPreviousVisit == 0)
        this->timeOfPreviousVisit = currentTimestamp;

    QString googleAnalyticsRequest;
    QTextStream(&googleAnalyticsRequest) << "GET /__utm.gif"
    << "?utmwv=5.2.5"
    << "&utmac=" << TRACKING_ID
    << "&utmhn=" << HOST_NAME
    << "&utms=" << this->sessionNumberOfQueries
    << "&utmn=" << QString::number(qrand())
    << "&utmcc=__utma%3D" << this->domainHash
        << "." << this->sessionId
        << "." << this->timeOfFirstVisit
        << "." << this->timeOfPreviousVisit
        << "." << currentTimestamp
        << ".1%3B"
    << "&utmp=" << QString(QUrl::toPercentEncoding(pageUrl))
    << "&utmcs=-"
    << "&utmr=-"
    << "&utmip=127.0.0.1"
    << "&utmul=" + QLocale::system().name().toLower().replace("_", "-")
    << "&utmfl=-"
    << "&utmje=-"
    << "&utmsr=" + QString::number(QApplication::desktop()->screenGeometry().width()) + "x" + QString::number(QApplication::desktop()->screenGeometry().height())
    << "&utmhid=" + QString::number(qrand())
    << " HTTP/1.0\r\n"
    << "Host: www.google-analytics.com\r\n"
    << "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0\r\n"
    << "X-Forwarded-For: 127.0.0.1\r\n"
    << "Connection: close\r\n\r\n\r\n";

    this->timeOfPreviousVisit = currentTimestamp;
    this->updateSessionNumberOfQueries();

    qDebug() << "Sending Google Analytics request: " << googleAnalyticsRequest;

    socket.write(googleAnalyticsRequest.toStdString().c_str());
    socket.waitForBytesWritten();
    socket.close();
}

int GoogleAnalyticsManager::generateDomainHash(const QString &domain)
{
    int hash = 1;

    if (domain != NULL && !domain.isEmpty()) {
        hash = 0;

        for (int pos = domain.length()-1; pos >= 0; pos--) {
            int current = domain.at(pos).toAscii();
            hash = ((hash << 6) & 0xfffffff) + current + (current << 14);
            int leftMost7 = hash & 0xfe00000;

            if(leftMost7 != 0) {
                hash ^= leftMost7 >> 21;
            }
        }
    }

    return hash;
}

void GoogleAnalyticsManager::updateSessionNumberOfQueries()
{
    this->sessionNumberOfQueries++;

    if (this->sessionNumberOfQueries > 500) {
        this->sessionId = qrand();
        this->sessionNumberOfQueries = 1;
        this->timeOfFirstVisit = 0;
        this->timeOfPreviousVisit = 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T23:12:14.170

这是一个小类（包含在单个文件头中），用于从 Qt 应用程序向 Google Analytics 发送测量事件：

[https://github.com/tesch1/qt-google-analytics-collector](https://github.com/tesch1/qt-google-analytics-collector)

当然，请记住遵守 Google 关于不发送个人身份信息、知情同意以及为您的用户提供选择退出的隐私政策……

# apache - 在 xampp 中设置虚拟主机时出错

> ID：15222039
> 
> 赞同：0
> 
> 时间：2013-03-05T10:58:10.563
> 
> 标签：apache, xampp, virtualhost

我已经阅读了很多关于虚拟主机设置的文章和帖子，但我无法找出问题所在。

我有一台 Win7 电脑，我在其中安装了一个 xampp 来管理我的 php + mysql 项目。默认情况下，Web 根目录是 C:\xampp\htdocs 为了避免与 Skype 冲突，我将 apache 设置为在端口 8080 上工作

如果我浏览到类似 localhost:8080/mysubdir 的内容，它工作正常。

我现在的想法是将 Apache 的 webroot 指向我电脑上的另一个目录：我想指向我的 webroot 的目录是 C:\Users\myuser\Google Drive\CODE_REPOS

我在网上搜索了一下，好像是通过VirtualHost可以的；这是我的配置

```
apache httpd.conf
#Listen [::]:80
Listen *:8080

# Virtual hosts
#Include "conf/extra/httpd-vhosts.conf" 
```

这是我的 httpd-vhosts.conf

```
# Use name-based virtual hosting.
#
NameVirtualHost *:8080
#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:8080>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:/xampp/htdocs" # change this line with your htdocs folder
    ServerName localhost
    ServerAlias localhost
    <Directory "C:/xampp/htdocs">
        Options Indexes FollowSymLinks Includes ExecCGI
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>
<VirtualHost development.loc:8080>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:/Users/myuser/Google Drive/CODE_REPOS" # change this line with your htdocs folder
    ServerName development.loc
    ServerAlias development.loc
    <Directory "C:/Users/myuser/Google Drive/CODE_REPOS">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

现在 C:\Windows\System32\drivers\etc\hosts 中的代码

```
# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost
    127.0.0.1       localhost
    127.0.0.1       development.loc 
```

如果我停止 Apache，请取消注释 #Include "conf/extra/httpd-vhosts.conf" 行并尝试再次启动 Apache，它会立即启动和停止。

我不明白我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T10:44:47.860

从包含行的开头删除哈希

```
 apache httpd.conf
    #Listen [::]:80
    Listen *:8080

    # Virtual hosts
    include "conf/extra/httpd-vhosts.conf" 
```

# android - Android：什么是活页夹线程？

> ID：15222041
> 
> 赞同：25
> 
> 时间：2013-03-05T10:58:21.693
> 
> 标签：android

我出于我的目的使用 Debug.startMethodTracing，并且在我可以看到的输出文件中（我不使用 IPC）：

```
8   Binder Thread #2
7   Binder Thread #1 
```

它是为了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-05T13:46:52.267

Binder 线程代表您的服务的一个单独线程。Binder 是一种提供进程间通信的机制。

让我们考虑一个例子。假设您有服务流程 B（见图）。并且您有几个应用程序与此服务 B 通信（例如，此应用程序之一是进程 A）。因此，一项服务 B 应该同时向不同的应用程序提供不同的结果。因此，您需要为不同的应用程序运行多个服务 B 副本。Android 在进程 B 的不同线程中运行这些副本，这些线程称为“Binder Thread #N”。

![Binder 通信](../Images/a445b0de74e83b09727296298c6b6597.png)

我在[这里](http://sujaiantony.wordpress.com/2011/12/28/an-android-101-an-overview-on-binder-framework/)拍了这张照片，你也可以在这里阅读 Binder 是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T22:26:39.870

“Binder 是一种提供进程间通信的机制。”

Binder 不一定只是一种 IPC 机制。

所有跨组件流量都是从 Binder 中抽象出来的，例如本地意图是 binder 抽象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-16T03:51:09.330

Binder Thread 用于 Android Service Binding 与进程间通信。大多数时候，您会在使用 Android 接口定义语言 (AIDL) 定义的接口的服务调用中遇到这个概念。

在 AIDL 的情况下，服务调用由由应用程序创建的默认线程池维护的线程执行。**这些线程称为Binder Threads。**这使服务能够同时处理多个调用。

[通常，通过“扩展 Binder 类](https://developer.android.com/guide/components/bound-services#Binder)”和“[使用 Messenger](https://developer.android.com/guide/components/bound-services#Messenger) ”定义的接口的服务调用在一个线程中顺序执行。

可以在[此处](https://developer.android.com/guide/components/aidl)找到有关“服务绑定和线程”的详细讨论。

简而言之：

> 从本地进程进行的调用在进行调用的同一线程中执行。
> 
> 来自远程进程的调用是从平台在您自己的进程内部维护**的线程池中分派的。**
> 
> 您必须为来自未知线程的传入呼叫做好准备，**同时发生多个呼叫**。换句话说，AIDL 接口的实现必须是完全**线程安全的**。

# visual-studio-2010 - 在设备管理器中找不到 Kinect 设备

> ID：15222042
> 
> 赞同：2
> 
> 时间：2013-03-05T10:58:22.973
> 
> 标签：visual-studio-2010, kinect, kinect-sdk

当我去我的设备管理器时，我看不到我的 kinect 设备。我下载了 kinect SDK 1.6。

![已安装的 SDK](../Images/7137753b82264321f6c3626fc40029f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:48:01.990

应该显示在那里的“Kinect for Windows Device”是 Kinect 底部的电机，用于上下倾斜设备。虽然理论上你不需要它，但它在设备管理器中的缺失可能是一种预示着麻烦的好奇心。

在两次我和一个朋友遇到类似问题的情况下（我缺少相机，他缺少音频阵列），我们发现电源插头是罪魁祸首。确保一切都正确连接。尝试移动到不同的 USB 端口和/或重新启动计算机。

也就是说，设备管理器中显示的内容确实取决于您的特定配置。在带有 SDK 1.6 和 X-box Kinect 的 Win 8 x64 上，我的设备管理器显示了 4 个节点：您拥有的三个节点，以及“Kinect for Windows Device”。[Kean、Hall 和 Kerry 的“遇见 Kinect”](https://rads.stackoverflow.com/amzn/click/com/1430238887)说您将拥有一个“Microsoft Kinect 设备”、一个“Microsoft Kinect 相机”和一个“Microsoft Kinect 音频阵列控件”；没有“安全控制”。[Webb 和 Ashley 的“开始 Kinect 编程...”](https://rads.stackoverflow.com/amzn/click/com/1430241047)显示了您拥有的三个节点作为正确的节点，以及“声音、视频和游戏控制器”下的“Kinect USB 音频”节点。

所以说真的，如果您的设备可以正常工作，请不要担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:39:20.500

您的屏幕截图应如此。您列出了音频阵列和摄像头，这就是 Kinect 的全部……一个麦克风和一对摄像头。所有其他“魔法”都在软件端完成，在 SDK 中。

您不会错过任何东西，并且应该能够使用 Kinect 开发应用程序。

# asp.net-mvc - 为什么我的 TypeScript 声明的类会抛出未声明的异常？

> ID：15222044
> 
> 赞同：0
> 
> 时间：2013-03-05T10:58:24.227
> 
> 标签：asp.net-mvc, typescript

我有以下 TypeScript 模块，为简洁起见删除了不必要的绒毛：

```
/// <reference path="jquery.d.ts" />
module SelectionOtherInputs {
    export class SelectionOtherInputDescriptor {
        constructor(public selectionId: string, public otherKey: any, public otherInputElementId: string) { }
    }
    export class SelectionOtherInputHelper {

        selectionsWithOther: { [selectionKey: string]: SelectionOtherInputDescriptor; } = {};

        getAllSelectionOthers() {
            $("[" + ATT_SELECTION_OTHER_FOR + "]").each(function () {
                var key = $(this).attr(ATT_DATA_SELECTION_OTHER_KEY);
                var desc = new SelectionOtherInputDescriptor("0", key, $(this).attr("id"));
                this.selectionsWithOther[key] = desc;
            });
        }
    }
} 
```

然后我尝试`SelectionOtherInputHelper`在一个小的演示页面中使用该类，如下所示：

```
@section scripts
{
    <script src="~/Scripts/TypeScript/OtherInput.js"></script>
    <script>
        var otherManager = new SelectionOtherInputHelper();
        otherManager.getAllSelectionOthers();
    </script>
} 
```

正在渲染“脚本”部分和 jQuery，但我仍然得到一个

> 未捕获的 ReferenceError：未定义 SelectionOtherInputHelper

`var otherManager = new SelectionOtherInputHelper()`通话出错。我还必须做什么才能正确导入和使用这个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:27:09.997

我想你忘记了模块：

```
@section scripts
{
    <script src="~/Scripts/TypeScript/OtherInput.js"></script>
    <script>
        var otherManager = new SelectionOtherInputs.SelectionOtherInputHelper();
        otherManager.getAllSelectionOthers();
    </script>
} 
```

# cross-platform - 在 Mac 上创建的字节序列 0a 0d 0d 0a 的奇怪 pcap 标头？

> ID：15222047
> 
> 赞同：2
> 
> 时间：2013-03-05T10:58:34.723
> 
> 标签：cross-platform, pcap, pcap-ng

我有一个在 Mac 上创建的 PCAP 文件，`mergecap`可以在带有 Apple 的 libpcap 的 Mac 上解析，但无法在 Linux 系统上解析。组合文件有一个额外的 16 字节标题，包含在 pcap 文件中常见`0a 0d 0d 0a 78 00 00 00`的介绍之前。`4d 3c 2b 1a`这是一个十六进制转储：

```
0000000: 0a0d 0d0a 7800 0000 4d3c 2b1a 0100 0000  ....x...M<+.....
0000010: ffff ffff ffff ffff 0100 4700 4669 6c65  ..........G.File
0000020: 2063 7265 6174 6564 2062 7920 6d65 7267   created by merg
0000030: 696e 673a 200a 4669 6c65 313a 2037 2e70  ing: .File1: 7.p
0000040: 6361 7020 0a46 696c 6532 3a20 362e 7063  cap .File2: 6.pc
0000050: 6170 200a 4669 6c65 333a 2034 2e70 6361  ap .File3: 4.pca
0000060: 7020 0a00 0400 0800 6d65 7267 6563 6170  p ......mergecap 
```

有人知道这是什么吗？或者我如何在带有 libpcap 的 Linux 系统上阅读它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:14:57.283

> 我有一个 PCAP 文件

不，你没有。你有一个[pcap-ng 文件](http://www.winpcap.org/ntar/draft/PCAP-DumpFileFormat.html)。

> 可以在 Mac 上使用 Apple 的 libpcap 解析

libpcap 1.1.0 及更高版本还可以读取一些 pcap-ng 文件（pcap API 只允许文件具有一种链路层头类型、一种快照长度和一种字节顺序，因此只有所有节都有的 pcap-ng 文件相同的字节顺序和所有接口具有相同的链路层标头类型和支持快照长度），并且 OS X Snow Leopard 及更高版本具有基于 1.1.x 的 libpcap，因此它们可以读取这些文件。

（OS X Mountain Lion 和更高版本已经调整 libpcap 以允许它也*写入*pcap-ng 文件；该`-P`标志使 tcpdump 写出 pcap-ng 文件，并在一些传出数据包上附加文本注释，指示进程 ID 和进程名称发送它们的进程 - pcap-ng 允许将文本注释附加到数据包。）

> 但无法在 Linux 系统上解析

您的 Linux 系统可能具有较旧的 libpcap 版本。（注意：不要*被*Debian 和 Debian 衍生产品称为 libpcap 包“libpcap0.8”而混淆——它们还没有使用 libpcap 0.8。）

> 组合文件有一个额外的 16 字节标头，其中包含 0a 0d 0d 0a 78 00 00 00

pcap-ng 文件是一系列“块”，以 4 字节块类型和 4 字节长度开头，两者都按照写入它们的主机的字节顺序。

它们被分成“节”，每个节都以“[节头块](http://www.winpcap.org/ntar/draft/PCAP-DumpFileFormat.html#sectionshb)”（SHB）开头；SHB 的块类型是 0x0a0d0d0a，它与字节顺序无关（因此您不必知道读取 SHB 的字节顺序）并包含回车和换行（因此，如果文件是，对于例如，通过一个工具在 UN*X 系统和 Windows 系统之间进行传输，该工具认为它正在传输一个文本文件并且“有用地”尝试修复行尾，SHB 幻数将被损坏，并且很明显该文件是以这种方式被转移而损坏；把它想象成一个[冲击指示器](https://en.wikipedia.org/wiki/Shock_indicator)）。

0x78000000 是长度；紧随其后的是“字节顺序魔术”字段，即 0x1A2B3C4D（*与*pcap 文件的 0xA1B2C3D4 幻数不同），其用途与 pcap 幻数相同，即：

1.  它让代码识别该文件是一个 pcap-ng 文件
2.  它让代码确定该部分的字节顺序。

（不，在查找 pcap 幻数之前您不需要知道长度；一旦找到了幻数，然后检查长度以确保它至少为 28，如果它小于或等于28，您拒绝该块无效。）

> 有人知道这是什么吗？

一个（小端序）pcap-ng 文件。

> 或者我如何在带有 libpcap 的 Linux 系统上阅读它？

在具有较新版本 libpcap 的 Linux 系统上阅读它（这可能意味着您正在使用的任何发行版的较新版本，或者可能只是意味着进行更新，如果这将为您提供 1.1.0 或更高版本的 libpcap） , 使用 Wireshark 或 TShark 读取它（它们有自己的用于读取捕获文件的库，支持原生 pcap 和 pcap-ng 格式，以及许多其他格式），或者从[tcpdump.org](http://www.tcpdump.org/#latest-release)下载更新版本的 libpcap ，构建它，安装它，然后构建使用该版本的 libpcap 而不是系统附带的那个版本读取 pcap-ng 文件所需的任何其他工具。

较新版本的 Wireshark 默认写入 pcap-ng 文件，包括在 mergecap 等工具中；您可以让他们编写带有标志参数的 pcap 文件`-F pcap`。

# iphone - 如何在 iPhone 的锁定屏幕中开始播放音乐

> ID：15222054
> 
> 赞同：4
> 
> 时间：2013-03-05T10:58:56.447
> 
> 标签：iphone, ios, objective-c

如果应用程序未运行并播放 iPod 音乐和播放无线电流 url，我会使用`UILocalNotification`它来提醒用户。`MPMusicPlayerController``MPMoviePlayerController`

根据 Apple doc：如果 iphone 被锁定并且设备收到本地通知，那么它将播放 30 秒的声音，当用户滑动滑块时，它将把应用程序置于前台并发生两种情况

1.  如果 App 未运行，则调用方法

    `(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

2.  如果 App 已经在运行，则调用方法 -

    `(void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notify`

我可以用这些方法执行我的任务。

问题：当 iPhone 被锁定并且收到本地通知并且应用程序在前台运行时，我需要我的应用程序能够播放我的声音（可能是 iPod 音乐或流 url，但不是本地通知声音 30 秒）。

参考应用程序：“闹钟高清”和应用程序商店中也提供的其他应用程序以这种方式工作正常，但是当应用程序在后台运行时这些无法播放警报（我不明白为什么？？？）

我还尝试 [了 how-to-prevent-iphone-from-deep-sleeping](http://blog.marcopeluso.com/2009/08/23/how-to-prevent-iphone-from-deep-sleeping/)：

通过定期播放无声音乐来防止 iPhone 进入深度睡眠，但是如何通知应用程序收到通知以便开始播放“实际音乐”？以及如何开始播放新音乐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T11:49:04.043

@manju 抱歉我迟到了，但它对你有用。

```
 selectedDate = [timePicker date]; 
```

是selectedDate日期对象，这个时候你的通知就来了。
`[NSDate date]`通过这个你可以找到当前时间。并通过两次找到不同的时间。

```
 NSTimeInterval timeDifference =  [ selectedDate timeIntervalSinceDate:[NSDate date]]; 
```

现在，当您安排通知时，请编写此代码

```
 UIApplication *app = [UIApplication sharedApplication];
 UIBackgroundTaskIdentifier bgTask = 0;

 NSTimer  *backgroundTimer = [NSTimer scheduledTimerWithTimeInterval:timeDifference    target:self  selector:@selector(backgroundTask) userInfo:nil repeats:NO];

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
    }];

    -(void)backgroundTask
    {
        NSLog(@"Here you can play song via player ");
       } 
```

不要忘记添加 app.infolist

UIApplication BackgroundMode Audio 它将解决您的问题，在设备锁定时播放歌曲。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:52:52.370

用于`AVAudioSessionCategoryPlayback`音频会话。[**在此处**](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007875-CH1-SW1)查看音频会话编程指南[](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007875-CH1-SW1)

# iphone - iPhone照片库中照片的唯一标识符

> ID：15222057
> 
> 赞同：0
> 
> 时间：2013-03-05T10:59:05.793
> 
> 标签：iphone, ios, camera, photolibrary

我将开发一个应用程序，它基本上可以用作从 iPhone 应用程序（保存在照片库中）拍摄的照片的目录。我正在考虑创建一个 SQLite 数据库（目录）并将其映射到照片库中的照片（如果这种方法错误，请纠正我）。

映射照片和 SQLite 数据库的最佳方法是什么？

我想避免用户更改文件名以及文件和数据库之间的链接不再起作用的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:02:37.167

您可以将 Base63 字符串中的照片存储到 SQLite 数据库中。

对于照片的唯一标识符，您可以使用**imagename_curentUnixTimestamp.jpg**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:12:27.550

您可以使用当前日期和时间为照片命名并将其存储在文档目录中。还将照片的名称保存到数据库中。当需要时，根据存储在数据库中的名称从文档目录加载照片。

# iphone - 如何在 iOS 中检查应用程序的可用空间？

> ID：15222064
> 
> 赞同：1
> 
> 时间：2013-03-05T10:59:25.760
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

在我的应用程序中，我想下载一个大数据文件（可能超过 50MB），但同时如果用户在音乐和其他方面使用了大量空间，那么代码如何知道应用程序的内存是有限的（例如 40 MB），代码现在应该限制下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:01:34.853

您可以创建一个函数来执行此操作：

```
#include <sys/param.h>  
#include <sys/mount.h>  

+(float) diskSpaceLeft {  
    NSArray* thePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    struct statfs tStats;  
    const char *path = [[NSFileManager defaultManager] fileSystemRepresentationWithPath:[thePath lastObject]];
    statfs(path, &tStats);           
    float availableSpace = (float)(tStats.f_bavail * tStats.f_bsize);         
    return availableSpace;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:30:29.060

用这个：

```
 #include <sys/param.h>  
 #include <sys/mount.h>  

+(float) diskSpaceAvailable {  
    NSArray* pathDocDir = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    struct statfs tStats;  
    statfs([[pathDocDir lastObject] cString], &tStats);  
    float total_space = (float)(tStats.f_blocks * tStats.f_bsize);  

    return total_space;  
} 
```

# knockout.js - 如何控制和绑定到来自 Knockout 的多个 jqueryUI 对话

> ID：15222069
> 
> 赞同：0
> 
> 时间：2013-03-05T10:59:32.177
> 
> 标签：knockout.js

我希望能够控制来自 Knockout 的 n jqueryUI 对话

我在这里看到了如何从淘汰赛中控制对话： [最新淘汰赛和 jquery ui 对话框出错：在初始化之前无法调用](https://stackoverflow.com/questions/14707312/error-with-latest-knockout-and-jquery-ui-dialog-cannot-call-prior-to-initializa)

在那篇文章中，对话在更新处理程序中控制：

```
 update:ko.utils.unwrapObservable(allBindingsAccessor().dialogVisible);
              $(element).dialog(shouldBeOpen ? "open" : "close"); 
```

是否有任何共识，你将如何控制多个对话的状态与 observable 像这样：

```
 isAddOpen: KnockoutObservableBool = ko.observable(false);
    isEditOpen: KnockoutObservableBool = ko.observable(false);

    openEditDialogue(editingItem) {
        this.editingItem = editingItem;
        this.isEditOpen(true);
    }
    closeEditDialogue(editingItem) {
        this.editingItem = editingItem;
        this.isEditOpen(true);
    }

    openAddDialogue() {
        this.isAddOpen(true);
    }
    closeAddDialogue() {
        this.isAddOpen(false);
    } 
```

我可以用另一个绑定处理程序重复这个逻辑，但我更愿意只坚持一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:36:31.067

绑定处理打开/关闭特定于包含绑定的元素的对话框。因此，您可以在映射到不同布尔值的单独元素上放置绑定：

```
<div data-bind="dialog: {autoOpen: false, title: 'Dialog test' }, dialogVisible: isOpen">dialog</div>

<div data-bind="dialog: {autoOpen: false, title: 'Dialog test 2' }, dialogVisible: isOpen2">dialog 2</div> 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/RvH6L/](http://jsfiddle.net/rniemeyer/RvH6L/)

# php - 具体的 5 个动态命名区域

> ID：15222070
> 
> 赞同：0
> 
> 时间：2013-03-05T10:59:33.377
> 
> 标签：php, concrete5

我继承了一个具体的 5 项目，并且正在调试为什么页面上的某些“区域”没有显示“内联编辑”功能。

版本为 5.5.1。

本质上，有一个页面列出了一些项目，每个项目都有一些 div 来包含每个项目的一些信息，例如名称、描述：

```
<div class = "description"></div> 
```

问题是只有一个描述元素是可编辑的——我发现这可能是因为“区域”是静态名称，因此：

`<div class = "description"> $a = new Area('Property Details'); $cont = Page::getByID($page->getCollectionID()); $regexMatchThis = $a->display($cont); </div>`

因此，只有一个名为“属性详细信息”的区域允许编辑。我是否正确，如何命名该区域以便它读取正确的数据但可以唯一命名以便可以编辑？

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:04:35.477

是的，该代码似乎只定义了一个区域（并在两者之间做了一些不相关的事情）。

如果您想要的第二个区域尚不存在，只需像这样组成第二个区域：

```
 <div class = "description">
   <?php
    $a = new Area('Some more info'); 
    $a->display(); `
    ?>
 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T03:50:13.930

Pekka 是正确的，但我不愿意用另一个（长）解释来乱扔答案讨论。

区域根据名称是动态的。因此，“Property Details 1”不同于“Property Details 01”。

您可以执行以下操作：

```
for ($i = 1; $i <= 10; $i++) {
   $a = new Area('Property Details ' + $i); 
   $a->display();
} 
```

你会得到 10 个依次命名为“Property Details x”的区域，从 1 到 10。

假设您向它们添加内容块。只要它们保持完全相同的名称，这些块就会按预期工作。您甚至可以将第一行更改为：

```
for ($i = 10; $i >= 1; $i--) { 
```

在这种情况下，您将获得按顺序向下命名的区域（10、9、8...），C5 会将内容块保留在其原始区域中——因此它们都将颠倒过来。

但是，假设您这样做：

```
for ($i = 11; $i <= 20; $i++) { 
```

现在你得到 10 个区域（11、12、13...），而且都是空白的。内容块基本消失了。如果需要，您可以创建新的内容块。但是然后继续将原始循环放回 (1, 2, 3...)。您的原始内容块又回来了——就像以前一样。

这个非常长的解释只是表明 C5 基于名称创建了一个块，并且该名称成为关键。它可以是任何东西。您可以基于页面名称，或动态生成它，或其他任何方式。一旦创建它就无法更改它（如果您不想“丢失”块）。

但是......我会再次同意Pekka的观点......你可能不想这样做。不知道您的目标，您正在创建（或延长）一个非常脆弱且难以维护的解决方案。Pekka 建议为每个属性创建子页面，然后您可以使用页面列表块来“拉”适用的属性。或者，如果您不想创建单独的页面，请使用 Jordan 的 Designer 内容块 - [http://www.concrete5.org/marketplace/addons/designer-content/](http://www.concrete5.org/marketplace/addons/designer-content/)。有一个区域（“属性详细信息”），并为每个属性添加一个块。更容易删除、重新排序等。

**编辑以解决 Sphere 的前两个问题：** 向区域添加块非常简单。只要这些区域没有重复的名称，您就可以像之前尝试的那样单击它，然后添加一个块。我不确定您的特定网站需要什么块类型——这是您网站特有的。它可能只是一个*内容*块，或者可能是具有特定*模板*的页面列表块，以前的开发人员将其设置为每个块实例、每个区域“列出”一个页面（这真的很奇怪，但你永远不知道.. .)。*或者，也许它是从设计器内容*创建的块类型*我之前提到的块。在现有的块上四处寻找应该会给你一个想法。另外，我发现有时他们会在 HTML 中写出一些识别 ID。因此，来源类似于 .*

 *至于您的代码示例：是的， $cont 是 page. Pekka 和我提供的代码 ($a->display()) 基本上是这样的：

1.  初始化一个名为“Property Details”（或 1 或 2 或其他）的区域。正如所讨论的，这是关键。
2.  显示它，默认为“为”当前页面显示它。这与“在”当前页面不同。它将始终显示在当前页面上......您作为参数传递给 ->display() 的内容更像是“应该从中拉出该区域的页面”。因此，如果您理论上可以通过 $thePageObjectForPropertyOnMainStreet，它将显示该页面的“属性详细信息”区域。使用 $cont 是不必要的。在创建它时（它已经存在）。但是……现在想来，这可能是他试图做的。$cont 可能是对单个属性页的引用。这些页面*可能*有一个名为“Property Details”的区域，他的循环用于从这些页面中“拉出该区域”。但是，$cont 看起来会有所不同。您可以通过执行 $cont = Page::getByID(x); 之类的操作对其进行硬编码，其中 x 是属性页的 cID，该页有一个称为“属性详细信息”的区域。编辑保存后，您可以在 URL 中获取 cID。*

# c++ - cuda 文件组织的有效方式： .cpp .h .cu .cuh .curnel 文件

> ID：15222071
> 
> 赞同：13
> 
> 时间：2013-03-05T10:59:37.683
> 
> 标签：c++, header, cuda, project, organization

cuda 最容易理解/最有效的代码组织是什么。经过一番调查，我发现 cuda 函数声明应该在 .cuh 文件中，实现驻留在 .cu 文件中，内核函数实现在 .curnel 文件中。.cpp 和 .h 文件中的其他 c++ 内容通常。最近我发布了一个问题，[Visual Studio .cu 文件显示语法错误但编译成功](https://stackoverflow.com/questions/15205458/visual-studio-cu-file-shows-syntax-error-but-compile-successfully)。这个组织正确吗？其中 .cpp 调用 .cu 并调用 .curnel 中的内核函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T21:21:42.487

*   **h**、**cpp**、**c**、**hpp**、**inc** - 不包含 CUDA C 代码（例如 __ *device* __ 和其他关键字、内核调用等）并且不进行任何 cuda 运行时调用（cuda...函数）的文件。从这些文件中调用 CUDA 驱动程序 API (cu...) 函数非常好。请注意，可以使用 NVCC 以外的编译器编译这些文件。
*   **cu** - CUDA C 源文件。这些文件被传递给 NVCC 编译器以编译成可链接（主机/设备）对象。
*   **cuh** , **cuinc** - 包含在 .cu 文件中的文件。这些文件可以有 CUDA C 关键字和/或调用 CUDA 运行时函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:14:59.787

例如，假设有一个基于 GPU 的 FDTD 代码。我通常会执行以下操作（Visual Studio 2010）。

*   main.cpp 文件，包括 CPU-GPU 内存传输；
*   FDTD.cu，包括一个`extern "C" void E_update(...)`包含内核`<<< >>>`调用的函数；
*   main.h 文件，包括`extern "C" void E_update(...)`原型；
*   FDTD.cuh，包括`__global__ void E_update_kernel(...)`函数。

# javascript - 圆在谷歌地图 api 上的先前坐标上创建

> ID：15222072
> 
> 赞同：1
> 
> 时间：2013-03-05T10:59:41.960
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在创建标记并围绕 500 个区域进行圈子。当用户通过拖动地图离开边界时，另一个圆圈将在新生成的标记的同一区域内创建。问题是它围绕先前生成的标记而不是当前生成的标记创建圆圈。

你可以在这里查看：http: [//jsbin.com/exiram/1](http://jsbin.com/exiram/1)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:28:26.563

我有点忙于发布完整的答案，所以请原谅我的伪代码这样的事情会起作用！

```
var map;  // OUR MAP OBJECT
var circle; //OUR CIRCLE
var center;  // lat long holder 
```

 **```
google.maps.event.addListener(map, 'drag', function() {        
  center = getCenter();   
  circle.setCenter(center);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:23:52.007

注意tme地图中的事件。对于每个平移“拖动地图”，您在地图中心制作一个新标记，并为该标记制作一个新圆圈。

很可能，您有一个监听器来捕获所有鼠标事件并调用代码来制作标记和圆圈。

您可以在页面中制作 2 个按钮，一个用于制作标记，另一个用于制作圆圈。**

# c++ - 如何在 QFileDialog 中隐藏侧边栏？

> ID：15222081
> 
> 赞同：0
> 
> 时间：2013-03-05T11:00:18.787
> 
> 标签：c++, qt, qfiledialog

我需要在 QFileDialog 中隐藏/禁用侧边栏（Qsidebar）。

我已经使用带有 d-pointer 的 magic-woodoo 和编辑 Qt 源代码（就像[这样](http://www.qtcentre.org/threads/53025-QFileDialog-getOpenFileName%28%29-clear-history?highlight=qfiledialog)）解决了这个问题。

有没有更简单的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-19T19:27:46.873

老问题，

我有一个 python hack：

```
fd = QtGui.QFileDialog()

...

# search for the sidebar and hide it when found
sidebar = None
views = fd.findChildren(QListView)
for obj in views:
  if obj.objectName() == "sidebar":
    sidebar = obj
    break
if sidebar is not None:
  sidebar.hide()  # hidden away!
  # ...now search for the splitter handle and hide it too
  splitter = None
  splitters = fd.findChildren(QSplitter)
  for obj in splitters:
    if obj.objectName() == "splitter":
      obj.setHandleWidth(0)  # hidden -- sort of
      break 
```

这是一个 hacky 解决方案，但由于我正在寻找同样的问题，我想我会分享我最终解决的代码。

ps——我没有机会编译上面的代码：对于潜在的错误和错别字，我很抱歉。希望你可以在这里使用这个想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T11:24:32.010

如果可能，QFileDialog 使用本机对话框。因此，如果您想以跨平台方式使用 Qt，简短的回答是否定的。

# python - Python动态多重继承

> ID：15222085
> 
> 赞同：4
> 
> 时间：2013-03-05T11:00:32.850
> 
> 标签：python, oop, inheritance, dynamic

我想根据 AorB 中的 init 函数的参数选择在运行时继承的类，A 类或 B 类。我已经尝试过下面的代码，但是这些方法并没有像我希望的那样重载：AorB("B").a() 返回 Aa() 而不是 Ba()。如何选择在运行时继承的类？

**更新：** 根据下面的反应，我尝试了以下代码。现在我想在 C 类中继承 AorB，这还不行：

```
class A(object):
    def a(self):
        return "I'm A.a"

    def b(self):
        return "I'm A.b"

class B(object):
    def a(self):
        return "I'm B.a"

    def c(self):
        return "I'm B.c"

def AorB(classname, cache={}):
    if not classname in cache:
        Base = globals()[classname]

        class AorB(Base):
            def __init__(self):
                print(classname)
                Base.__init__(self)
        cache[classname] = AorB
    return cache[classname]()

class C(AorB):                                                                  
    def __init__(self, classname):                                             
        AorB.__init__(classname)

if __name__ == "__main__":
    a = AorB("A")
    print("A.a:", a.a())
    print("A.b:", a.b())

    b = AorB("B")
    print("B.a:", b.a())
    print("B.c:", b.c())

    c = C("B")
    print("C.a:", c.a())
    print("C.c:", c.c()) 
```

产量

```
Traceback (most recent call last):
  File "classtest.py", line 28, in <module>
    class C(AorB):
TypeError: Error when calling the metaclass bases
    function() argument 1 must be code, not str 
```

代替：

```
A
('A.a:', "I'm A.a")
('A.b:', "I'm A.b")
B
('B.a:', "I'm B.a")
('B.c:', "I'm B.c")
B
('C.a:', "I'm B.a")
('C.c:', "I'm B.c") 
```

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:18:47.210

```
class A(object):
    def a(self):
        return "I'm A.a"

    def b(self):
        return "I'm A.b"

class B(object):
    def a(self):
        return "I'm B.a"

    def c(self):
        return "I'm B.c"

def make_AorB(Base, classname):
    class AorB(Base):
        def __init__(self):
            print(classname)
            Base.__init__(self)
    return AorB

def make_C(Base, classname):
    class C(Base):
        def __init__(self):
            Base.__init__(self)

        def d(self):
            return "I'm C.d"
    return C

def make_factory(getbase, make_cls):
    def factory(classname):
        if not classname in factory.cache:
            Base = getbase(classname)
            factory.cache[classname] = make_cls(Base, classname)
        return factory.cache[classname]()
    factory.cache = {}
    return factory

AorB = make_factory(lambda classname: globals()[classname], make_AorB)
C = make_factory(lambda classname: AorB.cache[classname], make_C)

if __name__ == "__main__":
    a = AorB("A")
    print(a.__class__, a.__class__.__bases__)
    print("A.a:", a.a())
    print("A.b:", a.b())

    b = AorB("B")
    print(b.__class__, b.__class__.__bases__)
    print("B.a:", b.a())
    print("B.c:", b.c())

    c = C("B")
    print(c.__class__, c.__class__.__bases__)
    print("C.a:", c.a())
    print("C.c:", c.c())
    print("C.d:", c.d()) 
```

产量

```
A
(<class '__main__.AorB'>, (<class '__main__.A'>,))
('A.a:', "I'm A.a")
('A.b:', "I'm A.b")
B
(<class '__main__.AorB'>, (<class '__main__.B'>,))
('B.a:', "I'm B.a")
('B.c:', "I'm B.c")
B
(<class '__main__.C'>, (<class '__main__.AorB'>,))
('C.a:', "I'm B.a")
('C.c:', "I'm B.c")
('C.d:', "I'm C.d") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:24:22.473

这是您的代码的问题（更新后）C 不能从 AorB 继承，这是一个函数：

```
class C(AorB):
    def __init__(self, classname):
        AorB.__init__(classname) 
```

由于您想在对 C 的调用中使用基类，因此您可以让 C 成为依次调用 AorB 的函数：

```
def C(basename):
    return AorB(basename) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:42:12.190

我不是 100% 确定（您的用例），但您可以使用 的变体`type`来执行以下操作（其中某些条件是有条件的）：

```
def produce_C(kls, *args, **kwdargs):
    return type('C', (globals()[kls],), {})(*args, **kwdargs) 
```

虽然这会混淆类型系统......（可能将类名修改为`C_from_A`或`C_from_B`- 但是呃）

# ruby-on-rails - 多个 redmine 实例最佳实践

> ID：15222086
> 
> 赞同：5
> 
> 时间：2013-03-05T11:00:46.930
> 
> 标签：ruby-on-rails, nginx, redmine, multiple-instances

我正在研究在同一服务器中拥有多个 redmine 实例的最佳方法（基本上我需要为每个 redmine 组创建一个数据库）。

到目前为止，我有 2 个选择：

1.  为每个组部署一个 redmine 实例
2.  部署一个具有多个数据库的 redmine 实例

我真的不知道在这种情况下最好的做法是什么，我看到有些人在这两种情况下都这样做。

我已经使用 nginx 和乘客测试了多个 redmines（3 个实例）的部署。它运作良好，但我认为在很多情况下它可能不可行。每个应用程序需要大约 100mb 的 RAM，并且随着请求的增加，它往往会为应用程序分配更多的进程。如果我们有很多实例，这种情况似乎很糟糕。

选项 2 似乎是合理的，我想我可以使用 rails 环境来实现它。但我认为存在一些与会话相关的安全问题（我认为站点 A 的用户在 A 中进行身份验证后可以在站点 B 上执行操作）。

这种情况有什么好的做法吗？在这种情况下采取的最佳做法是什么？

与此相关的其他要求是：我们必须能够在不中断其他实例的情况下创建或关闭 redmine 实例（例如，我们应该避免服务器重启......）。

感谢您的任何建议，对不起我的英语！

编辑：

我的解决方案：我为每个组使用了一个 redmine 实例。我使用 nginx+unicorn 独立管理每个实例（因为乘客不允许我独立管理每个实例）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T11:26:18.890

毕竟这两个选项并没有太大的不同。唯一的区别是，在选项 2 中，您的磁盘上只有一份代码副本。

在任何情况下，您仍然需要为每个实例运行不同的工作进程，因为 Redmine（以及通常大多数 Rails 应用程序）不支持每个请求的数据库切换，并且有关特定环境的一些数据被缓存在进程中。

鉴于此，即使是共享代码库也没有太多动力，因为它需要某些猴子补丁和 symlink-magic 来允许对有意的配置差异（数据库和电子邮件配置、上传文件的路径……）进行正确初始化. Debian 软件包可以做到这一点，但它（在我看来）相当脆弱，并导致一个相当非标准的系统。

但再次强调：即使您在实例之间共享磁盘上的相同代码，也无法共享正在运行的工作进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:03:37.537

Redmine 不正式支持从同一代码库运行多个实例。但是，Debian/Ubuntu 软件包似乎支持这种方法......请参阅：

*   [Debian挤压上的多个redmine实例](http://www.redmine.org/boards/1/topics/16647)

所以，一般来说：

*   如果您使用 Debian/Ubuntu，请使用选项 #2
*   否则选择#1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T19:01:47.097

再过几年，您现在可能要考虑为每个 redmine 实例使用 docker 容器的第三种选择。

I've been using [https://github.com/sameersbn/docker-redmine.git](https://github.com/sameersbn/docker-redmine.git) , and have been quite happy with it except that it doesn't yet support handling of incoming mail for creating and commenting on tickets.

# c# - 多次比较字符串

> ID：15222087
> 
> 赞同：0
> 
> 时间：2013-03-05T11:00:47.980
> 
> 标签：c#, string, algorithm, hash, compare

我正在生成随机脚本，但我必须保证每个新脚本都是唯一的（以前没有重复过）。所以基本上每个已经生成的脚本都会与每个新脚本进行比较。

我认为必须有一种方法来散列每个新脚本，而不是仅仅使用普通的字符串比较，这样比较会更快。

关于如何散列字符串以更快地进行多重比较的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:06:54.827

一种方法是使用`HashSet<String>`

> HashSet 类提供高性能的集合操作。集合是不包含重复元素且其元素没有特定顺序的集合。

```
HashSet<string> scripts = new HashSet<string>();

string generated_script = "some_text";

if (!scripts.Contains(generated_script)) // is HashSet<String> dont contains your string already then you can add it
{
    scripts.Add(generated_script);
} 
```

* * *

此外，您可以检查`duplicate items`数组中是否存在。但这可能不是很有效`HashSet<String>`

```
string[] array = new[] {"demo", "demo", "demo"};
string compareWith = "demo";

int duplicates_count = array.GroupBy(x => x).Count(g => g.Count() > 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:12:59.973

像下面这样使用 HashSet

```
 string uniqueCode= "ABC";
        string uniqueCode1 = "XYZ";
        string uniqueCode2 = "ABC";
        HashSet<string> uniqueList = new HashSet<string>();

       uniqueList.Add(uniqueCode);
       uniqueList.Add(uniqueCode1);
       uniqueList.Add(uniqueCode2); 
```

如果您看到唯一列表的**计数****，**您将是 2。所以 ABC 不会出现两次。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:08:00.473

您可以使用 HashSet。保证哈希集永远不会包含重复项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:09:55.367

将脚本与其哈希一起存储：

```
class ScriptData
{
  public ScriptData(string script)
  {
    this.ScriptHash=script.GetHashCode();
    this.Script=script;
  }

  public int ScriptHash{get;private set;}
  public string Script{get;private set;}
} 
```

然后，每当您需要检查您的新随机脚本是否唯一时，只需获取新脚本的哈希码并在所有`ScriptData`实例中搜索具有相同哈希码的任何实例。如果你没有找到任何你知道你的新随机脚本是独一无二的。如果您确实找到了一些，那么它们**可能**是相同的，您必须比较脚本的实际文本以查看它们是否相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:10:08.117

您可以将每个生成的存储`string`在[HashSet](http://msdn.microsoft.com/en-us/library/bb356440.aspx)中。

对于每个新字符串，您将调用`Contains`以 O(1) 复杂度运行的方法。这是确定新生成的字符串是否之前生成的简单方法。**

# java - 将 Lucene 库导入 NetBeans

> ID：15222088
> 
> 赞同：1
> 
> 时间：2013-03-05T11:00:51.923
> 
> 标签：java, netbeans, lucene

我正在使用 NetBeans 开发一个桌面应用程序，我想从 Apache 集成 Lucene 搜索引擎。我已经下载了 Lucene-4.1.0

我想知道将 Lu​​cene 库导入 NetBeans IDE 的最佳方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:11:19.997

主菜单中的工具/库。单击“新建库...”（我建议将其命名为“Lucene-”加上您正在使用的版本）。

在 Classpath 选项卡上，单击“Add JAR/Folder...”并从下载 Lucene 的位置选择所需的 jar 文件。对于 Javadoc，请从您的下载文件中选择 docs/api 目录（至少，我们使用的版本是该目录）。如果他在您选择的位置找不到 Javadoc，NetBeans 会告诉您。

现在您可以将新库添加到您的项目中。对于您要使用的任何外部库，该过程都类似。

**编辑** （右键单击您的项目）项目->属性->库->添加库

# jquery - jquery mobile - changePage 不适用于 pageinit

> ID：15222089
> 
> 赞同：0
> 
> 时间：2013-03-05T11:00:52.887
> 
> 标签：jquery, jquery-mobile

这是示例代码（test.html），

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css"/>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>

<div data-role="page" id="page1">
<div data-role="content" id="content">Page 1</div>
</div>

<div data-role="page" id="page2">
<div data-role="content" id="content" >Page 2</div>
</div>

<script>
$('#page2').live('pageinit',function(evt) {
    $.mobile.changePage($('#page1'),{allowSamePageTransition:true})
});
</script>

</body>
</html> 
```

当我尝试使用 Firefox 和 Chrome 访问 ./test.html#page2 时，预计会更改为 page1。但它并不总是成功地更改为 page1。有时，它在 page2 中仍然保持不变。有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:50:59.687

你为什么不尝试如下

```
$('#page2').on('pageshow',function(evt) {
    $.mobile.changePage($('test.html#page1'),{allowSamePageTransition:true})
}); 
```

根据我的经验，另一条建议是嵌套的 JQM 页面会导致一系列导航错误。作为一个经验法则，我的 JQM HTML 页面总是有单独的页面。

# ruby-on-rails - rails 可以定义特定用户的能力

> ID：15222101
> 
> 赞同：0
> 
> 时间：2013-03-05T11:01:26.990
> 
> 标签：ruby-on-rails, cancan

我的应用程序中有表用户和主题。创建主题的用户具有该主题的全部权限，并且该用户可以授予其他用户访问或编辑的权限。如何在 cancan 中实现这个结构。我想要类似的东西

```
can? :edit, @topic

can :edit, Topic do |topic|
//get object @topic i pass above, and check current user has ability to edit this topic
end 
```

我想用 topic_id 和 user_id 创建新的表名 topic_share。主题和用户之间的多对多关系。我不知道如何在cancan中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:11:40.717

如果您在主题表上有某种形式`creator_id`，您可以在 cancan 中执行以下操作（假设您的能力围绕用户记录，creator_id 是创建主题的用户的 id，主题属于用户）

```
can :edit, Topic, creator_id: user.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:19:13.517

我知道这不是一个直接的答案，但您可能想看看我创建的这个 gem：[https ://github.com/intrepidd/rails-canhaz](https://github.com/intrepidd/rails-canhaz)

它允许在任何模型之间轻松创建权限。

# c# - 以编程方式提交 HTML 表单以进行基于浏览器的上传

> ID：15222102
> 
> 赞同：0
> 
> 时间：2013-03-05T11:01:34.190
> 
> 标签：c#, .net, youtube-api, http-post, youtube.net-api

我正在尝试使用 API v2.0 将视频从 c# Web 应用程序上传到 Youtube。

这是我找到的文档：

[YouTube API 2.0 文档](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Uploading_Videos "YouTube api 2.0 文档")

我可以为 Web 应用程序完成 AuthSub 并将视频元数据发送到 youtube；之后，我可以读取进行基于浏览器的上传所需的令牌和 URL。

现在我必须填写这个 HTML 表单来执行真正的上传。

```
<form action="post_url?nexturl=http://example.com" method ="post" enctype="multipart/form-data">
<input type="file" name="file"/>
<input type="hidden" name="token" value="token_value"/>
<input type="submit" value="go" />
</form> 
```

我在网上搜索了一个示例，说明如何以编程方式“模拟”并从代码隐藏发送此 html 表单，但没有运气。

这是我仅为测试目的编写的实际代码：

```
 YouTubeRequestSettings settings = new YouTubeRequestSettings("TEST_APP", "DEVELOPER_KEY", "USERNAME", "PASSWORD");
        YouTubeRequest request = new YouTubeRequest(settings);

        Video newVideo = new Video();

        newVideo.Title = "My Test Movie";
        newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
        newVideo.Keywords = "cars, funny";
        newVideo.Description = "My description";
        newVideo.YouTubeEntry.Private = false;
        newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema));

        FormUploadToken token_youtube = request.CreateFormUploadToken(newVideo);
        string url_per_post_youtube = token_youtube.Url + "?nexturl=" + HttpContext.Current.Request.Url.AbsoluteUri + "test.aspx"; 

        byte[] fileBytes = File.ReadAllBytes("C:\\VIDEO.MOV");
        StringBuilder sb = new StringBuilder();

        foreach (byte b in fileBytes)
        {
            sb.Append(Convert.ToString(b, 2).PadLeft(8, '0'));
        }

        ASCIIEncoding encoding = new ASCIIEncoding();
        string postData = "token=" + token_youtube.Token.ToString();
        postData += ("&file=" + sb );
        byte[] data = encoding.GetBytes(postData);
        try
        {
            // Prepare web request...
            HttpWebRequest myRequest =
              (HttpWebRequest)WebRequest.Create(url_per_post_youtube);
            myRequest.Method = "POST";
            myRequest.ContentType = "multipart/form-data";
            myRequest.KeepAlive = true;
            myRequest.ContentLength = data.Length;
            Stream newStream = myRequest.GetRequestStream();
            // Send the data.
            newStream.Write(data, 0, data.Length);
            newStream.Close();

            string strResponse;
            StreamReader stIn = new StreamReader(myRequest.GetResponse().GetResponseStream());
            strResponse = stIn.ReadToEnd();
            stIn.Close();
        }
        catch (Exception ex)
        {
            string asd = ex.Message;
        } 
```

使用此代码，youtube 远程服务器会回复：

远程服务器返回错误：(400) Bad Request

> 400 响应代码标识错误请求。例如，如果您向错误的 URL 提交请求或在请求中包含不受支持或不存在的参数，您将收到 400 响应代码。API响应内容会解释API返回400响应码的原因

我找不到理解发生了什么的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:51:09.487

所以你需要一种方法来理解什么是appenin'？我认为最好的方法是使用工具来*准确*找到您发送到 youtube 的消息。

[fiddler](http://www.fiddler2.com/fiddler2/)是一个非常有用的监控 http 流量的工具。有了这个，您可以准确地看到您发送的内容。要么您没有发送您认为要发送的消息，要么您对需要发送的消息的形式有误。这应该让您确定其中发生了哪一个。

# javascript - 防止Firefox中的默认选项卡行为

> ID：15222105
> 
> 赞同：4
> 
> 时间：2013-03-05T11:01:43.910
> 
> 标签：javascript, jquery, firefox, focus

我几乎没有要更新的输入字段。当按 Tab 键时，只有在当前字段的某些验证成功后，我才需要将焦点移动到下一个字段。如果失败，则留在同一领域。

```
function fieldFocus(e, nxFld){
  var key;
  if (window.event) key   = e.keyCode;
  else if (e.which) key = e.which;

  if (!e.shiftKey && key === 9) {
    e.stopPropagation();
    e.preventDefault();

   // do validate {}
    if (success)
     $(nxFld).focus();  //set the focus to the next fld
    else
     //  remain in the same field   
  }
  return false;
}

$(currFld).bind("keydown",function(e) {
   return fieldFocus(e, nxtFld); 
}); 
```

这在 IE 和 Chrome 中运行良好。但在 Firefox 中，默认焦点总是在验证之前触发。请帮助我防止Firefox的默认行为。

----编辑了与@Faizul Hasan的代码相关的代码----

```
<script>
  function fieldFocus(e, obj){
    var key;
    if (window.event) key   = e.keyCode;
    else if (e.which) key = e.which;

    if (!e.shiftKey && key === 9) {
      // do validate
      if (0 !== obj.value.length){
        var answer = confirm('Are you sure?')
        if(answer)
          return true;
        else{
          // need to stop cursor focus to the next field
          e.stopPropagation();
          e.preventDefault();
        }
      }
      else{
        e.stopPropagation();
        e.preventDefault();
      }
    }
    return false;
  }
</script> 
```

在用户确认焦点移动到 Firefox 中的下一个字段之前，这就是我遇到真正问题的地方。但在 IE 和 Chrome 中它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:38:06.460

尝试这样的事情。这在 Chrome 和 Firefox 中也可以正常工作。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <script>
      function fieldFocus(e, obj){
        var key;
        if (window.event) key   = e.keyCode;
        else if (e.which) key = e.which;

        if (!e.shiftKey && key === 9) {
          // do validate
          if (0 !== obj.value.length){
            return true;
          }
          else{
            e.stopPropagation();
            e.preventDefault();
          }
        }
        return false;
      }
    </script>
</head>
<body>
  <input type="text" id="first-field"  onkeydown="fieldFocus(event, this);" />
  <input type="text" id="second-field" onkeydown="fieldFocus(event, this);" />
  <input type="text" id="third-field" onkeydown="fieldFocus(event, this);" />
  <input type="text" id="fourth-field" onkeydown="fieldFocus(event, this);" />
  <input type="text" id="fifth-field" onkeydown="fieldFocus(event, this);" />
  <input type="text" id="sixth-field" onkeydown="fieldFocus(event, this);" />
</body> 
```

请注意，这是一个示例代码供您参考，因为您的代码中未提及触发函数的方式。您可以使用 jQuery 轻松地为`keydown`事件调用函数，而不是为所有输入元素（如`onkeydown = functionName(<params>)`. 希望这会对你有所帮助。

**更新：相同的代码，但集成了 jQuery**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <script src="jquery-1.8.2.js"></script>
    <script>
      $(document).ready(function(){
        $('.input-element').each(function(index, value){
          $(value).keydown(function(event){
            fieldFocus(event, this);
          });
        });

        function fieldFocus(e, obj){
          var key;
          if (window.event) key   = e.keyCode;
          else if (e.which) key = e.which;

          if (!e.shiftKey && key === 9) {
            // do validate                   
            if (0 !== obj.value.length){
              return true;
            }
            else{
              e.stopPropagation();
              e.preventDefault();
            }
           }
          return false;
        }
      });
    </script>
    </head>
    <body>
      <input type="text" id="first-field" class="input-element"  />
      <input type="text" id="second-field" class="input-element" />
      <input type="text" id="third-field" class="input-element" />
      <input type="text" id="fourth-field" class="input-element" />
      <input type="text" id="fifth-field" class="input-element" />
      <input type="text" id="sixth-field" class="input-element" />
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:56:23.967

经过几次锻炼后，我发现了导致问题的 Firefox。这是“按键”事件。

将 preventdefault() 应用于 keydown 时，'keypress' 事件仍会触发，但仅在 Firefox 中。

所以我处理了下面的“按键”并解决了我的问题。

希望这会帮助许多其他人。

```
var browsFix = false;
function fieldFocus(e, nxFld){
  var key;
  if (window.event) key   = e.keyCode;
  else if (e.which) key = e.which;

  if (!e.shiftKey && key === 9) {
    browsFix = true;  
    e.stopPropagation();
    e.preventDefault();

    // do validate {}
    if (success)
      $(nxFld).focus();  //set the focus to the next fld
    else
    //  remain in the same field   
  }
  return false;
}

$(currFld).bind("keydown",function(e) {
  browsFix = false;
  return fieldFocus(e, nxtFld); 
});

$(currFld).bind("keypress",function(e) {
  if (browsFix)
    return false; 
}); 
```

# grails - 懒惰初始化集合失败，没有会话或会话被关闭

> ID：15222106
> 
> 赞同：1
> 
> 时间：2013-03-05T11:01:53.420
> 
> 标签：grails, groovy, lazy-loading

我知道这已经被问过很多次了，我已经阅读/尝试了我能找到的大多数解决方案。但我找不到我的问题的确切解决方案。他们中的大多数都在调用 save() 但我只得到列表。这是在 groovy/grails 中。

执行此代码部分时，会出现错误*“无法延迟初始化集合，没有关闭会话或会话”*`return caseVisualImpairmentCauses`。当`caseVisualImpairmentCauses`包含值时，它返回错误*“对象引用了未保存的瞬态实例 - 在刷新之前保存瞬态实例”。*

```
def List<CaseVisualImpairmentCause> bindVisualImpairmentCause(Long visualImpairmentPrimaryCauseId, ArrayList caseVisualImpairmentCausesList,
    String visualImpairmentOtherCause) {
    def caseVisualImpairmentCauses = []

    if (visualImpairmentPrimaryCauseId) {
        def visualImpairmentPrimaryCauseInstance = VisualImpairmentCause.get(visualImpairmentPrimaryCauseId)
        CaseVisualImpairmentCause caseVisualImpairmentPrimaryCause = new CaseVisualImpairmentCause(visualImpairmentCauseIdvisualImpairmentCause: visualImpairmentPrimaryCauseInstance)
        caseVisualImpairmentPrimaryCause.isPrimary = true
        caseVisualImpairmentCauses << caseVisualImpairmentPrimaryCause
    }
    caseVisualImpairmentCausesList.each {
        VisualImpairmentCause visualImpairmentCause = VisualImpairmentCause.get(it as Integer)
        CaseVisualImpairmentCause caseVisualImpairmentCause = new CaseVisualImpairmentCause(visualImpairmentCauseIdvisualImpairmentCause: visualImpairmentCause)
        if (it.equals('5')) {
            caseVisualImpairmentCause.caseVisualImpairmentCauseOther = visualImpairmentOtherCause
        }
        caseVisualImpairmentCauses.add(caseVisualImpairmentCause)
    }
    return caseVisualImpairmentCauses
} 
```

那个电话是

```
 obpCaseInstance.visualImpairmentCauses = caseService.bindVisualImpairmentCause(visualImpairmentPrimaryCauseId, listOfCaseVisualImpairmentCauses, visualImpairmentOtherCause) 
```

知道为什么会发生此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:13:09.900

我能够通过将所有 findbyId()、.get() 和 getbyId() 更改为 .read() 来解决这个问题。似乎方法（查找、获取）已经在刷新并且与调用 .save() 一样好。我还取出了从另一个服务调用的所有获取数据的方法（不能被 .read() 替换的方法，如 findBYOtherproperty），并将其放在同一个方法中。这使错误消失了，而我没有在离开服务之前强制保存对象。

# javascript - Ajax 请求有效，但没有 CSS 和 JavaScript

> ID：15222107
> 
> 赞同：1
> 
> 时间：2013-03-05T11:01:55.260
> 
> 标签：javascript, css, ajax

下面是我对 Ajax 请求的一段代码。请求有效，但是当请求被处理时，页面显示没有任何 CSS 或 JS（即使我将所有内容都放在同一个目录中）。为了测试这一点，我将请求指向我网站上已经存在的页面。有什么帮助吗？提前致谢。

```
<html>
<head>
<script type="text/javascript">
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajaxtest.html",true);
xmlhttp.send();
}
</script>
</head>
<body>
<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>
</body>
</html> 
```

ajaxtest.html

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.5.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://swip.codylindley.com/jquery.DOMWindow.js"></script>

<p><a href="#inlineContent" class="defaultDOMWindow">Open DOM Window</a></p> 
<script type="text/javascript"> 
$('.defaultDOMWindow').openDOMWindow({ 
eventType:'click', 
loader:1, 
loaderImagePath:'animationProcessing.gif', 
loaderHeight:16, 
loaderWidth:17 
}); 
</script> 
<div id="inlineContent" style=" display:none;"> 
<p>Inline Content</p> 
<p>Click overlay to close window</p> 
<p>Consequat ea Investigationes in enim congue. Option velit volutpat quod blandit ex. Congue parum praesent aliquam nam clari. Qui praesent quam sollemnes id vulputate. In imperdiet diam at sequitur et. Minim delenit in dolor dolore typi. Erat delenit laoreet quinta videntur id. Ii at qui eum ut usus. Quis etiam suscipit iusto elit dolor. Dolor congue eodem adipiscing cum placerat. </p> 
<p>Erat usus lorem adipiscing non in. Nobis claram iusto et dolore facilisis. Claritatem decima velit decima ipsum wisi. Quinta ullamcorper sollemnes usus aliquip in. Ut aliquip velit tempor facit putamus. Habent duis et option quod facer. Delenit facer consequat seacula molestie notare. Qui tincidunt nobis lectores eleifend eorum. Decima usus facer id parum legere. Nonummy nonummy facilisis sit qui eodem. </p> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:04:37.367

这就是它应该如何工作的方式。

就行为而言，AJAX 调用不是浏览器窗口。它将获取 ajaxtest.html 并且仅获取此文件。它不会尝试获取 ajaxtest.html 引用的任何其他文件。

如果您想在文档中放置一些网页，请使用 iframe：

```
<iframe id="iframe_test" src="ajaxtest.htm"></iframe> 
```

然后，您可以通过调用将一些文档加载到此 iframe：

```
document.getElementById('iframe_test').src = 'ajaxtest2.html'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:52:56.677

更正如下。

```
document.getElementById('myDiv').innerHTML=xmlhttp.responseText; 
```

不要使用双引号`getElementById`

并且窗口没有打开，因为您正在动态添加 DOM，因此事件没有绑定到动态加载的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:58:04.740

**我终于找到了解决方案。**

// 在 HTML 响应后触发 CSS

```
function csstuff() 
{
    $('selector').css('var', 'val');
} 
```

// 在 HTML 响应后触发 JavaScript

```
function domWinInit(){ 
    //include the code from 
    (http://swip.codylindley.com/jquery.DOMWindow.js)
}

function domClick(){ 
    $('.defaultDOMWindow').openDOMWindow({ 
      eventType:'click', 
      loader:1, 
      loaderImagePath:'animationProcessing.gif', 
      loaderHeight:16, 
      loaderWidth:17 
    });  
} 
```

成功案例是当 status==200 和 readyState==4 时，在插入 HTML 响应后触发你的 js & css 函数

```
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById('myDiv').innerHTML=xmlhttp.responseText;

        // CSS & JavaScript firing goes here
        csstuff();
        domWinInit();
        domClick();
    }
} 
```

感谢您的重播。

# java - 使用扫描仪创建对象标识符？

> ID：15222109
> 
> 赞同：0
> 
> 时间：2013-03-05T11:02:06.167
> 
> 标签：java, java.util.scanner, identifier

有没有办法根据用户输入创建对象的名称？

例如。

```
Object scan.nextLine() = new Object(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:04:14.280

不，你不能这样做。

我建议有一个自定义类并存储 instanceName：

```
public class MyClass {

    private String instanceName;
    public MyClass(String instanceName) {
        this.instanceName = instanceName;
    }

}

MyClass myObj = new MyClass(scan.nextLine()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:21:39.690

**不**，这是不可能的。Java中没有*动态变量*。Java 变量名必须在编译时在源代码中声明。

如果要使用用户输入的值存储对象，您可以尝试使用 a`Map`来保存数据，如下所示。

```
Map<String, Object> objects = new HashMap<String, Object>();
String name = scan.nextLine();

Object obj = new Object();
objects.put(name, obj); // saving the objects in Map 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:03:43.173

不，你不能在 java 中这样做。因为您应该已经定义了一个类来创建它的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:07:55.727

有一些方法可以让你假装这样做。您可以使用地图来感知动态命名的对象。但是，既然您说您是初学者，那么简短的回答是否定的。确保你知道你在你的例子中要求什么。你的例子相当于说：

```
String line = "foo";
Object line = new Object(); 
```

我的猜测是这不是你想要的（而且不可能）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:13:33.367

鉴于线

```
Type variable_name = expression ; 
```

该名称`variable_name`仅用于引用*表达式*结果的其余范围。你知道Java是一种编译语言，这些名字只对程序员有用。一旦编译器完成它的工作，它就可以使用转换表并将这些名称替换为它想要的任何 ID。

由于这些名称在运行时甚至不存在，因此无法在运行时为变量选择名称。

但是，您可能需要根据用户输入访问对象（例如在 PHP 变量 variables 中`$$a_var`）。根据您的上下文，您可以使用反射来访问实例成员，或者使用简单的`Map<String, Object>`. 反射示例：

```
public class VariableRuntime {

    static class Person {
        public String first, last, city; 
    }

    public static void main(String[] args) throws Exception {
        Person homer = new Person();

        homer.first = "Homer";
        homer.last = "Simpson";
        homer.city = "Springfield";

        System.out.println("What do you want to know about Homer? [first/last/city]");

        String what = new Scanner(System.in).nextLine();
        Field field = Person.class.getDeclaredField(what);

        System.out.println(field.get(homer));
    }

} 
```

与 a 相同`Map<String, String>`：

```
public class VariableRuntime {

    public static void main(String[] args) throws Exception {
        Map<String, String> homer = new HashMap<String, String>();

        homer.put("first", "Homer");
        homer.put("last", "Simpson");
        homer.put("city", "Springfield");

        System.out.println("What do you want to know about Homer? [first/last/city]");

        String what = new Scanner(System.in).nextLine();

        System.out.println(homer.get(what));
    }

} 
```

# php - 在PHP中将二进制字节数组转换为图像

> ID：15222114
> 
> 赞同：3
> 
> 时间：2013-03-05T11:02:15.857
> 
> 标签：php, image

我在 Java 中有一个 Web 服务，它以`byte[]`（字节数组）形式返回请求的文件内容。有时这些文件是 HTML 文件，有时它们是图像。它是哪种文件类型没有限制。我正在寻找一种将这个数组转换为有效图像/字符串的方法。我对**文本文件的****工作**如下：

 **```
 $bytes = getArray();
    $string = implode(array_map("chr", $bytes));
    echo $string; 
```

这是的输出`echo $string;`

```
‰PNG  IHDR‘h6   pHYsÄÄ•+ OiCCPPhotoshop ICC profilexÚSgTSé=÷ÞôBKˆ€”KoR RB‹€‘&amp;*! Jˆ!¡ÙQÁEEÈ ˆŽŽ€ŒQ,Š Øä!¢Žƒ£ˆŠÊûá{£kÖ¼÷æÍþµ×>ç¬ó³ÏÀ–H3Q5€©BàƒÇÄÆáä.@ $p³d!sý#ø~<<+"À¾xÓÀM›À0‡ÿêB™\€„Àt‘8K€@zŽB¦@F€˜&amp;S `ËcbãP-`'æÓ€ø™{[”! ‘ eˆDh;¬ÏVŠEX0fKÄ9Ø-0IWfH°·ÀÎ²0Qˆ…){`È##x„™FòW<ñ+®ç*x™²&lt;¹$9E[-qWW.(ÎI+6aaš@.Ây™24àóÌ ‘àƒóýxÎ®ÎÎ6Ž¶_-ê¿ÿ"bbãþåÏ«p@át~Ñþ,/³€;€mþ¢%îh^ u÷‹f²@µ éÚWópø~<ß5°j>{‘-¨]cöK'XtÀâ÷ò»oÁÔ(€hƒáÏwÿï?ýG %€fI’q^D$.TÊ³?ÇD *°AôÁ,ÀÁÜÁü`6„B$ÄÂBB d€r`)¬‚B(†Í°*`/Ô@4ÀQh†“p.ÂU¸=púažÁ(¼ AÈa!ÚˆbŠX#Ž™…ø!ÁH‹$ ÉˆQ"K‘5H1RŠT UHò=r9‡\Fº‘;È2‚ü†¼G1”²Q=ÔµC¹¨7„F¢Ðdt1š ›Ðr´=Œ6¡çÐ«hÚ>CÇ0Àè3Äl0.ÆÃB±8,  “cË±"¬«Æ°V¬»‰õcÏ±wEÀ    6wB aAHXLXNØH¨ $4Ú  7   „QÂ'"“¨K´&ºùÄb21‡XH,#Ö/{ˆCÄ7$‰C2'¹I±¤TÒÒFÒnR#é,©›4H#“ÉÚdk²9”, +È…ääÃä3ää!ò[ b@q¤øSâ(RÊjJåå4åe˜2AU£šRÝ¨¡T5ZB­¡¶R¯Q‡¨4uš9ÍƒIK¥­¢•Óhh÷i¯ètºÝ•N—ÐWÒËéGè—èôw †ƒÇˆg(›gw¯˜L¦Ó‹ÇT071ë˜ç™™oUX*¶*|‘Ê •J•&amp;•*/T©ª¦ªÞªUóUËT©^S}®FU3Sã©   Ô–«UªPëSSg©;¨‡ªg¨oT?¤~Yý‰YÃLÃOC¤Q ±_ã¼Æ c³x,!k «†u5Ä&±ÍÙ|v*»˜ý»‹=ª©¡9C3J3W³Ró”f?ã˜qøœtN ç(§—ó~ŠÞï)â)¦4L¹1e\kª–—–X«H«Q«Gë½6®í§¦½E»YûAÇJ'\'GgÎçSÙSÝ§ §M=:õ®.ªk¥¡»Dw¿n§î˜ž¾^€žLo§Þy½çú}/ýTýmú§õGX³$ÛÎ<Å5qo</ÇÛñQC]Ã@C¥a•a—á„‘¹Ñ&lt;£ÕFFŒiÆ\ã$ãmÆmÆ£&&!&KMêMîšRM¹¦)¦;L;LÇÍÌÍ¢ÍÖ™5›=1×2ç›ç›×›ß·`ZxZ,¶¨¶¸eI²äZ¦Yî¶¼n…Z9Y¥XUZ]³F­­%Ö»­»§§¹N“N«žÖgÃ°ñ¶É¶©·°åØÛ®¶m¶}agbg·Å®Ãî“½“}º}ý= ‡Ù«Z~s´r:V:ÞšÎœî?}Åô–é/gXÏÏØ3ã¶Ë)ÄiS›ÓGgg¹sƒóˆ‹‰K‚Ë.—&gt;.›ÆÝÈ½äJtõq]ázÒõ›³›Âí¨Û¯î6îiî‡ÜŸÌ4Ÿ)žY3sÐÃÈCàQåÑ?Ÿ•0kß¬~OCOgµç#/c/‘W­×°·¥wª÷aï>ö>rŸã>ã<7Þ2ÞY_Ì7À·È·ËOÃož_…ßC#ÿdÿzÿÑ§€%g‰A[ûøz|!¿Ž?:Ûeö²ÙíAŒ ¹AA‚­‚åÁ­!hÈì­!÷ç˜Î‘Îi…P~èÖÐaæa‹Ã~'…‡…W†?ŽpˆXÑ1—5wÑÜCsßDúD–DÞ›g1O9¯-J5*>ª.j<Ú7º4º?Æ.fYÌÕXXIlK9.*®6nl¾ßüíó‡ââã{˜/È]py¡ÎÂô…§©.,:–@LˆN8”ðA*¨Œ%òw%Ž yÂÂg"/Ñ6ÑˆØC\*NòH*Mz’ì‘¼5y$Å3¥,å¹„'©¼L LÝ›:žšv m2=:½1ƒ’‘qBª!M“¶gêgæfvË¬e…²þÅn‹·/•Ék³¬Y- ¶B¦èTZ(×*²geWf¿Í‰Ê9–«ž+ÍíÌ³ÊÛ7œïŸÿíÂá’¶¥†KW-Xæ½¬j9²‰Š®Û—Ø(Üxå‡oÊ¿™Ü”´©«Ä¹dÏfÒféæÞ-ž[–ª—æ—n ÙÚ´ ßV´íõöEÛ/—Í(Û»ƒ¶C¹£¿<¸¼e§ÉÎÍ;?T¤TôTúT6îÒÝµa×ønÑî{¼ö4ìÕÛ[¼÷ý>É¾ÛUUMÕfÕeûIû³÷?®‰ªéø–ûm]­NmqíÇÒý#¶×¹ÔÕÒ=TRÖ+ëGÇ¾þïw- 6 UœÆâ#pDyäé÷  ß÷ :ÚvŒ{¬áÓvg/jBšòšF›Sšû[b[ºOÌ>ÑÖêÞzüGÛœ499â?rýéü§CÏdÏ&žþ¢þË®/~øÕë×ÎÑ˜Ñ¡—ò—“¿m|¥ýêÀë¯ÛÆÂÆ¾Éx31^ôVûíÁwÜwï£ßOä| (ÿhù±õSÐ§û“““ÿ˜óüc3-Û cHRMz%€ƒùÿ€éu0ê`:˜o’_ÅFìIDATxÚÁIoUàyËŒ§3žÅN°/Ávš BÛiQ¥J=ô€¢^*nHpAøHÜøœzABÀ$$$TRDQ$$C’62‰—8Nâ‰ñÄÛxÞìoæñ} qðûÁ^Ã%¤T]ÆXl5O¿ÿqÇ¸üo:J²ª)ÊÖÃ{Ÿ}úØš9öÌ~çÞ›èñö»\ˆ)atð²ùõ“Ÿ..NgF£B(§•ÆÑIä;•bŽã\Ô¥J)¿V)®ä–êõÃÑ³m‹±øÕB‡ÜÀ8ŸL®ž=¯Ó(,&–…çvE>ÇM’ÎIÏuü‚þÉ£íoßùcw÷×?ŸwÍQ»Ý1Œa±£1ÃÖtÑ†&gt;ä(cqÓ·>úà=”’²²tÿöíF·óÍoÏ\×‰CŸ"Œ9  0f²`2ªZ-¬ü°³;š«ù…ÀÎ¦¶šÉ6»ƒ¬¦jXÂæpŒH‰Â5m]¿þBVÿíµùî[FKMK«Çýé|k£¦¨RL#<™â0E{£VãÓZVOï7FSëã÷·oÞ¸ùùW_Ôª¥‡÷ïò¼à{!øùÉ—–íÙsWH+¼ÏOÏªÅ%âÞÜ*è‹Š¾Ð1zâ¢¬æ5Ïá¤xàêºf†Oÿn•u­Z)ëZ˜Ñ:³ÑÑÑêu>;íÞÜñÜñXÂù>Ùk­îåúÝŒ9¾šM“±9JÙ Äñt"h®XÂ­”Pry5kœÛÍ¾- T+}bõGãõJe.ºÔóFn¸ ‹›¯—=xwÉ^s6&6Ç(@xAí•l»×{ZßgIÐä¯“þÍ·6’„ 
```

但我不知道如何对图像文件执行此操作。我可以以某种方式将此数组写入文件并加载图像，但我的项目不允许我这样做。我必须即时执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:26:06.950

如果您只想向用户显示图像，您只需提供正确的内容标题和响应：

```
if      (substr($string, 0, 4) == "\x89PNG")  header('Content-Type: image/png');
else if (substr($string, 0, 2) == "\xFF\xD8") header('Content-Type: image/jpeg');
else if (substr($string, 0, 4) == "GIF8")     header('Content-Type: image/gif');

echo $string; 
```

图像实际上只是一个数据块（例如您拥有的“字符串”）加上它是图像的指示（在 HTTP 中，这将是 MIME 标头）。由于您已经拥有 blob，因此您只需要标题即可让浏览器将其解释为图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:05:23.237

尝试

```
$body = file_get_contents('php://input'); 
```

并参考[PHP - 从字节数组中获取图像](https://stackoverflow.com/questions/1170006/php-get-image-from-byte-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:05:45.200

你的意思就像这里显示的例子：http: [//us.php.net/manual/en/function.imagecreatefromstring.php](http://us.php.net/manual/en/function.imagecreatefromstring.php)

```
$data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
       . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
       . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
       . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$data = base64_decode($data);

$im = imagecreatefromstring($data);
if ($im !== false) {
    header('Content-Type: image/png');
    imagepng($im);
    imagedestroy($im);
}
else {
    echo 'An error occurred.';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T06:36:53.707

使用下面的代码，我们可以从字节数组代码创建图像。

```
$userId             = $userid;
    $encoded_image      = $imgurl;
    $upload_path        = $_SERVER["DOCUMENT_ROOT"]."/projectName/uploads/";
    $LoginUserDetails   = $this->getUserDetails($userId);
    if ($LoginUserDetails->profile_image != "") {
        $dbimgname      = $LoginUserDetails->profile_image;
        unlink($upload_path .$dbimgname);
        unlink($upload_path . 'thumb_img/' . $dbimgname);
    }
    $decoded_image = base64_decode($encoded_image);
    $imgname       = md5(uniqid()) . ".png";
    file_put_contents($upload_path . $imgname, $decoded_image);

    $thumbnail      = $upload_path . "thumb_img/" . $imgname; // Set the thumbnail name
    $actual         = $upload_path . $imgname; // Set the actual image name
    // Get new sizes

    $upload_image = $upload_path.$imgname;
    //  print_r($actual); print_r($thumbnail); print_r($upload_image); die;
    list($width, $height) = getimagesize($upload_image);
    $newwidth  = 196; // This can be a set value or a percentage of original size ($width)
    $newheight = 196; // This can be a set value or a percentage of original size ($height)
    // Load the images
    $thumb     = imagecreatetruecolor($newwidth, $newheight);
    $source    = imagecreatefrompng($upload_image);
    //print_r($upload_image); print_r($source); die;
    imagecopyresized($thumb, $source, 0, 0, 0, 0, $newwidth, $newheight, $width, $height); // Resize the $thumb image.
    imagepng($thumb, $thumbnail, 100); // Save the new file to the location specified by $thumbnail

    return $imgname; 
```**

# sql - 由于哈希匹配，全文搜索缓慢

> ID：15222115
> 
> 赞同：1
> 
> 时间：2013-03-05T11:02:15.833
> 
> 标签：sql, full-text-search, sql-server-2008-express

我写了一个带有 CONTAINS 谓词的全文搜索查询。当我执行它时，返回结果需要很长时间。我检查了执行计划，它显示了一个哈希匹配（右半连接），成本为 84%。我正在使用 SQL Server Express 2008

有没有办法避免哈希匹配？

```
 SELECT    [DocumentId], [PageId]
  FROM      [dbo].[DocumentFulltextData]
  WHERE     CONTAINS(InnerText,'"and"') OR CONTAINS(InnerText,'"*and*"') 
```

**执行计划** [http://dl.dropbox.com/u/43952220/ExecutionPlan.png](http://dl.dropbox.com/u/43952220/ExecutionPlan.png)

**哈希匹配详情** [http://dl.dropbox.com/u/43952220/HashMatchDetail.png](http://dl.dropbox.com/u/43952220/HashMatchDetail.png)

# ios - iOS - 在 Interface Builder 中更改视图大小以放入滚动视图

> ID：15222116
> 
> 赞同：0
> 
> 时间：2013-03-05T11:02:19.937
> 
> 标签：ios, uiscrollview

这是我的问题：

我想创建一个高度超过 iPhone 屏幕高度的视图。为了解决这个问题，我使用了一个运行良好的 UIScrollView。我在界面生成器中创建了滚动视图，并以编程方式将内容大小设置为屏幕高度的两倍（这足以满足我的目的）。我可以运行代码，它工作得很好。我可以毫无困难地上下滚动。

我唯一不明白的是如何在界面构建器中向视图添加更多项目（按钮、标签等），因为它不允许我更改视图的大小。我正在考虑创建一个滚动视图作为顶级对象，然后将一个更大高度的视图（内容视图）放入其中。现在唯一要做的就是将所有项目添加到内容视图中，这是不可能的，因为在界面构建器中，内容视图只有其常规大小。

我很感谢您对此有任何想法:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:06:07.540

您可以从界面生成器更改 UIView 的大小。

为此，您必须转到特定 UIView 的 Interface Builder。从**Simulated Metrics** **选择 Size = Freeform* * 现在您可以从界面生成器更改 UIView 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T21:32:49.877

接受的答案是准确的，但对于 iOS7 和 XCode5 来说不再完整。在此处查看@Whasssaaahhh[答案](https://stackoverflow.com/questions/12905568/how-do-i-use-scrollview-in-storyboard)以获取更多详细信息。

您可以通过两种方式将项目拖动到视图顶部。

1）更改 Y 位置：如果您选择 UIView 并在 Size Inspector 中将其 Y 位置更改为您想要查看的视图的任何部分（尝试像 -100 向下或 100 向上，玩任何数字适用于您的屏幕大小）您可以拖动所有按钮、标签、文本字段，但您喜欢每个可见部分。

2) 用鼠标拖动：如果你用鼠标小心地选择 UIView 并小心地向上或向下拖动它并放手，它将捕捉到新位置，以便你可以编辑它。如果您先在其上拖动一些对象，则更容易“看到”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:27:14.173

您可以更改视图的大小和滚动视图的大小以及添加对象。将添加的对象高度添加到 scrollView.contentSize 并添加到视图的高度。

# android - 创建自定义 OnClickListener

> ID：15222129
> 
> 赞同：9
> 
> 时间：2013-03-05T11:02:51.553
> 
> 标签：android, onclicklistener

我有一个 ArrayList 的按钮，我的 OCL 需要知道我按下了哪个索引。计划是这样的：

```
MyOnClickListener onClickListener = new MyOnClickListener() {

        @Override
        public void onClick(View v) {

            Intent returnIntent = new Intent();
            returnIntent.putExtra("deleteAtIndex",idx);
            setResult(RESULT_OK, returnIntent);
            finish();

        }
    };
    for (int i =0;i<buttonList.size();i++) {
        buttonList.get(i).setText("Remove");
        buttonList.get(i).setOnClickListener(onClickListener);
    } 
```

我的 OCL 实现需要是什么样的？

目前我有这个：

```
public class MyOnClickListener implements OnClickListener{

int index;

public MyOnClickListener(int index)
{
    this.index = index;
}

@Override
public void onClick(View arg0) {

} 
```

}

但是，我不确定我需要在 OCL 的构造函数以及被覆盖的`onClick`函数中做什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:04:59.680

设置`setOnClickListener`为按钮：

```
buttonList.get(i).setOnClickListener(new MyOnClickListener(i)); 
```

**编辑 ：**

> 我需要在 myOCL 中完成一项活动，我该怎么做？

要从非 Activity 类完成按钮单击上的 Activity，您需要将 Activity Context 传递给您的自定义 OnClickListener，如下所示：

```
buttonList.get(i).setOnClickListener(new MyOnClickListener(i, Your_Current_Activity.this)); 
```

并将自定义 OnClickListener 类的构造函数更改为：

```
int index;
Context context; 
public MyOnClickListener(int index,Context context)
{
    this.index = index;
    this.context=context;
}

@Override
public void onClick(View arg0) {

    // now finish Activity as\
    context.finish();
      //  OR
        // ((Activity)context).finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T11:07:01.147

```
View.OnClickListener myListener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Log.d("Button",v.getText().tostring);
    }
}); 
```

你会在视图中看到你的按钮值，你会发现它是哪个索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T11:11:06.443

每次更改您的 for 循环并创建新对象并在构造函数中传递索引。

```
for (int i =0;i<buttonList.size();i++) {
        buttonList.get(i).setText("Remove");
        buttonList.get(i).setOnClickListener(new MyOnClickListener(i));

} 
```

您可以在 onClick 方法中获取索引。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-10T23:50:56.617

我不确定这是否特别适用于您的情况，但我希望为可点击元素创建一个自定义侦听器，以防止它们被点击两次（如果用户快速点击）。

我的解决方案是创建一个侦听器类，我将自定义 Runnable 传递给，然后在第一次单击按钮时处理该 Runnable，但显然您可以传递任何自定义行为，这只是一个非常简单的说明如何用它...

```
import android.content.Context;
import android.os.Handler;
import android.util.Log;
import android.view.View;

public class MyCustomOnClickListener implements View.OnClickListener {
    public static final String TAG = MyCustomOnClickListener.class.getSimpleName();
    private Runnable doOnClick;
    private Context mContext;
    private int isClicked = 0;
    public MyCustomOnClickListener(Context c, Runnable doOnClick) throws Exception{
        if(!(c instanceof Context) || !(doOnClick instanceof Runnable))
            throw new Exception("MyCustomOnClickListener needs to be invoked with Context and Runnable params");
        this.doOnClick = doOnClick;
        this.mContext = c;
    }

    @Override
    public void onClick(View view) {
        Log.v(TAG,"onClick() - detected");
        if(isClicked++ > 0)return; //this prevents multiple clicks
        Log.d(TAG, String.format("onClick() - being processed. View.Tag = \"%s\"", view.getTag().toString()));
        new Handler(mContext.getMainLooper()).post(doOnClick);
    }
} 
```

然后使用它（假设您在`this`上下文中的 Activity 中）...

```
try{
   Button aButton = findViewById(R.id.someButton);
   aButton.setOnClickListener(new MyCustomOnClickListener(/*context*/this, new Runnable(){
  public void run(){
    //here you would put whatever you would have otherwise put in the onClick handler. If you need the View that's being clicked you can replace the Runnable with a custom Runnable that passes the view along 
  }
}));
}catch(...){

} 
```

# javascript - 如何将两个文本框组合成一行

> ID：15222133
> 
> 赞同：2
> 
> 时间：2013-03-05T11:03:21.550
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有 4 个 div 和一个主 div。每个 div 都在新行上。我想将两个 div 连接在一起以使用最大空间。我的代码是

```
<script type='text/javascript'>//<![CDATA[
  $(window).load(function(){
$(function() {
    $("#tabs").tabs();
    $('#maindiv > div ').each(function(){
         $(this).attr('style','padding-bottom: 10px;');
    });
    $('#maindiv > div > b').each(function(){
         $(this).attr('style','width: 80px; display: inline-block;');
    });
});
});//]]>  

</script>

    <div id="maindiv">
        <div>
            <b>Name:</b>
            <input type="text" name="name" value=""/>
        </div>
        <div>
            <b>Age:</b>
            <input type="text" name="age" value=""/>
        </div>
        <div>
            <b>Email:</b>
            <input type="text" name="email" value=""/>
        </div>
        <div>
            <b>Phone:</b>
            <input type="text" name="phone" value=""/>
        </div>
        <div>
            <b>City:</b>
            <input type="text" name="city" value=""/>
        </div>
        <div>
            <input type="submit" name="submit" value="submit"/>
        </div>
    </div> 
```

[您可以从http://jsfiddle.net/CG6Vw/1/](http://jsfiddle.net/CG6Vw/1/)看到我的代码 我该如何结合它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:04:23.920

添加`display:inline-block`

div 默认是块元素，因此它占据了行的整个空间，根据其中可用的内容将其设置`inline-block`或`inline`限制为宽度。

```
#maindiv > div {
    padding-bottom: 10px;
    display:inline-block
} 
```

**[演示](http://jsfiddle.net/CG6Vw/5/)**

# php - Zend Framewotk 2 安装（需要帮助）

> ID：15222138
> 
> 赞同：1
> 
> 时间：2013-03-05T11:03:40.370
> 
> 标签：php, zend-framework2

您好，我想在我的盒子上安装 zend 框架 2。我正在关注这个链接——http: [//framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)。当我使用

```
 E:\Nisarg\ZendSkeletonApplication>php composer.phar create-project --repository-
url="http://packages.zendframework.com" zendframework/zendframework  c:\wamp\www
\zc 
```

它向我显示了如下所示的错误

```
[Composer\Downloader\TransportException]

  The "http://packages.zendframework.com/packages.json" file could not be dow
  nloaded: failed to open stream: Unable to find the socket transport "ssl" -
   did you forget to enable it when you configured PHP? 
```

告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:17:11.477

您在 Windows 上，因此您应该能够通过取消注释包含的行来激活 SSL

```
php_openssl.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T02:21:30.863

您必须取消注释`extension=php_openssl.dll`并`path_to_wamp\bin\apache\Apache-version\bin\php.ini`重新`path_to_wamp\bin\php\php-version\php.ini`启动 WAMP。

# bash - 用于在与字符串匹配的文件夹（带有子文件夹）中查找文件名的 shell 脚本

> ID：15222141
> 
> 赞同：0
> 
> 时间：2013-03-05T11:03:46.390
> 
> 标签：bash, shell, filesystems

我想编写一个 shell 脚本，将文件名与我在运行时在命令行中输入的给定字符串匹配。我希望能够匹配文件名中的模式。就像字符串是“questi”并且文件夹包含“question1.c”、“question2.c”、“questions.doc”一样，这些应该显示为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:07:28.547

该脚本可以很简单，如下所示：

```
$!/bin/bash
shopt -s nullglob    # To return nothing if there is no match.
echo *$1* 
```

然后将其称为`script.sh questi`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:10:02.420

这可以使用`find`：

```
find /path/to/directory -type f -iname "*questi*" 
```

该选项`-type f`导致仅返回文件并`-iname`在 glob 上进行不区分大小写的匹配`*questi*`，因此应返回 'question1.txt'、'five_questions.txt' 等。

如果您希望可以将其放入 shell 脚本中，如下所示：

```
#!/bin/sh
find $1 -type f -iname "*$2*" 
```

并称它为：`filefind.sh /path/to/directory questi`

# c# - 使用文本标签和键值将项目添加到列表视图

> ID：15222143
> 
> 赞同：3
> 
> 时间：2013-03-05T11:03:52.753
> 
> 标签：c#, listview

我正在尝试将项目添加到`ListView`控件。我希望添加带有文本值（显示）和隐藏键值的项目，当它被选中时。

我试过以下代码：

```
string flows_path = "C:\\temp\\Failed Electricity flows\\";
            List<ListViewItem> flows_loaded = new List<ListViewItem>();

            foreach (string s in Directory.GetFiles(flows_path, "*.rcv").Select(Path.GetFileName))
            {
                ListViewItem new_item = new ListViewItem(s, 1);
                ListViewItem.ad

                // Add the flow names to the list
                flows_loaded.Add(new_item);

            } 
```

但它告诉我，`ListViewItem`它没有过载，`(string, int)`也没有我可以设置的“值”、“文本”或“键”值。

`ListViewItem("My Item")`有效，但我不知道如何为每个项目实现一个密钥。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:09:22.350

您可以通过将与 ListViewItem 关联的附加值存储在`Tag`属性中来存储它。

```
ListViewItem new_item = new ListViewItem(s);
new_item.Tag = my_key_value; 
```

ETA：请记住该`Tag`属性是 type `object`，因此在某些情况下，您可能需要在检索值时将值显式转换为正确的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:06:15.387

您可以通过设置 ListViewItem 的标记属性来添加“隐藏”值

```
ListViewItem new_item = new ListViewItem(s)
{
   Tag = 1
}; 
```

# python - 如何在python中列出某种类型的所有变量？

> ID：15222144
> 
> 赞同：0
> 
> 时间：2013-03-05T11:03:56.137
> 
> 标签：python

当我输入`dir()`python 时，它可以显示所有可见的变量，例如：

```
>>> dir()
['ACCT', 'ACEV', 'ALLOW_THREADS', 'ANNOTE_FONT', 'Annotation', 'AnnoteFinder', 'Arrow', 'Artist', 'AutoLocator', 'Axes', 'BS_KM', 'BUFSIZE', 'Button', 'CF_KM'] 
```

现在我想要一个可以列出某种类型的所有变量的函数，例如' `str`'，通过：

```
>>list_all_variable_of_type(str) 
```

它将返回类型为 'str' 的变量列表。

`'list_all_variable_of_type()`'函数怎么写？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:08:30.797

`dir`只显示名称。您需要`globals()`访问实际变量。所以可能：

```
[name for name, value in globals().items() if isinstance(value, basestring)] 
```

（请注意，如果您依靠它来访问一组未知的变量，那么您可能做错了；您应该将数据存储在像 dict 这样的整体数据结构中。）

# linux - 是否可以将共享库转换为静态库？

> ID：15222153
> 
> 赞同：0
> 
> 时间：2013-03-05T11:04:14.630
> 
> 标签：linux, shared-libraries, static-libraries

我认为这是不可行的，或者没有工具可以实现这一点，但理论上所有需要的材料都在共享库中，加上操作系统上从共享库生成静态库的内容。

那么您认为这在理论上可行吗？如果不可行，为什么？

我的问题是 libkrb5，它只在 ubuntu 上提供共享库。

谢谢！

# c++ - 什么是“visual studio 2008”的 unique_ptr 替代品，没有 3-rd 库（例如 boost）

> ID：15222161
> 
> 赞同：3
> 
> 时间：2013-03-05T11:04:35.283
> 
> 标签：c++, visual-studio-2008, unique-ptr

Visual Studio 2008 中有类似 unique_ptr<> 的东西吗？

仅事件 Visual Studio 标头也可以。

我想要这个功能，但不想使用 3-rd 方库。因为我正在编写示例/学习代码。

如果没有，为了简化，我将不得不直接使用原始指针。虽然我觉得不舒服......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:08:36.483

VS2008 不支持右值引用，因此不支持移动操作。`unique_ptr`行为依赖于这些，因此在 C++03 中*不能*完全替代。`auto_ptr`使用 copy-Ctor 来做 move-Ctor 应该做的事情。您可以使用这些，但我建议不要这样做，因为编译器无法帮助您找到不需要的副本，就像他使用`unique_ptr`.

另见此处：[unique_ptr boost 等价物？](https://stackoverflow.com/questions/2953530/unique-ptr-boost-equivalent)

# android - 创建数据库时Android空指针异常

> ID：15222166
> 
> 赞同：0
> 
> 时间：2013-03-05T11:04:49.507
> 
> 标签：android, nullpointerexception, sqlite

我有一个示例应用程序，它创建一个数据库、表并插入一行值。

这是我的`MainActivity.java`：

```
public class MainActivity extends Activity {

protected static final android.content.Context Context = null;
public String ReadingMode="";

@Override
protected void onCreate(Bundle savedInstanceState) {

             SQLiteDatabase sampleDB =  Context.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null);

             sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                        "SampleTable " +
                        " (LastName VARCHAR, FirstName VARCHAR," +
                        " Country VARCHAR, Age INT(3));");

             sampleDB.execSQL("INSERT INTO " +
                        "SampleTable " +
                        " Values ('Makam','sample','India',25);");

             sampleDB.close();                       
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

当我逐行调试时，在行`Null pointer exception`附近提出：

```
 SQLiteDatabase sampleDB =  Context.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null); 
```

我看到那`sampleDB`是空的并且`Database`没有被创建。

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:06:57.360

你正在用 null 初始化你的 Context

```
protected static final android.content.Context Context = null; 
```

所以当你使用你的 null Context 时，它会抛出一个 NPE，你可以用你的 Activity Context 设置你的 Context 然后使用你的 Context

```
Context = MainActivity.this; 
```

或者只是使用这个

```
SQLiteDatabase sampleDB =  this.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:07:24.997

您正在初始化为`protected static final android.content.Context Context = null;` ，然后将其用作`Context.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null);`

很明显，它会产生空指针异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:10:53.353

替换

```
 SQLiteDatabase sampleDB =  Context.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null); 
```

和

```
 SQLiteDatabase sampleDB =  this.openOrCreateDatabase("WaterElectricityReading", MODE_WORLD_READABLE, null); 
```

原因 ：

1.  `Activity`是的子类，`Context`因此您可以使用`this`.
2.  `openOrCreateDatabase`不是静态方法，因此您不能使用类名调用它。

# php - 表中重复的答案

> ID：15222167
> 
> 赞同：0
> 
> 时间：2013-03-05T11:04:54.933
> 
> 标签：php, sql, codeigniter

大家好，我正在从事一个小型初学者项目，目前我正在努力在 HTML 表格的网页上显示两个单独的表格数据，但我遇到了一些数据问题。有一个凭据表和一个答案表，用户首先输入其凭据，然后按下按钮获取 survay，该按钮将凭据存储到表中并将用户重定向到问题页面，在该页面中他选择了一个多项选择问题，用户的选择是保存到表中。然后所有这些数据都显示在网页上，但是当显示数据时，每个输入其详细信息的用户的答案都会重复。有人可以告诉我哪里出错了吗？tnx 提前为您提供帮助。

**看法**

```
 <table border="1">

  <tr>
     <th>Name</th>
     <th>Second Name</th>
     <th>Phone</th>
     <th>Email</th>
     <th>Answer</th>
     <th>Comment</th>
 </tr>
  <?php foreach ($query as $row): ?> 
 <tr>

     <td><?php echo $row->name; ?></td>
     <td><?php echo $row->second_name; ?></td>
     <td><?php echo $row->phone; ?></td>
     <td><?php echo $row->email; ?></td>
      <td> <?php echo $row->answerA;?>
      <?php echo $row->answerB;?>
      <?php echo $row->answerC;?></td>
     <td><?php echo $row->comment;?><br></td>

 </tr>

  <?php endforeach; ?>

 </table> 
```

**控制器**

```
function getall(){

    $this->load->model('result_model');
    $data['query'] = $this->result_model->result_getall();
    $this->load->view('result_view', $data);

    } 
```

**模型**

```
function result_getall(){
  return $this->db->select('tblanswers.*,credentials.*')
                 ->from('tblanswers, credentials')
                 ->get()
                 ->result_object();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:16:27.977

您正在从 tblanswers、凭据中选择所有内容，而无需加入任何列。您最终会得到一个交叉连接，它将每一行与另一个表中的每一行配对。您需要指定 tblanswers 中的哪些行与凭证中的哪些行相关。例如，如果凭据中有一个 id 列，那么您需要在 tblanswers 中创建一个 credentials_id 列并输入数据以便它们匹配。您的 getall() 应如下所示：

```
function result_getall(){
  return $this->db->select('tblanswers.*,credentials.*')
                 ->from('tblanswers')
                 ->join('credentials', 'tblanswers.credentials_id = credentials.id')
                 ->get()
                 ->result_object();

} 
```

说的那一行

```
join('credentials', 'tblanswers.credentials_id = credentials.id') 
```

指定两个表如何关联。

Suppose Mr Jones enters his credentials and they are saved in a row in the credentials table with id 72\. Then he enters his answers. You need to make sure that when you save them, you enter "72" in the credentials_id column of the answers table. That signifies that these answers belong to Mr Jones. When you run the query with the join specified above, it will return Mr Jones' credentials against Mr Jones' answers.

# jquery - jQuery tablesorter .addClass("sorter-false") 不禁用排序

> ID：15222170
> 
> 赞同：0
> 
> 时间：2013-03-05T11:05:03.650
> 
> 标签：jquery, tablesorter

我正在使用 Mottie 的分叉版本的 tablesorter（v2.7.11）。当我最初使用 class="sorter-false" 设置列时，它可以正常工作并禁用该列的排序。但是，我希望能够在添加特定类型的行时执行此操作..即禁用某些列进行排序。我尝试了以下方法 - 它添加了正确的类，但 cols 仍然是可排序的。我想在添加类后我需要更新调用..但我还需要做其他事情吗？任何帮助将非常感激。

```
function disableColsFromSortForNewAnimal() {
    $("#thSex").addClass("sorter-false"); 
    $("#thDOB").addClass("sorter-false"); 
    $("#thBreed").addClass("sorter-false"); 
    var resort = false;
    $("#animalsInTestTable").trigger("update", [resort]); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:08:34.790

嗯，我会在下一次更新中解决这个问题，所以你需要做的就是添加/删除类并更新表；但现在，使用此代码禁用列（[演示](http://jsfiddle.net/Mottie/abkNM/478/)）：

```
$('button').click(function(){
    $('.tablesorter-header:eq(1)')
        .addClass('sorter-false')[0].sortDisabled = true;
    $('table').trigger('update');
}); 
```

所以你的功能将变成：

```
function disableColsFromSortForNewAnimal() {
    $("#thSex").addClass("sorter-false")[0].sortDisabled = true; 
    $("#thDOB").addClass("sorter-false")[0].sortDisabled = true; 
    $("#thBreed").addClass("sorter-false")[0].sortDisabled = true; 
    $("#animalsInTestTable").trigger("update", false); 
} 
```

# iphone - 从 iPhone 应用使用 AFNetworking 上传视频

> ID：15222173
> 
> 赞同：0
> 
> 时间：2013-03-05T11:05:09.133
> 
> 标签：iphone, ios, http, file-upload, afnetworking

我正在从我的 iPhone 应用程序向服务器发布视频文件。目前我正在使用 HTTP POST 方法。我想了解如何使用 AFNetworking 进行上传。希望有人能帮助我。

这是我现在使用的示例 HTTP 发布：

```
NSString *urlString =@"http://example.com/demo/upload_video";

NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

//userid 
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n%@", appDelegate.userid] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (conn) {
    webData = [[NSMutableData data] retain];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:08:25.797

`[httpClient enqueueHTTPRequestOperation:operation];`您是否在代码末尾添加此内容？

使用以下代码作为示例：

```
NSURL *url = [NSURL URLWithString:@"http://api-base-url.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"avatar.jpg"], 0.5);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
}]; 
```

//如果您也想要进度报告，请使用以下代码：

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[httpClient enqueueHTTPRequestOperation:operation]; 
```

# python - 如何在 PyES 中使用 ResultSet

> ID：15222175
> 
> 赞同：1
> 
> 时间：2013-03-05T11:05:22.933
> 
> 标签：python, elasticsearch, resultset, pyes

我正在使用 PyES 在 Python 中使用 ElasticSearch。通常，我以以下格式构建查询：

```
# Create connection to server.
conn = ES('127.0.0.1:9200')

# Create a filter to select documents with 'stuff' in the title.
myFilter = TermFilter("title", "stuff")

# Create query.
q = FilteredQuery(MatchAllQuery(), myFilter).search()

# Execute the query.
results = conn.search(query=q, indices=['my-index'])

print type(results)
# > <class 'pyes.es.ResultSet'> 
```

这非常有效。当查询返回大量文档时，我的问题就开始了。将结果转换为字典列表对计算的要求很高，所以我试图返回已经在字典中的查询结果。我遇到了这个文档：

[http://pyes.readthedocs.org/en/latest/faq.html#id3](http://pyes.readthedocs.org/en/latest/faq.html#id3) [http://pyes.readthedocs.org/en/latest/references/pyes.es.html#pyes.es.ResultSet](http://pyes.readthedocs.org/en/latest/references/pyes.es.html#pyes.es.ResultSet) [https:// github.com/aparo/pyes/blob/master/pyes/es.py](https://github.com/aparo/pyes/blob/master/pyes/es.py)（第1304行）

但我无法弄清楚我到底应该做什么。根据之前的链接，我试过这个：

```
from pyes import *
from pyes.query import *
from pyes.es import ResultSet
from pyes.connection import connect

# Create connection to server.
c = connect(servers=['127.0.0.1:9200'])

# Create a filter to select documents with 'stuff' in the title.
myFilter = TermFilter("title", "stuff")

# Create query / Search object.
q = FilteredQuery(MatchAllQuery(), myFilter).search()

# (How to) create the model ?
mymodel = lambda x, y: y

# Execute the query.
# class pyes.es.ResultSet(connection, search, indices=None, doc_types=None,
# query_params=None, auto_fix_keys=False, auto_clean_highlight=False, model=None)

resSet = ResultSet(connection=c, search=q, indices=['my-index'], model=mymodel)
# > resSet = ResultSet(connection=c, search=q, indices=['my-index'], model=mymodel)
# > TypeError: __init__() got an unexpected keyword argument 'search' 
```

任何人都能够从 ResultSet 中获取字典吗？任何有效地将 ResultSet 转换为（列表）字典的好建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T07:14:48.180

我尝试了太多直接将 ResultSet 转换为 dict 的方法，但一无所获。我最近使用的最好方法是将 ResultSet 项附加到另一个列表或字典中。ResultSet 将每个项目本身作为一个 dict 覆盖。

这是我的使用方法：

```
#create a response dictionary
response = {"status_code": 200, "message": "Successful", "content": []}

#set restul set to content of response
response["content"] = [result for result in resultset]

#return a json object
return json.dumps(response) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T07:08:49.060

它并不复杂：只需遍历结果集。例如使用 for 循环：

```
for item in results:
   print item 
```

# maven - Maven 反应器和站点

> ID：15222177
> 
> 赞同：2
> 
> 时间：2013-03-05T11:05:25.133
> 
> 标签：maven, maven-site-plugin, maven-reactor

我有一个多模块项目，它有一个父`pom.xml`模块和几个模块，其中一些模块相互依赖。在项目目录中我可以调用

```
mvn test 
```

在每个模块中运行单元测试。这里没问题。但如果我打电话

```
mvn site 
```

其中一个模块报告

```
[ERROR] Failed to execute goal on project myModule_C: Could not resolve dependencies 
for project org.myModule_C:jar:0.0.1-SNAPSHOT: The following artifacts could not be
resolved: org.myModule_A:jar:0.0.1-SNAPSHOT, org.myModule_B:jar:0.0.1-SNAPSHOT: Failure
to find org.myModule_A:jar:0.0.1-SNAPSHOT in http://artifactory-server:8081/artifactory/repo
was cached in the local repository, resolution will not be reattempted until the update
interval of server has elapsed or updates are forced -> [Help 1] 
```

我认为这不应该发生，因为这些依赖项是在“mvn 测试”期间发现的。此外，它们不在工件服务器中，而是在父项目中。错误中提到的目标就是目标`site`。为什么`mvn test`成功（关于它找到的依赖项）`mvn site`而不成功？我是否必须以特殊的方式构建站点 - 因为这是一个反应堆构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:59:41.627

您应该`mvn install`至少执行一次。请参阅[Maven 构建生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)和[Maven in 5 Minutes 中](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)的更多信息。

这是概述

### Maven 阶段

尽管几乎没有完整的列表，但这些是执行的最常见的默认生命周期阶段。

`validate`：验证项目是否正确并且所有必要的信息都可用

`compile`: 编译项目的源代码

`test`：使用合适的单元测试框架测试编译的源代码。这些测试不应该要求打包或部署代码

`package`：获取已编译的代码并将其打包成可分发的格式，例如 JAR。

`integration-test`：如有必要，将包处理并部署到可以运行集成测试的环境中

`verify`：运行任何检查以验证包是否有效并符合质量标准

`install`：将包安装到本地存储库中，作为本地其他项目的依赖项

`deploy`：在集成或发布环境中完成，将最终包复制到远程存储库以与其他开发人员和项目共享。

#### 除了上面的默认列表之外，还有另外两个值得注意的 Maven 生命周期

他们是：

`clean`：清理先前构建创建的工件

`site`：为此项目生成站点文档

我希望这可能会有所帮助。

# gwt - 在视图之间切换时显示 DatePicker

> ID：15222178
> 
> 赞同：0
> 
> 时间：2013-03-05T11:05:31.247
> 
> 标签：gwt, datepicker, datebox

我有多个视图，在其中一个视图中我有一个 DateBox。我想要做的是当我切换到 dateBoxView 时，DateBox 中的 DatePicker 必须像弹出窗口一样显示。我试过这个：

```
@UiField DateBox dateBox
...
dateBox.getDatePicker().setVisible(true) 
```

但没有结果。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:19:37.183

[dateBox.showDatePicker()](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/datepicker/client/DateBox.html#showDatePicker%28%29) ; ?? 在那个[setvalue()之前](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/datepicker/client/DateBox.html#setValue%28java.util.Date%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:45:23.563

你必须在调用之后调用它`initWidget`。

```
initWidget(uiBinder.createAndBindUi(this));
dateBox.getDatePicker().setVisible(true); 
```

正如你所做的那样，它应该可以工作。仅切换多个视图的问题。检查那里。它可能无法正确清除根布局或未定义高度或可能是其他重叠布局问题。

切换视图时未正确添加此日期选择器布局视图可能会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:49:58.160

您必须在 UI 呈现后调用 showDatePicker() 方法。否则，您将无法在正确的位置获得日期选择器。下面的代码片段可以做到这一点 -

```
initWidget(uiBinder.createAndBindUi(this));
dateBox.showDatePicker(); 
```

# php - 像 .htaccess 文件一样，我可以在 Apache 服务器配置中添加 .properties 文件吗

> ID：15222180
> 
> 赞同：0
> 
> 时间：2013-03-05T11:05:33.190
> 
> 标签：php, apache, .htaccess

我知道这是一个愚蠢的问题，但昨晚当我使用我网站的 .properties 文件时，我发现了这个想法。**我正在为我的网站使用 PHP 脚本，我在website.properties**文件中存储了所有网站属性值，如图像路径、安全路径等。但是我需要在每个网页中包含这个 .properties 文件才能访问其中的值。

我的问题是，像 .htaccess 文件一样，我可以将此 .propeties 文件添加到服务器配置中吗？是否有任何选项可以将此文件与服务器配置同步？Apache允许我们这样做吗？在这种情况下，我不需要在每个页面中添加此文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:28:10.873

看看 Apache 和 PHP 中的环境变量：

*   [http://php.net/manual/en/function.apache-getenv.php](http://php.net/manual/en/function.apache-getenv.php)
*   [http://www.php.net/manual/en/function.apache-setenv.php](http://www.php.net/manual/en/function.apache-setenv.php)
*   [http://httpd.apache.org/docs/2.2/env.html](http://httpd.apache.org/docs/2.2/env.html)

# encoding - 如何将 BOM 添加到项目中的所有 UTF-8 文件？

> ID：15222182
> 
> 赞同：1
> 
> 时间：2013-03-05T11:05:39.583
> 
> 标签：encoding, utf-8, byte-order-mark

当前编码是 UTF-8，我想将 BOM 添加到所有文件

上下文：如果未添加 BOM，Windows 8 应用程序认证工具包会引发以下错误：

文件 C:\x\y\z.js 未正确 UTF-8 编码。将文件重新保存为 UTF-8（包括字节顺序标记）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:14:03.443

如果您使用 Eclipse 或 netbeans 等 IDE，则可以选择所有文件并设置编码。其他选项是在文本编辑器中打开所有文件并进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T12:50:11.600

我知道这是一个老问题，但我是这样做的：

创建一个 php 文件：addBOMtoFile.php 并添加以下行：

```
file_put_contents("some_new_file_name.js", "\xEF\xBB\xBF" . mb_convert_encoding(file_get_contents("some_file_name.js"), "UTF-8", "UTF-8")); 
```

C:\php>php addBOMtoFile.php

# iphone - UITableView contentOffSet 无法正常工作

> ID：15222186
> 
> 赞同：24
> 
> 时间：2013-03-05T11:05:57.397
> 
> 标签：iphone, ios, uitableview, contentoffset

在中，我`viewWillAppear`已将. 当视图加载时，我隐藏在使用 contentOffSet 的. 当用户拉下 tableview 时，会显示搜索栏。`UISearchBar``UITableView``UISearchbar``UINavigationBar``UITableView`

添加 headerview 后，我使用下面的代码将其隐藏。

```
self.tableView.contentOffset = CGPointMake(0, 40); //My searhbar height is 40 
```

但有时`contentOffSet`并没有隐藏headerview。可能是什么错误。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-04-25T22:40:14.473

这对我有用：

```
// contentOffset will not change before the main runloop ends without queueing it, for iPad that is
dispatch_async(dispatch_get_main_queue(), ^{
    // The search bar is hidden when the view becomes visible the first time
    self.tableView.contentOffset = CGPointMake(0, CGRectGetHeight(self.searchBar.bounds));
}); 
```

把它放在你的 -viewDidLoad 或 -viewWillAppear 中

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-15T15:36:17.657

不知道是什么原因（现在没时间研究），但我`performSelector`在延迟为 0 后使用解决了这个问题。示例：

```
- (void)viewWillAppear:(BOOL)animated {
    ...
    [self performSelector:@selector(hideSearchBar) withObject:nil afterDelay:0.0f];
}

- (void)hideSearchBar {
    self.tableView.contentOffset = CGPointMake(0, 44);
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-10-17T01:44:32.553

在早期版本的 iOS SDK 中，诸如`viewWillAppear`在主线程上运行的方法现在在后台线程上运行，这就是现在出现问题的原因。

大多数回调倾向于在后台线程上触发，因此在进行 UI 调用时始终检查线程安全。

将更改分发到主线程上的内容偏移量：

**目标 C**

```
dispatch_async(dispatch_get_main_queue(), ^{
    CGPoint offset = CGPointMake(0, self.searchBar.bounds.height)
    [self.tableView setContentOffset:offset animated:NO];
}); 
```

**斯威夫特 3**

```
DispatchQueue.main.async {
            let offset = CGPoint.init(x: 0, y: self.searchBar.bounds.height)
            self.tableView.setContentOffset(offset, animated: false)
        } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-29T09:23:39.033

这对我有用。

```
self.tableView.beginUpdates()
self.tableView.setContentOffset( CGPoint(x: 0.0, y: 0.0), animated: false)
self.tableView.endUpdates() 
```

**目标-C：**

```
[_tableView beginUpdates];
[_tableView setContentOffset:CGPointMake(0, 0)];
[_tableView endUpdates]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-22T16:13:29.837

我用**layoutIfNeeded()修复了它**

```
 self.articlesCollectionView.reloadData()
    self.articlesCollectionView.layoutIfNeeded()
    self.articlesCollectionView.setContentOffset(CGPoint(x: 0, y: 40), animated: false) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-10T10:36:50.387

经过一小时的测试后，唯一可以 100% 工作的方法是：

```
-(void)hideSearchBar
{
    if([self.tableSearchBar.text length]<=0 && !self.tableSearchBar.isFirstResponder)
    {
        self.tableView.contentOffset = CGPointMake(0, self.tableSearchBar.bounds.size.height);
        self.edgesForExtendedLayout = UIRectEdgeBottom;
    }
}

-(void)viewDidLayoutSubviews
{
    [self hideSearchBar];
} 
```

使用这种方法，如果为空，您始终可以隐藏搜索栏

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-17T23:01:01.970

可能是因为 View Controller 上的“Adjust Scroll View Insets”属性。看到这个：[https ://stackoverflow.com/a/22022366](https://stackoverflow.com/a/22022366)

编辑：一定要检查'contentInset'的值，看看发生了什么，因为这也会影响滚动视图。此值在 viewWillAppear: 设置后更改，这似乎是其他人试图通过使用调度队列等来避免的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-12T07:03:17.643

就我而言，问题是我打电话给

```
 [_myGreatTableView reloadData]; 
```

在得到`_tableView.contentOffset.y`. 这总是返回“0”。

所以我**切换了这些方法的顺序，**现在它可以工作了。

在我看来，这是一个很奇怪的行为，因为 offset 返回 0 但 UI 仍然保持表格的滚动位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T08:58:42.427

问题可能与搜索栏大小有关。试试下面的代码行。

```
[searchBar sizeToFit]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-05T11:18:04.100

滚动表格时需要自己隐藏搜索栏。所以不要把它作为`UITableView`标题。您可以通过将其高度设置为零来隐藏它。这样，如果您的表格视图设置为自动调整大小，它将展开。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-05T12:30:24.647

问题是自动屏蔽。选择您的表格并确保您已选择所有行，如下图所示。

![在此处输入图像描述](../Images/fc89251463585d8219bcd05e4dac081c.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-25T08:18:25.387

这行代码正在正常工作。

a`contentOffset`的解释`UITableView`：

例如，如果您有一个高度为 100 的表格视图。它的内容可能比它的视图多，比如 150。`contentOffset`将告诉表格从内容中的哪个位置开始。比如说`contentOffset = (0, 40)`，内容将在其高度的 40 之后显示。

注意：一旦内容滚动，就没有之前设置的影响`contentOffset`。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-30T10:25:54.827

在 iOS 7/8/9 中简单的 self.automaticallyAdjustsScrollViewInsets = NO; 解决了我的问题

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-12-16T21:22:00.367

如果您的表格总是至少有一行，只需滚动到表格的第一行，搜索栏就会自动隐藏。

```
let firstIndexPath = NSIndexPath(forRow: 0, inSection: 0) 
```

self.tableView.selectRowAtIndexPath(firstIndexPath, 动画: false, scrollPosition: .Top)

如果你把上面的代码放在**viewDidLoad**上，它会抛出一个错误，因为 tableView 还没有加载，所以你必须把它放在**viewDidAppear**中，因为此时 tableView 已经加载了。

如果你把它放在**viewDidAppear**上，每次打开 tableView 时它都会滚动到顶部。

如果 tableView 保持打开状态，例如当它是 UITabBar 视图控制器或执行 segue 然后返回时，您可能不希望出现这种行为。如果您只想让它在初始加载时滚动到顶部，您可以创建一个变量来检查它是否是初始加载，以便它只滚动到顶部一次。

首先在视图控制器类中定义一个名为 isInitialLoad 的变量并将其设置为“true”：

```
var isInitialLoad = true 
```

然后检查**viewDidAppear**上的 isInitialLoad 是否为 true ，如果为 true，则滚动到顶部并将 isInitialLoad 变量设置为 false：

```
if isInitialLoad {
    let firstIndexPath = NSIndexPath(forRow: 0, inSection: 0)
    self.tableView.selectRowAtIndexPath(firstIndexPath, animated: false, scrollPosition: .Top)
    isInitialLoad = false
} 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2015-05-12T18:43:17.510

```
self.tableView.contentInset = UIEdgeInsetsMake(self.navigationController.navigationBar.frame.size.height -80, 0, 0, 0); 
```

# php - PHP 解析一个回显 XML 数据的 PHP 文件

> ID：15222192
> 
> 赞同：0
> 
> 时间：2013-03-05T11:06:15.740
> 
> 标签：php

我有一个生成和回显 XML 数据的 php 文件。

所以基本上它显示了一个 XML，但它是一个 PHP 文件。

我需要读取和解析这些数据。

我已经看到了：`simplexml_load_file('some.xml');`但在这种情况下，我不能这样做，因为我将 xml 作为 php 文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:10:33.063

同样，文件扩展名无关紧要（.xml 或 .php）真正重要的是文件的实际内容，因此如果您的文件具有 .php 扩展名但其内容是有效的 xml，那么您应该拥有没问题：

```
simplexml_load_file('somepage.php');  //this is fine 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:10:12.157

将 mime 类型设置为 xml header('Content-Type:text/xml');

# mysql - 使用 zend 框架 2 编写自定义查询

> ID：15222197
> 
> 赞同：1
> 
> 时间：2013-03-05T11:06:30.193
> 
> 标签：mysql, zend-framework2

我想在 zf2 中执行自定义查询。现在我有一个专辑控制器和专辑表。在 AlbumTable 中，我想执行一个连接操作。但我无法做到这一点。请给我一些建议。

在我的代码下方：

```
namespace WebApp\Table;

use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Sql\Sql;

new Zend\Db\Adapter\Adapter;

class UserTable
{

   protected $tableGateway;

   public function __construct(TableGateway $tableGateway)
   {
       $this->tableGateway = $tableGateway;
   }

   public function searchUser($search)
   {

    $search    = "mehedi";
    $adapter   = new Adapter();
    $sql       = new Sql($adapter);
    $select    = $sql->select();
    $select->from('foo');
    $select->join('profiles', 'user.user_id = profiles.ownerId', array('name'));
    $select->where(array('id' => 2));
    $statement = $sql->prepareStatementForSqlObject($select);
    $results   = $statement->execute();
    return $results;
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:03:40.383

通过帮助这里的所有人，我得到了这个问题的一些解决方案。

```
 $adapter = $this->tableGateway->getAdapter();

   /* $adapter variable is used to fetch Adapter 
   configuration from serivce manager. */

    $sql       = new Sql($adapter);
    $select    = $sql->select();
    $select->from('foo');
    $select->join('profile', 'foo.skillId = profile.id', array('name'));

    $statement = $sql->prepareStatementForSqlObject($select);
    $results   = $statement->execute();

   /* if you want you can see your
   desired output in here. */

    foreach ($results as $person) {
        echo "<pre>";
        print_r($person);
    }

    return $results; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:51:48.513

问题是您尝试在没有参数的情况下实例化您的适配器，但它至少需要一个驱动程序：

```
 $adapter   = new Adapter(); // Bad
 $adapter   = new Adapter($driver); // .. 
```

您应该使用 ServiceManager 来获取您的适配器，您是从 Skeleton Application 开始的吗？

它应该已经为您注入到 TableGateway 中。

```
$adapter = $this->getAdapter(); 
```

实例化适配器的示例：

```
$config = $serviceLocator->get('Config');
$adapter = new Adapter($config['db']); 
```

在配置中指定设置的地方，local.php 将执行以下操作：

```
return array(
    /**
     * Database Config
     */
    'db' => array(
        'driver'    => 'pdo',
        'dsn'       => 'mysql:dbname=dbname;host=localhost',
        'username'  => 'root',
        'password'  => 'password',
    ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:17:50.627

这是因为 join 方法需要一个用于连接表的数组。此外，我个人会在查询中为表添加前缀，如下所示：-

```
 $search    = "mehedi";
 $adapter   = new Adapter();
 $sql       = new Sql($adapter);
 $select    = $sql->select();
 // PREFIXED THE foo table f
 $select->from(array('f' =>'foo'));
 // PREFIXED THE profiles table p 
 $select->join(array('p' => 'profiles'), 'user.user_id = profiles.ownerId', array('name'));
 $select->where(array('id' => 2));
 $statement = $sql->prepareStatementForSqlObject($select);
 $results   = $statement->execute();
 return $results; 
```

# php - 在多个表单提交中保留数据

> ID：15222204
> 
> 赞同：0
> 
> 时间：2013-03-05T11:06:58.093
> 
> 标签：php, html, sql, postgresql

我正在构建一个 Web 服务，用户可以在其中登录到后端，提交表单，然后其他用户将能够在 Web 服务的前端看到这些信息。

数据提交到 PostgreSQL 数据库很好但是在第二次提交表单时（用户可以返回表单并在必要时更新他们的信息）如果表单中有空白字段，则表单中的现有数据将被覆盖与空白数据。

我怎样才能避免这种情况？我认为用数据库中的数据填充表单字段并允许用户像这样编辑表单会很好，但我不确定如何使用 PHP 来实现它。目前，用户必须一遍又一遍地完整填写表格，以防止这种数据丢失。

有人可以给我一个想法或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:23:31.440

使用来自数据库的较早条目预先填写表单字段

```
<input type="text" value="<?php echo $fname;?>" name="first_name" id="first_name" /> 
```

# php - 我需要获取通过 AJAX 发送的 $_GET['loc']

> ID：15222206
> 
> 赞同：0
> 
> 时间：2013-03-05T11:07:04.407
> 
> 标签：php, javascript, mysql, ajax

我有一个`index.php`页面，其中有两种查询，首先是位置，其次是搜索查询。我在位置查询上使用 ajax

html结构：

```
<ul class="dropdown">
  <li><a href="?loc=dc">City</a></li>
  <li><a href="?loc=dn">North</a></li>
  <li><a href="?loc=ds">South</a></li>
</ul>
<form action="" method="post">
 <input type="text" name="search" id="search">
 </input value="submit" type="submit"/>
</form>
<div id="content_from_AJAX">
 <ul id="li_start">
 </ul>
</div> 
```

`ajax.js`代码：

```
$(document).ready(function(e) {
    function getLoc(param){

        if(window.XMLHttpRequest){
            xmlhttp = new XMLHttpRequest();
        }
        else{
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange = function(){
         if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
         document.getElementById("li_start").innerHTML = xmlhttp.responseText;
         }
        }
        xmlhttp.open("GET","getresult.php"+param,false);
        xmlhttp.send();

    }

    //handle anchor clicks
    $("ul#location li a").click(function(){
        var loc = $(this).attr("href");
        getLoc(loc);
            return false;
    });

}); 
```

`getresult.php`代码：

```
require ('connect_to_mysql.php');
  if(isset($_GET['loc']) && empty($_GET['loc'])===false){
    $loc = mysql_real_escape_string($_GET['loc']);
    $query = "SELECT * FROM TB_name WHERE loc=";
  }
  else{
    $query = "SELECT * FROM TB_name";
  }

$query_run = mysql_query($query);
$count = mysql_num_rows($query_run);

if($count<1){
 echo 'no result found';
}
else{
 while($result == mysql_fetch_assoc($query_run)){
  echo "ALL results";
 }
// Here is what I want to be able o access on index.php
 return $_GET['loc']
} 
```

我希望`$_GET`可以访问它，`index.php`以便我可以使用它来过滤上面表格中搜索查询的结果，即：

```
"SELECT * FROM `TB_name` WHERE `keyword` LIKE '$keyword' AND `loc`='".$_GET['loc']."'" 
```

//我需要在`index.php`不开启时执行此操作`getresult.php`

`AJAX.js`如果用户单击 loc 链接（如果`$_POST['search']`isset），我还希望在 getresult.php 上发送查询。

请帮助真的需要这个项目，我开始很沮丧X_X ..谢谢你的帮助非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:10:38.460

改变这个

```
xmlhttp.open("GET","getresult.php"+param,false); 
```

至

```
xmlhttp.open("GET","getresult.php?loc="+param,false);
                                 ^^^^ // forgot ?loc= 
```

然后`$_GET["loc"]`在您的 getresult.php 页面中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:15:24.000

为什么将函数放在 document.ready() 中？

如果是我，我会这样做

```
function getLoc(param){
$.get('getresult.php',{loc:param},function(data){
  //Do some stuff with data
});

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:13:05.410

您的代码需要重新考虑。您有一个带有 href 链接的下拉列表和一个提交信息的表单（如果您想要 ajax 结果，则不应该这样做）。

为什么你的 getresults.php 做一个数据库查询然后返回 GET 变量。这是没有意义的，因为数据库查询现在毫无意义，因为它的结果没有用于任何事情。

我认为您想要的是下拉列表中的 onClick 事件侦听器，然后在每次更改时触发 Ajax 请求，然后 getresults.php 文件执行 MySQL 搜索并返回搜索结果（不是 $_GET['loc']因为 index.php 已经知道这个值）。

此外，使用 mysqli* 或 PDO 进行数据库查询，现在不推荐使用 mysql* 函数集并且容易发生 sql 注入。

# iphone - 在特定中心旋转圆圈

> ID：15222207
> 
> 赞同：0
> 
> 时间：2013-03-05T11:07:10.947
> 
> 标签：iphone, ios, cabasicanimation

我使用 CAShapeLayer 创建了一个圆圈。我想在固定中心旋转这个圆圈。我正在使用以下代码进行动画。使用此代码圈正在旋转，但不在固定中心。中心是否在不断变化。我不希望这种情况发生。

这是我的动画代码

```
CABasicAnimation* rotationAnimation;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 2.0 * rotations * 2.0 ];
    rotationAnimation.duration = 10.0; //    rotationAnimation.cumulative = YES;
    rotationAnimation.repeatCount = 1.0; 
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];

    [circle1 addAnimation:rotationAnimation forKey:@"rotationAnimation"]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:18:39.400

这将使它保持在矩形内。

```
[circle1 setAnchorPoint:(0.5,0.5)]; 

CGFloat angle = rotationAnimation.toValue;
CGFloat radius = someRadius;
CGPoint rotationCenter = CGPointMake(centerX,centerY); 
circle1.frame = CGRectMake(rotationCenter.x + radius * cos(angle),  rotationCenter.y + radius * sin(angle), circle1.frame.size.width, circle1.frame.size.height); 
```

# silverlight - Silverlight TreeViewItem 宽度变化

> ID：15222210
> 
> 赞同：0
> 
> 时间：2013-03-05T11:07:18.943
> 
> 标签：silverlight, xaml, treeview, treeviewitem

我被要求基于 SDK 中的基本 TreeView 创建自定义 TreeView。一切正常，问题是：节点/叶子不会延伸到它们的内容，它们的宽度总是相同的。这是 xaml 标记：

```
<Grid xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'
      xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'                                                    xmlns:sdk='http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk'>
      <Grid.Resources>
          <Style x:Key='TreeViewChildStyle' TargetType='sdk:TreeViewItem'>
             <Setter Property='HorizontalContentAlignment' Value='Stretch'/>
             <Setter Property='Background' Value='Blue'/>
          </Style>
      <sdk:HierarchicalDataTemplate x:Key='ChildTemplate' x:Name='ChildTemplate'>
             <TextBlock HorizontalAlignment='Stretch' Text='{Binding Path=ChildPath}'/>  
          </sdk:HierarchicalDataTemplate>
      <sdk:HierarchicalDataTemplate x:Key='NameTemplate' ItemsSource='{Binding Path=   ChildrenCollectionPath}' x:Name='NameTemplate' ItemTemplate='{StaticResource ChildTemplate}'>
             <TextBlock HorizontalAlignment='Stretch' Text='{Binding Path=ParentPath}' Width='1000'/>
      </sdk:HierarchicalDataTemplate>
      </Grid.Resources>
      <sdk:TreeView Height='Auto' Background='Red' ItemContainerStyle='{StaticResource TreeViewChildStyle}' Name='treeView1' ItemTemplate='{StaticResource NameTemplate} VerticalAlignment='Stretch' HorizontalAlignment='Stretch' BorderThickness='0'/> 
</Grid> 
```

我已经尝试在后面的代码中设置 ItemContainer 宽度，将 TextBlocks 的宽度设置为“Auto”，在样式标记中设置 ItemContainer 宽度。没有任何效果，TreeViewItems 总是相同的宽度，而且太窄了。

编辑：是的，网格中添加了 SDK 命名空间，编辑器刚刚发生了一些事情，它没有显示，无法帮助。

Edit2： TreeView 实际上将其宽度更改为给定值，但是，它的 Items 仍然没有缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:21:56.647

尝试定义一个网格行或列并将高度/宽度设置为“*”，这样它将尽可能多地使用空间。

```
<Grid.RowDefintions>
     <RowDefintion Height="*" />
</Grid.RowDefintions>

<Grid.ColumnDefinitons>
     <ColumnDefinition Width="*" />
</Grid.ColumnDefinitions> 
```

# css - 大量媒体查询是否分布在文件中？

> ID：15222219
> 
> 赞同：2
> 
> 时间：2013-03-05T11:07:54.900
> 
> 标签：css, media-queries

我正在为 css 使用手写笔，我喜欢尝试在许多文件/目录中包含更小更易于管理的样式片段/模块。

是否可以在每个文件中进行媒体查询，因此查询仅与同一 styl/css 文件中的样式相关？这会导致任何类型的性能问题（除了我的 css 文件由于多个查询语句而变大）吗？

例如

```
//a.sty

#a ...

@media only screen and (min-width: 480px)

  #a ...

@media only screen and (min-width: 900px)

  #a ... 
```

...

```
//b.sty

#b ...

@media only screen and (min-width: 480px)

  #b ...

@media only screen and (min-width: 900px)

  #b ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T09:04:43.437

### 第一个问题：

> 是否可以在每个文件中进行媒体查询，因此查询仅与同一 styl/css 文件中的样式相关？

是的，我见过很多长的 responsive.styl 文件，而且它们并不漂亮。最好将媒体查询分离到它们所属的文件中。

一言以蔽之。将您的媒体查询值保存在一个文件中（例如`variables.styl`），否则当您以后想要更改它们时，您很快就会后悔。

为了在 Stylus 中实现这一点，我执行以下操作：

在`variables.styl`

```
 smartphoneWidth = 748px
    tabletWidth     = 1012px

    mqSmartphone = "only screen and (max-width: " + smartphoneWidth + ")"
    mqTablet     = "only screen and (max-width: " + tabletWidth     + ")" 
```

现在在您的其他手写笔文件中，您可以使用：

```
 @media mqSmartphone
        // Styles go here

    @media mqTablet
        // Styles go here 
```

### 第二个问题：

> 这会导致任何类型的性能问题（除了我的 css 文件由于多个查询语句而变大）吗？

多个查询不应显着影响 css 解析效率。请参阅[这篇文章](http://coding.smashingmagazine.com/2012/08/13/coding-qa-with-chris-coyier-responsive-sprites-responsive-font-sizing-media-query-efficiency-more/)进行确认。

# visual-studio - Visual Studio 2012：是否可以在程序执行时找出对象使用了多少内存？

> ID：15222222
> 
> 赞同：1
> 
> 时间：2013-03-05T11:07:58.510
> 
> 标签：visual-studio, class, object, memory, memory-management

我在 C++ 中创建了一个包含许多变量的类，这些变量包括向量、向量的向量、unordered_maps 等。

这个类的逻辑很简单，我创建了一个类的对象，我将一个值（整数）传递给一个函数，它完成了用数据填充变量的所有工作。

我有兴趣了解是否有可能找出此类对象在执行期间消耗的 RAM 内存总量。这将帮助我了解是否应该找到另一种方法来存储数据或保持原样。

先感谢您

# windows-phone-7 - 如何在 windows phone 7 中执行双击和捏和滑动控制

> ID：15222225
> 
> 赞同：0
> 
> 时间：2013-03-05T11:08:01.523
> 
> 标签：windows-phone-7

请有人帮助我，如何在 windows phone 7 中进行双击和捏和滑动控制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:29:03.003

最初我使用的是[Silverlight Toolkit](http://silverlight.codeplex.com/)的 GestureService 。[这](http://www.geekchamp.com/articles/wp7-gestureservice-in-depth--key-concepts-and-api)是一篇描述其用法的文章。

但是，该项目已迁移到似乎缺少该服务的新[页面。](http://phone.codeplex.com)

StackOverflow上的[另一个线程](https://stackoverflow.com/questions/10522499/is-there-a-high-level-replacement-for-the-wp7-toolkit-gestureservice)与您的问题类似，也许它会对您有所帮助。

# symfony - 查询构建器加入一对多关系

> ID：15222226
> 
> 赞同：0
> 
> 时间：2013-03-05T11:08:04.167
> 
> 标签：symfony, doctrine-orm

我有一个 LastTrait 对象，它与我的用户对象具有多对一关系：一个用户可以有许多不同的 lastTrait：

```
YOP\YourOwnPoetBundle\Entity\LastTrait:
  type: entity
  table: null
  fields:
id:
  type: integer
  id: true
  generator:
    strategy: AUTO
traitCategoryID:
  type: integer
verseID:
  type: integer
  manyToOne:
user:
  targetEntity: User
  inversedBy: lastTrait
  joinColumn:
      name: user_id
      referencedColumnName: id 
```

我需要知道 userID 和 traitCategoryID 来检索 verseID。所以我为我的 LastTrait 对象创建了一个存储库：

```
<?php

namespace YOP\YourOwnPoetBundle\Repository;

use Doctrine\ORM\EntityRepository;

class LastTraitRepository extends EntityRepository {

public function findOneByTraitCategoryID($userID, $traitCategoryID)
{
    return $this->getEntityManager()
    ->createQuery('SELECT l
        FROM YOPYourOwnPoetBundle:LastTrait l
        JOIN l.user u
        WHERE l.traitCategoryID = :categoryID AND u.id = :userID')
    ->setParameters(array(
        'categoryID' => $traitCategoryID,
        'userID' => $userID,
    ))
    ->getResult();
}
}

?> 
```

但是，当我打电话时：

```
$lastTrait = $this->getDoctrine()
        ->getRepository('YOPYourOwnPoetBundle:LastTrait')
        ->findOneByTraitCategoryID($user->getID(), $collector->getTraitCategory()->getID()); 
```

我总是得到 NULL，即使我应该得到一个 LastTrait 对象！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:23:11.827

我认为您应该更多地考虑实体，而少考虑外键。

用你的方法试试这个。

```
public function findOneByTraitCategoryID($userID, $traitCategoryID)
{
     return $this->findOneBy(
            array(
            'traitcategoryID' => $traitCategoryID,
            'user' => $userID
            ));
} 
```

你可以调用 ->getVerse()->getId(); 在此之后或直接在方法上返回 id（对于未来使用 IMO 来说太窄了）。

这仅在用户每个类别只有一个特征时才有效，否则您没有足够的数据来获取特定特征。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:43:59.033

问题是我忘记在我的实体中注册存储库：

```
YOP\YourOwnPoetBundle\Entity\LastTrait:
  repositoryClass: YOP\YourOwnPoetBundle\Repository\LastTraitRepository
  type: entity
  table: null
  fields:
id:
  type: integer
  id: true
  generator:
    strategy: AUTO
traitCategoryID:
  type: integer
verseID:
  type: integer
  manyToOne:
user:
  targetEntity: User
  inversedBy: lastTrait
  joinColumn:
      name: user_id
      referencedColumnName: id 
```

添加 repositoryClass 行后，我的自定义 Repository 类被调用，我得到了想要的结果。

然而，@dhunter 的回答让我意识到我什至不需要自定义 Repository 类。我可以通过简单地使用我的控制器中的常规 findOneBy 函数来获得所需的：

```
$lastTrait = $this->getDoctrine()
  ->getRepository('YOPYourOwnPoetBundle:LastTrait')
  ->findOneBy(
      array('user' => $user->getId(), 'traitCategoryID' => $collector->getTraitCategory()->getID())
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:09:54.670

很难说。在检索结果之前尝试回显 DQL 或 SQL：

```
$q = $this->getEntityManager()->createQuery(....);
die($q->getSql()); //or getDql(); 
```

如果由于某种原因，您的映射无效（我在上面没有看到），您应该在这里看到它。

另外，尝试`try-catch`用最一般的`Exception`捕获方法包装方法，看看它是否捕获任何东西......

此外，困扰我的是你`NULL`回来的事实......

# android - 如何从一个班级去另一个班级

> ID：15222229
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:08:08.960
> 
> 标签：android, oop, android-intent

我正在制作一个在捕获 qr 代码时读取 qr 代码的应用程序，我的 scrren 应该移动到另一个类，但它显示空指针异常

我的代码`CameraTestActivity.java`是

```
/*
 * Basic no frills app which integrates the ZBar barcode scanner with
 * the camera.
 * 
 * Created by lisah0 on 2012-02-24
 */
package net.sourceforge.zbar.android.CameraTest;

import net.sourceforge.zbar.Config;
import net.sourceforge.zbar.Image;
import net.sourceforge.zbar.ImageScanner;
import net.sourceforge.zbar.Symbol;
import net.sourceforge.zbar.SymbolSet;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.PreviewCallback;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.TextView;

public class CameraTestActivity extends Activity {
private Camera mCamera;
private CameraPreview mPreview;
private Handler autoFocusHandler;

TextView scanText;
Button scanButton;
Intent i;
Context context;

ImageScanner scanner;

private boolean barcodeScanned = false;
private boolean previewing = true;

static {
    System.loadLibrary("iconv");
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    autoFocusHandler = new Handler();
    mCamera = getCameraInstance();

    /* Instance barcode scanner */
    scanner = new ImageScanner();
    scanner.setConfig(0, Config.X_DENSITY, 3);
    scanner.setConfig(0, Config.Y_DENSITY, 3);

    mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);
    FrameLayout preview = (FrameLayout) findViewById(R.id.cameraPreview);
    preview.addView(mPreview);

    scanText = (TextView) findViewById(R.id.scanText);

    scanButton = (Button) findViewById(R.id.ScanButton);

    scanButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (barcodeScanned) {
                barcodeScanned = false;
                scanText.setText("Scanning...");
                mCamera.setPreviewCallback(previewCb);
                mCamera.startPreview();
                previewing = true;
                mCamera.autoFocus(autoFocusCB);
            }
        }
    });
}

public void onPause() {
    super.onPause();
    releaseCamera();
}

/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance() {
    Camera c = null;
    try {
        c = Camera.open();
    } catch (Exception e) {
    }
    return c;
}

private void releaseCamera() {
    if (mCamera != null) {
        previewing = false;
        mCamera.setPreviewCallback(null);
        mCamera.release();
        mCamera = null;
    }
}

private Runnable doAutoFocus = new Runnable() {
    public void run() {
        if (previewing)
            mCamera.autoFocus(autoFocusCB);
    }
};

PreviewCallback previewCb = new PreviewCallback() {
    public void onPreviewFrame(byte[] data, Camera camera) {
        Camera.Parameters parameters = camera.getParameters();
        Size size = parameters.getPreviewSize();

        Image barcode = new Image(size.width, size.height, "Y800");
        barcode.setData(data);

        int result = scanner.scanImage(barcode);

        if (result != 0) {
            previewing = false;
            mCamera.setPreviewCallback(null);
            mCamera.stopPreview();

            SymbolSet syms = scanner.getResults();
            for (Symbol sym : syms) {
                scanText.setText("barcode result " + sym.getData());
                barcodeScanned = true;
                i = new Intent(context, beginmove.class);
                startActivity(i);

            }

        }

    }
};

// Mimic continuous auto-focusing
AutoFocusCallback autoFocusCB = new AutoFocusCallback() {
    public void onAutoFocus(boolean success, Camera camera) {
        autoFocusHandler.postDelayed(doAutoFocus, 1000);
    }
};
}

CameraPreview. java

/*
 * Barebones implementation of displaying camera preview.
 * 
 * Created by lisah0 on 2012-02-24
 */
package net.sourceforge.zbar.android.CameraTest;

import java.io.IOException;

import android.app.Activity;
import android.os.Bundle;

import android.util.Log;

import android.view.View;
import android.view.Surface;
import android.view.SurfaceView;
import android.view.SurfaceHolder;

import android.content.Context;

import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.Parameters;

/** A basic Camera preview class */
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
private SurfaceHolder mHolder;
private Camera mCamera;
private PreviewCallback previewCallback;
private AutoFocusCallback autoFocusCallback;

public CameraPreview(Context context, Camera camera,
                     PreviewCallback previewCb,
                     AutoFocusCallback autoFocusCb) {
    super(context);
    mCamera = camera;
    previewCallback = previewCb;
    autoFocusCallback = autoFocusCb;

    /* 
     * Set camera to continuous focus if supported, otherwise use
     * software auto-focus. Only works for API level >=9.
     */
    /*
    Camera.Parameters parameters = camera.getParameters();
    for (String f : parameters.getSupportedFocusModes()) {
        if (f == Parameters.FOCUS_MODE_CONTINUOUS_PICTURE) {
            mCamera.setFocusMode(Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
            autoFocusCallback = null;
            break;
        }
    }
    */

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);

    // deprecated setting, but required on Android versions prior to 3.0
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
    } catch (IOException e) {
        Log.d("DBG", "Error setting camera preview: " + e.getMessage());
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Camera preview released in activity
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    /*
     * If your preview can change or rotate, take care of those events here.
     * Make sure to stop the preview before resizing or reformatting it.
     */
    if (mHolder.getSurface() == null){
      // preview surface does not exist
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    try {
        // Hard code camera surface rotation 90 degs to match Activity view in portrait
        mCamera.setDisplayOrientation(90);

        mCamera.setPreviewDisplay(mHolder);
        mCamera.setPreviewCallback(previewCallback);
        mCamera.startPreview();
        mCamera.autoFocus(autoFocusCallback);
    } catch (Exception e){
        Log.d("DBG", "Error starting camera preview: " + e.getMessage());
    }
}
} 
```

现在我想`abc.java`在扫描并获取数据后去上课我应该怎么去那里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:13:44.777

Class2 cls2=新的 Class2(); cls2.UpdateEmployee();

在你的 Class1 中定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:01:33.777

```
i have done same thing here
public class CategoryList extends Activity implements OnItemClickListener, OnClickListener {

    // All static variables
    static final String categoryURL = "api";

    // XML node keys
    static final String KEY_GATEGORY= "Category";

    static final String KEY_CAT_ID = "cat_id";
    static final String KEY_CAT_NAME = "cat_name";
    String msg="";
    DatabaseHelper dbHelper;
    TextView tvmsg;
    EditText etCategoryName;
    Button btnEdit,btnAdd;
    ListView lvCategory;
    ArrayList<Category> categoryList;
    CategoryAdapterHelper ca;
    Cursor records;
    Dialog dialog; 
    Document doc;
    XMLParser parser;
    int flag=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.category);
        initComponant();
        //      setDatabase();
        (new AsyncTaskExample()).execute("");

    }
    private class AsyncTaskExample extends AsyncTask<String, Void, String> {
        // private String Content;
        private ProgressDialog Dialog;
        String response = "";

        @Override
        protected void onPreExecute() {
            Dialog = new ProgressDialog(CategoryList.this);
            Dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            Dialog.setMessage("Loading android tutorial...");
            Dialog.setCancelable(false);
            Dialog.show();

        }
        @Override
        protected String doInBackground(String... urls) {

            try {
                doc = parser.getXmlFromUrl(categoryURL);
            } catch (SAXException e) {
                e.printStackTrace();
            }
            if(doc!= null){

                NodeList ner1=doc.getElementsByTagName(KEY_GATEGORY);
                for (int j = 0; j < ner1.getLength(); j++) 
                {
                    Element e1 = (Element) ner1.item(j);
                    int id=Integer.parseInt(parser.getValue(e1,KEY_CAT_ID));
                    String name=parser.getValue(e1,KEY_CAT_NAME );
                    Cursor c=dbHelper.selectRecord(true,id);
                    if(c.getCount()==0)
                        dbHelper.inserRecord(id,name);
                }

            }
            else{
                Toast.makeText(CategoryList.this, "Sorry Unable to retrive data. Please try again later", Toast.LENGTH_LONG).show();
            }

            return response;
        }
        @Override
        protected void onPostExecute(String result) {
            Dialog.dismiss();
            displayCategory();

        }
    }
    private void initComponant() {
        // TODO Auto-generated method stub
        categoryList=  new ArrayList<Category>();
        lvCategory=(ListView)findViewById(R.id.Category_listCategory);
        lvCategory.setOnItemClickListener(this);

        btnAdd=(Button)findViewById(R.id.Category_btnAdd);
        btnAdd.setOnClickListener(this);
        btnEdit=(Button)findViewById(R.id.Category_btnEdit);
        btnEdit.setOnClickListener(this);
        dialog= new Dialog(CategoryList.this);
        dialog.setContentView(R.layout.customdialog);
        dialog.setTitle("Navigation Application");
        dbHelper=new DatabaseHelper(this);
        parser = new XMLParser();
        doc = null;

    }

    private void displayCategory() {
        // TODO Auto-generated method stub
        lvCategory.setAdapter(null);
        categoryList=  new ArrayList<Category>();
        try
        {
            records=dbHelper.selectRecord();
            startManagingCursor(records);
            if(records.getCount()>0)
            {
                btnEdit.setEnabled(true);
                records.moveToFirst();
                while(!records.isAfterLast())
                {
                    categoryList.add(new Category(records.getInt(records.getColumnIndex("_categoryid")),records.getString(records.getColumnIndex("name"))));
                    records.moveToNext();
                }
                ca=new CategoryAdapterHelper(this, categoryList,flag);
                lvCategory.setAdapter(ca);
            }
            else
            {
                btnEdit.setEnabled(false);
                new DialogDisplay().showDialog(dialog,"Game Category Not Define Yet.!");
            }
        }
        catch (Exception e) {
            // TODO: handle exception
        }
    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        displayCategory();
    }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId())
        {
        case R.id.Category_btnAdd:
            Intent newCategory=new Intent(CategoryList.this,NewCategory.class);
            startActivity(newCategory);
            break;
        case R.id.Category_btnEdit:
            if(btnEdit.getText().toString().equals("Edit"))
            {
                flag=1;
                btnEdit.setText("Done");
            }
            else
            {
                flag=0;
                btnEdit.setText("Edit");
            }
            displayCategory();
            break;
        }

    }
    class CategoryAdapterHelper extends BaseAdapter  {

        Context context;
        int flag;
        public ArrayList<Category> categoryList;
        public CategoryAdapterHelper(Context c,ArrayList<Category> categoryList,int flag) {
            // TODO Auto-generated constructor stub
            context=c;
            this.categoryList=categoryList;
            this.flag=flag;
        }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return categoryList.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            Category category=categoryList.get(position);
            return category.id;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View view = convertView;
            if (view == null) {
                LayoutInflater vi= LayoutInflater.from(context);
                view = vi.inflate(R.layout.category_detail,null);
            }
            Category category= categoryList.get(position);
            if (category!= null) 
            {
                TextView name = (TextView) view.findViewById(R.id.Category_detail_name);
                final ImageView image=(ImageView)view.findViewById(R.id.Category_detail_imageView1);
                if (name != null) 
                {
                    name.setText(category.categoryName);
                    if(flag==1)
                    {
                        image.setBackgroundResource(R.drawable.delete);
                        image.setTag(position);
                        image.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) 
                            {// TODO Auto-generated method stub
                                final int id=(int)getItemId(Integer.parseInt(image.getTag().toString()));
                                final AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(context);
                                dlgAlert.setMessage("Do you want to delete it?\nIt will deleted all the Games..!");
                                dlgAlert.setTitle("Nevigation Application");
                                dlgAlert.setPositiveButton("Delete",new DialogInterface.OnClickListener()
                                {

                                    @Override
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        // TODO Auto-generated method stub
                                        DatabaseHelper dbHelper=new DatabaseHelper(context);
                                        dbHelper.deleteRecord("category", id);
                                        displayCategory();
                                    }

                                });
                                dlgAlert.setNegativeButton("cancel",new DialogInterface.OnClickListener()
                                {

                                    @Override
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        // TODO Auto-generated method stub
                                        dialog.dismiss();
                                    }

                                });
                                dlgAlert.show();
                            }
                        });
                    }
                }
            }
            return view;
        }

    }
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

        if(btnEdit.getText().toString().equals("Edit"))
        {
            Category category=categoryList.get(arg2);
            Toast.makeText(CategoryList.this,""+category.id,Toast.LENGTH_SHORT).show();
            Intent gameIntent=new Intent(CategoryList.this,GameList.class);
            gameIntent.putExtra("categoryid",category.id);
            gameIntent.putExtra("categoryname", category.categoryName);
            startActivity(gameIntent);
        }
    }

} 
```

# google-chrome - 无法从 chrome 开发者工具复制文本、XPath 或其他属性

> ID：15222233
> 
> 赞同：2
> 
> 时间：2013-03-05T11:08:28.987
> 
> 标签：google-chrome

[我遵循了如何在桌面上模拟移动（android）浏览器](https://stackoverflow.com/questions/14212610/how-to-emulate-a-mobile-android-browser-on-desktop)中提到的方法

将移动网页的属性投射到桌面 chrome 浏览器上。我成功地做到了，但现在我有一些疑问，如下所述，请让我知道您对此的意见

a) 如何使用 chrome 开发者工具栏的“选择元素选项”来查看移动网页的元素属性。在普通的桌面 chrome 浏览器中，我们显示了网页，在该页面下方显示了开发人员工具栏，我们可以使用指针轻松发现元素，但是桌面 chrome 浏览器上显示的移动网页我无法使用此选项，因为网页是不显示。

b）我试图从显示的 HTML（桌面 chrome 浏览器上的移动网页的 HTML）中复制 xpath 和其他内容，但它给了我一个错误，“您需要安装一个 Chrome 扩展程序，该扩展程序允许剪贴板访问开发人员工具”。我安装了一个名为“自动复制”的扩展，但我也无法复制。请让我知道如何去做。

非常感谢，纳米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T22:29:40.947

对于 (B) – 从[引入该消息时的讨论](https://bugs.webkit.org/show_bug.cgi?id=86621)来看，听起来您需要滚动自己的简单自定义扩展来启用剪贴板访问。这是一个[manifest.json 示例](http://pastebin.com/kDxUacJd)——我自己没有测试过，但它看起来很简单。[扩展开发入门指南](http://developer.chrome.com/extensions/getstarted.html)解释了如何将这样的文件转换为工作扩展并在本地安装。

# authentication - 每次在 Windows Phone 8 和 LiveConnect 中都会出现权限屏幕

> ID：15222234
> 
> 赞同：0
> 
> 时间：2013-03-05T11:08:29.333
> 
> 标签：authentication, windows-phone-8, windows-phone, live-sdk

我正在开发 Windows Phone 8 应用程序，并且在第一次运行时我让用户从他的 Microsoft 帐户进行身份验证。用户凭据非常节省，但每次我运行应用程序时都会出现权限屏幕（“让此应用程序访问您的信息”）。

如何仅保存一次选择并显示权限屏幕（第一次运行应用程序）？

代码片段：

```
private LiveConnectSession _session;
    private async Task<Users> Authenticate()
    {

        var liveIdClient = new LiveAuthClient("XXXXXXXXXXXXXXX");

        while (_session == null)
        {
            var result = await liveIdClient.LoginAsync(new[]
                                                           {
                                                               "wl.signin",
                                                               "wl.offline_access"
                                                           });

            if (result.Status == LiveConnectSessionStatus.Connected)
            {
                _session = result.Session;
                var client = new LiveConnectClient(result.Session);
                var meResult = await client.GetAsync("me");
                var user = await App.MobileService.LoginAsync(result.Session.AuthenticationToken);
                return new Users
                {
                    UserName = user.UserId,
                    RealName = string.Format("{0} {1}", meResult.Result["first_name"], meResult.Result["last_name"]),
                    TimeStamp = DateTime.Now,
                    IsAuthorised = false
                };
            }
            else
            {
                _session = null;
                MessageBox.Show("You must log in.", "Login Required", MessageBoxButton.OK);
            }
        }
        return null;
    } 
```

在构造函数（public MainPage()）中：

```
(DataContext as MainViewModel).User = await Authenticate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:22:49.383

您的应用需要 wl.offline_access 范围，以免一遍又一遍地请求身份验证。

wl.offline_access

[http://msdn.microsoft.com/en-us/library/live/hh243646.aspx#wlofflineaccess](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx#wlofflineaccess)

范围和权限（实时连接）

[http://msdn.microsoft.com/en-us/library/live/hh243646.aspx](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx)

这是我用来发现offline_access的帖子

[http://dotnet.dzone.com/articles/things-know-about-uploading?mz=27249-windowsphone7](http://dotnet.dzone.com/articles/things-know-about-uploading?mz=27249-windowsphone7)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-29T14:14:34.863

该代码不适用于我在模拟器上的真实帐户。

它在其他帐户的设备和模拟器上运行良好。

# android - 圆形进度条

> ID：15222239
> 
> 赞同：7
> 
> 时间：2013-03-05T11:08:36.977
> 
> 标签：android, android-animation, android-progressbar, android-assets

我想创建一个圆形进度条，如下图所示，

![圆形进度条](../Images/a762a8ba037a94452bd93d347fa7201c.png)

我不知道创建此进度条的方法是什么。而且我不知道应该准备什么资产。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T11:56:31.723

看看这个样本你会在这里有很好的样本：

[托德-戴维斯 | 进步轮](https://github.com/Todd-Davies/ProgressWheel)

它将如下图所示。

![样品 1](../Images/d374ca3096d315399de53685c813061a.png) ![样品 2](../Images/e022215e479df08c16aca07eee621903.png) ![样品 3](../Images/4dbdc7a5cb23e7c26a51af2f7a16379b.png) ![样品 4](../Images/776c21ff36fc1453d9f77569abb9d960.png)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T09:48:21.807

试试下面的链接..我会对你有所帮助..我们需要自定义视图来创建一个新的..而不是自定义我们自己的视图，我们可以添加库项目并使用视图..

按照这个图书馆项目，

[http://www.androidviews.net/2013/03/holo-circular-progressbar/](http://www.androidviews.net/2013/03/holo-circular-progressbar/)

[http://www.androidviews.net/2013/02/circular-seekbar/](http://www.androidviews.net/2013/02/circular-seekbar/)

这用于定制我们自己的视图，

[http://www.vogella.com/articles/AndroidCustomViews/article.html](http://www.vogella.com/articles/AndroidCustomViews/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T12:45:18.037

尝试使用此方法绘制位图并将其设置为图像视图。在对话框中使用它来创建循环进度对话框。

```
private void circularImageBar(ImageView iv2, int i) {

    Bitmap b = Bitmap.createBitmap(300, 300,Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(b); 
    Paint paint = new Paint();

        paint.setColor(Color.parseColor("#c4c4c4"));
        paint.setStrokeWidth(10);
        paint.setStyle(Paint.Style.STROKE);
        canvas.drawCircle(150, 150, 140, paint);

        paint.setColor(Color.parseColor("#FFDB4C"));
        paint.setStrokeWidth(10);   
        paint.setStyle(Paint.Style.FILL);
        final RectF oval = new RectF();
        paint.setStyle(Paint.Style.STROKE);
        oval.set(10,10,290,290);

        canvas.drawArc(oval, 270, ((i*360)/100), false, paint);
        paint.setStrokeWidth(0);    
        paint.setTextAlign(Align.CENTER);
        paint.setColor(Color.parseColor("#8E8E93")); 
        paint.setTextSize(140);

        canvas.drawText(""+i, 150, 150+(paint.getTextSize()/3), paint); 

        iv2.setImageBitmap(b);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-15T08:12:18.873

我认为您可以使用 ArcView [Link](https://github.com/minsoopark/ArcView)。

它会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:24:14.383

您可以通过创建自定义视图来做到这一点。关于资产，我想您需要的只是一些颜色代码。创建一个类扩展 View 。添加方法 setProgress(int) 。在 OnDraw() 中绘制一个实心圆。以及从 0 到 _progress 的一条弧线。中心的drawText进度。您可以轻松找到示例代码。搜索它。

# android - Android 如何通过线性布局消耗所有的触摸事件

> ID：15222240
> 
> 赞同：2
> 
> 时间：2013-03-05T11:08:40.463
> 
> 标签：android, touch, android-linearlayout, android-relativelayout

我有这样的布局。

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        ....>
        <LinearLayout
        android:id="@+id/box1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
           ...............
           ..............
        </LinearLayout>
        <LinearLayout
        android:id="@+id/box2"
        android:background="#c0000000"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
           .............
           .............
        </LinearLayout>
</RelativeLayout> 
```

Box2 显示在 Box1 上方，由于 Box2 的半透明颜色，Box1 部分可见。现在我想让box2消耗掉所有的触摸事件，这样box2中的`Button`s和`EditText`s就不起作用了。java代码是如何实现的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:50:48.270

您可以在布局上设置触摸侦听器，例如：

```
your_liner_layout.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event){                  
       return true;
    }
}); 
```

这将消耗事件并阻止事件的传播

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T11:14:09.253

我的理解是 box2 （及其子视图）不应该是可点击的，而 box1 应该是。所以在 box2 relativeLayout 中添加属性 clickable="false" 和在 box1 中添加 clickable='''true'' 。

否则提供有关您的概率的其他详细信息。

# c# - 使用 MSI 设置版本设置 AssemblyInfo 版本号

> ID：15222243
> 
> 赞同：18
> 
> 时间：2013-03-05T11:08:45.963
> 
> 标签：c#, .net, visual-studio-2010, windows-installer, versioning

我正在使用安装项目来发布我的项目。我希望每个项目的版本与设置版本相同。

**我想在 Visual Studio 中更改我的设置版本属性，并且在构建之后，对于要从此属性更新的所有项目版本，这可能吗？**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-10T06:27:46.197

项目具有程序集和文件版本号：（不是设置版本，我相应地编辑了您的问题） ![在此处输入图像描述](../Images/956a7acb6b6e82be5ed40bd0c1696e93.png)

**答案1：**

如果您想让安装项目版本号设置程序集和文件版本号，您需要使用由构建触发的脚本/exe 来完成。

![在此处输入图像描述](../Images/467c1ff74bbde52a888083b06e1b3e5b.png)

这篇关于[如何自动更新程序集版本号](http://www.codeproject.com/Articles/31236/How-To-Update-Assembly-Version-Number-Automaticall)的文章显示了一半的解决方案......

根据我所做的研究，不可能在 PreBuildEvent 中使用 SetupVersion。它没有 $SetupVersion 命令：http: [//msdn.microsoft.com/en-us/library/42x5kfw4 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.80).aspx)

如代码项目文章中的[此评论](http://www.codeproject.com/Messages/4288706/Make-it-fully-automatic-with-build-events.aspx)所示，必须使用命令更改每个构建的 PreBuildEvent`-set:`并不理想。

我们需要的解决方案是调用 AssemblyInfoUtil.exe 并让它从 vdproj 项目文件中读取“ProductVersion”的 PreBuildEvent。然后更新程序集版本号。

我已经修改了文章中的代码，以向您展示如何从 Setup.vdproj 读取产品版本，这就是从 PreBuildEvent 调用它的方式：

```
AssemblyInfoUtil.exe -setup:"C:\Program Files\MyProject1\Setup1\Setup1.vdproj" -ass:"C:\Program Files\MyProject1\AssemblyInfo.cs" 
```

这是修改后的代码：

```
using System;
using System.IO;
using System.Text;

namespace AssemblyInfoUtil
{
    class AssemblyInfoUtil
    {
    private static int incParamNum = 0;    
    private static string fileName = "";  
    private static string setupfileName = "";       
    private static string versionStr = null;    
    private static bool isVB = false;
    [STAThread]
    static void Main(string[] args)
    {
        for (int i = 0; i < args.Length; i++) {
            if (args[i].StartsWith("-setup:")) {
           string s = args[i].Substring("-setup:".Length);
           setupfileName = int.Parse(s);
            }
            else if (args[i].StartsWith("-ass:")) {
           fileName = args[i].Substring("-ass:".Length);
            }
        }

        //Jeremy Thompson showing how to detect "ProductVersion" = "8:1.0.0" in vdproj
        string setupproj = System.IO.File.ReadAllText(setupfileName);
        int startPosOfProductVersion = setupproj.IndexOf("\"ProductVersion\" = \"") +20;
        int endPosOfProductVersion = setupproj.IndexOf(Environment.NewLine, startPosOfProductVersion) - startPosOfProductVersion;
        string versionStr = setupproj.Substring(startPosOfProductVersion, endPosOfProductVersion);
        versionStr = versionStr.Replace("\"", string.Empty).Replace("8:",string.Empty);

        if (Path.GetExtension(fileName).ToLower() == ".vb")
        isVB = true;

        if (fileName == "") {
        System.Console.WriteLine("Usage: AssemblyInfoUtil 
           <path to :Setup.vdproj file> and  <path to AssemblyInfo.cs or AssemblyInfo.vb file> [options]");
        System.Console.WriteLine("Options: ");
        System.Console.WriteLine("  -setup:Setup.vdproj file path");
        System.Console.WriteLine("  -ass:Assembly file path");
        return;
        }

        if (!File.Exists(fileName)) {
        System.Console.WriteLine
            ("Error: Can not find file \"" + fileName + "\"");
        return;
        }

        System.Console.Write("Processing \"" + fileName + "\"...");
        StreamReader reader = new StreamReader(fileName);
             StreamWriter writer = new StreamWriter(fileName + ".out");
        String line;

        while ((line = reader.ReadLine()) != null) {
        line = ProcessLine(line);
        writer.WriteLine(line);
        }
        reader.Close();
        writer.Close();

        File.Delete(fileName);
        File.Move(fileName + ".out", fileName);
        System.Console.WriteLine("Done!");
    }

    private static string ProcessLine(string line) {
        if (isVB) {
        line = ProcessLinePart(line, "<Assembly: AssemblyVersion(\"");
        line = ProcessLinePart(line, "<Assembly: AssemblyFileVersion(\"");
        } 
        else {
        line = ProcessLinePart(line, "[assembly: AssemblyVersion(\"");
        line = ProcessLinePart(line, "[assembly: AssemblyFileVersion(\"");
        }
        return line;
    }

    private static string ProcessLinePart(string line, string part) {
        int spos = line.IndexOf(part);
        if (spos >= 0) {
        spos += part.Length;
        int epos = line.IndexOf('"', spos);
        string oldVersion = line.Substring(spos, epos - spos);
        string newVersion = "";
        bool performChange = false;

        if (incParamNum > 0) {
            string[] nums = oldVersion.Split('.');
            if (nums.Length >= incParamNum && nums[incParamNum - 1] != "*") {
            Int64 val = Int64.Parse(nums[incParamNum - 1]);
            val++;
            nums[incParamNum - 1] = val.ToString();
            newVersion = nums[0]; 
            for (int i = 1; i < nums.Length; i++) {
                newVersion += "." + nums[i];
            }
            performChange = true;
            }
        }

        else if (versionStr != null) {
            newVersion = versionStr;
            performChange = true;
        }

        if (performChange) {
            StringBuilder str = new StringBuilder(line);
            str.Remove(spos, epos - spos);
            str.Insert(spos, newVersion);
            line = str.ToString();
        }
        } 
        return line;
    }
     }
} 
```

* * *

**答案 2：**

在我看来，更好的方法是使用[Shared Assembly Info](http://blogs.msdn.com/b/jjameson/archive/2009/04/03/shared-assembly-info-in-visual-studio-projects.aspx)类而不是单独的 AssemblyInfo 类文件。

要实现这一点，请在名为 SharedAssemblyInfo.cs 的解决方案文件夹中创建一个文件，然后在每个项目中添加一个指向 SharedAssemblyInfo.cs 的链接。您还可以将链接的 SharedAssemblyInfo.cs 移动到 Properties 文件夹中，使其与解决方案中每个项目特定的 AssemblyInfo.cs 并排放置，如下所示。

![在此处输入图像描述](../Images/0b23168881af5df4fdda58764d04ca03.png)

这是一个示例 SharedAssemblyInfo.cs 文件：

```
using System;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyCompany("Saint Bart Technologies")]
[assembly: AssemblyProduct("Demo")]
[assembly: AssemblyCopyright("Copyright ? Saint Bart 2013")]
[assembly: AssemblyTrademark("")]

// Make it easy to distinguish Debug and Release (i.e. Retail) builds;
// for example, through the file properties window.
#if DEBUG
[assembly: AssemblyConfiguration("Debug")]
[assembly: AssemblyDescription("Flavor=Debug")] // a.k.a. "Comments"
#else
[assembly: AssemblyConfiguration("Retail")]
[assembly: AssemblyDescription("Flavor=Retail")] // a.k.a. "Comments"
#endif

[assembly: CLSCompliant(true)]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// Note that the assembly version does not get incremented for every build
// to avoid problems with assembly binding (or requiring a policy or
// <bindingRedirect> in the config file).
//
// The AssemblyFileVersionAttribute is incremented with every build in order
// to distinguish one build from another. AssemblyFileVersion is specified
// in AssemblyVersionInfo.cs so that it can be easily incremented by the
// automated build process.
[assembly: AssemblyVersion("1.0.0.0")]

// By default, the "Product version" shown in the file properties window is
// the same as the value specified for AssemblyFileVersionAttribute.
// Set AssemblyInformationalVersionAttribute to be the same as
// AssemblyVersionAttribute so that the "Product version" in the file
// properties window matches the version displayed in the GAC shell extension.
[assembly: AssemblyInformationalVersion("1.0.0.0")] // a.k.a. "Product version" 
```

这是一个示例 AssemblyInfo.cs 文件：

```
// Note: Shared assembly information is specified in SharedAssemblyInfo.cs
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("WindowsFormsApplication2")]
// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("ffded14d-6c95-440b-a45d-e1f502476539")] 
```

因此，每次您想更改所有项目的装配信息时，您都可以在一处完成。我假设您希望将 MSI 设置版本设置为与程序集版本号相同，一个手动步骤。

* * *

**答案 3：**

考虑改用[MSBuild](http://msdn.microsoft.com/en-us/library/wea2sca5(v=vs.90).aspx)，它有所有这些好处，但我不确定你现在是否有时间来使用它。

* * *

**答案 4：**

程序集可以使用 AssemblyInfo.cs 中的以下星号语法自动增加其内部版本号：

```
[assembly: AssemblyVersion("1.0.0.*")] 
```

> 这是一个很好的方法，因为跟踪内部版本号的目的是能够识别不同的内部版本。由于构建尚未发生，因此更改构建编号的预构建会破坏此目的。

* * *

**答案 5：**

此处的另一个[CodeProject](http://www.codeproject.com/KB/install/NewSetupVersion.aspx)答案假定您要更新`ProductVersion, ProductCode, PackageCode`Setup MSI Project 文件中的 。我没有那样解释你的问题，根据这个线程存在问题： [pre-build event to change setup project's ProductVersion doesn't take effect until after the build](https://stackoverflow.com/questions/9395279/pre-build-event-to-change-setup-projects-productversion-doesnt-take-effect-unt)

**答案 6（新）：**

有一些 TFS Build 插件可以设置“Assembly Info”：[https ://marketplace.visualstudio.com/items?itemName=bleddynrichards.Assembly-Info-Task](https://marketplace.visualstudio.com/items?itemName=bleddynrichards.Assembly-Info-Task) [https://marketplace.visualstudio.com/items?itemName=bool .update-assembly-info](https://marketplace.visualstudio.com/items?itemName=bool.update-assembly-info) [https://marketplace.visualstudio.com/items?itemName=ggarbuglia.setassemblyversion-task](https://marketplace.visualstudio.com/items?itemName=ggarbuglia.setassemblyversion-task)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:09:43.640

我不知道这是否能完美地解决您的问题，但您可以实现一个包含所有配置管理信息的通用类，例如：

```
public class VersionInfo{
    public const string cProductVersion = "1.0.0"
    //other version info
} 
```

在您可以使用新类更新所有 AssemblyInfo.cs 之后：

```
[assembly: AssemblyVersion(VersionInfo.cProductVersion)] 
```

我希望这有帮助。

# android - 签署apk - 这是什么意思，我该怎么做？

> ID：15222247
> 
> 赞同：0
> 
> 时间：2013-03-05T11:08:58.120
> 
> 标签：android, eclipse

我问[了一个关于 SO 的问题，](https://stackoverflow.com/questions/15209048/debugging-a-signed-apk)唯一建议的答案涉及以下内容：“注册调试证书并使用该调试 api 密钥。”

不幸的是，我几乎不知道这意味着什么，也不知道该怎么做。我确实阅读[了这个谷歌页面](http://developer.android.com/tools/publishing/app-signing.html)，但它似乎假设了一些我没有的先验知识，并且没有给出示例。有没有更友好的指南可以帮助我？

**编辑：**我的最终目标是能够调试已签名的应用程序。

**编辑：**通常当我想调试应用程序时，我可以在运行应用程序*之前*在 eclipse 中查看源代码，然后设置一些断点。然后我运行应用程序，可以逐行或从一个断点跳到下一个断点逐行执行代码。在这个（和类似的）SO问题中，我看到了通过使用eclipse的DDMS视图进行调试的讨论，运行已经导出和签名的apk，然后将调试器“附加”到进程中。这让我很困惑，因为我无法理解我是如何看到相应的源代码来设置断点的......而且我的程序在启动后很快就崩溃了——我想这可能会增加这种调试的难度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:11:52.290

说明书很清楚。请说明您工作后遇到的问题，我建议：

[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

好的，一个小概述，没有参考或日食，所以为错误留出一些空间，但它的工作原理是这样的

*   在 eclips 中打开你的项目
*   按鼠标右键，工具（android 工具？）-> 导出签名的应用程序（apk？）
*   通过向导：
*   制作一个新的密钥库。记住那个密码
*   签署您的应用程序
*   保存它等。

另外，从链接：

> 使用 Eclipse ADT 编译和签名
> 
> 如果您使用带有 ADT 插件的 Eclipse，则可以使用导出向导导出签名的 .apk（如果需要，甚至可以创建新的密钥库）。导出向导为您执行与 Keytool 和 Jarsigner 的所有交互，这允许您使用 GUI 对包进行签名，而不是执行手动过程来编译、签名和对齐，如上所述。一旦向导编译并签署了您的包，它还将使用 zipalign 执行包对齐。由于导出向导同时使用 Keytool 和 Jarsigner，因此您应该确保它们可以在您的计算机上访问，如上文“签名的基本设置”中所述。
> 
> 要在 Eclipse 中创建签名并对齐的 .apk：
> 
> 1.  在 Package Explorer 中选择项目，然后选择 File > Export。
> 2.  打开 Android 文件夹，选择导出 Android 应用程序，然后单击下一步。
>     
>     
>     
>     导出 Android 应用程序向导现在启动，它将指导您完成对应用程序进行签名的过程，包括选择用于签署 .apk 的私钥（或创建新的密钥库和私钥）的步骤。
>     
>     
> 3.  完成导出向导，您的应用程序将被编译、签名、对齐并准备好分发。

**编辑：**

DDMS 不是源代码调试器，它提供：

*   端口转发服务
*   设备上的屏幕截图
*   设备上的线程和堆信息
*   logcat、进程和无线电状态信息
*   来电和短信欺骗
*   位置数据欺骗

另一方面，使用 Eclipse，您可以在代码中设置断点。

# regex - 多线程应用程序的拆分日志

> ID：15222253
> 
> 赞同：0
> 
> 时间：2013-03-05T11:09:07.770
> 
> 标签：regex, perl, unix, split

我有一个多线程应用程序，它生成如上所述的日志：

```
 D Fri Feb 01 00:21:23 2013  <no machine>  pin_deferred_act:10233  pin_mta_conf.c:636 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:0:1359658283:1
            pin_mta_convert_cmdline_options_to_flist parameters flist

    D Fri Feb 01 00:21:23 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pcpst.c(78):406 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:2:0:1359658283:0
            connect to host=172.16.87.14, port=11962 OK
    D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pin_mta.c:2479 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:0:1359658283:0
            Config object search input flist
    0 PIN_FLD_POID           POID [0] 0.0.0.1 /search/pin -1 0
    0 PIN_FLD_FLAGS           INT [0] 0
    0 PIN_FLD_TEMPLATE        STR [0] "select X from /config/mta where F1 = V1 "
    0 PIN_FLD_ARGS          ARRAY [1] allocated 20, used 1
    1     PIN_FLD_CONFIG_MTA    ARRAY [0] allocated 20, used 1
    2         PIN_FLD_NAME            STR [0] "pin_deferred_act"
    0 PIN_FLD_RESULTS       ARRAY [0] allocated 20, used 1
    1     PIN_FLD_POID           POID [0] NULL poid pointer
    D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pin_mta.c:2484 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:3:7:1359658284:2
            Config object search output flist
    0 PIN_FLD_POID           POID [0] 0.0.0.1 /search/pin -1 0
    D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pin_mta.c:3138 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:7:1359658284:2 
```

因此线程会更新日志，例如**pin_deferred_act:10233:1:7** --> 其中 1 指定日志文件中第一个线程的日志。

我想为每个线程创建日志文件，起点应该是：

```
1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1: 
```

和终点应该是：

```
D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in 
```

（日期/时间戳将继续修改）。所有实例都应该放在一个文件中。

例如：

```
 D Fri Feb 01 00:21:23 2013  <no machine>  pin_deferred_act:10233  pin_mta_conf.c:636 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:0:1359658283:1
            pin_mta_convert_cmdline_options_to_flist parameters flist
    D Fri Feb 01 00:21:23 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pcpst.c(78):406 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:2:0:1359658283:0
            connect to host=172.16.87.14, port=11962 OK
    D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pin_mta.c:2479 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:0:1359658283:0
            Config object search input flist
    0 PIN_FLD_POID           POID [0] 0.0.0.1 /search/pin -1 0
    0 PIN_FLD_FLAGS           INT [0] 0
    0 PIN_FLD_TEMPLATE        STR [0] "select X from /config/mta where F1 = V1 "
    0 PIN_FLD_ARGS          ARRAY [1] allocated 20, used 1
    1     PIN_FLD_CONFIG_MTA    ARRAY [0] allocated 20, used 1
    2         PIN_FLD_NAME            STR [0] "pin_deferred_act"
    0 PIN_FLD_RESULTS       ARRAY [0] allocated 20, used 1
    1     PIN_FLD_POID           POID [0] NULL poid pointer
    D Fri Feb 01 00:21:24 2013  App-BRM-Prod-Pri.acttv.in  pin_deferred_act:10233  pin_mta.c:3138 1:App-BRM-Prod-Pri.acttv.in:pin_deferred_act:10233:1:7:1359658284:2 
```

应该转到一个文件 - *Thread1.log*，同样对于其他线程，该文件应该分别创建为*Threadn.log*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:25:12.643

文件从一开始就是处理日志的一种混乱的、不可扩展的方式。更好的方法是将日志处理为连接源 -> 接收器的日志条目消息流。如果 Oracle 提供数据收集的替代方法，请考虑使用 syslog、logplex 或类似方法。根据记录 IOPS 瓶颈或其他因素，自定义重新实现可能是可行的。

强烈建议使用高分辨率单调时钟和/或全局排序的 GUID 时间戳。对于挂壁时间，请务必在任何地方使用非向后补偿的 UTC，同步到低层时间源。

以上建议可能会根据课程应用的需要而有所不同，因此请明智地尝试和实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:44:34.797

我认为 Barry 的建议很有用，但如果您无法更改应用程序的日志输出，这里有一个快速的 Perl 解决方案：

```
#!usr/bin/perl
use strict;
use warnings;

my %logs;
my $last_log;
while (<$main_log_file>)  #open that application's log in this variable.
{
    if (/pin_deferred_act:\d+:(\d+):\d/)
    {
        unless (defined $logs{$1})
        {
            open $fh,'>',"Thread$1.log") or die "Can't open Thread $1 log: $!";
            $logs{$1} = $fh;
        }

        $last_log = $logs{$1}; 
    }

    if (defined $last_log)
    {
        print {$last_log} $_;
    }
    else
    {
        #Didn't find starting line.  Error handling?    
    }
} 
```

此解决方案维护所有线程的日志文件的打开文件句柄哈希。我更喜欢这个，因为如果输入在相同线程之间来回切换很多，它会更有效。但是，如果应用程序的线程数超过允许在系统上打开文件的线程数，它就会中断。

# browser-cache - 浏览器多次发送相同内容（PNG 图像）的请求

> ID：15222254
> 
> 赞同：5
> 
> 时间：2013-03-05T11:09:14.803
> 
> 标签：browser-cache, cache-control, http-status-code-304

我在*apache*服务器上托管了一个名为**icons.png的 PNG 文件。**基本上这个文件是其他小图像元素（**CSS Sprite**）的组合。当页面第一次加载时，此文件会以正常的**200 OK响应加载。**

 *****页面加载后；有一些链接悬停在其上触发自定义*工具提示。*此*工具提示*将来自*icons.png*文件的部分图像显示为某些 HTML 元素的*背景图像*。

例如 HTML 代码是这样的：

`jQuery(".profile").tipTip({delay: 200, defaultPosition: "top", content: "<a href='#' style='width: 32px; height: 32px; display: block;` **背景：网址（图片/图标.png）** `no-repeat -200px -64px'></a>"});`

[HTML文件中还有一些其他地方引用了**icons.png** ]

* * *

> 现在，每次我将鼠标悬停在链接上时，都会显示工具提示，但同时浏览器正在向服务器发送 HTTP 请求以获取**icons.png**文件。来自服务器的响应代码是**304 Not Modified**。

虽然没有获取文件的内容，但是每次发送标头（**大约 166 字节**）的开销仍然存在，这反过来又导致了**1.5 秒的延迟**（*我的连接速度非常慢*）。在这 1.5 秒的时间里，工具提示元素没有背景图像，突然图像突然出现。

* * *

下面是一些截图

*   Chrome 网络面板：

[![铬合金](../Images/7cbbb2cfbb8e8d935a7182e1c058b366.png)](https://i.stack.imgur.com/tmXPR.png)

*   Firebug 网络面板：

[![火狐](../Images/77fe30b64672746013821820bcebd924.png)](https://i.stack.imgur.com/SVqEk.png)

*   HTTP 标头：

[![标头](../Images/5998cfcff47a36e6a2e315033faae450.png)](https://i.stack.imgur.com/1rrFO.png)

* * *

据我所知，一旦获取资源，浏览器应该将其保存在*缓存*中并在必要时从那里获取，而不是**多次请求服务器**。

我发现服务器没有随内容一起发送任何“ **Expires** ”或“ **Cache-Control ”标头。**我不确定这是否是 Chrome 出现这种异常行为的原因。任何建议都受到高度赞赏。

> PS：该应用程序托管在**Heroku**的共享托管环境中。我在 Ubuntu 12.04 x86_64 上使用 Firefox 15.0 和 Chrome 版本 21.0.1180.89。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:21:53.203

每次您第一次显示一个元素时，它都会下载任何相关的背景图像……至少在现代浏览器中是这样。

您的多个请求可能是因为它们是您将鼠标悬停在新工具提示上的时间，使其可见，从而提示调用图像。

您的直觉是正确的，但问题是，如果没有直接在您的服务器上或通过 .htaccess 文件完成缓存标头配置，那么它将继续使用 http 请求请求服务器以查看它是否需要下载更新的版本或不。一旦您整理出可以通过 mod_expires 设置的“过期”标头，它将开始每次都返回本地请求的文件版本。

**来源**：[http ://httpd.apache.org/docs/2.2/mod/mod_expires.html](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T08:26:21.907

我最近在本地开发过程中也遇到了这种行为。具有精灵背景的元素`:hover`在 CSS 文件中有一个状态，它指向具有不同背景位置的同一个精灵背景图像，并且在切换元素的背景时会导致非常小的但仍然明显的延迟。

```
.class {
    background: transparent url('sprite.png') 0 0 scroll;
}

.class:hover {
    background: transparent url('sprite.png') -50px 0 scroll;
} 
```

确保不会发生这种情况的一种方法是仅使用`background-position`CSS 属性。

```
.class {
    background: transparent url('sprite.png') 0 0 scroll;
}

.class:hover {
    background-position: -50px 0;
} 
```

当然缓存控制还是需要的，这种编码方式可以省去一些头疼的问题。*****

# ios - 获取下载进度 Google Drive

> ID：15222258
> 
> 赞同：1
> 
> 时间：2013-03-05T11:09:24.830
> 
> 标签：ios, google-drive-api

有没有办法在 NSURLConnection 的 didReceiveData 上获取回调，或者在下载 Google Drive 文件时跟踪下载进度？

我只看到一个uploadProgress 并且下载方法需要一个完成块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:21:20.600

这是给您的代码片段：

```
self.fetcher = [GTMHTTPFetcher fetcherWithRequest:request];
[self.fetcher setReceivedDataBlock:^(NSData *data) {
    float percentTransfered = self.fetcher.downloadedLength * 100.0f / self.fetcher.response.expectedContentLength;
    // Do something with progress
} 
```

如果下载文件的大小未知，则 expectedContentLength 将返回 -1。

# javascript - 锤子拖动中心

> ID：15222264
> 
> 赞同：1
> 
> 时间：2013-03-05T11:09:39.000
> 
> 标签：javascript, jquery, jquery-mobile, hammer.js

我正在为我的应用程序使用 Hammers 库。如何从我触摸的任何点而不是中心拖动我的元素？谢谢 ！

```
var hammertime = Hammer(document.getElementById('contentTab'), {
    transform_always_block:true,
    transform_min_scale: 1,
   drag_block_horizontal: true,
    drag_block_vertical: true,
    drag_min_distance: 0,
    drag_max_touches: 2,
    release: false

});

var rect = document.getElementById('tabella');

var posX=0, posY=0,
    scale=1, last_scale,
    rotation= 1, last_rotation,
    dt =0;

hammertime.on('touch  doubletap drag transform', function(ev) {
    switch(ev.type) {

    case 'doubletap':
        if (dt == 0){
            dt=1;
            scale = 2;
        }else if (dt ==1){
            dt = 0;
            scale = 1;
            posX=0;
            posY=0;
        }

      last_rotation = rotation;
        break;

        case 'touch':
            last_scale = scale;

          last_rotation = rotation;
            break;

     case 'drag':

          posX = ev.gesture.deltaX;
            posY = ev.gesture.deltaY;
            break;

        case 'transform':
   //         rotation = last_rotation + ev.gesture.rotation;
            scale = Math.max(1, Math.min(last_scale * ev.gesture.scale, 10));
            break;
    }

    // transform!
    var transform =
            "translate3d("+posX+"px,"+posY+"px, 0) " +
            "scale3d("+scale+","+scale+", 0) " ;
            "rotate("+rotation+"deg) ";

    rect.style.transform = transform;
    rect.style.oTransform = transform;
    rect.style.msTransform = transform;
    rect.style.mozTransform = transform;
    rect.style.webkitTransform = transform;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T08:37:13.307

改变

```
posX = ev.gesture.deltaX;
posY = ev.gesture.deltaY; 
```

至

```
posX += ev.gesture.deltaX;
posY += ev.gesture.deltaY; 
```

可能会成功。

# postgresql - scala中的Postgres JDBC无法在不重新启动sbt的情况下运行两个查询

> ID：15222265
> 
> 赞同：0
> 
> 时间：2013-03-05T11:09:43.857
> 
> 标签：postgresql, scala, jdbc, sbt

我正在使用 scala (2.9.2) 连接到 postgres 数据库。

我第一次进行 SELECT（通过在 IntelliJ 的 sbt 终端中使用“运行”运行代码）运行良好，但如果我在 sbt shell 中再次“运行”，我会收到一个错误，声称：

```
[error] (run-main) java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost/db
java.sql.SQLException: No suitable driver found for jdbc:postgresql://localhost/db
    at java.sql.DriverManager.getConnection(DriverManager.java:602)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at SequenceGenerator$.connect(Validator.scala:50)
    at SequenceGenerator$.generate(Validator.scala:54)
    at Main$.main(Validator.scala:32)
    at Main.main(Validator.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

我已经通过 sbt 安装了 postgres 连接器，我的 build.sbt 文件中的这一行。

```
libraryDependencies += "postgresql" % "postgresql" % "9.1-901.jdbc4" 
```

这是我制作 SELECT 的代码：

```
object SequenceGenerator{
  def connect() = {
    DriverManager.getConnection("jdbc:postgresql://localhost/db","user", "pass")

  }
  def generate() = {
    val db = connect()
    val st = db.createStatement
    val res = st.executeQuery("SELECT value from table LIMIT 2")
    while( res.next) {
      println(res.getString("value"))
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T15:01:44.120

我们必须将此添加到我们的集成测试启动中，以解决与 mysql jdbc 驱动程序相同的问题：

```
Class.forName("com.mysql.jdbc.Driver").newInstance 
```

我不确定为什么 SBT 会卸载驱动程序，但这样的事情可能对你有用：

```
object SequenceGenerator{
  //Use whatever your jdbc driver class should be here, I'm just guessing
  Class.forName("org.postgresql.Driver").newInstance

  def connect() = {
    DriverManager.getConnection("jdbc:postgresql://localhost/db","user", "pass")
  }
  def generate() = {
    val db = connect()
    val st = db.createStatement
    val res = st.executeQuery("SELECT value from table LIMIT 2")
    while( res.next) {
      println(res.getString("value"))
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T15:35:30.430

主要问题是您尝试使用旧的 DriverManager 方法加载驱动程序。您必须在 slick 中使用 Database.forDataSource 方法并使用适当的数据库池，如 C3P0。

I think this is a classloading issue between Slick, SBT and the Driver.

Obviously make sure that the driver is in the classpath.

# android - 文本视图 onclickListener

> ID：15222266
> 
> 赞同：0
> 
> 时间：2013-03-05T11:09:45.073
> 
> 标签：android, textview, onclicklistener

在我的应用程序中，我使用数组动态添加了文本视图，并为每个变量赋予了一个计数变量，该变量根据添加的文本视图增加计数。在每个文本视图的 onClickListener 中，我想执行一些操作，但是当我试图在所有文本视图上执行此操作。下面是代码，我没有弄错。请帮助我。

```
// here i have added textview dynamically
       mtxtview[colTextCount]=new TextView(this);
       mtxtview[colTextCount].setId(colTextCount);
       mtxtview[colTextCount].setLayoutParams(new LayoutParams(20,20)); 
```

而在 onclickListener-

```
@Override
public void onClick(View v) {
    System.out.println("onclick...");

    for(jj=0;jj<_mTextViewId;jj++){
        String hh=mtxtview[jj].getText().toString();
        System.out.println("................................."+hh);     
        System.out.println("id is...."+_mTextHeight[jj].getId());
    //if i added 3 textview.its giving me all 3 textview's text(getText())  

    }

           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:13:17.300

在开始 for 循环之前使用`switch-case`and`View.getId()`检查哪个 TextView 被点击。试试看：

```
@Override
public void onClick(View v) {
    System.out.println("onclick...");
    switch(v.getId())
     {
       case _mTextViewId:  
         for(jj=0;jj<_mTextViewId;jj++){
          String hh=mtxtview[jj].getText().toString();
          System.out.println("................................."+hh);     
          System.out.println("id is...."+_mTextHeight[jj].getId());

         }
       break ;

      // same for others....       

    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T03:23:59.543

请参阅[TextView onClick() 不起作用](https://stackoverflow.com/questions/9079170/textview-onclick-not-working)

您应该为每个 TextView 对象执行 setOnClickListener 。

# android - 在 Android 上为 Dev Kit 7000 启用 TV Out

> ID：15222269
> 
> 赞同：0
> 
> 时间：2013-03-05T11:10:00.560
> 
> 标签：android, arm

我正在使用运行 Android 2.3.1 的[DevKit7000](http://www.armkits.com/product/devkit7000.asp)，我想使用 TV Out（复合）接口，但我在 TV Out 上没有得到任何输出（信号）。虽然我在内核中启用了 TV Out。这是处理 TV Out 和视频内容的内核配置文件 (.config) 文件的一部分。

```
config VIDEO_TV20=y
config HDMI_CEC=y
config HDMI_HPD=y
config TV_FB=y
CONFIG_VIDEO_SAMSUNG=y
CONFIG_VIDEO_SAMSUNG_V4L2=y 
```

这是板子启动时超级终端的输出部分，（***请参阅第二次更新***）

```
[    2.007845] FIMC0 registered successfully
[    2.011670] FIMC1 registered successfully
[    2.015652] FIMC2 registered successfully
[    2.018470] <6>S5PC1XX TVOUT Driver, (c) 2009 Samsung Electronics
[    2.025187] s5p-tvout s5p-tvout: hpd status is cable removed
[    2.036115] DBUG_PORT must not use AFC!
[    2.038533] Freeing init memory: 152K 
```

这表明已成功包含并加载了TVOUT驱动程序，但我不知道**hpd status is cable removed 是**什么意思，如果你能告诉这是什么意思？

我可以在网上找到的关于“在 Android 上启用 TV OUT”的唯一相关链接是[这个](http://www.omappedia.org/wiki/Kernel_TV-Out)，但这是基于[OMAP](http://en.wikipedia.org/wiki/OMAP)的设备，但我有[ARM](http://en.wikipedia.org/wiki/ARM_architecture)。

TV Out 在可用设备列表中也可见，这是 adb shell中**ls /dev/devices/platform命令的输出。**

```
# ls sys/devices/platofrm
uevent
power
power.0
s5pv210-nand
smdkc110-rtc
devkit7000-keypad
s3c-g2d
s5p-tvout
s5p-cec
s5p-hpd
pvrsrvkm 
```

显然一切都很好，但 TV OUT 仍然无法正常工作。所以如果你能告诉我如何使用（启用）电视输出？

**更新：**输出`/sys/module/`是（为简洁而编辑）：

```
cd /sys/module
# ls
s3cfb        pvrsrvkm     scsi_mod    sg      dm9000
usbcore      ehci_hcd     usb_storage u_ether
tuner_xc2028 tuner_simple mt20xx      tda8290
tea5767      tea5761      tda9887     xc5000  v4l1_compat
mmc_core     sdhci        hid         usbhid  usbserialbinder
snd          snd_timer    snd_pcm     sch_htb 
```

**第二次更新：**

深入查看启动日志会发现可能的问题，这是启动时超级终端的输出（仅与电视输出相关的部分输出）：

```
[    2.043158] <6>s5p_tv_init 
[    2.046943] <6>S5PC1XX TVOUT Driver, (c) 2009 Samsung Electronics [Screwed]!
[    2.053992] <6> __devinit s5p_tv_probe 
[    2.058895] <6> __devinit tv_clk_get 
[    2.063516] <6> s5p_tv_base_clk_gate 
[    2.068191] <6> s5p_hpd_get_state 
[    2.072152] s5p-tvout s5p-tvout: hpd status is cable removed
[    2.077964] <6> s5p_tv_if_init_param 
[    2.082293] <6> s5ptvfb_set_lcd_info 
[    2.086796] <6> s5ptvfb_alloc_framebuffer 
[    2.091825] <6> s5ptvfb_init_fbinfo 
[    2.096239] <6> s5ptvfb_set_bitfield 
[    2.100747] <6> s5ptvfb_set_alpha_info 
[    2.105424] <6> s5ptvfb_register_framebuffer 
[    2.116337] <6> s5p_tv_base_clk_gate 
[    2.119670] DBUG_PORT must not use AFC!
[   13.997353] s5p_vlayer_stop::s5p_vp_stop() fail 
```

所以**s5p_vlayer_stop:: [s5p_vp_stop()](https://dev.openwrt.org.cn/browser/backfire/target/linux/s5pv210/files-2.6.35/drivers/media/video/samsung/tv20/s5pv210/vprocessor_s5pv210.c?rev=427#L695)**失败，这显然会停止调用其他负责使电视初始化/正常工作的方法。但我不是驱动专家，无法弄清楚/回溯所有的函数调用，如果你们中的任何一个有经验并且可以帮助防止 s5p_vp_stop() 失败？

谢谢 ！

问候

乌萨马

# java - Tomcat 实例中的 webapps 之间的连接重置

> ID：15222272
> 
> 赞同：0
> 
> 时间：2013-03-05T11:10:02.753
> 
> 标签：java, sockets, http, tomcat, apache-httpclient-4.x

我有两个 Web 应用程序部署到一个 Tomcat 7 容器。它们通过 localhost 上的 HTTP 相互通信。我偶尔会看到连接重置错误：

```
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:260)
    at org.apache.http.impl.conn.LoggingSessionInputBuffer.readLine(LoggingSessionInputBuffer.java:115)
    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:98)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:252)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247)
    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:633)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:454)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
    at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:170) 
```

我的问题是：

1.  我怎样才能找出导致这些的原因？
2.  我应该期望通过 lo 接口进行连接重置吗？
3.  如果它们是预期的，那么处理它们的最佳方法是什么？重试幂等调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:57:10.117

1.  这可能有多种原因。通常原因是 TCP 级别问题或由于负载过大、内部问题等导致的异常连接终止

2.  我看不出环回设备在这方面有什么特别之处

3.  是的。幂等方法的自动重试将是最​​合理的恢复措施

# sql - 如何增加选择旧报价的机会

> ID：15222274
> 
> 赞同：3
> 
> 时间：2013-03-05T11:10:09.833
> 
> 标签：sql, h2

我有一个包含引号的数据库。我喜欢显示随机引号。但有两个条件。

*   不应选择上周显示的报价。
*   报价显示的距离越远，它被选中的机会就越大。

第一个并不难。我可以为此使用 WHERE 子句。

第二个不知如何实现。有没有一种简单的方法可以做到这一点，还是需要我为此定义一个复杂的函数？

一个可能也不错的扩展。最初大多数报价都不会显示。如果可以给一个尚未显示的报价提供更大的显示机会，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:22:47.503

一种可能的方法：按过去使用报价的时间长度，乘以随机数。这具有对过去更远的记录赋予更大权重的效果。

这是伪代码：

```
select quote from quotes 
    where current date - display date > 1 week
    order by ((current date - display date - 1 week) * random number) desc
    fetch first row only 
```

您必须使其适应系统的日期/时间功能，因为这些功能变化很大。

您可能需要使用中间步骤将随机数应用于每一行，因为直接排序`rand()`在许多系统上不起作用。

**更新：**这是[一个有效的 MySQL 示例](http://www.sqlfiddle.com/#!2/f69af/13)。

# delphi - TBookmark 对象的加减法

> ID：15222276
> 
> 赞同：0
> 
> 时间：2013-03-05T11:10:13.610
> 
> 标签：delphi, delphi-5

我的问题是如何使用 TBookmark 对象进行加法和减法等操作。例如，假设我想在 dbgrid 中高 4 行：

```
MyPoint:=Query1.GetBookmark;
...
//MyPoint:=MyPoint-4;
Query1.GotoBookmark(MyPoint); 
```

这里注释行是错误的。它会产生“运算符不适用于此操作数类型”消息。问题是我应该写什么来代替注释行。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:16:43.707

您不能直接在书签上执行算术运算。要执行您要求的操作，您需要转到书签，然后相对于该书签移动：

```
Query1.GotoBookmark(MyPoint);
Query1.MoveBy(-4); 
```

如果您愿意，您可以保存另一个代表该记录的书签。

# objective-c-protocol - 如何使用在一个类中定义的按钮，该类继承 UINavigationController 并出现在目标 c 中的每个其他类中？

> ID：15222277
> 
> 赞同：0
> 
> 时间：2013-03-05T11:10:17.650
> 
> 标签：objective-c-protocol

是否有可能我定义了一个继承 UINavigationController 并在此类中添加按钮的类。当我在另一个类中使用此类时，按钮将显示在每个类的导航栏上。希望很清楚。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:35:18.730

我建议您不要使用 UINavigationController，而是将 UIViewController 子类化并在此类中配置您想要的任何内容。

此外，无论您需要相同的实现，只需使用您新创建的类。

例如；创建新的 CustomViewController 如下

在 .h 文件中

@interface CustomViewController : UIViewController { }

在 .m 文件中，

-(void)viewDidLoad { [超级 viewDidLoad];

// 根据您的要求自定义实现 bar 和 View }

现在，如果您想在其他一些 View Controller 中进行此配置，子类 CustomViewController 并且一切都会完成。例如：如果你有 ListViewController，

在 .h 文件中，

@interface ListViewController : CustomViewController { }

在 .m 文件中

-(void)viewDidLoad { [超级 viewDidLoad]; // 它的超类是“CustomViewController”，因此您在 CustomViewController 中实现的 viewDidLoad 方法将被调用并配置您的视图。

//进一步在这个控制器中你想要的任何东西}

希望能帮助到你。

# events - 蛋糕事件是异步处理的吗？

> ID：15222282
> 
> 赞同：2
> 
> 时间：2013-03-05T11:10:37.730
> 
> 标签：events, cakephp, event-handling, cakephp-2.1

目前我的 Cakephp 应用程序中没有任何排队功能。我将在不久的将来需要它。上传将导致批处理作业使用具有使用限制的外部 API，因此最好使用队列在单独的威胁中处理。我对此没有任何经验，因此我将尝试一个不同但更简单的示例。

用户操作会导致发送电子邮件。目前，页面的加载延迟了（相当长的）服务器发送电子邮件的时间。我想使用事件系统来解决这个问题。（我知道我也可以使用 afterRender 函数来执行此操作，或者将其分派到 shellTask​​，但那样我什么都学不到）

从示例页面：[http](http://book.cakephp.org/2.0/en/core-libraries/events.html) ://book.cakephp.org/2.0/en/core-libraries/events.html 我找到了这个例子：

```
// Cart/Model/Order.php
App::uses('CakeEvent', 'Event');
class Order extends AppModel {

    public function place($order) {
        if ($this->save($order)) {
            $this->Cart->remove($order);
            $this->getEventManager()->dispatch(new CakeEvent('Model.Order.afterPlace', $this, array(
                'order' => $order
            )));
            return true;
        }
        return false;
    }
} 
```

假设该函数由控制器操作调用：

```
 public function place_order() {
     $result = $this->Order->place($this->request->data);
     $this->set('result', $result);
 } 
```

现在我的问题是......在所有调度的事件完成后会呈现相应的视图吗？还是模型函数只是触发事件然后忘记它？最后一个选项对我来说似乎更合乎逻辑（这也类似于文章中提到的 jQuery 功能）

问题是如果这是真的，我不明白后面的例子：

在有关使用结果的示例中：

```
// Using the event result
public function place($order) {
    $event = new CakeEvent('Model.Order.beforePlace', $this, array('order' => $order));
    $this->getEventManager()->dispatch($event);
    if (!empty($event->result['order'])) {
        $order = $event->result['order'];
    }
    if ($this->Order->save($order)) {
        // ...
    }
    // ...
} 
```

如果事件刚刚被触发（然后忘记了），那么您无法假设它已在下一行代码中修改了传递的事件对象！

我想尽可能多地使用 cake，但我不确定是否可以在没有 shellTask​​s 和外部队列的情况下获得我想要的背景行为。关于这些蛋糕活动的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:34:12.500

Cake 事件是同步触发的。触发事件时，会调用所有可用的侦听器，然后再继续执行其他指令。

您可以在第二个示例中将其想象为：

```
public function place($order) {
    $event = new CakeEvent('Model.Order.beforePlace', $this, array('order' => $order));
    $this->getEventManager()->dispatch($event);  // -> all listeners are called at this point
    // ... here you can assume your $event was modified
    if (!empty($event->result['order'])) {
        $order = $event->result['order'];
    }
    if ($this->Order->save($order)) {
        // ...
    }
    // ...
} 
```

# java - java加糖，我可以在这里避免几乎重复的代码吗？

> ID：15222285
> 
> 赞同：5
> 
> 时间：2013-03-05T11:10:40.863
> 
> 标签：java, android, syntactic-sugar

```
private class HSV extends HorizontalScrollView {
    public LinearLayout L;
    public AbsoluteLayout A;
    public HSV(Context context) {
        super(context);
        L = new LinearLayout(context);
        A = new AbsoluteLayout(context);
    }
    @Override public void addView(View child) {
        A.addView(child);
    }
    void update_scroll() {
        removeView(L);
        addView(L, 0);
        L.removeView(A);
        L.addView(A);
        A.invalidate();
        L.invalidate();
        invalidate();
        requestLayout();
    }
    int GetCurrentPos() {
        return getScrollX(); // <-- this line if HSV
        return getScrollY(); // <-- this line if VSV
    }
    ... few more methods skipped, they will not change at all in 'vertical' version
} 
```

我有这门课，它完美地满足了我的需求。现在我需要新的 VSV 类，它将派生自（垂直）ScrollView 并且是一样的。我当然可以复制整个块并将 extends Horizo​​ntalScrollView 更改**为**extends **ScrollView**，然后将**(L, 0)**更改为**(0, L)**（哎呀，这是在 SO 上发布时出现的错误，肯定那行不会改变，GetCurrentPos 会）。

或者我可以添加“布尔垂直”属性。但是 Java 没有模板或宏，也没有运行时原型，那么 Java 中是否有其他方法可以避免此示例中的代码重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:19:26.123

查看[android.widget.ScrollView](https://developer.android.com/reference/android/widget/ScrollView.html)和[android.widget.Horizo​​ntalScrollView](https://developer.android.com/reference/android/widget/HorizontalScrollView.html)的文档，它们似乎都实现了

```
void addView(View child, int index) 
```

因此，如果我在这里没有遗漏任何内容，您就不必更改那行代码。[此外，这两个类都从android.view.ViewGroup](https://developer.android.com/reference/android/view/ViewGroup.html)继承了这个方法。所以，如果两个类的实现是相同的，你可以做这样的事情

```
public abstract class ScrollViewDelegate<T extends FrameLayout> {
  private final T view;
  private LinearLayout L;
  private AbsoluteLayout A;

  public ScrollViewWrapper(T view) {
    this.view = view;
    L = new LinearLayout(view.getContext());   // or pass as parameter
    A = new AbsoluteLayout(view.getContext()); // or pass as parameter
  }

  void update_scroll() {
      view.removeView(L);
      view.addView(L, 0);
      L.removeView(A);
      L.addView(A);
      A.invalidate();
      L.invalidate();
      view.invalidate();
      view.requestLayout();
  }
  // ...
} 
```

在 HSV/VSV 中，您可以委托给此类（如有必要）。

```
public class HSV extends HorizontalScrollView {

  private final ScrollViewDelegate<HorizontalScrollView> delegate;

  public HSV(Context context) {
      super(context);
      this.delegate = new ScrollViewDelegate<HorizontalScrollView>(this);
  }
  // do stuff with this.delegate
}

public class VSV extends ScrollView {

  private final ScrollViewDelegate<ScrollView> delegate;

  public VSV(Context context) {
      super(context);
      this.delegate = new ScrollViewDelegate<ScrollView>(this);
  }
} 
```

# c++ - 如果没有 uncaught_exception，C++ 析构函数中的异常

> ID：15222286
> 
> 赞同：8
> 
> 时间：2013-03-05T11:10:41.073
> 
> 标签：c++, exception, destructor

人们强烈反对从析构函数中抛出异常。以[这个答案](https://stackoverflow.com/a/391616/1468366)为例。我想知道是否[`std::uncaught_exception()`](http://en.cppreference.com/w/cpp/error/uncaught_exception)可以用于便携式检测我们是否由于其他一些异常而处于展开堆栈的过程中。

我发现自己故意在析构函数中抛出异常。提到两个可能的用例：

*   一些涉及刷新缓冲区的资源清理，因此失败可能表示输出被截断。
*   销毁持有`std::exception_ptr`可能包含在不同线程中遇到的异常的对象。

简单地忽略这些特殊情况是完全错误的。并且有可能通过抛出异常，一些异常处理程序可能能够提供比析构函数本身写入的更有用的上下文信息`std::cerr`。此外，为所有失败的断言抛出异常是我的单元测试方法的重要组成部分。在这种情况下，错误消息后跟被忽略的错误条件将不起作用。

所以我的问题是，**是否可以抛出异常，除非正在处理另一个异常**，还是有理由不这样做？

把它放在代码中：

```
Foo::~Foo() {
  bool success = trySomeCleanupOperation();
  if (!success) {
    if (std::uncaught_exception())
      std::cerr << "Error in destructor: " << errorCode << std::endl;
    else
      throw FooOperationFailed("Error in destructor", errorCode);
  }
} 
```

据我所知，这应该是安全的，并且在许多情况下比根本不抛出异常要好。但我想验证一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T11:29:28.093

Herb Sutter 写过关于这个主题的文章：[http ://www.gotw.ca/gotw/047.htm](http://www.gotw.ca/gotw/047.htm)

他的结论是永远不要从析构函数中抛出，始终使用在无法抛出的情况下使用的机制报告错误。

两个原因是：

*   它并不总是有效。有时`uncaught_exception`返回 true，但可以安全地抛出。
*   以两种不同的方式报告相同的错误是糟糕的设计，如果用户想知道错误，则必须考虑这两种方式。

请注意，对于任何给定的可重用代码，无法确定它在堆栈展开期间永远不会被调用。无论您的代码做什么，您都无法确定它的某些用户是否不想从具有`try/catch`适当位置的析构函数调用它来处理其异常。因此，如果可以安全地抛出，则不能依赖`uncaught_exception`始终返回 true，除非通过记录函数，“不得从析构函数中调用”。如果您采用这种方式，那么所有调用者还必须记录他们的函数，“不得从析构函数中调用”，并且您有一个更烦人的限制。

除此之外，nothrow 保证对用户很有价值——如果他们知道他们所做的特定事情不会抛出，它可以帮助他们编写异常安全的代码。

一种出路是给你的类一个成员函数，如果它失败了，它`close`会调用并抛出。`trySomeCleanupOperation`然后析构函数调用`trySomeCleanupOperation`并记录或抑制错误，但不抛出。然后用户`close`如果想知道自己的操作是否成功就可以调用，如果不关心就让析构函数处理（包括析构函数被调用作为堆栈展开的一部分的情况，因为之前抛出了异常）接听用户的电话`close`）。“啊哈！”，你说，“但这违背了 RAII 的目的，因为用户必须记住打电话`close`！”。是的，有点，但问题不在于 RAII 是否可以做你想做的一切。它不能。问题是它是否*始终如一*做的比你想要的少（你希望它在`trySomeCleanupOperator`失败时抛出异常），或者在堆栈展开期间使用时做的不那么*令人惊讶。*

> 此外，为所有失败的断言抛出异常是我的单元测试方法的重要组成部分

这可能是一个错误——您的单元测试框架应该能够将 a`terminate()`视为测试失败。假设在堆栈展开期间断言失败 - 当然你想记录它，但你不能通过抛出异常来做到这一点，所以你把自己画到了一个角落。如果您的断言终止，那么您可以将它们检测为终止。

不幸的是，如果您终止，那么您将无法运行其余的测试（至少，不在该过程中）。但是，如果断言失败，那么一般来说，您的程序处于未知且可能不安全的状态。因此，一旦您的断言失败，您无论如何都不能*依赖*在该过程中做任何其他事情。您可以考虑将测试框架设计为使用多个进程，或者只是接受足够严重的测试失败将阻止其余测试运行。在测试框架的外部，您可以认为您的测试运行具有三种可能的结果“全部通过，失败，测试崩溃”。如果测试运行未能完成，那么您不会将其视为通过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T11:18:49.270

这就是标准对 dtors 和异常的规定：

> 15.2
> 
> (...)
> 
> 为在从 try 块到引发异常的点的路径上构造的自动对象调用析构函数的过程称为“堆栈展开”。如果在堆栈展开期间调用的析构函数以异常退出，则调用 std::terminate (15.5.1)。[**注意：所以析构函数通常应该捕获异常，而不是让它们传播到析构函数之外。——尾注**]

由于您提出了非常模棱两可的问题，因此答案取决于：

*   *您可以*在 dtor 中抛出异常以使应用程序不会崩溃吗？**是**的，你可以（在条款：它会编译，有时它会正确运行）。
*   *你应该*在 dtor 中抛出异常吗？**不**，你不应该，因为它可能（而且通常会）给你带来麻烦。

我想说，需要从 dtor 抛出异常是糟糕设计的标志。看起来，你在你的析构函数中做了一些事情，应该在其他地方做。

# c# - 解析对象的通用函数

> ID：15222289
> 
> 赞同：1
> 
> 时间：2013-03-05T11:10:44.180
> 
> 标签：c#, xml, parsing, generics

将字符串解析为从参数中获取的类型的最佳方法是什么？

我目前正在使用以下函数解析 XML 节点，但希望使其具有通用性。

```
 private void ParseSettings(XmlDocument doc)
    {
        IsFormVisible = (bool) ParseNode(doc, "Settings/IsFormVisible", IsFormVisible);
        UpdaterRunInterval = (int) ParseNode(doc, "Settings/UpdaterRunInterval", UpdaterRunInterval);
        UpdaterLastRunTime = (DateTime) ParseNode(doc, "Settings/UpdaterLastRunTime", UpdaterLastRunTime);
    }

    private object ParseNode(XmlDocument doc, string node, object defaultValue)
    {
        try
        {
            XmlNode xmlNode = doc.SelectSingleNode(node);
            if (xmlNode == null)
                return defaultValue;
            string text = xmlNode.InnerText;
            if (defaultValue is int)
                return int.Parse(text);
            if (defaultValue is bool)
                return bool.Parse(text);
            if (defaultValue is string)
                return text;
            if (defaultValue is DateTime)
                return DateTime.Parse(text);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        return defaultValue;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:27:00.700

```
private T ParseNode<T>(XmlDocument doc, string node, T defaultValue)
{
    try
    {
        XmlNode xmlNode = doc.SelectSingleNode(node);
        if (xmlNode == null)
            return defaultValue;
        string text = xmlNode.InnerText;
        return SafeConvert(text, defaultValue);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
    return defaultValue;
}

public static T SafeConvert<T>(string s, T defaultValue)
{
    if ( string.IsNullOrEmpty(s) )
        return defaultValue;
    return (T)Convert.ChangeType(s, typeof(T));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:17:32.673

尝试类似：

```
private static T ParseNode<T>(XmlDocument doc, string node, object defaultValue)
{
    object ret = defaultValue;
    try
    {

        XmlNode xmlNode = doc.SelectSingleNode(node);
        if (xmlNode == null)
            return default(T);
        string text = xmlNode.InnerText;
        if (defaultValue is int)
            ret = int.Parse(text);
        if (defaultValue is bool)
            ret =  bool.Parse(text);
        if (defaultValue is string)
            ret = text;
        if (defaultValue is DateTime)
            ret = DateTime.Parse(text);

        return (T) ret;
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
    return (T)ret;
} 
```

我不能保证，这是做到这一点的完美方式，但它的工作原理！

```
 IsFormVisible = ParseNode<bool>(doc, "Settings/IsFormVisible", true);
    UpdaterRunInterval = ParseNode<int>(doc, "Settings/UpdaterRunInterval", 1);
    UpdaterLastRunTime = ParseNode<DateTime>(doc, "Settings/UpdaterLastRunTime", 1); 
```

# php - 来自 unix 命令的 PHP CLI 错误

> ID：15222291
> 
> 赞同：0
> 
> 时间：2013-03-05T11:10:53.243
> 
> 标签：php, shell, unix, exec, command-line-interface

我正在编写 php 脚本，它将用于从“标准”站点创建站点。有很多 unix shell 命令，我发现了显示错误的问题。

示例：我需要检查站点文件夹是否不存在。

```
$ls_newsite = exec('ls /vhosts/'.$sitename, $output, $error_code);
if ($error_code == 0) {
    Shell::error('This site already exists in /vhosts/');
}
Shell::output(sprintf("%'.-37s",$sitename).'OK!'); 
```

所以，我可以处理错误，但无论如何它都会显示。

```
php shell.php testing.com

Checking site...
ls: cannot access /vhosts/testing.com: No such file or directory
testing.com.................................OK! 
```

如何防止显示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:23:27.180

您不需要这些 CLI 调用的输出，只需要错误代码。因此，将您的输出定向到`/dev/null`（否则 PHP 将打印任何内容，`stderr`除非您使用`proc_open`并为其中的每一个创建管道 - 矫枉过正）。

```
$ls_newsite = exec('ls /vhosts/' . $sitename . ' > /dev/null 2>&1', $output, $error_code); 
```

这将在不给你任何输出的情况下工作。

现在，关于其他一些问题：

**用于`escapeshellarg`您传递给 shell 命令的任何内容。** 编写相同代码的更好方法是：

```
$ls_newsite = exec(sprintf('ls %s > /dev/null 2>&1', escapeshellarg('/vhosts/' . $sitename)), $output, $error_code); 
```

**100% 确定您需要使用控制台命令。**`stat`大多数基于文件的控制台命令（ 、`file_exists`、等）都有 PHP 等效项，`is_dir`它们可以使您的代码更加安全*并*使其独立于平台。

# jquery - Jquery 问题：为什么我的代码不受 jquery 影响？

> ID：15222296
> 
> 赞同：0
> 
> 时间：2013-03-05T11:11:06.563
> 
> 标签：jquery, css

我现在正在学习 Jquery，我似乎无法在这个基本代码中解决我的错误。目标是当用户将鼠标悬停在“菜单项 2”上时显示下拉菜单。请有人帮我看看我的错误。以下是代码的链接，如果它在下面没有正确显示：http: [//www.door9.co.uk/nav.html](http://www.door9.co.uk/nav.html)

```
<style>
     ul          {list-style : none; padding : 0; width: 100%; }
     ul li       {display: inline;}
     li          {display : inline; margin-right : 20px; }
     li ul       {display : none; }
     li:hover ul {display : block; width: 145px; position: relative; left: 160px; }
</style>

<body> 
 <div>
   <ul>
    <li>Main list item one</li>
    <li>Main list item two &darr;
       <ul>
            <li>Sub list item one</li>
            <li>Sub list item two</li>
            <li>Sub list item three</li>
       </ul>
    </li>
    <li>Main list item three</li>
    <li>Main list item four</li>
   </ul><!-- UL close -->
 </div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1 jquery.min.js"></script>

<script>
  $(document).ready(function(){
    $('li').has('ul').hover(function(){
        $('li ul').slideToggle(function(){
          $('li ul').slideToggle();
        });
    });
  });
</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:32:59.400

线

```
li:hover ul {display : block; width: 145px; position: relative; left: 160px; } 
```

在您的 CSS 中可能会产生干扰。

下面的代码可能是您正在寻找的吗？

```
<html>
<head>  

  <style>
    ul    { list-style: none; padding: 0; width: 100%; }
    ul li { display: inline; }
    li    { display: inline; margin-right: 20px; }
    li ul { display: none; }
  </style>

</head>
<body>

  <ul>
    <li>Main list item one</li>
    <li>Main list item two &darr; 
      <ul>
        <li>Sub list item one</li>
        <li>Sub list item two</li>
        <li>Sub list item three</li>
      </ul>
    <li>Main list item three</li>
    <li>Main list item four</li>
  </ul>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>   

  <script>     
    $('li').has('ul').hover(function() {
      $(this).children('ul').slideToggle();
    }); 
  </script>

</body>
</html> 
```

如果您想设置样式，`li>ul`您可以将样式写入`li ul`选择器（不是`li:hover ul`），然后`hide()`在文档加载时在 jQuery 中使用。当您的查看器可能关闭或不可用 JavaScript 时，这也是一个很好的做法（因为在目前的情况下，`li>ul`如果 JavaScript 关闭，则永远不会显示）。

此外，选择器`li`似乎`ul li`是多余的，但我离题了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:24:26.590

1) [jQuery hover](http://api.jquery.com/hover/)方法有两个参数，mouseenter 事件处理程序和 mouseleave 事件处理程序。（你只有一个）

2）您似乎正在选择处理程序中的所有子菜单。很可能您只想要悬停的项目内的那个。

这可能更接近您想要实现的目标：

```
$("li").has("ul").hover(function () {
    $(this).find("ul").slideDown();
}, function () {
    $(this).find("ul").slideUp();
}); 
```

# javascript - 将 jquery 手风琴元素从一个手风琴移动到另一个手风琴

> ID：15222306
> 
> 赞同：2
> 
> 时间：2013-03-05T11:11:49.163
> 
> 标签：javascript, jquery, accordion

有点奇怪，这个。我有两个 jquery 手风琴实体，单击一个手风琴中的一个项目时，我想将其动态添加到第二个手风琴中，并将其隐藏在原始文件中。

目前，这在从 A 到 B 的移动以及从 B 到 A 的移动时效果很好，但是当我将一个项目移回原始手风琴时，任何后续从 A 到 B 的移动都会搞砸。

这是我的意思的 jsfiddle 示例[http://jsfiddle.net/waveydavey/CAYth/](http://jsfiddle.net/waveydavey/CAYth/)。注意我完全意识到代码很丑 - 我只是在学习这些东西。请随意提出10倍更好的方法。请执行下列操作：

*   运行小提琴。
*   单击每个项目的“+”以移动到手风琴 2
*   一切都很好。

现在这样做：

*   运行小提琴。
*   单击任何“+”以移动到第二个手风琴
*   单击移动项目上的“x”，它会重新出现在第一组中
*   单击任何“+”项以添加到第二组
*   手风琴项目的显示完全混乱

任何建议将不胜感激。

jsfiddle 代码是：

```
 $(function() {
 // create accordion entities
 $('#avAccordion').accordion({
        collapsible: true,
        autoHeight: false,
        active: false
    });
 $('#assignedAccordion').accordion({
        collapsible: true,
        autoHeight: false,
        active: false
    });
 $('.accordionAdd').click(function(){
        // destroy the accordion, prior to rebuilding
        $('#avAccordion').accordion('destroy');
        // get the h3 part and tweak it's contents
        var h3bit = $(this).parent().clone();
        $(h3bit).removeClass('freeContacts').addClass('assignedContacts');
        $(h3bit).children('span').removeClass('ui-icon-circle-plus accordionAdd').addClass('ui-icon-circle-close accordionDel');
        // get the div part after the h3
        var divbit = $(this).parent().next().clone();
        // rebuild original accordion
        $( "#avAccordion" ).accordion({
            collapsible: true,
            autoHeight: false,
            active: false
        });
        // move contents to other accordion
     $('#assignedAccordion').append(h3bit)
         .append(divbit)
         .accordion('destroy')
         .accordion({
            collapsible: true,
            autoHeight: false,
            active: false
        });
        // hide original accordion entry
        $(this).parent().hide();
        //attach click handler to new item
        $('.accordionDel').click(function(){
            dropAssignedContact(this);
            return false;
        })
        return false;
    });

    function dropAssignedContact(obj){
        // unhide right hand object with appropriate data-id attr
        var id = $(obj).parent().attr('data-id');
       // delete myself
        $(obj).parent().remove();
        // unhide original
        $('.freeContacts[data-id='+id+']').show();
        $('#assignedAccordion').accordion('destroy').accordion({
            collapsible: true,
            autoHeight: false,
            active: false
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:37:03.490

看到这个更新的小提琴：http: [//jsfiddle.net/KTWEd/](http://jsfiddle.net/KTWEd/)

```
function dropAssignedContact(obj){
    // unhide right hand object with appropriate data-id attr
    var id = $(obj).parent().attr('data-id'); 

   // delete myself
    $(obj).parent().next().remove();   // <---   Removes the adjacent div
    $(obj).parent().remove();

    // unhide original
    $('.freeContacts[data-id='+id+']').show();
    $('#assignedAccordion').accordion('destroy').accordion({
        collapsible: true,
        autoHeight: false,
        active: false
    });
 }
}); 
```

# c# - 如何通过 BinaryWriter 传递、编码和解码对象

> ID：15222309
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:11:58.477
> 
> 标签：c#, streaming

假设我有一个对象`Student s = new Student();`。

此外，我还有 BinaryWriter bw。

如何编码和解码（在 BinaryReader 上）非基本类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:46:31.563

使用[二进制序列化](http://msdn.microsoft.com/en-us/library/4abbf6k0.aspx)：

```
IFormatter formatter = new BinaryFormatter();
formatter.Serialize(bw.BaseStream, s); 
```

确保您的`Student`类型标记为`[Serializable]`.

# javascript - 过滤 JSON

> ID：15222312
> 
> 赞同：1
> 
> 时间：2013-03-05T11:12:18.303
> 
> 标签：javascript, json

我有一个像下面这样的 JSON

```
{
    "status": {
        "On Hold": true,
        "Completed": true,
        "Work In Progress": false,
        "Closed": false,
        "Initiation": false
    },
    "application": {
        "Athena":false,
        "EWindow":false,
        "EWS":true,
        "FACT":false,
        "FTP":false,
        "Hardware":false,
        "Harmony":true,
        "Hermes":false
    }
} 
```

我想过滤这个 json 以包含其值为 true 的项目，如下所示

```
{"status":"On Hold,Completed","application":"EWS,Harmony"} 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:14:52.890

```
var data = {"status":{"On Hold":true,"Completed":true,"Work In Progress":false,"Closed":false,"Initiation":false},"application":{"Athena":false,"EWindow":false,"EWS":true,"FACT":false,"FTP":false,"Hardware":false,"Harmony":true,"Hermes":false}}

var newData = {};
for(var prop in data){
     var subData = data[prop];
     var xs = [];
     for(var subProp in subData){
         if(subData[subProp] === true)
              xs.push(subProp);
     }
     newData[prop] = xs.join(',');
} 
```

# android - 在 Android 中失去连接时重新提交表单

> ID：15222317
> 
> 赞同：2
> 
> 时间：2013-03-05T11:12:28.793
> 
> 标签：android, forms, webview, form-submit

我正在尝试实现一个应用程序，它使用 WebView 来显示一个内部有表单的网站。问题是，当用户填写表单并在按下发送按钮之前，互联网连接丢失。在这种情况下，我收到 onErrorReceived 回调，这是我的实现：

```
@Override
public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
    mDisconnected = true;
    mDisconnectUrl = failingUrl;
    mWebView = view;
    mWebView.saveState(mWebViewState);
} 
```

所以我尝试在这里存储表单的内容和失败的 url，这样当连接再次建立时我可以继续发送它。所以我有另一个线程试图与服务器建立一个新的 Socket 连接，当它成功时，我在我的 WebViewClient 类 reconnect() 中调用一个函数：

```
void reconnect(Context appContext) {
    if (mDisconnected) {
        try {
            ((Activity) appContext).runOnUiThread(new Runnable() {
                public void run() {
                    mWebView.reload();
                    mWebView.restoreState(mWebViewState);
                }
            });
        } catch (Exception e) {
            mWebView.goBack();
        }
        mDisconnected = false;
    }
} 
```

所以我尝试重新加载并恢复表单数据，以便 WebView 可以继续其发送操作。问题是再次加载页面时，表单中输入的所有数据都丢失了，并且无法继续进行发送操作，在连接丢失之前已经单击了该操作。有任何想法，如何解决这个问题。

数据非常敏感，因此继续发送很重要。也可以让用户再次填写表单并再次发送，但在这种情况下不希望这样做。

**编辑：** 也许这个问题可以简化。是否有任何功能或方法可以在 WebViewClient 中刷新网站，该网站会从其离开的位置继续并将表单数据检索到问题发生之前的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:14:35.697

使用数据库存储表单的内容，然后通过服务发送数据。提交成功后删除数据库内容。

# android - FileInputStream fis.read() 给出异常

> ID：15222326
> 
> 赞同：0
> 
> 时间：2013-03-05T11:13:04.450
> 
> 标签：android

我想为此获得对 SD-CARD 的访问权限，我正在编写一些代码：

```
File f=Environment.getExternalStorageDirectory().getAbsolutePath();

//   f=/mnt/sdcard 

byte[] bytearray=new byte[4];

FileInputStream fis=new FileInputStream(f);

fis.read(bytearray,1,1);   //This line gives exception 
```

我不明白为什么这是一个例外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:17:17.380

您要读取的实际上不是文件，而是目录。

这就是您遇到异常的原因。

要列出目录内容，您应该使用`list()`File 对象上的方法。

# bash - 完全重置/重新加载 bash（别名和函数）

> ID：15222328
> 
> 赞同：4
> 
> 时间：2013-03-05T11:13:08.570
> 
> 标签：bash, unix, exec

我想在**注销 / 登录时**重置 shell，从头开始重新加载别名、函数。

**但不要谈论`source ~/.bashrc`也不`. ~/.bashrc`！**

为什么 ？因为`source`或者`.`只是用新的函数、别名等等来丰富当前的 shell。

* * *

仅供参考，您可以将此功能放在您的 bashrc 中：

```
function foo {
  echo "foo";
} 
```

然后做`source ~/.bashrc`or `. ~/.bashrc`。是的，**foo**正在工作。然后现在，编辑您的，并将*foo*`.bashrc`替换为*bar*，以获得：

 **```
function bar {
  echo "bar";
} 
```

您现在可以键入 foo，并看到**函数 foo 仍在工作**，尽管文件中不再存在它`.bashrc`。这就是我想说明的一点。

* * *

我`exec bash;`试过了，但它没有加载`.bashrc`文件。而且`exec bash;source ~/.bashrc;`显然不起作用，因为`exec`杀死当前进程（`source`从不调用）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T13:50:05.850

如OP所愿

```
bash --login 
```

注意：如果您在终端（xterm 等）内运行 bash，您还需要向`-ls`终端提供参数（或等效参数）。（例如`xterm -ls`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:55:15.660

编写以下脚本：

```
while true; do
    bash
    if [ $? -ne 123 ]; then
        break
    fi
done 
```

设置可执行位并将其设置为您的外壳。然后在你的添加一个别名`~/.bashrc`：

```
alias resetterm="exit 123" 
```

这只需要一个额外的 bash 进程一直运行。每次重置时，都会运行一个新的 bash，而旧的进程将结束。**

# controls - Windows Phone - 加载/保存面板

> ID：15222334
> 
> 赞同：0
> 
> 时间：2013-03-05T11:13:20.403
> 
> 标签：controls, windows-phone-8, windows-phone

我经常需要加载面板，它在全屏模式下显示一个不确定的进度条和一个文本块。我使用 Grid 执行此操作，并将可见性设置为可见。我不想将源代码从一页复制到另一页，而是想将其重新用作控件。我可以使用现有的控件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:58:14.720

如果要重用控件，创建自己的用户控件是最好的方法。Google上有很多指南，搜索“自定义用户控件silverlight”或类似的东西。

# event-handling - 不同的jQuery事件绑定方式

> ID：15222335
> 
> 赞同：0
> 
> 时间：2013-03-05T11:13:28.850
> 
> 标签：event-handling, jquery

这个符号的含义是什么：

```
$("#linka").click(function() {

   // some codes

}).fancybox({

   // some options

}); 
```

那和这些代码有什么区别：

```
$("#linka").click(function() {

   // some codes

});

$("#linka").fancybox({

   // some options

}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:15:46.890

最终结果将是相同的，但第二个代码片段对 jQuery 函数进行了不必要的调用以重新选择元素。大多数 jQuery 方法返回一个 jQuery 对象，具有相同或更新的元素集，允许之后调用其他 jQuery 方法。

它称为方法链，允许您选择元素一次并使用多种方法与它们交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:17:17.723

使用 jQuery，您可以链接方法，而不必每次都重新定义选择器。上面的两个代码示例都做同样的事情。第一种方法只是省略了对 jQuery 函数的不必要调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:23:58.527

两种方法都会得到相同的结果。链方法概念在这里与方法一一起应用。在这里您不必再次声明选择器。

在方法二中，您要声明选择器两次。链方法只允许您不一次又一次地声明选择器。您可以使用链方法绑定任意数量的方法。想象一下您希望为同一个选择器使用悬停方法。传统上，您将在其中三次声明具有相同选择器的 3 个方法。使用链方法：

```
$("#linka").click(function() {

 // method1

}).fancybox({

 // method2

 }).hover(function(){//method3
 },function(){
 }); 
```

# c# - Resharper 警告将枚举转换为 UIntPtr，但没有编译器警告

> ID：15222343
> 
> 赞同：5
> 
> 时间：2013-03-05T11:14:12.800
> 
> 标签：c#, resharper, resharper-7.1

在下面的代码中，Resharper 给了我一个警告`Cannot cast expression of type 'Color' to type 'UIntPtr'`：（实际上，Resharper 认为这是一个实际错误。）

但是，没有编译器警告，它工作正常。

对我来说，这看起来像是一个 Resharper 错误。是吗？还是编译器不担心它有什么不好的地方？（我正在使用 Resharper 7.1.1）

```
using System;

namespace Demo
{
    internal class Program
    {
        public enum Color { Red, Green, Blue }

        private static void Main(string[] args)
        {
            UIntPtr test = (UIntPtr) Color.Red; // Resharper warning, no compile warning.
        }
    }
} 
```

我可以通过先将值转换为 int 来消除警告，所以我有一个解决方法：

```
UIntPtr test = (UIntPtr)(int) Color.Red; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:22:57.273

> 对我来说，这看起来像是一个 Resharper 错误。是吗？

[是的](http://youtrack.jetbrains.com/issue/RSRP-78748)：

> **RSRP-78748 False '转换不存在' (UIntPtr)**
> 
> ```
> using System;
> 
> class A
> {
>     static void Main()
>     {
>         E? x = 0;
>         UIntPtr z = (UIntPtr)x;
>     }
> }
> enum E { } 
> ```
> 
> 这是一个已知的规格偏差。

截至 2013 年 3 月 5 日未修复。

# android - 创建数据库表

> ID：15222344
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:16.097
> 
> 标签：android, sql, database

我是 Android 新手，我想为我的应用创建一个包含 10 列的数据库表。我试图找到一些关于数据库的参考来创建一个表。但它没有用。请告诉我问题。这是我的 getter 和 setter 方法：

```
 public class Name {

    String name;
    String described;
    String da1;
    String da2;
    String da3;
    String da4;
    String da5;
    String da6;
    String da7;
    String da8;

    public Name()
    {

    }

    public Name(String name, String described, String da1,String da2,String da3,String  da4,String da5,String da6,String da7,String da8)
    {
        this.described = described;
        this.name = name;
        this.da1 = da1;
        this.da2 = da2;
        this.da3 = da3;
        this.da4 = da4;
        this.da5 = da5;
        this.da6 = da6;
        this.da7 = da7;
        this.da8 = da8;
    }
//-------------------------------------------   
    public String getName()
    {
    return this.name;
    }
    public void SetName(String name)
    {
    this.name = name;
    }
//--------------------------------------------  
    public String getDescribed()
   {
    return this.described;
    }
    public void SetDescribed(String described)
    {
    this.described = described;
    }
//---------------------------------------
public String getDa1()
{
    return this.da1;
}
public void SetDa1(String da1)
{
    this.da1 = da1;
}
//--------------------------------------------
public String getDa2()
{
    return this.da2;
}
public void SetDa2(String da2)
{
    this.da2 = da2;
}
//------------------------------------------
public String getDa3()
{
    return this.da3;
}
public void SetDa3(String da3)
{
    this.da3 = da3;
}
//-------------------------------------------------
public String getDa4()
{
    return this.da4;
}
public void SetDa4(String da4)
{
    this.da4 = da4;
}
//-------------------------------------------------
public String getDa5()
{
    return this.da5;
}
public void SetDa5(String da5)
{
    this.da5 = da5;
}
//-------------------------------------------------
public String getDa6()
{
    return this.da6;
}
public void SetDa6(String da6)
{
    this.da6 = da6;
}
//-------------------------------------------------
public String getDa7()
{
    return this.da7;
}
public void SetDa7(String da7)
{
    this.da7 = da7;
}
//-------------------------------------------------
public String getDa8()
{
    return this.da8;
}
public void SetDa8(String da8)
{
    this.da8 = da8;
}

} 
```

这是我的创建表方法：

```
 public class DataProvider extends SQLiteOpenHelper {

    // Database Version
    private static final int DATABASE_VERSION = 1;

      // Database Name
       private static final String DATABASE_NAME = "contactsManager";

      // Contacts table name
      private static final String TABLE = "contacts";

public DataProvider(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Contacts Table Columns names
private static final String KEY_NAME = "name";
private static final String KEY_DECRIBED = "described";
private static final String KEY_DA1 = "da1";
private static final String KEY_DA2 = "da2";
private static final String KEY_DA3 = "da3";
private static final String KEY_DA4 = "da4";
private static final String KEY_DA5 = "da5";
private static final String KEY_DA6 = "da6";
private static final String KEY_DA7 = "da7";
private static final String KEY_DA8 = "da8";

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE + "("
             +KEY_NAME + " TEXT,"
            + KEY_DECRIBED + " TEXT" 
            + KEY_DA1 + " TEXT"
            + KEY_DA2 + " TEXT"
            + KEY_DA3 + " TEXT"
            + KEY_DA4 + " TEXT"
            + KEY_DA5 + " TEXT"
            + KEY_DA6 + " TEXT"
            + KEY_DA7 + " TEXT"
            + KEY_DA8 + " TEXT"+ ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + TABLE);

    // Create tables again
    onCreate(db);
}

public void addContact(Name contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_DECRIBED, contact.getDescribed());
    values.put(KEY_DA1, contact.getDa1());
    values.put(KEY_DA2, contact.getDa2());
    values.put(KEY_DA3, contact.getDa3());
    values.put(KEY_DA4, contact.getDa4());
    values.put(KEY_DA5, contact.getDa5());
    values.put(KEY_DA6, contact.getDa6());
    values.put(KEY_DA7, contact.getDa7());
    values.put(KEY_DA8, contact.getDa8());
    // Contact Described

    // Inserting Row
    db.insert(TABLE, null, values);
    db.close(); // Closing database connection
}

 // Getting single contact
public Name getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE, new String[] {
            KEY_NAME, KEY_DECRIBED,KEY_DA1,KEY_DA2,KEY_DA3,KEY_DA4,KEY_DA5,KEY_DA6,KEY_DA7,KEY_DA8 },
            null, new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Name contact = new Name(
            cursor.getString(0),
            cursor.getString(1),
            cursor.getString(2), 
            cursor.getString(3), 
            cursor.getString(4), 
            cursor.getString(5),
            cursor.getString(6), 
            cursor.getString(7), 
            cursor.getString(8), 
            cursor.getString(9));
    // return contact
    return contact;
}

public List<Name> getAllContacts() {
    List<Name> contactList = new ArrayList<Name>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Name contact = new Name();

            contact.SetName(cursor.getString(0));
            contact.SetDescribed(cursor.getString(1));
            contact.SetDa1(cursor.getString(2));
            contact.SetDa2(cursor.getString(3));
            contact.SetDa3(cursor.getString(4));
            contact.SetDa4(cursor.getString(5));
            contact.SetDa5(cursor.getString(6));
            contact.SetDa6(cursor.getString(7));
            contact.SetDa7(cursor.getString(8));
            contact.SetDa8(cursor.getString(9));

            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    // return contact list
    return contactList;
}

// Getting contacts Count
public int getContactsCount() {
    String countQuery = "SELECT  * FROM " + TABLE;
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(countQuery, null);
    cursor.close();

    // return count
    return cursor.getCount();
}
} 
```

这是 Logcat：

```
03-05 18:31:45.575: D/dalvikvm(378): GC_FOR_ALLOC freed 36K, 5% free 6323K/6595K,     paused 81ms
03-05 18:31:45.615: I/dalvikvm-heap(378): Grow heap (frag case) to 7.696MB for 1536016-    byte allocation
03-05 18:31:45.716: D/dalvikvm(378): GC_FOR_ALLOC freed <1K, 4% free 7823K/8135K,     paused 74ms
03-05 18:31:45.875: D/dalvikvm(378): GC_CONCURRENT freed <1K, 4% free 7823K/8135K,     paused 5ms+3ms
03-05 18:31:46.145: D/dalvikvm(378): GC_FOR_ALLOC freed <1K, 4% free 7824K/8135K, paused 63ms
03-05 18:31:46.165: I/dalvikvm-heap(378): Grow heap (frag case) to 8.347MB for 682256- byte allocation
03-05 18:31:46.265: D/dalvikvm(378): GC_FOR_ALLOC freed 0K, 4% free 8490K/8839K, paused 89ms
03-05 18:31:46.545: D/dalvikvm(378): GC_CONCURRENT freed 1538K, 21% free 7014K/8839K, paused 5ms+6ms
03-05 18:31:46.665: D/dalvikvm(378): GC_FOR_ALLOC freed 52K, 20% free 7087K/8839K, paused 61ms
03-05 18:31:46.885: D/dalvikvm(378): GC_CONCURRENT freed <1K, 15% free 7588K/8839K, paused 12ms+4ms
03-05 18:31:46.975: W/fbzvbx(378): afgsfbvzvbaergafbz
03-05 18:31:46.985: W/fbzvbx(378): afgsfbvzvbaergafbz1
03-05 18:31:46.985: W/fbzvbx(378): afgsfbvzvbaergafbz2
03-05 18:31:47.135: I/SqliteDatabaseCpp(378): sqlite returned: error code = 1, msg =  table contacts has no column named da7,  db=/data/data/com.djcharon.Locker/databases/contactsManager
03-05 18:31:47.155: E/SQLiteDatabase(378): Error inserting da7=l da8=; da5=j da6=k name=a da3=g da4=h da1=d da2=f described=s
03-05 18:31:47.155: E/SQLiteDatabase(378): android.database.sqlite.SQLiteException: table contacts has no column named da7: , while compiling: INSERT INTO contacts(da7,da8,da5,da6,name,da3,da4,da1,da2,described) VALUES (?,?,?,?,?,?,?,?,?,?)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:146)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:367)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:253)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:111)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at  android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1737)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1610)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at com.djcharon.Locker.DataProvider.addContact(DataProvider.java:87)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at com.djcharon.Locker.LockScreen.onCreate(LockScreen.java:108)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.Activity.performCreate(Activity.java:4397)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.os.Looper.loop(Looper.java:132)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invokeNative(Native Method)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invoke(Method.java:491)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-05 18:31:47.155: E/SQLiteDatabase(378):  at dalvik.system.NativeStart.main(Native Method)
03-05 18:31:47.225: I/SqliteDatabaseCpp(378): sqlite returned: error code = 1, msg = table contacts has no column named da7, db=/data/data/com.djcharon.Locker/databases/contactsManager
03-05 18:31:47.245: E/SQLiteDatabase(378): Error inserting da7=ly da8=;u da5=jg da6=kh name=as da3=ge da4=hu da1=df da2=ft described=sd
03-05 18:31:47.245: E/SQLiteDatabase(378): android.database.sqlite.SQLiteException: table contacts has no column named da7: , while compiling: INSERT INTO contacts(da7,da8,da5,da6,name,da3,da4,da1,da2,described) VALUES (?,?,?,?,?,?,?,?,?,?)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:146)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:367)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:253)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:111)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1737)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1610)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at com.djcharon.Locker.DataProvider.addContact(DataProvider.java:87)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at com.djcharon.Locker.LockScreen.onCreate(LockScreen.java:109)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.Activity.performCreate(Activity.java:4397)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.os.Looper.loop(Looper.java:132)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invokeNative(Native Method)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invoke(Method.java:491)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-05 18:31:47.245: E/SQLiteDatabase(378):  at dalvik.system.NativeStart.main(Native Method)
03-05 18:31:47.275: I/SqliteDatabaseCpp(378): sqlite returned: error code = 1, msg = table contacts has no column named da7, db=/data/data/com.djcharon.Locker/databases/contactsManager
03-05 18:31:47.295: E/SQLiteDatabase(378): Error inserting da7=lty da8=;yu da5=jrg da6=keh name=ads da3=gje da4=hyu da1=dfg da2=fht described=sfd
03-05 18:31:47.295: E/SQLiteDatabase(378): android.database.sqlite.SQLiteException: table contacts has no column named da7: , while compiling: INSERT INTO contacts(da7,da8,da5,da6,name,da3,da4,da1,da2,described) VALUES (?,?,?,?,?,?,?,?,?,?)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:146)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:367)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:253)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:111)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1737)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1610)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at com.djcharon.Locker.DataProvider.addContact(DataProvider.java:87)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at com.djcharon.Locker.LockScreen.onCreate(LockScreen.java:110)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.Activity.performCreate(Activity.java:4397)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at android.os.Looper.loop(Looper.java:132)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at     android.app.ActivityThread.main(ActivityThread.java:4123)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invokeNative(Native Method)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at java.lang.reflect.Method.invoke(Method.java:491)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-05 18:31:47.295: E/SQLiteDatabase(378):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:21:48.190

您的创建表查询似乎正在创建问题尝试：

```
String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE + "("
         +KEY_NAME + " TEXT,"
        + KEY_DECRIBED + " TEXT," 
        + KEY_DA1 + " TEXT,"
        + KEY_DA2 + " TEXT,"
        + KEY_DA3 + " TEXT,"
        + KEY_DA4 + " TEXT,"
        + KEY_DA5 + " TEXT,"
        + KEY_DA6 + " TEXT,"
        + KEY_DA7 + " TEXT,"
        + KEY_DA8 + " TEXT"+ ");"; 
```

# java - WebService 客户端未使用 HTTPS 连接到 WebService 服务器

> ID：15222345
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:20.610
> 
> 标签：java, web-services, https, jboss, jax-ws

我在 JBoss AS7.1 中部署了一个需要使用 HTTPS 的 WebService。我以这种方式在服务器上配置了standalone.xml：

```
 <subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
        <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http" redirect-port="8443"/>
        <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
            <ssl name="server-ssl" key-alias="server" password="secret" certificate-key-file="../standalone/configuration/server.keystore" protocol="TLSv1" verify-client="false"/>
        </connector>
        <virtual-server name="default-host" enable-welcome-root="true">
            <alias name="localhost"/>
            <alias name="example.com"/>
        </virtual-server>
    </subsystem>

<socket-binding name="http" port="8080"/>
<socket-binding name="https" port="8443"/> 
```

密钥库位于正确的位置，我已添加到我的 web.xml 中：

```
<security-constraint>
     <web-resource-collection>
         <web-resource-name>HTTPS Test</web-resource-name>
         <url-pattern>/*</url-pattern>
     </web-resource-collection>
     <user-data-constraint>
         <transport-guarantee>CONFIDENTIAL</transport-guarantee>
     </user-data-constraint>
</security-constraint> 
```

WebService 正在工作并使用 HTTPS，实际上我可以通过从 Web 浏览器访问 URL 来验证它。

我的问题是客户端，它部署在另一个 JBoss AS 7.1 上，但无法正常工作。我已经从 wsdl 创建了客户端，并修改了 WebServicesService 类的第一部分，以便使用 https：

```
@WebServiceClient(name = "WebServicesService", 
wsdlLocation = "https://192.168.1.104:8443/Server/WebServices?wsdl",
targetNamespace = "http://webservices.foo.it/") 
@HandlerChain(file="to-server-handler-chain.xml")

public class WebServicesService extends Service {

public final static URL WSDL_LOCATION;

public final static QName SERVICE = new QName("http://webservices.foo.it/", "WebServicesService");
public final static QName WebServicesPort = new QName("http://webservices.foo.it/", "WebServicesPort");
static {
    URL url = null;
    try {
        url = new URL("https://192.168.1.104:8443/Server/WebServices?wsdl");
    } catch (MalformedURLException e) {
        java.util.logging.Logger.getLogger(WebServicesService.class.getName())
        .log(java.util.logging.Level.INFO, 
                "Can not initialize the default wsdl from {0}", "file");
    }
    WSDL_LOCATION = url;
}

public WebServicesService(URL wsdlLocation) {

    super(wsdlLocation, SERVICE);
}

public WebServicesService(URL wsdlLocation, QName serviceName) {
    super(wsdlLocation, serviceName);
}

public WebServicesService() {
    super(WSDL_LOCATION, SERVICE);
}

//This constructor requires JAX-WS API 2.2\. You will need to endorse the 2.2
//API jar or re-run wsdl2java with "-frontend jaxws21" to generate JAX-WS 2.1
//compliant code instead.
public WebServicesService(WebServiceFeature ... features) {
    super(WSDL_LOCATION, SERVICE, features);
}

//This constructor requires JAX-WS API 2.2\. You will need to endorse the 2.2
//API jar or re-run wsdl2java with "-frontend jaxws21" to generate JAX-WS 2.1
//compliant code instead.
public WebServicesService(URL wsdlLocation, WebServiceFeature ... features) {
    super(wsdlLocation, SERVICE, features);
}

//This constructor requires JAX-WS API 2.2\. You will need to endorse the 2.2
//API jar or re-run wsdl2java with "-frontend jaxws21" to generate JAX-WS 2.1
//compliant code instead.
public WebServicesService(URL wsdlLocation, QName serviceName, WebServiceFeature ... features) {
    super(wsdlLocation, serviceName, features);
}

/**
 *
 * @return
 *     returns WebServices
 */
@WebEndpoint(name = "WebServicesPort")
public WebServices getWebServicesPort() {
    return super.getPort(WebServicesPort, WebServices.class);
}

/**
 * 
 * @param features
 *     A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.
 * @return
 *     returns WebServices
 */
@WebEndpoint(name = "WebServicesPort")
public WebServices getWebServicesPort(WebServiceFeature... features) {
    return super.getPort(WebServicesPort, WebServices.class, features);
} 
```

}

当我尝试建立第一个连接时，客户端 JBoss 打印：

```
[org.jboss.wsf.stack.cxf.resolver.JBossWSResourceResolver] (http--192.168.1.102-8080-1) Cannot open stream for resource: https://192.168.1.104:8433/Server/WebServices?wsdl 
```

然后是例外：

```
[org.jboss.ws.common.invocation.InvocationHandlerJAXWS] (http--192.168.1.102-8080-1) Method invocation failed with exception: null: java.lang.reflect.InvocationTargetException
Caused by: javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
Caused by: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'https://192.168.1.104:8443/Server/WebServices?wsdl'.: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

导致我的客户端不使用 HTTPS 连接到服务器的问题可能是什么？

# php - 如何将数组信息转换为 php 中的语句？

> ID：15222347
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:21.790
> 
> 标签：php, arrays, xhtml, arraylist

我正在研究假设比较产品的网站。所以我已经达到了以下数组

```
Array ( [iPhone 4 8GB Black] => 319 [iPhone 4S] => 449 [iphone 5] => 529 ) 
```

数组的键是产品名称，数组的值是价格。现在我想把这个数组翻译成这样的语句

iphone 4 8GB 黑色最便宜！

iPhone 48GB Black 比 iPhone 4S 便宜 130 英镑（计算：449-319）。

iPhone 48GB Black 比 iPhone 5 便宜 210 英镑（计算：529-319）。

iPhone 4S 比 iPhone 5 便宜 80 英镑（计算：529-449）。

iphone 5 是您选择的列表中最昂贵的产品。

请帮助我如何从数组中输出这些语句。您建议在比较方面用这个数组做其他事情也很好。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:26:31.407

首先，您必须对数组进行排序`asort`（以保持索引和值之间的关联，并对值进行排序）。

```
asort($yourArray); 
```

然后，当您的数组被排序时，您可以隔离价格和名称。

```
$names = array_keys($yourArray);
$prices = array_values($yourArray); 
```

此时，您有 2 个数字索引数组，其中包含您的标签和价格，并且这 2 个数组是同步的。

最后，您只需从 0 循环到数组的长度（其中一个，其大小相同）并制作您的过程：

```
for($i = 0 ; $i < count($names) ; $i++)
{
    if ($i == 0)
    {
        // First product -> cheapest
        echo "The product " . $names[$i] . " is cheapest";
    }
    else if ($i == (count($names) - 1))
    {
        // Last product, the most expensive
        echo "The product " . $names[$i] . " is the most expensive product of the list";
    }
    else
    {
        // calculate the diff between current product and first product
        $diff = $price[$i] - $price[0];
        echo "The product " . $names[$i] . " is " . $diff . " more expensive than " . $names[0];
    }
} 
```

此示例与第一个产品进行了比较。

如果你需要所有组合，它有点复杂，你必须做一个双循环：

```
// Hard print the first product
echo "The product " . $names[0] . " is the cheapest";

// Make all possible comparisions
for($j = 0 ; $j < (count($names) - 1) ; $j++)
{
    for($i = ($j+1) ; $i < count($names) ; $i++)
    {
        // calculate the diff between current product and first product
        $diff = $price[$i] - $price[$j];
        echo "The product " . $names[$i] . " is " . $diff . " more expensive than " . $names[$j];
    }
}

// Hard print the last product
echo "The product " . $name[count($names) - 1] . " is the more expensive"; 
```

# powershell - 通过远程会话设置 Outlook 默认签名

> ID：15222356
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:38.350
> 
> 标签：powershell, outlook, powershell-2.0

我希望有人知道我如何解决以下问题。

我们公司有XP和Win7客户端。客户端有 Office 2003、Office XP 和 Office 2010。

## 先问一个问题：

是否可以在 Windows XP 上添加 .ps1 启动脚本？也许与：%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe script.ps1 客户端上的执行策略：远程签名（没有可用的证书！）

如果 1 是可能的：将 \Servername\Netlogon\OutlookSignature\%Username%_CompanySigFolder Path 的内容复制到以下路径 C:\Users\%Username%\AppData\Roaming\Microsoft\Signatures\DefaultCompanySignatureName

如果 1 不可能：我将在将文件复制到 %appdata%.... 之前 1 天运行正常的 .cmd 启动脚本。

## 现在真正的问题：

复制文件后，**是否可以将新签名设置为用户默认 Outlook 签名？** 我读过它可能会通过注册表项，但没有找到详细信息。

我通过 PS-Remoting 获得了对域中所有计算机的完全访问权限。如果 Outlook 会话处于活动状态，这会起作用吗？

脚本必须区分 XP 和 Win7 以及 Office XP、2003 和 2010。

提前致谢！丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-11T22:50:27.813

```
#Set the signature as default for new emails
$MSWord = New-Object -ComObject word.application
$EmailOptions = $MSWord.EmailOptions
$EmailSignature = $EmailOptions.EmailSignature
$EmailSignature.NewMessageSignature = “name of signature” #insert the signature name
$MSWord.Quit() 
```

# asp.net - 将集合绑定到 Gridview

> ID：15222358
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:43.550
> 
> 标签：asp.net, generics, gridview, collections

```
protected void BindGV()
        {
            List<List<string>> list = new List<List<string>>()
            {
                new List<string>() {"Hussain","IT","Hyderabad" },
                new List<string>() { "Sharief","IT","Bangalore"},
                new List<string>() { "Shaik","IT","Chennai"}
            };
            gv1.DataSource = list;
            gv1.DataBind();

        } 
```

我只想在 Gridview 中显示名称和城市。我想像这样使用：

```
<asp:Boundfield Datafield="" Headertext="Name"/> 
```

在这种情况下如何使用 DataField ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:17:50.443

首先，您应该使用某个类而不是字符串创建一个列表。然后，您可以将 DataGrid 中的类属性用作列。

例如：

```
public class Personnel
{
    public string Name { get; set; }
    public string Department { get; set; }
    public string Location { get; set; }
} 
```

然后您可以创建一个数据源，例如：

```
protected void BindGV()
{
    List< Personnel > list = new List< Personal >()
    {
        new Personnel {Name = "Hussain", Department = "IT", Location = "Hyderabad" },
        new Personnel {Name = "Sharief", Department = "IT", Location = "Bangalore"},
        new Personnel {Name = "Shaik",  Department = "IT", Location = "Chennai"}
    };

    gv1.DataSource = list;
    gv1.DataBind();

} 
```

在您后面的代码中创建 DataGrid 之类的

```
<asp:DataGrid runat="server" ID="gv1" AutoGenerateColumns="False>
    <Columns>
        <asp:BoundColumn HeaderText="Name" DataField="Name" />
        <asp:BoundColumn HeaderText="Dept" DataField="Department" />
        <asp:BoundColumn HeaderText="City" DataField="Location" />
    </Columns>
</asp:DataGrid> 
```

应该就是这样。

更新：根据您的评论，您希望以`DataField`编程方式访问。您可以通过枚举`gv1.Columns`属性然后将结果转换为`BoundColumn`. 这将使您可以访问`DataField`和其他属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:22:29.750

正如 Husein 所说，首先使用 Get ， Set 创建类。喜欢

```
Public class BindGV
{
    public string name { get; set ;}
    public string Profile { get; set ;}
    public string loc { get; set ;}
} 
```

在 aspx 页面 Gridview BoundField....

```
<ItemTemplate..>
    <b><%# DataBinder.Eval(Container, "DataItem.Title") %> </b>
    <br />
    <%# DataBinder.Eval(Container, "DataItem.Description") %>
</ItemTemplate> 
```

... 或 Apsx.cs 代码

```
BindGV.datasource=object.GetDetails();
BindGV.dataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:46:38.357

您可以利用 linq

```
List<List<string>> list = new List<List<string>>()
                              {
                                 new List<string>() {"Hussain", "IT", "Hyderabad"},
                                 new List<string>() {"Sharief", "IT", "Bangalore"},
                                 new List<string>() {"Shaik", "IT", "Chennai"}
                              }; 
```

linq 查询

```
var v = from li in list select new {Name = li[0], City=li[2]};
gv1.DataSource = v;
gv1.DataBind(); 
```

和gridview

```
<asp:DataGrid runat="server" ID="gv1" AutoGenerateColumns="False>
  <Columns>
    <asp:BoundColumn HeaderText="Name" DataField="Name" />
    <asp:BoundColumn HeaderText="City" DataField="City" />
 </Columns>
</asp:DataGrid> 
```

但这不是一个好主意。
正如两位绅士所建议的那样，您应该拥有适当的财产结构。

# c# - C# 中的 Outlook 加载项（保存附件并将对已保存文件路径的 url 引用添加为附件）

> ID：15222360
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:52.037
> 
> 标签：c#, winforms, com, outlook-addin, outlook-2007

我正在使用 VS 2010 和 Dot Net Framework 2.0。我在 Extensibility->Shared Add-ins for Outlook 中创建了一个项目。我想在我的硬盘中保存一个文件（任何文件），删除该附件并将该文件的路径添加为附件，如果用户单击此文件，它应该在我的硬盘中打开该保存的文件。我可以保存文件，删除附件，但我无法将文件的路径保存为附件这是为保存和删除而编写的代码

```
 if (item is Outlook.MailItem)
                {
                    Outlook.MailItem mi = (Outlook.MailItem)item;
                    if (mi != null)
                    {                            
                        for (int i = 1; i <= mi.Attachments.Count; i++)
                        {
                            string FilePath = @"" + Settings.Default.browseFolderPath + @"\" +
                                mi.Attachments[i].FileName;
                            mi.Attachments[i].SaveAsFile(FilePath);                                
                            mi.Attachments.Remove(i);                                
                            mi.Attachments.Add(creatingLinkToFile(FilePath), Type.Missing, i, Type.Missing);
                            mi.Save();
                        }                           
                    }
                } 

    private string creatingLinkToFile(string url)
    {
        string lnkPath =@"C:\shortcut.lnk";
        WshShellClass shell = new WshShellClass();           
        IWshShortcut shortcut = (IWshShortcut)shell.CreateShortcut(lnkPath);
        shortcut.TargetPath = @"" + url;
        shortcut.Description = "Trial";
        shortcut.Save();
        return lnkPath;
    } 
```

请任何人都可以给我和想法，因为我使用了 lnk 文件，但这对前景不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:34:01.150

您可以使用具有 olByReference 的 Enumeration OlAttachmentType ，如下所示并完成。

```
mi.Attachments.Add(""+[path of file to Attach Reference], OlAttachmentType.olByReference, i, Type.Missing); 
```

# php - TinyMCE 的 HTML 问题

> ID：15222363
> 
> 赞同：0
> 
> 时间：2013-03-05T11:14:57.367
> 
> 标签：php, html, tinymce

我使用 TinyMCE 发布博客文章。现在我想以纯文本形式发布**以下**内容，而不是 HTML：

```
<ul>
<li><a href="#">Title goes here</a></li>
</ul> 
```

当我仅切换到 HTML 时，代码将转换为（我猜应该这样做？）：

```
<p>&lt;ul&gt;<br />&lt;li&gt;&lt;a href="#"&gt;Title goes here&lt;/li&gt;<br />&lt;/ul&gt;</p> 
```

但是，当我发布博客文章时，结果是：

*   [标题在这里](http://example.com)

只是要明确一点：它不会显示为所见即所得，而是显示为 HTML 执行。

**tinyMCE.init** [http://jsfiddle.net/rmGuB/](http://jsfiddle.net/rmGuB/)

任何解决方案和想法都会非常有帮助。

PHP 用于执行博客文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:34:49.507

您可以在微型 MCE 中完全关闭 HTML 解析，但在那里它会毫无用处。您的标记无效（您正在使用 [/link] 关闭 [li] 元素。这不仅是无效的 XHTML，还是无效的 HTML。是拼写错误，还是您尝试存储无效内容是有原因的? 如果您能提供更多信息，可能有更好的方法来处理内容。

# python - 对列表中的元素进行编号

> ID：15222365
> 
> 赞同：1
> 
> 时间：2013-03-05T11:15:08.417
> 
> 标签：python, list

我有一个清单：

[1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1]

我想打印值大于 2 的列表的所有元素，但也打印列表中的位置，我可以自己打印元素：

```
for bonds in number_of_bonds:       
    if bonds >= 2:
         print bonds 
```

但是，如果我使用 enumerate 它将代替打印列表中的所有项目及其位置，如下所示：

```
(0, 1)
(1, 1)
(2, 3) 
```

ETC

那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:16:22.417

对于你的问题，你可以做

```
[(i, j) for i,j in enumerate(l) if j > 2] 
```

输出：

```
[(2, 3),
 (3, 3),
 (4, 3),
 (5, 3),
 (6, 3),
 (7, 3),
 (8, 3),
 (9, 3),
 (10, 3),
 (11, 3),
 (12, 3),
 (13, 3),
 (14, 3),
 (15, 3)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T11:17:43.623

```
lst = [1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1]
print [(i, e) for (i, e) in enumerate(lst) if e > 2]

[(2, 3),
 (3, 3),
 (4, 3),
 (5, 3),
 (6, 3),
 (7, 3),
 (8, 3),
 (9, 3),
 (10, 3),
 (11, 3),
 (12, 3),
 (13, 3),
 (14, 3),
 (15, 3)] 
```

* * *

如果您的列表很大，更好的方法是使用[生成器](http://docs.python.org/2/tutorial/classes.html#generators)通过动态`()`生成每个元素，而不是在内存中一次生成所有元素：

```
result = ((i, e) for (i, e) in enumerate(lst) if e > 2)

for i in result:
    print i 
```

那么输出将是：

```
(2, 3)
(3, 3)
(4, 3)
(5, 3)
(6, 3)
(7, 3)
(8, 3)
(9, 3)
(10, 3)
(11, 3)
(12, 3)
(13, 3)
(14, 3)
(15, 3) 
```

请注意，生成器只能读取一次，这意味着如果您`result`再次循环，则不会打印任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:20:11.323

您可以只添加一个变量 i，每次循环再次开始时都会计数 +1。

```
i = 0
for bonds in number_of_bonds:       
     if bonds >= 2:
     print bonds
     print i
     i += 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:21:11.210

```
for i in range(len(number_of_bonds)):
    if number_of_bonds[i] >= 2:
        print i, number_of_bonds[i] 
```

为什么不在 for 循环中使用计数器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:25:33.963

因此，如果您想打印**原始**列表中的位置（之前进行任何过滤），这是我认为您想要做的，那么首先枚举项目然后，对于每个项目，过滤掉那些不感兴趣的。否则，如果您想打印元素在新过滤列表中的位置，那么 kunev 答案是正确的。这是我的意思的代码：

```
for i,bond in enumerate(number_of_bonds):
    if bond >=2:
        print (i,bond) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T11:17:58.150

```
lst = [1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1]
print [(i, e) for (i, e) in enumerate(lst) if e > 2] 
```

抱歉，我之前是用 c 语言写的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T11:18:32.790

对清单做一个理解

```
interesting_bonds = [index, bonds for index, bonds in enumerate(number_of_bonds) if bonds > 2]
for bonds in interesting_bonds:
    print bonds 
```

列表推导是获取您感兴趣的元素的更“pythonic”的方式。您也可以使用内置的`filter`.

**编辑**：正如乔恩在下面的评论中指出的那样，过滤后的枚举不会从原始列表中给出正确的索引。因此，只需对枚举列表进行理解即可。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T11:23:45.553

功能风格：

```
filter(lambda (a,b): b >= 2, enumerate(L)) 
```

结果：

```
[(2, 3), (3, 3), (4, 3), (5, 3), (6, 3), (7, 3), (8, 3), (9, 3), (10, 3), (11, 3), (12, 3), (13, 3), (14, 3), (15, 3)] 
```

这使用[`enumerate`function](http://docs.python.org/2/library/functions.html#enumerate)和[`filter`function](http://docs.python.org/2/library/functions.html#filter)。

# iis-7 - 在 www 和非 www 上重写 URL

> ID：15222367
> 
> 赞同：1
> 
> 时间：2013-03-05T11:15:17.950
> 
> 标签：iis-7, url-rewriting

我在 IIS 中有一些规则将传入请求重定向到具有文件扩展名的页面，例如 mysite.com/hello/ 被定向到 www.mysite.com/hello.aspx

我有一条适合斜杠的规则，所以我不会以 www.mysite.com/hello/.aspx 结尾

这很好，但它不适用于以 www 开头的请求，所以 www.mysite.com/hello 保持不变

我尝试为匹配模式 www* 的任何内容添加附加规则，但似乎不起作用。

非常感谢任何建议

```
<rule name="Remove trailing slash" stopProcessing="false">
                <match url="(.*)/$" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="{R:1}" />
            </rule>
            <rule name="AddASPX" enabled="true">
                <match url=".*" negate="false" />
                <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    <add input="{URL}" pattern="(.*)\.(.*)" negate="true" />
                </conditions>
                <action type="Rewrite" url="{R:0}.aspx" />
            </rule> 
```

# objective-c - xcode 中的库中缺少 libicucore.A.dylib、libz.1.2.5.dylib、libstdc++.dylib

> ID：15222371
> 
> 赞同：0
> 
> 时间：2013-03-05T11:15:41.143
> 
> 标签：objective-c, ios5, xcode4.3

在我的 xcode 4.3 中，缺少库文件 libz.1.2.5.dylib、libstdc++.dylib、libicucore.A.dylib 等。当我单击带有库的链接二进制文件时，这些文件没有被列出。如果它应该怎么办被别人删了？请提出一些解决方案？

# javascript - 什么解决方案可用于在客户网站中插入 javascript 以跟踪各种统计信息？

> ID：15222375
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:15:57.383
> 
> 标签：javascript, scalable, ironmq

我想在客户网站中插入一段 javascript 来跟踪各种统计信息（如 crazyegg、intercom.io），但与流量相关。

我正在考虑使用 IronMQ，但我不知道如何直接从 Javascript 调用它，而且我担心从每天有数万访问者的网站向我的服务器（3Gb Ram）发出请求会削弱服务器同时发出过多的 javascript 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:28:47.697

您可以通过 HTTPS API 调用 IronMQ。

有关详细信息，请参阅[IronMQ REST/HTTPS API](http://dev.iron.io/mq/reference/api/)。

当然，您需要向 JavaScript 代码提供项目 ID 和令牌。我建议在将 Token 放入 JS/HTML 之前加密它并在页面加载或使用 API 之前解密。

欢迎[Iron.io 在线聊天](http://get.iron.io/chat)，即使您需要更多信息。

**更新：**目前看来行不通。因为跨域限制。但我们正在努力，所以，保持联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:21:01.873

您需要随时进行优化。如果您发现 CPU 有问题，请针对该问题进行优化。如果您发现内存有问题，请针对带宽等进行优化。这完全取决于

*   您的要求
*   你的资源。

优化几乎总是开发过程的最后一步。

您可能只是让人们包含一个 1x1 像素的图像，您可能让他们包含一个 iframe，或者您可能让他们包含一个在您的服务器上运行的 javascript 文件。或者您可能让他们在他们的服务器上包含一个 javascript 文件。您需要问自己的更多问题可能是您想要什么信息，存在哪些安全问题等。如果这是出于他们目的的信息，那么您无需担心他们伪造它。否则，你会的。

# java - 如何在使用 ANT 运行类或套件中的所有测试时打印当前正在执行的 JUnit 测试方法？

> ID：15222376
> 
> 赞同：3
> 
> 时间：2013-03-05T11:16:04.187
> 
> 标签：java, junit, ant, junit4

我有一组 JUnit 测试用例，我使用[junit](http://ant.apache.org/manual/Tasks/junit.html)任务从 ANT 执行它们。在执行测试时，在控制台中我只能看到当前正在运行的测试用例（即 Java 类），而不是测试方法。有没有办法可以打印当前正在执行的测试方法？或者除了拥有自己的 JUnit 测试运行器之外，还有其他方法可以做到这一点吗？

示例控制台输出

```
[junit] Running examples.TestCase1
[junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 2.835 sec 
```

相反，我希望得到像

```
[junit] Running examples.TestCase1
[junit] Running examples.TestCase1.test1
[junit] Running examples.TestCase1.test2
[junit] Running examples.TestCase1.test3
[junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 2.835 sec 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-26T13:06:06.030

不幸的是，没有很好的方法可以连接到 JUnit。对于使用 TDD 开发的框架，它的敌意令人吃惊。

使用 a`@Rule`代替：

```
import org.junit.rules.TestWatcher;
import org.junit.runner.Description;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Log the currently running test.
 * 
 * <p>Typical usage:
 * 
 * <p>{@code @Rule public LogTestName logTestName = new LogTestName();}
 *
 * <p>See also:
 * <br>{@link org.junit.Rule}
 * <br>{@link org.junit.rules.TestWatcher}
 */
public class LogTestName extends TestWatcher {

    private final static Logger log = LoggerFactory.getLogger( "junit.logTestName" );

    @Override
    protected void starting( Description description ) {
        log.debug( "Test {}", description.getMethodName() );
    }

} 
```

笔记：

我正在使用静态记录器。这使代码执行得更快，但我的主要原因是记录测试名称是一个交叉问题：我想在一个中心位置启用/禁用此日志记录，而不是为每个测试类配置它。

另一个原因是我有处理构建输出的工具，并且这些工具更容易配置为固定模式:-)

如果您不想要这个，那么只需获取`description.getTestClass()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:48:06.430

您可以尝试使用`formatter`by setting type as plain。

```
<formatter type="plain" usefile="false"/> 
```

**或者**

`org.apache.tools.ant.taskdefs.optional.junit.JUnitResultFormatter`您可以通过扩展类来使用实现自定义格式化程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-01T08:21:48.460

派生一个类`RunListener`并覆盖该`testStarted()`方法。它接收一个`Description`参数，您可以从中获取测试类和测试方法——例如，`description.getMethodName()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-07T14:01:13.770

您可以使用该`TestName`规则。只需将以下代码添加到您的测试类：

```
@Rule
public TestName testName = new TestName();

@Before
public void printTestMethod() {
    System.out.println("Running " + testName.getMethodName());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:35:08.677

如果您不想创建自己的测试运行器，可以尝试使用堆栈跟踪。

以下方法打印调用它的方法的类和方法名称。

```
public static void printMethod() {
    System.out.println(Thread.currentThread().getStackTrace()[2]);
} 
```

您必须在每个测试方法中调用此方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-30T17:00:39.937

添加`showoutput="true"`导致我的junit测试在测试执行时记录输出：

```
junit fork="yes" showoutput="true" printsummary="withOutAndErr" 
```

# c++ - 二值图像的特征提取

> ID：15222378
> 
> 赞同：1
> 
> 时间：2013-03-05T11:16:18.573
> 
> 标签：c++, opencv, feature-extraction

我正在使用 c++ 和 opencv 做 OCR 项目。我有一些分开的手写字符的黑白图像。我想从这些图像中提取独特的特征，以便使用 LIBSVM 对它们进行分类。谁能告诉我opencv中特征提取的合适算法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:51:51.743

你可以阅读[这个](http://opencv.willowgarage.com/documentation/cpp/common_interfaces_for_feature_detection_and_descriptor_extraction.html)。试试[这个](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/matcher_simple.cpp?rev=3203)。

# asterisk - Asterisk ChanSpy 解决方案

> ID：15222386
> 
> 赞同：0
> 
> 时间：2013-03-05T11:16:33.407
> 
> 标签：asterisk

我需要能够让呼叫者 A 在 Asterisk 中连接到 B，然后呼叫者 C 能够呼叫另一个号码来监听 A 和 B 之间的对话。但是，A 需要有从 C 静音的选项听到他的谈话，即。在那种情况下，C 只能听到 B。除了 ChanSpy 'o' 选项使 B 静音，而不是 A 之外，我已经与 Asterisk ChanSpy 一起工作了。我怎样才能阻止 C 听 A，但仍然听 B ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:04:17.480

星号中的每个桥接呼叫都关联了 2 个通道。

您可以在 chanspy 中控制要收听的频道。所以使用它（有关更多信息，请参阅 ChanSpy 文档，如果没有拨号方案，将无法帮助您）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:19:47.313

听起来您需要使用 ChanSpy 定位另一个频道并使用 o 选项。如果这不可能，您可以尝试大写 W，但这将使呼叫者 C 可以与 A 通话，但听不到他的声音。

从[文档](https://wiki.asterisk.org/wiki/display/AST/Asterisk+11+Application_ChanSpy)：

> W - 启用私人耳语模式，因此间谍频道可以与间谍频道交谈，但不能收听该频道。

由于您可能不希望呼叫者 A 听到呼叫者 C（此选项允许），您可以使用 VOLUME 来“静音”呼叫者 C。（未经测试，如果 VOLUME 不起作用，请尝试 AGC）

```
exten => 1,1,Set(VOLUME(tx)=0) 
```

# javascript - javascript函数外的指令错误

> ID：15222387
> 
> 赞同：0
> 
> 时间：2013-03-05T11:16:35.923
> 
> 标签：javascript

我正在制作一个带有提交按钮以检查登录名和一个链接以创建新用户的表单！

我正在使用以下代码进行编码：

```
<script language="javascript">

function new_user()
{
        document.getElementById("login").value='registo';
}

</script>

<form id="frmLogin" name="frmLogin" method="post" action="#">
    <table>
        <tr>
            <td><label for="username">Nome do utilizador</label></td>
            <td><input type="text" name="username" id="username" /></td>
        </tr>
        <tr>
            <td><label for="password">Palavra-passe</label></td>
            <td><input type="text" name="password" id="password" /></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" name="OK" id="OK" value="Submit"/></td>
        </tr>
        <tr>
            <td><input type="hidden" name="login" id="login" value="login"/></td>
            <td><a href="#" onclick="new_user();document.frmLogin.submit();">Novo Utilizador</a></td>
        </tr>
    </table>
</form> 
```

我想使用隐藏字段来了解用户是否按下了按钮或链接。

为了使代码更小，我想改用此代码：

```
<form id="frmLogin" name="frmLogin" method="post" action="#">
    <table>
        <tr>
            <td><label for="username">Nome do utilizador</label></td>
            <td><input type="text" name="username" id="username" /></td>
        </tr>
        <tr>
            <td><label for="password">Palavra-passe</label></td>
            <td><input type="text" name="password" id="password" /></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" name="OK" id="OK" value="Submit"/></td>
        </tr>
        <tr>
            <td><input type="hidden" name="login" id="login" value="login"/></td>
            <td><a href="#" onclick="document.getElementById("login").value='registo';document.frmLogin.submit();">Novo Utilizador</a></td>
        </tr>
    </table>
</form> 
```

谁能解释我为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:18:09.503

您可能在`onclick`事件处理程序的定义中遇到引号冲突。您的浏览器将其解释为`onclick="document.getElementById("`.

尝试`document.getElementById`用单引号将句子的论点括起来。

```
onclick="document.getElementById('login').value='registo';document.frmLogin.submit();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:18:32.140

您可以按如下方式使用它

```
<td><a href="#" onclick="document.getElementById('login').value = 'registo';document.frmLogin.submit();">Novo Utilizador</a></td> 
```

使用它`single quote`会`getElementById`解决它。

# php - 如何避免客户端应用程序发送的每个 REST 请求都重新连接到数据库？

> ID：15222389
> 
> 赞同：3
> 
> 时间：2013-03-05T11:16:38.840
> 
> 标签：php, database, rest

我目前正在编写一个简单的`RESTful`Web 应用程序（使用 PHP），但我不确定如何有效地处理数据库访问。问题是创建与我的 MySQL 数据库的连接非常耗时。

我的第一个想法是创建一个 Singleton 作为数据库管理对象，它仅在尚未建立连接时才连接到数据库。
但是，我的连接对象始终为空，因为我猜测客户端发出的每个请求都会在服务器上重新加载 php 脚本文件。因此，对于需要访问数据库的每个请求，都必须初始化连接。

有没有可以用来避免这个问题的设计模式或技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:23:56.233

从[持久数据库连接](http://us3.php.net/manual/en/features.persistent-connections.php)：

> 如果创建到 SQL 服务器的链接的开销很高，则持久连接是好的。这种开销是否真的很高取决于许多因素。比如，它是什么类型的数据库，它是否位于您的 Web 服务器所在的同一台计算机上，SQL 服务器所在的计算机的负载情况等等。底线是，如果连接开销很高，持久连接对您有很大帮助。它们导致子进程在其整个生命周期内仅连接一次，而不是每次处理需要连接到 SQL 服务器的页面时。这意味着每个打开持久连接的子节点都将拥有自己的到服务器的打开持久连接。例如，

这是[mysql_pconnect](http://www.php.net/manual/en/function.mysql-pconnect.php)文档页面。

# magento - Magento - 在类别页面上打印类别属性？

> ID：15222390
> 
> 赞同：0
> 
> 时间：2013-03-05T11:16:41.910
> 
> 标签：magento

我按照以下教程将自定义属性添加到我的 Magento 类别： http: [//www.atwix.com/magento/add-category-attribute/](http://www.atwix.com/magento/add-category-attribute/)

它似乎在后端显示文本字段时起作用，我可以看到数据库中的属性（eav_attribute）。

问题是我无法让属性显示在前端。我已将教程中建议的代码添加到 view.phtml 中，但它不起作用。

我也试过

```
if($_category->getCustomAttribute()) {
        echo $_category->getCustomAttribute();
} 
```

让这个在 Magento 1.7 中显示的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:38:41.703

尝试在管理员中重新索引

在管理 -> 系统 -> 索引管理中

# c++ - 如何仅将变量（从 Class 类型的对象）传递给函数（在 main.cpp 中）作为对象

> ID：15222392
> 
> 赞同：0
> 
> 时间：2013-03-05T11:16:46.173
> 
> 标签：c++

我有一个类（A），它包含例如五个变量（参数 t、z、y、d 和 f），并且我创建了一个类（A）类型的对象（A）。然后我有许多函数（X，U，M）包含在“main.cpp”中，每个函数被定义为只接受对象（A）中已经存在的三个或四个参数。例如 function(X) 使用变量（仅 t、y 和 z）

我不能像传递参数那样`void function(X) (int t, int y, double z){}`只传递对象（A）并让每个函数通过从对象（A）的参数中查找它需要的内容来选择它的参数，如下所示（如果存在的话）？

```
 void function(X) (A()){} 
```

我想避免使用以下内容。

```
 void function(X) (A.t, A.y, A.z){} 
```

（请注意我是 C++ 新手，我在 Qt Creator 中工作。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:23:12.980

是的，您可以将对象传递给函数。有几种方法可以将类的实例传递给函数：

*   **按值**（如果`function()`需要修改`obj`但调用者不需要查看更改并且复制成本低廉）：

    ```
    void function(A obj) {} 
    ```

*   **通过引用**（如果`function()`修改`obj`和更改必须对调用者可见）：

    ```
    void function(A& obj) {} 
    ```

*   **通过`const`引用**（如果`function()`不修改`obj`）：

    ```
    void function(A const& obj) {} 
    ```

*   **通过右值引用**（c++11）：

    ```
    void function(A&& obj) {} 
    ```

`class A`遗嘱需要提供对其成员的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:21:56.400

简单的

```
class A
{
public:
    double z;
};

void func(const A &obj)
{
    // Do something with obj.z
    std::cout << obj.z << std::endl;
}

int main()
{
    A myObj;

    myObj.z = 100;

    func(myObj);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:21:05.617

如果成员字段是，`public`您可以从任何函数访问它们。如果不是`public`，您必须向类添加成员函数以获取值，即所谓的“getter”函数。

```
#include <iostream>

class C
{
public:
    int getI() const { return i_; }
    void setI(const int i) { i_ = i; }

private:
    int i_;
}

void someFunction(C c)
{
    std::cout << "The member i_ in c is " << c.getI() << '\n';
}

int main()
{
    C c;
    c.setI(123);

    someFunction(c);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:28:34.783

Joachim 的解释是您所需要的，除了对象应该作为指针或引用传递，以确保它不会被复制。

```
void someFunction(C& c)
    // Accept a reference to a 'C' object
{
    // Joachim's code
    // This method doesn't change the main from Joachim's
    // answer.
}

void someFunction(C* c)
    // Accept a pointer to a 'C' object
{
    std::cout << "The member i_ is " << c->getI() << std::endl;
    // Note the use of '->', not '.' to access the object's method.
}

void main()
{
     C c;
     c.setI(1);

     someFunction(&c);
     // The '&' means 'address of' in this context. I.E. you're passing a pointer.
} 
```

# c# - 奇怪的文件创建时间戳

> ID：15222396
> 
> 赞同：1
> 
> 时间：2013-03-05T11:17:10.950
> 
> 标签：c#, file

好吧，我使用该`FileInfo.Create()`方法创建了许多文件，然后经过一段时间后，我查找在该日期创建的所有文件。

```
oCurrentFile 
    = new FileInfo(oFileRegion.Directory.FullName + "\\" + _traceFilePrefix 
                    + sIdentifier + "_" + DateTime.Now.ToString("yyyy-MM-dd-HH-mm-ss.ffff") + _traceFileExt);
FileStream fs = oCurrentFile.Create(); fs.Close(); 
```

这几天工作得很好！最近，我试图收集昨天创建的所有文件。

```
IEnumerable<FileInfo> oldFiles =
    (from oldFile in oldFiles
    where oldFile.CreationTime.DayOfYear == DateTime.Now.Substract(new TimeSpan(1,0,0,0).DayOfYear
    orderby oldFile.CreationTime ascending
    select oldFile) 
```

`.Count()`当我使用惊喜查找文件数量时，文件数量很大： **0**。

所以我检查了为什么它没有找到任何文件并注意到我所有的文件都有以下创建日期：

01.01.1601 00:00:00.000

有没有搞错？是什么导致了这种奇怪的行为？为什么 Windows 会突然停止获取创建日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T16:22:48.940

对于 FileInfo 认为不存在的文件，我有相同的行为。确保该文件存在，并且它是在 FileInfo 对象之前创建的。否则，您需要调用 FileInfo.Refresh() 以更新 FileInfo 对象中的状态数据。

# scala - 为什么在这种情况下类型推断会失败？

> ID：15222398
> 
> 赞同：2
> 
> 时间：2013-03-05T11:17:15.717
> 
> 标签：scala, type-inference

以下代码运行良好：

```
object InfDemo {    
  class Tag[T]
  case object IntegerTag extends Tag[Int]
  case object StringTag extends Tag[String]
  val TagOfInteger: Tag[Int] = IntegerTag

  def defaultValue[T](typ: Tag[T]): T = typ match {
    case IntegerTag => 0
    case StringTag => ""
    // case TagOfInteger => 0 // this not works
  }     
} 
```

但是下面的代码会报类型推断错误：

```
object InfDemo2 {
    val ClassOfInteger: Class[Integer] = classOf[Integer]
    val ClassOfString : Class[String] = classOf[String]
    def defaultValue[T](typ: Class[T]): T = typ match {
      case ClassOfInteger => 0
      case ClassOfString => ""
   }
} 
```

那么这些代码有什么区别，scala在这里是如何进行类型推断的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T12:58:35.310

`Class`该问题与使用over无关，`Tag`而是与匹配 case 对象（例如`IntegerTag`and `StringTag`）而不是匹配单纯的值（例如`TagOfInteger`, `ClassOfInteger`and `ClassOfString`）有关。

让我们尝试编译第一个示例的 4 个变体：

版本 1：

```
class Tag[T]
case object IntegerTag extends Tag[Int]
case object StringTag extends Tag[String]
def defaultValue[T](typ: Tag[T]): T = typ match {
  case IntegerTag => 0
  case StringTag => ""
} 
```

版本 2：

```
class Tag[T]
case class IntegerTag() extends Tag[Int]
case class StringTag() extends Tag[String]
def defaultValue[T](typ: Tag[T]): T = typ match {
  case IntegerTag() => 0
  case StringTag() => ""
} 
```

版本 3：

```
class Tag[T]
class IntegerTag extends Tag[Int]
class StringTag extends Tag[String]

def defaultValue[T](typ: Tag[T]): T = typ match {
  case _: IntegerTag => 0
  case _: StringTag => ""
} 
```

版本 4：

```
class Tag[T]
val IntegerTag: Tag[Int] = new Tag[Int]
val StringTag: Tag[String] = new Tag[String]
def defaultValue[T](typ: Tag[T]): T = typ match {
  case IntegerTag => 0 // error: type mismatch
  case StringTag => "" // error: type mismatch
} 
```

如果您尝试编译它们，您会看到版本 1、2 和 3 可以正常编译，而版本 4 则不能。原因是在版本 1、2 和 3 中，模式匹配允许编译器确定哪种类型是`T`：

*   在版本 1 中，我们这样做`case IntegerTag =>`。因为`IntegerTag` 是一个case对象，我们肯定知道不可能有任何实例等于`IntegerTag`（除了`IntegerTag`它自己）。所以如果这里有匹配，则运行时类型`IntegerTag`只能是`IntegerTag`，也就是extends `Tag[Int]`。因此我们可以有把握地推断出`T = Int`。

*   在第 2 版中，我们这样做了`case IntegerTag() =>`。这是一个案例类，因此我们知道如果是扩展的实例，则`IntegerTag`此处只能有匹配。因此我们可以有把握地推断出。`typ``IntegerTag``Tag[Int]``T = Int`

*   在第 3 版中，我们这样做了`case _: IntegerTag =>`。换句话说，我们明确匹配`IntegerTag`类型。所以我们再一次知道那`typ`是类型`IntegerTag`，它扩展`Tag[Int]`，我们可以安全地推断出来`T = Int`。

现在，版本 4 的问题是我们无法保证`typ`. 这是因为在这个版本中我们只是做了`case IntegerTag =>`，哪里`IntegerTag`是`val`. 换句话说，当且仅当 时才会有匹配`typ == IntegerTag`。问题在于，`typ`等于`IntegerTag`（或换句话说，`typ.==(IntegerTag)`返回 true）这一事实并没有告诉我们关于`typ`. 实际上，可以很好地重新定义相等性，使其等于不相关类的实例（或简单地等于相同泛型类但具有不同类型参数的实例）。例如，考虑：

```
val StringTag: Tag[String] = new Tag[String]
val IntegerTag: Tag[Int] = new Tag[Int] { 
  override def equals( obj: Any ) = {
    (obj.asInstanceOf[AnyRef] eq this) || (obj.asInstanceOf[AnyRef] eq StringTag)
  }
}
println(StringTag == StringTag) // prints true
println(StringTag == IntegerTag) // prints false
println(IntegerTag == IntegerTag) // prints true
println(IntegerTag == StringTag) // prints true 
```

`IntegerTag == StringTag`返回 true，这意味着如果我们传递`StringTag`给 method `defaultValue`，将会匹配 with `case IntegerTag =>`，即使实际是 of而不是 of`StringTag`的实例。这表明确实存在匹配的事实并没有告诉我们关于. 因此编译器无法假设 的确切类型：我们仅从其声明的静态类型中知道它是 a但仍然未知。`Tag[String]``Tag[Int]``case IntegerTag =>``typ``typ``Tag[T]``T`

# python - 写入文件夹时文件更改

> ID：15222403
> 
> 赞同：1
> 
> 时间：2013-03-05T11:17:25.793
> 
> 标签：python, binary, jpeg, hex-editors

我正在处理二进制文件。它们是 jpeg 图像。我需要用 Python 编辑它们并保存它们。我一直在使用这个脚本，到目前为止似乎工作正常：

```
import os, sys

newpath= r'C:/Users/Umberto/Desktop/temporary'
if not os.path.exists (newpath):
    os.makedirs (newpath)

data= open ('C:/Users/Umberto/Desktop/Prove_Script/Varie/_BR_Browse.001_2065642654_1.BINARY', 'rb+')
edit_data= str (data.read () )
out= open (newpath+ '/preview.BINARY', 'w')

# do my edits in a secon time...

out.write (edit_data)
data.close ()
out.close () 
```

无论如何，出现了一个问题（在 Python 之外）：我的两个文件应该是相同的，但事实并非如此！通过在十六进制编辑器中打开它们，它们看起来略有不同（原来的大小比新的小，即 163 KB，而 167）。此外，当我打开它们时，它们是不同的。它们仍然被视为图像，但一个看起来很好（原始），而另一个则完全是一团糟......出了什么问题？我正在使用的代码是否改变了我不知道的东西，如果是，是什么？我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:26:11.787

你不说你在做什么

> `# do my edits in a secon time...`

但除此之外，这条线

```
edit_data= str (data.read () ) 
```

将彻底改变您的数据。您正在打开一个二进制文件，将内容转换为字符串，然后将内容保存到另一个文件，这*会*改变一些事情。

```
edit_data = data.read() 
```

更改为上述将修复您提供的代码段，但如果您在其他地方编辑数据，这*也会*改变事情。

**建议**

如果您要大量编辑二进制文件，使用`with`语法可能是个好主意

```
with open(my_file, 'rb+') as fo:
    edit_data = fo.read() 
```

然后您不必担心关闭文件等。一旦你有了`edit_data`，这将是一个字节数组，你可以在再次保存数据之前就地编辑它。

```
with open(my_out_file, 'wb') as fo:
    fo.write(edit_data) 
```

更清洁，更简单！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:27:20.353

使用二进制模式：

```
open (newpath+ '/preview.BINARY', 'wb') 
```

# java - Tess4J：如何获得角色的置信度值？

> ID：15222406
> 
> 赞同：0
> 
> 时间：2013-03-05T11:17:40.130
> 
> 标签：java, tesseract

使用下面的代码，我想获得一个字符的置信度值，但由于某种原因，一个单词的每个字符都会返回相同的值。但是，使用类似的代码行 ( `GetUTF8Text`) 可以正确返回字符本身。我的代码有什么问题吗，或者这可能是 Tess4J 中的错误？

```
TessResultIterator ri = TessAPI1.TessBaseAPIGetIterator(api);
TessPageIterator pi = TessAPI1.TessResultIteratorGetPageIterator(ri);
do{
   ...
   do{
      ...
      String ch = TessAPI1.TessResultIteratorGetUTF8Text(ri, TessPageIteratorLevel.RIL_SYMBOL);
      float conf = TessAPI1.TessResultIteratorConfidence(ri, TessPageIteratorLevel.RIL_SYMBOL);
      ...
   }while(hasNextSymbol); 
}while(hasNext); 
```

我已经尝试从 v1.0 切换到 v1.1，但代码仍然不起作用。除此之外，我使用如下所示的代码得到 NullPointerException `TessAPI1Test.java`：

```
 Pointer ptr = TessAPI1.TessResultIteratorGetUTF8Text(ri, TessPageIteratorLevel.RIL_SYMBOL);
 String ch = ptr.getString(0); //<-- exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:29:45.927

您需要致电：

```
TessAPI1.TessBaseAPISetVariable(handle, "save_blob_choices", "T"); 
```

# php - 如何将输入的信息从一页输出到另一页

> ID：15222409
> 
> 赞同：0
> 
> 时间：2013-03-05T11:17:47.290
> 
> 标签：php, javascript, html

这是 rpay2.html 的完整代码

```
<html>
<body>
<form name="info" action="rpay4.php" method="get">
<h2>Personal Information</h2>
Name:
<input type="text" name="Name" value="Enter your name here" onfocus="ClearPlaceHolder (this)" onblur="SetPlaceHolder (this)" class="txt" maxlength="99" onkeypress="return FilterInput (event)">

Address:
<input type="text" name="Address" value="Enter your address here" onfocus="ClearPlaceHolder (this)" onblur="SetPlaceHolder (this)" class="txt" maxlength="99">

Contact #:
<input type="text" name="ContactNo" value="Enter your contact no. here" onfocus="ClearPlaceHolder (this)" onblur="SetPlaceHolder (this)" class="txt" maxlength="99">

E-mail:
<input type="text" name="Email" value="Enter your e-mail here " onfocus="ClearPlaceHolder (this)" onblur="SetPlaceHolder (this)" class="txt" maxlength="99">

<p align="right"><a href="rpay3.html"><input type="BUTTON" value="Submit" onclick="checkit(); return false"></a><a href="rpay.html" target="_top"><input Type="BUTTON" VALUE="Cancel"></a>
</div>
</form> 
```

而对于 rpay4.php

```
<html>
<body>
Your reservation informations:
<br><br>
<?php
echo "Name: " . $_GET["Name"] . "";
echo "You live in " . $_GET["Address"] . "";
echo "Your contact number is " . $_GET["ContactNo"] . "";
echo "Your e-mail is " . $_GET["Email"] . "";
?>
<p align="right">Proceed?<br><a href="res.html" target="_top"><input     type="button" onclick="javascript:gosomewhere();" value="Ok"></a><input Type="BUTTON"     VALUE="Cancel" onclick="window.location.href='rpay2.html'">
    </body>
</html> 
```

只有“您的预订信息：”和按钮显示在 rpay4.php 似乎是什么问题？初学者，见谅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:52:28.827

而不是这个

```
<p align="right"><a href="rpay3.html"><input type="BUTTON" value="Submit" onclick="checkit(); return false"></a><a href="rpay.html" target="_top"></a> 
```

试试这个

```
<input type="submit" value="submit" name="submit" onclick="checkit(); return false" /> <input Type="button" value="Cancel" onclick="window.location.href='rpay.html';" /> 
```

除了一切看起来都很好......

# jenkins - 与 nuget 的关系或人工制品？

> ID：15222414
> 
> 赞同：20
> 
> 时间：2013-03-05T11:17:57.787
> 
> 标签：jenkins, nuget, nexus, nuget-package, artifactory

我正在尝试向我的组织引入体面的参考管理。之前在 Maven 中使用过 Nexus，我知道它远远优于在本地构建*所有内容的方法。*由于这是一个 .Net 商店，我想使用 NuGet 而不是 Maven。我知道二进制存储库将是正确处理的最重要部分，但没有在二进制存储库中托管 NuGet 存储库的经验。

在这种情况下是否有任何理由偏爱 Nexus 或 Artifactory？我们使用 Jenkins 和 svn 作为我们的 CI，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-08T06:15:33.320

这是我们上次比较 Artifactory 与 Nexus 中的 NuGet 支持时发现的（免责声明 - 我与 JFrog 合作）：

1.  在 Artifactory 中，NuGet 支持自然地集成到产品中，这使得管理变得更加容易 - 只需将本地存储库标记为启用 NuGet 或为远程存储库设置远程 URL。多个 NuGet 存储库可以轻松地聚​​合在一个虚拟 NuGet 存储库下——与 Artifactory 中的任何其他存储库使用的方法相同；在 Nexus 中，您将需要定义一种新类型的存储库，设置一个新的专用安全领域，如果您需要现有存储库来响应 NuGet 请求，则必须为其添加特殊外观。这是 Nexus 中的一种通用方法，其中每种新类型的存储库（例如 P2）都需要多级配置更改。

2.  Nexus UI 中绝对没有集成 NuGet 包。您甚至无法搜索对管理和维护至关重要的 NUGet 工件（这就是为什么仅从 Visual Studio 搜索是不够的）。这主要是因为 Nexus 高度面向 Maven 和 Maven 布局；在 Artifactory 中，您可以像任何其他工件一样搜索和管理 NuGet 包。[您可以在 UI](http://wiki.jfrog.org/confluence/display/RTF/NuGet+Repositories)中查看来自 nuspec 元数据的信息，甚至可以深入了解 NuPkg 包下各个文件的内容，并检查它们的内容。

3.  Artifactory 中的安全集成也更容易 - 无需手动生成特殊密钥，但密钥只是用户名和密码的组合或安全密码。如果您希望您的用户 NuGet 密码与 Artifactory 的 MS-AD/LDAP 集成同步，这非常棒；在 Nexus 中，NuGet 使用隔离的安全领域。

4.  Artifactory 实现了完整的 NuGet 搜索范围，包括更深奥但更有用的用例，并且底层实现结合使用内存缓存和持久的、预先计算的、可搜索的属性，以确保 NuGet 查询非常快速且可扩展即使对于一个巨大的存储库；不确定 Nexus 是否使用类似的优化。

我希望这会有所帮助。

PS。NuGet 支持是 Artifactory Pro 版本的一部分，[自 2014 年 9 月起](http://blog.sonatype.com/2014/09/nexus-oss-meets-nuget/)免费包含在 Nexus OSS 中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T14:21:18.687

Nexus 支持 NuGet，您可以直接在其中托管或代理您的 NuGet 存储库。看看[这里](http://www.sonatype.com/books/nexus-book/reference/nuget.html)。

我是 Maven 和 Nexus 的粉丝，所以我有偏见。我用过Artifactory。这是一个很好的工具，但我发现 Nexus 在当时要好得多。我相信 NuGet 功能在 OSS 版本中也可用，但您可能需要仔细检查。

我不会争论为什么以及是否 Nexus 比 Artifactory 更好，因为这不公平，只会引发激烈的战争。我自己的理由是：Sonatype 是 Maven、Nexus 和 Maven Central 背后的人。这将它们置于事物的核心，因此他们对这些工具的内部结构及其互操作性的了解总是会更深入。

如果您熟悉并熟悉 Nexus，坦率地说，我认为您没有理由切换。但是，您可以自己决定。看看[这里](http://binary-repositories-comparison.github.io/)。

# ios - iOS：AFCache 仍然是最新的吗？它可以做到这一点（见下文）。还有其他建议吗？

> ID：15222421
> 
> 赞同：0
> 
> 时间：2013-03-05T11:18:19.597
> 
> 标签：ios, objective-c, caching, uiwebview

我正在寻找一种缓存 UIWebView 的解决方案，包括在 wifi 上时的所有代码、图像和链接等，然后在除 wifi 之外的任何东西上从缓存中加载页面。一旦用户再次连接到 wifi，我希望它运行另一个完整的缓存并删除旧的缓存。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:21:41.480

我不知道它是否回答了您的问题或帮助您解决了问题，但是当您加载请求时，`UIWebView`如果之前已使用`NSURLRequestReturnCacheDataElseLoad`

```
NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:10.0f];
    return request;

[myWebView loadRequest:request]; 
```

您可以根据需要探索[cacchePolicy的其他属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLRequest/cachePolicy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T17:09:23.463

我一直在寻找类似的东西。我发现有用的是[http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588](http://robnapier.net/blog/offline-uiwebview-nsurlprotocol-588)

# c# - ParseExact DateTime 异常

> ID：15222429
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:18:47.790
> 
> 标签：c#, parsing, datetime

我正在尝试解析这个日期字符串，但它给出了一个让我发疯的格式异常。任何人都可以帮忙吗？

```
string date = "05032013123020";
string format = "ddMMyyyyHHmmss";
DateTime result = DateTime.ParseExact(date, format, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:34:26.227

粘贴*字符串后 date = "05032013123020";* 到 Notepad++ 你可以看到以下结果：

字符串日期=“US05032013123020”；

这就是您在解析时遇到错误的原因

# css - {block:tags} + nth-child in tags

I'm working away on my tumblr theme currently and am trying to work out a nice workaround for descriptive titles.

I'm currently using the 'first post is t

> ID：15222431
> 
> 赞同：0
> 
> 时间：2013-03-05T11:18:49.557
> 
> 标签：css, tumblr, block, css-selectors

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:21:15.010

[`title`元素](http://www.w3.org/TR/html5/document-metadata.html#the-title-element)只能包含文本，不能包含标记：

> **内容模型：**
> 文本。

所以里面的`h1`元素`<title>{title} {block:tags}<h1>{tag}</h1>{/block:tags}</title>`是不允许的。

# javascript - FadeIn 鼠标悬停 Jquery

> ID：15222437
> 
> 赞同：0
> 
> 时间：2013-03-05T11:19:15.790
> 
> 标签：javascript, jquery, html, css

我知道你可以`fadeIn`并且`fadeOut`在鼠标悬停时，但我只是想知道当你将背景图像添加到 css 时该怎么做：

```
$(document).ready(function() {      
     $('.bubble').mouseover(function() {             
         $('.bubbleSpeach').fadeIn("slow");          
         var path= this.id + ".png";                 
         $('.bubbleSpeach').css({'background-image': "url(" + path + ")"});              
    }); 
```

这是我目前使用的。但是淡入淡出不起作用。

理想情况下，当鼠标不再悬停时，图像背景会发生变化，但会出现淡入淡出和淡出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:22:31.943

试试这个：

```
$('.bubble').on({
       mouseover:function() {                       
           var path= this.id + ".png";                 
           $('.bubbleSpeach').css({'background-image': "url(" + path + ")"}).fadeIn("slow");
       },
       mouseout: function(){
           $('.bubbleSpeach').fadeOut("slow");
       }
}); 
```

`adding css`先试试`then fade it in`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:22:14.140

更简单的方法是使用[hover()](http://api.jquery.com/hover/)：

```
$("#id").hover(function(){
    $("#exampleText").fadeIn("slow");
},
function(){
    $("#exampleText").fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:43:54.737

这可能是你想要的它使用不透明的动画效果

```
$(document).ready(function() {
 $('bubbleSpeach').css({'background':'url/img.png'})      
 $('.bubble').mouseover(function() {             
    $('.bubbleSpeach').animate({opacity:0)},1000 function() {
        $('bubbleSpeach').css({'background':'url/img2.png'})
        $('.bubbleSpeach').animate({opacity:1}),1000}
   }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:21:07.760

```
$(document).on("mouseover",".bubble",function() {    
//your code..for fadeIn
 }); 
```

试试这样。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:21:41.270

气泡代表什么物体？div 还是整个页面？

您是否尝试过 hover() 功能？

# javascript - 如何创建嵌套的javascript对象

> ID：15222441
> 
> 赞同：0
> 
> 时间：2013-03-05T11:19:27.343
> 
> 标签：javascript, internet-explorer, object

这在 chrome/firefox 中工作得很好，但在 IE 9 中失败了。我怎样才能正确地做到这一点？

```
var Wrapper = function ()
{
  this.loc = {};
  this.loc.default = {};   // fails here in IE
  this.loc.default.lat = 30;
  this.loc.default.lon = -120;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:21:52.353

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words) 可能是因为它是`default`JS 中的保留关键字

你试过用另一个而不是`default`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:21:14.320

[`default`是一个保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)。试着叫它别的东西。

# asp.net - 通过执行语句将值存储在变量返回中

> ID：15222450
> 
> 赞同：0
> 
> 时间：2013-03-05T11:20:03.590
> 
> 标签：asp.net, sql, sql-server

```
declare @value varchar(500)
declare @Whrcol varchar(500)
declare @Whrvalue varchar(500)
set @Whrcol='Product Cat3'
set @Whrvalue='IR DOME CAMERA'
set @value=('select [Table Name] 
             from tblProductsCatalog 
             where ['+ @Whrcol+ '] ='''+@Whrvalue+'''')
execute (@value) 
```

我想通过 Execute 语句保存返回的值，以便我可以在下一个语句中使用，即

```
execute('select * from '+@value+ ' where IsActive =1') 
```

但我收到一个错误。

我该怎么做？

我已经尝试了几个小时但无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:55:45.513

使用 sp_executesql。

请注意，@value 需要更改为 nvarchar。此外，我分离了返回的值，而不是覆盖 @value 变量。

```
declare @value nvarchar(500)
declare @Whrcol varchar(500)
declare @Whrvalue varchar(500)
declare @returnValue varchar(500)  

set @Whrcol='Product Cat3'
set @Whrvalue='IR DOME CAMERA'
set @value='select TOP 1 @returnValue = [Table Name] 
             from tblProductsCatalog 
             where ['+ @Whrcol+ '] ='''+@Whrvalue+''''
exec sp_executesql @value, N'@returnValue varchar(500) output', @returnValue output

execute('select * from '+@returnValue+ ' where IsActive =1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:23:23.713

试试这个方法：

```
declare @value varchar(500)
declare @Whrcol varchar(500)
declare @Whrvalue varchar(500)
set @Whrcol='Product Cat3'
set @Whrvalue='IR DOME CAMERA'
execute('select @value = [Table Name] 
             from tblProductsCatalog 
             where ['+ @Whrcol+ '] ='''+@Whrvalue+'''')
execute('select * from '+@value+ ' where IsActive =1') 
```

# android - onActivityResult 的数据始终为空

> ID：15222454
> 
> 赞同：0
> 
> 时间：2013-03-05T11:20:12.280
> 
> 标签：android, android-intent

我是 Android 应用程序开发的新手。我正在尝试使用 Intents 拍照。一切都很好，我可以拍照并将其保存到外部存储中，但我无法找到它的保存位置。这是我的 onCreate 方法：

```
private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
public static final int MEDIA_TYPE_IMAGE = 1;
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        Uri fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
    } 
```

在这里我创建了保存图像的路径：

```
private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }

private static File getOutputMediaFile(int type){
    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");

    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else {
        return null;
    }

    return mediaFile;
} 
```

图像保存在指定的路径中，但其中的数据`onActivityResult`为空，我无法获取路径：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if( requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE )
        {
            if( resultCode == RESULT_OK ){
                 Toast.makeText(this, "Video saved to:\n" +data.getData(), Toast.LENGTH_LONG).show();

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:31:53.533

使用此功能单击图像

```
public void takePhoto1() {
        if (!android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED)) {
            Toast.makeText(Add_View_Images_Activity.this,
                    "Please insert SDcard for capturing photo.",
                    Toast.LENGTH_SHORT).show();
        } else {

            try {

                photo1=new File(fWrapper.path+"/"+System.currentTimeMillis()+".jpg");
                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);              
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo1));
                cameraIntent.putExtra("return-data", true);

                startActivityForResult(cameraIntent, 4);
            } catch (Exception e) {
                Toast.makeText(Add_View_Images_Activity.this, ""+e, Toast.LENGTH_LONG).show();
            }
        }

    } 
```

此函数将图像保存在指定位置。现在您可以从onActivityResult中的文件photo1的路径中获取点击图像的路径。

像这样

```
String path=photo1.getAbsolutePath(); 
```

现在只需传递您获得此功能的路径，它始终 100% 工作。

```
 public Bitmap getImage(String path) throws IOException
        {
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(path, options);        
            int srcWidth = options.outWidth;
            int srcHeight = options.outHeight;
            int[] newWH =  new int[2];
            newWH[0] = srcWidth/2;
            newWH[1] = (newWH[0]*srcHeight)/srcWidth;

            int inSampleSize = 1;
            while(srcWidth / 2 >= newWH[0]){
                srcWidth /= 2;
                srcHeight /= 2;
                inSampleSize *= 2;
            }

            //      float desiredScale = (float) newWH[0] / srcWidth;
            // Decode with inSampleSize
            options.inJustDecodeBounds = false;
            options.inDither = false;
            options.inSampleSize = inSampleSize;
            options.inScaled = false;
            options.inPreferredConfig = Bitmap.Config.ARGB_8888;
            Bitmap sampledSrcBitmap = BitmapFactory.decodeFile(path,options);
            ExifInterface exif = new ExifInterface(path);
            String s=exif.getAttribute(ExifInterface.TAG_ORIENTATION);
            System.out.println("Orientation>>>>>>>>>>>>>>>>>>>>"+s);
            Matrix matrix = new Matrix();
            float rotation = rotationForImage(Add_View_Images_Activity.this, Uri.fromFile(new File(path)));
            if (rotation != 0f) {
                matrix.preRotate(rotation);
            }
            int newh = ( w * sampledSrcBitmap.getHeight() ) /sampledSrcBitmap.getWidth();
            Bitmap r=Bitmap.createScaledBitmap(sampledSrcBitmap, w, newh, true);
            Bitmap resizedBitmap = Bitmap.createBitmap(
                    r, 0, 0, w, newh, matrix, true);

            return resizedBitmap;
        } 
```

# ruby-on-rails - Rails 3.2.12 with less 和 Twitter Bootstrap：V8 错误

> ID：15222455
> 
> 赞同：0
> 
> 时间：2013-03-05T11:20:16.677
> 
> 标签：ruby-on-rails, twitter-bootstrap, less, v8

我想将 Twitter Bootstrap 与当前的 Ruby on Rails 版本一起使用。我尝试使用“less-rails-bootstrap”。我跟着：[http ://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/](http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/)

我创建了一个新的 Rails 项目。然后我将“gem 'less-rails-bootstrap'”添加到 Gemfile，安装它，然后我将“*= require twitter/bootstrap”添加到 application.css

我收到了这个错误：

```
Showing /var/www/lrb/app/views/layouts/application.html.erb where line #5 raised:

V8::Error
(in /usr/lib/ruby/gems/1.8/gems/less-rails-bootstrap-2.3.0/vendor/assets/stylesheets/twitter/bootstrap.css.less) 
```

我找不到如何修复 V8::Error。application.html.erb 中的第 5 行：<%= stylesheet_link_tag "application", :media => "all" %>

我安装的 Gem 的：

```
Using rake (10.0.3) 
Using i18n (0.6.4) 
Using multi_json (1.6.1) 
Using activesupport (3.2.12) 
Using builder (3.0.4) 
Using activemodel (3.2.12) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.5) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.4) 
Using sprockets (2.2.2) 
Using actionpack (3.2.12) 
Using mime-types (1.21) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.12) 
Using arel (3.0.2) 
Using tzinfo (0.3.36) 
Using activerecord (3.2.12) 
Using activeresource (3.2.12) 
Using coffee-script-source (1.6.1) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.3) 
Using json (1.7.7) 
Using rdoc (3.12.2) 
Using thor (0.17.0) 
Using railties (3.2.12) 
Using coffee-rails (3.2.2) 
Using commonjs (0.2.6) 
Using jquery-rails (2.2.1) 
Using less (2.2.2) 
Using less-rails (2.2.6) 
Using less-rails-bootstrap (2.3.0) 
Using libv8 (3.11.8.13) 
Using bundler (1.3.0) 
Using rails (3.2.12) 
Using ref (1.0.2) 
Using sass (3.2.6) 
Using sass-rails (3.2.6) 
Using sqlite3 (1.3.7) 
Using therubyracer (0.11.4) 
Using uglifier (1.3.0) 
```

如何在 Rails 3.2.12 中使用 Bootstrap？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:05:43.787

我使用'bootstrap-sass' gem，但我想它遵循相同的约定。

捆绑 gem 后，我没有在 application.css 中添加任何内容；根据 gem 的文档：

> 我们建议不要使用 //= require 指令，因为你的其他样式表都不能使用 Bootstrap 定义的很棒的 mixin

相反，您可以创建一个新的 css.scss 文件并在顶部`@import 'bootstrap';`

任务完成！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:49:32.723

我曾经遇到过同样的问题，然后我切换到了[anjlab bootsrap rails](https://github.com/anjlab/bootstrap-rails)，它提供了 Twitter Bootstrap CSS（具有 Sass 风格）

`gem 'anjlab-bootstrap-rails', '>= 2.3', :require => 'bootstrap-rails'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:36:40.867

如果您在 Windows 下获得它，这应该对您有所帮助 [https://github.com/hiranpeiris/therubyracer_for_windows](https://github.com/hiranpeiris/therubyracer_for_windows)

# ajax - tinyMCE ajax 保存数据

> ID：15222462
> 
> 赞同：8
> 
> 时间：2013-03-05T11:20:46.070
> 
> 标签：ajax, tinymce

我看过很多关于 tinyMCE 和 ajax 的帖子，但我无法让它工作——不是通过触发`tinyMCE.triggerSave();`而不是通过覆盖提交而不是通过触发`tinyMCE.get("elm1").save();`

这是我的代码：

```
$('#ss').submit(function (e) {
        e.preventDefault();
        var ed = tinyMCE.get('elm1');
        var data = ed.getContent()

    //  tinyMCE.triggerSave();
    //  tinyMCE.get("elm1").save();

    //    var data = $(this).serialize();
        console.log(data);
        $.ajax({
            type:       'POST',
            cache:      false,
            url:        'xtras/ssheetsave.php',
            data:       data,
            success:    function(){
                        console.log("Updates have successfully been ajaxed");
            }
        });
        return false;
    }); 
```

形式：

```
<form id="ss" method="post" style="margin-top: 40px;">
    <input type="hidden" id="cat_id" name="cat_id" value="<?php echo $id; ?>">
    <textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 80%">
                </textarea>

    <input type="submit" name="save" value="Submit" />
    <input type="reset" name="reset" value="Reset" />
</form> 
```

和tinyMCE：

```
tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave,visualblocks",
//      save_onsavecallback : "ajaxSave",

        // Theme options
        theme_advanced_buttons1 : "save,cancel,|,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect,|,forecolor,backcolor",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,cleanup,help,code,tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,advhr",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Style formats
        style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    }); 
```

有人可以帮我解决这个问题吗？- 基本上我什至没有在控制台中获取数据`console.log(data);`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-29T02:08:55.183

您需要在原始文本区域中使用“名称”值，然后使用“getContent()”获取内容

这直接来自他们的文档。

```
<script>
tinymce.init({
    selector: "textarea",
    plugins: "save",
    toolbar: "save",
    save_enablewhendirty: true,
    save_onsavecallback: function() {
                        // USE THIS IN YOUR AJAX CALL
                alert(tinyMCE.get('ajax_text').getContent());
        }
});
</script>

<textarea name="ajax_text" /></textarea> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T15:51:04.023

基本上我通过介绍`on()`监听器让它工作：

```
$(document).on('submit','#ss',function (e) {
    e.preventDefault();
    var ed = tinyMCE.get('elm1');
    var data = ed.getContent();
    var cat_id = $('#cat_id').val();

    console.log(cat_id);
    $.ajax({
        type:       'GET',
        cache:      false,
        url:        'xtras/ssheetsave.php',
        data:       'data=' + escape(data) + '&cat_id=' + cat_id,
        success:    function(){
                    $("#ss").remove(); 
                    $("#output").html(data);
        }
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:59:37.053

您需要使用“elm1”而不是“内容”

```
var ed = tinyMCE.get('elm1'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T02:50:22.220

这是一个完整的工作示例，js 略有不同：

**HTML：**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://tinymce.cachefly.net/4.1/tinymce.min.js"></script>

<textarea id="prjOView" name="prjOView" rows="8" cols="73"></textarea>
<button id="btnProjSave">Save</button> 
```

`name=`注意：就我而言，仅设置属性是不够的。我必须同时设置`name`和`id`属性，并分配相同的值（如上所示）。

**JS/jQuery：**

```
$(document).ready(function(){

    tinymce.init({
        selector: '#prjOView',
        theme: 'modern',
        width: 600,
        height: 300,
        plugins: [
            'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker',
            'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking',
            'save table contextmenu directionality emoticons template paste textcolor'
        ],
        content_css: 'css/content.css',
        toolbar: 'insertfile undo redo | styleselect | sizeselect | bold italic | fontselect | fontsizeselect | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons'
    }); //tinyMCE

    $('#btnProjSave').click(function(){
        var mi = tinymce.get('prjOView').getContent();
        alert(mi);

        //The data is now in var `mi`, use AJAX to save via PHP
        $.ajax({
            type: 'post',
             url: 'path_to_your_php_file.php',
            data: 'tinydata=' +mi,
            success:function(){
            }
        });
    });

}); //END document.ready 
```

文件**path_to_your_php_file.php：**

```
<?php
    var $tinydata = $_POST['tinydata'];
    //the data is now in the above var. Do what you need to do. 
```

* * *

有关如何使用 AJAX 的一些基本示例，请参阅[这篇文章](https://stackoverflow.com/questions/17973386/ajax-request-callback-using-jquery/17974843#17974843)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-31T08:04:21.117

通过将我的 tinyMCE 代码放在我的 php ajax 文件中，我开始工作了。

```
let editorChangeHandlerId;
        tinymce.init({
            height: "400",
            selector: 'textarea',
            branding: false,
            plugins: 'media image',
            mediaembed_max_width: 300,
            image_dimensions: false,
            content_style: 'img {max-width: 100%;}',
            media_live_embeds: false,

            setup: function(editor) {
                // const tinyId=$('textarea').data('id');
                // console.log("ID: ",tinyId);
                editor.on('Paste Change input Undo Redo', function () {
                    clearTimeout(editorChangeHandlerId);
                    // const tinyId=$('this').data('id');
                    // tinyMCE.activeEditor.setContent(tinyId.defination);
                    editorChangeHandlerId = setTimeout(function() {
                        ajaxfunctions();
                        console.log('changed');
                        tinymce.get('textarea').save();

                    }, 100);
                });
            }
            // ,...
        }); 
```

在我的 ajaxfunctions() 里面是我的 ajax 查询的工作代码，其中也`const data = tinyMCE.get("textarea").save();`有

# c - 在 2 个不同版本的 gcc 上编译源代码

> ID：15222463
> 
> 赞同：8
> 
> 时间：2013-03-05T11:20:46.520
> 
> 标签：c, gcc

我正在使用不同版本的 gcc 的 2 台不同的机器上编译我的源代码。

标志 c89

```
-Wall -Wextra -Wunreachable-code -g -m32 -D_DEBUG -O0 -D_LARGEFILE64_SOURCE -D_REETRANT -D_THREAD_SAFE 
```

一个是redhat-4

```
gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
Linux 203_test_server 2.6.18-164.el5 #1 SMP Tue Aug 18 15:51:48 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux 
```

一个是 Fedora 18

```
gcc (GCC) 4.7.2 20121109 (Red Hat 4.7.2-8)
Linux localhost.localdomain 3.8.1-201.fc18.x86_64 #1 SMP Thu Feb 28 19:23:08 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

我的 fedora 18 编译没有错误。但是，在 redhat 4 机器上我得到了一些错误。

```
channel.h:35: error: redefinition of typedef ‘channel_t’
internal.h:19: error: previous declaration of ‘channel_t’ was here 
```

我认为错误只是一个循环问题。但是，使用相同的代码库在 2 台不同的机器上编译真的会使用 2 个不同版本的 gcc 有所不同吗？

我在想使用较新版本的编译器会产生更多错误，因为较新的编译器可能更严格。

**这不是解决错误的问题，而是关于编译器的一般问题。**

有没有我可以设置的标志来避免将来发生这种情况。也许如果在这个版本的 gcc 上编译，如果版本不兼容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T15:44:02.713

这将取决于源代码包含哪些标头。如果您要链接到外部库，则可能是您的源代码与安装在旧系统上的库版本不兼容。

如果源代码不包含任何外部库头文件（C 库除外），则可能存在需要更改的预处理器指令。

编辑：

[谷歌](http://www.google.com)搜索后，它似乎`channel_t`来自内核头文件。您在两台机器上使用相距很远的内核版本。如果代码依赖于内核头文件，它可能需要比 Red Hat 机器上的内核版本更新。您还没有指定代码是什么（它是设备驱动程序吗？），或者它包含哪些文件，所以很难说更多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T12:26:47.280

这是重复的：[为什么在 GCC 4.3 而不是 GCC 4.6 中出现“重新定义 typedef”错误？](https://stackoverflow.com/questions/6526322/why-redefinition-of-typedef-error-with-gcc-4-3-but-not-gcc-4-6)

答案是更改了 gcc 以修改此检查。

[http://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=ce3765bf44e49ef0568a1ad4a0b7f807591d6412](http://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=ce3765bf44e49ef0568a1ad4a0b7f807591d6412)

有时，对语言中定义的行为的警告，但被认为是不好的做法，被认为过于严格，因为警告中包含了某些有用和/或无害的用例。然后编译器开发人员尝试以相反的方式进行修复，即减少警告的数量。在这种情况下，只有在第二个定义将 typedef 更改为不同但兼容的类型时，才会出现警告。

当前的其他示例是刚刚宣布的 gcc 4.8 中的 -Wshadow。在发行说明中，它说如果一个函数名被另一个函数名遮蔽， -Wshadow 将不再发出警告。

见： http: [//gcc.gnu.org/gcc-4.8/changes.html](http://gcc.gnu.org/gcc-4.8/changes.html)

编辑：如何避免这种情况：删除其中一个定义，或将其移动到单独的包含文件并删除其他两个定义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T08:07:51.057

在您获得不同结果的两个系统上比较 channel.h 和 internal.h 的内容。我怀疑问题出在 gcc 的版本上。这些错误更有可能是由于随着时间的推移对这些文件的代码更改造成的，例如当一个系统具有比另一个系统更新版本的库和关联的头文件时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T12:46:49.907

首先，让我们谈谈你的问题。我认为您的系统在一个系统上出现错误的最可能原因是代码不相同；您可能想通过一些工具或`diff`命令来验证这一点，以查找代码库中出现的任何细微变化。通常，当我看到该错误类型的问题时，您会遇到以下情况：

```
typedef struct Foo* Fooptr; 
```

在头文件中，然后：

```
typedef struct Foo
{
    int bar;
} *Fooptr; 
```

在源文件中。这意味着您可以将 typedef 放在源代码中，它应该没问题。只是要寻找的东西。

现在，如果这*是*一个`gcc`问题，解决您的问题的第二个选项是，可以[在同一台计算机上拥有多个版本的 gcc](http://gcc.gnu.org/faq.html#multiple)，然后`gcc`通过该`-v`选项指定要运行的确切版本。因此，在您的 Fedora 18 机器上试一试 4.1.2 可能是个好主意。

另请注意，如果您使用该`-v`选项，但未*指定*要`gcc`运行的版本，您将获得（在 stderr 输出上）执行的命令以运行编译阶段。这对于查看正在发生的事情以及每台机器上发生的事情之间是否存在任何重大差异可能很有用。

* * *

好的，现在开始你的问题。是的，有用于在“版本 X”上编译的标志`gcc`：对于初学者来说，有[`__VERSION__`预定义宏](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)，这将向你吐出`const char *`版本号。这可能非常有用，但正如 gcc 文档所述：

> 您不应依赖其内容具有任何特定形式，但可以指望它至少包含发行号

尽管如此，我通常只看到一种形式的输出，这就像`"4.6.3"`我的版本`gcc`is `4.6.3-1ubuntu5`。

现在，如果您知道（或怀疑）您的某些代码会导致特定版本的`gcc`导致错误，您可以使用`__GNUC__`、`__GNUC_MINOR__`和`__GNUC_PATCHLEVEL__`预定义的宏来“保护”自己：
这是一个简短的片段，它在最高级别显示如何用它：

```
#if __GNC__ == 3
    printf(“Hello version 3.x.x\n”);
#elif __GNC__ == 4
    printf(“Hello version 4.x.x\n”);
#endif 
```

因此，在上述版本为 4.6.3 的系统上，您会看到“Hello version 4.xx”消息。然后您可以更高级并检查颠覆：

```
#if __GNUC__ > 3 || \
    (__GNUC__ == 3 && (__GNUC_MINOR__ > 2 || \
        (__GNUC_MINOR__ == 2 && \
          __GNUC_PATCHLEVEL__ > 0))
    printf(“I’m a gcc greater than 3.2.0\n”);
#endif 
```

或者使用您自己的宏的更简洁的版本：

```
#define GCC_VERSION (__GNUC__ * 10000 \
    + __GNUC_MINOR__ * 100 \
    + __GNUC_PATCHLEVEL__)
#if GCC_VERSION > 30200
    printf(“I’m a gcc greater than 3.2.0\n”);
#endif 
```

* * *

为了解决您关于不同版本是否`gcc`会产生不同错误的问题，您是正确的，在每个版本中`gcc`都会发生更多事情，有时情况确实会发生变化，因此您会看到不同版本的编译器之间的差异。最好的办法是检查您所使用的两个版本之间每个版本的发行说明。（从 4.1 到 4.7）。

*   4.2 - [http://gcc.gnu.org/gcc-4.2/changes.html](http://gcc.gnu.org/gcc-4.2/changes.html)
*   4.3 - [http://gcc.gnu.org/gcc-4.3/changes.html](http://gcc.gnu.org/gcc-4.3/changes.html)
*   4.4 - [http://gcc.gnu.org/gcc-4.4/changes.html](http://gcc.gnu.org/gcc-4.4/changes.html)
*   4.5 - [http://gcc.gnu.org/gcc-4.5/changes.html](http://gcc.gnu.org/gcc-4.5/changes.html)
*   4.6 - [http://gcc.gnu.org/gcc-4.6/changes.html](http://gcc.gnu.org/gcc-4.6/changes.html)
*   4.7 - [http://gcc.gnu.org/gcc-4.7/changes.html](http://gcc.gnu.org/gcc-4.7/changes.html)

我不确定您拥有什么目标架构，因此请务必检查每个文档中的这些特定部分。但我认为你真的想看看`"Build system improvements"`和`"Incompatible changes to the build system"`，它们还专门针对 C 代码创建了一个部分，便于查看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T15:03:24.413

> 这不是解决错误的问题，而是关于编译器的一般问题。
> 
> 有没有我可以设置的标志来避免将来发生这种情况。

每个特定版本的编译器都会带有自己的开关或标志。

如果创建编译器版本以接受某些开关，并且其中一个是您需要避免对源代码进行某些检查的开关，那么是的，将来有/将有一种方法可以避免它。

如果您正在使用的编译器版本、最近或未来版本没有/接受一个开关来避免/跳过对源代码的某些检查，那么就没有办法避免它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T17:02:12.720

这里没有足够的信息来准确说明发生了什么。我加入了那些说这不太可能是编译器版本问题的人。

当编译器遇到两个相同名称的不同声明时，会发生此错误（显然）。弄清楚为什么会发生这种情况应该不难。

检查 makefile 以查找被引用的头文件`internal.h`。`channel.h`引用的`typedef`行将在那里有一个或其他声明`channel_t`。从这些声明中向外寻找线索。

我必须假设这些文件中的一个或两个都在您正在使用的库中。如果两者`internal.h`和`channel.h`都是您自己的代码，请调试您自己的代码！

否则有很多可能性。最有可能的是

1.  预处理器`-D`或`#define`ed 标志不正确，因此当只有一个声明时，多个声明被有条件地编译。

2.  两个不同的库或标准头文件和一个库有名称冲突。

3.  您自己的代码与库或标准头文件发生冲突。如果`channel_t`是您定义的类型，那就有问题了。你不应该定义你自己的类型，`_t`因为它们是为实现而保留的。

上面的第 1 个可能以多种方式发生，但最常见的是库的错误配置。库通常必须`./configure`针对它们正在使用的操作系统进行编辑。如果您在一个 Linux 中进行配置并复制到另一个 Linux，那么您会遇到与您所看到的类似的问题。

由于库版本差异，第 2 个可能出现在一个 linux 上，而不是另一个。在这种情况下，请将有错误的机器更新到与没有错误的机器相同的版本。别忘了跑`./configure`。

对于 3 号，修复是显而易见的。更改您的类型名称。

我在 Tor 中看到了`channel.h`and 。`channel_t`我的疯狂猜测是，您正在使用 Tor 并查看机器上的 Tor 错误配置并出现错误。

# c++ - 使用 ncurses 显示 wchar_t

> ID：15222466
> 
> 赞同：1
> 
> 时间：2013-03-05T11:20:53.050
> 
> 标签：c++, ncurses, wchar-t

我目前正在开发一个 C++ 项目，我需要在其中显示一些扩展字符（wchar_t）。

主要问题是，即使它在 C 中运行良好（使用），它在 c++ 中使用or`wprintf`也不起作用。当然，我已经设置了这样的语言环境： ，并且没有显示任何内容。`mvwaddwstr``waddwstr``setlocale(LC_ALL, "");`

有人以前遇到过这个问题，或者对此有想法吗？

谢谢。

这是代码：

```
 struct charMap { int x; int y; wchar_t value };
  int                   i, x, y;
  wchar_t               str[2];
  struct charMap _charMap[2] = {
    {0,0,9474}
    {29, 29, 9474}
  };
  initscr();
  setlocale(LC_ALL, "");
  for (y = 0 ; y < 30 /* length */ + 2 ; y++) {
    for (x = 0 ; x < 30 /* width */ + 2; x++) {
      for (i = 0 ; i < 2 ; i++) {
        if ((x == _charMap[i].x || _charMap[i].x == -1) &&
            (y == _charMap[i].y || _charMap[i].y == -1)) {
          str[0] = _charMap[i].value;
          str[1] = L'\0';
          mvwaddwstr(stdscr, y, x, str);
          break;
        }
      }
    }
  }
  refresh();
  while(1); 
```

_charMap 是一个结构表，其中包含便于比较的有用值（避免繁重的`if ... else if ... else`结构）。`_charMap[].value`是`wchar_t`, 并且`_charMap[].x`是 int , 像`_charMap[].y`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T11:12:46.057

你需要在做`setlocale(LC_ALL, "")` **之前**`initscr()`。

一个工作示例：

```
#include <ncursesw/ncurses.h>
#include <locale.h>
#include <wchar.h>

int main() {  
    setlocale(LC_ALL, "");
    initscr();
    wchar_t wstr[] = { 9474, L'\0' };
    mvaddwstr(0, 0, wstr);
    refresh();
    getch();
    endwin();
    return 0;
} 
```

# java - 无法将 Int 转换为 String

> ID：15222468
> 
> 赞同：0
> 
> 时间：2013-03-05T11:20:56.707
> 
> 标签：java

我想在 java 中将 int 转换为 String 但我不能：

这是我使用的代码：

```
 jTextField1.setText((String)l.getCode()); 
```

这是我得到的错误：

```
Inconvertible types
required:java.lang.String
found:   int 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T11:24:17.747

您不能进行类型转换`int`以`string`尝试以下代码。

```
jTextField1.setText(String.valueOf(l.getCode())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T11:21:54.467

利用

```
 Integer.toString(l.getCode); 
```

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toString%28int%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toString%28int%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T11:49:22.550

首先使用内置转换器将整数转换为字符串的三种方法，

```
jTextField1.setText("" + l.getCode()) 
```

其次，您可以使用 Integer 类的静态方法 toString(int)，

```
jTextField1.setText(Integer.toString(l.getCode())) 
```

您也可以使用格式化程序，但不建议这样做，因为它只会使代码变得繁琐且难以理解。

```
jTextField1.setText(String.format("%d", l.getCode())) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T11:21:51.690

尝试这样的事情：

`Integer.valueOf(l.getCode()).toString()`

您不能将`int`简单类型转换为`String`对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T11:22:57.973

也许你可以尝试：

```
String.valueOf(int) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T11:23:28.820

这应该是您正在寻找的：

```
jTextField1.setText(String.valueOf(l.getCode())) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-05T11:24:35.090

```
jTextField1.setText(String.valueOf(l.getCode())); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-05T11:23:59.753

尝试这个：

```
jTextField1.setText(Integer.toString(l.getCode())); 
```

# python - Sqlalchemy 结果后处理

> ID：15222469
> 
> 赞同：1
> 
> 时间：2013-03-05T11:20:57.760
> 
> 标签：python, orm, sqlalchemy

我正在使用 Python 中的 sqlalchemy 从我的数据库中获取数据集：

```
links = session.query(Link).order_by(Link.id.desc()).limit(20) 
```

`links`然后我在我的视图中迭代结果：

```
%for link in links:
    <div class="link">
        {{link.url}}
        %if link.pdf: 
            <a href="{{link.pdf}}">[pdf]</a>
        %end
    </div>
%end 
```

如果结果存在 pdf 文件`link`，我想读取 中的外部属性。`pdf`

我试过了 ：

```
for index, link in enumerate(links):
    if os.path.isfile('/pdf/'+str(link.id)+'.pdf'):
        links[index].pdf = '/pdf/'+str(link.id)+'.pdf'
    else:
        links[index].pdf = None 
```

但该`pdf`属性显然没有设置。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:58:48.383

添加一个python属性应该可以完成这项工作，例如

```
class Link(Base):
    ...

    @property
    def pdf(self):
        path = '/pdf/%d.pdf' % self.id
        if os.path.isfile(path):
            return path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:34:15.060

通常，我会创建一个包含所需信息的映射列表：

```
linkinfo = []
for link in links:
    pdf = '/pdf/'+str(link.id)+'.pdf'
    pdf = pdf if os.path.isfile(pdf) else None
    linkinfo.append({'url': link.url, 'pdf': pdf}) 
```

然后循环遍历`linkinfo`模板中的列表。

这省去了使用 SQLAlchemy 对象的麻烦，并确保您的模板获得了所有正确的数据以供显示。

# multithreading - 使用 perl、wsdl 和多线程的 Web 服务不起作用

> ID：15222480
> 
> 赞同：1
> 
> 时间：2013-03-05T11:21:20.500
> 
> 标签：multithreading, perl, wsdl, mod-perl, mod-perl-registry

使用 perl、wsdl 和多线程的 Web 服务不起作用：

1.  使用线程执行命令行：有效
2.  带有线程的肥皂客户端调用：不起作用
3.  没有线程的肥皂客户端调用：有效

在这里，我尝试使用线程更新数千个筛子文件，但如果我使用线程，它不起作用。我正在尝试使用 perl 快速制作 web 服务，目前它是用 php 编写的，但是使用 web 服务的线程不起作用任何帮助都会有所帮助。

当我从肥皂客户端（soap_client.pl）调用 Web 服务时，它返回以下错误。

```
500 Server closed connection without sending any data back 
```

安装的 perl 模块：

```
MIME::Parser
SOAP::Lite 
```

阿帕奇模块：

```
mod_perl 
```

阿帕奇虚拟主机：

```
<VirtualHost 192.168.1.187:80>
 ServerName sieve.net
 ServerAlias www.sieve.net
 DocumentRoot /web/sieve.net/htdocs
 ErrorLog /var/log/httpd/sieve.net_error_log
 TransferLog /var/log/httpd/sieve.net_access_log

 <Directory "/web/sieve.net/htdocs">
        <FilesMatch "\.mhtml$|\.pl$|\.html$">
                Options         +ExecCGI
                AddHandler      cgi-script .cgi .pl .html
                SetHandler      perl-script
                PerlHandler     ModPerl::Registry
                PerlSendHeader  On
        </FilesMatch>
      </Directory>
 DirectoryIndex index.phtml index.htm index.html index.pl
</VirtualHost> 
```

sievefilter_thread.pl

```
#!/usr/bin/perl
use strict;
use SOAP::Lite;
use SOAP::Transport::HTTP;
use lib "/web/sieve.net/htdocs";
use Sieve;
use threads;
use Thread::Queue;

my $soap = SOAP::Transport::HTTP::CGI->new(
    dispatch_to => 'manageSieve'
);
$soap->handle();

package manageSieve;
sub updateSieveFilter {
    my ($package, $client_id) = @_;
    my @users = ({
                    'Password' => 'test',
                'Login' => 'test1@example.in'
                 },
             {
                    'Password' => 'test',
                'Login' => 'test2@example.in'
                 },
             {
                    'Password' => 'test',
                'Login' => 'test3@example.in'
                 },
             {
                    'Password' => 'test',
                'Login' => 'test4@example.in'
                 },         
             {
                    'Password' => 'test',
                'Login' => 'test5@example.in'
                 }, 
        );
    if(@users) {
        my $THREADS = 30;
                my $Qwork = new Thread::Queue;
                my $Qresults = new Thread::Queue;

                # If i return any value from here it wokrs. 
                ## Create the pool of workers
                my @pool = map{
                        threads->create( \&updateClientUsersSieve, $Qwork, $Qresults )
                } 1 .. $THREADS;

                # Does not return any value from here.

                foreach my $user (@users){
                        $Qwork->enqueue( $user );
                        if( $counter % 100 == 0){
                                sleep 1;
                        }
                        $counter++;
                }
                $Qwork->enqueue( (undef) x $THREADS );
        ## Process the results as they become available
                for ( 1 .. $THREADS ) {
                        while( $result = $Qresults->dequeue ) {
                                #print $result;
                        }
                }
                # Clean up the threads          
                $_->join for @pool;
                return 1;
        }
        return 0;   
}

sub updateClientUsersSieve {
        my $tid = threads->tid;
        my $result = 1;
        my( $Qwork, $Qresults ) = @_;
        my ($login, $password);
        while( my $user = $Qwork->dequeue ) {
                ($login, $password) = ($user->{'Login'}, $user->{'Password'});

                my $sieveObj    = new Sieve($login, $password);
                $result   = $sieveObj->sieveLogin();
                $Qresults->enqueue( $result );
        }
        $Qresults->enqueue( undef ); ## Signal this thread is finished
}
1; 
```

筛分.pm

```
#!/usr/bin/perl
package Sieve;
use Net::ManageSieve;
use strict;

sub new {
   my $class = shift;
   my $self = {
        _username => shift,
        _password => shift,
        _sieve    => undef,
   };
   bless $self, $class;
   return $self;
}

sub sieveLogin {
    my ($self)  = @_;
    my $sieveServer     = 'localhost';
    my $sievePort       = 2000;
    my $authType        = 'PLAIN';
    my $username        = $self->{_username};
    my $password        = $self->{_password};
    my $capabilities    = "require [";
    my $activescript    = "";
    my $script_name     = "sievephp_testscript";
    my $error           = undef;

    $self->{_sieve}  = Net::ManageSieve->new("$sieveServer:$sievePort");
    if(!$self->{_sieve}->login($username, $password)){
    return 0;
    }

    $capabilities = $self->{_sieve}->capabilities->{sieve};
    $capabilities =~ s/\s/\",\"/g;
    $capabilities = 'require ["'.$capabilities.'"];'."\n";
    $activescript = $capabilities;
    $activescript .= "\n";
    $activescript .= "if allof (size :over 1000K ){ reject text: Your mail Has been rejected due to mailsize control\n\n.;";
    $activescript .= "stop;}";

    $self->{_sieve}->putscript($script_name, $activescript);
    $self->{_sieve}->logout; 
    return 1;       
}
1; 
```

筛子.wsdl

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="urn:manageSieve" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="HelloService" targetNamespace="urn:manageSieve" xmlns:y="urn:manageSieve">
<message name="updateSieveFilterRequest">
    <part name="client_code" type="xsd:string"/>
</message>
<message name="updateSieveFilterResponse">
    <part name="Result" type="xsd:string"/>
</message>
<portType name="Hello_PortType">
    <operation name="updateSieveFilter">
        <input message="tns:updateSieveFilterRequest"/>
        <output message="tns:updateSieveFilterResponse"/>
    </operation>
</portType>
<binding name="Hello_Binding" type="tns:Hello_PortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="updateSieveFilter">
        <soap:operation soapAction="urn:manageSieve#updateSieveFilter"/>
        <input>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:manageSieve" use="encoded"/>
        </input>
        <output>
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:manageSieve" use="encoded"/>
        </output>
    </operation>
</binding>
<service name="Hello_Service">
<documentation>WSDL File for HelloService</documentation>
<port binding="tns:Hello_Binding" name="Hello_Port">
    <soap:address location="http://sieve.net/sievefilter_thread.pl"/>
</port>
</service>
</definitions> 
```

肥皂客户端.pl

```
use SOAP::Lite;
my $client = SOAP::Lite->service("http://sieve.net/sieve.wsdl");
my $result = $client->updateSieveFilter(17);
print $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:03:49.093

我对你的线程代码有点困惑。您必须在创建线程之前将工作传递到队列中，并在它们完成后处理它们。

$Qresults->enqueue(undef); ## 表明这个线程已经完成<--这不是必需的

```
 foreach my $user (@users){
                    $Qwork->enqueue( $user );
                    if( $counter % 100 == 0){
                            sleep 1;
                    }
                    $counter++;
          }
           $Qwork->enqueue( (undef) x $THREADS );

            ## Create the pool of workers
            my @pool = map{
                    threads->create( \&updateClientUsersSieve, $Qwork, $Qresults )
            } 1 .. $THREADS;             
            # Clean up the threads          
            $_->join for @pool;
            ## Process the results as they become available
            while( $result = $Qresults->dequeue ) {
               print $result;
            }

            return 1; 
```

# sql - 存储过程的 where 子句参数

> ID：15222484
> 
> 赞同：1
> 
> 时间：2013-03-05T11:21:31.637
> 
> 标签：sql, sql-server

我有以下情况：

```
----------------
ID    |    Type
----------------
1     |    AB
2     |    CD
3     |    EF 
```

现在，我需要在存储过程中进行此查询的查询是：

```
SELECT * FROM Table_Name WHERE TYPE IN ('AB','CD','EF') 
```

我写了以下程序：

```
CREATE PROCEDURE dbo.usp_get_all
  @Type    VARCHAR(200)
AS
BEGIN
  SELECT * FROM Table_Name WHERE TYPE IN (@Type)
END 
```

仅当我以以下方式调用它时，此查询才能正常工作：

```
EXEC usp_get_all 'AB' 
```

现在，可能会出现下面这样的情况，这是行不通的

```
EXEC usp_get_all '''AB'',''CD'',''EF''' 
```

我的问题：

我不想使用任何函数来拆分逗号分隔的输入参数。只有通过使用输入参数，我才能获得相同的结果，例如：

```
SELECT * FROM Table_Name WHERE TYPE IN ('AB','CD','EF') 
```

有什么办法可以解决问题吗？我可以使用动态 SQL 吗？如果可以，在这种情况下我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:48:51.763

您可以使用：

```
CREATE PROCEDURE myProc (@typy NVARCHAR(299))
AS

DECLARE @SQL NVARCHAR(4000)
SET @SQL='SELECT * from table_name where typ in ('+@typy+')'
EXEC(@SQL) 
```

然后执行：

```
DECLARE @return_value int
EXEC    @return_value = [myProc]
        @typy = N'''AB'',''BC''' 
```

# usb - iball Andi系列安卓手机是否支持Android Open Accessory Development kit？

> ID：15222491
> 
> 赞同：1
> 
> 时间：2013-03-05T04:51:43.980
> 
> 标签：usb

我正在使用 iball Andi 3n 安卓手机。这款手机是否支持配件开发套件？

# sql - 将整行传递给 SQL CLR 函数/存储过程

> ID：15222492
> 
> 赞同：0
> 
> 时间：2013-03-05T11:21:49.520
> 
> 标签：sql, sql-server, sqlclr, clrstoredprocedure, table-valued-parameters

我有一个过程，我需要对包含 Forename、Surname、Address1 等列的 SQL 表执行一些复杂的字符串操作

为了执行此数据操作，我设置了各种 SQL CLR C# 函数，但现在我想将整行传递给一个 CLR 函数或存储过程。

你最好的方法是什么？

我正在考虑创建一个表值参数，然后创建一个 SQL CLR SPROC 来接受数据，但数据是只读的还是我可以在 C# 中执行数据操作并返回一个新的数据集？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:12:28.450

您不能将 TVP（表值参数）传递给 SQLCLR 过程或函数。它们是在数据库中定义的，.NET 代码对它们一无所知。

如果您要将所有字段都传递给此函数，那么此函数很可能特定于此表，那么为什么不将每个字段作为单独的输入参数传递呢？

您有几个输出选项：

1.  如果您只有一个值要返回，则创建一个标量函数，它可以按如下方式使用：

    ```
    UPDATE tbl  
    SET tbl.Field = MyCLRFunction(tbl.Field1, tbl.Field2, tbl.Field3, tbl.Field4)  
    FROM dbo.Table tbl  
    WHERE tbl.Field5 = SomeValue; 
    ```

2.  如果您需要传回多个值（但假定仍然是单行），则创建一个可以通过 CROSS APPLY 使用的表值函数，如下所示：

    ```
    UPDATE tbl  
    SET tbl.Field6 = fnc.FieldA,  
        tbl.Field7 = fnc.FieldB,  
        tbl.Field8 = fnc.FieldC,  
    FROM dbo.Table tbl  
    CROSS APPLY MyCLRFunction(tbl.Field1, tbl.Field2, tbl.Field3, tbl.Field4) fnc  
    WHERE tbl.Field5 = SomeValue; 
    ```

从技术上讲，这不需要 SQLCLR 而不是常规的 T-SQL 函数，但是根据正在执行的操作，在 SQLCLR 中它可能会更快。

# javascript - _.pick 方法来匹配对象数组中的子属性

> ID：15222493
> 
> 赞同：4
> 
> 时间：2013-03-05T11:21:50.907
> 
> 标签：javascript, underscore.js

我正在以下列方式使用 _.pick 方法

假设我有一个字符串数组，它们只是我想从对象数组中的每个对象获取的属性名称

```
var wantedPropArray=["prop1","prop2","prop3.name"]; 
```

下面是我的对象数组

```
var objectArray = [
        {"prop1":"prop1Data1","prop2":"prop2Data1","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data1","prop5":"prop5Data1"},
        {"prop1":"prop1Data2","prop2":"prop2Data2","prop3":{"name":"Cat","age":"24","class":"graduate"},"prop4":"prop4Data2","prop5":"prop5Data2"}
        {"prop1":"prop1Data3","prop2":"prop2Data3","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data3","prop5":"prop5Data3"}
        {"prop1":"prop1Data4","prop2":"prop2Data4","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data4","prop5":"prop5Data4"}
    ]
for( var item in objectArray ){          
    var objectArrayOnlySelectedProperties = _.pick(objectArray[item] , wantedPropArray);
} 
```

假设第一次迭代让我们看看 objectArrayOnlySelectedProperties 数据，我得到

```
objectArrayOnlySelectedProperties = {"prop1":"prop1Data1","prop2":"prop2Data1"}; 
```

我期待它能给我这样的结果

```
objectArrayOnlySelectedProperties = {"prop1":"prop1Data1","prop2":"prop2Data1","prop3.name":"Tom"}; 
```

我的意思是 _.pick 方法无法查看 prop3 并得到我的 prop3.name。谁能建议如何使用下划线的pick方法来匹配数组中每个对象的子属性。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:28:27.987

开箱即用的下划线js似乎不支持这一点。但是有一个要点可以作为混合提供支持：

[https://gist.github.com/furf/3208381](https://gist.github.com/furf/3208381)

这是一些使用上述要点的代码来做你需要的事情：http: [//jsfiddle.net/wHXCv/1/](http://jsfiddle.net/wHXCv/1/)

```
_.mixin({
  deep: function (obj, key) {
    var keys = key.split('.'),
        i = 0,
        value = null,
        n = keys.length;

      while ((obj = obj[keys[i++]]) != null && i < n) {};
      value = i < n ? void 0 : obj;
      var result = {};
      result[key]=value;
      return result;
  }
});

var objectArray = [
                 {"prop1":"prop1Data1","prop2":"prop2Data1","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data1","prop5":"prop5Data1"},
                 {"prop1":"prop1Data2","prop2":"prop2Data2","prop3":{"name":"Cat","age":"24","class":"graduate"},"prop4":"prop4Data2","prop5":"prop5Data2"},
                 {"prop1":"prop1Data3","prop2":"prop2Data3","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data3","prop5":"prop5Data3"},
                 {"prop1":"prop1Data4","prop2":"prop2Data4","prop3":{"name":"Tom","age":"24","class":"graduate"},"prop4":"prop4Data4","prop5":"prop5Data4"}];

var plucked = function(o, wantedPropArray) {
    return _.reduce(wantedPropArray, function(acc, val){
        acc.push(_.deep(o,val));
        return acc;
    },[]);
}

var answer = _.map(objectArray, function(o){
    return plucked(o, ["prop1","prop2","prop3.name"]);
});

console.log(JSON.stringify(answer)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:36:12.567

我不知道 Underscore.js，但你可以试试这个代码：

```
function pick(obj,list){
    var newObj={};
    for(var i=0;i<list.length;i++){
        var str=list[i].split('.');
        var o=obj[str[0]];
        for(var j=1;j<str.length;j++){
            o=o[str[j]];
        }
        newObj[list[i]]=o;
    }
    return newObj;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T22:59:36.067

# 下划线深度选择插件

我为 underscore.js 创建了这个插件来帮助解决这样的问题。

[深镐堵塞](https://github.com/mohsen1/deep_pick)

**可在 NPM 和 Bower 购买**

```
npm install deep_pick
bower install deep_pick 
```

### 例子：

```
var input = {
  one: 1,
  two: true,
  three: 'Three',
  four: [1,2,3,4],
  five: {
    alpha: 1,
    beta: 2,
    gamma: 3,
    teta: {
        alef: 1,
        beh: 2,
        peh: 3
    }
  },
  answer: '42.00',
  description: 'This is an object.'
};

var schema = {
  one: true,
  three: true,
  five: {
    alpha: true,
    teta: {
      beh: true
    }
  }
};

deepPick(input, schema); // =>

{
  one: 1,
  three: "Three",
  five: {
    alpha: 1,
    teta: { 
      beh: 2
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T17:52:27.607

我为此创建了一个简单的要点： [https ://gist.github.com/peterslivka/9055188](https://gist.github.com/peterslivka/9055188)

```
_.mixin({ 
    pickDeep: function(obj) {
        var copy = {},
            keys = Array.prototype.concat.apply(Array.prototype, Array.prototype.slice.call(arguments, 1));

        this.each(keys, function(key) {
            var subKeys = key.split('.');
            key = subKeys.shift();

            if (key in obj) {
                // pick nested properties
                if(subKeys.length>0) {
                    // extend property (if defined before)
                    if(copy[key]) {
                        _.extend(copy[key], _.pickDeep(obj[key], subKeys.join('.')));
                    }
                    else {
                        copy[key] = _.pickDeep(obj[key], subKeys.join('.'));
                    }
                }
                else {
                    copy[key] = obj[key];
                }
            }
        });

        return copy;
    }
}); 
```

您可以在这里找到工作示例：http: [//jsfiddle.net/TFfHk/](http://jsfiddle.net/TFfHk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-11T20:07:06.587

以防有人在这里找到路。`_.pluck`功能就是你想要的。带有下划线。

[http://underscorejs.org/#pluck](http://underscorejs.org/#pluck)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-24T21:59:40.370

lodash 有一些很好的方法来检查和设置深层对象属性：has、set 和 get。您可以使用这些函数来构建您自己的 deepPick / deepPluck 函数。下面是一个基于 lodash 并使用内置 Array.reduce 方法的 ES6 风格函数。请注意，lodash 对嵌套属性使用点分隔符。

```
/**
 * Deep pick / pluck properties.
 *
 * @param {object} the source object
 * @param {array[string]} the properties to pick
 */
function deepPick (source, props) {
  return props.reduce((result, key) => {
    const exists = lodash.has(source, key);

    if (exists) {
      lodash.set(result, key, lodash.get(source, key));
    }

    return result;
  }, {});
} 
```

# google-app-engine - GeoPtProperty 有哪些优势？

> ID：15222495
> 
> 赞同：2
> 
> 时间：2013-03-05T11:21:52.063
> 
> 标签：google-app-engine, google-cloud-datastore

我想我也可以将纬度/经度数据存储在 FloatProperty 或 ListProperty 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:08:37.623

我认为现在它只是确保纬度和经度值是正确的，而如果你有自己的`FloatProperty`值，它们可以有任何不一定是坐标的任意值。除此之外，我认为您不会有任何其他好处。

此外，虽然 Google 不支持开箱即用的空间搜索，但也许将来他们会，如果他们愿意，他们会为此使用这个属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:27:11.460

使用 google 的 API，您将能够进行[基于位置的搜索](https://developers.google.com/appengine/docs/python/search/overview#Performing_Location-Based_Searches)。您还可以在具有浮点格式的模板中使用地理属性（在这种情况下，“2”将是小数位数）：

`<georss:point>{{entity.geopt.lon|floatformat:2}},{{entity.geopt.lat|floatformat:2}}</georss:point>`

您还可以查看我认为已被 google search api 取代的 geomodel[项目，如果您创建索引，则可以启用基于位置的搜索。](https://code.google.com/p/geomodel/)

# apache-flex - Spring-Security Blazeds 和 Flex

> ID：15222497
> 
> 赞同：0
> 
> 时间：2013-03-05T11:21:52.657
> 
> 标签：apache-flex, spring-security, blazeds

我们的应用配置了blazeds和spring-security，并使用remoting-object标签来调用方法。我感觉配置不合适。是否有任何参考资料可以让我了解所有这三种技术的集成。

我实际上面临的问题是在登录后浏览器工具（Chrome 的检查元素）中看到的 sesionid 发生变化，其中 spring-security 说一旦用户通过身份验证，会话 id 就会发生变化。

```
<flex:message-broker>
<flex:remoting-service default-channels="my-cfamf-secure" />
    <flex:secured>
        <flex:secured-channel channel="my-cfamf-secure"
        access="ROLE_USER,ROLE_ADMIN,ROLE_SALES" />
    <flex:secured-endpoint-path pattern="**/messagebroker/**" access="ROLE_USER" />
</flex:secured>
</flex:message-broker>`

<security:http auto-config="true">
        <security:intercept-url pattern="/index.jsp"
            filters="none" access="ROLE_USER" />
        <security:intercept-url pattern="/**/*.swf"
            filters="none" />
        <security:intercept-url pattern="/**/*.jsp"
            filters="none" access="ROLE_USER" />
        <security:intercept-url pattern="/**" filters="none" />
        <security:logout invalidate-session="true"
            logout-success-url="/index.jsp" />
        <security:session-management session-fixation-protection="newSession">
        </security:session-management>
    </security:http>

<security:authentication-manager alias="_authenticationManager">
        <security:authentication-provider
            user-service-ref="userDetailsService">
        <security:password-encoder hash="md5" />
    </security:authentication-provider>
</security:authentication-manager>

<channel-definition id="my-cfamf-secure"
            class="mx.messaging.channels.SecureAMFChannel">
            <endpoint
                url="https://{server.name}:{server.port}/{context.root}/messagebroker/amf/cfamfsecure"
                class="flex.messaging.endpoints.SecureAMFEndpoint" />
            <properties>
                <polling-enabled>false</polling-enabled>
                <serialization>
                    <instantiate-types>true</instantiate-types>
                </serialization>
                <add-no-cache-headers>false</add-no-cache-headers>
                <invalidate-session-on-disconnect>true</invalidate-session-on-disconnect>
            </properties>
        </channel-definition> 
```

这是我的配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:28:02.090

看来您使用的是非常旧的 Spring Security 版本（2.x 版），请考虑升级到 3.x。这种基本配置应该很容易，如果继续使用旧配置，将不容易获得支持。

但是有一个提示：您的内部配置`<security:http>`分配`filters="none"`给*所有*可能的 URL，所以我猜它实际上不会对*任何请求做**任何事情*，这就是您的会话管理设置被忽略的原因。

# php - 使用 simplexml 访问节点属性

> ID：15222499
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:21:53.793
> 
> 标签：php, simplexml

我正在使用 simplexml，我有以下 xml：

```
<Entry entryType="Wider Image" entryName="test B and A" entryID="guid"> 
```

我需要访问 entryName 属性。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:34:17.417

如您所说，如果您使用的是 SimpleXML，那非常容易。请参见下面的示例（请原谅格式不佳）：

```
 <?php 
 $str = '<?xml version="1.0" encoding="utf-8"?>
 <Entries>
 <Entry entryType="Wider Image" entryName="test B and A" entryID="guid" />
 </Entries>';

 $sXml = new SimpleXMLElement($str);

 echo $sXml->Entry->attributes()->entryName;
 ?> 
```

# c++ - 终止工人

> ID：15222502
> 
> 赞同：0
> 
> 时间：2013-03-05T11:21:55.133
> 
> 标签：c++, multithreading, c++11, finally

我有一个启动多个工作线程的函数。每个工作线程都被一个对象封装，该对象的析构函数会尝试`join`对该线程进行调用，即调用`if (thrd_.joinable()) thrd_.join();`。但是每个工人必须完成多少工作是先验未知的。管理功能使用互斥锁和条件变量将工作单元分配给线程。如果没有更多工作要做，则在持有互斥锁时设置某个标志，然后通知所有在条件变量上阻塞的线程，以便它们醒来，注意更改的标志，然后关闭。

即使主线程中存在异常，我也希望此关闭工作。在 Java 中，我会使用一个`finally`子句来*始终*设置标志并在工作处理循环结束时通知线程。由于[C++ 没有`finally`](https://stackoverflow.com/a/161179/1468366)，我编写了自己的替换：

```
class FinallyGuard {
private:
  std::function<void()> f_;
public:
  FinallyGuard(std::function<void()> f) : f_(f) { }
  ~FinallyGuard() { f_(); }
};

void Manager::manageWork(unsigned NumWorkers) {
  // Order matters: destructors are called in reverse order and will
  // 1\. release the mutex lock so that workers can proceed
  // 2\. unblock all threads using the finally workalike
  // 3\. destroy the workers and join their threads
  std::forward_list<Worker> workers;
  FinallyGuard signalEndGuard([this] {
    std::unique_lock<std::mutex> lk(mtx_);
    done_ = true;
    beginWork_.notify_all();
  });
  std::unique_lock<std::mutex> lk(mtx_);
  for (unsigned i = 0; i != numWorkers; ++i)
    workers.emplace_front(this);
  while (haveMoreWork()) {
    // …
  }
} 
```

但我显然在这里考虑其他语言的概念。**有没有更类似于 C++ 的方法来实现这一点？**一个解决方案要么需要执行一些代码来从方法正常返回和抛出异常的情况，要么提供一些更好的机制来唤醒工作人员，而不是标志和条件变量的组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:00:29.337

C++ 中确实存在 try finally 等效项，但不在核心语言中。它被称为 ScopeGuard，最初由 Andrej Alexandrescu 创造，他是 C++ 领域的“摇滚明星”之一。在这里，他在 2012 年 C++ 和 Beyond 会议上介绍了新版本[http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)

更重要的是这里的代码： [https ://gist.github.com/KindDragon/4650442](https://gist.github.com/KindDragon/4650442)

你的例子做了几乎同样的事情。如果您希望其他 C++ 程序员理解您的意思，您可能应该将其称为 ScopeGuard 或使用 Alexandrescus 代码（您可能应该将其放入库或公共包含中，它经常使用）。C++ 程序员对所有事情都使用 RAII，在我看来，表达意图很重要，这可以很好地完成

```
SCOPE_EXIT {
    std::unique_lock<std::mutex> lk(mtx_);
    done_ = true;
    beginWork_.notify_all();
}; 
```

在你的情况下。

我工作的地方 ScopeGuard 被认为是很好的风格，并且很好地通过了代码审查。如果您想在商业上使用它，它也是公共领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:07:00.990

C++ 方法是使用称为[RAII](https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)的东西。您使用总是调用析构函数的事实来确保始终运行某些代码。

# mysql - 将两个查询合二为一

> ID：15222505
> 
> 赞同：-3
> 
> 时间：2013-03-05T11:21:56.587
> 
> 标签：mysql, sql

我正在从多个表中获取数据。并试图[解决这个问题](https://stackoverflow.com/questions/14829856/required-single-query-to-fetch-data-from-tables)

最后我有两个查询

1) 获取用户消息的相关数据。

2) 获取所有评论及其详细信息。

我想将这两个查询组合在一个查询中。

查询 1)

```
SELECT user_messages.messageid,user_messages.message,
user_messages.sentby,user_messages.visibility,

GROUP_CONCAT( post_images.image_id SEPARATOR ';')
AS  `POST_IMG_ID`,

GROUP_CONCAT( post_images.small_pic_path SEPARATOR ';')
AS 'POST_IMG_PATH',

(
  SELECT count(*) FROM likes
  WHERE element_id=user_messages.messageid
  )AS 'TOTAL_LIKES',

smsusers.fname as 'SENTBY_FNAME',
smsusers.lname as 'SENTBY_LNAME',
profile_pic.small_pic_path as 'SENTBY_SMALL_PIC_PATH'

FROM user_messages
      INNER JOIN smsusers ON
        user_messages.SENTBY = smsusers.id
 INNER JOIN profile_pic ON
 user_messages.SENTBY = profile_pic.userid
left outer JOIN post_images ON
user_messages.messageid=post_images.messageid
WHERE user_messages.userid='1'
GROUP BY user_messages.messageid
order by user_messages.adddate 
```

它的工作链接是[Sql Fiddle](http://sqlfiddle.com/#!2/431ca/1)

查询 2)

```
SELECT comments.comment_id, comments.comment, comments.comment_date,
smsusers.fname ,smsusers.lname,profile_pic.small_pic_path  
FROM comments, smsusers , profile_pic , user_messages 
WHERE user_messages.messageid = 'm1'
AND user_messages.userid = smsusers.id
AND smsusers.id = profile_pic.userid
ORDER BY comment_date
LIMIT 0, 10; 
```

工作链接是[Sql Fiddle](http://sqlfiddle.com/#!2/431ca/6)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:43:44.720

使用这个查询并删除依赖的子查询

```
SELECT user_messages.messageid,
       user_messages.message,
       user_messages.sentby,
       user_messages.visibility,
       GROUP_CONCAT(post_images.image_id SEPARATOR ';') AS `POST_IMG_ID`,
       GROUP_CONCAT(post_images.small_pic_path SEPARATOR ';') AS 'POST_IMG_PATH',
       likes.TCount AS 'TOTAL_LIKES',
       smsusers.fname AS 'SENTBY_FNAME',
       smsusers.lname AS 'SENTBY_LNAME',
       profile_pic.small_pic_path AS 'SENTBY_SMALL_PIC_PATH',
       GROUP_CONCAT(comments.comment) AS `Comments`
FROM user_messages
INNER JOIN smsusers ON user_messages.SENTBY = smsusers.id
INNER JOIN profile_pic ON user_messages.SENTBY = profile_pic.userid
LEFT OUTER JOIN post_images ON user_messages.messageid = post_images.messageid
LEFT JOIN
    (SELECT element_id,
            COUNT(*) AS `TCount`
     FROM likes
     GROUP BY element_id) AS likes ON likes.element_id = user_messages.messageid
LEFT JOIN comments ON comments.comment_on = user_messages.messageid
WHERE user_messages.userid = '1'
GROUP BY user_messages.messageid
ORDER BY user_messages.adddate; 
```

[小提琴演示](http://sqlfiddle.com/#!2/431ca/11)

# c - C将选项连接到CAT程序？

> ID：15222508
> 
> 赞同：0
> 
> 时间：2013-03-05T11:22:08.833
> 
> 标签：c, command-line, cat

正如标题所示，我必须编写一个程序来模拟 CAT 命令，到目前为止，我已经完成了基本的输入和输出工作，但是我现在需要包含诸如 -n 之类的选项.....

```
while((rd = getchar()) != EOF){
   if(putchar(rd) == EOF){
       perror("Write Err");
       return EXIT_FAILURE
   }

}

return EXIT_SUCCESS; 
```

将数字行或美元符号等选项打印到实际输出的最佳方法是什么？我应该将我的 I/O 方法更改为`fgets`and `fputs`（这样我就可以打印出带有原始输入的字符串格式的编号行）我是否应该使用 malloc realloc，因为没有明确的用户输入大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:56:47.017

为了添加行号和美元符号，您需要做的就是检查正在处理的字符是否是新行：

```
if (rd == '\n') {
        putchar($);
} 
```

动态内存分配在这里无济于事。

使用 putchar() 效率低下。切换到 puts() 会产生更好的性能。这也需要更复杂的逻辑。

# media-player - 如何在 Android MediaPlayer 上播放互联网广播？

> ID：15222509
> 
> 赞同：2
> 
> 时间：2013-03-05T07:24:45.327
> 
> 标签：media-player

我计划通过流式传输几个本地互联网收音机来开发一个 Android 应用程序。为此，我正在使用 Android 的**`MediaPlayer`**对象并使用**`setDataSource`**方法。但是，我失败了，因为它没有像我预期的那样流式传输。但是，如果我将其设置**`setDataSource`**为真正的 mp3 资源，它就可以工作。

仅供参考，我还在`uses-permission`AndroidManifest.xml 文件上设置如下，

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

这是我在此应用程序**MainActivity.java**中使用的代码，

```
package com.example.saralfm;

import java.io.IOException;    
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.Bundle;
import android.app.Activity;    
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);    

        final MediaPlayer mp = new MediaPlayer();
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);

        try {
            //Its working
            //mp.setDataSource("http://download.tamiltunes.com/songs/__P_T_By_Movies/Saguni%20%282012%29/Manasellam%20Mazhaiye%20-%20TamilWire.com.mp3"); 
            //Its not working
            mp.setDataSource("http://www.onlineradios.in/tamil-radio-from-india/#aahaa-91_9-fm-chennai/");

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        mp.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer arg0) {
            // TODO Auto-generated method stub
            mp.start();
         }});

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我对 Android 操作系统很陌生。请帮帮我。

# c - getaddrinfo 与 localhost：静态链接或不在同一系统上时的不同行为

> ID：15222510
> 
> 赞同：3
> 
> 时间：2013-03-05T11:22:13.107
> 
> 标签：c, getaddrinfo

我有一个小的 c 程序，它基本上调用 getaddrinfo。根据 /etc/hosts localhost 可以解析为“127.0.0.1”和“::1”。

现在运行程序时，输出取决于我是否使用以下方法编译和链接：

```
gcc -static test.c
$ a.out
127.0.0.1 2

gcc test.c
$ a.out
::1 10
127.0.0.1 2 
```

我正在检查哪些系统调用已经完成，并且似乎在第一种情况下没有使用配置文件 /etc/gai.conf 。但是我不认为gai.conf很重要，因为它几乎是空的（除了很多评论。）事实上，如果我删除文件，我仍然能够正确解析（根据/etc/hosts）两个ips动态链接的程序。

另一方面，在这种情况下，静态链接是否意味着在链接时甚至对配置文件进行评估？

问题：为什么两个程序的输出不同？

测试.c：

```
#include <netdb.h>
#include <stdio.h>

int main(int argc, char *argv[]) {

    struct addrinfo *result, *rp;
    int s = getaddrinfo("localhost", "", NULL, &result);
    char host[INET6_ADDRSTRLEN];
    for (rp = result; rp != NULL ; rp = rp->ai_next) {
        inet_ntop(rp->ai_family,
        (rp->ai_family == AF_INET ?
            &(((struct sockaddr_in*)rp->ai_addr)->sin_addr): 
                &(((struct sockaddr_in6*)rp->ai_addr)->sin6_addr)),
                host, sizeof host);
        printf("%s %d\n", host, rp->ai_family);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-13T02:03:03.327

在 glibc 系统下，通过 getaddrinfo() 执行 RFC 3484（IPv6 中的地址选择/排序）是通过 gai.conf 文件（如果存在）执行的，这是这里的关键元素，因为这是正确的，并且应该用于动态链接库调用。

静态链接库中没有对 gai.conf 进行系统调用这一事实强烈表明，无论如何这两个库之间存在差异，并且它返回的唯一地址是 IPv4 地址这一事实也令人担忧，因为RFC 3484 的实现声明返回的默认值是一个 IPv6 地址，我们通过运行动态链接库调用知道该地址存在。

如果无法访问您的系统，我会说这里存在库文件错误，而不是编码错误。

# android - 我怎样才能写这个查询？

> ID：15222513
> 
> 赞同：0
> 
> 时间：2013-03-05T11:22:17.420
> 
> 标签：android, sqlite, android-sqlite

我有两张表 Y 和 X。Y 的每个项目都可以有很多这样的 Xi：

```
Y   X
--  --
A   X1  √
B   X1
B   X2
B   X3
C   X2
D   X1
D   X2
E   X1  √ 
```

我想得到只有 X1 由**tick**显示的 Ys 。什么是查询？

我应该提到我的数据库是 Android Sqlite。

```
Select * 
From Y 
Inner join X 
on Y.id = X.Yid 
where X.id is only X1 and nothing else 
```

我怎样才能写一个真正的查询等价于`is only X1 and nothing else`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:20:39.010

换句话说，你想要所有`Y`确实有一个`X1`，但没有任何其他`X`的。在 SQL 中：

```
SELECT *
FROM Y
WHERE EXISTS (SELECT X.id
              FROM X
              WHERE X.id = Y.Xid
                AND X.name = 'X1')
  AND NOT EXISTS (SELECT X.id
                  FROM X
                  WHERE X.id = Y.Xid
                    AND X.name != 'X1') 
```

或者，第一个子查询可以写成一个连接：

```
SELECT Y.*
FROM Y JOIN X
       ON Y.Xid = X.id
WHERE X.name = 'X1'
  AND NOT EXISTS (SELECT X2.id
                  FROM X AS X2
                  WHERE X2.id = Y.Xid
                    AND X2.name != 'X1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:32:08.500

查询可能是：

```
 Select * 
  From Y 
  inner join X 
 on Y.Xid = X.id 
  where X.id = 'X1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:44:10.590

```
Cursor c = sampleDB.rawQuery("SELECT * FROM " +
            Y +
            " where X=x1", null);

    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String yarray[] = c.getString(c.getColumnIndex("Y"));
            }while (c.moveToNext());
        }
    }

Now yarray[] will contain all your y values 
```

# django - 如何访问 save_formset 中的模型名称

> ID：15222515
> 
> 赞同：0
> 
> 时间：2013-03-05T11:22:22.613
> 
> 标签：django, django-admin

基本上我有一个父模型和多个子模型。在 admin.py 中，我对所有这些都使用内联。我必须使用 save_formset 来保存内联模型。在一个特定的内联/表单集中，我想根据关于该模型的一些信息向用户发送一条消息。所以我想知道模型的名称。如何访问 save_formset 中的模型名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:34:58.587

ModelFormSet 实例将模型作为属性保存，因此您可以：

```
def save_formset(self, request, form, formset, change):
    if formset.model == ModelClass:
        do something... 
```

# jetty - 使用 OpenJdk 替代 Jetty Npn

> ID：15222516
> 
> 赞同：0
> 
> 时间：2013-03-05T11:22:25.843
> 
> 标签：jetty, jvm-languages, spdy

你们知道与 Sun Jvm 一起使用的替代方案吗？我们不能使用 Open Jdk，所以我正在寻找可以与 Sun Jvm 一起使用的替代 NPN 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:27:47.727

Oracle 的 JVM 主要基于 OpenJDK。您是否真的尝试过，但没有奏效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:07:12.397

Rag，我实际上是在使用带有 npn jar 的官方 oracle jdk。不幸的是，它必须在引导类路径中，并且没有其他方法可以做到这一点。

# java - 如何在 IntelliJ 上运行外部构建项目？

> ID：15222520
> 
> 赞同：1
> 
> 时间：2013-03-05T11:22:33.780
> 
> 标签：java, intellij-idea

我正在处理的项目是由一组复杂的 shell 和 ant 脚本构建的。
构建可以在外部运行，也可以从 ItelliJ 作为外部工具运行。

1）我如何告诉 IntelliJ 不要构建我的项目？
我想手动启动构建。

2）我如何告诉 IntelliJ 我的类文件的位置？类路径？
在运行配置中将 CLASSPATH 设置为环境变量似乎没有任何效果。

我的目标是能够调试 IntelliJ 中的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:00:05.057

我在这里提供 Intellij IDEA 12 的答案。早期版本基本相同，只是略有改动。

您至少有两种选择来实现您的目标：

*   跳过构想中的构建步骤并修改类路径（即您自己概述的步骤）
*   调试远程进程，如果您已经在 IDEA 之外构建，这可能会更容易。

我将简要介绍两者。

* * *

**如何告诉 IntelliJ IDEA 不要构建。**

1.  `Run > Edit Configurations`从菜单中选择。
2.  选择（或创建）您的配置。
3.  通过选择“制作”步骤并单击“-”图标，删除“启动前：制作”步骤。 ![从运行/调试配置中删除 Make](../Images/fe45668cc6ea65d17c4a54af0dfc5d63.png)

* * *

**如何修改类路径**

您对项目和每个单独的模块都执行此操作。

首先，`File > Project structure`从菜单中选择。

项目：

1.  `Project`在左侧菜单中选择。
2.  将“项目编译器输出”路径更改为外部构建工具放置类文件的位置。 ![更改项目编译器输出](../Images/b0673abeee466a38aa0eff8d751edba6.png)

模块：

1.  `Modules`在左侧菜单中选择。
2.  选择要修改的模块。
3.  选择“路径”选项卡。
4.  根据是否要覆盖此模块的路径，选择“继承项目编译输出路径”或“使用模块编译输出路径”。 ![更改模块编译器输出](../Images/cac7a78a2204158312e4dd04c60d4f8c.png)

* * *

**调试远程进程**

在这种情况下，您只需使用调试选项启动远程 java 进程。这些选项对于不同版本的 java 略有不同，但 IntelliJ 会告诉您每个版本使用的正确标志。

1.  `Run > Edit Configurations`从菜单中选择。
2.  选择右上角的 + 号。
3.  选择“远程”。
4.  为远程进程选择主机和端口，如下图所示。
5.  为远程进程复制正确的命令行选项 - 我已经概述了最新 Java 版本的按钮。
6.  确保使用这些选项启动远程进程。
7.  给它一个名字并保存您的配置以供以后重复使用！ ![远程运行/调试配置](../Images/374efc5de5f2107571e16059f9960cba.png)

# android - android停止默认视频录制以获取音频焦点

> ID：15222523
> 
> 赞同：1
> 
> 时间：2013-03-05T11:22:42.247
> 
> 标签：android, android-camera, android-video-player

我正在做一个示例 Voip 应用程序。当用户使用默认相机应用程序录制视频时，并且传入的 voip 呼叫来了，我想停止视频录制以将音频焦点转移到我的应用程序。

```
mAudioManager.requestAudioFocus(mAudioFocusListener, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);

private OnAudioFocusChangeListener mAudioFocusListener = new OnAudioFocusChangeListener() {

    @Override
    public void onAudioFocusChange(int focusChange) {

        Logger.d(TAG, "--------Audio Focus change: " + focusChange);

        switch(focusChange){
            case AudioManager.AUDIOFOCUS_GAIN:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_GAIN" );
                break;
            case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_GAIN_TRANSIENT" );
                break;
            case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK" );
                break;
            case AudioManager.AUDIOFOCUS_LOSS:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_LOSS" );
                break;
            case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_LOSS_TRANSIENT" );
                break;
            case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK" );                 
                break;
            case AudioManager.AUDIOFOCUS_REQUEST_FAILED:
                Logger.d(TAG, "--------Focus change: AUDIOFOCUS_REQUEST_FAILED" );
                break;

        }
    }
}; 
```

手机原生摄像头录制视频时如何获得音频焦点？

# database - 地址输入作为文本区域

> ID：15222524
> 
> 赞同：1
> 
> 时间：2013-03-05T11:22:45.470
> 
> 标签：database, input, interface

我找不到如何为国际用户输入地址的方法。我得出的结论是，文本区域和输入地址就像在字母上一样是最好的。你有什么意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T14:19:46.467

在数据库中混合数据和表示通常不是一个好主意。首先，如果不付出很大的努力，您就无法更改表示。其次，您不能将数据用于一个预期目的以外的用途，例如进行统计（至少在没有大量努力的情况下并非如此）。

对于地址，您可以使用以下字段覆盖大多数地址：

*   职称*（如博士）*
*   名
*   姓名
*   年级*（如硕士、博士）*
*   公司
*   街道*（包括门牌号）*
*   邮政编码
*   城市
*   状态
*   国家

根据您的用例，您可能需要一个字段“addtion to address”，例如“c/o Max Meier”。如果上面的任何字段为空（例如等级或公司），您可以在生成信件的地址部分时将它们省略。

field street 应该存储街道名称以及存储街道名称以及门牌号，因为这在不同国家/地区之间可能存在很大差异：在德国，它是“Hauptstraße 11”，在越南是“53 Quang Trung”。

# .net - .NET WinForms 本地化 - 替换 ComponentResourceManager

> ID：15222528
> 
> 赞同：8
> 
> 时间：2013-03-05T11:22:56.423
> 
> 标签：.net, winforms, visual-studio-2010, localization, resourcemanager

在我当前的项目（.NET Windows 窗体应用程序）中，我要求 .NET Windows 窗体应该本地化，但本地化元素（只是翻译，而不是图像或控制位置）应该来自数据库，以便启用最终用户可以根据需要修改控件的可本地化属性（只是标题/文本）。为了让开发人员摆脱本地化问题的负担，对我来说最好的解决方案是在 VS 设计器中简单地将表单标记为可本地化。这会将所有可本地化的属性值放在表单 .resx 文件中。

现在我的问题是如何从数据库中提供翻译。表单被标记为可本地化的那一刻，VS 表单设计器将放置所有可以本地化的表单 .resx 文件。设计器还将修改标准的 Designer.cs InitializeComponent 方法，以便实例化 ComponentResourceManager，然后使用该资源管理器加载对象（控件和组件）的可本地化属性。

我已经看到人们建立了自己的方法来将本地化属性应用于 Form 及其控件的解决方案。我见过的所有解决方案通常归结为递归地遍历 Form 及其控件的 Controls 集合并应用翻译。不幸的是，.NET Forms 本地化并不是那么简单，这并不能涵盖所有场景，尤其是如果您有一些 3rd 方控件。例如：

```
this.navBarControl.OptionsNavPane.ExpandedWidth = ((int)(resources.GetObject("resource.ExpandedWidth")));
// 
// radioGroup1
// 
resources.ApplyResources(this.radioGroup1, "radioGroup1");
...
this.radioGroup1.Properties.Items.AddRange(new DevExpress.XtraEditors.Controls.RadioGroupItem[] {
new DevExpress.XtraEditors.Controls.RadioGroupItem(resources.GetString("radioGroup1.Properties.Items"), resources.GetString("radioGroup1.Properties.Items1")),
new DevExpress.XtraEditors.Controls.RadioGroupItem(resources.GetString("radioGroup1.Properties.Items2"), resources.GetString("radioGroup1.Properties.Items3"))}); 
```

我见过的所有解决方案都无法进行上述组件所需的翻译。

由于 VS 已经生成了在需要的地方提供翻译的代码，我理想的解决方案是以某种方式用我自己的派生类替换 ComponentResourceManager。如果我可以在 InitializeComponent 中替换以下行：

```
System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1)); 
```

和

```
System.ComponentModel.ComponentResourceManager resources = new MyComponentResourceManager(typeof(Form1)); 
```

然后我可以毫无问题地解决其他所有问题。

不幸的是，我没有找到如何做这样的事情，所以我在这里问一个关于如何做的问题。

PS 我也会接受任何其他符合要求的本地化解决方案： 1\. 无需重新部署应用程序就可以更改翻译 2\. 开发人员在创建表单/用户控件时不应该关心翻译

谢谢你。

编辑：拉里提供了一本很好的参考书，其中的代码部分解决了我的问题。借助该帮助，我能够创建自己的组件，该组件替换 InitializeComponent 方法中的默认 ComponentResourceManager。这是一个名为 Localizer 的组件的代码，它用自定义的 MyResourceManager 替换了 ComponentResourceManager，以便其他人也可以从中受益：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.ComponentModel.Design.Serialization;
using System.CodeDom;
using System.ComponentModel.Design;

namespace LocalizationTest
{
    [Designer(typeof(LocalizerDesigner))]
    [DesignerSerializer(typeof(LocalizerSerializer), typeof(CodeDomSerializer))]
    public class Localizer : Component
    {

        public static void GetResourceManager(Type type, out ComponentResourceManager resourceManager)
        {
            resourceManager = new MyResourceManager(type);
        }

    }

    public class MyResourceManager : ComponentResourceManager
    {
        public MyResourceManager(Type type) : base(type)
        {
        }

    }

    public class LocalizerSerializer : CodeDomSerializer
    {
        public override object Deserialize(IDesignerSerializationManager manager, object codeDomObject)
        {
            CodeDomSerializer baseSerializer = (CodeDomSerializer)
                manager.GetSerializer(typeof(Component), typeof(CodeDomSerializer));
            return baseSerializer.Deserialize(manager, codeDomObject);
        }

        public override object Serialize(IDesignerSerializationManager manager, object value)
        {
            CodeDomSerializer baseSerializer =
                (CodeDomSerializer)manager.GetSerializer(typeof(Component), typeof(CodeDomSerializer));

            object codeObject = baseSerializer.Serialize(manager, value);

            if (codeObject is CodeStatementCollection)
            {
                CodeStatementCollection statements = (CodeStatementCollection)codeObject;
                CodeTypeDeclaration classTypeDeclaration =
                    (CodeTypeDeclaration)manager.GetService(typeof(CodeTypeDeclaration));
                CodeExpression typeofExpression = new CodeTypeOfExpression(classTypeDeclaration.Name);
                CodeDirectionExpression outResourceExpression = new CodeDirectionExpression(
                    FieldDirection.Out, new CodeVariableReferenceExpression("resources"));
                CodeExpression rightCodeExpression =
                    new CodeMethodInvokeExpression(new CodeTypeReferenceExpression("LocalizationTest.Localizer"), "GetResourceManager",
                    new CodeExpression[] { typeofExpression, outResourceExpression });

                statements.Insert(0, new CodeExpressionStatement(rightCodeExpression));
            }
            return codeObject;
        }
    }

    public class LocalizerDesigner : ComponentDesigner
    {
        public override void Initialize(IComponent c)
        {
            base.Initialize(c);
            var dh = (IDesignerHost)GetService(typeof(IDesignerHost));
            if (dh == null)
                return;

            var innerListProperty = dh.Container.Components.GetType().GetProperty("InnerList", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.FlattenHierarchy);
            var innerList = innerListProperty.GetValue(dh.Container.Components, null) as System.Collections.ArrayList;
            if (innerList == null)
                return;
            if (innerList.IndexOf(c) <= 1)
                return;
            innerList.Remove(c);
            innerList.Insert(0, c);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:54:07.317

I'm the author of a localization tool for Visual Studio developers (in the interest of full disclosure). I strongly suggest getting hold of a copy of Guy Smith-Ferrier's book, ".NET Internationalization, The Developer's Guide to Building Global Windows and Web Applications". I believe that's the correct book anyway (correct author for sure), but you'll need to check, since it's been a long time since I looked at it (and maybe he's even written something newer since then). Guy is a MSFT MVP and localization guru. He shows you how to do exactly what you're attempting, in his case, by creating a component that you can drag onto the tray area of each of your forms. The component will then allow you to replace the "ComponentResourceManager" with your own (there are several classes involved in his design). You can then read your strings from any source including a DB. IIRC, his own example even uses a DB. You can probably find the code online without having to purchase his book, since I think he may even provide it on his own site. You can also find free passages from his book on reputable book purchasing sites, since the info is invaluable even if you don't use his techniques (very hard to find elsewhere). Note that I tested his code once upon a time (a long time ago), and it works as advertised.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-23T11:24:30.507

我是这样替换的：

```
public class CustomCodeDomSerializer : CodeDomSerializer
{
    public override object Serialize(IDesignerSerializationManager manager, object value)
    {
        for (var i = 0; manager.Context[i] != null; i++)
        {
            var collection = manager.Context[i] as CodeStatementCollection;
            if (collection != null)
            {
                foreach (var statement in collection)
                {
                    var st = statement as CodeVariableDeclarationStatement;
                    if (st?.Type.BaseType == typeof(ComponentResourceManager).FullName)
                    {
                        var ctr = new CodeTypeReference(typeof(CustomComponentResourceManager));
                        st.Type = ctr;
                        st.InitExpression = new CodeObjectCreateExpression(ctr, new CodeTypeOfExpression(manager.GetName(value)));
                    }
                }
            }
        }
        var baseClassSerializer = (CodeDomSerializer)manager.GetSerializer(value.GetType().BaseType, typeof(CodeDomSerializer));
        var codeObject = baseClassSerializer.Serialize(manager, value);
        return codeObject;
    }
}

[DesignerSerializer(typeof(CustomCodeDomSerializer), typeof(CodeDomSerializer))]
public class CustomUserControl : UserControl { } 
```

然后视图应该继承`CustomUserControl`而不是`UserControl`（或`CustomForm : Form`）：

```
public partial class SomeView : CustomUserControl { ... } 
```

然后生成生成的设计器文件：

```
private void InitializeComponent()
{
    CustomComponentResourceManager resources = new CustomComponentResourceManager(typeof(SomeView));
    ...
} 
```

# mysql - 将 Ruby on Rails 连接到现有的 MySQL 数据库（以前安装的 XAMMP）

> ID：15222537
> 
> 赞同：0
> 
> 时间：2013-03-05T11:23:08.683
> 
> 标签：mysql, ruby, ubuntu, gem, xampp

我已经在 ubuntu 机器上安装了 ruby​​ on rails（确切地说是 gitlab）`xampp`，但我无法将现有连接`mysql`到 ror。`mysql2`我可以通过运行安装 gem

```
"gem install mysql2 -- --with-mysql-include=/opt/lampp/include --with-mysql-config=/opt/lampp/bin/mysql_config". 
```

但是当我运行“捆绑安装”时，它出现了：

```
 "Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension." 
```

和

```
"An error occurred while installing mysql2 (0.3.11)" 
```

等等。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:13:17.517

我遇到了同样的问题，安装了一个库来`mysql`为我修复它。尝试运行：

```
 sudo apt-get install libmysqlclient-dev 
```

并尝试再次安装 gem。

希望它有效！

# jquery - 如何让动画跟随光标

> ID：15222544
> 
> 赞同：1
> 
> 时间：2013-03-05T11:23:26.977
> 
> 标签：jquery, html, css, animation, rotation

因此，目前，如果您将鼠标悬停在指南针上，指针会旋转，但是，当您将鼠标移开时，它只会重置。

有没有办法我可以：

*   当鼠标悬停在任何地方时，让针跟随在任何地方

或者

*   像现在一样在悬停时旋转，但是当我将鼠标移开时会暂停并在我重新悬停时恢复

该网站可以在

[newsunken.tumblr.com](http://newsunken.tumblr.com)

我目前的代码是......

```
.arrow {
    background-image: url(compass.png);
}

.arrowhover {
    position: absolute;
    margin-top: -72px;
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -webkit-transition: all 0s ease-in-out;
    -moz-transition: all 0s ease-in-out;
    -ms-transition: all 0s ease-in-out;
    -o-transition: all 0s ease-in-out;
    transition: all 0s ease-in-out;
} 
```

（即当我取下鼠标时阻止箭头旋转）

自旋码是

```
.arrowhover:hover {
    -webkit-transform: rotate(1440deg);
    -moz-transform: rotate(1440deg);
    -webkit-transition: all 1.7s ease-out;
    -moz-transition: all 1.7s ease-in-out;
    -ms-transition: all 1.7s ease-in-out;
    -o-transition: all 1.7s ease-in-out;
    transition: all 1.7s ease-in-out;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:10:34.670

我不认为你可以纯粹用 CSS 来做到这一点。您将不得不使用 javascript 来获取鼠标 x 和 y 位置，当它在指南针区域内时，根据鼠标位置旋转它。

也许这对您有用： [如何相对于鼠标位置旋转图像？](https://stackoverflow.com/questions/7195825/how-to-rotate-image-in-relation-to-mouse-position)

# tfs - TFS Server 2012 和促进更改

> ID：15222550
> 
> 赞同：1
> 
> 时间：2013-03-05T11:23:36.947
> 
> 标签：tfs, tfs-2012

我开始使用 TFS Team explorer 2012 并碰巧注意到一个名为**Promotion**的新流程。据我了解，团队资源管理器检测到对 TFS 资源管理器之外的文件所做的任何更改并将其计入升级？我对吗？

如何处理我对已通过 TFS 签出的文件进行更改，然后通过 Windows Explorer\Notepad 进行更改但不想包含通过 Windows Explorer\Notepad 所做的更改的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:12:49.250

这是 TFS 2012 的一项新功能，称为`Local Workspaces`.

您是正确的，在 Visual Studio 之外所做的更改可以通过提升它们包含在签入中，如果它们尚未在源代码控制之下。

如果它们已经在源代码管理中并且您**不想**提交它们，那么您需要右键单击该文件并选择`Exclude`. 这会将文件`Included Changes`从`Excluded Changes`.

如果你不喜欢新的`Local Workspaces`，你可以告诉 TFS 回到旧的模型`Server Workspaces`：

*   打开团队资源管理器
*   前往设置
*   在`Team Project Collection`选择下`Source Control`
*   点击`Workspace Settings Tab`
*   在这里您可以选择工作区类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:11:23.120

虽然所有反对者所说的都是正确的，但有一点需要明确提及：Team Foundation Server 的粒度级别没有变化。您仍然可以签出*文件*、编辑*文件*和签入*文件*。

在您的示例中，如果您已签出文件并在记事本中对其进行编辑，则将签入更改。与以前的行为相比，此处没有任何更改。没有办法阻止这些更改被签入，除非使用不同的文件名保存文件。

# python - 将二维数组更新为 matplotlib 动画中的 y 数据

> ID：15222558
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:24:03.410
> 
> 标签：python, animation, matplotlib

我有一组`N`从一个点开始的随机路径`X`。我有一个 Slider 可以更改初始点`X`，从而生成新`N`路径。我希望能够更新路径，但`set_ydata`只接受一维数组。目前我正在清除轴并在每次更新时进行绘图，这不是很有效。有没有内置的方法`matplotlib`呢？

```
xJ = arange(-10,10,0.1)
psinaive = zeros((xJ.shape[0]))
uapprox = zeros((xJ.shape[0],Nt))

wplot = []
wcondplot = []

for i,x in enumerate(xJ):
    WJ = sqrt(dt)*np.random.randn(Ntraj,Nt)
    WJ[:,0] = x
    WJ = np.cumsum(WJ,1)
    wplot.append(WJ)
    cond = V(WJ,limits)[0]
    wcondplot.append(WJ[cond,:])
    wa = 1.0/WJ.shape[0]*exp(-phi(WJ[:,-1],alpha)/lmbda)
    psinaive[i] = sum(wa[cond])
    uapprox[i,:] = 1.0/psinaive[i]*np.dot(wa[cond],WJ[cond,:]).flatten()
    if i % 10 == 0:
        print '..%.1f'%x,

J = -lmbda*log(psinaive)

#plot results

ax1=subplot(221)
plot(xJ,J)
plot(xJ,Jl(xJ,ti,tf,alpha,R,v,t1,limits))
title('$J(x,t)$')
plt.axvline(x=-10)

subplot(222)
plot(xJ,uapprox[:,0])

ax3 = subplot(223)
plot(t,wplot[0].T,alpha=0.2)
title('%d paths'%Ntraj)
ylim((-15,15))
ymin,ymax = ylim()
plt.axvline(x=t1, ymin=(d-ymin)/(ymax-ymin), linewidth=2, color='k')
plt.axvline(x=t1, ymin=(b-ymin)/(ymax-ymin), ymax = (c-ymin)/(ymax-ymin), linewidth=2, color='k')
plt.axvline(x=t1, ymax=(a-ymin)/(ymax-ymin), linewidth=2, color='k')

ax4 = subplot(224)
ax4.set_title('No alive paths')
if len(wcondplot[0])>0:
    ax4.plot(t,wcondplot[0].T,alpha=0.2)
    ax4.set_title('%d alive from %d paths'%(len(wcondplot[0]),Ntraj))
ylim((-15,15))
ymin,ymax = ylim()
plt.axvline(x=t1, ymin=(d-ymin)/(ymax-ymin), linewidth=2, color='k')
plt.axvline(x=t1, ymin=(b-ymin)/(ymax-ymin), ymax = (c-ymin)/(ymax-ymin), linewidth=2, color='k')
plt.axvline(x=t1, ymax=(a-ymin)/(ymax-ymin), linewidth=2, color='k')
subplots_adjust(0.15,0.25)

axsx = axes([0.15,0.1,0.75,0.1])
slx = Slider(axsx,'x',0,len(xJ),0,valfmt='%.0f')

def updatex(val):
    x = int(val)

    ax1.cla()
    ax1.plot(xJ,J)
    ax1.plot(xJ,Jl(xJ,ti,tf,alpha,R,v,t1,limits))
    ax1.set_title('$J(x,t)$')
    ax1.axvline(x=xJ[x])

    ax3.cla()
    ax3.plot(t,wplot[x].T,alpha=0.2)
    ax3.set_title('%d paths'%Ntraj)
    ax3.set_ylim((-15,15))
    ymin,ymax = ax3.get_ylim()
    ax3.axvline(x=t1, ymin=(d-ymin)/(ymax-ymin), linewidth=2, color='k')
    ax3.axvline(x=t1, ymin=(b-ymin)/(ymax-ymin), ymax = (c-ymin)/(ymax-ymin), linewidth=2, color='k')
    ax3.axvline(x=t1, ymax=(a-ymin)/(ymax-ymin), linewidth=2, color='k')

    ax4.cla()
    ax4.set_title('No alive paths')
    if len(wcondplot[x])>0:
        ax4.plot(t,wcondplot[x].T,alpha=0.4)
        ax4.set_title('%d alive from %d paths'%(len(wcondplot[x]),Ntraj))
    ax4.set_ylim((-15,15))
    ymin,ymax = ax4.get_ylim()
    ax4.axvline(x=t1, ymin=(d-ymin)/(ymax-ymin), linewidth=2, color='k')
    ax4.axvline(x=t1, ymin=(b-ymin)/(ymax-ymin), ymax = (c-ymin)/(ymax-ymin), linewidth=2, color='k')
    ax4.axvline(x=t1, ymax=(a-ymin)/(ymax-ymin), linewidth=2, color='k')
    draw()

slx.on_changed(updatex) 
```

结果是：

![结果](../Images/c8b88a2a57f3ea9bf1d546f33cf83285.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:29:02.093

您可以使用这样一个事实，即如果您的数组包含 nans，matplotlib 将创建不同的段，尽管数组的一维维度

```
x = (np.arange(5 * 4) % 4).reshape(5, 4) * 1.
x[x==3] = np.nan
y = x + (np.arange(5 * 4)/4).reshape(5,4)*1.
line2d = plt.plot(x.flatten(),y.flatten()) [0]
print x,y
> [[  0.,   1.,   2.,  nan],
> [  0.,   1.,   2.,  nan],
> [  0.,   1.,   2.,  nan],
> [  0.,   1.,   2.,  nan],
> [  0.,   1.,   2.,  nan]]
> [[  0\.   1\.   2\.  nan]
> [  1\.   2\.   3\.  nan]
> [  2\.   3\.   4\.  nan]
> [  3\.   4\.   5\.  nan]
> [  4\.   5\.   6\.  nan]] 
```

然后您可以毫无问题地使用 set_data() 方法，例如：

```
line2d.set_data(y.flatten()+3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:28:52.037

尝试使用`set_data`它可以节省您清除和重新绘制的时间（您已经意识到这非常慢）。一个使用示例：

```
fig = figure()
ax = fig.add_subplot(111)
p = ax.plot(x, y)

# you do something to your data and want to replot

p.set_data(x, y) 
```

如果您可以发布您的代码，那么我们可以帮助您找到确切的解决方案。

# excel - 在 Excel 应用程序级 C# 加载项中，在没有向导的情况下设置数据源

> ID：15222559
> 
> 赞同：2
> 
> 时间：2013-03-05T11:24:05.190
> 
> 标签：excel, vsto, datasource, add-in

我正在尝试编写一个加载项，允许用户连接到 SQL 数据库并将数据从表中提取到 Excel 中。（这是最简单的解释，但不是必要功能的全部解释。）我找到了这篇文章：

[http://msdn.microsoft.com/en-us/library/cc668212%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/cc668212%28v=vs.100%29.aspx)

它工作得很好。但是，我的问题是：如何以编程方式创建数据源（在上述链接的“创建数据源”中提到）？

例如，我希望用户（通过 Excel 插件）能够输入服务器名称、数据库名称和表名称，然后创建特定的数据集、tableAdapter 和 bindingsource。在启动 Excel 之前，我不想在加载项中“硬编码”（或使用向导来实现）它。

而且我认为有些东西可以将数据导入Excel。那不是我要找的。想要使用加载项是有原因的。

任何帮助/参考将不胜感激！:-)

# php - 如何将文件放入某个谷歌驱动器帐户？

> ID：15222560
> 
> 赞同：0
> 
> 时间：2013-03-05T11:24:05.333
> 
> 标签：php, google-drive-api

我正在使用 PHP 将一些运行时创建的文件放在特定的 Google Drive 帐户上。
如果我使用帐户登录谷歌并启动我的脚本，这些文件将上传到此帐户，即使我使用不同帐户的客户端 ID 和密码

用例：
我使用 a@gmail.com 登录，我使用我的脚本并将文件发送到 a@gmail.com 的 Google Drive 而不是 b@gmail.com 的 Google Drive

即使我使用 a@gmail.com 帐户登录，如何将这些文件上传到 b@gmail.com 帐户？

谢谢

前任。代码

```
 <?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$drive = new Google_Client();

$drive->setClientId(/*client id*/);
$drive->setClientSecret(/*client secret*/);
$drive->setRedirectUri(/*redirect uri (the same URI in the API configuration)*/); 
$drive->setScopes(array('https://www.googleapis.com/auth/drive'));

$gdrive = new Google_DriveService($drive);

file_put_contents('token.json', $drive->authenticate());

$drive->setAccessToken(file_get_contents('token.json'));

$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$createdFile = $service->files->insert($file, array(
  'data' => 'example',
  'mimeType' => 'text/plain',
));

return true; 
```

编辑：

我使用探路者解决方案并创建一个服务帐户。它似乎工作但我仍然有一个问题：在执行结束时我无法在 gDrive 上找到我的文件......也许我已经完成了一个不完整的配置，即使我阅读了文档......

这是代码：

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';
require_once 'google-api-php-client/src/contrib/Google_Oauth2Service.php';
$DRIVE_SCOPE = 'https://www.googleapis.com/auth/drive';
$SERVICE_ACCOUNT_EMAIL = '<email_in_api_access>@developer.gserviceaccount.com';
$SERVICE_ACCOUNT_PKCS12_FILE_PATH = 'google-api-phpclient/<api_key_file>-privatekey.p12';

$key = file_get_contents($SERVICE_ACCOUNT_PKCS12_FILE_PATH);
$auth = new Google_AssertionCredentials(
$SERVICE_ACCOUNT_EMAIL,
array($DRIVE_SCOPE),
$key);
$client = new Google_Client();
$client->setUseObjects(true);
$client->setAssertionCredentials($auth);
$gdrive = new Google_DriveService($client);
$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');
$createdFile = $gdrive->files->insert($file, array(
'data' => 'A test document',
'mimeType' => 'text/plain',
));
return true; 
```

# c# - 我是否应该总是检查返回值是否为空

> ID：15222573
> 
> 赞同：2
> 
> 时间：2013-03-05T11:25:11.130
> 
> 标签：c#, null

如果在一个 A 类中：

```
Class A
    public List<string> getValues 
```

如果我想调用该方法，我是否应该始终检查返回值是否为空？虽然我不认为它可能是空的（应该是一个空列表）。IE

```
Class B
    public void GetSomething
        foreach (var thing in A.getValues)
            //do something.... 
```

或者

```
Class B
    public void GetSomething
        var things = A.getValues;
        if (things != null)
        foreach (var thing in things)
            //then doing something.... 
```

问这个问题的原因是，当我写单元测试时，我让 A 类中的方法返回 null 而不是空列表，但是我不知道在现实生活中是否会发生这种情况，因为如果它可能为 null 那么它总是好的检查而不是尝试捕获异常，哪个更合适？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:34:59.307

简而言之，不，您不应该*总是*检查。您使用的方法的规范应该始终清楚地说明您期望的可能结果的语义是什么。因此，例如，如果您希望 getValues 在没有值时返回一个空列表，并且错误地编写了它以使其返回一个空对象，那么 NullPointerException 是完全正常的事情。警告您您弄乱了方法的规范或其实现。另一方面，getValues 也可能由于某些条件未满足而返回 null 对象。在这种情况下，你应该检查一下，因为它实际上*意味着*什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:34:05.753

如果您已让您的方法返回 null，那么您必须始终在执行任何操作之前检查 null。

在您的情况下，如果您不检查 null 并且 A.GetValues 恰好是 null ，那么它将引发异常

# joomla - 从 Joomla 组件中的数据库中获取列表数据

> ID：15222575
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:25:13.000
> 
> 标签：joomla, joomla2.5

我在 joomla 中创建自定义组件，它将列表数据保存在数据库中，如下所示：["2013-05-04","2013-05-05","2013-05-06","2013-05-07", "2013-05-08","2013-05-09","2013-05-10","2013-05-11","2013-05-12"]

有什么办法可以让我在模块上很好地获取这些数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:35:07.007

它是通过 json_decode() 函数完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:03:41.313

如果我收到您的问题，您想在模块中显示这些内容。请参见以下示例：

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

$output = json_decode($json , true);

print_r($output);
?> 
```

输出：

```
Array
(
    [a] => 1
    [b] => 2
    [c] => 3
    [d] => 4
    [e] => 5
) 
```

然后你可以使用这个输出如下：

```
<?php 
   foreach ($output as $value){
       echo $value;
   }
?> 
```

有关更多信息，请查看：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php) 希望这对您有所帮助。

# .net - 正则表达式识别 .sql 文件中的单词“PRIMARY KEY”

> ID：15222577
> 
> 赞同：0
> 
> 时间：2013-03-05T11:25:20.577
> 
> 标签：.net, regex

我正在尝试构建正则表达式以在 .sql 文件中查找单词 PRIMARY KEY.... 就像有一个包含多个 Create table {} 脚本的文件一样。我只想在创建表时检查是否设置了主键

例如：

```
CREATE TABLE
{
.....
.....
PRIMARY KEY
...
}
CREATE TABLE
{
.....
.....
...
}
CREATE TABLE
{
.....
.....
PRIMARY KEY
...
} 
```

这里第二个创建表不包含主键..所以我想构建正则表达式来查找是否定义了主键......我正在使用.net中的ReadToEnd函数来扫描文件，然后想在它上面应用正则表达式进行匹配..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:39:56.880

我不知道.net，但我认为仅使用单个正则表达式无法做到这一点。我会检查文件，如果新的 CREATE TABLE { 开始，则使用一个正则表达式检查，如果是，请检查下一个 CREATE TABLE { 之前是否有主键。

# c# - C# 套接字无法重新连接

> ID：15222578
> 
> 赞同：1
> 
> 时间：2013-03-05T11:25:21.277
> 
> 标签：c#, windows, sockets

我有一段时间试图解决的问题，但仍然没有成功。我们有简单的服务器客户端应用程序，它通过同步交换消息来工作。

这是相关代码。

创建套接字：

```
Socket sender;

IPAddress ipAddress = IPAddress.Parse(remoteHost);                
IPEndPoint remoteEP = new IPEndPoint(ipAddress, remotePort);
sender = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
sender.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, true);
sender.ReceiveTimeout = 5000;
sender.Connect(remoteEP); 
```

接收数据：

```
try {
if (!sender.Connected)
    Reconnect();
int bytesRec = sender.Receive(readBuffer);

if (bytesRec == 0)
{
   //warning 0 bytes received
}
return Encoding.ASCII.GetString(readBuffer, 0, bytesRec);
}
catch (SocketException se)
{
   //print se.ErrorCode
   throw;
} 
```

发送数据：

```
try {
if (!sender.Connected)
    Reconnect();

byte[] msg = Encoding.ASCII.GetBytes(sendMessage + "\0");

int bytesSent = sender.Send(msg);

return true;
}
catch (SocketException se)
{
   //print se.ErrorCode
   throw;
} 
```

重新连接代码：

```
if (sender != null)
{
    if (sender.Connected)
    {
        sender.Shutdown(SocketShutdown.Both);
        sender.Disconnect(true);
    }

    sender.Close();

    IPAddress ipAddress = IPAddress.Parse(RemoteHost);
    IPEndPoint remoteEP = new IPEndPoint(ipAddress, RemotePort);
    sender = new Socket(AddressFamily.InterNetwork, SocketType.Stream,ProtocolType.Tcp);
    sender.ReceiveTimeout = 5000;
    sender.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, true);

    sender.Connect(remoteEP);
} 
```

这是正在发生的事情：

在接收数据时，我收到 10060 错误代码，这意味着它已超时。所以我尝试重新连接。然后它一直抛出相同的错误代码一段时间，并出现以下异常：连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应 nnnn:x

然后最终它设法“重新连接”但接收到 0 个字节。所以我尝试发送一些数据。它以 WSAECONNABORTED 10053 错误开始失败。我再次尝试重新连接。它继续出现 10053 错误并接收 0 个字节。它永远不会恢复。

所以我关闭了应用程序，重新启动它，但它无法连接，服务器日志说有很多打开的连接。问题是服务器没有看到客户端已断开连接......

我有点迷失在这里。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:41:39.297

我认为应该解决您的问题的更改如下：

> 当没有收到任何字节并且您已根据 Socker 服务器/客户端的要求将 Socket.ReceiveTimeout 和 Socket.SendTimeout 设置为良好的值时（可能会检查手册以了解您使用的目的，通常为 1 到 5 分钟），然后断开套接字并创建一个新连接。因为它表示为**RST** - 重置或来自另一端的孤立连接（TCP 协议术语），即告诉重新连接回来。

## 接收数据

```
try
{
    if (!sender.Connected)
       Reconnect();

    int bytesRec = sender.Receive(readBuffer);    
    if (bytesRec == 0)
    {
        //warning 0 bytes received and some logging
        // Reconnect code here or function calling to reconnect
        Reconnect();
    }
    return Encoding.ASCII.GetString(readBuffer, 0, bytesRec);
}
catch (SocketException se)
{
   //print se.ErrorCode
   throw;
} 
```

# excel - 基于 4 列比较格式化 2 张表格中的单元格

> ID：15222579
> 
> 赞同：0
> 
> 时间：2013-03-05T11:25:22.727
> 
> 标签：excel

我需要在数据集中找到更改的值。

所以我有两张纸，一般来说，相同的数据。

我有两列：**docID**（这是唯一键）和**rev**（不是唯一的）。

我需要找到（仅突出显示/仅显示/...）那些行，其中第一张纸的相同**docID** **rev**在第二张纸中是不同的。

**更新 1**

表 1：

```
docID    rev
1        5
2        6
3        1 
```

表 2：

```
docID    rev
1        6
2        6
3        1 
```

只有第一行让我感兴趣，因为其他人没有改变。

**更新 2**

简单的 if 语句应该可以理解我需要什么。通常这是在类似的测试数据集上完成的，因此单元格不正确。

```
=IF(NOT(AND($B6=Sheet1!$B6;$C6=Sheet1!$C6));1;0) 
```

所以值不相等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:32:17.437

您可以使用条件突出显示中的自定义公式执行此操作：

1.  选择列 docID 列中的顶部单元格，然后选择整个列（在示例中，我假设这是 A 列并且您选择 A1 并且 rev 在 B 列中，两个工作表中的结构相同。根据您的需要进行调整)
2.  转到*主页*->*条件格式*->*新规则*->*使用公式确定要格式化的单元格*并输入以下公式：

    ```
    =VLOKUP(A1,Sheet1!$A:$B,2,0)<>B1

    ```

3.  单击格式并选择您需要的格式。

完毕！

# c# - 多线程 C# 应用程序中的惰性单例

> ID：15222580
> 
> 赞同：15
> 
> 时间：2013-03-05T11:25:25.703
> 
> 标签：c#, .net, multithreading, wcf, singleton

我正在开发一个使用 WCF Web 服务的多线程 c# 应用程序。与 web 服务的连接将有一个特定的超时，我们可以定义它，然后它会关闭。我正在寻找使用单例类存储与 Web 服务的连接。我正在尝试按如下方式获取实例：

```
CLazySingleton ins = CLazySingleton.Instance;
string connection = CLazySingleton.abc; 
```

下面是单例类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace LazySingleton
{
    public class CLazySingleton
    {
        private static readonly Lazy<CLazySingleton> _instance
            = new Lazy<CLazySingleton>(() => new CLazySingleton());
        private static readonly object ThreadLock = new object();
        public static string abc;  
        //I will use the service connection object in place of 'abc' in the application
        //assume that 'abc' is storing the connection object    

        private CLazySingleton()
        { }

        public static CLazySingleton Instance
        {
            get
            {   
                if (abc == null)
                {
                    lock (ThreadLock)
                    {
                        //Make the connection
                        abc = "Connection stored in this variable";
                        Console.WriteLine("Connection Made successfully");
                        return _instance.Value;
                    }                    
                }
                else
                {
                    return _instance.Value;
                }
            }
        }
    }
} 
```

我的问题是： 1\. 这段代码是否能够处理多个线程同时尝试获取实例？这是我目前最大的担忧。2\. 我能有更好的解决方案吗？3.我需要在这里使用'lock'还是使用Lazy方法来处理试图获取实例的多线程？

任何帮助，将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T11:44:16.910

根据微软的[延迟初始化](http://msdn.microsoft.com/en-gb/library/dd997286.aspx)文档，在标题为“线程安全初始化”的部分下：

> 默认情况下，[惰性](http://msdn.microsoft.com/en-gb/library/dd997286.aspx)对象是线程安全的。

考虑到这一点，**您的`abc`字段不必是 static**。当您使用 a`Lazy<T>`来实例化您的单例时，在构造函数中初始化您的连接是安全的`CLazySingleton`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-22T10:57:53.137

> 这段代码是否能够处理多个线程同时尝试获取实例？

在您的场景中，可以将“abc”字段初始化两次。想象一下情况，“abc”变量为空。第一个线程将在值分配之前位于“锁定”块内。第二个线程将在锁之前等待。所以第一个线程将初始化“abc”，第二个线程将重新初始化它（您对 null 的检查超出了锁定范围，这就是原因）。但也许这不是你应该害怕的事情。

> 我可以为此提供更好的解决方案吗？

是的你可以。让我在这个答案的最后一个块中描述它。

> 我需要在这里使用“锁定”还是使用 Lazy 方法来处理试图获取实例的多线程？

在 Lazy 类中创建 Value 属性是线程安全的。在您的场景中，我将使用 Lazy<> 类的属性 IsValueCreated 的优势。您仍然需要 ThreadLock 对象。还有一件事是，一旦您访问 Lazy<> 类的 Value 属性， IsValueCreated 属性将返回 true （这就是技巧 ;-) ）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace LazySingleton
{
    public class CLazySingleton
    {
        private static readonly Lazy<CLazySingleton> _instance
            = new Lazy<CLazySingleton>(() => new CLazySingleton());
        private static readonly object ThreadLock = new object();
        public static string abc;  
        //I will use the service connection object in place of 'abc' in the application
        //assume that 'abc' is storing the connection object    

        private CLazySingleton()
        { }

        public static CLazySingleton Instance
        {
            get
            {   
                if (_instance.IsValueCreated)
                {
                    return _instance.Value;
                }
                lock (ThreadLock)
                {
                    if (abc == null)
                    {
                        abc = "Connection stored in this variable";
                        Console.WriteLine("Connection Made successfully");
                    }
                }
                return _instance.Value;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T11:35:25.183

简单使用 ThreadSafetyMode

```
 Lazy<MergeSort> ty = new Lazy<MergeSort>(LazyThreadSafetyMode.ExecutionAndPublication); 
```

# dynamics-crm-2011 - 是否可以在 CRM 2011 中创建客户类型的自定义查找

> ID：15222581
> 
> 赞同：1
> 
> 时间：2013-03-05T11:25:28.543
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我在 CRM 2011 中有一个自定义实体。我的要求是为该实体创建一个查找字段（例如客户），例如 Out of the Box Customer in Case 实体，它指向帐户和联系人记录。如何创建此自定义客户字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:02:25.540

遗憾的是这是不可能的。对于自定义查找，您必须决定哪个实体是目标。

在您的情况下，您必须定义两个查找（每种类型一个）。顺便说一下，这与客户查找使用的行为相同。它们只是隐藏在你的眼睛之外。

如果你想在未来的版本中看到这个特性，你可以在连接时支持这些请求：

*   [自定义复合查找（1 次查找中的多关系）](https://connect.microsoft.com/dynamicssuggestions/feedback/details/685374/custom-composite-lookups-multi-relationship-in-1-lookup)
*   [让我能够在“客户”实体上创建查找](https://connect.microsoft.com/dynamicssuggestions/feedback/details/678425/give-me-the-ability-to-create-a-lookup-on-the-customer-entity)
*   [将“客户”实体扩展到其他实体](https://connect.microsoft.com/dynamicssuggestions/feedback/details/678426/expand-the-customer-entity-to-other-entities)

# php - ajax从数据库更新文本字段

> ID：15222583
> 
> 赞同：3
> 
> 时间：2013-03-05T11:25:33.143
> 
> 标签：php, html, ajax

我是 ajax 新手，我想问一个我试图解决很多但不知道如何解决的问题。我有一个 html 表单，它有 2 个文本字段区域。当用户向第一个文本字段输入值时，我想从我的数据库中更新第二个。

我浏览了许多在线教程，我自己写了这样的东西：

html:

```
<tr>
    <td width="20"></td>
    <td width="229" bgcolor="#FCECEC">ID</td>
    <td width="319" bgcolor="#FCECEC">NAME</td>  
    <td width="82" align="left"><label>
        <input type="button" name="ADD" id="ADD" value="New User" onclick=" "/>
    </label></td>
</tr>
<tr>  
    <td bgcolor="#FCECEC" align="center">1</td>
    <td><input type="text" name="ID" id="ID" maxlength="11" onchange="showUser(this.value)"   value=" " /></td>
    <td><input type="text" size="40" name="NAME" id="NAME" maxlength="80" value="" /></td>
</tr> 
```

ajax函数：

```
function showUser(str)
{
    if (str=="")
    {
        document.getElementById("NAME").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("NAME").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","/myproject/users_update.php?q="+str,true);
    xmlhttp.send();
} 
```

和 php 方面的一部分：

```
$q=$_REQUEST["q"];
$kps->WhatsId($q);
$tname=$kps->NAME;
$tsname=$kps->SURNAME; 
```

当我这样做时，我不断得到

> 未定义的索引 q

我哪里做错了？这是真的吗？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:51:11.267

从您提供的少量信息中很难确切知道问题出在哪里。

就像布莱恩提到的那样，您应该`document.getElementById("NAME").innerHTML`将`document.getElementById("NAME").value`

但这不是导致问题的原因。在我看来，你在这里弄错了网址： `xmlhttp.open("GET","/myproject/users_update.php?q="+str,true);`

但我不能确定，因为我没有看到你的项目目录

# c# - 使用 C# 跨表单共享数据

> ID：15222585
> 
> 赞同：0
> 
> 时间：2013-03-05T11:25:35.667
> 
> 标签：c#, database, winforms, variables

我一直在尝试在多个表单之间共享一个变量，但没有成功。我对 c# 很陌生，所以尽管阅读了一些关于它的东西，但我还是失败了。下面是程序代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.Common;
using System.Data.OleDb;    

namespace login
{
    public partial class LoginScreen : Form
    {
        public LoginScreen()
        {
            InitializeComponent();
        }

        // Variables
        int count = 0;
        public static System.Data.OleDb.OleDbConnection con = 
                new System.Data.OleDb.OleDbConnection();//database connection

        string dbProvider;
        string dbSource;
        OleDbDataAdapter da; // create database adapter 'da'

        // CREATE DATASET VARIABLE ds1 TO HOLD THE DATABASE 
        public static DataSet ds1 = new DataSet();

        string accountNo;
        string sql;
        string password;
        int rownum = 0;
        bool valid = false;

        private void btnLogin_Click(object sender, EventArgs e)
        {
            accountNo = txtBoxAccntNo.Text;
            valid = validate();  //uses validate() method to check validity 
            if (valid == true && accountNo == "11111111")
            {
                ManagerScreen Manager = new ManagerScreen();
                this.Hide();
                Manager.Show();
            }
            else if (valid == true)
            {
                s customer = new s();
                this.Hide();
                customer.Show();
            }
            else
            {
                if (count == 2)
                {
                    this.Close();
                }
                count += 1;
                txtBoxAccntNo.Clear();
                txtBoxPinNo.Clear();
            }

        }

        private void txtBoxAccntNo_TextChanged(object sender, EventArgs e)
        {

        }

        private void LoginScreen_Load(object sender, EventArgs e)
        {   
            // open database connection and load contents 

            // database connection
            dbProvider = "PROVIDER=Microsoft.ACE.OLEDB.12.0;"; // this is the database provider
            dbSource = "Data Source = 'C:\\Bank.accdb'"; // navigation path
            con.ConnectionString = dbProvider + dbSource;         

        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            // If button exit selected hide this form and open the welcome screen
            WelcomeForm Welcome = new WelcomeForm();
            this.Hide();
            Welcome.Show();
        }

        // IsValid method checks that pass and login are valid 
        private bool validate()
        {
            ds1 = new DataSet();
            con.Open();

            // Validate Account number
            sql = "SELECT * FROM tblCustomers WHERE ((tblCustomers.AccountNo) = '" + txtBoxAccntNo.Text + "')";
            da = new OleDbDataAdapter(sql, con);
            rownum = da.Fill(ds1, "tblCustomers");
            con.Close();

            if (rownum != 1)
            {
                MessageBox.Show("Not a valid Account number! - Try Again ");
                return false;
            }
            else
            {
                // validate the pin
                password = ds1.Tables["tblCustomers"].Rows[0][4].ToString();
                if (password == txtBoxPinNo.Text)
                {
                    MessageBox.Show("valid");
                    return true;
                }
                else
                {
                    MessageBox.Show("Not a valid password - please try again ");
                    return false;
                }
            }
        }           
    }
} 
```

我想与所有其他表单共享变量 accountNo。请告知，因为我真的需要继续这样做。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:37:29.767

The right way to go about this is to use the form to retrieve the information and then store it somewhere else to be accessed as you need it. Don't access it directly in the form from elsewhere - this will require you to keep the login form in scope for the whole application lifecycle. This probably isn't what you want.

In practice, this means creating something like a `Global` static class that everything has access to:

```
public static class Globals {
    public static string AccountNumber {
        get;
        set;
    }
} 
```

From in your login form, after validating the login as correct, you would simply do:

```
Globals.AccountNumber = txtBoxAcctNo.Text; 
```

Then, anywhere else you need the AccountNumber, you can access it as `Globals.AccountNumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:31:45.657

您可以将该 accountNo 属性设为静态，或者您也可以使用一些 getter 方法来访问它。

如果您将 accountNo 设置为静态，您可以通过调用 ClassName.PropertyName 在您的情况下访问它 LoginScreen.accountNo 将是帐号属性。

简单的代码示例

```
public partial class LoginScreen : Form
{
    public LoginScreen()
    {
        InitializeComponent();
    }
    public static string accountNo;
}

public class AnotherClass
{
    string accountNo = LoginScreen.accountNo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:39:15.967

我可以推荐三种方法之一来实现你想要的：

1.  做`accountNo`一个`public static`变量。然后，其他表单可以访问它`LoginScreen.accountNo`（最好有一个属性来控制可见性）。如果您可能有许多活动实例`LoginScreen`并且它们都可能更新 accountNo 并且您希望访问此字段的任何表单获取最新值，这是一个很好的方法。
2.  为整个表单实现一个单例模式，并将`accountNo`其作为一个`public`变量。如果您在任何时候都只有一个公司实例处于活动状态，这是一种很好的方法。
3.  已经`accountNo`是`static`另一个班级的成员并且`LoginScreen`可以通过`UtilClass.accountNo`. 如果其他表单/类可能想要更新该字段和/或它是一个不应与此表单关联的字段，这是一个很好的方法。

# javascript - 我必须为每个页面创建一个新面板吗？

> ID：15222589
> 
> 赞同：8
> 
> 时间：2013-03-05T11:25:52.957
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想在 jqm 站点中为我的选择语言组件使用面板。因此，该组件将需要出现在每个页面上。这是单页面板的设置。

来自[jquerymobile.com](http://jquerymobile.com/demos/1.3.0/docs/widgets/panels/)（...我添加了一个标题按钮）

```
 <div id="mypanel" data-role="panel" >
    <!-- panel content goes here -->
  </div><!-- /panel -->

  <div id="myheader" data-role="header" >
    <a id='panel_toggle' data-role='button'>choose language</a>
  </div><!-- /header -->

  <!-- content -->
<!-- footer -->

</div><!-- page --> 
```

我认为我有 3 个解决方案：

*   A - 在每个页面上创建面板的副本 ---- 如果 page_N 上的状态发生更改，这将是一个问题，那么所有其他页面都需要同步

*   B - 创建一个在页面更改时以编程方式移动的单个面板 ---- 这似乎是一个 hack

*   C - 发现 jqm 是否已经解决了这个问题----因此我问这个问题:)

jqm 是否有办法将面板从一个页面移动到另一个页面？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T12:33:14.240

您最好的做法是为每个页面动态创建一个面板。

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/pZzrk/](http://jsfiddle.net/Gajotres/pZzrk/)

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){                
    $('<div>').attr({'id':'mypanel','data-role':'panel'}).appendTo($(this));
    $('<a>').attr({'id':'test-btn','data-role':'button'}).html('Click me').appendTo('mypanel');
    $.mobile.activePage.find('#mypanel').panel();
    $(document).on('click', '#open-panel', function(){   
         $.mobile.activePage.find('#mypanel').panel("open");       
    });    
}); 
```

几个说明：

*   $.mobile.activePage 是必需的，因为我们将在每个页面中都有相同的面板，并且它们都将具有相同的 id。如果我们在没有活动页面的情况下打开它，我们将在 DOM 中打开它的第一次出现。

jQuery Mobile 开发人员表示，在下一个主要版本中，面板小部件将不再需要成为页面的一部分，而是将其放置在与页面 div 相同的级别。所以需要一个面板。不幸的是，您需要动态创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T19:46:10.540

这是我想出的解决方案。我将面板内容存储在隐藏的 div 中，并推迟 jquery 移动初始化。当文档加载时，我将面板内容附加到每个 (jqm) 页面元素，然后初始化 jqm。唯一的性能损失发生在页面首次加载时。

HTML：

```
<div data-role='page' class='page'>
  <div data-role='content'>
    <h1>One</h1>
    <a href='#nav' data-role='button'>show nav</a>
  </div>
</div>

<div data-role='page' class='page'>
  <div data-role='content'>
    <h1>Two</h1>
    <a href='#nav' data-role='button'>show nav</a>
  </div>
</div>

<div id='panel-content' style='display:none'>
   <div data-role='panel' class='panel-holder' data-position="right" data-display="reveal" id='nav'>
   <div data-role="content">
     <ul>
       <li><a href="#first" data-link="first">first</a></li>
       <li><a href="#second" data-link="first">second</a></li>
     </ul>
   </div>
</div>
</div> 
```

脚本：

```
$.mobile.autoInitializePage = false;
$(document).on("ready" function(evt) {
    var panelHtml = $("#panel-content").html();
    var pages = $(".page");
    for (var i = 0; i < pages.length; i++)
    { //done synchronously so we can initialize jquery mobile after the DOM is all setup
       $(pages[i]).append(panelHtml);
    }

    $("#panel-content").remove(); // this doesn't need to be in the DOM anymore
    $.mobile.initializePage();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-10T09:23:44.437

灵感来自 Gajotres 和 AppFramework 处理面板的方式，我做了这个。它通过将定义的面板复制到活动页面来工作，面板由页面 div 的右面板和左面板属性中的 id 定义：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){
    // remove unused tmp panels from DOM
    $("#tmpRightPanel").remove();
    $("#tmpLeftPanel").remove();

    // Hide buttons by default (I'm using a static header and footer on every page too)
    $("#openRightPanel").css("display", "none");
    $("#openLeftPanel").css("display", "none");

    // check if right-panel attribute is set on the page
    if ($(this).attr("right-panel")) {
        // if it is, it should append the defined right-panel to the page
        $("#"+$(this).attr("right-panel")).clone().appendTo($(this));

        // rename it to tmpRightPanel
        $.mobile.activePage.find('#'+$(this).attr("right-panel")).attr("id", "tmpRightPanel");

        // make it a panel
        $.mobile.activePage.find('#tmpRightPanel').panel();

        // make it visible (the original right panel is set to display: none)
        $.mobile.activePage.find('#tmpRightPanel').css("display", "block");

        // make the button to open the panel visible
        $("#openRightPanel").css("display", "block");
    }

    // same as right-panel above
    if ($(this).attr("left-panel")) {
        $("#"+$(this).attr("left-panel")).clone().appendTo($(this));
        $.mobile.activePage.find('#'+$(this).attr("left-panel")).attr("id", "tmpLeftPanel");
        $.mobile.activePage.find('#tmpLeftPanel').panel();
        $.mobile.activePage.find('#tmpLeftPanel').css("display","block");
        $("#openLeftPanel").css("display", "block");
    }
});

// make the open panel buttons clickable
$(document).on('click', '#openRightPanel', function(){   
    $.mobile.activePage.find('#tmpRightPanel').panel("open");
});

$(document).on('click', '#openLeftPanel', function(){
    $.mobile.activePage.find('#tmpLeftPanel').panel("open");
}); 
```

制作一个这样的页面：

```
 <div id="main" data-role="page" data-title="Main" right-panel="right-panel" left-panel="left-panel">
         <div class="ui-content">
              some page
         </div>
    </div> 
```

并将面板放在页面外的某个位置，并像这样隐藏它们：

```
 <!-- leftpanel -->
    <div data-role="panel" id="left-panel" data-display="push" data-position="left" data-theme="a" style="display:none;">
         something something something
    </div>
    <!-- /leftpanel -->

    <!-- rightpanel -->
    <div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="a" style="display:none;">
         something something something
    </div>
    <!-- /rightpanel --> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-04T14:52:48.033

我自己一直在努力解决这个问题，这是我正在使用的解决方案：

```
$( ".page" ).on(
    "pageshow",
    function ( event, prevPage ) {
        var $page = $( this ),
            $prevPage = $( prevPage.prevPage ),
            $menuPanel = $( "#panel-menu", $prevPage );

        $menuPanel
            .remove()
            .prependTo( $page );

        $page.trigger( "create" );
    }
); 
```

诀窍似乎是使用 .remove() 而不是 .detach() 来拾取您想要移动的面板 - 没有任何存储的 jQuery 对象 - 这样 jQuery Mobile 就不会对标记做出假设。此外，令我震惊的是，该解决方案增加了 DOM 操作的大量开销。这并不理想，但它确实有效。

编辑：请注意，它已设置为适用于每个页面，并在加载第一页时触发，您可能有菜单开始并且没有前一页对象。但是您可能可以将菜单保留在其他地方并在那里寻找它作为后备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-25T02:32:29.347

在**Jquery 1.4.4**中，您可以简单地使用：

```
<script>
    $(function(){
        $("[data-role='header'],[data-role='footer']").toolbar();
    });
</script>
<script id="panel-init">
        $(function(){
            $( "[data-role='panel']").panel();
        $( "[data-role='listview']").listview();    
    });
</script> 
```

这适用于我的课堂移动网络项目，我的**移动网络应用程序老师**今天刚刚向我们展示了这一点。

**[在Jquery 移动 Web 应用程序](http://soldierupdesigns.com/web295/jquery-mobile "Jquery Mobile Web Project")**中查看它

页面代码的其余部分是：

```
<div data-role="header" style="overflow-x:hidden;" data-position="fixed" data-theme="a">
        <h1>Page One</h1>
        <div data-role="controlgroup" data-type="horizontal" class="ui-mini ui-btn-left ui-icon-notext">
            <a href="#nav-panel" class="ui-btn ui-btn-icon-right ui-icon-bars">Menu</a>
            <a href="//soldierupdesigns.com/web295/jquery-mobile/" data-rel="back" data-ajax="false" class="ui-btn ui-btn-icon-right ui-icon-back">back</a>
        </div>
        <a href="#add-form" class="ui-btn-right ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-gear">Add Form</a>
        <div data-role="navbar">
            <ul>
                <li><a href="//soldierupdesigns.com/web295/jquery-mobile/" class="ui-btn-active">One</a></li>
                <li><a href="#page2">Page Two</a></li>
                <li><a href="#page3">Page Three</a></li>
                <li><a href="#page4">Page Four</a></li>
                <li><a href="#page5">Page Five</a></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /header -->
    <div data-role="panel" data-display="overlay" data-theme="b" id="nav-panel" data-inset="false" data-position-fixed="true">
        <ul data-role="listview" data-theme="b">
            <li class="list-group-item active" data-icon="delete"><a href="#" data-rel="close" style="color:#ffffff;">Close menu</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Accordion</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Ajax Navigation</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Autocomplete</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Buttons</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Checkboxes</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Collapsibles</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Controlgroup</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Dialogs</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Fixed toolbars</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Flip switch toggle</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Footer toolbar</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Form elements</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Grids</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Header toolbar</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Icons</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Links</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Listviews</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Loader overlay</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Navbar</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Navbar, persistent</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Pages</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">New</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Popup</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Radio buttons</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Select</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Slider, single</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">New</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">New</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">New</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Text inputs & textarea</a></li>
            <li class="list-group-item"><a href="#panel-responsive-page2">Transitions</a></li>
        </ul>
    </div><!-- /panel -->

    <div data-role="panel" data-position="right" data-display="reveal" data-theme="a" id="add-form">

        <form class="userform">

            <h2>Login</h2>

            <label for="name">Username:</label>
            <input type="text" name="name" id="name" value="" data-clear-btn="true" data-mini="true">

            <label for="password">Password:</label>
            <input type="password" name="password" id="password" value="" data-clear-btn="true" autocomplete="off" data-mini="true">

            <div class="ui-grid-a">
                <div class="ui-block-a"><a href="#" data-rel="close" class="ui-btn ui-shadow ui-corner-all ui-btn-b ui-mini">Cancel</a></div>
                <div class="ui-block-b"><a href="#" data-rel="close" class="ui-btn ui-shadow ui-corner-all ui-btn-a ui-mini">Save</a></div>
            </div>
        </form>

    </div><!-- /panel -->
    <div data-role="page" class="ui-responsive-panel" id="panel-responsive-page1" data-title="Panel responsive page">
        <div class="ui-content"></div>
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
            <h1>Panel responsive</h1>
            <p>This is a typical page that has two buttons in the header bar that open panels. The left panel has the push display mode, the right panel reveal. To make this responsive, you can make the page re-flow at wider widths. This allows both the panel menu and page to be used together when more space is available. This behavior is controlled by CSS media queries. You can create a custom one for a specific breakpoint or use the breakpoint preset by adding the <code>class="ui-responsive-panel"</code> to the page container. We have added this class on this demo page. Note that when using the preset class, we also hide the dismiss layer on wider screens if the panel has the push display mode.</p>
            <div data-demo-html="#panel-responsive-page1" data-ajax="true" >View Source</div><!--/demo-html -->
            <br>
            <br>
            <br>
            <br>
            <br>
            <a href="#panel-responsive-page1" data-rel="back" data-ajax="false" class="ui-btn ui-shadow ui-corner-all ui-mini ui-btn-inline ui-icon-carat-l ui-btn-icon-left ui-alt-icon ui-nodisc-icon">back</a>
        </div><!-- /content --> 
    </div><!-- /page -->

    <div data-role="footer" style="overflow:hidden;" data-position="fixed" data-tap-toggle="false" class="jqm-footer" data-theme="a">
        <div data-role="navbar">
            <ul>
                <li><a href="//soldierupdesigns.com/web295/jquery-mobile/" class="ui-btn-active">One</a></li>
                <li><a href="#page2">Page Two</a></li>
                <li><a href="#page3">Page Three</a></li>
                <li><a href="#page4">Page Four</a></li>
                <li><a href="#page5">Page Five</a></li>
            </ul>
        </div><!-- /navbar -->
        <p>Copyright 2014 The jQuery Foundation</p>
        <p>jQuery Mobile Demos version <span class="jqm-version"></span></p>
    </div><!-- /footer -->
    <div data-role="page" id="panel-responsive-page2">

        <div data-role="header">
            <h1>Landing page</h1>
        </div><!-- /header -->

        <div role="main" class="ui-content jqm-content">

            <p>This is just a landing page.</p>

            <a href="#panel-responsive-page1" data-rel="back" data-ajax="false" class="ui-btn ui-btn-icon-right ui-icon-back">back</a>

        </div><!-- /content -->

    </div><!-- /page -->
    <div data-role="page" class="jqm-demos ui-responsive-panel" id="page2" data-title="Panel responsive page">
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
            <h1>Page 2</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pretium pretium nisi in semper. Integer lectus nibh, fermentum rutrum sagittis vel, sagittis in sem. Praesent condimentum, orci vitae dapibus laoreet, augue odio luctus arcu, eget ultrices lacus ligula non mi. Mauris aliquam et ligula vel mollis. Curabitur pulvinar quis augue id tempus. Phasellus rutrum rhoncus mauris, vel tincidunt sapien porttitor eget. Vivamus sagittis lacus non felis rhoncus, sed feugiat odio ornare. Praesent at sapien vel dolor gravida imperdiet. Nulla mi felis, elementum eget sapien ac, cursus lobortis risus. Aliquam in lacus in arcu placerat laoreet et quis nulla. Morbi et nunc ultricies, molestie augue a, tempor ipsum. Vestibulum non mi mattis, dapibus magna non, condimentum risus. Nam fermentum, ligula ultrices rhoncus vestibulum, augue diam feugiat elit, vitae tincidunt urna odio at erat. Maecenas in mattis libero.</p>
            <p>Sed pulvinar nibh nulla, vitae dapibus odio faucibus id. Curabitur rutrum sodales dolor. Suspendisse mattis semper dapibus. Nullam iaculis tristique orci, ut consectetur augue accumsan eget. Duis turpis massa, egestas at lobortis nec, mollis eget sapien. Aliquam sed blandit lacus, ac fringilla nunc. Praesent quis faucibus magna, a imperdiet nulla. Pellentesque tristique, elit ut cursus tristique, ex turpis placerat dolor, non vehicula sem urna a nibh. In tristique hendrerit ex nec rutrum. Aenean sodales erat nisl, sed consequat enim consectetur id. Vivamus sit amet suscipit quam, a efficitur ante. Integer in luctus diam. Integer fringilla felis risus, vitae vehicula quam pharetra vel. Maecenas ligula lacus, lobortis a condimentum sit amet, faucibus sit amet nisi. Donec mattis scelerisque fringilla.</p>
        </div>
    </div><!-- /page2 -->
    <div data-role="page" class="jqm-demos ui-responsive-panel" id="page3" data-title="Panel responsive page">
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
            <h1>Page 3</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pretium pretium nisi in semper. Integer lectus nibh, fermentum rutrum sagittis vel, sagittis in sem. Praesent condimentum, orci vitae dapibus laoreet, augue odio luctus arcu, eget ultrices lacus ligula non mi. Mauris aliquam et ligula vel mollis. Curabitur pulvinar quis augue id tempus. Phasellus rutrum rhoncus mauris, vel tincidunt sapien porttitor eget. Vivamus sagittis lacus non felis rhoncus, sed feugiat odio ornare. Praesent at sapien vel dolor gravida imperdiet. Nulla mi felis, elementum eget sapien ac, cursus lobortis risus. Aliquam in lacus in arcu placerat laoreet et quis nulla. Morbi et nunc ultricies, molestie augue a, tempor ipsum. Vestibulum non mi mattis, dapibus magna non, condimentum risus. Nam fermentum, ligula ultrices rhoncus vestibulum, augue diam feugiat elit, vitae tincidunt urna odio at erat. Maecenas in mattis libero.</p>
            <p>Sed pulvinar nibh nulla, vitae dapibus odio faucibus id. Curabitur rutrum sodales dolor. Suspendisse mattis semper dapibus. Nullam iaculis tristique orci, ut consectetur augue accumsan eget. Duis turpis massa, egestas at lobortis nec, mollis eget sapien. Aliquam sed blandit lacus, ac fringilla nunc. Praesent quis faucibus magna, a imperdiet nulla. Pellentesque tristique, elit ut cursus tristique, ex turpis placerat dolor, non vehicula sem urna a nibh. In tristique hendrerit ex nec rutrum. Aenean sodales erat nisl, sed consequat enim consectetur id. Vivamus sit amet suscipit quam, a efficitur ante. Integer in luctus diam. Integer fringilla felis risus, vitae vehicula quam pharetra vel. Maecenas ligula lacus, lobortis a condimentum sit amet, faucibus sit amet nisi. Donec mattis scelerisque fringilla.</p>
        </div>
    </div><!-- /page3 -->
    <div data-role="page" class="jqm-demos ui-responsive-panel" id="page4" data-title="Panel responsive page">
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
            <h1>Page 4</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pretium pretium nisi in semper. Integer lectus nibh, fermentum rutrum sagittis vel, sagittis in sem. Praesent condimentum, orci vitae dapibus laoreet, augue odio luctus arcu, eget ultrices lacus ligula non mi. Mauris aliquam et ligula vel mollis. Curabitur pulvinar quis augue id tempus. Phasellus rutrum rhoncus mauris, vel tincidunt sapien porttitor eget. Vivamus sagittis lacus non felis rhoncus, sed feugiat odio ornare. Praesent at sapien vel dolor gravida imperdiet. Nulla mi felis, elementum eget sapien ac, cursus lobortis risus. Aliquam in lacus in arcu placerat laoreet et quis nulla. Morbi et nunc ultricies, molestie augue a, tempor ipsum. Vestibulum non mi mattis, dapibus magna non, condimentum risus. Nam fermentum, ligula ultrices rhoncus vestibulum, augue diam feugiat elit, vitae tincidunt urna odio at erat. Maecenas in mattis libero.</p>
            <p>Sed pulvinar nibh nulla, vitae dapibus odio faucibus id. Curabitur rutrum sodales dolor. Suspendisse mattis semper dapibus. Nullam iaculis tristique orci, ut consectetur augue accumsan eget. Duis turpis massa, egestas at lobortis nec, mollis eget sapien. Aliquam sed blandit lacus, ac fringilla nunc. Praesent quis faucibus magna, a imperdiet nulla. Pellentesque tristique, elit ut cursus tristique, ex turpis placerat dolor, non vehicula sem urna a nibh. In tristique hendrerit ex nec rutrum. Aenean sodales erat nisl, sed consequat enim consectetur id. Vivamus sit amet suscipit quam, a efficitur ante. Integer in luctus diam. Integer fringilla felis risus, vitae vehicula quam pharetra vel. Maecenas ligula lacus, lobortis a condimentum sit amet, faucibus sit amet nisi. Donec mattis scelerisque fringilla.</p>
        </div>
    </div><!-- /page4 -->
    <div data-role="page" class="jqm-demos ui-responsive-panel" id="page5" data-title="Panel responsive page">
        <div role="main" class="ui-content jqm-content jqm-fullwidth">
            <h1>Page 5</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pretium pretium nisi in semper. Integer lectus nibh, fermentum rutrum sagittis vel, sagittis in sem. Praesent condimentum, orci vitae dapibus laoreet, augue odio luctus arcu, eget ultrices lacus ligula non mi. Mauris aliquam et ligula vel mollis. Curabitur pulvinar quis augue id tempus. Phasellus rutrum rhoncus mauris, vel tincidunt sapien porttitor eget. Vivamus sagittis lacus non felis rhoncus, sed feugiat odio ornare. Praesent at sapien vel dolor gravida imperdiet. Nulla mi felis, elementum eget sapien ac, cursus lobortis risus. Aliquam in lacus in arcu placerat laoreet et quis nulla. Morbi et nunc ultricies, molestie augue a, tempor ipsum. Vestibulum non mi mattis, dapibus magna non, condimentum risus. Nam fermentum, ligula ultrices rhoncus vestibulum, augue diam feugiat elit, vitae tincidunt urna odio at erat. Maecenas in mattis libero.</p>
            <p>Sed pulvinar nibh nulla, vitae dapibus odio faucibus id. Curabitur rutrum sodales dolor. Suspendisse mattis semper dapibus. Nullam iaculis tristique orci, ut consectetur augue accumsan eget. Duis turpis massa, egestas at lobortis nec, mollis eget sapien. Aliquam sed blandit lacus, ac fringilla nunc. Praesent quis faucibus magna, a imperdiet nulla. Pellentesque tristique, elit ut cursus tristique, ex turpis placerat dolor, non vehicula sem urna a nibh. In tristique hendrerit ex nec rutrum. Aenean sodales erat nisl, sed consequat enim consectetur id. Vivamus sit amet suscipit quam, a efficitur ante. Integer in luctus diam. Integer fringilla felis risus, vitae vehicula quam pharetra vel. Maecenas ligula lacus, lobortis a condimentum sit amet, faucibus sit amet nisi. Donec mattis scelerisque fringilla.</p>
        </div>
    </div><!-- /page5 --> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T22:30:02.740

“面板不能放置在页面之外，但这个限制将在未来的版本中删除。” （来自[http://view.jquerymobile.com/1.3.1/dist/demos/widgets/panels/](http://view.jquerymobile.com/1.3.1/dist/demos/widgets/panels/)）

这种能力似乎是使面板作为整个应用程序导航设备最有用和最方便的关键。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T12:10:46.497

面板是 1.3 中引入的一个新概念。所以让我们希望更多的教程很快就会出现。至于您的问题，我想您最好在每个页面中编写一个面板。您可以实时更改页面，但请确保按照文档中的说明调用以下方法。

```
$( "#mypanel" ).trigger( "updatelayout" ); 
```

我不确定其他方法是否可行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-14T08:52:59.900

我遇到了同样的问题并最终使用*iframe*从文件中加载持久内容（在我的情况下是复杂的搜索表单）：

```
<div data-role="panel" ...>
    <div data-role="collapsible" ...>
        <h4>Search for Hotel</h4>
        <div class="tmbe-sformcontainer">
            <iframe class="tmbe-sform" src="sform.html" frameborder="0"></iframe>
... 
```

每当用户提交搜索条件时，sform.html 都会向主页发送一条消息：

```
window.parent.postMessage({action:"search",params:criteria},'*'); 
```

主页像这样捕获它：

```
window.onmessage = function (e) {
if (e.data.action == "search") {
    var criteria = e.data.params;
    loadHotelListPage(criteria);
}
}; 
```

我知道这很奇怪，但它有效

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-16T22:43:12.763

对于面板、页眉和页脚，我为每个元素创建了一个模板（我使用[了 dustjs ）。](http://akdubya.github.io/dustjs/)在这种情况`pagebeforecreate`下，我将 html 附加到当前页面中。`pagebeforecreate`如果您希望 JQM “增强” html，则必须使用事件。如果你不关心这个，你可以使用 `pagecreate' 事件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-28T13:51:41.273

我的方法与此处的其他答案相似，但完全不同，值得发帖。

在我的多页项目中，我在第一页中构建导航面板，如下所示：

```
<div data-role="page" id="index">
<div data-role="panel" data-position-fixed="true" data-theme="a" id="nav-panel">
            <ul data-role="listview" data-theme="a" class="nav-search">
                <li data-icon="delete"><a href="#" data-rel="close">Close menu</a></li>
                    <li><a href="#" data-destination="#home">Home</a></li>
                    <li><a href="#" data-destination="#search">Search</a></li>
                    <li><a href="#" data-destination="#about">About</a></li>
            </ul>
</div> 
 <!-- etc.... --> 
```

然后在随后的页面中，我添加了一个带有合适类名的 div 来识别它：

```
<div data-role="page" id="search">
        <div class="navPanelChild"></div>
<!-- etc.... --> 
```

然后在应用程序第一页的 pagebeforecreate 事件上，我克隆导航面板并用它替换所有子容器：

```
$(document).delegate("#index", "pagebeforecreate", function () {

            var navpanelCopy = $( "#nav-panel" ).clone();
            $( ".navPanelChild" ).replaceWith(navpanelCopy);

            }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-28T23:43:08.813

我在使用单页模板时遇到了这个问题。我只想拥有一个带有 id 菜单的 div 并将其附加到单页模板的所有页面中。

我的菜单面板代码如下所示：

```
<div id="menu">
    <h1>Menu</h1>
    ... some content ---
</div> 
```

我的JS代码是：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){          

// if the page hasn't got yet a menu panel, append a new menu
if ($.mobile.activePage.find(".menu").length===0) {        
    $('<div>').attr({'data-role':'panel',"class":"menu"}).appendTo($(this));

    // copy the contents of the panel defined before    
    $.mobile.activePage.find('.menu').html($("#menu").html()).panel();    
}

// if click the .showMenu button, open the menu
$(document).on('click', '.showMenu', function(){         
    $.mobile.activePage.find('.menu').panel("open");       
}); 
```

});

这段代码完美无缺，我很高兴得到我一直在寻找两个小时或更长时间的问题的正确答案。

如果有效，请发表评论。来自西班牙的问候

# php - 通过jquery发送时如何在php中读取Excel文件数据

> ID：15222591
> 
> 赞同：1
> 
> 时间：2013-03-05T11:26:02.213
> 
> 标签：php, javascript, jquery, ajax, phpexcel

这是我的 jquery 代码，它将数据发送到 php 文件 -

```
jQuery("#btn_upload").click(function(){
    var exceldata = jQuery("#form_imput_field").serialize();
    var url = "phpfilepath/get-data-from-excel/exceldata/" + exceldata;
    if( exceldata != "" )
    {
        jQuery.ajax({
            url: url,
            type: 'post',
            success: function(data)
            {
                alert(data);
            }
        })
    }
    else
    {
        alert("I am in else");
    }
}); 
```

我的 PHP 方法 -

```
public function get-data-from-excel()
{
    //Get All Parameter data
    $params = $this->_getAllParams();
    echo "<pre>";print_r($params);die;
} 
```

如何从中读取 Excel 数据？要创建我以前使用的 Excel，`PHP EXCEL`但可以让它在读取中使用，因为我不知道如何从该流中拆分数据。

当前警报输出 -`MAX_FILE_SIZE=134217728`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:45:19.270

如果您尝试`<input type="file"/>`使用 JQuery 和 AJAX 坏消息提交标签，则不能仅使用 JQuery 来完成。您需要使用插件来归档它。例如[iframe-post-form](http://archive.plugins.jquery.com/project/iframe-post-form)。

一旦您的服务器中有 excel 文件（例如存储在某个临时目录中），您应该能够使用 PHPExcel.php 读取它

# wpf - 来自文件 PixelFormat 的 BitmapImage 始终为 bgr32

> ID：15222596
> 
> 赞同：3
> 
> 时间：2013-03-05T11:26:22.943
> 
> 标签：wpf, bitmapimage, pixelformat

我正在使用以下代码从文件中加载图像：

```
BitmapImage BitmapImg = null;
BitmapImg = new BitmapImage();
BitmapImg.BeginInit();
BitmapImg.UriSource = new Uri(imagePath);
BitmapImg.CacheOption = BitmapCacheOption.OnLoad;
BitmapImg.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
BitmapImg.EndInit(); 
```

它按预期工作，除了无论我加载哪种图像（24 位 RGB、8 位灰色、12 位灰色……），在 .EndInit() 之后，BitmapImage 始终具有格式 bgr32。我知道网上有讨论，但我没有找到任何解决这个问题的方法。你们有谁知道它是否已经解决了？

谢谢，

塔比纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:18:07.753

从备注部分中[`BitmapCreateOptions`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcreateoptions.aspx)：

> 如果未选择 PreservePixelFormat，则系统会根据系统确定将产生最佳性能的内容来选择图像的 PixelFormat。启用此选项会保留文件格式，但可能会导致性能下降。

因此，您还需要设置`PreservePixelFormat`标志：

```
var bitmap = new BitmapImage();
bitmap.BeginInit();
bitmap.UriSource = new Uri(imagePath);
bitmap.CacheOption = BitmapCacheOption.OnLoad;
bitmap.CreateOptions = BitmapCreateOptions.IgnoreImageCache
                     | BitmapCreateOptions.PreservePixelFormat;
bitmap.EndInit(); 
```

# javascript - dojo.connect 事件对象未定义

> ID：15222598
> 
> 赞同：0
> 
> 时间：2013-03-05T11:26:32.423
> 
> 标签：javascript, events, dojo, undefined, dom-events

根据 Dojo 的文档，我通过`dojo.connect`a连接了一个函数：`dojox.layout.ContentPane`

```
dojo.connect(cp, 'onHide', function(e) {
    alert('test');
    console.log(e);
}); 
```

我希望参数`e`是触发的事件对象，但控制台输出是`undefined`. 这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:05:54.273

答案取决于您连接到什么。

*   如果您要连接到一个 dom 事件（您的示例不是），那么您将获得传递给您的函数的 dom 事件对象。
*   如果您要连接到 javascript 对象中的函数（这就是您的示例），那么传递给连接到 (onHide) 的函数的参数将传递给您的函数。我猜没有参数可以传递给`onHide`函数。

注：`dojo.connect`已替换为`dojo/on`.

# ios - 更新 Coredata 中的一些属性

> ID：15222606
> 
> 赞同：0
> 
> 时间：2013-03-05T11:27:04.083
> 
> 标签：ios, core-data, updates

CoreData 有类似的东西：

```
update Table
set Field_1 = 0
where Field_2 = 10 
```

一次更新多个数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:29:07.527

第 I 步：您可以做的是，使用 Predicate (Field_2) 从 Coredata 获取特定记录，并将获取的记录保存在 ManagedContext 中。

第二步：更改该上下文中字段的值并按照最后一步

第三步：保存那个托管对象上下文。

您的更改将反映在 coredata 中。

对于代码，您可以使用 Xcode 中的代码片段选项并从那里获取代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:32:04.533

你可以使用这样的东西：

```
NSArray *searchObjects = [context executeFetchRequest:fetchRequest error:&error];
[searchObjects setValue:newValue forKey:@"entityProperty"];
[context save:&error]; 
```

您将必须`fetchRequest`根据您的搜索条件创建对象

# jquery - 放大 jqplot 不起作用，也无法绘制数据点

> ID：15222608
> 
> 赞同：0
> 
> 时间：2013-03-05T11:27:07.967
> 
> 标签：jquery, graph, jqplot

我`jqplot`用于绘制图表。下面是代码：

```
 $.jqplot.config.enablePlugins = true;
    // For these examples, don't show the to image button.
    $.jqplot._noToImageButton = true;

    var ticks = ["8/25/2008","1/22/2009","6/20/2009","7/20/2009","10/20/2009","6/20/2010","2/20/2011"] ; 

  goog = [[56, 60, 79,20,34,67]];

  var plot1 = $.jqplot(id, goog, {
      title: title,
      series: [{
          label: series,
          neighborThreshold: -1
      }],

       axesDefaults: {                                                       
          tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
          tickOptions:{
            angle: -30,
            fontSize: '10pt'

          }
      }, 

      seriesDefaults: {
          showMarker:true,                      
          pointLabels: { show:false }        
        },

      axes: {
          xaxis: {
              renderer: $.jqplot.DateAxisRenderer,
              min:'Sun Aug 24 16:00:00 2008',
              max:'Sun Jan 21,16:00:00 2009',
              numberTicks: 7,
             // tickInterval: '4 months',
             ticks : ticks,

              tickOptions:{formatString:'%#c'},

          },
          yaxis: {
              tickOptions:{formatString:'%.2f'}
          }
      },
      cursor:{
        show: true,
        zoom:true,
        showTooltip:true
      }
  });

  $('.button-reset').click(function() { plot1.resetZoom() }); 
```

这些是我面临的问题

1.  没有绘制数据点，所以我得到一个空白图表。

2.  缩放时，只有 Y 轴发生变化，X 轴保持不变。

3.  `CanvasAxisTickRenderer`不工作，所以我没有得到`ticks`指定的角度。

4.  `min`并且`max`对于 Xaxis 也不起作用，图形本身绘制了数组`ticks`中的第一个和最后一个值。`ticks`

我是新手，`jquery`所以请不要介意这么长的问题，非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:46:05.420

您的数据没有很好地声明，您需要为每个点指定一个 [x,y] 值数组。您的 goog 变量变为：

goog = [[["8/25/2008",56], ["1/22/2009",60], ["6/20/2009",79],["7/20/2009",20 ],["10/20/2009",34],["6/20/2010",67],["2/20/2011",42]]];

PS：我还在 goog 中添加了一个新值，以便将 7 个点作为 7 个刻度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T14:20:13.707

它没有在 x 轴上缩放，因为您在 x 轴上指定了“刻度”选项。我有同样的问题。在我看来这是一个错误。即使我设置刻度（作为初始“未缩放”值），它也应该按预期工作。

# css - 无法将 Twitter Bootstrap 核心和响应式编译到一个文件中？

> ID：15222611
> 
> 赞同：1
> 
> 时间：2013-03-05T11:27:09.677
> 
> 标签：css, twitter-bootstrap, import, responsive-design, less

我们有一个 twitter bootstrap 的覆盖文件，

它开始于

```
@import "../less/bootstrap.less";
@import "../less/responsive.less"; 
```

这样做的问题是，当`bootstrap.less`和`responsive.less`都导入到一个文件中时，我们最终会导致网格没有对齐，基本上它总计超过 100%，导致项目浮动到下一行。

如果我们不将它们一起导入，而只是导入`bootstrap.less`然后用`responsive.less`它做另一个文件就可以了。

那是怎么回事？

Bootstrap 2.3.1
编译器：lessPHP 0.3.9（2.3.1 兼容）

有什么办法可以解决这个问题，还是我必须使用两个单独的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:22:50.463

将 repsonsive.less 添加到 bootstrap.less 文件的末尾。像这样：

```
...
// Utility classes
@import "utilities.less"; // Has to be last to override when necessary
@import "responsive.less"; // 
```

# ios - 如何在 iOS 中实现文件浏览，因为它在 Xcode 中没有内置功能

> ID：15222619
> 
> 赞同：0
> 
> 时间：2013-03-05T11:27:31.463
> 
> 标签：ios

我的问题是如何在 iPhone 中打开一个文件选择器，就像`UIButton`单击它可以访问 iPhone 设备中存储的所有文件一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:30:32.453

您的 iPhone 应用程序无法访问设备上存在的所有文件。但是，您的应用程序可以访问它自己的沙箱，即应用程序的文档目录（它自己的）。

# css - 使内联对齐的 div 进入链接（显示：块不起作用）

> ID：15222620
> 
> 赞同：0
> 
> 时间：2013-03-05T11:27:32.273
> 
> 标签：css, html, fluid-layout

我使用以下解决方案创建了 3 个彼此相邻的 div： [具有等间距 DIV 的流体宽度](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)

但是，当我将每个盒子包装在一个`<a>`标签内时`display:block`，整个布局就会变得很时髦。

有没有解决的办法？流动性（甚至是一个词吗？）并不是真正必要的，但更可取。我使用这个解决方案的原因是因为即使在 IE6/7 中，它也可以将盒子整齐地彼此相邻，并且也是为了简单起见。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:44:44.973

你不能`div`用- 包装`a`- 如果我理解正确，这就是你的问题开始的地方。

如果你想让你的整个`div`可点击，在你周围的一些文本/标题/任何东西周围放置一个链接，`div`如果你点击 ANYWHERE 在`div`

```
$(".divClass").click(function () {
    window.location = $(this).find("a").attr("href");
}); 
```

# jquery - 如何在jquery中找到内部元素的高度？

> ID：15222623
> 
> 赞同：1
> 
> 时间：2013-03-05T11:27:33.730
> 
> 标签：jquery, sharepoint-2010

html结构为：

```
<table class='cls_Name'>
    <tr>
        <td>Name</td>
    </tr>
    <tr>
        <td>
            <div>some operation/text</div>
        </td>
    </tr>
</table> 
```

为了得到我正在做的桌子的高度，如下所示：

```
$('.cls_Name').height(); 
```

它返回正确的值。

现在我想要 div 的高度：

```
$('.cls_Name').children('td:nth-child(2)').children('div').height(); 
```

但它返回 Null 或有时也会出错。

请让我知道是否有人对此有想法。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:30:08.453

元素是元素的`<td>`后代，但*不是*子`<table>`元素。该`.children()`函数仅在 DOM 中下降了一个级别 - 因此，在这种情况下，下降到`<tr>`元素的级别。请尝试以下操作：

```
$('.cls_Name').find('td:eq(1)').children('div').height(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:29:39.930

尝试以下操作：

```
$('.cls_Name td:eq(1)').find('div').height(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:36:05.050

Better you can specify class name for div element and try this:

```
<table class='cls_Name'>
    <tr>
        <td>Name</td>
    </tr>
    <tr>
        <td>
            <div class="operation">some operation/text</div>
        </td>
    </tr>
</table> 
```

Script:

```
$('.operation').height() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:38:29.703

This would be the better i guess :

```
$(document).ready(function ()
{
    var sa = $('.cls_Name').find('div').height();
    alert(sa);

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:31:16.877

因为`.children('td:nth-child(2)')`不存在`.children('td:nth-child(1)')`而尝试。

**测试代码**

```
<script type="text/javascript">

    $(function()
    {
        console.log($('.cls_Name').find('td:nth-child(1)').find('div').height());
    });

</script>
<table class='cls_Name'>
    <tr>
        <td>Name</td>
    </tr>
    <tr>
        <td>
            <div>some operation/text</div>
        </td>
    </tr>
</table> 
```

给我看`20`的`console.log()`；

# android - emulator-5554 断开连接！取消“com.example.merhaba.Main 活动启动”！

> ID：15222625
> 
> 赞同：6
> 
> 时间：2013-03-05T11:27:37.703
> 
> 标签：android

我开始用 Eclipse IDE 编写 android 应用程序。但是当我运行应用程序时，我将 emulator-5554 断开连接！取消“com.example.merhaba.Main 活动启动”！错误。我能做些什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T11:29:56.127

我发现的问题在于该项目在 AVD 管理器中没有为它定义适当的虚拟设备。

*所以eclipse中推荐的步骤是：*

1.  转到“项目”-> 属性-> Android。
2.  在右侧窗格中，查看 Project 构建目标中选中的行。
    *记住*出现在所选行中的目标平台号。
3.  转到“Windows”-> AVD 管理器。
4.  检查现有 Android 虚拟设备列表，寻找与您为项目设置的平台和 API 级别相匹配的设备（请参阅上面的步骤 #2）。
5.  如果没有包含您平台的 AVD 的行（我怀疑），请使用“新建”按钮添加它。
6.  将打开“创建新的 Android 虚拟设备”窗口。设置新的设备名称。在“目标”选择框中为您的项目选择正确的平台。

**- - 或者 - -**

1.  打开 Android 虚拟设备管理器
2.  选择您用于应用的 AVD。
3.  按下开始按钮并等待一个名为（启动选项）的新表单出现。
4.  选中“擦除用户数据”框并点击“启动”按钮。

这应该有效。

**- - 或者 - -**

1.  打开 Android 虚拟设备管理器
2.  删除您用于应用的 AVD。
3.  创建一个新的 AVD。
4.  开始新的 AVD。

这也应该有效。

**- 或者 -**

试试这个..转到DDMS透视图->选择设备->转到窗口->导航->显示视图菜单->重置adb ..。

再次享受您的模拟器！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T17:06:41.220

这为我解决了它：

1) 让 Eclipse 保持打开状态，即使 Eclipse 没有找到它，模拟器也会打开。

2）在命令行类型中：

adb 杀死服务器

然后当提示回来时，输入

adb 启动服务器

3) adb 再次启动后，尝试再次从 Eclipse 运行您的项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-18T10:01:59.283

您可以从窗口任务管理器中终止 ADB，但我建议您终止 ADB 进程**树**. 通过右键单击任务管理器上的 adb，然后单击结束进程树。这对我有用，我相信它会帮助你解决问题。但请确保您的 AVD 已被识别。为此，单击窗口--AVD 管理器--单击要用于突出显示它的 AVD，然后单击“开始”选项卡--打开启动选项。单击擦除用户数据，然后单击启动。如前所述，这将帮助您在继续杀死 Adb 进程树之前启动已识别的 AVD。这对我来说很神奇。完成此操作后，尝试运行该程序。如果您收到“活动不工作”之类的错误，请不要惊慌。这不是一个错误，但它只是告诉您您正在再次运行您的程序，而没有对代码进行任何更改或更新。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-02T12:10:36.283

转到运行-> 配置-> 目标-> 选择 Avd -> 运行它。它解决了让我发疯的问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T11:29:25.097

只需重新启动您的 Eclipse 并再次运行它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T11:31:01.610

转到设备视图，右上角有一个向下箭头，稍后单击重置 adb ..几秒钟后尝试重新运行应用程序，它应该可以工作。

# scala - 使用 Scala 2.10 运行 Scala^Z3

> ID：15222627
> 
> 赞同：3
> 
> 时间：2013-03-05T11:27:54.660
> 
> 标签：scala, z3, scala-2.10

我在我的 Mac OSX（Mountain Lion、JDK 7、Scala 2.10、Z3 4.3）上成功安装了 Scala^Z3（如下： http: [//lara.epfl.ch/w/ScalaZ3](http://lara.epfl.ch/w/ScalaZ3)）。一切都很好，除了我无法从这个网站（[http://lara.epfl.ch/w/jniz3-scala-examples](http://lara.epfl.ch/w/jniz3-scala-examples)）运行任何示例而不会得到这个讨厌的错误：

> ```
> java.lang.NoClassDefFoundError: scala/reflect/ClassManifest
>     at .<init>(<console>:8)
>     at .<clinit>(<console>)
>     at .<init>(<console>:7)
>         ...
> Caused by: java.lang.ClassNotFoundException: scala.reflect.ClassManifest
>     at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
>     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
>     at java.security.AccessController.doPrivileged(Native Method)
>     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
>     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
>     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
>     ... 29 more 
> ```

我认为这是因为 Scala 2.9.x 和 2.10.x 在处理反射方面不兼容。因为我能够在 Scala 2.9.x 下运行相同的示例集。我的问题是，有没有办法解决这个问题并在 Scala 2.10 下运行 Scala^Z3？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:12:00.333

通过查看项目属性和构建文件（[https://github.com/psuter/ScalaZ3/blob/master/project/build.properties](https://github.com/psuter/ScalaZ3/blob/master/project/build.properties)和[https://github.com/psuter/ScalaZ3/blob/master/project/ build/scalaZ3.scala](https://github.com/psuter/ScalaZ3/blob/master/project/build/scalaZ3.scala) ) 我推断 scalaZ3 目前仅提供给 scala 2.9.2。目前没有跨版本支持。

在“build.properties”文件中将版本更改为 scala 2.10.0 后，您可能会尝试获取代码并自行编译。有关如何编译它的说明，请参阅此页面：[https](https://github.com/psuter/ScalaZ3) ://github.com/psuter/ScalaZ3 。如果幸运的话，代码将在 scala 2.10 下编译。如果你不是，可能需要做一些小的修复。交叉你的手指。

如果你不着急，你也可以给 Scala^Z3 的作者发错误，并要求他们提供 scala 2.10 版本的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:28:19.990

我正在复制我[在 GitHub 上对您的问题的](https://github.com/psuter/ScalaZ3/issues/23)回复中的说明，因为它可能会在将来对某人有所帮助。

当前状态是旧的 sbt 项目似乎与 Scala 2.10 不能很好地融合。以下是针对 Linux 的项目“手动”编译的说明。这适用于 Z3 4.3（从[Z3 git repo](http://z3.codeplex.com/)获取）和 Scala 2.10。按照原始说明安装 Z3 后：

首先编译Java文件：

```
$ mkdir bin
$ find src/main -name '*.java' -exec javac -d bin {} + 
```

然后编译 C 文件。为此，您需要先生成 JNI 标头，然后编译共享库。以下命令中的选项适用于 Linux。为了找到 JNI 标头的位置，我`(new java.io.File(System.getProperty("java.home")).getParent`在 Scala 控制台中运行（并添加`/include`到结果中）。

```
$ javah -classpath bin -d src/c z3.Z3Wrapper
$ gcc -o lib-bin/libscalaz3.so -shared -Wl,-soname,libscalaz3.so \
        -I/usr/lib/jvm/java-6-sun-1.6.0.26/include \
        -I/usr/lib/jvm/java-6-sun-1.6.0.26/include/linux \
        -Iz3/4.3/include -Lz3/4.3/lib \
        -g -lc -Wl,--no-as-needed -Wl,--copy-dt-needed -lz3 -fPIC -O2 -fopenmp \
        src/c/*.[ch] 
```

现在编译 Scala 文件：

```
$ find src/main -name '*.scala' -exec scalac -classpath bin -d bin {} + 
```

您将收到“功能警告”，这是迁移到 2.10 时的典型情况，以及另一个关于非详尽模式匹配的警告。

现在让我们用所有东西制作一个jar文件......

```
$ cd bin
$ jar cvf scalaz3.jar z3
$ cd ..
$ jar uf bin/scalaz3.jar lib-bin/libscalaz3.so 
```

...现在你应该已经`bin/scalaz3.jar`包含了你需要的一切。让我们试一试：

```
$ export LD_LIBRARY_PATH=z3/4.3/lib
$ scala -cp bin/scalaz3.jar
scala> z3.scala.version 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T13:39:34.273

这并不能直接回答问题，但可能会帮助其他尝试`scalaz3`使用`scala 2.10`.

我`ScalaZ3`用`Scala 2.10.1`和`Z3 4.3.0`建立`Windows 7`。我用[http://lara.epfl.ch/w/jniz3-scala-examples](http://lara.epfl.ch/w/jniz3-scala-examples)`integer constraints`上的示例对其进行了测试，它工作正常。

**Z3楼**

在 codeplex的`Z3 4.3.0`下载不包括`libZ3.lib`文件。所以我不得不下载源代码并在我的机器上构建它。构建过程非常简单。

**构建 ScalaZ3**

目前，`build.properties`有 sbt 版本`0.7.4`和 scala 版本`2.9.2`。这很好。（我不得不对文件进行一些小修改。在任务中`build.scala`修改`z3LibPath(z3VN).absolutePath`为。）`z3LibPath(z3VN).absolutePath + "\\libz3.lib"``gcc`

现在，如果我将 scala 版本更改为`2.10.1`in `build.properties`，我会`"Error compiling sbt component 'compiler-interface'"`在启动 sbt 时出错。我不知道为什么会这样。

然后我将 sbt 版本更改为`0.12.2`scala 版本`2.10.1`，并从新的源代码开始。我还在`build.sbt`项目根文件夹中添加了包含`scalaVersion := "2.10.1"`. 这是必需的，因为在 sbt 中`0.12.2`，该文件`build.properties`应该仅用于指定`sbt`版本。有关 sbt 版本差异的更多信息（[https://github.com/harrah/xsbt/wiki/Migrating-from-SBT-0.7.x-to-0.10.x](https://github.com/harrah/xsbt/wiki/Migrating-from-SBT-0.7.x-to-0.10.x)）。

我得到错误`Z3Wrapper.java:27: cannot find symbol LibraryChecksum`。发生这种情况是因为没有生成`LibraryChecksum.java`应该由 build ( `project\build\build.scala`) 生成的文件。看起来该`package`任务没有执行 ( `project\build\build.scala`) 中的任务。任务`compute-checksum`、`javah`和`gcc`未执行。这可能是因为 sbt`0.12.2`期望`build.scala`文件直接位于`project`文件夹下。

然后我复制了`LibraryChecksum.java`从以前的构建生成的，然后构建通过。生成的 jar 文件不包含`scalaz3.dll`.

然后我手动执行`javah`和任务。`gcc`这些任务的命令可以从成功构建的日志中复制`scala 2.9.2`（我对 scala 的命令进行了适当的修改`2.10.1`）。在这里，我也不得不做一些改变。我必须明确添加任务的`scala-library.jar` 类路径的完整路径。`javah`

然后我将 .jar 添加`lib-bin\scalaz3.dll`到 jar 文件中`jar uf target\scala-2.10\scalaz3.jar lib-bin/scalaz3.dll`。

# vb.net - 将 WithEvents 添加到 VB.NET 中的表单上的 SerialPort 对象位置

> ID：15222628
> 
> 赞同：0
> 
> 时间：2013-03-05T11:27:56.993
> 
> 标签：vb.net, events, serial-port

我在 VB.NET 解决方案中创建的表单上添加了一个 SerialPort 对象。我如何将“WithEvents”添加到它，因为我将它拖到表单上而不是在代码中创建它。甚至有必要这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:30:20.617

将其拖到表单上会自动将其添加到设计器生成的代码中`WithEvents`- 它必须这样做，否则您将无法在“事件”窗格中连接事件。如果您在解决方案资源管理器中点击“查看所有文件”切换，您应该能够看到设计器文件。看看那里，您会发现 IDE 添加此代码的位置。

# facebook - 图形 API 大帖子缩略图

> ID：15222629
> 
> 赞同：1
> 
> 时间：2013-03-05T11:27:59.167
> 
> 标签：facebook, facebook-graph-api

我正在使用图形 api，但遇到了一个问题：我使用：从我的页面获取所有提要`https://graph.facebook.com/page_ID/posts`，然后我以一种很好的方式显示它们，它需要比在`data[i].picture`.

我知道个人资料图片是可能的...我一直在阅读文档并环顾四周，现在我没有任何线索...我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:46:27.947

您可以尝试执行 FQL 查询以获取如下帖子：

```
SELECT post_id, message, permalink, attachment, actor_id, created_time FROM stream WHERE source_id = PAGE_ID AND message != "" 
```

如果这仍然带来相同的图像大小，您可以使用此 hack：

**免责声明**：这不是一个好方法，因为 Facebook 可能随时更改图像路径。

话虽如此，对于具有此文件名格式的每个图像： `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_s.jpg`

您可以将“.jpg”之前的字母“s”更改为“n”并获得更大的版本，如下所示： `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_n.jpg`

将其更改为“q”将为您提供宽度不超过 180 像素的图像 `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_q.jpg`

# php - 在 PHP 中转换关联数组

> ID：15222630
> 
> 赞同：1
> 
> 时间：2013-03-05T11:28:09.553
> 
> 标签：php, arrays, sql-server-2008, multidimensional-array

我一直在谷歌搜索和搜索这个论坛，但实际上我还没有找到我需要实现的解决方案。

我以这种形式从数据库中获取一个数组

```
Array
(
[0] => Array
    (
        [0] => af
        [1] => Afghanistan
    )

[1] => Array
    (
        [0] => al
        [1] => Algeria
    )
) 
```

我需要它看起来像这样

```
Array
(
    [af] => Afghanistan
    [al] => Algeria
) 
```

db 是 sql server，这是我用来获取数据的代码

```
$sQueryCountries = "SELECT Country_Code,Country_Name FROM Countries WHERE Client_Id = '$client_id'";
$params = array();
$options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );

$rResultCountries = sqlsrv_query( $db, $sQueryCountries, $params, $options );
while ( $aRow = sqlsrv_fetch_array( $rResultCountries, SQLSRV_FETCH_NUMERIC ) )
{       
    $output[] = $aRow;      
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:29:41.367

在 fetch 循环中构建非常基本的数组

```
while ( $aRow = sqlsrv_fetch_array( $rResultCountries, SQLSRV_FETCH_NUMERIC ) )
{       
    $output[$aRow[0]] = $aRow[1];      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:31:54.590

尝试这个 ：

```
$res   = array();
foreach($your_array as $val){
   $res[$val[0]] = $val[1];
}

echo "<pre>";
print_r($res); 
```

# javascript - 如何安装CKeditor

> ID：15222635
> 
> 赞同：2
> 
> 时间：2013-03-05T11:28:37.687
> 
> 标签：javascript, object, ckeditor

我不知道如何安装CKeditor，我在网站上下载了编辑器，然后将以下代码放在我的头标签之间：

```
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<script type="text/javascript">
    window.onload = function()
    {
        var oFCKeditor1 = new CKEDITOR('message');
        oFCKeditor1.ToolbarSet = 'Basic' ;
        oFCKeditor1.BasePath = "ckeditor/" ;
        oFCKeditor1.ReplaceTextarea() ;
    }
</script> 
```

但是下面的行返回了这个错误：

> 未捕获的类型错误：对象不是函数

```
var oFCKeditor1 = new CKEDITOR('message'); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T11:35:11.383

根据[文档](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Integration)，包括 ckeditor.js 文件：

```
<head>
    <script type="text/javascript" src="/ckeditor/ckeditor.js"></script>
</head> 
```

编辑器对`textarea`元素进行操作，因此在您的身体某处创建一个：

```
<textarea id="editor1" name="editor1">&lt;p&gt;Initial value.&lt;/p&gt;</textarea> 
```

然后在元素声明**后**使用以下代码初始化编辑器`textarea`：

```
<script type="text/javascript">
    CKEDITOR.replace( 'editor1' );
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T03:39:59.303

我在这个链接上写了一篇文章。也许它有助于在您的网页中包含 js 文件。你也可以使用 CKEditor CDN

```
<script src="https://cdn.ckeditor.com/4.9.2/standard/ckeditor.js"></script>

OR

<script src="CKEditor_file_path/ckeditor.js"/>

 After select textarea where you want to add CKEditor

 <textarea name="editor1" id="editor1" rows="10" cols="80">
           This Textarea Replaced By CKEditor.
  </textarea> 
```

编写代码替换CKEditor中的textarea

```
<script>
      CKEDITOR.replace( 'editor1' );
</script> 
```

"editor1" 是 textarea 的名称，更多信息可以查看这个博客

[http://besticoder.com/how-to-use-ckeditor-in-your-website-for-user-input/](http://besticoder.com/how-to-use-ckeditor-in-your-website-for-user-input/)

# javascript - 如何提高我的 javascript 代码的性能

> ID：15222636
> 
> 赞同：3
> 
> 时间：2013-03-05T11:28:41.563
> 
> 标签：javascript, jquery

我有一个包含项目列表的页面。项目有几个分配给它们的操作。（见截图）。

可以选择直接单击每行旁边的图标或选中左侧的复选框。

问题是，在单击一个项目或选中多个项目的复选框然后单击一个操作后会出现延迟（大约一秒钟）。想象一下有 100 行或更多行。

![在此处输入图像描述](../Images/803a687dd6b6f46a88dead8b385329e1.png)

如何提高我的 javascript 代码的性能？

一行的示例 HTML：

```
<tr id="1960AGIMMGMRTB20314" class="">
                        <td class="checkbox">
                                     <input type="checkbox" value="1960" class="checkbox">     

                        </td>
                        <td class="">
                            <p><a href="/Devices/View/1960">GD009000246</a></p>
                        </td>
                        <td class="platform">PCGames</td>
                        <td class="cat">Up</td>
                        <td class="platform">
                            <div class="pbar"><span class="progresslabel"></span></div>
                        </td>
                        <td class="date">10.48.1.236</td>   
                        <td class="options clearfix">
                                    <a title="" class="iconMagnifier tip" href="/Packages/View/AGI-MM-GM-RTB-2.0.3.1.4">View</a>
<a title="" href="/Packages/PackageActionAsyncDeletePackage" data-ajax-type="DeletePackage" data-ajax-packageid="AGI-MM-GM-RTB-2.0.3.1.4" data-ajax-machineid="1960" class="iconDelete action tip">Remove</a>                            
                        </td>       
                    </tr> 
```

javascript:

```
 // action invoker
    $("a.action:not(.remove)").click(function (e) { // .remove => do not execute on download tasks page
        var obj = $(this);
        e.preventDefault();
        if (!$(this).hasClass('disablelink')) {
            var machineIds = getSelection(obj);
            if (machineIds.length > 0) {
                packageAction(obj.attr("data-ajax-packageid"), machineIds, obj.attr("data-ajax-type"));
            };
        }
        $(".checkall").attr("checked", false);
    });

function getSelection(obj) {
    var selected = new Array();
    if (obj.attr('data-ajax-machineId')) {
        selected.push(obj.attr('data-ajax-machineId'));
    } else {
        $("input.checkbox:checkbox:checked:not(.checkall)").each(function () {
            var machineId = $(this).val();
            var packageId = obj.attr("data-ajax-packageid");
            var operation = obj.attr("data-ajax-type");
            if ($("#" + machineId + packageId.removeSpecialChars().toUpperCase() + "").size() != 0) {
                var row = $("#" + machineId + packageId.removeSpecialChars().toUpperCase() + "");
                row.has("a[data-ajax-type=" + operation + "]:not(.hide)").length ? selected.push(machineId) : $(this).attr('checked', false);
            }
        });
    }
    return selected;
}  

    // download, install, uninstall, remove, activate, deactivate package
    function packageAction(packageId, machineIds, operationType) {
.....// to implement - not needed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:05:08.643

从 DOM 中查询对象很慢。最好的办法是将所有数据保存在 javascript 对象中，做所有你想要的计算和东西，然后一次更新 DOM。Ember.js 和其他一些 javascript 库/工具具有很酷的绑定数据，这意味着您更改 javascript 对象中的属性，它会自动更新 DOM！

# bigbluebutton - Bigbluebutton：flash 在opensuse 中不工作

> ID：15222637
> 
> 赞同：0
> 
> 时间：2013-03-05T11:28:43.647
> 
> 标签：bigbluebutton

我在我的服务器上安装了 Bigbluebutton，它对所有用户都运行良好。

我对 Opensuse 用户有疑问

当我试图在 Mozila 中访问 BBB ip 时，`opensuse` 在 Bibbluebutton 窗口上运行的第一次没有打开。

当我再次刷新页面时，我得到了 Bigbluebutton 仪表板。

这只发生在 OPensuse 用户身上。

我在 Ubuntu、Mac、Windows 上测试过它工作正常。

请告诉我这里的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:57:48.570

我有 openSuse 12.3 x64 和 Bibbluebutton 对我来说很好用。这是我安装的数据包列表：

1.  闪存播放器 [http://download.opensuse.org/update/12.3-non-oss/](http://download.opensuse.org/update/12.3-non-oss/)

2.  flash-player-gnome [http://download.opensuse.org/update/12.3-non-oss/](http://download.opensuse.org/update/12.3-non-oss/)

3.  flash-player-kde4 [http://download.opensuse.org/update/12.3-non-oss/](http://download.opensuse.org/update/12.3-non-oss/)

4.  libquvi7 [http://download.opensuse.org/factory-tested/repo/oss/](http://download.opensuse.org/factory-tested/repo/oss/)

5.  pullin-flash-player [http://download.opensuse.org/factory-tested/repo/oss/](http://download.opensuse.org/factory-tested/repo/oss/)

# c++ - 多变量模板化委托系统

> ID：15222638
> 
> 赞同：2
> 
> 时间：2013-03-05T11:28:44.987
> 
> 标签：c++, templates, c++11, delegates, metaprogramming

所以，我最近使用 c++11 的可变参数模板构建了一个委托系统，它就像一个魅力。

然而，在系统中，我为函数构建的参数是在创建时给出的（如我所愿），但现在我也希望能够在调用时传递一些（可变）数量的参数。为了实现这一点，我去重新编写了我的代码，但是我遇到了问题；

```
error: parameter packs must be at the end of the parameter list
sorry, unimplemented: cannot expand ‘Arguments ...’ into a fixed-length argument list
error: type/value mismatch at argument 1 in template parameter list for ‘template<<declaration error>, class ... Params> class FunctionDelegate’ 
```

......还有更多，所以这里有一个引发问题的片段；

```
template<typename... Params> 
class Runnable
{
    public:
        virtual void invoke(tuple<Params...> params) = 0;
        virtual ~Runnable() 
        {
        }
}; 
```

这是我的两个委托（FunctionDelegate 和 ObjectDelegate）的父类。这曾经是一个无模板的类（因为 invoke 没有接受任何参数），但是由于我有一个可变参数模板列表，我也必须修改我的子类（显然），我刚刚添加了另一个可变参数给他们的模板；

```
template<typename... Arguments, typename... Params>
class FunctionDelegate : public Runnable<Params...>
{
    public:
        typedef void (*FunctionType)(Arguments..., Params...);

        FunctionDelegate(FunctionType function, tuple<Arguments...> args)
            : function(function), args(args)
        {
        }

        void invoke(tuple<Params...> params) 
        {
            callFunction(typename gens<sizeof...(Arguments)>::type(), params, typename gens<sizeof...(Params)>::type());
        }
    private:
        template<int... S, int... R>
        void callFunction(seq<S...>, tuple<Params...> params, seq<R...>)
        {
            function(get<S>(args)..., get<R>(params)...);
        }
    private:
        FunctionType function;
        tuple<Arguments...> args;
}; 
```

然而，这似乎是不允许的，至少这是我怀疑的，所以；

1.  是否允许有两个可变参数模板列表？
2.  有什么方法可以提示编译器，哪个列表？（即在构造函数中使用的那些去 Arguments，其余的去 Params）。
3.  如果根本没有办法做到这一点（使用两个可变参数模板列表），是否可以在同一个可变参数列表中使用一个参数和参数，然后使用构造函数的参数简单地将其拆分？
4.  还有其他方法可以实现我正在尝试的吗？（除了使用普通的旧的、非类型检查的可变参数传递）。

欢迎任何帮助或见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:38:21.843

No, you cannot use such code. You can use following for example

```
template<typename... Params>
class FunctionDelegate; 
```

or

```
template<typename Arguments, typename Params>
class FunctionDelegate; 
```

as Xeo suggests.

```
template<typename... Arguments, typename... Params>
class FunctionDelegate<tuple<Arguments...>, tuple<Params...>> : 
public Runnable<Params...> { // }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T11:35:02.030

关于您的前两个问题（答案是“**否**”和“**否**”），C++11 标准的第 14.1/11 段规定：

> 如果类模板或别名模板的模板参数具有默认模板参数，则每个后续模板参数应提供默认模板参数或模板参数包。**如果主类模板或别名模板的模板参数是模板参数包，它应该是最后一个模板参数**。函数模板的模板形参包后面不应跟随另一个模板形参，除非该模板形参可以推导出来或具有默认实参（14.8.2）。[ 例子：

```
template<class T1 = int, class T2> class B; // error
// U cannot be deduced or specified
template<class... T, class... U> void f() { }
template<class... T, class U> void g() { } 
```

> —结束示例]

您的示例明显违反了粗体句子，该句子禁止在（主）类模板上包含多个模板参数包。

# selenium - 无法在 safari 5 浏览器中执行 selenium webdriver 脚本

> ID：15222647
> 
> 赞同：2
> 
> 时间：2013-03-05T11:29:16.033
> 
> 标签：selenium, safari

我已经下载了 Apple Developer 证书并在我的框架中配置了 Safari 扩展。现在，当我开始执行脚本时，浏览器启动，它执行一些操作，然后抛出以下错误。

（注意：我使用的是 selenium-server-standalone-2.31.0.jar）

> 2013 年 3 月 5 日下午 3:59:13 org.openqa.selenium.safari.SafariDriverServer 启动信息：服务器在端口 5674 上启动 2013 年 3 月 5 日下午 3:59:33 org.openqa.selenium.safari.SafariDriverChannelHandler$1 operationComplete INFO：连接于 2013 年 3 月 5 日下午 3:59:45 打开 org.jboss.netty.channel.SimpleChannelUpstreamHandler 警告：异常，请实施 org.openqa.selenium.safari.SafariDriverChannelHandler.exceptionCaught() 以进行正确处理。java.io.IOException: 远程主机在 sun.nio.ch.SocketDispatcher.read0(Native Method) 在 sun.nio.ch.SocketDispatcher.read(Unknown Source) 在 sun.nio.ch 处强行关闭了现有连接sun.nio.ch.IOUtil.read(Unknown Source) 的 sun.nio.ch.SocketChannelImpl 的 .IOUtil.readIntoNativeBuffer(Unknown Source)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T22:06:53.793

调用后我遇到了同样的错误`safariDriver.quit()`。事实证明，SafariDriver 并没有关闭套接字，即使它知道它将终止。为了解决这个问题，我调整了`QUIT`命令的行为，并在我的 PR 中包含了与 Safari 驱动程序相关的另一个功能的补丁：[https](https://github.com/SeleniumHQ/selenium/pull/87) ://github.com/SeleniumHQ/selenium/pull/87 。

实际修复非常简单，请在[https://github.com/Rob--W/selenium/commit/2b53d4b61](https://github.com/Rob--W/selenium/commit/2b53d4b61)查看。

想要自己实施此修复？请按照以下步骤操作：

1.  安装先决条件（适用于 Linux、Mac 和 Windows）：
    *   Java 开发工具包（JDK，不仅仅是 JRE）
    *   红宝石
    *   吉特
2.  克隆 Selenium 存储库：

    ```
    git clone https://code.google.com/p/selenium/ 
    ```

3.  应用[我的提交](https://github.com/Rob--W/selenium/commit/2b53d4b61f26fb4c857932bf404a45a44fa4582c)。

4.  在 Selenium 存储库的根目录中，运行以下命令：

    ```
    ./go selenium-server-standalone offline=true 
    ```

    （如果您使用的是 Windows，请省略`./`:)

    ```
    go selenium-server-standalone offline=true 
    ```

5.  稍等片刻。初始构建需要几分钟，后续构建在一分钟内完成。所需的结果可在以下目录中找到（相对于存储库的根目录）：

    ```
    build/java/server/src/org/openqa/grid/selenium/selenium-standalone.jar 
    ```

# c# - 使用空间类型和自动映射器时如何优化实体框架查询？

> ID：15222649
> 
> 赞同：3
> 
> 时间：2013-03-05T11:29:20.383
> 
> 标签：c#, linq, entity-framework-5, spatial, automapper-2

我正在建造的东西并不是很独特。简而言之，我正在使用 ASP.NET MVC 4（Web Api）和 Entity Framework 5（具有空间支持）在 Azure 中创建一个类似 FourSquare 的小型服务。所以我使用的是 SQL Azure，而不是像 MongoDB 或 CouchDB 这样的 NoSQL 数据库之一。部分是因为我对 .NET 更流利/熟悉，部分是为了了解开发经验（重构、部署、测试），部分是为了了解它将如何与例如。节点.js/MongoDB。

现在让我们看一些代码。

```
/// <summary>
/// Return the nearest locations relative from the given longitude/latitude
/// </summary>
/// <param name="longitude">Longitude</param>
/// <param name="latitude">Latitude</param>
/// <param name="maxresults">Optional maximum results, default is 2</param>
/// <param name="radius">Optional maximum radius in kilometres, default is 50 km</param>
/// <returns></returns>
public JsonEnvelope Get(string longitude, string latitude, int maxresults = 2, int radius = 50)
{
    var pointTxt = string.Format("POINT({0} {1})", longitude, latitude);
    var locations = (from s in locationEntityRepository.GetAll
                     orderby s.Coordinates.Distance(DbGeography.FromText(pointTxt))
                     where s.Coordinates.Distance(DbGeography.FromText(pointTxt)) / 1000  <= radius
                     select new Location
                     {
                         Id = s.Id,
                         Name = s.Name,
                         LocationType = s.LocationType,
                         Address = s.Address,
                         Longitude = s.Coordinates.Longitude.Value,
                         Latitude = s.Coordinates.Latitude.Value,
                         Distance = (s.Coordinates.Distance(DbGeography.FromText(pointTxt)).Value) / 1000
                      })
                    .Take(maxresults).ToList();

    // Bad bad bad. But EF/Linq doesn't let us do Includes when using subqueries... Go figure
    foreach (var location in locations)
    {
        location.Checkins = AutoMapper.
                            Mapper.
                            Map<List <Checkin>, List<LocationCheckinsJsonViewModel>>
                                (checkinRepository.GetCheckinsForLocation(location.Id).ToList());
    }

    // AutoMapper.Mapper.Map<Checkin, CheckinViewModel>(dbCheckin);
    var jsonBuilder = new JsonResponseBuilder();
    jsonBuilder.AddObject2Response("locations", locations);

    return jsonBuilder.JsonEnvelope;
} 
```

我认为我需要澄清几件事。`locationEntityRepository.GetAll`外观是这样的。

```
public IQueryable<LocationEntity> GetAll
{
    get { return _context.Locations; }
}

public IQueryable<LocationEntity> GetAllIncluding(params Expression<Func<LocationEntity, object>>[] includeProperties)
{
    IQueryable<LocationEntity> query = _context.Locations;
    foreach (var includeProperty in includeProperties) {
        query = query.Include(includeProperty);
    }

    // var tmp = query.ToList();

    return query;
} 
```

现在代码真的闻起来很时髦。理想情况下，我希望能够使用 an`GetAllIncluding(c => c.Checkins)`而不是该`GetAll`方法，并且能够用于`AutoMapper`在 LINQ 投影中进行映射。

我知道在使用子查询时，Include + LINQ/EF 返回 null 是设计使然。在 LINQ/EF 查询中使用 automapper 应该`Project().To<>`使用`.ForMember`.

因此，挑战在于使代码更高效（当需要更改我的 JSON 结构时，更少的 SQL 和易于维护。请记住，我们在这里试图击败 node.js/MongoDB ；）我应该打扰还是保留它是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:34:33.527

三件事。

1.  包括`System.Data.Entity`命名空间。该`include`方法实际上是该命名空间引入的扩展。使用 EF 4.1 及更高版本中可用的 Lambda 重载甚至更可取，因此，您必须在要调用它的任何地方添加命名空间。
2.  删除第一个查询末尾的 .ToList() ，因为它立即执行查询，这违背了包含的目的。

    ```
    using System.Data.Entity
    public IQueryable<LocationEntity> GetAll
    {
        get
        {
            return _context.Locations;
        }
    } 
    ```

这样，您可以在子查询中使用 Include

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:25:18.343

我使用存储库模式做了类似的事情。

```
 public IEnumerable<T> FindAll()
    {
        return _context.Set<T>().ToList();
    }

    public IEnumerable<T> FindBy(Expression<Func<T, bool>> predicate)
    {
        return _context.Set<T>().Where(predicate);
    } 
```

.Set 方法在哪里

```
 public IDbSet<TEntity> Set<TEntity>() where TEntity : class
    {
        return base.Set<TEntity>();
    } 
```

这使您可以从数据库中获取某个类型的所有内容，或者只获取满足特定条件的所有类型。

这会给您留下一个对象列表，或者如果您使用 FirstOrDefault() 一个您可以根据需要映射的单个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:20:56.687

你为什么不使用这个：

```
Context context=new Context();
Public List<LocationEntity> GetAll()
{
    return context.LocationEntities.Include("includeProperty").ToList();
} 
```

上下文是这样的：

```
public class Context: DbContext
    {
        public Context()
        {
            base.Configuration.LazyLoadingEnabled = false;
            base.Configuration.ProxyCreationEnabled = false;
            base.Configuration.ValidateOnSaveEnabled = false;
        }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
        public DbSet<LocationEntity> LocationEntities{ get; set; }
    } 
```

# tomcat - ColdFusion 页面显示为原始代码

> ID：15222651
> 
> 赞同：0
> 
> 时间：2013-03-05T11:29:25.297
> 
> 标签：tomcat, web-applications, coldfusion, cfml

我有一个运行多个应用程序的 Tomcat 6 服务器，在其中一个应用程序中，JSP 引用 ColdFusion 项目中的链接。在生产中，我们有 Apache 设置来将 DocumentRoot 更改为 ColdFusion webroot，但是由于我们只运行 Tomcat，我不能这样做（即我们的系统没有 httpd.conf 或 apache2.conf 文件）。我尝试在上下文文件中设置 docBase 以指向 ColdFusion 项目 webroot，但这不起作用，因此我在 tomcat webroot 中设置了符号链接。这正确链接到页面，但不是解析页面，而是显示 ColdFusion 代码。

除了通过管理界面将设置更改为指向我想要的数据库外，我对 ColdFusion 没有任何经验。

Tomcat 根目录：

```
webapps/ (tomcat webroot)
    cfProject/www/ (ColdFusion webroot)
    otherProject/pages/*.jsp 
```

谁能帮我？如果您需要更多信息，我会随时更新问题。

更新：ColdFusion 版本：9

更新：删除了应用程序设置和符号链接的上下文，但 ColdFusion 源代码仍在输出并显示在页面上，而不是正在运行的代码并显示结果。

更新：我已经安装了 apache2 并将其链接到 tomcat，它现在可以正确连接到 ColdFusion 并从 JSP 页面加载所有 .cf 文件，但是 ColdFusion 页面仍然以纯文本显示。似乎通过 ProxyPass 重定向的冷融合页面正在工作，但来自 DocumentRoot 位置的页面却没有。如果我弄明白了会更新。

更新：最后让它工作了，我必须小心 ProxyPass 规则的顺序，所以一旦我把它整理出来，让 tomcat 和 apache 重新启动，页面就开始正确通过了。感谢您的所有输入彼得。

在此先感谢，阿列克谢蓝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:41:21.163

最后，我安装了 Apache2 并设置了代理 ajp 以连接到我的 Tomcat 应用程序，监听端口 80。Tomcat 有一个连接器可以自动执行此操作，所以我没有任何问题。然后，在启用站点的默认虚拟主机中，我将 DocumentRoot 更改为指向我的 ColdFusion 项目的基础。（不确定这是否需要，但它不会受到伤害）。然后，同样在默认虚拟主机中，我添加了 ProxyPass 规则以将不同的 URL 连接到 ColdFusion。让我难过一段时间的一点是添加一个指向根 URL 的规则：

```
ProxyPass / /ColdFusion/www 
```

因为 ProxyPass 规则都已处理，所以它弄乱了 URL，导致找不到页面等。一旦我修复了这个并重新启动，我就被排序了。

再次感谢彼得在这方面的帮助。

# ios - iOS 定义对象的可触摸区域，将触摸限制在 self 的子视图中

> ID：15222652
> 
> 赞同：0
> 
> 时间：2013-03-05T11:29:27.403
> 
> 标签：ios, uigesturerecognizer, uitouch, touchesbegan

我有一个子类 UIView，我将调用 customView。我希望启用触摸，以便用户可以操作具有手势识别器和其他控件的子视图，但我希望视图本身不可触摸，以便在视图下方绘制的视图仍然是可触摸的。换句话说，customView 将被绘制在应用程序中的其他视图之上，但我仍然希望下面的视图是可触摸的，同时允许触摸 customView 的子视图。

我试过像这样使用touchesBegan，但这不起作用。有任何想法吗？谢谢阅读！

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];

//I've tagged the views that I want to be touchable.
    if ([touch view].tag == 1000 || [touch view].tag == 2000 || [touch view].tag == 3000) {
        self.userInteractionEnabled = YES;
    } else {
        self.userInteractionEnabled = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:33:21.677

您需要做的是在您的 customView 中实现以下方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    //check if one of the subviews was hit, if so forward the touch event to it
    for (UIView *view in self.subviews){
        if (CGRectContainsPoint(view.frame, point))
            return view;
    }

    // use this to pass the 'touch' upward in case no subviews trigger the touch
    return [super hitTest:point withEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:49:38.437

然后将这些子视图添加到您的customview.other副您的customview不应该让他们触摸。并将自定义视图放在这些子视图下方，这样您选择的子视图就可以触摸了。

# ios - 如何在不将图像保存到相册的情况下发布到我的 Facebook 墙上

> ID：15222663
> 
> 赞同：0
> 
> 时间：2013-03-05T11:29:59.000
> 
> 标签：ios, objective-c, facebook, slcomposeviewcontroller

我正在使用以下方法将图像和 URL 共享到用户的 Facebook 墙。问题是因为我在帖子中添加了一张图片，它最终被保存在 Facebook 相册中。也许这是默认行为，尽管我发誓它只是在墙上张贴一张照片而不是相册。

谢谢你的帮助

```
- (IBAction)shareAction:(id)sender {
    SLComposeViewController * fbController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [fbController setInitialText:@"App Name"];

     NSIndexPath* indexPath = [tableView indexPathForCell:sideSwipeCell];
  //  NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    // output id of selected deal
#ifdef DEBUG
    NSLog(@"deal id for selected row is %@", [[displayItems objectAtIndex:indexPath.row] objectForKey:@"id"]);
#endif
    // display the youdeal deal image
    link = [[displayItems objectAtIndex:indexPath.row] objectForKey:@"link"];

    // download the youdeal deal image for FB posting

    NSURL *url = [NSURL URLWithString:[[displayItems objectAtIndex:indexPath.row] objectForKey:@"image"]];
    NSLog(@"url to image share %@", url);

    NSData *data = [[NSData alloc] initWithContentsOfURL:url];

    NSLog(@"data to image share %@", data);

    UIImage *tmpImage = [[UIImage alloc] initWithData:data];

    NSLog(@"tmpImage to image share %@", tmpImage);

    ydImage = tmpImage;

    NSLog(@"ydimageview.image %@", ydImage);

  //  [NSThread detachNewThreadSelector:@selector(downloadAndLoadImage) toTarget:self withObject:nil];

    [fbController setInitialText:@"Check out this link."];
    [fbController addURL:[NSURL URLWithString:link]];
    [fbController addImage:ydImage];

    SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){
        [fbController dismissViewControllerAnimated:YES completion:nil];

        switch(result){
            case SLComposeViewControllerResultCancelled:
            default:
            {
#ifdef DEBUG

                NSLog(@"User Cancelled.");
#endif
                [self removeSideSwipeView:YES];
            }
                break;
            case SLComposeViewControllerResultDone:
            {
#ifdef DEBUG
                NSLog(@"Posted");
#endif
                [self removeSideSwipeView:YES];

                CustomAlertView *fbAlert = [[CustomAlertView alloc] initWithTitle:@"App Name" message:@"Facebook Post Successful!" delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];

                [fbAlert show];
            }
                break;
        }};

    [fbController setCompletionHandler:completionHandler];
    [self presentViewController:fbController animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:51:04.287

看起来它可能是一个 FB 错误。有时他们保存到相册有时[无法使用 SLComposeViewController 将图像发布到 facebook？](https://stackoverflow.com/questions/14868560/unable-to-post-image-into-facebook-using-slcomposeviewcontroller?rq=1)

# ios - 在 phonegap 中播放捕获的音频

> ID：15222667
> 
> 赞同：0
> 
> 时间：2013-03-05T11:30:07.643
> 
> 标签：ios, cordova, jquery-mobile

我能够捕获音频并且我拥有捕获文件的完整路径，但是我无法让它播放最近捕获的文件。

我在 iOS 6.1 上使用 Phongap 2.5 和 Jquery Mobile。

代码：

```
 <script type="text/javascript" charset="utf-8">
            function captureSuccess(mediaFiles) {
                var i, len;
                var formatSuccess = function (mediaFile) {
                    document.getElementById('capture-data').innerHTML =
                    "Duration: <strong>" + mediaFile.duration + "</strong><br/>";
                };

                for (i = 0, len = mediaFiles.length; i < len; i += 1) {
                    // uploadFile(mediaFiles[i]);
                    document.getElementById('capture-result').innerHTML = "<strong>" + (i+1) + " file(s), Path: " + mediaFiles[i].fullPath + "</strong><br/>";
                    mediaFiles[i].getFormatData(formatSuccess, formatError);
                    readDataUrl = mediaFiles[i].fullPath;
                };

                console.log("captureImageSuccess");
            }

            function captureError(error) {
                var msg = 'An error occurred during capture: ' + error.code;
                navigator.notification.alert(msg, null, 'Uh oh!');
            }

            function captureAudio() {
                // Launch device audio recording application,
                // allowing user to capture up to 2 audio clips
                navigator.device.capture.captureAudio(captureSuccess, captureError, {limit: 2});
            }

            $("#audio-result").click(function() {
                function playAudio(mediaFiles) {
                var play = document.getElementById('audio-result').src =
                mediaFiles[i].fullPath;
            }
                                     });

            </script>
    </head>
    <body>
        <button onclick="captureAudio();">Capture Audio</button> <br>

        <div class="result-block">
            Capture Result: <span id="capture-result"></span><br/>
            <span id="capture-data"></span><br/>
            <button id="audio-result">Play audio</button>
            </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:16:14.157

你可以播放你的媒体如下

```
var my_media = null;

// here src is the uri of your media
// Create Media object from src
my_media = new Media(src, onSuccess, onError);

// Play audio
my_media.play()

// Pause audio
function pauseAudio() {
    if (my_media) {
        my_media.pause();
    }
}

// Stop audio
function stopAudio() {
    if (my_media) {
        my_media.stop();
    }
} 
```

# c# - 在 UINavigationBar 中将图像向左对齐

> ID：15222675
> 
> 赞同：0
> 
> 时间：2013-03-05T11:30:17.047
> 
> 标签：c#, ios, objective-c, xamarin.ios, uinavigationbar

我想在我的应用导航栏上显示背景图片。
显示图像作品：

```
UIImage image =  new UIImage( @"Images/navbarlogo2.png");
UIImageView imageview = new UIImageView(image);
NavigationItem.TitleView = imageview; 
```

但是图像居中，而我需要它右对齐。

我无法找到执行此操作的属性，并且搜索没有得到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:45:22.890

您可以使用以下方法设置导航栏的背景图像。请注意，这会将其设置为所有导航栏的默认值，并且从 iOS5 开始可用。

```
UINavigationBar.Appearance.SetBackgroundImage(image, UIBarMetrics.Default); 
```

# java - 跨数据库同步表数据

> ID：15222679
> 
> 赞同：14
> 
> 时间：2013-03-05T11:30:24.020
> 
> 标签：java, sql, spring-batch

我有一个表，它在字段上记录其行插入/更新时间戳。

我想将此表中的数据与另一个数据库服务器上的另一个表同步。两个数据库服务器未连接，同步是一种方式（主/从）。不适合使用表触发器

我的工作流程：

*   我使用全局 last_sync_date 参数和查询表 Master 来获取更改/插入的记录
*   将结果行输出到 xml
*   使用更新和插入解析 xml 和更新表 Slave

处理Master表的已删除记录时，问题的复杂性上升。为了捕捉已删除的记录，我认为我必须为先前插入的记录维护一个日志表并使用 sql“NOT IN”。在处理大型数据集时，这会成为性能问题。

处理这种情况的替代工作流程是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T01:38:57.237

**听起来您需要一个事务性消息队列。**

这是如何工作的很简单。当您更新主数据库时，您可以向消息代理（无论更新是什么）发送一条消息，该消息可以发送到任意数量的队列。每个从属数据库都可以有自己的队列，并且由于队列的保留顺序，进程最终应该正确同步（具有讽刺意味的是，这是大多数 RDBMS 在内部进行复制的方式）。

**将消息队列视为一种 SCM 更改列表或补丁列表数据库。**也就是说，在大多数情况下，发送到 master 的相同（或大致相同）SQL 语句最终应该被复制到其他数据库。不要担心丢失消息，因为大多数消息队列都支持持久性和事务。

我建议您查看[spring-amqp](/questions/tagged/spring-amqp "显示标记为“spring-amqp”的问题")和/或[spring-integration特别是因为您使用](/questions/tagged/spring-integration "显示标记为“弹簧集成”的问题")[spring-batch](/questions/tagged/spring-batch "显示标记为“spring-batch”的问题")标记了这个问题。

根据您的评论：

*   请参阅 Spring 集成：[http](http://static.springsource.org/spring-integration/reference/htmlsingle/) ://static.springsource.org/spring-integration/reference/htmlsingle/ 。
*   谷歌 SEDA。无论您是否走这条路，您都应该了解消息队列，因为它与批处理密切相关。
*   [RabbitMQ 有一个很好的关于消息传递如何工作的图](http://www.rabbitmq.com/getstarted.html)
*   您的消息内容可能是整行，无论是 CRUD、UPDATE、DELETE。您可以使用任何格式（例如 JSON。请参阅有关建议的 spring 集成）。
    *   您甚至可以将直接 SQL 语句作为消息发送！

顺便说一句，您担心`NOT IN`成为性能问题并不是一个很好的问题，因为有很多变通方法，但考虑到您不想做特定于数据库的事情（如触发器和复制），我仍然觉得消息队列是您的最佳选择。

**编辑 - 非 MQ 路由**

由于我让您很难提出这个问题，因此我将继续尝试提供帮助。除了消息队列之外，您还可以像我们之前尝试的那样执行某种 XML 文件。您在模式中需要的关键功能是主数据库上的 CREATE TIMESTAMP 列，以便您可以在系统启动并运行时进行批处理（否则您将不得不停止系统）。现在，如果您走这条路线，您将想要`SELECT * WHERE CREATE_TIME < ?`少于当前时间。基本上，您只能在快照中获取行。

现在在您的其他数据库上删除您要删除行`inner joining`的 ID 表但使用`!=`（即您可以使用 JOINS 而不是 slow `NOT IN`）。幸运的是，您只需要所有`ids`for delete 而不需要其他列。其他列您可以使用基于更新时间戳列的增量（用于更新，并创建又名插入）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T12:17:12.240

我不确定解决方案。但我希望这些链接可以帮助你。

[http://knowledgebase.apexsql.com/2007/09/how-to-synchronize-data-between.htm](http://knowledgebase.apexsql.com/2007/09/how-to-synchronize-data-between.htm)

[http://www.codeproject.com/Tips/348386/Copy-Synchronize-Table-Data-between-databases](http://www.codeproject.com/Tips/348386/Copy-Synchronize-Table-Data-between-databases)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T00:41:07.867

为什么不添加一个 TIMESTAMP 列来指示上次更新/插入/删除时间？然后添加一个已删除的列 - 即。将该行标记为已删除，而不是立即实际删除它。导出删除操作后将其删除。

如果您无法更改现有应用程序中的架构使用：

你根本不能使用触发器吗？第二个（“隐藏”）表如何填充每个插入/更新/删除并构成下一个要生成的 xml 导出文件的内容？这是一个常见的概念：历史（或“日志”）表：它将有自己的进度 id 列，可用作导出标记。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T08:30:16.700

看看[Oracle GoldenGate](http://www.oracle.com/technetwork/middleware/goldengate/overview/index.html)：

> Oracle GoldenGate 是一个全面的软件包，用于在异构数据环境中实现数据复制。该产品集支持运营和分析企业系统之间的高可用性解决方案、实时数据集成、事务变更数据捕获、数据复制、转换和验证。

[对称DS](http://www.symmetricds.org/)：

> SymmetricDS 是用于在异构环境中跨网络进行多主数据库复制、过滤同步或转换的开源软件。它支持多个订阅者进行单向或双向异步数据复制。

[水仙花复制器](http://opensource.replicator.daffodilsw.com/)：

> Daffodil Replicator 是一个Java工具，用于各种数据库服务器之间的数据同步、数据迁移和数据备份。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T22:51:51.947

非常有趣的问题。

在可能的情况下，我有足够的 RAM 来加载主表和从表中的所有 id 来区分它们。

如果主表中的 id 是连续的，您尝试可以在主表中维护一组完整填充的范围（使用所有 id 的范围，没有空格，如 100,101,102,103）。

要查找已删除的 id 而不将它们全部加载到内存中，您可以执行 SQL 查询来计算`id >= full_region.start and id <= full_region.end`每个已填充区域的记录数。如果查询结果，`== (full_region.end - full_region.end) + 1`则表示区域中的所有记录都**没有**被删除。否则 - 将区域分成两部分并对它们进行相同的检查（在很多情况下，只有一侧包含已删除的记录）。

在一定长度的范围（我认为大约 5000）之后，加载所有存在的 id 并使用 Set 检查是否存在会更快。

此外，将所有 id 加载到内存中以用于一批小（10-20 条记录）区域也是有意义的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T11:08:30.197

为需要同步的表创建一个历史表（基本上是该表的副本，可能带有一些额外的字段），并在每次在活动表中插入/更新/删除某些内容时插入整行。

编写一个 Spring 批处理作业，根据历史表的额外字段将数据同步到 Slave 机器

希望这可以帮助..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-11T21:39:31.147

在当前工作流程中允许删除的潜在选项：

如果触发器限制仅限于跨数据库引用的触发器，则当前工作流程中的一个可能解决方案是在主数据库中创建一个帮助表，以仅存储已删除行的唯一标识符（或任何唯一键使您能够最有效地删除已删除的行）。

这些 id 需要在删除时由您的主表上的触发器插入。

使用与插入/更新相同的机制，在插入和更新之后创建一个任务。正如您在当前工作流程中所述，您可以将帮助表导出到 xml。

此任务将简单地从从表中删除行，然后在任务完成后从您的助手表中删除所有数据。记录任务中的任何错误，以便您可以解决此问题，因为没有审计跟踪。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-17T21:52:47.260

如果您的数据库有事务转储日志，只需发送该日志即可。

MySQL 是可能的，PostgreSQL 应该也是可能的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T01:39:49.197

我同意另一条评论——这需要使用触发器。我认为另一个表应该保存您的 sql 语句的历史记录。请参阅[this answer](https://stackoverflow.com/questions/3094735/create-trigger-to-log-sql-that-affected-table/3149717#3149717) about using 2008 extended events...然后，您可以获得整个sql，并将结果查询存储在历史表中。如果要将其存储为 mysql 查询或 mssql 查询，由您决定。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-12T00:51:16.443

这是我的看法。你真的需要处理这个吗？我假设奴隶是为了报告的目的。所以我要问的问题是它应该是最新的吗？如果数据是一天前的可以吗？你计划每晚刷新一次吗？

如果是这样，请忘记此在线同步过程，下载完整表格；将其发送到 mysql 并批量加载。处理时间可能比您想象的要快得多。

# selenium - 无法访问 PHPUnit Coverage 中的 PHPUNIT_SELENIUM_TEST_ID cookie

> ID：15222680
> 
> 赞同：3
> 
> 时间：2013-03-05T11:30:25.080
> 
> 标签：selenium, phpunit

要使用`phpunit_coverage.php`我需要在指定的文件`auto_prepend_file`和. 在这两个脚本中，都会检查 cookie 以确保测试正在运行：`auto_append_file``php.ini``prepend.php``append.php`

```
if ( isset($_COOKIE['PHPUNIT_SELENIUM_TEST_ID']) && 
```

问题是这个 cookie 被保存为 localhost 的 cookie，而不是 web 服务器的。所以当它被选中时，它没有被设置并且 xdebug 没有启动。

Selenium 和 webserver 位于不同的机器上，这可能是导致此错误的原因吗？

此处显示情况：

![火狐饼干管理器](../Images/3ea25810fb96f47cf685949a83dec568.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T10:49:33.473

类似的问题。我起初认为是域问题，因为测试的网站位于虚拟主机上。

但我发现调用`$this->url('some_url')`似乎默默地删除了`PHPUNIT_SELENIUM_TEST_ID`cookie。

`url()`我的解决方法是在我的测试用例中覆盖该方法，以便在`url()`调用时重置 cookie。

```
protected function url($url =null)
{
    try {
        $cookie = $this->cookie()->get('PHPUNIT_SELENIUM_TEST_ID');
    }
    catch (Exception $e) {}

    $result = parent::url($url);

    if (isset($cookie)) {
        $this->cookie()->add('PHPUNIT_SELENIUM_TEST_ID', $cookie)->set();
    }

    return $result;
} 
```

现在已正确创建代码覆盖率文件。

# c# - WebExcpetion 使用 WebRequest.BeginGetResponse

> ID：15222697
> 
> 赞同：1
> 
> 时间：2013-03-05T11:31:17.990
> 
> 标签：c#, windows-phone, webrequest, system.net.webexception

我有一个困扰我很久的问题。

我正在使用 Windows Phone 8 和 c#。

从网上下载文件时，我有时会收到此异常：

```
A first chance exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.ni.dll
A first chance exception of type 'System.Net.WebException' occurred in System.Windows.ni.dll
A first chance exception of type 'System.Net.WebException' occurred in System.Windows.ni.dll
ExceptionMessage:The remote server returned an error: NotFound. 
```

但后来我再次运行程序，它工作正常。不知道为什么有时候找不到远程服务器，真的是服务器的问题吗？它认为它在我的代码中，我使用这些函数：

```
WebRequest request = WebRequest.Create("http...);
IAsyncResult res = request.BeginGetResponse(new AsyncCallback(DownloadComplete), null); 
```

我会很感激任何建议，因为这个异常不断弹出，我无法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:34:26.067

它并不是说它找不到远程服务器，而是服务器拒绝请求的文件，因为当时该远程服务器*上*不存在该文件。很难知道您的确切情况，但撇开网络问题不谈，它可能很简单，因为*当时文件不存在*。

此文件多久更新一次（如果有）？想一想，在您请求文件时，它已被删除并会暂时被重写的可能性。

网络本身并不可靠，只是看起来可靠；这有很多技术，但我的意思是，在你的情况下，在一段时间后*再次尝试失败可能会更糟糕一些“恢复”逻辑。*

只是一种可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T18:59:26.157

当我忘记手机在模拟器中运行并将网络引用更改为 localhost 时，我得到了这个。然后本地主机将在电话本身上进行解释，显然网络服务没有在电话上运行。如果您在进行本地调试，请确保使用您机器的 IP 地址，而不是 localhost 或 127.0.0.1。

# ios - Objective-C 和 ARC？使用还是不使用？

> ID：15222698
> 
> 赞同：5
> 
> 时间：2013-03-05T11:31:18.297
> 
> 标签：ios, objective-c, automatic-ref-counting

在阅读其中一本 iOS 5 书籍时，我遇到了这样的信息：

> “虽然 ARC 可以让您更轻松地编写应用程序而无需担心对象管理，但许多第三方库仍然需要手动释放对象。对于本书而言，所有项目都是在关闭 ARC 的情况下创建的 (...)”。

我是 iOS 开发的新手，我不知道如何解释它。了解 iOS 的内存管理似乎是非常（非常）重要的事情，但我应该明白，ARC 只是一个不错的功能，我必须在不学习它的情况下开始，因为它太新了，无法支持或无法使用很多情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T11:36:47.583

帮自己一个忙，使用 ARC。这是迄今为止在过去五年中发生的对该语言的最佳补充。*它让您以更具声明性*而非*程序性*的方式处理内存管理，从而使您免于编写大量“样板代码”。

这并不是说学习手动内存管理不重要：你一定要知道它是如何工作的，并且能够阅读没有 ARC 编写的代码。但就您新开发的代码而言，您应该继续使用 ARC，因为手动内存管理会白白浪费您的大量开发工作。

更好的是，给自己买另一本书：看来作者没有足够的时间来修改 ARC 的示例，所以他们插入了一个相当蹩脚的借口，关于“其他图书馆”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:36:11.407

我仍然更喜欢创建非 ARC 项目。

但几周前我写了这篇很棒的文章[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1) 听起来这是苹果提供的很棒的功能。

所以，我想试试。我的很多大学已经在使用 ARC，我认为它效果很好。

但是，我想说的一件事 - ARC 并不意味着您必须编写代码并且不必担心内存管理。ARC - 这是另外一回事，ARC 也有自己的内存管理规则/法律，您在编写代码时必须牢记这些规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:38:12.130

这是个人选择。

如果您使用 ARC，则无需担心内存管理。

但是，如果您知道如何使用 MRC（手动保留计数）制作成熟的应用程序，那么使用 ARC 也不错。

即使在ARC中的某个特定时间，你也需要分配和释放内存，因此必须学习MRC。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T11:38:46.770

好吧，如果你是 Objective C 的新手，你能做的最好的事情就是在你的项目中使用 ARC。ARC 是稳定的，并且使内存管理变得相当容易。

这些书是正确的，有一些 3rd 方库仍然遵循手动内存管理。但是这些库中的大多数现在也提供 ARC 版本。如果没有[，您仍然可以在 ARC 项目中使用它们](http://www.exactmagic.com/mixing-arc-and-non-arc-code-with-static-libraries/)，方法是将其添加为静态库项目。您也可以[针对特定文件禁用 ARC](https://stackoverflow.com/questions/8969634/include-non-arc-library-in-an-arc-app)。

我在 ARC 之前的日子里开始了 iOS 开发，起初对我来说手动内存管理很困难。所以对于初学者来说，有了 ARC，绝对是 ARC。有空时尝试了解手动内存管理。

免责声明：我仍然很少使用 ARC，但对于初学者来说，ARC 是要走的路。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T11:38:54.997

ARC 很好用，作为初学者非常有帮助。当我们包含第三方库时，您可以选择禁用该特定文件（或）库的 ARC。

为特定文件禁用 ARC：

将**-fno-objc-arc**添加到您不需要 ARC 的文件的编译器标志中。在 Xcode 4 中，您可以在 target -> Build Phases -> Compile Sources 下执行此操作。

如果您想从一开始就了解内存管理，请禁用 ARC 并自己尝试。这可能对你有很大帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T11:43:43.040

> ARC 是 Apple 提供的最佳功能之一。
> 
> ARC 负责处理与**内存管理问题**相关的开销， Apple 也建议使用 ARC。
> 
> 与其不更好地使用它，不如充分**利用**它并避免内存开销
> 
> 我建议您使用 ARC，但请研究 ARC 如何在后台管理内存。
> 
> But when you need to develop applications with **deployment target below** ***ios 4.0*** You need to **manually retain-release memory**.

# iphone - 在 iphone 编程中使用 siri 显示带有路线导航的苹果地图

> ID：15222707
> 
> 赞同：1
> 
> 时间：2013-03-05T11:31:48.577
> 
> 标签：iphone, ios, objective-c, maps, uinavigationcontroller

我正在显示带有起点和终点目的地方向的苹果地图。我希望​​它在用户打开带有路线的地图时打开并启动 siri。由于某种原因，它成功打开了 url，但没有打开 siri 来引导用户。

用于它的代码如下所示：

```
NSString* versionNum = [[UIDevice currentDevice] systemVersion];
     NSString *nativeMapScheme = @"maps.apple.com";
     if ([versionNum compare:@"6.0" options:NSNumericSearch] == NSOrderedAscending)
     nativeMapScheme = @"maps.google.com";

     NSString* url = [NSString stringWithFormat: @"http://%@/maps?daddr=%@&saddr=%f,%f",nativeMapScheme,[description stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],mylat, mylon];
     NSLog(@"Location - %@",url);

     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

# bash - Bash - 查找并删除除选定文件外的所有 html 文件

> ID：15222710
> 
> 赞同：1
> 
> 时间：2013-03-05T11:31:53.740
> 
> 标签：bash, find

我想做的是递归删除所有html文件，省略`template.html`和`list.html`？

到目前为止，我有以下代码，但我不知道如何设置这两个文件名异常。

```
find . -name "*.html" -exec rm -rf {} \; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:36:35.650

使用 -not：

```
find . -name "*.html" -not -name template.html -not -name list.html -exec rm -rf {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:38:02.327

你可以做到！

```
find . -type f \( -iname "*.html" ! -iname "template.html" ! -iname "list.html" \) -exec rm -rf {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:06:19.107

尝试以下操作：

```
find . -type f -iname \*.html ! -iname template.html ! -iname list.html -exec rm -f -- {} + 
```

# c# - DataGridView 标准上下文菜单

> ID：15222712
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:31:54.833
> 
> 标签：c#, datagridview, contextmenu

我有一个`DataGridView`，我需要在编辑单元格时禁用标准上下文菜单（右键单击）。我也有自己的上下文菜单（也可以右键单击），但是当我不编辑它时它应该可以工作。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:34:35.470

试试这个。您可以修改它以显示您的上下文菜单并禁用默认上下文菜单。

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        e.Control.ContextMenu = new ContextMenu();
    } 
```

# c# - 如何对文件名列表实现二进制搜索？

> ID：15222715
> 
> 赞同：-2
> 
> 时间：2013-03-05T11:32:05.190
> 
> 标签：c#, asp.net, listbox, binary

注意：作业帮助，无需代码。

我在列表框中有一个文件名列表。作为作业的一部分，我想使用二进制搜索实现来搜索文件名。

有人可以帮我理解如何在不使用内置`List<T>.BinarySearch(...)`方法的情况下实现二进制搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:35:58.370

You have to begin with a sorted list of values. Then you just search like you would if you were playing a number guessing game (and were a computer). Pick the middle element of your list. If the number you're searching for isn't equal to the value of the middle element, do the same thing again, but this time on a sub-list that's half the size (since the list is sorted, you know what side of the list your target is on). Just keep doing that until you found the value you're looking for.

# c# - 在程序旁边打开开始菜单？

> ID：15222717
> 
> 赞同：1
> 
> 时间：2013-03-05T11:32:13.450
> 
> 标签：c#, startmenu

我一直在研究如何以编程方式打开“开始”菜单，但问题是我希望它在我正在创建的应用程序旁边打开它。

我正在屏幕顶部制作一个工具栏，带有一个打开开始菜单的按钮，但我希​​望开始菜单在按钮下方而不是任务栏附近打开。我正在使用[这个问题](https://stackoverflow.com/questions/6407584/sendkeys-send-and-windows-key)的答案中提供的代码，它只发送所需的按键 (LWin) 来打开开始菜单。

这在 C# 中可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:33:09.060

**编辑：**显然，这仅适用于英文版的 Windows，因为每个翻译中的“开始菜单”都不同。不过，这仍然有效（只要 Windows 安装为英文）。

我得到了它！这行得通，虽然我不知道它有多漂亮：

```
public partial class Form1 : Form {
    private void button1_Click(object sender, EventArgs e) {
        int ShowCmd = 5;

        MoveWindow(FindWindow("DV2ControlHost", "Start menu"), X_POS, Y_POS, WIDTH_HERE, HEIGHT_HERE, false);
        ShowWindow(FindWindow("DV2ControlHost", "Start menu"), ShowCmd);
    }

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll", SetLastError = true)]
    public static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);
    [DllImport("user32.dll", SetLastError = true)]
    public static extern bool MoveWindow(IntPtr hWnd, int x, int y, int nWidth, int nHeight, bool bRepaint);
} 
```

这是[SO 上的这个问题](https://stackoverflow.com/questions/1369981/how-to-show-windows-start-menu)和针对 C# 修改的[这篇 MSDN 文章的混合体。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534(v=vs.85).aspx)同样，我不确定代码有多好，但它可以完成工作。

# ruby-on-rails - Rails_admin 并在列表操作中查看图像

> ID：15222720
> 
> 赞同：0
> 
> 时间：2013-03-05T11:32:27.013
> 
> 标签：ruby-on-rails, rails-admin

```
Ruby 1.9.3  
Rail 3.2.9  
rails_admin 0.4.5 
```

我所有的图像都存储在磁盘上。
我想在列表操作中显示他们的缩略图。
我怎样才能做到这一点？

没有用于在数据库中存储图像的字段。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:43:12.347

如果您的图像存储在磁盘上，我假设每条记录都存储图像的路径，对吗？

没有办法开箱即用地做到这一点。最简单（也不是特别简单）的解决方案是修改 rails_admin 附带的索引/列表操作。[这是您应该开始的地方](https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/index.rb)您将需要扩展此操作或创建一个新操作。

# flask - 如何在 MoinMoin 宏中使用烧瓶渲染模板？

> ID：15222722
> 
> 赞同：1
> 
> 时间：2013-03-05T11:32:37.483
> 
> 标签：flask, moinmoin

我是 MoinMoin 和烧瓶的新手。我有一个使用 python 宏的 moinmoin 站点。目前，我只是使用一些基本的字符串格式方法从我的宏中返回 html。我想将烧瓶模板与该`render_template`方法一起使用。它现在不起作用，因为上下文堆栈似乎是空的。我真的不知道使它工作的好方法是什么。我应该通过给它宏对象本身或宏请求来创建一个带有烧瓶的上下文吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:52:08.330

当您使用宏时，您很可能使用[Jinja2](http://jinja.pocoo.org/docs/templates/) [宏](http://jinja.pocoo.org/docs/templates/#macros)（Python 没有宏）。在这种情况下，您可以使用[`include`](http://jinja.pocoo.org/docs/templates/#include)or[`import`](http://jinja.pocoo.org/docs/templates/#import)指令来加载其他 Jinja 模板并渲染它们。

# c++ - 具有复整数的 ODE

> ID：15222724
> 
> 赞同：2
> 
> 时间：2013-03-05T11:32:47.360
> 
> 标签：c++, gsl, ode

我正在尝试解决具有复杂条目的 ODE 系统。从 GSL 文档可以看出，它只接受真实的条目。有什么方法可以传递复杂的（比区分实部和虚部更直接的方法）？如果不可能，您能否为此目的建议任何其他好的图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:58:24.270

您也可以使用[odeint](http://odeint.com)。它附带 boost 1.53 并允许您直接使用复数。

# jquery - 验证 span 值的更好方法

> ID：15222725
> 
> 赞同：2
> 
> 时间：2013-03-05T11:32:52.660
> 
> 标签：jquery

所有，我是 jquery 的新手，我发现有时我需要编写一些代码来验证元素值。如下所示。

```
var selectedLayOutIdx=$("#spanSelectedLayout").html();
if (selectedLayOutIdx!=undefined && selectedLayOutIdx!="") {
    alert("The value is null, please check it.");
    return;
} else {
    //keep going.
} 
```

我发现这段代码看起来很冗长，我相信一定有更好的方法让代码在 jquery 中工作得更有趣。到目前为止，我还没有找到它。

请帮我 。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:34:33.293

你可以使用[jQuery.trim()](http://api.jquery.com/jQuery.trim/)：

```
var selectedLayOutIdx=$.trim( $("#spanSelectedLayout").html() );
if( selectedLayOutIdx == "" ) {
  //its empty
} 
```

或者

```
if( !$.trim($("#spanSelectedLayout").html()) ) {
     //its empty
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:38:28.787

您可以使用以下代码检查跨度的值。

```
var selectedLayOutIdx=$("#spanSelectedLayout").text();
if(selectedLayOutIdx == ""){
  alert("Value is null")
}else{
  // Your code
} 
```

更新（较短的版本）：

```
if($("#spanSelectedLayout").text()){
  // code if text present
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:42:23.807

```
var result=$("#spanSelectedLayout").html().replace(/^\s+|\s+$/g, '') 
if( result== "" ){

.
.
. 
```

这对所有浏览器都有效。

[.trim()](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)在某些版本的 IE 中不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:47:27.837

首先，您需要精确定义需求是什么。在您的代码中，您针对`undefined`html 的 jQuerys 实现进行测试永远不会返回`undefined`，因此没有理由对此进行测试。但是，可能有也可能没有理由针对 null 进行测试

```
<div id="spanSelectedLayout">content</div>

var txt = $("#spanSelectedLayout").html() //txt will be "content"

<div id="spanSelectedLayout">    </div>

var txt = $("#spanSelectedLayout").html() //txt will be return "    "

<div id="spanSelectedLayout">    </div>

var txt = $.trim($("#spanSelectedLayout").html()) //txt will be return ""

<div id="spanSelectedLayout">    </div>

var txt = $("#spnSelectedLayout").html() //txt will be null 
```

后者最有可能由于选择器拼写错误而发生，即一个错误，因此您可能应该区别对待它而不是 "" 或全空白字符串。但是 "" 和所有空白 HTML 在语义上是相同的，因此您可能应该将这些值视为相同，这可能会导致

var selectedLayOutIdx=$.trim($("#spanSelectedLayout").html()); if( selectedLayOutIdx == "" ) { //为空 }

但是`$.trim(null)`返回`""`而不是空，因此仍然会隐藏错误，因此您必须在更简洁的代码或类似的代码之间做出决定

```
var selectedLayOutIdx=$("#spanSelectedLayout").html();
if(selectedLayOutIdx == null) { throw "Invalid selector" }

if(  && $.trim(selectedLayOutIdx) == "" ) {
   //is empty
} 
```

# html - 为什么我会得到不同的 HTML 表格大小？

> ID：15222726
> 
> 赞同：-3
> 
> 时间：2013-03-05T11:32:54.217
> 
> 标签：html, css, html-table

我有以下 HTML 片段：

```
<table>
 <tbody>
  <tr>
   <td><table>...</table></td>
   <td><table>...</table></td>
   <td><table>...</table></td>
   ...
   <td><table>...</table></td>
  </tr>
 </tbody>
</table> 
```

这会导致此[jsFiddle](http://jsfiddle.net/nuVaZ/22/)中表示的问题。我可以很容易地看到，在`td`第一层的每一层之间，都有一个`table`我不知道从哪里来的空间。这样做的结果是第一级表的宽度大于第二级表的宽度之和。您可以查看小提琴的警报弹出窗口以了解我的意思。

如何解决此问题以便获得相同的宽度？

注意：如果给出解释，我也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:53:33.977

您可以添加每个 td 第一级 css 属性，td 具有默认填充

```
td{
   margin:0; padding:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:01:52.327

将此添加到父表以使宽度相同：

```
cellpadding="0" cellspacing="0" 
```

工作小提琴：[演示](http://jsfiddle.net/nuVaZ/23/)

如果你想减少空白，那么请减少子表的宽度，即大约 300px 左右。

# c - 从 C 类向 HTTP 请求传递参数

> ID：15222728
> 
> 赞同：1
> 
> 时间：2013-03-05T11:32:57.090
> 
> 标签：c, http, endianness

我的问题很难说，但我试试。

我有一个模块 ztc_config，它从我的网络中的一些传感器读取响应。为了阅读这个响应，我编写了一个 C 类 query.c，它是这样的：

```
#include <stdio.h>
#include <time.h>
#include <sys/time.h>

#include "data.h"
#include "modules.h"

void query(hash_t* params) {
    record_t* rec;
    timestamp_t ts;
    timestamp_t rec_ts;
    uint32_t sec;
    uint32_t usec;
    timestamp_t now;
    timestamp_t start;
    timestamp_t end;
    char* startime;
    char* endtime;
    // Coordinator, opgroup and  Opcode  specified by the client
    uint64_t netid = 0;
    uint8_t opcode_group = 0;
    uint8_t opcode = 0;
    char* par;
    now = mdl_now();
    /* set the start and end time based on query parameters */
    startime = hash_get(params, "start");
    if(startime != NULL) 
        start = mdl_parse_timestr(startime, now);
    else
        start = now;
    endtime = hash_get(params, "end");
    if(endtime != NULL) 
        end = mdl_parse_timestr(endtime, now);
    else 
        end = ~0;
    // Network id is required
    par = hash_get(params, "netid");
    if(par == NULL) {
        mdl_print("netid required\n");
        exit(1);
    }
    netid = strtoull(par, NULL, 10);
    par = hash_get(params, "opcode_group");
    if(par == NULL) {
        mdl_print("opcode_group required\n");
        exit(1);
    }
    opcode_group = strtoul(par, NULL, 10);
    par = hash_get(params, "opcode");
    if(par == NULL) {
        mdl_print("opcode required\n");
        exit(1);
    }
    opcode = strtoul(par, NULL, 10);
    /* seek in the bytestream */
    mdl_seek(start);
    while((rec = (record_t* ) mdl_next(&ts)) != NULL) {
        uint64_t val;
        //float fval;
        /* reached end time ? */
        if(ts > end) break;
        rec_ts = NTOHLL(rec->ts);
        sec = TS2SEC(rec_ts);
        usec = TS2USEC(rec_ts);
        // Only print records with the wanted net and opcodes
        if((netid != 0) && (netid != NTOHLL(rec->net_id))) 
            continue;
        if((opcode_group != 0) && (opcode_group != ntohl(rec->opcode_group))) 
            continue;
        if((opcode != 0) && (opcode != ntohl(rec->opcode)))
            continue;
        val = NTOHLL(rec->payload);
        mdl_print("%u %llu %u %u %u %d\n", sec, NTOHLL(rec->net_id), rec->op_code_group, rec->op_code, rec->payloadlength, val);
    }
} 
```

例如，当我访问此链接时，我会这样做：

```
http://localhost:44444/ztc_config?netid=2459546910990453036&opcode_group=164&opcode=224&start=-5m&end=-1s 
```

在页面中，我只看到最后 5 分钟内来自 netid 2459546910990453036 和 opcode_group 164（十六进制 A4）和操作码 224（十六进制 E0）的记录。

但是我的 query.c 类有问题。所以如果我访问这个链接

```
http://localhost:44444/ztc_config?netid=0&opcode_group=0&opcode=0&start=-5m&end=-1s 
```

我有最后 5 分钟内的所有记录。

但是，如果我更改任何 opcode_group 或 opcode 值，我什么也得不到……

有什么建议么？错误在哪里？

非常感谢。

**编辑**

我尝试像这样更改两个变量 opcode_group 和 opcode 的名称：

```
....
uint8_t op_code_group =0;
uint8_t op_code =0;
....
....
op_code_group = strtoul(par, NULL, 10);
....
op_code = strtoul(par, NULL, 10); 
```

这样我写：

```
if ((op_code_group != 0) && (op_code_group != ntohl(rec->opcode_group))) continue;
if ((op_code != 0) && (op_code != ntohl(rec->opcode))) continue; 
```

这应该是一个过滤器。在另一种情况下，具有相同的变量名称，条件为真，但值始终是初始化值 = 0。或者不是？

这个解决方案无论如何都不起作用...... :(请帮助我！

# python-2.7 - Cypehr Query with WHERE... AND 不能通过 python 嵌入式绑定工作

> ID：15222733
> 
> 赞同：1
> 
> 时间：2013-03-05T11:33:25.487
> 
> 标签：python-2.7, neo4j, cypher

我正在开发一个原型，我将所有电影细节存储在 neo4j 上。我使用 python 作为我的编程语言。

现在，我想找出我在特定级别（比如 10.0）对哪些电影进行了评分。为此，我编写了以下 Cypher 查询：

```
START me=node(1) 
MATCH me-[r:likes]-> movies 
WHERE has(r.Ratings) and r.Ratings = '10.0' 
RETURN movies 
```

这在 neo4j 网络管理员上运行良好。但是，当我使用 python 运行相同时：

```
myMovies = db.query("START me=node({id}) MATCH me-[r:likes]-> movies WHERE has(r.Ratings) and r.Ratings = '10.0' RETURN movies",id=user["nodeID"]) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "GraphTest.py", line 228, in <module>
    test.findTaste("Paritosh Kumar")
  File "GraphTest.py", line 31, in findTaste
    taste = self.BuildTasteForUser(user)
  File "GraphTest.py", line 52, in BuildTasteForUser
    myMovies = db.query("START me=node({id}) MATCH me-[r:likes]-> movies WHERE has(r.Ratings) and r.Ratings = '10.0' RETURN movies",id=user["nodeID"])
  File "/usr/local/lib/python2.7/dist-packages/neo4j/__init__.py", line 155, in query
    return self._cypher_engine.execute(query, **params)
  File "/usr/local/lib/python2.7/dist-packages/neo4j/cypher.py", line 31, in execute
    return ExecutionResult(self._engine.execute(query,to_java(params)))
  File "/usr/local/lib/python2.7/dist-packages/neo4j/_backend.py", line 156, in decorator
    return fn(*args, **kwargs)
jpype._jexception.CypherExceptionPyRaisable: unknown function
"START me=node({id}) MATCH me-[r:likes]-> movies WHERE has(r.Ratings) and r.Ratings = '10.0' RETURN movies" 
```

我是 Cypher 和 neo4j 的新手，我不确定为什么会这样。有人可以帮我吗？

Regds，帕里托什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:08:01.873

使用 !( [15.11.9](http://docs.neo4j.org/chunked/milestone/query-where.html) ) 运算符：

```
START me=node(1) 
MATCH me-[r:likes]-> movies 
WHERE r.Ratings! = '10.0' 
RETURN movies 
```

# ember.js - 在 emberjs 中用更详细的数据动态填充模型

> ID：15222739
> 
> 赞同：7
> 
> 时间：2013-03-05T11:33:49.357
> 
> 标签：ember.js, ember-data

我有点坚持在 emberjs 中实现主细节视图。

我的大多数视图都有一个主视图，它只是一个标题列表。然后，用户可以点击这样的标题，他/她会得到一个带有详细视图的覆盖（有点像典型的新闻站点页面）。

现在，我注意到当 ember 询问主视图的信息时，它会调用 url，例如：`/backend/newsitems`。但是这些调用可能会变得非常繁重，因为后端会返回所有新闻站点及其所有详细数据的列表。但这感觉不对，因为用户只查看主视图并且还没有请求任何详细信息。

有没有办法让 ember 清楚主视图只需要几个属性，并且对详细信息的请求应该获得该特定项目的额外属性？

举个例子，我的模型如下所示：

```
App.Newsitem = DS.Model.extend({
  slug: DS.attr('string'),
  type: DS.attr('string'),
  title: DS.attr('string'),
  summary: DS.attr('string'),
  text: DS.attr('string'),
  thumb: DS.attr('string'),
  date: DS.attr('date'),

  mediaitems: DS.hasMany('App.Mediaitem')
}); 
```

但我的主视图只需要`id` `type` `title`显示标题列表和该标题旁边的图标。然后，当用户请求一个新闻站点的详细信息时，应该获取所有其他属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-10T17:32:35.373

我通过让服务器在有效负载中包含“部分”属性解决了这个问题。如果只是部分响应，“部分”将为真，如果是完整响应，则为假。如果您无法更改服务器 API（因此无法在有效负载中包含“部分”属性），我还将提供一种解决方法。

正如其他人建议的那样，在“详细”路线的模型挂钩中，如果当前加载的模型只是部分模型，则调用模型的 reload() 方法：

```
App.ItemRoute = Ember.Route.extend({

    model: function (params) {
        return this.store.find('item', params.item_id).then(function (item) {
            if (item.get('partial'))
                return item.reload();
            else
                return item;
        });
    }

}); 
```

这解决了部分问题，但是如果您的用户随后导航到主路由，则 Ember Data 将使用服务器响应替换所有字段并清除任何未从服务器返回的属性值。为了克服这个问题，像这样覆盖 store 的 push 方法：

```
App.ApplicationStore = DS.Store.extend({
    push: function (type, data, _partial) {
        if (data.partial && this.hasRecordForId(type, data.id))
            return this.getById(type, data.id);
        else
            return this._super(type, data, _partial);
    }
}); 
```

这可确保您的部分有效负载不会覆盖整个有效负载。

这是一个 jsbin 来演示：http: [//jsbin.com/bejop/6/edit](http://jsbin.com/bejop/6/edit)

如果您无法在响应中包含“部分”属性，则可以应用与上述相同的逻辑，但在模型中查找将出现在您的详细响应中而不是部分响应中的特定属性。然后当你覆盖 push 方法时，你可以这样做：

```
 App.Partials = [
        { type: App.Item, propertyName: 'detailed_description' }
    ];

    App.ApplicationStore = DS.Store.extend({
        push: function (type, data, _partial) {

            var that = this;
            var partial = App.Partials.find(function (p) {
                return p.type === that.modelFor(type);
            });

            if (partial && !data[partial.propertyName])
                return this.getById(type, data.id);

            return this._super(type, data, _partial);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-31T21:52:51.920

我最近遇到了类似的问题，希望我想出的可以帮助你。

我的 API 有一个`/books`端点，它返回一个包含多个（但不是全部）字段的对象数组。但是，当我`GET /books/:id`使用 ID 时，我可以获取有关这本书的所有信息`:id`。

然后，在 Ember 中，我为单个书页设置了以下路线：

```
App.BookRoute = Ember.Route.extend
  model: (params) ->
    Book.find(params.book_id)

  setupController: (controller, model) ->
    controller.set("model", model)

    unless model.get('full') is true
      model.reload().then ->
        # We now have all the information.
        # Setting `full` to `true` to prevent loading it again.
        model.set('full', true)
    return 
```

因此，当用户只是浏览列表时，模型的字段大部分是空的，但是当她随后进入书籍详细信息视图时，API 被命中，并且额外的书籍数据被插入到同一个模型实例中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T13:13:47.340

> 有没有办法让 ember 清楚主视图只需要几个属性，并且对详细信息的请求应该获得该特定项目的额外属性？

当然可以，但可能不是您所期望的方式。Ember 模型非常轻量级，因此它们与您的后端架构之间无需建立 1-1 的关系。一般来说，我喜欢从 API 端点来考虑 ember-models。在这种情况下，您的 API 公开了 2 组不同的数据，因此最直接的解决方案是创建一个单独的 ember 模型来表示轻量级标题列表。这个模型将有它自己的 api 端点`/backend/newsitem_listings`。

```
App.NewsitemListing = DS.Model.extend({
  slug: DS.attr('string'),
  type: DS.attr('string'),
  title: DS.attr('string')
}); 
```

有了这个，您可以使用`App.NewsitemListing.find()`或`App.NewsitemListing.find({query: q})`获取部分/所有列表，然后`App.Newsitem.find(id)`加载单个记录的详细信息。您可能会考虑添加一个关系，例如`newsitem: DS.hasOne('App.Newsitem')`模型，或者您可以使用 slug 动态生成链接。

# php - 在页面上显示促销代码

> ID：15222741
> 
> 赞同：0
> 
> 时间：2013-03-05T11:33:52.820
> 
> 标签：php, sql, posting

我有几个 php 页面，用于在数据库中搜索我在管理面板中创建的促销代码

我正在努力将这些代码回显到促销页面

我的广告很简单

广告.php

```
<body>
    <div>
        <!-- Start SPECIAL OFFER/PROMO -->
        <div id="specialPromo" class="specialPromo">
            <p class="promoTitle">promotion title!</p>
            <p class="promoText">here is our promotion code</p>
        <div class="promoCodeBox">
            <!-- PROMO CODE -->
            <p class="promoCode"><?echo $showcode?></p>
            <!-- PROMO CODE -->
        </div>
        <div class="promoBtn"><a class="cupid-green" href="index.php?action=signup">JOIN NOW</div></a></div>
        <!-- End SPECIAL OFFER/PROMO -->
    </div>

</body>
</html> 
```

然后链接到另一个页面

获取代码.php

```
<? 
include ("include/universal.php");

//execute the SQL query and return records
$result = mysql_query("SELECT  discount_code FROM discount_codes WHERE discount_name='".$code."'"); 
 //fetch tha data from the database
while ($row = mysql_fetch_array($result)) 
{
$showcode = ($row{'discount_code'});
}

//close the connection
mysql_close($condb);

?> 
```

问题在于这段代码

```
$code = $code["code1"]; 
```

如果我将它放在 getcodes.php 中，则可以正常工作并获得结果

但我想把它放在 advert.php

最终计划是创建一个管理页面，我可以在其中选择一个广告并输入代号，它将自动填充要在该广告中使用的代码

但我什至无法让它与单个广告一起使用，直到我发现我没有机会从单个页面管理多个添加

任何关于我哪里出错的建议，请记住我现在只使用 php 2 周

提前谢谢大家的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:53:43.743

经过大量阅读后，我想通了，这很简单，所以不知道为什么没有人能提供帮助，也许是精英主义，我发现在其他网站中

这里的任何方式都是我解决它的方法

我将我的 getcodes.php 更改为：

```
<? 

include ("universal.php");

//CREATE AN ARRAY FOR OUT PUT
$showcode = array();
$showname = array();

//execute the SQL query and return records
$result = mysql_query("SELECT discount_name, discount_code FROM discount_codes"); 
//fetch tha data from the database
while ($row = mysql_fetch_array($result)) 
{
// create rusults for posting
$showcode[] = $row{'discount_code'};
$showname[] = $row{'discount_name'};

/* post results*/
//echo $showcode[]; //(copy to destination)
//echo $showname[];  //(copy to destination) 
}

//close the connection
mysql_close($condb);

?> 
```

重要的是

```
//CREATE AN ARRAY FOR OUT PUT
$showcode = array();
$showname = array(); 
```

和

```
// create rusults for posting
$showcode[] = $row{'discount_code'};
$showname[] = $row{'discount_name'}; 
```

这让我可以使用

```
/* post results*/
//echo $showcode[?]; //(copy to destination)
//echo $showname[?];  //(copy to destination) 
```

只需在我想输出结果的地方使用以下内容

```
echo $showcode[?];
echo $showname[?]; 
```

明显地 ？whoud 更改为代表当前提供的折扣代码的数字

使用此选项使我无需将广告页面中的任何内容发布到搜索中以提取所需代码，这只需将它们全部拉出，然后允许我选择要回显的内容

# c# - 如何在 Windows 8 中将程序集信息转换为 XAML？

> ID：15222749
> 
> 赞同：1
> 
> 时间：2013-03-05T11:34:21.617
> 
> 标签：c#, xaml, windows-8, assemblyinfo

有什么方法可以在 Windows 8 中绑定或使用 Xaml 中的应用程序版本和其他程序集信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:22:53.467

你应该使用[包类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.aspx)

所以在你的 C# 代码中获取包信息：

```
var myPackage = Windows.ApplicationModel.Package.Current; 
```

然后使用 TextBlock 或其他控件显示到应用程序中。

# python - GroupBy pandas DataFrame 并选择最常见的值

> ID：15222754
> 
> 赞同：148
> 
> 时间：2013-03-05T11:34:38.150
> 
> 标签：python, pandas, group-by, pandas-groupby, mode

我有一个包含三个字符串列的数据框。我知道第三列中唯一的一个值对于前两个的每个组合都是有效的。要清理数据，我必须按前两列按数据框分组，并为每个组合选择第三列的最常见值。

我的代码：

```
import pandas as pd
from scipy import stats

source = pd.DataFrame({'Country' : ['USA', 'USA', 'Russia','USA'], 
                  'City' : ['New-York', 'New-York', 'Sankt-Petersburg', 'New-York'],
                  'Short name' : ['NY','New','Spb','NY']})

print source.groupby(['Country','City']).agg(lambda x: stats.mode(x['Short name'])[0]) 
```

最后一行代码不起作用，它显示“Key error 'Short name'”，如果我尝试仅按 City 分组，则会收到 AssertionError。我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2019-01-22T09:06:56.510

# 熊猫 >= 0.16

### `pd.Series.mode`可用！

使用[`groupby`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html),[`GroupBy.agg`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.DataFrameGroupBy.agg.html)并将[`pd.Series.mode`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.mode.html)函数应用于每个组：

```
source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object 
```

如果需要将其作为 DataFrame，请使用

```
source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode).to_frame()

                         Short name
Country City                       
Russia  Sankt-Petersburg        Spb
USA     New-York                 NY 
```

有用的`Series.mode`是它总是返回一个系列，使其与`agg`and非常兼容`apply`，尤其是在重建 groupby 输出时。它也更快。

```
# Accepted answer.
%timeit source.groupby(['Country','City']).agg(lambda x:x.value_counts().index[0])
# Proposed in this post.
%timeit source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

5.56 ms ± 343 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.76 ms ± 387 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

* * *

### 处理多种模式

`Series.mode`*当有多种*模式时也做得很好：

```
source2 = source.append(
    pd.Series({'Country': 'USA', 'City': 'New-York', 'Short name': 'New'}),
    ignore_index=True)

# Now `source2` has two modes for the 
# ("USA", "New-York") group, they are "NY" and "New".
source2

  Country              City Short name
0     USA          New-York         NY
1     USA          New-York        New
2  Russia  Sankt-Petersburg        Spb
3     USA          New-York         NY
4     USA          New-York        New 
```

```
source2.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

Country  City            
Russia   Sankt-Petersburg          Spb
USA      New-York            [NY, New]
Name: Short name, dtype: object 
```

或者，如果您想为每种模式设置单独的行，您可以使用[`GroupBy.apply`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.apply.html)：

```
source2.groupby(['Country','City'])['Short name'].apply(pd.Series.mode)

Country  City               
Russia   Sankt-Petersburg  0    Spb
USA      New-York          0     NY
                           1    New
Name: Short name, dtype: object 
```

如果您**不关心**返回哪种模式，只要它是其中之一，那么您将需要一个调用`mode`并提取第一个结果的 lambda。

```
source2.groupby(['Country','City'])['Short name'].agg(
    lambda x: pd.Series.mode(x)[0])

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object 
```

* * *

### （不）考虑的替代方案

您也可以[`statistics.mode`](https://docs.python.org/3.4/library/statistics.html#statistics.mode)从 python 中使用，但是...

```
source.groupby(['Country','City'])['Short name'].apply(statistics.mode)

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object 
```

...在处理多种模式时效果不佳；a`StatisticsError`被提出。这在文档中提到：

> 如果数据为空，或者不存在最常见的值，则会引发 StatisticsError。

但你可以亲眼看到...

```
statistics.mode([1, 2])
# ---------------------------------------------------------------------------
# StatisticsError                           Traceback (most recent call last)
# ...
# StatisticsError: no unique mode; found 2 equally common values 
```

* * *

## 回答 #2

> 赞同：185
> 
> 时间：2013-03-05T11:48:38.883

您可以使用`value_counts()`获取计数系列，并获取第一行：

```
import pandas as pd

source = pd.DataFrame({'Country' : ['USA', 'USA', 'Russia','USA'], 
                  'City' : ['New-York', 'New-York', 'Sankt-Petersburg', 'New-York'],
                  'Short name' : ['NY','New','Spb','NY']})

source.groupby(['Country','City']).agg(lambda x:x.value_counts().index[0]) 
```

如果你想知道在 .agg() 中执行其他 agg 函数，试试这个。

```
# Let's add a new col,  account
source['account'] = [1,2,3,3]

source.groupby(['Country','City']).agg(mod  = ('Short name', \
                                        lambda x: x.value_counts().index[0]),
                                        avg = ('account', 'mean') \
                                      ) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-05T11:45:26.543

对于`agg`， lambba 函数得到一个`Series`，它没有`'Short name'`属性。

`stats.mode`返回两个数组的元组，所以你必须在这个元组中取第一个数组的第一个元素。

通过这两个简单的更改：

```
source.groupby(['Country','City']).agg(lambda x: stats.mode(x)[0][0]) 
```

返回

```
 Short name
Country City                       
Russia  Sankt-Petersburg        Spb
USA     New-York                 NY 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-07-06T03:58:23.130

在这里玩游戏有点晚了，但我遇到了 HYRY 解决方案的一些性能问题，所以我不得不想出另一个。

它通过查找每个键值的频率来工作，然后对于每个键，只保留最常出现的值。

还有一个支持多种模式的附加解决方案。

在代表我正在使用的数据的规模测试中，这将运行时间从 37.4 秒减少到了 0.5 秒！

这是解决方案的代码、一些示例用法和规模测试：

```
import numpy as np
import pandas as pd
import random
import time

test_input = pd.DataFrame(columns=[ 'key',          'value'],
                          data=  [[ 1,              'A'    ],
                                  [ 1,              'B'    ],
                                  [ 1,              'B'    ],
                                  [ 1,              np.nan ],
                                  [ 2,              np.nan ],
                                  [ 3,              'C'    ],
                                  [ 3,              'C'    ],
                                  [ 3,              'D'    ],
                                  [ 3,              'D'    ]])

def mode(df, key_cols, value_col, count_col):
    '''                                                                                                                                                                                                                                                                                                                                                              
    Pandas does not provide a `mode` aggregation function                                                                                                                                                                                                                                                                                                            
    for its `GroupBy` objects. This function is meant to fill                                                                                                                                                                                                                                                                                                        
    that gap, though the semantics are not exactly the same.                                                                                                                                                                                                                                                                                                         

    The input is a DataFrame with the columns `key_cols`                                                                                                                                                                                                                                                                                                             
    that you would like to group on, and the column                                                                                                                                                                                                                                                                                                                  
    `value_col` for which you would like to obtain the mode.                                                                                                                                                                                                                                                                                                         

    The output is a DataFrame with a record per group that has at least one mode                                                                                                                                                                                                                                                                                     
    (null values are not counted). The `key_cols` are included as columns, `value_col`                                                                                                                                                                                                                                                                               
    contains a mode (ties are broken arbitrarily and deterministically) for each                                                                                                                                                                                                                                                                                     
    group, and `count_col` indicates how many times each mode appeared in its group.                                                                                                                                                                                                                                                                                 
    '''
    return df.groupby(key_cols + [value_col]).size() \
             .to_frame(count_col).reset_index() \
             .sort_values(count_col, ascending=False) \
             .drop_duplicates(subset=key_cols)

def modes(df, key_cols, value_col, count_col):
    '''                                                                                                                                                                                                                                                                                                                                                              
    Pandas does not provide a `mode` aggregation function                                                                                                                                                                                                                                                                                                            
    for its `GroupBy` objects. This function is meant to fill                                                                                                                                                                                                                                                                                                        
    that gap, though the semantics are not exactly the same.                                                                                                                                                                                                                                                                                                         

    The input is a DataFrame with the columns `key_cols`                                                                                                                                                                                                                                                                                                             
    that you would like to group on, and the column                                                                                                                                                                                                                                                                                                                  
    `value_col` for which you would like to obtain the modes.                                                                                                                                                                                                                                                                                                        

    The output is a DataFrame with a record per group that has at least                                                                                                                                                                                                                                                                                              
    one mode (null values are not counted). The `key_cols` are included as                                                                                                                                                                                                                                                                                           
    columns, `value_col` contains lists indicating the modes for each group,                                                                                                                                                                                                                                                                                         
    and `count_col` indicates how many times each mode appeared in its group.                                                                                                                                                                                                                                                                                        
    '''
    return df.groupby(key_cols + [value_col]).size() \
             .to_frame(count_col).reset_index() \
             .groupby(key_cols + [count_col])[value_col].unique() \
             .to_frame().reset_index() \
             .sort_values(count_col, ascending=False) \
             .drop_duplicates(subset=key_cols)

print test_input
print mode(test_input, ['key'], 'value', 'count')
print modes(test_input, ['key'], 'value', 'count')

scale_test_data = [[random.randint(1, 100000),
                    str(random.randint(123456789001, 123456789100))] for i in range(1000000)]
scale_test_input = pd.DataFrame(columns=['key', 'value'],
                                data=scale_test_data)

start = time.time()
mode(scale_test_input, ['key'], 'value', 'count')
print time.time() - start

start = time.time()
modes(scale_test_input, ['key'], 'value', 'count')
print time.time() - start

start = time.time()
scale_test_input.groupby(['key']).agg(lambda x: x.value_counts().index[0])
print time.time() - start 
```

运行此代码将打印如下内容：

```
 key value
0    1     A
1    1     B
2    1     B
3    1   NaN
4    2   NaN
5    3     C
6    3     C
7    3     D
8    3     D
   key value  count
1    1     B      2
2    3     C      2
   key  count   value
1    1      2     [B]
2    3      2  [C, D]
0.489614009857
9.19386196136
37.4375009537 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-07-24T09:01:38.740

这里的两个最佳答案建议：

```
df.groupby(cols).agg(lambda x:x.value_counts().index[0]) 
```

或者，最好是

```
df.groupby(cols).agg(pd.Series.mode) 
```

然而，这两种情况在简单的边缘情况下都失败了，如下所示：

```
df = pd.DataFrame({
    'client_id':['A', 'A', 'A', 'A', 'B', 'B', 'B', 'C'],
    'date':['2019-01-01', '2019-01-01', '2019-01-01', '2019-01-01', '2019-01-01', '2019-01-01', '2019-01-01', '2019-01-01'],
    'location':['NY', 'NY', 'LA', 'LA', 'DC', 'DC', 'LA', np.NaN]
}) 
```

首先：

```
df.groupby(['client_id', 'date']).agg(lambda x:x.value_counts().index[0]) 
```

产量`IndexError`（因为 group 返回的空系列`C`）。第二：

```
df.groupby(['client_id', 'date']).agg(pd.Series.mode) 
```

返回`ValueError: Function does not reduce`，因为第一组返回两个列表（因为有两种模式）。（如此[处](https://stackoverflow.com/a/37955931/6220759)所述，如果第一组返回单一模式，这将起作用！）

这种情况的两种可能的解决方案是：

```
import scipy
x.groupby(['client_id', 'date']).agg(lambda x: scipy.stats.mode(x)[0]) 
```

[以及 cs95 在此处](https://stackoverflow.com/a/54304691/6220759)的评论中给我的解决方案：

```
def foo(x): 
    m = pd.Series.mode(x); 
    return m.values[0] if not m.empty else np.nan
df.groupby(['client_id', 'date']).agg(foo) 
```

但是，所有这些都很慢，不适合大型数据集。我最终使用的解决方案a）可以处理这些情况并且b）要快得多，是abw33答案的轻微修改版本（应该更高）：

```
def get_mode_per_column(dataframe, group_cols, col):
    return (dataframe.fillna(-1)  # NaN placeholder to keep group 
            .groupby(group_cols + [col])
            .size()
            .to_frame('count')
            .reset_index()
            .sort_values('count', ascending=False)
            .drop_duplicates(subset=group_cols)
            .drop(columns=['count'])
            .sort_values(group_cols)
            .replace(-1, np.NaN))  # restore NaNs

group_cols = ['client_id', 'date']    
non_grp_cols = list(set(df).difference(group_cols))
output_df = get_mode_per_column(df, group_cols, non_grp_cols[0]).set_index(group_cols)
for col in non_grp_cols[1:]:
    output_df[col] = get_mode_per_column(df, group_cols, col)[col].values 
```

本质上，该方法一次处理一个列并输出一个 df，因此`concat`您将第一个列视为 df，而不是密集的 df，然后迭代地将输出数组 ( `values.flatten()`) 添加为 df 中的列。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-12-12T17:47:19.093

正式地，正确答案是@eumiro 解决方案。@HYRY 解决方案的问题在于，当您有一个像 [1,2,3,4] 这样的数字序列时，解决方案是错误的，即您没有*mode*。例子：

```
>>> import pandas as pd
>>> df = pd.DataFrame(
        {
            'client': ['A', 'B', 'A', 'B', 'B', 'C', 'A', 'D', 'D', 'E', 'E', 'E', 'E', 'E', 'A'], 
            'total': [1, 4, 3, 2, 4, 1, 2, 3, 5, 1, 2, 2, 2, 3, 4], 
            'bla': [10, 40, 30, 20, 40, 10, 20, 30, 50, 10, 20, 20, 20, 30, 40]
        }
    ) 
```

如果您像@HYRY 一样计算，您将获得：

```
>>> print(df.groupby(['client']).agg(lambda x: x.value_counts().index[0]))
        total  bla
client            
A           4   30
B           4   40
C           1   10
D           3   30
E           2   20 
```

这显然是错误的（请参阅应该是*1*而不是*4的***A**值），因为它无法处理唯一值。

 **因此，另一个解决方案是正确的：

```
>>> import scipy.stats
>>> print(df.groupby(['client']).agg(lambda x: scipy.stats.mode(x)[0][0]))
        total  bla
client            
A           1   10
B           4   40
C           1   10
D           3   30
E           2   20 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-04-08T16:23:25.010

**如果您不想包含 NaN 值**，则 using比or`Counter`快得多：`pd.Series.mode``pd.Series.value_counts()[0]`

```
def get_most_common(srs):
    x = list(srs)
    my_counter = Counter(x)
    return my_counter.most_common(1)[0][0]

df.groupby(col).agg(get_most_common) 
```

应该管用。*当您有 NaN 值时，这将失败，因为每个 NaN 将单独计算。*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-24T09:13:35.197

如果您想要另一种不依赖于的方法来解决它，`value_counts`或者`scipy.stats`您可以使用该`Counter`集合

```
from collections import Counter
get_most_common = lambda values: max(Counter(values).items(), key = lambda x: x[1])[0] 
```

可以像这样应用于上面的例子

```
src = pd.DataFrame({'Country' : ['USA', 'USA', 'Russia','USA'], 
              'City' : ['New-York', 'New-York', 'Sankt-Petersburg', 'New-York'],
              'Short_name' : ['NY','New','Spb','NY']})

src.groupby(['Country','City']).agg(get_most_common) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-28T00:18:46.070

对于较大的数据集，一种稍微笨拙但更快的方法包括获取感兴趣列的计数，将计数从最高到最低排序，然后对子集进行重复数据删除以仅保留最大的案例。代码示例如下：

```
>>> import pandas as pd
>>> source = pd.DataFrame(
        {
            'Country': ['USA', 'USA', 'Russia', 'USA'], 
            'City': ['New-York', 'New-York', 'Sankt-Petersburg', 'New-York'],
            'Short name': ['NY', 'New', 'Spb', 'NY']
        }
    )
>>> grouped_df = source\
        .groupby(['Country','City','Short name'])[['Short name']]\
        .count()\
        .rename(columns={'Short name':'count'})\
        .reset_index()\
        .sort_values('count', ascending=False)\
        .drop_duplicates(subset=['Country', 'City'])\
        .drop('count', axis=1)
>>> print(grouped_df)
  Country              City Short name
1     USA          New-York         NY
0  Russia  Sankt-Petersburg        Spb 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-19T10:13:45.500

[这里](https://stackoverflow.com/a/15223034)的问题是性能，如果你有很多行，那将是一个问题。

如果是您的情况，请尝试以下操作：

```
import pandas as pd

source = pd.DataFrame({'Country' : ['USA', 'USA', 'Russia','USA'], 
              'City' : ['New-York', 'New-York', 'Sankt-Petersburg', 'New-York'],
              'Short_name' : ['NY','New','Spb','NY']})

source.groupby(['Country','City']).agg(lambda x:x.value_counts().index[0])

source.groupby(['Country','City']).Short_name.value_counts().groupby['Country','City']).first() 
```**

# javascript - 如果文本框为空，如何从文本框中隐藏图标图像

> ID：15222755
> 
> 赞同：0
> 
> 时间：2013-03-05T11:34:39.417
> 
> 标签：javascript, jquery

如果文本框内的长度小于 1，如何从文本框中隐藏清除图标。

我尝试了下面的代码，但它对我没有帮助。如果输入字段的长度小于 1，它不会隐藏内部图标。

示例演示是 [点击这里](http://jsbin.com/exizep)

我尝试了下面的代码来隐藏它。

```
 var myLength = $("#keywords").val().length; 
    if(myLength==0)
      {
        $("span").hide();// i tried to hide it but its not hiding
      } 
```

我的完整代码在这里

```
<!DOCTYPE html>
        <html lang="en">
            <head>
                <title>SO question 2803532</title>
                <script src="http://code.jquery.com/jquery-latest.min.js"></script>
                <script>
                    $(document).ready(function() {
                        var myLength = $("#keywords").val().length; 
                        if(myLength==0)
                        {
                           $("span").hide();// i tried to hide it but its not hiding
                        } 
                        //show the innser clearable icon if users type  any alphabets
                        $("input").keyup(function()
                        {
                            var textbox = $("#keywords").val().length;
                        if(textbox>=1)
                               $("span").hide();// i tried to hide it but its not hiding
                        });

                        $('input.deletable').wrap('<span class="deleteicon" />').after($('<span/>').click(function() {
                            $(this).prev('input').val('').focus();
                        }));
                    });
                 </script>
                <style>
                    span.deleteicon {
                        position: relative;
                    }
                    span.deleteicon span {
                        position: absolute;
                        display: block;
                        top: 5px;
                        right: 0px;
                        width: 16px;
                        height: 16px;
                        background: url('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=4') 0 -690px;
                        cursor: pointer;
                    }
                    span.deleteicon input {
                        padding-right: 16px;
                    }
                </style>
            </head>
            <body>
                <input type="text" class="deletable"  id="keywords">
            </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:44:16.007

你为什么不使用类**`deleteicon`**来隐藏，使用..

```
$('.deleteicon').hide(); 
```

在你的代码中做这件事，在`.after()`那里为 span 提供类名..

```
 $('input.deletable').wrap('<span class="deleteicon" />').after($('<span class="deleteme"/>').click(function()(){

}); 
```

然后使用这个类**deleteme**隐藏或显示无..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:45:30.693

用这个更新你的js：这是小提琴 `OLD updated one`：http: [//jsfiddle.net/3VxEH/8/](http://jsfiddle.net/3VxEH/8/)

今天更新的小提琴 3 月 7 日（IST）：http: [//jsfiddle.net/3VxEH/20/](http://jsfiddle.net/3VxEH/20/)

```
 $(document).ready(function() {

 $('input.deletable').wrap('<span class="deleteicon" />').after($('<div style="display:none"/>').click(function() {
                        $(this).prev('input').val('').focus();
                    }));
                     //  $(".deleteicon").find("div").hide(); 

                  var myLength = $("#keywords").val().length; 
                //  alert(myLength);
  if (myLength > 0) {
      $(".deleteicon").find("div").show(); 
 }

                    //show the innser clearable icon if users type  any alphabets
                    $("input").bind('ready keyup',function()

                    {
                        var textbox = $("#keywords").val().length;
                    if(textbox>=1)
                    //alert(textbox);
                           $(".deleteicon").find("div").show();// i tried to hide it but its not hiding
                            else {
                                $(".deleteicon").find("div").hide();
                                }
                    });

                }); 
```

# android - 在 OS X 上使用 Eclipse 为 Android 创建 Cordova 2.2.0 项目时出错

> ID：15222758
> 
> 赞同：1
> 
> 时间：2013-03-05T11:34:43.330
> 
> 标签：android, eclipse, macos, cordova

我正在为 OS X 上的 Android 创建一个 PhoneGap 项目，并安装了所有先决条件。从 PhoneGap 的终端创建应用程序时，它向我显示错误：

> 项目已经存在。删除并重新创建。

...但没有其他项目。

我用于创建应用程序的终端命令是：

```
:bin user $ ./create /user/documents/workspace/AndriodProject com.test.AndriodProject TestAndriod 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:42:36.927

*   首先检查文件夹 /workspace/AndroidProject 是否已经存在 - 您需要一个新路径：Phonegap 应该创建该文件夹。

*   当项目名称已在另一个 Eclipse 项目中使用时，我使用 Eclipse 并出现该错误。

*   也许您的问题可以通过以下问题的答案来解决：[cordova-android ./create $( which android ) exited with a 1](https://stackoverflow.com/questions/13767007/cordova-android-create-which-android-exited-with-a-1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-14T04:41:07.573

而不是：

```
:bin user $ ./create /user/documents/workspace/AndriodProject com.test.AndriodProject TestAndriod 
```

采用：

```
:bin user $ ./create **/user/documents/workspace/AndriodProject/TestAndriod** com.test.AndriodProject TestAndriod 
```

# java - org.w3c.dom.Element 在父级中获取位置

> ID：15222767
> 
> 赞同：0
> 
> 时间：2013-03-05T11:35:00.157
> 
> 标签：java, xml

如何获取元素在 childNode 列表中的位置？

例如

```
<a>
  <b></b><!-- return 0 -->
  <c></c><!-- return 1 -->
</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:40:16.837

我不认为[`Element`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html), [`Node`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html), 或[`NodeList`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NodeList.html)提供获取此信息的直接方法，但编写自己的快速函数很容易做到这一点：

```
int indexOfNode(Node node) {
    int index;
    Node sibling;

    index = 0;
    while ((sibling = node.getPreviousSibling()) != null) {
        node = sibling;
        ++index;
    }

    return index;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:42:29.243

我认为除了重复调用`getPreviousSibling()`直到它返回 null 或遍历父节点的子列表直到找到`==`与您开始使用的节点相同的子列表之外，没有其他直接的方法。

顺便说一句，在您在问题中给出的文档中，`b`元素在其父子列表中的索引为 1，并且该`c`元素的索引为 3，因为它们之间只有空白文本节点（一个在开头`a`和开头之间`b`，另一个在在关闭`b`和打开之间`c`）。

# r - 如何编写循环来运行数据框的 t 检验？

> ID：15222773
> 
> 赞同：8
> 
> 时间：2013-03-05T11:35:11.573
> 
> 标签：r, loops, dataframe, statistics, hypothesis-test

我遇到了对存储在数据框中的某些数据进行 t 检验的问题。我知道如何一一做，但一点效率都没有。请问如何写一个循环来做到这一点？

例如，我在testData中得到了数据：

```
testData <- dput(testData)
structure(list(Label = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L
), .Label = c("Bad", "Good"), class = "factor"), F1 = c(0.647789237, 
0.546087915, 0.461342005, 0.794212207, 0.569199511, 0.735685704, 
0.650942066, 0.457497016, 0.808619288, 0.673100668, 0.68781739, 
0.470094549, 0.958591821, 1, 0.46908343, 0.578755283, 0.289380462, 
0.685117658, 0.296011479, 0.208821225, 0.461487258, 0.176144907, 
0.325684001), F2 = c(0.634327378, 0.602685034, 0.70643658, 0.577336318, 
0.61069332, 0.676176013, 0.685433524, 0.601847779, 0.641738937, 
0.822097452, 0.549508092, 0.711380436, 0.605492874, 0.419354439, 
0.654424433, 0.782191133, 0.826394651, 0.63269692, 0.835389099, 
0.760279322, 0.711607982, 1, 0.858631893), F3 = c(0.881115444, 
0.850553659, 0.855405201, 0.732706141, 0.816063806, 0.841134018, 
0.899594853, 0.788591779, 0.767461265, 0.954481259, 0.840970764, 
0.897785959, 0.789288481, 0.604922471, 0.865024811, 0.947356946, 
0.96622214, 0.879623595, 0.953189022, 0.960153373, 0.868949632, 
1, 0.945716439), F4 = c(0.96939781, 0.758302, 0.652984943, 0.803719964, 
0.980135127, 0.945287339, 0.84045753, 0.926053105, 0.974856922, 
0.829936068, 0.89662815, 0.823594767, 1, 0.886954348, 0.825638185, 
0.798524271, 0.524755093, 0.844685467, 0.522120663, 0.388604114, 
0.725126521, 0.46430556, 0.604943457), F5 = c(0.908895247, 0.614799496, 
0.529111461, 0.726753028, 0.942601677, 0.86641298, 0.75771251, 
0.88237302, 1, 0.817706498, 0.834060845, 0.813550164, 0.927107922, 
0.827680764, 0.797814872, 0.768118872, 0.271122929, 0.790632558, 
0.391325631, 0.257446927, 0.687042673, 0.239520504, 0.521753545
), F6 = c(0.589651031, 0.170481902, 0.137755423, 0.24453692, 
0.505348067, 0.642589538, 0.308854104, 0.286913756, 0.60756673, 
0.531315171, 0.389958915, 0.236113471, 1, 0.687877983, 0.305962183, 
0.40469629, 0.08012222, 0.376774451, 0.098261016, 0.046544022, 
0.201513755, 0.02085411, 0.113698232), F7 = c(0.460358642, 0.629499543, 
0.598616653, 0.623674078, 0.526920757, 0.494086383, 0.504021253, 
0.635105287, 0.558992452, 0.397770725, 0.543528957, 0.538542617, 
0.646897446, 0.543646493, 0.47463817, 0.385081029, 0.555731206, 
0.43769237, 0.501754893, 0.586155312, 0.496028109, 1, 0.522921361
), F8 = c(0.523850222, 0.448936418, 0.339311791, 0.487421437, 
0.462073661, 0.493421514, 0.464091025, 0.496938844, 0.5817454, 
0.474404602, 0.720114482, 0.493098785, 1, 0.528538582, 0.478233718, 
0.2695123, 0.362377901, 0.462252858, 0.287725327, 0.335584366, 
0.397324649, 0.469082387, 0.403397835), F9 = c(0.481230473, 0.349419856, 
0.309729777, 0.410783763, 0.465172146, 0.520935471, 0.380916463, 
0.422238573, 0.572283353, 0.434705384, 0.512705279, 0.358892539, 
1, 0.606926979, 0.370574926, 0.319739889, 0.249984729, 0.381053882, 
0.245597953, 0.22883148, 0.314061676, 0.233511631, 0.269890359
), F10 = c(0.592403628, 0.249811036, 0.256613757, 0.305839002, 
0.497637944, 0.601946334, 0.401643991, 0.302626606, 0.623582766, 
0.706254724, 0.435846561, 0.324357521, 1, 0.740362812, 0.402588813, 
0.537414966, 0.216458806, 0.464852608, 0.251228269, 0.181500378, 
0.31840514, 0.068594104, 0.253873772), F11 = c(0.490032261, 0.366486136, 
0.336749996, 0.421899324, 0.479339762, 0.527364467, 0.398297911, 
0.432190187, 0.584030586, 0.453666402, 0.526861753, 0.388880674, 
1, 0.615835576, 0.39058525, 0.350811433, 0.290220147, 0.397424867, 
0.288095106, 0.274852912, 0.340129804, 0.271099396, 0.305499273
)), .Names = c("Label", "F1", "F2", "F3", "F4", "F5", "F6", "F7", 
"F8", "F9", "F10", "F11"), class = "data.frame", row.names = c(NA, 
-23L)) 
```

我需要对具有两个独立组的每一列运行 t 检验，即“好”与“坏”的几个特征“F1”到“F11”。我试图做类似的事情：

```
GoodF1 <- subset(testData, Label == 'Good', select=c("F1"))
BadF1  <- subset(testData, Label == 'Bad', select=c("F1"))
t.test(GoodF1$F1,BadF1$F1) 
```

然后做剩下的“F2”到“F11”，但显然效率不高。如果您有更好的想法来循环运行它，我真的很感激。非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:02:10.080

这是一个简单的解决方案，不需要额外的包：

```
lapply(testData[-1], function(x) t.test(x ~ testData$Label)) 
```

这里`testData[-1]`指的是除`testData`第一列（包含标签）之外的所有列。负索引用于排除数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T11:59:32.640

您可以使用公式接口`t.test`和使用`lapply`来迭代列名来构建公式：

```
lapply(names(testData)[-1],function(x)
           t.test(as.formula(paste(x,"Label",sep="~")),
                  data=testData))

[[1]]

        Welch Two Sample t-test

data:  F1 by Label 
t = -3.6391, df = 13.969, p-value = 0.002691
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -0.4519374 -0.1167204 
sample estimates:
 mean in group Bad mean in group Good 
         0.3776753          0.6620042 

[[2]]

        Welch Two Sample t-test

data:  F2 by Label 
t = 3.7358, df = 12.121, p-value = 0.002796
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 0.06997617 0.26529723 
sample estimates:
 mean in group Bad mean in group Good 
         0.8008989          0.6332622 

... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T11:49:07.600

我将数据放在长格式中，`reshape2`然后我使用您的代码，但在`lapply`.

```
library(reshape2)
dat <- melt(testData)
lapply(unique(dat$variable),function(x){
       Good <- subset(dat, Label  == 'Good' & variable ==x)$value
       Bad <- subset(dat, Label == 'Bad' & variable ==x)$value
       t.test(Good,Bad)
 }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T11:44:25.470

这很简单，使用类似的东西`lapply`，或者`ldply`来自`plyr`包：

```
library(plyr)
cols_to_test <- c("F1", "F2", "F3")
results <- ldply(
  cols_to_test,
  function(colname) {
    t_val = t.test(testData[[colname]] ~ testData$Label)$statistic
    return(data.frame(colname=colname, t_value=t_val))
    }) 
```

它将您的结果整齐地打包在数据框中：

```
 colname   t_value
1      F1 -3.639136
2      F2  3.735834
3      F3  4.303688 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-05T23:37:05.510

这似乎是一个很常见的场景，我自己也经常遇到这种情况。为此，现在有一个名为`matrixTests`. 因此，您可以像这样对每一列进行*t 检验：*

```
library(matrixTests)

goodMat <- testData[testData[,1]=="Good",-1]
badMat  <- testData[testData[,1]=="Bad",-1]

result <- col_t_welch(goodMat, badMat) 
```

每列的结果将按行显示：

```
> result
    obs.x obs.y obs.tot    mean.x    mean.y  mean.diff       var.x       var.y     stderr        df statistic       pvalue    conf.low   conf.high alternative mean.null conf.level
F1     15     8      23 0.6620042 0.3776753  0.2843289 0.030422051 0.032610380 0.07813088 13.969401  3.639136 0.0026907550  0.11672039  0.45193741   two.sided         0       0.95
F2     15     8      23 0.6332622 0.8008989 -0.1676367 0.007950091 0.011868380 0.04487264 12.121463 -3.735834 0.0027964901 -0.26529723 -0.06997617   two.sided         0       0.95
F3     15     8      23 0.8256733 0.9401514 -0.1144781 0.006957733 0.001949685 0.02659999 20.988353 -4.303688 0.0003146478 -0.16979764 -0.05915849   two.sided         0       0.95
F4     15     8      23 0.8742631 0.6091331  0.2651299 0.009285928 0.027017832 0.06321622  9.639523  4.194017 0.0020007742  0.12355816  0.40670172   two.sided         0       0.95
F5     15     8      23 0.8164387 0.4908705  0.3255682 0.015196701 0.054574685 0.08851525  9.132819  3.678104 0.0049648236  0.12577586  0.52536063   two.sided         0       0.95
F6     15     8      23 0.4429950 0.1678080  0.2751870 0.055993325 0.021810423 0.08036909 20.281178  3.424040 0.0026474215  0.10768889  0.44268512   two.sided         0       0.95
F7     15     8      23 0.5450866 0.5606705 -0.0155839 0.005238405 0.035530607 0.06921382  8.119018 -0.225156 0.8274218437 -0.17478492  0.14361711   two.sided         0       0.95
F8     15     8      23 0.5328120 0.3734072  0.1594048 0.023064998 0.005458074 0.04711609 20.936316  3.383236 0.0028151348  0.06140341  0.25740625   two.sided         0       0.95
F9     15     8      23 0.4797677 0.2803339  0.1994337 0.027905214 0.002845209 0.04707440 18.511452  4.236565 0.0004696924  0.10072958  0.29813785   two.sided         0       0.95
F10    15     8      23 0.4961010 0.2865410  0.2095600 0.045493711 0.023072590 0.07692196 18.972832  2.724320 0.0134746988  0.04854491  0.37057514   two.sided         0       0.95
F11    15     8      23 0.4941480 0.3147666  0.1793814 0.025996108 0.001953517 0.04446643 17.527205  4.034086 0.0008157456  0.08577994  0.27298287   two.sided         0       0.95 
```

对于 p 值，有一个名为*pvalue*的列：

```
> result$pvalue
[1] 0.0026907550 0.0027964901 0.0003146478 0.0020007742 0.0049648236 0.0026474215 0.8274218437 0.0028151348 0.0004696924 0.0134746988 0.0008157456 
```

# c - malloc(sizeof(int)) vs malloc(sizeof(int *)) vs (int *)malloc(sizeof(int))

> ID：15222774
> 
> 赞同：23
> 
> 时间：2013-03-05T04:25:41.290
> 
> 标签：c, memory, allocation, malloc

我承认这三个都有不同的含义。但是，我不明白这些具体情况适用于哪些特定情况。任何人都可以分享每个例子吗？谢谢你。

```
 malloc(sizeof(int))
       malloc(sizeof(int *))
(int *)malloc(sizeof(int)) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-05T05:52:16.373

`malloc(sizeof(int))`意味着您正在从堆中分配空间来存储`int`. 您将根据需要保留尽可能多的字节`int`。 ~~这将返回一个您应该转换为的值`int *`。（指向 . 的指针`int`。）~~ 正如一些人所指出的，C 中的典型做法是让隐式转换来处理这个问题。

`malloc(sizeof(int*))`意味着您正在从堆中分配空间来存储指向`int`. 您保留的字节数与指针所需的一样多。这将返回一个您应该转换为`int **`. （指向指向 . 的指针的指针`int`。）

`(int *)malloc(sizeof(int))`与第一次调用完全相同，但结果显式转换为指向 an 的指针`int`。

请注意，在许多体系结构中，an`int`与指针的大小相同，因此它们看起来（错误地）都是一样的。换句话说，您可能不小心做错了事，结果代码仍然可以工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T15:10:04.543

最简单的语法模式是：

```
 int *p;
 p = malloc (cnt * sizeof *p); 
```

如果 *p 的类型（和或大小......）发生变化，此语法不会强制您更改代码，例如

```
 struct mysstruct *q;
 q = malloc (cnt * sizeof *q); 
```

这将避免诸如

```
struct mysstruct *z;
z = malloc (cnt * sizeof(struct hisstruct)); // Auch! 
```

，加：`sizeof expr`形式也更短。

* * *

更新：为了证明`p = malloc(CNT * sizeof *p)`这个测试程序的正确性：

```
#include <stdio.h>
#include <stdlib.h>

struct mystruct {
        int i;
        char s[14];
        };
int main(void)
{
struct mystruct *p;
size_t siz;

siz = sizeof p;
printf("Sizeof p := %zu\n", siz);

siz = sizeof *p;
printf("Sizeof *p := %zu\n", siz);

printf("Allocating %zu (%u structs, each of size %zu) bytes to be assigned to p...\n"
        , 10u * sizeof *p
        , 10u, sizeof *p
        );
p = malloc(10 * sizeof *p);

return 0;
} 
```

这里输出：

```
Sizeof p := 8
Sizeof *p := 20
Allocating 200 (10 structs, each of size 20) bytes to be assigned to p... 
```

# java - Android中的Java Xml解析器

> ID：15222780
> 
> 赞同：2
> 
> 时间：2013-03-05T11:35:21.860
> 
> 标签：java, android, xml, xml-parsing

我收到 XML 格式的响应

```
<item>
<title>
<![CDATA[
28\. Februar 2013, FY/Q4 2012 Investoren-Telefonkonferenz
]]>
</title>
<author>
<![CDATA[ BAYER AG - Investorveranstaltungen ]]>
</author>
<pubDate>Thu, 28 Feb 2013 12:00:00 +0100</pubDate>
<description>
<![CDATA[
Rede von Dr. Marijn Dekkers, Vorsitzender des Vorstands der Bayer AG, Investoren-Telefonkonferenz zu den Ergebnissen des Geschaeftsjahres und des 4\. Quartals 2012\. (Auf...
]]>
</description>
<link>
http://www.webvideo.bayer.com/downloads/9208/9212/12312/file.mp3
</link>
<content:encoded>
<![CDATA[
<p>Rede von Dr. Marijn Dekkers, Vorsitzender des Vorstands der Bayer AG, Investoren-Telefonkonferenz zu den Ergebnissen des Geschaeftsjahres und des 4\. Quartals 2012\. (Auf Englisch)</p>
]]>
</content:encoded>
<category>ISIN_DE000BAY0017</category>
<category>ISIN_DE000BAY0017</category>
<category>podcast</category>
</item>
<item>
<title>
<![CDATA[
2013-01-30 - Analyst &amp; Investor Conference - Welcome Marc Spieker, Head of Investor Relations
]]>
</title>
<author>
<![CDATA[ E.ON Podcast ]]>
</author>
<pubDate>Wed, 30 Jan 2013 15:00:00 +0100</pubDate>
<description>
<![CDATA[ Analyst &amp; Investor... ]]>
</description>
<link>
http://www.thomson-webcast.net/de/portals/download.mp3?portal_id=315d3fce100b408b41a2c66bb982a367&presentation_id=d43466300a1a8ced8324011b593fb05a&video_id=24ae8f409449411695c0729760646bf7
</link>
<content:encoded>
<![CDATA[ <p>Analyst & Investor Conference</p> ]]>
</content:encoded>
<category>ISIN_DE000ENAG999</category>
<category>ISIN_DE000ENAG999</category>
<category>podcast</category>
</item> 
```

我编写了一个解析器来从响应中检索数据。

但问题是。当我在 2.1 设备上测试它时，它的工作原理如下，我用 Android 2.2 测试，android 2.2.1 它工作正常。任何人都可以告诉我有什么问题吗

```
 <link>
      http://www.webvideo.bayer.com/downloads/9208/9212/12312/file.mp3
   </link> 
```

我能够正确检索链接但是在另一种情况下，我失败了

```
 <link>
     http://www.thomson-webcast.net/de/portals/download.mp3?portal_id=315d3fce100b408b41a2c66bb982a367&presentation_id=d43466300a1a8ced8324011b593fb05a&video_id=24ae8f409449411695c0729760646bf7
    </link> 
```

当我解析结果是

```
 http://www.thomson-webcast.net/de/portals/download.mp3?portal_id=315d3fce100b408b41a2c66bb982a367 
```

之后的数据`&`丢失。我只在 android 2.1 中看到过这个。有人可以建议我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:40:22.950

可能链接文本也应该在`CDATA`部分中，或者将`&`标记转换为`&amp;`

被`&presentation_id...`视为（未解析的）XML 实体。

解决方案 1（带有`CDATA`）：

```
<link>
    <![CDATA[http://www.thomson-webcast.net/de/portals/download.mp3?portal_id=315d3fce100b408b41a2c66bb982a367&presentation_id=d43466300a1a8ced8324011b593fb05a&video_id=24ae8f409449411695c0729760646bf7]]>
</link> 
```

解决方案 2 `&amp;`：

```
<link>
    http://www.thomson-webcast.net/de/portals/download.mp3?portal_id=315d3fce100b408b41a2c66bb982a367&amp;presentation_id=d43466300a1a8ced8324011b593fb05a&amp;video_id=24ae8f409449411695c0729760646bf7
</link> 
```

# php - Janrain server side response to Android app

> ID：15222782
> 
> 赞同：0
> 
> 时间：2013-03-05T11:35:27.973
> 
> 标签：php, android, janrain

[Here's](https://rpxnow.com/docs/android#) the documentation on how to implement Janrain engine in Android.

Example of server side response is [here](https://rpxnow.com/docs/android#token_url).

Quote: "As necessary create and return access tokens or session cookies in your endpoint's response.", I don't want to save data on session or cookies, I want to get just plain text to my app as response.

How can I do this?

Also I work with php, I don't really get ruby example.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:20:28.403

在[https://github.com/janrain/Janrain-Sample-Code/blob/master/php/rpx-token-url.php](https://github.com/janrain/Janrain-Sample-Code/blob/master/php/rpx-token-url.php)有一些示例 PHP 代码返回 JSON 块。您可以自定义此代码以返回您正在寻找的纯文本响应。

# php - adding value and name to select box

> ID：15222783
> 
> 赞同：1
> 
> 时间：2013-03-05T11:35:44.263
> 
> 标签：php, jquery

```
<?php
$sql = "SELECT `docid`, `fullname` FROM `doctors` ORDER BY fullname ASC";
$result = $database->query($sql) or die('cannot connect to the database');

while($row = mysql_fetch_array($result))
{
echo"<option value= ".$row['docid'].">".$row['fullname']."</option>";
}
?> 
```

This is my select box which i am populating through datbase table.

```
$('.sheUpdate').click(function(){   

    var deptment = $(this).attr('dptname');
    var deptid   = $(this).attr('dptid');

    i want to make this one as SELECTED ITEM ON THE Select box  
    $("#Deptmentselectbox").prepend('<option value='+deptid+'>'+deptment+'</option>')

}); 
```

This is my jquery code. When i click ".sheUpdate" link i have couple of values that i am grabing using attr function. i am grabing depatment name and department value which i want to show as the SELECTED ITEM ON THE SELECT BOX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:41:51.587

我认为我们需要查看更多代码才能提供适当的帮助。.sheUpdate 类的元素的 html 代码是什么？

这个链接元素实际上是否具有属性 dptname 和 dptid？

您在#Deptmentselectbox 上使用的代码是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:42:40.633

您添加的代码工作正常。只需要将新添加的元素设置为选中即可。

**[请检查这个小提琴](http://jsfiddle.net/RnmmA/)** 另外，如果你写这个，请告诉我你得到什么价值

```
alert($(this).attr('dptname'));
alert($(this).attr('dptid'));

$('.sheUpdate').click(function(){   

    var deptment = $(this).attr('dptname');
    var deptid   = $(this).attr('dptid');   
    $("#Deptmentselectbox").prepend('<option value='+deptid+'>'+deptment+'</option>')
    $("#Deptmentselectbox").get(0).selectedIndex = 0;
    // OR $("#Deptmentselectbox").val(deptid);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:45:52.010

这是一个解决方案希望它有帮助

```
 $(document).ready(function(){
    $("#test1").click(function(){
        var data = $("#t").val();
        var data1 = $("#r").val();
        $("#try").prepend('<option value='+data+' selected="selected">'+data1+'</option>');
    });

   }); 
```

[点击这里进行演示](http://jsfiddle.net/p3Kys/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:07:15.080

假设您的初始选择框是这样的：

```
<select id="Deptmentselectbox">
    <option value=''> Select a department </option>
</select> 
```

要删除所选第一个选项的占位符：

```
$('.sheUpdate').click(function(){   
    var deptment = $(this).attr('dptname');
    var deptid   = $(this).attr('dptid');   
    if($("#Deptmentselectbox").val() == '')
     $("#Deptmentselectbox").html('<option value='+deptid+'>'+deptment+'</option>');
    else
     $("#Deptmentselectbox").prepend('<option value='+deptid+'>'+deptment+'</option>');
    $("#Deptmentselectbox").val(deptid);
} 
```

# clearcase - In ClearCase using commandprompt, how to check whether we have checkedout the latest version of the file?

> ID：15222784
> 
> 赞同：1
> 
> 时间：2013-03-05T11:35:53.460
> 
> 标签：clearcase

I have a file called prog.c in clearcase, for example the user has checked out this file, say the user has checked out the version 3 of the file.

After that, if some other users checked in the same version of file. say the latest version be 6\.

How to check the latest version of the file using the CLEARTOOL command?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:51:20.110

一种方法是`cleartool lsvtree yourFile`:
这将显示版本树的文本表示，允许您*查看*您拥有的版本是否是给定分支上的最新版本。

但是我有时在快照视图中使用的一个好技巧是：' `cleartool co -nc yourFile`'。

*   如果它有效，我`cleartool unco`立即。
*   但是，**如果版本不是最新的，则结帐将失败**，并显示警告要求先更新。

请注意，在动态视图中，问题略有不同：一个可以结帐（未预订）而其他结帐/签入。
你会知道你在签入阶段没有最新版本：它会抱怨你必须与实际的最新版本合并才能创建一个“新的最新”版本，这将是你的组合（合并）的结果工作和更高版本。

* * *

使用签出版本了解您所在位置的一种方法是执行以下操作：

```
cleartool descr -pred -fmt "%Sn" MyFile 
```

（请参阅“[使用 cleartool 更改集合前身](https://stackoverflow.com/a/6034423/6309)”和“[如何使用 ClearCase 列出我的所有签到？](https://stackoverflow.com/a/574899/6309) ”）

" `%Sn`" 将为您提供当前签出的文件的分支和版本。

您可以将其与以下内容进行比较：

```
 cleartool descr -fmt "%Sn" M:\aDynamicView\Vob\path\to\myFile 
```

如果您有一个**具有相同配置规范且没有检出**的动态视图，您可以将其用作**“参考视图”**，并查看该参考视图中的分支版本是否与您本地检出的版本相同（快照或动态）视图。

# c# - Is it possible to host a dot net web service on iMac?

> ID：15222788
> 
> 赞同：2
> 
> 时间：2013-03-05T11:36:05.383
> 
> 标签：c#, asp.net, macos, apache, webserver

Usually dot net web services are hosted in IIS(Internet Information Server).

Since IIS is not compatible with iMac.

How to host it in iMac?

is there any plugin to apache that lets apache run it? like that

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:40:41.330

查看[单声道](http://www.mono-project.com/Mono%3aOSX)

它是基于 unix 的操作系统的 asp.net 框架。[它使用阿帕奇](http://www.mono-project.com/Mod_mono)

# javascript - jQuery colorpicker 不适用于添加的元素

> ID：15222796
> 
> 赞同：2
> 
> 时间：2013-03-05T11:36:21.960
> 
> 标签：javascript, jquery, html, color-picker

我有这些小部件，里面有一个滑动框。页面加载时有两个小部件，但您可以添加一个小部件并再次将其删除。

滑动框内部是一个颜色选择器，在启动器小部件上颜色选择器可以正常工作，但在添加的小部件中颜色选择器不起作用。

看到这个小提琴：http: [//jsfiddle.net/fULQZ/](http://jsfiddle.net/fULQZ/)

我认为错误出现在颜色选择器的脚本中？

这是颜色选择器的脚本：

```
// Color picker
function updateBackground(color) {
    $(this).parents(".box_header").css("background", color.toHexString());
}

$(function() {

$(".flatPalette").spectrum({
    flat: true,
    showInput: true,
    showPaletteOnly: true,
    showPalette:true,
    maxPaletteSize: 10,
    palette: [
         ['#DDD','#9fd0d3', '#c9a9d1', '#e2a6a5', '#c2d2bd','#9fb2d1', '#dbba97', '#cbefe9', '#e6e8bf'],
        []
    ],
    change: updateBackground
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:18:56.830

在专用函数中提取您的频谱初始化，将其更改为选择器以获取所有非初始化，然后在 gridster.add_widget 之后调用此函数

```
function addSpectrum(){
    $(".flatPalette:empty").spectrum({ ... }); // :empty will get non init box
};

$('.addbox').on("click", function(){
    gridster.add_widget(' ... ', 2, 1);
    addSpectrum(); // add spectrum on the new box
});

addSpectrum(); // init spectrum on non dynamic box 
```

[http://jsfiddle.net/fULQZ/1/](http://jsfiddle.net/fULQZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:45:28.050

您需要一个“实时”选择器来匹配运行时添加的元素，请查看[http://api.jquery.com/live/](http://api.jquery.com/live/)

# php - php 导航栏处于活动状态

> ID：15222803
> 
> 赞同：0
> 
> 时间：2013-03-05T11:36:49.657
> 
> 标签：php, navigation

嗨，我试图让我的导航栏按钮处于活动状态，以便在该特定页面上看起来不同。

当我手动将我的 li 类更改为活动状态时，它可以工作，但是当我使用下面的代码执行此操作时，该类保持不变。

```
<?php 
    echo '<ul class="nav">';

        echo ($PHP_SELF == '/index.php') ?
        '<li class="active"><a href="index.php">Home</a></li>' :
        '<li class="none"><a href="index.php">Home</a></li>';

        echo ($PHP_SELF == '/how-it-works.php') ?
        '<li class="active"><a href="how-it-works.php">How it works</a></li>' :
        '<li class="none"><a href="how-it-works.php">How it works</a></li>';

        echo ($PHP_SELF == '/gas.php') ?
        '<li class="active"><a href="gas.php">Gas</a></li>' :
        '<li class="none>"><a href="gas.php">Gas</a></li>';

        echo ($PHP_SELF == '/electric.php') ?
        '<li class="active"><a href="electric.php">Electric</a></li>' :
        '<li class="none"><a href="electric.php">Electric</a></li>';

        echo ($PHP_SELF == '/telecoms.php') ?
        '<li class="active"><a href="telecoms.php">Telecoms</a></li>' :
        '<li class="none>"><a href="telecoms.php">Telecoms</a></li>';

        echo ($PHP_SELF == '/services.php') ?
        '<li class="active"><a href="services.php">Services</a></li>' :
        '<li class="none"><a href="services.php">Services</a></li>';

        echo ($PHP_SELF == '/contact.php') ?
        '<li class="active"><a href="contact.php">Contact</a></li>' :
        '<li class="none"><a href="contact.php">Contact</a></li>';

         echo '</ul>';
?> 
```

所以我想要的是当我在索引页面上时课程处于活动状态，当我不在索引页面上时我希望课程没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:38:33.913

尝试使用 PHP 的服务器变量[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

```
$_SERVER['PHP_SELF'] 
```

我认为这会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:47:09.987

```
<?php 
            echo '<ul class="nav">';

                echo ($_SERVER['PHP_SELF'] == 'index.php') ?
                '<li class="active"><a href="index.php">Home</a></li>' :
                '<li class="none"><a href="index.php">Home</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'how-it-works.php') ?
                '<li class="active"><a href="how-it-works.php">How it works</a></li>' :
                '<li class="none"><a href="how-it-works.php">How it works</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'gas.php') ?
                '<li class="active"><a href="gas.php">Gas</a></li>' :
                '<li class="none>"><a href="gas.php">Gas</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'electric.php') ?
                '<li class="active"><a href="electric.php">Electric</a></li>' :
                '<li class="none"><a href="electric.php">Electric</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'telecoms.php') ?
                '<li class="active"><a href="telecoms.php">Telecoms</a></li>' :
                '<li class="none>"><a href="telecoms.php">Telecoms</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'services.php') ?
                '<li class="active"><a href="services.php">Services</a></li>' :
                '<li class="none"><a href="services.php">Services</a></li>';

                echo ($_SERVER['PHP_SELF'] == 'contact.php') ?
                '<li class="active"><a href="contact.php">Contact</a></li>' :
                '<li class="none"><a href="contact.php">Contact</a></li>';

            echo '</ul>';
            ?> 
```

删除所有“/”并使用 $_SERVER['PHP_SELF']。

# c# - How to show a message on process end in website?

> ID：15222807
> 
> 赞同：3
> 
> 时间：2013-03-05T11:37:00.877
> 
> 标签：c#, asp.net, process, system.diagnostics

I want to start a process when i clicked the start button on webpage (asp.net site) now i want to set the label text to process started. and i want to set the label text to "Process Completed " when the process is ended. how to do this in asp.net and C#.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:34:24.767

您可能要考虑使用[ASP.NET SignalR](http://signalr.net/)。以下是它的作用的摘要：

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是**让您的服务器端代码实时将内容推送到连接的客户端的能力**。

下面是一个简单的网页示例，其中包含一个启动按钮`Notepad.exe`。进程启动后，页面上的标签会显示`process started`。当进程退出（`Notepad`关闭）时，标签的更新为`process exited`.

因此，首先创建一个 ASP.NET 空 Web 应用程序项目（我们将其命名为*MyWebApplication*）并获取[Microsoft ASP.NET SignalR NuGet 包](https://nuget.org/packages/Microsoft.AspNet.SignalR/1.0.1)。向项目中添加一个 Web 表单并将其命名为*Test*。将以下代码添加到*Test.aspx*文件：

```
<%@ Page Language="C#" AutoEventWireup="true" 
    CodeBehind="Test.aspx.cs" Inherits="MyWebApplication.Test" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js" 
        type="text/javascript"></script>
    <script src="Scripts/jquery.signalR-1.0.1.js" type="text/javascript"></script>
    <script src="/signalr/hubs" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            // Proxy created on the fly          
            var chat = $.connection.chat;
            // Declare a function on the chat hub so the server can invoke it          
            chat.client.addMessage = function (message) {
                $('#label').text(message);
            };
            // Start the connection
            $.connection.hub.start();
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager runat="server" />
        <div>
            <asp:UpdatePanel runat="server">
                <ContentTemplate>
                    <asp:Button runat="server" Text="Start Notepad.exe"
                        ID="button" OnClick="button_Click" />
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger 
                        ControlID="button" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel>
            <span id="label"></span>
        </div>
    </form>
</body>
</html> 
```

向您的项目添加一个新的类文件并将其命名为`Chat`. 在*Chat.cs 中*，您将拥有：

```
using Microsoft.AspNet.SignalR;

namespace MyWebApplication
{
    public class Chat : Hub
    {
        public void Send(string message)
        {
            //Call the addMessage method on all clients     
            var c = GlobalHost.ConnectionManager.GetHubContext("Chat");
            c.Clients.All.addMessage(message);
        }
    }
} 
```

将以下内容添加到*Test.aspx.cs*文件：

```
using System;
using System.Diagnostics;
using Microsoft.AspNet.SignalR;

namespace MyWebApplication
{
    public partial class Test : System.Web.UI.Page
    {
        Chat chat = new Chat();

        protected void Page_Load(object sender, EventArgs e)
        {
        }

        void MyProcess_Exited(object sender, EventArgs e)
        {
            chat.Send("process exited");
        }

        protected void button_Click(object sender, EventArgs e)
        {
            Process MyProcess = new Process();
            MyProcess.StartInfo = new ProcessStartInfo("notepad.exe");
            MyProcess.EnableRaisingEvents = true;
            MyProcess.Exited += MyProcess_Exited;
            MyProcess.Start();
            chat.Send("process started");
        }
    }
} 
```

添加*Global.asax*文件：

```
using System;
using System.Web.Routing;

namespace MyWebApplication
{
    public class Global : System.Web.HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.MapHubs();
        }
    }
} 
```

一些我没有涉及的东西：

1.  标签在所有连接上更新。
2.  我没有验证进程是否已经在运行（但这应该不是很难检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:06:23.670

如果您不想使用 javascript...您可以做的是在触发按钮单击事件时首先更改标签文本。

```
lblLabel.text="process started" 
```

button_click 事件的最后一行应该是：

```
lblLable.text="process completed"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:44:59.400

使用 javascript 进行回调。在每个阶段；启动、完成或错误；更新 html 中的标签。如果您使用 jQuery AJAX 查找一些示例，这应该相当简单。

[jQuery AJAX POST 示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:53:50.403

在 CodeBehind 中添加：

```
ScriptManager.RegisterStartupScript(this, GetType(), "Records Inserted Successfuly", "Showalert();", true); 
```

JAVASCRIPT 在源代码（aspx）中添加这个：

```
 function Showalert() {
            alert('Records inserted Successfully!');
        } 
```

并使用 System.Web.UI 添加；

**或者**

您可以像这样在 aspx 中简单地将标签添加到网络表单。

```
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

并在代码隐藏 aspx.cs 添加 ..

```
Labelname.Text = "whatever msg you wanna display." 
```

# installation - 有什么方法可以将 heat.exe 生成的组件分类为功能？

> ID：15222810
> 
> 赞同：1
> 
> 时间：2013-03-05T11:37:18.027
> 
> 标签：installation, wix

AFAIK 每个组件都应该属于某个功能。所以，我想知道 heat.exe 是否有任何命令可以将它生成的组件分类为功能。就我而言，我有数千个组件。所以我需要一些自动化的方法来将组件分类为特性。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:39:00.287

没有内置的东西`heat`可以做到这一点。唯一支持的“分类”是使用 XSL 转换输出。XSL 几乎可以做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:52:13.277

您可以根据组件组进行分类。如果您在逻辑上将文件拆分到不同的文件夹中，并在`heat.exe`每个文件夹中运行一次，您最终会得到许多`ComponentGroup`元素。最后，再拆分成特征。

可能，不完全是您正在寻找的东西，但有点相似。而且，正如@Rob 所建议的那样，XSL 始终是最后的手段。

# function - 评估存储在 Matlab 单元数组中的函数

> ID：15222815
> 
> 赞同：0
> 
> 时间：2013-03-05T11:37:28.100
> 
> 标签：function, matlab, cell-array

我有一个 `objective`在 Matlab 中调用的函数，我通过编写`[f, df] = objective(x, {@fun1, @fun2, ..., @funN})`脚本来评估。函数`fun1, fun2, ..., funN`的格式为`[f, df] = funN(x)`.

在里面`objective`我想，对于我的单元格数组中的每个输入，`fun`使用 Matlab 内置函数评估给定的函数`feval`：

```
function [f, df] = objective(x, fun)
f  = 0;
df = 0;
for i = 1:length(fun)
    fhandle   = fun(i);
    [fi, dfi] = feval(fhandle, x);
    f         = f + fi;
    df        = df + dfi;
end
end 
```

我收到以下错误评估我的`objective`.

```
Error using feval
Argument must contain a string or function_handle. 
```

我不明白如何解决这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:40:32.327

您需要引用`fun`使用花括号的元素

```
fhandle = fun{i}; 
```

PS
[最好不要在Matlab中使用`i`and作为变量名`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

或者，[使用`cellfun`](https://stackoverflow.com/a/15224927/1714410).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:23:22.600

使用更优雅的方法[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)

```
function [f df] = objective( x, fun )
[f, df] = cellfun( @(f) f(x), fun );
f = sum(f);
df = sum(df); 
```

请注意怪异的使用`cellfun`- cellarray 是乐趣而不是数据；-)

# android - Change Tab's Text from the Fragment

> ID：15222817
> 
> 赞同：2
> 
> 时间：2013-03-05T11:37:28.957
> 
> 标签：android, actionbarsherlock

I'm trying to do something very simple. I have 2 tabs, one showing information about the breed of a dog and the other is showing a list of reviews that people have written describing the breed. I would like to include the number of reviews that were written in the Tab as well so it would look like so:

Breed Info | Reviews(19)

The issue is that I need to download said review data first in order to see the number of reviews there is on the tab.

So what I thought of as a solution was to add the tab first in my BreedProfile.java (ShelockActivity)

```
ActionBar.Tab reviewTab= ab.newTab();
reviewTab.setText("Reviews");
mTabsAdapter.addTab(reviewTab, DogReviewFragment.class, null); 
```

Then in my BreedProfileReviewFragment.java I would download the reviews then update the reviewTab text by doing so:

```
getActivity().getActionBar().getTabAt(1).setText("Reviews 10"); 
```

However, the above method does not exist according to the LogCat.

```
03-05 18:15:26.460: E/AndroidRuntime(1286): FATAL EXCEPTION: main
03-05 18:15:26.460: E/AndroidRuntime(1286): java.lang.NoSuchMethodError: android.support.v4.app.FragmentActivity.getActionBar 
```

So my question is, is it possible to access the TAB from the FRAGMENT to change the TEXT property of the TAB after it is added? If it is, how can I achieve that?

NOTES:

1.  I cannot download the reviews together with the breed information because the API's are separate.

2.  The BreedProfile.java Originates from a list of Breeds in a ListActivity BreedList.java.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:57:00.633

您可以实现一个`Interface`. 因此您可以在片段的父活动中运行代码。

在您的片段中创建您的界面，如下所示：

```
public interface OnQuestionSelectedListener {
 void onQuestionSelected(int Position, boolean isFirstTime);
} 
```

在您的父活动端实现它，如下所示：

```
public class YourParentActivity extends Activity implements YourFragment.OnQuestionSelectedListener{
       @Override
    public void onQuestionSelected(int position, boolean isFirstTime) {
        // your code.
         }
} 
```

从您的片段中调用它，如下所示：

```
((YourParentActivityName)getActivity()).onQuestionSelected(position, true); 
```

（您可以根据需要对代码进行更改）
将所有片段逻辑转移到其父级是一个非常好的做法，因为我认为片段用于您的 UI 部分，并`Interface`为我们提供了一种转移片段的好方法向父级发送消息。在父级执行所有活动并将结果传输到相应的片段。

希望这会有所帮助。

# css - 在 ColdFusion 中将 HTML 表格及其样式导出为 PDF

> ID：15222831
> 
> 赞同：0
> 
> 时间：2013-03-05T11:38:19.530
> 
> 标签：css, html-table, coldfusion, pdf-generation

我正在研究 ColdFusion，试图将 HTML 表格导出到 PDF 文档。此 HTML 表格从外部 CSS 文件派生其样式。问题是导出时，表格格式未在 pdf 文档中导出。我需要将表格导出为在浏览器上呈现的内容（连同其格式）。

以下是相同的代码。

**内容.cfm**

```
<cfsavecontent variable="pdfREPORT">
<table id="dep" class="main_table" cellpadding="0">
    <tr class="h1">

                    <th>cell1</th>
                    <th>cell2</th>
                    <th>cell3</th>
                    <th>cellN</th>
    </tr>
            .
    .
    .
            <cfoutput query="qry1">
                <tr>
                        <td>#qry1.col1#</td> 
                        <td>#qry1.col2#</td> 
                        <td>#qry1.col3#</td> 
                        <td>#qry1.colN#</td> 
                </tr>                  
    </cfoutput>     
</table>
</cfsavecontent> 
```

**extract_to_pdf.cfm**

```
<cfsetting enablecfoutputonly="true">
<cfheader name="Content-Disposition" value="inline;filename=test.pdf">
<cfcontent type="application/pdf">
<cfdocument format="PDF" localurl="yes" marginTop=".25" marginLeft=".25" marginRight=".25" marginBottom=".25"
        pageType="custom" pageWidth="8.5" pageHeight="10.2" mimetype="text/html">
<html> 
    <head>      
        <style>
            <cfinclude template = "styles/tableStyle.css">
        </style>
    </head>
    <body>
        <cfoutput>#Form.pdfREPORT#</cfoutput>
    </body>
</html>
</cfdocument> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:56:44.043

显示您正在使用的代码将帮助我们回答这个问题，但是，您的`cfdocument`块中是否有您的 CSS 链接？如果你这样做了，但它仍然无法正常工作，请尝试：

```
<cfdocument ...>
    <html> 
        <head>      
            <style>
                <cfinclude template = "yourCSSfile.css">
            </style>
        </head>
        <body>
            <table>
                ...
            </table>
        </body>
    </html>
</cfdocument> 
```

# java - 如何将相同的字符串分组到任何集合中？

> ID：15222832
> 
> 赞同：1
> 
> 时间：2013-03-05T11:38:20.287
> 
> 标签：java

我有一个字符串看起来像

```
 {APP,LEE,APP,KCC,KCC,LEE,APP}. 
```

我想将 APP、LEE、KCC 等相同的值分别推送到不同的数组列表（任何集合）中。

例如：

*   arraylist 1 应该有 {APP,APP,APP}
*   arraylist 2 应该有 {KCC,KCC}
*   arraylist 3 应该有 {LEE,LEE}

这样我就可以确定有多少不同的群体以及它们的价值。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:41:13.340

您可以改为从 ArrayList 创建一个 Set （这将删除重复项），然后取该集合的大小，该集合的每个项目将是一个组

```
Set<String> groups = new HashSet<String>(list);

groups.size(); //Number of groups

for(String group : groups) {
    System.out.println(group); //Print each value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:43:55.900

使用`Map<String, List<String>>`. 每个值都将包含一个元素列表（如果需要，可以使用 Integer 进行计数）

添加元素时：

```
List<String> elemList = myMap.get(key);
if (elemList == null){
    elemList = new ArrayList<String>;
    myMap.put(key, elemList);
}
elemList.add(key); 
```

虽然使用计数器更好......

```
 Map<String, Integer> myMap = new HashMap<>();
...
    Integer count = myMap.get(key);
    if (count == null){
        myMap.put(key, 1);
    } else {
        myMap.put(key, count + 1);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:46:32.387

用每个列表创建一个地图是最简单的。然后如果一个键没有退出，创建它的条目，然后追加。

像这样的东西：

```
Map<String, List<String>> result = new HashMap<String, List<String>>();

String[] values = source.substring(1, source.length() - 1).split(",");
for (String value : values) {
   List<String> existingMatches = result.get(value);
   if (existingMatches == null) {
     existingMatches = new ArrayList<String>();
     result.put(value, existingMatches);
   }
   existingMatches.add(value);
} 
```

如果您只需要不同值的计数，请将 List 替换为 AtomicInteger，然后递增该值，那么您最终会得到一个不同字符串的映射，以及它出现的次数。

# excel - VBA中的连续单元格值

> ID：15222844
> 
> 赞同：3
> 
> 时间：2013-03-05T11:38:50.827
> 
> 标签：excel, vba

是否可以将连续单元格值与单个单元格进行比较？例如：

```
If Sheets("Sheet2").Range("E4:E6").Value = Sheets("Sheet1").Range("D4").Value Then

.... 
```

我试过这个但显示错误`TYPEMISMATCH`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:05:41.753

该表达式`Sheets("Sheet2").Range("E4:E6").Value`返回一个二维数组，其中包含这些单元格中的值。如您所见，您无法使用等号运算符将值与数组进行比较。

如果您想查看该值是否存在，您可以像这样使用 Match 工作表函数

```
Sub FindMatch()

    Dim lMatch As Long

    On Error Resume Next
        lMatch = Application.WorksheetFunction.Match(Range("D4").Value, Range("E4:E6").Value, False)
    On Error GoTo 0

    If lMatch > 0 Then
        Debug.Print "Value exists"
    Else
        Debug.Print "Not included"
    End If

End Sub 
```

如果您试图确定范围内的所有值是否相同，您可以像这样使用 Sumif

```
Sub FindAllMatch()

    Dim dSum As Double

    If Application.WorksheetFunction.Sum(Range("E4:E6")) = Application.WorksheetFunction.SumIf(Range("E4:E6"), Range("D4").Value) Then
        Debug.Print "All match"
    Else
        Debug.Print "One doesn't match"
    End If

End Sub 
```

另一个选项是 Filter VBA 函数，它返回按某些条件过滤的数组。Filter 需要一个一维数组， Range().Value 返回一个二维数组，因此您必须使用 Transpose 函数进行转换。

```
Sub Findmatch2()

    Dim vaOneD As Variant
    Dim sMatch As String

    sMatch = Range("D4").Value

    vaOneD = Application.WorksheetFunction.Transpose(Range("E4:E6").Value)

    If UBound(Filter(vaOneD, sMatch, True)) > -1 Then
        Debug.Print "There's a match"
    Else
        Debug.Print "No match"
    End If

End Sub 
```

要检查所有值是否相同，请将相应的行更改为

```
If UBound(Filter(vaOneD, sMatch, True)) - LBound(Filter(vaOneD, sMatch, True)) = UBound(vaOneD) - LBound(vaOneD) Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:45:39.943

尝试

```
Sheets("Sheet2").Range("E4:E6") = Sheets("Sheet1").Range("D4").Value 
```

如果没有，那么你需要一个 for 循环：

```
c = true
for each i in Sheets("Sheet2").Range("E4:E6")
    If i <> Sheets("Sheet1").Range("D4").Value then
        c = false
        Exit for
    End if
Next
 If c then
..... 
```

# view - SQLite3 在视图上匹配？

> ID：15222845
> 
> 赞同：1
> 
> 时间：2013-03-05T11:38:50.870
> 
> 标签：view, sqlite, virtual, match

所以我附加了多个数据库，然后创建了一个 TEMP VIEW，它结合了来自各种数据库的所有 virtualTables。

```
theDatabase.execSQL("CREATE TEMP VIEW virtualView AS SELECT * FROM Virtual_Sites UNION SELECT * FROM db1.Virtual_Sites UNION SELECT * FROM db2.Virtual_Sites"); 
```

是否可以在此 VIEW 上使用 MATCH 查询？

```
theDatabase.rawQuery(SELECT * FROM virtualView WHERE all_text MATCH 21033, null) 
```

我目前收到此错误。

```
sqlite returned: error code = 1, msg = statement aborts at 46: [SELECT * FROM virtualView WHERE all_text MATCH 21033] unable to use function MATCH in the requested context, db=xxx

exception: SQL logic error or missing database; query: SELECT * FROM virtualView WHERE all_text MATCH 21033 
```

我读过以这种方式创建 VIEW 不会继承基础表索引，这就是我无法进行 MATCH 的原因吗？如果是这样，有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:59:00.380

`MATCH`仅适用于实现此运算符的虚拟表，而不适用于视图。

您将不得不重写所有查询以`MATCH`在各个表上使用，并将这些结果与`UNION ALL`.

或者，将所有表的数据复制到一个临时表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:14:42.253

这就是我发现的。VIEWS 在组合多个数据库/表时效率低下，因为一旦它们包含超过 2 个表，它们就会失去下划线索引。

**附**

```
String newDbPath = DB_PATH + DB_NAME;
theDatabase.execSQL("ATTACH DATABASE '" + newDbPath + "' as db1;"); 
```

**低效的方式**

```
Create VIEW
theDatabase.execSQL("CREATE TEMP VIEW view1 AS SELECT * FROM Sites_hsf UNION SELECT * FROM db1.Sites_hsf UNION SELECT * FROM db2.Sites_hsf;");

Query VIEW
sqlStatement = "SELECT * FROM view1 s INNER JOIN view2 con ON s.site_uid = con.site_uid AND con.ap_active = 1 WHERE s.site_uid = 1114331"; 
```

执行时间 16281 毫秒

**高效的方法**

```
sqlStatement = "SELECT * FROM Sites_hsf s INNER JOIN Connections_hsf con ON s.site_uid = con.site_uid AND con.ap_active = 1 WHERE s.site_uid = 1114331 " +
                "UNION ALL " +
                "SELECT * FROM db1.Sites_hsf s1 INNER JOIN db1.Connections_hsf con1 ON s1.site_uid = con1.site_uid AND con1.ap_active = 1 WHERE s1.site_uid = 1114331 " +
                "UNION ALL " +
                "SELECT * FROM db2.Sites_hsf s2 INNER JOIN db2.Connections_hsf con2 ON s2.site_uid = con2.site_uid AND con2.ap_active = 1 WHERE s2.site_uid = 1114331"; 
```

执行时间 4 毫秒

* * *

MATCH 使用 CL.'s answer of UNION ALL

```
sqlStatement = "SELECT * FROM Virtual_Sites_hsf WHERE all_text MATCH '40227' " +
                "UNION ALL SELECT * FROM db1.Virtual_Sites_hsf WHERE all_text  MATCH '40227'" +
                "UNION ALL SELECT * FROM db2.Virtual_Sites_hsf WHERE all_text  MATCH '40227'" 
```

* * *

希望这可以帮助某人。

# c - 将十六进制从套接字转换为十进制

> ID：15222848
> 
> 赞同：0
> 
> 时间：2013-03-05T11:38:58.593
> 
> 标签：c, hex

在服务器中，我首先获取图像数据的长度，然后通过 TCP 套接字获取图像数据。如何将长度（十六进制）转换为十进制，以便知道应该读取多少图像数据？（例如 0x00 0x00 0x17 0xF0 到 6128 字节）

```
char len[4];
char buf[1024];
int lengthbytes = 0;
int databytes = 0;
int readbytes = 0;

// receive the length of image data
lengthbytes = recv(clientSocket, len, sizeof(len), 0);

// how to convert binary hex data to length in bytes

// get all image data 
while ( readbytes < ??? ) {

    databytes = recv(clientSocket, buf, sizeof(buf), 0);

    FILE *pFile;
    pFile = fopen("image.jpg","wb");
    fwrite(buf, 1, sizeof(buf), pFile);

    readbytes += databytes;
}

fclose(pFile); 
```

编辑：这是工作的。

```
typedef unsigned __int32 uint32_t; // Required as I'm using Visual Studio 2005
uint32_t len;
char buf[1024];
int lengthbytes = 0;
int databytes = 0;
int readbytes = 0;

FILE *pFile;
pFile = fopen("new.jpg","wb");

// receive the length of image data
lengthbytes = recv(clientSocket, (char *)&len, sizeof(len), 0);

// using networkd endians to convert hexadecimal data to length in bytes
len = ntohl(len);

// get all image data 
while ( readbytes < len ) {
databytes = recv(clientSocket, buf, sizeof(buf), 0);
fwrite(buf, 1, sizeof(buf), pFile);
readbytes += databytes;
}

fclose(pFile); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:40:57.393

如果您以零结尾数字，因此它变成一个字符串（假设您将数字作为字符发送），您可以使用[`strtoul`](http://en.cppreference.com/w/c/string/byte/strtoul).

* * *

如果您将其作为二进制 32 位数字发送，则您已经在需要时拥有了它。您应该只使用不同的数据类型`uint32_t`：：

```
uint32_t len;

/* Read the value */
recv(clientSocket, (char *) &len, sizeof(len));

/* Convert from network byte-order */
len = ntohl(len); 
```

在设计二进制协议时，您应该始终使用标准的固定大小数据类型，就像`uint32_t`上面的示例一样，并且始终以网络字节顺序发送所有非文本数据。这将使协议在平台之间更具可移植性。但是，您不必转换实际的图像数据，因为它应该已经是独立于平台的格式，或者只是没有任何字节顺序问题的纯数据字节。

# android - Android-不断检查数据库中的新记录并生成通知，提供新条目的详细信息

> ID：15222851
> 
> 赞同：0
> 
> 时间：2013-03-05T11:39:03.390
> 
> 标签：android, android-intent, android-service, alarmmanager

我正在尝试创建一个 android 应用程序，该应用程序不断检查远程数据库中的新记录，并在添加新记录时提供通知。我想对添加的每条记录重复此操作。

到目前为止，我已经完成了以下操作创建了一个从数据库中获取数据的服务。任何人都可以建议在固定间隔后一次又一次地调用服务的最佳方法，或者保持服务正常运行并重复调用方法。什么会证明更好的表现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:44:30.467

不断检查远程数据库中的新记录将在您的应用程序中产生负载。

您可以使用 Google Cloud 到设备消息服务。每次远程数据库有新记录时，这都会向设备发送通知消息。

请检查：http: [//developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

GCM 的步骤

1.在AndroidManifest.xml中添加以下权限和接收者

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<permission android:name="com.example.test.permission.C2D_MESSAGE" 
    android:protectionLevel="signature" />
<uses-permission android:name="com.example.test.permission.C2D_MESSAGE" />

 <receiver
        android:name="com.example.test.MyBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.test" />
        </intent-filter>
    </receiver> 
```

**注意：**查找并替换 com.example.test 为您的包名称

1.  MyBroadcastReceiver.java

    ```
    public class MyBroadcastReceiver extends BroadcastReceiver{

        private static final String TAG = "GCM";
        MyPrefs myPrefs ;

    @Override
    public void onReceive(Context context, Intent intent) {

    myPrefs = new MyPrefs(context);

    Log.d(TAG,"inside onReceive");

    String action = intent.getAction();
    if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {

        handleRegistration(context,intent);
    } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {

        handleMessage(context,intent);
    }
    }
    private void handleRegistration(Context context,Intent intent) {
    String registrationId = intent.getStringExtra("registration_id");
    String error = intent.getStringExtra("error");
    String unregistered = intent.getStringExtra("unregistered");       

    // registration succeeded
    if (registrationId != null) {
        Log.d(TAG, "Device_reg_id : "+registrationId);

        // store registration ID on shared preferences
        myPrefs.putString("DEVICE_REG_ID", registrationId);

        // notify 3rd-party server about the registered ID
        generateNotification(context, "Registration Sucessful", "Device register sucessfully!");
    }

    // unregistration succeeded
    if (unregistered != null) {
        // get old registration ID from shared preferences
        // notify 3rd-party server about the unregistered ID
    } 

    // last operation (registration or unregistration) returned an error;
    if (error != null) {
        if ("SERVICE_NOT_AVAILABLE".equals(error)) {
            // optionally retry using exponential back-off
            // (see Advanced Topics)
        } else {
            // Unrecoverable error, log it
            Log.i(TAG, "Received error: " + error);
        }
    }
    }
    private void handleMessage(Context context, Intent intent) {

    String data = intent.getExtras().getString("data");
    generateNotification(context, "New Message is received", data);
    }

    private void generateNotification(Context context,String title,String text) {

    NotificationCompat.Builder mBuilder = 
            new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle(title)
            .setContentText(text);

    // Creates an explicit intent for an Activity in your app
    Intent resultIntent = new Intent(context, MainActivity.class);

    PendingIntent resultPendingIntent = PendingIntent.getBroadcast(context,0,resultIntent, 0);     
    mBuilder.setContentIntent(resultPendingIntent);

    NotificationManager mNotificationManager =
        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    // mId allows you to update the notification later on.
    mNotificationManager.notify(0, mBuilder.build());
     } 
    ```

2.  MainActivity.java

    ```
    public class MainActivity extends Activity {

     String device_reg_id;

     @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MyPrefs prefs = new MyPrefs(this);
    device_reg_id = prefs.getString("DEVICE_REG_ID"); 

    if (device_reg_id == null )
    {
        Log.d("GCM", "Registration start");
        // registration 
        Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
        // sets the app name in the intent
        registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
        registrationIntent.putExtra("sender", "1850XXXX2785");
        startService(registrationIntent);
    }else
    {
        // send a message to device its self

            String api_key = "AIzaSyBXSJHPqFiYeYdAoYfN1XlI20Es";

            Sender sender = new Sender(api_key);

            Message message = new Message.Builder()
            .collapseKey("1")
            .timeToLive(3)
            .delayWhileIdle(true)
            .addData("data", "Welcome!")
            .build();

            Result result;
            try {
                result = sender.send(message, device_reg_id, 5);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
          }
        }
      } 
    ```

3.  MyPrefs.java

    ```
    public class MyPrefs {

     private SharedPreferences sp;
     private Editor editor;

     public MyPrefs(Context context){
            sp = PreferenceManager.getDefaultSharedPreferences(context);
            editor = sp.edit();
     }
    public void putString(String key,String Value){
              editor.putString(key,Value);
              editor.commit();
    }
    public String getString(String key){
           return sp.getString(key,null);
     }
    } 
    ```

**注意**不要忘记从 sdk\extras\google\gcm\gcm-server\dist导入**gcm-server.jar 。**如果您在 sdk 中找不到路径，则在 Android SDK Manager 的 Extras 下安装 Google Cloud Messaging for Android Libaray

# xml - Magento 添加新的页面布局以供类别使用

> ID：15222853
> 
> 赞同：1
> 
> 时间：2013-03-05T11:39:07.220
> 
> 标签：xml, magento-1.7

我的商店中有一个类别需要与标准 Magento 布局完全不同的布局。因此，我创建了 1column.phtml 的新副本并对其进行了重新命名并进行了一个小改动以进行测试：

**前端/测试/默认/模板/页面/1column-lookbook.phtml**

```
 <?php
/**
 * Template for Mage_Page_Block_Html
 */
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->getLang() ?>" lang="<?php echo $this->getLang() ?>">
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="container">
    <?php echo $this->getChildHtml('global_notices') ?>
    <div class="page">
        <?php echo $this->getChildHtml('header') ?>
        <div class="page_content">
            <div class="row">
                <div class="sixcol">
                    <?php echo $this->getChildHtml('breadcrumbs') ?>
                </div>
                <div class="sixcol last">

                </div>
            </div>
            <div class="row"><h3>Filter here</h3></div>
            <div class="row"><h3>Scrolling content</h3></div>
            <div class="row">
                <div class="main-content">
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
                </div>
            </div>
            <?php echo $this->getChildHtml('footer') ?>
            <?php echo $this->getChildHtml('before_body_end') ?>
        </div>
    </div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

但是，我似乎无法让我的类别看到这一点，我尝试在 page.xml 和 layout.xml 文件中添加对它的引用。但无论我尝试了什么，我似乎都无法让它在我的类别的页面布局下拉列表中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:37:19.590

当您在 magento 中搜索“1column.phtml”字符串时，您会发现：

**App/code/core/Mage/Page/etc/config.xml**
*在第 45 行你会找到你需要的配置*

**现在您可以将相同的配置结构放在您自己的模块中，如下所示：**

```
<global>
    <page>
        <layouts>
            <test module="page" translate="label">
                <label>The test</label>
                <template>page/test.phtml</template>
                <layout_handle>page_test</layout_handle>
            </test>
        </layouts>
    </page>
</global> 
```

刷新magento缓存并转到您的类别编辑屏幕=>自定义设计=>页面布局并选择您刚刚在下拉列表中添加的模板。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:44:39.177

[用于新 CMS 布局的 Magento 模块，但版本为 1.7.0.2](https://stackoverflow.com/questions/11802189/magento-module-for-new-cms-layout-but-in-version-1-7-0-2)

[http://www.magentocommerce.com/boards/viewthread/285425/#t400446](http://www.magentocommerce.com/boards/viewthread/285425/#t400446)

有很多关于这个..

在您的自定义模块 XML 配置中添加一些条目以添加您的新布局

```
<config>
    <modules>
        <My_Module>
            <version>0.0.0.1</version>
        </My_Module>
    </modules>
    <global>
    <page>
        <layouts>
            <my_layout module="page" translate="label">
                <label>My Layout</label>
                <template>page/mylayout.phtml</template>
                <layout_handle>my_layout</layout_handle>
            </my_layout>
        .... 
```

之后不要忘记刷新缓存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T17:56:36.310

查找：/App/etc/local.xml

就在`</global>`标签之前，放置额外的页面布局配置。

```
<page>
  <layouts>
    <lookbook module="page" translate="label">
      <label>LOOK BOOK</label>
        <template>page/1column-lookbook.phtml</template>
      <layout_handle>page_lookbook</layout_handle>
    </lookbook>
  </layouts>
</page> 
```

就是这样。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-15T06:41:28.170

所以更好的方法是创建一个新的布局。

[http://www.sundataplus.com/adding-a-new-page-layout-to-magento-1-x/](http://www.sundataplus.com/adding-a-new-page-layout-to-magento-1-x/)

可以编辑该文件： app/code/core/Mage/Page/etc/config.xml 在 .. 之间添加新行以及其他布局。

```
<page>
        <layouts>
.
.
        <home module="page" translate="label">
            <label>Home</label>
            <template>page/home.phtml</template>
            <layout_handle>page_home</layout_handle>
        </home>
.
.
        </layouts>
</page> 
```

创建新文件：template/page/home.phtml 以及 1column.phtml、2columns-left.phtml 等。您可以复制 home.phtml 中的列布局 phtml 之一的现有代码。根据需要修改 home.phtml 中的代码。

# jquery - 获取 JSON 数据的 jQuery Ajax 请求触发错误事件

> ID：15222855
> 
> 赞同：0
> 
> 时间：2013-03-05T11:39:09.080
> 
> 标签：jquery, ajax, json, request

我正在尝试向 Google API 发出 ajax 请求，以获取当前汇率的 JSON 数据。

到目前为止我的代码：

```
$.ajax({
    url: "http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR"
}).done( function ( data ) {
    var obj = $.parseJSON( data )
    alert( data.rhs );
}); 
```

google api 的链接是[http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR](http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR)

我的问题是我的代码没有触发该`done`功能。

我知道缺少一些东西，也许是一些参数？

* * *

**更新**

这是我在某处找到的新代码：

```
 function forex(val, from, to, callback) {
        $.ajax({
            url: 'http://www.google.com/ig/calculator?hl=en&q='+val+from+'%3D%3F'+to,
            type: 'GET',
            datatype: 'string',
            success: function(data) {
                var json = eval("(" + data+ ")"), output;
                if (typeof json == 'object' && json.rhs) {
                    output = json.rhs.match(/[0-9.\s]+/ig);
                    output = output[0] || false;
                } else {
                    output = data.match(/[0-9.\s]+/ig);
                    output = output[1] || false;
                }
                output = (output !== false) ? Number(output.replace(/\s/,'')) : output;
                callback(output);
            },
            error: function() {
                callback(false);
            }
        });
    }

    function output(data) {
        alert( data );
        $('#show_product_price_api').val(data);   
    } 
```

但是当我使用这个功能时：

```
forex(100, 'USD', 'EUR', output); 
```

要触发事件，我会收到“FALSE”回调

知道为什么调用此错误函数吗？

* * *

**更新 2**

我认为这是一个跨域问题，有人对使用 jsonp 有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:43:21.790

代码很好。看看[http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR](http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR)的回复。

它不是有效的 JSON 字符串。所以它不会进入完成状态。

响应是`{lhs: "1 US-Dollar",rhs: "0,767165324 Euro",error: "",icc: true} It should be {"lhs": "1 US-Dollar","rhs": "0,767165324 Euro","error": "","icc": true}`。

**编辑：**

```
$.ajax({
    url: "http://www.google.com/ig/calculator?hl=de&q=1USD=?EUR"
}).done( function ( data ) {
    data = data.replace(/([a-z0-9]+):/gi,"\"$1\":"));
    var obj = $.parseJSON( data )
    alert( data.rhs );
}); 
```

# sql-server - 如何将xml数据显示为表格格式

> ID：15222857
> 
> 赞同：1
> 
> 时间：2013-03-05T11:39:14.567
> 
> 标签：sql-server, xquery

这是我想以表格形式显示的 xml

```
DECLARE @xml XML 
SET @xml = '<root>
  <row>one</row>
  <row>two</row>
  <row>three</row>
</root>'

SELECT 
    x.y.value('(row/text())[1]', 'varchar(5)')
FROM @xml.nodes('root') x(y) 
```

它只显示第一行。我想显示数据

```
Mycolumn
-----------
one
two
three 
```

请指导我在我的 sql 中需要更改的内容。谢谢

我无法像下面这样使用 xquery 发出选择

```
DECLARE @xml XML 
SET @xml = '<root>
  <row>one</row>
  <row>two</row>
  <row>three</row>
</root>'

SELECT *
INTO #Fields
FROM (SELECT 
    x.y.value('text()[1]', 'varchar(5)') as fields11
FROM @xml.nodes('root/row') x(y))

SELECT * FROM #Fields
DROP TABLE #Fields 
```

但我可以像下面这样使用 xuqery 插入

```
DECLARE @xml XML 
SET @xml = '<root>
  <row>one</row>
  <row>two</row>
  <row>three</row>
</root>'

CREATE TABLE #Fields(Field varchar(MAX))

INSERT INTO #Fields
SELECT 
    x.y.value('text()[1]', 'varchar(5)') 
FROM @xml.nodes('root/row') x(y)

SELECT * FROM #Fields
DROP TABLE #Fields 
```

所以任何人都可以帮助我用 xquery 构建选择。谢谢

## 现在选择与 XQUERY 一起工作

```
DECLARE @xml XML 
SET @xml = '<root>
  <row>one</row>
  <row>two</row>
  <row>three</row>
</root>'

SELECT  x.y.value('text()[1]', 'varchar(5)') Mycolumn into #Fields
FROM    @xml.nodes('root/row') x(y)

select * from #Fields
drop table #Fields 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:41:34.317

这应该有效：

```
SELECT  x.y.value('text()[1]', 'varchar(5)') Mycolumn
FROM    @xml.nodes('root/row') x(y) 
```

生成行的方法中的路径`nodes`应该是`root/row`，这样将生成三行，并且对于行表达式中的每个值都`text()[1]`应该提取它的值。

# ruby-on-rails - 使用 rake 任务删除重复项

> ID：15222858
> 
> 赞同：0
> 
> 时间：2013-03-05T11:39:15.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake-task

有很多类似的问题，但找不到适合我的答案。

我有`EntryVote`带字段的模型`user_id`，`entry_id`还有一些其他的。

我想创建简单的 rake 任务来删除`user_id`,`entry_id`组的重复项（与组中留下的记录无关）。最好的方法是什么？

例如：

```
id, user_id, entry_id
1,1,1
2,1,1
3,1,1
4,5,6
5,5,6
6,7,7 
```

我得到：

```
1,1,1
4,5,6
6,7,7 
```

我知道如何选择 user_id、entry_id 进行重复数据删除，但不知道以后如何使用它：

`EntryVote.select('user_id, entry_id').group('user_id,entry_id').having('count() > 1')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:43:19.597

如果您希望列成为唯一`entry_id`的`user_id`外键，则以下包含特殊 SQL 删除语句的 rake 任务将有所帮助

```
 task 'delete_duplicates' => :environment do
    puts "Removing duplicates in table entry_votes"
    puts "Entries before: #{n1=EntryVote.count}"
    sql = "delete e1 from entry_votes e1, entry_votes e2 "+
          "where (e1.user_id = e2.user_id) and (e1.entry_id = e2.entry_id) "+
          "and (e1.id > 12.id);")
    ActiveRecord::Base.connection.execute(sql);
    puts "Entries after: #{n2=EntryVote.count}, #{n1-n2} duplicates removed"
  end 
```

另请参阅[有关重复项的 SO question](https://stackoverflow.com/questions/529098/removing-duplicate-rows-from-table-in-oracle)或本文[如何使用 SQL 删除重复项](http://www.cryer.co.uk/brian/sql/sql_delete_duplicates.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:36:09.710

可能不是最好的解决方案，但请尝试以下方法

```
EntryVote.count(:id, group: [:user_id, :entry_id]).each do |(user_id, entry_id), count|
  if count > 1
    EntryVote.offset(1).where(user_id: user_id, entry_id: entry_id).delete_all
  end
end 
```

或者您可以添加一个验证来检查 user_id 和 entry_id 的唯一性并尝试保存记录。如果记录未保存并且由于验证而失败，则只需删除该记录。我很确定这比第一个选项要慢:)

# regex - 使用正则表达式提取堆栈跟踪中的特定信息

> ID：15222861
> 
> 赞同：1
> 
> 时间：2013-03-05T11:39:27.663
> 
> 标签：regex

[我在http://regexone.com/example/6](http://regexone.com/example/6)遇到了问题？您可以通过单击链接查看问题。需要一个正则表达式来从 android 开发应用程序中的特定堆栈跟踪中提取方法名称、文件名和行号。

我使用以下正则表达式来解决问题：

```
at widget.List.([a-zA-Z]+).([A-Za-z]+\.java).(\d{3,4}). 
```

该表达式适用于该问题，但我认为它不是正确的正则表达式，因为其中不包含帽子（^）和美元（$）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:48:02.417

点和括号是正则表达式中的特殊字符，因此应该转义：

```
Pattern pattern = Pattern.compile ("at widget\\.List\\.(\\w+)\\((\\w+\\.java):(\\d+)\\)");
Matcher m = pattern.matcher ("...at widget.List.makeView(ListView.java:1727)...");
m.find ();
System.out.println ("Method name: " + m.group (1));
System.out.println ("File name: " + m.group (2));
System.out.println ("Line number: " + m.group (3)); 
```

对我来说输出是：

```
Method name: makeView
File name: ListView.java
Line number: 1727 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:21:47.380

这是可用于解决此示例的正则表达式：

```
^.*\s+at\s+.*\.(\w+)[(](\w+\.\w+)\:(\d+).*$ 
```

你不应该使用**widget.List。**在您的正则表达式中（正如您在上面的评论之一中所写），因为这将仅匹配 widget.List 包中的类。

# c++ - WlanApi：在不连接的情况下获取无线信号的 MacAddress

> ID：15222866
> 
> 赞同：0
> 
> 时间：2013-03-05T11:40:06.933
> 
> 标签：c++, mac-address, wlanapi

使用 WlanApi.lib，我可以使用 WlanGetAvailableNetworkList 函数[MSDN Link](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706765%28v=vs.85%29.aspx)获取可用信号详细信息列表。

为了获得每个可用信号的 Mac 地址、通道，我需要使用 WlanQueryInterface 函数。此功能仅适用于当前连接的网络。请参阅此[MSDN 链接](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms706749%28v=vs.85%29.aspx)。

是否有任何选项可以在不连接的情况下为每个可用的无线信号获取 MacAddress 和频道。

谁能帮我找到提取网络适配器支持的类型 a/b/g/n 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:45:30.363

使用[WlanGetNetworkBssList()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706735%28v=vs.85%29.aspx)。

您可以要求`MACID`特定网络或整个列表。感谢您提出这个问题，因为我不知道如何确定我连接到哪个网络。我需要尝试 WlanQueryInterface。

# jquery - 如何为 iphone 或 android 使用不同的样式表？我以后只能修改html

> ID：15222869
> 
> 赞同：1
> 
> 时间：2013-03-05T11:40:20.877
> 
> 标签：jquery, css, detection

我正在尝试制作一个页面，其中某些元素仅对 android 和 iphone 可见。我正在考虑使用简单的 css 属性来隐藏元素，例如：

HTML：

```
<style>img{ display:none;} </style>

<img src="img1.jpg" class="other">
<img src="img2.jpg" class="iphone android">
<img src="img3.jpg" class="iphone">
<img src="img4.jpg" class="android">
<img src="img5.jpg" class="iphone android other"> 
```

CSS 1（适用于不同于 iphone / android 的设备）

```
.other{ display:inline;} 
```

CSS 2（适用于 iPhone）

```
.iphone{ display:inline;} 
```

CSS 3（适用于机器人）

```
.android{ display:inline;} 
```

我现在需要的只是以某种方式检测设备（我相信它可以通过 jQuery 完成并实现正确的 CSS 样式表）。

所以效果会是：

img1：仅在 iphone 和 android 以外的设备上显示

img2：仅在 iphone 和 android 设备上显示

img3：仅在 iphone 上显示

img4：仅在安卓设备上显示

img5：仅在所有设备上显示

我在这里做了另一个主题[另一个问题](https://stackoverflow.com/questions/15221520/how-to-use-a-different-stylesheet-for-iphone-or-android)，但是有一个重要的棘手的事情。**应用完所有内容后，我以后只需要更改 HTML，以后我将无法触摸 jquery 和 css 文件，因此我将这样做，它们必须保持不变。我将只能手动为每个图像添加类**，所以我唯一能操作的就是从纯 html 中手动添加和删除类。我该怎么做？因此，如果我添加 class="iphone android"，那么图像将显示在这两个系统上。**我也可以通过iOX来做吗？那么它适用于 iphone、ipod、ipad 等设备吗？**. 感谢您的帮助和时间。

顺便提一句。我知道如何针对不同的分辨率执行此操作，但在这里我需要针对每个操作系统，所以如果我有一个将用户引导到 android 市场的按钮，我需要特定的按钮/图像仅在 Android 设备上显示...等谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:46:54.560

`CSS3` `Media Queries`您可以通过您的 css轻松实现您的期望。

对于如何使用 CSS3 媒体查询，请阅读下面提到的文章，它们真的很有帮助。

[**标准设备的媒体查询**](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

[**如何使用 CSS3 媒体查询来创建您网站的移动版本**](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T11:55:48.857

CSS 媒体查询不做浏览器识别，这是你想要的。如果您需要确定什么浏览器正在查看您的网站，您需要“嗅探”用户代理字符串（这并不完全可靠）。

为此，您可以使用 Javascript、php 或其他任何东西，但不仅仅是 html。

这是您可以尝试的链接：

[http://graphicmaniacs.com/note/detecting-iphone-ipod-ipad-android-and-blackberry-browser-with-javascript-and-php/](http://graphicmaniacs.com/note/detecting-iphone-ipod-ipad-android-and-blackberry-browser-with-javascript-and-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:52:16.567

如果您的样式表与 iOS/android 相同，您可以这样做。

```
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="css/mobile.css" type="text/css" /> 
```

但是，如果您要检测是 iOS 还是 Android，则需要进行检测。

在使移动开发更容易方面，有很多东西：

[http://www.phonegap.com/](http://www.phonegap.com/)

[http://www.sencha.com/products/touch/](http://www.sencha.com/products/touch/)

[http://www.appcelerator.com/](http://www.appcelerator.com/)

[http://www.jquerymobile.com/](http://www.jquerymobile.com/)

[http://www.jqtouch.com/](http://www.jqtouch.com/)

有一些可以帮助您入门:)

希望这可以帮助。

# android - 如何将整理活动缩小为矩形

> ID：15222872
> 
> 赞同：22
> 
> 时间：2013-03-05T11:40:23.120
> 
> 标签：android, android-activity, android-animation

在我的 Android 应用程序中，我有一个浮动的`Activity`. 它从我的应用程序外部开始，[`ActivityOptions.makeScaleUpAnimation`](http://developer.android.com/reference/android/app/ActivityOptions.html#makeScaleUpAnimation(android.view.View,%20int,%20int,%20int,%20int))用于从“原始”矩形放大。当我`Activity`完成时，我希望它与那个动画相反：即它在淡出时收缩回那个矩形。

我知道我可以用 得到矩形`getIntent().getSourceBounds()`，我希望能够[`overridePendingTransition()`](http://developer.android.com/reference/android/app/Activity.html#overridePendingTransition%28int,%20int%29)在完成时使用来实现这个效果，但`overridePendingTransition()`只能接受一个固定的 XML 资源：似乎没有办法让那个动画依赖于源界限。还有什么我可以用来达到这个效果的吗？

我的应用程序适用于 API 11+，但由于它只是一种装饰效果，我会对依赖于更高版本的解决方案感到满意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-06T20:40:15.093

我认为除了 overridePendingTransition 调用之外，还有一种方法可以缩小活动窗口。但是，此代码可能会有所帮助：

## 放大

ActivityOptions opts = ActivityOptions.makeCustomAnimation(getActivity(), R.anim.scale_up, 0); startActivity(new Intent(this, SecondActivity.class),opts.toBundle());

这是 scale_up 动画文件：

```
<set  xmlns:android="http://schemas.android.com/apk/res/android">
    <scale
    android:fromXScale="0"
    android:toXScale="1.0"
    android:fromYScale="0"
    android:toYScale="1.0"
    android:pivotX="50%p"
    android:pivotY="50%p"
    android:duration="500"/>
</set> 
```

## 缩小

从现有活动中调用此代码：

```
finish();

overridePendingTransition(0, R.anim.scale_down); 
```

这是 scale_down 动画文件：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
   <scale
    android:fromXScale="1.0"
    android:toXScale="0"
    android:fromYScale="1.0"
    android:toYScale="0"
    android:pivotX="50%p"
    android:pivotY="50%p"
    android:duration="250"/>
</set> 
```

您可以改变 X 和 Y 比例以获得所需的矩形。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T05:13:52.623

根据我的最后评论，这是我尝试过的解决方案并且它有效。您可能需要进行修改以满足您的要求。

实现一个具有透明背景且清单中没有标题的 Activity：

```
 <activity
        android:name="com.example.backgroundsensor.AnimatedActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"
        android:label="Animated activity" /> 
```

并让它使用布局将内容视图设置为：

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/container"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@android:color/transparent"
   tools:ignore="MergeRootFrame" >

    <View
         android:id="@+id/visibleAreaView"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_gravity="center"
        android:background="@android:color/holo_green_dark" />

 </FrameLayout> 
```

visibleAreaView 是您将在屏幕上看到的，因为活动是透明的。您可以在 activity() 的 OnCreate 中设置视图的边界。

```
 @Override
  protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.animated_activity);

      // set the bounds of the animateView
  } 
```

此外，覆盖完成方法是这样的：

```
boolean animateFirst=true;
@Override
public void finish() {
     if(animateFirst)
     {
         animateFirst = false;
         loadAnim();

     }else
     {
         super.finish();
     }
}

 public void loadAnim() {

    View v = findViewById(R.id.animateView);
    float x= v.getX() + v.getRight()/2;
    float y = v.getY();
    anim = new ScaleAnimation(1.0f, 0.0f,1.0f, 0.0f, x, y);
    anim.setDuration(300);
    anim.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            findViewById(R.id.animateView).setVisibility(View.GONE);
            AnimatedActivity.this.finish();
        }
    });
    v.startAnimation(anim);

} 
```

# asp.net - 无法在图像控件中显示图像

> ID：15222874
> 
> 赞同：0
> 
> 时间：2013-03-05T11:40:25.647
> 
> 标签：asp.net

它是我的处理程序（.ashx）

```
 Dim EmployeeID As Integer
If (Not (context.Request.QueryString("EmployeeID")) Is Nothing) Then EmployeeID = Convert.ToInt32(context.Request.QueryString("EmployeeID")) 
Else Throw New ArgumentException("No parameter specified") End If 
Dim imageData() As Byte = {}
' get the image data from the database using the employeeId Querystring context.Response.ContentType = "image/jpeg" 
  context.Response.BinaryWrite(imageData) 
```

一切正常。只有`imageData`长度为 0，所以图像无法显示。

@Sean：它的elsewhr ..这里的查询字符串正确地采用了通过的员工ID...

继承人的数据库访问代码：

```
 Public Sub bind()

    Dim ds1 As New DataSet()
    Dim con As New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("ConnectionString").ToString)
    con.Open()
    Dim query As String = "select * from EmployeeTable"
    Dim cmd As New SqlCommand()
    Dim da1 As New SqlDataAdapter(query, con)
    da1.Fill(ds1, "EmployeeTable")
    GridView1.DataSource = ds1.Tables("EmployeeTable")
    GridView1.DataBind()
    con.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:38:09.723

您正在将大量数据加载到变量中，`GridView`但没有任何内容加载到`imageData`变量中。因此，我们将连接到数据库并将数据提取出来。我假设您的图像列被调用`imageData`，但请酌情更改。

```
Dim EmployeeID As Integer

If (Not (context.Request.QueryString("EmployeeID")) Is Nothing) Then

    EmployeeID = Convert.ToInt32(context.Request.QueryString("EmployeeID")) 

Else

    Throw New ArgumentException("No parameter specified")

End If 

Dim imageData() As Byte = {}

' get the image data from the database using the employeeId Querystring

Using con As New SqlConnection(ConfigurationManager.AppSettings("ConnectionString"))

    Using cmd As New SqlCommand("SELECT imageData FROM EmployeeTable WHERE EmployeeID = @EmployeeID", con) 'select imageData column, change column name as appropriate

        cmd.Parameters.AddWithValue("@EmployeeID", EmployeeID)

        Try

            con.Open()

            Using rdr As SqlDataReader = cmd.ExecuteReader()

                If rdr.Read() Then

                    imageData = CType(rdr("imageData"), Byte()) 'convert imageData column from result set to byte array and assign to variable

                End If

            End Using

        Catch ex As Exception

            'do any error handling here

        End Try

    End Using

End Using

context.Response.ContentType = "image/jpeg"
context.Response.BinaryWrite(imageData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:48:45.227

将处理程序中的代码更改为：

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    Dim EmployeeID As Integer

    If (Not (context.Request.QueryString("EmployeeID")) Is Nothing) Then

        EmployeeID = Convert.ToInt32(context.Request.QueryString("EmployeeID"))

    Else

        Throw New ArgumentException("No parameter specified")

    End If

    Dim Image() As Byte = {}

    ' get the image data from the database using the employeeId Querystring

    Dim con As New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("ConnectionString").ToString)

    Dim cmd As New SqlCommand("SELECT Image FROM EmployeeTable WHERE EmployeeID = @EmployeeID", con)
    'select imageData column, change column name as appropriate

    cmd.Parameters.AddWithValue("@EmployeeID", EmployeeID)

    Try

        con.Open()

        Dim rdr As SqlDataReader = cmd.ExecuteReader()

        While rdr.Read()

            Image = CType(rdr("Image"), Byte())
            'convert imageData column from result set to byte array and assign to variable
        End While

    Catch ex As Exception

        'do any error handling here

    End Try

    context.Response.ContentType = "image/jpeg"
    context.Response.BinaryWrite(Image)

End Sub 
```

为我工作，也许它也对你有用......

# ads - 使用双击视频进行印象跟踪？

> ID：15222875
> 
> 赞同：0
> 
> 时间：2013-03-05T11:40:25.793
> 
> 标签：ads, double-click

我需要动态生成我的点击/展示 URL。有没有办法将展示跟踪添加到双击视频标签？我了解点击，“click=”后跟 URL 就可以了，是否有等效的印象跟踪？

```
here is an example of an ad tag:
http://ad.doubleclick.net/adj/N6103.762836.GOINGOFFSCRIPT.COM/B5926988;sz=300x250click=%dfaurl%; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T14:27:46.817

向 DoubleClick 代码发出的每个请求都应内置展示跟踪。您应该能够登录到 DoubleClick 以查看该代码上记录的展示次数。

如果您无法登录 DoubleClick（广告商是否向您发送了此代码？），那么您将需要自己的广告服务器软件来管理您收到的代码，并且该软件将报告这些广告的展示次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T21:50:57.367

如果是网站投放，您需要创建一个 1x1 展示代码和一个 1x1 点击代码并让发布商实施。您还可以使用“跟踪广告”；这将同时跟踪两者，但只会向您收取更高的费用（展示次数或点击次数），而不是同时向您收取费用。

# android - 如何在严格模式下知道违规

> ID：15222876
> 
> 赞同：2
> 
> 时间：2013-03-05T11:40:26.680
> 
> 标签：android, android-strictmode

我正在向 Web 服务发送登录请求，并且我已启用严格模式并出现以下错误

```
03-05 16:54:36.490: E/AndroidRuntime(1106): FATAL EXCEPTION: main
03-05 16:54:36.490: E/AndroidRuntime(1106):    android.os.StrictMode$StrictModeViolation:      policy=95 violation=2
03-05 16:54:36.490: E/AndroidRuntime(1106):     at    android.os.StrictMode.executeDeathPenalty(StrictMode.java:1311)
03-05 16:54:36.490: E/AndroidRuntime(1106):     at android.os.StrictMode.access$1300(StrictMode.java:112)
03-05 16:54:36.490: E/AndroidRuntime(1106):     at android.os.StrictMode$AndroidBlockGuardPolicy.handleViolation(StrictMode.java:1304)
03-05 16:54:36.490: E/AndroidRuntime(1106):     at android.os.StrictMode$AndroidBlockGuardPolicy$1.run(StrictMode.java:1191)
03-05 16:54:36.490: E/AndroidRuntime(1106):     at andro 
```

如何获得此处违反的内容。

```
public class LoginActivity extends Activity implements ILoginDelegate {

// Values for email and password at the time of the login attempt.
private String mEmail;
private String mPassword;

@Override
protected void onCreate(Bundle savedInstanceState) {

            StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
            .detectAll().penaltyLog().penaltyDeath().build());

     //             StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll()
   //                       .penaltyLog().penaltyDeath().build());

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login);

    findViewById(R.id.sign_in_button).setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    attemptLogin();
                }

            });
}

public void attemptLogin() {

        // Send login requesmEmail
        try {
            LoginManager manager = new LoginManager(this);
            manager.sendLoginRequest(mEmail, mPassword);
        } catch(Exception e) {
              e.printStackTrace();

        }       

    } 
```

这是更新的代码。请建议我在哪里做错了

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T12:25:29.823

使磁盘和网络操作远离主线程可以使应用程序更加流畅、响应速度更快。

src : [Android 开发者链接](http://developer.android.com/reference/android/os/StrictMode.html)

网络操作不应该在 UI 线程上进行。建议使用 AsyncTask /Run a thread。这将解决您的问题

# json - 将 json 格式数据加载到 google bigquery 性能问题

> ID：15222878
> 
> 赞同：1
> 
> 时间：2013-03-05T11:40:32.613
> 
> 标签：json, google-bigquery

我已将`JSON`格式数据结构加载到 Google bigquery“嵌套”表中（我有 2 级嵌套“重复”记录），行的平均长度`JSON`为 5000 个字符。加载时间比将平面文件（总大小相同）加载到 Google bigquery 中要慢得多。

1.  `json`加载到嵌套记录时的“经验法则”是什么？

2.  我怎样才能提高我的表现？

3.  在性能查询方面，从嵌套表中检索日期是否也比平面表慢得多？

请帮助，我发现很难在该领域找到有经验的“DBA”

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:16:40.640

1.  我不知道 json 导入应该更慢的任何原因，但我们还没有对它们进行基准测试。

2.  如果性能很慢，最好将导入分成块并将多个源文件传递到加载作业中。

3.  从嵌套表中检索数据不应该更慢（并且可能更快）。列式存储格式应该比相应的平面表更有效地存储您的嵌套数据。

# symfony - symfony2 DI 捆绑服务不可用

> ID：15222883
> 
> 赞同：0
> 
> 时间：2013-03-05T11:41:00.617
> 
> 标签：symfony, dependency-injection

我在 Resources/config/services.yml 中定义了一个服务：

```
services:
    gSm.gate.terminal:
        class: Stream\TerminalBundle\StreamTerminal
        arguments: [ [], [%terminal_login%, %terminal_password%] ] 
```

我尝试在我的控制器操作中访问：

```
public function displayAction() {
    $terminal = $this->get('gSm.gate.terminal');
    return $this->render('StreamTerminalBundle::display.html.twig');
} 
```

服务器返回以下异常：`500 You have requested a non-existent service "gsm.gate.terminal"`。该捆绑包已在 appKernel 中注册，该捆绑包使用 .yml 配置文件...我不知道还有什么可以使该服务可用...感谢您的帮助。

编辑：

我的扩展类代码是：

```
namespace Stream\TerminalBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class StreamTerminalExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:44:04.617

确保您正在[导入捆绑包的`services.yml`](http://symfony.com/doc/master/book/service_container.html#importing-other-container-configuration-resources). 最简单的方法是[从](http://symfony.com/doc/master/book/service_container.html#importing-configuration-with-imports)`config.yml`. 一个更好更高级的解决方案是[编写一个扩展](http://symfony.com/doc/master/book/service_container.html#importing-configuration-via-container-extensions)。

要查看扩展类的示例，请参阅我[的捆绑包中的](https://github.com/elnur/ElnurBlowfishPasswordEncoderBundle/blob/master/DependencyInjection/ElnurBlowfishPasswordEncoderExtension.php#L34-L35). 如果您想使用 YAML，只需将和更改`services.xml`为.`services.yml``XmlFileLoader``YamlFileLoader`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:44:07.137

扩展类是否正在解析您的 services.yml 文件？
默认情况下，在新包中，它设置为加载 xml 文件。你能粘贴你的

```
Acme\Bundle\YourBundle\DependencyInjection\AcmeYourExtension 
```

班级？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T23:35:31.453

我不确定您是否可以在服务名称中使用大写字母。当您的服务是“gSm.gate.terminal”时，异常会给出这样的提示“gsm.gate.terminal”。

# mysql - 我应该为 My SQL 中的列提供什么类型，其中我有图像的 URL 列表

> ID：15222885
> 
> 赞同：0
> 
> 时间：2013-03-05T11:41:09.937
> 
> 标签：mysql

这是我对 DB 的第一次体验，因此我有点迷茫，因为我不太了解它，所以请放轻松。

我正在 MySQL 中创建一个表，其中一列将包含图像的完整路径 URL（每行一个），如下所示`http://cdn.example.com/images/image1.png` 我的问题是，我应该给这个列什么类型，什么 MIME 类型，什么浏览器转换和最后的转换选项？

所以我想要实现的是，当请求图像时，它应该创建以下

`<img src="http://cdn.example.com/images/image1.png" width="150" Height="200" alt="Image Title">`

我还计划为图像宽度、图像高度和 alt 创建另一列。

你能帮我么

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:55:10.773

取决于您将持有的 URL 的长度，但我会使用`varchar(255)`列类型。

我从来不用担心 MIME 类型。99.999% 的时间你会忽略它们并让它们为空。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:59:54.137

如果您只存储 url 而不是完整标签 varchar 255 就足够了。如果你去掉多余的 http:// ，你可以节省 7 个字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:09:00.083

您也可以使用 TEXT 代替 varchar 而不必担心 varchar 的长度限制

*   请记住在您的应用程序级别而不是在数据库级别强制执行长度限制。例如，不允许超过 500 个字符的 URL

*   VARCHAR 访问比 TEXT 更快...因此根据性能要求，您可能需要在此处进行权衡

# android - Android 应用程序给出错误“BatteryStatsImpl：读取网络统计信息”

> ID：15222889
> 
> 赞同：2
> 
> 时间：2013-03-05T11:41:20.080
> 
> 标签：android

现在我正在从 URL 下载图像并在列表视图中显示它们。为此，我在 github 上引用了 Lazy List 库。

我的应用程序运行良好。但一段时间后，我在 logcat 中收到以下错误：

```
03-05 12:18:42.955: A/NetworkStats(12320): problem reading network stats
03-05 12:18:42.955: A/NetworkStats(12320): java.lang.IllegalStateException: problem parsing idx 1
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:300)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.server.NetworkManagementService.getNetworkStatsUidDetail(NetworkManagementService.java:1282)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.server.net.NetworkStatsService.performPollLocked(NetworkStatsService.java:831)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.server.net.NetworkStatsService.performPoll(NetworkStatsService.java:799)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.server.net.NetworkStatsService.access$100(NetworkStatsService.java:128)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.server.net.NetworkStatsService$3.onReceive(NetworkStatsService.java:633)
03-05 12:18:42.955: A/NetworkStats(12320):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
03-05 12:18:42.955: A/NetworkStats(12320):  at android.os.Handler.handleCallback(Handler.java:605)
03-05 12:18:42.955: A/NetworkStats(12320):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 12:18:42.955: A/NetworkStats(12320):  at android.os.Looper.loop(Looper.java:137)
03-05 12:18:42.955: A/NetworkStats(12320):  at android.os.HandlerThread.run(HandlerThread.java:60)
03-05 12:18:42.955: A/NetworkStats(12320): Caused by: java.io.FileNotFoundException: /proc/net/xt_qtaguid/stats: open failed: ENOENT (No such file or directory)
03-05 12:18:42.955: A/NetworkStats(12320):  at libcore.io.IoBridge.open(IoBridge.java:406)
03-05 12:18:42.955: A/NetworkStats(12320):  at java.io.FileInputStream.<init>(FileInputStream.java:78)
03-05 12:18:42.955: A/NetworkStats(12320):  at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:269)
03-05 12:18:42.955: A/NetworkStats(12320):  ... 10 more
03-05 12:18:42.955: A/NetworkStats(12320): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
03-05 12:18:42.955: A/NetworkStats(12320):  at libcore.io.Posix.open(Native Method)
03-05 12:18:42.955: A/NetworkStats(12320):  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
03-05 12:18:42.955: A/NetworkStats(12320):  at libcore.io.IoBridge.open(IoBridge.java:390)
03-05 12:18:42.955: A/NetworkStats(12320):  ... 12 more 
```

此错误每 2-3 分钟出现一次。我的应用程序运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:31:15.223

这不是您的应用程序的问题。我猜您是在添加了网络统计支持的模拟器上测试您的应用程序（API > 12）。但是模拟器依赖于旧的内核版本（2.6.x），它没有提供网络统计信息的模块。因此，Android 网络统计服务无法打开`/proc/net/xt_qtaguid/stats`收集内核模块收集的统计信息的文件。因此，您会得到这些奇怪的错误。

另外，您可以阅读[此](https://stackoverflow.com/questions/8241068/weird-exceptions-under-android-4-0-with-eclipse)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-31T07:37:55.663

我面临着同样的问题。我刚刚将我的模拟器更改为 API 28 并且错误不存在。

# .net - HttpClient - .net 4 或 .net 4.5

> ID：15222892
> 
> 赞同：3
> 
> 时间：2013-03-05T11:41:28.047
> 
> 标签：.net, httpclient, consistency

我在[Nuget HttpClient 页面上](http://nuget.org/packages/Microsoft.Net.Http)，那里的信息看似矛盾。第一段是：

> 此包为 .NET Framework 4、Silverlight 4 和 5、Windows Phone 7.5 和 8 上的现代 HTTP 应用程序提供编程接口。此包包括用于通过 HTTP 发送请求的 HttpClient，以及用于处理 HTTP 消息的 HttpRequestMessage 和 HttpResponseMessage。

但是，第三段说，

> Visual Studio 2010 不支持此包，只有在使用使用此包的库时，面向 .NET Framework 4.5 或 .NET for Windows Store 应用程序的项目才需要此包。有关已知问题，请参阅： http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkID=279987) ?LinkID=279987 。

那么，它是针对“[.Net 4] 上但针对 [.Net 4.5] 的现代应用程序？

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:45:09.657

它适用于面向 .NET 4 的应用程序，因为 .NET 4.5[内置了这些功能](http://blogs.msdn.com/b/henrikn/archive/2012/08/15/asp-net-web-api-released-and-a-preview-of-what-s-next.aspx)，因此面向 4.5 的应用程序可以只使用 .NET 附带的版本。

如果面向 .NET 4.5，则仅*在使用使用此包的库时才需要该包*（很明显：如果您的依赖项之一依赖于 HttpClient，那么您也依赖于 HttpClient）。

# jquery - jQuery跨域json，无回调

> ID：15222893
> 
> 赞同：1
> 
> 时间：2013-03-05T11:41:29.167
> 
> 标签：jquery, json, cross-domain

尝试访问外部 API。

使用 jQuery 1.9.1。

```
 $.ajax({
        cache: true, // remove the _ query parameter from the url
        dataType: 'script', // used to be 'jsonp', however changed to 'script' in order to remove the _ query parameter being added to the url
        jsonp: false, // remove the callback query parameter, this causes the url to fail
        type: 'GET',
        url: 'http://api.external-domain.com/format/json/',

        success: function(data){
            alert('success');

            $.each(data.parent, function(i, item){  
                var vname = item.Name;
                $('<li />').html(vname).appendTo('#list');
            });

        },

        error: function(){
            alert('failure');
        }

    }); 
```

显示成功警报，项目名称未写入列表，但浏览器开发人员工具状态

Firefox：语法错误：标签无效

Chrome：未捕获的 SyntraxError：意外的令牌

错误消息将 json 文件标识为原因，但是如果我复制相同的 json 文件并将其放在本地服务器上（同时将 dataType 修改为 json），它就可以工作。

请帮忙。

# c# - 多播委托和事件

> ID：15222895
> 
> 赞同：7
> 
> 时间：2013-03-05T11:41:39.733
> 
> 标签：c#, oop, events, delegates

我正在研究代表。几天前，我为多播代表做了一个示例，并在这里复习了[我以前的问题](https://stackoverflow.com/questions/15023736/multicast-delegate-c-sharp)，并清楚地了解了多播代表。

但现在我试图用一个事件来做一个多播委托示例。但是我在做样品时遇到了一些疑问。在上面的链接中，我在一个类中完成了所有函数和委托声明，并使用 += 将函数添加到委托中，然后调用委托。所以委托中的所有函数都被调用了。

但现在我在两个不同的课程中做这件事，并试图在一个事件的帮助下完成所有功能。我在下面提供我当前的代码。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        ArithmeticOperations aOperations = new ArithmeticOperations();
        aOperations.StartCalculations += new ArithmeticOperations.BasicCalculations(aOperations_StartCalculations);
        aOperations.PerformCalculations(20, 10);
    }

    void aOperations_StartCalculations(string msg)
    {
        MessageBox.Show(msg);
    }
}

class ArithmeticOperations
{
    public delegate void BasicCalculations(string msg);

    public event BasicCalculations StartCalculations;

    public void PerformCalculations(int n1, int n2)
    {
        StartCalculations("Operation Success");
    }

    void Add(int num1, int num2)
    {
        MessageBox.Show("Performing addition.");
    }

    void Sub(int num1, int num2)
    {
        MessageBox.Show("Performing substraction.");
    }

    void Mul(int num1, int num2)
    {
        MessageBox.Show("Performing multiplication.");
    }

    void Div(int num1, int num2)
    {
        MessageBox.Show("Performing division.");
    }

} 
```

在 Form1 中是我的主类，而 ArithmeticOperations 类用于执行功能。何时发表此声明

```
aOperations.PerformCalculations(20, 10); 
```

在 Form1 中，将执行 ArithmeticOperations 类中的 PerformCalculation() 函数。

但我的疑问是我如何将所有 Add、Sub、Mul 和 Div 函数注册到 ArithmeticOperations 类中的委托，以通过调用委托对象并将“操作成功”返回给 Form1 类中的事件回调函数来调用所有函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T12:01:00.497

由于`BasicCalculations`接受一个类型的参数`string`，它不能用于直接调用您的方法`Add`等`Subtract`。

如果您想`PerformCalculations`通过多播调用您的每个方法，您将需要一个类型等同于 的委托`Action<int, int>`，例如：

```
class ArithmeticOperations
{
    public delegate void BasicCalculations(string msg);

    public event BasicCalculations StartCalculations;

    private Action<int, int> calculations;

    public ArithmeticOperations()
    {
        this.calculations += this.Add;
        this.calculations += this.Sub;
    }

    public void PerformCalculations(int n1, int n2)
    {
        this.calculations.Invoke(n1, n2);
        StartCalculations("Operation Success");
    }

    // ...
} 
```

如果您希望您的个人算术方法使用字符串调用您的`StartCalculations`事件，您可以让他们这样做：

```
void Add(int num1, int num2)
{
    StartCalculations("Performing addition.");
} 
```

引发事件时，您应该首先测试是否有订阅者（以避免 a `NullReferenceException`）。[标准模式](http://blogs.msdn.com/b/ericlippert/archive/2009/04/29/events-and-races.aspx)是订阅任何处理程序，测试然后`null`调用处理程序。`NullReferenceException`如果有人在测试事件后取消订阅，这将避免点击`null`：

```
void Add(int num1, int num2)
{
    var handler = this.StartCalculations;
    if (handler != null)
    {
        handler("Performing addition.");
    }
} 
```

由于每种方法都会有很多代码重复，因此您可以将其重构为单独的方法：

```
void Add(int num1, int num2)
{
    this.OnStartCalculation("Performing addition.");
}

void OnStartCalculation(string message)
{
    var handler = this.StartCalculations;
    if (handler != null)
    {
        handler(message);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T12:06:29.187

其中一个选项是创建一个私人活动

```
 public delegate void BasicCalculations(string msg);

public delegate void DoMath(int na, int nb);
class ArithmeticOperations
{
    public ArithmeticOperations()
    {
        StartMath += new DoMath(ArithmeticOperations_StartMath);

    }

    void ArithmeticOperations_StartMath(int na, int nb)
    {
        Add(na, nb);
        Sub(na, nb);
        Mul(na, nb);
        Div(na,nb);
    }

    public event BasicCalculations StartCalculations;
    private event DoMath StartMath;

    public void PerformCalculations(int n1, int n2)
    {
        StartMath(n1, n2);
        StartCalculations("Operation Success");
    }

    void Add(int num1, int num2)
    {
        Console.WriteLine("Performing addition.");
    }

    void Sub(int num1, int num2)
    {
         Console.WriteLine("Performing substraction.");
    }

    void Mul(int num1, int num2)
    {
         Console.WriteLine("Performing multiplication.");
    }

    void Div(int num1, int num2)
    {
         Console.WriteLine("Performing division.");
    }

} 
```

# jquery - 滑块句柄超出内容

> ID：15222899
> 
> 赞同：0
> 
> 时间：2013-03-05T11:41:53.817
> 
> 标签：jquery, jquery-ui, slider

我像这样动态创建我的 JQuery 滑块：

```
var slider = document.createElement("div");
        $(slider).slider({
            orientation: "vertical",
            range: "min",
        }); 
```

并为他分配一个类：`$(slider).slider().addClass("dhSliderDesktop");` 我还覆盖了滑块手柄的一些设置，但无法使其适应它的轨道。我在做什么？你能帮忙吗...

CSS：

```
.dhSliderDesktop {
    position: absolute !important;
    right:9px !important;
    visibility:hidden;
    height: 100% !important;

    width:10px !important;
    color:green !important;
    background-color:red !important;
    background: blue !important;} 

.ui-slider .ui-slider-handle {

    width:40px !important;
    height:30px !important;

    left: -10.5px !important;
    border-style:none !important; 
    background-color: yellow !important;} 
```

正如您在下图中看到的那样，滑块句柄正在脱离我不想要的内容窗口。如何解决这个问题？

![在此处输入图像描述](../Images/c24cb47f85c4331515d793193a25d964.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:08:21.350

这是一个解决方案，它使用滑块小部件周围的包装器 div 作为帮助器来显示完整的蓝色滑块。实际的滑块在包装器内居中，我使用百分比值试图使功能独立于外部包装器大小（但这仍然需要一些 css 微调）：

```
.slider-wrapper {
    height: 100%;
    width: 10px;
    margin: 0;
    right: 10px;
    background: blue;
    border-radius: 3px;
    position:absolute;
}
.slider-wrapper-range-min {
    height: 10%;
    width: 100%;
    margin: 0;
    right: 0;
    bottom: 0;
    background: red;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
    position:absolute;
}
.dhSliderDesktop {
    height: 80% !important;
    width: 100% !important;
    right: 0 !important;
    top: 10%;
    bottom: auto;
    border: none;
    background: blue !important;
    position: absolute;
} 

.ui-slider .ui-slider-handle {

    width:30px !important;
    height:24.5% !important;
    margin-bottom:-200%;
    margin-top: auto;

    left: -12px !important;
    background-color: yellow !important;
} 
```

使用以下 jQuery 代码激活：

```
var $sliderWrapper = $('<div class="slider-wrapper"><div class="dhSliderDesktop"></div></div>');

$sliderWrapper
    .appendTo($(".wrapper"))
    .find(".dhSliderDesktop")
        .slider({
            orientation: "vertical",
            range: "min",
            change: function(event,ui) {
                console.log(ui.value);
            }
        })
        .end()
    .append( $('<div class="slider-wrapper-range-min"></div>') )
; 
```

**编辑：这是**[**jsfiddle**](http://jsfiddle.net/martyk/2kaqf/5/)的更新链接[](http://jsfiddle.net/martyk/2kaqf/5/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:02:31.313

您需要做的就是玩：

```
 ui-slider .ui-slider-handle {  
    width: 40px !important;  
    height: 30px !important;  
    left: -10.5px !important;  
    .. 
```

如果您更改这些值，您将更改滑块的尺寸和位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T18:10:18.587

一个更简单的解决方案是拦截滑块更改事件并根据需要调整处理程序的位置示例代码：

```
 $("#Slider1").slider({
          change: function (event, ui) {
            var TempID = $(this).attr('id');
            var LeftVal = $("#" + TempID).find("a").css("left"); 
            if (LeftVal == "500px") $("#" + TempID).find("a").css("left", "485px");
        }
    }); 
```

上面的代码假设您的滑块宽度为 500 像素，处理程序图像为 30 像素。我们从 hanlder left css 样式中减去了 15px。**

# mysql - 奇怪的 MySQL CURDATE() 行为（可能受 CAST 影响？）

> ID：15222907
> 
> 赞同：0
> 
> 时间：2013-03-05T11:42:25.940
> 
> 标签：mysql, datetime

我想知道过去 5 / 10 / 15 天每天创建的用户数量，按日期分组。

这是我过去 5 天用于按日期注册的查询：

```
SELECT CAST(created AS DATE) as DateField , count(email) as Num 
FROM invited_users where created > curdate()-5 
GROUP BY CAST(created AS DATE);

// "created" is a datetime field
// returns 5 rows 
```

这就像我预期的那样工作。

但是，当我将数字“5”更改为“10”或 15（或 5 以外的任何数字，在我看来）时，它不起作用！相反，它返回数据库中的所有日期！

```
SELECT CAST(created AS DATE) as DateField , count(email) as Num 
FROM invited_users where created > curdate()-15 
GROUP BY CAST(created AS DATE);

// returns 97 rows 
```

为什么？！这里发生了什么？

顺便说一句，任何其他表也会发生同样的情况。

编辑：

```
select curdate(), curdate() -5, curdate() - 15, curdate() + 1, curdate() + 0; 
```

给出以下结果：3/5/2013 12:00:00 AM 20130300 20130290 20130306 20130305

我不明白这是如何计算的。虽然 CURDATE()+1 给出了明天的日期，但 CURDATE() - 5 给出了一个我无法解码的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:34:09.417

尝试使用这样的东西：

```
CURDATE() - INTERVAL 5 DAY 
```

# java - ASM ByteCode - 异常的堆栈跟踪

> ID：15222911
> 
> 赞同：2
> 
> 时间：2013-03-05T11:42:38.263
> 
> 标签：java, assembly, java-bytecode-asm

我正在使用 java Instrumentation 和 ASM ByteCode Library 来开发 Javaagent。如何获取方法抛出的运行时异常？

附上代码。这里正在获取该方法是正常终止还是抛出异常。但无法检索异常。如何检索异常？

```
 package com.abc.agent.servlet;

 import org.objectweb.asm.Label;
 import org.objectweb.asm.MethodVisitor;
 import org.objectweb.asm.Opcodes;
 import org.objectweb.asm.Type;

 import com.abc.agent.matcher.HttpServletMethodMatcher;

public class AbcServletMethodVisitorAdapter extends MethodVisitor {
    private String methodName;
    private String className;
    private String description;
    private boolean doMethodMatch;
    private int opcode = -1;

public AbcServletMethodVisitorAdapter(MethodVisitor mv , String  methodName , String description , String className) {
    super(Opcodes.ASM4, mv);
    this.methodName = methodName;
    this.className = className;
    this.description = description;
    this.doMethodMatch = false;
}

public void visitCode() {
    super.visitCode();
    if(methodName.equals("<clinit>") || methodName.equals("<init>"))
        return;
    HttpServletMethodMatcher httpServletMethodMatcher = new HttpServletMethodMatcher(className , methodName , description);
    this.doMethodMatch =  httpServletMethodMatcher.isHttpServletMatch();
    if(this.doMethodMatch){
        mv.visitVarInsn(Opcodes.ALOAD, 0);
        mv.visitVarInsn(Opcodes.ALOAD, 1);
        mv.visitLdcInsn(this.className);
        mv.visitLdcInsn(this.methodName);
        mv.visitLdcInsn(this.description);
        mv.visitMethodInsn(Opcodes.INVOKESTATIC, "com/abc/agent/trace/RootTracer", "httpServletDoMethodBegin", "(Ljava/lang/Object;Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V");
        mv.visitCode();
    }
    else // Other Methods defined in the HttpServlet...
    {
        mv.visitLdcInsn(this.className);
        mv.visitLdcInsn(this.methodName);
        mv.visitLdcInsn(this.description);
        mv.visitMethodInsn(Opcodes.INVOKESTATIC, "com/abc/agent/trace/RootTracer", "httpServletOtherMethodBegin", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V");
        mv.visitCode();
    }
}

public void visitMaxs(int maxStack, int maxLocals) {
    super.visitMaxs(maxStack + 4, maxLocals);
    }

public void visitInsn(int opcode) {
    if(methodName.equals("<clinit>") || methodName.equals("<init>")){
        // Do nothing....
    }
    else{
        if ((opcode >= Opcodes.IRETURN && opcode <= Opcodes.RETURN) || opcode == Opcodes.ATHROW) {
            this.opcode = opcode;
            mv.visitLdcInsn(this.className);
            mv.visitLdcInsn(this.methodName);
            mv.visitLdcInsn(this.description);
            mv.visitLdcInsn(this.opcode);
            if(this.doMethodMatch) {
                mv.visitMethodInsn(Opcodes.INVOKESTATIC, "com/abc/agent/trace/RootTracer", "httpServletDoMethodEnd", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V");
            }
            else{
                mv.visitMethodInsn(Opcodes.INVOKESTATIC, "com/abc/agent/trace/RootTracer", "httpServletOtherMethodEnd", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V");
            }
        }
    }
    mv.visitInsn(opcode);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:57:11.560

这是一个简单的例子。首先，我们为需要引用的代码中的各个点创建一堆标签。然后我们在方法执行周围设置了一个 try-catch 块。然后我们调用“try”块中的代码，如果try块中抛出异常，执行会跳转到栈上异常的lCatchBlockStart标签。示例 catch 块调用 e.printStackTrace()。

我在这个例子中使用了局部变量 1，因为它恰好可用。您可能必须选择其他一些变量——当然您不必**将**异常存储在变量中，但这样做很常见。

除非您在构造 ClassWriter 时使用 COMPUTE_FRAMES 标志，否则您还必须插入 visitFrame() 调用。

```
Label lTryBlockStart = new Label();
Label lTryBlockEnd = new Label();
Label lCatchBlockStart = new Label();
Label lCatchBlockEnd = new Label();
// set up try-catch block for RuntimeException
mv.visitTryCatchBlock(lTryBlockStart, lTryBlockEnd, lCatchBlockStart, "java/lang/RuntimeException");
mv.visitLabel(lTryBlockStart);
// code to call the method goes here
mv.visitLabel(lTryBlockEnd);
mv.visitJumpInsn(GOTO, lCatchBlockEnd); // when here, no exception was thrown, so skip exception handler

// exception handler starts here, with RuntimeException stored on the stack
mv.visitLabel(lCatchBlockStart);
mv.visitVarInsn(ASTORE, 1); // store the RuntimeException in local variable 1
// here we could for example do e.printStackTrace()
mv.visitVarInsn(ALOAD, 1); // load it
mv.visitMethodInsn(INVOKEVIRTUAL, "java/lang/RuntimeException", "printStackTrace", "()V");

// exception handler ends here:
mv.visitLabel(lCatchBlockEnd); 
```

# python - 从子文件夹导入 Python

> ID：15222913
> 
> 赞同：12
> 
> 时间：2013-03-05T11:42:44.103
> 
> 标签：python, python-3.x, python-import

我正在尝试对每个学生在单独文件夹中的一些 python 提交进行评分。为此，有一个函数，比如我要运行的 f()。我知道如果我当前的路径与文件所在的路径相同，我可以简单地做

```
import filename
filename.f() 
```

但是，有没有更好的方法？例如，假设目录结构如下：

```
main.py
student/run_this.py 
```

我知道如果学生文件夹中有“__init__.py”文件，我可以输入

```
import student.run_this 
```

但是，没有该文件，它就无法工作。

我发现的一些类似问题是

*   [从子文件夹导入模块](https://stackoverflow.com/questions/8953844/import-module-from-subfolder)
*   [如何在 Python 中进行相对导入？](https://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python)
*   [http://www.daniweb.com/software-development/python/threads/192000/import-from-a-subdirectory-of-a-directory-on-pythonpath](http://www.daniweb.com/software-development/python/threads/192000/import-from-a-subdirectory-of-a-directory-on-pythonpath)

但这些都没有给出特别令人满意的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T12:25:28.267

在应包含的文件夹中创建一个`__init__.py`模块`student`

```
from . import * 
```

然后，您可以将学生文件夹中的任何模块调用为其父文件夹模块

```
import student.module.py 
```

如果您发布您面临的任何其他错误，我们可以提供进一步的帮助。

# javascript - javascript 检查 DOM 元素是否存在最佳实践

> ID：15222914
> 
> 赞同：11
> 
> 时间：2013-03-05T11:42:45.727
> 
> 标签：javascript, jquery

检查javascript中是否存在DOM元素的最佳实践是什么？

是否应该在使用之前检查一个项目是否存在，像这样？

```
if ($("#" + machineId + packageId.removeSpecialChars().toUpperCase() + "").size() != 0) {
  var row = $("#" + machineId + packageId.removeSpecialChars().toUpperCase() + "");
} 
```

这不会执行`packageId.removeSpecialChars().toUpperCase()`两次吗？

或者这会是更好的选择吗？

```
var row = $("#" + machineId + packageId.removeSpecialChars().toUpperCase() + ""); 
if (row)
{
  // do something
} 
```

但是，找不到时不会抛出异常吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T11:51:15.020

当您实际使用 DOM 元素时，是的，您应该在尝试使用它之前检查它是否存在以避免 JavaScript 错误。但是，您**不是**在使用 DOM 元素，而是在使用一个（可能）包含 DOM 元素的 jQuery 对象。

jQuery 函数已经处理了其元素集中没有匹配项的情况，因此您无需在尝试使用它们之前明确地检查自己是否存在元素。仅当您尝试使用`.get()`函数或`[index]`方括号表示法从该集合内直接引用 DOM 元素时，您才需要这样做。

顺便说一句，[`.size()`](http://api.jquery.com/size/)jQuery 函数在 1.8 版本中被弃用，你应该`length`直接使用 jQuery 对象的属性来检查是否有元素，所以：

```
var $object = $('a-selector');
if($object.length) {
    // there's at least one matching element
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:44:56.330

一般编程约定说*不要重复自己*。因此，在这种情况下，您至少可以只查找一次并保留变量引用：

```
var thing = $("#" + machineId + packageId.removeSpecialChars().toUpperCase() + ""); 
```

然后选择查找不会发生两次，删除多余的方法调用等。这还有一个好处是允许您编写更多不言自明的代码，当您可以将变量命名为有意义的东西时，除了`thing`，或者，*eeek！*, `a`（尽管代码不一定更有意义，但人们*仍然*使用类似的名称`a`！）

```
if (thing != null) { }
if (thing.size() != 0) {

} 
etc. 
```

至于多次调用方法，这往往是不可避免的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T11:47:31.190

最好缓存它：

```
var machId = $("#" + machineId + packageId.removeSpecialChars().toUpperCase());
if (machId.size() != 0) {
   var row = machId;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T11:45:03.083

确实如此，您需要的是：

```
var a = $("#" + machineId + packageId.removeSpecialChars().toUpperCase() + "");
if (a.size()) {
    var row = a;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-05T11:47:11.367

您基本上需要查看 DOM 元素是否存在于您的 HTML 中，但请记住，如果您的 DOM 中不存在该元素，jQuery 不会引发致命错误，但检查是一个好习惯，它增加了一个更安全的在你的代码层上，有一个叫做 .size() 的东西从 1.8 版开始被弃用，所以即使你使用旧版本的 jQuery，也不建议使用，所以目前最好的解决方案是下面的代码：

```
if($('.class').length) { // check if any element with this class exist, if not exist, it return 0 and can not pass the if estatement
    // do something
} 
```

# java - Java switch 语句来处理两个变量？

> ID：15222918
> 
> 赞同：11
> 
> 时间：2013-03-05T11:43:07.740
> 
> 标签：java, variables, int, logic, switch-statement

我正在寻找一种使用单个开关处理两个字符串的方法，我认为这在 Java 中是不可能的。

这是一些我只想通过开关实现的伪代码。

```
 int s1Value = 0;
    int s2Value = 0;
    String s1 = "a";
    String s2 = "g";
    switch (s1 || s2) {
         case "a": s1value = 0; s2value = 0; break;
         case "b": s1value = 1; s2value = 1; break;
         case "c": s1value = 2; s2value = 2; break;
         case "d": s1value = 3; s2value = 3; break;
         case "e": s1value = 4; s2value = 4; break;
         case "f": s1value = 5; s2value = 5; break;
         case "g": s1value = 6; s2value = 6; break;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T12:11:16.850

根据您的要求使用单个开关是不可能的。这与您将要使用 Java 一样接近。

```
 switch (s1)  {
        case "a":  doAC(); break;
        case "b":  doBD(); break;
        default:
            switch(s2) {
                case "c":  doAC(); break;
                case "d":  doBD(); break;
            }
   } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T13:57:48.320

您是否考虑过不使用**switch**语句而是使用查找表？

```
public class MyClass {
    private static final Map<String, Integer> valuesMap;

    static {
         Map<String,Integer> aMap = new HashMap<>();
         aMap.put("a", 0);
         aMap.put("b", 1);
              ..... rest .....
         valuesMap = Collections.unmodifiableMap(aMap);
    }

    public void foo()
    {
       int s1Value = 0;
       int s2Value = 0;

       String s1 = "a";
       String s2 = "g";
       if( valuesMap.containsKey(s1) )
       {
          s1Value = valuesMap.get(s1);
          s2Value = s1Value;
       }
       else if( valuesMap.contansKey(s2) )
       {
          s1Value = valuesMap(s2);
          s2Value = s1Value;
       }
    }
} 
```

如果您需要一组不同的**s2Value**值，那么您可以构建第二个映射来从中提取这些值。

由于您想使用**开关**，我认为这意味着可能的候选者和值是固定的，在开发时间列表中已知，因此使用像这样的静态初始化映射应该不是问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T12:16:31.070

使用单个开关执行此操作的唯一方法是首先合并两个值，找到具有最高优先级的值，然后将开关应用于结果。在您的示例中，s1 和 s2 的最小值，并打开结果。

由于“a”到“g”是一个例子，你需要有一些有意义的方法来首先对实际值进行排名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T12:02:35.227

你可以在不使用开关的情况下做你想做的事，只需写下：

```
s1value = s1.charAt(0)-'a'; //returns 0 if s1value="a", 1 if s1value="b", etc. 
```

我不完全明白你是什么意思

```
(s1 || s2) 
```

你想做这样的事情吗？

```
 int s1Value = 0;
  int s2Value = 0;

  String s1 = "g";
  String s2 = "a";

  char s1char = s1.charAt(0);
  char s2char = s2.charAt(0);
  int myChar = Math.max(s1char, s2char);
  s1Value = s2Value = myChar - 'a'; 
```

**更新**

在评论中，您写道：

*s1="g" 和 s2="g" 在进入 switch 之前，唯一会评估为 true 的 case 是 case "g"，因此 s1Value 和 s2Value 都将变为 6，然后退出 switch。*

所以，我认为你是说 s1 和 s2 用相同的值初始化，所以：

```
 int s1Value = 0;
  int s2Value = 0;

  String s1 = "g";
  String s2 = "g";

  char s1char = s1.charAt(0);
  s1Value = s2Value = s1char - 'a'; //s1Value = s2Value = 6 
```

这应该做你想做的

**更新 2**

*对于 s1="a" 和 s2="d" 我们考虑案例 "a"，对于 s1="c" 和 s2="b" 我们考虑案例 "b"*

尝试这个：

```
 int s1Value = 0;
  int s2Value = 0;

  String s1 = "g";
  String s2 = "a";

  char s1char = s1.charAt(0);
  char s2char = s2.charAt(0);
  int myChar = Math.min(s1char, s2char);
  s1Value = s2Value = myChar - 'a'; 
```

它应该可以解决问题，测试它并让我知道它是否有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-19T14:17:54.630

像这样的语言`scala&python`给你非常强大的东西`patternMatching`，不幸的是，这仍然是 Java 中缺少的功能......

但是有一个解决方案（在大多数情况下我不喜欢），你可以这样做：

```
final int s1Value = 0;
final int s2Value = 0;
final String s1 = "a";
final String s2 = "g";

switch (s1 + s2 + s1Value + s2Value){
    case "ag00": return true;
    default: return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-13T10:18:26.357

基本上，如果您有 N 个真实状态，请将它们设置为字节数组 (ceil(N/8)) 中的位，并使用长表示创建案例。ByteBuffer 包装可能会有所帮助。

# c# - 从右到左提取两个特定单词之间的子字符串

> ID：15222920
> 
> 赞同：0
> 
> 时间：2013-03-05T11:43:17.613
> 
> 标签：c#, regex

**示例字符串**

```
This is an important example about regex for my work. 
```

我可以用这个片段提取**关于正则表达式的重要示例。**[参考](https://stackoverflow.com/questions/7062954/extract-sub-string-between-two-certain-words-using-regex-in-java)`(?<=an).*?(?=for)`

但我想从右到左提取字符串。根据这个问题的例子；第一个位置必须是 (for) 第二个位置必须是 (an)。

我的意思是提取过程可以恢复。

在 else İf 情况下，我尝试了我想做的如下代码，但它不起作用。

```
public string FnExtractString(string _QsString, string _QsStart, string _QsEnd, string _QsWay = "LR")
        {
            if (_QsWay == "LR")
                return Regex.Match(_QsString, @"(?<=" + _QsStart + ").*?(?=" + _QsEnd + ")").Value;
            else if (_QsWay == "RL")
                return Regex.Match(_QsString, @"(?=" + _QsStart + ").*?(<=" + _QsEnd + ")").Value;
            else
                return _QsString;
        } 
```

提前致谢。

**编辑**

我的真实示例如下

```
#Var|First String|ID_303#Var|Second String|ID_304#Var|Third String|DI_t55 
```

当我将两个字符串传递给我的方法时（例如**"|ID_304" 和 "#Var|"**），我想提取**"Second String"**但这个例子与我的真实字符串并没有什么不同，而且我的字符串是可变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:55:54.270

无需向前或向后看！你可以：

```
(.*)\san\s.*\sfor\s 
```

要求空格，`\s`所以你不匹配`an`import*an*t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:28:19.167

当前解决方案中的一个潜在问题是传入的字符串包含特殊字符，需要`Regex.Escape`在连接之前对其进行转义：

```
return Regex.Match(_QsString, @"(?<=" + Regex.Escape(_QsStart) + ").*?(?=" + Regex.Escape(_QsEnd) + ")").Value; 
```

对于您的其他匹配要求`RL`，我不明白您的要求。

# android - 使用 ArrayAdapter 填充微调器

> ID：15222921
> 
> 赞同：0
> 
> 时间：2013-03-05T11:43:18.440
> 
> 标签：android, spinner, adapter

我有一个自定义对象列表，它是从下载的 JSON 数组创建的，我想`Spinner`用列表中的一个字段填充它，但我仍然想保留整个`onItemSelected`. 目前我正在这样做

```
ArrayAdapter<Country> myAdapter = new ArrayAdapter<Country>(Prototype_activity.this, android.R.layout.simple_spinner_item, ValueHolder.countryList)
                spinner.setAdapter(myAdapter);
                spinner.setVisibility(View.VISIBLE); 
```

那么我如何让适配器只使用每个项目中的一个字段呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:47:14.757

> ...并且我想用列表中的一个字段填充 Spinner，但我仍然想保留整个 onItemSelected。

如果要使用`ArrayAdapter`然后实现类的`toString()`方法`Country`以返回`String`所需字段的表示。

# android - 双变量格式

> ID：15222926
> 
> 赞同：2
> 
> 时间：2013-03-05T11:43:35.807
> 
> 标签：android

我有下一行：

```
String.format("%10.6f",transform); 
```

我`String.format`用来强制值以 6 位小数显示，而不是`E`.

但是当`transform`等于`0.040000`我想要的`0.04`结果时。而对于`0.000006`我想要的`0.000006`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:48:43.853

使用 NumberFormat 代替 String.format()：

```
NumberFormat nf = NumberFormat.getInstance();
nf.setMaximumFractionDigits(6);
nf.format(yourNumber); 
```

# android - 如果初始菜单大小为零，则无法单击选项菜单

> ID：15222930
> 
> 赞同：1
> 
> 时间：2013-03-05T11:43:52.573
> 
> 标签：android, android-4.0-ice-cream-sandwich, options-menu

让我们假设，我有两个活动。一个叫做 MainActivity，另一个叫做 PopupActivity。在用户访问 PopupActivity 后，我想在 MainActivity 中有一个上下文菜单。

```
 Main [no menu] --> startActivity() / startActivityForResult() 
    ==> Popup --> back / finish() 
    ==> Main [now has menu]. 
```

**环境细节：**

*   minSDK：10（向后兼容所需）
*   目标SDK：17
*   目标设备：GalaxyTab 2.0

如果 MainActivity 在开始状态下至少有一个元素，我可以通过 onPrepareOptionsMenu 添加/删除所需的菜单项。但是如果 MainActiviy 里面有 0 个菜单元素，android 甚至不会渲染右上角的菜单按钮。

**我的问题是：**

*   我想念什么？
*   如何告诉 android，渲染菜单按钮，因为我想向它添加菜单项。

workaround soultions 是行不通的（比如把Activity分成两个等等），因为整个问题有点复杂，但核心就是这个。我不需要在开始状态的菜单项，我需要它们在第二个。

**main_menu.xml：**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/menu_add" android:title="@string/add"></item>            
    <item android:id="@+id/menu_remove" android:title="@string/remove" ></item>
</menu> 
```

**MainActivity.java**

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu)
{
    if (initState)
    {
        menu.findItem(R.id.menu_add).setVisible(false);
        menu.findItem(R.id.menu_remove).setVisible(false);
    } else
    {
        menu.findItem(R.id.menu_add).setVisible(true);
        menu.findItem(R.id.menu_remove).setVisible(true);
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:53:00.157

首先创建两个菜单。一个用于初始阶段，第二个用于访问 PopupActivity 之后。

将您的 onCreateOptionsMenu() 替换为

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater inflater = getMenuInflater();

   if (initState)
       inflater.inflate(R.menu.invisible_main_menu, menu);
   else
       inflater.inflate(R.menu.visible_main_menu, menu);

    return true;
} 
```

# java - Java 应用程序不能同时处理两个请求

> ID：15222933
> 
> 赞同：0
> 
> 时间：2013-03-05T11:43:58.097
> 
> 标签：java, tomcat6

我有一个 java 应用程序，单击一个按钮会生成一个很重的报告（大约 30 mb excel 报告）。

在单击“生成按钮”之前，有两个文本字段确定您想要多少数据（项目 ID 来自：和项目 ID 到：）。

现在的问题是，当两个同时请求需要所有数据时，谁先按下按钮，报告只为他生成，另一个用户得到空报告。但是如果一个用户需要完整的报告，而另一个用户想要它的一些信息说1000 行，那么两个用户都会得到充满信息的报告。

请给我一些关于在哪里研究以及如何解决这个问题的见解。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:50:53.650

有一个**单例/应用程序范围/Servlet 上下文范围**存储了有关报告的信息。它可以在 Web 层、报表调用层或报表生成层中。实际上，两个请求都设置了这个数据，两个报告生成都读取了这个数据，这就是它造成混淆的原因。

看看你的应用程序的结构，试着找出它可以在哪里。如果您从头开始，您可以描述报告生成的整个过程，也许您可​​以自己实现它，这将是有用的。

# ios - 在 iOS 中将 SKProduct 添加到 NSMutableArray 后出现 SIGABRT 错误

> ID：15222934
> 
> 赞同：0
> 
> 时间：2013-03-05T11:43:58.767
> 
> 标签：ios, uitableview, nsmutablearray, in-app-purchase, sigabrt

我正在将购买的商品添加到数组中，这样我就可以轻松地检索数据并在表格视图中显示它们。但是我收到 sigabrt 错误。下面的代码有什么问题？

表视图

```
if (indexPath.section == 0) {

    switch (indexPath.row) {
        case 0:

            cell.textLabel.text = @"Default Gun";
            break;

        case 1:

            cell.textLabel.text = [[[[GameData sharedData] gunsArray] objectAtIndex:0] localizedTitle];
            break;

        default:
            break;

    }

    - (NSMutableArray *) gunsArray {

        SKProduct *product1 = [[InAppStore sharedStore] getGun1];
        SKProduct *product2 = [[InAppStore sharedStore] getGun2];
        SKProduct *product3 = [[InAppStore sharedStore] getGun3];
        SKProduct *product4 = [[IInAppStore sharedStore] getGun4];

        NSMutableArray *arr = [[NSMutableArray alloc] init];

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"isGun1Purchased"] == YES && ![arr containsObject:product1]) {
            [arr addObject:product1];  // error occurs here

        }
        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"isGun2Purchased"] == YES && ![arr containsObject:product2]) {
            [arr addObject:product2];  

        }
        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"isGun3Purchased"] == YES && ![arr containsObject:product3]) {
            [arr addObject:product3];

        }

        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"isGun4Purchased"] == YES && ![arr containsObject:product4]) {
            [arr addObject:product4];

        }

        return [arr autorelease];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:50:20.377

您可能尝试插入`nil`到数组中（这将导致异常并最终插入 SIGABRT）。因此，检查`product`变量之一是否为`nil`.

哦，您应该切换到 ARC（尽管这与您的问题无关）。

# java - 如何仅修剪整数部分的字符串

> ID：15222940
> 
> 赞同：0
> 
> 时间：2013-03-05T11:44:14.157
> 
> 标签：java, regex

我有一个字符串，它的值可以是`"45"`, `"45.00"`, `"45.0"`,`"45.000"`等`"45.23"`。对于所有这些我想保存`"45"`的都是`0`小数部分，否则就是`"45.23"`.

我该怎么做？我应该为此使用正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:48:04.933

您可以将字符串拆分为小数点并获取第一个元素：

```
java.util.Arrays.toString(testString.split("\\.") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:48:55.213

是的，你可以使用正则表达式，试试这个

```
 s = s.replaceAll("(.?)(\\.0+)?", "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:50:53.997

使用带有 . 作为分隔符

如果第二个令牌为零，则忽略第二个令牌，否则考虑第二个令牌

示例代码

```
StringTokenizer st = StringTokenizer(s,".");
int count = 0;
while(st.hasTokens)
{
 if (count==1)
 {
   // Read the token and compare it to zero and modify the original string s and your further processing
 }
 else{
    st.nextToken();
    count++;
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:22:07.977

使用以下内容：

```
s.replaceAll("\\.0+", "") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T12:22:26.603

好吧，经过一番搜索，我想我已经找到了你要找的东西。不需要正则表达式来做到这一点。Java 中有一个专门用于十进制格式的类，称为[DecimalFormat ，建议您在此](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)[页面](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)中查看如何在 Java 中格式化数字。这是一个例子：

```
 public class NumberFormat {

    public static void main(String[] args){
        DecimalFormat myFormatter = new DecimalFormat("###.##");
        System.out.println(myFormatter.format(45));
        System.out.println(myFormatter.format(45.000));
        System.out.println(myFormatter.format(45.23));
        System.out.println(myFormatter.format(45.258));

    }
} 
```

产生输出：

```
 45
  45
  45,23
  45,26 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T12:22:52.727

我假设您的字符串由`,`, 或分隔`,`。

如果你想要一个双打列表，你可以使用：

```
List<Double> lst = new ArrayList<Double>();
for(String s : yourString.split(",\\s?")) {
    try {
        Double double = Double.valueOf(s);
        lst.add(double);
    } catch(NumberFormatException nfe) {
        nfe.printStackTrace();
    }
} 
```

如果你想要一个数字列表，你可以使用：

```
List<Number> lst = new ArrayList<Number>();
for(String s : yourString.split(",\\s?")) {
    try {
        Double double = Double.valueOf(s);
        if(double == (int)double) {
            lst.add(double);
        } else {
            lst.add((Integer)double.intValue());
        }
    } catch(NumberFormatException nfe) {
        nfe.printStackTrace();
    }
} 
```

# c# - 防止透支

> ID：15222945
> 
> 赞同：1
> 
> 时间：2013-03-05T11:44:27.057
> 
> 标签：c#, winforms

我在面板中有一个仅用于调整的绘制栅格。在这个栅格上，用户可以建立简单的 circuritys。我添加了一些功能，以便用户可以调整连接。问题是超出的一切都被粉饰了。有没有可能做这样的事情？我添加了 2 个屏幕截图，以便更清楚我的意思：

[http://www.pic-upload.de/gal-337018/f5lsv1/1.html](http://www.pic-upload.de/gal-337018/f5lsv1/1.html)

代码：

```
private void UserMovesButton(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Left)
    {
        if (FirstFinished != 0)
        {
            dummy.Color = MainPanel.BackColor;
            Start = connectionButtons[ActualIndex - 1].Location;
            drawline();
            Start = connectionButtons[ActualIndex + 1].Location;
            drawline();
        }
        dummy.Color = Color.Black;
        Control controlToMove = (Control)sender;
        controlToMove.BringToFront();
        controlToMove.Location = new Point(controlToMove.Location.X + e.Location.X - 10,
            controlToMove.Location.Y + e.Location.Y - 10);
        {
            Start = connectionButtons[ActualIndex - 1].Location;
            Stop.X = controlToMove.Location.X + e.Location.X - 10;
            Stop.Y = controlToMove.Location.Y + e.Location.Y - 10;
            FirstFinished = 1;
            drawline();
            Start = connectionButtons[ActualIndex + 1].Location;
            drawline();
            Thread.Sleep(10);
        }
    }
} 
```

（Connectionbuttons 是一个包含按钮的列表）

我已经考虑过使用 z 轴，但 drawline 不支持这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:00:19.973

不确定您的`drawLine()`方法是做什么的，但我假设您使用它来绘制`UserControl`. 那不是正确的做法。您应该从 a 派生`UserControl`，覆盖[OnPaint()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法并在那里进行所有绘画（从最底部的对象开始）。为了确保`OnPaint()`在对数据结构进行更改后调用它，您`Invalidate()`可以`Refresh()`使用`UserControl`.

# watin - 当 WatiN.IE 使用 GoTo 方法转到本地文件时，HTML 内容变得奇怪

> ID：15222949
> 
> 赞同：0
> 
> 时间：2013-03-05T11:44:36.057
> 
> 标签：watin

我想使用 WatiN 测试我的 С# 解析器以进行现场导航。尝试获取页面的html代码如下。

```
var path = "C:\Coding\Projects\Crawler\TestData\akkanto\index.htm";
var browser = new IE();
browser.GoTo(path);
var htmlCode = browser.Html; 
```

在上面代码的过程中，变量“htmlCode”是“ `/r/n<BODY> </BODY>`”。虽然文件 index.html 的内容是

```
<html>
    <title>This is beautiful title.</title>
    <body>This is beautiful text.</body>
<html> 
```

浏览器正确显示文件。为什么我没有在变量 htmlCode 上获得真实的文件内容？框架 4.0 + Visaul Studio 2012 + WatiN-2.1.0.1196。谢谢指教。

**UPD。**[此外，当您转到“ http://google.com](http://google.com) ” 链接时，它只显示本地文件，没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:47:07.743

```
var path = "C:\Coding\Projects\Crawler\TestData\akkanto\index.htm";
Browser browser = new IE();
browser.GoTo(path);
var htmlCode = browser.Html;
Console.WriteLine(htmlCode); 
```

使用浏览器浏览器而不是 var 浏览器。该代码在我的机器上运行良好，具有相同的配置 Framework 4.0 + Visaul Studio 2012 + WatiN-2.1.0.1196

让我知道它是否工作正常。

# windows-phone-7 - 如何通过 PhoneGap 在 windows phone 7.5 上使用推送通知服务？

> ID：15222958
> 
> 赞同：0
> 
> 时间：2013-03-05T11:44:54.667
> 
> 标签：windows-phone-7, cordova, push-notification, phonegap-plugins, mpns

我正在使用**PhoneGap**在 iOS 和 windows phone 7.5 上开发应用程序。

我已经成功地在我的 iOS PhoneGap 应用程序上实现了推送通知，但是我很难在 windows phone 7.5 上做同样的事情。

是否有教程，展示我如何实现它？

我什至找不到通知插件，就像我在 iOS 上所做的那样。

还支持吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:08:51.407

您可以使用适用于 PhoneGap 的 PushWosh SDK 来完成。 [这](http://www.pushwoosh.com/programming-push-notification/windows-phone-7-cordova-sdk-integration-guide/)是一个简短的链接，描述了如何实现它。

# php - 在mysql查询中给出无效查询

> ID：15222959
> 
> 赞同：0
> 
> 时间：2013-03-05T11:44:55.837
> 
> 标签：php, mysql, sql

我有这个查询，我不知道代码有什么问题。

```
 if($_GET['btn1']=="Submit"){    
        $No=$_GET['text_input'];
        $result1=mysql_query("SELECT * FROM  order WHERE `ModelNo`='$No'");
        if (!$result1) { 
        die('Invalid query: ' . mysql_error());
    }
} 
```

这是它给出的错误消息， Invalid query: You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“order WHERE No='1071764”附近使用正确的语法，请有人帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:45:44.680

如您所见`ORDER`，它是 mysql 中的保留关键字，您可以使用反引号对其进行转义。

```
SELECT * FROM  `order` WHERE `ModelNo`='$No' 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

为避免此类问题，请尽可能不要使用列表中的[关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。`:D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:48:24.057

您在这里有几个问题 1\. 键入`order`而不是顺序，因为顺序 - 它是保留的 mysql 字 2\. 对 GET 参数进行一些验证

# c# - 假设嵌套表

> ID：15222963
> 
> 赞同：2
> 
> 时间：2013-03-05T11:45:00.337
> 
> 标签：c#, nested, rendering, aspose

[为ASPOSE.Words](http://www.aspose.com/.net/word-component.aspx "ASPOSE.Words")做研究。一切正常，只剩下最后一件事。问题是如何在表格中渲染表格？在[嵌套表](http://www.aspose.com/docs/display/pdfnet/Create+Nested+Table)文档中，示例数据与表示层紧密耦合。我需要分离数据和表示层。这里的测试很少：

```
[Test]
public void CreateDocumentRecurentalTableInTableTest()
{
  // Structural items are in [], values/data in {}
  //GIVEN (presentation layer)
  const string FileName = "_6CreateDocumentRecurentalTableInTableTest.txt";
  var doc = new Document();
  var builder = new DocumentBuilder(doc);
  builder.Writeln("TEST -- START");

  builder.InsertField(@"MERGEFIELD TableStart:[MyTable] MERGEFORMAT");

  builder.InsertField(@"MERGEFIELD [MyTableCol1] \* MERGEFORMAT");
  builder.InsertField(@"MERGEFIELD [MyTableCol2] \* MERGEFORMAT");

  builder.InsertField(@"MERGEFIELD TableStart:[SubTable] MERGEFORMAT");

  builder.InsertField(@"MERGEFIELD [SubTable.Col1] \* MERGEFORMAT");
  builder.InsertField(@"MERGEFIELD [SubTable.Col2] \* MERGEFORMAT");

  builder.InsertField(@"MERGEFIELD TableEnd:[SubTable] MERGEFORMAT");
  builder.InsertField(@"MERGEFIELD TableEnd:[MyTable] MERGEFORMAT");

  builder.Writeln("\nTEST -- END");

  //WHEN (Data layer)
  using (var dt2 = new DataTable("[SubTable]"))
  {
      dt2.Columns.Add("[SubTable.Col1]");
      dt2.Columns.Add("[SubTable.Col2]");

      dt2.Rows.Add(" {SubTable.Row1.Cont1} ", " {SubTable.Row1.Cont2} ");
      dt2.Rows.Add(" {SubTable.Row2.Cont1} ", " {SubTable.Row2.Cont2} ");
      dt2.Rows.Add(" {SubTable.Row3.Cont1} ", " {SubTable.Row3.Cont2} ");

      using (var dt = new DataTable("[MyTable]"))
      {
          dt.Columns.Add("[MyTableCol1]");
          dt.Columns.Add("[MyTableCol2]");

          dt.Rows.Add(" {MyTable.firstRow} ", dt2);

          doc.MailMerge.ExecuteWithRegions(dt);
          doc.Save(FileName, SaveFormat.Text);
      }
  }

  //THEN
  //Assert...
} 
```

得到结果：

```
TEST -- START
{MyTable.firstRow} [SubTable]«TableStart:[SubTable]»«[SubTable.Col1]»«[SubTable.Col2]»«TableEnd:[SubTable]»
TEST -- END 
```

我想要达到的目标：

```
TEST -- START
 {MyTable.firstRow}  {SubTable.Row1.Cont1}  {SubTable.Row1.Cont2} 
                     {SubTable.Row2.Cont1}  {SubTable.Row2.Cont2} 
                     {SubTable.Row3.Cont1}  {SubTable.Row3.Cont2} 
 {MyTable.nextRow}  
TEST -- END 
```

如果两个表都存储在 DataSet.Tables 中，那么它会为每个表呈现多次：

```
TEST -- START
 {MyTable.firstRow}  {SubTable.Row1.Cont1}  {SubTable.Row1.Cont2} 
 {MyTable.firstRow}  {SubTable.Row2.Cont1}  {SubTable.Row2.Cont2} 
 {MyTable.firstRow}  {SubTable.Row3.Cont1}  {SubTable.Row3.Cont2} 
 {MyTable.nextRow}  {SubTable.Row1.Cont1}  {SubTable.Row1.Cont2} 
 {MyTable.nextRow}  {SubTable.Row2.Cont1}  {SubTable.Row2.Cont2} 
 {MyTable.nextRow}  {SubTable.Row3.Cont1}  {SubTable.Row3.Cont2} 
TEST -- END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:02:17.720

对表示层和数据层代码执行所需的重构，如下所示：

```
public void CreateDocumentRecurentalTableInTableTest()
{

// Structural items are in [], values/data in {}
//GIVEN (presentation layer)
//const string FileName = "_6CreateDocumentRecurentalTableInTableTest.txt";

var doc = new Document();
var builder = new DocumentBuilder(doc);

builder.Writeln("TEST -- START");
builder.InsertField(@"MERGEFIELD TableStart:[MyTable] MERGEFORMAT");
builder.InsertField(@"MERGEFIELD [MyTableCol1] \* MERGEFORMAT");
builder.InsertField(@"MERGEFIELD [MyTableCol2] \* MERGEFORMAT");
builder.Writeln();

builder.InsertField(@"MERGEFIELD TableStart:[SubTable] MERGEFORMAT");
builder.InsertField(@"MERGEFIELD [SubTable.Col1] \* MERGEFORMAT");
builder.InsertField(@"MERGEFIELD [SubTable.Col2] \* MERGEFORMAT");
builder.InsertField(@"MERGEFIELD TableEnd:[SubTable] MERGEFORMAT");
builder.Writeln();

builder.InsertField(@"MERGEFIELD TableEnd:[MyTable] MERGEFORMAT");

builder.Writeln("\nTEST -- END");

//WHEN (Data layer)
DataSet ds = new DataSet();

var dt = new DataTable("[MyTable]");
dt.Columns.Add("[MyTableCol1]");
dt.Columns.Add("[MyTableCol2]");
dt.Columns.Add("[Id]");

dt.Rows.Add(" {MyTable.firstRow} ", "", 0);
dt.Rows.Add(" {MyTable.nextRow} ", "", 1);

var dt2 = new DataTable("[SubTable]");
dt2.Columns.Add("[SubTable.Col1]");
dt2.Columns.Add("[SubTable.Col2]");
dt2.Columns.Add("[Id]");

dt2.Rows.Add(" {SubTable.Row1.Cont1} ", " {SubTable.Row1.Cont2} ", 0);
dt2.Rows.Add(" {SubTable.Row2.Cont1} ", " {SubTable.Row2.Cont2} ", 0);
dt2.Rows.Add(" {SubTable.Row3.Cont1} ", " {SubTable.Row3.Cont2} ", 0);

ds.Tables.Add(dt);
ds.Tables.Add(dt2);

ds.Relations.Add("MyRelation", dt.Columns[2], dt2.Columns[2], true);

doc.MailMerge.CleanupOptions = MailMergeCleanupOptions.RemoveUnusedRegions | MailMergeCleanupOptions.RemoveEmptyParagraphs;

doc.MailMerge.ExecuteWithRegions(ds);

doc.Save(@"C:\Temp\\out.docx");

//THEN

//Assert...
} 
```

这会提供与您想要的完全相同的输出，例如：

```
TEST -- START
 {MyTable.firstRow} 
  {SubTable.Row1.Cont1}  {SubTable.Row1.Cont2} 
  {SubTable.Row2.Cont1}  {SubTable.Row2.Cont2} 
  {SubTable.Row3.Cont1}  {SubTable.Row3.Cont2} 
 {MyTable.nextRow} 
TEST -- END 
```

我叫 Iqbal，是 Aspose 的开发人员布道师。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:59:15.693

简而言之：必须链接数据表（如 RDBMS）。

简而言之：[在此处阅读更多信息](http://www.aspose.com/docs/display/wordsnet/How+to++Set+up+Relations+for+use+in+Nested+Mail+Merge+with+Regions)。

# magento - Magento 体积权重（全局属性）不保存/更新

> ID：15222970
> 
> 赞同：0
> 
> 时间：2013-03-05T11:45:19.667
> 
> 标签：magento

我在 Magento 中有一个全局属性，volume_weight，它没有通过管理控制面板保存。我不知道为什么，无论我使用什么商店视图，它都没有保存。

任何想法从哪里开始寻找问题？我认为它始于我使用 Magmi 导入器，并将体积重量导入不同的商店视图 - 但它是一个全局属性？！

请帮忙！

谢谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T10:34:40.917

这对我有用：

您需要确定所有全局属性的属性 id，然后从`catalog_product_entity_*`表中删除具有上述属性 id 之一且 store id 字段不为零的表中的所有值。

```
DELETE FROM `catalog_product_entity_int` 
WHERE
   store_id <> 0 AND
   attribute_id IN (
           SELECT attribute_id 
           FROM catalog_eav_attribute 
           WHERE is_global = 1

   ) 
```

对表格`catalog_product_entity_varchar`, `catalog_product_entity_text`, `catalog_product_entity_datetime`,执行相同的操作`catalog_product_entity_decimal`。

完成后重建索引。

注意：`catalog_eav_attribute`我编写它的方式中的 select from 也会为您提供全局类别属性的属性 ID，但这并不重要，因为在产品表中您没有类别属性引用。

此外，在尝试此操作之前，请备份您的数据库以防我遗漏了什么。

来源：[https](https://magento.stackexchange.com/a/42763/6501)
://magento.stackexchange.com/a/42763/6501 感谢：[https ://magento.stackexchange.com/users/146/marius](https://magento.stackexchange.com/users/146/marius)

# php - 我应该使用哪种数据库用户架构来为高访问量网站提供服务？

> ID：15222972
> 
> 赞同：0
> 
> 时间：2013-03-05T11:45:23.717
> 
> 标签：php, mysql

我正在创建一个 mysql 数据库以服务于一个频繁访问的网站，并且我正在努力选择如何规则对该数据库的访问。该网站的每个用户都应该拥有对数据库的个人访问权限还是该网站应该访问数据库并为客户服务？

例如，如果我在网站上有 Mike 和 Stanley 用户，我应该在数据库中创建用户 'mike'@'localhost' 和 'stanley'@'localhost' 吗？

或者我应该创建'mywebuser'@'localhost' 来为这两个客户端提供服务，并使用一个存储过程来检查他们访问数据库的能力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:02:04.217

> 例如，如果我在网站上有 Mike 和 Stanley 用户，我应该在数据库中创建用户 'mike'@'localhost' 和 'stanley'@'localhost' 吗？
> 
> 或者我应该创建'mywebuser'@'localhost' 来为这两个客户端提供服务，并使用一个存储过程来检查他们访问数据库的能力？

您肯定想为您的应用程序创建一个用户，而不是为您的应用程序的用户。出于安全原因，请务必仅向该用户授予必要的权限。对于仅在数据库中插入、更新、删除和选择内容的应用程序，您可能不需要 CREATE、ALTER 或 DROP 权限。

在 mysql 连接时检查用户的登录凭据将需要您捕获连接期间抛出的 C 错误，这[通常是一种不好的做法](https://softwareengineering.stackexchange.com/questions/107723/arguments-for-or-against-using-try-catch-as-logical-operators)。

# android - 在android上重新缩放谷歌地图视图？

> ID：15222973
> 
> 赞同：0
> 
> 时间：2013-03-05T11:45:25.070
> 
> 标签：android

我得到了谷歌地图 api v2 的工作，但是当我选择应用程序时，地图是全屏的。我如何使它变小？特别是设置的宽度和高度以及屏幕位置（左上角）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T22:33:33.140

您可以使用布局和 XML 布局文件中的参数来更改大小、位置等。例如，来自 google 的示例代码，用于在屏幕的 4 个象限中显示 4 个地图副本：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map_container"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">
  <LinearLayout
    android:id="@+id/map_container2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:orientation="horizontal">
    <fragment
      android:id="@+id/map1"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_weight="0.5"
      class="com.google.android.gms.maps.SupportMapFragment"
      map:cameraTargetLat="40.72"
      map:cameraTargetLng="-74.00"
      map:cameraZoom="8"/>
    <fragment
      android:id="@+id/map2"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_weight="0.5"
      class="com.google.android.gms.maps.SupportMapFragment"
      map:cameraTargetLat="51.51"
      map:cameraTargetLng="-0.12"
      map:cameraZoom="8"/>
  </LinearLayout>
  <LinearLayout
    android:id="@+id/map_container2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:orientation="horizontal">
    <fragment
      android:id="@+id/map3"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_weight="0.5"
      class="com.google.android.gms.maps.SupportMapFragment"
      map:cameraTargetLat="48.85"
      map:cameraTargetLng="2.35"
      map:cameraZoom="8"/>
    <fragment
      android:id="@+id/map4"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_weight="0.5"
      class="com.google.android.gms.maps.SupportMapFragment"
      map:cameraTargetLat="35.69"
      map:cameraTargetLng="139.69"
      map:cameraZoom="8"/>
  </LinearLayout>
</LinearLayout> 
```

# javascript - 函数上下文中的“this”javascript关键字

> ID：15222985
> 
> 赞同：0
> 
> 时间：2013-03-05T11:45:59.890
> 
> 标签：javascript, function, angularjs, this

我只是想知道“ `this`”关键字在以下函数的上下文中指的是什么：

```
function EditCtrl($scope, $location, $routeParams, Project) {
  var self = this;

  Project.get({id: $routeParams.projectId}, function(project) {
    self.original = project;
    $scope.project = new Project(self.original);
  });

  $scope.isClean = function() {
    return angular.equals(self.original, $scope.project);
  }

  $scope.destroy = function() {
    self.original.destroy(function() {
      $location.path('/list');
    });
  };

  $scope.save = function() {
    $scope.project.update(function() {
      $location.path('/');
    });
  };
} 
```

特别是，我会认为“ `this`”指的是`EditCtrl`功能，但`console.log(typeof this);`打印`object`！

上面的片段取自[http://angularjs.org/#project-js](http://angularjs.org/#project-js)

编辑：这是完整的代码。对不起：我应该把它放在首位......

```
angular.module('project', ['mongolab']).
  config(function($routeProvider) {
    $routeProvider.
      when('/', {controller:ListCtrl, templateUrl:'list.html'}).
      when('/edit/:projectId', {controller:EditCtrl, templateUrl:'detail.html'}).
      when('/new', {controller:CreateCtrl, templateUrl:'detail.html'}).
      otherwise({redirectTo:'/'});
  });

function ListCtrl($scope, Project) {
  $scope.projects = Project.query();
}

function CreateCtrl($scope, $location, Project) {
  $scope.save = function() {
    Project.save($scope.project, function(project) {
      $location.path('/edit/' + project._id.$oid);
    });
  }
}

function EditCtrl($scope, $location, $routeParams, Project) {
  var self = this;

  Project.get({id: $routeParams.projectId}, function(project) {
    self.original = project;
    $scope.project = new Project(self.original);
  });

  $scope.isClean = function() {
    return angular.equals(self.original, $scope.project);
  }

  $scope.destroy = function() {
    self.original.destroy(function() {
      $location.path('/list');
    });
  };

  $scope.save = function() {
    $scope.project.update(function() {
      $location.path('/');
    });
  };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T11:50:28.223

通常`this`是指调用函数的上下文

在您看来，此功能独立于自身，因此`this`意味着当前浏览器窗口/文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:55:14.130

我会假设该函数实际上是一个要被实例化的对象。我想你会在代码的某处找到类似 var myeditctrl = new EditControl(...) 的东西。在这种情况下，这指的是 myeditctrl 对象。

# java - ByteArrayOutputStream 抛出 OutOfMemoryError

> ID：15222986
> 
> 赞同：-1
> 
> 时间：2013-03-05T11:46:03.547
> 
> 标签：java, android, out-of-memory, bytearrayoutputstream

我正在尝试使用以下代码读取图像的字节数组，但它会引发内存不足异常。我已经评论了异常发生的地方。

```
byte[] bBuffer = new byte[300000]; // 
ByteArrayBuffer baf = new ByteArrayBuffer(300000);
int total = 0;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
try
{
    int read = 0;           
    while ((dis.read(bBuffer, 0, bBuffer.length)) != -1) {
        baos.write(bBuffer, 0, bBuffer.length); // Exception occurs here        
        Log.d("outputImageBytes", "Reading Image Bytes: " + bBuffer.length + " " + read++ );
    }
    //baos.flush();
}
catch (Exception e)
{   
    Log.e("outputImageBytes", "Exception Occured while reading image bytes: " + e.getMessage());
    e.getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:57:40.257

您忽略了实际读取了多少字节。

```
int numberofBytesRead=dis.read(bBuffer, 0, bBuffer.length);
baos.write(bBuffer, 0, numberOfBytesRead); 
```

# entity-framework - 有时我删除的数据似乎没有直接使用 Entity Frmaework 执行

> ID：15222989
> 
> 赞同：0
> 
> 时间：2013-03-05T11:46:29.933
> 
> 标签：entity-framework, entity

我使用实体框架。我需要执行 ajax 删除，然后立即执行 ajax 获取。

有时，数据被“真正”删除，然后将其考虑在内。

有时数据没有“已经”删除，因此 get 不是我所期望的。

有没有办法以某种方式“刷新”以强制在发生删除时直接更新数据库？

谢谢。

* * *

更新

```
public class VehicleContext : DbContext
{
    public VehicleContext()
        : base("name=DefaultConnection")
    {
    }

    public DbSet<VehicleModel> Vehicles { get; set; }
} 
```

# c# - 如何为球体（网格）设置点击事件？

> ID：15222993
> 
> 赞同：1
> 
> 时间：2013-03-05T11:46:36.227
> 
> 标签：c#, directx, render, direct3d

![3D设备](../Images/a34c4b6cbcea72b5e1c22b1ee0ff0792.png)

在上图中，您可以看到我的应用程序的一部分。我加载具有不同值的文件，然后解析它们。然后我绘制一个 3D 坐标系来显示 Lab 颜色空间。要绘制每个球体，我使用 Mesh - 函数：

```
/// <summary>
/// Vertex für die Kugel
/// </summary>
struct Vertex
{
    public float x, y, z; // Position of vertex in 3D space
    public int color;     // Diffuse color of vertex

    /// <summary>
    /// Konstruktor der Vertex
    /// </summary>
    /// <param name="_x">X(A) - Position</param>
    /// <param name="_y">Y(L) - Position</param>
    /// <param name="_z">Z(B) - Position</param>
    /// <param name="_color">Die Farbe</param>
    public Vertex(float _x, float _y, float _z, int _color)
    {
        x = _x; y = _y; z = _z;
        color = _color;
    }

    // Das Format des Vertex
    public static readonly VertexFormats FVF_Flags = VertexFormats.Position | VertexFormats.Diffuse;
}

/// <summary>
/// Erstellt das Mesh
/// </summary>
/// <param name="device">Das 3D Device</param>
/// <param name="color">Die Farbe der Kugel</param>
/// <param name="labValues">Die Lab Werte der Kugel</param>
public void createMesh(Device device, Color color, params float[] labValues)
{
    // Erstellt die Kugel mit der Anbindung an das Device
    mesh = Mesh.Sphere(device, radius, slices, stacks);
    // Kopiert das Mesh zum Erstellen des VertexArrays
    Mesh tempMesh = mesh.Clone(mesh.Options.Value, Vertex.FVF_Flags, device);
    // Erstellt den VertexArray
    Vertex[] vertData = (Vertex[])tempMesh.VertexBuffer.Lock(0, typeof(Vertex), LockFlags.None, tempMesh.NumberVertices);

    // Weist jedem Vertex die Farbe und die Position zu
    for (int i = 0; i < vertData.Length; ++i)
    {
        vertData[i].color = color.ToArgb();
        vertData[i].x += labValues[1];
        vertData[i].y += labValues[0] - 50f;
        vertData[i].z += labValues[2];
    }

    // Gibt den VertexBuffer in der Kopie frei
    tempMesh.VertexBuffer.Unlock();
    // Löscht den Mesh aus dem Speicher
    mesh.Dispose();
    // Legt die Kopie in der Meshinstanz ab
    mesh = tempMesh;
} 
```

其中一项功能是缩放设备。现在我想为每个球体添加一个点击事件来显示任何信息。但我不知道如何实现这个事件。球体对象不支持任何事件。

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:05:37.173

我认为如果没有点击处理程序是不可能的，但替代方法是使用某种透明覆盖面板并触发点击事件，然后点击获取鼠标的 x 和 y 位置和尝试从底层面板定位球体，然后您可以从该球体加载信息并显示。

只是一个建议，并开始讨论替代解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:41:54.227

**解决方案：**

[采摘教程](http://www.mdxinfo.com/tutorials/picking.php)

# ruby-on-rails - 表单提交参数缺少authentity_token，仅具有黄瓜功能

> ID：15222996
> 
> 赞同：1
> 
> 时间：2013-03-05T11:46:48.747
> 
> 标签：ruby-on-rails, cucumber, authenticity-token

有一个简单的原因为什么我`form_submits`在我的`Rails 3`应用程序中不使用`authenticity_token`Cucumber 中的集合生成请求，而它们在作为开发（和生产）运行时会生成请求？

该应用程序运行良好，除了在运行 Cucumber 功能测试时重定向到登录。

# c - 在C中返回反转字符串的函数

> ID：15222998
> 
> 赞同：-3
> 
> 时间：2013-03-05T11:47:00.320
> 
> 标签：c, reverse

我需要使用 C 中的一些循环函数来反转字符串
我有这个代码：

```
char *reverse(char *t)
{
    int length = strlen(t);
    for(int i= (length-1);i>=0;i--)
       t[i]=t[i];
    return t;
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T11:48:13.763

您的代码将永远无法工作

```
 t[i]=t[i]; 
```

几乎什么都不做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T11:49:08.630

它不起作用，因为它`t[i] = t[i]`是一个重言式。您可能想要一个额外的计数器并执行类似的操作

```
char temp = t[j];
t[j] = t[i];
t[i] = temp; 
```

一个计数器从`0`到`length/2`，另一个从`length-1`到`length/2`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T11:50:19.067

常规做法是交换两个数组。我在学校练习过:) 希望它有所帮助

```
int length = strlen(t);
    /*declare a new array t2*/
    for(int i= 0;i<=length-1;i++)
       t2[i]=t[length -1];
    return t2; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T11:52:13.417

这应该有效：

```
int right = strlen(s);
int middle = end / 2;
--right;

for (int left = 0; left <= middle; ++left, --right)
{
   char t = s[left];
   s[left] = s[right];
   s[right] = t;
} 
```